# StackOverflow 问答 11546000-11546999

# objective-c - 如何访问文档文件夹

> ID：11546003
> 
> 赞同：2
> 
> 时间：2012-07-18T16:24:34.640
> 
> 标签：objective-c, ios, ipad, itunes

我已将所有日志重定向到应用程序文件夹中的文件。我知道如何通过 xcode 访问它。我必须将我的 ipad 插入 MAC 并通过管理器 - > 设备在 xcode 中我可以访问文档文件夹。现在我想在没有 xcode 的情况下做到这一点。我可以通过 iTunes 或设备访问我的日志文件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T16:49:40.893

是的，您可以通过 iTunes 访问您的数据。

首先，您需要向`UIFileSharingEnabled`info.plist 添加一个新密钥。从下拉列表中选择“应用程序支持 iTunes 文件共享”并选中对应的复选框。

![UIFileSharingEnabled](../Images/46724db1038690d9596d886c0f34a185.png)

当您将 ipad 与 iTunes 同步时，转到您的 ipad -> 选择您的应用程序。您将在应用程序中看到数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:49:14.787

需要将您的应用程序设置为[通过 iTunes 启用文件共享](http://www.raywenderlich.com/1948/how-integrate-itunes-file-sharing-with-your-ios-app)。第 5 步看起来是您唯一需要做的事情才能让它工作。

# c++ - 在 C++ 中将 JSON 转换为 CSV

> ID：11546004
> 
> 赞同：1
> 
> 时间：2012-07-18T16:24:37.437
> 
> 标签：c++, json, excel, csv

我正在尝试将 JSON 数组转换为 C++ 中的 CSV 文件，我很好奇该方法应该是什么。

假设我有一个如下所示的 JSON 数组：

```
[["Bcode","firstname","lastname"],
["11234","richard","nixon"]] 
```

我想将它转换为 .csv ，（据我了解）将是

```
Bcode,firstname,lastname,
11234,richard,nixon 
```

我得到的 JSON 数组似乎已经有一个换行符，所以我可以删除所有的引号和括号，让它成为一个可行的 CSV 文件吗？

或者，是否有任何文件扩展名可以保存 JSON 数组以供 MSExcel 读取？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:36:49.520

没有理由删除引号 - CSV 可以（并且经常）包含它们。每当您可能想在字段中包含逗号时，它们都是必需的（例如，如果您有一个“名称”字段而不是`firstname`单独`lastname`的字段，则值可能是：“尼克松，理查德”。如果您删除引号，它看起来不再像一个单一的领域。

您确实想删除行尾的逗号。

我还会考虑包含嵌入式报价的任何字段。如果没记错的话，JSON 会使用`\"`在字段内发出引用信号。CSV 使用`""`，因此除非您的数据不/不会包含任何嵌入式引号，否则您可能还需要处理替换`\"`为`""`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:02:06.370

形式上来说，JSON 字符串可能包含转义字符，例如“\n”、“\u20AC”。

要处理所有这些情况，您将需要一个 JSON 解析器来解析 JSON 文本。

在您的应用程序中，可以使用 SAX 风格（基于事件）的 API，即从头到尾扫描 JSON 文件，而无需生成中间 DOM（文档对象模型）。

你可以查看[rapidjson](http://code.google.com/p/rapidjson/)，它支持 SAX 风格的 API。

您可以编写一个 CSV 写入器，参考 $rapidjson::Writer$，从事件中输出 CSV 字符串。代码将如下所示：

```
CsvWriter writer(outputStream);
rapidjson::Reader reader;
reader.Parse<0>(inputStream, writer); 
```

然后，reader 在解析输入流时会调用 writer 的成员函数。在您的示例中，它将按以下顺序调用函数：

```
writer.StartArray();
writer.StartArray();
writer.String("Bcode", 5, true);
writer.String("firstname", 9, true);
writer.String("lastname", 8, true);
writer.EndArray();
writer.StartArray();
writer.String("11234", 5, true);
writer.String("richard", 7, true);
writer.String("nixon", 5, true);
writer.EndArray();
writer.EndArray(); 
```

String() 的第二个参数是字符串的长度。第三个参数指示是否应该复制字符串。

使用这些函数调用写出您自己的 CSV 格式应该很容易。

最后，需要注意的是，使用 SAX 风格的 API 将需要更少的内存消耗，但处理程序可能比 DOM 版本更难编写。rapidjson 支持您选择的 SAX 和 DOM 样式 API。

# .net - 对象浏览器不通过 Visual Studio

> ID：11546005
> 
> 赞同：0
> 
> 时间：2012-07-18T16:24:41.503
> 
> 标签：.net, visual-studio-2010, objectbrowser

**如何直接从 Windows 而不是从 Visual Studio 运行对象浏览器**？

我正在使用对象浏览器来学习`.Net`课程。它比 MSDN*好得多*，因为它允许我**跳过**派生成员。

例如，当我研究[AnimationTimeline](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.animationtimeline.aspx)时，我不必费力地浏览所有[时间线](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.aspx)的混乱。我只看到派生的[AnimationTimeline](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.animationtimeline.aspx)添加了什么。它更容易导航。但是，打开 VS 以便我可以使用对象浏览器很麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:54:06.687

试试[Telerik JustDecompile](http://www.telerik.com/products/decompiler.aspx "Telerik JustDecompile")。它不完全是 Visual Studio 的对象浏览器，但它是免费的，而且因为它反编译代码，你可以确切地看到它要做什么。

您还可以找到对特定类、方法或字段的引用。

可用的[扩展](http://www.telerik.com/products/decompiler/extensions.aspx)允许您对没有源代码的程序集中的代码进行[去混淆](https://bitbucket.org/0xd4d/de4dot/)处理或[修改。](http://reflexil.net/)

另一种选择是[ILSpy](http://ilspy.net)。然而，开发似乎在很大程度上停止了对 SharpDevelop 的支持。

# c# - 为什么当输入为 2.0151231E7F 时我没有得到 20151231

> ID：11546007
> 
> 赞同：1
> 
> 时间：2012-07-18T16:25:08.667
> 
> 标签：c#, floating-point

简单的问题：

```
Console.WriteLine("Double: " + 2.0151231E7); 
```

双：20151231

```
Console.WriteLine("Single: " + 2.0151231E7F); 
```

单：2.015123E+07

**为什么？**

* * *

背景：我正在使用一个肥皂网络服务，其中声明了一个元素：

```
<xsd:element name="VALUE_FROM" type="xsd:float" /> 
```

在肥皂响应中，它看起来像这样：

```
<VALUE_FROM>2.0151231E7</VALUE_FROM> 
```

但我得到的是 20151230 而不是 20151231。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T16:30:11.530

20151231 有 25 位二进制数。A[在尾数中](http://en.wikipedia.org/wiki/Single_precision_floating-point_format)`float`只有24 个二进制数字。

所以最后一点不得不去。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T16:29:44.343

它与 Float (IEEE 754) 与 Double 数据类型的精度有关 - 后者具有更高的精度，因此可以完全表示数字。

定义如何在计算机中表示单精度浮点数的[IEEE 754标准仅指定有效数（分数）的 24 位精度（信息）和指数的 8 位信息。](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:31:15.200

这只是因为浮点数（在.Net 中由[System.Single](http://msdn.microsoft.com/en-us/library/system.single%28v=vs.110%29.aspx)表示）根本不够精确。

通过使用双精度而不是浮点数，您可以获得更好的精度，但您仍然会有一些（但要少得多）近似值。

如果您想在不损失任何精度的情况下操作整数，请使用整数类型（int、uint、long、ulong 等...）

从文档中：

> **浮点值和精度损失**
> 
> 请记住，浮点数只能逼近十进制数，并且浮点数的精度决定了该数字逼近十进制数的准确度。默认情况下，Single 值仅包含 7 位精度的十进制数字，尽管内部维护最多 9 位数字。浮点数的精度有几个后果：
> 
> 在特定精度下看起来相等的两个浮点数可能不相等，因为它们的最低有效数字不同。
> 
> 如果使用十进制数，使用浮点数的数学或比较运算可能不会产生相同的结果，因为浮点数可能不完全接近十进制数。
> 
> 如果涉及浮点数，则值可能不会往返。如果一个操作将原始浮点数转换为另一种形式，则称一个值往返，逆运算将转换后的形式转换回浮点数，并且最终的浮点数等于原始浮点数数字。往返可能会失败，因为在转换中丢失或更改了一个或多个最低有效数字。

# api - 一个使用多个 RESTful API 的 Web 应用程序？

> ID：11546011
> 
> 赞同：0
> 
> 时间：2012-07-18T16:25:24.470
> 
> 标签：api, rest, web-applications, soa, restful-architecture

我正在构建一个需要与多个（两个或三个）现有 RESTful API 进行通信的 Web 应用程序。每个 API 提供不同的数据和功能。Web 应用程序本质上会将 API 粘合到一个用户界面中。

基于这种情况，我有几个问题：

1.  这很常见吗？
2.  这是不好的做法还是不好的架构？如果是这样，有哪些替代方案？
3.  （下图#1）我想使用 JavaScript + AJAX 与这些 API 进行交互。我会向不同的域发出 AJAX 请求，并使用不同的绝对 URL 来处理它们吗？例如，[http://api1.domain.com/something](http://api1.domain.com/something)，[http://api.domain.com/something_else](http://api.domain.com/something_else)
4.  （下图#2）我是否应该让我的后端控制器与这些 API 交互，然后让我的前端 (JavaScript) 与我的应用程序的控制器交互，而不是 (3)？本质上，这将是一个门面。

我正在研究 SOA，如果我听起来很无知，请原谅我。FWIW，我打算使用 Ruby on Rails。

图#1：

![在此处输入图像描述](../Images/d418091efff62fa31645aa91e9cee149.png)

图#2：

![在此处输入图像描述](../Images/725eeb1a18a9efc68589ae2d06561708.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:10:22.123

通常，restful api 是应用程序核心的前端，如果需要，我不介意使用不同的 restful api。一些像 jersey 这样的 api 非常容易在任何标准的 Java EE Web 容器中使用，这些容器服务于常见的情况。其他 restful(-ish) api，如 play、lift 等，适用于异步服务彗星请求，从而在单个工作站中产生高性能。

就不同的域而言，这可以抽象到一个域后面，让您的代理服务器进行负载平衡、https 包装等。

# ios - Cocoa - 获取通讯录的所有信息

> ID：11546016
> 
> 赞同：-4
> 
> 时间：2012-07-18T16:25:36.807
> 
> 标签：ios, cocoa, contacts

有什么简单的方法可以在字典中获取我的通讯录上所有联系人的所有信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T21:08:26.163

简单的？我不知道，但有办法。查看 Apple 文档，这里有一个[pdf 文档](http://developer.apple.com/library/ios/DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/AddressBookProgrammingGuideforiPhone.pdf)来帮助概念化这一点。

# pyrocms - PyroStreams 在“文件”之后、图像 url 中的图像名称之前添加一个额外的斜杠？

> ID：11546019
> 
> 赞同：0
> 
> 时间：2012-07-18T16:25:48.247
> 
> 标签：pyrocms

PyroStreams 出于某种原因在 url 中添加了一个额外的斜杠。图像在所有经过测试的浏览器中都能正常显示，但我的客户很担心。我已经检查了我的 .htaccess，但我看不出我会在哪里造成这种情况。这也发生在流接口中，这意味着我在我没有接触过的代码中得到了额外的斜线。

这：

```
<img src="{{ hero:image }}" width="305" alt=""> 
```

产生这个：

```
<img src="http://rococ.co/grandhelo/pyroapp/site/uploads/default/files//ssvs-hero.jpg" width="305" alt=""> 
```

这是 .htaccess 的好方法：

```
# Multiple Environment config
# Set this to development, staging or production
# SetEnv PYRO_ENV production

<IfModule mod_rewrite.c>

# Make sure directory listing is disabled
Options +FollowSymLinks -Indexes
RewriteEngine on

# NOTICE: If you get a 404 play with combinations of the following commented out lines
#AllowOverride All
#RewriteBase /wherever/pyro/is

# Restrict your site to only one domain
# !important USE ONLY ONE OPTION

# Option 1: To rewrite "www.domain.com -> domain.com" uncomment the following lines.
#RewriteCond %{HTTPS} !=on
#RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
#RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# Option 2: To rewrite "domain.com -> www.domain.com" uncomment the following lines.
#RewriteCond %{HTTPS} !=on
#RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
#RewriteCond %{HTTP_HOST} (.+)$ [NC]
#RewriteRule ^(.*)$ http://www.%1/$1 [R=301,L]

# Remove index.php from URL
RewriteCond %{HTTP:X-Requested-With}    !^XMLHttpRequest$
RewriteCond %{THE_REQUEST}              ^[^/]*/index\.php [NC]
RewriteRule ^index\.php(.*)$            $1 [R=301,NS,L]

# Keep people out of codeigniter directory and Git/Mercurial data
RedirectMatch 403 ^/(system\/cms\/cache|system\/codeigniter|\.git|\.hg).*$

# Send request via index.php (again, not if its a real file or folder)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

<IfModule mod_php5.c>
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule>

<IfModule !mod_php5.c>
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

</IfModule> 
```

有谁知道如何制止这种行为，或者有任何见解可以传递给我的客户，解释这不是问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:17:16.703

pyro_streams 图像文件类型中存在错误。

adamfairholm 发布了一个修复： [https ://github.com/pyrocms/pyrocms/commit/f96cf0ac356935faea466c626a6f6ba829dc6684](https://github.com/pyrocms/pyrocms/commit/f96cf0ac356935faea466c626a6f6ba829dc6684)

```
304  304    
     {
305  305    
       $image = $db_obj->row();
306  306    

307     
-      $full = $this->CI->config->item('files:path') . '/' . $image->name;
     307    
+      $full = $this->CI->config->item('files:path').$image->name;
308  308    

309  309    
       $image_data['filename']    = $image->name;
310  310    
       $image_data['image']    = base_url().$full;
...  ...    
@@ -322,8 +322,8 @@ public function pre_output_plugin($input, $params)
322  322    
       if( file_exists( $path . '/'.$plain_name.'_thumb'.$image->extension ) )
323  323    
       {
324  324    

325     
-        $image_data['thumb']    = base_url().$this->CI->config->item('files:path') . '/' . $plain_name.'_thumb' . $image->extension;
326     
-        $image_data['thumb_img']  = img( array('alt'=>$image->name, 'src'=> $this->CI->config->item('files:path') . '/' . $plain_name.'_thumb' . $image->extension) );
     325    
+        $image_data['thumb']    = base_url().$this->CI->config->item('files:path').$plain_name.'_thumb' . $image->extension;
     326    
+        $image_data['thumb_img']  = img( array('alt'=>$image->name, 'src'=> $this->CI->config->item('files:path').$plain_name.'_thumb' . $image->extension) );
327  327    
       }
328  328    
       else
329  329    
       { 
```

# batch-file - 批处理文件不能处理大量数据吗？

> ID：11546020
> 
> 赞同：6
> 
> 时间：2012-07-18T16:25:50.150
> 
> 标签：batch-file

为了自娱自乐，我决定尝试编写一个批处理文件来计算[冰雹序列](https://en.wikipedia.org/wiki/Hailstone_sequence)。但是，我遇到了一些大数字的小问题。

首先，代码：

```
:START
@ECHO OFF
SETLOCAL
SET /P InputVar="Input Number: "
ECHO.
ECHO %InputVar%
SET ItCount=0

:COLLATZ
SET /A ItCount=%ItCount%+1
SET /A Odd=%InputVar%%%2
IF %Odd% EQU 1 (
    SET /A OutputNum=%InputVar%*3+1
) ELSE (
    SET /A OutputNum=%InputVar%/2
)
ECHO %OutputNum%
IF %OutputNum% LSS 1 (
    GOTO ERROR
) ELSE (
    GOTO RECYCLE
)

:ERROR
ECHO.
ECHO ERROR!
GOTO END

:RECYCLE
IF %OutputNum% EQU 1 (
    GOTO FINISH
) ELSE ( 
    SET InputVar=%OutputNum%
    GOTO COLLATZ
)

:FINISH
ECHO.
ECHO Completed in %ItCount% iterations.

:END
ENDLOCAL
PAUSE 
```

这适用于我测试过的几个数字。然而，当我开始测试一个我需要数百次迭代才能完成的新数字时，系统开始返回*负*输出。有趣的是，负输出最终归零。但是，脚本的这种行为根本不是预期的或预期的。

添加错误处理后，这是我得到的输出`8388607`。

![在此处输入图像描述](../Images/932918661663ef8b3ba3d7967c9d5a88.png)

据[谷歌](https://encrypted.google.com/search?&q=725594111*3%2b1)称，下一个数字应该是`2176782334`。

这是命令处理器处理大量数字能力的自然限制吗？类似的操作在 Excel 中运行良好 - 在那里，我能够确定数字应该在 473 次迭代中解析为 1。

我正在运行 Windows 7 SP1 x64。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T16:30:18.853

2176782334 大于 32 位整数可以容纳的值。(2^31 - 1 = 2,147,483,647)。您遇到的是整数溢出（导致负值）。

大多数现代语言都有一种数据类型`long`，允许您保存 -2^64 到 2^64 -1 范围内的整数。甚至还有数据类型允许无限精度整数，例如 Java 的`BigInteger`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T16:29:15.577

批处理文件中可能的最大整数很可能是 2,147,483,647（32 位有符号整数的最大值）。

# java - 在运行 jvm 时更改 HttpURLConnection

> ID：11546023
> 
> 赞同：3
> 
> 时间：2012-07-18T16:26:11.847
> 
> 标签：java, weblogic, jax-ws, sun

是否可以更改 jax-ws 中的 http 处理程序？例如：从 weblogic.net.http.HttpURLConnection 到 sun.net.www.protocol.http.HttpURLConnection。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-05T07:59:04.887

你可以尝试`-DUseSunHttpHandler=true`在weblogic中使用。

**使用 WLST（非集群）管理 weblogic**

在托管服务器 env 脚本中添加 jvm 参数`$WLS_DOMAIN_HOME/bin/setDomainEnv.sh`

```
 JAVA_OPTIONS=-DUseSunHttpHandler=true 
  export JAVA_OPTIONS 
```

**使用 Weblogic 控制台管理 weblogic（集群）**

添加`-DUseSunHttpHandler=true`到 a 或 b 中的参数。

*   在 Admin Console 中导航到`Home` > `Summary of Servers` > `<managed server name>`> `Configuration`> `Server Start`选项卡。

*   在 `$WLS_DOMAIN_HOME/config/config.xml`带有 xml-path的配置文件中`server`>>`server-start``arguments`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:33:44.137

实现你自己的`URLConnectionFactory`，它返回期望的`HttpURLConnection`并在构建**Jersey**客户端时设置它。

```
URLConnectionClientHandler urlConnectionClientHandler = new URLConnectionClientHandler(
    new MyURLConnectionFactory());
Client client = new Client(urlConnectionClientHandler); 
```

# gwt - GWT 对 2 个单元格表进行排序

> ID：11546025
> 
> 赞同：0
> 
> 时间：2012-07-18T16:26:15.107
> 
> 标签：gwt, sorting, celltable

我有一个要求，其中我在同一页面上有 2 个 GWT CellTable。

我们称他们为 A 和 B。

我需要根据 A 上的用户排序活动对 B 的列进行排序。

任何用于实现相同的指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:32:20.163

由于单元格表代表一个大数据集，因此对该数据集的排序应该在代码中的服务器端进行。

如果您在单元格表 A 上获取并更新，则在 B 上为您的服务设置其他排序参数并调用该服务的更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:31:56.233

我无法为您提供示例代码，因为我使用 GWT 已经有一段时间了，但这听起来像是观察者模式的典型案例。表 B 将向表 A 注册，当用户使用该表时，A 将通知其观察者。[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)

# xslt - 如何在不使用模板的情况下在 xslt 中获取父节点属性

> ID：11546033
> 
> 赞同：1
> 
> 时间：2012-07-18T16:26:53.317
> 
> 标签：xslt

xml:

```
<?xml version="1.0"?>
<student_list>
<ID No="A-1">
<name>Jon</name>
<mark>80</mark>
</ID>
<ID No="A-2">
<name>Ray</name>
<mark>81</mark>
</ID>
</student_list> 
```

我的 xsl：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
   <xsl:output method="text" indent="yes"/>

<xsl:template match="/">
    <xsl:apply-templates />
    </xsl:template>

<xsl:template match="//ID">
     ID:string:"
<xsl:value-of select="@No"/>"
          </xsl:template>

    <xsl:template match="name">
      name:string:"<xsl:apply-templates />"
     </xsl:template>

  <xsl:template match="mark">
      mark:string:"<xsl:apply-templates />"
     </xsl:template>

 </xsl:stylesheet> 
```

预期输出： ID:string:"A-1" name:string:"jon" mark:string:"80" ID:string:"A-2" name:string:"Ray" mark:string:"81"

有人请帮忙。

* * *

感谢您的回复，真的很棒，我通过更新上面的代码得到了输出，但是我怎样才能在“文本输出”模式下为每一行换行。我尝试使用这个代码：

```
<xsl:template name="Newline"><xsl:text> 
</xsl:text>
</xsl:template>

line--1
 <xsl:call-template name="Newline" /> 
line--2 
```

但这并没有给我换行符。任何信息都会有所帮助。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:08:09.593

问题是**name**和**mark**元素是**ID元素的子元素，但是在与****ID**匹配的模板中，您没有任何代码来继续处理子元素，因此它们不匹配。

将您的**ID**匹配模板更改为以下内容：

```
<xsl:template match="//ID"> 
   ID:string:"<xsl:value-of select="@No"/>" 
   <xsl:apply-templates /> 
</xsl:template> 
```

如果您担心换行，最好做这样的事情（在哪里用回车换行）

```
<xsl:template match="//ID">
   <xsl:value-of select="concat('ID:string:&quot;', @No, '&quot;&#13;')" />
   <xsl:apply-templates/>
</xsl:template> 
```

或者也许这个......

```
<xsl:template match="//ID">
   <xsl:text>ID:string:"</xsl:text>
   <xsl:value-of select="@No" />
   <xsl:text>"&#13;</xsl:text>
   <xsl:apply-templates/>
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
   <xsl:output method="text" indent="yes"/>

   <xsl:template match="//ID">
      <xsl:value-of select="concat('ID:string:&quot;', @No, '&quot;&#13;')" />
      <xsl:apply-templates/>
   </xsl:template>

   <xsl:template match="name|mark">
    <xsl:value-of select="concat(local-name()), ':string:&quot;', ., '&quot;&#13;')" />
   </xsl:template>
</xsl:stylesheet> 
```

这应该会给你预期的结果。

```
ID:string:"A-1"
name:string:"Jon"
mark:string:"80"
ID:string:"A-2"
name:string:"Ray"
mark:string:"81" 
```

请注意我如何组合**名称**和**标记**模板以共享代码。

# iphone - AFNetworking 和 UIImageView 更新线程问题

> ID：11546035
> 
> 赞同：0
> 
> 时间：2012-07-18T16:27:00.087
> 
> 标签：iphone, objective-c, ios, ipad, afnetworking

所以我有一个带有自定义 UITableViewCells 的 UITableView，在我的自定义单元格中我有一个 UIImageView，我在其中使用 AFNetworking 类别来加载图像：

```
NSString *imageURLString = [[object.image_ valueForKey:@"low_resolution"] valueForKey:@"url"];
    NSURLRequest *imageURLRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:imageURLString] cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:30];
    [self.imageView_ setImageWithURLRequest:imageURLRequest andAnimate:YES placeholderImage:nil success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image){

    }failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error){
        NSLog(@"FAILED");
    }]; 
```

问题是，有时当您向下滚动时.. 在触发图像请求之前似乎有很长的延迟。我正在以非常好的连接进行测试。为什么会这样？

我不确定自己是稍后触发图像请求还是稍后才返回响应。但我看到的是，最初当应用程序加载图像时加载正常。当我向下滚动时，所有图像都是白色的。如果我耐心等待 60 秒，它就会加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:02:57.853

一种可能的解释是，当您向下滚动列表时，您会发送大量`AFNetworking`在后台执行的请求。

当您向下滚动时，发出的请求数量会增加，并且它们可能会以 FIFO 顺序在服务器端提供服务（也可能是服务器在将图像传输到您的应用程序时不会超过给定的带宽），所以当您在看到当前显示的图像之前停止滚动，您必须等待一堆以前的图像加载。

这可以解释为什么你有延迟。我建议将 NSLog 跟踪放在您的成功处理程序中并记录请求 url，这样您就可以看到发生了什么：检查传入图像的流；查看传输每个图像需要多长时间。

一般来说，您尝试做的事情应该没问题，这就是为什么我在考虑由您发送的请求数量触发的服务器端问题。

# r - 在 R 中优化多元函数

> ID：11546036
> 
> 赞同：3
> 
> 时间：2012-07-18T16:27:08.937
> 
> 标签：r, optimization

我有一个多元函数，我想优化一个参数：

```
cost <- function(theta, X, y) {
  m <- nrow(X)
  X <- as.matrix(X)
  J <- sum(-y * log(sigmoid(X %*% theta)) - (1-y) * log(1 - sigmoid(X %*% theta)))/m;
  return(J)
} 
```

为了优化它，我使用了 optim 函数。首先，我创建一个包装器，然后使用 optim 函数优化包装器功能：

```
# X and y initialized before
initial_theta <- rep(0,ncol(X))
wrapper <- function(theta) cost(theta, X=X, y=y)
o <- optim(initial_theta, wrapper) 
```

如何在不创建额外函数的情况下使用 optim 优化多元函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:42:08.417

`optim`接受一个`...`参数，该参数将任何附加输入传递给感兴趣的函数。因此，只要您要优化的参数是感兴趣函数的第一个参数，您就不需要创建新函数。

```
optim(initial_theta, cost, X = X, y = y) 
```

应该提供与创建额外功能相同的功能。

# ios - 设置默认的 iOS 网络剪辑图标标题？

> ID：11546037
> 
> 赞同：17
> 
> 时间：2012-07-18T16:27:11.443
> 
> 标签：ios, mobile-safari

当用户在其 iOS 设备上的 Safari 中并单击“添加到主屏幕”时，是否可以设置默认标题或覆盖生成的标题？

我想这个标题是从 HTML 的`<title>Example.com</title>`标签中提取的。但是，我想只针对具有特定标题的 iOS 设备。

事实上，iOS 引入的标题甚至不是我网站的完整标题；但是，当我手动输入时，iOS 显然会接受更多的字符输入。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-27T18:22:54.583

在 iOS 6 中，现在可以使用以下未记录的`meta`标签手动设置默认 Web 剪辑标题：

```
<meta name="apple-mobile-web-app-title" content="[your title]" /> 
```

感谢 Max Firtman 在他关于[iPhone 5 和 iOS 6 for HTML5 开发人员](http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers)的文章中介绍了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T15:19:35.400

当您“添加到主屏幕”时，iOS 只会查看`<title></title>`您页面上的 。它会截断标题，使其足够短，可以在图标下方显示整个内容，而中间没有“...”。这不是您可以更改的，但是您可以通过更改`<title></title>`用户是否使用服务器端代码或 JavaScript 在 iOS 中打开页面来适应它。

有关 Web 应用程序的更多信息，请参见 Apple 文档：[https ://developer.apple.com/library/safari/#codinghowtos/Mobile/UserExperience/_index.html](https://developer.apple.com/library/safari/#codinghowtos/Mobile/UserExperience/_index.html)

# ios - 类类型冲突ios

> ID：11546041
> 
> 赞同：2
> 
> 时间：2012-07-18T16:27:23.097
> 
> 标签：ios, xcode, header-files

我不知道这是 XCode 中的缺陷还是我在 Obj-C 方面缺乏经验，但我遇到了一个问题，试图在一个包含指向另一个的类中创建属性，而另一个类有一个属性包含指向第一类的指针。

我知道上面可能不清楚，但希望这个例子能说明我的意思：

```
//Class Journal.h

@property (strong) JournalVC *JVC

//Class JournalVC.h
//IVar
Journal *_Journal 
```

在这两个类中，我都导入了另一个类的标题，因此 XCode 知道另一个类。如果我不导入标题，它会抱怨它不知道属性/IVar 应该是什么类型，并且想用它所在的类替换它（JournalVC 作为 Journal，反之亦然）。当两个类都具有另一个类的标头的 import 语句时，也会发生这种情况。

如果只有一个人知道另一个人，这不会发生。当 JournalVC 被 UIVIewController（它的父类）替换并且没有 import 语句时，它可以工作，而 IVar 保持不变并且该标头导入另一个。

我认为问题在于两个标头都在相互导入，这会导致与 XCode 混淆。有没有其他方法可以让一个头文件知道属性的类而没有这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T16:32:06.057

您可以使用`@class`前向声明。不要进行圆形标题导入；相反，只需在 JournalVC 标头中使用以下行声明 Journal 类：

```
@class Journal; 
```

然后，在`JournalVC.m`. 有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/3904663/what-does-class-do-in-objective-c)。

# asp-classic - 在脚本上编辑字体和颜色

> ID：11546042
> 
> 赞同：0
> 
> 时间：2012-07-18T16:27:31.600
> 
> 标签：asp-classic

我的脚本显示文件夹中的所有图像。在第一页上，它显示了所有文件夹的列表。我想将字体更改为 verdana 并将颜色更改为黑色。有谁知道我该怎么做？

```
<%
Const ForReading = 1, ForWriting = 2, ForAppending = 3
Const TristateUseDefault = -2, TristateTrue = -1, TristateFalse = 0

qfolder = request.querystring("f")
if qfolder = "" then
    folderspec = server.mappath(".")
    Set filesys = CreateObject("Scripting.FileSystemObject") 
    Set demofolder = filesys.GetFolder(folderspec) 
    Set folcoll = demofolder.SubFolders
    For Each subfol in folcoll
        folsize = left((subfol.size/1000000), 3)
        folist = folist & "<a href='?f=" & subfol.name & "'><strong title='view'></strong> " & subfol.Name & "" & vbcrlf
        folist = folist & "<BR>"  
    Next
    set filesys = nothing
    Response.Write folist

else

filepath = server.mappath(".") & "\" & qfolder
captionfile = filepath & "\captions.txt"
Set filesys = CreateObject("Scripting.FileSystemObject")
Dim SomeArray()
'caption part
    If filesys.FileExists(captionfile) then
        set file = filesys.GetFile(captionfile)
        Set TextStream = file.OpenAsTextStream(ForReading,TristateUseDefault)
        captioncount = 0
        Do While Not TextStream.AtEndOfStream
            Line = TextStream.readline
            ReDim Preserve SomeArray(captioncount)
            SomeArray(captioncount) = line
            'response.write captioncount & " " & somearray(captioncount) & ""
            captioncount = captioncount + 1
            'Response.write Line
        Loop
        textStream.close
    end if

'folder part
    Set demofolder = filesys.GetFolder(filepath) 
    Set filecoll = demofolder.Files
    filecount = 0
    For Each file in filecoll
        Ext = UCase(Right(File.Path, 3)) 
        If Ext = "JPG" OR Ext = "GIF" OR Ext = "PNG" Then
        on error resume next
        data = SomeArray(filecount)
        on error goto 0
        hrefpath = qfolder & "/" & file.name
        imagepath = "<strong>" & data & "</strong><a href='" & hrefpath & "' title='free image gallery' border=0><img width=200 height=150 src='" & hrefpath & "' border='" & border_size & "' title=""" & data & """ style='border-color: " & border_color & ";'></a>"
        filist = filist & imagepath & vbcrlf
        filist = filist & ""
        filecount = filecount + 1
        data = ""
        end if
    Next
    set filesys = Nothing
    filist = filist & "<small><a href='http://www.allscoop.com/' target='_blank'></a></small>"
%>

<h3><a href="." title="Back"><img src="arrow.jpg" alt="Back" height="16" width="20" /></a>
&nbsp;<%=qfolder%></h3>

<p><%=filist%></p>

<% end if %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:03:33.707

那只是css / html ...

```
<style>
a {
    font-family:Verdana;
    color: #000000;
}
</style> 
```

这使所有链接都变成黑色和绿色......

# iphone - SKProductsResponse 没有回应应用内购买

> ID：11546047
> 
> 赞同：0
> 
> 时间：2012-07-18T16:28:02.750
> 
> 标签：iphone, objective-c, ios, in-app-purchase, app-store-connect

如标题所示，我没有收到 SKProductsResponse 的任何回复。

我是怎么做的：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    //self.tableView.hidden = TRUE;

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(productsLoaded:) name:kProductsLoadedNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(productPurchased:) name:kProductPurchasedNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(productPurchaseFailed:) name:kProductPurchaseFailedNotification object: nil];

    Reachability *reach = [Reachability reachabilityForInternetConnection]; 
    NetworkStatus netStatus = [reach currentReachabilityStatus];    
    if (netStatus == NotReachable) 
    {        
        progressHud = [InAppProgressHud showHUDAddedTo:self.navigationController.view animated:YES];
        progressHud.labelText = @"Pas de connection internet";
        progressHud.detailsLabelText = @"Activez votre 3G ou le WIFI et rééssayez";
        //[self performSelector:@selector(dismissHUD:) withObject:nil afterDelay:3.0];
    } 
    else 
    {        
        if ([InAppPurchaseSingleton sharedHelper].Products == nil) 
        {
            [[InAppPurchaseSingleton sharedHelper] requestProducts];
            progressHud = [InAppProgressHud showHUDAddedTo:self.navigationController.view animated:YES];
            progressHud.labelText = @"Chargement...";
            [self performSelector:@selector(timeout:) withObject:nil afterDelay:30.0];
        }
    }
} 
```

我的要求：

```
-(void)requestProducts 
{
    self.request = [[[SKProductsRequest alloc]initWithProductIdentifiers:productIdentifiers] autorelease];
    request.delegate = self;
    [request start];
} 
```

和响应回调：

```
-(void)productsRequest:(SKProductsRequest *)requestLocal didReceiveResponse:(SKProductsResponse *)response 
{  
    self.products = response.products;

    for (SKProduct *prod in self.Products)
    {
        NSLog(@"Product title: %@" , prod.localizedTitle);
        NSLog(@"Product description: %@" , prod.localizedDescription);
        NSLog(@"Product price: %@" , prod.price);
        NSLog(@"Product id: %@" , prod.productIdentifier);
    }
    self.request = nil;    
   [[NSNotificationCenter defaultCenter] postNotificationName:kProductsLoadedNotification object:products];    
} 
```

问题是回调从未被调用，我没有得到响应，没有任何反应。我什至没有收到错误日志，什么都没有=(

-> 我知道网络连接没问题

-> 我在 ios 5.1 模拟器上尝试过，并且在设备上尝试过，两者的结果相同

-> 我已从 iTunes 连接注销

->我的应用程序BundleId：fr.eamdev.testapp

->版本：0.2 准备上传

->我有 3 个 IAP：fr.eamdev.testapp.package_1、fr.eamdev.testapp.package_2、fr.eamdev.testapp.package_3 // 非消耗品 // 可出售：是 // 准备提交

有人知道吗，我在这里很绝望 TT.TT 所以你知道我已经通过了 Troy Brant 的应用内购买：完整演练和 Ray Wenderlich 的教程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:49:07.060

这里有几件事要检查。

试试4.3 sim。当我在 4.3 sim 上调用它时，我在日志中收到一条错误消息：- 2012-07-18 18:45:03.501 shadowslide[10598:13703] ：在模拟器中立即失败

它在 5.1 sim 中正常工作。这将告诉您是否可以正常拨打电话。

您发布的所有代码对我来说都很好（自动发布？不使用 ARC？），所以我想知道您是否对单例有问题（希望您不会感到受到侮辱 :)）。如果单例创建失败，那么其他调用将静默失败。由于您没有存储来自单例共享帮助程序的返回，因此您将无法在调试器中检查它。

希望这可以帮助

# objective-c - 删除（嵌套）括号的正则表达式

> ID：11546048
> 
> 赞同：3
> 
> 时间：2012-07-18T16:28:05.143
> 
> 标签：objective-c, regex, nsstring

我正在使用 DOM 将 Wikipedia 文章作为 NSString 获取，然后使用 NSString stringByReplacingOccurrencesOfString:withString:options:range: 删除不需要的东西。我正在使用正则表达式，我对此没有太多经验。通过阅读 Apple 的文档并尝试我能够做到这一点

```
"\\[[\\w]+\\]" 
```

从维基百科文章中删除括号的正则表达式。这工作得很好，因为括号没有嵌套。

现在我正在尝试从 NSString 中删除括号（包括其中的所有内容（和嵌套的））。我在嵌套部分遇到问题。有了这个

```
\\s+\\([^\\)]*+\\) 
```

正则表达式我能够删除一组括号，包括它之前的空格（所以我不会在删除之后得到重复的空格）。我可以使用什么正则表达式来做同样的事情，但也可以删除嵌套括号？

我目前的实施将改变这一点

> 敏捷的棕色（略带红色）狐狸跳过了懒惰的（他老了（26 岁）并且筋疲力尽）。

进入这个

> 敏捷的棕色狐狸跳过了懒惰和筋疲力尽的）狗。

而想要的结果是这样的

> 敏捷的棕色狐狸跳过了懒惰的狗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:22:53.227

我想到了。此方法将返回没有嵌套括号的字符串。

```
-(NSString*)stringWithoutParentheses:(NSString*)input{
     NSString *expression = @"\\s+\\([^()]*\\)";
     while ([input rangeOfString:expression options:NSRegularExpressionSearch|NSCaseInsensitiveSearch].location!=NSNotFound)
     {
          input = [input stringByReplacingOccurrencesOfString:expression withString:@"" options:NSRegularExpressionSearch|NSCaseInsensitiveSearch range:NSMakeRange(0, [input length])];
     }
     return input;
} 
```

使用这种方法，通过

> 敏捷的棕色（略带红色）狐狸跳过了懒惰的（他老了（26）并且筋疲力尽）狗。

将返回

> 敏捷的棕色狐狸跳过了懒惰的狗。

# java - 是否可以获得对 ExpandoValue 实例/记录进行更改的用户（或用户 ID）？

> ID：11546053
> 
> 赞同：2
> 
> 时间：2012-07-18T16:28:38.117
> 
> 标签：java, liferay

在 Liferay 5.2.x 中，我试图获取触发`ExpandoValue`实例/记录更改的用户或用户 ID。这可能吗？

自定义属性/扩展数据模型由`ExpandoTable`、`ExpandoColumn`、`ExpandoRow`和表示`ExpandoValue`。 `ExpandoValue`似乎没有字段来跟踪谁进行了最后一次更改。我需要做什么才能添加一个？这是一个好主意吗？

或者，我有一个`ExpandoValueListener`模型监听器。不过，模型侦听器似乎与任何特定请求分离，因为侦听器方法会“响应地”触发模型中的更改。接口中的任何方法标头都不`ModelListener`包含任何类型的请求，甚至不包含 ServiceContext（由请求构建）。

尽管如此，有没有一种方法可以访问请求、ServiceContext 或其他一些机制来从任何 ModelListener 方法（可能是其中一种方法）中获取当前的 UserId `onBefore*()`？我见过有人推荐使用`PrincipalThreadLocal`，但有时似乎会返回`null`。

有任何想法吗？我是否需要只捕获按钮单击？我试图避免这种情况，因为它比数据库触发器或模型侦听器更混乱且更难维护。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:05:22.070

看起来 Liferay 6 通过添加一个`ServiceContextThreadLocal`包含一堆`ServiceContext`s 的类来解决这个问题。此外，还`BasePersistenceImpl`包含一个

`public T update(T model, boolean merge, ServiceContext serviceContext)`

推送上下文，触发模型侦听器，然后弹出上下文的便捷方法。这个想法是，您可以`ServiceContext`从`ServiceContextThreadLocal`现在开始，在`ModelListener`正在实施的过程中获得。

我不会尝试在 Liferay 5.2.x 中模仿这一点，因为以这种方式修改持久层超出了我的项目范围。归根结底，我想我只是在单击按钮时从 struts processAction 调用存储过程。

从代码维护和可读性的角度来看，这可能是处理这个问题的最糟糕的方式，但也促成了这个决定的事实是我只有三个这样的事件，而且我的时间很短。希望当我可以升级到 Liferay 6 时，我可以将它们折叠到 modelListener / serviceContext 中。

# javascript - jQuery UI，滑出一个Div，滑入Next

> ID：11546054
> 
> 赞同：3
> 
> 时间：2012-07-18T16:28:42.170
> 
> 标签：javascript, jquery, jquery-ui

我目前有一个包含两个主要 div 的布局，两者都必须是全宽和全高，但显然你一次只能看到一个。

在两者之间交换时，我想要一个很好的过渡，而不是简单的淡入淡出/显示。

我试图让一个 div 在另一个 div 滑入的同时滑出，但由于定位和布局，一个 div 被迫在下一个 div 之下。

图片显示问题： ![在此处输入图像描述](../Images/ed796edf1e5e25a91a290926d2f24c19.png)

![在此处输入图像描述](../Images/a8db70f96ad7519fcf874632efe88d5f.png)

这是一个显示问题的小提琴：http: [//jsfiddle.net/bazzlad/spbyk/1/](http://jsfiddle.net/bazzlad/spbyk/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T16:30:20.380

改变：

```
#test {
    background: #fff;
    height: 100%;
    display: none;

} 
```

到：

```
#test {
    background: #fff;
    width: 100%;
    height: 100%;
    display: none;
    position: absolute;
} 
```

**JsFiddle**：http: [//jsfiddle.net/spbyk/3/](http://jsfiddle.net/spbyk/3/)

享受和好运！

# python - Python TCP服务器

> ID：11546060
> 
> 赞同：0
> 
> 时间：2012-07-18T16:29:09.130
> 
> 标签：python, multithreading, tcpserver

我有一个简单的问题。

例如，当我使用示例代码创建 python TCPServer 时：

```
import sys, SocketServer, os
from multiprocessing import Pool, Queue

class MyTCPHandler(SocketServer.BaseRequestHandler):
    def handle(self):
                # self.request is the TCP socket connected to the client
                self.data = self.request.recv(1024).strip()
                print "{} wrote:".format(self.client_address[0])
                print self.data
                # just send back the same data, but upper-cased
                self.request.sendall(self.data.upper())

if __name__ == '__main__':

    pool = Pool(processes=2)

    HOST, PORT = "localhost", 9999
    server = SocketServer.TCPServer((HOST,PORT), MyTCPHandler )
    server.serve_forever() 
```

我的问题是：如何将对象池传递给 MyTCPHandler 类的函数句柄？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:36:21.953

如果你想要一个多线程`TCPServer`，你可以`ThreadingMixIn`像这样使用 mixin 类：

```
import SocketServer

class ThreadedTCPServer(SocketServer.ThreadingMixIn, SocketServer.TCPServer):
    pass 
```

您也可以`ForkingMixIn`像以前一样使用基于 fork 的 TCPServer。

更多信息可以在[文档](http://docs.python.org/library/socketserver.html#asynchronous-mixins)中找到。

# javascript - 如何在用户单击按钮之前保留窗口消息而不离开页面？

> ID：11546061
> 
> 赞同：0
> 
> 时间：2012-07-18T16:29:10.223
> 
> 标签：javascript, dojo

我需要创建带有在用户尝试离开页面时弹出的窗口的 dojo 按钮。

```
dojo.addOnUnload(window, "test");
function test() {
  if(hasPendingChange){
    //function goes here i believe
  }
} 
```

我很确定这是正确的格式，但是它正在离开页面而不是等待用户的响应。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:59:12.807

您不能覆盖 beforeunload 的默认实现。

可以将事件处理程序连接到 window.onbeforunload 但是，多个处理程序是一个问题，因为结果可能与您的预期不同。

`window.onbeforeunload`是一个函数，由原生 JS 引擎调用，它需要一个`String`. 它将（总是）弹出一个本机`confirm(str)`对话框，即 - 如果有`str`beforeunload 函数返回。

阻止它弹出的唯一方法`confirm`是进行阻塞调用（如`dijit.Dialog{..}).show(); while(1)`），这并不可行，我相信你会知道的。此外，您还必须告诉用户，在对话框中选择“否”，当您打破无休止的 while 时，该对话框最终会弹出 :)

所以，明智的例子

```
var g_ChangesMade = false;
window.onbeforeunload = function() {
    return (g_ChangesMade == true ? "Leaving Page with unsaved changes" : null);
} 
```

将显示带有字符串的确认对话框 - 如果进行了全局 _ 更改

```
 --------------------
  | Leaving Page...  |
  |                  |
  |  Ok     Cancel   |
  -------------------- 
```

# c# - 如何在 C# 中调整 8bpp 位图图像的大小？

> ID：11546064
> 
> 赞同：0
> 
> 时间：2012-07-18T16:29:21.023
> 
> 标签：c#, image, bitmap

这是为了重复识别。

我可以将图像转换为 8bpp 位图，但由于它是索引像素格式，我不知道如何将其缩小。无论如何都可以在不将其更改为更高像素格式的情况下进行操作（这会引入更多不需要的颜色）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:04:58.980

这是 2D 计算机图形学中的常见问题。需要问的总体问题是您想要完成什么。是吗：

1.  您是否想要一个更小的每像素 8 位图像，以更小的形式最接近地表示原始图像？
2.  您是否想要具有与原始图像相同的索引颜色图（调色板）的每像素 8 位的较小图像？

例如，当我设计在 8bpp 显示器上运行的 2D 游戏时，我要求艺术家以 24 位彩色全分辨率制作所有原始源图像。然后，我创建了一个工作流程，一次性统一了他们的调色板，因此他们都使用了优化的调色板并尽可能准确地表示出来。如果这是您的情况，我建议您返回原始源图像并将其重新转换为较小的尺寸。

有时，我正在做一个一次性的实验，或者在飞行中处理艺术，我不在乎确保所有图像都使用相同的调色板。在这种情况下，我会在内存中将图像转换为 24bpp，使用双三次插值（这是一种高质量的调整大小算法）调整它的大小，然后将其重新转换回 8bpp。缺点是这样做会为调整大小的图像生成一个新的独特的调色板。

但是，如果您真的想在不更改调色板且内部不上转换为 24bpp 的情况下调整图像大小，则必须使用两个非常糟糕的选择之一：您可以使用抖动来尝试根据尺寸图选择最佳颜色 - a这个过程很棘手，需要仔细跟踪您的颜色错误 - 或者您可以简单地放下扫描线，直到图像与您想要的正确尺寸匹配。

作为参考，像 Neo Geo 这样的传统 2D 游戏机采用了“line drop”方法，这导致它们在今天出现了古朴和锯齿状的图形外观。现代控制台总是以 16、24 或 32 位颜色重新采样图像，有时甚至使用浮点来表示颜色值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:45:35.917

通常，当您缩小图片时，您会对颜色进行某种插值。想象一下，你有一张 2x2 的图片，顶部的两个像素是黑色的，底部的 2 个像素是白色的。您想将其缩小为 1x2 图片。这两个像素将是黑色和白色的混合，即灰色。

```
BB  -->   GG
WW 
```

其中 G = 灰色（50% 黑色，50% 白色），B = 黑色，W = 白色。
但是，最终图像中的灰色在原始图像中不存在。对于索引图像，这是一个问题。您可以选择一个像素（随机或使用某种算法）：

```
BB  -->   BW
WW 
```

或插值，然后选择索引中最接近插值结果的颜色。因此，也许您的索引中没有 50% 的灰色，但您确实有 40%。那将非常接近，因此您可以选择它。如果没有足够接近的颜色，您可以回退到第一种方法。

第三，您可以转换为普通位图，调整大小，然后转换回索引，但根据您对问题的措辞，您似乎想避免这种情况。

# session - 在不退出的情况下刷新/重新启动 PowerShell 会话

> ID：11546069
> 
> 赞同：44
> 
> 时间：2012-07-18T16:29:40.023
> 
> 标签：session, powershell, restart

我一直在调整我的 PowerShell 配置文件中的一些脚本，退出 powershell 然后重新启动它很烦人，所以它会加载我对我的配置文件中的脚本所做的任何更改。是否可以在不退出的情况下重新启动 powershell 会话？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-18T16:40:01.193

您可以`. $profile`再次获取配置文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T18:50:47.977

@manojlds 的回答是正确的，但最终可能会引发错误。例如，如果您在配置文件中定义了一个新的 PSDrive，那么重新点源它可能会导致错误。

另一种方法是首先启动 powershell，然后通过键入 PowerShell 立即启动另一个版本。我在嵌套控制台中对我的配置文件进行了更改，退出，然后重新运行 PowerShell 以测试更新的配置文件。

另一件事 - 缓慢而谨慎地更改配置文件。在我看来，虽然配置文件确实需要发展，但这种发展通常应该是缓慢的。嗯嗯！！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-03-08T22:25:28.343

这将在同一个控制台窗口中启动一个新会话，重新加载您的配置文件：

```
Invoke-Command { & "powershell.exe" } -NoNewScope # PowerShell 5
Invoke-Command { & "pwsh.exe"       } -NoNewScope # PowerShell 7 
```

或者更长但更健壮的命令，以下应该可以跨版本正常工作：

```
Get-Process -Id $PID | Select-Object -ExpandProperty Path | ForEach-Object { Invoke-Command { & "$_" } -NoNewScope } 
```

当然，您将丢失前一会话中的所有变量等。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-02-04T12:09:24.420

您可以制作一个简单的函数并将其添加到您的`$profile`（或制作一个模块然后导入到'$profile'），例如：

```
function Restart-PowerShell{
    Start-Process PowerShell # Launch PowerShell host in new window
    exit # Exit existing PowerShell host window
}
# Add any alias if you want, for ex. rps (rp already occupied by "Remove-ItemProperty”)
Set-Alias -Name rps -Value Restart-PowerShell 
```

注意：虽然这可能与您在“w/out exiting”问题的标题中所写的不完全一样，但如果实质上您的初衷是有某种重启 PowerShell 主机命令（这在 PS 中不可用默认情况下）然后它将完成工作......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-15T20:18:43.807

这是对@Bad 答案的扩展。这将处理 ISE（因为我一直使用它）。

这个想法是，如果您在 ISE 中，它将重新启动 ISE。如果您使用的是普通 PowerShell，它将重新启动普通 PowerShell。`Get-PSHostProcessInfo`返回有关当前 PowerShell 会话的信息，可让您确定您是否正在运行 ISE。

```
function Restart-PowerShell
{
    if((Get-PSHostProcessInfo).ProcessName.Contains('powershell_ise'))
    {
        Start-Process 'powershell_ise.exe'
    } else {
        Start-Process 'powershell.exe'
    }
    exit
} 
```

# accessibility - JAWS 表单模式，读取 div 中的文本

> ID：11546070
> 
> 赞同：1
> 
> 时间：2012-07-18T16:29:43.390
> 
> 标签：accessibility, wai-aria, jaws-screen-reader

我试图让盲人用户可以访问我的数据库，并且可以预见会有很多麻烦。

我发现添加 role='application' 并立即将 JAWS 置于表单模式可以使我的网站的选项卡和行为更加可预测。但是，我不知道如何让它阅读简单的文本。

例如。假设我有一个看起来像这样的表格

```
<form method='post'>
<input type='text' title='First Name' name='firstname'>
<input type='text' title='First Name' name='lastname'>
<div tabindex='0'>In this next section, make sure you do XYZ when filling things out</div>
<select name='question1' title='Question 1'>The Options</select>
<select name='question2' title='Question 2'>The Options</select>
<select name='question3' title='Question 3'>The Options</select>
<input type='submit' value='Submit'></form> 
```

如何使屏幕阅读器读取 div “在下一部分中，确保...”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T23:16:34.447

您可以添加`aria-describedby="ID_Here"`到`<select>`，所以它会变成：

```
<input type='text' title='First Name' name='lastname'>
<div tabindex='-1' id="instruct">In this next section, make sure 
you do XYZ when filling things out</div>
<select name='question1' title='Question 1' aria-describedby="instruct">The Options</select> 
```

您可能希望将适用部分的问题包装在 a`<fieldset>`中，以显示问题集是在一起的。

> 但是我不喜欢`<fieldset>`s的样子！

好的，使用您最喜欢的搜索引擎来了解如何使用 CSS 设置样式。

还

```
<input type='text' title='First Name' name='lastname'> 
```

***请***改掉你的坏习惯，不要用`title`，用`<label>`。有关更多详细信息，请参阅[我关于标题的其他答案。](https://stackoverflow.com/a/11163133/1276124)

您可能还想重新考虑使用`role="application"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T02:12:55.477

您的`<div>`标签看起来像一个标题，由于您没有使用语义标题 h1 - h6，JAWS 将无法确定文档的结构。为了使其可读，您可以添加 role="heading" 并指定 aria-level 如果您愿意，JAWS 将获取文本，例如：

```
<input type='text' title='First Name' name='firstname'>
<input type='text' title='First Name' name='lastname'>
<div role="heading" aria-level="4">In this next section, make sure you do XYZ when filling things out</div>
<select name='question1' title='Question 1'>The Options</select> 
```

并且正如 Ryan 所提到的，如果您不能使用可见标签，只需将 aria-label 添加到您的表单输入中。例如：

```
<input type='text' title='First Name' name='lastname' aria-label="First Name"> 
```

# c++ - g ++中的优化级别-O3危险吗？

> ID：11546075
> 
> 赞同：268
> 
> 时间：2012-07-18T16:29:58.397
> 
> 标签：c++, optimization, g++, compiler-flags

我从各种来源（尽管主要来自我的一位同事）听说，使用`-O3`g++ 中的优化级别进行编译在某种程度上是“危险的”，除非证明有必要，否则一般应避免。

这是真的吗？如果是，为什么？我应该坚持`-O2`吗？

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2012-07-18T16:40:09.277

在 gcc（2.8 等）的早期和 egcs 时代，redhat 2.96 -O3 有时会出现很多问题。但这是十多年前的事了，-O3 与其他级别的优化（在 buggyness 中）没有太大区别。

然而，由于更严格地依赖于语言的规则，尤其是极端情况，它确实倾向于揭示人们依赖未定义行为的情况。

作为个人说明，我多年来一直使用 -O3 在金融领域运行生产软件，并且还没有遇到如果我使用 -O2 就不会出现的错误。

根据大众的需求，这里增加一个：

-O3 尤其是附加标志，如 -funroll-loops（-O3 未启用）有时会导致生成更多机器代码。在某些情况下（例如在具有异常小的 L1 指令缓存的 CPU 上），这可能会导致速度变慢，因为例如某些内部循环的所有代码现在不再适合 L1I。通常 gcc 会努力不生成这么多代码，但由于它通常会优化通用案例，因此可能会发生这种情况。特别容易出现这种情况的选项（如循环展开）通常不包含在 -O3 中，并在手册页中相应地标记。因此，使用 -O3 生成快速代码通常是一个好主意，并且仅在适当时（例如，当分析器指示 L1I 未命中时）回退到 -O2 或 -Os（尝试优化代码大小）。

如果您想将优化发挥到极致，您可以通过 --param 在 gcc 中调整与某些优化相关的成本。另外请注意，gcc 现在能够将属性放在仅控制这些函数的优化设置的函数中，因此，当您发现 -O3 在一个函数中存在问题时（或只想为该函数尝试特殊标志），您不需要使用 O2 编译整个文件甚至整个项目。

otoh似乎在使用-Ofast时必须小心，它指出：

> -Ofast 启用所有 -O3 优化。它还支持并非对所有符合标准的程序都有效的优化。

这使我得出结论， -O3 旨在完全符合标准。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-11-14T18:46:17.693

在我有点曲折的经验中，应用`-O3`到整个程序**几乎总是**会使它变慢（相对于`-O2`），因为它打开了激进的循环展开和内联，使程序不再适合指令缓存。对于较大的程序，`-O2`相对于`-Os`!

for 的预期使用模式`-O3`是，在对程序进行概要分析之后，您手动将其应用于少数包含关键内部循环的文件，这些内部循环实际上受益于这些激进的空间换速度权衡。较新版本的 GCC 具有配置文件引导的优化模式，可以 (IIUC) 选择性地将`-O3`优化应用于热功能 - 有效地自动化此过程。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-07-18T18:12:48.350

-O3 选项除了低级别“-O2”和“-O1”的所有优化之外，还启用更昂贵的优化，例如函数内联。“-O3”优化级别可以提高生成的可执行文件的速度，但也可以增加其大小。在这些优化不利的某些情况下，此选项实际上可能会使程序变慢。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-08-25T20:17:14.183

是的，O3 更麻烦。我是一名编译器开发人员，在构建我自己的软件时，我发现了由 O3 生成有缺陷的 SIMD 汇编指令引起的清晰而明显的 gcc 错误。据我所见，大多数生产软件都附带 O2，这意味着 O3 在测试和错误修复方面受到的关注较少。

Think of it this way: O3 adds more transformations on top of O2, which adds more transformations on top of O1\. Statistically speaking, more transformations means more bugs. That's true for any compiler.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-25T15:01:43.287

最近我在使用`g++`. 该问题与 PCI 卡有关，其中寄存器（用于命令和数据）由内存地址表示。我的驱动程序将物理地址映射到应用程序中的一个指针，并将其提供给被调用的进程，它可以像这样使用它：

```
unsigned int * pciMemory;
askDriverForMapping( & pciMemory );
...
pciMemory[ 0 ] = someCommandIdx;
pciMemory[ 0 ] = someCommandLength;
for ( int i = 0; i < sizeof( someCommand ); i++ )
    pciMemory[ 0 ] = someCommand[ i ]; 
```

该卡没有按预期运行。当我看到程序集时，我明白编译器只写入`someCommand[ the last ]`了`pciMemory`，省略了所有前面的写入。

总而言之：在优化时要准确和专注。

# c - 错误：参数类型不兼容

> ID：11546076
> 
> 赞同：3
> 
> 时间：2012-07-18T16:29:57.887
> 
> 标签：c, list, gcc, types, arguments

我正在用 C 写一个列表。下面是源代码：

```
#include <stdio.h>
#include <stdlib.h>

struct list {
 int value;
 struct list *next;
};

typedef struct list ls;

void add (ls **head, ls **tail, int val)
{
 ls *new, *tmp1, *tmp2;

 if (NULL == *head)
 {
    new = (ls*)malloc(sizeof(ls));
    *head = new;
    *tail = new;
    new->value = val;
    new->next = NULL;

    return;
 }

 else
 {
    tmp1 = *head;
    tmp2 = tmp1->next;
    while (tmp2 != NULL)
    {
        tmp1 = tmp2;
        tmp2 = tmp1->next;
    }

    new = (ls*)malloc(sizeof(ls));
    new->value = val;
    new->next = NULL;
    *tail = new;

    return;
 }
}

void show (ls **head, ls **tail)
{
 int i;
 ls *tmp;

 while (tmp->next != NULL)
 {
    printf("%d: %d", i,  tmp->value);
    i++;
    tmp=tmp->next;
 }

 return;
}

int main (int argc, char *argv[])
{
 ls *head;
 ls *tail;
 int n, x;

 head = (ls*)NULL;
 tail = (ls*)NULL;

 printf("\n1\. add\n2\. show\n3\. exit\n");
 scanf("%d", &x);
 switch (x)
 {
    case 1:
        scanf("%d", &n);
        add(*head, *tail, n);
        break;

    case 2:
        show(*head, *tail);
        break;

    case 3:
        return 0;

    default:
        break;
}

 return 0;
} 
```

当我用 gcc 编译它时

```
gcc -o lab5.out -Wall -pedantic lab5.c 
```

我收到奇怪的错误：

```
lab5.c: In function ‘main’:
lab5.c:84:3: error: incompatible type for argument 1 of ‘add’
lab5.c:16:6: note: expected ‘struct ls **’ but argument is of type ‘ls’
lab5.c:84:3: error: incompatible type for argument 2 of ‘add’
lab5.c:16:6: note: expected ‘struct ls **’ but argument is of type ‘ls’
lab5.c:88:3: error: incompatible type for argument 1 of ‘show’
lab5.c:52:6: note: expected ‘struct ls **’ but argument is of type ‘ls’
lab5.c:88:3: error: incompatible type for argument 2 of ‘show’
lab5.c:52:6: note: expected ‘struct ls **’ but argument is of type ‘ls’ 
```

对我来说一切都好...

参数类型`ls**`不是`ls`编译器所说的。

有人看看有什么问题吗？

PS。我知道没有必要`*tail`作为参数给出并且它没有被使用，但是它将是，因为我想开发这个“程序”......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T16:39:17.277

正如丹尼尔在他的评论和 codaddict 在他的回答中所说的那样，使用`&`而不是`*`会给你你想要的。不过，这里有一些解释，以帮助您记住。

`*` *de*引用它所附加的内容，这意味着它将变量视为指针并给出该地址处的值。

`&`传递*引用*，这意味着它给出了存储值的地址，或者更确切地说，传递一个指向变量的指针。

由于您想传递指向变量 head 和 tail 的指针，因此您希望将它们作为`&head`and传递，这会在另一端`&tail`为您提供值`**head`和。`**tail`在您习惯之前，这似乎违反直觉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:33:32.900

```
add(*head, *tail, n); 
```

应该 ：

```
add(&head, &tail, n); 
```

由于您需要将头指针和尾指针的地址传递给函数。

需要对`show`函数的调用进行类似的修复。

# c# - 如何使用其基类进行良好的平等比较？

> ID：11546079
> 
> 赞同：4
> 
> 时间：2012-07-18T16:30:02.907
> 
> 标签：c#, list, abstract-class, equals, abstraction

当我使用`List.Contains(T item)`.

问题是我`BaseItem`用作列表项。我需要验证列表中的一个对象是否具有与我计划添加的对象相同的属性值。

例如：

```
public abstract class BaseItem
{
    // some properties

    public override bool Equals(object obj)
    {
        return obj != null && this.GetType() == obj.GetType();
    }
}

public class ItemA : BaseItem
{
    public int PropertyA { get; set; }

    public override bool Equals(object obj)
    {
        if (base.Equals(obj) == false)
            return false;

        return (this.PropertyA == (obj as ItemA).PropertyA;
    }
}

public class ItemB : BaseItem
{
    public int PropertyB { get; set; }

    public override bool Equals(object obj)
    {
        if (base.Equals(obj) == false)
            return false;

        return this.PropertyB == (obj as ItemB).PropertyB;
    }
}

public class Program
{
    static void Main(string[] args)
    {
        List<BaseItem> items = new List<BaseItem>()
        {
            new ItemB() { PropertyB = 3 },
            new ItemA() { PropertyA = 2 },
            new ItemB() { PropertyB = 2 }
        };

        BaseItem newItem = new ItemA() { PropertyA = 2 };
        items.Contains(newItem);  // should return 'True', because the first element is equals than 'newItem'
    }
} 
```

我不确定重写`Equals`方法是否正确，或者我是否必须实现 IEquality 接口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:33:17.207

测试集合成员资格（列表成员资格、哈希集成员资格……）的标准方法是使用 .Contains 方法，该方法又使用`IEquatable<T>.Equals`. `IEquatable<T>.Equals`（如果您不提供自己的实现）的默认实现使用`Object.Equals(Object)`)。

你当然可以实现`IEquatable<T>`。这将略微提高包含检查的性能。请参阅 msdn.microsoft.com/en-us/library/ms131190.aspx。

如果您实施`IEquatable<T>`，您仍然应该覆盖`Object.Equals`并`Object.GetHashCode`提供一致的行为

> 如果实现 Equals，还应该重写 Object.Equals(Object) 和 GetHashCode 的基类实现，以使它们的行为与 IEquatable.Equals 方法的行为一致。

[http://msdn.microsoft.com/en-us/library/ms131190.aspx](http://msdn.microsoft.com/en-us/library/ms131190.aspx)

有关相关讨论，请参阅此问题

[在 C# 中简化覆盖 Equals()、GetHashCode() 以获得更好的可维护性](https://stackoverflow.com/questions/9707918/simplify-overriding-equals-gethashcode-in-c-sharp-for-better-maintainabilit)

# scope - 如果我使用 kaminari，如何为特定范围设置限制

> ID：11546086
> 
> 赞同：0
> 
> 时间：2012-07-18T16:30:20.257
> 
> 标签：scope, ruby-on-rails-3.2, kaminari

我正在使用 kaminari gem 进行分页。

我只想显示最近添加的 10 个项目。对于其他范围，我最多可以显示 30 个。

这是资源控制器的索引操作：

```
@filt= params[:filter] || 'no_filter'
      @resources = get_resources(params[:category]||=nil).approved.send(@filt).page(params[:page]).per(30) 
```

这是 Resource.rb 模型中最近添加的资源的范围：

```
scope :recent, order('created_at DESC').limit(10) 
```

因为 per(30) 是为其他范围设置的，所以它会覆盖 :recent 范围中的限制。

我怎样才能只为最近的范围显示 10？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:34:51.480

您可以像这样简单地更改函数的顺序：

```
@resources = get_resources(params[:category]||=nil).approved.page(params[:page]).per(30).send(@filt) 
```

PS：相反，`(params[:category]||=nil)`您可以简单地执行此操作`(params[:category])`

PS2：我认为最好创建一个方法类并像这样使用它：

```
@resources = Resource.find_by_category(params[:category]).approved.page(params[:page]).per(30).send(@filt) 
```

# jquery-mobile - jQuery mobile：如何猜测带有“#”的 URL 是否有刷新？

> ID：11546094
> 
> 赞同：0
> 
> 时间：2012-07-18T16:31:25.333
> 
> 标签：jquery-mobile

这是我的问题：我在一个大的 HTML 页面中有许多不同的“页面”，我只是在它们之间进行转换。我的问题是我动态生成了一些页面（包括“篮子”页面和另一个下一页，即“预订”页面，它是通过 AJAX 调用构建的）。

所有 jQuery 移动页面在 URL 中都带有一个 ' `#`'，因此 URL 不会改变，也不需要加载不同的 URL。

所以，为了简化事情（我不知道这是否是最好的方法），当页面被刷新并且`#`URL 中有一个 ' ' 时，我只想重定向到没有 ' `#`' 的相同 URL。

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:44:02.323

# 是（非官方）称为哈希标签，例如 #page 是 url 之后的哈希。您可以使用 JavaScript 之类的方法获取散列`window.location.hash`，而要删除它，您可以这样做`window.location.hash = ""`

因此，每当用户被重定向到#page 时，您都可以使用上述方法删除哈希。

JQuery Mobile 有`$.mobile.changePage("#page")`，使用它，我相信它不会改变 URL。虽然我没有使用过 jQuery Mobile，所以我可能是错的。

# jquery - jquery 类选择器不起作用

> ID：11546096
> 
> 赞同：1
> 
> 时间：2012-07-18T16:31:30.653
> 
> 标签：jquery, class

我有一个输入字段，当它获得焦点时我添加一个类。如果它失去焦点，则应删除该类并添加另一个类。

```
<input type="text" class="input" />

$(document).ready(function () {

        $(".input").focus(function () {
            $(this).addClass("focus");
        });

        $(".input.focus").blur(function () {
            $(this).removeClass("focus").addClass("error");
        });
});

.input.error
{           
    border: 2px solid Red;         
}

.input.focus
{           
    border: 2px solid Yellow;       
} 
```

添加类工作正常，但不是模糊功能。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:35:03.993

当您绑定`blur`处理程序时，您的选择器 ( `$(".input.focus")`) 不会返回任何元素。

您需要绑定适用于当前和未来元素的动态处理程序：

```
$('body').on('blur', '.input.focus', function () {
  $(this).removeClass("focus").addClass("error");
}); 
```

为了提高速度，请替换`body`为这些元素的父容器。

虽然这对于聚焦和模糊来说有点过分。你可以尝试这样的事情：

```
$('.input').on('focus', function() {
  $(this).removeClass('error').addClass('focus');
}).on('blur', function() {
  $(this).removeClass('focus').addClass('error');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:34:03.280

尝试...

```
$(".input").focus(..).blur(..); 
```

当 $(document).ready 被触发时，两个类都没有元素..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:34:16.697

问题是您将 blur 事件绑定到尚不存在的元素。

当你这样做`$(document).ready`时，它会在文档第一次加载时运行，所以它会去寻找一个元素`.input.focus`——但是还没有那个类的元素。

您需要在创建元素后添加此代码，或者使用 jQuery live

将您的代码更改为下面的代码，以便与 jQuery live 一起使用。JsFiddle 演示在这里：http: [//jsfiddle.net/RDEXg/](http://jsfiddle.net/RDEXg/)

```
<input type="text" class="input" />

$(document).ready(function () {

        $(".input").focus(function () {
            $(this).addClass("focus");
        });

        $(".input.focus").live('blur',function () {
            $(this).removeClass("focus").addClass("error");
        });
});

.input.error
{           
    border: 2px solid Red;         
}

.input.focus
{           
    border: 2px solid Yellow;       
} 
```

您需要 .live('blur',... 选项，因为您要在文档就绪时添加此事件侦听器。.input.focus 在文档就绪时不存在。更多阅读：http: [//api.jquery.com /居住/](http://api.jquery.com/live/)

# rest - RuntimeException：在 JAX RS 中找不到 BufferedInMultiPart 的 MessageBodyReader 实现

> ID：11546099
> 
> 赞同：1
> 
> 时间：2012-07-18T16:31:47.727
> 
> 标签：rest, jax-rs, apache-wink

尝试进行多部分的 JAX RS 调用时，我收到以下 RuntimeException。

java.lang.RuntimeException：找不到类 org.a pache.wink.common.model.multipart.BufferedInMultiPart 类型和 text/html;charset=utf-8 媒体类型的 javax.ws.rs.ext.MessageBodyReader 实现。验证所有实体提供者都已正确注册。如果当前不存在 JAX-RS 实体提供程序，请添加自定义 javax.ws.rs.ext.MessageBodyReader 提供程序来处理类型和媒体类型。在 org.apache.wink.client.internal.handlers.ClientResponseImpl.readEntity(ClientResponseImpl.java:12 2) 在 org.apache.wink.client.internal.handlers.ClientResponseImpl.getEntity(ClientResponseImpl.java:65) 在 org. apache.wink.client.internal.handlers.ClientResponseImpl.getEntity(ClientResponseImpl.java:52)

谁能帮我弄清楚异常的原因是什么。它只是偶尔发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:13:21.787

它清楚地表明您没有注册多部分提供程序。你注册了吗？尝试将记录器置于调试模式，Wink 将打印所有已注册的提供程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-28T22:34:01.983

我有一个非常相似的错误：

```
org.apache.wink.client.ClientRuntimeException: java.lang.RuntimeException: java.lang.RuntimeException: A javax.ws.rs.ext.MessageBodyWriter implementation was not found for the class com.ibm.json.java.JSONObject type and application/json media type.  Verify that all entity providers are correctly registered.  Add a custom javax.ws.rs.ext.MessageBodyWriter provider to handle the type and media type if a JAX-RS entity provider does not currently exist.
        at org.apache.wink.client.internal.ResourceImpl.invoke(ResourceImpl.java:240) ~[wink-client-1.4.jar:1.4]
        at org.apache.wink.client.internal.ResourceImpl.invoke(ResourceImpl.java:189) ~[wink-client-1.4.jar:1.4]
        at org.apache.wink.client.internal.ResourceImpl.post(ResourceImpl.java:314) ~[wink-client-1.4.jar:1.4] 
```

经过大量搜索，我们发现我的 WebSphere 8.5.5 安装中缺少的 jar 是：

```
/opt/WebSphere/AppServer855/runtimes/com.ibm.jaxrs.thinclient_8.5.0.jar 
```

这个 jar 可以添加到我的构建过程中以完成成功运行，没有例外：

```
/opt/WebSphere/AppServer855/plugins/com.ibm.ws.prereq.jaxrs.jar 
```

# ios - 如何仅使用代码创建 UIImageView？

> ID：11546102
> 
> 赞同：0
> 
> 时间：2012-07-18T16:32:00.780
> 
> 标签：ios, cocoa-touch

我对 Cocoa 编程比较陌生，需要一些帮助。

我想为游戏中的单位制作一些图像视图并用代码添加它们，因为将它们放在视图中并在 Interface Builder 中进行连接是很多工作。

我已经找到了创建和插入 UIImageViews 的代码：

```
UIImageView *image0 =[[UIImageView alloc] initWithFrame:CGRecMake(x,y,w,h)];
image0.image=[UIImage imageNamed:@"image.png"];
[self.view addSubview:image0]; 
```

我的问题是：如果我可以制作一个数组，那么我不必为每个图像视图都写这个，并且我将相同的图像放入其中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:21:56.613

这个怎么样：

```
for(int i=0; i<10; ++i) {
    UIImageView *image =[[UIImageView alloc] initWithFrame:CGRecMake(x+i*k1,y*i*k2,w,h)];
    image.image=[UIImage imageNamed:@"image.png"];
    image.tag = i+1;
    [self.view addSubview:image0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:19:58.210

一个很好的方法是这样的。这将创建 30 个具有相同图像的图像视图。

```
NSMutableArray *arrayOfImageViews = [NSMutableArray array];
for (int i = 0; i < 30; i++) {
    UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"theImage.png"]];
    [self.view addSubview:imageView];

    [arrayOfImageViews addObject:imageView];
} 
```

# apache-fop - 如何在 DITA-OT 的 PDF2 插件中为特定标题设置特定属性集？

> ID：11546106
> 
> 赞同：1
> 
> 时间：2012-07-18T16:32:17.327
> 
> 标签：apache-fop, dita

我在自定义 OT 的 PDF2 插件（使用 FOP）方面有点挣扎。我想做的是为所有具有@outputclass 特定值的主题标题使用自定义属性集。我已经成功定义了自定义属性集。但我不确定要编写正确的模板，因为我写的模板破坏了 PDF 文件的书签。这就是我在 custom.xsl 中的内容：

```
<xsl:template match="*[contains(@class,' topic/topic ')]/*[contains(@class,' topic/title ')][@outputclass='drilltitle']">
<fo:block xsl:use-attribute-sets="hkdrill.title">
    <xsl:apply-templates/>
</fo:block>
</xsl:template> 
```

任何帮助将非常感激。

谢谢，史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:29:37.507

像这样的东西怎么样：

```
<xsl:template match="*[@outputclass='drilltitle']" mode="processTopicTitle">
  <fo:wrapper xsl:use-attribute-sets="hkdrill.title">
    <xsl:next-match/>
  </fo:wrapper>
</xsl:template> 
```

如果您添加的属性不是由普通主题标题属性集设置的，这将起作用。如果您需要覆盖与内置属性集中相同的属性，则需要在`processTopicTitle`模式下创建模板的副本并在那里进行更改。原因是 PDF2 样式表使用它们自己的“属性集反射”，它不允许以正常方式组合属性集。

# iphone - 如何消除 MFMessageComposeViewController 呈现的延迟？

> ID：11546109
> 
> 赞同：5
> 
> 时间：2012-07-18T16:32:22.963
> 
> 标签：iphone, messageui

```
if([MFMessageComposeViewController canSendText])
{
    MFMessageComposeViewController *sms_message_vc = [[MFMessageComposeViewController alloc] init];
    sms_message_vc.body = text;
    sms_message_vc.recipients = recipients;
    sms_message_vc.messageComposeDelegate = self; 
    [self presentModalViewController:sms_message_vc animated:FALSE];
    [[UIApplication sharedApplication] setStatusBarHidden:TRUE];
    [sms_message_vc release];
} 
```

执行此操作时，在实际显示撰写视图之前会有几秒钟的延迟。是什么导致了这种情况，如何消除延迟？

编辑 1：澄清：制作`sms_message_vc`和 ivar 无济于事，因为该`...alloc] init]`过程会将 UI 挂起几秒钟，无论它在哪里。

编辑2：尝试GCD（具有不同的优先级）尝试同时运行初始化。没有帮助：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, (unsigned long)NULL), ^(void){
    sms_message_vc = [[MFMessageComposeViewController alloc] init];
    sms_message_vc.messageComposeDelegate = self; 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:42:27.887

考虑使 MFMessageComposeViewController *sms_message_vc 成为类实例变量并调用：

```
MFMessageComposeViewController *sms_message_vc = [[MFMessageComposeViewController alloc] init]; 
```

早些时候，以及在初始化后将委托设置为`self`正确`sms_message_vc`

然后做：

```
sms_message_vc.body = text;
sms_message_vc.recipients = recipients;
[self presentModalViewController:sms_message_vc animated:FALSE];
[[UIApplication sharedApplication] setStatusBarHidden:TRUE];
[sms_message_vc release]; 
```

当您想要实际发送消息时。这不应该改变太多，但可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-24T22:00:46.873

我也有同样的问题。我试图将控制器缓存在静态变量中。但它没有用。行为不规律。第一次工作，第二次委托自动调用，无需任何用户操作，第三次屏幕变黑。看起来您必须在每次关闭后创建实例！

导入 Foundation 导入 UIKit 导入 MessageUI

```
class UIUtil {

static var messageController:MFMessageComposeViewController? = nil
static var checkedOnce = false

class func createMessageController () -> MFMessageComposeViewController? {
    if checkedOnce {
        return messageController
    }
    checkedOnce = true
    if (MFMessageComposeViewController.canSendText()) {
        messageController = MFMessageComposeViewController()
        messageController?.recipients = [SettingsManager.shared.switchPhoneNumber]
    } else {
        print("SMS services are not available in this device.")
    }
    return messageController
} 
```

}

用法，

```
func createSMSView (text:String) {
        print("Sending SMS to \(SettingsManager.shared.switchPhoneNumber). Text: \(text)")
        if let ctr = UIUtil.createMessageController() {
            ctr.body = text
            ctr.messageComposeDelegate = self
            self.present(ctr, animated: true, completion: nil)
        } else {
            print("Could not send SMS. Text: \(text)")
        }
    } 
```

# android - 我可以使用 D'Fusion 作为 Metaio 的增强现实创作工具吗？

> ID：11546110
> 
> 赞同：1
> 
> 时间：2012-07-18T16:32:23.893
> 
> 标签：android, augmented-reality

正如标题所说。我可以使用 D'Fusion 作为 metaio 的创作工具吗（至于 metaio 自己的创作工具，你必须购买许可证）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:59:01.480

不，你不能。

Metaio 的 sdk 是免费的。如果您需要去除水印，您只需购买许可证。否则，几乎所有功能都可以无限使用。

# android - jQuery移动标题android下一个字段

> ID：11546112
> 
> 赞同：0
> 
> 时间：2012-07-18T16:32:27.087
> 
> 标签：android, forms, jquery-mobile

所以，我对安卓浏览器感到沮丧！安卓版本 2.3.6。这件事有什么问题？下一个和之前（可能是上一个）按钮不起作用！...在一些基本的 jquery 表单字段上。

有：

```
<div data-role="page">
<div data-role="header">
 <img src="img/logo.png" style="margin-top:15px;">
</div>

<div data-role="content">  
  <form action="#" method="get">
     <div data-role="fieldcontain">
     <label for="name">Text Input:</label>
     <input type="text" name="name" id="name" value=""  />
    </div>

 <div data-role="fieldcontain">
  <label for="textarea">Textarea:</label>
    <textarea cols="40" rows="8" name="textarea" id="textarea"></textarea>
  </div>
   </form>

</div>
</div> 
```

但是......如果我删除 data-role="header" 该死的东西开始工作了？？！！

在 Safari 浏览器上当然没问题！和往常一样棒极了。

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:43:58.373

我的理解是，如果你想添加一个后退按钮，你需要在`data-add-back-btn="true"`你的页面中添加一个`div`。我在你的例子中没有看到这一点。OTOH，硬件`back`按钮也应该可以工作。

什么是行不通的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T20:41:09.687

所以，几个小时后......我注意到我的css中的东西破坏了这个功能......

```
 /*article, aside, details, figcaption, figure, footer, header, hgroup, nav, 
    section { display: block; } audio, canvas, video { display: inline-block; 
    *display: inline; *zoom: 1; } audio:not([controls]) { display: none; }
    [hidden] { display: none; } html { font-size: 100%; overflow-y: scroll; 
    -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }*/ 
```

删除上面，它的工作。

不确定，可能是使用的样板。

# ruby-on-rails-3 - Windows 上的 Paperclip/ImageMagick 问题

> ID：11546116
> 
> 赞同：1
> 
> 时间：2012-07-18T16:32:35.520
> 
> 标签：ruby-on-rails-3, shell, imagemagick, paperclip, dos

我设法在我的头像上实现了一个圆角后期处理。它在我的 Mac 上运行良好，但在 Windows 上没有骰子。

看起来像这样

```
def self.convert_options(px = 10)
  trans = ""
  trans << " \\( +clone -alpha extract "
  trans << "-draw 'fill black polygon 0,0 0,#{px} #{px},0 fill white circle #{px},#{px} #{px},0' "
  trans << "\\( +clone -flip \\) -compose Multiply -composite "
  trans << "\\( +clone -flop \\) -compose Multiply -composite "
  trans << "\\) -alpha off -compose CopyOpacity -composite "
end 
```

基于[http://www.imagemagick.org/Usage/thumbnails/#rounded](http://www.imagemagick.org/Usage/thumbnails/#rounded) & [Rounded corners with Paperclip](https://stackoverflow.com/questions/8789820/rounded-corners-with-paperclip)

我开始犯的一大堆错误

```
convert.exe: unable to open image `\\(': No such file or directory @ error/blob.c/OpenBlob/2638. 
```

我想这可能与 Windows 转义字符有关？所以将 \ 更改为 ^ 但得到了这个错误

```
convert.exe: unable to open image `black': No such file or directory @ error/blob.c/OpenBlob/2638. 
```

ImageMagick 正在工作，否则。它管理更简单的处理/调整大小。如果我使用 GIT BASH 将命令直接输入到 shell 中，那么该行会毫无问题地生成圆角文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:23:09.717

睡个好觉（经过数小时尝试了数千种组合）让我想到了这个

```
def self.convert_options_win(px = 10)
  trans = " "
  trans << " ( +clone -alpha extract -draw \"fill black polygon 0,0 0,#{px} #{px},0 fill white circle #{px},#{px} #{px},0 \"  "
  trans << " ( +clone -flip ) -compose Multiply -composite  "
  trans << " ( +clone -flop ) -compose Multiply -composite ) "
  trans << " -alpha off -compose CopyOpacity -composite  "
end 
```

效果很好。行首不需要连续字符，因为它们都被截断为单行字符串。Windows shell 更喜欢“双引号”而不是“单引号”，所以只需要转义字符串中的那些。我尝试了很多组合，不敢相信它是如此简单。

# jquery - jqGrid更新字段“可编辑：假”

> ID：11546118
> 
> 赞同：1
> 
> 时间：2012-07-18T16:32:39.167
> 
> 标签：jquery, jqgrid

我正在使用**jqGrid**，我编辑了一行然后我保存了它，所有数据都发送到更新 url。
但是我有一个问题，如果“***可编辑：假***”，在**“firmasID”**字段中
，我收到了一个空的 **firmasID**值。

```
 $("#companies").jqGrid({
         url:'/load/rateseditor_companies/controller/load/',
            datatype: "json",
            colNames:['ID','FinSysID', 'Company', 'Code','Code sparcs','Jur address','Address2','Phone','Fax','Email','Contract Date','Bank accaunt','Bank id','Price list','KonsignTab','Remarks','BankID USD','Bank accaunt 1','BCT bank','Resident','Days to pay'],
            colModel:[
                {name:'firmasID',index:'firmasID', width:55},
                {name:'FinSysID',index:'invdate', width:90, editable:true},
                {name:'firmasNosauk',index:'Company', width:100,editable:true},
                {name:'firmasKods',index:'Code', width:80, align:"right",editable:true},
                {name:'firmasSPARCS',index:'Code sparcs', width:80, align:"right",editable:true},       
                {name:'jurAdrese',index:'Jur address', width:80,align:"right",editable:true},       
                {name:'nosAdrese',index:'Address2', width:150, sortable:false,editable:true},
                {name:'Telefons',index:'Phone', width:150, sortable:false,editable:true},
                {name:'FAX',index:'Fax', width:150, sortable:false,editable:true},
                {name:'Email',index:'Email', width:150, sortable:false,editable:true},
                {name:'piegLigumDat',index:'piegLigumDat', width:150, sortable:false,editable:true},
                {name:'bankasReķins',index:'bankasReķins', width:150, sortable:false,editable:true},
                {name:'bankasID',index:'bankasID', width:150, sortable:false,editable:true,edittype:"select",editoptions:{value:getBanks()}},
                {name:'cenLapa',index:'cenLapa', width:150, sortable:false,editable:true},
                {name:'konsignTab',index:'konsignTab', width:150, sortable:false,editable:true},
                {name:'piezimes',index:'piezimes', width:150, sortable:false,editable:true},
                {name:'bankasIDUSD',index:'bankasIDUSD', width:150, sortable:false,editable:true},
                {name:'bankasRekins1',index:'bankasRekins1', width:150, sortable:false,editable:true},
                {name:'BCTBanka',index:'BCTBanka', width:150, sortable:false,editable:true},
                {name:'Rezidents',index:'Rezidents', width:150, sortable:false,editable:true},
                {name:'Days_to_pay',index:'Days_to_pay', width:150, sortable:false,editable:true}
            ],
            rowNum:22, 
            rowList:[10,20,30],
            pager: '#pager2',
            width: '100px', height: "500px",
            sortname: 'firmasID',
            viewrecords: true,
            sortorder: "desc",
            editurl: '/load/rateseditor_companies/controller/update/',
            caption: "Companies list"
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:36:40.960

利用

```
editable: true, editoptions: { readonly: 'readonly' } 
```

反而

# php - 在非静态方法+继承中访问静态变量

> ID：11546124
> 
> 赞同：2
> 
> 时间：2012-07-18T16:33:08.153
> 
> 标签：php, oop, inheritance, static, non-static

我有以下结构

```
class Foo
{
    public static $a = "parent";

    public static function Load()
    {
        return static::$a;
    }

    public function Update()
    {
        return self::$a; 
    }

}

class Bar extends Foo
{
    private static $a = "child";
} 
```

我希望更新函数也能够返回 $a，但我无法让它工作。

```
Bar::Load();  //returns child, Correct.
$bar = new Bar();
$bar->Update(); //returns parent, Wrong. 
```

我试过 self:: ， static:: 和 get_class() 没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:35:19.190

变化`self::$a`_`update()`

```
class Foo
{
    protected static $a = "parent"; // Notice this is now "protected"

    public function child()
    {
        return static::$a; 
    }

    public function parent()
    {
        return self::$a; 
    }
}

class Bar extends Foo
{
    protected static $a = "child"; // Notice this is now "protected"
}

$bar = new Bar();
print $bar->child() . "\n";
print $bar->parent() . "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T12:16:03.557

查看我的代码

```
class Foo
{
    protected static $a = "parent";

    public static function Load()
    {
        return static::$a;
    }

    public function Update()
    {
        return static::$a; 
    }

}

class Bar extends Foo
{
    protected static $a = "child";
}
Bar::Load();  //returns child, Correct.
$bar = new Bar();
$bar->Update(); //returns child, Correct. 
```

# php - 如何包含 \news.php？

> ID：11546125
> 
> 赞同：1
> 
> 时间：2012-07-18T16:33:08.723
> 
> 标签：php, include, newline

我正在尝试包含一个名为 news.php 的 php 文档，但是因为我在本地服务器上执行此操作，所以文件导航槽 \ 而不是 /

我的代码如下所示：

```
<?php include("\xnews\news.php");?> 
```

但是由于 php 中的 \n 表示换行符（我相信），输出查看了错误：

```
Warning: include(\xnews\ews.php): failed to open stream: No such file or directory in C:\Users\Johanne-PC\Desktop\EasyPHP-12.0\www\my portable files\Homepage\news.php on line 44 
```

**有什么办法可以绕过它并成功包含它？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T16:34:26.863

利用 \：

```
<?php include("\\xnews\\news.php"); 
```

您还可以使用单引号（不会转义）：

```
<?php include('\xnews\news.php'); 
```

此外，您可以（编辑：在所有系统上）使用 /：

```
<?php include('/xnews/news.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:35:51.950

问题是这`\`就是所谓的转义字符 - 它用于特殊情况下，例如`\n`换行符。所以要得到一个真正的`\`角色，你必须用 second 来逃避它`\`。正如其他答案所说，您需要使用：

```
<?php include("\\xnews\\news.php");?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:34:20.873

```
<?php include("\\xnews\\news.php");?> 
```

# javascript - 通过javascript函数循环

> ID：11546128
> 
> 赞同：0
> 
> 时间：2012-07-18T16:33:22.473
> 
> 标签：javascript

我试图通过我的函数在 while 循环中循环我的 if 语句。但它只会命中第一个 if 语句并停止循环。

样本：

```
while(No.length == 0 || Name.length == 0 || Tel.length == 0 
      || Date.length == 0 || Email.length == 0) {

    alert("Don't leave blank!");

    if (No.length == 0) {
        document.getElementById('Nos').style.visibility = 'visible';
        return false;   
    }

    if(Name.length == 0) {
        document.getElementById('Name').style.visibility = 'visible';
        return false;   
    }
    //continues same if statement for rest of the elements variables.
} 
```

它只会转到第一个 if 语句，不会循环遍历它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:35:29.613

您正在从循环内部返回；这打破了循环。如果要继续进行下一轮循环，请`continue`改用。如果您想跳出循环，但不想从整个函数返回，请使用`break`.

现在，如果您使用的是 jQuery 循环，因为它实际上只是一个函数，您可以使用 return：

```
$.each([1,2,3,4], function(index, x) {
    if (x < 4) return true; // equivalent to continue
    if (x == 4) return false; // equivalent to break
}); 
```

但这仅适用于 jQuery 循环，而不适用于 Javascript 标准循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:38:03.353

我可以看到的第一个错误是您应该使用 '\' 转义警报，例如：

```
alert('Don\'t leave blank!'); 
```

如果你这样写，循环就会继续：

```
while(No.length == 0 || Name.length == 0 || Tel.length == 0 || Date.length == 0 || Email.length == 0) {

    if (No.length == 0) {
        document.getElementById('Nos').style.visibility = 'visible';
    }
    if(Name.length == 0) {
        document.getElementById('Name').style.visibility = 'visible';
    }
    return true;
} 
```

也可以试试：

```
while(No.length == 0 && Name.length == 0 && Tel.length == 0 && Date.length == 0 && Email.length == 0) {

     document.getElementById('Nos').style.visibility = 'visible';      
     document.getElementById('Name').style.visibility = 'visible';
     continue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:42:26.133

也许这个？

```
function test_all_fields() {
    var No = document.getElementById('No');
    var Nos = document.getElementById('Nos');
    var Name = document.getElementById('Name');
    // ...
    Nos.style.visibility = (No.value.length==0) ? 'visible':'hidden';
    Names.style.visibility = (Name.value.length==0) ? 'visible':'hidden';
    //...
    //continues same if statement for rest of the elements variables.
    if (No.value.length >0 && Name.value.length >0 && Tel.value.length>0 && Date.value.length >0 && Email.value.length>0) {
        return true;
    }
    else {
        alert("Don\'t leave blank!");
        return false;
    }
} 
```

# android - 如何使用 $.mobile.changePage() 更改多页混合应用程序文件中的页面？

> ID：11546130
> 
> 赞同：0
> 
> 时间：2012-07-18T16:33:25.080
> 
> 标签：android, jquery-mobile, mosync

在我的混合应用程序中，我正在尝试使用 jquery 移动功能 changePage 更改多页文件中的页面。当我按下按钮时，它会隐藏当前页面并显示空白页面。如果我使用隐藏/显示 jquery 函数隐藏/显示 div，则相同。它在 PC 网络浏览器中完美运行。但在移动应用程序中。如何更改/显示第二页？

这是我的代码：

```
<head>
<meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1">
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<script src="js/jqtouch/jqtouch.js" type="application/x-javascript"
charset="utf-8"></script>
<link type="text/css" rel="stylesheet" media="screen"
href="js/jquery.mobile-1.1.0.min.css">
<link type="text/css" rel="stylesheet" media="screen"
href="js/jquery.mobile.theme-1.1.0.min.css">
<link type="text/css" rel="stylesheet" media="screen"
href="js/jquery.mobile.structure-1.1.0.min.css">
<script type="text/javascript" charset="utf-8" src="js/wormhole.js"></script>
<script type="text/javascript" charset="utf-8"
src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" charset="utf-8"
src="js/jquery.mobile-1.1.1.js"></script>
</head>
<body>
<div id="TaskList" data-role="page">
    <div data-role="header">
        <h1>Dienos užduotys</h1>
    </div>
    <script type="text/javascript">
        function showTaskDetails(id) {
            $.mobile.changePage("#taskDetails", {
                transition : "slideup"
            });
        }
    </script>
    <div data-role="content">
        <div id="task_list" data-role="controlgroup">
                 <a data-role="button" onclick="showTaskDetails(1)" href="#">Name</a>
        </div>
    </div>
</div>
<div id="TaskDetails" data-role="page">
    <div data-role="header">
        <a href="#TaskList" data-icon="arrow-l" data-iconpos="left"
            data-rel="back">Atgal</a>
        <h1>Dienos užduotys</h1>
    </div>
    <div data-role="content">
        <input type="text" value="" id="task_id" />
    </div>
    <div data-role="footer"></div>
</div>
</body> 
```

**更新：**似乎问题是由于登录文件中的 changePage 函数而出现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:34:21.070

如果您有多页文档，只需要这样做：

```
$.mobile.changePage("#taskDetails", {transition : "slideup"});

$.mobile.changePage("file1.html", {transition : "slideup"});
$.mobile.changePage("file2.html", {transition : "slideup"});
...... 
```

# objective-c - 访问 JSON 响应中的键

> ID：11546139
> 
> 赞同：0
> 
> 时间：2012-07-18T16:34:09.553
> 
> 标签：objective-c, json, ios5, asihttprequest

如何在以下 JSON 响应中检查**uids**是否为 nil ？

```
{
height = 480;
pid = "F@dd705e6b96a6e894556c0db84870501e_d97383cc80238c38b8907d99690fa1c9";
tags =     (
            {
        attributes =             {
            glasses =                 {
                confidence = 97;
                value = false;
            };
            smiling =                 {
                confidence = 97;
                value = false;
            };
        };
        center =             {
            x = "60.83";
            y = "75.21";
        };
        gid = "<null>";
        height = "49.58";
        label = "";
        manual = 0;
        nose =             {
            x = "76.21";
            y = "77.16";
        };
        pitch = "-5.55";
        recognizable = 0;
        roll = "-0.45";
        uids =             (          // <<<<<========== UIDs Key
        );
        width = "66.11";
        yaw = "-19.56";
    }
);
url = "http://face.com/images/ph/a6e529853432599dad6da996746cb070.jpg";
width = 360;
} 
```

当我尝试：

```
if ([[[[photo objectForKey:@"tags"] objectAtIndex:0] valueForKey:@"uids"] count] == 0) 
```

它一直返回 FALSE。

我能够成功访问很多这些密钥。但正是这一把钥匙给我带来了问题。

就像，要访问**url**键，我正在使用：

```
[photo objectForKey:@"url"]; 
```

它工作得非常好。

我在**uids**键上做错了什么？

# c# - 如何从 jQuery Dialog 回发到父页面？

> ID：11546144
> 
> 赞同：0
> 
> 时间：2012-07-18T16:34:17.940
> 
> 标签：c#, javascript, jquery, asp.net

我有一个pageA.aspx。在其中，我打开一个带有包含 pageB.asxp 的 iframe 的 jQuery 对话框。

```
var dlg = $('#dialog1').html('<iframe id="ifrm"></iframe>');
dlg.dialog({
    autoOpen: false,
    resizable: false,
    draggable: false,
    modal: true
});

dlg.parent().appendTo(jQuery("form:first"));

    $('#buttonOpenDialog').click(function () {
        var url = '../PageB.aspx';
        $("#dialog1>#ifrm").attr("src", url);
        $('#dialog1').dialog('open');
        return false;
    }); 
```

直到这里一切都好。现在我提交表单，当回发完成后，我想关闭这个对话框，我这样做：

```
function closePopup() {
    parent.$("#dialog1").dialog('close');
   __doPostBack(); 
```

}

我想刷新父页面pageA.aspx而不做丑陋

```
__doPostBack() 
```

我怎样才能做到这一点？谢谢你

编辑：这似乎是一个复杂的问题。请参与;P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:54:40.457

在父页面中添加一个隐藏按钮。并且当模态关闭时，生成隐藏按钮的点击事件。它将刷新父页面。

```
dlg.dialog({
    autoOpen: false,
    resizable: false,
    draggable: false,
    modal: true,
    close: function (event, ui) {
           // btnHidden is the id of the hidden button.
           document.getElementById('<%=btnHidden.ClientID%>').click();
           // To refresh gridview when user close dialog
           }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T22:32:00.513

您可以将提交表单的 _target 属性设置为 _parent 。然后 POST 的结果将显示在父框架（pageA.aspx）中

```
<form target="_parent">
</form> 
```

这是你想要的吗？

# java - 如何在java中将“\\r\\n”更改为行分隔符

> ID：11546146
> 
> 赞同：1
> 
> 时间：2012-07-18T16:34:20.000
> 
> 标签：java, regex, newline, terminal-emulator

我正在做一个学校项目来构建一个伪终端和文件系统。终端正在扫描 System.in 并将字符串传递给控制器​​。

输入到控制台：`abc\r\nabc\r\nabc`

这是我尝试过的代码

```
Scanner systemIn = Scanner(System.in);
input = systemIn.nextLine();
input = input.replaceAll("\\\\r\\\\n",System.getProperty("line.separator"));
System.out.print(input); 
```

我希望 java 将我输入到控制台的 \r\n 视为行分隔符，而不是实际的 \ 和 r。它现在所做的是按原样打印输入。

期望的输出：

美国广播公司

美国广播公司

美国广播公司

更新：我试过`input = StringEscapeUtils.unescapeJava(input);`了，它解决了这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T16:42:53.027

您需要在 java 中双重转义正则表达式（一次用于正则表达式反斜杠，一次用于 Java 字符串）。您不需要换行符 ( `/\n/`, `"\\n"`)，而是反斜杠 ( `/\\/`) 加上 "n": `/\\n/`, `"\\\\n"`。所以这应该工作：

```
input.replaceAll("(\\\\r)?\\\\n", System.getProperty("line.separator")); 
```

有关转义序列的更广泛处理，请参阅[How to unescape a Java string literal in Java？](https://stackoverflow.com/q/3537706/1048572)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T16:43:55.250

如果您的输入有字符串 '\r\n'，试试这个

```
Scanner systemIn = Scanner(System.in);
input = systemIn.nextLine();
input = input.replaceAll("\\\\r\\\\n",System.getProperty("line.separator")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:37:18.817

对于一致的行为，我会将 \\r 替换为 \r 并将 \\n 替换为 \n 而不是将 \\r\\n 替换为换行符，因为这在不同的系统上会有不同的行为。

你可以做

```
input = systemIn.nextLine().replaceAll("\\\\r", "\r").replaceAll("\\\\n", "\n"); 
```

* * *

nextLine() 在末尾删除换行符。如果要添加行分隔符，可以执行

```
input = systemIn.nextLine() + System.getProperty("line.separator"); 
```

如果您使用的是 println()，则无需将其添加回来。

```
System.out.println(systemIn.nextLine()); // prints a new line. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-13T22:01:26.223

正如 r0dney 所提到的，Bergi 的解决方案不起作用。

使用一些 3rd 方库的能力很好，但是对于学习的人来说最好了解理论，因为并不是每个问题都存在一些 3rd 方库。

使用大量 3rd 方库来重载项目，这些任务可以在一行代码中解决，这使得项目体积庞大且不易维护。无论如何，这是有效的：

```
content.replaceAll("(\\\\r)?\\\\n", System.getProperty("line.separator")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T23:06:12.983

除非您实际上在控制台中键入 \ 和 r 和 \ 和 n，否则您根本不需要这样做：相反，您有一个重大的误解。CR 字符*在字符串中表示*为 \r，但它仅包含一个十六进制值为 0xD 的字节。如果您在控制台中输入反斜杠，简单的答案是“不要”。只需按 Enter 键：这就是它的用途。它会将 CR 字节传输到您的代码中。

# python - 如何在 django 中制作 db 转储文件

> ID：11546151
> 
> 赞同：24
> 
> 时间：2012-07-18T16:34:48.357
> 
> 标签：python, django, django-models, django-commands

无论我使用什么数据库，我都想在 django 中进行转储，并且可以稍后加载。命令 'dumpdata' 非常适合此操作，但它会在控制台上打印输出。此外，我使用 call_command 函数调用它，因此我无法将其内容存储在任何变量中，因为它正在控制台上打印输出。

请让我知道如何使用 dumpdata 或任何其他命令或 api 将转储存储到文件中。

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-18T16:39:44.937

你只是这样使用它：

```
./manage.py dumpdata > data_dump.json 
```

`data_dump.json`在该操作之后，您执行该命令的目录中将有文件。

有多种选择，但你可能已经知道了。您需要知道的是如何**将标准输出的输出重定向到某个文件中**`>`：您可以通过在文件名之前放置来执行该操作。

要将某些内容附加到您将使用的文件中`>>`，但是由于您正在从 Django 转储数据并且输出很可能是 JSON，因此您不会想要这样（因为它会使 JSON 无效）。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-18T17:20:06.403

如果您使用 Python 从 Python 中调用它，您*可以*选择一个文件来将转储数据的输出放入其中`call_command`，例如：

```
from django.core.management import call_command

output = open(output_filename,'w') # Point stdout at a file for dumping data to.
call_command('dumpdata','model_name',format='json',indent=3,stdout=output)
output.close() 
```

但是，如果您尝试从命令行调用它，例如`--stdout=filename.json`在您的 dumpdata 命令末尾，它会给出错误`manage.py: error: no such option: --stdout`。

所以它就在那里，你只需要在 Python 脚本中而不是在命令行中调用它。如果您希望它作为命令行选项，那么重定向（正如其他人所建议的）是您最好的选择。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-09-13T22:12:02.410

正如[文档](https://docs.djangoproject.com/en/1.10/ref/django-admin/#dumpdata)中提到的，为了转储大型数据集，您可以避免导致问题的部分，并将它们分开处理。

以下命令通常有效：

```
python manage.py dumpdata --exclude auth.permission --exclude contenttypes > db.json

python manage.py loaddata db.json 
```

如果您可以稍后导出排除的数据：

```
python manage.py dumpdata auth.permission > auth.json

python manage.py loaddata auth.json 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-18T16:39:37.583

> [django-admin.py 转储数据](https://docs.djangoproject.com/en/dev/ref/django-admin/#dumpdata-appname-appname-appname-model)
> 
> 将数据库中与指定应用程序关联的所有数据输出到标准输出。

如您所知，您可以将标准输出[重定向](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx)到文件：

```
command > file.data 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-25T23:35:55.990

您可以使用以下代码转储所有数据库模型数据

```
from django.core.management import call_command

with open("data.json", "w", encoding="utf-8") as fp:
    call_command("dumpdata", format="json", indent=2, stdout=fp) 
```

`data.json`这将在项目文件夹的根目录中创建一个文件 ( )。

# php - 如何在 foreach 语句中调用函数

> ID：11546152
> 
> 赞同：1
> 
> 时间：2012-07-18T16:35:00.643
> 
> 标签：php, arrays, function, foreach

我正在尝试使用 foreach 语句来运行 preg_replaces 使用正则表达式的函数。有人可以帮忙吗，因为我的方法不起作用..

```
$reg_sent is an array

function reg_sent($i){
  $reg_sent = "/[^A-Za-z0-9.,\n\r ]/";
  return preg_replace($reg_sent, '', $i);
}

foreach($reg_sent as $key=>$value){
  $value = reg_sent($value);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:39:28.457

您没有受到任何影响，因为`foreach`循环需要通过引用访问元素：

```
foreach($reg_sent as $key => &$value)
{
    $value = reg_sent($value);
} 
```

请注意，我`&`之前在循环中添加了`$value`. 否则，对值**的副本**`foreach`进行操作，并且当在循环内对其进行修改时，您将永远不会在循环外看到该值。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:39:46.540

您需要通过引用传递变量：

```
foreach($reg_sent as $key=>&$value){ 
```

否则，您正在对仅在循环中保留其值的本地副本进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:40:41.287

检查[array_map](http://php.net/manual/en/function.array-map.php)。

```
$reg_sent = array_map("reg_sent", $reg_sent); 
```

这将调用`reg_sent`数组的每个单元格，并返回一个修改了值的新数组。您可以用`foreach`上面的内容替换您所说的块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T16:41:42.437

```
function reg_sent($i){ 
    $reg_sent = "/[^A-Za-z0-9.,\n\r ]/"; 
    return preg_replace($reg_sent, '', $i); 
} 

foreach($reg_sent as $key => &$value){ 
    $value = reg_sent($value); 
}
unset($value);

var_dump($reg_sent); 
```**

# excel - 复制excel数据行

> ID：11546154
> 
> 赞同：0
> 
> 时间：2012-07-18T16:35:08.867
> 
> 标签：excel, duplicates, rows

此宏非常适用于根据特定列中的整数值复制行。如何让它也复制原始数据的格式？

```
Sub DuplicateRows()

Dim currentRow As Integer
Dim currentNewSheetRow As Integer: currentNewSheetRow = 1

For currentRow = 1 To 3 'The last row of your data

    Dim timesToDuplicate As Integer
    timesToDuplicate = CInt(Sheet1.Range("D" & currentRow).Value2)

    Dim i As Integer
    For i = 1 To timesToDuplicate

        Sheet2.Range("A" & currentNewSheetRow).Value2 = Sheet1.Range("A" & currentRow).Value2
        Sheet2.Range("B" & currentNewSheetRow).Value2 = Sheet1.Range("B" & currentRow).Value2
        Sheet2.Range("C" & currentNewSheetRow).Value2 = Sheet1.Range("C" & currentRow).Value2

        currentNewSheetRow = currentNewSheetRow + 1

    Next i

Next currentRow

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:02:29.243

我不太明白您要完成什么，但是当我想复制所有内容（格式、值等）时，我使用单元格的 Copy 和 PasteSpecial 功能。

```
Sub DuplicateRows()

Dim currentRow As Integer
Dim currentNewSheetRow As Integer: currentNewSheetRow = 1

For currentRow = 1 To 3 'The last row of your data

    Dim timesToDuplicate As Integer
    timesToDuplicate = CInt(Sheet1.Range("D" & currentRow).Value2)

    Dim i As Integer
    For i = 1 To timesToDuplicate

        Sheet1.Range("A" & currentNewSheetRow).Copy
        Sheet2.Range("A" & currentRow).PasteSpecial (xlPasteAll)
        Sheet1.Range("B" & currentNewSheetRow).Copy
        Sheet2.Range("B" & currentRow).PasteSpecial (xlPasteAll)
        Sheet1.Range("C" & currentNewSheetRow).Copy
        Sheet2.Range("C" & currentRow).PasteSpecial (xlPasteAll)

        currentNewSheetRow = currentNewSheetRow + 1

    Next i

Next currentRow

End Sub 
```

还要查看 PasteSpecial 函数的可能参数以完成您的结果。

# android - 修复Android中的绝对定位

> ID：11546155
> 
> 赞同：5
> 
> 时间：2012-07-18T16:35:18.940
> 
> 标签：android, html, css

我有我的网站，它在任何地方看起来都很棒，但是我不是 Android 的专业编码员。我不知道它有什么额外的怪癖，我也不确定我真的需要知道多少。有没有办法像在 IE 的条件注释中一样将其单独列出？

[这是我的网站](http://heavensgatewinery.ca)，横幅和徽标出现在屏幕的左侧。我有一个三星 Galaxy 3，这就是我的横幅在上面的样子。

![在此处输入图像描述](../Images/0bd4e089cad4d45cbbaa83033bb9b6cd.png)

现在我意识到为什么会发生这种情况，这是因为它们都处于绝对位置，并且显然`margin-left`正在使其脱离屏幕。但是，如果不破坏所有常规桌面浏览器的布局，我就无法改变这一点。

```
 #site-title { background: url(img/heavensgate-logo.jpg) no-repeat; width: 229px;height: 297px; position: absolute; top: 0px; left: 50%; margin-left: -438px; z-index: 2; border: 0px; text-indent: -9999px; }

#banner { position: absolute; top: 165px; width:868px; left: 50%; margin-left: -448px; z-index: 1; padding: 15px; background-color:
#fff; border: 1px solid #b4b4b4; }

<h1 id="site-title"><span><a href="http://heavensgatewinery.ca/" title="Heavens Gate Winery" rel="home">Heavens Gate Winery</a></span></h1>

    <div id="banner">
    <img src="http://heavensgatewinery.ca/wp-content/uploads/banner8.jpg" style="position: absolute; visibility: hidden; top: 0px; left: 0px; border: 0px none;">
    </div> 
```

我对如何让横幅和徽标与 Android 一起工作感到困惑。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T03:29:37.687

当您需要使用绝对定位来定位元素时，您几乎应该总是在相对定位的元素中这样做。

```
<div style="position:relative;"><div style="position:absolute;"></div></div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-16T12:28:36.767

虽然这不是那里描述的问题，但 Android 浏览器在绝对定位方面还有另一个问题；*绝对定位的 DIV 消失。*[Paweł Komarnicki](https://coderwall.com/p/7gjkug%20%22PK)找到的解决方案是`-webkit-backface-visibility: hidden`：

```
<div style="position: relative">
    <div style="position: absolute; -webkit-backface-visibility: hidden">
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T01:33:22.420

我的问题是在我的 Android（三星）中，除非其他答案，left: in px 给出正确的位置（绝对）但 left: in % 到位置 0。甚至例如 left: 10px; 左：20%；转到位置 0，calc() 在 left: 中也不起作用，但在宽度上以有限的方式起作用。

所以我认为 % 不适用于 left: 在 Android 中。所以我认为在上面的问题 left:50% 是问题，我想知道它是用相对/绝对位置解决的。我也这样做了，但没有解决方案！使用 -webkit-backface-visibility 时也没有区别！

解决方案：代替 left: 17%，使用 left: calc(17%) 和 left: 的其他固定像素，但 % 不起作用！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-27T10:42:31.713

我做了一些我认为与这个问题相关的测试。我想将 SVG 元素居中在**.Android 4.2.2**`div`中的代码未正确呈现。现在当我更改为问题已修复。我制作了一段代码，您可以并排查看。我的 Android 浏览器只能正确呈现版本；可能是因为强制硬件加速。请注意，我使用了一个很小的 ​​Javascript 代码将它们从一个复制到另一个。这是代码片段和codepen：**`translate``translate3d``translate``translate3d``translate3d``svg``div`**

 ****[代码笔： https](https://codepen.io/ehsabd/pen/yxOPOe) **://codepen.io/ehsabd/pen/yxOPOe****

 **```
document.getElementById('test-translate3d').innerHTML = document.getElementById('test-translate').innerHTML;
```

```
#test-translate, #test-translate3d{
  background: lightgray;
  margin:20px;
  float: left;
  position:relative;
  padding:100px;
}

#test-translate svg, #test-translate3d svg{
  position:absolute;
  width:100px;
  left: 50%;
  top: 50%;
}

#test-translate svg{
  -webkit-transform: translate(-50%,-50%);
}

#test-translate3d svg{
  -webkit-transform: translate3d(-50%,-50%,0);
}
```

```
<!--I've tested this on Android 4.2.2 native browser and I've seen that the first heart from left (which uses translate is not centered but the second heart (translate3d) is appropriately centered)-->
<div id="test-translate">
<svg  
    id="svg19871"
    sodipodi:docname="remigho_like(paths).svg"
    viewBox="0 0 604.96 556.17"
    version="1.1"
    inkscape:version="0.48.5 r10040"
  >

  <g
      id="layer1"
      inkscape:label="Calque 1"
      inkscape:groupmode="layer"
      transform="translate(-69.568 -427.74)"
    >
    <path
        id="path18741"
        sodipodi:nodetypes="csscssccc"
        style="color:#000000;stroke:#000000;stroke-width:53.15;fill:none"
        inkscape:connector-curvature="0"
        d="m586.75 734.03c37.196-28.491 61.2-73.36 61.2-123.83 0-86.088-69.799-155.89-155.89-155.89-48.272 0-91.426 21.952-120.02 56.407-28.592-34.455-71.746-56.407-120.02-56.407-86.088 0-155.89 69.799-155.89 155.89 0 50.469 24.003 95.338 61.2 123.83l214.72 223.3z"
    />
  </g>

</svg>
</div>

<div id="test-translate3d"></div>
```****

# linux - Linux内核设备驱动程序中的filp_open

> ID：11546163
> 
> 赞同：4
> 
> 时间：2012-07-18T16:35:45.723
> 
> 标签：linux, linux-kernel, linux-device-driver

filp_open 允许我们在文件系统中打开一个文件。但是从内核空间使用安全吗？如果使用需要注意什么。未来版本的 Linux 内核是否也会支持这一点。

目前使用 2.6.28 Linux 内核版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T17:23:35.840

A lot of drivers use the filp_open() function, it is pretty much a helper *to open a file in kernelspace*. No reason to assume it won't continue to be supported. Even the kernel's filesystem subsystem uses filp_open().

# xcode - 如何使用 2-component Picker 和 Text field entry 在 Xcode 中编写计算代码

> ID：11546164
> 
> 赞同：2
> 
> 时间：2012-07-18T16:35:45.087
> 
> 标签：xcode, picker

我正在尝试编写一个 iPhone/iPad 屏幕，该屏幕根据在文本字段中输入的内容和在 2 组件选择器中选择的内容输出值。我已经完成了基础知识，直到出现输入/选择的数据，但没有执行计算。我已经搜索了我能找到的所有资源，并使用了我找到的所有相关代码，如下所示。

具体来说，我想允许用户在一个文本字段中输入美元金额，选择支付频率（每小时、每月等），选择他们想要将其转换为的支付频率，然后在当他们点击按钮时的其他文本字段。另一个按钮将清除字段，因此他们可以转换另一个金额。更具体地说，如果他们想查看每周 310 美元的半月工资是多少，他们将在第一个字段中输入“310”，在第一个选择器组件中选择“每周”，在另一个组件中选择“半月”，然后点击计算按钮。然后，另一个字段将显示 $671.67 (310 * 52 / 24 = 671.67)。

以防万一，发生这种情况的视图控制器与导航控制器相关联，作为连接到主视图控制器的 6 个屏幕之一的 5 个屏幕之一（需要点击几下才能到达此屏幕） .

到目前为止，我可以在两个文本字段中输入数字，我可以旋转 2 个选择器组件并使它们的选择出现在标签中，但这就是我卡住的地方。我找不到如何实现它的示例。

这是我的 ViewController.h 代码：

```
 @interface PayFrequencyViewController : UIViewController
<UIPickerViewDelegate, UIPickerViewDataSource>
{
    UIPickerView *payPicker;
    NSArray *fromArray;
    NSArray *toArray;
    NSArray *fromValues;
    NSArray *toValues;
    UILabel *resultText;
    UITextField *inputText;
}
@property (strong, nonatomic) IBOutlet UIPickerView *payPicker;
@property (strong, nonatomic) NSArray *fromArray;
@property (strong, nonatomic) NSArray *toArray;
@property (strong, nonatomic) NSArray *fromValues;
@property (strong, nonatomic) NSArray *toValues;
@property (strong, nonatomic) IBOutlet UILabel *resultText;
@property (strong, nonatomic) IBOutlet UITextField *inputText;
- (IBAction)Convert:(id)sender;
- (IBAction)Clear:(id)sender;
@end 
```

这是我的 ViewController.m 代码：

```
 @interface PayFrequencyViewController ()

@end

@implementation PayFrequencyViewController
@synthesize payPicker;
@synthesize toArray;
@synthesize fromArray;
@synthesize toValues;
@synthesize fromValues;
@synthesize resultText;
@synthesize inputText;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    self.fromArray = [[NSArray alloc] initWithObjects:
                      @"Annual", @"Monthly", @"48/Year", @"SemiMonthly", @"BiWeekly", @"Weekly", @"Hourly", nil];

    self.fromValues = [[NSArray alloc] initWithObjects: 
                       [NSNumber numberWithFloat:1.0],
                       [NSNumber numberWithFloat:12.0], 
                       [NSNumber numberWithFloat:48.0],
                       [NSNumber numberWithFloat:24.0], 
                       [NSNumber numberWithFloat:26.0],
                       [NSNumber numberWithFloat:52.0], 
                       [NSNumber numberWithFloat:2080.0], nil];

    self.toArray = [[NSArray alloc] initWithObjects:
                      @"Annual", @"Monthly", @"48/Year", @"SemiMonthly", @"BiWeekly", @"Weekly", @"Hourly", nil];

    self.toValues = [[NSArray alloc] initWithObjects: 
                     [NSNumber numberWithFloat:1.0],
                     [NSNumber numberWithFloat:12.0], 
                     [NSNumber numberWithFloat:48.0],
                     [NSNumber numberWithFloat:24.0], 
                     [NSNumber numberWithFloat:26.0],
                     [NSNumber numberWithFloat:52.0], 
                     [NSNumber numberWithFloat:2080.0], nil];

    [super viewDidLoad];
    inputText.keyboardType = UIKeyboardTypeDecimalPad;
    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.toArray = nil;
    self.fromArray = nil;
    self.resultText = nil;
    self.inputText = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {

    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {

    if (component == 0) {
        return [fromArray count];
    }
    return [toArray count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView
             titleForRow:(NSInteger)row
            forComponent:(NSInteger)component
{
    if (component == 0) {
        return [fromArray objectAtIndex:row];
    }
    return [toArray objectAtIndex:row];
} 

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
      inComponent:(NSInteger)component {

//- (IBAction)Convert:(id)sender {

//    float valuein = [[fromValues text] floatValue];
//    float valueout = [[toValues text] floatValue];
//    [resultText setText:[NSString stringWithFormat:@"%6.2f", result]];
//    [inputText resignFirstResponder];

    float valuein = [[fromValues objectAtIndex:row] floatValue];
    float valueout = [[toValues objectAtIndex:row] floatValue];
    float input = [inputText.text floatValue];
    float result = input * valuein / valueout;
    NSString *resultString = [[NSString alloc] initWithFormat: @"$ %@", [toArray objectAtIndex:row]];
}

- (IBAction)Clear:(id)sender {
    inputText.text = @"";
    resultText.text = @"";
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
    [inputText resignFirstResponder];
}

@end 
```

对于冗长的帖子和格式不正确的代码，我深表歉意。我希望有人能告诉我哪些代码是不必要的以及完成此任务需要什么。

# gmaps4rails - gmaps4rails 中动态重置标记图标/图片的标准方法是什么？

> ID：11546169
> 
> 赞同：2
> 
> 时间：2012-07-18T16:36:02.703
> 
> 标签：gmaps4rails

我要做的就是动态重置标记的图标。例如，假设红色标记固定在地图上的特定位置。发生用户交互，需要红色标记变为黄色。在这种情况下，我希望能够做这样的事情：

```
 var icon = marker.serviceObject.getIcon();
      if ($("#chooseJobsForWorkSite ul li input:checked").size() > 0) {
        icon.url = "/assets/purple_MarkerT.png";
      } else {
        icon.url = "/assets/green_MarkerS.png";
      }
      marker.serviceObject.setIcon(icon); 
```

这适用于单个标记，但是当我遍历此代码以获取多个标记时，出现问题 - 我没有为所有标记获得所需的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T19:18:40.940

我通过使用 replaceMarkers API 方法解决了这个问题。这是有效的代码：

```
var replacementMarkers = new Array();
for (var k = 0; k < activeMarkers.length; ++k) {
  var marker = activeMarkers[k];

  var iconUrl = null;
  if ($.inArray(marker, taskMarkers) >= 0) {
    iconUrl = "/assets/purple_MarkerT.png";
  } else {
    iconUrl = "/assets/green_MarkerS.png";
  }

  replacementMarkers.push({
    "lat": marker.lat.toString(),
    "lng": marker.lng.toString(),
    "picture": iconUrl,
    "id": marker.id,
    "description": marker.description
  });
}

// Delay the replacement operation because in some instances, we reach this branch via the Gmaps.map.callback.
// In that case, I prefer to defer touching the gmap4rails until the current branch is done.

window.setTimeout(function() {
  Gmaps.map.replaceMarkers(replacementMarkers);
  resetAddressMarkers();
}, 25); 
```

# gtkmm - 如何使用 gtkmm 将 Gtk:Grid 放入 Gtk:Window 中

> ID：11546170
> 
> 赞同：0
> 
> 时间：2012-07-18T16:36:09.013
> 
> 标签：gtkmm

如何使用 gtkmm 将 Gtk:Grid 放入 Gtk:Window 中。当我试图调用时，它说“*没有已知的参数 1 从 «Gtk::Grid()» 到 «Gtk::Widget&» 的转换*`main_win.add(grid);`”， 但它太丑了：

```
...
int main (int argc, char *argv[])
{

Main kit(argc, argv);

Label label1("Hello1",0,0.5);
Label label2("Hello2",0,0.5);

Grid grid;

(*((Container*)&grid)).add(label1);
(*((Container*)&grid)).add(label2);

Window main_win(Gtk::WINDOW_TOPLEVEL);
main_win.add(*((Widget*)&grid));

main_win.show_all();

kit.run(main_win);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:50:25.563

你不需要任何那些疯狂的演员表。

```
Grid grid
Window window;
window.add(grid) 
```

会工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:16:43.393

嗯...现在可以了...我想我什么也没做...我不确定，但它看起来像是`Grid grid();`在我的源代码中，因为它会导致相同的错误。

# c# - 用文本框与标签发回

> ID：11546174
> 
> 赞同：0
> 
> 时间：2012-07-18T16:36:22.803
> 
> 标签：c#

这是我的代码 -

```
dtDetails = getDataSet();

foreach (DataRow dr in dtDetails.Rows) {

    int rowID = 1;
    HtmlTableRow row = new HtmlTableRow();
    {
        HtmlTableCell cell = new HtmlTableCell();
        TextBox tb = new TextBox();
        tb.ID = "tbJanuary" + rowID;

        tb.Text = dr["Jan"].ToString();

        cell.Controls.Add(tb);
        row.Cells.Add(cell);
    }

    rowID ++;
} 
```

当它最初运行时，我在我的文本框中得到正确的值。

但是，当我通过单击页面上的按钮更新数据库中的值时，它会导致预期的 PostBack。当我回到这个循环时， dr["Jan"].ToString() 具有新的正确值基础，但不会更改，但 oage 上的文本框永远不会更新。

如果我将代码更改为此-

```
dtDetails = getDataSet();

foreach (DataRow dr in dtDetails.Rows) {

    int rowID = 1;
    HtmlTableRow row = new HtmlTableRow();
    {
        HtmlTableCell cell = new HtmlTableCell();
        Label lbl = new Label();
        lbl.ID = "lblJanuary" + rowID;

        lbl.Text = dr["Jan"].ToString();

        cell.Controls.Add(lbl);
        row.Cells.Add(cell);
    }

    rowID ++;
} 
```

标签包含正确的新值。

没有显示正确值的文本框是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:55:51.020

ASP.NET 2.0 进行了一项设计更改，其中`Textbox`标记为`ReadOnly`属性的控件`true`将忽略客户端更改并在回发期间丢失相同的更改。如果您想要该功能而不是使用属性选项将文本框设为只读。添加代码：

```
TextBox1.Attributes.Add("readonly", "readonly"); 
```

在代码隐藏中，它仍然使文本框为只读，并且在每次回发后也将保留该值

所以，你的代码应该是这样的：

```
dtDetails = getDataSet();

foreach (DataRow dr in dtDetails.Rows) {

    int rowID = 1;
    HtmlTableRow row = new HtmlTableRow();
    {
        HtmlTableCell cell = new HtmlTableCell();
        TextBox tb = new TextBox();

        tb.ID = "tbJanuary" + rowID;

        tb.Text = dr["Jan"].ToString();
        tb .Attributes.Add("readonly", "readonly");
        cell.Controls.Add(tb);
        row.Cells.Add(cell);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:46:51.547

您永远不会增加`int`用于`rowID`为`Label`.

所以我认为这会导致`ViewState`无法正常工作。

尝试这个：

```
foreach (DataRow dr in dtDetails.Rows) {

    int rowID = 1;
    HtmlTableRow row = new HtmlTableRow();
    {
        HtmlTableCell cell = new HtmlTableCell();
        TextBox tb = new TextBox();
        tb.ID = "tbJanuary" + rowID++;

        tb.Text = dr["Jan"].ToString();

        cell.Controls.Add(tb);
        row.Cells.Add(cell);
    }
} 
```

从那以后，我强烈建议使用 GridView 或其他[`DataBound control`](http://msdn.microsoft.com/en-us/library/ms228214.aspx)，因为否则您需要在回发时使用与以前相同的 ID 重新创建每个动态创建的控件。

# ruby - Ruby 继承、模块或子类

> ID：11546175
> 
> 赞同：-1
> 
> 时间：2012-07-18T16:36:24.263
> 
> 标签：ruby, inheritance, module

我现在正在使用 Tumblr API，他们有各种类型的帖子（文本、照片、视频、引用、链接等）。我想创建一个父类 TumblrPost，然后创建一堆子类，例如 TumblrTextPost。如果我这样做，是否有办法通过 TumblrPost（即 TumblrPost.all.each）访问每个帖子而不考虑子类？（注意：我正在使用 MongoDB 和 Mongoid）

或者我应该让每个子类成为一个模块，然后只做 TumblrPost 类包括 TumblrTextPost 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:12:24.163

我不确定您是在谈论访问每个 TumblrPost 实例还是每个 TumblrPost 子类。

如果要访问每个实例，可以在 TumblrPost 中设置一个类实例变量，并在构造函数中使用每个新实例进行更新：

```
class TumblrPost
  @all_instances = []

  class << self
    attr_accessor :all_instances
  end

  def initialize
    TumblrPost.all_instances << self
  end
end

TumblrTextPost = Class.new(TumblrPost)

t1 = TumblrPost.new
t2 = TumblrTextPost.new

puts TumblrPost.all_instances 
```

另一方面，如果您希望能够遍历 TumblrPost 的每个子类，则可以使用继承的钩子来跟踪它们。

```
class TumblrPost
  @all_subclasses = []

  class << self
    attr_accessor :all_subclasses
  end

  def self.inherited(subclass)
    @all_subclasses << subclass
  end
end

TumblrTextPost = Class.new(TumblrPost)
puts TumblrPost.all_subclasses 
```

* * *

资料来源：Russ Olsen 的[Eloquent Ruby](https://rads.stackoverflow.com/amzn/click/com/0321584104)

# c++ - 如何从文件中读取文本行并将它们放入数组中

> ID：11546177
> 
> 赞同：1
> 
> 时间：2012-07-18T16:36:26.270
> 
> 标签：c++, arrays

我创建了一个文本文件`love.txt`：

```
i love you
you love me 
```

如何将它们存储到单独的数组中，`line1`然后`line2`在控制台中显示它们？

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main()
{
  string line1[30];
  string line2[30];
  ifstream myfile("love.txt");
  int a = 0;
  int b = 0;
  if(!myfile) 
  {
    cout<<"Error opening output file"<<endl;
    system("pause");
    return -1;
  }
  while(!myfile.eof())
  {
    getline(myfile,line1[a],' ');
    cout<<"1."<<line1[a]<<"\n";
    getline(myfile,line2[b],' ');
    cout<<"2."<<line2[b]<<"\n";
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T16:53:46.580

尝试在两个函数中将最后一个参数指定为**'\n'**`getline()`：

```
getline(myfile, line1[a], '\n'); 
```

代替

```
getline(myfile, line1[a], ' '); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-16T02:53:17.860

这个怎么样.. 。

```
vector <string> v;
string line;    
ifstream fin("love.txt");
while(getline(fin,line)){
    v.push_back(line);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T16:49:54.183

您可以将字符串视为一个字符数组，因此您只需要一个字符串数组：

```
const size_t SIZE = 30;
string line[SIZE]; // creates SIZE empty strings
size_t i=0;
while(!myfile.eof() && i < SIZE) {
  getline(myfile,line[i]); // read the next line into the next string
  ++i;
} 

for (i=0; i < SIZE; ++i) {
  if (!line[i].empty()) { // print only if there is something in the current line
    cout << i << ". " << line[i];
  }
} 
```

您也可以维护一个计数器来查看您存储了多少行（而不是检查空行）——这样您也可以正确打印空行：

```
const size_t SIZE = 30;
string line[SIZE]; // creates SIZE empty strings
size_t i=0;
while(!myfile.eof() && i < SIZE) {
  getline(myfile,line[i]); // read the next line into the next string
  ++i;
}
size_t numLines = i;

for (i=0; i < numLines; ++i) {
  cout << i << ". " << line[i]; // no need to test for empty lines any more
} 
```

*注意*：您最多只能存储`SIZE`行。如果你需要更多，你将不得不增加`SIZE`代码。稍后您将了解`std::vector<>`它允许您根据需要动态增加大小（因此您无需跟踪存储的数量）。

*注意*：使用常量 like`SIZE`只允许您在一处更改大小

*注意*：您应该在输入流的顶部添加一个错误检查`eof()`：以防出现读取失败而不是到达文件末尾：

```
while (myfile && ...) {
  // ...
} 
```

这里`myfile`被转换为一个布尔值，指示是否可以使用它 ( `true`) 或不 ( `false`)

* * *

**更新**：

我刚刚意识到您在追求什么：您想将输入读取为一系列单词（以空格分隔），但将它们显示为行。在这种情况下，您将需要 arrays-of-arrays 来存储每一行

```
string line[SIZE1][SIZE2]; 
```

where`SIZE1`是您可以存储的最大行数，并且`SIZE2`是您每行可以存储的最大单词数

填充此矩阵将更加复杂：您需要逐行读取输入，然后将行内的单词分开：

```
string tmp; // temporary string to store the line-as-string
getline(myfile, tmp);
stringstream ss(tmp); // convert the line to an input stream to be able to extract
                      // the words
size_t j=0; // the current word index
while (ss) {
  ss >> line[i][j]; // here i is as above: the current line index
  ++j;
} 
```

输出：

```
for (i=0; i < numLines; ++i) {
  cout << i << ". ";
  for (size_t j=0; j < SIZE2; ++j) {
    if (!line[i][j].empty()) {
      cout << line[i][j] << " ";
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-02-18T00:56:26.630

我的完整解决方案。

config.txt 文件包含：

```
#URL WEB POP3 IMAP SMTP FTP DNS PING ORDER
st-xxxx.com 1 1 0 1 1 0 1 1
24.xxx.195.11 1 1 0 1 1 0 1 2
24.xxx.195.12 1 1 0 1 1 0 1 3
192.168.0.100 1 1 0 1 1 0 1 4 
```

和我的代码：

```
#include <iostream>
#include <fstream>
#include <string>
#include <sstream>

using namespace std;

int main()
{

  ifstream myfile("config.txt");
  if(!myfile)
  {
    cout<<"Error opening output file"<<endl;
    system("pause");
    return -1;
  }

    const size_t SIZE1 = 30;
    const size_t SIZE2 = 10;
    string line[SIZE1][SIZE2];

    string tmp; // temporary string to store the line-as-string

    size_t i=0; // the current line index
    size_t j=0; // the current word index

    while(!myfile.eof() && i < SIZE1) {
    getline(myfile, tmp);
    stringstream ss(tmp); // convert the line to an input stream to be able 
//to extract the words
    size_t j=0;
    while (ss) {
      ss >> line[i][j]; // here i is as above: the current line index
      ++j;
    }
    i++;
    }

    size_t numLines = i;

    cout << numLines << "\n";
for (i=1; i <= numLines; ++i) {

  for (size_t j=0; j < SIZE2; ++j) {
    if (!line[i][j].empty()) {
      cout << line[i][j] << " ";
    }
  }
  cout << "\n";
}
    cout << line[3][0] << "\n"; // print the third line first word
} 
```

希望对正在寻找此类解决方案的任何人有所帮助，即使该帖子已经很旧了。

# perl - 如何在 awk 或 perl（或 python，或 ...）中编写此 sed/bash 命令？

> ID：11546180
> 
> 赞同：3
> 
> 时间：2012-07-18T16:36:34.057
> 
> 标签：perl, bash, scripting, sed, awk

我需要用新值替换脚本语言的实例`Progress (n,m)`和`Progress label="some text title" (n,m)``(N,M)`

```
N= integer ((n/m) * normal)
M= integer ( normal ) 
```

进度语句可以在脚本行的任何位置（更糟糕的是，尽管不是当前脚本，但可以跨行拆分）。

该值`normal`是 1 到 255 之间的指定数字，`n`并且`m`是浮点数

到目前为止，我的`sed`实现如下。它仅适用于`Progress (n,m)`格式而不适用于格式`Progress label="Title" (n,m)`，*但它只是简单的坚果*：

```
#!/bin/bash
normal=$1; 
file=$2
for n in $(sed -rn '/Progress/s/Progress[ \t]+\(([0-9\. \t]+),([0-9\. \t]+)\).+/\1/p' "$file" )
do 
    m=$(sed -rn "/Progress/s/Progress[ \t]+\(${n},([0-9\. \t]+).+/\1/p" "$file")
    N=$(echo "($normal * $n)/$m" | bc)
    M=$normal
    sed -ri "/Progress/s/Progress[ \t]+\($n,$m\)/Progress ($N,$M)/" "$file"
done 
```

简单地说：**这行得通，但是，有没有更好的方法？**

我的工具箱中有`sed`和`bash`脚本，而不是那么多`perl`，`awk`我认为这个问题更适合。

**编辑**样本输入。

```
Progress label="qt-xx-95" (0, 50) thermal label "qt-xx-95" ramp(slew=.75,sp=95,closed) Progress (20, 50) Pause  5 Progress (25, 50) Pause  5 Progress (30, 50) Pause  5 Progress (35, 50) Pause  5 Progress (40, 50) Pause  5 Progress (45, 50) Pause  5 Progress (50, 50)
Progress label="qt-95-70" (0, 40) thermal label "qt-95-70" hold(sp=70)        Progress (10, 40) Pause  5 Progress (15, 40) Pause  5 Progress (20, 40) Pause  5 Progress (25, 40) Pause  5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:54:40.470

`awk`具有良好的拆分能力，因此它可能是解决此问题的不错选择。

这是一个适用于所提供输入的解决方案，我们称之为`update_m_n_n.awk`。在 bash: 中像这样运行它`awk -f update_m_n_n.awk -v normal=$NORMAL input_file`。

```
#!/usr/bin/awk

BEGIN {
  ORS = RS = "Progress"
  FS = "[)(]"
  if(normal == 0) normal = 10
}

NR == 1 { print }

length > 1 { 
  split($2, A, /, */)
  N = int( normal * A[1] / A[2] )
  M = int( normal )
  sub($2, N ", " M)
  print $0
} 
```

### 解释

*   `ORS = RS = "Progress"`：在输出中拆分部分`Progress`并包含`Progress`在输出中。
*   `FS = "[)(]"`: 括号中的单独字段。
*   `NR == 1 { print }`:`ORS`在第一部分之前插入。
*   `split($2, A, /, */)`：假设在 的出现之间只有括号中的项目`Progress`，这将拆分`m`并`n`放入`A`数组中。
*   `sub($2, N ", " M)`：将新值替换为当前记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T19:31:05.127

这有点脆弱，但似乎可以解决问题？可以使用 perl -pe 将其更改为单行，但我认为这更清楚：

```
 use 5.16.0;
my $normal = $ARGV[0];
while(<STDIN>){
        s/Progress +(label=\".+?\")? *( *([0-9\. ]+) *, *([0-9\. ]+) *)/sprintf("Progress $1 (%d,%d)", int(($2/$3)*$normal),int($normal))/eg;
        print $_; 
```

}

基本思想是在$1中可选地捕获label子句，并将n和m捕获到$2和$3中。我们使用 perl 的能力，通过提供“e”修饰符，用一段评估的代码替换匹配的字符串。如果 label 子句有任何转义的引号或包含与看起来像 Progress toekn 的字符串匹配的字符串，那么它将会大大失败，因此它并不理想。我同意您在这里需要一个诚实的解析器，尽管您可以修改此正则表达式以纠正一些明显的缺陷，例如 n 和 m 的弱数字匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:54:47.147

我最初的想法是尝试`sed`使用递归替换（`t`命令），但是我怀疑这会卡住。

此`perl`代码可能适用于未跨行拆分的语句。对于跨行的拆分，编写一个单独的预处理器来连接不同的行也许是有意义的。

该代码将“进度”语句拆分为单独的行段，应用任何替换规则，然后将这些段重新连接为一行并打印。不匹配的行被简单地打印。匹配的代码使用反向引用并且变得有些不可读。我假设您的“正常”参数可以采用浮动值，因为规范似乎不清楚。

```
#!/usr/bin/perl -w

use strict;

die("Wrong arguments") if (@ARGV != 2);
my ($normal, $file) = @ARGV;
open(FILE, '<', $file) or die("Cannot open $file");

while (<FILE>) {
    chomp();
    my $line = $_;

    # Match on lines containing "Progress"
    if (/Progress/) {

        $line =~ s/(Progress)/\n$1/go;    # Insert newlines on which to split
        my @segs = split(/\n/, $line);    # Split line into segments containing possibly one "Progress" clause

        # Apply text-modification rules
        @segs = map {
            if (/(Progress[\s\(]+)([0-9\.]+)([\s,]+)([0-9\.]+)(.*)/) {
                my $newN = int($2/$4 * $normal);
                my $newM = int($normal);
                $1 . $newN . $3 . $newM . $5;
            } elsif (/(Progress\s+label="[^"]+"[\s\(]+)([0-9\.]+)([\s,]+)([0-9\.]+)(.*)/) {
                my $newN = int($2/$4 * $normal);
                my $newM = int($normal);
                $1 . $newN . $3 . $newM . $5;
            } else {
                $_;    # Segment doesn't contain "Progress"
            }
        } @segs;

        $line = join("", @segs);    # Reconstruct the single line
    }

    print($line,"\n");    # Print all lines
} 
```

# php - 每次更新到mysql的html表单数组

> ID：11546184
> 
> 赞同：2
> 
> 时间：2012-07-18T16:36:39.203
> 
> 标签：php, mysql, multidimensional-array

几天来，我一直在绞尽脑汁想弄清楚这一点，但最终还是失败了。我正在尝试使用以下表单值更新数据库中的行：

```
<input type="text" name="item[]" maxlength="255" value="',htmlentities($item["item"]),'">
<input type="text" name="description[]" maxlength="255" value="',htmlentities($item["description"]),'">
<input type="text" name="rate[]" maxlength="10" value="',htmlentities($item["rate"]),'">
<input type="hidden" name="itemid[]" value="',htmlentities($item["id"]),'" /> 
```

以下数组返回：

```
Array
(
[item] => Array
    (
        [0] => item listing 1
        [1] => item listing 2
    )

[description] => Array
    (
        [0] => item testing description
        [1] => item testing description
    )

[rate] => Array
    (
        [0] => 1.00
        [1] => 2.00
    )

[itemid] => Array
    (
        [0] => 1
        [1] => 2
    )
) 
```

现在我尝试使用以下内容更新到数据库中，但无济于事，我只能更新最后一行字段（[1] 值）:(任何帮助都会很棒

```
if (is_array($values))
{
for ($i = 0; $i < count($values); $i++)
{
    $item           = $values['item'];
    $description    = $values['description'];
    $rate           = $values['rate'];
    $id             = $values['itemid'];

    // $query = "UPDATE `invoice_items` SET `item` = '{$item}', `description` = '{$description}', `rate` = '{$rate}' WHERE `id` = '{$id}';";
    // Setting query function here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:40:59.183

也添加子数组编号。

```
if (is_array($values))
{
for ($i = 0; $i < count($values); $i++)
{
    $item           = $values['item'][$i];
    $description    = $values['description'][$i];
    $rate           = $values['rate'][$i];
    $id             = $values['itemid'][$i];

    // $query = "UPDATE `invoice_items` SET `item` = '{$item}', `description` = '{$description}', `rate` = '{$rate}' WHERE `id` = '{$id}';";
    // Setting query function here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:42:45.087

像这样的东西？

```
if (is_array($values)) {
    for ($i = 0; $i < count($values['itemid']); $i++) {
        $item           = $values['item'][$i];
        $description    = $values['description'][$i];
        $rate           = $values['rate'][$i];
        $id             = $values['itemid'][$i];

        $query = "UPDATE `invoice_items` SET `item` = '{$item}', `description` = '{$description}', `rate` = '{$rate}' WHERE `id` = '{$id}';";
        mysql_query($query);
    }
} 
```

# c - gluCylinder() OpenGL 的工作原理

> ID：11546188
> 
> 赞同：-1
> 
> 时间：2012-07-18T16:36:49.250
> 
> 标签：c, opengl, glu

我想用 OpenGL 建立一个板球场。我制作了几个多边形来表示场地、球场和保龄球线。但问题是当我试图用`gluCylinder`我做深度的树桩时`glEnable(GL_DEPTH_TEST)`，我的多边形就不起作用了。我只想知道如何使用 gluCylinder 用我制作的多边形制作树桩。

我有以下代码，但想在这里添加树桩但我不能，

```
#include <GL/gl.h>
#include <GL/glut.h>
static double deg=0.0;
void display(void)
{

glClear (GL_COLOR_BUFFER_BIT);

glRotatef(deg, 0.0, 0.0, 1.0); // Rotate by deg
// field
glColor3f (0.0, 0.5, 0.0);
glBegin(GL_POLYGON);
glVertex3f (0, 0, 0.0);
glVertex3f (1, 0, 0.0);
glVertex3f (1, 0.75, 0.0);
glVertex3f (0.8, 0.82, 0.0);
glVertex3f (0.6, 0.85, 0.0);
glVertex3f (0.4, 0.85, 0.0);
glVertex3f (0.2, 0.82, 0.0);
glVertex3f (0.0, 0.75, 0.0);
glEnd();

// pitch
glColor3f (0.25, 0.30, 0.0);
glBegin(GL_POLYGON);
glVertex3f(0.5,0.65,0.0);
glVertex3f(0.47,0.35,0.0);
glVertex3f(0.60,0.35,0.0);
glVertex3f(0.57,0.65,0.0);
glEnd();

//ump line
glColor3f (1.0, 1.0, 1.0);
glBegin(GL_POLYGON);
glVertex3f(0.49,0.63,0.0);
glVertex3f(0.49,0.6315,0.0);
glVertex3f(0.58,0.6315,0.0);
glVertex3f(0.58,0.63,0.0);
glEnd();

//bat line
glColor3f (1.0, 1.0, 1.0);
glBegin(GL_POLYGON);
glVertex3f(0.46,0.40,0.0);
glVertex3f(0.46,0.4025,0.0);
glVertex3f(0.61,0.4025,0.0);
glVertex3f(0.61,0.40,0.0);
glEnd();
glFlush ();
}
void init (void)
{

glClearColor (0.0, 0.0, 0.0, 0.0);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(0.0, 1.0, 0.0, 1.0, -1.0, 1.0);

}

void keyboard(unsigned char key, int x, int y)
{
switch (key) {
case 27: // "esc" on keyboard
exit(0);
break;
case 97: // "a" on keyboard
deg = deg+5.0;
glutPostRedisplay();
break;
case 100:
deg = deg-5.0;
glutPostRedisplay();
break;
}
}

int main(int argc, char** argv)
{
glutInit(&argc, argv);
glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);
glutInitWindowSize (600, 600);
glutInitWindowPosition (100, 100);
glutCreateWindow ("hello");
init ();
glutDisplayFunc(display);
glutKeyboardFunc(keyboard);
glutMainLoop();
return 0; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:55:10.387

`glEnable(GL_DEPTH_TEST)`需要深度缓冲区。确保在您的通话中通过`or`in分配一个。`GLUT_DEPTH``glutInitDisplayMode()`

确保通过调用中的 in`or`清除新的深度缓冲区。`GL_DEPTH_BUFFER_BIT``glClear()`

```
#include <GL/glut.h>

static double deg=0.0;

void display(void)
{
    glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glPushMatrix();
    glRotatef(deg, 0.0, 0.0, 1.0); // Rotate by deg

    // field
    glColor3f (0.0, 0.5, 0.0);
    glBegin(GL_POLYGON);
    glVertex3f (0, 0, 0.0);
    glVertex3f (1, 0, 0.0);
    glVertex3f (1, 0.75, 0.0);
    glVertex3f (0.8, 0.82, 0.0);
    glVertex3f (0.6, 0.85, 0.0);
    glVertex3f (0.4, 0.85, 0.0);
    glVertex3f (0.2, 0.82, 0.0);
    glVertex3f (0.0, 0.75, 0.0);
    glEnd();

    // pitch
    glColor3f (0.25, 0.30, 0.0);
    glBegin(GL_POLYGON);
    glVertex3f(0.5,0.65,0.0);
    glVertex3f(0.47,0.35,0.0);
    glVertex3f(0.60,0.35,0.0);
    glVertex3f(0.57,0.65,0.0);
    glEnd();

    //ump line
    glColor3f (1.0, 1.0, 1.0);
    glBegin(GL_POLYGON);
    glVertex3f(0.49,0.63,0.0);
    glVertex3f(0.49,0.6315,0.0);
    glVertex3f(0.58,0.6315,0.0);
    glVertex3f(0.58,0.63,0.0);
    glEnd();

    //bat line
    glColor3f (1.0, 1.0, 1.0);
    glBegin(GL_POLYGON);
    glVertex3f(0.46,0.40,0.0);
    glVertex3f(0.46,0.4025,0.0);
    glVertex3f(0.61,0.4025,0.0);
    glVertex3f(0.61,0.40,0.0);
    glEnd();

    glPopMatrix();

    glFlush ();
}

void init (void)
{
    glClearColor (0.0, 0.0, 0.0, 0.0);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0, 1.0, 0.0, 1.0, -1.0, 1.0);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}

void keyboard(unsigned char key, int x, int y)
{
    switch (key) {
    case 27: // "esc" on keyboard
        exit(0);
        break;
    case 'a': // "a" on keyboard
        deg = deg+5.0;
        glutPostRedisplay();
        break;
    case 'z':
        deg = deg-5.0;
        glutPostRedisplay();
        break;
    }
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB | GLUT_DEPTH);
    glutInitWindowSize (600, 600);
    glutInitWindowPosition (100, 100);
    glutCreateWindow ("hello");
    init ();
    glutDisplayFunc(display);
    glutKeyboardFunc(keyboard);
    glutMainLoop();
    return 0; 
} 
```

请注意，`GL_POLYGON`仅支持*凸*多边形。

# eclipse - JDI 事件调度空指针异常

> ID：11546190
> 
> 赞同：15
> 
> 时间：2012-07-18T16:36:51.220
> 
> 标签：eclipse, events, dispatch, jdi

当我尝试在我的设备上调试时，有时会出现错误，并且调试器不会在任何断点处停止。此外，该应用程序甚至无法正常启动，它只是在有点黑屏的情况下冻结，应用程序图标和名称位于顶部。

错误是 Eclipse 中的一个弹出窗口，标题为“'JDI Event Dispatch' 遇到问题。在：'JDI Event Dispatch' 期间发生内部错误。” 我有一个确定和详细信息按钮，当我按下后者时，我得到以下详细信息：“发生内部错误：“JDI Event Dispatch”。java.lang.NullPointerException”

我在 Eclipse Java EE Helios Service Release 2 工作。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-08T09:35:45.783

尝试增加调试器超时`eclipse menu Window > Preferences > Java > Debug`。在类似的情况下，这对我有用。

否则，您可以尝试通过查看错误日志条目 ( `Window > Show View > Others > Error Log`) 来了解问题原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-06T13:40:41.550

尝试删除所有断点。如果断点太多，就会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-02T20:11:21.957

在尝试远程调试时，我在 Eclipse Kepler 上也遇到了这个错误。

[![在此处输入图像描述](../Images/1f77627829a6cc6e4f229bcaba3d2c16.png)](https://i.stack.imgur.com/fpKa9.png)

我不需要做任何特别的事情来克服这个错误。我所做的只是再次启动调试模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-02T12:38:18.803

这发生在我身上，因为我有一个条件断点，布尔测试在字符数方面太长了。

# svg - 在浏览器中将 Google Geochart 转换为图像（JPEG、PNG 等）或 PDF

> ID：11546192
> 
> 赞同：6
> 
> 时间：2012-07-18T16:36:54.120
> 
> 标签：svg, export, google-visualization

我正在使用 Google GeoCharts (https://developers.google.com/chart/interactive/docs/gallery/geochart#Overview) 在浏览器中动态生成颜色编码的地图。geochart api 使用 javascript/svg 绘制地图......关于生成可导出图像文件的任何建议？（pdf、光栅图像等）

这可以通过谷歌地理图表完成吗？如果没有，您可以推荐其他服务吗？

*我们之前使用的是 GeoMaps，但分辨率不合适。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T06:50:59.303

这可以通过遵循[此页面](http://www.battlehorse.net/page/topics/charts/save_google_charts_as_image.html)上的步骤来完成。请注意，本文中的代码基于使用 iframe 的旧版 Google 可视化，并且不会像发布的那样工作。但是，您可以使用以下代码（在注释中找到）执行相同操作：

```
var svg = $(chartContainer).find('svg').parent().html();
var doc = chartContainer.ownerDocument;
var canvas = doc.createElement('canvas');
canvas.setAttribute('style', 'position: absolute; ' + '');
doc.body.appendChild(canvas);
canvg(canvas, svg);
var imgData = canvas.toDataURL("image/png");
canvas.parentNode.removeChild(canvas);
return imgData; 
```

注意：我没有创建此代码，它最初由上述网站的作者（Riccardo Govoni）创建，并由用户 Thomas 在评论部分更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T09:00:48.013

这很有可能；我通过利用 Highcharts 的 SVG 到图像转换器来做到这一点。您只需在页面中找到 svg 代码并将其连同类型参数（例如 image/jpeg）、宽度和保存为的文件名一起发布到 highcharts 导出服务器。

唯一的缺点：IE 不是为 Google 可视化呈现 SVG 而是 VML。目前还没有解决方案，但似乎 Highcharts 在 IE 和 VML 到 SVG 的转换方面也有困难。所以恐怕没有运气。

```
<form method="post" action="http://export.highcharts.com/" id="imageGetForm">
<input type="hidden" name="filename" value="savedFromGoogleVisualization" />
<input type="hidden" name="type" id="imageGetFormTYPE" value="" />
<input type="hidden" name="width" value="900" />
<input type="hidden" name="svg" value="" id="imageGetFormSVG" />
</form> 
```

并执行以下脚本：

```
var svg=document.getElementById('chart_div').getElementsByTagName('svg')[0].parentNode.innerHTML;
$('#imageGetFormTYPE').val('image/jpeg');//e.g. image/jpeg application/pdf etc
$('#imageGetFormSVG').val(svg);
$('#imageGetForm').submit(); 
```

这里的工作示例：http: [//jsfiddle.net/P6XXM/](http://jsfiddle.net/P6XXM/)

# c++ - “未定义的行为”是否扩展到编译时？

> ID：11546193
> 
> 赞同：18
> 
> 时间：2012-07-18T16:36:54.490
> 
> 标签：c++, c, runtime, undefined-behavior, compile-time

我们都听过这样的警告：如果您在 C 或 C++ 中调用**未定义的行为，***任何事情都*可能发生。

这是否仅限于*任何运行时行为*，或者这是否还包括任何编译时行为？特别是，在遇到调用未定义行为的构造时，编译器是否允许拒绝代码（在标准中没有其他要求的情况下），甚至崩溃？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T16:47:06.290

> “**你们都忽略了实际的定义，只关注注释，标准*没有要求*。** ” - @ [R.MartinhoFernandes](https://stackoverflow.com/users/46642/r-martinho-fernandes)

^(上面的消息是由*[Lounge<C++>](https://chat.stackoverflow.com/rooms/10/loungec)*中的给定用户编写的，并且是一个非常有效的论点；当涉及到调用*未定义行为*的代码时，该标准没有强加*任何要求*。)

 ** * *

### ！！！

*undefined-behavior*甚至延伸到编译器解析输入数据（即代码）的最远角落，正如以下来自*C++11*和*C99*标准的引用所验证的那样。

**一句话回答你的问题**；

*   *未定义的行为*不限于运行时执行，并且允许在编译期间崩溃*“以环境的记录方式特征”* ¹

* * *

^(***“以环境的记录方式特征”*是一种奇怪的陈述，您几乎可以编写一个编译器来记录它可能会在任何给定的代码（这是无效的）上崩溃，以赋予它随时崩溃的可能性。**)

^(^(1.)引用C++11/C99标准)

* * *

### [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")

> ###1.3.24 [defns.undefined]
> 
> *未定义的行为*；本国际标准没有要求的行为

> [*注*：
> 
> > 当本国际标准省略任何明确的行为定义或程序使用错误的构造或错误的数据时，可能会出现未定义的行为。
> 
> > 允许的未定义行为的范围从**完全忽略具有不可预测结果的情况**，到**在翻译** 或**程序执行**期间以环境特征的记录方式表现（有或没有发出诊断消息），到 **终止翻译或执行**（有发出的诊断消息）。
> 
> > 许多错误的程序结构不会产生未定义的行为；他们需要被诊断出来。

> ——*尾注*]

* * *

### [c99](/questions/tagged/c99 "显示标记为“c99”的问题")

> ### 3.4.3 -**未定义的行为**
> 
> 1.  行为，在使用不可移植或错误程序构造或错误数据时，本>国际标准对此没有要求
>     
>     
> 2.  注意 可能的未定义行为范围从**完全忽略具有不可预测结果的情况**，到**在翻译或程序执行期间**以环境特征的记录方式表现（**有或没有发出诊断消息**），**到终止翻译或执行**（使用发出诊断消息）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-18T16:41:06.727

如果行为未定义，编译器可以接受、拒绝、发出警告，并根据标准，甚至在您的计算机上崩溃、挂起或安装病毒。

实际上，这并不意味着如果您正在编写编译器，您应该故意做这些事情，但是您可以使用一种算法，例如，如果性能优势证明它是合理的，那么您可以使用一种适用于已定义案例并崩溃或挂起未定义案例的算法.

尽管如此，一个有信誉的编译器会避免这种情况，或者至少有很好的文档记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T16:44:00.337

它不限于运行时行为。根据 ISO/IEC 14882，第一版，1998-09-01, 1.3.12，在注释中（因此非规范性）：“允许的未定义行为范围从……到在翻译或编程执行期间以记录方式执行的行为特征环境”。换句话说，该标准说，只要有文档，实现可以做操作系统（或其他环境）允许的任何事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T16:45:00.520

我一直喜欢标准引号，所以如果这是您要寻找的，标准将未定义的行为定义为

> 本国际标准没有要求的行为
> 
> [注意：当本国际标准省略了程序使用错误构造或错误数据时的行为的任何明确定义时，可能会出现未定义的行为。允许的未定义行为的范围从完全忽略具有不可预测结果的情况，到**在翻译或程序执行期间**以环境特征的记录方式表现（有或没有发出诊断消息），到终止翻译或执行（发出的诊断消息）。许多错误的程序结构不会产生未定义的行为；他们需要被诊断出来。——尾注]

而“翻译”基本上是从源代码到最终产品（组装或其他）。所以我们可以混合这两种可能性并得到

> 在翻译过程中完全忽略了情况，结果无法预测

所以是的，编译器可以在编译期间和运行时自由地表现出未定义的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-10T18:36:34.333

至少某些形式的未定义行为可能会导致编译行为本身的行为超出标准的管辖范围。例如，标准的作者不想排除使用类似

```
#include `someProg arg` 
```

或者

```
#pragma exec-include "someProg arg" 
```

作为`someProg`使用给定参数运行的一种方式，并将此类程序的输出视为源文本的一部分。由于此类语法调用的程序的行为将超出标准的管辖范围，因此从标准的角度来看，此类构造仅被视为在编译时调用 UB。*

# javascript - 将两个单独的 javascript 文件/片段保存在同一个命名空间中

> ID：11546194
> 
> 赞同：0
> 
> 时间：2012-07-18T16:37:02.120
> 
> 标签：javascript

我有两个文件加载到浏览器。

一个在初始调用中直接作为嵌入式脚本加载。

另一个是通过创建脚本节点并写入 .innerHTML 属性来动态加载的。

我必须这样做。

两个 JavaScript 片段都封装在模块模式中。

我可以像这样给他们相同的命名空间吗：

**伪代码**

```
var ns = Module Pattern 1

var ns = Moudule Pattern 2 
```

如果没有，是否有另一种方法给它们相同的名称空间，以便当它们返回函数时我可以统一访问这些函数？

```
ns.function1();
ns.function2(); 
```

因为这是针对一个应用程序，所以我希望只有一个命名空间。但正如我提到的，我必须加载两个片段。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:42:06.950

使用任何合理的 mixin 实现，您可以尝试以下操作：

```
var ns = ns || {};
mixin(ns, Module Pattern 1);

var ns = ns || {};
mixin(ns, Module Pattern 2); 
```

然后可以按任何顺序加载这些。

* * *

或者，稍微更改您的模块模式以接受命名空间对象作为参数并为两者提供相同的参数：

```
var ns = ns || {};
(function(namespace) {
    // ...
    namespace.function1 = //...
}(ns));   

// (again for module 2) 
```

# redirect - 通过 Balanced API 创建商家帐户的时间延迟

> ID：11546208
> 
> 赞同：2
> 
> 时间：2012-07-18T16:37:34.220
> 
> 标签：redirect, balanced-payments

我刚刚在 Balanced Payments 上建立了我们的第一个实时商家，并希望将其记入贷方。在帐户创建过程中，我在代码中收到了[重定向请求](https://www.balancedpayments.com/docs/ruby/merchant#requests-for-more-information)，我遵循了该请求。

我输入了商家数据和帐户信息，并成功地使用帐户 URI 和电子邮件重定向回我的站点。

我可以通过 API 成功检索帐户，但我没有在平衡仪表板上的帐户列表页面中看到它。在新的真实商家帐户出现之前是否可能存在一些滞后时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:20:51.347

当 Balanced 通过 KYC 流程为您创建商家时，您不会将任何身份验证信息传递给 API，这意味着 Balanced 无法在您的帐户中创建对象。这一点很重要，因为：

Balanced 将创建一个代表 Balanced 系统中的身份的商家（此身份与任何特定市场无关），但它不会在您的市场上创建实际帐户。

文档指出，返回给您的是该商家的 URI，但是您需要[使用此身份](https://www.balancedpayments.com/docs/merchant#handling-redirect-response)在您的市场中创建一个帐户。您可以这样做，因为您有一个 API 密钥来验证请求。

以下是使用 Balanced Ruby 客户端创建帐户的示例：

```
# URL looks like https://yoursite.com/kyc/complete?email_address=merchant@exam
# ple.org&merchant_uri=/v1/merchants/MR3KJZgnQcg8OX8FrTWlRszn
merchant_uri = params[:merchant_uri]  # alter to your framework for GET params
email_address = params[:email_address]

merchant = Balanced::Marketplace.my_marketplace.create_merchant(
    email_address,
    merchant_uri
) 
```

# java - 在 JDK1.7 上使用 mofify 日期对文件数组进行排序时出现 IllegalArgumentException

> ID：11546210
> 
> 赞同：0
> 
> 时间：2012-07-18T16:37:39.903
> 
> 标签：java, sorting, java-7

我在对 Java 7 虚拟机上的文件数组进行排序时遇到了一些问题。有时我从 TimSort 那里得到 IllegalArgumentException 抱怨“比较方法违反了它的一般合同！”。比较器比较简单：

```
final File[] filesList = importDirectory.listFiles();
Arrays.sort(filesList, new Comparator<File>() {
    public int compare(File f1, File f2) {
        return Long.valueOf(f1.lastModified()).compareTo(f2.lastModified());
    }
}); 
```

这个实现有什么问题？为什么它不会在 Java 6 VM 上失败（我已经读过，Java 7 中使用的 TimSort 算法比 Java 6 的普通 Merge 算法更具限制性，但我仍然看不到我在哪里违反比较合同。

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:41:01.530

当您对其进行排序时，这会破坏其中一个文件被修改。

加快速度（因为 lastModified 很昂贵）并避免此问题的一种方法是构建修改日期地图。

```
Map<File, Long> lastModifiedMap = 
```

# android - Android - 一旦点击关闭/打开位置服务

> ID：11546214
> 
> 赞同：0
> 
> 时间：2012-07-18T16:37:48.623
> 
> 标签：android, android-widget

我使用了一些在 Android 中使用位置服务的应用程序，但在大多数情况下，我希望在需要它们之前将这三个保持关闭：

使用无线网络 使用 GPS 卫星位置和 Google 服务

我想设计一个可以一键切换这三个的应用程序。所以我有两个问题。

1.  有没有办法做到这一点，或者切换它们的唯一方法是使用：

android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS

然后手动做？和....

1.  如果一些应用程序正在使用访问课程位置和访问精细位置，我是否将它们关闭是否重要？他们还能得到我的位置吗？

感谢您的输入。

扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:56:48.137

不，现在不可能，因为这些设置在**Secure setting 中**。只有用户可以更改它，而不是应用程序。

是和否，您可能会获得*缓存*位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:45:39.320

> 有没有办法做到这一点

不通过任何现代版本操作系统上的 Android SDK。

> 如果一些应用程序正在使用访问课程位置和访问精细位置，我是否将它们关闭是否重要？他们还能得到我的位置吗？

不可以。这些位置提供程序已被禁用，因此在它们保持禁用状态时无法使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T22:45:59.523

只是为了这个原因而去寻找这个东西。我找到了一个！恰当地说，它被称为**[Secure Settings](https://play.google.com/store/apps/details?id=com.intangibleobject.securesettings.plugin&hl=en)**。

它可以通过一个以 root 身份运行的帮助程序来访问它，因此您需要一部 root 手机。唉，它在我的 4.2.2 系统上找不到busybox，所以我还不能测试它。

相当令人失望，虽然也许并不奇怪，默认情况下这个选项并不方便。

# python - 条件匹配时在python中增加for循环

> ID：11546216
> 
> 赞同：-2
> 
> 时间：2012-07-18T16:37:57.633
> 
> 标签：python, for-loop

编辑：问题是由于我的代码的不同部分造成的。我以为是for循环

我在 python 中有一个 for 循环，如下所示：

```
for x in OrderedList:
    if x in ResultList1:
        print x, '1'
    elif x in ResultList2:
        print x, '2'
    elif x in ResultList3:
        print x, '3' 
```

问题是如果它`x`在`ResultList1`and中找到`ResultList2`，它会打印`x,'1'`，`x,'2'`但我希望它得到下一个值，`x`如果它找到 x in `ResultList1`，而不是在 2 和 3 中查找。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:41:42.560

您的代码已经这样做了。

您可以移动到下一个元素的另一种方法是使用`continue`：

```
for x in OrderedList:
    if x in ResultList1:
        print x, '1'
        continue
    if x in ResultList2:
        print x, '2'
        continue
    if x in ResultList3:
        print x, '3'
        continue 
```

但是，这里没有必要，因为您使用的是`elif`.

# ruby-on-rails-3 - 让 Selenium 与 Bootstrap 模态褪色一起玩的建议？

> ID：11546217
> 
> 赞同：13
> 
> 时间：2012-07-18T16:37:58.067
> 
> 标签：ruby-on-rails-3, selenium, twitter-bootstrap, cucumber

我正在努力以 BDD 的方式生活。我正在使用 Cucumber（带有 Selenium）并且恰好在我的应用程序中使用 Twitter Bootstrap 模式。

在运行 Cucumber 测试时，我遇到了一个`"Selenium::WebDriver::Error::MoveTargetOutOfBoundsError"`错误。经过大量搜索、调试和普遍绝望后，我得出结论，这与`"fade"`我在 Bootstrap 模态中使用参数有关。如果我使用`"fade"`，则会引发错误：

```
<div class="modal hide fade" id="info-share-edit-modal" style="display: none;">
  .
  .
  .
</div> 
```

如果我删除`"fade"`，那么 Selenium 充满了快乐，我的测试也很清楚：

```
<div class="modal hide" id="info-share-edit-modal" style="display: none;">
  .
  .
  .
</div> 
```

所以，我现在正在`"fade"`从我的各种模式中删除。但是，这让我很难过，因为我喜欢淡入淡出效果。

有没有其他人在使用 Selenium 和 Bootstrap 模式中的淡入淡出时遇到过问题？如果是这样，是否有一些聪明的方法可以让两者很好地协同工作？

顺便说一句（不确定是否重要），我是 Rails 3.2.3、Firefox 13.0.1 和 Ubuntu 12.04LTS。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T01:54:55.113

我做了一个快速测试，插入一个 WebDriverWait 来查看模态的不透明度。它似乎有效，但时间会证明（至少对我而言）这是一个间歇性问题。这是我在 Java 中的实现。

```
//Ensure the modal is done animating
new WebDriverWait(driver, 5).until(
    new ExpectedCondition<Boolean>() {
        @Override
        public Boolean apply(WebDriver webDriver) {         
            return webDriver.findElement(By.id("videoModal")).getCssValue("opacity").equals("1");
        }
    }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-08T15:18:40.980

我以这种方式解决了它（使用c#）。它速度很快，并且没有失败过一次。

```
public static void WaitForModal(this RemoteWebDriver driver)
{
    using (driver.NoImplicitWait())
    {
        var wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30));
        wait.Until(d => d.FindElements(By.ClassName("modal-backdrop").Count == 0);
    }
} 
```

NoImplicitWait 用于暂时禁用驱动程序隐式等待。

```
public static NoImplicitWait NoImplicitWait(this IWebDriver driver)
{
    return new NoImplicitWait(driver);
}

public sealed class NoImplicitWait : IDisposable
{
    private readonly IWebDriver _driver;

    public NoImplicitWait(IWebDriver driver)
    {
        _driver = driver;
        _driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(0));
    }

    public void Dispose()
    {
        _driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(30));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T04:27:04.893

放入一个标志，以便在测试环境中它不会褪色，但在其他所有环境中都会褪色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-15T20:34:15.320

我通常做的是针对一些应该在模式上可见的内容（或淡出时不可见）进行断言：

```
expect(page).to have_content('My Modal Header')
expect(page).to have_no_content('My Modal Header') 
```

重要的是使用`.to have_no_content`而不是`.not_to have_content`，因为`have_no_content`会等待一段时间让事情成为现实。

在紧要关头，您还可以检查模态 CSS 选择器。`in`当模式可见时，Bootstrap 添加一个类：

```
expect(page).to have_selector('.modal.in')
expect(page).to have_no_selector('.modal.in') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-25T23:18:05.323

改进 user1965252 的答案，这对我有用。只需替换`the-modal-id`为您的模态 div id。

```
new WebDriverWait(driver, TIME_OUT_IN_SECONDS).until(and(
        new ExpectedCondition<Boolean>() {
           @Override
           public Boolean apply(WebDriver webDriver) {
               return webDriver.findElement(id("the-modal-id"))
                       .getCssValue("opacity").equals("0");
           }
        },
        numberOfElementsToBe(cssSelector("div.modal-backdrop"), 0)
)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-03T16:36:54.230

> c# 代码

我遇到了同样的问题，这段代码已经为我工作了两个多月，不再崩溃。

```
 public static void WaitForModal(this IWebDriver driver)
    {
        wait.Until<IWebDriver>((d) =>
        {
            if (driver.FindElements(By.ClassName("modal-backdrop")).Count == 0)
            {
                return driver;
            }
            return null;
        });
    } 
```

它一直等到找不到更多`IWebElement`具有`class`“模态背景”的内容。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-22T07:53:05.130

在 selenium 测试用例中，当应用程序打开引导模式时，添加一个暂停命令以要求 selenium 在与模式的内容交互之前暂停一秒钟：

```
Command: pause /
Target: 1000 /
Value: (leave empty) 
```

# cuda - CUDA 的内联 PTX 代码的语法

> ID：11546221
> 
> 赞同：1
> 
> 时间：2012-07-18T16:38:14.457
> 
> 标签：cuda, ptx

正如Nvidia的Inline PTX Assembly文档中所写，使用内联汇编的语法是： `asm("temp_string" : "constraint"(output) : "constraint"(input));`
这里有两个例子：
`asm("vadd.s32.s32.s32 %0, %1.h0, %2.h0;" : "=r"(v) : "r"(a), "r"(b));`
`asm("vadd.u32.u32.u32 %0.b0, %1, %2, %3;" : "=r"(v) : "r"(a), "r"(b), "r"(z));`
在这两个例子中，都有参数比如：`h0`或者`b0`跟在`%n`. 我浏览了 CUDA 的官方文档，并没有发现对`h0`or的含义有任何顾虑`b0`。我见过`h0`, `h1`, `b0`, `b1`, `b2`. `b3`我猜`h0`还是`h1`代表一个 16 位的值，而`bn`代表一个字节的值。有人知道这些的确切含义吗？

感谢罗杰达尔的帮助。我阅读了 PTX ISA 3.0 并找到了答案。
“h”表示半字。`h0`表示 32 位字的低半字。`h1`表示 32 位字的高半字。“b”表示整数字节。`b0`, `b1`,`b2`分别`b3`代表一个 32 位字的前 8 位、第二个 8 位、第三个 8 位和最高 8 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:58:14.280

`vadd`是 PTX 随附的视频特定说明之一。CUDA 发行版中包含对完整 PTX ISA 的描述。在我的机器上，它在`C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.1\doc\ptx_isa_3.0.pdf`. `h0`, `h1`,`b0`等指示符的描述在本`8.7.11 Video Instructions`节中。它们代表不同的隐式移位/掩码操作（参见`optMerge`函数）。

# iphone - 从目标中删除 AppTest

> ID：11546222
> 
> 赞同：0
> 
> 时间：2012-07-18T16:38:15.063
> 
> 标签：iphone

在项目中，它显示了两个目标。一个是应用程序的主要目标，另一个是应用程序测试。我只需要一个仅作为主要应用程序的目标。那么如何从 Targets 中删除 AppTests。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:45:06.107

从 Targets 中删除 AppTests 的方法是选择 AppTests 然后单击 BuildPhases 并在 Build Phases Under Target Dependencies 中删除作为主应用程序的依赖项，然后单击 Product 菜单下的 Analyze 然后您可以右键单击 AppTest 然后单击 Delete 和它最终会从目标中删除 AppTests，然后它只会在您的项目中显示一个目标。

# x11 - 如何修复 VNC 显示器上的 opensuse GUI？

> ID：11546225
> 
> 赞同：-1
> 
> 时间：2012-07-18T16:38:23.963
> 
> 标签：x11, opensuse, vnc-viewer

我们的服务器有 opensuse 12.1，每当我尝试通过 VNC 查看器访问时，opensuse 的 GUI 都显示为原始。我猜这是 X11 或 X-windows 的问题。如何解决此问题以获得更好的所有视图 GUI？而且当我们创建一个新用户时，我们需要修改 xstartup 文件以附加 startkde & 以获得一个 GUI。有没有一种方法可以在一个地方修改它并为所有创建的新用户修改 xstartup？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:59:04.027

你能更清楚地解释“原始 GUI”是什么意思吗？是分辨率，没有kde效果吗？至于你问题的第二部分 - 基本上你不需要启动 X 会话来创建/设置用户帐户，请参阅链接[链接](http://www.linuxforums.org/forum/newbie/113091-how-create-user-console-graphic-interface.html)- 熟悉 user* 命令 - 它确实加快了工作速度。干杯!

# visual-studio-2010 - Visual Studio 2012 RC “psapi.dll” - 启动时出现致命错误

> ID：11546226
> 
> 赞同：1
> 
> 时间：2012-07-18T16:38:24.767
> 
> 标签：visual-studio-2010

在我的开发 PC 上安装 VS2012 RC 后，在选择适当的环境设置后，我在启动应用程序时立即在启动屏幕上不断收到此错误。

> 无法加载 DLL 'psapi.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）

VS2012 在 VS2012 抛出错误后立即抛出此错误。（VS2010 在 2012 安装之前运行良好）。**这两个应用程序现在甚至根本不起作用。**

我尝试过的事情：

1.  尝试使用我知道的 VS 的所有开关命令运行 devenv - /Resetsettings、/ResetSkipPkgs、/safemode
2.  在我的 PC（2008、2010 和 2012）上卸载和安装所有版本的 VS - 清除 %temp% windows 文件夹后。
3.  格式化我的电脑并从头开始重新安装所有版本的 VS。

**请注意：当我在安全模式下重新启动 Windows 时，Visual Studio 2012 工作正常。**

我的电脑是联想 i3，4G 内存，64 位 Windows 7。

请帮助我，因为我浪费了几天时间试图解决这个问题，但无济于事。

非常感谢。

# javascript - 使用 jQuery 增加输入字段值

> ID：11546228
> 
> 赞同：21
> 
> 时间：2012-07-18T16:38:28.070
> 
> 标签：javascript, jquery, html

jQuery（或纯 JavaScript）中增加输入字段值的**最短**方法是什么？

例如

```
<input id="counter" type="hidden" name="counter" value="1"> 
```

所以它变为

```
<input id="counter" type="hidden" name="counter" value="2"> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-18T16:45:27.133

```
$('#counter').val( function(i, oldval) {
    return parseInt( oldval, 10) + 1;
}); 
```

**[演示](http://jsfiddle.net/7gkxM/9/)**

**或者**

```
$('#counter').val( function(i, oldval) {
    return ++oldval;
}); 
```

**[演示](http://jsfiddle.net/7gkxM/8/)**

您可以将上述任何代码包装在一个函数中并调用它以进一步增加。例如：

```
function increment() {
    $('#counter').val( function(i, oldval) {
        return ++oldval;
    });
} 
```

现在`increment()`在您需要的时间和地点拨打电话。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-01-03T23:53:41.610

我认为最短的方法是：

```
$('#counter').get(0).value++ 
```

或者

```
$('#counter').get(0).value-- 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-18T16:39:41.627

尝试这个：

```
var $input = $('#counter');

$input.val( +$input.val() + 1 );​ 
```

## [演示](http://jsfiddle.net/7gkxM/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-18T16:59:57.417

这里不需要 jQuery，而是使用纯 JavaScript：

```
document.getElementById('counter').value++; 
```

演示：http: [//jsfiddle.net/RDMPq/](http://jsfiddle.net/RDMPq/)

您可以将增量移动到接受动态 ID 的函数以提高可移植性：

```
function incrementInput(id){
    document.getElementById(id).value++;
} 
```

演示：http: [//jsfiddle.net/uyuGY/](http://jsfiddle.net/uyuGY/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T16:52:05.450

你可以试试这个：

**jQuery：**

设置一个函数来执行此操作：

```
function incrementVal(selector) {
var $item = selector;
var $curVal = $item.attr("value");
$item.attr("value", parseInt($curVal) + 1 );
} 
```

只需单击一个按钮即可使用它：

```
$("#increment").on("click",function() {
incrementVal($('#counter'));
}); 
```

**您的 HTML：**

```
<input id="counter" type="hidden" name="counter" value="1">
<button id="increment">Increment field</button> 
```

希望有帮助。

# c++ - 使用 C++，您可以从方法中返回 sqlite3_stmt 吗？

> ID：11546230
> 
> 赞同：1
> 
> 时间：2012-07-18T16:38:39.183
> 
> 标签：c++, sqlite

我正在尝试减少对象中重复的 sqlite 代码。为此，我想要一种具有 sqlite 交互并且只返回 sqlite3_stmt 的方法。我的问题是 sqlite3_stmt 指针始终为空。我的问题是，我做错了什么还是不能用 sqlite 完成？

用法：

```
SqliteIO sqldb;
string GET_CONFIG = "select* from config; ";
sqlite3_stmt *statement;
assert(sqldb.sqlForResults(GET_CONFIG, statement));
assert(statement != NULL); //this fails 
```

方法：

```
bool SqliteIO::sqlForResults(string pSql, sqlite3_stmt *statement ){
bool lbRetVal=false;

if(mDB == NULL){
    cerr << "No database to query";
    Logger::error("SqlliteIO::getAllScheuled() null database handle");
} else {
    sqlite3_busy_timeout(mDB, 2000);
    if(sqlite3_prepare_v2(mDB, pSql.c_str(), -1, &statement, 0) == SQLITE_OK) {
        lbRetVal = true;
    }
    string error = sqlite3_errmsg(mDB);
    if(error != "not an error"){
        cerr << pSql << " " << error << endl;
        Logger::error("SqlliteIO::sqlForResults() "+ error + " " +pSql  );
    }
}
return lbRetVal; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:05:08.163

```
sqlite3_stmt *statement; // this never gets initialized
assert(sqldb.sqlForResults(GET_CONFIG, statement));
assert(statement != NULL); //this fails 
```

该代码块中的语句变量永远不会被初始化（您将它的副本传递给 sqlForResults()）。

坦率地说，你很幸运断言失败，因为语句可能有任何垃圾值（我猜变量在你的编译器的调试模式下是零初始化的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T00:25:43.343

The statement parameter of SqliteIO::sqlForResults() needs to have the type `sqlite3_stmt**`, not `sqlite3_stmt*`. So the call site would now look like:

```
SqliteIO sqldb;
string GET_CONFIG = "select* from config; ";
sqlite3_stmt *statement = NULL;
assert(sqldb.sqlForResults(GET_CONFIG, &statement)); 
```

Without the reference/address-of operator `&` before statement (like in the original question), you would be passing the *value* of `statement` to `sqlForResults`, which was `NULL` or 0 in this case. The relevant changes in `sqlForResults` are:

```
bool SqliteIO::sqlForResults(string pSql, sqlite3_stmt **statement ){
bool lbRetVal=false;

if(mDB == NULL){
    // ...
} else {
    // ...
    if(sqlite3_prepare_v2(mDB, pSql.c_str(), -1, statement, 0) == SQLITE_OK) {
        // ...
    }
    // ...
}
return lbRetVal; 
```

The parameter list now accepts a `sqlite_stmt**` arg, and we pass that directly to `sqlite3_prepare_v2`. In the original question, `sqlForResults` passed `&statement` to `sqlite3_prepare_v2` - which is the address of the `statement` parameter for this `SqliteIO::sqlForResults` method call - which isn't what you want.

I know this is an old question, but I hope this helps.

EDIT: for clarity and to elude some more code from sqlForResults

# vim - Vim 如何在寄存器中显示宏？

> ID：11546239
> 
> 赞同：2
> 
> 时间：2012-07-18T16:39:05.470
> 
> 标签：vim, macros, keyboard

我发现能够在 Vim 中使用宏是多么方便。特别是录音，`q`但我对如何读取我正在录音的寄存器中存储的内容感到困惑。

举一个具体的例子，我经常使用 Vim 来编写 LaTeX 文档，在这方面我制作了一个宏，将 a`%`放在当前行的开头，以便注释掉这段代码。我通过如下记录来做到这一点。我按下了键`q` `u` `Home` `i` `%` `Esc` `q`。现在按下`@u`我就可以播放那个宏了，因为我经常使用那个宏，所以我决定把它放在我的`.vimrc`文件中。我查看了主题，发现我必须使用`Ctrl`+`V`来获取我使用的击键，例如，转义键。我

```
let @u='^[OHi%^[' 
```

我`^OH`用`Ctrl`+`V` `Home`和+制作`^[`的地方。现在，当我启动 Vim 时，寄存器的内容应该是，但如果我只是用 录制宏，那么寄存器会读取`Ctrl``V` `Esc``u``^[OHi%^[``q`

```
<80>khi%^[ 
```

我试图理解这意味着什么。它做同样的事情，但是如果我在查阅 Vim 中的一些帮助页面（更准确地说，和）之后尝试使用`Ctrl`+编写类似的东西，但我仍然不明白。`V``:help key-notation``:help i_CTRL-V``:help i_CTRL-V_digit`

我想要理解这一点的动机是我希望能够阅读我录制的宏的作用。如果我了解寄存器的内容是如何产生的，那么我可能能够通过产生类似的结果来理解它。例如，如果我记录的宏遵循与使用`Ctrl`+时相同的语法，`V`那么我可以检查`Ctrl`+`V`加上最可能产生的击键并查看哪个匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:07:23.063

我不认为宏是这项工作的正确工具，我认为你`$ vimtutor`现在真的应该遵循：`<Home>i%<Esc>`不是`%`在行首插入 a 的正确方法。

```
nnoremap <leader>% I%<Esc> 
```

似乎是一个更好，更正确的解决方案。

`<80>xx`是 Vim 内部用来表示特殊键的控制字符。有关`$ man termcap`可能值的列表，请参阅。

# javascript - touchmove 什么时候真正被解雇了？

> ID：11546240
> 
> 赞同：2
> 
> 时间：2012-07-18T16:39:07.180
> 
> 标签：javascript, javascript-events

我最初的假设是每次像素移动都会触发 touchmove，但在我的测试中，它会根据移动速度而变化。它的行为是否有明确的规范？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:53:06.673

该`touchmove`事件是[W3C 触摸事件规范](http://www.w3.org/TR/touch-events/#the-touchmove-event)的一部分，该规范说：

> 请注意，用户代理发送 touchmove 事件的速率是实现定义的，并且可能取决于硬件功能和其他实现细节。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T23:52:22.657

触摸事件按此顺序发生。

*   触摸启动
*   触摸移动
*   触摸端
*   然后延迟...
*   鼠标悬停
*   鼠标移动
*   鼠标按下
*   mouseup
*   点击
*   鼠标移出

来源：比尔费舍尔@hotstudios

他们还开发了一个名为 touchy 的插件，可让您控制触摸事件。 [https://github.com/HotStudio/touchy](https://github.com/HotStudio/touchy)

# css - Facebook 喜欢隐藏在其他页面元素后面的对话框

> ID：11546243
> 
> 赞同：4
> 
> 时间：2012-07-18T16:39:12.313
> 
> 标签：css, facebook, z-index, visibility

我无法让 facebook 弹出对话框位于我的导航栏和幻灯片顶部：http: [//d14599.u62.c14.ixinstant.com](http://d14599.u62.c14.ixinstant.com)

我已经搜索了几个小时，但所有解决方案似乎都不起作用。这是我检查过的列表： -overflow:hidden on other page elements 会导致问题。我调查了这个，但我的导航栏没有这个属性。-z- index 仅适用于定位元素。我确保我的元素是相对或绝对定位的。-我尝试使用类似的东西直接设计js创建的facebook元素

```
 .fb_iframe_widget{
   display:block !important;
   z-index:9999 !important;
  } 
```

我对 CSS 不是很好，但从来没有在一个问题上被困这么久。

我假设问题实际上是我在页面其他地方做错的事情，比如导航栏本身，但我看不到它是什么。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:24:50.070

它并没有真正解决问题，但我所做的是隐藏评论框。对于这种情况，这是可以接受的。在我添加的css文件中：

```
 .fb_edge_widget_with_comment span.fb_edge_comment_widget {
       display:none;
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-26T08:54:27.760

我搜索了很多东西并尝试了它，但没有解决方案对我有用。我在这里找到了一个解决[facebook 之类的对话框重叠问题](http://www.webblogsforyou.com/facebook-like-box-overlapping-and-positioning-issue/)的快速修复方法，它对我有用。

希望它可以节省其他人的时间，干杯！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-11T14:11:12.477

对我有用的是将包含 Facebook like 按钮的元素的 z-index 设置为高于评论框显示在后面的元素。

# c++ - 模板函数作为模板参数，标准是什么？

> ID：11546244
> 
> 赞同：1
> 
> 时间：2012-07-18T16:39:16.350
> 
> 标签：c++, visual-studio, g++

假设您有以下代码

```
template<typename T,void (T::*m)(int)>
    struct B{

    void f(T* a,int x){
        (a->*m)(x);
    }
};

struct A{

   template<typename X> void f(int){
  }

   void wrap(int i){
     f<char>(i);
   }

   B<A,&A::f<char> > y;
};

int main(){
   A a;
} 
```

这个定义

```
B<A,&A::f<char> > y; 
```

适用于 gcc，但不适用于 Visual Studio 2010：

```
error C2440: 'specialization' : cannot convert from 'overloaded-function' to 'void (__thiscall A::* )(int)' 
```

相反，

```
 B<A,&f<char> > y; 
```

适用于视觉工作室，但不适用于 gcc。

注意 `B<A,&A::f<char> > y;`放在main中，即

```
 int main(){
       B<A,&A::f<char> > y;
    } 
```

也适用于 VS。

不 `B<A,&f<char> > y;`标准吗？有没有办法（除了包装模板函数）让这两个编译器都能编译？

===编辑====

一个可能的，肮脏的解决方案是

```
#ifdef _WIN32
#define vsFix(a,b) b
#else
#define vsFix(a,b) a::b
#endif

 B<A,&vsFix(A,f)<char> > y; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:47:48.037

> 不`B<A,&f<char> > y;`标准吗？

No.`&f<char>`是指向函数的指针，而不是指向成员函数的指针。

> 有没有办法（除了包装模板函数）让这两个编译器都能编译？

是的，通过修复类型，并将指针传递给 A 类型的对象：

```
template<typename T,void (T::*m)(int)>
struct B{

    void f(T* a,int x){
        (a->*m)(x);
    }
};

struct A{

   template<typename X> void f(int){
  }

   void wrap(int i){
     y.f(this, i);
   }

   B< A, &A::f<int> > y;
};

int main(){
   A a;
   a.wrap(5);
} 
```

# django - Django Inline Admin Formset 额外条目有前缀而不是数字

> ID：11546245
> 
> 赞同：1
> 
> 时间：2012-07-18T16:39:16.803
> 
> 标签：django, forms

我有一个管理表单，允许最终用户添加测验，测验有答案。编辑测验时，测验答案部分有 4 行用于测验答案。前 3 个编号为 0、1、2，第四个编号为`__prefix__`。

例子：

```
<input name="quizanswer_set-0-text" value="one" class="vTextField" maxlength="255" type="text" id="id_quizanswer_set-0-text" />

<input id="id_quizanswer_set-__prefix__-text" type="text" class="vTextField" name="quizanswer_set-__prefix__-text" maxlength="255" /> 
```

处理表单时，它会跳过第四个输入，因为我假设前缀不是它要查找的。

模板代码：

```
{% for inline_admin_form in inline_admin_formset %}
{{ inline_admin_form.pk_field.field }} {{ inline_admin_form.fk_field.field }} 
```

形式：

```
class QuizAnswerInlineFormSet(forms.models.BaseInlineFormSet):
    def is_valid(self):
        # make sure errors are populated
        _ = self.errors

        return super(QuizAnswerInlineFormSet, self).is_valid()            

    def clean(self):
        super(QuizAnswerInlineFormSet, self).clean()

        answer_count = 0
        correct_count = 0

        for form in self.forms:
            if not hasattr(form, 'cleaned_data'):
                continue
            if not form.cleaned_data:
                continue
            if not form.is_valid():
                continue
            if form.cleaned_data[forms.formsets.DELETION_FIELD_NAME]:
                continue

            answer_count += 1

            if form.cleaned_data.get("is_correct", False):
                correct_count += 1

        if answer_count < 2:
            raise ValidationError("Questions must have at least 2 answers")

        if correct_count != 1:
            raise ValidationError("There must be exactly one correct answer") 
```

有谁知道为什么这是打印`__PREFIX__`而不是数字？我需要为此设置什么吗？我最初并没有制作表格，我只是想修复它，我对这种表格并不太熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:43:03.167

我遇到过同样的问题。事实证明，不应显示该行。在添加新行并替换前缀时，它被 javascript 用作模板。

我发现我没有正确拾取，`forms.css`所以它找不到`empty-form`具有`display: none`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-28T04:54:53.007

在我看来，**PREFIX**用于增加行的索引。当我们添加新行时。

```
<div class="empty-form"></div>
```

被克隆并且前缀由管理面板中的 jQuery 更改。

```
C:\Users\{USERNAME}\AppData\Local\Programs\Python\Python310\Lib\site-packages\django\contrib\admin\static\admin\js\inlines.js 
```

查看此文件。这用于动态内联表格。

# php - 给定一系列不同持续时间的对象，如何在给定时间范围内找到所有可能的安排

> ID：11546252
> 
> 赞同：0
> 
> 时间：2012-07-18T16:39:38.957
> 
> 标签：php, neural-network, playlist

因此，如果您有一组对象，每个对象都有不同的持续时间值，例如歌曲 - 并且您想创建一堆都适合特定时间范围的播放列表，那么最简单的方法是什么？

例子：

*   歌曲 1 : 1:30
*   歌曲 2 : 2:56
*   歌曲 3 : 3:56
*   歌曲 4 : 4:54
*   歌曲 5 : 1:00

最长持续时间：5:00

可能的组合：（歌曲 1，歌曲 2），（歌曲 2，歌曲 1），（歌曲 2，歌曲 5），（歌曲 5，歌曲 2），（歌曲 3，歌曲 5），（歌曲 5，歌曲 3） ，（歌曲 4）。

我对神经网络很好奇，但对它们了解不多，或者它们是否可以轻松应用于这个问题。目标语言是php。

如果可以提供像 +/- 0:30 这样的允许差异，那么生成的播放列表可以低于或高于最大限制给定数量，这将是理想的。

任何帮助将不胜感激，只是想弄清楚如何开始解决这个问题，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:31:35.120

这是一个装箱问题。您可以对列表进行排序，然后您可以尝试用最佳匹配、下一个匹配、第一个匹配或最差匹配填充时间范围。想象一下，您有多个时间范围，并且您需要找到给定播放列表的最少时间范围。

# r - 双向密度图与 r 中选定区域的单向密度图相结合

> ID：11546256
> 
> 赞同：29
> 
> 时间：2012-07-18T16:39:50.517
> 
> 标签：r, graph, ggplot2, kernel-density

```
# data 
set.seed (123)
xvar <- c(rnorm (1000, 50, 30), rnorm (1000, 40, 10), rnorm (1000, 70, 10))
yvar <-   xvar + rnorm (length (xvar), 0, 20)
myd <- data.frame (xvar, yvar)

# density plot for xvar
            upperp = 80   # upper cutoff
            lowerp = 30   # lower cutoff
            x <- myd$xvar
            plot(density(x))
            dens <- density(x)
            x11 <- min(which(dens$x <= lowerp))
            x12 <- max(which(dens$x <= lowerp))
            x21 <- min(which(dens$x > upperp))
            x22 <- max(which(dens$x > upperp))
            with(dens, polygon(x = c(x[c(x11, x11:x12, x12)]),
                y = c(0, y[x11:x12], 0), col = "green"))
             with(dens, polygon(x = c(x[c(x21, x21:x22, x22)]),
                y = c(0, y[x21:x22], 0), col = "red"))
            abline(v = c(mean(x)), lwd = 2, lty = 2, col = "red")
# density plot with yvar
    upperp = 70  # upper cutoff
    lowerp = 30   # lower cutoff
    x <- myd$yvar
    plot(density(x))
    dens <- density(x)
    x11 <- min(which(dens$x <= lowerp))
    x12 <- max(which(dens$x <= lowerp))
    x21 <- min(which(dens$x > upperp))
    x22 <- max(which(dens$x > upperp))
    with(dens, polygon(x = c(x[c(x11, x11:x12, x12)]),
        y = c(0, y[x11:x12], 0), col = "green"))
     with(dens, polygon(x = c(x[c(x21, x21:x22, x22)]),
        y = c(0, y[x21:x22], 0), col = "red"))
    abline(v = c(mean(x)), lwd = 2, lty = 2, col = "red") 
```

我需要绘制两种密度图，我不确定是否有比以下更好的方法：

```
ggplot(myd,aes(x=xvar,y=yvar))+
    stat_density2d(aes(fill=..level..), geom="polygon") +
    scale_fill_gradient(low="blue", high="green") + theme_bw() 
```

我想将所有三种类型合二为一（我不知道是否可以在 ggplot 中创建双向图），对于解决方案是在 ggplot 中还是在基础中还是在混合中并没有偏好。考虑到 R 的稳健性，我希望这是一个可行的项目。我个人更喜欢 ggplot2。

![在此处输入图像描述](../Images/99b3662dafd2a0be6fae6c703a8d9c0f.png)

注意：此图中的下阴影不正确，xvar 和 yvar 图中的红色应始终在下方，绿色应始终在上方，对应于 xy 密度图中的阴影区域。

**编辑：**对图表的最终期望（感谢 seth 和 jon 的非常接近的答案）（1）删除空间和轴刻度标签等以使其紧凑
（2）网格对齐，以便中间绘图刻度和网格应与侧刻度对齐和地块的标签和大小看起来相同。 ![在此处输入图像描述](../Images/68003860d81df37edab35a820cb73cf1.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-21T07:48:49.873

这是将多个图与对齐组合的示例：

```
library(ggplot2)
library(grid)

set.seed (123)
xvar <- c(rnorm (100, 50, 30), rnorm (100, 40, 10), rnorm (100, 70, 10))
yvar <-   xvar + rnorm (length (xvar), 0, 20)
myd <- data.frame (xvar, yvar)

p1 <- ggplot(myd,aes(x=xvar,y=yvar))+
  stat_density2d(aes(fill=..level..), geom="polygon") +
  coord_cartesian(c(0, 150), c(0, 150)) +
  opts(legend.position = "none")

p2 <- ggplot(myd, aes(x = xvar)) + stat_density() +
  coord_cartesian(c(0, 150))
p3 <- ggplot(myd, aes(x = yvar)) + stat_density() + 
  coord_flip(c(0, 150))

gt <- ggplot_gtable(ggplot_build(p1))
gt2 <- ggplot_gtable(ggplot_build(p2))
gt3 <- ggplot_gtable(ggplot_build(p3))

gt1 <- ggplot2:::gtable_add_cols(gt, unit(0.3, "null"), pos = -1)
gt1 <- ggplot2:::gtable_add_rows(gt1, unit(0.3, "null"), pos = 0)

gt1 <- ggplot2:::gtable_add_grob(gt1, gt2$grobs[[which(gt2$layout$name == "panel")]],
                                  1, 4, 1, 4)
gt1 <- ggplot2:::gtable_add_grob(gt1, gt2$grobs[[which(gt2$layout$name == "axis-l")]],
                                 1, 3, 1, 3, clip = "off")

gt1 <- ggplot2:::gtable_add_grob(gt1, gt3$grobs[[which(gt3$layout$name == "panel")]],
                                 4, 6, 4, 6)
gt1 <- ggplot2:::gtable_add_grob(gt1, gt3$grobs[[which(gt3$layout$name == "axis-b")]],
                                 5, 6, 5, 6, clip = "off")
grid.newpage()
grid.draw(gt1) 
```

![在此处输入图像描述](../Images/6382df54b0a1cf47787783ea89f73cfe.png)

请注意，这适用于 gglot2 0.9.1，在未来的版本中，您可能会更轻松地做到这一点。

*最后*

你可以这样做：

```
library(ggplot2)
library(grid)

set.seed (123)
xvar <- c(rnorm (100, 50, 30), rnorm (100, 40, 10), rnorm (100, 70, 10))
yvar <-   xvar + rnorm (length (xvar), 0, 20)
myd <- data.frame (xvar, yvar)

p1 <- ggplot(myd,aes(x=xvar,y=yvar))+
  stat_density2d(aes(fill=..level..), geom="polygon") +
  geom_polygon(aes(x, y), 
               data.frame(x = c(-Inf, -Inf, 30, 30), y = c(-Inf, 30, 30, -Inf)),
               alpha = 0.5, colour = NA, fill = "red") +
  geom_polygon(aes(x, y), 
               data.frame(x = c(Inf, Inf, 80, 80), y = c(Inf, 80, 80, Inf)),
               alpha = 0.5, colour = NA, fill = "green") +
  coord_cartesian(c(0, 120), c(0, 120)) +
  opts(legend.position = "none")

xd <- data.frame(density(myd$xvar)[c("x", "y")])
p2 <- ggplot(xd, aes(x, y)) + 
  geom_area(data = subset(xd, x < 30), fill = "red") +
  geom_area(data = subset(xd, x > 80), fill = "green") +
  geom_line() +
  coord_cartesian(c(0, 120))

yd <- data.frame(density(myd$yvar)[c("x", "y")])
p3 <- ggplot(yd, aes(x, y)) + 
  geom_area(data = subset(yd, x < 30), fill = "red") +
  geom_area(data = subset(yd, x > 80), fill = "green") +
  geom_line() +
  coord_flip(c(0, 120))

gt <- ggplot_gtable(ggplot_build(p1))
gt2 <- ggplot_gtable(ggplot_build(p2))
gt3 <- ggplot_gtable(ggplot_build(p3))

gt1 <- ggplot2:::gtable_add_cols(gt, unit(0.3, "null"), pos = -1)
gt1 <- ggplot2:::gtable_add_rows(gt1, unit(0.3, "null"), pos = 0)

gt1 <- ggplot2:::gtable_add_grob(gt1, gt2$grobs[[which(gt2$layout$name == "panel")]],
                                  1, 4, 1, 4)
gt1 <- ggplot2:::gtable_add_grob(gt1, gt2$grobs[[which(gt2$layout$name == "axis-l")]],
                                 1, 3, 1, 3, clip = "off")

gt1 <- ggplot2:::gtable_add_grob(gt1, gt3$grobs[[which(gt3$layout$name == "panel")]],
                                 4, 6, 4, 6)
gt1 <- ggplot2:::gtable_add_grob(gt1, gt3$grobs[[which(gt3$layout$name == "axis-b")]],
                                 5, 6, 5, 6, clip = "off")
grid.newpage()
grid.draw(gt1) 
```

![在此处输入图像描述](../Images/cb5d346d3cad26e2ee8aecdd2aa33b98.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-18T19:46:53.097

正如我上面链接的示例一样，您需要 gridExtra 包。这是你给的g。

> ```
> g=ggplot(myd,aes(x=xvar,y=yvar))+
>     stat_density2d(aes(fill=..level..), geom="polygon") +
>     scale_fill_gradient(low="blue", high="green") + theme_bw() 
> ```

使用 geom_rect 绘制两个区域

```
gbig=g+geom_rect(data=myd,
        aes(  NULL,
            NULL,
            xmin=0,
            xmax=lowerp,
            ymin=-10,
            ymax=20),
        fill='red',
        alpha=.0051,
        inherit.aes=F)+
  geom_rect(aes(    NULL,
            NULL,
            xmin=upperp,
            xmax=100,
            ymin=upperp,
            ymax=130),
            fill='green',
            alpha=.0051,
            inherit.aes=F)+
  opts(legend.position = "none") 
```

这是一个简单的 ggplot 直方图；它缺少你的彩色区域，但它们很容易

> ```
>  dens_top <- ggplot()+geom_density(aes(x))
>   dens_right <- ggplot()+geom_density(aes(x))+coord_flip() 
> ```

制作一个空图来填充角落

```
 empty <- ggplot()+geom_point(aes(1,1), colour="white")+
              opts(axis.ticks=theme_blank(), 
                   panel.background=theme_blank(), 
                   axis.text.x=theme_blank(), 
                   axis.text.y=theme_blank(),           
                   axis.title.x=theme_blank(), 
                   axis.title.y=theme_blank()) 
```

然后使用 grid.arrange 函数：

> ```
> library(gridExtra)
> 
> grid.arrange(dens_top,     empty     , 
>              gbig,         dens_right, 
>                  ncol=2, 
>                  nrow=2, 
>                  widths=c(4, 1), 
>                  heights=c(1, 4)) 
> ```

![在此处输入图像描述](../Images/c4b692357f204d9689c1d7ac7d64c9c2.png)

不是很漂亮，但想法就在那里。您还必须确保秤也匹配！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-19T02:08:31.477

基于赛斯的回答（谢谢赛斯，你值得所有的功劳），我改进了提问者提出的一些问题。由于评论太短而无法回答所有问题，我选择将其用作答案本身。 **仍然存在一些问题，需要您的帮助**：

```
# data
set.seed (123)
xvar <- c(rnorm (1000, 50, 30), rnorm (1000, 40, 10), rnorm (1000, 70, 10))
yvar <-   xvar + rnorm (length (xvar), 0, 20)
myd <- data.frame (xvar, yvar)

require(ggplot2)

# density plot for xvar
upperp = 80   # upper cutoff
lowerp = 30 
```

中间图

```
 g=ggplot(myd,aes(x=xvar,y=yvar))+
    stat_density2d(aes(fill=..level..), geom="polygon") +
    scale_fill_gradient(low="blue", high="green") + 
  scale_x_continuous(limits = c(0, 110)) + 
   scale_y_continuous(limits = c(0, 110)) + theme_bw() 
```

geom_rect 两个区域

```
gbig=g+ geom_rect(data=myd, aes(  NULL,  NULL, xmin=0,  
xmax=lowerp,ymin=0, ymax=20), fill='red', alpha=.0051,inherit.aes=F)+ 
geom_rect(aes(NULL,  NULL,   xmin=upperp,            xmax=110, 
 ymin=upperp,            ymax=110),            fill='green',            
  alpha=.0051,
            inherit.aes=F)+   
  opts(legend.position = "none", 
  plot.margin = unit(rep(0, 4), "lines")) 
```

带阴影区域的顶部直方图

```
 x.dens <- density(myd$xvar)
    df.dens <- data.frame(x = x.dens$x, y = x.dens$y)

   dens_top <- ggplot()+geom_density(aes(myd$xvar, y = ..density..))
+ scale_x_continuous(limits = c(0, 110)) +
geom_area(data = subset(df.dens, x <= lowerp), aes(x=x,y=y), fill = 'red') 
 +  geom_area(data = subset(df.dens, x >= upperp), aes(x=x,y=y), fill = 'green') 
 +    opts (axis.text.x=theme_blank(), axis.title.x=theme_blank(), 
  plot.margin = unit(rep(0, 4), "lines")) + xlab ("") + ylab ("") +  theme_bw() 
```

带阴影区域的右直方图

```
 y.dens <- density(myd$yvar)
    df.dens.y <- data.frame(x = y.dens$x, y = y.dens$y)

    dens_right <- ggplot()+geom_density(aes(myd$yvar, y = ..density..))
   + scale_x_continuous(limits = c(0, 110)) +
  geom_area(data = subset(df.dens.y, x <= lowerp), aes(x=x,y=y), 
  fill = 'red') 
  +  geom_area(data = subset(df.dens.y, x >= upperp), aes(x=x,y=y), 
  fill = 'green')
    +      coord_flip() + 

opts (axis.text.x=theme_blank(), axis.title.x=theme_blank(), 
   plot.margin = unit(rep(0, 4), "lines")) + xlab ("") + ylab ("") 
   +  theme_bw() 
```

制作一个空图来填充角落

```
 empty <- ggplot()+geom_point(aes(1,1), colour="white")+ 
       scale_x_continuous(breaks = NA) + scale_y_continuous(breaks = NA) +
              opts(axis.ticks=theme_blank(),
                   panel.background=theme_blank(),
                   axis.text.x=theme_blank(),
                   axis.text.y=theme_blank(),
                   axis.title.x=theme_blank(),
                   axis.title.y=theme_blank()) 
```

然后使用 grid.arrange 函数：

```
library(gridExtra)
 grid.arrange(dens_top, empty , gbig, dens_right, ncol=2,nrow=2,
 widths=c(2, 1), heights=c(1, 2)) 
```

![在此处输入图像描述](../Images/e49622558061c248480292effbeefce1.png)

***PS：（1）有人可以帮助完美对齐图表吗？(2) 有人可以帮助删除图之间的额外空间，我尝试调整边距 - 但 x 和 y 密度图和中心图之间有空间。***

# objective-c - 在 iOS 中存储“全局”对象的位置

> ID：11546257
> 
> 赞同：7
> 
> 时间：2012-07-18T16:39:53.357
> 
> 标签：objective-c, ios

> **可能重复：**
> [我应该如何或在哪里存储我的 iOS 应用程序中全局需要的对象实例？](https://stackoverflow.com/questions/5721990/how-or-where-should-i-store-object-instances-that-i-require-globally-within-my-i)

我有一些全局对象（几乎在所有应用程序屏幕中都使用），它们大多是在应用程序启动后立即创建的。我想从我所有的 ViewControllers 访问这些对象（没有别的，只有 ViewControllers）。在哪里存放？

我考虑过`@property`，`AppDelegate`但我认为（但我可能是错的）这是一个丑陋的解决方案。

对象可以相当复杂，这不是简单的类型。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T16:43:20.460

您可以通过将全局对象放置在具有用于访问全局对象的类方法的类中，实现`+(void)load`以准备这些对象并将它们存储在静态变量中来使全局对象可访问。

标题：

```
@interface GlobalObjects
+(void)load;
+(MyObject1*)myObject1;
@end 
```

执行：

```
#import "GlobalObjects.h"
static MyObject1* _myObject1 = nil;
@implementation GlobalObjects
+(void)load {
    _myObject1 = [[MyObject1 alloc] init];
}
+(MyObject1*)myObject1 {
    return myObject1;
}
@end 
```

用法：

```
MyObject1 *shared = [GlobalObjects myObject1]; 
```

您还可以在其方法中将变量设为静态以进行延迟初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T16:41:43.933

是的，我使用 App Delegate 的属性，然后通过强制转换 sharedApplication 委托属性来访问它们。

```
__weak AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

希望这可以帮助，

乔纳森

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:42:16.677

AppDelegate 中的@property 是一个很好的解决方案。你也可以使用单例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T16:42:59.673

如果您只有一堆对象，您的应用程序委托就可以了。

否则，您可能会构建一种包含所有全局数据的“模型对象”。

或者，如果它们有任何结构，您可以将它们与 Core Data 一起存储。

但是，正如我所说，如果您只有几个对象，那么应用程序委托就可以了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T16:50:38.883

如果它仅在视图控制器中使用，您可以考虑将其存储在实际需要访问共享对象的最高级别视图控制器中（在创建/推送新控制器时，设置该引用计数属性）。

这样，您可能会想到主视图控制器使用其内容/模型填充详细视图控制器。

这真的远离了作为一个全球性的资格（和负担）。

# asp.net-mvc-2 - 淘汰赛和 MVC2：将模型发送到控制器

> ID：11546258
> 
> 赞同：1
> 
> 时间：2012-07-18T16:39:56.897
> 
> 标签：asp.net-mvc-2, knockout.js

我在将 json 从淘汰赛发送到 mvc2 控制器操作时遇到问题。这是我的观点：

```
var ViewModel = {
            FirstName: ko.observable("FirstName"),
            LastName: ko.observable("LastName"),
            Save: function () {
                ko.utils.postJson(location.href, this);
            }
}
ko.applyBindings(ViewModel); 
```

我在控制器中有一个动作：

```
public virtual ActionResult SomeAction(MyModel model) {
        //do smth
        return View(registrationModel);
}
public class MyModel {
   public string FirstName {get;set;}
   public string LastName {get;set;}
} 
```

问题是我得到了引用的字符串值，比如“\”FirstName\“”，我知道有一些方法可以避免这种情况（在 MVC3 中使用 JSON.stringify）。我尝试了以下方法：

```
ko.utils.postJson(location.href, JSON.stringify({model: this}); 
```

还

```
var json = JSON.stringify({
FirstName: this.FirstName(),
LastName: this.LastName()
});
ko.utils.postJson(location.href, JSON.stringify({model: json}); 
```

或者

```
ko.utils.postJson(location.href, json); 
```

在所有这 3 个选项中，我得到 model = null，或者 Controller 中的所有值都为 null。

也许有人以前做过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:47:15.787

我发现为了使 MVC 对象映射工作，您需要将 POST 的内容类型设置为“application/json; charset=utf-8”。我以前从未使用 ko.utils.postJson() 完成此操作，但这是一个使用 jQuery 的工作示例：

```
 $.ajax({
        url: url,
        type: "POST",
        data: ko.toJSON(ViewModel),
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function (response) {
        },
        error: function (response, errorText) {
        }
    }); 
```

注意我`ko.toJSON`用来将模型序列化为 JSON。

# .htaccess - 想要使用 .htaccess 从我的网址中替换 .index.php?backLinks_free_Backlinks=1&totalRows_free_Backlinks=7 部分 /backLinks_free_Backlinks/1

> ID：11546259
> 
> 赞同：1
> 
> 时间：2012-07-18T16:39:59.283
> 
> 标签：.htaccess

我有一个看起来像这样的链接 [http://backlinks.cheapratedomain.com/index.php?backLinks_free_Backlinks=1&totalRows_free_Backlinks=7](http://backlinks.cheapratedomain.com/index.php?backLinks_free_Backlinks=1&totalRows_free_Backlinks=7)

想要使用 .htaccess 将 .index.php?backLinks_free_Backlinks=1&totalRows_free_Backlinks=7 这部分替换为 /backLinks_free_Backlinks/1

替换链接后将如下所示

[http://backlinks.cheapratedomain.com/backLinks_free_Backlinks/1](http://backlinks.cheapratedomain.com/backLinks_free_Backlinks/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:43:35.843

尝试将此添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteRule ^backLinks_free_Backlinks/([0-9]+)$ /index.php?backLinks_free_Backlinks=$1&totalRows_free_Backlinks=7 [L,QSA] 
```

`&totalRows_free_Backlinks=7`如果不需要，可以从目标中移除该位。

# c++ - 本机 Win32 应用程序的可视化设计器

> ID：11546265
> 
> 赞同：8
> 
> 时间：2012-07-18T16:40:17.927
> 
> 标签：c++, visualdesigner

我已经做了很长时间的 C# 开发人员，所以我对 Winforms 有丰富的经验。我想开始 VC++ 开发，以便我可以编写本机应用程序。

我非常了解 C++。问题是我在 VS2010、Win32 应用程序、MFC 应用程序等中制作了测试项目，它没有像 VC# Winforms 和 VC++ Winforms 那样提供可视化设计器。我想要一个像 Win32 应用程序一样的原生应用程序开发的可视化设计器。

*   可能吗？
*   怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T16:41:52.560

MFC 有一个对话框设计器。如果您正确设置项目，则可以使用设计器来布局 MFC 窗口。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/2711197/65358)。

对于其他库，还有其他选项。例如，[Qt Creator](http://qt.nokia.com/products/developer-tools/)允许您通过 Qt Designer 直观地设计 Qt 窗口。

# c# - 我可以在一张表中管理员工相关数据吗？

> ID：11546266
> 
> 赞同：0
> 
> 时间：2012-07-18T16:40:26.180
> 
> 标签：c#, asp.net, sql, vb.net, database-design

我见过人们使用“DataListValue”表来存储那些在 UI 的下拉列表中经常使用的值（Call_Types、DepartmentCodes、Divisions 等）。

这样我就可以在一个表格中管理它们，并且将有一个屏幕来更新代码。

我想知道是否可以将 DepartmentCode、RoleCode、CountryCode 保留在 Data_List 表中？或者我应该把它们放在单独的桌子上？

![在此处输入图像描述](../Images/67e58eca7b27aca720be3408d71eedd3.png)

![在此处输入图像描述](../Images/337d56c3361c4d707fccbe567163fc12.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:54:31.033

通常的做法是使用单个代码表来存储带有某种表类型列的代码/描述对。例如，您通常会看到这样的表格：

**代码表**

*   表 ID
*   代码
*   描述

然而，我从来不认为这是一个好主意。即使您存储的只是代码和描述，最好为每组代码创建一个新表。这样你的外键关系就会更加清晰。另外，不可避免地，有一天您需要存储一些关于其中一个代码集的额外数据，并且您最终需要添加仅适用于存储在表和列中的代码集之一的额外列对于所有其他行将为空。它总是很快变丑。

例如，假设在上面的示例中，您将`TableId`所有国家代码设置为“C”，并将所有部门代码设置为“D”。但是下个月出现了一个新要求，要求您为每个国家/地区代码存储一个邮政缩写。您是否将 PostalAbbreviation 列添加到表中，即使它永远不会应用于部门代码？或者您是否创建另一个表来存储每个国家/地区代码的附加数据？除非您有其他地方可以查找它们，否则您怎么知道“C”和“D”的含义？到处都是一个坏主意。

# wcf - 将 Castle Windsor WCF 工具与 WCF 4 REST 服务一起使用会出现“找不到组件”错误

> ID：11546268
> 
> 赞同：1
> 
> 时间：2012-07-18T16:40:28.090
> 
> 标签：wcf, rest, castle-windsor, castle

作为 StackOverflow 的长期读者，但在这里没有找到解决我的问题的方法是我第一次尝试提出问题，所以不要对我太苛刻 :-)

我有以下 WCF 4 REST 服务定义：

服务合同

```
namespace RestService2.Service
{
    [ServiceContract]
    public interface ISampleService
    {
       [WebGet(UriTemplate = "")]
       List<SampleItem> GetCollection();

       [WebInvoke(UriTemplate = "", Method = "POST")]
       SampleItem Create(SampleItem instance);

       [WebGet(UriTemplate = "?id={id}")]
       SampleItem Get(int id);

       [WebInvoke(UriTemplate = "?id={id}", Method = "PUT")]
       SampleItem Update(int id, SampleItem instance);

       [WebInvoke(UriTemplate = "?id={id}", Method = "DELETE")]
       void Delete(int id);
    }
} 
```

服务实施

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public class SampleService : ISampleService
{
    private IDatabase db;
    public SampleService(IDatabase db)
    {
        this.db = db;
    }

    public SampleService()
    {
    }
    public List<SampleItem> GetCollection()
    {
        return db.Items.Values.ToList();
    }

    public SampleItem Create(SampleItem instance)
    {
        // Add the new instance of SampleItem to the collection
        db.Items.Add(instance.Id, instance);
        return db.Items[instance.Id];
    }

    //..Rest omitted..
} 
```

数据库接口：

```
using RestService2.Entities;

namespace RestService2.Service
{
   public interface IDatabase
   {
      Dictionary<int, SampleItem> Items { get; }

   }
} 
```

数据库实现：

```
public class Database : IDatabase
{
    private Dictionary<int, SampleItem> items;

    public Database()
    {
    }

    public Dictionary<int, SampleItem> Items
    {
        get
        {
            return items;
        }
    }
} 
```

..和 global.asax 文件

```
namespace RestService2.Web
{
    public class Global : HttpApplication
    {
        static IWindsorContainer Container {get; set;}

        void Application_Start(object sender, EventArgs e)
        {
           BuildContainer();
           RegisterRoutes();
        }

        private void BuildContainer()
        {
           Container = new WindsorContainer();
           Container.AddFacility<WcfFacility>()
            .Register(Component.For<ISampleService>().ImplementedBy<SampleService>().Named("SampleService"))
            .Register(Component.For<IDatabase>().ImplementedBy<Database>());

        }
        private void RegisterRoutes()
        {
            RouteTable.Routes.Add(new ServiceRoute("SampleService",
            new DefaultServiceHostFactory(), typeof(SampleService)));
        }
    }
} 
```

服务契约、服务实现、数据库接口和数据库实现在程序集 A 中，SampleItem（一个实体）在程序集 B 中定义，global.asax.cs 在程序集 C 中。

我已将程序集 A 和 B 的引用添加到程序集 C。

当我尝试访问服务帮助页面（或与此相关的任何服务方法）时，我收到以下错误消息：`Could not find a component with type RestService2.Service.SampleService, RestService2.Service, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null, did you forget to register it?`

知道可能是什么问题吗？我应该如何正确配置容器？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:49:41.527

我能够使用 WCFIntegration 工具构建 REST 服务，同时使用注册接口和 MVC 路由机制。

```
// SVC Routes
routes.Add(new ServiceRoute("Example", new WindsorServiceHostFactory<RestServiceModel>(), typeof(IExample))); 
```

请记住在调用之前在 Windsor 中注册服务/实现`RegisterRoutes`（此代码所在的位置）。此外，请确保在默认路由之前调用此路由注册，否则将使用它。

然后可以通过路由调用该服务，即：

```
http://localhost:80/Core/Example/GetAll/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T07:29:46.317

因为您通过具体类型注册了路由

```
RouteTable.Routes.Add(new ServiceRoute("SampleService", 
            new DefaultServiceHostFactory(), typeof(SampleService))); 
```

据我记得你不能这样做......我的意思是你不能通过接口注册，你也需要通过混凝土注册到容器中

代替

```
 .Register(Component.For<ISampleService>().ImplementedBy<SampleService>().Named("SampleService")) 
```

尝试

```
 .Register(Component.For<SampleService>().Named("SampleService")) 
```

# grails - Grails GORM 自动更新问题

> ID：11546269
> 
> 赞同：1
> 
> 时间：2012-07-18T16:40:29.657
> 
> 标签：grails, grails-orm

**更新帖子：**

如果我这样做，在控制器中：

```
 def obj = new Test(name:"lol")
     obj.save(flush:true)
     obj.name = "lol2"

     //a singleton service with nothing to do with obj
     testService.dostuff() 
     /*
       "obj" gets persisted to the database right here
       even before the next println
     */
     println "done" 
```

谁能解释一下为什么 Grails 1.3.7 会发生这种情况而不是 Grails 2？是什么原因？

我知道我可以使用 discard() 并基本上重组代码，但我对幕后发生的事情和原因感兴趣。谢谢！

**旧帖：**

我有一个测试 Grails 应用程序。我有一个域类 test.Test：

```
package test

class Test {
   String name
   static constraints = {}
} 
```

我还有一个服务test.TestService：

```
package test

class TestService {

    static scope = "singleton"
    static transactional = true

    def dostuff() {
        println "test service was called"
    }
} 
```

还有一个控制器test.TestController：

```
package test

class TestController {

  def testService      

  def index = {
     def obj = new Test(name:"lol")
     obj.save(flush:true)
     obj.name = "lol2"
     testService.dostuff()
     println "done"
  }
} 
```

所以我做什么：

*   创建域对象
*   更改其属性之一
*   调用单例服务方法

我的期望：

*   除非我调用 obj.save()

相反会发生什么：

*   在服务调用之后，Grails 将对数据库进行更新查询。

我从这个网址尝试了以下配置：http: [//grails.1312388.n4.nabble.com/Turn-off-autosave-in-gorm-td1378113.html](http://grails.1312388.n4.nabble.com/Turn-off-autosave-in-gorm-td1378113.html)

```
hibernate.flush.mode="manual" 
```

但这没有帮助。

我用 Grails 1.3.7 测试过，Grails 2.0.3 没有这个问题。

谁能给我更多关于到底发生了什么的信息？似乎由于服务调用而必须终止当前会话，并且因为对象是脏的，所以在服务调用之后它会自动持久化到数据库中。我不明白的是，即使在 Hibernate 中使用手动刷新模式配置也无济于事。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:45:08.297

我不确定您链接到的那个线程如何让您认为它会起作用。他们都说这行不通，创建的票已关闭，无法修复。这里的解决方案是使用discard() 作为线程所述。

# css - CSS：扩展图像

> ID：11546278
> 
> 赞同：0
> 
> 时间：2012-07-18T16:41:17.677
> 
> 标签：css

我有一个看起来像这样的图像：![我的形象](../Images/8086e83266d6a7326314169c255c0a46.png)

是否可以扩展此图像（可能在 div 内），使其看起来像这样： ![在此处输入图像描述](../Images/7860e4c1c2821be39696f1fa63a0921a.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:44:39.927

获取宽度为：1px 的箭头左上角灰色部分的垂直切片。获取一个 px 切片图像并在 -x 上重复它。

这是你可以[练习的东西](http://www.w3schools.com/css/tryit.asp?filename=trycss_background-image_gradient2)

由于您的图像没有渐变，因此您更有可能仅使用背景颜色来匹配所需的颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:45:15.103

您可以将其设置为 div 的背景

```
#elem {
display:block;
width:200px;
height:20x;
background: url(/filepath/to/image.gif) right top no-repeat #ccc;
} 
```

只需确保背景颜色与 gif 上的深灰色相同即可

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:48:36.370

您可以使用 CSS 属性创建一个相同颜色的 div `background-color`（我相信十六进制应该是 ~ `#999`）。然后，使用该属性将图像定位为`background-image`div 中的a。`background-position: right`

**HTML**

```
<div class="arrow">Home</div>​ 
```

**CSS**

```
#arrow {
    background-color: #999;
    background-image: url('http://i.stack.imgur.com/QDCz4.png');
    background-position: right;
    background-repeat: no-repeat;

    /* sets div dimensions/text styles */
    height: 24px;
    color: white;
    text-align: center;
    line-height: 24px;
    float: left;

    padding-left: 20px;
    padding-right: 30px; /* slightly longer to account for background image /*
} 
```

JS 小提琴：http: [//jsfiddle.net/fbBsz/14/](http://jsfiddle.net/fbBsz/14/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T16:44:44.720

不，这在 CSS 中是不可能的。您必须设置包含元素的宽度，设置背景图像的 url 并将 x 位置设置为右并将重复设置为不重复。然后将背景颜色设置为与按钮的前景色相同。如果按钮前景是图案，则必须使用另一个图像作为背景。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T16:45:49.393

不，至少不是那个图像:-)

看起来你可以使用“滑动门”技术——有关它的好文章，请参见[http://www.alistapart.com/articles/slidingdoors/](http://www.alistapart.com/articles/slidingdoors/)

# neo4j - 在 neo4j 中注册事务事件处理程序

> ID：11546282
> 
> 赞同：1
> 
> 时间：2012-07-18T16:41:34.437
> 
> 标签：neo4j, spring-data-neo4j, spring-data-graph

我目前正在将 Spring Data 与 Neo4j 一起使用，并将其子类化`SpringRestGraphDatabase`以允许注册特定的事务事件处理程序。

我调用`registerTransactionEventHandler`方法来这样做。不幸的是，我总是遇到以下异常：

```
Caused by: java.lang.UnsupportedOperationException: null
    at org.neo4j.rest.graphdb.AbstractRemoteDatabase.registerTransactionEventHandler(AbstractRemoteDatabase.java:52) ~[neo4j-rest-graphdb-1.6.jar:1.6]
    at org.neo4j.rest.graphdb.RestGraphDatabase.registerTransactionEventHandler(RestGraphDatabase.java:28) ~[neo4j-rest-graphdb-1.6.jar:1.6] 
```

通过仔细查看 AbstractRemote 我发现它总是抛出异常：

```
public <T> TransactionEventHandler<T> registerTransactionEventHandler( TransactionEventHandler<T> tTransactionEventHandler ) {
    throw new UnsupportedOperationException();
} 
```

`RestGraphDatabase`不提供 register 方法的实现，因此存在异常。我不确定使用什么替代品，尤其是在我扩展`SpringRestGraphDatabase`.

有没有更清洁的替代品？

（我使用的是 v2.1.0.M1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:58:46.490

是的，这些处理程序的暴露在网络上的成本很高。根据您想要做什么，我建议编写一个自定义插件来公开您的操作并通过 REST 端点注册您需要的内容，请参阅[http://docs.neo4j.org/chunked/snapshot/server-plugins.html](http://docs.neo4j.org/chunked/snapshot/server-plugins.html)

# linux - 谷歌应用引擎插件安装后 Eclipse(Indigo) 启动失败

> ID：11546283
> 
> 赞同：4
> 
> 时间：2012-07-18T16:41:36.007
> 
> 标签：linux, eclipse, eclipse-plugin, crash

安装 google app engine 插件后，eclipse 启动失败。以下是我得到的错误声明

> 平台关闭后发现作业仍在运行。作业应由在关机期间安排它们的插件取消：org.eclipse.ui.internal.ide.IDEWorkbenchActivityHelper$4

我在 Linux（Fedora 16）上使用 eclipse。

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T17:54:22.663

问题解决了。

问题在于

> org.eclipse.mylyn.tasks.ui_3.6.2.v20110826-0100.jar

删除它，日食正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T12:14:58.467

在 Mac 上，罐子位于例如这里（我正在运行靛蓝和朱诺）

```
/Applications/eclipse/plugins/org.eclipse.mylyn.tasks.ui_3.8.1.v20120725-0100.jar
/Applications/eclipse/plugins/org.eclipse.mylyn.tasks.ui_3.8.2.v20120916-1200.jar
/Applications/eclipse_indigo/plugins /org.eclipse.mylyn.tasks.ui_3.6.5.v20120215-0100.jar
/Applications/eclipse_indigo/plugins/org.eclipse.mylyn.tasks.ui_3.8.2.v20120916-1200.jar 
```

我最终关注了 建议删除文件的[http://expertdevelopers.blogspot.com/2011/07/eclipse-troubleshooting.html 。](http://expertdevelopers.blogspot.com/2011/07/eclipse-troubleshooting.html)而且由于我不明白我最终删除了哪些文件： rm //.metadata/.plugins/org.eclipse.core.resources/.root/.indexes/*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T02:09:42.673

位置是/opt/eclipse/plugins。删除 jar 后我仍然收到此错误。我正在使用 Eclipse Indigo 并使用 ubuntu 12.04。我认为还有其他问题。

杰米

# clearcase - 如何将新版本的 jar 添加到 Clear Case Source Control 中

> ID：11546290
> 
> 赞同：1
> 
> 时间：2012-07-18T16:41:53.813
> 
> 标签：clearcase

我正在尝试将 commons-lang-2.0.jar 升级到 commons-lang-2.4.jar。尝试将 2.4 jar 添加到源代码管理 Clear Case 时抛出以下错误：

```
An element with this name (commons-lang-2.4.jar) has ALREADY been created in ClearCase for
this directory [lib], may be in a different version history of this directory that the one
you are seeing.
Review the version history of this directory [lib] to find it. 
```

我觉得这是因为 commons-lang-2.0 jar 存在于 lib 文件夹中，并且在添加 2.4 之前我需要删除 2.0。有人能告诉我我是否正确吗？如果是这样，我怎样才能删除 2.0 jar 并用 2.4 替换它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:27:33.713

这看起来像是关于“**邪恶双胞胎**”的警告，其中您的文件`commons-lang-2.4.jar`被添加，然后从 lib 中删除（您将再次添加它，创建一个具有相同名称但完全独立的历史的新元素：邪恶双胞胎）
另见“[邪恶孪生问题和减法合并](https://stackoverflow.com/questions/1636712/evil-twin-problem-and-subtractive-merge)”。

请参阅“[关于 Evil twin](http://www-01.ibm.com/support/docview.wss?uid=swg21125072) ”以尝试查找`lib`已包含您的文件的版本`commons-lang-2.4.jar`。

找到正确版本后`lib`，可以将其合并到当前版本的 lib 中，恢复已删除的`commons-lang-2.4.jar`.

# java - Selenium 选择下拉选项

> ID：11546294
> 
> 赞同：-1
> 
> 时间：2012-07-18T16:42:10.623
> 
> 标签：java, select, selenium

我要说可怕的话-我对Java还很陌生

但是我在网上最明显的地方找不到我的答案，所以我要在这里问这个问题

我正在测试的程序是一个客户数据库，当您选择“国家/地区”下拉框时，其他字段可能成为必填项其中这些字段是“州”此字段可以是自由文本或下拉框

所以我创建了一个 if 语句，如果不满足状态下拉框的条件，我可以输入自由文本：

```
if (selenium.isElementPresent("xpath=//*[@id='state']/option[2]"))
{selenium.select("xpath=//select[@id='state']/option","index=2" );}

else    {checkfield("xpath=//td[contains(.,'State/Province:')]/
preceding-sibling::td[contains(.,'*')]", 
        "xpath=//*[@id='address.state']",
        state1);}

<td>
<!-- begin state drop down menu -->
<select id="state" name="address.state">
<option selected="selected" value="">Please Select</option>
<option value="AL">Alabama</option>
<option value="AK">Alaska</option>
<option value="WY">Wyoming</option>
</select>
<!-- end state drop down menu -->
</td> 
```

我的问题可能是一个非常基本的问题，你们可能已经看到我的代码在哪里失败了

如果存在下拉框，我想选择下拉框的选项 2，否则输入已在自由文本框中声明的字符串

到目前为止，我只使用 selenium.select 来选择具有特定文本的标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:25:19.527

首先：**升级到 Selenium WebDriver**

Selenium 1.0 只是一个不死生物。

这就是使用 WebDriver 的方法：

```
if(stateDropdown.isEnabled()&&(!stateField.isEnabled())){

    Select state = new Select(stateDropdown);
    // state.selectByValue("Illinois");
    state.selectByIndex(2);

}else if(stateField.isEnabled()&&(!stateDropdown.isEnabled){
    stateField.sendKeys("Salzburg");
} 
```

是不是很漂亮？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:02:27.860

您可以尝试使用标签来代替吗？

selenium.select("state", "label=Alaska")

除非添加新状态，否则您可能会知道值是什么（似乎不太可能）

# c# - 实体框架迁移不包括 DefaultValue 数据注释 (EF5RC)

> ID：11546295
> 
> 赞同：13
> 
> 时间：2012-07-18T16:42:11.030
> 
> 标签：c#, entity-framework-migrations, entity-framework-5

我有一个看起来像这样的类：

```
[Table("Subscribers", Schema = "gligoran")]
public class Subscriber
{
    [Key]
    public string Email { get; set; }

    [Required]
    [DefaultValue(true)]
    public bool Enabled { get; set; }
} 
```

在创建包含此类的迁移时，我得到：

```
public partial class AddSubscriberClass : DbMigration
{
    public override void Up()
    {
        CreateTable(
            "gligoran.Subscribers",
            c => new
                {
                    Email = c.String(nullable: false, maxLength: 128),
                    Enabled = c.Boolean(nullable: false),
                })
            .PrimaryKey(t => t.Email);

    }

    public override void Down()
    {
        DropTable("gligoran.Subscribers");
    }
} 
```

我希望这`Enabled`条线看起来像这样：

```
Enabled = c.Boolean(nullable: false, defaultValue: true), 
```

当然我可以自己做，但我只是问是否有办法让 Entity Framework 自动做。

我正在使用最新的 Entity Framework 5 RC (5.0.0-rc.net40)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T20:37:20.460

EF 根本不使用`DefaultValue`属性 = 它不是模型的一部分，因此迁移看不到它。[您可以在Data UserVoice](http://data.uservoice.com/forums/72025-ado-net-entity-framework-ef-feature-suggestions)上提议支持此注释。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T13:15:44.607

作为拉迪斯拉夫评论的补充。哪个是对的。你不能在模型中做到这一点。如果您想使用基于代码的迁移。即使用PM commandlet Add-Migration / Update Database，然后这种方法将生成的类引入进程。然后你可以有默认值。请参阅派生自 DBMigrations 的类。请参阅[http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.dbmigration.addcolumn%28v=vs.103%29.aspx](http://msdn.microsoft.com/en-us/library/system.data.entity.migrations.dbmigration.addcolumn%28v=vs.103%29.aspx) 您可以使用特定的列生成器 Lamda 表达式。这允许默认值。

```
namespace MigrationsDemo.Migrations
{
  using System;
  using System.Data.Entity.Migrations;

public partial class SomeClassThatisATable : DbMigration
{
    public override void Up()
    {
        AddColumn("MyTable", "MyColumn", c => c.String( defaultvalue:"Mydefault"  ));
    } 
```

# python - Django：输入甚至不是 10 个字符时，类型字符变化（30）的值太长

> ID：11546302
> 
> 赞同：1
> 
> 时间：2012-07-18T16:42:41.763
> 
> 标签：python, django, django-models

我有一个追随者`class`

```
class PlaylistManager(models.Manager):
    def add_playlist(self, name):
        playlist = Playlist(name=name)
        playlist.save()
        return playlist

class Playlist(models.Model):
    name = models.CharField(max_length=30)
    date_created = models.DateTimeField(auto_now_add=True)
    date_modified = models.DateTimeField(auto_now=True)
    deleted = models.BooleanField(default=False)
    objects = PlaylistManager() # is a customer manager

    class Meta:
        db_table = 'playlists' 
```

我`test`正在关注

```
PLAYLIST = 'playlist' # 8 characters
class PlaylistTest(TestCase):
    def insert_playlist(playlist=PLAYLIST):
        Playlist.objects.add_playlist(playlist)

    def test_add_one_video_to_playlist(self):
        self.insert_playlist()
        self.assertEqual(Playlist.objects.count(), 1, msg='playlist count is not 1, it is ' + str(Playlist.objects.count())) 
```

当我测试这个时，我得到以下错误

```
DatabaseError: value too long for type character varying(30)

----------------------------------------------------------------------
Ran 1 test in 0.004s

FAILED (errors=1)
Destroying test database for alias 'default'... 
```

**问题**
- 为什么它失败了？
- 当我做`max_length=300`并运行测试时，一切都很好，但这是不可取的。

**更新**

我`PostgreSQL`用作后端

* * *

**更新 1**
这是测试中发生的事情：

```
PLAYLIST='playlist'
class PlaylistTest(TestCase):
    def insert_playlist(playlist=PLAYLIST):
        Playlist.objects.add_playlist(playlist) 
```

改了我`PlaylistManager`的调试一下

```
class PlaylistManager(models.Manager):
    def add_playlist(self, name):
        logging.warn('type ' + str(type(name)))
        logging.warn('adding ' + str(dir(name)))
        playlist = Playlist(name=name)
        playlist.save()
        return playlist 
```

**案例-1：如果我说`playlist=PLAYLIST`**
什么进入`add_playlist`的`PlaylistManager`是一个`PlaylistTest`对象

```
Creating test database for alias 'default'...
WARNING:root:type <class 'vlists.apps.playlists.tests.PlaylistTest'>
WARNING:root:adding ['__call__', '__class__', '__delattr__', '__dict__', '__doc__', '__eq__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_addSkip', '_baseAssertEqual', '_classSetupFailed', '_cleanups', '_deprecate', '_fixture_setup', '_fixture_teardown', '_formatMessage', '_getAssertEqualityFunc', '_post_teardown', '_pre_setup', '_resultForDoCleanups', '_testMethodDoc', '_testMethodName', '_truncateMessage', '_type_equality_funcs', '_urlconf_setup', '_urlconf_teardown', 'addCleanup', 'addTypeEqualityFunc', 'assertAlmostEqual', 'assertAlmostEquals', 'assertContains', 'assertDictContainsSubset', 'assertDictEqual', 'assertEqual', 'assertEquals', 'assertFalse', 'assertFieldOutput', 'assertFormError', 'assertGreater', 'assertGreaterEqual', 'assertHTMLEqual', 'assertHTMLNotEqual', 'assertIn', 'assertIs', 'assertIsInstance', 'assertIsNone', 'assertIsNot', 'assertIsNotNone', 'assertItemsEqual', 'assertLess', 'assertLessEqual', 'assertListEqual', 'assertMultiLineEqual', 'assertNotAlmostEqual', 'assertNotAlmostEquals', 'assertNotContains', 'assertNotEqual', 'assertNotEquals', 'assertNotIn', 'assertNotIsInstance', 'assertNotRegexpMatches', 'assertNumQueries', 'assertQuerysetEqual', 'assertRaises', 'assertRaisesMessage', 'assertRaisesRegexp', 'assertRedirects', 'assertRegexpMatches', 'assertSequenceEqual', 'assertSetEqual', 'assertTemplateNotUsed', 'assertTemplateUsed', 'assertTrue', 'assertTupleEqual', 'assert_', 'client', 'client_class', 'countTestCases', 'debug', 'defaultTestResult', 'doCleanups', 'fail', 'failIf', 'failIfAlmostEqual', 'failIfEqual', 'failUnless', 'failUnlessAlmostEqual', 'failUnlessEqual', 'failUnlessRaises', 'failureException', 'id', 'insert_playlist', 'longMessage', 'maxDiff', 'restore_warnings_state', 'run', 'save_warnings_state', 'setUp', 'setUpClass', 'settings', 'shortDescription', 'skipTest', 'tearDown', 'tearDownClass', 'test_add_one_video_to_playlist'] 
```

所以它**失败了**

```
**Case -2 : if I say `Playlist.objects.add_playlist('name')`**  
PLAYLIST = 'playlist'
class PlaylistTest(TestCase):
    def insert_playlist(playlist=PLAYLIST):
        Playlist.objects.add_playlist('name') # this line has changed

    def test_add_one_video_to_playlist(self):
        self.insert_playlist()
        self.assertEqual(Playlist.objects.count(), 1, msg='playlist count is not 1, it is ' + str(Playlist.objects.count())) 
```

一切看起来都不错！

```
Creating test database for alias 'default'...
WARNING:root:type <type 'str'>
WARNING:root:adding ['__add__', '__class__', '__contains__', '__delattr__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__getnewargs__', '__getslice__', '__gt__', '__hash__', '__init__', '__le__', '__len__', '__lt__', '__mod__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__rmod__', '__rmul__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '_formatter_field_name_split', '_formatter_parser', 'capitalize', 'center', 'count', 'decode', 'encode', 'endswith', 'expandtabs', 'find', 'format', 'index', 'isalnum', 'isalpha', 'isdigit', 'islower', 'isspace', 'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 'partition', 'replace', 'rfind', 'rindex', 'rjust', 'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 'startswith', 'strip', 'swapcase', 'title', 'translate', 'upper', 'zfill']
.
----------------------------------------------------------------------
Ran 1 test in 0.007s

OK
Destroying test database for alias 'default'... 
```

**更大的问题**

*   为什么我们需要传递原始字符串？

我在这里感到困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:20:36.877

这对我来说是一场灾难，我做错了

**我写的不正确和真实**

```
PLAYLIST = 'playlist'
class PlaylistTest(TestCase):
    def insert_playlist(playlist_name=PLAYLIST):
        Playlist.objects.add_playlist(playlist_name)

    def test_add_one_video_to_playlist(self):
        self.insert_playlist()
        self.assertEqual(Playlist.objects.count(), 1, msg='playlist count is not 1, it is ' + str(Playlist.objects.count())) 
```

我忘了添加`self`到我的类方法中，这就是为什么一直在传递类实例

**正确实施**

```
PLAYLIST = 'playlist'
class PlaylistTest(TestCase):
    def insert_playlist(self, playlist_name=PLAYLIST): # added self as first parameter here
        Playlist.objects.add_playlist(playlist_name)

    def test_add_one_video_to_playlist(self):
        self.insert_playlist()
        self.assertEqual(Playlist.objects.count(), 1, msg='playlist count is not 1, it is ' + str(Playlist.objects.count())) 
```

事情开始正常了！感谢所有回答和思考问题的人

# clearcase - 变基与交付

> ID：11546305
> 
> 赞同：1
> 
> 时间：2012-07-18T16:42:55.430
> 
> 标签：clearcase, clearcase-ucm

投入生产后，他们希望使用当前代码 更新`Dev`和流。`INT``Prod`

我应该交付（项目间）到`Dev`流然后交付到`Integration`或交付到`Integration`然后变基到`Dev`？

我们有一个`Maintenance-HotFix`和两个`Dev`流用于不同的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:20:28.437

如果这是一个“prod”代码，最好交付到`INT`，然后变基到`Dev`。

这样，新的基础基线（即新的“ `prod`”基线）将在`Dev`流上清晰可见（因为这就是变基所做的：更改基础基线）。

# django - Django - 合并两个相同应用程序的最佳方法

> ID：11546308
> 
> 赞同：1
> 
> 时间：2012-07-18T16:43:11.520
> 
> 标签：django, postgresql, database-design, django-models

我最近参加了一个项目，其中我们有两个几乎相同的应用程序。我们正在使用 Django 1.4 和 Postgresql 8.4。两种型号都具有以下特点：

```
 class Author(models.Model):
    person = models.ForeignKey(Person)
    book = models.ForeignKey(Book)
    order = models.PositiveIntegerField(blank=True,null=True)
    institute = models.ForeignKey(Institution,blank=True, null=True)
    rank = models.ForeignKey(Rank,blank=True, null=True)

  class Institution(models.Model):
    name = models.CharField(max_length=200)
    parent_institution = models.ForeignKey('self', blank=True, null=True)
    location = models.ForeignKey(Location, blank=False, null=False)
    type = models.ForeignKey(InstitutionType, blank=False, null=False)

  class Person(models.Model):
    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)
    middle_name = models.CharField(max_length=50,blank=True,null=True)
    gender = models.CharField(max_length=1,choices=GENDER_TYPE,blank=True,null=True)

  class InstitutionType(models.Model):
    type = models.CharField(max_length=255) 
```

有没有办法通过 SQL 或 Django 轻松合并两者？我不太确定最好的方法是什么。我唯一的问题是有很多外键引用。有没有一种好方法可以将一个应用程序表的主键更改为高于另一个应用程序（基本上从第一个表结束的地方开始重新分配第二个表中的主键）并让它们向下流动，然后最终合并两张桌子？任何形式的反馈将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:41:23.683

合并中最困难的可能是模型。如果你使用 Django，你也应该使用 South。如果你不 - 试试看。以第一次申请为基础。从第二个应用程序添加字段并创建架构迁移。然后通过第二个应用程序的数据迁移来移动您的数据。从第二个应用程序合并您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:56:57.780

如果 Alexander 向您建议的不是您的链接，您可以使用[django 多数据库](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)支持来：

*   保持两个应用程序在相同的数据库和模型上运行
*   在慢慢解耦两个模型时使用迁移/同步脚本，以便只使用一个
*   编写测试:)

# c++ - 在动态分配的结构中初始化引用

> ID：11546311
> 
> 赞同：2
> 
> 时间：2012-07-18T16:43:22.420
> 
> 标签：c++

任何人都知道如何在动态分配的结构中初始化引用？或者为什么这不起作用？

```
#include <stdio.h>
#include <stdlib.h>

class A
{

};

struct S
{
    A& a;
};

int main()
{
    A a;

    S* s=new S;
    s->a=a;

    printf("a addr:%p\n", &a);
    printf("s->a addr:%p\n", &(s->a));
delete s;
    return 0;
} 
```

输出：

```
a addr:0x7fff95b65aaf
s->a addr:(nil) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:45:31.403

您需要在构造函数的初始化程序列表中初始化引用成员。连构造函数的主体都来不及了，因为成员已经被初始化了，无法更改。

在您的代码中，您正在使用（编译器提供的）默认构造函数，然后在构造对象后尝试设置引用。

尝试这个：

```
struct S
{
    S(A& a_) : a(a_){} 
    A& a;
};

int main()
{
    A a;

    S* s=new S(a);
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T16:50:28.210

它不起作用，因为您试图*将*某些内容分配给引用成员（当然，这不会影响引用本身，而是影响被引用的对象）。您没有在代码中*初始化*引用。引用只能在它们“诞生”的那一刻被初始化，它们的初始化不能推迟到以后。

当你这样做时`new S`，你要求编译器使用编译器生成的默认构造函数`S`。`S`无法生成默认构造函数，因为编译器不知道如何初始化引用成员`a`。C++ 中的引用不能未初始化，不能默认初始化，也不能进行值初始化。始终必须明确提供特定的初始化程序。

`struct S`不幸的是，在 C++89/C++03 中，对于动态分配的（如您的代码中定义的）没有办法做到这一点。您必须为此提供自己的构造函数。

在 C++11 中，您可以使用统一的初始化语法

```
S *s = new S { a }; 
```

`S::a`这会将新分配对象的成员附加到`a`.

# c++ - 延迟加载 DLL 时的函数原型

> ID：11546313
> 
> 赞同：0
> 
> 时间：2012-07-18T16:43:29.173
> 
> 标签：c++

我正在延迟加载 DLL，如此[处](http://www.goffconcepts.com/techarticles/development/cpp/calldll.html)所述。该 DLL 附带一个 .h 文件，其中包含常量定义和函数声明。这意味着当我尝试做

```
MyFunction = pICFUNC(lpfnGetProcessID);  // See link above 
```

编译器抱怨“错误：无法在赋值中将 'int (*)(int, int, int)' 转换为 'int(int, int, int)'”，因为 MyFunction 已经在 .h 文件中这样声明：

```
int __stdcall MyFunction (int, int, int); 
```

我是不是该：

A）注释掉 .h 文件中的函数原型并创建我自己的使用

```
typedef int (__stdcall * pICFUNC)(int, int, int);
pICFUNC MyFunction;
MyFunction = pICFUNC(lpfnGetProcessID); 
```

B) 与 A) 一样，但给函数一个不同的名称 (MyFunction_local)，而不是注释掉 .h 文件中的原型。

C) 其他我没有想到的东西。

我想做 A)，但是像这样弄乱第三方 .h 文件感觉不对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:01:15.670

一般来说，有两个名称相同但含义不同的符号是个坏消息。您的选项 B 为本地指针使用不同的名称，听起来是最好的解决方案。

如果您坚持对函数和指针使用相同的名称，您可以将其中一个或另一个放入命名空间。

# visual-studio-2010 - 如何强制 TFS 让我下载文件夹（列出的方法除外）？

> ID：11546316
> 
> 赞同：5
> 
> 时间：2012-07-18T16:43:41.547
> 
> 标签：visual-studio-2010, tfs

我有一个看似常见的问题，但找不到适合我的通用解决方案。我最近对我的计算机进行了重新映像，现在正在从 TFS 重新下载解决方案。其中一个解决方案文件夹包含 2 个文件夹，这些文件夹在源代码管理资源管理器的“最新”列中列出了“未下载”。尝试打开解决方案时，我收到错误“无法加载项目文件。找不到文件 x”。我尝试了下面列出的方法，但无济于事：

1.  获取特定版本，检查覆盖选项
2.  删除，.suo文件，重启VS2010
3.  tf 获取 / 强制
4.  删除映射，删除本地文件，将整个 TFS 项目重新映射到本地文件夹
5.  tfpt rollback /changeset .csproj 的最后一个变更集列出了一个分支和一个合并作为我挂起的更改
6.  文件 -> 源代码管理 -> 从源代码管理打开，导航到 TFS 项目，尝试在未下载的文件夹中打开 .csproj，收到错误“无法打开所选文件。项目文件已被移动、重命名或不在您的计算机上。”

我可能会错过我尝试过的其他东西，如果我能想到任何东西，我一定会更新这个列表。

除了上面列出的那些之外，还有其他方法可以从 TFS 获取这 2 个文件夹及其内容吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T16:53:23.360

尝试通过 Visual Studio 命令行浏览到该目录并执行以下操作：

```
tf get . /force /recursive 
```

这应该从当前目录强制递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:43:14.230

你已经尝试了我建议的大部分事情。如果这是一个简单的 TFS 对您的电脑上的内容感到困惑的简单案例，则 force-get-latest 应该可以工作。

“文件夹”在 tfs 中，还是在您的解决方案资源管理器中？解决方案资源管理器中的文件夹通常反映真实的磁盘结构，但可以在 SE 中的不同位置获取文件和文件夹，而不是在磁盘上。这盘绕意味着解决方案资源管理器引用的文件未映射到您的 tfs 工作区。

我会检查工作区映射是否尽可能简单（没有分支或额外不需要的文件夹等），关闭解决方案，从源代码控制视图强制获取最新版本的磁盘结构，然后将 .csproj 文件加载到文本编辑器来准确检查项目引用的内容，以确保所有文件都存在并且位于磁盘上的合理位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:46:24.857

我发现了问题。我最近将某个域组添加到 TFSProject/Readers TFS 组，然后明确拒绝访问这两个文件夹中的所有权限。看来我虽然在 Contributor TFS 组，但我也是一个“读者”，所以我拒绝访问自己。

# linux - perl 的文件检查 IO 密集吗？

> ID：11546317
> 
> 赞同：1
> 
> 时间：2012-07-18T16:43:49.307
> 
> 标签：linux, perl, scripting

我想出了一种无需编辑任何脚本即可打开调试的方法。只需使用 .debug 触摸文件名即可打开我的调试。

```
$ touch fancy.pl.debug 
```

我担心文件检查（在每个脚本的开头）可能在某种程度上是 IO 密集型的

```
$opts{d}++ if (-e "$0.debug"); 
```

这可能是真的吗？有没有更好的方法来执行此检查或在许多脚本中打开/关闭调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:46:56.900

它只是一个目录读取。它应该很轻。

# c# - 在不使用 Linq 的情况下使用 C# 从数据集中以时间格式（HH:MM）获取列的总数

> ID：11546318
> 
> 赞同：0
> 
> 时间：2012-07-18T16:43:48.817
> 
> 标签：c#, asp.net

有没有办法在不使用 LINQ 查询的情况下从数据集中获取列的总数？

```
CREATE procedure St_Proc_GetUserReportforCurrentDayTask                        
@userID int                        
as                        
    Begin                        
        set NoCount on;                        
        DECLARE @TODAY DATE                          
        SET @TODAY = CONVERT(VARCHAR(10), GETDATE(), 111)                        
        select  CONVERT(VARCHAR,production.CalendarDate,101) + RIGHT (CONVERT(VARCHAR,production.CalendarDate , 100 ) ,7) as Date,                         
        RegionAndProjectInfo.RegionProjectName as Region ,                        
        County.CountyName as County,                        
        WorkType.WorkTypeName as WorkType,                        
        Task.TaskName as Task,            
        Production.VolumeProcessed as 'Volumes Processed',                        
        Production.TimeSpent as 'Duration'                        
        from Production                         
        inner join RegionAndProjectInfo                        
        on                        
        RegionAndProjectInfo.RegionProjectID=Production.RegionProjectID                        
        inner join County                        
        on                         
        County.CountyID=Production.CountyID                        
        inner join WorkType                        
        on                        
        WorkType.WorkTypeID=Production.WorkTypeID                        
        inner join Task                        
        on                        
        Task.TaskID=Production.TaskID                        
        where Production.UserID=@userID and CalendarDate >= @TODAY                        
    End 
```

从上面的存储过程中，我正在填充一个数据集。之后，我将此数据集绑定到网格视图。在数据集中，该列`Duration`包含 HH:MM 格式的数据（例如 - 01:00、12:45、02:59 等）。有没有办法可以从数据集本身获取格式的`Duration`总数？`HH:MM`我不想再次从数据库中查询来获取`SUM`. `Duration`我已经[在这里](https://stackoverflow.com/questions/11543423/get-total-in-hhmm-format-from-the-dataset)发布了这个问题，但解决方案是使用我不想使用的 LINQ 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:55:36.357

您可以使用[DataTable.Compute 方法](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute%28v=vs.80%29.aspx)进行求和，但是，它不知道如何将持续时间处理为 HH:MM。您需要在 SELECT 中提供另一个将 HH:MM 转换为数字类型的列，然后在求和后将其转换回代码中的 HH:MM。

如果您可以更改数据库架构，我会将持续时间存储为 int 或 bigint 列中的刻度。这让您可以轻松地转换为 .NET 端的 TimeSpan。它还允许您更轻松地在 SQL 中执行求和和范围检查。如果您需要能够在 SQL 中将 TimeSpan 与刻度转换，您可以使用我编写的下面的函数。**我不得不插入一些随机的下划线 (_) 字符来提交我的答案。（出于某种原因，没有它们可以节省时间。）需要删除它们才能使代码正常工作。对于那个很抱歉。**

要从时间字符串的字符串表示中获取刻度：

```
/*
[-][d.]hh:mm:ss[.fffffff] 

"-" 
 A minus sign, which indicates a negative time interval. No sign is included for a positive time span.

"d" 
 The number of days in the time interval. This element is omitted if the time interval is less than one day. 

"hh" 
 The number of hours in the time interval, ranging from 0 to 23\. 

"mm" 
 The number of minutes in the time interval, ranging from 0 to 59\. 

"ss" 
 The number of seconds in the time interval, ranging from 0 to 59\. 

"fffffff" 
 Fractional seconds in the time interval. This element is omitted if the time interval does not include fractional seconds. If present, fractional seconds are always expressed using seven decimal digits.
*/
CREATE FUNCTION [dbo].[ParseTimeSpanString]
(
    @timespan varchar(26) 
)
RETURNS INT
AS
BEGIN
    DECLARE @hourStart int
    DECLARE @minuteStart int
    DECLARE @secondStart int
    DECLARE @ticks bigint

    SET @hourStart = CHAR INDEX('.', @timeSpan) + 1
    SET @minuteStart = CHAR INDEX(':', @timeSpan) + 1
    SET @secondStart = CHAR INDEX(':', @timespan, @minuteStart) + 1
    SET @ticks = 0

    IF (@hourStart < @minuteStart)
    BEGIN
        SET @ticks = CON_VERT(int, LEFT(@timespan, @hourstart - 2)) * 864000000000
    END
    ELSE
    BEGIN
        SET @hourStart = 1
    END

    SET @ticks = @ticks + CON_VERT(int, SUBSTRING(@timespan, @hourStart, @minuteStart - @hourStart - 1)) * 36000000000
    SET @ticks = @ticks + CON_VERT(int, SUBSTRING(@timespan, @minuteStart, @secondStart - @minuteStart - 1)) * 600000000
    SET @ticks = @ticks + CON_VERT(decimal(9,7), SUBSTRING(@timespan, @secondStart, LEN(@timeSpan) - @secondStart)) * 10000000.0

    RETURN @ticks
END

GO 
```

要从滴答声中获取 TimeSpan 的字符串表示形式：

```
/*
[-][d.]hh:mm:ss[.fffffff] 

"-" 
 A minus sign, which indicates a negative time interval. No sign is included for a positive time span.

"d" 
 The number of days in the time interval. This element is omitted if the time interval is less than one day. 

"hh" 
 The number of hours in the time interval, ranging from 0 to 23\. 

"mm" 
 The number of minutes in the time interval, ranging from 0 to 59\. 

"ss" 
 The number of seconds in the time interval, ranging from 0 to 59\. 

"fffffff" 
 Fractional seconds in the time interval. This element is omitted if the time interval does not include fractional seconds. If present, fractional seconds are always expressed using seven decimal digits.
*/
CREATE FUNCTION [dbo].[GetTimeSpanString]
(
    @ticks bigint
)
RETURNS varchar(26)
AS
BEGIN
    DECL_ARE @timeSpanString varchar(26)

    IF @ticks < 0
    BEGIN
        SET @timeSpanString = '-'
    END
    ELSE
    BEGIN
        SET @timeSpanString = ''
    END

    SET @ticks = ABS(@ticks)

    -- Days
    SET @timeSpanString = @timeSpanString + CON_VERT(varchar(26), FLOOR(@ticks / 864000000000.0)) + '.'
    SET @ticks = @ticks % 864000000000

    -- Hours
    SET @timeSpanString = @timeSpanString + CON_VERT(varchar(26), FLOOR(@ticks / 36000000000.0)) + ':'
    SET @ticks = @ticks % 36000000000

    -- Minutes
    SET @timeSpanString = @timeSpanString + CON_VERT(varchar(26), FLOOR(@ticks / 600000000.0)) + ':'
    SET @ticks = @ticks % 600000000

    --Seconds
    DECLARE @seconds decimal(9,7)
    SET @seconds = @ticks / 10000000.0
    SET @timeSpanString = @timeSpanString + CON_VERT(varchar(26), @seconds)

    RETURN @timeSpanString
END

GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:53:23.440

我很好奇你为什么不想使用 Linq，但我离题了......

这是使用循环的 un-linq-y 版本：

```
double total = 0;
foreach(DataRow r in dataSet.Tables[0].Rows)
{

    var DurHour = r["Duration"].ToString().Split(':')[0];
    var DurMinute = r["Duration"].ToString().Split(':')[1];
    TimeSpan ts = new TimeSpan(int.Parse(DurHour), int.Parse(DurMinute), 0);
    total += ts.TotalMinutes;
}

Console.WriteLine("Total time in minutes: {0}", total); 
```

# java - 我有一个带有@ExceptionHandler 的父类和一个带有它自己版本的子类。我收到一个模棱两可的方法错误

> ID：11546325
> 
> 赞同：8
> 
> 时间：2012-07-18T16:43:57.333
> 
> 标签：java, spring, exception, spring-mvc, exception-handling

家长：

```
@ExceptionHandler(NoUserException.class)
protected ModelAndView handleException(NoUserException e) {
    Map<String, Object> model = new HashMap<String, Object>();

    model.put(ModelKeys.HOST_KEY, "message");

    return new ModelAndView("noAccess",model);
} 
```

孩子：

```
@ExceptionHandler(NoUserException.class)
protected void handleException(NoUserException e, HttpServletRequest request, HttpServletResponse response) throws IOException {
    logger.error("Invalid user.");
    respond(CLIENT_USER_ERROR,response);
} 
```

是的，我确实需要它们具有不同的参数和输出。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T16:58:42.507

您不能有两个方法具有相同的异常处理程序，对不起，它只是不受支持。解决它们的代码不区分超子类并认为子类“更具体”。`org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerExceptionResolver`如果您有兴趣，代码在。不难使您自己的实现`AbstractHandlerExceptionResolver`基于将直接在控制器上的方法视为比继承方法更具体的结果的实现。

编辑：个人评论，随着时间的推移，我发现在制作 Spring MVC 注释驱动的控制器时，最好抑制使用“继承作为模板工具”的冲动。视图代码有时本质上是笨重的和程序化的，这就是为什么我们首先制作一个单独的“视图层”。DRY 和“重复使用”的过于微观的方法在这里对您没有用处。如果它违反了 Liskov 替换原则，我不会这样做。当然是 YMMV。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-07T23:15:16.670

为什么不把实现委托`handleException()`给另一个方法呢？

```
// superclass
protected ModelAndView handleExceptionImpl(
        NoUserException e,
        HttpServletResponse response) {
    Map<String, Object> model = new HashMap<String, Object>();
    model.put(ModelKeys.HOST_KEY, "message");
    return new ModelAndView("noAccess",model);
}

@ExceptionHandler(NoUserException.class)
protected ModelAndView handleException(
        NoUserException e,
        HttpServletResponse response) {
    return handleExceptionImpl(e, response);
}

// subclass
@Override
protected ModelAndView handleExceptionImpl(
        NoUserException e,
        HttpServletResponse response) {
    logger.error("Invalid user.");
    respond(CLIENT_USER_ERROR,response);
} 
```

# windows-xp - Windows XP VPC 中的 Foxpro2“打开的文件太多”

> ID：11546326
> 
> 赞同：0
> 
> 时间：2012-07-18T16:43:58.567
> 
> 标签：windows-xp, dos, foxpro, vpc

我正在转换一个旧的 Foxpro2 DOS 应用程序，作为参考，我在 Windows XP VPC 中运行了 foxpro 应用程序。某些应用程序流会导致`Too many files open`错误。关于如何解决这个问题的任何想法？我已尝试`FILES=200`按照一篇博客文章中的建议添加 config.sys，但这不起作用，可能是因为这是一台虚拟 PC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:18:12.553

我似乎记得 Windows\System32\config.nt 文件应该包含 WinNT PC 上 FILES= 和 BUFFERS= 的设置。

# c# - 如何在 C#.NET 中将错误日志或异常写入文件

> ID：11546327
> 
> 赞同：3
> 
> 时间：2012-07-18T16:43:58.837
> 
> 标签：c#

我需要帮助将错误写入单独的文本文件并将该文件通过电子邮件发送给我。实际上，我已经创建了 Windows 应用程序，但我没有添加任何异常或将错误写入单独的文件。现在，我希望每当我的应用程序因任何错误而中断时，应将错误记录到单独的文本文件中，并且该文件应通过电子邮件发送给我。

我对错误日志文件进行了研究，所有我发现创建单独的类用于将错误日志写入文本文件并将该文件调用到所有方法的 try-catch 块中。但是我的程序/应用程序已经变得庞大，我需要添加它的中间部分。另外，我发现了 log4net，但它仍然以相同的方式工作。

谁能指导我如何在应用程序级别或应用程序收到任何错误消息时编写错误日志？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:47:28.930

如果您还没有连接到任何系统，我建议您查看[log4net](http://logging.apache.org/log4net/)，因为它可以满足您的要求，方式，方式，更多，并且是一个流行的库，因此它可以被其他人识别和扩展您团队中的专业人士。此外，由于其他人维护它，您偶尔会获得免费的错误修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:48:23.953

据我所知，您只需要处理[AppDomain.UnhandledException Event](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)。它将为您提供有关崩溃的最常见信息。您可以使用它来开始研究崩溃原因。

当然，在`UnhandledException`处理程序中，您可以使用任何您想要的，`log4net`或自定义记录器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:09:02.280

我创建了一个用于 WPF 项目的日志记录助手。这是一个包含许多不同组件的大型项目。这是在我学会如何使用 MVVM 之前，所以如果这打破了模式，请原谅。该系统不断扩展新组件以处理不同的任务。您可以将组件视为处理特定任务的独立单元，主组件是所有组件的主人。这种日志记录使我们能够记录错误，无论它们发生在哪个组件中。这可能有点矫枉过正，但对我们来说效果很好。

我使用相同的原则来记录所有系统范围的事件（用户操作、数据更改..等）

在我的 App.xaml.cs 中，我捕获了所有未处理的错误。请注意，这是日志记录的最后手段，我使用 try catch 任何我希望发生异常的地方（例如数据库连接）。

```
public partial class App : Application
{
    void Application_DispatcherUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs e)
    {
        ErrorEvent errorEvent = new ErrorEvent();
        errorEvent.LogErrorEvent(e.Exception);
        e.Handled = true;
    }
} 
```

ErrorEvent 是我的 Utilities dll 中的一个类，它使用事件路由来记录错误。我有不同类型的错误，具体取决于严重程度。所有这些错误都记录到数据库中，唯一知道数据库连接的组件是主要的。这就是我使用路由事件将异常发送到要记录的主组件的原因。ErrorEventHelper 被填充并路由到主组件。在我使用 try catch 的情况下，我创建 EventHelper 并将其传递给使用 LogErrorEvent 方法进行记录。ShowMessage 属性用于决定是通知用户异常还是只记录异常。

```
public class ErrorEvent : UserControl
{
    public delegate void ErrorEventEventHandler(object sender, RoutedCustomEventArgs e);

    public static readonly RoutedEvent EventOccuredEvent = EventManager.RegisterRoutedEvent(
    "EventOccured", RoutingStrategy.Bubble, typeof(ErrorEventEventHandler), typeof(ErrorEvent));

    // Provide CLR accessors for the event
    public event RoutedEventHandler EventOccured
    {
        add { AddHandler(EventOccuredEvent, value); }
        remove { RemoveHandler(EventOccuredEvent, value); }
    }

    public void LogErrorEvent(ErrorEventHelper occuredEventDetails)
    {
        RoutedEventArgs newEventArgs = new RoutedCustomEventArgs(ErrorEvent.EventOccuredEvent, occuredEventDetails);
        RaiseEvent(newEventArgs);
    }

    public void LogErrorEvent(Exception exception)
    {
        ErrorEventHelper occuredEventDetails = new ErrorEventHelper();
        occuredEventDetails.ErrorType = ErrorEventHelper.EventTypes.Critical;
        occuredEventDetails.ErrorValue = exception.Message;
        occuredEventDetails.ErrorStack = exception.StackTrace;
        occuredEventDetails.ShowMessage = true;

        RoutedEventArgs newEventArgs = new RoutedCustomEventArgs(ErrorEvent.EventOccuredEvent, occuredEventDetails);
        RaiseEvent(newEventArgs);

        if (exception.InnerException != null)
        {
            LogErrorEvent(exception.InnerException);
        }
    }

    public class RoutedCustomEventArgs : RoutedEventArgs
    {
        public ErrorEventHelper OccuredEventDetails { get; private set; }

        public RoutedCustomEventArgs(RoutedEvent routedEvent, ErrorEventHelper occuredEventDetails)
            : base(routedEvent)
        {
            this.OccuredEventDetails = occuredEventDetails;
        }
    }

}

public class ErrorEventHelper
{
    public string ErrorValue { get; set; }
    private EventTypes _ErrorType = EventTypes.Critical;
    public EventTypes ErrorType 
    {
        get
        {
            return _ErrorType;
        }
        set
        {
            _ErrorType = value;
        }
    }
    public string ErrorStack { get; set; }
    public bool ShowMessage { get; set; }

    public enum EventTypes
    {
        Critical,
        Warning,
        Information
    }

    public void SendMessage()
    {
        ErrorEvent newEvent = new ErrorEvent();
        newEvent.LogErrorEvent(this);
    }
} 
```

在 MainWindow 中，我注册了事件处理程序。

```
EventManager.RegisterClassHandler(typeof(ErrorEvent),
                        ErrorEvent.EventOccuredEvent, new ErrorEvent.ErrorEventEventHandler(LogOccuredErrors)); 
```

最后处理它：

```
private void LogOccuredErrors(object sender, ErrorEvent.RoutedCustomEventArgs e)
{
     ErrorEventHelper eventHelper = e.OccuredEventDetails;

 //Call Database Helper to log to database or output to file and email
    StringBuilder builder = new StringBuilder();
    builder.AppendLine(eventHelper.ErrorType);
    builder.AppendLine(eventHelper.ErrorValue);
    builder.AppendLine(eventHelper.ErrorStack);
    if (eventHelper.ShowMessage)
    {
        MessageBox.Show(eventHelper.ErrorValue);
    }

//Create your log file and email it
    File.WriteAllText(@"C:\log.txt", ControllerBuilder.ToString())
//email here

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T16:49:04.413

尝试

[Log4Net](http://logging.apache.org/log4net/)

[SMTP 记录器：](http://logging.apache.org/log4net/release/config-examples.html)

```
<appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
<to value="to@domain.com" />
<from value="from@domain.com" />
<subject value="test logging message" />
<smtpHost value="SMTPServer.domain.com" />
<bufferSize value="512" />
<lossy value="true" />
<evaluator type="log4net.Core.LevelEvaluator">
    <threshold value="WARN"/>
</evaluator>
<layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%newline%date [%thread] %-5level %logger [%property{NDC}] - %message%newline%newline%newline" />
</layout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T16:49:15.713

要处理其他地方未捕获的所有异常，请考虑为[Application.ThreadException实现处理程序](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)

# version-control - 更改组件名称

> ID：11546333
> 
> 赞同：1
> 
> 时间：2012-07-18T16:44:38.917
> 
> 标签：version-control, clearcase, rtc

为了`dev`从现有流创建新流，我首先创建了现有流的快照，然后从该快照创建了一个新`prod`流。
（类似于从父流到子流的基线的 ClearCase UCM 变基）

所有新的流组件都与以前的相同。所以 ' `dev-stream`' & ' `prod-stream`' 具有相同的组件（组件具有相同的名称并指向相同的基线）。
不应该使用新基线创建组件的副本吗？

这是我的组件如何在 RTC 中出现的快照 ' `dev-stream`' & ' `prod-stream`' ：

![在此处输入图像描述](../Images/f0c50210204422edb07d784dc2a9a8fc.png)

基线不应包含单词“ `prod`”，因为这是一个`dev`流。
问题在屏幕截图中以红色圈出： ' `prod`' 一词是如何或为什么出现在组件名称中的？可以`prod`从名称中删除 '' 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:56:39.137

将快照添加到新流时，组件必须相同：相同的名称和相同的基线名称。（与 ClearCase UCM rebase 非常相似，您会在其中找到用作子流的*基础基线的相同基线名称）。*

流背后的想法是列出工作所需的内容：这称为配置，如“scm”（可以代表“源*配置*管理”，而不仅仅是“源*代码*管理”）。

您的新流开始使用以“ `prod`”命名的基线这一事实与您将在所述新流中进行的开发类型无关。
它只是一个“起点”（就像 ClearCase 中的“基础基线”一样）。同样，这里不涉及复制或重命名。

在您[之前的问题](https://stackoverflow.com/questions/11544233/how-to-create-a-new-branch-which-contains-source-of-another-branch-rtc-source)中，您提到将当前流作为“ `dev-stream`”，但这对第一个流中已经交付的基线的名称没有影响（无论它的名称是什么）。这些基线保留它们的名称，如果您对它们进行快照并在新流中重用该快照，您将获得完全相同的基线名称。

但是您用作起点的第一个基线的名称并不重要，只要它的内容允许您开始单独的开发工作，隔离在它自己的流中。
您将在所述新流上创建和交付的任何基线都将显示在其上，并且您将不会再看到第一个基线名称。

# facebook - Facebook UI 可以显示照片上传吗？

> ID：11546334
> 
> 赞同：0
> 
> 时间：2012-07-18T16:44:39.313
> 
> 标签：facebook, facebook-graph-api, user-interface, image-uploading, facebook-ios-sdk

我想实现 Facebook SDK（不是 3.0 beta）来简单地将照片上传到用户墙。我发现了一些很好的帖子如何做到这一点： [在用户墙上张贴照片](https://stackoverflow.com/questions/6702135/post-photo-on-users-wall-using-facebook-ios-sdk)

我想知道的是，上传图像时是否已经有 Facebook UI，或者我是否必须制作自己的活动指示器并对 Facebook 委托方法做出反应？

我是对的，只有一个 Facebook UI 用于显示对话框？像这样：

```
 [appDelegate.facebook dialog:@"feed" 
                               andParams:dialogParams 
                             andDelegate:self]; 
```

谢谢你的帮助。（这是我的第一个 Facebook 集成，所以我真的很期待更简单的 iOS 6 集成；））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:24:31.183

您必须自己做这件事，因为 Facebook SDK 目前没有为开发人员提供用于上传照片的视图，并且新版本的 SDK (3.0) 也没有提供使用的视图。

# c# - 在 datagridview 文本框中设置值

> ID：11546347
> 
> 赞同：0
> 
> 时间：2012-07-18T16:45:28.137
> 
> 标签：c#, datagridview, textbox

如何设置datagridview 文本框的值，即带有文本框的每一行都应该包含一些值（例如，在我的例子中是0.0），如果用户没有输入任何值，它应该设置值0.0。

我尝试使用 datagridview 的 cellleave 事件，但它没有帮助......

如果用户不提供任何输入，我真正想做的是在单元格中设置某个默认值。一旦用户离开当前单元格，它应该显示默认值。

现在这是我的代码

```
private void dgvSellbox_CellLeave(object sender, DataGridViewCellEventArgs e)
        {
            if (dgvSellbox.CurrentCell.Value == null )
            {
                dgvSellbox.CurrentCell.Value = 0.0;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:10:09.817

您可以通过设计器为 a 列设置默认值

> 1.  在您的 DataGridView -> 单击编辑列
> 2.  现在您应该看到编辑列对话框
> 3.  选择要设置默认值的列
> 4.  现在在右侧，您应该使用名为 DataGridViewCellStyle 的属性
> 5.  请单击 DataGridViewCellStyle 这将显示单元格样式生成器对话框
> 6.  在 Data -> 将 NullValue 属性设置为 0.0
> 7.  继续单击确定按钮，直到您返回 DataGridView

希望这可以帮助...

# php - 使用 urldecode() 导致 MySql 错误

> ID：11546349
> 
> 赞同：1
> 
> 时间：2012-07-18T16:45:29.113
> 
> 标签：php, mysql, urlencode, urldecode

我需要通过 URL 为我的 MySQL 查询传递特殊符号。例如，我需要一个类似于以下内容的 URL：

```
www.example.com/index.php?q=AND name LIKE '%hi%' 
```

当我第一次尝试时，我收到*了 406 错误*。我查了一下，显然我必须使用`urlencode()`and `urldecode()`。我把它们放进去， *406 错误*消失了，但后来我得到了一个 MySQL 错误：

```
mysql_fetch_array(): supplied argument is not a valid MySQL result resource 
```

通常当我得到这些时，这意味着查询没有正确编写。所以我回应了 MySQL 查询，一切看起来都很好。我什`urldecode()`至将我想要传递给页面的内容删除并硬编码到一个变量中，然后 MySQL 错误就消失了。但是，使用`urldecode()`和不使用的两个查询完全相同，所以我有点困惑。

我进入了 php.net 文档页面`urldecode()`，并且有一个警告说使用`_GET`and `urldecode()`together 可能会导致意想不到的事情，并且`_GET`已经起到解码器的作用（或者至少这是我解释措辞的方式），所以我删除`urldecode()`但仍留在 中`_GET`，导致文本未被解码，所以我想我没有正确解释文档。

不`urldecode()`兼容 MySQL 查询？我相当肯定这是编码/解码的问题，因为我已经使用绕过编码/解码的硬编码信息测试了我的代码，并且工作正常。也许`urldecode()`是以某种方式将字符变成看起来相同但内部不同的特殊字符，因此 MySQL 无法读取它们？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-18T18:10:16.000

不要这样做。这是错的。当然，任何人都可以使用 a 结束查询`;`并开始一个新查询，删除所有内容或读出用户和密码。

一种简单且更好的方法是`www.example.com/index.php?q=hi`用作您的 URL，然后在服务器上（假设是 PHP）

```
$queryString = mysql_real_escape_string($_GET['q']);

$query = "AND name LIKE '%$queryString%'";

// Then replace $query for whatever you were using $_GET['q'] for before.
// Feel free to rename my variables what you like! 
```

这样，用户就不会搞砸了，而且 URL 看起来更干净。mysql_real_escape_string 函数通过转义使字符串在查询中安全使用。阅读[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)了解更多信息。

如果您仍然不相信这很有用，请考虑如果有人发布了一个会删除您的表格的链接，然后 Google 每周抓取一次会发生什么情况。只要 Google 碰巧经过，您的数据就会被删除。

一旦您对这项技术感到满意，请阅读[mod_rewrite](http://www.sitepoint.com/guide-url-rewriting/)（如果使用 Apache）以进一步清理 URL、[mysqli](http://php.net/manual/en/book.mysqli.php)以及它如何是 mysql 函数的改进版本，最后阅读有助于清理的[PHP 数据对象（PDO）](http://php.net/manual/en/book.pdo.php) PHP 起来就更厉害了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-19T17:26:51.593

Rich 有正确的总体思路，但比引用更好的是使用数据库参数。它本质上是在您的 SQL 查询中放置一个“变量标记”，然后单独传递变量。查询最终看起来像这样：

```
SELECT ID, VALUE1, VALUE2
FROM MY_TABLE
WHERE VALUE3 = :param 
```

然后在您的代码中，添加一个值来替换 for `:param`，然后将其与 SQL 一起发送到数据库。（在某些数据库库中，您会使用 ? 而不是 :parametername。）它比引用更好，原因有以下三个：

首先，您可以保持查询字符串不变，而不必每次都重新构建它，从而提高服务器的性能。

其次，如果您使用多个不同的参数多次向数据库发送相同的常量查询，数据库引擎可以缓存查询计划，从而提高数据库的性能。

第三，当您习惯于以参数化样式编写查询时，这会变得很自然，特别是如果您使用将参数列表作为参数的查询函数，因此很难出错。相比之下，很容易忘记引用某些内容，然后您不小心在程序中打开了一个安全漏洞。

参数化的具体工作方式取决于您使用的数据库和数据库访问库，但每个 SQL 数据库都支持它们。你应该看看它是如何为你正在使用的系统完成的。这确实是使用 SQL 的最佳方式，尤其是当您的输入来自 Internet 等不受信任的来源时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:27:09.073

`mysql_query()`在调用之后和调用之前的某个时间点，`mysql_fetch_array()`您应该检查查询是否返回 false，`mysql_error()`如果返回则打印。例如：

```
$result = mysql_query($query);
if (!$result) {
   die(htmlenitites(mysql_error())." when running <pre>".htmlenitites($query)."</pre>");
} 
```

但：

1.  你不应该使用 php 的 mysql 函数，你应该使用 PDO，你应该使用准备好的/参数化的查询。
2.  除非您真的信任客户端可能键入的任何内容，否则您不应该让 SQL 从客户端传递 - 例如，这是用于后端管理界面，即使那样，除非您真的需要它，否则这可能是不好的做法（就像您是编写 phpMySQLAdmin)

# unicode - c3 82 c2 bf是什么字符编码？

> ID：11546351
> 
> 赞同：9
> 
> 时间：2012-07-18T16:45:31.723
> 
> 标签：unicode, encoding

我有一个包含字节序列 c3 82 c2 bf 的文本数据源。在上下文中，我认为它应该是一个大写的希腊 Phi 符号 (Φ)。

无论如何，我无法弄清楚正在使用什么编码；我正在编写一个 Python 脚本来将这些数据处理到一个需要 Unicode 的数据库中，并且它会在这个特定的数据序列上抛出一个异常。

关于如何处理它的任何建议？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T17:13:25.940

解释为 UTF-8，c3 82 是“Â”U+00C2，c2 bf 是“¿”U+00BF，这没有多大意义，但它在技术上是有效的 UTF-8 数据，因此不应报告为字符级数据错误。解释为 UTF-16，它是 Hangul 音节，可能是 CJK 表意文字，取决于字节顺序，但仍然是正式有效的数据，尽管很可能不是什么意思。

这听起来像是双重转换的结果，但很难做出有根据的猜测。如果它代表 Φ，则 UTF-16 格式为 03 A6 或 A6 03，而 UTF-8 格式为 CE A6，与实际数据不太相似。有关数据来源的信息可能有助于猜测可能发生了什么转码。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-08T14:56:29.930

这可能是`Ñ`字符的双重转换。

`Ñ`**UTF-8**中的字符是：`0xc391`.

如果您尝试将已用 UTF-8 编码的字符从**LATIN-1**转换为**UTF** **-8**，您将得到：.`Ñ`**`0xc382c2bf`**

 **为什么？

1.  `0xc382`是来自**LATIN-1**字符的**UTF-8**翻译（带波浪号的 A） **`0xc3``Ã`**
***   `0xc2bf`是`¿`当您无法从**LATIN-1**转换字符时得到的字符（在**LATIN-1**`0x91`中是无效字符**

 ***** * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-16T14:47:30.407

FWIW，我最终`c3 82 c2 bf`从`&nbsp;`. 我没有深入研究转换，因为我可以简单地将那部分代码扔掉。可以说这`&nbsp;`是在由 wordpress (php) 插件处理的 html 电子邮件模板中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-24T09:34:06.890

我不知道原因。但也许有一个可能的场景。

二进制 x0xx 转换为 0xC2 x0xx

二进制 x1xx 转换为 0xC3 x0xx

所以添加了很多c2和c3。

这发生在哪里？在 ajax 调用的 url 查询字符串中发送非 ascii，Flask 服务器将执行此操作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-08-05T18:57:59.170

使用 $str = mb_convert_encoding($content, "UTF-8" , "UTF-16LE"); 转换为 utf-8 后，我从外部 utf-16 文档收到了这个字符 \xc3\x82 (PHP)

原始序列是 0xA0 0x00 ，转换器可能将其转换为 NBSP 的含义 .. 它是货币编号中千位分隔符的字符。nbsp 是 \xc2\xa0 所以现在我有成千上万的删除：

```
$price = str_replace(["\xc2\xa0","\xc3\x82"], '', $price); 
```******

# java - 安卓 - readLine(); 使我的应用程序崩溃

> ID：11546355
> 
> 赞同：-1
> 
> 时间：2012-07-18T16:45:41.100
> 
> 标签：java, android, arduino

我已经使用以太网[屏蔽在](http://www.arduino.cc/en/Main/ArduinoShields)[Arduino Leonardo](http://arduino.cc/en/Main/ArduinoBoardLeonardo)上设置了一个服务器。通过套接字连接，我可以将我的 Android 应用程序中的字符串发送到我可以成功读取的 Arduino。我的 Arduino 代码的一部分是：

```
if (client.available() > 0) {
    char thisChar = client.read();
    if (readString.length() < 30){
        readString.concat(thisChar);
    }
    if (thisChar == '\n') {
        if (readString.indexOf("connect") > 0) {
            client.print("connection_ok");
        }
        if (readString.indexOf("change") >= 0) {
            changeLedState();   // Set the LED on
        }
    }
} 
```

虽然我的 Android 代码是：

```
Socket s = new Socket("192.168.0.177",23);
PrintWriter out = new PrintWriter(s.getOutputStream(), true);
if (s.isConnected()){
     out.println("connect\n");
     BufferedReader r = new BufferedReader(new InputStreamReader(s.getInputStream()));
     String line = r.readLine();
} 
```

我的 Android 应用程序总是在`readLine();`. 如果我使用`out.print ("change");`，changeLedState 真的会发生，所以我知道我可以从我的 Android 应用程序中读取输出字符串，但我还没有设法将输入字符串从 Arduino 读取到 Android。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:19:36.970

尝试更改`indexOf("connect") > 0`为`indexOf("connect") >= 0`.

或者更好的是，使用类似`startsWith`（返回布尔值）的东西，而不是`indexOf`你真正的意思。

# adobe - 带有 MAMP Pro 的 xip.io 不起作用

> ID：11546356
> 
> 赞同：0
> 
> 时间：2012-07-18T16:45:42.157
> 
> 标签：adobe, mamp

这个问题之前已经提出过一次，但是建议的解决方案对我不起作用？

我已经通读了以下文章（您可以看到我与作者来回的评论）：[https ://blogs.adobe.com/shadow/2012/06/19/shadow-xip-io-virtual-hosts-工作流程简化/](https://blogs.adobe.com/shadow/2012/06/19/shadow-xip-io-virtual-hosts-workflow-simplified/)但没有任何建议有效。

重新盖章：

*   我在 MAMP Pro 中创建了以下“测试”主机：
    ![地图截图](../Images/4416119f5a7c9187709e43c4ef2d138f.png)
*   我已关闭网络共享
*   我已将 ServerAlias client.*.xip.io 添加到 MAMP Pro
*   我已经更新了 httpd.conf 文件（在里面`/private/etc/apache2`），所以虚拟主机行（`Include /private/etc/apache2/extra/httpd-vhosts.conf`）没有注释
*   我已经`/private/etc/apache2/extra`使用以下内容更新了 httpd-vhosts.conf 文件（在 内）...</li>

.

```
<VirtualHost>
    DocumentRoot "/path/to/files"
    ServerName test
    ServerAlias test.*.xip.io
</VirtualHost> 
```

...但是当我尝试通过[http://test.192.168.0.40.xip.io/](http://test.192.168.0.40.xip.io/)访问文件时，出现“无法连接”错误？

真的不明白为什么我不能让这个工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:56:56.470

您在 MAMP pro 屏幕截图中的配置将别名设置为 client.*.xip.io，而您用于尝试访问它的 URL 是 test.192.168.0.40.xip.io。

如果您将 MAMP Pro GUI 中的 Server Alias 配置切换为 test.*.xip.io，它可以工作吗？

我不相信您用于通过 /private/etc/apache2/* 文件手动配置虚拟主机的其他步骤将被 MAMP 拾取，因为 MAMP httpd.conf 和 httpd-vhosts.conf 文件位于不同的地点。

/Applications/MAMP/conf/apache/httpd.conf 和 /Applications/MAMP/conf/apache/extra/httpd-vhosts.conf 我认为？由于您已经获得了 MAMP Pro 并通过 GUI 进行了配置，因此这些应该已经反映了您的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T18:11:09.733

我知道这个答案有点晚了，但只是在寻找其他东西时遇到了它。我在我的机器上运行这个没有问题，所以我想我只是插话......

默认情况下，MAMP 在端口 8888 上为您的站点提供服务 - 您是否尝试过使用[http://test.192.168.0.40.xip.io:8888/](http://test.192.168.0.40.xip.io:8888/)访问您的站点？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:26:51.017

如果您使用的是**MAMP Pro 2.x**（似乎不需要配置主机文件，因为它由 MAMP 本身启用），您可能只需将 Adob​​e Shadow 友好 URL 添加到 MAMP 主机设置的别名部分：

服务器名称： *mobile.dev* / #my 网站“mobile”的常规 mamp 服务器 URL

别名： mobile.-- *MY-IP-Address--.xip.io* #Adobe Shadow 友好 URL

然后我在 Chrome 浏览器窗口中输入的别名 URL 就是别名 URL，它显示在我手机上的 Showdow 中。

注意：我使用带有 DHCP 的静态 IP 地址进行开发。在 MAMP Pro 2.x 中，您不能在别名字段中输入 * 字符！

**更新**：您也只能在

高级选项卡下的“*自定义虚拟主机常规设置”区域：*

ServerAlias mobile.*.xip.io

然后使用您的 IP 地址加载 URL：

*Chrome 中的*mobile.xx.xx.xx.xx.xip.io/**

# objective-c - 如何创建仅在objective-c中的一个类中使用的数据类型？

> ID：11546357
> 
> 赞同：1
> 
> 时间：2012-07-18T16:45:43.653
> 
> 标签：objective-c, ios, nsmutablearray

我想我已经看到了这一点，但我找不到关于它的文档，因为我认为我不知道正确的术语。我需要知道如何编写一个只在另一个类中使用的特殊类，因此可以完全写在另一个类的实现中。

基本上我需要一个专门的 NSMutableArray 可以做三件额外的事情：

*   一旦被要求删除最近的项目
*   将该项目存储在 last_most_recent_item 变量中
*   跟踪是否添加了新项目
*   *如果尚未*添加新项目，并且请求数组中的最后一个对象，则返回 last_most_recent_item 而不是实际的最后一个项目

但是，事情就是这样，我只需要在一个类中使用这个 SpecialNSArray。所以我想把声明和实现放在那个类中，而不是放在单独的文件中。我相信我已经看到这样做了。有谁知道这叫什么，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T16:56:51.260

为此，只需将新类添加到要使用它的类的实现文件中。我认为这被称为私人课程。

假设您的班级是 MyClass，改进后的数组是 MyClass.m 中的 MyArray

```
@interface MyArray
{

}
@end

@implementation MyArray

@end

@implementation MyClass

@end 
```

在这种情况下，MyArray 上的额外方法只有在从 MyClass 调用时才能被编译器看到。

请注意，Objective C 中没有什么是私有的，MyArray 上的这些方法可以在运行时从程序中的任何位置调用，只是这些方法会在编译时引发警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T16:48:40.827

我认为您正在描述 NSMutableArray 上的一个类别。

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)

```
YourClass.m
@interface NSMutableArray : (YourClassExtentions)
@end

@implementation NSMutableArray : (YourClassExtentions)
@end

@implementation YourClass()
@end 
```

您也可以在单独的 m 和 h 文件中创建类别，然后导入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:21:30.620

您可以简单地将类`@interface MyInternalClass ...`和`@implementation MyInternalClass ...`代码段放入“公共”类的 .m 文件中。在 .h 中添加`@class MyInternalClass;`一行，以便您可以在“公共”类的实例变量中声明指向该类的指针。

# batch-file - 如何在 yii 中使用批量插入

> ID：11546359
> 
> 赞同：1
> 
> 时间：2012-07-18T16:45:48.407
> 
> 标签：batch-file, insert, yii

请我在这里需要一个很大的帮助。我正在开发一个 yii 应用程序，我必须遍历我的表单并进行批量插入。我在 yii 中找到了 bacth update，但我看不到如何进行批量插入和验证。请帮忙。

这是我的观点：

```
<?php for($i=0;$i< $this->getDisplayArchModel();$i++) {?>
     <FIELDSET class="radios">
          <div class="row">
            <?php echo $form->labelEx($model,'competency_type'); ?>
    <?php echo $form->textField($model,'competency_type'); ?>
    <?php echo $form->error($model,'competency_type'); ?>
          </div>

         <div class="row">
    <?php echo $form->labelEx($model,'definition'); ?>
    <?php echo $form->textArea($model,'definition'); ?>
    <?php echo $form->error($model,'definition'); ?>
</div> 

          </fieldset>
       <?php } ?> 
```

控制器 ：：

```
public function actionDisplayArchModel()
    {

        $validateCat = $this->getDisplayArchModel();
        if($validateCat == NULL)
        $this->redirect(array('architecture'));

        $model = new CompetencyType;
        if(isset($_POST['CompetencyType']))
        {
            $model->attributes = $_POST['CompetencyType']; 
            if($model->validate()){
                foreach($_POST['CompetencyType'] as $value)
                {
                    echo $value;
                }

            }
        }
       $this->render('displayArchModel' ,array('model'=>$model));

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:39:04.503

有时我们想以批处理模式收集用户输入。也就是说，用户可以输入多个模型实例的信息并一次全部提交。我们称之为表格输入，因为输入字段通常以 HTML 表格形式呈现。

要使用表格输入，我们首先需要创建或填充模型实例数组，具体取决于我们是插入还是更新数据。然后我们从 $_POST 变量中检索用户输入数据并将其分配给每个模型。与单一模型输入的细微差别是我们使用 $_POST['ModelClass'][$i] 而不是 $_POST['ModelClass'] 检索输入数据。

更多关于收集[表格输入](http://www.yiiframework.com/doc/guide/1.1/en/form.table)

# c# - 骨骼模型的局部位置

> ID：11546361
> 
> 赞同：0
> 
> 时间：2012-07-18T16:45:51.890
> 
> 标签：c#, xna

我需要获取关于我的模型（汽车）的骨骼（比如车轮）的位置矩阵或位置向量。

我试过的 -

```
Vector3.Transform(mesh.BoundingSphere.Center , transforms[mesh.ParentBone.Index]*Matrix.CreateScale(o.Scaling ))) 
```

以上没有给出准确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:25:00.730

What you want is to calculate the absolute transforms for each bone. The [CopyAbsoluteBoneTransformsTo](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.model.copyabsolutebonetransformsto) method can do it for you.

It is equivalent to the following code:

```
 /// <summary>Calculates the absolute bone transformation matrices in model space</summary>
    private void calculateAbsoluteBoneTransforms() {

      // Obtain the local transform for the bind pose of all bones
      this.model.CopyBoneTransformsTo(this.absoluteBoneTransforms);

      // Convert the relative bone transforms into absolute transforms
      ModelBoneCollection bones = this.model.Bones;
      for (int index = 0; index < bones.Count; ++index) {

        // Take over the bone transform and apply its user-specified transformation
        this.absoluteBoneTransforms[index] =
          this.boneTransforms[index] * bones[index].Transform;

        // Calculate the absolute transform of the bone in model space.
        // Content processors sort bones so that parent bones always appear
        // before their children, thus this works like a matrix stack,
        // resolving the full bone hierarchy in minimal steps.
        ModelBone bone = bones[index];
        if (bone.Parent != null) {
          int parentIndex = bone.Parent.Index;
          this.absoluteBoneTransforms[index] *= this.absoluteBoneTransforms[parentIndex];
        }
      }

    } 
```

Taken from [here](http://blog.nuclex-games.com/tutorials/graphics/mesh-based-bone-animation/).

# c# - 具有透明背景的 UI 不显示下一个立即层

> ID：11546364
> 
> 赞同：3
> 
> 时间：2012-07-18T16:45:54.023
> 
> 标签：c#, winforms, background, transparent

如果我们将任何 UI 的背景设置为透明，则它不会显示其下方的内容，即任何 UI 或容器。相反，它显示了表单的默认背景，即最下方。

如何解决这个透明度问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:50:36.767

不幸的是，这是设计使然：

[http://support.microsoft.com/kb/943454](http://support.microsoft.com/kb/943454)

> WinForms 中的透明控件相对于它们的父控件是透明的，而不是相对于其他控件。WinForms 中的透明度更像是伪装，而不是真正的透明度。透明控件实际上并不能让您通过表单看到它背后的控件。它要求其父级在“透明”控件上绘制自己的背景。这就是为什么透明控件显示其背后的窗体，但覆盖任何其他控件的原因。

链接中有一些代码演示了解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:55:50.117

Windows 窗体控件不支持真正的透明度。透明 Windows 窗体控件的背景由其父级绘制。

为您的控件提供透明背景色 这将使您的控件支持透明背景色。

```
SetStyle(ControlStyles.SupportsTransparentBackColor, true);

this.BackColor = Color.Transparent; 
```

# sql - SQL 语句“缺少参数”在单机上失败

> ID：11546366
> 
> 赞同：1
> 
> 时间：2012-07-18T16:46:25.343
> 
> 标签：sql

我正在使用 vb.net，并且我创建了一个用于 OleDBConnection 对象的 sql 语句。当我运行我的 sql（如下）时，ExecuteReader 会抛出一个错误（也在下面）。问题是它可以在运行它的 50 多台 en-US 机器上运行，但现在我在德国有了我的第一个客户，但它在他们的机器上失败了。我将我的开发机器设置为德语设置以尝试复制该问题，但它对我来说效果很好。我复制了他们的确切数据文件，它可以在我的机器上运行。所以看起来它与它是一台非美国机器有关吗？

下面是 SQL 语句：

```
SELECT Val(IIf(IsNumeric([Sequence]), [Sequence], '0')), * 
FROM MyTable 
ORDER BY SomeOtherField, 1 
```

所以简而言之，我想次要按序列列排序，但如果序列不是数字，我只会给它一个“0”，以便它允许根据动态列“1”进行排序' 我正在即时创建/选择。

这是德国机器上的错误：Fuer mindestens einen erforderlichen Parameter wurde kein Wert angegeben。
（粗略翻译：对于至少一个必需的参数没有指定值）

有人对我的问题可能有任何想法吗？提前感谢您提供给我的任何帮助。

-格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:06:37.037

这只是一个猜测。但是，尝试将 iif() 替换为 case 语句：

```
SELECT (case when IsNumeric([Sequence]) = 1 then [Sequence]
             else '0'
        end),
       mt.* 
FROM MyTable mt
ORDER BY SomeOtherField, 1 
```

我怀疑你的其他系统正在使用Access，而德国系统正在使用SQL Server。SQL Server 无法识别 iif。

# javascript - 检测 google.maps.MarkerImage 对象是否为空

> ID：11546369
> 
> 赞同：1
> 
> 时间：2012-07-18T16:46:38.047
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一个由几个标记填充的谷歌地图。我从[http://chart.apis.google.com/chart?chst=d_map_xpin_icon&chld=pin|glyphish_star|FFFF00|0000FF](http://chart.apis.google.com/chart?chst=d_map_xpin_icon&chld=pin|glyphish_star|FFFF00|0000FF)获取我的标记。我的一些客户端浏览器安全性阻止这些图像被下载，我想检测到这一点并将它们恢复为默认图像。

```
var gmMarkerImage = new google.maps.MarkerImage(
  "http://chart.apis.google.com/chart?chst=
    d_map_xpin_icon&chld=pin|
    glyphish_star|
    FFFF00|
    0000FF"
) 
```

我如何检测 gmMarkerImage 对象是否不是图像或空的？或者我如何确定我没有收到来自 chart.apis.google.com 网站的任何内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:01:37.743

我认为 Google Maps API 不会让您访问底层 DOM 对象。您收到的`MarkerImage`对象仅包含有关标记的信息，将其呈现为 HTML 或 DOM 对象将读取该信息。

但是，如果我们退后一步，您的用户无法为他们的图像使用此自定义 URL 的原因可能是他们不信任非 SSL 引用（真的吗？）。或者他们通常不信任chart.google.com 域（这会被推迟，但仍然如此）。您可以通过在未连接到地图的页面中包含不可见图像并处理`onError`此图像上的事件来测试这一点。图像上的An`onError`通常表示资源无法加载，通常是因为 404、403 等...当此图像收到错误时，您可以遍历所有标记并将其 URL 设置为后备。

# cuda - cudaMalloc 分段错误高值

> ID：11546375
> 
> 赞同：1
> 
> 时间：2012-07-18T16:46:56.650
> 
> 标签：cuda, segmentation-fault

**首先是错误：** 分段错误（在突出显示的 cudaMalloc 行，如果我创建 > 大约 61432）

```
unsigned int xarray[a];
unsigned int *dev_a;
int result[33*a];
int *dev_result;

**cudaMalloc((void **)&dev_a,a * sizeof(unsigned int));**

cudaMemcpy(dev_a,xarray,a*sizeof(int),cudaMemcpyHostToDevice);

kernel<<<a,66>>>(dev_a,dev_result);

cudaMemcpy(result,dev_result,33*a*sizeof(int),cudaMemcpyDeviceToHost); 
```

我在上面提到“大约”的原因是因为有时它在 a = 61432 时有效，有时则无效。我无法理解为什么。

此外，这仅适用于 1D 网格块的启动。我的意图是启动一个 3D 网格 [a*a*a]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:02:56.677

您的代码存在段错误，因为数组`result`太大。实际上，您不能真正期望`33 * 61432`在堆栈上静态分配大小数组。

相反，使用 a`std::vector`动态分配数组并将指向指针数据的指针传递给`cudaMemcpy`：

```
#include <vector>
...
std::vector<int> result(33 * 1);
...
cudaMemcpy(&result[0], dev_result, 33 * a * sizeof(int), cudaMemcpyDeviceToHost); 
```

# jquery - 用于自定义输入的 jQuery ComboBox hack

> ID：11546377
> 
> 赞同：0
> 
> 时间：2012-07-18T16:47:05.397
> 
> 标签：jquery, combobox

我正在使用[此组合框](http://jqueryui.com/demos/autocomplete/#combobox)的代码。

我认为通过注释掉这部分我会很巧妙，这将允许文本输入超出不匹配的查询。

```
/*Commented out to allow user input
if (!valid) {
    remove invalid value, as it didn't match anything
    $(this).val("");
    select.val("");
    input.data("autocomplete").term = "";
    return false;
}*/ 
```

我的聪明才智遇到的问题是在 JS 中验证表单时无法获得此值。关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-08T13:51:03.520

自发布并回答此问题以来，已修改 JQuery UI 组合框的代码。问题中提供的链接仍然有效，但那里的代码与该线程中讨论的代码不同。

这是对新组合框代码（截至 2015 年 9 月 2 日）的修复，其工作方式与 Peter 的方法类似。

先去掉这个块，防止自定义值被删除：

```
this.input
  .val( "" )
  .attr( "title", value + " didn't match any item" )
  .tooltip( "open" );
this.element.val( "" );
this._delay(function() {
  this.input.tooltip( "close" ).attr( "title", "" );
}, 2500 );
this.input.autocomplete( "instance" ).term = ""; 
```

替换为此块以将自定义值添加为选择选项并将其设置为当前值：

```
this.element.append('<option>' + this.input.val() + '</option>'); //Add the new option
this.element.val(this.input.val()); //select the new option 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T22:55:38.023

为什么不像这样将“无效”输入添加到选择元素的末尾

```
if (!valid) {
    select.append('<option>' + $(element).val() + '</option>'); //Add the new option
    select.val($(element).val()); //select the new option
} 
```

仅当您在选择中使用纯文本值时，这才有意义

我在寻找答案时找到了你的代码，但在阅读了你的答案后意识到我必须做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T14:42:46.120

所以我解决了这个问题。我创建了一个隐藏变量：

```
<input id="EnterYourOwnValue" type="hidden" value="Enter New... or Select" /> 
```

然后我编辑了 jquery 组合的一部分以保存输入到 EnterYourOwnValue 中的值：

```
 if (!valid) {
                                $("#EnterYourOwnValue").val($(this).val());
                                /*Commented out to allow user input
                                //remove invalid value, as it didn't match anything
                                $(this).val("");
                                select.val("");
                                input.data("autocomplete").term = "";
                                return false;
                                */
                            } 
```

或将选定的值保存到其中：

```
 select: function (event, ui) {
                            $("#EnterYourOwnValue").val(ui.item.option.value);
                        ui.item.option.selected = true;
                        self._trigger("selected", event, {
                            item: ui.item.option
                        }); 
```

现在，自动完成组合框被黑客攻击为一个选择或在一个框中输入您自己的值！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-22T00:24:17.163

这就是我在使用多个组合框时所做的

当然，我也必须进行隐藏输入。

```
var thisinput = this.element.attr("name");
var value = this.input.val();

    if(thisinput == "YourComboBoxName"){
    $("#EnterYourOwnValue").val(value);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T04:29:52.997

花了很长时间试图让它与多个组合框一起工作。

为了让这篇文章与多个组合框一起工作，我必须添加这个：

 ``if($(select).attr('name') == YourComboBoxName) $("#EnterYourOwnValue").val($(this).val())``

# android - 未显示 Android 通知

> ID：11546386
> 
> 赞同：2
> 
> 时间：2012-07-18T16:47:26.940
> 
> 标签：android, android-notifications

我为状态通知设置了一些代码，根据 eclipse 的代码没有任何问题。但是，当我启动它时，代码不会运行。那么它绕过通知并直接进入主要活动。为什么我的代码会跳过通知？

```
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.os.Bundle;

public class NoteMe extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    int notifID = getIntent().getExtras().getInt("NotifID");
    Intent i = new Intent("com.example.something.MainActivity");

    PendingIntent detailsIntent = PendingIntent.getActivity(this, 0, i, 0);

    NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    Notification notif = new Notification(R.drawable.ic_launcher,
            "STOP LOOK LISTEN!", System.currentTimeMillis());

    CharSequence message = "This is your alert, courtesy of the AlarmManager";
    notif.setLatestEventInfo(this, message, message, detailsIntent);
    notif.vibrate = new long[] { 100, 250, 100, 500 };
    nm.notify(notifID, notif);
    finish();
}

} 
```

其次是清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.something"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="16" />

<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.CAMERA" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
            <activity android:name=".NoteMe" >
        <intent-filter>
            <action android:name="com.example.something.NoteMe" />
            <category android:name="android.intent.category.DEFAULT" /> 
        </intent-filter>
    </activity>
</application>

</manifest> 
```

和日志猫！--其实logcat里面什么都没有（奇怪）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:37:49.647

在清单中，如果您`<action android:name="android.intent.action.MAIN" />`从 MainActivity 的意图过滤器中删除 并将其放入 NoteMe 活动的意图过滤器中，则该活动应该在启动时运行，而不是另一个。您只需在调用之前从 NoteMe 活动启动 MainActivity `finish()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:09:27.377

你的`onCreate()`方法不见了`setContentView()`。这应该在 之后调用`super.onCreate(savedInstanceState)`。这告诉 Android 您希望将哪个 XML 布局与`Activity`.

# php - Shopify API 通过使用 PHP 进行交易的订单部分退款

> ID：11546390
> 
> 赞同：1
> 
> 时间：2012-07-18T16:47:41.233
> 
> 标签：php, api, shopify

（我是第一次发帖，所以请原谅我缺乏正确的格式，如果这个问题已经以某种形式或方式得到了回答）

**问题：** Shopify API - 通过创建新交易的订单部分退款（反对简单地取消订单）

**原因：**在不取消订单的情况下给客户部分退款

**问题：**在将“创建事务”发送到 shopify api 时查询崩溃，没有错误，没有启动 try 和 catch，并且查询到 shopify 后的代码也被忽略。

**用于交易的 Shopify 开发人员 API XML/JSON：http:** [//api.shopify.com/transactions.html](http://api.shopify.com/transactions.html)

**目前使用 Sandeepsheety 的 PHP API 代码：** [https ://github.com/sandeepshetty/shopify.php/blob/master/README.md](https://github.com/sandeepshetty/shopify.php/blob/master/README.md)

```
<?php
//-------------------------------------------------------------------------------
//PHP Code Begins
//NOTE: [Does return correct values for the Order through GET through id=135264996 and,
// transaction GET data is verified as well - Test Order Total = $94.50 and,
// tested a few other orders ids with the same result.]
//-------------------------------------------------------------------------------

       //Does connect and I have verified with a few GETS and even a couple cancellations
        $shopify = shopify_api_client($SHOPIFY_STORE_URL, NULL, $SHOPIFY_API_KEY, $SHOPIFY_TOKEN, true);

       //Based on Create Transactions: (POST /admin/orders/#{id}/transactions.json)
        $jsonURL= "/admin/orders/135264996/transactions.json";

        $query = $shopify('POST', $jsonURL, array('kind'='refund', 'amount'=10));
       //NOTHING HAPPENS and Code Stops HERE

        echo "Passed";  //IGNORED
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T18:16:41.290

Transaction API 仅支持“捕获”作为种类。服务器返回 403 Forbidden，文本为“当前仅支持捕获”。

shopify.php 不能正确处理该错误，但这是您遇到的问题。

# internet-explorer-8 - internet-explorer-8 选项卡

> ID：11546391
> 
> 赞同：0
> 
> 时间：2012-07-18T16:47:46.790
> 
> 标签：internet-explorer-8

我在 asp.net 中创建了一个应用程序

如果我在 2 个选项卡 internet-explorer-8 中打开了相同的应用程序，它们是否共享相同的会话？如果不是 internet-explorer-8 会怎样？

我的意思是像chrome或mozilla这样的浏览器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:05:00.037

是的，他们共享同一个会话。IE8、IE9、Firefox 和 Chrome。

Firefox 和 Chrome 具有新模式（私人浏览和隐身），允许使用具有不同会话的新窗口。

# python - 如何将 gtk.DrawingArea 放入 gtk.Layout

> ID：11546395
> 
> 赞同：0
> 
> 时间：2012-07-18T16:48:11.080
> 
> 标签：python, gtk, gdk

我有一些带有圆圈的 gtk.DrawingArea，如果我将 DA 直接放入窗口中 - 一切正常，但如果我将其放入 gtk.Layout 中，我放入同一个窗口中 - 我看不到 DA . 请帮帮我。

```
import pygtk
pygtk.require('2.0')
import gtk
import random,math

class EggClockFace(gtk.DrawingArea):
    def __init__(self):
        gtk.DrawingArea.__init__(self)
        self.connect("expose_event", self.expose)

    def expose(self, widget, event):
        print 'expose'
        self.context = widget.window.cairo_create()

        # set a clip region for the expose event
        self.context.rectangle(event.area.x, event.area.y,
                           event.area.width, event.area.height)
        self.context.clip()

        self.draw(self.context)

        return False

    def draw(self, context):
        rect = self.get_allocation()
        x = rect.x + rect.width / 2
        y = rect.y + rect.height / 2

        radius = min(rect.width / 2, rect.height / 2) - 5

        # clock back
        context.arc(x, y, radius, 0, 2 * math.pi)
        context.set_source_rgb(1, 1, 1)
        context.fill_preserve()
        context.set_source_rgb(0, 0, 0)
        context.stroke()

        #context.restore()

class LayoutExample:
    def WindowDestroy(self, widget, *data):
        gtk.main_quit()
    def __init__(self):
        window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        window.set_title("Пример Layout")
        window.set_default_size(300, 300)
        window.connect("destroy", self.WindowDestroy)
        self.layout = gtk.Layout(None, None)
        self.layout.set_size(600, 600)

        bark=EggClockFace()
        #self.layout.put(bark, 0, 0)
        #window.add(self.layout)

        window.add(bark) #IF I COMMENT THIS LINE, AND UNCOMMENT PREVIOUS TWO - I CANT SEE THE CIRCLE
        window.show_all()

def main():
    # enter the main loop
    gtk.main()
    return 0

if __name__ == "__main__":
    LayoutExample()
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:44:38.287

您应该为绘图区域设置初始大小（使用[set_size_request](http://www.pygtk.org/docs/pygtk/class-gtkwidget.html#method-gtkwidget--set-size-request)）。尝试添加`self.set_size_request(300, 300)`并`__init__`运行应用程序。
希望这可以帮助！

# regex - 正则表达式在单词“require”和“function”之间查找单词“checkout”

> ID：11546399
> 
> 赞同：0
> 
> 时间：2012-07-18T16:48:21.103
> 
> 标签：regex

我试图找出在 IntelliJ IDEA 中使用的正则表达式，这样我就可以找到我正在导入结帐模块的所有文件。

示例代码：

... 要求（['管理员'，'结帐'，'付款']，函数（...

很可能是一个简单的正则表达式...

谢谢，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:53:35.067

在没有看到更多代码的情况下，我只能指出最明显的解决方案：

```
require.*?checkout.*?function 
```

将匹配“‘require’和‘function’之间的‘checkout’这个词”。这是一个[例子](http://regexr.com?31im8)。那是你的想法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:57:20.853

### 使用捕获表达式

您可以使用以下正则表达式将第一个反向引用或捕获表达式设置为*结帐：*

```
echo "require([ 'admin', 'checkout', 'payment' ], function( ..." |
    perl -ne 'print "$1\n" if /\badmin\b.*\b(checkout)\b.*\bfunction\b/' 
```

在这个 Perl 示例中，*$1*设置为您想要的值。您的正则表达式引擎可能会提供其他工具来存储和检索捕获组。

# android - 当我按下后退按钮时如何保持 CountDownTimer 运行

> ID：11546400
> 
> 赞同：1
> 
> 时间：2012-07-18T16:48:21.083
> 
> 标签：android, timer, countdowntimer

我有一个更新 TextView 的 CountDownTimer，但是当我按下后退按钮时它会停止。

```
CountDownTimer timer = new CountDownTimer(600000, 100) {

    public void onTick(long millisUntilFinished) {
        calendar.setTimeInMillis(millisUntilFinished);

        cron.setText(sf.format(calendar.getTime()));
    }

    public void onFinish() {
    }
}; 
```

当我按下后退按钮并且活动被破坏时，如何保持它运行？

PS：定时器启动时我也启动了一个GPS服务，有没有办法把CountDownTimer放在服务中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:59:41.040

如果您的计时器需要超出您的生命周期`Activity`，那么它不属于那里。您当然可以将它放入一个`Service`或另一个可以驻留在内存中的对象（如单例）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:15:34.073

正如 prashant 和 Devunwire 指出的那样，您需要使用服务。确保`startService()`在绑定之前调用它，即使调用的 Activity 被销毁，这也会导致服务保持活动状态。

还要确保服务`stopSelf()`在计时器完成并完成它应该做的任何事情后自行停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T16:56:50.287

我认为应该可以将倒数计时器放在服务中。您可以通过向服务发送意图来触发计时器启动。此外，您将不得不使用某种机制（例如回调、意图或信使）将更新时间传递回您的 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T17:08:29.473

覆盖后退按钮，然后使其行为类似于主页按钮。这样你的活动就不会被破坏。也就是说，我不认为这被认为是“好的做法”。

要做到我所说的，您只需将其放入您的活动课程中。

```
@Override
public void onBackPressed() {
    moveTaskToBack(true);
} 
```

无论您做什么，作为一种优化，您应该确保如果 TextView 在屏幕上不可见，则不会更新 TextView。这应该可以节省电池寿命，并可能防止创建将减少垃圾收集的字符串。

# c++ - 在 MinGW 中导入内联函数

> ID：11546403
> 
> 赞同：5
> 
> 时间：2012-07-18T16:48:27.770
> 
> 标签：c++, dll, linker, mingw, inline

我正在使用一个在其标头中定义内联函数的共享库。

这是一个简化的测试用例，如链接到库的编译单元所见（对于库所见的版本，只需替换`dllimport`为`dllexport`）。

```
class __declspec(dllimport) MyClass {
public:
    int myFunc2();
    int myFunc1();
};

inline int MyClass::myFunc2(void) {
    return myFunc1();
}

inline int MyClass::myFunc1(void) {
    return 0;
} 
```

编译它会给出警告：

> 警告：“int MyClass::myFunc1()”在被 dll 链接引用后重新声明，没有 dllimport 属性[默认启用]

请注意，定义函数的顺序很重要，因为将定义放在定义`myFunc1`之前`myFunc2`不会产生警告。

另请注意，此代码在 Visual C++ 下编译时不会出现警告。这些警告至少是针对 MinGW 的，一般来说可能是针对 GCC 的。编辑：我想到我可能必须验证警告是否未被项目设置的标志之一禁止。

我的问题是：

*   为什么会有这种行为？
*   在类声明`myFunc1`中声明可以`inline`解决问题。这是为什么 ？这也违反了[推荐](http://www.parashift.com/c++-faq/where-to-put-inline-keyword.html)的做事方式。
*   还有另一种（更好的？）方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T21:30:55.063

问题的出现是因为 dllimport 的工作方式有一些魔力，这通常意味着您只需要在第一次声明时使用它。

基本上，当您将函数声明为 dllimport，然后随后使用相同声明（除了 dllimport 之外）重新声明该函数时，第二个声明会隐式获取 dllimport。如果重新声明不完全相同，则不会获得隐式 dllimport。

所以这里发生的是你首先将函数声明为 dllimport/non-inline，然后将其声明为 non-dllimport/inline。将内联添加到第一个声明可以解决问题，因为第二个声明会隐式变为 dllimport。或者，`__declspec(dllimport)`在第二个声明中添加 a 应该可以解决问题。

请注意，重新排序定义会消除警告，因为警告是关于在重新声明之前使用它。通过重新排序，您在重新声明之前不再使用它，因此您不会收到警告，尽管它将使用非 dllimport 版本（即，它永远不会使用 dll 中的函数版本）。

另请注意，使用内联 dllimport 是危险的。任何针对 dll 构建的程序都可能在某些地方使用内联函数，而在其他地方使用非内联函数（来自 dll）。即使这两个函数现在相同，dll 的未来版本也可能会更改并具有不同的实现。此时，如果使用新版本的 dll 运行，旧程序可能会开始出现异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-02T03:11:07.623

克里斯多德回答的更多信息：

我用[MSVC 2017](https://godbolt.org/g/Kps5Hs)和 MinGW-w64 7.2.0 进行了测试；在这两种情况下，在启用优化的情况下，尽管有警告， `myFunc1()`from的调用仍会解析为内联版本。`myFunc2`哪怕身体`myFunc1`被挪到了下方`main()`。

所以我的初步结论是忽略这个警告是安全的。

* * *

为了干净编译，在 MinGW-w64 中似乎唯一可行的方法是将类定义中的函数声明标记为`inline`. 编译器不允许应用于`__declspec(dllimport)`类外函数定义。

我一直无法确定是否有 g++ 的警告标志会专门禁用此警告。

# asp.net - 内容页面卸载事件

> ID：11546414
> 
> 赞同：0
> 
> 时间：2012-07-18T16:48:59.940
> 
> 标签：asp.net, event-handling, master-pages

我有一个内容页面，上面有两个按钮 - DoTransactionButton 和 CancelTranButton 我有一个会话状态 ["TransactionDone"] (True of False)。我设置 ["TransactionDone"]= false on - 页面不回发。当单击 DoTransaction 按钮时，我将其设置为 True。

现在我想在离开同一页面时捕获此信息，并在未单击 DoTransaction 时调用某些函数。如果我需要捕获可以调用此函数的内容页面的某些事件，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:13:31.313

我已经通过覆盖尝试在内容页面上使用 OnUnload 事件，但首先调用 Page_Load，然后调用 OnUnload。时刻页面是第一次加载。

# python - 读取文件并显示该文件中名称的总和

> ID：11546420
> 
> 赞同：0
> 
> 时间：2012-07-18T16:49:21.453
> 
> 标签：python, file

我希望执行的最终代码是读取名为“names.txt”的文本文档中的一串名称。然后告诉程序计算该文件中有多少名称并显示名称的数量。到目前为止，我的代码旨在显示文本文件中数字的总和，但它与我现在需要的程序足够接近，我想我可以重新编写它以收集字符串/名称的数量和显示它而不是总和。

这是到目前为止的代码：

```
def main():
    #initialize an accumulator.
    total = 0.0

    try:
        # Open the file.
        myfile = open('names.txt', 'r')

        # Read and display the file's contents.
        for line in myfile:
            amount = float(line)
            total += amount

        # Close the file.
        myfile.close()

    except IOError:
        print('An error occured trying to read the file.')

    except ValueError:
        print('Non-numeric data found in the file.')

    except:
        print('An error occured.')

# Call the main function.
main() 
```

我对 Python 编程还是很陌生，所以请不要对我太苛刻。如果有人能弄清楚如何重新设计它以显示数字/名称的数量而不是数字的总和。我将不胜感激。如果这个程序不能重做，我很乐意接受一个新的解决方案。

编辑：这是“names.txt”的示例：

约翰

玛丽

保罗

安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:58:12.957

```
fh = open("file","r")
print "%d lines"%len(fh.readlines())
fh.close() 
```

或者你可以做

```
 fh=open("file","r")
 print "%d words"%len(fh.read().split())
 fh.close() 
```

所有这些都是现成的信息，如果你付出一些努力并不难找到......只是得到答案通常会导致课程不及格......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:00:26.500

考虑到文本文件中的名称是按行分隔的。

```
myfile = open('names.txt', 'r')
lstLines = myfile.read().split('\n')

dict((name,lstLines.count(name)) for name in lstLines) 
```

这将创建每个名称的字典，并具有其出现次数。

在列表中搜索特定名称的出现，例如“name1”

```
lstLines.count('name1') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:01:14.250

假设名称使用空格分隔：

```
def main():
    #initialize an accumulator.
    total = 0.0

    try:
        # Open the file.
        myfile = open('names.txt', 'r')

        # Read and display the file's contents.
        for line in myfile:
            words = line.split()
            total += len(words)

        # Close the file.
        myfile.close()

    except IOError:
        print('An error occured trying to read the file.')

    except ValueError:
        print('Non-numeric data found in the file.')

    except:
        print('An error occured.')

# Call the main function.
main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T17:02:05.827

如果您只想计算文件中的行数

```
# Open the file.
myfile = open('names.txt', 'r')

#Count the lines in the file
totalLines = len(myfile.readlines()):

# Close the file.
myfile.close() 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-18T17:05:27.357

使用`with`语句打开文件。即使发生异常，它也会正确关闭文件。您可以省略文件模式，它是默认的。

如果每个名称都在自己的行中并且没有重复：

```
with open('names.txt') as f:
    number_of_nonblank_lines = sum(1 for line in f if line.strip())
name_count = number_of_nonblank_lines 
```

任务非常简单。从新代码开始，以避免为问题代码累积未使用/无效。

如果您只需要计算文件中的行数（如`wc -l`命令），那么您可以使用`.count('\n')`方法：

```
#!/usr/bin/env python
import sys
from functools import partial

read_chunk = partial(sys.stdin.read, 1 << 15) # or any text file instead of stdin
print(sum(chunk.count('\n') for chunk in iter(read_chunk, ''))) 
```

另请参阅，[为什么在 C++ 中从标准输入读取行比 Python 慢得多？](https://stackoverflow.com/q/9371238/4279)

# tsql - 填写缺失日期，添加默认数字

> ID：11546421
> 
> 赞同：1
> 
> 时间：2012-07-18T16:49:26.200
> 
> 标签：tsql

假设我们有下面的日期表，也假设今天是 2012 年 1 月 13 日：

```
DateKey    | AvailabilityPerc  
-----------------------------
2012-01-01 | 79  
2012-01-02 | 80  
2012-01-03 | 85  
2012-01-07 | 75  
2012-01-09 | 90 
```

脚本应该做两件事：
1\. 填写从 2012 年 1 月 1 日到三天前的缺失日期，即 2012 年 1 月 10 日（当前日期减去三天）。
2\. 仅对于新行，使用默认数字填写 AvailabilityPerc 列，例如 100。

结果表应如下所示：

```
DateKey    |  AvailabilityPerc
-------------------------------
2012-01-01 | 79 
2012-01-02 | 80  
2012-01-03 | 85  
2012-01-04 | 100  
2012-01-05 | 100  
2012-01-06 | 100  
2012-01-07 | 75  
2012-01-08 | 100  
2012-01-09 | 90  
2012-01-10 | 100 
```

非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:02:19.960

尝试这样的事情：

```
with temp as 
(
   select DateAdd(d, -5,GETDATE()) as d, 23 as val
   UNION
   select DateAdd(d, -3,GETDATE()), 44 as val
   UNION
   select DateAdd(d, -1,GETDATE()), 55 as val
), dates as
(
   SELECT MyDate = CONVERT(DATETIME,'01/01/2012'), 100 as val
   UNION ALL
   SELECT MyDate = DATEADD(D,1,MyDate), 100 as val
   from dates
   WHERE MyDate < DATEADD(D,-3,GETDATE())
)

SELECT d.MyDate, COALESCE(t.val, d.val) FROM dates d
LEFT JOIN temp t
ON Convert(varchar, d.MyDate, 101) = Convert(varchar, t.d, 101)
OPTION (MAXRECURSION  365) 
```

# devise - 设计资源在播种后不登录

> ID：11546422
> 
> 赞同：0
> 
> 时间：2012-07-18T16:49:29.397
> 
> 标签：devise, ruby-on-rails-3.2

# 目标

我有一个需要在数据库中播种的员工模型——它不能是“可注册的”。它不需要是“可确认的”。

在seeds.rb中，我有：

```
Employee.destroy_all
Employee.create(:email => "me@company.com", :password => "password", :password_confirmation => "password") 
```

# 问题

我无法使用员工的凭据登录。闪存消息指出：

> 无效的电子邮件或密码。

员工肯定在数据库中。这是控制台输出：

```
1.9.2p290 :048 > Employee.last
Employee Load (1.0ms)  SELECT "employees".* FROM "employees" ORDER BY "employees"."id" DESC LIMIT 1
=> #<Employee id: 1, email: "me@company.com", encrypted_password: "$2a$10$QElm.sbv47i.F2H8P5pIvejzn4IeQbe3S8Rjvh34jp/g...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, created_at: "2012-07-18 16:00:09", updated_at: "2012-07-18 16:00:09"> 
```

登录尝试不会增加员工记录上的 sign_in_count。

# 设置

我的设计设置应该是正确的，但我想知道我是否有一个洞。

在雇员.rb 中：

```
devise :database_authenticatable, :recoverable, :rememberable, :trackable, :validatable 
```

在 routes.rb 中：

```
devise_for :employees 
```

在 schema.rb 中：

```
create_table "employees", :force => true do |t|
  t.string   "email",                  :default => "",    :null => false
  t.string   "encrypted_password",     :default => "",    :null => false
  t.string   "reset_password_token"
  t.datetime "reset_password_sent_at"
  t.datetime "remember_created_at"
  t.integer  "sign_in_count",          :default => 0
  t.datetime "current_sign_in_at"
  t.datetime "last_sign_in_at"
  t.string   "current_sign_in_ip"
  t.string   "last_sign_in_ip"
  t.datetime "created_at",                                :null => false
  t.datetime "updated_at",                                :null => false
end

add_index "employees", ["email"], :name => "index_employees_on_email", :unique => true
add_index "employees", ["reset_password_token"], :name => "index_employees_on_reset_password_token", :unique => true 
```

表格：

```
<h2>Sign In</h2
<%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>

  <%= f.label :email %>
  <%= f.email_field :email %>

  <%= f.label :password %>
  <%= f.password_field :password %>

  <% if devise_mapping.rememberable? -%>
    <fieldset class="checkbox_container">
      <%= f.check_box :remember_me %> <%= f.label :remember_me %>
    </fieldset>
  <% end -%>

  <div class="button_container">
    <%= f.submit "Sign in", :class => "button secondary" %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:16:15.800

重新启动服务器解决了这个问题。

# task-parallel-library - .Net 4.5 Svcutil 生成两个同名操作（Method 和 MethodAsync）

> ID：11546431
> 
> 赞同：15
> 
> 时间：2012-07-18T16:50:13.827
> 
> 标签：task-parallel-library, visual-studio-2012, svcutil.exe, .net-4.5, async-await

我正在使用 svcutil a la 使用预定义的 wsdl：

```
svcutil some_service.wsdl 
```

生成的方法之一具有以下签名：

```
[System.ServiceModel.OperationContractAttribute(Action="http://ws.example.org/SubmitData", ReplyAction="*")]
SubmitDataResponse SubmitData( SubmitDataRequest request ) 
```

虽然 VS2010/.net35 中的 scvutil 仅生成上述内容，并且 VS 启动服务没有问题，但 VS2012/.net45 中的 svcutil 程序也会生成带有签名的方法

```
[System.ServiceModel.OperationContractAttribute(Action="http://ws.example.org/SubmitData", ReplyAction="*")]
Task<SubmitDataResponse> SubmitDataAsync( SubmitDataRequest request ); 
```

这会导致运行时异常：

> System.InvalidOperationException：在同一个合约中不能有两个同名的操作，MyType 类型的 SubmitDataAsync 和 SubmitData 方法违反了此规则。您可以通过更改方法名称或使用 OperationContractAttribute 的 Name 属性来更改其中一项操作的名称。

我可以通过删除 Async 附加方法或简单地使用 VS2010 中的 svcutil 来解决此问题。但我想知道为什么 svcutil 会生成一个导致运行时异常的接口（这是一个错误吗？），以及我是否应该做一些额外的事情来使它工作。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-26T09:03:17.890

默认行为似乎已更改。如果您提供*/syncOnly*参数，它会为我保留旧行为。

```
 /syncOnly                          - Generate only synchronous method
                                  signature. Default: generate synchronous
                                  and task-based asynchronous method
                                  signatures. 
```

# html - 用于格式化 html 显示的 webBrowser 控制意见

> ID：11546433
> 
> 赞同：1
> 
> 时间：2012-07-18T16:50:27.660
> 
> 标签：html, winforms

我正在处理通过 asp.net Web 应用程序输入的经过精心格式化的 HTML 内容。在部署时，我们为我们的 Windows 产品创建了一个包含所有这些内容的数据库。目前我们正在使用 syncfusion HTMLui 控件在我们的软件中呈现此内容，但是该控件不再正确显示内容。作为一个测试用例，我重新创建了一个我们使用 HTML 内容的表单，并用 webBrowser 控件替换了所有 syncfusion 控件，这些控件完美地显示了 HTML。所以我的问题是网络浏览器控件在不同系统上的行为是否相同。例如，它会在 XP 和 WIN7 上呈现相同的效果吗？控件是否依赖于用户系统上的 IE 版本？还是 webBrowser 控件的呈现在所有系统中都相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:52:45.433

从[文档中](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)：

> WebBrowser 控件是 ActiveX WebBrowser 控件的托管包装，并使用安装在用户计算机上的任何版本的控件。

它将在不同人的 PC 上表现不同。因此，您需要确保生成的 html 可以在不同版本上正确呈现（在合理范围内），就像任何 Web 开发一样。

我也可以从个人经验中验证这一点。我们在少数实用应用程序中使用它，当我们对 css 或 html 感到草率时，我们看到了不同客户端之间的差异。

# javascript - JSON POST 数据在 IE 和 FF 之间的解释不同

> ID：11546435
> 
> 赞同：1
> 
> 时间：2012-07-18T16:50:34.777
> 
> 标签：javascript

我正在使用 valum 的 fileuploader [http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)来上传文件。完成后（即 onComplete: function(id, fileName, responseJSON){}），我得到 Firebug 查看的以下 POST 响应。

```
{"id":"13","filename":"Brighton\u2019s Rock Collection.docx","size":"12 KB","date":"07\/18\/2012","time":"09:34:35 AM","icon":"<img src=\"lib\/stdimages\/icons\/32x32\/doc.png\" width=\"32\" height=\"32\" \/>","errors":[]} 
```

接下来，我想将一行添加到包含新数据的表中。与 Firefox 配合使用效果很好，但使用 IE8 时，图标不显示。我不知道解决 IE 问题的好方法，所以我只做 alert(responseJSON.icon);。而不是我所期望的，我得到：

```
<IMG src='"lib/stdimages/icons/32x32/doc.png"' width='"32"' height='"32"' /> 
```

img 已更改为 IMG，我的属性周围有单引号。好吧，这可能就是图标没有显示的原因。谁能告诉我为什么会发生这种情况，以及我需要做些什么来防止它发生。

谢谢

# ruby-on-rails-3 - 你如何命名 Rails3 的订单范围？

> ID：11546440
> 
> 赞同：1
> 
> 时间：2012-07-18T16:50:40.903
> 
> 标签：ruby-on-rails-3

我有命名问题。

假设如果我们在 Rails3 应用程序模型中有这种范围，

```
scope :order_by_date,      order("created_at asc")
scope :order_by_date_desc, order("created_at desc") 
```

作用域的名称太长，解释性与作用域一样。

```
scope :ordered,      order("created_at asc") 
```

但是如果我们像上面这样定义，就很难区分 asc 或 desc 了。

那么在这种情况下如何使用范围呢？还是您使用范围？

有人有好主意吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:17:01.413

出色地...

```
Model.ascending_order
Model.descending_order 
```

# c++ - 我可以使用 C++ 在 Twitter API 上工作吗？

> ID：11546441
> 
> 赞同：6
> 
> 时间：2012-07-18T16:50:42.170
> 
> 标签：c++, twitter

我很高兴能开始在 Twitter API 上工作。我在网上看过这个，但我无法理解为什么大多数链接只谈论使用 PHP、Javascript 或 C#。由于我只知道 C 和 C++，我可以使用这些语言吗？如果不是，那为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T16:59:05.030

以下是一些用于 twitter 的 C++ API：

*   [kQOAuth](http://gitorious.org/kqoauth/kqoauth) by Johan Paul – 基于 Qt 的 OAuth 库
*   [Robin Gareus](http://liboauth.sourceforge.net/)的 libOAuth – 实现 OAuth 的 POSIX-C 函数集合
*   [Toni Jovanoski](http://github.com/minimoog/QTweetLib)的 QTweetLib – 基于 Qt 的 Twitter API 库
*   [Mahesh 的Twitcurl](https://github.com/swatkat/twitcurl) – Twitter API 库

（来自[https://dev.twitter.com/docs/twitter-libraries#cplusplus](https://dev.twitter.com/docs/twitter-libraries#cplusplus)）

而且您始终可以使用几乎任何语言的 REST API，这只是一堆 HTTP 调用。例如，您可以使用 libcurl 来做到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T16:58:51.333

有用于 C++ 的 Twitter API：

*   [Toni Jovanoski](http://github.com/minimoog/QTweetLib)的 QTweetLib – 基于 Qt 的 Twitter API 库
*   [Mahesh 的Twitcurl](https://github.com/swatkat/twitcurl) – Twitter API 库

你总是可以自己写。另请参阅：[https ://dev.twitter.com/docs/twitter-libraries#cplusplus](https://dev.twitter.com/docs/twitter-libraries#cplusplus)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T16:56:37.293

让我们应用一些逻辑。它可以在 PHP 中完成。PHP 是用 C 编写的。结论：是的，它可以用 C 完成。任何可以用 C 完成的事情都可以用 C++ 完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T16:59:28.090

如果您有兴趣，Microsoft 的 DevLabs 有一个项目可以提供一个库，使这项任务更加简单。它看起来很有趣，尽管它仍在开发中。 [http://msdn.microsoft.com/en-us/devlabs/casablanca.aspx](http://msdn.microsoft.com/en-us/devlabs/casablanca.aspx "卡萨布兰卡计划")

# jakarta-ee - 在 Websphere7 中启用基于角色的安全性

> ID：11546443
> 
> 赞同：4
> 
> 时间：2012-07-18T16:50:43.500
> 
> 标签：jakarta-ee, struts2, websphere-7, security-roles

我的网络应用程序（使用 struts2 创建，包含 2 页

*   1）提出请求
*   2）批准请求

) 部署在 websphere 7 中。我需要为此应用程序启用基于角色的安全性。我有两个角色

1）用户（可以提出请求的人）

2)审批人

两者都有不同的凭据。我没有使用任何后端进行身份验证。如何使用 web.xml 的 websphere 安全功能和映射用户来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:10:41.373

我邀请您阅读[JavaEE 6 教程章节“Getting Started Securing Web Applications”](http://docs.oracle.com/javaee/6/tutorial/doc/bncas.html)，特别是提供的示例。

您的应用程序必须声明两个安全角色`user`，`approver`并且`web.xml`必须保护 servlet 路径，这要归功于`security-constraints`.

这是一个作为起点的设置：

```
<security-constraint>
    <display-name>Raise Request</display-name>
    <web-resource-collection>
        <web-resource-name>raiserequestservlet</web-resource-name>
        <description/>
        <url-pattern>/raiserequest</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <description/>
        <role-name>user</role-name>
    </auth-constraint>
</security-constraint>
<security-constraint>
    <display-name>Approve Request</display-name>
    <web-resource-collection>
        <web-resource-name>approverequestservlet</web-resource-name>
        <description/>
        <url-pattern>/approverequest</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <description/>
        <role-name>approver</role-name>
    </auth-constraint>
</security-constraint>

<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>WebSphere</realm-name>
</login-config>

<security-role>
    <description>Security Role required to raise a request</description>
    <role-name>user</role-name>
</security-role>
<security-role>
    <description>Security Role required to approve a request</description>
    <role-name>approver</role-name>
</security-role> 
```

对于第一次测试，我选择了基本身份验证，但还有其他选项。

然后，在将 WAR 包部署到 WebSphere 时，向导将允许您将两个应用程序角色映射到 LDAP 组，只要您使用 LDAP 作为后端进行身份验证和权限，这是强烈推荐的。

运行应用程序的服务器实例默认配置为使用*全局安全性*，但您可以为服务器/应用程序对创建专用*安全域*以使用专用后端。这是[网络部署参考文档安全部分](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/welc6topsecuring.html)，可在这些方面为您提供指导。

# php - PHP 按键值排序数组

> ID：11546446
> 
> 赞同：0
> 
> 时间：2012-07-18T16:51:10.230
> 
> 标签：php, arrays, sorting

我知道这已经发布过，但我无法让它为我工作：s 不知道为什么！但是 anywhooo 我的数组 $servers 看起来像这样

```
Array
(
    [0] => Array
        (
            [0] => Dell PowerEdge R210 II
            [1] => 8
            [2] => Array
                (
                    [0] => 8
                    [1] => Sock
                    [2] => Price
                    [3] => ImageURL
                    [4] => CPU
                    [5] => Memory
                    [6] => HDD
                    [7] => Bandwidth
                    [8] => OS
                    [9] => Upgrades
                    [10] => OrderLink
                )

        )

    [1] => Array
        (
            [0] => Dell PowerEdge R210 II 2
            [1] => 2
            [2] => Array
                (
                    [0] => 2
                    [1] => Sock
                    [2] => Price
                    [3] => ImageURL
                    [4] => CPU
                    [5] => Memory
                    [6] => HDD
                    [7] => Bandwidth
                    [8] => OS
                    [9] => Upgrades
                    [10] => OrderLink
                )

        )

    [2] => Array
        (
            [0] => Dell PowerEdge R210 II 3
            [1] => 3
            [2] => Array
                (
                    [0] => 3
                    [1] => Sock
                    [2] => Price
                    [3] => ImageURL
                    [4] => CPU
                    [5] => Memory
                    [6] => HDD
                    [7] => Bandwidth
                    [8] => OS
                    [9] => Upgrades
                    [10] => OrderLink
                )

        )

    [3] => Array
        (
            [0] => Dell PowerEdge R210 II 4
            [1] => 4
            [2] => Array
                (
                    [0] => 4
                    [1] => Sock
                    [2] => Price
                    [3] => ImageURL
                    [4] => CPU
                    [5] => Memory
                    [6] => HDD
                    [7] => Bandwidth
                    [8] => OS
                    [9] => Upgrades
                    [10] => OrderLink
                )

        )

    [4] => Array
        (
            [0] => Dell PowerEdge R210 II 5
            [1] => 5
            [2] => Array
                (
                    [0] => 5
                    [1] => Sock
                    [2] => Price
                    [3] => ImageURL
                    [4] => CPU
                    [5] => Memory
                    [6] => HDD
                    [7] => Bandwidth
                    [8] => OS
                    [9] => Upgrades
                    [10] => OrderLink
                )

        )

    [5] => Array
        (
            [0] => Dell PowerEdge R210 II 6
            [1] => 6
            [2] => Array
                (
                    [0] => 6
                    [1] => Sock
                    [2] => Price
                    [3] => ImageURL
                    [4] => CPU
                    [5] => Memory
                    [6] => HDD
                    [7] => Bandwidth
                    [8] => OS
                    [9] => Upgrades
                    [10] => OrderLink
                )

        )

) 
```

我想重新排列阵列并放回 $servers 但按 $servers[x][1] 的顺序

所以奇异数在哪里（第一个对象是 8）我希望它用最小的数字 1 对它进行排序，移动到最大的！

非常感谢

ps 我试过这个

```
<?php
function cmp($a, $b)
{
    if ($a == $b) {
        return 0;
    }
    return ($a < $b) ? -1 : 1;
}

$a = array(3, 2, 5, 6, 1);

usort($servers, "cmp");
?> 
```

但它似乎没有工作！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:02:45.890

你`cmp`错了。`$a`并且`$b`是数组

```
Array
    (
        [0] => Dell PowerEdge R210 II 6
        [1] => 6
        [2] => Array
            (
                [0] => 6
                [1] => Sock
                [2] => Price
                [3] => ImageURL
                [4] => CPU
                [5] => Memory
                [6] => HDD
                [7] => Bandwidth
                [8] => OS
                [9] => Upgrades
                [10] => OrderLink
            )

    ) 
```

你必须`$a[1]`比较`$b[1]`：

```
function cmp($a, $b) {
    return $a[1] - $b[1];
} 
```

# azure - 对 Azure VM 创建感到困惑

> ID：11546449
> 
> 赞同：0
> 
> 时间：2012-07-18T16:51:21.340
> 
> 标签：azure, azure-virtual-machine

所以我对创建虚拟机（即 VMRoles）的 Azure 功能有点困惑。

当我通过管理门户进行快速创建时，不会要求我指定托管服务或存储帐户。单击“创建”后，我看到自动为我生成了一个具有唯一名称的存储帐户，但对于托管服务，我看不到相同的名称。创建虚拟机不需要托管服务吗？

令人困惑的是，似乎所有其他创建 VM 的方法都需要我指定托管服务（Azure PowerShell、REST API）。事实上，在我使用其中一种方法创建 VM 之后，我在托管服务中看到了我的 VM……

任何人都可以解释这个吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:08:12.823

请不要将[Windows Azure 虚拟机](http://www.windowsazure.com/en-us/home/scenarios/virtual-machines/)（IaaS，有状态）与[Windows Azure VMRole](http://msdn.microsoft.com/en-us/library/windowsazure/gg433107.aspx)（PaaS，无状态）混淆。

至于创建 - 门户背后的过程是自动化的。对我来说，我创建的每个虚拟机都有一个单独的云服务（以及自动生成的存储帐户）。然而，由于所有操作都是异步的，而且我也猜想微软团队在门户后面使用了某种 CQRS 模式，虚拟机后面的所有组件可能需要一些时间才能出现。虽然 API 严格要求一切准备就绪，但在您实际创建虚拟机之前。我的猜测是，很快您还会看到为您的虚拟机创建的云服务（通常使用您创建的虚拟机的名称）。此外，如果您注意到，用于访问您的虚拟机（无论是 RDP 还是 SSH）的公共 URI 的格式为 [your_vm_name].cloudapp.net - 所以这是一个云服务（以前称为托管服务）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:50:35.933

首先，Windows Azure 虚拟机和 VM 角色是两个不同的东西。根据您的解释，您似乎正在尝试创建一个 Windows Azure 虚拟机，所以我将简要解释一下它是如何工作的：

首先：为了创建 Windows Azure 虚拟机，您需要一个具有 OS 映像的 VHD。您可以使用库中的一个，也可以自己将一个上传到您的特定 Blob Azure 存储。

当您使用快速创建或创建过程在后台完全相同，但是在快速创建期间，许多设置已经预定义，快速创建您将只能选择 Windows 操作系统 VHD。在这两种情况下，存储帐户都用于复制 OS VHD（如果它不是您的 OS 映像集合的一部分）。在大多数情况下，使用的是以前创建的存储帐户，因此您可能认为未创建，但实际上存储帐户用于从存储库复制 VHD。如果您从操作系统 VHD 集合中已有的映像创建 VM，则情况可能并非如此。

通过快速创建，您设置的 DNS 名称将成为 VM 名称，但通过创建，您可以选择为您的应用程序创建不同的 DNS 名称，但在这两种情况下都需要它们。在任何情况下，DNS 名称都会绑定到您的 VM，相同的 DNS 名称会将您的 VM 与其他 VM 区分开来，并且必须为任何 VM 进行配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:38:53.910

我相信云服务不是针对单个快速创建的虚拟机而出现的。这是为了使虚拟机尽可能易于使用。将创建云服务并在门户上显示第二个虚拟机以添加到云服务中。

# jquery - 使用 jQuery 检索 JSON API 时出现无效错误

> ID：11546450
> 
> 赞同：0
> 
> 时间：2012-07-18T16:51:21.650
> 
> 标签：jquery, ajax, json, jsonp

我将一个变量传递给一个 URL，然后它调用一个由传递的变量过滤的 API。但是，我似乎无法加载 JSON，并在 JS 中的 Firebug 控制台中返回无效错误。想法？

```
$("a").click(function() {
    var apiurl = "http://api.example.com" + $(this).text() + "&limit=500" + "?callback=?";

    $.ajax({
        url: apiurl,
        success: function(json) {alert(json.data.results);},
        error: function() { alert("error"); },
        dataType: "json",
        contentType: "application/json;charset=utf-8",
    });
}); 
```

这是错误：无效标签错误源行：[Break On This Error]
{"code":200,"status":"Ok","data":{"offset":0,"limit":500,"总计":17,"目标":"ch...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:53:43.193

删除：`contentType: "application/json;charset=utf-8"`从您的请求中。您也可以使用该[`$.getJSON()`](http://api.jquery.com/jQuery.getJSON/)方法，它是您所写内容的简写。并且不要忘记从您的点击处理程序中返回 false ，否则您的调用可能永远没有时间在浏览器跟随`href`被点击的锚点重定向离开之前执行。另一个要注意的是，您应该使用`'&callback=?'`而不是`'?callback=?'`在 url 中，因为显然您已经有了`limit`查询字符串参数，所以您只是添加另一个。我想在这种情况下，它包含指示查询字符串开始的`$(this).text()`某处：`?`

```
$('a').click(function() {
    var apiurl = 'http://api.example.com' + $(this).text() + '&limit=500' + '&callback=?';
    $.getJSON(apiurl, function(json) {
        alert(json.data.results);
    });
    return false;
}); 
```

另外，我希望您意识到这`callback=?`意味着您尝试调用的 API 必须支持[JSONP 。](http://en.wikipedia.org/wiki/JSONP)否则，您的呼叫将始终失败，因为您违反了[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:00:08.060

如果`"api.example.com"`不在同一个域中，则需要使用`dataType: 'jsonp'`. [请参阅 jsonp 文档](http://bob.ippoli.to/archives/2005/12/05/remote-json-jsonp/)以及[jQuery.ajax 文档](http://api.jquery.com/jQuery.ajax/)。

# iphone - 在 iOS 应用中拍照后是否可以避免“使用”/“重拍”屏幕？

> ID：11546451
> 
> 赞同：4
> 
> 时间：2012-07-18T16:51:22.210
> 
> 标签：iphone, ios

我聘请了一名程序员为我创建一个 iPhone 应用程序。该应用程序的目的是拍摄照片并将其上传到服务器。我们想在上传照片之前制作一个特殊用途的屏幕来查看照片。这个专门开发的屏幕将具有缩放功能。

他声称拍完照片后，不可能避免“使用”/“重复使用”屏幕出现，所以现在我们有两个屏幕来查看照片。首先是 Apple 的标准版，然后是我们自己的 zoom。他是对的吗？苹果会设置这样的限制听起来太不合理了。

编辑：我的意思是用相机拍照。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:00:34.093

作为苹果的文档

> 要执行完全自定义的图像或电影捕获，请改用[AV Foundation 框架](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188-CH1-SW10)，如 AV Foundation Programming Guide 中的“Media Capture and Access to Camera”中所述。要创建用于浏览照片库的完全自定义的图像选择器，请使用 Assets Library 框架中的类。例如，您可以创建一个自定义图像选择器，以显示更大的缩略图图像，利用 EXIF 元数据（包括时间戳和位置信息），或者与 Map Kit 等其他框架集成。有关详细信息，请参阅资产库框架参考。从 iOS 4.0 开始可以使用[Assets Library 框架](http://developer.apple.com/library/ios/#DOCUMENTATION/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html#//apple_ref/doc/uid/TP40009730)进行媒体浏览

简而言之，是的，可以查看此[示例](https://developer.apple.com/library/ios/#samplecode/AVCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010112)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T03:40:54.427

[更新]

使用`allowsEditing`您的财产`UIImagePickerController`

`imagePickerController.allowsEditing = NO;`

以前的答案是利用没有显示按钮但不是很棒的代码路径的一点技巧。

[上一个答案]

您实际上可以避免它，而无需从 AV Foundation 设置您自己的图像捕获。

包括以下内容将消除显示“审查”屏幕的需要。您所要做的就是放入一些您自己的按钮并将它们连接到适当的功能。

```
[self.imagePickerController setShowsCameraControls:NO]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-18T17:29:58.850

我知道这有点太晚了，但供将来参考：

这比已经提供的答案要简单得多，您正在寻找的是allowEditing选项。

```
imagePickerController.allowsEditing = NO; 
```

这应该足以避免在用户拍照后显示“重拍”/“使用”屏幕。

# c# - 关闭异步连接

> ID：11546452
> 
> 赞同：3
> 
> 时间：2012-07-18T16:51:23.807
> 
> 标签：c#, asyncsocket

我在 C# 中创建了一个异步服务器来配合我的 Android 应用程序。服务器与此类似：http: [//msdn.microsoft.com/en-us/library/fx6588te.aspx](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)

它运行良好，我可以让许多客户端同时连接并从服务器接收数据。我发现的一个问题是，在我的 Android 应用程序中，如果您已经通过 Wifi 连接并再次按下连接按钮，服务器会生成一个新套接字。服务器应先终止旧连接，然后再创建新连接。在 Android 端，我确保在`close()`之后调用，甚至将其设置为 null。我还向服务器发送了一个断开控制信号，以便它也可以调用`close()`套接字。例如，这是我在服务器中的操作方式：

```
if (state.storage.parseJson(content) == JsonStorage.DISCONNECT)
{
    Console.WriteLine("Disconnect2!");
    state.workSocket.Shutdown(SocketShutdown.Both);
    state.workSocket.Close();
    return;
} 
```

当我在一个名为“CurrPorts”的程序中检查我的服务器进程时，它会显示在不同端口上打开到我的 Android 设备的多个连接。我使用 Timer 对象向我的客户发送数据，并且我还检查连接是否处于活动状态，否则我将其关闭。例如，我的 TimerCallback 方法：

```
public void TimeCallBack(object input)
{
    StateObject state = (StateObject)input;
    if (state.workSocket.Connected)
    {
        Send(state.workSocket, state.storage.getJson());
    }
    else
    {
        Console.WriteLine("Dispose!");
        state.timer.Dispose();
        state.workSocket.Close();
    }
} 
```

我想不出为什么我的服务器没有关闭旧连接。打开的连接数应该与连接到服务器的设备一样多。如果这是一个线程阻塞服务器，那么关闭线程很容易，但我不确定在这种情况下该怎么做。

**编辑：**所以我让 CurrPorts 程序坐了一会儿后才刷新它，它下降到一个已建立的连接。我的解决方案是否正确，Windows 需要一段时间才能真正清除已创建的旧套接字连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:10:47.827

是的，Windows 将保留有关套接字的信息一段时间。您可以通过 netstat 看到这一点，关闭的套接字在关闭后甚至在托管套接字的应用程序终止后也会显示 TIME_WAIT 状态。

# caching - Google Apps 脚本中缓存服务的最长过期时间

> ID：11546458
> 
> 赞同：12
> 
> 时间：2012-07-18T16:51:45.200
> 
> 标签：caching, google-apps-script

有人知道 Google Apps 脚本中缓存服务的最长过期时间是多少吗？我在 Google 站点上运行我的脚本并尝试运行重新缓存缓存的触发器，但缓存似乎仍然会在一夜之间过期，我不确定它会持续多久。如果有人对缓存的实际长度进行了计时，那么很高兴知道 - 不幸的是，谷歌尚未公开此信息。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T19:57:55.767

我们正在努力将这些信息添加到我们的文档中，但是某些内容可以在 6 小时（21600 秒）内存储在缓存中的最长时间，默认时间是 10 分钟（600 秒）。

# c# - 测试用户是否连接到我们的 WAN 的最简单方法是什么？

> ID：11546460
> 
> 赞同：1
> 
> 时间：2012-07-18T16:51:55.497
> 
> 标签：c#, .net, winforms, networking, wan

一点背景。我为一家拥有全球 WAN 的公司工作。外部用户通过 VPN 连接到它，并且必须连接到它才能访问他们的电子邮件，当然还有共享的网络目录。

我有一个使用 ClickOnce 从我们的网站发布和安装的 .Net 应用程序。为公司工作和不工作的用户都可以访问此应用程序，并将请求发送到也发布到 Web 服务器的 Web 服务。

由于此问题范围之外的原因，当用户尝试登录应用程序时，他们应该通过显式引用服务器的计算机名称来连接到 Web 服务服务器（即`http://**server**/webservice/ws.asmx`。）如果用户未连接到我们的 WAN，他们需要通过我们的网址访问它（即`https://**www.companywebsite.com**/webservice/ws.asmx`。）

我知道如何动态设置与 Web 服务关联的 URL。我的问题是我想不出一种快速、可靠和简单的方法来测试 WAN 连接。

`Ping`最初，我尝试以相当短的超时时间向服务器发送 ping 请求（使用 .Net类）。但是，当未连接到 WAN 时，对服务器调用 ping 操作会返回一个异常，指出

> Ping 请求期间发生异常。

下面是与测试 WAN 连接的属性关联的代码。这很简单，但是当我在我们的网络上测试它时，它一直给我上面的信息。

```
public static bool ConnectedToWAN
{
  get
  {
    try
    {
      Ping ping = new Ping();
      PingReply reply = ping.Send("server", 2000);
      return reply.Status == IPStatus.Success;
    } 
    catch (Exception e) 
    {/* ' An exeception occurred during the Ping request.' */};
  } 
```

我宁愿不根据我得到的异常返回我的连接状态。相反，我会明确调用可以验证连接的网络。

一个快速说明，我无法检查用户的 IP。我们的一些用户为拥有自己的 WAN 的其他组织工作。由于我在 .Net WinForms 应用程序中检查他们的 IP，因此他们的 IP 地址可能与他们的 WAN 相关联。相反，我需要检查它们是否专门连接到*我们的*WAN，而不仅仅是*任何*WAN。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:55:07.280

不在 WAN 上的用户能否解析该服务器 IP？如果没有，您可以使用 DNS 查询来确定您的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:46:32.647

我认为问题是如果在公司网络内连接而不是公共可访问的互联网，则您需要解析主机名。

如果是这种情况，您可以使用 DNS.BeginGetHostEntry 并使用异步方法获取指定主机的域名系统。

例如

```
var host = '**Internal Server Name**';
Boolean isWANConnected = false;
String ConnectMessage ;
AsyncCallback callBack = new AsyncCallBack(GetHostName);
Dns.BeginGetHostEntry(host, callBack, host);

static void GetHostName(IAsyncResult result)
{
  string hostname = (string)result.AsyncState;
  try
  {
     IPHostEntry host = Dns.EndGetHostEntry(result)
     ConnectMessage = host as String;
  }
  catch(SocketException e)
  {
    isWANConnected = false;
    ConnectMessage = e.Message;
  }
} 
```

# php - OpenCart 安装中的空白白屏

> ID：11546462
> 
> 赞同：0
> 
> 时间：2012-07-18T16:52:09.230
> 
> 标签：php, mysql, opencart

我的网站[http://www.redbullet.co.bw](http://www.redbullet.co.bw)上周二运行良好，我要求我的网络托管公司安装 Zend Optimizer，以便我可以在网站上运行一些额外服务。他说他确实添加了它，但是当我更新我的数据库并添加新目录时，一切都搞砸了。

我试图解决它，但我失败了。然后我决定卸载所有东西并从我的备份中恢复，但我的网站仍然有一个白色的空白页面，HTML 页面可以运行没有问题。

更糟糕的是，当我尝试安装最新的 opencart 的新副本时，我仍然得到一个白色的空白页面[http://www.redbullet.co.bw/install/index.php](http://www.redbullet.co.bw/install/index.php)。我检查了错误日志，我得到了这个：

```
[Wed Jul 18 18:04:18 2012] [error] [client 41.216.209.90] File does not exist: /var/www/xxx/web/favicon.ico
[Wed Jul 18 18:04:19 2012] [error] [client 41.216.209.90] File does not exist: /var/www/xxx/web/favicon.ico
[Wed Jul 18 18:04:19 2012] [error] [client 41.216.209.90] File does not exist: /var/www/xxx/web/favicon.ico
[Wed Jul 18 18:04:19 2012] [error] [client 41.216.209.90] File does not exist: /var/www/xxx/web/favicon.ico
[Wed Jul 18 18:04:20 2012] [error] [client 41.216.209.90] File does not exist: /var/www/xxx/web/favicon.ico 
```

我不认为缺少图标会导致空白页，但在我的情况下似乎可以，但我仍然收到 WHITE BLANK PAGE 错误。是在内部还是在我的托管公司有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:52:25.617

虽然我是opencart的新手，但我也面临这个问题。由于 vqmod，有时您会在 opencart 中看到空白页。通常是会话错误。每当更改服务器时，您都需要安装新的 VqMod 副本。还用新下载（卸载）的 opencart 副本替换旧索引文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:29:58.983

我在 config.php 文件中发现了我的问题 - 文件夹不正确。admin文件夹中也有一个需要设置...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T01:17:54.353

我有同样的问题，原来它不喜欢数据库用户名与数据库名称相同。

# javascript - 如何创建一个出现在窗口底角的 DIV（经过一定时间）？

> ID：11546463
> 
> 赞同：1
> 
> 时间：2012-07-18T16:52:10.730
> 
> 标签：javascript, jquery, css

我想创建一个“实时聊天产品”弹出窗口，在我们的访问者到达特定页面后出现在屏幕底部，并且已经在该页面上停留了 30 秒左右。如果可能的话，我想保留代码 jQuery/CSS。

```
<script type="text/javascript" src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
<script type="text/javascript">Some jQuery that will change the 'display:hidden;' to 'display:block;' on the DIV after 30 seconds</script>

<div id="live-chat" style="position:absolute;bottom:0px; right:100px;z-index:5;display:none;>
 <h4>Need Help?</h4>
 <p>Click the link below for assistance</p>
 <a href="live-chat.php">Chat with a salesman</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:55:23.343

看起来你已经得到了位置部分，你在问延迟部分？

像这样的东西`setTimeout`可以工作

```
$(document).ready(function() { 
  setTimeout(function() {
    $('#live-chat').show();
  }, [delay in ms]);
} 
```

您可能还想更改`.show()`以产生某种效果来提醒用户它出现了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:58:14.810

试试这个：

```
<script type="text/javascript" src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
<script type="text/javascript">
$(document).ready(function() {

setTimeout(function() {
$("#live-chat").css({ "display" : "block" });
}, 30000); // 30 seconds in MS

}); 
</script>

<div id="live-chat" style="position:absolute;bottom:0px; right:100px;z-index:5;display:none;>
 <h4>Need Help?</h4>
 <p>Click the link below for assistance</p>
 <a href="live-chat.php">Chat with a salesman</a>
</div> 
```

祝你好运！

**编辑：**

为了将其滑入：

```
<script type="text/javascript" src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
<script type="text/javascript">
$(document).ready(function() {

// Store our panel into a variable.
var $myPanel = $("#live-chat");

// Get the height of the panel dynamically.
var $myPanelHeight = parseInt($myPanel.height());

// Immediately set the opacity to 0 - to hide it and set its bottom to minus its height.
$myPanel.css({ "opacity" : 0, "bottom" : "-" + $myPanelHeight + "px" });

// Set a timeout for the panel to slide and fade in.
setTimeout(function() {

$myPanel.animate({

    // The CSS properties we want to animate (opacity and bottom position).
    opacity: 1,
    bottom: '0'

  }, 2000, function() {

    // Animation complete. 
    // You can put other code here to do something after it has slid-in.

  });

}, 30000); // 30 seconds in MS

}); 
</script>

<div id="live-chat" style="position: absolute; bottom: 0px; right:100px; z-index:5;">
 <h4>Need Help?</h4>
 <p>Click the link below for assistance</p>
 <a href="live-chat.php">Chat with a salesman</a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:02:37.357

你可以使用jQuery的延迟功能

```
$(document).ready(function() {
    var miliseconds = 30000 //30 seconds
    $("#live-chat").delay(miliseconds).hide();
} 
```

这是您的代码的 jsfiddle 示例：[jsfiddle](http://jsfiddle.net/sJsR8/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T17:10:01.423

以下是具有我要求的功能的起点:) 谢谢大家！我用迈克尔的例子...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script type="text/javascript" src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
<script type="text/javascript">
 $(document).ready(function() {

 setTimeout(function() {
 $("#live-chat").css({ "display" : "block" });
 }, 5000); // 30 seconds in MS

}); 
</script>

</head>

<body>

<div id="live-chat" style="width:250px; height:150px; position:absolute; bottom:0px; right:100px; z-index:5; display:none; border:#ccc 1px dashed;">
 <h4>Need Help?</h4>
 <p>Click the link below for assistance</p>
 <a href="live-chat.php">Chat with a salesman</a>
</div>

</body>
</html> 
```

# android - Android NullPointerException 没有行号

> ID：11546465
> 
> 赞同：2
> 
> 时间：2012-07-18T16:52:19.693
> 
> 标签：android, nullpointerexception, sphero-api

我来自 C++ 世界，我认为在托管代码和 android 开发方面我遗漏了一些东西。将所有 UI 内容（如字符串）分离到 xml 文件中是有意义的。但我希望在构建时会发现错误。特别是，NullPointerExecption 错误通常是由于 .xml 组件损坏或丢失而发生的。似乎 JVM 将捕获问题推到运行时，这可能在构建时被捕获，这似乎是一件非常糟糕的事情。

我得到的当前错误有一个 NullPointerException 但没有给出行号。所以它可能来自我的任何 xml 资源的拼写错误。这对于调试来说是非常低效的。更糟糕的是，我在逐步调试代码时遇到了困难。一些文件工作正常，而另一些文件与行号不正确匹配，而其他文件无法由调试器加载（PathClassLoader、BootClassLoader）。

当然必须有更好的方法来解决这个问题？如何获取导致 NullPointerException 的行号？

这是我的代码：

```
public class FragmentsMainActivity extends FragmentActivity {

public final static int STARTUP_ACTIVITY_RESULT=0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fragments_main);

    Intent intentStartupActivity = new Intent(this, StartupActivity.class);
    if(intentStartupActivity != null)
        startActivityForResult(intentStartupActivity, STARTUP_ACTIVITY_RESULT);

    // get an instance of FragmentTransaction from your Activity
    FragmentTransaction fragmentTransaction = 
            getSupportFragmentManager().beginTransaction();

    //add a fragment
    StreamingActivity streamingActivity = new StreamingActivity();
    if (streamingActivity != null) {
        fragmentTransaction.add(R.id.streamingactivity, streamingActivity);
        fragmentTransaction.commit();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_fragments_main, menu);
    return true;
} 
```

这是我的 AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="kesten.fragmentstestbed"
      android:versionCode="1"
      android:versionName="1.0">

    <uses-sdk android:minSdkVersion="9"
              android:targetSdkVersion="15" />

    <!--   Sphero permissions -->
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />

    <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

        <activity
            android:name=".FragmentsMainActivity"
            android:label="@string/title_activity_fragments_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- StartupActivity for connecting to a Robot -->
        <activity
            android:name="orbotix.robot.app.StartupActivity">
        </activity>
</application>   
</manifest> 
```

这是 LogCat

```
07-18 10:37:25.600: W/dalvikvm(4835): threadid=1: thread exiting with uncaught exception (group=0x40020560)
07-18 10:37:25.680: E/AndroidRuntime(4835): FATAL EXCEPTION: main
07-18 10:37:25.680: E/AndroidRuntime(4835): java.lang.RuntimeException: Unable to start activity ComponentInfo{kesten.fragmentstestbed/kesten.fragmentstestbed.FragmentsMainActivity}:java.lang.NullPointerException
07-18 10:37:25.680: E/AndroidRuntime(4835):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1650)
07-18 10:37:25.680: E/AndroidRuntime(4835):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1666) 
```

和堆栈跟踪

```
Thread [<1> main] (Suspended (exception RuntimeException))  
ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1650    

ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1666 

ActivityThread.access$1500(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 117 
```

感谢答案，我在行号所在的 logCat 跟踪中找到了“由”引起的。这表明我的片段 - StreamingActivity.onCreate() 正在调用 getView() 并且返回 null。这解决了我的 NPE，所以我将开始一个新线程来讨论我在另一个线程中的 Activity 和 Fragment 中创建视图的顺序所遇到的问题，并将其标记为已解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:21:20.300

> 如何获取导致 NullPointerException 的行号？

信息就在那里，只是有点神秘。[从NullPointerException/Help Reading LogCat](https://stackoverflow.com/q/10975582/1267661)考虑这个LogCat ：

```
06-11 11:56:08.118: W/dalvikvm(593): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-11 11:56:08.128: E/AndroidRuntime(593): FATAL EXCEPTION: main
06-11 11:56:08.128: E/AndroidRuntime(593): java.lang.RuntimeException: Unable to start activity ComponentInfo{gaurav.android/gaurav.android.CalcActivity}: java.lang.NullPointerException
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.os.Looper.loop(Looper.java:137)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-11 11:56:08.128: E/AndroidRuntime(593):  at java.lang.reflect.Method.invokeNative(Native Method)
06-11 11:56:08.128: E/AndroidRuntime(593):  at java.lang.reflect.Method.invoke(Method.java:511)
06-11 11:56:08.128: E/AndroidRuntime(593):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-11 11:56:08.128: E/AndroidRuntime(593):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-11 11:56:08.128: E/AndroidRuntime(593):  at dalvik.system.NativeStart.main(Native Method)
06-11 11:56:08.128: E/AndroidRuntime(593): Caused by: java.lang.NullPointerException
06-11 11:56:08.128: E/AndroidRuntime(593):  at gaurav.android.CalcActivity.reset(CalcActivity.java:341)
06-11 11:56:08.128: E/AndroidRuntime(593):  at gaurav.android.CalcActivity.onCreate(CalcActivity.java:58)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.Activity.performCreate(Activity.java:4465)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-11 11:56:08.128: E/AndroidRuntime(593):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

您需要找到 LogCat 最下方的“Caused by:”，在这种情况下：

```
06-11 11:56:08.128: E/AndroidRuntime(593): Caused by: java.lang.NullPointerException
06-11 11:56:08.128: E/AndroidRuntime(593):  at gaurav.android.CalcActivity.reset(CalcActivity.java:341) 
```

在这里，我们可以看到 CalcActivity 在 reset() 中抛出 NullPointerException，明确`(CalcActivity.java:341)`告诉我们它在第 341 行。如果有帮助，您可以进一步跟踪堆栈跟踪，但这是为 NPE 读取 Android LogCat 的方法。

希望有帮助！否则，请发布您的完整 LogCat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:05:45.447

如果与您的 XML 有关，Eclipse 将在编译时标记错误。它不会让您以其他方式构建您的应用程序。 `NullPointerExceptions`只能在运行时找到，因为它完全取决于变量是否被赋值。当然，也有一些简单的情况，例如设置一个变量`null`，然后以后再也不重新分配它，但是编译器很难检测到你的所有逻辑。您不需要检查您创建的每个对象是否`null`与您在代码中所做的一样。

至于解决您的`NullPointerException`问题，您需要发布给出的完整堆栈跟踪。它通常会有`Caused by`一行，其中包含发生错误的行号。

# algorithm - 过滤掉噪音并泛化来自移动设备的 GPS 数据

> ID：11546467
> 
> 赞同：0
> 
> 时间：2012-07-18T16:52:40.197
> 
> 标签：algorithm, filter, geolocation, gps, geo

**我有一个服务器从移动设备（iphone）接收 GPS 数据，然后找到每个不同日期**的数据来自的不同城市**. 该应用程序每三个小时同步一次。由于我需要的粒度不是那么小——我对比城市“更小”的东西不感兴趣——我想说“这个人在这个或那个日期在这个或那个城市”。问题是，GPS 预热、精度差和接收到的大量数据（设备每十分钟收集一次数据，每 3 小时与服务器同步一次）有时会产生误报或错误数据 - 我有一个用户住在附近纽约/新泽西州的边界，我不断地从一个或另一个地方获得替代位置，即使他实际一天中的大部分时间都在远离边界的地方度过，所以他在家的那些时间不应该重要）。**

 **我的问题是：我应该考虑哪些算法，我应该阅读哪些论文，或者，甚至，我应该用谷歌搜索哪些术语来找到一种方法，以帮助我摆脱每隔 n 小时同步的数据的噪音和误报和不需要比某个级别（在这种情况下为城市）更细化，并且在特定时间段内哪个重要？（把它想象成我正在计算不同日期对不同城市、州或国家的访问次数）。我正在考虑诸如“聚类”或“分解”数据之类的东西，但我对地理算法一无所知；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:45:39.830

我使用 android 而不是 iphone，所以我会回答希望 iphone 在其修复流中提供类似的信息。

首先，您应该只使用从 GPS 中找到的位置，而不是从 wifi 或手机信号塔位置进行这项工作。在android中，定位源是“GPS”“网络”或“小区”，GPS是最准确的。使用手机信号塔，特别是在河流或山上，当你四处走动时，你经常会捡起离你很远的信号塔，听起来这就是你的纽约/新泽西州问题所发生的事情。

第二，如果一个人在某个城市，他应该在那里呆很长时间而不会移动太远。您可以编写一些内容，仅在它接收到位于该位置内的一行中的一堆位置时才声明该位置，这基本上过滤掉了不良结果，注意到在两个位置之间快速来回反弹是不现实的超过 500 m 或类似的距离。**

# android - 如何动态设置相对布局背景图片？

> ID：11546470
> 
> 赞同：2
> 
> 时间：2012-07-18T16:53:04.473
> 
> 标签：android, android-layout

如何动态设置相对布局背景？我的相对布局在顶部，不能设置id

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T16:55:32.350

假设您有一个带有 ID 的相对布局`relativeLayout`。您可以使用以下方法设置背景：

```
RelativeLayout rLayout = (RelativeLayout) findViewById(R.id.relativeLayout);
Resources res = getResources(); //resource handle
Drawable drawable = res.getDrawable(R.drawable.newImage); //new Image that was added to the res folder

rLayout.setBackgroundDrawable(drawable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T12:24:31.353

试试这个 Xamarin.Android（跨平台）

相对布局 relativeLayout = new RelativeLayout (this);
或
RelativeLayout relativeLayout = (RelativeLayout)FindViewById (Resource.Id.relativeLayout);

relativeLayout.SetBackgroundDrawable (Resources.GetDrawable (Resource.Drawable.imageName));

# iphone - iOS 应用仅在首次使用该应用时发送警报视图

> ID：11546473
> 
> 赞同：4
> 
> 时间：2012-07-18T16:53:14.723
> 
> 标签：iphone, ios, uialertview

我想在用户第一次打开应用程序时显示警报视图。在他们打开应用程序后，他们单击一个按钮，该按钮将表格视图推送到导航控制器堆栈上。如果这是第一次打开表格视图，应该有一个警告视图显示告诉用户他们可以单击单元格进行编辑。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T16:59:50.100

简单地说，使用`NSUserDefaults`.

就像是：

```
// the place where you want to check if this is the first run:
BOOL didRunBefore = [[NSUserDefaults standardUserDefaults] boolForKey:@"didRunBefore"];

if (!didRunBefore) {
    // show alert;
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"didRunBefore"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:02:17.043

当你的用户点击你的按钮时，你应该检查一些值，`[NSUserDefaults standardDefatults]`如果检查为零，你应该显示你的警报，然后保存一些值，所以下次你检查它时，它会存储一些值而你什么都不做。

像这样：

```
NSString * val = [[NSUserDefaults standardUserDefaults] objectForKey:@"kFirstTime"];
if (!val) {

    //show alert
    [[NSUserDefaults standardUserDefaults] setObject:@"1" forKey:@"kFirstTime"];
    [[NSUserDefaults standardUserDefaults] synchronize];
}

//Your code 
```

# ruby-on-rails-3 - 如何使用 RVM (linux & gedit) 在 Rails3 中浏览 gem 的源代码

> ID：11546475
> 
> 赞同：4
> 
> 时间：2012-07-18T16:53:20.343
> 
> 标签：ruby-on-rails-3, ubuntu, gedit

我在 Ubuntu 中运行 rails3 并使用 gedit 进行编码。我正在使用 RVM。查看我尝试的 gem 源代码：`bundle open jquery-rails`

这不起作用，因为我没有设置编辑器。将 gedit 设置为编辑器后它仍然不起作用，因为 gedit 无法传递目录。我猜它只适用于文件。太糟糕了 ：（。

nathan.f77 对这个问题的回答（[在 Rails3 应用程序中打包的 Lookup Gem 或插件代码](https://stackoverflow.com/questions/3265154)）似乎很有希望，但我无法遵循他的指示。他们对我来说缺乏足够的细节。

**浏览我在 rails3 应用程序中使用的 gem 的源文件的一种非常简单的方法是什么？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T17:04:52.660

`bundle show jquery-rails`应该告诉你 gem 源在你的文件系统上的位置。然后打开你想要的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T16:49:04.787

CubaLibre 的回应让我成功了一半。我能够从[Ask Ubuntu](https://askubuntu.com/questions/167818)获得的另一块拼图。

以下是使用 Ubuntu 在 gedit 中浏览 gem 代码的步骤。

一种。从命令行运行：

```
gnome-open $(bundle show [gem-name]) 
```

湾。这将在 nautilus 中打开 gem 目录。从那里只需双击您想查看的文件，它将在 gedit 中打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-18T20:48:13.413

假设您在终端中设置了默认编辑器，在 MacOS 上，您可以执行以下示例（atom 是我的编辑器，但应该与 sublime 或 textmate、vim 等一起使用）：

```
atom $(bundle show name_of_gem) 
```

# c++ - 如何将模板参数传递给 CRTP？

> ID：11546478
> 
> 赞同：4
> 
> 时间：2012-07-18T16:53:22.500
> 
> 标签：c++, templates, crtp

在以下代码中：

```
template <typename T>
class CRTP
{
public:
};

template <int I, typename T>
class CRTPInt
{
public:
};

template <template <typename> class T>
class Derived : public T<Derived<T>>
{
public:
};

void main()
{
Derived<CRTP> foo;
Derived<CRTPInt<2>> foo2;
} 
```

如何编写 CRPTInt 以便我可以传入模板化参数，然后将在派生定义中继续？

谢谢，

吉姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:56:53.153

CRTP 模式通常用于启用**静态多态性**和混合（参数化）行为的**能力**。为了说明两种选择，首先定义一个通用模板很方便

```
template
<
        typename Derived
>
class enable_down_cast
{
private:
        // typedefs

        typedef enable_down_cast Base;

public:
        Derived const* self() const
        {
                // casting "down" the inheritance hierarchy
                return static_cast<Derived const*>(this);
        }

        // write the non-const version in terms of the const version
        // Effective C++ 3rd ed., Item 3 (p. 24-25)
        Derived* self()
        {
                return const_cast<Derived*>(static_cast<Base const*>(this)->self());
        }

protected:
        // disable deletion of Derived* through Base*
        // enable deletion of Base* through Derived*
        ~enable_down_cast() = default; // C++11 only, use ~enable_down_cast() {} in C++98
}; 
```

然后为你想要的行为类型定义一个接口类模板

```
template<typename FX>
class FooInterface
:
    // enable static polymorphism
    public enable_down_cast< FX >
{
private:
    // dependent name now in scope
    using enable_down_cast< FX >::self;

public:
    // interface
    void foo() { self()->do_foo(); }

protected:
    // disable deletion of Derived* through Base*
    // enable deletion of Base* through Derived*
    ~IFooInterface() = default; // C++11 only, use ~IFooInterface() {} in C++98/03
}; 
```

要获得此接口的不同实现，只需将每个派生自`FooInterface`其自身的不同类定义为**奇怪的重复模板参数**：

```
class FooImpl
:
    public FooInterface< FooImpl > 
{
private:
    // implementation
    friend class FooInterface< FooImpl > ;
    void do_foo() { std::cout << "Foo\n"; }
};

class AnotherFooImpl
:
    public FooInterface< AnotherFooImpl > 
{
private:
    // implementation
    friend class FooInterface< AnotherFooImpl >;
    void do_foo() { std::cout << "AnotherFoo\n"; }
}; 
```

另一种方法是参数化接口的不同实现。这一次，类模板同时依赖于一个**模板模板参数**和一个非类型参数

```
template<template<int> class F, int X>
class BarInterface
:
    public enable_down_cast< F<X> >
{
private:
    // dependent name now in scope
    using enable_down_cast< F<X> >::self;

public:
    // interface
    void bar() { self()->do_bar(); }    

protected:
    // disable deletion of Derived* through Base*
    // enable deletion of Base* through Derived*
    ~BarInterface() = default; // C++11 only, use ~BarInterface() {} in C++98/03
}; 
```

然后实现是另一个类模板，它从接口派生，其自身和非类型参数作为参数

```
template< int X >
class BarImpl
:
    public BarInterface< BarImpl, X > 
{
private:
    // implementation
    friend class BarInterface< ::BarImpl, X >;
    void do_bar() { std::cout << X << "\n"; }    
}; 
```

这就是您对它们的称呼：

```
int main()
{
    FooImpl f1;         
    AnotherFooImpl f2;
    BarImpl< 1 > b1;
    BarImpl< 2 > b2;

    f1.foo();
    f2.foo();
    b1.bar();
    b2.bar();

    return 0;
} 
```

您问题中的课程不太适合这种一般模式。如果您可能想提供`Derived`一些类似 CRTP 的行为，那么您可以这样做

```
class Derived1
: 
   public CRTP< Derived1 > 
{

};

template<int I>
class Derived2
: 
   public CRTPInt< Derived2, I >
{

}; 
```

**更新**：基于来自[https://stackoverflow.com/a/11571808/819272](https://stackoverflow.com/a/11571808/819272)的讨论，我发现原始答案仅在 Visual Studio 2010 上编译，但由于某些 Microsoft 特定的非便携式功能而未在 gcc 上编译。例如，`self()`函数 from`enable_down_cast`是其派生类中的（模板）依赖名称，因此如果没有显式`using`指令则不可见。此外，我添加了具有正确保护级别的默认析构函数。最后，我将我的原始类重命名为`enable_crtp`，`enable_down_cast`因为这正是它所做的：手动启用静态多态性，编译器自动启用动态多态性。

# sql - 如何正确索引多个字段以获得更快的结果

> ID：11546480
> 
> 赞同：1
> 
> 时间：2012-07-18T16:53:24.417
> 
> 标签：sql, performance, sql-server-2008, rdbms, indexing

我有一个包含 ConChainNum、Control 和 TransDate 的索引，我刚刚重建了索引。我正在使用的表有超过 1 亿条记录，以下查询不返回任何结果：

```
select  * from sbt_pos_sales 
where   conchainnum = 810 and 
        control = 852013688 and 
        transdate = 20120712 
```

鉴于我有一个专门用 where 子句中的三个字段创建的索引，我真的希望几乎立即得到结果，但是花了大约半分钟才告诉我那里没有结果。

有人可以向我解释为什么这个索引没有让它比这更快，如果我能以某种不同的方式让它更快？

执行计划：

```
<?xml version="1.0" encoding="utf-16"?>
<ShowPlanXML xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Version="1.1.1" Build="10.0.5500.0" xmlns="http://schemas.microsoft.com/sqlserver/2004/07/showplan">
  <BatchSequence>
    <Batch>
      <Statements>
        <StmtSimple StatementCompId="1" StatementEstRows="20.2265" StatementId="1" StatementOptmLevel="FULL" StatementSubTreeCost="348.687" StatementText="SELECT * FROM [ngdwdb]..[sbt_pos_sales] WHERE [conchainnum]=@1 AND [control]=@2 AND [transdate]=@3" StatementType="SELECT" QueryHash="0x11B117D9A8C6DF58" QueryPlanHash="0xBA3EFC04623601F6">
          <StatementSetOptions ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" NUMERIC_ROUNDABORT="false" QUOTED_IDENTIFIER="true" />
          <QueryPlan DegreeOfParallelism="8" MemoryGrant="5504" CachedPlanSize="48" CompileTime="95" CompileCPU="4" CompileMemory="368">
            <RelOp AvgRowSize="193" EstimateCPU="0.0655713" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="7330.87" LogicalOp="Gather Streams" NodeId="1" Parallel="true" PhysicalOp="Parallelism" EstimatedTotalSubtreeCost="348.686">
              <OutputList>
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="RowIdent" />
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="ConChainNum" />
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Control" />
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="TransDate" />
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="ControlGS" />
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="UPC_UCP" />
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="DateSold" />
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Price_UCP" />
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Store" />
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="QtySold" />
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="FileName" />
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="IssueCode" />
                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="DealerNum" />
              </OutputList>
              <RunTimeInformation>
                <RunTimeCountersPerThread Thread="0" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
              </RunTimeInformation>
              <Parallelism>
                <RelOp AvgRowSize="193" EstimateCPU="0.00766076" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="7330.87" LogicalOp="Inner Join" NodeId="2" Parallel="true" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="348.621">
                  <OutputList>
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="RowIdent" />
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="ConChainNum" />
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Control" />
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="TransDate" />
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="ControlGS" />
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="UPC_UCP" />
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="DateSold" />
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Price_UCP" />
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Store" />
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="QtySold" />
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="FileName" />
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="IssueCode" />
                    <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="DealerNum" />
                  </OutputList>
                  <RunTimeInformation>
                    <RunTimeCountersPerThread Thread="6" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                    <RunTimeCountersPerThread Thread="2" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                    <RunTimeCountersPerThread Thread="3" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                    <RunTimeCountersPerThread Thread="7" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                    <RunTimeCountersPerThread Thread="5" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                    <RunTimeCountersPerThread Thread="4" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                    <RunTimeCountersPerThread Thread="8" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                    <RunTimeCountersPerThread Thread="1" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                    <RunTimeCountersPerThread Thread="0" ActualRows="0" ActualEndOfScans="0" ActualExecutions="0" />
                  </RunTimeInformation>
                  <NestedLoops Optimized="true" WithUnorderedPrefetch="true">
                    <OuterReferences>
                      <ColumnReference Column="Bmk1000" />
                      <ColumnReference Column="Expr1009" />
                    </OuterReferences>
                    <RelOp AvgRowSize="58" EstimateCPU="14.9196" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="7330.87" LogicalOp="Compute Scalar" NodeId="5" Parallel="true" PhysicalOp="Compute Scalar" EstimatedTotalSubtreeCost="324.579">
                      <OutputList>
                        <ColumnReference Column="Bmk1000" />
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="ConChainNum" />
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Control" />
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="TransDate" />
                        <ColumnReference Column="Expr1008" />
                      </OutputList>
                      <ComputeScalar>
                        <DefinedValues>
                          <DefinedValue>
                            <ColumnReference Column="Expr1008" />
                            <ScalarOperator ScalarString="BmkToPage([Bmk1000])">
                              <Intrinsic FunctionName="BmkToPage">
                                <ScalarOperator>
                                  <Identifier>
                                    <ColumnReference Column="Bmk1000" />
                                  </Identifier>
                                </ScalarOperator>
                              </Intrinsic>
                            </ScalarOperator>
                          </DefinedValue>
                        </DefinedValues>
                        <RelOp AvgRowSize="58" EstimateCPU="15.196" EstimateIO="294.463" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="7330.87" LogicalOp="Index Seek" NodeId="6" Parallel="true" PhysicalOp="Index Seek" EstimatedTotalSubtreeCost="309.659" TableCardinality="107302000">
                          <OutputList>
                            <ColumnReference Column="Bmk1000" />
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="ConChainNum" />
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Control" />
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="TransDate" />
                          </OutputList>
                          <RunTimeInformation>
                            <RunTimeCountersPerThread Thread="6" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                            <RunTimeCountersPerThread Thread="3" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                            <RunTimeCountersPerThread Thread="2" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                            <RunTimeCountersPerThread Thread="7" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                            <RunTimeCountersPerThread Thread="8" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                            <RunTimeCountersPerThread Thread="5" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                            <RunTimeCountersPerThread Thread="1" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                            <RunTimeCountersPerThread Thread="4" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
                            <RunTimeCountersPerThread Thread="0" ActualRows="0" ActualEndOfScans="0" ActualExecutions="0" />
                          </RunTimeInformation>
                          <IndexScan Ordered="true" ScanDirection="FORWARD" ForcedIndex="false" ForceSeek="false" NoExpandHint="false">
                            <DefinedValues>
                              <DefinedValue>
                                <ColumnReference Column="Bmk1000" />
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="ConChainNum" />
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Control" />
                              </DefinedValue>
                              <DefinedValue>
                                <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="TransDate" />
                              </DefinedValue>
                            </DefinedValues>
                            <Object Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Index="[idxLoad]" IndexKind="NonClustered" />
                            <SeekPredicates>
                              <SeekPredicateNew>
                                <SeekKeys>
                                  <Prefix ScanType="EQ">
                                    <RangeColumns>
                                      <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="ConChainNum" />
                                    </RangeColumns>
                                    <RangeExpressions>
                                      <ScalarOperator ScalarString="(810)">
                                        <Const ConstValue="(810)" />
                                      </ScalarOperator>
                                    </RangeExpressions>
                                  </Prefix>
                                </SeekKeys>
                              </SeekPredicateNew>
                            </SeekPredicates>
                            <Predicate>
                              <ScalarOperator ScalarString="CONVERT_IMPLICIT(int,[NGDWDB].[dbo].[SBT_POS_SALES].[Control],0)=(852013688) AND CONVERT_IMPLICIT(int,[NGDWDB].[dbo].[SBT_POS_SALES].[TransDate],0)=(20120712)">
                                <Logical Operation="AND">
                                  <ScalarOperator>
                                    <Compare CompareOp="EQ">
                                      <ScalarOperator>
                                        <Convert DataType="int" Style="0" Implicit="true">
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Control" />
                                            </Identifier>
                                          </ScalarOperator>
                                        </Convert>
                                      </ScalarOperator>
                                      <ScalarOperator>
                                        <Const ConstValue="(852013688)" />
                                      </ScalarOperator>
                                    </Compare>
                                  </ScalarOperator>
                                  <ScalarOperator>
                                    <Compare CompareOp="EQ">
                                      <ScalarOperator>
                                        <Convert DataType="int" Style="0" Implicit="true">
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="TransDate" />
                                            </Identifier>
                                          </ScalarOperator>
                                        </Convert>
                                      </ScalarOperator>
                                      <ScalarOperator>
                                        <Const ConstValue="(20120712)" />
                                      </ScalarOperator>
                                    </Compare>
                                  </ScalarOperator>
                                </Logical>
                              </ScalarOperator>
                            </Predicate>
                          </IndexScan>
                        </RelOp>
                      </ComputeScalar>
                    </RelOp>
                    <RelOp AvgRowSize="136" EstimateCPU="0.0001581" EstimateIO="0.003125" EstimateRebinds="7329.87" EstimateRewinds="0" EstimateRows="1" LogicalOp="RID Lookup" NodeId="11" Parallel="true" PhysicalOp="RID Lookup" EstimatedTotalSubtreeCost="24.0341" TableCardinality="107302000">
                      <OutputList>
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="RowIdent" />
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="ControlGS" />
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="UPC_UCP" />
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="DateSold" />
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Price_UCP" />
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Store" />
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="QtySold" />
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="FileName" />
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="IssueCode" />
                        <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="DealerNum" />
                      </OutputList>
                      <RunTimeInformation>
                        <RunTimeCountersPerThread Thread="6" ActualRows="0" ActualEndOfScans="0" ActualExecutions="0" />
                        <RunTimeCountersPerThread Thread="2" ActualRows="0" ActualEndOfScans="0" ActualExecutions="0" />
                        <RunTimeCountersPerThread Thread="3" ActualRows="0" ActualEndOfScans="0" ActualExecutions="0" />
                        <RunTimeCountersPerThread Thread="7" ActualRows="0" ActualEndOfScans="0" ActualExecutions="0" />
                        <RunTimeCountersPerThread Thread="5" ActualRows="0" ActualEndOfScans="0" ActualExecutions="0" />
                        <RunTimeCountersPerThread Thread="4" ActualRows="0" ActualEndOfScans="0" ActualExecutions="0" />
                        <RunTimeCountersPerThread Thread="8" ActualRows="0" ActualEndOfScans="0" ActualExecutions="0" />
                        <RunTimeCountersPerThread Thread="1" ActualRows="0" ActualEndOfScans="0" ActualExecutions="0" />
                        <RunTimeCountersPerThread Thread="0" ActualRows="0" ActualEndOfScans="0" ActualExecutions="0" />
                      </RunTimeInformation>
                      <IndexScan Lookup="true" Ordered="true" ScanDirection="FORWARD" ForcedIndex="false" ForceSeek="false" NoExpandHint="false">
                        <DefinedValues>
                          <DefinedValue>
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="RowIdent" />
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="ControlGS" />
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="UPC_UCP" />
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="DateSold" />
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Price_UCP" />
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="Store" />
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="QtySold" />
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="FileName" />
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="IssueCode" />
                          </DefinedValue>
                          <DefinedValue>
                            <ColumnReference Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" Column="DealerNum" />
                          </DefinedValue>
                        </DefinedValues>
                        <Object Database="[NGDWDB]" Schema="[dbo]" Table="[SBT_POS_SALES]" TableReferenceId="-1" IndexKind="Heap" />
                        <SeekPredicates>
                          <SeekPredicateNew>
                            <SeekKeys>
                              <Prefix ScanType="EQ">
                                <RangeColumns>
                                  <ColumnReference Column="Bmk1000" />
                                </RangeColumns>
                                <RangeExpressions>
                                  <ScalarOperator ScalarString="[Bmk1000]">
                                    <Identifier>
                                      <ColumnReference Column="Bmk1000" />
                                    </Identifier>
                                  </ScalarOperator>
                                </RangeExpressions>
                              </Prefix>
                            </SeekKeys>
                          </SeekPredicateNew>
                        </SeekPredicates>
                      </IndexScan>
                    </RelOp>
                  </NestedLoops>
                </RelOp>
              </Parallelism>
            </RelOp>
            <ParameterList>
              <ColumnReference Column="@3" ParameterCompiledValue="(20120712)" ParameterRuntimeValue="(20120712)" />
              <ColumnReference Column="@2" ParameterCompiledValue="(852013688)" ParameterRuntimeValue="(852013688)" />
              <ColumnReference Column="@1" ParameterCompiledValue="(810)" ParameterRuntimeValue="(810)" />
            </ParameterList>
          </QueryPlan>
        </StmtSimple>
      </Statements>
    </Batch>
  </BatchSequence>
</ShowPlanXML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:40:44.823

我不会继续填写评论，而是将其正式化为答案......

根据您的执行计划，我建议在表上添加聚集索引。很难 100% 确定发生了什么，但 RID 查找是一个问题。

RID 查找是在没有与表关联的集群键时发生的情况。在非聚集索引中，如果存在聚集键，则将聚集键复制到非聚集索引中，从而加快找到索引条目后所需的任何行访问。在堆（具有非聚集索引的表）中，您没有该聚集键，因此您必须在堆中查找它。

这就是为什么你`INNER JOIN`在执行计划中有一个，即使`JOIN`你的 SQL 中没有。对表中的主键应用集群应该消除这个连接，并留下一个简单的索引搜索。

尽管目前的计划显示它现在消耗了您 89% 的时间，但我敢打赌，通过表上的聚集索引，您将把它简化为简单（而且更快）的索引查找。

编辑：

让我在查看您的执行计划 XML 后对其进行修改。尽管集群键应该仍然有帮助，但真正的问题是索引中的数据类型。在我展示的索引搜索中

`CONVERT_IMPLICIT(int,[NGDWDB].[dbo].[SBT_POS_SALES].[Control],0)=(852013688) AND CONVERT_IMPLICIT(int,[NGDWDB].[dbo].[SBT_POS_SALES].[TransDate],0)=(20120712)`

，这告诉我 Control 和 TransDate 与您在查询中提供的数据类型不同。如果您将其修复为不需要转换，您很可能会在查询中看到巨大的加速。

# signalr - 客户端无法识别 SignalR 断开功能

> ID：11546483
> 
> 赞同：0
> 
> 时间：2012-07-18T16:53:32.903
> 
> 标签：signalr

```
public Task Disconnect()
    {
        var context = new HaiTaxiContainer();
        var driver = context.OperatorEmployeeSet.Where(o => o.ConnectionId == Context.ConnectionId).FirstOrDefault();
        driver.IsWorking = false;
        driver.OperatorWorkingHistory.Add(new OperatorWorkingHistory
        {
            IsWorking = false,
            Time = DateTime.Now

        });
        return Clients.leave(Context.ConnectionId, DateTime.Now.ToString()); ;
    }

if (chat.disconnect!=null){
         chat.disconnect(function () {
                alert('Server has disconnected');
            });
             alert('Server disconnect==smt');
        }else{
            alert('Server disconnect==null');
        } 
```

客户端 chat.disconect 为空。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:09:44.150

根据您的代码，很难说出您实际在做什么 - 例如，什么是`chat`？但是，我认为您应该看看这个相关的问题/答案：[https](https://stackoverflow.com/a/9122242/700926) ://stackoverflow.com/a/9122242/700926关于“*如何确定服务器与 SignalR 客户端断开连接？* ” - 它可能有用。

# ruby-on-rails - 带有rails 2的“rake spec”运行速度极慢

> ID：11546486
> 
> 赞同：1
> 
> 时间：2012-07-18T16:53:40.247
> 
> 标签：ruby-on-rails, rake

我在我的 mac os x shell 上运行以下命令：

```
RAILS_ENV=test rake spec --trace
** Invoke spec (first_time)
** Invoke db:test:prepare (first_time)
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:abort_if_pending_migrations
** Execute db:test:prepare
** Invoke db:test:clone_structure (first_time)
** Invoke db:structure:dump (first_time)
** Invoke environment 
** Execute db:structure:dump
** Invoke db:test:purge (first_time)
** Invoke environment 
** Execute db:test:purge
** Execute db:test:clone_structure
** Execute spec 
```

这个命令在这里停止了超过 5 分钟才继续，所以我不知道发生了什么导致这个大的延迟。

关于如何找到减慢“执行规范”的任何想法？

谢谢

# java - Android 编程和 Java 语法

> ID：11546489
> 
> 赞同：0
> 
> 时间：2012-07-18T16:53:44.177
> 
> 标签：java

这是一个关于 Eclipse SDK 在为 Android 应用程序编写一些 JAVA 代码时使用的语法的问题。

我是一名嵌入式微控制器工程师，主要习惯于使用 Assembler（很久以前）和 C 进行编程。我是 C++ 和 JAVA 的新手，为了帮助我编写代码，我一直在使用 developer.android 的组合.com 获取背景信息，stackoverflow.com 获取真实世界示例，并发现它们非常有用。

所以，我编写代码来做我想做的事情没有问题，因为我一直都在这样做，但我发现很难理解编写 Android 应用程序所使用的语法。

例如，要访问 GPS，我的代码行之一是这样读取的：

```
LocationManager locationManager = (LocationManager)
this.getSystemService(Context.LOCATION_SERVICE); 
```

但可以缩短为：

```
LocationManager locationManager = (LocationManager)getSystemService(LOCATION_SERVICE); 
```

我更喜欢第二个版本，但为什么有些例子写得像第一个例子？两者似乎都工作正常。我见过其他使用“类”看起来更加复杂的示例。

其次，这不是做一件非常简单的事情的复杂方法吗：

```
Toast.makeText(getBaseContext(),"Hello World",Toast.LENGTH_SHORT).show(); 
```

为什么不：

```
Toast("Hello world"); 
```

现在我写代码的时间是过去的四倍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:27:12.933

欢迎来到 Android 和 Java 编程的世界。由于您来自汇编语言背景，我的建议是：习惯更多的打字。:)

关于第一个代码片段：首先，`this.`调用的限定符`getSystemService()`是多余的；你可以放弃它。`LOCATION_SERVICE`其次，您可以通过静态导入名称来消除限定符。将类似这样的内容添加到编译单元的导入中：

```
import static android.content.Context.LOCATION_SERVICE; 
```

或者，如果您不介意命名空间污染：

```
import static android.content.Context.*; 
```

关于第二个片段：出于架构原因，`Toast`最终需要将弹出窗口与某些应用程序上下文相关联。工厂方法的第一个参数`makeToast`是使这成为可能的原因。（顺便说一句，您只需要`getContext()`，而不是`getBaseContext()`。您还可以将上下文存储在字段中。）至于第三个参数 - 可以`makeText`说，可以提供具有默认显示时间的工厂方法版本，但是Android 没有提供这一点，所以你也被第三个参数困住了。您可以再次通过静态导入来避免限定符`LENGTH_SHORT`. 最后，工厂方法只返回一个`Toast`对象。您现在还不需`show()`要这样做；它可能会被隐藏起来并在未来展示。分开创建是很好的设计`Toast`对象从把它放在屏幕上的动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:03:16.903

1.  `this`这是一种随处可见的初学者 OOP 风格。它在您的第二个示例中暗示，第二个示例是更常见的样式。

2.  现在，这与一些工程有关。是的，您的第二个简短示例可能已经实现（除了这`Toast`是一个类，而不是一个函数，但类似的事情会起作用），但它会排除您可能想做的许多重要事情。A`Toast`可能不是一个轻量级的对象；你可能想要缓存它。这就是为什么你首先得到一个实例，`makeText`然后才调用`show`它。该`Toast`实例还将具有您需要控制的完整生命周期，但无法通过您的简单示例来控制。该实例可能会进行进一步的配置等。简而言之，这是有原因的，这在*Hello, world*代码中并不明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:40:58.117

**我会尽量以最简单的方式和尽我所能来解释这些事情。**

**1** 、 “ `.this`”指的是Java中的**当前对象**。" `.this`" 专门指向当前对象访问它自己的该类的实例变量成员。

**2.**使用“this”只是更具体。

**3.**现在在Toast的情况下，它需要“ `context`”参数指向它将显示Toast的Activity。（即在哪个Activity上）

**4.**如果您不在 Anonymous 类中，则可以使用“this”，或者如果您在 Anonymous 类中，则使用“ `Your_Activity_Name.this`”代替上下文。

**5.** `getBaseContext, getApplicationContext`都喜欢全局访问Application的各个部分。

**6.**我总是喜欢`Your_Activity_Name.this`在上下文中的地方。上下文表示将在其上显示 Toast 的 Activity。是的，活动中**没有** `Toast(String s)`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T16:54:53.910

演员表后的换行符只是为了防止台词过长。

对此：

```
Toast.makeText(getBaseContext(),"Hello World",Toast.LENGTH_SHORT).show(); 
```

...就像你说的那样写它*会*很简单，除了不做同样的事情。基本上，那条线是

1.  寻找最外层放置图形的地方
2.  设置要显示的文本，并设置一些格式或类似的
3.  然后展示它。

你想把它们分开，因为你并不总是写到最外面的世界，你可能想，例如，制作几个不同的文本块，`show90`或者`hide()`以后再做。（例如，考虑一条错误消息和一条成功消息。您喜欢构建它们一次，然后显示/隐藏您不需要的那些。）

现在，如果您可以定义您想要的上下文并且永远不想弄乱可见性，那么您可以创建一个功能来做到这一点。

# objective-c - 比较按钮值

> ID：11546492
> 
> 赞同：0
> 
> 时间：2012-07-18T16:53:57.250
> 
> 标签：objective-c

我的视图中有两个按钮。

```
[button1 setBackgroundImage:image1 forState:UIControlStateNormal];
[button2 setBackgroundImage:image2 forState:UIControlStateNormal]; 
```

如何比较这些按钮中的两个图像？我试过：

```
if (button1.imageView.image.CGImage == button2.imageView.image.CGImage)
{
   NSLog(@"equal");
}
else
{
  NSLog(@"not equal");
} 
```

它不起作用:(。

有什么建议吗？感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:57:36.767

试试这个

```
if ([[button1 backgroundImageForState:UIControlStateNormal] isEqual:[button2 backgroundImageForState:UIControlStateNormal]]) 
```

# asp.net-mvc-3 - .net MVC 3.0 文件上传带进度条

> ID：11546493
> 
> 赞同：1
> 
> 时间：2012-07-18T16:54:06.483
> 
> 标签：asp.net-mvc-3, c#-4.0, jquery, file-upload, progress-bar

我看到有类似的问题。但我找不到答案。这就是为什么我再次发布这个。对不起！！

我想使用 .net mvc 3.0 构建一个带有百分比栏的文件上传器

有一些jquery插件。但他们需要 html 5 支持。我正在尝试在没有 html 5 支持的情况下构建它。

目前我所做的是上传支持 Ajax 的文件。当用户上传文件时，我发出 ajax 请求并显示 loading.gif 直到请求完成。因此，对于简单的图像上传来说，这是一个非常严格的代码。

现在我正在尝试上传视频并通过他们的 REST API将其发送到[Vimeo 。](http://developer.vimeo.com/)

我可以做同样的事情。但由于文件很大，我想以一种很好的方式来做。

我的代码是这样的

看法

```
@using (Ajax.BeginForm("Upload", "Home", new AjaxOptions
                        {
                            UpdateTargetId = "form1",
                            InsertionMode = InsertionMode.Replace,
                            OnBegin = "ajaxValidate",
                            OnSuccess = "getGbPostSuccess",
                            OnFailure = "showFaliure"
                        }))
      //.......
      //rest of the form
} 
```

控制器

```
public ActionResult Upload()
{
     //Read file 
     //Post file to Vimeo (this is the part that take time to upload)
     //get uploaded video content
     return PartialView("xxxxx", Model); // return uploaded Video
} 
```

在此过程发生时，我使用一小段 javascript 显示 loading.gif。这段代码工作得很好。正如我之前提到的，我想通过放置百分比进度条使其更加用户友好。
希望我的问题很清楚。

请帮我...

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:35:33.110

> 但他们需要 html 5 支持。

没有必要。例如，[blueimp 文件上传](http://blueimp.github.com/jQuery-File-Upload/)插件测试浏览器功能，如果浏览器不支持 HTML5 XHR2 ，则可以使用[*jQuery iframe 传输。*](https://github.com/blueimp/jQuery-File-Upload/blob/master/js/jquery.iframe-transport.js#files)以下是有关浏览器支持的[更多详细信息。](https://github.com/blueimp/jQuery-File-Upload/wiki/Browser-support)

如果浏览器不支持 XHR2，[Uploadify是另一个使用 Flash 的示例。](http://www.uploadify.com/)

[Plupload](http://www.plupload.com/)是另一个非常强大的插件，如果浏览器不支持 XHR2，它支持多种等效插件。

因此，只需选择一个插件，阅读文档，将其集成到您的 ASP.NET MVC 3 应用程序中，然后尽情享受吧。

# ruby-on-rails - Sunspot_rails 不尊重 :auto_index 和 :auto_remove

> ID：11546497
> 
> 赞同：2
> 
> 时间：2012-07-18T16:54:29.187
> 
> 标签：ruby-on-rails, sunspot, sunspot-rails

我正在尝试使我们的应用程序对我们的搜索服务器的停机时间更具弹性。为此，我尝试禁用自动索引和删除，并在后台进程中手动执行它们。

我正在努力

```
searchable :auto_index => false, :auto_remove => false do
...
end 
```

但是每次我尝试保存或销毁记录时仍然收到连接错误。

回溯显示错误来自 solr 可搜索文件，因此肯定是 sunspot_rails 导致了问题。这是销毁的回溯中的一部分：

```
...
rsolr (1.0.8) lib/rsolr/client.rb:67:in `update'
rsolr (1.0.8) lib/rsolr/client.rb:121:in `delete_by_id'
sunspot (1.3.3) lib/sunspot/indexer.rb:36:in `remove'
sunspot (1.3.3) lib/sunspot/session.rb:137:in `block in remove'
sunspot (1.3.3) lib/sunspot/session.rb:136:in `each'
sunspot (1.3.3) lib/sunspot/session.rb:136:in `remove'
sunspot (1.3.3) lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove'
sunspot (1.3.3) lib/sunspot.rb:410:in `remove'
sunspot_rails (1.3.3) lib/sunspot/rails/searchable.rb:390:in `solr_remove_from_index'
sunspot_rails (1.3.3) lib/sunspot/rails/searchable.rb:93:in `block in searchable'
... 
```

知道为什么禁用这些钩子的选项不起作用吗？知道如何实际禁用它们吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T15:09:50.183

找到了我自己的问题的答案：

事实证明，虽然自动回调被禁用，但我仍然在不同的步骤中弄脏了它。sunspot_rails 有一个在请求结束时运行的清理步骤，并尝试将所有脏记录提交到 solr 服务器。要禁用它，请添加`auto_commit_after_request: false`到您的`sunspot.yml`.

# ios - 禁用 UIPopoverViewController 内容视图上的阴影

> ID：11546499
> 
> 赞同：0
> 
> 时间：2012-07-18T16:54:33.537
> 
> 标签：ios, ios5

我正在通过子类化 UIViewController 来为 UIPopoverController 创建自定义弹出框来管理内容视图，并为自定义背景创建 UIPopoverBackgroundView。一切都很好，除了 UIPopoverController 正在对内容视图应用阴影，使内容看起来有阴影边框。我似乎无法找到哪个视图的图层被阴影。如何禁用此阴影？有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:57:53.730

由于几个月后它仍然存在，我将通过说我实现了自己的弹出控制器来结束它。不过，很遗憾，有人会认为会有更好的方法......

# java - 从字符串数据中获取 X509 证书到期日期

> ID：11546500
> 
> 赞同：0
> 
> 时间：2012-07-18T16:54:34.280
> 
> 标签：java, jsp

我正在尝试从标签下的 xml 文件中获取 x509 证书的到期日期

```
<ds:X509Certificate> MBaAFI7JTi5oRslwv2B3MmERGbPKKUsSMFwGA1UdIARVMFMwUQYKKwYBBAEJFQEBADBDMEEGCCsG
AQUFBwIBFjVodHRwOi8vd3d3LmNpc2NvLmNvbS9zZWN1cml0eS9wa2kvcG9saWNpZXMvaW5kZXgu
aHRtbDATBgNVHSUEDDAKBggrBgEFBQcDATANBgkqhkiG9w0BAQUFAAOCAQEAs2DJZwgVLmZqQS2N
3Yp4iGYhZBG6vZSDaiaAg6u1wgrfq/byBd7H3Ei+V9I7MZ1aCh4s3kl6FJ1CoRhMQcM1gbxpCbPP
KAfrMv/5/MH8erMnole7m/MqVHETX1UbLEyagOioqK3cs8MzMKxC+Fdku6Bm+i/6xhUsc6XbrVJl
IHsVBB9+9ZnpjAjC9jj21r04N51cyfp6C37999TaybNEtCJlG0XTHfLbcyX65E9ndVaRd6GYu/d0
xW0MT5bKhA36KhpUROAbPS7rXKKkfCYnMkmImE7Hfvm3vRSahX+ehY1Tx9qJXFv3PYGzbyDbvpjV
2cSUgP/bhGATKSOZuhohrw==  </ds:X509Certificate 
```

>

我有将其读取为字符串的代码

```
NodeList nodelist = element.getElementsByTagName("ds:X509Certificate");
Element element1 = (Element) nodelist.item(0);
NodeList certificateItem = element1.getChildNodes();
String certificateValue = "---- BEGIN CERTIFICATE -------- " + "\n" +
"certificateItem.item(0).getNodeValue()" + "\n" + "--- END CERTIFICATE";                            
System.out.print("Certificate data is : " + certificateValue);
InputStream certinputstream = new ByteArrayInputStream(certificateValue.getBytes());
CertificateFactory cf = CertificateFactory.getInstance("X.509");
X509Certificate cert = (X509Certificate)cf.generateCertificate(certinputstream);
System.out.println("Expiry Date : " + cert.getNotAfter()); 
```

但是我收到以下错误 java.security.cert.CertificateParsingException: invalid DER-encoded certificate data at sun.security.x509.X509CertImpl.parse(Unknown Source) at sun.security.x509.X509CertImpl.(Unknown Source) 任何想法? 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:03:24.280

目前尚不清楚这是否*都是*错误的，但您没有使用文档中指定的*精确*格式：`CertificateFactory`

> 如果证书以 Base64 编码提供，则必须以 -----BEGIN CERTIFICATE----- 开头，结尾必须以 -----END CERTIFICATE----- 为界.

文本周围有空格，破折号数量错误，并且 . 之后没有破折号`END CERTIFICATE`。

您可能还想修剪节点值，因为它当前在数据后面有几个空格。

# jquery - jqPlot 在饼图上显示百分比和值

> ID：11546501
> 
> 赞同：8
> 
> 时间：2012-07-18T16:54:36.620
> 
> 标签：jquery, jqplot

我正在使用 jqPlot 和 jqplot.PieRenderer 来尝试显示饼图。在我想展示的标签上`value (percent)`。文档说您可以传递`dataLabel`一个标签类型数组[(source)](http://www.jqplot.com/docs/files/plugins/jqplot-pieRenderer-js.html#$.jqplot.PieRenderer.dataLabels)，但是，将`%d%%`(for percent) 和`%d`(for value) 放入`dataLabelFormatString`选项中最终不会显示任何内容。

这里有什么想法吗？

```
{ 
    seriesDefaults: {
        renderer: jQuery.jqplot.PieRenderer, 
        rendererOptions: {
            showDataLabels: true,
            dataLabels: ['value', 'percent'],
            dataLabelFormatString: "%d %d%%",
            sliceMargin: 4,
            fill: false
        }
    }, 
    legend: { show:true, location: 'e' }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-19T15:07:23.207

我阅读这些文档的方式略有不同。它是选项“值”、“百分比”、“标签”或标签数组。不是一系列选项。要执行您想要的操作，您需要将数据标签创建为真正的标签数组。

例如：

```
data = [
    ['Heavy Industry', 12],['Retail', 9], ['Light Industry', 14], 
    ['Out of home', 16],['Commuting', 7], ['Orientation', 9]
];

var total = 0;
$(data).map(function(){total += this[1];})

myLabels = $.makeArray($(data).map(function(){return this[1] + " " + Math.round(this[1]/total * 100) + "%";})); 
```

[请参阅此处](http://jsfiddle.net/larsenmtl/dFgGj/)的示例小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T16:37:33.263

采用

```
 formatter: function(label, series){
                        return '<div style="font-size:14pt;text-align:center;padding:2px;color:white;">'+Math.round(series.percent)+"%<br/>" + series.data[0][1] +'</div>';
                    }, 
```

# javascript - if条件如何在javascript中评估其值

> ID：11546504
> 
> 赞同：5
> 
> 时间：2012-07-18T16:54:51.643
> 
> 标签：javascript

javascript if 条件如何确定其值？，请参见以下示例：

```
<script type="text/javascript">

var bar = ("something" == true);
alert(bar); // 1

if ("something") {
    alert("hey!"); // 2
}

</script> 
```

为什么我指向 //2 而 //1 的'bar' 是假的？

正如我所看到`bar`的，值的计算方式几乎与 if 条件相同，还是没有？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T16:59:20.880

`"something" == true`是假的，因为字符串和布尔值必须被强制转换为可以比较的类型。但是，`if("something")`之所以有效，是因为非空字符串是一个真值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T17:01:07.073

这是因为 javascript 类型强制引擎的工作方式。当你说

```
"something" == true 
```

javascript 在您的“某物”字符串上调用 ToNumber 以将其与布尔值进行比较。“某物”产生不等于真的 NaN。

然而

```
if("something") 
```

仅检查字符串是否真实。因为它不是一个空字符串，它实际上是真的。

更多信息：http: [//webreflection.blogspot.co.il/2010/10/javascript-coercion-demystified.html](http://webreflection.blogspot.co.il/2010/10/javascript-coercion-demystified.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:00:11.007

这是因为在第一种情况下，JavaScript 会尝试将它们作为字符串（点亮`"something" == "true"`）进行比较，这将是错误的。

但是，在第二个条件中，表达式的结果是`"something"`，当转换为布尔值时，是`true`。

**[有关详细信息，请参见此处。](https://twitter.com/mattmight/status/191964430312030208)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T17:01:33.393

```
if("something") 
```

上面的声明将返回`true`，因为`"something"`它是一个有效的字符串。`false`如果它是一个空字符串 ( `""`) ，它将返回。它也发生在数字（`0`返回`false`，但`1`返回`true`）。

在`"something"==true`中，两者都转换为字符串，然后检查（“something”=="true"，将返回`false`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T17:09:17.053

与其说 javascript 如何处理 if 语句，不如说是 javascript 如何强制对象类型。

非空字符串是真的，尽管它不等于真。如果你尝试`"something != false`返回，你可以检查这个`true`。

正因为如此，很多人提倡在 JavaScript 中进行严格比较以避免这些陷阱。

例如：

```
"something" !== false // true
"something" === true  // false
"" === false          // false
0 === false           // false 
```

要阅读此内容，有大量文章。我推荐[道格拉斯·克罗克福德](http://javascript.crockford.com/style2.html)。

# json - Sencha touch 获取 json 错误

> ID：11546507
> 
> 赞同：0
> 
> 时间：2012-07-18T16:55:04.770
> 
> 标签：json, extjs, sencha-touch-2

每次我尝试使用 sencha touch 获取 json 提要时，我总是会收到此错误。

```
XMLHttpRequest cannot load http://api.example.com/index.php/news/all/format/json?_dc=1342630239638&node=root. Request header field X-Requested-With is not allowed by Access-Control-Allow-Headers. 
```

我怎样才能解决这个问题来阻止这个我真的很想和 sencha 一起工作，但我的大部分工作都将与 json 提要一起工作？？？

任何帮助

我的json输出看起来像这样它没有rootproperty节点？

```
[{
    "id": "7253",
    "title": "hello",
    "description": "",
    "source": "syrianews",
    "cat_name": "Syrianews"
}, {
    "id": "7208",
    "title": "hello",
    "description": "",
    "source": "syrianews",
    "cat_name": "Syrianews"
}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:44:27.410

您似乎正在尝试执行不允许的跨域 Ajax 请求。Ajax 请求具有相同域、相同端口、相同协议的安全要求。[如果您从http://www.tinyfactory.co/](http://www.tinyfactory.co/)加载您的应用程序，然后尝试向[http://api.example.com/](http://api.example.com/)发出 Ajax 请求，则安全沙箱将不允许它。

但有希望。输入 JSONP。如果您请求数据的域运行良好，JSONP 或填充的 JSON (http://en.wikipedia.org/wiki/JSONP) 是绕过此安全策略的一种方法。通常，您会在 API 上看到一个名为“回调”的参数，它的作用是将数据包装在您声明的 Javascript 函数中。例如：

```
http://api.example.com/datafeed.json?callback=foo 
```

将返回数据

```
foo({fName: 'Alex', lName: 'Rolek'}); 
```

JSONP 能够通过将脚本标记动态插入到 DOM 中来实现这一点，并将 'src' 属性设置为您使用回调请求 var 请求的 API。当 API 返回响应时，会在您的应用程序中调用函数“foo”，您可以开始使用响应数据。

在 Sencha Touch 中，更改：

```
proxy: 'ajax' 
```

到

```
proxy: 'jsonp' 
```

根据您的要求。只要 API 接受回调，Sencha Touch 就会完成剩下的繁重工作。

有关更多信息，请查看：

[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.JsonP](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.JsonP)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T15:05:49.480

Sencha 可以读取这样的非 root 响应吗？

[{“id”：“7253”，“title”：“hello”，“description”：“”，“source”：“syrianews”，“cat_name”：“Syrianews”}，{“id”：“7208” ，“标题”：“你好”，“描述”：“”，“来源”：“叙利亚新闻”，“猫名”：“叙利亚新闻”}]

# c++ - c++中双指针数组的默认初始化？

> ID：11546510
> 
> 赞同：0
> 
> 时间：2012-07-18T16:55:15.613
> 
> 标签：c++, arrays, default-value

当我声明一个固定大小的数组时，我很好奇这些是否初始化为零并且我的所有指针都是 0。我可以说`foo* arr[1000][1000]`，我看到所有条目都是 0..但我不确定这是否是我可以依赖的东西。我可以说`foo* arr[1000][1000] = {}`，但这个双数组是一个类中的成员变量，如果没有必要，我不希望在构造函数中有一个双 for 循环......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T16:57:23.957

取决于你如何分配数组。

如果是`static`全局变量，则内容将全部初始化为 0。如果是局部变量，则内容不会初始化为任何内容。

因此，由于您的数组是成员变量，因此不会自动将其初始化为 0。但是，您可以使用构造函数中的初始化列表将所有变量初始化为零：

```
struct A {
    //    VVV   value-initialises the contents of arr
    A() : arr() { }

    double arr[x][y];
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T16:57:16.017

这取决于上下文。如果数组是在命名空间级别定义的，那么静态初始化将为您设置所有指针为空。如果它被定义在函数范围内或作为类的成员，则没有这样的保证。

由于它是一个类的成员，它不会被正确初始化，所以你需要手动初始化它。您可以通过添加`arr()`到初始化列表来做到这一点。作为指针，您可以`memset`在一次调用中将整个数组设置为 0（这也将尽可能高效），但请注意，这仅适用于`POD`类型。

# sql-server - SSIS 包 FTP 任务错误：文件连接管理器“User::ProcessingFileLocation”中未指定目录

> ID：11546515
> 
> 赞同：5
> 
> 时间：2012-07-18T16:55:26.127
> 
> 标签：sql-server, ssis

我有一个具有 FTP 任务的 SSIS 包，它从 FTP 获取文件并保存在我的本地驱动器上，但我收到此错误：

`[FTP Task] Error: Directory is not specified in the file connection manager "User::ProcessingFileLocation"`

在 FTP 编辑器设置中：

`User::ProcessingFileLocation`使用 SSIS 变量

设置为此的值是 `\\MYSERVER\\Raw Data\\`

为什么在任何解决方案中都会出现此错误当我提到直接路径时它工作正常但变量出错:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-22T14:45:41.973

这个问题的另一种解决方案可能是影响我的解决方案。

FTP 任务不会创建 中指定的路径`LocalVariable`，请确保手动创建目标文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T17:15:42.970

使用集成服务目录、连接管理器中的本地路径覆盖 UNC 路径。右键单击项目并选择配置

# mysql - mysql 5.3 - 一些错误，但查询似乎没问题

> ID：11546518
> 
> 赞同：0
> 
> 时间：2012-07-18T16:55:32.290
> 
> 标签：mysql

> mysql 查询 - 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'a', '1') ON DUPLICATE KEY UPDATE count=count+1' 附近使用正确的语法

失败的查询：

```
INSERT INTO tags (ip, tag, count) 
  VALUES ('xx.xx.xxx.xxx', 'krwiopijcy', '1') 
  ON DUPLICATE KEY UPDATE count=count+1; 
```

我的查询有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:15:14.473

`count`是一个内置函数，因此[可能需要小心使用](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。但是，正如文档所说，作为列名非常好。您可能想使用

```
`count` 
```

话虽如此，我对使用此表结构的确切查询（无转义）没有任何问题：

```
CREATE TABLE `tags` (
  `ip` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `tag` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `count` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`ip`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

您在评论中的示例有一个撇号太多（在“umacku”后面），这似乎不是问题（因为它没有在错误消息中给出），但您应该粘贴确切的查询：

```
INSERT INTO tags (ip, tag, count)
    VALUES ('xx.xx.xxx.xxx', 'umacku'', '1')
    ON DUPLICATE KEY UPDATE count=count+1; 
```

# java - JPQL - 为 IN 插入项目列表

> ID：11546521
> 
> 赞同：1
> 
> 时间：2012-07-18T16:55:43.567
> 
> 标签：java, jpa, jpql

在 JPA 中，在创建查询时，我们可以执行

```
(" ... where a.name = :name ...")
.setParameter("name", user.getName()); 
```

但是，我希望 JPQL 中是否有某种方法可以做到：

```
(" ... where a.name in (:namelist) ...")
.setParameter("namelist", (List<String>)names); 
```

或者

```
" ... where a.name in (:namelist) ...")
.setParameter("namelist", (String[])names); 
```

不必完全是我上面举例说明的方式。我正在寻找任何方便的方法来在查询中构建一个 IN（或 NOT IN）列表。欢迎任何形式的建议。也许，有一个Apache util？

否则，我将不得不构造查询并将项目迭代地插入到 IN 列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:00:24.873

从 JPA2 开始，它应该开箱即用：

```
select a from Something a where a.name in :param 
```

其中 :param 是正确类型的集合。像：

```
List<Product> products =
    em.createQuery("select p from Product p where p.productId in :ids")
    .setParameter("ids", Arrays.asList(980001, 980032, 986712)).getResultList(); 
```

# php - 延长 Magento 访客会话 maxlifetime 的缺点？

> ID：11546528
> 
> 赞同：1
> 
> 时间：2012-07-18T16:56:26.377
> 
> 标签：php, session, magento

我们有兴趣为访问我们 Magento 网站的客人延长会话持续时间。默认情况下，如果客人将商品添加到购物车并在 24 分钟后离开页面，则会话将被销毁，并且当他们返回购物车时，购物车将归零。我通过 htaccess 将 maxlifetime 延长到 6 小时以对其进行测试，并且它可以正常工作。我知道我的经理有兴趣让会话保持 1 周甚至更长的时间。我的问题是：让会话保持这么长时间的潜在缺点是什么？服务器性能、会话文件的服务器空间、安全问题等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:49:34.833

除非您有明确的 PCI 合规性指令以仅保留特定窗口的会话数据 - 没有任何真正的安全问题。会话数据不包含任何敏感信息。

**通过扩展窗口，我能想到的唯一问题是。**

1.  您为会话/客户提供了更长/更大的机会，使会话/客户容易受到现有会话的 XSS 攻击（并不是说无论如何都不会出现这种情况）。
2.  您冒着会话目录变得过大的风险 - 导致任何会话清理 cron 必须遍历增加的文件数量。
3.  如果您在会话中存储了您不应该做的任何其他事情（即，使其大于默认的 4kb）；那么您将迅速消耗磁盘空间。
4.  如果您将内存存储用于会话（Memcache/Redis） - 那么您最终将用完可用空间并自动截断旧会话。因此，您将不得不提交相当大量的 RAM，纯粹用于遗留/归档会话存储。
5.  如果您在会话中使用数据库存储 - 那么您最终会以一种糟糕的方式结束。Magento 的基于数据库的会话存储非常可怕，并且在使用最轻微的提示时就会崩溃 -***避免***
6.  如果客户的机器是共享计算机，则可能存在潜在的安全问题。至少在 24 分钟（或其他时间）的会话波动中，会话很可能在其他用户可以利用它之前就已经过期。

### 但是有更好的解决方案

除了延长现场会话时间之外，您是否可能想过研究一个更复杂的解决方案，如果购物车已被遗弃，您可以通过电子邮件提醒客户并给他们一个链接以重新恢复购物车内容/愿望清单/会话等

这显然会为您提供基础解决方案以及您可以主动转换客户的优势 - 而它所需要的只是捕获电子邮件地址。

# c# - ASP.NET MVC：构建 Json ActionResult 的最佳 C# 方法

> ID：11546534
> 
> 赞同：6
> 
> 时间：2012-07-18T16:56:49.013
> 
> 标签：c#, .net, asp.net-mvc, json, asp.net-mvc-4

过去也有人问过类似的问题，但现在似乎有点过时了。我试图就在 ASP.NET MVC 中构建 JsonResult 的最佳方式达成当前普遍共识。这个问题的上下文是使用 .NET 4/4.5 & MVC 4 中可用的最新方法

以下是我多年来遇到的一些流行方法：

```
var json1 = new { foo = 123, bar = "abc" };

var json2 = new Dictionary<string, object>{ { "foo", 123 }, { "bar", "abc" } };

dynamic json3;
json3.foo = 123;
json3.bar = "abc"; 
```

还请解释您首选方法的优缺点

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-18T17:01:52.613

我个人使用这个：

```
public class MyViewModel
{
    public int Foo { get; set; }
    public string Bar { get; set; }
} 
```

进而：

```
public ActionResult Foo()
{
    var model = new MyViewModel
    {
        Foo = 123,
        Bar = "abc"
    };
    return Json(model, JsonRequestBehavior.AllowGet);
} 
```

优点：

*   强类型
*   没有魔线
*   重构友好
*   单元测试友好
*   该代码可以很容易地转换为新的 Web Api 控制器操作调用，保持前面的观点正确：

    ```
    public class ValuesController: ApiController
    {
        public MyViewModel Foo()
        {
            return new MyViewModel
            {
                Foo = 123,
                Bar = "abc"
            };
        }
    } 
    ```

缺点：还没遇到过。

# c++ - Visual C++ 监控访问过的网站的最佳方式？

> ID：11546538
> 
> 赞同：1
> 
> 时间：2012-07-18T16:56:50.900
> 
> 标签：c++, .net, visual-studio, visual-c++

我的程序需要监控程序运行时访问的所有网站。

我已经找到了一些方法来做到这一点，我想知道哪种方法是“最好的”（我的意思是最好的，最容易实现并提供最佳性能）。该程序仅适用于较新版本的 Windows！它应该适用于 x86 和 x64。我需要能够监控的浏览器是 IE、FireFox、Chrome 和 Opera。

我可以查看每个浏览器的历史文件，但这将是一个非常糟糕的方法（较新版本的浏览器可能会使代码停止工作等）

我可以检查每个窗口（HWND），看看它是否是访问网站的浏览器......但这真的是一个好方法吗？如果是这样我该怎么做？链接或代码片段谢谢:)

我可以使用数据包嗅探器，但如果我只想要网址，那就有点过分了......

代理不是一个好的解决方案（对吗？），因为它会减慢浏览速度（至少我这么认为）......

或者我可以用其他更好的方式来做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:47:19.877

由于您需要处理多个浏览器，因此代理解决方案将是最*可靠*的解决方案- 如果设计得当，不应该产生太多开销。数据包嗅探太复杂了。

您也许可以破解支持您当前所需浏览器的当前版本的特定内容，但请注意“hack”一词，并在其中添加“维护噩梦”。

此外，您可能需要重新考虑您的标签 - qeustion 与 .net、vc++ 或 vstudio 并没有太大关系 - 不过它可能需要 win32 api :)

# cakephp - CakePHP - 客户有多个 Country 字段。如何将 Country 模型链接到 Customer？

> ID：11546540
> 
> 赞同：0
> 
> 时间：2012-07-18T16:56:52.057
> 
> 标签：cakephp, cakephp-2.2

国家/地区表如下所示：

```
iso | name
--------------------------
AD  | Andorra
AE  | United Arab Emirates
AF  | Afghanistan

...etc 
```

我的客户表有以下所有存储国家代码的字段：

```
id | country_origin | current_country_study | address_country
--------------------------------------------------------
54 | BE             | GB                    | GB 
```

我不确定如何链接 Country 模型，以便在对 Customer 模型进行查找时检索国家/地区的*名称*。如果我有一个名为的字段，`country_id`我会没事，但不确定如何处理多个字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:06:42.860

别名应该可以解决问题：

```
public $belongsTo = array(
    'CountryOrigin' => array(
        'className'    => 'Country',
        'foreignKey'    => 'country_origin_id'
    ),
    'CurrentCountry' => array(
        'className'    => 'Country',
        'foreignKey'    => 'current_country_id'
    ),
    ....
); 
```

您需要更新`customers`表以获取新的外键字段。

# java - 通过超链接将多个大型数组从 Servlet 传递到另一个 Servlet

> ID：11546541
> 
> 赞同：0
> 
> 时间：2012-07-18T16:56:55.240
> 
> 标签：java, jsp, servlets, parameters

我正在制作一个显示大量数据的网页。最初，用户在 jsp 中输入一个表单，其中包括他们上传文件和选中选项的复选框。当用户点击提交时，它会转到处理表单信息的 servlet。信息被处理，结果，创建了几个大的字符串数组。然后我重定向到显示页面，传递参数如下：

```
request.setAttribute("blah", array);
request.getRequestDispatcher(page).forward(request,response); 
```

在显示页面上，我希望能够让用户选择他/她想要查看的页面。为此，我在将页码作为参数传递的页面顶部创建了链接：

```
<a href="DisplayPage?Page=x">Page x</a> 
```

（DisplayPage 是显示数据的 servlet，因此链接使用不同的参数指向自身）

问题是，为了再次显示数据，必须将大数组传递回 DisplayPage。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:08:07.007

在链接中将它们作为多值请求参数传递，

```
<a href="DisplayPage?Page=x&blah=value1&blah=value2&blah=value3">Page x</a> 
```

```
String[] blah = request.getParameterValues("blah"); 
```

或将其存储在会话中，如有必要，由您也作为请求参数传递的唯一 ID 标识。

```
String id = UUID.randomUUID().toString();
request.getSession().setAttribute(id, array);
request.setAttribute("id", id); 
```

```
<a href="DisplayPage?Page=x&blah=${id}">Page x</a> 
```

```
Object blah = request.getSession().getAttribute(request.getParameter("blah")); 
```

# c++ - 向量 push_back 覆盖所有条目

> ID：11546548
> 
> 赞同：1
> 
> 时间：2012-07-18T16:57:17.700
> 
> 标签：c++, vector, char, fgets, push-back

我想使用 push_back 函数用文本文件中的行填充我的向量。但它会用最后一行覆盖所有条目。这是源代码：

```
 int main() {
    std::vector<char*> lines;
    FILE* file;
    file = fopen("textfile.txt", "r");
    const size_t max_line_length = 1000;
    char line[max_line_length + 1];
    while ( !feof(file)) {
      fgets(line, max_line_length, file);
      lines.push_back(line);
    }
    fclose(file);
 } 
```

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T16:59:18.140

您正在覆盖 Line，这实际上是您存储的唯一内容，因为您从不进行深度复制。试试这个：

```
int main() {
    std::vector<std::string> lines; // <- change this!
    FILE* file;
    file = fopen("textfile.txt", "r");
    const size_t max_line_length = 1000;
    char line[max_line_length + 1];
    while ( !feof(file)) {
      fgets(line, max_line_length, file);
      lines.push_back(line);
    }
    fclose(file);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:01:19.133

您将相同的缓冲区 ( `line`) 推入向量的每个位置。您需要：

1.  使用为每一行重新分配一个新的 char*`new`
2.  用于在每一行`strdup`复制`line`缓冲区
3.  使用 std::string 作为@milleniumbug 建议（我最喜欢的）

# jquery - jQuery-UI AutoComplete 不适用于动态字段

> ID：11546559
> 
> 赞同：3
> 
> 时间：2012-07-18T16:57:54.360
> 
> 标签：jquery, html, json, jquery-ui, jquery-ui-autocomplete

自动完成对静态字段有效，但对动态字段无效。

我已经尝试过`.live()`方法，因为我无法让它正常工作。

这是我的 HTML：

```
<table>
    <tr class="selectmatprimas">
        <td>
            <input type="text" class="selectmatprima" />
            <input type="text" name="matprimas[]" />
        </td>
    </tr>
    <tr class="clone" style="display:none;">
        <td>
            <input type="text" class="selectmatprima" />
            <input type="text" name="matprimas[]" />
        </td>
    </tr>
</table>
<input type="button" value="addmore" id="addmore" /> 
```

​ 这是我的 JS：

```
var src = [
    {
        "label": "Mat\u00e9ria Prima 1",
        "value": "1"
    },
    {
        "label": "Mat\u00e9ria Prima 2",
        "value": "2"
    }
];

$("input.selectmatprima").autocomplete({
    source: src,
    select: function (event, ui) {
        event.preventDefault();
        this.value = ui.item.label;
        $(this).next().val(ui.item.value);
    },
    focus: function (event, ui) {
        event.preventDefault();
        this.value = ui.item.label;
        $(this).next().val(ui.item.value);
    }
});

$("input#addmore").click(function(){
    var a = $('tr.clone').html();
    var b = $('tr.selectmatprimas:last');
    b.after("<tr class='selectmatprimas'>"+a+"</tr>");
}); 
```

[在线演示](http://jsfiddle.net/pK78z/)

如您所见，当我单击添加更多按钮时，自动完成功能不适用于新字段...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T18:02:54.543

我只是用你的代码触及了表面，但这是一个工作[版本](http://jsfiddle.net/pK78z/2/)

关键是 jQuery 的`on()`函数，你可以在[这里阅读](http://api.jquery.com/on/)

# asp.net - 表格单元格中的 asp.net 内联标签

> ID：11546561
> 
> 赞同：0
> 
> 时间：2012-07-18T16:57:59.807
> 
> 标签：asp.net, syntax, styles, inline

使用内联语法时，我无法正确显示“样式宽度”值。它呈现为：

风格=""

有什么建议么。

```
<table>
    <tr id="tr1" runat="server">
        <td style="width: <%= this.LabelColumnWidth %>">
            &nbsp;
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:26:33.740

内联尝试2：

试一试

```
<td style='<%# "width: " + this.LabelColumnWidth %>'> 
```

想也许整个事情都需要在内联代码中。而不仅仅是宽度的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:00:49.960

试一试

```
<td style="width: <%# this.LabelColumnWidth %>"> 
```

**编辑：（现在我知道更多）**

你为什么不添加一个`id`这样的`td`东西

```
 <td id="test" runat="server"> 
```

然后在代码后面做

```
 test.style = "width: 100px;" // or whatever 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:37:55.013

埃里克提出的答案几乎是正确的。只是，它应该有一个 = 而不是 #

```
<td style='<%= "width:" + this.LabelColumnWidth %>' > 
```

仅当您需要包含 eval() 或 bind() 函数时才使用哈希。否则，使用 = 符号。

# jquery - Ajax 成功功能未显示所有消息

> ID：11546562
> 
> 赞同：-1
> 
> 时间：2012-07-18T16:58:06.137
> 
> 标签：jquery, ajax

下面的 ajax 成功函数只显示我最后一个 error4 消息。我正在检查的回复正常，但未显示消息。

```
$.ajax({
    type:...
    url :...
    data:...
success: function (exst_rsp) {
//if email is not register
    if (exst_rsp == "email_no") {
        exstInfo.text("error1");
        exstInfo.addClass("error");
        email_err = true;
    }
    else {
        exstInfo.text("");
        exstInfo.removeClass("error");
        email_err = false;
    }

//if user has already submit a coupon
    if (exst_rsp == "played") {
        couponInfo.text("error2");
        couponInfo.addClass("error");
        email_pl_err = true;
    }
    else {
        couponInfo.text("");
        couponInfo.removeClass("error");
        email_pl_err = false;
    }

//if email & pass don't match
    if (exst_rsp == "email_pass_no") {
        matchInfo.text("error3");
        matchInfo.addClass("error");
        pass_err = true;
    }
    else {
        matchInfo.text("");
        matchInfo.removeClass("error");
        pass_err = false;
    }

//if captcha don't match
    if (exst_rsp == "wrong") {
        capthInfo.text("error4");
        capthInfo.addClass("error");
        captcha_err = true;
    }
    else {
        capthInfo.text("");
        capthInfo.removeClass("error");
        captcha_err = false;
    }

    if (exst_rsp == "ok") {
        exst_rsp_ok = false;
        $('#content').load('f.php');
    }
    else {
        exst_rsp_ok = true;
    }
    if (email_reg_err == true || email_pl_err == true || email_pass_err == true || captcha_err == true || exst_rsp_ok == true) {
        return false;
    }
    else {
        return true;
    }
}
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:57:04.863

您的代码可以使用一些重构，并且可以使用更简洁的功能完成您想要的功能，但是为了给您一个工作示例，您可以从这里开始。

[http://jsfiddle.net/Q3Zpk/1/](http://jsfiddle.net/Q3Zpk/1/)

您可以更改数组中的值以查看相应的 html 更改。

我将错误放在一个数组中，以便让您抢占先机，但我会考虑使用错误代码而不是字符串和一个函数，该函数将该数组传递给它并相应地解析错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T06:52:19.737

错误是我使用相同的 ID 来显示错误。代码已更正。

并且工作正常！

谢谢

# layout - unity3D ScrollView 滚动范围

> ID：11546567
> 
> 赞同：2
> 
> 时间：2012-07-18T16:58:12.817
> 
> 标签：layout, position, scrollview, unity3d

我正在尝试创建一个滚动视图，但我不知道如何确定滚动的最大范围（或者更好的是，最大滚动位置）。

这是我试图做的，没有任何积极的结果：

```
void Update()
{
  //get the amount of space that my text is taking
  textSize = gs.CalcHeight(new GUIContent(text), (screenWidth/2));

  if(Input.touchCount > 0 && Input.GetTouch(0).phase == TouchPhase.Moved && Input.GetTouch(0).tapCount==1) 
  {
    var touch = Input.touches[0];

   //check if touch is within the scrollView area
   if(touch.position.x >= (screenWidth/2) && touch.position.x <= (screenWidth) && touch.position.y >= 0 && touch.position.y <= (screenHeight))
   {
     if(touch.phase == TouchPhase.Moved)
     {
       scrollPosition[1] += touch.deltaPosition.y;
       if(scrollPosition[1] < 0)
       {
           scrollPosition[1] = 0;
       }

       //I subtracted this cause i read that the scrollbars take 16px
       if(scrollPosition[1] > (textSize-scrollViewRect.yMax-16)) //scrollViewRect is a Rect with the size of my scrollView
       {
          scrollPosition[1] = textSize-scrollViewRect.yMax-16;
       }
     }
   }
  }
}

void OnGUI()
{
 screenWidth = camera.pixelWidth;
 screenHeight = camera.pixelHeight;
 GUILayout.BeginArea(new Rect(screenWidth/2, 0, screenWidth/2, screenHeight));

 GUILayout.BeginScrollView(scrollPosition/*, GUILayout.Width (screenWidth/2), GUILayout.Height (screenHeight/2)*/, "box");

 GUILayout.Label (new GUIContent(text), gs);

 // End the scrollview
 GUILayout.EndScrollView ();
 scrollViewRect = GUILayoutUtility.GetLastRect();
 GUILayout.EndArea();
} 
```

假设 scrollView 位于屏幕的右半部分，则完成此操作。

你们能帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T14:15:22.537

如[GUI.BeginScrollView](http://docs.unity3d.com/Documentation/ScriptReference/GUI.BeginScrollView.html)的 API 文档中所示，您可以将 Vector2 分配给 BeginScrollView 的声明，以跟踪和更新框已滚动到的位置。

我举个例子：

```
using UnityEngine;
using System.Collections;

public class ScrollSize : MonoBehaviour {

private int screenBoxX  = Screen.width;
private int screenBoxY  = Screen.height;

private int scrollBoxX  = Screen.width  * 2;
private int scrollBoxY  = Screen.height * 3;

public Vector2 scrollPosition = Vector2.zero;

void Awake()
{
    Debug.Log ("box size is " + scrollBoxX + " " + scrollBoxY); 
}

void OnGUI()     
{
    scrollPosition = GUI.BeginScrollView(new Rect(0, 0, screenBoxX, screenBoxY),
                         scrollPosition, new Rect(0, 0, scrollBoxX, scrollBoxY));

    GUI.EndScrollView();

    // showing 4 decimal places
    Debug.Log ("Box scrolled @ " + scrollPosition.ToString("F4"));
}
} 
```

为了解释这个例子，我们假设屏幕分辨率为 800 x 600。因此屏幕上可查看的滚动框将为 800 宽和 600 高，滚动框的内部区域为 1600 x 1800。

我们通过将 Gui.BeginScrollView() 指定为 Vector2、scrollPosition 的值来创建滚动框。随着滚动框水平和垂直滚动，Vector2 将更新滚动值。

如果滚动框滚动到最左上角的位置，则 scrollPosition 的值将为 0,0。

如果滚动框滚动到最右下角的位置，scrollPosition 的值将是 816、616，即屏幕上框的大小加上滚动条的粗细。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-28T03:34:22.553

我知道这是 3 年后，但也许它也会帮助其他人......

我发现将 设置`scrollPosition`为一个非常高的数字会强制滚动条到底部：

```
scrollPosition.y = 999.9f; 
```

然后你可以像这样读取位置：

```
scrollPosition = GUILayout.BeginScrollView(scrollPosition, 
                                           GUILayout.Width(370),  
                                           GUILayout.Height(135)); 
```

它将被设置为最大值。

希望这可以帮助！

# html - 不拉伸填充

> ID：11546572
> 
> 赞同：1
> 
> 时间：2012-07-18T16:58:40.697
> 
> 标签：html, css

`<a>`不拉伸填充`<li>`。 [http://www.bungle.ca](http://www.bungle.ca) - 顶部的水平导航栏。

这有几十个可搜索的问题；

*   元素缺少标签：我的代码验证。
*   元素向左浮动：我的都没有浮动。
*   元素有填充：我的都没有填充。
*   内联元素设置了宽度：我的没有。

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:00:31.847

您在 上设置了一个高度`<li>`，但没有在 上设置一个`<a>`，所以您期望`<a>`神奇地填充`<li>`? 不去上班。`<a>`在而不是指定一个高度`<li>`，你应该很好。

# openid - DotNetOpenAuth OAuth 2.0 示例如何工作？

> ID：11546575
> 
> 赞同：1
> 
> 时间：2012-07-18T16:58:43.193
> 
> 标签：openid, dotnetopenauth

我似乎无法让这个示例真正运行。它只是一直说没有找到 OpenID 端点。该示例位于 DotNetOpenAuth 的 zip 下载中。

我正在尝试运行 OAuth2 项目来测试 OAuthAuthorizationServer。因此，我运行 OAuthClient 项目，单击 Interop with Authorization Server 示例（授权代码授予）和使用 WCF w/OAuth 2.0 的资源服务器，然后选择 GetName 并单击请求授权。

它正确地将我重定向到 OAuthAuthorizationServer 并请求我的开放 ID。这是我卡住的地方。它使用的是什么openid？我可以输入什么 openID 作为测试？我尝试使用我的 google openid，没有用。我不知道在这一点之后该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T23:19:38.347

如果您启动**OAuthAuthorizationServer**（这是您的 AS）项目，您将看到一个登录链接。此登录链接将打开页面 /Account/LogOn。在登录页面上，您有一个标有 OpenID 的输入框。这需要您的 OpenID 提供者的端点。如果是 Google，请输入[https://www.google.com/accounts/o8/id](https://www.google.com/accounts/o8/id) 。在此处查看其他人[OpenID 端点](https://stackoverflow.com/questions/3132048/openid-endpoints)

# ruby-on-rails - 如何查找 ActiveRecord::Base.update 的文档？

> ID：11546580
> 
> 赞同：4
> 
> 时间：2012-07-18T16:59:12.707
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在 Ruby/Rails api [http://api.rubyonrails.org/](http://api.rubyonrails.org/)中查找方法文档的过程是什么。

我们以方法`ActiveRecord::Base.update`为例。它用于其中一个railscasts。

1.  api 文档中没有提到更新类 [http://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)
2.  [Base https://github.com/rails/rails/blob/0065f378262dc3f47880ce6211c7474bc7d11f0b/activerecord/lib/active_record/base.rb](https://github.com/rails/rails/blob/0065f378262dc3f47880ce6211c7474bc7d11f0b/activerecord/lib/active_record/base.rb)`update`的源代码中 没有任何方法
3.  事实上，我什至在 `ActiveRecord::Base`.

我怀疑这个方法在 ActiveRecord::Relation 中。但是，我不确定。

我是 Ruby/Rails 的初学者，我来自 Java 世界，我通常希望在该类的 javadoc 中看到所有方法（也继承）。在 Ruby/Rails 的情况下，为混合/继承方法找到最有效的相关文档是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:11:09.720

`ActiveRecord::Base#update`根据[APIdock](http://apidock.com/rails/ActiveRecord/Base/update/class) ，您可能找不到任何好的文档，因为该方法自 Rails 版本 2.3.8 以来已被弃用。.

您仍然可以使用它的原因是因为它已被移动到`ActiveRecord::Relation`可以在`rails/activerecord/lib/active_record/relation.rb`.

`rails/activerecord/lib/active_record.rb`包含所有包含的`autoload`s 。`ActiveRecord``:Relation`

的文档`ActiveRecord::Relation#update`如下：

> 如果验证通过，则更新一个对象（或多个对象）并将其保存到数据库中。无论对象是否成功保存到数据库，都会返回结果对象。
> 
> ==== 参数
> 
> *   +id+ - 这应该是要更新的 id 或 id 数组。
> *   +attributes+ - 这应该是属性散列或散列数组。
> 
> ==== 例子

```
# Updates one record 
Person.update(15, :user_name => 'Samuel', :group => 'expert')

# Updates multiple records 
people = { 1 => { "first_name" => "David" }, 2 => { "first_name" => "Jeremy" } }       
Person.update(people.keys, people.values) 
```

编辑：要回答您最初的问题，在大多数情况下，只要信息是最新的，在[api.rubyonrails.org上进行搜索就足以找到您要查找的信息。](http://api.rubyonrails.org/)

有关可能较旧的 API 详细信息，请使用[apidock.com/rails](http://apidock.com/rails)。在那里搜索“更新”实际上会显示两个版本 (`::Base`和`::Relation`)，并为您提供有关每个版本以及每个版本使用的 Rails 的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:15:15.380

ActiveRecord::Base.update 不再存在，您可以在此处看到：http: [//apidock.com/rails/ActiveRecord/Base/update/class](http://apidock.com/rails/ActiveRecord/Base/update/class)，现在是 ActiveRecord::Relation，如下所示：[http://apidock。 com/rails/ActiveRecord/关系/更新](http://apidock.com/rails/ActiveRecord/Relation/update)

# ios - 自定义 URL 方案最大 URL 长度

> ID：11546582
> 
> 赞同：33
> 
> 时间：2012-07-18T16:59:16.417
> 
> 标签：ios, custom-url

根据标题，当在应用程序中使用自定义 URL 方案时，URL 的最大长度是多少？

例如，如果我通过 URL 启动另一个应用程序，并使用类似的东西传递一个数据块

   myappscheme://some/path?data=0123456789ABCDEF

在 URL 被切断（或系统根本拒绝启动其他应用程序）之前，该字符串可以得到多长时间？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-03T14:38:41.967

不幸的是，答案似乎不可用。我能找到的任何 iOS 文档中都没有专门定义 max len。

正如上面 MSK 的链接所指出的，URL 基本 url 长度存在限制，而不是 url 的绝对字符串长度。因此，对于最多大约 2000 个字符，这可能是一个安全的选择。

但是，在测试中似乎没有上限。我能够在 iOS 上毫无问题地使用 365,535 个字符的 URL。但是没有要求苹果继续支持它，所以它是“使用风险自负”。然而，我想说的是，基于许多应用程序正在使用它来传输信息，包括应用程序之间的大量数据，Apple 可能会继续支持它，因为似乎没有理由减少长度.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-11-15T02:25:34.723

[（以下是[另一个问题的答案](https://stackoverflow.com/a/38047510/1033581)的转贴，但它也直接回答了这里的问题。）]

在 Apple 平台 (iOS/iPadOS/macOS/tvOS/watchOS) 上，限制为**2 GB**长的 URL 方案，如[Swift 源代码中的此评论](https://github.com/apple/swift-corelibs-foundation/blob/b23dc8e249987442811e9e0097c326d7083784ac/CoreFoundation/URL.subproj/CFURLComponents_URIParser.c#L708)所示：

> ```
> // Make sure the URL string isn't too long.
> // We're limiting it to 2GB for backwards compatibility with 32-bit executables using NS/CFURL
> if ( (urlStringLength > 0) && (urlStringLength <= INT_MAX) )
> {
> ... 
> ```

* * *

在 iOS 上，我已经测试并确认即使是 300+ MB 长的 URL 也可以接受。你可以在 Objective-C 中尝试这样长的 URL：

```
NSString *path = [@"a:" stringByPaddingToLength:314572800 withString:@"a" startingAtIndex:0];
NSString *js = [NSString stringWithFormat:@"window.location.href = \"%@\";", path];
[self.webView stringByEvaluatingJavaScriptFromString:js]; 
```

并抓住它是否成功：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSLog(@"length: %@", @(request.URL.absoluteString.length));
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-25T23:29:42.657

上面的答案具有误导性。文档并没有真正提到它，但路径和文件名确实有长度限制。

您可以在此处看到文件路径或名称可以占用的长度有限制。你可以检查这些`syslimits.h`。

```
#define NAME_MAX          255   /* max bytes in a file name */
#define PATH_MAX         1024   /* max bytes in pathname */ 
```

您可以记录它们并亲自查看，如下所示：

```
NSLog(@"PATH MAX VALUE: %i", PATH_MAX) 
```

UTF-8 中的路径限制为 1024 个字节或 1024 个字符。路径中的文件名限制为 255 个字节或 UTF-8 中的 255 个字符。

我在尝试处理已编码日文字符的文件时遇到了这个问题（这会显着延长 URL/名称）。我唯一的解决方案是立即裁剪名称。

您可以在此 Apple 支持页面上看到他们谈论某些语言（如韩语或日语）的字符如何占用更多字节并导致问题（尽管它们并没有真正提供解决问题的好方法）：

[https://support.apple.com/en-is/HT202808](https://support.apple.com/en-is/HT202808)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-12-07T10:09:03.430

我创建[了一个简单的项目来测量 limit](https://github.com/zoul/ios-url-scheme-length-limit)，目前看来即使是巨大的兆字节也可以。显然，在未来依赖这个数字是不明智的。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-14T12:57:12.570

参考[http://en.wikipedia.org/wiki/URI_scheme](http://en.wikipedia.org/wiki/URI_scheme)：

> 方案名称由一系列字符组成，以字母开头，后跟字母、数字、加号 ("+")、句点 (".") 或连字符 ("-") 的任意组合。尽管方案不区分大小写，但规范形式是小写的，并且指定方案的文档必须使用小写字母。它后跟一个冒号（“：”）。

长度无关紧要。

# entity-framework-4 - 实体框架：对派生类型的字段进行排序

> ID：11546588
> 
> 赞同：2
> 
> 时间：2012-07-18T16:59:45.550
> 
> 标签：entity-framework-4

我很确定我不能在 EF4.3 中做我想做的事情，但在我放弃尝试之前，我想我会由一些更有经验的程序员来运行它。

我有一个模式，其中两种实体类型“person”和“org”，每个都派生自一个我称之为“named”的根实体。这种结构允许我通过多对多关系“entity_address”将“named”的实例与另一个名为“address”的实体的实例相关联，而无需区分“named”实体是组织还是人。

当我查询 entity_address 时，我希望能够根据 entity_address 实例是“人”还是“组织”，按不同的属性对结果进行排序。对于一个人来说，排序算法的“输入”可能是属性“last_name”的值，而对于一个组织来说，它可能是属性“org_name”。

如果我尝试明显：

```
IQueryable<named> sorted = entities.OrderBy(x => ( x is person ) ? ( (person) x ).last_name : ( (org) x ).org_name); 
```

当我访问“排序”时，EF 会抛出一个关于只能转换原始类型的异常。我认为它不能将强制转换运算符应用于“x”实例。

我尝试了很多不太明显的方法，但没有成功:)。

有没有办法在 LINQ to Entities 中做到这一点？

我知道我可以通过非规范化数据库并在实体“命名”中粘贴一个“sort_field”来解决问题，然后对其进行排序（我必须包含使 sort_field 值与实例中的值更改保持一致的逻辑个人和组织，但这当然是可行的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:28:47.140

这行得通吗？我假设这`entities`是一个集合`named`...

`entities.OrderBy(x => x as person == null ? x.org_name : x.last_name)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:16:53.483

实现您想要的一种方法是将两个实体投影到相同的（匿名）类型：

```
entities.OfType<Person>()
    .Select(p => new { p.Prop1, p.Prop2, ..., SortProp = p.last_name })
.Union(
    entities.OfType<Organization>()
        .Select(o => new { o.Prop1, o.Prop2, ..., SortProp = o.org_name }))
.OrderBy(x => x.SortProp) 
```

投影应该以相同的顺序具有完全相同的属性。

当然，您也可以像以前那样在内存中进行排序，即 on `entities.ToList()`。但这违背了这样做的目的`IQueryable`：让数据库完成工作。

# .net - 事务中的 DB 过程是否仍会从 ADO.net 事务内部回滚？

> ID：11546589
> 
> 赞同：1
> 
> 时间：2012-07-18T16:59:46.857
> 
> 标签：.net, database, tsql, c#-4.0, transactions

抱歉，这是一个很难说的问题：

假设我有一个执行一些插入的存储过程。它被包装在一个事务中并提交，前提是每个事务都在该事务中顺利进行。

现在，我从 .net 函数中调用该事务。在这个函数中，我必须调用一些其他函数，这些函数也调用以类似方式构建的存储过程。例子：

```
bool SaveTicket()
{
   using(MyTransaction)
   {
      try
      {
         SaveTicketInfo(); //calls sproc 1
         SaveComments(); //calls sproc 2
         SaveAttachments(); //calls sproc 3
      }
      catch(Exception)
      {
         MyTransactionRollback(); //i would normally wrap this in its own try/catch
      }
   }
} 
```

好的，这就是流程的框架。我在代码中实际做的是检查三个进程中每个进程的返回值，如果它们返回 false，我会抛出一个触发回滚的异常。

我想知道的是，如果这些存储过程中有**提交**，我在 .net 函数中的回滚是否仍然有效？还是完全没用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:06:19.690

是的，它将被回滚。

SQL Server 中的事务可以嵌套。SQL Server 基本上忽略了内部事务，关闭内部事务的唯一方法是提交它（即提交外部事务，必须提交所有内部事务）。回滚语句仅适用于最外层事务。

您可以在此处阅读更多相关信息：http: [//msdn.microsoft.com/en-us/library/ms189336 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms189336(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:07:05.030

我想我首先会问你是否真的需要在你的存储过程中拥有单独的事务——把它们放在那里确实会让你的应用程序代码更难维护，并将应用程序逻辑放入你的持久性存储中。

我的直觉是，由于存储过程创建并提交自己的事务，回滚时`MyTransaction`不会回滚，但真正的答案可能取决于 DTC 的配置方式。

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/189534/net-transactionscope-class-and-t-sql-tran-commit-and-rollback?rq=1)

# c++ - QSslSocket 错误

> ID：11546590
> 
> 赞同：1
> 
> 时间：2012-07-18T16:59:48.510
> 
> 标签：c++, qt

在 Windows 7 Ultimate x64 上的 Qt 4.8 中，当我尝试通过网络使用`QNetworkAccessManager`某些`post()`东西时：

```
_net_acc_mgr.post(QNetworkRequest(QUrl(...)),
                  QByteArray(...)); 
```

我遇到以下运行时错误：

```
QSslSocket: cannot resolve OPENSSL_add_all_algorithms_noconf
QSslSocket: cannot resolve OPENSSL_add_all_algorithms_conf
QSslSocket: cannot call unresolved function OPENSSL_add_all_algorithms_noconf
content-type missing in HTTP POST, defaulting to application/octet-stream 
```

我清楚地记得几年前使用相同的代码。但是我忘记了我尝试了哪个版本的 Qt。

`QNetworkAccessManager`在 Qt 4.8 中还有什么需要使用的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T23:08:31.370

*   QT 在*32 位上运行*

*   在*Windows 64 位*中，文件夹*system32*没有*OpenSSL* 所需的*DLL*，只有在*sysWOW64 文件夹*中。

***   要解决此问题，您需要安装 *OpenSSL 32*的二进制版本。** 

 ****下载为 Windows 编译（更新链接）：**

[http://slproweb.com/download/Win32OpenSSL_Light-1_0_1g.exe](http://slproweb.com/download/Win32OpenSSL_Light-1_0_1g.exe)

> 注意：在安装期间选择选项“OpenSSL 二进制文件 (/bin) 目录”（可能`C:\OpenSSL-Win32`）

为发布/调试项目文件夹安装副本 DLL（来自`C:\OpenSSL-32`或）后：`%HOMEDRIVE%\OpenSSL-32`

*   libeay32.dll
*   libssl32.dll
*   ssleay32.dll

* * *

另一种选择是使用*Mingw 64bit*，但不知道这对于*QT*是否可行（这种情况下，如果您可以编译应用程序将仅在 64 位系统上运行）。**

# inline - Smooks 中的 FreeMarker 内联模板（从数据库加载）未解释

> ID：11546591
> 
> 赞同：0
> 
> 时间：2012-07-18T16:59:48.310
> 
> 标签：inline, freemarker, template-engine, smooks

全部，

我尝试从 Smooks 配置文件中的数据库加载 FreeMarker 模板，并使用内置 INTERPRET 将字符串解析为模板。但是，输出正是我存储在数据库中的模板。

以下是 Smooks 配置文件的一部分：

* * *

……

```
<resource-config selector="hs:TravelerProfile">
    <resource>org.milyn.delivery.DomModelCreator</resource>
</resource-config> 
```

```
<db:executor executeOnElement="hs:TravelerProfile" datasource="StagingDS">
          <db:statement>select freeMarker_template from template_lookup where agencyid='111'; 
          </db:statement>
          <db:resultSet name="mytemplate" />
    </db:executor>

<ftl:freemarker applyOnElementNS="www.travel.com" applyOnElement="TravelerProfile">

    <ftl:template>
    < !--       
    <#assign templateSource = r"${mytemplate[0].freeMarker_template}">
    <#assign inlineTemplate = [templateSource, "myInlineTemplate"]?interpret>
    <@inlineTemplate/> 
    -- >
    </ftl:template>
</ftl:freemarker> 
```

......

* * *

**我存储在数据库中的模板如下：**

```
<#ftl ns_prefixes={"D":"www.hhs.gov/travel"}>
<?xml version="1.0" encoding="UTF-8"?>
<po:PoHeadersInterfaceCollection xmlns:po="https://www.travel.com/xmlns/financial/po112007.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="https://www.travel.com/xmlns/financial/po112007.xsd">
  <po:PoHeadersInterface>
    <po:interfaceSourceCode>VendorName</po:interfaceSourceCode>
    <po:poLinesInterfaceCollection>
      <po:PoLinesInterface>
        <po:PoDistributionsInterfaceCollection>
          <po:PoDistributionsInterface>
            <po:destinationOrganizationId>${TravelerProfile.TravelerOfficeCode}
            </po:destinationOrganizationId>
          </po:PoDistributionsInterface>
        </po:PoDistributionsInterfaceCollection>
      </po:PoLinesInterface>
    </po:poLinesInterfaceCollection>
  </po:PoHeadersInterface>
</po:PoHeadersInterfaceCollection> 
```

=====================================

出于某种原因，输出正是上面的模板本身。"${TravelerProfile.TravelerOfficeCode}" 尚未评估！请帮忙！！！

谢谢！！！

艾格尼丝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:09:49.617

Sine`mytemplate[0].freeMarker_template`返回模板源代码本身（或者至少我假设），并且由于您使用的是原始字符串文字 ( `r"..."`)，因此模板的源代码将是字面意义`${mytemplate[0].freeMarker_template}`上的 ，然后由`?interpret`模板源代码对其进行评估。更正后的模板为：

```
<#assign inlineTemplate = [mytemplate[0].freeMarker_template, "myInlineTemplate"]?interpret>
<@inlineTemplate/> 
```

也可以写成：

```
<@([mytemplate[0].freeMarker_template, "myInlineTemplate"]?interpret) /> 
```

或者如果您不需要`"myInlineTemplate"`模板名称：

```
<@mytemplate[0].freeMarker_template?interpret /> 
```

# google-apps-script - Google 脚本作为服务发布

> ID：11546605
> 
> 赞同：0
> 
> 时间：2012-07-18T17:00:27.683
> 
> 标签：google-apps-script

我正在编写一个实际的生产应用程序，以获取我们学区的 Field Trip 批准。我去发布选择“发布为服务”并获取 URL，但它不再存在了！现在我只有“部署为网络应用程序”。

我想在电子邮件中包含此 URL，以便用户可以单击它并批准旅行。

我第一次看到这一点是在 2012 年 5 月末 Eric Koleda 的一段视频中，用于批准公告。我当时得到了那个测试。

在收到某人的来信之前，我将尝试“部署为 Web 应用程序”URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:27:38.393

是的，他们改变了使用的术语。请参阅[6 月 18 日的发行说明](https://developers.google.com/apps-script/release_notes)。

此外，您现在必须先将脚本保存为一个版本，然后才能将其部署为 Web 应用程序

# java - 使用 HttpClient POST 通过上传提交表单

> ID：11546609
> 
> 赞同：5
> 
> 时间：2012-07-18T17:00:37.933
> 
> 标签：java, html, http-post, forms, apache-httpclient-4.x

我有一个看起来像这样的 html 表单：

```
<div class="field>
  <input id="product_name" name="product[name]" size="30" type="text"/>
</div>

<div class="field>
  <input id="product_picture" name="product[picture]" size="30" type="file"/>
</div> 
```

我想编写一个自动创建产品的 Java 模块。这是我已经拥有的：

```
HttpHost host = new HttpHost("localhost", 3000, "http");
HttpPost httpPost = new HttpPost("/products");
List<BasicNameValuePair> data = new ArrayList<BasicNameValuePair>();
data.add(new BasicNameValuePair("product[name]", "Product1"));
UrlEncodedFormEntity entity = new UrlEncodedFormEntity(data, "UTF-8");
httpPost.setEntity(entity);
HttpResponse postResponse = httpClient.execute(host, httpPost); 
```

这很好用，它能够创建名为“Product1”的新产品。但我不知道如何处理上传部分。我想要看起来像这样的东西：

```
data.add(new BasicNameValuePair("product[name]", "Product1")); 
```

但不是“Product1”，而是一个文件。我阅读了 HttpClient 的文档，据说只有字符串。

有谁知道如何处理上传部分？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T18:17:52.520

依赖项：

```
<dependency>
 <groupid>org.apache.httpcomponents</groupid>
 <artifactid>httpclient</artifactid>
 <version>4.0.1</version>
</dependency>

<dependency>
 <groupid>org.apache.httpcomponents</groupid>
 <artifactid>httpmime</artifactid>
 <version>4.0.1</version>
</dependency> 
```

代码：[棘手的部分是使用[MultipartEntity](http://hc.apache.org/httpcomponents-client-ga/httpmime/apidocs/org/apache/http/entity/mime/MultipartEntity.html) ]

```
HttpClient client = new DefaultHttpClient();
client.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION,HttpVersion.HTTP_1_1);
HttpPost post = new HttpPost( url );
MultipartEntity entity = new MultipartEntity( HttpMultipartMode.BROWSER_COMPATIBLE );
// For File parameters
entity.addPart( paramName, new FileBody((( File ) paramValue ), "application/zip" ));
// For usual String parameters
entity.addPart( paramName, new StringBody( paramValue.toString(), "text/plain", Charset.forName( "UTF-8" )));
post.setEntity( entity );
// Here we go!
String response = EntityUtils.toString( client.execute( post ).getEntity(), "UTF-8" );
client.getConnectionManager().shutdown(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T23:29:26.073

另一种处理 HTTP 请求的更快方法是使用[curl](http://curl.haxx.se/docs/manpage.html)。

# html - CSS 字段集边框

> ID：11546610
> 
> 赞同：0
> 
> 时间：2012-07-18T17:00:42.550
> 
> 标签：html, css, styles, border

`fieldset`您好，我在 CSS中遇到了问题。

**[我有这个例子](http://jsfiddle.net/Q3XY4/)**

在此示例中，您可以看到边框的左侧

```
margin-left: 0px; 
```

与深色框架恰好在一条线/高度上齐平。右手边你可以看到这个类`fr`有

```
margin-right: 0px; 
```

但它不与框架边框齐平。我曾尝试用谷歌搜索它，但我找不到任何关于它的东西。这种现象是正常的还是我做错了什么？有一些特定的边界吗？

更新

您好，感谢您回答这个问题。我尝试将该代码直接实现到我的编辑器（dreamweaver cs6）中，并认为它曾经与 jsfiddle 上的样式相同。错误的。编辑器似乎有问题，因为结果我会得到这个：

![cs6 字段集](../Images/f821d35ae85d5ba0ec1d2d218b85f46b.png)

看起来左侧有自动添加的标签。那么有没有人知道这个问题？多谢。

更新 2：

我不得不重置css默认设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:58:00.903

我想说的主要是你的标签设置为 80px 宽，你的输入设置为 180px 宽。

可能需要它们的大小相同。我还会检查你的数学，以确保一切正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:02:34.780

添加`box-sizing: border-box`到输入。（还为相关供应商添加`-moz-box-sizing`和）`-webkit-box-sizing`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:04:41.987

改用它，**box-sizing:border-box**会导致从输入元素内部而不是外部使用填充。

```
#left #frame form fieldset ul input {
position:relative
color: #444444;
font-size: 10px;
width: 180px;
height: 18px;
padding-left: 5px;
outline:none;
box-sizing:border-box;
-moz-box-sizing:border-box;
-webkit-box-sizing:border-box;
-o-box-sizing:border-box
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T19:01:02.093

是 box-sizing:border-box; 是一个很好的解决方案，但只需将输入框的大小减小 7 像素{左侧填充为 5px，左右边框的边框为 2px}，因此现在输入框的最终宽度为 173px

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T13:25:11.127

看起来您想将一些输入字段（可能是表单？）放入列中，但似乎不知道最好的方法？

我现在正在处理一个表单，实际上 - 当我想在一个 div 中有两列时，我就是这样做的。

```
 <form>
   <fieldset>
    <legend>The form to fill out</legend>
      <p> Any instructions for the form. Fields marked with <span class="red">Red</span> are required.</p>

     <div class="columnA">
       <label for="fname">Label 1</label>
       <input type="text" name="fname" tabindex="1" />
     </div>

     <div class="columnB">
       <label for="address1">Address:</label>
       <input type="text" name="address1" tabindex="10" />
     </div>

     <div class="fullwidth">
       <input type="submit" value="Register"/>
     </div>
   </fieldset>
 </form> 
```

然后，确保在您的 CSS 中为上述每个类设置（最少）这些内容：

边距填充宽度

（建议：我实际上在我的每一部分 CSS 中都首先设置了这些 - 如果我有自己的 CSS 元素顺序，它会给我一个结构。我不是说使用我的，而是采用你自己的 - 它可以节省你的时间重新故障排除）

请记住，如果您想要父元素（无论 div 包含表单），所有子元素也必须浮动。

现在，您可能会认为将 columnA 浮动到左侧，将 columnB 浮动到右侧，一旦添加边距和填充，两者的宽度都设置为 50%。但是，我发现除非我的内容需要那么多空间，否则您实际上可以将两者都浮动到左侧，并且您会更好地了解整个表单。

# c# - 无法从 Web 应用程序访问 IIS 6 虚拟文件夹中的文件

> ID：11546614
> 
> 赞同：1
> 
> 时间：2012-07-18T17:01:01.317
> 
> 标签：c#, asp.net, iis-6

我有一个网站位于 IIS 6.0 的虚拟目录中。在这个虚拟目录中，还有一个 P12 认证，我需要使用它来访问外部 Web 服务。当我尝试通过该站点访问此文件时，我收到“找不到文件”错误。

我已经验证该文件在那里并且已经镜像了我的本地开发环境以匹配生产并且在那里一切正常。

我非常有信心这是一个权限问题。

谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:44:28.803

~~默认情况下，IIS 6 将仅向请求客户端提供特定类型的文件（基于扩展名）。如果您是 P12 认证（我不确定那是什么）文件不是其中之一，那么 404 正是您应该收到的。~~

~~在您的 IIS 管理控制台中，您可以修改已处理和/或提供的文件类型列表。~~

听起来您可能正在尝试以编程方式访问此文件，在这种情况下，您需要提供更多信息 - 向我们展示尝试访问该文件的代码，也许还有异常

编辑：

根据您对文件位置的评论，您可以尝试按照以下方式进行操作：

`File.Exists(Server.MapPath("/") + "DLWSCert.p12")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T18:13:03.100

我发现异常的消息具有误导性。该消息说未找到文件，但该消息包含在 System.CryptogrphyException 中。最终，问题在于应用程序池帐户的权限。一旦这些设置正确，它就可以正常工作。

# asp.net - 等待未在扩展方法中完成但在控制器中工作

> ID：11546616
> 
> 赞同：0
> 
> 时间：2012-07-18T17:01:09.040
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asynchronous

我在控制器中使用异步和等待。

以下代码工作正常

```
[HttpPost]
[ValidateAntiForgeryToken]        
public async Task<ActionResult> Create(CompetitionViewModel viewModel)
{
        if (ModelState.IsValid)
        {

            User user = null;
            using (var facebookClient = new FacebookClient(viewModel.AccessToken))
            {
                var facebookUser = await facebookClient.Me();
                user = entityStorage.GetUser(facebookUser);
                FormsAuthentication.SetAuthCookie(user.FacebookId, true);
            } 
```

但是，如果我尝试在扩展方法中执行相同的代码，那么 await 永远不会完成。

```
[HttpPost]
[ValidateAntiForgeryToken]        
public ActionResult Create(CompetitionViewModel viewModel)
{
    if (ModelState.IsValid)
    {
        var user = entityStorage.GetCurrentUser(viewModel.AccessToken).Result; 
```

和

```
public static class Helpers
    {
        public async static Task<User> GetCurrentUser(this IEntityStorage entityStorage, string accessToken)
        {
            User user = null;
            using (var facebookClient = new FacebookClient(accessToken))
            {
                var facebookUser = await facebookClient.Me(); //STUCK HERE!!
                user = entityStorage.GetUser(facebookUser);
                FormsAuthentication.SetAuthCookie(user.FacebookId, true);
            }
            return user;
        } 
```

我正在使用 MVC4 并`<add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />`根据其他线程建议在我的 web.config 中进行了设置。

**谁能告诉我为什么会这样以及如何让它发挥作用？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:21:29.967

我有一篇[博文详细介绍了这一点](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)。

简而言之，您通过调用`Result`. 相反，请制作您的`Create`方法`async`并使用`await`来获取用户。：

```
[HttpPost]
[ValidateAntiForgeryToken]        
public async Task<ActionResult> Create(CompetitionViewModel viewModel)
{
  if (ModelState.IsValid)
  {
    var user = await entityStorage.GetCurrentUser(viewModel.AccessToken); 
```

# c# - C# IF 语句，以及非常具体的做事，其中是正确的

> ID：11546626
> 
> 赞同：0
> 
> 时间：2012-07-18T17:01:33.050
> 
> 标签：c#, if-statement, minify

所以，首先，我看过这样的帖子：[如何在不使用 if 语句的情况下找到哪个条件为真](https://stackoverflow.com/questions/6521545/how-to-find-which-condition-is-true-without-using-if-statement)

这不是我所需要的，尽管这个想法是相关的，因为我希望它是更具可读性的代码。

我认为 Switch 是最好的选择，但让我解释一下。

我有这样的声明：

```
if (input == string.Empty || typeComboBox.Text == null)
{
    MessageBox.Show("Nothing to encrypt!", "Nothing Selected!");            
    return null;
} 
```

所以这里的想法是我曾经把这个语句分成两个“IF”语句，这并不是什么大不了的事，但为了可读性，以及我不断减少代码的努力，我想将这些语句组合成一个.

如果输入为空，我希望 MessageBox.Show 中的第一个参数出现，而不是第二个。

如果 typeComboBox.Text 为空，我希望出现第二个选项，而不是第一个。

如果它们都是真实的陈述，我希望两者都出现。

现在，我的目标是在不使用多个测试或方法的情况下完成这两项工作。基本上，我的意思是：如果我能找到哪个条件为真，并在同一个语句中输出结果数据，那将是理想的。

我认为开关是一种选择，但我还不太了解它们，但我认为这需要我根据此测试的结果做出决策方法，并将该结果发送给开关；这并不理想，因为我可以简单地拥有两个 if 语句和更少的代码。

有没有办法在一个声明中做到这一点？这个特定程序没有必要，但我想知道未来。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T17:08:00.163

我假设您从以下代码开始：

```
if (input == string.Empty)
{
    MessageBox.Show("Nothing to encrypt!");            
    return null;
}

if (typeComboBox.Text == null)
{
    MessageBox.Show("Nothing Selected!");            
    return null;
} 
```

我不认为这段代码有什么问题，这可能是最易读的。它将根据需要执行尽可能多的测试，仅此而已。任何替代方案都会导致执行*更多*测试，即使您最终可能会使用更少的代码。例如：

```
if (input == string.Empty || typeComboBox.Text == null)
{
    MessageBox.Show((input == string.Empty) ? "Nothing to encrypt!" : "Nothing Selected!");
    return null;
} 
```

更少的代码行，但在失败的情况下，将执行两三个测试而不是一两个。它也有点不那么简单。

简洁的代码很好，但如果太简洁，维护起来就会变得困难。可读性介于冗长和简洁之间，在我看来，在这种情况下，更冗长的代码更具可读性。

* * *

另一种选择是考虑报告多个错误是合适的事实。为此，请尝试如下代码：

```
List<string> errors = new List<string>();

if (input == string.Empty)
{
    errors.Add("Nothing to encrypt.");
}

if (typeComboBox.Text == null)
{
    errors.Add("Nothing selected.");
}

if (errors.Count != 0)
{
    MessageBox.Show(string.Join(" ", errors.ToArray()));
    return null;
} 
```

这比您的原始代码更冗长，但它将允许报告*所有*相关错误，而不仅仅是遇到的第一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:15:00.900

@millimoose 的评论是正确的；两条`if`语句对您的代码来说是最干净的。但是，如果您想将验证扩展到大量或建立此类验证的一般模式，您可以执行设置验证表之类的操作：

```
public class ValidationRule
{
    public ValidationRule(Func<bool> test, string errorMessage)
    {
        this.Test = test;
        this.ErrorMessage = errorMessage;
    }

    public Func<bool> Test { get; private set; }
    public string ErrorMessage { get; private set; }
}

var validationRules = new[] {
    new ValidationRule(() => input != string.Empty, "Nothing to encrypt!"),
    new ValidationRule(() => typeComboBox.Text != null, "Nothing Selected!")
}; 
```

有了这样的表，你就可以有这样的代码：

```
var errors = validationRules.Where(r => !r.Test()).Select(r => r.ErrorMessage);
if (errors.Any())
{
    MessageBox.Show(string.Join(' ', errors));            
    return null;
} 
```

但是，如果您只是在为您的两个条件寻找一些东西，那么这就是过度设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:08:25.563

我会建议一种稍微不同的模式，它可能更具可读性：

```
StringBuilder message = new StringBuilder();

if (input == string.Empty) message.Append("Nothing to encrypt!\n");
if (typeComboBox.Text == null) message.Append("Nothing selected!\n");
// ... repeat as many times as desired ...

if (message.Length > 0) {
    MessageBox.Show(message);
    return null;
} else {
    // proceed with your code here
} 
```

此代码的优点是它可以显示多个消息，如果多个消息是有效的。用户一次只能看到一条消息可能会令人沮丧，如果他们必须返回，修复某些内容，点击提交，然后看到不同的错误消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T17:09:09.387

我不会说这比几个“if”语句*更好*，但它只是一个。

```
var message = 
    ((input==string.Empty ? 
        "Nothing to encrypt! " : 
        "") +
    (typeComboBox.Text == null ?
        "Nothing Selected!" :
        "")).Trim();

if (message != "") {
    MessageBox.Show(message);
    return null;
} 
```

不过，一般来说，我喜欢使用条件运算符来构建产生单一结果的逻辑树，它比一堆嵌套`if/else`子句要简洁得多。只要您正确缩进，我就会发现这样的结构具有很高的可读性和表现力。不幸的是，在这种情况下它并不理想，因为您的结果取决于操作数的组合。使用这种逻辑来构建字符串可能不是最好的主意，尽管它仍然可能是最简洁的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T17:11:54.417

代码中没有办法让三个（看似）不同的操作由单个逻辑语句决定。如果您尝试将其分解为最简单的逻辑（不是在代码中，而只是在心理逻辑中）流程，您仍然会得到如下结果：

如果 A 为真，那么做 B 如果 C 为真，那么做 D 如果 A 和 C 都为真，那么做 B 和 D

这可以通过注意（如您所做的那样）每个条件实际上彼此分开来简化：

如果 A 为真，则 B 总是完成 如果 C 为真，则 D 总是完成

因此，在您的代码中，最简单的细分是

```
if (input == string.empty)
{
    // Do some stuff
}

if (typeComboBox.Text == null)
{
    // Do some other stuff
} 
```

现在，无需对任何一种方法都有一长串复杂的指令 - 您可以通过将其作为一个简单的决策部分来简化代码的外观，该部分调用其他方法来完成工作：

```
if (input == string.empty)
{
    this.PrimeInputs(); // or something
}

if (typeComboBox.Text == null)
{
    this.InitTextBoxes(); // or something
} 
```

主要的是，这与逻辑 AND 和逻辑 OR 不同，因为您需要一个动作或另一个动作 - 在某些情况下，如果两种情况都为假，则不采取任何行动，如果两种情况都为真，则两种行动都需要。

# wpf - 如何使 WPF 中网格内的 ListView 填满整个屏幕，即使调整大小

> ID：11546627
> 
> 赞同：0
> 
> 时间：2012-07-18T17:01:40.007
> 
> 标签：wpf, listview, grid, dockpanel

我有一个控件，它是一个网格，其中第一行包含一些按钮，具有固定的高度，第二行（也是最后一行）包含一个 ListView。然后我有一个主屏幕，它只包含一个菜单和上面的这个用户控件。我想将 ListView 的大小作为窗口的最大值，这意味着如果窗口最大化，ListView 会很大，以防窗口变小，ListView 也会变大（垂直滚动以帮助导航项目）。

这就是我的做法： 窗口：

```
<Window x:Class="TestUI.MainView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Width="auto" Height="auto"
    MinHeight="300" MinWidth="300"
    Title="Test"
    DataContext="{Binding MainViewModel, Source={StaticResource Locator}}" >

<StackPanel Orientation="Vertical" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
    <DockPanel>
        <Menu DockPanel.Dock="Top" >
            <MenuItem Header="Item 1" Command="{Binding Command1}"/>
            <MenuItem Header="Item 2" Command="{Binding Command2}"/>
            <MenuItem Header="Item 3" Command="{Binding Command3}"/>
        </Menu>
    </DockPanel>
    <DockPanel LastChildFill="True">
        <ScrollViewer Content="{Binding Content}" VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Disabled" DockPanel.Dock="Bottom" />
    </DockPanel>
</StackPanel>
</Window> 
```

用户控制：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="35" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <StackPanel Grid.Row="0" Margin="5, 5, 5, 5" Orientation="Horizontal">
        <Button Content="New" Width="60" Command="{Binding NewCommand}"/>
        <Button Content="Remove" Width="60" Margin="10, 0, 0, 0" Command="{Binding RemoveCommand}" />
    </StackPanel>
    <DockPanel Grid.Row="1" Margin="5,5,5,5" LastChildFill="True" HorizontalAlignment="Stretch">
        <ListView x:Name="ListView" SelectionMode="Single" DockPanel.Dock="Top" ItemsSource="{Binding Entities}" SelectedItem="{Binding SelectedEntity}" ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" VerticalAlignment="Stretch">
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="auto" Header="Product" DisplayMemberBinding="{Binding Description}"/>
                </GridView>
            </ListView.View>
        </ListView>
    </DockPanel>
</Grid> 
```

请你帮助我好吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T22:09:40.057

我刚刚检查了您的用户控件，并且 Listview 对接工作正常。您可以使用背景颜色验证设计器中的布局。将列表视图的背景设置为蓝色表明它正在使用可用空间。

我认为问题出在您的主窗体中的布局上，特别是 Stackpanel。这些因布局问题而臭名昭著，据我所知，您不需要它。使用 DockPanel 作为高级容器而不是多个停靠面板。（这就是他们的目的）

```
<DockPanel>
    <Menu DockPanel.Dock="Top" >
        <MenuItem Header="Item 1" Command="{Binding Command1}"/>
        <MenuItem Header="Item 2" Command="{Binding Command2}"/>
        <MenuItem Header="Item 3" Command="{Binding Command3}"/>
    </Menu>
    <ScrollViewer Content="{Binding Content}" VerticalScrollBarVisibility="Disabled"
         HorizontalScrollBarVisibility="Disabled" DockPanel.Dock="Fill" />
</DockPanel> 
```

这会将您的菜单放在面板的顶部，并让包含用户控件（假设）的滚动查看器用完剩余的可用空间。

堆叠面板仅适用于在一个区域内安排物品。如果要使用布局来分配可用空间，请使用 DockPanels 或 Grids。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:17:57.320

嗨，从 GridviewColumn 中删除 Width="Auto"。我希望这个能帮上忙

# jquery - 为什么我的自动完成事件没有触发？

> ID：11546630
> 
> 赞同：0
> 
> 时间：2012-07-18T17:01:51.180
> 
> 标签：jquery, jquery-ui, coffeescript, ruby-on-rails-3.2, jquery-autocomplete

我正在 Rails 3.2.6 中编写一个应用程序，并且在名为“apps.js.coffee”的特定于视图的 CoffeeScript 文件中有以下内容：

```
$("#app_make").live "autocomplete", (event,ui) ->
  source: '/apps/get_makes',
  autoFocus: true,
  minLength: 2,
  select: (event, ui) ->
    #remember the selected item
    $(this).data('selected-item', ui.item.label);
    $(this).val(ui.item.label); 
```

但它没有开火。我知道我的选择器是正确的，因为以下是触发，并且它在上面的代码之后的同一个脚本中。：

```
$("#app_make").live "click", () ->
  alert("made it") 
```

我没有遇到任何控制台错误。jQuery UI 加载成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:31:19.593

这是答案，并感谢 MrObrian 的帮助：

```
$("#app_make").live "click", ->
  $(this).autocomplete {
    source: '/apps/get_makes',
    autoFocus: true,
    minLength: 2,
    select: (event, ui) ->
      #remember the selected item
      $(this).data('selected-item', ui.item.label)
      $(this).val(ui.item.label)
  } 
```

# spring - Hibernate 返回带有空会话的延迟加载集合

> ID：11546632
> 
> 赞同：1
> 
> 时间：2012-07-18T17:01:52.393
> 
> 标签：spring, hibernate, jpa-2.0

（已解决，见下文）

Hibernate 4.1/Spring/JPA 项目。我正在使用 Spring 和 JPA 注释来支持事务、实体管理器注入等。

我在同一个事务中看到我的@OneToMany 延迟加载集合没有设置会话属性，当然也无法加载。如果我执行“left join fetch”来强制加载，我会得到多条指向同一个 PersistentBag 的记录——显然这会引发“shared collection”异常。

这是我的设置：

交易实体（“交易”是指金融交易）

代码：

```
@Entity
@Table(name = "transactionData")
@Access(AccessType.PROPERTY)
public class TransactionData extends AbstractTransaction implements java.io.Serializable {

   @Id
   @GeneratedValue(strategy = IDENTITY)
   @Column(name = "id", unique = true, nullable = false)
   public int getId() {
      return this.id;
   }

   public void setId(int id) {
      this.id = id;
   }

   @OneToMany(cascade=CascadeType.ALL,targetEntity=Location.class,fetch=FetchType.LAZY)
   @JoinColumns(
         {
            @JoinColumn(name="routecode",referencedColumnName="v_OPERSTAT"),
            @JoinColumn(name="cogrp", referencedColumnName="v_COUNTRY")      
         })
   @Transactional
   public Collection<Location> getLocations() {
      return super.getLocations();
   }

   public void setLocations(Collection<Location> l) {
      super.setLocations(l);
   }

} 
```

事务的基类：

代码：

```
public abstract class AbstractTransaction  {

   private List<Location> _locations;

   @Override
   @Transactional
   public List<Location> getLocations() {
      return _locations;
   }

   @Override
   public void setLocations(List<Location> value) {
      _locations = value;
   }
} 
```

事务实体使用 2 个整数类型列链接到位置实体，这些列在事务或位置实体上都不是 PK。

位置实体：

代码：

```
@Entity
@Table(name = "locations", uniqueConstraints = @UniqueConstraint(columnNames = {
      "cogrp", "cugrp", "bogrp", "status", "id" }))
public class Location implements java.io.Serializable {

   @Id
   @GeneratedValue(strategy = IDENTITY)
   @Column(name = "id", unique = true, nullable = false)
   public Integer getId() {
      return this.id;
   }

   public void setId(Integer id) {
      this.id = id;
   }

   @Column(name = "cogrp", nullable = false)
   public int getCogrp() {
      return this.cogrp;
   }

   public void setCogrp(int cogrp) {
      this.cogrp = cogrp;
   }

   @Column(name = "routecode")
   public Integer getRoutecode() {
      return this.routecode;
   }

   public void setRoutecode(Integer routecode) {
      this.routecode = routecode;
   }

} 
```

事务实体与位置具有一对多的关系，并且大多数事务实体将指向相同的位置列表。

现在，如果我执行以下查询：

代码：

```
select distinct t from " + Transaction.class.getName() + " t left join fetch t.locations where " + filterSQL 
```

我得到了结果，但几乎每个 Transaction 实体都指向相同的 PersistentBag 位置 - 不用说这会导致共享引用错误。

如果我省略 left join fetch 所有实体返回延迟加载的集合，但没有设置会话属性。

如果我进行急切加载，我只会急切加载 2 个实体，其余的仍然是惰性的（我知道这是一个内置限制，有什么方法可以覆盖它吗？）

**编辑：** 我开始相信这是 Hibernate 中的一个错误。如果您的查询返回指向同一个集合的多条记录（我可能会添加完全有效的场景！），那么 Hibernate 将在急切获取时重用相同的集合，并在延迟加载时将 session 设置为 null。它总是会导致对同一集合的共享引用或“无会话”错误。

我已经切换到 EclipseLink 2.4，并且在修复了我的 JPSQL 之后，它似乎在上述情况下工作正常。

# nhibernate - DTC 事务关闭时 NHibernate AbstractBatcher 中的 InvalidOperation

> ID：11546635
> 
> 赞同：0
> 
> 时间：2012-07-18T17:01:59.540
> 
> 标签：nhibernate, transactions, nservicebus, msdtc, distributed-transactions

我正在开发一个多线程应用程序，并使用 NServiceBus 和 NHibernate 与 SQL Server 2008RC（使用 DTC）。该进程有一个会话工厂。每个线程都有自己的 Session ，在事务完成时被处理掉。我们间歇性地看到下面的异常被抛出，它发生在启动进程后 5 分钟和启动进程后 6 小时。它发生的时间似乎没有规律。

当 DTC 事务中止时，AbstractBatcher 似乎在关闭命令时遇到了麻烦。

非常感谢任何帮助。

> 框架版本：v4.0.30319 描述：进程因未处理的异常而终止。异常信息：System.InvalidOperationException 堆栈：在 System.Collections.Generic.Dictionary`2+KeyCollection+Enumerator[[System._ *Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.* _Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]].MoveNext() 在 NHibernate.AdoNet.AbstractBatcher.CloseCommands() 在 NHibernate.AdoNet.AbstractBatcher.Dispose(Boolean) 在 NHibernate.Impl.SessionImpl .Close() 在 NHibernate.Impl.SessionImpl.Dispose(Boolean) 在 NHibernate.Transaction.AdoNetWithDistributedTransactionFactory+<>c_ *DisplayClass1.b*_0(System.Object, System.Transactions.TransactionEventArgs) 在 System.Transactions.TransactionCompletedEventHandler.Invoke(System.Object, System.Transactions.TransactionEventArgs) 在 System.Transactions.TransactionStatePromotedAborted.EnterState(System.Transactions.InternalTransaction) 在 System.Transactions .InternalTransaction.DistributedTransactionOutcome(System.Transactions.InternalTransaction, System.Transactions.TransactionStatus) 在 System.Transactions.Oletx.RealOletxTransaction.FireOutcome(System.Transactions.TransactionStatus) 在 System.Transactions.Oletx.OutcomeEnlistment.InvokeOutcomeFunction(System.Transactions.TransactionStatus) ) 在 System.Threading._ThreadPoolWaitOrTimerCallback 的 System.Transactions.Oletx.OletxTransactionManager.ShimNotificationCallback(System.Object, Boolean)。PerformWaitOrTimerCallback(System.Object, Boolean)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:34:52.023

看起来这是由于 AbstractBatcher 中的一些非线程安全集合访问。当事务中止时，将迭代命令列表。如果同时运行另一个命令，它将尝试将该命令添加到命令列表中。这会导致 InvalidOperationException。

该问题已记录在[NHibernate JIRA并在](https://nhibernate.jira.com/browse/NH-3227)[pull request](https://github.com/nhibernate/nhibernate-core/pull/130)中修复。

# emacs - dired-x：如何设置“也杀死...的缓冲区？” 是没有确认？

> ID：11546639
> 
> 赞同：6
> 
> 时间：2012-07-18T17:02:27.107
> 
> 标签：emacs, dired

如果你删除一个文件`foo`，`dired-x`你会被问到`Kill buffer of foo, too?`。我怎样才能跳过这个问题并总是用 回答它`yes`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T17:31:59.067

您可以建议该`dired-delete-entry`函数，以便在删除之前关闭任何文件缓冲区：

```
(defadvice dired-delete-entry (before force-clean-up-buffers (file) activate)
  (kill-buffer (get-file-buffer file))) 
```

Elisp 手册将建议描述为“比重新定义整个函数更干净”，如果函数的定义在未来发生变化，它不太可能中断。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T19:27:44.527

只需在 dired-x.el 中重新定义 dired-clean-up-after-deletion。

```
;; redefine the definition in dired-x.el, so that we are not prompted
;; to remove buffers that were associated with deleted
;; files/directories

(eval-after-load  "dired-x" '(defun dired-clean-up-after-deletion (fn)
  "My. Clean up after a deleted file or directory FN.
Remove expanded subdir of deleted dir, if any."
  (save-excursion (and (cdr dired-subdir-alist)
                       (dired-goto-subdir fn)
                       (dired-kill-subdir)))

  ;; Offer to kill buffer of deleted file FN.
  (if dired-clean-up-buffers-too
      (progn
        (let ((buf (get-file-buffer fn)))
          (and buf
               (save-excursion ; you never know where kill-buffer leaves you
                 (kill-buffer buf))))
        (let ((buf-list (dired-buffers-for-dir (expand-file-name fn)))
              (buf nil))
          (and buf-list
               (while buf-list
                 (save-excursion (kill-buffer (car buf-list)))
                 (setq buf-list (cdr buf-list)))))))
  ;; Anything else?
  )) 
```

# opengl-es - 为什么当 alpha 被屏蔽时，WebGL 画布在第二帧变成白色？

> ID：11546642
> 
> 赞同：3
> 
> 时间：2012-07-18T17:02:31.850
> 
> 标签：opengl-es, webgl

有关详细信息，请参阅[此线程](http://www.khronos.org/message_boards/viewtopic.php?f=35&t=5167&p=15162#p15162)。

综上所述，鉴于以下情况：

```
gl = canvas.getContext('experimental-webgl');
gl.clearColor(0, 0, 0, 1);
gl.colorMask(1, 1, 1, 0);
gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
gl.enable(gl.BLEND); 
```

...和一个标准的渲染循环：

```
function doRender() {
  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
  // render stuff, and request another frame
  requestAnimationFrame(doRender);
} 
```

...那么我想知道*理论上*的预期输出应该是什么。

实际上，我看到第一帧呈现*好像没有颜色掩码*，而第二个（和后续）帧呈现*整个画布 opaque white*。

请注意，alpha 级别设置为什么并不重要：即使渲染的 alpha 值非常低，第二帧也始终是立即的、完全白色的（包括未渲染到的区域）。

**问题**：上述操作对第一帧、第二帧和后续帧的预期结果是什么？另外，我遇​​到的是预期的结果，还是由于 GL 驱动程序或 WebGL 实现中的一些错误？最后，如果这是预期的结果，为什么？视频卡上实际发生了什么来产生这个结果？

系统详细信息：MacBook Pro / GeForce 320M / Snow Leopard 上的 Chrome / Firefox（两者）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T03:17:29.277

WebGL 会自动清除每一帧的绘图缓冲区，除非你告诉它不要这样做

尝试

```
gl = canvas.getContext('experimental-webgl', {
   preserveDrawingBuffer: true
}); 
```

这可能比让它清除要慢，因为它可能必须在每帧制作绘图缓冲区的副本以保存它，因此当您在其中绘制新内容时，它有一个副本可以与页面的其余部分合成。因此，在渲染循环中调用 gl.clear 可能会更好。当然，如果您想要的效果是不断地将东西混合到绘图缓冲区中，那么您需要告诉它像上面的示例一样保留，或者您需要使用帧缓冲区绘制到纹理或渲染缓冲区中，然后将其渲染到绘图缓冲区。

# c# - 使用双击在表单 C# 之外捕获 x,y 坐标

> ID：11546649
> 
> 赞同：1
> 
> 时间：2012-07-18T17:03:12.423
> 
> 标签：c#, events, click, mouse, double-click

我正在用 C# 制作一个表单应用程序，我需要的是能够在用户双击时捕获表单之外的 x,y 坐标。我找不到任何可以帮助我的东西。我是 C# 新手，所以我可能正在寻找错误的东西。任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:12:23.867

[这个](http://blogs.msdn.com/b/toub/archive/2006/05/03/589468.aspx)旧的 MSDN 博客有使用示例代码`WH_MOUSE_LL`，这是一个低级鼠标挂钩，可用于在 Windows 中捕获鼠标事件。鼠标钩子不区分双击，但是你需要自己做。您可以使用`SystemInformation.DoubleClickTime`和 计时器来确定单击是否为双击。

# c# - 实体框架 SaveChanges 并不总是有效

> ID：11546653
> 
> 赞同：1
> 
> 时间：2012-07-18T17:03:20.007
> 
> 标签：c#, sql-server-2008, entity-framework-4, ef-database-first

我正在使用 EF 4.2，并且遇到了一个随机发生且没有警告的问题。我有一个更新数据库的 Windows 服务。在服务中，我有一个计时器。当计时器的时间过去时，将调用一个方法。这是该方法的基本结构

```
IEnumerable<Foo> foos = GetFoosFromDB();
foreach (Foo foo in foos)
{
    if (some condition)
    {
        foo.Bar = 1;
    }
    if (some other condition)
    {
        foo.Bar = 2;
    }

    if (yet some other condition)
    {
        foo.Bar = 3;
    }
    else
    {
       int val = GetSomeValueFromDB();

        if (val == something)
        {
            if(GetSomeOtherValueFromDB())
            {
                foo.Bar = 4;
            } 
            else
            {
                CallSomeMethodThatAlsoCallsSaveChanges();
                foo.Bat = SomeCalculatedValue();
            }
        }
    }
}
SaveChanges(); 
```

现在，问题是，一旦我们开始使用数据库一天并且该数据库的表中有几行（我们只讨论 100 或 200 行），那么即使调用了这个方法，也`SaveChanges`不会t 似乎做它应该做的事。我究竟做错了什么？

谢谢，

萨钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:17:29.283

忽略代码的其他方面，这一行可能是一个问题：

```
else
{
      CallSomeMethodThatAlsoCallsSaveChanges();
      foo.Bat = SomeCalculatedValue();
}
// a few }} later...
SaveChanges(); 
```

执行此逻辑分支时，您的上下文的未决更改将提交到数据库（基于您提供的内容）。根据您创建和管理数据库上下文对象的方式，您要么清除了修改列表，要么引入了潜在的更改冲突。当`SaveChanges()`在循环之后调用时，它可能有也可能没有待提交的更改（取决于条件逻辑是否调用了您的其他方法）。

考虑使用此逻辑正在执行哪些逻辑单元，并保持这些 UoW 原子分离。考虑如何创建、管理和传递数据库上下文，因为它们维护对象的本地状态。

如果您仍然遇到问题，您可以发布更多代码，我们可以尝试进一步排除故障

# c# - 来自 JSON 的 SQLBulk WritetoServer

> ID：11546654
> 
> 赞同：0
> 
> 时间：2012-07-18T17:03:21.770
> 
> 标签：c#, sql-server, sql-server-2008, bulkinsert, sqlbulkcopy

嗨，我正在尝试从 输入大量数据`JSON to SQL Server`，因此根据我的研究，我可以`JSON to DataTable and then use SQLBulk`使用 WriteToSever(dataTable) 将数据转换为写入服务器。这是最好的方法吗？

以及我如何能够以`Scope_identity()`这种方式提取每一行插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:23:37.160

Extracting scope identity isn't really possible from a bulk insert command. If you want to accurately get back every single scope_identity() value in an insert statement, you really have to insert each record individually.

However, you could also consider using a table parameter insert (I wrote an article about it here: [http://www.altdevblogaday.com/2012/05/16/sql-server-high-performance-inserts/](http://www.altdevblogaday.com/2012/05/16/sql-server-high-performance-inserts/)).

First, create a table insert type:

```
CREATE TYPE item_drop_bulk_table_rev4 AS TABLE (
    item_id BIGINT,
    monster_class_id INT,
    zone_id INT,
    xpos REAL,
    ypos REAL,
    kill_time datetime
) 
```

Second, create a procedure to insert the data:

```
CREATE PROCEDURE insert_item_drops_rev4
    @mytable item_drop_bulk_table_rev4 READONLY
AS

BEGIN TRANSACTION

-- Lookup the current ID
DECLARE @id_marker bigint
SELECT @id_marker = MAX(primary_key_column) FROM item_drops_rev4 

-- Insert all the data
INSERT INTO item_drops_rev4 
    (item_id, monster_class_id, zone_id, xpos, ypos, kill_time)
SELECT 
    item_id, monster_class_id, zone_id, xpos, ypos, kill_time 
FROM 
    @mytable

-- Return back the identity values
SELECT * FROM item_drops_rev4 WHERE primary_key_column > @id_marker

COMMIT TRANSACTION 
```

Third, write the C# code to insert this data:

```
DataTable dt = new DataTable();
dt.Columns.Add(new DataColumn("item_id", typeof(Int64)));
dt.Columns.Add(new DataColumn("monster_class_id", typeof(int)));
dt.Columns.Add(new DataColumn("zone_id", typeof(int)));
dt.Columns.Add(new DataColumn("xpos", typeof(float)));
dt.Columns.Add(new DataColumn("ypos", typeof(float)));
dt.Columns.Add(new DataColumn("timestamp", typeof(DateTime)));

for (int i = 0; i < MY_INSERT_SIZE; i++) {
    dt.Rows.Add(new object[] { item_id, monster_class_id, zone_id, xpos, ypos, DateTime.Now });
}

// Now we&#039;re going to do all the work with one connection!
using (SqlConnection conn = new SqlConnection(my_connection_string)) {
    conn.Open();
    using (SqlCommand cmd = new SqlCommand("insert_item_drops_rev4", conn)) {
        cmd.CommandType = CommandType.StoredProcedure;

        // Adding a "structured" parameter allows you to insert tons of data with low overhead
        SqlParameter param = new SqlParameter("@mytable", SqlDbType.Structured);
        param.Value = dt;
        cmd.Parameters.Add(param);
        SqlDataReader dr = cmd.ExecuteReader()
        // TODO: Read back in the objects, now attached to their primary keys
    }
} 
```

Now, in theory, you could retrieve back only the single "id marker". However, I'm not convinced that every single version of SQL Server out there will always insert records from a datatable insert in linear order, so I think it's safer to retrieve back the whole data batch.

# php - 通过多个复选框搜索，AJAX div 更新...我从哪里开始？

> ID：11546658
> 
> 赞同：0
> 
> 时间：2012-07-18T17:03:42.987
> 
> 标签：php, javascript, jquery, checkbox, onblur

我希望为网站创建一个相当简单的“通过多个复选框过滤”搜索工具......而且一旦有人选择/取消选择复选框，我不知道从哪里开始在指定的 div 中实时更新结果。

我希望建立一个类似于这个页面的过滤系统：

[http://thegatewayonline.com/articles/](http://thegatewayonline.com/articles/)

...我想要一个系统，单击每个复选框会触发表单提交，它将结果加载到同一页面上的指定 DIV 中。

您有任何可以帮助我入门的指示或代码片段吗？

我正在使用 PHP 进行编码。

非常感谢您的帮助！

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:07:31.360

`$.ajax`当按复选框时，您将想要通过jQuery发出通话：

```
$('.checkbox').click(function() {
    // ajax call here
}); 
```

在 AJAX 调用中，有一个被调用的回调函数`success`，其中包含一个数据参数。您可以`echo`从 PHP 页面（从数据库加载可用文章）中的 JSON 对象并将其作为此参数传递。然后，您只需解码此 JSON 对象并在页面上打印您的内容。

**JSON 参考**：[https ://developer.mozilla.org/en/JSON](https://developer.mozilla.org/en/JSON)

**jQuery Ajax**：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# jquery - 跨域访问 restful jax-rs 服务

> ID：11546662
> 
> 赞同：4
> 
> 时间：2012-07-18T17:04:10.460
> 
> 标签：jquery, ajax, prototypejs, cxf, jax-rs

我使用 cxf 创建了一个 jax-rs restful 服务，并注释了我的 scala 服务实现以公开 cors 标头：

```
@Path("/foo/{date}")
@Produces(Array("application/xml"))
@CrossOriginResourceSharing(allowAllOrigins = true)
class Foo {
    @GET
    @Path("{id}")
    def doStuff(@PathParam("date") date: util.Date, @PathParam("id") id: Int) = ...
} 
```

在我的 Spring applicationContext.xml 中，我在`jaxrs:providers`列表中注册了一个 cors 过滤器

```
<bean id="corsFilter" class="org.apache.cxf.rs.security.cors.CrossOriginResourceSharingFilter"
        p:allowCredentials="true"/> 
```

我可以很高兴地通过 Firefox/IE 直接使用端点，`http://localhost:8080/foo/2012-07-17/123`但我正在尝试构建一个服务，该服务将从另一个 Web 应用程序调用，以便将两者分​​离。

当我直接通过 Firefox 发出请求时，我看到以下内容：

```
Response Headers
Content-Length                  5699
Content-Type                    application/xml
Date                            Wed, 18 Jul 2012 16:49:09 GMT
Server                          Apache-Coyote/1.1

Request Headers
Accept                          text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding                 gzip, deflate
Accept-Language                 en-us,en;q=0.5
Cache-Control                   max-age=0
Connection                      keep-alive
Cookie                          DWRSESSIONID=Q62Vf$dv*S9sA8EaJm6jKW6$pyj; JSESSIONID=17E120C419F075B505447F151124BC18
Host                            localhost:9580
User-Agent                      Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1 
```

当我从本地磁盘上的网页通过 Ajax 发出请求时，我看到以下内容：

```
Response Headers
Access-Control-Allow-Cred...    true
Access-Control-Allow-Orig...    *
Content-Length                  6177
Content-Type                    application/xml
Date                            Wed, 18 Jul 2012 16:41:21 GMT
Server                          Apache-Coyote/1.1

Request Headers
Accept                          */*
Accept-Encoding                 gzip, deflate
Accept-Language                 en-us,en;q=0.5
Connection                      keep-alive
Cookie                          DWRSESSIONID=Q62Vf$dv*S9sA8EaJm6jKW6$pyj; JSESSIONID=17E120C419F075B505447F151124BC18
Host                            localhost:8080
Origin                          null
User-Agent                      Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1 
```

我可以使用[prototype.js](http://www.prototypejs.org/api/ajax)在IE 中正常工作，但我认为Firefox 更复杂，因为Web 服务是由NTLM servlet 过滤器投影的。我一直在为非 msie 浏览器使用[jQuery](http://api.jquery.com/jQuery.ajax/)，以便使用 xhrFields 属性传递凭据，并且我可以看到我的服务在 IE 和 Firefox 的调试器中被调用，但是从 Firefox 调用时我的响应是空白的。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T16:35:49.710

Firefox 似乎不尊重`Access-Control-Allow-Origin: *`标头 - 更改`@CrossOriginResourceSharing`注释以指定将访问端点的主机/端口组合列表修复了该问题。

# ffmpeg - 是否可以使用一个命令将一个 yuv 文件编码为 3 个具有不同比特率的 h.264 文件？

> ID：11546663
> 
> 赞同：0
> 
> 时间：2012-07-18T17:04:16.837
> 
> 标签：ffmpeg, h.264, video-encoding, x264

我有一个 YUV 文件。我需要将其编码为 H.264，但使用三种不同的比特率。是否可以使用一个命令来完成，因此不需要多次处理 yuv 文件？

这是我现在所做的：

```
x264 -B 600 -o /path/to/output_first.264 /path/to/input.yuv
x264 -B 800 -o /path/to/output_second.264 /path/to/input.yuv
x264 -B 1000 -o /path/to/output_second.264 /path/to/input.yuv 
```

是否可以在一个命令中完成它以使其更快？YUV 文件可能很大，所以我不想连续提取三次。并且所有三个编码过程都使用相同的输入 YUV 文件，所以我想这应该是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:51:36.530

> 可以直接用x264吗？

不，x264 cli 只支持一输入一输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:01:54.140

是的，使用 FFmpeg 很容易：

```
ffmpeg -i input.yuv -b:v 600 output1.264 -b:v 800 output2.264 -b:v 1k output3.264 
```

# playframework-2.0 - 如何在 Play2 中加载测试数据（夹具）？

> ID：11546666
> 
> 赞同：9
> 
> 时间：2012-07-18T17:04:42.770
> 
> 标签：playframework-2.0

如何在 Play2 中加载测试数据（夹具）？

我注意到对于 Play1，人们会使用 .yaml 文件和 Fixtures 类，但找不到 Play2 (Java) 的等价物。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-01T07:55:08.017

我已经成功使用了这个脚本：

```
Map<String, List<Object>> tableMap = (Map<String, List<Object>>) Yaml.load(fixtureFile);//yaml must be in conf folder?

for (Map.Entry<String, List<Object>> tableEntry : tableMap.entrySet()) {
    Ebean.save(tableEntry.getValue());
    Logger.info("loaded " + tableEntry.getValue().size() + " " + tableEntry.getKey() + " from '" + fixtureFile + "' into the database");
} 
```

希望这会有所帮助。

# php - PHP 应用程序日志存储

> ID：11546669
> 
> 赞同：0
> 
> 时间：2012-07-18T17:04:57.040
> 
> 标签：php, mysql, mongodb

我们基于 PHP 和 MySQL 的应用程序创建自定义日志，这些日志写入 MySQL 数据库以供用户操作。我们这样做主要是为了便于搜索，并且因为该应用程序已经使用 MySQL 进行持久存储，所以这很有意义。

我们的日志现在包含 1760 万行，大小为 2GB。在这个地方走动时不是那么友好。

我想知道社区可能会建议作为一种更好更有效的方式来存储日志。

您显然可以将此表拆分为 1 周的所有日志，然后删除非关键日志并将表拆分为两个历史关键日志，例如付款等。

一般来说，我们通过函数的方式写入日志，例如

```
playerlog($id,$message,$cash,$page,$ip,$time); 
```

但这是一个相当简化的版本，我们还使用 MySQL 的 INSERT DELAYED，因为日志对于页面加载并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T21:14:37.157

如果您有兴趣使用 MongoDB（我从标签中假设）执行此操作，您可能想看看这里：[http ://docs.mongodb.org/manual/use-cases/storing-log-data/](http://docs.mongodb.org/manual/use-cases/storing-log-data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:21:57.017

您应该澄清需要什么日志。作为插入后的第二步，您可以设置一个处理日志数据的作业，例如读取日志并处理它们（这会将您的 DBMS 降级为某种消息传递中间件）。这可能是将部分（如付款）存储到不会被删除的档案中，或者将身份验证日志写入在指定保留时间后它们被删除的地方。但这一切都取决于您的用例。

根据您计划分析的内容或查询数据的方式，您甚至可以将它们存储在 MySQL 之外。

一些可能性：

*   实施旨在分析事件、触发警报等的 SIEM 系统 (http://en.wikipedia.org/wiki/Security_information_and_event_management)。
*   使用类似 SIEM 的软件，如 Splunk（请参阅 splunk.com），该软件适用于原始日志并针对日志搜索和分析
*   如果它“足够快”，请坚持使用您的 DBMS 解决方案
*   只需使用 syslog 并存储文本日志文件——然后你可以跳过整个 MySQL
*   ...

# google-fusion-tables - SQL API 或 Fusion Tables 搜索

> ID：11546675
> 
> 赞同：1
> 
> 时间：2012-07-18T17:05:09.757
> 
> 标签：google-fusion-tables

我想在我选择的每一列中搜索我的表格。我究竟做错了什么？

这是工作
`SELECT * FROM TABLE_ID WHERE firstname LIKE '%"+ s +"%' ORDER BY id DESC OFFSET "+ start +" LIMIT "+ localStorage.getItem('delimeter'))`

这不是
`SELECT * FROM TABLE_ID WHERE firstname LIKE '%"+ s +"%' OR lastname LIKE '%"+ s +"%' ORDER BY id DESC OFFSET "+ start +" LIMIT "+ localStorage.getItem('delimeter'))`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:51:28.180

Fusion Table API 不支持“OR”SQL 运算符，仅支持“AND”。您可以运行两个查询并在客户端中组合结果。

# .net - 并非所有 WCF 性能计数器都会在 Windows Server 2008 上显示服务实例

> ID：11546677
> 
> 赞同：1
> 
> 时间：2012-07-18T17:05:16.747
> 
> 标签：.net, wcf, windows-server-2008-r2, performancecounter

长期潜伏者第一次海报。好吧，我花了一天时间研究这个&找不到任何线索，所以这里希望比我聪明得多的人以前也遇到过这个问题。

目前，我们在**Windows Server 2003**上运行的 Windows 服务中托管了少量 .NET 4 WCF 服务。在执行 perfmon 时，它们都按预期显示在 ServiceModelService 4.0.0.0 下。但是，当这些相同的服务在**Windows Server 2008 R2**上运行时，只会显示几个实例。托管服务都按预期运行和执行，只是我们无法获得任何性能计数器信息，因为实例并未全部列在每个计数器下。

ServiceModelEndPoint 4.0.0.0 和 ServiceModelOperation 4.0.0.0 也是如此。

我尝试通过 lodctr /r & lodctr /M:ServiceModelPerformanceCounters.man 重新安装计数器。尝试修复服务器上的 .NET 4 安装。

事件日志中没有错误表明计数器或分配的内存有任何问题。

所有 app.config 文件 `<diagnostics wmiProviderEnabled="true" performanceCounters="All" />`

我发现的唯一一件事是，在 Windows Server 2008 R2 上，注册表只有`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\ServiceModelEndpoint 3.0.0.0` 4.0.0.0 的条目并且没有提及（其他两个 ServiceModel* 计数器相同），因为我们只有 VM 是基于我没有的相同图像构建的能够验证这是预期的还是在安装过程中发生了问题。

所以我希望有人确认安装已损坏（我无法在 2008 年找到有关注册表设置的信息），或者为什么不是所有 WCF 服务实例都显示在 perfmon

# r - 如何在 data.frame 中找到元素的第一次和最后一次出现？

> ID：11546684
> 
> 赞同：17
> 
> 时间：2012-07-18T17:05:47.103
> 
> 标签：r, dataframe, sas

我已经详尽地搜索了 FIRST 的直接 R 翻译。最后。SAS DATA 步骤中的指针，但似乎找不到。对于那些不熟悉 SAS 的人，首先。是一个布尔值，用于标识给定元素在表中的第一次出现和最后一次出现。是一个布尔值，用于标识最后一次出现。例如，考虑以下排序表：

```
V1    V2    V3
1     1     1
1     1     2
1     2     3
1     2     4
2     3     5
2     3     6
2     4     7
2     4     8
3     5     9
3     5     10
3     6     11
3     6     12 
```

因为 SAS DATA 步骤逐行读取表，所以我可以使用如下语句：

```
IF FIRST.V1 THEN DO ... 
```

当且仅当这是第一次在 V1 中遇到观察时，FIRST.V1 才会返回 TRUE。换句话说，对于 V1[1]（'1' 的第一次出现）、V1[5]（'2' 的第一次出现）和 V1[9]（'3' 的第一次出现），它将返回 true ）。最后。指针以类似的方式起作用，但具有该元素的最终外观。

**R**中有什么可以模仿这个吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-18T17:14:47.453

您可以使用 duplicated 和 rev （对于 LAST）来执行此操作：

```
> v1=c(1,1,1,2,2,3,3,3,3,4,4,5)

> data.frame(v1,FIRST=!duplicated(v1),LAST=rev(!duplicated(rev(v1))))
   v1 FIRST  LAST
1   1  TRUE FALSE
2   1 FALSE FALSE
3   1 FALSE  TRUE
4   2  TRUE FALSE
5   2 FALSE  TRUE
6   3  TRUE FALSE
7   3 FALSE FALSE
8   3 FALSE FALSE
9   3 FALSE  TRUE
10  4  TRUE FALSE
11  4 FALSE  TRUE
12  5  TRUE  TRUE 
```

# javascript - Onblur 和 id 的相同“名称”导致歧义

> ID：11546685
> 
> 赞同：0
> 
> 时间：2012-07-18T17:05:47.247
> 
> 标签：javascript, ajax

我正在制作带有 Ajax 的表单，并且我想在客户端使用 javascript 进行验证。但是，当我将 id 名称和 onblur fnc 名称相同时遇到问题：

```
<label>Title*:</label>

<?php 
echo '<input type="text" id="title1" value = "" onblur="title1(this.value)"/> <span id="err1"> </span> <p></p>';
?> 
```

基本上 Ajax 将不起作用，因为我的 fnc 名称与 id 名称相同。我只是想知道为什么它会引起歧义，因为 onblur 和 id 需要 diff 参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:08:12.937

一些浏览器会自动将具有 ID 的元素作为全局`window`对象的属性。为了避免这种情况，显式声明它们很重要。尝试这个：

```
var title1 = function(val) {
    // function body
} 
```

这基本上迫使浏览器将其保留`title1`为变量而不是对元素的引用。

# android - 通过app访问apk中的文件

> ID：11546686
> 
> 赞同：0
> 
> 时间：2012-07-18T17:05:55.463
> 
> 标签：android, file, apk

我很确定这是可能的，但只是想检查一下。我想知道如何访问 apk 中的文件。该文件在我构建时被添加到 apk，但我不确定如何指定文件的位置（相对路径）。我已经给出了相对路径，但这似乎不起作用。

有没有人试过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:14:31.460

如果该文件位于 APK 的“assets”文件夹中，那么您可以像这样访问它：

```
 InputStream is = context.getAssets().open("FILENAME"); 
```

文件名在哪里，包括**相对于资产文件夹的**`FILENAME`路径

# sql - SQL Server 中主键和唯一聚集索引之间的性能差异

> ID：11546688
> 
> 赞同：4
> 
> 时间：2012-07-18T17:06:18.527
> 
> 标签：sql, sql-server, sql-server-2008

我们有 2 个大约 40M 行的表。数据库大小约为 20GB，大部分用于这 2 个表。每天，我们需要删除一些数据，即大约 10M 行。因此，我们使用批量删除将日志文件保持在一定大小。

最初，该表没有主键。但是每个表都有唯一的聚集索引。删除需要永远。即在虚拟机上删除 500K 行大约需要 2-3 个小时。* 删除前，索引已重建。

现在，我们将唯一的聚集索引转换为主键。删除 2M 行大约需要 20-30 分钟。

我知道主键和唯一聚集索引之间存在差异，但为什么性能如此不同？

有人有一些见识吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T17:45:58.443

滚动我的 8 球：如果您声明了一个*非集群*主键（正如您的帖子中所暗示的那样），那么在每批中，您很可能会达到[索引临界点](http://www.sqlskills.com/BLOGS/KIMBERLY/category/The-Tipping-Point.aspx)。因此，每个批次都会对 40M 行进行全面扫描以删除批次大小。然后，在下一批中，再次进行全面扫描。依此类推，直到您的 10M 被删除。使用集群键，批次应该只扫描被删除的实际行（当然我假设您的批量删除条件实际上会使用集群键......）。*如您所见，当人们开始猜测*时，会有很多未知数...

但最终......您有一个性能问题，您应该使用性能故障排除技术进行调查。捕获执行计划、[等待统计信息](http://sqlblog.com/blogs/jonathan_kehayias/archive/2010/12/30/an-xevent-a-day-30-of-31-tracking-session-and-statement-level-waits.aspx)、[统计信息 io](http://msdn.microsoft.com/en-us/library/ms184361.aspx)。遵循[Waits 和 Queues 之](http://technet.microsoft.com/en-us/library/cc966413.aspx)类的方法。措施。不要听互联网上刚刚投出[8 球的人的](http://en.wikipedia.org/wiki/Magic_8-Ball)[猜测](http://rusanu.com/2010/03/31/the-bizzaro-guide-to-sql-server-performance/)...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T21:38:49.000

I imagine it could be something like your index was very fragmented before one delete operation but not before another. How fragmented was the clustered unique index? You could see if there is still a difference in runtime after doing a rebuild on all indexes before the delete with something like `ALTER INDEX ALL ON blah REBUILD`

What options did you use when creating your unique clustered index (specifically what are the following set to: PAD_INDEX, STATISTICS_NORECOMPUTE, SORT_IN_TEMPDB, IGNORE_DUP_KEY, ALLOW_ROW_LOCKS, and ALLOW_PAGE_LOCKS)?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:23:45.333

您可以尝试在删除之前删除索引，然后再重新添加。如果我没记错的话，每次删除后都会重新组织索引；这需要额外的时间。

# javascript - 超出父级宽度的元素的特定规则

> ID：11546695
> 
> 赞同：1
> 
> 时间：2012-07-18T17:06:47.383
> 
> 标签：javascript, css, dom

当子元素的宽度大于其父元素时，它会超过父元素的宽度。我想相反，它超过了父级的宽度，它使这个`right`设置为“0”，使其粘在父级 Div 的右侧，这可能吗？

看那个例子： http : [//jsfiddle.net/rTg3x/3/](http://jsfiddle.net/rTg3x/3/) *inner1* div超过了*主*div限制，而*inner2* div没有，我想把inner1 div粘在右边，不知道`left`CSS的数量它有。

那可能吗？提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:37:50.283

你可以尝试一些讨厌的 jQuery。这就是我想出的。它有效，但可能有更清洁的方法。

```
if(($('#inner1').offset().left + $('#inner1').width()) > $('#main').width()){
    $('#inner1').css({'right':'0', 'left': 'auto'});
} 
```

基本上就是说，如果你的 div 的宽度加上它从左边的偏移量大于父级的宽度，则右对齐它。

对你来说更通用。

```
$('#main').find('div').each(function() {
    if($(this).offset().left + $(this).width() > $('#main').width()) 
        $(this).css({'right':'0', 'left': 'auto'});

}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:09:31.093

**回答**： 在这种情况下，这是不可能的。

在这种情况下，您的内部分隔线是绝对定位的，因此与父级分隔线没有关系。它延伸出来是因为你已经陈述了导致这种情况的价值观`left`。`top`相对定位的子分隔线不会出现这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:12:55.587

不确定，如果我理解你的问题。

这是你要找的东西：http: [//jsfiddle.net/rTg3x/5/](http://jsfiddle.net/rTg3x/5/) ??

# objective-c - 为什么传递给块的变量没有被释放？

> ID：11546702
> 
> 赞同：0
> 
> 时间：2012-07-18T17:07:45.900
> 
> 标签：objective-c

我已经测试了以下代码。

```
// Employee.h

@interface Employee : NSObject
@property(nonatomatic, copy) void (^print)(void);
@end

// Employee.m

@implementation Employee
@synthesize print = _print;

- (void)dealloc {
    [_print release];
    [super dealloc];
}

@end

// main.m

int main() {

    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];
    Employee* john = [[[Employee alloc] init] autorelease];

    john.print = ^{
        NSLog(@"block test %@", john);
    };

    [pool drain];
} 
```

在这种情况下，变量“john”的 dealloc 不会被调用。但是如果我不记录 john 变量（就像 NSLog(@"block test")），那么它的 dealloc 就会被调用。会有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:23:57.243

It's circular reference, which will prevent the affected instance to be deallocated in the system of reference-count memory management.

According to the documentation

> In a manually reference-counted environment, local variables used within the block are retained when the block is copied.

[http://developer.apple.com/library/ios/documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW3](http://developer.apple.com/library/ios/documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW3)

`john` got retained when the block is copied to `print`, so it's like that `john` has retained itself via `print` variable. Even `john` will be released by the pool's draining, the reference count would never reach zero and `dealloc` would never get called.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:33:02.950

正如 tia 所说，您在这里有一个保留周期。

这是摆脱它的解决方案：

```
int main() {

    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];
    Employee* john = [[[Employee alloc] init] autorelease];

    Employee* __weak weakjohn = john; // weak reference to john, to be used in the block.
    john.print = ^{
        NSLog(@"block test %@", weakjohn);
    };

    [pool drain];
} 
```

# javascript - 定义 DOCTYPE 时 XSLT 和 javascript 的奇怪行为

> ID：11546703
> 
> 赞同：0
> 
> 时间：2012-07-18T17:07:48.447
> 
> 标签：javascript

在我的 XLST 中，我们使用“vanilla”javascript 来操作报告中的一些 div。其中一个高于屏幕中心的所有其他内容，当页面加载时我这样称呼它：

```
var overlayObj = document.getElementById('theoverlay');
overlayObj.style.left = Math.max(0, ((window.innerWidth - overlayObj.offsetWidth) / 2) + window.scrollX);
var padding = 50;
overlayObj.style.top = window.scrollY + padding;
overlayObj.style.bottom = -window.scrollY + padding; 
```

当页面调整大小+滚动时也会调用它，它工作正常，但是我注意到我们的 XSLT 中没有 doctype，这导致 IE 中的怪癖模式几乎破坏了一切。所以我添加了 HTML5 文档类型，现在上面的代码没有做任何事情。我已经发出警报以触发 的值，`overlayObj.style.left`当文件中没有 doctype 时，我会得到确切的 div 大小，但是当有 doctype 时，我会得到 value `auto`。

有谁知道为什么会发生这种情况？以及如何让它给我价值？

获取我正在使用的数据时：

```
var computedStyle = window.getComputedStyle(overlayObj, null);
alert("left value: " + computedStyle.getPropertyValue("left")); 
```

`overlayObj.style.top`如果我在有 doctype 时尝试返回，我没有得到任何响应。同样，没有 doctype 就没有问题，并且返回值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:59:35.527

好吧，在怪癖模式下，浏览器确实会尝试理解您损坏的 CSS，但在标准模式下，您需要确保为 or 分配正确的 CSS 值，`top`并且`left`它由一个数字和一个单位组成，例如`foo.style.left = 200 + 'px';`. 因此，请确保您提供了该单元，并且该分配应该有效。

# iphone - present/dismissModalViewController 导致 UINavigationBar "Back" 失去动画

> ID：11546709
> 
> 赞同：1
> 
> 时间：2012-07-18T17:08:06.920
> 
> 标签：iphone, ios, animation, modal-dialog, presentmodalviewcontroller

我有一个 UITableViewController 使用 UINavigationController 推送 UIViewController：

```
[self.navigationController pushViewController:detailViewController animated:YES]; 
```

在 detailViewController 中，当用户点击一个按钮（用于发送 SMS 消息的 MFMessageComposeViewController）然后将其关闭时，我会呈现一个模式视图，如下所示：

```
[self presentModalViewController:smsViewController animated:YES];
...
// user pushes Send or Cancel button on the view
...
[self dismissModalViewControllerAnimated:YES]; 
```

SMS 模式视图正确关闭，但现在当我单击 UINavigationBar 上的“返回”按钮时，视图不会动画返回到表视图。详细视图消失了，UITableViewController 的视图就在那里。后退按钮动画和淡入淡出，选定的表格单元格仍然具有淡蓝色效果，但没有视图动画。

有谁知道为什么视图不能正确动画？如果我不打开 SMS 模态视图，那么动画可以正常工作，所以我很确定它是由模态行为引起的。

这是我的 Interface Builder 视图排列如何查找此选项卡栏项：

![查看安排](../Images/a6b0704c8e4772ee37f31b66e12592df.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:50:14.510

请将此行更改`[self.navigationController pushViewController:detailViewController];` 为

```
[self.navigationController pushViewController:detailViewController animated:YES]; 
```

并检查您的 detailView`viewWillAppear`和`viewWillDisappear`方法是否设置为`YES`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:24:39.803

我发现了我的问题。我正在使用一个自定义的 UITabBarController 子类，它`-(void)viewWillAppear:(BOOL)animated`使用一些自定义选项卡栏处理来覆盖。但是，我没有调用`[super viewWillAppear:animated]`被覆盖的方法。是的，这是我开发人员生活中悲伤的一天。对我来说，这会导致我所经历的行为仍然很奇怪，但我确信它现在由于这种变化而得到修复。

有趣的是，模式推送/关闭动画在没有`[super viewWillAppear:animated]`iPhone 4.3 模拟器中的调用的情况下可以正常工作。但是，它不适用于 iPhone 5.0 或 5.1 模拟器。（我使用非 MFMessageComposeViewController 在 iPhone 模拟器上发送模式行为的文本，因为模拟器不支持 SMS）。

# ios - Facebook“流中不允许使用 FBCDN 图像”？

> ID：11546712
> 
> 赞同：8
> 
> 时间：2012-07-18T17:08:23.903
> 
> 标签：ios, facebook, facebook-graph-api, upload

上传图片后，我想将其发布在用户墙上。不幸的是，我在 Facebook UI 中收到以下错误：

> “流中不允许使用 FBCDN 图像。文件*路径*”

似乎值 @"picture" 不会被接受，但为什么呢？当我 NSLog “thumbURL”时，它是正确的。我该如何解决？这是我的完整方法：

```
 NSString *thumbURL = kDefaultThumbURL;
    NSString *imageLink = [NSString stringWithFormat:[result objectForKey:@"link"]];    

    NSMutableDictionary* dialogParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                             kAppId, @"app_id",
                             imageLink, @"link",
                             thumbURL, @"picture",
                             @"imageName", @"name",
                             nil];

    [appDelegate.facebook dialog:@"feed" 
                       andParams:dialogParams 
                     andDelegate:self]; 
```

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T09:30:04.947

您需要将图像存储在本地服务器的某个位置。由于这篇 [文章](http://www.syndicatedmethods.com/SyndicatedBlogs/post/2010/06/22/FBCDN-image-is-not-allowed-in-stream-How-can-this-be.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T02:13:07.057

我通过编写一个仅转发图像数据然后链接到该页面的页面来解决同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T10:25:46.333

是的，您不允许共享由 Facebook CDN 服务器托管的图像。

有两种可能的解决方案：

1.  下载并托管到本地服务器上的映像。
2.  编写一个页面，获取 FBCDN url，获取图像内容并发送它返回图像数据。

# node.js - Node.js API 并发连接阻塞

> ID：11546715
> 
> 赞同：2
> 
> 时间：2012-07-18T17:08:31.313
> 
> 标签：node.js, mongodb

这是我第一次使用 Node.js 和 Mongo，所以请原谅任何无知。我来自 PHP 背景。我的理解是 Node.js 之所以可以很好地扩展，是因为它具有事件驱动的特性。因此，我在 node 中构建了我的 API，并一直在 localhost 上对其进行测试。今天，我将它部署到我的云服务器上，一切正常，除了......

随着请求开始堆积，它们开始需要很长时间才能完成。只有 2 个客户端连接到 API，当两个客户端尝试同时发出多个请求时，我已经看到 30 秒以上的页面加载时间（有时确实会发生）。

API 完成的大部分工作是 (a) 读取/写入驻留在云上的第二台服务器上的 MongoDB (b) 向其他 API、网站等发出请求并返回结果。这两个操作都不应该阻塞，但我可以想象这个问题与 Mongo DB 服务器 (a) 或外部 API (b) 上的瓶颈有关。

当然，我最终会拥有多个应用服务器，但我希望每个服务器能够处理多个并发客户端而不会阻塞。

一些注意事项：1）我在节点代码中留下了一些console.logs，并且我打开了一个SSH客户端来监控云服务器。我怀疑这可能会导致速度变慢 2) 我使用 express、mongoose、Q、request 和一些其他模块

感谢您花时间帮助节点 newb ;)

* * *

编辑：在下面的一些回复之后添加了一些性能图的图片...... ![阿帕奇连接](../Images/6bedc94db6c613daff3b05e8de17e60c.png) ![CPU使用率](../Images/a7470fd6a2bdca36c0ddd301a12f800c.png)

* * *

编辑：这是一个典型的回调——它由快速路由器调用，它使用 Q 模块和 OAuth 对 Facebook 进行 Post API 调用：

```
post: function(req, links, images, callback)
{
    // removed some code that calculates the target (string) and params (obj) variables
    // the this.request function is a simple wrapper around the oauth.getProtectedResource function
    Q.ncall(this.request, this, target, 'POST', params)
    .then(function(res){
        callback(null, res);
    })
    .fail(callback).end();
}, 
```

* * *

编辑：一些“upsert”代码

```
upsert: function(query, callback)
{
    var id = this.data._id,
        upsertData = this.data.toObject(),
        query = query || {'_id': id};

    delete upsertData._id;

    this.model.update(query, upsertData, {'upsert': true}, function(err, res, out){
        if(err)
        {
            if(callback) callback(new Errors.Database({'message':'the data could not be upserted','error':err, 'search': query}));
            return;
        }
        if(callback) callback(null);
    });
}, 
```

诚然，我对 Q/promises 的了解很薄弱。但是，我认为我一直以一种不会阻止的方式实施它们......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:17:52.450

您的问题提供了一半的相关数据：技术堆栈。但是，在调试性能问题时，还需要另一半数据：性能指标。

您正在运行一些“云服务器”，但不清楚这些服务器实际在做什么。他们在 CPU 上飙升吗？在内存上？在 IO 上？

有很多潜在的问题。您是否在生产模式下运行 Express？您是否在 MongoDB 服务器上占用了太多 IO？您是否合法下载了太多数据？您是否陷入了无限的 Node.JS 循环？（*它发生了*）

我想提供更好的建议，但在不知道所涉及服务器的状态的情况下，真的不可能开始挑选任何特定的底层技术。您可能是“节点新手”，但基本的服务器监控是跨编程语言的标准。

* * *

感谢您提供额外的细节，我将重申我上面评论中最重要的部分：**这些服务器在哪里被阻止？**

*   中央处理器？（*显然不是你的图表*）
*   记忆？（*这里似乎不太可能*）
*   IO？（*IO 图在哪里，你的数据库服务器在做什么？*）

# symfony - 教义 find() 返回控制器

> ID：11546716
> 
> 赞同：1
> 
> 时间：2012-07-18T17:08:32.217
> 
> 标签：symfony, doctrine-orm

我的控制器中有一个方法，它从 JMSSerializerBundle 获取一个反序列化的对象并返回完整的对象，准备好被持久化。我这样做的原因是返回更新的对象，因此，当它被持久化时，它不会将所有内容重置为默认值。

运行时，此方法最终会`ErrorException`在指示的行上抛出一个并将其放入我的日志中：`Warning: ReflectionProperty::setValue() expects parameter 1 to be object, null given in C:\DevelopmentProjects\keobi-web\vendor\doctrine\lib\Doctrine\ORM\Mapping\ClassMetadata.php line 177 (uncaught exception) at C:\DevelopmentProjects\keobi-web\vendor\symfony\src\Symfony\Component\HttpKernel\Debug\ErrorHandler.php line 65`

出于某种原因，该`EntityManager`方法`find`正在返回（根据`get_class`）`DefaultController`，该方法的控制器类。并且`setFieldValue`说它是NULL。

让我感到困惑的一件事是，`Doctrine\ORM\EntityNotFoundException`如果找不到实体，应该抛出。它没有被抛出。所以，它显然是在找到实体，而不是正确地返回它......

传入参数`$data`是由 JSMSerializerBundle 反序列化的对象。`$em`绝对是`EntityManager`，`$metadata`绝对是`ClassMetadata`。

我在这里不知所措。不知道如何进行。

> 受保护的函数 processEntity($data)
> {
> $em = $this->getDoctrine()->getEntityManager(); $metadata = $em->getClassMetadata(get_class($data)); $fqcn = $元数据->getName(); $blankEntity = 新 $fqcn(); $id = 数组（）；
> 
> ```
> $this->get('logger')->debug('Incoming object type: ' . get_class($data)); # Keobi\ModelBundle\Entity\User
> $this->get('logger')->debug('Blank entity type: ' . get_class($blankEntity)); # Keobi\ModelBundle\Entity\User
> $this->get('logger')->debug('FQCN: ' . $fqcn); # Keobi\ModelBundle\Entity\User
> 
> foreach ($metadata->getIdentifierFieldNames() as $identifier)
> {
>   $id[$identifier] = $metadata->getFieldValue($data, $identifier);
> 
>   if (!$id[$identifier])
>   {
>     $this->get('logger')->debug(sprintf("Identifer '%s' missing. Assuming the object is new.", $identifier));
>     return $data;
>   }
> }
> 
> $entity = $em->find($metadata->getName(), $id);
> 
> $this->get('logger')->debug(get_class($entity)); # Keobi\RestAPIBundle\DefaultController
> 
> foreach ($metadata->getFieldNames() as $field)
> {
>   $value = $metadata->getFieldValue($data, $field);
>   $default = $metadata->getFieldValue($blankEntity, $field);
> 
>   if ($value <> $default)
>   {
>     $metadata->setFieldValue($entity, $field, $value); # <- throws ErrorException
>     $this->get('logger')->debug(sprintf("Updated field '%s' in %s", $field, get_class($entity)));
>   }
> }
> 
> return $entity; 
> ```
> 
> }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:28:17.777

看起来 Doctrine2 有问题。[我将它更新为Github repo](https://github.com/doctrine/doctrine2)的最新 HEAD 提交。令我困惑的是，这种方法实际上在不久前奏效了。

找不到解决问题的确切提交，但在撰写本文时，提交是[93cef612701b9e8caaf43c745978cd4fbd9d4e4e](https://github.com/doctrine/doctrine2/commit/93cef612701b9e8caaf43c745978cd4fbd9d4e4e)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:59:18.130

```
$entity = $em->find($metadata->getName(), $id); 
```

您需要指定搜索的存储库，例如：

```
$entity = $em->getRepository('EntitiesBundle:Entity')->find(...) 
```

# python - 相同的shebang不起作用

> ID：11546717
> 
> 赞同：0
> 
> 时间：2012-07-18T17:08:35.620
> 
> 标签：python, tcsh, shebang

所以我试图创建一些我想运行的脚本，而无需在每次运行时手动指定解释器。

```
#!/usr/bin/python 
```

以上是现有脚本上的 shebang，它可以按照我的意愿运行。

下面是我从头开始编写的脚本的shebang

```
#!/usr/bin/python 
```

对我来说，它们看起来相同，但运行第二个给我一个

```
helloWorld.py: permission denied 
```

两者都是使用 kate、utf-8 和 unix 行创建的。两者都和我一模一样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T17:09:54.117

shebang 可能是正确的，但脚本也需要执行权限。

```
# Anyone can execute
chmod +x helloworld.py

# Only the file owner can execute
chmod u+x helloworld.py 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:10:41.553

您需要设置脚本的权限。尝试：

```
chmod u+x helloWorld.py 
```

并再次运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:11:42.527

问题不是 /usr/bin/python 的权限，而是实际脚本的权限。

如果您从命令行运行并且没有将脚本名称作为参数传递给 python，则该脚本必须是可执行的。

如果不是，则使用 chmod 修复`chmod +x helloworld.py`

# r - Access 中的 RODBC 数据导入错误

> ID：11546718
> 
> 赞同：0
> 
> 时间：2012-07-18T17:08:39.767
> 
> 标签：r, ms-access, rodbc

我正在尝试将在访问数据库上执行的查询结果导入 R。我可以使用 RODBC 包建立连接并且能够检索记录，因此与数据库的连接不是问题。问题是当我将两列读入 R 时，它们是不准确的。

access 中的查询从表中读取数据，然后根据我执行的计算生成两个附加列。我导入了 18 列，其中 16 列直接来自表，另外两列是计算列。当我在访问中执行此查询时，一切都很好。access 中的两个计算列的结果（许多 IIF 语句的结果），我将其称为 V1 和 V2，运行查询后在 access 中的结果如下所示：

```
V1        V2
A        -.1
A          0
A         .2
B         .2
A        -.3
C          0
A         .03 
```

V1 采用三个值（A、B、C），V2 包含浮点数，范围从大约 -.35 到 1.5。

这些值正是我想要的，所以我知道当我在 access 中运行查询时它是有效的。

我想在 R 中获得这些相同的值，所以我运行生成上述结果的相同查询，如下所示：

```
query = "Select ..."
channel = odbcConnectAccess2007("DatabaseLocation.accdb")
df = sqlQuery(channel, query) 
```

同样，与数据库的连接不是问题。在我尝试从 R 运行此查询后，两个计算列（V1 和 V2）的结果与我在 access 中运行查询时的结果不匹配。其他列是直接从表中读取而没有任何计算的，它们应该是这样的。在 R V1 和 V2 中运行查询后，如下所示：

```
V1          V2
A           0
A           0
A          .2
A          .2
A           0
A           0
A          .03 
```

对于 V1，每个值现在都相同 (A)。对于 V2，*一些*值被正确读入，但不是全部。许多值已更改为 0，现在 V2 中的最小值是 -.07，而当我在 access 中运行相同的查询时，V2 中的最小值是 -.35。未更改为 0 的值是正确的。

我的下一个想法是从访问中的查询中创建一个表，然后尝试读取整个新表。但是，我强烈希望按照我最初计划的方式获取数据，并且我想弄清楚这个问题，以便将来避免它。

编辑：我无法显示实际查询，因为它是专有工作的一部分，但这是一个非常相似的查询：

```
Select 
#First calculated column
(IIF(M.V3 = 1, 'C', IIF(M.V3 = 2, 'B', 'A'))) AS v1,
#Second calculated column, which is shortened from the real thing
(IIF(M.V4=0 AND M.V5 = 1, .0401, 0) +
  IIF(m.V4=0 AND m.V5 = 0, -.0441, 0)) AS V2,
#other values are directly read from the table
  M.V3, M.V4, M.V5, M.V6, M.V7, M.V8, M.V9, 
M.V10, M.V11, M.V12, M.V13, M.V14, M.V15,
B.VFIRST & B.VLAST AS M.V16
FROM MASTER_TABLE M
INNER JOIN B_TABLE B ON M.V10 = B.V10 
```

# virtualbox - virtualbox桥接接口无法连接到互联网

> ID：11546719
> 
> 赞同：3
> 
> 时间：2012-07-18T17:08:40.473
> 
> 标签：virtualbox

我正在尝试将 ubuntu 12.04 连接到我的本地网络 + 互联网，我希望它可以从本地网络直接访问，NAT 接口不这样做，所以我尝试设置一个网桥（在 virtualbox GUI 中）。但是我可以从来宾访问局域网上的任何其他主机，但我无法访问互联网，DHCP 似乎工作正常，因为我的来宾操作系统获得了正确范围内的 IP 和正确的掩码。但是，我什至无法 ping 连接我到互联网的路由器（与 DHCP 服务器相同的机器）。

这是我的配置：

*   主机：linux mint debian edition X86-64
*   客人：win7 64 和 ubuntu server 12.04 x86-64（都有同样的问题）
*   router-gateway-dhcp：来自橙色 ISP 的 livebox
*   主机网络接口：带有芯片组 RTL8191SU 的 wifi usb 加密狗（适用于我的主机）

我知道并非所有无线适配器都支持桥接模式，但是我可以访问本地网络但不能访问互联网，这不是很奇怪吗？也许问题来自网关本身？
任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:42:20.343

一般来说，在笔记本电脑上以桥接模式使用 VirtualBox 是没有问题的。我经常在不同的平台上使用它，但它可能与您的网络适配器有关。

您可以尝试使用 tcpdump（如果熟悉的话）或 wireshark 来调试您的网络吗？我曾经遇到过mac地址被路由器拒绝的问题。你能检查路由器是否允许未经授权的mac地址或类似的东西吗？

# ios - Objective-c 简单的 2d 游戏使用什么图形

> ID：11546720
> 
> 赞同：-6
> 
> 时间：2012-07-18T17:08:50.210
> 
> 标签：ios, opengl-es

我有一个构建 2d 游戏（packman 风格）的任务，我需要使用 open gl（任何版本）来绘制图像（任务是这样说的）。这意味着我应该在 Xcode 中构建“open gl application”，还是使用 Core Graphics 或 UIViews 就足够了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T20:15:24.147

我在使用 Core Graphics 编写 2D“packman 风格”游戏的实验中获得了非常积极的体验：如果你做得对，`CALayer`动画被证明是足够可靠且易于实现的。

这是一篇[很棒的文章的链接，](http://mysterycoconut.com/blog/2011/01/cag1/)它解释了如何在 Cocoa 中实现动画精灵。诀窍是使用图像图集来避免在运行时管理多个图像。

# jquery - 如何使用 slideToggle 回调更改背景位置

> ID：11546721
> 
> 赞同：1
> 
> 时间：2012-07-18T17:08:57.077
> 
> 标签：jquery, slidetoggle

希望我在这里遗漏了一些相对直接的东西。我希望第一次单击切换图像的背景位置-37px，然后第二次单击切换回原始位置。

我将加号更改为减号，然后在显示和隐藏 div 时返回加号。

谢谢您的帮助！

```
$('#expand-button').click(function() {
    $('#top10-list').slideToggle(600, function() {
        $('#expand-button').css('background-position','0 -37px');
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:10:22.717

[http://jsbin.com/ibijey/edit#javascript,html,live](http://jsbin.com/ibijey/edit#javascript,html,live)

```
$('#expand-button').toggle(function() {
    $('#top10-list').slideToggle(600, function() {
        $('#expand-button').css('background-position','0 -37px');
    });
},function(){
    $('#top10-list').slideToggle(600, function() {
        $('#expand-button').css('background-position','0 0px');
    });
}); 
```

# html - 外部css中的多个字体

> ID：11546731
> 
> 赞同：0
> 
> 时间：2012-07-18T17:09:35.477
> 
> 标签：html, css, font-face

我知道在 css 上可以有[多个字体。](https://stackoverflow.com/questions/4872592/multiple-font-face-in-css)现在我有两个使用这些字体的 html 页面，但将来会有更多；现在这些字体是通过内联 css 声明并通过类使用的。我真正想要的是将我所有的字体包装成一个 fonts.css，然后在每个单独的 html 页面上引用该 css 并使用`<p class="...-font"><p>`

所以我的字体的 css 是这样的：

```
@font-face {
        font-family: 'Komika';
        src: url('/bin/res/font/KOMIKAX_-webfont.eot');
        src: url('/bin/res/font/KOMIKAX_-webfont.eot?#iefix') format('embedded-opentype'),
        url('/bin/res/font/KOMIKAX_-webfont.woff') format('woff'),
        url('/bin/res/font/KOMIKAX_-webfont.ttf') format('truetype'),
        url('/bin/res/font/KOMIKAX_-webfont.svg#KomikaAxisRegular') format('svg');
        font-weight: normal;
        font-style: normal;
}
.komika-font {font: 30px 'Komika', Tahoma, sans-serif;}

@font-face {
        font-family: 'Nevis';
        src: url('/bin/res/font/nevis-webfont.eot');
        src: url('/bin/res/font/nevis-webfont.eot?#iefix') format('embedded-opentype'),
        url('/bin/res/font/nevis-webfont.woff') format('woff'),
        url('/bin/res/font/nevis-webfont.ttf') format('truetype');
        font-weight: normal;
        font-style: normal;
}
.nevis-font {font: 500% 'Nevis', Tahoma, sans-serif;} 
```

html是这样的：

```
<head>
<link rel="stylesheet" href="/bin/res/style-fonts.css.php" type="text/css" />
<link rel="stylesheet" href="/bin/res/style.css.php" type="text/css" />
<title><?php echo $photo_title ?></title>
</head>

<body>
    <h1 class="____">Some text here</h1>
<body> 
```

____ 应该是“nevis-font”但 IDE (Dreamweaver) 甚至不会自动完成。

*是否可以？因为我试过了，它没有用（选择的字体没有显示）。*

* * *

**我想我明白了，问题是包含字体的 css 不能像我一样以 .php 结尾。我只使用 *.css.php 因为 .php 强制服务器压缩 css 文件。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:11:25.317

是的，这是可能的。我们需要有关您曾经遇到的问题的更多详细信息，以便回答更详细的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:44:47.227

问题是包含 font-faces 的 css 不能像我一样以 .php 结尾。我只使用 *.css.php 因为 .php 强制服务器压缩 css 文件。

# android - 动态调整 ListView 组件的高度

> ID：11546733
> 
> 赞同：0
> 
> 时间：2012-07-18T17:09:47.697
> 
> 标签：android, listview

为了练习，我正在编写一个从本地数据库中获取字符串并将其放入 listView 的活动。然而，字符串的长度不同，从几个字符到几个句子。现在写，我可以把它们放在 listView 中，但并不是所有的字符串都适合。我很好奇您是否/如何动态选择列表视图每个部分的高度，以便整个字符串可以放入其中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:12:13.660

只需确保您的列表项布局`wrap_content`用于其`layout_height`属性即可。如果您使用的是固定高度，则它不会缩放以适应更大的字符串。如果您希望列表具有特定大小，但上述情况除外，您还可以添加一个`android:minHeight`属性以及您想要的标准尺寸。

另外，请确保您`TextView`的设置为多行（属性`android:singleLine="false"`）。

# php - PHP中的PDF验证

> ID：11546738
> 
> 赞同：0
> 
> 时间：2012-07-18T17:10:02.253
> 
> 标签：php, pdf, imagemagick

PHP中确定PDF是否正确填写的最佳方法是什么？源 PDF 是包含手写数据的传真表单。图像比较是一种选择吗？如果表格是在计算机上填写的，我知道我可以使用 pdftotext 来验证这些字段是否已完成。我只是不知道如何验证手写数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:03:06.267

对于手写数据，图像比较绝对是一种选择。例如，有关如何开始处理此任务的基本想法，请参见以下答案：

*   [**Imagemagick：“区分”图像**](https://stackoverflow.com/a/11362152/359307)

*但是，当传真*图像发挥作用时，这项工作可能会更加困难。（我们都知道从传真中获得的质量有多差。此外，它们经常会有一点偏差。与原始文件相比，它们可能会略微缩放。不要忘记它们的分辨率是 204x196dpi，这增加了一点失真。最后——你如何将传真的表格恢复到 PHP 中？这可能涉及扫描文件的另一个步骤，这也不一定会增加结果的质量。

不过，ImageMagick 可能能够处理所有这些：它可以[`-deskew`](http://www.imagemagick.org/script/command-line-options.php#deskew)图像，它可以减少或完全删除[`-noise`](http://www.imagemagick.org/script/command-line-options.php#noise)，它可以[`-distort`](http://www.imagemagick.org/script/command-line-options.php#distort)，图像[`-scale`](http://www.imagemagick.org/script/command-line-options.php#scale)等等[`-repage`](http://www.imagemagick.org/script/command-line-options.php#repage)......

# orchardcms - 如何呈现已知内容项目的投影的自定义布局

> ID：11546739
> 
> 赞同：3
> 
> 时间：2012-07-18T17:10:04.573
> 
> 标签：orchardcms, projection

我通过一个返回一组已知内容类型的内容项的查询定义了我自己的投影。我想提取这些内容项的某些内容部分并将它们显示在列表中。使用形状跟踪工具，我找到了编写自定义布局的视图模板： */Views/Parts.ProjectionPart.cshtml*

但是从模板中的模型变量我无法获得我想要的数据，因为它比内容部分数据高太多了。

我想要的一个很好的例子：假设我想呈现本教程中定义的产品目录：http: [//skywalkersoftwaredevelopment.net/blog/writing-an-orchard-webshop-module-from-scratch-part-5](http://skywalkersoftwaredevelopment.net/blog/writing-an-orchard-webshop-module-from-scratch-part-5)

但我只想呈现一个由项目组成的列表：

1.  创建产品的所有者的姓名
2.  产品名称。
3.  产品发布日期

我需要在一个地方渲染它，而不是在他们自己的部分视图中单独渲染。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:22:06.260

您是否尝试过在投影仪模块中添加布局？有一个属性模式选项可让您选择要显示的字段/数据。如果您想要的数据不存在，您应该能够实现 IPropertyProvider。Projections 模块代码中有这样的例子。

# jquery - jQuery：查找元素

> ID：11546741
> 
> 赞同：3
> 
> 时间：2012-07-18T17:10:14.073
> 
> 标签：jquery

我在这件小事上遇到了麻烦。我有一个看起来像这样的代码：

```
<table>.........
    <td>
        <span class="editable" id="name"><?= $name ?></span>
        <img class="edit_field" src="icons/edit.png"/>
    </td>
....... 
</table> 
```

我想获取跨度的 id，以便我可以更改它（例如在其中添加一个输入框）。

我有这个：

```
$('.edit_field').live('click', function() {
    var td = $(this).parent();
    var span = td.find(".editable");
    alert(span.id)
}); 
```

但它不起作用......有什么想法吗？（我正在尝试这样做，所以它可以重复使用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:11:34.957

不要使用`live()`，因为它已被弃用。与 jQuery 1.7+ 一起用于[`.on()`](http://api.jquery.com/on)委托事件处理。

```
$('table tbody').on('click', '.edit_field', function() {
    var img = $(this) ;
    var td = img.parent();   // parent td ( if needed )
    var span = img.prev('span');  // previous span ( a jQuery object )
    alert( span.attr('id') ); // or span[0].id,here span[0] will gives an element
}); 
```

如果您`.edit_field`不是动态生成的，请使用：

```
$('.edit_field').on('click', function() {
    var img = $(this) ;
    var td = img.parent();   // parent td ( if needed 
    var span = img.prev('span');  // previous span ( a jQuery object )
    alert( span.attr('id') ); // or span[0].id,here span[0] will gives an element
}); 
```

## 笔记

不要`id`对多个元素使用相同的。我假设，你`span`在每一行都有`id=name`. 如果这是真的，那么使用`class`代替`id`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T17:16:04.160

试试这个[http://jsfiddle.net/VPvSD/](http://jsfiddle.net/VPvSD/)

```
$('table').on('click', '.edit_field', function() {
    var td = $(this).parent();
    var span = $(this).prev('span');
    alert(span.attr("id"));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:14:13.260

试试这个：

```
 $('.edit_field').bind('click', function() {
   var td_id = $(this).parents('td').attr('id');
   alert(td_id);
  }); 
```

如果您使用 ID 而不是 class 会更好：

```
 $('#name').bind('click', function() {
   var td_id = $(this).parents('td').attr('id');
   alert(td_id);
  }); 
```

如果需要在上面添加一些html内容，那么：

```
 $('.edit_field').bind('click', function() {
   var added_html = "<input type='text' />";
   var td_id = $(this).parents('td').attr('id');
   $('#'+td_id).html(added_html);
   alert(td_id);
  }); 
```

对于这种情况，改为 live，最好使用 bind 或 on。

# c++ - 多线程 C++ dll 全局变量导致崩溃

> ID：11546742
> 
> 赞同：2
> 
> 时间：2012-07-18T17:10:13.903
> 
> 标签：c++, multithreading

我有一个小的 C++ dll，它有 2 个回调函数，可以从另一个 dll 中检索信息。

这 2 个回调函数在超过 1 个线程中被重复调用。

它们都将信息添加到同一个全局 Cstring 变量中。

我有另一个函数，使用这个 dll 的程序将调用它来读取这个变量。

这种情况很少见，但有时我会崩溃，这肯定是由于这个全局变量被 2 个不同的函数同时读取/写入。

我对多线程不是很有经验，所以我真的不知道该怎么做。

有什么建议么？

这是我之前发布的一个关于相同问题的问题，其中包含更多信息..（以及一些代码）。其中一位用户帮助我确认这是一个多线程问题，而我们并没有比这更进一步。

[C++ DLL 崩溃（我认为读/写崩溃相关）](https://stackoverflow.com/questions/10461206/c-dll-crash-reading-writing-crash-related-i-think)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:10:29.183

阅读[Thread Synchronization for Beginners](http://www.codeproject.com/Articles/7953/Thread-Synchronization-for-Beginners)。

如果您使用的是 MFC，那么[`CMutex`](http://msdn.microsoft.com/en-us/library/tt45160e%28v=VS.80%29.aspx)可能是合适的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:22:09.287

您必须为此变量创建一个关键部分。在 Windows 中，您可以使用[Mutex Objects](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684266%28v=vs.85%29.aspx "互斥对象")来完成。

# javascript - 乘以税收并增加总金额

> ID：11546743
> 
> 赞同：0
> 
> 时间：2012-07-18T17:10:17.880
> 
> 标签：javascript, jquery, html

我们并不总是需要为订单添加税款，因此我需要一种方法，除非指定，否则默认情况下会绕过税款。

所以我有以下文本框：

```
 <input  class="txt1" type="text" name="subtotal" value="" id="subtotal"
  size="16" tabindex="42" onChange="enableBeforeUnload();" 
  onKeyUp="enableBeforeUnload();"> 
```

我有这个文本框正常工作 - 它总结了这些值。

我有两个文本框，我试图乘以税率并显示总数：

```
 <input  class="txt1" type="text" name="tax" id="tax" value="1" size="16" tabindex="42"
  onChange="enableBeforeUnload();" onKeyUp="enableBeforeUnload();">

 <input  class="txt2" type="text" name="total1" value="" id="total1" size="16" 
 tabindex="42" onChange="enableBeforeUnload();" onKeyUp="enableBeforeUnload();"> 
```

我尝试使用以下方法，但没有成功：

```
 var tax = +$("#tax").val(),          // get tax and convert to a number
total = tax ? sum * tax : sum;   // if tax is a non-zero number multiply
                                 // otherwise just take the sum as is 
```

还有这个：

```
 totAmt.val(sum + sum*parseFloat(taxAmt.val()/100)); 
```

我无法正确实施。提前致谢。

[http://jsfiddle.net/thetylercox/jh2Ne/7/](http://jsfiddle.net/thetylercox/jh2Ne/7/)我不能让它正常工作 [http://soldbybillcox.com/treasure/demo.php](http://soldbybillcox.com/treasure/demo.php)它在这里工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:22:36.837

对于初学者，您正在调用：

```
$("#tax") 
```

但是您没有带有税号的元素。你可以使用：

```
$("input[name=tax]") 
```

-edit-> 那么是获取值的问题，还是计算总数的逻辑？您可以将税务逻辑放入函数中：

```
function getTax(tax){
var taxFloat = parseFloat(tax)
if(isNaN(taxFloat)){
    return 1;
}else{
    return taxFloat;
}
} 
```

然后使用：

```
total = getTax($('#tax').val()) * sum; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:26:52.147

你的公式中的那个加号是什么？应该只是：

```
var tax = $("#tax").val() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:34:39.490

尝试添加一个函数来进行计算

总计 = getTax($('#tax').val()) * sum;

# java - Java 正则表达式来区分特殊字符，同时允许非英文字符

> ID：11546749
> 
> 赞同：0
> 
> 时间：2012-07-18T17:10:33.540
> 
> 标签：java, regex, special-characters

我正在尝试做上面的事情。一种选择是获取一组特殊字符，然后使用一些 java 逻辑我们可以完成此操作。但是我必须确保我包含所有特殊字符。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:45:45.307

听起来您想从 Unicode 字符串中删除所有控制字符。您可以通过在正则表达式中使用 Unicode 字符类别标识符来完成此操作。“抄送”类别包含这些字符，请参阅[http://www.fileformat.info/info/unicode/category/Cc/list.htm](http://www.fileformat.info/info/unicode/category/Cc/list.htm)。

```
myString = myString.replaceAll("[\p{Cc}]+", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:03:17.587

您需要决定什么是特殊字符。可能感兴趣的一种方法是[Character.getType(char)](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#getType%28char%29)，它返回一个 int，它将匹配 Character 的常量值之一，例如 Character.LOWERCASE_LETTER 或 Character.CURRENCY_SYMBOL。这使您可以确定字符的一般类别，然后您需要确定哪些类别算作“特殊”字符以及您将接受哪些类别作为文本的一部分。

请注意，Java 使用 UTF-16 对其 char 和 String 值进行编码，因此您可能需要处理补充字符（请参阅 getType 方法描述中的链接）。这很麻烦，但是 Character 方法确实提供了一些方法来帮助您检测这种情况并解决它。请参阅[Character.isSupplementaryCodepoint(int)](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#isSupplementaryCodePoint%28int%29)和[Character.codepointAt(char[], int)](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html#codePointAt%28char%5b%5d,%20int%29)方法。

另请注意，Java 6 对 Unicode 的了解远不及 Java 7。最新版本的 Java 在其 Unicode 数据库中添加了更多内容，但在 Java 6 上运行的代码将无法识别一些（实际上相当多）外来代码点为作为 Unicode 块或一般类别的一部分，因此在编写代码时需要牢记这一点。

# c# - C# 检测 webbrowser 控件中的回发

> ID：11546754
> 
> 赞同：0
> 
> 时间：2012-07-18T17:11:04.097
> 
> 标签：c#, postback, detect

我创建了一个从网页中获取数据并将其保存到数据库的应用程序。此页面发送一些 __postbacks。回发后，页面加载了一些我需要保存的数据。我不知道如何检测这个事件，所以我创建了一个按钮，当用户按下它时会抓取数据。如何使该过程自动化，以便用户不必自己检查回发？那就是如何在我的 webbrowser 控件中检测回发事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:28:49.363

webbrowser 控件有一个 DocumentCompleted 事件。您可以使用该`WebBrowser.Document`属性来查找此事件中的特定内容。

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e) {
  if (webBrowser1.Document.Body.InnerHtml.Contains("some way that I know I am ready"))
  } 
```

# java - java - servlets - 在基类中设置编码和会话？

> ID：11546755
> 
> 赞同：2
> 
> 时间：2012-07-18T17:11:04.077
> 
> 标签：java, session, inheritance, encoding, servlet-3.0

我正在浏览一个 servlet 站点，几乎在每个 doPost 中我都会遇到这样的代码：

```
@Override
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    // set encoding to UTF-8
    if (request.getCharacterEncoding() == null)
        request.setCharacterEncoding("UTF-8");
    // TODO : this may be needed in doGet too ?????????
    response.setCharacterEncoding("UTF-8");

    // check if session exists
    boolean sessionExists = request.isRequestedSessionIdValid();
    HttpSession session = request.getSession();

    if (!sessionExists)
        session.setMaxInactiveInterval(1000);

    // if session does not exist we create it
    ServletContext context = session.getServletContext();
    Integer numSessions = (Integer) context
            .getAttribute("numberOfSessions");
    if (numSessions == null)
        context.setAttribute("numberOfSessions", 1);
    else if (!sessionExists)
        context.setAttribute("numberOfSessions", ++numSessions);
} 
```

创建一个 BaseController 类并将此代码移到那里是否是个好主意 - 我应该将它移到 init() 方法还是 doPost() 中 - 然后调用`super.doPost`？`session.setAttribute("photo", photo);`在某些 servlet 中也有类似的行。那么`session`在 BaseController 中有一个字段是否是一个好主意 - 如果我理解正确的话，它应该是易变的。

我对这一切都很陌生。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:23:17.267

You should use the [Template Pattern](http://en.wikipedia.org/wiki/Template_method_pattern).

Example:

```
public abstract class BaseController extends HttpServlet {

public void service(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
    if (request.getCharacterEncoding() == null) {
        request.setCharacterEncoding("UTF-8");
    }
    response.setCharacterEncoding("UTF-8"); [...]

    doService(request, response);
}

protected abstract void doService(HttpServletRequest request, HttpServletResponse response) throws Exception, Error; 
```

}

And then you have to extend the BaseContoller class, and implement just the doService (or whatever) method.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T17:22:49.787

You can move setting the request character encoding to a helper method and call it from doPost. Also check if your code behaved correctly in case that the encoding is set to something else than utf-8.

On the other hand, the session stuff is a bit weird. If you want to keep track of the number of sessions, remove all that and use javax.servlet.http.HttpSessionListener. It is more elegant and you will have your code in a single place.

If you need to keep track of variables that belong to a session, keep using the HttpSession class, do not save them in a field in the controller.

# android - 如何让带有字母的微调器从右侧排序

> ID：11546759
> 
> 赞同：0
> 
> 时间：2012-07-18T17:11:11.983
> 
> 标签：android, android-spinner

是否可以构建一个类似于 android 联系人中的微调器？我有一个巨大的列表供微调器选择。我希望用户通过在微调器下拉列表的右侧提供一个字母列表来舒适地从列表中进行选择。就像我们在联系人中看到的那样。我怎样才能做到这一点？

# macos - 如何通过在 Mac OS X 中给出进程名称来获取进程的 PID？

> ID：11546765
> 
> 赞同：56
> 
> 时间：2012-07-18T17:11:36.743
> 
> 标签：macos, bash, shell, process, pid

我正在编写一个脚本来监视任何给定进程的 CPU 和 MEM。为此，我需要将要监视的进程的名称作为命令行参数发送。例如。

```
./monitorscript <pname> 
```

我需要在脚本中获取进程的 pid，以便我可以使用`ps -p <pid>`内部。

给定进程名称，如何获取进程的 pid？

我了解可能有多个同名进程。我只想从该列表中删除第一个进程。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-07-18T17:52:41.380

上面的答案大部分是正确的，只是需要对 Mac OSX 中的不同参数进行一些调整。

```
ps -A | grep [f]irefox | awk '{print $1}' 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2016-02-28T16:38:52.153

您可以使用 pgrep 命令，如下例所示

```
$ pgrep Keychain\ Access
44186 
```

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2015-02-24T10:31:39.430

您可以`pidof`使用[Homebrew](http://brew.sh/)安装：

```
brew install pidof
pidof <process_name> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-08-10T14:10:11.727

此解决方案更严格地匹配进程名称：

```
ps -Ac -o pid,comm | awk '/^ *[0-9]+ Dropbox$/ {print $1}' 
```

该解决方案具有以下优点：

*   它忽略命令行参数，如`tail -f ~/Dropbox`
*   它会忽略目录中的进程，例如`~/Dropbox/foo.sh`
*   它忽略名称如下的进程`~/DropboxUID.sh`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-08-07T08:34:06.043

这是我能找到的最短的命令：

```
ps -ax | awk '/[t]he_app_name/{print $1}' 
```

将括号放在第一个字母周围会阻止 awk 找到 awk 进程本身。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-18T23:59:20.143

试试这个：

```
echo "$(ps -ceo pid=,comm= | awk '/firefox/ { print $1; exit }')" 
```

该`ps`命令会产生如下输出，第一列是 PID，第二列是可执行文件名（仅）：

```
bookworm% ps -ceo pid=,comm=
    1 launchd
   10 kextd
   11 UserEventAgent
   12 mDNSResponder
   13 opendirectoryd
   14 notifyd
   15 configd 
```

...它`awk`处理，打印第一列（pid）并在第一次匹配后退出。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-18T17:20:09.367

你可以试试这个

```
pid=$(ps -o pid=,comm= | grep -m1 $procname | cut -d' ' -f1) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-22T00:27:46.120

ps -o ppid=$(ps -ax | grep nameOfProcess | awk '{print $1}')

打印出更改的进程 pid，然后打印出父 PID。然后您可以杀死父进程，或者您可以在以下命令中使用该 parentPID 来获取父进程的名称：

ps -p parentPID -o comm=

对我来说，父母是“登录”：\

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-02-23T16:05:17.553

为什么不运行 TOP 并使用选项按除 PID 以外的其他指标进行排序？比如，CPU/MEM 中使用的最高 PID？

top -o cpu <---按CPU使用率对所有进程进行排序

# jquery - 用于 Silverlight/JavaScript 的正确服务

> ID：11546766
> 
> 赞同：0
> 
> 时间：2012-07-18T17:11:41.640
> 
> 标签：jquery, json, wcf, silverlight, model-view-controller

我们正在开始一个新的大型项目，并打算在 Silverlight 中制作 UI。我们希望稍后能够切换到 HTML/JQuery，而无需重新编写整个服务端点。

Microsoft 服务堆栈中的标准方法是什么？

原谅这个问题的广度。我是 Silverlight 的新手。

我的倾向是倾向于 RESTFul JSON，我已经知道如何很好地使用 MVC 控制器。但 Silverlight 似乎想要（需要？）WCF 服务。我查看了启用 AJAX 的 WCF 服务，但其意图似乎是 Webforms/ScriptManager。

请指出我正确的方向。最终目标是拥有一个可以同时支持 JavaScript 和 Silverlight 客户端的服务端点。如果没有相对简单的解决方案，那也是一个很好的答案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:25:01.870

这是使用 Silverlight 调用 json ashx 服务的方法。

您可以使用 WebClient 调用 json 服务并接收流。然后，您可以使用 JsonValue 和 JsonArray 从流中检索数据并将其放入您的 Silverlight 模型中。

注意：确保添加 System.Json 作为参考。

```
public void CallJson()
{
    var webClient = new WebClient();
    webClient.OpenReadCompleted += ReadCompleted;
    webClient.OpenReadAsync(new Uri("http://thisIsWhereYour.Uru/Goes.ashx"));
}

void ReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    JsonArray array = (JsonArray)JsonValue.Load(e.Result);
    foreach (var jsonPerson in array)
    {
        var person = new {
            firstName = jsonPerson["FirstName"],
            lastName = jsonPerson["LastName"]
        };
    }
} 
```

# c++ - 错误：使用 boost-bind 到 boost-function 时，'operator[]' 的重载不明确

> ID：11546767
> 
> 赞同：1
> 
> 时间：2012-07-18T17:11:41.163
> 
> 标签：c++, functor, boost-bind, boost-function

我正在尝试根据输入字符串的值将过滤器仿函数映射到我的类的成员方法之一。

```
#include <iostream>
#include <map>
#include <boost/function.hpp>
#include <boost/cstdint.hpp>
#include <boost/assign.hpp>
#include <boost/bind.hpp>

typedef boost::function < bool(std::map<std::string, std::string>, std::string) > MyFilterFunctor;

class MyClass
{
public:
    bool FilterFunction1(std::map<std::string, std::string> myMap, std::string filterValue)
    {
        //do something
        return true;
    }
};

int main() {

    MyFilterFunctor myFilter = boost::bind(&MyClass::FilterFunction1, _1, _2, _3);
    return 0;
} 
```

我的错误：

```
/usr/include/boost/bind/bind.hpp:375:
error: ambiguous overload for ‘operator[]’ in ‘a[boost::_bi::storage3<A1, A2, boost::arg<I> >::a3_ [with A1 = boost::arg<1>, A2 = boost::arg<2>, int I = 3]]’ 
```

编辑：根据对我的问题的建议答案的建议，我稍微简化了我的示例。有人建议我需要将 MyClass() 作为参数传递给 boost::bind，这确实解决了发布的代码段中的编译错误。但是，鉴于我的代码结构，我不可能这样做。我想知道为什么我所做的与 boost::bind 文档中的这个示例不同：

```
struct X
{
    int f(int);
}

int main()
{ 
    boost::bind(&X::f, 1);     // error, X::f takes two arguments
    boost::bind(&X::f, _1, 1); // OK
} 
```

_1 参数不应该处理隐含的“this”吗？建议我使用 MyClass() 显式提供它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:27:54.800

`boost::assign::map_list_of`这与or无关`std::map`，同样的错误可以通过这个简单地重现：

```
MyFilterFunctor mff;
auto bb = boost::bind(&MyClass::FilterFunction1, _1, _2, _3);
mff = bb; 
```

`bb`需要 3 个参数： a `MyClass`， a`map<string,string>`和 a `string`。`mff`需要 2 个参数， a`map<string,string>`和 a `string`。两者显然是不相容的。

试试`boost::bind(&MyClass::FilterFunction1, MyClass(), _1, _2))`吧。

# python - 生成可以排序的列表

> ID：11546770
> 
> 赞同：0
> 
> 时间：2012-07-18T17:11:48.863
> 
> 标签：python, list, sorting

我有一段代码，这是一个在字典循环中调用的函数，如下所示：

```
hope = []
seconds = []
hope.append(self.date)
for those in hope:
    date = those
    pattern = '%m/%d/%Y'
    epoch = int(time.mktime(time.strptime(date, pattern)))
    seconds.append(epoch)
    print seconds 
```

我得到的结果像

```
[1505084400]
[1500850800]
[1509926400]
[1496617200]
[1492383600]
[1488758400]
[1499036400]
[1511136000]
[1511136000]
… 
```

但我希望秒的结果是这样的：

```
[1505084400,1500850800,1509926400,1496617200,1492383600,1488758400,1499036400,1511136000,1511136000.....] 
```

这样 sort 和 sorted 函数将对其起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:21:39.247

只需将 print 语句从 for 循环中取出并维护列表的状态：

```
class someclass(object):
    def __init__(self):
        self.hope = []
        self.seconds = []
    def appendtoseconds(self):
        self.hope.append(self.date)
        for those in self.hope:
            date = those
            pattern = '%m/%d/%Y'
            epoch = int(time.mktime(time.strptime(date, pattern)))
            self.seconds.append(epoch)
        print self.seconds 
```

# backbone.js - Backbone、Require、Jasmine 视图未呈现

> ID：11546772
> 
> 赞同：1
> 
> 时间：2012-07-18T17:11:52.570
> 
> 标签：backbone.js, requirejs, jasmine

在我的一生中，我似乎无法在 Jasmine 测试中呈现 HTML。我一直在关注我能找到的所有教程，但没有任何效果。

```
require(['../js/app', '../js/views/demand/match'], function(App, Match) {
    App.initialize();

    beforeEach(function() {
        this.view = new Match();
    });

    describe("Instantiation", function() {
        it("returns the view object", function() {
           expect(this.view.render()).toEqual(this.view);
        });

        it("produces the correct HTML", function() {
            this.view.render();
            var expectedHtml = '<a href="MatchLink"><h2>MatchLinkTitle</h2></a>';
            expect(this.view.el.innerHTML).toEqual(expectedHtml);
        });
    });
}); 
```

上面的代码总是有一个空白的 innerHTML 属性。与 match.js (match.html) 文件关联的 HTML 根本没有显示出来。有人有想法么？

# c++ - 如何让 eclipse CDT 忽略错误？

> ID：11546776
> 
> 赞同：8
> 
> 时间：2012-07-18T17:11:57.393
> 
> 标签：c++, eclipse, eclipse-cdt

我有很多来自 Eclipse 的解析器错误，但是当我编译代码时我没有这些错误。我怎么能忽略它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:23:02.560

在 CDT 的 Indigo 版本中：

> 项目设置 -> C/C++ 常规 -> 代码分析

您可以启用/禁用特定的错误和警告，以及自定义这些警告的包含和排除模式。

如果您收到大量“Type 'TYPE' could not be resolved”错误，也许您需要确保 Eclipse 可以找到您所有的代码和库。您可能需要检查：

> C/C++ 常规 -> 路径和符号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:18:31.760

在“设置”下，您可以有选择地关闭它报告的错误，以及它如何显示它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T21:40:51.027

1]

*   Windows-->preferences-->type "anno" 你会找到注解
*   导航（滚动）到警告部分，取消选中垂直标尺并根据需要休息

* * *

其他方法

*   2]转到项目资源管理器右键单击您希望禁用/关闭警告等的任何项目
*   ---> 属性 ---> c/c++ 设置--> 工具设置---> 搜索你的编译器 c 或 C++ 并 ---> 导航到警告部分---取消选中所有（/任何选中）- ----> 构建项目和 Voila 警告消失了 :)

# c++ - CDialogEx 对象中的 MFC CEdit 对象

> ID：11546777
> 
> 赞同：0
> 
> 时间：2012-07-18T17:12:01.483
> 
> 标签：c++, mfc

如果有人能帮我解决这个问题，我将不胜感激？我正在尝试创建一个带有文本框的对话框，用于接收错误消息。我已将 ON_WM_CREATE 添加到消息映射中，并编写了调试通过的此函数，但对象不显示。

```
int CImportDatatoAPMDlg::OnCreate(LPCREATESTRUCT LpCreateStruct)
{
    if(CWnd::OnCreate(LpCreateStruct) == -1)
    {
        return -1;
    }
    CEdit *MessageBox = new CEdit;

    MessageBox->Create(WS_CHILD | WS_VISIBLE | ES_MULTILINE | ES_AUTOVSCROLL,CRect(100, 200, 450, 150), this, 0x1552);

    return 0;
} 
```

我在设计对话框时是否必须制作一个虚拟框。我已经为其余的控件做了这个？我也想知道我在哪里给这个对象一个数字 ID 组合？

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:31:23.943

您通常应该使用 VisualStudio 资源编辑器向对话框添加控件。如果您想手动执行此操作，请在覆盖的 OnInitDialog 方法中创建并添加控件：

```
BOOL CImportDatatoAPMDlg::OnInitDialog() {
 BOOL bRes = CDialog::OnInitDialog();

   CEdit *MessageBox; // !!! put it into class definition
   MessageBox = new CEdit

   MessageBox->Create(WS_CHILD | WS_VISIBLE | ES_MULTILINE | ES_AUTOVSCROLL,CRect(100, 200, 450, 150), this, 0x1552);

   return bRes;
} 
```

# mysql - 在 MySQL 中，如何更新现有行的某些列并从引用表中插入新行？

> ID：11546785
> 
> 赞同：0
> 
> 时间：2012-07-18T17:12:46.053
> 
> 标签：mysql, sql, insert, left-join

以下将从`t2`我想要插入或更新现有元组的引用表中获取值 in table `t1`：

```
SELECT 
  id, col1 
FROM 
  t2
LEFT OUTER JOIN 
  t1
ON 
  t2.id=t1.id 
```

如果 中`id`已存在的元组`t1`，则应使用从中选择的值对其进行更新`t2`。如果 ,`id`中不存在具有 的元组`t1`，`(id, col1)`则应插入其他列并设置为默认值。

如何有效地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:18:28.720

用这两个`querys:`

这将加入和过滤，为您提供两个表中存在的值，因此您只需进行更新

```
 Update t1 set t1.col1 = t2.col1
from t1 inner join t2 on t1.id = t2.id 
```

这将加入和过滤，为您提供 t2 中的值，而不是 t1 中的值，因此您只需进行插入。

```
 insert into t1 select t2.id, t2.col1 
from t2 left outer join t1 on t2.id = t1.id where t1.id IS NULL 
```

**更新：**

从[这里](https://stackoverflow.com/questions/9532456/how-to-update-record-using-mysql-join)我可以看到MySQL 为此使用了另一个 sintax。所以你的查询可能会使用这个而不是上面的查询：

```
UPDATE t1 temp1
INNER JOIN t2 temp2
ON temp1.id= temp2.id 
SET temp1.col1= temp2.col1 
```

但概念是相同的（只是语法不同）您不需要 Where，因为 INNER JOIN 只会使用匹配/连接的字段。

# php - 找不到 PHPExcel 列：1054

> ID：11546787
> 
> 赞同：0
> 
> 时间：2012-07-18T17:12:47.897
> 
> 标签：php, mysql, excel, pdo, export

我正在尝试将 mysql 查询表导出到 excel 文件。我让它在我网站上的另一个页面上工作，但它似乎在处理这个特定查询时遇到了问题。我收到此错误：

```
Warning: PDO::query() [pdo.query]: SQLSTATE[42S22]: Column not found: 1054 
Unknown column 'u2.confirmed_cash' in 'field list' in 
/home2/jtdsdevc/public_html  /rbk/usage-v3/inc/excel-exporter
/MySqlExcelBuilder.class.php on line 130 
```

这是我的代码。

```
// Setup the SQL Statements
$sql_statement = getReport($idLeague, $idTeam);

function getReport($idLeague, $idTeam){
global $connect;

$sql = "
    SELECT idPlayer AS id,
    (SELECT CONCAT_WS(' ', location, name) FROM `team` WHERE `team`.id = u.idTeam) AS team,
    (SELECT CONCAT_WS(' ', first_name, last_name) FROM `player` WHERE `player`.id = u.idPlayer) AS name, 
    (SELECT u2.confirmed_cash FROM `usage` u2 WHERE u.idPlayer = u2.idPlayer ORDER BY date DESC LIMIT 1) AS total_cash, 
    (SELECT u2.confirmed_product FROM `usage` u2 WHERE u.idPlayer = u2.idPlayer ORDER BY date DESC LIMIT 1) AS total_product, 
    max(date) AS last_entry 
    FROM `usage` u INNER JOIN `team` t ON u.idTeam =t.id INNER JOIN `league` l ON t.idLeague =l.id WHERE (t.idleague =".$idLeague." or l.pID =".$idLeague." ) 
    ";

return $sql;
}

// Add the SQL statements to the spread sheet
$mysql_xls->add_page('Report',$sql_statement);

// Get the spreadsheet after the SQL statements are built...
$phpExcel = $mysql_xls->getExcel(); // This needs to come after all the pages have been added.
.... 
```

这就是错误发生的地方。MySqlExcelBuilder.class.php 文件中的确切行是：

```
if ($sh = $this->pdo->query($sql)) 
```

上面的`$sql`变量是

```
SELECT idPlayer AS id, 
(SELECT CONCAT_WS(' ', location, name) FROM `team` WHERE `team`.id = u.idTeam) AS team, 
(SELECT CONCAT_WS(' ', first_name, last_name) FROM `player` WHERE `player`.id = u.idPlayer) AS name, 
(SELECT u2.confirmed_cash FROM `usage` u2 WHERE u.idPlayer = u2.idPlayer ORDER BY date DESC LIMIT 1) AS total_cash, 
(SELECT u3.confirmed_product FROM `usage` u3 WHERE u.idPlayer = u3.idPlayer ORDER BY date DESC LIMIT 1) AS total_product, 
max(date) AS last_entry 
FROM `usage` u 
INNER JOIN `team` t ON u.idTeam =t.id 
INNER JOIN `league` l ON t.idLeague =l.id 
WHERE (t.idleague =1 or l.pID =1 ) 
```

编辑：还值得注意的是，查询本身在 phpMyAdmin 中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:56:50.290

问题解决了！我是调用错误的数据库，菜鸟错误。

# php - 使用链接而不是选择/选项将选定的值传递给 PHP 表单

> ID：11546790
> 
> 赞同：1
> 
> 时间：2012-07-18T17:12:59.347
> 
> 标签：php, select, drop-down-menu, option

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:36:32.753

您将需要 javascript 来执行此操作。正如您所说，您的 javascript 不是那么流利，我将在这里使用 jQuery 以一种简单的方式说明您需要做什么。请注意，它可以用纯 javascript 或使用另一个库来完成。

首先，您需要添加一个隐藏字段，该字段将包含您要与表单的其余部分一起提交的值，然后您需要使用 javascript 获取所选选项的值/单击并将其放入隐藏字段：

我还将在表格单元格中添加一个 ID，以便更轻松地选择正确的元素并捕获事件：

html:

```
<td valign="top" id="I_am_a">
    <input type="hidden" name="I_am_a">
    <a><p style="background:#ffffff;">I am...</p></a>
    <a href=""><p>an artist.</p></a>
    <a href=""><p>an educator.</p></a>
    <a href=""><p>a student.</p></a>
    <a href=""><p>a curator.</p></a>
    <a href=""><p>other...</p></a>
</td> 
```

javascript（假设包含 jQuery）：

```
$("#I_am_a a").on('click', function(e) {
  e.preventDefault();                    // prevent the default click action
  $("#I_am_a input")
      .val( $(this).find("p").text() );  // assign the text contents of the
                                         // paragraph tag in the clicked a
                                         // to the input element
}); 
```

像这样的事情应该这样做。

# c++ - Rabin-Karp 算法的最佳哈希函数是什么？

> ID：11546791
> 
> 赞同：7
> 
> 时间：2012-07-18T17:13:07.010
> 
> 标签：c++, c, algorithm, pseudocode, rabin-karp

我正在为 Rabin-Karp 算法寻找一个有效的哈希函数。这是我的实际代码（C 编程语言）。

```
static bool f2(char const *const s1, size_t const n1, 
               char const *const s2, size_t const n2)
{
    uintmax_t hsub = hash(s2, n2);
    uintmax_t hs   = hash(s1, n1);
    size_t   nmax = n2 - n1;

    for (size_t i = 0; i < nmax; ++i) {
        if (hs == hsub) {
            if (strncmp(&s1[i], s2, i + n2 - 1) == 0)
                return true;
        }
        hs = hash(&s1[i + 1], i + n2);
    }
    return false;
} 
```

我考虑了一些 Rabin-Karp C 实现，但所有代码之间存在差异。所以我的问题是：Rabin-Karp 哈希函数应该具有哪些特征？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T17:55:00.357

一个性能非常好的散列是伯恩斯坦散列。它甚至超过了许多流行的散列算法。

```
unsigned bernstein_hash ( void *key, int len )
{
    unsigned char *p = key;
    unsigned h = 0;
    int i;

    for ( i = 0; i < len; i++ )
        h = 33 * h + p[i];

    return h;
} 
```

当然，您可以尝试其他散列算法，如下所述： [NIST 上的散列函数](http://xlinux.nist.gov/dads/HTML/hash.html)

注意：从来没有解释过为什么它的`33`性能比任何其他“更逻辑”的常数都要好得多。

为了您的兴趣：这里是不同散列算法的一个很好的比较：散列算法 [的 strchr 比较](http://www.strchr.com/hash_functions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-09T14:46:04.177

对于小字母的问题，例如核酸序列搜索（例如`alphabet = {A, T, C, G, U}`），[nt-Hash](https://academic.oup.com/bioinformatics/article/32/22/3492/2525588)可能是一个很好的散列函数。它使用更快的二元运算和滚动散列更新，并且它还给出了均匀分布的散列值。

# javascript - 游戏开发mysql条件

> ID：11546794
> 
> 赞同：1
> 
> 时间：2012-07-18T17:13:30.550
> 
> 标签：javascript, mysql

当玩家将物品移动到他的角色时，物品类型（类型）被发送到服务器

在玩家装备臂章的情况下，type = "bracelet" Id 喜欢尝试将 item id 放在 game_moblist（游戏中的玩家和 badguys）表下的 leftbracer 列中，然后如果左侧有 item_id 则放在右侧已经。我使用 value = 0 来表示一个空槽。

```
if (type=="bracelet"){
    to_sql="UPDATE game_moblist SET leftbracer"="+item_id+" WHERE id="+player_id
} 
```

以前我先使用选择，但我想在 1 个查询中进行。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:30:33.840

只需使用 IF 来判断 leftbracer = 0，并将值设置为新项目 id 或保留旧值

```
UPDATE game_moblist SET 
   rightbracer = IF(leftbracer = 0, rightbracer, :item_id),
   leftbracer = IF(leftbracer = 0, :item_id, leftbracer ); 
```

# haskell - 我将如何使用可变向量编写 imapInto ？

> ID：11546795
> 
> 赞同：3
> 
> 时间：2012-07-18T17:13:34.193
> 
> 标签：haskell

这与这个问题有关：

[不知道从哪里开始使用可变向量](https://stackoverflow.com/questions/11478268/dont-know-where-to-start-with-mutable-vectors)

我将如何编写一个从一个向量中获取值、转换它们并将结果放入第二个向量的函数？更具体地说，它应该遍历源数组的所有索引，并将该索引和数组交给一个函数，然后将函数的结果存储在另一个数组中。

我认为签名看起来像这样：

```
imapInto :: (PrimMonad m, Unbox a) => (MVector (PrimState m) a -> Int -> a) -> MVector (PrimState m) a -> MVector (PrimState m) a  -> m () 
```

并且会被称为这样的东西：

```
import Data.Vector.Unboxed.Mutable MV

...
let dst = MV.replicate 10 0.0 in
let src = MV.replicate 10 1.0 in
imapInto (\src' i -> (src' * 2.0)) dst src
... 
```

这会将 src 中的所有元素乘以 2 并将结果放入 dst，从而产生一个状态单元。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T20:05:57.857

我认为没有内置函数可以满足您的需求。但是使用[这些](http://hackage.haskell.org/packages/archive/vector/0.9.1/doc/html/Data-Vector-Mutable.html#g:10)原语应该可以为您的任务编写命令式代码。如果它足够通用，你甚至应该可以在纯代码中使用它[`create`](http://hackage.haskell.org/packages/archive/vector/0.9.1/doc/html/Data-Vector-Unboxed.html#v%3acreate)。我想它会是这样的（只是草图，未经测试）：

```
imapInto :: (PrimMonad m, Unbox a) => (MVector (PrimState m) a -> Int -> a) -> MVector (PrimState m) a -> MVector (PrimState m) a -> m ()
imapInto f d s = go 0
    where
        go i = when (i < length d) $ write d i (f s i) >> go (i+1) 
```

不过，您的映射函数类型似乎很奇怪。你不是说`a -> Int -> a`吗？那么上面的代码将需要一些小的改动。

**更新**

这是使用示例，以及上述函数的更新版本。最不可能的调整是将`m`类型构造函数添加到映射器函数：

```
module Main where

import qualified Data.Vector.Unboxed.Mutable as MV
import qualified Data.Vector.Unboxed as U
import Control.Monad (forM_)
import Control.Monad.Primitive

imapInto :: (PrimMonad m, MV.Unbox a) 
         => (MV.MVector (PrimState m) a -> Int -> m a)
         -> MV.MVector (PrimState m) a 
         -> MV.MVector (PrimState m) a 
         -> m ()
imapInto f d s = forM_ [0..MV.length s - 1] $ \i -> do
    v <- f s i
    MV.write d i v

main = do
    -- Create two vectors
    v1 <- MV.replicate 10 1
    v2 <- MV.new 10
    -- Map v1 into v2 using function mapper defined below
    imapInto mapper v2 v1
    -- Print the source and the result
    uv1 <- U.unsafeFreeze v1
    uv2 <- U.unsafeFreeze v2
    print $ U.toList uv1   -- [1,1,1,1,1,1,1,1,1,1]
    print $ U.toList uv2   -- [0,1,2,3,4,5,6,7,8,9]

    where
        -- Mapper reads a value from the vector and multiplies it by its index
        mapper v i = fmap (*i) $ MV.read v i 
```

由于您是初学者，因此我尝试尽可能简单，请询问是否有不清楚的地方。

如您所见，我利用了 Louis 的评论并使用`forM_`函数来使更`imapInto`简单（交换了参数）。它现在看起来就像来自命令式语言的普通循环。同样正如我所说，我将映射函数类型从 更改为。这是必需的，因为您无法在其 monad 之外对可变向量（在此处作为第一个参数传递）做太多事情。但是在 monad 内部我们可以用它做任何事情，这里我们只是读取-th 元素并将其乘以.`forM_``mapM_``for``(MVector (PrimState m) a -> Int -> a)``(MVector (PrimState m) a -> Int -> m a)``i``i`

请注意，在此版本的函数中，您可以从映射函数内部对源向量执行任何操作。如果你不需要这个并且你只使用`i`-th 元素`i`，你可以进一步简化它：

```
imapInto' :: (PrimMonad m, MV.Unbox a, MV.Unbox b) 
         => (a -> Int -> b)
         -> MV.MVector (PrimState m) b
         -> MV.MVector (PrimState m) a
         -> m ()
imapInto' f d s = forM_ [0..MV.length s - 1] $ \i -> do
    v <- MV.read s i
    MV.write d i (f v i) 
```

这里的映射函数是纯的，仅将`i`-th 元素作为第一个参数，而不是向量本身。我也推广了这个版本，所以它可以将第一个向量映射到另一个类型的向量，所以源向量和目标向量不需要是相同的类型。这也是以前版本可以做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:56:32.820

对于您的示例，您根本不需要可变向量，您可以使用`map`或`generate`沿以下未经测试的代码行：

```
import Data.Vector.Unboxed as V
import Data.Vector.Unboxed.Mutable as M

double :: V.Vector Int -> V.Vector Int
double = V.map (*2) 
```

如果你想使用索引：

```
addIndex = V.imap (\element idx -> element + idx) 
```

在构造一个不可变向量后，您可以使用`unsafeThaw`（假设您知道没有其他对该向量的引用）来获得`MVector`O(1) 中的值。所以你最终的“imapInto”可能看起来像：

```
imapInto :: some constraints => (V.Vector a -> Int -> b) -> V.Vector a -> M.Vector b
imapInto op v = V.unsafeThaw (V.imap op v) 
```

如果您真的希望在调用之前`imapInto`而不是在调用期间分配结果向量，请参阅 Vladimir 的回答。

# java - 在 web.xml 中，resource-ref 标记的含义是什么？

> ID：11546800
> 
> 赞同：1
> 
> 时间：2012-07-18T17:14:12.923
> 
> 标签：java, database, tomcat, jdbc, datasource

> **可能重复：**
> [web.xml 中的资源引用是做什么用的？](https://stackoverflow.com/questions/2887967/what-is-resource-ref-in-web-xml-used-for)

`context.xml`我在Tomcat中添加了以下标签：

```
 <Resource name="jdbc/PollDatasource" auth="Container" type="javax.sql.DataSource"
    driverClassName="org.apache.derby.jdbc.ClientDriver" url="jdbc:derby://localhost:1527/poll_database;create=true"
    username="suhail" password="suhail" maxActive="20" maxIdle="10" maxWait="-1" /> 
```

当服务器启动并部署应用程序时，会读取上面的标签。我还在`web.xml`我的项目中添加了以下内容：

```
 <resource-ref>
  <description>my connection</description>
  <res-ref-name>jdbc/PollDatasource</res-ref-name>
  <res-type>javax.sql.DataSource</res-type>
  <res-auth>Container</res-auth>
 </resource-ref> 
```

上面的标签是什么意思？

因为当我写这样的声明时：

```
DataSource ds = (DataSource)envContext.lookup("jdbc/PollDatasource") 
```

它不是直接查看`context.xml`服务器的吗？我知道我错了。在这种情况下，请帮助我理解`resource-ref`标签的含义是`web.xml`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:34:13.600

您必须使用以下代码查找

```
DataSource ds = (DataSource)envContext.lookup("java:comp/env/jdbc/PollDatasource"); 
```

在您的 Web 应用程序中，

JNDI 上下文在应用程序内部和应用程序外部是不同的，在本例中是在您定义资源的 context.xml 内部。

在 resouce-ref 部分定义的所有资源都映射到应用程序的 Env 上下文。因此，应用程序可以访问这些资源。应用程序上下文和容器上下文之间的交叉引用是在部署时完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T18:07:34.383

我相信它的意思是您的 Web 应用程序期望能够访问具有特定名称和其他属性的 JNDI 资源的“提示”或实时文档。context.xml 文件是 Tomcat 工件，虽然许多应用服务器都嵌入了 Tomcat 引擎，但它远非通用。

# opencv - 如果您使用非正方形 (=non-NxN) 网格并 findChessboardCorners()

> ID：11546801
> 
> 赞同：3
> 
> 时间：2012-07-18T17:14:19.860
> 
> 标签：opencv, calibration

我在 OpenCV 论坛上发布了这个，但到目前为止还没有回复，所以在这里尝试。

2.4.0 参考手册的第 352 页有这个注释：

> 注意：如果您使用非正方形 (=non-NxN) 网格并 findChessboardCorners() 进行校准，并且 calibrateCamera 返回错误值（零失真系数，图像中心非常远离（w/2-0.5,h/2- 0.5)，和/或 fx 和 fy 之间的巨大差异（10:1 或更大的比率）），那么您可能使用 patternSize=cvSize(rows,cols) 而不是使用 patternSize=cvSize(cols,rows) infindChessboardCorners() 。

这让我很困惑。是什么定义了棋盘上的行与列？毕竟，棋盘在收集数据集以供 calibrateCamera 使用的同时旋转和移动。

什么是很远？我有一个非方形棋盘，1292x964，1/3 格式，4 毫米非球面镜片；在全宽时，我得到：cx =639 和 cy=550。理想情况下，应该是 1292/2 = 646 和 964/2= 457；

我为 cy 获得的 550 与预期的 457 是“大差异”吗？

我应该在 patternSize 中交换宽度/高度吗？如果是这样，这是否意味着我应该在校准期间限制棋盘的旋转，以保持棋盘行与列相对于相机成像器的概念？

谢谢，戴夫托马斯

# events - Win 8 Metro 模式：WaitForSingleObjectEx 失败

> ID：11546805
> 
> 赞同：3
> 
> 时间：2012-07-18T17:14:45.783
> 
> 标签：events, windows-runtime, sleep, getlasterror, waitforsingleobject

我正在尝试在这样的地铁模式下实现类似睡眠（毫秒）的行为

```
void win8_metro_mode_sleep(unsigned long long ms)
{
    HANDLE hEvent;
    DWORD ret;
    DWORD err;
    DWORD msec = ms;
    print_on_text_box("\nMSEC: ");
    print_on_text_box(((DWORD)ms).ToString());
    hEvent =CreateEventEx(NULL,L"sleep_event",NULL,EVENT_MODIFY_STATE);
     /*OpenEvent(NULL, TRUE, L"sleep_event");
    if(hEvent == NULL){
        print_on_text_box(">>>OpenEvent failed<<<\n");
    }*/
    /*if(ResetEvent(hEvent) == 0){
        print_on_text_box(">>>ResetEvent failed!<<<\n");
    }*/
    ret = WaitForSingleObjectEx(hEvent, msec, true);
    if(ret == WAIT_TIMEOUT) {
        print_on_text_box("Sleep Success!\n");
    }
    else if(ret == WAIT_OBJECT_0){
        print_on_text_box("WaitForSingleObjectEx, failed ...Err: The state of the specified object is signaled.\n");
    }
    else if(ret == WAIT_IO_COMPLETION){
        print_on_text_box("WaitForSingleObjectEx, failed ...Err: WAIT_IO_COMPLETION.\n");
    }
    else if(ret == WAIT_FAILED){
        print_on_text_box(" WaitForSingleObjectEx, failed ...Err: WAIT_FAILED: -->> ");
        err = GetLastError();
        //FormatMessage(
        //  FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        //  FORMAT_MESSAGE_FROM_SYSTEM |
        //  FORMAT_MESSAGE_IGNORE_INSERTS,
        //  NULL,
        //  err,
        //  MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
        //  (LPTSTR) &lpMsgBuf,
        //  0, NULL );
        textbox_test_result->Text = textbox_test_result->Text + err.ToString() +" <<< \n";
    }
    CloseHandle(hEvent);
} 
```

它打印：WaitForSingleObjectEx, failed ...Err: `WAIT_FAILED`: -->> 0 Windows 文档说`GetLastError`也支持 Metro 模式，但系统错误代码说只有桌面模式……这很奇怪！和 0 表示`Success`但它没有！任何人都可以帮助我至少`GetLastError`..我知道这是简单的实现，我也为桌面模式做了类似的事情..想知道有什么问题！

***>>>>>>>>> 编辑 <<<<<<<<***

不确定 GetLastError，但只需实现一种`Sleep`, 与

```
WaitForSingleObjectEx(GetCurrentThread(), ms, FALSE); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T12:38:12.963

您可以使用在 WinStore 应用程序中工作的C++ *sleep_for*

```
#include <thread>
#include <chrono>

std::this_thread::sleep_for(std::chrono::milliseconds(1000)); 
```

# java - SWT/AWT 的图形可视化库

> ID：11546807
> 
> 赞同：3
> 
> 时间：2012-07-18T17:14:55.083
> 
> 标签：java, swing, swt, awt, graph-visualization

是否有针对 SWT 或 AWT 的成熟、可靠的开源图形可视化库实现（我指的是与边连接的顶点集，而不是图表和图表）？

您使用/推荐哪一个？

我看到了[Zest](http://www.eclipse.org/gef/zest/) for SWT，但找不到它的 Maven 存储库。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T17:56:05.467

看看 JUNG ( [http://jung.sourceforge.net/](http://jung.sourceforge.net/) )

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T19:23:17.387

我推荐 Prefuse： [http ://prefuse.org/](http://prefuse.org/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T17:53:22.317

如果您不想使用`Zest`（我更喜欢），仍然有`Draw2D`：

[二维绘图](http://www.eclipse.org/gef/draw2d/index.php)

此外，这里有一个很好的教程：

[使用 Draw2D 显示 UML 图](http://www.eclipse.org/articles/Article-GEF-Draw2d/GEF-Draw2d.html)

最后，我找到了这个 Maven 存储库：

[存储库](http://unicore-dev.zam.kfa-juelich.de/maven/org/eclipse/draw2d/)

对Maven不太了解，但这不是一个存储库`Zest`吗？：

[热情](http://www.jarvana.com/jarvana/browse/org/eclipse/zest/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-18T19:32:05.977

查看[Piccolo2D](http://code.google.com/p/piccolo2d/)，它支持 2D 结构化图形和 ZUI。[这](http://www.piccolo2d.org/learn/grapheditor.html)是一个图形构建器的简单演示。此外，[这里](http://www.piccolo2d.org/applications/index.html#piccolo2d_java)还有一些基于 Piccolo2D 的 Java 应用程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-18T17:57:30.080

对于热情核心：

```
<groupId>org.eclipse.zest</groupId>
 <artifactId>core</artifactId> 
```

对于热情布局：

```
<groupId>org.eclipse.zest</groupId>
<artifactId>layouts</artifactId> 
```

对于JUNG2

```
<dependency>
 <groupId>net.sf.jung</groupId>
 <artifactId>jung2</artifactId>
 <version>2.0.1</version>
</dependency> 
```

# qt - Q_PROPERTY 未显示

> ID：11546809
> 
> 赞同：4
> 
> 时间：2012-07-18T17:15:13.613
> 
> 标签：qt, qt4, qml, qtdeclarative

我将 Q_PROPERTY 与 QML 一起使用。我的代码是：

```
using namespace std;

typedef QString lyricsDownloaderString; // this may be either std::string or QString

class lyricsDownloader : public QObject
{
    Q_OBJECT
public:
    Q_PROPERTY(QString lyrics READ lyrics NOTIFY lyricsChanged)
    Q_INVOKABLE virtual short perform() = 0;
    inline void setData(const string & a, const string & t); // set artist and track
    Q_INVOKABLE inline void setData(const QString & a, const QString & t); // for QStrings
    Q_INVOKABLE inline bool anyFieldEmpty(); // check whether everything is filled
    inline QString lyrics()
    {
        return lyrics_qstr;
    }

 /*some more data*/
signals:
    void lyricsChanged(QString);
};

class AZLyricsDownloader : public lyricsDownloader
{
    Q_OBJECT
public:
    AZLyricsDownloader() : lyricsDownloader("", "") {}
    AZLyricsDownloader(const string & a, const string & t) : lyricsDownloader(a, t) {}
    Q_INVOKABLE short perform();
    //Q_INVOKABLE inline void setData(const string & a, const string & t);// set artist and track

protected:
    /*some more data*/
}; 
```

QML 中的页面之一是

```
import QtQuick 1.1
import com.nokia.meego 1.0
import com.nokia.extras 1.0

Page
{
    id: showLyricsPage
    tools: showLyricsToolbar

    Column
    {
        TextEdit
        {
            id: lyricsview
            anchors.margins: 10
            readOnly: true
            text: azdownloader.lyrics
        }
    }

    Component.onCompleted:
    {
        azdownloader.perform()
        busyind.visible = false
    }

    BusyIndicator
    {id: busyind /**/ }

    ToolBarLayout
    {id: showLyricsToolbar/**/}

    // Info about disabling/enabling edit mode

    InfoBanner {id: editModeChangedBanner /**/}
} 
```

azdownloader 是一个 AZLyricsDownloader 对象

代码在 C++ 中正确运行，该函数返回应该在 TextEdit 中的文本。

但不幸的是，TextEdit 是空白的。那里没有显示任何文字。信号没有主体，但 AFAIK 信号不需要它。

如果我使用

```
Q_PROPERTY(QString lyrics READ lyrics CONSTANT) 
```

结果是一样的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T00:33:43.240

当您`lyrics`在 C++ 代码中更改属性的值时，您必须发送`NOTIFY`属性的信号（此处`void lyricsChanged();`）：

```
this->setProperty("lyrics", myNewValue);
emit lyricsChanged(); 
```

在这种情况下，QML 应该更新属性的值。

# c++ - 在 C++ 中，如何计算所有可能的 Bezier 句柄点以使曲线达到给定长度？

> ID：11546814
> 
> 赞同：0
> 
> 时间：2012-07-18T17:15:27.520
> 
> 标签：c++, bezier

在 C++ 中，给定 Quad Bezier 曲线的两个锚点和一个手柄点，如何计算另一个手柄点以使曲线长度为固定值？

会是怎样的轨道？

我正在做一个CAD软件。在附近移动时，我需要使光标“捕捉”到可能的点。所以我需要计算轨道，而不是简单地检查长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:39:46.603

二次贝塞尔曲线 P1P2P3 的长度以折线 P1P2P3 的长度为界，即

```
||P3 - P2|| + ||P2 - P1|| = const 
```

由于 P1 和 P3 是固定的，因此，P2 位于椭圆上，P1 和 P3 是它的[焦点](http://en.wikipedia.org/wiki/Ellipse#Elements_of_an_ellipse)。

# php - 基本 json_encode 和 jquery 多个值

> ID：11546817
> 
> 赞同：0
> 
> 时间：2012-07-18T17:15:37.957
> 
> 标签：php, jquery, json

这是我的第三个 jquery 脚本，我不确定我在做什么。

我想从 3 个不同的查询中读取多个 json 值。我的 JSON 正在返回我所期望的：

```
key
 1    ["value1"]
 2    ["value2"]
max   2101
total 22 
```

我可以使用如下方式读取前两个值：

```
 ajax(                                      
   url: 'api.php, data: "", dataType: 'json',  success: function(rows)        
    { 
      for (var i in rows)
      {
        var row = rows[i];
        value1 = row[0];
      } 
```

如何从 JSON 中读取最大值？我试过这样的事情：

```
 $row[max], $row['max'], etc. 
```

我正在用 JavaScript 读取值

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:18:20.603

`row.max`可能是你正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:26:25.283

尝试在成功处理程序中使用 javascript 的[eval](http://www.w3schools.com/json/json_eval.asp)函数。它将您返回的 json 文本转换为您可以操作的 javascript 对象。就像是：

```
success: function(data) {
         var returned_array = eval(data);

         //access values as if it were a regular javascript object
         alert(returned_array['max']);
         //OR
         alert(returned_array.max);
       } 
```

# sql-server - DataSet QueryTableAdapter 无法返回表格数据

> ID：11546818
> 
> 赞同：1
> 
> 时间：2012-07-18T17:15:46.890
> 
> 标签：sql-server, visual-studio

所以这更像是一个好奇的问题（我有一个足够简单的解决方法），但我想知道为什么我不能在将返回表格数据的数据集中向 QuerytableAdapter 添加查询。

它允许我使用返回单个值或根本不返回值的查询，但返回表格数据的选项始终显示为灰色。

现在，我的工作很简单，我只是使用 tableAdapter，瞧！它工作得很好。

我正在使用 Studio 2008 和 SQL Server 2008 r2

谢谢

编辑：

我应该声明存储过程也是如此。

我的猜测是因为 tableadapter 创建了一个数据表来与适配器一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-08T05:44:00.860

老实说，我真的希望你不会在七年后为此苦苦挣扎，但答案是在设计器中添加 a`TableAdapter`而不是 a `Query`。它仍然会为您提供运行存储过程的选项，但会在表中返回您的数据。

# ios - Monotouch 中的 MapBox 或 Route-Me

> ID：11546825
> 
> 赞同：1
> 
> 时间：2012-07-18T17:16:16.783
> 
> 标签：ios, xamarin.ios, route-me, mapbox

MapBox SDK 或 Route-Me 项目端口是否有单点触控绑定到单点触控？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:13:51.200

我在 monotouch-bindings 项目（[https://github.com/mono/monotouch-bindings](https://github.com/mono/monotouch-bindings)）中没有看到这些框架的任何绑定。

但是，您始终可以尝试按照这些 Xamarin 文档自己创建绑定：http: [//docs.xamarin.com/ios/advanced_topics/binding_objective-c_types](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types)

希望这可以帮助！

# solr - django-haystack 和 solr 设置问题（未定义字段文本错误）

> ID：11546829
> 
> 赞同：0
> 
> 时间：2012-07-18T17:16:32.180
> 
> 标签：solr, django-haystack

我是 Solr 的新手。我一直在关注[http://haystacksearch.org/](http://haystacksearch.org/)站点中提供的文档。我的项目在 django 1.4 上。

我遵循的步骤：

1.添加干草堆到已安装的应用程序。

2.修改settings.py

```
HAYSTACK_SITECONF = 'directory.search_sites'
HAYSTACK_SEARCH_ENGINE = 'solr'
HAYSTACK_SOLR_URL = 'http://127.0.0.1:8983/solr'
HAYSTACK_CONNECTIONS = {
    'default': {
        'ENGINE': 'haystack.backends.solr_backend.SolrEngine',
        'URL': 'http://127.0.0.1:8983/solr'
        # ...or for multicore...
        # 'URL': 'http://127.0.0.1:8983/solr/mysite',
        },
} 
```

3.我的search_indexes.py文件

```
from haystack import indexes
from app.models import SellerItem

class SellerItemIndex(indexes.SearchIndex):
    text = indexes.CharField(document=True, use_template=True)
    title = indexes.CharField(model_attr='title')
    sub_title = indexes.CharField(model_attr='sub_title')
    description = indexes.CharField(model_attr='description')

    def get_model(self):
        return SellerItem

    def index_queryset(self):
        """Used when the entire index for model is updated."""
        return self.get_model().objects.filter(pk__gt=0) 
```

4.增加了search_sites.py

```
import haystack
haystack.autodiscover() 
```

5.添加模板/搜索/索引/selleritem.txt

```
{{ object.title }}
{{ object.sub_title }}
{{ object.description }} 
```

6.将此添加到urls.py：

```
(r'^search/', include('haystack.urls')), 
```

7.创建搜索模板

8.用生成的xml替换apache-solr-3.6.0/example/solr/conf中的schema.xml，使用命令：

```
python manage.py build_solr_schema 
```

启动 solr 服务器时出现这样的错误：

```
SEVERE: org.apache.solr.common.SolrException: undefined field text
at org.apache.solr.schema.IndexSchema.getDynamicFieldType(IndexSchema.java:1330)
at org.apache.solr.schema.IndexSchema$SolrQueryAnalyzer.getAnalyzer(IndexSchema.java:408)
at org.apache.solr.schema.IndexSchema$SolrIndexAnalyzer.reusableTokenStream(IndexSchema.java:383)
at org.apache.lucene.queryParser.QueryParser.getFieldQuery(QueryParser.java:574)
at org.apache.solr.search.SolrQueryParser.getFieldQuery(SolrQueryParser.java:206)
at org.apache.lucene.queryParser.QueryParser.Term(QueryParser.java:1429)
at org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:1317)
at org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:1245)
at org.apache.lucene.queryParser.QueryParser.TopLevelQuery(QueryParser.java:1234)
at org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:206)
at org.apache.solr.search.LuceneQParser.parse(LuceneQParserPlugin.java:79)
at org.apache.solr.search.QParser.getQuery(QParser.java:143)
at org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:105)
at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:165)
at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
at org.apache.solr.core.QuerySenderListener.newSearcher(QuerySenderListener.java:59)
at org.apache.solr.core.SolrCore$3.call(SolrCore.java:1182)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:679) 
```

服务器仍然会启动当我做 ./manage.py rebuild_index 并进行搜索时，我得到一个错误日志

```
Problem accessing /solr/select/. Reason:undefined field text 
```

我错过了什么？以前有人遇到过同样的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:44:24.380

我认为您的问题源于错误命名的模板。你用`search/indexes/selleritem.txt`，但它应该是`search/indexes/app/selleritem_text.txt`。

作为旁注，我看到您正在混合使用 Haystack 1.X 和 2.X 设置和方法。由于您的搜索索引类中缺少`indexes.Indexable`mixin `SellerItemIndex`，看来您实际上必须使用 1.X。如果您坚持使用您正在使用的版本的文档，您的生活会更简单。

*   [1.2.7 文档](http://django-haystack.readthedocs.org/en/v1.2.7/)
*   [2.0.0-beta 文档](http://django-haystack.readthedocs.org/en/latest/)

希望有帮助，

本

# javascript - 在对话框中使用 jQuery 验证重置表单

> ID：11546830
> 
> 赞同：0
> 
> 时间：2012-07-18T17:16:43.090
> 
> 标签：javascript, jquery, dialog

我在 jQuery 对话框中的表单中使用 jQuery Validate。当用户关闭对话框时，我希望清除所有表单字段并重置显示错误反馈的字段。

它正确地将字段重置为空白，但错误反馈没有被正确清除。

这是我的对话代码。

```
// Attach dialog
$("#myDialog").dialog({
    autoOpen: false,
    modal: true,
    close: function(){
        $('#myDialog')[0].reset(); // This works in resetting the actual form values
        $("#myDialog").validate().resetForm(); // Not working :(
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:17:13.723

是表格 id`myDialog`吗？

如果是这样，我会将结构更改为：

```
<div id="myDialog>
   <form id="myForm">
   //inputs, etc...
   </form>
</div> 
```

那么您的对话调用将如下所示：

```
$("#myDialog").dialog({
    autoOpen: false,
    modal: true,
    close: function(){
        //$('#myForm')[0].reset(); // This works in resetting the actual form values
        $("#myForm").validate().resetForm(); // Not working :(
    }
}); 
```

我认为你遇到了让 jQuery UI 作用于 #myDialog 以及它是你试图验证的表单的冲突。

另一种选择是在关闭时销毁对话框，并始终在打开时重新创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T13:55:47.517

如果它们仍未清除，则更改为接近 beforeClose 有效，因此在关闭对话框并在 DOM 上移动之前清除它们。

# php - 使用 Joomla 2.5 登录脚本

> ID：11546833
> 
> 赞同：1
> 
> 时间：2012-07-18T17:16:50.720
> 
> 标签：php, ajax, joomla, joomla2.5

所以我试图通过 AJAX 调用将用户登录到 Joomla。是否已经编写了一个登录脚本，我可以只传递用户名和密码变量？几乎我只是想使用下面的脚本，只想找到正确的 url 来使用。这可能吗？

```
$('body').delegate('#login', 'click', function(e){
    e.preventDefault();
    $username = $('#username').val();
    $password = $('#password').val();
    $.ajax({
        type: 'post',
        url: 'ineedthisurl.php',
        data: {username: $username, password: $password},
        success: function(responseData){
            window.location = $url;
        },
        error: function(responseData){
            console.log('login script error');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:10:21.397

在以下位置找到相关脚本：

```
/components/com_users/controllers/users.php 
```

花了一点时间玩，但我得到了它的工作。

# c++ - QGLWidget paintEvent：在哪里初始化openGL？

> ID：11546834
> 
> 赞同：1
> 
> 时间：2012-07-18T17:16:57.940
> 
> 标签：c++, qt, opengl, graphics, qglwidget

似乎QGLWidget的paintEvent方法是在initializeGL之前调用的，那么我应该把我的openGL初始化代码放在哪里呢？

我将它放入这样的paintEvent方法中：

```
void MyGLWidget::paintEvent(...)
{
   makeCurrent();
   ..save modelview and projection matrices..

   // This is initialization code

   GLenum init = glewInit();
    if (GLEW_OK != init)
    {
      /* Problem: glewInit failed, something is seriously wrong. */
      qWarning() << glewGetErrorString(init);
    }

    // Dark blue background
    glClearColor(0.2f, 0.0f, 0.5f, 0.0f);
    // Enable depth test
    glEnable(GL_DEPTH_TEST);

   // End initialization code

   ... drawing code

   QPainter painter(this);
   ...overpainting..

} 
```

我真的不喜欢每次引发 paintEvent 时都调用我的 glew 库初始化函数的想法......虽然这很有效。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:04:23.990

You have to initialize OpenGL in initializeGL(), there is no other option.

But you also have to draw inside [paintGL](http://doc.qt.io/archives/qt-4.7/qglwidget.html#paintGL), not inside paintEvent, so that is where your mistake is.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:24:16.190

覆盖 QGLWidget 的 initializeGL() 函数。它是为您想要的目的而创建的

从它的文档：

> 这个虚函数在第一次调用paintGL() 或resizeGL() 之前被调用一次，然后每当widget 被分配一个新的QGLContext 时调用一次。在子类中重新实现它。

文档链接： http: [//doc.qt.io/archives/qt-4.7/qglwidget.html#initializeGL](http://doc.qt.io/archives/qt-4.7/qglwidget.html#initializeGL)

# python - 匹配失败时 StringEnd() 引发异常 - PyParsing

> ID：11546836
> 
> 赞同：1
> 
> 时间：2012-07-18T17:16:58.347
> 
> 标签：python, pyparsing

以下打印“通过”：

```
pattern = Word(alphanums) + StringEnd()
str=" bar "
results = pattern.parseString(str)
if 1 == len(results) && "bar" == results[0] :
    print("pass")
else:
    print("fail") 
```

但这会抛出异常（当 'bar' 中`parseImpl`的`class StringEnd`'r' 后面的字符不是字符串结尾时）：

```
pattern = Word(alphanums) + StringEnd()
str=" bar foo "
results = pattern.parseString(str)  # <-- exception raised 
```

就像这样：

```
pattern = Word(alphanums)
str = " bar foo"
results = pattern.parseString(str,parseAll=True) 
```

我希望第二/第三个 parseString 调用只返回一个空数组，因为它显然不能满足语法。

谁能帮我理解为什么？

（应该很明显，但要运行你需要'from pyparsing import *'；我也在python3.2和pyparsing 1.5.6上）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:36:49.087

当你调用`parseString`一个语法时，你是在告诉它“使用这个语法解析这个字符串，从头开始”。它必须匹配某些东西，否则会引发异常。当您使用`parseAll=True`. 您是在说“将整个字符串与此语法匹配”。如果不完全匹配，则为错误。 `parseString`不是“可选”类型的匹配，如果您尝试匹配错误的语法，它只会默默地失败。如果某些东西“显然不符合语法”，那正是它应该引发错误的时候。

您可能想尝试一下`searchString`。这将只查找字符串中的所有匹配项，无论它们在哪里：

```
>>> pattern = pyp.Word(pyp.alphanums)
>>> pattern.searchString(" bar foo ")
([([u'bar'], {}), ([u'foo'], {})], {}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:23:30.013

在失败的匹配上返回一个空列表是模棱两可的 - 语法匹配并且只返回一个空匹配，还是根本不匹配？

```
>>> from pyparsing import *
>>> integer = Word(nums)
>>> expr = Suppress("data:") + ZeroOrMore(integer) + StringEnd() 
```

解析一些数据：

```
>>> expr.parseString("data: 1 2 3").asList()
['1', '2', '3'] 
```

成功解析，这里没有任何数字：

```
>>> expr.parseString("data:").asList()
[] 
```

异常告诉你这个匹配失败：

```
>>> expr.parseString("data: 4 Z 6 7").asList()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "c:\python26\lib\site-packages\pyparsing-1.5.6-py2.6.egg\pyparsing.py", line 1032, in parseString
    raise exc
pyparsing.ParseException: Expected end of text (at char 12), (line:1, col:13) 
```

# c# - 为什么复制到 USB 时文件修改时间会自动增加 2 秒？

> ID：11546839
> 
> 赞同：3
> 
> 时间：2012-07-18T17:17:03.230
> 
> 标签：c#, windows, file, file-io

好的，我有一个奇怪的时刻试图获取 USB 驱动器中文档的文件修改时间。*通常，我认为将文件复制到 USB 驱动器时，文件修改时间不会改变*。但是，当我将任何文件复制到 USB 驱动器时，我发现文件修改时间增加了两倍。

然而，在研究中，我发现其他人在网上遇到了这个问题，但我还没有看到任何答案，除了[维基百科上的这篇文章，](http://en.wikipedia.org/wiki/File_Allocation_Table)它说一些关于 FAT 分区上碎片文件增加的读写时间并且没有为我澄清事情.

我无法验证是否所有文件都会发生这种情况。但是，**我想知道的是当文件被复制到 USB 驱动器时修改时间到底发生了什么的任何官方来源**。是否建议我自己修改代码中的文件修改时间？*即减去两秒*。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T17:57:01.513

[从 NTFS 复制到 FAT 时时间戳更改](http://support.microsoft.com/kb/127830)：

> 将文件写入驱动器时，FAT 驱动器上的文件时间戳会四舍五入到最接近的两秒（偶数）。将文件写入驱动器时，NTFS 驱动器上的文件时间戳会四舍五入到最接近的 100 纳秒。因此，FAT 驱动器上的文件时间戳总是以偶数秒结束，而 NTFS 驱动器上的文件时间戳可以以偶数或奇数秒结束。
> 
> 当文件从 NTFS 驱动器复制到 FAT 驱动器时，必须进行一些文件时间戳舍入；文件时间戳向上舍入到下一个偶数秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T17:34:35.417

这不太可能与 USB 有关，但很可能与 FAT 文件系统有关（其最后修改时间戳的粒度为 2 秒）。

您是否确认它实际上将此时间戳增加了 2 秒，或者您是否在文件创建后非常快速地复制到外部驱动器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:11:07.993

我不知道这是否是一个通用的解决方案，但我解决了我的问题如下：

1.  首先，我会获取并存储最后修改的时间，并检查它是否以奇数结尾。如果是，我将其更改为偶数，即*在 NTFS 磁盘上将其加一*。

2.  我将它复制到 USB 驱动器并将最后修改时间设置为上面得到的日期时间（这是偶数）。

# spring-roo - Spring Roo 无法创建单元测试

> ID：11546841
> 
> 赞同：0
> 
> 时间：2012-07-18T17:17:08.363
> 
> 标签：spring-roo

我有一个工作区，其中有一个主项目，其中包含父 pom.xml 文件，然后是共享该父 pom 的 38 个其他项目。

在我的一个子项目中，我试图在我创建的 spring 服务类上创建单元测试，但它不起作用。当我做

```
test integration --entity foo.bar 
```

我明白了

```
Command 'test integration --entity foo.bar' was found but is not currently available (type 'help' then ENTER to learn about this command) 
```

与典型的 Microsoft 错误消息相比，这给我的信息略少。为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:40:23.573

这意味着项目中缺少“测试集成”所依赖的东西。

我在尝试运行“entity mongo”时遇到了同样的问题......基本上，我已经从 pom.xml 中删除了 roo 支持数据库持久性所需的依赖项。所以为了修复我的问题，我再次运行“mongo setup”，查看它添加到我的项目中的内容，并且我能够再次运行实体和存储库命令。

我的猜测是，如果您经历相同的过程（可能使用 jpa 而不是 mongo，具体取决于您使用的内容），您将看到缺少的内容，并能够再次运行“测试集成”命令。

在我的例子中，我已经删除了对 hibernate-validation 和 cloudfoundry 的依赖，因为我没有使用它们中的任何一个，但是当我把它们放回去时，我能够再次运行 roo 持久性命令。

# android - 过滤意图/意图的发送者，android

> ID：11546844
> 
> 赞同：0
> 
> 时间：2012-07-18T17:17:18.710
> 
> 标签：android, android-intent, intentfilter

我如何知道 Intent 的发送者？

这是我的意图过滤器。

```
<intent-filter>
      <category android:name="android.intent.category.DEFAULT"/>
      <action android:name="android.intent.action.SEND" />
      <data android:mimeType="text/plain" />
</intent-filter> 
```

因此，现在如果我单击 Dropbox 中的某个项目并单击“共享”，我的活动将出现在列表中。但是，我希望我的应用只出现在 Dropbox 共享列表中，而不出现在其他应用中。

我想这里的问题是，是否有任何其他过滤器可以添加到仅用于 Dropbox 的过滤器中？或者，目前 Dropbox 意图中是否有任何独特之处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:24:22.220

> 但是，我希望我的应用只出现在 Dropbox 共享列表中，而不出现在其他应用中。

这是不支持的。欢迎您使用他们的 API 编写自己的 DropBox 客户端，并将您的特定功能作为该应用程序的一部分。

> 我想这里的问题是，是否有任何其他过滤器可以添加到仅用于 Dropbox 的过滤器中？

我对此表示怀疑。DropBox 很可能只是`ACTION_SEND`与正确的 MIME 类型一起使用，因为这对 DropBox 和 DropBox 的用户来说是最好的。

> 或者，目前 Dropbox 意图中是否有任何独特之处？

你必须问 DropBox 这个问题。请记住，随着时间的推移，他们可能会改变这一点。而且，即使有某些东西，很可能您也无法对其进行过滤，因此您仍会出现在其他应用程序的选择器中。

# ffmpeg - ffmpeg 无法转码并将输出提供给 -f mp4 的流

> ID：11546845
> 
> 赞同：0
> 
> 时间：2012-07-18T17:17:19.763
> 
> 标签：ffmpeg, mp4, http-live-streaming

我一直在使用 ffmpeg 进行转码。最近我有一个要求，即 ffmpeg 输出不需要到文件而是到 stdout ，稍后将被捕获然后发送回callingurl。我在 flv 和 avi 上取得了一些初步成功，但是在使用 -f 标志时在 mp4 上失败了。这是我的代码，需要认真研究一下

这适用于播放器：

```
ffmpeg -loglevel quiet -i cat_dog.mp4 -vbsf h264_mp4toannexb -vcodec copy \
-acodec copy -f mpegts -movflags frag_keyframe+empty_moov -re - 2>&1 
```

这不能由玩家播放：

```
ffmpeg -loglevel quiet -i cat_dog.mp4 -vbsf h264_mp4toannexb -vcodec copy \
-acodec copy -f MP4 -movflags frag_keyframe+empty_moov -re - 2>&1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:18:56.343

如[文档中](http://ffmpeg.org/ffmpeg.html#MOV_002fMP4_002fISMV)所述，使用的缺点`-movflags`是“与其他应用程序的兼容性较差”。

对于 flv 或 avi 格式，该`-movflags`选项将是无关的并被忽略，但对于 mp4，它将生效并可能破坏兼容性。

# php - 当没有可用数据时，填写 MySQL 记录集输出中的最后一个已知值

> ID：11546848
> 
> 赞同：0
> 
> 时间：2012-07-18T17:17:28.520
> 
> 标签：php, mysql

考虑以下三个表：

```
daterange     stocks                               companies
-----------   ----------------------------------   ----------------
_date         stock_id  nyse_date   open   close   stock_id  name
-----------   ----------------------------------   ----------------
2011-03-11    1         2011-03-11  40.50  40.60   1         Alcoa
2011-03-12    1         2011-03-14  40.62  41.04   2         Apple
2011-03-13    1         2011-03-15  41.00  41.20   .           .
2011-03-14    1         2011-03-16  41.15  42.00   .           .
2011-03-15    1         2011-03-18  41.50  41.80   100       Xerox
2011-03-16
2011-03-17
2011-03-18 
```

`daterange`包含 2011 年 3 月 11 日至 9 月 1 日之间的一组连续日期。在同一时期，`stocks`包含 100 只股票的价格`open`和`close`定价信息。股票/公司在`companies`.

在周末`2011-03-12`和`2011-03-13`节假日期间（例如`2011-03-17`），没有可用的定价信息。

我需要的是一个包含*每个日期*`open`的列表和`close`定价信息。每当有一个in中没有定价信息时，必须填写最后一个已知的定价信息。*`daterange`*`_date``daterange``stocks`

因此，对于 Alcoa ( `stock_id 1`)，在给定`daterange`日期的情况下，输出必须是（* = 取自最后一个已知值）：

```
stock_id _date       open   close 
---------------------------------
1        2011-03-11  40.50  40.60
1        2011-03-12  40.50  40.60 *
1        2011-03-13  40.50  40.60 *
1        2011-03-14  40.62  41.04
1        2011-03-15  41.00  41.20
1        2011-03-16  41.15  42.00
1        2011-03-17  41.15  42.00 *
1        2011-03-18  41.50  41.80 
```

...实际上紧随其后的是截至 9 月 1 日的所有日期，然后继续`stock_id`2（示例`open`中`close`未给出）

```
2        2011-03-11  10.11  10.15
2        2011-03-12  10.11  10.15 * 
2        2011-03-13  10.11  10.15 *
2        2011-03-14  10.20  10.24
.        .
.        . 
```

这可以在MySQL中做到吗？或者，我可以使用 PHP 从 下载日期`daterange`并循环`stocks`，只要没有特定日期的条目就填写。但我猜 MySQL 会快很多。

任何帮助表示赞赏:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:48:33.277

我试过了，它似乎得到了你需要的东西。

```
SELECT DISTINCT 1 AS Stock_id, D._date, 
       (SELECT S2.Open From Stocks S2
        WHERE S2.Stock_id=1
          AND S2.nyse_date < DATE_ADD(D._date, INTERVAL 1 DAY) 
        ORDER BY S2.nyse_date DESC
        LIMIT 1) AS open,
       (SELECT S3.Close From Stocks S3
        WHERE S3.Stock_id=1
          AND S3.nyse_date < DATE_ADD(D._date, INTERVAL 1 DAY) 
        ORDER BY S3.nyse_date DESC
        LIMIT 1) AS close
FROM daterange D LEFT JOIN stocks S1 ON D._date=S1.nyse_date
ORDER BY D._date ; 
```

# javascript - 拆分表格行并通过正则表达式记住每个单元格

> ID：11546849
> 
> 赞同：0
> 
> 时间：2012-07-18T17:17:28.110
> 
> 标签：javascript, regex

原文为：

```
gi0/1 1G-Fiber -- -- -- -- Down -- -- Access
gi0/2 1G-Fiber -- -- -- -- Down -- -- 
gi0/3 1G-Fiber -- -- -- -- Down -- -- 
gi0/4 1G-Fiber -- -- -- -- Down -- -- 
gi0/5 1G-Fiber -- -- -- -- Down -- -- 

gi0/0/1 1G-Fiber -- -- -- -- Down -- --  Access
gi0/0/2 1G-Fiber -- -- -- -- Down -- -- 
gi0/0/3 1G-Fiber -- -- -- -- Down -- -- 
gi0/0/4 1G-Fiber -- -- -- -- Down -- -- 
gi0/0/5 1G-Fiber -- -- -- -- Down -- -- 
```

我的工作代码是：

```
var re = /(([\w]{2})[\/\d]{1,})\s+([\w\-\.\s]+){1,}[\r\n]/ig;
while ( (MyArray = re.exec(text)) != null ){ 
```

// 这里我想获取具有跟随值的数组（MyArray）

```
[0] [matched string]
[1] gi0/1 (gi0/0/1)
[2] gi
[3] 1G-Fiber
[4] -- 
[5] --
[6] --
[7] --
[8] Down
[9] --
[10] --
[11] Access (only for 1st and 6th row) 
```

// 但是得到 (MyArray)

```
[0] [matched string]
[1] gi0/1 (gi0/0/1)
[2] gi
[3] "s" OR "empty"
} 
```

在线示例 - [http://regexr.com?31ilv](http://regexr.com?31ilv)

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:05:00.627

```
 <script type="text/javascript">
        var subject = "gi0/1 1G-Fiber -- -- -- -- Down -- -- Access";
        //var subject = "gi0/1 1G-Fiber -- -- -- -- Down -- --";
        var regex = /([^\s]*)\s([^\s]*)\s([^\s]*)\s([^\s]*)\s([^\s]*)\s([^\s]*)\s([^\s]*)\s([^\s]*)\s([^\s]*)\s*([^\s]*)/;
        var result = regex.exec(subject);
        document.write("<ol>");
        for (var i = 1; i < result.length; i++) {
            document.write("<li>'<i>" + result[i] + "<\/i>'<\/li>");
        }
        document.write("<\/ol>");
    </script> 
```

如果源字符串没有“Access”后缀，则此正则表达式会创建一个最后一个元素为空的数组。另一种策略可能是使用 String.search 函数并遍历源字符串。

# objective-c - 当 UIView 被隐藏时会发生什么？

> ID：11546852
> 
> 赞同：0
> 
> 时间：2012-07-18T17:17:51.503
> 
> 标签：objective-c, uiview, uiwindow, messageui

这听起来像是一个奇怪的问题，但当它被隐藏时究竟会发生什么。很高兴看到 UIView 源代码，但这不会发生。

这就是我想知道的原因：我正在尝试在我的应用程序上方添加一个 UIWindow（一个透明的，用户交互启用设置为 NO）来为屏幕着色。在用户尝试使用 Apple 的 MessageUI.framework 通过 SMS 共享之前，它工作得非常好。当这种情况发生并且 MFMessageComposeViewController 或 MFMailComposeViewController 出现时，这些视图控制器将不会接收用户输入。我已经尝试了很多东西，唯一有效的方法是允许用户与视图交互，将 UIWindow（我添加的那个）设置为 0 的 alpha 或将隐藏设置为 YES。我想在不隐藏视图的情况下复制它，这就是为什么我想知道当 UIWindow（它是 UIView 的子类）被隐藏时会发生什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:30:13.113

iOS 应用程序中通常只有一个窗口。你最好只使用 a`UIView`来完成这个任务而不是 a `UIWindow`。`UIWindow`向类添加了一些视图层次结构和事件管理功能`UIView`。此功能会干扰您应用中的预期行为。我认为如果您将此视图的类更改为`UIView`而不是`UIWindow`.

# c# - 序列化一个域类型 Type

> ID：11546856
> 
> 赞同：1
> 
> 时间：2012-07-18T17:18:10.437
> 
> 标签：c#, visual-studio-2010, dsl, envdte

我有一些域类具有类型类型（类）的属性。

用户可以使用自定义 TypeBrowserEditor 选择在他的项目中加载的任何类。

序列化工作正常，我序列化为 myType.AssemblyQualifiedName

但是在反序列化过程中，Type.GetType(str) 返回 null，因为程序集没有加载到应用程序域中。

我不能做 AssemblyLoad(str) 因为他找不到文件。

我需要访问 IVSHierarchy 并通过用户项目的引用进行枚举。但我找不到在我的 DomainPropertyXmlSerializer 中访问它的方法。如果有人可以为我指出服务提供商的正确方向，或者无论如何让我连接到 VS 当前项目，那就太好了。

提前致谢。

编辑：在最坏的情况下，我只能使用 String 并将其转换到我的类型编辑器中，因为我可以在那里访问 IVSHierarchy，但我不太喜欢那个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:50:57.513

好的，我设法做到了！

在 DslPackage 中，制作一个 DocData.cs，并为 MyLanguageDocData 类创建一个部分（部分）

然后在里面：

```
protected override void OnDocumentLoading(EventArgs e)
    {
        mRes = new ResolveEventHandler(CustomAssemblyResolverDocData);
        availableTypes = new Dictionary<string, Type>();
        availableAssemblies = new Dictionary<string, Assembly>();
        PreloadAssemblies();
        if (availableAssemblies.Count == 0)
            throw new Exception("Problem");

        base.OnDocumentLoading(e);
        AppDomain.CurrentDomain.TypeResolve += mRes;
        AppDomain.CurrentDomain.AssemblyResolve += mRes;
    } 
```

在加载解决方案之前打开设计器时会发生异常（在编辑设计时关闭 Visual Studio 时发生）。在此处抛出异常将防止负载静默发生。

在 PreloadAssemblies 中：

```
IVsHierarchy hier = VsHelper.ToHierarchy(dteProject);
DynamicTypeService typeService = (DynamicTypeService)this.GetService(typeof(DynamicTypeService));
ITypeDiscoveryService discovery = typeService.GetTypeDiscoveryService(hier);

try
{

    foreach (Type type in discovery.GetTypes(typeof(object), true))
    {
        if (!availableTypes.ContainsKey(type.FullName))
        {
            availableTypes.Add(type.FullName, type);
        }
        if (!availableAssemblies.ContainsKey(type.Assembly.GetName().Name))
        {
            availableAssemblies.Add(type.Assembly.GetName().FullName, type.Assembly);
        }
    }
}
catch (Exception e)
{

} 
```

在解析器中，只需检查程序集名称是否在字典中。否则返回null。

覆盖 DocumentClosed 以及删除程序集解析器:)

# python - Python 多处理关键字参数

> ID：11546858
> 
> 赞同：14
> 
> 时间：2012-07-18T17:18:13.423
> 
> 标签：python, arguments, multiprocessing, keyword-argument

这是一个在函数调用中使用关键字参数的简单示例。没什么特别的。

```
def foo(arg1,arg2, **args):
    print arg1, arg2
    print (args)
    print args['x']

args ={'x':2, 'y':3}
foo(1,2,**args) 
```

正如预期的那样打印：

```
1 2
{'y': 3, 'x': 2}
2 
```

我正在尝试将相同样式的关键字参数传递给多处理任务，但是在 args 列表中使用 ** 是语法错误。我知道我的函数stretch() 将采用两个位置参数和n 个关键字参数。

```
pool = [multiprocessing.Process(target=stretch, args= (shared_arr,slice(i, i+step),**args)) for i in range (0, y, step)] 
```

是否可以将关键字参数传递给 multiprocessing.Process？如果是这样，怎么做？如果不是，为什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-18T17:26:36.377

您用作关键字 args 的字典应作为`kwargs`参数传递给`Process`对象。

```
pool = [multiprocessing.Process(target=stretch, args= (shared_arr,slice(i, i+step)),kwargs=args) for i in range (0, y, step)] 
```

# php - 我如何确保 php 到 js 的字符串不会中断

> ID：11546861
> 
> 赞同：-1
> 
> 时间：2012-07-18T17:18:20.310
> 
> 标签：php, javascript, line-breaks, nl2br

我正在编写一个网页，其中涉及使用字符串的 php 数组来输出 js 数组，如下所示

```
while($main2row = mysqli_fetch_assoc($result)) {
$tSummary[$main2row['id']] = '"'.$main2row['content'].'"';

    $tTitle[$main2row['id']] = '"'.$main2row['title'].'"';

}

//the above gets the php from the sql database, then stores it in an array, both are string arrays

foreach ( $tSummary as $key => $val) 
{

echo "summArray['".$key."'] = ".nl2br($val).";\n"; 

} 

foreach ( $tTitle as $key => $val) 

{ 

echo "titleArray['".$key."'] = ".nl2br($val).";\n"; 

} 
//these foreach loops will print in a js script and will store the php arrays as js arrays 
```

我知道我可能应该使用 json，但这是其他人为我设置的方式，我觉得我应该遵守他们的代码。

问题是当数据存储时，它会以以下方式失败：

```
summArray['225594172793552897'] = "      blah blah blah blah blah - blah.<br />
<br />
       blah blah blah blah.....";  /* this one is messed up */

summArray['225595300046307328'] = "text text text text text text text text text text text text text text ."; /* this one is fine */ 
```

我注意到只要有换行符，字符串就会中断，所以我尝试使用 nl2br 但是，虽然它添加了一个 br 标记，但它并没有删除换行符。有什么办法可以摆脱这个换行符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:45:31.100

而不是`nl2br($val)`，尝试`str_replace("\n", "\\n", $val)`在 JavaScript 中获取换行符，或者`str_replace("\n", "\\n", nl2br($val))`也获取 HTML 换行符。

# asp.net-mvc-3 - 在 ASP.NET MVC 3 视图中呈现 System.Drawing.Image 的最佳方式

> ID：11546865
> 
> 赞同：8
> 
> 时间：2012-07-18T17:18:40.497
> 
> 标签：asp.net-mvc-3, html-helper, filecontentresult

我有一个 System.Drawing.Image 类型的对象，并希望在视图中显示此图像。最好的方法是什么？

我找到了一些可能适合这种情况的自定义 Html Helper 方法。还找到了一个示例，该示例使用返回 a 的新操作方法`FileContentResult`来完成类似的操作。我想知道哪种技术最好且最容易实施。

**编辑**

更具体地说，我在 Controller 的 System.Drawing.Image 变量中有图像，我想在视图中显示。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-18T17:25:13.707

```
public ActionResult GetImg()
{
    string imageFile = System.Web.HttpContext.Current.
                                 Server.MapPath("~/Content/tempimg/unicorn.jpg");
    var srcImage = Image.FromFile(imageFile);
    using (var streak = new MemoryStream())
    {
      srcImage.Save(streak, ImageFormat.Png);
      return File(streak.ToArray(), "image/png");
    }     
} 
```

现在您可以在这样的视图中调用它

```
<img src="@Url.Action("GetImg","YourControllerName")"  alt="alt text"/> 
```

# android - 让用户点击 Android 上的广告——合法与否？

> ID：11546866
> 
> 赞同：3
> 
> 时间：2012-07-18T17:18:46.387
> 
> 标签：android, admob, ads, google-play

在免费应用程序中，我想在点击横幅后永远隐藏广告。用户会知道这个规则。在我看来，如果用户为开发者赚了一些钱，让我们让他远离广告。但是所有的广告系统都在检查作弊行为以避免自动点击或类似的事情。那么，关于 Google Play 上的主要广告平台（Google 广告、AdMob 等），您能说出什么——是否有可能做这样的事情，否则会被判断为作弊，然后许多用户会一个接一个地进行多次点击以移除广告？像“删除广告”这样简单的应用内应用更好吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T17:23:30.470

这违反了我所知道的每个广告网络的条款和条件。它还可能让您在 Google Play 上被禁止。

最好[在应用程序购买](http://developer.android.com/guide/google/play/billing/billing_overview.html)中使用此功能。它不会让您在任何广告网络或 Google Play 上被禁止，并且相当容易集成。

# sql - 带有“^M”行终止符的 SQL Server 大容量插入

> ID：11546867
> 
> 赞同：0
> 
> 时间：2012-07-18T17:18:50.323
> 
> 标签：sql, import, bulk

我有一个平面文件，每行都以 ^M 字符结尾。我发现这是从 dos/windows 操作系统生成的，是 0x0D 的可视化表示。我正在尝试将文件批量插入到 SQL Server 2008 中，但我找不到以进程知道它是行终止符的方式定义 ^M 的方法。我尝试过多种方式指定它，但没有成功。关于如何使用“^M”字符作为行终止符导入此文件的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:21:16.330

`dos2unix fileNameCreatedInWindows.sql`这个小实用程序应该会有所帮助。

它按照它说的做，将 Windows 特定的分隔符转换为 Unix 分隔符。然后您可以使用此文件执行批量插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:31:27.147

0x0D 是 \r; 您是否尝试将 \r\n rowterminator 参数传递给批量插入命令？

# git - 如何从远程 Git 存储库中删除所有内容？

> ID：11546869
> 
> 赞同：2
> 
> 时间：2012-07-18T17:19:02.460
> 
> 标签：git, version-control, repository

### 我怎样才能完全“重新开始”就地？

如何彻底清除 Git 远程存储库中的所有内容？我是目前唯一的客户，在我可以让它公开之前，我必须清除所有以前的提交。

### 不是重复的，因为...

这个问题是关于如何在不删除现有存储库的情况下删除历史记录，包括原始基本提交。我的存储库在 SourceForge 上，唯一的方法是销毁整个项目，这需要您提交项目删除请求，他们并不总是同意（尤其是在我的情况下，我的项目小于 90天，所以他们不会批准）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:43:17.847

### 推送一个（大部分）空分支

您必须在分支上至少提交一次才能将其推送到远程存储库。如果您根本没有头脑，git 将没有任何东西可以发送到*origin*。您可以通过使用空提交创建一个空分支来解决此问题。例如：

```
git symbolic-ref HEAD refs/heads/empty_branch
rm .git/index
git commit --allow-empty -m 'Initialize empty branch.'
git branch -M empty_branch master
git push --force origin 
```

完成后，您当前的 master 和 origin/master 都将包含一个无文件提交。当 git 执行垃圾回收时，存储库中的底层对象最终会被回收。

### 删除所有标签

如果要删除所有本地和远程标签，可以在本地删除标签之前将一组空引用推送到远程。例如：

```
# Delete all tags present on the local host from the remote
# host in one push operation.
git for-each-ref --format=':%(refname)' --shell refs/tags |
    xargs git push origin

# Delete all local tags.
git tag -d $(git tag) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:20:46.080

ssh 到服务器并`rm -rf .git`在项目目录中执行操作。如果您想再次将其放在 git 下，请运行`git init`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:25:15.137

如果远程名称是`origin`并且您对远程存储库具有强制推送权限，这将删除远程存储库中的**每个分支**和**每个标签**：

```
REMOTE=origin

for i in .git/refs/$REMOTE/origin/*
do
    git push $REMOTE :"`basename "$i"`"
done

for i in `git tag`
do
    git push $REMOTE :refs/tags/$i
done 
```

这是一项破坏性操作，因此请确保您*确实*想要先执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T08:35:50.877

使用 git push 命令删除分支

$git push origin :remotebranch_name

这将完全删除远程分支

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-11T12:58:13.203

这是一个简单的方法：

1.  创建一个空的 git 存储库。

    `git init`

2.  进行虚拟提交：

    `touch README.md git add README.md git commit -m "first commit"`

3.  引用您要覆盖的存储库：

    `git remote add origin REMOTE_URL`

4.  覆盖远程git

    `git push --force origin`

5.  删除现有的远程标签（一一）

    `git push --delete origin TAG_NAME`

# php - 如何在 PHP 中处理无效的 HTML？

> ID：11546876
> 
> 赞同：-2
> 
> 时间：2012-07-18T17:19:39.053
> 
> 标签：php, html, regex, parsing

**[我看过这个问题](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)**，非常好，内容丰富。但是，它没有处理相当常见的情况。

假设我需要抓取大量网站（甚至是同一域中的页面），但该网站的作者对他的代码不够关心，并且有一些严重格式错误的代码“有点用”。我需要从那个网站获取信息。

在这种情况下我该怎么做？理想情况下不去 í͞ń̡͢͡s̶̢̛á̢̕͘ń̵͢҉e̶̸̢̛。

是否可以？我必须恢复到 RegExp 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:23:29.547

你需要一个 DOM 解析器。[PHP 有一个](http://php.net/manual/en/book.dom.php). 然后有[一些](http://code.google.com/p/phpquery/) [替代](http://simplehtmldom.sourceforge.net/) [品](http://code.google.com/p/ganon/)（还有更多......只是谷歌他们）。如果需要，您甚至可以运行“乱码 HTML”trhu [HTML Purifier](http://htmlpurifier.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:28:40.823

我不知道您是如何抓取网站的，但使用 RegExp 将允许您向废品代码添加许多条件。这可能需要一些时间，具体取决于足迹的数量和您的 RegExp 技能。

您也可以在站点 HTML 上使用 Tidy，但这也会导致奇怪的结果以及 IMO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:30:54.173

它必须是PHP吗？Python 有一个很棒的库，叫做**[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)**（*“你没有写那个糟糕的页面。你只是想从中获取一些数据”*）。根据我的经验，我非常推荐它，如果你有选择的话，我会说，写一个快速的 Python 脚本来将你的节点解析成一个你的 PHP 可以拾取的干净文件。

（知道 PHP 在标题中，这并不能直接回答您的问题。抱歉，如果您没有选择（或不喜欢）Python，只是想提供一个不错的选择。）

# c - 在 Ubuntu 上使用 C 项目编译和链接 GTK 3

> ID：11546877
> 
> 赞同：20
> 
> 时间：2012-07-18T17:19:50.203
> 
> 标签：c, gcc, gtk

我相信这不是一个重复的问题，我在发布这个问题之前已经看过所有问题/答案。我想我在这里有不同的情况。

我使用 Ubuntu 12.04 并下载**了 GTK 2 和 3**。我从 GNOME 的网站上复制了一个简单的 GTK 源代码。但是当我在终端中使用这个命令时：

```
gcc `pkg-config --cflags --libs gtk+-3.0`  hello.c -o hello 
```

我明白了：

```
hello.c:(.text+0x17): undefined reference to `gtk_init'
hello.c:(.text+0x23): undefined reference to `gtk_window_new'
hello.c:(.text+0x47): undefined reference to `gtk_main_quit'
hello.c:(.text+0x5b): undefined reference to `g_signal_connect_data'
hello.c:(.text+0x67): undefined reference to `gtk_widget_show'
hello.c:(.text+0x6c): undefined reference to `gtk_main' 
```

这是我的代码：

```
#include <gtk/gtk.h>

int
main (int   argc,
char *argv[])
{
  GtkWidget *window;

  gtk_init (&argc, &argv);

  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);

  g_signal_connect (window, "destroy", G_CALLBACK (gtk_main_quit), NULL);

  gtk_widget_show (window);

  gtk_main ();

  return 0;
} 
```

我不确定是否会出现错误，因为我有两个版本的 GTK+ 或什么。我是 Ubuntu/Linux 应用程序开发的新手。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-18T17:28:29.053

您应该使用出现在库之前的源文件进行编译`gcc hello.c $(pkg-config --cflags --libs gtk+-3.0) -o hello`，原因是链接器的行为，即除非在编译之前看到该库的符号，否则它不会链接库。
希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-15T11:18:23.380

您还可以将 gtk 库直接包含到您的项目中：

1.  在 Eclipse 中展开：Project > Properties > C/C++ Build > Settings > Tool Settings > Cross GCC Linker > Libraries
2.  设置：库搜索路径（-L）到文件“libgtk-n.so”的路径，n 作为你的版本。在 Lubuntu 上安装 (apt-get install libgtk-3-dev) 后，这对我来说是“/usr/lib/x86_64-linux-gnu/”。
3.  然后添加到库（-l）：gtk -n

# iphone - 推送详细视图时字符串设置为空

> ID：11546882
> 
> 赞同：0
> 
> 时间：2012-07-18T17:20:07.137
> 
> 标签：iphone, ios, nsstring, null, plist

我正在从 Master-Detail Application 模板的 master 推送详细视图。我想根据单击的行加载具有不同信息的单个视图。我计划从 plist 文件加载数据。这是我在 MasterViewController 中使用的代码，当我添加时`didSelectRowAtIndexPath:`

```
DetailViewController *dvc = [[DetailViewController alloc]init];
dvc.rowItem = [_objects objectAtIndex:indexPath.row];;
NSLog(@"row is %i", indexPath.row);
NSLog(@"master %@", dvc.rowItem); 
```

其中 rowItem 是`NSString`属于`DetailViewController`. 在我放`viewDidLoad`的里面：`DetailViewController`

```
 [super viewDidLoad];
NSLog(@" thingy %@", rowItem);
[self setup:rowItem]; 
```

`setup`看起来像这样：

```
-(void) setup: (NSString *)eval {

filePath = [NSString stringWithFormat:@"%@.plist",eval];
NSLog(@"%@", filePath);
    NSMutableDictionary* plistDict = [[NSMutableDictionary alloc] initWithContentsOfFile:filePath];

NSString *subName;
NSString *yesNo;
NSString *theseChanges;
subName = [plistDict objectForKey:@"subContractAddress"];
yesNo = [plistDict objectForKey:@"yesOrno"];
theseChanges = [plistDict objectForKey:@"Changes"];
} 
```

这是我的界面：

```
#import <UIKit/UIKit.h>

@interface DetailViewController : UIViewController

@property (strong, nonatomic) id detailItem;

@property (strong, nonatomic) IBOutlet UILabel *detailDescriptionLabel;
@property (strong, nonatomic) IBOutlet UIButton *finishedButton;
@property (strong, nonatomic) IBOutlet UITextView *changes;
@property (strong, nonatomic) IBOutlet UIButton *saveButton;
@property (strong, nonatomic) IBOutlet UISwitch *test;
@property (strong, nonatomic) IBOutlet UILabel *finishedLabel;
@property (strong, nonatomic) IBOutlet UITextField *subContractName;
@property BOOL needsChanges;
@property (strong, nonatomic) NSString *rowItem;
-(IBAction)change:(id)sender;
-(IBAction)save:(id)sender;
@end 
```

当我构建并运行时，我得到以下控制台输出：

```
thingy (null)
(null).plist
row is 0
master Excavations 
```

当我按下第一行时，

```
thingy (null)
(null).plist
row is 1
master Flooring 
```

所以不知何故，rowItem 在交叉中被设置为空。有人能看到我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:34:42.613

尝试更改您的两个日志语句，如下所示：

```
NSLog(@"master %@, detail %@", dvc.rowItem, dvc);

NSLog(@" thingy %@ in detail %@", rowItem, self); 
```

我怀疑您创建的细节`dvc`与视图控制器层次结构中的对象不同。显示对象地址应该验证这是否是答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:27:42.600

在“viewWillAppear”中进行设置，我敢打赌它会开始工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:34:20.010

请检查这个，

```
dvc.rowItem = [[NString alloc]initWithString:@"%@",[_objects objectAtIndex:indexPath.row]]; 
```

# javascript - 是否可以使用 javascript 读取本地文件？

> ID：11546883
> 
> 赞同：1
> 
> 时间：2012-07-18T17:20:07.923
> 
> 标签：javascript

从**本地**.html**文件**（_ `file:///C:/...`_ *_* **_** _ **_** _ `--allow-file-access-from-files`_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:23:09.420

您只能使用[HTML5执行此操作](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

该网站的示例：

```
<style>
  .thumb {
    height: 75px;
    border: 1px solid #000;
    margin: 10px 5px 0 0;
  }
</style>

<input type="file" id="files" name="files[]" multiple />
<output id="list"></output>

<script>
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++) {

      // Only process image files.
      if (!f.type.match('image.*')) {
        continue;
      }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // Render thumbnail.
          var span = document.createElement('span');
          span.innerHTML = ['<img class="thumb" src="', e.target.result,
                            '" title="', escape(theFile.name), '"/>'].join('');
          document.getElementById('list').insertBefore(span, null);
        };
      })(f);

      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script> 
```

# javascript - 提交前拼写检查表单字段

> ID：11546892
> 
> 赞同：0
> 
> 时间：2012-07-18T17:21:15.207
> 
> 标签：javascript, jquery, forms, spell-checking

我试图在用户提交表单之前警告他们拼写错误。我正在寻找一种解决方案，希望能在输入、textarea 或richtextarea(CKeditor) 字段中突出显示拼写错误的单词，或者至少给我一个参考，以便我可以突出显示包含错误的字段。

我目前正在研究[这个选项](http://www.javascriptspellcheck.com)。我也看到[了另一种选择](http://www.webspellchecker.net)，但它看起来很贵。

任何其他体面的解决方案，也许是我可以使用 Ajax 查询的服务器解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:30:30.047

也许你可以看看这个：

[http://developer.dictionary.com/products/spelling](http://developer.dictionary.com/products/spelling)

他们有一个免费的 API。

您可以将所有文本提交到您的 ajax 后端，将每个单词发送到 api 并获取拼写建议。从中您可能可以弄清楚该单词是否拼写错误。此时，要么返回呈现的 html，要么返回一个带有拼写错误单词和建议索引的 json 对象

# c# - 将数据复制到多台服务器的更有效方式

> ID：11546893
> 
> 赞同：0
> 
> 时间：2012-07-18T17:21:15.403
> 
> 标签：c#, xml, copy

以下是该场景的基础知识。我有一小块数据（10MB）需要（在我的 C# 应用程序中）从一个源服务器复制到大约 10,000 个不同的目标文件夹，这些目标文件夹可能位于 25 台不同的服务器上（每台服务器 400 个目标文件夹）。我拥有所有的访问权限等，我唯一的挂断是决定哪种**方法**最快、最有效。完成时间是任何答案中更大的优先级。不幸的是，我不能接受其他“解决方案”，因为它就是这样。对不起。

我的一些选择是：

1.  使用异步复制命令将数据从源复制到 10,000 个目标。
2.  将数据从源复制到 25 台服务器中的每台，然后从服务器上的每个位置异步复制到各自服务器上的最终 10,000 个目标文件夹。
3.  其他选择？？

从逻辑的角度来看，选项 2 似乎最有意义，但我很好奇输入。我不清楚操作系统如何处理非本地复制命令。程序是否通过网络返回通过我的源服务器然后到达目的地？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:34:08.737

The straightforward solution is, yes, copy once to a root location on each of the 25 servers using File.Copy(). Then, tell each server to copy the data from that root location to the target 400 locations by pushing them commands. The exact format of the command depends on what type of servers they are.

If they are unix servers, send the command via SSH or SCP.

If they are FTP servers, some servers provide a remote-to-remote copy command that is more efficient than re-uploading the same data.

If they are Windows servers, you can use a .CMD file, or PowerShell or something else (see here for more ideas: [https://serverfault.com/questions/116166/windows-how-to-start-a-file-copy-job-on-a-remote-server-without-passing-through](https://serverfault.com/questions/116166/windows-how-to-start-a-file-copy-job-on-a-remote-server-without-passing-through))

However, if you actually control the 25 servers yourself, just write a command line program that monitors a "drop folder". Anytime it receives the 10MB file in the drop folder, automatically propagate the file to the 400 target locations.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:24:06.523

这是一个非常常见的操作要求。

我过去使用[robocopy](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29)非常成功地解决了这个问题（它比 xcopy 强大得多）。

如果您从一个源复制到 10,000 台单独的服务器，您将使一个源上的 NIC 饱和。您最好在每台服务器上都有一个 dropoff 文件夹，并让每台服务器在 dropoff 文件夹中查找更改并将它们复制到该服务器上的各个目标文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:32:25.113

网络（除非您在初始分配器上的硬盘驱动器速度较慢，或者在服务器之间运行千兆位或更高的以太网）将是您最大的问题。要分割带宽，您可能需要实施类似金字塔的方案。

例如，列出您需要将数据复制到的所有服务器的列表，删除连接速度最快的 N 个服务器，然后将剩余的列表拆分为 N 个大小相等的列表。将有效负载与列表一起发送到已删除的服务器。然后，服务器将接受数据，以及它们负责将数据传输到的服务器列表。然后，服务器将获取该列表并重复该过程，直到所有服务器都拥有数据的副本。

显然，这完全取决于您的网络拓扑，您应该尝试使用不同的 N 值来查看哪些是最快的，但这就是优化的 P2P 分发的工作原理：首先将数据发送给最快的对等点，然后让它们重新发送给其他点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T17:32:54.850

Even if you implement the dropoff folder idea mentioned by Eric J, (which is generally a good idea), you'll still be bound by disk I/O, so fast is going to be relative to the destination's physical medium.

Here is a key question for you: Are you going to be modifying this data once its in your 10,000 directories? If the answer is no, strongly consider symlinking your 10,000 destinations to each server's dropoff directory.

# python - Python：如何删除 CSV 文件中单独出现的句点？

> ID：11546896
> 
> 赞同：3
> 
> 时间：2012-07-18T17:21:16.150
> 
> 标签：python, text, csv, replace, missing-data

我有一堆 CSV 文件。在其中一些中，缺失的数据由空单元格表示，但在另一些中，有一个句点。我想遍历所有文件，打开它们，删除单独出现的任何句点，然后保存并关闭文件。

我已经阅读了很多关于使用 re.sub() 进行全词搜索的其他问题。这就是我想要做的（删除 . 当它单独出现而不是 3.5 中的 . 时），但我无法为整个单词是特殊字符（'. '）。另外，我担心在整个单词也可以通过制表符和换行符区分的情况下，这些答案可能会有所不同。也就是说， /b 是否适用于我的 CSV 文件案例？

更新：这是我在看到下面的帮助后写的一个函数。也许它对其他人有用。

```
import csv, re

def clean(infile, outfile, chars):

''' 
Open a file, remove all specified special characters used to represent missing data, and save.\n\n
infile:\tAn input file path\n
outfile:\tAn output file path\n
chars:\tA list of strings representing missing values to get rid of
'''

in_temp = open(infile)
out_temp = open(outfile, 'wb')

csvin = csv.reader(in_temp)
csvout = csv.writer(out_temp)
for row in csvin:
    row = re.split('\t', row[0])
    for colno, col in enumerate(row):
        for char in chars:
            if col.strip() == char:
                row[colno] = ''
    csvout.writerow(row)

in_temp.close()
out_temp.close() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T17:26:23.790

像这样的东西应该可以解决问题......这些数据不会碰巧来自SAS - IIRC，经常使用'。缺少数值。

```
import csv

with open('input.csv') as fin, open('output.csv', 'wb') as fout:
    csvin = csv.reader(fin)
    csvout = csv.writer(fout)
    for row in csvin:
        for colno, col in enumerate(row):
            if col.strip() == '.':
                row[colno] = ''
        csvout.writerow(row) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T17:26:09.900

为什么不直接使用 csv 模块？

```
#!/usr/bin/env python

import csv

with open(somefile) as infile:
  r=csv.reader(infile)
  rows = []
  for row in csv:
    rows.append(['' if f == "." else f for f in row])
with open(newfile, 'w') as outfile:
  w=csv.writer(outfile)
  w.writelines(rows) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:26:09.810

最安全的方法是使用 CSV 模块来处理文件，然后识别任何仅包含 的字段`.`，删除这些字段并将新的 CSV 文件写回磁盘。

一个脆弱的解决方法是搜索和替换一个没有被字母数字包围的点：`\B\.\B`是找到这些点的正则表达式。但这也可能会找到其他点，例如`"..."`.

因此，要查找被逗号包围的点，您可以搜索`(?<=,)\.(?=,)`.

# vb.net - 隐藏一个 VB.Net 后重新排列面板

> ID：11546904
> 
> 赞同：2
> 
> 时间：2012-07-18T17:21:50.877
> 
> 标签：vb.net, winforms

我创建了一个非常复杂的 Windows 窗体应用程序。我现在要做的是，如果单击不同的按钮以禁用某些面板，但将其下方的所有其他面板向上移动，使其看起来井井有条。我很难受。我想开发一个函数，它传入一个被禁用的面板以及它下面的所有其他面板的列表，并使用递归重新排列所有面板。此功能有效，但它没有考虑一个面板的高度是否大于另一个面板的高度，它会在两个面板之间留下额外的空间。任何帮助将非常感激。

```
Public Sub whatever(ByVal panel As Panel, ByVal list As List(Of Panel))
    Dim temppanel As Panel = New Panel()
    For Each item As Panel In list
        temppanel.Location = New Point(temppanel.Location.X, item.Location.Y)
        item.Location = New Point(item.Location.X, panel.Location.Y)
        list.Remove(item)
        whatever(temppanel, list)
        If list.Count = 0 Then
            Exit For
        End If
    Next
End Sub 
```

**图片**

[http://imageshack.us/photo/my-images/268/panelsz.png/](http://imageshack.us/photo/my-images/268/panelsz.png/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:14:18.910

FlowLayoutPanel 可能更适合这个，但这里有一个通用的方法来做我认为你正在寻找的东西：

```
Private Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) _
                          Handles Button1.Click
  ToggelPanel(Panel2)
End Sub

Private Sub ToggelPanel(ByVal whichPanel As Panel)
  Dim startPoint As New Point(10, 10)
  whichPanel.Visible = Not whichPanel.Visible

  For Each pnl As Panel In Me.Controls.OfType(Of Panel)(). _
                           Where(Function(x) x.Visible). _
                           OrderBy(Function(x) x.TabIndex)
    pnl.Location = startPoint
    startPoint.Y += pnl.Height + 4
  Next
End Sub 
```

如果`Me`这些面板不在`Me`.

* * *

如果在 LINQ 不可用的情况下使用 .net 2.0，则该函数将如下所示：

```
Private Shared Function CompareTabIndex(ByVal p1 As Panel, ByVal p2 As Panel) _
                                        As Integer
  Return p1.TabIndex.CompareTo(p2.TabIndex)
End Function

Private Sub ToggelPanel(ByVal whichPanel As Panel)
  Dim startPoint As New Point(10, 10)
  whichPanel.Visible = Not whichPanel.Visible

  Dim panels As New List(Of Panel)
  For i As Integer = 0 To Me.Controls.Count - 1
    If TypeOf Me.Controls(i) Is Panel Then
      If Me.Controls(i).Visible Then
        panels.Add(Me.Controls(i))
      End If
    End If
  Next

  panels.Sort(New Comparison(Of Panel)(AddressOf CompareTabIndex))

  For Each pnl As Panel In panels
    pnl.Location = startPoint
    startPoint.Y += pnl.Height + pnl.Margin.Bottom
  Next
End Sub 
```

# javascript - Google Earth Api 更改图像对比度

> ID：11546915
> 
> 赞同：0
> 
> 时间：2012-07-18T17:22:42.040
> 
> 标签：javascript, image-processing, google-earth-plugin

有没有办法对谷歌地球浏览器插件中作为图标或覆盖加载的图像进行任何类型的像素操作？我正在寻找可以为用户提供许多可以改变对比度、亮度等的滑动条选项的东西。所以`onChange`或者`onSubmit`图标会更新：

```
icon.changeContrast(contrastVal);
icon.changeBrightness(brightnessVal); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T01:59:29.240

目前没有，没有。

您可以使用画布甚至 CSS 过滤器进行一些 HTML5 图像处理，但如果您希望它完全集成为常规图标/叠加层/您在 Earth 中拥有的东西，您必须将其往返传输到服务器并返回插件（因为插件在单独的进程中运行，它无法访问图像的 javascript 句柄或从 dataurls 加载它们）。

# json - Sending a byte array in json using jackson

> ID：11546917
> 
> 赞同：33
> 
> 时间：2012-07-18T17:22:43.423
> 
> 标签：json, jackson

I want to form a JSON with two fields mimetype and value.The value field should take byte array as its value.

```
{

  "mimetype":"text/plain",

  "value":"dasdsaAssadsadasd212sadasd"//this value is of type byte[]

} 
```

How can I accomplish this task?

As of now I am using `toString()` method to convert the byte array into String and form the JSON.

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-19T18:02:00.480

如果您使用 Jackson 进行 JSON 解析，它可以`byte[]`通过数据绑定自动转换为 Base64 编码字符串。

或者，如果您想要低级别访问，则两者`JsonParser`都有`JsonGenerator`二进制访问方法（writeBinary、readBinary）在 JSON 令牌流级别执行相同操作。

对于自动方法，请考虑 POJO，例如：

```
public class Message {
  public String mimetype;
  public byte[] value;
} 
```

并创建 JSON，你可以这样做：

```
Message msg = ...;
String jsonStr = new ObjectMapper().writeValueAsString(msg); 
```

或者，更常见的是：

```
OutputStream out = ...;
new ObjectMapper().writeValue(out, msg); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-23T05:16:01.690

您可以像这样编写自己的 CustomSerializer：

```
public class ByteArraySerializer extends JsonSerializer<byte[]> {

@Override
public void serialize(byte[] bytes, JsonGenerator jgen,
        SerializerProvider provider) throws IOException,
        JsonProcessingException {
    jgen.writeStartArray();

    for (byte b : bytes) {
        jgen.writeNumber(unsignedToBytes(b));
    }

    jgen.writeEndArray();

}

private static int unsignedToBytes(byte b) {
    return b & 0xFF;
  }

} 
```

这个返回一个无符号字节数组表示而不是 Base64 字符串。

如何将它与您的 POJO 一起使用：

```
public class YourPojo {

    @JsonProperty("mimetype")
    private String mimetype;
    @JsonProperty("value")
    private byte[] value;

    public String getMimetype() { return this.mimetype; }
    public void setMimetype(String mimetype) { this.mimetype = mimetype; }

    @JsonSerialize(using= com.example.yourapp.ByteArraySerializer.class)
    public byte[] getValue() { return this.value; }
    public void setValue(String value) { this.value = value; }

} 
```

这是它的输出示例：

```
{
    "mimetype": "text/plain",
    "value": [
        81,
        109,
        70,
        122,
        90,
        83,
        65,
        50,
        78,
        67,
        66,
        84,
        100,
        72,
        74,
        108,
        89,
        87,
        48,
        61
    ]
} 
```

PS：这个序列化器是我在 StackOverflow 上找到的一些答案的混合体。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T17:33:44.160

您可能希望使用[Base64](http://en.wikipedia.org/wiki/Base64)将二进制数据转换为字符串。大多数编程语言都有 base64 编码和解码的实现。如果您想在浏览器中解码/编码，请参阅[此问题](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)。

# c# - 将 XBAP 转换为独立的 WPF 应用程序

> ID：11546920
> 
> 赞同：1
> 
> 时间：2012-07-18T17:22:59.217
> 
> 标签：c#, wpf, xbap

我有一个需要转换为独立 WPF 应用程序的 XBAP。我浏览了代码，但似乎找不到使应用程序成为 XBAP 而不是标准 WPF 的原因。谁能告诉我如何返回并从 XBAP 转换为独立的 WPF？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:12:44.510

听起来它是“WPF 浏览器应用程序”而不是“WPF 应用程序”。

最简单的方法是简单地创建一个新的“WPF 应用程序”并复制/链接文件，或者您可以查看两个 .csproj 文件的生成 XML 结构并根据需要手动更改任何元素/标签/属性。

如果你这样做，也许这将是一个绊脚石：http: [//zainco.blogspot.ca/2009/01/converting-xbap-to-wpf-application.html](http://zainco.blogspot.ca/2009/01/converting-xbap-to-wpf-application.html)

此外，这是记录该过程的另一个资源：http: [//davidsandor.com/post/2009/07/17/Convert-a-WPF-Browser-Application-project-to-a-WPF-Application.aspx](http://davidsandor.com/post/2009/07/17/Convert-a-WPF-Browser-Application-project-to-a-WPF-Application.aspx)

# c# - Can not pass ViewBag property to jQuery method

> ID：11546921
> 
> 赞同：0
> 
> 时间：2012-07-18T17:23:03.343
> 
> 标签：c#, jquery, .net, asp.net-mvc-3

I'm having a problem trying to get a ViewBage property value and pass it into a jQuery method. For example, in my code below, @ViewBag.CountResult have the value 1, and it is displayed in my browser, but when passed into the updateResultFooter method, it is like "" ! Don't get why. Down is my view. Any help ?

Thanks in advance

```
<div>
    <div>
        <span>Téléphone ?</span>
        <input id="idTxTel" type="text" name="txTelephone"/>

        <input id="idBnSearch" type="submit" value="Chercher" name="bnSearch"/>
    </div>
    @Html.Partial("_Result", Model)
</div>

<script type="text/javascript">
    var methodUrl = '@Url.Content("~/Search/GetReverseResult/")';

    $(document).ready(function (){
        updateResultFooter("@ViewBag.CountResult", "@ViewBag.PageNumber", "@ViewBag.PageCount");

        $("#idBnSearch").click(function (){           
            var telValue = $("#idTxTel").val();

            pageIndex = 0;
            doReverseSearch(telValue, pageIndex, methodUrl);
            updateResultFooter("@ViewBag.CountResult", 0, "@ViewBag.PageCount");
        });

        $("#bnNextPage").live("click", function (){
            var telValue = $("#idTxTel").val();

            pageIndex = pageIndex + 1;
            doReverseSearch(telValue, pageIndex, methodUrl);
            updateResultFooter("@ViewBag.CountResult", pageIndex, "@ViewBag.PageCount");
        });
    });

    function updateResultFooter(resultCount, pageIndex, pageCount){
        if (resultCount == '0')
            $("#resultFooter").hide();
        else 
        {
            $("#resultFooter").show();

            if (pageIndex == 0)
                $("bnPreviousPage").attr('disabled', 'disabled');
            else
                $("bnPreviousPage").removeAttr('disabled');

            if ((pageIndex + 1) == pageCount)
                $("bnNextPage").attr('disabled', 'disabled');
            else
                $("bnNextPage").removeAttr('disabled');
        }
    }

    function doReverseSearch(telValue, pageIdx, methodUrl){
    $.ajax({
            url: methodUrl,
            type: 'post',
            data: JSON.stringify({ Telephone: telValue, pageIndex: pageIdx }),
            datatype: 'json',
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                $('#result').replaceWith(data);
            },
            error: function (request, status, err) {
                alert(status);
                alert(err);
            }
        });
    }
</script> 
```

PS: I'm using this code to modify the display of the web page, depending on the result of a search made by the user.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T12:38:18.110

我改变了我使用的方法。现在，我更改了模型，使其包含我想要显示的数据，例如 ( `CountResult`, `PageCount`)。现在它工作正常。

# php - calculate time difference and display popup based on time difference

> ID：11546924
> 
> 赞同：1
> 
> 时间：2012-07-18T17:23:13.913
> 
> 标签：php, ajax, codeigniter, jquery

im writing a small calendar based on php and jquery which has the a function to calculate the time difference and display a popup 15 minutes before.

Can some one tell me how can i calculate the time difference in minutes and popup 15 minutes before.

my time is saved as

```
18-07-2012 15:13:54 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:57:42.310

## *[jsBin 演示](http://jsbin.com/uduqal/4/edit)*

```
var php = '19-07-2012 03:00:00'.split('-');
var phpDate   = php[1]+'/'+php[0]+'/'+php[2];
var phpTime   = new Date(phpDate).getTime();
var currTime  = new Date().getTime();
var difference= phpTime-currTime; 
var leftMin   = Math.ceil( difference/(1000*60) );

$('#test').text(leftMin+' MINUTES LEFT!'); 
```

* * *

**代码说明：**

为了获得剩余时间，我对从 1970 年 1 月 1 日开始的`php`返回时间（以毫秒为单位）和从 1970 年 1 月 1 日开始
的当前时间进行了毫秒比较`ms` ——减去这两个值并得到毫秒差。为了计算我刚刚完成的**分钟差异：**

```
 var leftMin   = Math.ceil( difference/(1000*60) ); 
```

诀窍是获得正确的时间格式并将您的（php）返回时间也恢复为该格式。
默认格式如下所示：`MONTH/DAY/YEAR HOURS:MINUTES:SECONDS`

要将 php 返回的时间转换为该时间`'19-07-2012 03:00:00'`，我使用了：

```
var php = '19-07-2012 03:00:00'.split('-');   // split in array fractions
var phpDate   = php[1]+'/'+php[0]+'/'+php[2]; // reposition array keys and add '/' 
```

返回：`07/19/2012 03:00:00`现在我们可以将其与当前时间进行比较，例如：

```
 07/19/2012 03:45:21 
```

`ms`要从转换后的 php 时间中检索，我们可以使用：

```
var phpTime   = new Date(phpDate).getTime();  // get "ms from our string 
```

目前我们只需要：

```
var currTime  = new Date().getTime();         // get "ms from 1/1/1970 
```

现在有了我们的两毫秒值，我们可以简单地将它们减去以获得剩余时间：

```
var difference= phpTime-currTime; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:49:54.683

检查 PHP 的[DateTime::diff](http://www.php.net/manual/en/datetime.diff.php)！也许它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:32:47.840

php 有一个 mktime() 函数（[http://php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)），它需要一个小时、分钟、秒、月、日、年并计算自纪元以来的秒数（在像 1971 年）。然后你可以减去 15*60 使用 date() 函数从秒回到日期格式。( [http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T17:34:36.243

```
var dateStr = '18-07-2012 15:13:54'//Day-Month-Year
var dateArray = dateStr.split('-')
var d1 = new Date(dateArray[1]+'-'+dateArray[0]+'-'+dateArray[2])

var dateStr2 = '18-07-2012 14:10:54'//Day-Month-Year
var dateArray2 = dateStr2.split('-')
var d2 = new Date(dateArray2[1]+'-'+dateArray2[0]+'-'+dateArray2[2])

var minutes = (d1-d2)/1000/60 
```

-编辑; 修改后的代码如下： -

```
function timeDiff(date1, date2){
//date format: Day-Month-Year
var dateArray = date1.split('-')
var d1 = new Date(dateArray[1]+'-'+dateArray[0]+'-'+dateArray[2])

var dateArray2 = date2.split('-')
var d2 = new Date(dateArray2[1]+'-'+dateArray2[0]+'-'+dateArray2[2])

var minutes = (d1-d2)/1000/60
return minutes;
}

if(timeDiff('18-07-2012 15:13:54', '18-07-2012 14:59:54')<=15){
alert('popup')
} 
```

# oracle - should I learn oracle 10g or 11g ?Is oracle 10g outdated now?

> ID：11546931
> 
> 赞同：0
> 
> 时间：2012-07-18T17:23:35.727
> 
> 标签：oracle

I am engineering student.

Should I learn oracle 10g or oracle 11g now for getting a certification after 1 year?

Is oracle 10g outdated now?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:06:53.337

我建议您加强 RDBMS 概念，而不是专注于“是 10g 还是 11g？” 这些版本的数据库最好在大型企业环境中学习（在不久的将来您将有机会学习），RDBMS 知识将帮助您完成每一步，无论是 10g 或 11g 还是任何未来版本。

# objective-c - 表格视图单元格中的交替外观

> ID：11546934
> 
> 赞同：-2
> 
> 时间：2012-07-18T17:23:47.330
> 
> 标签：objective-c, ios

是否可以从 web 服务器中为 tableview 的每个第 5 行提取图像，而不会破坏 cellforrowatindexpath 方法的正常运行？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:29:19.270

检查`tableView:cellForRowAtIndexPath:`是否`indexPath.row`可被 5 整除，如果为真则以不同方式处理单元格（例如其他背景图像，...）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T19:44:38.040

示例代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Here is the magic.
    if (!indexPath.row % 5 == 0)
    {
        // Do your usual code
    }
    else
    {
        // Do alternate code (loading background image)
    }
    return cell;
} 
```

# mysql - SQL: Calculate the change in values over an n-day period

> ID：11546935
> 
> 赞同：2
> 
> 时间：2012-07-18T17:23:47.983
> 
> 标签：mysql, sql

All,

I have a table that looks like this:

```
Date     Pitcher        WHIP
-------- -------------- -----
7/4/12   JACKSON, E     1.129
7/4/12   YOUNG, C       1.400
7/4/12   CORREIA, K     1.301
7/4/12   WOLF, R        1.594
...
6/28/12  JACKSON, E     1.137
6/27/12  YOUNG, C       1.750
...
6/19/12  JACKSON, E     1.215
6/17/12  YOUNG, C       1.851 
```

I've set up a SQLFiddle here: [http://sqlfiddle.com/#!2/addfe/1](http://sqlfiddle.com/#!2/addfe/1)

In other words, the table lists the starting pitcher for every game of the MLB season, along with that pitcher's current WHIP (WHIP is a measure of the pitcher's performance).

What I'd like to obtain from my query is this: how much has that pitcher's WHIP changed in the last 30 days?

Or, more precisely, how much has that pitcher's WHIP changed since his most recent start that was at least 30 days ago?

So, for example, if E. Jackson's WHIP on 7/4/12 was 1.129, and his WHIP on 6/3/12 was 1.500, then I'd like to know that his WHIP changed by -0.371.

This is easy to figure out for any individual, but I want to calculate that for all pitchers, on all dates.

One of the things that makes this tricky is that there isn't data for every date. For example, if E. Jackson pitched on 7/4/12, the most recent start that's at least 30 days ago might be on 5/28/2012.

However, for K. Correia, who also pitched on 7/4/12 - his most recent start that's at least 30 days ago might be 5/26/2012.

I'm assuming that I need to join the table to itself, but I'm not sure how to do it.

Here's my first stab:

```
select
    t1.home_pitcher,
    t1.date,
    t1.All_starts_whip,
    t2.All_starts_whip
from
    mlb_data t1
join
    mlb_data t2
ON
    t1.home_pitcher = t2.home_pitcher
and
    t2.date = (select max(date) from mlb_data t3 where t3.home_pitcher = t1.home_pitcher and t3.date < date_sub(t1.date, interval 1 month)) 
```

This seems to work (and hopefully illustrates what I'm trying to capture), but takes HORRENDOUSLY long - my table goes back a few seasons, and has about 6,250 rows - and this query took 7,289 seconds (yes, that's correct - more than 2 hours). I'm sure this is a classic case of the absolute worst way to right a query.

[UPDATE] Some clarification...

The query should produce a value for EACH pitcher for EACH start.

In other words, if E. Jackson pitched in 10 games, he'd be listed in the result set 10 times.

```
Date     Pitcher        WHIP  WHIP_30d_ago
-------- -------------- ----- ------------
7/4/12   JACKSON, E     1.129 1.111
...
5/18/12  JACKSON, E     1.111 2.222
...
4/14/12  JACKSON, E     2.222 3.333 
```

In other words, I'm looking for a 30-day trailing WHIP for each start.

Many thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:45:14.650

我不认为你需要一个自我加入..你可以使用这样的子查询：

```
select
        t1.home_pitcher,
        t1.date,
        t1.All_starts_whip,
       (SELECT t2.all_starts_whip FROM mlb_data t2 
        WHERE 
        t2.date < date_sub(t1.date, interval 1 month) 
        AND t2.home_pitcher=t1.home_pitcher 
        ORDER   BY t2.date DESC LIMIT 1) as previous_whip,
        t1.all_starts_whip - previous_whip 

    FROM 
        mlb_data t1 
```

因此，对于每个玩家的每个鞭子得分，您可以获得上个月的最新得分并计算进化。

检查出来：[http](http://sqlfiddle.com/#!2/addfe/8) ://sqlfiddle.com/#!2/addfe/8 （有些条目没有上个月的条目来计算差异，所以它是空的）

# r - Calculate relative frequency of list terms and its sum in R?

> ID：11546941
> 
> 赞同：1
> 
> 时间：2012-07-18T17:24:09.013
> 
> 标签：r, list, frequency

I have data saved in a long list. This is an example of the first six lines / records:

```
A <- list(c("JAMES","CHARLES","JAMES","RICHARD"),  
    c("JOHN","ROBERT","CHARLES"),  
    c("CHARLES","WILLIAM","CHARLES","MICHAEL","WILLIAM","DAVID","CHARLES","WILLIAM"),  
    c("CHARLES"),  
    c("CHARLES","CHARLES"),  
    c("MATTHEW","CHARLES","JACK")) 
```

Now I would like to calculate the relative frequency with which each unique term occurs in each line / record.
Based on my example I would like to achieve an output similar to this:

```
[1] "JAMES" 0.5 "CHARLES" 0.25 "RICHARD" 0.25  
[2] "JOHN" 0.3333333 "ROBERT" 0.3333333 "CHARLES" 0.3333333  
[3] "CHARLES" 0.375 "WILLIAM" 0.375 "MICHAEL" 0.125 "DAVID" 0.125  
[4] "CHARLES" 1  
[5] "CHARLES" 1  
[6] "MATTHEW" 0.3333333 "CHARLES" 0.3333333 "JACK" 0.3333333 
```

So far I only know how to calculate the relative frequency of individual terms, unfortunately; e.g.:

```
> (sapply(A, function(x)sum(grepl("JAMES", x))))/sapply(A, length)  
[1] 0.5 0.0 0.0 0.0 0.0 0.0 
```

My example contains only ten unique terms, of course. But my actual data contains almost 200 unique terms so the approach above wouldn't be feasible. Therefore I'm looking for a different way which would allow me to calculate the relative frequency of all of the terms in just one go, please.
In addition to that I would like to sum up these relative frequencies for each unique name over all lines / records.
Based on my example above I would like to achieve an output similar to this one, please:

```
[1] "JAMES" 0.5  
[2] "CHARLES" 3.291667  
[3] "RICHARD" 0.25  
[4] "JOHN" 0.3333333  
[5] "ROBERT" 0.3333333  
[6] "WILLIAM" 0.375  
[7] "MICHAEL" 0.125  
[8] "DAVID" 0.125  
[9] "MATTHEW" 0.3333333  
[10] "JACK" 0.3333333 
```

Thank you very much in advance for your consideration!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:30:05.120

你可以使用`?table`and `?aggregate`：

```
BL <- lapply(A, function(x)table(x)/length(x))
## turn list into a vector
B <- unlist(BL)

## sum all frequencies
aggregate(B, list(names(B)), FUN=sum)
#   Group.1         x
#1  CHARLES 3.2916667
#2    DAVID 0.1250000
#3     JACK 0.3333333
#4    JAMES 0.5000000
#5     JOHN 0.3333333
#6  MATTHEW 0.3333333
#7  MICHAEL 0.1250000
#8  RICHARD 0.2500000
#9   ROBERT 0.3333333
#10 WILLIAM 0.3750000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:30:27.103

我认为这就是你想要的：

```
lapply(A,function (x) table(x)/length(x)) 
```

# postgresql - Heroku iOS Tutorial using Postgres

> ID：11546942
> 
> 赞同：0
> 
> 时间：2012-07-18T17:24:11.440
> 
> 标签：postgresql, heroku, osx-lion

I am following the tutorial on [Heroku](https://devcenter.heroku.com/articles/ios-photo-sharing-geo-location-service) on how to use heroku on iOS. The example uses a postgres database to store images and geolocation. I downloaded the postgres app on my Lion OSX and it says the postgres server running correctly. Now I am stuck on this step:

> Update the config/database.yml file to reference the correct database user and password for >the development and test environments. Then create the local development database and run the >migrations.

```
$ bundle exec rake db:create db:migrate
==  CreatePhotos: migrating ===========
-- create_table(:photos)
... 
```

But I receive the following error:

> could not connect to server: Permission denied Is the server running locally and accepting connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? ....

What did I do wrong? I tried to manually create the postgres database using the createdb command but I go the same connectivity error.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:03:39.100

当 PostgreSQL 未在指定的套接字上侦听时，会发生此错误。原因可能包括（为了检查）

1.  PostgreSQL 未正确安装

2.  PostgreSQL 停止或未运行。

3.  PostgreSQL 监听不同的套接字或不同的目录。此信息在 postgresql.conf 中指定。

# ruby-on-rails - simple posts list with buttons

> ID：11546943
> 
> 赞同：0
> 
> 时间：2012-07-18T17:24:14.990
> 
> 标签：ruby-on-rails, ruby

Please help me to understand one dumb thing. In one hand I have user with many posts, in other hand I have list with posts (every post have button) in view. On button I need to call custom method on current post with parameters. How to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:59:54.527

尝试这个：

```
link_to 'Submit', model_path(:query => "value"), :remote => true, :method => :post 
```

# java - remove all from beginning of LinkedList

> ID：11546949
> 
> 赞同：2
> 
> 时间：2012-07-18T17:24:42.493
> 
> 标签：java, linked-list, java-7

I was looking through the [LinkedList API](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#method_summary) for Java 7 and noticed something curious. there does not appear to be a "remove before (or after)" type of method. For example, If I have a 100 element LinkedList, and I want to remove the first 20 elements, Java seems to force you to remove them one at a time, rather than moving the start pointer to the 21st element and deleting the link between 20 and 21\. It seems like this is an operation that can be done in O(1) time, instead of O(n) time as Java seems to force you to do it.

Am I missing something here, or is it just a glaring hole in Java?

**EDIT**

I am aware of the `sublist(int, int)` method in the List interface. I still think that this will be slightly less efficient than the generic "chop off the first (or last) n" use case.

**EDIT 2**

Touche to everyone who pointed out that finding the nth element is not O(1). Regardless of the ease of chopping off the first n-1 elements, it still takes O(n) time to find the nth.

However, as Dilum Ranatunga points out, there is the possibility that an iterator already exists at the given position. In this case, it would still be useful to say "I am here, remove all before me".

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T17:28:41.180

It's still an O(n) operation no matter what you do.

You don't have direct access to the individual nodes of the linked list, so you would have to traverse the list first to get access to the 21st node. Once you were there it would be O(1) to 're-head' the list, but it's still O(n) for the entire, atomic operation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:27:16.360

LinkedList inherits a sublist method from List interface. Information can be found here [http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList(int](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList(int), int)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:28:10.283

You can call `list = list.subList(21, list.size())` to get a [sublist](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html#subList%28int,%20int%29) from 21 to the end of the list.

The operation is O(1), but you do not get a `LinkedList` back, you get an `AbstractList.SubList` which acts like a wrapper class for the original `LinkedList`, delegating methods with the sublist's offsets.

Although this is constant time, it is important to note this is not a new list. If your list size went from n to m, subsequent linear-time methods called on the list will still run in O(n) not in O(m).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T17:29:53.743

It is impossible to immediately jump to the Nth element because each prior node contains the address of the Node.next (the next node in the chain). So it has to naturally traverse 20 elements causing O(n) runtime.

For example:

[Node 1, address of Node 2] -> [Node 2, address of node 3] -> etc... -> [Node 20, address of Node 21]

You cannot get the "address of Node 21" without getting to the Node 20 first, and to do so you need to "address of Node 20" from Node 19 and so on.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T17:30:14.457

What is your algorithm for finding item n in O(1) time? This would still be an O(n) operation to locate the nth item and set it as the head. You would save some intermediate pointer assignments compared to 20 removes, but not a huge gain.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T17:30:42.270

Java's `java.util.List` defines the API [`listIterator()`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#listIterator%28%29). `ListIterator` has [`previous()`](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html#previous%28%29).

So the idiom you want is:

```
// some loop construct {
  listIter.previous();
  listIter.remove();
} 
```

# wordpress - Where do I upload bbPress theme when installed as WordPress plugin?

> ID：11546955
> 
> 赞同：1
> 
> 时间：2012-07-18T17:25:08.737
> 
> 标签：wordpress, bbpress

I have a WordPress installation with bbPress plugin installed. I'm wondering where shall I upload additional WordPress themes so they will not be overwritten with bbPress upgrades?

The most straitforward guess would be wp-content/plugins/bbpress/bbp-themes/ dir, however there's an index.php inside that states:

```
<?php

/**
 * Do not put custom themes here. They will be deleted on bbPress updates.
 *
 * Keep custom bbPress themes in /wp-content/themes/
 */

?> 
```

ok. I uploaded theme there but I can't find a place to switch theme. Went to Admin --> Settings --> Forums but nothing there. I even tried to create a bbp-themes dir inside of wp-content/themes and upload theme there but still no results.

Any help will be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:11:02.380

按照说明将主题添加到 wp-content/themes/，然后在正常的外观 > 主题部分中选择它。

您需要确保您的主题与 bbPress 兼容。它需要 bbPress 文件和 functions.php 文件中的以下内容。

```
add_theme_support( 'bbpress' ); 
```

# iphone - iPhone calendar EKEvent

> ID：11546959
> 
> 赞同：1
> 
> 时间：2012-07-18T17:25:15.307
> 
> 标签：iphone, ios, xcode, calendar, ekevent

I am currently trying to create an iPhone calendar app. In order to make sure it syncs with the existing iPhone calendars, I am using the `EKEvent` toolkit.

However, the events I will be storing will have more properties than the ones `EKEvent` allows for- e.g., my events will not just have title, details and the few other categories that are allowed for; they will also have themes, priorities...

Thus, when I load the `EKEventStore` every time my calendar starts up, this information will not be contained in the `EKEvents` that are loaded.

How can I associate this information to the existing `EKEvents` so that whenever my calendar is loaded, these additional properties are also loaded?

I would use the `eventIdentifier` but the iPhone documentation says that "If the calendar of an event changes, its identifier most likely changes as well." If I am reading this correctly, this means that I cannot consistently use `eventIdentifier` to identify an event..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:24:13.197

我将使用该`notes`属性并设置一个您可以稍后解析的字符串。由于 EKCalendarItem 是 EKEvent 的超类，它的一些属性`EKEvent`继承自`EKCalendarItem`. （[这里的文档](https://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKCalendarItemClassRef/Reference/Reference.html)）

但是，您仍然可以在 上“设置”注释`EKEvent`，即使 notes 不再是 的属性`EKEvent`。（去搞清楚）

因此，根据您的问题，我可能会为您的每个附加（自定义）属性设置一个整数，就像这样..

在创建事件的视图控制器代码中： - 为每个自定义选项设置一个整数。（优先级、主题等）

int优先级= 0；

```
 EKEvent *newEvent = [EKEvent eventWithEventStore:yourEventStore];

    [newEvent setCalendar:yourCalendar];

    if (priority == 0) {
        newEvent.notes = @"0"
    }

    newEvent.title = @"YourTitle";
    newEvent.startDate = yourStartDate;
    newEvent.endDate = yourEndDate;

    [youreventStore saveEvent:newEvent span:EKSpanThisEvent commit:YES error:nil]; 
```

然后，如果您想检查/转换自定义属性，只需检查事件的注释，无论何时使用`characterAtIndex`或从注释中创建子字符串并将其与另一个字符串进行比较。

# c - 当我使用这样的头文件时，如何停止#include 冗余头文件？

> ID：11546964
> 
> 赞同：3
> 
> 时间：2012-07-18T17:25:41.900
> 
> 标签：c, compiler-construction

所以我仍然习惯于模块化编程，并希望确保我遵守最佳实践。如果我有下面的两个模块头文件，`#included`每个文件的头文件（例如“mpi.h”）会被包含多次吗？有没有适当的方法来解决这个问题？

此外，我的模块标题通常看起来像这些示例，因此任何其他批评/指针都会有所帮助。

```
/* foo.h */
#ifndef FOO_H
#define FOO_H

#include <stdlib.h>
#include "mpi.h"

void foo();

#endif 
```

和

```
/* bar.h */
#ifndef BAR_H
#define BAR_H

#include <stdlib.h>
#include "mpi.h"

void bar();

#endif 
```

并使用示例程序：

```
/* ExampleClient.c */
#include <stdlib.h>
#include <stdio.h>
#include "mpi.h"
#include "foo.h"
#include "bar.h"

void main(int argc, char *argv[]) {
    foo();
    MPI_Func();
    bar();
    exit(0)
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T18:47:33.360

“包括”是什么意思？预处理器语句`#include file`复制内容`file`并用这些内容替换语句。不管发生这种情况

如果“包含”是指“这些文件中的语句和符号将被多次解析，从而导致警告和错误”，那么不，包含防护将阻止这种情况。

如果“包含”是指“编译器的某些部分将读取这些文件的某些部分”，那么是的，它们将被包含多次。由于包含保护，预处理器将读取文件的第二个包含并用空行替换它，这会产生很小的开销（文件已经在内存中）。现代编译器（GCC，不确定其他编译器）可能会被优化以避免这种情况，但是请注意，该文件在第一遍包含保护，并简单地丢弃未来的包含，消除开销 - 不要担心这里的速度，清晰度和模块化更为重要。当然，编译是一个耗时的过程，但`#include`您最不必担心。

为了更好地理解包含守卫，请考虑以下代码示例：

```
#ifndef INCLUDE_GUARD
#define INCLUDE_GUARD
// Define to 1 in first block
#define GUARDED 1
#endif

#ifndef INCLUDE_GUARD
#define INCLUDE_GUARD
// Redefine to 2 in second block
#define GUARDED 2
#endif 
```

在（第一次）预处理之后，将`GUARDED`定义什么？如果确实定义了它们的参数，则预处理器语句`#ifndef`或其等效语句`#if !defined()`将返回。`false`因此，我们可以得出结论，第二个`#ifndef`将返回 false，因此在预处理器的第一次传递之后，只有 GUARDED 的第一个定义将保留。程序中剩余的任何实例`GUARDED`将在下一次通过时被 1 替换。

在您的示例中，您有一些稍微（但不是很多）更复杂的东西。展开 ExampleClient.c 中的所有`#include`语句将得到以下源：（注意：我缩进了它，但这不是标题的正常样式，预处理器不会这样做。我只是想让它更具可读性）

```
/* ExampleClient.c */
//#include <stdlib.h>
  #ifndef STDLIB_H
    #define STDLIB_H
    int abs (int number); //etc.
  #endif

//#include <stdio.h>
  #ifndef STDLIB_H
    #define STDLIB_H
    #define NULL 0 //etc.
  #endif

//#include "mpi.h"
  #ifndef MPI_H
    #define MPI_H
    void MPI_Func(void);
  #endif

//#include "foo.h"
  #ifndef FOO_H
    #define FOO_H
    //#include <stdlib.h>
      #ifndef STDLIB_H
        #define STDLIB_H
        int abs (int number); //etc.
      #endif
    //#include "mpi.h"
      #ifndef MPI_H
        #define MPI_H
        void MPI_Func(void);
      #endif
    void foo(void);
  #endif

//#include "bar.h"
  #ifndef BAR_H
    #define BAR_H
    //#include <stdlib.h>
      #ifndef STDLIB_H
        #define STDLIB_H
        int abs (int number); //etc.
      #endif
    //#include "mpi.h"
      #ifndef MPI_H
        #define MPI_H
        void MPI_Func(void);
      #endif
    void bar(void);
#endif

void main(int argc, char *argv[]) {
    foo();
    MPI_Func();
    bar();
    exit(0); // Added missing semicolon
} 
```

浏览该代码并注意何时执行各种定义。结果是：

```
#define STDLIB_H
int abs (int number); //etc.
#define STDLIB_H
#define NULL 0 //etc.
#define MPI_H
void MPI_Func(void);
#define FOO_H
void foo(void);
#define BAR_H
void bar(void); 
```

关于您对其他批评/指针的请求，为什么您在所有标题中都#include stdlib.h 和 mpi.h？我知道这是一个精简的例子，但一般来说，头文件应该只包含*声明*其内容所必需的文件。如果您使用 stdlib 中的函数或在 foo.c 或 bar.c 中调用 MPI_func()，但函数声明很简单`void foo(void)`，则不应将这些文件包含在头函数中。例如，考虑以下模块：

富.h：

```
#ifndef FOO_H
#define FOO_H
void foo(void);
#endif 
```

富.c：

```
#include <stdlib.h>  // Defines type size_t
#include "mpi.h"     // Declares function MPI_func()

#include "foo.h"     // Include self so type definitions and function declarations
                     // in foo.h are available to all functions in foo.c

void foo(void);
  size_t length;
  char msg[] = "Message";

  MPI_func(msg, length);
} 
```

在这个例子中，实现`foo()`需要来自 stdlib 和 mpi 的东西，但定义不需要。如果 foo() 返回或需要一个`size_t`值（stdlib 中的 typedef'ed），您需要在 .h 文件中 #include stdlib。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:34:54.090

大多数情况下没有，有一点“是”。您的头文件将被多次“读取”，但在第二次及以后的时间，预处理器将切断所有内容。这意味着它不会浪费编译器的时间，并且块`#include`内的 s`#ifdef`只会执行一次（每个头文件）。

这是一个很好的做法。我自己，我还在 s 之前添加了以下行`#ifdef`：

```
#pragma once 
```

当特定编译器支持时，它保证文件实际上只被读取一次。我认为这种方式更优化一些。

所以，总结一下：

1.  像您使用的标头保护可以防止编译器多次解释标头内容，但可能会导致预处理器多次解析它（这不是一个大问题），
2.  `#pragma once`导致特定的头文件只被读取一次。

两者同时使用时，`#pragma once`如果编译器支持，则应该生效；如果没有，则将应用标头守卫。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:35:28.417

1）好：你有一个[“包括警卫”](http://en.wikipedia.org/wiki/Include_guard)。“stdlib.h”、“mpi.h”和“void foo()”只有在你*第*一次#include“foo.h”时才会被编译器看到

```
/* foo.h */
#ifndef FOO_H
#define FOO_H

#include <stdlib.h>
#include "mpi.h"

void foo();

#endif 
```

2) BAD:*每次*你使用它都会#include "foo.h"的*全部内容：*

 *```
/* foo.h */
#include <stdlib.h>
#include "mpi.h"

void foo(); 
```

3) 通过#include”，我的意思是“每个编译单元一次”（即*相同*的.c 源文件）。

这主要是“保护”一个标题（foo.h）调用另一个可能递归调用第一个标题的标题（“bar.h）。

#includes foo.h 的每个不同的编译单元总是会得到“stdlib.h”、“mpi.h”和“void foo()”。关键是它们只会被看到一次 - 而不是在同一个编译单元中多次出现。

4）这都是“编译时”。它与库（即“链接时间”）无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T17:35:50.103

是的，`mpi.h`将被多次包含（如将`stdlib.h`）；如果`mpi.h`has 包括类似于`foo.h`and的守卫`bar.h`，那么这将不是问题。*

# raphael - 拉斐尔如何访问另一个绘图区域或画布中的元素

> ID：11546965
> 
> 赞同：1
> 
> 时间：2012-07-18T17:25:44.137
> 
> 标签：raphael

我有两个绘图区域，例如`paper = raphael(...)`和`paper1= raphael(...)`。如何访问另一个画布的元素...我有一个路径`paper1`，我想从`paper`. 有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:27:15.330

创建一个包含两篇论文的元素并从那里访问它们……两篇不同的论文之间不会有任何魔力……或者将每篇论文添加到另一篇论文中，所以你可以这样做：

```
var myCurrentPaper = myElementInPaperOne.paper;
var myOtherPaper = myCurrentPaper.paperTwoReference; 
```

# groovy - 这个未知来源错误是什么意思？

> ID：11546969
> 
> 赞同：1
> 
> 时间：2012-07-18T17:26:01.310
> 
> 标签：groovy

我对 Groovy 很陌生。我正在用它的属性求解一个斐波那契数列。我有一个像这样的常规代码：

```
a = new BigInteger[2][2]
a[0][0] = 1
a[0][1] = 1
a[1][0] = 1
a[1][1] = 0
temp = new BigInteger[2][2]
temp = a
def testFun(def a,BigInteger n) {
    if(n == 1)
        return a
    b = new BigInteger[2][2]
    def sum = 0
    for ( c = 0 ; c < 2 ; c++) {
                for ( d = 0 ; d < 2 ; d++ )
                {   
                   for ( k = 0 ; k < 2 ; k++ )
                   {
                      sum = sum + temp[c][k] * a[k][d];
                   }
           b[c][d] = sum
               sum = 0;
            }
         }
        testFun(b,n-1)
}
c = new BigInteger[2][2]
BigInteger n = 90
if( n % 2 == 0 )
{   
        c =  testFun(a,n.divide(2))
        temp = c
        c = testFun(c,2)
}
println c[0][1] 
```

我得到的答案如下：

```
2880067194370816120 
```

但是当我将 n 值更改为说`5090`时，我得到一个像这样的大错误：

```
at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source)
    at fibb.testFun(fibb.groovy:24)
    at fibb$testFun.callCurrent(Unknown Source) 
```

什么地方出了错？为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:48:01.967

尽管我本来希望在该堆栈跟踪中看到 StackOverflowException，但也许您只是将其剪掉了。我认为您遇到了最大递归深度，这就是为什么它适用于较小的值`n`但会因较大的值而失败。您想研究 Groovy 1.8 的一部分 Closure trampolining。[这是发行说明](http://groovy.codehaus.org/Groovy+1.8+release+notes#Groovy18releasenotes-Closuretrampoline)的相关部分。

还有一个类似的[问题](https://stackoverflow.com/questions/7374887/tail-recursion-with-groovy)，应该可以帮助您。

By the way, the reason it says "Unknown Source" in the stack trace is because Groovy doesn't have its source available to tell you which line it was on - it's a red herring.

# ios - NSFileManager:enumeratorAtURL: 返回不同形式的 URL 到 NSFileManager:URLForDirectory

> ID：11546974
> 
> 赞同：11
> 
> 时间：2012-07-18T17:26:20.197
> 
> 标签：ios, cocoa-touch, nsfilemanager

如果我使用`NSFileManager:URLForDirectory`以下 URL 获取沙盒的应用程序支持目录：

```
file://localhost/var/mobile/Applications/EA80DE91-394C-4EAB-B269-1081C859BB0F/Library/Application%20Support/ 
```

但是，如果我`NSFileManager:enumeratorAtURL`用来搜索目录，我会得到以下形式的 URL：

```
file://localhost/private/var/mobile/Applications/EA80DE91-394C-4EAB-B269-1081C859BB0F/Library/Application%20Support/ 
```

这给我带来了问题，因为我正在执行 URL 搜索/替换操作，并且差异导致不匹配。我之前在其他地方遇到过这种差异，然后我的解决方案是使用 url 的路径（使用`NSURL:path`）而不是原始 URL，但是在这种情况下这不起作用，因为生成的路径是：

```
/var/mobile/Applications/EA80DE91-394C-4EAB-B269-1081C859BB0F/Library/Application Support
/private/var/mobile/Applications/EA80DE91-394C-4EAB-B269-1081C859BB0F/Library/Application Support/ 
```

我想要做的是：我的应用程序支持目录中可以有任意数量的文件，名称相同但位置不同，我需要提取相对于应用程序支持目录的路径。即如果我有以下

```
/Application Support/abc/file.dat
/ApplicationSupport/abc/def/file.dat 
```

我希望能够提取“abc”和“abc/def”。我正在使用以下代码执行此操作：

```
NSArray *keys = [NSArray arrayWithObject:NSURLIsRegularFileKey];
NSDirectoryEnumerator *dirEnumerator = [self.fileManager enumeratorAtURL:[MyManager appSupportDirectory]
                                          includingPropertiesForKeys:keys
                                                             options:NSDirectoryEnumerationSkipsHiddenFiles
                                                        errorHandler:nil];
    for (NSURL *url in dirEnumerator)
    {
        if ( NSOrderedSame == [[url lastPathComponent] caseInsensitiveCompare:kFilename])
        {
            NSString *appSupportPath = [[MyManager appSupportDirectory] path];
            NSString *pathToFile = [url path];
            pathToFile = [pathToFile URLByDeletingLastPathComponent];
            NSString *subPath = [pathToFile  stringByReplacingOccurrencesOfString:appSupportPath withString:@""]; 
```

(MyManager:appSupportDirectory 调用 NSFileManager:URLForDirectory: 使用 NSApplicationSupportDirectory)

这在模拟器上运行良好，`enumeratorAtURL:`并`URLFOrDirectory:`返回相同的路径，但由于它们在硬件上的差异，它失败了。

有没有办法获取`enumeratorAtURL:`和`URLForDirectory:`返回相同的路径，或者如果没有，是否有另一种优雅的方式将子路径提取到我目前正在做的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T00:11:05.530

`var`符号链接到`/private/var/`

打电话`[url URLByResolvingSymlinksInPath]`修复它。

请参阅[iOS 文件路径上的 /private 前缀表示什么？](https://stackoverflow.com/questions/14992834/what-does-the-private-prefix-on-an-ios-file-path-indicate/16026416)进行更多讨论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T19:07:45.577

我不得不改为这样做：

```
NSDirectoryEnumerator *dirEnum = [self.fileManager enumeratorAtPath: [NSHomeDirectory() stringByAppendingPathComponent:@"/Library/Application Support/"]]; 
```

# php - 测试网站带宽

> ID：11546981
> 
> 赞同：0
> 
> 时间：2012-07-18T17:26:49.250
> 
> 标签：php, bandwidth

我想制作一个脚本来提高我网站的带宽，以检查每月津贴是否正常工作。

```
<?php
for($i=0;$i>2000$i++) {
  //largest jpg on the website
  file_put_contents("tmp.jpg", file_get_contents("http://someurl/tmp.jpg"));
  unlink("tmp.jpg");
}
?> 
```

上面的代码是否也会以我想要的方式工作，或者因为它是同一个文件，服务器不会再次“下载”它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:29:49.017

根据[这里](http://forums.digitalpoint.com/showthread.php?t=291686)的第二篇文章，`file_get_contents`不缓存 PHP 文件。我没有理由认为它应该。

# php - 更改原生 joomla 模块文章类别中的 #_content

> ID：11546985
> 
> 赞同：0
> 
> 时间：2012-07-18T17:27:05.283
> 
> 标签：php, joomla, joomla2.5

我想修改一个显示类别文章的本机 joomla 模块。我希望它显示其他前缀表的文章（两个 joomla 网站都在同一个数据库上）。

请注意，我已经查看了可用的扩展，但它们都不适合。

我确实尝试通过更改`#__tablename`with来修改 router.php`rsc_tablename`

但它并没有改变任何东西，显示的文章仍然来自实习生表（ARCS_tables）

* * *

ps：原生模块的helper.php中没有arsc_tables和#_tables

* * *

# javascript - Slickgrid：复选框+分页：所有页面的getSelectedRows，而不仅仅是当前页面

> ID：11546987
> 
> 赞同：0
> 
> 时间：2012-07-18T17:27:12.123
> 
> 标签：javascript, jquery, jquery-plugins, slickgrid

我有一个网格，带有复选框插件和分页。

我只能为我所在的当前页面获取选定的行，但不能获取所有行的选定行。怎么可能做到这一点？

`dataView.syncGridSelection(grid, true)`我搜索代码，尝试找到全局数组 slickgrid 在进入新页面（

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T18:12:26.117

您可以订阅该`onPagingInfoChanged`事件 - 当您导航到新页面时触发该事件 - 然后将该页面中的选定行存储到一个全局数组中以供您参考。

```
dataView.onPagingInfoChanged.subscribe(function(e,pagingInfo) {
  console.log(grid.getSelectedRows());
  // add selected rows to a global array
} 
```

注意：除您提到的内容外，`grid.getSelectedRows()`返回**相对于可见行**的行号。因此，第 2 页上的行将从 0 开始。我建议改为获取`id`行的 并将其存储在全局数组中（你知道，数据视图中的每一行都应该有一个，并且是唯一的）。

希望这能给你一个开始。让我知道这是否有帮助！

# objective-c - NSDate 上的核心数据保存异常

> ID：11546990
> 
> 赞同：0
> 
> 时间：2012-07-18T17:27:30.103
> 
> 标签：objective-c, macos, cocoa, core-data, osx-snow-leopard

我有这个 accessDate 字段，在数据模型中设置为日期类型。我`object.accessDate = [NSDate date]`在访问它时正在更新 accessDate 。

它是一个多线程应用程序，我已经完成了 2 个实现，一个具有共享的 NSManagedObjectContext 和适当的锁，另一个具有多个上下文和适当的合并，两者都偶尔抛出此异常。

我在进程环境中设置了 NSZombieEnabled。我有点没有想法，所以我很高兴听到一些新的建议。

编辑：我忘了补充说它只发生在 Mac OS X 10.6

例外是：

```
(gdb) po $rax
-[__NSCFDate longLongValue]: unrecognized selector sent to instance 0x16ddf3020 
```

该对象看起来并不那么可疑：

```
(gdb) po 0x16ddf3020
2012-07-18 18:11:35 +0200
(gdb) po [0x16ddf3020 class]
__NSCFDate 
```

和回溯：

```
(gdb) bt
#0  0x00007fff8973deea in objc_exception_throw ()
#1  0x00007fff803bc110 in -[NSObject(NSObject) doesNotRecognizeSelector:] ()
#2  0x00007fff803348ef in ___forwarding___ ()
#3  0x00007fff80330a38 in __forwarding_prep_0___ ()
#4  0x00007fff831ad540 in -[NSSQLiteConnection execute] ()
#5  0x00007fff831f8e85 in -[NSSQLiteConnection updateRow:] ()
#6  0x00007fff831f801b in -[NSSQLConnection performAdapterOperation:] ()
#7  0x00007fff831f7f50 in -[NSSQLConnection performAdapterOperations:] ()
#8  0x00007fff831f7acb in -[NSSQLCore _performChangesWithAdapterOps:] ()
#9  0x00007fff831f680b in -[NSSQLCore performChanges] ()
#10 0x00007fff831f1259 in -[NSSQLCore saveChanges:] ()
#11 0x00007fff831b4c8b in -[NSSQLCore executeRequest:withContext:] ()
#12 0x00007fff831b4051 in -[NSPersistentStoreCoordinator(_NSInternalMethods) executeRequest:withContext:] ()
#13 0x00007fff831e8123 in -[NSManagedObjectContext save:] () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:36:32.450

答案是“适当的锁”毕竟不是真的。

我已将属性声明为

```
@property (nonatomic, retain) NSDate *accessDate; 
```

并在实现文件中

```
@dynamic accessDate; 
```

为了保证正确锁定属性，我会认为

```
- (id)primitiveValueForKey:(NSString *)key
{
  [[self managedObjectContext] lock];
  id value = [super primitiveValueForKey:key];
  [[self managedObjectContext] unlock];
  return value;
} 
```

就足够了，但实际上合成的 Core Data 属性根本不调用`primitiveValueForKey:`，这是我的一个误解，所以实际上访问没有正确锁定。答案可能是合成的 Core Data 访问器在 10.7 上锁定了上下文，而在 10.6 上没有。

所以我通过手动重新实现访问器解决了我的问题：

```
- (NSDate *)accessDate
{
  [self willAccessValueForKey:@"accessDate"];
  NSDate *date = [self primitiveValueForKey:@"accessDate"];
  [self didAccessValueForKey:@"accessDate"];  

  return date;
} 
```

# c# - 使用子字符串验证文本框 C# 的最后 4 位数字（vb6 Right 函数）

> ID：11546992
> 
> 赞同：1
> 
> 时间：2012-07-18T17:27:35.033
> 
> 标签：c#, visual-studio-2010, vb6, vb6-migration

我正在尝试验证日期文本框以确保输入了正确的日期格式。

我转换了这个 vb6 代码：

```
If (IsDate(txtBirthDate)) And (IsNumeric(Right(txtBirthDate, 4)))) 
```

进入这个 C# 代码 -

```
int output = 1;
DateTime output2;

if ((! DateTime.TryParse(txtBirthDate.Text, out output2)) & (!int.TryParse((txtBirthDate.Text.Substring(txtBirthDate.Text.Length - 5)), out output))) 
{
    MessageBox.Show("error")
} 
```

我试图做的是确保日期文本框的最后 4 位数字是数字（年份 - 即 1990 年 5 月 10 日的 1990 年），如果它不是数字，则显示错误。尽管由于日期格式中的“/”，我无法验证所有内容都是数字。

该代码不显示错误并构建。但是当我调试应用程序时，我收到一个错误。错误指出：

> 索引和长度必须引用字符串中的位置。
> 参数名称：长度。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T17:37:22.410

要检查日期是否为特定格式，请使用`DateTime.TryParseExact()`：

```
if (!DateTime.TryParseExact(output , "d/M/yyyy", CultureInfo.InvariantCulture, DateTimeStyles.None, out output2)) 
{
    MessageBox.Show("error")
} 
```

编辑：根据您的需要更改格式：

`"d/M/yyyy"`英国和`"M/d/yyyy"`美国

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T17:35:09.767

**编辑：**听起来你的错误原因是你的字符串太短了。在测试最后 4 个字符之前测试字符串长度。

其他三个问题：

1.  `And`C# 中的运算符是`&&`. 您正在使用`&`which 是按位运算符。
2.  要检查字符串的最后四个字符，您应该使用`.Length - 4`，而不是`5`。
3.  您在 C# 中否定返回值，但在 VB 中没有。要匹配 VB，请省略`!`. 但是，看起来这不是你*真正*想要做的。如果字符串不可解析为日期或年份部分不是 4 位数字，您似乎想要显示错误消息。在这种情况下，使用 an 或比较 ( `||`)：

```
if (!DateTime.TryParse(txtBirthDate.Text, out output2) ||
    txtBirthDate.Text.Length < 4 ||
    !int.TryParse((txtBirthDate.Text.Substring(txtBirthDate.Text.Length - 4)), out output))
{
    MessageBox.Show("error")
} 
```

请记住，`yyyy/M/d`它也可以解析为日期，包含 4 位数的年份，但您的测试会失败。那是你要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:37:58.243

```
 int result;
        if (int.TryParse(txtBirthDate.Text.Substring(test.LastIndexOf("/")), out result))
        {
           //its good
        }
        else
        {
            //its bad
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T17:41:43.247

从提供的错误来看，您似乎只需要进行长度检查以确保您可以处理代码。您还应该使用 && 而不是 &（或者在这种情况下可能是 ||）来确保布尔表达式在遇到真实状态时停止执行。

```
if (txtBirthDate.Text.Length < 5 ||
   (!DateTime.TryParse(txtBirthDate.Text, out output2) ||   
    !int.TryParse((txtBirthDate.Text.Substring(txtBirthDate.Text.Length - 5)), out output))) 
{
    MessageBox.Show("error")
} 
```

但是，这可能是使用正则表达式的好例子。

```
Regex reg = new Regex("^\d{2}/\d{2}/\d{4}$");

if (!reg.IsMatch(txtBirthDate.Text))
    MessageBox.Show("error"); 
```

可能需要调整正则表达式以匹配边缘情况（前导零、替代格式等）。

# php - 希望加快 Swf 到 Jpg 到 PDF 的转换？采取想法（无代码）

> ID：11546997
> 
> 赞同：1
> 
> 时间：2012-07-18T17:27:42.150
> 
> 标签：php, flash, pdf

试图找到一种有效的方法将其中的 50 个图形转换为图像。然后获取这些图像并将它们插入到服务器上构建的 PDF 中。

问题是这个过程在我们的服务器上花费了很长时间，因为服务器必须打开 50 个图表中的每一个，然后对每个图表进行快照以将它们转换为图像。然后服务器获取用户数据并制定包含这些图像的 PDF。

有什么解决办法吗？当前流程对我们的客户来说大约需要 10 分钟，有时在转换过程中会挂断。

我们目前使用 Fusion Charts 作为我们的图表/图表程序。PHP用于我们的编码和转换成PDF。

这个问题可能含糊不清或措辞可怕，但我不确定还能去哪里寻求解决方案，这个社区非常有帮助。