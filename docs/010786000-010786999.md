# StackOverflow 问答 10786000-10786999

# mysql - mysql内部连接与不同的表

> ID：10786000
> 
> 赞同：0
> 
> 时间：2012-05-28T14:08:13.743
> 
> 标签：mysql, join, inner-join

谢谢大家 :) 我有 4 个表格项目、要点、步骤和评论；

**项目** id名称描述

**点** id 名称 desc project_id

**步骤** id desc points_id

**评论** id desc steps_id

我写了这样的查询

```
SELECT * FROM Project 
INNER JOIN points ON points.project_id=Project.id
INNER JOIN steps ON steps.points_id=points.id
INNER JOIN comments ON comments.steps_id=steps.id
WHERE Project.id=333 
```

一个项目有很多点，点，有很多步骤，它有很多这样的评论，我想在一个查询中获得所有结果，否则需要很长时间才能得到结果:((我不知道我能做什么做:((

是这样的

```
**Project**
id :1,
name :"get",

**points**
id :1,
name :"points1", ///project "get"'s point
project_id : 1,
id :2,
name :"points2", ///project "get"'s point
project_id : 1,

**steps**
id :1,
name :"steps1", ///project "points2"'s step
points_id : 2,
id :2,
name :"steps2",///project "points2"'s step
points_id : 2,

**comments**
id :1,
name :"something", ///project "steps1"'s comment
steps_id : 1,
id :2,
name :"something",///project "steps2"'s comment
steps_id : 2, 
```

我想在一个查询中回显项目，它的点、点的步骤和步骤的注释，或者是否有另一种方法来解决这个问题？感谢您的支持：））））））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:12:16.897

首先，您的 sql 语法无效。你错过了关键字`FROM`。它应该是：

```
SELECT * 
FROM Table1
       INNER JOIN table2 ON table2.table1_id= table1.id
       INNER JOIN table3 ON table3.table2_id= table2.id
       INNER JOIN table4 ON table4.table3_id= table3.id
WHERE table1.ID = 333 
```

但我需要你想要的结果。您需要指定您的数据库架构和虚拟记录来完成您的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:20:06.573

您发布的查询中几乎没有遗漏：

1.  缺少`FROM`子句
2.  此外，每个连接都不正确`table2.table1_id= table1.id`......它应该是 `table2.table2_id= table1.id`（除非你的表设计是这样的）

所以，最终你的查询应该看起来像

```
SELECT *  FROM Table1        
INNER JOIN table2 ON table2.table2_id= table1.id        
INNER JOIN table3 ON table3.table2_id= table1.id        
INNER JOIN table4 ON table4.table4_id= table1.id 
WHERE table1.ID = 333 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:11:09.080

您目前正在通过过滤值为 333 的 ID 从 Table1 中检索所有列。其他表中的其他列呢？你期待什么样的结果？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:12:02.637

最后一个 INNER JOIN 有错字。表 2 应该是表 4。

# java - 准备拦截器如何在struts2中工作？

> ID：10786003
> 
> 赞同：2
> 
> 时间：2012-05-28T14:08:19.470
> 
> 标签：java, struts2, validation

请告诉我准备拦截器的工作原理我现在正在使用它并发现了意外行为

```
prepare()
validate()
execute() 
```

这些是方法

所以当我点击请求时，它调用了 3 次

```
prepare()
validate()
execute()
prepare()
validate()
execute()
prepare()
validate()
execute() 
```

我不知道它有什么问题根据我的理解，它应该只运行准备方法并显示预填充的数据表单，当用户单击提交时，它应该提交数据。

请解释

```
<action name="updatebusinessinfo" class="com.controller.UpdateBusinessDetails">

            <interceptor-ref name="params"/>
            <!--
            <interceptor-ref name="prepare"/> 

            <interceptor-ref name="basicStack"/>
            -->

            <interceptor-ref name="fileUpload">
                    <param name="maximumSize">2097152</param>
                    <param name="allowedTypes">image/png,image/gif,image/jpeg,image/pjpeg</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success">businessinfo.jsp</result>
            <result name="input">businessinfo.jsp</result>
            <result name="error">businessinfo.jsp</result>
        </action> 
```

是的朋友，我在 struts.xml 文件中犯了错误。现在请告诉我应该如何在`prepare()`方法中接收 url 参数？ [http://www.myweb.com/updatebusinessinfo/23](http://www.myweb.com/updatebusinessinfo/23)

我尝试关注但不工作

```
<action name="updatebusinessinfo/*" class="com.controller.UpdateBusinessDetails">
<param name="id">{1}</param>

            <interceptor-ref name="params"/>
            <!--
            <interceptor-ref name="prepare"/> 

            <interceptor-ref name="basicStack"/>
            -->

            <interceptor-ref name="fileUpload">
                    <param name="maximumSize">2097152</param>
                    <param name="allowedTypes">image/png,image/gif,image/jpeg,image/pjpeg</param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success">businessinfo.jsp</result>
            <result name="input">businessinfo.jsp</result>
            <result name="error">businessinfo.jsp</result>
        </action> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:13:53.970

只是一些关于这个问题的提示，对于寻找有关 Prepare Interceptor 信息的人们可能会派上用场：

*   struts2 中的 DefaultStack 已经包含了 Prepare 拦截器，因此如果将它们都包含在内，您将有 2 次调用 prepare()。通常你不希望那样。
*   在 DefaultStack 中，Prepare 拦截器在 Params 拦截器之前调用，因此您不会在 prepare() 方法中拥有请求参数。如果您想在此处使用参数做某事（例如，从带有 ID 的数据库中获取某些内容），您将无法做到。

在这里查看 struts2 中的基本/默认堆栈：http: [//struts.apache.org/release/2.0.x/docs/struts-defaultxml.html](http://struts.apache.org/release/2.0.x/docs/struts-defaultxml.html)

有一个“paramsPrepareParamsStack”在 Prepare 之前和之后使用 Params，所以你在 prepare() 中有你的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:36:13.270

好吧，如果没有任何进一步的信息，真的很难说出这是什么以及为什么会发生。我们仍然希望您提供有关您正在尝试做什么的更多详细信息？您点击的 URL、有关配置的信息以及有关您的应用程序的任何其他信息。

只有实现了 Preparable 接口时才会调用 Prepare 方法。简而言之，它是一种 init 方法，允许我们在实际繁重的工作开始之前进行任何初始化工作。

Prepare 方法将在您的 execute 方法之前被调用。我建议您了解 Prepare 方法的工作原理以及堆栈实际上是如何调用它的。

*   [准备拦截器](http://struts.apache.org/2.3.1/docs/prepare-interceptor.html)

以类似的方式，S2 将调用您的操作类的 validate 方法，如果您已实现它，并将根据方法内部提供的实现来验证数据。

这只是流程的概述，我仍然建议提供有关您的上下文的更多信息以获得任何好的输入。

# c# - .Net 库可以在运行时识别调用类吗？

> ID：10786005
> 
> 赞同：1
> 
> 时间：2012-05-28T14:08:27.490
> 
> 标签：c#, .net

我有一个日志库，它提供了一个 GUI，允许最终用户逐个类地启用/禁用日志记录。这允许支持人员让最终用户启用登录感兴趣的类以解决问题，而不会用我们不关心的垃圾淹没日志（还有更多内容，但对于这个问题来说应该足够了） . GUI 必须列出所有使用日志库的类。

我过去（在 Win32 应用程序中）使用的方法是提供一个注册函数，该库的用户将调用该函数来列出使用该库的类。这可行，但很痛苦且容易出错。鉴于我现在在 .NET 中工作，我希望自己能够在运行时以某种方式获取这些类的列表，这样我就可以在不需要注册的情况下填充 GUI。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:36:13.030

当我们记录时，每个想要记录的类都会为其类型创建一个静态记录器实例。通过这种方法，您可以在创建每个实例时对其进行跟踪，并允许用户根据需要禁用日志。

```
private static readonly ILog LOG = LogManager.GetLog(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType); 
```

但是，在加载类的静态成员之前，这自然不会被触发（我认为是在第一次访问类/类型时）所以我想你不会看到想要的类的完整列表是合理的登录，直到它们都被访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:20:22.860

您可以创建一个新的[StackTrace](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)（这不仅用于异常报告），但速度不是很快......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:21:40.830

是的，您可以使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.100%29.aspx)。以下代码列出当前加载的所有类（和结构）：

```
foreach(Assembly asm in AppDomain.CurrentDomain.GetAssemblies()
   foreach(Type type in asm.GetTypes()){   

   } 
} 
```

[AppDomain.CurrentDomain.GetAssemblies()](http://msdn.microsoft.com/en-us/library/system.appdomain.getassemblies.aspx)将列出应用程序域中加载的所有程序集，然后使用[GetTypes()](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettypes.aspx)列出程序集包含的所有类和结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:30:43.677

4.5 - 简单。将所需的信息作为参数添加到被调用的方法中，对其进行注释，编译器完成其余工作。

[http://www.wintellect.com/cs/blogs/jgarland/archive/2012/03/05/using-the-new-callerinfo-attributes-for-reliable-property-change-notifications.aspx](http://www.wintellect.com/cs/blogs/jgarland/archive/2012/03/05/using-the-new-callerinfo-attributes-for-reliable-property-change-notifications.aspx)有更多信息。

看起来像这样： private void OnPropertyChanged([CallerMemberName] String caller = null)

可悲的是没有类名；）所以，运气不好也在那里。

否则 - 没有快速可靠的方法，抱歉。

> 逐类启用/禁用日志记录。

我所做的是有一个通用记录器 FOR A 类（记录器）。这对错误是开放的，但它也允许我手动为另一个类记录一些东西——例如在辅助方法中。差不多和 QUITE 标准一样好（nlog 有类似的机制）。

# c# - 创建 BouncyCastle OCSP 响应

> ID：10786007
> 
> 赞同：1
> 
> 时间：2012-05-28T14:08:42.643
> 
> 标签：c#, deserialization, bouncycastle, ocsp

我正在努力在 BouncyCastle 中查找有关 OCSP 的信息，我在网上找到的示例充其量是模糊的，所以我想我会尝试在这里提问。

这是我的问题：我正在尝试在 BouncyCastle for .NET 中执行 OCSP，但我遇到了 OCSP 响应问题，特别是，我不明白在序列化并发送响应后如何恢复响应给收件人。

问题很可能是我以错误的方式构建响应本身，因为我这样做的方式是从网上找到的点点滴滴和我的纯粹“直觉”拼凑而成的。这是我创建响应的方式：

```
 X509CrlEntry crlentry = Repository.CRL.GetRevokedCertificate(certToCheck.SerialNumber);
        BasicOcspRespGenerator basicRespGen = new BasicOcspRespGenerator(Repository.Data.BouncyCastlePublicKey);
        if (crlentry == null) {
            //still valid
            basicRespGen.AddResponse(certToCheck, CertificateStatus.Good);
        } else {
            //revoked
            DerGeneralizedTime dt = new DerGeneralizedTime(crlentry.RevocationDate);
            RevokedInfo rinfo = new RevokedInfo(dt, new CrlReason(CrlReason.CessationOfOperation));
            RevokedStatus rstatus = new RevokedStatus(rinfo);
            basicRespGen.AddResponse(certToCheck, rstatus);
        }
        BasicOcspResp response = basicRespGen.Generate("SHA512withRSA", Repository.Data.BouncyCastlePrivateKey, new X509Certificate[] { Repository.Data.MyCertificate }, DateTime.Now);
        byte[] responseBytes = response.GetEncoded;
    //I then send the bytes back to the client who made the request 
```

问题是现在我不知道如何从其序列化的 byte[] 表单中获取响应......似乎没有工厂/解析器或构造函数来获取它。有一个接受 byte[] 作为参数的 OcspResp 构造函数，但它会引发异常，我想是因为 OcspResp 和 BasicOcspResp 是不同的东西。

有谁能够帮助我？我构建响应本身是错误的，还是只是我看不到如何反序列化它？有什么提示吗？

提前谢谢大师_T

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-10-08T12:45:29.320

这太老了，但如果有人在寻找答案，那就是：在提取字节之前，必须将 BasicOcspResp 包装到 OcspResp 中。

在服务器上创建响应：

```
 X509CrlEntry crlentry = Repository.CRL.GetRevokedCertificate(certToCheck.SerialNumber);
    BasicOcspRespGenerator basicRespGen = new BasicOcspRespGenerator(Repository.Data.BouncyCastlePublicKey);
    if (crlentry == null) {
        //still valid
        basicRespGen.AddResponse(certToCheck, CertificateStatus.Good);
    } else {
        //revoked
        DerGeneralizedTime dt = new DerGeneralizedTime(crlentry.RevocationDate);
        RevokedInfo rinfo = new RevokedInfo(dt, new CrlReason(CrlReason.CessationOfOperation));
        RevokedStatus rstatus = new RevokedStatus(rinfo);
        basicRespGen.AddResponse(certToCheck, rstatus);
    }
    BasicOcspResp basicOcspResp = basicRespGen.Generate("SHA512withRSA", Repository.Data.BouncyCastlePrivateKey, new X509Certificate[] { Repository.Data.MyCertificate }, DateTime.Now);
    var ocspResponseGenerator = new OCSPRespGenerator();
    var ocspResponse = ocspResponseGenerator.Generate(OCSPRespGenerator.Successful, basicOcspResp);
    byte[] responseBytes = ocspResponse.GetEncoded(); 
```

读取客户端的响应：

```
 OcspResp ocspResponse = new OcspResp(responseBytes);
    BasicOcspResp basicOcspResponse = (BasicOcspResp)ocspResponse.GetResponseObject(); 
```

# python - 在 Mac OS X Lion 上的 Eclipse PyDev 中将 python 作为 32 位进程运行

> ID：10786011
> 
> 赞同：2
> 
> 时间：2012-05-28T14:08:59.983
> 
> 标签：python, osx-lion, 32bit-64bit, pydev, pyglet

我已经使用 MacPorts 将 pyglet 安装到 Mac OS X 10.7.4 上。

pyglet 仅在为 32 位拱门构建时才有效，因此为了使用它，我必须像这样从命令行运行 python，

```
arch -i386 /opt/local/Library/Frameworks/Python.framework/Versions/2.6/Resources/Python.app/Contents/MacOS/Python 
```

然后我就可以成功运行[pyglet“hello world”程序](http://pyglet.org/doc/programming_guide/hello_world.html)了。

但是，我喜欢在 Eclipse 中使用 PyDev，但我不知道如何配置 PyDev 以将 python 作为 32 位进程运行。

我添加了 MacPorts python，

```
/opt/local/Library/Frameworks/Python.framework/Versions/2.6/Resources/Python.app/Contents/MacOS/Python 
```

作为 Python 解释器（Preferences > Pydev > Interpreter - Python）。我创建了一个新项目并将 MacPorts python 设置为项目的解释器。但是当我从这个项目中运行[pyglet "hello world" 程序时，我收到以下错误](http://pyglet.org/doc/programming_guide/hello_world.html)

```
pydev debugger: starting
Traceback (most recent call last):
File "/Applications/eclipse/plugins/org.python.pydev.debug_1.6.2.2010090812/pysrc/pydevd.py", line 1145, in <module>
debugger.run(setup['file'], None, None)
File "/Applications/eclipse/plugins/org.python.pydev.debug_1.6.2.2010090812/pysrc/pydevd.py", line 916, in run
execfile(file, globals, locals) #execute the script
File "/Users/andrewfogg/Dropbox/EnvironmentalArt/src/art.py", line 2, in <module>
window = pyglet.window.Window()
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/pyglet/__init__.py", line 306, in __getattr__
__import__(import_name)
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/pyglet/window/__init__.py", line 1669, in <module>
from pyglet.window.carbon import CarbonPlatform, CarbonWindow
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/pyglet/window/carbon/__init__.py", line 69, in <module>
framework='/System/Library/Frameworks/QuickTime.framework')
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/pyglet/lib.py", line 90, in load_library
return self.load_framework(kwargs['framework'])
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/pyglet/lib.py", line 226, in load_framework
lib = ctypes.cdll.LoadLibrary(realpath)
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/ctypes/__init__.py", line 431, in LoadLibrary
return self._dlltype(name)
File "/opt/local/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/ctypes/__init__.py", line 353, in __init__
self._handle = _dlopen(self._name, mode)
OSError: dlopen(/System/Library/Frameworks/QuickTime.framework/QuickTime, 6): no suitable image found.  Did find:
/System/Library/Frameworks/QuickTime.framework/QuickTime: mach-o, but wrong architecture
/System/Library/Frameworks/QuickTime.framework/QuickTime: mach-o, but wrong architecture 
```

这表明 PyDev 正在将 python 作为 64 位进程运行。

我可以看到我可以让我的 python 解释器设置环境变量（Preferences > Pydev > Interpreter - Python > Environment），但我不确定如何正确配置它（我已经尝试过）。

问题是：如何在 PyDev 中将 python 作为 32 位进程运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T11:58:09.807

我认为最好的方法是安装一个只有 32 位的 Python，而不是使用系统中安装的 Python。

或者如果你真的想使用系统中的那个，你可以看看：[How do I force Python to be 32-bit on Snow Leopard 和其他 32-bit/64-bit questions](https://stackoverflow.com/questions/2088569/how-do-i-force-python-to-be-32-bit-on-snow-leopard-and-other-32-bit-64-bit-quest) on other ways to configure Python to以 32 位运行（VERSIONER_PYTHON_PREFER_32_BIT 环境变量似乎是一个不错的选择）。

# javascript - 在 jQuery 插件中调用函数时出错

> ID：10786016
> 
> 赞同：0
> 
> 时间：2012-05-28T14:09:13.420
> 
> 标签：javascript, jquery

我正在开发一个 jQuery 插件，当我单击暂停链接时，我需要在插件中调用一个函数。我的代码是这样的

```
$("#pauseAnimation").click(function () { $.fn.cjImageVideoPreviewer().pauseAnimation(); }) 
```

和要调用的函数是这个

```
(function ($) {
$.fn.cjImageVideoPreviewer = function (options) {

    var settings = {
        // user editable settings
        images: [],
        delay: 1000,
        autoPlay: false,
        showProgress: false
    };

    var sys = {
        // function parameters
        version: '1.0.2',
        elem: null,
        idx: 1,
        timer: null,
        loaded: 0,
        mouseX: null,
        mouseY: null,
        state: false
    };

    /*
        handle transitions
    ***************************************/

    function clearTimer() {
        if (sys.timer !== null) {
            window.clearTimeout(sys.timer);
            sys.timer = null;
        }
    }

    // reset everything
    function stopAnimation() {

        if (sys.state) {

            clearTimer();
            sys.idx = 0;
            sys.state = false;

            // show the first image
            $(sys.elem).find("div.cjImageVideoPreviewer img:first").css({
                "display": "block"
            });

            // hide all the other images
            $(sys.elem).find("div.cjImageVideoPreviewer img:not(:first)").css({
                "display": "none"
            });
        }
    }

    // pause
    function pauseAnimation() {

        if (sys.state) {

            clearTimer();
            sys.idx = 0;
            sys.state = false;
        }
    } 
```

当我单击链接时出现错误

> Microsoft JScript 运行时错误：对象不支持此属性或方法，任何帮助都会很明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:44:33.127

在 JQuery[文档](http://docs.jquery.com/Plugins/Authoring)中，推荐的创建插件的方法是：

```
(function( $ ){

  var methods = {
     init : function( options ) {

       return this.each(function(){
         $(window).bind('resize.tooltip', methods.reposition);
       });

     },
     destroy : function( ) {

       return this.each(function(){
         $(window).unbind('.tooltip');
       })

     },
     reposition : function( ) { 
       // ... 
     },
     show : function( ) { 
       // ... 
     },
     hide : function( ) {
       // ... 
     },
     update : function( content ) { 
       // ...
     }
  };

  $.fn.tooltip = function( method ) {

    if ( methods[method] ) {
      return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    

  };

})( jQuery ); 
```

如果想使用这种创建自定义插件的方式，您的插件应该看起来与此类似：

```
(function( $ ){
  var sys, settings;
  var methods = {
    init : function( options ) {
        //do stuf with options settings
     },
    clearTimer: function () {
        if (sys.timer !== null) {
            window.clearTimeout(sys.timer);
            sys.timer = null;
        }
    },
    stopAnimation: function () {

        if (sys.state) {

            clearTimer();
            sys.idx = 0;
            sys.state = false;

            // show the first image
            $(sys.elem).find("div.cjImageVideoPreviewer img:first").css({
                "display": "block"
            });

            // hide all the other images
            $(sys.elem).find("div.cjImageVideoPreviewer img:not(:first)").css({
                "display": "none"
            });
        }
    },
    pauseAnimation: function () {

        if (sys.state) {

            clearTimer();
            sys.idx = 0;
            sys.state = false;
        }
    }
  };

  $.fn.cjImageVideoPreviewer = function (method) {

    settings = {
        // user editable settings
        images: [],
        delay: 1000,
        autoPlay: false,
        showProgress: false
    };

    sys = {
        // function parameters
        version: '1.0.2',
        elem: null,
        idx: 1,
        timer: null,
        loaded: 0,
        mouseX: null,
        mouseY: null,
        state: false
    };

    if ( methods[method] ) {
      return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.cjImageVideoPreviewer' );
    }    

 }
})( jQuery ); 
```

然后你可以像这样使用它：

```
//Init your plugin with some options
$('#pauseAnimation').cjImageVideoPreviewer({option1: 'value1', option2: 'value2'});
// then call a method like this:
$('#pauseAnimation').cjImageVideoPreviewer('pauseAnimation'); 
```

希望这能阐明如何开发 JQuery 插件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T14:21:49.903

您可能最好将嵌套函数分配给这样的变量：

```
(function($) { 
    $.fn.foo = function(options) {

        var do_stuff = function() {
            alert('do_stuff!')

            var do_other_stuff = function() {
                alert("do_other_stuff");
            };

            return {
                do_other_stuff: do_other_stuff
            };
        };

        return {
            do_stuff: do_stuff
        }
    };
})(jQuery);

$.fn.foo().do_stuff();
$.fn.foo().do_stuff().do_other_stuff(); 
```

享受！

编辑：

或者，您可以这样做：

```
$.fn.foo = {
    do_stuff : function() {
        alert("do_stuff!");
    }
};

$.fn.foo.do_stuff(); 
```

# objective-c - 将数据写入 bmp 文件

> ID：10786022
> 
> 赞同：2
> 
> 时间：2012-05-28T14:09:28.143
> 
> 标签：objective-c, bitmap, bmp

我目前在objective-c中连接示波器（agilent DSO7104B），我的目标是让图像显示在示波器的屏幕​​上。示波器向我发送 bmp 数据，然后我将其放入一个空文件并尝试打开它，但图像显示很奇怪，带有一种偏移。这是我的代码：

```
NSString *str = @":DISP:DATA? BMP, SCR, GRAY\r\n";
NSData *strData = [str dataUsingEncoding:NSUTF8StringEncoding];
[outputStream write:(uint8_t *)[strData bytes] maxLength:[strData length]];

[NSThread sleepForTimeInterval:1];

uint8_t buf[1024];
[((NSInputStream *) inputStream) read: buf maxLength: 1024];

uint8_t *buff;
buff=malloc(2546752);
memset (buff, 0, 2546752);
//buff=malloc(2551000);
//memset (buff, 0, 2551000);

int len;
[self makeNewFile];
int count=0;
for(int i=0; i<8; i++){
    len = [((NSInputStream *) inputStream) read: &(buff[count]) maxLength: 318344];
    count=count+318344;
    [NSThread sleepForTimeInterval:3];
}
//[self printImage: buff: 2546742];
[self printImage: buff: 2546752]; 
```

这是 printImage 函数：

```
- (void) printImage: (uint8_t*) buff : (int) len{
NSFileManager *manager;
manager = [NSFileManager defaultManager];
NSData *buffer;
NSFileHandle *fin, *fout;
fin = [NSFileHandle fileHandleForReadingAtPath:instancePath];
fout = [NSFileHandle fileHandleForWritingAtPath:instancePath];

if([manager fileExistsAtPath:instancePath]==NO){
    NSLog(@"Unreachable path");
}
if([manager fileExistsAtPath:instancePath]==YES){
    NSLog(@"File ready");
}

//buffer = [NSData dataWithBytes:&(buff[10]) length:2546742-10];
buffer = [NSData dataWithBytes:&(buff[10]) length:2546752-10];
//buffer = [NSData dataWithBytes:buff length:2546742];

[fout writeData:buffer];
[fin closeFile];
[fout closeFile]; 
```

所有注释代码都是一些我不再使用的测试代码。示波器向我发送了 2546752 字节的数据，其中包括一个 10 字节的标头，该标头不得在 bmp 文件中。我必须通过 8 个样本（for 循环）来获取它，因为否则 telnet 缓冲区太小。第一次读取（buf 1024 字节）是为了清除示波器可能在图像之前发送的任何数据的输入流。我确信我得到了良好的开始数据，因为如果我在十六进制编辑器中打开文件，我可以看到位图标题（“BM ...”），但我认为我没有得到“核心”我应该的文件......编辑：两年后，仍然没有发现问题......放弃

# javascript - 为什么这个 javascript 对象未定义？

> ID：10786023
> 
> 赞同：-4
> 
> 时间：2012-05-28T14:09:30.767
> 
> 标签：javascript, jquery, jquery-mobile

正如标题所说，我无法弄清楚。我已经使用 Jasmine 尝试确保它已定义并且它无法识别该文件。这是代码（顺便说一句，这是一个在线教程）：

```
 Notes.controller = (function ($, dataContext) {
    var notesListSelector = "#notes-list-content";
    var noNotesCachedMsg = "<div>No notes cached</div>";
    var notesListPageId = "notes-list-page";
    var currentNote = null;

    function init() {
        dataContext.init();
        var d = $(document);
        d.bind("pagechange", onPageChange);
    }

    function onPageChange(event, data) {

        var toPageId = data.toPage.attr("id");

        switch (toPageId) {
            case notesListPageId:

                renderNotesList();
                break;
        }
    }

    function renderNotesList() {

        var notesList = dataContext.getNotesList();
        var view = $(notesListSelector);
        view.empty();

        if (notesList.length === 0) {

            $(noNotesCachedMsg).appendTo(view);
        } else {

            var notesCount = notesList.length;
            var note;
            var ul = $("<ul id=\"notes-list\" data-role = \"listview\"></ul>".appendTo(view);
            for (var i =0; i<notesCount; i++) {
                note = notesList[i];
                $("<li>" + "<a data-url =\"index.html#note-editor-page?noteId=" + note.id +
                "\" href=\"index.html#note-editor-page?noteId=" +note.id + "\">" + "<div>" +
                note.title + "</div>" + "<div class=\"list-item-narrative\">" + note.narrative
                + "</div>" + "</a>" + "</li>").appendTo(ul);
            }

            ul.listview();
        }

    };

    return {

        init: init
    }

})(jQuery,Notes.dataContext); 
```

我什至尝试用开发人员提供的源代码替换所有这些，但它仍然是未定义的，所以这可能是软件配置问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:27:45.543

您`)`在这一行中缺少 a ：

```
var ul = $("<ul id=\"notes-list\" data-role = \"listview\"></ul>".appendTo(view); 
```

应该是：

```
var ul = $("<ul id=\"notes-list\" data-role = \"listview\"></ul>").appendTo(view); 
```

此外（虽然不太可能是您的错误的原因），这里不需要这个尾随分号：

```
function renderNotesList() {
    ...
}; 
```

# javascript - 如何使用 jPlayer 播放 flv 文件？

> ID：10786034
> 
> 赞同：0
> 
> 时间：2012-05-28T14:10:18.783
> 
> 标签：javascript, jquery, flv, jplayer, streaming-flv-video

我搜索了一下，发现 jPlayer 可以通过网络播放视频内容。但是 jPlayer 不播放 .flv (flash video) 文件。我正确地提到了 swf 播放器的路径。它位于 js 文件夹内，而 js 文件夹与我的 example.html 代码文件所在的位置相同。我的代码如下 example.html

```
$("#jquery_jplayer_1").jPlayer({
        ready: function () {
          $(this).jPlayer("setMedia", {
            m4v: "media/royalrumble.mp4",
            flv: "media/royalrumble.flv",
            poster: "media/royalrumble.jpg"
        });
    },
    swfPath: "js",
    supplied: "m4v, flv"
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:41:10.187

下面的代码对我有用

```
$("#jquery_jplayer_1").jPlayer({
        ready: function () {
         $(this).jPlayer("setMedia", {
            m4v: "../media/royalrumble.mp4",
            flv: "../media/royalrumble.flv",
            poster: "media/royalrumble.jpg"
         });
    },
    swfPath: "js",
    supplied: "m4v, flv",
}); 
```

我不知道为什么？媒体目录与我的代码所在的位置相同。仍然不接受

```
m4v: "media/royalrumble.mp4",
flv: "media/royalrumble.flv", 
```

和

```
m4v: "../media/royalrumble.mp4",
flv: "../media/royalrumble.flv", 
```

工作正常。

这意味着提供的路径应该是相对于 jPlayer.swf 文件的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T15:03:48.183

希望没关系，我只是添加一些信息，公元前。我在 IE 中遇到了同样的问题，但找到了一个搜索网络的修复程序。

可以看到IE有很多问题，搜索后“无法加载媒体URL”，我发现如果我对IE使用FLV fil并对路径做了../，那么它将适用于IE。

所以我从这个开始。

```
<script type="text/javascript">
        //<![CDATA[
        $(document).ready(function () {

            $("#jquery_jplayer_1").jPlayer({
                ready: function () {
                    $(this).jPlayer("setMedia", {
                        mp4: "video/Soccer.mp4",
                        webmv: "video/Soccer.webm",
                        flv: "video/Soccer.flv",
                        m4v: "video/Soccer.m4v",
                        ogv: "video/Soccer.ogv",
                        poster: "video/Soccer.png"
                    });
                },
                //error: function (event) {
                   // console.log(event.jPlayer.error);
                   // console.log(event.jPlayer.error.type);
                //},
                swfPath: "add/jplayer.swf",
                errorAlerts: true,
                supplied: "mp4, webmv, flv, m4v, ogv",
                solution: "html,flash",
                size: {
                    width: "640px",
                    height: "360px",
                    cssClass: "jp-video-360p"
                },
                smoothPlayBar: true,
                keyEnabled: true
            });

            $("#jplayer_inspector").jPlayerInspector({ jPlayer: $("#jquery_jplayer_1") });
        });
        //]]>
</script> 
```

这在 IE 中不起作用，但在 FF 和 Safari、iPhone/iPad 中不起作用。最后，这在 FF、Safari、IE 和 iPhone/iPad 中 100% 有效……

```
<script type="text/javascript">
    //<![CDATA[
    $(document).ready(function () {

        $("#jquery_jplayer_1").jPlayer({
            ready: function () {
                $(this).jPlayer("setMedia", {        
                    mp4: "video/Soccer.mp4",
                    webmv: "video/Soccer.webm",  //WEBM. works for FF
                    flv: "../video/Soccer.flv",  //FLV. works for IE, but u need ../ in front of the path...
                    m4v: "video/Soccer.m4v",  //M4V. works for FF, Saf, iPhone/iPad
                    ogv: "video/Soccer.ogv",                   
                    poster: "video/Soccer.png"
                });
            },
            //error: function (event) {
               // console.log(event.jPlayer.error);
               // console.log(event.jPlayer.error.type);
            //},
            swfPath: "add/jplayer.swf",
            errorAlerts: true,
            supplied: "mp4, webmv, flv, m4v, ogv",
            solution: "html,flash",
            size: {
                width: "640px",
                height: "360px",
                cssClass: "jp-video-360p"
            },
            smoothPlayBar: true,
            keyEnabled: true
        });

        $("#jplayer_inspector").jPlayerInspector({ jPlayer: $("#jquery_jplayer_1") });
    });
    //]]> 
```

# java - 使用反射的 Java 动态转换

> ID：10786036
> 
> 赞同：-1
> 
> 时间：2012-05-28T14:10:24.247
> 
> 标签：java, reflection

我有以下代码。

家长班：

```
class Parent{

        void a()
        {   
             if(// some logic to check whether child class is calling this method or some other class//)
             System.out.println("Child class is calling..")}
        } 
```

儿童班：

```
class Child extends Parent{

        void b(){System.out.println(new Parent().a());}
} 
```

其他一些类：

```
 class Child1{

        void b(){System.out.println(new Parent().a());}
} 
```

在这里，我从一个子类和另一个类调用父母 a() 方法。

我的问题是我应该在 Parent 的方法的 if 块中放入什么逻辑，以便我可以确定哪个类正在调用这个方法。

我有一些代码，但它不起作用。请帮我看看这段代码有什么问题。

```
if(this.getClass().getClassLoader()
            .loadClass(new Throwable().getStackTrace()[0].getClassName())
            .newInstance() instanceof Parent)
 {
           System.out.println("Child class is calling..")}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:18:46.427

您有以下选择：

1.  移动`Parent`到不同的包并使其`a()`受到保护。由于新包中没有其他类，因此只有子类能够调用该方法。

2.  您可以尝试堆栈跟踪方法，但您寻找的信息不在第一帧 - 第一帧是您调用的位置`new Throwable()`。尝试使用第 1 帧（这就是调用的地方`a()`）：

    ```
    ...getStackTrace()[1]... 
    ```

    如果你关心性能，你应该缓存这个结果。

也就是说，我想知道这段代码的目的是什么。我的直觉是，您通过创建一个会引起不同痛苦的脆弱工作来解决更深层次的问题。也许您应该告诉我们您想要实现的目标（大局）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:11:38.397

我想出了这样的东西，也许这就是你在找什么

```
package pack;

class Parent {

    void a() {
        //my test
        try{
            throw new Exception();
        }
        catch (Exception e){
            //e.printStackTrace();
            if (!e.getStackTrace()[1].getClassName().equals("pack.Parent"))
                throw new RuntimeException("method can be invoked only in Parrent class");
        }

        //rest of methods body
        System.out.println("hello world");

    }

    public void b(){
        a();
    }

    //works here
    public static void main(String[] args) {
        new Parent().a();
        new Parent().b();
    }
}
class Child extends Parent{
    //RuntimeException here
    public static void main(String[] args) {
        new Parent().a();
        new Parent().b();
    }
}
class Child2{
    //RuntimeException here
    public static void main(String[] args) {
        new Parent().a();
        new Parent().b();
    }
} 
```

忘了提到该`b`方法在所有类中都可以正常工作。希望这就是你想要的。顺便说一句，如果你不想要 RuntimeException 然后尝试`return`或抛出其他异常。

# java - 将 JPopupMenu 添加到 JPanel

> ID：10786037
> 
> 赞同：4
> 
> 时间：2012-05-28T14:10:25.100
> 
> 标签：java, swing, jpopupmenu

我的代码：

```
class PanelGlowny extends JPanel implements ActionListener{}

public class Formatka extends JFrame implements ActionListener{

private JMenuItem klienciMenuItem = new JMenuItem("Klienci");
private JPopupMenu menuPopup = new JPopupMenu();
private PanelGlowny panelGlowny = new PanelGlowny();

public Formatka() {

    add(panelGlowny, BorderLayout.CENTER);
    menuPopup.add(klienciMenuItem);
    panelGlowny.setComponentPopupMenu(menuPopup);

   }
} 
```

当我单击鼠标右键时，我看不到弹出菜单。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T15:41:55.650

添加到`JPanel`.

```
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JPopupMenu;

public class Formatka extends JPanel {

    private JMenuItem klienciMenuItem = new JMenuItem("Klienci");
    private JPopupMenu menuPopup = new JPopupMenu();

    public Formatka() {
        this.add(new JLabel("Right-click for popup menu."));
        menuPopup.add(klienciMenuItem);
        this.setComponentPopupMenu(menuPopup);
    }

    private void display() {
        JFrame f = new JFrame("Formatka");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Formatka().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:14:48.817

您没有设置布局，因此该组件可能未添加到 JFrame。使用 为 JFrame 设置布局`setLayout(new BorderLayout());`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-02T16:35:51.413

这适用于 JFrame ：D

```
 import java.awt.event.MouseAdapter;
    import java.awt.event.MouseEvent;
    import java.awt.event.MouseListener;
    import javax.swing.JMenuItem;
    import javax.swing.JPopupMenu;
    import javax.swing.JFrame;

    public class Popup extends JFrame{
        JMenuItem item1,item2;
        static JPopupMenu pop;

        Popup(){
          item1= new JMenuItem("This is Menu Item");
          item2= new JMenuItem("This is another Menu Item");

          pop= new JPopupMenu();

          MouseListener popListener = new PopupListener();

          pop.add(item1);
          pop.add(item2);

          addMouseListener(popListener);        

          setLocationRelativeTo(null);
          pack();
          setVisible(true);
    }

      public static void main(String a []){
          new Popup();
      }

    }

    class PopupListener extends MouseAdapter{

     public void mousePressed(MouseEvent e) {
          maybeShowPopup(e);
          }

       public void mouseReleased(MouseEvent e) {
        maybeShowPopup(e);
       }

       private void maybeShowPopup(MouseEvent e) {
        if (e.isPopupTrigger()) {
            Popup.pop.show(e.getComponent(),
                    e.getX(), e.getY());
        }
      }

    } 
```

# java - GWT：用异步 RPC 替换阻塞调用

> ID：10786041
> 
> 赞同：0
> 
> 时间：2012-05-28T14:10:41.497
> 
> 标签：java, asynchronous, rpc, blocking

我正在将本机 Java 应用程序转换为 GWT。与服务器的通信仅在状态更改期间发生，并且到目前为止已通过阻塞操作来处理。

例如*当前同步逻辑：*

```
void onUserClickedSync() {
    downloadData(); // blocking operation
    uploadData(); // blocking operation
    setState(DONE);
} 
```

**如何使用异步回调替换阻塞操作？**

我目前的想法是添加一堆额外的“忙碌”状态，它们什么都不做。然后，我将使用来自 RPC 的回调来触发下一个状态，在该状态下逻辑可以继续。

例如*，同步逻辑将变为：*

```
void onUserClickedSync() {
    rpc.downloadData(new AsyncCallback<Data> {
        public void onSuccess(Data result) {
            //...
            onDownloaded();
        }
        //...
    });
    setState(WAITING_FOR_DOWNLOAD);
}

void onDownloaded() {
    rpc.uploadData(new AsyncCallback<Void> {
        public void onSuccess(Void void) {
            //...
            setState(DONE);
        }
    //...
    });
    setState(WAITING_FOR_UPLOAD);
} 
```

这种方法有效吗？我有什么需要注意的吗？

**编辑：**用伪代码重写了我的示例，因为它们非常不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:52:11.343

好的，很抱歉用问题来纠缠你，但这个例子对我来说并不是很清楚。

现在我对情况有了更好的处理，是的，我认为你的方法是可行的。请注意，当回调更改系统状态时，不会出现可能与同时发生的其他事件发生冲突的“副作用”。

具体来说，不清楚您是否可能“等待多个回调”（即用户开始 4 次上传，因此您可能会收到 4 次回调，不一定按照“正确的顺序”）。另外，uploaddata方法是否有可能在相应的downloaddata之前结束？

一般来说，您必须小心，因为虽然您之前的代码为了可预测性而牺牲了响应能力（例如，在第一次下载完成之前什么都不会发生），但现在事情会以更不可预测的顺序发生，您有时可能会引入难以正确处理的细微错误诊断或复制。

我们没有看到应用程序的其余部分，因此还不清楚回调之间可能会发生什么，但我敦促您对此非常小心，并使回调错误处理特别健壮（即，如果上传中途失败？您是否仍然收到来自服务器的回调，告诉您它已中止？您移动到什么状态？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:23:13.723

在为远程交互设计接口时，您通常应该使操作尽可能粗粒度，以减少延迟。

特别是，您可以将“下载”和“上传”合并为单一操作。通过这种方式，您可以减少单次往返的延迟并消除多个等待状态。

# java - 查询字符串参数的 Java URL 编码

> ID：10786042
> 
> 赞同：792
> 
> 时间：2012-05-28T14:10:45.493
> 
> 标签：java, http, url, encoding, urlencode

说我有一个网址

```
http://example.com/query?q= 
```

我有一个用户输入的查询，例如：

> 随机词 £500 银行 $

我希望结果是正确编码的 URL：

```
http://example.com/query?q=random%20word%20%A3500%20bank%20%24 
```

实现这一目标的最佳方法是什么？我尝试`URLEncoder`创建 URI/URL 对象，但没有一个是完全正确的。

* * *

## 回答 #1

> 赞同：1271
> 
> 时间：2012-05-28T14:15:36.947

[`URLEncoder`](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/net/URLEncoder.html)是要走的路。您只需要记住*仅对*单个查询字符串参数名称和/或值进行编码，而不是对整个 URL 进行编码，当然不是查询字符串参数分隔符`&`，也不是参数名称-值分隔符`=`。

```
String q = "random word £500 bank $";
String url = "https://example.com?q=" + URLEncoder.encode(q, StandardCharsets.UTF_8); 
```

当您仍然不在 Java 10 或更高版本上时，请使用`StandardCharsets.UTF_8.toString()`charset 参数，或者当您仍然不在 Java 7 或更高版本上时，请使用`"UTF-8"`.

* * *

请注意，查询参数中的空格由`+`, not表示`%20`，这是合法有效的。`%20`通常用于表示 URI 本身中的空格（URI 查询字符串分隔符之前的部分）`?`，而不是查询字符串中的空格（之后的部分`?`）。

另请注意，共有三种`encode()`方法。一个没有`Charset`作为第二个参数，另一个`String`作为第二个参数引发检查异常。不推荐使用没有`Charset`参数的。永远不要使用它并始终指定`Charset`参数。[javadoc甚至明确建议使用](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/net/URLEncoder.html)[RFC3986](https://www.rfc-editor.org/rfc/rfc3986)和[W3C](http://www.w3.org/TR/html40/appendix/notes.html#non-ascii-chars)规定的 UTF-8编码。

> 所有其他字符都是不安全的，并且首先使用某种编码方案将其转换为一个或多个字节。然后每个字节由 3 个字符的字符串“%xy”表示，其中 xy 是字节的两位十六进制表示。**推荐使用的编码方案是 UTF-8**。但是，出于兼容性原因，如果未指定编码，则使用平台的默认编码。

### 也可以看看：

*   [每个 Web 开发人员必须了解的有关 URL 编码的知识](https://www.talisman.org/%7Eerlkonig/misc/lunatech%5Ewhat-every-webdev-must-know-about-url-encoding/)

* * *

## 回答 #2

> 赞同：194
> 
> 时间：2013-04-25T23:04:14.283

我不会使用`URLEncoder`. 除了被错误地命名（`URLEncoder`与 URL 无关），效率低下（它使用 a`StringBuffer`而不是 Builder 并且做一些其他很慢的事情）它也太容易搞砸了。

相反，我会使用[Spring](https://stackoverflow.com/questions/444112/how-do-i-encode-uri-parameter-values)[`URIBuilder`](https://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URIBuilder.html)或[Commons Apache](https://stackoverflow.com/questions/444112/how-do-i-encode-uri-parameter-values)。原因是您必须以不同于参数值的方式转义查询参数名称（即 BalusC 的答案）。[`org.springframework.web.util.UriUtils.encodeQuery``HttpClient`](https://stackoverflow.com/questions/444112/how-do-i-encode-uri-parameter-values)`q`

上面的唯一缺点（我痛苦地发现）是[URL 不是 URI 的真正子集](https://web.archive.org/web/20170303071003/adamgent.com/post/25161273526/urls-are-not-a-subset-of-uris)。

示例代码：

```
import org.apache.http.client.utils.URIBuilder;

URIBuilder ub = new URIBuilder("http://example.com/query");
ub.addParameter("q", "random word £500 bank \$");
String url = ub.toString();

// Result: http://example.com/query?q=random+word+%C2%A3500+bank+%24 
```

*由于我只是链接到其他答案，因此我将其标记为社区 wiki。随意编辑。*

* * *

## 回答 #3

> 赞同：108
> 
> 时间：2014-09-09T00:52:06.503

您需要首先创建一个 URI，例如：

```
String urlStr = "http://www.example.com/CEREC® Materials & Accessories/IPS Empress® CAD.pdf"
URL url= new URL(urlStr);
URI uri = new URI(url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef()); 
```

然后将该 Uri 转换为 ASCII 字符串：

```
urlStr=uri.toASCIIString(); 
```

现在您的 url 字符串已完全编码，首先我们进行了简单的 url 编码，然后将其转换为 ASCII 字符串，以确保字符串中没有保留 US-ASCII 以外的字符。这正是浏览器的工作方式。

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2013-12-04T13:18:07.093

Guava 15 现在添加[了一组简单的 URL 转义器](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/net/UrlEscapers.html)。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-07-06T20:49:47.543

Apache Http 组件库为构建和编码查询参数提供了一个简洁的选项 -

使用 HttpComponents 4.x 使用 - [URLEncodedUtils](https://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html#format(java.lang.Iterable,%20java.nio.charset.Charset))

对于 HttpClient 3.x 使用 - [EncodingUtil](https://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/util/EncodingUtil.html#formUrlEncode(org.apache.commons.httpclient.NameValuePair[],%20java.lang.String))

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-04-12T12:43:06.807

```
URL url= new URL("http://example.com/query?q=random word £500 bank $");
URI uri = new URI(url.getProtocol(), url.getUserInfo(), IDN.toASCII(url.getHost()), url.getPort(), url.getPath(), url.getQuery(), url.getRef());
String correctEncodedURL=uri.toASCIIString(); 
System.out.println(correctEncodedURL); 
```

印刷

```
http://example.com/query?q=random%20word%20%C2%A3500%20bank%20$ 
```

这里发生了什么？

**1.**将 URL 拆分为结构部分。`java.net.URL` 为之使用。

**2.** 正确编码每个结构部分！

**3.**使用[Punycode](https://en.wikipedia.org/wiki/Punycode)对主机名进行编码`IDN.toASCII(putDomainNameHere)`！

**4.**用于`java.net.URI.toASCIIString()`百分比编码，NFC 编码的 unicode -（最好是 NFKC！）。有关更多信息，请参阅：[如何正确编码此 URL](https://stackoverflow.com/questions/49768599/how-to-encode-properly-this-url/49778055#49778055)

在某些情况下，建议[检查 url 是否已经编码](https://stackoverflow.com/a/53776285/1485527)。还要用 '%20' 编码空格替换 '+' 编码空格。

以下是一些也可以正常工作的示例

```
{
      "in" : "http://نامه‌ای.com/",
     "out" : "http://xn--mgba3gch31f.com/"
},{
     "in" : "http://www.example.com/‥/foo",
     "out" : "http://www.example.com/%E2%80%A5/foo"
},{
     "in" : "http://search.barnesandnoble.com/booksearch/first book.pdf", 
     "out" : "http://search.barnesandnoble.com/booksearch/first%20book.pdf"
}, {
     "in" : "http://example.com/query?q=random word £500 bank $", 
     "out" : "http://example.com/query?q=random%20word%20%C2%A3500%20bank%20$"
} 
```

该解决方案通过了[Web Platform Tests](https://github.com/web-platform-tests/wpt/blob/master/url/resources/urltestdata.json)提供的大约 100 个测试用例。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-11-01T06:47:25.447

您可以在代码中使用以下方法将 url 字符串和参数映射转换为包含查询参数的有效编码 url 字符串。

```
String addQueryStringToUrlString(String url, final Map<Object, Object> parameters) throws UnsupportedEncodingException {
    if (parameters == null) {
        return url;
    }

    for (Map.Entry<Object, Object> parameter : parameters.entrySet()) {

        final String encodedKey = URLEncoder.encode(parameter.getKey().toString(), "UTF-8");
        final String encodedValue = URLEncoder.encode(parameter.getValue().toString(), "UTF-8");

        if (!url.contains("?")) {
            url += "?" + encodedKey + "=" + encodedValue;
        } else {
            url += "&" + encodedKey + "=" + encodedValue;
        }
    }

    return url;
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2020-10-28T13:30:52.570

使用 Spring 的 UriComponentsBuilder：

```
UriComponentsBuilder
        .fromUriString(url)
        .build()
        .encode()
        .toUri() 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-06-01T12:23:33.333

在android中我会使用这个代码：

```
Uri myUI = Uri.parse ("http://example.com/query").buildUpon().appendQueryParameter("q","random word A3500 bank 24").build(); 
```

`Uri`一个在哪里`android.net.Uri`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-04-11T09:31:36.477

在我的情况下，我只需要传递整个 url 并只编码每个参数的值。我没有找到这样做的通用代码（！！）所以我创建了这个小方法来完成这项工作：

```
public static String encodeUrl(String url) throws Exception {
    if (url == null || !url.contains("?")) {
        return url;
    }

    List<String> list = new ArrayList<>();
    String rootUrl = url.split("\\?")[0] + "?";
    String paramsUrl = url.replace(rootUrl, "");
    List<String> paramsUrlList = Arrays.asList(paramsUrl.split("&"));
    for (String param : paramsUrlList) {
        if (param.contains("=")) {
            String key = param.split("=")[0];
            String value = param.replace(key + "=", "");
            list.add(key + "=" +  URLEncoder.encode(value, "UTF-8"));
        }
        else {
            list.add(param);
        }
    }

    return rootUrl + StringUtils.join(list, "&");
}

public static String decodeUrl(String url) throws Exception {
    return URLDecoder.decode(url, "UTF-8");
} 
```

它使用 org.apache.commons.lang3.StringUtils

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-02-21T07:54:15.137

1.  使用这个： URLEncoder.encode(query, StandardCharsets.UTF_8.displayName()); 或者这个：URLEncoder.encode(query, "UTF-8");
2.  您可以使用以下代码。

    ```
    String encodedUrl1 = UriUtils.encodeQuery(query, "UTF-8");//not change 
    String encodedUrl2 = URLEncoder.encode(query, "UTF-8");//changed
    String encodedUrl3 = URLEncoder.encode(query, StandardCharsets.UTF_8.displayName());//changed

    System.out.println("url1 " + encodedUrl1 + "\n" + "url2=" + encodedUrl2 + "\n" + "url3=" + encodedUrl3); 
    ```

# java - 使用 java web start 启动 eclipse 应用程序会生成 java.lang.ClassNotFoundException: org.eclipse.swt.SWTError

> ID：10786043
> 
> 赞同：0
> 
> 时间：2012-05-28T14:10:54.833
> 
> 标签：java, eclipse, swt, rcp, java-web-start

我有一个 Eclipse 应用程序，为此我创建了生成 jnlp 文件的功能。我使用 maven tycho 为架构 x86 和 x86_64 构建了应用程序。

当我尝试为应用程序启动 jnlp 时，我看到所有资源都已下载，但应用程序没有启动。如果我尝试在浏览器中打开它，它就会启动。我检查了第一种情况的日志，得到以下信息：

```
eclipse.buildId=unknown
java.version=1.6.0_26
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -clientno=01 -StartupLogo=false -mode=3 -sessionid=7110AAD90803F34A9B01CD66A676E0ED.ASES01 -ServletDir=/SES/ -Port=8080 -host=172.20.224.138 -auth=tftttttttttt -Lang=de_DE -user=taris -Protocol=http
Command-line arguments:  -clientno=01 -StartupLogo=false -mode=3 -sessionid=7110AAD90803F34A9B01CD66A676E0ED.ASES01 -ServletDir=/SES/ -Port=8080 -host=172.20.224.138 -auth=tftttttttttt -Lang=de_DE -user=taris -Protocol=http

!ENTRY org.eclipse.osgi 4 0 2012-05-28 15:56:46.999
!MESSAGE An error occurred while automatically activating bundle org.eclipse.ui.workbench (20).
!STACK 0
org.osgi.framework.BundleException: The activator org.eclipse.ui.internal.WorkbenchPlugin for bundle org.eclipse.ui.workbench is invalid
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:171)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:679)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:268)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:463)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass
[....]

Caused by: java.lang.NoClassDefFoundError: org/eclipse/swt/SWTError
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:166)
    ... 78 more
Caused by: java.lang.ClassNotFoundException: org.eclipse.swt.SWTError
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 84 more 
```

这是用于生成资源的 pom 部分：

```
<plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>target-platform-configuration</artifactId>
            <version>${tycho-version}</version>
            <configuration>
                <resolver>p2</resolver>
                                    <ignoreTychoRepositories>true</ignoreTychoRepositories>
                <environments>
                    <environment>
                        <os>win32</os>
                        <ws>win32</ws>
                        <arch>x86</arch>
                    </environment>
                    <environment>
                        <os>win32</os>
                        <ws>win32</ws>
                        <arch>x86_64</arch>
                    </environment>
                </environments>
            </configuration>
        </plugin> 
```

我确实检查了 jnlp 文件中是否引用了资源：

```
<resources os="Windows" arch="x86">
<jar href="plugins/org.eclipse.swt.win32.win32.x86_3.7.2.v3740f.jar"/> 
```

我还检查了缓存并下载了资源。

当在浏览器中直接启动它没有问题时，我找不到应用程序不以 Java web start 启动的原因。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:18:25.720

我的应用程序遇到了同样的错误。该项目是使用 buckminster 构建的，但也适用于 x86 和 x86_64。

您的应用程序确实通过浏览器启动，因为这是一个 32 位应用程序，并且会将您的 webstart 作为 32 位应用程序调用。

通过 Windows 资源管理器启动您的应用程序，会启动一个 64 位应用程序，但会遇到问题。

**这是对我有用的解决方案：**
编辑包含功能的 jnlp 文件：
修改（原始 jnlp 文件，它不起作用）

```
...
</resources>
<resources os="Windows" arch="x86">
    <jar href="plugins/org.eclipse.swt.win32.win32.x86_3.7.0.v3735b.jar"/>
    <jar href="plugins/org.eclipse.core.filesystem.win32.x86_1.1.300.v20110423-0524.jar"/>
    <jar href="plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502.jar"/>
</resources>
<resources os="Windows" arch="x86_64">
    <jar href="plugins/org.eclipse.core.filesystem.win32.x86_64_1.1.300.v20110423-0524.jar"/>
    <jar href="plugins/org.eclipse.swt.win32.win32.x86_64_3.7.0.v3735b.jar"/>
    <jar href="plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502.jar"/>
</resources> 
```

进入（新的 jnlp 文件，应该可以工作）

```
 ...
<resources os="Windows" arch="x86">
    <jar href="plugins/org.eclipse.swt.win32.win32.x86_3.7.0.v3735b.jar"/>
    <jar href="plugins/org.eclipse.core.filesystem.win32.x86_1.1.300.v20110423-0524.jar"/>
    <jar href="plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502.jar"/>
<resources os="Windows">
    <jar href="plugins/org.eclipse.core.filesystem.win32.x86_64_1.1.300.v20110423-0524.jar"/>
    <jar href="plugins/org.eclipse.swt.win32.win32.x86_64_3.7.0.v3735b.jar"/>
    <jar href="plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502.jar"/>
</resources> 
```

换句话说：删除 arch="x86_64" 过滤器。

我认为这是Equinox启动器的错误。但它的真正原因对我来说是个秘密。

PS：仅为 org.eclipse.swt.win32.win32.x86_64 包删除 arch-filter 也可以。
PPS：我在这里发现了一个类似的问题：http: [//www.eclipse.org/forums/index.php/t/314656/](http://www.eclipse.org/forums/index.php/t/314656/)

# wpf - Kinect SDK 1.5 - 人脸跟踪：WPF 颜色深度跟踪器

> ID：10786045
> 
> 赞同：1
> 
> 时间：2012-05-28T14:10:58.437
> 
> 标签：wpf, kinect

我正在开发用于面部跟踪的新 kinect SDK，我注意到示例（[上一个问题](https://stackoverflow.com/questions/10719410/kinect-sdk-1-5-face-tracking-wpf-tracking-problems)）提供的托管代码和非托管代码之间存在一些差异。我无法使用 c# 和 WPF 重现快速 c++ 示例：从与 kinect for windows 相同的设置开始，这是两组代码：

C++：

```
if (m_KinectSensorPresent && m_KinectSensor.GetVideoBuffer())
{
    HRESULT hrCopy = m_KinectSensor.GetVideoBuffer()->CopyTo(m_colorImage, NULL, 0, 0);
    if (SUCCEEDED(hrCopy) && m_KinectSensor.GetDepthBuffer())
    {
        hrCopy = m_KinectSensor.GetDepthBuffer()->CopyTo(m_depthImage, NULL, 0, 0);
    }
    // Do face tracking
    if (SUCCEEDED(hrCopy))
    {
        FT_SENSOR_DATA sensorData(m_colorImage, m_depthImage, m_KinectSensor.GetZoomFactor(), m_KinectSensor.GetViewOffSet());

        FT_VECTOR3D* hint = NULL;
        if (SUCCEEDED(m_KinectSensor.GetClosestHint(m_hint3D)))
        {
            hint = m_hint3D;
        }
        if (m_LastTrackSucceeded)
        {
            hrFT = m_pFaceTracker->ContinueTracking(&sensorData, hint, m_pFTResult);
        }
        else
        {
            hrFT = m_pFaceTracker->StartTracking(&sensorData, NULL, hint, m_pFTResult);
        }
    }
} 
```

C＃：

```
int hr;
            HeadPoints headPointsObj = null;
            Vector3DF[] headPoints = GetHeadPointsFromSkeleton(skeletonOfInterest);

        if (headPoints != null && headPoints.Length == 2)
        {
            headPointsObj = new HeadPoints { Points = headPoints };
        }

        this.copyStopwatch.Start();
        this.colorFaceTrackingImage.CopyFrom(colorImage);
        this.depthFaceTrackingImage.CopyFrom(depthImage);
        this.copyStopwatch.Stop();

        var sensorData = new SensorData(this.colorFaceTrackingImage, this.depthFaceTrackingImage, DefaultZoomFactor, Point.Empty);
        FaceTrackingSensorData faceTrackSensorData = sensorData.FaceTrackingSensorData;

        this.startOrContinueTrackingStopwatch.Start();
        if (this.trackSucceeded)
        {
            hr = this.faceTrackerInteropPtr.ContinueTracking(ref faceTrackSensorData, headPointsObj, this.frame.ResultPtr);
        }
        else
        {
            hr = this.faceTrackerInteropPtr.StartTracking(
                ref faceTrackSensorData, ref regionOfInterest, headPointsObj, this.frame.ResultPtr);
        } 
```

显然，提供相同数据的相同跟踪调用的结果对于 c# 和 c++ 的结果为 false 和 true。

任何想法？我希望我的跟踪器能够在骨架数据之外工作，例如 c++ 示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:17:24.093

我在这个论坛[Microsoft 论坛](http://social.msdn.microsoft.com/Forums/en-US/kinectsdk/thread/b221d15d-3d59-47b4-90e2-cef2606b1402?prof=required)中找到了一个解决方案。您必须修改 SDK 提供给您的工具，并且乱用提供的代码并不是一件好事，但它终于可以工作了。

# html - 为什么我的徽标显示在菜单栏中？

> ID：10786046
> 
> 赞同：0
> 
> 时间：2012-05-28T14:11:03.203
> 
> 标签：html, css

请检查下面的代码。

我的图像没有显示在菜单栏上。（很长一段时间后使用css :)）

HTML：

```
<html>
    <head>
        <link href="style.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <div id="navigation-container">
            <div class="rectangle">
                <div class="logo"/>
            </div>
        </div>
    </body>
</html> 
```

CSS：

```
#navigation-container {
    margin: 0 auto;
    width: 1050px;
}

.rectangle {
    background: black;
    position: relative;
    height: 62px;
    -moz-box-shadow: 0px 0px 4px rgba(0,0,0,0.55);
    box-shadow: 0px 0px 4px rgba(0,0,0,0.55);
    -webkit-border-radius: 3px;
    margin-top:0em;
}

.logo {
    background:url('company_logo.png');
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T14:14:47.677

您需要为您的`.logo`. [请参阅此 JSFiddle](http://jsfiddle.net/ymcSU/1/)。

注意`<div>`不能自闭，必须有`</div>`. `<div/>`不是有效的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:17:18.280

id = # 类 = .

您需要更新您的 css 以使其显示`.logo`，而不是`#logo`.

您的 HTML 也应该是`<div class="logo"></div>`.

另外，由于您没有指定 .logo 的高度，这将不起作用，我建议您将其更改为： `<div class="rectangle logo"></div>`

# django - NameError：未定义名称“BillingView”

> ID：10786051
> 
> 赞同：1
> 
> 时间：2012-05-28T14:11:24.680
> 
> 标签：django

这是我的网址：

```
from views import *

urlpatterns = patterns('',

    url(r'^$', BillingView.as_view(), name="index"),

) 
```

这是我的方法`views.py`：

```
class BillingView(BaseCompositeView):

    """
    A view that lets you record new billing information. This view includes all
    of the forms needed by the users on one page.
    """
    # We cannot easily override FormView since this view uses multiple forms

    template_name = "billing/base_billing.html" 
```

等等

为什么我的视图无法访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:19:11.983

您使用的是 django 1.4 吗？项目名称是什么？

您可能希望将其用于导入：

```
from project.billing.views import * 
```

`NameError`意味着您正在引用尚未在当前范围内定义或声明的内容。

编辑：

为了帮助诊断问题，试试这个：

```
python manage.py shell
>>> import django
>>> django.get_version()
'1.2.3'
>>> import sys
>>> sys.path
['/list/of/paths', '/and/other/paths/'] 
```

只需检查正确的库是否在您的路径上。您可能会发现您的站点库文件夹中有更新版本的 django。

你什么时候收到NameError？从开发服务器或生产 Web 服务器运行时？请向我们展示完整的错误和堆栈跟踪。

# java - java - 如何通过java中的http响应标头防止Internet Explorer 9中的缓存？

> ID：10786054
> 
> 赞同：5
> 
> 时间：2012-05-28T14:11:40.550
> 
> 标签：java, jakarta-ee

我正在尝试通过在 java 代码中设置以下标头来限制 PDF 文件的缓存：

```
response.setHeader("Cache-Control", "no-store");
response.setHeader("Expires", "0"); 
```

这在 IE 8 上运行良好。但是在 IE 9 上它失败了，它仍在临时 Internet 文件夹中缓存文件。

任何人都可以对它有所启发吗？

感谢和问候，

拉玛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:28:41.880

就这样它在 Ie9 上对我有用

```
response.setHeader("Cache-Control", "no-store, no-cache, must-revalidate");<br/>
response.setHeader("Pragma","no-cache");<br/><br/> 
```

但如果我添加

```
response.addHeader("Cache-Control", "post-check=0, pre-check=0");<br/> 
```

那么它不起作用**......**请

参考：http:
[//blogs.msdn.com/b/ieinternals/archive/2009/07/20/using-post_2d00_check-and-pre_2d00_check-cache-directives.aspx](http://blogs.msdn.com/b/ieinternals/archive/2009/07/20/using-post_2d00_check-and-pre_2d00_check-cache-directives.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:26:43.750

```
response.setDateHeader("Expires", 1L);
response.setHeader("Pragma", "no-cache");
response.setHeader("Cache-Control", "no-cache");
response.addHeader("Cache-Control", "no-store"); 
```

是我通常使用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:44:09.100

我已经使用了它并且它有效。

```
// Set to expire far in the past.
response.setHeader("Expires", "Mon, 23 Aug 1982 12:00:00 GMT");

// Set standard HTTP/1.1 no-cache headers.
response.setHeader("Cache-Control", "no-store, no-cache, must-revalidate");

// Set IE extended HTTP/1.1 no-cache headers (use addHeader).
response.addHeader("Cache-Control", "post-check=0, pre-check=0");

// Set standard HTTP/1.0 no-cache header.
response.setHeader("Pragma", "no-cache"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T15:31:36.090

我没有 IE9，但您可能想进一步探索[***Cache-Control***](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T14:14:54.783

```
Cache-Control: no-cache, must-revalidate
Expires:Sat, 26 Jul 1997 05:00:00 GMT 
```

大概是你想要的。

# git - 尝试设置远程 git，推送初始提交给出“git-receive-pack：未找到”

> ID：10786055
> 
> 赞同：0
> 
> 时间：2012-05-28T14:11:43.570
> 
> 标签：git, push, nas

我正在尝试在我的 Synology DS212J NAS 服务器上设置 git origin。当我尝试使用此命令推送到服务器时：

```
git remote add nas ssh://username@nasip/volume1/path/to/repo/repo.git
git push nas master 
```

首先提示我输入我的密码。然后我收到以下错误：

```
sh: git-receive-pack: not found
fatal: The remote end hung up unexpectedly 
```

有谁知道这意味着什么或我该如何解决？

编辑：这就是我所关注的，但是当我尝试推送到遥控器时出现错误。 [http://rubypane.blogspot.com/2012/03/creating-new-git-repository-on-synology.html](http://rubypane.blogspot.com/2012/03/creating-new-git-repository-on-synology.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T22:04:43.607

正如上面 che 和其他人所解释的，这是您的 Synology NAS 上的路径设置有问题。通常，您的 .profile 和 /etc/profile 在通过 ssh 登录时会被解析，但在这种情况下并非如此。虽然这可以按照 wonko 在[http://www.wonko.de/2010/04/set-up-git-on-synology-nas.html](http://www.wonko.de/2010/04/set-up-git-on-synology-nas.html)（第 6 步）中的解释进行调整，但我不想让用户更改他们的环境。我建议的替代方法是简单地创建符号链接。请执行下列操作：

```
cd /opt/bin
for gitfile in git* ; do ln -s /opt/bin/$gitfile /bin/$gitfile ; done 
```

请记住在发出这些命令之前以 root 身份登录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T14:15:14.777

这看起来像你的远程盒子上没有安装 git。Git 在 ssh 上使用它自己的协议，因此您需要拥有能够理解另一端的 git 对象的二进制文件。

您的客户端尝试运行的程序是`git-receive-pack`，因此请尝试从您的盒子上的 shell 运行。如果可行，您会看到类似

```
che@nok ~ $ git receive-pack
usage: git receive-pack <git-dir> 
```

如果没有：

```
-bash-4.0# git-receive-pack
-bash: git-receive-pack: command not found 
```

如果你在那里安装了 git，你应该尝试在`git receive-pack`那里工作。如果是这样，您可能只需要将 git 符号链接到路径中某处的 git-receive-pack 即可。

跑步

```
cd `which git`
ln -si git git-receive-pack 
```

在 root 下可能会为你做这件事。

# c# - 如何使用 c# 将 DataGrid 保存到 XLS？

> ID：10786056
> 
> 赞同：0
> 
> 时间：2012-05-28T14:11:47.923
> 
> 标签：c#, excel, export-to-excel

我想向我的应用程序添加将数据保存到 XLS（旧的 excel 文件）的功能。

我在这里看到了一个关于如何在 ASP.NET 中执行此操作的示例[，](http://www.codeproject.com/Tips/344604/Export-to-EXCEL-from-Datatable-in-Csharp-Net)但我不知道这如何转换为桌面应用程序的 c# 代码。

我还查看了 excel 自动化，它看起来像这样：

```
private void button1_Click(object sender, EventArgs e)
{
    Excel.Application xlApp ;
    Excel.Workbook xlWorkBook ;
    Excel.Worksheet xlWorkSheet ;
    object misValue = System.Reflection.Missing.Value;

    xlApp = new Excel.ApplicationClass();
    xlWorkBook = xlApp.Workbooks.Add(misValue);

    xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
    xlWorkSheet.Cells[1, 1] = "http://csharp.net-informations.com";

    xlWorkBook.SaveAs("csharp-Excel.xls", Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
    xlWorkBook.Close(true, misValue, misValue);
    xlApp.Quit();

    releaseObject(xlWorkSheet);
    releaseObject(xlWorkBook);
    releaseObject(xlApp);

    MessageBox.Show("Excel file created , you can find the file c:\\csharp-Excel.xls");
}

private void releaseObject(object obj)
{
    try
    {
        System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
        obj = null;
    }
    catch (Exception ex)
    {
        obj = null;
        MessageBox.Show("Exception Occured while releasing object " + ex.ToString());
    }
    finally
    {
        GC.Collect();
    }
} 
```

我不想使用它，因为：

1.  如果我导出大量数据会很慢

2.  如果可能的话，我希望它可以在没有安装 Microsoft Excel 的 PC 上运行

我也试过[CarlosAg.Excel.Xml](http://www.carlosag.net/Tools/ExcelXmlWriter/)，它似乎工作，除了当我打开文件时，我收到来自 excel 的警告，该文件不是 XLS 格式，而是其他格式。

谁能向我推荐一个免费的 c# 库来执行此操作，或者向我展示如何使用传统的 .Net 库将数据保存到 XLS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:17:34.780

使用[NOPI](http://npoi.codeplex.com/)，可在`codeplex.com`

> 该项目是位于 [http://poi.apache.org/](http://poi.apache.org/)的 POI Java 项目的 .NET 版本。POI是一个开源项目，可以帮助你读/写xls、doc、ppt文件。它有广泛的应用。

下面是一个关于如何使用 NOPI 的示例：

```
 using (FileStream fileOut = new FileStream("poi-test.xls", FileMode.OpenOrCreate))
        {
            HSSFWorkbook workbook = new HSSFWorkbook();
            var worksheet = workbook.CreateSheet("POI Worksheet");

            // index from 0,0... cell A1 is cell(0,0)
            var row1 = worksheet.CreateRow((short)0);

            var cellA1 = row1.CreateCell((short)0);
            cellA1.SetCellValue("Hello");
            ICellStyle cellStyle = workbook.CreateCellStyle();
            cellStyle.FillForegroundColor = HSSFColor.GOLD.index;
            cellStyle.FillPattern = FillPatternType.SOLID_FOREGROUND;//.setFillPattern(HSSFCellStyle.SOLID_FOREGROUND);
            cellA1.CellStyle = cellStyle;

            ICell cellB1 = row1.CreateCell((short)1);
            cellB1.SetCellValue("Goodbye");
            cellStyle = workbook.CreateCellStyle();
            cellStyle.FillForegroundColor = HSSFColor.LIGHT_CORNFLOWER_BLUE.index;
            cellStyle.FillPattern = FillPatternType.SOLID_FOREGROUND;
            cellB1.CellStyle = cellStyle;

            var cellC1 = row1.CreateCell((short)2);
            cellC1.SetCellValue(true);

            var cellD1 = row1.CreateCell((short)3);
            cellD1.SetCellValue(new DateTime());
            cellStyle = workbook.CreateCellStyle();
            cellStyle.DataFormat = HSSFDataFormat
                    .GetBuiltinFormat("m/d/yy h:mm");
            cellD1.CellStyle = cellStyle;

            workbook.Write(fileOut);
        } 
```

参考： [Leniel Macaferi 在 C# 中创建 Excel 电子表格 .XLS 和 .XLSX ](http://www.leniel.net/2009/07/creating-excel-spreadsheets-xls-xlsx-c.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:22:27.573

另一种方法是导出为 CSV（逗号分隔值）文件，这些文件只是带有数据的纯文本文件。Excel（如果已安装）通常是 CSV 文件的默认应用程序，您不需要第三方库。

# lotus-notes - Xpages - 如何在 Xpage 上显示富文本字段图像属性？

> ID：10786057
> 
> 赞同：0
> 
> 时间：2012-05-28T14:11:49.363
> 
> 标签：lotus-notes, xpages, lotus-domino

我有一个带有富文本字段的注释表单，我通过“创建”>“图片”在其中“嵌入”内联图像。图像显示正确，但没有显示任何属性。例如，我设置了标题或标题，预览时 Xpage 上没有显示任何内容。Xpages 是否支持这些属性，或者有某种方式来显示它们？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T00:41:36.553

不支持这些属性。一般来说：RichText 不能很好地映射到 HTML/MIME，所以你总是会遇到限制。您可以查看 Geniisoft 的 iFidelity，它增强了 rt-mime 转换。除非您处理经典应用程序的转换，否则最好仅使用 mime 而不是 RT

# javascript - 在 JavaScript 中使用标签

> ID：10786059
> 
> 赞同：1
> 
> 时间：2012-05-28T14:11:53.713
> 
> 标签：javascript

你能解释一下如何在与 break 交互的语句上使用标签：switch、while、do 和 for。

请举例。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T14:15:15.120

通常，我看到它[突破到外部循环](http://jsfiddle.net/HHpPR/)：

```
var i, j;

dance: for (i = 0; i < 20; i++) {
    for (j = 0; j < 20; j++) {
        console.log(i+'-'+j);
        if (j === 10) { //normally, break only breaks the immediate loop
            break dance; //this one breaks the loop labelled as dance
        }
    }
}​

//continue here after i = 0,j = 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:16:18.787

这是一篇关于 JS 中的 GOTO 标签的好[文章](http://blog.stchur.com/2007/03/09/the-javascript-goto-statement/)。我从不使用 GOTO 标签逻辑，所以我今天实际上也学到了一些新东西。

文章中的JS代码：

```
var pastures = getPastures();
 var i, pastureLen = pastures.length;

pastureLoop:
 for (i = 0; i < pastureLen; i++)
 {
    var pasture = pastures[i];
    var cows = pasture.getCows();

   var j, numCows = cows.length;
    for (j = 0; j < numCows; j++)
    {
       var cow = cows[j];
       if (cow.isEating())
          { continue pastureLoop; }
    }

   // No cows were eating, so fire the callback for pasture[i]
    pasture.executeCallback();    // or whatever
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:15:33.463

引用 Mozilla 开发者网络 [语言参考](https://developer.mozilla.org/en/JavaScript/Reference/Statements/label)：

> 提供带有标识符的语句，您可以使用 break 或 continue 语句引用该标识符。
> 
> 例如，您可以使用标签来标识循环，然后使用 break 或 continue 语句来指示程序是应该中断循环还是继续执行。

请注意，他们还说：

> 标签在 JavaScript 中不是很常用，因为它们使程序更难阅读和理解。尽可能避免使用标签，根据具体情况，更喜欢调用函数或抛出错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:15:17.080

不要使用标签。

例子：

```
// no label
while (condition) {
    // do something
} 
```

# android - 在android右侧的列表视图中添加自定义按钮

> ID：10786078
> 
> 赞同：0
> 
> 时间：2012-05-28T14:13:32.337
> 
> 标签：android

嗨，大家晚上好，

我正在尝试创建自定义列表视图，在右侧我最初添加一个按钮我将按钮的文本提供给“添加”，现在当我第一次单击该按钮时，文本应该更改为删除，现在我的问题是什么时候我单击带有添加文本的按钮，它在差异上设置了删除文本。位置，例如，如果我单击位置 1，那么它将删除文本设置为第 6 或第 7 和第 12，如下所示，

请在这方面帮助我任何帮助表示赞赏。我的代码在这里

```
 // TODO Auto-generated method stub
            //      View row = null;
      if (convertView == null) {
            //      if(row==null)
        convertView = mInflater.inflate(R.layout.apps_list, null);

            // Creates a ViewHolder and store references to the two children views
             // we want to bind data to.
            holder = new ViewHolder();
            holder.appName = (TextView) convertView.findViewById(R.id.app_name);
            holder.addRemove = (Button) convertView.findViewById(R.id.add_or_remove);
            holder.cb = (CheckBox)convertView.findViewById(R.id.cb);

            convertView.setTag(holder);
            } else {
           // Get the ViewHolder back to get fast access to the TextView
           // and the ImageView.
           holder = (ViewHolder) convertView.getTag();
           }
    prefsEditor = myPrefs.edit();

     holder.appName.setText(optionalAppsArray.get(position));
     String addOrRemove = holder.addRemove.getText().toString();
     int pos = position;
     holder.addRemove.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                try {
                    if(!bool){
                        holder.addRemove.setText("Add");
                        bool = true;
                    }else {
                        holder.addRemove.setText("remove");
                        bool = false;
                    }
                } catch (Exception e) {
                    // TODO: handle exception
                }

            }
        });

            return convertView;
                  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:28:55.787

下面的代码用于填充 ListView 并将数据绑定到布局

```
public class AccessoriesListActivity extends ListActivity {

private static final String STAR_STATES = "listviewtipsandtricks:star_states";

private AccessoriesAdapter mAdapter;
private boolean[] mStarStates;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (savedInstanceState != null) {
        mStarStates = savedInstanceState.getBooleanArray(STAR_STATES);
    } else {
        mStarStates = new boolean[CHEESES.length];
    }

    mAdapter = new AccessoriesAdapter();
    setListAdapter(mAdapter);
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putBooleanArray(STAR_STATES, mStarStates);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    showMessage(getString(R.string.you_want_info_about_format, CHEESES[position]));
}

private static class AccessoriesViewHolder {
    public CheckBox star;
    public TextView content;
}

private class AccessoriesAdapter extends BaseAdapter {

    @Override
    public int getCount() {
        return CHEESES.length;
    }

    @Override
    public String getItem(int position) {
        return CHEESES[position];
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        AccessoriesViewHolder holder = null;

        if (convertView == null) {
            convertView = getLayoutInflater().inflate(R.layout.accessories_item, parent, false);

            holder = new AccessoriesViewHolder();
            holder.star = (CheckBox) convertView.findViewById(R.id.btn_star);
            holder.star.setOnCheckedChangeListener(mStarCheckedChanceChangeListener);
            holder.content = (TextView) convertView.findViewById(R.id.content);

            ((Button) convertView.findViewById(R.id.btn_buy)).setOnClickListener(mBuyButtonClickListener);

            convertView.setTag(holder);
        } else {
            holder = (AccessoriesViewHolder) convertView.getTag();
        }

        holder.star.setChecked(mStarStates[position]);
        holder.content.setText(CHEESES[position]);

        return convertView;
    }
}

private void showMessage(String message) {
    Toast.makeText(AccessoriesListActivity.this, message, Toast.LENGTH_SHORT).show();
}

private OnClickListener mBuyButtonClickListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        // TODO Cyril: Not implemented yet!
    }
};

private OnCheckedChangeListener mStarCheckedChanceChangeListener = new OnCheckedChangeListener() {
    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
     // TODO Cyril: Not implemented yet!
    }
};
} 
```

此活动的布局是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:padding="6dp">

<CheckBox
    android:id="@+id/btn_star"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:button="@android:drawable/btn_star" />

<TextView
    android:id="@+id/content"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:layout_weight="1"
    android:ellipsize="end"
    android:paddingLeft="6dp"
    android:paddingRight="6dp"
    android:singleLine="true"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/btn_buy"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:text="@string/buy_it" /> 
```

# lucene - Lucene 中可能更改的文本的查询类型

> ID：10786082
> 
> 赞同：0
> 
> 时间：2012-05-28T14:13:54.480
> 
> 标签：lucene, lucene.net

我的项目中有一个场景，我们使用 Lucene 进行搜索。我正在索引许多字段。现在我将 typeId 存储为这些字段之一。用户需要在 Type Text 上进行搜索。但问题是 Type 文本可以稍后修改。但是重新索引不是一种选择。需要一些更好的解决方案，所以请Lucene用户指导我一些解决方案。

我能想到的解决方案是检查搜索文本是否为 TypeText，然后将搜索文本操作为 TypeId:GuidValue，然后触发查询。

请Lucene用户能给一些更好的想法。我对 Lucene 很陌生，阅读了 Lucene 提供的各种查询类型，但我不明白如何最好地使用它们。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:24:53.687

如果我理解正确，您有一些 Type 对象，它们具有可以更改的 Text 属性和不会更改的 GUID 的 Id 属性。

如果您不想更改索引中的 Type.Text 值，则需要在您的应用程序中解析它对应的 Type.Id，然后在 lucene 中查询相应的 Type.Id。（就像您的解决方案所建议的那样）

但是不想更新索引文本值有点违背了使用文本索引引擎的目的。

# java - 以 URL 作为参数的 HTTP Post 请求

> ID：10786084
> 
> 赞同：0
> 
> 时间：2012-05-28T14:14:04.303
> 
> 标签：java, android, https

我需要使用参数向服务器发送 https 请求，其中一个参数是 URL：我接下来要做：

```
HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost(APIURL);
    httpPost.setHeader("Content-Type", "application/x-www-form-urlencoded");
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("url", "https://api/v1/pictureadress/id"));
 ... 
```

添加 URL 参数时出现错误。但是，如果我添加除 url 之外的其他参数，例如年龄、性别等。我没有错误。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:12:39.533

我没有接触过 apache 组件库。但是查看[BasicNameValuePair](http://www.docjar.org/docs/api/org/apache/http/message/BasicNameValuePair.html)上的 api ，我知道输入名称和值是原始存储的，而不是*编码*的。我担心这就是您的`url`参数值引发错误的原因。您可能需要[UrlEncodedFormEntity](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/entity/UrlEncodedFormEntity.html)，除非已经用于处理 url 编码的名称值对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:33:03.000

尝试这个..

```
public void postData() throws Exception {

 HttpClient client = new DefaultHttpClient();
 HttpPost httppost = new HttpPost("http://www.xyz.com");

 List<NameValuePair> list = new ArrayList<NameValuePair>(1);

 list.add(new BasicNameValuePair("name","ABC");

 httppost.setEntity(new UrlEncodedFormEntity(list));

 HttpResponse r = client.execute(httppost);

} 
```

# sql - oracle如何获取最新的员工记录？

> ID：10786087
> 
> 赞同：2
> 
> 时间：2012-05-28T14:14:17.693
> 
> 标签：sql, oracle

我有一个员工表，其中包含 emp_id、firstname、lastname、region_id、status 和 Effective_date 等列。

员工表可以有多个具有不同生效日期和状态的员工的条目。

员工可以有两种状态“离职者”和“加入者”。

```
id     emp_id    firstname     region    status     effective_date  
1       1         James        Asia      Joiner     1-Jan-2012 
2       1         James        UK        Leaver     1-Aug-2012
3       1         James        USA       Joiner     1-Aug-2012
4       1         James        Asia      Leaver     1-May-2012
5       1         James        UK        Joiner     1-May-2012
6       1         James        USA       Leaver     1-Sep-2012 
```

使用员工表中的上述数据，如果我想获得 2012 年 1 月 1 日的最新记录，我将获得 id = 1 的记录，

如果我想获得詹姆斯 2012 年 5 月 1 日的最新记录，我将获得 id = 5 的记录

如果我想获得詹姆斯 2012 年 8 月 1 日的最新记录，我将获得 id = 3 的记录，

如果我想获得詹姆斯 2012 年 9 月 1 日的最新记录，我将获得 id = 6 的记录

以下查询正确地给了我最新的记录

```
SELECT 
        emp_id, 
        MAX(effective_date) AS latest_effective_date
FROM 
        EMPLOYEE
GROUP BY 
        emp_id 
```

但是，我如何获得其他列，例如 firstname 、 region 等。

如果我将它们放在 select 子句或 group by 子句中，我不仅会获得最新记录，还会获得其他记录。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T15:10:32.607

```
SELECT * FROM 
( SELECT  
    e.*,
    ROW_NUMBER() OVER (partition by emp_id order by effective_date DESC) r
FROM  
    EMPLOYEE  e)
WHERE r = 1; 
```

以上将为您提供每个不同 emp_id 的最大有效__Date 记录。

您返回给定日期记录的第二个要求应通过此查询完成：

（“状态 ASC” - 如果同一日期还有“离开者”，则将处理“加入者”状态。）

```
 SELECT * FROM 
( SELECT  
    e.*,
    ROW_NUMBER() OVER (partition by emp_id order by effective_date DESC, status ASC) r
FROM  
    EMPLOYEE  e
WHERE effective_date <= '<your desired date>')
WHERE r=1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:24:51.443

您需要将已经拥有的查询内部连接回 Employee 表以限制记录：

```
SELECT  Emp.*
FROM    Employee Emp
        INNER JOIN
        (   SELECT  Emp_ID, MAX(effective_date) AS latest_effective_date
            FROM    Employee
            GROUP BY Emp_ID
        ) MaxEmp
            ON Emp.Emp_ID = MaxEmp.Emp_ID
            AND Emp.Effective_Date = MaxEmp.latest_effective_date 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:39:17.850

您输入的查询不一定像您之前所说的那样返回 ID 为 3、5、6 的记录，因为在这种情况下：

```
2       1         James        Asia      Leaver     1-May-2012
3       1         James        UK        Joiner     1-May-2012 
```

两行的有效日期相等，它可能会返回 id 为 2 而不是 3 的记录。

尝试向您的表格添加时间或向您的有效日期列添加时间，这样您就可以在确定的日期从用户那里获得最新结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T14:22:26.407

尝试：

```
SELECT *
FROM EMPLOYEE emp
INNER JOIN (SELECT max(id) AS id
        emp_id, 
        MAX(effective_date) AS latest_effective_date
FROM 
        EMPLOYEE
GROUP BY 
        emp_id) AS employee_1 on emp.id = employee_1.id 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T03:56:39.093

试试这个

```
SELECT  
  MAX(id) KEEP (DENSE_RANK FIRST ORDER BY effective_date DESC) id,
  MAX(emp_id) KEEP (DENSE_RANK FIRST ORDER BY effective_date DESC) emp_id,
  MAX(firstname) KEEP (DENSE_RANK FIRST ORDER BY effective_date DESC) firstname,
  MAX(status) KEEP (DENSE_RANK FIRST ORDER BY effective_date DESC) status,
  MAX(effective_date) KEEP (DENSE_RANK FIRST ORDER BY effective_date DESC) effective_date
FROM Employee GROUP BY firstname 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-18T07:46:43.813

问题：获取最新加入公司的员工记录

解决方案 :
Step 1\. 获取员工最近加入公司的最新日期
Step 2\. 获取在该日期加入的所有员工的记录

```
select * 
from EMPLOYEE 
where effective_date in (
    SELECT MAX(effective_date) AS latest_effective_date 
    FROM EMPLOYEE GROUP BY emp_id
); 
```

# c# - 正则表达式模式编号后跟一个字符

> ID：10786088
> 
> 赞同：8
> 
> 时间：2012-05-28T14:14:41.627
> 
> 标签：c#, regex

我正在尝试让正则表达式适用于以下场景，但遇到了一些麻烦。下面是场景。

我的字符串如下所示：

`"The office timing (h) is from 8h to 18h."`

从上面的字符串我需要`"8h"`和`"18h"`.

到目前为止，我已经这样做了`"[0-9]*[h]"`。但这给了我`"h"`和。`"8h"``"18h"`

那里的专家有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T14:16:09.937

替换`[0-9]*[h]`为`[0-9]+h`

`+`意味着它必须出现一次或多次。并且没有用括号括`h`起来，因为它是独立的。

您还可以使用`\d+h`以提高可读性（`\d`匹配任何数字）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T14:18:57.280

将 * 替换为 +（加号），即

[0-9]+[小时]

在正则表达式中：

* 表示匹配任意数量的先前标记（包括零）

+ 表示匹配任意数量的先前标记（至少一个）

此外， h 周围的方括号是多余的，因为您只匹配单个字符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T14:22:06.557

`*`在正则表达式中表示零次或多次重复。改为指定正确的重复次数。

`"\b\d{1,2}h\b"`

`\d`代表一位数。

`{1,2}`表示一到两次重复（的`\d`）。

`\b`表示单词的开头或结尾（因为没有字母或数字应该在模式之前或之后）。

它不会找到`"h"`or`"123h"`或`"18hertz"`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T14:17:04.940

您可以使用此正则表达式：

```
\b\d+h\b 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-28T14:19:43.460

即使这也会有所帮助：`[0-9][0-9]*h`这相当于`[0-9]+h`

# c++ - 读取 4 个点的坐标。他们做一个正方形吗？

> ID：10786089
> 
> 赞同：4
> 
> 时间：2012-05-28T14:14:41.953
> 
> 标签：c++, algorithm

我计算点之间的距离，如果距离相等，则点形成正方形，否则不。只有当我按以下顺序读取坐标时，我的代码才有效 A(x, y)、B(x, y)、C(x, y)、D(x, y) 或反向。但是如果我像这样阅读例如 A(x, y), B(x, y), D(x, y), C(x, y) 它将不起作用，因为 dist 方法将计算正方形的对角线长度. 我怎么解决这个问题？

```
#include <iostream>
using namespace std;

struct {
    int x;
    int y;
}a[10];

int dist(int x1, int y1, int x2, int y2)
{
    int c1, c2;
    c1 = x2-x1;
    c2 = y2-y1;
    return (c1*c1)+(c2*c2);
}

int main()
{
    int d1, d2, d3, d4;
    for (int i=1; i<=4; i++)
    {
        cout << 'X' << i << '='; cin >> a[i].x;
        cout << 'Y' << i << '='; cin >> a[i].y;
    }
    d1 = dist(a[1].x, a[1].y, a[2].x, a[2].y);
    d2 = dist(a[2].x, a[2].y, a[3].x, a[3].y);
    d3 = dist(a[3].x, a[3].y, a[4].x, a[4].y);
    d4 = dist(a[4].x, a[4].y, a[1].x, a[1].y);
    if(d1==d2 && d1==d3 && d1==d4)
        cout << "Is a square";
    else
        cout << "Is not a square";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T14:22:31.257

检查距离是不够的，您至少需要检查一个角度，因为形状可能是菱形。

仅检查角度也是不够的，因为您最终可能会得到一个矩形。

点之间总共有 6 个距离。计算所有这些。在这 6 个中，四个应该相等（称为它们的长度`x`）。-**这保证了菱形**

另外两个应该彼此相等（称为它们的长度`y`）。**这保证了一个矩形**

把一个菱形和一个长方形放在一起，**BAM！**- 正方形。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:35:04.143

实际上，您可以使用内积仅使用角度来做到这一点。每个顶点 A 应该有另外两个顶点 B 和 C 使得 AB 和 AC 成直角（0 内积）以及一个顶点 D 使得 AB 和 AD 以及 AC 和 AD 都正好是 45 度（归一化点积 = acos(45 度)，即 ~ 0.6675)。如果所有四个顶点都是这样，那么你就有了一个正方形。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T17:13:55.770

选择正方形的一个顶点（不失一般性说 A）并认为这是原点。获取从原点到彼此角（AB，AC，AD）形成的 3 个向量。这些向量由 BA、CA 和 DA 给出。计算每个向量与另一个向量的内积。如果顶点形成一个矩形，则一个内积将为零（垂直边向量）。如果它们形成一个正方形，那么由于它们之间的公共角度为 45 度，其他 2 个内积也必须彼此相等。因此，如果一个内积为零且其他 2 个彼此相等且 4 个距离相同，则您有一个正方形。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-25T23:02:52.057

有四个点，您总共有六个距离。如果您计算距离的平方（当然，这更容易），那么对于长度为 L1、L2 的任何一对边，以下是正确的

```
L1 == L2 || 2*L1 == L2 || L1 = 2*L2 
```

您可以创建以下代码来实现这一点：

```
int isSquare (point *p1, point *p2, point *p3, point *p4) {
double dx, dy;
double dd[6];
point *pp[4];

pp[0]=p1; pp[1]=p2; pp[2]=p3; pp[3]=p4;
int ii, jj, kk, nn;
kk = 0;
// loop over all combinations of first and second point
// six in all
for(ii=0; ii<3; ii++) {
  for(jj=ii+1; jj<4; jj++) {
    dx = pp[ii]->x - pp[jj]->x;
    dy = pp[ii]->y - pp[jj]->y;
    dd[kk]= dx*dx + dy*dy;
    if (dd[kk]==0) return 0; // two identical points: not a square
    if(kk>1) {
      for(nn= 0; nn < kk-1; nn++) {
        // if both are "sides", we expect their length to be the same;
        // if one is a diagonal and the other a side, their ratio is 2
        // since we are working with the square of the number
        if (!(((2*dd[nn] == dd[kk] ) || \
               (dd[nn] == dd[kk])    || \
               (2*dd[kk] == dd[nn] )))) return 0;
      }
    }
     kk++;
  }
}
return 1; // got here: all combinations tested OK, we have a square

} 
```

# asp.net - 如何在 ASP.net 中修改标签的视图状态

> ID：10786098
> 
> 赞同：2
> 
> 时间：2012-05-28T14:15:06.457
> 
> 标签：asp.net

我在某处读到它可以修改视图状态，但我没有找到实现它的步骤。

**例如：**我想修改标签的视图状态，最初的标签文本是“Hi..”，我想通过在回发时修改它的视图状态将其更改为“Hello”。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T15:25:55.453

I'm guessing you're talking about maliciously modifying the __VIEWSTATE hidden field as an end user, not modifying the ViewState from within code. This may or may not be feasible (hopefully not), depending on some of your application's settings. The two that are going to make it pretty hard are [EnableViewStateMac](http://msdn.microsoft.com/en-us/library/system.web.ui.page.enableviewstatemac.aspx) and [ViewStateEncryptionMode](http://msdn.microsoft.com/en-us/library/system.web.ui.page.viewstateencryptionmode.aspx). These are often set on the [`<pages>`](http://msdn.microsoft.com/en-us/library/950xf363.aspx) element in Web.config.

**ViewStateEncryptionMode** is not really designed to prevent ViewState tampering; it's meant to obscure whatever content you have embedded in ViewState. For example, if you decided to add some secret information about yourself to ViewState (e.g., `ViewState["secretinfo"] = "My social security number is xxx-xx-xxxx.";`), any user that comes along and loads your page can take your __VIEWSTATE field and run it through a base64 decoder to find your social security number—unless, of course, you're encrypting ViewState.

As an example, [here's a .aspx page I found](http://www.worldtimeserver.com/current_time_in_AZ.aspx) through a simple Google search. View source, grab the ViewState, and paste it into this [base64 decoder](http://www.base64decode.org/). Among a few ugly characters, you'll find a bunch of plain text. This ViewState has obviously not been encrypted (which is probably not a bad thing).

Now, if you were a curious or possibly malicious person, you might try to modify some of the text you found in the ViewState, re-encode it as base64, and plop it back into the __VIEWSTATE field. (In many browsers, just open the JS console and type `document.querySelector("[name=__VIEWSTATE]").value = "whatever your base64 text is";`.) Now when you submit the form, the page will post back with the modified ViewState.

This is where **EnableViewStateMac** comes into play. As MSDN notes, this setting should always be enabled on a production site, as this is the setting that's meant to prevent malicious folks from tampering with the __VIEWSTATE field. To oversimplify, it basically calculates a hash (actually a [message authentication code](http://en.wikipedia.org/wiki/Message_authentication_code)) of the __VIEWSTATE value and sends this alongside the __VIEWSTATE. (It's embedded at the end of the string and doesn't decode back to a nice plain-text string.) If you modify some text within the __VIEWSTATE, the message will no longer match the MAC, and .NET will catch this and throw an exception before you even have a chance to process the request.

**TL;DR**
As long as you have EnableViewStateMac on (which you should), you can't really modify the __VIEWSTATE field.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:18:46.037

您可以通过在代码隐藏中设置标签对象的 Text 属性来更改标签的视图状态。内置 ASP.NET 控件的大多数属性都由 viewstate 支持，因此设置属性将间接更改该控件的 viewstate。

在您的 .aspx 中：

```
<asp:Label id="myLabel" Text="Hi.." /> 
```

在您的 .aspx.cs 中：

```
myLabel.Text = "Hello"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:18:52.417

您不能重置 PostBack 事件的值吗？比如：

```
    mylabel.Text = "你好";

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T14:23:27.907

视图状态存储在页面上的隐藏字段中。虽然视图状态以散列格式[编码格式]存储数据，因此使用正确的值进行修改并不容易，并且会导致视图状态回火。

您需要修改 Viewstate，您需要了解正确的编码和解码算法。

所以不要试图修改视图状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T15:04:17.600

简短的回答是你可以。

要修改视图状态，您基本上必须：

1.  反序列化视图状态
2.  识别与标签文本关联的键/值对（此时它是一个包含键/值对的 Xml 字典）
3.  调整
4.  序列化视图状态

本文对解析视图状态进行了更深入的研究。它还包括对可用于解析/解码视图状态的工具的引用：[了解 ASP.NET 视图状态](http://msdn.microsoft.com/en-us/library/ms972976.aspx#viewstate_topic11)。

# c++ - 如何在加载的样本上使用 FFTW？

> ID：10786103
> 
> 赞同：0
> 
> 时间：2012-05-28T14:15:17.320
> 
> 标签：c++, fft, wav, fftw, sample

我的最终目标是从单声道文件中提取低于 15KHz 的所有声音信息。该程序将样本加载到内存中，并将其表示为 16 位有符号整数数组。

我使用了FFTW，它具有复多维fft、实多维fft、实一维fft、复一维fft等多种功能。

我应该使用什么方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:18:01.603

您需要先转换为浮点/双精度数组，然后可能使用 1D 实数到复数模式（请参阅[http://www.fftw.org/fftw3_doc/One_002dDimensional-DFTs-of-Real-Data.html](http://www.fftw.org/fftw3_doc/One_002dDimensional-DFTs-of-Real-Data.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:03:40.207

如何使用 FFT 取决于您想要什么信息。仅在音频上使用 1D 真实 FFT，就有时间频率分辨率权衡、每个 bin 滤波器响应权衡以及您需要首先回答的其他问题。您还需要知道数据的采样率。

# android - 使用 ArrayList 填充动态创建的 ListView

> ID：10786104
> 
> 赞同：0
> 
> 时间：2012-05-28T14:15:25.600
> 
> 标签：android, arraylist, android-listview, listactivity

我正在尝试使用从另一个函数获取的动态创建`ListView`的填充。`ArrayList`我得到了错误`"The constructor ArrayAdapter<String>(ShowRecords, ListView, ArrayList<String>) is undefined"`。这是我的代码`ListActivity`：

```
public class ShowRecords extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LinearLayout ll = new LinearLayout(this);
        ll.setOrientation(LinearLayout.VERTICAL);

        DatabaseHandler db = new DatabaseHandler(this);
        ArrayList<String> records = db.getRecords();

        ListView lv = new ListView(this);
        this.setListAdapter(new ArrayAdapter<String>(this, lv, records));
    } 

} 
```

这是我的`getRecords()`函数代码：

```
public ArrayList<String> getRecords() {
    ArrayList<String> recordList = new ArrayList<String>();
    String selectQuery = "SELECT millis FROM records ORDER BY CAST(millis as SIGNED) DESC LIMIT 10";

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    if (cursor != null) {
        if (cursor.moveToFirst()) {
            do {
                recordList.add(cursor.getString(0));
            } while (cursor.moveToNext());
        }
    }

    return recordList;
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:26:21.060

由于您使用的是 ListActivity，因此您不需要声明列表视图。

试试这个，这应该工作！

```
public class ShowRecords extends ListActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LinearLayout ll = new LinearLayout(this);
    ll.setOrientation(LinearLayout.VERTICAL);

    DatabaseHandler db = new DatabaseHandler(this);
    ArrayList<String> records = db.getRecords();
    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, records));
} 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:26:10.927

这是可用构造函数的列表：

```
[Public Method] [Constructor] ArrayAdapter(Context, int) : void
[Public Method] [Constructor] ArrayAdapter(Context, int, int) : void
[Public Method] [Constructor] ArrayAdapter(Context, int, Object[]) : void
[Public Method] [Constructor] ArrayAdapter(Context, int, List) : void
[Public Method] [Constructor] ArrayAdapter(Context, int, int, List) : void
[Public Method] [Constructor] ArrayAdapter(Context, int, int, Object[]) : void 
```

你当然想使用这个：

```
[Public Method] [Constructor] ArrayAdapter(Context, int, Object[]) : void 
```

所以这意味着：

```
this.setListAdapter(new ArrayAdapter<String>(this, R.id.whateveridyouchoose, records)); 
```

# c# - SetupDiCallClassInstaller 返回 false

> ID：10786109
> 
> 赞同：1
> 
> 时间：2012-05-28T14:15:30.113
> 
> 标签：c#, .net, winapi, usb, wmi

我想启用和禁用特定的 USB 磁盘，我发现了这种方法：

```
 public static bool StateChange(bool Enable, int SelectedItem, IntPtr DevInfo)
        {
            bool result = false;
            SP_DEVINFO_DATA devInfoData = new SP_DEVINFO_DATA(); ;
            devInfoData.cbSize = Marshal.SizeOf(typeof(SP_DEVINFO_DATA));
            if (true == SetupDiEnumDeviceInfo(DevInfo, SelectedItem, devInfoData))
            {
                SP_PROPCHANGE_PARAMS pcp = new SP_PROPCHANGE_PARAMS(); ;
                pcp.ClassInstallHeader.cbSize = Marshal.SizeOf(typeof(SP_CLASSINSTALL_HEADER));
                pcp.ClassInstallHeader.InstallFunction = DIF_PROPERTYCHANGE;
                pcp.Scope = DICS_FLAG_GLOBAL;

                pcp.StateChange = (Enable ? DICS_ENABLE : DICS_DISABLE);
                if (true == SetupDiSetClassInstallParams(DevInfo, devInfoData, pcp, Marshal.SizeOf(pcp)))
                {
                    if (true == SetupDiCallClassInstaller(DIF_PROPERTYCHANGE, DevInfo, devInfoData))
                    {
                        result = true;
                    }
                }
            }
            return result;
        } 
```

但调用时失败：SetupDiCallClassInstaller(DIF_PROPERTYCHANGE, DevInfo, devInfoData) (返回 false)

是因为我运行的是 windows 7 x64 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:43:12.710

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/hardware/ff550922%28v=vs.85%29.aspx)，..“对于某些 DIF 请求，调用者必须是管理员组的成员”。你测试过凭证吗？

# python - Python：反编译exe

> ID：10786110
> 
> 赞同：-2
> 
> 时间：2012-05-28T14:15:30.790
> 
> 标签：python, exe, decompiler

我有一个编译为exe的小项目，听说可以反编译python项目。我已经下载了 uncompyle2，但不熟悉如何在 exe 上安装和使用它。任何帮助或教程链接都会很好。我是 python 新手，所以要温柔。

我确实使用 cd 'dir' 命令导航到 setup.py 文件并安装了它，但现在我不确定如何调用它，除非我在安装过程中做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T13:11:37.730

你导入 uncompyle2 了吗？在使用它之前，您必须从 python 解释器中导入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:40:23.833

从 uncompyle2 自述文件：

```
Usage
-----

uncompyle2 -h       prints short usage
uncompyle2 --help   prints long usage 
```

# css - 如何将img水平对齐到列表项内的中心

> ID：10786115
> 
> 赞同：0
> 
> 时间：2012-05-28T14:15:45.260
> 
> 标签：css

这是我的页面结构；

![在此处输入图像描述](../Images/59d863ce3a8a52e2ea95ab5d643dc4d3.png)

我在下面的所有“li”中都有图像。我正在尝试在 li 元素中对齐这​​些图像。我试图通过将左右边距设置为自动来做到这一点，但它不起作用。

这是CSS；

```
#navcontainer ul li
{
    display: inline-block;
    width:80px;
}

#navcontainer ul li img
{
    margin-right:auto;
    margin-left:auto;
} 
```

我确信当我在它正在工作的 css 中设置宽度或高度或任何其他东西时，它不是关于从 css、bcs 访问元素。但我没有设法将它与中心对齐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:16:56.670

如果它们是`inline-block`，只需`text-align: center`在父`li`元素上使用。

如果它们是`display: block`，那么您可以使用`margin: 0 auto 0 auto`( `top`, `right`, `bottom` `left`)。

还值得指出的是， a or的***唯一***有效子元素是元素。任何*其他*内容都*必须*用 包裹，否则标记无效，然后用户代理在准备 DOM 时尝试更正标记。并且在各种用户代理中并不一致。`ul``ol``li`**`li`**

 **使用以下标记作为演示：

```
<ul>
    <li class="inlineBlock"><img src="http://lorempixel.com/100/100/sports" /></li>
    <li class="block"><img src="http://lorempixel.com/100/100/nature" /></li>
</ul>​ 
```

使用以下 CSS：

```
li.inlineBlock {
    text-align: center;
}
li.inlineBlock img {
    display: inline-block;
}

li.block img {
    display: block;
    margin: 0 auto 0 auto;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/WEVZq/)。**

# python - 如何使用 Python 识别字符串中带有千位空格分隔符的数字？

> ID：10786118
> 
> 赞同：3
> 
> 时间：2012-05-28T14:16:04.713
> 
> 标签：python, regex

我正在处理使用空格作为千​​位分隔符的文本，例如 400 或 40 000 或 40 000 000 或 4 000 000 000。我需要识别字符串中的数字。一旦确定，有许多选项可以重新格式化数字。我是正则表达式的新手。这不起作用：

```
import re
line = '40) He had 120 hours to increase from 40 000 units to 20 000 000.'
regex = re.compile("(\d+ *\d+)")
re.findall(regex, line)
['40', '120', '40 000', '20 000', '000'] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T14:17:57.327

以下将做到这一点：

```
regex = re.compile(r"(\d+(?:\s+\d+)*)") 
```

`(?:)`这使用匹配一个或多个空格 ( `\s+`) 后跟至少一位数字 ( )的非捕获组`\d+`。整个非捕获组可以出现零次或多次 ( `*`)。

值得指出的是，将原始字符串 (`r""`或`r''`) 用于 Python 正则表达式通常是一个好主意。

最后，我可能会像这样收紧正则表达式：

```
regex = re.compile(r"(\d+(?:\s+\d{3})*)") 
```

这要求除了第一个数字之外的每一组数字都恰好是三位数。

# bash - 查找不良链接

> ID：10786125
> 
> 赞同：0
> 
> 时间：2012-05-28T14:16:41.633
> 
> 标签：bash, shell

我有一个大约 6k 链接的列表。我需要浏览每一个，看看它指向的页面是否包含特定的单词。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:33:21.270

肮脏的解决方案：

```
#! /bin/bash
while read link ; do
    wget -qO- "$link" | grep -qiFf words.lst - && echo "$link"
done < links.lst > found.lst 
```

链接应保留在 中`links.lst`，每行一个链接。单词应保持在 中`words.lst`，每行一个单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:48:47.383

我为你创建了一个：

创建一个名为 words.txt 的文件，其中包含要检查的单词，以空格分隔。

创建一个名为 links.url 的文件，其中包含一个 url 列表以检查每行一个

创建一个名为 crawler.sh 的文件，其中包含以下脚本：

```
#!/bin/bash

# A file with a list of urls one per line
LINKS_FILE="links.url"
# A file with a list of words separed by spaces
WORDS_FILE="words.txt"

HTTP_CLIENT="/usr/bin/wget -O - "

rm -f /tmp/temp.html
for link in `cat "$LINKS_FILE"`
do
        # Downloading page
        echo "--"
        echo "Scanning link: $link"
        $HTTP_CLIENT "$link" > /tmp/temp.html
        if [ $? -ne 0 ]
        then
                echo "## Problem downloading resource $link" 1>&2
                continue
        fi

        # Checking words
        for word in `cat "$WORDS_FILE"`
        do
                echo "Checking for the word \"$word\"..."
                if [ "x`grep -i $word /tmp/temp.html`" != "x" ]
                then
                        echo "** The word $word is found into the uri \"$link\""
                        continue 2
                fi
        done
        echo "** No words found into \"$link\""
        echo "--"
        echo
done
rm -f /tmp/temp.html 
```

运行包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:18:31.813

您可以编写一个 selenium 脚本来访问每个 url，然后检查这些单词是否出现在这些页面上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:28:00.680

不是最快的方法，但首先出现：

```
#!bin/bash

while read url
do
    content=$(wget $url -q -O -)

    # and here you can check
    # if there are matches in $content

done < "links.txt" 
```

# javascript - 附加 ArrayBuffers

> ID：10786128
> 
> 赞同：32
> 
> 时间：2012-05-28T14:16:52.763
> 
> 标签：javascript, arraybuffer, typed-arrays

附加/组合 ArrayBuffers 的最佳方式是什么？

我正在接收和解析具有各种数据结构的网络数据包。传入的消息被读入 ArrayBuffers。如果部分数据包到达，我需要存储它并等待下一条消息，然后再重新尝试解析它。

目前我正在做这样的事情：

```
function appendBuffer( buffer1, buffer2 ) {
  var tmp = new Uint8Array( buffer1.byteLength + buffer2.byteLength );
  tmp.set( new Uint8Array( buffer1 ), 0 );
  tmp.set( new Uint8Array( buffer2 ), buffer1.byteLength );
  return tmp.buffer;
} 
```

显然，由于 ArrayBuffers 的长度是固定的，因此您无法避免必须创建一个新缓冲区，但是是否有必要初始化类型化数组？到达后，我只想能够将缓冲区视为缓冲区；类型和结构无关紧要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-03T09:30:00.493

为什么不使用 Blob ？（我意识到当时它可能不可用）。

只需使用您的数据创建一个 Blob，`var blob = new Blob([array1,array2,string,...])`然后使用 FileReader 将其转换回 ArrayBuffer（如果需要）（请参阅[this](https://stackoverflow.com/questions/15341912/javascript-how-to-go-from-blob-to-arraybuffer)）。

检查一下：[BlobBuilder 和新的 Blob 构造函数有什么区别？](https://stackoverflow.com/questions/10412299/whats-the-difference-between-blobbuilder-and-the-new-blob-constructor) 还有这个：[MDN Blob API](https://developer.mozilla.org/en-US/docs/Web/API/Blob)

**编辑 ：**

我想比较这两种方法（Blob，以及问题中使用的方法）的效率并创建了一个 JSPerf：http: [//jsperf.com/appending-arraybuffers](http://jsperf.com/appending-arraybuffers)

好像使用 Blob 比较慢（其实我猜是使用 Filereader 读取 Blob 最耗时）。所以现在你知道了 ;) 当有超过 2 个 ArrayBuffer 时（比如从块中重建文件），也许我会更有效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-16T10:52:42.733

您似乎已经得出结论，无法创建新的数组缓冲区。但是，出于性能考虑，将缓冲区的内容附加到标准数组对象，然后从中创建新的数组缓冲区或类型化数组可能会有所帮助。

```
var data = [];

function receive_buffer(buffer) {
    var i, len = data.length;

    for(i = 0; i < buffer.length; i++)
        data[len + i] = buffer[i];

    if( buffer_stream_done()) 
        callback( new Uint8Array(data));
} 
```

大多数 javascript 引擎已经为动态分配的内存留出了一些空间。这种方法将利用该空间而不是创建大量新的内存分配，这可能是操作系统内核中的性能杀手。最重要的是，您还将减少一些函数调用。

第二个更复杂的选择是预先分配内存。如果您知道任何数据流的最大大小，那么您可以创建一个该大小的数组缓冲区，填充它（如果需要，部分填充），然后在完成后清空它。

最后，如果性能是您的主要目标，并且您知道最大数据包大小（而不是整个流），那么从少数几个该大小的数组缓冲区开始。当你填满你预先分配的内存时，在网络调用之间创建新的缓冲区——如果可能的话，异步的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-17T13:23:38.593

```
function concat (views: ArrayBufferView[]) {
    let length = 0
    for (const v of views)
        length += v.byteLength

    let buf = new Uint8Array(length)
    let offset = 0
    for (const v of views) {
        const uint8view = new Uint8Array(v.buffer, v.byteOffset, v.byteLength)
        buf.set(uint8view, offset)
        offset += uint8view.byteLength
    }

    return buf
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-11T18:59:43.320

您始终可以使用`DataView`（[http://www.khronos.org/registry/typedarray/specs/latest/#8](http://www.khronos.org/registry/typedarray/specs/latest/#8)）而不是特定类型的数组，但正如您在问题的评论中提到的那样，您实际上不能自己做很多事情`ArrayBuffer`。

# magento - 是什么导致使用 v3 API 的 Google 地图出现灰色空间？

> ID：10786132
> 
> 赞同：1
> 
> 时间：2012-05-28T14:17:11.180
> 
> 标签：magento, google-maps-api-3

我正在尝试按照 Google 文档中的示例加载地图，但它没有加载。我尝试使用`resize`，但它没有正确加载。此地图位于使用 magento 使用的 Prototype JavaScript 框架呈现的选项卡后面。它不在选项卡后面时正确加载。

```
<style type="text/css">
    #map_container { height:500px; width:700px;margin:0;}
</style>
<div id="map_container">
    <div id="map_canvas" style="width:500px;height:500px;"></div>
</div>
<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?key=APIKEY&sensor=true">
</script>
<script type="text/javascript">
    Event.observe( window, "load", function() {
        var myOptions = {
            center: new google.maps.LatLng(-34.397, 150.644),
            zoom: 6,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
        ;
        google.maps.event.trigger(map, "resize");
    });
</script> 
```

地图显示为灰色部分，覆盖了地图的大部分，并且 UI 元素未完全初始化。我尝试使用`google.maps.event.trigger(map, "resize");`，但它似乎没有做任何事情。这个 div 在很多 div 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:38:43.720

示例如何在 Magento“产品编辑”中添加新标签“GMaps”（新标签“id”为“product_info_tabs_GMaps”）

PHP部分

> My_Gmaps_Block_Adminhtml_Tabs_Gmaps 类扩展了 Mage_Adminhtml_Block_Widget_Form
> 
> ```
> public function __construct() {
> 
>   parent::__construct();
> 
>   $this->setTemplate('my/gmaps/tabs/gmaps.phtml');
> 
> } 
> ```
> 
> / *..................* /
> 
> }

模板部分“pwron/gmaps/tabs/gmaps.phtml”：

> ```
> <style>#map_canvas {width:100%; height:600px;}</style>
> <div class="map" id="map_canvas"></div>
> 
> <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
> <script type="text/javascript">
>     var GMaps = Class.create();
>     GMaps.prototype = {       ....................        }
>     var gmaps = null;
>     function switchGMapsTab(tab){
>         if ( tab.tab.container.activeTab.id == 'product_info_tabs_GMaps'){
>             if (!gmaps){
>                 gmaps = new GMaps({});
>                 gmaps.update();
>             }
>         }
>     }
>     varienGlobalEvents.attachEventHandler('showTab', switchGMapsTab);     <script> 
> ```

麻烦的方式 1\. 创建地图 2\. 显示选项卡（不加载所有图块）

最佳方式 1\. 选项卡显示 2\. 创建地图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-29T14:53:05.430

我和你有同样的问题。但我设法用这个简单的代码找到了解决方案。

首先，转到放置标签模板的文件，搜索`<li>`加载地图标签的标签并将其放入：

```
<li onclick="reloadmap()"> 
```

在地图脚本之后

```
google.maps.event.addDomListener(window, 'load', initialize); 
```

把这个：

```
function reloadmap(){
  //when you resize the map, you lose your zoom and your center
  //so you need to get them again here
    z = map.getZoom();
    c = map.getCenter();
    google.maps.event.trigger(map, 'resize');
  //and set them again here
    map.setZoom(z);
    map.setCenter(c);
} 
```

# java - JMF 无法处理格式

> ID：10786133
> 
> 赞同：0
> 
> 时间：2012-05-28T14:17:13.320
> 
> 标签：java, audio, jmf

在安装 JMF 和 jffmpeg 后，我设法在 JMStudio 中打开并播放 .avi 文件。当我尝试在我自己的测试代码中打开同一个文件时，视频工作正常，但音频不工作。这种行为的原因是什么？我知道 JMF 已经过时了，但我发现的所有其他库要么没有很好地记录，要么不是免费的。任何关于 JMF 的良好和最新替代品的提示也值得赞赏。

错误信息：

```
Unable to handle format: mpeglayer3, 48000.0 Hz, 0-bit, Stereo, Unsigned, 
  14456.0 frame rate, FrameSize=9216 bits 
```

代码：

```
public class Main {     
public static void main(String args[]) throws Exception {
    DataSource ds=Manager.createDataSource(new URL("locationOfFile"));
    Player p=Manager.createRealizedPlayer(ds);
    System.out.println(ds.getContentType());
    JFrame jf=new JFrame();
    jf.add(p.getControlPanelComponent());
    jf.add(p.getVisualComponent());
    jf.setVisible(true);
    jf.pack();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:37:41.023

尝试[VLC-J](https://github.com/caprica/vlcj)
也正如@Andrew 所说，首先尝试在标准媒体播放器中播放文件

# ios - iOS：无法查看下载的图像

> ID：10786134
> 
> 赞同：0
> 
> 时间：2012-05-28T14:17:16.707
> 
> 标签：ios, xcode, image, uiscrollview, download

我是这方面的新手，所以我想知道我的代码中缺少什么来下载/显示这些图像：

```
self.carView.contentSize = CGSizeMake(280*self.carImages.count-280, 200);
self.carView.pagingEnabled = YES;

CGRect imageRect = CGRectMake(0.0, 0.0,280*self.carImages.count-280, 200);
UIGraphicsBeginImageContext(imageRect.size);

UIImageView *carImg = [[UIImageView alloc] init];

for (int i = 1; i < self.carImages.count; i++) {
    NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[self.carImages objectAtIndex:i]]];
    UIImage *carImage = [[UIImage alloc] initWithData:imageData];
    [carImage drawAtPoint:CGPointMake(280*(i-1), 0)];
    [carImage release];
    [imageData release];
    NSLog(@"%d",i);
}

carImg.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
[self.carView addSubview:carImg];
[carImg release]; 
```

carView 是我的 ScrollView。carImages 是一个带有图像“URL”的 MutableArray。pagingEnabled 和 contentSize 正在设置，但没有图像。我打赌我错过了一些非常愚蠢的东西，就像我一直做的那样。

# ios - ALAsset 唯一标识符

> ID：10786152
> 
> 赞同：4
> 
> 时间：2012-05-28T14:18:03.897
> 
> 标签：ios, alassetslibrary, alasset

我想从照片库中复制一张图片，但我想在以后检查我是否已经导入了这张图片。

想象一下这个场景。

1.  我的照片库中有一张照片。
2.  我通过制作它的副本将其导入我的应用程序。
3.  我从我的照片库中删除了这张照片。
4.  稍后我将这张照片重新插入我的照片库（来自 iPhoto 的同一张照片，只是之前没有同步它的相册，我现在有了）

是否有可以用来比较两张图片的唯一标识符？URL 是唯一的吗？还是我必须查看元数据并尝试匹配它？如果是这样，你有什么建议？创建数据和位置？刚刚创建日期？尺寸？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:30:58.313

**观察**

我一直在使用类似的功能，所以这就是我所知道的：

*   每张插入照片库的照片都会有一个唯一的 URL（这意味着如果你插入一张图片，删除它，然后重新插入，即使是同一张图片，它也会有一个新的 URL）。
*   没有直接的方法可以知道图像是否是先前图像的副本。
*   我不认为您正在尝试这样做，但我会警告您，您不能以编程方式从 iPhone 照片库中删除图像。

**解决方案**

我真的只有一种处理方法：创建照片的哈希并将哈希存储在某处。如果插入的照片与以前完全相同，它应该给你相同的哈希值。您可以使用该哈希比较来确定您是否使用同一张照片。这是我正在使用的方法，它似乎在大多数情况下都能可靠地工作。我注意到一些差异，但这些通常涉及我在将文件添加到照片库之前对文件进行哈希处理（我注意到保存的照片可能与正在保存的照片不同）。

我希望这个信息帮助。让我知道我是否遗漏了任何内容，或者您​​在工作中发现了不同的结果。

# ios - IOS - 如何绘制随视图旋转但不随视图缩放的边框和阴影

> ID：10786156
> 
> 赞同：0
> 
> 时间：2012-05-28T14:18:23.383
> 
> 标签：ios, rotation, scale, shadow

我正在开发一个 ios 应用程序。在我的应用程序中，我有一个视图，该视图有一个边框和一个阴影。视图可以缩放和旋转。当用户缩放我的视图时，它会导致我的边框和阴影也缩放。我根本不希望我的阴影或边框缩放。另一方面，当我旋转视图时，我确实希望我的阴影和边框旋转。

是否有任何内置机制来防止边框\阴影缩放？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:24:05.200

据我所知，没有这样的内置机制。我认为您解决问题的唯一方法是简单地使用两个不同的视图，在轮换的情况下使用不同的管理。

将一个视图作为一种背景，并为其添加边框和阴影，然后将内容放在其顶部（或其中，取决于您的情况）。

# android - 在 Eclipse 上运行 Android 模拟器的问题

> ID：10786161
> 
> 赞同：2
> 
> 时间：2012-05-28T14:18:38.460
> 
> 标签：android, eclipse, android-emulator

所以我想开始为Android制作应用程序。我阅读并按照[本教程](http://developer.android.com/resources/tutorials/hello-world.html)设置了我需要的一切，但是在运行我的第一个小应用程序时，我收到以下消息：

```
[2012-05-28 16:09:54 - HelloAndroid] Android Launch!
[2012-05-28 16:09:54 - HelloAndroid] adb is running normally.
[2012-05-28 16:09:54 - HelloAndroid] Performing jannis.test.helloandroid.HelloAndroid activity launch
[2012-05-28 16:09:54 - HelloAndroid] Automatic Target Mode: launching new emulator with compatible AVD 'MyAVD'
[2012-05-28 16:09:54 - HelloAndroid] Launching a new emulator with Virtual Device 'MyAVD'
[2012-05-28 16:10:55 - Emulator] WARNING: Data partition already in use. Changes will not persist!
[2012-05-28 16:10:55 - Emulator] emulator: Failed to open the HAX device!
[2012-05-28 16:10:55 - Emulator] HAX is not working and emulator runs in emulation mode
[2012-05-28 16:10:55 - Emulator] 
[2012-05-28 16:10:55 - Emulator] emulator: Open HAX device failed
[2012-05-28 16:10:55 - Emulator] 
[2012-05-28 16:10:55 - Emulator] Failed to allocate memory: 1455
[2012-05-28 16:10:55 - Emulator] 
[2012-05-28 16:10:55 - Emulator] This application has requested the Runtime to terminate it in an unusual way.
[2012-05-28 16:10:55 - Emulator] Please contact the application's support team for more information. 
```

除了我不知道这意味着什么，当然我做了一些搜索，这里有人遇到了同样的问题：[运行新的 Intel 模拟器 for Android](https://stackoverflow.com/questions/10761696/android-running-the-new-intel-emulator)

建议使用 SDK 管理器安装*英特尔硬件加速执行管理器。*我尝试了一下，然后再次出现错误：

```
Preparing to install archives
Unexpected Error installing 'Intel Hardware Accelerated Execution Manager, revision 1':
org.eclipse.swt.SWTException: Widget is disposed 
```

我不知道该怎么做。有人可以帮我吗？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:43:09.577

除了 HAX 的东西，试着将你给设备的内存减少到 800MB。好像要求有点过分了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:32:58.073

请参考此页面：[配置虚拟机加速](http://developer.android.com/guide/developing/devices/emulator.html#accel-vm)

# java - 使用 Graph API 在墙上发布消息？

> ID：10786166
> 
> 赞同：0
> 
> 时间：2012-05-28T14:18:55.647
> 
> 标签：java, facebook-graph-api

我正在学习 Facebook 应用程序开发，我希望我的应用程序在用户的墙上发布一条简单的消息。

我如何使用图形 API 来做到这一点？

我正在使用 servlet 开发应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:26:20.160

您可以使用 socialauth 库在 FB 墙上发布消息。
[http://code.google.com/p/socialauth/](http://code.google.com/p/socialauth/)

如何在朋友的墙上发布消息，请访问以下链接：-
[http://code.google.com/p/socialauth/issues/detail?id=233](http://code.google.com/p/socialauth/issues/detail?id=233)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:31:06.920

首先，您需要使用“https://graph.facebook.com/oauth/”获取用户的 access_token（登录后）。

[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

请注意，他的 access_token 将通过 $REQUEST['code'] 检索到您自己的 php 或其他 "&redirect_uri=WWW.YOUR_WEB.PHP" 中，您必须以这种方式对其进行解密：

```
$code =  $_REQUEST['code'];

$url = "https://graph.facebook.com/oauth/access_token?";
$url .= "client_id=" . $APP_ID;
$url .= "&client_secret=" . $APP_SECRET;
$url .= "&code=" . $code;
$url .= "&redirect_uri=" . $MY_URL;

$c = curl_init();
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($c, CURLOPT_URL, $url);
$response = curl_exec($c);
curl_close($c);

$response = explode("&", $response);
foreach($response as $key => $value)
{
$pair = explode("=", $value);
$response[$pair[0]] = $pair[1];
unset($response[$key]);
}

$access_token = $response['access_token'];
$expires = $response['expires']; 
```

稍后要在墙上发帖，您需要以这种方式调用 url：

```
_url = "https://graph.facebook.com/" + user_id + "/feed?message=MSG_STRING"
_url += "&access_token=" + access_token;
_url += "&name=NAME_STRING";
_url += "&link=LINK_URL";
_url += "&description=DESCRIPTION_STRING";
_url += "&method=post"; 
```

[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

# clearquest - ClearQuest 数据迁移到 JIRA

> ID：10786168
> 
> 赞同：1
> 
> 时间：2012-05-28T14:19:01.580
> 
> 标签：clearquest

我们计划从 ClearQuest 迁移到 JIRA。有没有人有迁移数据的经验（从 CQ 导出并导入到 JIRA）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T07:39:58.297

对于任何可能对未来感兴趣的人。我发现了以下内容：

[JIRA - 从其他问题跟踪器迁移](https://confluence.atlassian.com/display/JIRA/Migrating+from+Other+Issue+Trackers)

[JIRA Cookbook - 从 IBM Rational ClearQuest 迁移](https://confluence.atlassian.com/display/ATLAS/JIRA+Cookbook+-+Migration+off+IBM+Rational+ClearQuest)

我希望这可以帮助别人...

# r - 为什么在 R 中导致无效格式 '%d？

> ID：10786169
> 
> 赞同：5
> 
> 时间：2012-05-28T14:19:04.077
> 
> 标签：r

下面给出的代码是将二进制文件从 float32 转换为 16b，比例因子为 10。我收到 %d 无效错误。

```
setwd("C:\\2001")
for (b in paste("data", 1:365, ".flt", sep="")) {
   conne <- file(b, "rb")
   file1<- readBin(conne, double(), size=4,  n=360*720, signed=TRUE)
   file1[file1 != -9999] <- file1[file1 != -9999]*10
   close(conne)
   fileName <- sprintf("C:\\New folder (11)\\NewFile%d.bin", b)
   writeBin(as.integer(file1), fileName, size = 2) 
} 
```

结果：

```
Error in sprintf("C:\\New folder (11)\\NewFile%d.bin",  : 
invalid format '%d'; use format %s for character objects 
```

我 `%s`按照 R 的建议使用了。但是 1:365 的文件完全是空的

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T14:31:44.253

`%d`是字符串中整数变量的占位符。因此，当您使用 时`sprintf(%d, var)`，`var`必须是整数。

在您的情况下，该变量`b`是一个字符串（或一个字符对象）。因此，您使用字符串变量的占位符，即`%s`.

现在，如果您的文件是空的，那么您的代码中的其他地方一定有问题。你应该问另一个更具体的问题。

# c# - 在 IE 中 RedirectToAction 后清除会话？

> ID：10786170
> 
> 赞同：1
> 
> 时间：2012-05-28T14:19:06.133
> 
> 标签：c#, asp.net-mvc

我有一个系统，其中包含在 ASP.net MVC 中构建的许多表单，这些表单旨在通过 iframe 跨多个第 3 方网站使用。每个第 3 方站点都分配有一个唯一的 URL，例如

```
http://iframedomain.com/iframe/f9a14f53-0528-4ad1-b451-8895360e57e4 
```

控制器检查 Guid 是否有效，以及是否有分配给它的自定义 css 文件的路径。如果有，则此自定义 css 存储在 Session 变量中 - css 文件都位于 iframe 所在域的内容/样式中的子文件夹中。然后用户被重定向到正确的表单。

每个表单控制器都继承自一个通用控制器，其中有一个 OnActionExecuting 覆盖，它将自定义 css 传递到 VIewBag：

```
 protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (Session["iFrameCSS"] != null)
        {
            ViewBag.iFrameCSS = Session["iFrameCSS"];
        }

        if (Session["JQueryTheme"] != null)
        {
            ViewBag.JQueryTheme = Session["JQueryTheme"];
        }

        base.OnActionExecuting(filterContext);
    } 
```

然后布局文件会对此进行检查并导入正确的 CSS 文件：

```
@if (ViewBag.iFrameCSS != null)
{
    string cssFile = ViewBag.iFrameCSS.ToString();
    if (cssFile.StartsWith("http", StringComparison.CurrentCultureIgnoreCase))
    {
        <link rel="stylesheet" href="@cssFile" type="text/css" media="screen, projection" />
    }
    else
    {
        <link rel="stylesheet" href="@Url.Content("~/Content/style/" + cssFile + ".css")" type="text/css" media="screen, projection" />
    }
}
else
{
    <link rel="stylesheet" href="no-custom-css-file.css" type="text/css" media="screen, projection" />
} 
```

这在所有浏览器中都可以正常工作，除了 IE（在 7/8/9 测试），其中没有指向 css 文件的链接，并且使用了默认的 css 文件。我已经在本地进行了调试，并在 IE 中看到了不同的结果，其中 Session 工作正常并且肯定设置了 ViewBag 变量，但这根本无法在实时服务器上工作。我看不出这里有什么问题？我已经在 4 台不同的机器上进行了测试（4 个不同的人，他们的设置非常不同，结果都一样）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:46:18.150

也许这是跨域会话 cookie 的问题。设置 P3P 标头应该可以解决它。SO上有很多关于P3P的问题。

如果 iframe 与父级位于不同的域中，则它们是 3rd 方 cookie，并且在 Internet Explorer 和 Safari 中默认设置它们有一些限制。

Macros 通过使用 cookieless 会话解决了他的问题。

# android - Android getDefaultSharedPreferences

> ID：10786172
> 
> 赞同：62
> 
> 时间：2012-05-28T14:19:11.250
> 
> 标签：android, sharedpreferences

我的代码是：

```
final String eulaKey = "mykey";
final SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
boolean hasBeenShown = prefs.getBoolean(eulaKey, false); 
```

始终根据操作系统版本返回不同的值。在 2.2、2.3.4、3.2、4.0.3 中测试 - 返回正确值。但是对于带有 2.3.7 和 CianogenMod 7.1 的设备 Zte 刀片 - 结果总是错误的。我想 getBoolean 的默认值。

这是编写布尔值的代码：

```
final String eulaKey = "mykey";
final SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
SharedPreferences.Editor editor = prefs.edit();
editor.putBoolean(eulaKey, true);
editor.commit(); 
```

有人知道吗？

更新：将我当前的代码与我以前的代码版本进行比较 - 代码没有区别。唯一的区别在于清单：代码可以使用 minVersion=8 和 targetVersion=8 现在我正在使用 minversion=8 和 target=13 /because of Admob/ 进行编译。也许有些 API 发生了变化，但我对此一无所获。

解决方案： - 从快捷方式和菜单启动应用程序给了我不同的 DefaultSharedPreferences。从我的代码中删除 DefaultSharedPreferences 后 - 它运行完美。我不能只说：人们不会做捷径，所以我不得不更改代码。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-28T15:04:04.797

试试这种方式：

```
final String eulaKey = "mykey";
Context mContext = getApplicationContext();
mPrefs = mContext.getSharedPreferences("myAppPrefs", Context.MODE_PRIVATE);
SharedPreferences.Editor editor = mPrefs.edit();
editor.putBoolean(eulaKey, true);
editor.commit(); 
```

在这种情况下，您可以指定自己的首选项文件名 (myAppPrefs) 并控制对其的访问权限。其他操作模式包括：

*   MODE_WORLD_READABLE
*   MODE_WORLD_WRITEABLE
*   MODE_MULTI_PROCESS

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-03-12T11:00:51.447

如果您已升级到以 API 30 为目标，请将其放入您的 gradle 依赖项中：

`implementation 'androidx.preference:preference-ktx:1.0.0'//For Kotlin`项目

```
implementation 'androidx.preference:preference:1.1.1'//For Java Projects 
```

重新同步 Gradle 后，更改您的所有导入

```
import android.preference.PreferenceManager 
```

到

```
import androidx.preference.PreferenceManager 
```

# haskell - 为什么 Haskell 缺少文字 Data.Map 构造函数语法？

> ID：10786178
> 
> 赞同：21
> 
> 时间：2012-05-28T14:19:44.440
> 
> 标签：haskell, syntax

我对 Haskell 还是很陌生（断断续续地学习它）。我想知道为什么 Haskell 没有文字`Data.Map`构造函数语法，例如 Clojure 或 Ruby 中的 Map/Hash 构造函数语法。有原因吗？我认为由于 Haskell 确实有一个文字构造函数语法 for `Data.List`，所以应该有一个 for `Data.Map`。

这个问题根本不是批判的。我只想通过答案了解更多关于 Haskell 的信息。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-28T14:27:28.203

与 Clojure 和 Ruby 不同，Haskell 的有限映射是作为库提供的。这需要权衡取舍：例如，正如您所注意到的，有限映射没有内置语法；然而，因为它是一个库，我们可以（并且确实）有许多替代实现，作为程序员，您可以选择最适合您使用的实现。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-29T10:49:34.013

除了已经给出的答案（尽管是“历史事故”），我认为与在 Ruby 或类似事物`Data.Map`中相比，在 Haskell中的使用还有一些话要说；`Hash`其他语言中的类似地图的对象往往更多地用于一般的临时存储。

而在 Haskell 中，您`data`可以立即做出定义，而在其他语言中创建类往往有点重量级，因此我们发现即使对于具有众所周知结构的数据，我们也只会使用一个`Hash`或`dict`或类似的。事实上，我们有一个直接的语法来做到这一点，这使得它成为一个更具吸引力的选择。

与 Lisp 相比：使用`MAKE-HASH-TABLE`然后重复`SETF`ing 它相对烦人（类似于 using `Data.Map`），因此所有内容都被扔进嵌套列表中，因为它很方便。

同样，我很高兴存储数据最方便的选择是创建适合的新类型，然后`Data.Map`在我实际构建映射或哈希表作为内在组件时留待。在某些情况下，我认为语法会很好（通常只适用于较小的一次性程序），但总的来说我不会错过它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-01-05T13:17:59.783

实际上我不确定为什么没有人在答案中指出它（只有 sam boosalis 的评论）但是`OverloadedLists`你几乎可以得到`Map`and的字面语法`Set`：

```
{-# LANGUAGE OverloadedLists #-}

import Data.Map
import Data.Set

foo :: Map Int Int
foo = [(1,2)]

bar :: Set Int
bar = [1] 
```

从那里开始，只需再迈出一步即可获得更好看的地图，例如：

```
a =: b = (a,b)

ages :: Map String Int
ages = [ "erik"  =: 30
       , "john"  =: 45
       , "peter" =: 21 ] 
```

虽然我个人更喜欢显式而不是隐式，所以除非我正在构建一个 DSL，否则我仍然会坚持`fromList`并且`(foo, bar)`- Haskell 是关于大胜利而不是小胜利。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-28T16:30:27.130

Haskell 对列表有特殊的语法，因为在惰性函数语言中，它们或多或少地取代了命令式语言中的循环控制结构。因此，它们比`Map`宏伟计划中的重要得多。

另外，我知道你`[1,2,3]`说的是“列表语法”，但我想补充一点，列表*构造函数*语法*几乎*可以在 haskell-98 中实现，因为类型构造函数在以 开头时可以是中缀`:`，例如

```
data Pair = Int :-- Int 
```

所以列表构造函数`:`只是这个通用语法规则的一个*小*特例，它非常优雅。有些人错过了这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-02T17:36:28.723

Haskell 确实有一个 Map 构造函数，但它是“隐藏的”（就像面向对象范例中的私有方法一样）。鼓励您使用“公共”构造函数，例如*empty*、*singleton*或*fromList*。但是，如果您检查[https://hackage.haskell.org/package/containers-0.4.0.0/docs/src/Data-Map.html](https://hackage.haskell.org/package/containers-0.4.0.0/docs/src/Data-Map.html)上提供的代码，您会得到以下定义

```
data Map k a  = Tip
              | Bin {-# UNPACK #-} !Size !k a !(Map k a) !(Map k a) 
```

您可以使用*Tip*和*Bin*构造函数，但不建议这样做。

# objective-c - 即使实现了 addSkipBackupAttributeToItemAtURL 仍然备份到 iCloud？

> ID：10786179
> 
> 赞同：4
> 
> 时间：2012-05-28T14:19:56.033
> 
> 标签：objective-c, ios, icloud, ios5.1

我最近的 iOS 应用程序刚刚被拒绝，因为该应用程序将数据存储在 Documents 上，因此它由 iCloud 备份，这是不允许的，因为数据是从服务器下载的。

我现在正在尝试重建代码，并且在将数据存储在名为 Application Support 的文件夹中时遇到了困难。

但即使我使用 addSkipBackupAttributeToItemAtURL 它仍然显示为 iCloud 的备份。

我只针对 5.1，所以这不是版本问题。

我在下面添加了受影响的代码：

```
 NSString *newPath = [NSMutableString stringWithFormat:@"%@/Library/Application Support/", NSHomeDirectory()];

    if (![[NSFileManager defaultManager] fileExistsAtPath:newPath]) //Does directory already exist?
    {
        if (![[NSFileManager defaultManager] createDirectoryAtPath:newPath
                                       withIntermediateDirectories:NO
                                                        attributes:nil
                                                             error:&error])
        {
            NSLog(@"Create directory error: %@", error);
        }

    }

    NSString *guidesPath = [newPath stringByAppendingPathComponent:@"/Guides"];
    if (![[NSFileManager defaultManager] fileExistsAtPath:guidesPath])  //Does directory already exist?
    {
        if (![[NSFileManager defaultManager] createDirectoryAtPath:guidesPath
                                       withIntermediateDirectories:NO
                                                        attributes:nil
                                                             error:&error])
        {
            NSLog(@"Create directory error: %@", error);
        }

    }

    NSString *dataPath = [guidesPath stringByAppendingPathComponent:dbName];

    if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
    {
        if (![[NSFileManager defaultManager] createDirectoryAtPath:dataPath
                                       withIntermediateDirectories:NO
                                                        attributes:nil
                                                             error:&error])
        {
            NSLog(@"Create directory error: %@", error);
        }

    }

    NSString *newGuidesPath = [dataPath stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSURL *guidesURL = [NSURL URLWithString:newGuidesPath];
    [self addSkipBackupAttributeToItemAtURL:guidesURL];

    NSString* path = [dataPath stringByAppendingPathComponent: 
                      [NSString stringWithString: finalName] ];
    if (![fileManager fileExistsAtPath:path]) {
        [myData writeToFile:path atomically:YES];
        NSString *docFile = [dataPath stringByAppendingPathComponent: @"guideid.txt"];
        [[guideID dataUsingEncoding:NSUTF8StringEncoding] writeToFile:docFile atomically:NO];
        DLog(@"Saved database here:%@", path);
    }else{
        DLog(@"Already exists, no need to copy");
    }

} 
```

* * *

```
 - (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{

assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

NSError *error = nil;
BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]
                              forKey: NSURLIsExcludedFromBackupKey error: &error];
if(!success){
    NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
}

return success;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T14:38:54.730

实际上找到了一个解决方案，我已经对不需要的 URL 进行了编码。刚刚添加到文件夹

```
 NSURL *guidesURL = [NSURL fileURLWithPath:guidesPath];
    [guidesURL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:NULL]; 
```

并跳过了排除方法，只是在代码中标记了它，这似乎有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:32:49.070

您是否尝试从 icloud 设置在您的设备上创建新备份？

# php - 非常简单的 PHP + MySql 登录表单不起作用？

> ID：10786182
> 
> 赞同：0
> 
> 时间：2012-05-28T14:20:14.583
> 
> 标签：php, mysql, html, login

我目前正在构建一个非常非常基本的登录脚本，它基本上连接到数据库，并检查用户在表单中输入的值是否匹配。但是，由于某种原因，当单击提交按钮时，我的代码拒绝执行任何操作！？？这是代码...

```
<?php
mysql_connect("localhost", "username", "password");
mysql_select_db("dbname");
?>

<body>
<?php
if(isset($_POST['submit'])){
$username = $_POST['username'];
$password = $_POST['password'];

$result = mysql_query("SELECT * FROM users WHERE username='$username' AND password='$password'");
$num = mysql_num_rows($result);
if($num == 0){
echo "Bad login, go <a href='login.php'>back</a>.";
}else{
session_start();
$_SESSION['username'] = $username;
header("Location: admin.php");
}

}else{
?>

<form action='login.php' method='post'>
   Username: <input type='text' name='username' /><br />
   Password: <input type='password' name='password' /><br /><br />
   <input type='submit' value='Login' />
</form>
<?php
}
?>
</body> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T14:22:32.063

您正在检查

```
if(isset($_POST['submit'])){ 
```

...但`$_POST['submit']`永远不会设置，因为您没有为任何表单控件提供`name="submit"`属性。

将提交按钮更改为：

```
<input type='submit' name='submit' value='Login' /> 
```

还请[清理您的数据库输入](http://bobby-tables.com/)，最好通过参数化查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:23:29.627

简单的，试试

`<input type='submit' name='submit' value='Login' />`

代替

`<input type='submit' value='Login' />`

希望这可以帮助！

编辑：你还没有命名提交

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:29:57.933

DaveRandom 给出的答案对我来说似乎是最有效的。

但是，您的代码中有几个需要首先处理的故障。

你没有清理你的输入，这可能是致命的，尤其是在登录表单中。

利用

```
 mysql_real_escape_string($_POST['username']));
  mysql_real_escape_string($_POST['username'])); 
```

并采取其他措施避免SqlInjection。

您的表单是否重定向到正确的页面？如果它所依赖的页面名称是 login.php 它应该可以工作，但您也可以使用

```
 <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post"> 
```

无论如何，我认为在 self 页面中处理不是一个好习惯，因为您应该始终重定向到处理程序页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:25:10.287

您是否发布到与表单相同的页面？

如果是，请尝试删除 action="login.php"。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T14:29:09.587

1.  成功登录后使用`header(..)`将不起作用。这是因为一些字符可能已经发送到浏览器。您需要确保没有字符被发送出去。有点这样：

    这里的所有其他 HTML 内容..
2.  更改`if(isset($_POST['submit']))`为`if(isset($_POST['username']))`。这是因为您`submit`输入的内容没有“名称”字段。测试有的东西。

3.  正如其他人指出的那样，您的脚本对 SQL 注入是开放的。通过使用来修复它

    *   `mysql_real_Escape_string($_POST['username']);`
    *   或[准备好的陈述](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T14:31:00.060

这是不对的，您的会话将受到影响，因为您已经输出了一些内容。

您的 action="login.php" 必须指向该文件，例如，您的示例脚本保存在 login.php 中，这样就可以了。如其他答案所述，您必须设置`name="something"`为通过`$_POST['something']`

```
<?php // some php scripting ?>

<!-- blank lines also counts as output --> 
<body>
  <?php session_start(); header("What ever"); ?>
</body> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-28T14:32:12.070

并且还建议放在`session_start()`代码的顶部。

所以试试

```
<?php session_start(); ... ?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-01T20:38:10.717

登录页面（php-mysql）的实现如下图所示：

```
<?php
if (!isset($_SESSION)) {
session_start();
}

$loginFormAction = $_SERVER['PHP_SELF'];
if (isset($_GET['accesscheck'])) {
   $_SESSION['PrevUrl'] = $_GET['accesscheck'];
}

if (isset($_POST['username'])) {  //from form username textbox
   $loginUsername=$_POST['username'];
   $password=$_POST['password'];
   $MM_fldUserAuthorization = "access_level"; // from db user access-level
   $MM_redirectLoginSuccess = "login_success_page.php";
   $MM_redirectLoginFailed = "login_failed_page.php";
   $MM_redirecttoReferrer = false;
   mysql_select_db($DB_NAME, $DB_LINK);

   $Login_query=sprintf("SELECT username,password, access_level FROM tbl_user WHERE username=%s AND password=%s",
   GetSQLValueString($loginUsername, "text"), GetSQLValueString($password, "text"));

   $Login = mysql_query($Login_query, $DB_LINK) or die(mysql_error());
   $loginFoundUser = mysql_num_rows($Login);

   if ($loginFoundUser) {

      $loginStrGroup  = mysql_result($Login,0,'access_level');

      if (PHP_VERSION >= 5.1) {session_regenerate_id(true);} else {session_regenerate_id();}

      $_SESSION['MM_Username'] = $loginUsername;
      $_SESSION['MM_UserGroup'] = $loginStrGroup;

      if (isset($_SESSION['PrevUrl']) && false) {
         $MM_redirectLoginSuccess = $_SESSION['PrevUrl'];
      }
      header("Location: " . $MM_redirectLoginSuccess );
   }
   else {
      header("Location: ". $MM_redirectLoginFailed );
   }
}
?> 
```

# asp.net - 如何使用 FakeItEasy 伪造 System.Security.Principal.IIdentity？

> ID：10786184
> 
> 赞同：1
> 
> 时间：2012-05-28T14:20:18.630
> 
> 标签：asp.net, asp.net-mvc-3, wif, fakeiteasy

在我的应用程序中，用户通过 WIF 登录。用户的凭据存储在`System.Security.Principal.IIdentity`. 现在我想测试`CreateUser()`方法。我必须以某种方式伪造那个对象。我尝试做这样的事情： -extract 方法返回该对象：

```
public IIdentity GetIdentity()
{
    return Thread.CurrentPrincipal.Identity;
} 
```

然后在测试文件中做这样的事情：

```
 var identity = new GenericIdentity("mymail@mydomain.com");
    A.CallTo(() => _userRepository.GetIdentity()).Returns(identity); 
```

但它不起作用。任何想法如何以最好的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T19:21:23.470

看看 WIF 的 ClaimsPrincipalHttpModule。它将 Windows 标识转换为 IClaimsPrincipal 而无需 STS。

还可以查看[SelfSTS](http://archive.msdn.microsoft.com/SelfSTS/)，它是一个非常有用的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-24T21:58:46.073

创建一个假的 WindowsIdentity 类：

```
public class FakeWindowsIdentity : WindowsIdentity
{
    private readonly string _name;

    public FakeWindowsIdentity(string sUserPrincipalName) 
        : base(GetAnonymous())
    {
        _name = sUserPrincipalName;
    }

    public override string Name => _name;
} 
```

我正在使用 FakeItEasy，所以我创建了一个`IPrincipal`像这样的假货：

```
IPrincipal fakeUser = A.Fake<IPrincipal>();
A.CallTo(() => fakeUser.Identity)
    .Returns(new FakeWindowsIdentity("domain\\username")); 
```

分配给线程：

```
Thread.CurrentPrincipal = fakeUser; 
```

# python - Python for 循环避免类似匹配

> ID：10786189
> 
> 赞同：0
> 
> 时间：2012-05-28T14:20:52.583
> 
> 标签：python, for-loop, match

考虑以下列表：

```
items = ['about-conference','conf'] 
```

使用以下 for 循环对列表进行迭代，打印“about-conference”和“conf”

```
for word in items:
    if 'conf' in word:
        print word 
```

如何让 if 语句仅在遇到完全匹配时才证明为真，即仅打印“conf”？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T14:22:07.623

不要使用`in`, 用于`==`测试是否完全相等：

```
if word == "conf":
   print word 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:23:18.467

您可以执行以下操作：

```
for word in list:
    if 'conf' == word.strip():
        print(word) 
```

剥离确保没有虚假字符，例如空格或行尾。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T14:31:18.023

不完全确定你想要什么，但如果你正在寻找这样的东西，它使用单词边界，所以它由破折号、空格、字符串开头等分隔。

```
import re
for word in items:
    if 'conf' in re.findall(r'\b\w+\b', word):
        print 'conf' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T14:23:15.143

尝试这个：

```
for word in list:
    if word == 'conf':
        print word 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T15:30:29.073

在此特定示例中，您可以将其重写为：

```
items = ['about-conference','conf']
if 'conf' in items:
    print 'conf' 
```

# ios - Facebook NSArray 问题

> ID：10786199
> 
> 赞同：2
> 
> 时间：2012-05-28T14:22:02.727
> 
> 标签：ios, ipad, facebook-graph-api, nsarray, facebook-wall

现在正在为 iPad 制作 Facebook 应用程序。我目前正在将用户的墙加载到 tableview 中。问题是当它遇到图像时，Facebook 正在重新调整图像的低分辨率。所以为了解决这个问题，我找到了这个[答案](https://stackoverflow.com/questions/9821586/getting-high-resolution-photos-that-were-posted-on-a-page-wall-feed)，但是我将如何在 iOS SDK 中做到这一点？因为当我得到 Facebook 结果然后确定对象 ID，然后重新查询 Facebook 时，我如何将它们放入 NSArray 中，就像上面的答案中提到的那样。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T21:17:42.963

很简单，它以 NSArray 的形式交付给您！您只需要知道如何从结果对象访问它：

```
- (void)request:(FBRequest *)request didLoad:(id)result {
    // here's the array
    NSArray *images = [result objectForKey:@"images"];
    //then here's some bonus code for looping through them
    for (NSDictionary *image in images) {
        NSLog(@"source url=%@", [image objectForKey:@"source"]);
        //height and width parameters are also available 
    }
} 
```

# debugging - Facebook 对象调试器：无法从 URL 检索数据。(200)

> ID：10786209
> 
> 赞同：5
> 
> 时间：2012-05-28T14:22:29.537
> 
> 标签：debugging, facebook-like, share, meta-tags

当我使用对象调试器时，刮板无法在我的页面上看到我的 OG 内容。调试器说“无法下载：无法从 URL 检索数据。”，即使它是 200 OK 并显示正确的提取和规范 URL。我有一个子域，它工作正常。所以不确定我的主域会发生什么。当点击 Scraped URL 查看我们的爬虫为您的 URL 看到的确切内容时，它只显示空白页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T14:39:45.950

您的网站似乎有一些 HTML 错误： http://validator.w3.org/check?uri= [http%3A%2F%2Fspandooly.de](http://validator.w3.org/check?uri=http%3A%2F%2Fspandooly.de)

您应该在尝试验证您的站点之前修复它们。

有趣的是，我创建了您页面的副本，并且似乎在 HTML 中没有任何更改的情况下进行了验证。您的网络服务器可能正在做一些奇怪的事情（根据标题，`charset`缺少或没有）：

[http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.webniraj.com%2Fspandooly.html](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.webniraj.com%2Fspandooly.html)

# android - Android：在没有 SurfaceView 的情况下永远不会调用 onPreviewFrame

> ID：10786213
> 
> 赞同：10
> 
> 时间：2012-05-28T14:22:37.290
> 
> 标签：android, camera, surfaceview, preview

在某些设备上，如果设置为 no 来显示相机预览，`onPreviewFrame`则不会调用。`SurfaceView`但是，我在服务中处理相机，所以我不能设置，`SurfaceView`但我不想有可见的预览。

如何才能做到这一点？我可以以编程方式创建一个`SurfaceView`并设置它`Camera::setPreviewDisplay`吗？

这一定是可能的还是不可能的？

它适用于几乎所有没有`SurfaceView`HTC One X 和 Google Nexus One 的手机...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T08:16:13.423

根据[这个问题](https://stackoverflow.com/questions/5788993/use-android-camera-without-surface-view)，创建`SurfaceView`代码可以正常工作。尽管我认为您无法通过服务创建它。

`SurfaceView`另一种方法是在 a内创建一个 1px-1px`RelativeLayout`并在其上用其他视图隐藏它。（可见性应该仍然是`VISIBLE`）。我们将这个技巧用于[Path](http://bit.ly/wT3Vpr) camera UI，我们通过 OpenGL 渲染预览缓冲区，它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:21:58.710

根据易于配置的文档，可见和显示的表面视图是激活相机预览所必需的。虽然它可能会被覆盖

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T07:26:18.630

从 API 11 开始，您可以使用 a`SurfaceTexture`而不是 a`SurfaceView`从相机获取帧。然后，而不是使用`Camera.setPreviewDisplay`，只需使用`Camera.setPreviewTexture`。

[This](https://stackoverflow.com/questions/24205661/camera-frames-in-a-service-background-process) answer以及[this one](https://stackoverflow.com/questions/11097178/android-camera-in-background?rq=1)讨论了这一点。

# django - Django 模板条件变量赋值

> ID：10786214
> 
> 赞同：15
> 
> 时间：2012-05-28T14:22:43.473
> 
> 标签：django, django-templates, django-1.4

我想根据变量是否存在为变量分配不同的值，这可能吗？我的非工作示例可能会更清楚：

```
{% if username %}
    {% with menu_user=username %}
{% elif recent_users %}
    {% with sorted_users=recent_users|dictsortreversed:"timestamp" %}
    {% with menu_user=sorted_users.0.username %}
{% endif %}
{% if menu_user %}
    <div id="menu">
        <ul>
            <li><a href="/user/{{ menu_user|urlencode }}">Profile</a></li>
            <li><a href="/user/{{ menu_user|urlencode }}/products/">Products</a></li>
        </ul>
    </div>
{% endif %}
{% if recent_users %}
    {% endwith %}
{% endif %}
    {% endwith %} 
```

我尝试做的伪代码：

```
if username:
    menu_user = username
elif recent_users:
    menu_user = sorted(recent_users)[0]['username']

if menu_user:
    <div id="menu">
        <ul>
            <li><a href="/user/{{ menu_user|urlencode }}">Profile</a></li>
            <li><a href="/user/{{ menu_user|urlencode }}/products/">Products</a></li>
        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-28T14:38:41.643

*更新* 然后最好自定义一个模板标签，比如

```
@register.inclusion_tag('menu_snippet.html')  # or you could use takes_context=True and fetch values from the context
def render_menu(username, recent_users):
    if username:
        menu_user = username
    elif recent_users:
        # sorted here could be replaced by min or QuerySet method, it depends
        # for example: 
        # menu_user = min(recent_users, key=lambda u:u.timestamp).username
        menu_user = sorted(recent_users)[0]['username']
    return {'menu_user':menu_user}

# in template, it looks like
{% render_menu username recent_users %} 
```

* * *

将代码放在视图中要好得多。就像您的伪代码一样，干净且可读。

如果您仍想编写模板，我更喜欢类似

```
{% if username %}
    <div id="menu">
        <ul>
            <li><a href="/user/{{ username|urlencode }}">Profile</a></li>
            <li><a href="/user/{{ username|urlencode }}/products/">Products</a></li>
        </ul>
    </div>
{% else %}
    {% if recent_users %}
    {% with sorted_users=recent_users|dictsortreversed:"timestamp" %}
    {% with menu_user=sorted_users.0.username %}
    <div id="menu">
        <ul>
            <li><a href="/user/{{ menu_user|urlencode }}">Profile</a></li>
            <li><a href="/user/{{ menu_user|urlencode }}/products/">Products</a></li>
        </ul>
    </div>
    {% endwith %}{% endwith %}
    {% endif %}
{% endif %} 
```

根据您的实际使用情况，自定义模板标签或包含标签也可能有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-25T08:04:40.483

模板标签：

```
@register.assignment_tag
def alias(obj):
    """
    Alias Tag
    """
    return obj 
```

模板：

```
{% alias sorted_users.0.username as menu_user %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:39:46.667

创建一个模板标签，将 username 和 recent_users 作为参数，然后输出菜单。这样你就可以让你的模板免受这种逻辑的影响。

# java - Java 设计：组件、模型、函数

> ID：10786218
> 
> 赞同：1
> 
> 时间：2012-05-28T14:23:14.087
> 
> 标签：java, object

我有三种类型的对象：

*   组件：由包和名称标识
*   模型：由包和名称标识
*   功能：由名称标识

关系定义如下：

*   一个组件可以有零个或多个模型 [0..*]
*   一个模型可以有零个或多个函数 [0..*]
*   一个函数可以在一个或多个模型中 [1..*]
*   一个模型可以是零个或多个组件[0..*]

自然的设计是让 Component 拥有一组对 Model(s) 的引用，让 Model 拥有一组对 Function 的引用。通过这种设计，我可以轻松地以自上而下的方式导航关系（并轻松回答诸如“此模型中包含哪些功能？”之类的查询。

问题是我需要更多的灵活性。我想要一些易于导航的东西来回答这些查询：

1.  给定一个函数名称，该函数在哪些模型中以及在哪些组件中被引用？
2.  给定一个模型包+名称，该模型引用了哪些组件？
3.  有没有被任何组件引用的模型？

`HashMap<Component, Model>`我曾想过将组件、模型和函数作为简单的 POJO，并使用多个 HashMap ( , `Hashmap<Model, Component>`, `HashMap<Model, Function>`, )跟踪它们之间的引用，`HashMap<Function, Model>`但这对我来说似乎效率低下。

你能给我推荐一些更好的设计吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:12:34.293

表示您的问题域的*逻辑*数据结构是一个*图*，但这样做实际上不会为您提供回答您作为示例引用的查询的“有效”方法。了解这些查询是否仅仅是您从您想象的更大集合中想到的示例，或者它们是否构成了完整的需求规范，这将有所帮助。

我怀疑你不会喜欢这个答案，但我认为你在这里最能受益的是*关系数据库*。如果您希望避免使用此类数据库的一些正常复杂性，您可以嵌入一个将所有数据保存在内存中的数据库。*SQLite* 是一种需要考虑的关系数据库，但还有许多其他可用于 Java 的数据库。

我根据你的措辞得出这个结论。*您提到在两个*方向上导航图形边缘（或实体之间的聚合关系） 。这在问题的关系模型中表达起来很简单，但是当您使用内存中的结构（例如您提出的映射）时变得非常困难；前者对关系之间的外部引用没有隐含的方向性，而后者只能表示从一个实体到另一个实体的单向引用。

在关系模型中，您可以如下表达事实：

*   有称为*Components*的实体，它们具有这些属性。
*   有一些名为*Models*的实体，它们具有这些其他属性。
*   *Components*和*Models*之间存在链接，其中每个*Model*都可以从任意数量的*Components*中“访问” ，并且每个*Component* “可以访问”任意数量的*Models*。（请注意，我没有写“包含在”或“拥有”或任何其他暗示排他性的关系。）

关系模型允许人们根据这些关系评估查询，而不会对链接“指向”的方式有任何偏见。当然，链接是具有某种意义的断言——可能是定向的，使逻辑图成为有*向*图而不是*无向*图——特定于您的问题域，但理解该含义的是您的应用程序，而不是数据库或关系模型它的运作。

除了逻辑模型之外，尽可能高效地回答您的查询将需要您指定数据库维护一些基于非约束的*索引*。一些记录可以有效地查找，而无需您要求超出完整性约束的任何特殊内容，因为数据库可能会自行构建索引以帮助有效执行所述约束。*但是，虽然它可能能够快速告诉您给定的Component*和*Model*之间是否已经存在任何配对，但它无法回答哪些*Components*（如果有）引用了特定的*Model*。

请求数据库维护此类索引类似于您维护您最初提出的一些内存中映射，但设计方法有所不同：在您的设计中，一些可能出现的查询*无法回答根本*没有，因为这些关系不会以一种可以导航的方式被捕获，即使是低效的。但是，对于数据库，适应新查询通常是定义附加索引以帮助加快对*已经存在的数据的查询*. 换句话说，数据库仍然可以回答您的新查询；它可能不得不以令人尴尬的方式挣扎。直到您定义了正确的索引，它才能像您预期的那样高效地处理这些查询。

我在这里再提一点。*在这里使用关系数据库在技术上*可能有点过分，但它是正确的*教学*选择。这是您的问题应得的解决方案。您可以构建更窄、更量身定制的东西，提供数据库功能的一小部分并满足您的需求，但这样做，我认为您错过了这里更大的设计课程。您将使用您的问题来学习有关如何*实现*数据库的知识，而不是学习如何*使用*数据库来建模您的问题。使后者成为可能和容易是业界提供这种数据库技术的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:29:29.650

允许您跟踪您在单个集合中描述的所有关系的数据结构是`MultiMap`. [**Java 教程的Map Interface**部分](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)讨论了 Java MultiMaps （您必须向下滚动到 MultiMaps 部分或点击链接并在页面上搜索 MultiMap；本教程的该部分没有直接锚点） . `MultiMap`Java有可用的实现：

*   [Apache Commons 集合：**org.apache.commons.collections.MultiMap**](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html)
*   [Google 收藏库：**com.google.common.collect.MultMap**](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multimap.html)

使用 a `MultiMap`，您可以为您的对象类型创建一个映射，该映射可以包含或聚合其他对象类型：

```
//Associate multiple Models to one Component:
multiMap.put( componentD, modelN );
multiMap.put( componentD, modelO );
multiMap.put( componentD, modelP );
//Associate multiple Models to a Component (some different, some the same)
multiMap.put( componentE, modelQ );
multiMap.put( componentE, modelR );
multiMap.put( componentE, modelN ); //also associated with componentD
//And associate multiple Functions to one Model:
multiMap.put( modelQ, functionG );
multiMap.put( modelQ, functionH );
multiMap.put( modelQ, functionI ); 
```

您可以稍后检索与`Collection`任何映射键关联的那个。这是使用 Apache Commons Collections `MultiHashMap`[^(api-doc)](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiHashMap.html)的示例：

```
Collection modelFunctions = multiMap.get( modelQ ); 
```

这种方法将使自顶向下从`Component`to`Model`到to 遍历变得容易`Function`。但是，如果将每个关系的两端都添加到`MultiMap`. 例如，要建立 a`Model`和 a之间的关系`Function`，您可以：

```
multiMap.put( modelR, functionJ );
multiMap.put( functionJ, modelR ); 
```

因为这两种关系都已被映射，所以您可以轻松检索`Function`包含在 a 中的所有 s `Model`（如上例所示），或者同样轻松地检索所有`Model`包含 a 的 s `Function`：

```
Collection functionModels = multiMap.get( functionJ ); 
```

当然，这也意味着如果你想打破关系，你必须记住从 MultiMap 中删除这两个映射，但这相当简单。我希望这可以帮助你 -

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T00:34:45.593

另一种选择是从*创建*和*查询中**抽象*出来，因此当它成为*性能*/*易用性*方面的瓶颈时，可以轻松地*优化*/*扩展*某些实现。

 ***这样的界面如下所示：

```
public interface IEntityManager {

    // methods for retrieving entities by plain queries

    Component getComponent(String package, String componentName);

    Model getModel(String package, String modelName);

    Function getFunction(String name);

    // more specific queries

    List<Component> getComponents(Function function);

    List<Model> getModels(Function function);

    // even more specific queries ...
} 
```

通过这种方式，可以在生产代码中使用此接口，同时提供具有所需*性能*级别的任意实现。

现在，关于具体实现 - 取决于是否 all`Component`和实例及其关系`Model`略有不同：`Function`

1.  *在应用程序开始*时的某处创建（例如，在*桌面应用程序*的方法*开始*处或在Web*应用程序*中），并且在应用程序执行期间不会更改`main`*`ServletContextListener.contextInitialised`*
***   在应用程序执行期间创建/删除/更新**

 **让我们从第一种情况开始，因为它更简单：应该确保所有`Component`,`Model`和`Function`实例（以及它们之间的关系）对于`IEntityManager`使用这些实体的逻辑之间共享的实例都是已知的。实现这一点最直接的方法之一是将实体类与实现放在同一个 Java 包中`IEntityManager`，并使它们的构造函数包私有，从而将创建逻辑移至具体`IEntityManager`实现：

```
package com.company.entities;

public class Component {
    public final String package;
    public final String name;

    Component(String package, String name) {
        this.package = package;
        this.name = name;
    }

    // ...
}

// similar Model and Function class declarations

public class EntityManager implements IEntityManager {

    private final Map<Pair<String, String>, Component> components = new HashMap<Pair<String, String>, Component>();
    private final Map<Pair<String, String>, Model> models = new HashMap<Pair<String, String>, Model>();
    private final Map<String, Function> functions = new HashMap<String, Function>();

    // variation of factory-method
    public Component addComponent(String package, String name) {
        // only this EntityManager can create instances
        // so one can be sure all instances are tracked by it
        final Component newComponent = new Component(package, name);
        components.put(new Pair(package, name), newComponent);
    }

    // ... addModel, addFunction methods

    public void addFunctionToModel(Function function, Model model) {
        // here one should store 'somehow' information that function is related to model
    }

    public void addModelToComponent(Model model, Component component) {
        // here one should store 'somehow' information that model is related to component
    }

    // ... other methods
} 
```

请注意，在第一种情况下（所有实体都是在应用程序开始时创建的），也可以使用**Builder**模式来创建`EntityManager`类的实例——这将清楚地从使用中抽象出创建逻辑。但是，在第二种情况下，应该在类中具有类似`addComponent`,的方法`addModelToComponent`（对于单个实例的多线程使用，`EntityManager`应考虑使方法修改其状态**thread-safe**）。

最后，关于应该如何存储实体之间的关系：*没有有效存储/检索具有这种关系的实体的灵丹妙药*。我想说，如果一个实体的关系不超过 1000 个，那么搜索`HashMap<String, Function>`将很快，不应该成为瓶颈。如果它成为瓶颈，应该彻底检查哪种查询更频繁使用，哪些很少使用，并根据观察调整`EntityManager`内部实现 - 因此建议抽象所有`IEntityManager`接口。

Concerning instance of `EntityManager` in application - obviously, there should be only one instance of it (unless one has very special case). One can achieve this using `Singleton` pattern (less preferred solution, though it may work fine for some time), or simply instantiating `EntityManager` at the *beginning* of application and passing explicit instances to classes / methods which need it (more preferred solution).

Hope this helps ...*****

# javascript - flash 支持哪些视频格式？

> ID：10786220
> 
> 赞同：0
> 
> 时间：2012-05-28T14:23:15.823
> 
> 标签：javascript, flash, video, codec

我想为我的小学校添加视频上传支持，经过一些研究，我遇到了示例代码：

```
exec("ffmpeg -i ".$dynamic_path."/".$ moviepath."".$fileName." 
 -sameq -acodec mp3 -ar 22050 -ab 32 -f flv -s 320x240 ".$dynamic_path."/".$flvpath."myflv.flv"); 
```

我知道这将保证转换，但我使用的是共享主机，所以我想知道 flash 支持哪种格式，以及他们是否支持任何 javascript/flash 来播放视频文件而无需转换。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T14:30:51.283

这就是我们公司的谋生手段，我们已经达到 mp4 成为该国几乎所有高中/学院/大学的标准 - 最终列表可以在这里看到：

[http://helpx.adobe.com/flash/kb/supported-codecs-flash-player.html](http://helpx.adobe.com/flash/kb/supported-codecs-flash-player.html)

他们似乎都喜欢的视频播放器是 JW Player，它可以在[http://www.longtailvideo.com/players/jw-flv-player/](http://www.longtailvideo.com/players/jw-flv-player/)找到。另一个是[Flowplayer](http://flowplayer.org/)，尽管我在这方面的经验有限。JWPlayer 付费/免费之间的唯一区别是水印，因此您可以在购买之前尝试一下这个和 Flowplayer。

# c# - 在 ReportViewer 中更改按列顺序分组

> ID：10786223
> 
> 赞同：0
> 
> 时间：2012-05-28T14:23:21.737
> 
> 标签：c#, visual-studio-2010, reporting, report-viewer2010

我有一个 rdlc，我正在其中构建报告。

我正在使用按 tablix 数据集的字段进行分组的 tablix，如下所示：

![](../Images/97d71d42534f79493ebebeb26a9e474d.png)

当我用数据填充报表并刷新它时，结果如下：

![](../Images/d5419fa4a86bc6979e800211d649a9f8.png)

现在，我希望第一列（由字段“nome_terr”分组）不是排在第一位，而是排在第二位。第一列必须是“territorio_emp”。如果它是一个普通的列，我会移动它，但是作为 Group By 列，我不知道该怎么做。

想法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T06:28:17.537

如果您知道 Territorio_Emp 数据与您的 Nome_Terr 列是 1-1 相关的，您可以先按 Territorio_Emp 分组，然后按 Nome_Terr 列分组。

如果那不可能，您可以保持原样，但将组的宽度设置为第 0 列，因此它基本上是隐藏的。只需拖动列标题分隔符。

# assembly - 如何将此代码更改为 ARM 汇编指令？

> ID：10786225
> 
> 赞同：2
> 
> 时间：2012-05-28T14:23:24.560
> 
> 标签：assembly, arm

如何将此代码更改为 ARM 汇编指令？我想在android内核中运行这段代码。但我不知道如何使用ARM汇编指令。

```
#define _syscall3(type,name,type1,arg1,type2,arg2,type3,arg3) \
type name(type1 arg1,type2 arg2,type3 arg3) \
{ \
long __res; \
__asm__ volatile ("int $0x80" \
       : "=a" (__res) \
       : "0" (__NR_##name),"b" ((long)(arg1)),"c" ((long)(arg2)), \
                "d" ((long)(arg3))); \
__syscall_return(type,__res); \
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:35:57.170

您在 ARM 上需要的是“软件中断”指令，它大致相当于 x86 上的“int”：

```
swi 0  ;  0 is the interrupt vector for "syscall" 
```

您可以在此处获得概述：[OSDev Wiki on ARM](http://wiki.osdev.org/ARM_Overview)

ARM/Android 的“hello, world”可以在这篇[文章中找到](http://peterdn.com/post/e28098Hello-World!e28099-in-ARM-assembly.aspx)

# sql-server - 编程实体框架示例不返回身份

> ID：10786228
> 
> 赞同：0
> 
> 时间：2012-05-28T14:23:33.287
> 
> 标签：sql-server, entity-framework-4, azure, identity-column, savechanges

```
var newcontact = context.Contact.CreateContact(0, "Julio", "Bartowski", DateTime.Now, DateTime.Now, null);

var nAddr = Address.CreateAddress(0, "Home", 0, DateTime.Now, null);
nAddr.Contact = newcontact;
nAddr.Dump();

var newaddress = new Address(){
    Street1 = "5907 Hollow Oak Ct",
    City = "Burke",
    StateProvince = "VA",
    CountryRegion = "US",
    PostalCode = "22015",
    AddressType = "Home",
    ModifiedDate = DateTime.Now
};
newaddress.Contact = newcontact;

this.AddToContacts(newcontact);  //I get an error here when new Addresses are waiting for the ContactID value.
this.SaveChanges();
newcontact.Dump(); 
```

我的目标是使用带有 SQL Server 后端的 Visual Studio 11 Beta（2012 年 5 月 26 日）中的最新 NuGet 将 Access 作为后端使用 Access 作为后端升级到带有实体框架 (EF) 的 MVC3 Razor 页面的旧的 1990 年代经典 ASP 应用程序。最终，我们会将应用程序从客户端服务器移到云中并移至 Azure。

从零知识开始并关注[对象关系阻抗不匹配](http://en.wikipedia.org/wiki/Object-relational_impedance_mismatch)，我尝试在控制台应用程序和 LinqPad 中使用 EF 示例的基本介绍（一种非常快速、方便、简单的方法来开发和测试查询:-) Windows 7 笔记本电脑。

来自 Julia Lerman 的第一版编程实体框架的第 130 页的 BreakAway Geek Adventure (BAGA) 演示似乎是一个不错的起点。我对自我跟踪实体和附加和分离、AutoMapper 和实体框架的其他方面了解不多，但我知道基本介绍不应该让我想把使用微软 EF 的想法冲到马桶上去Ruby-on-Rails ActiveRecord 和 Amazon Web Services (AWS) 上的 LAMP 堆栈。

下面的 C# EF 示例片段来自一位公认的专家，应该非常简单......不幸的是，Stack Overflow 中包含“可能”和“可能”的大量答案表明 EF 通常没有被很好地理解。

例如，[ADO.NET Entity Framework 和标识列](https://stackoverflow.com/questions/120755/ado-net-entity-framework-and-identity-columns)以及对 MSDN 的引用都没有帮助。

[虽然 MSDN 说 EF 在http://blogs.msdn.com/b/dsimmons/archive/2008/08/10/ef-faq-entity-services.aspx#Section_17](http://blogs.msdn.com/b/dsimmons/archive/2008/08/10/ef-faq-entity-services.aspx#Section_17)上支持服务器生成的键值， 但我不相信他们，因为当我向实体集/表添加行/记录/实体时，EF 中不会返回联系人的身份，导致后续插入取决于 ContactID 失败。

本书[的勘误网站](http://shop.oreilly.com/product/9780596520298.do)没有给出很多关于调试的提示。在 Lerman 女士的第 1 版和第 2 版之间，基本的 EF 基础知识会发生很大变化吗？当我告诉她我的新小狗开始吃我新买的第一版时，她确实建议我把它还给他，给她买新书。

有没有其他人有这个问题？由于我是乘坐短途巴士长大的，因此问题可能出在椅子和键盘之间。希望这里有足够的信息来复制问题或提供一些调试提示。

Contact 表在数据库中定义了一个自动递增的主键。这是 T-SQL：

```
CREATE TABLE [dbo].[Contact](
    [ContactID] [int] IDENTITY(1,1) NOT NULL,
    [FirstName] [nvarchar](50) NOT NULL,
    [LastName] [nvarchar](50) NOT NULL,
    [Title] [nvarchar](50) NULL,
    [AddDate] [datetime] NOT NULL,
    [ModifiedDate] [datetime] NOT NULL,
    [RowVersion] [timestamp] NOT NULL,
 CONSTRAINT [PK_Contact] PRIMARY KEY CLUSTERED 
(
    [ContactID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

Address 表的 ContactID 与上面的 Contact 表有外键关系。

```
CREATE TABLE [dbo].[Address](
    [addressID] [int] IDENTITY(1,1) NOT NULL,
    [Street1] [nvarchar](50) NULL,
    [Street2] [nvarchar](50) NULL,
    [City] [nvarchar](50) NULL,
    [StateProvince] [nvarchar](50) NULL,
    [CountryRegion] [nvarchar](50) NULL,
    [PostalCode] [nvarchar](50) NULL,
    [AddressType] [nvarchar](50) NOT NULL,
    **[ContactID] [int] NOT NULL**,
    [ModifiedDate] [datetime] NOT NULL,
    [RowVersion] [timestamp] NOT NULL,
 CONSTRAINT [PK_Address] PRIMARY KEY CLUSTERED 
(
    [addressID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Address]  WITH CHECK ADD  CONSTRAINT [FK_Address_Contact] FOREIGN KEY([ContactID])
REFERENCES [dbo].[Contact] ([ContactID])
GO

ALTER TABLE [dbo].[Address] CHECK CONSTRAINT [FK_Address_Contact]
GO 
```

测试表及其关系：

```
DECLARE @ContactID int

INSERT INTO [dbo].[Contact]
           ([FirstName]
           ,[LastName]
           ,[Title]
           ,[AddDate]
           ,[ModifiedDate])
     VALUES
           ('Julio', 'Bartowski', 'Mr.', GETDATE(), GETDATE() )

SET @ContactID = SCOPE_IDENTITY()

PRINT @ContactID

-- this works
INSERT INTO [dbo].[Address]
           ([Street1]
           ,[Street2]
           ,[City]
           ,[StateProvince]
           ,[CountryRegion]
           ,[PostalCode]
           ,[AddressType]
           ,[ContactID]
           ,[ModifiedDate])
     VALUES
           ( '5907 Hollow Oak Ct', 'Suite 1400', 'Burke', 'VA', 'US', '22015', 'Office', @ContactID, GETDATE())

--this raises a referential integrity error (as it should) because there is no Contact with ContactID = 99999
INSERT INTO [dbo].[Address]
           ([Street1]
           ,[Street2]
           ,[City]
           ,[StateProvince]
           ,[CountryRegion]
           ,[PostalCode]
           ,[AddressType]
           ,[ContactID]
           ,[ModifiedDate])
     VALUES
           ( 'BadRef Way', '13th Floor', 'Manhattan', 'NY', 'US', '10004', 'Office', 99999, GETDATE())
GO 
```

INSERT 语句与 FOREIGN KEY 约束“FK_Address_Contact”冲突。冲突发生在数据库“BreakAway”、表“dbo.Contact”、列“ContactID”中。该语句已终止。

```
 --show the correct inserts worked fine in T-SQL.
SELECT * FROM Contact c 
    LEFT OUTER JOIN Address a 
    ON c.ContactID = a.ContactID
    WHERE c.FirstName LIKE '%Julio%' 
```

我假设在[Code Through the Pain](http://www.ladislavmrnka.com/2011/03/the-bug-in-storegeneratedpattern-fixed-in-vs-2010-sp1/)中描述的 SSDL 错误已经修复。以防万一，从我的实体框架 ADO.NET 实体数据模型 BAModel.EDMX 文件中提取的内容显示 ContactID 是存储架构定义语言和概念架构定义语言中的自动递增密钥标识：

```
 <edmx:Runtime>
    <!-- SSDL content -->
    <edmx:StorageModels>
    <Schema Namespace="BreakAwayModel.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2008" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl">
        <EntityContainer Name="BreakAwayModelStoreContainer">
<EntityType Name="Address">
  <Key>
    <PropertyRef Name="addressID" />
  </Key>
  <Property Name="addressID" Type="int" Nullable="false" StoreGeneratedPattern="Identity" />
  <Property Name="Street1" Type="nvarchar" MaxLength="50" />
  <Property Name="Street2" Type="nvarchar" MaxLength="50" />
  <Property Name="City" Type="nvarchar" MaxLength="50" />
  <Property Name="StateProvince" Type="nvarchar" MaxLength="50" />
  <Property Name="CountryRegion" Type="nvarchar" MaxLength="50" />
  <Property Name="PostalCode" Type="nvarchar" MaxLength="50" />
  <Property Name="AddressType" Type="nvarchar" Nullable="false" MaxLength="50" />
  <Property Name="ContactID" Type="int" Nullable="false" />
  <Property Name="ModifiedDate" Type="datetime" Nullable="false" />
  <Property Name="RowVersion" Type="timestamp" Nullable="false" StoreGeneratedPattern="Computed" />
</EntityType>
<EntityType Name="Contact">
  <Key>
    <PropertyRef Name="ContactID" />
  </Key>
  <Property Name="ContactID" Type="int" Nullable="false" StoreGeneratedPattern="Identity" />
  <Property Name="FirstName" Type="nvarchar" Nullable="false" MaxLength="50" />
  <Property Name="LastName" Type="nvarchar" Nullable="false" MaxLength="50" />
  <Property Name="Title" Type="nvarchar" MaxLength="50" />
  <Property Name="AddDate" Type="datetime" Nullable="false" />
  <Property Name="ModifiedDate" Type="datetime" Nullable="false" />
  <Property Name="RowVersion" Type="timestamp" Nullable="false" StoreGeneratedPattern="Computed" />
</EntityType>

<!-- CSDL content -->
<edmx:ConceptualModels>
  <Schema Namespace="BAModel" Alias="Self" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns="http://schemas.microsoft.com/ado/2008/09/edm">
    <EntityContainer Name="BAEntities" annotation:LazyLoadingEnabled="true">

    <EntityType Name="Contact">
      <Key>
        <PropertyRef Name="ContactID" />
      </Key>
      <Property Name="ContactID" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
      <Property Name="FirstName" Type="String" Nullable="false" MaxLength="50" Unicode="true" FixedLength="false" />
      <Property Name="LastName" Type="String" Nullable="false" MaxLength="50" Unicode="true" FixedLength="false" />
      <Property Name="Title" Type="String" MaxLength="50" Unicode="true" FixedLength="false" />
      <Property Name="AddDate" Type="DateTime" Nullable="false" Precision="3" />
      <Property Name="ModifiedDate" Type="DateTime" Nullable="false" Precision="3" />
      <Property Name="RowVersion" Type="Binary" Nullable="false" MaxLength="8" FixedLength="true" annotation:StoreGeneratedPattern="Computed" />
      <NavigationProperty Name="Addresses" Relationship="BAModel.FK_Address_Contact" FromRole="Contact" ToRole="Address" />
      <NavigationProperty Name="Customer" Relationship="BAModel.FK_Customers_Contact" FromRole="Contact" ToRole="Customers" />
      <NavigationProperty Name="Lodgings" Relationship="BAModel.FK_Lodging_Contact" FromRole="Contact" ToRole="Lodging" />
      <NavigationProperty Name="Payments" Relationship="BAModel.FK_Payment_Contact" FromRole="Contact" ToRole="Payment" />
      </EntityType> 
```

下面是在 LinqPad 中输入的 C# 语句，它会自动连接到 BAGA.dll 程序集，而不必担心`metadata=res://*/BAModel.csdl|res://*/BAModel.ssdl|res://*/BAModel.msl;`.

事实上，我可以使用 lambda 查询 Contact 实体，这意味着我正确编译了 EDMX，而且我不是一个彻头彻尾的白痴——至少我妈妈是这么说的。

注意：“this”是 LinqPad 引用实体集合的方式，您的查询在该集合中从 DLL 程序集运行，而 .Dump() 是 LinqPad 用于显示输出的方法。在 LinqPad 中不需要“this”，但设置“context”变量让我可以使用与我的 ASP.NET Visual Studio C# 代码相同的语句。

```
var context = this;

context.Contacts
    .Include("Addresses")
    .OrderByDescending(x => x.ContactID)
    .Take(3)
    //.Single()  //only works if you Take(1)
    .Dump(); 
```

我还在控制台应用程序中尝试了这个演示，结果相似......

实体框架不检索新的 ContactID 身份。在 SaveChanges() 之后，ContactID 保持为 0，随后发生依赖于 ContactID 的地址插入失败。

我究竟做错了什么？为什么下面我的非常简单的教学示例不起作用？

```
var context = this;

var newcontact = new Contact(){
    FirstName = "Julio",
    LastName = "Bartowski",
    Title = "Mr.",
    AddDate = DateTime.Now,
    ModifiedDate = DateTime.Now
};
newcontact.Dump();  //show the entity object before saving to the database

context.AddToContacts(newcontact);
context.SaveChanges();

newcontact.Dump();    //show the entity object after saving to the database 
```

根据 Julia 的书，newcontact 应该在 SaveChanges() 之后更新，从 EntityState "Added" 到 "Unchanged" 并加载新的主键。不幸的是，上面的第一个 newcontact.Dump() 显示了与最终的 newcontact.Dump() 相同的内容： ContactID = 0

```
Contact 
BAGA.Contact 
<dl><dt>ContactID</dt><dd>0</dd></dl> 
FirstName Julio 
LastName Bartowski 
Title null  
AddDate 5/27/2012 8:07:11 PM 
ModifiedDate 5/27/2012 8:07:11 PM 
RowVersion null 
```

运行上述命令后查看 SQL Server Management Studio 显示 ContactID = 0 并非实际发生的情况。实际上有一个带有新 ContactID 的插入。未更新/刷新新联系人实体的 ContactID 属性。

鉴于上述问题，添加依赖地址插入（使用如下所示的两种语法）需要有效的 ContactID，当然也会失败。我读过的所有内容都说：“您可以使用服务器生成的值创建任意复杂的实体图，并且系统可以在一次调用 SaveChanges 中处理这些整个图的插入”。嗯...我不能。

```
var context = this;

var newcontact = context.Contact.CreateContact(0, "Julio", "Bartowski", DateTime.Now, DateTime.Now, null);

var nAddr = Address.CreateAddress(0, "Home", 0, DateTime.Now, null);
nAddr.Contact = newcontact;
nAddr.Dump();

var newaddress = new Address(){
    Street1 = "5907 Hollow Oak Ct",
    City = "Burke",
    StateProvince = "VA",
    CountryRegion = "US",
    PostalCode = "22015",
    AddressType = "Home",
    ModifiedDate = DateTime.Now
};
newaddress.Contact = newcontact;

this.AddToContacts(newcontact);  //I get an error here when new Addresses are waiting for the ContactID value.
this.SaveChanges();
newcontact.Dump(); 
```

LinqPad 给了我一个更新异常：更新条目时发生错误。有关行 context.AddToContacts(newcontact); 的详细信息，请参见内部异常。

原始值 InvalidOperationException 表示此 ObjectStateEntry 没有原始值。处于添加或分离状态的对象不能具有原始值。

RuntimeMethodInfo 是 EntityEntry.InternalGetOriginalValues (Boolean readOnly) Name InternalGetOriginalValues DeclaringType typeof (EntityEntry) ReflectedType
typeof (EntityEntry)
MemberType Method MetadataToken 100678288 Module 4RuntimeModule 4
System.Data.Entity.dll

IsSecurityCritical False IsSecuritySafeCritical False IsSecurityTransparent True MethodHandle 4RuntimeMethodHandle 4
System.RuntimeMethodHandle

属性 PrivateScope、Private、HideBySig CallingConvention Standard、HasThis ReturnType typeof (DbDataRecord)
ReturnTypeCustomAttributes 4RuntimeParameterInfo 4
System.Data.Common.DbDataRecord

ReturnParameter 4RuntimeParameterInfo 4
System.Data.Common.DbDataRecord

IsGenericMethod False IsGenericMethodDefinition False ContainsGenericParameters False MethodImplementationFlags IL IsPublic False IsPrivate True IsFamily False IsAssembly False IsFamilyAndAssembly False IsFamilyOrAssembly False IsStatic False IsFinal False IsVirtual False IsHideBySig True IsAbstract False IsSpecialName False IsColleConstructor 4 False CustomAttributes 4ReadOnly

拜托，有人对我的“简单”问题有一个他们知道有效的简单答案。

# javascript - 与 pjax 一起使用时取消绑定 jQuery 无限滚动

> ID：10786232
> 
> 赞同：0
> 
> 时间：2012-05-28T14:23:51.783
> 
> 标签：javascript, jquery, ajax, pjax

我正在使用一个非常简单的 jQuery 无限滚动来消除对编号分页的需要，但我遇到了一个小问题。

当我转到使用无限滚动的页面并加载它时，无限滚动将按计划工作，但是当我使用`pjax`它导航离开该页面时，它仍然会在**所有**其他网站页面上运行，因为它仍然是一个加载的功能？

我能做些什么来基本上告诉无限滚动功能只在我想要它的页面上运行，或者在 pjax 更改页面时以某种方式重置它？

到目前为止，这是我的无限滚动代码：

```
$(window).on("scroll", function() {

    if($(window).scrollTop() == $(document).height() - $(window).height()){

        // Do scroll pagination, load content into #load-here ..
    }
} 
```

这就是我希望滚动功能的方式：

```
$("a:not(.no-dynamic)").pjax("#main");

$(document).on('pjax:end',   function() {
    if($("#load-here").length == 0) {
        $(window).off("scroll");
    }
    else
        $(window).on("scroll");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:38:24.340

试试这个：

而不是`$(window).scroll()`，请执行以下操作：

```
$(window).on('scroll', function() {
    // stuff
}); 
```

我从未使用过 pjax，但根据[文档](https://github.com/defunkt/jquery-pjax#events)`end`，您可以使用一个回调：

```
$(document)
    .on('pjax:end', function() {
        $(window).off('scroll');
    }); 
```

`window`这个想法是在每次 pjax 请求结束时取消绑定“滚动”事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:08:51.720

我有类似的问题。如果特定的 div（隐藏的分页 div）不再存在，则通过取消绑定滚动处理程序来修复它。

```
$(window).scroll(function()
{
    if($('#pagination').length == 0){
   $(window).unbind('scroll',<<scroll handler function>>);

        return;
}
  ......
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:28:54.423

处理[window.onbeforeunload](http://www.4guysfromrolla.com/demos/OnBeforeUnloadDemo1.htm)以取消绑定无限滚动

# c++ - ATLAS gemm 将未定义的引用链接到“cblas_sgemm”

> ID：10786237
> 
> 赞同：9
> 
> 时间：2012-05-28T14:24:18.920
> 
> 标签：c++, c, blas, atlas

这是我第一次尝试使用 ATLAS。我无法正确链接它。这是一个非常简单的 sgemm 程序：

```
...
#include <cblas.h>

const int M=10;
const int N=8;
const int K=5;

int main()
{
    float *A = new float[M*K];
    float *B = new float[K*N];
    float *C = new float[M*N];

    // Initialize A and B

    cblas_sgemm(CblasRowMajor, CblasNoTrans, CblasNoTrans, M, N, K, 1.0, A, K, B, N, 0.0, C, N);

        ...
} 
```

当我在具有标准 ATLAS 安装的 linux 平台上编译它时，它会给出链接错误：

```
g++ test.c -lblas -lcblas -latlas -llapack
/tmp/cc1Gu7sr.o: In function `main':
test.c:(.text+0x29e): undefined reference to `cblas_sgemm(CBLAS_ORDER, CBLAS_TRANSPOSE, CBLAS_TRANSPOSE, int, int, int, float, float const*, int, float const*, int, float, float*, int)'
collect2: ld returned 1 exit status 
```

如您所见，我尝试提供不同的库组合，但没有帮助。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-28T14:26:45.450

你需要

```
extern "C"
{
   #include <cblas.h>
} 
```

因为你用`g++`.

或者你甚至可以做

```
#ifdef __cplusplus
extern "C"
{
#endif
   #include <cblas.h>
#ifdef __cplusplus
}
#endif 
```

也能够编译为C。

当您在 C++ 中编译时，名称会被破坏。但是由于 cblas 是用 C 编译的，因此导出的符号没有错位的名称。所以你必须指示编译器寻找 C 风格的符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T01:18:37.510

小心代码。它是“C”，而不是 C。所以，代码最终是

```
#ifdef __cplusplus
extern "C"
{
#endif //__cplusplus
   #include <cblas.h>
#ifdef __cplusplus
}
#endif //__cplusplus 
```

# database - 用于快速过滤的 SQL 数据库优化

> ID：10786242
> 
> 赞同：0
> 
> 时间：2012-05-28T14:24:58.373
> 
> 标签：database, search

所以，看看我有什么。

短文本消息，以纯文本、标记文本和 html 形式存储在数据库中。对于带标签的文本，标签被嵌入到每条消息中。例如，我可以有以下标记的消息：

```
A [quick] [brown] fox jumps over a [lazy] dog. 
```

Quick、Brown 和 Lazy - 是嵌入标签，在 html中以**粗体显示。**任何用户都可以标记另一个标签，例如 [dog]。发生这种情况，我需要用一个词**狗刷新数据库中的***所有*消息，并使其成为一个**到处都是**标签。

 ****有数千条消息，所以我需要过滤必要的消息并更新它们（或插入新值），别管用户可能会同时更改标签（并删除它们）。我正在为这些需求考虑一个辅助表，以保留搜索索引之类的内容并查找要快速更新的消息。当然，所有更改都是在其他几个用户批准后应用的，只是为了保持订单。

是否有任何想法可以使搜索和更新过程更有效，或者我应该在这里选择其他东西？

如果重要的话，我会使用 Ruby+MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:07:51.117

如果您绝对必须更新每条消息，那么除了蛮力更改它们之外，您别无选择。如果只有几千，那么它会足够快。但是，如果它增长到数百万，那么在每条消息中定位标签的时间可能会开始影响，除非您使用查询优化和/或使用后台更新线程玩游戏，正如您所暗示的那样。（或更改为具有日志支持的时态数据库）

如果标签的数量足够少，为什么不简单地在表中维护标签列表，并在检索每条消息时通过标签表传递每个潜在标签（即，对于消息中的每个单词，检查单词是否在标签表中） . 如果消息很短，这将相当快，并且可以对标签表进行最佳索引以提供帮助。

标签表的一个优点是您可以创建一个消息标签 1:M 表作为反向索引，这将加快查询搜索，尽管您的问题似乎与搜索性能无关。****

# python - Python/CMD 命令

> ID：10786246
> 
> 赞同：0
> 
> 时间：2012-05-28T14:25:13.257
> 
> 标签：python, cmd

所以我在我的 python py 文件中运行一个命令

```
myNewShell = os.system('start "%s" /d "%s" cmd /f:on  /t:0A /k "W:\\Desktop\\alias.bat"' % (myShot, myWorkDir)) 
```

这会打开一个外壳

我如何直接从我的 python 脚本向这个 shell 输入一些东西，从而绕过你的实际 cmd.exe。我设置了一堆DOSKEY，例如打开maya程序的maya。如何在我的 python 脚本中添加一行代码，以便它使用这些别名加载 shell 并直接输入我的命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:41:32.017

看看强大实用的[子流程](http://docs.python.org/library/subprocess.html)模块

然后你可以做这样的代码

```
import subprocess
pro = subprocess.Popen("cmd", stdout=subprocess.PIPE, stdin=subprocess.PIPE)
pro.stdin.write("mybat.bat\n")
pro.stdin.write("myother.bat\n")
pro.stdin.write("start mysillyprogram\n")
pro.stdin.flush()
pro.terminate() # kill the parent 
```

# date - 如何在 Joomla 中获取文章的创建日期和查看次数？

> ID：10786248
> 
> 赞同：0
> 
> 时间：2012-05-28T14:25:46.713
> 
> 标签：date, joomla, metadata, joomla-article

有人可以提示以下内容：我必须在我的自定义模块 oа Joomla（本质上是 HTML）中插入服务信息，这通常由 Joomla 显示 - 我需要创建日期和查看这篇文章的次数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T00:58:35.810

你可以运行一个非常简单的查询来得到这个：

```
SELECT `created`, `hits` FROM #__content WHERE `id` = <your article id> 
```

`created`是创建日期，`hits`是文章被查看的次数。

# database - 从包含以毫秒为单位的日期列的表中选择那些在同一天发生的事件？

> ID：10786253
> 
> 赞同：0
> 
> 时间：2012-05-28T14:26:23.880
> 
> 标签：database, sqlite, date, select

我正在创建表，其中包含以**毫秒为单位**的日期列。我想从该表中选择特定日期的所有数据。

表事件

```
event_id      event_titile     event_date_in_milli_sec

11             deo's B'day         1335901530000 
12             MJ B'day            1337805930000  
13             MR B'day            1337885130000 
14             RJ B'day            1338579930000 
```

如上表结构所示，该表第 2 行和第 3 行中的事件表都是在同一天创建的，所以我想选择那些在同一天发生的事件

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:57:20.097

```
public static long[] getBoundaryDates (Date d) {
    long[] r = new long[2];
    d.setHours(0);
    d.setMinutes(0);
    d.setSeconds(0);
    r[0] = d.getTime();
    d.setHours(23);
    d.setMinutes(59);
    d.setSeconds(59);
    r[1] = d.getTime();
    return r;
}

public Void getData(Date date) {
    long[] _l = HelperFunctions.getBoundaryDates(d);
    String query = "select * from  TABLE_EVENTS WHERE "
        + KEY_EVENT_TIMESTAMP_START  + " >= " + _l[0]
        + " and " + KEY_EVENT_TIMESTAMP_START + " <= "
        +  _l[1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:15:31.017

```
select event_id,
       event_title,
       datetime(event_date_in_milli_sec / (24 * 60 * 60 * 1000)) as dt
from table_events
order by dt 
```

# ajax - 使用 ajax 和其他 json 数据发布表单

> ID：10786255
> 
> 赞同：0
> 
> 时间：2012-05-28T14:26:30.897
> 
> 标签：ajax, asp.net-mvc, json, jquery-ui-dialog

我通过 jquery ajax 发送表单。我不仅想发送 formcollection 的值，还想发送另一个隐藏在页面中的 id。

我怎样才能发送表单数据+这个ID？也许有一种方法可以创建一个 json 对象并将所有内容都放入其中？

```
 jQuery('#myForm').live('submit',function(event) {
        $.ajax({
            url: 'Url.Action("Create")',
            type: 'POST',           
            data: $('#myForm').serialize(),
            success: function( data ) {

            }
        });
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:34:30.897

**如果您的隐藏字段已经在表单中，它将在您的序列化数据中。** ***您不需要专门发送它***。如果您仍想从表单外部发送另一条数据，您可以将其作为查询字符串值发送，并为您的操作方法设置一个名为 itemId 的参数。（假设 hdnID 是隐藏元素的 id）

```
$.ajax({
        url: '@Url.Action("Create","Home")'+?itemId='+$("#hdnID").val(),
        type: 'POST',           
        data:  $('#myForm').serialize(),              
        success: function( data ) {
        }
     }); 
```

[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

# visual-studio-2010 - 退格在 Visual Studio 中不起作用

> ID：10786257
> 
> 赞同：77
> 
> 时间：2012-05-28T14:26:42.503
> 
> 标签：visual-studio-2010

我一直在 Visual Studio 中遇到一个非常烦人的问题。当我尝试通过按退格键删除某些文本时，它不起作用。为什么是这样？到底是怎么回事？有时我必须关闭并打开 Visual Studio 才能解决此问题，但我现在刚刚尝试过，但没有成功。退格可以在记事本中使用，以防您想知道。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2015-03-05T00:23:46.057

在 Visual Studio 中转到：

```
Tools 
Options
Environment
Keyboard 
```

1.  找到“Edit.DeleteBackwards”命令。
2.  在“使用新的快捷方式：”下拉列表中选择“文本编辑器”。
3.  在“按下快捷键：”中单击退格键，它会显示“Bkspce”
4.  单击“确定”。

Backspace 应该再次开始为您工作。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-08-28T19:16:43.727

我解决了重置键盘映射方案的问题。

工具 -> 选项 -> 环境 -> 键盘 -> 重置。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-05-28T14:33:15.857

当我打开解决方案并且已经打开文件时，这似乎发生在我身上。我曾经关闭文件，然后关闭并重新打开解决方案来修复它，但现在我只是点击`Alt`+ `Enter`。

这是[我发现这个技巧的博客](http://jvides.wordpress.com/2010/11/18/backspace-and-arrow-keys-stop-working/)。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2021-02-04T03:03:08.547

对我来说，一个快速的解决方法是简单地从菜单栏中打开任何菜单。关闭菜单后，非字符键将再次开始工作。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-11-15T18:38:27.073

我在 VS2010 中也时常会遇到这个问题，而且现在只需**使用鼠标更改选项卡/文件**似乎总是可以修复它。而已。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2021-02-08T00:54:34.923

上述方法除外。

您还应该检查快捷键设置：

文件 -> 首选项 -> 键盘快捷键 -> '然后检查项目：deleteLeft'。

[![在此处输入图像描述](../Images/8e96107e96d525a35397da9f0fc37dd6.png)](https://i.stack.imgur.com/W252o.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-02-03T14:39:21.220

此方法以 100% 有效。转到“文件-> 首选项-> 键盘快捷键”并搜索 deleteLeft 并添加键绑定“Backspace”。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-11-23T21:49:21.783

奇怪的是，即使在 VS 2019 中这仍然是一个问题。退格键和删除键都不起作用。快速修复，我刚刚运行了这个项目，它似乎给了它所需的动力。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-12-29T06:02:17.090

我所做的只是退出 Visual Studio 并重新启动它。以上选项均不适合我。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-06-14T06:29:14.787

就我而言，问题是“文件->首选项->键盘快捷键”中的“何时”条件。

我删除了“textInputFocus && !editorReadonly”，它现在按预期工作。我期待副作用;)。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-03-30T10:22:12.117

尝试重置您的 Visual Studio 设置

![在此处输入图像描述](../Images/c8b678086abfcc56047bebb0c4bc6335.png)

去 ：

```
All Program > Visual Studio 20xx > Visual Studio Tools 
```

以管理员身份运行**VS20xx 的开发人员命令提示符**和以下命令：

`devenv.exe /resetsettings`

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-08-02T09:36:32.237

对我来说，一个快速的解决方法是锁定 pc ( `Windows`+ `L`) 并再次登录。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-09-15T11:37:48.830

当我在家里使用不同版本的 resharper 然后将该项目用于我的工作时，这个问题发生在我身上。在我删除 bin 和 obj 和 resharper 目录后，退格现在对我有用。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-10-13T02:47:11.863

我安装 Vim 后遇到这个问题，卸载 Vim Backspace 工作正常。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-09-26T16:00:17.173

当这个问题发生在我身上时，我发现点击删除或退格键仅在我的部分代码中没有响应。这部分恰好是我从互联网某处粘贴的一些代码。

为了解决这个问题，我剪掉了最近粘贴的有问题的代码，然后将其粘贴到像 Notepad++ 这样的文本编辑器中。然后将相同的代码从文本编辑器中复制并粘贴到 Visual Studio 中即可解决问题。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-11-02T05:09:12.770

使用 Visual Studio 社区 2019 (16.4.3)

我刚刚搜索了这个问题，因为我可以单击我的文档、键入等，但我不能使用退格、删除、ctrl+z 或箭头键。

打开“文件”菜单，我注意到“保存”选项引用了不同的文件。我检查了那个文件，发现所有似乎不起作用的键实际上都在编辑另一个文件。

在半焦点文件和我打算编辑的文件之间切换有效，幸运的是，撤消能够修复我在不知不觉中屠杀的文件。

如果您在这里结束，请检查您的“文件”菜单以确保引用了正确的文件，因为修复快速且易于尝试。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-01-12T19:19:54.017

我刚刚在 Visual Studio 2022 的一个实例中发生了这种情况，这是由于调试设置编辑器窗口在后台的另一个 Visual Studio 2022 实例中打开而我看不到它。

关闭该窗口解决了它。

* * *

## 回答 #18

> 赞同：-2
> 
> 时间：2013-12-16T14:26:33.520

我有这个问题很长时间了。我不确定是什么原因造成的，但**Alt + Enter**有效。我正在运行的扩展包括 AnkhSVN、MySQL Tools 和 Productivity Power Tools。

# embedded - 在 EEPROM 中组织数据

> ID：10786262
> 
> 赞同：1
> 
> 时间：2012-05-28T14:27:10.123
> 
> 标签：embedded, binary-data

我的板上有一个 64KB 的 EEPROM，组织为 128 字节的页面，它与 AT Mega 1281 通信。该板还有一个 SD 卡插槽，能够将一些配置文件复制到 EEPROM 上（充当内部记忆）。由于电路板的性质，只需要两种类型的文件——一种称为电路数据，另一种是位置数据——两者都是二进制文件。

到现在为止，我刚刚将 EEPROM 分成两部分 32K，并在上半部分写入电路数据，在下半部分写入位置数据。这两个文件也有一个 25 字节的标题。我在文件的最后几页分别复制了标题，即从地址 0x7F80 开始的页面具有电路数据文件的标题，而从 0xFF80 开始的地址具有另一个标题。数据的宽度总是固定的，因此随机访问非常容易。

我的问题是，有没有更好、更简单的方法来组织 EEPROM 中的数据？目前，我什至不存储数据的长度，因为它并不是真正需要的。但是我认为如果我确实将其包含在标题中，它可能会增加另一个安全步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:34:28.793

我相信，在任何嵌入式项目中，最简单的解决方案是最好的。您组织存储的方式很简单，并且看起来可以满足您的所有要求。

任何“改进”或“优化”此解决方案的尝试都会导致代码更复杂，并且会增加其中出现错误的可能性。因此，让您的所有工程解决方案尽可能简单。如果出现新的需求，您总能找到新的简单解决方案。不要做任何过早的优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:43:56.817

更好的？这取决于。更简单？真的不。这取决于你的“总是”有多强。您有多相信自己的文件将始终是固定长度的？您问这个问题的事实可能意味着一些疑问。牢记[KISS 原则](http://en.wikipedia.org/wiki/KISS_principle)。微控制器开发仍然是一个不必要的功能直接威胁解决方案稳定性的领域。如果您想让您的 EEPROM 访问更通用，则在标头中包含数据长度会很有用。但是话又说回来，对两个文件的概括是过大的。

第二个想法：与其引入您实际上不需要的文件长度，我想知道为什么您将文件头存储在相应内存块的另一侧。“标题”对我来说是在文件本身之前需要阅读的东西。您可以将读取地址的一次传输保存到 EEPROM。

# facebook - 一个 FB 应用程序到多个 FB Page

> ID：10786264
> 
> 赞同：0
> 
> 时间：2012-05-28T14:27:20.107
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我想将一个 FB 应用程序添加到多个 FB 页面。在用户身份验证后，重定向到我的应用程序的 url 我找不到让应用程序知道发出请求的页面的方法。预先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:36:52.910

您将在签名请求中获得页面 ID。

仅供参考：[签名请求](https://developers.facebook.com/docs/authentication/signed_request/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:46:35.090

这很容易做到。如果您解码`signed_request`发布到您的页面的数据，您可以看到哪个页面正在“查看”您的应用程序（即应用程序安装在哪个页面上）。

如果您解码数据（例如在 PHP 中，您可以执行以下操作：`print_r( $facebook->getSignedRequest() );`打印解码后的版本），您将看到如下内容：

```
Array
(
    ...
    [page] => Array
        (
            [id] => 1234567890
            [liked] => 1
            [admin] => 1
        )
    [user] => Array
        (
            ...
        )
) 
```

`$response['page']['id']`是当时正在查看您的应用的页面的 ID 。您可以存储已安装您的应用程序的页面的 ID，并通过它检查以确定要加载的内容。

# ios - 框架内的 QuickDialog

> ID：10786265
> 
> 赞同：1
> 
> 时间：2012-05-28T14:27:25.390
> 
> 标签：ios, ipad, uitableview, uistoryboard, quickdialog

我正在尝试将 QuickDialog 用于使用情节提要的 iOS 5 iPad 应用程序，但我想这个问题也将广泛适用于 UITableViewController。

我的理解是，当我初始化 QRootElement 时，QDC 创建的表格视图将替换我的类的视图，从而使我在 IB 故事板中自定义的任何内容都无效。我希望能够在 IB 中设计 UI，并将 QD 表显示为框架，而不是占据整个屏幕。

我认为解决方案是将 QuickDialog 表视图设置为基于 UIView 的类的子视图。这个对吗？实现这一目标的最佳方法是什么？我是否必须重写从 QDC 继承的自定义视图控制器中的根初始化程序，或者是否有不同的方法，可能类似于[此处](https://github.com/escoz/QuickDialog/pull/68)使用的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:02:34.447

我建议您从 QuickDialogViewController 继承作为您的主控制器。QDViewController 直接继承自 UIViewController（而不是 UITableViewController），因此只需移动表格视图并在其周围添加控件非常容易。

如果你真的想从 Interface Builder 创建所有东西，你的 tableview 必须继承自 QuickdialogTableView，并且你必须自己提供委托和数据源。查看 QDViewController ，因为您必须编写几乎相同的代码。

# ruby-on-rails-3 - AccessDenied异常后如何注销用户？（设计）

> ID：10786269
> 
> 赞同：2
> 
> 时间：2012-05-28T14:27:40.793
> 
> 标签：ruby-on-rails-3, devise

我的应用程序控制器中有这个：

```
rescue_from CanCan::AccessDenied do |exception|
  redirect_to destroy_user_session_path, :method => :delete, :alert => exception.message
end 
```

一旦他们尝试打开他们无法访问的资源，我想注销用户。但是，没有使用“删除”方法，我明白了

```
No route matches [GET] "/authenticate/users/sign_out" 
```

如何注销用户并显示登录表单（new_user_session）？

顺便说一句，正常的注销链接可以完美运行。

```
<%= link_to "Logout: #{current_user.name}", destroy_user_session_path, :method => :delete %> 
```

高手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:37:02.380

怎么样？：

```
rescue_from CanCan::AccessDenied do |exception|
  sign_out :user if user_signed_in?
  redirect_to new_user_session_path, alert: exception.message
end 
```

但恕我直言，这不是可预期的行为。

# c# - C#的快速哈希算法

> ID：10786270
> 
> 赞同：0
> 
> 时间：2012-05-28T14:27:41.317
> 
> 标签：c#, hash

我正在寻找一种快速散列算法，它不用于密码学，但给我比标准更好的覆盖率`GetHashCode()`。

我见过`CityHash`但看不到 C# 端口。

理想情况下，我想指定哈希大小（64 位、128 位等......），但这不是必需的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T06:19:26.497

CityHash C# 端口

[https://github.com/gmarz/CityHash](https://github.com/gmarz/CityHash)

用法：

```
using CityHash;

ulong hash = "...".GetCityHash64(); 
```

您需要从主项目添加对 CityHash.dll 的引用，并确保从项目的 C++ 部分构建的 CityHash.Win32.dll 在项目的 bin 文件夹中可用。

对我来说，使用 git 是个大麻烦——我不想检查 bin 文件夹中的任何内容。因此，我将 Win32 dll 放在我的 lib 文件夹中并添加了这个 Pre-build 事件：

```
start /MIN xcopy /y /c lib\CityHash.Win32.dll bin 
```

这确保了它可以复制，即使对于刚刚克隆和构建的人，也不必将 bin 文件夹从 .gitignore 列表中删除。

另请注意，据我所知，CityHash 的 C++ 部分不会在 Visual Studio 的发布模式下构建 - 仅限调试。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-28T14:49:37.273

您可以尝试这样的事情：对于 64 位哈希

```
bit Data[64*L] ; // Your input filled to be divided by 64 
bit Arr[64] ;    // eg. initially filled with '0' 
for(int k=0 ; k<L ; k++){
    for(int i=0 ; i<64 ; i++){
        Arr[i]=Arr[i]^data[k*64+i];  // '^' as the XOR operator
    }
} 
```

Arr[] 将获得 64 位快速高效的哈希。

# sql - 根据条件选择多个Hibernate import.sql

> ID：10786272
> 
> 赞同：4
> 
> 时间：2012-05-28T14:27:42.923
> 
> 标签：sql, database, hibernate, import, runtime

如何指定我希望休眠运行的导入文件。有没有我可以放置的配置选项（我想我在某处看到过类似的东西）我可以说自定义 .sql 文件和休眠将运行它。

我想将我的创作拆分为多个文件。而且我还想运行不同的脚本，这些脚本将根据我正在使用的休眠配置生成日期。因此，如果我使用本地，它应该使用一组 .sql 文件，如果我在 QA 中对其进行测试，它应该使用另一个。

我有多个配置文件，可以根据需要运行，所以现在我需要弄清楚如何将哪个脚本运行在哪个配置中。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T21:37:39.803

'hibernate.hbm2ddl.import_files' 是你想要的设置（org.hibernate.cfg.AvailableSettings#HBM2DDL_IMPORT_FILES）。

[http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/cfg/AvailableSettings.html#HBM2DDL_IMPORT_FILES](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/cfg/AvailableSettings.html#HBM2DDL_IMPORT_FILES)

# java - Hibernate多参数setString生成Java

> ID：10786277
> 
> 赞同：0
> 
> 时间：2012-05-28T14:28:01.363
> 
> 标签：java, hibernate, hql

我正在使用休眠，并尝试在某些字段上进行 LIKE。

我正在拆分一个字符串，然后生成 HQL，使用

```
table.entry LIKE :argsearch_0 OR table.entry LIKE :argsearch_0 OR 
table.entry LIKE :argsearch_1 OR table.entry LIKE :argsearch_1 
```

（0 和 1 实际上是用计数器递增的）。

但我得到：

```
Not all named parameters have been set: [argsearch_0] 
```

**第一个问题：**

*   我可以使用 2 个命名参数并且只执行 1 个 setParameter（或 setString）：

    ```
    String nameParam = "argsearch_"+i;
    q.setParameter(nameParam, "%"+args[i]+"%"); 
    ```

**第二个问题：**

*   为什么我的参数不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T21:15:16.117

当您问“我可以使用 2 个命名参数并且只执行 1 个 setParameter”时，这取决于您的意思。

在您的原始查询中，您有 2 个命名参数（“argsearch_0”和“argsearch_1”），每个参数在查询中有 2 个用法。所以你必须为'argsearch_0'和'argsearch_1'调用set。但是您只为每个参数调用一次（实际上，如果您真的需要，您可以为每个参数多次调用 set，但只使用最后一次。

至于您的第二个问题，正如有人已经指出的那样，这是因为您的代码中有错误。您没有设置“argsearch_0”参数的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-08T13:46:46.927

```
 You can Try this  

    **Step 1--:** Add How many parameter you need just add in hashmap
   -------------------------------------------------------------------

    HashMap param_List=new HashMap();
    param_List.put("contactNo",22);

    **Step 2--:** Just You pass your Query
   -------------------------------------------------------------------

    Query query1 = session.createQuery("select * from emailTemplate  where c.contactNo =:contactNo");

  **Step 3--:** What ever Data type is no matters but get an output.
  -------------------------------------------------------------------

    for(Object paramKey : param_List.keySet())
    {
    query1.setParameter(paramkey.toString(), param_List.get(paramKey);
    }

 **Step 4--:**
-------------------------------------------------------------------
    String finalResult=query1.getSingleResult().toString(); 
```

# java-me - J2ME 视频捕获引发 MediaException: Invalid locator: capture://video

> ID：10786279
> 
> 赞同：0
> 
> 时间：2012-05-28T14:28:25.483
> 
> 标签：java-me, lwuit, mmapi

我试图使用以下代码片段在 J2ME 应用程序中捕获视频

```
private void createCamera() throws IOException, MediaException {
    videoComponent = VideoComponent.createVideoPeer("capture://video");
    videoComponent.setPreferredH(height);
    videoComponent.setPreferredW(cameraForm.getWidth());
    player = (Player) videoComponent.getNativePeer();
    player.realize();
    player.prefetch();
    videoControl = (VideoControl) player.getControl("VideoControl");
} 
```

当我在真实设备上运行应用程序时，出现错误：

```
javax.microedition.media.MediaException: Invalid locator: capture://video 
```

如果我使用字符串 capture://image 它只会显示相机的图像。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:30:06.390

也许您要尝试通过[设备名称](http://java.sun.com/javame/reference/apis/jsr135/javax/microedition/media/Manager.html#media-locator)获取，例如 devcam0/devcam1？你用诺基亚手机吗？

# javascript - 如何在不使用 APEX 或 Workflow 的情况下清理 Salesforce 中的文本字段

> ID：10786280
> 
> 赞同：1
> 
> 时间：2012-05-28T14:28:37.110
> 
> 标签：javascript, salesforce

Salesforce 的专业版许可证不允许使用 APEX 代码或工作流，除非单独购买。

我需要清理 Salesforce 中通过我无法控制的 Web 表单输入的文本。客户想要修复所有大写或缺少句子大写的任何文本。

我在这个问题上看到了这个答案[是否可以在 Salesforce 中为字段添加样式？](https://stackoverflow.com/a/10230267/466873)它在自定义侧栏组件中使用 javascript。它假定当用户将数据键入应用程序时会发生转换。我的要求可能允许自定义 salesforce 按钮调用字段上的操作，因为数据将由自动化过程填充。

假设我要遵循相同的模式，我将不得不找到一种方法来可靠地检测和修复字符串中的错误格式。

有没有一种好方法可以在 salesforce 中使用 javascript 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:03:08.690

由于正则表达式和 AJAX 工具包，我找到了一种更接近我需要的方法。

我创建了一个调用 javascript OnClick 的自定义详细信息按钮。

该代码采取当前领先并在字符类 [AZ] 中搜索“描述”字段以查找大于 2 个大写字符的任何字符串。每次它匹配一个字符串时，它都会用它自己的小写版本替换该字符串。

一旦字符串被“清理”，就可以更新线索。

```
{!REQUIRESCRIPT("/soap/ajax/19.0/connection.js")} //adds the proper code for inclusion of AJAX toolkit
var url = parent.location.href; //string for the URL of the current page

var updateRecords = []; //array for holding records that this code will ultimately updated

  var re = new RegExp('[A-Z]{2,}', 'g');
  var inputString = "{!Lead.Description}";
  var matches = inputString.match(re);
  if(matches != null){
   for(var i = 0; i< matches.length;i++){
    inputString = inputString.replace(matches[i], matches[i].toLowerCase());
   }

  var update_Lead = new sforce.SObject("Lead"); //create a new sObject for storing updated record details
  update_Lead.Id ="{!Lead.Id}"; //set the Id of the selected Lead record
  update_Lead.Description = inputString;
  updateRecords.push(update_Lead); //add the updated record to our array

 }
 result = sforce.connection.update(updateRecords); //push the updated records back to Salesforce
 parent.location.href = url; //refresh the page 
```

我将此代码基于我发现的一些[Salesforce：执行 JavaScript 的自定义按钮](http://www.interactiveties.com/b_execute_javascript_button.php)

应该可以修改此代码以处理任何 Salesforce 对象并处理选择的字段。可以将进行替换的代码移到一个函数中以使其更容易。

# c++ - 如何将 int 转换为 char*？

> ID：10786282
> 
> 赞同：0
> 
> 时间：2012-05-28T14:28:47.720
> 
> 标签：c++, constructor, char, type-conversion

我的问题是我不知道如何将 int value 转换为 char array `char* m_value`。我尝试使用 itoa 但它不起作用。`itoa(m_val, m_wartosc, 10);`也许还有其他功能可以做到这一点？

**主文件**

```
int main(int argc, char *argv[])
{
    LargeNumber l1;
    LargeNumber l3(172839); //how to convert this int to char*

    return 0;
} 
```

**大数.h**

```
 class LargeNumber{

            public:

                LargeNumber()
                { 
                    m_array = "0"; //zero for no arg.
                }
                LargeNumber(int val):m_val(val)
                {
                    itoa(m_val, m_array, 10);  //doesn't work
                    //sprintf(m_array, "%d", m_val);
                }

                LargeNumber(const LargeNumber& p):m_array(p.m_array)
                { }  //copy constructor

                ~LargeNumber(){
                    delete []m_array;     //for object with new    
                }
               public: //should be private
                int m_val;
                char* m_array;

}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T14:39:57.290

简单的答案是：不要。有两个原因：

*   正如您从所有（错误的）其他答案中看到的那样，内存管理很棘手且容易出错。
*   我看不出将您的值以 ASCII 字符串的形式存储在 base-10 中可能会有用。（例如，与 base-2 ^(32)表示相比。）

但是如果你真的必须这样存储它，你将需要分配相关的内存量，`snprintf`用于转换（`itoa`是一个非标准函数），并记住在正确的时间释放内存（你**会有**阅读和理解[*三法则*](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)）。

我强烈建议使用 a`std::string`而不是原始的 C 样式数组，因为它至少会处理自己的内存管理，然后您就可以使用`std::stringstream`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:35:15.233

的第二个参数`itoa()`需要是一个足够大的内存数组以存储以空字符结尾的字符串。一个例子：

```
int number = 172839;
char buffer[10];
itoa(number,buffer,10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:36:17.630

```
LargeNumber(int val):m_val(val)
        {
            std::stringstream stream;
            stream << val;
            m_array = new char[stream.str().size()];
            strcpy(m_array, stream.str().c_str());
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:37:25.040

您必须首先分配数组

```
m_array = new char[20] 
```

在调用 iota 之前在构造函数中。iota 不分配内存。

# .htaccess - 在 .htaccess 定义的某个 URL 中显示 localhost:38000 应用程序？

> ID：10786286
> 
> 赞同：0
> 
> 时间：2012-05-28T14:29:06.997
> 
> 标签：.htaccess, proxy

我认为这被称为一些 rewrite -proxy 的东西，但我不明白如何设置它。基本上，我在 localhost:38000 中有一个应用程序，我想在 mySite.com/test 中显示它，我该怎么做？

`RewriteRule ^localhost:38000$ http://mySite.com/test/$1 [P`]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:35:07.133

尝试这个：

```
RewriteRule ^/test(/.*)? http://localhost:38000$1 [P] 
```

# objective-c - 目标 C：使用 NSData 密钥的 AES 256 加密

> ID：10786289
> 
> 赞同：2
> 
> 时间：2012-05-28T14:29:19.960
> 
> 标签：objective-c, ios, xcode

以前我做了三重DES加密，通过定义一个方法，使用字符串密钥文件加密一些数据

```
+ (NSData *)tripleDESEncryptWithKey:(NSString *)key dataToEncrypt:(NSData*)convertedData   {}. 
```

现在，我同样在做 AES 256 加密。但这一次，我不能使用字符串作为键。我需要使用从资源文件中获取 NSData

```
NSData *keyData = [NSData dataWithContentsOfFile:keyPath]; 
```

由于我需要将此密钥作为参数传递，因此我尝试将其转换为字符串

```
NSString *key = [[NSString alloc] initWithData:keyData encoding:NSUTF8StringEncoding]; 
```

但它返回NULL。那么，如何使用数据密钥进行 AES 256 加密？

编辑：我知道我不应该使用 UTF8 编码，因为数据文件是由字符串的 Base64 编码制成的。所以现在的问题是，如何从 keyData 使用 Base64 获取字符串键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:48:33.130

阅读文件：

```
NSData* myData = [NSData dataWithContentsOfFile:myFileWithPath]; 
```

然后使用本文中的实现之一：

[Mac 和 iPhone 上的 Base64 编码选项](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)

进行 Base64 转换。

注意：简单地将解密密钥粘贴到文件中是一个坏主意。最理想的情况是，通过用户自己的密钥对密钥进行加密，从而安全地存储密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T18:11:29.217

如果`key`变量返回`NULL`. 尝试像这样使用。

```
NSString* key = [NSString stringWithUTF8String:[keyData bytes]]; 
```

请参阅[KennyTM 的回答](https://stackoverflow.com/questions/2467844/convert-utf-8-encoded-nsdata-to-nsstring)

**更新 1：**您也可以直接从文件中读取字符串，而无需转换`NSData`

通过 NSFileHandle：

```
NSString * path = @"your key file path";
NSFileHandle * fileHandle = [NSFileHandle fileHandleForReadingAtPath:path];
NSData * buffer = nil;
while ((buffer = [fileHandle readDataOfLength:1024])) {
    //do something with buffer
} 
```

或使用 NSString

```
NSString * key = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil]; 
```

请参阅[Dave DeLong 的回答](https://stackoverflow.com/a/4208652/696088)

**注意：**确保你的`keyPath`变量，是完整路径还是相对路径的格式正确？

**更新 2：您**[还可以使用](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)[Matt Gallagher NSData+Base64 Class&Header](http://projectswithlove.com/projects/NSData_Base64.zip)处理 Base64 编码（另请参阅他的博客）

用于编码 base64

```
NSString * key = [[path dataUsingEncoding:NSUTF8StringEncoding] base64EncodedString]; 
```

希望对你有帮助！

# orchardcms - Orchard CMS：当每个页面的特定内容分布在不同的列中时，我是否必须为每个页面添加一个新层？

> ID：10786291
> 
> 赞同：5
> 
> 时间：2012-05-28T14:29:44.140
> 
> 标签：orchardcms

假设我希望每个页面都有一个不同的主图像，位于页面标题上方。另外，我需要将页面特定的图像放在左侧栏中，将页面特定的文本放在右侧栏中。在左右栏中，我还想要图层特定的内容。

如果不为站点中的每个页面创建一个图层，我无法看到如何实现这一点，但是我最终会得到大量图层，这些图层只提供一个看起来太复杂的页面。

我错过了什么？

如果有一种使用内容部分的方法，如果你能指出我的教程、博客、视频来帮助我解决这个问题，那就太好了。

笔记：

Sitefinity 在这类事情上做得很好，但我发现 Orchard 创建模块要简单得多，而且我发现它是 MVC 更容易。

Orchard 是免费的，我理解（并欣赏）这一点。只是希望随着产品的发展，这种事情会变得更容易吗？

换句话说，我希望世界上最好的……

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T19:41:59.723

1.5 的作品中有一个功能可以使这更容易，但与此同时，您已经可以通过一点点代码轻松地让它工作。您应该首先将您需要的字段添加到您的内容类型。然后，您将使用放置将它们发送到顶级布局区域。开箱即用，展示位置仅针对本地内容区域，但这是我们可以使用 Pete Hurst（又名 randompete）的一些代码来解决的问题。这是代码：

```
ZoneProxyBehavior.cs:
=====================

using System;
using System.Collections.Generic;
using System.Linq;
using ClaySharp;
using ClaySharp.Behaviors;
using Orchard.Environment.Extensions;

namespace Downplay.Origami.ZoneProxy.Shapes {
    [OrchardFeature("Downplay.Origami.ZoneProxy")]
    public class ZoneProxyBehavior : ClayBehavior {

        public IDictionary<string, Func<dynamic>> Proxies { get; set; }

        public ZoneProxyBehavior(IDictionary<string, Func<dynamic>> proxies) {
            Proxies = proxies;
        }

        public override object GetMember(Func<object> proceed, object self, string name) {

            if (name == "Zones") {
                return ClayActivator.CreateInstance(new IClayBehavior[] {                
                    new InterfaceProxyBehavior(),
                    new ZonesProxyBehavior(()=>proceed(), Proxies, self)
                });
            }

            // Otherwise proceed to other behaviours, including the original ZoneHoldingBehavior
            return proceed();
        }

        public class ZonesProxyBehavior : ClayBehavior {
            private readonly Func<dynamic> _zonesActivator;
            private readonly IDictionary<string, Func<dynamic>> _proxies;
            private object _parent;

            public ZonesProxyBehavior(Func<dynamic> zonesActivator, IDictionary<string, Func<dynamic>> proxies, object self) {
                _zonesActivator = zonesActivator;
                _proxies = proxies;
                _parent = self;
            }

            public override object GetIndex(Func<object> proceed, object self, IEnumerable<object> keys) {
                var keyList = keys.ToList();
                var count = keyList.Count();
                if (count == 1) {

                    // Here's the new bit
                    var key = System.Convert.ToString(keyList.Single());

                    // Check for the proxy symbol
                    if (key.Contains("@")) {
                        // Find the proxy!
                        var split = key.Split('@');
                        // Access the proxy shape
                        return _proxies[split[0]]()
                            // Find the right zone on it
                            .Zones[split[1]];
                    }
                    // Otherwise, defer to the ZonesBehavior activator, which we made available
                    // This will always return a ZoneOnDemandBehavior for the local shape
                    return _zonesActivator()[key];
                }
                return proceed();
            }

            public override object GetMember(Func<object> proceed, object self, string name) {
                // This is rarely called (shape.Zones.ZoneName - normally you'd just use shape.ZoneName)
                // But we can handle it easily also by deference to the ZonesBehavior activator
                return _zonesActivator()[name];
            }
        }
    }
} 
```

和：

```
ZoneShapes.cs:
==============

using System;
using System.Collections.Generic;
using Orchard.DisplayManagement.Descriptors;
using Orchard;
using Orchard.Environment.Extensions;

namespace Downplay.Origami.ZoneProxy.Shapes {
    [OrchardFeature("Downplay.Origami.ZoneProxy")]
    public class ZoneShapes : IShapeTableProvider {
        private readonly IWorkContextAccessor _workContextAccessor;
        public ZoneShapes(IWorkContextAccessor workContextAccessor) {
            _workContextAccessor = workContextAccessor;
        }

        public void Discover(ShapeTableBuilder builder) {

            builder.Describe("Content")
                .OnCreating(creating => creating.Behaviors.Add(
                    new ZoneProxyBehavior(
                        new Dictionary<string, Func<dynamic>> { { "Layout", () => _workContextAccessor.GetContext().Layout } })));
        }
    }

} 
```

有了这个，您将能够在要寻址的区域名称前面使用顶级布局区域`Layout@`，例如`Layout@BeforeContent:1`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T16:23:00.193

## 附录：

我使用了 Bertrand Le Roy 的代码（制作 Pete Hurst 的代码）并用它创建了一个模块，然后添加了 3 个内容部分，它们都是 Core/Common 中正文部分的所有副本。

在同一个模块中，我创建了一个 ContentType 并向其中添加了我的三个自定义 ContentPart，加上自动路由和 bodypart 和标签等，一切使它就像 Orchard Pages ContentType 一样，只有更多的部分，每个都有自己的形状。

我将我的 ContentType 称为视图。

因此，您现在可以使用视图为您的站点创建页面。然后，您使用 ZoneProxy 将自定义 ContentPart 形状（Parts_MainImage、Parts_RightContent、Parts_LeftContent）分流到我需要它们的任何区域中。完成工作。

不完全是 Sitefinity，但正如比尔所说，足够好。

您必须创建自己的 ContentParts 来复制 BodyPart 而不仅仅是使用 TextField，原因是所有 TextFields 都具有相同的形状，因此如果您使用 ZoneProxy 放置它们，它们最终都会在同一个区域中。即，您构建自定义 ContentParts 只是为了获得形状。因为它是您使用 ZoneProxy 代码放置的形状。

一旦我对此进行了测试，我会将它作为一个模块上传到 Orchard Gallery。它将被称为 Wingspan.Views。

我在 2012 年 6 月 12 日之前都在休假，所以不要指望月底之前。

但本质上，使用 Pete Hurst 的代码，这就是我解决问题的方法。

## 编辑：

我可以通过创建三个内容部分（LeftContent、RightContent、MainImage 等）或任何需要的内容部分，然后将它们添加到 Page 内容类型来获得相同的结果。

这样，您只需添加所需的内容。

但是，拥有可以开箱即用的标准 ContentType 有一些优势。

例如，使用放置（Placement.info 文件）可以将 MainImage 内容部分用作页脚。即，名称可能应该是第 1 部分、第 2 部分等。

如果有一种方法可以为 TextField 生成的形状提供自定义名称，那么这些都不是必需的。这样，您可以根据需要添加尽可能多的 TextField，然后使用 ZoneProxy 代码放置它们。我不确定这是否可能。

# macos - 拖放问题 (Mac)

> ID：10786293
> 
> 赞同：0
> 
> 时间：2012-05-28T14:29:59.117
> 
> 标签：macos, javafx-2

我在运行我的代码时遇到了一些问题，这些代码在 Windows 下运行，现在我在 Mac 上。这与拖放有关，它曾经在 Windows 上工作（一次编写，到处调试！）但现在没有触发 onDragDropped 事件（我已经使用 System.out.println() 进行了测试）。这是代码。任何帮助表示赞赏。提前致谢

```
 HRWindowGridPane.setOnDragEntered(new EventHandler<DragEvent>() {

        @Override
        public void handle(DragEvent event) {
            System.out.println("Drag entered");
            lblPhoto.setEffect(finalBlend);
            event.consume();
        }
    });

    HRWindowGridPane.setOnDragExited(new EventHandler<DragEvent>() {

        @Override
        public void handle(DragEvent event) {
            lblPhoto.setEffect(null);
            System.out.println("Drag exited");
            event.consume();
        }
    });

    EventHandler<DragEvent> onDragOver = new EventHandler<DragEvent>() {
        public void handle(DragEvent event) {
            /* data is dragged over the target */
            /* accept it only if it is not dragged from the same node 
             * and if it has a string data */
            if (event.getGestureSource() != HRWindowGridPane &&
                    event.getDragboard().hasFiles()) {
                /* allow for both copying and moving, whatever user chooses */
                event.acceptTransferModes(TransferMode.ANY);
                System.out.println("Drag over");
            }

            event.consume();
        }
    };
    HRWindowGridPane.setOnDragOver(onDragOver);

    HRWindowGridPane.setOnDragDropped(new EventHandler<DragEvent>() 
    {

        @Override
        public void handle(DragEvent event) 
        {
            System.out.println("Drag dropping");
            Dragboard db = event.getDragboard();
            System.out.println("Drag dropped: got dragboard from event!");

            if(db.hasFiles())
            {
                System.out.println("Drag dropped: dragboard has files!");
                 for(File file:db.getFiles())
                 {
                     if(file.getName().contains(".jpg") ||  file.getName().contains(".jpeg") || file.getName().contains(".JPG"))
                     {
                        Image img;
                        try
                        {
                            System.out.println("Everything is fine until image processing... hmmm");
                            img = new Image(file.toURI().toURL().toString(), 118.0, 88.0, false, true);
                            ImageView view = new ImageView(img);
                            view.setFitWidth(118.0);
                            view.setFitHeight(88.0);
                            view.resize(118.0, 88.0);
                            lblPhoto.setGraphic(view);
                            avatarImage = file;
                        } 
                        catch (IOException e) 
                        {
                            e.printStackTrace();
                        }

                     }
                     else
                     {
                         AlertWindow alert = new AlertWindow("Falha", "O Arquivo não é uma imagem JPG válida");
                         try 
                         {
                            Stage stage = new Stage();

                            alert.start(stage);

                            stage.toFront();
                            HRWindowGridPane.toBack();
                            stage.centerOnScreen();
                            stage.show();

                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                     }

                 }

            }

            event.setDropCompleted(true);
            event.consume();
        }

    });

    HRWindowGridPane.setOnDragDone(new EventHandler<DragEvent>() {

        @Override
        public void handle(DragEvent event) 
        {
            System.out.println("Drag done");
        }
    }); 
```

有关系统的更多信息：

```
Brunos-MacBook-Pro:~ bruno$ java -version
java version "1.7.0_04"
Java(TM) SE Runtime Environment (build 1.7.0_04-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.0-b21, mixed mode) 
```

Javafx 2.1 版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:18:55.317

这个问题现在作为一个错误出现在 jira 上。这是我从另一个论坛得到的链接，希望它在 2.2 ga 时修复。

[http://javafx-jira.kenai.com/browse/RT-20253](http://javafx-jira.kenai.com/browse/RT-20253)

**编辑**

为了保持这个答案更新。`JavaFX-2`GA时解决了拖放问题。它在带有 jre 1.7+ 的 MacOS X 上工作就像一个魅力

# objective-c - 的解释！关系运算符

> ID：10786296
> 
> 赞同：2
> 
> 时间：2012-05-28T14:30:07.887
> 
> 标签：objective-c

没看懂的用途！if (!origin) 中的运算符。作者解释说它正在测试实例变量 origin 以查看它的值是否非零，但我不太明白这是什么意思。

```
#import <Foundation/Foundation.h>

@interface XYPoint : NSObject 
@property int x, y;

@end 
```

* * *

```
#import "XYpoint.h"

@implementation XYPoint
@synthesize x, y;

@end 
```

* * *

```
#import <Foundation/Foundation.h>

@class XYPoint;
@interface Rectangle: NSObject

-(XYPoint *) origin;
-(void) setOrigin: (XYPoint *) pt; 
@end 
```

* * *

```
#import "Rectangle.h"
#import "XYpoint.h"

@implementation Rectangle {
    XYPoint *origin;
}

-(void) setOrigin:(XYPoint *)pt {
    if (! origin)
    origin = [[XYpoint alloc] init];

origin.x = pt.x;
origin.y = pt.y
}
-(XYPoint *) origin {
    return origin;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:34:31.803

它正在测试该值是否已初始化（指针不等于 0；运算符`!`等效于 Objective-C中的**NOT运算符）。**如果`origin`分配了 XYPoint 类的对象，它将指向对象的地址而不是 0。

亲切的问候，
博

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:34:39.863

在这种情况下，它只是检查 origin 是否已经初始化。未初始化的指针为0x0，基本为0，在汇编级别等于false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:36:37.790

！表示“不是”，因此“if (!origin)”翻译为“if not origin”，并且正在测试 origin 是否具有值。该运算符在不同语言之间的含义会有所不同，但在 Objective-C 中，如果 origin 设置为 0，(!origin) 将返回 true。它必须已声明，否则您的代码将崩溃。在动态语言中，您可以使用此运算符来测试变量是否已声明以及它是否包含值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:37:55.110

`!`通常用于测试`not`. 大多数情况下，您会发现它在测试应该评估为真或假的条件时使用。然后`!`操作员将反转该值。

除了 false、0 或 nil（或 null，取决于语言）之外的任何值通常被认为是 true。例如，如果我有`x = 5`并且我测试`if (x)`了，if 语句的 true 条件将被执行，因为`x`它的值不是 false 或 nil。

在这种特殊情况下，它看起来好像`origin`是一个指向对象的指针。因此，如果它指向一个对象，它将有一个整数指针的非零值（类似于 0x??????）。测试也是如此`(! origin)`，“我的变量原点是否指向另一个对象，或者它是否为零。” 如果是这样，则代码确定将新值分配给 origin 是可以接受的。但是，如果之前设置了原点，则此代码不会为其分配新值。

# java - Java – 高效、数据库感知的实例级授权？

> ID：10786297
> 
> 赞同：4
> 
> 时间：2012-05-28T14:30:08.040
> 
> 标签：java, jpa, spring-security, authorization, shiro

在 JPA 应用程序中，我有一个应用程序要执行的场景

> 列出给定用户有权退出的所有帐户

我有 Account 实体和一个多对多表，其中列出了每个用户对每个帐户的授权——为了实现上述场景，应用程序当前只是内连接两个表——这非常快。

现在，我打算添加一个显式授权层（基于 apache shiro / spring security / other）以将授权相关逻辑与其余代码隔离，但是......

数据库中有大约 10k 个帐户，“普通”用户在所有这些帐户上都被授予“存款”，在其中一半上被授予“查看”权限，在少数人上被授予“提款”权限。

是否有任何安全框架允许有效地实施此方案？

即：他们中的任何一个都能够“装饰”类型为“从帐户 a 中选择 a”（或等效的 SQL）的 JPA 查询，从而在*不从数据库加载所有用户授权*的情况下获取帐户列表，并且无论如何，*而不必检索所有帐户*？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T15:25:34.123

看看[Apache Shiro](http://shiro.apache.org/)。

它允许您提取一次用户授权并在会话期间将其缓存。此外，如果所有用户都可以查看所有帐户，那么您不需要显式定义它，这将显着减少开销。

如果您的解决方案需要实时访问处理程序，Shiro 也可以在运行时动态重置权限。

Shiro 允许您实现典型的 RBAC 并定义如下权限：

```
domain:action:instance 
```

因此，在您的情况下，用户的权限可能如下所示：

```
account:deposit:*  // deposit all accounts
account:view:1111
account:view:2222
account:view:3333 // view on these accounts
account:withdraw:5555
account:withdraw:6666  // withdraw on these accounts 
```

在代码中，您可以执行以下操作：

```
if (SecurityUtils.getSubject().isPermitted("account:withdraw:"+account.getAccountNumber() ) {
  // handle withdraw
} 
```

Shiro 还具有用于附加抽象的注释驱动权限。

*编辑*

Shiro 权限是最终结果，而不是您开始的地方。我使用了一组表来表示用户到角色和角色到权限的映射以及其他到实例的映射。在 AuthN 之后，它通常是由用户 PK 索引的一组简单查询，以构建呈现权限所需的数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:03:01.137

我希望这是使用 Spring-Security 实现您的要求的可能性之一。

1.  写自定义，`org.springframework.security.acls.Permission`如 `ViewAccount`，，`DepositToAccount``WithDrawFromAccount`

2.  编写自定义 `org.springframework.security.access.PermissionEvaluator`Override `hasPermission(Authentication userAuthentication,Object accountObject,Object oneOfThePermission)`以检查用户是否对 accountObject 具有定义的权限

3.  在您的自定义评估器中获取对 JPA EntityManager 的引用，并在数据库中使用 user_id、permission_id、account_id 进行交叉检查/验证

4.  如果用户是“root”，您可以立即返回 true，`hasPermission`而无需使用 DB 进行验证。

5.  注释您的服务调用 `@PreAuthorize("isAuthenticated() and hasPermission(#accountArgument, 'respectivePermission')")`

请参阅[链接](http://blog.solidcraft.eu/2011/03/spring-security-by-example-securing.html)`Permission`以获取&的自定义实现`PermissionEvaluator`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:18:17.190

如果您使用的是 EclipseLink，这里有一些功能，

一个是@AdditionalCriteria 注释，它允许将过滤器应用于类的所有查询，

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_additionalcriteria.htm#additionalcriteria](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_additionalcriteria.htm#additionalcriteria)

另一个是 EclipseLink 对 Oracle VPD（数据库中的行级安全性）的支持，

[http://wiki.eclipse.org/EclipseLink/Examples/JPA/Auditing](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Auditing)

最后 EclipseLink 支持 SessionEvents 可以允许将过滤器附加到任何查询执行，

[http://www.eclipse.org/eclipselink/api/2.4/org/eclipse/persistence/sessions/SessionEventAdapter.html#preExecuteQuery%28org.eclipse.persistence.sessions.SessionEvent%29](http://www.eclipse.org/eclipselink/api/2.4/org/eclipse/persistence/sessions/SessionEventAdapter.html#preExecuteQuery%28org.eclipse.persistence.sessions.SessionEvent%29)

# visual-studio-2010 - .NET Entity Framework 4.0 - 防止覆盖

> ID：10786298
> 
> 赞同：1
> 
> 时间：2012-05-28T14:30:12.010
> 
> 标签：visual-studio-2010, entity-framework-4.1

我有一个 ASP.NET 4.0 Web 应用程序项目，它使用由 MSSQL 2008 生成并命名为 StaffModel.edmx 的 edmx 模型文件

我有我的自定义逻辑并应用到 StaffModel.Designer.cs ，今天我打开了 edmx ，但没有重新生成表单数据库，只是看看，但是 VS2010 不小心覆盖了我的 *.Designer.cs ！

没有消息或确认询问我是否覆盖，那么我如何在 VS2010 中禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:45:30.557

一般你不能。.Designer.cs 文件是自动生成的，永远不应修改，因为每次保存到 EDMX（即使在移动图表中的某些实体之后）或 T4 模板（如果您使用它）都会触发重新创建。

将您的更改移动到您自己的实体部分类，或将它们直接添加到代码生成器 - T4 模板。

# c# - 在 C# 中跨越继承边界重载？

> ID：10786300
> 
> 赞同：7
> 
> 时间：2012-05-28T14:30:27.027
> 
> 标签：c#, .net, .net-4.0, clr

在阅读了这篇**[文章](http://csharpindepth.com/Articles/General/Overloading.aspx)** 和**[那篇文章](http://blogs.msdn.com/b/ericlippert/archive/tags/brittle+base+classes/)**之后 - 我很困惑。

它说 ：

> 如果层次结构的不同级别有两种方法，则将首先选择“更深”的方法，即使它不是调用的“更好的函数成员”。

还 -

> 事实证明，如果您在子类中重写基类方法，则不算作声明。

现在让我们回到我的问题：

## 情况1

```
 public class Base
     {
           public virtual void  Foo(int x)  { "1".Dump();}
     }

    public class Child : Base
     {
          public void Foo(object x) { "3".Dump();}  
          public override void  Foo(int x)  { "2".Dump();}
     }

void Main()
{
    Child c = new Child();
    c.Foo(10); //emits 3
} 
```

好的。根据文章

> 将首先选择“更深”的一个，即使它不是“更好的功能。而且它不计算覆盖......

所以它是正确的，程序发出“3”。(`Foo(object x)`被执行)

让我们更改**1 行的行顺序**：

## 案例2

```
 public class Base
         {
                 public virtual void  Foo(int x)  { "1".Dump();}
                 public void Foo(object x) { "3".Dump();} //<line being moved here
         }

        public class Child : Base
         {
              public override void  Foo(int x)  { "2".Dump();}
         }

    void Main()
    {
        Child c = new Child();
        c.Foo(10); //emits 2 !!!!
    } 
```

现在它发出“2”。

现在让我们将所有*int 更改为 object*并将所有*object 更改为 int*：

## 案例3

```
 public class Base
    {
      public virtual void  Foo(object x)  { "1".Dump();}
      public void Foo(int x) { "3".Dump();} 
    }

    public class Child : Base
    {
         public override void  Foo(object x)  { "2".Dump();}
    }

void Main()
{
    Child c = new Child();
    c.Foo(1); //emits "3"
} 
```

**问题**：

* * *

**问题#1：**在案例 2 中，`Child` 继承了 `Foo(object x)`它的父亲并且他还覆盖了一个方法。

**但**我们不是说：

> 事实证明，如果您在子类中重写基类方法，那不算作声明

？？？

事实上，我们也没有声明继承的函数......那么在这种情况下这里**的规则是什么？**

* * *

**问题#2：**在案例 3 中，`Child` 继承了 `Foo(int x)`它的父亲并且他还覆盖了一个方法。

但是现在，他选择了它的父函数....

似乎`override`只有在完全匹配的情况下才能获胜。

再说一次，在这种情况下，这里**的规则是什么？**

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:58:34.603

请参阅类型 T 中名称 N 的[成员查找过程](http://msdn.microsoft.com/en-us/library/aa691331%28v=vs.71%29.aspx)（在您的情况下`Foo`为 type中的成员`Child`）：

首先，构造在 T 中声明的所有可访问（第 3.5 节）成员 N 和 T 的基本类型（第 7.3.1 节）的集合：

```
virtual void Foo(int x) // Base
void Foo(object x) // Base
override void Foo(int x) // Child 
```

包含覆盖修饰符的声明被排除在集合之外。

```
virtual void Foo(int x) // Base
void Foo(object x) // Base 
```

参数具有整数类型。所以，这里最好的选择是（参数类型匹配参数类型）

```
virtual void Foo(int x) // Base 
```

而这个方法叫。但它是虚拟方法。并且由于[虚方法调用](http://msdn.microsoft.com/en-us/library/aa645767%28v=vs.71%29.aspx)机制而被调用：

> 对于在类中声明或由类继承的每个虚拟方法，都存在该方法相对于该类的最派生实现。虚拟方法 M 相对于类 R 的最派生实现确定如下：
> 
> *   如果 R 包含 M 的引入虚声明，那么这是 M 的最派生实现。
> *   否则，如果 R 包含 M 的覆盖，那么这是 M 的最衍生实现。
> *   否则，M 相对于 R 的最派生实现与 M 相对于 R 的直接基类的最派生实现相同。

`virtual void Foo(int x)`对于一个类，最派生的方法实现是`Child`什么？是的

```
override void Foo(int x) // Child 
```

哪个被调用。在您的第三个示例中应用了相同的规则。但是当重写方法删除后留下两个选项时，最佳选择（由于参数类型）是非虚拟方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T14:58:53.833

有两件事发生：

1.  选择要调用的方法时，编译器将按照链接的文章遵守规则 - 即。即使较浅的方法是更具体的匹配，也会在较浅的方法之前选择较深的方法
2.  如果您调用被覆盖的方法，它将始终调用被覆盖的方法（这与选择调用哪个方法是分开的），调用基方法的“唯一”方法是从子类并使用 base.MyMethod(..)

所以基本上查找规则可以选择在更深的类上采用 int 的方法，但是当方法被调用时，如果它被覆盖，它将调用在子类上采用 int 的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T17:36:03.040

我认为你只是通过阅读这两篇文章来搞乱你的事实。它应该像任何其他正常的重写函数一样，因为子类中没有重载，因此没有可供选择的东西。让我们举一个简单的例子：

```
public class A
{
  public virtual void Foo()
  {
    Console.WriteLine("A.Foo() called");
  }
}

public class B: A
{
  public override void Foo()
  {
    Console.WriteLine("B.Foo() called");
  }
}

void Main()
{
new B().Foo();
} 
```

什么是预期的输出？显然，没有人会说 B.Foo() 打电话。那么在你的情况下，同样的事情正在发生。基类有一个更好的重载方法并不重要，子类只是赢得它..不要过度复杂的事情..

关于案例 3，我对此并不完全确定，但这里发生的情况是编译器尝试隐式转换为对象，然后它发现有一个更深层次的方法具有相同的签名和规则

> 如果层次结构的不同级别有两种方法，则将首先选择“更深”的方法，即使它不是调用的“更好的函数成员”

现在一旦它进入基类，它就会注意到有一个更好的方法可以使用，因此调用该方法..

PS：以上解释是基于观察到的结果，不一定是上述行为的确切原因。

# html - 跨页面拖放div？

> ID：10786301
> 
> 赞同：2
> 
> 时间：2012-05-28T14:30:35.357
> 
> 标签：html, drag-and-drop

我正在构建一个单独的页面，该页面由左侧的（div 的）列表和右侧的（div 的）网格组成。我想添加用户单击并拖动列表项之一并将其放在其中一个网格框上的功能。我没有使用 HTML5，但我知道它具有这种本机功能。我目前正在尝试避免使用 HTML 5。

![在此处输入图像描述](../Images/ebd69bcef42f1a4a865d5e08d91b6355.png)

上图显示了我的基本页面布局，红线显示了如何拖放内容。任何列表项都可以拖动到任何网格框中。网格单元是动态调整大小的（调整页面大小将调整网格单元的大小）到任何给定时间所有内容都始终适合页面的位置，没有滚动条。每个网格单元都有一个从 0 开始的索引，从左到右然后从上到下计数。我需要将列表项 ID（可以是任何数字）与其对应的网格单元索引（在本例中为 0-8）配对。

我什至不知道要使这种拖放成为可能，我需要做的第一件事。我只知道 HTML 的核心基础知识——所以我需要一些示例来演示这一点，而不仅仅是对使用这个和那个的一些简要说明，因为我不知道这个和那个意味着什么。我能找到的所有教程都与 HTML 5 相关，或者仅与在同一个列表中移动列表项有关——但在我的情况下，我需要将它移到列表之外。

这是我在下面使用的页面结构。请注意，列表项是在页面加载时动态添加的...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>View Cameras</title>
    <script type="text/javascript" language="javascript">
        var selIndex = 0;
        var lastListIndex = 0;

        function selBox(index) {
            document.getElementById('b' + selIndex).style.backgroundColor = "Black";
            selIndex = index;
            document.getElementById('b' + selIndex).style.backgroundColor = "Blue";
        }

        function pageload() {
            AddListItem('rtsp://192.168.1.1', 'Test Item 1');
            AddListItem('rtsp://192.168.1.2', 'Test Item 2');
            AddListItem('rtsp://192.168.1.3', 'Test Item 3');

            selBox(0);
            camload('');
            selBox(1);
            camload('');
            selBox(2);
            camload('');
            selBox(3);
            camload('');
            selBox(4);
            camload('');
            selBox(5);
            camload('');
            selBox(6);
            camload('');
            selBox(7);
            camload('');
            selBox(8);
            camload('');
            selBox(0);
        }

        function AddListItem(address, caption) {
            lastListIndex += 1;
            var i = lastListIndex;
            var h = '<div id="camlistitem' + i + '" class="camlistitem" onclick="camload(\''+address+'\')">';
            h += caption;
            h += '</div>';
            document.getElementById('divCamList').innerHTML += h;
        }

        function camload(addr) {
            var h = '';
            if (addr == '') {
                h = '<div style="width: 100%; height: 100%; text-align: center; vertical-align: middle;">';
                h += '  <img src="Cam.jpg" style="width: 100px; height: 80px;" alt="No Camera Selected"';
                h += '</div>';
            } else {
                h = '<OBJECT classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921" codebase="http://downloads.videolan.org/pub/videolan/vlc/latest/win32/axvlc.cab" ';
                h += 'id="player'+selIndex+'" events="True" style="width: 100%; height: 100%;">';
                h += '<param name="Src" value="' + addr + '" />';
                h += '<param name="ShowDisplay" value="True" />';
                h += '<param name="AutoLoop" value="False" />';
                h += '<param name="AutoPlay" value="True" />';
                h += '<embed id="vcl' + selIndex + '"  type="application/x-google-vlc-plugin" version="VideoLAN.VLCPlugin.2" ';
                h += 'autoplay="yes" loop="no" target="' + addr + '" style="width: 100%; height: 100%;"></embed></OBJECT>';
            }
            document.getElementById('divContent' + selIndex).innerHTML = h;
        }
    </script>
    <style type="text/css">
        body 
        {
            height: 100%;
        }
        * { margin: 0px; border: 0px; padding: 0px; }
        h3
        {
            font-size: 14px;
            font-weight: bold;
        }
        div.title
        {
            height: 40px; 
            box-sizing: border-box; 
            overflow: hidden;
        }
        div.main
        {
            height: 100%;
        }
        div.contentmain
        {
            top: 40px;
            bottom: 0;
            left: 250px;
            right: 0;
            overflow: hidden;
            position: absolute;
        }
        div.side
        {
            top: 40px;
            bottom: 0;
            width: 250px;
            position: absolute;
            background: lightgrey;
        }
        .matrix
        {
            display: table;
            width: 100%;
            height: 100%;
        }
        .row 
        {
            display: table-row;
        }
        div.contentbox
        {
            display: table-cell;
            width: 33%;
        }
        table.selecttable
        {
            width: 200px;
            height: 100%;
        }
        td.selecttable
        {
            text-align: center;
            cursor: pointer;
            color: White;
        }
        div.camlist
        {

        }
        div.camlistitem
        {
            background-color: Navy;
            color: White;
            cursor: pointer;
            margin-top: 1px;
            padding-left: 5px;
        }
        div.camlistitem:hover
        {
            background-color: Blue;
        }
    </style>
</head>
<body onload="pageload()">
    <div id="divTitle" class="title">
        <h1>View Cameras</h1>
    </div>
    <div id="divMain" class="main">
        <div class="side">
            <h3>1) Click box to select view:</h3>
            <div style="position: relative; float: left; width: 100%;">
                <table class="selecttable" border="1px">
                    <tr>
                        <td class="selecttable" id="b0" onclick="selBox(0);" style="background-color: Black;">0<br /></td>
                        <td class="selecttable" id="b1" onclick="selBox(1);" style="background-color: Black;">1<br /></td>
                        <td class="selecttable" id="b2" onclick="selBox(2);" style="background-color: Black;">2<br /></td>
                    </tr>
                    <tr>
                        <td class="selecttable" id="b3" onclick="selBox(3);" style="background-color: Black;">3<br /></td>
                        <td class="selecttable" id="b4" onclick="selBox(4);" style="background-color: Black;">4<br /></td>
                        <td class="selecttable" id="b5" onclick="selBox(5);" style="background-color: Black;">5<br /></td>
                    </tr>
                    <tr>
                        <td class="selecttable" id="b6" onclick="selBox(6);" style="background-color: Black;">6<br /></td>
                        <td class="selecttable" id="b7" onclick="selBox(7);" style="background-color: Black;">7<br /></td>
                        <td class="selecttable" id="b8" onclick="selBox(8);" style="background-color: Black;">8<br /></td>
                    </tr>
                </table>
            </div>
            <h3>2) Select cam to show in selected box:</h3>
            <div style="position: relative; float: left; width: 100%;">
                <div id="divCamList" class="camlist">
                    <div id="camlistitem0" class="camlistitem" onclick="camload('')">
                        [No Camera]
                    </div>
                </div>
            </div>
            <h3>3) Can't see the cameras? <a href="http://www.videolan.org/vlc/">Click Here.</a></h3>
        </div>
        <div class="contentmain">
            <div class="matrix">
                <div class="row">
                    <div class="contentbox" id="divContent0"></div>
                    <div class="contentbox" id="divContent1"></div>
                    <div class="contentbox" id="divContent2"></div>
                </div>
                <div class="row">
                    <div class="contentbox" id="divContent3"></div>
                    <div class="contentbox" id="divContent4"></div>
                    <div class="contentbox" id="divContent5"></div>
                </div>
                <div class="row">
                    <div class="contentbox" id="divContent6"></div>
                    <div class="contentbox" id="divContent7"></div>
                    <div class="contentbox" id="divContent8"></div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 
```

PS——会有缺图`Cam.jpg`

**更新**

感谢`roflmao`' 对以下答案的帮助，我现在一切正常。只是一个小故障，当我拖动一个项目时，它会突出显示页面上的所有内容，但这是另一个故事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:40:16.217

好的，所以您要做的第一件事就是使用 javascript 库，jQuery 或 Prototype（jQuery 是更流行的库）。以你现在的方式操作标准 JS 是在乞求跨浏览器的兼容性问题。

一旦你安装了 jQuery，你就可以使用 jQuery UI 库并使用可拖动和可放置的界面。看看[这个页面](http://jqueryui.com/demos/droppable/)。

代码将如下所示：http: [//jsfiddle.net/CZNhP/21/](http://jsfiddle.net/CZNhP/21/)

```
$(function() {
    $("#menu li").draggable({reset: true});

    $("#container").droppable({ 
        drop: function(event, ui) {
            // Here you instantiate your media object.
            // You can access the place your object was dropped on with
            // "this" and the draggged item with "ui.draggable"
        }
    });    
}); 
```

# ios - url有效时响应数据返回null

> ID：10786307
> 
> 赞同：0
> 
> 时间：2012-05-28T14:30:47.760
> 
> 标签：ios, xcode4.3

我正在尝试将一些数据从我的应用程序发送到 Web 服务器。

该应用程序应该做的是显示成员列表，在选择时显示他们的详细信息并允许编辑他们的详细信息。到目前为止，除了编辑之外的一切都在工作。

我收到的错误消息是

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“数据参数为零”

该应用程序运行良好，直到

```
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error]; 
```

看来 responseData 为空。我无法理解它，因为生成的 url 在输入浏览器时可以正常工作。

这是更新细节的全部代码

```
- (IBAction)submitEdits:(id)sender {
    smdbs_AppData *appData = [smdbs_AppData sharedInstance];
    NSString *loggedInID=appData.loggedInID;

    NSString *member = [self.memberDetailModel objectAtIndex:3];

    NSURL *urlLogin = [NSURL URLWithString:[NSString stringWithFormat:@"http://xxx/API.php?task=setMemberDetails&id=%@&mem_id=%@&section=%@&firstName=%@&lastName=%@&membershipNo=%@&DOB=%@&gender=%@&school=%@&religion=%@&ethnicity=%@&photoPerm=%@&swimPerm=%@&giftaid=%@&giftaidperson=%@&address1=%@&address2=%@&town=%@&county=%@&postCode=%@&homeTelNo=%@&mother=%@&motherMobile=%@&father=%@&fatherMobile=%@&other=%@&relationship=%@&otherTelNo=%@&email1=%@&email2=%@&doctor=%@&surgery=%@&docTelNo=%@&allergiesMed=%@&specialNeeds=%@&pack=%@&six=%@&joinedScouting=%@&joinedBeavers=%@&joinedCubs=%@&joinedScouts=%@&joinedYLs=%@&joinedHelpers=%@&joinedLeaders=%@&crbDate=%@&crbNo=%@", loggedInID, member, self.section.text, self.firstName.text, self.lastName.text, self.membershipNo.text, self.DOB.text, self.gender.text, self.school.text, self.religion.text, self.ethnicity.text, self.photoPerm.text, self.swimPerm.text, self.giftaid.text, self.giftaidperson.text, self.address1.text, self.address2.text, self.town.text, self.county.text, self.postCode.text, self.homeTelNo.text, self.mother.text, self.motherMobile.text, self.father.text, self.fatherMobile.text, self.other.text, self.relationship.text, self.otherTelNo.text, self.email1.text, self.email2.text, self.doctor.text, self.surgery.text, self.docTelNo.text, self.allergiesMed.text, self.specialNeeds.text, self.pack.text, self.six.text, self.joinedScouting.text, self.joinedBeavers.text, self.joinedCubs.text, self.joinedScouts.text, self.joinedYLs.text, self.joinedHelpers.text, self.joinedLeaders.text, self.crbDate.text, self.crbNo.text]];

    dispatch_async(kBgQueue, ^{
        NSData* editData = [NSData dataWithContentsOfURL:urlLogin];
        [self performSelectorOnMainThread:@selector(EditData:)
                               withObject:editData waitUntilDone:YES];
    });
}

- (void)EditData:(NSData *)responseData
{
    NSError* error;
    NSLog(@"%@",responseData);
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];
    NSString* success =  [json objectForKey:@"success"];

    if ([success isEqualToString:@"1"]) {
        [self performSegueWithIdentifier:@"showMemberDetails" sender:nil];
    }
} 
```

# css - 从粘性页脚错误计算的布局内容

> ID：10786310
> 
> 赞同：0
> 
> 时间：2012-05-28T14:30:55.707
> 
> 标签：css, layout, html, sticky-footer

我有一个带有粘性页脚的布局。问题是主中心内容的实际高度不正确。虽然它隐藏在页脚后面并且最终用户看不到这一点，但它会导致例如在地图居中时出现问题。

如何缩短内容的高度，使其保持在页脚上方，从而呈现真实的内容高度（同时保持 100%）。为了说明，我在这里有一个工作示例：http: [//jsfiddle.net/mp8nr/43/](http://jsfiddle.net/mp8nr/43/)

当您使用 Firebug 将鼠标悬停在元素上时，您会看到主要内容实际上位于粘性页脚下方。我只需要在不切断顶部的情况下将其向上移动，但我所有的尝试都失败了。我将不胜感激任何帮助。

![在此处输入图像描述](../Images/c3f2ab08d02b4cbc0fd43aae5327e729.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:10:35.250

编辑：您的布局有不止一件事错误。这是一个固定版本：http: [//jsfiddle.net/Ym3YP/](http://jsfiddle.net/Ym3YP/)

好的，所以您**实际上**还没有实现粘性页脚。您只需放置一个固定位置的页脚。当您使用固定或绝对定位时，有问题的元素会从您的 HTML 流中*取出，*这就是您的主内容 div 一直延伸到底部的原因。它看不到或识别出挡路的页脚！

以下是如何正确实现避免这些问题的粘性页脚：

取自[Ryan Fait](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)：

示例 HTML：

```
<html>
    <head>
        <link rel="stylesheet" href="layout.css" ... />
    </head>
    <body>
        <div class="wrapper">
            <p>Your website content here.</p>
            <div class="push"></div>
        </div>
        <div class="footer">
            <p>Copyright (c) 2008</p>
        </div>
    </body>
</html> 
```

示例 CSS：

```
* {
    margin: 0;
}
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's height */
}
.footer, .push {
    height: 142px; /* .push must be the same height as .footer */
}

/*

Sticky Footer by Ryan Fait
http://ryanfait.com/

*/ 
```

* * *

另外，请查看这篇[Smashing Magazine 文章](http://coding.smashingmagazine.com/2009/10/05/mastering-css-coding-getting-started/)，它深入解释了 CSS 流的基础知识，应该可以帮助您避免这些类型的问题。对于任何进入 CSS 的人来说，这是一本必读的书，它将使您免于将来的许多麻烦。

# javascript - 将自定义 JavaScript/jQuery 效果添加到 MVC 3 表单验证

> ID：10786312
> 
> 赞同：2
> 
> 时间：2012-05-28T14:31:03.023
> 
> 标签：javascript, jquery, asp.net-mvc-3, validation, jquery-effects

我正在使用 asp.net 的 MVC3 构建一个大型网站。在登录页面上，我使用内置函数进行不显眼的 javascript 验证。一切都很好，但我想为验证消息的显示方式添加一些效果。（我想要一个红色框滑到错误下方）。

我该怎么做呢？我一直试图弄清楚 jquery.validate.unobtrusive.js 是如何工作的，但这对我来说都是黑魔法，我似乎无法找到实际上将消息添加到屏幕上的代码。

如果有任何帮助，我将不胜感激！我在这方面很绿。

谢谢，

涅斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:47:07.890

这`ValidationSummary`是在出现服务器端错误后将错误添加到页面以使其可见的原因。`ValidationFor`元素提供客户端错误。

两者都是 HTML 助手。您将需要实现自己的形式，将错误返回到视图或覆盖这些错误并显示自定义 UI 元素。

看看 jQueryUI 的初学者。

事实是，我们每个人很可能会给你一个完全不同的场景来实现。但其中的关键元素将是 jQuery/Ajax/JSON

例如，对我来说，我在我发布的创建或更新的每个视图中都包含一个 javascript 引用

```
<script src="@Url.Content("~/Scripts/AjaxFormSubmission.js")" type="text/javascript"></script> 
```

该脚本如下所示：

```
/// <reference path="jquery-1.7.2.js" />

$("document").ready(function () {

    $('form').submit(function () {
        if ($(this).valid()) {
            $.ajax({
                url: this.action,
                dataType: "json",
                cache: false,
                type: 'POST',
                data: $(this).serialize(),
                beforeSubmit: showProgressStarted(),
                success: function (result) {
                    showSuccessError(result);                             
                }
            });
        }
        return false;
    });
}); 
```

提交表单时，我会弹出一个“请稍候，正在处理您的请求...”消息，并且`div`在完成时显示一个隐藏的消息，其中包含我的 JSON 成功或错误消息。

JQueryUI Dialog 可以让您实现这种目标。

这是上述脚本发布到的我的一项操作的示例

```
public JsonResult UpdateRequestStatus(RequestViewModel model) {
    try {
        AttemptUpdateRequestStatus(model);
        return Json(new { Success = true, ResultMessage = "Successfully saved" }, JsonRequestBehavior.AllowGet);
    }
    catch (Exception ex) {

        ModelState.AddModelError("", ModelStateErrorUtility.WrapResultMessageForList(ex.Message));
    }
    // this custom function evaluates my ModelState and strips out all the error messages so that I can send them all back as part of my JSON response
    return Json(new { Success = false, ResultMessage = ModelStateErrorUtility.GetModelStateErrors(ModelState) }, JsonRequestBehavior.AllowGet);
} 
```

这是我的 javascript/jQuery 代码，显示了我的自定义错误

```
function showSuccessError(result) {
    $('#resultSpan').html('');
    var headerText;
    if (result.Success) {
        headerText = "Action was successful!";
        $('#resultSpan').append($("<ul id='successMsg' style='list-style: none;' />").append(result.ResultMessage));
    }
    else {
        headerText = "Ooops! There is an Error";
        $('#resultSpan').append($("<ul id='errorMsg' style='list-style: none;' />").append(result.ResultMessage)).addClass("AjaxErrorText").removeClass("AjaxSuccessText");
    }
    showProgressComplete(headerText);
} 
```

这会将“请稍候......”的文本更改为实际的成功或错误消息

```
function showProgressComplete(headerText) {
    $('#ajaxResultPopUpHeaderText').html(headerText);
} 
```

就像我说的，这只是一个人的例子。这里的每个人很可能会以不同的方式实现这一点。真的是偏爱。

# apache-felix - Apache Felix 没有正确绑定我的配置 - 输入流版本错误

> ID：10786316
> 
> 赞同：0
> 
> 时间：2012-05-28T14:31:29.333
> 
> 标签：apache-felix, sling

我在 Apache Felix（实际上是 Sling）主机中部署了一个包。该捆绑包包含一些可配置的元素，其版本为 2.0。

我已将捆绑包更新到 v2.0.1 以进行一些小的代码更改，现在捆绑包将无法正确获取其配置 - 它保持在代码中设置的默认值，而不是获取在 Felix Web 控制台中配置的值。

日志中有错误消息：“[Configuration Updater] org.apache.felix.scr Cannot use configuration pid=com.mypackage.MyClass for bundle inputstream:my-bundle-2.0.1.jar 因为它属于 bundle inputstream :my-bundle-1.0.jar" 这听起来像是问题的原因。

然而：

1.  我无法通过 Web 界面编辑输入流值 - 只能通过停止服务器、手动编辑配置文件并重新启动。当然，当我更新捆绑包时，配置也应该更新？

2.  虽然 inputstream 指定了 v1.0，但是 bundle 在升级到 v2.0 时并没有问题。这里有什么不同？

3.  我在两台服务器上做了同样的事情（虽然可能不完全是！），一台服务器似乎有配置指定 inputstream=v2.0 （以及 v2.0.1 的捆绑包），它工作正常。是什么导致输入流版本在此服务器上更新？（大概与 2 的答案相同 - 我想这将完全取决于流程中的哪些步骤已执行以及以什么顺序执行。）

感谢您收到任何建议 - 我无法找到任何文档来提供有关通过 Felix Web 控制台管理捆绑包的说明或故障排除建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:24:02.717

如果可能的话，我会简单地停止并完全删除捆绑包并使用 Sling 安装它，例如使用 WebDAV`maven-sling-plugin`或将其放入文件夹中。`/apps/myapp/install`

我发现这种方式最容易保持一致，并且安装非常自动化，并且可以正确处理捆绑升级。

# css - 清理和维护大型 css 文件的技巧

> ID：10786319
> 
> 赞同：8
> 
> 时间：2012-05-28T14:31:49.040
> 
> 标签：css, syntax, maintenance

*我刚开始这份新工作，作为设计师，我必须为我们的 Web 应用程序维护 CSS 文件。现在它跨越了近 7000 行，重量超过 160kb 并且有数百个 !important 规则。*

**我想重新组织文件，将其拆分为子部分，清理它并使其语法同质化。**

但这似乎是一项艰巨的任务，文件和应用程序是如此庞大和复杂，以至于我想知道它是否甚至可以在不破坏某些东西（并且没有看到它）的情况下实现。

我已经使用在线工具审核了该文件，似乎我可以使用某种自动重构而不会冒太大风险。我还尝试了一些工具来检查是否实际使用了选择器，问题是这个 Web 应用程序完全是用 javascript 编写的，所以整个事情都是动态的，常规工具几乎无法使用（没有正确的链接可遵循，没有站点地图ETC。）

**你们对如何进行，从哪里开始，以及是否值得我花时间有什么建议吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:00:49.350

重构如此庞大的代码将非常耗时且困难，根据我的经验，这是我的 2p 价值：

1.  开始分支项目（这里我假设您正在使用版本控制工具） - 这将允许您独立使用代码并标记您将达到的任何里程碑。

2.  使用美化器格式化您的 CSS - 它会增加可读性，并有助于搜索特定声明而不会丢失任何实例。

3.  尝试识别未使用/冗余的 css 并摆脱它。

4.  您可以尝试使您的选择器更短（例如`.main .foo .bar`，可能会很好`.bar`） - 它会提高可读性并提高性能，但请注意这一点，如果您采取的每一步都开始出现问题，请准备好返回。

5.  如果可能，尝试消除任何`!important`- 如果需要，使选择器更具体。如果大多数`!important`声明是为了解决特定于浏览器的问题，那么 CSS 重置可能会有所帮助，否则现在引入 CSS 重置可能会增加比解决问题更多的问题 - 如果您的应用程序中根本没有 CSS 重置的话。

6.  将 css 分解并重新组合成不同的模块（如果有帮助，还有文件） - 面向对象的 CSS 是一种使事情更易于维护的可能技术，如果你从它开始它效果最好，但它也可以帮助你重构。[https://github.com/stubbornella/oocss/wiki](https://github.com/stubbornella/oocss/wiki)是有效的，但您可以考虑其他替代方案，例如[SMACSS](http://smacss.com/)。

7.  之后，您可以考虑使用 CSS 预处理器，例如[Less](http://lesscss.org/)或 Sass，允许您定义变量和 mixin（类似于函数）、模块化等等——尽管这最终可能是一项非常昂贵的任务，因此请仔细评估是否这样会给你带来比痛苦更多的好处。

8.  尽可能多地进行测试，考虑单元测试以确保您所做的任何更改都不会破坏其他地方的任何东西。

9.  有时，重写所有内容最终可能比重构更耗时，所以如果您的评估表明重构不会带来足够的好处，请不要害怕保持原样。

您面临的是最艰巨的任务之一，祝您好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:48:41.383

您将不得不查看所有代码并理解它。您不能尝试通过一些自动化实用程序运行它并让它为您完成工作。编写紧凑的 CSS 是一门艺术，你不能走捷径，否则你的文件最终会超过 160kb。

另一方面，您可以从头开始，将您的样式大致基于原始样式。

不过，我推荐的是在 Firefox 上使用像 Firebug 这样的“检查元素”实用程序来查看是否有任何多余的样式。

还可以尝试将出现在多个页面上的样式拆分为通用 CSS 文件，将其他样式拆分为特定文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:39:18.663

起初我会推荐使用一些 CSS 预处理器。例如，您可以使用 LESS。[首先使用带有自定义选项的http://www.procssor.com](http://www.procssor.com)使您的 CSS 更漂亮，然后将其粘贴到[http://css2less.cc/](http://css2less.cc/)中。您可能需要进行一些更改以“模块化”代码。

然后您可以取出代码片段，这些代码片段不会出现在每个页面上，并在需要的地方手动加载它们。

从 LESS 编译 CSS 并开始使用它。

编辑：

所以你的 CSS 可能看起来像这样：

```
#wrapper #nav { some-rules }
#wrapper #content { some-rules }
#wrapper #footer { some-rules }

#wrapper #content form#register-form { some-rules } 
```

应用 css2less：

```
#wrapper {
    #content {
        some-rules;
        form#register-form {
            some-rules;
        } 
    }
    #footer {
        some-rules;
    }
    #nav {
        some-rules;
    }
} 
```

并将其模块化：

main.less

```
#wrapper {
    #content {
        some-rules;
    }
    #footer {
        some-rules;
    }
    #nav {
        some-rules;
    }
} 
```

无注册

```
#wrapper {
    #content {
        form#register-form {
            some-rules;
        } 
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:36:56.447

东西会坏掉，但没关系，你会度过难关的。由于您正在重写，因此可能会很好地研究像 Saas 或更少的动态 CSS 语言

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T14:42:59.597

我会重新开始

首先使用样板[http://html5boilerplate.com/](http://html5boilerplate.com/) css clearer 清除样式，这应该消除对所有 !important 规则的需要，样板旨在消除浏览器之间的样式差异。

然后可能使用类似[http://lesscss.org/](http://lesscss.org/)的东西来制作动态可管理的样式表。

寻找共同元素并为这些元素使用共享类。

即使在最复杂的应用程序中，您也不应该需要 7000 行样式表。

# iphone - 如何将视图控制器作为自身视图控制器分配给 appdelegate 类？

> ID：10786321
> 
> 赞同：1
> 
> 时间：2012-05-28T14:32:08.083
> 
> 标签：iphone, ios, uiviewcontroller

我有一个视图控制器类 LoginViewcontroller 我需要将该视图控制器作为自视图控制器添加到 appdelegate 类。当我尝试访问 self.viewcontroller 时，我需要类似的东西，我的 LoginViewController 应该响应。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:28:02.427

写下这段代码：

AppDelegate.h 文件

```
#import "LoginViewController.h" 
```

创建 LoginViewController 类的对象

```
LoginViewController *loginVC; 
```

创建 LoginViewController 的属性

```
@property (nonatomic, retain) LoginViewController *loginVC; 
```

AppDelegate.m 文件

```
@synthesize loginVC;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.loginVC = [[[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.loginVC;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:43:23.697

如果您要做的是为您的应用程序设置根视图控制器，那么：

```
self.rootViewController = loginViewController; 
```

如果这不是您所需要的，请提供更多关于您要完成的工作的信息。

# regex - 内容的正则表达式匹配 元素

> ID：10786322
> 
> 赞同：0
> 
> 时间：2012-05-28T14:32:08.587
> 
> 标签：regex, parsing, syntax, formatting

我有以下内容

```
<li>Title: [...]</li> 
```

我正在寻找匹配并替换它的正则表达式，以便我可以将其解析为 XML。我只是想在 Sublime Text 2 中使用正则表达式查找和替换，所以我想匹配上面示例中的所有内容，除了 [...] 这是内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:40:09.987

为什么不提取内容并使用它来构建 xml，而不是尝试将内容的包装器塑造成 xml？（还是我误解了你？）

```
<li>Title: ([^<]*)<\/li> 
```

是提取内容的正则表达式。

除了 [^<]* 之外，它非常自我解释，这意味着匹配任意数量的不是“<”的字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:35:51.320

我不知道 Sublime，但这样的东西应该足以让你了解 li 的内容。它允许标签上有可选的额外属性。确保并关闭区分大小写，以防 LI 或 Li 等（直接来自[http://www.regular-expressions.info/examples.html](http://www.regular-expressions.info/examples.html)）：

```
<li\b[^>]*>(.*?)</li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:37:11.813

`<li>\S*(.*)?</li>`

这应该与您的字符串匹配，内容正在捕获第 1 组。

# iphone - 每次应用激活时加载视图

> ID：10786323
> 
> 赞同：0
> 
> 时间：2012-05-28T14:32:08.693
> 
> 标签：iphone, objective-c, ios, xcode, uiviewcontroller

我正在我的应用程序中设置某种密码安全性，因此除了 iphone 所有者之外没有人可以打开应用程序。而且我想加载每次用户单击应用程序图标时创建的密码视图。

我知道 AppDelegate 中有一个很好的方法，叫做`-(void)applicationWillResignActive:(UIApplication *)application`. 但是，在 AppDelegate 中，您无法使用`presentModalViewController: animated:`我非常喜欢的。

当用户打开应用程序时，如何每次加载密码视图？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:46:19.840

在 AppDelegate 中，您肯定会在某处加载视图控制器。例如导航控制器：

```
-(void)applicationWillResignActive:(UIApplication *)application {

    // probably more code....

    [window addSubview:navigationController.view];  

    [window makeKeyAndVisible];

    return YES;

} 
```

现在，在这个 navigationController 中，你可以写一个类似的方法

```
(void) lockScreen {

    // code to for presentModalViewController: animated:
} 
```

我会用`applicationDidEnterForeground`

```
- (void)applicationDidEnterForeground:(UIApplication *)application {

    [navigationController lockScreen];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:40:47.853

使用 nsnotification 来做到这一点。在 didBecomeActive 中添加一个具有执行模型视图呈现的方法的观察者。发布通知。

# objective-c - 检查并删除 NSSet 中的对象

> ID：10786324
> 
> 赞同：2
> 
> 时间：2012-05-28T14:32:10.507
> 
> 标签：objective-c, cocoa-touch, nsset

我有一个`NSSet`包含四个`NSString`s。如果我打电话`-containsObject:`查看是否`NSSet`包含某个字符串，是否可以删除`NSSet`等于我刚刚检查的字符串的条目？

如果我的问题没有意义，可能是因为使用 a`NSSet`可能是解决此问题的错误方法。

我有四个`NSStrings`，想把它们放在某种组中（集合、数组等）。然后我想检查另一个是否与组中的`NSString`任何`NSString`s 匹配。`NSString`如果组内的和 a之间存在匹配`NSString`，我希望能够删除`NSString`组内的匹配。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T14:40:34.367

假设您的集合是`*mySet`并且您要删除的对象是`objectToRemove`。然后你可以这样做：

```
NSMutableSet *mutableSet = [NSMutableSet setWithSet:mySet];
[mutableSet removeObject:objectToRemove];
mySet = mutableSet; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:34:26.483

看看`NSMutableSet`和`removeObject:`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:35:14.113

由于`NSSets`是不可变的，因此您无法在初始化后更改它们。使用`NSMutableSet`which 具有`removeObject:`移除对象的方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T14:38:13.407

这不是这个世界的东西，程序员经常引用。但是你需要 NSMutableSet 或 NSMutableArray 而不是 NSSet 或 NSArray。因为只有可变集合在创建后才能被更改。

您使用..从 NSMutableArray 中删除任何对象`[myArray removeObject:yourObject];`

同样对于 NSMutableSet `[mySet removeObject:yourObject];`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-28T15:01:56.283

您可以在 NSMutableArray 上使用以下代码来删除对象的第一次出现。

```
[myArray removeObjectAtIndex:[myArray indexOfObject:myObject]; 
```

# linux - 这个 bash 脚本有多危险？

> ID：10786327
> 
> 赞同：7
> 
> 时间：2012-05-28T14:32:36.543
> 
> 标签：linux, bash, delete-file, nohup

**警告：**危险脚本。不要从命令行运行！

在公司的笑话电子邮件中看到了这一点。有人可以向我解释为什么这个 bash 脚本比普通的 'rm -rf' 命令更危险吗？：

```
nohup cd /; rm -rf * > /dev/null 2>&1 & 
```

特别是，为什么使用 nohup 以及最后的元素是什么？

**警告：**危险脚本。不要从命令行运行！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T14:40:13.357

你可以尝试一些不那么“危险”的东西：

```
nohup cd /; find * >/dev/null 2>&1  & 
```

我得到这个：

```
nohup: ignoring input and appending output to `nohup.out'
nohup: cannot run command `cd': No such file or directory
[2] 16668 
```

所以，`nohup`part 什么都不做，它只会触发一个错误。第二部分（原始脚本）尝试删除当前目录中的所有内容，并且不能被 停止`Ctrl-C`，因为它在后台运行。它的所有输出都被重定向到 void，因此您看不到任何“访问被拒绝”的进度消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T14:36:06.980

`2>&1`接受 stderr（文件句柄 2）并重定向到 stdout（文件句柄 1）。`&`单独将 rm 命令置于后台。nohup 允许作业在启动它的人注销后继续运行。

换句话说，这个命令会尽最大努力清除整个文件系统，即使用户退出他们的终端/shell。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-28T16:36:15.300

笑话有点破，显然没有经过测试，他的意思是

```
 nohup sh -e "cd / ; rm -rf *" > /dev/null 2>&1 & 
```

或者

```
 nohup rm -rf / > /dev/null 2>&1 & 
```

否则 nohup cd /; part 被 shell 认为是一个单独的行。第二行只是产生 rm -rf * 递归地 rm 你的当前目录（减去名称以 . 开头的文件）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T14:37:27.463

`nohup [..] &`即使在用户注销后，它也会在后台运行（我想更难停止）

`2>&1`将标准错误重定向到标准输出

`> /dev/null`丢弃来自标准输出的任何内容

该命令基本上似乎什么都不做，因为您的文件系统在后台慢慢被破坏。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-28T14:37:28.910

nohup 意味着它将忽略挂断信号，这意味着即使用户不再登录，它也会继续运行。

cd / 将用户移动到根目录

rm -rf * 递归删除所有文件（遍历所有目录）并强制删除（不关心文件是否正在使用）

最后的部分将所有输出重定向到无处。它应该基本上将您的驱动器格式化为空。

# objective-c - Objective c - 对 dealloc 委托的调用方法

> ID：10786328
> 
> 赞同：2
> 
> 时间：2012-05-28T14:32:48.463
> 
> 标签：objective-c, ios, delegates, dealloc, retaincount

我有一个对象`Person`，一个协议`PersonDelegate`
`Person`有一个`@property (assign) id<PersonDelegate> delegate`；

在我的代码中某处我做：

```
Person *newPerson = [[Person alloc] init]; 
newPerson.delegate = theDelegate;  
...  
[theDelegate release]; // and dealloc

...

now Person has some new information for the delegate, so I call in Person
[self.delegate doSomething]; 
```

但后来我得到 EXC_BAD_ACCESS

这是因为委托已经解除分配了吗？Person 怎么知道他的委托是 dealloc？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:36:17.807

您正在**分配**您的代表而不是**保留**它。由于您释放了您的委托，它在您的个人对象中不再有效，因为它没有被它保留。

将您的委托属性更改为：

`@property (retain) id<PersonDelegate> delegate`;

当你释放你的人对象时不要忘记释放它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:36:44.907

您的委托属性未设置为保留，因此一旦您这样做，它就会变坏`[theDelegate release];`

通常将委托*设置*为分配，以避免循环引用。但在这种情况下，委托本身通常已经保留了对其委托的对象的引用。

IE。

```
Person *newPerson = [[Person alloc] init]; 
[self.people addObject:newPerson];
newPerson.delegate = self;
[newPerson release]; 
```

`self.people`保留所有`persons`已创建的内容以及`persons`所有内容都指向`self`他们的代表也是如此

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T14:37:08.680

假设你真的想要`assign`.... :)

您可以在`newPerson`释放委托对象之前将其保存为属性并将其委托设置为 nil。您可以让 Person 对象侦听代理即将离开的通知，并自行将其设置为 nil。

# javascript - JS：以数学方式减少事件侦听器内的缩放值

> ID：10786341
> 
> 赞同：0
> 
> 时间：2012-05-28T14:33:44.763
> 
> 标签：javascript, jquery, mobile, gesture, addeventlistener

我正在这样做：

```
$(document).ready(function() {

    var dom = document.body,
        fs = 16,
        min = 16,
        max = 100,
        scale;

    dom.addEventListener("gesturechange", gestureChange, false);

    function gestureChange(e) {

        e.preventDefault();

        scale = e.scale;
        fs = Math.round(fs*scale);

        if ( fs <= max && fs >= min )
            $('#element').css('width', fs+'px');

        if ( fs > max ) fs = max;
        if ( fs < min ) fs = min;
    }

}); 
```

因此，当我在 iPhone 上进行捏合/缩放手势时，宽度会`#element`增加。 `fs`是它增加的值。但是现在放大和增加的速度太快了。因此，只要我在屏幕上移动一点手指，宽度的增加就相当大。

我想知道如何以及是否可以将 fs 值“乘以”（或其他）一定数量，从而使整个体验变慢？我只是希望我的变焦发生得更慢。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:38:35.400

只需将您自己的比例因子应用于整个缩放计算：

```
var myScale = 5; // Test which value is best suited for your needs
fs = Math.round(fs*(scale/myScale)); 
```

# apache-flex - 如何获取对当前活动窗口的引用？

> ID：10786345
> 
> 赞同：1
> 
> 时间：2012-05-28T14:34:08.187
> 
> 标签：apache-flex

我想参考当前的活动窗口。例如，应用程序上方的 1 个窗口，我如何确定哪个窗口当前处于活动状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T09:47:17.187

我自己得到了答案。请参阅以下代码以获取活动窗口。

```
var activeWindow:NativeWindow = mx.core.Application.application.nativeApplication.activeWindow;
var parent:Sprite = (activeWindow.stage.getChildAt(0) as WindowedSystemManager).document as Sprite; 
```

# php - WordPress自定义帖子格式？

> ID：10786346
> 
> 赞同：2
> 
> 时间：2012-05-28T14:34:14.533
> 
> 标签：php, wordpress

是否可以在 WordPress中添加自定义[帖子格式？](http://codex.wordpress.org/Post_Formats)

默认值涵盖了我的大多数用例，但我还想添加 2 种其他类型（“文件”和“幻灯片”）。

那么如何添加这两种附加格式呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T12:40:25.710

不，那是做不到的。帖子格式从未打算扩展或添加。请参阅WordPress Codex 上的[Post Formats](http://codex.wordpress.org/Post_Formats)中的以下内容（强调我的）：

> 帖子格式功能提供了可用于支持该功能的所有主题的标准化格式列表。主题不需要支持列表中的每种格式。**主题甚至插件都无法引入新格式。**此列表的标准化提供了众多主题之间的兼容性，并为外部博客工具以一致的方式访问此功能提供了途径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:37:40.830

是的，使用扩展程序。[这里有一个](http://wordpress.org/extend/plugins/wp-post-formats/)，还有[很多](http://wordpress.org/extend/plugins/search.php?q=post+format)。

# node.js - SyntaxError：nodejs中的意外令牌其他

> ID：10786347
> 
> 赞同：-2
> 
> 时间：2012-05-28T14:34:15.907
> 
> 标签：node.js

我收到 SyntaxError: Unexpected token else in nodejs app in line 92 col7

在 app.js 中

```
var express = require('express'), everyauth = require('everyauth');

everyauth.debug = true;

var usersByLogin = {
  'krishna': {
    login: 'krishna',
    email: 'krishna@blogab.com',
    password: 'krishna'
  }
};

everyauth
  .password
  //.loginWith('email')
  .loginWith('login')
  .getLoginPath('/login')
  .postLoginPath('/login')
  .loginView('bcore/login.jade')
  .loginLocals( function (req, res, done) {
    setTimeout( function () {
      done(null, {
        title: 'blogab - login'
      });
    }, 200);
  })
  .authenticate( function (login, password) {
    var errors = [];
    if (!login) errors.push('Missing login');
    if (!password) errors.push('Missing password');
    if (errors.length) return errors;
    var user = usersByLogin[login];
    if (!user) return ['Login failed'];
    if (user.password !== password) return ['Login failed'];
    return user;
  })
  .getRegisterPath('/register')
  .postRegisterPath('/register')
  .registerView('bcore/register.jade')
  .registerLocals( function (req, res, done) {
    setTimeout( function () {
      done(null, {
        title: ' Register'
      });
    }, 200);
  })
  .extractExtraRegistrationParams( function (req) {
    return {
      email: req.body.email
    };
  })
  .validateRegistration( function (newUserAttrs, errors) {
    var login = newUserAttrs.login;
    if (usersByLogin[login]) errors.push('Login already taken');
    return errors;
  })
  .registerUser( function (newUserAttrs) {
    var login = newUserAttrs[this.loginKey()];
    return usersByLogin[login] = newUserAttrs;
  })

  .loginSuccessRedirect('/admin/')
  .registerSuccessRedirect('/admin/');

var app = express.createServer(
  express.bodyParser(),
  express.static(__dirname + "/public"),
  express.cookieParser(),
  express.session({ secret: 'htuayreve'}),
  everyauth.middleware()
);

app.configure( function () {
  app.set('view engine', 'jade');
});

app.get('/', function (req, res) {
  res.render('templates/default/index', {
    title: 'blogab',
    users: JSON.stringify(usersByLogin, null, 2)
  });                           
});

app.get('/login', function (req, res) {
  res.render('bcore/login', {
    title: 'login',
    users: JSON.stringify(usersByLogin, null, 2)
  });
});

app.get('/admin/newpost', function (req, res) {
  res.render('bcore/newpost', {
    title: 'Blogab-newpost',
    users: ';
    JSON.stringify(usersByLogin, null, 2)
  });
});

app.get('/admin/', function (req, res) {
  res.render('bcore/admin', {
    title: 'core',
    users: JSON.stringify(usersByLogin, null, 2)
  });
});

everyauth.helpExpress(app);

app.listen(1224, function(){
  console.log("blogab is  running on port %d in %s mode", app.address().port,  app.settings.env);
}); 
```

我不知道我做错了什么我在重定向 url 为 \ 之前使用everyauth 它工作正常但是当我改变它时它不能正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:01:30.480

查看第 94 行...这一点

```
app.get('/admin/newpost', function (req, res) {
  res.render('bcore/newpost', {
    title: 'Blogab-newpost',
    users: ';
    JSON.stringify(usersByLogin, null, 2)
  });
}); 
```

这一点

```
users: '; 
```

应该

```
user : '' 
```

它可能认为它是内联的 if/else

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-28T20:10:55.267

尝试检查丢失的键入语法，如果主文件没有问题，请尝试检查另一个文件。

注意：如果你想在 if 之后使用 else，不要忘记将“ **;** ”从 if 移动到最后一个 else。

```
if (...) {...};         
//            ^ move this
if (...) {...}          
else if (...) {...}     
else {...};             
//        ^to here, this happens to the best of us that uses ; 
```

如果你不移动“ **;** ”，这与在没有 if 的情况下键入 else 是一样的，并且因为没有 if，它不会期望 else if 或 else 之后。

而且，如果您不想处理此类事情，只需将“ **;** ”符号一起删除，但是...如果您真的需要使用它，只需将其从 ifs 中删除...

# python - 如何使嵌套的 Panel 和 Sizer 在 wxpython 中工作

> ID：10786353
> 
> 赞同：3
> 
> 时间：2012-05-28T14:34:32.017
> 
> 标签：python, wxpython

我正在学习 wxpython 并试图让嵌套面板工作。这是为更复杂的屏幕做准备的练习，因此它可能看起来有点复杂，但这是有目的的；）。我想要做的是： 创建一个顶部框架 向其中添加一个面板 向其中添加一些文本和一个输入字段 使用垂直 boxsizer 进行面板布局 这是我实现它的方法：

```
import wx
class MainWindow(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent)

        #add position panel
        posPnl = wx.Panel(self)
        lbl1 = wx.StaticText(posPnl, label="Position")
        lbl2 = wx.StaticText(posPnl, label="Size")
        sizeCtrl = wx.TextCtrl(posPnl)

        posPnlSzr = wx.BoxSizer(wx.HORIZONTAL)
        posPnlSzr.Add(lbl1, 1, wx.GROW)
        posPnlSzr.Add(sizeCtrl, 1, wx.GROW)
        posPnlSzr.Add(lbl2, 1, wx.GROW)   

        #create a top leverl sizer to add to the frame itself
        mainSzr = wx.BoxSizer(wx.VERTICAL)
        mainSzr.Add(posPnlSzr)

        self.SetSizerAndFit(mainSzr)
        self.Show()

app = wx.App(False)
frame = MainWindow(None, "Trading Client")
app.MainLoop() 
```

我得到的只是一个带有“Pos”字样的小空白屏幕。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T15:09:59.817

这里的逻辑是创建一个`Panel`以在其中添加控件，然后在`BoxSizer`其中声明您添加的每个控件在`Panel`调整大小时的行为方式，并最终设置应用在其上的`Panel`内容`BoxSizer`。

你有2个问题。

*   首先，您缺少上述`posPnl`对象语句的最后一部分。添加这个：

    ```
    posPnl.SetSizer(posPnlSzr) 
    ```

    将控件添加到`posPnlSzr`

*   第二个问题是您正在`posSnlSzr`添加`mainSzr`. 这样做是错误的。同样，逻辑是将控件添加到 sizer，您可以将 a`Panel`视为复合控件。因此，正确的代码是添加`posPnl`到`mainSzr`：

    ```
    mainSzr.Add(posPnl) 
    ```

    据我所知，您正在尝试`posPnl`使用主窗口自动调整大小。如果要添加面板以便`mainSzr`实际调整它的大小：

    ```
    mainSzr.Add(posPnl, 1, wx.GROW) 
    ```

* * *

这给出了最终的源代码：

```
#!/usr/bin/env python

import wx
class MainWindow(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent)

        #add position panel
        posPnl = wx.Panel(self)
        lbl1 = wx.StaticText(posPnl, label="Position")
        lbl2 = wx.StaticText(posPnl, label="Size")
        sizeCtrl = wx.TextCtrl(posPnl)

        posPnlSzr = wx.BoxSizer(wx.HORIZONTAL)
        posPnlSzr.Add(lbl1, 1, wx.GROW)
        posPnlSzr.Add(sizeCtrl, 1, wx.GROW)
        posPnlSzr.Add(lbl2, 1, wx.GROW)

        posPnl.SetSizer(posPnlSzr)

        #create a top leverl sizer to add to the frame itself
        mainSzr = wx.BoxSizer(wx.VERTICAL)
        mainSzr.Add(posPnl, 1, wx.GROW)

        self.SetSizerAndFit(mainSzr)
        self.Show()

app = wx.App(False)
frame = MainWindow(None, "Trading Client")
app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:58:32.640

我的应用程序的基本形式是这样的（父 --> 子）：

框架 --> 面板 --> 大小调整器 --> 小部件/大小调整器

对于某些事情，我这样做：

框架 --> 尺寸器 --> 面板 --> 尺寸器 --> 小部件/尺寸器

我的筑巢器是时候了。当你是一个新程序员时，你通常想在纸上勾勒出你的 GUI，然后在它们周围画框，试图找出哪些尺寸器可以工作，你想在哪里嵌套它们，等等。

您只需将**self.SetSizerAndFit(mainSzr)**更改为**posPnl.SetSizerAndFit (mainSzr) 即可解决此问题**

# java - 用户意图分析

> ID：10786355
> 
> 赞同：1
> 
> 时间：2012-05-28T14:34:34.843
> 
> 标签：java, artificial-intelligence, enterprise

我将从事一些项目，该项目将根据他/她在系统中所做的事情进行用户动作识别。

据我了解，这里有两个主要部分：

*   拦截用户操作（比如胖客户端中的 web/ui 交互中的 http 流量）
*   用户意图分析

虽然第一部分相当技术性，因此易于实施，但第二部分与 AI 相关并且可以是学术性的。

所以我想知道是否有人知道一些可以实现“动作识别”的第三方/学术项目。

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:42:32.190

我相信 - [Apache Mahout](http://mahout.apache.org/)可以帮助您。期待这个框架的协同过滤部分。

# ruby-on-rails - 思考 Sphinx 获取模型的方面名称

> ID：10786357
> 
> 赞同：0
> 
> 时间：2012-05-28T14:34:43.877
> 
> 标签：ruby-on-rails, sphinx, thinking-sphinx

我有一个 Rails 应用程序，我需要某个模型的构面名称。有没有一种方法可以定义所有方面的名称？

了解索引名称也会有所帮助。

# c# - 2 项目和他们之间的引用

> ID：10786364
> 
> 赞同：0
> 
> 时间：2012-05-28T14:35:40.447
> 
> 标签：c#, winforms, architecture, reference, n-tier-architecture

我有主要项目，第二个有几个`UserControls`. 我在主项目中使用这个用户控件，并且`UserControls`需要使用主项目中的一些类（负责`BusinessLogic`和`DataAccessLayer`）。

如何连接两个项目？现在它创建了循环依赖。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:41:27.880

一种可能的方法涉及将您的用户控件绑定到您的服务规范而不是实现。

从技术上讲，这意味着您有另一个库，在您的主项目和包含您的规范的控制库之间共享：

```
public interface IBusinessLogic
{
   void DoSomething();
} 
```

然后，在您的用户控件库中，您针对接口进行编码，允许注入实现：

```
public MyControl : UserControl
{
   private IBusinessLogic _logic;
   public MyControl( IBusinessLogic logic )
   {
      this._logic = logic;
   } 
   // use the _logic
} 
```

并在您的主模块中提供服务的实现并将其注入您的控件：

```
public MyBusinessLogic : IBusinessLogic { }

MyControl control = new MyControl( new MyBusinessLogic() ); // inject the implementation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:37:23.423

不要创建`BusinessLogic`和`DataAccessLayer`了解您的主要项目。在自己的项目中创建每一个，并从您的主项目中引用它们。

**注意：**更好 -`DataAccessLayer`应该只引用 from`BusinessLogic`并且您的主项目应该只引用`BusinessLogic`.

但这只是简而言之对您的问题的简短回答。我建议您在这里搜索更多关于[3-tier architecture 的](https://stackoverflow.com/search?q=3%20tier)信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:38:04.987

将您的业务逻辑和数据访问层放在第三个项目中，也许称之为“通用”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:38:24.517

我认为您需要从两个项目中取出共享逻辑并将其放入第三个项目中。

例如：如果您的主项目中有用户控件也需要的逻辑 - 您需要将该逻辑提取到一个单独的项目中并从两个项目中引用它。

# jquery - 如何删除动态创建的“UL”，点击它的孩子？（以及儿童需要删除）

> ID：10786370
> 
> 赞同：0
> 
> 时间：2012-05-28T14:35:58.353
> 
> 标签：jquery, facebook

我正在用 li 创建一个 ul 元素，单击 li 后，我从 li 获取文本信息。一旦我得到了这些东西，我就不会像所有有孩子的父母一样，但我不能同时删除这两个..

这是我的功能：

```
$(document).ready(function(){

  var  gender = ['Female','Male'],
      genderField = $('#gender');

   var genderUpdate= function(){
            genderField.focus(function(){
                if(!$('#genderList').length){
                    var topPos = $(this).position().top,lftPos = $(this).position().left;
                    $('<ul id="genderList"></ul>').css({
                        position    :'absolute',
                        top         : topPos,
                        left        : lftPos
                    }).appendTo($(this).parent());

                    $.map(gender,function(val,i){
                        $('<li>'+val+'</li>').appendTo('#genderList');
                        console.log('append');
                    })

                   $('#genderList li').live('click', function(){
                        genderField.attr('value', $(this).text());
                        $(this).parent().remove();//not removing the parent with this sibilings.
                    })

                }

            })
        }

                        genderUpdate();

}) 
```

这是小提琴：

[在这里摆弄](http://jsfiddle.net/85DM4/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:10:59.363

1.  `.live()`在 JQuery 1.7+ 中已弃用，您应该改用`.on()`JQuery 1.7+。

3.  您不想用 更改 HTML 属性`.attr()`，属性主要代表默认值。当你使用 Javascript 时，你应该通过`.prop()`. 使用 JQuery访问`value`属性时，您宁愿使用更简单的`.val()`JQuery 方法。
    发生的情况是`.attr()`在 JQuery 1.6 之前用于访问和设置 HTML 属性和 DOM 属性，现在情况不再如此。

5.  扩展 Zee Tee 的答案，您还可以有一个预定义的隐藏 ul，您可以切换它，而不是每次用户在输入框中单击时生成一个新的。

你真的需要一个数组并动态设置 CSS 吗？好吧，我保留了这些特征，添加了上面列出的修复程序，这是一个有效的[JSFiddle](http://jsfiddle.net/85DM4/15/)。

编辑：在小提琴中添加了评论并正确地用分号加了分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:46:59.163

尝试这样做：

```
 $("#genderList li").remove(); 
```

或者

```
 $("#genderList li").hide(); 
```

[http://jsfiddle.net/85DM4/4/](http://jsfiddle.net/85DM4/4/)

唯一的问题是，一旦您选择它，它就不会让您再次选择它。我会重新评估一些事情，我希望在我第一次选择它之后能够再次看到那个窗口。

# java - 从 ASP 转换的 JSON 日期 - 需要转换为 Java

> ID：10786383
> 
> 赞同：0
> 
> 时间：2012-05-28T14:36:37.353
> 
> 标签：java, android, json

我从 ASP.NET 转换的 JSON 字符串有一点问题。

C# 为我转换的 JSON 字符串如下所示：`/Date(1338199919727)\/`

我猜它会将它转换为毫秒或其他东西，但是我如何从这个巨大的整数中获得 Java 日期？

我需要在我的Android应用程序上正确显示日期（作为特定格式的字符串（dd-MM-yyyy：HH），这就是我需要它在Java中的原因。我是否必须手动制作某种形式的转换器我自己，想办法做到这一点？或者有一些甜蜜，简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:38:45.167

> 但是我如何从这个巨大的整数中得到一个 java-date 呢？

啊，那部分很简单：

```
Date dt = new Date(1338199919727L); 
```

你说得对，它是从时代以来的毫秒数（1970 年 1 月 1 日午夜）。Java 的`Date`对象[有一个](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date%28long%29)接受这个值的构造函数。

通常，大多数 JSON 解析器都具有可以传递给它们的“reviver”函数或类的概念，这将允许您在反序列化 JSON 时预处理值。我不太了解 Android 的 JSON 解析器，不知道它是否有。如果不是（这会有点落后），您将不得不遍历生成的对象图以查找已成为字符串的属性并将它们转换为事后的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:53:23.683

我希望这是你需要的

```
 long Ldate = 1338199919727L;
    Date date = new Date(Ldate * 1000);
    String strdate = (String) DateFormat.format("MM/dd/yy h:mmaa", date); 
```

# php - Php Custom Mvc - 如何检查函数是否获取参数？

> ID：10786396
> 
> 赞同：2
> 
> 时间：2012-05-28T14:37:26.480
> 
> 标签：php, model-view-controller, class, function

我最近在为 php 开发一个自定义 mvc，其中一个问题真的让我很困扰：我有控制器类，我想检查该类的某个函数是否获取参数，如果没有，则返回 false。

有什么方法可以做到吗？因为我在 php.net 和 google 中搜索并没有找到任何东西....thanx！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:40:53.727

看一下[`func_get_args`](http://php.net/manual/en/function.func-get-args.php)

您可以在控制器的方法中使用它来获取传递给该方法的所有参数的列表。

你也有[`func_num_args`](http://www.php.net/manual/en/function.func-num-args.php)它只会给你传递给你的方法的参数数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:42:58.723

使用[反射](http://www.php.net/manual/en/book.reflection.php)：

```
$reflection = new ReflectionMethod ($class_name, $method_name);
$params = $r->getParameters(); 
```

`$params`现在是一个[ReflectionParameter](http://php.net/manual/en/class.reflectionparameter.php)对象数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T06:14:32.180

使用函数 func_get_args

```
function sum(){
    $s=0;
    foreach(func_get_args() as $a) $s+= is_numeric($a)?$a:0;
    return $s;
};

print sum(1,2,3,4,5,6); // 21 
```

# php - symfony2 应用程序，vagrant & ant：stty：标准输入：无效参数

> ID：10786399
> 
> 赞同：8
> 
> 时间：2012-05-28T14:37:32.470
> 
> 标签：php, ant, symfony, phpunit, stty

我正在尝试将我的开发环境（symfony2 应用程序）从我的 windows 7 localhost 移动到使用 vagrant 和默认 ubuntu 10.04 64 位机器的虚拟机。一切都设置好了，它几乎可以工作了，但有一件事情困扰着我：

当我运行 ant 并执行 phpunit 时，在执行我的自制引导程序时出现以下错误：

```
stty: standard input: Invalid argument 
```

我可以将问题缩小到以下代码行，它执行 symfony cache:warmup 命令：

```
executeCommand($application, "cache:warmup"); 
```

这将执行以下命令：

```
php app/console -e test -q cache:warmup 
```

**在没有 ant 的情况下运行 phpunit 可以正常工作**，在没有 executeCommand 行的情况下运行 ant 也是如此。

我阅读了一些有关此 stty 错误的信息，并查找了`~/.bashrc`, `~./profile`, `/etc/bash.bashrc`,`/etc/profile`以及`/root/.bashrc`并`/root/.profile`没有找到类似 tty 或 stty 的任何内容。所以我不知道我可以删除什么来使它工作。

我有点卡住了，因为我需要缓存预热并且无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:29:47.240

这需要一段时间才能弄清楚，但我现在明白了。

出于某种原因，传递给 symfony2 应用程序对象的选项仅在由 ant 运行时才会导致问题。我对导致它的原因没有任何见解，但是将命令更改为此可以解决问题：

```
php app/console --env=test --quiet cache:warmup 
```

由于这只是长形式，并没有改变任何东西，我很高兴。我的整个 executeCommand 函数如下所示：

```
function executeCommand($application, $command, Array $options = array()) {
    $options["--env"] = "test";
    $options["--quiet"] = true;
    $options = array_merge($options, array('command' => $command));

    $application->run(new ArrayInput($options));
} 
```

唯一的行更改是 2 和 3，其中数组的键从`-e`和更改`-q`。我希望这可以帮助一个或另一个在这样的问题上挣扎的人！

# javascript - 点击全屏 - Ext JS

> ID：10786406
> 
> 赞同：4
> 
> 时间：2012-05-28T14:38:04.760
> 
> 标签：javascript, extjs4, fullscreen

如何通过单击按钮使我的浏览器切换到全屏模式，我正在寻找任何类型的解决方案，我的意思是基于 Ext JS、Javascript、HTML5 或其他技巧，如果你有一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:40:10.893

没有得到广泛支持，但有[https://developer.mozilla.org/en/DOM/Using_full-screen_mode](https://developer.mozilla.org/en/DOM/Using_full-screen_mode)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T16:09:42.767

我找到了这个解决方案

```
var docElm = document.documentElement;
if (docElm.requestFullscreen) {
   docElm.requestFullscreen();
}
else if (docElm.mozRequestFullScreen) {
   docElm.mozRequestFullScreen();
}
else if (docElm.webkitRequestFullScreen) {
   docElm.webkitRequestFullScreen();
} 
```

并取消全屏：

```
if (document.exitFullscreen) {
   document.exitFullscreen();
}
else if (document.mozCancelFullScreen) {
   document.mozCancelFullScreen();
}
else if (document.webkitCancelFullScreen) {
    document.webkitCancelFullScreen();
} 
```

这项工作为我使用 ExtJS 4.0.7 和 chrome

完整的解释[在这里](http://css.dzone.com/articles/pragmatic-introduction-html5)。

# iphone - 在 xcode 中获取时区列表

> ID：10786418
> 
> 赞同：1
> 
> 时间：2012-05-28T14:39:06.977
> 
> 标签：iphone, xcode, date, timezone, dst

我可以使用获取时区列表

```
NSArray *timezoneNames = [NSTimeZone knownTimeZoneNames] ; 
```

问题是列表是根据设备上设置的当前日期生成的。我希望使用未来日期生成此列表，以便正确反映适用的夏令时偏移。

例如，如果我在 2012 年 5 月使用 APP，那么芝加哥的时区条目是

> 美国/芝加哥 (CDT) 偏移量 -18000（日光）

如果我在 2012 年 2 月使用相同的应用程序，芝加哥的条目是

> 美国/芝加哥 (CST) 偏移量 -21600

我可以在我的代码中更改系统日期，以便我可以随意生成任何特定日期的列表吗？

桑杰

# android - 如何签署在 sencha touch v1 上开发的 apk

> ID：10786423
> 
> 赞同：1
> 
> 时间：2012-05-28T14:39:25.453
> 
> 标签：android, cordova, sencha-touch, google-play

我有一个问题，我在 sencha touch v1 中开发了一个应用程序，然后我生成了一个没有问题的 PhoneGap apk，但是当它发布到 google play 时，我知道我必须签署该应用程序。有谁知道我该怎么做这个程序？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T16:35:35.810

这对我有用：

确保您的应用程序运行良好

确保您已在 AndroidManifest.xml 中设置了版本号。除非它与商店中的以前版本不同，否则 Google Play 不会接受它。versionCode 是一个整数值，因此每次提交时只需将其递增 1，无论是主要更新还是次要更新。versionName 除了向用户显示之外没有任何用途，它是一个字符串，因此您可以随意命名。例如，您可以将其设置为 1.0.3，而 versionCode 可能为 3。 ( [http://developer.android.com/tools/publishing/versioning.html#appversioning](http://developer.android.com/tools/publishing/versioning.html#appversioning) )

http://schemas.android.com/apk/res/android”>

创建密钥库文件

创建密钥库文件并设置密码。我不会详细介绍如何实际执行此操作。只要确保你不会丢失这个文件。如果您丢失了它，并且必须创建一个新应用，那么当您尝试将其添加到 Google Play 商店时，它将成为一个新应用。（[http://developer.android.com/tools/publishing/app-signing.html#cert](http://developer.android.com/tools/publishing/app-signing.html#cert)）

始终为每个应用程序使用不同的密钥库文件，因为它是您将应用程序上传到商店的私钥。如果您决定将您的应用程序转移给其他开发人员，则必须向他们提供密钥库文件，并且如果您还将该密钥库用于其他应用程序，那么您就会遇到安全问题。（[http://developer.android.com/tools/publishing/app-signing.html#secure-key](http://developer.android.com/tools/publishing/app-signing.html#secure-key)）

将密钥库文件放在计算机上的某个位置。在哪里并不重要。

告诉 ant 你的密钥库文件在哪里

然后，您只需要通过转到您的 android 项目文件夹（对于 phonegap，它位于平台/android 中）来告诉 ant 密钥库文件在哪里，并创建一个 ant.properties 文件并将以下内容放入其中：

key.store=/Users/username/Documents/path/to/my-release-key.keystore key.alias=app_name

其中 key.store 等于从 C 驱动器开始的密钥库文件的路径，而 key.alias 就是您想简称为它的任何名称。您将在以下命令中使用别名。

构建您的应用

打开命令提示符，导航到您的项目并运行 phonegap build。

phonegap 构建安卓

在platforms/android/bin 你应该有： AppName.ap_ AppName.ap_.d AppName-debug.apk AppName-debug-unaligned.apk AppName-debug-unaligned.apk.d

登录发布模式

然后导航到 android 目录并运行 ant release：

cd 平台/android ant 发布

它将提示您输入密钥库密码和别名“app_name”的密码。输入他们两个的密钥库密码。

在platforms/android/bin 中，您现在应该还有应用程序的发布版本：

AppName-release.apk AppName-release-unaligned.apk AppName-release-unsigned.apk AppName-release-unsigned.apk.d

现在进入 bin 目录：

光盘盒

jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore /Users/username/Documents/path/to/my-release-key.keystore AppName-release-unsigned.apk app_name

输入您的密钥库密码

jarsigner -verify -verbose -certs AppName-release-unsigned.apk

如果您收到这样的警告，请忽略它：警告：此 jar 包含未验证证书链的条目。

zipalign -v 4 AppName-release-unsigned.apk AppName.apk

它会说：验证成功

您的最终 apk (AppName.apk) 将在 bin 目录中创建。

（[http://developer.android.com/tools/publishing/app-signing.html#releasemode](http://developer.android.com/tools/publishing/app-signing.html#releasemode)）

然后您可以上传到 Google Play。

我希望这有帮助。如果您有任何问题，请告诉我。

[http://www.adamwadeharris.com/sign-publish-phonegap-app-google-play-store-windows/](http://www.adamwadeharris.com/sign-publish-phonegap-app-google-play-store-windows/)

# objective-c - 通过 iOS SDK 跟踪对 Open Graph 的单个请求

> ID：10786431
> 
> 赞同：0
> 
> 时间：2012-05-28T14:40:06.883
> 
> 标签：objective-c, ios, facebook-graph-api, delegates

我正在构建一个应用程序，本质上是一个使用 Facebook SDK for iOS 的非常基本的 Facebook 客户端。我已经实现了`FBRequestDelegate`协议，并正在通过以下方式将我的请求发送到 Open Graph API

`[facebook requestWithGraphPath:@"me/friends" andDelegate:self]`

这工作正常，一旦请求的内容到达，SDK 调用委托方法，传入数据

`- (void)request:(FBRequest *)request didLoad:(id)result`

我的问题是，有没有人知道使用`FBRequest`传递给委托方法的最佳实践方法来明确地将其识别为来自我的原始请求？

如果我提出多个请求，我如何区分委托调用与哪个请求相关？我正在使用`BOOL`标志，目前一次只做一个请求，但这不是一个好方法。

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:24:23.433

该方法`requestWithGraphPath`返回一个`FBRequest`对象，该对象也将在`request:didLoad`稍后传递。因此，您可以简单地比较两个对象并确定它们是否相同。

# c++ - 为什么我不能捕捉到这个异常？

> ID：10786436
> 
> 赞同：6
> 
> 时间：2012-05-28T14:40:22.327
> 
> 标签：c++

我想创建一些从 std::runtime_error 派生的异常类型，并且我希望它们具有字符串流类型功能。因此，我创建了一个异常类，它组成 a`std::stringstream`并且派生自`std::runtime_error`：

```
template<typename T>
class error_stream : public std::runtime_error
{
public:
      error_stream() :
      std::runtime_error(""), ss(std::make_shared<std::basic_stringstream<T>> ())
      {
      }

      ~error_stream() throw()
      {
      }

      template <typename T>
      error_stream & operator << (const T & t)
      {
          *ss << t;
          return *this;
      }

      virtual const char * what() const throw()
      {
          get_str(s_, ss->str());
          return s_.c_str();
      }

protected:

    template <typename T>
    void get_str(std::basic_string<char> & s_, const std::basic_string<T> & str) const
    {
        s_ = str;
    }

    template<>
    void get_str(std::basic_string<char> & s_, const std::basic_string<wchar_t> & str) const
    {
        std::basic_string<char> ret(str.begin(), str.end());
        s_ = ret;
    }

protected:
    std::shared_ptr<std::basic_stringstream<T>> ss;
    mutable std::basic_string<char> s_;
}; 
```

而且我创建了一个更具体的异常类型，它又派生自这个`error_stream`异常：

```
template<typename T>
class w32file_exception : public w32utils::error_stream<T> 
{
public:
    w32file_exception() : error_stream<T>() {}
}; 
```

但是，我在这里遇到了一些我不明白的事情，因为当我抛出 a 时，`w32file_exception`我实际上只能将它作为它的 parent 来捕捉`error_stream`。谁能看到我做错了什么？

```
 try
    {
        throw w32file_exception<char>() << "test";
    }
    catch ( w32file_exception<char> & e )
    {
        ASSERT_PASSED;
    }
    catch ( error_stream<char> & e )
    {
        std::cout << e.what() << std::endl;  // Why do I end up here?
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-28T14:45:02.340

你到底`throw`长什么样子？你`operator<<`在调用 throw 之前使用你的，像这样：

```
throw w32file_exception<T>() << "fooobar"; 
```

那么答案是，你`operator<<`返回一个`error_stream`和否`w32file_exception`，所以抛出的异常的类型是`error_stream`。

你可以这样解决这个问题：

```
template<typename T, typename DERIVED>
    class error_stream : public std::runtime_error
{
public:
    // ...
    template <typename U>
        DERIVED & operator << (const T & t)
    {
        *ss << t;
        return static_cast<DERIVED&>(*this);
    }
    // ...
}; 
```

但是随后您失去了捕获每个`error_stream`异常的能力，因为它是每种类型的新类型`DERIVED`。

# linux - 在 GNU/Linux 中使用 OpenSSL 部署应用程序

> ID：10786438
> 
> 赞同：2
> 
> 时间：2012-05-28T14:40:40.603
> 
> 标签：linux, deployment, ssl, openssl

我为 GNU/Linux 开发了一个使用 OpenSSL 库的应用程序。这个应用程序应该在基于 Debian 和 Red Hat 的发行版中运行。

确保用户系统安装 OpenSSL 库的最佳策略是什么？对于特定版本的 OpenSSL，我是否应该包含对 .deb 或 .rpm 的依赖？如何处理具有旧版本 OpenSSL（例如 0.9.8）的系统和具有 1.0.0 的较新版本的系统？还是最好静态链接它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:42:42.060

Ubuntu 使用 Debian 软件包 (.deb)，RedHat 使用 RPM。至少，您必须创建两个不同的规范文件来为这两个发行版构建包。

当您动态链接不同版本的库时，您实际上也应该构建多个版本的可执行文件。通常，.so API 只保证在主要版本中保持不变。即 0.9.4 将兼容 0.9.9，但不兼容 1.0.1。

# web-scraping - 搜索机器人检测

> ID：10786439
> 
> 赞同：1
> 
> 时间：2012-05-28T14:40:44.873
> 
> 标签：web-scraping, bots, search-engine-bots

是否可以防止网站被任何抓取工具抓取，但同时允许搜索引擎解析您的内容。

仅仅检查用户代理并不是最好的选择，因为很容易模拟它们。

JavaScript 检查可能是（谷歌执行 JS）一个选项，但一个好的解析器也可以做到这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:44:18.077

检查链接访问时间可能是可能的，换句话说，如果首页被点击，那么首页上的链接都被“快速”点击。

更简单的是，在页面中删除一些隐藏的链接；机器人将跟随，人们几乎永远不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:01:51.373

使用[DNS 检查](http://ekstreme.com/phplabs/search-engine-authentication)卢克！:)

1.  检查用户代理，看看它是否将自己标识为搜索引擎机器人
2.  如果是，获取请求页面的 IP 地址
3.  反向 DNS 查找 IP 地址以获取主机名
4.  转发 DNS 查找主机名以获取 IP 地址

帮助文章通过 Google[验证 Googlebot](http://support.google.com/webmasters/bin/answer.py?hl=en&hlrm=ru&answer=80553)中提供了相同的想法

# email - 如何使用 McAfee 阻止发送电子邮件的代码呢？

> ID：10786441
> 
> 赞同：0
> 
> 时间：2012-05-28T14:40:47.717
> 
> 标签：email, block, send, mcafee

无论我使用什么语言以编程方式发送电子邮件（如 js、perl、php 等），它总是失败，因为 McAfee 阻止了它们。所以我想知道我们是否可以发送电子邮件，即使机器上安装了 McAfee？或者我们可以使用另一种类似的方式成功将邮件发送给接收者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:46:33.833

Perl.exe 有时在安装 McAfee 的情况下根本无法运行。您应该能够将 Perl.exe 添加到 McAfee 中的例外以更正该问题。如果在将 Perl 添加到例外列表后仍然无法从 Perl 发送邮件，请尝试验证 McAfee 是否阻止了端口 25。我相信所有出站邮件都是通过 SMTP 端口 25 发送的。您也应该可以使用 McAfee 打开它，但这可能存在安全风险。

根据我过去的经验，将 Perl.exe 添加到例外列表可以解决几乎所有从 Perl 应用程序/脚本以编程方式访问 Internet 的问题。

# php - 功能 beforeFilter 在 cakephp2.0 中不起作用

> ID：10786446
> 
> 赞同：0
> 
> 时间：2012-05-28T14:41:08.600
> 
> 标签：php, cakephp, cakephp-2.0

我正在使用 CakePHP 2.0。我在 AppController.php 中使用了以下代码

```
 public function beforeFilter() {
    parent::beforeFilter();
    $this->setOrderConfigValues();
 }
 public function setOrderConfigValues(){
   $this->Session->write('Order.session', $this->Session->read('Config.userAgent'));
 } 
```

但它不工作。当我在函数内部应用 die() 时，它会显示该值，但是在正常使用时，不会调用函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:35:09.543

您可能`beforeFilter()`在其他一些控制器中有覆盖，但您忘记添加`parent::beforeFilter();`

# javascript - 在选择下拉struts2时填充文本字段

> ID：10786449
> 
> 赞同：0
> 
> 时间：2012-05-28T14:41:26.593
> 
> 标签：javascript, ajax, jsp, struts2

我的 jsp 页面中有一个文本`<s:select>`。

现在我要做的是，当有人从此下拉列表中选择一个值时，我需要调用我的操作类以根据下拉选择获取一些值。

现在这个值（我从我的 actionclass 中得到的）应该显示在`<s:textfield>`下面这个下拉列表中。

请帮忙 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:48:48.640

好吧，您必须使用 Ajax 的强大功能。您有多种选择来做到这一点。

1.  用户简单的 Javascript。
2.  使用任何 javascript 框架，如 jquery、DOJO 等

将您的代码与选择标记的单击/更改绑定，并向 S2 操作发送一个简单的请求。您可以使用[Stream 结果](http://struts.apache.org/2.3.1/docs/stream-result.html)从 S2 操作发送回数据，或者更好（在我看来）从发送回 JSON 数据您的操作类和用户 Jquery 内置功能以在 JSP 解析 JSON 数据

用户[S2 JSON 插件](http://struts.apache.org/2.2.3/docs/json-plugin.html)，用于从 Action 和 JSP 发送和接收 JSON 数据，让生活更轻松。

请按照本教程了解如何将 JQuery 与 JSON 和 struts2 一起使用

*   [使用-struts-2-json-and-jquery](http://java.dzone.com/articles/using-struts-2-json-and-jquery)

**更新**

您需要在 Ajax 和 JQuery 的 JSP 代码中执行类似的操作

```
var selectedState = document.getElementById("selectboxid");
        var statedata = selectedState.options[selectedState.selectedIndex].value;
        var formInput='state='+statedata;
$.getJSON('search/dropDownRenderer',formInput,function(data) {
} 
```

# blackberry - 如何在黑莓上的任意位置设置屏幕上的字段位置？

> ID：10786454
> 
> 赞同：0
> 
> 时间：2012-05-28T14:41:37.857
> 
> 标签：blackberry, user-interface

我是黑莓新手，我想将我的一个字段位置设置在屏幕的左角和屏幕右上角的另一个字段在同一级别，但我无法做到这一点。这怎么可能？

我也不想将坐标作为硬编码值给出，但想使用屏幕宽度和高度进行计算，因为我想在黑莓的 Torch I 和 Torch II 模型上运行相同的应用程序。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T19:36:36.163

放在`AbsoulteFieldManager`屏幕上，然后您将能够使用 为您的字段设置自定义位置`add(field, x, y)`。看看这个[教程](http://docs.blackberry.com/en/developers/deliverables/17971/Display_button_halfway_down_screen_839917_11.jsp)。

# c# - 将 SQL 数据库导出到 WinForm 数据集，然后使用数据集导出到 MDB 数据库

> ID：10786458
> 
> 赞同：0
> 
> 时间：2012-05-28T14:41:57.180
> 
> 标签：c#, sql, winforms, oledb

我的应用程序是一个依赖数据库的 winform 应用程序。在应用程序启动时，它连接到服务器上的 SQL 数据库，并将此信息放在 DataSet/DataTable 中。

如果由于某种原因无法访问服务器上的数据库，则应用程序具有内置的故障转移功能，它将从本地数据库中获取其信息。

如果在正常情况下，我启动将从 sql 数据库中读取的工具，并且如果它已在服务器上更新（一个单独的片段检查这一点），它应该确保本地数据库是最新的，这就是问题开始了..（见下文）

*这部分工作正常并作为上下文添加 - 这是我们连接到 SQL 数据库的地方*

```
 public static DataSet dtsTableContents;
    public static DataTable CreateDatabaseSQLConnection()
    {
        try
        {
            string strSqlConnectionString = "Data Source=MyLocation;Initial Catalog=MyCatalog;User=MyUser;Password=MyPassword;";
            SqlCommand scoCommand = new SqlCommand();
            scoCommand.Connection = new SqlConnection(strSqlConnectionString);
            scoCommand.Connection.Open();
            string strQueryToTable = "SELECT * FROM " + strTableName;
            dtsTableContents = new DataSet();
            SqlCommand scmTableInformation = new SqlCommand(strQueryToTable, scnConnectionToDatabase);
            SqlDataAdapter sdaTableInformation = new SqlDataAdapter(scmTableInformation);
            scnConnectionToDatabase.Open();
            sdaTableInformation.Fill(dtsTableContents, strTableName);
            DataTable dttTableInformation = dtsTableContents.Tables[strTableName];
            scnConnectionToDatabase.Close();
            return dttTableInformation;
        }
        catch
        {
            return null;
        }
    } 
```

这个片段是从我的本地数据库读取的故障转移方法的一部分......

*这部分工作正常并作为上下文添加 - 这是我们连接到 MDB 数据库的地方*

```
public static DataTable CreateDatabaseConnection()
    {
        try
        {
            string ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=MyLocation;Persist Security Info=True;JET OLEDB:Database Password=MyPassword;"
            odcConnection = new OleDbConnection(ConnectionString);
            odcConnection.Open();
            string strQueryToTable = "SELECT * FROM " + strTableName;
            DataSet dtsTableContents = new DataSet();
            OleDbCommand ocmTableInformation = new OleDbCommand(strQueryToTable, ocnConnectionToDatabase);
            OleDbDataAdapter odaTableInformation = new OleDbDataAdapter(ocmTableInformation);
            ocnConnectionToDatabase.Open();
            odaTableInformation.Fill(dtsTableContents, strTableName);
            DataTable dttTableInformation = dtsTableContents.Tables[strTableName];
            ocnConnectionToDatabase.Close();
            return dttTableInformation;
        }
        catch
        {
            return null;
        }
    } 
```

从我的 CreateDatabaseSQLConnection() 我有一个数据集。验证此 DataSet 包含来自服务器数据库的所有信息。现在我一直在谷歌搜索，发现自己试图使用这段代码来更新基于这篇文章的本地数据库：http: [//msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update( v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update(v=vs.71).aspx)

```
public static void UpdateLocalDatabase(string strTableName)
    {
        try
        {
            if (CreateDatabaseConnection() != null)
            {
                string strQueryToTable = "SELECT * FROM " + strTableName;
                OleDbDataAdapter odaTableInformation = new OleDbDataAdapter();
                odaTableInformation.SelectCommand = new OleDbCommand(strQueryToTable, odcConnection);
                OleDbCommandBuilder ocbCommand = new OleDbCommandBuilder(odaTableInformation);
                odcConnection.Open();
                odaTableInformation.Update(dtsTableContents, strTableName);
                odcConnection.Close();
            }
        }
        catch { }
    } 
```

这个片段运行没有错误，但它似乎没有改变任何东西。运行此步骤所需的时间也需要几毫秒，我认为这需要更长的时间。

我正在使用从我的 SQL 连接获得的数据集，我试图将这个数据集写入我的本地数据库。

可能是因为这是一个来自 SQL 连接的 DataSet 并且我无法通过我的 OleDbAdapter 将它写入我的 mdb 连接，还是我只是在这里错过了显而易见的事情？

任何帮助表示赞赏。

谢谢，

凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:59:15.520

用于从外部数据库直接备份到内部备份

我刚刚搞砸了一个 sdf 和一个基于服务器的 sql 数据库，它已经工作了。这绝不是成品，但对于一列，我有程序从外部数据库读取然后直接写在大约 15 行代码中远离本地 .sdf

```
 SqlConnection sqlCon = new SqlConnection( ExternalDatabaseConnectionString );
            SqlCeConnection sqlCECon = new SqlCeConnection( BackUpConnectionString );
            using ( sqlCon )
                {
                using ( sqlCECon )

                    {
                    sqlCon.Open( );
                    sqlCECon.Open( );
                    SqlCommand get = new SqlCommand( "Select * from [TableToRead]", sqlCon );
                    SqlCeCommand save = new SqlCeCommand( "Update [BackUpTable] set InfoColumn = @info where ID = @id", sqlCECon );
                    SqlDataReader reader = get.ExecuteReader( );
                    if ( reader.HasRows )
                        {
                        reader.Read( );
save.Parameters.AddWithValue("@id", reader.GetString(0));
                            save.Parameters.AddWithValue( "@info", reader.GetString( 1 ));
                            save.ExecuteNonQuery( );
                            }
                        }
                    } 
```

对于数据库的一行，备份一列，它可以工作，我假设你会有某种自动递增的键，比如 ID？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:48:00.687

我认为第一步是减少对`static`方法和领域的依赖。

如果您查看您的`UpdateLocalDatabase`方法，您会看到您正在传递`strTableName`该方法使用的哪个，但`UpdateLocalDatabase`调用 ( `CreateDatabaseConnection`) 的方法引用了一个名为相同的不同全局静态变量。这两个`strTableName`变量很可能包含不同的值，并且您没有看到它们不是同一个变量。

此外，您正在尝试写出全局静态数据集`dtsTableContents`，`UpdateLocalDatabase`但如果您再查看`CreateDatabaseConnection`它实际上会创建该变量的本地版本——同样，您有两个变量命名相同，其中一个是全局的，一个是本地的。

我怀疑是两个变量`dtsTableContents`的问题。

同样，我的建议是不要使用任何静态方法或变量，并且对于您在这里所做的事情，尽量不要使用任何全局变量。此外，重构和/或重命名您的方法以匹配更多他们实际在做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:51:19.233

在无休止地尝试使用 DataAdapter.Update(Method) 之后，我放弃了。我决定使用 sdf 文件而不是 mdb。

如果我需要更新我的数据库，我删除本地数据库，创建一个新的，使用相同的连接字符串。然后我遍历数据集中的表，从中读取列名和类型，并基于此创建表。

在此之后，我遍历我的数据集并插入我用来自服务器的信息填充的数据集的内容。下面是代码，这只是“快速而肮脏”的概念证明，但它适用于我的场景。

```
public static void RemoveAndCreateLocalDb(string strLocalDbLocation)
    {
        try
        {
            if (File.Exists(strLocalDbLocation))
            {
                File.Delete(strLocalDbLocation);
            }
            SqlCeEngine sceEngine = new SqlCeEngine(@"Data Source= " + strLocalDbLocation + ";Persist Security Info=True;Password=MyPass");
            sceEngine.CreateDatabase();
        }
        catch
        { }
    }

public static void UpdateLocalDatabase(String strTableName, DataTable dttTable)
    {
        try
        {

            // Opening the Connection
            sceConnection = CreateDatabaseSQLCEConnection();
            sceConnection.Open();

            // Creating tables in sdf file - checking headers and types and adding them to a query
            StringBuilder stbSqlGetHeaders = new StringBuilder();
            stbSqlGetHeaders.Append("create table " + strTableName + " (");
            int z = 0;
            foreach (DataColumn col in dttTable.Columns)
            {
                if (z != 0) stbSqlGetHeaders.Append(", "); ;
                String strName = col.ColumnName;
                String strType = col.DataType.ToString();
                if (strType.Equals("")) throw new ArgumentException("DataType Empty");
                if (strType.Equals("System.Int32")) strType = "int";
                if (strType.Equals("System.String")) strType = "nvarchar (100)";
                if (strType.Equals("System.Boolean")) strType = "nvarchar (15)";
                if (strType.Equals("System.DateTime")) strType = "datetime";
                if (strType.Equals("System.Byte[]")) strType = "nvarchar (100)";

                stbSqlGetHeaders.Append(strName + " " + strType);
                z++;
            }
            stbSqlGetHeaders.Append(" )");
            SqlCeCommand sceCreateTableCommand;
            string strCreateTableQuery = stbSqlGetHeaders.ToString();
            sceCreateTableCommand = new SqlCeCommand(strCreateTableQuery, sceConnection);

            sceCreateTableCommand.ExecuteNonQuery();

            StringBuilder stbSqlQuery = new StringBuilder();
            StringBuilder stbFields = new StringBuilder();
            StringBuilder stbParameters = new StringBuilder();

            stbSqlQuery.Append("insert into " + strTableName + " (");

            foreach (DataColumn col in dttTable.Columns)
            {
                stbFields.Append(col.ColumnName);
                stbParameters.Append("@" + col.ColumnName.ToLower());
                if (col.ColumnName != dttTable.Columns[dttTable.Columns.Count - 1].ColumnName)
                {
                    stbFields.Append(", ");
                    stbParameters.Append(", ");
                }
            }
            stbSqlQuery.Append(stbFields.ToString() + ") ");
            stbSqlQuery.Append("values (");
            stbSqlQuery.Append(stbParameters.ToString() + ") ");

            string strTotalRows = dttTable.Rows.Count.ToString();

            foreach (DataRow row in dttTable.Rows)
            {
                SqlCeCommand sceInsertCommand = new SqlCeCommand(stbSqlQuery.ToString(), sceConnection);
                foreach (DataColumn col in dttTable.Columns)
                {
                    if (col.ColumnName.ToLower() == "ssma_timestamp")
                    {
                        sceInsertCommand.Parameters.AddWithValue("@" + col.ColumnName.ToLower(), "");
                    }
                    else
                    {
                        sceInsertCommand.Parameters.AddWithValue("@" + col.ColumnName.ToLower(), row[col.ColumnName]);
                    }
                }
                sceInsertCommand.ExecuteNonQuery();
            }
        }
        catch { }
    } 
```

# r - 为什么 R 将文件订购为 1 10 100 而不是 1 2 3？

> ID：10786460
> 
> 赞同：3
> 
> 时间：2012-05-28T14:42:11.633
> 
> 标签：r

> **可能的重复：**
> [R 自行对向量进行排序 - 坏孩子！](https://stackoverflow.com/questions/4286299/r-sorts-a-vector-on-its-own-accord-bad-boy)
> [如何使用 R 按排序顺序读取目录中的文件？](https://stackoverflow.com/questions/10777367/how-can-i-read-the-files-in-a-directory-in-sorted-order-using-r)

下面给出的代码运行良好。但是，问题是当我输入 dir1 查看结果时，我发现 R 将文件排序为：

```
[1] "data1.flt"   "data10.flt"  "data100.flt" "data101.flt"
[5] "data102.flt" "data103.flt" "data104.flt" "data105.flt"
[9] "data106.flt" "data107.flt" "data108.flt" "data109.flt"
[13] "data11.flt"  "data110.flt" "data111.flt" "data112.flt"
[17] "data113.flt" "data114.flt" "data115.flt" "data116.flt"
.
.
to
.
.
[357] "data91.flt"  "data92.flt"  "data93.flt"  "data94.flt"
[361] "data95.flt"  "data96.flt"  "data97.flt"  "data98.flt"
[365] "data99.flt" 
```

这将导致错误的结果。如何告诉 R 按顺序从 1 开始读取到 365（我什至使用了 sort(dir1) 但没有对它们进行排序）。就像是 ：

```
[1] "data1.flt"   "data2.flt"  "data3.flt" "data4.flt" 
```

不喜欢：

```
[1] "data1.flt"   "data10.flt"  "data100.flt" "data101.flt" 
```

这是代码：

```
dir1 <- list.files("C:\\Users", "*.flt", full.names = TRUE)
results <- list()
for (.files in seq_along(dir1)){
    file2 <- readBin(dir2[.files], double(), size = 4, n = w * 67420, signed = TRUE)
    results[[length(results) + 1L]] <- file1[file1 != -9999]*10
}
for (i in seq_along(results)){
    fileName <- sprintf("C:\\New folder (2)\\NewFile%03d.bin", i)
    writeBin(as.integer(results[[i]]), fileName, size = 2)
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T14:44:29.090

因为它不解释数字——而是对字符串进行排序

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T14:51:06.627

如果您知道文件名称的结构，则可以使用它而不是直接从`dir`.

```
for(i in seq(365)){
    filename <- paste0("data", i, ".flt")
    # Do some stuff with filename
} 
```

`paste0`在 R 2.15 中引入，因此对于旧版本，您需要：

```
for(i in seq(365)){
    filename <- paste("data", i, ".flt", sep = "")
    # Do some stuff with filename
} 
```

* * *

进一步的编辑，因为你似乎很困惑。文件名通过循环在每次迭代中更新。您可以通过每次打印文件名来看到这一点。

```
for(i in seq(365)){
    filename <- paste("data", i, ".flt", sep = "")
    print(filename)
    # Do some stuff with filename
} 
```

# java - java - 如何在java中使用apache math 3.0为直方图生成bin？

> ID：10786465
> 
> 赞同：12
> 
> 时间：2012-05-28T14:42:48.807
> 
> 标签：java, statistics, histogram, bins, apache-commons-math

我一直在寻找使用 apache common math 3.0 为特定数据集生成 bin（通过指定低频段、高频段和所需的 bin 数量）。我查看了频率[http://commons.apache.org/math/apidocs/org/apache/commons/math3/stat/Frequency.html](http://commons.apache.org/math/apidocs/org/apache/commons/math3/stat/Frequency.html) 但它没有给我我想要的..我想要一个给我的方法间隔中值的频率（例如：0到5之间有多少值）。有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T21:13:04.970

这是使用 Apache Commons Math 3 实现直方图的简单方法：

```
final int BIN_COUNT = 20;
double[] data = {1.2, 0.2, 0.333, 1.4, 1.5, 1.2, 1.3, 10.4, 1, 2.0}; 

long[] histogram = new long[BIN_COUNT];
org.apache.commons.math3.random.EmpiricalDistribution distribution = new org.apache.commons.math3.random.EmpiricalDistribution(BIN_COUNT);
distribution.load(data);
int k = 0;
for(org.apache.commons.math3.stat.descriptive.SummaryStatistics stats: distribution.getBinStats())
{
    histogram[k++] = stats.getN();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-28T14:57:59.350

据我所知，Apache Commons 中没有好的直方图类。我最终写了自己的。如果你想要的只是从 min 到 max 的线性分布的 bin，那么它很容易编写。

也许是这样的：

```
public static int[] calcHistogram(double[] data, double min, double max, int numBins) {
  final int[] result = new int[numBins];
  final double binSize = (max - min)/numBins;

  for (double d : data) {
    int bin = (int) ((d - min) / binSize);
    if (bin < 0) { /* this data is smaller than min */ }
    else if (bin >= numBins) { /* this data point is bigger than max */ }
    else {
      result[bin] += 1;
    }
  }
  return result;
} 
```

**编辑**：这是一个例子。

```
double[] data = { 2, 4, 6, 7, 8, 9 };
int[] histogram = calcHistogram(data, 0, 10, 4);
// This is a histogram with 4 bins, 0-2.5, 2.5-5, 5-7.5, 7.5-10.
assert histogram[0] == 1; // one point (2) in range 0-2.5
assert histogram[1] == 1; // one point (4) in range 2.5-5.
// etc.. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T02:24:52.163

我认为您的代码中存在错误-请参阅下面的更正代码：

```
public static int[] calcHistogram(double[] data, double min, double max, int numBins) {
  final int[] result = new int[numBins];
  final double binSize = (max - min)/numBins;

  for (double d : data) {
    int bin = (int) ((d - min) / binSize); // changed this from numBins
    if (bin < 0) { /* this data is smaller than min */ }
    else if (bin >= numBins) { /* this data point is bigger than max */ }
    else {
      result[bin] += 1;
    }
  }
  return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-15T02:19:42.703

这是相同功能的基于 Java 流的实现。

使用一些有用的范围、过滤和计数功能。

```
public static Long[] calcHistogram(Double[] data, Double min, Double max, Integer numBins) {
  final var interval = (max - min) / numBins;

  return IntStream.range(0, numBins)
      .boxed()
      .map(n -> {
        var binStart = min + n * interval;
        var binEnd = min + (n + 1) * interval;
        return Arrays.stream(data).filter(d -> d >= binStart && d < binEnd).count();
      })
      .toArray(Long[]::new);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-09T06:39:37.880

这是@Altair7852 的答案的补充。

如果您想`bin interval` 为您的 y 值生成 x 值（每个 bin 中的频率 ..aka`histogram[] at index i)`这里是完整方法

```
 private fun displayHistogram(binCount: Int, data: DoubleArray) {
        val histogram = DoubleArray(binCount)
        val distribution = org.apache.commons.math3.random.EmpiricalDistribution(binCount)
        distribution.load(data)

        var k = 0
        for (stats in distribution.binStats) {
            histogram[k++] = stats.n.toDouble()
        }

        val binSize = (data.max()!!.toDouble() - data.min()!!.toDouble()) / binCount

        for (i in 0 until histogram.size) {
            series2?.appendData(DataPoint(generateHistogramXValues(data.min()!!.toDouble(), histogram.size, binSize)[i], histogram[i]), false, histogram.count())
        }
    } 
```

这是x值生成方法

```
 val xValuesArray = DoubleArray(numberOfBIns)
        for (i in 0 until numberOfBIns) {
            if (i == 0){
                xValuesArray[i] = min
            }else{
                val previous = xValuesArray[i-1]
                xValuesArray[i] = previous+binSize
            }
        }
        return xValuesArray
    } 
```

我正在使用`GraphView`图形库在 android 上执行此操作，但您可以在任何库上使用它。

# eclipse - maven插件 - 抛出构建错误

> ID：10786470
> 
> 赞同：1
> 
> 时间：2012-05-28T14:43:39.170
> 
> 标签：eclipse, eclipse-plugin, maven-plugin

当我使用现有的 Maven 项目选项将插件导入 Eclipse 时，我遇到了以下错误。

> 项目构建错误：无法解决的构建扩展：插件 com.atlassian.maven.plugins:maven-jira-plugin:3.2.3 或其依赖项之一无法解决：未能找到 com.atlassian.maven.plugins:maven-jira [http://repo1.maven.org/maven2](http://repo1.maven.org/maven2)中的-plugin:jar:3.2.3被缓存在本地仓库中，直到中央的更新间隔过去或强制更新后才会重新尝试解析

我正在使用 sdk 3.2.3 和 JIRA 4.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:26:08.830

您需要将 Atlassian Maven 存储库添加到您的项目或本地 Maven 存储库管理器中。有关存储库 URL，请参阅[Atlassian 文档](https://developer.atlassian.com/display/DOCS/Atlassian+Maven+Repositories)。据我所见，maven-jira-plugin 就[在那里](https://maven.atlassian.com/content/groups/public/com/atlassian/maven/plugins/maven-jira-plugin/)。

# xmlhttprequest - 使用greasemonkey拦截特定地址的XMLHttpRequest

> ID：10786475
> 
> 赞同：2
> 
> 时间：2012-05-28T14:44:08.103
> 
> 标签：xmlhttprequest, greasemonkey

我正在尝试编写一个可以在 Chrome 和 Firefox 上运行的greasemonkey 脚本。一个将XMLHttpRequest 阻止到某个硬编码的url 的脚本。
我是这个领域的新手，希望能得到一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:50:44.917

现在可以使用

> @run-at 文档开始
> 
> [http://wiki.greasespot.net/Metadata_Block#.40run-at](http://wiki.greasespot.net/Metadata_Block#.40run-at)

但它需要更多改进，请查看示例

> [http://userscripts-mirror.org/scripts/show/125936](http://userscripts-mirror.org/scripts/show/125936)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T01:48:36.360

这几乎不可能用 Greasemonkey 做。这是工作的错误工具。这里是使用什么，最有效的第一：

1.  设置您的硬件防火墙或路由器以阻止 URL。
2.  将您的软件防火墙设置为阻止 URL。
3.  使用[Adblock](http://adblockplus.org/en/)阻止 URL。
4.  编写一个复杂的用户脚本，试图阻止从一组页面到特定 URL 的请求。请注意，这可能必须阻止内联`src`请求以及 AJAX 等。

# php - Facebook 访问令牌

> ID：10786480
> 
> 赞同：0
> 
> 时间：2012-05-28T14:44:20.043
> 
> 标签：php, facebook

我正在尝试使用以下代码获取 Facebook 访问令牌：我之前确实创建了自己的函数，但它返回了相同的错误，我无法找出问题所在。

```
function getAccessToken(){
        $app_id = FB_APP_ID;
        $app_secret = FB_SECRET_ID;
        $my_url = FB_PAGE_URL;
        $code = $_REQUEST["code"];   

        if(empty($code)) {
       $_SESSION['state'] = md5(uniqid(rand(), TRUE)); //CSRF protection
       $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
         . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
         . $_SESSION['state'];

       echo("<script> top.location.href='" . $dialog_url . "'</script>");
     }      
    if($_REQUEST['state'] == $_SESSION['state']) {
       $token_url = "https://graph.facebook.com/oauth/access_token?"
         . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
         . "&client_secret=" . $app_secret . "&code=" . $code;

       $response = file_get_contents($token_url);
       $params = null;
       parse_str($response, $params);

       $graph_url = "https://graph.facebook.com/me?access_token=" 
         . $params['access_token'];

       $user = json_decode(file_get_contents($graph_url));
       echo("Hello " . $user->name);
     }
     else {
       echo("The state does not match. You may be a victim of CSRF.");
     }
} 
```

取自[服务器端身份验证](https://developers.facebook.com/docs/authentication/server-side/)，但我不断收到此错误：

```
 Warning: file_get_contents(https://graph.facebook.com/oauth/access_token?
client_id=ID HERE&redirect_uri=URLHERE&cli
ent_secret=SECRECT&code=AQCI5rNgw9zCPHWGozeT59asg7_022u5tVc5XSef49BiX
IaF5_MAMqFwsqOAquUHgjOu_99ONwUV6IC7k-jV6DsWf9ni3jm8t59aHCBp1jrFaDthPbIKLNLQ-
fZgB5MLh1le5BAPKj_l57jhTLTBfOdxRU30mFCMYzMch8MYFpCmJ9GrjSSGwt0OKb_LNqMoRf8) [function.file-
get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request 
```

有人知道修复吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:06:42.453

查看请求响应，您尚未定义 Facebook 应用程序设置。

您正在使用`FB_APP_ID`，`FB_SECRET_ID`并且`FB_PAGE_URL`当您请求令牌时，但在响应中我可以看到它们分别定义为：“ID HERE”、“SECRECT”和“URLHERE”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:12:30.790

我已经设法使用 PHP SDK 解决了这个问题，并且在与 SDK 进行了长时间的斗争之后，让它做我想做的事情。

我也确实提出了另一个具有相同想法但有另一个问题的问题。现在这个问题已经解决了。

查看此问题以获得此问题的答案：[Facebook Access Token Server Side Authentication](https://stackoverflow.com/questions/10833134/facebook-access-tokens-server-side-authentication)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:53:39.327

这可能是该`file_get_contents`方法的问题，因为您正在构建的 url 看起来不错。

如果你搜索`"facebook file_get_contents failed to open stream"`你会得到很多关于这个问题的结果，很多都是关于堆栈溢出的。此线程中
的 as 状态看起来像 HTTPS 问题： [[function.file-get-contents]: failed to open stream](https://stackoverflow.com/questions/3537208/function-file-get-contents-failed-to-open-stream)。`file_get_contents`

也许尝试其他一些发出http请求的方法？也许卷曲？
只是为了测试一下，尝试从命令行使用 curl 与您在 php 脚本中尝试过的相同 url 并查看您得到的结果。

# haskell - Haskell 和 Lambda-Calculus：实现 Alpha-Congruence（Alpha-Equivalence）

> ID：10786485
> 
> 赞同：4
> 
> 时间：2012-05-28T14:44:46.160
> 
> 标签：haskell, lambda-calculus

我在 Haskell 中实现了一个不纯的无类型 lambda 演算解释器。

我目前坚持实施“alpha-congruence”（在某些教科书中也称为“alpha-equivalence”或“alpha-equality”）。我希望能够检查两个 lambda 表达式是否相等。例如，如果我在解释器中输入以下表达式，它应该产生 True（`\`用于指示 lambda 符号）：

```
>\x.x == \y.y
True 
```

问题是了解以下 lambda 表达式是否被认为是 alpha 等效的：

```
>\x.xy == \y.yx
???

>\x.yxy == \z.wzw
??? 
```

在这种情况下，`\x.xy == \y.yx`我猜答案是`True`。这是因为`\x.xy => \z.zy`and`\y.yx => \z.zy`和 两者的右侧相等（符号`=>`用于表示 alpha 减少）。

`\x.yxy == \z.wzw`我也猜想答案是`True`。这是因为`\x.yxy => \a.yay`和`\z.wzw => \a.waw`which（我认为）是平等的。

问题是我所有教科书的定义都指出，只有*绑定*变量的名称需要更改，两个 lambda 表达式才能被视为相等。它没有说明表达式中的*自由变量也需要统一重命名。*因此，即使`y`和`w`都在 lambda 表达式中的正确位置，程序如何“知道”第一个`y`代表第一个`w`，第二个`y`代表第二个`w`。我需要在实现中对此保持一致。

简而言之，我将如何实现函数的无错误版本`isAlphaCongruent`？为了使它起作用，我需要遵循哪些**确切的规则？**

我宁愿在不使用 de Bruijn 指数的情况下这样做。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T14:56:29.360

您误会了：不同的自由变量不是 alpha 等价的。所以`y /= x`, 和`\w.wy /= \w.wx`, 和`\x.xy /= \y.yx`. 同样，`\x.yxy /= \z.wzw`因为`y /= w`.

你的书没有提到允许统一重命名自由变量，因为它们不允许统一重命名。

（这样想：如果我还没有告诉你 and 的定义`not`，`id`你会期望`\x. not x`and`\x. id x`是等价的吗？我当然不希望！）

# mysql - 具有相同列的 MSQL 连接表

> ID：10786487
> 
> 赞同：0
> 
> 时间：2012-05-28T14:44:57.473
> 
> 标签：mysql, datetime, date, date-range

我环顾四周，找不到答案。可能是我不知道要寻找的正确术语。

我有大约 15 个表，所有表都有相同的列和相似的数据。它们之间的唯一区别是创建日期。

我想像这样搜索其中一些：

```
SELECT * 
FROM table_2010, table_2011 
WHERE date_created BETWEEN '2010-04-01' AND '2011-04-01'
ORDER BY date_created 
```

但我不相信这会起作用，因为它将我的所有数据视为 2 个表，并创建模棱两可的字段：P

有什么建议么？这是工会工作还是什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:50:35.800

```
select * 
from (SELECT * FROM table_2010
      WHERE date_created BETWEEN '2010-04-01' AND '2011-04-01'
      union
      SELECT * FROM table_2011
      WHERE date_created BETWEEN '2010-04-01' AND '2011-04-01'
) as t
ORDER BY date_created 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:49:10.573

创建表对象，试试这个

```
SELECT * 
FROM table_2010 AS t1, table_2011 AS t2
WHERE ( t1.date_created BETWEEN '2010-04-01' AND '2011-04-01' AND t2.date_created BETWEEN '2010-04-01' AND '2011-04-01')
ORDER BY t1.date_created,t2.date_created 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:52:08.267

这是一个联合，但您需要从联合中进行选择以获取跨表的顺序，但如果 date_created 始终在表的年份，您可能可以跳过该步骤

```
Select * From (
SELECT *  FROM table_2010
WHERE date_created BETWEEN '2010-04-01' AND '2011-04-01'
Union all
Select * From Table_2010
WHERE date_created BETWEEN '2010-04-01' AND '2011-04-01'
) allmyTables
ORDER BY date_created 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:47:41.950

使用别名'

```
SELECT * 
FROM table_2010 as t2010, table_2011 as t2011 
WHERE t2010.date_created BETWEEN '2010-04-01' AND '2011-04-01'
ORDER BY t2010.date_created 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T14:49:21.807

尝试这个

```
SELECT table_2010.*, table_2011.* 
FROM table_2010, table_2011 
WHERE table_2010.date_created >= '2010-04-01' AND table_2011.date_created <= '2011-04-01'
ORDER BY table_2010.date_created, table_2011.date_created 
```

**我相信 2010 表中只有 2010 年的数据，而 2011 年表中只有 2011 年的数据。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T14:49:32.803

```
SELECT *  FROM table_2010 
WHERE date_created BETWEEN '2010-04-01' AND '2011-04-01' ORDER BY date_created 

union

SELECT *  FROM table_2011 
WHERE date_created BETWEEN '2010-04-01' AND '2011-04-01' ORDER BY date_created 
```

# php - MySQL - 如何使用 SELECT 仅获取 UTF8 中的特殊字符

> ID：10786488
> 
> 赞同：0
> 
> 时间：2012-05-28T14:44:58.930
> 
> 标签：php, mysql, mysqli

我正在尝试在仅包含元音的表中选择一个 cloumn。它工作正常，直到我尝试选择带有德语变音符号（特殊字符，如 ä、ö、ü）的条目，然后查询在 u<->ü、o<->ö、a<->ä 之间没有区别

```
SELECT vowels 
FROM words
WHERE vowels LIKE 'ü'
// this also selects all entries with simple 'u' 
```

数据库排序是UTF8，文档是UTF8格式，我用的是$mysqli->set_charset("utf8");

任何想法如何让它工作？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:49:52.810

一种方法是使用`utf8_bin`排序规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:57:56.787

您可以使用`COLLATE`动态更改排序规则

```
SELECT vowels COLLATE utf8_bin as vowel
FROM words
WHERE vowel LIKE 'ü' 
```

未测试

# asp.net - 带有超链接的 ASP.net 动态 GridView

> ID：10786491
> 
> 赞同：0
> 
> 时间：2012-05-28T14:45:05.553
> 
> 标签：asp.net, sql-server, gridview, matrix, dynamic-data

我有一个学生数据库，以及基于他们的每周数据。我想创建一个网格视图，具有一组动态扩展的列和行，其中行是第 1,2 周，...，n，列代表每个学生，反之亦然。

```
Reviews data table looks like this:
======================================
| Stu#  | Week# | Score    | Review# |
--------------------------------------
| 123   | 1     | A+       | 832     |
| 123   | 2     | C-       | 352     |
.       .       .          .         .
.       .       .          .         . 
.       .       .          .         .
| 321   | 12    | B        | 992     |
| 321   | 13    | A-       | 935     |
====================================== 
```

所以基本上，我想为

在每个单元格中，我希望有一个基于提交的评论的每周数据，以及指向该评论的链接。很像：

```
 _____________________________
| Week | StudentA  | StudentB |
| No.  |   (123)   |  (321)   |
-------------------------------
|   1  |    A+     |   B-     |
|   2  |    ...    |   ...    |
.      .           .          . 
.      .           .          . 
.      .           .          . 
|  13  |     A+    |   B-     |
------------------------------- 
```

我已经查看了几个（数百个）相似但不完全相同的问题，试图将某些东西拼接在一起，但到目前为止，我都傻眼了。这几乎就像它代表一个带有特定数据条目链接的 Excel 电子表格。

我尝试在一个列表中创建一个列表，但这变得太混乱了。然后我尝试使用 DataTable 进行操作，其中列和行是在开始时创建的，但不知道如何 DataBind() 包含超链接的表（当然以 URLParameters 的形式到 aspx 页面）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:54:29.540

好的，我已经开始动态生成一个 DataTable 并将其绑定到我的 GridView，这对于纯文本结果非常有效，但我想为每个元素（即 A+）创建超链接，以便可以读取特定标记, 带有评论等。

我尝试添加一个标签，但由于 ASP.net 的代码注入保护，它并没有很好地工作。所以基本上我有：

```
 HyperLink thisScore = new HyperLink();
            thisScore.NavigateUrl=string.Format("<a href='studentMarks.aspx?groupID={0}&week={1}&studentID={2}'>{3}</a>", groupID, week, reader["student_ID"], reader[studentScoreLocation]);
            newRow[studentName] = thisScore; 
```

随后尝试使用超链接对象（无济于事）

```
 HyperLink thisScore = new HyperLink();
        thisScore.NavigateUrl=string.Format("studentMarks.aspx?groupID={0}&week={1}&studentID={2}", groupID, week, reader["student_ID"]);
        thisScore.Text = reader[studentScoreLocation].ToString();
        newRow[studentName] = thisScore; 
```

解决这个问题的最佳方法是什么？

# c# - ExecuteCore / Execute / Initialize on Controller 有什么不同？

> ID：10786492
> 
> 赞同：2
> 
> 时间：2012-05-28T14:45:05.860
> 
> 标签：c#, asp.net, asp.net-mvc

ASP.NET MVC 中的[ControllerBase包含三个方法：](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.aspx)

*   [执行](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.execute.aspx)
*   [初始化](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.initialize.aspx)
*   [执行核心](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.executecore.aspx)

我找不到很多关于这些的信息。只是建议使用[Initialize](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.initialize.aspx)而不是[Execute](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.execute.aspx)。有人能知道这些方法的目的吗？在哪种情况下应该根据良好做法使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T06:06:03.290

该`Execute`方法是来自`IController`接口并且所有控制器都拥有的方法。在默认实现 ( `ControllerBase`) 中，Execute 方法首先调用该`Initialize`方法，然后调用该`ExecuteCore`方法。Initialize 方法是上下文可用的地方。这是管道执行中最早的方法，您可以在其中访问 HttpContext 相关内容。例如，如果您尝试在控制器的构造函数中访问它，您将获得 NRE。该`ExecuteCore`方法负责加载 TempData，在给定`action`路由数据值的情况下找到并执行要执行的正确操作，最后保存 TempData。

# asp.net - 如何将两个数据表合并为一个？asp.net vb 或 c#

> ID：10786493
> 
> 赞同：1
> 
> 时间：2012-05-28T14:45:07.537
> 
> 标签：asp.net, vb.net, join, merge, datatable

实际问题似乎比标题所说的要复杂..但希望有人能弄清楚..

我有两个数据表，我打算将它们绑定到 Gridview。但我需要第一个 dt 的一点点和第二个 dt 的一点点。

第二个表只有一行表示第一个表中同一列中的每一行。

但是，两个表之间没有主键或关系。

希望我的解释足够清楚......非常感谢......期待很快有一个解决方案，。

例如，

![在此处输入图像描述](../Images/4f35275856272c02e6c7e0643bc1d0fa.png)

我试过 datatable.merge 虽然。没有产生我想要的最后一张桌子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:06:35.823

试试这个链接

[http://social.msdn.microsoft.com/Forums/da-DK/adodotnetdataset/thread/ecb6a83d-b9b0-4e64-8107-1ca8757fe58c](http://social.msdn.microsoft.com/Forums/da-DK/adodotnetdataset/thread/ecb6a83d-b9b0-4e64-8107-1ca8757fe58c)

要么使用 linq，要么将所有表放在数据集中，在数据表上创建 pk/fk 并以这种方式加入它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T04:56:01.510

```
 ''' <summary>
  ''' Merge two datatables that have a 1:1 relationship
  ''' </summary>
  ''' <param name="dtb1">Required Datatable.</param>
  ''' <param name="dtb2">Required Datatable.</param>
  ''' <param name="dtb1MatchField">Required String. Field name in dtb1 to use to match records</param>
  ''' <param name="dtb2MatchField">Required String. Field name in dtb2 to use to match records</param>
  ''' <remarks></remarks>
  Private Function MergeDataTables(ByVal dtb1 As DataTable, ByVal dtb2 As DataTable, ByVal dtb1MatchField As String, ByVal dtb2MatchField As String) As DataTable
    Dim dtbOutput As DataTable = dtb1.Copy
    Dim lstSkipFields As New List(Of String)
    For Each dcl As DataColumn In dtb2.Columns
      Try
        dtbOutput.Columns.Add(dcl.ColumnName, dcl.DataType)
      Catch ex As DuplicateNameException
        lstSkipFields.Add(dcl.ColumnName)
      End Try
    Next dcl
    'Merge dtb2 records that match existing records in dtb1
    Dim dtb2Temp As DataTable = dtb2.Copy
    For int2 As Integer = dtb2Temp.Rows.Count - 1 To 0 Step -1
      Dim drw2 As DataRow = dtb2Temp.Rows(int2)
      Dim o2 As Object = drw2(dtb2MatchField)
      For Each drw1 As DataRow In dtbOutput.Rows
        Dim o1 As Object = drw1(dtb1MatchField)
        If o1.ToString = o2.ToString Then
          For Each dcl As DataColumn In dtb2Temp.Columns
            If Not lstSkipFields.Contains(dcl.ColumnName) Then
              drw1(dcl.ColumnName) = drw2(dcl.ColumnName)
            End If
          Next dcl
          dtb2Temp.Rows.Remove(drw2)
        End If
      Next drw1
    Next int2
    'add rows that weren't in dtb1
    For Each drw2 As DataRow In dtb2Temp.Rows
      Dim drw1 As DataRow = dtbOutput.NewRow
      For Each dcl As DataColumn In dtb2Temp.Columns
        drw1(dcl.ColumnName) = drw2(dcl.ColumnName)
      Next dcl
      dtbOutput.Rows.Add(drw1)
    Next drw2
    Return dtbOutput
  End Function 
```

# iphone - 禁用表格视图中文本字段之一的键盘

> ID：10786495
> 
> 赞同：1
> 
> 时间：2012-05-28T14:45:25.490
> 
> 标签：iphone

嗨，我是 iphone 开发新手。请帮帮我。我想为表格视图中的一个文本字段禁用键盘。我已经为该特定字段分配了一个pickerview。所以我只需要pickerview而不是键盘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:50:12.280

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
  if(textField== mTextField)
  {
    return NO;
  }
return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:51:41.500

您必须设置您的视图控制器或更多来实现 UITextFieldDelegate 并将它们设置为您的 UITextField 的代表。然后，您应该实现`(BOOL) textField: shouldChangeCharactersInRange: replacementString:`函数并始终返回 NO 值。

# objective-c - UILabel 未正确居中

> ID：10786497
> 
> 赞同：0
> 
> 时间：2012-05-28T14:45:45.910
> 
> 标签：objective-c, ios

当 a`UILabel`被按下时，我正在制作一个应该闪烁的“突出显示” `UILabel`（具有相同框架和按下位置的）。`UILabel`

目前，高亮标签闪烁，但未正确居中。这是代码：

```
-(void) flashRowViewController:(RowViewController*)rvc
{
    NSLog(@"row center: (%f, %f)", rvc.rowLabel.center.x, rvc.rowLabel.center.y);
    highlight.frame = rvc.rowLabel.frame;
//  highlight.center = rvc.rowLabel.center; // NSlog results are the same with or without this statement
    NSLog(@"highlight center: (%f, %f)", highlight.center.x, highlight.center.y);

    highlight.alpha = 1.0;

    [UIView animateWithDuration:1.00 
                     animations:^{
                         highlight.alpha = 0.0;
                     }];
} 
```

我很困惑。也许我只是看这个太久了，需要一个外部的视角。下面是一个 NSLog 的例子：

> 2012-05-28 10:40:41.603 RREF[89755:f803] 行中心：（138.000000，40.000000）
> 
> 2012-05-28 10:40:41.604 RREF[89755:f803] 高亮中心：(138.000000, 40.000000)
> 
> 2012-05-28 10:40:43.538 RREF[89755:f803] 行中心：（138.000000，120.000000）
> 
> 2012-05-28 10:40:43.538 RREF[89755:f803] 高亮中心：(138.000000, 120.000000)
> 
> 2012-05-28 10:40:45.533 RREF[89755:f803] 行中心：（138.000000，200.000000）
> 
> 2012-05-28 10:40:45.534 RREF[89755:f803] 高亮中心：(138.000000, 200.000000)

实际坐标是此输出中的当前坐标。突出显示标签只是没有移动到正确的位置！再次，它当前闪烁，只是没有居中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:16:48.423

为什么不使用`highlightedTextColor`例如

```
label.highlightedTextColor = [UIColor redColor]; 
```

然后在您的触摸事件中：

```
[UIView animateWithDuration:1.0 
         animations:^(void) {
            label.highlighted = YES; 
         }
         completion:^(BOOL finished) {
                label.highlighted = NO; 
         }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:24:45.080

Haven't tried iTukker's solution yet but I got another good solution, which is animating the background color using `[label.layer setBackgroundColor:(CGColor)]`

```
-(void) flashRowViewController:(RowViewController*)rvc
{
    [rvc.rowLabel.layer setBackgroundColor:[highlightColor CGColor]];

    [UIView animateWithDuration:1.00 
                     animations:^{
                         [rvc.rowLabel.layer setBackgroundColor:[[UIColor clearColor] CGColor]];
                     }];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:34:37.623

首先，您应该使用`NSStringFromCGPoint`功能打印出视图中心。

第二 - 你确定你只在这个地方改变框架吗？动画需要一秒钟，因此如果您在其他地方覆盖突出显示位置，即使日志正确，它也不会居中。您是否尝试在动画完成回调中记录位置？

第三 - 你确定这两个标签是以相同的方式创建的吗？文本对齐呢？字体大小呢？当您说“未正确居中”时，这是什么意思？

第四 - 您可以使用动画来更改第一个标签的颜色/背景，您不需要两个标签。

# jquery - jquery解析json问题

> ID：10786498
> 
> 赞同：0
> 
> 时间：2012-05-28T14:45:46.363
> 
> 标签：jquery, ajax

我有一个应用程序在两台服务器上运行，一个有效，一个不明白为什么。

阿贾克斯查询..

```
 $.ajax({
        type: "POST",
        url: "WebService.asmx/GetFinish1",
        data: '{' +
                        'Item:"' + item + '"' +
                   '}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            var data = jQuery.parseJSON(msg);
            $("#item").val(JSON.stringify(msg)); 
```

从`$("#item").val(JSON.stringify(msg));`一个我得到...

```
{"d":"{\"0\":{\"i\":\"MODIFIED C/W TOOL MC WALL\",\"D\":\"Notes\",\"V\":\"MODIFIED C/W TOOL MC WALL\"},\"1\":{\"i\":\"EA\",\"D\":\"Unit\",\"V\":\"EA\"},\"2\":{\"i\":\"EA\",\"D\":\"Unit\",\"De\":\"Unit\",\"V\":\"EA\"}}"} 
```

我得到的第二个

```
"{\"0\":{\"i\":\"1x 8351-3  &  2 x 8352-3\",\"D\":\"Notes\",\"V\":\"1x 8351-3  &  2 x 8352-3\"},\"1\":{\"i\":\"PC3\",\"D\":\"Unit\",\"V\":\"PC3\"},\"2\":{\"i\":\"PC3\",\"D\":\"Unit\",\"De\":\"Unit\",\"V\":\"PC3\"}}" 
```

第二个有效，第一个无效，但为什么有区别？相同的代码！额外的 {} 和 d: 来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:47:38.050

你不需要

```
var data = jQuery.parseJSON(msg);
$("#item").val(JSON.stringify(msg)); 
```

因为，由于在属性中使用，`msg`已经是 JSON 格式。`dataType: 'json'``ajax`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:35:30.580

我不知道为什么，但我不得不使用以下`var data = jQuery.parseJSON(msg.d);`

# android - 在谷歌地图上绘制路线

> ID：10786500
> 
> 赞同：2
> 
> 时间：2012-05-28T14:45:58.587
> 
> 标签：android, google-maps, gps, overlay, draw

我想在谷歌地图上绘制一条路线，并使用 GPS 改变我的位置。随着我的位置发生变化（当创建新的地理点时），点在谷歌地图上移动，但我无法在地图上画线。

请帮助在谷歌地图上绘制路线。下面是我的代码

`

```
LocationManager locman;
LocationListener loclis;
Location location;
private MapView map;

List<GeoPoint> geoPointsArray = new ArrayList<GeoPoint>();
private MapController controller;
String provider = LocationManager.GPS_PROVIDER;
double lat;
double lon;

@Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      initMapView();
      initMyLocation();
      locman = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
      //locman.requestLocationUpdates(provider,60000, 100,loclis);
      //Location = locman.getLastKnownLocation(provider);

   }
/** Find and initialize the map view. */
   private void initMapView() {
      map = (MapView) findViewById(R.id.mapView);
      controller = map.getController();
      map.setSatellite(false);
      map.setBuiltInZoomControls(true);
   }

   /** Find Current Position on Map. */
   private void initMyLocation() {
      final MyLocationOverlay overlay = new MyLocationOverlay(this, map);
      overlay.enableMyLocation();
      overlay.enableCompass(); // does not work in emulator
      overlay.runOnFirstFix(new Runnable() {
         public void run() {
            // Zoom in to current location
            controller.setZoom(16);
            controller.animateTo(overlay.getMyLocation());
         }
      });
      map.getOverlays().add(overlay);
   }

public void onLocationChanged(Location location) {
    if (location != null){
        lat = location.getLatitude();
        lon = location.getLongitude();
        GeoPoint New_geopoint = new GeoPoint((int)(lat*1e6),(int)(lon*1e6));
        controller.animateTo(New_geopoint);

    }

}
class MyOverlay extends Overlay{
    public MyOverlay(){
    }   
    public void draw(Canvas canvas, MapView mapv, boolean shadow){
    super.draw(canvas, mapv, shadow);
    Paint paint;
    paint = new Paint();
    paint.setColor(Color.GREEN);

    paint.setAntiAlias(true);
    paint.setStyle(Style.STROKE);
    paint.setStrokeWidth(3);

        Projection projection = map.getProjection();
        Path p = new Path();
        for (int i = 0; i < geoPointsArray.size(); i++) {
            if (i == geoPointsArray.size() - 1) {
                break;
            }
        Point from = new Point();
        Point to = new Point();
        projection.toPixels(geoPointsArray.get(i), from);
        projection.toPixels(geoPointsArray.get(i + 1), to);
        p.moveTo(from.x, from.y);

        canvas.drawLine(from.x, from.y, to.x, to.y, paint);

        //p.lineTo(to.x, to.y);
        }
    }   
 } 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:55:56.980

你为什么不画一条折线？您只需要 LatLng 实例。

```
var flightPlanCoordinates = [
    new google.maps.LatLng(43.290307,-2.884174),
    new google.maps.LatLng(41.3973,2.158964),
    new google.maps.LatLng(40.462046,-3.809694),
    new google.maps.LatLng(38.976895,-1.858366)
];

var flightPath = new google.maps.Polyline({
    path: flightPlanCoordinates,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2
});
flightPath.setMap( map ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:16:15.510

我很久以前写了这段代码，所以请原谅我，它可以清理很多，但我相信它应该满足你的需要。

```
public class RouteSegmentOverlay extends Overlay {
private Paint paint;
private ArrayList<GeoPoint> routePoints;
private boolean routeIsActive;  
private int numberRoutePoints;

private Path path;

// Constructor permitting the route array to be passed as an argument.
public RouteSegmentOverlay(ArrayList<GeoPoint> routePoints) {
    this.routePoints = routePoints;
    numberRoutePoints  = routePoints.size();
    routeIsActive = true;
}

// Method to turn route display on and off
public void setRouteView(boolean routeIsActive){
    this.routeIsActive = routeIsActive;
}

public void setColor(int c){
    color = c;
}

private int color = 0;

Paint.Style paintStyle = Paint.Style.STROKE;

public void setFillStyle(Paint.Style style){
    paintStyle = style;
}

@Override
public void draw(Canvas canvas, MapView mapview, boolean shadow) {
    super.draw(canvas, mapview, shadow);
    if(! routeIsActive) return;

    if(paint==null){
        paint = new Paint();

        paint.setAntiAlias(true);
        paint.setStrokeWidth(7);
        paint.setStyle(paintStyle);
        paint.setAntiAlias(true);
        paint.setARGB(255, 0, 0, 255);
        paint.setColor(color);
    }

    if(bitmap==null){

        wMin = Integer.MAX_VALUE;
        wMax = Integer.MIN_VALUE;
        hMin = Integer.MAX_VALUE;
        hMax = Integer.MIN_VALUE;

        lonMin = Integer.MAX_VALUE;
        lonMax = Integer.MIN_VALUE;
        latMin = Integer.MAX_VALUE;
        latMax = Integer.MIN_VALUE;

        Boolean newSegment = true;
        Point pt = new Point();

        GeoPoint point = null;

        ArrayList<Point> points = new ArrayList<Point>();

        for(int i=0; i<numberRoutePoints; i++){

            point = routePoints.get(i);

            int tempLat = point.getLatitudeE6();
            int tempLon = point.getLongitudeE6();

            if(tempLon<lonMin)lonMin = tempLon;
            if(tempLon>lonMax)lonMax = tempLon;
            if(tempLat<latMin)latMin = tempLat;
            if(tempLat>latMax)latMax = tempLat;

            mapview.getProjection().toPixels(routePoints.get(i), pt);

            points.add(new Point(pt.x,pt.y));

            if(pt.x<wMin)wMin = pt.x;
            if(pt.x>wMax)wMax = pt.x;
            if(pt.y<hMin)hMin = pt.y;
            if(pt.y>hMax)hMax = pt.y;

        }

        topLeftIn = new GeoPoint(latMax, lonMin);
        bottomRightIn = new GeoPoint(latMin, lonMax);
        int width = (wMax-wMin);
        int height = (hMax-hMin);           

        bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_4444);
        Canvas c = new Canvas(bitmap);

        Path bitmapPath = new Path();
        bitmapPath.incReserve(numberRoutePoints);

        newSegment = true;
        for(Point p : points){

            if (newSegment) {
                bitmapPath.moveTo(p.x - wMin, p.y - hMin);
                newSegment = false;
              } else {
                bitmapPath.lineTo(p.x - wMin, p.y - hMin);
              }

        }
        c.drawPath(bitmapPath, paint);

    }
    mapview.getProjection().toPixels(topLeftIn, topLeftOut);
    mapview.getProjection().toPixels(bottomRightIn, bottomRightOut);

    int l = topLeftOut.x;
    int t = topLeftOut.y;
    int r = bottomRightOut.x;
    int b = bottomRightOut.y; 

    Rect rect = new Rect(l,t,r,b);

    canvas.drawBitmap(bitmap, new Rect(0,0,bitmap.getWidth(),bitmap.getHeight()),rect,null);

}
GeoPoint topLeftIn = null;
GeoPoint bottomRightIn = null;
Point topLeftOut = new Point();
Point bottomRightOut = new Point();

Bitmap bitmap = null;
int wMin = Integer.MAX_VALUE;
int wMax = 0;
int hMin = Integer.MAX_VALUE;
int hMax = 0;

int lonMin = Integer.MAX_VALUE;
int lonMax = 0;
int latMin = Integer.MAX_VALUE;
int latMax = 0;

} 
```

# jsf-2 - 使用 jsf 显示编辑员工的个人资料

> ID：10786501
> 
> 赞同：0
> 
> 时间：2012-05-28T14:46:00.770
> 
> 标签：jsf-2, javabeans

使用 jsf 我想编辑员工资料，当用户单击任何特定的数据表行时，然后

> 我能够在数组列表中获得所选患者的所有详细信息。现在我想将 arraylist 中的所有属性设置为 page1.xhtml backingbean ，因此当用户选择特定行时，他将导航到 page1.xhtml ，在那里他将获得由 arraylist 属性设置的表单中的所有这些字段。

我正在尝试这种方式。

```
> page1.xhtml

    <h:outputLabel  value="Name" />
    <p:inputText id="name1" value="#{employeeBB.emp.name}" >
                            </p:inputText>

    <h:outputLabel  value="age" />
                            <p:inputText id="ag" value="#{employeeBB.emp.age}" >
                            </p:inputText>

    <h:outputLabel  value="code" />
                            <p:inputText id="code1" value="#{employeeBB.emp.code}" >
                            </p:inputText>

@ManagedBean(name = "employee") 
@ViewScoped 
public class emp {
private String name;    
private String age;     
private String code;    
public String getName() 
{       return name;    
}

public void setName(String name) { 
this.name = name;   
}

public String getAge() {
return age;     
}

public void setAge(String age) {
this.age = age;     
}

    public String getCode() {
    return code;    
    }

public void setCode(String code) {
this.code = code;   
}

 }

    @SessionScoped
    @ManagedBean
    public class EmployeeBB implements serializable{

    private Employe emp;

        public Employee getEmp() {
            return emp;
        }

        public void setEmp(Employee emp) {
            this.emp = emp;
        }

    }

    @SessionScoped
    @ManagedBean
    public class AddEmployeeBB{

    private ArrayList<Employee>empList;

    private ArrayList<Employee>empList;

        public ArrayList<Employee> getEmpList() {
            if(empList==null){

                empList=new ArrayList<Employee>();
            }

            return empList;
        }

        public void setEmpList(ArrayList<Employee> empList) {
            this.empList = empList;
        }

    public void method() throws IOException{

    String code='123';

    EmployeeDAO obj=new EmployeeDAO();   // DAO class 

    empList=obj.getAllEmplInfo(code); // will get all needed information about employee of this code in this arrayist 

    for(int i=0;i<empList.size();i++){

    String name=empList.get(i).getName();
    String age=empList.get(i).getAge();
    String code=empList.get(i).getCode();

    Employee e=new Employee();

    e.setName(name);
    e.setAge(age);
    e.setCode(code);

    EmployeeBB obj1=new EmployeeBB();

    obj1.setEmp(e);  // now according to my logic object e will set to emp object of Employee, and 
    // that means  all these values name ,agem and code will be set to my  page1.xhtml and I will be able to see it.

    }

    } 
```

但我无法获得填充值的 pag1.xhtml。

告诉我该怎么做（走。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T18:41:39.487

未显示的原因是您正在创建的对象中设置值

```
EmployeeBB obj1=new EmployeeBB();

obj1.setEmp(e); 
```

JSF 生命周期不知道这个对象，每次你看到空白。

在`AddEmployeeBB`添加这个

```
@ManagedProperty(value="employeeBB")
private EmployeeBB employeeBB = null; // create getter setter for this 
```

然后代替这个：

```
EmployeeBB obj1=new EmployeeBB();

obj1.setEmp(e); 
```

用这个：

```
this.employeeBB.setEmp(e); 
```

# php - 防止直接访问 codeigniter 中的特定功能

> ID：10786509
> 
> 赞同：0
> 
> 时间：2012-05-28T14:46:52.150
> 
> 标签：php, codeigniter

我的 Home 控制器中有一些方法，例如身份验证。我不希望用户通过 url 访问身份验证。

因此，如果他在 url 栏中直接输入[http://domain.com/index.php/home/authenticate](http://domain.com/index.php/home/authenticate)，他应​​该被拒绝访问或重定向到登录。

但是，如果他单击主窗体中的登录按钮，他应该能够被重定向到 authenticate 方法。

我尝试在身份验证前添加下划线，即

```
private function _authenticate() {} 
```

它有效，我无法通过 URL 访问它，但按钮也不能重定向到身份验证方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:23:32.540

Okay i have come accross a solution.

I have input validations on my forms which means, if the user omits a textbox, he is never going to be redirected to /createaccount

So if he does accesss the link directly, the textboxes get a value of 0 and if that happens, it means the user has accessed the link directly. I redirected the user to 404 page then.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T14:53:31.437

`example.com/index.php/home/authenticate`不访问`_authenticate`家庭控制器的方法，它正在寻找`authenticate`方法（它们是两个不同的东西）。

要在未登录的情况下进行重定向，您将拥有以下内容：

```
public function authenticate()
{
  if ($not_logged_in)
    redirect('/login');
  else
    show_login_stuff_here();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:53:34.573

当您将下划线放在方法名称前面时，您无法使用该 url 访问它，因为它无法访问。

我认为您误解了私有方法的用途。

如果身份验证是您的登录方法

1.  你应该公开身份验证
2.  成功登录用户并存储在会话中
3.  在身份验证方法开始时检查会话以查看用户是否已登录并采取相应措施，重定向或强制登录等

# sql - 从用于创建 2 个较早计算列的表达式创建计算列

> ID：10786511
> 
> 赞同：0
> 
> 时间：2012-05-28T14:46:59.810
> 
> 标签：sql, sql-server, database, calculated-columns

**解决了我的问题...查看第二段代码**

这是我的 sql 语句，它比较来自不同表的 2 行序列号。如果匹配，则显示是，但如果不匹配，则显示否 这在不同的桌子上出于 2 个不同的原因执行了两次

```
SELECT  table1.serial1, table1.serial2,
        CASE WHEN table2.serial1 IS NULL THEN 'No' ELSE 'Yes' END AS [computedCol1],
        CASE WHEN table3.serial2 IS NULL THEN 'No' ELSE 'Yes' END AS [computedCol2]
FROM    table1
        LEFT JOIN table2
            ON table2.serial1 = table1.serial1
        LEFT JOIN dbo.EPG
            ON table3.serial2 = table1.serial2 
```

然后我想做的是创建另一列，如果第一列或第二列是“是”，则在该行中放置“是”，否则它将显示“否”。我意识到你不能计算计算列，所以我想做的是重复表达式并有一个 or 语句没有运气。除了基本的 sql 之外，我在编写任何东西方面都不是很有经验……这是 mty 的尝试：

```
SELECT  DISTINCT table1.serial1, table1.serial2,
        CASE WHEN table2.serial1 IS NULL THEN 'No' ELSE 'Yes' END AS [computedCol1],
        CASE WHEN table3.serial2 IS NULL THEN 'No' ELSE 'Yes' END AS [computedCol2],
        CASE WHEN table3.serial2 IS NULL OR table2.serial1 IS NULL THEN 'No' ELSE 'Yes' END AS [computedCol2]
FROM    table1
        LEFT JOIN table2
            ON table2.serial1 = table1.serial1
        LEFT JOIN dbo.EPG
            table3.serial2 = table1.serial2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:50:53.133

*   `table3.serial2 OR table2.serial1 IS NULL`不是您正在寻找的条件。你需要`table3.serial2 IS NULL OR table2.serial1 IS NULL`.
*   您正在尝试使用相同的别名返回两个不同的值，`[computedCol2]`.

# django - No module named freetext - Django

> ID：10786513
> 
> 赞同：-1
> 
> 时间：2012-05-28T14:47:08.903
> 
> 标签：django, freetext

I have a problem with django module named [freetext](https://github.com/howiworkdaily/django-freetext).

There is no info how to install it in Django. I'm getting this error while trying to run Django on new server:

```
[Mon May 28 13:47:45 2012] [error] mod_wsgi (pid=27668): Exception occurred processing WSGI script '/var/www/vhosts/domain.co.uk/sites/somod/apache/django.wsgi'.
[Mon May 28 13:47:45 2012] [error] Traceback (most recent call last):
[Mon May 28 13:47:45 2012] [error]   File "/usr/lib/python2.6/site-packages/django/core/handlers/wsgi.py", line 250, in __call__
[Mon May 28 13:47:45 2012] [error]     self.load_middleware()
[Mon May 28 13:47:45 2012] [error]   File "/usr/lib/python2.6/site-packages/django/core/handlers/base.py", line 47, in load_middleware
[Mon May 28 13:47:45 2012] [error]     raise exceptions.ImproperlyConfigured('Error importing middleware %s: "%s"' % (mw_module, e))
[Mon May 28 13:47:45 2012] [error] ImproperlyConfigured: Error importing middleware shop.cart.middleware: "No module named freetext" 
```

How can I install this module?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:50:08.047

In this way:

```
pip install -e https://github.com/howiworkdaily/django-freetext.git 
```

Update, that doesn´t work because that app doesn´t have a setup.py, so clone it and put it in somewhere PYTHONPATH can find it, or better like a [submodule](http://git-scm.com/book/en/Git-Tools-Submodules).

Or just inside your django project:

```
git clone https://github.com/howiworkdaily/django-freetext.git freetext 
```

at the same level of your manage.py

# java - jsoup clean 包括不需要的回车

> ID：10786514
> 
> 赞同：2
> 
> 时间：2012-05-28T14:47:14.600
> 
> 标签：java, jsoup

目前这让我很烦恼。

如果字符串包含，则 Jsoup 在返回的字符串中包含一个额外的换行符`<br />`

例如。

```
String html ="TEST<br />TEST";

Jsoup.clean(html, org.jsoup.safety.Whitelist.basic()); 
```

返回

```
TEST\n<br />TEST 
```

关于如何避免包含麻烦的 \n 的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:41:49.810

你试过`.text();`还是`.ownText();`从`Elements`班上来的？

```
//If you want the whole page
String url = "http://www.yourwebsite.com";
Document doc = Jsoup.connect(url).get();
System.out.println(doc.text());

//If you want some specific part of the page
Elements elems = doc.select("query");

for (Element element : elems) {
    System.out.println(element.text() + "\n");
    System.out.println(element.ownText() + "\n\n");
} 
```

如果每个`element`返回`< p>Hello< b> there< /b> now!< /p>`

1.  该方法`text();`将返回`Hello there now!`
2.  该方法`ownText();`将返回`Hello now!`

只是为了更容易理解：`.text();`将返回您获得的标签内的整个文本。该`ownText();`方法将返回来自标签本身的文本，而不是来自其子项的文本。

关于 中的查询`doc.select("query");`，您可以[在此处](http://jsoup.org/cookbook/extracting-data/selector-syntax)搜索您想要的任何模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-13T03:08:54.930

```
 Cleaner cleaner = new Cleaner(WHITE_LIST);
    Document clean = cleaner.clean(body);
    Document.OutputSettings outputSettings = new Document.OutputSettings();
    outputSettings.prettyPrint(false);
    clean.outputSettings(outputSettings);
    return clean.body().html(); 
```

outputSettings.prettyPrint(false);

# android - 多于一种帐户类型的同步适配器

> ID：10786515
> 
> 赞同：0
> 
> 时间：2012-05-28T14:47:21.727
> 
> 标签：android, android-manifest, accountmanager, android-syncadapter

是否可以为多种帐户类型提供同步适配器？（例如 com.google 和 com.facebook.auth.login）

似乎 syncadapter.xml 只接受一个值，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<sync-adapter xmlns:android="http://schemas.android.com/apk/res/android"
    android:contentAuthority="com.foo"
    android:accountType="com.google"
    android:supportsUploading="true"
    android:userVisible="true" /> 
```

我想为我的用户提供多个帐户选项，例如 google、facebook 和 twitter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:10:17.560

虽然[AbstractThreadedSyncAdapter](http://developer.android.com/reference/android/content/AbstractThreadedSyncAdapter.html)的文档使用复数（强调添加），请参阅

> android:contentAuthority 和 android:accountType 属性指示此同步适配器服务的内容授权和帐户**类型。**

我不认为它支持这一点。我不完全确定，但看起来[这是同步适配器 xml 的解析方式的代码](http://androidxref.com/source/xref/frameworks/base/core/java/android/content/SyncAdaptersCache.java)。如果它支持的话，我希望有一些循环将 accountType 属性拆分为多种类型：

```
 79     static class MySerializer implements XmlSerializerAndParser<SyncAdapterType> {
 80         public void writeAsXml(SyncAdapterType item, XmlSerializer out) throws IOException {
 81             out.attribute(null, "authority", item.authority);
 82             out.attribute(null, "accountType", item.accountType);
 83         }
 84 
 85         public SyncAdapterType createFromXml(XmlPullParser parser)
 86                 throws IOException, XmlPullParserException {
 87             final String authority = parser.getAttributeValue(null, "authority");
 88             final String accountType = parser.getAttributeValue(null, "accountType");
 89             return SyncAdapterType.newKey(authority, accountType);
 90         } 
```

但是，也许可以为您支持的每种帐户类型添加一个 XML，但引用相同的内容权限？

# c# - 将 t-sql 查询转换为 EF 的方法语法

> ID：10786521
> 
> 赞同：1
> 
> 时间：2012-05-28T14:47:39.810
> 
> 标签：c#, entity-framework

以下 TSQL 查询的等效 EF 方法语法是什么？

```
select istb.service_id, ss.service_desc, selected=1
from istb_services istb
inner join setup_services ss on istb.service_id=ss.service_id
where istb.istb_id=3
union
select ss.service_id, ss.service_desc, selected=0
from setup_services ss
where ss.service_id not in (select service_id from istb_services where istb_id=3) 
```

我尝试转换查询的非部分，如下所示：

```
var _existing = context.istb_services.Where(e => e.istb_id == IstbID);
var _others = context.setup_services.Except(_existing); 
```

但它正在生成编译时错误：

'System.Data.Objects.ObjectQuery.Except(System.Data.Objects.ObjectQuery)' 的最佳重载方法匹配有一些无效参数

我知道我不能将不同类型的 ObjectQuery 传递给 .Except 方法，但是替代代码是什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T20:00:53.520

尝试以下操作：

```
var resultA = 
    from istb in istb_services 
    join ss in setup_services on istb.service_id equals ss.service_id
    where istb.istb_id == 3
    select new { istb.service_id, ss.service_desc, selected = true };

var resultB =            
    from ss in setup_services 
    where !istb_services.Any(istb => 
        istb.service_id == ss.service_id &&
        istb.istb_id == 3)
    select new { ss.service_id, ss.service_desc, selected = false };

var result = resultA.Union(resultB); 
```

具有相同字段的匿名类型初始值设定项应编译为相同的匿名类型，使两个序列对`Union`操作兼容。

# r - 基于另一列创建一个子列的列表

> ID：10786523
> 
> 赞同：1
> 
> 时间：2012-05-28T14:47:45.003
> 
> 标签：r, dataset

我有一个看起来像这样的数据集：

```
Files          Batch
filepath1.txt   One
filepath2.txt   One
filepath3.txt   One
filepath4.txt   One
filepath5.txt   two
filepath6.txt   two
filepath7.txt   two
filepath8.txt   two 
```

我想通过在一个名为“batch”的新变量中创建基于它们所在的“Batch”的“文件”组来遍历整个数据集（有十几个“Batch”类别）

IE

```
batch[1] 
filepath1.txt
filepath2.txt
filepath3.txt
filepath4.txt

batch[2]
filepath5.txt
filepath6.txt
filepath7.txt
filepath8.txt 
```

如何为完整数据集中的所有批次组执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:55:04.570

该`split`功能似乎是您正在寻找的。

```
> dat <- data.frame(File = paste0("file", 1:10, ".txt"), Batch = rep(c("one", "two"), each = 5))
> dat
         File Batch
1   file1.txt   one
2   file2.txt   one
3   file3.txt   one
4   file4.txt   one
5   file5.txt   one
6   file6.txt   two
7   file7.txt   two
8   file8.txt   two
9   file9.txt   two
10 file10.txt   two
> split(dat, dat$Batch)
$one
       File Batch
1 file1.txt   one
2 file2.txt   one
3 file3.txt   one
4 file4.txt   one
5 file5.txt   one

$two
         File Batch
6   file6.txt   two
7   file7.txt   two
8   file8.txt   two
9   file9.txt   two
10 file10.txt   two 
```

# xml - 使用 XSLT 防止基于先前节点值的 foreach 中的输出

> ID：10786524
> 
> 赞同：1
> 
> 时间：2012-05-28T14:47:48.860
> 
> 标签：xml, xslt

我是 XSLT 的新手，今天早上的大部分时间我都在玩这个，但不确定如何继续。

这是一些测试 XML 来代表我正在尝试做的事情

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="style.xslt"?>
<ResultCollection>
    <ColumnSet>
    <Column>
        <Caption>Site</Caption>
        <DisplayType>String</DisplayType>
    </Column>
    <Column>
        <Caption>Date</Caption>
        <DisplayType>String</DisplayType>
    </Column>
    <Column>
        <Caption>Attendee</Caption>
        <DisplayType>String</DisplayType>
    </Column>
    <Column>
        <Caption>Paid</Caption>
        <DisplayType>Hidden</DisplayType>
    </Column>
    </ColumnSet>
    <RowSet>
        <Row>
            <Site>London</Site>
            <Date>15/06/2012</Date>
            <Attendee>James</Attendee>
            <Paid>Yes</Paid>
        </Row>
        <Row>
            <Site>London</Site>
            <Date>15/06/2012</Date>
            <Attendee>John</Attendee>
            <Paid>Yes</Paid>
        </Row>
</RowSet>
</ResultCollection> 
```

这是我用来转换它的相关 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html>
<head>
<style type="text/css">
table.resultsCollection
{
    border-collapse:collapse; 
    text-align:center;
    margin:5px; 
    padding:2px;
}

table.resultsCollection tr th,
table.resultsCollection tr td
{
    padding:2px 8px 2px 8px;
}
</style>
</head>
        <body>
        <table border="1" class="resultsCollection">
            <tr bgcolor="#eeeeff">
            <xsl:for-each select="ResultCollection/ColumnSet/Column">
                <xsl:if test="not(self::*/DisplayType[text()]='Hidden')">
                <th><xsl:value-of select="Caption"/></th>
                </xsl:if>
            </xsl:for-each>
            </tr>
            <xsl:for-each select="ResultCollection/RowSet/Row">
                <tr>                
                <td><xsl:value-of select="Site"/></td>
                <td><xsl:value-of select="Date"/></td>
                <td><xsl:value-of select="Attendee"/></td>
                <td><xsl:value-of select="Paid"/></td>
                </tr>
            </xsl:for-each>
        </table>
    </body>
</html>   
</xsl:template> 
```

我无法更改我正在使用的 XML 结构，因为这超出了我的控制范围，因为我认为这会让我的生活更轻松。尽管如此，我的目标是让它看起来可读，因此是 XSLT。

问题是“列”节点包含一个“显示类型”，它确定该列是否应该显示。使用 'xsl:if' 我确保不会显示任何具有该类型的列。但是，我无法弄清楚如何执行此操作并确保没有关联的记录也被输出。如果将这两个一起运行，您将看到表格的第四列没有标题。但是无论如何都会输出带有“付费”节点的两行的内容。

任何想法如何同步两者？（也欢迎任何证明我所拥有的建议，因为这是我的第一次尝试）

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:35:20.543

首先，我建议你养成使用模板规则而不是 for-each 的习惯。所以这段代码：

```
 <xsl:for-each select="ResultCollection/RowSet/Row">
        <tr>                
        <td><xsl:value-of select="Site"/></td>
        <td><xsl:value-of select="Date"/></td>
        <td><xsl:value-of select="Attendee"/></td>
        <td><xsl:value-of select="Paid"/></td>
        </tr>
    </xsl:for-each> 
```

变成

```
<xsl:apply-templates select="ResultCollection/RowSet/Row" /> 
```

加

```
<xsl:template match="Row">
  <tr><xsl:apply-templates/></tr>
</xsl:template>

<xsl:template match="Row/*">
  <td><xsl:value-of select="."/></td>
</xsl:template> 
```

现在您需要进行的更改会影响 Row 的子项，即最后一个模板规则。它将其更改为：

```
<xsl:template match="Row/*">
  <xsl:variable name="position" select="position()"/>
  <xsl:if test="not(ancestor::ResultCollection/ColumnSet/Column[$position]/DisplayType='Hidden')">
    <td><xsl:value-of select="."/></td>
  </xsl:if>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T17:29:02.917

你可能想制作一把钥匙

```
<xsl:key name="VisibleCols" match="ResultCollection/ColumnSet/Column[DisplayType!='Hidden']" use="Caption"/> 
```

并像使用它一样

```
<xsl:for-each select="ResultCollection/ColumnSet/Column[DisplayType!='Hidden']">
    <th><xsl:value-of select="Caption"/></th>
</xsl:for-each>
</tr>
<xsl:for-each select="ResultCollection/RowSet/Row">
    <tr>
    <xsl:for-each select="*[key('VisibleCols', name())]">
        <td><xsl:value-of select="."/></td>
    </xsl:for-each>
    </tr>
</xsl:for-each> 
```

请注意，它不使用预定义的元素集，而是采用源 xml 中可能不是您想要的任何内容。它还通过列名而不是它们在 xml 文件中的位置（与其他答案相反）将单元格与其标题链接起来。

补充：另外，您可以使用变量将列保存在：

```
<xsl:variable name="VisibleCols" select="ResultCollection/ColumnSet/Column[DisplayType!='Hidden']"/>
<xsl:for-each select="$VisibleCols">
    <th><xsl:value-of select="Caption"/></th>
</xsl:for-each>
</tr>
<xsl:for-each select="ResultCollection/RowSet/Row">
    <tr>
    <xsl:for-each select="*">
        <xsl:if test="$VisibleCols[Caption=name(current())]">
        <td><xsl:value-of select="."/></td>
        </xsl:if>
    </xsl:for-each>
    </tr>
</xsl:for-each> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T17:40:02.130

此样式表应产生正确的结果：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <html>
      <head>
        <style type="text/css">
          table.resultsCollection
          {
          border-collapse:collapse;
          text-align:center;
          margin:5px;
          padding:2px;
          }

          table.resultsCollection tr th,
          table.resultsCollection tr td
          {
          padding:2px 8px 2px 8px;
          }
        </style>
      </head>
      <body>
        <table border="1" class="resultsCollection">
          <xsl:variable name="columns" select="ResultCollection/ColumnSet/Column"/>
          <tr bgcolor="#eeeeff">
            <xsl:for-each select="$columns">
              <xsl:if test="DisplayType!='Hidden'">
                <th>
                  <xsl:value-of select="Caption"/>
                </th>
              </xsl:if>
            </xsl:for-each>
          </tr>
          <xsl:for-each select="ResultCollection/RowSet/Row">
            <tr>
              <xsl:for-each select="*">
                <xsl:variable name="pos" select="position()"/>
                <xsl:if test="$columns[$pos]/DisplayType!='Hidden'">
                  <td>
                    <xsl:value-of select="."/>
                  </td>
                </xsl:if>
              </xsl:for-each>
            </tr>
          </xsl:for-each>
        </table>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

它将列列表保存在一个变量中，然后在处理行时访问该变量以检查是否应显示该列。

对上的测试进行了`DisplayType`简化 - 这`[text()]`部分不是必需的。

# c# - 在所有其他控件之上绘制自定义控件（以前添加）

> ID：10786525
> 
> 赞同：1
> 
> 时间：2012-05-28T14:48:05.380
> 
> 标签：c#, winforms, user-controls, topmost

我有一个添加其他用户控件的用户控件，但我希望添加的“最新”控件位于最顶层，因此它高于其他控件。因为控件应该相互重叠。就像纸牌游戏一样。所以我添加了 5 个控件，第一个控件的优先级最低，最新的优先级最高 - 最明显。

有任何想法吗？

或者我是否必须覆盖“容器”控件的 Paint 方法？和 Control.CreateGraphics() 并绘制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:57:33.347

考虑 Control 类的 BringToFront 和 SendToBack 方法。也查看这些问题的答案

[如何使用 WinForms 设置控件的 Z 顺序](https://stackoverflow.com/questions/3213270/how-to-set-z-order-of-a-control-using-winforms)

[将 Winforms 控件置于最前面](https://stackoverflow.com/questions/2618073/bring-winforms-control-to-front)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:57:28.017

只需`userControl1.BringToFront()`在添加新控件时使用。

但是请注意，这不会阻止用户“切换”到其下方的控件。为此，您需要禁用或使其他控件不可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:58:05.397

在 Windows 窗体中，控件添加到其父控件集合的顺序决定了它们的呈现顺序。

这意味着您要么在代码中处理添加子控件并使用适当的插入位置，要么在设计器中移动控件（不幸的是，这通常意味着对 *.Designer.cs 文件进行危险的手动编辑）。

我建议您采用第一种方法，这对于较大的 WinForms 项目来说是唯一可行的方法，并在您的代码中明确控制插入逻辑。顺便说一句，好消息是无需修补绘画处理程序，因此您对使用 CreateGraphics() 之类的黑客行为的担忧是不合理的，并且可以消除 :)

# android - Android 上的大数据库文件支持

> ID：10786528
> 
> 赞同：2
> 
> 时间：2012-05-28T14:48:10.077
> 
> 标签：android, sqlite, android-sdcard, fat32, fat

我们都知道 Android 不支持除 FAT 之外的任何 SD 卡文件系统。我有巨大的 DB sqlite 文件（大约 9 Gb），我想在我的移动设备上使用该文件，但现在不可能了。我可以将文件分成一些较小的文件（当然，具有相同的 DB 表结构），然后使用任何软件（JDBC 扩展模块或类似的东西）将这些文件组装到逻辑级别的一个 DB 中。有人知道这个 java 软件/库吗？或者这只是我的美好愿景？:)

谢谢。

# facebook - 方法发布：强调我的应用程序描述，张贴在用户的墙上，导致菱形和询问标志

> ID：10786529
> 
> 赞同：0
> 
> 时间：2012-05-28T14:48:10.670
> 
> 标签：facebook, post, feed, diacritics

我正在使用 http 调用在任何用户的墙上发布有关我的应用程序的信息。我这样做：

```
_url = "https://graph.facebook.com/" + user_id + "/feed?message=MSG";

_url += "&access_token=" + access_token;

_url += "&picture=" + fb_app_url + "fb_icon.png";

_url += "&name=" + String_ToUrl("MY GAMES");

_url += "&link=" + "http://www.nlkgames.com";

_url += "&description=String_ToUrl("descripción with accent")"

_url += "&method=post";

http.URL_CALL(_url); 
```

此方法在用户的墙上发布正确的信息，但重音由带有问号的菱形显示。我不知道如何使它与口音一起使用。

String_ToUrl 将以这种方式编码字符串： "descripción with Accent" = "descripci%E9n+with+accent"

我的失败是什么？为什么用户的 facebook 的墙无法识别 urlencoded？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:04:12.593

您的`String_ToUrl`函数不会以识别 unicode 的方式对 URL 进行编码。

`ó`（又名['LATIN SMALL LETTER O WITH ACUTE' (U+00F3)](http://www.fileformat.info/info/unicode/char/00f3/index.htm)）应该变成`%C3%B3`URL 编码形式，而不是`%F3`（在你的情况下，你表示它变成`%E9`了实际上的`é`字符）。

```
descripción -> descripci%C3%B3n 
```

一定要使用正确的（和 unicode 感知的）方式来编码你的参数，例如在 JavaScript 中[`encodeURIComponent`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)应该使用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:23:57.650

如果您只是按原样发布描述，而不是将其编码为 URL，会发生什么？

如果这不起作用，请尝试使用 HTML 实体转换字符串，然后对描述进行 URL 编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T20:39:16.137

您也可以尝试将这些字母替换为 ASCII 表示形式（有点像 \u123）——当有这样一个特殊字符时，这将是 Graph API 为您提供的（在我的情况下，它将是德语字母表中的 äöü）

# file-upload - 如何从 dmcloud.net 上上传的视频创建缩略图

> ID：10786531
> 
> 赞同：1
> 
> 时间：2012-05-28T14:48:40.597
> 
> 标签：file-upload, python-2.7

我正在使用 Python SDK 在 dmcloud.net 上上传视频。

现在我想让我的应用程序的用户可以选择他上传的视频的缩略图。如何从 dmcloud.net 上上传的视频生成不同的缩略图。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:10:17.687

通过 SDK，您可以使用 Media API 的 set_thumbnail 方法更新视频缩略图。你有两个选择：

*   指定新缩略图的 URL
*   指定时间码，它是视频内的时间偏移量

对于您的最终用户，提供一种让他们指定 URL 或偏移量的方法（验证它是适合视频持续时间的偏移量）。如果您使用的是自定义播放器，您可以通过将播放器暂停在他们选择的帧上然后从您的播放器中提取时间偏移来进行 dmcloud API 调用，从而让他们在视觉上选择偏移。

如果您选择按时间码（偏移）设置缩略图，SDK 调用将如下所示：

```
 cloudkey.media.set_thumbnail(id, timecode) 
```

SDK链接：[http ://www.dmcloud.net/doc/api/python-sdk.html#media-object](http://www.dmcloud.net/doc/api/python-sdk.html#media-object)

# android - Android 的 JSON 解析器是否支持 revivers？

> ID：10786536
> 
> 赞同：1
> 
> 时间：2012-05-28T14:49:02.463
> 
> 标签：android, json

我试图有效地回答[这个问题](https://stackoverflow.com/questions/10786383/json-date-converted-from-asp-need-converting-to-java)，并认为提问者希望通过[reviver](http://ecma-international.org/ecma-262/5.1/#sec-15.12.2)`"/Date(######)\/"`将 .Net 样式的 JSON 日期（ ）转换为日期，但[查看文档](http://developer.android.com/reference/org/json/package-summary.html)并不清楚 Android 是否支持“复兴者”的概念。可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:40:56.370

答案似乎是：**不**，不是直接的。但是，**是**的，你可以在没有太多工作的情况下做到这一点（或它的一种形式）：

**不**，在那个[`JSONObject`](http://developer.android.com/reference/org/json/JSONObject.html), [`JSONArray`](http://developer.android.com/reference/org/json/JSONArray.html), [`JSONTokener`](http://developer.android.com/reference/org/json/JSONTokener.html),[`JSONReader`](http://developer.android.com/reference/android/util/JsonReader.html)等等，似乎并不*直接*支持这个概念。

**是**的，因为您可以`Date`通过很少的努力支持一种简单的恢复形式（例如用相应对象以给定格式替换字符串的上下文无关）[`JSONReader`](http://developer.android.com/reference/android/util/JsonReader.html)，或者甚至（只需多做一点工作）创建一个完全-成熟的启用 reviver 的反序列化器（完成正确的顺序等）。所以不是内置的，但不是从头开始的。

# richfaces - 当 popuppanel 调用 Richfaces 4.2 final 的extendeddatable 所在的另一个popuppanel 时，选择不起作用

> ID：10786540
> 
> 赞同：0
> 
> 时间：2012-05-28T14:49:24.410
> 
> 标签：richfaces

我正在从richfaces 4.0 final 迁移到richfaces 4.2 final，但是当popuppanel 调用另一个popuppanel 时，行选择不起作用，其中Richfaces 4.2 final 的extendeddatable 位于。这里，我的菜单项正在调用popupPanel，并且弹出窗口正在调用另一个popup，其中extendedDataTable 是位于.. 我这样做是为了获得最大的桌面体验，这在richfaces 4.0 final 中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:12:25.547

我已删除

冻结列=“”

属性，现在选择正在工作，好的。

Richfaces 4.0 就是这种情况

问候， 库尔希德

# ruby-on-rails - 链接到多态关联中的自定义操作

> ID：10786547
> 
> 赞同：1
> 
> 时间：2012-05-28T14:49:53.523
> 
> 标签：ruby-on-rails

我有很多任务的项目模型。项目和任务都可以有很多讨论，因此我做了讨论多态模型（见下文）。

我希望能够单击链接并将“讨论”标记为已完成。

我继续这样做的方法是在“讨论控制器”中进行自定义操作，将“完成”属性的布尔值从 false 更改为 true。如何使讨论显示页面中的 link_to 助手成功路由到讨论控制器中的自定义操作？另外，这是执行此操作的最佳做​​法吗？

**讨论模型**

```
 1 class Discussion < ActiveRecord::Base  
  4   belongs_to :user
  5   belongs_to :discussionable, :polymorphic => true 
 28 end 
```

**项目模型**

```
 1 class Project < ActiveRecord::Base 
  7   has_many :tasks, :dependent => :destroy
  8   has_many :discussions, :as => :discussionable, :dependent => :destroy
 24 end 
```

**任务模型**

```
 1 class Task < ActiveRecord::Base          
  7   belongs_to :project      
 14   has_many :discussions, :as => :discussionable, :dependent => :destroy
 27 end 
```

到目前为止，我的 link_to 助手如下所示，但它不起作用（没有按我的意愿触发自定义的“完成”操作）......

**讨论秀**

```
7   <%= link_to 'Finish discussion', polymorphic_path([@parent, @discussion]), :action => 'finish' %> 
```

这是**讨论控制器中的自定义完成操作**。（我有 before_filter，它从 params[:id] 定义了这个 @discussion 变量）

```
 33   def finish
 34     if @discussion.update_attribute(:finished, true)
 35       flash[:notice] = "it worked"    
 36       else
 37       flash[:alert] = 'You must be an admin to do that'
 38     end
 39   end 
```

我也没有摆弄routes.rb，因为我不知道是否必须这样做。

**路由.rb**

```
 1 PrjctMngr::Application.routes.draw do                 
 13     
 14   # PROJECTS
 15   resources :projects do
 16     resources :tasks
 17     resources :discussions
 18   end
 19 
 20   # TASKS
 21   resources :tasks do
 22     resources :subtasks
 23     resources :discussions
 24   end
 31 
 32   # DISCUSSIONS
 33   resources :discussions do
 34     resources :comments    
 35   end
 36 
 37 end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:53:43.923

```
 <%= link_to 'Finish discussion', polymorphic_path([@parent, @discussion], :action => 'finish'), :method => :put %> 
```

action 选项用于路径助手，而不是标签助手；）

```
all assuming you have route set up propery
#routes.rb
resources :tasks do 
  resources :discussions do
    put :finish, :on => :member
  end
end 
```

# iphone - 在 UIScrollView 上添加 UITextView/UILabel

> ID：10786549
> 
> 赞同：0
> 
> 时间：2012-05-28T14:49:57.070
> 
> 标签：iphone, objective-c, ios, ios4, uiscrollview

我正在尝试添加一个`UITextView`. `UIScrollview`然后添加`UIScrollView`到`UIView`. 将 scrollView 添加到`UIView`有效但添加`UITextView`到 a`UISCrollView`不起作用。任何指针？

谢谢

```
UIScrollView * contentScrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(300, 400, 250, 250)];
contentScrollView.backgroundColor = [UIColor whiteColor];
UITextView * mainContent = [[UITextView alloc]initWithFrame:CGRectMake(300, 400, 200, 200)];
mainContent.text = @"HELLO";
mainContent.textColor = [UIColor blackColor];
[contentScrollView addSubview:mainContent];
[contentScrollView setUserInteractionEnabled:YES];
[contentView addSubview:contentScrollView]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T14:52:04.400

你的滚动视图的高度是 250，宽度也是 250。但是你给 textview 的框架超出了这些限制，即 300 和 400。将它们限制在 250、250 之类的

```
UITextView * mainContent = [[UITextView alloc]initWithFrame:CGRectMake(100, 100, 200, 200)]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T15:51:51.107

使用此代码：

```
UIScrollView * contentScrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 50, 320, 270)];
contentScrollView.backgroundColor = [UIColor whiteColor];
[contentScrollView setUserInteractionEnabled:YES];    

UITextView * mainContent = [[UITextView alloc]initWithFrame:CGRectMake(60, 30, 200, 200)];
mainContent.text = @"HELLO";
mainContent.textColor = [UIColor blackColor];

[contentScrollView addSubview:mainContent];        
[self.view addSubview:contentScrollView]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-31T09:08:06.920

使用这种技术

```
UIScrollView * contentScrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0, 50, 320, 270)]; 
```

并将其添加到您的`UIScrollView`喜欢中：

```
UITextView * mainContent = [[UITextView alloc]initWithFrame:CGRectMake(100, 100, 200, 200)];
contentScrollView.backgroundColor = [UIColor whiteColor];
[contentScrollView setUserInteractionEnabled:YES];    
[contentScrollView addSubview:mainContent]; 
```

# jmeter - jMeter - 性能下降，循环次数增加

> ID：10786551
> 
> 赞同：0
> 
> 时间：2012-05-28T14:49:58.533
> 
> 标签：jmeter, performance-testing

我需要一些关于如何调试问题的帮助。只要我将循环计数保持在 1，我当前的 jMeter 场景似乎运行良好，当我添加更多循环时，性能开始大幅下降。

我有一个包含 225 个线程的线程组，110 秒加速，循环计数 1 - 我的总响应时间是 ca。8-9 秒。我运行了几次以确认，每次运行都显示相似的响应时间。现在，我做了同样的测试，只是将循环数改为 3，所有其他参数不变，性能下降，总响应时间为 ca。30-40 秒。

我的印象是 3x 1 循环运行或多或少相当于 1x 3 循环运行。看来这不是问题。任何人都可以向我解释为什么会这样？或者，如果这应该是等效的，知道在哪里寻找性能下降的罪魁祸首吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:08:03.317

您的意思是，如果您增加吞吐量（如每秒请求数），响应时间会降低。

基于 225 个线程以 110 秒的速度发出单个请求，您的吞吐量将在每秒 2 个请求的区域内。将循环计数增加到 3 将使每秒请求数增加大约 3 到 6 个（假设没有计时器）。当然，如果响应时间在增加，那么您将无法达到这个吞吐量水平，这是您的问题。

鉴于此请求已经花费了 8-9 秒，这并不是特别快，可以假设在幕后进行了一些繁重的思考，并且您只是在某个地方遇到了瓶颈......

尝试使用更少的线程和更长的加速，然后监控响应时间和吞吐率。在某些时候，随着负载的增加，您会看到响应时间开始下降，此时您需要卷起袖子，看看 AUT 中发生了什么。

笔记。3 x 1 循环与 1 x 3 循环不同。迭代之间的延迟将导致具有多个迭代的一个线程具有不同的吞吐量，而不是具有一个迭代的更多线程，其中吞吐量由斜升决定，而不是延迟。也就是说，这不是您在问题中所描述的 - 您提到线程数是一致的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:15:10.110

除了 Oliver 的回答：尝试使用自定义侦听器，例如[Active Threads Over Time Listener](http://code.google.com/p/jmeter-plugins/wiki/ActiveThreadsOverTime) - 来监控您的负载场景。
您还可以使用此侦听器重试上述两种方案 - 当然，您会在图表中看到差异。

# jquery - Jquery 动态文本区域菜单

> ID：10786556
> 
> 赞同：0
> 
> 时间：2012-05-28T14:50:09.733
> 
> 标签：jquery

我有一个页面，允许用户添加和删除动态文本区域。

当用户单击“添加文本区域”按钮时，会加载一个新的文本区域。文本区域的顶部是一个小菜单，包括粗体、斜体和下划线按钮。

当用户单击这些按钮之一时，文本区域将填充对应于该按钮的标记。

但是，当用户添加第二个 textarea 时，第一个 textarea 的菜单会将输出加倍到第一个 textarea。如果用户然后添加第三个 textarea，则第一个 textarea 的菜单将输出增加三倍到第一个 textarea，第二个区域将输出增加一倍......

希望这是有道理的。每次添加额外的文本区域时，如何阻止这种加倍？

这是完整的脚本：

```
$('.article-button').click( function() {
    var target = '#about-elements';
    var button_type = $(this).attr('id');
    var id = new Date().getTime();
    var right_id = (new Date().getTime())+1;
    var get_icons = appendIcons(id);
    var menu = $.fn.menuOption();
    var out = false;

    if(button_type == 'about-textarea') {
        var out = '<div id="' + id + '" class="sortable-div"><label>Paragraph</label><div class="menu-option" rel="menu_' + id + '">' + menu + '</div><textarea id="element_' + id + '" class="about-textarea" name="element_' + id + '[]" /></textarea>';
    }
    else
        return false;                   

    if(out != false) {
        var out = out += get_icons;
        var l_out = out + '</div>';
        $(l_out).css('display', 'none').appendTo(target).fadeIn(500);
        $('.field-option').click(function() {
            var link_id = $(this).attr('rel');
            var type = $(this).attr('class').replace('field-option ', '');
            $.fn.fieldOption(type, link_id);
        });
        $('.article-menu').click(function() {
            var parent_id = $(this).closest('.menu-option').attr('rel').replace('menu_', '');
            var type = $(this).attr('rel');
            $.fn.menuOutput(type, parent_id);
        });
    }
    $(".droppable").droppable({ accept: ".draggable", activeClass: "drop-list-hover", drop: function(event, ui) {
        var drag_id = ($(ui.draggable).attr("id")).replace('upload_', '');
        var drag_src = ($(ui.draggable).attr("src"));
        var drop_id = $(this).attr('rel');
        var new_img = '<img src="' + drag_src + '" />';

        $('input[id=img_' + drop_id + ']').val(drag_id);
        $('div.sortable [id=' + drop_id + '] div.droppable').hide().html(new_img).fadeIn(500);
        }
    });                                             
}); 
```

以及 fieldOption 和 menuOutput 函数：

```
$.fn.fieldOption = function(type, link_id) {
    var list_id = 'div[id=' + link_id + ']';

    if(type == "remove") {
        $('#dialog-confirm').dialog({
            resizable: false,
            height:140,
            modal: true,
            draggable: false,
            buttons: {
                "Remove field": function() {
                    $(this).dialog('close');
                    $(list_id).css('min-height', '0');
                    $(list_id).animate({
                        opacity: 0,
                        height: '0px'
                        }, 800, 'swing', function() {
                            $(list_id).remove();
                    });                                         
                },
                Cancel: function() {
                    $(this).dialog('close');
                }
            }
        });
    };
};

$.fn.menuOption = function() {
    var menu = '<ul class="article-buttons">' +
        '<li><a title="Bold" class="article-menu bold" href="javascript:void(0);" rel="bold"><img src="images/icons/article/article-menu-bold.png" width="29" height="29" /></a></li>' +
        '<li><a title="Italic" class="article-menu italic" href="javascript:void(0);" rel="italic"><img src="images/icons/article/article-menu-italic.png" width="29" height="29" /></a></li>' +
        '<li><a title="Underline" class="article-menu underline" href="javascript:void(0);" rel="underline"><img src="images/icons/article/article-menu-underline.png" width="29" height="29" /></a></li>' +
        '</ul>';
    return menu;
}

$.fn.menuOutput = function(type, parent_id) {
    if(type == 'bold') {
        var str = '[bold]...[/bold]';
    }
    else if(type == 'italic') {
        var str = '[italic]...[/italic]';
    }
    else if(type == 'underline') {
        var str = '[underline]...[/underline]';
    }
    $('textarea[id=element_' +  parent_id + ']').insertAtCaret(str);
} 
```

快速更新：

到目前为止，我发现的问题是文章菜单单击功能在文章按钮单击功能内。

```
$('.article-button').click( function() {
.....
    $('.article-menu').click(function() {
        var parent_id = $(this).closest('.menu-option').attr('rel').replace('menu_', '');
        var type = $(this).attr('rel');
        $.fn.menuOutput(type, parent_id);
    });
.....
}); 
```

当我将这部分移到主函数之外并将'click（function（）'更改为'on（'click'，function（）'......什么都没有。但是，如果我将.on更改为.live，一切似乎都很完美. Live 已被弃用。

解决了

如上所述，我将点击功能上的“文章菜单”从“文章按钮”功能中移出，并将其更改为：

```
 $(document.body).on('click', '.article-menu', function() {
                    var parent_id = $(this).parent().parent().parent().attr('rel').replace('menu_', '');
                    var menu_type = $(this).attr('rel');
                    $.fn.menuOutput(menu_type, parent_id);
                }); 
```

# .net - 响应 xml 中未显示 null 元素（SOAP Web 服务）

> ID：10786561
> 
> 赞同：0
> 
> 时间：2012-05-28T14:50:33.280
> 
> 标签：.net, xml, web-services

我为我们的客户创建了一个 asp.net Web 服务，它返回`List`包含复杂类型的多个对象。客户端一直在接收数据就好了。

他注意到，并不是所有的标签一直都在那里。例如，如果我在列表中返回 3 个对象，对象 AB 和 C。当我返回它时，C 为空。它将显示：

```
<A>data</A>
<B>data</B> 
```

当我希望它显示以下内容时：

```
<A>data</A>
<B>data</B>
<C/> 
```

或者至少：

```
<A>data</A>
<B>data</B>
<C></C> 
```

基本上，我希望 XML 的结构保持不变，无论哪些数据可用以及哪些数据为空。

有什么建议么？

非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T17:12:00.870

[肥皂规格。](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/)状态：

> NULL 值或默认值可以通过省略访问器元素来表示。NULL 值也可以由包含属性 xsi:null 且值为“1”或其他可能与应用程序相关的属性和值的访问器元素指示。

不幸的是，对于你来说，MS 选择了这种情况的第一个选项。

另一方面，您不能像这样创建 NULL 值：

```
<C></C> 
```

因为空字符串和空字符串有什么区别？

这个选项

```
<C/> 
```

看起来很有希望。我猜您的服务使用 XMLSerializer 来序列化您的数据。检查[这篇文章](https://stackoverflow.com/questions/7286112/tweak-output-from-xmlserializer-in-c-sharp)。也许您可以`IXMLSerializable`为您的对象实现并为您的数据提供自定义 xml。

# javascript - 循环遍历数组并成对输出（每个第二个元素的除法器）

> ID：10786569
> 
> 赞同：8
> 
> 时间：2012-05-28T14:51:13.023
> 
> 标签：javascript, jquery, arrays, foreach

我有一个包含匿名元素的数组。元素通过 php 添加到数组中，如下所示：

```
$playlist = array();

while (databaseloop) {
  $playlist[] = $a_title;
  $playlist[] = $a_length;
}

echo json_encode(array('playlist'=>$playlist)); 
```

所以数组变成：

```
["Hello.mp3", "00:00:14", "Byebye.mp3", "00:00:30", "Whatsup.mp3", "00:00:07", "Goodnight.mp3", "00:00:19"] and so on 
```

然后我用 ajax post 在 jquery 中检索这个数组。一切正常。

现在，我正在寻找一种在 javascript/jquery 中将所有数组元素作为对处理/输出的方法。为每个第二个元素“做某事”。像这样：

```
foreach (two_elements_in_array) {
  // output track name
  // output track time
  // output some divider
} 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T14:53:10.853

好吧，也许这是最基本的解决方案：

```
for (var i = 0; i < arr.length; i += 2) {
    var title = arr[i];
    var len = arr[i+1];
} 
```

* * *

但是，我建议您安排`$playlist`如下：

```
while (databaseloop) {
    $playlist[] = array(
        "title" => $a_title,
        "length" => $a_length
    );
} 
```

然后很容易简单地迭代元素：

```
for (var i = 0; i < arr.length; i++) {
    var title = arr[i]['title'];
    var len = arr[i]['length'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T16:52:57.890

您可以将数组拆分为一个由二元素数组组成的数组。

```
var arr = ["Hello.mp3", "00:00:14", "Byebye.mp3", "00:00:30", "Whatsup.mp3", "00:00:07", "Goodnight.mp3", "00:00:19"];
arr.map(function(elem,i,arr){return [elem, (i+1<arr.length) ? arr[i+1] : null];})
    .filter(function(elem,i){return !(i%2);}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-17T12:37:45.137

使用[Array.prototype.reduce()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce "Mozilla 开发者网络 (MDN) 上的 Array.prototype.reduce()")：

```
let pairs = playlist.reduce((list, _, index, source) => {
    if (index % 2 === 0) {
        list.push(source.slice(index, index + 2));
    }
    return list;
}, []); 
```

这为您提供了一个可以使用的二维数组`pairs`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:53:11.257

不与`foreach`.

```
for (var i = 0; i < array.length; i += 2) {
    var name = array[i];
    var time = array[i + 1];
    // do whatever
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T14:54:33.260

一个增量为 2 的简单 for 循环。您可能需要确保您的数组长度对于 i+1 足够长，以防长度不能被 2 整除！

```
for (i = 0; i+1 < array.length; i+=2) {
  name = array[i];
  length = array[i+1];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-28T14:56:13.863

```
var arr = ["Hello.mp3", "00:00:14", "Byebye.mp3", "00:00:30", "Whatsup.mp3", "00:00:07", "Goodnight.mp3", "00:00:19"];

var group = [];
for (var x = 0; x < arr.length; x += 2) {
    var track = arr[x],
        length = arr[x + 1];
    group.push({
       track: track,
       length: length
    })
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-28T15:00:36.903

正如@VisioN所说，如果您使用关联数组会更容易，否则您可以在客户端迭代时拥有一个单独的标签数组

```
var d=["Hello.mp3", "00:00:14", "Byebye.mp3", "00:00:30", "Whatsup.mp3", "00:00:07", "Goodnight.mp3", "00:00:19"] ;
var e=["name","time"];
var c=0;
$.each(d,function(i,j){
    if(c>=2)c=0;
    console.log(e[c]+j);
    c++;
}); 
```

[http://jsfiddle.net/FmLYk/1/](http://jsfiddle.net/FmLYk/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-28T15:00:58.390

如果可能的话，我建议您对代码进行更多优化，以使其更有意义并且不易出错。这也是更加面向对象的好方法！

像这样（我在这里使用 jQuery）：

```
var array = [ {name: "Hello.mp3", time: "00:00:14"}, {name: "Byebye.mp3", time:"00:00:30"}, {name: "Whatsup.mp3", time: "00:00:07"}, {name: "Goodnight.mp3", time: "00:00:19"}]; 
```

然后你就可以循环它并生成看起来更干净的代码

```
array.forEach(function(data){
    //edit the output here
    console.log(data.name + " " + data.time );  
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-15T23:25:48.533

破坏性的，但干净的：

```
while (arr.length) {
  const Title  = arr.shift();
  const Length = arr.shift();

  // Do work.
} 
```

# android - Android上的线程

> ID：10786571
> 
> 赞同：0
> 
> 时间：2012-05-28T14:51:39.843
> 
> 标签：android, multithreading

我有以下空白：

```
public void load() {
//loading big picture from the Internet
} 
```

我希望它在一个新线程中运行。我可以这样调用这个过程：

```
new Thread(new Runnable() {
public void run() {
load();
}
}).start(); 
```

或者最好修改这个空白：

```
public void load() {
new Thread(new Runnable() {
public void run() {
//loading big picture from the Internet
}
}).start();
} 
```

并简单地称之为：

```
load(); 
```

还是没有什么不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:04:56.433

在功能上，它们是相同的。有些设计细节可能会让您考虑第一种方式而不是另一种方式。

如果您有很多不同的线程，它们不是自己的东西，但也称为`load()`. 在这种情况下，您已经创建了线程，所以如果他们打电话给您，`load()`您就不想/不需要创建另一个线程。

第二种选择非常方便。您可以简单地拨打`load()`任何您想要的电话。如果将来该`load()`方法更改为不阻塞的程度，那么您可以更改它，并且不需要进一步的代码更改。

或者，如前所述，考虑为此使用 AsyncTask。它专为您正在尝试做的事情而构建。

# c# - 泛型方法声明

> ID：10786573
> 
> 赞同：1
> 
> 时间：2012-05-28T14:51:48.473
> 
> 标签：c#, generics

我有类的层次结构：

```
class A{}
class B: A {}
class C:B {} 
```

是否可以在 A 类中实现方法，它会被派生类 B 和 C 等继承，并且该方法应该返回类类型的值？

```
A val = A.method(); (val is A)
B val = B.method(); (val is B)
C val = C.method(); (val is C) 
```

而且我不想在调用此方法时使用泛型，即：

```
C val = C.method<C>(); 
```

伙计们，对不起，一个阐述，这个方法应该是静态的。

我不想在方法 istelf 中使用泛型，因为它强制指向该方法应该返回的类型，而方法应该返回其类的类型。

```
class A
    {
      Method<T>()
      {
         T result;
         return result;
      }
    } 
```

如果我有这样的方法，我可以更改返回类型：

```
D result = A.Method<D>(); 
```

但我希望它返回 A 类型的值；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:30:32.247

不，那是不可能的。

要像这样调用该方法，它必须是静态的，并且静态方法不是继承的。

使用`B.method()`调用静态方法`A`与使用相同`A.method()`。编译器只是使用类型来确定方法在哪里，但是方法不可能知道它是否使用`A`or`B`类型调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:59:43.753

使用 C++ 中的一些设计模式使这更容易：

```
class A
{
    protected virtual A method_impl() { return new A(); }
    public A method() { return method_impl(); }
}

class B : A
{
    protected override A method_impl() { return new B(); }
    public new B method() { return (B)method_impl(); }
}

class C : B
{
    protected override A method_impl() { return new C(); }
    public new C method() { return (C)method_impl(); }
} 
```

当然，这个确切的问题在 C++ 中永远不会出现，它允许协变返回类型用于覆盖。

* * *

另一种方式，使用 IoC 模式：

```
class A
{
    protected virtual void method_impl(A a) { a.initialize(); }
    public A method() { A result = new A(); method_impl(result); return result; }
}

class B : A
{
    public new B method() { B result = new B(); method_impl(result); return result; }
}

class C : B
{
    public new C method() { C result = new C(); method_impl(result); return result; }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T15:14:45.513

使用扩展方法：

```
class Program
    {
        static void Main(string[] args)
        {
            B x = new B();
            x.Method();
        }
    }

    public static class Ext
    {
        public static T Method<T>(this T obj)
            where T : A,new()
        {
            return new T();
        }
    }

    public class A
    {

    }

    public class B : A
    {

    } 
```

或其变体。请注意，您必须有一些能够创建指定类型实例的公共成员。为了解释，编译器“猜测”类型参数的值。该方法仍然是通用的，但是在调用该方法时（通常）看不到通用语法。

# javascript - HTML5 Canvas - 在画布中获取文本框值

> ID：10786574
> 
> 赞同：0
> 
> 时间：2012-05-28T14:51:52.397
> 
> 标签：javascript, html, canvas, html5-canvas

这是我的 JSFiddle ：

[http://jsfiddle.net/fknjz/5/](http://jsfiddle.net/fknjz/5/)

（忘记更新按钮旁边的保存按钮......）

所以我想要的是能够填充主图像下方的文本框，并且当按下“更新按钮”时......文本将在画布中更新。

JS 代码在 HTML 部分中......它在 JS 部分中时效果不佳。

现在我试过了：

```
<input type="text" id="nom"/>  /* THE TEXTBOX */ 
```

并为 JS 代码绘制文本：

```
oCtx.fillText(document.getElementById("nom").value, 283, 350); 
```

它工作得不是很好......因为当我点击更新时没有任何反应......使用 FIREFOX 它似乎正在使用 window.refresh......但不能在 Chrome、Safari ......等中工作。什么功能可以使它在主流浏览器中正常工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:57:10.150

我相信你应该把一个“onclick”功能放在里面，而不是放在“onload”上。但是，再说一次，我对这一切也很陌生！

我希望这能帮到您。

* * *

或者，试试这个：

**oCtx.fillText("document.getElementById("nom").value", 283, 350);**

（注意引号）

* * *

最好的问候，蒂亚戈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:45:51.677

JSFiddle：http: [//jsfiddle.net/fknjz/17/](http://jsfiddle.net/fknjz/17/)

我将用于在画布中写入文本的代码移动到名为“updateClicked”的函数中。单击更新按钮时，将调用此函数。此外，我将“oCtx”设为全局变量。现在工作正常。

# java - JTable 列标题是否可以垂直对齐？

> ID：10786576
> 
> 赞同：0
> 
> 时间：2012-05-28T14:52:02.007
> 
> 标签：java, swing, jtable, jtableheader

我正在为酒店管理系统开发酒店预订时间线功能。我有一个`JTable`行代表房间，列代表天的地方。如果当天预订了房间，则会突出显示相应的单元格。由于这些单元格没有任何内容，仅用于直观地表示房间预订的日期，因此它们的宽度大于高度似乎毫无意义。但是，如果我将它们调整为相等的列标题，则包含天数会缩短，而不是“02.01.2012”。我看到的只是“……”。由于这不是一个选项，我想知道是否可以“旋转”标题单元格，以便其中的文本垂直对齐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:17:13.603

您可以使用[垂直表格标题单元格渲染器](http://tips4java.wordpress.com/2009/03/06/vertical-table-header-cell-renderer/)中描述的方法以垂直方式显示标题文本。

# postgresql - 在 mac 中安装 postgis

> ID：10786584
> 
> 赞同：0
> 
> 时间：2012-05-28T14:52:31.040
> 
> 标签：postgresql, postgis

我正在尝试在 mac 中安装 postgis。但我不确定是否应该从源代码编译它或安装二进制文件。当我尝试安装二进制文件时，它说我需要安装我已经拥有的 postgresql 9.1。我应该怎么办？有没有明确的mac安装说明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:23:51.310

当我遇到麻烦时，我通常从源代码安装。这使配置和编译器有更好的机会为您的计算机定制一切。但是，您必须安装 postgresql 的开发库才能使其与 postgis 一起使用。

# android - 如何重新定义android上的“音量”按钮

> ID：10786585
> 
> 赞同：1
> 
> 时间：2012-05-28T14:52:39.853
> 
> 标签：android, button, redefine

我想重新定义安卓手机上的“音量”按钮。例如，当我按下增加或减少时，音量不会改变，而只会打印一个单词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:59:25.693

只需像这样覆盖 OnKeyDown 方法：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if(keyCode == KeyEvent.KEYCODE_VOLUME_UP){
       //Do whatever you want to do on Volume Up
       return true;
    } else if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN){
       //Do whatever you want to do on Volume Down
       return true
    }
    return false;
} 
```

提示：如果您希望所有活动都具有这种行为，而不仅仅是一个，只需在 MainActivity.java（或您想要调用的任何内容）中执行此操作，并让所有其他 Activity 扩展 MainActivity。

PROTIP 2：除非绝对必要，否则不要这样做，并且通知用户它是这样工作的。Android 用户通常抱怨它在应用程序之间没有共同的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T15:11:03.767

您必须像这样覆盖 dispatchKeyEvent() 方法：

```
 @Override
    public boolean dispatchKeyEvent(KeyEvent event) {
        int action = event.getAction();
        int keyCode = event.getKeyCode();
            switch (keyCode) {
            case KeyEvent.KEYCODE_VOLUME_UP:
                if (action == KeyEvent.ACTION_UP) {
                    //TODO
                    Toast.makeText(this,"Your First Word",Toast.LENGTH_SHORT).show();
                }
                return true;
            case KeyEvent.KEYCODE_VOLUME_DOWN:
                if (action == KeyEvent.ACTION_DOWN) {
                    //TODO
                    Toast.makeText(this,"Your Second Word",Toast.LENGTH_SHORT).show();
                }
                return true;
            default:
                return super.dispatchKeyEvent(event);
            }
        } 
```

# android - 获取android相机的原始RGB数据

> ID：10786586
> 
> 赞同：4
> 
> 时间：2012-05-28T14:52:42.057
> 
> 标签：android, android-camera

我正在开发安卓上的相机应用程序。我目前正在使用 jpeg 回调进行捕获。我想知道是否有办法获取捕获的原始数据。我知道捕获有一个原始回调，但它总是返回 null。

所以从 jpeg 回调中我可以访问原始数据（RGB 像素的连续）。

编辑 ：

所以从 jpeg 回调中我可以访问原始数据（YUV 像素的连续）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-01T10:19:37.457

我成功地获得了在 rk3288 上运行 android 5.1 的“原始”（YUV422）图片。

### 获取 yuv 图像的 3 个步骤

1.  初始化缓冲区
2.  `addRawImageCallbackBuffer`反射调用
3.  在专用回调中获取yuv图片

### 代码示例

```
val weight = size.width * size.height * ImageFormat.getBitsPerPixel(ImageFormat.NV21) / 8
val bytes = ByteArray(weight);
val camera = android.hardware.Camera.open();

try {
    val addRawImageCallbackBuffer = camera.javaClass
            .getDeclaredMethod("addRawImageCallbackBuffer", bytes.javaClass)
    addRawImageCallbackBuffer.invoke(camera, bytes)
} catch (e: Exception) {
    Log.e("RNG", "Error", e);
}
...
camera.takePicture(null, { data, camera ->
    val file = File("/sdcard/output.jpg")
    file.createNewFile()
    val yuv = YuvImage(data, ImageFormat.NV21, size.width, size.height, null)
    yuv.compressToJpeg(Rect(0, 0, size.width, size.height), 80, file.outputStream())
}, null) 
```

### 解释

该`Camera.takePicture()`方法将 raw 的回调作为第二个参数。

```
camera.takePicture ( shutterCallback, rawCallback, jpegCallback ); 
```

这个回调将返回一个`null`byteArray，除非我先明确地为原始图像添加一个缓冲区。
所以，你应该为此打电话`camera.addRawImageCallbackBuffer`。

尽管如此，该方法不可用（公共但未导出，因此您不能直接调用它）。

幸运的是，代码示例演示了如何通过反射强制调用此方法。这将使原始缓冲区推送一致的 yuv 图片作为参数。

# java - Java双精度求和麻烦

> ID：10786587
> 
> 赞同：2
> 
> 时间：2012-05-28T14:52:46.343
> 
> 标签：java, floating-point, double

我想知道为什么我会收到这个错误。（这是 Eclipse 调试的显示日志）

```
var
     (double) 2.8
tot.getIva()
     (java.lang.Double) 0.17
var+tot.get()
     (double) 2.9699999999999998 
```

我不明白为什么我没有得到简单的 2.97！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-28T14:55:16.990

如果您愿意`2.97`，您应该使用[`BigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html).

`double`*s 以二进制*形式存储为分数，而不是十进制。因此`3.75`，例如，仅存储为`2^1 + 2^0 + 2^(-1) + 2^(-2)`.

`2.8`并且`0.17`不能完全表示为二进制分数，因此会有一些舍入误差。

您可能还会发现[这篇文章](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:55:27.193

这是由于 java 中浮点类型（float 和 double）的精度。如果您需要不确定的精度，您应该尝试使用`BigDecimal`而不是`double`.

# sql - 如何恢复状态为 X 且最近交付状态为 Y 的交货？

> ID：10786589
> 
> 赞同：0
> 
> 时间：2012-05-28T14:53:04.850
> 
> 标签：sql

我一直在努力解决这个问题，我想我需要一个提示！

我有一个电子书的**delivery_table**，在这个表中有以下列：**catalogue_number、delivery_date、status_id**

我正在尝试从 product_status 为“4”的列**catalogue_number**中取回所有条目，但只有在最近交付的 catalogue_number 处于状态“1”时

这是我可能会看到的特定电子书的示例：

```
+---------------+------------------+-----------+
| Delivery_Date | Catalogue_Number | Status_Id |
+---------------+------------------+-----------+
| 12/02/2012    | ABA00001         | 3         |
+---------------+------------------+-----------+
| 01/02/2012    | ABA00001         | 1         |
+---------------+------------------+-----------+
| 20/01/2012    | ABA00001         | 4         |
+---------------+------------------+-----------+
| 18/01/2012    | ABA00001         | 4         |
+---------------+------------------+-----------+
| 10/01/2012    | ABA00001         | 3         |
+---------------+------------------+-----------+
| 01/01/2012    | ABA00001         | 3         |
+---------------+------------------+-----------+ 
```

从上到下的第二个交付处于状态 1（已摄取），但早期交付处于状态“4”（错误）我想在这种情况下将每个猫号恢复为状态“4”。

我猜这将是某种嵌套查询场景，但我正在努力思考查询需要做什么的逻辑！

在此先感谢您的帮助！

我正在使用 SQL Microsoft Server 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:59:28.753

您可以使用[CTE（通用表表达式）](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx) - 这将定义具有 1 状态的订单子集，然后您可以加入您的初始查询，例如

```
with Order1Statuses as (
  select Catalogue_number,
         max(Delivery_date) as status1date,
  from delivery_table
  where status_id = 1
  group by catalogue_number
)
select t4.Catalogue_number
from delivery_table t4 inner join Order1Statuses t1 on 
    t4.catalogue_number = t1.catalogue_number 
    and t4.delivery_date < t1.status1date 
    and t4.status_id = 4 
```

# winforms - 如何在非客户区插入新按钮？

> ID：10786591
> 
> 赞同：2
> 
> 时间：2012-05-28T14:53:11.047
> 
> 标签：winforms, .net-4.0, custom-controls, nonclient

我正在开发一个自定义表单，我需要在最小化按钮旁边放一个按钮。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:06:57.823

P/Invoke 将是我想说的前进方向，请查看 msdn 上的此链接[http://social.msdn.microsoft.com/forums/en-US/winforms/thread/485fb4c5-8430-4cb5-8a4d-ccd7892e403b](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/485fb4c5-8430-4cb5-8a4d-ccd7892e403b) .

那应该让你上路。

干杯，凯文

# c++ - 使用类或函数模板更好地使用“static-if”？

> ID：10786593
> 
> 赞同：2
> 
> 时间：2012-05-28T14:53:14.587
> 
> 标签：c++, templates, template-specialization, static-if

我想定义用于序列化变量的接口，根据模板参数，执行序列化代码（`true`）或不`false`执行（）。序列化函数本身以归档和变量类型为模板。

是部分专门化序列化功能，还是专门化内部带有静态方法的类？下面的代码是否正确？有没有更好的办法？

* * *

这是我的伪代码，我不确定它是否有效。

类方法看起来像这样：

```
template<bool ser>
struct MaybeSerialize;

template<> struct MaybeSerialize<true>{
   template<class ArchiveT, class T>
   static void serialize(ArchiveT& archive, T& var){ /* serialize*/ }
};

template<> struct MaybeSerialize<false>{
   template<class ArchiveT, class T>
   static void serialize(ArchiveT& archive, T& var){ /* do nothing*/ }
};

// call like this
MaybeSerialize<compileTimeBool>::serialize(archive,variable); 
```

部分特化将是（语法可能是错误的）：

```
template<bool ser, class Archive T, typename T> maybeSerialize(ArchiveT&,T&);
template<class ArchiveT, typename T> maybeSerialize<true>(ArchiveT&,T&){ /* serialize */ }
template<class ArchiveT, typename T> maybeSerialize<false>(ArchiveT&,T&){ /* do nothing */ }
// call like this
maybeSerialize<compileTimeBool>(archive,variable); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T16:34:15.563

正如 Pubby 已经评论过的，在 C++ 中不能部分特化模板函数，你必须使用类特化。然而，C++ 中的静态 if 实现非常简单：

```
/**
 * Usual meta-IF
 * Chooses between two template parameters dependent on a given static
 * boolean value.
 *
 *  @tparam b The static boolean value to check
 *  @tparam T The class chosen when b yields true
 *  @tparam E The class chosen when b yields false
 */
template <bool b, class T, class E>
struct IF;

/**
 * Specialization for IF<true,T,E>. Chooses T for typedef RET.
 */
template <class T, class E>
struct IF<true,T,E> {
   typedef T RET;
};

/**
 * Specialization for IF<false,T,E>. Chooses E for typedef RET.
 */
template <class T, class E>
struct IF<false,T,E> {
   typedef E RET;
}; 
```

（代码取自[C++ 中的静态接口，Brian McNamara 和 Yannis Smaragdakis](http://www.oonumerics.org/tmpw00/mcnamara.pdf)）

# eclipse - Eclipse：该项目未构建，因为源文件......无法读取

> ID：10786594
> 
> 赞同：27
> 
> 时间：2012-05-28T14:53:16.873
> 
> 标签：eclipse

编译我的 Java 项目时，我在其他错误中收到此错误：

```
Description Resource    Path    Location    Type
The project was not built since the source file /PROJECT/src/main/org/../ABC.java could not be read PROJECT     Unknown Java Problem 
```

实际上，该文件已在包资源管理器中列出，但仅显示“检索内容描述时出错。在文件系统上，静默目录存在但文件不存在；git status 没有丢失任何内容。如何解决该编译错误？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-01T10:46:12.660

只需重新启动 eclipse，刷新所有项目并进行干净的构建。那应该解决它。不要忘记重启 Eclipse，否则无论你进行多少次干净的构建或刷新，它都无法解决问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-22T07:22:18.347

Looks like someone has deleted that file but eclipse still think that file is part of the project. Might have happened when someone deleted a file from the source control in an improper way.

If you dont have pending changes then you can get fresh copy of the project and import it into your workspace.

If you have pending changes then take a copy of changes and repeat above step. ( A restart of eclipse may be necessary)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-22T18:21:51.787

它可能与缺少位置有关选择文件 => 属性 => 资源 => 编辑文件位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T11:29:05.900

如果您正在编写 Maven 项目，请尝试右键单击该项目并选择 [Maven] -> [Update Project...] 它适用于我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-19T20:14:52.913

我知道答案已被接受，但在我的情况下，该解决方案对我不起作用，我已将文件从备份恢复到我在 linux 中的本地项目，并且我恢复的文件归 root 所有，只有所有者能够读取/写文件。所以，我 sudo chowned 文件“sudo chown _R myUser:myUser *”在我的项目的基础上，在 Eclipse (f5) 中刷新，我构建的烦人的反复失败已经成为过去。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-09T16:22:48.327

对于任何使用 VS Code 和 RedHat Java 插件（在后台使用 Eclipse 工具）的人，我也遇到了这个错误。我修复了以下内容：

```
# Quit VS Code
rm -rf ~/Library/Application\ Support/Code/User/workspaceStorage/*
# Reopen VS Code 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-07T08:46:04.547

如果在链接资源中仍然提到丢失的文件，那么刷新和重新启动 Eclipse 将永远无法解决问题。您必须删除项目属性链接资源列表中的文件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-13T12:34:52.020

对我来说，有一个与这里提到的不同的解决方案。

我拒绝了，我导入了一个具有 .project 文件的项目，并且我的 eclipse 版本读取某些文件的方式出现了一些错误。包名和文件有一点！黄色背景的符号。

解决方案是删除包。明明做好备份。但是在大多数情况下，文件和包都被删除了。相反，eclipse 刷新并且所需的文件在那里。有时我不得不点击刷新 (F5)，有时我不得不恢复文件。

我发现最好删除这些包，因为那是 eclipse 读取数据的地方。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-28T14:18:27.957

正如所有其他人所说，这很可能是*Eclipse*内部缓存的问题。

我通常使用附加选项重新启动 IDE，**`-clean`**以清除与 OSGi 相关的缓存，然后*清理*并重建所有项目。

如果问题仍然存在，我意识到清理单个影响项目比清理整个工作区效果更好。（不祥的... XD）

* * *

[*在启动Eclipse*之前合并意味着重命名或删除源文件的更改时，这通常发生在我身上。]

# c++ - osx 语言环境错误？

> ID：10786597
> 
> 赞同：1
> 
> 时间：2012-05-28T14:53:27.950
> 
> 标签：c++, macos, locale

我想移植我们的应用程序（适用于 Windows、Linux、Solaris、AIX 等），但我对语言环境有很多问题。此代码适用于除 OSX 之外的所有平台：

```
#define SIZE 1000

int main(int argc, const char * argv[])
{    
    char dest[SIZE];
    wchar_t *dptr = L"árvíztűrőtükörfúrógép";
    size_t count = SIZE;
    size_t length;

    setlocale(LC_CTYPE, "");

    length = wcstombs(dest, dptr, count);
    printf("%d characters were converted.\n", length);
    printf("The converted string is \"%s\"\n\n", dest);
} 
```

请帮帮我，以 ISO-8859-2 编码在终端中打印该文本！

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:38:07.173

Apple Macintosh 既不使用 ISO 8859-1 也不使用 ISO 8859-2 编码。相反，Apple 使用专有代码表，即 MacRoman 用于西欧语言，MacCentralEuropean 用于东欧语言。Macintosh 上的 WWW 浏览器（Netscape Navigator 2 和更高版本，以及 Microsoft Internet Explorer 2.1）自动执行从 Internet 上使用的 ISO 8859 编码到 Macintosh 本地字符集的重新编码。

取自这里： http: [//nl.ijs.si/gnusl/cee/iso8859-2.html](http://nl.ijs.si/gnusl/cee/iso8859-2.html)

这是您需要的：[http ://en.wikipedia.org/wiki/Mac_OS_Roman](http://en.wikipedia.org/wiki/Mac_OS_Roman)

这是 UTF-8 <-> MacRoman 转换代码：[http ://alienryderflex.com/utf-8/](http://alienryderflex.com/utf-8/)

只有“u”和“o”的修饰符（插入这些字母之后）来获得“ő”和“ű”字符。

请参阅此处的表格[http://www.alanwood.net/demos/macroman.html](http://www.alanwood.net/demos/macroman.html)

"˝", Code=0xFD, U+02DD, "双重音", 间距修饰字母

（“思考不同”在行动）

# java - 一种返回3种格式数据的方法

> ID：10786603
> 
> 赞同：1
> 
> 时间：2012-05-28T14:53:48.217
> 
> 标签：java

我有这种格式的日期 2009-09-17T00:00:00.000-35:00 。根据我的应用程序的业务规则，我编写了 3 种方法，它们将接受此日期并返回 MM/yyyy、yyyyMM 和 dd 中的日期。

例如，一种方法如下所示 MM/yyyy

```
private String getMonthYear(String date) throws Exception {
        DateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS", Locale.US);
        String s1 = date;
        String s2 = null;
        Date d;
        try {
            d = sdf.parse(s1);
            s2 = (new SimpleDateFormat("MM/yyyy")).format(d);

        } catch (ParseException e) {
            e.printStackTrace();
        }
        return s2;
    } 
```

同样，我还有其他两种方法可以返回 yyyyMM 和 dd 格式的数据？？

这很好用，但看起来不太好

我的问题是我们可以只有一个实用程序满足我的要求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T14:57:07.390

> 我的问题是我们可以只有一个实用程序满足我的要求吗？

我认为你从错误的方式开始。从根本上说，数据只是*一个日期*。您可以稍后在需要时应用格式。我建议你开始使用[Joda Time](http://joda-time.sf.net)并让你的方法返回一个[`LocalDate`](http://joda-time.sourceforge.net/api-release/org/joda/time/LocalDate.html). 这捕获了所有真实信息，然后您可以随时使用三个单独[`DateTimeFormatter`](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormatter.html)的对象来格式化值。

尽可能使用最自然地表示真实信息的类型来表示数据。尽早将您的数据转换为该自然格式，并保持该格式，直到您*必须*将其转换为其他内容（例如字符串）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T14:56:50.620

您可以定义一个方法并接收具有预期日期格式的字符串作为参数，具有格式的三个字符串可以定义为常量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:17:10.580

[Apache Commons Lang](http://commons.apache.org/lang/)库已经为您提供了实用方法。例如：

```
import org.apache.commons.lang.time.DateFormatUtils;
import org.apache.commons.lang.time.DateUtils;
///
// first, convert the string to a date object
Date parsedDate = DateUtils.parseDate("2012-05-25T16:10:30.000", 
                                      new String[] {"yyyy-MM-dd'T'HH:mm:ss.SSS"});

// now, format the date object to a string, using different formats
String formattedDate = DateFormatUtils.format(parsedDate, "MM/yyyy");
String formattedDate2 = DateFormatUtils.format(parsedDate, "yyyyMM"); 
```

查看[DateFormatUtils](http://commons.apache.org/lang/api/org/apache/commons/lang3/time/DateFormatUtils.html)和[DateUtils](http://commons.apache.org/lang/api/org/apache/commons/lang3/time/DateUtils.html)了解更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-28T14:58:58.287

是的，您可以将这三种方法组合在一起，并使用附加参数（例如枚举）来指定您想要的输出格式。但我不会那样做。您的解决方案更清洁。为什么觉得不好看？

但是，我要做的是一劳永逸地将字符串转换为日期，并在任何地方使用日期而不是字符串，并使用您的 3 种方法之一转换日期（这会将日期作为参数而不是字符串）在需要时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T15:03:22.537

您可以只拥有一个具有三种方法的 Date 类。如下所示：

```
public class MyDate {

    private String date = null;

    public MyDate(String date) { 
        this.date = date;
    }

    public String getMonthYear() {
        return null;
    }

    public String getYearMonth() {
        return null;
    }

    public String getDay() {
        return null;
    }
} 
```

您可以在构造函数中将字符串格式化为三个不同的字符串，然后在方法调用中返回这些字符串。如果您对同一日期字符串进行多次/重复调用，该实现会很好。或者你可以在方法调用中格式化字符串，如果你只做一次，但如果你只做一次，你可能想让类/方法静态并摆脱构造函数。

# .net - XUnit 方面的功能

> ID：10786604
> 
> 赞同：2
> 
> 时间：2012-05-28T14:53:57.720
> 
> 标签：.net, xunit

[WhyDidWeBuildXUnit](http://xunit.codeplex.com/wikipage?title=WhyDidWeBuildXunit&referringTitle=Home)文章指出有 Aspect-Like 功能，它允许将一些行为附加到测试方法。我搜索了它的任何例子都没有成功。有没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-04T16:00:43.697

该评论与[BeforeAfterTestAttribute 相关](https://github.com/xunit/xunit/blob/master/src/xunit.core/Sdk/BeforeAfterTestAttribute.cs)。

下面是一个例子：[自动回滚数据库操作](https://github.com/xunit/samples.xunit/blob/master/AutoRollbackExample/AutoRollbackAttribute.cs)。

# javascript - ExtJS 3.2：网格列标题分组

> ID：10786606
> 
> 赞同：2
> 
> 时间：2012-05-28T14:54:14.093
> 
> 标签：javascript, gridview, extjs

ExtJS 3.2 网格列标题分组在 Google Chrome 19 中不正确，但在其他版本中有效。示例： http: [//myext.cn/ext-3.2.1/examples/grid/ColumnHeaderGroup.html](http://myext.cn/ext-3.2.1/examples/grid/ColumnHeaderGroup.html)。
谷歌浏览器 19： ![在此处输入图像描述](../Images/4cecd4f844959de0d64c252dcaf25e46.png) Mozilla；铬 17,18： ![在此处输入图像描述](../Images/0761dd3a661ce0328688e27ecc5e3b49.png)

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:17:36.277

答案在这个 Sencha 论坛帖子中：[http ://www.sencha.com/forum/showthread.php?198124-Grids-are-rendered-differently-in-upcoming-versions-of-Google-Chrome](http://www.sencha.com/forum/showthread.php?198124-Grids-are-rendered-differently-in-upcoming-versions-of-Google-Chrome)

或者我已经完成了自己的解决方案（主要基于此的其他解决方案的综合：[https](https://code.google.com/p/chromium/issues/detail?id=124816#c29) ://code.google.com/p/chromium/issues/detail?id=124816#c29 ）

添加到您的 CSS：

```
/* Chrome 19+ bugfix for grids; Works with Chrome 21+
 * @url http://www.sencha.com/forum/showthread.php?198124-Grids-are-rendered-differently-in-upcoming-versions-of-Google-Chrome&p=809242&viewfull=1#post809242
 * @url http://www.sencha.com/forum/showthread.php?198124-Grids-are-rendered-differently-in-upcoming-versions-of-Google-Chrome&p=823517&viewfull=1#post823517
 * @url 

*/
@media screen and (-webkit-min-device-pixel-ratio:0) { 
    .x-grid3-cell, /* Normal grid cell */
    .x-grid3-gcell /* Grouped grid cell (esp. in head)*/
    {
        box-sizing: border-box;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T20:33:44.370

示例/ux/ColumnHeaderGroup.js:383 `tw = this.getTotalWidth()`-> `970px`。所有十个`.x-grid3-hd-row td`都有`style="width: 97px"`，但每个列标题的实际大小是`99px`: `97`by given `width`and `2`for left and right borders。在 Firefox 中，我看到的样式是`95px`所有标题都可以渲染。

所以我认为这是某种与`box-sizing`表格中相应的列宽计算相关的旧 ExtJS 错误。

# wpf - WPF - DataGrids 中的样式超链接

> ID：10786608
> 
> 赞同：4
> 
> 时间：2012-05-28T14:54:18.427
> 
> 标签：wpf, xaml, wpfdatagrid

我需要在 WPF4 DataGrid 控件中设置超链接的样式（它们出现在 DataGridHyperlinkColumn 类型的列中）。我在项目中有许多 DataGrid，并希望将超链接样式应用于所有这些。

我找到了这个问答：[WPF Style DataGridHyperlinkColumn](https://stackoverflow.com/questions/10739766/wpf-style-datagridhyperlinkcolumn)并为 HyperLink 控件创建了样式：

```
<Style TargetType="{x:Type Hyperlink}">
    <Setter Property="TextDecorations" Value="" />
</Style> 
```

它工作正常，但显然它也会影响所有其他超链接，例如。在

```
<TextBlock>
    <Hyperlink NavigateUri="http://www.google.co.in">Click here</Hyperlink>
</TextBlock> 
```

如何仅针对 DataGrids 中的超链接？在 CSS 语法中，它类似于

```
DataGrid Hyperlink {TextDecorations: ""; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:13:29.973

由于属性值继承，所有链接实例都会继承您创建的样式，因为您没有使用**x:key**属性。

您可以添加[x:Key](http://msdn.microsoft.com/en-us/library/ms742804.aspx)属性：

```
<Style TargetType="{x:Type Hyperlink}" x:Key="HyperlinkStyle1">
    <Setter Property="TextDecorations" Value="" />
</Style> 
```

通过使用它，您可以从您的控件中引用它，如下所示：

```
<Hyperlink NavigateUri="http://www.google.co.in" Style={StaticResource HyperlinkStyle1}>Click here</Hyperlink> 
```

# c++ - FLTK简单动画

> ID：10786612
> 
> 赞同：2
> 
> 时间：2012-05-28T14:54:38.637
> 
> 标签：c++, user-interface, animation, fltk

我可以成功编译并运行 Hello World 代码。现在我想做一些类似动画的事情。

我首先创建一个矩形类来从 Fl::widget 实现 draw()

```
class myRect: public Fl_Widget {
private:
    Fl_Color color;
    void draw(){
        fl_color(color);
        fl_rectf(x(),y(),w(),h(),color);
    }
public:
    myRect(int X,int Y,int W,int H, Fl_Color c) : Fl_Widget(X,Y,W,H),color(c) {}
};

int main (int argc, char ** argv)
{
    Fl_Window *window = new Fl_Window (300, 180, "FLTK Test");

    vector<myRect*> allRect;
    for(int i=0; i<10; ++i){
        allRect.push_back(new myRect ((i*10)%100,100,50,50,i%256));
    }
    window->end();
    window->show();

    return Fl::run();
} 
```

上面的代码可以按我的预期运行。但是现在我想一个一个地显示矩形，有一些时间间隔，比如 1 秒。让它像动画一样。

我已经阅读了官方文档，但我仍然对此一无所知。请给我一些信息。谢谢 ！！

* * *

感谢 DejanLekic，我修改了我的代码如下：

```
#include <iostream>
#include <vector>
#include <FL/Fl.H>
#include <FL/Fl_Widget.H>
#include <FL/Fl_Double_Window.H>
#include <FL/fl_draw.H>

using namespace std;

class myRect: public Fl_Widget {
private:
    Fl_Color color;
    void draw(){
    fl_color(color);
    fl_rectf(x(),y(),w(),h(),color);
}

public:
    myRect(int X,int Y,int W,int H, Fl_Color c)
        :Fl_Widget(X,Y,W,H),color(c) {}
};

vector<myRect*> allRect;

void winUpdate(void *data)
{
    static unsigned i = 0;
    Fl_Double_Window *o = (Fl_Double_Window*)data;
    if(i < allRect.size()){
        o->add(allRect[i]);
        if(i>=3) o->remove(allRect[i-3]);
        o->redraw();
        Fl::add_timeout(0.5,winUpdate,data);
        ++i;
    }
}

int main (int argc, char ** argv)
{
    for(int i=0; i<8; ++i){
        allRect.push_back(new myRect(i*30,i*30,50,50,i));
    }
    Fl_Double_Window *window = new Fl_Double_Window (400, 400, "FLTK Test");
    Fl::add_timeout(2,winUpdate,window);
    window->end();
    Fl::visual(FL_DOUBLE|FL_INDEX);
    window->show();
    return Fl::run();
} 
```

它似乎运行良好，但我不确定它是否正确。如果有任何问题，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T18:01:54.713

科里，你走在正确的道路上。

这是一个完整的示例，如何使用 FLTK 的绘图功能制作简单的 2D 动画：http: [//seriss.com/people/erco/fltk/#AnimateDrawing](http://seriss.com/people/erco/fltk/#AnimateDrawing)

使用 OpenGL 的类似事情：http: [//seriss.com/people/erco/fltk/#OpenGlInterp](http://seriss.com/people/erco/fltk/#OpenGlInterp)

在这两个示例中，关键在于`Fl::add_timeout(0.25, Timer_CB, (void*)this);`行和`Timer_CB()`静态（回调）方法。这两个例子都很好而且简单，我相信你会立即理解它们。

# jquery - mvc3 jquery客户端自定义验证未运行

> ID：10786613
> 
> 赞同：1
> 
> 时间：2012-05-28T14:54:42.603
> 
> 标签：jquery, asp.net-mvc-3

在过去的两天里，我一直在尝试让客户端自定义验证在 ASP.Net MVC3 上工作。我已经按照[此处](http://johnmj.wordpress.com/2011/02/25/unobtrusive-custom-validator-for-mvc3/)、[此处](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)、[此处](http://www.codeproject.com/Articles/275056/Custom-Client-Side-Validation-in-ASP-NET-MVC3)和[此处](https://stackoverflow.com/questions/6425718/jquery-custom-validation-problem-in-mvc-3)的示例进行操作，但无法使其运行。有人可以看看我的（当前）代码，如果您发现任何错误，请告诉我，任何帮助将不胜感激

Web.Config 将 ClientValidationEnabled 和 UnobtrusiveJavaScriptEnabled 都设置为 true

_Layout.cshtml 引用文件如下

```
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/DateFormatValidator.js")" type="text/javascript"></script> 
```

服务器端验证类定义如下

```
public class DateFormatValidation : ValidationAttribute, IClientValidatable
{
    public string ValidDateFormat { get; set; }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var modelClientValidationRule = new ModelClientValidationRule
        {
            ValidationType = "validatedate",  // the name of the validation rule as specified in DateFormatValidator.js
            ErrorMessage = LocalisationStrings.InvalidDateFormat
        };

        modelClientValidationRule.ValidationParameters["name"] = ValidDateFormat;
        yield return modelClientValidationRule;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {            
        var dateString = (string) value;
        if(String.IsNullOrEmpty(dateString))
        {
            return ValidationResult.Success;
        }

        // if we can't convert to a date based on the current culture then we will get a null back from the ConvertLocalDateFormatToISO extension method
        if(String.IsNullOrEmpty(dateString.ConvertLocalDateFormatToISO()))
        {
            return new ValidationResult(LocalisationStrings.InvalidDateFormat);
        }
        return ValidationResult.Success;
    }
} 
```

视图模型定义如下

```
public class SearchViewModel : ElectronicDocument
{

    #region Properties

    [DateFormatValidation(ValidDateFormat="validatedate")] // addig the paramter to the attribute is just a test to get this to work
    public string DueDateFrom
    {
        get;            
        set;             
    }

    [DateFormatValidation]
    public string DueDateTo
    {
        get;
        set;             
    } 
```

客户端验证脚本如下：

```
(function ($) {
$.validator.addMethod('validatedateformat', function (value, element, param) {
    if (!value) { return true; }
    try {
        var isValidDate = false;
        /* - CheckDateValidFormat is available from the base controller class  */
        $.get('CheckDateValidFormat(' + value +')',
            function (data) {                  
                isValidDate = data;
            });
        if (isValidDate) {
            return true;
        }
        return false;
    }
    catch (e) {
        return false;
    }
});

$.validator.unobtrusive.adapters.add('validatedate', ['name'], function (options) {
    options.rules["validatedateformat"] = options.params.name;
    if (options.message) options.messages["validatedateformat"] = options.message;
}); 
```

} (jQuery));

最后，视图如下所示：

```
<td style="font-size:10px; white-space:nowrap; color: #666">               
           @Html.TextBox("DocumentDateFrom", Model.DocumentDateFrom, new { @class = "date", style = "width:90px;" })
        to @Html.TextBox("DocumentDateTo", Model.DocumentDateTo, new { @class = "date", style = "width:90px;" })</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:07:22.693

你包括`jquery-1.8.11.min.js`. 这个版本的 jQuery 不存在，因为最新版本是 1.7.2。

我怀疑您包含**jQuery UI**（最新版本 1.8.20）并且您认为那是**jQuery**。确保您使用的是正确的文件。

# java - 从检索碧玉报告中的两个实体的查询中获取值

> ID：10786614
> 
> 赞同：1
> 
> 时间：2012-05-28T14:55:00.973
> 
> 标签：java, jpa, jasper-reports, ireport

我正在将 ireport 4.1.1 与 hibernate jpa 一起使用，并且我有一个检索两个实体的查询：

```
select a,b from TableA a left join a.tableBList b 
```

我试图在java中获取a和b的值，它返回一个包含两个项目的对象数组（Object []），但是当我尝试在jasper报告上执行此操作时，它给了我这个错误：

```
Exception in thread "main" net.sf.jasperreports.engine.JRRuntimeException: net.sf.jasperreports.engine.JRException: Error retrieving field value from bean : fieldName 
```

我认为我只需要将 fieldName 替换为将要返回的对象的名称，但我不知道，我试图找到它但我没有成功，你们中的任何人都可以帮助我吗？？？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:04:22.437

此错误是因为您的数据未与 beans 属性映射，或者您的数据模式不符合 beans 属性。我在我的java项目中遇到了同样的问题。我整理出你的数据应该是一个正确的二维数组形式，然后我从某个地方获取样本数据并做了这个

```
String[][] data =
{{ "N263Y", "T-11", " 39 ROSCOE TRNR RACER"},
{ "N4087X", "BA100-163", "BRADLEY AEROBAT"},
{ "N43JE", "HAYABUSA 1", "NAKAJIMA KI-43 IIIA"},
{ "N912S", "9973CC", "PA18-150"}};

        JTable m = new JTable(data,headers);
try {

            JasperReport jasperReport = JasperCompileManager.compileReport(fileName);

            if(jasperReport != null )
               System.out.println("so far so good ");

            // Fill the report using an empty data source

            JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, params, new JRTableModelDataSource(m.getModel()) );//create());//con.connection);
            try{
            JasperExportManager.exportReportToPdfFile(jasperPrint, outFileName);
            System.out.printf("File exported sucessfully");
            }catch(Exception e){
                e.printStackTrace();
            }
            JasperViewer.viewReport(jasperPrint);

        } catch (JRException e) {
            JOptionPane.showMessageDialog(null, e);
            e.printStackTrace();
            System.exit(1);
        } 
```

**笔记：**

您的字段名称应以小写字母开头，而且字段名称应与您在该数据中提供的列名称一样小。

希望这会帮助你。

# html - 让 nginx 将 html 片段存储到 memcached

> ID：10786617
> 
> 赞同：0
> 
> 时间：2012-05-28T14:55:20.263
> 
> 标签：html, caching, nginx, memcached, fragment

目前正在做一个全球志愿者网站，网页或多或少会有很多静态内容，比如导航页、页眉和页脚。

我想知道是否有可能以某种方式指示 nginx 将这些静态文件存储到内存缓存中。我已经看到了多种向 memcache 添加值的方法（无论是涉及 PHP、python 还是 nginx 上的 enchanced_memcached_module），但我似乎找不到使用 memcached 模块（增强型或原始模块）来解析的方法将整个文件放入 memcache。

或者，还有其他更好的方法吗？我目前正试图避免安装另一个缓存的想法，比如 Varnish。

干杯。

**编辑**

为了清楚起见，我目前使用 nginx 1.3.0 作为我的前端......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:30:51.720

你可能想看看：

[内存缓存 nginx](http://technosophos.com/content/53900-speedup-nginx-drupal-and-memcache-bring-concurrency-and-page-load-time-way-down)

和

[Nginx memcached 静态文件](http://www.kutukupret.com/2011/05/12/nginx-memcached-module-and-php/)

# git - 合并时使用 git 从以前的提交中获取文件。效率

> ID：10786620
> 
> 赞同：1
> 
> 时间：2012-05-28T14:55:29.757
> 
> 标签：git

我合并到main，我不满意。例如 foo.c 不是我想要的版本，我想要一个来自分支“bar”上的提交“blah”的版本。我现在要做的是在分支“bar”上签出“blah”，在文本编辑器中复制文件 foo.c 中的所有内容，再次签出 main，打开我不喜欢的 foo.c 版本，然后通过粘贴来破坏它我正在复制的内容。

一定有更好的方法。

有什么见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T14:58:42.417

`git checkout bar -- foo.c` 将只签出`foo.c`分支中的文件，`bar`而不会触及工作树中的其他文件。

这[在`git checkout`](http://schacon.github.com/git/git-checkout.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T20:42:18.427

```
 git checkout bar path/to/foo.c 
```

应该这样做。但是，如果您想查看 foo.c 包含的内容，可以使用`git show`：

```
 git show <some sha1 or other reference>:path/to/foo.c 
```

所以要查看文件包含 2 次提交前的内容，您可以：

```
 git show HEAD^^:path/to/foo.c 
```

当前提交的副本可以缩短为：

```
 git show :path/to/foo.c 
```

# loops - 这两个 Clojure 代码块有什么区别？

> ID：10786622
> 
> 赞同：2
> 
> 时间：2012-05-28T14:55:35.763
> 
> 标签：loops, clojure

在处理 Clojure Koans 时，我不得不迭代地计算一个数字的阶乘，我确实找到了解决方案，但我对 2 个解决方案之间的区别有疑问，一个有效，一个无效，虽然我没有不明白为什么：

**一个有效的：**

```
(defn factorial [n]
   (loop [n n
         acc 1]
     (if (zero? n)
      acc
      (recur (dec n) (* n acc )))
 ) 
```

**没有的那个：**

```
(defn factorial [n]
   (loop [n n
         acc 1]
     (if (zero? n)
      1
      (recur (dec n) (* n acc )))
 ) 
```

请注意，唯一的区别是如果满足条件，则 If 块的返回值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T15:02:20.800

第二个`factorial`函数总是返回`1`。该代码使用累加器变量 ( `acc`) 构建，第一个代码块通过返回此累加器变量来正确处理它。

但是，如果不使用累加器变量，则`factorial`可以编写一个函数来返回。`1`由于此方法没有使用`loop`/ `recur`，因此很容易导致堆栈溢出： try `(fact 5000)`。

```
(defn factorial [x]
  (if (<= x 1)
      1
      (* x (factorial (- x 1))))) 
```

（[来源](https://stackoverflow.com/questions/1662336/clojure-simple-factorial-causes-stack-overflow)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:54:33.027

很难弄清楚您认为应该发生什么才能使问题有意义。我想也许你认为`loop`做的比它做的更多？您的代码几乎等同于：

```
(defn factorial 
  ([n] (factorial n 1)
  ([n acc] 
    (if (zero? n)
      acc
      (recur (dec n) (* n acc))))) 
```

这是一个堆栈安全的版本

```
(defn factorial 
  ([n] (factorial n 1)
  ([n acc] 
    (if (zero? n)
      acc
      (factorial (dec n) (* n acc))))) 
```

所以`acc`(or `1`) 是函数返回的最终值。

所做`loop`的只是为 提供不同的目标`recur`，如果您在函数的开头和要重复的点之间有一些代码，这很有用。它基本上是一个 goto 的标签。

# php - PDO 验证登录数据

> ID：10786623
> 
> 赞同：0
> 
> 时间：2012-05-28T14:55:43.753
> 
> 标签：php, mysql, sql, pdo

好的..我对这个 PDO 的东西完全陌生..我试图将我的 mysql 脚本（工作）重新创建为一个 PDO 脚本（不工作）..我已经测试了我的数据库登录信息是否正确编程为 PDO..

这是我的 PDO 脚本...

```
<?

session_start();
//connect to DB
require_once("connect.php");

//get the posted values
$email=htmlspecialchars($_POST['email'],ENT_QUOTES);
$pass=md5($_POST['psw']); 

//now validating the email and password
$sql - $conn_business->prepare( "SELECT email, password FROM members WHERE email='".$email."'");
$sql -> execute();
$count = $sql->rowCount();
$result = $sql -> fetch();
// Now use $result['rowname'];

$stmt = $conn_business->prepare("SELECT * FROM members WHERE email='".$email."'");
$stmt ->execute();
$act = $stmt -> fetch();

//if email exists
if($count > 0)
{
//compare the password
if(strcmp($result["password"],$pass)==0)
{
    // check if activated
    if($act["activated"] == "0")
    {
        echo "act"; //account is not activated yet
    }
    else
    {
        echo "yes"; //Logging in
        //now set the session from here if needed 
        $_SESSION['email'] = $email;
    }
}
else
        echo "no"; //Passwords don't match
}
else
    echo "no"; //Invalid Login

?> 
```

这是我的旧 mysql 脚本...

```
session_start();
require_once("connect.php");
//get the posted values
$email=htmlspecialchars($_POST['email'],ENT_QUOTES);
$pass=md5($_POST['psw']); 

//now validating the username and password
$sql="SELECT email, password members WHERE email='".$email."'";
$result=mysql_query($sql);
$row=mysql_fetch_array($result); 

$sql2="SELECT * FROM members WHERE email='".$email."'";
$result2=mysql_query($sql2);
$row2=mysql_fetch_array($result2);
$act = $row2['activated'];

//if username exists
if(mysql_num_rows($result)>0)
{
    //compare the password
    if(strcmp($row['password'],$pass)==0)
    {
        // check if activated
        if($act == "0")
        {
            echo "act";
        }
        else
        {
            echo "yes";
            //now set the session from here if needed 
            $_SESSION['email'] = $email;
        }
    }
    else
            echo "no";
}
else
        echo "no"; //Invalid Login 
```

有谁知道，我做错了什么？它是一个自动脚本。它通过 AJAX 调用，并根据“否”、“是”和“行为”返回数据，告诉 AJAX/jQuery 脚本该做什么。正如我所说 - mysql 脚本正在工作，所以请如果有人能告诉我我在 PDO 脚本上做错了什么..

编辑：

当它将数据返回到 jQuery 脚本时，应该会发生这种情况：如果是：启动会话，重定向到 page2.php 并启动​​会话。else if act: 填写账户未激活的字段。否则：写那个电子邮件和密码不匹配。

问题是，当我尝试写正确的电子邮件和密码时 - 它继续写：“电子邮件和密码不匹配”而不是重定向。当我说它不起作用时，这是因为 mysql脚本按照描述执行，但 PDO 脚本没有..

我试图改变'回声“不”;' '回应“是”;' 看看登录是否会开始，但不知何故它继续写电子邮件和密码不匹配..

解决方案：

我没有告诉这个，因为我认为这是不必要的，但它不起作用的原因是因为我在页面顶部的注释标记中有我的旧 mysql 代码，所以 session_start 命令不起作用..删除旧代码后它可以工作，但后来我发现还有其他要更改的地方，那就是在 PDO 脚本中验证它时说： $sql - $conn_business->prepare("SELECT email, password FROM members WHERE电子邮件='".$email."'"); 然后我只是将 $sql 之后的 '-' 更改为 '=' 现在，一切正常...无论如何谢谢大家.. 希望这段代码可以帮助其他人..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:14:34.107

我相信你的脚本中的第二个查询不是必需的，你可以简单地做

```
 SELECT * FROM members WHERE email=:EMAIL AND password=:PWS; 
```

使用**bindParam**方法

```
 $qCredentials->bindParam(":EMAIL",$EMAIL);
   $qCredentials->bindParam(":PWS",$PWS); 
```

然后做更多**不稳定**的输出而不是*是*或*否*..
尝试*“无法登录：提供的凭据无效”*用于无效类型的值或
*“无法登录：无效的凭据，找不到用户”*用于无效的用户凭据。
您可以在用户成功登录您的 IF 条件返回**yes**后尝试启动会话，并且方法

```
$PDOstatement->debugDumpParams()
$PDOstatement->errorInfo()
$PDOstatement->errorCode() 
```

将帮助您了解查询出了什么问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:20:22.937

在“开始使用”PDO 之前，您是否阅读过手册？

*   这不是应该如何使用准备好的语句！您的代码充满了 SQL 注入。
*   你为什么选择同一行两次？
*   [strcmp()](http://php.net/manual/en/function.strcmp.php)不用于检查一个字符串**是否**与另一个相同。
*   将密码散列为简单的 MD5 只是一个恶作剧。

    ```
    session_start();

    //very stupid way to acquire connection
    require_once("connect.php");

    //get the posted values
    $email = htmlspecialchars($_POST['email'],ENT_QUOTES);
    if (filter_var( $email, FILTER_VALIDATE_EMAIL))
    {
        // posted value is not an email
    }

    // MD5 is not even remotely secure
    $pass = md5($_POST['psw']); 

    $sql = 'SELECT email, password, activated FROM members WHERE email = :email';

    $statement = $conn_business->prepare($sql);
    $statement->bindParam(':email', $email, PDO::PARAM_STR);

    $output = 'login error';

    if ($statement->execute() && $row = $statement->fetch())
    {
        if ( $row['password'] === $pass )
        {
            // use account confirmed
            if ( $row['activated'] !== 0 ) {
                $output = 'not activated';
                $_SESSION['email'] = $email;
            }

            $output = 'logged in';
        }
    }

    echo $output; 
    ```

# c# - 在 SQL SELECT 参数中使用会话数据

> ID：10786633
> 
> 赞同：0
> 
> 时间：2012-05-28T14:56:54.627
> 
> 标签：c#, asp.net, sql

好的，所以我有以下标记：

这里我有一个由一些 SQL 查询填充的列表框。

```
 <asp:ListBox ID="MyListBox" runat="server" 
                DataSourceID="MyDataSource" DataTextField="Field1" DataValueField="ID" ></asp:ListBox>
            <asp:SqlDataSource ID="MyDataSource" runat="server" 
                ConnectionString="<%$ ConnectionStrings:MyConnectionString %>" 

                SelectCommand="SELECT [ID], [Field1] FROM [Table1] WHERE ([ID2] = @ID2)">
                <SelectParameters>
                    <asp:SessionParameter Name="ID2" 
                        SessionField="ID2" DbType="Guid"/>
                </SelectParameters>
            </asp:SqlDataSource> 
```

我有几个问题：

列表框始终为空，当我尝试测试查询时，它总是显示一个对话框，要求我输入“Type”“DbType”和“Value”。我不太确定在这里选什么。

我已经尝试运行该应用程序，确保在正确的密钥中有所需的会话数据。（`Session["ID2"]`已经给出了一个`Guid`）。但是，当我到达列表框时，它是空的，即使我可以查看表数据并知道应该在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:29:10.427

我已经解决了这个问题。基本上，我假设查询应该在不应该完成的时候返回结果。此外，其中的数据`Field1`是一个空字符串。因此，当它确实返回结果时，我不会在 ListBox 中看到任何内容。

# java - 使用 JMS 临时队列进行同步使用是一种好习惯吗？

> ID：10786636
> 
> 赞同：24
> 
> 时间：2012-05-28T14:57:06.837
> 
> 标签：java, jakarta-ee, architecture, jms, ibm-mq

如果我们使用“临时队列”来使用 JMS 请求/回复机制，那么该代码是否具有可扩展性？

到目前为止，我们不知道我们是否会支持每秒 100 个请求，或者每秒 1000 个请求。

下面的代码是我正在考虑实现的。它以“同步”方式使用 JMS。关键部分是创建“消费者”以指向为此会话创建的“临时队列”的位置。我只是不知道使用这种临时队列是否是一种可扩展的设计。

```
 destination = session.createQueue("queue:///Q1");
  producer = session.createProducer(destination);
  tempDestination = session.createTemporaryQueue();
  consumer = session.createConsumer(tempDestination);

  long uniqueNumber = System.currentTimeMillis() % 1000;
  TextMessage message = session
      .createTextMessage("SimpleRequestor: Your lucky number today is " + uniqueNumber);

  // Set the JMSReplyTo
  message.setJMSReplyTo(tempDestination);

  // Start the connection
  connection.start();

  // And, send the request
  producer.send(message);
  System.out.println("Sent message:\n" + message);

  // Now, receive the reply
  Message receivedMessage = consumer.receive(15000); // in ms or 15 seconds
  System.out.println("\nReceived message:\n" + receivedMessage); 
```

**更新：**

我遇到了另一种模式，请参阅[此博客](http://codedependents.com/2010/03/04/synchronous-request-response-with-activemq-and-spring/) 该想法是对发送和接收使用“常规”队列。但是对于“同步”调用，为了获得所需的响应（即匹配请求），您创建一个使用“选择器”侦听接收队列的消费者。

脚步：

```
 // 1\. Create Send and Receive Queue.
    // 2\. Create a msg with a specific ID
 final String correlationId = UUID.randomUUID().toString();
 final TextMessage textMessage = session.createTextMessage( msg );
 textMessage.setJMSCorrelationID( correlationId );

    // 3\. Start a consumer that receives using a 'Selector'.
           consumer = session.createConsumer( replyQueue, "JMSCorrelationID = '" + correlationId + "'" ); 
```

所以这种模式的不同之处在于我们不会为每个新请求创建一个新的临时队列。相反，所有响应都只到达一个队列，但使用“选择器”来确保每个请求线程都接收到唯一关心的响应。

我认为这里的缺点是您必须使用“选择器”。我还不知道这是否比前面提到的模式更不受欢迎或更受欢迎。想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T01:08:41.183

关于您的帖子中的更新 - 如果在消息头上执行选择器非常有效，就像您使用 Correlation ID 所做的那样。[Spring Integration](http://www.springsource.org/spring-integration)也在内部执行此操作以[实现 JMS 出站网关](https://github.com/SpringSource/spring-integration/blob/master/spring-integration-jms/src/main/java/org/springframework/integration/jms/JmsOutboundGateway.java)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T07:24:58.950

有趣的是，它的可扩展性实际上可能与其他响应所描述的相反。

WebSphere MQ 尽可能保存和重用动态队列对象。因此，虽然动态队列的使用不是免费的，但它确实可以很好地扩展，因为当队列被释放时，WMQ 需要做的就是将句柄传递给下一个请求新队列实例的线程。在繁忙的 QMgr 中，动态队列的数量将保持相对静态，而句柄从线程传递到线程。严格来说，它不如重用单个队列那么快，但也不错。

另一方面，尽管索引`CORRELID`速度很快，但性能与索引中的消息数量成反比。如果队列深度开始建立，它也会有所不同。当应用程序`GET`在`WAIT`一个空队列上运行时，没有延迟。但是在深度队列中，QMgr 必须搜索现有消息的索引以确定回复消息不在其中。在您的示例中，这就是每秒搜索空索引与搜索大索引 1,000 次之间的区别。

结果是 1000 个动态队列，每个队列包含一条消息，实际上可能比具有 1000 个线程的单个队列更快`CORRELID`，具体取决于应用程序和负载的特性。我建议在进行特定设计之前对其进行大规模测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T10:40:17.877

在共享队列上的相关 ID 上使用选择器将非常适合多个消费者。

然而，1000 个请求/秒会很多。如果性能出现问题，您可能希望在不同实例之间稍微分配负载。

您可能想详细说明请求与客户数量。如果客户端数量小于 10 并且将保持相当静态，并且请求数量非常高，那么最具弹性和快速的解决方案可能是为每个客户端设置静态回复队列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T15:50:23.623

创建临时队列不是免费的。毕竟它是在代理上分配资源。话虽如此，如果您有一个未知的（事先）可能不受限制的客户端数量（多个 JVM、每个 JVM 多个并发线程等），您可能别无选择。每次分配客户端队列并将它们分配给客户端将很快失控。

当然，您所描绘的是最简单的解决方案。如果你能得到交易量的真实数字并且它的规模足够大，那很好。

在我考虑避免临时排队之前，我会更多地考虑限制客户数量并让客户长寿。也就是在客户端创建一个客户端池，让池中的客户端在启动时创建临时队列、会话、连接等，在后续请求中复用，在关闭时拆除。然后调整问题成为池的最大/最小大小之一，修剪池的空闲时间是什么，以及当池最大化时的行为是什么（失败与阻塞）。除非您正在创建任意数量的瞬态 JVM（在这种情况下，您会因为 JVM 启动开销而遇到更大的扩展问题），否则它应该可以扩展。毕竟，此时您分配的资源反映了系统的实际使用情况。

要避免的事情是创建和销毁大量无故的队列、会话、连接等。设计服务器端以允许从一开始就进行流式传输。然后在需要时/在需要时进行池化。就像不是一样，对于任何重要的事情，您都需要这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-02T04:23:15.137

使用临时队列每次都会花费创建relyToProducers。与为静态replyToQueue 使用缓存的生产者不同，createProducer 方法成本更高，并且会影响高度并发调用环境中的性能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-02T06:43:36.713

我一直面临同样的问题，并决定自己在无状态 bean 中汇集连接。一个客户端连接有一个 tempQueue，并位于 JMSMessageExchanger 对象（包含 connectionFactory、Queue 和 tempQueue）中，该对象绑定到一个 bean 实例。我已经在 J​​SE/EE 环境中对其进行了测试。但我不太确定 Glassfish JMS 池的行为。它真的会关闭 JMS 连接，在 bean 方法结束后“手动”获得吗？我做错了什么吗？

我还关闭了客户端 bean (TransactionAttributeType.NOT_SUPPORTED) 中的事务以立即将请求消息发送到请求队列。

```
package net.sf.selibs.utils.amq;

import javax.jms.Connection;
import javax.jms.ConnectionFactory;
import javax.jms.DeliveryMode;
import javax.jms.Message;
import javax.jms.MessageConsumer;
import javax.jms.MessageProducer;
import javax.jms.Queue;
import javax.jms.Session;
import javax.jms.TemporaryQueue;
import lombok.Getter;
import lombok.Setter;
import net.sf.selibs.utils.misc.UHelper;

public class JMSMessageExchanger {

    @Setter
    @Getter
    protected long timeout = 60 * 1000;

    public JMSMessageExchanger(ConnectionFactory cf) {
        this.cf = cf;
    }

    public JMSMessageExchanger(ConnectionFactory cf, Queue queue) {
        this.cf = cf;
        this.queue = queue;
    }
    //work
    protected ConnectionFactory cf;
    protected Queue queue;
    protected TemporaryQueue tempQueue;
    protected Connection connection;
    protected Session session;
    protected MessageProducer producer;
    protected MessageConsumer consumer;
    //status
    protected boolean started = false;
    protected int mid = 0;

    public Message makeRequest(RequestProducer producer) throws Exception {
        try {
            if (!this.started) {
                this.init();
                this.tempQueue = this.session.createTemporaryQueue();
                this.consumer = this.session.createConsumer(tempQueue);
            }
            //send request
            Message requestM = producer.produce(this.session);
            mid++;
            requestM.setJMSCorrelationID(String.valueOf(mid));
            requestM.setJMSReplyTo(this.tempQueue);
            this.producer.send(this.queue, requestM);
            //get response
            while (true) {
                Message responseM = this.consumer.receive(this.timeout);
                if (responseM == null) {
                    return null;
                }
                int midResp = Integer.parseInt(responseM.getJMSCorrelationID());
                if (mid == midResp) {
                    return responseM;
                } else {
                    //just get other message
                }
            }

        } catch (Exception ex) {
            this.close();
            throw ex;
        }
    }

    public void makeResponse(ResponseProducer producer) throws Exception {
        try {
            if (!this.started) {
                this.init();
            }
            Message response = producer.produce(this.session);
            response.setJMSCorrelationID(producer.getRequest().getJMSCorrelationID());
            this.producer.send(producer.getRequest().getJMSReplyTo(), response);

        } catch (Exception ex) {
            this.close();
            throw ex;
        }
    }

    protected void init() throws Exception {
        this.connection = cf.createConnection();
        this.session = this.connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
        this.producer = this.session.createProducer(null);
        this.producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
        this.connection.start();
        this.started = true;
    }

    public void close() {
        UHelper.close(producer);
        UHelper.close(consumer);
        UHelper.close(session);
        UHelper.close(connection);
        this.started = false;
    }

} 
```

在客户端（无状态 bean）和服务器（@MessageDriven）中使用相同的类。RequestProducer 和 ResponseProducer 是接口：

```
package net.sf.selibs.utils.amq;

import javax.jms.Message;
import javax.jms.Session;

public interface RequestProducer {
    Message produce(Session session) throws Exception;
}
package net.sf.selibs.utils.amq;

import javax.jms.Message;

public interface  ResponseProducer extends RequestProducer{
    void setRequest(Message request);
    Message getRequest();
} 
```

我还阅读了关于通过 AMQ 实现请求响应的 AMQ 文章：http: [//activemq.apache.org/how-should-i-implement-request-response-with-jms.html](http://activemq.apache.org/how-should-i-implement-request-response-with-jms.html)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-08T16:11:43.197

也许我来得太晚了，但我这周花了几个小时来让同步请求/回复在 JMS 中工作。用超时扩展 QueueRequester 怎么样。我做到了，至少在一台机器（运行代理、请求者和回复者）上进行了测试，结果表明该解决方案优于所讨论的解决方案。另一方面，它取决于使用 QueueConnection，这意味着您可能被迫打开多个连接。

# mysql - 需要表值作为列标题

> ID：10786638
> 
> 赞同：0
> 
> 时间：2012-05-28T14:57:06.780
> 
> 标签：mysql, optimization

我有一张像这样的桌子：

**调查结果**

```
SurveyId Int ex. 12
QuestionName Varchar ex. A18a
QuestionValue Int ex. 2 
```

我正在尝试编写一个查询，通过 SurveyId 将 QuestionName 的值设置为水平列。如果某个问题没有条目，则该值将显示为 NULL。结果将如下所示：

```
SurveyId | A01 | A02 | A03 | A04...
12 | 1 | 4 | 3 | NULL...
213 | 2 | 5 | NULL | NULL ... 
```

我不知道如何选择问题作为列标题。有没有一种简单的方法可以做到这一点？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:02:49.133

这基本上*是*一个数据透视表。

可以在此处找到有关如何存档的不错的教程：[http ://www.artfulsoftware.com/infotree/queries.php#78](http://www.artfulsoftware.com/infotree/queries.php#78)

我建议阅读这篇文章并根据您的需求调整此解决方案。

# java - 处理数据时如何禁用按钮和更改按钮名称

> ID：10786640
> 
> 赞同：0
> 
> 时间：2012-05-28T14:57:10.103
> 
> 标签：java, jsf, jsf-2

我有一个删除按钮，用于删除表行：

```
//Dialog
function deletedialog(a){              
    $("<div />", {
        text: a
    }).dialog({        
        width: 600,
        buttons: {
            "Ok": function() { 
                $("#form\\:deleterow").click();
              //  $('input[id$="deleterow"]').click();               
                $(this).dialog("close"); 
            }, 
            "Cancel": function(event) { 
                $(this).dialog("close");
                event.preventDefault();
            } 
        }
    });

}

<h:commandButton id="deleterow" value="HiddenDelete" action="#{SessionsController.deleteSelectedIDs}" style="display:none">
    <f:ajax render="@form"></f:ajax>
</h:commandButton>

<!-- the delete button -->
<h:commandButton value="Delete">
    <f:ajax execute="@form" onevent="deletedialog('Do you want to delete the selected rows?')"></f:ajax>
</h:commandButton> 
```

我希望在 Java 删除方法的执行期间按下删除按钮来禁用它。如果按钮从“删除”更改为“处理”，就像 Glassfish 中的按钮一样，我还想更改视觉名称。这种情况稍微复杂一些，因为我使用了隐藏按钮。我怎么能做到这一点？

**发布更新**

```
<!-- the delete button -->
<h:button value="Delete" onclick="deletedialog('Do you want to delete the selected rows?'); return false;" /> 
```

**更新后 2**

我以这种方式编辑了代码：

```
//Dialog
function deletedialog(button, a){
    button.value = "Processing...";
    button.disabled = true;    
    $("<div />", {
        text: a
    }).dialog({        
        width: 600,
        buttons: {
            "Ok": function() { 
                $("#form\\:deleterow").click();
              //  $('input[id$="deleterow"]').click();               
                $(this).dialog("close"); 
                button.value = "Delete";
                button.disabled = false;

            }, 
            "Cancel": function(event) { 
                $(this).dialog("close");
                event.preventDefault();
                button.value = "Delete";
                button.disabled = false;
            } 
        }
    });

}

<!-- hidden button -->
<h:commandButton id="deleterow" value="HiddenDelete" action="#{SessionsController.deleteSelectedIDs}" style="display:none">
    <f:ajax render="@form"></f:ajax>
</h:commandButton>

<!-- the delete button -->
<h:button value="Delete" onclick="deletedialog(this, 'Do you want to delete the selected rows?'); return false;" /> 
```

那么按钮工作。问题是，当我单击删除按钮时，该按钮仅在打开对话框时才被禁用。当我执行后台数据库操作时，我需要保持禁用按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:10:42.100

这不是`onevent`属性的正确用法。该`onevent`属性应指向一个特殊函数，该函数在 JSF 将提供数据参数本身的*每个ajax 事件（开始、完成和成功）上调用。*例如

```
<f:ajax ... onevent="functionname" /> 
```

和

```
function functionname(data) {
    var ajaxStatus = data.status; // Can be 'begin', 'complete' and 'success'.

    switch (ajaxStatus) {
        case 'begin': // This is called right before ajax request is been sent.
            // ...
            break;

        case 'complete': // This is called right after ajax response is received.
            // ...
            break;

        case 'success': // This is called when ajax response is successfully processed.
            // ...
            break;
    }
} 
```

这对于例如显示 ajax 进度/状态图像，或禁用/启用提交按钮等很有用。无法控制或阻止 ajax 请求。它只是一个*侦听*器功能。

但是您想在发送 ajax 请求*之前调用您的确认对话框。*您需要挂钩`onclick`按钮的属性，并让函数返回`true`或`false`取决于结果。在最简单的形式中，使用内置 JavaScript`confirm()`函数，它应该如下所示：

```
<h:commandButton value="Delete" onclick="return confirm('Are you sure?')">
    <f:ajax execute="@form" />
</h:commandButton> 
```

当使用 jQuery 确认对话框功能时，它会像现在一样调用隐藏按钮，您应该使用普通按钮打开 jQuery 确认对话框，而不是发送 ajax 请求的命令按钮。

```
<h:button value="Delete" onclick="deletedialog('Do you want to delete the selected rows?'); return false;" /> 
```

**更新**：关于更改按钮的值并禁用它，只需将按钮本身传递到 JS 函数中，您可以在其中以通常的方式更改它：

```
<h:button value="Delete" onclick="deletedialog(this, 'Do you want to delete the selected rows?'); return false;" /> 
```

和

```
function deletedialog(button, message) {
    button.value = "Processing...";
    button.disabled = true;

    // ...
} 
```

当最终用户在确认对话框中选择取消时，不要忘记将它们恢复为正常值。

# jquery - 在字符串中间增加一个数字

> ID：10786642
> 
> 赞同：2
> 
> 时间：2012-05-28T14:57:13.103
> 
> 标签：jquery, regex, attr

我有一系列字符串`add[0][types]`等`add[0][name]`（用 PHP 表单 $_POST 创建一个数组）。

我需要拔出`[0]`并制作它`[1]`。

我已经根据其他一些回复构建了一个正则表达式函数，但它没有更改属性，我不确定我的函数语法是否正确：

```
newrow.find('input, select').each(function(){
  $(this).attr('name', function(i, val){return val.replace(
    /\\d+/, function(n){ return ++n; });
  });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T15:00:49.050

我认为您的正则表达式略有偏差。`.each`您可以通过删除有利于[`attr`](http://api.jquery.com/attr)使用函数的重载来缩短代码（您已经在使用，略有不同）：

```
newrow.find('input, select').attr('name', function(i, val) {
    return val.replace(/\d+/, function(n) {
        return ++n;
    });
}); 
```

**示例：http:** [//jsfiddle.net/hDELW/1/](http://jsfiddle.net/hDELW/1/)

# php - 重写条件和加载失败.php

> ID：10786646
> 
> 赞同：2
> 
> 时间：2012-05-28T14:57:31.090
> 
> 标签：php, apache

当我将文件上传到我的服务器（bluehost）时，我的网站在我的本地环境（MAMP）上运行良好，但我遇到了以下问题：

我有一个 php 获取变量（即 /xxx.php?p=bob）的链接，它调用一个打开弹出窗口的 javascript 函数 (popitup)。

链接结构如下：

```
<?php echo "<a href='media_player.php?p=".$listen_now."' onclick=\"return popitup('media_player.php?p=".$listen_now."')\">" 
```

popitup函数定义如下：

```
function popitup(url) {
    newwindow=window.open(url,'name','height=700,width=375');
    if (window.focus) {newwindow.focus()}
    return false;
} 
```

当弹出窗口打开时，页面内容不加载，我收到以下消息：

```
[an error occurred while processing this directive] 
```

主错误日志显示以下警告：

```
[Mon May 28 08:23:40 2012] [warn] RewriteCond: NoCase option for non-regex pattern '-f' is not supported and will be ignored. 
```

我的 public_html 文件夹中的 .htaccess 文件不包含任何重定向或重写。

非常感谢有关我如何解决此问题的任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:10:10.937

`RewriteCond`警告来自 Apache 的[mod_rewrite](http://httpd.apache.org/docs/2.4/mod/mod_rewrite.html)。您在以下任何一个中都有一个损坏的重写规则：

*   `.htaccess`（ .php 文件的目录或在*树上到系统根目录的任何目录中*）
*   虚拟主机配置
*   主要的apache配置

找到它的位置并修复它。

# java - Tomcat 和打开文件处理程序

> ID：10786659
> 
> 赞同：0
> 
> 时间：2012-05-28T14:58:27.337
> 
> 标签：java, web-services, tomcat, axis2

我正在使用 Axis 和 Apache Tomcat 7 编写一个 Web 服务。该服务使用第三方库对文件进行一些转换，并最终创建一个包含更多文件（子文件夹和常规文件）的文件夹。转换完成后，该服务会创建一个 zip 存档并将其返回。当它收到一个新请求时，首先它会删除在最后一个请求期间创建的文件并开始处理该请求。

服务本身运行良好，至少第一个请求得到了满足。问题是当收到第二个请求时，服务无法删除最后一个请求期间生成的所有文件。我使用的是 Windows XP 和 Process Explorer，我看到 Tomcat 保持一些文件（不是所有文件）打开，这就是我无法删除它的原因。

即使服务操作结束，我正在使用的库是否可能使文件保持打开状态？在我用来创建 zip 存档的代码中，我似乎关闭了所有打开的流。顺便说一句，即使我原谅关闭它们，在服务操作将结果返回给客户后它们还能保持打开状态吗？如果是这样，为什么 Tomcat 进程只打开一些文件？

似乎一段时间后，某个文件被“释放”，但其他文件始终保持打开状态......

我希望有人能给我一些关于如何处理这种情况的建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:28:31.403

重新发布我的评论，这似乎很有用。

如果一个文件处理程序没有被释放，它永远不会被释放，直到 servlet 容器关闭。一些实现还可能将文件处理程序的释放延迟到对象被垃圾收集时。除了确保关闭所有处理程序之外，您无能为力。如果是第三方库，那么您必须报告错误或自行修复。

我防止此类问题的最佳做法是确保文件处理程序以与打开它相同的方法关闭。如果它没有以该方法打开，则永远不要关闭它。

```
public void method() {
    //open file handler
    //do something
    //close file handler. make sure it is closed even if there is an exception.
} 
```

并且永远不要让文件处理程序成为一个字段。

```
public class A {
    private FileInputStream fin = null; // never do this. you will have hard time keeping track of when to release it.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:16:37.230

好吧，正如我想知道的那样，我正在使用的库并没有关闭所有文件流..

我找到了一种可以在类似情况下使用的解决方法。我发布它，也许有人会发现它有用或建议我更好的方法来解决问题:)

幸运的是 jar 库可以使用 java 命令从命令行执行，所以我只是用 Runtime 的 exec 方法以这种方式执行它：

```
try {   
    Process p = Runtime.getRuntime().exec("java -jar library.jar parameters");
p.waitFor();
} catch (InterruptedException | IOException e) {
    e.printStackTrace();
} 
```

以这种方式，JVM 创建了一个新进程，当它死亡时，所有挂起的处理程序都将被释放。

如果您无法使用 java 命令执行该库，则可以将此类库简单地包装在一个自定义 jar 中，该 jar 由一个使用它并获取所需参数的简单类制作。然后可以使用 exec() 执行包装 jar。

# objective-c - 如何在 Objective-C 命令行应用程序中嵌入 SQL 模式？

> ID：10786660
> 
> 赞同：0
> 
> 时间：2012-05-28T14:58:29.150
> 
> 标签：objective-c

我有一个 SQL 模式，需要在我的 Objective-C 命令行应用程序中提供给 SQLite。我希望架构成为二进制文件的一部分，这样我就可以只分发一个文件。与常规的 Mac 或 iOS 应用程序不同，二进制文件没有资源包，因此在应用程序包中存储资源的传统方式已被淘汰。有没有一种优雅的方式将模式包含在源代码中？我知道我可以简单地将它作为多行字符串存储在标题中，但这很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T03:10:36.587

架构.h

```
extern NSString * someSchema; 
```

架构.m

```
NSString * someSchema = @"CREATE TABLE IF EXISTS blah...."
@"More SQL here"
@"more SQL here"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:30:52.150

如何创建一个 sql 语句数组，然后使用枚举来访问这些语句。

Schema.h 文件：

```
static const NSString *sqlStatements[] = {
    @"CREATE TABLE...",
    @"SELECT * FROM ...",
    ... // Lots of other statements
    @"DELETE ..."
};

typedef enum {
    SQLCREATECommand=0,
    SQLSelectCommand,
    ... // Matching enums
    SQLDeleteCommand
} SQLCommands; 
```

在其他一些文件中使用：

`NSString *stmt = sqlStatements[SQLCREATECommand];`

这样做的好处是代码变得更易于维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T07:25:22.843

我想出的一个有趣的解决方案是扩展属性。可以将 Run Script 阶段添加到 Xcode 构建过程中，它执行以下操作：

```
xattr -w com.company.Schema "`cat SQL/schema.sql`" \
    ${BUILT_PRODUCTS_DIR}/${EXECUTABLE_NAME} 
```

然后在运行时：

```
const size_t maxSchemaSize = 1000;
char schema[maxSchemaSize] = {0};
getxattr(argv[0], "com.company.Schema", schema, maxSchemaSize, 0, 0);
NSLog(@"%s", schema); 
```

这样，我可以将架构保存在单独的文件中，而无需将其修改为头文件。明显的缺点是扩展属性可能无法在某些文件操作中存活。

# javascript - JS Regexp 反向引用

> ID：10786661
> 
> 赞同：0
> 
> 时间：2012-05-28T14:58:34.157
> 
> 标签：javascript, regex

假设我们有一个简单的算法来突出显示搜索结果：

```
var patt = new RegExp(result+"(?=\\s|\\.|,|<)(?! type=| class=| id=| src=)","gi");
var highlighted = unhighlighted.replace(patt,"<span style='border:1px solid #3399FF;'>"+result+"</span>" ) 
```

这有效，但我如何转移文本的大写。我可以引用匹配的单词或短语吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:25:50.917

您必须使用捕获组和反向引用来实现这一点。这可以像 tihs 一样完成

```
var patt = new RegExp("(" + result + ")" +"(?=\\s|\\.|,|<)(?! type=| class=| id=| src=)","gi");
var highlighted = unhighlighted.replace(patt,"<span style='border:1px solid #3399FF;'>$1</span>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T08:29:41.643

明白了 - 与 Yadala 相同，但 $1 在字符串中：

```
var patt = new RegExp("(" + result + ")" +"(?=\\s|\\.|,|<)(?! type=| class=| id=| src=)","gi");
var highlighted = unhighlighted.replace(patt,"<span style='border:1px solid #3399FF;'>$1</span>"); 
```

# xml - 使用 xslt 创建具有共同元素的元素列表

> ID：10786665
> 
> 赞同：1
> 
> 时间：2012-05-28T14:58:47.560
> 
> 标签：xml, xslt, xpath

我一直在尝试为以下文档编写样式表，它可以检查所有用户的奖励并将该用户的名称作为子元素添加到 /awards/award 元素

```
<document>
    <users>
        <user identity="1">
            <name>
                <first>abc</first>
                <last>xyz</last>
            </name>
            <achievements>
                <achievement>Award A</achievement>
                <achievement>Award B</achievement>
            </achievements>
        </user>
        <user identity="2">
            <name>
                <first>123</first>
                <last>DEF</last>
            </name>
            <achievements>
                <received>Award A</received>
            </achievements>
        </user>
        <user identity = "3">
            <name>
                <first>aaa</first>
                <last>bbb</last>
            </name>
            <achievements>
                <received>Award B</received>
            </achievements>
        </user>
    </users>
    <!--awards-->
    <awards>
        <award>
            <name>Award A</name>
            <!--here the list of the users who recieved this award has to be included-->
        </award>
        <award>
            <name>Award B</name>
        </award>
    </awards>
</document> 
```

我写下了以下不完整的样式表

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="awards/award">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
                <!--how can i create a list of all users who have this award-->
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

我无法弄清楚在模板“奖项/奖项”中编写查询的方式，例如“将所有获得此奖项的用户添加为称为用户的子元素，并将添加元素的值作为用户的名称”和给出以下输出。如果有人能指导我采用正确的方法，我将不胜感激。

```
<document>
    <users>
        <user identity="1">
            <name>
                <first>abc</first>
                <last>xyz</last>
            </name>
            <achievements>
                <achievement>Award A</achievement>
                <achievement>Award B</achievement>
            </achievements>
        </user>
        <user identity="2">
            <name>
                <first>123</first>
                <last>DEF</last>
            </name>
            <achievements>
                <received>Award A</received>
            </achievements>
        </user>
        <user identity="3">
            <name>
                <first>aaa</first>
                <last>bbb</last>
            </name>
            <achievements>
                <received>Award B</received>
            </achievements>
        </user>
    </users>
    <!--awards-->
    <awards>
        <award>
            <name>Award A</name>
            <user identity="1">abc xyz</user>
            <user identity="2">123 DEF</user>    
        </award>
        <award>
            <name>Award B</name>
            <user identity="1">abc xyz</user>
            <user identity="3">aaa bbb</user>
        </award>
    </awards>
</document> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:25:33.477

**This transformation**:

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kUserByAward" match="user"
          use="achievements/*[self::achievement or self::received]"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="award">
   <award>
    <xsl:apply-templates select="node()"/>
    <xsl:apply-templates select="key('kUserByAward', name)" mode="inclusion"/>
   </award>
 </xsl:template>

 <xsl:template match="user" mode="inclusion">
  <user>
    <xsl:copy-of select="name"/>
  </user>
 </xsl:template>
</xsl:stylesheet> 
```

**when applied on the provided XML document:**

```
<document>
    <users>
        <user>
            <name>
                <first>abc</first>
                <last>xyz</last>
            </name>
            <achievements>
                <achievement>Award A</achievement>
                <achievement>Award B</achievement>
            </achievements>
        </user>
        <user>
            <name>
                <first>dsd</first>
                <last>sdasdsadsa</last>
            </name>
            <achievements>
                <received>Award A</received>
            </achievements>
        </user>
        <user>
            <name>
                <first>aaa</first>
                <last>bbb</last>
            </name>
            <achievements>
                <received>Award B</received>
            </achievements>
        </user>
    </users>
    <!--awards-->
    <awards>
        <award>
            <name>Award A</name>
            <!--here the list of the users who recieved this award has to be included-->
        </award>
        <award>
            <name>Award B</name>
        </award>
    </awards>
</document> 
```

**produces (what I *guess* should be) the wanted, correct result**:

```
<document>
   <users>
      <user>
         <name>
            <first>abc</first>
            <last>xyz</last>
         </name>
         <achievements>
            <achievement>Award A</achievement>
            <achievement>Award B</achievement>
         </achievements>
      </user>
      <user>
         <name>
            <first>dsd</first>
            <last>sdasdsadsa</last>
         </name>
         <achievements>
            <received>Award A</received>
         </achievements>
      </user>
      <user>
         <name>
            <first>aaa</first>
            <last>bbb</last>
         </name>
         <achievements>
            <received>Award B</received>
         </achievements>
      </user>
   </users><!--awards-->
   <awards>
      <award>
         <name>Award A</name><!--here the list of the users who recieved this award has to be included-->
         <user>
            <name>
               <first>abc</first>
               <last>xyz</last>
            </name>
         </user>
         <user>
            <name>
               <first>dsd</first>
               <last>sdasdsadsa</last>
            </name>
         </user>
      </award>
      <award>
         <name>Award B</name>
         <user>
            <name>
               <first>abc</first>
               <last>xyz</last>
            </name>
         </user>
         <user>
            <name>
               <first>aaa</first>
               <last>bbb</last>
            </name>
         </user>
      </award>
   </awards>
</document> 
```

**Explanation**: Proper use of **[keys](http://www.w3.org/TR/1999/REC-xslt-19991116#key)** and overriding the **[identity rule](http://dpawson.co.uk/xsl/sect2/identity.html)**.

**UPDATE**: The OP has shown the actually wanted output format. This is very close to what I guessed. The only modification is to use this template, insted the one in the initial solution:

```
 <xsl:template match="user" mode="inclusion">
  <user identity="{@identity}">
    <xsl:copy-of select="concat(name/first, ' ', name/last)"/>
  </user>
 </xsl:template> 
```

# .net - Specflow：检查元素是否在 html 页面上可见

> ID：10786671
> 
> 赞同：0
> 
> 时间：2012-05-28T14:59:02.197
> 
> 标签：.net, html, watin, visible, specflow

我使用 SpecFlow + WatiN + nunit.framework 为 .net 构建 BDD 测试

我想检查 HTML 页面上的以下功能：

```
Scenario: Change user role from 'Admin' to 'User'

Given I have logged in
And I am on the 'Add new user' page
Then the 'Homepage' should not be visible
When I select 'Role' as 'User'
Then the 'Homepage' should be visible 
```

这是一些属性取决于用户角色的场景。管理员没有主页，但用户有。所以页面有一个适当的 javascript 来显示/隐藏它。

更新：我做了以下方法：

```
[Then(@"'(.*)' (should|should not) be visible")]
public void ThenElementShouldBeVisible(string elementName, string should)
{
    var element = WebBrowser.Current.Elements.First(Find.ByLabelText(elementName));
    Assert.That(should == "should"
                    ? element.Style.Display == "none"
                    : element.Style.Display != "none");
} 
```

但在我看来，浏览器对象在 Javascript 完成工作后并没有更新元素样式。

我不确定如何使用 SpecFlow 检查元素是否可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T13:34:47.237

您可以注入一些代码来等待任何 ajax 或异步操作完成，如[本](https://stackoverflow.com/questions/2375709/how-to-wait-for-jquery-ajax-requests-to-complete-from-watin)讨论中所述。然而，即使有这样的解决方案，我们仍然需要在这里和那里使用一些 Thread.Sleep() 。

作为旁注，您的示例似乎与测试脚本非常接近。这是您应该尽量避免的反模式。[您可以在此处](https://stackoverflow.com/questions/11418074/how-to-increase-reusability-between-specflow-gherkin-steps)找到一些指南。

# visual-c++ - AceFlags 的行为是否随操作系统而变化？

> ID：10786674
> 
> 赞同：1
> 
> 时间：2012-05-28T14:59:16.250
> 
> 标签：visual-c++

我的实用程序从一个目录中提取 ACL 并将其添加到另一个目录中。我的问题是这个-

在遍历 ACE 时，我发现对于带有 的 ACE `AceFlags value = 0`，继承标志（应用到）是“文件夹、子文件夹和目录”。当我将相同的 ACL 应用到另一个目录时，在 Windows 7 中它可以正常工作。但是，在 Windows XP 中，继承标志更改为“仅文件夹”。这是代码 -

```
BOOL SetNonInheritedAceToTarget(LPWSTR pszSource, LPWSTR pszDestination)
{
BOOL bRetVal = FALSE;

DWORD dwRes = 0;
PSECURITY_DESCRIPTOR pSD = NULL;
PACL pacl = NULL;

if( ERROR_SUCCESS == GetNamedSecurityInfo(pszSource, SE_FILE_OBJECT, DACL_SECURITY_INFORMATION, NULL, NULL, &pacl, NULL, &pSD) )
{
    if(pacl)
    {
        for (USHORT i = 0; i < pacl->AceCount; i++)
        {
            ACCESS_DENIED_ACE * PACE = NULL;

            if (!GetAce(pacl, i,(LPVOID*) &PACE))
                continue;

            if(PACE->Header.AceFlags & INHERIT_ONLY_ACE || PACE->Header.AceFlags & INHERITED_ACE)
            {
                // Delete the ACE
                if(!DeleteAce(pacl, i))
                {
                    TCHAR szErrorMsg[300] = {0};
                    wsprintf(szErrorMsg, L"Unable to delete ACE from DACL of = %ls", pszSource);
                    OutputDebugString(szErrorMsg);
                }
            }
        }
    }
}

if(ERROR_SUCCESS == SetNamedSecurityInfo(pszDestination, SE_FILE_OBJECT, DACL_SECURITY_INFORMATION | UNPROTECTED_DACL_SECURITY_INFORMATION, NULL, NULL, pacl, NULL))
    bRetVal = TRUE;

return bRetVal;
} 
```

我不知道我是在弄乱代码还是真的与操作系统相关的问题。帮助！！！。同样，如果是与操作系统相关的问题，有什么建议，我应该手动分配 AceFlag 吗？

-- 瓦伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:07:56.403

是的，ACE 已经随着 Vista 的到来而改变，主要是因为集成了[Integrity Level——](http://en.wikipedia.org/wiki/Mandatory_Integrity_Control)以前称为 Integrity Control (IL)。当您的代码必须在 Windows 7 和 XP 上运行时，您必须手动处理这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:45:17.227

哦...愚蠢的我。我正在检查 INHERIT_ONLY_ACE 以查看它是否继承了 ACE……正如 Mox 指出的那样，在 vista（及更高版本）中，已添加新的 ACE 以增强基于 Windows 的对象的完整性检查。但是，这不会改变 ACE 的解释方式。我的代码很好，我只是在检查一个额外的标志。

感谢 Mox 对我的教育。

-- 瓦伦

# sql-server - SQL Server 并行逻辑处理器或物理内核

> ID：10786676
> 
> 赞同：3
> 
> 时间：2012-05-28T14:59:17.690
> 
> 标签：sql-server, parallel-processing

我有 2 个物理 CPU（每个都是四核）并启用了超线程。任务管理器显示 16 个逻辑处理器。当前的 maxdop 设置默认为零。

使用并行性时，如果可用，将使用所有 16 个逻辑处理器，其中 16 个调度程序可用于跨越查询。澄清查询优化器何时使用并行性（尤其是在启用超线程时）；它是否考虑可用的逻辑核心而不是物理核心？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:36:57.943

当 SQL Server 生成并行计划时，它不包括每次执行的 DOP。该计划仅包含并行运算符，并且在执行查询时根据服务器负载等因素以及 MAXDOP 设置/提示等限制动态选择 DOP。

虽然 SQL Server 支持 NUMA，但 AFAIK 无法区分常规内核和超线程内核。它们都只是逻辑处理器。

如果您的工作负载受益于在尽可能多的 CPU 上运行的并行查询，请尝试关闭超线程，看看它是否有所作为。超线程对于 OLTP 非常有用，因为它有很多并发连接和短请求，但在您的情况下可能不是很多。你必须进行测试。

# java - 如何将抽象类转换为接口？

> ID：10786677
> 
> 赞同：2
> 
> 时间：2012-05-28T14:59:18.903
> 
> 标签：java, interface, abstract-class

我有一个使用数组列表的 java 程序 - 这些数组列表存储“变量”，其中“变量”是一个抽象类。

现在，为了节省内存，我想使用一个名为 HugeCollections-VanillaJava 的 java 库，但是这个库需要定义一个接口。

如何将抽象类转换为接口？我必须遵循哪些规则/限制才能正确执行转换？

最后，我是否可以通过最少的代码更改来使用我的抽象类，以便需要接口的库也可以正常工作？理想情况下，我根本不想更改抽象类……这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T15:05:27.027

> 如何将抽象类转换为接口？

1.  制作抽象类源文件的副本。

2.  在初始声明中将“类”更改为“接口”。

3.  更改名称（可选，取决于您在做什么）。

4.  删除类实现的任何方法的主体。

5.  从其他词中删除“抽象”一词。

6.  删除所有私有成员和受保护成员。

7.  删除所有构造函数。

8.  从公共成员中删除关键字“public”。

如果您删除了任何代码（实现的方法、私有或受保护的东西），请让您的原始抽象类实现您的接口并将这些东西留在那里。

（不完整）示例：

`Foo`作为一个抽象类：

```
public abstact class Foo
{
    private int bar;

    public static final int SOME_CONSTANT = 42;

    public Foo(b) {
        this.bar = b;
    }

    public abstract void doSomething(String s);

    protected int doSomethingElse() {
        return this.bar * 2;
    }
} 
```

`Foo`作为接口：

```
public interface Foo
{
    int SOME_CONSTANT = 42;

    void doSomething(String s);
} 
```

就我而言，因为我确实有一些旧的东西`Foo`，我可能会拥有`AbstractFoo`或其他东西：

```
public abstact class AbstractFoo implements Foo
{
    private int bar;

    public Foo(b) {
        this.bar = b;
    }

    public abstract void doSomething(String s);

    protected int doSomethingElse() {
        return this.bar * 2;
    }
} 
```

...因此，如果需要，实现可以将其用作起点（尽管`private` `bar`在那里，它没有多大意义）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T15:03:38.203

模式[适配器](http://en.wikipedia.org/wiki/Adapter_pattern)可能会对您有所帮助。

想象一下，你必须使用**SomeClass**作为**TargetInterface**

```
public abstract class SomeClass {
       // some code here
     public abstract void someMethod();
}

public interface TargetInterface {
     public void someMethodBlaBla();
} 
```

它们有不同的方法签名—— **someMethod()**和**someMethodBlaBla()**。

所以你可能会创建这样的适配器类：

```
public class Adapter implements TargetInterface {
   private SomeClass adaptee;

   public Adapter( SomeClass adaptee ) {
       this.adaptee = adaptee;
   }

   public void someMethodBlaBla() {
       this.adaptee.someMethod();
   }

   //delegate all calls to adaptee
} 
```

在代码中的某个地方，您可能会同时使用适配器和抽象类的实例，而不会干扰当前代码：

```
SomeClass abstractClassInstance = ... //get instance of your abstract class
TargetInterface targetInterfaceInstance = new Adapter( abstractClassInstance ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:02:56.117

如果抽象类没有定义任何具体方法，你甚至可以使用正则表达式。从：

```
public abstract class Abstract {
  public abstract void method();
  //...
} 
```

至：

```
public interface Interface {
  void method();
  //...
} 
```

`public abstract`修饰符对于接口是隐式的。如果`abstract`该类*确实*定义了一些方法（并非所有方法都是`abstract`）或具有某些字段，则无法完成（至少很容易）。

# php - 警告：mysql_connect() [function.mysql-connect]：无法连接到 MySQL 服务器

> ID：10786687
> 
> 赞同：1
> 
> 时间：2012-05-28T15:00:26.473
> 
> 标签：php, mysql, xampp

因此，在尝试远程连接到我的数据库时，我不断收到此错误。奇怪的是，它每分钟可以处理 1/2 个查询，但在这些查询之后它停止工作并给出此错误消息。这只是开始随机发生，在它用于每秒许多查询之前工作正常。

细节：

*   我使用 xampp 来托管我的数据库
*   连接数据库的详细信息是正确的

任何想法可能会发生什么？

代码示例（这是我用来测试连接的代码）：

```
 $connection = mysql_connect('IP', 'DATABASE PASSWORD', 'PASSWORD', 'DATABSE NAME') or die(mysql_error());
                if (!$connection) 
                    die('Not connected : ' . mysql_error());

                $db_selected = mysql_select_db('DATABSE NAME', $connection);
                if (!$db_selected)
                    die ('Can\'t use : ' . mysql_error());

                $string = mysql_query("SELECT * FROM `characters` WHERE `name` LIKE 'gil'") or die(mysql_error());
                if($result = mysql_fetch_assoc($string))
                    echo $result['name']; 
```

完整的错误代码：

```
Warning: mysql_connect() [function.mysql-connect]: Can't connect to MySQL server on 'IP' (4) in /vhosts/DOMAIN/httpdocs/test.php on line 1
Can't connect to MySQL server on 'IP' (4) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:26:25.187

您指定了错误的参数[`mysql_connect`](http://php.net/manual/en/function.mysql-connect.php)：

```
mysql_connect('IP', 'DATABASE PASSWORD', 'PASSWORD', 'DATABSE NAME') 
```

应该：

```
mysql_connect('server address', 'user name', 'password') 
```

[有关更多信息，请参阅文档。](http://php.net/manual/en/function.mysql-connect.php)

# c++ - 使用 AddAccessAllowedAceEx 在 DACL 中进行 ACE 排序

> ID：10786696
> 
> 赞同：1
> 
> 时间：2012-05-28T15:00:56.263
> 
> 标签：c++, winapi, windows-security

我需要在 C++ 程序中授予对 Windows 上文件的访问权限。我浏览并从 MSDN 复制/粘贴代码并提出以下内容。据我所知，它一直在工作。

但是今天我偶然发现了 MSDN 中关于使用 AddAccessAllowedAceEx 的警告，上面写着：“调用者必须确保 ACE 以正确的顺序添加到 DACL。”。然后它向读者推荐：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa379298 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379298(v=vs.85).aspx)

因此，我的请求是让任何经验丰富的 Windows 程序员查看下面的代码，并告诉我是否会在我正在修改的文件的 DACL 中遇到 ACE 排序问题（通过我的 szPath 传入功能）。我会说我只是将我的新 ACE 添加到了 DACL 的末尾。如果这将是一个问题，我是否真的必须从 DACL 中读出所有 ACE，检查它们，然后一次添加一个，确保将我的新 ACE 插入正确的位置以遵守正确的顺序？

```
char* whoOps::ACLAmigo::AddACEToDACL(char* szPath, char* szSecurityPrincipal, DWORD dwPermission)
{
ACL_SIZE_INFORMATION ACLInfo; 
memset(&ACLInfo, 0, sizeof(ACL_SIZE_INFORMATION));
UCHAR   BuffSid[256];
PSID pSID = (PSID)BuffSid;
int returnCode = ResolveSID(szSecurityPrincipal, pSID);
SE_OBJECT_TYPE SEObjType = SE_FILE_OBJECT;
PACL pOldDACL = NULL;
PSECURITY_DESCRIPTOR pSD = NULL;
SECURITY_INFORMATION ACLSecInfo = DACL_SECURITY_INFORMATION;
returnCode = GetNamedSecurityInfoA(szPath, SEObjType, ACLSecInfo, NULL, NULL, &pOldDACL, NULL, &pSD);  
char* szReturn = NULL;
if (returnCode != ERROR_SUCCESS) {
    szReturn = "GetNamedSecurityInfoA() failed.";
} else {
    BOOL getACLResult = GetAclInformation(pOldDACL, &ACLInfo, sizeof(ACLInfo), AclSizeInformation); 
    if (!getACLResult) {
        szReturn = "GetAclInformation() failed.";
    } else {
        DWORD cb = 0;
        DWORD cbExtra = sizeof(ACCESS_ALLOWED_ACE) - sizeof(DWORD) + GetLengthSid(pSID); 
        cb = ACLInfo.AclBytesInUse + cbExtra; 
        PACL pNewDACL = static_cast<PACL>(HeapAlloc(GetProcessHeap(),0,cb)); 
        BOOL initACLResult = InitializeAcl(pNewDACL, cb, ACL_REVISION); 
        if (!initACLResult) {
            szReturn = "InitializeAcl() failed.";
        } else {
            for (DWORD i = 0; i < ACLInfo.AceCount; ++i)  { 
                ACE_HEADER * pACE = 0; 
                GetAce(pOldDACL, i, reinterpret_cast<void**>(&pACE)); 
                pACE->AceFlags = CONTAINER_INHERIT_ACE | OBJECT_INHERIT_ACE;
                pACE->AceType = ACCESS_ALLOWED_ACE_TYPE;
                AddAce(pNewDACL, ACL_REVISION, MAXDWORD, pACE, pACE->AceSize); 
            } 
            BOOL addACEResult = AddAccessAllowedAceEx(pNewDACL, ACL_REVISION, CONTAINER_INHERIT_ACE | OBJECT_INHERIT_ACE, dwPermission, pSID);
            if (!addACEResult) {
                szReturn = "AddAccessAllowedAceEx() failed.";
            } else {
                DWORD setSIResult = SetNamedSecurityInfoA(szPath, SEObjType, ACLSecInfo, NULL, NULL, pNewDACL, NULL); 
                if (!setSIResult) {
                    szReturn = "SetNamedSecurityInfoA() failed.";
                } else {
                    szReturn = "AddACEToDACL() succesful.";
                }
            }
        }
        if (pNewDACL) HeapFree(GetProcessHeap(),0, pNewDACL);
    }
    if (pSD) LocalFree(pSD);
}
return szReturn; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:09:35.173

ACE 订购真的很重要！是的，最好的解决方案是

1.  修改前读取ACL的内容
2.  以编程方式检查安全描述符中的每个元素 (ACE)
3.  适当地放置您的条目（在允许之前被拒绝）

这个[系列](http://www.codeproject.com/Articles/10042/The-Windows-Access-Control-Model-Part-1)有大量的样品。

# macos - 在 Mac 上从 llvm-g++-4.2 升级到 g++-4.7 的正确方法

> ID：10786699
> 
> 赞同：5
> 
> 时间：2012-05-28T15:01:05.080
> 
> 标签：macos, gcc, homebrew

我有安装了命令行工具的 Lion 10.7.3。我想试验 C++11，所以我使用自制软件来安装 GCC 4.7，如此[处](https://github.com/Homebrew/homebrew-dupes/issues/20)所述。

我现在如何将 /usr/bin/g++ 升级为 Homebrew 安装的那个？它像符号链接一样简单吗？我只是想仔细检查并确定。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T01:57:39.697

首先，你确定你需要g++ 4.7吗？从[C++11 实现状态](http://clang.llvm.org/cxx_status.html)页面可以看到，最新版本的 clang 也支持大部分 C++11。当然，还有一些东西是 g++ 处理而 clang 没有的，但也有一些东西是 clang 支持而 g++ 不支持的。而且，更重要的是，您已经*拥有*来自 Apple 的最新版本的 clang，已配置并准备就绪，作为您的默认编译器。另外，4.2 之后的 g++ 不支持 Mac 扩展，比如 ，`-arch`这意味着你不能用它来构建大量的第三方软件（因为大多数配置脚本假设如果你在 Mac 上，你的编译器支持 Mac 扩展）。

* * *

但是如果你想要 g++ 4.7，你可以做到。只是不要试图`/usr/bin/g++`用不同的版本替换。除非在极少数情况下（当您从知道他们在说什么的人那里得到强有力的保证时），否则永远不要用非 Apple 的东西替换`/usr/bin`（或）中的任何内容。`/System`

更好的做法是并行安装另一个编译器。只需让 Homebrew 安装它最喜欢的方式（所以它安装到一些前缀，如 /usr/local/Cellar/gcc/4.7，然后将所有适当的东西符号链接到 /usr/local/bin 等），并以这种方式使用它。

编译代码时，而不是编写`g++`、 编写`/usr/local/bin/g++`或`g++-4.7`.

如果您厌倦了这样做，`/usr/local/bin`请将 PATH 放在更高的位置`/usr/bin`，或者创建一个 shell 别名，或者将其粘贴在环境变量 CXX 中并写`$CXX`而不是`g++`.

如果您使用的是 GUI IDE，您应该能够通过在某处设置路径来将其配置为使用您的编译器。（除非您使用的是 Xcode，否则您只能将其配置为使用 Apple 测试的编译器。）

* * *

这就是您试验自己的代码所需要的一切。如果你想用这个编译器编译第三方应用程序，那可能会有点复杂。您通常不会实际编译每个源文件并将结果链接在一起；你只需做`configure && make`，让他们为你做繁重的工作。

幸运的是，大多数包都会尊重标准环境变量，尤其是`CXX`在指定默认 C++ 编译器和`CC`默认 C 编译器时。（这就是为什么我建议`CXX`上面的名字。）

请记住，再次，g++ 4.7 不支持 Mac 扩展，所以如果你不准备调试一堆基于 autoconf 的配置脚本，它们抱怨你的编译器无法生成代码，因为它假设它可以抛出`-arch x86_64`任何编译器在 Mac 等设备上，不要这样做。

# ruby-on-rails - 模型 - 引用非模型表单字段/参数进行验证？

> ID：10786700
> 
> 赞同：0
> 
> 时间：2012-05-28T15:01:07.643
> 
> 标签：ruby-on-rails

导轨 2.3.5

假设我只想验证`sub_report_name` 是否选中了复选框`sub_report_active`。但是，`sub_report_active`不是模型的一部分。它是一个表单字段和一个参数，但`check_bok_tag`不是一个模型字段。

您能否引用模型中不是模型字段的参数/form_field（如下所示..`sub_report_active`我尝试过的任何形式的.excpet在模型中都无法识别）。

```
validates_presence_of :sub_report_name, :if=> sub_report_active == 'YES' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:04:35.840

我不知道你可以，但你可以通过使用 attr_accessor 轻松地*将*其设置为模型字段，而无需相应的数据库列：

```
class YourModel < ActiveRecord::Base
  attr_accessor :sub_report_active
  validates_presence_of :sub_report_name, :if => proc{ |m| m.sub_report_active == 'YES' }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:41:39.840

这有效（包括需要将 sub_report_active 从 check_box_tag 更改为 f.check_box。

```
class Report < ActiveRecord::Base
  attr_accessor :sub_report_active

  validates_presence_of :sub_report_name, :if => :sub_report_active_yes?, :message => " must be entered if 'Sub Report Active?'' is checked."

  def sub_report_active_yes?
    sub_report_active == 'YES'
  end
End 
```

# android - 带有异步建议的 AutocompleteTextView 不显示下拉菜单

> ID：10786702
> 
> 赞同：8
> 
> 时间：2012-05-28T15:01:11.357
> 
> 标签：android, autocompletetextview

我添加`TextChangedListener`到`AutocompleteTextView`. 在`TextChangedListener`'s`afterTextChanged()`我调用`AsyncTask`which 从 web 加载数据（在活动开始时加载所有数据不是一个选项，因为列表可能非常大，所以它只是浪费流量）。 `AsyncTask`的`onPostExecute()`样子（我用`ArrayAdapter`）：

```
 @Override
    protected void onPostExecute(ArrayList<Subregion> result)
    {
        super.onPostExecute(result);
        if (result != null)
        {
            adapter.clear();
            for (Iterator<Subregion> iterator = result.iterator(); iterator.hasNext();)
            {
                Subregion subregion = iterator.next();
                adapter.add(subregion);
            }
            adapter.notifyDataSetChanged();
            autocompleteTextView.showDropDown();
        }
    } 
```

`Subregion`是我的自定义对象，被覆盖`toString()`。我希望我的程序在用户开始输入时开始加载数据，并在接收和解析结果时立即显示结果。

## 我的问题：

`autocompleteTextView.showDropDown()`没有效果。`onPostExecute()`接收到正确的数据列表，它们被添加到适配器，但`showDropDown()`不显示下拉列表。怎么了？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T13:49:46.753

我正在做同样的事情，我刚刚实现了这个功能。不要清除适配器并单独构建它，而是如下设置适配器（我在 onPostExecute 中调用的函数中执行此操作）；

```
//suggestions is a string array of suggestions.
suggestAdapter = new ArrayAdapter<String>(this, R.layout.suggestions, suggestions);
//The autocomplete view 
suggestions.setAdapter(this.suggestAdapter);
suggestAdapter.notifyDataSetChanged(); 
```

您不需要显式调用 showdropdown，当适配器通知它数据已更改时，自动完成视图会自动更新。

你也可以打电话

```
adapter.setNotifyOnChange(true) 
```

这使得没有必要打电话

```
adapter.notifyDatasetChanged() 
```

请参阅[setNotifyOnChange](http://developer.android.com/reference/android/widget/ArrayAdapter.html#setNotifyOnChange%28boolean%29) 希望我能有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-23T18:28:12.360

我也遇到过这个问题。我的完成阈值为 2。当输入 2 个字符时，我正在从服务器获取数据并填写了数组适配器，但`autoRailwayFrom.showDropDown();`没有显示下拉菜单...

我只是在网上写，它可以工作......

```
autoRailwayFrom.setText(autoRailwayFrom.getText());
adapterFrom.notifyDataSetChanged();
autoRailwayFrom.showDropDown(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-04T15:58:08.403

这个问题已经得到了回答，但我认为这不是一个好的方式 - 所有人的关键是可过滤的界面。在这里，您有基于 BaseAdapter 的适配器的工作示例。这里缺少的部分是沟通（我使用了改造）：

```
public class UsersAutoAdapter extends BaseAdapter implements Filterable
{
    {
        DaggerGraphManager.INSTANCE.inject(this);
    }

    @Inject
    CommunicationManager mCommunicationManager;

    private FindUserResponse mFindUserResponse;

    @Override
    public int getCount()
    {
        if (mFindUserResponse != null && mFindUserResponse.mUsers != null)
        {
            return mFindUserResponse.mUsers.size();
        }

        return 0;
    }

    @Override
    public Object getItem(int i)
    {
        return mFindUserResponse.mUsers.get(i);
    }

    @Override
    public long getItemId(int i)
    {
        return i;
    }

    @Override
    public View getView(int i, View pView, ViewGroup pViewGroup)
    {
        if (pView == null)
        {
            LayoutInflater inflater = LayoutInflater.from(pViewGroup.getContext());
            pView = inflater.inflate(R.layout.ac_item_user, pViewGroup, false);
        }
        TextView textViewUserName = (TextView) pView.findViewById(R.id.text_view_user_name);
        textViewUserName.setText(mFindUserResponse.mUsers.get(i).mUserName);

        return pView;
    }

    @Override
    public Filter getFilter()
    {
        return new Filter()
        {
            //this method is called async (not from UI thread!) so making network request is possible here
            @Override
            protected FilterResults performFiltering(CharSequence pCharSequence)
            {

                if (pCharSequence != null && pCharSequence.length() >= 3)
                {
                    FindUserResponse users = mCommunicationManager.findUsersSync(pCharSequence.toString());

                    FilterResults results = new FilterResults();

                    results.values = users;
                    results.count = users.mUsers.size();

                    return results;
                }
                return null;
            }

            //this is UI thread called method (just after performFiltering returns it's results
            @Override
            protected void publishResults(CharSequence pCharSequence, FilterResults pFilterResults)
            {
                if (pFilterResults != null)
                {
                    mFindUserResponse = (FindUserResponse) pFilterResults.values;
                    notifyDataSetInvalidated();
                }
            }
        };
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-03T19:30:01.237

Retroft api调用遇到了这个问题。通过将以下代码保留在 Retrofit 的 onResponse 方法中来解决。不需要在 onCreate 方法中初始化适配器。我的代码如下：

```
productListAdapter = new ArrayAdapter<>(getApplicationContext(), 
android.R.layout.simple_dropdown_item_1line, productList);

autoCompleteTextViewProductSearch.setAdapter(productListAdapter);
  productListAdapter.setNotifyOnChange(true);
  productListAdapter.notifyDataSetChanged();
  autoCompleteTextViewProductSearch.showDropDown(); 
```

# java - 网格布局列和行不起作用

> ID：10786703
> 
> 赞同：1
> 
> 时间：2012-05-28T15:01:11.793
> 
> 标签：java, swing, grid-layout

基本上我正在尝试将两个面板连接到我的框架上，我的框架使用`BorderLayout`并且两个面板将被放置在南北。我已经完成了顶部面板，但对于底部面板，我无法正确处理。我用`GridLayout`的是底部的，它应该看起来像这样。

> [http://i47.tinypic.com/wa0lsz.png](http://i47.tinypic.com/wa0lsz.png)

所以这里是gridlayout的代码

```
public class WeaponComp extends JPanel{

protected JPanel first = new JPanel();

public WeaponComp(){

    setLayout(new GridBagLayout());
    setPreferredSize(new Dimension(800,550));
    GridBagConstraints c = new GridBagConstraints();
    JLabel ntg = new JLabel("");
    JLabel oldweap = new JLabel("OLD WEAPON");
            JLabel newweap = new JLabel("NEW WEAPON");

    JLabel onetwohand = new JLabel ("1H / 2H");
    JLabel offhand = new JLabel ("Off Hand");
    JLabel dps = new JLabel ("DPS :");
    JLabel str = new JLabel ("Str :");
    JLabel dex = new JLabel ("Dex :");
    JLabel vit = new JLabel ("Vit :");
    JLabel intel = new JLabel ("Int :");
    JLabel manareg = new JLabel ("Mana Regen :");
    JLabel aspd = new JLabel ("Attack Speed:");
    JLabel critch = new JLabel ("Crit chance:");
    JLabel critdmg = new JLabel ("Crit damage:");

    JTextField dpstf = new JTextField(12);
    JTextField strtf = new JTextField(5);
    JTextField dextf = new JTextField(5);
    JTextField vittf = new JTextField(5);
    JTextField inteltf = new JTextField(5);
    JTextField manaregtf = new JTextField(3);
    JTextField aspdtf = new JTextField(3);
    JTextField critchtf = new JTextField(3);
    JTextField critdmgtf = new JTextField(3);
    JTextField offdpstf = new JTextField(12);
    JTextField offstrtf = new JTextField(5);
    JTextField offdextf = new JTextField(5);
    JTextField offvittf = new JTextField(5);
    JTextField offinteltf = new JTextField(5);
    JTextField offmanaregtf = new JTextField(3);
    JTextField offaspdtf = new JTextField(3);
    JTextField offcritchtf = new JTextField(3);
    JTextField offcritdmgtf = new JTextField(3);

    first.setLayout(new GridLayout(3,4));
    first.setPreferredSize(new Dimension(750,150));

    first.add(oldweap); first.add(ntg); first.add(newweap); first.add(ntg);
    first.add(onetwohand); first.add(ntg); first.add(offhand); first.add(ntg);
    first.add(dps); first.add(dpstf); first.add(dps); first.add(offdpstf);

    c.fill = GridBagConstraints.HORIZONTAL;
    c.gridx = 0; c.gridy = 0;
    add (first,c); 

}
} 
```

这是我的程序的当前结果

> [http://i50.tinypic.com/107p9uu.png](http://i50.tinypic.com/107p9uu.png)

提前感谢您的时间和答案

PS：如果您想知道，是的，它与暗黑破坏神3有关，但我没有那么雄心勃勃，这是出于学习目的，不会有很多功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:58:32.587

GridLayout 是一个糟糕的选择，因为所有单元格自动具有相同的大小。我建议改用 MigLayout：http: [//miglayout.com](http://miglayout.com)

布局代码如下所示：

```
first.setLayout(new MigLayout("wrap 2, fill"));
first.add(oldweap);
first.add(newweap);
first.add(onetwohand);
first.add(offhand);
first.add(dps);
first.add(dpstf);
first.add(dps);
first.add(offdpstf); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T01:28:50.583

您可以为底部面板使用¹或[嵌套布局](https://stackoverflow.com/a/5630271/418556)^(2 。)[`GroupLayout`](http://docs.oracle.com/javase/7/docs/api/javax/swing/GroupLayout.html)

1.  有关详细信息，请参阅[如何使用 GroupLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/group.html)。例如 ![在此处输入图像描述](../Images/fadd0cebed8b9d86503e1157270367fa.png)
2.  例如 ![](../Images/60a0b7bf612456f6f55341b1fa72d330.png)

# css - CSS底部对齐导致重叠文本

> ID：10786705
> 
> 赞同：0
> 
> 时间：2012-05-28T15:01:18.703
> 
> 标签：css

在将一个元素与另一个元素的底部对齐时，我遇到了绝对和相对定位的问题。我已经设置了[http://jsfiddle.net/sitrobotsit/xLahG/8/](http://jsfiddle.net/sitrobotsit/xLahG/8/)来说明问题。基本上，底部对齐的元素与其上方的文本重叠。

HTML

```
<div class="subevents">
      <ul id="events_gallery">
         <li class="events_column">
             <img src="http://placekitten.com/130/100">
             <h3>Some heading</h3>                 
             <p>Some vairable length text. Sed ut perspiciatis 
             unde omnis iste natus error sit voluptatem accusantium.</p>
             <p class="bottom"><a href="#">Overlapping link</a></p>
        </li>
    </ul>
</div>​ 
```

CSS

```
#events_gallery li {
    border: solid 1px #999;
    list-style-type: none;
    position: relative;
    width: 295px;
}

#events_gallery li p, #events_gallery li h3 {
    left: 139px;
}

#events_gallery li img {
    float: left;
}

#events_gallery li .bottom {
    vertical-align: bottom;
    position: absolute;
    bottom: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:04:18.080

`position:absolute`从中删除

```
#events_gallery li .bottom {
vertical-align: bottom;
position: absolute;
bottom: 0;
} 
```

[并在这里](http://jsfiddle.net/xLahG/7/)看到它的作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:25:01.063

像这样修改你的设计：

```
<div class="subevents">
      <ul id="events_gallery">
         <li class="events_column">
             <a href="#"><img src="http://placekitten.com/130/100"></a>
             <h3>Some heading</h3>                 
             <p class="content">Some vairable length text. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium.   </p>
             <p class="bottom"><a href="#">Find out more</a></p>
        </li>
    </ul>
</div>​ 
```

和CSS：

```
#events_gallery li {
    border: solid 1px #999;
    margin: 0 0 5px 0;
    list-style-type: none;
    position: relative;
    width: 295px;
}

#events_gallery li p, #events_gallery li h3 {
    padding: 0;
    margin: 0 0 4px 139px;
}

#events_gallery li p.content {
    margin-bottom:24px;            
}

#events_gallery li img {
    float: left;
    margin: 0 5px 5px 0;
    padding: 2px; 
}

#events_gallery li .bottom {
    vertical-align: bottom;
    position: absolute;
    bottom: 0;
}
​ 
```

# opencv - 从 Azure Worker Role 调用 x86 dll

> ID：10786707
> 
> 赞同：1
> 
> 时间：2012-05-28T15:01:22.427
> 
> 标签：opencv, azure, pinvoke, azure-worker-roles

我创建了一个 Azure 工作者角色项目。项目的目标机器必须是 x64 机器。我应该从工作角色调用 Stasm 和 OpenCV dll。但我认为它们可以在 x86 机器上编译。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T01:32:15.973

基本上，您正在尝试在您的辅助角色中使用本机 C++ DLL，因此从技术上讲，您希望在您的辅助角色中访问本机模块。我不认为 OpenCV x86 二进制文件与 Worker ole 有任何问题，而是本机，不需要额外的努力。

完全同意@Sandrino 的建议，但想在他的#1) 建议中添加一些东西。当您创建包含使用 OpenCV 的所有逻辑的本机 EXE 时，最好直接从 ServiceDefinition 中的 ProgramEntryPoint 设置启动，并且您不需要在 Worker 角色中添加任何代码，除非您有 TCP/IP 端点并且会想在您的应用程序中使用。服务定义如下：

```
<WorkerRole name="Your_WorkerRole" vmsize="Small">
 <Runtime executionContext="limited">
  <EntryPoint>
    <ProgramEntryPoint commandLine="_your_application_.exe _Parameters_" setReadyOnProcessStart="true" />
  </EntryPoint>
 </Runtime>
 <Endpoints>
   <InputEndpoint name="_Your_Endpoint_" protocol="tcp" port="80" />
 </Endpoints> 
```

我个人认为上面的第二个选项与＃1相比可能有点过分了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:21:50.987

worker角色进程确实是x64的。但这只是针对那个特定的过程。您可以让其他进程与这些 x86 dll 交互：

*   也许您可以在控制台应用程序 (x86) 中编写所有逻辑并将其包含在您的工作角色项目中。然后在 WorkerRole.cs 类的**Run**方法中，您可以简单地启动该进程（使用 Process.Start）来完成实际工作，而您的 WorkerRole.cs 类将仅用作入口点。
*   您还可以简单地在外部进程中托管 WCF 服务（这也可以是在 x86 中编译的简单控制台应用程序）。然后，使用 NetTcpBinding 或 NetNamedPipeBinding 之类的绑定，您可以从您的辅助角色调用该服务。

# c - 为什么字符串数组不区分数值但整数数组不显示字符？

> ID：10786709
> 
> 赞同：0
> 
> 时间：2012-05-28T15:01:42.823
> 
> 标签：c, arrays, string

我遇到了一个奇怪的问题，我有一个字符串，它显示所有字符和数字，没有任何问题。但是对于整数数组，同样的事情是不可能的。据我所知，字符串是一个`NULL`终止的字符数组。那么，是什么让字符串与众不同，可以毫无歧视地显示所有内容。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:05:29.643

您指示编译器打印它们的方式使它们不同。

当你写

```
printf("%s", charPtr); 
```

你告诉编译器它应该被`charPtr`视为一个`NULL`- 终止的字符串。它查看内存`charPtr`指向并将每个字节解释为一个字符，直到它到达一个`0`.

泛型数组类型没有等价物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:55:08.733

像这样？：

```
#include <stdio.h>

int main(void)
{

  int a =1;
  int array[] = {1,2,3};
  const char c = 'a';
  char str[] = "hello";
  const char char_a[] ={119,111,114,108,100,0}; //ascii codes for world

  printf("this is a int: %d\n",a);
  printf("this is a int array: %d, prints only the first element of array\n",*array);
  printf("this is a int array: %d, prints only the  2\. element of array\n",array[1]);
  printf("this is a char: %c\n",c);
  printf("this is a char array: %c, print only first element of str\n",*str);
  printf("this is a char array: %s, prints to \\0 \n",str);
  printf("this is a char array(made from numbers): %s, prints to 0 \n",char_a);
  return 0;
} 
```

选项 %s 告诉 printf，它应该将数组中的元素视为字符，并且它应该打印它直到它达到 \0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T13:35:46.663

/* 问题的答案在底部。一句话，呵呵。*/

由于一个 char 字符串是用一个`NULL`aka`0`值分隔的，`printf`所以只要遇到一个 char 就会停止。现在假设我们有两个数组，一个`char`和一个`int`，如下所示：

```
char char_array[] = { 'a', 'b', 'c', '\0' };
int int_array[] = { 'a', 'b', 'c', '\0' }; 
```

现在，如果我们要尝试打印那些：

```
printf("char array: %s\n", char_array);
printf("int array: %s\n", (char*) int_array); 
```

我们会得到这个输出：

```
char array: abc
int array: a 
```

即使我们不将 int_array 强制转换为`char*`，它仍然会执行相同的操作（不过编译器可能会抱怨）。但为什么会这样？让我们检查保存这两个数组的内存。（在 little-endian 上）char_array 持有：`0x00636261` 而 int_array 持有（每 32 位分隔）：`0x00000061 0x00000062 0x00000063 0x00000000`

所以，发生的事情是 -`printf`读取一个字符串 one `char`，换句话说，一次读取一个字节。因此，在读取 int_array 时，它会读取第一个字节，即`0x61`（字符 'a'），然后跳转到下一个字节。但是哎呀！下一个字节`0x00`（0x0000 **00** 61）！这标志着字符串的结束并停止。

现在，让我们将 int_array 中的值设置为：

```
int int_array[] = { 0x61616161, 0x62626262, 0x63636363, '\0' }; 
```

现在可以打印了`int array: aaaabbbbcccc`！

由于值中不再有任何`0x00`间隙，因此`printf`只需打印直到它达到我们初始化为零的第四个 int。

也就是说，如果想打印一个 int 数组，因为它是一个字符串，要么必须编写一个函数/包装器来构建一个 char 字符串，该字符串只保存每个 int 的第一个字节的值，或者构建一个字符串所有的`0x00`值都消失了。

所以，回答你的问题“是什么让它们与众不同”：因为这是 C，所以所有这些都只是一堆位，也就是普通的旧数据。所以唯一的区别是我们如何对待它。有了这个，我打赌你，如果`char_array`连续分配并对齐，如果你使用`char_array`as a `*((int*) char_array)`, on little endian，它会给你一个值`6513249`( `0x00636261`) =]

# javascript - 如何从 GreaseMonkey 用户脚本请求二进制文件？

> ID：10786710
> 
> 赞同：3
> 
> 时间：2012-05-28T15:01:44.493
> 
> 标签：javascript, ajax, google-chrome, greasemonkey, binary-data

**背景故事**

我编写了一个专门用于 GreaseMonkey 和 Google Chrome 的图像内嵌脚本。它应该下载PNG文件并将它们存储在图像属性的`data:`url中。`src`这听起来可能很荒谬，但某个网站设置`Content-Disposition`为`attachment`图像，我不希望每次都弹出“另存为”对话框。

**实际问题**

该脚本使用 获取数据`XMLHttpRequest`，将其编码为 base64 并将其存储在适当的位置。到目前为止，很好。但它仅在我通过 Firebug 和 Chrome 开发控制台运行它时才有效，而当我将它用作正确的用户脚本时则无效。据我了解，这是因为 Greasemonkey 脚本不能`XMLHttpRequest`直接使用对象，而应该依赖于调用`GM_xmlhttpRequest`。但是，我无法设置`responseType`为`"blob"`或`"arraybuffer"`那样，并且该`binary`参数似乎仅适用于通过 POST 请求发送数据。我只得到 Unicode 字符串。

以防万一，图像是从与链接到它们的页面相同的域中提供的。我相信它满足“同源”的东西。

[http://wiki.greasespot.net/GM_xmlhttpRequest](http://wiki.greasespot.net/GM_xmlhttpRequest)这里是 GM_xmlhttpRequest 文档。

有没有办法`arraybuffer`从 Greasemonkey 用户脚本中获取一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T01:38:14.367

如果***是***同域，则可以使用`XMLHttpRequest`，没有问题。使用的唯一原因`GM_xmlhttpRequest`（当前具有残缺的功能子集）是图像/文件是否是跨域的。

对于**same-domain**，您可以使用 XHR2 ，如[this answer](https://stackoverflow.com/a/8781262/331508)所示。

对于**跨域**，您必须：使用`GM_xmlhttpRequest`、覆盖 mime 类型并使用自定义编码器算法。同样，这一切都显示在[同一个答案](https://stackoverflow.com/a/8781262/331508)中。

* * *

*但是，*听起来您只是想让下载图像更容易？如果是这样，那么您最好使用出色的[DownThemAll 扩展](http://www.downthemall.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:18:36.900

> overrideMimeType 字符串（兼容性：0.6.8+）可选。与请求一起指定的 MIME 类型（例如“text/html; charset=ISO-8859-1”）。

您可以将其设置为`plain/text; charset=x-user-defined`（类型无关紧要，但字符集确实如此），通过响应字符串按位与并将值添加到类型化数组并获取缓冲区：

```
var text = xhr.responseText,
    len = text.length,
    arr = new Uint8Array(len),
    i = 0;

    for( i = 0; i < len; ++i ) {
        arr[i] = text.charCodeAt(i) & 0xFF;
    }

    arr.buffer //The arraybuffer 
```

注意：这是针对原始二进制响应，而不是 base64。

# c# - 自定义 ITemplate 中的 FindControl

> ID：10786712
> 
> 赞同：2
> 
> 时间：2012-05-28T15:01:52.127
> 
> 标签：c#, asp.net, .net, templates, itemplate

我有一个使用简单 ITemplate 的自定义 UserControl：

```
<asp:Panel runat="server" ID="pnlExpander" CssClass="expander">
    <asp:HyperLink runat="server" ID="lnkExpand" Text="More Options" NavigateUrl="#" CssClass="lnkExpand"/>
    <asp:Panel runat="server" ID="pnlContent" CssClass="expanderContent" style="display: none">
        <asp:PlaceHolder runat="server" ID="plcContent"/>
    </asp:Panel>
</asp:Panel> 
```

该模板使用两个简单的属性呈现：

```
public class Expander {
    private ITemplate _contentTemplate;
        public ITemplate ContentTemplate {
            get { return _contentTemplate; }
            set { _contentTemplate = value; }
    }
    protected override void OnPreRender(EventArgs e) {
            if (ContentTemplate != null) {
                ContentTemplate.InstantiateIn(plcContent);
            }
    } 
```

一切都正确显示，但我不能在模板中使用 FindControl。我从 VS intellisense 获得了对我的组合框的引用，但是当我实际加载页面时，它是 null 的编译错误。

要在模板中找到组合框，我正在使用：

```
var cboFilterCriticality = AspNetUtils.FindControlRecursive(optionsExpander,"cboFilterCriticality") as DropDownList; 
```

实际的模板在页面上如下所示：

```
<l49:Expander runat="server" ID="optionsExpander">
    <ContentTemplate>
        ... other controls
            <asp:DropDownList ID="cboFilterCriticality" runat="server" ValidationGroup="filterGrid" DataTextField="Key" DataValueField="Value" />
    </ContentTemplate>
</l49:Expander> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:10:15.737

我通过更改使用 ITemplate 的 UserControl 解决了这个问题。出于某种原因，它正在调用`InstantiateIn`，`OnPreRender`这显然为时已晚，无法在页面中呈现任何由 Page_Load 拾取的内容 - 请参阅[Page LifeCycle 和 UserControls (half way down)](http://blogs.thesitedoctor.co.uk/tim/2006/06/30/Complete+Lifecycle+Of+An+ASPNet+Page+And+Controls.aspx)。我移到`InstantiateIn`UserControl`OnInit`中，问题自行解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T05:39:07.947

Asp.net 的 WebForm 页面：

```
<asp:Panel runat="server" ID="pnlExpander" CssClass="expander">
    <asp:HyperLink runat="server" ID="lnkExpand" Text="More Options" NavigateUrl="#" CssClass="lnkExpand"/>
    <asp:Panel runat="server" ID="pnlContent" CssClass="expanderContent" style="display: none">
        <asp:PlaceHolder runat="server" ID="plcContent"/>
    </asp:Panel>
</asp:Panel> 
```

定义 Expander 类如下：

```
public class Expander { 
    public ITemplate ContentTemplate {get ;set;}
    public HtmlGenericControl ContentTemplateContainer{get;set;}
    protected override void OnInit(EventArgs e) {
        this.ContentTemplateContainer = new HtmlGenericControl("div");
        if (ContentTemplate != null) {
            ContentTemplate.InstantiateIn(container);
        }
        plcContent.Controls.Add(container);

    }
} 
```

在页面的 OnInit 中：

```
public override void OnInit(EventArgs e){
    base.OnInit(e);
    ViewState["ContentTemplateContainerID"] =  ContentTemplateContainer.ClientID;
} 
```

最后在 Javascript 中：

```
var containerID = ViewState("ContentTemplateContainerID");
var elID = $get(containerID)[0].id;
var expander = $find(elID); 
```

# objective-c - 点语法或括号语法对于属性访问是否正确？

> ID：10786714
> 
> 赞同：1
> 
> 时间：2012-05-28T15:02:06.667
> 
> 标签：objective-c, syntax, properties

假设我有

```
@interface A : NSObject
@property (nonatomic, strong) NSMutableArray *array;
@end 
```

稍后在另一个类`B`中，我想访问该数组，以检查其中有多少项目。`B`我可以在( `a`is an instance of )中做两件事之一`A`：

选项1

```
[a.array count] 
```

选项 2

```
[[a array] count]; 
```

哪个选项是最好的方法？`[a array]`当用作 getter 方法时，选项 2 是访问数组的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:04:32.990

如果您合成了数组，两者都是相同的。在第一个中，您只需调用属性，在第二个中，您正在调用由 @synthesize 操作生成的 getter 方法。

并确保第二个选项是正确的方法，因为@synthesize 有两种方法

1- 与属性名称相同的 getter 2- 以属性名称开头的 setter，首字母大写，如 setArray。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T17:50:55.700

正如萨德所说，如果你合成了阵列，两者之间没有区别。但是，我建议括号语法在所有方法调用中保持一致，因为所有其他 Objective-C 方法（除了 C 中的函数）都使用括号语法来调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:58:37.987

在您决定重命名生成的 getter/setter 方法之前没有区别，并且消息可能会变得无效。

对于公共实例变量，您可以跳过访问器方法（属性和方法样式）并使用结构取消引用运算符：

```
@interface A : NSObject
{
   NSMutableArray *array;
}

@property (nonatomic, strong) NSMutableArray *array;
@end 
```

班A.m

```
[self->array count]; 
```

B类.m

```
[a->array count]; 
```

这样做，您放弃了使用具有不同属性的属性（在两种访问样式中）进行的操作和内存管理优化的便利性，请参阅[更多](http://cocoacast.com/?q=node/103)。

作为 NSString 属性的示例

```
@property (readwrite, copy) NSString *sVar; 
```

生成的 setter 如下所示：

```
-(void)setSVar:(NSString*)inSVar
{
        if (self->sVar != inSVar)
        {
                [self->sVar release];
                self->sVar = [inSVar copy];
        }
} 
```

# objective-c - .m 文件的引用在哪里？

> ID：10786715
> 
> 赞同：2
> 
> 时间：2012-05-28T15:02:15.883
> 
> 标签：objective-c, ios, xcode

我创建了一个新的 Xcode 项目（iOS 应用程序，选项卡式应用程序）。

现在我看到了 Xcode 为我生成的一个示例代码（我根本没有接触过），当然，它可以在 iPhone 模拟器上运行。

我正在浏览代码，虽然我看到了对 .h 文件的引用，但在任何创建的文件中都没有看到对 .m 文件的任何引用。（如在

```
#import "MRTAppDelegate.h"

#import "MRTFirstViewController.h"

#import "MRTSecondViewController.h" 
```

编译器是否只处理您添加到项目中的任何 .m 文件？是否有一份清单，所有这些都被考虑在内？

ps 很明显，我也没有什么 Objective C 背景，无论我能从大学 C 课程中学到什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:09:31.990

如果你去构建短语 -> 编译源代码中指定的所有 .m 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:10:59.393

您的基本假设是正确的，即 Xcode 将为您链接标头和实现。只需确保您已将 .m 文件添加到您的构建源代码中，其余的工作将由 Xcode 完成。

在其他类中，您也总是要#import 头文件，而不是实现文件。

# jquery - Jquery表单验证不显示错误消息

> ID：10786716
> 
> 赞同：1
> 
> 时间：2012-05-28T15:02:17.290
> 
> 标签：jquery, jquery-plugins, jquery-validate

我正在尝试使用 jquery 验证我的表单，但我无法让它工作。当我单击提交时，它不会显示任何错误消息。

你能告诉我问题出在哪里吗？

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
 <script type="text/javascript" src="validation.js"></script>

 <script>
 $(document).ready(function() { 
// validate signup form on keyup and submit 
var validator = $("#signupform").validate({ 
    rules: { 
        fname: "required", 
        lname: "required", 
        username: { 
            required: true, 
            minlength: 2, 
            remote: "<? echo base_url();?>mycontroller/function" }
       }, 
    messages: { 
        fname: "Enter your firstname", 
        lname: "Enter your lastname", 
        username: { 
            required: "Enter a username", 
            minlength: jQuery.format("Enter at least {0} characters"), 
            remote: jQuery.format("{0} is already in use") 
        }, 

    }, 

}); 

</script> 
```

我的表格

```
 <!--I am trying to show all the error message here --> 

<form id="signupform" autocomplete="off" method="get" action="">

 FName:
 <input id="fname" name="fname" type="text" value="" />
 Lname:
 <input id="lname" name="lname" type="text" value="" />
 username:
 <input id="username" name="username" type="text" value="" />   <br>      

 <input id="signupsubmit" name="signup" type="submit" value="Signup" />          
 </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:10:37.727

正如我在评论中提到的，它在小提琴中工作

确保脚本已加载，您可以尝试使用 jquery 和 validate.js 的 cdn 托管版本

**jQuery CDN**

[http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)

**验证.js CDN**

[http://ajax.aspnetcdn.com/ajax/jQuery.Validate/1.6/jQuery.Validate.js](http://ajax.aspnetcdn.com/ajax/jQuery.Validate/1.6/jQuery.Validate.js)

如果它适用于此，则表示未加载脚本并检查您的链接

编辑

```
$(":submit").click(function(e){

    if(!$(this).closest("form").valid()){
        e.preventDefault();
        var errText="";
        $(".error").each(function(i,j){
         errText+=$(j).text()+"<br/>";           
        });
        $("#errDiv").html(errText).css({color:'Red'});  

        }

}); 
```

[http://jsfiddle.net/85DM4/17/](http://jsfiddle.net/85DM4/17/)

它不是逗号分隔的，但我相信你会明白的

# c# - 在哪里可以找到类 System.Windows.UIElement

> ID：10786718
> 
> 赞同：2
> 
> 时间：2012-05-28T15:02:21.067
> 
> 标签：c#

我正在搜索参考`System.Windows.UIElement`，但在 .NET 环境中找不到它。我需要使用 type 或 name `UIElement`。你有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T15:09:58.333

如果您搜索[MSDN](http://msdn.microsoft.com/)，`UIElement`您将[在此页面上](http://msdn.microsoft.com/en-us/library/system.windows.uielement.aspx)找到以下信息：

*   类`UIElement`位于`System.Windows`命名空间中，因此您必须使用`System.Windows.UIElement`或添加`using System.Windows`指令
*   `UIElement`在`PresentationCore`程序集中，因此您必须添加对`PresentationCore.dll`
*   `UIElement`适用于 .NET 3.0 及更高版本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T15:04:45.680

我希望您需要添加对`PresentationCore`程序集的引用。

# android - 如何在 android listview 中实现按日期划分？

> ID：10786719
> 
> 赞同：0
> 
> 时间：2012-05-28T15:02:27.173
> 
> 标签：android, listview

我想按日期对 ListView 中的项目进行分组，每个部分的标题是项目日期，并且具有相同日期的其他项目必须在该部分中。

我不知道我会得到多少部分，所以我需要动态创建部分。

我的项目实现是

```
public class Item 
{

   private String name;
   private Date date;
   /*....*/
} 
```

我怎样才能实现这个。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:12:58.117

我认为**可扩展列表视图**也是您的不错选择。试试这个[链接](http://developer.android.com/reference/android/widget/ExpandableListView.html)

您可以对与日期相关的项目进行分组。当您单击父（日期）时，它的所有子项（与日期相关的项目）都会出现。

# css - jQuery Mobile 是否提供了一种机制来扩展它的主题模型

> ID：10786723
> 
> 赞同：1
> 
> 时间：2012-05-28T15:02:46.233
> 
> 标签：css, jquery-mobile

我正在尝试向 jQuery Mobile 主题添加一个自定义类。CSS 应该如下所示：

```
.ui-icon-form-ok-f {
    background-color: #f09000 !important;
    data-icon: check !important;
} 
```

但我怎样才能让 jQuery Mobile 识别这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T11:56:54.013

# 如何将自定义图标样式识别为 jqm

* * *

## 对于任何的每个元素

当您设置`[data-icon=AAA]`按钮时，jqm 在按钮`<span class="ui-icon-AAA">`内部创建。

那是：

```
<a data-role="button" data-icon="form-ok-f">custom icon button</a> 
```

加载此 html 时，jqm 创建如下：

```
<a href="#" data-role="button" data-icon="form-ok-f" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-theme="c" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-icon-left ui-btn-up-c">
   <span class="ui-btn-inner ui-btn-corner-all">
      <span class="ui-btn-text">custom icon button</span>
      <span class="ui-icon ui-icon-form-ok-f ui-icon-shadow">&nbsp;</span>
   </span>
</a> 
```

因此，jqm 可以识别您的自定义图标类。

```
.ui-icon-form-ok-f {
    background-color: #f09000 !important;
    background-position:-252px 50% !important; /* this mean 'data-icon="check"' on css */
}​​​​ 
```

### 通过这种方式，页面可以加载“ui-icon-alt”

```
<a data-role="button" data-icon="check ui-icon-alt">custom icon button</a> 
```

Jqm 呈现黑色图标（Alt 图标颜色）而不是白色图标。

* * *

## 对于任何一个主题

如果您想为任何主题的每个主题“自定义”图标，您应该像这样加载 js：

```
$(function(){
 var $alttheme = new Array( "f", "g" );　// this arr means 'data-theme="f", data-theme="g"' 
 var at = new Array();
 for( t in $alttheme ){
  at.push(':jqmData(theme="' + alttheme[t] + '"):jqmData(icon="check") > span > .ui-icon');
 }
 $(at.join()).addClass('ui-icon-"YOUR CUSTOM NAMES"');
}); 
```

*您的自定义名称（例如，form-ok、form-ng ...）

或者

```
$(function(){
 $(':jqmData(theme="f"):jqmData(icon="check") > span > .ui-icon').addClass('ui-icon-form-ok-f');
 $(':jqmData(theme="g"):jqmData(icon="check") > span > .ui-icon').addClass('ui-icon-form-ok-g');
}); 
```

前者为“theme g”和“theme f”中的图标添加了相同的类，后者为“theme g”和“theme f”中的图标分别添加了一个单独的类。

* * *

## 最后

我要准备[一些样品](http://jsfiddle.net/FQY9K/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:45:40.737

我认为您还应该覆盖其他类，例如`.ui-bar-f`, `.ui-body-f`, `.ui-btn-up-f`,... 然后使用`data-theme="f"`每个标签的属性来指定您要为组件使用这个新主题，但我还没有设法对其进行测试。

更多信息在[关于主题的 jQuery-Mobile 文档中](http://jquerymobile.com/demos/1.1.0/docs/api/themes.html)。

希望能帮助到你！

# asp.net-mvc-3 - 带有集合的 Ajax.BeginForm

> ID：10786724
> 
> 赞同：-1
> 
> 时间：2012-05-28T15:02:47.913
> 
> 标签：asp.net-mvc-3

难道不能在集合模型中使用“Ajax.BeginForm”吗？表单重复，Html 元素正确呈现，值没问题。但是，通过操作的所有参数都为空。

我已经意识到，它的帖子是这样的：

```
ProductList[0].Id   501
ProductList[0].quantity 1 
```

但是它应该像

```
Id  501
quantity    1 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T20:03:13.440

您应该在 UpdateModel 函数中使用前缀：

```
UpdateModel(MyModel, "MyModel") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:06:25.020

我用纯html解决了，谢谢。

```
<input type="hidden" value="@Model.Id" name="Id"/>
<input type="text" value="" name="quantity"/> 
```

# html - 如何在动作中使用表单值？

> ID：10786726
> 
> 赞同：0
> 
> 时间：2012-05-28T15:02:51.557
> 
> 标签：html, forms, grails

我正在尝试在 html 中创建一个表单，该表单使用您输入的值来形成目标 URL。

```
<form action="../search/${params.q}" method="post" id="q">
Busqueda: <input type="text" name="q" /><br />
</form> 
```

这就是我正在做的，但它不起作用，任何线索？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:07:53.020

您需要使用脚本处理此问题 - 服务器端或客户端 (JavaScript)。

单独的 HTML 无法以您使用它们的方式处理参数。

因此，您需要发布表单（就像您已经在做的那样）并通过将您的请求重定向到新地址来处理回发，或者在单击提交按钮并加载新地址时使用 JavaScript 捕获字段的值在浏览器窗口中。

我建议服务器端是最好的选择，因为 JavaScript 可能被禁用或不可用。

# javascript - UIWebView 更改源中文本的行距

> ID：10786728
> 
> 赞同：0
> 
> 时间：2012-05-28T15:02:56.277
> 
> 标签：javascript, xcode, ios5, uiwebview, stringbyevaluatingjavascr

我有一个 javascript 方法可以传递给 stringByEvaluatingJavaScriptFromString: 在 UIWebView 子类中。

```
var head = document.getElementsByTagName('head')[0],
    style = document.createElement('style'),
    rules = document.createTextNode('* { line-height: 20px !important; }');
style.type = 'text/css';
if(style.styleSheet)
    style.styleSheet.cssText = rules.nodeValue;
else style.appendChild(rules);
head.appendChild(style); 
```

我已经将它添加到 stringByEvaluatingJavaScriptFromString: 方法中，只要我指定一个像素值，代码就可以工作。如果我使用像下面的代码这样的变量，它不会做任何事情。我究竟做错了什么？

我正在使用 largeBool 来告诉我间距是否需要增加或减少。然后我设置最大值和最小值，并使用线高作为变量。

```
 - (void)changeLineSpacingLarger:(BOOL)largerBool {

    if (largerBool == YES) { // A+
        lineHeight = (lineHeight < 100) ? lineHeight +10 : lineHeight;
    }

    else if (largerBool == NO) { // A-
        lineHeight = (lineHeight > 20) ? lineHeight -10 : lineHeight;
    }

    NSString *jsString = [[NSString alloc] initWithFormat:@"var head = document.getElementsByTagName('head')[0], style = document.createElement('style'), rules = document.createTextNode('* { line-height: '%d%%'px !important; }'); style.type = 'text/css'; if(style.styleSheet) style.styleSheet.cssText = rules.nodeValue; else style.appendChild(rules); head.appendChild(style);", lineHeight];
    [self stringByEvaluatingJavaScriptFromString:jsString];
} 
```

我还使用 UIWebView 的 didFinishLoading 委托方法来保存当前的行距值。

```
- (void)updateLineSpacingValue {
    NSString *jsString = [[NSString alloc] initWithFormat:@"var element = document.getElementsByTagName('h1')[0], style = window.getComputedStyle(element), lh = style.getPropertyValue('line-height'); return lh;", textFontSize];
    NSString *stringValue = [self stringByEvaluatingJavaScriptFromString:jsString];

    lineHeight = [stringValue intValue];

    NSLog(@"Line Height: %i", lineHeight);
} 
```

我得到的只是日志中的“0”。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:55:27.990

First, `line-height: '%d%%'px` should be `line-height: '%d'px`. Otherwise, you will build something like `line-height: '12%%'px`, which won't be parsed when the source is rendered.

* * *

Second, `stringValue` will be something like "12px", so you cannot directly convert it to a number without removing "px".

# servicestack - 使用 IPWorks nSoftware 的 Json 反序列化 BodyStyle Wrap 问题

> ID：10786729
> 
> 赞同：2
> 
> 时间：2012-05-28T15:02:58.703
> 
> 标签：servicestack, ipworks

我正在使用**IPWorks nsoftware**创建服务。在其中，调用我正在使用的服务

```
 Rest rest = new Rest();
        rest.Accept = "application/json";
        rest.ContentType = "application/json";
        rest.User = "UserName";
        rest.Password = "Password";
        rest.Get(@"http://Foo.com/roles.json");
        string result = rest.TransferredData;
        var listRoles = JsonSerializer.DeserializeFromString<List<role>>(result); 
```

我将 Json 响应作为字符串获取

> [{"角色":{"名称":"管理员","created_at":"2012-02-11T09:53:54-02:00","updated_at":"2012-04-29T23:43:47- 04:00","id":1"}},{"role":{"name":"NormalUser","created_at":"2013-02-11T08:53:54-02:00","updated_at ":"2013-04-29T23:43:47-03:00","id":2"}}]

这里的 json 字符串包含我的域对象“角色”，它被附加到我的响应中（即消息的正文样式被包装）。我正在使用**ServiceStack.Text**的 Deserializer 将响应字符串转换为我的对象。但是既然是包裹的，那么反序列化就不正确了。

这里有什么我想念的吗？是否有任何“BodyStyle”属性可以添加到 Rest 请求中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T04:00:12.773

[GitHubRestTests 展示了您可以使用ServiceStack 的 JSON Serializer](https://github.com/ServiceStack/ServiceStack.Text)反序列化 3rd 方 json API 的一些[不同方法](https://github.com/ServiceStack/ServiceStack.Text/blob/master/tests/ServiceStack.Text.Tests/UseCases/GitHubRestTests.cs)。

如果您想将其反序列化为类型化的 POCO，那么根据您的 JSON 有效负载判断，类型化的 POCO 应该类似于：

```
public class RolePermissionWrapper 
{
    public Role Role { get; set; }
    public Permission Permission { get; set; }
}

public class Role 
{ 
    public long Id { get; set; } 
    public string Name { get; set; } 
    public DateTime? Created_At { get; set; } 
    public DateTime? Updated_At { get; set; } 
} 

var listRoles = JsonSerializer.DeserializeFromString<List<RolePermissionWrapper>>(result); 
```

# ruby - Async_Sinatra 仅在从浏览器的选项卡请求时阻塞

> ID：10786735
> 
> 赞同：1
> 
> 时间：2012-05-28T15:03:41.480
> 
> 标签：ruby, asynchronous, sinatra

我正在尝试异步 Sinatra 并遇到问题。

使用以下简单代码时：

```
require 'sinatra'
require 'sinatra/async'

Sinatra.register Sinatra::Async

aget '/delay/?' do
  logger.info "Connected"
  EM.add_timer(5) { body {"delayed for 5 seconds" } }
end 
```

当我与 ab 同时请求 /delay/ 时，它运行良好，所有请求都需要 5 秒。

但是，当我从 2 个 Chrome 选项卡（或 Firefox）中请求 /delay/ 时，它确实会阻塞，并且它会按顺序执行，导致第二个请求需要 10 秒。

有趣的是，从多个 Safari 选项卡请求它，再次执行良好（并行）。

任何想法，什么可能导致这种行为？

宝石版本：

```
gem 'sinatra', "~> 1.3.2"
gem "eventmachine", "1.0.0.beta.4.1"
gem 'thin', "~> 1.3.1"
gem "async_sinatra", "~> 1.0.0" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:39:45.067

更新：似乎浏览器缓存是导致 Firefox 和 Chrome 出现这种情况的原因。任何 URL 只能有 1 个活动缓存写入。添加查询参数实际上可以解决此问题。

来源：[对同一 URL 的多个 Ajax 请求](https://stackoverflow.com/questions/9189591/multiple-ajax-requests-for-same-url)

# csv - Microsoft Works 中 CSV 文件中的有趣字符

> ID：10786736
> 
> 赞同：1
> 
> 时间：2012-05-28T15:03:42.747
> 
> 标签：csv

出于某种原因，当我打开一个在 Excel 和记事本中看起来完全正常的 CSV 文件时，在 Microsoft Works 中，文件中首先出现了一些奇怪的字符。首先，我的意思是它们出现在单元格 A1 中，在该单元格中出现的文本之前。

这是一个示例文件

```
Illustration carrier,Net death benefit,Issue date,Issue state,Policy type,Member lives,Policy date,Termination of coverage,Termination of coverage action required,Accumulated value,AV,SV,Illustrated Annual Level Premiums,LP to NDB ratio,Premium financed,Name of program,Primary insured age,Primary insured gender,Secondary insured age,Secondary insured gender,Current bid,Time left,Bid1,Bid2,Bid3,Bid4,Bid5,Bid6,Bid7,Bid8,Bid9,Bid10,Bid11,Bid12,Bid13,Bid14,Bid15,Bid16,Bid17,Bid18,Bid19,Bid20
srwer,$0.00,14/05/2012,us state 2,policy Type 1,member life 4,16/05/2012,-,,$0.00,-,-,,Not yet implemented,no,,0y 0m,Demale,,Female,$0.00,"2 days, 7 hours, 51 minutes, 36 seconds". 
```

我使用这种方法在我的应用程序中创建这些文件

```
protected ActionResult ExportToCSV(string csvExport)
{
   var output = new MemoryStream();
   var writer = new StreamWriter(output, Encoding.UTF8);

   writer.Write(csvExport);

   writer.Flush();
   output.Position = 0;

   return File(output, "text/comma-seperated-values", "export.csv");
} 
```

我有几个问题

1.  有没有办法更改此代码以将文件保存为 ANSI 格式？
2.  我能否在记事本、Works 和 Excel 中完美查看文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:07:00.257

我怀疑这是 UTF-8[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)：

```
ï»¿ 
```

按照惯例，这些字符出现在文件的开头表明该文件是使用[UTF-8](http://en.wikipedia.org/wiki/UTF-8)编码的。现代应用程序会寻找这些字符并在它们存在时自动删除它们。但是 Microsoft Works 是一个可能不支持 UTF-8 的旧应用程序。

要删除字符，您可以在记事本中打开文件，选择文件 > 另存为，然后在编码下拉列表中选择[ANSI 。](http://en.wikipedia.org/wiki/Windows-1252)

**更新：**如果您需要支持 Microsoft Works 等旧的非 Unicode 应用程序，那么您可以在 .NET 中创建文本文件时指定[`Encoding.ASCII`](http://msdn.microsoft.com/en-us/library/system.text.encoding.ascii)或。[`Encoding.Default`](http://msdn.microsoft.com/en-us/library/system.text.encoding.default.aspx)但 MSDN Library 警告：

> 不同的计算机可以使用不同的编码作为默认编码，甚至可以在单台计算机上更改默认编码。因此，从一台计算机流式传输到另一台计算机或什至在同一台计算机上的不同时间检索的数据可能会被错误地翻译。此外，该`Default`属性返回的编码使用最佳匹配回退将不受支持的字符映射到代码页支持的字符。由于这两个原因，一般不建议使用默认编码。为确保正确解码编码字节，您的应用程序应使用带有前导码的 Unicode 编码，例如`UTF8Encoding`or 。`UnicodeEncoding`另一种选择是使用更高级别的协议来确保编码和解码使用相同的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:07:23.547

可能 csv 是 Unicode，而这些是 Unicode“神奇”字符，表示您是大端还是小端？只是一个猜测。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-29T10:37:25.587

尝试以下操作：

```
 StreamWriter writer= new StreamWriter(fullpath, false, Encoding.Unicode); 
```

# jira - JIRA 如何知道未解决的问题是什么？

> ID：10786740
> 
> 赞同：-1
> 
> 时间：2012-05-28T15:04:07.850
> 
> 标签：jira

我正在使用在 JIRA 中设计的自定义工作流程，其中包含自定义转换和自定义问题状态。

JIRA 如何知道什么是未解决的问题，以便显示项目的统计信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T00:23:43.847

如果系统解决方案字段不包含任何值，则问题未解决。如果 Resolution 字段包含任何值，它将被解析。

更多信息请访问[https://confluence.atlassian.com/display/DOCSPRINT/Resolved,+Resolution+and+Resolution+Date](https://confluence.atlassian.com/display/DOCSPRINT/Resolved,+Resolution+and+Resolution+Date)

# apache-flex - 放大 Flex 中的点组

> ID：10786750
> 
> 赞同：0
> 
> 时间：2012-05-28T15:04:38.050
> 
> 标签：apache-flex, flex4, esri

我在 Flex 4 中有一个带有地图、点数据库和搜索工具的应用程序。当用户输入内容并进行搜索时，它会返回数据库中对象的名称、详细信息和坐标。

我有一个功能，当我单击搜索结果之一时，它会缩放地图的选定点。

问题是，我想要一个可以一次缩放所有结果点的函数。例如，如果我搜索“高大的树木”并返回 10 个点，我希望地图缩放到我可以一次看到 10 个点的位置。

下面是我用来一次缩放一个点的代码，我认为 flex 会有某种功能“缩放到一组点”，但我找不到这样的东西。

```
private function ResultDG_Click(event:ListEvent):void
        {

            if (event.rowIndex < 0) return;

            var obj:Object = ResultDG.selectedItem;

            if (lastIdentifyResultGraphic != null)
            {
                graphicsLayer.remove(lastIdentifyResultGraphic);
            }
            if (obj != null)
            {
                lastIdentifyResultGraphic = obj.graphic as Graphic;
                switch (lastIdentifyResultGraphic.geometry.type)
                {
                    case Geometry.MAPPOINT:
                        lastIdentifyResultGraphic.symbol = objPointSymbol
                        _map.extent = new Extent((lastIdentifyResultGraphic.geometry as MapPoint).x-0.05,(lastIdentifyResultGraphic.geometry as MapPoint).y-0.05,(lastIdentifyResultGraphic.geometry as MapPoint).x+0.05,(lastIdentifyResultGraphic.geometry as MapPoint).y+0.05,new SpatialReference(29101)).expand(0.001);

                        break;
                    case Geometry.POLYLINE:
                        lastIdentifyResultGraphic.symbol = objPolyLineSymbol;
                        _map.extent = lastIdentifyResultGraphic.geometry.extent.expand(0.001);

                        break;
                    case Geometry.POLYGON:
                        lastIdentifyResultGraphic.symbol = objPolygonSymbol;
                        _map.extent = lastIdentifyResultGraphic.geometry.extent.expand(0.001);

                        break;
                }
                graphicsLayer.add(lastIdentifyResultGraphic);

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T19:51:05.300

请参阅 com.esri.ags.Utils 包中的 GraphicUtil 类。您可以使用“getGraphicsExtent”方法从图形数组生成范围。然后使用范围设置地图的缩放系数：

```
var graphics:ArrayCollection = graphicsLayer.graphicProvider as ArrayCollection;
var graphicsArr:Array = graphics.toArray();

// Create an extent from the currently selected graphics
var uExtent:Extent;

uExtent = GraphicUtil.getGraphicsExtent(graphicsArr);

// Zoom to extent created
if (uExtent) 
{
    map.extent = uExtent;
} 
```

在这种情况下，它将缩放到图形图层的全部内容。您始终可以创建一个仅包含要缩放到的要素的数组。如果您发现缩放距离您的数据太近，您也可以在设置范围后使用 map.zoomOut()。

注意：如果您的图形中有 TextSymbols，请小心，它会破坏 GraphicUtil。在这种情况下，您需要使用 TextSymbols 过滤掉 Graphics

Derp：没有看到线程是 5 个月大...希望我的回答对其他人有所帮助

# .net - Visual Studio 项目转换

> ID：10786751
> 
> 赞同：0
> 
> 时间：2012-05-28T15:04:42.020
> 
> 标签：.net, visual-studio, version-control

我有一个由多个项目使用的 VS2008（用于 .net framework 3.5）创建的类库项目。

我正在使用 VS2010 开始一个新项目，我想在新项目中使用这个库，同时保持 VS2008 项目正常工作。另外我想共享源文件......也就是说，我不想拥有两个源文件的副本。我知道如何通过从头开始创建一个新项目并将现有文件添加为链接来做到这一点。有没有更自动化的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T05:49:49.427

按照 Joel 的建议，使用相同的版本控制存储库，但在同一目录中创建两个不同的 VS 项目文件（例如`MyProject2008.csproj`和）。`MyProject2010.csproj`（从 VS 2008 复制一个，然后仅将副本升级到 2010。如果需要，解决方案文件也是如此。）

此解决方案的唯一缺点是对项目结构的更改（添加文件、移动文件等）有点麻烦，因为您必须执行两次。但由于 VS 2008 和 2010 项目文件不兼容，我认为您无法避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:07:43.563

您正在使用版本控制，对吗？你应该。

如果您是，只需从源代码管理中检查您的项目两次：每个解决方案一次。这样，任何一个地方对代码的任何更改都可以提交回存储库并更新/拉入另一个。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T05:34:42.263

如果你是版本控制的，你可以使用[Share 操作](http://version-control.net/version-control-howto/share-command/)将库共享到新项目。这样，对一个项目所做的修改将自动反映到共享的项目中。

如果您的 VS2008 和 VS2010 项目之间的库有点不同，那么您可以使用[Branch](http://version-control.net/version-control-howto/branch/)。它允许您在不影响其他副本的情况下更新源代码。

# php - preg_match 问题（没有像我预期的那样解析）

> ID：10786757
> 
> 赞同：0
> 
> 时间：2012-05-28T15:05:02.483
> 
> 标签：php, regex, pcre

我正在解析邮件标头，并且正在寻找“boundary=...”参数。

```
$content = '..Content-Type: multipart/alternative;
    boundary="----=_NextPart_000_10CD_01CD3CB2.7C22E7C0"
X-Mailer: Microsoft CDO for Windows 2000..' 
```

我正在使用以下内容，但它们都不起作用：

```
 $boundary = preg_replace('#(.*)boundary="(.*)"(.*)#is',"$2",$content);

    $boundary = preg_replace('#boundary="(.*)"#i',"$2",$content); 
```

第一行返回：

```
NextPart_000_10CD_01CD3CB2.7C22E7C0"
X-Mailer: Microsoft CDO for Windows 2000 
```

而第二个：

```
Content-Type: multipart/alternative;
    ----=_NextPart_000_10CD_01CD3CB2.7C22E7C0
X-Mailer: Microsoft CDO for Windows 2000 
```

我了解第二行的作用，并且做得正确。但是当第一行不解析第二个双引号时，我不明白。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:13:35.163

```
preg_match('/boundary="([^"]+)"/m', $content, $m);
echo $m[1]; // ----=_NextPart_000_10CD_01CD3CB2.7C22E7C0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:09:00.720

我终于可以使用否定匹配器 [^"]* 解决它

```
$boundary = preg_replace('#(.*)boundary="([^"]*)(.*)#is',"$2",$content); 
```

但是，如果有人知道我的问题的答案，将不胜感激。我不完全理解与 s 修饰符一起使用的 (.*) 的行为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:35:25.283

在您的自我回答中回答您的问题：

`.*`，当与`s`修饰符一起使用时，还包括换行符 iirc。

[http://us3.php.net/manual/en/reference.pcre.pattern.modifiers.php](http://us3.php.net/manual/en/reference.pcre.pattern.modifiers.php)

> s (PCRE_DOTALL)
> 
> 如果设置了此修饰符，则模式中的点元字符匹配所有字符，包括换行符。没有它，换行符被排除在外。这个修饰符等价于 Perl 的 /s 修饰符。诸如 [^a] 之类的否定类始终匹配换行符，与此修饰符的设置无关。

# java - 我应该使用哪种布局来实现两列 20% 和 80%（Java）？

> ID：10786763
> 
> 赞同：1
> 
> 时间：2012-05-28T15:05:33.667
> 
> 标签：java, swing, swt, layout-manager

我想实现以下目标：

![在此处输入图像描述](../Images/4f10fa06cc3df4656013bc7b9bef1340.png)

第一列占总宽度的 20%，第二列占总宽度的 80%。它应该是动态的（例如，当我扩展/收缩时，它应该像css中的液体布局一样相应地改变）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:25:04.227

MigLayout 是你最好的朋友： http: [//www.miglayout.com](http://www.miglayout.com)

代码如下所示：

```
JPanel panel = new JPanel(new MigLayout("wrap 2, fill", "[fill,20%][fill,80%]"));
panel.add(panel1);
panel.add(panel2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-28T16:44:31.997

对于 Swing，您将使用网格袋布局。

你有两列，一行。

将设置 gridwidth 属性，以便第一列是 0.2，第二列是 0.8 或任何一组数字，这样第一列的值是第二列值的 1/4。

两列的网格高度应该相同。

你可以尝试一下填充。如果您不介意 UI 中未填充组件的空间，请使用 none。如果您希望它们很好地调整大小但保持 0.2 到 0.8 的比例，请尝试水平并查看是否自动保持正确的比例。

如果没有，则尝试将第一列的权重设置为 0.2，将第二列的权重设置为 0.8。无论用户制作的 JPanel 有多大，你都试图保持 2 到 0.8 的比例。

如果您需要更多帮助，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-28T15:30:54.707

如果您询问桌面 Java 应用程序（基于 Swing），您可以使用 GridBagLayout - JDK 附带的标准布局。虽然有点难以理解。 [http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

最好的解决方案是制作自己的布局 - 这一点都不难。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-28T16:30:09.590

GridBagLayout 令人恐惧多于理解。

我曾在一个应用程序上工作过，其中大多数屏幕都有页眉页脚和左侧导航面板。我当时使用了 Gridbag 布局，只有在调整大小时才给出了所需的行为。曾经用过visualcafe。

您的两列要求似乎是开始使用 Gridbag 的一个很好的要求，因为只有几个 gridbag 约束会受到影响。如果您有更多行/列，我建议使用工具来构建 UI。

# clojure - 懒惰和stackoverflow

> ID：10786765
> 
> 赞同：6
> 
> 时间：2012-05-28T15:05:36.040
> 
> 标签：clojure, stack-overflow, lazy-evaluation, lazy-sequences

我写了以下内容：

```
(fn r [f xs]
  (lazy-seq
    (if (empty? xs)
    '()
    (cons (f (first xs)) (r f (rest xs)))))) 
```

解决 4clojure.com 的问题 #118：[http ://www.4clojure.com/problem/118](http://www.4clojure.com/problem/118)

它要求在不使用*map等的情况下重新实现**map*并且该解决方案通过了测试（我不知道它是否正确：它非常接近所说的其他解决方案）。

 *因为问题表明它必须是惰性的，所以我通过将我的解决方案“包装”在*惰性序列*中来编写上面的代码......但是我不明白*惰性序列*是如何工作的。

我不明白这里的“懒惰”是什么，也不明白如何测试它。

当我问`(type ...)`我时，不出所料，我得到了一个*clojure.lang.LazySeq*但我不知道这与我简单地删除*惰性序列*“包装”有什么区别。

当然，如果我**删除**了*lazy-seq*，我会得到一个stackoverflow，为什么要尝试执行这个：

```
(= [(int 1e6) (int (inc 1e6))]
   (->> (... inc (range))
        (drop (dec 1e6))
        (take 2))) 
```

否则（即：如果我让惰性序列包装到位），它似乎工作正常。

所以我决定尝试以某种方式“调试”/跟踪正在发生的事情，以试图了解它是如何工作的。我采用了以下宏（我在 SO IIRC 上找到的）：

```
(defmacro dbg [x] `(let [x# ~x] (println "dbg: " '~x "=" x#) x#)) 
```

并将工作版本包装在*dbg*宏中并尝试再次执行它。现在kaboom：运行良好的版本现在也抛出了stackoverflow。

现在我不确定：也许这是宏的不良影响，会以某种方式强制评估否则不会被评估的东西？

如果有人能解释一下，使用这个简单的函数和简单的测试，懒惰在这里是如何工作的，什么时候被调用等等，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T16:40:43.367

整个魔力在于[clojure.lang.LazySeq](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/LazySeq.java) java 类。它本身实现了 ISeq 接口和`lazy-seq`宏的 s-expressions 参数被转换为没有任何参数的函数并传递给 clojure.lang.LazySeq 的构造函数（传递给以`IFn`对象为参数的构造函数），因为最后您`r`再次调用了函数（返回的是 a`ISeq`而不是完整的列表）这允许 LazySeq 懒惰地评估项目。

所以基本上流程是这样的：

*   LazySeq 调用传递给它的 Fn（即代码的其余部分）
*   这个 Fn 调用返回一个 ISeq，因为 Lists 实现了 ISeq。此返回 ISeq（列表），第一个值作为具体值，第二个是 LazySeq 对象，因为递归调用`r`. 返回的 ISeq 存储在类的局部变量中。
*   调用下一项时 LazySeq 的 ISeq 实现确实调用了它在上述步骤中存储在本地类变量中的 ISeq （列表）的下一个，并检查它是否属于 LazySeq 类型（由于调用，它将在第二项中`r`），如果它是 LazySeq 然后评估它然后返回 item 否则直接返回该项目（您传递给 cons 的第一个具体值）

我知道这有点让人费解:)。刚才我也浏览了 Java 代码，在我意识到魔法是可能的，因为对`r`自身的递归调用返回了一个惰性序列后，我才弄清楚了。所以你有它，一种自定义分隔的延续:)*

# refresh - D3 刷新轴标签

> ID：10786770
> 
> 赞同：4
> 
> 时间：2012-05-28T15:06:07.757
> 
> 标签：refresh, axis, d3.js

我有一个图表，其中显示了两组数据。用户可以点击一个按钮来翻转到另一组数据。问题是轴不一样，但是当我想更新刻度时，我只是在另一个轴的顶部分层。

[http://jsfiddle.net/scottieb/VjHd6/](http://jsfiddle.net/scottieb/VjHd6/)

关键位在最后：

```
 vis.selectAll("axis").remove();

    vis.append("svg:g")
    .attr("class", "x axis")
    .attr("transform", "translate(0, " + (h - margin ) + ")")
    .call(d3.svg.axis()
    .scale(x)
    .tickSize(0)
    .tickSubdivide(true)
    .tickFormat(formatCurrency)
         ); 
```

我已经尝试过 selectAll("g").remove()，但这会阻止放置下一个轴。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:16:45.620

哎呀，需要重新定义规模并调用过渡，而不仅仅是建立一个全新的轴。

[http://jsfiddle.net/scottieb/JwaaV/](http://jsfiddle.net/scottieb/JwaaV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T18:59:21.290

您的问题是您的选择器不正确。您应该选择“.axis”，而不是选择“axis”，因为您要附加一个带有类的“g”节点。

# google-app-engine - 谷歌应用引擎中的新全文搜索是多租户吗？

> ID：10786771
> 
> 赞同：3
> 
> 时间：2012-05-28T15:06:11.340
> 
> 标签：google-app-engine, full-text-search, multi-tenant

我想知道您必须构建的用于索引和搜索数据的文档是否对所有命名空间都有效，或者您需要为每个命名空间提供一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T00:44:07.677

是 - 搜索 API 允许您有选择地为索引指定命名空间。在 Python 中，您可以按照以下方式指定命名空间：
`search.Index(name="myindex", namespace="mynamespace)`.

因此，支持搜索索引多租户，类似于数据存储区中的命名空间如何支持多租户。

但是，搜索索引命名空间不绑定到数据存储命名空间。

# c# - 多线程应用程序无法在 Windows 7 上运行

> ID：10786775
> 
> 赞同：1
> 
> 时间：2012-05-28T15:06:26.250
> 
> 标签：c#, multithreading, windows-7-x64

我正在尝试制作一个 Windows 窗体应用程序。该应用程序使用多线程，每个线程调用一个方法并更新在主线程上创建的控件。我使用调用来更新控件，该应用程序在 Windows 服务器企业上运行，但它在 Windows 7 64 位上没有。在 WINdows 7 上，应用程序在更新界面 2 次后停止执行任何操作。我不知道似乎是什么问题。我尝试了多个线程和任务（`Task.Factory.StartNew()`），我得到了相同的结果（更新控件 2 次）。没有错误信息。谢谢你。

**编辑：**我 正在`CallMethod()`调用 WCF 并等待响应。似乎 WCF 调用为前两个线程返回了一些东西，而其余的则不是......

代码：

主要方法：

```
 for (int i = 0; i < NoThreads; i++)
            {
                int index = i;
                Thread t = new Thread(CallMethod);
                t.Name = "Thread [" + Cicle + "] Cicle [" + i + "]";
                threads[i] = t;

            }
            for (int i = 0; i < NoThreads; i++)
            {
                threads[i].Start();
            } 
```

调用方法：

```
private string CallMethod()
{
 try
   {
      //calling a webservice

      string message = .....
      if (txtResult.InvokeRequired)
      { txtResult.Invoke((MethodInvoker)(() => txtResult.AppendText(message))); }
 catch
 {throw;}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:48:16.357

**问题解决** 了我必须在每个线程中调用 WCF 后关闭连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:35:01.167

对于调试，请确保通过 CallMethod() 的所有路径更新 UI（即使它只是带有“到达这一点”文本）。似乎 txtResult.InvokeRequired 可能是假的，或者您可能从 Web 请求中获得了异常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T15:13:50.410

在 x64 机器（Windows 7）上工作的线程示例：

```
class Server
{
    private TcpListener tcpListener;
    private Thread listenThread;
    private static string rootPath = "";
    public Server()
    {
        IPAddress ipAddress = Dns.Resolve("localhost").AddressList[0];
        this.tcpListener = new TcpListener(ipAddress, 9501);
        //this.tcpListener = new TcpListener(RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["Endpoint1"].IPEndpoint);
        this.listenThread = new Thread(new ThreadStart(ListenForClients));
        Trace.WriteLine("Server Working", "Information");
        this.listenThread.Start();
    }

    private void ListenForClients()
    {
        this.tcpListener.Start();
        Trace.WriteLine("Server TcpListener Started", "Information");
        while (true)
        {
            //blocks until a client has connected to the server
            TcpClient client = this.tcpListener.AcceptTcpClient();
            Trace.WriteLine("Server TcpListener New Client", "Information");
            // create a thread to handle the client
            //ParameterizedThreadStart HandleClientConn;
            Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
            clientThread.Start(client);
        }
    }

    private void HandleClientComm(object client)
    {
        Trace.WriteLine("Server TcpListener New Client Handle Thread", "Information");
        TcpClient tcpClient = (TcpClient)client;
        NetworkStream nStream = tcpClient.GetStream();
        Image img = Image.FromStream(nStream);
        Trace.WriteLine("Server TcpListener Image is received", "Information");
        string imageName = client.GetHashCode() + ".jpg";
        string imagePath = Path.Combine(Environment.GetEnvironmentVariable("RoleRoot") + @"\", @"approot\"+ imageName);
        img.Save(imagePath, ImageFormat.Jpeg);
        rootPath = Environment.GetEnvironmentVariable("RoleRoot");
        Dictionary<string, string> templates = GetTemplates();
        string sDataDir = String.Format("{0}StasmData\\", rootPath);
        StasmHelper stasm = new StasmHelper();
        Face retVal = stasm.GetHumanFace(imagePath, sDataDir, templates);

        File.Delete(imagePath);
    } 
```

# knockout.js - 绑定到同一个敲除 observable 属性的两个控件会导致错误

> ID：10786776
> 
> 赞同：0
> 
> 时间：2012-05-28T15:06:33.310
> 
> 标签：knockout.js, knockout-2.0

我正在尝试编写一些 UI，允许用户通过文本框输入数字或从下拉列表中选择一个选项。

我在[http://jsfiddle.net/unklefolk/PNQeR/2/做了一个简化的 jsFiddle](http://jsfiddle.net/unklefolk/PNQeR/2/)

如你看到的：

*   选择“*编号*”时，您可以在文本框中输入文本。
*   选择“*选项*”时，您可以从下拉列表中选择两个选项之一

文本框和下拉列表都**绑定**到`ItemValue`. `viewModel`尽管代码似乎可以正常工作，但我遇到了错误。如果您在 Chrome 中启动调试窗口，当您更改第一个下拉菜单时，您会收到错误消息：

> 未捕获的类型错误：对象 0 没有方法 'ItemName'

我相信这发生在`ItemText`dependentObservable（又名计算）中。

```
 this.ItemText = ko.dependentObservable(function () {
        return _isItemAConstant() === 'true' ? this.ItemValue() : this.ItemValue().ItemName();
    }, this); 
```

显然，该`ItemName()`函数是在导致错误的数值“0”上调用的。

我该怎么做才能不发生此错误？我将两个控件绑定到同一个可观察对象的设计是一个基本错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T23:48:03.233

在将项目设置为具有 ItemName 属性的对象之前，您将 _isItemAConstant 更改为 false。一旦你设置它，你的dependentObservable 就会运行并尝试评估不存在的 ItemName() observable。您可以检查是否存在 ItemName 属性或使用[油门扩展器](http://knockoutjs.com/documentation/throttle-extender.html)来延迟计算，直到进行所有更改：

```
this.ItemText = ko.dependentObservable(function () {
    return _isItemAConstant() === 'true' ? this.ItemValue() : this.ItemValue().ItemName();
}, this).extend( { throttle: 1} );

this.ItemText2 = ko.computed(function() {
    return this.ItemValue().ItemName ? this.ItemValue().ItemName() : this.ItemValue();
}, this); 
```

# oracle - ORA-12514 TNS: 监听器当前不知道连接描述符中请求的服务

> ID：10786782
> 
> 赞同：284
> 
> 时间：2012-05-28T15:07:05.377
> 
> 标签：oracle, oracle11g, sqlplus, ora-12514, tnsping

我们在本地运行一个应用程序，但遇到以下错误：

> ORA-12514: TNS:listener 当前不知道连接描述符中请求的服务

我已经测试了使用`TNSPing`正确解析的连接，我尝试`SQLPlus`尝试连接，但失败并出现与上述相同的错误。我将此语法用于`SQLPlus`：

```
sqlplus username/password@addressname[or host name] 
```

我们已经验证：

*   服务器上的 TNS 侦听器正在运行。
*   服务器上的 Oracle 本身正在运行。

我们不知道对此环境进行了任何更改。还有什么我们可以测试的吗？

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2013-04-16T23:36:56.267

我遇到了这个问题，解决方法是确保在您`tnsnames.ora`的`SERVICE_NAME`数据库中是一个有效的服务名称。要找出有效的服务名称，您可以在 oracle 中使用以下查询：

```
select value from v$parameter where name='service_names' 
```

一旦我更新`tnsnames.ora`为：

```
TEST =
   (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = *<validhost>*)(PORT = *<validport>*))
    )
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = *<servicenamefromDB>*)
    )
) 
```

然后我跑了：

```
sqlplus user@TEST 
```

成功！侦听器基本上是在告诉您，根据数据库，您使用的任何 service_name 都不是有效的服务。

（*我正在从 Win7 客户端工作站运行 sqlplus 到远程 DB 并责怪 DBA ;) *)

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2014-03-25T12:13:31.183

我知道这是一个老问题，但仍然没有答案。我花了一天的时间研究，但我找到了最简单的解决方案，至少在我的情况下（Windows 2008 R2 上的 Oracle 11.2）并想分享。

如果直接查看该错误，则表明侦听器无法识别服务名称。但它在哪里保存服务名称？在`%ORACLE_HOME%\NETWORK\ADMIN\listener.ora`

“SID_LIST”就是这样，SID 和服务名称的列表以您可以复制或查找的格式配对。

我添加了问题服务名称，然后在 Windows“服务”控制面板中，我对 Oracle 侦听器服务进行了“重新启动”。现在一切都很好。

* * *

例如，您的 listener.ora 文件最初可能如下所示：

```
# listener.ora Network Configuration File: C:\app\oracle_user\product\12.1.0\dbhome_1\network\admin\listener.ora
# Generated by Oracle configuration tools.

SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = CLRExtProc)
      (ORACLE_HOME = C:\app\oracle_user\product\12.1.0\dbhome_1)
      (PROGRAM = extproc)
      (ENVS = "EXTPROC_DLLS=ONLY:C:\app\oracle_user\product\12.1.0\dbhome_1\bin\oraclr12.dll")
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
  ) 
```

...并使其识别服务名称`orcl`，您可以将其更改为：

```
# listener.ora Network Configuration File: C:\app\oracle_user\product\12.1.0\dbhome_1\network\admin\listener.ora
# Generated by Oracle configuration tools.

SID_LIST_LISTENER =
  (SID_LIST =
    (SID_DESC =
      (SID_NAME = CLRExtProc)
      (ORACLE_HOME = C:\app\oracle_user\product\12.1.0\dbhome_1)
      (PROGRAM = extproc)
      (ENVS = "EXTPROC_DLLS=ONLY:C:\app\oracle_user\product\12.1.0\dbhome_1\bin\oraclr12.dll")
    )
    (SID_DESC = 
        (GLOBAL_DBNAME = orcl)
        (ORACLE_HOME = C:\app\oracle_user\product\12.1.0\dbhome_1)
        (SID_NAME = orcl)
    )
  )

LISTENER =
  (DESCRIPTION_LIST =
    (DESCRIPTION =
      (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
  ) 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2017-05-31T23:39:01.720

在我的情况下，错误是由于侦听器没有注册数据库的服务。我通过注册服务解决了这个问题。例子：

我的描述符在`tnsnames.ora`：

```
LOCALDB =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = LOCALDB)
    )
  ) 
```

因此，我继续`listener.ora`手动注册服务：

```
SID_LIST_LISTENER =
    (SID_DESC =
      (GLOBAL_DBNAME = LOCALDB)
      (ORACLE_HOME = C:\Oracle\product\11.2.0\dbhome_1)
      (SID_NAME = LOCALDB)
    ) 
```

最后，通过命令重启监听器：

```
> lsnrctl stop
> lsnrctl start 
```

完毕！

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-12-21T14:27:27.900

**我在Windows server 2008 R2**和**Oracle 11g**上遇到过这个问题

 **> 转到网络管理器 > 侦听器 > 从组合框中选择数据库服务 > “全局数据库名称”必须与“SID”相同，并且“Oracle 主目录”必须正确。

如果您没有任何数据库服务条目，请创建一个并设置正确的全局数据库`sid`和 oracle home。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-06-16T07:48:19.700

从 services.msc 启动 OracleServiceXXX 在 Windows 中为我工作。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-12-19T14:38:55.100

这确实应该是对 [Brad Rippe][1] 的回答的评论，但可惜，没有足够的代表。这个答案让我成功了 90%。就我而言，数据库的安装和配置将条目放入我正在运行的数据库的 tnsnames.ora 文件中。首先，我能够通过设置环境变量（Windows）连接到数据库：

```
set ORACLE_SID=mydatabase
set ORACLE_HOME=C:\Oracle\product\11.2.0\dbhome_1 
```

然后使用连接

```
sqlplus / as sysdba 
```

接下来，从 Brad Rippe 的答案运行命令：

```
select value from v$parameter where name='service_names'; 
```

显示名称不完全匹配。使用 Oracle 的数据库配置助手创建的条目最初是：

```
MYDATABASE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = mylaptop.mydomain.com)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = mydatabase.mydomain.com)
    )
  ) 
```

查询中的服务名称只是`mydatabase`而不是`mydatabase.mydomain.com`. 我将 tnsnames.ora 文件编辑为没有域部分的基本名称，所以它们看起来像这样：

```
MYDATABASE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = mylaptop.mydomain.com)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = mydatabase)
    )
  ) 
```

我重新启动了 TNS 侦听器服务（我经常使用管理员命令窗口 [或 Windows Powershell]`lsnrctl stop`而`lsnrctl start`不是服务控制面板，但两者都可以工作。）之后，我能够连接。[1]：[https ://stackoverflow.com/users/979521/brad-rippe](https://stackoverflow.com/users/979521/brad-rippe)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-06-16T08:18:34.687

对于那些使用 spring-boot 和 jdbc 进行连接的人。在 application.properties 中编写 jdbcUrl 时必须小心

在数据库连接中使用 SID - `source.datasource.jdbcUrl = jdbc:oracle:thin:@[HOST][:PORT]:SID`

在数据库连接中使用服务名称 `globe.datasource.jdbcUrl = jdbc:oracle:thin:@//[HOST][:PORT]/SERVICE`

这对我有用:)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-09-09T04:01:30.160

我有同样的问题。对我来说，只是写作

```
sqlplus myusername/mypassword@localhost 
```

成功了，我猜这样做会使其连接到默认服务名称。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-06-26T06:41:06.863

我也遇到了同样的问题，花了 3 天时间才把它挖出来。

这是因为您输入了错误的 TNS 服务条目。

首先检查您是否能够使用 sql > `sqlplus sys@orastand as sysdba`（`orastand`是备用数据库）从主数据库连接到备用数据库。

如果您无法连接，则说明服务有问题。更正主端TNS文件中服务名称的输入。

以同样的方式检查备用数据库。如果需要，也可以在此处进行更改。

确保`log_archive_dest_2`参数具有正确的服务名称。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-05-12T13:57:24.667

对我有用的东西真的很简单，我只需要在“Windows 服务”中手动启动服务（cmd trompt 中的 services.msc）。我的服务名称是：OracleServiceXXXXX。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-05-29T00:50:27.980

检查数据库是否已启动。登录到服务器，将 ORACLE_SID 环境变量设置为您的数据库 SID，然后将 SQL*Plus 作为本地连接运行。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-04-01T00:21:58.280

当应用程序为每个数据库交互建立新连接或连接未正确关闭时，可能会发生此错误。监视和确认这一点的免费工具之一是 Oracle Sql 开发人员（尽管这不是您可以用来监视 DB 会话的唯一工具）。

您可以从 oracle 站点[Sql Developer下载该工具](http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html)

这是如何监控会话的屏幕截图。（如果您在看到 ORA-12514 错误期间看到为您的应用程序用户堆积了许多会话，那么这很好地表明您可能有连接池问题）。

![在此处输入图像描述](../Images/ee352093e0c308959f7f1af327aa56da.png)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-09-03T15:27:19.117

我在我的 linux 环境中解决了这个问题，在 /etc/hosts 文件中更新了我的机器的 IP。

您可以通过以下方式验证您的网络 IP（inet 端）：

```
$ifconfig 
```

查看您的 IP 是否与 /etc/hosts 文件匹配：

```
$cat /etc/hosts 
```

编辑您的 /etc/hosts 文件（如果需要）：

```
$sudo gedit /etc/hosts 
```

再见。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-04-14T18:14:23.417

对于那些可能在 VM 中运行 Oracle 的人（比如我），我看到了这个问题，因为我的 VM 内存不足，这似乎阻止了 OracleDB 正确启动/运行。增加我的虚拟机内存并重新启动解决了这个问题。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-04-20T21:19:22.060

这里有很多答案，但这里有一个工作示例，其中包含可以立即复制、粘贴和测试的代码：

对我来说，指定正确的 SERVICE_NAME 后错误 12514 已解决。`tnsnames.ora`您在带有 3 个预定义服务名称（其中之一是“XE”）的文件中的服务器上找到了它。

1.  我安装了 Oracle Express 数据库 OracleXE112，它已经附带了一些预安装的演示表。
2.  当您启动安装程序时，系统会要求您输入密码。我输入“xxx”作为密码。（不用于生产）
3.  我的服务器在机器 192.168.1.158 上运行
4.  在服务器上，您必须明确允许访问 Windows 防火墙中的进程 TNSLSNR.exe。此进程侦听端口 1521。
5.  **选项 A：**对于 C#（.NET2 或 .NET4），您可以下载**ODAC11**，您必须从中将 Oracle.DataAccess.dll 添加到您的项目中。此外，此 DLL 依赖于：OraOps11w.dll、oci.dll、oraociei11.dll (130MB!)、msvcr80.dll。这些 DLL 必须与 EXE 位于同一目录中，或者您必须在以下位置指定 DLL 路径：`HKEY_LOCAL_MACHINE\SOFTWARE\Oracle\ODP.NET\4.112.4.0\DllPath`. 在 64 位机器上另外写入`HKLM\SOFTWARE\Wow6432Node\Oracle\...`
6.  **选项 B：**如果您已下载**ODAC12**，则需要 Oracle.DataAccess.dll、OraOps12w.dll、oci.dll、oraociei12.dll（160MB！）、oraons.dll、msvcr100.dll。注册表路径是`HKEY_LOCAL_MACHINE\SOFTWARE\Oracle\ODP.NET\4.121.2.0\DllPath`
7.  **选项 C：**如果您不想要超过 100 MB 的巨大 DLL，您应该下载 ODP.NET_Managed12.xxxxxxxx.zip，您可以在其中找到`Oracle.ManagedDataAccess.dll`只有 4 MB 的纯托管 DLL，可在 32 位和 64 位进程中运行以及不依赖于其他 DLL 并且不需要任何注册表项。
8.  以下 C# 代码适用于我，无需在服务器端进行任何配置（只是默认安装）：

```
使用 Oracle.DataAccess.Client；
或者
使用 Oracle.ManagedDataAccess.Client；

……

字符串 oradb = "数据源 =(DESCRIPTION="
    +“（地址列表=（地址=（协议=TCP）（主机=192.168.1.158）（端口=1521）））”
    + "(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=XE)));"
    + "用户ID=SYSTEM;密码=xxx;";

使用 (OracleConnection conn = new OracleConnection(oradb))
{
    conn.Open();
    使用 (OracleCommand cmd = new OracleCommand())
    {
        cmd.Connection = 连接；
        cmd.CommandText = "从 DBA_DATA_FILES 中选择 TABLESPACE_NAME";

        使用 (OracleDataReader dr = cmd.ExecuteReader())
        {
            而 (dr.Read())
            {
                listBox.Items.Add(dr["TABLESPACE_NAME"]);
            }
        }
    }
}
```

如果`SERVICE_NAME=XE`错误，您将收到错误 12514。这`SERVICE_NAME`是可选的。你也可以离开它。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-04-20T02:12:11.110

在我的情况下，数据库已经用完了磁盘空间。导致它没有反应。一旦我解决了这个问题，一切都会再次起作用。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-10-13T10:55:08.497

我得到了同样的错误，因为指定的远程 SID 错误：

```
 > sqlplus $DATASOURCE_USERNAME/$DATASOURCE_PASSWORD@$DB_SERVER_URL/$REMOTE_SID 
```

我查询了系统数据库：

从全局名称中选择 *；

并找到了我的远程 SID（“XE”）。

然后我可以毫无问题地连接。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-08-30T06:49:16.863

对于 Dbeaver 用户：尝试在连接设置中选择“SID”而不是“服务名称”。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-12-03T07:45:39.290

对我来说，这是由使用安装的动态 ipadress 引起的。我使用静态 ipadress 重新安装了 Oracle，然后一切都很好

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-11-29T12:34:31.157

我已实施以下解决方法来解决此问题。

1.  我已经使用命令提示符设置了 ORACLE_HOME（右键单击 cmd.exe 并以系统管理员身份运行）。

2.  使用下面的命令

    `set oracle_home="path to the oracle home"`

3.  转到**所有程序**--> **Oracle -ora home1** -->**配置迁移工具**-->**网络管理器**-->**监听器**

4.  从下拉列表中选择数据库服务。全局数据库名称和 SID 都设置为相同（在我的情况下为 ORCL）。设置 Oracle 主目录。

oracle 文档中的 Oracle Net Manager 窗口示例： [![Oracle 网络管理器示例](../Images/36e3b9bf13c981a10ee16447e751953f.png)](https://docs.oracle.com/cd/A91202_01/901_doc/network.901/a90154/listenea.gif)

5.  单击文件并保存网络配置。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-03-20T03:35:52.673

重新启动虚拟机对我有用

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-08-23T13:47:35.307

通过将 URL 中的“SID”替换为“服务名称”和正确的主机，我的问题得到了解决。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-11-11T09:38:09.603

`tnslsnr`已启动，但数据库已关闭。

对于 oracle 新手来说，在接受连接时数据库可能已关闭并不明显。

我不得不像那样手动启动数据库

```
su - oracle
export ORACLE_SID=XE
sqlplus sys as sysdba 
```

然后在 sql 控制台

```
startup 
```

在我的情况下，我无法启动，但收到另一条错误消息并找到问题的根源 - 我必须更改主机名，然后数据库自动启动再次起作用。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-12-05T12:07:44.347

问题是我的连接字符串 url 包含数据库名称而不是 SID。用 oracle 数据库连接 SID 替换数据库名称解决了这个问题。

要知道您的 oracle SID，您可以浏览`tnsnames.ora`文件。

`XE`是实际的 SID，所以这就是我的 tomcat 连接字符串现在的样子：

```
 <Resource
       name="jdbc/my_db_conn"
       auth="Container"
       type="javax.sql.DataSource"
       driverClassName="oracle.jdbc.driver.OracleDriver"
       url="jdbc:oracle:thin:@//127.0.0.1:1521/XE"
       username="test_user"
       password="test" /> 
```

我的服务器版本是“Oracle 11.2 Express”，但解决方案也应该适用于其他版本。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-03-10T17:59:47.303

就我而言， SERVICE_NAME 周围的圆括号在*tnsnames.ora*文件中丢失。

```
<DBNAME> =
  (DESCRIPTION =
    (ADDRESS_LIST =
     (ADDRESS = (PROTOCOL=TCP)(HOST = nupark-cnvr-ora )(PORT=1521))
    )
    (CONNECT_DATA =
    (SERVER = DEDICATED)
    (SERVICE_NAME = <DBNAME> ***CLOSING ROUND BRACKET WAS MISSING HERE***
    )
  )

LISTENER_<DBNAME> =

  (ADDRESS = (PROTOCOL = TCP)(HOST = nupark-cnvr-ora)(PORT = 1521)) 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-07-28T16:02:00.347

我有一个案例，我使用了 DBMS，我必须填写一个数据库连接表单。

我将 SID 放入“数据库”字段，然后在字段旁边的下拉列表中，我有“服务名称”值而不是“SID”值。
（通常我不使用 Oracle 数据库，所以我不知道其中的区别）

这就是我收到错误消息的原因。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-04-17T21:59:31.070

问题可能出在不正确的 URL 中。

例如，我正在使用带有 Spring 框架的 Oracle 数据库（在 VM 内）并遇到此问题。

我的 application.properties 文件中有：

```
spring.datasource.url=jdbc:oracle:thin:@//localhost:1521/orcl12c 
```

但 db 版本不同：

```
spring.datasource.url=jdbc:oracle:thin:@//localhost:1521/orclcdb 
```

正确的 URL 可以在**tnsnames.ora**文件中找到（该文件在 Oracle 服务器中可用，因此如果您使用 VM，则应在主机 VM 中查找该文件）。例如，对于 VirtualBox 中的 Oracle，查看此文件的命令是：

```
nano /u01/app/oracle/product/version/db_1/network/admin/tnsnames.ora 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-08-11T13:49:34.260

在我的**Linux**环境中，oracle 文件以“**红色**`ORACLE_HOME/bin`”颜色突出显示，具有不同的权限，如下所示： **[![在此处输入图像描述](../Images/7f8a7ea6766ce341289e1356e036975d.png)](https://i.stack.imgur.com/GJsVS.jpg)**

 **我改变了这个文件的权限如下：

**1）**停止Oracle -> `sudo systemctl stop oracle.service`
**2）**将目录下的oracle文件的权限更改`ORACLE_HOME/bin`为“ **sudo chmod 777 oracle** ”
**3）**启动Oracle ->`sudo systemctl start oracle.service`

**然后在此更改之后，我使用lsnrctl status**检查了侦听器的状态。在这里，我可以看到成功加载的 db 实例。

但是，我只能使用**sqldeveloper**进行连接，使用 sqlplus 命令行时`ORA-12547: TNS Lost Contact`出现错误。因此，这是使用 sqldeveloper的快速**解决方法。**

**注意：**在更改权限之前备份 oracle 文件。****

# javascript - asp的Javascript getElementByID：Image返回null

> ID：10786783
> 
> 赞同：2
> 
> 时间：2012-05-28T15:07:13.483
> 
> 标签：javascript, jquery, asp.net

我试图在 RadCombobox 的 onclientselectedindexchanged 事件上找到控件和显示设置为“阻止”或“无”。它始终返回 null。脚本和控件位于“内容的用户控制”页面中。此内容页面也有母版页。我用 Debugger 语句调试了代码，但控件有这个标签。“ctl00_content2_ucControl1_imgTest”。如何显示和隐藏图像？请告诉我。谢谢你的帮助。我也尝试使用 document.getElementById("<%=imgTest.ClientID"); 和 $find(("<%=imgTest.ClientID") ; 但这些都不起作用。

```
<asp:Image ID="imgTest" ImageUrl="../../../images/test.gif" AlternateText="test"
                            runat="server" style="display:none"></asp:Image>

<telerik:RadComboBox ID="Combobox1" runat="server" DataTextField="test1"
                            DataValueField="test_id" NoWrap="true" Width="250" onclientselectedindexchanged="OnClientSelectedIndexChanged">                        </telerik:RadComboBox>

<script type="text/javascript">
function OnClientSelectedIndexChanged(sender, eventArgs) { 
     {
      var item = eventArgs.get_item(); 
          if(item.get_value() == "8") 
             {
            var imageControl = document.getElementById('imgTest');
            imageControl.style.display = "block"; 
            }
        }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:09:30.377

imgTest 是一个服务器控件，所以客户端 id 将由服务器自动生成。

更改此行：

```
var imageControl = document.getElementById('imgTest'); 
```

到：

```
var imageControl = document.getElementById('<%=imgTest.ClientId%>'); 
```

您之前尝试的问题是缺少结束标记`%>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:40:45.843

如果您使用的是 .net 4.0，则可以设置`ClientIDMode='Static'`，然后只要您不在可重复元素中，您的代码就应该可以正常工作。

以下是有关如何使用 ClientIDMode 的更多信息： [http ://weblogs.asp.net/asptest/archive/2009/01/06/asp-net-4-0-clientid-overview.aspx](http://weblogs.asp.net/asptest/archive/2009/01/06/asp-net-4-0-clientid-overview.aspx)

# java - 在返回语句中使用泛型类型转换

> ID：10786786
> 
> 赞同：1
> 
> 时间：2012-05-28T15:07:28.740
> 
> 标签：java, generics, casting

我有以下课程：

```
public class Base {
   public int someMethod(){...}
}

public class Derrived extends Base {
   @Override
   public int someMethod(){...}
} 
```

我也有一个返回的方法`List<Base>`

```
List<Base> method() {
   return fetch();
} 
```

方法`fetch()`返回`List<? extends Base>`但实际上它包含 Derived 类的实例列表

```
List<? extends Base> fetch() {} 
```

但是定义方法的代码`method()`不会编译。它需要强制转换为`List<Base>`. 如果我总是可以将该集合的实例视为基类的实例，为什么我需要强制转换它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T15:10:15.557

A`List<? extends Base>`与 a`List<Base>`不同，就像一堆香蕉不是水果碗一样。

考虑：

```
List<Derived> x = new ArrayList<Derived>();

// This is valid...
List<? extends Base> y = x;

// This is what you *want* to be valid
List<Base> z = y;

z.add(new Base());

// This looks fine at compile-time... but what would you expect it to do?
Derived d = x.get(0); 
```

*将 a 的所有现有*元素`List<Derived>`视为 - 的实例是一回事，`Base`但您不能*将*a添加`Base`到`List<Base`>，而*可以*将一个添加到 a `List<Derived>`。并非每一个`List<Derived>`都是 `List<Base>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:11:26.430

您不能这样做，因为不能保证有人不会尝试将 Base 的不同子类的对象插入到 Collection 中。

那时会发生什么？

看起来不错，但是您基本上*是*在尝试在同一个集合中使用两种不同类型的对象，如您所知，这是不允许的。

# android - 较新的 android 2.2 仍然看不到游戏

> ID：10786788
> 
> 赞同：0
> 
> 时间：2012-05-28T15:07:52.313
> 
> 标签：android

我的清单文件现在已更新，它看起来像这样。但它仍然不可见或在 google play 上对于较新的 android 然后 2.2 不兼容。但我已经在 4.0 及其工作上对其进行了测试。这是我的清单。请帮忙

android:versionCode="4" android:versionName="1" >

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15"/>
<uses-permission android:name="android.permission.WAKE_LOCK" android:required="false"/>
<supports-screens 
     android:resizeable="true"
     android:smallScreens="true"
     android:normalScreens="true"
     android:largeScreens="true"
     android:anyDensity="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:30:38.900

`android:required="false"`从`uses-permission`标签中删除。您不应该将其放在权限标签中，而是放在使用功能标签中......无论如何，WAKE_LOCK 不需要任何必需的声明：

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

# jquery - IE7 Jquery 位置：相对

> ID：10786791
> 
> 赞同：0
> 
> 时间：2012-05-28T15:07:58.353
> 
> 标签：jquery, html, css, internet-explorer, internet-explorer-7

我正在使用一个需要 position:relative 的插件来为 UL 中的 li 项目设置动画。

**这是一个演示：http: [//jsfiddle.net/bleachie/aJPRp/](http://jsfiddle.net/bleachie/aJPRp/)**

在 IE7 中 overflow:hidden 不起作用，但如果 position:relative 从 UL 中删除则起作用；该插件不起作用。

我将如何在 IE7 中解决此问题？

谢谢。

CSS

```
ul {
    padding: 0;
    margin: 0;
    list-style: none;
}

.jSlots-wrapper {
    overflow: hidden;
    height: 20px;
    display: inline-block; /* to size correctly, can use float too, or width*/
    border: 1px solid #999;
}

.slot {
    float: left;
} 
```

HTML

```
<ul class="slot">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
    <li>7</li>
</ul>
<input type="button" id="playNormal" value="play">​ 
```

Javascript

```
 $('.slot').jSlots({
     spinner : '#playNormal',
     winnerNumber : 7
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:55:02.693

快速搜索出现了这个[问题和答案](https://stackoverflow.com/questions/2403011/ie6-ie7-css-problem-with-overflow-hidden-position-relative-combo)。基本上，要让溢出隐藏在 IE6/IE7 中与相对定位的子代一起使用，您还需要相对定位容器。所以在这种情况下：

```
.jSlots-wrapper {
    position: relative;
    overflow: hidden;
    height: 20px;
    display: inline-block; /* to size correctly, can use float too, or width*/
    border: 1px solid #999;
} 
```

# ruby-on-rails - 解析 CSV 时插入 20 万条记录会锁定系统

> ID：10786792
> 
> 赞同：0
> 
> 时间：2012-05-28T15:08:00.570
> 
> 标签：ruby-on-rails, ruby, activerecord, csv

我正在尝试将 200k 记录插入三个不同的表中。当我解析 CSV 文件并尝试插入这些记录时，Ruby 锁定了我的整个系统。这是我的代码：

```
def upload_country
  @upload = Upload.new(:upload => params[:upload])
  if  @upload.save
  csv = CSV.parse(csv_text, :headers => true)

  csv.each_with_index do |row, index|
    unless row["name"].blank? or row["country_code"].blank? or row["destination"].blank? or row["code"].blank?
      @country = Country.new(:name => row["name"].gsub(/\s+/, " ").strip, :country_code => row["country_code"].gsub(/\s+/, " ").strip, :user_id => current_user.id, :subscriber_id => get_subscriber_id)
      @country.save

      if row["country_code"] == "1"
        p = @country.country_code.to_s+@destination.name+row["code"].gsub(/\s+/, " ").strip
      else
        p = @country.country_code.to_s+row["code"].gsub(/\s+/, " ").strip
      end

      @code = DestinationCode.create(:code => p, :country_destination_id => 1, :user_id => current_user.id)
    end
  end

  @upload.destroy
  @countries = Country.find_all_by_subscriber_id(get_subscriber_id)
  render :partial => '/mycarriers/carrier_country', :layout => false
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:09:28.070

如果您有长时间运行的请求，这意味着如果您只有一个 rails 实例正在运行，那么此时没有其他用户可以访问您的应用程序。

我建议您使用`delayed_job gem`在后台执行长时间处理任务。在控制器端，您应该将作业排入队列并发`response 202 (Accepted)`送到浏览器。在客户端，无论作业是否完成，您都应该定期向服务器发送请求。然后，相应地更新 ui。

以[slideshare.net](http://www.slideshare.net)为例。当用户完成上传时，slideshare 重定向到新页面，并在转换演示文件时定期更新 ui。

另一种解决方案是您可以在后台运行 rake 脚本。从 railscasts查看[这一集。](http://railscasts.com/episodes/127-rake-in-background)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T17:28:30.717

为什么不在这里使用使用 Mass Insert 一个[可以](https://github.com/defunkt/resque)帮助您完成任务的[gem](https://github.com/zdennis/activerecord-import)

希望对你有帮助

# java - 读取文件时如何使用转义字符？

> ID：10786794
> 
> 赞同：2
> 
> 时间：2012-05-28T15:08:23.217
> 
> 标签：java, android, escaping

我有一种方法可以从原始文件中读取一个随机笑话，然后显示它，但我不知道如何设置新行。该行中的所有笑话都是 1 行，但显然它们不止一个，所以我使用`\n`. 例如，该行说`"Hi! \n Hi to you too"`当我使用我的代码而不是：

```
Hi!
Hi to you too 
```

它给了我

```
Hi! \n Hi to you too 
```

我试图附加它，但这不适用于下面的代码也尝试在数组中输入笑话然后从该数组中显示它，也没有工作......任何想法将不胜感激......

```
InputStreamReader inputStream = new InputStreamReader
         (getResources().openRawResource(R.raw.vicove));
         BufferedReader br = new BufferedReader(inputStream);
         int numLines = 1;
         Random r = new Random();
         int desiredLine = r.nextInt(numLines);

         String theLine="";
         int lineCtr = 0;
        try {
    while ((theLine = br.readLine()) != null)   {
    if (lineCtr == desiredLine) {
    break;
    }
        lineCtr++;
        }
        } catch (IOException e) {

            e.printStackTrace();
            }

     textGenerateNumber.setText(String.valueOf(theLine)); 
```

我已经使用相同的代码来读取没有转义字符的文件，并且它运行良好...... PS 不仅`\n`行不通，而且`\"`可能还有其他任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:13:58.147

这是因为你有

```
\n 
```

in the file, and that are 2 normal characters, not a newline.

You can use Apache Commons library to unescape these sequences:

[StringEscapeUtils.unescapeJava](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html#unescapeJava%28java.lang.String%29) in Apache Commons.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:20:48.220

try this:

```
String source = "<br>"+String.valueOf(theLine);  
textGenerateNumber.append(Html.fromHtml(source)); 
```

# grails - Grails - Spring security core 和 spring security ui 插件不一致 - 无法使用新创建的用户登录

> ID：10786795
> 
> 赞同：0
> 
> 时间：2012-05-28T15:08:24.543
> 
> 标签：grails, spring-security

我正在为我的应用程序使用 spring security core plugin 1.2.7.2 和 spring security ui 0.2 版本。

我无法使用我创建的凭据登录。新用户在数据库中。我环顾四周，了解到核心和 ui 插件之间发生的双重加密密码问题。问题仍然存在。我通过注释 User Domain 类中的 beforeInsert/beforeUpdate 方法来实现它。我想知道这个问题是否在新版本中得到解决？

对此有不同的解决方法吗？请指教

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:13:04.050

在最新版本 (0.2) 中有一个设置 - 请参阅`grails.plugins.springsecurity.ui.encodePassword`文档第 10 节中“密码加密”部分中的设置：http: [//grails-plugins.github.com/grails-spring-security-ui/文档/手册/](http://grails-plugins.github.com/grails-spring-security-ui/docs/manual/)

# batch-file - 在工作计算机（Windows）上编译语言

> ID：10786796
> 
> 赞同：-1
> 
> 时间：2012-05-28T15:08:24.713
> 
> 标签：batch-file, windows-vista

所以在工作中我想编写一个程序来移动我的光标（如宏），但我 a) 不知道这些机器有什么编译器，并且 b) 不认为我可以安装编译器。

所以问题是，是否存在任何独立的编译器？有没有办法检查机器当前有哪些编译器？或者，我可以为我编写一个可以移动并单击光标的批处理程序吗？

我使用的机器是 Windows Vista，Business Enterprise。

哦，如果您有编译器建议，我真的不在乎我必须使用哪种语言进行编码。

谢谢！

编辑：问题是，我无法在这台计算机上*下载*或*安装任何东西。*我唯一的希望是一个网页......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:13:29.930

获取 Visual Studio Express，它可以让你为 Windows 编写程序，并且它是免费的，除非你打算出售你的程序

[链接到 VS](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:17:41.937

如果您正在寻找为 Windows 编写宏，您可能需要查看 PowerShell。我不认为它包含在 Windows Vista 中，但它可以从 Microsoft 免费下载。如果您无法使用 PowerShell 完成此操作，请尝试 AutoIT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T17:38:04.580

我找到了自己问题的答案：

这是一个在线代码编译器的链接：http: [//compilr.com/](http://compilr.com/)

它在他们的服务器上编译代码，你可以下载一个文件在你的计算机上执行（在我的例子中，通过 java 命令）

# php - PHP, JavaScript, 组合

> ID：10786799
> 
> 赞同：-5
> 
> 时间：2012-05-28T15:08:47.400
> 
> 标签：php, javascript, combinations

我在 PHP 有一些条件，如果是真的，我需要 php 变量来获取 javascript 函数： 类似的东西：

```
<?php
if(x == true){
$x = <script type="text/javascript">xfunction();</script>;
}
?> 
```

我真的不知道如何让它们组合在一起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:13:59.457

要在渲染文档时调用函数*onload*`echo` .. 你可以只输出一个自执行函数。

```
<?php 
 // your other code
 if( $x ) { // no need to check if true... this will fail if falsey 
   echo "<script>";
   echo "(function() { xfunction(); }());"; // I will execute when the parser hits me
   echo "</script>";
 }
 // or (after reading your comments above) 
 if( $x ) { 
   $x  = "";
   $x .= "<script>";
   $x .= "(function() { xfunction(); }());"; // I will execute when the parser hits me
   $x .= "</script>";
 }
 // somewhere else in the document.... 
 echo $x; 
```

或者如果您尝试将值从 javascript 传递到 php，您将需要使用 HTTP 请求变量（POST、GET）或 XHR...

XHR 示例：

```
var request = new XMLHttpRequest();  
request.open('POST', 'http://www.somepage.com/foo.php', true);  
request.send('data=somedata');  

if (request.status === "200") {  
  console.log(request.responseText);  
} 
```

并在 php 端访问它`$_POST['data']`

可以在[此处阅读有关 PHP 请求变量的更多信息](http://php.net/manual/en/reserved.variables.request.php)

可以在[此处阅读有关 XHR 的更多信息](https://developer.mozilla.org/en/XMLHttpRequest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:13:06.260

```
<?php
    if($x){
        print '<script type="text/javascript">xfunction();</script>;';
    }
?> 
```

如果我理解你的问题，应该有效吗？

# jdbc - 如何使用 JDBC 连接到 Berkeley DB？

> ID：10786800
> 
> 赞同：2
> 
> 时间：2012-05-28T15:08:48.370
> 
> 标签：jdbc, berkeley-db

我在本地文件夹中有一个 Berkeley DB，我想通过 JDBC 连接到它。特别是通过[Zentus SqliteJDBC](http://www.zentus.com/sqlitejdbc/)。

我的问题是连接字符串（“url”）。虽然 sqlite 连接字符串可能看起来像：`"jdbc:sqlite:c:\\path\\to\\database.db"`，但 Berkeley DB 没有一个 .db 文件可供参考。相反，我看到了组成数据库的多个 .jdb 文件。

我的问题是 - 我的连接字符串应该是什么样的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T15:41:28.390

Berkeley DB 通过了 CH-Werner JDBC 驱动程序的认证。Zentus 驱动程序和 Ch-Werner 驱动程序之间的主要区别在于 Zentus 驱动程序是一个完整的 java 实现，而 Ch-Werner 是一个带有 JNI 层的 C 实现。

您可以在 BDB 论坛上发布您的问题，并且可能有人有与 Zentus 驱动程序连接的具体说明。这行不通是有技术原因的。

BDB 构建和安装指南有关于如何连接 Ch-Werner 驱动程序的具体说明。请参阅[http://docs.oracle.com/cd/E17076_02/html/installation/index.html](http://docs.oracle.com/cd/E17076_02/html/installation/index.html)。第 5 节有关于为 Windows 构建的信息，第 7 节有关于为 Linux 构建的信息。寻找构建/使用 JDBC 驱动程序。

# r - 从蛋白质数据库到 Cosmic 或 Uniprot 的蛋白质序列比对

> ID：10786803
> 
> 赞同：1
> 
> 时间：2012-05-28T15:09:08.960
> 
> 标签：r, alignment, sequence, bioconductor, protein-database

我想将蛋白质数据库中的 PDB 文件与 Cosmic 或 Uniprot 中显示的蛋白质的规范 AA 序列进行匹配。具体来说，我需要做的是从 pdb 文件中提取主链中的碳 α 原子及其 xyz 位置。我还需要在蛋白质序列中提取它们的实际顺序。对于结构 3GFT（Kras - Uniprot 登录号 P01116），这很简单，我可以取 ResSeq 号。然而，对于其他一些蛋白质，我不知道这是怎么可能的。

例如，对于结构 (2ZHQ)（蛋白质 F2 - Uniprot 登录号 P00734），Seqres 的 ResSeq 编号对于数字“1”和“14”重复，并且仅在 Icode 条目中有所不同。此外，icode 条目不是按字典顺序排列的，因此很难判断提取的顺序。

如果考虑结构 3V5Q（Uniprot 登录号 Q16288），情况会更糟。对于大多数蛋白质，ResSeq 编号与来自 COSMIC 或 UNIPROT 等来源的实际氨基酸相匹配。但是，在位置 711 之后，它会跳转到位置 730。当查看 REMARK 465（丢失的原子）时，它表明对于链 A，726-729 丢失了。然而，在将其与蛋白质匹配后，这些 AA 实际上是 712-715。

我附上了适用于简单 3GFT 示例的代码，但如果有人是 pdb 文件方面的专家并且可以帮助我弄清楚其余部分，我将非常感激。

```
library(gdata)

#answer<- get.positions("http://www.pdb.org/pdb/files/2ZHQ.pdb","L")
answer<- get.positions("http://www.pdb.org/pdb/files/3GFT.pdb","A")

#This function reads a pdb file and returns the appropriate data structure
get.positions <- function(sourcefile, chain_required = "A"){
N <- 10^5
AACount <- 0
positions = data.frame(Residue=rep(NA, N),AtomCount=rep(0, N),SideChain=rep(NA, N),XCoord=rep(0, N),YCoord=rep(0, N),ZCoord=rep(0, N),stringsAsFactors=FALSE)     

visited = list()
filedata <- readLines(sourcefile, n= -1)
for(i in 1: length(filedata)){
input = filedata[i]
id = substr(input,1,4)
if(id == "ATOM"){
  type = substr(input,14,15)
  if(type == "CA"){
    resSerial = strtoi(substr(input, 7,11))
    residue = substr(input,18,20)
    type_of_chain = substr(input,22,22)
    resSeq = strtoi(substr(input, 23,26))
    altLoc = substr(input,17,17)

    if(resSeq >=1){ #does not include negative residues
      if(type_of_chain == chain_required && !(resSerial %in% visited)  && (altLoc == " " || altLoc == "A") ){
        visited <- c(visited, resSerial)
        AACount <- AACount + 1
        position_string =list()
        position_string[[1]]= as.numeric(substr(input,31,38))
        position_string[[2]] =as.numeric(substr(input,39,46))
        position_string[[3]] =as.numeric(substr(input,47,54))
        #print(input)
        positions[AACount,]<- c(residue, resSeq, type_of_chain, position_string[[1]], position_string[[2]], position_string[[3]])
      }
    }
  }
}

  } 
  positions<-positions[1:AACount,]
  positions[,2]<- as.numeric(positions[,2])
  positions[,4]<- as.numeric(positions[,4])
  positions[,5]<- as.numeric(positions[,5])
  positions[,6]<- as.numeric(positions[,6])
  return (positions)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T01:30:16.307

这是一种方法。它需要安装 bio3d R 包 ( [http://thegrantlab.org/bio3d/](http://thegrantlab.org/bio3d/) ) 和肌肉对齐可执行文件。我按照此处[http://thegrantlab.org/bio3d/tutorials/installing-bio3d的“附加实用程序”说明进行操作](http://thegrantlab.org/bio3d/tutorials/installing-bio3d)

下面的示例代码似乎适用于您列出的三种情况。

```
library(bio3d) 

## Download PDB file with given 'id' (can also read from online)
id <-  "3GFT" #"3V5Q"
file.name <- get.pdb(id)
pdb <- read.pdb(file.name)
pdb.seq <- pdbseq(pdb, atom.select(pdb, chain="A", elety="CA"))

## Get UniProt identifier and sequence
pdb.ano <- pdb.annotate(id, "db_id")
uni.seq <- get.seq(pdb.ano)

## Align sequences to define corespondences
aln <- seqaln( seqbind( pdb.seq, uni.seq), id=c(file.name, unlist(pdb.ano)) )

## Read aligned coordinate data (all the info you want is in here)
pdbs <- read.fasta.pdb(aln)

answer2 <- cbind( 1:ncol(pdbs$ali), t(pdbs$ali), 
            pdbs$resno[1,], matrix(pdbs$xyz[1,], ncol=3, byrow=T) ) 

head(answer2)

[1,] "1" "M"        "M"    "1" "62.935" "97.579" "30.223"
[2,] "2" "T"        "T"    "2" "63.155" "95.525" "27.079"
[3,] "3" "E"        "E"    "3" "65.289" "96.895" "24.308"
[4,] "4" "Y"        "Y"    "4" "64.899" "96.22"  "20.615"
[5,] "5" "K"        "K"    "5" "67.593" "96.715" "18.023"
[6,] "6" "L"        "L"    "6" "65.898" "97.863" "14.816" 
```

如果您希望您的氨基酸以 3 个字母代码列出，那么 bio3d 中有一个 aa321() 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T16:34:23.043

你可能想把这个问题移到 www.biostars.org 并写信给 help@uniprot.org（你知道这些序列已经在数据库级别链接了对吗？）无论如何写信给 help@uniprot.org 时问Jules Jacobsen 是 UniProt 的常驻专家，负责将 PDB 结构与 uniprot.org 规范序列联系起来。

# eclipse - 仅更新特定的 Eclipse 插件

> ID：10786804
> 
> 赞同：3
> 
> 时间：2012-05-28T15:09:09.237
> 
> 标签：eclipse, ide, updates

在 Eclipse 中检查更新有时需要相当长的时间。有没有办法检查特定的插件/功能是否有新的更新可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T07:05:32.893

From *About -> Installation Details -> Features* you can check for updates on single features (which is what you meant, because the Eclipse deployment system thinks in features, not plugins).

However, to get around that long waiting time, I would recommend to use *Preferences -> Install -> Automatic Update* and schedule a regular (weekly?) check. That way you don't have to wait at all and also will not forget checking for updates.

# apache - 使用 tomcat Basic 身份验证从 Web 应用程序注销

> ID：10786807
> 
> 赞同：9
> 
> 时间：2012-05-28T15:09:33.500
> 
> 标签：apache, tomcat, jsf-2, basic-authentication

我正在为我的网络应用程序使用 tomcat 基本身份验证：

我在我的网络应用程序的 web.xml 中添加了以下几行：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>webpages</web-resource-name>
            <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*</role-name>
    </auth-constraint>

    <user-data-constraint>
        <!-- transport-guarantee can be CONFIDENTIAL, INTEGRAL, or NONE -->
        <transport-guarantee>NONE</transport-guarantee>
    </user-data-constraint>
</security-constraint>

<login-config>
    <auth-method>BASIC</auth-method>
</login-config>
<security-role>
    <role-name>*</role-name>
</security-role> 
```

我的注销链接：

```
<h:commandLink value="Logout" action="#{userBean.logout}" /> 
```

我的注销链接操作：

```
public void logout() throws IOException
{
    FacesContext.getCurrentInstance().getExternalContext().invalidateSession();
    FacesContext.getCurrentInstance().getExternalContext().redirect("add_international_job.faces");
} 
```

现在，当调用注销时，它会重定向到另一个需要身份验证的页面。但它是在用户登录时呈现的。 PS：当用户第一次在地址栏中输入同一页面的url时，会出现身份验证挑战（表示该页面密码保护没有问题） .

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-28T15:41:18.183

您正在使用 HTTP`BASIC`身份验证而不是 HTTP`FORM`身份验证`j_security_check`。`BASIC`身份验证由浏览器端的`Authorization`请求标头完成，与会话无关。

要强制“注销”`BASIC`身份验证，服务器基本上需要返回 401 响应。

```
FacesContext facesContext = FacesContext.getCurrentInstance();
ExternalContext externalContext = facesContext.getExternalContext();
externalContext.invalidateSession();
externalContext.responseSendError(401, "You are logged out.");
facesContext.responseComplete(); 
```

这将显示一个 HTTP 401 错误页面，该页面可自定义`<error-page>`为`web.xml`.

相反，您也可以返回带有元刷新的 HTML 页面，以便最终用户被重定向到元刷新标题内容中指定的所需目标页面。

```
FacesContext facesContext = FacesContext.getCurrentInstance();
ExternalContext externalContext = facesContext.getExternalContext();
externalContext.invalidateSession();
externalContext.setResponseStatus(401);
externalContext.getResponseOutputWriter().write("<html><head><meta http-equiv='refresh' content='0;add_international_job.faces'></head></html>");
facesContext.responseComplete(); 
```

这看起来确实相当低级和hacky，但`BASIC`身份验证也相当低级。使用身份验证时，这不是必需的`FORM`。只是使会话无效并发送正常的重定向应该可以用于`FORM`身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-16T13:29:05.923

这是完全不同的东西。您正在使用 BASIC 身份验证来验证用户。这会在第一次请求时提示浏览器输入用户名和密码。从那时起，浏览器将自动将所有后续请求的用户名和密码发送到同一台服务器，因此您的基于 Web 的身份验证只是重新登录它们。会话无效，您输入的任何内容都将消失，但您不能让服务器重新提示用户输入名称和密码。它将继续向同一主机发送相同的用户名和密码，直到您关闭浏览器。这是 BASIC 身份验证的一个缺点。

我通常使用我自己的身份验证，因为它允许更多的自由，但是您有责任确保您的所有资源都受到保护。一个简单的方法是使用 Struts 并覆盖 action servlet perform 方法来进行身份验证。您创建自己的登录页面，而不是让浏览器显示登录对话框。您可以通过将变量保存到他们的会话并在他们发出请求时检查该变量来检查以确保某人已登录。如果设置了 var，它们就可以了。如果没有，您将它们重定向到登录页面。使会话无效将某人注销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:01:17.980

```
public void logout() throws IOException {
    HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
    try {
        request.logout();
    } catch (ServletException ex) {
        throw new IOException(ex);
    }
} 
```

# android - 根据方向在不同的容器中显示片段

> ID：10786809
> 
> 赞同：0
> 
> 时间：2012-05-28T15:09:36.587
> 
> 标签：android, fragment, illegalstateexception

我的活动有 2 种不同的纵向和横向 xml 布局。我试图在方向改变时使用相同的片段，在 Activity 的 onCreate() 中使用该代码：

```
if (savedInstanceState == null) {
    frag = Fragment
        .instantiate(this, PlayerControlsFragment.class.getName());
} else {
    frag = fragmentManager.findFragmentByTag(FRAG_TAG);
} 
```

然后，取决于方向：

```
private void initLandscapePlayerFragment(FragmentTransaction ft) {
    ft.add(R.id.layout_center_top, frag);
}
private void initPortraitPlayerFragment(FragmentTransaction ft) {
    ft.add(R.id.layout_left_top, frag);
} 
```

它给了我一个很好的

> IllegalStateException：无法更改片段 Frag 的容器 ID

事实上，当我在两个 xml 中使用相同的容器 id 时，它可以工作，但在我的情况下它不是一个解决方案。我尝试了不同的随机解决方案（在破坏活动之前分离等）但没有成功。
知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T11:37:28.283

供其他人阅读。请理解我们正在尝试做的事情。我们不是简单地处理屏幕旋转。**我们试图在屏幕旋转*和布局更改*后重新附加片段。**

Android 会抛出一个错误，即未将片段附加回具有相同 ID 的容器。问题是随着布局的改变，容器不存在，我们特别想附加到一个新的容器（因为它是一个不同的布局，即具有多个面板的景观）。

我可能和你一样沮丧。我发现您的答案没有解决方案，据我所知这是不可能的。根本不可能在 UI 片段上设置 RetainInstance(true) 并在屏幕旋转后重新附加。至少不使用支持库（本机支持可能有效，我不知道/不相关）。

最后，我只是允许碎片被转储并从头开始重新创建。

这可能很麻烦，因为后台仍然存在..

我不得不打电话

```
super.onCreate(null) 
```

转储片段事务回栈。

然后使用来自 onSaveStateInsance 的包中我自己的信息重新创建屏幕，以符合用户对布局更改的期望（两个片段中的哪一个现在将占据整个屏幕）。

该行为是高度特定于应用程序的......所以我很高兴详细说明或讨论它如何适用于您，但基本上重申，我不得不抛弃所有内容并根据用户期望从头开始重新创建，没有任何东西来自android。事实上，android 使用了一个只会崩溃的 backstack，并且无法杀死 backstack，而是将 null 传递给 super.oncreate 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T09:00:47.173

我也必须解决这个问题。就我而言，我第一次将片段添加到容器中时使用“添加”方法，然后“分离”以删除片段。从理论上讲，“deattach”的优势在于，当您稍后使用“attach”时，片段会自动转到前一个容器。

这种方法可以正常工作，直到用户旋转设备并更改容器，在这种情况下，如果容器不存在于屏幕上，您将看到黑屏。

在调用附加方法之前有可能更改容器会很棒，但显然这是不可能的......在其他线程中，我有一些想法，比如在使用新容器将片段添加到屏幕之前复制片段

[Android Fragment - 从一个视图移动到另一个视图？](https://stackoverflow.com/questions/15826585/android-fragment-move-from-one-view-to-another)

还有其他想法吗？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-28T15:41:20.760

通过阅读有关[支持多个屏幕的设计文档（#Using 配置限定符）](http://developer.android.com/guide/practices/screens_support.html#qualifiers)，您不应该根据您的设备方向控制使用哪种布局来膨胀视图。正确的做法是将视图的横向版本添加到 \*-land 资源文件夹。通过将选择哪个资源的控制权交给 Android 并删除您拥有的那些私有 init 方法来简化您的代码。你还有同样的问题吗？

# blackberry - 如何在黑莓中将事件侦听器设置为自动完成字段？

> ID：10786810
> 
> 赞同：1
> 
> 时间：2012-05-28T15:09:37.443
> 
> 标签：blackberry

我正在开发一个应用程序，因为我在黑莓中使用自动完成字段。而不是演示中的字符串集合，例如我想使用向量集合。

现在我想知道，当我在该字段中输入任何值时，它会根据输入返回结果。现在我想在用户点击查询返回的 3/4 结果中的特定结果时采取行动。那怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T12:14:14.520

用这个

AutoCompleteField autoCompleteField = new AutoCompleteField(filterList) {

```
 public void onSelect(Object selection, int type) {
     super.onSelect(selection, type);
     if(selection != null) {
         String selectionAsString = getEditField().getText();
         // Do whatever else you need to do with the String.
     }
 } 
```

};

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T17:58:17.723

尝试运行此代码。我已经处理过这个有一个数据库并过滤掉名称的问题。根据您的需要进行更改。希望它有所帮助。

```
 Try to run this code

        import java.util.Vector;
        import net.rim.device.api.collection.util.*;
        import net.rim.device.api.database.Cursor;
        import net.rim.device.api.database.Database;
        import net.rim.device.api.database.DatabaseFactory;
        import net.rim.device.api.database.Row;
        import net.rim.device.api.database.Statement;
        import net.rim.device.api.ui.*;
     import net.rim.device.api.ui.container.*;
     import net.rim.device.api.ui.component.*;

  public class AutoCompleteFieldDemo extends UiApplication
   { 

       public static void main(String[] args)
      {

       AutoCompleteFieldDemo app = new AutoCompleteFieldDemo();
          app.enterEventDispatcher(); 
           }

  public AutoCompleteFieldDemo()
  {
     pushScreen(new AutoCompleteFieldDemoScreen());
    }

        public static String[] getDataFromDB()
         {
      Vector names = new Vector();

       try
        { 

    Database db = DatabaseFactory.openOrCreate("database1.db"); 
   Statement statement1 = db.createStatement("SELECT name FROM Directory_Items");
    statement1.prepare();
     statement1.execute();
    Cursor c = statement1.getCursor();
       Row r;

   while(c.next()) 
    {
 r = c.getRow();
  names.addElement(r.getString(0));

   }

statement1.close(); 
  db.close();

 }
catch( Exception e ) 
{ 
 System.out.println( e.getMessage() );
 e.printStackTrace();
   }

 String [] returnValues = new String[names.size()];
  for (int i = 0; i < names.size(); i++) {
returnValues[i] = (String) names.elementAt(i);
 }

   return returnValues;

  }

  static final class AutoCompleteFieldDemoScreen extends MainScreen
  {

  AutoCompleteFieldDemoScreen()
  {

   BasicFilteredList filterLst = new BasicFilteredList();

     filterLst.addDataSet(1,getDataFromDB() ,"Names",BasicFilteredList.COMPARISON_IGNORE_CASE);
    AutoCompleteField autoFld = new AutoCompleteField(filterLst);
    add(autoFld); 

    } 
```

# android - ViewPager 中使用的 Fragment 内的 ListView 的行为不像预期的那样

> ID：10786811
> 
> 赞同：4
> 
> 时间：2012-05-28T15:09:38.663
> 
> 标签：android, android-layout, android-listview, fragment, android-viewpager

我对此列表视图中的项目有疑问。正常行为是当用户点击一个项目时，背景颜色变为橙色。我的应用程序没有发生这种情况，我不知道为什么。

main.xml 只有一个：

```
<android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" /> 
```

片段的 xml 只有一个：

```
<ListView
        android:id="@android:id/list"
        style="@style/MyListView"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </ListView> 
```

我在 listView 项中膨胀的视图是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:focusable="true"
    android:focusableInTouchMode="true" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textViewName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="5dp"
        android:layout_toRightOf="@+id/imageView1"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_alignLeft="@+id/textViewName"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="10dp"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:src="@drawable/bottom_arrow" />

</RelativeLayout> 
```

我为 ListView 定义的样式是：

```
<style name="MyListView" parent="@android:style/Widget.ListView.White">
        <item name="android:listSelector">@drawable/list_subject_selector</item>
        <item name="android:cacheColorHint">@android:color/transparent</item>
        <item name="android:background">@drawable/list_subject_selector</item>
    </style> 
```

list_subject_selector drawable 是：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- touch down -->
    <item android:drawable="@drawable/list_subject_focused" android:state_pressed="true"/>
    <!-- selected -->
    <item android:drawable="@drawable/list_subject_unfocused" android:state_focused="false" android:state_pressed="false" android:state_selected="true"/>
</selector> 
```

我不知道为什么会这样……我正在使用 Android ICS 进行测试。

有任何想法吗？

谢谢大家，费利佩

**更新 1** 这是 ListFragment 代码：

```
public class MyFragment extends ListFragment {
    private ListAdaptor adapter;
    private InternalDB db;
    Context mContext;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mContext = getActivity();
        db = new InternalDB(getActivity());
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        ArrayList<EventVO> listVO = db.getSummaryEvents(true);
        adapter = new ListAdaptor(mContext, R.layout.event_inflate, listVO);
        setListAdapter(adapter);            
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        LinearLayout rl = (LinearLayout) inflater.inflate(R.layout.general_list, container, false);
        return rl;
    }

    private class ListAdaptor extends ArrayAdapter<EventVO> {
        private ArrayList<EventVO> listVO;

        public ListAdaptor(Context context, int textViewResourceId, ArrayList<EventVO> items) {
            super(context, textViewResourceId, items);
            this.listVO = items;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                v = ViewGroup.inflate(getContext(), R.layout.event_inflate, null);
            }
            final EventVO o = listVO.get(position);
            TextView fullName = (TextView) v.findViewById(R.id.textViewName);
            fullName.setText(o.getUserName());

            //removed part of the code for brevity

            v.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View arg0) {
                    Intent i = new Intent(mContext, EventDetailsActivity.class);
                    i.putExtra("USER_ID", o.getUserId());                       
                    startActivity(i);
                }
            });
            return v;
        }
    }
} 
```

**更新 2** 现在可以工作了！那很烦人。我这样做是为了让它工作：

我用来膨胀的 xml 文件有：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:focusable="true"
        android:focusableInTouchMode="true" > 
```

我改为：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"> 
```

但是，我认为真正做出改变的是：在 onActivityCreated() 内部

```
list = getListView();
        list.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                ListAdaptor la = (ListAdaptor)arg0.getAdapter();
                EventVO vo = la.getItem(arg2);
                Intent i = new Intent(mContext, EventDetailsActivity.class);
                i.putExtra("USER_ID", vo.getUserId());
                i.putExtra("IS_BORROWED", true);
                startActivity(i);
            } 
```

重要的是行*list = getListView();* 我没有通过这段代码获得 ListView。我在 onCreateView() 方法中使用 findViewById 获取 listView。我想我失去了与真实 ListView 对象的链接。

感谢所有帮助过我的人！:)

费利佩});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T16:27:57.237

尝试更改您的列表选择器。目前，仅当 ListView 中的项目未聚焦*或*按下*并被*选中时，才使用第二个可绘制对象。我真的不明白您希望选择器的外观`"@drawable/list_selector_unfocused"`如何，但如果您希望列表选择器看起来正常，只需删除所有其他属性，这意味着*仅*在按下项目时`"@drawable/list_selector_focused"`才会使用。

 *```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- touch down -->
<item android:drawable="@drawable/list_subject_focused" android:state_pressed="true"/>
<!-- selected -->
<item android:drawable="@drawable/list_subject_unfocused" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:25:23.440

I found that when I was adding `ListView` layouts to *pure* `Fragment`s you would loose a lot of the freebies the old `ListActivity` and such provided in the background. I would suggest that you change away from using a pure `Fragment` to using a `ListFragment` and you can watch all that awesomeness come back with no need to play about with selector drawables.

The 'Swell' and 'Tide' tabs in our application are both ListFragments within a `ViewPager` and look like this;

![ListFragment within a pager with highlighting (original ICS is a bit darker than shown here)](../Images/150e2eff0a5c4bb09ac0663591fce8cb.png)*

# binding - JRuby JSR223 接口忽略 binidngs

> ID：10786812
> 
> 赞同：2
> 
> 时间：2012-05-28T15:09:39.067
> 
> 标签：binding, jruby, jsr223

JRuby (1.6.7.2) 框架的 JSR 223 javax.script 接口似乎忽略了 ScriptContext 的绑定中的绑定 Java 值。我犯错了吗？这是一个不起作用的简单示例：

```
private void run() throws ScriptException {
    ScriptEngine engine = new JRubyEngineFactory().getScriptEngine();
    LittleClass l = new LittleClass();
    engine.put("l", l);
    engine.eval("l.x;");
}

public class LittleClass {
    public int x;
    public void add() {
        x = x + 1;
    }
} 
```

或者这是一个已知问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:36:09.080

默认情况下，局部变量不会在多次评估中存活。见： http: [//kenai.com/projects/jruby/pages/RedBridge](http://kenai.com/projects/jruby/pages/RedBridge)

要更改此行为，请设置`org.jruby.embed.localvariable.behavior`属性：

```
 System.setProperty("org.jruby.embed.localvariable.behavior", "persistent");

    ScriptEngine engine = new JRubyEngineFactory().getScriptEngine();
    LittleClass l = new LittleClass();
    engine.put("l", l);
    engine.eval("l.add");
    System.out.println(engine.eval("l.x")); 
```

# c# - Jquery ajax返回额外信息

> ID：10786817
> 
> 赞同：0
> 
> 时间：2012-05-28T15:10:00.610
> 
> 标签：c#, web-services, jquery

我想从 jquery ajax 请求中返回一个字符串，但它返回我的字符串以及其他一些东西。我认为它的asp webservice 信息。

这是我的jQuery请求

```
jQuery.ajax(
        {
            type: "GET",
            url: "../WebService.asmx/GetProductLink",
            data: 'productId=' + productId + '&companyId=' + companyId,
            contentType: "application/text; charset=utf-8",
            dataType: "text",
            success: function (data) {
                console.log(data);
            }
        }); 
```

这是成功返回的内容

```
<?xml version="1.0" encoding="utf-8"?><string xmlns="http://tempuri.org/">http://www.facebook.com/Soundworkz</string> 
```

我想要的部分是[http://www.facebook.com/Soundwork](http://www.facebook.com/Soundwork)部分。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:13:42.233

删除此行

```
dataType: "text", 
```

并让 jquery 猜测服务器返回的正确数据类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:11:59.100

你可以使用`dataType`即`xml`

```
 dataType: "xml" 
```

或删除`dataType`选项。

# android - Android：onKeyDown 仅使用选项菜单按钮调用一次

> ID：10786821
> 
> 赞同：2
> 
> 时间：2012-05-28T15:10:13.847
> 
> 标签：android, menu, onkeydown

我正在使用一个 ActivityGroup 来覆盖处理“后退”按钮所需的 onKeyDown。如果您在第一次活动时按下菜单按钮，则会创建选项菜单。如果我随后导航到此活动组中的第二个活动并再次按下菜单按钮，则菜单将按预期显示。但是当我回到第一个活动时，菜单按钮再也不会起作用了。菜单永远不会被调用。如果您然后导航回第二个活动并按下菜单按钮，它就可以工作。现在，如果您从该活动导航到第三个活动，菜单按钮将在那里工作，但不适用于第一个或第二个活动。此问题仅出现在 OS 2.3 上。它在 OS 2.2 上按预期工作。不知何故，似乎每个活动都接管了菜单处理程序并且没有释放它，即使我在返回上一个活动时破坏了活动。除了第一个活动之外，任何活动中都没有 onKeyDown 处理程序或菜单创建。这是 2.2 中的错误还是仅来自制造商（华为）？

# c - 在 C 程序中包装 Printf 时遇到问题

> ID：10786825
> 
> 赞同：6
> 
> 时间：2012-05-28T15:10:18.133
> 
> 标签：c, printf

我正在尝试将 printf 包装在 C 程序中（嗯，实际上是 _snprintf，但这个例子更简单）并且无法让变量参数的东西工作。这是我的代码：

```
#include <stdio.h>
#include <stdarg.h>

void works(void)
{
    printf("%d\n", 100);
}

void wrap_printf(const char *fmt, ...)
{
    va_list args;
    va_start(args, fmt);
    printf(fmt, args);
    va_end(args);
}

void broken(void)
{
    wrap_printf("%d\n", 100);
}

int main(void)
{
    works();
    broken();
    return 0;
} 
```

这是我的输出：

```
100
3668388 
```

args 变量在我的代码中调用后看起来不错`va_start`，但是一旦我进入 C 运行时代码并且他们调用`va_start`的值看起来很糟糕。关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-28T15:11:48.650

```
va_start(args, fmt);
vprintf(fmt, args);
va_end(args); 
```

您需要调用[`vprintf`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/vprintf.html)而不是`printf`. `v*printf`函数理解`va_List`参数。我很惊讶你没有收到警告。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T15:12:32.063

你正在传递`args`which is a `va_list`，但`printf()`当然直接期望参数，它无法知道它的第二个参数突然是 a `va_list`。

您应该使用`[vprintf()](http://linux.die.net/man/3/vfprintf)`确实期望 a`va_list`并且知道如何从中提取值的可变参数版本。

# c# - 如何在winform的中心设置控件？

> ID：10786835
> 
> 赞同：14
> 
> 时间：2012-05-28T15:11:09.120
> 
> 标签：c#, .net, winforms

您好我正在尝试在表单中心设置控件（即标签或文本框）。当我最大化该形式时，我需要这个。我可以静态或动态设置它。谁有想法请尽快告诉我...

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-28T15:16:06.520

将控件放在中心并将`Anchor`属性设置为`None`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T15:18:16.253

**你可以做到这一点使用布局控件**

1.  添加 TableLayout 控件，将其 Dock 属性设置为 Fill。
2.  添加 1 行大小类型样式百分比 100%
3.  添加 3 列 Column1（大小类型 - 百分比（100%）），Column2（大小类型 - 绝对（200px）），Column3（大小类型 - 百分比（100%））。
4.  现在将面板控件添加到 Column2 并将其 Dock 属性设置为 Fill
5.  将按钮添加到此控件并根据需要设置其大小并将其锚属性设置为`AnchorStyles.Left | AnchorStyles.Right | AnchorStyles.Top`

[参考](https://stackoverflow.com/questions/10599961/align-controls-to-center-in-a-flowlayout/10603783#10603783)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-14T02:17:57.833

可以在设计视图中对标签进行居中对齐。导航到“属性”，您必须关闭一个名为“自动调整大小”的设置（将其设置为 false）。这允许您将标签的宽度设置为页面的宽度。

然后在“属性”中向下滚动到名为“TextAlign”的设置并将其设置为“MiddleCenter”。那应该可以解决问题。

# html - css - 使徽标居中

> ID：10786837
> 
> 赞同：1
> 
> 时间：2012-05-28T15:11:13.857
> 
> 标签：html, css

我正在尝试将 pinterest 徽标居中以仅用于检查目的。但与 Pinterest 网站相比，它并不完美。

请检查这个[http://jsfiddle.net/Nwk5Q/embedded/result/](http://jsfiddle.net/Nwk5Q/embedded/result/)

然后去[http://pinterest.com](http://pinterest.com)可以看到**左边**的logo有点不同。

**我检查了我的电脑，发现左侧**位置相差大约 10 像素。为什么会这样？我复制了 pinterest 使用的相同代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T15:16:56.053

它被称为滚动条：-D

因为你有`left:50%`并且标准滚动条很`20px`宽，所以你留下了`10px`偏移量；）

你可以加

```
body { overflow-y:scroll } 
```

为了确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:20:40.217

原因是在 pinterest 网站中有一个滚动条可以缩短网站的宽度。它把一切都推到了左边。

添加CSS

```
html { overflow:scroll } 
```

你会发现没有区别

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:18:27.323

你做了这个了吗：

```
html, body {
  margin: 0;
  padding: 0;
} 
```

# jquery - 将php字符串返回到jquery

> ID：10786839
> 
> 赞同：0
> 
> 时间：2012-05-28T15:11:26.053
> 
> 标签：jquery, jquery-plugins, jquery-forms-plugin, jqueryform

我有简单的表单，可以将图像上传到服务器并返回包含图像地址（和/或附加 html 代码）的 php 字符串。它是通过 JqueryForm 插件完成的。我想要的是：PHP文件返回的值（字符串）需要返回给jquery，所以我可以使用该图像url将其设置为某个元素的背景：

这是php文件（用于上传图像）：

$path = "上传/";

```
$valid_formats = array("jpg", "png", "bmp");
if(isset($_POST) and $_SERVER['REQUEST_METHOD'] == "POST")
    {
        $name = $_FILES['photoimg']['name'];
        $size = $_FILES['photoimg']['size'];

        if(strlen($name))
            {
                list($txt, $ext) = explode(".", $name);
                if(in_array($ext,$valid_formats))
                {
                if($size<(1024*1024))
                    {
                        $actual_image_name = time().substr(str_replace(" ", "_", $txt), 5).".".$ext;
                        $tmp = $_FILES['photoimg']['tmp_name'];
                        if(move_uploaded_file($tmp, $path.$actual_image_name))
                            {
                                echo $actual_image_name; //This is returned, i want thist to be somehow "converted" to jquery
                            }
                        else
                            echo "Sending failed!";
                    }
                    else
                    echo "May filesize 1 Mb!";                  
                    }
                    else
                    echo "Unknown ffile format!";   
            }

        else
            echo "Select image for sending";

        exit;
    } 
```

而且，这里是用于发送图像的 jquery 代码：

```
$('#photoimg').live('change', function() {
       $("#main").html('');
$("#main").html('<img src="/uploader/loader.gif" class="vk_upload_bar" alt="Uploading...."/>');
$("#imageform").ajaxForm({
        target: '#main'
}).submit();
}); 
```

不知何故，而不是：

```
target: '#main' 
```

将一些html放在#main中，我需要这样做：

```
 $('#main').css('background-image', 'url(' + imageUrl + ')'); 
```

其中图像将由 css 分配 ti #main。（imageUrl 是上面 php 文件中的字符串：$actual_image_name）

这可能吗，或者至少有一些类似的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:15:55.863

编写一个在文档加载时执行的函数调用，并将字符串传递给 HTML javascript 中的函数调用：

```
$(document).onload( function() {
     functionCall('<?php echo $actual_image_name ?>');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T15:37:24.790

您需要以 jquery 形式实现**成功**项目，您的代码必须是这样
的（确保在 php 中您返回图像的完整路径，不需要使用 json，使用 echo 或 print 可以正常工作）

```
$('#photoimg').live('change', function() {
   $("#main").html('');
   $("#main").html('<img src="/uploader/loader.gif" class="vk_upload_bar"       alt="Uploading...."/>');
   $("#imageform").ajaxForm({
    url : 'yourphpfile' ,
   success :function (data){
          $('#main').css('background-image', 'url(' +  data + ')');

    }

   }).submit();
    }); 
```

有关 jquery 表单的更多信息，请使用[此链接](http://jquery.malsup.com/form/#ajaxForm) ，

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T15:22:41.583

进行 AJAX 调用，将数据作为 JSON 字符串发送到 PHP 文件，并在回调函数中接收结果（也是 JSON 字符串）。使用 jQuery 中的返回数据。

# xml - 防止 xslt 将 xml 转换为 html

> ID：10786841
> 
> 赞同：0
> 
> 时间：2012-05-28T15:11:35.340
> 
> 标签：xml, xslt, oai

我正在使用[OAI-PMH](http://www.openarchives.org/pmh/)从数据提供者那里检索记录。我的问题是，其中一些数据提供者使用 XSLT 检索记录以将 XML 响应转换为 HTML！因为我需要在他们的响应中解析和实现一些东西，所以我需要一个 XML 响应，而不是 HTML 响应。

所以我的问题是：有没有办法在 XML 转换成 HTML 之前捕获它？

例如这个[链接](http://portal.dimdi.de/oai-gms/OaiHandler?verb=ListRecords&metadataPrefix=oai_dc)说明了我解释的内容。当我使用 Chrome 开发工具时，进入“资源”选项卡，“框架”项，然后“（OaiHandler）”->“OaiHandler”，我们可以看到原生 xml。

或者我应该有自己的 XSLT 将 HTML 响应转换回 XML 吗？如果是这种情况，则提供了一个标准 XSLT 来将 OAI-PMH 数据提供者 XML 响应转换为 HTML。是否有能够构建“逆”XSLT 的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:31:01.840

查看您在 Firefox 中发布的链接（任何浏览器都可以）并选择`View Source`显示以 XML（不是 HMTL）返回的内容。但是，由于源代码中的这一行...

```
<?xml-stylesheet type="text/xsl" href="http://portal.dimdi.de/oai-gms/browser.xsl" ?> 
```

...您的 Web 浏览器可能会加载引用的样式表以在本地 PC 上转换为 HTML 以进行显示。服务器仍在向您发送 XML。如果您要使用默认情况下不执行样式表的任何 HTTP 客户端访问相同的链接，那么您只会看到显示的 XML

另一方面，如果服务器直接向您发送 HTML（因此查看源代码显示），那么您无能为力。供应商这样做是没有意义的，因为据我所知，他们不会遵守[OAI 协议规范](http://www.openarchives.org/OAI/openarchivesprotocol.htm#ListRecords)。

# java - 编译器正在创建额外的类文件，其中包含 $

> ID：10786842
> 
> 赞同：1
> 
> 时间：2012-05-28T15:11:37.413
> 
> 标签：java, compilation, javac, inner-classes, anonymous-inner-class

我正在使用 Eclipse，并且使用 SWT 编写了一个 Java 应用程序。当 Eclipse 编译我的程序时，它将我的主文件重命名为 4 个不同的文件，如下所示：

*   MainFile.class
*   MainFile$1.class
*   MainFile$2.class
*   MainFile$3.class

当我从命令行运行这个程序时，我得到

> 找不到主类：MainFile.class。程序将会退出。

我真的不明白为什么会这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T15:14:07.323

这些`$`类用于匿名内部类并且完全正常。

我们能看到你运行的命令行吗？您可能需要编写`java MainFile`而不是`java MainFile.class`.

# java - 将 Actionlistener 类型转换为整数 java

> ID：10786845
> 
> 赞同：1
> 
> 时间：2012-05-28T15:11:46.437
> 
> 标签：java, swing, user-interface, actionlistener

我需要将`Actionlistener`类型转换为整数来调用方法。有任何想法吗？

```
import javax.swing.*;
import java.awt.*;
/**
* sold by pound
*/
public class CandyPanel extends JPanel { 
    public CandyPanel () {
        // Create a GridLayout manager with 
        // two rows and one column.
        setLayout(new GridLayout(1, 1));

        // Create the radio buttons.
        JPanel gummyBears = new JPanel(new BorderLayout());

        // Add a border around the panel.
        setBorder(BorderFactory.createTitledBorder("Gummy Bears"));

        // Add the JPanel to the panel.
        add(gummyBears);
    }

    /** 
    * returns the total cost of the item based on the 
    * number of units purchased 
    * @param number    the number of units purchased 
    * @return          the total cost of those units 
    */
    public double getCost(int number) { 
         double total = number * 2.00;
         return total;
    } 

    /** 
    * Prints the ordered item 
    * @param amount    the number of units purchased 
    * @param cost      the total cost of those units 
    */
    public void printOrderItem(int amount, double cost){ 
        JOptionPane.showMessageDialog(null, amount + " Gummy Bears at $2.00/pound = $" + cost + ".");
    } 
} 
```

这是需要转换的方法`int`。

```
public double getCost(int number) { 
     double total = number * 2.00;
     return total;
} 
```

我尝试`parseInt`按照在线研究进行操作，但它不适用于`ActionEvent`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:24:28.880

您不能将 ActionEvent 转换为 int。但是，如果它是您想要转换为 int 的用户输入，比如一个文本框，它将是这样的：

```
String s = jTextBox.getText();
int i = Integer.valueOf(s); 
```

然后将整数值插入您的方法中。如果您需要帮助，这里还有一个关于如何使用 ActionListener 的教程：http: [//docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

希望这可以帮助！

# sql-order-by - 用mysql中的相关表排序

> ID：10786849
> 
> 赞同：2
> 
> 时间：2012-05-28T15:11:56.060
> 
> 标签：sql-order-by

我不记得在 php 中对相关表中的数据进行排序的正确方法了吗？我不确定它是否可能在一个查询中？

```
table brands
id    name
------------
1     Disney
2     Pepsi
3     Sony 
```

* * *

```
table products
id    name        brandId
-----------------------
1     cd-playerX    3
2     nice poster   1
3     usb-radio     3
4     cd-playerY    3 
```

我想列出所有按品牌表**名称****（order=asc）**排序的产品，如下所示：

*   漂亮的海报（迪士尼）
*   cd-playerX (索尼)
*   cd-playerY (索尼)
*   USB收音机（索尼）

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:17:16.317

```
select p.name + ' (' + b.name + ')' as fullName
from products as p
left join brands as b
     on p.id = b.brandId
order by b.name asc, p.name asc --optional for brands with multiple products 
```

# c# - 使用 Google Analytics API V3 的动态分段返回 400 错误

> ID：10786851
> 
> 赞同：1
> 
> 时间：2012-05-28T15:12:09.863
> 
> 标签：c#, .net, google-analytics-api

我正在尝试通过这个库在谷歌分析 api v3 中使用动态段：

[http://code.google.com/p/google-api-dotnet-client/](http://code.google.com/p/google-api-dotnet-client/)

我尝试用这个定义一个段：

```
dynamic::ga:medium==organic; 
```

但它返回给我一个 400 错误。

以前我使用这个库：

[http://code.google.com/p/google-gdata/](http://code.google.com/p/google-gdata/)

有同样的要求，它工作得很好。

有人知道为什么它不再起作用了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:10:50.503

似乎新的 API 不接受 last ；在动态部分。

所以而不是：

```
dynamic::ga:medium==organic; 
```

写 ：

```
dynamic::ga:medium==organic 
```

# .net - NHibernate连接Oracle命名空间'urn：nhibernate-mapping-2.2'中的元素'id'具有无效的子元素'column'

> ID：10786856
> 
> 赞同：-1
> 
> 时间：2012-05-28T15:12:35.963
> 
> 标签：.net, oracle, nhibernate

尝试配置 NHibernate 连接到 Oracle 时遇到错误：

> NhbHelper.CUSTOMER.hbm.xml(6,8)：XML 验证错误：命名空间“urn:nhibernate-mapping-2.2”中的元素“id”在命名空间“urn:nhibernate-mapping-2.2”中具有无效的子元素“列” '。

当我尝试添加程序集时发生错误

```
var configuration = new Configuration();
configuration.AddAssembly("NhbHelper");
sessionFactory = configuration.BuildSessionFactory(); 
```

我的客户.cs

```
using System.Collections.Generic; 
using System.Text; 
using System; 

namespace NhbHelper.Customer {

    public class CUSTOMER {
        public CUSTOMER() { }
        public virtual long CUSTOMER_ID { get; set; }
        public virtual string CUSTOMER_CODE { get; set; }
        public virtual string CUSTOMER_NAME { get; set; }
        public virtual string SHOP_ID { get; set; }
        public virtual string COUNTRY { get; set; }
        public virtual string AREA_CODE { get; set; }
        public virtual string STREET { get; set; }
        public virtual string HOUSENUMBER { get; set; }
        public virtual string PHONE { get; set; }
        public virtual System.Nullable<System.DateTime> CREATE_DATE { get; set; }
        public virtual System.Nullable<System.DateTime> UPDATE_DATE { get; set; }
        public virtual string POSTAL_CODE { get; set; }
        public virtual string CONTACT_PERSON { get; set; }
        public virtual string TAX_CODE { get; set; }
        public virtual string MOBILEPHONE { get; set; }
        public virtual string LOCATION { get; set; }
        public virtual long CUSTOMER_TYPE_ID { get; set; }
        public virtual long LOYALTY { get; set; }
        public virtual string CREATE_USER { get; set; }
        public virtual string UPDATE_USER { get; set; }
        public virtual string DISLAY { get; set; }
        public virtual System.Nullable<System.DateTime> LAST_APPROVE_ORDER { get; set; }
        public virtual System.Nullable<System.DateTime> LAST_ORDER { get; set; }
        public virtual System.Nullable<long> STATUS { get; set; }
    }
} 
```

这是我的 CUSTOMER.hbm.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping assembly="NhbHelper" namespace="NhbHelper.Customer" xmlns="urn:nhibernate-mapping-2.2">
  <class name="CUSTOMER" table="CUSTOMER" lazy="true" >
    <id name="CUSTOMER_ID">
      <generator class="identity" />
      <column name="CUSTOMER_ID" sql-type="NUMBER"  />
    </id>
    <property name="CUSTOMER_CODE">
      <column name="CUSTOMER_CODE" sql-type="VARCHAR2" not-null="true" />
    </property>
    <property name="CUSTOMER_NAME">
      <column name="CUSTOMER_NAME" sql-type="NVARCHAR2" not-null="false" />
    </property>
    <property name="SHOP_ID">
      <column name="SHOP_ID" sql-type="NVARCHAR2" not-null="true" />
    </property>
    <property name="COUNTRY">
      <column name="COUNTRY" sql-type="NVARCHAR2" not-null="false" />
    </property>
    <property name="AREA_CODE">
      <column name="AREA_CODE" sql-type="VARCHAR2" not-null="true" />
    </property>
    <property name="STREET">
      <column name="STREET" sql-type="NVARCHAR2" not-null="false" />
    </property>
    <property name="HOUSENUMBER">
      <column name="HOUSENUMBER" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="PHONE">
      <column name="PHONE" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="CREATE_DATE">
      <column name="CREATE_DATE" sql-type="DATE" not-null="false" />
    </property>
    <property name="UPDATE_DATE">
      <column name="UPDATE_DATE" sql-type="DATE" not-null="false" />
    </property>
    <property name="POSTAL_CODE">
      <column name="POSTAL_CODE" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="CONTACT_PERSON">
      <column name="CONTACT_PERSON" sql-type="NVARCHAR2" not-null="false" />
    </property>
    <property name="TAX_CODE">
      <column name="TAX_CODE" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="MOBILEPHONE">
      <column name="MOBILEPHONE" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="LOCATION">
      <column name="LOCATION" sql-type="VARCHAR2" not-null="true" />
    </property>
    <property name="CUSTOMER_TYPE_ID">
      <column name="CUSTOMER_TYPE_ID" sql-type="NUMBER" not-null="true" />
    </property>
    <property name="LOYALTY">
      <column name="LOYALTY" sql-type="NUMBER" not-null="true" />
    </property>
    <property name="CREATE_USER">
      <column name="CREATE_USER" sql-type="VARCHAR2" not-null="true" />
    </property>
    <property name="UPDATE_USER">
      <column name="UPDATE_USER" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="DISLAY">
      <column name="DISLAY" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="LAST_APPROVE_ORDER">
      <column name="LAST_APPROVE_ORDER" sql-type="DATE" not-null="false" />
    </property>
    <property name="LAST_ORDER">
      <column name="LAST_ORDER" sql-type="DATE" not-null="false" />
    </property>
    <property name="STATUS">
      <column name="STATUS" sql-type="NUMBER" not-null="false" />
    </property>
  </class>
</hibernate-mapping> 
```

请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:15:27.553

删除映射上的列标记：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping assembly="NhbHelper" namespace="NhbHelper.Customer" xmlns="urn:nhibernate-mapping-2.2">
  <class name="CUSTOMER" table="CUSTOMER" lazy="true" >
    <id name="CUSTOMER_ID">
      <generator class="identity" />
    </id>
    <property name="CUSTOMER_CODE">
      <column name="CUSTOMER_CODE" sql-type="VARCHAR2" not-null="true" />
    </property>
    <property name="CUSTOMER_NAME">
      <column name="CUSTOMER_NAME" sql-type="NVARCHAR2" not-null="false" />
    </property>
    <property name="SHOP_ID">
      <column name="SHOP_ID" sql-type="NVARCHAR2" not-null="true" />
    </property>
    <property name="COUNTRY">
      <column name="COUNTRY" sql-type="NVARCHAR2" not-null="false" />
    </property>
    <property name="AREA_CODE">
      <column name="AREA_CODE" sql-type="VARCHAR2" not-null="true" />
    </property>
    <property name="STREET">
      <column name="STREET" sql-type="NVARCHAR2" not-null="false" />
    </property>
    <property name="HOUSENUMBER">
      <column name="HOUSENUMBER" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="PHONE">
      <column name="PHONE" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="CREATE_DATE">
      <column name="CREATE_DATE" sql-type="DATE" not-null="false" />
    </property>
    <property name="UPDATE_DATE">
      <column name="UPDATE_DATE" sql-type="DATE" not-null="false" />
    </property>
    <property name="POSTAL_CODE">
      <column name="POSTAL_CODE" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="CONTACT_PERSON">
      <column name="CONTACT_PERSON" sql-type="NVARCHAR2" not-null="false" />
    </property>
    <property name="TAX_CODE">
      <column name="TAX_CODE" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="MOBILEPHONE">
      <column name="MOBILEPHONE" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="LOCATION">
      <column name="LOCATION" sql-type="VARCHAR2" not-null="true" />
    </property>
    <property name="CUSTOMER_TYPE_ID">
      <column name="CUSTOMER_TYPE_ID" sql-type="NUMBER" not-null="true" />
    </property>
    <property name="LOYALTY">
      <column name="LOYALTY" sql-type="NUMBER" not-null="true" />
    </property>
    <property name="CREATE_USER">
      <column name="CREATE_USER" sql-type="VARCHAR2" not-null="true" />
    </property>
    <property name="UPDATE_USER">
      <column name="UPDATE_USER" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="DISLAY">
      <column name="DISLAY" sql-type="VARCHAR2" not-null="false" />
    </property>
    <property name="LAST_APPROVE_ORDER">
      <column name="LAST_APPROVE_ORDER" sql-type="DATE" not-null="false" />
    </property>
    <property name="LAST_ORDER">
      <column name="LAST_ORDER" sql-type="DATE" not-null="false" />
    </property>
    <property name="STATUS">
      <column name="STATUS" sql-type="NUMBER" not-null="false" />
    </property>
  </class>
</hibernate-mapping> 
```

# java-me - com.sun.lwuit.html.CSSEngine.applyStyleToUIElement 处的 java.lang.NullPointerException（未知来源）

> ID：10786863
> 
> 赞同：1
> 
> 时间：2012-05-28T15:13:12.313
> 
> 标签：java-me, linkedin, lwuit

我正在为 j2me 运行带有 eclipse pulsar 的 S60 SDK。我正在尝试加载 Linkedn 登录页面。但如果我只通过设置 htmlc.setPage() 加载linkedin.com，那么它只显示linkedin name join now &.. 但不显示电子邮件和密码文本框和登录按钮。

我的课程代码如下：

```
public class Login {
    Form form = new Form();
    String authorizeUrl = "";
    LinkedInUser user;

    public Form Login() {
        try {
            Display.init(this);
            HttpRequestHandler  handler = new HttpRequestHandler();// = new AsyncDocumentRequestHandler();
            HTMLComponent htmlC = new HTMLComponent(handler);
            user = new LinkedInUser(Const.consumerKey, Const.consumerSecret);
            user.fetchNewRequestToken();

            if (user.requestToken != null) {
                authorizeUrl = "https://www.linkedin.com/uas/oauth/authorize?oauth_token="
                        + user.requestToken.getToken();
            }
            //htmlC.setPage("http://m.google.com");
            System.out.println(""+htmlC.toString());
            System.out.println(""+authorizeUrl);

            //htmlC.setPage("https://www.linkedin.com/uas/oauth/authorize?oauth_token=5a7ed20d-3a04-419d-85ea-ba99fc06ddbd");
            htmlC.setPage(authorizeUrl);
            System.out.println(authorizeUrl);
            FlowLayout flow = new FlowLayout(Component.TOP);
            form.setLayout(flow);
            form.addComponent(htmlC);

            //myMIDlet.platformRequest("http://wap.mdfactory.com");

        } catch (Exception e) {
            e.printStackTrace();
        }

        return form;
    }
} 
```

我收到以下一组错误：

```
Uncaught exception!
java.lang.NullPointerException
    at com.sun.lwuit.html.CSSEngine.applyStyleToUIElement(Unknown Source)
    at com.sun.lwuit.html.CSSEngine.applyStyle(Unknown Source)
    at com.sun.lwuit.html.CSSEngine.checkSelector(Unknown Source)
    at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
    at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
    at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
    at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
    at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
    at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
    at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
    at com.sun.lwuit.html.CSSEngine.applyCSS(Unknown Source)
    at com.sun.lwuit.html.HTMLComponent.applyAllCSS(Unknown Source)
    at com.sun.lwuit.html.ResourceThreadQueue.threadFinished(Unknown Source)
    at com.sun.lwuit.html.ResourceThreadQueue$ResourceThread.streamReady(Unknown Source)
    at com.sun.lwuit.html.ResourceThreadQueue$ResourceThread.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

epocwind.out 文件的最后几行是

```
 734.005  content size: 96.0000x96.0000
   734.010  content size: 96.0000x96.0000
   734.190  WSOCK: Protocol: [0F6414B8] 1 socket(s) have unread data
   734.190  WSOCK: ServProvider: [0F646F18] 23 bytes in socket, 0 bytes unread
   734.190  WSOCK: ServProvider: [0F646F18] indicating 23 bytes
   734.190  WSOCK: ServProvider: [0F646F18] 5 bytes requested, 23 bytes unread
   734.190  WSOCK: ServProvider: [0F646F18] received 5 bytes, 18 bytes left
   734.190  WSOCK: ServProvider: [0F646F18] 18 bytes requested, 18 bytes unread
   734.190  WSOCK: Protocol: [0F6414B8] 0 socket(s) have unread data
   734.190  WSOCK: ServProvider: [0F646F18] 0 bytes in socket, 0 bytes unread
   734.190  WSOCK: ServProvider: [0F646F18] received 18 bytes, 0 bytes left
   734.190  WSOCK: ServProvider: [0F646F18] 0 bytes in socket, 0 bytes unread
   734.190  WSOCK: ServProvider: [0F646F18] end of data, I guess
   734.215  WSOCK: ServProvider: [0F646F18] Shutdown(00000000)
   734.215  WSOCK: ServProvider: [0F646F18] SetNotify(00000000)
   734.215  WSOCK: ServProvider: [0F646F18] destroyed
   736.050  WSOCK: Interface: GetDataTransferred(0)
   741.050  WSOCK: Interface: GetDataTransferred(0)
   746.050  WSOCK: Interface: GetDataTransferred(0)
   751.050  WSOCK: Interface: GetDataTransferred(0)
   756.050  WSOCK: Interface: GetDataTransferred(0)
   761.050  WSOCK: Interface: GetDataTransferred(0)
   766.050  WSOCK: Interface: GetDataTransferred(0)
   771.050  WSOCK: Interface: GetDataTransferred(0)
   776.050  WSOCK: Interface: GetDataTransferred(0)
   781.050  WSOCK: Interface: GetDataTransferred(0) 
```

为什么会发生这种情况，请朋友帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:47:32.327

尝试使用 http 而不是 https 打开页面。

# java - 如何随机选择按钮

> ID：10786864
> 
> 赞同：-2
> 
> 时间：2012-05-28T15:13:15.777
> 
> 标签：java, android

我有一个用户界面，像这样

![用户界面](../Images/79ff105c6e81828fd9204f3b6552569c.png)

我想要的是随机选择其中 3 个并更改他们的文本。谢谢你。

UPD1：我尝试了什么：

```
ArrayList<Button> _btnList = new ArrayList<Button>();
    for (int i = 1; i <= 16; ++i) {
        _btnList.add(btn1);
    } 
```

在这里我卡住了，如何在里面添加所有按钮。

upd2：完成了，真的不回答并把缺点让头脑工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:16:40.397

首先，在 onCreate() 上，创建一个新的 ArrayList 并将所有按钮添加到其中。

然后只生成 0 到 15 之间的 3 个随机整数（将 16*Math.Random 转换为 int 就可以了），检查其中一些是否重复，如果它们确实改变了它们，所以你得到 3 个不同的数字，获取数组中的按钮。获取（随机）并更改他们的文本。

# c# - C# - 合并两个数据表。任何解决方案？

> ID：10786872
> 
> 赞同：1
> 
> 时间：2012-05-28T15:13:57.007
> 
> 标签：c#, excel, merge, datatable

**Objective:** if `dt1`contains `Column["Item"]`and `dt2`also contains `Column["Item"]`then,`dt3`将只有一个`Column["Item"]`. 如果他们两个都有“汉堡”作为项目，则用一​​个覆盖，如果不常见，则添加新行。

我试过用`tabel3.Clone(table1)`and来做`table3.merge(table2)`。它向我展示了这一点：

![答：第 1 部分](../Images/dfdc5fff99aa85abc8192141ec61ceb8.png)

![答：第 2 部分](../Images/8ab620be6f56eee88e4485891637898b.png)

请注意 和 的共同元素`tb1`以及`tb2`的所有元素`tb2`。

但是当我只是使用`tb1.merge(tb2)`and`tb3=tb1`时，它正在查看我： ![B：第 1 部分](../Images/004ce1b2d8d49a09a51282097da42e41.png)

![B：第 2 部分](../Images/8418ccabc821c3287b5799715c71e4a8.png)

请注意， 的所有元素都在`tb1`查看，两个表都合并，但 的元素`tb2`没有查看。

因此，任何关于**Post Objective**的解决方案都将受到高度赞赏。谢谢。-医学博士。萨凡·阿尔维。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:30:18.627

您是否看过使用 linq 进行查询/写入？

请参阅：http: [//msdn.microsoft.com/en-us/library/dd920313%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/dd920313%28v=office.12%29.aspx)

还有很多关于堆栈溢出的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T21:17:31.390

这可能*（不确定，但这是我的第一个猜测）*出现，因为 Datatable.Merge() 方法的默认行为设置为“PreserveChanges”。

[http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx](http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx)

在您的代码中，将“假”开关添加到合并方法中，看看是否有帮助..

```
dt3.Clone(dt1);
dt3.Merge(dt2, false); 
```

如果没有，您能否复制那部分代码作为您问题中的更新，以便我们对编码有更多了解。您不需要复制具有 OleDb 设置的代码部分，因为您的 2 个网格视图正在填充，因此这些数据表将是正确的。

谢谢，

凯文

# css - 保持 div 高度与纵横比相关

> ID：10786876
> 
> 赞同：14
> 
> 时间：2012-05-28T15:14:18.253
> 
> 标签：css, responsive-design

我正在为我们公司的主要网站建立一个移动友好的网站。它的设计方式大约是视网膜的 2 倍。我打算做的是将主要内容设置为最大宽度为 640 像素，宽度设置为 100%。我有一个非常适合的背景图像。但是随着 div 的宽度变小，我也需要调整高度。有任何想法吗？

这是CSS：

```
*{margin:0;padding:0}h1,h2,h3,h4,h5,p,li,a,cite{font-size:14px;font-weight:normal}button,img{border:0}body{font-family:Arial, sans-serif;}

body {
  margin:0;
  background-color:#fff;
}

.top, .body {
  max-width:640px;
  width:100%;
  margin:0 auto;
}

.top {
  background: white url(images/top.jpg) no-repeat;
  background-size:auto;
  overflow:hidden;
  height:124px;
  max-height:124px;
}

.top ul {
  list-style:none;
  height:100%;
}

.top ul li {
  height:100%;
  float:left;
  display:block;
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-13T14:48:04.387

我确实找到了答案。它添加了一些无语义的标记，但效果很好。可以在这里找到它：http: [//jsfiddle.net/AdQ3P/](http://jsfiddle.net/AdQ3P/)

逻辑在填充底部。基本上这需要是 (img_height / img_width) * 100。

**编辑**这是代码，所以不依赖于 jsfiddle。

```
<div class="container">
  <div class="hero"></div>
</div>

.container {
  width:100%;
  max-width:500px;
}

.hero {
  width:100%;
  height:0;
  background-size:100%;
  background:url(http://img97.imageshack.us/img97/3410/photo2ue.jpg) no-repeat;
  padding-bottom:75%;
} 
```

那也是我的一张凌乱的桌子，哈哈。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T00:28:01.890

你也可以使用一点 jQuery。我相信它的优点是它是一个语义上有效的修复，所以下一个编辑你的代码的人可能更容易理解发生了什么。

```
// Maintain aspect ratio of #my_div

// Set aspect ratio of #my_div
var aspect_ratio = 0.8;

// Store the jQuery object for future reference
var $my_div = jQuery("#my_div");

// Within your document ready function,
// Do an initial resize of #my_div
$(document).ready(function(){
  $my_div.height( $my_div.width() * aspect_ratio );
});

// Resize #my_div on browser resize
jQuery(window).resize(function() {
  $my_div.height( $my_div.width() * aspect_ratio );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T15:27:09.807

虽然非固定宽度（例如 100%）占据了容器的所有宽度，但元素的高度在未设置为固定大小时将拉伸以适应任何流入内容（包括填充、边距、边框......）

如果您可以使用`<img>`标签而不是背景图像，则可以将其应用于`max-width:100%`图像本身，它将缩放以适合容器 - 浏览器将调整其高度以保持纵横比一致 - 但是替换 css 背景就语义和/或您可能面临的任何布局问题而言，使用图像标签并不总是可能的或最佳选择。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-23T00:44:23.843

[使用新的相对字体大小单位，例如 vm ( http://www.sitepoint.com/new-css3-relative-font-size/](http://www.sitepoint.com/new-css3-relative-font-size/) ) ，在没有设置高度或 img 的情况下工作得很好。

# asp.net - SVN 成功提交未显示在网站上

> ID：10786879
> 
> 赞同：0
> 
> 时间：2012-05-28T15:14:27.970
> 
> 标签：asp.net, svn, windows-server-2003, visualsvn

**背景**

我在服务器上安装了 VisualSVN。在此之下，我有一个基本存储库（没有分支/主干或标签）。我以最基本的格式使用 svn，因为我是它的唯一开发人员。

该项目本身是一个 IIS ASP.NET 3.5 网站，托管在 d:\website1。我可以访问这个开发网站`http://devserver/`

该存储库可在以下位置访问`http://devserver:8888/`

我使用 Visual Studio 2010/notepad++ 等所做的任何更改都会立即反映在网站上，无论我是否提交了更改。这对我来说效果很好。

**问题**

但是，现在有另一位开发人员需要对网站的某个部分进行更改。

我已经在 VisualSVN 中设置了一个具有读/写功能的用户，并且在那里一切正常，他们可以获取代码、进行更改并提交这些更改。但是，即使它们同时显示在存储库和文件系统中，它们的更改也不会反映在网站上。

这些更改仅在我进行更新时显示，而不是在其他用户更新时显示。

**SVN n00b**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:19:53.807

您的网站提供来自项目工作副本的文件。所以很明显，如果另一个开发人员在他自己的工作副本中进行了更改，或者甚至提交到 SVN，那么网站只会在您更新工作副本后看到这些更改。

您应该为网站本身创建一个工作副本，其中包含来自 subversion 的最新提交文件，而不是尚未提交的中间更改。

每个开发人员都应该有自己的服务器服务文件，来自他自己的工作副本，以便在提交更改之前测试更改。

# erlang - Erlang：检查进程正在运行哪个调度程序？

> ID：10786888
> 
> 赞同：2
> 
> 时间：2012-05-28T15:14:58.350
> 
> 标签：erlang, profiling

我可以使用 erlang:trace/3 来跟踪进程在任何给定时间运行的调度程序，然后使用时间戳+pid 来获取调度程序 ID，但是有没有更简单/更有效的方法？

也许像 self/0 这样返回调度程序 ID 而不是进程 ID

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T21:04:59.887

您可能正在寻找`erlang:system_info(scheduler_id)`.

# c# - 如何从文件夹安全属性中获取“组或用户名”

> ID：10786890
> 
> 赞同：0
> 
> 时间：2012-05-28T15:15:22.317
> 
> 标签：c#

我有一些问题。我试图在互联网上搜索解决方案，但没有找到它们（它们不起作用）。

问题是...

例如，我有一些文件夹：“directory1”，我必须获取用户名及其关于该文件夹的权限..

我找到了一个截图（不是我的）来证明我的意思：

[链接到图片](http://s019.radikal.ru/i631/1205/1d/5e376f217de2.png)

我怎样才能得到这些用户名等？这很难添加具有权限的新用户名吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T16:29:14.320

这个 SO question 有一个示例，其中包含您需要用于获取所需信息的类型：[Duplicate GetAccessRules, FileSystemAccessRule entries](https://stackoverflow.com/questions/3507862/duplicate-getaccessrules-filesystemaccessrule-entries)。

您还可以使用相同的基础类修改文件夹的权限。

# android - Android - 谷歌地图，十字准线的最终覆盖

> ID：10786893
> 
> 赞同：0
> 
> 时间：2012-05-28T15:15:31.190
> 
> 标签：android, google-maps

我想知道是否有机会`Overlay`在谷歌地图中设置决赛。我想这样设置我的十字准线，这样它在缩放时就不会移动。

代码：

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.map_view);
            initData();

            mapView = (MapView) findViewById(R.id.mapView);

            mapView.setSatellite(true);
            mapView.setTraffic(true); 
            mapView.setBuiltInZoomControls(true);

            controller = mapView.getController();
            controller.animateTo(coordinate);
            controller.setZoom(18);

    // TODO:
            CrossHairsOverlay chOverlay = new CrossHairsOverlay();

    // Pin
            MapOverlay mapOverlay = new MapOverlay();
            mapOverlay.setPointToDraw(coordinate);

            List<Overlay> listOfOverlays = mapView.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);
            listOfOverlays.add(chOverlay);
        } 
```

十字线：

```
 public class CrossHairsOverlay extends Overlay {

        public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
            super.draw(canvas, mapView, shadow);
            Projection projection = mapView.getProjection();
            Point centerPoint = projection.toPixels(mapView.getMapCenter(), null);

            Bitmap crossHairs = BitmapFactory.decodeResource(getResources(), R.drawable.cross_hair);
            canvas.drawBitmap(crossHairs, centerPoint.x - (int)(27 * dpi + 0.5f), centerPoint.y - (int)(27 * dpi + 0.5f), new Paint());
            return true;
        }
    } 
```

如果我以这种方式使用它，它会在缩放完成后重新定位。左/右拖动正确。我真的不想设置“ZoomListener”并一直重绘。我希望有一个更好的解决方案来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:46:08.520

请原谅我没有完全理解你的问题......

但是，要绘制一个简单的点，无需使用投影，只需将位图严格绘制到地图视图的中心即可。

IE...

> // 也使协调常数。
> 
> canvas.drawBitam(位图, center.x-(imageWidth/2), center.y-(imageHeight/2),new Paint());

其中 center.x 和 center.y 正好等于

> 点中心 = new Point(canvas.getWidth()/2,canvas.getHeight()/2);

也不要在每个 onDraw 上重新加载您的位图！，内存泄漏 ftl ;)。

# spring - @ExceptionHandler 未被调用

> ID：10786895
> 
> 赞同：3
> 
> 时间：2012-05-28T15:15:45.700
> 
> 标签：spring, exception-handling

经过一段时间的研究和尝试不同的事情后，我仍然无法在我的 jUnit 集成测试中调用我的 @ExceptionHandler。请帮我理解为什么？

```
@RequestMapping(value = "/someURL", method = RequestMethod.POST)
public ModelAndView batchUpload(@RequestBody final String xml, @RequestParam boolean replaceAll)
    throws IOException, URISyntaxException, SAXException, ParserConfigurationException, InvocationTargetException, IllegalAccessException, UnmarshallingFailureException
{
StreamSource source = new StreamSource(new StringReader(xml));
DomainClass xmlDomainClass;

try
{
    xmlDomainClass = (DomainClass) castorMarshaller.unmarshal(source);
}
catch (UnmarshallingFailureException me)
{
    // some logging. this gets executed
    throw me;
} 
```

.

```
@ExceptionHandler(Throwable.class)
public ModelAndView handleUnmarshallingExceptions(Throwable th)
{
// never executes anything in here
return new ModelAndView( /*some parameters */ );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T05:44:43.413

[Spring：RESTful 控制器和错误处理](http://blog.cuttleworks.com/2011/12/spring-restful-controllers-and-error-handling/)帮助了我，我的问题是缺少这个：

```
@Component
public class AnnotatedExceptionResolver extends AnnotationMethodHandlerExceptionResolver{
  public AnnotatedExceptionResolver() {
    setOrder(HIGHEST_PRECEDENCE);
  }
} 
```

# php - 引用 Wordpress 代码片段的最快方法

> ID：10786897
> 
> 赞同：1
> 
> 时间：2012-05-28T15:15:53.933
> 
> 标签：php, wordpress, function

这个问题是关于整理代码和更好地管理所述代码，但是当涉及到 PHP 时，我是一个完全的新手，所以希望能得到一点帮助。

我有这个代码：

```
<?php
            $thumb_id = get_post_thumbnail_id(get_the_ID()); // gets the post thumbnail ID

            $args = array(
                'order' => 'ASC',
                'orderby' => 'rand',
                'post_type' => 'attachment',
                'post_parent' => $post->ID,
                'post_mime_type' => 'image',
                'post_status' => null,
                'numberposts' => 1,
                'exclude' => $thumb_id
            );

            $attachments = get_posts($args);
            if ($attachments) {
                foreach ($attachments as $attachment) {
                    echo wp_get_attachment_image($attachment->ID, 'full', false);
                }
            }
        ?> 
```

它的作用对于参考并不重要，上面的代码从 Wordpress 帖子中获取随机图像，在 DIV 中随机生成其中一个。我希望在许多模板中使用此功能，但我不想用它来填充我的 PHP 文件，因为我的文件会变得凌乱且效率低下。

2个问题。

1.  我是否需要更改上面的代码才能将其放入functions.php 中？
2.  如何使用可以在许多不同模板中重复使用的短衬线来引用上述代码（将在我的 functions.php 中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:40:51.043

您可能想尝试将代码片段放入函数 inside `functions.php`，并传递一些参数，从而使使用更加灵活。

未经测试，但这需要一组选项，并覆盖默认值（例如，根据每次使用更改`order`or`orderby`等​​）。作为可选参数，您可以传递 a `post_id`，以防您要查询*不是*当前帖子的帖子。

它也是`returns`一个数组，而不是直接输出它们，这可以看作是使用函数的首选方式。

```
// functions.php

function get_random_post_image($options=array(), $post_id=NULL) {
    if($post_id != NULL) :
        $thumb_id = get_post_thumbnail_id($post_id); 
    else :
        $thumb_id = get_post_thumbnail_id(get_the_ID());        
    endif;

    $default_args = array(
           'order' => 'ASC',
           'orderby' => 'rand',
           'post_type' => 'attachment',
           'post_parent' => $post->ID,
           'post_mime_type' => 'image',
           'post_status' => null,
           'numberposts' => 1,
           'exclude' => $thumb_id
         );

    // merge custom options
    $args = array_merge($default_args, $options);

    $attachments = get_posts($args);
            if ($attachments) {
                $images = array();
                foreach ($attachments as $attachment) {
                    $images[] = wp_get_attachment_image($attachment->ID, 'full', false);
                }
                return $images;
            }
            return false; // or, return default image/placeholder
}

// and within your template/posts:
if(function_exists('get_random_post_image')) :
    $images = get_random_post_image(array('order'=>'DESC')); // overwrite `ASC`
    if($images) :
        foreach($images as $img) {
            echo '<div class="post-img"> ' . $img . '</div>';
        }
    else :
       echo 'No images!';
    endif;
endif; 
```

不完美; 但你可以很容易地扩展它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:19:26.130

**1.如果您已经将代码放入这些标签中`<?php`，则需要退出`?>`**

示例函数.php：

```
<?php
    blah blah
    ....

    // your code here

        $thumb_id = get_post_thumbnail_id(get_the_ID()); // gets the post thumbnail ID

        $args = array(
            'order' => 'ASC',
            'orderby' => 'rand',
            'post_type' => 'attachment',
            'post_parent' => $post->ID,
            'post_mime_type' => 'image',
            'post_status' => null,
            'numberposts' => 1,
            'exclude' => $thumb_id
        );

        $attachments = get_posts($args);
        if ($attachments) {
            foreach ($attachments as $attachment) {
                echo wp_get_attachment_image($attachment->ID, 'full', false);
            }
        }
// be careful, only one "?>" in the file, no nested "<?php ?>" blocks

?> 
```

**2\. 使用[include()](http://php.net/manual/en/function.include.php)、 include_once() 、 require() 或 require_once()**并将您的函数保存在另一个文件中，以便您可以引用该文件。

random_img.php

```
<?php
        $thumb_id = get_post_thumbnail_id(get_the_ID()); // gets the post thumbnail ID

        $args = array(
            'order' => 'ASC',
            'orderby' => 'rand',
            'post_type' => 'attachment',
            'post_parent' => $post->ID,
            'post_mime_type' => 'image',
            'post_status' => null,
            'numberposts' => 1,
            'exclude' => $thumb_id
        );

        $attachments = get_posts($args);
        if ($attachments) {
            foreach ($attachments as $attachment) {
                echo wp_get_attachment_image($attachment->ID, 'full', false);
            }
        }
?> 
```

函数.php

```
<?php
    blah blah
    .... 

    include ("random_img.php")
?> 
```

# wpf - WPF MVVM 和依赖注入

> ID：10786902
> 
> 赞同：1
> 
> 时间：2012-05-28T15:16:07.423
> 
> 标签：wpf, castle-windsor

我正在使用 MVVM 和 Castle Windsor 开始我的第一个 WPF 项目。我遵循将视图模型注入其视图的构造函数的相当标准的方法，然后将其 DataContext 设置为视图模型。我不清楚的是如何/在哪里执行我想在窗口加载后立即发生的任何 UI“初始化”（在我的情况下，我想实例化一些用户控件“小部件”并将它们放在窗口的画布）。

大概我不能在窗口视图模型的构造函数中执行此操作，因为它会在视图的 InitialiseComponent 被调用之前被调用。此外，我什至如何从不了解视图的视图模型中引用画布？

作为尝试解决此问题的一部分，我创建了一个“DesktopManager”组件，负责将用户控件添加到画布，但我得到了循环引用：-

*   视图显然依赖于视图模型
*   DesktopManager 依赖于视图（它需要访问 Canvas），
*   视图模型依赖于 DesktopManager（因此它可以告诉 DesktopManager 创建小部件）。

不过，DesktopManager 仍然对我没有帮助 - 回到我之前的问题，我不知道如何/在哪里调用它来创建小部件。我显然是以错误的方式解决所有这些问题，也许回答我之前的问题也可以解决这个问题！

任何建议表示赞赏。

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:43:45.460

如果您正在寻找一种在视图加载后在视图模型中执行代码的方法，我建议您将视图的 Loaded 事件绑定到视图模型中的命令。

在这里寻找一种将事件绑定到命令的方法： [http ://www.danharman.net/2011/08/05/binding-wpf-events-to-mvvm-viewmodel-commands/](http://www.danharman.net/2011/08/05/binding-wpf-events-to-mvvm-viewmodel-commands/)

# c++ - 使用通用 ADT

> ID：10786904
> 
> 赞同：0
> 
> 时间：2012-05-28T15:16:27.197
> 
> 标签：c++, generics, adt

我有一个设计问题。我被要求为某个问题计划一个设计，我需要一些列表，还有一个队列（我需要自己创建，不允许使用 STL）。为了使实现更高效，我考虑创建一个通用列表，如下所示： 创建一个节点，其中包含一个指向“数据”的指针，一个空类。然后，任何我想创建一个列表或队列的类（最后一句话在语法上是否正确？），我只会让它成为数据的子类。这是制作通用列表的唯一方法（我认为），因为我们不允许使用 void*。当我想在某个列表中使用某个类的某个方法时，问题就开始了。我不能这样做，因为“数据”不知道该功能。在 Data 中创建一个虚函数是反逻辑和丑陋的，我们' re 也不允许使用任何向下转换。有没有办法使用通用 ADT 来解决这个问题？还是我必须创建特定列表？非常感谢！编辑：我们也不允许使用模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:26:30.610

About the list and the queue, maybe you can adopt the same approach taken by the STL: just create the list, and then stack, as an adaptor of the list in which you only push and pop from the end.

About those contraints, which seems to be draconian, don't I suppose that the objective is for you to use templates?

Instead of creating and empty class, which if does not contain any method does not serve you at all, use a template as in the following example:

```
template<typename T>
class List {

    class Node {
    public:
        Node(T* d)
            { data.reset( new Data( d ) ); }
        T * getData()
            { return data; }
        Node * getSig()
            { return sig; }
    private:
        std::auto_ptr<T> data;
        Node * sig;
    };

    List()...
// Lots of more things...
}; 
```

You can find more info here:

[http://www.cplusplus.com/doc/tutorial/templates/](http://www.cplusplus.com/doc/tutorial/templates/)

Hope this helps.

# javascript - 如何编写一个改变参数数量的js函数

> ID：10786905
> 
> 赞同：0
> 
> 时间：2012-05-28T15:16:33.307
> 
> 标签：javascript, html, class

> **可能重复：**
> [JavaScript 可变参数数量的函数](https://stackoverflow.com/questions/2141520/javascript-variable-number-of-arguments-to-function)
> [JS：函数参数默认值](https://stackoverflow.com/questions/4771330/js-functions-arguments-default-values)

我想编写这种接受各种数量参数的函数，如下所示：

```
PopupBox.init() //Creating a pop up box with a default height and width of 100px
PopupBox.init(50px) //Creating a popup with height and width of 50px
PopupBox.init(50px,100px) //Creating a popup with the height 50px and width 100px 
```

我的问题是如何编写函数本身？我会尝试这样的事情，但我认为它不会工作。如何正确编写它以便函数可以接收多个参数？

```
var PopupBox = {
    init :function (width,height) {
        if (height == null) {
           height=100px;
        }
        if (width == null) {
           height=100px;
        }
    }
} 
```

# ios - 同一网络中的 iOS 设备之间的实时语音聊天

> ID：10786917
> 
> 赞同：8
> 
> 时间：2012-05-28T15:17:16.347
> 
> 标签：ios, networking, chat, real-time, voice

我正在使用需要在同一网络中的两个 iOS 设备之间实现简单语音功能的应用程序。

我的疑问是如何从主设备获取音频单元并通过 wifi 或蓝牙网络直接实时发送到从设备。

我做过一些关于网络通信的事情，我可以使用 TCP 在设备之间传输任何 NSData。

不使用 GK 框架很重要，因为我需要连接两个客户端而不需要任何通知。比如我用GK连接两台设备，iOS显示一个连接请求的alert，我需要避免这个连接请求。

目前我可以用视频做到这一点，比音频更简单。欢迎任何有关此实施的想法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T21:23:57.403

首先，您需要学习如何使用[Audio Queue Services](https://developer.apple.com/library/IOS/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html)来捕获音频。

然后通过wifi和蓝牙传输音频数据并在另一端播放。

对您来说最明显的选择是使用[bonjour](https://developer.apple.com/bonjour/)。

GameKit 框架建立在此之上。不过，您不必在此之上为您的应用程序构建太多。您的应用程序是 bonjour 的直接应用程序。

如有需要，请参考[聊天](http://www.mobileorchard.com/wp-content/uploads/2009/05/chatty.zip)代码。如果您需要一些背景理论，请参阅[http://mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/](http://mobileorchard.com/tutorial-networking-and-bonjour-on-iphone/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T09:26:15.743

我已将音频队列服务用于同一类型的项目。

对于网络，我使用的是 Bonjour，它确实解决了传输文本和视频的问题。

做了很多变通方法来使用音频队列服务在 wifi 中进行语音聊天，但没有成功。一旦找到除此之外的解决方案，我将更新。

# sql - 在 Nhibernate 中使用子字符串到 SQL

> ID：10786920
> 
> 赞同：1
> 
> 时间：2012-05-28T15:17:37.773
> 
> 标签：sql, nhibernate, linq-to-nhibernate

我正在尝试查找帐户名称的前缀，以便可以在 UI 的过滤器中使用它们。

但是，每当我执行以下 linq 语句时，它总是带回整个帐户名，然后执行子字符串。而不是编写等效的sql。

```
return this.Accounts(user).Select(x => x.Name.Substring(0, 1)).ToList().Distinct(); 
```

this.Accounts 是 IQueryable，因此它不应强制回调数据库。

是否有任何理由将它们全部返回，然后对结果名称进行子串化，或者是否有可行的替代方案？

**编辑**

```
private IQueryable<Account> Accounts(User user)
{
  var accounts = this.SessionManager.GetActiveSession().Query<Account>().Where(x => x.Company.Id == user.Company.Id);
  if (!user.IsAdmin && user.AccountProfiles.Any())
  {
    accounts = accounts.Where(x => x.AssociatedProfiles.Any(y => y.Users.Any(z => z.Id == user.Id)));
  }

  return accounts;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T18:30:51.723

我创建了一个只包含一个属性的简单`Account`类。`string Name`

您的第一个块，对`session.Query<Account>()`SQL 中的结果执行，人们期望：

```
select
    substring(account0_.Name,
    @p0+1,
    @p1) as col_0_0_
from
    Account account0_;
@p0 = 0 [Type: Int32 (0)],
@p1 = 1 [Type: Int32 (0)] 
```

值得注意的是，这是在通话*后*`Distinct()`留下的。否则，你会得到更好的东西：*`ToList()`*

 *```
select
    distinct substring(account0_.Name,
    @p0+1,
    @p1) as col_0_0_
from
    Account account0_;
@p0 = 0 [Type: Int32 (0)],
@p1 = 1 [Type: Int32 (0)] 
```

我的建议是您将`Accounts(User)`方法简化为单个语句：

```
return SessionManager.GetActiveSession().Query<Account>(); 
```

...并开始添加其余部分，直到它失败。

旁注：所有测试均使用最新的 NHibernate 稳定版本（截至目前为 3.3.0）完成*

# sql - 通过 sql 对不在投影中的字段进行排序

> ID：10786921
> 
> 赞同：2
> 
> 时间：2012-05-28T15:17:41.110
> 
> 标签：sql, database

是否可以在不在投影本身中的字段上对 SQL 查询的结果进行排序？

请参见下面的示例 - 我正在使用产品表的不同 ID，但我希望它按标题排序。我不想包含标题，因为我正在使用 NHibernate 生成查询，并对结果进行分页。然后我使用这个不同的 ID 结果集来加载实际结果。

```
SELECT
DISTINCT this_.`ID` AS y0 
FROM
`Product` this_ 
LEFT OUTER JOIN
`Brand` brand3_ 
ON this_.BrandId=brand3_.ID 
INNER JOIN
`Product_CultureInfo` productcul2_ 
ON this_.ID=productcul2_.ProductID 
AND (
(
(
productcul2_.`Deleted` = 0 
OR productcul2_.`Deleted` IS NULL
) 
AND (
productcul2_.`_Temporary_Flag` = 0 
OR productcul2_.`_Temporary_Flag` IS NULL
)
)
) 
INNER JOIN
`ProductCategory` aliasprodu1_ 
ON this_.ID=aliasprodu1_.ProductID 
AND (
(
(
aliasprodu1_.`Deleted` = 0 
OR aliasprodu1_.`Deleted` IS NULL
) 
AND (
aliasprodu1_.`_Temporary_Flag` = 0 
OR aliasprodu1_.`_Temporary_Flag` IS NULL
)
)
) 
WHERE
(
this_._Temporary_Flag =FALSE
OR this_._Temporary_Flag IS NULL
) 
AND this_.Published = TRUE
AND (
this_.Deleted = FALSE
OR this_.Deleted IS NULL
) 
AND (
this_._ComputedDeletedValue = FALSE
OR this_._ComputedDeletedValue IS NULL
) 
AND (
(
this_._TestItemSessionGuid IS NULL 
OR this_._TestItemSessionGuid = ''
)
) 
AND (
productcul2_._ActualTitle LIKE '%silver%' 
OR brand3_.Title LIKE '%silver%' 
OR aliasprodu1_.CategoryId IN (
47906817 , 47906818 , 47906819 , 47906816 , 7012353 , 44662785 
)
) 
AND this_.Published = TRUE
AND this_.Published = TRUE
ORDER BY
this_.Priority ASC,
productcul2_._ActualTitle ASC,
this_.Priority ASC LIMIT 25; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:21:52.760

不知道是否有更好的解决方案，但是如果外部查询排除您不感兴趣的字段的嵌套选择呢？

所以，在“随机”桌子上的东西

```
SELECT a,b,c from (SELECT a,b,c,d from myTable order by d) 
```

显然，如果有一个“语言直接”的解决方案会更好，因为那样的话，你必须做两个投影，其中一个是没用的

# image - Facebook 推荐按钮显示错误图像

> ID：10786924
> 
> 赞同：0
> 
> 时间：2012-05-28T15:17:47.443
> 
> 标签：image, facebook, facebook-like

我已经搜索了该网站，但找不到答案。我的问题是，在我按下“推荐”按钮后，Facebook 显示了错误的图像（它与“喜欢”按钮相同，但文字不同）。

网页在这里：[http](http://www.bamarang.in/perfume-tree/) ://www.bamarang.in/perfume-tree/ facebook 调试器在这里： http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A% 2F%2Fwww.bamarang.in%2F香水树%2F%3Ffb%3Dfgfgfg](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.bamarang.in%2Fperfume-tree%2F%3Ffb%3Dfgfgfg)

该网站需要一封电子邮件，但您可以使用伪造的电子邮件进入，因为没有确认。

如您所见，一切似乎都是正确的，但显示的是错误的图像。我已经尝试清除浏览器和 Facebook 上的缓存（最后一个通过在开发人员工具中编写网页 url）但无济于事。

您还可以查看网页的来源，以检查所有 OG 标签是否存在且正确。

我还能错过什么？请帮忙。

查看此处显示的错误图像：[www.crosstastemovies.com/temp/fb_error1.jpg](http://www.crosstastemovies.com/temp/fb_error1.jpg)此处查看显示正确图像 的 FB**刮板：** [www.crosstastemovies.com/temp/fb_error2.jpg](http://www.crosstastemovies.com/temp/fb_error2.jpg)

我已更新问题以添加屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:32:21.290

您为您的站点提供的链接是：`http://www.bamarang.in/perfume-tree/`但与调试器的链接是：`http://www.bamarang.in/perfume-tree/?fb=fgfgfg`。
如您所见，这两个网址并不相同。

我卷曲了两个 url，第一个返回重定向到`https://www.bamarang.in/customer/account/create/`并且当卷曲输出中没有 og 标记时（在[调试器](http://developers.facebook.com/tools/debug/og/object?q=https://www.bamarang.in/customer/account/create/)中检查自己）。

第二个 url（带有 ?fb=...）确实有 og 标签。
您在推荐按钮中使用的网址是什么？

即使`fb`参数不存在，您也应该只输出 og 标签，不要忘记人们可以将 url 复制/粘贴到他们在 fb 上的状态中，您无法控制人们如何分享。

# mysql - 如何将sql查询字符串存储在mysql表的字段中

> ID：10786926
> 
> 赞同：2
> 
> 时间：2012-05-28T15:17:51.027
> 
> 标签：mysql

我正在创建一个记录影响数据库的操作的日志表，并将 sql 语句存储在一个名为 details 的字段中。

下面是一个示例查询，我尝试在日志表中插入一行，但在详细信息部分遇到问题，因为我将查询插入到字段中，mysql 将其解释为实际查询和错误的一部分

```
INSERT INTO `user_log` SET `log_dts`='2012-05-28 15:07:19', `user_id`='4', `details`='UPDATE `property` SET `timedeleted` = '2012-05-28 15:07:19' WHERE `propertyid` IN (1594930)' 
```

最好如何处理？

谢谢。

编辑：添加，详细信息字段是 mysql 数据库中的文本字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:21:04.040

您需要转义字符串中的引号。

见：[http ://dev.mysql.com/doc/refman/5.5/en/string-literals.html](http://dev.mysql.com/doc/refman/5.5/en/string-literals.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:20:53.763

您必须在“'”中添加一个转义字符，只需将查询中所有出现的 ' 替换为 \'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:54:43.707

mysql_real_escape_string-d'uh

# c# - StreamWriter.WriteLine 磁盘 I/O 池是否正在发生？

> ID：10786927
> 
> 赞同：2
> 
> 时间：2012-05-28T15:17:57.720
> 
> 标签：c#, frameworks, pooling

我正在尝试查找.net 框架是否在编写它们之前将 StreamWriter.WriteLine() 池化，或者它是否在它们出现时就这样做了，而我在 MSDN 上找不到答案。例如，如果我有这个简单的代码：

```
StreamWriter sw = [Whatever];
for (int i = 0; i < 100000; i++)
{
    sw.WriteLine(string.Format("Whatever : {0}", i);
} 
```

这会向磁盘写入 100000 次，还是框架会将其中一些合并在一起？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T15:20:22.090

它取决于[`AutoFlush`](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.autoflush.aspx)属性的值，以及可以在构造时指定的缓冲区大小。

# python - Django经理揭示MySQL版本分歧

> ID：10786928
> 
> 赞同：0
> 
> 时间：2012-05-28T15:18:08.473
> 
> 标签：python, mysql, django

我正在尝试让我当前的 Django 与我为它设置的 MySQL 服务器一起工作。我按照 djangobook 中的说明操作并收到此错误：

配置不当：加载 MySQLdb 模块时出错：这是 MySQLdb 版本 (1, 2, 3, 'final', 0)，但 _mysql 是版本 (1, 2, 2, 'final', 0)

我遵循了[这个](https://stackoverflow.com/questions/7137214/django-mysqldb-version-doesnt-match-mysql-version-ubuntu)答案中的解决方案，但又遇到了另一个错误，说找不到 mysql-config。果然，我也找不到。

我认为我拥有的 mysql 版本比 MySQLdb 版本旧，但尝试了几种安装 MySQL 1.2.3 的方法，似乎没有采取任何措施。

我正在使用 Python 2.7 在 Linux Mint 10 上运行。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:17:46.543

问题可能是我的 Mint 安装错误，在擦除我的计算机并安装 Mint Debian 后，问题不再存在。也可能是我在计算机上安装 mysql 的尝试太多，但我相当确信主要问题是我的安装程序和更新程序已损坏。

# c# - 我怎样才能让 NHibernate 给我它会为插入/更新而不是执行它生成的 SQL？

> ID：10786934
> 
> 赞同：2
> 
> 时间：2012-05-28T15:18:49.117
> 
> 标签：c#, nhibernate, fluent-nhibernate

我正在使用 NHibernate 将一些非常简单的实体映射到三个表。

我的程序需要有一种模式，它输出将执行以插入或更新这些表的 SQL，以便可以将 SQL 保存到脚本文件中，以便以后手动执行。

这类似于这个问题（有一个非常好的答案）：[我怎样才能让 NHibernate 只生成 SQL 而不执行它？](https://stackoverflow.com/questions/10704462/how-can-i-have-nhibernate-only-generate-the-sql-without-executing-it)

只有那个问题是关于 SELECT 的，除了 INSERT / UPDATE，我需要同样的问题。这也需要是动态的，因为它取决于用户选项。我的意思是，当我的程序执行时：

```
 session.Save(entity); 
```

有时我需要它来访问数据库，有时我需要它来输出它将执行的 SQL。

这是可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-01T20:57:22.863

这是不可能的，因为这是拥有像 NHibernate 这样的 ORM 的主要目的，但如果您想检查 Nhibernate 生成的查询，那么出于测试目的，请在 app.config 中使用此记录器，

```
<logger name="NHibernate.SQL">
  <level value="ALL" />
  <appender-ref ref="NHibernateRollingLogFileAppender" />
</logger> 
```

然后，当您启动项目时，它应该生成 logfile_nhibernate.txt，您将看到所有生成的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:02:43.050

不幸的是，这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-08T23:38:20.430

如果您想很难做到这一点，请查看下面的代码。

```
public IDbCommand CreateInsertCommand(object entity)
{
    var entityTuplizer = GetTuplizer(_sessionMetadata.SessionImplementor);
    var values = entityTuplizer.GetPropertyValuesToInsert(entity, new Dictionary<object, object>(), _sessionMetadata.SessionImplementor);

    var notNull = GetPropertiesToInsert(values);
    var sql = GenerateInsertString(true, notNull);
    var insertCommand = _sessionMetadata.Batcher.Generate(sql.CommandType, sql.Text, sql.ParameterTypes);

    Dehydrate(null, values, notNull, _propertyColumnInsertable, 0, insertCommand, _sessionMetadata.SessionImplementor);
    InfraUtil.FixupGuessedType(insertCommand);

    return insertCommand;
} 
```

更多代码可指导您找到可行的解决方案

```
public class SessionMetadata
{
    private static readonly Type KeyType = typeof(ActiveRecordBase);

    private ISessionFactoryHolder _sessionFactoryHolder;
    private ISessionFactory _sessionFactory;
    private ISessionFactoryImplementor _sessionFactoryImplementor;
    private Configuration _configuration;
    private ISession _currentSession;
    private ISessionImplementor _sessionImplementor;
    private DriverBase _driver;
    private NonBatchingBatcher _batcher;
    private IMapping _mapping;

    public ISessionFactoryHolder SessionFactoryHolder
    {
        get { return _sessionFactoryHolder ?? (_sessionFactoryHolder = ActiveRecordMediator.GetSessionFactoryHolder()); }
    }

    public ISessionFactory SessionFactory
    {
        get { return _sessionFactory ?? (_sessionFactory = SessionFactoryHolder.GetSessionFactory(KeyType)); }
    }

    public ISessionFactoryImplementor SessionFactoryImplementor
    {
        get { return _sessionFactoryImplementor ?? (_sessionFactoryImplementor = (ISessionFactoryImplementor)SessionFactory); }
    }

    public DriverBase Driver
    {
        get { return _driver ?? (_driver = (DriverBase)SessionFactoryImplementor.ConnectionProvider.Driver); }
    }

    public NonBatchingBatcher Batcher
    {
        get { return _batcher ?? (_batcher = (NonBatchingBatcher)SessionImplementor.Batcher); }
    }

    public Configuration Configuration
    {
        get { return _configuration ?? (_configuration = SessionFactoryHolder.GetConfiguration(KeyType)); }
    }

    public ISession CurrentSession
    {
        get { return _currentSession ?? (_currentSession = SessionScope.Current.GetSession(SessionFactory)); }
    }

    public ISessionImplementor SessionImplementor
    {
        get { return _sessionImplementor ?? (_sessionImplementor = CurrentSession.GetSessionImplementation()); }
    }

    public IMapping Mapping
    {
        get { return _mapping ?? (_mapping = SessionFactoryImplementor); }
    }
}

public class EntityMetadata
{
    private readonly SessionMetadata _sessionMetadata;
    private readonly Type _entityType;
    private PersistentClass _persistentClass;
    private IEntityPersister _entityPersister;

    public EntityMetadata(Type entityType, SessionMetadata sessionMetadata)
    {
        _sessionMetadata = sessionMetadata;
        _entityType = entityType;
    }

    public SessionMetadata SessionMetadata
    {
        get { return _sessionMetadata; }
    }

    public PersistentClass PersistentClass
    {
        get { return _persistentClass ?? (_persistentClass = SessionMetadata.Configuration.GetClassMapping(_entityType)); }
    }

    public IEntityPersister EntityPersister
    {
        get { return _entityPersister ?? (_entityPersister = SessionMetadata.SessionFactoryImplementor.GetEntityPersister(PersistentClass.EntityName)); }
    }
}

public class ExtractSql: SingleTableEntityPersister
{
    private readonly SessionMetadata _sessionMetadata;
    private readonly EntityMetadata _entityMetadata;
    private readonly IEntityPersister _entityPersister;
    private readonly bool[][] _propertyColumnInsertable;
    private readonly bool[][] _propertyColumnUpdateable;

    public ExtractSql(EntityMetadata entityMetadata)
        : base(entityMetadata.PersistentClass, null, entityMetadata.SessionMetadata.SessionFactoryImplementor, entityMetadata.SessionMetadata.Mapping)
    {
        if (entityMetadata == null) throw new ArgumentNullException("entityMetadata");
        _sessionMetadata = entityMetadata.SessionMetadata;
        _entityMetadata = entityMetadata;

        _entityPersister = _entityMetadata.EntityPersister;

        var hydrateSpan = _entityPersister.EntityMetamodel.PropertySpan;
        _propertyColumnUpdateable = new bool[hydrateSpan][];
        _propertyColumnInsertable = new bool[hydrateSpan][];

        var i = 0;
        foreach (var prop in _entityMetadata.PersistentClass.PropertyClosureIterator)
        {
            _propertyColumnInsertable[i] = prop.Value.ColumnInsertability;
            _propertyColumnUpdateable[i] = prop.Value.ColumnUpdateability;

            i++;
        }
    }

    protected override bool UseDynamicUpdate
    {
        get { return true; }
    }

    protected override bool UseDynamicInsert
    {
        get { return true; }
    }

    public IDbCommand CreateInsertCommand(object entity)
    {
        var entityTuplizer = GetTuplizer(_sessionMetadata.SessionImplementor);
        var values = entityTuplizer.GetPropertyValuesToInsert(entity, new Dictionary<object, object>(), _sessionMetadata.SessionImplementor);

        var notNull = GetPropertiesToInsert(values);
        var sql = GenerateInsertString(true, notNull);
        var insertCommand = _sessionMetadata.Batcher.Generate(sql.CommandType, sql.Text, sql.ParameterTypes);

        Dehydrate(null, values, notNull, _propertyColumnInsertable, 0, insertCommand, _sessionMetadata.SessionImplementor);
        InfraUtil.FixupGuessedType(insertCommand);

        return insertCommand;
    }
} 
```

# r - 如何跳转到下一个顶级循环？

> ID：10786940
> 
> 赞同：16
> 
> 时间：2012-05-28T15:19:25.367
> 
> 标签：r, loops, nested-loops

我有一个`for`嵌套在另一个循环中的`for`循环。我怎样才能使它在内循环中发生某些事情时，我们退出并跳转到外循环的下一次迭代？

```
uuu <- 0

for (i in 1:100) {
    uuu <- uuu + 1
    j <- 1000
    for (eee in 1:30) {
        j <- j - 1
        if (j < 990) {
            # if j is smaller than 990 I hope start next time of i
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-28T19:20:30.543

@flodel 对此有正确的答案，即使用`break`而不是`next`. 不幸的是，无论使用哪种控制流构造，该答案中的示例都会给出相同的结果。

我添加以下示例只是为了说明这两个构造的行为有何不同。

```
## Using `break`
for (i in 1:3) {
   for (j in 3:1) {     ## j is iterated in descending order
      if ((i+j) > 4) {
         break          ## << Only line that differs
      } else {
         cat(sprintf("i=%d, j=%d\n", i, j))
      }}}
# i=1, j=3
# i=1, j=2
# i=1, j=1

## Using `next`
for (i in 1:3) {
   for (j in 3:1) {     ## j is iterated in descending order
      if ((i+j) > 4) {
         next           ## << Only line that differs
      } else {
         cat(sprintf("i=%d, j=%d\n", i, j))
      }}}
# i=1, j=3
# i=1, j=2
# i=1, j=1
# i=2, j=2   ##  << Here is where the results differ
# i=2, j=1   ##
# i=3, j=1   ## 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-28T18:58:50.720

我认为你想使用`break`所以 R 将停止循环通过你的内`for`循环，因此继续你的外`for`循环的下一次迭代：

```
for (i in 1:10) {
   for (j in 1:10) {
      if ((i+j) > 5) {
         # stop looping over j
         break
      } else {
         # do something
         cat(sprintf("i=%d, j=%d\n", i, j))
      }
   }
}
# i=1, j=1
# i=1, j=2
# i=1, j=3
# i=1, j=4
# i=2, j=1
# i=2, j=2
# i=2, j=3
# i=3, j=1
# i=3, j=2
# i=4, j=1 
```

# javascript - Chrome 扩展程序保存数据

> ID：10786946
> 
> 赞同：7
> 
> 时间：2012-05-28T15:19:36.863
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在开发一个 Chrome 扩展，它需要保存一些信息（主要是标签信息），这些信息将在扩展的整个生命周期中存在（例如，因为用户开始使用它，直到他关闭浏览器）。

一种选择是使用 localstorage，但是 localstorage 只能保存字符串，这让我很不舒服（因为我有一堆数据要保存 - 日期、URL、整数等）。我正在寻找的是使用我自己的 javascript 对象，这些对象将在整个扩展期间存在。
现在的问题是，在某些 javascript 文件中的脚本中定义这些对象会在用户每次单击浏览器操作时删除它们。换句话说，我有一个名为 popup.html 的浏览器操作，其中包含一个 javascript 文件（我想在其中保存我的对象），每次用户单击浏览器操作时，我在 JS 文件中定义的所有对象都会丢失，但是我要坚持一切。

我有什么选项可以保留通过多次点击浏览器操作而不是本地存储的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:30:01.880

你真的应该使用 localStorage（你可以使用 JSON.stringify 和 JSON.parse）。

如果您真的不想使用 localStorage 或服务器端存储，请使用 IndexedDb：[https ://developer.mozilla.org/en/IndexedDB/Using_IndexedDB](https://developer.mozilla.org/en/IndexedDB/Using_IndexedDB)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T11:04:26.687

尝试使用[Filesystem API](http://www.html5rocks.com/en/tutorials/file/filesystem/#toc-support)的持久存储。这比`localStorage`. `localStorage`一旦用户清除缓存、cookie 等，将被清除。文件系统更可靠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-22T01:05:36.097

这个关于使用 chrome.storage 的答案对我来说比其他人好得多。

[https://stackoverflow.com/a/14009240/766115](https://stackoverflow.com/a/14009240/766115)

它类似于 localStorage，但在弹出/背景和内容脚本之间工作。

# opengl - 具有深度立方体贴图的全向阴影映射

> ID：10786951
> 
> 赞同：9
> 
> 时间：2012-05-28T15:20:18.447
> 
> 标签：opengl, glsl, shader, shadow

我正在使用全向点灯。我已经使用立方体贴图纹理作为 6 个帧缓冲区的颜色附件实现了阴影映射，并在每个像素中编码了光到片段的距离。

现在，如果可能的话，我想以这种方式更改我的实现：

*   1）将深度立方体贴图纹理附加到我的帧缓冲区的深度缓冲区，而不是颜色。
*   2) 仅渲染深度，不要在此通道中写入颜色
*   3）在main pass中，从cubemap纹理中读取深度，将其转换为距离，并检查当前片段是否被光遮挡。

将立方体贴图中的深度值转换回距离时出现了我的问题。我使用光到片段向量（在世界空间中）在立方体贴图中获取我的深度值。此时，我不知道使用了六个面中的哪一个，也不知道哪些 2D 纹理坐标与我正在读取的深度值匹配。那么如何将该深度值转换为距离？

以下是我的代码片段来说明：

深度纹理：

```
glGenTextures(1, &TextureHandle);
glBindTexture(GL_TEXTURE_CUBE_MAP, TextureHandle);
for (int i = 0; i < 6; ++i)
    glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, GL_DEPTH_COMPONENT,
              Width, Height, 0, GL_DEPTH_COMPONENT, GL_FLOAT, 0);

glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

帧缓冲结构：

```
for (int i = 0; i < 6; ++i)
{
    glGenFramebuffers(1, &FBO->FrameBufferID);
    glBindFramebuffer(GL_FRAMEBUFFER, FBO->FrameBufferID);
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT,
            GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, TextureHandle, 0);
    glDrawBuffer(GL_NONE);
} 
```

我正在尝试编写的片段着色器以实现我的代码：

```
float ComputeShadowFactor(samplerCubeShadow ShadowCubeMap, vec3 VertToLightWS)
{   
    float ShadowVec = texture(ShadowCubeMap, vec4(VertToLightWS, 1.0));
    ShadowVec = DepthValueToDistance(ShadowVec);
    if (ShadowVec * ShadowVec > dot(VertToLightWS, VertToLightWS))
        return 1.0;

    return 0.0;
} 
```

DepthValueToDistance 函数是我的实际问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-28T19:24:45.630

因此，解决方案是将光到片段向量转换为深度值，而不是将从立方体贴图中读取的深度转换为距离。

这是修改后的着色器代码：

```
float VectorToDepthValue(vec3 Vec)
{
    vec3 AbsVec = abs(Vec);
    float LocalZcomp = max(AbsVec.x, max(AbsVec.y, AbsVec.z));

    const float f = 2048.0;
    const float n = 1.0;
    float NormZComp = (f+n) / (f-n) - (2*f*n)/(f-n)/LocalZcomp;
    return (NormZComp + 1.0) * 0.5;
}

float ComputeShadowFactor(samplerCubeShadow ShadowCubeMap, vec3 VertToLightWS)
{   
    float ShadowVec = texture(ShadowCubeMap, vec4(VertToLightWS, 1.0));
    if (ShadowVec + 0.0001 > VectorToDepthValue(VertToLightWS))
        return 1.0;

    return 0.0;
} 
```

解释`VectorToDepthValue(vec3 Vec)`：

`LocalZComp``Vec`对应于立方体贴图匹配平截头体中给定的 Z 分量。它实际上是最大的组件`Vec`（例如，如果 Vec.y 是最大的组件，我们将查看立方体贴图的 Y+ 或 Y- 面）。

如果您查看这篇[维基百科文章](http://en.wikipedia.org/wiki/Z-buffering#Mathematics)，您将理解之后的数学（我将其保留为正式形式以便理解），它只是将 转换`LocalZComp`为标准化的 Z 值（在 [-1..1] 之间）然后映射它进入 [0..1] 这是深度缓冲区值的实际范围。（假设你没有改变它）。是用于生成立方体贴图的截锥体的近距和远距值`n`。`f`

`ComputeShadowFactor`然后只需将立方体贴图的深度值与从片段到光向量（`VertToLightWS`此处命名）计算的深度值进行比较，还添加一个小的深度偏差（问题中缺少），如果片段不是则返回 1被光线遮挡。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-03T14:09:04.387

我想添加有关推导的更多详细信息。

令**V**为光到片段的方向向量。

正如 Benlitz 已经说过的，可以通过取**V**的分量的绝对值的最大值来计算相应立方体侧视锥体/“眼睛空间”中的**Z值。**

 **```
Z = max(abs(V.x),abs(V.y),abs(V.z)) 
```

然后，准确地说，我们应该否定**Z**，因为在 OpenGL 中，负 Z 轴指向屏幕/视图平截头体。

现在我们想要获得**-Z**的深度缓冲区“兼容”值。

查看OpenGL透视矩阵...

> [http://www.songho.ca/opengl/files/gl_projectionmatrix_eq16.png](http://www.songho.ca/opengl/files/gl_projectionmatrix_eq16.png)
> 
> [http://i.stack.imgur.com/mN7ke.png](http://i.stack.imgur.com/mN7ke.png)（备份链接）

...我们看到，对于任何与该矩阵相乘的齐次向量，得到的 z 值完全独立于向量的 x 和 y 分量。

所以我们可以简单地将这个矩阵与齐次向量 (0,0, **-Z** ,1) 相乘，得到向量（分量）：

```
x = 0
y = 0
z = (-Z * -(f+n) / (f-n)) + (-2*f*n / (f-n))
w = Z 
```

然后我们需要进行透视除法，因此我们将 z 除以 w ( **Z** )，得到：

```
z' = (f+n) / (f-n) - 2*f*n / (Z* (f-n)) 
```

此 z' 在 OpenGL 的标准化设备坐标 (NDC) 范围 [-1,1] 内，需要转换为深度缓冲区兼容范围 [0,1]：

```
z_depth_buffer_compatible = (z' + 1.0) * 0.5 
```

进一步说明：

*   将 (f+n)、(fn) 和 (f*n) 的结果作为着色器统一上传以节省计算可能是有意义的。

*   **V**需要在世界空间中，因为阴影立方体贴图通常在世界空间中轴对齐，因此“ *max(abs(Vx),abs(Vy),abs(Vz))* ”部分仅在**V**是世界空间时有效方向向量。**

# php - 用下拉列表显示一类数据

> ID：10786954
> 
> 赞同：1
> 
> 时间：2012-05-28T15:20:29.803
> 
> 标签：php, mysql, phpmyadmin, drop-down-menu

我有一个数据库，其中有一个名为 products 的表，在表中我有标题、艺术家和其他一些包含每个产品信息的行。我学会了显示数据库中的数据，还找到了一种只显示一个类别的数据的方法。这听起来很容易。但我想将所有这些与一个下拉菜单结合起来，用户可以在其中从列表中选择他想要查看的类别。我怎样才能做到这一点？我认为我必须使用 javascript，但我发现的一些示例根本不涉及 javascript。

这是我显示数据库中所有数据的代码：

```
<?php
$con = mysql_connect("localhost","root","password");
mysql_query('SET NAMES UTF8');
if (!$con)
{
    echo "problem with connection" .mysql_error();
}
?>
<?php
mysql_select_db("myapp",$link);
$result = mysql_query('SELECT * FROM products',$link);
while($row = mysql_fetch_array($result))
{
    $myimage = '<img src="'.$row['image'].'" />';

    echo  "<div id='appear'>" . $myimage . '<br />' . $row['title'] .  "<br   
 />" . "<p style='color:red;' >" . "myprice " . $row['price'] . "€" . "</p>". 
 '<a href="image.php?id='.$row['id'].'">'
    . "details" . "<a>" . "</div>" ;                                       
}
mysql_close($link);

  ?> 
```

这是我只显示一个类别的数据的代码：

```
<?php
mysql_select_db("myapp",$link);
$result = mysql_query('SELECT * FROM products WHERE category="cd"',$link);
while($row = mysql_fetch_array($result))
{
    $mycategory = $row['category'];
    $myimage = '<img src="'.$row['image'].'" />';
    echo  "<div id='appear'>" . $myimage . '<br />' . $row['title'] .  "<br   
/>" . 
    "<p style='color:red;' >" . "price " . $row['price'] . "€" . "</p>". '<a  
href="image.php?id='.$row['id'].'">'
    . "details" . "<a>" . "</div>" ;  
}
mysql_close($link);

?> 
```

这是我非常简单的 html 下拉菜单

```
<select name="singlelist" id="singlelist" size="1" >
<option value="mycd" >CD</option>
<option value="mydvd" >DVD</option>
<option value="other" >other</option>
</select> 
```

我没有提到我想要 2 个下拉列表，用户将在其中选择子类别，但我相信如果我了解所有这些是如何工作的，我将能够使其工作。以前有没有其他人经历过这个？

ps：我使用mysql_*函数是因为它用于学校的一个项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:37:52.777

如果你被允许使用 jquery，这个任务就很简单了。

我会有一个带有显示功能的单独的 php 页面。然后根据选择的类别，执行 onselect() 或 OnChange() 并将 php 页面加载到 div 中。

以下是如何执行此操作的示例：

HTML：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>

<select name="singlelist" id="singlelist" size="1" OnChange=$("#container").load("load.php?do=this.options[this.selectedIndex].value")>
<option value="mycd" >CD</option>
<option value="mydvd" >DVD</option>
<option value="other" >other</option>
</select>

<div id=container></div> 
```

PHP：

```
<?php
mysql_select_db("myapp",$link);
$result = mysql_query('SELECT * FROM products WHERE category="' . $_GET['do'] . '"',$link);
while($row = mysql_fetch_array($result))
{
    $mycategory = $row['category'];
    $myimage = '<img src="'.$row['image'].'" />';
    echo  "<div id='appear'>" . $myimage . '<br />' . $row['title'] .  "<br   
/>" . 
    "<p style='color:red;' >" . "price " . $row['price'] . "€" . "</p>". '<a  
href="image.php?id='.$row['id'].'">'
    . "details" . "<a>" . "</div>" ;  
}
mysql_close($link);

?> 
```

当然，重要的是要注意我没有包括任何预防措施，并且代码本身极易受到 SQL 注入的攻击。您应该确保在将任何输入放入查询之前对其进行清理。

我的 jquery 也有点生疏，所以如果我错过了一些东西，希望其他人可以编辑我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:28:04.943

就像 Jared 说的那样，您可以分离 php 页面并将数据加载到 div 中。您可以使用 javascript 函数触发 php 页面加载到 div 上，也可以使用 onselect() 或 onchange() 触发此函数。

我希望这个示例代码有所帮助。

HTML：

```
<script type="text/javascript">
    function getList(cat, url, containerid){
        var xhr=false;
        if (window.XMLHttpRequest) {
                xhr = new XMLHttpRequest();
            }
            else {
                if (window.ActiveXObject) {
                    try {
                        page_request = new ActiveXObject("Msxml2.XMLHTTP")
                    } 
                    catch (e){
                        try {
                            page_request = new ActiveXObject("Microsoft.XMLHTTP")
                        }
                        catch (e){
                        }
                    }
                }
            }

            if (xhr) {
                var params = "?list="+cat 
                xhr.onreadystatechange = showContents;
                xhr.open("GET", url+params, true);
                xhr.send(null);
            }
            else {
                alert("Sorry, but I couldn't create an XMLHttpRequest");
            }

        function showContents(){
            if (xhr.readyState == 4) {
                if (xhr.status == 200) {
                    var outMsg = xhr.responseText;
                }
                else {
                    var outMsg = "There was a problem with the request " + xhr.status;
                }

                document.getElementById(containerid).innerHTML=xhr.responseText;
            }

        }
    }

</script>

    <select name="singlelist" id="singlelist" size="1" onchange="getList(this.options[this.selectedIndex].value, 'php_file.php', 'container')" >
    <option value="cd" >CD</option>
    <option value="dvd" >DVD</option>
    <option value="other" >other</option>
    </select>
    <div id="container"> </div> 
```

您应该在 getList 函数上传递 3 个参数：首先是类别，然后是 php 文件，最后是 div id。

像这个例子

```
onchange="getList('category', 'php_file', 'div_id')" 
```

PHP：

```
<?php
  if(isset($_GET['list'])){
    mysql_select_db("myapp",$link);
    $result = mysql_query('SELECT * FROM products WHERE category="'.$_GET['list'].'"',$link);
    while($row = mysql_fetch_array($result))
    {
        $mycategory = $row['category'];
        $myimage = '<img src="'.$row['image'].'" />';
        echo  "<div id='appear'>" . $myimage . '<br />' . $row['title'] .  "<br   
    />" . 
        "<p style='color:red;' >" . "price " . $row['price'] . "€" . "</p>". '<a  
    href="image.php?id='.$row['id'].'">'
        . "details" . "<a>" . "</div>" ;  
    }
    mysql_close($link);  
  }
?> 
```

我希望这有帮助。你也可以访问这个博客[http://crisostomozaidem.blogspot.com/](http://crisostomozaidem.blogspot.com/)这里有一些关于 php 的有用提示。

# html - 版权和 HTML 文件

> ID：10786961
> 
> 赞同：0
> 
> 时间：2012-05-28T15:21:03.333
> 
> 标签：html

我想将版权信息放在我的 HTML 页面的源代码中。是否有任何标准化的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:28:13.957

I guess you want to know if there is a standard way to embed your copyright information in HTML for search engines and applications, not just *where* and how write them for your users.

If you're using [HTML5](http://en.wikipedia.org/wiki/HTML5) the answer is **yes** there is a standard way: you can use [microdata](http://en.wikipedia.org/wiki/Microdata_%28HTML%29) to decorate your copyright information and let them be accessible and searchable. For an example take a look at the [AboutPage](http://schema.org/AboutPage) schema on [schema.org](http://schema.org).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:22:41.643

最佳做法是将它们放在页面底部的页脚中，并用`small`标签封装

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:23:08.887

好吧，版权符号 © 是`&copy;`，但除此之外只需写一些东西。通常是符号、年份和名称。

# ios - IOS UITabBarButtons 无图片

> ID：10786964
> 
> 赞同：0
> 
> 时间：2012-05-28T15:21:14.413
> 
> 标签：ios, user-interface, uitabbar

如何制作没有图像的 UITabBar？我只想要文本，以按钮为中心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T18:37:54.603

如果“居中”是指“水平居中”，我会为您的设计使用完全透明的 PNG 图像。

我你的意思也是“垂直居中”，没有办法用 UITabBar 和文本来实现这一点。

也许您可以通过在选项卡中使用空文本来欺骗它，但为您想要的文本创建图像，但文本将呈现为蓝色，并且可能很难看/不符合 Apple 的标准，所以我强烈建议您不要这样做。

# objective-c - 有免费的 iPhone 编译器和模拟器吗？

> ID：10786966
> 
> 赞同：-5
> 
> 时间：2012-05-28T15:21:30.047
> 
> 标签：objective-c, ios, ios-simulator

我正在寻找一个免费的 iPhone 编译器和模拟器来学习 iPhone 编程的基础知识。有吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T15:24:35.617

xcode is free and available on iTunes store, but you need a mac machine and a developer account that may also be a free university account too for students. and if you don't have mac. then use Vmware and install virtual machine with mac iso vmware image.

there are some other ways too like flex which are being used for iPhone but xcode, which uses objective c is the formal by apple and is secure.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T14:18:36.803

不，除了 Xcode 之外没有任何本机 iOS 编译器和仿真器，但是对于 hyperid 应用程序，有 phonegap 和钛。

# php - 从pdf转换图像在php中不起作用

> ID：10786967
> 
> 赞同：1
> 
> 时间：2012-05-28T15:21:40.343
> 
> 标签：php, image-processing, imagemagick, ghostscript

我在我的 C 驱动器中安装了 ghostscript 和 imagemagick，我在 D 驱动器中有我的 wamp 服务器，其中一个文件有代码

```
<?php exec('convert "sd.pdf[0]" -colorspace RGB -geometry 200 "document.png"'); 
?> 
```

文件 sd.pdf 存在于我的程序所在的文件夹中。该程序没有给出错误，但也没有在该文件夹中制作图像。为什么？附加问题：-在 php 中使用 Imagemagick 和 ghostscript 会使程序变慢还是变快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:29:08.183

您需要删除或转义双引号，它在 Windows 上无法正常工作。查看我的 execute() 方法了解更多信息：[https ://github.com/webarto/instagraph/blob/master/instagraph.php#L55](https://github.com/webarto/instagraph/blob/master/instagraph.php#L55)

```
public function execute($command)
{
    # remove newlines and convert single quotes to double to prevent errors
    $command = str_replace(array("\n", "'"), array('', '"'), $command);
    # replace multiple spaces with one
    $command = preg_replace('#(\s){2,}#is', ' ', $command);
    # escape shell metacharacters
    $command = escapeshellcmd($command);
    # execute convert program
    exec($command);
} 
```

与 IM 最大的贡献者之一聊天...

> 没有任何引号， rgb(255, 255, 255) WITH SPACES 会导致问题。同样，如果不引用十六进制值中的#，可能会导致问题。如果在 Windows 上或使用变量，则需要双引号。否则，单引号或双引号都适用于 IM。但是，如果您从 PHP exec 调用 IM 命令，那么如您所知，您需要小心（或转义它们）。

# ios - 用于自动调整 UIView 的圆角

> ID：10786968
> 
> 赞同：5
> 
> 时间：2012-05-28T15:21:41.270
> 
> 标签：ios, uiview, autosize

是否可以制作圆角（**topLeft 和 topRight**）来自动调整uiview？这是我的代码：

*SFDetailViewController.h*

```
@interface SFDetailViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, UITextFieldDelegate, PopoverViewListDelegate>
{
  ...

  UIView *header;
}
@property (nonatomic, retain) IBOutlet UIView *header;

@end 
```

*SFDetailViewController.m*

```
#import "SFDetailViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface SFDetailViewController ()
@end

@implementation SFDetailViewController
@syntesyze header;

-(void) viewDidLoad
{
    ....
    [self setCornerRadiusToHeader:header];
 }

-(void) setCornerRadiusToHeader:(UIView *)headerView
{    
    CGRect bounds = headerView.layer.bounds;
    UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:bounds 
                                               byRoundingCorners:(UIRectCornerTopLeft | UIRectCornerTopRight)
                                                     cornerRadii:CGSizeMake(8.0, 8.0)];

    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.frame = bounds;
    maskLayer.path = maskPath.CGPath;

    [headerView.layer addSublayer:maskLayer];
    headerView.layer.mask = maskLayer; 

} 
```

该视图在 IB 中定义为：

![国际文凭组织](../Images/ae83c9a7d2c4f02ce96e01d8204fb61c.png)

我得到的 - 右上角是直的，因为视图的大小是动态的。

![结果](../Images/a0c70a3f6b2b317ff580dcd0234405b8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:32:07.667

您需要将`UIView`' 的`contentMode`属性设置为`UIViewContentModeRedrew`. 内容模式控制视图的内容在其边界更改时如何更改（例如自动调整大小时）。默认情况下，它只是拉伸视图的内容，这就是你的角被拉伸的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:35:30.450

解决方案：

感谢 jbrennan，我设置了

```
header.contentMode = UIViewContentModeRedraw; 
```

然后，在 viewDidLoad 我调用：

```
[header setNeedsDisplay]; 
```

顺便说一句，调用： `(void)drawRect:(CGRect)rect`我写了以下内容：

```
- (void)drawRect:(CGRect)rect
{ 
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextClearRect(context, rect); 

    UIColor *color = [UIColor lightGrayColor];
    CGContextSetFillColorWithColor(context, color.CGColor);

    CGRect rrect = CGRectMake(CGRectGetMinX(rect)-2, CGRectGetMinY(rect), CGRectGetWidth(rect)+4, CGRectGetHeight(rect) + 1);
    CGFloat radius = 10.0f;

    CGFloat minx = CGRectGetMinX(rrect), midx = CGRectGetMidX(rrect), maxx = CGRectGetMaxX(rrect);
    CGFloat miny = CGRectGetMinY(rrect), midy = CGRectGetMidY(rrect), maxy = CGRectGetMaxY(rrect);

    CGContextMoveToPoint(context, minx, midy);
    CGContextAddArcToPoint(context, minx, miny, midx, miny, radius);
    CGContextAddArcToPoint(context, maxx, miny, maxx, midy, radius);
    CGContextAddArcToPoint(context, maxx, maxy, midx, maxy, 0);
    CGContextAddArcToPoint(context, minx, maxy, minx, midy, 0);
    CGContextClosePath(context);
    CGContextDrawPath(context, kCGPathFill);

} 
```

结果：

![结果](../Images/4bd995028eec323b917202f217828b1b.png)

# sql - 当我知道两个字符串中有重叠时，CharIndex 返回 null

> ID：10786972
> 
> 赞同：0
> 
> 时间：2012-05-28T15:22:02.073
> 
> 标签：sql, sql-server, database, sql-server-2008, insert

我在 table(table1) 中创建了一个新列。我正在尝试用另一个表 table2 中的数据填充它。

Table1 有一个名为“名称”的列。'Name' 包含一个指示列语言的子字符串。我希望将此子字符串与 table2 的“语言”列进行比较，该列包含名称列中的子字符串，并将相应的 LanguageID 插入到我的新列中。

因此，例如：

```
table1
Name
xxXxxxXxxxxxzxzxzxz xxxazxzxxXXXZxxzxzx 2183909213 ENG-UK nfjksdnfnd 723984782347 
```

和表2：

```
table2
    Language | ID 
    ENG-uk   | 1 
```

在 table1 名称列中，Language 前后的字符串可以采用任何形式，字符数不等。语言前后总是有一个空格。

所以，我想结束：

```
table1
Name  | LanguageID
xx... | 1 
```

我有这个我认为应该有效的查询：

```
INSERT INTO table1 (LanguageID) 
SELECT t2.ID FROM table2 t2, table1 t1 WHERE CHARINDEX(LOWER(t2.Language), LOWER(t1.Name)) != null 
```

问题是，当我运行这个......“（0行受影响）”时，情况并非如此。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:39:26.127

您根本没有得到任何匹配的原因是您不能使用`!=`运算符来比较空值，您必须使用`is not null`它。

但是，这会给你一个非常大的结果，因为 from 的返回值`charindex`永远不会为空。当找不到字符串时，它返回零，所以这就是你应该比较的。

此外，您不能插入列，您必须先将列添加到表中，然后更新记录：

```
update t1
set LanguageID = t2.ID 
from table1 t1
inner join table2 t2 on charindex(lower(t2.Language), lower(t1.Name)) != 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T15:40:11.550

1、搜索字符串不存在时`CHARINDEX`返回。`0`不行`null`。请参阅[http://msdn.microsoft.com/en-us/library/ms186323.aspx](http://msdn.microsoft.com/en-us/library/ms186323.aspx)

第二，我认为你应该`UPDATE`，不应该`INSERT`。

示例（如果 t2.Language 不是 UNIQUE，这将无法正常工作）：

```
UPDATE table1 t1
SET t1.LanguageID = (SELECT t2.ID from table2 t2 where CHARINDEX(LOWER(t1.Name), LOWER(t2.Language))>0)
where exists (SELECT t2.ID from table2 t2 where CHARINDEX(LOWER(t1.Name), LOWER(t2.Language))>0) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-28T15:35:35.667

您应该考虑为第一个表信息添加单独的列。否则，您将`Performance Issues`因`SubString`手术而结束。

从第一个表中可以清楚地看出，表架构不是`Normalized`. 此外，第一个表模式不适合任何搜索/排序操作。

# php - 如何以正确的顺序列出父类和子类数据

> ID：10786973
> 
> 赞同：1
> 
> 时间：2012-05-28T15:22:11.893
> 
> 标签：php, mysql

```
table : category  
    | id + category_name + parent_category_id |
    | 1  | Flower        |          0         |
    | 2  | Wall Decor    |          0         |
    | 3  | Stylish Living|          0         |
    | 4  | Mug           |          0         |
    | 5  | Sun Flower    |          1         |
    | 6  | Balsam        |          1         | 
```

我尝试先列出具有排序顺序父类别的数据，然后再列出子类别。

```
Flower
flower > Sun Flower
flower > Balsam
Wall Decor
Stylish Living
Mug 
```

当我尝试时，我无法像上面那样，下面是我得到的，花>向日葵和花>香脂应该在花下。

```
Flower
Wall Decor
Stylish Living
Mug   
flower > Sun Flower
flower > Balsam 
```

如果有人可以提供一些想法或解决方案，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:34:38.807

我终于让它准确地显示你所追求的。这是SQL：

```
SELECT p.category_name as parent_category, '' as child_category
FROM category AS p
WHERE parent_category_id not in (select category_id from category)
UNION
SELECT p.category_name as parent_category, c.category_name as child_category
FROM category AS p
JOIN category AS c ON (c.parent_category_id = p.category_id)
ORDER BY parent_category, child_category 
```

这是输出：

```
+-----------------+----------------+
| parent_category | child_category |
+-----------------+----------------+
| Flower          |                | 
| Flower          | Balsam         | 
| Flower          | Sun Flower     | 
| Mug             |                | 
| Stylish Living  |                | 
| Wall Decor      |                | 
+-----------------+----------------+ 
```

请注意，这仅适用于 2 级父子关系。如果您有第三级并且需要在三列中显示它，那么它会变得更加复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:31:04.967

我有一个类似的结构，并使用它的变体：

```
SELECT
    p.category_id, p.category_name,
    c.category_id, c.category_name
FROM category AS c
JOIN category AS p ON (c.parent_category_id = p.category_id)    
ORDER BY p.category_name, c.category_name 
```

您可能需要修改您使用的 JOIN 类型（我知道应该/不应该有孩子），但它会为您提供与父母一起的所有孩子类别，按照您要求的方式排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T15:52:22.183

```
SELECT category
FROM (
  SELECT
     IF(p.category_name is null, c.category_name, CONCAT(p.category_name, ' > ', c.category_name)) AS 'category'
  FROM category c
  LEFT JOIN category p ON c.parent_category_id = p.category_id
) s
ORDER BY category 
```

...对于您想要的结果，这是我能想到的最好的。[看到它工作](http://sqlfiddle.com/#!2/d5db9/8)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-12T18:44:39.547

这是显示具有三列 ID、名称、父 ID 的类别的列表和子列表的最佳答案

```
$con=mysqli_connect("localhost","root","","test");
$sql="select * from category where parent=0";
$result=mysqli_query($con,$sql);
echo "<ol>";
while($row=mysqli_fetch_array($result))
{
    echo "<li >".$row['name']."</li>";
    abc($row['id']);
}

function abc($id)
{
    global $con;
    $sql="select * from category where parent=$id";
    $result=mysqli_query($con,$sql);
    echo "<ol>";
    while($row=mysqli_fetch_array($result))
    {
        echo "<li>".$row['name']."</li>";
        abc($row['id']);
    }
    echo "</ol>";
}
echo "</ol>"; 
```

在这段代码中，我们将父 ID 传递给函数和函数，然后再次调用自身以显示子类别

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-28T15:30:30.623

您很可能必须进行`GROUP BY category_name`排序。

这也可能对您有所帮助 [http://sqllessons.com/categories.html](http://sqllessons.com/categories.html)

# objective-c - Objective c - 滚动表格视图时出现奇怪的泄漏

> ID：10786974
> 
> 赞同：1
> 
> 时间：2012-05-28T15:22:21.027
> 
> 标签：objective-c, ios, uitableview, memory-leaks, instruments

当我滚动表格视图时，我在仪器上得到了这种泄漏。
我做的滚动越多，我得到的泄漏就越多，而且它发生在我应用程序的每个表视图中。

有人可以告诉我我在这里做错了什么吗？

```
 0 libsystem_c.dylib malloc
       1 libsystem_c.dylib strdup
       2 libnotify.dylib token_table_add
       3 libnotify.dylib notify_register_mach_port
       4 libnotify.dylib notify_register_dispatch
       5 CoreFoundation _CFXNotificationRegisterObserver
       6 CoreFoundation CFNotificationCenterAddObserver
       7 UIKit -[UIScrollView(Static) _startTimer:]
       8 UIKit -[UIScrollView _endPanWithEvent:]
       9 UIKit -[UIScrollView handlePan:]
      10 UIKit _UIGestureRecognizerSendActions
      11 UIKit -[UIGestureRecognizer _updateGestureWithEvent:]
      12 UIKit ___UIGestureRecognizerUpdate_block_invoke_0541
      13 UIKit _UIGestureRecognizerApplyBlocksToArray
      14 UIKit _UIGestureRecognizerUpdate
      15 UIKit _UIGestureRecognizerUpdateGesturesFromSendEvent
      16 UIKit -[UIWindow _sendGesturesForEvent:]
      17 UIKit -[UIWindow sendEvent:]
      18 UIKit -[UIApplication sendEvent:]
      19 UIKit _UIApplicationHandleEvent
      20 GraphicsServices PurpleEventCallback
      21 CoreFoundation __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__
      22 CoreFoundation __CFRunLoopDoSource1
      23 CoreFoundation __CFRunLoopRun
      24 CoreFoundation CFRunLoopRunSpecific
      25 CoreFoundation CFRunLoopRunInMode
      26 GraphicsServices GSEventRunModal
      27 UIKit UIApplicationMain
      28 MyApp 0x2bda
      29 MyApp 0x2b6f 
```

这是表视图 viewController .m 文件：

```
@implementation ContactsViewController
@synthesize data = _data;
@synthesize tableView = _tableView;

- (void)dealloc
{
    [_data release];
    [_tableView release];

    [super dealloc];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bg411.png"]];
    self.title = @"Contacts";

    // init tableView
    CGRect tableFrame = self.view.bounds;

    _tableView = [[UITableView alloc] initWithFrame:tableFrame style:UITableViewStylePlain];
    _tableView.backgroundColor = [UIColor clearColor];
    _tableView.delegate = self;
    _tableView.dataSource = self;
    _tableView.separatorStyle = UITableViewCellSeparatorStyleNone;

    [self.view addSubview:_tableView];

    // load data
    self.data = [self loadData];
}

- (NSArray *)loadData
{
    NSArray *data = [NSArray arrayWithObjects:@"1", @"2", @"3", nil];
    return data;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.

    self.tableView = nil;
}

#pragma mark - UITableViewDataSource

- (NSInteger)numberOfRowsInOnlySection
{
    return self.data.count;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [self numberOfRowsInOnlySection];
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath 
{
    NSString *currData = [self.data objectAtIndex:indexPath.row];

    cell.textLabel.text = currData;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier   = @"SingleCell";

    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];          
    }

    [self configureCell:cell atIndexPath:indexPath];

    return cell;  
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:39:35.880

我敢打赌它发生在你的一些`UIScrollViewDelegate`方法上，可能在`scrollViewDidEndDragging:willDecelerate`.

尝试自己运行分析以解决大多数明显的问题。

* * *

现在这是一个**已知的 SDK 错误**，请参阅[开发者论坛](https://devforums.apple.com/message/630695)

# c# - 如何将用户控件移动到面板中？

> ID：10786975
> 
> 赞同：0
> 
> 时间：2012-05-28T15:22:22.753
> 
> 标签：c#, .net, user-controls, panel

我`.aspx`有这个：

```
<%@ Register src="box/MyBox.ascx" tagname="MyBox" tagprefix="uc2" %>
<uc2:MyBoxID="MyBox1" runat="server" />

<asp:Panel ID="panelLeft" runat="server">

</asp:Panel>

<asp:Panel ID="panelRight" runat="server">

</asp:Panel> 
```

我想，在`aspx.cs`，做这样的事情：

```
if (condition)
{
    panelLeft.Controls.Add(MyBox1);
}
else
{
    panelRight.Controls.Add(MyBox1);
} 
```

但似乎我做不到！为什么？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:25:16.543

您必须使用 LoadControl 来创建控制服务器端。

```
Control myBox1 = LoadControl("~/box/MyBox.ascx");
if (condition) 
{ 
    panelLeft.Controls.Add(myBox1); 
} 
else 
{ 
    panelRight.Controls.Add(myBox1); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T16:54:20.563

如果由于某种原因使用 LoadControl 添加控件不适合您要采用的方法，您可以通过将用户控件的两个副本添加到您想要它们的两个位置的标记中来实现类似的效果。然后，您可以在条件逻辑中切换代码中的可见性。

例如，这样的 ASPX：

```
<%@ Register src="box/MyBox.ascx" tagname="MyBox" tagprefix="uc2" %>

<asp:Panel ID="panelLeft" runat="server">
    <uc2:MyBoxID="MyBox1" runat="server" />    
</asp:Panel>

<asp:Panel ID="panelRight" runat="server">
    <uc2:MyBoxID="MyBox2" runat="server" />        
</asp:Panel> 
```

然后在后面的代码中可以切换可见性：

```
MyBox1.Visible = condition;
MyBox2.Visible = !MyBox1.Visible; 
```

但是，您随后将用户控件的两个不同副本加载到页面上，然后您的代码必须知道要访问哪个用户控件，而不是总是访问“MyBox1”。您可能需要在代码中隐藏一个属性来为您隐藏检查，例如：

```
private MyBox MyBox{
   get { return condition ? MyBox1 : MyBox2; }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-28T15:37:45.620

```
if (condition) 
{ 
   this.panelLeft.Controls.Add(mybox1);
} 
else 
{ 
    this.panelRight.Controls.Add(myBox1); 
} 
```

# jquery - 如何在 ASP.net 页面中包含 jQuery？

> ID：10786976
> 
> 赞同：12
> 
> 时间：2012-05-28T15:22:29.397
> 
> 标签：jquery, asp.net, user-controls

我有一个 ASP.net `UserControl`，它要求包含页面包含对 jquery 的引用。

在过去，我只会在包含页面中包含对 jQuery 的引用：

```
<HEAD>
   <SCRIPT type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></SCRIPT>
</HEAD> 
```

但是我的 UserControl 对 jQuery 的依赖是一个内部实现细节，不应该泄露到外部。我的 userControl 如何指示 jQuery 包含在最终页面中？

* * *

研究这个，我发现了很多令人困惑的解决方案，在不同的时间调用不同的函数。我不愿提及其中**任何**一个，因为人们可能认为其中任何一个都是有效的。我希望得到**正确**的答案，而不是有效的答案。

不同的解决方案涉及调用：

*   [`this.Page.ClientScript.RegisterClientScriptInclude`期间打电话`Render`](http://www.beansoftware.com/ASP.NET-Tutorials/Using-jQuery-ASP.NET.aspx)
*   [`this.Page.ClientScript.RegisterStartupScript`期间打电话`Render`](https://stackoverflow.com/questions/3866511/why-do-i-need-registerstartupscript-for-a-simple-jquery-helloworld-in-asp-net)
*   [`this.Page.ClientScript.RegisterStartupScript`期间打电话`Page_Load`](http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx)
*   [`this.Page.ClientScript.RegisterStartupScript`在按钮单击期间调用](http://forums.asp.net/t/1448049.aspx/1)
*   [打电话`Page.Header.Controls.Add(new LiteralControl( { Text = "<script type=\"text/javascript\" src=\"...\"></script>";);`](https://stackoverflow.com/questions/521639/programmatically-adding-javascript-file-to-user-control-in-net)
*   [只需在文件中包含一个`<SCRIPT>`元素`userControl.ascx`](http://forums.asp.net/t/1366290.aspx/1)
*   [`RegisterClientScriptBlock`期间打电话`OnPreRender`](https://stackoverflow.com/questions/3751653/register-javascript-from-within-a-usercontrol-in-asp-net)

我的困惑集中在：

*   我什么时候想使用`RegisterClientScriptInclude`vs `RegisterStartupScript`？
*   我什么时候想在`Page_Load`vs `Render`vs `PreRender`vs 按钮点击期间调用它？
*   我如何给出`RegisterXxxxScriptXxx`路径`"Scripts/jquery-1.7.2.min.js"`？

* * *

简短版本：我如何转换

```
<%@ Page Title="Home Page" Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs"
    Inherits="_Default" %><!DOCTYPE html>
<html>
<head runat="server">
    <script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script> 
```

用于用户控件：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="MySuperCoolControl.ascx.cs" Inherits="Controls_MySuperCoolControl" %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T10:55:50.573

您可以使用 google 托管的 jquery，如下所示：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:48:25.557

您可以`ScriptManagerProxy`在 UserControl 上使用 a，`ScriptManager`在父页或母版页上使用 a。

查看[如何在自定义 ASP.NET 控件中使用 ScriptManagerProxy](https://stackoverflow.com/questions/2675728/how-do-you-use-scriptmanagerproxy-in-a-custom-asp-net-control)

这将负责“为 RegisterXxxxScriptXxx 提供“Scripts/jquery-1.7.2.min.js”的路径，并消除在 Page_Load/Page_PreRender 事件期间担心它的需要。

至于“我什么时候想使用 RegisterClientScriptInclude 和 RegisterStartupScript？”

`RegisterClientScriptInclude`注册要包含在页面中的外部 JS 文件。`RegisterStartupScript`在页面中包含一个内联可执行脚本块，它不在外部文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T16:01:08.110

**[这仅在您的用户控件要在内部使用时才相关。如果它是为了分发，那么它不会有太大帮助]**

看看这个链接：

[http://www.codeproject.com/Articles/196727/Managing-Your-JavaScript-Library-in-ASP-NET](http://www.codeproject.com/Articles/196727/Managing-Your-JavaScript-Library-in-ASP-NET)

这篇文章建议创建方法来生成对 jQuery 等 javascript 库的引用，这样如果您想在页面中使用它，您只需调用 JavascriptLoader.IncludeJQuery() [或任何您调用的方法]。

现在我所做的是更进一步，通过在我放置在 GAC 中的程序集中创建这些方法，以便它可用于我的所有 .net Web 应用程序。现在，无论我想在哪里使用 jQuery，该方法都已经可用。最好的事情是，如果我在用户控件中调用该方法，然后在另一个用户控件中再次调用它，然后在页面上再次调用它，它仍然只注册一次库。如果我决定升级到较新版本的 jQuery，我只需更改我的 dll，它会随处更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T10:44:27.597

如果您的控件是从单独的项目中引用的，则可以将 javascript 嵌入到其他程序集中。请参阅 Scott Mitchell 的这个古老但很好的例子：

[http://www.4guysfromrolla.com/articles/080906-1.aspx](http://www.4guysfromrolla.com/articles/080906-1.aspx)

# mysql - 如何正确使用带有内连接的 Order By

> ID：10786978
> 
> 赞同：0
> 
> 时间：2012-05-28T15:22:30.483
> 
> 标签：mysql, sql-order-by, inner-join

我有一个看起来像这样的 SQL 语句：

```
SELECT * FROM table1 AS bl  
INNER JOIN table2 AS vbsa ON bl.id=vbsa.businesslisting_id AND vbsa.section_id ='70'  
INNER JOIN table3 AS vbla ON bl.id=vbla.businesslisting_id AND vbla.location_id='1'  
WHERE bl.published = '1' 
ORDER BY bl.listing_type DESC 
```

由于某种原因，这不会返回任何行，但是如果我删除 ORDER BY 子句，它确实会返回行。任何想法为什么会这样？

列listing_type 确实存在于数据库中并包含数值。它设置为 varchar 类型。我想也许这就是问题所在，但我尝试了不同的列（ID），但它仍然不起作用。

谢谢罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:31:04.040

尝试这个

```
SELECT * FROM table1 AS bl  
INNER JOIN table2 AS vbsa ON bl.id = vbsa.businesslisting_id
INNER JOIN table3 AS vbla ON bl.id = vbla.businesslisting_id
WHERE bl.published = 1 AND vbsa.section_id = 70 AND vbla.location_id = 1
ORDER BY bl.listing_type DESC 
```

还要确保在调试 SQL 时查看错误消息，试图在没有看到这些错误的情况下修复是很困难的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T21:28:09.603

发现了问题。我一直在研究其他人的代码，他们没有为相关表添加索引。

因此，当我添加按属性排序并运行查询时，它超出了 MAX_JOIN_SIZE 行。

我添加了索引，现在它可以完美运行了。

感谢大家的意见。

# getopt - 使用 getOpt 在 Haskell 中解析命令行参数

> ID：10786980
> 
> 赞同：1
> 
> 时间：2012-05-28T15:22:38.127
> 
> 标签：getopt, haskell

我正在尝试自学 Haskell。作为一个示例程序，我正在编写一个蜘蛛纸牌播放器。

我正在尝试使用`System.Console.GetOpt`. 我知道有更简单的方法可以对该程序进行参数解析，但我想学习如何使用该`GetOpt`模块，因为我预计稍后在我将编写的其他程序中需要它的复杂性。

我正在尝试添加一个“--help”选项，它只打印一条使用消息然后退出。如果“--games”选项或“--suits”选项的任何一个参数不是有效整数（游戏> = 1和<= 1000，西装== 1、2，或 4）。我会将生成的`Options`数据类型传递给程序的其他部分。

我也收到一个`progName`不在范围内的错误。`case`语句不是在块`parseArgs`的范围内吗？`do`

[这是我的代码，由“Real World Haskell”](http://book.realworldhaskell.org/)和[Haskell wiki](http://hackage.haskell.org/packages/archive/base/latest/doc/html/System-Console-GetOpt.html#g:3)中的示例拼凑而成：

```
module Main (main) where

import System.Console.GetOpt
import System.Environment(getArgs, getProgName)

data Options = Options {
    optGames :: Int
  , optSuits :: Int
  , optVerbose :: Bool
  } deriving Show

defaultOptions = Options {
    optGames  = 1
  , optSuits = 4
  , optVerbose = False
  }

options :: [OptDescr (Options -> Options)]
options =
  [ Option ['g'] ["games"]
      (ReqArg (\g opts -> opts { optGames = (read g) }) "GAMES")
      "number of games"
  , Option ['s'] ["suits"]
      (ReqArg (\s opts -> opts { optSuits = (read s) }) "SUITS")
      "number of suits"
  , Option ['v'] ["verbose"]
      (NoArg (\opts -> opts { optVerbose = True }))
      "verbose output"
  ]

parseArgs :: IO Options
parseArgs = do
  argv <- getArgs
  progName <- getProgName
  case getOpt RequireOrder options argv of
    (opts, [], []) -> return (foldl (flip id) defaultOptions opts)
    (_, _, errs) -> ioError (userError (concat errs ++ helpMessage))
  where
    header = "Usage: " ++ progName ++ " [OPTION...]"
    helpMessage = usageInfo header options

main :: IO ()
main = do
  options <- parseArgs
  putStrLn $ show options 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T12:33:06.550

这是我想出的解决方案：

```
module Main (main) where

import Control.Monad
import Control.Monad.Error
import System.Console.GetOpt
import System.Environment(getArgs, getProgName)

data Options = Options {
    optGames :: Int
  , optSuits :: Int
  , optVerbose :: Bool
  } deriving Show

defaultOptions = Options {
    optGames  = 1
  , optSuits = 4
  , optVerbose = False
  }

options :: [OptDescr (Options -> Either String Options)]
options =
  [ Option ['g'] ["games"]
      (ReqArg (\g opts ->
        case reads g of
          [(games, "")] | games >= 1 && games <= 1000 -> Right opts { optGames = games }
          _ -> Left "--games must be a number between 1 and 1000"
        ) "GAMES")
      "number of games"
  , Option ['s'] ["suits"]
      (ReqArg (\s opts ->
        case reads s of
          [(suits, "")] | suits `elem` [1, 2, 4] -> Right opts { optSuits = suits }
          _ -> Left "--suits must be 1, 2, or 4"
        ) "SUITS")
      "number of suits"
  , Option ['v'] ["verbose"]
      (NoArg (\opts -> Right opts { optVerbose = True }))
      "verbose output"
  ]

parseArgs :: IO Options
parseArgs = do
  argv <- getArgs
  progName <- getProgName
  let header = "Usage: " ++ progName ++ " [OPTION...]"
  let helpMessage = usageInfo header options
  case getOpt RequireOrder options argv of
    (opts, [], []) ->
      case foldM (flip id) defaultOptions opts of
        Right opts -> return opts
        Left errorMessage -> ioError (userError (errorMessage ++ "\n" ++ helpMessage))
    (_, _, errs) -> ioError (userError (concat errs ++ helpMessage))

main :: IO ()
main = do
  options <- parseArgs
  putStrLn $ show options 
```

我该如何改进呢？

# c++ - C++ 中的文档字符串工具

> ID：10786985
> 
> 赞同：10
> 
> 时间：2012-05-28T15:23:00.340
> 
> 标签：c++, c, documentation

像 Python、MATLAB、E-Lisp 这样的语言有这个很好的文档字符串工具。使用此功能，只需在终端中按几下键，您就可以获取已编写并导入代码的函数/模块的文档。

现在是否有任何“技术”（库、编辑器技巧等）在 C++/C 中获得类似的设施。假设我在函数头部的源文件中包含函数的文档，那么我想在终端输入类似 getinfo 的命令。（类似于手册页）

我知道许多 C 函数都存在这样的“人”工具，但这些函数的文档是在与源代码不同的文本文件中编写的。我希望文档到位

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T15:31:25.033

您可以使用[doxygen 之](http://www.doxygen.nl/)类的东西。它支持生成[手册页](http://www.doxygen.nl/manual/config.html#man_output)，以及其他格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:54:06.613

Visual Studio 可以/将生成包含从[DocXml](http://msdn.microsoft.com/en-us/library/ms177227)格式的注释中提取的信息的弹出窗口。您必须使用 进行编译[`/doc`](http://msdn.microsoft.com/en-us/library/ms173501)，这会将 XML 从注释中提取到`.xdc`文件中。然后你必须运行[`xdcmake`](http://msdn.microsoft.com/en-us/library/ms177247)将`.xdc`文件编译成一个xml文件。您通常会在构建过程中自动处理所有这些，因此您不必手动执行太多操作（当然，除了自己编写注释之外）。但是，要记住的一件事是，在获得弹出窗口之前必须构建代码（至少是声明）。

我觉得有必要补充一下 IMO，大多数这样的评论通常都非常接近无用。如果企业标准使它们不可避免，那就这样吧 - 但如果他们诚实地提供任何有用的信息，我会认为这是一个问题的迹象（“代码味道”，如果你更喜欢这种措辞）。在大多数情况下，函数名称（或其他名称）和参数名称/类型的组合*应该*使函数的使用非常清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:29:06.843

如果您使用类似于 Javadoc 的语法为您的代码添加注释，您可以使用[Doxygen](http://www.doxygen.nl/)为您的代码生成各种不同格式的文档。它可以生成手册页，但似乎人们使用的首选输出格式是 HTML 页面。

# java - 自动化性能测试框架

> ID：10786989
> 
> 赞同：5
> 
> 时间：2012-05-28T15:23:07.643
> 
> 标签：java, performance, scala, testing

是否有在 JVM 上编写自动化性能测试的框架？

我想设置一些性能目标并在每次性能低于目标时闪烁红灯（或者更确切地说打印红色控制台消息）。

我有一些用 Calliper 编写的基准，我手动运行，但是我希望性能测试套件能够像单元测试一样自动运行。

没有数据库或网络服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:36:12.723

由于第 4 版 JUnit 支持该功能：

```
import org.junit.*;

public class JunitTest4 {

    // timings below are in milliseconds
    @Test(timeout = 1000)  
    public void infinity() {
        // will fail    
        while (true);  
    }  

} 
```

但遗憾的是，它只是一个基本功能，不确定你是否会完全满意：你不能测量小于毫秒的东西，你不能存储测试的历史记录，你看不到你离目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T18:18:38.837

我不是性能测试专家，所以我无法判断这实现起来有多么困难，但使用 JUnit 规则应该可以。

它的工作原理类似于 om-nom-nom 提到的 @Test 注释，但您将提供一个规则，例如运行每个测试 100 次以进行预热，而不是运行 100 次并计算 stdev 并在平均时间失败时测试比设置的timeoiut 大2 个标准差。......或者任何规则应该是。

这是[一篇关于 JUnit 规则](http://blog.schauderhaft.de/2011/07/24/rules-in-junit-4-9-beta-3/)的文章。

基本上[相同的方法应该适用于 ScalaTest](http://blog.schauderhaft.de/2011/08/28/manipulating-test-execution-with-scalatest/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T20:41:54.607

当我问这个问题时， [ScalaMeter](http://axel22.github.io/scalameter/)工具包完全符合我的要求。

# java - 扩展 JMeter 还是编写复杂的场景？

> ID：10786993
> 
> 赞同：0
> 
> 时间：2012-05-28T15:23:43.670
> 
> 标签：java, jmeter, load-testing

我有几千个文件，其中一些包含 HTTP 请求，其中一些包含相应的 HTTP 响应。我想创建一些脚本，它产生成百上千个线程，每个线程都应该接受 HTTP 请求，将其发送到服务器并将来自服务器的响应与相应的响应文件进行比较。

我不确定是否必须使用配置创建自定义采样器，或者我可以使用现有的 JMeter 函数来创建一个？

此外，我无法找到有关如何使用新采样器扩展 JMeter 的可靠文档。这个似乎已经过时了：[http ://www.jajakarta.org/jmeter/1.7/en/extending/JMeter%20Extension%20Scenario.html](http://www.jajakarta.org/jmeter/1.7/en/extending/JMeter%20Extension%20Scenario.html)

可能有人可以建议我在哪里可以找到最新的指南，包括采样器的创建？例如，如何创建采样器，它将一个目录作为参数并遍历该目录中的每个文件，然后发出请求/比较响应并告诉 JMeter WEB 服务器是否正确处理了该文件以及时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T15:41:57.013

我认为你应该只使用regulat JMeter 场景。用 CSV 数据集实现文件列表，用这个集合和线程组生成一些线程。每个线程从 CSV 数据集中获取请求/响应文件对的名称，使用 HTTP/TCP 采样器发送请求并使用断言（响应断言）来验证响应。

MD5 断言可以更快地检查响应。

# java - Android：加载图像时出错：OutOfMemoryError：位图大小超出 VM 预算

> ID：10786996
> 
> 赞同：0
> 
> 时间：2012-05-28T15:24:17.733
> 
> 标签：java, android, android-layout, tablet

我正在为平板电脑 (1024x768) 开发 Android 应用程序。我在这里搜索并找到了一些解决方案，但有人解决了我的问题。该应用程序有 5 个屏幕，每个屏幕都有一个我加载的 ImageView：

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="1024dp"
    android:layout_height="768dp"
    android:layout_centerHorizontal="TRUE"
    android:src="@drawable/scene1"
    /> 
```

第一个和第二个屏幕加载良好，但是当我尝试加载第三个屏幕时，出现以下错误（我通过 startActivity 加载的每个屏幕其布局。这不是布局错误，因为如果我以不同的顺序加载它们，我也可以加载两个和第三个 crase）：

```
05-28 17:03:51.774: E/AndroidRuntime(401): java.lang.RuntimeException: Unable to start activity ComponentInfo{xxx}: android.view.InflateException: Binary XML file line #10: Error inflating class <unknown>

05-28 17:03:51.774: E/AndroidRuntime(401): Caused by: android.view.InflateException: Binary XML file line #10: Error inflating class <unknown>

05-28 17:03:51.774: E/AndroidRuntime(401): Caused by: java.lang.reflect.InvocationTargetException

05-28 17:03:51.774: E/AndroidRuntime(401): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

我尝试了几件事：

```
 @Override
  public void onPause()
  {
    super.onPause();
    Log.i("URI", "Syste.gc");
    // yada yada yada...

    System.gc();
  } 
```

和

```
@Override
protected void onDestroy()
{
    super.onDestroy();

    unbindDrawables(findViewById(R.id.RootView));
    System.gc();
}

private void unbindDrawables(View view)
{
    if (view.getBackground() != null)
    {
        view.getBackground().setCallback(null);
    }
    if (view instanceof ViewGroup)
    {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++)
        {
            unbindDrawables(((ViewGroup) view).getChildAt(i));
        }
        ((ViewGroup) view).removeAllViews();
    }
} 
```

但我总是得到错误。

图像为 PNG，其重量低于 50k。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:51:49.247

1024x768 是 DP 中的尺寸，像素数可能是高分辨率设备上的两倍。

如果您使用 bitmapfactory 解码 1024x768 图像，它将相对于密度缩放位图，因此您最终可能会得到 2048x1536 图像，这将占用大约 12MB。

如果无论设备分辨率如何，您总是希望图像具有相同的分辨率，而不是将其放在`Drawable-nodpi`文件夹中，这将导致它在解码时不会调整大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T15:52:47.533

尝试在 onCreate() 方法中加载图像，而不是从 XML 加载它。

您是否尝试过先读取图像的尺寸和类型，然后加载该图像的缩小版本？

正如[Android 开发人员资源](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)所建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T15:28:09.580

首先，调用 System.gc() 不会真正让垃圾收集器通过，而且它确实会阻碍你的表现，所以我会限制自己如此广泛地使用它。如果您希望垃圾收集器清理图像，请改用 Wea​​kReferences，并将图像存储在 HashMap 上。

其次，尝试使用较小的映像，因为 VM 会很快崩溃。