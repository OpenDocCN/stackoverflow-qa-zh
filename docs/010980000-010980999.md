# StackOverflow 问答 10980000-10980999

# css - 带有固定标头和 960.gs 的 IE7 奇怪行为

> ID：10980001
> 
> 赞同：0
> 
> 时间：2012-06-11T12:21:03.497
> 
> 标签：css, css-position

大家好……您能对以下链接发表您的意见吗？[http://dante.edoardobiasini.it](http://dante.edoardobiasini.it) 出于某种原因，在 ie7 中，上面的固定标头没有居中，而是一直向右……谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:39:56.963

IE7 并不总是与 . 一起正常运行`left: auto`，这是`#branding`目前的情况。

要修复它，请添加以下内容：

```
#branding {
    left: 50%;
    margin-left: -480px; /* 960/2 */
} 
```

# jquery - 通过代码禁止在 IE 上弹出“此页面正在访问信息…………”

> ID：10980003
> 
> 赞同：0
> 
> 时间：2012-06-11T12:21:03.960
> 
> 标签：jquery

我想为我的项目进行跨域数据访问，我让它工作，但我被这个弹出窗口卡住了，它说`This page is accessing information.`我不想通过显式更改浏览器设置来抑制它：我可以修改我的工作代码来抑制这个消息吗？

我的弹出工作代码：

```
 <script type="text/javascript">$.ajax({
     url: "http://sys85/testservice/serviceCall.ashx",
    dataType: "text",
    type: 'get',
    crossDomain: true,
    success: function (data) {

    },
    error: function (jqXHR, textStatus, errorThrown) {
        if (window.console) console.log("Error... " + textStatus + "        " + errorThrown);

    }
});
</script> 
```

我已尝试使用此处给出的示例：[jsonp with jquery](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)，但对于我的 URL 它不起作用。

我的处理程序文件返回结果（serviceCall.ashx）：

```
string result = "121";
context.Response.ContentType = "application/json";
context.Response.Write(result); 
```

我必须对我的处理程序文件进行任何更改吗？

当我尝试添加错误函数以获取错误详细信息时：

```
$(document).ready(function () {

    var url = "http://sys85/testservice/serviceCall.ashx";
    $.getJSON(url + "?callback=?", null, function (data) {
        alert(data);
    })
    .error(function (jqXHR, textStatus, errorThrown) {
        console.log("Error... " + textStatus + "        " + errorThrown);
        document.getElementById('lblmsg').value = "Error... " + textStatus + "        " + errorThrown;
    })
}); 
```

我得到这个错误：`Uncaught TypeError: Object #<XMLHttpRequest> has no method 'error'`。

尝试了所有可能的方法来摆脱此消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:59:13.760

在 jquerys`$.ajax`方法中使用错误回调，就像在您的第一个示例中一样。

AFAIK，`getJSON`没有错误回调，只是`$.ajax`dataType 设置为 'json' 的简写

# javascript - 在 Javascript 中加入关联数组

> ID：10980004
> 
> 赞同：0
> 
> 时间：2012-06-11T12:21:06.300
> 
> 标签：javascript, multidimensional-array

我在 Javascript 中有两个（或更多）关联数组：

```
tagArray['title'] = ('<H1>title</H1>');
tagArray['text'] = ('<P>text</P>'); 
```

并想像这样加入他们：

```
tagFinal = tagArray.join("<BR>"); 
```

但结果是空的。

它应该导致：`tagFinal = '<H1>title</H1><BR><P>text</P>';`

我究竟做错了什么？（我也试过没有标签，没有区别）或者我最好将`push()`它 -ng 到一个新的数组/字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:22:29.310

JavaScript 中不存在“关联数组”类型。有对象，也有数组。Array 原型有一个`.join()`方法，但 Object 没有。

（对象通常会做一些类似关联数组的工作，但没有内置的显式功能可以模拟实际数组。例如，您也找不到对象实例的“长度”。）

但是，您可以编写这样的函数：

```
function smush( o, sep ) {
  var k, rv = null;
  for (k in o) {
    if (o.hasOwnProperty(k)) {
      if (rv !== null) rv += sep;
      rv += o[k];
    }
  }
  return rv;
} 
```

您是否真的想要将“smush”函数限制为处理对象的直接属性（而不是继承的属性），以及是否想要按类型过滤，这些都是您必须自己决定的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-02T03:30:01.350

此代码应该适合您：

```
var tagFinal = "";
var i = 0;

for (var key in tagArray) {
    if(i == 0){separator = "";}else{separator = "<br>";}
    tagFinal += separator + tagArray[key];
    i++;
}
```

# objective-c - 了解基本的 objC 事物

> ID：10980006
> 
> 赞同：0
> 
> 时间：2012-06-11T12:21:22.287
> 
> 标签：objective-c

我试图理解一些事情。在 A 类中，我正在创建一个 classB 的实例，在 B 中，有一个计时器，它总是重复，并且他永远启动了一个录音和播放系统。

在 A 类中，我创建了 B 的实例：

```
recordMachine *recMinst=[[recordMachine alloc]init];
[recMinst startMachine];
[recMinst release]; 
```

问题是，在 classB 中，接口中有实例变量，例如播放器、记录器指针和其他整数。

问题是，在我释放 A 中的实例之后，这个 classB 如何继续工作？ **A 不会在内存中创建一个位置来存储所有 B 实例变量，当我释放它时 - 它们消失了吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:24:32.803

如果您需要将 B 实例保留到其结束，则必须将其保留在 A 对象中直到 A 实例结束。在您的情况下，B 的保留计数在您释放后为 0，因此它被释放。

如果你想保留它，你必须将它保留在某个地方。我建议你保留它并在 A 的 dealloc 方法中释放它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:34:48.833

> A 没有在内存中创建一个位置来存储所有 B 实例变量，当我释放它时 - 它们消失了吗？

是也不是，release 不像 C++ delete 那样工作，例如它不会删除对象并清理其内存，而只会减少其引用计数。如果另一个对象持有它，那么它不会被释放，直到另一个对象也对其调用释放。

> 问题是，在我释放 A 中的实例之后，这个 classB 如何继续工作？

关于为什么 B 继续工作的唯一解释是因为其他一些物体正在抓住它。

您提到 B 类使用一个计时器（很可能是一个 NSTimer），您会将 B 实例传递给该计时器。因此 NSTimer 保持对 B 对象的引用并防止它被破坏。

检查您的实例上的引用计数以确定。

[NSTimer 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)说“目标对象由计时器保留并在计时器无效时释放。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:35:29.833

如果您不手动释放 B 的 ivars，`-dealloc`它们仍在内存中。

# jquery - 禁用可拖动时不要更新css

> ID：10980007
> 
> 赞同：1
> 
> 时间：2012-06-11T12:21:24.763
> 
> 标签：jquery

在这个小提琴上，当我单击禁用“Li Point1”时，文本 eb 变灰[http://jsfiddle.net/adrianjsfiddlenetuser/Q9sHz/14/](http://jsfiddle.net/adrianjsfiddlenetuser/Q9sHz/14/)

可以保持元素的原始样式（不灰显）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:41:45.637

你有三个选择。您可以从 jquery-ui.css 中删除样式`.ui-state-disabled`，您可以覆盖您自己的自定义样式表中的样式，或者您可以将更改的属性标记为`!important`.

**删除样式**

要删除样式，您需要编辑`jquery-ui.css`并查找`.ui-state-disabled`规则（在 jQuery 1.7.2 中，它位于第 262 行）。删除其中的所有样式（您会看到三个、`opacity`、`filter`和`background-image`.

这样做的缺点是，如果您更新了 jQuery 并获得了一个新的 CSS 文件来配合它，您将丢失您的编辑。

**添加自己的样式表**

您可以为禁用元素添加自己的规则`.ui-state-disabled`并更改其样式。由于`ui-state-disabled`用于 jQuery 中被禁用的所有内容，我建议将您的规则定义为独有的`li`，或者在您的上设置一个类`ul`并专门为此定义样式。

```
<ul class=".noStyleDisableDrag">
    ...
</ul>

.noStyleDisableDrag .ui-state-disabled {
    opacity: 1;
    filter: none;
    background-image: inherit;
} 
```

**标记为 !important**

您还可以将不透明度、过滤器和背景图像样式添加到定义该特定项目应该如何显示和使用`!important`标志的其他规则中。不过，这不是最推荐的做事方式，因为如果您忘记标记它，它可能会对您的 CSS 样式调试造成严重破坏，但它是一种选择。为此，您只需将您的样式设置`li`为：

```
li {
    opacity: 1 !important;
    filter: none !important;
    background-image: (whatever you want, or none) !important;
} 
```

请注意，在这种情况下，如果您没有在可拖动对象上设置背景图像，则不需要该行来设置背景图像；刚刚设置`opacity`并被`filter`取消覆盖。另请注意，这些可以被 JavaScript 覆盖，因此它们不是一成不变的。

* * *

在这三个中，您可能需要使用组合。我的建议是使用您自己的自定义样式表来覆盖`opacity`和`filter`属性。如果您使用背景图像，您可能需要使用`!important`它来防止它被`ui-state-disabled`规则删除。但`!important`尽可能少用标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:24:31.683

第 262 行 jquery-ui.css 删除过滤器和不透明度行

```
 .ui-state-disabled, .ui-widget-content .ui-state-disabled,
 .ui-widget-header .ui-state-disabled {
     background-image: none; 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:24:22.830

单击禁用按钮会`ui-state-disabled`向元素添加一个 CSS 类。只需覆盖该类的样式即可。

```
.ui-state-disabled { opacity:1; } 
```

# android - 在 FragmentPagerAdapter 中引用/更新视图

> ID：10980008
> 
> 赞同：1
> 
> 时间：2012-06-11T12:21:30.373
> 
> 标签：android, android-viewpager, android-view

我正在创建一个应用程序，它有一个主要活动，其中有一个 FragmentPagerAdapter。通过定义 XML 创建和扩展了四个页面。当我尝试引用这些页面中包含的任何视图时，我会收到 NullPointerException。

这是代码：

```
import com.viewpagerindicator.TitlePageIndicator;
import com.viewpagerindicator.TitlePageIndicator.IndicatorStyle;
import android.os.Bundle;  
import android.support.v4.app.FragmentActivity;  
import android.support.v4.view.ViewPager;
import android.widget.TextView;

public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        MyFragmentPagerAdapter myFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
        ViewPager viewPager = (ViewPager) findViewById(R.id.pager);  
        viewPager.setAdapter(myFragmentPagerAdapter);

        setCustomTitleBar(viewPager);

        **// NullPointerException in next line**
        TextView textView = (TextView) myFragmentPagerAdapter.getItem(0).getView().findViewById(R.id.page0_city);
    }

    private void setCustomTitleBar(ViewPager viewPager){
        TitlePageIndicator titleIndicator = (TitlePageIndicator) findViewById(R.id.page_indicator);
        titleIndicator.setViewPager(viewPager);
        float density = getResources().getDisplayMetrics().density;
        titleIndicator.setBackgroundColor(0x00000000);
        titleIndicator.setFooterColor(0xff99c224);
        titleIndicator.setFooterLineHeight(2 * density); //1dp
        titleIndicator.setFooterIndicatorHeight(3 * density); //3dp
        titleIndicator.setFooterIndicatorStyle(IndicatorStyle.Underline);
        titleIndicator.setTextColor(0xAAAAAAAA);
        titleIndicator.setTextSize(13 * density);
        titleIndicator.setSelectedColor(0xFFFFFFFF);
        titleIndicator.setSelectedBold(true);
    }
}

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

class MyFragmentPagerAdapter extends FragmentPagerAdapter {
    PageZero p0;
    PageOne p1;
    PageTwo p2;
    PageThree p3;

    public MyFragmentPagerAdapter(FragmentManager fragmentManager) {
        super(fragmentManager);
        p0 = new PageZero();
        p1 = new PageOne();
        p2 = new PageTwo();
        p3 = new PageThree();
    }

    @Override
    public Fragment getItem(int index) {
        switch (index) {
        case 0:
            return p0;
        case 1:
            return p1;
        case 2:
            return p2;
        case 3:
            return p3;
        }
        return null;
    }

    @Override
    public int getCount() {
        return 4;
    }

    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return "TODAY";
        case 1:
            return "MONDAY";
        case 2:
            return "TUESDAY";
        case 3:
            return "WEDNESDAY";
        }
        return "null";
    }
}

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class PageZero extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.page0, container, false);
        return view;
    }
} 
```

我确实找到了两个相关的问题，都没有对我产生任何结果：
[Android：在 ViewPager 中更改文本](https://stackoverflow.com/questions/10678950/android-change-text-within-viewpager)
[如何更改片段内的视图？](https://stackoverflow.com/questions/5953502/how-do-i-change-the-view-inside-a-fragment)

访问页面、它们的视图和内容的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T14:00:34.837

在fragment类的onCreateView方法中写TextView textView = (TextView)findViewById(R.id.page0_city)，类似这样——

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.page0, container, false);
        TextView textView = (TextView)findViewById(R.id.page0_city);
        if(textView!=null) textView.setText("Page0");
        return view;
    } 
```

# c# - Crystal Report 询问简单数据集的登录信息。如何隐藏它？

> ID：10980020
> 
> 赞同：1
> 
> 时间：2012-06-11T12:22:00.560
> 
> 标签：c#, authentication, crystal-reports, dataset, report

我知道有一些线程与这个线程有类似的问题。但是，我找不到一个能解决我的问题的。

我使用 Visual Studio 2010 并创建一个包含一个表的数据集。我想在 Crystal Report Viewer 中显示数据。但是当它开始加载时，它会询问我登录信息。我没有在我的数据集上设置任何有关登录信息的内容。这就是为什么我很困惑。

这是我在表中添加虚拟行的代码：

```
dataSet = new DummyDS();
dummyTable = dataSet.Tables["Simulation"];

// fill table with random data
Object[] dummyObj = new Object[3];
dummyObj[0] = null;
dummyObj[1] = 1;
dummyObj[2] = 2;
dummyTable.Rows.Add(dummyObj); 
```

这是我加载水晶报表查看器的代码：

```
CrystalReport1 cr = new CrystalReport1();
cr.Load();

crystalReportViewer1.ReportSource = cr;
crystalReportViewer1.Refresh(); 
```

我想在 Crystal Report Viewer 中显示我的数据而不被要求提供登录信息。你能帮我解决这个问题吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:26:06.163

升级为回答状态，因为我认为这是答案：

您需要将报表数据源设置为您创建的数据集。如果您没有将报表的数据源设置为数据集，那么您依靠 CR 只是猜测要使用哪个数据集！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T12:33:55.357

根据我的经验：登录窗口可能出现在这些情况下：

*   未提供数据库连接字符串（为此使用）
    `CrystalReport1.SetDatabaseLogon("UserID", "Password", "Server",
    "DatabaseName")`
*   查询包含不存在的对象。
*   其他一些我还没有遇到的案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:40:08.790

我有时会遇到同样的问题，但不幸的是它与任何登录过程都没有任何关系（正如您所怀疑的那样）。当 CR 无法创建报告时，在某些情况下抛出的错误将类似于：

“加载报告失败（登录失败）”

这与登录本身无关。即使您根本不使用身份验证，它也很可能会给您这个错误。我建议将报告导出到磁盘，例如使用带有 PDF 选项的[ExportToDisk 。](http://devlibrary.businessobjects.com/BusinessObjectsXIR2/en/en/CrystalReports_dotNET_SDK/crsdk_net_doc/doc/crsdk_net_doc/html/crlrfCrystalDecisionsCrystalReportsEngineReportDocumentExportToDiskTopic.htm)这可能也会产生错误，但您可以轻松捕获它，它可能会为您提供更多信息。

无论如何，我认为错误在于报告生成本身（而不是身份验证），例如记录选择公式、格式化公式或组函数中。或者 CR 期望的架构与您提供的实际数据之间存在其他一些不匹配。

您正在创建并放入报告中的虚拟数据，它与您构建 CR 文件所用的模式是否完全相同？

# c - MPI Finalize 需要永远

> ID：10980021
> 
> 赞同：1
> 
> 时间：2012-06-11T12:22:01.087
> 
> 标签：c, parallel-processing, mpi, openmpi

我注意到在我的 MPI 程序中 MPI_Finalize() 需要很长时间才能完成，大约 10/20 秒，而程序本身在几毫秒内完成（它几乎立即产生正确的结果）。

OPEMPI 手册[http://www.open-mpi.org/doc/v1.6/man3/MPI_Finalize.3.php](http://www.open-mpi.org/doc/v1.6/man3/MPI_Finalize.3.php)指出 MPI_Finalize() 应该只检查未决的通信。我推断如果某些通信不匹配或很快完成，它应该会失败。

MPI_Finalize 需要这么长时间才能完成的可能解释是什么？

**更新：**多次执行同一个程序时似乎会出现此问题，即 MPI_Finalize 的第一次执行通常很快，然后降级。即使对于像这样的非常简单的程序也很明显：

```
 #include <stdio.h>
    #include <mpi.h>

    int main (int argc,char* argv[])
    {
    int rank, size;

    MPI_Init (&argc, &argv);      /* starts MPI */
    MPI_Comm_rank (MPI_COMM_WORLD, &rank);        /* get current process id */
    MPI_Comm_size (MPI_COMM_WORLD, &size);        /* get number of processes */
    printf( "Hello world from process %d of %d\n", rank, size );
    MPI_Finalize();
    return 0;
    } 
```

此外，这个问题似乎不受进程数量的影响。我在双插槽 Intel Xeon E5520 @ 2.27GHz 上遇到了这个问题。

**更新 2**

```
[andromeda.di.unipi.it:03918] procdir: /tmp/openmpi-sessions lottarin@andromeda.di.unipi.it_0/18136/0/0
[andromeda.di.unipi.it:03918] jobdir: /tmp/openmpi-sessions-lottarin@andromeda.di.unipi.it_0/18136/0
[andromeda.di.unipi.it:03918] top: openmpi-sessions-lottarin@andromeda.di.unipi.it_0
[andromeda.di.unipi.it:03918] tmp: /tmp
[andromeda.di.unipi.it:03918] mpirun: reset PATH: /tmp/OPENMPI/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/home/lottarin/bin
[andromeda.di.unipi.it:03918] mpirun: reset LD_LIBRARY_PATH: /tmp/OPENMPI/lib
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_cmd: received add_local_procs

MPIR_being_debugged = 0
  MPIR_debug_state = 1
  MPIR_partial_attach_ok = 1
  MPIR_i_am_starter = 0
  MPIR_forward_output = 0
  MPIR_proctable_size = 4
  MPIR_proctable:
    (i, host, exe, pid) = (0, andromeda.di.unipi.it, /home/lottarin/PROVE_MPI/./a.out, 3919)
    (i, host, exe, pid) = (1, andromeda.di.unipi.it, /home/lottarin/PROVE_MPI/./a.out, 3920)
    (i, host, exe, pid) = (2, andromeda.di.unipi.it, /home/lottarin/PROVE_MPI/./a.out, 3921)
    (i, host, exe, pid) = (3, andromeda.di.unipi.it, /home/lottarin/PROVE_MPI/./a.out, 3922)
MPIR_executable_path: NULL
MPIR_server_arguments: NULL
[andromeda.di.unipi.it:03920] procdir: /tmp/openmpi-sessions-lottarin@andromeda.di.unipi.it_0/18136/1/1
[andromeda.di.unipi.it:03920] jobdir: /tmp/openmpi-sessions-lottarin@andromeda.di.unipi.it_0/18136/1
[andromeda.di.unipi.it:03920] top: openmpi-sessions-lottarin@andromeda.di.unipi.it_0
[andromeda.di.unipi.it:03920] tmp: /tmp
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_recv: received sync+nidmap from local proc [[18136,1],1]
[andromeda.di.unipi.it:03919] procdir: /tmp/openmpi-sessions-lottarin@andromeda.di.unipi.it_0/18136/1/0
[andromeda.di.unipi.it:03919] jobdir: /tmp/openmpi-sessions-lottarin@andromeda.di.unipi.it_0/18136/1
[andromeda.di.unipi.it:03919] top: openmpi-sessions-lottarin@andromeda.di.unipi.it_0
[andromeda.di.unipi.it:03919] tmp: /tmp
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_recv: received sync+nidmap from local proc [[18136,1],0]
[andromeda.di.unipi.it:03920] [[18136,1],1] node[0].name andromeda daemon 0
[andromeda.di.unipi.it:03919] [[18136,1],0] node[0].name andromeda daemon 0
[andromeda.di.unipi.it:03922] procdir: /tmp/openmpi-sessions-lottarin@andromeda.di.unipi.it_0/18136/1/3
[andromeda.di.unipi.it:03922] jobdir: /tmp/openmpi-sessions-lottarin@andromeda.di.unipi.it_0/18136/1
[andromeda.di.unipi.it:03922] top: openmpi-sessions-lottarin@andromeda.di.unipi.it_0
[andromeda.di.unipi.it:03922] tmp: /tmp
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_recv: received sync+nidmap from local proc [[18136,1],3]
[andromeda.di.unipi.it:03921] procdir: /tmp/openmpi-sessions-lottarin@andromeda.di.unipi.it_0/18136/1/2
[andromeda.di.unipi.it:03921] jobdir: /tmp/openmpi-sessions-lottarin@andromeda.di.unipi.it_0/18136/1
[andromeda.di.unipi.it:03921] top: openmpi-sessions-lottarin@andromeda.di.unipi.it_0
[andromeda.di.unipi.it:03921] tmp: /tmp
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_recv: received sync+nidmap from local proc [[18136,1],2]
[andromeda.di.unipi.it:03922] [[18136,1],3] node[0].name andromeda daemon 0
[andromeda.di.unipi.it:03921] [[18136,1],2] node[0].name andromeda daemon 0
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_cmd: received message_local_procs
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_cmd: received message_local_procs
Hello world from process 1 of 4
Hello world from process 3 of 4
Hello world from process 0 of 4
Hello world from process 2 of 4
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_cmd: received message_local_procs
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_recv: received sync from local proc [[18136,1],1]
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_recv: received sync from local proc [[18136,1],3]
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_recv: received sync from local proc [[18136,1],0]
[andromeda.di.unipi.it:03920] sess_dir_finalize: proc session dir not empty - leaving
[andromeda.di.unipi.it:03922] sess_dir_finalize: proc session dir not empty - leaving
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_recv: received sync from local proc [[18136,1],2]
[andromeda.di.unipi.it:03919] sess_dir_finalize: proc session dir not empty - leaving
[andromeda.di.unipi.it:03921] sess_dir_finalize: proc session dir not empty - leaving
**LAGS HERE after having received sync from all processes**
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_cmd: received waitpid_fired cmd
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_cmd: received iof_complete cmd
[andromeda.di.unipi.it:03918] sess_dir_finalize: proc session dir not empty - leaving
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_cmd: received iof_complete cmd
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_cmd: received waitpid_fired cmd
[andromeda.di.unipi.it:03918] sess_dir_finalize: proc session dir not empty - leaving
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_cmd: received waitpid_fired cmd
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_cmd: received iof_complete cmd
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_cmd: received iof_complete cmd
[andromeda.di.unipi.it:03918] sess_dir_finalize: proc session dir not empty - leaving
[andromeda.di.unipi.it:03918] [[18136,0],0] orted_cmd: received waitpid_fired cmd
[andromeda.di.unipi.it:03918] sess_dir_finalize: proc session dir not empty - leaving
[andromeda.di.unipi.it:03918] sess_dir_finalize: job session dir not empty - leaving
[andromeda.di.unipi.it:03918] [[18136,0],0] Releasing job data for [18136,1]
[andromeda.di.unipi.it:03918] sess_dir_finalize: job session dir not empty - leaving
[andromeda.di.unipi.it:03918] [[18136,0],0] Releasing job data for [18136,0]
[andromeda.di.unipi.it:03918] sess_dir_finalize: proc session dir not empty - leaving
orterun: exiting with status 0 
```

# java - 如何在 GWT 中获取服务器端的所有 ListBox 值

> ID：10980022
> 
> 赞同：1
> 
> 时间：2012-06-11T12:22:03.427
> 
> 标签：java, gwt, servlets, gwt2, formpanel

我正在使用 GWT

3 列表框被添加到容器（verticalPanel）中。容器被添加到 formPanel。

这些列表框有多个值。

在服务器端我有这个代码。

ServletFileUpload 上传 = 新的 ServletFileUpload();

```
 FileItemIterator iterator = upload.getItemIterator(request);
        while (iterator.hasNext()) {
            FileItemStream item = iterator.next();
             stream = item.openStream();

            if (item.isFormField()) {
                log.warning("Got a form field: " + item.getFieldName() + item.getName() + item.);
                System.out.println(" chk  " +item.getFieldName() +"  =  "+ Streams.asString(item.openStream()));

            }else{

                log.warning("Got an uploaded file: " + item.getFieldName()
                        + ", name = " + item.getName());
                fileName = item.getName();
                mimetype = item.getContentType();

            }
        }

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

但我只能得到列表框的第一个值

请告诉我如何获取列表框的所有值

**注意**：我不能通过 RPC 发送列表框，因为这些列表框与要发送到服务器和服务器到外部存储库的文件有关。

有人请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:09:47.247

如果您在运行时向列表框添加值，请管理它后面的列表并将列表框中的值添加到该列表并将该列表传递给服务器。

# asp.net-mvc-3 - 使用 c# 和 razor 引擎在 ASP.NET MVC3 上进行完整页面缓存

> ID：10980024
> 
> 赞同：0
> 
> 时间：2012-06-11T12:22:06.297
> 
> 标签：asp.net-mvc-3, performance, caching

我正在开发基于 ASP.NET MVC3 和 C# 的大型电子商务网站。我想在主页、类别页面、产品列表页面、产品详细信息页面等所有页面上进行全页面缓存。

但我有点困惑如何处理每个客户的购物车、愿望清单等是动态的？

那么建议我如何进行全页缓存？或者有什么建议如何获得更好的性能？我真的很担心网站性能，因为网站包含 10 万个产品并且需要花费大量时间来加载。

现在是时候进行非常积极的缓存了，那么如何做所有这些事情呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:48:25.610

如果**购物车、愿望清单等**被实现为单独的子操作或部分视图，则可以禁用它们的缓存。虽然您可以使用MVC3 中已经存在的**Cache属性启用缓存。**

# c++ - 保存数据指针

> ID：10980026
> 
> 赞同：0
> 
> 时间：2012-06-11T12:22:26.300
> 
> 标签：c++, vector, copy

我有一个函数`uint32_t* getDataP(uint idx);`，我无法访问该函数的代码。我需要实现一个代码，它使用不同的`idx`参数调用函数并将结果保存在向量中。将它保存在`vector<uint32_t>`or中的更好方法是什么`vector<uint32_t*>`？如果我决定将其另存为`vector<uint32_t*> savedData`，则以下实现是否可以？：

```
for (uint i = 0; i < 10;++ i) {
   dataP = getDataP(i);
   savedData.push_back(dataP);
} 
```

我需要执行 dataP 的深层复制吗？或者以上就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:25:54.813

如果你只保存指针，谁来负责清理，你还是图书馆？指向的内存是否在代码的整个生命周期内都可用？

我会说使用vector<uint32_t>，因为它更安全，但我真的不知道你的应用程序在做什么。

你的循环会变成：

```
for (uint i = 0; i < 10;++ i) {
   dataP = getDataP(i);
   savedData.push_back(*dataP);
} 
```

# .net - 应用程序关闭时通知图标保留在系统托盘中

> ID：10980029
> 
> 赞同：7
> 
> 时间：2012-06-11T12:22:30.537
> 
> 标签：.net, notifyicon

我有一个仅从系统托盘运行的应用程序，其唯一目的是通过 Ballon Tips 为用户提供信息。

它运行良好，除了一点小烦恼。当应用程序使用任务管理器（而不是使用上下文菜单）关闭时，图标会一直停留在系统托盘中，直到您将鼠标悬停在它上面，然后当另一个实例打开时，您会在第一个实例旁边看到第二个图标。

我的 Form Closed 事件看起来像这样，它什么也不做：

```
private void frmMain_FormClosed(object sender, FormClosedEventArgs e)
{
    ntfyIcon.Visible = false;
    ntfyIcon.Icon = null;
    ntfyIcon.Visible = false;
    ntfyIcon.Dispose();
} 
```

这[已在 Microsoft Connect 上报告，](http://connect.microsoft.com/VisualStudio/feedback/details/98317/notify-icon-doesnt-go-away-when-your-program-closes)并且已被 Microsoft 关闭，`Won't Fix`因为显然这是应该发生的，但我希望有人有解决方案。

我在想一些关于在应用程序打开时清理系统托盘的事情？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-14T00:53:08.163

`Application.DoEvents()`对我来说，它在设置后`Icon`调用并`null`处理`NotifyIcon`.

```
private void frmMain_FormClosed(object sender, FormClosedEventArgs e)
{
    ntfyIcon.Icon = null;
    ntfyIcon.Dispose();
    System.Windows.Forms.Application.DoEvents();
} 
```

# objective-c - 使用内联块在 NSArray 中搜索对象索引

> ID：10980031
> 
> 赞同：9
> 
> 时间：2012-06-11T12:22:43.000
> 
> 标签：objective-c, nsarray, objective-c-blocks, css

我已经看到了一些使用 NSArray indexOfObjectPassingTest 的示例，但我无法让它们工作（它们不会返回有效的索引）。所以现在我正在尝试使用内联块。我通过 typedef'ing 一个块，然后将它设置为一个属性，合成它，并在构造函数中初始化它来完成它。然而，这种方式会使整个点静音，因为我可以轻松地创建一个方法并使用它（更少的打字，更少的努力）。

我想要达到的目标是：

```
Observations *obs = [self.myAppointment.OBSERVATIONS objectAtIndex: ^NSInteger (NSString *keyword){ 
    for (Observations *obs in self.myAppointment.OBSERVATIONS) {
        if ([obs.TIME isEqualToString:keyword] == YES) return (NSInteger)[self.myAppointment.OBSERVATIONS indexOfObject:obs];
    }
    return (NSInteger)-1;
}]; 
```

但是 Xcode 根本就没有它。我尝试了不同的变体，但将其声明为内联似乎是一个问题，这很奇怪，因为正如我所说，对它进行类型定义、声明和综合是这样的：

```
Observations *obs = [self.myAppointment.OBSERVATIONS objectAtIndex:findObs(keyword)]; 
```

findObs 又是一个定义的块，它做同样的事情。这是语法问题，还是我错过了其他更重要的东西？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-11T12:36:00.613

`-objectAtIndex:`将 an`NSUInteger`作为参数，但您将其传递给一个块（由 表示`^`）。您的第二个示例`findObs`使用参数调用（可能是您的块），将该调用的*结果*`keyword`传递给.*`-objectAtIndex:`*

 *您可能想`-objectAtIndex:`结合`-indexOfObjectPassingTest:`：

```
NSString *keyword = /* whatever */;
NSArray *array = self.myAppointment.OBSERVATIONS;
NSUInteger idx = [array indexOfObjectPassingTest:^(id obj, NSUInteger idx, BOOL *stop){ 
    Observations *obs = (Observations*)obj;
    return [obs.TIME  isEqualToString:keyword];
}];
if (idx != NSNotFound)
    Observations *obs = [array objectAtIndex:idx]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-20T05:56:37.230

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T18:04:42.667

不需要 typedef 或综合任何东西来使您的第二个示例工作 - 只需从方法返回块，它看起来像这样：

```
-(NSUInteger(^)(NSArray *, NSString *))findObs {
    return ^(NSArray *array, NSString *keyword) {
        for (NSUInteger i = 0; i < [array count]; i++) {
            Observations *obs = [array objectAtIndex:i];
            if ([obs.TIME isEqualToString:keyword]) {
                return i;
            }
        }
        return NSNotFound;
    };
}

Observations *obs = [self.myAppointment.OBSERVATIONS objectAtIndex:[self findObs](keyword)]; 
```

以下是将块定义为方法返回值而不是 inline 的一些[充分理由](http://twobitlabs.com/2012/05/block-initialization-for-testability-and-reuse/)。*

# html - 在使用最大宽度的段落中居中图像

> ID：10980033
> 
> 赞同：0
> 
> 时间：2012-06-11T12:22:45.597
> 
> 标签：html, css

我正在尝试将图像集中在我的博客上。

​下面的代码示例说明了博客上使用的 HTML 结构。

不幸的是，它不适用于多张图像，只有一张。多个图像左对齐，我希望它们都居中。我无法从 HTML 结构中添加或删除任何东西（类、跨度等）。有谁知道解决方案的快乐灵魂吗？如果可能的话，我根本不想使用 Javascript，纯 CSS。

### HTML

```
<!DOCTYPE html> 
<html>
<head>
    <title>Centering images</title>
</head>
<body>
    <div id="container">
        <article>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            <p><img src="http://media-cache-ec2.pinterest.com/upload/150166968795197906_SMIa24Vz_f.jpg"></p>
            <p><img src="http://media-cache-ec8.pinterest.com/upload/192528952790461003_uuI48luk_f.jpg"></p>
            <p><img src="http://media-cache-ec7.pinterest.com/upload/7318418115018093_x77QiYNG_f.jpg"></p>
            <p><img src="http://media-cache-ec4.pinterest.com/upload/6262886952319256_ke0nvUiH_f.jpg"></p>
            <p><img src="http://media-cache-ec9.pinterest.com/upload/59883870015686497_9yB48yWs_f.jpg"></p>            
            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </article>
    </div>
</body>
</html>​ 
```

这是CSS：

### CSS

```
#container {
    width: 100%; 
    text-align: left;    
}

p {    
    max-width: 200px; 
    margin: 0 auto;
}

p > img {
    margin: 0 -100%;
} 
```

这是上面显示结果的示例代码的链接：http: [//jsfiddle.net/ttJGk/37/](http://jsfiddle.net/ttJGk/37/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:26:30.967

您只需要`text-align: center;`在包含图像的段落上添加一个。

我添加了这个 CSS 规则：

```
p.image-container {
    text-align:center;
} 
```

这个类到带有图像的段落：

```
<p class="image-container">...</p> 
```

请参阅我更新的 JSFiddle：http: [//jsfiddle.net/ttJGk/41/](http://jsfiddle.net/ttJGk/41/)。

* * *

这是假设您希望图像是全尺寸的，或者至少没有限制它们必须适合 200px`p`标记。如果您希望它们适合这些标签，您可以在`max-width: inherit;`标签中添加一个`img`。您也可以删除`margin: 0 -100%;`.

如果您绝对不能向 HTML 添加任何类，此解决方案也将起作用。请参阅更新的 JSFiddle：http: [//jsfiddle.net/ttJGk/45/](http://jsfiddle.net/ttJGk/45/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:29:29.037

尝试像这样更新您的 css 类

```
p > img {
margin: 0 auto;
width:100%;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:51:08.220

如果您在文章中始终具有这种文本段落结构，那么您可以将所有内容居中对齐并使用伪类`:first-child`和`:last-child`伪类来左对齐文本。

```
#container {
    width: 100%;
    text-align: center;    
}

article p:first-child, article p:last-child{
    text-align: left;
} 
```

请参阅[JSFiddle 示例](http://jsfiddle.net/ttJGk/48/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T13:32:39.190

```
p img {margin:0 auto; display:block;} 
```

这将使段落中的所有图像居中。

# visual-studio-2008 - 发出HTTP请求时的Visual C++编译错误

> ID：10980035
> 
> 赞同：1
> 
> 时间：2012-06-11T12:22:51.087
> 
> 标签：visual-studio-2008, winapi, visual-c++

这里 SendPost() 将向服务器发送 HTTP GET 请求。当我用来编译此代码片段时，它显示“错误 C2275：'HINTERNET'：非法使用这种类型作为表达式”。我在程序的开头包含了“wininet.h”，即使它显示错误。

```
void SendPost(TCHAR *szName, TCHAR *szNumber, YACINFO *yi)
{
TCHAR szText[128], szLogText[256], szFormat[256];
GetDateTimeString(szText, 128);

LoadString(yi->hinst, IDS_INCOMING_CALL_HEADER, szFormat, 256);
_snprintf(szLogText, 256, szFormat, szText);

LoadString(yi->hinst, IDS_LOGFILE_NAME, szFormat, 256);
_snprintf(szLogText, 256, szFormat, szName);

LoadString(yi->hinst, IDS_LOGFILE_NUMBER, szFormat, 256);
_snprintf(szLogText, 256, szFormat, szNumber);

MessageBox(NULL,szNumber,"Status",MB_OK);

HINTERNET hSession = InternetOpen("Utility", 0,NULL, NULL, 0);
HINTERNET hOpenUrl = InternetOpenUrl(hSession,"http://www.ourwebsite.com/index.php?sender=123&&receiver=124&&msgdata=sample SMS today&&recvtime=01:12&&msgid=123458", NULL,0, 1, 1);

if( hOpenUrl == NULL){
//invalid URL
}
InternetCloseHandle(hOpener);
InternetCloseHandle(hSession);
        MessageBox(NULL,"Request Send","Status",MB_OK);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T02:42:16.593

```
HINTERNET hSession = InternetOpen("Utility", 0,NULL, NULL, 0);
HINTERNET hOpenUrl = InternetOpenUrl(hSession,"http://www.ourwebsite.com/index.php?sender=123&&receiver=124&&msgdata=sample SMS today&&recvtime=01:12&&msgid=123458", NULL,0, 1, 1);

if( hOpenUrl == NULL){
//invalid URL
}

InternetCloseHandle(hOpener);
InternetCloseHandle(hSession);
MessageBox(NULL,"Request Send","Status",MB_OK); 
```

我可以在 VS2010 上成功编译这个。我猜这要么是代码格式的问题（例如缺少大括号），要么是其他问题。

# zend-framework - 验证消息出现在表单的第一次加载中

> ID：10980036
> 
> 赞同：1
> 
> 时间：2012-06-11T12:22:54.973
> 
> 标签：zend-framework, zend-form

我有这个问题，当我加载我的表单时，验证消息出现在页面的第一次加载中，我不知道为什么..如果第一次加载操作来自 Get 而不是发帖..我很困惑..

```
public function inscriptionAction() {

    $form = new Application_Form_Inscription ();
    $form->submit->setLabel ( 'Inscription' );
    $this->view->form = $form;      

    if ($this->getRequest ()->isPost ()) {
        $formData = $this->getRequest ()->getPost ();
        if ($form->isValid ( $formData )) {
            // ton form est valide
            // => enregistrement des données
            // => redirection éventuelle
            $nomU = $form->getValue ( 'nomU' );
            $prenomU = $form->getValue ( 'prenomU' );
            $mailU = $form->getValue ( 'mailU' );
            $dateN = $form->getValue ( 'dateN' );
            $civilite = $form->getValue ( 'civilite' );
            $villeU = $form->getValue ( 'villeU' );
            $passW = $form->getValue ( 'passW' );
            $passw2 = $form->getValue ( 'repassW' );
            $recevoirNews = ( int ) $form->getValue ( 'recevoirNews' );
            $utilisateurs = new Application_Model_DbTable_Utilisateurs ();
            $utilisateurs->ajouterUtilisateur ( $nomU, $prenomU, $mailU, $passW, $civilite, $dateN, $recevoirNews, $villeU );

            $this->_helper->redirector ( 'index' );

        } else {
            // ton form est invalide
            // réinjecte les valeurs saisies par l'user
            // nouvel affichage du formulaire
            $form->populate ( $formData );
        }
    } else {
        // initialisation et 1er affichage du formulaire

    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T07:01:43.067

通过 GET 首次加载出现在页面上的表单没有任何问题。

也许最后一个 else 块（“// initialisation et 1er affichage du formulaire”）中有一些东西触发了验证？

我通常的表单生成/显示/提交流程没有明确调用`$form->populate($formData)`；调用`$form->isValid($formData)`为我做到了。

我的流程通常如下所示：

```
public function myAction()
{
    $form = new My_Form();
    $form->setDefaults(array(
        // any defaults I need to set
    ));
    if ($this->_request->isPost()){
        if ($form->isValid($this->_request->getPost()){
            $formData = $form->getValues();
            // now write the data
        }
    }
    $this->view->form = $form;
} 
```

# php - 在 PHP 中打印时从 MySQL 字段中替换值

> ID：10980041
> 
> 赞同：1
> 
> 时间：2012-06-11T12:23:12.783
> 
> 标签：php, variables, date, while-loop

我有一个数据库表，其中包含“名称”（事件）和“日”（完整，所以：“星期一，'星期二'等）。在`while`循环中显示一个事件，然后在括号中显示其日期是非常简单的。

有没有办法系统地将每一天替换为下一天的日期？所以星期一是 6 月 11 日，星期二是 6 月 12 日，以此类推。

我已经尝试过这些方面的东西，但是对于“名称”的每一行，变量都保持不变——回想起来，这是有道理的。

```
$today = date("l");
$todays_date = date("j M");

if ($row['day'] == $today) {
    $date = $todays_date;
    }

else if (day == date("l", strotime("+1 day")) {
    $date = date("j M", strotime("+1 day"));
    }

echo "<option>" . $row['name'] . " (" . $date . ")</option>"; 
```

**编辑**

这是我现在拥有的：

```
function getClubs() {
connect();

date_default_timezone_set('Europe/London');

$day = date("l");
$time = date("G");

if ($time >= 21) {
    $day = date('l', strtotime($day .' +1 day'));
    }

if ($day == Monday) {
    $query = "SELECT * FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY')";
    }

else if ($day == Tuesday) {
    $query = "SELECT name FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY')";
    }

else if ($day == Wednesday) {
    $query = "SELECT name FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY')";
    }

else if ($day == Thursday) {
    $query = "SELECT name FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY')";
    }

else if ($day == Friday) {
    $query = "SELECT name FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY')";
    }

else if ($day == Saturday) {
    $query = "SELECT name FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY')";
    }

else if ($day == Sunday) {
    $query = "SELECT name FROM nights WHERE city = 'Cambridge' ORDER BY FIELD(day, 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY')";
    }

    $result = mysql_query($query);
    $items = array();

    if($result && mysql_num_rows($result) > 0) { 
        while ($row = mysql_fetch_array($result)) { 
//          $items[] = array($row['name']);

$day = $row['day'];

function getDateString($day){
    if (date("l")==$day){
        return date("j M");
    }
    else {
        $date = strtotime("next $day");
        return date("j M",$date);
    }
}

            echo "<option>" . $row['name'] . " (" . getDateString($row['day']) . ")</option>";

            }         
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:30:09.703

您可以使用[strtotime()](http://uk3.php.net/strtotime)来获取此信息，例如：

```
$date = strtotime('next tuesday'); 
```

然后，您将使用[date()](http://php.net/manual/en/function.date.php)将其转换为字符串（例如 12 Jun）：

```
date("j M",$date); 
```

此外，如果事件是今天，并且您希望它显示当前日期，您将添加一些检查代码，因此所有这些都作为一个函数：

```
function getDateString($day){
    if (date("l")==$day){
       return date("j M");
    } else {
       $date = strtotime("next $day");
       return date("j M",$date);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:27:50.593

`$dayDates`如果`$beginDate`是星期一，这会将日期置于星期一。这是你想要的？

```
$daysoftheweek = array(0 => 1);

while($beginDate <= $endDate)
{
    if(in_array(date('N', $beginDate), $daysOfTheWeek))
    {
        $dayDates[] = date('Y-m-d', $beginDate);
    }

    $beginDate = strtotime("+1 day", $beginDate);
} 
```

# c# - 从特定字段 lucene.net 获取可用值

> ID：10980042
> 
> 赞同：0
> 
> 时间：2012-06-11T12:23:23.563
> 
> 标签：c#, lucene.net

例如，如果我的 lucene 索引中有一个名为“color”的字段。当然，它的价值是不同的。

然后我有一个带有下拉列表的“高级搜索页面”，在该下拉列表中，我想显示“颜色”字段包含的所有可用值（不同的）。

Lucene 版本是 Version.LUCENE_29。

编辑：找到解决方案，[在 lucene .net 中查找字段的所有可用值](https://stackoverflow.com/questions/7327375/find-all-available-values-for-a-field-in-lucene-net)

```
 private List<string> GetAvailableFields(string fieldName)
   {
       List<string> fieldValues;

       using (var readerRepository = new LucineRepository(RepositoryPath))
       {
           var reader = readerRepository.Reader;
           fieldValues = reader.UniqueTermsFromField(fieldName).ToList(); 
           reader.Close();
       }

       return fieldValues;
   }

public static class ReaderExtentions
{
    public static IEnumerable<string> UniqueTermsFromField(this IndexReader reader, string field)
    {
        var termEnum = reader.Terms(new Term(field));

        do
        {
            var currentTerm = termEnum.Term();

            if (currentTerm.Field() != field)
                yield break;

            yield return currentTerm.Text();
        } while (termEnum.Next());
    }
} 
```

干杯，汤米。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:29:50.093

Lucene 不提供“独特”的功能。

你必须编写自己的代码来实现这一点

你可以试试下面的代码片段：

```
var document = new Document();
document.Add(new Field("color", "foo", Field.Store.YES, Field.Index.NOT_ANALYZED));
...

TermEnum terms = indexReader.Terms(new Term("color"));
// enumerate the colors 
```

# xslt - 使用 xslt 连接来自不同 xpath 的数据

> ID：10980047
> 
> 赞同：1
> 
> 时间：2012-06-11T12:23:42.237
> 
> 标签：xslt

我正在尝试使用 XSLT 进行 xml 转换。我有以下xml：

```
<myxml>
<dataType1>
    <value1>
        A1
    </value1>
    <value2>
        A2
    </value2>
</dataType1>
<dataType1>
    <value1>
        B1
    </value1>
    <value2>
        B2
    </value2>
</dataType1>
<dataType2>
    <value1>
        A1
    </value1>
    <value3>
        A3
    </value3>
</dataType2>
<dataType2>
    <value1>
        B1
    </value1>
    <value3>
        B3
    </value3>
</dataType2> 
```

每个 datatype2 都有一个元素 value1，它是 datatype2 中的外键，所以我必须根据 value1 映射这个数据。

如果存在 value1=A1 的 dataType1 和 value1=A1 的 dataType2 ，那么我必须使用 value2 和 value3 的值创建一个 xml，因此结果如下：

```
<resultxml>
<data>
    <value2>
        A2
    </value2>
    <value3>
        A3
    </value3>
</data>
<data>
    <value2>
        B2
    </value2>
    <value3>
        B3
    </value3>
</data> 
```

我考虑过在读取 dataType1 时动态创建变量，然后在读取 datatype2 时调用它们，但正如我在某些论坛上读到的那样，这是不可能的，所以我的问题是：可以按照我的解释进行吗？如果是，这是我必须遵循的方法（欢迎举例）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:40:16.880

这是一个 XSLT 2.0 样式表：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

  <xsl:key name="k1" match="dataType2" use="normalize-space(value1)"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* , node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="dataType1[key('k1', value1)]">
    <data>
      <xsl:apply-templates select="node() except value1, key('k1', normalize-space(value1))/*[not(self::value1)]"/>
    </data>
  </xsl:template>

  <xsl:template match="dataType1[not(key('k1', normalize-space(value1)))] | dataType2"/>

</xsl:stylesheet> 
```

当上述样式表应用于输入时

```
<myxml>
<dataType1>
    <value1>
        A1
    </value1>
    <value2>
        A2
    </value2>
</dataType1>
<dataType1>
    <value1>
        B1
    </value1>
    <value2>
        B2
    </value2>
</dataType1>
<dataType2>
    <value1>
        A1
    </value1>
    <value3>
        A3
    </value3>
</dataType2>
<dataType2>
    <value1>
        B1
    </value1>
    <value3>
        B3
    </value3>
</dataType2>
</myxml> 
```

使用 Saxon 9.4 那么结果是

```
<?xml version="1.0" encoding="UTF-8"?><myxml>
<dataType1>
    <value1>
        A1
    </value1>
    <value2>
        A2
    </value2>
</dataType1>
<dataType1>
    <value1>
        B1
    </value1>
    <value2>
        B2
    </value2>
</dataType1>

</myxml> 
```

在 XSLT 1.0 中，您不能在匹配模式中使用键，因此需要更多代码，稍后我将添加一个示例。

[编辑] 这是一个 XSLT 1.0 样式表：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

  <xsl:key name="k1" match="dataType2" use="normalize-space(value1)"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="dataType1">
    <xsl:variable name="refs" select="key('k1', normalize-space(value1))"/>
    <xsl:if test="$refs">
      <data>
        <xsl:apply-templates select="node()[not(self::value1)] | $refs/*[not(self::value1)]"/>
      </data>
    </xsl:if>
  </xsl:template>

  <xsl:template match="dataType2"/>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:16:39.510

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kType1" match="dataType1" use="normalize-space(value1)"/>

 <xsl:template match="dataType2[key('kType1', normalize-space(value1))]">
     <data>
       <value2>
         <xsl:value-of select="key('kType1', normalize-space(value1))/value2"/>
       </value2>
       <xsl:copy-of select="value3"/>
     </data>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<myxml>
    <dataType1>
        <value1>
        A1
        </value1>
        <value2>
        A2
        </value2>
    </dataType1>
    <dataType1>
        <value1>
        B1
        </value1>
        <value2>
        B2
        </value2>
    </dataType1>
    <dataType2>
        <value1>
        A1
        </value1>
        <value3>
        A3
        </value3>
    </dataType2>
    <dataType2>
        <value1>
        B1
        </value1>
        <value3>
        B3
        </value3>
    </dataType2>
</myxml> 
```

**产生想要的正确结果**：

```
<data>
   <value2>
        A2
   </value2>
   <value3>
        A3
   </value3>
</data>
<data>
   <value2>
        B2
   </value2>
   <value3>
        B3
   </value3>
</data> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T12:45:10.203

我的提议

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output method="xml" encoding="UTF-8" indent="no" />
    <xsl:template match="/">
        <resultxml>
            <xsl:for-each select="/myxml/dataType1">
                <xsl:variable name="fk" select="value1" />
                <data>
                    <xsl:copy-of select="value2" />
                    <xsl:copy-of select="/myxml/dataType2[value1 = $fk]/value3" />
                </data>
            </xsl:for-each>
        </resultxml>
    </xsl:template>
</xsl:stylesheet> 
```

# c# - 防止wpf窗口挂起

> ID：10980050
> 
> 赞同：1
> 
> 时间：2012-06-11T12:24:06.437
> 
> 标签：c#, wpf, freeze

很抱歉创建另一个主题，因为我的问题不具体，也不准确导致线程被关闭和删除。

我有一个聊天应用程序，我希望我的应用程序在聊天对话的文本块每秒刷新一次以检索当前对话时不挂起。如何防止我的应用程序每秒停止和恢复？我实际上使用了谷歌，但作为回报，我没有找到具体的答案。这是我的代码：

```
 public MainWindow()
    {
        InitializeComponent();
        timerChatRefresh = new DispatcherTimer();
        timerChatRefresh.Interval = new TimeSpan(0, 0, 1);
        timerChatRefresh.IsEnabled = false;
        timerChatRefresh.Tick += new EventHandler(timerChatRefresh_Tick);
        timerChatRefresh.Start();
    }

    void timerChatRefresh_Tick(object sender, EventArgs e)
    {
        ChatRefresh();
    }

    private void ChatRefresh()
    {
        conn = new MySqlConnection("Server=...; Database=...; Uid=...; Password=...;");
        ds.Clear();
        textBlockChatArea.Text = "";
        da.SelectCommand = conn.CreateCommand();
        da.SelectCommand.CommandText = "select * from chatmessagetbl";
        da.SelectCommand.CommandType = CommandType.Text;
        da.Fill(ds, "chatmessagetbl");
        foreach (DataRow item in ds.Tables["chatmessagetbl"].Rows)
        {
            textBlockChatArea.Text += item["username"].ToString() + ": " + item["message"].ToString() + "\n";
        }
        conn.Dispose();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:29:16.437

尝试使用并行任务作为后台工作者或线程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T12:41:20.347

您将需要在不是 UI 线程的线程上更新文本框。

```
 Thread chatRefreshTimer;

    void StartChat()
    {
        chatRefreshTimer = new Thread(new ThreadStart(ChatRefresh));
        chatRefreshTimer.Start();
    }

    void ChatRefresh()
    {
        conn = new MySqlConnection("Server=...; Database=...; Uid=...; Password=...;");
        ds.Clear();
        da.SelectCommand = conn.CreateCommand();
        da.SelectCommand.CommandText = "select * from chatmessagetbl";
        da.SelectCommand.CommandType = CommandType.Text;

        while (true)
        {
            da.Fill(ds, "chatmessagetbl");
            textBlockChatArea.Text = "";

            foreach (DataRow item in ds.Tables["chatmessagetbl"].Rows)
            {
                //This has to be done on the thread that owns the textbox.
                textBlockChatArea.Dispatcher.BeginInvoke(new Action(() =>
                    {
                        textBlockChatArea.Text += item["username"].ToString() + ": " + item["message"].ToString() + "\n";
                    }));
            }
            Thread.Sleep(TimeSpan.FromSeconds(1));
        }
        conn.Dispose();
    } 
```

我提供的代码不是很干净，它并不是您可以复制和粘贴的最终解决方案（尽管它可能会起作用），它只是为了帮助您朝着正确的方向前进并展示给您一个可以通过线程完成的方式。

**编辑**

为了尝试澄清我在评论中关于使用列表控件而不是文本框的观点，我添加了以下伪程序来尝试解释我的意思。

```
// Each row returned from the database will be converted in to one of these.
     public class ChatEntry
        {
            public string UserName { get; set; }
            public string Message { get; set; }
            public int MessageID { get; set; }
        }

// You will need to introduce a MessageID field to your database to make this method work.
    public partial class MainWindow : Window
    {
        public ObservableCollection<ChatEntry> Entries
        {
            get { return (ObservableCollection<ChatEntry>)GetValue(EntriesProperty); }
            set { SetValue(EntriesProperty, value); }
        }

        public static readonly DependencyProperty EntriesProperty = DependencyProperty.Register("Entries", typeof(ObservableCollection<ChatEntry>), typeof(MainWindow), new UIPropertyMetadata(null));

        // This will be used to make sure that only new entries are added to the chat log.
        int lastMessageID;

        // This will be used to call UpdateEntries every second.
        Thread updateThread;

        public MainWindow()
        {
            Entries = new ObservableCollection<ChatEntry>();

            InitializeComponent();

            updateThread = new Thread(new ThreadStart(UpdateEntries));
            updateThread.Start();
        }

        void UpdateEntries()
        {
            while (true)
            {

                // Prepare your query to gather messages from the message table
                // with MessageID > lastMessageID.

                // This bit needs to be done on the UI dispatcher or it'll cause an exception.
                this.Dispatcher.BeginInvoke(new Action(() =>
                    {
                        // Each row that came back is a new message and can be added to the collection.
                        foreach (var row in rows)
                        {
                            Entries.Add(new ChatEntry()
                            {
                                UserName = (string)row["UserName"],
                                Message = (string)row["Message"],
                            });
                        }
                    }));

                // at this point, the UI will have been upadted with JUST the new entries, no flicker
                // no scrolling to the top each second.

                // just one more thing, we need to set lastMessageID to be the latest messageID 
                // so next time UpdateEntries is called it'll only get the new ones that we don't 
                // have yet.
                lastMessageID = Entries.Max(x => x.MessageID);

                // Sleep for a second to ease the update speed.
                Thread.Sleep(1000);
            }
        }
    } 
```

要将列表框绑定到新的 Entries 属性，您可以在 XAML 中执行类似的操作。

```
<Window x:Class="WpfApplication5.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        >
    <ListView ItemsSource="{Binding Entries}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Name}" Margin="0,0,5,0" FontWeight="Bold" />
                    <TextBlock Text="{Binding Message}" />
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</Window> 
```

# iphone - 无法解决将 iPhone xib 转换为 ipad xib 的问题

> ID：10980053
> 
> 赞同：0
> 
> 时间：2012-06-11T12:24:11.983
> 
> 标签：iphone, ios4, ios5, xcode4.2

请指出我是否遗漏了什么？我有一个“宇宙”类型的项目。它适用于 iPhone。

我应用以下步骤来获取 iPad 版本。

```
1)  duplicate the .xib.
2) Open source Code mode { xib file} and do the followings.
    a) changed <archive type="com.apple.InterfaceBuilder3.CocoaTouch.XIB" version="8.00">
       to
       <archive type="com.apple.InterfaceBuilder3.CocoaTouch.iPad.XIB" version="8.00">

b) replaced IBCocoaTouchFramework  with IBIPadFramework
c) changed the resolution of IBUIView to 
        <string key="NSFrame">{{0, 20}, {768, 1024}}</string> 
```

现在，当我执行时，我仍然看到输出，好像 iPhone xib 嵌入到 iPad 视图中？

我错过了什么吗？请指出我正在做的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:54:31.040

一些如何通过更改主视图的协调来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:35:09.410

您还应该更改该类中使用的所有控件的坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:59:32.710

我有同样的问题，在我的情况下，**从 FolderOption 重新打开 Xib** 并删除了再次重复的 ~iPad.XIb 文件，这次替换了整个**存档类型**而不是添加 .iPad，**InterfaceBuilder3 和 CocoaTouch 之间不应该有任何空间**

# javascript - 幽灵场没有取消幽灵

> ID：10980055
> 
> 赞同：0
> 
> 时间：2012-06-11T12:24:15.190
> 
> 标签：javascript, html, forms, post, drop-down-menu

所以我有一个小问题：我在它旁边创建了一个下拉菜单和一个文本字段。下拉菜单中只有一个选项会导致文本字段取消显示。可以这么说，所有其他选择都应该导致文本字段锁定。

下面的代码：

```
</td> <td><select name="employee_type" onchange="document.getElementById('otherField').disabled=(this.value == 1, 2)">
<option value=0>Temporary</option>
<option value=1>Regular</option>
<option value=2>Special Access User</option> 
```

```
<input id="otherField" type="text" name="date_expires_input" value="YYYY/MM/DD" style="color:#aaa; font-style:italic;" onclick="this.value=''; this.style.color='#000'; this.style.fontStyle='normal';" />
        </tr> 
```

确实这样做。但是，如果用户选择“临时”*然后*改变主意选择“常规”，则该字段将保持为幻影。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:28:34.110

怎么样

```
<select name="employee_type" onchange="document.getElementById('otherField').disabled=(this.value != 0)"> 
```

? 反过来说……你不能说`this.value == 1, 2`，你就不得不说`this.value == 1 || this.value == 2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:27:15.190

你的情况应该是

```
document.getElementById('otherField').disabled = (this.value == 1 || this.value == 2) 
```

# jquery - 更改超链接内的子字符串颜色

> ID：10980056
> 
> 赞同：0
> 
> 时间：2012-06-11T12:24:16.537
> 
> 标签：jquery, css

我在一个看起来像这样的页面上有多个链接

```
<a class="ui-corner-all" tabindex="-1">20 | 11-APRIL-2012 | 349 | MDP | MR ABC, | Street 4 ,abc@example.com,</a> 
```

我想将 MR ABC 的颜色更改为红色...任何 jquery 选择器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:29:02.487

要突出显示文本，您可以使用 inner `span`：

```
​$("a.ui-corner-all").html(function(i, val) {
    return val.replace(/(MR ABC)/, "<span style='color: #ff0000'>$1</span>");
})​​​;​ 
```

**演示：http:** [//jsfiddle.net/qY4M7/](http://jsfiddle.net/qY4M7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:39:18.890

```
jQuery('a.ui-corner-all').html(function(index, value) {
    return value.replace(new RegExp('(MR ABC)', "g"), "<span class='highlight'>$1</span>");
}); 
```

在你的 CSS 上：

```
span.highlight {
    color: #00FF0F
} 
```

你可以看到它在[这里](http://jsfiddle.net/mx5T6/3/)工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:32:10.970

看看这个**[Wrap a span around a word in jQuery](https://stackoverflow.com/questions/300129/how-do-i-wrap-a-span-around-a-section-of-text-in-javascript)**吗？

基本上，您可以使用 jQuery 搜索高亮插件或编写自己的小函数来查找子字符串并将其包装在 a 中`span`，然后对其应用 css 样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T12:27:45.953

是否考虑将所需的文本包装在`span`标签中并为其添加 css 规则？

`a.ui-corner-all span {color: red;}`

# regex - 使用模糊正则表达式过滤器时查找相关度

> ID：10980057
> 
> 赞同：0
> 
> 时间：2012-06-11T12:24:19.493
> 
> 标签：regex

我最近回答了一个问题，在它的评论部分从另一个用户那里得到了一个我无法回答的问题。

[即使代码拼写错误也能搜索产品](https://stackoverflow.com/questions/10947357/searching-for-a-product-even-if-code-is-misspelled/10951856#10951856)

给定一个将使用正则表达式过滤“大型”数据源的模糊搜索参数，您将如何为“相关性”或“最佳匹配”分配值？

过滤器将正常工作，但我不知道如何调整它，以便您可以识别哪些值最接近提供的搜索字符串，以及哪些值最远。

在这种情况下，最接近的将是与字符串的完全匹配（假设“+”字符不存在，仍然匹配的任何内容都是最接近的）。最远的，即最差的匹配将完全相反，最大数量的不匹配字符。

为了避免争论，我们假设正在使用的模糊搜索在搜索模式中使用了“+”和“*”的混合。`X+HG*UPO+Z*`或类似的规定。

目标是避免使用字符串长度比较。在我回答的问题中，数据几乎可以保证总是相同的长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:05:17.520

您可以计算[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)或类似的东西。[维基百科上的近似字符串匹配](http://en.wikipedia.org/wiki/Approximate_string_matching)可能会有所帮助。

# asp.net - 加载页面时出现此代码问题

> ID：10980059
> 
> 赞同：1
> 
> 时间：2012-06-11T12:24:23.787
> 
> 标签：asp.net, html, iis

我将此页面和我的根目录的内容从一台服务器移动到另一台服务器，当我尝试加载以下页面时，出现以下错误。有任何想法吗？

**配置错误**

***说明：***处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

***解析器错误消息：***使用注册为`allowDefinition='MachineToApplication'`超出应用程序级别的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。

***源错误：***

> **第 24 行：** 在开发过程中。
> 
> **第 25 行：** `-->`
> 
> **第 26 行：** `<siteMap defaultProvider="XmlSiteMapProvider" enabled="true">`
> 
> **第 27 行：** `<providers>`
> 
> **第 28 行：** `<clear/>`
> 
> **源文件：** E:\Domains\m\mockcourt.org.uk\user\htdocs\mcc\web.config **行：26**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:26:35.227

您的站点未在 IIS 中正确配置。

您需要将您的站点设置为 ISS 中的应用程序。

以下是[IIS 6 的说明](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/b5488995-fa99-460f-96d7-29d1ddcf3fac.mspx?mfr=true)。即使您使用的是不同的版本，这也会让您走上正轨。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T12:32:08.243

您已将您的站点移动到一个**不是该 asp.net 应用程序根**目录的目录中。

仍然配置为运行 asp.net，但您已将所有文件放在子目录而不是根目录中。

所以两个认为你可以这样做，将文件放在正确的根目录中，或者如果你需要在根目录上与其他应用程序一起运行它，在你添加的目录上创建一个新的 asp.net 应用程序。

从您的日志中*可能*这是您必须放置它们的位置：`E:\Domains\m\mockcourt.org.uk\user\htdocs\`而不是此目录“E:\Domains\m\mockcourt.org.uk\user\htdocs\mcc\”，请检查其余目录以找到正确的目录。

# c# - 使用 Exchange Web 服务在 c# 中获取特定日期的电子邮件

> ID：10980069
> 
> 赞同：7
> 
> 时间：2012-06-11T12:24:39.740
> 
> 标签：c#, exchangewebservices

我能够根据主题从邮箱中获取电子邮件。我不确定根据接收日期获取电子邮件的格式是什么？

```
 string message = string.Empty;
            Item item = Item.Bind(exService, messageID, PropertySet.FirstClassProperties);

            if (item is EmailMessage)
            {
                EmailMessage em = (EmailMessage)item;

                string strMsg = string.Empty;
                //strMsg = strMsg + item.Id.ToString();
                //strMsg = strMsg + item.DateTimeReceived;
                strMsg = strMsg + "*********************** New Fiscal Email received on " + item.DateTimeReceived  +" ************************************" + Environment.NewLine;

                if (em.Body.Text.Contains("BRANDON"))
                {
                    strMsg = strMsg + em.Body.Text.ToString();
                }
                strMsg = strMsg + "*********************** End of Email Body ************************************" + Environment.NewLine;
                message = strMsg;

            } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-06T13:31:34.857

我认为 SilverNinja 告诉你的方式是正确的方式。您应该像这样搜索项目：

```
DateTime searchdate = new DateTime (2012,7,6) //Year, month, day
SearchFilter greaterthanfilter = new SearchFilter.IsGreaterThanOrEqualTo(ItemSchema.DateTimeReceived, searchdate );
SearchFilter lessthanfilter = new SearchFilter.IsLessThan(ItemSchema.DateTimeReceived, searchdate.AddDays(1));
SearchFilter filter = new SearchFilter.SearchFilterCollection(LogicalOperator.And, greaterthanfilter, lessthanfilter);
Folder folder = Folder.Bind(this.m_Service, WellKnownFolderName.MsgFolderRoot); //Or the folder you want to search in
FindItemsResults<Item> results = folder.FindItems(filter, new ItemView(1000)); 
```

“results.Items”将返回您正在寻找的当天收到的前 1000 个项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T16:28:48.830

看看[`SearchFilter`例子](http://msdn.microsoft.com/en-us/library/dd633659%28v=exchg.80%29.aspx)。你只需要一个过滤条件[`ItemSchema.DateTimeReceived`](http://msdn.microsoft.com/en-us/library/microsoft.exchange.webservices.data.itemschema.datetimereceived%28v=exchg.80%29.aspx)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-20T05:26:14.207

这将起作用。

```
if (em.DateTimeReceived.Equals(**Date you want to search**))
                {
                    strMsg = strMsg + em.Body.Text.ToString();
                } 
```

# c++ - 有没有办法控制 MinGW 中的所有三个子应用程序管道，即 STDOUT、STDIN 和 STDERR？

> ID：10980071
> 
> 赞同：0
> 
> 时间：2012-06-11T12:24:46.250
> 
> 标签：c++, winapi, mingw, pipe

我在任何地方都找不到工作示例。MinGW 有`_popen()`，但他们说它是通过 windows API 实现的，所以应该是可能的。但我能找到的所有示例都是针对 VisualC++ 或其他一些较新的语言，如 C# 等。

例如，我尝试为另一个程序制作一个包装器，该程序将以红色显示所有标准错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:45:29.813

在您的情况下，`popen`还不够好，您必须使用[`pipe`](http://linux.die.net/man/2/pipe)创建文件句柄，[`fork`](http://linux.die.net/man/2/fork)创建新进程，[`close`](http://linux.die.net/man/2/close)关闭子进程中的旧`FILENO_STDIN`/ ，并将管道复制到新/ ，最后一个启动新程序的功能。`FILENO_STDOUT`[`dup2`](http://linux.die.net/man/2/dup2)`FILENO_STDIN``FILENO_STDOUT`[`exec`](http://linux.die.net/man/3/exec)

换句话说，您基本上必须重新实现该`popen`功能。

也很常见，网上也有很多例子。

# hbase - hbase ClassNotFoundException

> ID：10980072
> 
> 赞同：3
> 
> 时间：2012-06-11T12:24:48.737
> 
> 标签：hbase, classnotfoundexception

我想运行一个 map reduce 示例：

```
 package my.test;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;

import org.apache.commons.cli.BasicParser;
import org.apache.commons.cli.CommandLine;
import org.apache.commons.cli.CommandLineParser;
import org.apache.commons.cli.HelpFormatter;
import org.apache.commons.cli.Options;
import org.apache.commons.cli.ParseException;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.hbase.client.Put;
import org.apache.hadoop.hbase.io.ImmutableBytesWritable;
import org.apache.hadoop.hbase.mapreduce.MultiTableOutputFormat;
import org.apache.hadoop.hbase.util.Bytes;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.io.Writable;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;
import org.apache.log4j.Logger;

    /**
     * This class demonstrates the use of the MultiTableOutputFormat class.
     * Using this class we can write the output of a Hadoop map reduce program
     * into different HBase table.
     *
     * @version 1.0 19 Jul 2011
     * @author  Wildnove
     */
    public class TestMultiTable extends Configured implements Tool {

        private static final Logger LOG = Logger.getLogger(TestMultiTable.class);
        private static final String CMDLINE = "com.wildnove.tutorial.TestMultiTable <inputFile> [-n name] [-s]";

        public static void main(String[] args) throws Exception {
            int res = ToolRunner.run(new TestMultiTable(), args);
            System.exit(res);
        }

        @Override
        public int run(String[] args) throws Exception {
            HelpFormatter help = new HelpFormatter();
            Options options = new Options();
            options.addOption("h", "help", false, "print program usage");
            options.addOption("n", "name", true, "sets job name");
            CommandLineParser parser = new BasicParser();
            CommandLine cline;
            try {
                cline = parser.parse(options, args);
                args = cline.getArgs();
                if (args.length < 1) {
                    help.printHelp(CMDLINE, options);
                    return -1;
                }
            } catch (ParseException e) {
                System.out.println(e);
                e.printStackTrace();
                help.printHelp(CMDLINE, options);
                return -1;
            }

            String name = null;
            try {
                if (cline.hasOption('n'))
                    name = cline.getOptionValue('n');
                else
                    name = "wildnove.com - Tutorial MultiTableOutputFormat ";
                Configuration conf = getConf();
                FileSystem fs = FileSystem.get(conf);
                Path inputFile = new Path(fs.makeQualified(new Path(args[0])).toUri().getPath());
                if (!getMultiTableOutputJob(name, inputFile).waitForCompletion(true))
                    return -1;
            } catch (Exception e) {
                System.out.println(e);
                e.printStackTrace();
                help.printHelp(CMDLINE, options);
                return -1;
            }
            return 0;
        }

        /**
         * Here we configure our job to use MultiTableOutputFormat class as map reduce output.
         * Note that we use 1 reduce only for debugging purpose, but you can use more than 1 reduce.
         */
        private Job getMultiTableOutputJob(String name, Path inputFile) throws IOException {
            if (LOG.isInfoEnabled()) {
                LOG.info(name + " starting...");
                LOG.info("computing file: " + inputFile);
            }
            Job job = new Job(getConf(), name);
            job.setJarByClass(TestMultiTable.class);
            job.setMapperClass(Mapper.class);
            job.setMapOutputKeyClass(Text.class);
            job.setMapOutputValueClass(Text.class);
            FileInputFormat.addInputPath(job, inputFile);
            job.setOutputFormatClass(MultiTableOutputFormat.class);
            job.setNumReduceTasks(1);
            job.setReducerClass(Reducer.class);

            return job;
        }

        private static class Mapper extends org.apache.hadoop.mapreduce.Mapper<LongWritable, Text, Text, Text> {

            private Text outKey = new Text();
            private Text outValue = new Text();

            /**
             * The map method splits the csv file according to this structure
             * brand,model,size (e.g. Cadillac,Seville,Midsize) and output all data using
             * brand as key and the couple model,size as value.
             */
            @Override
            public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
                String[] valueSplitted = value.toString().split(",");
                if (valueSplitted.length == 3) {
                    String brand = valueSplitted[0];
                    String model = valueSplitted[1];
                    String size = valueSplitted[2];

                    outKey.set(brand);
                    outValue.set(model + "," + size);
                    context.write(outKey, outValue);
                }
            }
        }

        private static class Reducer extends org.apache.hadoop.mapreduce.Reducer<Text, Text, ImmutableBytesWritable, Writable> {

            /**
             * The reduce method fill the TestCars table with all csv data,
             * compute some counters and save those counters into the TestBrandsSizes table.
             * So we use two different HBase table as output for the reduce method.
             */
            @Override
            protected void reduce(Text key, Iterable<Text> values, Context context) throws IOException, InterruptedException {
                Map<String, Integer> statsSizeCounters = new HashMap<String, Integer>();
                String brand = key.toString();
                // We are receiving all models,size grouped by brand.
                for (Text value : values) {
                    String[] valueSplitted = value.toString().split(",");
                    if (valueSplitted.length == 2) {
                        String model = valueSplitted[0];
                        String size = valueSplitted[1];

                        // Fill the TestCars table
                        ImmutableBytesWritable putTable = new ImmutableBytesWritable(Bytes.toBytes("TestCars"));
                        byte[] putKey = Bytes.toBytes(brand + "," + model);
                        byte[] putFamily = Bytes.toBytes("Car");
                        Put put = new Put(putKey);
                        // qualifier brand
                        byte[] putQualifier = Bytes.toBytes("brand");
                        byte[] putValue = Bytes.toBytes(brand);
                        put.add(putFamily, putQualifier, putValue);
                        // qualifier model
                        putQualifier = Bytes.toBytes("model");
                        putValue = Bytes.toBytes(model);
                        put.add(putFamily, putQualifier, putValue);
                        // qualifier size
                        putQualifier = Bytes.toBytes("size");
                        putValue = Bytes.toBytes(size);
                        put.add(putFamily, putQualifier, putValue);
                        context.write(putTable, put);

                        // Compute some counters: number of different sizes for a brand
                        if (!statsSizeCounters.containsKey(size))
                            statsSizeCounters.put(size, 1);
                        else
                            statsSizeCounters.put(size, statsSizeCounters.get(size) + 1);
                    }
                }

                for (Entry<String, Integer> entry : statsSizeCounters.entrySet()) {
                    // Fill the TestBrandsSizes table
                    ImmutableBytesWritable putTable = new ImmutableBytesWritable(Bytes.toBytes("TestBrandsSizes"));
                    byte[] putKey = Bytes.toBytes(brand);
                    byte[] putFamily = Bytes.toBytes("BrandSizes");
                    Put put = new Put(putKey);
                    // We can use as qualifier the sizes
                    byte[] putQualifier = Bytes.toBytes(entry.getKey());
                    byte[] putValue = Bytes.toBytes(entry.getValue());
                    put.add(putFamily, putQualifier, putValue);
                    context.write(putTable, put);
                }
            }
        }
    } 
```

使用 Eclipse 选项构建到 jar mt.jar :jar 文件

运行 mapreduce：

> [zhouhh@Hadoop48 ~]$ HADOOP_CLASSPATH= `${HBASE_HOME}/bin/hbase classpath`:`${HADOOP_HOME}/bin/hadoop classpath` ${HADOOP_HOME}/bin/hadoop jar mt.jar cars.csv 12/06/11 20:14:33 INFO test.TestMultiTable: wildnove.com - 教程 MultiTableOutputFormat 开始... 12/06/11 20:14:33 INFO test.TestMultiTable：计算文件：/user/zhouhh/cars.csv 12/06/11 20:14:34 INFO input.FileInputFormat：要处理的总输入路径：1 12/06/11 20:14:34 INFO util .NativeCodeLoader：加载了本机 Hadoop 库 12/06/11 20:14:34 WARN snappy.LoadSnappy：Snappy 本机库未加载 12/06/11 20:14:35 信息 mapred.JobClient：正在运行的作业：job_201206111811_0012 12/ 06/11 20:14:36 信息 mapred.JobClient：映射 0% 减少 0% 12/06/11 20:14:42 信息 mapred.JobClient：任务 ID：尝试_201206111811_0012_m_000002_0，状态：失败 java.lang.RuntimeException：java。 lang.ClassNotFoundException：org.apache.hadoop.hbase.mapreduce。org.apache.hadoop.mapreduce.JobContext.getOutputFormatClass(JobContext.java:235) 的 org.apache.hadoop.mapred.Task 的 org.apache.hadoop.conf.Configuration.getClass(Configuration.java:867) 的 MultiTableOutputFormat。在 org.apache.hadoop.mapred.Child$4.run(Child.java:255) 在 java 的 org.apache.hadoop.mapred.MapTask.run(MapTask.java:353) 初始化(Task.java:513)。 security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:415) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121) at org.apache。 hadoop.mapred.Child.main(Child.java:249) 原因：java.lang.ClassNotFoundException: org.apache.hadoop.hbase.mapreduce.MultiTableOutputFormat at java.net.URLClassLoader$1。在 java.net.URLClassLoader.findClass(URLClassLoader.java:354) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.net.URLClassLoader$1.run(URLClassLoader.java:355) 运行(URLClassLoader.java:366) ) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:423) 在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:356) 在 java .lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:264) at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:820) at org.apache.hadoop .conf.Configuration.getClass(Configuration.java:865)doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:354) at java.lang.ClassLoader.loadClass(ClassLoader.java:423) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java: 308) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:356) 在 java.lang.Class.forName0(Native Method) 在 java.lang.Class.forName(Class.java:264) 在 org.apache.hadoop .conf.Configuration.getClassByName(Configuration.java:820) 在 org.apache.hadoop.conf.Configuration.getClass(Configuration.java:865)doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:354) at java.lang.ClassLoader.loadClass(ClassLoader.java:423) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java: 308) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:356) 在 java.lang.Class.forName0(Native Method) 在 java.lang.Class.forName(Class.java:264) 在 org.apache.hadoop .conf.Configuration.getClassByName(Configuration.java:820) 在 org.apache.hadoop.conf.Configuration.getClass(Configuration.java:865)loadClass(ClassLoader.java:356) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:264) at org.apache.hadoop.conf.Configuration.getClassByName(Configuration. java:820) 在 org.apache.hadoop.conf.Configuration.getClass(Configuration.java:865)loadClass(ClassLoader.java:356) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:264) at org.apache.hadoop.conf.Configuration.getClassByName(Configuration. java:820) 在 org.apache.hadoop.conf.Configuration.getClass(Configuration.java:865)

汽车.csv：

> [zhouhh@Hadoop48 ~]$ cat cars.csv Acura,Integra,Small Acura,Legend,Midsize Audi,90,Compact Audi,100,Midsize BMW,535i,Midsize Buick,Century,Midsize Buick,LeSabre,Large Buick,Roadmaster,大别克,里维埃拉,中型凯迪拉克,德维尔,大凯迪拉克,塞维利亚,中型

MultiTableOutputFormat.class 在 Hbase.0.94.jar

> [zhouhh@Hadoop48 ~]$ echo $HADOOP_CLASSPATH |tr ':' '\n' | grep hbase /home/zhouhh/hbase-0.94.0/conf /home/zhouhh/hbase-0.94.0 /home/zhouhh/hbase-0.94.0/hbase-0.94.0.jar /home/zhouhh/hbase-0.94 .0/hbase-0.94.0-tests.jar /home/zhouhh/hbase-0.94.0/lib/activation-1.1.jar /home/zhouhh/hbase-0.94.0/lib/asm-3.1.jar /home /zhouhh/hbase-0.94.0/lib/avro-1.5.3.jar /home/zhouhh/hbase-0.94.0/lib/avro-ipc-1.5.3.jar /home/zhouhh/hbase-0.94.0 /lib/commons-beanutils-1.7.0.jar /home/zhouhh/hbase-0.94.0/lib/commons-beanutils-core-1.8.0.jar /home/zhouhh/hbase-0.94.0/lib/commons -cli-1.2.jar /home/zhouhh/hbase-0.94.0/lib/commons-codec-1.4.jar /home/zhouhh/hbase-0.94.0/lib/commons-collections-3.2.1.jar /home /zhouhh/hbase-0.94.0/lib/commons-configuration-1.6.jar /home/zhouhh/hbase-0.94.0/lib/commons-digester-1.8.

我已经尝试了很多方法，但同样的错误仍然存​​在。

任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T15:31:52.157

您有两个简单的选择：

1）建立一个胖罐，你的`mt.jar`文件包括`hbase-0.94.0.jar` （可以用`mvn package -Dfatjar`）

2）使用`GenericOptionsParser`（我认为您正在尝试通过实现`Tool`），然后在命令行上指定 -libjars 参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-14T14:27:52.073

我也遇到了同样的问题。我的这篇文章可以正常工作 - [https://my-bigdata-blog.blogspot.in/2017/08/Hbase-Programming-Java-Netbeans-Maven.html](https://my-bigdata-blog.blogspot.in/2017/08/Hbase-Programming-Java-Netbeans-Maven.html) 您需要下面的代码行以及设置 Hadoop_classpath。TableMapReduceUtil.addDependencyJars(job);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-13T12:41:06.787

```
 `hadoop classpath` 
```

和

```
`hbase classpath` 
```

会将集群类路径导出到 HADOOP_CLASSPATH。（是利用集群本地环境的标准方式）。

*   在变量中捕获上面的内容，我们需要使用 Linux 命令进行格式化。`-libjars`如果没有找到您正在寻找的 jar，请将其添加到mapreduce 的选项中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-16T14:31:31.970

我正在使用以下脚本将作业的依赖项添加到 lib 文件夹中，并将 hbase 的依赖项添加到作业的类路径中：

```
cp=$(find `pwd` -name '*.jar' | tr '\n', ',')
cp=$cp$(hbase mapredcp 2>&1 | tail -1 | tr ':' ',')
export HADOOP_CLASSPATH=`echo ${cp} | sed s/,/:/g`
hadoop jar `pwd`/bin/mr.jar \
--libjars ${cp} \
$@ 
```

# java - java - 如何在java中使用AES加密.txt以外的文件？

> ID：10980080
> 
> 赞同：0
> 
> 时间：2012-06-11T12:25:12.217
> 
> 标签：java, encryption, aes

我正在开发一个允许用户加密多个文件的 java 应用程序。我正在使用带有 128 位密钥的 AES。我在这项工作中有以下问题：-

1.  实现的 AES 算法仅适用于 .txt 文件，但不适用于任何其他文件类型，例如 Office 文档、图像等。我的问题是**AES 是否适用于所有类型的数据或仅适用于文本文件？**我搜索了很多，但我发现的所有示例都使用 .txt 文件。

2.  目前我将文件的内容读入一个字符串，然后对其进行加密，然后将加密的字符串写回文件。我的问题是**有没有办法在不读取文件内容的情况下加密文件？**

3.  **有没有办法使用 AES 解密目录（文件夹）及其所有内容？**通过“解密目录”，我的意思是它无法打开，并且在尝试打开它时会显示一些错误消息。

4.  还可以编辑、删除、移动、复制和重命名加密文件。我希望没有人可以对我的应用程序加密的文件执行这些操作。**这个怎么做？**

以下是我正在使用的代码，但仅适用于 .txt 文件，不适用于其他文件。不知道是什么问题：

```
import java.io.File;
import java.io.FileInputStream;

import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;

public class JavaCrypt
{
    public static void main(String[] args) throws Exception {

           File f=new File("D:/a.txt");
           int ch;

               StringBuffer strContent = new StringBuffer("");
               FileInputStream fin = null;
               try {
               fin = new FileInputStream(f);
               while ((ch = fin.read()) != -1)
                   strContent.append((char) ch);
                   fin.close();
                   } 
               catch (Exception e) {
                   System.out.println(e);
                   }

               System.out.println("Original string: " +strContent.toString()+"\n");
               // Get the KeyGenerator

           KeyGenerator kgen = KeyGenerator.getInstance("AES");
           kgen.init(128); // 192 and 256 bits may not be available

           // Generate the secret key specs.
           SecretKey skey = kgen.generateKey();
           byte[] raw = skey.getEncoded();

           SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");

           // Instantiate the cipher

           Cipher cipher = Cipher.getInstance("AES");

           cipher.init(Cipher.ENCRYPT_MODE, skeySpec);

           byte[] encrypted = cipher.doFinal(strContent.toString().getBytes());

           System.out.println("encrypted string: " + encrypted.toString());

           cipher.init(Cipher.DECRYPT_MODE, skeySpec);
           byte[] original =cipher.doFinal(encrypted);

           String originalString = new String(original);
           System.out.println("Original string: " +originalString);
         }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:36:18.387

1.  是的，AES 适用于所有数据。

2.  不。

3.  是的。

4.  压缩目录和内容，然后加密 Zip 文件。使用 HMAC 确保没有人弄乱加密文件。

你说，“请尽快回复，因为我必须在几天内提交这个项目，我被这些问题困住了。” 正如您现在所了解到的，将事情留到最后一刻并不是获得好结果的好方法：适当的计划可以防止表现不佳。

如果你早点看东西，那么你解决问题的时间不会太少。

# slickgrid - Slickgrid 可能的错误：只有上面的行是可见的

> ID：10980081
> 
> 赞同：3
> 
> 时间：2012-06-11T12:25:18.217
> 
> 标签：slickgrid

我正在使用 Slickgrid，只有上面的行是可见的。当我向下滚动时，这些上面的行会更新，但其他行保持隐藏/空白。

如果您使用鼠标**更改列位置**，则该问题已得到解决。

我尝试删除一些列，禁用不同的插件并调用无效/渲染函数但没有成功。

为什么会这样？任何的想法？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T21:23:13.920

您正在隐藏容器中创建和初始化网格，因此，当它测量视口时，它认为它的高度为 0。您需要在容器上设置显式高度，并确保在完成网格初始化之前它是可见的。

# eclipse - 在eclipse插件中获取行号

> ID：10980082
> 
> 赞同：1
> 
> 时间：2012-06-11T12:25:33.567
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我正在为我的插件寻找正确的扩展点来访问编辑器中的光标位置。目的是为插件视图中的当前代码行提供附加信息。我确信这是可能的，因为例如大纲视图突出显示了我所在的当前函数。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:12:37.103

下面的代码做我想要的

```
import org.eclipse.ui.IWorkbench;
import org.eclipse.ui.PlatformUI;
import org.eclipse.ui.IWorkbenchPage;
import org.eclipse.ui.IEditorPart;
import org.eclipse.ui.texteditor.ITextEditor;
import org.eclipse.jface.viewers.ISelectionProvider;
import org.eclipse.jface.viewers.ISelection;        

IWorkbench wb = PlatformUI.getWorkbench();
IWorkbenchWindow win = wb.getActiveWorkbenchWindow();
IWorkbenchPage page = win.getActivePage();
IEditorPart editor = page.getActiveEditor();
if(editor instanceof ITextEditor){
    ISelectionProvider selectionProvider = ((ITextEditor)editor).getSelectionProvider();
    ISelection selection = selectionProvider.getSelection();
    if (selection instanceof ITextSelection) {
        ITextSelection textSelection = (ITextSelection)selection;
        System.out.println("startline:"+textSelection.getStartLine());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:19:00.960

您可以使用`textSelection.getOffset()`您找到的模式，然后使用`org.eclipse.jface.text.IDocument`界面从文档中提取文本以进行任何您想要的分析。

```
ITextEditor textEditor = (ITextEditor)editor;
IDocumentProvider dp = editor.getDocumentProvider();
IDocument doc = dp.getDocument(editor.getEditorInput()); 
```

`IDocument`具有在字符偏移量和行之间来回转换的方法。

# sql - SQL 报告：权限错误

> ID：10980083
> 
> 赞同：0
> 
> 时间：2012-06-11T12:25:37.250
> 
> 标签：sql, sql-server, reporting-services, ssrs-2008

我正在配置 SQL 报告服务。我想我错过了一些东西，因为：

`http://my-ip-here/Reports/` 使用我添加到管理员组的域用户继续登录。

我添加了一个新创建的用户（它已激活，不需要更改密码或类似的东西）作为管理员： ![在此处输入图像描述](../Images/ad519e07adf42e68d06b7fe335feea45.png)

然后我尝试在另一个浏览器上加载该页面，尝试使用 IFT-SRV312\ReportingUser 登录，但随后出现此错误：（ ![在此处输入图像描述](../Images/ccc355cbff046187aac31a98725a54fb.png) 抱歉法语消息，它已安装法语 :( ）。

它基本上意味着：“用户 IFT-SRV312\ReportingUser 没有所需的权限。验证是否已授予足够的权限并且已解决 Windows 用户帐户控制 (UAC) 限制。”

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T13:24:04.733

我发现了我的问题。事实上，除了网站参数中的安全参数外，我还要在根文件夹上设置一些正确的（至少是内容浏览器）！

![在此处输入图像描述](../Images/dd5a538cfb583309c3795249a49eaee8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:10:59.610

尝试这个：

[http://social.msdn.microsoft.com/Forums/en-US/sqlexpress/thread/9b5a8763-84ce-46d0-b011-067ad39223d1](http://social.msdn.microsoft.com/Forums/en-US/sqlexpress/thread/9b5a8763-84ce-46d0-b011-067ad39223d1)

另外，查看是否选中了“保护模式”。如果是这样，请将其关闭。

# java - 创建密钥库并将证书附加到它后，密钥库格式无效

> ID：10980088
> 
> 赞同：4
> 
> 时间：2012-06-11T12:25:54.240
> 
> 标签：java, openssl

我正在使用以下命令使用 OpenSSL 创建密钥库：

```
openssl pkcs12 -export -in mycert.crt -inkey mykey.key \
                        -out mycert.p12 -name tomcat -CAfile myCA.crt \
                        -caname root 
```

根据[文档](http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html#Prepare_the_Certificate_Keystore)。

现在，当我尝试使用 验证密钥库`keytool -list -v -keystore mycert.p12`时，我得到一个`Invalid Keystore Exception`.

这是因为我正在使用 Apache 实现创建密钥库吗？

我还有一个限制是，尽管我的 Java 程序正在使用密钥库进行 FTPS 传输，但我不能使用 Java 密钥工具来创建密钥库。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-11T13:24:39.087

将`-storetype pkcs12`选项与`keytool`.

```
keytool -list -v -keystore mycert.p12 -storetype pkcs12 
```

默认情况下，`keytool`假定密钥库类型是`JKS`，如果不是，则`keytool`失败。如果使用其他密钥库文件（`.p12`在您的示例中），您需要使用上述方法明确给出存储类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-21T10:06:30.967

我通过从我的机器中删除 Java 1.7 解决了这个问题。这使得 Java 1.8`keytool`成为唯一可用的`keytool`. 由于 Java 1.8`keytool`支持`pkcs12`，因此该命令有效。

以下是*删除 Java 1.7*（在 Windows 10 操作系统上）的方法：

*   去`Windows Settings`=>`Apps & Features`
*   查找包含`Java 1.7`或`Java 7`以其名称的所有应用程序
*   点击应用名称并选择`Uninstall`
*   按照每个人的卸载向导
*   **删除 Java 1.7`PATH`**

**注意：**这可以在不卸载的情况下实现，只需将 Java 1.8 路径放在 Java 1.7 路径*之前/之上*`PATH`的变量中，但我没有对此进行测试。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-22T08:10:28.023

我安装了 JDK 16。之后我卸载了 JDK 16，然后安装了 JDK 8

> jdk1.8.0_281

那行得通！

最后一个版本使用另一种 cyrpto 格式。*

# xml - 在 SQL Server 2005 中将字符串转换为 xml

> ID：10980094
> 
> 赞同：0
> 
> 时间：2012-06-11T12:26:19.263
> 
> 标签：xml, sql-server-2005

我有一个字符串，我想将其转换为 XML，但它给了我一个错误。

```
 <error>A string literal was expected<error>

SET @xmlString = '<OrgStructureRole><SurveyId>13</SurveyId><UserName>xyz13</UserName><UserName>rmn456</UserName><Rule OrgTreeID=131705></Rule><Rule OrgTreeID=131721></Rule></OrgStructureRole>' 
```

我正在尝试使用这种方式进行转换。

```
SELECT  convert(xml,@xmlString) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:29:48.463

我相信它失败了，因为节点`OrgTreeID`上的属性`Rule`应该被引用......

```
<Rule OrgTreeID="131705"></Rule><Rule OrgTreeID="131721"></Rule> 
```

给作为一个完整的线...

```
SET @xmlString = '<OrgStructureRole><SurveyId>13</SurveyId><UserName>xyz13</UserName><UserName>rmn456</UserName><Rule OrgTreeID="131705"></Rule><Rule OrgTreeID="131721"></Rule></OrgStructureRole>' 
```

如果这不起作用，请尝试直接分配...

```
DECLARE @xml AS XML
SET @xml = '<OrgStructureRole><SurveyId>13</SurveyId><UserName>xyz13</UserName><UserName>rmn456</UserName><Rule OrgTreeID="131705"></Rule><Rule OrgTreeID="131721"></Rule></OrgStructureRole>' 
```

# objective-c - iPad 上的 UIScrollView 问题

> ID：10980096
> 
> 赞同：0
> 
> 时间：2012-06-11T12:26:24.627
> 
> 标签：objective-c, ios, xcode, uiscrollview

我正在尝试`UIScrollView`在 iPad 上工作。我已经查看了几乎所有现有的问题，但没有一个真正解决了我的问题。所以基本上这是我的代码：

```
[scroll setScrollEnabled:YES];
scroll.contentSize = CGSizeMake(scroll.frame.size.width, 2320); 
```

顺便叫了进来`viewDidLoad`。当我构建和运行时，滚动视图侧栏会在我滚动时改变它的位置（表明它正在工作），但视图不会改变/保持在顶部。我的观点有很多`UIImageView`，但我不认为这是一个问题。同样对于我的安排，我的滚动视图位于整个视图的前面。

谢谢！

更新：

所以基本上发生的事情是我`UIView`的滚动视图没有覆盖整个视图。它不包括我有标签和按钮的最顶部。但是，当我将它加载到 iPad 时，我的图像覆盖了顶部......现在可以上下滚动。

为什么会这样？

截屏：

![在模拟器上](../Images/59dfaa90d900f26679400495d77a025c.png)

更新：

我的代码：

```
[scroll setScrollEnabled:YES];
scroll.contentSize = CGSizeMake(scroll.frame.size.width, 1500);

[scroll addSubview: i1];
[scroll addSubview: i2];
[scroll addSubview: i3];
[scroll addSubview: i4];
[scroll addSubview: i5];
[scroll addSubview: i6];
[scroll addSubview: i7];
[scroll addSubview: i8];
[scroll addSubview: line]; 
```

知道为什么会这样吗？

向滚动视图添加子视图是否正确？

更新：

我还有一个问题，我已经实现了该`touchesBegan`方法，如果用户触摸这些图像中的任何一个，则会显示一个包含某些信息的弹出窗口。该代码是非常标准的，但不需要显示它。那么，有没有办法让滚动视图响应对其内容的触摸？

问题是，每当我触摸图像时，`touchesBegan`都不会因为滚动视图在前面而被调用，对吗？但是如果我发送滚动视图向后滚动不起作用。

如您所见，我在这里有很多问题，但不是查看我的代码并尝试解决每个错误。我有一个更好的主意。这是我正在尝试做的事情：

在 iPad 上有一个滚动视图，该视图在时间轴上滚动，时间轴在技术上是多个图像。这些图像是可触摸的。并且滚动视图只占据屏幕的一部分，顶部是一个后退按钮和不应滚动的标签。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:30:12.060

您是否仔细检查了 IBOutlet 是否实际连接？我建议您添加一个断言以确保 ScrollView 引用已初始化。这通常会为您节省大量时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T22:59:58.610

确保正确设置子视图的框架。如果没有，您的子视图很可能会默认为滚动视图中的 (0,0) 位置。

# php - 正则表达式 php preg_match 在字符串中多次出现

> ID：10980099
> 
> 赞同：1
> 
> 时间：2012-06-11T12:26:30.480
> 
> 标签：php, regex, preg-match

我有以下字符串：

> findByHouseByStreetByPlain

如何匹配每个“By”之后的值。我设法找到了第一个“By”值，但我无法让它为我提供“By”之后值的所有匹配项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:42:47.287

Thsi 正则表达式应该适合您：

```
<?php 
$ptn = "#(?:By([A-Za-z]+?))(?=By|$)#";
$str = "findByByteByHouseNumber";
preg_match_all($ptn, $str, $matches, PREG_PATTERN_ORDER);
print_r($matches);
?> 
```

这将是输出：

```
Array
(
    [0] => Array
        (
            [0] => ByByte
            [1] => ByHouseNumber
        )

    [1] => Array
        (
            [0] => Byte
            [1] => HouseNumber
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:32:45.830

一些前瞻的使用会做到这一点

```
By(.*?)(?=By|$) 
```

在 php 这变成

```
preg_match_all('/By(.*?)(?=By|$)/', $subject, $result, PREG_SET_ORDER);
for ($matchi = 0; $matchi < count($result); $matchi++) {
    for ($backrefi = 0; $backrefi < count($result[$matchi]); $backrefi++) {
        # Matched text = $result[$matchi][$backrefi];
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:31:43.627

试试下面的代码：

```
$pattern = "/[^By]+/";
$string = "findByHouseByStreetByPlain";
preg_match_all($pattern, $string, $matches);
var_dump($matches); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-16T14:46:03.613

我的字符串不同：

> HouseByStreetByPlain

然后我使用以下正则表达式：

```
<?php 
$ptn = "/(?<=By|^)(?:.+?)(?=(By|$))/i";
$str = "HouseByStreetByPlain";
preg_match_all($ptn, $str, $matches);
print_r($matches);
?> 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => House
            [1] => Street
            [2] => Plain
        )

    [1] => Array
        (
            [0] => By
            [1] => By
            [2] => 
        )

) 
```

# java - 在 Java (Pre-6) TreeMap 和 Iterator 索引和下一个元素之间挣扎

> ID：10980100
> 
> 赞同：1
> 
> 时间：2012-06-11T12:26:30.443
> 
> 标签：java, iterator, treemap

我想对日期值对的集合进行排序。我的键是日期，值是字符串。所以我选择了一个TreeMap。

现在，

1.  就是下面的迭代器是按照类似于TreeMaps的键排序的。我尝试了几个循环，但仍有疑问

    ```
    Iterator<Date> iter = policyMap.keySet().iterator(); 
    ```

2.  有没有办法在不增加迭代器索引的情况下获取下一个键。

3.  在`policyMap.higherKey(cpDate))`java 6.

最后，我为自己也尝试追随而感到羞耻。

```
TreeMap<Date, String> policySubMap = 
new TreeMap<Date, String>policyMap.tailMap(cpDate));
policySubMap.remove(policySubMap.firstKey());
System.out.println(" | amount > " + policySubMap.firstKey()); 
```

**这是我的完整代码：**

```
public void controller(){

TreeMap<Date, String> policyMap = new TreeMap<Date, String>();
Calendar cal = Calendar.getInstance();

policyMap.put(addDate(cal, 2).getTime(), "Amount is 10");
policyMap.put(addDate(cal, 10).getTime(), "Amount is 10");
policyMap.put(addDate(cal, -10).getTime(), "Amount is -10");
policyMap.put(addDate(cal, 11).getTime(), "Amount is 11");
policyMap.put(addDate(cal, -11).getTime(), "Amount is -11");
policyMap.put(addDate(cal, -12).getTime(), "Amount is -12");

Iterator<Date> iter = policyMap.keySet().iterator();

while (iter.hasNext()) {
    Date cpDate = iter.next();
    System.out.print("From "+cpDate + " to " + policyMap.get(cpDate));
//      if(iter.hasNext())System.out.println(" | amount > " + policyMap.higherKey(cpDate)); // This is not supporting in before java 6
        if(iter.hasNext()){
            TreeMap<Date, String> policySubMap = new TreeMap<Date, String>(policyMap.tailMap(cpDate));
            policySubMap.remove(policySubMap.firstKey());
            System.out.println(" | amount > " + policySubMap.firstKey());
        }

    else System.out.println("Checking date");

    }
}

public Calendar addDate(Calendar cal, int amount) {
    cal.add(Calendar.DATE, amount);
    return cal;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:31:49.693

1.  是的

2.  不，您可以使用第二个迭代器，或者 mroe 有效地保存以前的值。

3.  您可以使用

    ```
    Date nextKey = treeMap.tailMap(new Date(date.getTime()+1)).firstKey(); 
    ```

# javascript - 在同一域的 IE9 中拒绝 Script5 访问

> ID：10980103
> 
> 赞同：3
> 
> 时间：2012-06-11T12:26:37.017
> 
> 标签：javascript, jquery, ajax, django, multi-upload

我正在 django 中开发一个站点，它使用 jquery 多文件上传插件。

当我注册到我的网站时，一封确认电子邮件会发送到我的 gmail 帐户，我单击激活链接，我的网站将在新选项卡中打开。我登录，然后尝试上传文件，但在 IE9 中失败... F12 显示“Script5 访问被拒绝”

但是，如果我在 URL 地址栏中键入链接而不是单击电子邮件中的链接，它会完美运行。它允许我上传任何我想要的东西。

我在开发服务器中测试，主机名是`http://192.168.0.1:8085`

我的问题是，当我通过电子邮件链接访问我的网站时，它不起作用......我检查了标题，唯一改变的是当我从我的电子邮件链接打开页面时，有一个额外的标题，`HTTP_REFERER = http://192.168.0.1:8085:/activate/16834e18a471d4f654aa763b2b22f203/`但除此之外，我找不到任何其他可能导致问题的东西......而且我不明白为什么当我输入网址时它可以正常工作。

我使用的 jquery multiupload 插件是： [https ://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)

我的脚本是： http: [//pastebin.com/2JE8Qrnm](http://pastebin.com/2JE8Qrnm)

这是 HTML： http: [//pastebin.com/fyP0Z4sB](http://pastebin.com/fyP0Z4sB)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:40:59.083

嗯...首先进入我脑海的是：

尝试添加：

```
response['p3p'] = 'CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"' 
```

和/或：

```
response['Access-Control-Allow-Origin'] = '*' 
```

对你的回应。

# sed - 从字符串中查找部分文本

> ID：10980105
> 
> 赞同：1
> 
> 时间：2012-06-11T12:26:43.823
> 
> 标签：sed, awk, grep

我的文本文件有几行这样的......

```
some data here Waiting on job_bba6b2a1589b4535a804e7877dc1fe11 ... (409s) Current status: DONE 
some data there Waiting on job_xyz ... (240s) Current status: DONE 
```

我需要找到工作 ID。在上面提到的例子中......

```
bba6b2a1589b4535a804e7877dc1fe11
xyz 
```

我可以使用 grep，但如何只选择 ID？

猫文件.log | grep '等待工作_'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:36:04.950

如果这是你需要的？

```
kent$  echo "some data here Waiting on job_bba6b2a1589b4535a804e7877dc1fe11 ... (409s)"|grep -oP "(?<=Waiting on job_)[^ ]*" 
bba6b2a1589b4535a804e7877dc1fe11 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:32:02.710

```
sed 's/.*Waiting on job_\([^ ]*\).*/\1/' 
```

对于包含`Waiting on job_`后跟 0 个或多个非空格字符的每一行，这将替换整行（因为开始和结束`.*`将贪婪地占用尽可能多的字符）使用反向引用`\1`来调用与之间匹配的所有内容`\(`，`\)`即`[^ ]*`您正在寻找的非空格字符。

所以：

```
cat file.log | grep 'Waiting on job_' | sed 's/.*Waiting on job_\([^ ]*\).*/\1/' 
```

或更简单：

```
grep 'Waiting on job_' file.log | sed 's/.*Waiting on job_\([^ ]*\).*/\1/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T16:53:30.313

```
perl -lne 'print $1 if m/(?<=Waiting on job_)([^ ]*)/' inputfile 
```

# mysql - SQL 选择你可能认识的人

> ID：10980112
> 
> 赞同：17
> 
> 时间：2012-06-11T12:27:20.143
> 
> 标签：mysql, sql

`The question you're asking appears subjective and is likely to be closed.`

当我在填写标题字段时看到上述**可怕的警告时，我并不感到惊讶。**

我阅读了几乎所有讨论的主题`friends of friends`，`mutual friends`但我不确定我是否找到了我想做的正确解决方案。

对不起，我不擅长英语和 SQL。

如何在两种语言都不擅长的情况下找到正确的答案？

我决定我必须问。我不会因为`down-vote`s 或任何`duplication warning`s 而让自己失望。

由于我想要答案，我会尽可能真诚地写下来，以便任何进一步的类似问题可以得到帮助。

我有一张朋友关系的桌子。

```
FRIEND (TABLE)
-----------------------------------
PLAYER_ID(PK,FK)   FRIEND_ID(PK,FK)
-----------------------------------
1                  2                 // 1 knows 2
2                  1                 // 2 knows 1
1                  3                 // 1 knows 3
2                  3                 // 2 knows 3
2                  4                 // 2 knows 4
2                  5                 // 2 knows 5 // updated
3                  5                 // 3 knows 5 // updated
1                  100
1                  200
1                  300
100                400
200                400
300                400 
```

两者`composite primary keys`也是`PLAYER`表中的外键。

我问这些好人并得到了“人们互相认识”的回答。

[表中熟人的 SQL 视图](https://stackoverflow.com/questions/10976568/sql-view-for-acquaintance-from-table)。

我有这样的看法。

```
ACQUAINTANCE (VIEW)
-----------------------------------
PLAYER_ID(PK,FK)   FRIEND_ID(PK,FK)
-----------------------------------
1                  2                 // 1 knows 2
2                  1                 // 2 knows 1 
```

您可能会注意到，这种关系的业务逻辑有以下两个目的。

1.  一名玩家可以说他或她认识其他人。
2.  当两个人都说他们认识时，他们可以说是熟人。

而且，现在，我想知道有什么好的方法

1.  选择其他 PLAYER_ID
2.  使用给定的 PLAYER(PLAYER_ID)（比如 1）
3.  其中每个都是“给定玩家的直接朋友的朋友”之一
4.  其中每个不是PLAYER本人（不包括1 -> 2 -> 1）
5.  哪个不是PLAYER的直接好友（不包括3 from 1 -> 2 -> 3 by 1 -> 3）
6.  如果可能的话，按共同朋友的数量排序。

我认为贾斯汀·尼斯纳在[“你可能认识的人”sql 查询](https://stackoverflow.com/questions/4147482/people-you-may-know-sql-query)中的回答是我必须遵循的最接近的路径。

提前致谢。

如果这个主题真的重复并且没有必要，我会关闭线程。

更新 - - - - - - - - - - - - - - - - - - - - - - - - - -------------

对于 Raphaël Althaus 的评论`whose name is same with my future daughter`（是男孩的名字吗？），

3 是`friends of friends of 1`因为

```
1 knows 2
2 knows 3 
```

但被排除在外，因为

```
1 already knows 3 
```

基本上我想`given player`为

```
people he or she may know
which is not himself or herself // this is nothing but obvious
which each is not already known to himself 
```

与上表

```
by 1 -> 2 -> 4 and 1 -> 3 -> 5

4 and 5 can be suggested for 1 as 'people you may know'

order by number of mutual friends will be perfect
but I don't think I can understand even if someone show me how. sorry. 
```

谢谢你。

更新 - - - - - - - - - - - - - - - - - - - - - - - - - --------------------

我想我必须从我所学到的东西中一步一步地尝试，`FROM HERE WITH VARIOUS PEOPLE`即使这不是正确的答案。如果我做错了什么，请告诉我。

首先，让我自己加入 FRIEND 表本身。

```
SELECT *
FROM FRIEND F1 INNER JOIN FRIEND F2 ON F1.FRIEND_ID = F2.PLAYER_ID 
```

印刷

```
+-----------+-----------+-----------+-----------+
| PLAYER_ID | FRIEND_ID | PLAYER_ID | FRIEND_ID |
+-----------+-----------+-----------+-----------+
|         1 |         2 |         2 |         1 |
|         1 |         2 |         2 |         3 |
|         1 |         2 |         2 |         4 |
|         1 |         2 |         2 |         5 |
|         1 |         3 |         3 |         5 |
|         2 |         1 |         1 |         2 |
|         2 |         1 |         1 |         3 |
|         2 |         3 |         3 |         5 |
+-----------+-----------+-----------+-----------+ 
```

仅限 F2.FRIEND_ID

```
SELECT F2.FRIEND_ID
FROM FRIEND F1 INNER JOIN FRIEND F2 ON F1.FRIEND_ID = F2.PLAYER_ID 
```

印刷

```
+-----------+
| FRIEND_ID |
+-----------+
|         1 |
|         3 |
|         4 |
|         5 |
|         5 |
|         2 |
|         3 |
|         5 |
+-----------+ 
```

仅限 1

```
SELECT F2.FRIEND_ID
FROM FRIEND F1 INNER JOIN FRIEND F2 ON F1.FRIEND_ID = F2.PLAYER_ID
WHERE F1.PLAYER_ID = 1; 
```

印刷

```
+-----------+
| FRIEND_ID |
+-----------+
|         1 |
|         3 |
|         4 |
|         5 |
|         5 |
+-----------+ 
```

不是 1

```
SELECT F2.FRIEND_ID
FROM FRIEND F1 INNER JOIN FRIEND F2 ON F1.FRIEND_ID = F2.PLAYER_ID
WHERE F1.PLAYER_ID = 1 
AND F2.FRIEND_ID != 1; 
```

印刷

```
+-----------+
| FRIEND_ID |
+-----------+
|         3 |
|         4 |
|         5 |
|         5 |
+-----------+ 
```

不是 1 的直接已知信息

```
SELECT F2.FRIEND_ID
FROM FRIEND F1 INNER JOIN FRIEND F2 ON F1.FRIEND_ID = F2.PLAYER_ID
WHERE F1.PLAYER_ID = 1
AND F2.FRIEND_ID != 1
AND F2.FRIEND_ID NOT IN (SELECT FRIEND_ID FROM FRIEND WHERE PLAYER_ID = 1); 
```

印刷

```
+-----------+
| FRIEND_ID |
+-----------+
|         4 |
|         5 |
|         5 |
+-----------+ 
```

我想我快到了。

更新 - - - - - - - - - - - - - - - - - - - - - - - - - ----------------

添加了以下路径

```
1 -> 100 -> 400
1 -> 200 -> 400
1 -> 300 -> 400 
```

最后一个查询打印（再次）

```
+-----------+
| FRIEND_ID |
+-----------+
|         4 |
|         5 |
|         5 |
|       400 |
|       400 |
|       400 |
+-----------+ 
```

最后，我得到了候选人：4、5、400

确保`distinct`为主要目标工作

```
SELECT DISTINCT F2.FRIEND_ID
FROM FRIEND F1 INNER JOIN FRIEND F2 ON F1.FRIEND_ID = F2.PLAYER_ID
WHERE F1.PLAYER_ID = 1
AND F2.FRIEND_ID != 1
AND F2.FRIEND_ID NOT IN (SELECT FRIEND_ID FROM FRIEND WHERE PLAYER_ID = 1); 
```

印刷

```
+-----------+
| FRIEND_ID |
+-----------+
|         4 |
|         5 |
|       400 |
+-----------+ 
```

而且，现在，需要按相互计数排序。

这是每个候选人的共同朋友的数量。

```
+-----------+
| FRIEND_ID |
+-----------+
|         4 | 1 (1 -> 2 -> 4)
|         5 | 2 (1 -> 2 -> 5, 1 -> 3 -> 5)
|       400 | 3 (1 -> 100 -> 400, 1 -> 200 -> 400, 1 -> 300 -> 400)
+-----------+ 
```

我如何计算和订购这些共同朋友的数量？

```
SELECT F2.FRIEND_ID, COUNT(*)
FROM FRIEND F1 INNER JOIN FRIEND F2 ON F1.FRIEND_ID = F2.PLAYER_ID
WHERE F1.PLAYER_ID = 1
AND F2.FRIEND_ID != 1
AND F2.FRIEND_ID NOT IN (SELECT FRIEND_ID FROM FRIEND WHERE PLAYER_ID = 1)
GROUP BY F2.FRIEND_ID; 
```

印刷

```
+-----------+----------+
| FRIEND_ID | COUNT(*) |
+-----------+----------+
|         4 |        1 |
|         5 |        2 |
|       400 |        3 |
+-----------+----------+ 
```

我知道了！

```
SELECT F2.FRIEND_ID, COUNT(*) AS MFC
FROM FRIEND F1 INNER JOIN FRIEND F2 ON F1.FRIEND_ID = F2.PLAYER_ID
WHERE F1.PLAYER_ID = 1
AND F2.FRIEND_ID != 1
AND F2.FRIEND_ID NOT IN (SELECT FRIEND_ID FROM FRIEND WHERE PLAYER_ID = 1)
GROUP BY F2.FRIEND_ID
ORDER BY MFC DESC; 
```

印刷

```
+-----------+-----+
| FRIEND_ID | MFC |
+-----------+-----+
|       400 |   3 |
|         5 |   2 |
|         4 |   1 |
+-----------+-----+ 
```

有人可以确认吗？该查询是最优的吗？将其作为视图时是否存在任何可能的性能问题？

谢谢你。

更新 - - - - - - - - - - - - - - - - - - - - - - - - - ------------------------------------------

我创建了一个视图

```
CREATE VIEW FOLLOWABLE AS
    SELECT F1.PlAYER_ID, F2.FRIEND_ID AS FOLLOWABLE_ID, COUNT(*) AS MFC
    FROM FRIEND F1 INNER JOIN FRIEND F2 ON F1.FRIEND_ID = F2.PLAYER_ID
    WHERE F2.FRIEND_ID != F1.PLAYER_ID
    AND F2.FRIEND_ID NOT IN (SELECT FRIEND_ID FROM FRIEND WHERE PLAYER_ID = F1.PLAYER_ID)
    GROUP BY F2.FRIEND_ID
    ORDER BY MFC DESC; 
```

并经过测试。

```
mysql> select * from FOLLOWABLE;
+-----------+---------------+-----+
| PlAYER_ID | FOLLOWABLE_ID | MFC |
+-----------+---------------+-----+
|         1 |           400 |   3 |
|         1 |             5 |   2 |
|         2 |           100 |   1 |
|         2 |           200 |   1 |
|         2 |           300 |   1 |
|         1 |             4 |   1 |
+-----------+---------------+-----+
6 rows in set (0.01 sec)

mysql> select * from FOLLOWABLE WHERE PLAYER_ID = 1;
+-----------+---------------+-----+
| PlAYER_ID | FOLLOWABLE_ID | MFC |
+-----------+---------------+-----+
|         1 |           400 |   3 |
|         1 |             5 |   2 |
|         1 |             4 |   1 |
+-----------+---------------+-----+
3 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T13:35:59.113

使用这个 **编辑**

```
SELECT `friend_id` AS `possible_friend_id`
FROM `friends`
WHERE `player_id` IN (        --selecting those who are known
    SELECT `friend_id`        --by freinds of #1
    FROM `friends`
    WHERE `player_id` = 1) 
AND `friend_id` NOT IN (      --but not those who are known by #1
    SELECT `friend_id`
    FROM `friends`
    WHERE `player_id` = 1)
AND NOT `friend_id` = 1       --and are not #1 himself
                              --if one is known by multiple people
                              --he'll be multiple time in the list
GROUP BY `possible_friend_id` --so we group
ORDER BY COUNT(*) DESC        --and order by amount of repeatings 
```

# python - sphinx-build：错误：无法识别的参数：-b html build/doctrees source build/html

> ID：10980114
> 
> 赞同：2
> 
> 时间：2012-06-11T12:27:27.553
> 
> 标签：python, python-sphinx

我正在使用[Sphinx](http://sphinx.pocoo.org/)来记录我的项目。当我跑步时，`make html`我收到了这个错误。

我已经安装了`Sphinx v1.1.2`。某些文件中可能存在一些错误`.rst`，但此错误消息没有帮助，因为我不知道要检查哪个文件，因为我有超过 100 个`.rst`文件。所以很难一一检查文件。

有没有办法解决这个错误或至少找出哪个文件是错误的？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-06T22:31:38.007

检查在此错误之前正在处理的模块。该模块可能缺少`if __name__ == '__main__'`检查。

这里的问题是：

*   sphinx-apidoc（或任何你用来生成你的 rst 的东西）可能把 automodule/autoclass/... 放在你的 rst 中。
*   `autodoc`当 sphinx在 rst 文件中遇到 autoXXX 指令时，它会使用扩展名从 .py 文件中获取 doc 字符串。
*   autodoc 导入 .py 模块以从中提取文档字符串。
*   `import`如果一个模块默认假设它只是一个可执行文件（即没有检查`__main__`），你会得到错误。

造成 a$$ 错误的原因是大多数开发人员会在错误 args 上显示的错误消息中使用`sys.argv[0]`和`sys.argv[0:]`，导致在这种情况下打印完全不适当的错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T15:36:52.477

如果您使用的是[sphinx-apidoc](http://sphinx-doc.org/man/sphinx-apidoc.html)并且您的包在同一文件夹中使用[setuptools 和 setup.py](http://docs.python.org/2/distutils/setupscript.html)，请确保隐藏`setup()`对构造的调用`if 'main' == __name__:`。

# php - 显示 form_open 的 codeigniter

> ID：10980116
> 
> 赞同：2
> 
> 时间：2012-06-11T12:27:33.823
> 
> 标签：php, forms, codeigniter

我正在尝试学习 codeigniter，但由于某种原因，我不能做最简单的事情。

基本上我正在登录页面上创建一个表单。但我越来越

> 致命错误：在第 5 行的 A:\work\codeigniter\ci\application\views\pages\login.php 中调用未定义函数 validation_errors()

如果我注释掉 validation_errors 行，我会得到

> 致命错误：在第 5 行的 A:\work\codeigniter\ci\application\views\pages\login.php 中调用未定义的函数 form_open() ...

错误信息

```
( ! ) Fatal error: Call to undefined function validation_errors() in A:\work\codeigniter\ci\application\views\pages\login.php on line 3
Call Stack
#   Time    Memory  Function    Location
1   0.0004  697328  {main}( )   ..\index.php:0
2   0.0010  790176  require_once( 'A:\work\codeigniter\ci\system\core\CodeIgniter.php' )    ..\index.php:202
3   0.0135  2313080 call_user_func_array ( )    ..\CodeIgniter.php:359
4   0.0135  2313160 Pages->view( )  ..\CodeIgniter.php:359
5   0.0135  2313288 CI_Loader->view( )  ..\pages.php:9
6   0.0135  2314232 CI_Loader->_ci_load( )  ..\Loader.php:419
7   0.0138  2363392 include( 'A:\work\codeigniter\ci\application\views\pages\login.php' )   ..\Loader.php:833 
```

这是我的代码：

login.php 位于 view\pages

```
<?php echo validation_errors(); ?>

<?php echo form_open('user/login') ?>

    <label for="Id"> User Id</label>
    <input type="input" name="Id" /> <br/>

    <label for="Password">User Password</label>
    <input type="input" name="Password" />
    <br/>

    <input type="submit" name="submit" value="log in" />

</form> 
```

user.php 位于控制器\

```
<?php
    class User extends CI_controller{
    public function login()
    {
        $this->load->helper('form');
        $this->load->library('form_validation');

        //i have a file views/pages/main.php which just says "this is main"
        $this->load->view('pages/main'); 
    }
    } 
```

pages.php 位于控制器/

```
<?php

    class Pages extends CI_Controller{
    public function view($page){
        if(!isset($page)||!file_exists("application/views/pages/$page.php")){
        show_404();
        }

        $this->load->view("pages/$page");

    }
    } 
```

routes.php 位于 config/

```
$route['default_controller'] = "pages/view";
$route['(:any)']="pages/view/$1";
$route['404_override'] = ''; 
```

这就是我认为发生的事情，如果我错了，请纠正我。form_open('user/login') 使 html 表单元素的“动作”指向位于控制器中的类“用户”的方法“登录”。

另外，我用谷歌搜索了很多，几乎所有其他遇到此错误的人都得到了它，因为他们没有完成

```
$this->load->helper('form');
$this->load->library('form_validation'); 
```

此外，我没有得到 form_open 中的字符串指向 html 表单元素中“action”属性的位置。为什么需要在那里加载表单助手和表单验证库？有人可以解释一下这个流程吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T13:09:54.593

基本上问题是使用表单调用视图的控制器应该包含

```
$this->load->helper('form');
$this->load->library('form_validation'); 
```

而不是表单操作调用的控制器

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T12:45:31.267

尝试在`autoload.php`文件夹内的文件中加载表单助手`config`。

这将是一个很好的做法：

```
$autoload['helper'] = array('url','text','form'); 
```

# c++ - C++ 标点符号

> ID：10980118
> 
> 赞同：-5
> 
> 时间：2012-06-11T12:27:47.593
> 
> 标签：c++, punctuation

比实际编程问题更多的社会好奇心......

一千年前，当我参加我的第一个编程课程（Fortran 66）和仅仅 500 年前，当我开始我的第一个 C 和 C++ 课程时，跨语言有一些非常标准的标点符号练习。我在 Basic（颤抖）、PL/1、PL/AS、Rexx 甚至 Pascal 中看到了它们。好的，APL2 不在此讨论范围内。

每种语言都有自己独特的标点符号。Pascal 的句点，Fortran 的逗号分隔的 do 循环，几乎所有其他人的分号。

据我所知，每种语言也有关键字（if、for、do、while、until 等），它们由空格（或左边距）<space>if<space> 等隔开。

每种语言都有功能，无论它们被称为什么子程序。一些内置一些用户编码的。它们是由 <whitespace|left margin>function_name(parameters); 引起的。如 sqrt( x ) 或 rand( y )；

最近，似乎有一套新的标点符号规则。尤其是在 C++ 中，初始化器被粘在变量声明的末尾 int x(0); 或 auto_ptr<p> p(new gizmo); 这总是让我误以为有人在声明一个函数原型或将函数用作整数（嗯？）。

然后“if”和“for”似乎已经长大了；if(true) for(;;) 等。关键字是从什么时候变成函数的。

最后，函数似乎已经摆脱了它们的束缚。sqrt (2) 选择 (...)

问：旧的方式是什么时候消失的，而这种新的方式是什么时候流行起来的？除了我之外，还有没有人觉得阅读很烦人，并且标点符号用来传达的信息已经消失了？我很清楚 K&R 将 { 放在“if”或“for”的末尾以在这里和那里保存一个字节。不能在这里用这个借口。随着 HDD 空间飙升超过 100 MiB，作为丧失可读性的借口的空间消失了。

征求您的意见。如果有充分的理由这样做，我会很乐意学习它，也许再过 50 年我就会习惯它。当然，编译器识别这些（恕我直言）错别字并继续前进是很好的，但仅仅因为您可以这样编码并不意味着您必须这样做，对吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:36:56.117

关于 C++ 中对象和函数声明之间偶尔的歧义，您当然是正确的，请搜索“最令人烦恼的解析”。但是，如果您*总是*感到困惑，那仅表示您不太擅长阅读 C++。你应该通过练习来提高。但无论如何，众所周知，C++ 主要不是为了易于阅读而设计的，尤其是在没有实践的情况下。它还有其他设计优先级。不是每个人都共享这些优先级，这就是为什么不是每个人都使用 C++。

至于用括号括起来的条件，欢迎你写

```
if (foo) { bar; } 
```

而不是

```
if(foo) { bar; } 
```

为了在`if`函数调用的语法和语法之间建立人为的区别。只要词法分析器可以找到标记之间的边界，C 对空格就完全放松了，所以剩下的就是风格，而不是语言。如果你想知道这种对空白的放松是什么时候开始的——我想在 ALGOL 系列语言的开发过程中的某个时间。我不知道 ALGOL58，但那将是一个检查它是否存在的地方。

我很确定您的一些“旧方式”语言使用括号来对表达式进行分组，以及将函数参数括起来，因此您声称将括号称为函数调用封装器的真正含义从未真正存在过。

我认为我从未将 C 或 C++ 程序误认为是函数调用，而且我认为您也应该学会不要*。*`if`如果人们用解析为 的宏做奇怪的事情`if`，毫无疑问他们会让我感到困惑。但是，没有人声称 C 风格的宏不会引起混乱。

如果您的主要主张是所有语言都应该以大致相似的方式标点符号，那么请查看 Lisp 和 Ruby。希望你会吹一个垫圈然后克服它;-)

> 我很清楚 K&R 将 { 放在“if”或“for”的末尾以在这里和那里保存一个字节。不能在这里用这个借口

这可能是 Ritchie 把它放在那里的原因，但这不是我把它放在那里的原因。我把它放在那里主要是为了节省垂直空间。这在今天仍然是有限的：我的硬盘可能能够以它容量的一小部分存储我将编写的每一行代码，但我仍然使用我的显示器的整个高度来读取代码，给予或占用一点屏幕家具。我很确定，`{`-on-a-line-on-its-own 是由不喜欢通过一次在屏幕上显示多个功能而使事情复杂化的人发明的。额外的垂直空白巧妙地防止了这种情况，并且也比更紧凑的样式更严格地限制了适合屏幕的功能的复杂性。

Python 为每个块节省了另一行垂直空间，根本不关心开闭标点符号，尽管我不认为这*就是*GvR 这样做的原因。

总之，我认为我的答案是“不”，并不是每个人都*准确地*分享您对代码格式的好恶。还是我的。想必也是好事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:40:44.967

由于 C++、Java、C# 等现代语言都是高级语言，所有这些关键字都让它们更易于理解和“友好”。它们应该尽可能接近我们的共同语言。有时会更改“默认”坐标以使代码看起来更好、更清晰和可读。这一切都是为了让程序员的工作更轻松。

现在许多框架，如 Visual Studio (.NET) “更正”您的代码放置和删除空格、制表符等。

问题只是习惯了这一点。该规则会发生变化，并将不断变化并采用新的标准。所以世代的问题在这里很明显。

顺便说一句，`for`是一个函数：它是一个迭代器。_ 也一样，`if`它需要一个谓词和一个函数作为参数。

# sql-server - 复制警告：允许复制 FILESTREAM 数据

> ID：10980119
> 
> 赞同：1
> 
> 时间：2012-06-11T12:27:49.647
> 
> 标签：sql-server, sql-server-2008, warnings, replication, merge-replication

我执行了一行脚本

```
exec sp_addmergearticle @publication = ... 
```

并收到此警告

> 警告：为了让 FILESTREAM 数据的复制以最佳方式执行并降低内存利用率，“stream_blob_columns”属性已设置为“true”。要强制 FILESTREAM 表文章不使用 blob 流，请使用 sp_changemergearticle 将“stream_blob_columns”设置为“false”。

是不是重要 ？

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:25:41.807

**[@stream_blob_columns=]'stream_blob_columns'**

指定在复制二进制大对象列时使用数据流优化。stream_blob_columns 是 nvarchar(5)，默认为 FALSE。true 表示将尝试优化。

但是，当您在启用 Filestream 的服务器上**使用向导**通过 SQL Server 管理工作室设置复制时， stream_blob_columns 选项被**静默设置为 true**。**但是，通过脚本**创建复制时会显示以下**警告**（这是推荐的方法）。

 ****警告：为了让 FILESTREAM 数据的复制以最佳方式执行并降低内存利用率，“stream_blob_columns”属性已设置为“true”。要强制 FILESTREAM 表文章不使用 blob 流，请使用 sp_changemergearticle 将“stream_blob_columns”设置为“false”。**

[参考](http://support.microsoft.com/kb/2647118)**

# iphone - 通过 ios sdk 在 facebook 上进行视频标记

> ID：10980121
> 
> 赞同：2
> 
> 时间：2012-06-11T12:27:57.363
> 
> 标签：iphone, ios

如何使用 facebook api 和 ios sdk 在视频中标记我们的 facebook 朋友 ..

请建议我做同样的事情的正确方法......提前谢谢.. abhishek ..

# php - 使用脚本转换表中的列值

> ID：10980123
> 
> 赞同：1
> 
> 时间：2012-06-11T12:28:03.673
> 
> 标签：php, javascript, database, perl

我是脚本新手，所以坚持我。我正在尝试创建一个脚本来转换表中的列值。我目前正在使用 SQL Management Studio。

这是我正在尝试做的事情：

我有一列以这种形式包含帐号：

```
R12345
M23456
T12345 
```

我正在尝试将第一个字母转换为数字序列，然后保留剩余的数字。例如：

```
R12345 to 10012345
M23456 to 20023456
T12345 to 30012345 
```

我似乎找不到运行这个脚本的文件，我这样做的原因是与这个表和另一个只有这些数字形式的表创建一个 1 对 1 的关系。我被卡住了在这个问题上已经有一段时间了，现在我在这张表中有太多的记录无法自己做。关于我应该如何去做这件事的任何想法？我应该使用任何特定的 DBMS 或脚本语言吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:36:58.083

```
UPDATE accounts_table
SET account_number=CONCAT(
  CASE 
    WHEN SUBSTR(account_number,1,1)='R' THEN '100'
    WHEN SUBSTR(account_number,1,1)='M' THEN '200'
    WHEN SUBSTR(account_number,1,1)='T' THEN '300'
  END,
  SUBSTR(account_number,2)
) 
```

# macos - 使用 pkgbuild 要求在组件包中重新启动

> ID：10980128
> 
> 赞同：2
> 
> 时间：2012-06-11T12:28:27.960
> 
> 标签：macos, package

我正在更新一些构建脚本以使用 pkgbuild 而不是 PackageMaker，但我没有看到要求重新启动组件包的选项。在 PackageMaker 中，可以使用以下两种方法之一来完成要求重新启动：

*   （旧版兼容模式）在 Info.plist 中，将 IFPkgFlagRestartAction 设置为 RequiredRestart。
*   在 PackageInfo 文件中，将 pkg-info>postinstall-action 设置为重新启动。

我没有看到 pkgbuild 或其组件包 plist 的任何类似选项。我知道，当我们使用 productbuild 构建发行版时，我们可以选择使用发行版文件的 pkg-ref>onConclusion 键在每个包的基础上要求重新启动。但这是现在唯一的方法（不使用 PackageMaker）吗？如果是这样，我想知道为什么这个要求被移出组件包并进入依赖于它们的发行版。在我看来，当组件包可以指定自己的要求时，它们仍然更加模块化。

**编辑：**如果您在生成的 PackageInfo 中设置 postinstall-action="restart" 您可以强制重新启动。现在的问题是如何教 pkgbuild 自动将其写入 PackageInfo 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T16:50:13.543

请注意，如果您按照[此答案](https://stackoverflow.com/a/11487658/120292)`productbuild`中所示使用，您可以修改文件以要求重新启动，并且该格式有[据可查](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/DistributionDefinitionRef/Chapters/Distribution_XML_Ref.html#//apple_ref/doc/uid/TP40005370-CH100-SW11)。这是一个使用示例：`distribution.xml``sed`

```
sed -i "" -e 's/onConclusion="None"/onConclusion="RequireRestart"/' distribution.xml 
```

这避免了扩展和展平包，并允许您包含自定义背景、欢迎文本等 :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T10:11:22.070

无法通过参数或 component.plist 来完成此操作

因此，我通过 shell 脚本扩展、编辑和展平包来做到这一点：

```
#Replace the value of the postinstall-action attribute to restart
echo "Expanding archive ${BDIR}/${NAME}-Installer.pkg"
pkgutil --expand "Installer.pkg" installertmp

echo "Replacing postinstall-action \"none\" with \"restart\""
sed -e 's/postinstall-action=\"none\"/postinstall-action=\"restart\"/' -i '' installertmp/PackageInfo

echo "Flattening archive Installer.pkg"
pkgutil --flatten installertmp "Installer.pkg"

rm -f -r "installertmp" 
```

# sqlite - 选择前 1 或使用 FMDB 获取第一条记录

> ID：10980132
> 
> 赞同：2
> 
> 时间：2012-06-11T12:28:38.423
> 
> 标签：sqlite, fmdb

我正在使用 FMDB，我只想使用 TOP 1 选择一条记录 - 你可以使用 FMDB 执行此操作吗？我已经用 Google 搜索过，但在任何地方都没有发现这一点 - 似乎是一个非常常见的使用场景。

任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:55:24.970

我不了解 fmdb，但它似乎使用原始/准备好的 sql 语句，因此您可以使用 SQLite 文档：

[http://www.sqlite.org/lang_select.html](http://www.sqlite.org/lang_select.html)

您可以看到它使用`LIMIT 1`（如 MySQL）而不是`TOP 1`（如 MS SQL）

# python - 如何在另一个字典中创建字典，而不覆盖旧数据

> ID：10980136
> 
> 赞同：1
> 
> 时间：2012-06-11T12:28:58.230
> 
> 标签：python, dictionary

我有一个数据列表，我正在从中创建 dict

```
a=['t1_h1','t2_h2']
b=['h1_d1','h1_d2','h2_d3']
c=['d1_dom1','d2_dom2','d3_dom3']
d=['dom1_a','dom1_b','dom2_a','dom2_b','dom3_a','dom3_b'] 
```

我尝试使用此代码

```
for item in a:
f[item.split('_')[0]]={}
for hypercube in b:
    if item.split('_')[1] in hypercube:#h1 in b

        f[item.split('_')[0]][item.split('_')[1]]={}

        for dimension in c:
            if hypercube.split('_')[1] in dimension:#d1 in c 
                f[item.split('_')[0]][item.split('_')[1]][hypercube.split('_')[1]]={}
                for domain in d:
                    if dimension.split('_')[1] in domain:#dom1 in d
                        if f[item.split('_')[0]][item.split('_')[1]][hypercube.split('_')[1]].has_key(dimension.split('_')[1]):
                            f[item.split('_')[0]][item.split('_')[1]][hypercube.split('_')[1]][dimension.split('_')[1]].append(domain.split('_')[1])
                        else:
                            f[item.split('_')[0]][item.split('_')[1]][hypercube.split('_')[1]][dimension.split('_')[1]]=[domain.split('_')[1]] 
```

实际上我正在尝试以这种格式打印：

```
{'t1': {'h1': {'d1': {'dom1': ['a', 'b']}, 'd2': {'dom2': ['a', 'b']}}},
     't2': {'h2': {'d3': {'dom3': ['a', 'b']}}}} 
```

但我得到的输出是：

```
{'t2': {'h2': {'d3': {'dom3': ['a','b']}}}, 't1': {'h1': {'d2': {'dom2': ['a','b']}}}} 
```

但在改变最后一件事后，'t1' 'd1' 值丢失

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:08:11.537

我认为这是一个很好的使用案例[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict

def new_dict(items):
    items = [i.split('_') for i in items]
    d = defaultdict(list)
    for k, v in items:
        d[k].append(v)
    return dict(d)

def combine(x,y):
    for i in x:
        x[i] = dict((j,y[j]) for j in x[i])
    return x

a, b, c, d = [new_dict(i) for i in [a, b, c, d]]

c=combine(c,d)
b=combine(b,c)
a=combine(a,b)
print a
#Output:
{'t2': {'h2': {'d3': {'dom3': ['a', 'b']}}},
't1': {'h1': {'d2': {'dom2': ['a', 'b']}, 'd1': {'dom1': ['a', 'b']}}}} 
```

`new_dict``dict`通过将输入字符串拆分为键和值来返回 a 。很酷的一点是，通过使用`defaultdict`我们可以轻松地将其他键值附加到键，而无需进行任何检查，即：

`['h1_d1','h1_d2','h2_d3']`变成：`{'h2': ['d3'], 'h1': ['d1', 'd2']}`而不是`{'h2': ['d3'], 'h1': ['d2']}`

然后我们结合从最里面开始向外增长的字典。这通过迭代外部字典的键，并将每个值替换为由该值作为键的字典，并且该值是键，来自内部字典的值对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:06:50.220

也许您应该尝试简化代码？试试这个：

```
def pack_to_tree(*lists):

    split_ = lambda l: (i.split('_',1) for i in l)

    # last level
    result = {}
    for k, v in split_(lists[-1]):
        result.setdefault(k, []).append(v)

    # other levels
    for d in lists[-2::-1]:
        subresult = {}
        for k, v in split_(d):
            subresult.setdefault(k, {})[v] = result[v]
        result = subresult
    return result

a = ['t1_h1', 't2_h2']
b = ['h1_d1', 'h1_d2', 'h2_d3']
c = ['d1_dom1', 'd2_dom2', 'd3_dom3']
d = ['dom1_a', 'dom1_b', 'dom2_a', 'dom2_b', 'dom3_a', 'dom3_b']

print pack_to_tree(a, b, c, d) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:10:10.677

您不想嵌套 for 循环，而是希望在处理每个列表 a、b、c 和 d 时嵌套 for*搜索*，从而为 f 添加越来越深的级别。这给出了您想要的输出：

```
f = {}
for item in a:
    ak1,ak2 = item.split('_')
    f[ak1] = {ak2:{}}
for item in b:
    bk1,bk2 = item.split('_')
    next(f[akey][bk1] 
            for akey in f 
                if bk1 in f[akey])[bk2] = {}
for item in c:
    ck1,ck2 = item.split('_')
    next(f[akey][bkey][ck1] 
            for akey in f 
                for bkey in f[akey] 
                    if ck1 in f[akey][bkey])[ck2] = []
for item in d:
    dk1,dk2 = item.split('_')
    next(f[akey][bkey][ckey][dk1] 
            for akey in f 
                for bkey in f[akey]
                    for ckey in f[akey][bkey]
                        if dk1 in f[akey][bkey][ckey]).append(dk2)

import pprint
pprint.pprint(f) 
```

印刷：

```
{'t1': {'h1': {'d1': {'dom1': ['a', 'b']}, 'd2': {'dom2': ['a', 'b']}}},
 't2': {'h2': {'d3': {'dom3': ['a', 'b']}}}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T12:55:37.780

阅读该代码相当困难，但我认为在您创建新字典 ( `...={}`) 尤其是新链表 ( `...=[]`) 的行中，您应该尝试以下操作：

```
if (not  f[item.split('_')[0]][item.split('_')[1]][hypercube.split('_')[1]][dimension.split('_')[1]]):
   f[item.split('_')[0]][item.split('_')[1]][hypercube.split('_')[1]][dimension.split('_')[1]]=[]
f[item.split('_')[0]][item.split('_')[1]][hypercube.split('_')[1]][dimension.split('_')[1]].append(domain.split('_')[1]) 
```

然后你确定你没有覆盖已经存在的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T13:41:41.117

样式问题已经提到过，所以我专注于功能。原始代码中的简单错误在最后一行。由于字典键序列的**第一次**出现只是分配了一个空列表，因此重要的值

> domain.split('_')[1]

丢失了。所以实际上没有覆盖，但从未存储过缺失值。用这个术语填充空方括号应该可以解决这个问题。

# jquery - 使用 jQuery 让元素悬停/浮动/猎物

> ID：10980137
> 
> 赞同：1
> 
> 时间：2012-06-11T12:29:01.423
> 
> 标签：jquery, hover, css-float

我想给一个元素一种效果，就像它在它的位置上缓慢地盘旋/漂浮（或者像鸟一样捕食，如果你愿意的话）。换句话说，给它一点随机运动，但大致保持在原位。

我试图在搜索引擎中找到它，但正如您可能想象的那样，它结合了 jQuery 和悬停或浮动，结果完全不同。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:36:16.287

[jQuery Floating Effect](http://www.inwebson.com/demo/jqfloat/)

I googled 'jQuery floating effect' -> and the first result is what you want.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:40:20.593

jQuery 是一个非常有趣的工具。您实际上可以看到范围广泛的*“效果”*，这些“效果”可以使您的页面看起来更吸引人。我通常会在他们的网站上寻找有趣的小部件和效果。查看链接[http://jqueryui.com/demos/effect/](http://jqueryui.com/demos/effect/)，您可能会找到您可能感兴趣的内容！

希望你有一段快乐时光！:)

# regex - 使用正则表达式从带引号的字符串中删除引号

> ID：10980141
> 
> 赞同：1
> 
> 时间：2012-06-11T12:29:14.047
> 
> 标签：regex, vb.net, string, replace

我有一个字符串

```
FVAL(XXX)="TRUE" AND FVAL(TT)="FALSE" 
```

我想用AND替换所有`"TRUE"`和。`"FALSE"``TRUE``FALSE`

现在结果字符串应该是

```
FVAL(XXX)=TRUE AND FVAL(TT)=FALSE 
```

下面显示的代码是否符合此要求。

```
Regex.Replace("FVAL(XXX)=""TRUE"" AND FVAL(TT)=""FALSE""", "[""]TRUE[""]", "TRUE", RegexOptions.IgnoreCase) 
```

**注意：**现在我知道你们会说这不是一个建设性的问题，应该关闭，但我问这个的原因是因为我想出的东西，必须写两次一次 for`TRUE`和一次 for `FALSE`，这不是想要的结果，而不是我希望正则表达式只查找和替换一次。此外，我必须绝对确定我的正则表达式不会错过任何模式。最后，如果您认为这不够有建设性，请继续关闭它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:35:59.400

USe

```
"(TRUE|FALSE)" 
```

and replace it by

```
$1 
```

In VB.NET this becomes

```
ResultString = Regex.Replace(SubjectString,
    """(TRUE|FALSE)\""", "$1", 
    RegexOptions.Singleline) 
```

Let us know if you have any more questions

# asp.net-mvc - ajax提交后Partial View无法正常显示

> ID：10980147
> 
> 赞同：0
> 
> 时间：2012-06-11T12:29:32.110
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0, jquery

我有以下代码，由于某种原因，它无法按照我的预期工作。基本上我在网上找到了这个示例，并希望根据我的需要对其进行调整，但问题是我似乎无法在页面上显示 ImageList。

代码如下：-

```
<script type="text/javascript">
    $(document).ready(function () {

            var imageList = $('#imageList');

            //hide the imageList initially
            imageList.hide();

    });

    var Project = {
        save: function () {
            var projectForm = $("#projectForm");
            if (projectForm.valid()) {
                projectForm.submit();
            }
            else {
                Project.onInvalidForm();
            }
        },
        onInvalidForm: function () {
            //CODE FOR INVALID FORM
        },
        onSaveBegin: function () {
            //CODE FOR SAVE BEGIN
        },
        onSaveSuccess: function () {
            //CODE FOR SAVE SUCCESS
            $('#imageList').fadeIn('slow');
        },
        onSaveFailure: function () {
            //CODE FOR SAVE FAILURE
        },
        onSaveComplete: function () {
            //CODE FOR SAVE COMPLETE
            $('#imageList').fadeIn('slow');
        }
    };
</script>

@using (Ajax.BeginForm(
    "/Create",
    new { },
    new AjaxOptions
    {
            InsertionMode = InsertionMode.Replace,
            OnComplete = "Project.onSaveComplete",
            OnFailure = "Project.onSaveFailure",
            OnSuccess = "Project.onSaveSuccess",
            OnBegin = "Project.onSaveBegin"
    },
    new { id = "projectForm", name = "projectForm" }))
    {
    <div > 
```

我似乎无法指出出了什么问题，并且无法显示 imageList。代码正在通过`onSaveSuccess: function ()`并且`onSaveCompete: function()`因为我`alert('')`之前在代码中做了一个验证它实际上是从那里传递的。

感谢您的帮助和时间

```
@if(Model != null)
{
    @Html.Hidden("hfProjectId", Model.Project.ProjectID)
}

<div class="editor-label">
        @Html.LabelFor(m => m.Project.ProjectTitle)
 </div>
 <div class="editor-field">
        @Html.TextBoxFor(m => m.Project.ProjectTitle)
        @Html.ValidationMessageFor(m => m.Project.ProjectTitle)
 </div>
 <div class="editor-label">
        @Html.LabelFor(m => m.Project.ProjectText)
 </div>
 <div class="editor-field">
        @Html.TextBoxFor(m => m.Project.ProjectText)
        @Html.ValidationMessageFor(m => m.Project.ProjectText)
 </div>
 <p>
        <input type="submit" value="Create" />
 </p>
</div>
}

<div id='imageList'>
@{
    if (Model != null)
    {
        if(Model.Project.ProjectID > 0)
        {
            Html.Partial("~/Views/Shared/ImageUpload.cshtml", new MvcImageUploaderPartial.ViewModels.ImageModel(Model.Project.ProjectID, 2, "Edit"));
        }
        else
        {
            Html.Partial("~/Views/Shared/ImageUpload.cshtml", new MvcImageUploaderPartial.ViewModels.ImageModel(0, 0, "Create"));
        }
    }
}
</div> 
```

****** *** ** *****更新***** ** *** ** *** ** *** ** *** ** *** ** *** ** ***** 项目控制器：-**

 **```
 [HttpPost]
    public ActionResult Create(Project project)
    {
        ProjectModel viewModel = new ProjectModel();

        if (ModelState.IsValid)
        {
            db.Projects.Add(project);
            db.SaveChanges();
            viewModel.Project = project;

            return View("Create", viewModel);
        }

        return View(project);
    } 
```

图像控制器：-

```
 public ActionResult Index()
    {
        ImageModel model = new ImageModel();

        return RedirectToAction("Create", "Project", model);
    }

    public ActionResult Save()
    {
        IEnumerable<Image> ImageList;

        //if (!String.IsNullOrEmpty(TempData["ProjectId"].ToString()))
        //    iProjId = Convert.ToInt32(TempData["ProjectId"]);

        foreach (string name in Request.Files)
        {
            var file = Request.Files[name];

            string fileName = System.IO.Path.GetFileName(file.FileName);

            Image image = new Image(fileName, Request["description"]);
            ImageModel model = new ImageModel();

            ImageList = model.Populate();
            model.Add(ImageList, image, file);
        }

        return RedirectToAction("Index", "Image");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:11:10.857

我看到`AjaxOptions`你没有通过`UpdateTargetId`。您应该如下更新代码，

```
@using (Ajax.BeginForm(
    "/Create",
    new { },
    new AjaxOptions
    {
            UpdateTargetId = "imageList",
            InsertionMode = InsertionMode.Replace,
            OnComplete = "Project.onSaveComplete",
            OnFailure = "Project.onSaveFailure",
            OnSuccess = "Project.onSaveSuccess",
            OnBegin = "Project.onSaveBegin"
    }
    //.. 
```

还有一件更重要的事情是您在 中指定的元素`UpdateTargetId`应该在主视图中，而不是在将由 ajax 操作返回的部分视图中。另外，请确保您参考了不显眼的 ajax 库。**

# c# - 软件之父对他的双胞胎程序的（无）有条件的爱

> ID：10980149
> 
> 赞同：2
> 
> 时间：2012-06-11T12:29:40.607
> 
> 标签：c#, autohotkey

我有一个经常失败的 C# 程序。没关系，我已经创建了这个程序，它是我的孩子，无论如何我都喜欢它。作为一种支持，我决定围绕它编写一个 AutoHotKey 包装器，它会自动重新启动程序，直到它完成且没有错误。现在，我希望这不会让我成为一个糟糕的父亲，但我对 C# 程序还有一个愿望：

如果它在不运行到 Windows 7 寻求帮助的情况下失败就好了。问题是它需要我说“是的，关闭程序，不要调试它”。在 Windows 认为它​​可以找到解决问题的方法之后。

我怎样才能让程序毫无怨言地失败？它还有大约 5500 个 PDF 需要考虑，如果这两个程序能够相互解决问题，我会感到自豪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:35:04.950

或者，如果有一个模块失败了很多，你可以：

*   使用[System.Diagnostics.Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)将其作为单独的进程启动。
*   使用另一个[AppDomain](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)（正在处理中）。如果检测到故障，请卸载该进程。

我会尝试解决问题，而不是试图对抗症状。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T12:36:25.403

修复您的孩子将是首选路径，但或者，您可以使用以下注册表项来禁用提示

[来自 MSDN](http://msdn.microsoft.com/en-us/library/bb513638.aspx)

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting]
"ForceQueue"=dword:00000001
"DontShowUI"=dword:00000001

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\Consent]
"DefaultConsent"=dword:00000002 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T13:15:30.640

这似乎已经解决了，但是：

[SetErrorMode](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680621%28v=vs.85%29.aspx)似乎能够为您当前的进程完全停用 Windows 错误报告对话框。（经过测试并适用于我的人为访问违规。）

```
[DllImport("kernel32.dll")]
public static extern uint SetErrorMode(uint uMode);    // from msdn page 
```

将 uMode 设置为`SEM_NOGPFAULTERRORBOX`，即`0x0002`。

（顺便说一句：似乎你已经创建了一个旅鼠程序，所以你是一个旅鼠父亲。）

# sharepoint - 如何禁用文件系统访问（通过 UNC）SharePoint 2010 中的文档库？

> ID：10980155
> 
> 赞同：1
> 
> 时间：2012-06-11T12:29:54.280
> 
> 标签：sharepoint, unc, event-receiver

我在 SharePoint 2010 中创建了文档库。我可以通过 UNC 路径访问文档库，例如 \server\sitecollection\path，例如 \domain.com\applications\libraryName 是否有任何方法禁用文件系统访问（通过 UNC）对文档SharePoint 2010 中的库？

间接问题是通过文件系统访问（例如 Windows 资源管理器）将文档添加到库时，事件接收器不会触发。我假设事件接收器是基于网络事件的。我对吗 ？

# git - Git 更新钩子拒绝非 ascii 文件名

> ID：10980161
> 
> 赞同：2
> 
> 时间：2012-06-11T12:30:21.437
> 
> 标签：git, shell

我尝试编写一个 git`update`钩子，以防止推送添加具有非 ascii 文件名的文件的提交，类似于`pre-commit`git 分发的钩子。

问题是服务器在钩子运行之前已经对文件名进行了一些重写。我`git show --pretty="format:" --name-only $rev`用来获取正在更新的 rev 中的文件，但是使用非 ascii 字符提交的文件显示为带有转义代码的文件。

我怎样才能实现这样的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T15:09:25.190

repo 必须配置为`core.quotepath = false`. 然后出现正确的文件名，我的钩子按预期工作。

# fibonacci - 使用数组的斐波那契数列

> ID：10980164
> 
> 赞同：1
> 
> 时间：2012-06-11T12:30:33.987
> 
> 标签：fibonacci

打算为这里的屠杀献上自己。

已检查其他问题是否有效，但似乎无法找到以下代码的 IndexOutOfRange 异常的原因：

```
public static int fib2(int n)
    {
        int[] fibarray = new int[n];

        if (n == 0) return 0;

            fibarray[0] = 0;
            fibarray[1] = 1;

            for (int i = 2; i < n; i++)
            {
                fibarray[i] = fibarray[i - 1] + fibarray[i - 2];

            }

            return fibarray[n];

     } 
```

我敢肯定，这真的很愚蠢，但它让我发疯（双关语）......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:32:51.050

这是最后一行！

```
return fibarray[n]; 
```

您表中的最后一个索引是 n-1，而不是 n。

**更新**

就像阿提拉说的，如果 n=1，这条线

```
fibarray[1] = 1; 
```

还将制作一个 IndexOutOfRange

# php - 使用 SQL 获取空记录

> ID：10980168
> 
> 赞同：1
> 
> 时间：2012-06-11T12:30:42.967
> 
> 标签：php, mysql, sql

我有一个表格，我在其中选择不同的框，并且每个框都存在一些记录，即数据库中的（框的开口数），但对于选定的框，可能不存在任何记录，即框未打开甚至单次。目前，当我选择不同的框并且如果一个框不存在记录时，它甚至不返回我想要的空数组，它甚至返回所选框的空结果。我怎样才能做到这一点？我的查询是

```
public function getBoxOpenings($boxes, $from_date, $to_date){
$query = $this->db->select('box_id, COUNT(box_id) AS Openings')
    ->from('mc_boxes_has_openings')
    ->where_in('box_id', $boxes)
    ->where('actiontime >=', $from_date)
    ->where('actiontime <=', $to_date)
    ->group_by('box_id')
    ->get();
$data = $query->result_array();
return $data;
} 
```

编辑：

如果我选择 3 个框并提交表单，并且只存在 2 个框的记录，它会返回类似这样的内容

```
 Array
(
[0] => Array
    (
        [mc_boxes_idmc_boxes] => 12
        [location] => FRA-Air
        [Openings] => 1
    )

[1] => Array
    (
        [mc_boxes_idmc_boxes] => 14
        [location] => FRA-Hof
        [Openings] => 1
    )

) 
```

我怎样才能得到所有三个记录一个空的像这样

```
[2] => Array
    (
        [mc_boxes_idmc_boxes] => 16
        [location] => Test
        [Openings] => 
    ) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:43:53.527

为什么不只计算整个记录？

```
public function getBoxOpenings($boxes, $from_date, $to_date){
$query = $this->db->select('box_id, COUNT(*) AS Openings')
    ->from('mc_boxes_has_openings')
    ->where_in('box_id', $boxes)
    ->where('actiontime >=', $from_date)
    ->where('actiontime <=', $to_date)
    ->group_by('box_id')
    ->get();
$data = $query->result_array();
return $data;
} 
```

虽然我不明白你的 group_by 条款......

# sql - 原始字段为空时的sql concat

> ID：10980169
> 
> 赞同：3
> 
> 时间：2012-06-11T12:30:45.367
> 
> 标签：sql, concat

我正在尝试在字段可能为空或不为空的列上运行 CONCAT。如果该字段不为空，则没有问题，即如果 A 列中的字段等于 a：

```
SET A = CONCAT(A, '_b') 
```

给出 a_b。问题是，如果 A 列中的字段为空，则 concat 不会返回任何内容。即使字段为空，有没有办法连接它，在这个例子中，它会返回'_b'？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T12:32:34.260

在 Sql 服务器中

```
SET A = CONCAT(isnull(A,''), '_b') 
```

`IFNULL`在 Mysql 中使用。

[根据不同的数据库引用不同的函数](http://www.w3schools.com/sql/sql_isnull.asp)

# debugging - 如何让 Microsoft Script Debugger 与 64 位 Windows 7 一起工作？

> ID：10980171
> 
> 赞同：7
> 
> 时间：2012-06-11T12:31:03.703
> 
> 标签：debugging, windows-7, vbscript, 64-bit

我正在尝试调试一些 VBScript，通常我会安装古老的（但免费的）[Microsoft Script Debugger](http://www.microsoft.com/en-us/download/details.aspx?id=22185)，它可以在 32 位 XP 和 32 位 Windows 7 上正常工作。

然而，在 64 位 Windows 7 上安装它之后，无论是`//d`或`//x`（甚至两者）都不会真正调用调试器。该脚本将愉快地运行，就好像我从未提供过该选项一样——但这并不是很有用。

我能做些什么来让它工作吗？我只是偶尔用它来挠自己的痒，所以我不能证明购买一些商业工具作为替代品是合理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-01T06:45:51.190

Microsoft 已从其服务器中删除了脚本调试器。因此，您可以从[此处](http://www.mediafire.com/file/bvobcrm39ve1ywn/Microsoft_script_debugger.zip)下载并尝试使用它。我正在使用 Windows 7（64 位），它对我来说很好。

# java - 我可以在Android中以某种方式别名R吗？

> ID：10980175
> 
> 赞同：5
> 
> 时间：2012-06-11T12:31:37.007
> 
> 标签：java, android, git, android-resources

我有两个 Android 应用程序，它们彼此共享 90% 的代码，并且由于政治原因（我认为也是技术原因）需要有单独的包名称（因此它们将出现在 Google Play 中的不同 URL 下）

我为每个应用程序使用带有两个分支的 git，并在每次发布之前手动同步这两个分支。当运行两个分支的 diff 命令时，我的很多文件都不同，而实际上唯一不同的是自动生成的文件 R 的包名，所以对于第一个应用程序，我有 15 个文件

```
import pkg.name.one.R; 
```

对于其他应用程序

```
import pkg.name.two.R; 
```

我想以`R`相同的方式为两个类导入。

我尝试像这样包装 R：

打包场景；

```
public class RWrapper {

    public class R extends pkg.name.one.R {}

} 
```

（这将使`RWrapper`这两个分支之间唯一不同的文件关于源或`R`）但唉`R`是最后一个类（我什至不确定这是否会起作用）

那么有没有办法以某种方式给 R 类起别名，让我可以`import pkg.name.one.R; / import pkg.name.two.R;`用统一的 import 语句替换它？

我也愿意接受其他可以解决我的同步问题的建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:04:04.070

Couldn't you modify `RWrapper` to make `R` a static field instead of a class? Your code would then access `R` via `RWrapper.RClass...`

Example

```
public class RWrapper
{
  public static pkg.name.one.R R;
} 
```

and

```
public class RWrapper
{
  public static pkg.name.two.R R;
} 
```

You'd access the R fields with:

```
RWrapper.R.<blah> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-04T23:27:33.083

seggy 几乎是正确的，但是您需要单独公开每个 R.class。如果子模块有自己的命名空间，那么您可以重用类名 R 而无需修改子模块中的任何内容。

```
package the.submodule.package;

public final class R {
public static the.app.package.R.string string;
public static the.app.package.R.drawable drawable;
public static the.app.package.R.id id;
//public static the.local.appPackage.R.anythingElse anythingElse;
} 
```

注意：我不宽恕跨项目共享 R，但有时会受到时间限制等。

# c# - 在 C# 中创建解析枚举的函数

> ID：10980180
> 
> 赞同：2
> 
> 时间：2012-06-11T12:32:00.473
> 
> 标签：c#

我知道要将字符串解析为特定`enum`的：

```
enum AnEnumType 
{
   TEST_,
   OTHER_TEST_,
   OTHERS_
}

enum OtherEnumType 
{
   TEST1_,
   OTHER_TEST1_,
   OTHERS1_
}

string aValueString = "TEST_";

AnEnumType result = (AnEnumType)Enum.Parse(typeof(AnEnumType), aValueString); 
```

所以，我想创建一个函数，一个通用的函数，它为我的`enum`（s）使用解析器，例如：

```
public Type ConvertStringToAnEnum(string value, Type anyType){

return (anyType)Enum.Parse(typeof(anyType), aValueString);
} 
```

但我觉得这样不行……

如何制作解析函数中指定为参数的任何枚举类型的函数？

就像我想打电话一样`OtherEnumType result = ConvertStringToAnEnum("TEST1_", OtherEnumType)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T12:35:10.130

使泛型方法泛型：

```
public T ConvertStringToAnEnum<T>(string value){
  return (T)Enum.Parse(typeof(T), value);
} 
```

用法：

```
OtherEnumType result = ConvertStringToAnEnum<OtherEnumType>("TEST1_"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T12:35:39.823

你可以尝试使用

```
public T ConvertStringToAnEnum<T>(string value)
{
    return (T)Enum.Parse(typeof(T), value);
} 
```

有了这个你可以做
`OtherEnumType tp2 = ConvertStringToAnEnum<OtherEnumType>("TEST1_");`

或使用扩展方法

```
public static class Extensions
{
    public static T ToEnum<T>(this string value)
    {
        return (T)Enum.Parse(typeof(T), value);
    }
} 
```

有了这个你可以做

```
OtherEnumType tp2 = "TEST1_".ToEnum<OtherEnumType>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:42:11.113

根据您想要获得的参与程度，您还可以使用属性为您的枚举值提供更具描述性的名称。[在 C# 中将字符串与枚举相关联](http://blog.spontaneouspublicity.com/associating-strings-with-enums-in-c)对如何执行此操作提供了很好的介绍。

# doctrine-orm - 在 Doctrine2 中保存单个实体

> ID：10980183
> 
> 赞同：4
> 
> 时间：2012-06-11T12:32:08.660
> 
> 标签：doctrine-orm

我可以在 Symfony 中保存单个实体，而不刷新所有更改吗？例如。

```
$em = $this->getDoctrine();
$entity1 = $em->find('\SomeEntity', 1);
$entity2 = $em->find('\SomeEntity', 2);
$entity1->setFoo(1);
$entity1->persist();
$entity2->setFoo(2);
$this->saveRightNow($entity2); // entity2 is written to the DB at this point
$em->flush(); // entity1 is written to the DB at this point 
```

查看源代码，似乎我可以使用`Doctrine\ORM\UnitOfWork::commit`：

```
function saveRightNow($entity) {
    $em = $this->getDoctrine();
    $uow = $em->getUnitOfWork();
    $uow->commit($entity);
} 
```

但我找不到任何关于使用`commit`这种方式的文档（也没有太多关于使用它的信息，即使它没有被标记为内部函数）。这是一个好主意吗？它有什么危险吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-09T04:14:40.520

我们所有的实体都是名为 Entity.php 的超类的子类，它具有如下功能：

```
public function save($flush = TRUE)
{
    try {
        self::getEntityManager()->persist($this);

        if ($flush) {
            self::getEntityManager()->flush();
        }
    } catch (\Exception $e) {
        return $e;
    }

    return TRUE;
} 
```

对 getEntityManager 的引用可以提供您最喜欢的获取 EntityManager 的方法（我们将我们的方法保存到 Zend_Registry 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-27T12:19:35.487

此外，如果这是一个老问题，也许回复可能对其他人有用，因为这是 Google 显示的第一个问题。

所以，你不能`flush`一个单一的实体，但你可以`detach`。

因此，在您的特定情况下，您可以执行以下操作：

```
$em = $this->getDoctrine();
$entity1 = $em->find('\SomeEntity', 1);
$entity2 = $em->find('\SomeEntity', 2);
$entity1->setFoo(1);
$entity2->setFoo(2);

// At this point start the "new" code
// So, first detach $entity2
$em->detach($entity2); // Now the EntityManager doesn't know anymore of $entity2
$em->flush(); // entity1 is written to the DB at this point

// Add again $entity2 to the EntityManager
$em->persist($entity2);
$em->flush(); 
```

显然，这是一个非常简单的例子。

在实际用例中，可能您已将 2 个以上的实体加载到 EntityManager 中。在这种情况下，如果您`detach($entity2)`可能是第一个 EntityManager`flush()`也会将对其他加载的实体所做的修改保存到数据库中。

因此，必须小心使用此解决方案。

另一种解决方案可能是使用`clear()`: 这将分离所有托管实体。它与刚刚初始化的新 EntityManager 非常相似。

我最近使用了最后一个解决方案来仅保存具有一些不必保存的相关实体的实体的部分数据。

所以我：

1.  首先清除实体管理器；
2.  然后重新加载我正在更新的实体；
3.  进行了相关修改；
4.  刷新了 EntityManager

进行非常具体的刷新可能有点复杂，当然，有一种方法来只保存部分实体会很有帮助。

但就目前而言，这些方法是唯一可能的方法。

# mysql - 如何通过几个过滤器从 MySQL 数据库中获取行？

> ID：10980200
> 
> 赞同：0
> 
> 时间：2012-06-11T12:33:45.900
> 
> 标签：mysql, optimization

我在 MySQL 数据库中有两个表，请参见下面的数据库结构：

```
tbl_product
id
1
2
3

tbl_product_filter
id | product_id | product_filter_value
1    1            1
2    1            2
3    1            3
4    2            1
5    2            2
6    3            1 
```

如何获得只有字段`product_filter_value` **1**和**2**值的产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:37:02.653

使用子查询：

```
SELECT *
FROM tbl_product
WHERE id IN (
    SELECT product_id
    FROM tbl_product_filter
    WHERE product_filter_value IN (1, 2)
) 
```

使用联接（此查询可能会多次显示一个产品）：

```
SELECT tbl_product.*
FROM tbl_product
INNER JOIN tbl_product_filter ON tbl_product.id = tbl_product_filter.product_id
WHERE product_filter_value IN (1, 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:58:14.410

```
SELECT tbl_product.*
FROM tbl_product_filter
INNER JOIN tbl_product USING (product_id)
WHERE product_filter_value IN (1, 2)
GROUP BY tbl_product_filter.product_id 
```

# jquery - 我需要backbone.js吗？

> ID：10980210
> 
> 赞同：0
> 
> 时间：2012-06-11T12:34:34.530
> 
> 标签：jquery, backbone.js

在我开发 web 应用程序时，backbone.js 最近引起了我的兴趣。现在我正在开始一个新的应用程序并正在考虑学习backbone.js。我已经完成了关于制作音乐播放器的 3 部分截屏教程的 1/3，我的印象是模型和视图的设置非常混乱和乏味。我正在 PHP/Codeigniter 框架中开发，所以我想我知道 MVC 将如何帮助我。

但是，如果我想开发一个单页（多标签）应用程序，比如让店主管理他们的库存，它可以使用显示仪表板、库存、供应、销售、助理、商店分店的标签。如果没有backbone.js，使用jQuery 的服务器端后端是否就足够了？jQuery 可以隐藏显示不同的选项卡视图、处理 UI 元素的交互、发送和检索 AJAX 调用、管理模态对话框……我可以使用数组时为什么还要使用集合和视图？在这种情况下，使用backbone.js 将如何帮助开发这个应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T12:43:36.573

> 如果没有backbone.js，使用jQuery 的服务器端后端是否就足够了？

当然，您可以使用 jquery 甚至纯 ol' javascript 自己构建您的应用程序。这完全取决于您要实现的目标的复杂性。

Backbone 旨在创建丰富的单页应用程序。因此，它提供了一种结构化的方法来描述、分组和处理您的数据。应用程序状态、模板化视图等的路由。例如，（模型的）集合提供的远不止数组。它们可以直接绑定到您的视图，观察更改并自动同步到服务器，只需很少的“胶水”代码。

如果您要将大部分应用程序逻辑放在客户端的浏览器中，则需要保持其结构化和组织性。Backbone.js 和其他几个富 js 框架在这方面做得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T16:04:55.313

关于backbone.js 的好处之一是您不会被迫接受全有或全无的提议。您可以从只使用其中的一部分开始，如果对您有意义，可以使用更多。您不需要对页面上的所有内容都使用视图，并且对于许多事情，使用普通的 js 对象而不是主干.js 模型可能是有意义的。您无需学习所有内容即可开始使用它，您可以从backbone.js 的部分开始，并根据需要进行混合和匹配。

Backbone.js 的关键点之一是为您的代码提供结构，当您的代码库变得更大或/以及当您需要查看时，其好处（更易于维护和进行修改/添加）通常会更加明显稍后的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T12:44:00.610

虽然backbone.js 乍一看很吸引人，但我完全无法接受我必须编写的所有不必要的额外代码才能使事情正常运行。我已经考虑过很多次骨干，但每次我都觉得这不值得，我坚持使用 rails 背景和必要的 jQuery 来让我度过难关。

如果我是你，我不会打扰。

# java - 如何将 Cases 用于 spinnerlist？

> ID：10980213
> 
> 赞同：0
> 
> 时间：2012-06-11T12:34:50.890
> 
> 标签：java, android, spinner

> **可能重复：**
> [微调器开关盒问题](https://stackoverflow.com/questions/4476379/spinner-switch-case-problem)

我想为 SpinnerList 使用 Cases 但我不适合我，我搜索了互联网但没有任何帮助。

```
 public void onMyButtonClick(AdapterView<?> parent,View view, int pos)  
 {                          

        EditText tstrenght = (EditText) findViewById(R.id.Tstrenght);
        //String hello = et.getText().toString();
        int in2 = new Integer(tstrenght.getText().toString());
        EditText scap = (EditText) findViewById(R.id.Scap);
        //String hello = et.getText().toString();
        int in1 = new Integer(scap.getText().toString());
     TextView Uitkomst = (TextView) findViewById(R.id.uitkomst);
     Uitkomst.setText("0.00");
     switch (Integer.parseInt(parent.getItemAtPosition(pos).toString()) {
                case R.string.Scap_prompt = 4:
                {

                    float uitkomst = (float) (((Math.sqrt(7200/(in2)))*100)/100);
                    Uitkomst.setText((String.valueOf(uitkomst)) + " mm");

                    //break;

                }
            }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:47:33.543

您没有正确使用 Switch/Case。

switch 语句告诉你要检查什么，看起来没问题，但是 case 应该只是一个值（与 switch 语句进行比较），case 中不应该有比较。（特别是一个没有意义的...... R.String.Scap_prompt 是一个常数，你正在将它与一个常数进行比较，所以它总是以相同的方式评估）。

这就是开关/机箱的外观：

```
switch (Integer.parseInt(parent.getItemAtPosition(pos).toString()) {           
    case 4:           
    {           
        float uitkomst = (float) (((Math.sqrt(7200/(in2)))*100)/100);           
        Uitkomst.setText((String.valueOf(uitkomst)) + " mm");           
        //break;           
    }           
 } 
```

# javascript - 正确结束正则表达式

> ID：10980214
> 
> 赞同：0
> 
> 时间：2012-06-11T12:34:57.463
> 
> 标签：javascript, jquery, regex

我有一个编辑器，可以在其中粘贴视频网址，我通过正则表达式将其转换为嵌入代码。

所见即所得编辑器中的网址是： [http ://emedia.is.ed.ac.uk:8080/JW/wsconfig.xml&file=mp4:directory/date_submitted/filename-stream-WSwifi.m4v](http://emedia.is.ed.ac.uk:8080/JW/wsconfig.xml&file=mp4:directory/date_submitted/filename-stream-WSwifi.m4v)

输出的html是：

```
<p>http://emedia.is.ed.ac.uk:8080/JW/wsconfig.xml&amp;file=mp4:directory/date_submitted/filename-stream-WSwifi.m4v</p> 
```

为了寻找这个，我在 JavaScript 中使用了以下正则表达式：

```
/http:\/\/(www.)?emedia.is.ed.ac.uk:8080\/JW\/?(.*)?/ 
```

但由于某种原因，匹配包含匹配`</p>`组 2 的以及？我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:47:29.470

试试这个

```
http:\/\/(www\.)?emedia\.is\.ed\.ac\.uk:8080\/JW\/?([^<]*) 
```

[在 Regexr 上](http://regexr.com?317l9)查看。

`.*`I use不是匹配任何字符，而是`[^<]*`匹配除“<”之外的任何字符。

我还删除了`?`最后的，因为使用`*`你不需要的量词，我还转义了你想要从字面上匹配的所有点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:45:56.100

在这种特定情况下，您可以将最后一个更改`.`为`[^<\s]`.

```
/http:\/\/(www\.)?emedia\.is\.ed\.ac\.uk:8080\/JW\/?([^<\s]*)/ 
```

这样比赛将在第一个`<`或空格处停止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:46:05.587

这

```
(.*)? 
```

最后吞下你的 p 标签。我会将正则表达式重写为

```
http:\/\/(www.)?emedia.is.ed.ac.uk:8080\/JW\/?([^<]*) 
```

现在第 2 组很干净

# nsis - makensis 似乎不适用于 /D 命令行选项

> ID：10980219
> 
> 赞同：2
> 
> 时间：2012-06-11T12:35:15.853
> 
> 标签：nsis

我制作了一个 NSIS 脚本，其中包含将我的可执行文件打包到一个文件中的内容。它工作正常。正在玩一些命令行选项，当然还计划签署卸载程序。

这是脚本的片段，我不明白为什么这不起作用。

```
Function .onInit

!ifdef GEN_ONLY_UNINSTALLER
WriteUninstaller "out\uninst.exe"
Quit
!endif

FunctionEnd 
```

使用此命令行选项时：

```
makensis /DGEN_ONLY_UNINSTALLER /V0 _Release_only_uninst.nsi 
```

它不会编写卸载程序并退出。我在这里想念什么？应该`WriteUninstaller`去哪里？我怀疑我没有在正确的地方调用它。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:40:14.240

您只完成了一半的工作，您需要执行生成的安装程序才能执行 WriteUninstaller 调用。

要获得卸载程序，您可以签名，您必须：

1.  在特定于卸载程序的 .nsi 上运行 makensis
2.  相同的 .nsi`!system`在自身上执行 makesis /Dmysymbol（将退出代码与 0 比较）
3.  用于`!system`执行步骤 2 中生成的安装程序（WriteUninstaller 现在将编写卸载程序）
4.  `!delfile`步骤 2 中生成的安装程序

大致是这样的：

```
!ifdef STEP2
Function .onInit
WriteUninstaller "out\uninst.exe"
Quit
FunctionEnd
Outfile "$%temp%\genun.exe"
Section
SectionEnd
!else
!system '"makensis" /DSTEP2 "${__FILE__}"' = 0
!system '"$%temp%\genun.exe" /S'
!delfile "$%temp%\genun.exe"
!endif 
```

此脚本将失败并出现错误，因为初始 makensis 实例不会生成有效的安装程序，这通常不是问题，因为此代码可以添加到创建真正安装程序的脚本中......（完整的脚本将生成卸载程序，签名，生成安装程序，然后签名）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T14:07:17.243

这不是你想的那样:o)

您所写的是您正在创建一个安装程序，该安装程序将在其启动期间创建（或不创建，取决于`ifdef`）卸载程序（`onInit`是*安装程序*入口点）。

# android - 如何从整个联系人中检索唯一的电子邮件 ID？

> ID：10980226
> 
> 赞同：0
> 
> 时间：2012-06-11T12:35:50.283
> 
> 标签：android, email, android-contacts

我的`main.xml`文件中有一个按钮。当我单击该按钮时，它将显示整个联系人列表的电子邮件 ID 列表。这意味着检索联系人的电子邮件 ID（如果有）。我需要电子邮件 ID 而不是联系人。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:38:55.510

请检查代码。

```
 Public ArrayList<String> getNameEmailDetails(){
    ArrayList<String> names = new ArrayList<String>();
    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);
    if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
            String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
            Cursor cur1 = cr.query( 
                    ContactsContract.CommonDataKinds.Email.CONTENT_URI, null,
                    ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", 
                            new String[]{id}, null); 
            while (cur1.moveToNext()) { 
                //to get the contact names
                String name=cur1.getString(cur1.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                Log.e("Name :", name);
                String email = cur1.getString(cur1.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
                Log.e("Email", email);
                if(email!=null){
                    names.add(name);
                }
            } 
            cur1.close();
        }
    }
    return names;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T05:22:47.063

试试下面的，

```
package stack.examples;

import java.util.ArrayList;
import android.app.Activity;
import android.content.ContentResolver;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Email;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class StackOverFlowGetContactsActivity extends Activity {

    ListView lvItem;
    private Button btnAdd;
    String displayName="", emailAddress="", phoneNumber="";
    ArrayList<String> contactlist=new ArrayList<String>();
    ArrayAdapter<String> itemAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
       lvItem = (ListView)this.findViewById(R.id.listView_items);  
       btnAdd = (Button)this.findViewById(R.id.btnAddItem);
       itemAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,contactlist);
       lvItem.setAdapter(itemAdapter);
       btnAdd.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v) {
               GetEmails();
           }
       });
    }

    private void GetEmails()
    {
        ContentResolver cr =getContentResolver();
        Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        while (cursor.moveToNext()) 
        {       
            String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
            Cursor emails = cr.query(Email.CONTENT_URI,null,Email.CONTACT_ID + " = " + id, null, null);
            while (emails.moveToNext()) 
            {               
                emailAddress = emails.getString(emails.getColumnIndex(Email.DATA));
                contactlist.add(emailAddress);
                itemAdapter.notifyDataSetChanged();
            }
            emails.close();

        }
        cursor.close(); 
    }
} 
```

# android - 在 AppEngine 和 Android 之间共享数据

> ID：10980227
> 
> 赞同：0
> 
> 时间：2012-06-11T12:35:56.657
> 
> 标签：android, google-app-engine

我想在基于 C2DM 的 Android 上使用 AppEngine，但我有一个奇怪的问题。是否有任何可能性或方法可以在服务器和客户端之间共享逻辑和应用程序数据？如果我想在线下国际象棋是可以的，但是如果我的游戏还提供了与我的朋友在平板电脑上离线下国际象棋的能力呢？我想在两种情况下使用完全相同的逻辑并使用完全相同的数据。在 AppEngine 中，我可以在 android 上使用 DataStore 或 CloudSQL（什么对新应用程序更好？）我必须使用 LiteSQL。我没有听说过 Android 上的 DataStore。我需要采取什么方式来做这样的事情？我想在任何可能的地方重用我的代码。我知道在连接的应用程序引擎 + android 项目中，我可以使用共享文件夹来放置一些需要通用的类，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:34:34.777

如果我正确理解您的问题，您真正要问的是您是否可以在两个平台上使用相同的数据存储。如果您想离线使用，答案是否定的。

也就是说，如果您将数据层编写为抽象，您应该能够在两个平台上使用大部分代码并且只需修改抽象。我假设您计划用 Java 对服务器端进行编码，因此大多数 JDO 调用将是相似的。您需要使您在 Android 上的架构类似于 App Engine Datastore 的功能。

# objective-c - 存储带有参数的函数数组以供稍后执行

> ID：10980228
> 
> 赞同：0
> 
> 时间：2012-06-11T12:35:57.013
> 
> 标签：objective-c, cocos2d-iphone, box2d

我觉得以下是一个缺乏好的设计，所以如果你能想到一个更好的解决我的问题的方法，请继续告诉我。我正在为 iPhone 制作一个带有 cocos2d 和 box2d 的游戏。

我有一个包含 1000 个 CGPoints 的数组，它们代表构成一段随机绘制的地形的直线段。地面在主角位置的前后一屏宽处绘制，并在每个游戏步骤中检查其位置。

我有多个 box2d 对象需要在沿地形的点创建（基于字符位置）。

**问题：**

如何存储对函数的多个引用以创建对象，包括参数，一旦我的角色到达某个位置，就可以执行这些对象。

**更多信息：**

Basically in my game, I create the game world a fixed distance infront of and behind my character in order to save computation. I have managed this with terrain but want to apply the same concept to in game items such as enemies, bridges etc. These will all be box2d bodies so I am trying to determine a way to store a list of upcoming box2d bodies (with positions at which they are created) and looping over these every game step in order for them to be created at the correct location ahead of the character.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:40:52.200

您可以使用一个[`NSInvocation`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsinvocation_Class/Reference/Reference.html)对象来存储一个完整的原型方法调用（目标、选择器和参数）。您可以在将来的某个时间调用该方法`-invoke`并使用 获取返回值`-getReturnValue:`。

# javascript - JQuery ajax post回调函数未执行

> ID：10980236
> 
> 赞同：1
> 
> 时间：2012-06-11T12:36:25.277
> 
> 标签：javascript, jquery, ajax

我编写了一个非常简单的 javascript 方法，它应该向服务器发送一个 ajax 请求，最后应该执行一个回调函数。问题是给定的回调没有被执行。我还在 chrome 开发人员工具中看到请求被执行，并返回所需的 JSON。我还将内容类型设置为 application/json。

这是我使用的代码：

```
this.checkAvailability = function(){
    console.log('Before test');
    $.post('/Roomanizer-Website/Reservation', {
        action: 'checkavailability',
        categoryname: $('#categoryname').val(),
        roomcount: $('#roomcount').val(),
        start: $('#start').val(),
        end: $('#end').val()
    }, function(data){
        console.log('callback');
        console.log(data);
        if(data.available == 'true'){
            $('#start_confirmation').html(data.arrival);
            $('#end_confirmation').html(data.leaving);
            $('#price_confirmation').html(data.price);
            this.nextStep();
        } else {
            alert('There are no free rooms during your chosen period.');
        }
    }, 'json');
}; 
```

“测试前”写在控制台上，而不是“回调”。但正如我已经说过的，请求被执行，并返回正确的 JSON：

```
{arrival : '20/06/2012', leaving : '28/06/2012', price: '0.0', available: 'true'} 
```

最后我将显示 http-header：

```
Request URL:http://localhost:8080/Roomanizer-Website/Reservation
Request Method:POST
Status Code:200 OK
Request Headersview source
Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4
Connection:keep-alive
Content-Length:97
Content-Type:application/x-www-form-urlencoded
Cookie:JSESSIONID=AF1302ECA526216D8207F365F6802814
Host:localhost:8080
Origin:http://localhost:8080
Referer:http://localhost:8080/Roomanizer-Website/Controller?action=booking
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.52 Safari/536.5
X-Requested-With:XMLHttpRequest
Form Dataview URL encoded
action:checkavailability
categoryname:Economy
roomcount:1
start:20/06/2012
end:28/06/2012
Response Headersview source
Content-Length:81
Content-Type:application/json;charset=ISO-8859-1
Date:Mon, 11 Jun 2012 12:19:45 GMT
Server:Apache-Coyote/1.1 
```

有没有人知道热来解决这个问题？

PS：我使用的是 JQuery 1.5.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:49:24.187

问题解决了，因为 JSON-Parser 似乎不能接受单引号，所以我将返回字符串更改为

```
{"arrival":"20/06/2012","leaving":"27/06/2012","price":"80.0", "available":"true"} 
```

# c# - XML到文本转换

> ID：10980237
> 
> 赞同：5
> 
> 时间：2012-06-11T12:36:33.637
> 
> 标签：c#, xml, string, converter

我想用 C# 写一些东西，它接受 Xml 并将其转换为纯文本。

```
<note>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don't forget me this weekend!</body>
</note> 
```

会成为：

```
To Tove
From Jani
Heading Reminder
Body don't forget me this weekend! 
```

有没有这样的事情？我该怎么做呢？

这只是我想要的想法仍然需要大量工作：

```
private void dataGridViewResult_SelectionChanged(object sender, EventArgs e)
        {
            if (this.dataGridViewResult.SelectedRows.Count > 0)
            {
                XslCompiledTransform xslt = new XslCompiledTransform();
                xslt.Load("SQL"); //.xml

                xslt.Transform("SQL","SQL"); //.xml, .html
                this.richTextBoxSQL.Text = this.dataGridViewResult.SelectedRows[0].Cells["SQL"].Value.ToString();
            }
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T12:55:03.800

以下 XSLT 脚本将执行您想要的操作：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:template match="*">
        <xsl:for-each select="*">
            <xsl:value-of select="local-name()"/>
            <xsl:text> </xsl:text>
            <xsl:value-of  select="."/>
            <xsl:text>
</xsl:text>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

然后您可以使用`XslCompiledTransform`该类应用脚本，如下所示：

```
private string transformXml(string sourceXmlText, string xsltText)
{
    XmlDocument sourceXmlDocument = new XmlDocument();
    sourceXmlDocument.LoadXml(sourceXmlText);
    XslCompiledTransform transformer = new XslCompiledTransform();
    XmlTextReader xsltReader = new XmlTextReader(new StringReader(xsltText));
    transformer.Load(xsltReader);
    MemoryStream outputStream = new MemoryStream();
    XmlWriter xmlWriter = XmlWriter.Create(outputStream, transformer.OutputSettings);
    transformer.Transform(sourceXmlDocument, null, xmlWriter);
    outputStream.Position = 0;
    StreamReader streamReader = new StreamReader(outputStream);
    return streamReader.ReadToEnd();
} 
```

它显然比人们发布的其他解决方案更复杂，但它的主要优点是如果您需要更改格式，可以轻松更改脚本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T12:52:54.537

像这样的东西：

```
 XmlDocument doc = new XmlDocument();
    doc.LoadXml(your text string);

    StringBuilder sb = new StringBuilder();
    foreach (XmlNode node in doc.DocumentElement.ChildNodes)
    {
        sb.Append(char.ToUpper(node.Name[0]));
        sb.Append(node.Name.Substring(1));
        sb.Append(' ');
        sb.AppendLine(node.InnerText);
    }

    Console.WriteLine(sb); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T12:42:01.483

你可以做类似的事情

```
 string xml = @"<note>
                    <to>Tove</to>
                    <from>Jani</from>
                    <heading>Reminder</heading>
                    <body>Don't forget me this weekend!</body>
                </note>";

    StringBuilder sb = new StringBuilder();
    foreach (XElement element in XDocument.Parse(XML-STRING).Descendants("note"))
    {
        sb.AppendLine(string.Format("{0} {1}", element.Name, element.Value));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T08:16:12.227

这里给出的答案非常适用于没有任何属性的简单 XML 文件。为了处理可能在节点中包含属性和值的 XML，您需要更...复杂的东西。更不用说“列表项”（节点名称相同但属性不同的项，在同一组下。例如 <Books><Book ID="10" Author="Me" /><Book ID="20" Author ="你"/></Books>)。我需要将 XML 文件转换为制表符分隔的文本，并且必须包含所有案例。该代码已在具有数千个节点的几个 xml 文件上进行了测试，并且正在运行。通过使用“|”将“列表”的每个属性或元素的值附加到现有列来处理“列表项” 作为分隔符。我希望它可以帮助其他想做类似事情并需要起点的人。如果有人正在阅读这篇文章并且知道更好的方法，我真的很想听听。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Xml;

public class FileProcessing
{
    static public void ConvertXmlFile(String theFile)
    {
        string theExportFile = theFile.Replace(".xml", ".txt");
        List<List<String>> theColumns = new List<List<string>>();
        List<String> theHeader = new List<string>();
        List<String> CurrentDepth = new List<string>();
        XmlDocument theXml = new XmlDocument();
        try
        {
            theXml.Load(theFile);
        }
        catch (Exception ex)
        {
            //handle as you seem fit. I use an error reporting system that is called here.
            return;
        }
        XmlElement theElement = theXml.DocumentElement;
        CurrentDepth.Add(theElement.ParentNode.Name);//Start at document level
        String ItemGroupTag = "";//this stores the element that groups all items(This element represents the complete line)
        String LastTagName = "";//detect if there is a listitem case(item with same tag appearing in a grouptag having different attribute values).
        int GroupItemDepth = 0;
        do
        {
            //null can occure on various errors. When it falls bellow the GroupItemDepth, the search is over
            if (theElement == null || CurrentDepth.Count <= GroupItemDepth) break;
            String CurrentTagName = theElement.ParentNode.Name + "." + theElement.Name;
            //only advance if this is not a listitem or the ItemGroupTag
            if (CurrentDepth[CurrentDepth.Count - 1] == CurrentTagName && LastTagName != CurrentTagName)
            {
                LastTagName = CurrentTagName;
                if (theElement.NextSibling != null)
                {
                    theElement = (XmlElement)theElement.NextSibling;
                    CurrentDepth[CurrentDepth.Count - 1] = LastTagName;
                    continue;
                }

                theElement = (XmlElement)theElement.ParentNode;
                CurrentDepth.RemoveAt(CurrentDepth.Count - 1);//I stepped one level up
                continue;
            }

            //only check the list until I get the group tag
            if (ItemGroupTag == "")
            {
                XmlNodeList theList = theXml.GetElementsByTagName(theElement.Name);
                if (theList.Count > 1)
                {
                    ItemGroupTag = CurrentTagName;
                    GroupItemDepth = CurrentDepth.Count;
                }
                else
                {
                    LastTagName = theElement.ParentNode.Name + "." + theElement.Name;
                    CurrentDepth.Add(LastTagName);//Stepped one level down
                    theElement = (XmlElement)theElement.FirstChild;
                    continue;
                }
            }
            //At this point I am in the GroupItem's entries
            //Check if the "line" has changed
            if (CurrentTagName == LastTagName && CurrentTagName == ItemGroupTag)
            {
                //It has changed. Make sure all columns have equal number of elements. If not, fill them with empty strings
                int MaxCount = 0;

                //First pass, find the number of items that should be in every column. Second pass, only one element apart in all occasions that
                //the count is not equal. Take in account that a column may appear out of nowhere, as an attribute, and fill it up to date
                for (int loop = 0; loop < theColumns.Count; loop++) if (theColumns[loop].Count > MaxCount) MaxCount = theColumns[loop].Count;
                for (int loop = 0; loop < theColumns.Count; loop++)
                {
                    //A problem will appear in cases that the second entry is a new attribute.
                    if (MaxCount > 2 && theColumns[loop].Count == 1)
                    {
                        while (theColumns[loop].Count != MaxCount) theColumns[loop].Insert(0, "");
                    }
                    else if (theColumns[loop].Count != MaxCount) theColumns[loop].Add("");
                }
                CurrentDepth.RemoveAt(CurrentDepth.Count - 1);//Remove the last entry of the group item
            }
            //Add a column for the tag, if there is none, or find its index, IF, this tag does not have child nodes
            int theColumnIndex = theHeader.IndexOf(CurrentTagName);
            if (theColumnIndex == -1 && !theElement.HasChildNodes)
            {
                theHeader.Add(CurrentTagName);
                theColumns.Add(new List<string>());
                theColumnIndex = theHeader.Count - 1;
            }

            if (theElement.HasAttributes)
            {
                XmlAttributeCollection theAttributes = theElement.Attributes;
                for (int loop = 0; loop < theAttributes.Count; loop++)
                {
                    theColumnIndex = theHeader.IndexOf(theElement.Name + "." + theAttributes[loop].Name);
                    if (theColumnIndex == -1)
                    {
                        theColumns.Add(new List<String>());
                        theHeader.Add(theElement.Name + "." + theAttributes[loop].Name);
                        theColumnIndex = theHeader.Count - 1;
                    }
                    if (theAttributes[loop].Value == null)
                    {
                        if (CurrentTagName == LastTagName && CurrentTagName != ItemGroupTag)
                            theColumns[theColumnIndex][theColumns[theColumnIndex].Count - 1] += "|";
                        else theColumns[theColumnIndex].Add("");
                    }
                    else
                    {
                        if (CurrentTagName == LastTagName && CurrentTagName != ItemGroupTag)
                            theColumns[theColumnIndex][theColumns[theColumnIndex].Count - 1] += "|" + theAttributes[loop].Value.ToString();
                        else theColumns[theColumnIndex].Add(theAttributes[loop].Value.ToString());
                    }
                }
            }
            else if (!theElement.HasChildNodes)
            {
                if (theElement.Value == null)
                {
                    if (CurrentTagName == LastTagName && CurrentTagName != ItemGroupTag) theColumns[theColumnIndex][theColumns[theColumnIndex].Count - 1] += "|";
                    else theColumns[theColumnIndex].Add("");//empty string for a null value
                }
                else
                {
                    if (CurrentTagName == LastTagName && CurrentTagName != ItemGroupTag) theColumns[theColumnIndex][theColumns[theColumnIndex].Count - 1] += "|" +
                        theElement.Value.ToString();
                    else theColumns[theColumnIndex].Add(theElement.Value.ToString());
                }
            }

            LastTagName = CurrentTagName;
            if (theElement.HasChildNodes)
            {
                theElement = (XmlElement)theElement.FirstChild;
                CurrentDepth.Add(LastTagName);//Went down a level
            }
            else if (theElement.NextSibling != null)
            {
                theElement = (XmlElement)theElement.NextSibling;
                //Prevent overwriting a previous group level when a list item occurs
                if (theElement.ParentNode.Name + "." + theElement.Name == LastTagName && CurrentDepth[CurrentDepth.Count - 1] != LastTagName)
                    CurrentDepth.Add(LastTagName);
                else CurrentDepth[CurrentDepth.Count - 1] = LastTagName;
            }
            else
            {
                theElement = (XmlElement)theElement.ParentNode;
                CurrentDepth.RemoveAt(CurrentDepth.Count - 1);//Went up a Level
            }
        } while (theElement != theXml.DocumentElement);
        //Put Everything together and write them to a file
        List<String> theLines = new List<string>();
        String theLine = "";
        for (int loop = 0; loop < theHeader.Count; loop++) theLine += "\t" + theHeader[loop];
        if (theLine != "") theLines.Add(theLine.Substring(1));

        int aMaxCount = 0;

        //Do a last check for row count consistency in columns
        for (int loop = 0; loop < theColumns.Count; loop++) if (theColumns[loop].Count > aMaxCount) aMaxCount = theColumns[loop].Count;
        for (int loop = 0; loop < theColumns.Count; loop++)
        {
            if (aMaxCount > 2 && theColumns[loop].Count == 1)
            {
                while (theColumns[loop].Count != aMaxCount) theColumns[loop].Insert(0, "");
            }
            else if (theColumns[loop].Count != aMaxCount) theColumns[loop].Add("");
        }

        for (int loop = 0; loop < theColumns[0].Count; loop++)
        {
            theLine = "";
            for (int loop1 = 0; loop1 < theColumns.Count; loop1++) theLine += "\t" + theColumns[loop1][loop].Replace('\t', ' ');
            if (theLine != "") theLines.Add(theLine.Substring(1));
        }

        File.WriteAllLines(theExportFile, theLines.ToArray(), Encoding.UTF8);
    }
} 
```

# c# - 子实体如何从一个父级移动到另一个父级？

> ID：10980241
> 
> 赞同：2
> 
> 时间：2012-06-11T12:36:40.220
> 
> 标签：c#, .net, entity-framework

我正在使用 .Net 4 将应用程序从我的自定义 ORM 转换为 Entity Framework。一切进展顺利，但我不确定如何将子项移动到另一个父项。我不确定我应该遵循什么模式。

使用 ORM，我生成了以下方法：

```
public void MoveTo_Item(Parent.Row destination)
{
    _inMovement = true;
    _parent_Item.Child_Items.Remove(this);
    parent_id = destination.id;
    destination.Child_Items.Add(this);
    _inMovement = false;
} 
```

在哪里：

*   `_inMovement == true`防止`_parent_Item.Child_Items.Remove/Add(this)` 触发数据库中的删除/插入；和
*   `parent_id = destination.id`触发了数据库中的更新。

子项本身有子项，所以不要认为我只能`parent1.Remove(item)`跟着`parent2.Add(item)`.

如何使用 EF .Net 4 正确更改父项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:19:24.097

在 EF 中，如果您的导航属性设置正确，则应该很简单（显然，这里是虚构的名称）

```
Child child = sourceParent.Children.First();  // or whatever

child.ParentObject = destinationParent; 
```

顺便说一句，如果您的自定义 ORM*每次*操作对象时都会访问数据库（这一定是相当资源密集型的，不是吗？），您将需要适应 EF 的工作方式，其中数据库没有被命中除非你明确表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:51:27.833

以下是自我跟踪实体的解决方案。

用于`ObjectSet.Detach(YourObject)`从一个对象集中分离对象。

附件有两个功能。`Attach`如果您的对象是从 DB 加载的并且您希望 EF 为其使用 Update 语句，则应使用该对象。`Attach`是您需要用于分离实体的功能。

`AddObject`如果您刚刚在应用程序中创建了实体并且它还没有在数据库中（`Insert`要使用的语句），则应该使用它。

有关详细信息，请参阅[MSDN 。](http://msdn.microsoft.com/en-us/library/bb896271.aspx)

# asp.net - Quartz.Net JobExecutionContext 缺少参考？

> ID：10980242
> 
> 赞同：0
> 
> 时间：2012-06-11T12:36:44.027
> 
> 标签：asp.net, scheduled-tasks, quartz.net, quartz.net-2.0

我开始在quartz.net 2.0.1 上实施第一个样本，但它给出了一个错误。

我创建了一个名为 QuartzSample 的 asp.net Web 应用程序

我的简单代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Quartz;

 namespace QuartzSample
 {
    public class Quartz : IJob
    {
        public void Execute(JobExecutionContext context)
        {
            SendMail();
        }
        private void SendMail()
        {
            // ...
        }
    }
} 
```

错误 ：

```
The type or namespace name 'JobExecutionContext' could not be found (are you missing a using directive or an assembly reference?) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T14:27:38.553

我找不到 JobExecutionContext，但是，我确实找到了 IJobExecutionContext。我相信这是前者的替代品。

[编辑] 找到迁移指南：http: [//quartznet.sourceforge.net/migration_guide.html](http://quartznet.sourceforge.net/migration_guide.html)

从外观上看，他们已经将一堆类更改为接口。如果您有 Visual Studio，Intellisense 应该能够帮助您找到正确的界面来使用。

本教程尚未更新以适应 2.0 的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T11:39:04.007

基本上你必须改变所有的课程

```
JobExecutionContext 
```

到接口

```
IJobExecutionContext 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-05T18:19:27.117

如果您使用的是 NetCore，请安装 Abp.QuartzCore 而不是 Abp.Quartz

# java - 创建动态变化的 ProgressMonitor

> ID：10980243
> 
> 赞同：0
> 
> 时间：2012-06-11T12:36:47.177
> 
> 标签：java, progress-bar, eclipse-rcp

我正在尝试通过更改 totalWork 创建 ProgressMonitor。让我们假设我有 2 个步骤。第一步是检索对象列表。总工作量=-1（未知）。

在第二步中，我更改了 lisl 中的每个对象。所以我想将 totalWork 更改为列表的大小。我已经尝试过类似下面的代码，但它没有工作：

```
int totalWork = -1
monitor.beginTask("Task", totalWork);
monitor.subTask("Start Subtask 1");
final List<Object> list = retrieveList();
totalWork = list.size();
monitor.subTask("Retrieve Events");
for(Object obj:list){
   //do some job
   monitor.worked(1)
}
monitor.done() 
```

有没有办法做到这一点？

**编辑：**我正在扩展 Job 并且上面的代码在 run 方法中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:21:08.770

我找到了解决我的问题的方法。

```
int totalWork = -1
monitor.beginTask("Task 1", totalWork);
monitor.subTask("Start Subtask 1");
final List<Object> list = retrieveList();
totalWork = list.size();
monitor.beginTask("Retrieve Events",totalWork);
for(Object obj:list){
   //do some job
   monitor.worked(1)
}
monitor.done() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:05:02.177

简短的回答：不！

更长的答案：

如果第一步花费的时间少于 100 毫秒（即使对于非常大的数据集），那么通常在`beginTask`...

在许多情况下，初始计数操作所花费的时间与实际操作非常相似。在这种情况下，您可以使用嵌入式`SubProgressMonitor`. 假设初始计数占后面操作的 1/20：

```
public void run(IProgressMonitor monitor) {
    monitor.beginTask("Task", 1+20);
    try {
        monitor.subTask("Initializing");
        final List<Object> list = retrieveList();
        monitor.worked(1);

        IProgressMonitor sub = new SubProgressMonitor(monitor, 20);
        sub.beginTask("", list.size());
        for (Object o : list) {
            sub.subTask(""+o);
            // ...
            sub.worked(1);
        }
        sub.done();
    } finally {
        monitor.done();
    }
} 
```

# c# - 如何允许其他线程停止的程序处理继续？

> ID：10980246
> 
> 赞同：0
> 
> 时间：2012-06-11T12:36:58.893
> 
> 标签：c#, multithreading, c#-4.0, architecture

我希望我的问题是合理的！

假设有 20 个线程（使用 ThreadPool）执行`ValidateItem`方法。

```
_validators = new Validators[] { new Validator1(), new Validator2(), ..., new ValidatorN() };

private void ValidateItem(string item)
{
     var req = new ValidationRequest(item);
     foreach (var validator in _validators)
     {                
           //------(1)    
           res = validator.Validate(req);
           OnValidatorCompletedEvent(item, res);
           if (res.Type == ValidationResultType.Invalid)
           {                       
                        break;
           }
     }
     OnAllValidatorsCompletedEvent(item, res);                 
} 
```

在开始验证特定验证器之前，应检查该验证器是否已准备好。如果它不是并且没有超时，它应该稍后重试。我想在**（1）中添加以下代码**

```
while(!validator.IsReady && !(timedout > 5000))
{
    Sleep(200);
    timedout += 200;
} 
```

但是所有 20 个线程都可能卡在这里，例如 on `Validator10`，因此所有 20 个线程都将等待，而不是同时至少继续验证其他项目`Validator1`to `Validator9`。那么，我怎么能允许继续验证其他项目至少`Validator1`到`Validator9`以及何时`Validator10`准备好它会在它被浸泡的地方继续？

# android - Android：无法从服务启动管理员状态授予活动

> ID：10980248
> 
> 赞同：2
> 
> 时间：2012-06-11T12:37:09.867
> 
> 标签：android, service, android-activity, device-admin

我正在使用以下代码启动要求用户授予应用程序、设备管理员状态的活动。

```
 mDPM = (DevicePolicyManager)getSystemService(Context.DEVICE_POLICY_SERVICE);
        try {
            mDeviceAdminSample = new ComponentName(this, WatchDogAdmin.class);
        } catch (Exception ex) {
            // TODO Auto-generated catch block
            Toast.makeText(this, ex.getMessage(), Toast.LENGTH_LONG).show();
        }  

        Intent intent2 = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
//        Intent intent2 = new Intent(this, ShuntActivity.class);
        intent2.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent2.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN, mDeviceAdminSample);
        intent2.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION, "Device admin rights are required for this application to work correctly.");
//        startActivityForResult(intent, RESULT_ENABLE);
        startActivity(intent2); 
```

我究竟做错了什么 ？没有错误，活动根本没有启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:45:12.623

确保`WatchDogAdmin`是接收器并尝试`startActivityForResult(intent2, 1);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T21:47:32.190

尝试删除线，

```
intent2.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

# c# - 用于在 AssemblyInfo.cs 中设置自定义属性的 MSBuild 任务

> ID：10980249
> 
> 赞同：7
> 
> 时间：2012-06-11T12:37:19.083
> 
> 标签：c#, msbuild-task, msbuildcommunitytasks, pre-build-event

是否有用于在 AssemblyInfo.cs 中设置自定义属性的 MSBuild 任务？我找到了 AssemblyInfo 任务，但它似乎无法设置自定义属性，只能设置预定义属性。我想设置已添加到此文件中的 3 个自定义属性。

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-23T21:34:50.987

[`WriteCodeFragment`](http://msdn.microsoft.com/en-us/library/ff598685)任务可以帮助：

```
<Target Name="BeforeBuild">
    <ItemGroup>
     <AssemblyAttributes Include="AssemblyTitle">
        <_Parameter1>My Assembly</_Parameter1>
     </AssemblyAttributes>
     <AssemblyAttributes Include="AssemblyDescription">
        <_Parameter1>My Assembly</_Parameter1>
     </AssemblyAttributes>  
     <AssemblyAttributes Include="AssemblyCompany">
        <_Parameter1>My Company</_Parameter1>
     </AssemblyAttributes>
     <AssemblyAttributes Include="AssemblyProduct">
        <_Parameter1>My Product</_Parameter1>
     </AssemblyAttributes>
     <AssemblyAttributes Include="AssemblyCopyright">
        <_Parameter1>Copyright © 2012</_Parameter1>
     </AssemblyAttributes>
     <AssemblyAttributes Include="AssemblyCulture">
        <_Parameter1></_Parameter1>
     </AssemblyAttributes>       
     <AssemblyAttributes Include="AssemblyVersion">
        <_Parameter1>1.0.0.0</_Parameter1>
     </AssemblyAttributes>   
     <AssemblyAttributes Include="AssemblyFileVersion">
        <_Parameter1>1.0.0.0</_Parameter1>
     </AssemblyAttributes>
     <AssemblyAttributes Include="System.Runtime.InteropServices.Guid">
        <_Parameter1>e7a979b2-0a4f-483a-ba60-124e7ef3a931</_Parameter1>
     </AssemblyAttributes>
    </ItemGroup>
  <WriteCodeFragment Language="C#" OutputFile="Properties/AssemblyInfo.cs" AssemblyAttributes="@(AssemblyAttributes)" />
</Target> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-16T18:09:05.123

看文件：`Microsoft.NET.GenerateAssemblyInfo.targets`.

```
<WriteCodeFragment AssemblyAttributes="@(AssemblyAttribute)" Language="$(Language)" OutputFile="$(GeneratedAssemblyInfoFile)">
  <Output TaskParameter="OutputFile" ItemName="Compile" />
  <Output TaskParameter="OutputFile" ItemName="FileWrites" />
</WriteCodeFragment> 
```

所以，你应该使用`AssemblyAttribute`而不是`AssemblyAttributes`.

# c++ - 在 DirectX 9/c++ 中绘制可读文本

> ID：10980250
> 
> 赞同：3
> 
> 时间：2012-06-11T12:37:18.970
> 
> 标签：c++, text, directx

我想在我的第一人称游戏中显示角色的名字（使用 DirectX 9 和 c++）。我正在使用 D3DXVec3Project 在适当的位置绘制文本以获取屏幕坐标，但仅使用 D3DXFONT 在此处显示文本可读性不强。它需要在下面有一个背景精灵（或其他呈现纹理的方式），以便文本颜色显示在背景中。简而言之，我只想在浅色文本下方绘制一个暗框纹理。

我想要类似于“Morrowind”截图顶部的文本框：http: [//nerdtrek.com/wp-content/uploads/2011/11/Morrowind-Screenshot.jpg](http://nerdtrek.com/wp-content/uploads/2011/11/Morrowind-Screenshot.jpg)

这样做的合理方法是什么？我尝试简单地加载一个精灵并在那里绘制它，但即使我将它集中在文本的位置，我真的需要能够任意拉伸它以匹配它所伴随的文本字符串的长度。

任何链接、推荐阅读或示例将不胜感激。谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:11:21.407

您可以使用 DT_CALCRECT 标志调用[ID3DXFont.DrawString](http://msdn.microsoft.com/en-us/library/windows/desktop/bb173962%28v=vs.85%29.aspx)。这应该返回文本边界矩形的宽度/高度，而不绘制它。

使用此信息，应该很容易绘制您想要的任何精灵作为文本的背景。

希望这可以帮助！

# mysql - x小时后MYSQL表丢失

> ID：10980255
> 
> 赞同：5
> 
> 时间：2012-06-11T12:37:48.690
> 
> 标签：mysql, drop-table

是否可以将额外的代码写入 mysql 表创建中，使其在 X 时间后自行删除？就像一个临时表，但它会持续更长时间。

我需要为临时任务创建表，但我需要它们比会话持续更长时间

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:42:37.007

```
CREATE EVENT myevt
        ON SCHEDULE AT CURRENT_TIMESTAMP + INTERVAL 1 HOUR
        DO
         DROP TABLE IF EXISTS MyTable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:54:36.783

在您使用 CSV 文件的情况下，我建议您不要在设置过程中创建数据库表，因为这会给您的 DBMS 带来不必要的压力。更好的方法是：

1.  将上传的文件移动到“传入”目录
2.  解析 CSV 的前几个字节以确定您需要的列数和其他数据
3.  让用户分配东西
4.  以应用程序需要的方式将 CSV 文件读取到数据库
5.  删除文件

为了清理 CSV 文件，您可以使用 cronjob 删除旧文件：`find /dir/with/csv/files -type f -cmin +TIMEINMINUTES -delete`

# mysql - 如何将数据从 mysql 导入 Apache Hadoop HDFS 安装。

> ID：10980262
> 
> 赞同：0
> 
> 时间：2012-06-11T12:38:59.517
> 
> 标签：mysql, import, hadoop

如何将数据从mysql导入HDFS。我不能使用 sqoop，因为它是 HDFS 安装而不是 cloudera。我使用下面的链接来设置 HDFS。我的 hadoop 版本是 0.20.2 [http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:24:54.193

与您的问题没有直接关系，但如果您想将数据库用作 Map Reduce 作业的输入，并且不想复制到 HDFS，您可以使用 DBInputFormat 直接从数据库输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:50:52.760

除了 sqoop，你可以试试[hiho](https://github.com/sonalgoyal/hiho)。我听说过它的好消息。（虽然没用过）

但我所看到的主要是人们最终编写自己的流程来做到这一点。如果 hiho 不成功，您可以使用[mysqlimport](http://dev.mysql.com/doc/refman/5.0/en/mysqlimport.html)从 MySql 转储数据。然后使用 map-reduce 作业或 Pig/Hive 加载到 HDFS。

听说 Sqoop 很不错，被广泛使用（这又是道听途说，我自己没用过）。现在[它是一个 apache 孵化器项目](http://sqoop.apache.org/index.html)，我认为它可能已经开始支持 hadoop 的 apache 版本，或者至少可能会减少非 cloudera 版本的痛苦。[该文档](http://sqoop.apache.org/docs/1.4.1-incubating/SqoopUserGuide.html#_supported_releases)确实说它支持 Apache hadoop v0.21。尝试使其适用于您的 hadoop 版本。可能没那么难。

# php - 将标签等编码为 html 的 PHP 函数

> ID：10980264
> 
> 赞同：0
> 
> 时间：2012-06-11T12:39:03.247
> 
> 标签：php, escaping

我正在寻找一种将空格、制表符等编码为 html 字符的函数

例如获取字符串的集合：

```
 Whats up?&^5@#
number  pie     word
1       3       hi
2       4       no 
```

我处理：

```
$outString="";
for($i=0;$i<count($strArr);$i++){
    $outString.= somefunc($strArr[$i]);//what should somefunc be?
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:52:13.553

您将无法在 html 中创建选项卡，但如果您将所有更改为 html 表格，您应该没问题。尝试这样的事情：

```
function foo($string) {
    $table='<table border="0">'.htmlentities($string).'</table>';
    $table=preg_replace( "#\r\n#", "</td></tr><tr><td>", $table);
    $table=preg_replace( "#\t#", "</td><td>", $table);

    return $table;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:40:54.710

HTML 没有任何表示制表位的方法，因此这本身是无法实现的。

您可以将内容包装在一个`<pre>`元素中，但是最好通过`explode`在制表符上加上每一行，然后`<table>`从结果数据结构中生成 a 来更好地解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:40:58.110

你见过[html 实体](http://php.net/manual/en/function.htmlentities.php)或[html 特殊字符](http://php.net/manual/en/function.htmlspecialchars.php)吗？

# java - TabHost 和异步任务的问题

> ID：10980265
> 
> 赞同：0
> 
> 时间：2012-06-11T12:39:05.353
> 
> 标签：java, android, android-asynctask, android-tabhost

我有一个使用 aSync 任务来挖掘一些 HTML 数据的应用程序，它工作正常，直到我尝试在我的应用程序上使用 TabHost。问题是，当我尝试打开此选项卡时，它会弹出 ProgressDialog，但过了一会儿它进入`doInBackground`方法内部的一个 catch，异常为 null，而不是 NullPoint，只是`e=null`并且没有使用来自的数据设置适配器采矿。这是一些代码：

```
onCreate(){
   ...
   this.pd = ProgressDialog.show(this, "Downloading..",
            "Downloading...", true, false);
    this.pd.setCanceledOnTouchOutside(false);
    this.pd.setCancelable(true);
    ...
    task  = new DownloadTask().execute("Starting");
} 
```

和

```
private class DownloadTask extends AsyncTask<String, Void, Object> {

    protected Object doInBackground(String... args) {
        search = new Search(person);
        try {
            search.Login();
            data = search.ParseData();

        } catch (Exception e) {
            erroUnknown = true;
        }
        adapter = new RowAdapter(DataActivity.this, data);
   }
 } 
```

和tabActivity：

```
public class TabMenu extends TabActivity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);

    Resources res = getResources(); // Resource object to get Drawables
    TabHost tabHost = getTabHost(); // The activity TabHost
    TabHost.TabSpec spec; // Resusable TabSpec for each tab
    Intent intent; // Reusable Intent for each tab

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, DataActivity.class);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost
            .newTabSpec("data")
            .setIndicator("Data",
                    res.getDrawable(R.drawable.ic_launcher))
            .setContent(intent);
    tabHost.addTab(spec);
    //Just test
            spec = tabHost
            .newTabSpec("artists")
            .setIndicator("Artists",
                    res.getDrawable(R.drawable.ic_launcher))
            .setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);
}

} 
```

知道为什么它进入 catch 块吗？使用 tabActivity 时是否需要修改一些代码？

提前致谢

更新：有时在调试时，我从 entity.getContent() 得到 e=IllegalStateException，即使这是第一次被调用。和 StringOutOfBoundsException 因为内容没有获取正确的数据，我的意思是，没有它登录的选项卡，并且可以工作页面，但是使用 tabHost 它没有，它如何受 tabHost 影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:26:46.630

明白了，是另一个 Activity 传递的 Intent 必须传递给 TabActivity..

# android - Android，可扩展列表项问题

> ID：10980268
> 
> 赞同：-1
> 
> 时间：2012-06-11T12:39:28.367
> 
> 标签：android, android-listview

我正在尝试过去 2 天的表格以显示左侧的扩展列表项。![在此处输入图像描述](../Images/7eb097ef20463fffe6397848321be2b2.png)

默认情况下列表正在向下扩展，我想更改此样式，我只想显示 1 个项目单击级别 1，请指导我如何更改样式或任何人有任何好主意.. 请指导我.. 提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:50:07.610

没有可以调整的单一样式参数使其成为那样。

实现它的一种方法是并排放置两个（不可扩展的）列表视图，并根据用户在左侧选择的项目设置右侧的内容。

# mysql - 阿拉伯语文本多个结果

> ID：10980271
> 
> 赞同：2
> 
> 时间：2012-06-11T12:39:57.287
> 
> 标签：mysql, utf-8

我有一张带有阿拉伯文字的桌子。有两个独特的行：

回复
回复

第一个由以下字符组成：0x0627、0x0650、0x0633
第二个由以下字符组成：0x0627、0x064F、0x0633

问题是，如果我查询其中任何一个，它们都会出现。这发生在命令行和使用 phpmyadmin 上。这是我为查询键入的内容：

设置名称 utf8;
SELECT urdu FROM transliteration WHERE urdu LIKE 'اِس';

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:23:34.323

这两个字符串的返回恰好是 MySQL 的一个特性（一个有用的特性！）：SELECT 语句可能对字符的大小写或元音长度不敏感。此功能称为整理。utf_unicode_ci 可能是您名为`urdu`.

但是如果需要，您可以在 WHERE 子句中控制它。

```
WHERE COLLATE utf_bin urdu = 'اِس' 
```

（如果我破坏了你的阿拉伯语，请原谅我；我不懂那种语言。）

但是，请注意，一旦您完成调试并将其投入生产，MySQL 可能已经为您的应用程序提供了适当的结果。

另请注意，除非您希望部分匹配，否则您不需要使用 LIKE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:53:27.157

您正在搜索相同的单词，一个有短元音，另一个没有。由于短元音是可选的，您可以同时使用这两个版本。现在 MySQL 似乎足够聪明，可以删除元音并返回相同的条目。也许您需要从查询中删除 LIKE 参数，因为这两个版本是相似的。

如果您想避免此类问题，请从所有短元音中删除您的数据库条目，并将原始单词保存在第二行中。然后，您还可以删除所有查询并搜索相同的条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:09:00.573

试试这个：

```
SELECT urdu FROM transliteration WHERE urdu LIKE 'اِس' collate utf8_bin 
```

或者更确切地说`collate utf8_bin`，在您的代码末尾添加，我不确定我的字符是否正确。

# javascript - 如何使用 Ajax 调用在弹出窗口中打开 pdf？

> ID：10980276
> 
> 赞同：1
> 
> 时间：2012-06-11T12:40:09.500
> 
> 标签：javascript, ajax, pdf

因此，我需要能够打开由服务器端脚本根据我发送的 html 生成的 pdf。html 是一个巨大的字符串。我正在考虑使用 ajax，`widow.open`但我似乎无法理解如何。

```
$.ajax({
        type: "POST",
        url: "/pdf",
        data: {input:html},
        success: function(msg) {
            window.open(msg)
        },
        error: function(msg) {

        }
    }); 
```

我认为这会起作用，但事实并非如此。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-11T17:12:47.833

您可以使用 jQuery PDF 查看器插件。例如，使用[jsPDF](http://snapshotmedia.co.uk/blog/jspdf)你会这样写：

```
$.ajax({
   type : "POST",
   url : "/pdf",
   data : {
      input : html
   },
   success : function (msg) {
      var pdf = new jsPDF();
      pdf.text(20, 20, msg);
      pdf.output('datauri');
   },
   error : function (msg) {}
}); 
```

# google-apps-script - 将公式复制到范围。谷歌电子表格

> ID：10980282
> 
> 赞同：3
> 
> 时间：2012-06-11T12:40:20.783
> 
> 标签：google-apps-script, google-sheets

我目前有这个脚本：

```
function addConsultant()
{
var sheet_staffing = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Staffing"); 
var sheet_parametres = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Parametres");
var range_tabConsultant_default = sheet_parametres.getRange(26,1,6,64);
var row_position_newTab = sheet_parametres.getRange(1,1).getValue();
range_tabConsultant_default.copyFormatToRange(sheet_staffing, 1, 36, row_position_newTab, row_position_newTab + 6);
range_tabConsultant_default.copyValuesToRange(sheet_staffing, 1, 36, row_position_newTab, row_position_newTab + 6);
sheet_parametres.getRange(1,1).setValue(row_position_newTab+6);
} 
```

这就像一个默认选项卡，每个人一个选项卡，但我不知道如何将公式从 def 选项卡复制到由脚本创建的选项卡。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:13:54.893

看一下该类的[getFormulas](https://developers.google.com/apps-script/class_range.html#getFormulas)和[getFormulasR1C1](https://developers.google.com/apps-script/class_range.html#getFormulasR1C1)方法`Range`。您还需要使用相应的`setFormulas`or `setFormulasR1C1`。

[编辑：回答评论]

如果在多单元格区域中，您正在复制混合值和公式。对于值或公式，您必须将调用分解为多个集合，因为单个单元格只能有一个（或将普通值解析为简单的公式，例如 =“value”）。

要让您的公式“遵循”参考，请使用`set/getFormulasR1C1`符号而不是更简单的`set/getFormulas`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:52:11.293

如果脚本使用用户正在使用此功能查看的当前工作表怎么办？[获取活动表](https://developers.google.com/apps-script/class_spreadsheet#getActiveSheet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-25T09:20:11.027

以下是如何将公式复制`A1`到`A2:A`具有相对引用的范围的示例：

```
var sheet = SpreadsheetApp.getActiveSpreadsheet();
sheet.getRange("A2:A").setFormulaR1C1(sheet.getRange("A1").getFormulaR1C1()); 
```

# java - 如何获取具有注释的方法名称？

> ID：10980283
> 
> 赞同：3
> 
> 时间：2012-06-11T12:40:27.290
> 
> 标签：java, eclipse-plugin, eclipse-jdt

例如，一个类`Exam`有一些带有注释的方法。

```
@Override
public void add() {
    int c=12;
} 
```

如何获取具有`@Override`注释的方法名称（添加） `org.eclipse.jdt.core.IAnnotation`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T12:46:50.843

您可以在运行时使用反射来执行此操作。

```
public class FindOverrides {
   public static void main(String[] args) throws Exception {
      for (Method m : Exam.class.getMethods()) {
         if (m.isAnnotationPresent(Override.class)) {
            System.out.println(m.toString());
         }
      }
   }
} 
```

编辑：要在开发时间/设计时间这样做，您可以使用[此处](https://stackoverflow.com/questions/5314608/can-eclipse-find-occurences-of-a-method-signature-having-a-particular-annotation)描述的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T12:53:15.490

IAnnotation[具有](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/IAnnotation.html)很强的误导性，请参阅文档。

从具有一些注释的类中检索方法。为此，您必须遍历所有方法并仅生成具有此类注释的方法。

```
public static Collection<Method> methodWithAnnotation(Class<?> classType, Class<?  extends Annotation> annotationClass) {

  if(classType == null) throw new NullPointerException("classType must not be null");

  if(annotationClass== null) throw new NullPointerException("annotationClass must not be null");  

  Collection<Method> result = new ArrayList<Method>();
  for(Method method : classType.getMethods()) {
    if(method.isAnnotationPresent(annotationClass)) {
       result.add(method);
    }
  }
  return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-11T09:58:57.113

另一个使用 AST DOM 的简单 JDT 解决方案如下：

```
public boolean visit(SingleMemberAnnotation annotation) {

   if (annotation.getParent() instanceof MethodDeclaration) {
        // This is an annotation on a method
        // Add this method declaration to some list
   }
} 
```

您还需要访问`NormalAnnotation`和`MarkerAnnotation`节点。

# google-app-engine - 在 DataStore 中存储数据时无法初始化类 server.PMF

> ID：10980284
> 
> 赞同：1
> 
> 时间：2012-06-11T12:40:30.863
> 
> 标签：google-app-engine, google-cloud-datastore, gwt-rpc

我一直在使用这两个函数来存储数据和验证数据。这两个函数是服务端Eclipse中的GWT-RPC服务方法：

```
public String greetServer(String mail,String pass) 
{
    User e;
    PersistenceManager pm1 = PMF.get().getPersistenceManager();

    try
    {
        e = pm1.getObjectById(User.class, mail);
    } finally {
        pm1.close();
    }

    if (e.getPassword()==pass)
    {
        return "valid";
    }
        else return "invalid";
}

public String UserRegister(String data[])
{       
    PersistenceManager pm2 = PMF.get().getPersistenceManager();
    Date d1=new Date();
    User u1=new User(data[0],data[1],data[2],data[3],d1);

    try {
        pm2.makePersistent(u1);
    } finally {
        pm2.close();
    }

    return "done";
} 
```

谷歌 App Engine 给出以下错误：

`error java.lang.NoClassDefFoundError: Could not initialize class pathname/server.PMF`

我怎么解决这个问题？

我正在使用以下 PMF 类：

```
package com.google.gwt.sample.login.server;

import java.util.logging.Logger;

import javax.jdo.JDOHelper;
import javax.jdo.PersistenceManagerFactory;

public final class PMF {     
    private static final PersistenceManagerFactory pmfInstance = JDOHelper.getPersistenceManagerFactory("transactions-optional");

    public static synchronized PersistenceManagerFactory get() {        
        return pmfInstance;
    }
} 
```

# jquery - 我需要在我的代码中添加简单的效果

> ID：10980288
> 
> 赞同：0
> 
> 时间：2012-06-11T12:40:37.913
> 
> 标签：jquery

我必须为我的动画功能添加easein 效果。在我的代码下面

```
$('.img_left').animate({ 'margin-left' : '180px', 'opacity' : '1'}, 3000); 
```

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:43:51.387

Vanilla jQuery 仅支持`linear`和缓`swing`动选项。更多选项可在 jQuery UI 套件中找到。

要使用它们，您可以：

```
$('.img_left').animate({ 'margin-left' : '180px', 'opacity' : '1'}, 3000, 'linear'); 
```

# c# - 加载页面 -> 堆栈溢出

> ID：10980296
> 
> 赞同：0
> 
> 时间：2012-06-11T12:41:11.377
> 
> 标签：c#, loading, stack-overflow

好的，我只是想创建一个基本的加载页面，所以我有一些性感的页面出现（不做任何加载）只是在我的真实表单出现之前出现了几秒钟

这是我的代码：

```
 public partial class LoadingPage : Window
{
    System.Threading.Thread iThread;

    public LoadingPage()
    {
        InitializeComponent();
    }

    private void Refresh()
    {
        System.Threading.Thread.Sleep(900);
        MainWindow iMain = new MainWindow();
        iMain.ShowDialog();
        this.Dispatcher.Invoke(new Action(Close));
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
    iThread = new System.Threading.Thread(new ThreadStart(Refresh));
    iThread.SetApartmentState(System.Threading.ApartmentState.STA);
    iThread.Start();   
    }

    private void Close()
    {
        this.Close();
    } 
```

* * *

这可行，但会导致堆栈溢出，并且在主页打开时不会关闭加载窗口..

此外，close 方法有一个绿色下划线，说明“隐藏继承的成员 System.Window.Windows.Close() 如果要隐藏，请使用新关键字”

问题是：是什么导致堆栈溢出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T12:43:22.467

在

```
private void Close()
{
   this.Close();
} 
```

您`Close`在无限递归中调用相同的方法，这会溢出堆栈

我想你的意思是

```
private void Close()
{
   base.Close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:43:56.113

`this.Close()`是无限循环的。使用`base.Close()`.

# android - Twitter标签是动态的

> ID：10980299
> 
> 赞同：1
> 
> 时间：2012-06-11T12:41:25.590
> 
> 标签：android, twitter, android-listview

我想以与 twitter 显示方式相同的模式在 Listview 中显示最新的推文。[在这里检查](http://bit.ly/MAREIV)#tags @username 和 Urls 在推文中是动态的。我怎样才能在推文中出现 # 或 @ 或 url 的任何地方实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:54:21.980

使用下面的方法来链接 twitter 和 web url。注意在设置文本后调用下面的方法。

```
 /**
         * set twitter and web hyper link
         */
        public static void setHiyerLink(TextView textView)
        {
            //for twitter hyper link
            Pattern wikiWordMatcher = Pattern.compile("(@[a-zA-Z0-9_]+)");
            String wikiViewURL =    "http://www.twitter.com/";
            Linkify.addLinks(textView, wikiWordMatcher, wikiViewURL);

            Pattern hashtagPattern = Pattern.compile("#([A-Za-z0-9_-]+)");
            String hashtagScheme = "http://www.twitter.com/search/";
            Linkify.addLinks(textView, hashtagPattern, hashtagScheme);

            Pattern wikiWordMatcher1 = Pattern.compile("\\b(https?|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]");
            Linkify.addLinks(textView, wikiWordMatcher1, null);
        } 
```

您需要 **`android:linksClickable="true"`**在 xml 中为 TextView添加属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:58:56.813

这是一个很好的例子，可以引导您朝着正确的方向前进。此外，谷歌搜索你会发现很多例子：[Loading Twitter Data into Android with Lists](http://www.sitepoint.com/loading-twitter-data-into-android-with-lists/)

# mysql - 使用 PDO 驱动程序（MySQL + PHP）检测错误/无效/非法查询

> ID：10980300
> 
> 赞同：1
> 
> 时间：2012-06-11T12:41:34.633
> 
> 标签：mysql, pdo

我刚刚将所有代码从旧的 mysql 驱动程序更改为 PDO。

到目前为止，我发现很多基本功能都不存在！前任。不等同于`mysql_num_row`..等等（但这不是这篇文章的重点：/）

通常使用 mysql 驱动程序，我会这样做：

```
$result = mysql_query($query);

if(!$result){
    displayError(mysql_error());
} 
```

你如何使用 PDO 做类似的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:47:50.780

看看[这里的文档](http://www.php.net/manual/en/pdo.error-handling.php)有 3 种模式：

*   `PDO::ERRMODE_SILENT`（默认）
*   `PDO::ERRMODE_WARNING`
*   `PDO::ERRMODE_EXCEPTION`

我建议您启用最后一个，这会导致在错误时引发异常：

```
$pdo = new PDO($dsn,$user,$pass,$options);  // Example connection
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

然后将您的语句包围在一个`try/catch`块中

```
try {
    // your query here
} catch (PDOException $e) {
    echo 'Query failed: ' . $e->getMessage();
} 
```

* * *

单独的注释 -`mysql_num_row`在 PDO 中：

```
$sql = "SELECT count(*) FROM `table` WHERE x = y"; 
$result = $con->prepare($sql); 
$result->execute(); 
$number_of_rows = $result->fetchColumn() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:47:00.233

利用`try { } catch {}`

```
<?php
$dsn = 'mysql:dbname=testdb;host=127.0.0.1';
$user = 'dbuser';
$password = 'dbpass';

try {
    $dbh = new PDO($dsn, $user, $password);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
}

?> 
```

## [参考](http://php.net/manual/en/pdo.error-handling.php)

# c# - EF 4 c#的外键

> ID：10980302
> 
> 赞同：0
> 
> 时间：2012-06-11T12:41:41.750
> 
> 标签：c#, entity-framework, key

我在 EF 4.0 中遇到外键问题。

我和一个玩家有一个小游戏。这个玩家可以在游戏中拥有一些角色。

所以，当我想向数据库中添加一个字符时，我必须设置外键“PlayerId”。

这是我的代码，但是在上下文模型中添加对象时会终止：

```
using (DatabaseModelContainer model = new DatabaseModelContainer())
{
    Character c = new Character();
    c.Player.Id = idPlayer;

    model.CharacterJeu.AddObject(c);
    model.SaveChanges();
} 
```

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:48:40.153

这里有奇怪的东西

```
Character c = new Character();
c.Player.Id = idPlayer;//But instance c has no Player (well, I don't know the constructor of Character, but I may imagine there's no new Player() inside) 
```

顺便说一句，使用您似乎拥有的模型，您不必像以前那样管理 FK。您必须管理参考（导航）属性。

你可以这样做。

```
Character c = new Character{
   Player =  model.GetPlayerByid(idPlayer);//or something like that
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:18:53.707

实体框架有一个名为 Attach 的方法，这可能是您正在寻找的。我认为它可以用于更新现有对象上的外部实体。

MSDN：[附加和分离对象](http://msdn.microsoft.com/en-us/library/bb896271)

# c# - 如何为 datagridview 设置内部对象数据属性

> ID：10980304
> 
> 赞同：1
> 
> 时间：2012-06-11T12:41:47.517
> 
> 标签：c#, asp.net, entity-framework

我为模型创建了实体框架。我想访问内部对象并将该内部对象绑定到 datagridview。我可以访问内部对象，但我无法设置 datagridview 的数据属性来显示这一点。任何人都可以帮助我在这里我在EF中有两个类的代码。ItemMaster 和 Category.ItemMaster 包含类别 ID。Category 包含类别名称。现在在 EF 中，我可以访问类别对象，例如

```
 public static List<ItemMaster> GetAllItemMasters()
 {
 using (var itemContext = new EntitiesContext())
 {
        var items = itemContext.ItemMasters.Include("Category").Where(p=>  (p.IsDelete==   null || p.IsDeleted.Value == false)).ToList();
        return items;
    } 
```

现在，在绑定到 datagridview 时，我在后面的代码中只有 categoryid 之类的属性，我可以访问 itemmaster.category.categoryname 之类的内部对象，但我无法将 datagridview 的数据属性设置为 category.categoryname。所以你能帮帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:47:47.283

添加对命名空间的引用（如果需要），然后将项目拆箱到父类中。

```
((MyClass)Container.DataItem).MyInnerClassObject.SomePropertyValue 
```

# java - 小程序错误：需要身份验证

> ID：10980310
> 
> 赞同：0
> 
> 时间：2012-06-11T12:42:18.193
> 
> 标签：java, security, authentication, jar, applet

![加载 Applet 时，它要求集成 Windows 身份验证。](../Images/8e5303acb89a20678ebbbb596930b1c0.png)

加载 Applet 时，它要求集成 Windows 身份验证，在早期的部署中，我没有收到这些消息。两天前，我创建了一个 Applet Jar 并部署在服务器（IIS）中，当时我没有收到任何身份验证消息。但是今天我用相同的源代码创建了一个新的 jar 并部署在同一台服务器上，但我现在得到了这个向导。我不知道这里有什么问题..

# zend-framework - 使用zend pdf更改pdf的方向

> ID：10980314
> 
> 赞同：2
> 
> 时间：2012-06-11T12:42:38.847
> 
> 标签：zend-framework, pdf, pdf-generation

我有一个现有的 pdf，我想加载它，更改它的方向并保存它。我试过这个但它不起作用：

```
$pdf = Zend_Pdf::load('mypdf');
$page = $pdf->pages[0];
$page->rotate(0,0,deg2rad(90));
$pdf->save('new.pdf'); 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:41:20.607

旋转页面后，您必须将页面分配给`$page`PDF 文档：`$pdf`

```
$page->rotate(0,0,deg2rad(90));
$pdf->pages[0] = $page; // assign the page to the PDF document
$pdf->save('new.pdf'); 
```

请注意，在上面的示例中，旧页面 1 在`$pdf`对象中被覆盖。

# android - Android服务的onresume方法

> ID：10980315
> 
> 赞同：1
> 
> 时间：2012-06-11T12:42:42.433
> 
> 标签：android, android-service

我正在尝试提供一项等待 NFC 标签并执行某些操作的服务。我可以在活动中使用以下代码块来做到这一点，但即使经过研究，我也不知道如何在服务中实现它。

```
@Override
protected void onResume() {
    super.onResume(); // Sticky notes received from Android if
    enableNdefExchangeMode();

    if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
        do_something();
    }
} 
```

我想在服务中做到这一点。我不能使用 super.onResume()。我应该用什么来代替这个，或者怎么做？

任何帮助将不胜感激。已经感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:47:16.007

给你 ：）

我还建议在这里查看：http: [//developer.android.com/guide/topics/nfc/index.html](http://developer.android.com/guide/topics/nfc/index.html)以获取更多文档、示例和代码

```
<service 
            android:name="com.myexample.ServiceName" >
            <intent-filter>
                <action android:name="android.nfc.action.NDEF_DISCOVERED" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.nfc.action.NDEF_DISCOVERED" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:mimeType="application/com.example.android.beam" />
            </intent-filter>
        </service> 
```

**更新**：这是一个完整的例子：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/nfc/ForegroundDispatch.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/nfc/ForegroundDispatch.html)

# xslt - 如何从 XSLT TBB 中获取关键字的“键”？

> ID：10980316
> 
> 赞同：3
> 
> 时间：2012-06-11T12:42:42.857
> 
> 标签：xslt, tridion, tridion-2011

我正在研究 XSLT TBB（使用 Tridion 2011 SP1 上的 XSLT 调解器）从关键字中检索键值。

我的关键字看起来像这样。

```
Value: Some Value   
Key: Its ID is 123 
```

这是一个普通的关键字。

我创建了一个带有字段的模式。这些值将从列表和类别中选择。

组件 Source 如下所示： 这是直接取自 Tridion UI 组件的 Component 源。

```
<Content xmlns="Some Name space">
    <keywordlink xlink:href="tcm:202-9737-1024" xlink:title="Some Value"
        xmlns:xlink="http://www.w3.org/1999/xlink">Some Value</keywordlink>
</Content> 
```

当我从模板生成器中观察 tcm:Component 源时，我观察到该字段不存在任何属性。

```
 <Content xmlns="Some Name space">
    <keywordlink>Some Value</keywordlink>
  </Content> 
```

我想检索关键字的 Key 值。

我写了一个这样的 XSLT TBB。我正在使用 XSLT 调解器来执行 XSLT TBB。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:simple="Some Name space"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:tcm="http://www.tridion.com/ContentManager/5.0"
  xmlns:xh="http://www.w3.org/1999/xhtml" 
  xmlns:i="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:transform-ext="urn:tridion:transform-ext" 
  xmlns="http://www.w3.org/1999/xhtml" 
  exclude-result-prefixes="#default simple xh">

    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />

    <xsl:template match="/">
        <xsl:apply-templates 
            select="tcm:Component/tcm:Data/tcm:Content/simple:Content" />
    </xsl:template>

    <xsl:template match="simple:Content">
        <xsl:value-of  select="simple:keywordlink/@*"/>
        <xsl:value-of select=document(simple:keywordlink/@xlink:href)/>
    </xsl:template>
<xsl:stylesheet> 
```

我得到空白输出。我想获取关键字的键值。

我得到空白输出，因为在 tcm:Component XML 中，没有属性。

我不确定如何导航到该关键字。

我应该检索 Key 的值，即“它的 ID 是 123”。

任何人都可以帮助如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:27:33.423

似乎不可能仅使用 XSLT 调解器在关键字字段中获得指向关键字的 xlink:href。

为了克服这个问题，我创建了一个 .NET 复合物，它“膨胀”了 XML 中的额外关键字信息。您必须将这个化合物放在 XSLT 化合物之前。

代码：

```
namespace ContentManagement.TBB.Templates
{
   [TcmTemplateTitle("Inflate Keyword Info")]
    public class GetExtendedComponent : TemplateBase
    {
       public override void Transform(Engine engine, Package package)
       {
           Initialize(engine, package);

           Component component = GetComponent();
           XmlElement componentXml = component.ToXml();

           XmlNamespaceManager ns = new XmlNamespaceManager(componentXml.OwnerDocument.NameTable);
           ns.AddNamespace("ns", component.Schema.NamespaceUri);

           ItemFields fields = new ItemFields(component.Content, component.Schema);
           InflateKeywords(fields, (XmlElement)componentXml.SelectSingleNode(String.Format("//ns:{0}", component.Schema.RootElementName), ns));

           ItemFields metaFields = new ItemFields(component.Metadata, component.MetadataSchema);
           InflateKeywords(metaFields, (XmlElement)componentXml.SelectSingleNode("//ns:Metadata", ns));

           Item xmlItem = package.CreateStringItem(ContentType.Component, componentXml.OuterXml);
           package.Remove(package.GetByName(Package.ComponentName));
           package.PushItem(Package.ComponentName, xmlItem);
       }

       private void InflateKeywords(ItemFields fields, XmlElement element)
       {
           XmlNamespaceManager ns = new XmlNamespaceManager(element.OwnerDocument.NameTable);
           ns.AddNamespace("ns", element.NamespaceURI);
           Logger.Debug("NS: " + element.NamespaceURI);
           foreach (ItemField field in fields)
           {
               if (field is KeywordField)
               {
                   KeywordField keywordField = (KeywordField)field;

                   XmlNodeList nodes = element.SelectNodes(String.Format("./ns:{0}", keywordField.Name), ns);
                   foreach (XmlNode node in nodes)
                   {
                       XmlElement kwelement = (XmlElement)node;

                       Logger.Debug(String.Format("Keyword titel: {0}", keywordField.Value.Title));
                       Logger.Debug(String.Format("Keyword Element Value: {0}", kwelement.InnerText));

                       kwelement.SetAttribute("href", "http://www.w3.org/1999/xlink", keywordField.Values.First(v => v.Title.Equals(kwelement.InnerText)).Id);
                       kwelement.SetAttribute("type", "http://www.w3.org/1999/xlink", "simple");
                       kwelement.SetAttribute("title", "http://www.w3.org/1999/xlink", kwelement.InnerText);
                   }
               }
               else if (field is EmbeddedSchemaField)
               {
                   EmbeddedSchemaField embedField = (EmbeddedSchemaField)field;

                   XmlNodeList nodes = element.SelectNodes(String.Format("./ns:{0}", embedField.Name), ns);
                   int i = 0; 
                   foreach (XmlNode node in nodes)
                   {
                       XmlElement embedElement = (XmlElement)node;
                       InflateKeywords(embedField.Values[i], embedElement);
                       i++;
                   }
               }

           }
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T13:13:02.403

关键字的关键字不存储在链接中（实际上只包含查找关键字所需的最少信息）。因此，您必须加载关键字并从那里读取。

Yoav 在这里展示了如何从 XSLT 中读取其他项目：

[http://yoavniran.wordpress.com/2009/07/11/implementing-the-xslt-mediator-part-1/](http://yoavniran.wordpress.com/2009/07/11/implementing-the-xslt-mediator-part-1/)

这个片段似乎相关：

```
<xsl:attribute name="alt">
    <xsl:value-of select="document(simple:image/@xlink:href)/tcm:Component/tcm:Data/tcm:Metadata/image:Metadata/image:altText"/>
</xsl:attribute> 
```

所以`document()`调用加载链接的项目（在本例中为多媒体组件），然后其余部分`select`找到他们正在寻找的值。

关键字 XML 如下所示：

```
<?xml version="1.0"?>
<tcm:Keyword xmlns:transform-ext="urn:tridion:transform-ext" 
    xmlns:i="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:xlink="http://www.w3.org/1999/xlink" 
    xmlns:tcm="http://www.tridion.com/ContentManager/5.0" 
    IsEditable="false" ID="tcm:1-233-1024">
    <tcm:Context>
        <tcm:Publication xlink:title="000 Parent Publication" xlink:href="tcm:0-1-1" 
            xlink:type="simple"/>
        <tcm:OrganizationalItem xlink:title="Places" xlink:href="tcm:1-37-512" 
            xlink:type="simple"/>
    </tcm:Context>
    <tcm:Info>
        <tcm:LocationInfo>
            <tcm:WebDAVURL>/webdav/000%20Parent%20Publication/Places/New%20Keyword.tkw</tcm:WebDAVURL>
            <tcm:Path>\000 Parent Publication\Places</tcm:Path>
        </tcm:LocationInfo>
        <tcm:BluePrintInfo>
            <tcm:OwningPublication xlink:title="000 Parent Publication" xlink:href="tcm:0-1-1" xlink:type="simple"/>
            <tcm:IsShared>false</tcm:IsShared>
            <tcm:IsLocalized>false</tcm:IsLocalized>
        </tcm:BluePrintInfo>
        <tcm:VersionInfo>
            <tcm:CreationDate>2012-06-11T09:09:03</tcm:CreationDate>
            <tcm:RevisionDate>2012-06-11T09:09:03</tcm:RevisionDate>
            <tcm:Creator xlink:title="TCMHOSTNAME\Administrator" 
                xlink:href="tcm:0-11-65552" xlink:type="simple"/>
        </tcm:VersionInfo>
        <tcm:AllowedActions>
            <tcm:Actions Managed="0" Deny="96" Allow="268560384"/>
        </tcm:AllowedActions>
    </tcm:Info>
    <tcm:Data>
        <tcm:Title>New Keyword</tcm:Title>
        <tcm:Description>New Keyword</tcm:Description>
        <tcm:Key>Key</tcm:Key>
        <tcm:IsAbstract>false</tcm:IsAbstract>
        <tcm:ParentKeywords/>
        <tcm:RelatedKeywords/>
        <tcm:MetadataSchema xlink:title="" xlink:href="tcm:0-0-0" xlink:type="simple"/>
        <tcm:Metadata/>
        <tcm:IsRoot>true</tcm:IsRoot>
    </tcm:Data>
</tcm:Keyword> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T15:26:00.390

以这种方式实施：-

要获取值字段：-

```
document(simple:keywordlink/@xlink:href)/tcm:Keyword/tcm:Data/tcm:Title/text()

<xsl:value-of select="document(simple:keywordlink/@xlink:href)/tcm:Keyword/tcm:Data/tcm:Title/text()" /> 
```

## 结果：

```
Some Value 
```

要获取关键字段：-

```
document(simple:keywordlink/@xlink:href)/tcm:Keyword/tcm:Data/tcm:Key/text()

<xsl:value-of select="document(simple:keywordlink/@xlink:href)/tcm:Keyword/tcm:Data/tcm:Key/text()" /> 
```

## 结果：

```
Its ID is 123 
```

# algorithm - 超分辨率和拉普拉斯项

> ID：10980318
> 
> 赞同：1
> 
> 时间：2012-06-11T12:42:52.867
> 
> 标签：algorithm, image-processing, convolution

我正在编写一个允许执行 SuperResolution 算法的程序。在书中，在复原的路上，他们使用了离散的拉普拉斯算子。我必须以某种方式将矩阵（我的图像）乘以这个拉普拉斯算子。所以，我必须将此运算符表示为矩阵，但我无法想象如何？

书中的文字：

> 拉普拉斯算子是一个二阶导数项，但对于离散数据，它可以通过具有以下形式的掩码的单个卷积来近似：

![在此处输入图像描述](../Images/bd29e85a993b6dc357857c1b7ff4293f.png)

> 操作员将此卷积作为矩阵乘法执行。它具有如下形式（空白代表零）。

![在此处输入图像描述](../Images/756297f9d7fb45437a2a9d16aa764263.png)

PS对不起我的英语！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:54:24.097

您只需将 3x3 卷积核应用于您的图像，例如在伪代码中：

```
for i = 1 to M - 1
    for j = 1 to N - 1
        img_out[i][j] = 4 * img[i][j] - img[i-1][j] - img[i+1][j] - img[i][j-1] - img[i][j+1] 
```

其中`img`是输入图像，`M`是行数，`N`是列数，`img_out`是卷积后的输出图像。

请注意，边界像素`img_out`未定义。

# java - 在java中，我们如何从类中的方法破坏类的实例

> ID：10980321
> 
> 赞同：8
> 
> 时间：2012-06-11T12:43:02.060
> 
> 标签：java, garbage-collection, destructor

我处理它的方法类似于删除任何常用对象的情况，即简单地将引用设为空并让垃圾收集器完成其工作。

然而，为了在类中等同于 null，对对象的唯一引用是“this”。以下类的代码也是有效的：

```
class A{
  public A(){
    //Init
  }

  public void method destruct(){
    if(someCondition){
      this=null;  //Is this statement valid? Why / Why not?
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-11T12:46:12.210

您不会在 Java 中“破坏”对象。这是大错特错。不要这样做。

在 Java 中，对象是在堆上创建的。只要有一个指向他们的参考资料，他们就会活着。垃圾收集器清理混乱。

你当然应该尽你所能确保你不会积累和持有不必要的引用（例如，Swing 中的 Listeners）。

但你的提议根本不是正确的。停止并停止。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-11T12:50:31.480

> ```
> this=null;  //Is this statement valid? Why / Why not? 
> ```

它不是有效的 Java，因为`this`它不是左值；即不是你可以分配的东西。这是一个编译错误，就像编译错误一样`42 = i;`。

（JLS 对赋值有以下说明： *“赋值运算符的第一个操作数的结果必须是变量，否则会发生编译时错误。”* - [JLS 15.26.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.1) 然后 JLS 文本继续列出不同的事物有资格作为变量，而`this`不是其中之一。）

此外，正如 duffymo 所说，在 Java 中做这件事是完全错误的。让 GC 完成它的工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T12:48:46.910

注意：您的建议不太可能有用。

您可以做的是使用委托。

```
class A {
   private AImpl impl = new AImpl();

   public void close() {
      if (impl != null)
         impl.close();
      impl = null;
   }
} 
```

由于所有引用都是间接的，因此您可以确保只有一个对真实对象的引用并将其清除。

* * *

卸载组件时，某些 OSGi 容器中的代理会执行此操作。由于容器对引用的生命周期几乎没有控制权，因此很难卸载库（实现）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T12:48:30.070

你的目标被严重误导了。

实例之外的任何人都持有对它的非弱引用。那么无论你在里面做什么，它都不会被收集。或者没有人做，那么它最终会被收集起来，不管你在里面做什么。在任何一种情况下，`this=null`都没有区别，即使它是合法的 Java 代码。不要这样做。如果您担心对象的生命周期和内存耗尽，请注意要摆脱的对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T12:48:56.813

设置`this = null`就像试图说一个对象不引用自己。它总是隐含地引用自己。您需要找到可能引用此对象的其他对象并清除它们的引用。通常，这会自动发生，因为大多数对象是通过堆栈上的局部变量保留的。当我说“保留”时，我的意思是它们通过引用链被引用，最终导致堆栈上的变量。当您离开该方法时，引用将被清除。但是，如果您有一个引用此对象的静态变量，则可能是您必须将其显式设置为 null 的情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T12:51:10.043

对象的生命周期由 JVM 控制，因此对象无法决定何时不再需要自己。您可以做的是在对该对象的引用上付出一些努力。可以使用引用类型来指出对象的“重要性”。

java中的基本引用类型可以在这里找到：

更多信息：http: [//docs.oracle.com/javase/1.3/docs/api/java/lang/ref/package-summary.html](http://docs.oracle.com/javase/1.3/docs/api/java/lang/ref/package-summary.html)

讨论这里的引用： [Java中的软引用和弱引用有什么区别？](https://stackoverflow.com/questions/299659/what-is-the-difference-between-a-soft-reference-and-a-weak-reference-in-java) 和 [了解 Java 的参考类：SoftReference、WeakReference 和 PhantomReference](https://stackoverflow.com/questions/3329691/understanding-javas-reference-classes-softreference-weakreference-and-phanto)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-25T02:16:34.130

执行线程在 destruct() 方法内部的原因告诉我，有一个调用者持有对这个类 A 实例的引用。所以，尽管如此，你不能在 java 中做任何类似“this = null”的事情 -它不会有帮助，即使它在 java 中是允许的。你不能破坏java中的对象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-11T13:01:39.710

不，上面的代码无效。`this`只要 JVM 正在执行，类的引用就会持续。设置实际上`this == null`会给你一个编译器错误，因为虽然`this`被称为引用，但它实际上是一个值，你不能**为**一个值分配任何东西。

这也是不必要的，因为`this`只有在该代码中执行并且 GC 不能声明仍在执行的对象时才有效。但是，一旦对象的执行结束，它`this`也会丢失，并且该对象将自动变得可用于 GC（即，如果不存在对该对象的其他引用）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-11T12:48:27.873

为了让 java 垃圾收集器拾取你的类，它不应该被引用为 OTHER 类。

该语句`this=null;`是非法的，因为赋值的左侧必须是变量。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-11T12:48:45.803

没有办法`delete`在 Java 中显式地显示特定的引用。Java 这样做是为了避免挂起引用。如果您`delete`是一个对象，那么其他对象引用它可能会尝试访问数据并获取对无效数据的引用。

无论如何，您不应该尝试`delete`对象，只需将对该对象的所有引用移动到 null 即可。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-11T12:48:52.903

不。当没有引用指向实例对象时，GC 可以删除实例对象，即它从所有正在运行的线程中都无法导航到该对象。当你在对象中执行一个方法时，这个方法是从外部调用的，所以有一个对象的引用。对象本身不能被销毁，因为对它的引用仍然存在于外部。

考虑另一种内存管理方法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-06-11T12:49:01.200

在方法`this`中是对调用当前方法的对象的引用，因此不应更改它。将此视为最终参考。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-06-11T12:56:54.223

您可以致电：

```
 System.gc() or RuntimeUtil.gc() from the jlibs 
```

但是如果你这样做，你会弄乱 JVM 运行时。如果将引用设置为 null，则该对象仍然存在，它只是它的引用不会引用该对象，并且在下次调用 GC 时它将销毁该对象（除非其他引用引用它）。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-06-11T13:05:55.000

这是一个编译错误。您不能将 NULL 分配给“this”。关键字'this'可以用在equals的右边（除了左边不是NULL。原因：什么都不能赋值给null）。

对于破坏，在 java 中，你有一个 GC 可以在幕后为你完成这项工作。

请注意，对于用户定义的对象，您仍然可以执行以下操作 -

```
object reference = null; 
```

但是 'this' 不能用在等号的左边。

# android - Proguard 返回错误代码 1。从 ADT 16 更新到 18 后

> ID：10980323
> 
> 赞同：10
> 
> 时间：2012-06-11T12:43:10.963
> 
> 标签：android, adt, proguard

我曾经让[Proguard](http://sourceforge.net/projects/proguard/files/proguard/) 4.6 完美地在 Eclipse 3.6.2 上导出签名的应用程序。

但是一旦我将我的 ADT + SDK 从 更新`16.0.0.v201112150204-238534`到 ，`18.0.0.v201203301601-306762`我就不能再导出签名的应用程序（调试版本工作正常）。相反，我在控制台中收到以下错误日志：

```
Proguard returned with error code 1\. See console
java.io.IOException: Can't read [\\bta\wspc\LibProj1\bin\libproj1.jar] (Can't process class [com/bta/blib/proj1/BtClsProj1.class] (Unexpected end of ZLIB input stream))
    at proguard.InputReader.readInput(InputReader.java:230)
    at proguard.InputReader.readInput(InputReader.java:200)
    at proguard.InputReader.readInput(InputReader.java:178)
    at proguard.InputReader.execute(InputReader.java:78)
    at proguard.ProGuard.readInput(ProGuard.java:196)
    at proguard.ProGuard.execute(ProGuard.java:78)
    at proguard.ProGuard.main(ProGuard.java:492)
Caused by: java.io.IOException: Can't process class [com/bta/blib/proj1/BtClsProj1.class] (Unexpected end of ZLIB input stream)
    at proguard.io.ClassReader.read(ClassReader.java:112)
    at proguard.io.FilteredDataEntryReader.read(FilteredDataEntryReader.java:87)
    at proguard.io.JarReader.read(JarReader.java:65)
    at proguard.io.DirectoryPump.readFiles(DirectoryPump.java:65)
    at proguard.io.DirectoryPump.pumpDataEntries(DirectoryPump.java:53)
    at proguard.InputReader.readInput(InputReader.java:226)
    ... 6 more
Caused by: java.lang.RuntimeException: Unexpected end of ZLIB input stream
    at proguard.classfile.io.RuntimeDataInput.readInt(RuntimeDataInput.java:136)
    at proguard.classfile.io.ProgramClassReader.visitProgramClass(ProgramClassReader.java:77)
    at proguard.classfile.ProgramClass.accept(ProgramClass.java:346)
    at proguard.io.ClassReader.read(ClassReader.java:91)
    ... 11 more 
```

我搜索了 SO 以寻找线索，但我能找到的唯一相关线程是关于[带有 Eclipse SDK 3.7.1 的 Proguard 4.7](https://stackoverflow.com/questions/8877452/proguard-4-7-with-eclipse-sdk-3-7-1-proguard-fails-with-java-io-ioexception)以及我显然没有的“Samsung's SPen SDK 1.5”的一些参考。

知道什么可能导致此问题以及如何解决问题吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-14T10:51:51.060

我通过从 OpenJDK 7 切换回 Sun JDK 6 解决了这个问题。

更新：

使用JDK 6问题又回来了。我当前的解决方案：关闭项目->导出时自动构建。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-11T13:40:15.697

通过将 Proguard 更新到最新的 4.8 解决了问题。

**更新：**虽然更新到 Proguard 4.8 解决了该问题，但它再次出现在另一个项目中，该项目与第一次出现该问题的项目几乎相同（它使用相同的库项目）。知道整个环境是相同的，我不知道为什么会发生这种情况（以及为什么 Proguard 如此不一致）。追了大约两个小时后，我终于有了一个猜测：该`proguard.cfg`文件不是通过 Eclipse 编辑的，而是通过 WinMerge 编辑的。一旦我`proguard.cfg`从工作项目中复制（相同！），问题就消失了。

显然，Proguard 在 CRLF 与 LF 方面存在问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T08:09:24.263

错误消息表明传递给 ProGuard 的输入 jar 已损坏。您可以在构建失败后轻松检查这一点。也许您的磁盘分区已满。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T23:53:31.980

这可能是因为自您上次测试项目以来文件已更改，因此项目可能未完全构建。在设备上清理并运行项目，然后尝试导出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-07T14:17:44.463

通过注释 project.propterties 中的行解决了问题，即

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

# c# - 进程杀死自己

> ID：10980329
> 
> 赞同：1
> 
> 时间：2012-06-11T12:43:36.803
> 
> 标签：c#, .net, process

我正在编写一个程序来使用 HandbrakeCLI 作为转换器批量转换视频文件。我已经完成了大部分设置，现在实际上正在将文件传递给 Handbrake。我使用 HandbrakeCLI 的位置创建一个新进程并传递参数。我也让它在同一个shell中执行。它旋转起来，然后开始进行转换并达到三帧左右并杀死自己。我在 Windows 8 64 位上使用 Visual Studio 12。这是我的代码：

```
static void EncodeVideos()
    {
        var continueConverting = true;

        while (continueConverting)
        {
            var converted = 0;
            if (settings.Optimize == true)
            {
                videos = videos.OrderBy(x => x.InputSize).ToList();
            }

            foreach (var v in videos)
            {
                if (!v.AlreadyConverted())
                {
                    v.CreateOutputPath();
                    var input = String.Format("-i \"{0}\" ", v.InputPath);
                    var output = String.Format("-o \"{0}\" ", v.OutputPath);
                    var preset = String.Format("-Z {0}", settings.Preset);
                    var convertString = String.Format(" {0} {1} {2}", input, output, preset);
                    //Converting is not working correctly yet.
                    var p = new Process();
                    p.StartInfo = new ProcessStartInfo(settings.HandBrakeLocation, convertString)
                    {
                        UseShellExecute = false,
                    };
                    p.Start();
                    p.WaitForExit();
                    converted++;
                }
            }

            if (settings.Loop == true)
            {
                if (converted == 0)
                {
                    continueConverting = false;
                }
            }
            else
            {
                continueConverting = false;
            }
        }
    } 
```

如果您想了解代码的更多上下文，我已将其全部放在 github 上，您可以在[Github](https://github.com/Rumel/Freezing-Ironman)上找到它。

编辑：固定代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:45:39.107

```
if (settings.Loop == true)
            {
                if (converted == 0)
                {
                    continueConverting = false;
                }
                continueConverting = false;
            }
            else
            {
                continueConverting = false;
            } 
```

我猜你真的不想继续转换！

这看起来一开始是不正确的。

# android - 如何从 C 将 int 数组发送到 Java 代码

> ID：10980331
> 
> 赞同：2
> 
> 时间：2012-06-11T12:43:50.377
> 
> 标签：android, java-native-interface

在我的原生代码中的 Android 平台上，我分配了一个 int 数组

```
mBuffer = new int[BUFSIZE]; 
```

我想把这个发送到Java端，Java方法是这个

```
public void WriteBuffer(int[] buffer, int size) 
{

} 
```

我像这样回调java代码

```
const char* callback = "WriteBuffer";

mWriteMethod =  env->GetMethodID(cls, callback, "([II)V"); 
```

这调用了 java 方法，它只是在我的 Java 代码中缓冲区为空。因为我确实传递了一个指向动态分配的内存而不是实际数组的指针，这可能是它不起作用的原因，但我不知道如何将指针传递给 Java。无论如何，我需要将缓冲区参数作为 Java 端的整数数组。

任何人都知道我可以如何修改上述内容以使其正常工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:50:04.243

我对您的问题的理解是您想调用 java 方法`WriteBuffer`并将 a 传递`int[]`给它。
jni 中需要的一些伪代码

```
jintArray buffer; 
buffer= (*env)->NewIntArray(env, BUFSIZE); 
(*env)->SetIntArrayRegion(env, buffer, 0,BUFSIZE, mBuffer); 
```

`SetIntArrayRegion()`将从 mBuffer 复制到 Java 数组中。

# java - BlackberryPreprocessBuilder 和 BlackberryResourceBuilder 缺失

> ID：10980334
> 
> 赞同：0
> 
> 时间：2012-06-11T12:43:53.200
> 
> 标签：java, eclipse, blackberry, eclipse-plugin

我正在使用 Blackberry eclipse java plugin 1.5 我没有得到 BB 开发环境。 [RIM 编译器支持的](https://stackoverflow.com/questions/1179129/preprocessor-directives-supported-by-the-rim-compiler/1189573#1189573)预处理器指令 和[在用于 Eclipse 的 BlackBerry JDE 插件中使用预处理器指令？](https://stackoverflow.com/questions/1383277/using-preprocessor-directives-in-blackberry-jde-plugin-for-eclipse) 我使用了这些链接但没有工作.. Plaese帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:51:34.133

我的建议是使用最新下载的[Eclipse 和插件](http://swdownloads.blackberry.com/Downloads/contactFormPreload.do?code=DC727151E5D55DDE1E950767CF861CA5&dl=96FC862494C97799CC07421E57F1FDAB&check1=A)。

黑莓工具不是很好，所以我发现最好使用专用的Eclipse，只用于BB dev。我发现这个下载对我来说效果很好。

安装这个版本 - 我认为它会解决你所有的问题。如果没有，请回复，我会看看我是否可以提供进一步的帮助。

# hibernate - 休眠@JoinFormula

> ID：10980337
> 
> 赞同：9
> 
> 时间：2012-06-11T12:43:57.650
> 
> 标签：hibernate

我有两个实体 A 和 B。

```
 public class A{

    @Id
    @GeneratedValue
    private Integer id;

    private String uuid;

    ...
  } 
```

UUID 是外部给出的；ID可以看作是版本。

现在，我想在 B 中引用 A，以便将 uuid 存储在 B 中，并自动选择具有相应 uuid 和最高 id 的 A。

我尝试的是：

```
public class B{
      @Id 
      @GeneratedValue
      private Integer id;

      private String uuidOfA;

      @ManyToOne
      @JoinFormula(value="SELECT a.id FROM A a WHERE v.uuid = uuidOfA AND v.id = (SELECT max(x.id) FROM A x WHERE x.uuid = v.uuid)", referencedColumnName="id")
      private A a; 

      ...        
} 
```

这将在 B 中创建一个包含 A 的 id 的列，如果我尝试持久化一个对象，则会引发异常。我也尝试过@JoinColumnsOrFormulas，但没有运气。

有人可以给我一个关于如何做到这一点的提示（在 Hibernate 3.5 btw 中）吗？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-12T06:07:16.123

以下作品：

```
@ManyToOne
@JoinColumnsOrFormulas({
  @JoinColumnOrFormula(formula=@JoinFormula(value="(SELECT a.id FROM A a WHERE a.uuid = uuid)", referencedColumnName="id")),
  @JoinColumnOrFormula(column = @JoinColumn("uuidOfA", referencedColumnName="uuid"))
})
private A a; 
```

# javascript - 有序列表下的 YUI Carousel 导航按钮

> ID：10980340
> 
> 赞同：1
> 
> 时间：2012-06-11T12:44:14.927
> 
> 标签：javascript, yui

在 YUI Carousel 中，我希望导航按钮包括显示在项目下方的上一个和下一个按钮。默认情况下，这些按钮放置在上部项目中，我希望将它们放在项目（或图像）之后

```
 <div id="container">
            <ol id="carousel">
                <li>
                    1111111
                </li>
                <li>
                    222222
                </li>
                <li>
                    3333333
                </li>
                <li>
                    444444
                </li>
                <li>
                    5555555
                </li>
                <li>
                    66666666
                </li>
                <li>
                    7777777
                </li>
                <li>
                    8888888
                </li>
                <li>
                    999999999
                </li>
            </ol>
            <div class="yui-carousel-nav">
                <button id="next" class="yui-carousel-button yui-carousel-next"><span>next</span></button>
                <button id="prev" class="yui-carousel-button yui-carousel-prev"><span>prev</span></button>
            </div>                 
        </div> 
```

我在上面使用但仍然导航出现在项目的上方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:34:41.810

您必须使用自定义导航按钮来解决此问题，请遵循以下步骤：

1.  在样式表中使用下面的 css

    .yui-carousel .yui-carousel-item-selected { 边框：无；} .yui-skin-sam .yui-carousel-nav { 位置：相对；顶部：0px；右：1px；高度：1px；背景：无；}
    .yui-skin-sam .yui-carousel-button { 显示：无；} .yui-carousel-nav ul { 显示：无；}

2.  对 js 函数调用使用这样的想法：

    (function () { var carousel;

    ```
    YAHOO.util.Event.onDOMReady(function (ev) {
        var carousel = new YAHOO.widget.Carousel("container", {
            isCircular:     false, 
            numVisible:     3,
            navigation: { prev: 'prevButton' , next: 'nextButton' }
        });
        carousel.set("selectedItem", 0); 
        carousel.render(); // get ready for rendering the widget
        carousel.show();   // display the widget
    }); 
    ```

    })();

3.  然后对于自定义导航，使用这样的 div：

    ```
     ......
            <li>
                999999999
            </li>
        </ol>
        <div>
            <button id="prevButton">&lt;</button>
            <button id="nextButton">&gt;</button>                 
        </div> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:04:23.500

看这里

[http://developer.yahoo.com/yui/carousel/#cssref](http://developer.yahoo.com/yui/carousel/#cssref)

我是这样理解的

```
{ prev: prev_id, next: nextId } 
```

# mod-rewrite - RewriteRule ([A-Za-z0-9-]+) - 到 404

> ID：10980343
> 
> 赞同：1
> 
> 时间：2012-06-11T12:44:19.970
> 
> 标签：mod-rewrite

有我的要求

```
RewriteRule ^mariage/([A-Za-z0-9-]+)?$ builder.php?url=$1 [QSA,L] 
```

我的网站是这样的：

```
www.site.com
www.site.com/mariage
www.site.com/mariage/mynewurl 
```

我只想在我的 RewriteRule 中说，如果有的话，从任何地方输入`www.site.com/mariage/SOMETHING`，将它们重定向到 builder.php

实际上，当我这样做 /mariage/SOMETHING ----它引导我到 error404

有人可以修改我的代码吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-10T15:23:38.987

试试这个

```
RewriteRule ^mariage/(\.+)$ builder.php?url=$1 [QSA,L] 
```

# c# - 写入单元格会在我的 VSTO 加载项中打开 ScreenUpdating

> ID：10980344
> 
> 赞同：1
> 
> 时间：2012-06-11T12:44:21.890
> 
> 标签：c#, excel, vsto, excel-addins

我有一个奇怪的问题，即 Excel 在我的开发机器和测试机器上的行为不同。

在我的加载项中，我在几个地方关闭了 ScreenUpdating 以实现长时间运行的进程。在我的机器上这工作正常。在测试机上，`ScreenUpdating = true`我一写入单元格，Excel 就会设置。

以下代码为我演示了这个问题。

```
private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    Microsoft.Office.Interop.Excel.Application excel = Globals.ThisAddIn.Application;

    MessageBox.Show(excel.ScreenUpdating.ToString());

    excel.ScreenUpdating = false;
    MessageBox.Show(excel.ScreenUpdating.ToString());

    Workbook workbook = Globals.ThisAddIn.Application.ActiveWorkbook;
    Worksheet w = (Worksheet)workbook.Worksheets[1];
    ((Range)w.Cells[1, 1]).Value = "Test";
    MessageBox.Show(excel.ScreenUpdating.ToString());
} 
```

在我的机器上，打开 Excel 会给出三个消息框

“真”、“假”、“假”。

他们说在测试机器上

“真”、“假”和“真”。

我还使用远程调试器逐步完成，并`ScreenUpdating`在设置单元格值后立即观察属性更改。此外，这不是唯一重置的东西`ScreenUpdating`。添加或删除工作表或工作簿也将执行此操作。

每个系统上的 Excel 版本相同（14.0.6112.5000（32 位））。

这可能是什么原因造成的？如何修复它以使 Excel 尊重我的设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T18:23:17.693

我遇到了同样的问题，ScreenUpdating（和其他设置）被带有 VSTO 插件的 Bloomberg 插件重置为 true。他们的支持正在制定解决方案，但同时以下解决方案可以正常工作：

通过在与其单元格交互时隐藏每个工作表，屏幕不会更新，您将获得性能优势。确保不要试图隐藏最后一张纸，因为它会引发错误。不确定这是否适合您的项目，但对我来说是一个可行的解决方案。

以下是 VB.NET 中用于隐藏工作表的一些示例代码：

```
' Create a book with a single worksheet
Dim Book As Excel.Workbook
Book = Globals.ThisAddIn.Application.Workbooks.Add(Excel.XlWBATemplate.xlWBATWorksheet)

'% Create sheet variable
Dim Sheet As Excel.Worksheet
Sheet =  TryCast(Book.ActiveSheet, Excel.Worksheet)

' Visible
Sheet.Visible = Excel.XlSheetVisibility.xlSheetVisible

' Hidden but user able to show
Sheet.Visible = Excel.XlSheetVisibility.xlSheetHidden

' Hidden for user as well
Sheet.Visible = Excel.XlSheetVisibility.xlSheetVeryHidden 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:58:32.257

Excel 中的其他插件可能会干扰该单一全局设置。

正是出于这个原因，您应该在每次使用之前将当前 ScreenUpdating 状态保存到局部变量，并在之后恢复它。

在事件中忽略该设置的更改`ThisAddIn_Startup`（因为您通常不会在那里进行工作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T17:17:38.263

如果加载项以某种方式干扰您的 ScreenUpdating，您可以通过暂时禁用事件来阻止他们这样做。使用`EnableEvents`. 这可能会破坏该插件的功能，但它可以很好地满足我的需求。

# android - gps 关闭时我的应用程序崩溃了？

> ID：10980351
> 
> 赞同：0
> 
> 时间：2012-06-11T12:45:16.383
> 
> 标签：android, service, gps

嗨，我正在做一个基于 gps 的应用程序，我使用 gps 作为我的项目的服务，当 gps 打开时，它会显示正确的位置并且应用程序运行正常，但之后我完全退出我的应用程序并且当 gps 关闭时它显示崩溃消息。这意味着即使我离开或退出我的应用程序，服务类仍在运行，如果我在应用程序运行时关闭 gps，应用程序也会崩溃，但如果我没有关闭 gps，它工作正常。现在我怎么解决这个问题。我将展示我用于 gps 的服务类

```
public class Gps_Service extends Service {

TextView txtv;
List<Address> myList;
String addressStr;
LocationManager lm;
LocationListener ll;
SQLiteDatabase DiaryDB = null;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}
@Override
public void onCreate() {
    super.onCreate();
    System.out.println("@@@@@@@@@@@ serviceOnCreate");
//      Toast.makeText(this, "GPS Service started(Diary)", Toast.LENGTH_LONG).show();       

    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    ll = new mylocationlistener();
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);

}

@Override
public void onDestroy() {
    super.onDestroy();

//      Toast.makeText(this, "GPS Service Destroyed(Diary)", Toast.LENGTH_LONG).show();

    lm.removeUpdates(ll);
    System.out.println("@@@@@@@@@@@ inside ONDESTROY GPS listener removed");
}

 @Override
    public int onStartCommand(Intent intent, int flags, int startId) 
    {
        Log.v("StartServiceAtBoot", "StartAtBootService -- onStartCommand()");          
//          Toast.makeText(this, "Service started", Toast.LENGTH_LONG).show();
        // We want this service to continue running until it is explicitly
        // stopped, so return sticky.
        return START_STICKY;
    }

 private class mylocationlistener implements LocationListener
    {

        public void onLocationChanged(Location location) 
        {
            if (location != null) {
                Geocoder myLocation = new Geocoder(Gps_Service.this, Locale.getDefault());
//                  Toast.makeText(MyService.this,location.getLatitude() + "       " + location.getLongitude()   +"\n",Toast.LENGTH_LONG).show();
//                  DiaryDB = MyService.this.openOrCreateDatabase("DIARY_DATABASE", MODE_PRIVATE, null);
//                  DiaryDB.execSQL("INSERT INTO Locations(LATITUDE, LONGITUDE) VALUES('"   +location.getLatitude()+"','"+location.getLongitude()+"')");
//                  DiaryDB.close();
            //  ParseTweetsActivity.latitude  = ""+location.getLatitude();
                //ParseTweetsActivity.longitude = ""+location.getLongitude();
                AndroidGoogleMapsActivity.lats   = Double.parseDouble(""+location.getLatitude());
                AndroidGoogleMapsActivity.longt = Double.parseDouble(""+location.getLongitude());
            Advertiser_get_direction.latitudefrom = Double.parseDouble(""+location.getLongitude());
                Advertiser_get_direction.longtitudefrom = Double.parseDouble(""+location.getLongitude());

                AndroidGoogleMapsActivity.longt = Double.parseDouble(""+location.getLongitude());
                System.out.println("saaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"+AndroidGoogleMapsActivity.lats);
          //    ParseTweetsActivity.load();
                try 
                {
                    myList = myLocation.getFromLocation(location.getLatitude(),location.getLongitude(), 1);

                } catch (IOException e) {

                    e.printStackTrace();
                }

                if(myList!=null)
                {

                    Address address = (Address) myList.get(0);

                    addressStr = "";
                    addressStr += address.getAddressLine(0) + "\n";
                    addressStr += address.getAddressLine(1) + "\n";
                    addressStr += "Country name  "+address.getCountryName() + "\n";
                    addressStr += "Locality      "+address.getLocality() + "\n";
                    addressStr += "Country code  "+address.getCountryCode() + "\n";
                    addressStr += "Admin Area    "+address.getAdminArea() + "\n";
                    addressStr += "SubAdmin Area "+address.getSubAdminArea() + "\n";
                    addressStr += "PostalCode    "+address.getPostalCode() + "\n";

                //  txtv.append(location.getLatitude() + "    " + location.getLongitude() +"\n");
                //  txtv.append(addressStr+"\n");
                    System.out.println(location.getLatitude() + "    " + location.getLongitude() +"\n");
                    lm.removeUpdates(ll);
                }
            }
        }
        public void onProviderDisabled(String provider) 
        {
//              Toast.makeText(MyService.this,"Provider Disabled",Toast.LENGTH_LONG).show();
            txtv.setText("");
        }
        public void onProviderEnabled(String provider)
        {
//              Toast.makeText(MyService.this,"Provider Enabled.....",Toast.LENGTH_LONG).show();
        }
        public void onStatusChanged(String provider, int status, Bundle extras)
        {
        }
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:52:22.653

你已经`TextView`在你的`Service`. 这不好。`TextView`是一个 UI 组件，不属于服务。

在您的`onProviderDisabled()`方法中，您调用`txtv.setText("");`which 可能会崩溃，因为`txtv`它为空。这可能就是禁用 GPS 时应用程序崩溃的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:16:41.023

当我没有在 onDestroy() 中释放监听器时，我遇到了这样的问题。尝试添加以下代码：

```
lm.unregisterListener(ll); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:57:58.637

更改您的代码

```
lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
ll = new mylocationlistener();
lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll); 
```

跟随

```
lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
ll = new mylocationlistener();

if (lm.isProviderEnabled(LocationManager.GPS_PROVIDER)){
      lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,0,ll);
    } 
```

# c# - 在 WinRT 中从 C# 解析 JSON

> ID：10980355
> 
> 赞同：3
> 
> 时间：2012-06-11T12:45:33.687
> 
> 标签：c#, windows-runtime

我正在开发适用于 Windows 8 的应用程序。我正在尝试通过 JSON 对 Twitter 进行搜索。为了实现这一点，我使用以下博客文章作为参考。[http://blogs.microsoft.co.il/blogs/bursteg/archive/2008/11/26/twitter-api-from-c-searching.aspx](http://blogs.microsoft.co.il/blogs/bursteg/archive/2008/11/26/twitter-api-from-c-searching.aspx)

我的问题是，WinRT 框架中似乎不存在 ASCIIEncoding 类 :(。我看到 UTF8 可用，但是，我不确定如何直接使用 UTF8 类。有人可以告诉我怎么做吗？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T14:31:55.663

为了在 .NET（完整的 .NET 和 WinRT）中反序列化 JSON，我总是推荐[JSON.NET](http://json.codeplex.com/)。它比 DataContractJsonSerializer 或任何其他开箱即用的解决方案要容易得多。正如您在下面的代码中看到的那样，您不需要像在您提供的示例中那样定义编码。

您只需要一个对象模型（使用 json2csharp 生成它）和几行代码：

```
HttpResponseMessage response = await HttpClient.GetAsync(someUri);
if (response.StatusCode == HttpStatusCode.OK)
{
    string responseString = await response.Content.ReadAsStringAsync();
    // parse to json
    resultItem = JsonConvert.DeserializeObject<T>(responseString);
} 
```

[不久前，我写了一篇更广泛的文章，展示了在 WinRT](http://www.bartlannoeye.be/blog/consuming-json-data-in-winrt)中解析 JSON 的不同可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:08:33.510

您可以尝试使用 Windows.Data.Json 命名空间来反序列化（[http://msdn.microsoft.com/en-us/library/windows/apps/windows.data.json(v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.data.json(v=VS.85).aspx)）。要获取您的 json，您可以使用以下内容：

```
HttpResponseMessage response = await client.GetAsync(url);
string responseText = await response.Content.ReadAsStringAsync(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:30:08.360

只需替换`ASCIIEncoding.UTF8`为`Encoding.UTF8`- 它们本质上是同一个对象（静态`UTF8`属性`Encoding`在桌面框架的基类中定义）。这在 W8 Metro 应用程序中可用。

# javascript - 如何使用 YUI3 添加父节点？

> ID：10980358
> 
> 赞同：1
> 
> 时间：2012-06-11T12:45:43.490
> 
> 标签：javascript, yui

我有 ：`<img src="myimg.png">`

我怎样才能用链接包围它？`<a href=""><img src="myimg.png"></a>`

所以，我必须创建一个父节点。

我使用 YUI3 或原生 JS。

任何的想法 ？

多谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:52:54.033

只需使用[wrap 方法](http://yuilibrary.com/yui/docs/api/classes/Node.html#method_wrap)

```
var img = Y.one('img');
img.wrap('<a href="foo"></a>'); 
```

​ ​</p>

# c# - 按组合框值过滤 Crystal Report

> ID：10980360
> 
> 赞同：0
> 
> 时间：2012-06-11T12:45:47.537
> 
> 标签：c#, crystal-reports, crystal-reports-2008

我有 2 个组合框 cmb1 和 cmb2，一个按钮和一个 crystalreportviewer，cmb1 显示 Std，cmb2 显示 Div，这两个值都是从数据库中提取的。我是 Crystal Report 的新手，对如何使用选择字段感到困惑。我选择一个或两个组合框并单击按钮，数据应在水晶报表中过滤并显示在水晶报表查看器中..例如。我在 cmb1 中选择“5”，在 cmb2 中选择“A”，然后只显示来自 5 A 类的记录.. C# VS2008，VS2008 的默认水晶报告 .. 提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:41:34.397

可以有两种方法来做这件事

1）首先，您必须在前端根据组合值过滤数据表，然后使用 SetDataSource() 函数将过滤后的数据表重新分配给水晶报表。

```
 rptMembership objMembership = new rptMembership();
 DataView dv =new DataView(ReportDataTable);    
 // Filtering data on combo values.
 dv.Filter = "combo1id = 1 and combo2id = 2"
 objMembership.SetDataSource(dv.ToTable());
 rptViewer.ReportSource =  objMembership; 
```

2）其次，您可以根据您的组合值过滤数据库端的记录，然后将新数据表重新分配给水晶。

没有直接的方法可以在水晶报表级别过滤记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T19:00:05.970

在组合框中尝试以下代码：

```
 report rd = new report();

        // set database login information
        rd.SetDatabaseLogon("username", "password", @"NOHA-PC\SQLEXPRESS", "dbname");

        // write formula to pass parameters to report
        crystalReportViewer1.SelectionFormula = "{tablename.columnname} =" + comboBox1.SelectedValue;
        crystalReportViewer1.ReportSource = rd; 
```

# oauth - 带有oauth的nginx

> ID：10980364
> 
> 赞同：2
> 
> 时间：2012-06-11T12:45:59.907
> 
> 标签：oauth, nginx

我将尝试解释我们的问题：我们有一个基于 Apache Web 服务器的应用程序。但不久前有一项任务是删除 apache 并使一切都在 nginx 上运行。我们尝试安装 nginx 并测试我们的应用程序。此外，我们还为我们的站点添加了 nginx 重写引擎来加载。但是我们在实现 OAuth 以在 nginx 中工作时遇到了问题。错误消息：“未安装 PHP OAuth 扩展”

有没有人遇到过类似的问题？

我已经搜索并没有找到解决方案。我找到了以下链接：很久以前写的 http oauth 引擎[https://github.com/yaoweibin/nginx_http_oauth_module](https://github.com/yaoweibin/nginx_http_oauth_module)。我自己不知道如何整合它，除了它的实验性之外，我不知道它是否会起作用。

如果有人遇到类似问题并解决了，请帮助我们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-31T14:57:34.680

我没有足够的代表发表评论，所以我引用了解决方案，因为它在评论中并且很容易被错过。

> 问题已经解决了！谢谢大家。问题是我们没有重新启动 php-frm 服务。当我们手动重新启动它“/etc/init.d/php5-fpm restart”时，错误消息消失了。– user1448914 2012 年 6 月 11 日 13:31

因此，如果您与 OP 和我处于相同的情况，则可以解决此问题：

`service php5-fpm restart`

# asp.net - 在 asp.net 中以编程方式设置 gridview 列宽

> ID：10980365
> 
> 赞同：2
> 
> 时间：2012-06-11T12:46:04.030
> 
> 标签：asp.net, gridview, dynamic, width, set

需要以编程方式在 asp.net 中设置 gridview 的列宽。** 自动生成的列（即 AutogenerateColumns = "true"）。

我尝试了以下方法；

```
protected void gv_RowCreated(object sender, GridViewRowEventArgs e)
{
    e.Row.Cells[2].Width = Unit.Pixel(200);
} 
```

但没有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T13:03:31.093

这是我`GridView1`的 aspx 文件

```
<asp:GridView ID="GridView1" runat="server" AllowSorting="True" 
Font-Size="Small" Width="800px" OnRowDataBound="GridView1_RowDataBound" > 

        <Columns>
                <asp:CommandField SelectText="Seç" ShowSelectButton="True"/>
        </Columns>

</asp:GridView> 
```

这是我在代码隐藏中以编程方式设置 GridView 的列宽的地方。它实际上是关于设置单元格的宽度，但它控制列宽，所以这是一种方式。如您所见，我没有`AutogeneratedColumns="True"`，但我认为这并不重要因为`GridView.RowDataBound`当数据行绑定到数据时发生。

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{ 
     e.Row.Cells[1].Width = 1;
     e.Row.Cells[0].Width = 1;
     e.Row.Cells[4].Width = 75;
     e.Row.Cells[5].Width = 1;                
} 
```

# objective-c - 一个类与其他类只有成员变量和属性（即没有自定义方法）

> ID：10980367
> 
> 赞同：0
> 
> 时间：2012-06-11T12:46:07.520
> 
> 标签：objective-c, class

我有一些结构我想在我的应用程序中用于不同的目的。我的应用程序需要根据这些结构中的每一个定义不同的 NSArray。问题是 NSArray 不适用于结构，所以我读到我应该使用类作为 NSArray 的对象。

现在我的类（现在我将使用这些结构的类）应该只有一些基本的整数和字符串，我可能只需要 @property 和它们，我不想有很多 .h 和 .m 文件我的项目每个都针对不同的班级。有没有一种方法可以让我只拥有一个外部类并将其他类定义为它的一部分，或者将所有这些类定义放在一对 .h 和 .m 文件中？所有这些类定义在功能上都是互斥的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:48:47.550

是的。`@interface`.h 文件中可以有很多块， `@implementation`.m 文件中可以有很多块。

```
// DataTypes.h

@interface Type1 : NSObject

@property (copy) NSString *name; // for example
// more properties

@end

@interface Type2 : NSObject

// more properties

@end 
```

.

```
// DataTypes.m

@implementation Type1

@synthesize name;

@end

@implementation Type2

// etc.

@end 
```

# asp.net - 为什么 RadioButton 可以触发我的 Ajax 函数

> ID：10980368
> 
> 赞同：1
> 
> 时间：2012-06-11T12:46:08.873
> 
> 标签：asp.net, ajax, html, radio-button

当我更改组中的选择时，我试图让一个 ajax 函数运行。但我不知道哪个属性会触发 Ajax。我试图做各种各样的事情，但我所做的一切都会在浏览器中产生错误。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Checkout page</title>
<script type="text/javascript">
    var request;
    function NIS2USD() {
        var from = document.getElementById("NIS").value;
        var to = document.getElementById("USD").value;
        var amount = document.getElementById("totalAmountLabel").value;
        request = new XMLHttpRequest();
        request.onreadystatechange = ProcessResponse;
        request.open("GET", "Convert.aspx?from=" + num1 + "&to=" + num2 + "&amount=" +    amount, true);
        request.send();
    }
    function USD2NIS() {
        var from = document.getElementById("USD").value;
        var to = document.getElementById("NIS").value;
        var amount = document.getElementById("totalAmountLabel").value;
        request = new XMLHttpRequest();
        request.onreadystatechange = ProcessResponse;
        request.open("GET", "Convert.aspx?from=" + num1 + "&to=" + num2 + "&amount=" + amount, true);
        request.send();
    }
    function ProcessResponse() {
        if (request.readyState == 4 && request.status == 200) {
            document.getElementById("totalAmountLabel").innerHTML = request.responseText;
        }
    }
</script>
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body>
<form id="form1" runat="server">
<div class="content">
    <div id="top">
        <div class="topright">
            <a href="#"><img src="images/sitemap.png" alt="Sitemap"</a> 
            <a href="#"><img src="images/rss.png" alt="RSS" /></a>              
        </div>
    </div>
    <div id="header">
        <div class="headings">
            <h1>WebBookStore</h1>
            <h2>pay less read more</h2>
        </div>
    </div>
            <div id="menu">
            <ul>
                <li><a href="Login.aspx">Login</a></li>
                    <li><a href="About.aspx">About Us</a></li>
                                <li><a href="Books.aspx">The Books Collection</a></li>
                                <li><a href="SearchBooks.aspx">Search Books</a></li>
                                <li><a href="Cart.aspx">Your Cart</a></li>
                                <li><a href="#">Checkout</a></li>
                    </ul>
          </div>
                  <div id="main">
        <div class="left">
            <asp:Label ID="Label1" runat="server" Font-Size="X-Large" Text="Checkout"</asp:Label>
            <br />
            <br />
            <asp:Label ID="Label2" runat="server" Text="Client ID:"></asp:Label>
            <asp:Label ID="clientIDLabel" runat="server" Text="Label"></asp:Label>
            <br />
            <br />
            <asp:Label ID="Label3" runat="server" Text="Delivery Date:"></asp:Label>
            <asp:Label ID="orderDateLabel" runat="server" Text="Label"></asp:Label>
            <br />
            <br />
            <asp:Label ID="Label4" runat="server" Text="Total:"></asp:Label>
            <asp:Label ID="totalAmountLabel" runat="server" Text="Label"></asp:Label>
            <br />
            <br />
            <asp:Label ID="Label7" runat="server" Text="Currency:"></asp:Label>
            <asp:RadioButton ID="NIS" runat="server"  Checked="True" 
                GroupName='group1' Text="NIS"  />
            <asp:RadioButton ID="USD" runat="server" GroupName='group1' Text="USD" />
            <br />
            <br />
            <asp:Label ID="Label6" runat="server" 
        Text="Pick a delivery date"></asp:Label>
            <br />
            <br />
            <asp:Calendar ID="Calendar1" runat="server" BackColor="White" 
                BorderColor="Black" BorderStyle="Solid" CellSpacing="1" Font-Names="Verdana" 
                Font-Size="9pt" ForeColor="Black" Height="64px" NextPrevFormat="ShortMonth" 
                Width="218px" onselectionchanged="Calendar1_SelectionChanged">
                <DayHeaderStyle Font-Bold="True" Font-Size="8pt" ForeColor="#333333" 
                    Height="8pt" />
                <DayStyle BackColor="#CCCCCC" />
                <NextPrevStyle Font-Bold="True" Font-Size="8pt" ForeColor="White" />
                <OtherMonthDayStyle ForeColor="#999999" />
                <SelectedDayStyle BackColor="#333399" ForeColor="White" />
                <TodayDayStyle BackColor="#999999" ForeColor="White" />
            </asp:Calendar>
            <br />
            <asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
                Text="Submit Order" />  
            <br />
            <asp:TextBox ID="TextBox1" runat="server" ForeColor="Red" Height="67px" 
                ReadOnly="True" TextMode="MultiLine" Visible="False" Width="451px"></asp:TextBox>
            <br />
        </div>
    </div>
    <div id="footer">
        <div class="info">
            &copy; 2012 WebBookStore<br />
            Site Design - <a href="http://www.URL.com">WebBookStore</a>
        </div>
     </div>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:19:15.833

此代码用于 c#，您可以在 page_load() 中添加

```
NIS.Attributes.Add("onclick", "USD2NIS();");
USD.Attributes.Add("onclick", "NIS2USD();"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:15:17.713

我会将您的单选按钮包装在一个 div 中并像这样访问它们。

```
<script type="text/javascript">

    $(function () {
        $("#rbs input").on("click", function() {
            DoSomthing($(this).attr("value"));
        });
    });

    function DoSomthing(val) {
        $("#<%=totalAmountLabel.ClientID%>").html(val);
    }

</script>

<div id="rbs">
    <p>
        <asp:RadioButton ID="NIS" runat="server" Checked="True" GroupName="rbGroup" Text="NIS"/>
        <asp:RadioButton ID="USD" runat="server" GroupName="rbGroup" Text="USD"/>

</div>
<asp:Label ID="totalAmountLabel" runat="server" Text="Label"></asp:Label> 
```

希望这可以帮助

编辑：添加了如何使用 jquery Selector 获取 ASP.NET 控件。

# c# - 根据来自另一个数据表的排序顺序对数据表进行排序

> ID：10980369
> 
> 赞同：2
> 
> 时间：2012-06-11T12:46:11.187
> 
> 标签：c#, asp.net

我有 2 个数据表，其中我的数据（D1）具有唯一的数据 ID，而在另一个数据表（D2）中，我的数据表（D1）的所有记录的 ID 以特定的顺序排列。如何我可以根据 D2 中的 Id 顺序对我的数据表（D1）进行排序吗？我使用的是 c#asp.net

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:52:40.840

这取决于您是要在代码中还是在数据库中执行此操作。

在数据库中，您将连接两个表，例如 (MS-SQL/T-SQL)：

```
SELECT D2.Sort, D1.* FROM D2 LEFT JOIN D1 ON D2.ID = D1.ID ORDER BY D2.Sort 
```

在代码中，它在很大程度上取决于您将数据保存在哪里。数据集、数据表等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:53:21.623

您可以将排序表中的行复制到`Dicationary`带有索引的 a 中。假设您的关键字段被命名`Key`，代码可能如下所示：

```
static void Main(string[] args)
{
    var dt = new DataTable("Data");
    var dtOrder = new DataTable("Order");

    // Insert some data here

    int i = 0;
    var orderDict = new Dictionary<object, int>();
    foreach(DataRow row in dtOrder.Rows)
    {
        orderDict.Add(row["Key"], ++i);
    }

    var ordered = dt.Rows.Cast<DataRow>().OrderBy(r => orderDict[r["Key"]]);
} 
```

当我阅读 Peaceman71 的评论时，我认为值得一提的是，这是一种*脱节*的方法。任何适当的数据库软件也将为您执行此操作。

# java - 休眠 - 未删除子记录

> ID：10980371
> 
> 赞同：1
> 
> 时间：2012-06-11T12:46:16.557
> 
> 标签：java, hibernate, annotations

我有两个表设置为父/子，例如公司和产品，如下所示 -

公司表：-

company_id , Company_name, creation_date

101，IBM，2010 年 5 月 12 日

产品表：-

company_id、Product_id、Product_name

101, 1001, 日食

101、1002、DB2

保存新的父子（公司和产品）不是问题。当用户从公司对象中删除产品时，就会出现问题。

我在 Company.java 中有以下产品映射信息

```
@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)
@JoinColumn(name = "COMPANY_ID",nullable=false)
@OrderBy(clause = "PRODUCT_NAME" )
@ForeignKey(name = "fk_company_product")     
private List<Product> products = new ArrayList<Product>(); 
```

通过此映射，产品信息正在正确更新，但如果我从公司 bean 中删除产品并保存公司，则不会从产品表中删除产品信息。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:50:23.743

仅当您删除父级时，级联删除才有效。要使用注释处理删除，您应该使用：

1.  如果您使用的是 JPA 2.0：

    ```
    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval=true) 
    ```

2.  如果您使用的是 JPA 1.0，则可以使用 hibernate 注释：

    ```
    @OneToMany(CascadeType.DELETE_ORPHAN) 
    ```

# sql-server - 查询查询？

> ID：10980372
> 
> 赞同：3
> 
> 时间：2012-06-11T12:46:19.723
> 
> 标签：sql-server, database

假设我有五个名为 table1、table2 ... table5 的表。我已经通过加入 table1、2 和 3 创建了一个名为 query1 的视图/查询。

现在，我想创建一个需要连接所有五个表的视图。我的问题是，使用query1并将table4和table5加入其中是否更好，或者将五个表一张一张加入更好？

恐怕如果我加入两个视图，或者一个视图和一个表/s，那么修改同一个视图需要我重建整个查询，因为它依赖于该视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:50:39.210

如果您不希望您的查询依赖于视图，那么您必须问自己，为什么要首先创建该视图。

如果您的 5 表查询 join `table1`，`table2`并且*只是恰好*与视图中​​相同表的联接`table3`方式相同，但实际上具有完全不同的含义，那么在我看来，*不*在您的第二个视图/查询中使用。*`query1`*`query1`**

 **但是，如果您的第二个视图/查询将重现已在 中实现的相同业务规则`query1`，那么我认为复制代码绝对没有意义。这部分是一种观点：通过创建它，如果需要多次使用相同的代码，您可以避免重复。当您更改`query1`时，其他相关查询和/或视图相应地更改其输出是有意义的。

当然，有时视图中的更改需要更改使用它的其他查询和/或视图。如果这是您目前最关心的问题，那么我建议您花时间适当地规划您的视图，以减少在您的数据库长期使用后发生此类更改的可能性。

因此，基本上，您的选择是在每个视图中复制逻辑以避免它们相互依赖，或者在必要时积极使用您的视图，但有可能遇到一种情况，即您*必须*仅仅因为一个特定视图而进行一系列更改*需要*改变。但是，正如我之前所说，如果您*事先*正确设计您的视图，您可以将这种风险降到最低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:48:59.017

随你所愿。

查询优化器将分析代码并构建相同的执行计划。**

# ruby - 在没有 eval 的情况下即时创建 Ruby 类

> ID：10980374
> 
> 赞同：5
> 
> 时间：2012-06-11T12:46:20.917
> 
> 标签：ruby, metaprogramming, eval

我需要动态创建一个 Ruby 类，即动态地，它派生自`ActiveRecord::Base`. 我`eval`暂时使用：

```
eval %Q{
  class ::#{klass} < ActiveRecord::Base
    self.table_name = "#{table_name}"
  end
} 
```

是否有等效且至少同样简洁的方法可以在不使用的情况下执行此操作`eval`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T12:48:42.803

您可以使用[Class](http://www.ruby-doc.org/core-1.9.3/Class.html)类，其中类是实例。迷茫了吗？;)

```
cls = Class.new(ActiveRecord::Base) do
  self.table_name = table_name
end

cls.new 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T12:48:31.623

当然有：）

```
class Foo
  class << self
    attr_accessor :table_name
  end
end

Bar = Class.new(Foo) do
  self.table_name = 'bars'
end

Bar.table_name # => "bars" 
```

# sql-server - SQL ServiceBrokerInterface 事务回滚不回滚

> ID：10980375
> 
> 赞同：0
> 
> 时间：2012-06-11T12:46:40.953
> 
> 标签：sql-server, clr, service-broker

我正在使用 SQL 服务代理接口做一些工作，我有一个与一个队列关联的服务，它只包含一种方法，问题是当我收到消息时，如果我发出 transaction.Rollback() 消息就会从队列中消失我认为不应该发生。这是方法：

```
 [BrokerMethod("MySBResponseMessage")]
    public void ProcessRequestMessage(Message ReceivedMessage, SqlConnection conn, SqlTransaction trans)
    {
        trans.Rollback();
    } 
```

这是服务实例：

```
 service.Run(false, conn, null); 
```

谢谢 mhashim

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:18:41.890

一切都应该工作..

您是否正确实施了服务类？并在构造函数中调用基类？喜欢：

```
 class MyService : ServiceBrokerInterface.Service
        {
            public MyService(SqlConnection con)
                : base("ServiceName", con)
            {
                //...
            }

            [BrokerMethod("DEFAULT")]
            public void DoSmth(Message msg, SqlConnection con, SqlTransaction tran)
            {
                //...
            }
        } 
```

# c# - 如何在 XSLT 文件中获取查询字符串

> ID：10980379
> 
> 赞同：0
> 
> 时间：2012-06-11T12:46:51.527
> 
> 标签：c#, asp.net, .net, xml

我已经使用 XmlSource 文件来获取动态菜单项，我还想获取其中包含两个值的查询字符串。我在定义 &Name 时遇到错误有人可以帮我解决这个问题吗？

```
<xsl:attribute name="NavigateUrl">
    <xsl:text>?Path=</xsl:text>    
    <xsl:value-of select="REPORT_PTH"/>

    <xsl:text>&Name=</xsl:text>
    <xsl:value-of select="REPORT_NM"/>
  </xsl:attribute> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:54:19.170

在上述代码片段的第 5 行替换`&`为。`&amp;`

在 Xml 中，和号 (&) 符号引入了*entity*，即任意字符的文本表示。这通常用于特殊字符和在 Xml 中具有特殊含义的字符。由于`&`具有特殊含义（引入实体），它总是需要替换为其实体形式，即`&amp;`。

# drupal-7 - Drupal 7-Ubercart 3 中的 Cat/SubCat 产品计数不正确

> ID：10980386
> 
> 赞同：1
> 
> 时间：2012-06-11T12:47:15.467
> 
> 标签：drupal-7, drupal-modules, ubercart

我正在为商店网站开发 Drupal 7.12 和 Ubercart 3.0。在处理产品类别时，我在父类别以及子父或子子父类别中的项目计数错误，例如：

Cat A(5)
      Cat A-1(3)
            项目 1
            项目 2

我认为分类模块或 uc_catalog 模块中存在错误。我在网上搜索过，但没有找到任何完美的解决方案。因此，任何人都对这个特定问题有任何解决方法，因为我必须在它们各自的类别前面显示项目的数量以及在父类别中的总数。

它似乎不仅计算产品项目，而且还计算产品项目的类别。

谢谢你的时间。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T03:20:10.713

请参考 uc_catalog.module 的这部分代码

```
 $query->entityCondition('entity_type', 'node')
    ->entityCondition('bundle', $types)
    ->propertyCondition('status', 1) // Don't include unpublished products.
    ->propertyCondition('language', array($language->language, 'und')) 
    ->fieldCondition('taxonomy_catalog', 'tid', $branch->tid)
    ->count();
  $num = $query->execute(); 
```

以上是仅计算具有 und（中性语言）和当前语言的节点的示例。这是ubercart的不足之处。

# c# - 禁用 savefiledialog 的文件名框

> ID：10980394
> 
> 赞同：2
> 
> 时间：2012-06-11T12:47:39.060
> 
> 标签：c#, winforms, savefiledialog

我正在使用 a`savefiledialog`来保存文件，但我不希望用户能够更改文件名字段中的文本。我之前的表格向他们展示了如何命名文件。是否可以使文本框不可编辑？还是我最好的选择只是制作我自己的表单，只允许用户设置保存目录？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:50:20.497

A[`FolderBrowserDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.aspx)可能是更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:55:38.933

据我所知，没有办法禁用部分 SaveFileDialog。如果您想为用户提供指定要保存到的目录的选项，请改用[FolderBrowserDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.aspx)。

您可以使用[RootFolder](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.rootfolder.aspx)属性来设置起始文件夹。一旦用户单击“确定”，您就可以通过 smilpy 访问[SelectedPath](http://msdn.microsoft.com/en-us/library/system.windows.forms.folderbrowserdialog.selectedpath.aspx)属性来获取所选路径。

# jquery - 基于 css/tag 类型的 jQuery 选择器

> ID：10980395
> 
> 赞同：1
> 
> 时间：2012-06-11T12:47:47.207
> 
> 标签：jquery

我想根据它的 id 和 class 选择一个 li 元素：

```
var selector = $('#myId myCss'); 
```

或仅基于 li ：

```
var selector = $('#myId li.myCss'); 
```

我的语法正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:51:39.137

在 ID 和类以及 HTML 标记类型上进行选择是没有意义的。我建议你写

```
var selector = $('#myId'); 
```

或者

```
var selector = $('li.myCss'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:55:42.713

```
var selector = $('#myId myCss'); 
```

在 id 为 'myId' 的任何元素中选择标记名为 'myCss' (<myCss>) 的所有元素

```
var selector = $('#myId.myCss'); 
```

选择同时具有 id myId 和类 myCss 的所有元素。

```
var selector = $('li#myId.myCss'); 
```

选择具有 id myId 和 class myCss 的所有 li 元素，通常不需要，因为我们经常使用 id，在区分具有相同类的元素时很有用。

我不明白什么让你感到困惑？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:51:26.813

正确的语法是

```
var selector = $('#myId.myCss'); 
```

如果你正确地完成了你的 CSS，那么它将根据你的类分配一个样式。

# objective-c - 如何在后台通过电子邮件发送文本字段内容？

> ID：10980398
> 
> 赞同：0
> 
> 时间：2012-06-11T12:47:55.913
> 
> 标签：objective-c, ios, xcode, email, uitextfield

我正在尝试制作一个简单的基于视图的应用程序。

当用户填写文本字段并点击提交按钮时，我想接收包含文本字段内容的信息。

我这样做的方式并不重要。可以通过将信息发送到 Web 服务器或在后台将信息发送到我的电子邮件来完成。实际上，通过电子邮件似乎更容易做到这一点。

我只想知道用户在点击提交按钮时在文本字段上写了什么。

# c# - 使用 Twitterizer 回复推文

> ID：10980403
> 
> 赞同：2
> 
> 时间：2012-06-11T12:48:15.787
> 
> 标签：c#, twitter, twitterizer

我的问题是我正在尝试回复一条推文。我有推文的 tweetId。但无法回复。

```
OAuthTokens tokens = new OAuthTokens();
tokens.ConsumerKey = "xx";
tokens.ConsumerSecret = "xx";
tokens.AccessToken = "xx";
tokens.AccessTokenSecret = "xx";

StatusUpdateOptions options = new StatusUpdateOptions()
{
    InReplyToStatusId=21,
};

TwitterStatus.Update(tokens, " hi",options); 
```

这是我的代码，但它不起作用...任何建议...我猜 Twitterizer 已更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:33:44.310

您的代码似乎是正确的。该`Update`方法返回一个对象，该对象将为您提供有关您向 Twitter 发出的请求的详细信息。查看错误消息的返回值中的值（如果有的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T09:00:16.627

这是回复推文的代码

```
SendTweetOptions options = new SendTweetOptions();

            options.Status = "@twitterusername Reply to tweet ";
            options.InReplyToStatusId = 123456789;
            service.SendTweet(options); 
```

重要的是要记住 @twitterusername 是强制包含的，因为它是一个 wrapper 。没有它，我认为它不会起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-13T08:54:45.443

在调用 Update 方法之前尝试设置 TwitterStatus.InReplyToStatusId 属性。

```
TwitterStatus.InReplyToStatusId = 21; 
```

# c - 在 sqlite3 (FTS4) 的全文搜索中使用特殊字符

> ID：10980416
> 
> 赞同：4
> 
> 时间：2012-06-11T12:48:49.367
> 
> 标签：c, sqlite, full-text-search

我通过 C 库（如果重要）在 Linux 上使用 sqlite3 进行全文搜索，并且有问题的数据库是[FTS4](http://www.sqlite.org/fts3.html#section_1_2)

我将一些文件名存储在数据库中，然后将它们搜索为：

```
SELECT file_name FROM leTable WHERE file_name MATCH 'le name' 
```

到目前为止还不错，但是当我想搜索时

```
SELECT file_name FROM fs_index WHERE file_name MATCH 'le-name'
SELECT file_name FROM fs_index WHERE file_name MATCH 'le[name]' 
```

然后它失败了，因为 sqlite 将`-`其视为特殊字符，它给了我文件名，包括`le`但不包括`name`.

`[`当我使用字符或`]`匹配查询时会发生类似的事情。

使用`\`没有帮助，所以我怎样才能转义这些字符以在匹配查询中使用它们？

# java - SetOnItem Click Listener 事件没有生效？

> ID：10980417
> 
> 赞同：0
> 
> 时间：2012-06-11T12:48:51.023
> 
> 标签：java, android, listview

这是我以自定义格式显示列表视图的代码。但我的要求是，当我单击任何列表视图项目时，需要显示其进一步的详细信息，但是当我单击它时……它根本没有生效我意味着没有执行 setonitemclicklictener 事件....我请求请查看我上面给出的代码....谢谢大家

```
package com.hands;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class Passengers extends Activity implements OnClickListener{
     ListView lview3; 
     Button btn;        
     int textlength = 0;
        ArrayList<String> text_sort = new ArrayList<String>();
        ArrayList<Integer> image_sort = new ArrayList<Integer>();
        ArrayList<String> text_sort2 = new ArrayList<String>();
    EditText edittext;
        private static String month[] = {"kareem","Saleem","Imran","Anwar","Shahid",  
                                               "Raheem","Afzal","Nazeer","Ahmed"};  

        private static String desc[] = {"ssagi123,Indian","ssagi1234,Indian","ssagi1235,Indian",  
                      "ssagi1236,Indian","ssagi1237,Indian","ssagi1238,Indian","ssagi1239,Indian",  
                                          "ssagi12310,Indian","ssagi123411,Indian","Month - 10"};  
       int[] image = { R.drawable.user2, R.drawable.user2, R.drawable.user2,
                R.drawable.user2, R.drawable.user2, R.drawable.user2, R.drawable.user2,
                R.drawable.user2, R.drawable.user2, R.drawable.user2 };

    /*   private static String bstatus[] = {"no status","no status","no status","no status","no status",  
           "no status","no status","no status","no status"};  

        */
    @Override
      protected void onCreate(Bundle savedInstanceState) {
                 super.onCreate(savedInstanceState);
                setContentView(R.layout.passengers);
                System.out.println("****1");
                btn=(Button)findViewById(R.id.psnbutt1);
                btn.setOnClickListener(this);
                edittext = (EditText) findViewById(R.id.search_mycontact);
                lview3 = (ListView) findViewById(R.id.listView3);  
                 System.out.println("****2");
                lview3.setAdapter(new ListViewCustomAdapter(image, month, desc));

                edittext.addTextChangedListener(new TextWatcher()
                 {

                public void afterTextChanged(Editable s)
                 {

                 }

               public void beforeTextChanged(CharSequence s, int start,
                 int count, int after)
                 {

                 }
             public void onTextChanged(CharSequence s, int start,
                  int before, int count)
                  {

                textlength = edittext.getText().length();
                text_sort.clear();
                image_sort.clear();
                text_sort2.clear();

                for (int i = 0; i < month.length; i++)
                {
                if (textlength <= month[i].length())
                {
                if (edittext.getText().toString().
                equalsIgnoreCase((String) month[i].subSequence(0, textlength)))
                {
                text_sort.add(month[i]);
                image_sort.add(image[i]);
                text_sort2.add(desc[i]);
                }
                }
                }

                System.out.println("****3");
                lview3.setAdapter(new ListViewCustomAdapter(image_sort, text_sort, text_sort2));
                }
                });
                System.out.println("****4");

           lview3.setOnItemClickListener(new OnItemClickListener() {
           public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                      System.out.println("****5");

                   // Object listItem = lview3.getItemAtPosition(position);
                //String keyword=listItem.toString();
              //  Toast.makeText(getApplicationContext(), "you are selected"+keyword, Toast.LENGTH_LONG).show();

                } 
             });

        }

          class ListViewCustomAdapter extends BaseAdapter  
                {  
                   String[] title;  
                   String[] description;
                   int[] number;
                  Activity context;  
                   LayoutInflater inflater;  

                  ListViewCustomAdapter()
                  {

                  }
                  ListViewCustomAdapter(int[] image, String[] month, String[] desc)
                  {
                      title = month;
                      description=desc;
                      number=image;

                  }
                  ListViewCustomAdapter(ArrayList<Integer> image,ArrayList<String> month, ArrayList<String> desc)
                  {
                  title = new String[month.size()];
                  description=new String[desc.size()];

                  number = new int[image.size()];

                  for(int i=0;i<month.size();i++)
                  {
                  title[i] = month.get(i);
                  description[i]=desc.get(i);
                  number[i] = image.get(i);

                  }

                  }

                  @Override
                  public int getCount() {
                      // TODO Auto-generated method stub
                      return title.length;
                  }

                  @Override
                  public Object getItem(int position) {
                      // TODO Auto-generated method stub
                      return null;
                  }
                  @Override
                  public long getItemId(int position) {
                      // TODO Auto-generated method stub
                      return position;
                  }

                  @Override
                  public View getView(int position, View convertView, ViewGroup parent) {
                      LayoutInflater inflater = getLayoutInflater();
                      View row=convertView;
                      row = inflater.inflate(R.layout.listitem_row2, parent, false);
                    TextView textview = (TextView) row.findViewById(R.id.txtViewTitle);
                    TextView textview1 = (TextView) row.findViewById(R.id.txtViewDescription);
                    System.out.println("before list row statement");
                    //final ListView lview3=(ListView) row.findViewById(R.id.listView3);
                    // final ListView lview3=(ListView)findViewById(R.id.listView3);
                    System.out.println("after list row statement");
                    ImageView imageview = (ImageView) row.findViewById(R.id.imgViewLogo);
                    textview.setText(title[position]);
                    textview1.setText(description[position]);
                    imageview.setImageResource(number[position]);

                        /*lview3.setOnItemClickListener(new OnItemClickListener() {

                                public void onItemClick(AdapterView<?> adapter, View view, int position, long arg) {

                             Object listItem = lview3.getItemAtPosition(position);
                                String keyword=listItem.toString();
                                Toast.makeText(getApplicationContext(), "you are selected"+keyword, Toast.LENGTH_LONG).show();

                                } 
                             });

                */
                    return (row);
                     }
                 }    
                  public void onClick(View v) {
                     // TODO Auto-generated method stub
                         switch (v.getId()) {
                  case R.id.psnbutt1:
                            Intent i = new Intent(this, NewhapploginActivity.class);  
                            startActivity(i);
                             break;

                                            }
                         }
                  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:53:25.490

您需要添加

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

到你的所有视图`row.xml`。因为在自定义 ListView 作为它上面的视图具有焦点，所以 ListView 无法使其焦点工作。

# c# - 为正则表达式禁用全局

> ID：10980418
> 
> 赞同：1
> 
> 时间：2012-06-11T12:48:51.503
> 
> 标签：c#, .net, regex

我想关闭全局设置（因为它被设置为在.NET上使用的默认设置）因为我想要做的只需要更改字符串的第一部分，但是它有可能会发生两次在字符串中，例如我希望

> C00000WPF0000SAND

仅更改 0 的第一个实例。

```
if (Regex.IsMatch(text, "^[a-z]+00+", RegexOptions.IgnoreCase))
{
    text = Regex.Replace(text, "0{1,}", "00*", RegexOptions.IgnoreCase);
} 
```

这就是我目前正在这样做的方式，但是这似乎需要“00+”的每个实例并对其进行更改，但这会使事情变得混乱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T12:53:19.653

您需要指定匹配限制；的文档`Regex.Replace(string, string, RegexOptions)`特别声明它替换了找到的模式的所有实例。没有静态重载`Regex.Replace`需要匹配限制和正则表达式选项，因此您必须构造一个正则表达式对象，然后使用`Replace(string, string, int)`重载。试试这个：

```
text = new Regex("0{1,}", RegexOptions.IgnoreCase).Replace(text, "00*", 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T12:58:04.270

您可以稍微更改您的正则表达式，使其与预期模式匹配并且仅替换第一组零。这也有助于切断`IsMatch`通话。

您可以使用的模式是：`(?<=^[a-z]+)00+`

此模式与您的第一个模式相似，只是它使用后视`(?<=^[a-z]+)`，来确保匹配在带有字母的字符串的开头按预期发生。后视的使用将匹配，但不会消耗，因此替换不会影响字符串的该部分。

```
string text = "C00000WPF0000SAND";
text = Regex.Replace(text, "(?<=^[a-z]+)00+", "00*", RegexOptions.IgnoreCase);
Console.WriteLine(text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:10:03.190

另一种解决方案是：

```
text = Regex.Replace(text, "(?i)^([a-z]+)00+", "${1}00*"); 
```

在这种情况下，您根本不需要`if`。

# parsing - 使用预测解析器 LL1 解析器解决这个问题

> ID：10980419
> 
> 赞同：-3
> 
> 时间：2012-06-11T12:48:51.800
> 
> 标签：parsing, ll

使用预测解析器 LL1 解析器解决这个问题

E-> EOE | (五) | ID

O -> + /- / % /

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T17:21:03.893

语法

```
E -> E O E (1)
E -> (E)   (2)
E -> id    (3)
O -> +     (4)
O -> -     (5)
O -> %     (6)
O -> /     (7) 
```

您将需要计算 First/Follow 集：

```
First(EOE) = First(E) = {'(', 'id'}
First('('E')') = {'('}
First('id') = {'id'}
First('+') = {'+'}
First('-') = {'-'}
First('%') = {'%'}
First('/') = {'/'}
First(O) = {'+', '-', '%', '/'}

Follow(E) = First(O) u {')', $} = {'+', '-', '%', '/', ')', $}
Follow(O) = First(E) = {'(', 'id'} 
```

解析表：

```
. '('  ')' 'id' '+' '-' '%' '/'
E (1,2)    (3)
O               (4) (5) (6) (7) 
```

如您所见，当您在堆栈顶部时，解析 '(' 时会*发生冲突*：在读取前瞻符号时，您应该应用还是？因此您*无法*为此语法创建 LLk(1) 解析器。`E``(``E->EOE``E->(E)`

 *您可以*将语法重写*为例如：

```
E -> (E) O   (1)
E -> id      (2)
O -> +E      (3)
O -> -E      (4)
O -> %E      (5)
O -> /E      (6)
O -> epsilon (7) 
```

在这种情况下，First/Follow 集是：

```
First('('E')') = {'('}
First('id') = {'id'}
First('+')
First('+') = {'+'}
First('-') = {'-'}
First('%') = {'%'}
First('/') = {'/'}
First(O) = {'+', '-', '%', '/'} u Follow(O)

Follow(E) = {')'} u Follow(O)
Follow(O) = {$} u Follow(E) 
```

解析表：

```
. '(' ')' 'id' '+' '-' '%' '/' $
E (1)     (2)
O     (7)      (3) (4) (5) (6) (7) 
```

由于该表中没有冲突，因此语法为 LLk(1)。

解析字符串`(id)+id`如下：

```
Stack  Input     Action
E$     (id)+id$  E/'(':     (1)
(E)O$  (id)+id$  '('/'(':   read
E)O$   id)+id$   E/'id':    (2)
id)O$  id)+id$   'id'/'id': read
)O$    )+id$     ')'/')':   read
O$     +id$      o/'+':     (3)
+E$    +id$      '+'/'+':   read
E$     id$       E/'id':    (2)
id$    id$       'id'/'id': read
$      $         $/$:       accept 
```*

# asp.net-mvc-3 - 小数的正则表达式在文本字段中放置 0（零）

> ID：10980423
> 
> 赞同：1
> 
> 时间：2012-06-11T12:48:59.150
> 
> 标签：asp.net-mvc-3, validation, data-annotations

我正在尝试以下`RegEx`方法来验证十进制值，例如

```
 [RegularExpression("^(?:\\d{1,100000000}(?:\\.\\d{0,6})?)?$")]
        [Range(double.MinValue,double.MaxValue)]
        public decimal Amount { get; set; } 
```

在视图中渲染

```
 <div class="editor-field">
       <%:Html.TextBoxFor(x=>x.Amount)%>       
       <%:Html.ValidationMessageFor(x=>x.Amount) %>
    </div> 
```

问题是它默认在文本框中放置一个`0`，请指导我找出问题，如果有更好的方法来验证小数字段，请提及...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:36:08.783

尝试将 Amount 属性的类型设置为可为空：

```
public decimal? Amount { get; set; } 
```

# php - 强制下载 PHP - 不下载整个文件

> ID：10980426
> 
> 赞同：1
> 
> 时间：2012-06-11T12:49:05.467
> 
> 标签：php, download

我在强制下载一些 mp3/zip 文件时遇到问题。

问题是一些用户体验到整个文件没有下载，我不知道为什么..

```
if(is_file($file_name))
{

    /*
        Do any processing you'd like here:
        1\.  Increment a counter
        2\.  Do something with the DB
        3\.  Check user permissions
        4\.  Anything you want!
    */

    // required for IE
    if(ini_get('zlib.output_compression')) { ini_set('zlib.output_compression', 'Off'); }

    // get the file mime type using the file extension
    switch(strtolower(substr(strrchr($file_name,'.'),1)))
    {
        case 'mp3': $mime = 'audio/mpeg'; break;
        case 'zip': $mime = 'application/zip'; break;
        default: $mime = 'application/force-download';
    }
    header('Pragma: public');   // required
    header('Expires: 0');       // no cache
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Last-Modified: '.gmdate ('D, d M Y H:i:s', filemtime ($file_name)).' GMT');
    header('Cache-Control: private',false);
    header('Content-Type: '.$mime);
    header('Content-Disposition: attachment; filename="'.basename($file_name).'"');
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: '.filesize($file_name));    // provide file size
    header('Connection: close');
    readfile($file_name);       // push it out
    exit();

} 
```

这是我的代码..

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T02:16:26.687

感谢您所有的帮助，

但我找到了解决我的问题的另一种方法，并改用了 mod_xsendfile 。它为我完成了工作:)

# javascript - jQuery：已通过 .wrap() 添加到 DOM 的 jQuery 元素上的切换类？

> ID：10980429
> 
> 赞同：0
> 
> 时间：2012-06-11T12:49:19.887
> 
> 标签：javascript, jquery, dom-manipulation

我在操作元素的类属性时遇到问题，因为我使用 .wrap() 将它添加到 DOM。它根本不会改变属性，即使一切似乎都井井有条。

如果我使用 .wrap() 或 .wrapInner() 以外的其他东西，一切都会按预期工作。如果我将 .toggleClass() 更改为 if/else 如果仍然无法工作。

当然可以解决它，但我宁愿找到问题的根源并在此过程中学到一些东西。

这是有问题的代码：

```
$('.tour-category').each(function () {
    var tour_list = $(this);
    var header = tour_list.parent().find('h4');
    var link = $('<a>', {
        href: '#',
        'class': 'tour-category-toggler',
        click: function (e) {
            e.preventDefault();

            tour_list.slideToggle(200);
            link.toggleClass('close');
        }
    });

    tour_list.hide();
    header.wrap(link);
}); 
```

也许我缺少一些东西，或者这可能是 jQuery 中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T12:50:47.737

尝试改变

```
link.toggleClass('close'); 
```

进入

```
$(this).toggleClass('close'); 
```

# asp.net - 防止 aspx 页面呈现

> ID：10980435
> 
> 赞同：1
> 
> 时间：2012-06-11T12:50:03.163
> 
> 标签：asp.net, httpresponse

我得到了一个“正常”的 ascx 页面，其中包含 HTML 部件以及后面的代码。这些元素都应该在正常情况下显示（作品）。

现在我希望能够设置一个请求参数，该参数会导致页面 zu 呈现不同。然后它在该页面上发送的信息不是人类可读的，而是用于机器的：

```
 string jsonProperty = Request["JSonProperty"];
                if (!string.IsNullOrEmpty(jsonProperty))
                {                    
                    Response.Clear();
                    Response.Write(RenderJSon());
                  //  Response.Close();
                    return; 
```

此代码位于 Page_PreRender 内。现在我的问题是：字符串已正确发送到浏览器，但之后仍然呈现“标准”html-content。

当我删除“Response.Close();” 评论 我收到“ERR_INVALID_RESPONSE”

任何线索如何在不创建额外页面的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-24T16:28:51.340

我可以建议 Response.End() 可以引发错误。

使用 Response.SuppressContent = true; 停止进一步处理“标准”html

```
string jsonProperty = Request["JSonProperty"];
if (!string.IsNullOrEmpty(jsonProperty))
{                    
    Response.Clear();
    Response.ContentType = "application/json";
    Response.Write(RenderJSon());

    Response.Flush();                    // Flush the data to browser
    Response.SuppressContent = true;     // Suppress further output - "standard" html-
                                         // content is not rendered after this

    return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T12:54:08.127

尝试添加[`Response.End()`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.end.aspx)

> 将所有当前缓冲的输出发送到客户端，停止页面的执行，并引发 EndRequest 事件。

另外，正如@Richard 所说，添加

```
context.Response.ContentType = "application/json"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T12:54:41.820

您是否尝试过设置`ContentType`to`application/json`和`End`'ing 响应，如下所示：

```
string jsonProperty = Request["JSonProperty"];
if (!string.IsNullOrEmpty(jsonProperty))
{                    
    Response.Clear();
    Response.ContentType = "application/json";
    Response.Write(RenderJSon());
    Response.End();

    return;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-22T03:13:34.880

[建议避免调用`Response.End()`](https://stackoverflow.com/a/3917180/429091)，即使它会导致正确的行为。这是因为提供该方法是为了向后兼容旧的 ASP，而不是为支持性能而设计的。为了防止进一步处理，它会抛出一个[`ThreadAbortException`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.threadabortexception?view=netcore-3.1), 丢弃线程，强制系统稍后在处理新请求时启动一个新线程，而不是能够将该线程返回到 ASP.NET 线程池。停止进一步处理 ASP.NET 管道的推荐替代方法是[`HttpApplication.CompleteRequest()`](https://docs.microsoft.com/en-us/dotnet/api/system.web.httpapplication.completerequest?view=netframework-4.8#System_Web_HttpApplication_CompleteRequest)立即调用并返回。但是，这不会终止 ASP.NET 页的处理。

为了防止进一步的内容被发送到客户端，当然可以设置[`Response.SuppressContent`](https://docs.microsoft.com/en-us/dotnet/api/system.web.httpresponse.suppresscontent?view=netframework-4.8)为`true`. 这将阻止`.aspx`文件的内容被发送到客户端。但是，`.aspx`仍然会呈现。这包括`.aspx`可能依赖于您在`Load`事件中加载的数据的运行逻辑。

为避免渲染，您可以设置[`Page.Visible`](https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.page.visible?view=netframework-4.8)为`false`. 这[会导致调用`Rendercontrol()`被跳过](https://github.com/microsoft/referencesource/blob/a7bd3242bd7732dec4aebb21fbc0f6de61c2545e/System.Web/UI/Control.cs#L2605)。

为此，您需要将逻辑移动到`Load()`事件而不是`PreRender()`事件中。

使用您的代码，将是：

```
protected void Page_Load(object sender, EventArgs e)
{
    var jsonProperty = Request["JSonProperty"];
    if (!string.IsNullOrEmpty(jsonProperty))
    {
        Response.ContentType = "application/json";
        Response.Write(RenderJSon());
        Context.ApplicationInstance.CompleteRequest();
        Visible = false;
        return;
    }
} 
```

# selenium - Selenium 服务器不会远程运行 - 启动 firefox 的问题

> ID：10980438
> 
> 赞同：2
> 
> 时间：2012-06-11T12:50:08.593
> 
> 标签：selenium, selenium-rc, selenium-webdriver

我正在努力确定为什么我的 Selenium 测试脚本现在在我的构建服务器上失败了，因为它们一直工作到上周。下面的脚本在本地运行良好，但从 Jenkins 运行时出错。我正在运行 Selenium Server (v.selenium-server-standalone-2.21.0.jar)，并尝试执行一个简单的登录脚本。

我已经确认没有打开的 Firefox 会话，并且我已经删除了所有配置文件以确保没有争用。

这是错误输出：

```
[junit] 08:38:27.016 INFO - Command request: getNewBrowserSession[*firefox, http://gamma:31640/aferewrite/login/, ] on session null
[junit] 08:38:27.016 INFO - creating new remote session
[junit] 08:38:27.032 INFO - Allocated session b61c10f039764b0fa49ef3c85b9d0648 for http://gamma:31640/aferewrite/login/, launching...
[junit] 08:38:27.110 INFO - Preparing Firefox profile...

[junit] 08:38:48.173 ERROR - Failed to start new browser session, shutdown browser and clear all session data
[junit] java.lang.RuntimeException: Firefox refused shutdown while preparing a profile
[junit]     at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLauncher.waitForFullProfileToBeCreated(FirefoxChromeLauncher.java:367)
[junit]     at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLauncher.populateCustomProfileDirectory(FirefoxChromeLauncher.java:120)
[junit]     at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLauncher.launch(FirefoxChromeLauncher.java:90)
[junit]     at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLauncher.launchRemoteSession(FirefoxChromeLauncher.java:412)
[junit]     at org.openqa.selenium.server.browserlaunchers.FirefoxLauncher.launchRemoteSession(FirefoxLauncher.java:114)
[junit]     at org.openqa.selenium.server.BrowserSessionFactory.createNewRemoteSession(BrowserSessionFactory.java:381)
[junit]     at org.openqa.selenium.server.BrowserSessionFactory.getNewBrowserSession(BrowserSessionFactory.java:125)
[junit]     at org.openqa.selenium.server.BrowserSessionFactory.getNewBrowserSession(BrowserSessionFactory.java:86)
[junit]     at org.openqa.selenium.server.SeleniumDriverResourceHandler.getNewBrowserSession(SeleniumDriverResourceHandler.java:811)
[junit]     at org.openqa.selenium.server.SeleniumDriverResourceHandler.doCommand(SeleniumDriverResourceHandler.java:437)
[junit]     at org.openqa.selenium.server.SeleniumDriverResourceHandler.handleCommandRequest(SeleniumDriverResourceHandler.java:407)
[junit]     at org.openqa.selenium.server.SeleniumDriverResourceHandler.handle(SeleniumDriverResourceHandler.java:151)
[junit]     at org.openqa.jetty.http.HttpContext.handle(HttpContext.java:1530)
[junit]     at org.openqa.jetty.http.HttpContext.handle(HttpContext.java:1482)
[junit]     at org.openqa.jetty.http.HttpServer.service(HttpServer.java:909)
[junit]     at org.openqa.jetty.http.HttpConnection.service(HttpConnection.java:820)
[junit]     at org.openqa.jetty.http.HttpConnection.handleNext(HttpConnection.java:986)
[junit]     at org.openqa.jetty.http.HttpConnection.handle(HttpConnection.java:837)
[junit]     at org.openqa.jetty.http.SocketListener.handleConnection(SocketListener.java:243)
[junit]     at org.openqa.jetty.util.ThreadedServer.handle(ThreadedServer.java:357)
[junit]     at org.openqa.jetty.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
[junit] Caused by: org.openqa.selenium.server.browserlaunchers.FirefoxChromeLauncher$FileLockRemainedException: Lock file still present! C:\WINDOWS\TEMP\customProfileDirb61c10f039764b0fa49ef3c85b9d0648\parent.lock
[junit]     at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLauncher.waitForFileLockToGoAway(FirefoxChromeLauncher.java:318)
[junit]     at org.openqa.selenium.server.browserlaunchers.FirefoxChromeLauncher.waitForFullProfileToBeCreated(FirefoxChromeLauncher.java:365)
[junit]     ... 20 more
[junit] 08:38:48.188 INFO - Got result: Failed to start new browser session: Error while launching browser on session null
[junit] 08:38:48.188 INFO - Stopping Acceptor ServerSocket[addr=0.0.0.0/0.0.0.0,port=0,localport=4444]
[junit] 08:38:48.298 INFO - Stopped SocketListener on 0.0.0.0:4444

[junit] 08:38:48.344 INFO - Stopped HttpContext[/selenium-server/driver,/selenium-server/driver]
[junit] 08:38:48.376 INFO - Stopped HttpContext[/selenium-server,/selenium-server]
[junit] 08:38:48.407 INFO - Stopped HttpContext[/,/]
[junit] 08:38:48.407 INFO - Stopped org.openqa.jetty.jetty.servlet.ServletHandler@1cfb802
[junit] 08:38:48.454 INFO - Stopped HttpContext[/wd,/wd]
[junit] 08:38:48.454 INFO - Stopped org.openqa.jetty.jetty.Server@da2cef
[junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 21.907 sec
[junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 21.907 sec
[junit] 
[junit] ------------- Standard Output ---------------
[junit] 08:38:26.829 INFO - Java: Sun Microsystems Inc. 19.1-b02
[junit] 08:38:26.829 INFO - OS: Windows 2003 5.2 x86
[junit] 08:38:26.829 INFO - v2.21.0, with Core v2.21.0\. Built from revision 16552
[junit] 08:38:26.938 INFO - RemoteWebDriver instances should connect to: http://127.0.0.1:4444/wd/hub
[junit] 08:38:26.938 INFO - Version Jetty/5.1.x
[junit] 08:38:26.938 INFO - Started HttpContext[/selenium-server/driver,/selenium-server/driver]
[junit] 08:38:26.938 INFO - Started HttpContext[/selenium-server,/selenium-server]
[junit] 08:38:26.938 INFO - Started HttpContext[/,/]
[junit] 08:38:26.969 INFO - Started org.openqa.jetty.jetty.servlet.ServletHandler@1cfb802
[junit] 08:38:26.969 INFO - Started HttpContext[/wd,/wd]
[junit] 08:38:26.969 INFO - Started SocketListener on 0.0.0.0:4444
[junit] 08:38:26.969 INFO - Started org.openqa.jetty.jetty.Server@da2cef
[junit] 08:38:27.016 INFO - Checking Resource aliases
[junit] 08:38:27.016 INFO - Command request: getNewBrowserSession[*firefox, http://gamma:31640/aferewrite/login/, ] on session null
[junit] 08:38:27.016 INFO - creating new remote session
[junit] 08:38:27.032 INFO - Allocated session b61c10f039764b0fa49ef3c85b9d0648 for http://gamma:31640/aferewrite/login/, launching...
[junit] 08:38:27.110 INFO - Preparing Firefox profile...
[junit] 08:38:48.188 INFO - Got result: Failed to start new browser session: Error while launching browser on session null
[junit] 08:38:48.188 INFO - Stopping Acceptor ServerSocket[addr=0.0.0.0/0.0.0.0,port=0,localport=4444]
[junit] 08:38:48.298 INFO - Stopped SocketListener on 0.0.0.0:4444
[junit] 08:38:48.344 INFO - Stopped HttpContext[/selenium-server/driver,/selenium-server/driver]
[junit] 08:38:48.376 INFO - Stopped HttpContext[/selenium-server,/selenium-server]
[junit] 08:38:48.407 INFO - Stopped HttpContext[/,/]
[junit] 08:38:48.407 INFO - Stopped org.openqa.jetty.jetty.servlet.ServletHandler@1cfb802
[junit] 08:38:48.454 INFO - Stopped HttpContext[/wd,/wd]
[junit] 08:38:48.454 INFO - Stopped org.openqa.jetty.jetty.Server@da2cef
[junit] ------------- ---------------- --------------- 
```

以下是测试脚本：

```
package com.mapfre.afetest.util;

import java.util.Arrays;
import java.util.Collection;
import java.util.Vector;
import java.util.logging.Logger;
import java.util.logging.SimpleFormatter;
import java.util.logging.StreamHandler;
import com.thoughtworks.selenium.*;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;
import org.openqa.selenium.server.SeleniumServer;

/*
 * Execute Selenium test case using Excel data
 */
public class AfeSimpleLoginLogout extends SeleneseTestBase {
private static SeleniumServer seleniumServer;
public static Vector paramData = new Vector();
public static Vector testMethod = new Vector();

TestData td = new TestData("C:\\tools\\jexcelapi\\afe_testdata.xls");

@Before
public void setUp() throws Exception {
    td.getDatafromXL();
    paramData = td.getParamData();
    testMethod = td.getTestMethods();
    selenium = new DefaultSelenium("localhost", 4444, "*firefox",
            "http://gamma:31640/aferewrite/login/");
    seleniumServer = new SeleniumServer();
    seleniumServer.start();
    selenium.start();

}

@Test
public void testAfeSimpleLogin() throws Exception {
    // set up new logger with output directed to standard out
    Logger logger = Logger.getLogger("my.test.logger");
    StreamHandler sh = new StreamHandler(System.out, new SimpleFormatter());
    logger.addHandler(sh);

    logger.info("-- Starting login process");

    String workspace;
    workspace = System.getProperty("workspace");
    logger.info("-- is there a value for workspace? val: " + workspace);

    // turn off parent handlers
    logger.setUseParentHandlers(false);

    // login based on Excel values and wait for main page
    selenium.open(paramData.get(0).toString());
    selenium.type("j_username", paramData.get(1).toString());
    selenium.type("j_password", paramData.get(2).toString());
    logger.info("-- Clicking the submit button and waiting");
    selenium.click("css=button.submitBtn");
    selenium.waitForPageToLoad("300000");
    logger.info("-- Looking for 'Policy changes should be requested' string on screen");
    assertTrue(selenium.isTextPresent("Policy changes should be requested through one of the following contact points"));       
    logger.info("-- Now logout");
    selenium.click("link=Logout");

    // FLUSH THE STREAM HANDLER !!!
    sh.flush();
}

@After
public void tearDown() throws Exception {
    selenium.stop();
    seleniumServer.stop();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:12:15.703

Firefox 最近更新到 13。你只需要升级到[Selenium 2.23](http://seleniumhq.org/download/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T20:56:17.290

我在从属 Jenkins 节点上运行 Selenium IDE 测试套件时遇到了同样的问题。我也尝试过删除 FirefoxProfile 目录，但没有成功。我注意到那台机器上的 Firefox 版本最近已更新。将更新回滚到版本 12 后，此问题就消失了（不知道是否有任何其他版本可以解决问题）。这是旧 Firefox 版本的链接。

[https://ftp.mozilla.org/pub/mozilla.org/firefox/releases/](https://ftp.mozilla.org/pub/mozilla.org/firefox/releases/)

# .htaccess - 如何在 IE 中停止这种奇怪的自动重新加载

> ID：10980439
> 
> 赞同：3
> 
> 时间：2012-06-11T12:50:10.250
> 
> 标签：.htaccess, internet-explorer, mod-rewrite

我用PHP开发了这个网站...

我已经使用 htaccess 重写

1.  www 的非 www 网址
2.  如果需要，添加尾部斜杠
3.  将 url niecdelhi.ac.in/page_to_visit 重写为 index.php?inc=page_to_visit.php

例如：- niecdelhi.ac.in/jobs_at_niec/ ***重写为*** niecdelhi.ac.in/index.php?inc=jobs_at_niec.php

该网站在 Firefox 和 Chrome 上运行流畅，但它会在 IE 中无限期地自动重新加载。

请帮我解决这个问题。

访问此链接以查看问题：[http ://www.niecdelhi.ac.in/jobs_at_niec/](http://www.niecdelhi.ac.in/jobs_at_niec/)

* * *

我的 .htaccess 文件如下所示：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{REQUEST_URI} ^/[^\.]+[^/]$
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1/ 

RewriteCond %{REQUEST_URI} !^/index.php.*$ [NC]
RewriteRule ^(.*)/?$ index.php?inc=$1&%1 [L,NC,QSA] 
```

**编辑 1：**添加 [QSA] 标志而不是 {QUERY_STRING}

**编辑 2：**将 [R=301,L] 添加到非 www 到 www url 重写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:02:34.133

不是您问题的完整答案，但我认为您应该将非 www 到 www 重定向为永久 301 重定向`RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]` 并将其标记为 [L] （之后不要处理其他规则）。

看看这里：[http ://www.webmasterworld.com/forum92/1017.htm](http://www.webmasterworld.com/forum92/1017.htm)

不确定这是否会解决您的问题，但值得一试。

编辑：您的问题绝对是客户端。在浏览器上禁用 JavaScript 可以解决问题或无休止的刷新。

# telerik - Telerik MVC 网格中的冻结列

> ID：10980448
> 
> 赞同：0
> 
> 时间：2012-06-11T12:50:56.403
> 
> 标签：telerik, telerik-grid

有没有办法在 Telerik MVC 网格中实现冻结列？

提前谢谢你，达娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:11:01.990

不，用于 ASP.NET MVC 的 Telerik Grid 不支持冻结列。

# amazon-ec2 - 如何从 MacOSX scp 到 Amazon EC2？

> ID：10980450
> 
> 赞同：0
> 
> 时间：2012-06-11T12:50:58.560
> 
> 标签：amazon-ec2

我试过命令

```
scp -i /Users/nehagupta/Desktop/aaa.pem /Users/nehagupta/Desktop/file.fa ubuntu@ec2-107-20-102-12.compute-1.amazonaws.com:/mnt/abc/ 
```

但它给了我

> 警告：身份文件 /Users/nehagupta/Desktop/matt.pem 无法访问：没有这样的文件或目录。权限被拒绝（公钥）。失去了连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T13:33:50.657

您可以使用以下命令将多个文件上传为一个文件：

scp -P **SSH_PORT** /Users/blubb/keys/sys/cert.pem /Users/blubb/keys/sys/pk.pem yournamenotrootaccount@yourserver:/home/blubb

确保您的安全组有权通过 ssh 从您的本地地址连接到您的服务器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T03:19:30.297

你是在本地机器上还是在 EC2 上？

您应该从本地计算机尝试上述命令。

# sms-gateway - Syniverse短信网关错误码

> ID：10980459
> 
> 赞同：0
> 
> 时间：2012-06-11T12:51:44.093
> 
> 标签：sms-gateway

我正在使用 Syniverse SMS 网关通过 SMS 向用户发送通知。在搜索时，我遇到了错误代码，例如

404 - 帐户或用户不存在 500 - 错误 502 - PIN 不调用数据库 503 - 余额不足 504 - 数据库错误

通常在失败的情况下由 SMS 网关返回。但我想知道 Syniverse 网关支持的错误代码是什么。如果您可以在 Syniverse 网关中共享错误处理机制，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:02:47.017

不同的*错误代码*是： -

*   200 - 好的
*   404 - 帐户或用户不存在
*   502 - PIN 不调用数据库
*   503 - 余额不足
*   504 - 数据库错误
*   505 - 未找到用户或密码错误
*   506 - 帐户未激活
*   507 - 数据库错误
*   508 - 数据库错误
*   510 - 无效的用户名
*   511 - 无效的文本
*   512 - 密码无效
*   513 - 无效的 PIN
*   520 - 解析 XML 时出错

从 0 到 399（含）的所有值均表示成功，所有其他值均表示失败。

# iphone - 如何在 uitextview 文本中添加自定义语言

> ID：10980462
> 
> 赞同：3
> 
> 时间：2012-06-11T12:52:01.217
> 
> 标签：iphone, objective-c, ios

我想要类似泰米尔语键盘

功能：按A键时显示அ，按AA时显示ஆ。

这是我到目前为止所尝试的。

```
NSMutableString *updatedText = [[NSMutableString alloc] initWithString:textView.text];
[updatedText insertString:text atIndex:range.location];
NSLog(@"%i",range.location);
NSRange replaceRange = range , endRange = range;

if (text.length > 0) 
{
    NSLog(@" text length %i",text.length);

    replaceRange.length= text.length;
} 
else 
{
    replaceRange.length = 2;  // length of "hi" is two characters
    replaceRange.location -= 1; // look back one characters (length of "hi" minus one)
}

   int replaceCount = [updatedText replaceOccurrencesOfString:@"a" withString:@" அ" options:NSCaseInsensitiveSearch range:replaceRange];

   //   replaceCount = [updatedText replaceOccurrencesOfString:@"aa" withString:@" ஆ" options:NSCaseInsensitiveSearch range:replaceRange];

if (replaceCount >=1) {
    // update the textView's text
    textView.text = updatedText;

   // leave cursor at end of inserted text
    endRange.location = text.length+ replaceCount*100000000; // length diff of "hello" and "hi" is 3 characters
//  endRange.location;
    NSRange h= endRange;

   textView.selectedRange= h; 

    [updatedText release];
    return NO;
}    
[updatedText release];

return YES;     
} 
```

如果我使用这种方法，它只会读取一个字符，并用空格替换那个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:04:25.763

如果要将所有“a”替换为“அ”，将“aa”替换为“ஆ”，请执行以下“aa”的第一个测试

```
//this will repleace all of "aa"
int replaceCount = [updatedText replaceOccurrencesOfString:@"aa" withString:@"ஆ" options:NSCaseInsensitiveSearch range:[NSMakeRange(0, updatedText.length)];

//this will repleace all of "a"
int replaceCount = [updatedText replaceOccurrencesOfString:@"a" withString:@"அ" options:NSCaseInsensitiveSearch range:[NSMakeRange(0, updatedText.length)]; 
```

# javascript - 如何销毁完整的 HTML 页面

> ID：10980467
> 
> 赞同：0
> 
> 时间：2012-06-11T12:52:15.253
> 
> 标签：javascript, html

我创建了一个 html 页面，它在新窗口中打开一个新页面。所以希望我在第二页加载时关闭第一页。我不想删除任何子元素。

我用这段代码删除了孩子

```
var dv;
dv = document.getElementById('parentBody');
dv.parentNode.removeChild(dv); 
```

它只是删除了孩子，但我希望它破坏完整的 html 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:48:11.750

如果我理解这一点是正确的，您想制作一个弹出窗口或“子窗口”，然后关闭父窗口。不幸的是，我认为这是不可能的，因为过去执行了恶意代码，因此只能从父级关闭子级。

无论如何，您为什么要让孩子关闭原始窗口？我相信您可以通过 JavaScript 和/或 AJAX 重新调整大小或更改内容。

# objective-c - 如何在 iOS Obj-C 中发送电子邮件？

> ID：10980468
> 
> 赞同：-4
> 
> 时间：2012-06-11T12:52:15.500
> 
> 标签：objective-c, ios, email

当我单击 UIButton 时，我想发送一封带有 HTML 内容的邮件。

我该如何进行？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:55:49.747

如果您想在发送之前让用户有机会查看它（通常推荐），请参阅[MFMailComposeViewController](http://developer.apple.com/library/IOs/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html)。对于其他实现，请参阅其他人提供的其他链接。

# gnuplot - 如何在某个值以下切点

> ID：10980470
> 
> 赞同：3
> 
> 时间：2012-06-11T12:52:24.797
> 
> 标签：gnuplot

我有一个数据文件，我想用 gnuplot 绘制它。但是，对于 y 轴，我希望 gnuplot 忽略低于某个值的所有点。有没有一种简单的方法可以做到这一点，尤其是数据文件很大？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T13:08:38.067

有（至少）两种方法，无需依赖外部工具。

```
IGNORE_BELOW=50
set yrange [IGNORE_BELOW:]  #ignore points below 50, but your yrange will start at 50. 
```

第二种方法是在 using 语句中使用 gnuplot 三元运算符。请注意，gnuplot 在执行文件 IO 时会默默地忽略未定义的值 (1/0)。

```
IGNORE_BELOW=50
filter(x)=(x>=IGNORE_BELOW)?(x):(1/0)
plot 'mydatafile.dat' u 1:(filter($2)) 
```

这假设您有一个空格分隔的数据文件，并且您希望在 x 轴上绘制第一列，在 y 轴上绘制第二列（以典型的 gnuplot 方式）。

第一种方法最简单，但它不允许您修剪要绘制的范围内的点。第二种方式有点丑，但更通用，可以用来为gnuplot数据制作各种输入过滤器。

当然，如果您的 gnuplot 支持管道并且您想使用外部工具编写过滤器，您也可以这样做。只需工具接受数据文件作为输入并将修改后的数据写入标准输出。然后在gnuplot中：

```
plot "< mytool.ext mydatafile" ... 
```

对于这个问题，`awk`将是一个很好的工具。

# mysql - c3p0 创建了如此多的连接

> ID：10980471
> 
> 赞同：2
> 
> 时间：2012-06-11T12:52:31.027
> 
> 标签：mysql, hibernate, jakarta-ee, c3p0

我刚接到托管公司的电话，他们声称我的应用程序创建了 400 多个与 mysql 数据库的连接，并导致他们的 dbms 崩溃了！我使用 hibernate 和 c3p0 作为连接池，这是我的 hibernate 配置文件，

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>

    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">
            jdbc:mysql://localhost/music?characterEncoding=UTF-8
    </property>
    <property name="connection.username">USER</property>
    <property name="connection.password">PASS</property>
    <property name="show_sql">true</property>
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="current_session_context_class">thread</property>
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
    <property name="hbm2ddl.auto">update</property>

    <property name="hibernate.max_fetch_depth">3</property>

    <property name="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
    <property name="hibernate.c3p0.acquire_increment">2</property>
    <property name="hibernate.c3p0.idle_test_period">300</property>
    <property name="hibernate.c3p0.timeout">1800</property>
    <property name="hibernate.c3p0.max_size">25</property>
    <property name="hibernate.c3p0.min_size" >3</property>
    <property name="hibernate.c3p0.max_statement">0</property>
    <property name="hibernate.c3p0.preferredTestQuery">select 1;</property>
    <property name="hibernate.c3p0.testConnectionOnCheckout">true</property>
    <property name="hibernate.c3p0.validate">true</property>    

    <mapping resource="com/roodakimusic/hibernate/resources/Article.hbm.xml"/>
    <mapping resource="com/roodakimusic/hibernate/resources/News.hbm.xml"/>
    <mapping resource="com/roodakimusic/hibernate/resources/Admin.hbm.xml"/>
    <mapping resource="com/roodakimusic/hibernate/resources/Maestro.hbm.xml"/>
    <mapping resource="com/roodakimusic/hibernate/resources/Roodaki.hbm.xml"/>
    <mapping resource="com/roodakimusic/hibernate/resources/Photo.hbm.xml"/>    

  </session-factory>
</hibernate-configuration> 
```

mysql和应用程序之间的任何对话都是这样的

```
 Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    //session.doSomething
    session.getTransaction().commit(); 
```

我是怎么了 ？:D --edit -- 有人说它可能是 jdbc 连接器版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:33:56.270

为了未来！：

解决了。问题出在我的 HibernateUtil.java 中，这一行就是问题所在：

> 返回新的 Configuration().configure().buildSessionFactory();

# android - eclipse / Android上的Cordova phonegap

> ID：10980473
> 
> 赞同：0
> 
> 时间：2012-06-11T12:52:35.023
> 
> 标签：android, cordova, extjs, sencha-touch-2

我正在尝试使用 Phonegap (cordova) 将 sencha touch 2.0 项目安装到 Android 模拟器中。

我按照教程中提到的步骤尝试了 HelloWorld 示例，它可以工作！

我把我的项目放在assests文件夹下的www目录下，还添加了cordova jar文件、xml文件夹

在主课上，我做了以下事情： `super.loadUrl("file:///android_asset/www/index.html");`

但是运行应用程序后，它会在控制台中显示以下内容：

```
[2012-06-11 15:48:27 - PhoneGap] Uploading PhoneGap.apk onto device 'emulator-5554'
[2012-06-11 15:36:13 - PhoneGap] Uploading PhoneGap.apk onto device 'emulator-5554'
[2012-06-11 15:38:10 - PhoneGap] Installing PhoneGap.apk...
[2012-06-11 15:38:12 - PhoneGap] Installation failed due to invalid APK file!
[2012-06-11 15:38:12 - PhoneGap] Please check logcat output for more details.
[2012-06-11 15:38:13 - PhoneGap] Launch canceled! 
```

日志猫：

```
06-11 13:00:27.003: DEBUG/SntpClient(65): request time failed: java.net.SocketException: Address family not supported by protocol
06-11 13:04:24.309: DEBUG/dalvikvm(141): GC_EXPLICIT freed 1K, 12% free 14374K/16327K, paused 11ms+5ms
06-11 13:05:27.041: DEBUG/SntpClient(65): request time failed: java.net.SocketException: Address family not supported by protocol
06-11 13:06:05.003: INFO/installd(34): free_cache(6710880) avail 4059136
06-11 13:06:05.009: ERROR/installd(34): cannot open /data/secure/data/: No such file or directory
06-11 13:06:05.341: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.349: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.349: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.370: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.370: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.370: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.370: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.401: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.431: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.431: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.453: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.453: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.453: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.453: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.459: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.459: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.459: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.459: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.459: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.459: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.459: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.459: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.459: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.459: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.459: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.473: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.479: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.479: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.479: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.479: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.479: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.479: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.479: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.502: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.519: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.519: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.519: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.519: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.519: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.519: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.519: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.519: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.519: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.529: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.529: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.529: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.529: ERROR/installd(34): Couldn't openat cache: No such file or directory
06-11 13:06:05.539: WARN/PackageManager(65): Couldn't clear application caches
06-11 13:06:05.539: INFO/DeviceStorageMonitorService(65): Running low on memory. Sending notification
06-11 13:06:05.871: DEBUG/Tablet/NotificationPanel(266): notificationCount=1
06-11 13:06:06.123: INFO/dalvikvm(266): Jit: resizing JitTable from 512 to 1024
06-11 13:06:06.209: WARN/ActivityManager(65): Unable to start service Intent { act=com.android.email.intent.action.MAIL_SERVICE_CANCEL cmp=com.android.email/.service.MailService }: not found
06-11 13:06:12.769: DEBUG/dalvikvm(286): GC_EXPLICIT freed 67K, 9% free 6420K/6983K, paused 4ms+10ms 
```

我是否必须更新我的 index.html 文件以包含 cordova.js 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T06:28:30.917

如果您使用 eclipse 创建原生 android 应用程序，那么在您的 android 模拟器中运行 sencha 应用程序非常简单。

我可以向你展示一些简单的步骤。

1）我建议你使用MDS鼓掌电话间隙[http://wiki.phonegap.com/w/page/34483744/PhoneGap%20Eclipse%20PlugIn%20for%20Android](http://wiki.phonegap.com/w/page/34483744/PhoneGap%20Eclipse%20PlugIn%20for%20Android)来安装phonegap。

2）一旦您完成安装，您将在顶部看到电话间隙图标。

3）然后单击它以创建一个最小的电话间隙项目。

4）然后你会看到索引文件没有必要的东西。你可以替换索引文件如下

```
 <!DOCTYPE html>
   <html>
    <head>
    <title>The Sencha Touch List Component</title>
   <link rel="stylesheet" href="app.css" type="text/css">

   <script type="text/javascript" src="touch/sencha-touch-all.js"></script>
   <script type="text/javascript" charset="utf-8">
   Ext.Loader.setConfig({
   enabled: true,
   paths: { 'Ext': 'touch/src' }
   });
  </script>
 <script type="text/javascript" src="app.js"></script>
  </head>
  <body></body>
  </html> 
```

5）如果你想使用电话间隙功能，你也可以包含phonegap.js。然后在资产文件夹中你可以创建创建煎茶应用程序所需的文件夹。如应用程序文件夹，样式文件夹，触摸文件夹等必要的东西，如 css 文件和应用程序。在 www 文件夹中。

6）你可以检查配置是否正确，只需在eclipse中检查web浏览器中的index.html文件即可。

7）如果没问题，那么你可以在你的安卓模拟器中运行应用程序，就像你为你的原生应用程序做的那样。

# serial-port - 使用 FIFO 模拟串行鼠标

> ID：10980475
> 
> 赞同：3
> 
> 时间：2012-06-11T12:52:42.883
> 
> 标签：serial-port, mouse, emulation

我一直在尝试几件事来模拟 DoxBox 模拟器的串行鼠标（为了在 Settlers 2 中玩 2 人游戏）。

我还没有找到任何可行的解决方案，所以我尝试自己制作。似乎 dosbox 可以使用任何 /dev/ttyS* 作为串行输入。所以我认为直接将一些位写入 FIFO 以伪装成串行鼠标应该可以做到这一点！不幸的是，它并没有真正起作用，因为我显然错过了一些步骤（特别是初始化，告诉驱动程序它是鼠标？），而且我觉得我并不真正了解串行端口的工作原理。

[除了Microsoft 串行鼠标](http://local.wasp.uwa.edu.au/~pbourke/dataformats/serialmouse/)协议外，我在鼠标协议上没有找到太多东西。我尝试输出合理的字节。但似乎什么都没有发生，dosbox 说它无法打开串口。

这是我实现的：

```
def bits(byte):                                                                                                                                         
    b = []                                                                               
    for i in xrange(8):                                                                                                                                 
        b.append((byte >> i) & 1)                                                                                                                       
    return b                                                                                                                                            
def pack(*args):
    # packs the bits into a string                                                                                                                                        
    s = ""                                                                                                                                              
    for i in args:                                                                                                                                      
        v = 0                                                                                                                                           
        for bit in i:                                                                                                                                   
            v = v<<1                                                                                                                                    
            v+=bit                                                                                                                                      
        s+=chr(v)                                                                                                                                       
    return s                                                                                                                                            
def makebytes(ld,rd,dx,dy): 
    # left down, right down, delta x, delta y                                                                                   
    # create 3 byte message for mouse
    dx = bits(dx)                                                                                                                                       
    dy = bits(dy)                                                                                                                                       
    A = [0,1,                                                                                                                                           
         1 if ld else 0,                                                                                                                                
         1 if rd else 0,                                                                                                                                
         dx[7],dx[6],                                                                                                                                   
         dy[7],dy[6]]                                                                                                                                   
    B = [0,0]+dx[::-1][2:]                                                                                                                              
    C = [0,0]+dy[::-1][2:]                                                                                                                              
    return pack(A,B,C)                                                                                                                                  
# this is the FIFO I created with go+rw                                                                                                                                              
f = file("/dev/ttyS42",'w')                                                                                                                             
print "Got"                                                                                                                                          
import time                                                                                                                                             
while 1:                                                                                                                                                
    # send some mouse movement                                                                                                                                                    
    f.write(makebytes(0,0,10,10))                                                                                                                         
    print "sent 1"                                                                                                                                        
    time.sleep(0.5)                                                                                                                                     
    f.write(makebytes(0,0,-10,-10))                                                                                                                       
    print "sent 2" 
```

所以，我现在不知道在哪里看，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:10:52.740

查看 DosBox 源代码，您似乎很难使用 FIFO，因为 dosbox 如何处理串行端口。

在`src/hardware/serialport/libserial.cpp`第 295 行，您可以看到串行设备是如何在 unices 中打开的：

```
cp->porthandle = open (extended_portname, O_RDWR | O_NOCTTY | O_NONBLOCK); 
```

无论如何，将 O_RDWR 与 FIFO 一起使用会导致未指定的行为（请参阅关于 O_RDWR的[open(3) ）。](http://linux.die.net/man/3/open)

此外，即使`open()`调用成功，当 DosBox 串行库尝试获取您设备的终端属性时，您也会被阻止（同一文件的第 298 行）

```
result = tcgetattr(cp->porthandle,&cp->backup); 
```

[`tcgetattr()`](http://linux.die.net/man/3/tcgetattr)将失败，因为它无法`termios`从 FIFO 中检索数据。

我想 FIFO 不是模拟设备的方法，您应该尝试滚动自己的内核模块，修改 dosbox 或使用外部适配器在串行端口上连接物理第二个鼠标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T21:50:45.570

您可能想尝试使用[Pseudo TTY ，而不是使用 FIFO](http://en.wikipedia.org/wiki/Pseudo_terminal)

# svn - 我应该如何构建 SVN 的工作副本？

> ID：10980482
> 
> 赞同：2
> 
> 时间：2012-06-11T12:53:14.743
> 
> 标签：svn

我的本地 SVN 工作副本树设置为与存储库的目录结构匹配。换句话说，它到处都有主干、分支和标签文件夹。这是设置工作副本的好方法吗？任何更好/替代的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:56:34.140

我会说，这有点不合常规。更典型的是，您将只签出您实际打算处理的项目分支/标签/主干的工作副本，而不是整个树。

如果您无法随时在整个树上进行*意外更改，则更容易记住您正在更改的内容。*

所以如果你有

```
proj
  tags/
    t1/
  branches/
    b1/
    b2/
  trunk/ 
```

你会做

```
svn checkout proj/trunk proj-trunk 
```

如果您同时需要在分支上工作，请签出单独的工作副本：

```
svn checkout proj/branches/b1 proj-b1 
```

我会补充一点，有时我会在根目录下保留一个小项目的工作副本，这样我就可以检查任何标签或分支，但*我实际上并没有修改这个副本*。这只是使用适当的文本编辑器等浏览项目存储库的一种快速方法。虽然它经常不同步并且需要勤奋地使用，`svn up`所以我不经常使用这种技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:19:33.437

我发现以类似于您的方式的工作副本很方便，但有一个例外，我对*分支*和*标签*进行稀疏签出，并根据需要填充/删除它们。所以结帐命令有点像

```
$ svn co --depth immediates url_of_myrepo $PWD ;# empty checkout of the repo
$ svn up --set-depth infinity $PWD/myrepo/trunk  ;# sticky dense update of the trunk
...
$ svn up --set-depth infinity $PWD/branches/release_branch ;# sticky dense update of a branch
$ cd $PWD/branches/release_branch
$ svn merge -c 1234 ../../trunk ;# merge a revision from trunk
$ svn commit
$ cd ..
$ svn update --set-depth exclude release_branch ;# sticky wipe out of branch from the working copy
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T12:56:08.510

在我看来，这是一个好主意，以防您需要检查新分支，而不检查整个存储库。您实际上不需要创建暂时不会使用的文件夹。例如，您应该从`myproject/trunk`在项目主干上开始工作时开始：这样，一旦您想移动到分支，您也可以在最合适的路径中检查它。

我也更喜欢在分支名称之后创建修订文件夹，`myproject/branches/mybranch/[rev]`为了清楚起见，当我经常需要在修订之间切换时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T13:18:31.173

我通常对源代码控制所做的事情是同步到主分支的最新版本或当前称为主分支的任何内容。一般而言，如果特定客户要求我不希望包含在所有构建的通用中的特定功能，我只会分支或同步到分支。但是，如果该功能进展到足以让我考虑将其移至“GA”构建，那么我总是可以将这些更改合并回主分支。

subversion 的全部目的是管理您的版本并提供备份。保持多个分支似乎是一种很快变得杂乱无章并在未来真正让自己感到困惑的好方法。恕我直言，首先破坏了源代码控制的目的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T10:29:28.117

通常像迈克尔解释的那样

```
proj
  tags/
  branches/
  trunk/ 
```

但我也曾经为文档或库添加文件夹。

# java - 在 CLASSPATH 中包含未使用的 JAR 文件的影响

> ID：10980483
> 
> 赞同：8
> 
> 时间：2012-06-11T12:53:15.083
> 
> 标签：java, performance, jar, classpath

*我在这里阅读了很多关于可用于找出未使用*的 JAR的工具的问答，例如：

1.  [松散罐](http://code.google.com/p/loosejar/)
2.  [类路径助手](http://classpathhelper.sourceforge.net/)

我的问题是，在编译时或运行时在类路径中有未使用的 JAR 是否有任何影响（例如将类加载到内存中、性能等）？问题适用于作为独立程序和 Web 服务器（Apache Tomcat）运行，尽管我最初只考虑独立程序。

**注意：**我正在运行 JDK 6u32（64 位）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T12:57:14.347

> 在编译时或运行时在类路径中包含未使用的 JAR 是否有任何影响（例如将类加载到内存、性能等）？

会有不小的影响。当类加载器（或编译器的等价物）启动时，它必须读取每个 JAR 文件的索引以找出每个 JAR 中的类。如果类路径上有不必要的 JAR，类加载器还有更多工作要做，并且（至少暂时）会使用更多内存来缓存索引。

这适用于所有类型的 Java 应用程序。

你没有问的问题是影响是否显着。答案是“通常不会”……但是类路径上的“无用的东西”越多，影响就会越大。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T12:59:41.617

主要问题不是性能，因为成本相对较小并且仅在加载新类时。主要问题是可维护性。例如，当一个库需要升级时，您可能会浪费大量时间来测试应用程序在新版本下仍然可以正常工作，结果却发现该库没有被使用。（假设您有一个新库，它需要您已经“使用”的库的更新版本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:56:09.713

是的，它有影响——因为 JVM 在 CLASSPATH 的 JAR 中寻找必要的类。保持密封的 JAR 也很有意义，告诉 JVM 不要在其他 JAR 中寻找相关的类。

PS：javac也是java程序，记录一下。

# linux - 用于绘制基于字符的图表或绘图的 Linux 实用程序？

> ID：10980493
> 
> 赞同：1
> 
> 时间：2012-06-11T12:54:01.137
> 
> 标签：linux, command-line, charts, plot, 2d

这是我非常期待知道的，当我想到它时，我觉得它是如此的退出，它非常方便和有用。这是什么？我不知道！但我希望它在 linux 中使用它，并让它在**没有**a或 any的情况下**`command line environment`**绘制 a 。`plot/chart` **`X-Window``GUI`**

 **例如，我有一些数据：

```
a, b, c, d, e
1, 2, 3, 4, 5 
```

当我运行时`utility`，我可以`plot`直接显示在**`terminal`**：

```
a b c d e
- - - - -
  - - - -
    - - -
      - -
        - 
```

'-' 可以是任何字符，例如 '.' 管他呢。

你知道我在说什么！而且我相信那里有一个很好的 linux`tool`实现，对于更复杂的数据集，可以在终端中绘制 2-D 图/图表，就像在 GUI 环境中的许多其他 GUI 工具一样，它甚至可以用彩色字符绘制！但它是什么？我一直在寻找它几个月，但我还不知道。请给我一脚。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:01:01.767

您可以将**gnuplot**与**哑终端**一起使用：更多信息请[点击此处](http://t16web.lanl.gov/Kawano/gnuplot/misc3-e.html)。**

# jquery - OnClick 事件 JQuery Mobile

> ID：10980498
> 
> 赞同：0
> 
> 时间：2012-06-11T12:54:15.420
> 
> 标签：jquery, jquery-mobile

我在让 jquery 执行 onclick 事件时遇到了一些问题。

我可以通过使用一个简单的 Click ME 来让它工作

虽然这不是最佳做法。

我创建了一个 jsfiddle 来更好地解释我想要做什么。

[http://jsfiddle.net/UuSWm/4/](http://jsfiddle.net/UuSWm/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:08:25.427

检查[http://jsfiddle.net/UuSWm/11/](http://jsfiddle.net/UuSWm/11/)

您的代码实际上是正确的（您错过了`#`on `#p1`）。

我还删除了`onLoad`jsfiddle 上的事件选项以使测试工作。

# javascript - 为什么 _=$=+[],+_+''+$ 评估为 10

> ID：10980507
> 
> 赞同：-2
> 
> 时间：2012-06-11T12:54:48.777
> 
> 标签：javascript

我在这个问题中看到`_=$=+[],++_+''+$`了[为什么 ++[[]][+[]]+[+[]] 返回字符串“10”？](https://stackoverflow.com/questions/7202157/can-you-explain-why-10). （[http://jsfiddle.net/tVMqM/](http://jsfiddle.net/tVMqM/)）。`10`

有人可以解释一下为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T12:58:22.317

解析为 1（真）`_=$=+[],++_`

将其转换为字符串`+''`

将 0 添加到字符串`+$`

**编辑：第一部分的更多细节......**

创建变量 _ 和 $`_=$=`

设置变量等于 0`+[]`

增量_变量`++_`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T12:58:26.543

[这里](http://adamcecc.blogspot.com/2011/01/javascript.html)有一个很好的解释。[HackerNews 在这里](http://news.ycombinator.com/item?id=2129745)对这个话题进行了一些精彩的讨论。

需要注意的是，这不是整数 10，而是字符串“10”。

# java - 如何按属性查找集合中的元素？

> ID：10980508
> 
> 赞同：12
> 
> 时间：2012-06-11T12:54:49.190
> 
> 标签：java, collections, apache-commons

我有一个项目列表，我想找到一个具有布尔属性（字段变量）的项目列表`x=true`。

我知道这可以通过迭代来完成，但我一直在寻找一种通用方法来在像 Apache Commons 这样的公共库中做到这一点。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-11T12:57:11.540

您可以使用 apache commons 集合为它实现 Predicate。

[http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html)

样本：

```
package snippet;

import java.util.Arrays;
import java.util.Collection;

import org.apache.commons.collections.CollectionUtils;
import org.apache.commons.collections.Predicate;

public class TestCollection {

    public static class User {

        private String name;

        public User(String name) {
            super();
            this.name = name;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        @Override
        public String toString() {
            return "User [name=" + name + "]";
        }

    }

    public static void main(String[] args) {
        Collection<User> users = Arrays.asList(new User("User Name 1"), new User("User Name 2"), new User("Another User"));
        Predicate predicate = new Predicate() {

            public boolean evaluate(Object object) {
                return ((User) object).getName().startsWith("User");
            }
        };
        Collection filtered = CollectionUtils.select(users, predicate);
        System.out.println(filtered);
    }
} 
```

可以在这里找到一些示例：http: [//apachecommonstipsandtricks.blogspot.de/2009/01/examples-of-functors-transformers.html](http://apachecommonstipsandtricks.blogspot.de/2009/01/examples-of-functors-transformers.html)

如果您需要更通用的东西，例如检查特定字段或属性的值，您可以执行以下操作：

```
public static class MyPredicate implements Predicate {

    private Object expected;
    private String propertyName;

    public MyPredicate(String propertyName, Object expected) {
        super();
        this.propertyName = propertyName;
        this.expected = expected;
    }

    public boolean evaluate(Object object) {
        try {
            return expected.equals(PropertyUtils.getProperty(object, propertyName));
        } catch (Exception e) {
            return false;
        }
    }

} 
```

这可以将特定属性与预期值进行比较，其用途类似于：

```
Collection filtered = CollectionUtils.select(users, new MyPredicate("name", "User Name 2")); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-11T13:10:22.017

问题在于 Java 中的迭代通常更简单、更清晰。也许 Java 8 的闭包会解决这个问题。;)

与@Spaeth 的解决方案进行比较。

```
List<String> mixedup = Arrays.asList("A", "0", "B", "C", "1", "D", "F", "3");
List<String> numbersOnlyList = new ArrayList<>();
for (String s : mixedup) {
    try {
        // here you could evaluate you property or field
        Integer.valueOf(s);
        numbersOnlyList.add(s);
    } catch (NumberFormatException ignored) {
    }
}
System.out.println("Results of the iterated List: " + numbersOnlyList); 
```

如您所见，它更短更简洁。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-11T12:58:33.557

您可以使用[Google guava](http://code.google.com/p/guava-libraries/)的[`filter`](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Collections2.html#filter-java.util.Collection-com.google.common.base.Predicate-)方法来执行此操作。Commons也有[`filter`](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html#filter%28java.util.Collection,%20org.apache.commons.collections.Predicate%29)方法

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-03T10:39:27.793

```
List<Foo> result = foos.stream()
  .filter(el -> el.x == true)
  .collect(Collectors.toList()); 
```

[https://www.mkyong.com/java8/java-8-streams-filter-examples/](https://www.mkyong.com/java8/java-8-streams-filter-examples/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T12:58:04.987

为了实现这一点，在 java 中，您可以覆盖 hashCode 和 equals 方法 -

例如

```
@Override
public int hashCode() {
    return eventId;
}

@Override
public boolean equals(Object obj) {
    if(obj instanceof CompanyTimelineView) {
        CompanyTimelineView new_name = (CompanyTimelineView) obj;
        if(new_name.eventId.intValue() == this.eventId.intValue()){
            return true;
        }
    }
    return false;
} 
```

在这个例子中，我已经处理了 eventId 整数值。你可以在这里使用你的班级和他的财产。在此之后，您可以使用列表的 contains、indexOf、lastIndexOf 和 get 方法在列表中查找元素。见下文。

```
//tempObj is nothing but an empty object containing the essential properties
//tempObj should posses all the properties that are being compared in equals method.

if(listOfObj.contains(tempObj)){
    return listOfObj.get(listOfObj.indexOf(tempObj));
} 
```

# jquery - jQuery Tag-It 自定义

> ID：10980509
> 
> 赞同：2
> 
> 时间：2012-06-11T12:54:51.177
> 
> 标签：jquery, tag-it

我正在尝试为以下两种行为自定义 jQuery Tag-It 小部件（http://aehlke.github.com/tag-it/）：

1）在标签中允许逗号（我可以通过自定义 triggerKeys() 来允许它，但小部件仍然不允许在标签中使用逗号，例如，当我添加像“test”这样的标签时，它只会将其添加为“test”而不是显示逗号）。但是，它确实删除了“逗号”作为标签触发器。

2）允许重复（小部件目前不允许我添加重复的标签，似乎没有允许这样做的方法）

我想问的另一件事与此相关：是否有任何与包括 jQuery 小部件相关的标准，特别是关于包括多个 css 和 js 文件，因为多个小部件使用多个文件，并且我在网站上包含的小部件之间似乎存在冲突.

如果有人能指出我正确的方向，那将对我有很大帮助。否则，具有类似功能的小部件（允许重复、逗号、拖动、关闭）。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-20T19:00:42.393

我看到几年后它仍然没有答案。对于在逗号键上具有字符字符的希伯来语，我需要从该插件中获得相同的功能。您只需要在插件中注释此代码：

```
c.which === b.ui.keyCode.COMMA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T02:38:51.343

我添加了一个 allowDuplicates 选项。抱歉，我还没有添加自定义触发键的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-30T12:00:56.053

我找到了一个添加对希伯来语支持的解决方案（我相信其他非英语语言，如阿拉伯语）。
我正在使用 jQuery UI Tag-it!version v2.0 (06/2011)。
问题是，当在希伯来语中键入 ת 键时，会创建一个新标签，因为 ת 键与英语中的逗号相同。
下面的代码验证输入的**字符值**是“，”（逗号）而不是**逗号键码**

```
 //  (event.which === $.ui.keyCode.COMMA && event.shiftKey === false) ||
      event.key === "," || 
```

[检查逗号字符而不是逗号键](https://i.stack.imgur.com/efAxn.png)

最好的问候，
Ariel

# c# - 我如何知道 iframe 已完成加载？

> ID：10980511
> 
> 赞同：1
> 
> 时间：2012-06-11T12:54:59.900
> 
> 标签：c#, asp.net, iframe

单击按钮时，我使用 iframe 从我的 Web 应用程序下载文件。

这是我的代码：

```
 iframe = document.createElement("iframe");
    iframe.src = "Report/ExportFile.aspx";
    iframe.style.display = "none";
    document.body.appendChild(iframe); 
```

我想在父页面（包含 iframe 的页面）中调用一个函数来停止我的加载动画。

我需要知道 iframe 何时完成加载，并弹出保存/打开对话框以停止它。

我试图在 iframe.onload = function() { //close } 中停止动画，但问题是在 iframe 页面加载中我有以下代码：

```
 Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
    Response.AddHeader("content-disposition", "attachment;  filename=ExcelDemo.xlsx");
    Response.BinaryWrite(pck.GetAsByteArray());
    Response.Flush();
    Response.End(); 
```

所以页面执行终止。

有谁有解决方案我怎么知道 iframe 已经加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:58:08.013

我认为您需要参与一些客户端脚本：

```
$("#iFrameId").load(function (){ 
    // Do something, probably an AJAX request in your case
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:00:48.763

一种解决方案是在 iframe javascript 中有一个方法，您可以在 iframe 完成加载时调用该方法。在此方法内部，调用父页面上的方法：

```
var iFrameLoaded = function () {
    parent.stopLoadingAnimation();
}; 
```

要在 iframe 页面加载代码后继续加载页面，请删除 Response.End() 以便继续执行。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-11T13:23:43.800

你可以看到这个，jquery iframeloaded。

`function iframeLoaded() { alert("Iframe loaded!"); }`

祝你好运！

# android - 如何在android中将应用程序从手机内存移动到sd卡

> ID：10980515
> 
> 赞同：0
> 
> 时间：2012-06-11T12:55:16.903
> 
> 标签：android

在我的应用程序中，我有设置选项卡，我有一个按钮，比如“移动到 sdcard”，按下它，应用程序应该移动到手机内存到 SD 卡是否可以从代码移动应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T12:58:24.770

您可以通过将清单文件中的“installLocation”属性更改为“preferExternal”或“auto”来允许将您的应用程序移动到 SD 卡。你可以在这里阅读更多关于它的信息：http: [//developer.android.com/guide/appendix/install-location.html](http://developer.android.com/guide/appendix/install-location.html)

然后用户可以选择通过设置应用程序移动您的应用程序，而您不必在自己的设置选项卡中指定它。

# python - python获取所有以模式开头的ID

> ID：10980517
> 
> 赞同：-1
> 
> 时间：2012-06-11T12:55:17.500
> 
> 标签：python

如何在以下字典中选择所有以id123开头的元素

```
b = {'id123_1': ['ddf', 1], 'id123_2': ['dff', 1], 'id789': ['ddf', 1]} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:01:26.600

遍历字典的键并查看键是否[`startswith()`](http://docs.python.org/library/stdtypes.html#str.startswith)给定 id：

```
elements = [values for key,values in b.iteritems() if key.startswith('id123')] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:03:10.110

如果通过元素你的意思是`key-value`对，这是要走的路：

```
elements = [(k, v) for k, v in b.iteritems() if k.startswith('id123')] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T12:56:55.157

```
>>> b = {'id123_1': ['ddf', 1], 'id123_2': ['dff', 1], 'id789': ['ddf', 1]}
>>> [v for k,v in b.iteritems() if k.startswith('id123')]
[['dff', 1], ['ddf', 1]] 
```

或者

```
>>> [k for k,v in b.iteritems() if k.startswith('id123')]
['id123_2', 'id123_1'] 
```

或其他一些变体，不太清楚需要哪个输出。

# c# - 单击父对话框时将无模式子对话框置于顶部

> ID：10980528
> 
> 赞同：1
> 
> 时间：2012-06-11T12:56:10.913
> 
> 标签：c#, wpf

我正在用 C# WPF .NET 3.5 开发一个应用程序。我有一个主窗口 M，我从中打开一个无模式子窗口 C1，其 Owner 属性未使用 Window.Show() 方法设置。从 C1 窗口我创建另一个子窗口 C2。从 C2 我创建另一个子窗口 C3。C2 和 C3 都是无模式的，使用 Window.Show() 方法创建且未设置 Owner 属性。下面是窗口的顺序：

M -> C1 -> C2 -> C3

我希望窗口行为如下。如果单击 C1 并且如果 C2 打开，则将 C2 置于顶部。如果将 C2 置于顶部或单击 C2 并且如果 C3 打开，则将 C3 置于顶部。如果单击 M，则 M 应位于顶部。因此 C1、C2 和 C3 的行为类似于模态窗口。但是我不希望 C1、C2 和 C3 实际上是模态的，即我不想使用 Window.ShowDialog() 方法和 Owner 属性集来创建它们。这是因为我希望用户能够在需要时转到主窗口 M。我怎样才能实现这种行为？

我提前感谢您的帮助。

极客

更新：

我根据建议在父窗口中添加了 GotFocus 事件处理程序，但 GotFocus 事件不会被触发。所以我添加了 Activated 事件处理程序，并在这个处理程序中调用了子窗口的 Activate()。这几乎解决了问题，但在某些情况下，这种方法不能完美地工作。例如，当子级被最小化并单击父级时，子级被激活但子级不会自动最大化。我尝试使用其他方法而不是使用 Activate() 让孩子达到顶峰，但它们都没有给出完美的解决方案。最终，我使用该方法在显示子窗口后隐藏父窗口，并在关闭子窗口时再次显示父窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:00:49.980

[如果您的窗口都使用Control.Focus()](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.focus.aspx)方法相互引用，您应该能够做到这一点。

您将向 C1 添加一个事件处理程序，该处理程序将在单击时调用 C2.Focus()。C2 调用 C3.Focus() 也会这样做。

根据我从您的问题中收集到的信息，我认为您添加处理程序的最佳事件是 C1 和 C2 窗口中的[GotFocus](http://msdn.microsoft.com/en-us/library/system.windows.uielement.gotfocus.aspx)事件。基本上，每当他们“获得焦点”时，您都会检查他们的子窗口是否打开，然后在子窗口上调用 Focus()。这将在该窗口上触发 GotFocus（因此，如果您的用户单击 C1，它会将 C2 带到顶部，然后将 C3 带到顶部）。

# iphone - 如何使用 Objective C 从服务器下载文件的速度

> ID：10980529
> 
> 赞同：0
> 
> 时间：2012-06-11T12:56:13.990
> 
> 标签：iphone, objective-c, ios, client-server, asihttprequest

我正在我的 iOS 应用程序中从服务器下载一些数据，现在我想知道下载数据的速度，因为如果下载时间超过 10 分钟，我想停止下载，我正在使用 ASIHTTPRequest 进行下载。如果下载过程需要超过 10 分钟，那么我想给用户一个消息，如果他/她想要，可以停止该过程。请建议我任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T12:59:43.190

通过使用一个简单的计时器，您已经可以计算下载了多少字节。（clock() 或你正在使用的任何东西）......

这为您提供了下载数据的滑动速率......字节差异/时间差异......

现在，使用要下载的剩余字节数，估计时间 = 剩余字节数/上面计算的速率。

如果估计时间 > 10 分钟，则停止。（关闭插座什么的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:23:41.520

@Karthik Ku​​mar Viswanathan 的解决方案应该有效，但我想补充一点，如果您要向用户显示下载速度，则在计算速度时可能只使用过去几秒钟传输的数据。否则你会遇到“平均”速度的问题；例如，如果连接以 50 kbps 的速度下载 10 秒，然后以 0 kbps 的速度下载 10 秒，那么当我们知道它在 10 秒内没有下载任何数据时，它将显示它在这 20 秒结束时以 25 kbps 的速度下载秒。

显然，如果您只是为了自己使用而计算这个，那么平均速度会更合适。

# jquery - jquery Hover - 将图像淡入另一个

> ID：10980536
> 
> 赞同：0
> 
> 时间：2012-06-11T12:56:47.043
> 
> 标签：jquery, image, hover, fade

关于这个话题有很多问题，但我从来没有真正确定一个可靠的答案。我也尝试了各种不同的方法，但从未找到真正的最佳解决方案。

在我的情况下，我需要在页面标题中放置一堆标志。每个标志都是一个 PNG，我还渲染了它们的黑白版本。我想添加一个简单的 CSS 类（DIV 或 IMG 或其他东西！）并有一个小的 jquery 当我悬停在它上面时会淡出到彩色图像，当我不悬停时淡出它。

我不想用 CSS 来做，因为那很无聊。我觉得 Jquery 是前进的方向，它看起来会更加优雅。

请帮忙，我想要尽可能最小的最有效的代码，没有一层又一层的 CSS 或一个巨大的 .JS 包含文件。

谢谢，

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T20:16:53.870

如果您将鼠标快速移入和移出图像多次，Arnar Yngvason 的解决方案可能会出现问题。这可能导致动画冻结。这个缺陷可以通过使用fadeTo 方法而不是fadeIn/fadeOut 方法来规避：

```
<div class="flag" style="background-image:url(bw.png)"><img src="incolor.png" style="display:none;"></div>

<script>
$(document).ready(function() {
    $('.flag').hover(function() {
        $(this).find('img').stop().fadeTo(400, 1);
    }, function() {
        $(this).find('img').stop().fadeTo(400, 0);
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:14:39.960

HTML：

```
<div class"flag-area england"><div>
<div class"flag-area germany"><div> 
```

CSS：

```
/* Example default values */
.flag-area
{
    background-position: 5px 10px;
    background-repeat: no-repeat;
}

/* Flag specfic values */
.flag-area.england
{
    background-image:url('images/england.png')
}

/* Flag specfic values */
.colored-flag.england
{
    background-image:url('images/england_colored.png')
}

.colored-flag.germany
{
    background-image:url('images/germany_colored.png')
} 
```

Java脚本：

```
$('.flag-area').hover(function () {
    $(this).toggleClass('colored-flag', 500);
}, function () {
    $(this).toggleClass('colored-flag', 1000 );
}); 
```

但如果你可以使用 CSS 解决这个问题并使用类似的规则，我建议不要使用 javascript：

```
/* Flag specfic values */
.flag-area.england:hover
{
    background-image:url('images/england_colored.png')
} 
```

另一个提示：如果你有很多标志要显示，不要使用很多图像，而只使用一个包含所有标志的图像，而不是更改背景图像，对所有标志使用相同的背景图像并更改其位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:16:39.363

可能是这样的：

```
<div class="flag" style="background-image:url(bw.png)"><img src="incolor.png" style="display:none;"></div>

<script>
$(document).ready(function() {
    $('.flag').hover(function() {
        $(this).find('img').stop().fadeIn('fast');
    }, function() {
        $(this).find('img').stop().fadeOut('fast');
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T13:21:44.687

看看这个：http: [//jsbin.com/efovuz/2/edit](http://jsbin.com/efovuz/2/edit)

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<style>
  .flag { width:350px; height:150px; position:relative; }
  .flag img { position:absolute; left:0; top:0; display:block; }
</style>
</head>
<body>
<div class="flag">  
  <img src="http://placehold.it/350x150/ff0" /> 
  <img class="bw" src="http://placehold.it/350x150/" />  
</div>
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
    $(function() {
       $('.flag').hover(
          function () {
              $(this).children('.bw').first().fadeOut('slow');
           },
          function () {
              $(this).children('.bw').first().fadeIn('slow');
           }
        ); 
    });
</script>
</body>
</html> 
```

# android - Libgdx。Android 模拟器和设备上没有音乐。桌面应用没问题

> ID：10980538
> 
> 赞同：0
> 
> 时间：2012-06-11T12:56:51.007
> 
> 标签：android, libgdx

我的代码如下：

```
import com.badlogic.gdx.audio.Sound;
 ...
public static Sound music;
String musicFile;
if (ANDROID) musicFile="music.mp3";
else musicFile="assets/music.mp3";
music=Gdx.audio.newSound(Gdx.files.internal(musicFile));
music.play();
music.loop(); 
```

它在桌面应用程序上播放。但是模拟器和智能手机有什么问题？ANDROID=true 对于 Android 和 false 对于桌面应用程序。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:08:08.990

您似乎对 libgdx 如何管理资产有一点误解。请参阅[http://code.google.com/p/libgdx/wiki/FileHandling](http://code.google.com/p/libgdx/wiki/FileHandling)和 wiki 的其余部分。平台不需要特殊情况。

您还应该始终为其他人发布堆栈跟踪以帮助查明问题。

# emacs - 文件错误：无法打开加载文件，jde。如何解决这个问题？

> ID：10980545
> 
> 赞同：1
> 
> 时间：2012-06-11T12:57:08.480
> 
> 标签：emacs, elisp

```
-
Warning (initialization): An error occurred while loading `/afs/nada.kth.se/hom\
e/d99/d99-nro/.emacs':

File error: Cannot open load file, jde

To ensure normal operation, you should investigate and remove the
cause of the error in your initialization file.  Start Emacs with
the `--debug-init' option to view a complete error backtrace. 
```

.emacs：

```
;; - -  - -  - -  - -  - -
;;
;;  Emacs JDE
;;

(setq load-path
       (nconc '(
                "/pkg/jde/2.1.4"
                )
                load-path))
(require 'jde)
;;  - -  - -  - -  - -  - -

;;  - -  - -  - -  - -  - -
;;
;;   Make possible to compile from inside emacs
;;   using control-c -m
;;

(global-set-key "\C-cm" 'compile)

(setq load-path (cons "/src/lang/sictus/sicstus3.5" load-path))
(autoload 'run-prolog "prolog"
"Start a Prolog sub-process." t)
(autoload 'prolog-mode "prolog"
"Major mode for editing prolog programs" t)(autoload 'prolog-menu-hook-function
"prolog-menu" t)
(add-hook 'prolog-mode-hook 'prolog-menu-hook-function) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:07:27.790

如果我没记错的话，JDE 的 lisp 文件在`lisp`子目录中。有关详细信息，请参阅[安装说明](http://jdee.sourceforge.net/install.html)...

PS而不是`(setq load-path....`它更容易使用`(add-to-list 'load-path ...)`- 它会排除重复并且更容易阅读

# video - 如何在 BlackBerry 中获取视频播放器的状态

> ID：10980548
> 
> 赞同：0
> 
> 时间：2012-06-11T12:57:23.663
> 
> 标签：video, blackberry, status, playback

我想在 BlackBerry 中播放 10 秒长的视频。视频播放完成后，我想转到另一个屏幕。为此，我想知道播放器的当前状态（例如播放、停止、暂停等）。

这是我现在使用的代码。在这个问题上需要帮助。

```
InputStream is = getClass().getResourceAsStream("/video/battery_tip.mp4");
player = Manager.createPlayer(is, "video/mp4");
player.prefetch();
player.realize(); 
VideoControl vc = (VideoControl) player.getControl("VideoControl");
Field fld = (Field) vc.initDisplayMode(VideoControl.USE_GUI_PRIMITIVE, "net.rim.device.api.ui.Field");
vc.setDisplayFullScreen(true);
vc.setVisible(true);
add(fld);
player.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:16:06.160

检查接口[PlayerListener](http://www.blackberry.com/developers/docs/6.0.0api/javax/microedition/media/PlayerListener.html)。

> PlayerListener 是接收 Players 产生的异步事件的接口。应用程序可以实现此接口并使用 Player 中的 addPlayerListener 方法注册其实现。

要获取[Player](http://www.blackberry.com/developers/docs/6.0.0api/javax/microedition/media/Player.html)的当前状态，请为其添加一个实例`PlayerListener`。

```
player.addPlayerListener(new MyPlayerListener()); 
```

的演示实现`PlayerListener`

```
class MyPlayerListener implements PlayerListener {
    public void playerUpdate(Player player, String eventType, Object eventData) {
        try {
            if (eventType == PlayerListener.END_OF_MEDIA) {
                // go to next screen
            } else if (eventType == PlayerListener.CLOSED) {
                // go to next screen
            } else if (eventType == PlayerListener.ERROR) {
                // go to next screen
            } else if (eventType == PlayerListener.STOPPED) {
                // go to next screen
            }
        } catch (Exception e) {
        }
    }
} 
```

# wpf - WPF/AvalonDock：根据停靠位置切换 StackPanel 方向

> ID：10980549
> 
> 赞同：1
> 
> 时间：2012-06-11T12:57:32.363
> 
> 标签：wpf, avalondock

我正在使用 AvalonDock 在 WPF 中构建一个应用程序，部分原因是我认为它会很有用，但主要是为了自学一些 WPF 并习惯于一般的编程风格。我已经将应用程序的主要“工具箱”构建为可停靠窗格，以便可以移动、拉出或自动隐藏它，以便用户可以充分利用他们的屏幕空间，在其中，我正在使用一个 StackPanel 来排列各种按钮。

当工具箱停靠在左侧或右侧时，是否有一种（相对简单的）方法可以使 StackPanel 垂直定向，但在停靠在顶部或底部时水平定向？我确信必须有某种方法将方向绑定到某个东西而不是直接设置它，但我似乎找不到任何有用的东西来绑定它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:58:56.157

像这样的东西怎么样：

您的 StackPanel 应如下所示：

```
<StackPanel Orientation="{Binding DockableStyle, 
                         RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Avalon:DockableContent}},
                         Converter={StaticResource MyConverter}">
  <!-- StackPanel content here -->
</StackPanel> 
```

您`Myconverter`具有以下`Convert`方法：

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
  DockableStyle style = value as DockableStyle
  if (style == DockableStyle.TopBorder || style == DockableStyle.BottomBorder)
  {
     return Orientation.Horizontal;
  }
  else
  {
     return Orientation.Vertical;
  }
} 
```

我认为这应该为你做所有的魔法

# c# - asp.net 列表框更新

> ID：10980552
> 
> 赞同：4
> 
> 时间：2012-06-11T12:57:41.310
> 
> 标签：c#, asp.net, listbox

我有一个带有一组值的 ListBox，如果数据被添加/删除，我想更新它。

以下工作，但有没有办法不必每次修改内容时都调用它？

```
lbUsers.DataSource = myDataSource;
lbUsers.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:45:28.177

> 如果数据被添加/删除，我想更新它

这一切都取决于您的表单 UI。

页面的重点是添加用户并在添加用户时显示它们吗？或者页面的指令是显示所有当前可用的用户，直到第二个？

如果您的目标是前者，那么您只需在`lbUsers`每次添加用户时重新绑定 ListBox。

下面是第一种情况的示例：

**添加用户和显示**

**标记**

```
<asp:TextBox ID="txtUsername" runat="server" />
<asp:Button ID="btAdd" runat="server" value="Add" onclick="btAdd_Click" />
<asp:ListBox ID="lbUsers" runat="sever" /> 
```

**代码隐藏**

```
public void AddUser()
{
    string username = txtUsername.Text;

    // Either update the database with a new user
    User newUser = User(username);
    WhateverDataAccessYoureUsing.Add(User);
    List<User> users = WhateverDataAccessYoureUsing.GetAllUsers();
    lbUsers.DataSource = users;
    lbUsers.DataBind();

    // OTHER OPTION
    //
    // Or if no database directly bind the user to the ListBox
    ListItem li = new ListItem(username);
    lbUsers.Items.Add(li);
}

protected void btAdd_Click(object sender, EventArgs e)
{
     AddUser();
} 
```

但是，如果页面只是显示所有用户并显示在其他地方创建的新用户，那么您需要在`AJAX`此处结合服务器端代码。我们将不使用服务器控件，而是使用 HTML 选择，因为无法在`WebMethods`. 此外，我们将用于`jQuery`调用`AJAX`。

**通过 AJAX 调用显示用户**

**标记**

```
<select id="lbUsers" size="4" multiple="multiple">
</select>

<script>
    // When the page is ready to be manipulated
    $(function() {

      // Call the server every three seconds to get an updated list of users
      setInterval(function() {

           $.ajax({ 
                type: "POST",
                url: "Default.aspx/GetUsers",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                   // If we are successful, append the results to lbUser
                   $(result.d).appendTo('#lbUser').hide().fadeIn(500);
                },
                error: function () {
                    // If we encounter an error, alert the user
                    alert("There was a problem getting the new users");
                }
            });

       },3000); // 3000 is 3000 milliseconds which is 3 seconds
    });
</script> 
```

**代码隐藏**

```
// This annotation is required for all methods that can be accessed via AJAX calls
[System.Web.Services.WebMethod]
public static void GetUsers()
{
   List<User> users = WhateverDataAccessYoureUsing.GetAllUsers();

   string listItems = string.Empty;

   // Loop through the list of users and create the option
   // that will be displayed inside of lbUsers
   foreach (User u in users)
   {
       listItems += CreateOption(u.Username);
   }

   // return the string value that will be appended on to lbUsers
   return listItems;
}

// This creates the html options that will be displayed 
// inside of lbUser
private string CreateOption(string text)
{
   string option = "<option>" + text + "</option>"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:04:16.077

是的，如果要显式添加项目，则不一定必须使用数据源：

```
lbUsers.Items.Add(new ListItem("New Item", "NI")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:05:34.430

您需要在每次回发时将数据源显式绑定到更新的数据源。

# php - 使自定义php“爆炸”函数递归

> ID：10980554
> 
> 赞同：1
> 
> 时间：2012-06-11T12:57:54.677
> 
> 标签：php, function, recursion

我知道[http_build_query()](http://www.php.net/manual/en/function.http-build-query.php)和[parse_str()](http://php.net/manual/en/function.parse-str.php)是这类问题的更好解决方案，但我无法更改我正在处理的特定项目中的数据结构，所以我试图通过创建来简化一些事情来自数据库存储字符串的大型 3d 关联数组。

有人可以帮我做这个函数递归吗？我希望它采取这样的方式：

```
explode3D( $separators = array('|',','),
$string = "val1,val2|val1,val2,val3",
$keys = "cat1,item1,item2|cat2,item1,item2,item3"
); 
```

并返回这样的东西

```
Array (
'cat1' => Array('item1'=>'val1', 'item2'=>'val2'),
'cat2' => Array('item1'=>'val1', 'item2'=>'val2', 'item3'=>'val3')
) 
```

这是到目前为止的功能：

```
function explode3D($separators,$string,$keys=0){
    $res = array();

    if(is_array($separators)){//MULTI DIMENSION MODE: (unfinished!!)

        //help needed here//

    }else{//SINGLE DIMENSION MODE:
        $vals = explode($separators,$string);
        if($keys === 0){ //NO KEYS:
            $res = $vals;
        }else if($keys === 1){//ALTERNATE ROWS ARE KEYS:
            $key = '';
            for($i=0; $i<sizeof($vals); $i++){
                if ($i++ % 2 == 1 ){ //every second element:
                    $key = $vals[$i]; //save the key
                }else{
                    $res[$key] = $vals[$i]; //set the saved key = value
                }
            }
        }else{ //GET KEYS FROM $keys ARRAY:
            if(is_string($keys)){ //explode keys string if necessary (using $separators)
                $keys = explode3D($separators,$keys);
            }
            for($i=0; $i<sizeof($vals); $i++){
                $res[$keys[$i]] = $vals[$i];
            }
        }
    }
    return($res);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:16:48.080

这是它应该如何工作的想法。我相信几乎没有错别字和遗漏的运算符，但它希望能帮助您了解操作方法。

```
<?php
$string = "val1,val2|val1,val2,val3";
$keys = "cat1,item1,item2|cat2,item1,item2,item3";

$firstDimension = explode("|", $keys);
$firstDimensionValues = explode("|", $string);
$newArray = Array();
for($i = 0; $i < count($firstDimension); $i++)
{
  $d2Keys = explode(",", $firstDimension[$i]);
  $key = $d2Keys[0];
  array_shift($d2Keys); // remove $key
  $d2Values = explode(",", $firstDimensionValues[$i]);
  for ($a = 0; $a < count($d2Keys); $a++)
  {
    $newArray[$key][$d2Keys[$a]] = $d2Values[$a];
  }
}

print_r($newArray); 
```

# ruby-on-rails - 如何从控制器调用javascript？

> ID：10980555
> 
> 赞同：0
> 
> 时间：2012-06-11T12:57:55.747
> 
> 标签：ruby-on-rails, twitter-bootstrap, modal-dialog, registration

我有问题：如果注册或登录表格有错误，我想调用模态错误。

那么如何从控制器调用 js 或者我应该怎么做呢？

这是我的控制器：

```
 def create
    @user = User.new(params[:user])
     if @user.save
   # Handle a successful save.
     else
   render :js => ('#login').modal('show')
   end
  end 
```

像这样，但以正确的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:23:18.697

确保您正确地创建和声明您的模态：

HTML：

```
<head>
   <link href="path/to/bootstrap.css" rel="stylesheet">
   <script src="path/to/jquery.js"></script>
   <script src="path/to/bootstrap-modal.js"></script>
</head>

<div id="login" class="modal hide fade in" style="display: none;">
   <div class="modal-header">             
      ...
   </div>
   <div class="modal-body">              
      ...
   </div>
   <div class="modal-footer">
      ...
   </div>
</div> 
```

JS：

```
$('#login').modal({ ... }); 
```

Rails（不是我的专长，主要是你的示例代码）：

```
def create
   @user = User.new(params[:user])
   if @user.save
      # Handle a successful save.
    else
      render :js => "('#login').modal('show');"
   end 
```

[**请注意，我在文档](http://guides.rubyonrails.org/layouts_and_rendering.html)`render :js`中指定的参数周围添加了双引号。

# iphone - 使用 ios5 + iphone sdk 在 twitter 上上传视频

> ID：10980556
> 
> 赞同：0
> 
> 时间：2012-06-11T12:57:58.633
> 
> 标签：iphone, ios, twitter, ios5

嗨，

我已经使用 TWTweetComposeViewController 成功上传了图像和状态消息 .. 但我找不到任何可以使用同一类上传视频的内容 ..

如果您有任何链接或指南，请建议我。

在此先感谢.. abhishek

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:13:39.163

Twitter 本身不支持视频。您必须手动将视频上传到第三方服务（例如 YouTube 或 Vimeo 或 Twitvid 或 yfrog 或……），然后在 Twitter 上分享链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:16:12.897

您可以将**TWRequest**类与

```
 - (void)addMultiPartData:(NSData *)data withName:(NSString *)name type:(NSString *)type 
```

您需要包含以下标题：

```
#import "Twitter/Twitter.h"
#import <Accounts/Accounts.h> 
```

我不确定是否可以上传视频。

更多关于使用 TWRequest [https://dev.twitter.com/docs/ios/posting-images-using-twrequest](https://dev.twitter.com/docs/ios/posting-images-using-twrequest)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:42:10.177

Twitter 不托管任何视频。请通过此[support.twitter.com](https://support.twitter.com/articles/75603-how-to-post-videos-on-twitter)

# java - 一旦 jLine 写超过一行到 shell，我们就不能回到原来的行

> ID：10980559
> 
> 赞同：1
> 
> 时间：2012-06-11T12:58:01.490
> 
> 标签：java, shell, command-prompt, jline

我在使用 jLine 时遇到了以下问题。我们打开命令提示符（linux 和 windows）并输入一个字母流，直到它“溢出”到下一行。例如：

啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

然后我们尝试删除输入的文本，但是光标不会回到第一行，它会保留在第二行的开头。这是一个视觉问题而不是逻辑问题，因为通过打印出调试消息并按“enter”，我可以看到缓冲区包含所有删除后的字符串。

如果有人可以帮助我弄清楚为什么会发生这种情况以及如何解决这个问题，将不胜感激。

谢谢，乔纳森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:10:37.587

我对[jLine SourceForge 站点](http://sourceforge.net/projects/jline/)进行了更多研究，发现使用 jLine v2.7 时不会出现问题。但是请考虑到 API 发生了重大变化，因此您的实现将不得不更改

# javascript - 尝试在选择器的迷你对象中使用 .find() 和 .children 时遇到困难

> ID：10980565
> 
> 赞同：1
> 
> 时间：2012-06-11T12:58:09.423
> 
> 标签：javascript, jquery

我基本上试图摆脱程序化 js 方法，因此尝试更多地使用对象。我已经在我的整个对象中设置了一个对象来缓存选择器并设置变量等，但我似乎遇到了问题。目前，当我运行此代码时出现 2 个错误，告诉我 .length 和 .children 都未定义。有人可以解释设置这些的正确方法，以便可以使用 jquery 方法吗？

JS

```
var bop = {

        els: {
           // cache selectors ...
            grid: $( '#grid' ),
            box: this.grid.children(),
            box_l: this.box.length,
            start_btn: $( '#start' ),
            counter: $( '#counter' ),
            sequence: 5            
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T13:00:08.853

如果您希望这`this`将引用您正在使用对象文字构建的正在构建的对象，那么这就是您的问题。JavaScript 不能那样工作。

你可以这样做：

```
var bop = {
 els: {
   grid: $('#grid'),
   // ...
 }
};

bop.els.box = box.els.grid.children();
// etc 
```

该`this`参考资料完全是关于函数调用的，实际上与对象无关，或者如果您来自 C++/C#/Java 背景，您可能会认为它没有那么重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:01:34.363

在文字对象内部使用时`this`，它不引用正在创建的对象，它仍然与文字对象外部的代码相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:03:43.673

如果您非常想使用`this`，请将您的缓存对象更改为

```
els: {
           // cache selectors ...
            grid: $( '#grid' ),
            box: function(){
                   return this.grid.children()
            },
            box_l: function(){
                  return this.box().length
            },
            start_btn: $( '#start' ),
            counter: $( '#counter' ),
            sequence: 5            
        } 
```

否则，请确保`$( '#grid' )`在使用`box`and`box_1`属性时参考。

在旁注中，**[这个](http://jsfiddle.net/uT5jY/)**小提琴将帮助你理解为什么你的`this`工作方式不像你认为的那样工作。干杯。

# c# - Sharepoint 执行 powershellscript

> ID：10980573
> 
> 赞同：1
> 
> 时间：2012-06-11T12:58:36.173
> 
> 标签：c#, security, list, sharepoint, powershell

`ListEventReceiver`我需要从特殊用户凭据下执行 PowerShell 脚本。我发现`Runspace`哪个可以很好地执行脚本，但是如何使安全（代码中没有密码）“运行为”？

**管道**

```
string cmdArg = "C:\\Users\\Administrator\\Documents\\userExist.ps1 " + mailstring;
Runspace runspace = RunspaceFactory.CreateRunspace();
runspace.Open();
Pipeline pipeline = runspace.CreatePipeline();

pipeline.Commands.AddScript(cmdArg);
pipeline.Commands[0].MergeMyResults(PipelineResultTypes.Error, PipelineResultTypes.Output);
Collection<PSObject> results = pipeline.Invoke();
var error = pipeline.Error.ReadToEnd();
runspace.Close(); 
```

我阅读了有关*安全存储服务*的信息，但我认为它仅适用于整个服务、页面或列表，不能用于单一功能？

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:38:47.583

关于以其他身份运行脚本，您是否尝试过[RunWithElevatedPrivileges](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.runwithelevatedprivileges.aspx)？如果这不能解决问题，则可能值得考虑授予应用程序池的帐户足够的权限来完成所需的任务。

# drupal - 包含的文件显示在模板之外

> ID：10980574
> 
> 赞同：1
> 
> 时间：2012-06-11T12:58:44.470
> 
> 标签：drupal, include

我正在尝试为 Drupal 开发一个模块，我很新。

以下代码运行良好，但包含的文件除外。包含文件的内容显示在模板之外，而其余部分则正确显示在模板内。为什么会发生这种情况以及如何解决这个问题？

```
 drupal_add_css(drupal_get_path('module', 'helloworld') . '/helloworld.css', array('group' => CSS_DEFAULT, 'every_page' => TRUE));

function helloworld_menu(){
  $items = array();

  $items['helloworld'] = array(
    'title'            => t('Hello world'),
    'page callback'    => 'helloworld_output',
    'access arguments' => array('access content'),
  );

  return $items;
}

function helloworld_display(){

    include_once ( dirname(__FILE__) . '/helloworld.display.php');
}
/*
* Display output
*/
function helloworld_output() {
  header('Content-type: text/plain; charset=UTF-8');
  header('Content-Disposition: inline');
  $output = "<div id='hw_wrapper'>";
  $output .= helloworld_display();
  $output .= 'hej';
  $output .= "</div>";
  return $output;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:42:18.293

试试这个代码

***MYMODULE.module***

```
<?php
/**
 * Implementation of hook_menu().
 *
 * @return An array of menu items.
 */
function MYMODULE_menu() {
  $items = array();

  $items['test'] = array(
      'title' => 'Test',
      'page callback' => 'MYMODULE_test_page',
      'access arguments' => array('access content'),
  );

  return $items;
}

/**
 * Page callback
 */
function MYMODULE_test_page(){
  // Drupal 7 way to get path of files directory
  $path = variable_get('file_public_path', conf_path() . '/files');
  // Uncomment for Drupal 6
  // $path = file_directory_path() .'/files'; 
  $variables['content'] = htmlentities(@file_get_contents($path .'/test.php'));
  return theme('test_page', $variables);
}

/**
 * Implementation of hook_theme().
 *
 * @return Array of defined theme functions
 * 
 */
function MYMODULE_theme() {

  $themes = array(
      'test_page' => array(
          'variables' => array('variables' => array()),
          'template' => 'test-page',
          'path' => drupal_get_path('module', 'MYMODULE') . '/theme'
      )
  );

  return $themes;
} 
```

***主题/test-page.tpl.php***

```
<div class="myclass">
  <pre>
    <?php print $content; ?>
  </pre>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:02:51.060

我宁愿使用以下代码。

```
function helloworld_init() {
  drupal_add_css(drupal_get_path('module', 'helloworld') . '/helloworld.css', array('group' => CSS_DEFAULT, 'every_page' => TRUE));
}

function helloworld_menu(){
  $items = array();

  $items['helloworld'] = array(
    'title' => t('Hello world'),
    'page callback' => 'helloworld_output',
    'access arguments' => array('access content'),
  );

  return $items;
}

/*
* Display output
*/
function helloworld_output() {
  drupal_add_http_header('Content-type', 'text/plain; charset=UTF-8');
  drupal_add_http_header('Content-Disposition', 'inline');

  return array(
    '#prefix' => '<div id="hw_wrapper">',
    '#suffix' => '</div>',
    '#theme' => 'helloworld_mypage',
  );
}

function helloworld_theme() {
  return array(
    'helloworld_mypage' => array(
      'variables' => array(),
      'template' => 'helloworld-mypage',
    ),
  );
} 
```

将helloworld.display.php文件重命名为helloworld-mypage.tpl.php，放到helloworld.module文件所在的目录下。

我将添加一些注释：

*   当 CSS 文件需要包含在任何页面中时，使用[hook_init() 。](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_init/7)如果您只需要在您的页面中使用它，您可以使用以下代码。（用下面的代码替换`helloworld_output()`我之前展示的代码；其余的和之前的一样。）

    ```
    function helloworld_output() {
      drupal_add_http_header('Content-type', 'text/plain; charset=UTF-8');
      drupal_add_http_header('Content-Disposition', 'inline');

      return array(
        '#prefix' => '<div id="hw_wrapper">',
        '#suffix' => '</div>',
        '#theme' => 'helloworld_mypage',
        '#attached' => array(
          'css' => drupal_get_path('module', 'helloworld') . '/helloworld.css',
        ),
      );
    } 
    ```

*   如果您有一次调用`drupal_add_http_header()`，则可以将其替换为 #attached 数组中的一个项目，如以下代码所示。

    ```
    function helloworld_output() {
      return array(
        '#prefix' => '<div id="hw_wrapper">',
        '#suffix' => '</div>',
        '#theme' => 'helloworld_mypage',
        '#attached' => array(
          'css' => drupal_get_path('module', 'helloworld') . '/helloworld.css',
          'drupal_add_http_header' => array('Content-type', 'text/plain; charset=UTF-8'),
        ),
      );
    } 
    ```

    有关更多信息，请参见[drupal_process_attached()](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_process_attached/7)。

# bash - 如何在 Bash 中取消绑定和重新映射 Cw？

> ID：10980575
> 
> 赞同：12
> 
> 时间：2012-06-11T12:58:47.380
> 
> 标签：bash, readline

我想将`Ctrl`-映射`w`到`kill-region`Bash 4.2 中。默认情况下，此键绑定到`unix-word-rubout`（向后删除单词）。根据手册，应该可以使用`bind`具有选项的命令进行重新映射

> -u function 解除绑定到指定函数的所有键。
> 
> -r keyseq 删除keyeq 的任何当前绑定。

我试过了`bind -r "\C-w"`，`bind -u unix-word-rubout`但钥匙没有取消，正如所`bind -P | grep unix-word-rubout`揭示的那样，映射没有变化。

我玩`bind`了一点，我可以解开其他内置键，但不能`Ctrl`- `w`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T13:14:19.503

`Ctrl`-`w`绑定`stty`到`werase`. 您需要先在那里解除绑定。

```
stty werase undef
bind '"\C-w":kill-region' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-05-09T06:54:15.463

默认情况下，readline 尝试将内核终端驱动程序特别处理的控制字符绑定到它们的 readline 等效项。（要查看您的终端是如何配置的，请运行

```
stty -a 
```

.) 您的终端可能已`Ctrl-w`设置为`werase`，因此 bash 将其绑定到`unix-word-rubout`. 此绑定优先于您在 中指定的任何键绑定`~/.inputrc`。

为避免这种映射，您需要在文件中将 readline 变量设置`bind-tty-special-chars`为：`off``~/.inputrc`

```
set bind-tty-special-chars off 
```

# php - 用于创建根符号链接的 PHP 执行权限

> ID：10980577
> 
> 赞同：1
> 
> 时间：2012-06-11T12:58:51.460
> 
> 标签：php, linux, permissions, exec, ln

我目前正在为一家工程公司开发基于 Linux 的单板计算机，我负责更新板中托管的本地配置网站。这个配置服务器的目的是让用户可以通过他们的网络浏览器连接到板并修改板内的设置。

我正在尝试创建的当前设置涉及设置板的硬件时钟的时区。不幸的是，board 处理时区的方式是在 /usr/share/zoneinfo/ 中的文件与 /etc/localtime 之间建立系统链接。

我的问题是我需要从网站运行以下命令：

```
ln -s /usr/share/zoneinfo/Etc/GMT$1 /etc/localtime 
```

其中 $1 是一个 + 或 - 后跟一个数字。这些是由网站上的下拉菜单生成的。

当我尝试从网站的 PHP 运行此命令时，出现了我的主要问题。通过捕获 exec 命令的响应，我发现我没有获得足够的权限来创建/修改符号链接。我已经尝试过创建一个 bash 脚本并从 PHP 运行它的方法。我还尝试从 PHP 运行基于 C 的可执行文件。

注意事项：用户密码是随机生成的，嵌入式 Linux 包中不包含 sudo。

出于安全考虑，我的目标是避免以 root 身份运行 Apache 服务器。有没有办法给单个脚本（可能是临时的）运行命令的权限，或者任何其他类型的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:07:11.683

分离权限是有充分理由的，尤其是在处理无状态协议时。darryn.ten 的答案是浪费时间 - 您授予网络服务器 uid 执行所有操作的权限 - 通过以 root 身份运行网络服务器，您的代码以更少的努力（并且同样不安全）获得相同的结果。

我建议将逻辑封装在以 root 身份运行的程序中，该程序仅：

*   验证论点
*   链接时区

在示例 bekow 我使用 bash 需要 sudo 以 root 身份执行 - 但如果你用 C 编写它，那么你可以启用 setuid 位，它将以文件所有者的权限运行程序（这不起作用使用 shell 脚本）。不确定 setuid 在 lua 中的表现如何——这显然是嵌入式系统的候选者。

```
#!/bin/bash

# NB must be validated under executing user privilege

REQUEST=`echo $1 | grep -P '/^([\+\-0-9]+)$/'`"; 
ln -s /usr/share/zoneinfo/Etc/GMT$(REQUEST} /etc/localtime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:02:43.173

你需要在安装中添加sudo，然后

```
visudo 
```

并添加以下内容

```
apache ALL=(ALL) NOPASSWD: ALL 
```

前提是您的 apache 用户是 apache。

然后在命令中添加 sudo

```
sudo ln -s /usr/share/zoneinfo/Etc/GMT$1 /etc/localtime 
```

并且命令应该被执行。

编辑：实际上不要这样做

# php - 如何重定向Apache“...索引”页面？

> ID：10980579
> 
> 赞同：4
> 
> 时间：2012-06-11T12:59:00.320
> 
> 标签：php, apache, redirect

我正在尝试通过 Apache 的[autoindex 模块](http://httpd.apache.org/docs/2.2/mod/mod_autoindex.html)使用 PHP 在 Apache 中实现经过身份验证的文件列表。

我想象的方式是让 Apache 将 PHP 脚本作为[头文件](http://httpd.apache.org/docs/2.2/mod/mod_autoindex.html#headername)运行。我已经设法让 Apache 为头文件正确运行 PHP，它也可以很好地检测登录 cookie。但似乎 Apache 将头文件作为单独的请求运行，这意味着如果我尝试从 PHP 发送重定向标头，则它不会运行。

我的（简化的）Apache 配置：

```
DocumentRoot "/path/to/files_root"
Alias /~extra "/path/to/extra-data"

<Directory "/path/to/extra-data">
    Options -Indexes -MultiViews +Includes
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>

IndexOptions FancyIndexing HTMLTable SuppressHTMLPreamble
AddType text/html .php .html .htm
AddOutputFilter INCLUDES .php
AddHandler application/x-httpd-php .php
HeaderName "/~extra/HEADER.php" 
```

我的 HEADER.php 文件：

```
<?php

if ( ! my_validate_cookie_function()) {
    header('HTTP/1.1 302 Found');
    header('Location: http://login.example.com/');
    exit(1);
} 
```

因此，标头不会发送到浏览器。设置 Apache 环境变量似乎不起作用，因为它们在 HEADER.php 完成执行的那一刻就消失了。

cookie 本身是加密的，因此需要 PHP 来验证它。

任何建议如何达到预期的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:39:07.363

`index.php`您应该在标签中使用以下代码将文件插入到您的目录中`<body>`。

```
function fileindex($folder) {
    if (!is_dir($folder)) {
        return array(); //empty if not a folder
    }
    $list = scandir($folder);
    array_shift($list); //first two values are always . & ..
    array_shift($list);
    return $list;
}
/* auth stuff here */
if (is_auth) {
    echo "<h1> Index of ".getcwd()."</h1>\n<ul>";
    echo "\n<li><a href=\"/\">Parent Directory</a>";
    foreach (fileindex(".") as $i) {
        echo "\n<li><a href=\"".$i."\">".htmlentities($i, ENT_QUOTES|"ENT_HTML401", "UTF-8", true)."</a></li>";
    }
    echo "</ul>";
} 
```

现在既然你告诉我你不能使用`index.php`，你应该使用 Apache 将目录重定向到`wherever/other.php?directory=path`那里并从那里工作。

在`.htaccess`解决方案中

```
RewriteCond %{REQUEST_URI} -d
RewriteRule ^(.*)$ wherever/other.php?directory=$1 [L] 
```

然而，最值得注意的是，您需要稍微编辑 PHP 代码以适应文件夹作为`$_GET`参数而不是 a`getcwd()`和`fileindex(".")`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:02:56.827

1 in`exit(1)`可能是问题所在。尝试删除该号码。

我知道这`exit`是一个别名，`die`并将`die`每个文本打印给客户端。

顺便说一句，我想建议使用`mod_rewrite`. 您可以检查`RewriteCond`cookie 是否存在。如果您想检查更多例如会话变量，这将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T01:14:07.987

这就是我最终得到的结果。感谢[Scott S](https://stackoverflow.com/users/1441523/scott-s)，他向我暗示了解决方案。

阿帕奇配置：

```
ServerName listing.example.com
# A path to a location which you wanted listed
DocumentRoot "/path/to/listed/location"

<Directory "/path/to/listed/location">
    # Ignore .htaccess files
    AllowOverride None
    # Disable Apache's own indexing, CGI execution and Apache Includes
    Options -Indexes -MultiViews -ExecCGI -Includes FollowSymLinks
    Order allow,deny
    Allow from all
</Directory>

<Directory "/path/to/php/listing/app">
    Options -MultiViews ExecCGI
    Order allow,deny
    Allow from all
</Directory>

<IfModule dir_module>
    # index.php should not be listed here as we will not want PHP scripts to be executed
    DirectoryIndex index.html index.htm
</IfModule>

<IfModule alias_module>
    # This is for CSS/JS files
    Alias /~media /path/to/php/listing/app/media
</IfModule>

<IfModule xsendfile_module>
    # Because the files listed might be large, we want to pass the file handling
    # to Apache via XSendFile Module
    # @see: https://tn123.org/mod_xsendfile/
    XSendFile on
    XSendFilePath "/path/to/listed/location"
</IfModule>

# Uncomment the two setting below if your listing a mounted drive
# EnableSendfile Off
# EnableMMAP Off

<IfModule rewrite_module>
    RewriteEngine On
    # Make sure there are trailing slashes for Directory URLs
    RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d
    RewriteRule ^(.*[^/])$ $1/ [R=302,L]
    # Pass all file+dir requests to a PHP handler
    RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d [OR]
    RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f
    RewriteRule .* /path/to/php/listing/app/index.php/$0 [L]
</IfModule> 
```

和（一个非常简化的版本）我的 php 脚本：

```
<?php

if (my_authentication_check()) {
    $requested_path = realpath($_SERVER['DOCUMENT_ROOT'] . $_SERVER['REQUEST_URI']);
    $filename = substr($requested_path, strrpos($requested_path, DIRECTORY_SEPARATOR) + 1);

    if ($requested_path) {
        if (is_dir($requested_path)) {
            // Show dir contents
            $dir_contents = scandir($requested_path);
        } else {
            // Pass file download to XSendFile module
            header('X-Sendfile: ' . $requested_path);
            header('Content-Type: ' . my_get_file_mime($filename));
            exit;
        }
    } else {
        // display 404 error
    }
} else {
    // redirect to login screen, or display an error... whatever you fancy
} 
```

实际上，我使用 Kohana 框架和我自己的库来处理身份验证检查、显​​示列表等。您还必须考虑文件权限。例如，在 *nix 系统上，您需要检查 dirs 的可执行权限，而在 Windows 上，读取权限就足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T13:08:08.577

您可以使用以下代码：

```
<Directory "/path/to/files_root">
  DirectoryIndex redirected_page.php
</Directory> 
```

# c# - 组件一 c1upload 在回调事件中触发，因此不支持文本框、标签值

> ID：10980587
> 
> 赞同：0
> 
> 时间：2012-06-11T12:59:47.317
> 
> 标签：c#, asp.net, ajax, componentone

```
protected void C1Upload2_ValidatingFile(object sender, C1.Web.Wijmo.Controls.C1Upload.ValidateFileEventArgs e)
{
    try
    {
        var s = e.UploadedFile.GetStream();
        byte[] imgbyte = new byte[s.Length];
        s.Read(imgbyte, 0, Convert.ToInt32(s.Length));
        string type = e.UploadedFile.Extension;
        if (e.IsValid)
        {
            cmd = new SqlCommand("sp_pdm_shopping_upload", con);
            cmd.CommandType = CommandType.StoredProcedure;
            con.Open();
            cmd.Parameters.Add(new SqlParameter("@sample", SqlDbType.Char, 10));
            SqlParameter contentparameter = null;
            contentparameter = (new SqlParameter("@image", SqlDbType.Image));
            contentparameter.Direction = ParameterDirection.Input;
            cmd.Parameters.Add(contentparameter);
            cmd.Parameters.Add(new SqlParameter("@type", SqlDbType.Char, 10));
            cmd.Parameters["@sample"].Value = txt_code.Text;
            cmd.Parameters["@image"].Value = imgbyte;
            cmd.Parameters["@type"].Value = "INV";
            cmd.ExecuteNonQuery();
            con.Close();
            e.IsValid = false;
            s.Close();
            e.UploadedFile.Delete();
        }
        else
        {
            ErrorMsg.Visible = true;
            this.ErrorMsg.Text = e.UploadedFile.FileName + Environment.NewLine;
        }

    }
    catch
    {

    }
} 
```

# java - 如何创建文件夹和文件？

> ID：10980588
> 
> 赞同：0
> 
> 时间：2012-06-11T12:59:48.557
> 
> 标签：java

如何在文件夹中创建文件夹和“n”个文件，以及如何使用 Java 自动重命名文件夹中的文件？

例如。如果在文件夹下提供了“N”个文件，则必须自动更改文件名。

```
January(folder name)
01-01-2012.txt
""" """""".txt
"""""""""".txt
31-01-2012.txt 
```

实施后

```
January(folder Name)
01012012.txt
"""""""".txt
"""""""".txt
31012012.txt 
```

# jquery - jQuery和JSF集成有意义吗？如果是这样，我需要在什么情况下使用 jQuery 和 JSF 技术？

> ID：10980591
> 
> 赞同：0
> 
> 时间：2012-06-11T13:00:05.013
> 
> 标签：jquery, jsf

我正在练习JSF。好吧，我知道 JSF 是 Web 应用程序开发中的服务器端组件框架。好吧，我很困惑，如果 JSF 提供所有这些 UI 组件来开发基于 Web 的应用程序，那么集成 jQuery 和 JSF 是否有意义？如果是这样，我需要在什么情况下使用 jQuery 和 JSF 技术？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:09:00.427

答案取决于你的目标。JSF 几乎总是与 RichFaces、MyFaces 等框架一起使用。它们通常提供自己的 js api。所以通常不需要jquery。但是，如果您想开发自定义 UI 组件，您可以使用 jquery 来构建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:22:35.057

我在我的组织中使用 WebSphere 7.0。我确实使用 Jquery 和 JSF 来完成一些任务。因为很多这些框架不能很好地与 WebSphere 一起工作。还有很多其他人需要我的管理员永远不会允许的大量定制。界面语言也是阿拉伯语，这使得另一组这些框架对我来说毫无用处。另一个原因是您可能需要它来完成一项特定任务，而该任务不需要您使用这些框架之一重载您的应用程序，因为它们在生命周期中添加了钩子和东西，这可能会影响页面的可伸缩性。但是您必须注意，使用这些框架比使用 jsf 和 jquery 来完成相同的任务要容易得多。
最后，这是你的电话。

# performance - 分支分歧、CUDA 和动力学蒙特卡洛

> ID：10980593
> 
> 赞同：3
> 
> 时间：2012-06-11T13:00:10.327
> 
> 标签：performance, cuda, montecarlo

所以，我有一个代码，它在格子上使用 Kinetic Monte Carlo 来模拟某些东西。我正在使用 CUDA 在我的 GPU 上运行此代码（尽管我相信同样的问题也适用于 OpenCl）。

这意味着我将我的格子分成小的子格子，每个线程都在其中一个上运行。由于我在做 KMC，每个线程都有这个代码：

```
 While(condition == true){
     *Grab a sample u from U[0,1]*
      for(i = 0; i < 100;i++){
         *Do some stuff here to generate A*
          if(A > u){
              *Do more stuff here, which could include updates to global memory*
               break();
           }
      }
   } 
```

A 对于不同的线程是不同的，u 也是不同的，100 只是一个随机数。在代码中，这可能是 1000 甚至 10000。

那么，当一个线程通过 if 的时候，我们不会有分支分歧吗？这会对性能造成多大的影响？我知道答案取决于 if 子句中的代码，但是随着我添加越来越多的线程，这将如何扩展？

任何关于我如何估计性能损失/收益的参考也将受到欢迎。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T15:23:28.300

GPU 以 32 个线程为一组运行线程，称为 warp。分歧只能发生在经线内。因此，如果您能够以这样一种方式安排线程，即`if`条件在整个经纱中以相同的方式评估，那么就不存在分歧。

当 存在分歧时，从概念上讲，GPU 会简单地忽略来自条件为假`if`的线程的结果和内存请求。`if`

因此，假设对特定经纱中的 10 个线程`if`进行评估。`true`虽然在其中`if`，warp 的潜在计算性能从 100% 降低到 10 / 32 * 100 = 31%，因为被禁用的 22 个线程`if`本来可以工作，但现在只是在 warp 中占用空间.

退出 后`if`，禁用的线程将再次启用，warp 以 100% 的潜在计算性能继续进行。

An 的`if-else`行为方式大致相同。当 warp 到达 时`else`，启用的线程`if`变为禁用，而禁用的线程变为启用。

在`for`为 warp 中的每个线程循环不同次数的循环中，线程在其迭代计数达到其设定数量时被禁用，但整个 warp 必须继续循环，直到具有最高迭代计数的线程完成。

在查看潜在的内存吞吐量时，事情有点复杂。如果算法是内存受限的，那么由于扭曲发散可能不会有太多或任何性能损失，因为内存事务的数量可能会减少。如果 warp 中的每个线程都从全局内存中完全不同的位置读取数据（对于 GPU 来说这是一个糟糕的情况），那么每个禁用线程的时间将被节省下来，因为它们的内存事务不必执行。另一方面，如果线程正在从已针对 GPU 访问而优化的数组中读取数据，则多个线程将共享单个事务的结果。在这种情况下，用于禁用线程的值是从内存中读取的，然后与禁用线程可能完成的计算一起丢弃。

所以，现在你可能已经有了足够的了解，可以做出相当好的判断来判断扭曲发散程度会影响你的表现。最坏的情况是warp中只有一个线程处于活动状态。然后您将获得 1/32 = 3.125% 的计算绑定性能潜力。最好的情况是 31/32 = 96.875%。对于`if`完全随机的，你得到 50%。如前所述，内存绑定性能取决于所需内存事务数量的变化。

# c++ - 自定义条件语句？这可能吗？

> ID：10980594
> 
> 赞同：0
> 
> 时间：2012-06-11T13:00:16.250
> 
> 标签：c++, conditional, overloading

是否可以编写自己的条件语句或重载当前的条件语句？（就像 if 短手 - `?`）

我做了一些研究，找不到任何东西。我有一些想法：

```
do
{
   //Run Application
}if(...)//Only If variables are initialised 
```

如果这是可能的，我将如何在 C++ 中这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:07:29.400

```
do
{
   //Run Application
}if(...)//Only If variables are initialised 
```

将转化为

```
if ( condition )
{
   //run application
} 
```

那么为什么不这样做呢？

不可能创建新的运算符，也不可能重载**三元运算符`?:`**。

你可以乱用预处理器，但最终得到的代码比只使用常规的`if`.

```
#define RUNIF(condition, statement) \
if ( condition ) \
{                \
   statement();  \
} 
```

并称之为：

```
RUNIF(condition, RunApplication()) 
```

但就个人而言，我不想在生产代码中看到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:03:22.253

在纯 C++ 中，您只能重载现有的运算符，而不能创建新的运算符。

也就是说，没有什么能阻止您使用预处理器*或*自定义预处理器（就像 Qt 一样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:06:25.263

[您可以在此处](http://en.wikipedia.org/wiki/Operators_in_C_and_C++)找到可重载运算符的列表。所以你可以重载条件如`&&`and `||`（虽然不推荐），但不是`?:`

其他关键字如`do`//不可重载`while`，`if`所以不能写

```
do {
  ...
} if() 
```

以一种可编译的方式（无预处理器宏）

但你可以这样做：

```
if(...) {
  while(true) {
    ...
  }
} 
```

注意：没有重载，只是简单的代码重组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T13:06:16.507

在您放置的地方，`if()`您可以使用`while`并应用条件 - 就像在 plain中一样`if`，例如：

```
do
{
   Object x = getObject(); 
}while(x != null && x.getVal() > 12) 
```

# objective-c - 试图从按钮 xcode 中保存屏幕截图

> ID：10980595
> 
> 赞同：1
> 
> 时间：2012-06-11T13:00:31.217
> 
> 标签：objective-c, ios5, xcode4.3

我试图使用按钮而不是主页按钮/开关事件从我的应用程序中保存屏幕。我使用`self`.

“在“...我的视图控制器”类型的对象上找不到属性窗口

```
- (IBAction)saveto:(id)sender {
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
    UIGraphicsBeginImageContextWithOptions(self.window.bounds.size, NO, [UIScreen mainScreen].scale);
else
    UIGraphicsBeginImageContext(self.window.bounds.size);
[self.window.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
NSData * data = UIImagePNGRepresentation(image);
[data writeToFile:@"my.png" atomically:YES]; 
```

（图像视图在 .h 中声明为出口）

我知道我在这里遗漏了一些基本的东西，但无法弄清楚，任何帮助都得到了极大的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:15:25.133

`self.view.window`我很确定。:)

```
- (IBAction)saveto:(id)sender {
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
        UIGraphicsBeginImageContextWithOptions(self.view.window.bounds.size, NO, [UIScreen mainScreen].scale);
    else
        UIGraphicsBeginImageContext(self.window.bounds.size);
    [self.view.window.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSData * data = UIImagePNGRepresentation(image);
    [data writeToFile:@"my.png" atomically:YES];
} 
```

Window 是 UIView 上的一个属性。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

> window 接收者的窗口对象，如果没有，则为 nil。（只读）
> 
> @property(nonatomic, readonly) UIWindow *window Discussion 如果视图尚未添加到窗口，则此属性为零。
> 
> 可用性 适用于 iOS 2.0 及更高版本。在 UIView.h 中声明

UIViewController 没有窗口属性。但是它有一个 view 属性，它确实有一个 window 属性:)

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html)

# c# - Visual Studio 之外的 C# REPL

> ID：10980596
> 
> 赞同：38
> 
> 时间：2012-06-11T13:00:30.893
> 
> 标签：c#, .net, visual-studio, roslyn, fsi

F# 有一个 REPL（读取-评估-打印循环）F# Interactive `C:\Program Files (x86)\Microsoft F#\v4.0\Fsi.exe`，.

我知道 C# 现在有自己的交互式 REPL，与[Roslyn](http://msdn.microsoft.com/en-us/vstudio/hh543923)一起发布。如何在 Visual Studio 外部打开？在哪里`csi.exe`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-12-01T23:33:14.597

*C# Interactive*窗口和*csi.exe* REPL 已添加到**Visual Studio 2015 Update 1**（强调我的）：

> # 介绍互动
> 
> 交互式窗口又回来了！C# 交互窗口在 Visual Studio 2015 更新 1 中返回，同时还提供了一些其他交互功能：
> 
> *   **C# 交互式**. C# 交互式窗口本质上是一个读取-评估-打印-循环 (REPL)，它允许您使用 .NET 技术进行游戏和探索，同时利用 IntelliSense、语法着色等编辑器功能。了解有关如何使用 C# 的更多信息在第 9 频道进行互动或阅读我们的初学者演练。
>     
>     
> *   ***CSI** _ 如果您不想打开 Visual Studio 来玩弄 C# 或运行脚本文件，可以从开发人员命令提示符访问交互式引擎。键入* `csi /path/myScript.csx` *以执行脚本文件，或仅键入* `csi` *以放入命令行 REPL。*
>     
>     
> *   **脚本 API**。脚本 API 使您能够在主机创建的执行环境中执行 C# 代码片段。通过查看我们的代码示例，您可以了解有关如何创建自己的 C# 脚本引擎的更多信息。

请参阅[.NET 托管语言的 Visual Studio 2015 Update 1 中的新增功能](http://blogs.msdn.com/b/dotnet/archive/2015/11/30/what-s-new-in-visual-studio-update-1-for-net-managed-languages.aspx)。

* * *

[https://www.visualstudio.com/en-us/news/vs2015-update1-vs.aspx](https://www.visualstudio.com/en-us/news/vs2015-update1-vs.aspx)

```
>csi
Microsoft (R) Visual C# Interactive Compiler version 1.1.0.51109
Copyright (C) Microsoft Corporation. All rights reserved.

Type "#help" for more information.
> #help
Keyboard shortcuts:
  Enter         If the current submission appears to be complete, evaluate it.  Otherwise, insert a new line.
  Escape        Clear the current submission.
  UpArrow       Replace the current submission with a previous submission.
  DownArrow     Replace the current submission with a subsequent submission (after having previously navigated backwards).
REPL commands:
  #help         Display help on available commands and key bindings.
Script directives:
  #r            Add a metadata reference to specified assembly and all its dependencies, e.g. #r "myLib.dll".
  #load         Load specified script file and execute it, e.g. #load "myScript.csx".
>
> Enumerable.Range(10)
(1,12): error CS7036: There is no argument given that corresponds to the required formal parameter 'count' of 'Enumerable.Range(int, int)'
> Enumerable.Range(1, 10)
RangeIterator { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 } 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-03T03:49:15.463

我创建了您所要求的内容，即在 VisualStudio 之外运行的基于 Roslyn 的 REPL。

您可以从[PoC - Roslyn C# ScriptEngine Execute v1.0.exe](https://dl.dropbox.com/u/81532342/O2Platform%20Tools/Roslyn/PoC%20-%20Roslyn%20C%23%20ScriptEngine%20Execute%20v1.0.exe)下载它，它是一个独立的 exe，包含所有 Roslyn 程序集作为嵌入式资源。另请参阅[视频：使用 O2 的基于 Roslyn 的 C# REPL 脚本环境](http://diniscruz.blogspot.co.uk/2012/06/video-using-o2s-roslyn-based-c-repl.html)

请注意，我为[O2 平台开发了一个更强大的 C# REPL，您可以从](http://diniscruz.blogspot.co.uk/p/owasp-o2-platform.html)[C# REPL Script Environment](http://diniscruz.blogspot.co.uk/p/c-repl-script-environment.html)查看和下载它

关于 Roslyn 的主题，这里有一些我创建的[其他独立工具](http://diniscruz.blogspot.co.uk/2012/08/multiple-roslyn-based-tools-all-running.html)：

*   [Util - 查看 Roslyn AST Graph v1.0.exe](https://dl.dropbox.com/u/81532342/O2Platform%20Tools/Roslyn/Util%20-%20View%20Roslyn%20AST%20Graph%20v1.0.exe) - 很高兴看到 Roslyn 创建的 AST 树
*   [Util - Exe Creator（使用 Roslyn Compiler v1.0.exe](https://dl.dropbox.com/u/81532342/O2Platform%20Tools/Roslyn/Util%20-%20Exe%20Creator%20%28using%20Roslyn%20Compiler%20v1.0.exe) - 创建独立 exe 的好工具
*   [Util - Roslyn - 编译解决方案并查看错误 v1.0.exe](https://dl.dropbox.com/u/81532342/O2Platform%20Tools/Roslyn/Util%20-%20Roslyn%20-%20Compile%20Solution%20and%20view%20errors%20v1.0.exe) - 编译整个解决方案
*   [Util - Roslyn - OnSave 编译解决方案（使用 REPL）v1.0.exe](https://dl.dropbox.com/u/81532342/O2Platform%20Tools/Roslyn/Util%20-%20Roslyn%20-%20OnSave%20Compile%20Solution%20%28with%20REPL%29%20v1.0.exe) - 为 Roslyn 对象添加 REPL
*   [PoC - InitializerExpressions v1.0.exe 上的 Roslyn 重构](https://dl.dropbox.com/u/81532342/O2Platform%20Tools/Roslyn/PoC%20-%20Roslyn%20refactor%20on%20InitializerExpressions%20v1.0.exe)- 显示重构示例
*   [Util - Roslyn AST Refactoring via REPL Script v1.0.exe](https://dl.dropbox.com/u/81532342/O2Platform%20Tools/Roslyn/Util%20-%20Roslyn%20AST%20Refactoring%20via%20REPL%20Script%20v1.0.exe) - 用于开发重构脚本的 GUI
*   [Util - Roslyn Cat.Net- 编译和扫描解决方案 v1.0.exe](https://dl.dropbox.com/u/81532342/O2Platform%20Tools/Roslyn/Util%20-%20Roslyn%20Cat.Net-%20Compile%20and%20Scan%20Solution%20v1.0.exe) - 显示代码编译和安全扫描的集成（第一次执行此工具时将下载 Cat.NET）

请注意，所有这些工具和 O2 平台都是在开源许可下发布的，所以请随意扩展并使其更好:)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-03-04T14:36:12.990

如果您使用的是 dotnet core，请尝试 dotnet-script。

运行`dotnet tool install --global dotnet-script`安装。然后运行`dotnet-script`得到一个 REPL 风格的命令提示符

```
> Console.WriteLine("Hello world!");
Hello world! 
```

[在这里找到的信息](https://galdin.dev/blog/csharp-scripts-using-dotnet-script/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-11-19T07:57:11.800

scriptcs怎么样：http: [//scriptcs.net/](http://scriptcs.net/)？

有一个 REPL，您甚至可以获得 NuGet 的强大功能。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-11T13:32:35.370

我发现的唯一可执行文件是`C:\Program Files (x86)\Microsoft Codename Roslyn CTP\Binaries\rcsi.exe`，它可以执行`.csx`文件。但它似乎并不真正支持 REPL。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-12-23T14:49:21.437

它可能不是替代品，但我主要使用 RoslynPad 进行快速研究和测试。我也用过 Linqpad。[根据他们的网站https://roslynpad.net/，RoslynPad](https://roslynpad.net/)是“基于 Roslyn 的简单 C# 编辑器” 。你可以编写小脚本，你可以看到变量值，你也可以保存它们。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-07-21T11:36:29.243

Anders Hejlsberg 在这个视频中构建了一个 C# REPL 循环，65 分钟：

[http://channel9.msdn.com/Events/PDC/PDC08/TL16#time=65m00s](http://channel9.msdn.com/Events/PDC/PDC08/TL16#time=65m00s)

这是 Roslyn 的旧版本，但同样的想法也适用（和评估！;）。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-07-01T06:53:19.937

使用 powershell 查找`csi.exe`：

```
PS > Get-ChildItem "C:\Program Files (x86)\" -Recurse | Where-Object Name -CMatch "csi.exe" 
```

下面是我的输出：

```
 Directory: C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\MSBuild\15.0\Bin\Roslyn

Mode                LastWriteTime         Length Name                                                                                                                        
----                -------------         ------ ----                                                                                                                        
-a----        12/9/2018   6:42 PM          15712 csi.exe                                                                                                                     
-a----        12/9/2018   6:42 PM           8482 csi.exe.config                                                                                                              

    Directory: C:\Program Files (x86)\Microsoft Visual Studio\Shared\Packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.0\tools\Roslyn45

Mode                LastWriteTime         Length Name                                                                                                                        
----                -------------         ------ ----                                                                                                                        
-a----        5/24/2018   1:38 PM          13680 csi.exe                                                                                                                     

    Directory: C:\Program Files (x86)\Microsoft Visual Studio\Shared\Packages\Microsoft.CodeDom.Providers.DotNetCompilerPlatform.2.0.0\tools\RoslynLatest

Mode                LastWriteTime         Length Name                                                                                                                        
----                -------------         ------ ----                                                                                                                        
-a----        5/24/2018   1:38 PM          15280 csi.exe                                                                                                                     
-a----        5/24/2018   1:38 PM           8816 csi.exe.config                                                                                                              

    Directory: C:\Program Files (x86)\Microsoft Visual Studio\Shared\Packages\Microsoft.Net.Compilers.1.3.2\tools

Mode                LastWriteTime         Length Name                                                                                                                        
----                -------------         ------ ----                                                                                                                        
-a----        6/27/2016   2:50 PM          13680 csi.exe                                                                                                                     

    Directory: C:\Program Files (x86)\Microsoft Visual Studio\Shared\Packages\Microsoft.Net.Compilers.2.0.1\tools

Mode                LastWriteTime         Length Name                                                                                                                        
----                -------------         ------ ----                                                                                                                        
-a----         3/7/2017  10:56 AM          14192 csi.exe                                                                                                                     
-a----         3/7/2017  10:56 AM           7905 csi.exe.config                                                                                                              

    Directory: C:\Program Files (x86)\Microsoft Visual Studio\Shared\Packages\Microsoft.Net.Compilers.2.1.0\tools

Mode                LastWriteTime         Length Name                                                                                                                        
----                -------------         ------ ----                                                                                                                        
-a----        4/13/2017   3:47 PM          14192 csi.exe                                                                                                                     
-a----        4/13/2017   3:47 PM           8006 csi.exe.config                                                                                                              

    Directory: C:\Program Files (x86)\Microsoft Visual Studio\Shared\Packages\Microsoft.Net.Compilers.2.4.0\tools

Mode                LastWriteTime         Length Name                                                                                                                        
----                -------------         ------ ----                                                                                                                        
-a----        9/21/2017  11:42 PM          15312 csi.exe                                                                                                                     
-a----        9/21/2017  11:42 PM           8816 csi.exe.config                                                                                                              

    Directory: C:\Program Files (x86)\Microsoft Visual Studio\Shared\Packages\Microsoft.Net.Compilers.2.6.1\tools

Mode                LastWriteTime         Length Name                                                                                                                        
----                -------------         ------ ----                                                                                                                        
-a----       12/13/2017  10:09 PM          16296 csi.exe                                                                                                                     
-a----       12/13/2017  10:09 PM           8816 csi.exe.config 
```

# c - MongoDB、ZeroMQ 和 C

> ID：10980597
> 
> 赞同：2
> 
> 时间：2012-06-11T13:00:37.247
> 
> 标签：c, mongodb, zeromq, mongodb-c

我有一个很大的问题，

我有一些使用 ZeroMQ 和 C 的代码，以及另一个使用 MongoDB 和 C 的代码，现在我必须合并这些代码，但是当我尝试使用此命令进行编译时：

```
gcc -static -lzmq -o logg logger.c /home/lis/mongo-c-driver/libmongoc.a 
```

我得到了这个错误堆栈：

```
In file included from /usr/local/include/mongo.h:24:0,
                 from write_log.h:13,
                 from get_by_log_code.h:6,
                 from logger.c:23:
/usr/local/include/bson.h:63:2: error: #error Must compile with c99 or define MONGO_HAVE_STDINT, MONGO_HAVE_UNISTD, MONGO_USE__INT64, or MONGO_USE_LONG_INT.
In file included from get_by_log_code.h:6:0,
                 from logger.c:23:
write_log.h: In function ‘write_log’:
write_log.h:70:2: error: incompatible type for argument 1 of ‘mongo_insert’
/usr/local/include/mongo.h:369:18: note: expected ‘struct mongo *’ but argument is of type ‘mongo’
write_log.h:70:2: error: too few arguments to function ‘mongo_insert’
/usr/local/include/mongo.h:369:18: note: declared here 
```

当我安装 Mongo-C-Driver 时：

我使用 make STD=c89 来解决 MongoDB-C-api 和 ZeroMQ-C-api 之间的冲突，在我的 logger.c 文件中我定义了错误堆栈要求的变量，但它不起作用.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:03:19.290

你应该使用 --std=c99

c89 也是一个有效的旧标准，这就是您收到错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T23:39:37.340

你不必使用`--std=c99`

如果您正在为 c++（或 c++11）编译，您可以在包含之前定义它：

```
#define MONGO_HAVE_STDINT
#include "mongo.h" 
```

这告诉`#include <stdint.h>`系统上存在的mongo c驱动程序并将正确定义`int64_t`

或者，您可以使用：

```
#define MONGO_HAVE_UNISTD
#include "mongo.h" 
```

如果您使用的是`#include <unistd.h>`。

有关更多详细信息，请参阅[https://github.com/mongodb/mongo-c-driver/blob/master/src/bson.h#L52](https://github.com/mongodb/mongo-c-driver/blob/master/src/bson.h#L52)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-23T14:45:25.300

错误是：

/usr/local/include/bson.h:63:2: error: #error 必须使用 c99 编译或定义 MONGO_HAVE_STDINT、MONGO_HAVE_UNISTD、MONGO_USE__INT64 或 MONGO_USE_LONG_INT。

所以在头文件 bson.h 从第 52 行到第 66 行注释

看起来像 typedef long long int ..

# android - Android 库项目：重构和导航

> ID：10980599
> 
> 赞同：4
> 
> 时间：2012-06-11T13:00:45.370
> 
> 标签：android, jar, refactoring, library-project

目前（随着时间的推移发生了很大变化）Android 库项目成为引用项目中的 jar 文件。这种方法存在一些问题：即重构和代码导航。

有没有办法重构考虑更改依赖项目的库（例如重命名）？现在库项目中的重命名不会传播到依赖项目。对于每个项目，我目前必须手动调整它们。（解决方法：从依赖项目中删除库引用并将库项目添加为纯 Java 项目引用。）

此外，从依赖项目导航到库将我带到库项目 jar 中的反编译类，而不是源。我的 Eclipse 设置是混乱的还是只是当前的 Android 库方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T17:31:50.453

有一种**肮脏的方法**可以实现这一目标。您可以像往常一样将库添加到您的依赖项目，但也可以作为项目属性的“Java 构建路径”中的项目。

在 Order 和 Export 中，库必须位于 Android 依赖项之上。

# android - iOS 入门 - 适用于 Android 开发人员？

> ID：10980607
> 
> 赞同：18
> 
> 时间：2012-06-11T13:01:15.463
> 
> 标签：android, ios

如果您是 Android 开发人员，有没有什么好的资源可以帮助您开始 iOS 开发？我记得微软为 Android 开发人员开设了课程，让他们跳到 WP。我正在为 iOS 寻找类似的东西（最好是在线形式）。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T13:11:19.477

[http://www.RayWenderlich.com](http://www.RayWenderlich.com)为希望学习一门新语言的初学者、专家和程序员提供了丰富的 iOS 教程。

这篇特别是为那些知道如何编程但想学习 Objective-C 的人编写的。[https://www.raywenderlich.com/21320/objectively-speaking-a-crash-course-in-objective-c-ios6](https://www.raywenderlich.com/21320/objectively-speaking-a-crash-course-in-objective-c-ios6)

祝你好运:) 欢迎来到社区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:03:12.960

任何苹果开发者教程都适合任何进入 iOS 的人。

[https://developer.apple.com/library/ios/navigation/#section=Resource%20Types&topic=Guides](https://developer.apple.com/library/ios/navigation/#section=Resource%20Types&topic=Guides)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-18T15:49:04.723

斯坦福的课程也很不错。我现在正在关注它，我强烈推荐它。

[https://itunes.apple.com/es/course/developing-ios-7-apps-for/id733644550](https://itunes.apple.com/es/course/developing-ios-7-apps-for/id733644550)

更多信息在这里： http: [//www.stanford.edu/class/cs193p](http://www.stanford.edu/class/cs193p)

# asp.net - 出现一般付款处理错误。（结果代码 = -12）

> ID：10980611
> 
> 赞同：1
> 
> 时间：2012-06-11T13:01:35.403
> 
> 标签：asp.net, paypal

我有使用 Paypal payflow pro 支付网关在 asp.net 中开发的网站当我在测试网站上输入测试信用卡号时，我收到此错误。请让我知道如何解决此问题......错误.. **“出现一般付款处理错误。（结果代码 = -12）”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:08:21.833

对于结果代码 12，贝宝说：

```
Declined. Check the credit card number, expiration date, and transaction information to
 make sure they were entered correctly. If this does not resolve the problem, have the
 customer call their card issuing bank to resolve. 
```

我希望你能明白为什么会这样。

# java - 从 Web 应用程序运行小程序时的 java.lang.RuntimePermission

> ID：10980614
> 
> 赞同：4
> 
> 时间：2012-06-11T13:01:46.170
> 
> 标签：java, web-applications, applet, environment-variables, tomcat6

我正在尝试从小程序中读取环境变量，这是我的代码

```
 String env = System.getenv("TWS");
    System.out.println(env);
    Runtime rt = Runtime.getRuntime();
    String s = env + "\\WebStart.bat " ;
    System.out.println(s);
    try {
        Process p = rt.exec(s);
    } catch (Exception e) {
    } 
```

当我通过右键单击并运行从 netbeans 运行代码时，它运行没有问题。

但是当我把它放到一个 jar 文件中时，将它添加到我的 web 应用程序中并尝试使用以下代码从 html 页面运行它

```
<applet code="draw.class" archive='AppletTest.jar'>
   <param name="shape" value="triangle"/>
</applet> 
```

我收到一条错误消息，**提示访问被拒绝，java.lang.RuntimePermission**

我正在使用 tomcat 6 运行这个 Web 应用程序。

我已经阅读了一些指南并将以下条目添加到 tomcat 6 中的 catalina.policy 文件并重新启动了 tomcat

```
permission java.lang.RuntimePermission "accessDeclaredMembers"; 
```

但仍然是同样的警告。有人可以为这个问题提出一个解决方案吗？

--rangana

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:15:01.590

从 netbeans 运行 applet 时，Java 虚拟机在与通过浏览器运行时不同的安全机制下运行它。

通过浏览器下载的未使用安全证书签名的小程序被认为是不受信任的，称为未签名的小程序。在客户端上运行时，未签名的小程序在仅允许一组安全操作的安全沙箱中运行。[您可以使用SecurityManager](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/SecurityManager.html)检查是否向您的小程序授予了特定权限。例如在您的情况下：

```
System.getSecurityManager().checkPermission(new RuntimePermission("accessDeclaredMembers")); 
```

**[您可以在此处](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)**和**[此处](http://java.sun.com/developer/technicalArticles/Security/applets/)**了解有关小程序安全性的更多信息。可以在**[此处](http://www-personal.umich.edu/~lsiden/tutorials/signed-applet/signed-applet.html)**找到有关制作签名小程序的非常好的教程。

# jquery - Google Maps 多标记、信息窗口、输入 XML、Fluster2

> ID：10980616
> 
> 赞同：0
> 
> 时间：2012-06-11T13:01:48.817
> 
> 标签：jquery, google-maps, marker, infowindow

到目前为止，多亏了邓肯，我的大部分问题都得到了解决。但是我想出了一个新问题...看来我必须进一步研究jquery...

我发现了一个有趣的聚类工具。[Fluster2](http://www.fusonic.net/en/blog/2009/12/11/clustering-for-google-maps-v3-with-fluster2/)似乎很有帮助，但没有关于如何使用它的信息......我设法在网上找到的例子都没有，解释如何将 Fluster2 与 jquery 一起使用......

下面是我的代码...

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>My map</title>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript" src="util.js"></script>
<script type="text/javascript">
  google.load("maps", "3",  {other_params : "sensor=false"});
  google.load("jquery", "1.3.2");

  function initialize() {
    var myLatlng = new google.maps.LatLng(39.5, 25.1419);
    var myOptions = {
      zoom: 6,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    jQuery.get("genXML.php", {}, function(data) {
        jQuery(data).find("marker").each(function() {
            var marker = jQuery(this);
            var latlng = new google.maps.LatLng(parseFloat(marker.attr("lat")), parseFloat(marker.attr("lng")));
            var shop_type = parseInt(marker.attr("type"), 10);
            var address = marker.attr("address");
            var magazi = marker.attr("name");
            var city = marker.attr("city");
            var area = marker.attr("area");
            var tk = marker.attr("postal");

            switch(shop_type) {
                case 0: 
                    typos = "Something"; 
                    break;
                case 1: 
                    typos = "Grocery"; 
                    break; 
                case 2: 
                    typos = "Coffee"; 
                    break; 

                // .........

                case 19: 
                    typos = "Bar"; 
                    break; 
                case 20: 
                    typos = "Club"; 
                    break; 
            }

            var markicon = "icons/0.png";
            if (shop_type >= 1 && shop_type <= 20) {
                markicon = "icons/32/" + shop_type + ".png";
            } else { markicon = "icons/0.png"; }

            var contentString = '<div><b style="font-size:14px">' + magazi + '</b><br/><i style="font-size:12px">' + typos + '</i><div style="float:right; margin-right:10px;"><img src="icons/b/' + shop_type + '.png" width="74" height="100" /></div><p style="font-size:12px"><b>Διεύθυνση:</b> ' + address + '<br /><b>Πόλη:</b> ' + city + '<br /><b>Περιοχή:</b> ' + area + '<br /><b>T.K.:</b> ' + tk + '</p></div>';
            infowindow = new google.maps.InfoWindow();

            var marker = new google.maps.Marker({
                position: latlng,
                icon: markicon,
                map: map
            });
            google.maps.event.addListener(marker, "click", function() {         
                infowindow.setContent(contentString);
                infowindow.open(map, this);
            });
        });
    });
}

  google.setOnLoadCallback(initialize);
</script>
</head>
<body>
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html> 
```

XML 文件具有以下结构：

```
<markers>
    <marker name="Spot name 1" city="Fanari" area="Rodopi" address="Fanari" postal="67063" type="0" lat="40.96065055467095" lng="25.130796432495117"/>
    <marker name="Spot name 2" city="Fanari" area="Rodopi" address="Fanari" postal="67063" type="0" lat="40.96065055467095" lng="25.192596532495117"/>
</markers> 
```

那么有人可以帮我解决这个问题吗？任何帮助、想法或指南将不胜感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:39:06.743

您正在混淆 Google Maps API 2 和 API 3 代码，这是行不通的，因为它们彼此不兼容。

例如这是 API 3 代码：

```
 var marker = new google.maps.Marker({
            position: latlng,
            icon: markicon,
            map: map
        }); 
```

但这是 API 2 代码：

```
var markicon = new GIcon(G_DEFAULT_ICON); 
```

你绝对应该在 API 3 中做所有事情，因为 API 2 已经被弃用了一段时间。

话虽如此，您需要在获取 XML 数据的地方移动围绕要使用哪个图标的逻辑，然后创建每个标记。像这样的东西：

```
jQuery.get("genXML.php", {}, function(data) {
    jQuery(data).find("marker").each(function() {
        var marker = jQuery(this);
        var latlng = new google.maps.LatLng(parseFloat(marker.attr("lat")), parseFloat(marker.attr("lng")));

        var shop_type = parseInt(marker.attr("type"), 10);
        var markicon = "icons/0.png";

        if (shop_type >= 1 && shop_type <= 20) {
            markicon = "icons/" & shop_type & ".png";
        }

        var marker = new google.maps.Marker({
            position: latlng,
            icon: markicon,
            map: map
        });
    });
}); 
```

# objective-c - 使用 NSPredicate 过滤基于多个键（不是键的值）

> ID：10980618
> 
> 赞同：10
> 
> 时间：2012-06-11T13:01:52.193
> 
> 标签：objective-c, cocoa, nsarray, nspredicate

我有以下包含 NSDictionary(s) 的 NSArray：

```
NSArray *data = [[NSArray alloc] initWithObjects:
                 [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:1], @"bill", [NSNumber numberWithInt:2], @"joe", nil],
                 [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:3], @"bill", [NSNumber numberWithInt:4], @"joe", [NSNumber numberWithInt:5], @"jenny", nil],
                 [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:6], @"joe", [NSNumber numberWithInt:1], @"jenny", nil],
                 nil]; 
```

我想创建一个过滤的 NSArray，它只包含 NSDictionary 使用 NSPredicate 匹配多个“键”的对象。

例如：

*   过滤数组以仅包含具有键“bill”和“joe”的 NSDictionary 对象[期望的结果：新的 NSArray 将包含*前*两个 NSDictionary 对象]
*   过滤数组以仅包含键为“joe”和“jenny”的 NSDictionary 对象[期望结果：新的 NSArray 将包含*最后*两个 NSDictionary 对象]

任何人都可以解释 NSPredicate 的格式来实现这一点吗？

编辑：我可以使用以下方法实现与所需 NSPredicate 类似的结果：

```
NSMutableArray *filteredSet = [[NSMutableArray alloc] initWithCapacity:[data count]];
NSString *keySearch1 = [NSString stringWithString:@"bill"];
NSString *keySearch2 = [NSString stringWithString:@"joe"];

for (NSDictionary *currentDict in data){
    // objectForKey will return nil if a key doesn't exists.
    if ([currentDict objectForKey:keySearch1] && [currentDict objectForKey:keySearch2]){
        [filteredSet addObject:currentDict];
    }
}

NSLog(@"filteredSet: %@", filteredSet); 
```

我想象 NSPredicate 如果存在会更优雅？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-11T13:59:40.090

我知道的唯一方法是结合两个条件，例如“'value1' IN list AND 'value2' IN list”

self.@allKeys 应该返回字典的所有键（self 是数组中的每个字典）。如果您不使用前缀 @ 编写它，那么字典将只查找“allKeys”而不是方法“- (NSArray*) allKeys”的键

编码：

```
NSArray* billAndJoe = [data filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"%@ IN self.@allKeys AND %@ IN self.@allKeys" , @"bill",@"joe" ]];

NSArray* joeAndJenny = [data filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"%@ IN self.@allKeys AND %@ IN self.@allKeys" , @"joe",@"jenny" ]] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T13:59:39.917

由于如果您要求一个不存在的键的值，字典只会返回`nil`，因此指定该值应该是非零就足够了。如下格式应涵盖您的第一种情况：

```
[NSPredicate predicateWithFormat: @"%K != nil AND %K != nil", @"bill", @"joe"] 
```

第二种情况，“joe”和“jenny”当然遵循类似的模式。

# c# - Linq-to-SQL 中的 SubmitChanges 和实体框架中的 SaveChanges 有什么技术区别？

> ID：10980619
> 
> 赞同：21
> 
> 时间：2012-06-11T13:01:52.973
> 
> 标签：c#, .net, entity-framework

`SubmitChanges`Linq-to-SQL 和`SaveChanges`实体框架之间的技术区别是什么？

我们知道`SubmitChanges`是类的概念，而是`DataContext`类`SaveChanges`的方法`ObjectContext`。

还有其他区别吗？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-11T13:04:07.250

来自 MSDN：

**SaveChanges**在事务中运行。如果任何脏 ObjectStateEntry 对象无法持久保存，SaveChanges 将回滚该事务并引发异常

**SubmitChanges**启动一个事务，如果在 SubmitChanges 执行时发生异常，它将回滚。但是，这不会回滚内存中的更改或由 DataContext 跟踪；这些更改将需要手动回滚。如果要丢弃内存中的更改，您可以从 DataContext 的新实例开始。

# jquery - 用于自动完成的 cacheLength 选项 - jQuery 1.4.2 和 1.8 (UI)

> ID：10980622
> 
> 赞同：0
> 
> 时间：2012-06-11T13:02:08.327
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我正在使用远程服务器的自动完成功能。以下代码适用于我，但我不理解选项延迟、启用和缓存长度。特别是我需要知道是什么`cacheLenght`，以及如何验证结果是否被缓存。我正在使用以下库：

```
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/black-tie/jquery-ui.css" type="text/css" />
  <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
  <script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js'></script>

$("#boxId").autocomplete({
  source:<url>,
  minLength:4,
  delay:1000,
  enable:true,
  cacheLength:1
}); 
```

我需要使用缓存，因为我不想发送重复的请求。

# jakarta-ee - Glassfish 连接池在重新启动服务器后不起作用

> ID：10980627
> 
> 赞同：0
> 
> 时间：2012-06-11T13:02:16.220
> 
> 标签：jakarta-ee, jpa-2.0, eclipselink, glassfish-3, connection-pooling

**问题改变了**

我在 Glassfish 3.1 中有一个连接池来连接到 SqlServer 2008 Express，这个池工作正常，但是当 Glassfish 重新启动时，连接池无法 ping 并停止工作。要再次工作，我转到池配置-> 附加属性并更改主机名（例如 localhost 为 127.0.0.1），如您在此屏幕中所见。![附加属性](../Images/fe73b49fa78ba4c5e2c678b697993bc8.png)

我注意到这个问题只是在服务器重新启动之前部署我的应用程序时发生......如果我的应用程序没有部署并且我重新启动服务器，那么当我尝试 ping 池时不会出现问题。查看日志文件，我可以在部署时看到这些警告：

```
[#|2012-06-22T17:24:48.979-0300|WARNING|null|null|_ThreadID=1;_ThreadName=Thread-2;|Record begin marker is not a proper value so using default.|#]
[#|2012-06-22T17:24:48.979-0300|WARNING|null|null|_ThreadID=1;_ThreadName=Thread-2;|Record end marker is not a proper value so using default.|#]
[#|2012-06-22T17:24:48.979-0300|WARNING|null|null|_ThreadID=1;_ThreadName=Thread-2;|Log Format field separator is not a character so using default.|#]
[#|2012-06-22T17:25:20.080-0300|WARNING|glassfish3.1.1|org.eclipse.persistence.session.file:/home/hudson/projetos/ERP-HM/modulos-web/erp-web/target/erp-web-0.1.0/WEB-INF/lib/persistencia-erp-0.1.0.jar_erpPU.ejb_or_metadata|_ThreadID=17;_ThreadName=Thread-2;|You have specified multiple ids for the entity class [com.hrgi.persistencia.erp.entidades.Composicao] without specifying an @IdClass. By doing this you may lose the ability to find by identity, distributed cache support etc. Note: You may however use entity manager find operations by passing a list of primary key fields. Else, you will have to use JPQL queries to read your entities. For other id options see @PrimaryKey.|#]
[#|2012-06-22T17:25:41.769-0300|WARNING|glassfish3.1.1|org.springframework.beans.GenericTypeAwarePropertyDescriptor|_ThreadID=17;_ThreadName=Thread-2;|Invalid JavaBean property 'armazenador' being accessed! Ambiguous write methods found next to actually used [public void com.hrgi.persistencia.nfe.controladores.ControladorArmazenamentoEmitenteNFe.setArmazenador(com.hrgi.persistencia.nfe.dao.interfaces.IEmitenteDao)]: [public void com.hrgi.persistencia.controladores.ControladorArmazenamento.setArmazenador(com.hrgi.persistencia.dao.IArmazenadorDao)]|#]
[#|2012-06-22T17:25:49.734-0300|WARNING|glassfish3.1.1|org.eclipse.persistence.session.file:/home/hudson/projetos/ERP-HM/modulos-web/erp-web/target/erp-web-0.1.0/WEB-INF/lib/persistencia-erp-0.1.0.jar_erpPU.server|_ThreadID=17;_ThreadName=Thread-2;|Multiple [2] JMX MBeanServer instances exist, we will use the server at index [0] : [com.sun.enterprise.v3.admin.DynamicInterceptor@2ed0005e].|#]
[#|2012-06-22T17:25:49.737-0300|WARNING|glassfish3.1.1|org.eclipse.persistence.session.file:/home/hudson/projetos/ERP-HM/modulos-web/erp-web/target/erp-web-0.1.0/WEB-INF/lib/persistencia-erp-0.1.0.jar_erpPU.server|_ThreadID=17;_ThreadName=Thread-2;|JMX MBeanServer in use: [com.sun.enterprise.v3.admin.DynamicInterceptor@2ed0005e] from index [0] |#]
[#|2012-06-22T17:25:49.740-0300|WARNING|glassfish3.1.1|org.eclipse.persistence.session.file:/home/hudson/projetos/ERP-HM/modulos-web/erp-web/target/erp-web-0.1.0/WEB-INF/lib/persistencia-erp-0.1.0.jar_erpPU.server|_ThreadID=17;_ThreadName=Thread-2;|JMX MBeanServer in use: [com.sun.jmx.mbeanserver.JmxMBeanServer@e40e825] from index [1] |#]
[#|2012-06-22T17:25:52.457-0300|INFO|glassfish3.1.1|org.apache.myfaces.webapp.WebConfigParamsLogger|_ThreadID=17;_ThreadName=Thread-2;|No context init parameter 'org.apache.myfaces.ERROR_HANDLER' found.|#]
[#|2012-06-22T17:25:52.474-0300|INFO|glassfish3.1.1|org.apache.myfaces.webapp.WebConfigParamsLogger|_ThreadID=17;_ThreadName=Thread-2;|No context init parameter 'org.apache.myfaces.ERROR_TEMPLATE_RESOURCE' found, using default value 'META-INF/rsc/myfaces-dev-error.xml'.|#] 
```

我抑制了一个 javax.mail.MessagingException，因为它发生在没有设置密码来连接到邮件服务器时......

我的应用程序中是否有问题导致此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:20:18.457

嗯，那是多余的……

我会先检查 C:\Windows\System32\drivers\etc\hosts

确保 localhost 的映射没有损坏...

```
127.0.0.1       localhost
::1             localhost 
```

无论哪种方式，这似乎都是名称解析的问题，无论是主机文件还是 DNS 服务器。

如果有更多可用信息，您能否检查一下并提供更多信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:48:24.600

解决了，问题出在jndi dataSource中...我只是删除了jndi dataSource并在应用程序中使用了本地数据源。

# sql-server - SQL Server BCP 工具

> ID：10980628
> 
> 赞同：2
> 
> 时间：2012-06-11T13:02:18.147
> 
> 标签：sql-server

我正在尝试以这种方式从 SQL Server 的 EXPORTED Dat 文件中导入数据：

```
bcp "SELECT FieldName FROM [BaseName].[dbo].[TableName] where xxxxxx=16" 
    queryout Message_out.dat -n -Uusername -Sservername 
```

当我尝试像这样将 dat 导入到 sql server 时

```
bcp basename.dbo.tablename in "path\to\datfile.dat" -c -T 
```

我得到错误：

> 错误 = [Microsoft][SQL Server Native Client 10.0]在 BCP 数据文件中遇到意外的 EOF

问候，格里戈尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T15:49:55.533

尝试为您的文件明确指示字段和行终止符，例如，如果您的文件是逗号分隔的并且每一行都在一个新行中：

```
bcp basename.dbo.tablename in "path\to\datfile.dat" -c -T -r\n -t, 
```

如果您的文件格式有任何其他特殊性，请使用这些选项来帮助 bcp 了解您的文件格式。[msdn](http://msdn.microsoft.com/en-us/library/ms162802.aspx)上提供了详细的文档。

我看到这个问题很老，但也许它会在未来帮助某人......

# sap-ase - 在 sybase 12.5 中，我可以使用一些 SQL 来获取第 N 到第 M 行吗？

> ID：10980631
> 
> 赞同：1
> 
> 时间：2012-06-11T13:02:25.273
> 
> 标签：sap-ase

在 sybase 12.5（ASE，而不是 Sql Anywhere）中，我可以使用一些（ANSI）SQL 来获取第 N 到第 M 行吗？

否则，指向非 ANSI 方式的指针会有所帮助，我找不到它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:10:20.500

一种可能的解决方案：

```
select rownum=identity(10), t.* into #temp from tablename t

select * from #temp where rownum between 5 and 10

drop table #temp 
```

将`5`和替换`10`为第 N 和 Mth 值。

# sql - 从 ORACLE 数据库中选择记录

> ID：10980634
> 
> 赞同：2
> 
> 时间：2012-06-11T13:02:31.063
> 
> 标签：sql, oracle

我想使用这种类型的查询从数据库中提取“最后”插入的记录

```
SELECT A.IDOC_NUM, A.SEG_NUM
FROM  AGR3PL_LINE A, AGR3PL_IDOC B
WHERE A.IDOC_NUM(+) = B.IDOC_NUM
AND B.IDOC_NUM = '457154' AND B.CREATION_DATE = (SELECT MAX(B.CREATION_DATE) FROM AGR3PL_IDOC B)
ORDER BY A.SEG_NUM DESC; 
```

结果是这样的：

```
IDOC_NUM SEG_NUM
457154     9
457154     8
457154     7
457154     6
457154     5
457154     4
457154     3
457154     2
457154     10
457154     1 
```

这是正确的，但是条目 10 是最后输入的，但是正如您所看到的格式结果不好，应该是 10,9,8...，可能是数据库或其他问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:04:44.547

好吧，SEG_NUM 存储为“字符串”类型（VARCHAR2 或其他）。

将列类型设置为NUMBER，排序就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:04:49.697

可能`SEG_NUM`是文本类型（例如`VARCHAR`），因此它不像数字那样排序。

您可以更改此列的类型（这是最好的解决方案，因为如果它是数字，它应该具有数字类型）或者您可以在执行期间转换此列类型（它会降低性能）：

```
SELECT A.IDOC_NUM, A.SEG_NUM 
FROM  AGR3PL_LINE A, AGR3PL_IDOC B 
WHERE A.IDOC_NUM(+) = B.IDOC_NUM 
AND B.IDOC_NUM = '457154' AND B.CREATION_DATE = (SELECT MAX(B.CREATION_DATE) FROM AGR3PL_IDOC B) 
ORDER BY TO_NUMBER(A.SEG_NUM) DESC; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T13:07:20.700

```
ORDER BY TO_NUMBER(A.SEG_NUM) DESC; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T13:05:54.873

在你的情况下，问题似乎是 SEG_NUM 是 varchar。所以它对待 10 比 2 低。

这样做——

```
ORDER BY to_number(A.SEG_NUM) DESC 
```

# c# - 预留实例模式下用于 Azure 网站的新 Azure 分布式缓存

> ID：10980643
> 
> 赞同：10
> 
> 时间：2012-06-11T13:03:11.217
> 
> 标签：c#, asp.net, azure, azure-web-app-service

Windows Azure 的其他出色新功能（6 月 7 日宣布）似乎缺少的东西是能够为保留实例模式下的网站集群的保留实例定义分布式缓存。

到目前为止，似乎只能为独立的 webroles 或工作角色创建分布式缓存。有谁知道解决方法或知道这是否即将发生？

我问这个的原因是因为它迫使我为缓存创建一个专门的工作角色，而且由于我受到成本的限制，我无法负担另外三个仅用于缓存的实例。这给我留下了一个不能容错的缓存服务，而实际上我的三个托管网站的 Webroles 将是 a) 容错的，b) 可以为分布式缓存提供足够的内存，这样我就可以获得更大的缓存而不需要一个点与单个缓存工作者角色一样失败。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T13:02:51.907

目前，Windows Azure 缓存（预览版）不支持此方案。感谢您的反馈。我将把它交给我们团队中的适当人员，以便在未来的版本中考虑相同的内容。

正如 Jason 和 Win 所提到的，现在您可以使用 Windows Azure 共享缓存。虽然你是对的，它的大小是有限的，并且有一个配额系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:08:35.787

以前称为应用程序结构缓存，我认为这可以满足您的需求吗？

[http://msdn.microsoft.com/en-us/library/windowsazure/hh914133.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh914133.aspx)

[http://msdn.microsoft.com/en-us/magazine/gg983488.aspx](http://msdn.microsoft.com/en-us/magazine/gg983488.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T16:17:45.023

您确定可以在保留模式下为 Windows Azure 网站创建专用缓存。到目前为止，您可能无法找到如何在 Windows Azure June SDK (1.7) 中创建它，但是如果真的想这样做，您需要手动完成。

我对此进行了一些讨论，经过一番挖掘后，我发现可以通过首先了解 Windows Azure Web 角色中的专用缓存并将引用和配置迁移到您的 ASP.NET 网站来完成。您可以按照以下步骤自行尝试：

1.  创建具有专用缓存的 Web 角色
2.  了解用于 Web 角色中的专用缓存的引用和配置设置
3.  现在创建您的 ASP.NET 网站并将专用缓存相关设置和引用迁移到您的 Windows Azure 网站

# haskell - Yesod/persistent 中的 SQL 视图

> ID：10980650
> 
> 赞同：5
> 
> 时间：2012-06-11T13:03:31.710
> 
> 标签：haskell, persistent, yesod, sql-view

在[http://www.yesodweb.com/book/persistent](http://www.yesodweb.com/book/persistent)中没有提到 SQL 视图。

我（甚至在命令式语言中）一直非常喜欢不可变的数据库模式设计。即只有 INSERTs 和 SELECTs - 不使用 UPDATEs 和 DELETEs。

这具有保留所有历史记录的优点，但代价是使当前“状态”成为数据库中历史记录的相对昂贵的纯函数。

例如，没有'user'表，只有'user_created'、'user_password_updated'和'user_deleted'表，它们统一在一个'user' SQL VIEW中，显示用户的当前状态。

我应该如何在 Persistent 中使用 VIEW？我应该完全使用 Persistent - 它（对于 Haskell 具有讽刺意味）是否过于专注于我的用例的可变数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-20T14:05:45.963

自从提出这个问题以来已经有很长时间了，但我认为值得回应，因为七年后答案没有改变，我真的很喜欢你关于保留旧版本的表格并通过视图阅读它们的想法！这种方法的一个缺点是使用 Template Haskell`persistent` 会大大减慢编译时间。有一次，我在 Template Haskell 中有一个包含大约 50 个表的数据库， `persistent`如果它被更改，编译需要半个多小时。

Yesod 的[持久化](http://hackage.haskell.org/package/persistent)不支持 SQL 视图，我怀疑它永远不会支持，因为它打算与数据库无关。目前它看起来支持 CouchDB、MongoDB、MySQL、PostgreSQL、Redis 和 SQLite。并非所有这些数据库都支持 SQL 样式视图，因此很难对所有这些数据库进行抽象。

`persistent`擅长的地方在于提供一种简单的方法来创建一组在不同数据库之间进行序列化的 Haskell 类型。它提供了类型类实例和函数来进行单表查询，并且这些工作非常好。如果您想在您正在与之交互的 SQL 数据库上执行连接查询`persistent`，那么您可以使用[esqueleto](https://hackage.haskell.org/package/esqueleto)，这是一种用于 SQL 连接查询的类型安全的 EDSL。

至于在 Haskell 中处理 SQL 视图，我还没有遇到任何工具。您可以使用which will work 但更难维护，或者您可以围绕 Haskell DB 接口（如[postgresql-simple](https://hackage.haskell.org/package/postgresql-simple)`rawQuery` ）构建自己的工具，这就是它的作用。事实上，您甚至可以从 您正在使用的任何数据库的源代码开始，并根据需要构建 SQL View EDSL。在一个闭源项目中，我帮助构建了基于一些想法和类型的自定义 PostgreSQL 接口，但没有使用 Template Haskell，因为编译时间太慢。`persistent``persistent``persistent`

# c# - 序列化到现有文件并删除声明

> ID：10980652
> 
> 赞同：2
> 
> 时间：2012-06-11T13:03:34.123
> 
> 标签：c#, xml, xml-serialization

我有两个类需要在同一个 xml 文件中。类的完成方式意味着我必须单独序列化。我已经设法做到了。我第一次使用 TextWriter。

```
TextWriter writer = new StreamWriter(filepath);
serializer.Serialize(writer, class, ns); 
```

这工作正常。然后我想在文件中添加另一个类。也是如此，但补充说我想追加而不是覆盖。

```
TextWriter writer = new StreamWriter(filepath, true); 
```

这会将新类添加到末尾，但还会添加另一个声明，以便读取我的 XML 文件。

```
<?xml version="1.0" encoding"utf-8"?>
<dog>
...
</dog>
<?xml version="1.0" encoding"utf-8"?>
<cat>
...
</cat> 
```

我尝试使用 XmlWriter 所以我可以使用 XmlWriterSettings 然后为 OmitXmlDeclaration 选择 false 但它会覆盖我序列化的前一个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:06:52.990

您的 XML 需要一个根元素才能成为有效的 XML。

```
<?xml version="1.0" encoding"utf-8"?>
<animals>
    <dog/>
    <cat/>
<animals> 
```

您可以创建一个`List<Animal>`并序列化它。但是如果你没有相同的超类，你可以尝试创建一个这样的类：

```
[Serializable]
public class AnimalCollection : IXmlSerializable
{
    public void WriteXml(XmlWriter writer)
    {
        // Repeat for the Cat
        writer.WriteStartElement("Dog");

        XmlSerializer serializer = new XmlSerializer(TypeOf(Dog));
        using (StringWriter stringWriter = new StringWriter())
            {
                serializer.Serialize(stringWriter, _dog);
                string value = stringWriter.ToString();
                writer.WriteRaw(value);
            }

        writer.WriteEndElement();
    }
} 
```

在中`ReadXml`，`WriteXml`您可以使用通用序列化程序来序列化这些对象，然后使用 XmlWriter 编写一个 startElement。endElement 并包含序列化的动物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:07:00.920

您想要做的不是有效的 XML，因为它只能包含一个根元素。

您可以创建一个类来包含`dog`and`cat`并对其进行序列化。

# box-api - 尝试使用新令牌身份验证删除文件时出现 403 禁止错误

> ID：10980654
> 
> 赞同：0
> 
> 时间：2012-06-11T13:03:42.850
> 
> 标签：box-api

当尝试使用从新的创建令牌身份验证方法检索到的令牌删除文件时，将返回 403 禁止。

这是 Postman 的屏幕截图：[https ://shibumi.box.com/s/769268e4bf726b5ee20a](https://shibumi.box.com/s/769268e4bf726b5ee20a)

候选删除文件位于应用程序的根“沙盒”文件夹中。该文件是通过 v2 api 使用“即时模式”令牌进行授权上传的。

两个屏幕截图，Slide1.jpg 和 Slide2.jpg 位于此链接：[https](https://shibumi.box.com/s/5c0601d18060910410ca) ://shibumi.box.com/s/5c0601d18060910410ca 。

Slide1.jpg 显示了在 Postman 中创建文件的调用。调用中指定的文件夹 ID 用于根“沙盒”文件夹。Authorization 标头中传递的 auth_token 是由先前调用 create-token 创建的“即时模式”令牌。

Slide2.jpg 显示了删除由 Slide1.jpg 中的请求创建的文件的调用。正在使用相同的授权标头，其中包括“即时模式”身份验证令牌。显示 403 响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:18:30.363

看起来您发现了即时模式令牌的错误。我们会研究一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:02:51.337

仅供参考，您发布的链接看起来您已限制访问它，所以我无法查看它。

您确定要删除受限身份验证令牌有权访问的文件夹内的文件吗？“即时模式”令牌在其自己的文件夹中被沙盒化。如果您获取沙盒文件夹（或其中一个子文件夹）之外的文件，那么您的请求将被 4xx 禁止或类似内容拒绝。

请随时发布有关文件夹结构和文件位置的更多详细信息。这可能是一个错误，但只是想确保清楚即时模式令牌应该如何工作。

# android - 将值插入数据库（应用程序被强制关闭）

> ID：10980656
> 
> 赞同：0
> 
> 时间：2012-06-11T13:03:57.550
> 
> 标签：android, database, insert, arraylist

我的申请需要一些帮助。每次我尝试保存放入文本字​​段的值时，我的应用程序都会崩溃（按下按钮“保存”后）。我创建了以下类： 这是我的主要活动类（我有 TabHost 来切换 beetwing 活动 - 在这种情况下是一周中的几天）。

```
 package com.projekt;

import android.app.TabActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.widget.TabHost;

public class MainActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //--- TABHOST ---//
        Resources res = getResources(); // Resource object to get Drawables
        TabHost tabHost = getTabHost();  // The activity TabHost
        TabHost.TabSpec spec;  // Resusable TabSpec for each tab
        Intent intent;  // Reusable Intent for each tab

        // Create an Intent to launch an Activity for the tab (to be reused)
        intent = new Intent().setClass(this, PoniedzialekActivity.class);
        // Initialize a TabSpec for each tab and add it to the TabHost
        spec = tabHost.newTabSpec("Pn").setIndicator("Pn",
                          res.getDrawable(R.drawable.ic_launcher))
                      .setContent(intent);
        tabHost.addTab(spec);

        // Do the same for the other tabs
        intent = new Intent().setClass(this, WtorekActivity.class);
        spec = tabHost.newTabSpec("Wt").setIndicator("Wt",
                          res.getDrawable(R.drawable.ic_launcher))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, SrodaActivity.class);
        spec = tabHost.newTabSpec("Sr").setIndicator("Sr",
                          res.getDrawable(R.drawable.ic_launcher))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, CzwartekActivity.class);
        spec = tabHost.newTabSpec("Cz").setIndicator("Cz",
                          res.getDrawable(R.drawable.ic_launcher))
                      .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, PiatekActivity.class);
        spec = tabHost.newTabSpec("Pt").setIndicator("Pt",
                          res.getDrawable(R.drawable.ic_launcher))
                      .setContent(intent);
        tabHost.addTab(spec);

        tabHost.setCurrentTab(0);
        //--- END OF TABHOST ---//

    }
} 
```

这是我的 DatabaseHelper 类：

```
 package com.projekt;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DatabaseHelper extends SQLiteOpenHelper {
    private static final String DATABASE_NAME = "database.db";
    private static final int DATABASE_VERSION = 1;
    public static final String TAG = "ProjectDatabase";

    final static String PN_TABLE = "Tablica Poniedzialek";
    static final String PN_KEY_ID = "_id";
    final static String PN_KEY_NAME ="name";                         
    final static String PN_KEY_TYPE_OF_SESSION ="type_of_session";
    final static String PN_KEY_START_TIME ="start_time";
    final static String PN_KEY_END_TIME ="end_time";
    final static String PN_KEY_ROOM ="room";

    static final String WT_TABLE = "Tablica Wtorek";
    static final String WT_KEY_ID = "_id";
    static final String WT_KEY_NAME ="name";
    static final String WT_KEY_TYPE_OF_SESSION ="type_of_session";
    static final String WT_KEY_START_TIME ="start_time";
    static final String WT_KEY_END_TIME ="end_time";
    static final String WT_KEY_ROOM ="room";

    static final String SR_TABLE = "Tablica Sroda";
    static final String SR_KEY_ID = "_id";
    static final String SR_KEY_NAME ="name";
    static final String SR_KEY_TYPE_OF_SESSION ="type_of_session";
    static final String SR_KEY_START_TIME ="start_time";
    static final String SR_KEY_END_TIME ="end_time";
    static final String SR_KEY_ROOM ="room";

    static final String CZ_TABLE = "Tablica Czwartek";
    static final String CZ_KEY_ID = "_id";
    static final String CZ_KEY_NAME ="name";
    static final String CZ_KEY_TYPE_OF_SESSION ="type_of_session";
    static final String CZ_KEY_START_TIME ="start_time";
    static final String CZ_KEY_END_TIME ="end_time";
    static final String CZ_KEY_ROOM ="room";

    static final String PT_TABLE = "Tablica Piatek";
    static final String PT_KEY_ID = "_id";
    static final String PT_KEY_NAME ="name";
    static final String PT_KEY_TYPE_OF_SESSION ="type_of_session";
    static final String PT_KEY_START_TIME ="start_time";
    static final String PT_KEY_END_TIME ="end_time";
    static final String PT_KEY_ROOM ="room";

    //--- KONSTRUKTOR ---//
    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }           
    //--- POMOCNIK DO OTWIERANIA/AKTUALIZOWANIA BAZY DANYCH ---//
    private DatabaseHelper dbhelper; 
    //--- ZMIENNA DO PRZECHOWYWANIA INSTANCJI BAZY DANYCH ---//
    @SuppressWarnings("unused")
    private SQLiteDatabase db; 

    //--- TWORZENIE TABLIC ---//
    @Override
    public void onCreate(SQLiteDatabase db) {

        String pn_sql = "CREATE TABLE" + PN_TABLE +
                        "(PN_KEY_ID integer primary key autoincrement, " +
                        "PN_KEY_TYPE_OF_SESSION text, " +
                        "PN_KEY_NAME text, " +
                        "PN_KEY_START_TIME text, " +
                        "PN_KEY_END_TIME text, " +
                        "PN_KEY_ROOM text);";
        String wt_sql = "CREATE TABLE" + WT_TABLE +
                        "(WT_KEY_ID integer primary key autoincrement, " +
                        "WT_KEY_TYPE_OF_SESSION text, " +
                        "WT_KEY_NAME text, " +
                        "WT_KEY_START_TIME text, " +
                        "WT_KEY_END_TIME text, " +
                        "WT_KEY_ROOM text);";
        String sr_sql = "CREATE TABLE" + SR_TABLE +
                        "(SR_KEY_ID integer primary key autoincrement, " +
                        "SR_KEY_TYPE_OF_SESSION text, " +
                        "SR_KEY_NAME text, " +
                        "SR_KEY_START_TIME text, " +
                        "SR_KEY_END_TIME text, " +
                        "SR_KEY_ROOM text);";
        String cz_sql = "CREATE TABLE" + CZ_TABLE +
                        "(CZ_KEY_ID integer primary key autoincrement, " +
                        "CZ_KEY_TYPE_OF_SESSION text, " +
                        "CZ_KEY_NAME text, " +
                        "CZ_KEY_START_TIME text, " +
                        "CZ_KEY_END_TIME text, " +
                        "CZ_KEY_ROOM text);";
        String pt_sql = "CREATE TABLE" + PT_TABLE +
                        "(PT_KEY_ID integer primary key autoincrement, " +
                        "PT_KEY_TYPE_OF_SESSION text, " +
                        "PT_KEY_NAME text, " +
                        "PT_KEY_START_TIME text, " +
                        "PT_KEY_END_TIME text, " +
                        "PT_KEY_ROOM text);";

        db.execSQL(pn_sql);
        db.execSQL(wt_sql);
        db.execSQL(sr_sql);
        db.execSQL(cz_sql);
        db.execSQL(pt_sql);
    }
    @Override
    //--- ON UPGRADE ---//
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w("Projekt", "aktualizacja z wersji " + oldVersion
              + " do wersji " + newVersion + " ( stare dane ulegna usunieciu ) ");
                 db.execSQL("DROP TABLE IF EXISTS" + PN_TABLE);
                 db.execSQL("DROP TABLE IF EXISTS" + WT_TABLE);
                 db.execSQL("DROP TABLE IF EXISTS" + SR_TABLE);
                 db.execSQL("DROP TABLE IF EXISTS" + CZ_TABLE);
                 db.execSQL("DROP TABLE IF EXISTS" + PT_TABLE);
        onCreate(db);
    }
    //--- OPEN DATABASE ---//
    public void open() throws SQLiteException 
    {
        try
        {
            db = dbhelper.getWritableDatabase();
        }
        catch(SQLiteException ex)
        {
            db = dbhelper.getReadableDatabase();
        }
    }
    //--- CLOSE DATABASE ---//
    public void close()
        {
            dbhelper.close();
        }

} //--- KONIEC KLASY DatabaseHelper ---// 
```

这是我的 PoniedzialekActivity （我想在按钮上单击“添加”开始一个新的意图，我在其中向数据库添加值）

```
 package com.projekt;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class PoniedzialekActivity extends Activity implements OnClickListener {

    private Button butPnAdd;    
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_poniedzialek);
        butPnAdd = (Button) findViewById(R.id.butPnAdd);
        butPnAdd.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        if(v.getId()==R.id.butPnAdd){
        Intent i = new Intent(PoniedzialekActivity.this,dodawaniePoniedzialek.class);
        startActivity(i);
        }
    }
} 
```

这是我的 dodawanieActivity，我只是将值添加到数据库中

```
package com.projekt;

import java.util.ArrayList;

import android.app.Activity;
import android.content.ContentValues;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class dodawaniePoniedzialek extends Activity implements OnClickListener{
    private EditText TypeOfSessionEditText;
    private EditText NameEditText;
    private EditText StartTimeEditText;
    private EditText EndTimeEditText;
    private EditText RoomEditText;

    private Button cancelButton;
    private Button saveButton;

    private ArrayList<Poniedzialek> pn_list;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dodawanie);

        TypeOfSessionEditText = (EditText) findViewById(R.id.editText1);
        NameEditText = (EditText) findViewById(R.id.editText2);
        StartTimeEditText = (EditText) findViewById(R.id.editText3);
        EndTimeEditText = (EditText) findViewById(R.id.editText4);
        RoomEditText = (EditText) findViewById(R.id.editText5);

        cancelButton = (Button) findViewById(R.id.cancelButton);
        cancelButton.setOnClickListener(this);
        saveButton = (Button) findViewById(R.id.saveButton);
        saveButton.setOnClickListener(this);

        pn_list = new ArrayList<Poniedzialek>(); // dodano <Poniedzialek>

    }
    @Override
    public void onClick(View v) {
        if(v.getId() == R.id.cancelButton){
        //  finish();
            Intent i = new Intent(dodawaniePoniedzialek.this,MainActivity.class);
            startActivity(i);
        }else if(v.getId() == R.id.saveButton){
            // Pobiera wartosci podane przez uzytkownika
            String providedTypeOfSession = TypeOfSessionEditText.getText().toString();
            String providedName = NameEditText.getText().toString();
            String provideStartTime = StartTimeEditText.getText().toString();
            String provideEndTime = EndTimeEditText.getText().toString();
            String provideRoom = RoomEditText.getText().toString();
            // Przekazuje powyzsze wartosci do metod set w klasie Poniedzialek
            Poniedzialek pn = new Poniedzialek();
            pn.setTypeOfSession(providedTypeOfSession);
            pn.setName(providedName);
            pn.setStartTime(provideStartTime);
            pn.setEndTime(provideEndTime);
            pn.setRoom(provideRoom);
            // Dodaj do listy
            pn_list.add(pn);
            // Dodaj do bazy
            addPnSession(pn);
            // Wyjdz z istniejacego UI i wroc do poprzedniego UI
        //  finish();
            Intent i = new Intent(dodawaniePoniedzialek.this,MainActivity.class);
            startActivity(i);
        } 
    }
    // metoda dodawania do bazy danych
    public void addPnSession(Poniedzialek pn){
        DatabaseHelper dbhelper = new DatabaseHelper(this);
        SQLiteDatabase db = dbhelper.getWritableDatabase();

        ContentValues pn_values = new ContentValues();
        pn_values.put(DatabaseHelper.PN_KEY_TYPE_OF_SESSION,pn.getTypeOfSession());
        pn_values.put(DatabaseHelper.PN_KEY_NAME, pn.getName());
        pn_values.put(DatabaseHelper.PN_KEY_START_TIME,pn.getStartTime());
        pn_values.put(DatabaseHelper.PN_KEY_END_TIME, pn.getEndTime());
        pn_values.put(DatabaseHelper.PN_KEY_ROOM,pn.getRoom());

        db.insert(DatabaseHelper.PN_TABLE, null, pn_values);
        db.close();
    }
} 
```

这是我的 Poniedzialek 类（用于将值添加到数据库中）

```
package com.projekt;

public class Poniedzialek {

    //private variables
    int id;
    String name;
    String start_time;
    String end_time;
    String type_of_session;
    String room;

    // pusty constructor
    public Poniedzialek(){

    }

    // constructor
    public Poniedzialek(int id, String name,String start_time,String end_time,String type_of_session,String room){
        this.id = id;
        this.type_of_session = type_of_session;
        this.name = name;
        this.start_time = start_time;
        this.end_time = end_time;
        this.room = room;
    }

    // getting ID
    public int getID(){
        return this.id;
    }

    // setting id
    public void setID(int id){
        this.id = id;
    }

    // getting name
    public String getName(){
        return this.name;
    }

    // setting name
    public void setName(String name){
        this.name = name;
    }

    // getting start time
    public String getStartTime(){
        return this.start_time;
    }

    // setting start time
    public void setStartTime(String start_time){
        this.start_time = start_time;
    }

    // getting end time
    public String getEndTime(){
        return this.end_time;
    }

    // setting end time
    public void setEndTime(String end_time){
        this.end_time = end_time;
    }

    // getting type of session
    public String getTypeOfSession(){
        return this.type_of_session;
    }

    // setting type of session
    public void setTypeOfSession(String type_of_session){
        this.type_of_session = type_of_session;
    }

    // getting room
    public String getRoom(){
        return this.room;
    }

    // setting room
    public void setRoom(String room){
        this.room = room;
    }

} 
```

顺便说一句，谁能告诉我如何在 PoniedzialekActivity 启动（或开关，不知道）上显示之前放入数据库的值 - 在列表中。

根据要求，这是 Log 所说的：

```
06-11 13:08:49.104: D/PhoneWindow(331): couldn't save which view has focus because the focused view com.android.internal.policy.impl.PhoneWindow$DecorView@405222a8 has no id.
06-11 13:08:50.784: I/Database(331): sqlite returned: error code = 1, msg = near "TABLETablica_Poniedzialek": syntax error
06-11 13:08:50.784: E/Database(331): Failure 1 (near "TABLETablica_Poniedzialek": syntax error) on 0x2da910 when preparing 'CREATE TABLETablica_Poniedzialek(PN_KEY_ID integer primary key autoincrement, PN_KEY_TYPE_OF_SESSION text, PN_KEY_NAME text, PN_KEY_START_TIME text, PN_KEY_END_TIME text, PN_KEY_ROOM text);'.
06-11 13:08:50.804: D/AndroidRuntime(331): Shutting down VM
06-11 13:08:50.804: W/dalvikvm(331): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-11 13:08:50.815: E/AndroidRuntime(331): FATAL EXCEPTION: main
06-11 13:08:50.815: E/AndroidRuntime(331): android.database.sqlite.SQLiteException: near "TABLETablica_Poniedzialek": syntax error: CREATE TABLETablica_Poniedzialek(PN_KEY_ID integer primary key autoincrement, PN_KEY_TYPE_OF_SESSION text, PN_KEY_NAME text, PN_KEY_START_TIME text, PN_KEY_END_TIME text, PN_KEY_ROOM text);
06-11 13:08:50.815: E/AndroidRuntime(331):  at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
06-11 13:08:50.815: E/AndroidRuntime(331):  at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1763)
06-11 13:08:50.815: E/AndroidRuntime(331):  at com.projekt.DatabaseHelper.onCreate(DatabaseHelper.java:117)
06-11 13:08:50.815: E/AndroidRuntime(331):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:126)
06-11 13:08:50.815: E/AndroidRuntime(331):  at com.projekt.dodawaniePoniedzialek.addPnSession(dodawaniePoniedzialek.java:79)
06-11 13:08:50.815: E/AndroidRuntime(331):  at com.projekt.dodawaniePoniedzialek.onClick(dodawaniePoniedzialek.java:69)
06-11 13:08:50.815: E/AndroidRuntime(331):  at android.view.View.performClick(View.java:2485)
06-11 13:08:50.815: E/AndroidRuntime(331):  at android.view.View$PerformClick.run(View.java:9080)
06-11 13:08:50.815: E/AndroidRuntime(331):  at android.os.Handler.handleCallback(Handler.java:587)
06-11 13:08:50.815: E/AndroidRuntime(331):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-11 13:08:50.815: E/AndroidRuntime(331):  at android.os.Looper.loop(Looper.java:123)
06-11 13:08:50.815: E/AndroidRuntime(331):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-11 13:08:50.815: E/AndroidRuntime(331):  at java.lang.reflect.Method.invokeNative(Native Method)
06-11 13:08:50.815: E/AndroidRuntime(331):  at java.lang.reflect.Method.invoke(Method.java:507)
06-11 13:08:50.815: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-11 13:08:50.815: E/AndroidRuntime(331):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-11 13:08:50.815: E/AndroidRuntime(331):  at dalvik.system.NativeStart.main(Native Method) 
```

最后一件事，我无法工作是在我的 PoniedzialekActivity 中显示放入数据库的值，你能告诉我我应该怎么做才能让它工作吗？我陷入了死胡同（这是我想要在 atm 工作的最后一件事）。我试着做这样的事情。请帮忙。

```
package com.projekt;

import java.util.ArrayList;
import java.util.List;

import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;

public class PoniedzialekActivity extends ListActivity implements OnClickListener { // now Extends ListActivity instead of Activity
    /* ADDED */
    private DatabaseHelper dbhelper;
    private SQLiteDatabase db;
    /* DEDDA */
    private Button butPnAdd;    
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_poniedzialek);
        butPnAdd = (Button) findViewById(R.id.butPnAdd);
        butPnAdd.setOnClickListener(this);

        List<Poniedzialek> values = showPn();

        // Use the SimpleCursorAdapter to show the
        // elements in a ListView
        ArrayAdapter<Poniedzialek> pn_adapter = new ArrayAdapter<Poniedzialek>(this,
                android.R.layout.simple_list_item_1, values);
        setListAdapter(pn_adapter);
    }
    /* ADDED */
    public List<Poniedzialek> showPn(){
        List<Poniedzialek> pn_list = new ArrayList<Poniedzialek>();

        Cursor cursor = db.query(DatabaseHelper.PN_TABLE, null, null, null, null, null, null);

        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
            Poniedzialek pn = cursorToPoniedzialek(cursor);
            pn_list.add(pn);
            cursor.moveToNext();
        }
        // Make sure to close the cursor
        cursor.close();
        return pn_list;
    }
    private Poniedzialek cursorToPoniedzialek(Cursor cursor) {
        Poniedzialek pn = new Poniedzialek();
        pn.setID(cursor.getInt(0));
        pn.setStartTime(cursor.getString(1));
        pn.setEndTime(cursor.getString(2));
        pn.setTypeOfSession(cursor.getString(3));
        pn.setName(cursor.getString(4));
        pn.setRoom(cursor.getString(5));
        return pn;
    }
    /* DEDDA */
    @Override
    public void onClick(View v) {
        if(v.getId()==R.id.butPnAdd){
        Intent i = new Intent(PoniedzialekActivity.this,dodawaniePoniedzialek.class);
        startActivity(i);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:11:20.150

您的表创建被搞砸了。您没有使用您设置的常量并且您缺少空格（最后一个是杀死您的程序的那个）。

这：

```
 String pn_sql = "CREATE TABLE" + PN_TABLE + 
                    "(PN_KEY_ID integer primary key autoincrement, " + 
                    "PN_KEY_TYPE_OF_SESSION text, " + 
                    "PN_KEY_NAME text, " + 
                    "PN_KEY_START_TIME text, " + 
                    "PN_KEY_END_TIME text, " + 
                    "PN_KEY_ROOM text);"; 
```

应该是这样的：

```
 String pn_sql = "CREATE TABLE " + PN_TABLE + 
                    "(" + PN_KEY_ID + " integer primary key autoincrement, " + 
                    PN_KEY_TYPE_OF_SESSION + " text, " + 
                    PN_KEY_NAME + " text, " + 
                    PN_KEY_START_TIME + " text, " + 
                    PN_KEY_END_TIME + " text, " + 
                    PN_KEY_ROOM + " text);"; 
```

对所有表创建语句重复。

# c++ - D3DXERR_INVALIDDATA 发生

> ID：10980659
> 
> 赞同：0
> 
> 时间：2012-06-11T13:04:10.547
> 
> 标签：c++, windows, file, directx, textures

环境：
i5 750
DDR3 4G Win7 pro x64 sp1
DXSDK 9.0c 2010 年 6 月
GeForce GT240(驱动程序 275.33) 512MB
MSVC 2008 sp1

项目：
使用DXT5（A8R8G8B8）dds格式的角色精灵图像的游戏项目。
一个精灵是每帧 512*512 大小，每一帧都是其他文件。
（我们使用渲染的 3dsmax 卡通着色器建模动画。并且 3dsmax 将每一帧渲染到彼此的文件上。）
并以这种方式加载：

```
HRESULT hr = D3DXCreateTextureFromFileEx( m_pd3dDevice //LPDIRECT3DDEVICE9 m_pd3dDevice
        ,filename_upper.c_str() //std::wstring filename_upper
        ,D3DX_DEFAULT_NONPOW2   
        ,D3DX_DEFAULT_NONPOW2   
        ,1
        ,0
        ,D3DFMT_A8R8G8B8
        ,D3DPOOL_MANAGED
        ,D3DX_FILTER_NONE 
        ,D3DX_FILTER_NONE
        ,NULL
        ,&info   // D3DXIMAGE_INFO info                
        ,NULL
        ,&rsTexture //LPDIRECT3DTEXTURE9 rsTexture
); 
```

问题：**hr**几乎
是**S_OK**。当加载许多文件时，有时它会**超出 D3DXERR_INVALIDDATA**。 我在谷歌上搜索，我发现这并不意味着内存不足。（内存不足是**D3DERR_OUTOFVIDEOMEMORY**或**E_OUTOFMEMORY**） 许多答案说“文件损坏或格式异常”，但我不这么认为，因为错误发生在加载随机文件中。（“加载失败的文件”是下次加载成功，或者随机相反的情况）。

 ******有什么问题，我该怎么办？
我真的很恐慌帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:21:14.757

解释你的答案：

D3DFMT_A8R8G8B8 不是 D3DFMT_DXT5。该格式的名称暗示它包含 4 个 8 位组件，因此是“R8”等。因此，您将所有文件转换为 32 位，占用的存储空间是 DXT5 的 4 倍。

碰巧使用 D3DFMT_FROM_FILE 意味着它将使用您在文件中指定的 DXT5。您也可以指定 D3DFMT_DXT5。这将具有自动将您碰巧加载的任何 R8G8B8A8（或任何其他格式）文件转换为正确的 DXT5 压缩格式的优势。******

# javascript - 通过jquery动态添加div

> ID：10980662
> 
> 赞同：1
> 
> 时间：2012-06-11T13:04:17.653
> 
> 标签：javascript, jquery

我正在`div`使用 jquery 在页面中动态添加元素`div`。CSS 是`position : absolute` 。现在我的问题是当我同时添加超过 1 个 div 元素时，它们相互重叠。有什么办法可以在不改变我的元素的`position property`情况下不重叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:05:52.447

查看砌体插件。它是动态布局插件，可在新元素添加到文档时自动排列 div 元素，防止元素重叠。看看这个[链接。](http://masonry.desandro.com/)

只需指定容器 div 让它与`container`您需要调用函数的 id

```
$(".container").masonry(); 
```

然后当您在容器中添加更多 div 时，您只需要调用该函数

```
var $newElems = $( newElements );
$(".container").masonry( 'appended', $newElems ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:08:43.290

您使用顶部、底部、左侧、右侧 css 属性定义绝对定位对象的位置。所以你也必须动态地改变这些。

例如：第一个元素有 top: 0, left:0 ，第二个 top: 0, left: 50 等等......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:17:20.997

当您将元素添加为绝对定位并且没有提供有效的顶部和左侧值时，该元素将被定位到绝对位置，顶部和左侧都为 0。

在您的情况下，您添加的所有元素都应该占据位置 (0,0)，因此它们彼此重叠。

一种解决方案是计算每个位置的位置，并使用沿 sith css({'position' : 'absolute'}) 向它们添加相应的顶部和左侧值来布局它们，但在大多数情况下这需要一些数学运算。

不用担心，您的浏览器已经知道该数学并且您可以在大多数情况下使用它，因此添加不带“位置”“绝对”的 div。现在浏览器可以很好地布局它们。浏览器完成布局后，获取 DIV 并获取它们的当前位置，并使用该位置使用绝对位置对它们进行布局。

```
for(var i=0; i < noOfDivs; i++){
    {
    $('#parentDiv').append('<div class="childDiv"/>');
    }
$('.childDiv').css({
    'position': 'absolute,
    'top' : $(this).position().top,
    'left' : $(this).position().left
    }); 
```

代码未经测试，如果 DIV 被一个一个定位，它应该再次导致问题，您应该从最后一个到第一个迭代它们或保存所有位置并稍后应用它们。如果 jQuery 更新单个 DOM 访问中的所有位置，这将正常工作。

# jquery - jQuery异步加载新元素，在加载的页面上

> ID：10980663
> 
> 赞同：0
> 
> 时间：2012-06-11T13:04:18.270
> 
> 标签：jquery, asynchronous, html-table, row

在我的`default.php`我有一个 jQuery 事件，它将像这样加载一个外部页面`<div>`：

```
$(".edit").click (function(){
var row_id = $(this).attr('id');
$("#studentCourseElementPlanselected").show().html("<div id='wait'></div>");
$.ajax({
    url: "/pages/loadCoursePlan.php",
    data: { 'cpl_id':row_id },
    success: function(data){
        $("#studentCourseElementPlanselected").html(data);
    }
  });
}); 
```

在`/pages/loadCoursePlan.php`（已加载）上，我有另一个 jQuery 脚本，它将添加一个克隆的`<select>`元素

```
$('#add_more').on('click', function() {
  var selectClone = $('select:last').clone(true);  // make a copy of select
  $('#courseElements').append(selectClone);    // append to clone select
}); 
```

当我单击更新时，会调用另一个 jQuery 脚本来执行以下操作：

```
$('#course_update').click(function() {

var course_id = $('#course_id').val();
var plan_id = $('#plan_id').val();
var price_id = $('#price_id').val();
var course_name = $('#course_name').val();
var course_isActive = $('#course_isActive').val();

$('#update_status').html('<img src="../images/ajax-loader.gif" />');
$.post('../update.php', {

    course_id: course_id, 
    plan_id: plan_id,
    price_id: price_id,
    course_name: course_name,
    course_isActive: course_isActive

    }, function(data) {
    $('#update_status').html(data);
    return false;
});
}); 
```

我希望`/pages/loadCoursePlan.php`用新对象（`plan_id`）重新加载

的 HTML`pages/loadCoursePlan.php`是这样的：

```
<table id='myTable'>

<tr id='7'><td>Some info here</td><td>6 dagar</td> <td><a href='#' class='delete'><div id='remove_row'></div></a></td></tr>
<tr id='15'><td>Some other info here</td><td>10 dagar</td> <td><a href='#' class='delete'><div id='remove_row'></div></a></td></tr>
<tr id='16'><td>More info</td><td>10 dagar</td> <td><a href='#' class='delete'><div id='remove_row'></div></a></td></tr>

</table> 
```

我想我想公平而简单地添加一个新行......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:41:58.130

我通过在里面添加我想要的代码的副本自己解决了这个问题

```
}, function(data) {
$('#update_status').html(data);
return false; 
```

# spring - 登录后 Spring 安全切换到 http。如何将其保留为 https？

> ID：10980664
> 
> 赞同：3
> 
> 时间：2012-06-11T13:04:21.480
> 
> 标签：spring, https, spring-security

我正在使用 Spring MVC 和 Spring Security。在我找到这篇文章之前，我的重定向正在将 https 切换为 http。Spring MVC“redirect:”前缀总是重定向到http——我如何让它留在https上？。我还必须在我的 AjaxUrlBasedViewResolver 中将 redirectHttp10Compatible 属性设置为 false。

问题是https登录后仍然切换到http。登录后，我可以在地址栏中将我的应用程序设置回 https 并且它会保持不变。此外，由于上述解决方案，我正在为大多数用户使用 IP 身份验证，在这种情况下，https 仍然存在。

我正在尝试将 redirectHtp10Compatible 添加到 login_security_check 或类似的东西，但被卡住了。这里我的`security-config.xml`.

```
<?xml version="1.0" encoding="UTF-8"?>

<beans:beans xmlns="http://www.springframework.org/schema/security"
         xmlns:beans="http://www.springframework.org/schema/beans"
         xmlns:util="http://www.springframework.org/schema/util"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:context="http://www.springframework.org/schema/context"
         xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
         http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
         http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd">

<global-method-security pre-post-annotations="enabled" />

<http auto-config='true' access-denied-page="/login">
    <intercept-url pattern="/static/styles/**" filters="none" />
    <intercept-url pattern="/static/scripts/**" filters="none" />

    <intercept-url pattern="/login/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/error/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/api/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/ajaxTimeOut" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/checkSystem" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/adminUser/**" access="ROLE_SSADMIN" />
    <intercept-url pattern="/**" access="ROLE_USER" />

    <form-login login-page="/ajaxTimeOut" login-processing-url="/login_security_check" authentication-failure-url="/login?login_error=t" default-target-url="/" always-use-default-target="true" />
    <logout logout-url="/logout" logout-success-url="/"/>
    <custom-filter position="PRE_AUTH_FILTER" ref="ipPreAuthFilter" />
</http>

<beans:bean id="ipAuthDetailsSource" class="com.mydomain.security.IPBasedPreAuthenticatedDetailsSource" />

<beans:bean id="ipPreAuthFilter" class="com.mydomain.security.IPPreAuthenticationFilter">
    <beans:property name="authenticationManager" ref="preAuthManager" />
    <beans:property name="authenticationDetailsSource" ref="ipAuthDetailsSource" />
</beans:bean>

<beans:bean id="preAuthManager" class="org.springframework.security.authentication.ProviderManager">
    <beans:property name="providers">
        <beans:list>
            <beans:ref local="preAuthProvider"/>
        </beans:list>
    </beans:property>
</beans:bean>

<beans:bean id="preAuthProvider" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
    <beans:property name="preAuthenticatedUserDetailsService" ref="preAuthUserService" />
</beans:bean>

<beans:bean id="preAuthUserService" class="org.springframework.security.web.authentication.preauth.PreAuthenticatedGrantedAuthoritiesUserDetailsService" />

<authentication-manager>
    <authentication-provider user-service-ref="userService">
        <password-encoder ref="passwordEncoder" >
            <salt-source user-property="salt" />
        </password-encoder>
    </authentication-provider>
</authentication-manager>

<beans:bean id="userService" class="com.mydomain.security.UserServiceImpl" />
<beans:bean id="passwordEncoder" class="com.mydomain.security.PasswordEncoder">
    <beans:constructor-arg value="256" />
</beans:bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:19:38.190

你有没有试过这个：

```
<http>
    <intercept-url pattern="/secure/**" access="ROLE_USER" requires-channel="https"/>
    ...
</http> 
```

[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-requires-channel](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-requires-channel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:21:25.473

得到了解决方案。

```
<security:form-login login-page="/Login"
                             login-processing-url="/j_spring_security_check"
                             default-target-url="https://127.0.0.1/abcWeb/"
                             always-use-default-target="true"
                             authentication-failure-url="https://127.0.0.1/abcWeb/loginfailed"
                                  />
    <security:logout logout-success-url="https://127.0.0.1/abcWeb/logout" /> 
```

我为登录处理添加了绝对路径，其余部分我将此 p:redirectHttp10Compatible="false" 添加到 InternalViewResolver

# c# - 使用 Json.net 将非数组 JSON 对象解析为数组

> ID：10980668
> 
> 赞同：7
> 
> 时间：2012-06-11T13:04:34.197
> 
> 标签：c#, arrays, json, json.net, deserialization

我正在使用一个外部 API，该 API 将属性作为数组或对象返回，具体取决于计数。有什么好的方法来处理这个？

**作为数组返回：**

```
{
    "contacts": {
        "address": [
            {
                "id": "47602070",
                "type": "Work",
                "street": "MyStreet",
                "city": "MyCity",
                "zip": "12345",
                "country": "USA"
            },
            {
                "id": "47732816",
                "type": "GPS",
                "street": "50.0,30.0"
            }
        ]
    }
} 
```

**作为对象返回：**

```
{
    "contacts": {
        "address": {
            "id": "47602070",
            "type": "Work",
            "street": "MyStreet",
            "city": "MyCity",
            "zip": "12345",
            "country": "USA"
        }
    }
} 
```

我在想一种解决方法是使用自定义反序列化器并为对象情况返回一个长度为 1 的数组，并为数组情况返回默认反序列化，但我还不知道该怎么做。

我尝试将对象反序列化为一个数组，并希望 Json.net 能为我处理这种情况，但没有骰子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T17:57:10.887

根据 Christophe Geers 的[回答](https://stackoverflow.com/a/10981032/134761)，这就是我最终要做的。

1.  创建自定义 JSON 转换器以始终将 JSON 解析为数组。如果 JSON 是非数组对象，则反序列化对象并将其包装在数组中。

2.  使用自定义转换器属性标记相应的属性。

**自定义转换器**

```
public class JsonToArrayConverter<T> : CustomCreationConverter<T[]>
{
    public override T[] Create(Type objectType)
    {
        // Default value is an empty array.
        return new T[0];
    }

    public override object ReadJson(JsonReader reader, Type objectType, object
        existingValue, JsonSerializer serializer)
    {

        if (reader.TokenType == JsonToken.StartArray)
        {
            // JSON object was an array, so just deserialize it as usual.
            object result = serializer.Deserialize(reader, objectType);
            return result;
        }
        else
        {
            // JSON object was not an arry, so deserialize the object
            // and wrap it in an array.
            var resultObject = serializer.Deserialize<T>(reader);
            return new T[] {resultObject};
        }
    }
} 
```

**问题示例的数据结构**

```
public class Organisation
{
    public Contacts contacts;
}

public class Address
{
    public string id;
    public string street;
    public string city;
    public string type;
    public string zip;
    public string country;
}

public class Contacts
{
    // Tell JSON.net to use the custom converter for this property.
    [JsonConverter(typeof(JsonToArrayConverter<Address>))]
    public Address[] address;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T13:26:29.677

一个自定义的 JSON.NET 转换器可能会在这里解决问题。这并不难。

对于 DateTime 属性，您可以按如下方式进行。只需使用自定义转换器装饰有问题的属性。

```
[JsonObject(MemberSerialization.OptIn)]
public class MyClass
{
    [JsonProperty(PropertyName = "creation_date")]
    [JsonConverter(typeof(UnixDateTimeConverter))]
    public DateTime CreationDate { get; set; }
} 
```

JSON.NET 提供了大部分管道。只需从基础转换器派生。

```
public class UnixDateTimeConverter : DateTimeConverterBase
{
    public override void WriteJson(JsonWriter writer, object value, 
                                   JsonSerializer serializer)
    { ...}

    public override void WriteJson(JsonWriter writer, object value, 
                                   JsonSerializer serializer)
    { ... } 
} 
```

您所要做的就是实现 ReadJson（反序列化）和 WriteJson（序列化）方法。

你可以在这里找到一个完整的例子：

[编写自定义 Json.NET DateTime 转换器](http://cgeers.com/2011/09/25/writing-a-custom-json-net-datetime-converter/)

对于您的特定问题，您需要更多控制。尝试以下类型的转换器：

```
public class Contact
{ 
   private List<Address> _addresses = new List<Address>();       
   public IEnumerable<Address> Addresses { get { return _addresses; }
}

public class ContactConverter : CustomCreationConverter<Contact>
{
    public override Contact Create(Type objectType)
    {
        return new Contact();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object 
        existingValue, JsonSerializer serializer)
    {
        var mappedObj = new Contact();

        // Parse JSON data here
        // ...

        return mappedObj;
    }
} 
```

使用像上面这样的自定义转换器，您可以自己解析 JSON 数据并根据需要组合联系人对象。

我修改了我在这里找到的一个例子：

[JSON.NET 自定义转换器——快速浏览](http://geekswithblogs.net/DavidHoerster/archive/2011/07/26/json.net-custom-convertersndasha-quick-tour.aspx)

在这种情况下，您需要在解串时传递自定义转换器。

```
Contact contact = 
    JsonConvert.DeserializeObject<Contact>(json, new ContactConverter()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T22:13:58.477

`CustomCreationConverter`注意：您可以使用普通转换器而不是使用 a 。例如我使用这样的东西：

```
public class SingleToArrayConverter<T> : JsonConverter
{
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var items = (IEnumerable<T>)value;
        if (value == null || !items.Any())
        {
            writer.WriteNull();
        }
        else if (items.Count() == 1)
        {
            serializer.Serialize(writer, items.ElementAt(0));
        }
        else
        {
            serializer.Serialize(writer, items);
        }
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        if (!CanConvert(objectType))
        {
            throw new NotSupportedException();
        }

        if (reader.TokenType == JsonToken.Null)
        {
            reader.Skip();
            return null;
        }
        else if (reader.TokenType == JsonToken.StartObject)
        {
            return new T[] { serializer.Deserialize<T>(reader) };
        }
        else
        {
            return serializer.Deserialize<T[]>(reader);
        }
    }

    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(IEnumerable<T>);
    }
} 
```

# mongodb - MongoDB 适合这个吗？

> ID：10980673
> 
> 赞同：1
> 
> 时间：2012-06-11T13:04:48.437
> 
> 标签：mongodb, nosql

在我正在构建的系统中，它本质上是一个问题跟踪系统，但具有各种问题模板。某些问题类型的格式与其他问题类型不同。

我最初计划将 MySQL 与一个主`issues`表和一个`issues_meta`包含键 => 值对的表一起使用。但是，我认为 NoSQL (MongoDB) 可能是更好的选择。

> MongoDB 能否为我提供生成“标准”报告的能力，例如按类型划分的问题数量、按类型划分的问题数量、每个人分配的问题数量等？我问这个是因为我读过一些消息来源说 Mongo 不擅长报道。

* * *

我还计划将我的审计日志存储在 Mongo 中，因为我想要一个用于所有操作的“表”（对任何表的修改）。在 Mongo 中，我可以轻松存储每个更改的字段，因为它是无模式的。这是一个坏主意吗？

还有什么我应该知道的，Mongo 会为我想要的而工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:58:04.097

MongoDB 肯定会工作（如果需要，您可以使用[capped collections](http://www.mongodb.org/display/DOCS/Capped+Collections)自动删除旧记录），但您应该问自己，它是否适合这项任务？对于您描述的用例，使用[Redis](http://sunilarora.org/another-redis-use-case-centralized-logging)（简单且足够快）或 Riak（如果您非常关心日志数据）是更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:34:55.507

我认为 MongoDB 将是该用例的完美匹配。

*   MongoDB 集合是异构的，这意味着您可以将具有不同字段的文档存储在同一个包中。因此，不同的报告模板不会成为阻碍因素。您将能够使用单个文档对完整问题进行建模。

*   MongoDB 也非常适合记录日志。您可能对上限收藏感兴趣。

*   如果您需要在文档之间建立关系关联，您也可以拥有它。

*   如果你使用 Ruby，我可以推荐你 Mongoid。这会让事情变得更容易。此外，它还支持文档的版本控制。

# java - 缓冲输出写入文件错误

> ID：10980675
> 
> 赞同：0
> 
> 时间：2012-06-11T13:05:00.940
> 
> 标签：java, file, file-io, buffered

我想不通。我正在尝试从我的程序中写出文本。假设是一个字数统计程序。告诉我行数、字符数、字数。然后我显示结果以及用户正在搜索的单词和该行。

（即搜索java）

第 5 行：Java 岛包含 Java

第9行：我喜欢喝java

它不显示文本。它的显示像象形文字。

第 2 行：DN{c�<���\$H�Uz�X����h4[����bA.�D��Ja�8^)|��k�ˠ���� <Τ���QJ�����P˒��nI"�(��vc�Bi�"&�/�|qI�W6{pa�0��[���[M��; �FU�! *}4�x�����{�-��(����V�k@�We֭Tʺ 第 3 行：‘N�U �������Ӣ ͇�? 第 4 行: Ӻ鬵�P��D<�}L>* ��o�V�Ex���Q|�)�'��g�I�B�3b�(�"3�T�7�� ���=��s�g�F�;KN���r��_��ʺ:����B�ۢ�s��sP����[6��;��PK!�� � N _rels/.rels �(�

```
public void readFromFile(String filename)
{
    LineNumberReader lineNumberReader = null;
    try {
        lineNumberReader = new LineNumberReader(new FileReader(filename));
        String line = null;
        BufferedWriter output = new BufferedWriter(new FileWriter("output.txt"));
        String ask = "Enter Word";
        String find = JOptionPane.showInputDialog(ask);    
        Scanner scan = new Scanner(new File("test.txt"));
        while ((line = lineNumberReader.readLine()) != null)
        {
          line = scan.nextLine();
          if(line.indexOf(find) >= -1)
            {
             output.write("Line " + lineNumberReader.getLineNumber() +
                    ": " + line);
             output.newLine();
            }
         }// end of while
        output.close();
        } // end of try
        catch (FileNotFoundException ex)
        {
            ex.printStackTrace();
        } 
        catch (IOException ex)
        {
            ex.printStackTrace();
        } 
    finally {    
        try {
            if (lineNumberReader != null) 
                {
                lineNumberReader.close();
                }
            }  // end of try
        catch (IOException ex) 
            {
            ex.printStackTrace();
            }
         }// end of finally
} // end of function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:06:53.347

我不明白你为什么这样做：

```
while ((line = lineNumberReader.readLine()) != null)
        {
          line = scan.nextLine();
          if(line.indexOf(find) >= -1)
            {
             output.write("Line " + lineNumberReader.getLineNumber() +
                    ": " + line);
             output.newLine();
            }
         }// end of while 
```

而不是这个：

```
while ((line = lineNumberReader.readLine()) != null)
        {
          if(line.indexOf(find) >= -1)
            {
             output.write("Line " + lineNumberReader.getLineNumber() +
                    ": " + line);
             output.newLine();
            }
         }// end of while 
```

你不需要2个读者。而且我不明白为什么其中一位读者正在阅读最终文件，而另一位正在阅读名称来自 arg 的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:39:31.510

默认 OS 编码按照`System.getProperty("file.encoding")`. 您可以明确选择一个。

```
 final String encoding = "UTF-16LE"; // Or "Cp1252" or "UTF-8"

    lineNumberReader = new LineNumberReader(new InputStreamReader(new FileInputStream(filename), encoding));
    ...
    BufferedWriter output = new BufferedWriter(new OutputStreamWriter(new FileOutputStream("output.txt"), encoding));
    ...
    Scanner scan = new Scanner(new File("test.txt", encoding)); 
```

# linux - CRON : 调度任务

> ID：10980678
> 
> 赞同：0
> 
> 时间：2012-06-11T13:05:24.820
> 
> 标签：linux, ubuntu, crontab

我正在使用 ubuntu 12.04。我正在使用脚本（**./home/sam/code/imageUpdate**）将**图像**从服务器同步到本地系统中的特定文件夹。而且我必须总是在晚上运行脚本。所以我想写一个**crontab**来自动运行脚本。

我的命令：

```
$crontab -e; 
```

并将预定时间添加到**crontab**文件中。

```
# 50 17 * * * cd /home/sam
# 52 17 * * * ./code/imageUpdate > image1.txt 
```

然后我保存文件并等待结果。

但我没有得到任何结果。没有图像被同步到 image1.txt 文件。

我有没有离开任何一步？

请帮帮我...在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:11:56.907

确保在 crontab 命令的开头没有散列（注释）。

另外：
Crontab 命令应该单独运行。
每个 crontab 命令都将在其自己的上下文中运行，在一条指令中更改目录可能不会导致该目录在下一次执行时正常运行（例如，它们可能在自己的环境中运行）。

要克服这个问题，请编写一个简单的 shell 脚本，其中包含单个操作的所有命令。

```
# MyCommand.sh
cd /home/sam
./code/imageUpdate > image1.txt

# crontab command
50 17 * * * /home/sam/MyCommand.sh 
```

# php - 为什么我的程序在我的测试环境中运行，而不是在我的实际站点中运行？

> ID：10980679
> 
> 赞同：0
> 
> 时间：2012-06-11T13:05:30.657
> 
> 标签：php, javascript, ajax

我有一个非常奇怪的问题，我真的可以使用一些见解。我有一个在我的测试环境中完美运行的站点。这是在我的服务器上，该程序用于库存，它允许用户选择货架位置，然后按货架区域缩小范围。同样，这在测试环境中完美运行。我也有一个实时环境，这个完全相同的站点将无法正常工作，当我运行 Firebug 时，我不断收到 data.id is undefined 。真正奇怪的是，当我将 console.log(data) 添加到我的 ajax 成功函数时，它会向我显示所有数据。我也为测试环境做了这个，我看到的唯一区别是它将所有 id 组合在一起，然后是位置。在 live 环境中显示 id=1, location=1, id= 1,2 location = 1,2 等。在测试环境中显示 id=1,2,

为什么要这样做？？？？

我不确定您可能需要查看代码的哪些部分来帮助解决此问题，但我可以发布您需要查看的任何内容。

编辑：这只发生在一个 ajax 调用上，所有其他的都正常工作。域名是一样的，只是一个是testbcos，一个是bcos。这是ajax调用的代码：

```
// Inventory verification section
$("#area").change (function(){
$("#acctRecords tbody tr").remove();
$('#label').show();
$('#label2').show();
$('#location').show();
$('#section').show();

$.ajax({
    type: "POST",
    async: true,
    url: "area.php",
    dataType:"json",
    data: ({area: $('#area').val()}),
    success: function(data) {
                console.log(data);
    $('select#location').empty();   
    $('select#location').append('<option value="0">Select Option</option>');
    $('select#section').empty();    
    $('select#section').append('<option value="0">Select Option</option>');

    //Populate options of the second dropdown
            for(var x=0;x<data.location.length;x++)
                {    
                $('select#location').append('<option value="'+data.id[x]+'">'+data.location[x]+'</option>');
        $('select#section').append('<option value="'+data.id[x]+'">'+data.location[x]+'</option>');
            } //end of each function 
```

这是用于实时和测试环境的完全相同的代码。

编辑#2：我不知道这是否有帮助，但这里是 area.php 文件。

```
$conn = db_connect();
session_start();
$area = $_POST['area'];
$x = 0;
$return_arr = array();

$result = $conn->query ("SELECT location_id, location FROM location where location like '$area%' ORDER BY location");

            $num_rows = $result->num_rows;

if($num_rows > 0)
{ 
            while ($row = $result->fetch_assoc())
            {
                $idArray[$x] = $row['location_id'];
                $locationArray[$x] = $row['location'];
                $x++;

            $location = array('id' => $idArray,
                'location' => $locationArray
                );

            array_push($return_arr,$location);
            }

}

$conn->close();

echo json_encode($return_arr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:17:03.383

听起来 area.php 以不同的方式返回数据。确定 PHP 文件在实时服务器上是最新的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:14:17.243

事实证明，在 area.php 文件中，我不需要使用 array_push 函数：

```
array_push($return_arr,$location); 
```

当我将其更改为仅返回 $location 时，：

```
echo json_encode($location); 
```

一切正常。感谢大家的帮助。

# methods - RSpec 方法测试

> ID：10980681
> 
> 赞同：0
> 
> 时间：2012-06-11T13:05:34.390
> 
> 标签：methods, rspec2

我正在尝试在我的模型中测试一些方法。例如，

在我的模型中

```
def name
    self.first_name + " " + self.last_name
  end 
```

我想测试它，但我做不到。如何在我的 model_spec.rb 文件中测试此方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T00:06:53.327

大概是这样的吧？

```
describe YourModel do
  subject { YourModel.new(first_name: "Some", last_name: "Guy) }

  its(:first_name) { should eql "Some" }
  its(:last_name) { should eql "Guy" }
  its(:name) { should eql "Some Guy" }
end 
```

你也可以使用`=~`和一个正则表达式，但我觉得这有点吵。

# backbone.js - 尝试从backbone.js中的视图调用集合中的方法

> ID：10980685
> 
> 赞同：0
> 
> 时间：2012-06-11T13:05:49.230
> 
> 标签：backbone.js

我刚刚开始使用我们的backbone.js 并遵循一些简单的教程，尽管我在路上遇到了障碍。我似乎无法运行 FriendCollection.add 方法。我没有收到任何错误。我有什么遗漏吗？我相信这与 this.FriendCollection.add(friend_model) 有关。

```
var Friend = Backbone.Model.extend({});

var FriendCollection = Backbone.Collection.extend
({
    initalize: function(models,options)
    {
        this.bind("add", options.view.addFriendLi);
    }
});

var FriendModel = Backbone.Model.extend
({
    name:null
});

var AppView = Backbone.View.extend
({
    el:$("body"),

    initialize: function()
    {
        this.FriendCollection = new FriendCollection(null,{view:this});
    },

    events:
    {
        "click #add-friend":"showPrompt",
    },

    showPrompt: function()
    {
        var friend_name = prompt("Who is your friend?");
        var friend_model = new FriendModel({name:friend_name});
        this.FriendCollection.add(friend_model);
    },

    addFriendLi: function(model)
    {
        $("#friends-list").append("<li>"+model.get('name') + "</li>");
    },
});

$(document).ready(function() 
{
    var appview = new AppView;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:26:48.587

您拼错`initialize`了 in `FriendCollection`，因此您实际上从未将集合绑定到传入的视图。

```
var FriendCollection = Backbone.Collection.extend
({
    initialize: function(models,options) // Fixed here
    {
        this.bind("add", options.view.addFriendLi);
    }
}); 
```

# linux - 如何跟踪 linux 命令的进度？

> ID：10980689
> 
> 赞同：5
> 
> 时间：2012-06-11T13:06:05.340
> 
> 标签：linux, command

我目前正在处理一个大型数据集，即使文件格式转换每个主题至少需要一个小时，因此我经常不确定我的命令是否已执行或程序已冻结。我想知道是否有人对如何跟踪我试图在 linux 中运行的命令/脚本的进度有提示？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:24:37.870

如果持久命令在文件中产生一些输出`foo.out`，您可以执行`watch ls -l foo.out`或`tail -f foo.out`

您还可以列出`/proc/$(pidof prog)/fd`以找出一些打开的文件`prog`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T12:08:37.620

除了@basile-starynkevitch 的回答，
我还有一个 bash 脚本，可以测量您处理了多少文件（以百分比为单位）。

它监视`procfs`从 fd 信息 ( `/proc/pid/fdinfo`) 中获取当前位置，并以相对于总文件大小的百分比计算。

见[https://gist.github.com/azat/2830255](https://gist.github.com/azat/2830255)

```
curl -s https://gist.github.com/azat/2830255/raw >| progress_fds.sh \
&& chmod +x progress_fds.sh

Usage:
./progress_fds.sh /path/to/file [ PID] 
```

对某人有用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T13:09:48.347

您可以使用 跟踪程序的系统调用`strace`，这将使您能够跟踪`open`调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T13:09:06.470

您可以使用详细输出，但它会使事情变得更慢。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-21T18:10:25.097

我想这不能有一个普遍的答案，它只取决于程序的类型（它甚至不需要对 Linux 做任何事情，请参阅“停止问题”）。

如果您在转换过程中碰巧使用了管道，我发现该[`pv(1)`](http://linux.die.net/man/1/pv)工具非常有用。即使`pv`不知道数据的总大小，也有助于查看是否有实际进展以及数据率有多好。但它不是大多数标准安装的一部分，可能必须明确安装。

# ios - 推送通知未发送到 iPhone 设备

> ID：10980694
> 
> 赞同：0
> 
> 时间：2012-06-11T13:06:46.237
> 
> 标签：ios, push-notification, apple-push-notifications, mdm

我从设备获取 tokenUpdate，然后尝试发送推送通知。但我认为它不起作用，因为当我发送推送通知时，我没有得到设备的任何响应。难道不应该轮询服务器以检查任何 MDM 命令吗？相反，我不断收到令牌更新。

```
 String cToken = token;
            String cAlert = message;

            // Ready to create the push notification
            byte[] buf = new byte[256];
            MemoryStream ms = new MemoryStream();
            BinaryWriter bw = new BinaryWriter(ms);

            char[] tokenChars = token.ToCharArray();
            byte[] deviceTokenBytes = new byte[tokenChars.Length];
            for (int i=0; i < deviceTokenBytes.Length; i++)
            {
                deviceTokenBytes[i] = Convert.ToByte(tokenChars[i]);
            }

           // byte[] deviceToken = HexToData(cToken);
            bw.Write(deviceTokenBytes);

            // Create the APNS payload - new.caf is an audio file saved in the application bundle on the device
            //string msg = "{\"aps\":{\"alert\":\"" + cAlert + "\",\"badge\":" + iBadge.ToString() + ",\"sound\":\"new.caf\"}}";
            string msg = "{\"mdm\":\"+ mPushMagic +"\"}";

            // Write the data out to the stream
           // bw.Write((byte)msg.Length);
            bw.Write(msg.ToCharArray());
            bw.Flush();

            if (sslStream != null)
            {
                sslStream.Write(ms.ToArray());
                return true;
            }

            return false;
        } 
```

更新：我从 pushmagic id 中删除了 '<'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:40:31.957

我建议首先从您的 mdm 消息中删除 V 形。

# android - 从数据库和索引中删除所有数据

> ID：10980695
> 
> 赞同：0
> 
> 时间：2012-06-11T13:06:46.430
> 
> 标签：android, database

要从我的数据库中删除统计信息，我使用：

```
ourDatabase.delete (DATABASE_TABLE, null, null); 
```

但我想在一个基础上创建索引。我怎样才能做到这一点？

# android - LibGdx GLES2.0 立方体纹素拉伸

> ID：10980702
> 
> 赞同：2
> 
> 时间：2012-06-11T13:07:01.020
> 
> 标签：android, opengl-es-2.0, libgdx, texturing

我已经在 Windows/SDL 上编写 OpenGL 几年了，并且能够用它做很多高级的事情。

我已经切换到 Android 和 libgdx，在过去的几天里，我试图将一个简单的演示放在一起，只是一个旋转的立方体。

使用 libgdx`ObjLoader`和`Mesh`类，我加载了从搅拌机导出的立方体网格（带有法线和 uv 坐标），并尝试应用纹理，它绘制了一个立方体，但似乎只使用纹理中的一个纹素来覆盖整个模型。

我已经仔细检查了纹理坐标，甚至用特定坐标手动编码了一个平面来测试，同样的事情正在发生。

这是顶点着色器：

```
attribute vec4 a_position;
attribute vec3 a_normal;
attribute vec2 a_texCoord;

uniform mat4 mvp;

varying vec3 outNormal;
varying vec2 outTexcd;

void main(){
    outNormal = a_normal;
    outTexcd = a_texCoord;
    gl_Position = mvp * a_position;
} 
```

和片段着色器：

```
precision highp float;

varying vec3 outNormal;
varying vec2 outTexcd;
uniform sampler2D tex;

void main(){
    vec3 norms = outNormal;
    gl_FragColor = texture2D(tex,outTexcd);
} 
```

但我不认为这就是问题所在。或者也许确实如此，我不确定。

不想过多地堵塞这个问题，所以主要来源在这里（pastebin）：[主要来源](http://pastebin.com/gesfCNw8)

如果这是一个不好的问题，请告诉我，这是我的第一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:33:33.533

玩图像我找到了答案。

正在使用 32 位 .png RGBA8888，但没有告诉 libgdx。

切换到以 RGBA8888 格式接收图像：

`t = new Texture(Gdx.files.internal("Image/r3.png"),Format.RGBA8888,true);`

有点不好意思，大家见谅。

**编辑：** 奇怪的是，虽然没有透明度......

# javascript - jpg 图像不显示在 safari pc / iphone 上

> ID：10980705
> 
> 赞同：1
> 
> 时间：2012-06-11T13:07:08.033
> 
> 标签：javascript, html, image, safari

我的网站（包括 jpg´s）在 IE、FF 和 Chrome 上正确显示。PC 和 iPhone 上的 Safari 不显示所有图像。如果我清除 safari 缓存并再次加载页面，则其他图像不会像以前那样显示。我找不到任何显示或可能不显示图像的重复机制。

如果您在新选项卡中打开丢失的图像，则图像会正确显示。这适用于所有情况。

[http://digikamera.yweb.at/public/uploads/image.php?width=178&image=/public/uploads/Canon-EF-100mm-f-2.8-USM-Macro-Lens-340x225.jpg](http://digikamera.yweb.at/public/uploads/image.php?width=178&image=/public/uploads/Canon-EF-100mm-f-2.8-USM-Macro-Lens-340x225.jpg)

我已经厌倦了添加缺少的图像和 alt 标签的高度定义。但这并没有帮助。调试器不显示错误。我的代码有什么问题？

请检查问题： [http ://digikamera.yweb.at/Dslr](http://digikamera.yweb.at/Dslr)

请问，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:44:25.740

代码已修复，但问题仍未解决。我发现问题出在图像调整大小脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:17:35.880

当我在 Safari 中测试时，它们显示得很好。

但是，您可以在 XHTML 标记中做很多事情，使其更有可能在不同的浏览器中工作。例如，您正在混合 HTML 和 XHTML，您正在使用重复的 id:s，您`height`在表格和表格单元格上使用。

W3C 验证服务在标记中发现 482 个错误。其中很多当然是重复的，但仍然很多： http: [//validator.w3.org/check ?uri=http%3A%2F%2Fdigikamera.yweb.at%2FDslr&charset=%28detect+automatically%29&doctype=Inline&group =0](http://validator.w3.org/check?uri=http%3A%2F%2Fdigikamera.yweb.at%2FDslr&charset=%28detect+automatically%29&doctype=Inline&group=0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T17:07:27.810

Safari Wierdness：340k jpg 未显示，即使在单击刷新图标后也是如此。但是，如果我单击 URL 框，然后按 ENTER，瞧！jpg 显示。但是在使用刷新按钮时仍然没有。iPad Wierdness：如果我清除缓存并在输入 URL 后按回车键，则会显示 jpg。但是，即使 jpg 正在显示，当我单击刷新图标时，jpg 也不会显示在重新加载的页面中，尽管我通过 URL 框中的进度条看到它正在尝试。因此，我将 jpg 放入一个新文件中，没有其他任何内容，并且它正常加载，即使使用刷新按钮也是如此。我的代码中的某些内容阻止了正确的缓存。我会弄清楚。

24 小时后：原来，我已经更改了指向 jquery 文件的 url 引用，并且没有将 jquery 文件放在该文件夹中。当然希望这对其他人有帮助！

# facebook - 如何监听 Facebook 应用程序卸载？

> ID：10980706
> 
> 赞同：0
> 
> 时间：2012-06-11T13:07:08.267
> 
> 标签：facebook, facebook-graph-api

当 Facebook 用户使用我们的 Facebook 应用程序登录时，我们会将他注册为我们的数据库中的成员。但是，如果将来某个时候，用户不想成为该应用程序的成员并卸载该应用程序，我怎么知道我们可以将他从我们的数据库中删除？换句话说，我如何才能了解卸载，以便我可以在我们这边适当地处理事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:04:59.423

如果用户取消您的应用程序的授权，Facebook 会“ping”您可以在应用程序设置中指定的取消授权回调。这使您有机会在您的服务器上相应地处理此事件。

# php - 使用 PHP 强制文件下载：文件损坏，已尝试多种解决方案

> ID：10980708
> 
> 赞同：0
> 
> 时间：2012-06-11T13:07:16.427
> 
> 标签：php, file, download

这已经发布，但我已经尝试了很多在 SO 上找到的解决方案等等（比如：[http](http://davidwalsh.name/php-force-download) ://davidwalsh.name/php-force-download ）

我基本上有这个：

```
{       
    $filePath = '../public/myfile.png';
    $fileName = basename($filePath);
    $fileSize = filesize($filePath);

    if (!is_file) {
        die("File not found");
    } else {                        
        header("Content-Description: File Transfer");
        header('Content-Type: application/octet-stream');
        header("Content-Disposition: attachment; filename= " . $fileName);
        header("Content-Transfer-Encoding: binary");
        readfile($filePath);
    }
} 
```

文件被识别并下载，但 .PNG 为空且 .DOC 已损坏（Word 要求我修复文件，然后就可以了）。我也试过PDF，没问题。

我确实可以放置各种选项（Pragma，Cache-Control，Expires，Content-Length 等），仍然下载文件但以某种方式损坏......

你有没有遇到过我的问题？请考虑我在 IIS 7.5 上

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T13:12:25.667

[使用像Notepad++](http://notepad-plus-plus.org/)这样的纯文本编辑器打开下载的文件。在顶部你会发现一个 PHP 错误通知，它会告诉你出了什么问题。

错误可能是“会话已发送”。然后`ob_start();`在脚本的开头添加。

# java - 如何使axis/axis2为生成的类生成toString方法？

> ID：10980711
> 
> 赞同：3
> 
> 时间：2012-06-11T13:07:24.417
> 
> 标签：java, axis2, axis, tostring, wsdl2java

是否可以让**axis/axis2为****wsdl2java**生成的类生成 toString 方法？它们可以使用 IDE（例如 Eclipse）手动创建，但每次启动 wsdl2java 时都需要重新生成它们。

如果没有此方法，此类实例的日志输出将不包含有用的数据（只有类名和哈希）。虽然可以通过反射方法（例如 apache's `BeanUtils.describe`）将给定对象转换为字符串表示形式，但这种解决方案比专用 toString 方法对性能的影响更大。

是否有可用的插件或补丁，可以将此类功能添加到轴？还是之后可以运行的命令行脚本？

这个问题针对两个版本的轴。

我不想重新发明轮子，我认为这是一个更广泛的问题，所以可能有人已经写过类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T10:25:03.583

不，wsdl2java 覆盖 toString 方法

例如：你有很多带有toString()方法的java类，如果你用java2wsdl生成wsdl，然后用wsdl2java重新创建java类，toString方法就消失了

我还发现了这个：

[http://mail-archives.apache.org/mod_mbox/axis-java-user/200801.mbox/%3Cc688cd6d0801210406t152ea4e6u3ac583ca1ad60498@mail.gmail.com%3E](http://mail-archives.apache.org/mod_mbox/axis-java-user/200801.mbox/%3Cc688cd6d0801210406t152ea4e6u3ac583ca1ad60498@mail.gmail.com%3E)

使用 Eclipse 中的 CXF 工具，您可以管理它，但不能管理轴：

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jst.ws.cxf.doc.user%2Freference%2Fwsdl2java_tab.html](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jst.ws.cxf.doc.user%2Freference%2Fwsdl2java_tab.html)

# php - 在 Yii 框架中实现 APNS

> ID：10980725
> 
> 赞同：3
> 
> 时间：2012-06-11T13:08:18.723
> 
> 标签：php, yii, apple-push-notifications

我正在为 Apple iphone/ipad 做推送通知服务。我从[http://code.google.com/p/apns-php/](http://code.google.com/p/apns-php/)获得了服务器端代码。它运行良好..但我必须在 Yii 框架中实现它。

我已经用谷歌搜索过了。并得到了这个 [https://github.com/shiki/yii-apns](https://github.com/shiki/yii-apns)

在这里我需要在运行时动态设置 server_certificates_bundle_sandbox.pem 和设备令牌。我是 yii 的新手..请帮助我如何使用这个组件..

我已经提取了组件文件夹中的所有文件，并尝试了以下代码。

```
 $obj=new SAPNS();
    $obj->providerCertificateFilePath="provider certificate file path";
    $obj->rootCertificationAuthorityFilePath="root certificate path";
    $obj1=$obj->getPushProvider(); 
```

但是在调用 getPushProvider 方法时，出现以下错误。

> 包括（ApnsPHP_Push.php）：无法打开流：没有这样的文件或目录

我的组件文件夹中的 ApnsPHP 文件夹中没有这样的文件 ApnsPHP_Push.php。不知道我在哪一部分做错了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T05:34:07.047

伙计们已经把所有东西都包装在了一个组件中，所以你只需要将所有东西放在 components 目录中并调用所需的函数。

如果您查看 SAPNS.php 它有一个公共财产

```
$providerCertificateFilePath 
```

这将是您的 PEM 文件和其他文件的文件路径

```
$rootCertificationAuthorityFilePath 
```

用于安全证书（如果有）。

给出这些值后，您必须调用`getPushProvider`方法，该方法将为您提供一个对象，`ApnsPHP_Push`您可以像没有框架一样正常调用此类。

# c# - 等价于 c# 中的 AbstractTableModel

> ID：10980732
> 
> 赞同：0
> 
> 时间：2012-06-11T13:08:41.110
> 
> 标签：c#, java, abstracttablemodel

正如标题所说，C# 中是否有与 AbstractTableModel 等价的方法，还是有另一种更好的在 C# 中创建表模型的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:14:55.443

`AbstractTableModel`在使用 Java Swing 和 C# WPF 和 SilverLight 之后，恕我直言，在 .Net中没有等价物。您只需设置`ItemsSource`属性并使用绑定将列映射到属性。您可以使用`PagedCollectionView`一些功能，如排序和分组，但模型仍然是对象列表，因此您可以灵活地将任何类型的对象集合传递给表。

为什么要`AbstractTableModel`在 C# 中使用，要使用或实现哪个功能？

# clojure - Clojure BigInt 不是 Java BigInteger

> ID：10980734
> 
> 赞同：8
> 
> 时间：2012-06-11T13:08:53.597
> 
> 标签：clojure, biginteger, bigdecimal

我正在尝试在 Clojure 中使用 BigDecimals 来建模（如有必要）任意精度数。当我尝试从未缩放的值和比例因子实例化 BigDecimal 时，我遇到了一个奇怪的错误：

```
user=> 1.31M
1.31M (OK)
user=> (class 1.31M)
java.math.BigDecimal (OK)
user=> (.unscaledValue 1.31M)
131 (OK)
user=> (.scale 1.31M)
2 (OK)
user=> (.movePointLeft (BigDecimal. 131) 2)
1.31M (OK)
user=> (BigDecimal. (BigInteger. "131") 2)
1.31M
user=> (BigDecimal. 131N 2) (WRONG!!!)
IllegalArgumentException No matching ctor found for class java.math.BigDecimal  clojure.lang.Reflector.invokeConstructor (Reflector.java:183)
user=> (BigDecimal. (BigInteger. "131") 2)
1.31M 
```

这里的问题是 clojure 大整数不是 java.math.BigInteger 对象。即使 (bigint x) 也不起作用：

```
user=> (doc bigint)
-------------------------
clojure.core/bigint
([x])
  Coerce to BigInt
nil 
```

顺便说一句，BigInteger 构造函数不直接接受数值。我知道我也可以做类似的事情：

```
user=> (BigDecimal. (BigInteger. (.toByteArray (.unscaledValue 1.31M))) (.scale 1.31M))
1.31M 
```

我的问题是：有没有更惯用的方式从 Clojure 直接管理 BigInteger 对象？还是我坚持将所有内容包装在自定义库中，例如：

```
user=> (defn my-bigint [x] (BigInteger. (.toString x)))
#'user/my-bigint
user=> (my-bigint 131)
131
user=> (BigDecimal. (my-bigint 131) 2)
1.31M 
```

在此先感谢您的帮助！

更新：我**需要**一个 BigInteger 用于序列化目的：我的想法是将 BigDecimal 存储为字节数组和整数。我的问题是，在 Clojure 中，如果我愿意，我不能来回传递 .unscaledValue 的结果，因为 Clojure 不处理从 Integers 创建的 BigInteger（Java 也不处理，这很重要）：

```
user=> (BigInteger. 3)
IllegalArgumentException No matching ctor found for class java.math.BigInteger  clojure.lang.Reflector.invokeConstructor (Reflector.java:183) 
```

对数字调用 .toString 对序列化的语义没有用（而且更容易出错）。我想知道在 Clojure 中是否有一种惯用的方式来编写类似的内容：

```
user=> (bigdec 131N 2) 
```

没有 .movePointLeft （创建两个不同的对象没有好处），没有 .toString （我有一个数字，我将它字符串化，然后从它创建一个 BigInteger，另一个数字？），没有缓慢和间接的方法：只是简单的 BigInteger 和缩放价值。

文兹

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T15:25:05.483

```
=> (type (.unscaledValue 1.31M))
java.math.BigInteger

=> (type (biginteger 131))
java.math.BigInteger

=> (BigDecimal. (biginteger 131) 2)
1.31M 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T13:53:43.873

```
user=> (.movePointLeft (bigdec 131) 2)
1.31M
user=> (.movePointLeft (bigdec 131N) 2)
1.31M

user=> (source bigdec)
(defn bigdec
  "Coerce to BigDecimal"
  {:tag BigDecimal
   :added "1.0"
   :static true}
  [x] (cond
       (decimal? x) x
       (float? x) (. BigDecimal valueOf (double x))
       (ratio? x) (/ (BigDecimal. (.numerator x)) (.denominator x))
       (instance? BigInteger x) (BigDecimal. ^BigInteger x)
       (number? x) (BigDecimal/valueOf (long x))
       :else (BigDecimal. x))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:56:20.813

我更喜欢这个：

```
(-> 131M (.movePointLeft 2)) 
```

# iphone - 在 Iphone 应用程序中运行的背景音乐中断电话呼叫

> ID：10980735
> 
> 赞同：1
> 
> 时间：2012-06-11T13:08:54.750
> 
> 标签：iphone, ios4, xcode4.2

我正在开发一个运行音乐的 iphone 应用程序。在我的应用程序中，通过 Web 服务下载音乐文件并在后台和前台运行此音乐，这工作得很好。但是运行的背景音乐会影响电话、警报等。如何结束来这个问题？如何在电话，闹钟等后自动恢复音乐？

如果有人知道，请帮助我。提前致谢。

# java - Java：距离度量算法设计

> ID：10980741
> 
> 赞同：0
> 
> 时间：2012-06-11T13:09:04.100
> 
> 标签：java, algorithm, measure

我正在尝试用 Java 解决以下问题（尽管它可以用几乎任何其他语言完成）：

我得到了两个整数值数组，`xs`和`ys`，表示 x 轴上的数据点。它们的长度可能不相同，尽管两者都 > 0，并且它们不需要排序。我要计算的是两个数据集点之间的最小距离度量。我的意思是，对于每一个我都在集合中`x`找到最近的并计算距离，例如。例如：`y``ys``(x-y)^2`

```
xs = [1,5]
ys = [10,4,2] 
```

应该返回 (1-2)^2 + (5-4)^2 + (5-10)^2

距离测量并不重要，它是我感兴趣的算法。我正在考虑以某种方式对这两个数组中的数组和高级索引进行排序，以实现比蛮力更好的效果（对于 x 中的每个元素，扫描 ys 中的所有元素以找到min) 即`O(len1 * len2)`.

这是我自己正在解决的问题，而不是作业问题。您的所有提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:48:29.280

我假设 HighPerformanceMark （对您的问题的第一条评论）是正确的，并且您实际上采用了较大的数组，为每个元素找到较小数组中最接近的一个，并在这些距离上总结一些 f(dist)。

我会建议你的方法：

```
Sort both arrays 
indexSmall=0 

// sum up
for all elements e in bigArray {
  // increase index as long as we get "closer"
  while (dist(e,smallArray(indexSmall)) > dist(e,smallArray(indexSmall+1)) {
    indexSmall++
  }
  sum += f(dist(e,smallArray(indexSmall)));
} 
```

这是`O(max(len1,len2)*log(max(len1,len2)))`为了排序。其余的与较大的数组长度成线性关系。现在`dist(x,y)`将类似于`abs(x-y)`, 和`f(d)=d^2`或任何你想要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:37:09.830

您的方法非常好，并且具有`O(n1*log(n1)+n2*log(n2))`时间复杂度。

如果数组的长度不同，另一种方法是：

1.  对较短的数组进行排序；
2.  从头到尾遍历较长的数组，使用二分查找在已排序的短数组中定位最近的项目。

这具有`O((n1+n2)*log(n1))`时间复杂度，其中`n1`是较短数组的长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:31:52.203

你提出的想法对我来说听起来不错。您可以在 O(n logn) 时间内对列表进行排序。然后，您可以使用另一个上的滑动索引对更长的列表进行一次迭代以找到“对”。随着您在更长的列表中前进，您将永远不必回溯另一个。所以现在你的整个算法是 O(n logn + n) = O(n logn)。

# asp.net - ASP.NET LINQ SQL 数据库

> ID：10980747
> 
> 赞同：3
> 
> 时间：2012-06-11T13:09:30.253
> 
> 标签：asp.net, sql, sql-server, linq

我正在制作一个.net系统。我正在使用 LINQ 和 MVC。我必须创建实时数据库，并希望它能够顺利运行，但事实并非如此。

新 SQL 服务器 - Microsoft Windows NT 5.0 (2195) / 8.00.760

我创建了一个可以添加/编辑/删除的管理员用户。基本上，如果我尝试添加（`.InsertOnSubmit`）或删除（`.DeleteOnSubmit`）任何行，但在我编辑时不会收到以下错误。

```
"Network access for Distributed Transaction Manager (MSDTC) has been disabled. Please enable DTC for network access in the security configuration for MSDTC using the Component Services Administrative tool." 
```

我用谷歌搜索了这个错误，发现人们认为它与“MSDTC 服务”有关，但这似乎是在服务上打勾的。我已经通过 SQL Server Management 登录到数据库，这个用户可以添加/删除。

一个例子：

```
Controller
if (_service.AddAccess(access)) return RedirectToAction("Access");

public Repository()
{
    _db = new DataClassDataContext(ConfigurationManager.ConnectionStrings["RegistrarsServices"].ConnectionString);
}

public void Save()
{
    _db.SubmitChanges();
}

public bool AddAccess(Access access)
{
    try
    {
        using (var scope = new TransactionScope())
        {
            _db.Accesses.InsertOnSubmit(access);
            Save();

            scope.Complete();
        }
        return true;
    }
    catch (Exception)
    {
        return false;
    }
} 
```

*请注意，这在使用开发服务器时确实有效。微软视窗 NT 5.2 (3790) / 10.0.1600.22

控制器

```
private readonly ServiceAdministration _service = new ServiceAdministration();

public ActionResult AddAccess()
{
    return View(new EmailViewModel());
}

[HttpPost]
public ActionResult AddAccess(EmailViewModel emailViewModel)
{
    if (emailViewModel.Button == "Back") return RedirectToAction("Access");

    if (!ModelState.IsValid) return View(emailViewModel);

    Access access = new Access();
    access.emailAddress = emailViewModel.emailAddress;

    if (_service.AddAccess(access)) return RedirectToAction("Access");

    emailViewModel.errorMessage = "An error has occurred whilst trying to grant access. Please try again later.";
    return View(emailViewModel);
} 
```

服务

```
readonly Repository _repository = new Repository();

public bool AddAccess(Access access)
{
    return _repository.AddAccess(access);
} 
```

真的不知道我错过了什么。

提前感谢您的帮助。

克莱尔:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T13:19:00.813

您知道*为什么*要触发分布式事务吗？这是你需要调查的。通常的罪魁祸首是来自单个 TransactionScope 的多个 ADO.Net 连接。请参阅[ADO.NET 和 System.Transactions](http://msdn.microsoft.com/en-us/magazine/cc163847.aspx)以及[ADO.NET 和 LINQ to SQL](http://msdn.microsoft.com/en-us/library/bb386944.aspx)。确保在事务范围内使用单个连接（即 LINQ2SQL 上下文）。*无论如何*，您不必在每个 HTTP 调用中使用多个。

# java - Spring Validator - 使用显示错误 我正在一个 spring mvc web 应用程序中工作，我正在尝试person使用 Spring 的 Validator 验证一个 db 对象，并尝试将验证器的结果以 JSP 形式显示为form:errors path="". 我在控制器中有服务器端方法： @RequestMapping( va 问问题 问问题 2012-06-11T13:09:43.753 5348 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在一个 spring mvc web 应用程序中工作，我正在尝试person使用 Spring 的 Validator 验证一个 db 对象，并尝试将验证器的结果以 JSP 形式显示为form:errors path="". 我在控制器中有服务器端方法： @RequestMapping( value="/find", method = RequestMethod.GET ) public ModelAndView search(@ModelAttribute("Person") Person p,BindingResult result){ Person person2 = personDao.get( p.getId() ); ModelAndView mav = new ModelAndView("templates/person"); PersonValidator personValidator = new PersonValidator(); personValidator.validate(person2, result); mav.addObject("person",person2); mav.addObject("errors",result.getFieldErrors()); return mav; } 我有 JSP 代码： 如果我明确输入错误消息，它会起作用${errors.personEmail } 但 ， <form:errors path="personEmail" element="div">不起作用。 你能告诉我这里有什么问题吗？ 请尝试缩小变量名称。 你有 @Model Attribute("Person") ，其中命令被命名为 Person ，而不是在你的 jsp 中你有 person 和 personValidator.validate(person, result); 你有人。您应该验证 BindingResult => Person p 之前的同一个对象，或者您必须像这样显式地为特定对象创建绑定结果 BindingResult errors = new BeanPropertyBindingResult(person,"person"); validate(Person person, Errors errors); javaspringvalidationjspspring-mvc 4 2 回答 2 This answer is useful 1 我做了以下更改，现在解决了。:D @RequestMapping( value="/find", method = RequestMethod.GET ) public String search(@ModelAttribute("Person") Person p,BindingResult result,ModelMap model){ Person person2 = personDao.get( p.getId() ); PersonValidator personValidator = new PersonValidator(); Errors errors = new BeanPropertyBindingResult(person2, "person"); personValidator.validate(person2, errors); model.addAttribute("person",person2); model.addAttribute("errors",errors); return "templates/person"; } 于 2012-06-11T14:11:36.243 回答 This answer is useful 0 请尝试缩小变量名称。 你有 @Model Attribute("Person") ，其中命令被命名为 Person ，而不是在你的 jsp 中你有 person 和 personValidator.validate(person, result); 你有人。您应该验证 BindingResult => Person p 之前的同一个对象，或者您必须像这样显式地为特定对象创建绑定结果 BindingResult errors = new BeanPropertyBindingResult(person,"person"); validate(Person person, Errors errors); 于 2012-06-11T14:07:08.873 回答 Related 1 jquery - 如何在 JQuery Mobile 中从左到右移动复选框 1 html - 播放框架2在页面上显示视频 0 php - PHP找不到动态库但它在磁盘上 1 java - php响应时出现JSON错误 4 asp.net - 如何使用 JMeter 对实现视图状态的 ASP.net Web 应用程序进行负载测试 0 javascript - 如何将类添加到特定标签？ 4 java - JavaFX 2 事件分派到底层节点 1 css - 如何让父母无法点击和无法点击 1 java - 巡航控制批处理文件构建永远不会完成 2 ios - 如何检测 IAPFree 和 IAPracker Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</form:errors>

> ID：10980750
> 
> 赞同：3
> 
> 时间：
> 
> 标签：java, spring, validation, jsp, spring-mvc

我正在一个 spring mvc web 应用程序中工作，我正在尝试`person`使用 Spring 的 Validator 验证一个 db 对象，并尝试将验证器的结果以 JSP 形式显示为`form:errors path=""`. 我在控制器中有服务器端方法：

```
@RequestMapping( value="/find", method = RequestMethod.GET )
public ModelAndView search(@ModelAttribute("Person") Person p,BindingResult result){

     Person person2 = personDao.get( p.getId() );
     ModelAndView mav = new ModelAndView("templates/person");

     PersonValidator personValidator = new PersonValidator();
     personValidator.validate(person2, result);
     mav.addObject("person",person2);
     mav.addObject("errors",result.getFieldErrors());

     return mav;
} 
```

我有 JSP 代码：

```
<form:form commandName="person" >
    <form:input path="personEmail" /> 
    <form:errors path="personEmail"  element="div" />
</form:form> 
```

如果我明确输入错误消息，它会起作用`${errors.personEmail }`

但 ，

```
<form:errors path="personEmail"  element="div" /> 
```

不起作用。

你能告诉我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:11:36.243

我做了以下更改，现在解决了。:D

```
@RequestMapping( value="/find", method = RequestMethod.GET )
    public String search(@ModelAttribute("Person") Person p,BindingResult result,ModelMap model){

         Person person2 = personDao.get( p.getId() );
         PersonValidator personValidator = new PersonValidator();
         Errors errors = new BeanPropertyBindingResult(person2, "person");
         personValidator.validate(person2, errors);
         model.addAttribute("person",person2);
         model.addAttribute("errors",errors);

         return "templates/person";
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T14:07:08.873

请尝试缩小变量名称。

你有 @Model Attribute("Person") ，其中命令被命名为 Person ，而不是在你的 jsp 中你有 person 和 personValidator.validate(person, result); 你有人。您应该验证 BindingResult => Person p 之前的同一个对象，或者您必须像这样显式地为特定对象创建绑定结果

```
BindingResult errors = new BeanPropertyBindingResult(person,"person");
validate(Person person, Errors errors); 
```

# asp.net - ASP.NET Eval() 由 GroupBy() 生成的 Key

> ID：10980754
> 
> 赞同：0
> 
> 时间：2012-06-11T13:09:51.420
> 
> 标签：asp.net, linq, group-by, key, eval

我有以下 linq：

```
 var r = db.tblCommonSalesDrivers.Join(db.tblScenarioQuarters, c => c.tblScenarioQuarter, s => s, (csd, sq) => new { Csd = csd, Sq = sq })
                                .GroupBy(c => c.Csd.tblParameter)
                                .GroupBy(c => c.Key.tblParameterGroup); 
```

这给了我一组 tblParameterGroup 每个包含一组 tblParameter 又包含一组匿名类型。

我想将它绑定到 Repeter 和 Eval tblParameterGroup 中的属性之一，如下所示：

```
<%# Eval("Key.SomeProperty") %> 
```

当我这样做时，控件看不到 Key，但它在 Watch 窗口中。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:25:48.437

DataRepeater 不能在该级别的深处使用 tblPatameterGroup。您需要在当前结果上使用 .SelectMany 才能得到它。

# html - 我如何发布变量？

> ID：10980756
> 
> 赞同：-3
> 
> 时间：2012-06-11T13:10:00.663
> 
> 标签：html, var

我会重新解释我的情况，因为我认为我最初的故事不够清楚。我在 Visual Studio 中编写网页，它使用 C#，但我的实际问题是关于 HTML 部分。

我已经成功实现了本地化。唯一的问题是我只能通过硬编码来改变语言（例如我可以硬编码语言=“EN”，我的网站将是英文的）

现在，我当然不想硬编码，我希望人们选择那里的语言。所以我需要一个按钮，可以用另一种语言重新加载相同的页面。

重新加载后我只需要一件事，那就是字符串“en”或“nl”（取决于选择的语言）。所以我的按钮将我发送到 index.aspx，但我的新页面不知道我刚刚按下的按钮的值。

我如何传递变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:20:04.077

你可以用几种不同的方式做到这一点。您可以将整个语言站点放在一个子目录中，这样就可以了：

www.example.com/english/index.php

或者另一种方法是像你说的那样使用get，并且对于每个页面只存储英语和荷兰语，并且只在url中显示语言（默认可以是荷兰语）。所以像这样调用你的页面：（假设你使用 php）

英语：

www.example.com/index.php?lan=english

对于荷兰语：（未定义语言，荷兰语是默认语言）

www.example.com/index.php

在您的页面中（您希望对能够以英语和荷兰语阅读的每个页面执行此操作：

```
<?php
$lan = 'dutch';
if(isset($_GET['lan']))
     $lan = $_GET['lan'];

if($lan == 'english')
{
     ... Your page in english ...
}
else
{
     ... Default Language ...
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:49:06.893

好的，

他们解决这个问题的方法是使用 a 列出您要包含的所有语言：

```
<form method="get" action="Index.aspx">
<label for="language">Select you language here</label>
<select id="language">
<option value="english"English</option>
<option value="french">French</option>
. 
.
.
</select>
<input type="submit" value="submit">
</form> 
```

然后在你的 aspx 文件中做一些处理

- 编辑 -

如果您在表单中使用 method="get" ，则选择的变量将以这样的方式附加到 url：

```
index.aspx?language=english /* for example */ 
```

在您的 aspx 页面中，您可以运行一些 javascript：

```
<script type='text/javascript'>
//<![CDATA[
//  Parse Query String
    var queryString = new Object;
    var qstr=window.location.search.substring(1);
    var params=qstr.split('&');
    for (var i=0; i<params.length; i++) {
      var pair=params[i].split('=');
      queryString[pair[0]]=pair[1];
    }
   //]]> 
</script>
<script type="text/javascript">
   var language = queryString['language'];
   if (language== "english") {
        /* Do some processing */
    }
    else { do domething else }
</script> 
```

如果您将 javascript 放在头部，它将在页面加载时运行。在处理部分访问您的语言文件。

# javascript - 在 IE6 运行时添加 CSS 规则 - 对象不支持此属性或方法

> ID：10980757
> 
> 赞同：0
> 
> 时间：2012-06-11T13:10:02.083
> 
> 标签：javascript, jquery, css, internet-explorer

试图让我的网站在 IE6 中运行，但遇到一些我需要做的运行时 css 问题。

我已经尝试了这两个：

```
$.rule('#post'+ i + '{ visibility:hidden;}').appendTo('style'); 
```

-

```
var postStyle = document.createElement('style');
postStyle.type = 'text/css';    
postStyle.innerHTML = '#post'+ i + '{ visibility:hidden;}';
document.getElementsByTagName('head'[0].appendChild(postStyle); 
```

适用于其他浏览器，但不适用于 IE。我收到此错误：

“对象不支持此属性或方法”

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:11:31.770

在 IE 中，你必须这样做：

```
postStyle.styleSheet.cssText = whatever; 
```

我通常使用`try`/`catch`设置完成此操作。

```
$('head').append($('<style/>', { id: "replaced-colors" }));

try {
  $('#replaced-colors').html(replaced);
}
catch (_ie) {
  $('#replaced-colors')[0].styleSheet.cssText = replaced;
} 
```

作为一个现实生活中的例子。

# javascript - 将 LocalSearch 工具添加到 Leaflet JS 库

> ID：10980760
> 
> 赞同：2
> 
> 时间：2012-06-11T13:10:06.297
> 
> 标签：javascript, leaflet

我正在尝试将本地搜索工具添加到 Leaflet JS 库，我以前从未使用过它，所以不太确定如何去做。我已经复制了缩放控制的工作原理，所以我添加了这个额外的功能：

```
L.Control.LocalSearch = L.Class.extend({
onAdd: function (a) {
    this._map = a,
    this._container = L.DomUtil.create("div", "leaflet-control-zoom"),
    this._localSearch = this._createSearch(leafletmapsmarker_L10n.search_form, "leaflet-control-zoom-in", this._map.zoomIn, this._map),
    this._container.appendChild(this._localSearch)
},
getContainer: function () {
    return this._container
},
getPosition: function () {
    return L.Control.Position.BOTTOM_LEFT
},
_createSearch: function (a, b, c, d) {
    var e = document.createElement("a");
    return e.href = "#", 
    e.title = a,
    e.className = b,
    L.Browser.touch || L.DomEvent.disableClickPropagation(e),
    L.DomEvent.addListener(e, "click", L.DomEvent.preventDefault),
    L.DomEvent.addListener(e, "click", c, d),
    e
} 
```

然后像这样发起这个：

```
 _initControls: function () {
    this.options.searchControl && this.addControl(new L.Control.LocalSearch), this.options.zoomControl && this.addControl(new L.Control.Zoom), this.options.attributionControl && (this.attributionControl = new L.Control.Attribution, this.addControl(this.attributionControl))
}, 
```

所以基本上我需要弄清楚如何为搜索添加功能。也许我以错误的方式解决这个问题，但我在网上找不到太多关于这个的信息，所以有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:27:22.237

试试这个新的传单插件： [leaflet-search](https://github.com/stefanocudini/leaflet-search)

在这里可以尝试更多的演示：

[https://opengeo.tech/maps/leaflet-search/](http://labs.easyblog.it/maps/leaflet-search/)

# android - 在 Android 中解析 JSON 时出错

> ID：10980761
> 
> 赞同：0
> 
> 时间：2012-06-11T13:10:08.123
> 
> 标签：android, json

我正在从网站上抓取数据。我们得到的数据格式为

```
[
[
    {
        "train": "South Coast train (CityRail) ",
        "depTime": "7:26pm",
        "depStation": "Albion Park Station ",
        "depPlatform": "1",
        "arrTime": "7:46pm",
        "arrStation": "Wollongong Station ",
        "arrPlatform": "1"
    },
    {
        "train": "South Coast train (CityRail) ",
        "depTime": "8:00pm",
        "depStation": "Wollongong Station ",
        "depPlatform": "1",
        "arrTime": "9:14pm",
        "arrStation": "Hurstville Station ",
        "arrPlatform": "3"
    },
    {
        "train": "Eastern Suburbs and Illawarra train (CityRail) ",
        "depTime": "9:20pm",
        "depStation": "Hurstville Station ",
        "depPlatform": "3",
        "arrTime": "9:24pm",
        "arrStation": "Kogarah Station ",
        "arrPlatform": "3"
    },
    {
        "train": "Eastern Suburbs and Illawarra train (CityRail) ",
        "depTime": "9:27pm",
        "depStation": "Kogarah Station ",
        "depPlatform": "4",
        "arrTime": "9:31pm",
        "arrStation": "Allawah Station ",
        "arrPlatform": "4"
    }
],
[
    {
        "train": "South Coast train (CityRail) ",
        "depTime": "7:26pm",
        "depStation": "Albion Park Station ",
        "depPlatform": "1",
        "arrTime": "7:46pm",
        "arrStation": "Wollongong Station ",
        "arrPlatform": "1"
    },
    {
        "train": "South Coast train (CityRail) ",
        "depTime": "8:00pm",
        "depStation": "Wollongong Station ",
        "depPlatform": "1",
        "arrTime": "9:14pm",
        "arrStation": "Hurstville Station ",
        "arrPlatform": "3"
    },
    {
        "train": "Eastern Suburbs and Illawarra train (CityRail) ",
        "depTime": "9:30pm",
        "depStation": "Hurstville Station ",
        "depPlatform": "3",
        "arrTime": "9:32pm",
        "arrStation": "Allawah Station ",
        "arrPlatform": "3"
    }
],
[
    {
        "train": "South Coast train (CityRail) ",
        "depTime": "8:16pm",
        "depStation": "Albion Park Station ",
        "depPlatform": "1",
        "arrTime": "8:38pm",
        "arrStation": "Wollongong Station ",
        "arrPlatform": "1"
    },
    {
        "train": "South Coast train (CityRail) ",
        "depTime": "8:54pm",
        "depStation": "Wollongong Station ",
        "depPlatform": "1",
        "arrTime": "10:14pm",
        "arrStation": "Hurstville Station ",
        "arrPlatform": "3"
    },
    {
        "train": "Eastern Suburbs and Illawarra train (CityRail) ",
        "depTime": "10:30pm",
        "depStation": "Hurstville Station ",
        "depPlatform": "3",
        "arrTime": "10:32pm",
        "arrStation": "Allawah Station ",
        "arrPlatform": "3"
    }
],
[
    {
        "train": "South Coast train (CityRail) ",
        "depTime": "9:23pm",
        "depStation": "Albion Park Station ",
        "depPlatform": "1",
        "arrTime": "9:45pm",
        "arrStation": "Wollongong Station ",
        "arrPlatform": "1"
    },
    {
        "train": "South Coast train (CityRail) ",
        "depTime": "9:54pm",
        "depStation": "Wollongong Station ",
        "depPlatform": "1",
        "arrTime": "11:14pm",
        "arrStation": "Hurstville Station ",
        "arrPlatform": "3"
    },
    {
        "train": "Eastern Suburbs and Illawarra train (CityRail) ",
        "depTime": "11:30pm",
        "depStation": "Hurstville Station ",
        "depPlatform": "3",
        "arrTime": "11:32pm",
        "arrStation": "Allawah Station ",
        "arrPlatform": "3"
    }
],
{
    "1": {
        "train": "Eastern Suburbs and Illawarra train (CityRail) ",
        "depTime": "5:09am+",
        "depStation": "Hurstville Station ",
        "depPlatform": "3",
        "arrTime": "5:11am+",
        "arrStation": "Allawah Station ",
        "arrPlatform": "3"
    }
} 
```

]

当我将上述数据转换为 Json 格式时，出现以下错误

```
 06-11 18:36:40.584: V/Error(657): Error in parsing Innerorg.json.JSONException: Value {"1":{"depTime":"5:09am+","arrStation":"Allawah Station ","arrTime":"5:11am+","train":"Eastern Suburbs and Illawarra train (CityRail) ","arrPlatform":"3","depStation":"Hurstville Station ","depPlatform":"3"}} at 4 of type org.json.JSONObject cannot be converted to JSONArray 
```

如何在 Android 中解析这种类型的**json**字符串。有什么建议的朋友......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:12:39.757

那是因为您的 JSON 字符串构造不正确。

试着把它放进去：http: [//jsonlint.com/](http://jsonlint.com/)它会告诉你当前的错误。

另外请在此处阅读有关 JSON 的一些文档[http://json.org/](http://json.org/)因为您实际上正在犯一些基本错误:)

如果您还提供您的 JSON 必须呈现的内容，我可以显示您的 JSON 字符串的正确形式:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:20:00.307

我的字符串如下所示

```
{
"result": "success",
"countryCodeList": [
{
"countryName": "World Wide",
"countryCode": "00"
},
{
"countryName": "Korea, Republic of",
"countryCode": "kr"
},
{
"countryName": "United States",
"countryCode": "us"
},-
{
"countryName": "Japan",
"countryCode": "jp"
},
{
"countryName": "China",
"countryCode": "cn"
},
{
"countryName": "India",
"countryCode": "in"
}
]
} 
```

我已经做好了

```
JSONObject json = new JSONObject(jsonstring);
JSONArray nameArray = json.names();
JSONArray valArray = json.toJSONArray(nameArray);

JSONArray valArray1 = valArray.getJSONArray(1);

    valArray1.toString().replace("[", "");
            valArray1.toString().replace("]", "");

            int len = valArray1.length();

            for (int i = 0; i < valArray1.length(); i++) {

                Country country = new Country();
                JSONObject arr = valArray1.getJSONObject(i);

                country.setCountryCode(arr.getString("countryCode"));
                country.setCountryName(arr.getString("countryName"));
                arrCountries.add(country);
            } 
```

# asp.net - 将错误对象引用未设置为 datalist 中对象的实例

> ID：10980768
> 
> 赞同：0
> 
> 时间：2012-06-11T13:10:27.553
> 
> 标签：asp.net, sql, datalist

我有一个数据列表，其中显示了来自表详细信息的数据，并且工作正常。现在我需要将此数据列表的一些数据插入另一个表detail2。我为数据列表的每个原始数据提供了一个保存按钮，以便单击此保存按钮时，该原始存储的特定数据到表 detail2。波纹管我的数据列表的设计。

```
 <asp:DataList ID="drecord" runat="server" Font-Bold="false" Font-Names="times new roman" Font-Size="Small" DataKeyField="id" RepeatColumns="1">

          <ItemTemplate>              
          <div><table>
             <tr><td><asp:ImageButton ID="ImageButton1" runat="server" ImageUrl='<%# GetImageURL(Eval("Pic")) %>' PostBackUrl='<%# Eval("id", "qrystng.aspx?id={0}") %>'/><br />
            <asp:LinkButton ID="Name1" runat="server" ForeColor="Blue" Text='<%#Container.DataItem("Name")%>'><br />
            </asp:LinkButton><asp:Label ID="id" runat="server" Text='<%#Container.DataItem("id")%>'></asp:Label></td>
            <td><asp:Button ID="insert" runat="server" BorderStyle="None" Font-Bold="true" Text="save" OnClick="saveinsert_click"/></td></tr>
            </table></div>                 
            </ItemTemplate>
 </asp:DataList> 
```

这个 onclick 事件 saveinsert 用于将数据插入到表 detail2 中。

```
 Sub saveinsert(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim cmd As New SqlCommand("insert into detail2(serial,id) values('" & fid & "',@rid)", con)
    cmd.Parameters.Add("@rid", SqlDbType.VarChar).Value = DirectCast(drecord.Controls(0).FindControl("id"), Label).Text
    con.Open()
    cmd.ExecuteNonQuery()
    con.Close()
  End sub 
```

但是当我单击插入按钮时，它会出现“对象引用未设置为对象实例”的错误。异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

并在这一行显示错误“ cmd.Parameters.Add("@rid", SqlDbType.VarChar).Value = DirectCast(drecord.Controls(0).FindControl("id"), Label).Text "

数据列表正确显示记录。我需要将标签“id”的值存储起来。我不知道我哪里出错了。帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:24:28.027

**使用 datalist 的 ItemCommand 事件：**

```
Protected Sub drecord_ItemCommand(source As Object, e As DataListCommandEventArgs)
    If e.CommandName = "CommabdName" Then
     Dim Label1 As Label =  DirectCast(e.item.FindControl("id"), Label)
     Dim labelText As string = Label1.Text
    //write your code here
    End If
End Sub

     <asp:DataList ID="drecord" runat="server" Font-Bold="false" Font-Names="times new roman" Font-Size="Small" DataKeyField="id" RepeatColumns="1">

          <ItemTemplate>              
...................
            <td><asp:Button ID="insert" CommandName="CommabdName" runat="server" BorderStyle="None" Font-Bold="true" Text="save" />
.........................               
            </ItemTemplate>
 </asp:DataList> 
```

# c# - 如何在flowlayout面板中滚动而不在windows窗体中显示滚动条

> ID：10980771
> 
> 赞同：4
> 
> 时间：2012-06-11T13:10:45.273
> 
> 标签：c#, winforms, flowlayoutpanel

我正在开发 WinForms 中的触摸屏 POS。

我有一个 flowlayoutpanel 并动态添加按钮，但我不想显示滚动条。

我使用 2 个按钮来滚动，所以请帮助我如何在不显示滚动条的情况下滚动

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T13:26:56.273

尝试将 FlowLayoutPanel 放置在具有以下属性的另一个面板中：

```
flowLayoutPanel1.AutoScroll = false;
flowLayoutPanel1.AutoSize = true;
flowLayoutPanel1.AutoSizeMode = AutoSizeMode.GrowAndShrink; 
```

`AutoScroll = false;`从这里开始，您必须根据您的两个按钮控制面板内 FlowLayoutPanel1 的位置（也应该有）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T06:09:29.847

取两个按钮 btnLeft 和 btnRight 并尝试以下代码：

```
private void btnLeft_Click(object sender, EventArgs e)
{
    if (flowPanelItemCategory.Location.X <= xpos)
    {
        xmin = flowPanelItemCategory.HorizontalScroll.Minimum;
        if (flowPanelItemCategory.Location.X >= xmin)
        {
            xpos -= 100;
            flowPanelItemCategory.Location = new Point(xpos, 0);
        }
    }
}

private void btnRight_Click(object sender, EventArgs e)
{
    if (flowPanelItemCategory.Location.X <= xpos)
    {
        xmax = flowPanelItemCategory.HorizontalScroll.Maximum;
        if (flowPanelItemCategory.Location.X < xmax)
        {
            xpos += 100;
            flowPanelItemCategory.Location = new Point(xpos, 0);
        }
    }
} 
```

# regex - 使用 sed 提取特定单词

> ID：10980773
> 
> 赞同：0
> 
> 时间：2012-06-11T13:11:06.213
> 
> 标签：regex, linux, sed

我有这样一条线

```
BR_MALLOC %p File - %s, Func - %s, Line - %u\n 
```

这实际上是来自 C 程序的一行，它输出分配的地址、`BR_MALLOC`调用自定义 malloc 的文件等。

现在，我`sed`在此输出上运行以获取分配的地址 (%p)

我试过这个正则表达式

```
$ echo "BR_MALLOC %p File - %s, Func - %s, Line - %u\n" | sed 's/BR_MALLOC\s+\(\S+\).*/\1' 
```

预期产出

```
%p 
```

我得到的输出是

```
BR_MALLOC %p File - %s, Func - %s, Line - %un 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:16:53.103

您可能需要转义`+`（[文档](http://www.gnu.org/software/sed/manual/html_node/Regular-Expressions.html)）：

```
echo "BR_MALLOC %p File - %s, Func - %s, Line - %u\n" | sed 's/BR_MALLOC\s\+\(\S\+\).*/\1/'
%p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:19:28.237

不了解 sed，但是使用 perl，您的表达式几乎可以正常工作：

```
perl -pe 's/BR_MALLOC\s+(\S+).*/$1/' 
```

# sql - 使用 SQL 加载器将 csv 文件导入表中 [但没有很大。列数]

> ID：10980779
> 
> 赞同：3
> 
> 时间：2012-06-11T13:11:20.437
> 
> 标签：sql, oracle, sql-loader

我想以 csv 文件的形式将数据导入表中。[使用 Oracle SQL 开发人员]。我有数百个文件，每个文件大约有 50 列。

来自 SQL*Loader 的 wiki (http://www.orafaq.com/wiki/SQL*Loader_FAQ)

```
 load data
 infile 'c:\data\mydata.csv'
 into table emp
 fields terminated by "," optionally enclosed by '"'          
 ( empno, empname, sal, deptno )  //these are the columns headers 
```

我不想做的是列出所有列标题。我只希望 csv 文件中的所有条目按照它们出现的顺序分配给表中的成员。

此外，毕竟我想我想为所有 100 个文件自动化它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-06T10:08:56.763

您应该记下列（以及它们的类型可选），以便将 csv 文件的值分配给每一列。您应该这样做，因为在脚本中不知道 Oracle 数据库中表中列的顺序。

按照列在 csv 文件中出现的顺序编写列后，您可以通过键入以下内容为所有文件自动执行此脚本：

```
infile *.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T22:22:07.890

你可以试试[oracle csv loader](https://code.google.com/p/oracle-csv-loader)。它会根据 csv 内容自动创建表和控制文件，并使用 sql loader 将 csv 加载到 oracle 表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-04T13:51:36.077

执行您正在寻找的操作的 sqlldr 的替代方法是 SQLcl 中的 LOAD 命令。它只是将 csv 中的标题行与表匹配并加载它。然而，这并不像 sqlldr 那样高性能，也没有那么多控制。

```
LOAD [schema.]table_name[@db_link] file_name 
```

这是它的完整帮助。

```
sql klrice/klrice
...
KLRICE@xe>help load
LOAD
-----

Loads a comma separated value (csv) file into a table.
The first row of the file must be a header row.  The columns in the header row must match the columns defined on the table.

The columns must be delimited by a comma and may optionally be enclosed in double quotes.
Lines can be terminated with standard line terminators for windows, unix or mac.
File must be encoded UTF8.

The load is processed with 50 rows per batch.
If AUTOCOMMIT is set in SQLCL, a commit is done every 10 batches.
The load is terminated if more than 50 errors are found.

LOAD [schema.]table_name[@db_link] file_name
KLRICE@xe> 
```

来自我在[https://github.com/krisrice/maxmind-oracledb的 git repo 的示例](https://github.com/krisrice/maxmind-oracledb)

```
SQL> drop table geo_lite_asn;

Table GEO_LITE_ASN dropped.

SQL> create table geo_lite_asn (
  2     "network" varchar2(32),
  3     "autonomous_system_number" number,
  4     "autonomous_system_organization" varchar2(200))
  5  /

Table GEO_LITE_ASN created.

SQL> load geo_lite_asn GeoLite2-ASN-CSV_20180130/GeoLite2-ASN-Blocks-IPv4.csv
--Number of rows processed: 397,040
--Number of rows in error: 0
0 - SUCCESS: Load processed without errors
SQL> 
```

# c++ - nodejs native c++ npm模块内存错误，开罗图像处理

> ID：10980781
> 
> 赞同：15
> 
> 时间：2012-06-11T13:11:21.900
> 
> 标签：c++, node.js, image-processing, npm

我一直在[node-canvas](https://github.com/LearnBoost/node-canvas/issues/177#issuecomment-6154062)上向 TJ询问我在他创作和维护的节点模块的一个分支中工作的代码加速。

我发现 Canvas.toBuffer() 正在扼杀我们的管道资源，并创建了一个替代方案，它可以简单地从 Canvas 转换为图像，而无需通过 png 缓冲区/媒体 url。问题是 cairo 是一头神秘的野兽，并且对于节点模块内分配的内存还有一个额外的担忧，因为它不会被母亲 v8 GC'd。我已将正确的 HandleScopes 添加到访问 V8 数据的所有必需函数中。

我能够在我的 mac 设置 (6.18) 上测试 Canvas.loadImage(image) 方法数千次，以及在运行相同版本节点的 ubuntu/生产服务器上进行独立测试。但是当代码作为后台进程/服务器运行并由 Gearman 协调时，我会得到一些“有趣的”内存/段错误。

**此外，我无法调用 node-canvas 中定义的任何不在头文件内联的类的方法**。作为一个附带问题*，创建其他节点模块可以依赖的通用本机源代码包的最佳方法是什么？*

我尝试重新创建问题并使用 gdb、node_g 以及使用符号和调试标志构建的所有节点模块运行它。但是错误出现在源代码之外的库中，我可以获得堆栈跟踪。

作为参考，这里是我调用 loadImageData 的地方，虽然它在各种条件下在本地运行，但在我们的生产环境中，当小心地藏在框架服务器中时，它似乎会导致段错误（昨天花了一天时间尝试 gdb node_g 我们的服务器代码，但是框架服务器由 gearman 启动... TL；DR 没有得到根本原因堆栈跟踪）

[https://github.com/victusfate/node-canvas/blob/master/src/Canvas.cc#L497](https://github.com/victusfate/node-canvas/blob/master/src/Canvas.cc#L497)

```
Handle<Value>
 Canvas::LoadImage(const Arguments &args) {
   HandleScope scope;
   LogStream mout(LOG_DEBUG,"node-canvas.paint.ccode.Canvas.LoadImage");    
   mout << "Canvas::LoadImage top " << LogStream::endl;

   Canvas *canvas = ObjectWrap::Unwrap<Canvas>(args.This());
   if (args.Length() < 1) {
     mout << "Canvas::LoadImage Error requires one argument of Image type " << LogStream::endl;
     return ThrowException(Exception::TypeError(String::New("Canvas::LoadImage requires one argument of Image type")));
   }

   Local<Object> obj = args[0]->ToObject();
   Image *img = ObjectWrap::Unwrap<Image>(obj);
   canvas->loadImageData(img);
   return Undefined();
}  

void Canvas::loadImageData(Image *img) {
  LogStream mout(LOG_DEBUG,"node-canvas.paint.ccode.Canvas.loadImageData");    
  if (this->isPDF()) {
    mout << "Canvas::loadImageData pdf canvas type " << LogStream::endl;
    cairo_surface_finish(this->surface());
    closure_t *closure = (closure_t *) this->closure();

    int w = cairo_image_surface_get_width(this->surface());
    int h = cairo_image_surface_get_height(this->surface());

    img->loadFromDataBuffer(closure->data,w,h);
    mout << "Canvas::loadImageData pdf type, finished loading image" << LogStream::endl;
  }
  else {
    mout << "Canvas::loadImageData data canvas type " << LogStream::endl;
    cairo_surface_flush(this->surface());
    int w = cairo_image_surface_get_width(this->surface());
    int h = cairo_image_surface_get_height(this->surface());

    img->loadFromDataBuffer(cairo_image_surface_get_data(this->surface()),w,h);
    mout << "Canvas::loadImageData image type, finished loading image" << LogStream::endl;
  }   
} 
```

这是 Image 中当前方法的样子（我删除了一些注释掉的日志信息） [https://github.com/victusfate/node-canvas/blob/master/src/Image.cc#L240](https://github.com/victusfate/node-canvas/blob/master/src/Image.cc#L240)

```
/*
 * load from data buffer width*height*4 bytes
 */
cairo_status_t
Image::loadFromDataBuffer(uint8_t *buf, int width, int height) {
  this->clearData();
  int stride = cairo_format_stride_for_width (CAIRO_FORMAT_ARGB32, width); // 4*width + ?
  this->_surface = cairo_image_surface_create_for_data(buf,CAIRO_FORMAT_ARGB32,width,height,stride);
  this->data_mode = DATA_IMAGE;
  this->loaded();
  cairo_status_t status = cairo_surface_status(_surface);
  if (status) return status;
  return CAIRO_STATUS_SUCCESS;
} 
```

任何帮助、专业提示、帮助或鼓励的话将不胜感激。

最初来自[谷歌群组](https://groups.google.com/forum/?fromgroups#!searchin/nodejs/mark$20essel/nodejs/vCRd21EskZ8/b7ZEjxfvg9sJ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T22:09:38.080

> 此外，我在调用 node-canvas 中定义的任何不在头文件内联的类的方法时遇到问题。作为一个附带问题，创建其他节点模块可以依赖的通用本机源代码包的最佳方法是什么？

虽然我没有解决我在暂存环境中遇到的内存问题/段错误的答案。对于使用本机节点模块构建可重用库，我确实有一个答案。

我为所有独立的本机节点模块使用 git 子模块，并为它们的每个 wscript 或 binding.gyp 文件添加了条件预处理器定义，以指定是否生成共享对象 .node 模块。

***更新*** *或者，唯一的初始化函数名称或命名空间可以围绕模块初始化调用（移至此设置）。*

此外，我将使用这个新包来帮助调试或重写代码部分（我不能花太多时间调试几个远程库的使用）。

在 wscript 或 binding.gyp 中

```
 flags = ['-D_NAME_NODE_MODULE', '-O3', '-Wall', '-D_FILE_OFFSET_BITS=64', '-D_LARGEFILE_SOURCE', '-msse2'] 
```

然后在初始化文件中

```
#ifdef _NAME_NODE_MODULE

extern "C" {
  static void init(Handle<Object> target) {
    HandleScope scope;
    NODE_SET_METHOD(target, "someFunction", someFunction);
  }

  NODE_MODULE(moduleName, init);
}

#endif 
```

这样，只有在设置标志时才会添加节点本机模块。否则它可以正常链接（如在另一个节点模块中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:06:27.120

**知道了！**

我今天在另一个使用 cairomm 的库上工作，发现从数据缓冲区创建的表面需要这些缓冲区与表面一样长。

[http://www.cairographics.org/manual/cairo-Image-Surfaces.html#cairo-image-surface-create-for-data](http://www.cairographics.org/manual/cairo-Image-Surfaces.html#cairo-image-surface-create-for-data)

"为提供的像素数据创建一个图像表面。必须保留输出缓冲区，直到 cairo_surface_t 被破坏或在表面上调用 cairo_surface_finish()。数据的初始内容将用作初始图像内容；您必须明确清除缓冲区，例如，如果要清除缓冲区，请使用 cairo_rectangle() 和 cairo_fill()。"

我介绍了一个从临时缓冲区创建的表面。

* * *

*node-canvas fork 中的简单解决方案*：

有一个名为 _data 的成员变量，我可以为其分配一个本地分配的数据缓冲区，只要 cairo 表面存在，它就会一直存在。

* * *

*解决方案*：

将缓冲区复制到表面的一般方法是从缓冲区创建一个临时表面，然后从临时表面绘制到分配的表面上，让 cairo 管理它自己的内存。

使用 c api to cairo 来实现它看起来像这样。

```
cairo_surface_t *pTmp = cairo_image_surface_create_for_data (
   data
 , CAIRO_FORMAT_ARGB32
 , width
 , height
 , cairo_format_stride_for_width(CAIRO_FORMAT_ARGB32, width));

_surface = cairo_image_surface_create ( CAIRO_FORMAT_ARGB32
 , width
 , height);

cairo_t *cr = cairo_create (_surface);
cairo_set_source_surface (cr, pTmp, x, y);
cairo_paint (cr); 
```

# c# - “MouseUp”事件是否改变了 NumericUpDown 的值？

> ID：10980790
> 
> 赞同：1
> 
> 时间：2012-06-11T13:12:36.680
> 
> 标签：c#, .net, winforms, events

我需要确定 NumericUpDown 控件的值是否被**mouseUp 事件**更改。

当 numericupdown 的值发生变化时，我需要调用一个昂贵的函数。我不能只使用“ValueChanged”，我需要使用 MouseUp 和 KeyUp 事件。

![在此处输入图像描述](../Images/f349cbd1c6e6a091dc683f2e474bd665.png)

**基本上，我需要知道：**

> 当用户放开鼠标时 numericUpDown 的值是否发生了变化？ ***如果单击任何未以红色突出显示的区域，则答案是否定的。我需要在任何地方但单击红色区域时忽略鼠标向上事件。***

如何通过代码确定这一点？我觉得事件有点混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:24:34.813

这将在用户释放鼠标按钮时触发。您可能想调查释放了哪个鼠标按钮。

**编辑**

```
 decimal numvalue = 0;
    private void numericUpDown1_MouseUp(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left && numvalue != numericUpDown1.Value)
        {
            //expensive routines
            MessageBox.Show(numericUpDown1.Value.ToString());
        }

        numvalue = numericUpDown1.Value;
    } 
```

**编辑 2** 这将确定鼠标左键是否仍然按下，如果它在执行昂贵的例程之前退出，对键盘按钮按下没有帮助。

```
 private void numericUpDown1_ValueChanged(object sender, EventArgs e)
    {
        if ((Control.MouseButtons & MouseButtons.Left) == MouseButtons.Left)
        {
            return;
        }
        //expensive routines

    } 
```

**编辑 3**

[如何检测当前按下的键？](https://stackoverflow.com/questions/1100285/how-to-detect-the-currently-pressed-key)

将有助于解决 Any 键，尽管我认为唯一重要的是箭头键

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:58:39.417

**问题 - 我需要在任何地方但单击红色区域时忽略鼠标向上事件。**

派生一个自定义数值控件，如下所示。获取 Numeric Control 的 TextArea 并忽略 KeyUp。

```
class UpDownLabel : NumericUpDown
{
    private Label mLabel;
    private TextBox mBox;

    public UpDownLabel()
    {
        mBox = this.Controls[1] as TextBox;
        mBox.Enabled = false;
        mLabel = new Label();
        mLabel.Location = mBox.Location;
        mLabel.Size = mBox.Size;
        this.Controls.Add(mLabel);
        mLabel.BringToFront();
        mLabel.MouseUp += new MouseEventHandler(mLabel_MouseUp);
    }

    // ignore the KeyUp event in the textarea
    void mLabel_MouseUp(object sender, MouseEventArgs e)
    {
        return;
    }

    protected override void UpdateEditText()
    {
        base.UpdateEditText();
        if (mLabel != null) mLabel.Text = mBox.Text;
    }
} 
```

在 MainForm 中，使用此控件更新您的设计器，即`UpDownLabel`：-

```
private void numericUpDown1_MouseUp(object sender, MouseEventArgs e)
{
    MessageBox.Show("From Up/Down");
} 
```

引用自 - [https://stackoverflow.com/a/4059473/763026](https://stackoverflow.com/a/4059473/763026)并处理了 MouseUp 事件。

> 现在，使用此控件而不是标准控件并挂钩 KeyUp 事件。当您单击微调器 [Up/Down 按钮，这又是从 UpDownBase 派生的不同控件] 时，您将始终**仅从 Up/Down 按钮获得 KeyUp 事件，即*红色区域。***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:29:23.120

我认为你应该使用`Leave`事件，当`NumericUpDown`控制焦点消失时，它会调用。

```
 int x = 0;
    private void numericUpDown1_Leave(object sender, EventArgs e)
    {
        x++;
        label1.Text = x.ToString();
    } 
```

# javascript - iPad 仅在第一次链接点击时阻止默认操作

> ID：10980796
> 
> 赞同：1
> 
> 时间：2012-06-11T13:13:25.483
> 
> 标签：javascript, jquery, iphone, ipad, safari

我的页面上有一个链接，我想在 iPad 上按如下方式操作。

仅在第一次单击时，阻止默认操作（即不应遵循 href 操作），在后续单击时，遵循/允许默认操作（即应遵循 href 操作）。

我写的代码是：

```
if (navigator.userAgent.match(/iPad/i) != null)
{
var clickCount = 0;

$("a").click(function(event) { 
    if (clickCount == 0)
    {
        event.preventDefault(); 
    }   
    else{
        return true;
    }
    });
    clickCount++;
} 
```

现在由于某种原因，即使在第一次点击时，它也会跟随链接。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:17:23.960

尝试从-event`clickCount++;`进入回调函数。`click`

```
$("a").click(function(event) { 
    if (clickCount == 0){
        event.preventDefault(); 
    }   
    else{
        return true;
    }
    clickCount++;
}); 
```

​ 目前，`clickCount++;`在加载文档时调用，并且已设置`1`为第一次触发事件时。

# bash - 将数据发送到正在运行的 shell 脚本

> ID：10980797
> 
> 赞同：0
> 
> 时间：2012-06-11T13:13:27.707
> 
> 标签：bash, shell, unix

我不断运行等待输入并每 15 秒将“等待输入”打印到标准输出的脚本。我需要在脚本运行时模拟在标准输入中粘贴 IP 地址列表的操作。例如，我需要手动执行以下步骤：复制下面的列表，包括最后一个列表元素之后的新行并将其直接粘贴到标准输入中。

```
127.0.0.1
127.0.0.2
127.0.0.3 
```

我尝试使用文件中的管道和重定向（同时使用 \n 和 \r）但没有成功

```
echo "127.0.0.1\n127.0.0.2\n" | script 
```

或者

```
script < file 
```

其中文件包含相同的 IP 地址。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:21:55.223

使用先进先出！

```
mkfifo /path/to/tmp.fifo
tail -f /path/to/tmp.fifo | script 
```

现在，每当您向 fifo 发送某些东西（从另一个 TTY，从一个进程，等等）时，就好像您输入了等待脚本一样，例如

```
echo "127.0.0.1" >> /path/to/tmp.fifo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:25:27.400

使用 `cat`. 如果你执行：

```
cat | script 
```

您可以剪切-n-粘贴或输入 tty。

# poco - Entity Framework 4.3 修改 T4 模板生成类

> ID：10980801
> 
> 赞同：0
> 
> 时间：2012-06-11T13:13:42.583
> 
> 标签：poco, t4, database-migration, composite-key, entity-framework-4.3

我有一个使用完整主键生成的数据库优先模型。数据库优先模型工作正常。但是现在我已经升级了我的 Entity Framework 4.3。我修改了EF自带的标准T4模板。

现在，当我对项目使用 Add-Migration 初始时，它抱怨我的实体没有定义主键。这不是真的（或在某种程度上）... 更深入地看，我有复合键，EF 希望我`[Key, Column(0)]`在所有关键元素上对其进行定义。

```
System.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'SupplierWarehouses' is based on type 'SupplierWarehouses' that has no keys defined. 
```

我面临的问题是我试图修改`WriteProperty`T4 模板（DbContext）的方法，并且对象上似乎没有`Entity Key`属性`System.Data.Metadata.Edm.EdmProperty`。现在这个属性是从 Visual Studio 模型编辑器中显示的，所以理论上它应该存在。

感谢有人可以帮助我解决这个问题

桑吉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T10:40:15.833

我发现它`System.Data.Metadata.Edm.EdmProperty`没有这个属性，它需要从`System.Data.Metadata.Edm.EntityType`实际属性中引用`KeyMembers`。

我对 T4 进行了更改以`WriteProperty`接受实体对象，现在它可以作为美。

# php - 搜索一个数组并替换它的一些值

> ID：10980802
> 
> 赞同：-1
> 
> 时间：2012-06-11T13:13:51.120
> 
> 标签：php, arrays, search, replace

我有一个 preg_match_all 从字符串生成一个 url 数组。该数组类似于：

```
$url[0] = "http://www.siteone.com";
$url[1] = "http://www.sitetwo.com";
$url[2] = "http://www.sitethree.com/example1";
$url[3] = "http://www.sitefour.com";
$url[4] = "http://www.sitethree.com/example2";
$url[5] = "http://www.sitefive";
$url[6] = "http://www.sitesix";
$url[7] = "http://www.siteseven";
$url[8] = "http://www.sitethree.com/example3"; 
```

但是，我需要能够搜索 #url 数组以更改包含“http://www.sitethree.com”的值，并将数组中的这个特定值设置为“无值”。因此，一旦应用此过程，数组将如下所示：

```
$url[0] = "http://www.siteone.com";
$url[1] = "http://www.sitetwo.com";
$url[2] = "no value";
$url[3] = "http://www.sitefour.com";
$url[4] = "no value";
$url[5] = "http://www.sitefive";
$url[6] = "http://www.sitesix";
$url[7] = "http://www.siteseven";
$url[8] = "no value"; 
```

我已经在循环中尝试了许多 preg_match_all 和 if 语句的变体，但就是无法得到它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:16:23.027

```
$url = array_map(function($v) {
    return strpos($v, 'http://www.sitethree.com') === false ? $v : 'no value';
}, $url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:17:37.047

```
foreach ($url as &$value) {
  if (strpos($value, 'http://www.sitethree.com') === 0) {
    $value = 'no value';
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:16:28.447

```
foreach($url as $id => $link){
    if(strstr($link, 'sitethree.com')){
         $url[$id] = 'no value';
    }
}
print_r($url); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T13:16:57.373

一个简单的方法是这样的：

```
foreach($url as $key => $value)
{
  if(stristr($value, "http://www.sitethree.com"))
  {
    $url[$key] = "no value";
  }
} 
```

# vim - 如何使 Tlist vi 插件显示 .lib 文件的功能？

> ID：10980805
> 
> 赞同：2
> 
> 时间：2012-06-11T13:14:04.587
> 
> 标签：vim, vi, tlist

我有一堆以 .lib 作为扩展名的 shell 脚本文件，除非使用 .sh 作为扩展名重命名文件，否则 Tlist 不会使用这些函数。

如何在不重命名文件的情况下将 .lib 文件列为 shell 脚本？

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:56:05.463

vi 将文件类型列为“cobol”，因此要求 ctgas 将此文件类型视为 Sh 为我工作

将以下行添加到 .vimrc 就可以了：

```
let tlist_cobol_settings = 'Sh;c:class;f:function' 
```

丹尼尔

# android - 自定义错误弹窗背景

> ID：10980806
> 
> 赞同：5
> 
> 时间：2012-06-11T13:14:11.963
> 
> 标签：android, popup, textview

有没有办法为 TextView: 中的错误弹出窗口设置自定义布局 ![有效的 XHTML](../Images/a99759a75a6769a9af6d94c0459670ec.png)。
我们`textView.setError(String, Drawable)`只能设置一个错误图标。 `showError()`方法在`TextView `and ErrorPopup` class are private, so I can't work with them.`

 `Any ideas? Thanks in advance! Michael

**UPD:**
Thanks for comments, but as I understand it, the theme trick isn't applicable here: (TextView 3384 line from android-10)` 

```
void fixDirection(boolean above) {
    mAbove = above;

    if (above) {
        mView.setBackgroundResource(com.android.internal.R.drawable.popup_inline_error_above);
    } else {
        mView.setBackgroundResource(com.android.internal.R.drawable.popup_inline_error);
    }
} 
```

在 android-15 中使用了 com.android.internal.R.styleable.Theme_errorMessageBackground 主题参数，但它是内部的。
因此，除了编写我自己的错误通知器外，我看不到任何解决此问题的方法）：

# c++ - C++ 中的全局变量

> ID：10980807
> 
> 赞同：0
> 
> 时间：2012-06-11T13:14:17.410
> 
> 标签：c++, global-variables

我正在编写 c++ 项目，其中包含几个类。我创建了一个名为 Position.h 的 .h 文件，其中包含一个数组和一个函数：

```
class Position
{
public:
    Coord positions[25];

public:
    void setPos(int index, double x, double y)
    {
        positions[index].x = x;
        positions[index].y = y;
    }
}; 
```

我想从另一个类中设置这个数组中的值，所以这个项目中的每个类都会看到相同的值。我在其他类中包含了“Position.h”，但我无法访问“positions”数组。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:18:28.183

`positions`是与类实例关联的成员变量，因此不是全局变量。您可以通过 make 它使其类似于全局变量`static`。这样做，它将成为一个类范围的变量，而不是绑定到一个实例。

您需要在单个实现文件中定义它。

一个更好的选择是拥有一个`std::vector<Coord>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:21:25.777

只需更改声明：

```
Coord positions[25]; 
```

到

```
static Coord positions[25]; 
```

也`void setPos` 改为

```
static void setPos 
```

在访问数组时，将其访问为：

```
Position::positions[any value] 
```

但在访问数组之前，请确保调用该函数`setPos`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:22:39.067

根据其他人的建议，您可以制作成员`static`。

您还可以创建`Position`该类的实例作为全局变量，并使用它：

```
Position globalPosition;

void function_using_position()
{
    globalPosition.setPos(0, 1, 2);
}

int main()
{
    function_using_position();
} 
```

或者将其设为局部变量，并将其作为参考传递：

```
void function_using_position(Position &position)
{
    position.setPos(0, 1, 2);
}

int main()
{
    Position localPosition;

    function_using_position(localPosition);
} 
```

# c# - Windows Phone 中的 SHA-1 算法

> ID：10980811
> 
> 赞同：2
> 
> 时间：2012-06-11T13:14:26.927
> 
> 标签：c#, windows-phone-7

在我的 Windows Phone 应用程序中，我需要使用 SHA-1 算法获取哈希。我怎样才能做到这一点？例如我有`string text="1234";`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T13:20:46.720

您将使用[`SHA1Managed`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha1managed(v=vs.95).aspx)该类来计算字节数组的哈希值。可能会做这样的事情：

```
var sha = new SHA1Managed(); 
var bytes = System.Text.Encoding.UTF8.GetBytes(text);
byte[] resultHash = sha.ComputeHash(bytes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:17:44.637

```
SHA1 sha = new SHA1CryptoServiceProvider(); 
byte[] result = sha.ComputeHash(System.Text.Encoding.UTF8.GetBytes(text)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:22:06.203

您应该使用[System.Security.Cryptography.SHA1Managed](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha1managed%28VS.95%29.aspx)类。

# android - android manifest.xml，带有文本编辑器的编辑器可以，但是使用 android manifest 编辑器不起作用

> ID：10980817
> 
> 赞同：1
> 
> 时间：2012-06-11T13:14:55.787
> 
> 标签：android, android-manifest, manifest

我是 android 新手，当我使用 Eclipse 学习“Hello World”课程时，奇怪的事情发生了：当我用“Android Manifest Editor”打开 manifest.xml 文件并在其中输入一些代码时，例如权限代码，它导致错误：

```
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-sdk android:minSdkVersion="8" /> 
```

在这句话中：

```
<uses-sdk android:minSdkVersion="8" /> 
```

说这些："标签应该指定一个目标API级别（最高验证版本；在更高版本上运行时，可能会启用兼容性行为） android:targetSdkVersion="?""

但是如果我使用“文本编辑器”来编辑它，那就没问题了……我不知道为什么，有人知道吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:17:42.083

您应该包含一个`targetSdkVersion`属性，以便应用知道您所针对的版本：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8"/> 
```

（或其他版本，如果您正在创建具有向后兼容性或类似的应用程序）

您看到警告或错误消息的原因是，与无法识别这些问题的默认文本编辑器相比，Manifest 编辑器更高级且更专门用于编辑 android 清单。

# php - PHP：电话号码解析

> ID：10980820
> 
> 赞同：3
> 
> 时间：2012-06-11T13:15:20.263
> 
> 标签：php, validation, parsing

我正在寻找某种方法来验证 PHP 中的电话号码，它可以以现有的各种格式输入。如果有帮助，我可以将问题的域限制为仅美国电话号码（或国际号码 - 一个或另一个，但不能两者兼有）。

我已经尝试寻找自定义过滤器`filter_var()`，相当于`strtotime()`电话号码，或者只是普通的香草解析库，但没有太多运气。

如果需要，我可以设计一个定制的解决方案，但如果已经存在，我不喜欢，因为 A）我的肯定不会那么健壮，并且 B）我不喜欢重新发明轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:18:10.630

使用正则表达式，以下内容将匹配 3334445555、333.444.5555、333-444-5555、333 444 5555、(333) 444 5555 及其所有组合。然后用 (333) 444-5555 替换所有这些

```
preg_replace('\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})', '(\1) \2-\3', $text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:20:00.443

“解析”电话号码不是原生 PHP 要做的事情。

您需要自己指定什么是“有效”电话号码 - 这应该通过根据指定格式或正则表达式验证输入来完成。

PHP 无法知道“有效电话号码”是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:26:44.710

我不知道所有美国电话号码格式，但我猜这是您可以扩展的一般想法：

```
function validate_phone($phone) {
  // replace everything except numbers
  $phone = preg_replace('~[^\dx]~', '', $phone);

  return preg_match('~^\d{11}(x\d{4})?$~', $phone);
}

// $phone = 12345678901;
$phone = '1-234-567-8901x1234';
$valid = filter_var($phone, FILTER_CALLBACK, array(
  'options' => 'validate_phone'
));

if ($valid) {
  echo "It's valid!";
}; 
```

此代码支持 11 位数字（内部带有破折号、空格、点）和带有 x2134 后缀的扩展格式。

# jquery - 好奇为什么 使用 jQuery .css 后变成 oldtitle

> ID：10980821
> 
> 赞同：3
> 
> 时间：2012-06-11T13:15:22.543
> 
> 标签：jquery, html, title, qtip

我的工作代码：

```
$("#selectResult").append("<div id='"+arr[this.id]+"' class='inline' 
title='Co. "+arr[this.id]+"'></div>");

$("#"+arr[this.id]).css({'background-image' : 'url(./img/coatofarms/'
+arr[this.id]+'.png)','background-repeat': 'no-repeat','background-position': 
'bottom'}).qtip(countyCrest); 
```

在我附加 div 的第一个选择中，我给出了标题，当我检查元素时`title`，它应该是它应该的样子。然后，当我在 div 的第二个选择中更改 .css 时，检查元素标题现在是`oldtitle="Co. Down" title=""`

这里发生了什么？

这是检查元素代码

```
<div id="Antrim" class="inline" style="background-image: 
url(http://danu2.it.nuigalway.ie/09101916/trazoo/demo_1/img/coatofarms/Antrim.png);
 background-position: 50% 100%; background-repeat: no-repeat no-repeat; " 
oldtitle="Co. Antrim" title=""></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:19:44.377

qTip 清空标题属性，这样您就不会同时看到 qTip 气球和默认浏览器工具提示。原始标题存储在`oldtitle`属性中。

进一步来说：

> 不幸的是，必须删除标题属性，以便抑制默认浏览器工具提示。即使对于那些不从 title 属性本身获取内容的元素，也需要将其删除，或者在 qTip 的情况下重命名，这样我们就不会出现两个工具提示！

（来自[https://github.com/Craga89/qTip2/issues/215](https://github.com/Craga89/qTip2/issues/215)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:20:00.090

我想您可能会发现 qtip 插件正在将标题重新分配给新属性，而不是更改为 css。

不喜欢 qtip，但它听起来像一个工具提示插件，所以作者可能希望在使用 qtip 时停止默认的浏览器对标题的工具提示实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T11:42:21.830

您可以将这样的东西添加到您的 javascript 中：

```
$('[title!=""]').qtip({
  suppress: false
}); 
```

至少我用这个解决了我的类似问题。 [qTip](https://github.com/qTip2/qTip2)似乎已[默认](https://github.com/qTip2/qTip2/blob/master/src/core/defaults.js#L18)`suppress`设置为，并将title 属性[替换](https://github.com/qTip2/qTip2/blob/master/src/core/jquery_methods.js#L74)为.`true` `oldtitle`

# html - 不带固定高度的滚动条/带滚动条的动态高度

> ID：10980822
> 
> 赞同：65
> 
> 时间：2012-06-11T13:15:24.250
> 
> 标签：html, css, scrollbar

我有这个 HTML 结构：

```
<div id="body">
    <div id="head">
        <p>Dynamic height without scrollbar</p>
    </div>
    <div id="content">
        <p>Dynamic height with scrollbar</p>
    </div>
    <div id="foot">
        <p>Fixed height without scrollbar</p>
    </div>  
</div> 
```

我想让三个部分在主要部分（#body）内没有溢出。所以我需要在中间部分有一个滚动条。

我试过这个CSS：

```
#content{
    border: red solid 1px;
    overflow-y: auto;
} 
```

还有这个：

```
#content{
    border: red solid 1px;
    overflow-y: auto;
    height: 100%;
} 
```

但它们都不起作用。

我在[JSFiddle](http://jsfiddle.net/6WAnd/)做了一个例子。

我可以只用 CSS 和 HTML 做到这一点吗？我宁愿避免使用Javascript。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2016-08-24T13:27:55.337

Flexbox 是一种现代替代方案，可让您在没有固定高度或 JavaScript 的情况下执行此操作。

`display: flex; flex-direction: column;`在容器以及`flex-shrink: 0;`页眉和页脚 div 上设置可以解决问题：

HTML：

```
<div id="body">
    <div id="head">
        <p>Dynamic size without scrollbar</p>
        <p>Dynamic size without scrollbar</p>
        <p>Dynamic size without scrollbar</p>  
    </div>
    <div id="content">
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
        <p>Dynamic size with scrollbar</p>
    </div>
    <div id="foot">
        <p>Fixed size without scrollbar</p>
        <p>Fixed size without scrollbar</p>
    </div>  
</div> 
```

CSS：

```
#body {
    position: absolute;
    top: 150px;
    left: 150px;
    height: 300px;
    width: 500px;
    border: black dashed 2px;
    display: flex;
    flex-direction: column;
}

#head {
    border: green solid 1px;
    flex-shrink: 0;
}

#content{
    border: red solid 1px;
    overflow-y: auto;
    /*height: 100%;*/
}

#foot {
    border: blue solid 1px;
    height: 50px;
    flex-shrink: 0;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-10-29T11:53:11.140

我对 PrimeNG p_Dialog 内容有类似的问题，我通过以下样式修复了 contentStyle

```
height: 'calc(100vh - 127px)' 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-04-23T06:28:06.843

用这个：

```
style="height: 150px; max-height: 300px; overflow: auto;" 
```

固定一个高度，它将是默认高度，然后滚动条来访问整个高度

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-16T07:19:18.303

```
 <div id="scroll">
    <p>Try to add more text</p>
 </div> 
```

这是CSS代码

```
#scroll {
   overflow-y:auto;
   height:auto;
   max-height:200px;
   border:1px solid black;
   width:300px;
 } 
```

这是演示[JSFIDDLE](http://jsfiddle.net/xXJD25/wkpw8wcc/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-11T13:26:19.547

你必须指定一个固定的高度，你不能使用 100% 因为没有什么可以比较的，比如`height=100%`什么？

编辑小提琴：

[http://jsfiddle.net/6WAnd/4/](http://jsfiddle.net/6WAnd/4/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-11T15:31:48.437

JS 对这个问题的回答是：

[http://jsfiddle.net/6WAnd/20/](http://jsfiddle.net/6WAnd/20/)

或类似的东西

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-20T18:32:37.273

一种使用非常少的 JS 和 CSS 填充的快速、干净的方法：http: [//jsfiddle.net/benjamincharity/ZcTsT/14/](http://jsfiddle.net/benjamincharity/ZcTsT/14/)

```
var headerHeight = $('#header').height(),
    footerHeight = $('#footer').height();

$('#content').css({
  'padding-top': headerHeight,
  'padding-bottom': footerHeight
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-03-23T12:40:11.723

扩展使用 flexbox 的@mtyaka 答案，如果您的可滚动在 dom 中很深，则需要对所有父元素使用溢出：自动/隐藏，直到我们获得固定高度

jsfiddle [https://jsfiddle.net/rohilaharsh/cuazdnkh/1/](https://jsfiddle.net/rohilaharsh/cuazdnkh/1/)

HTML：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Container</title>
</head>
<body>
    <div class="one">
    One
        <div class="two">
    Two
            <div class="three">
      Three
                <div class="table">
          Table
                    <div class="header">Table Header</div>
                    <div class="body">Lorem ipsum dolor sit amet consectetur adipisicing elit. Iure maiores corporis quisquam enim at nam earum non atque dolorum nulla quidem perferendis, porro eveniet! Quisquam, fugit ex aspernatur, aliquid necessitatibus amet aperiam pariatur facilis suscipit ea dolorum qui ratione assumenda eum minima. At a ullam magnam eveniet, hic sit quis dicta perferendis excepturi nemo voluptate ipsum doloremque expedita illo dolor voluptates culpa consequuntur quaerat porro reprehenderit ab alias! Maxime reprehenderit nihil doloribus exercitationem, cupiditate quasi dolorum voluptas repellendus vel fugit incidunt praesentium molestias modi numquam! Quo porro laudantium aperiam suscipit, molestiae quibusdam veniam cum nam fuga facere fugit quisquam distinctio!</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 
```

CSS：

```
html {
  height: 100%;
}

html, body, .one,.two,.three,.table {
  display: flex;
  flex-direction: column;

  /* important */
  overflow: hidden;

  flex: 1;
  margin: 0;
}

.body {
  width: 200px;
  overflow: auto;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-13T07:27:50.203

使用显示网格，您可以动态调整每个部分的高度。

```
#body{
  display:grid;
  grid-template-rows:1fr 1fr 1fr;
} 
```

添加上面的代码，你会得到想要的结果。

有时，当涉及到许多级别的网格时，css 不会将您的#content 限制为 1fr。在这种情况下使用：

```
#content{
  max-height:100%;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-11T13:20:51.010

我不知道我是否做对了，但这能[解决](http://jsfiddle.net/6WAnd/9/)你的问题吗？

我只是改变了`overflow-y: scroll;`

```
#content{
    border: red solid 1px;
    overflow-y: scroll;
    height: 100px;
} 
```

**已编辑**

然后尝试使用这样的百分比值：http: [//jsfiddle.net/6WANd/19/](http://jsfiddle.net/6WAnd/19/)

**CSS**标记：

```
#body {
    position: absolute;
    top; 150px;
    left: 150px;
    height: 98%;
    width: 500px;
    border: black dashed 2px;
}    
#head {
    border: green solid 1px;
    height: 15%;
}
#content{
    border: red solid 1px;
    overflow-y: scroll;
    height: 70%;
}
#foot {
    border: blue solid 1px;
    height: 15%;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-11T13:22:43.493

用这个：

```
#head {
    border: green solid 1px;
    height:auto;
}    
#content{
            border: red solid 1px;
            overflow-y: scroll;
            height:150px;       
        } 
```

# jquery - Twitter Bootstrap 导航可以在桌面上运行，但不能在移动设备上运行

> ID：10980825
> 
> 赞同：1
> 
> 时间：2012-06-11T13:15:31.703
> 
> 标签：jquery, html, css, twitter-bootstrap, responsive-design

我正在使用 Twitter Bootstrap 中的折叠导航菜单，如下所示：http: [//twitter.github.com/bootstrap/examples/starter-template.html](http://twitter.github.com/bootstrap/examples/starter-template.html)

当我通过调整浏览器窗口的大小在桌面上的浏览器中测试它时它工作正常，但当我在我的手机（iPhone 4s）上测试它时没有任何反应。

上面来自 Bootstrap 的示例页面适用于我的手机，所以我一直在比较两者，无法弄清楚是什么导致它不触发。

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T04:17:17.570

我记得面临同样的问题。无论如何，这就是我所做的。

将以下内容放在头部。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:34:16.053

我将引导代码更新到 2.3.0 版，移动设备开始运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:06:49.623

我在选项卡式导航中遇到了完全相同的问题。

在桌面上工作得很好，但我一去 iphone/ipad 就死了。

它只是让#page-name 出现在 URL 中。

但我错过了一个技巧 - 我忘了添加这个......

```
$('#myTab a').click(function (e) {
    e.preventDefault();
    $(this).tab('show');
}) 
```

Boom 选项卡现在可以在 iphone/ipad 上使用

# java - dom4j-java-如何更改属性的值

> ID：10980826
> 
> 赞同：3
> 
> 时间：2012-06-11T13:15:34.143
> 
> 标签：java, xml, dom4j

在 Java 程序中，我正在使用 dom4j 处理 xml。

现在，我想更新元素的属性。

这是我用来获取该元素的代码——

```
 SAXReader reader = new SAXReader();
     doc = reader.read(new StringReader(xmlinput));

     Element root = doc.getRootElement();
    for ( Iterator i = root.elementIterator( "cloudwhile" ); i.hasNext(); ) {
            Element foo = (Element) i.next(); 
```

现在，我想更新元素“foo”的属性值——

为此，我尝试使用以下代码-

```
 foo.setAttributeValue("indexstart", (String) newstart ); 
```

但是不推荐使用上述方法......我现在如何更新属性？另外，我想在更新元素“foo”的属性后立即采用修改后的 xml 的字符串表示形式——我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T13:22:18.397

JavaDoc 说要[`addAttribute(...)`](https://dom4j.github.io/javadoc/2.1.1/org/dom4j/Element.html#addAttribute-java.lang.String-java.lang.String-)改用。该名称有些误导，因为它将替换现有属性的内容 - 相当于更新值。

> 添加给定完全限定名称的属性值。如果给定名称的属性已经存在，它将被替换。具有空值的属性会被静默忽略。如果属性的值为 null，则此方法调用将删除具有给定名称的所有属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:19:42.240

正如[文档中所说](https://dom4j.github.io/javadoc/2.1.1/org/dom4j/Element.html#setAttributeValue-java.lang.String-java.lang.String-)，请改用[`addAttribute(String attributeName, String value)`](https://dom4j.github.io/javadoc/2.1.1/org/dom4j/Element.html#addAttribute-java.lang.String-java.lang.String-)。

# java - 使用java比较xml和xsd

> ID：10980828
> 
> 赞同：1
> 
> 时间：2012-06-11T13:15:55.397
> 
> 标签：java, android, xsd, xml-parsing

目前我正在使用 xmlunit 来验证我的 xml 文件与架构定义。我面临的问题是我的模式已在元素级别定义，因此在验证时我得到了错误。与 xsd 相同的 xml 验证在 altova 中运行良好。

谁能建议我实现目标的正确方法。这是我现在的代码。

```
InputSource is = new InputSource(new FileInputStream("give xml file here"));
Validator v = new Validator(is);
v.useXMLSchema(true);
v.setJAXP12SchemaSource(new File("Give scema here"));
boolean isValid = v.isValid(); 
```

提前致谢。

# java - Java 动态编程中的 GOTO/Continue

> ID：10980829
> 
> 赞同：0
> 
> 时间：2012-06-11T13:16:06.007
> 
> 标签：java, dynamic-programming, goto, continue

我在 Java 中有以下代码实现动态编程递归关系：

```
public double routeCost() throws Exception {
    double cost = Double.MAX_VALUE;
    for (int l=i; l<=j; l++) {
        if (! (customers.get(l) instanceof VehicleCustomer) )
            continue;
        double value = F(l,j) + (customers.get(l).distanceFrom(depot));
        if (value < cost)
            cost = value;
    }

    return cost;
}

private double F(int l, int m) {

    //=========================== FIRST CASE ===========================
    if (l==i && m==i) {
        //System.out.println(i+","+j+","+l+","+m);
        return firstCase();
    }

    //=========================== SECOND CASE ===========================
    if (l==i && (i<m && m<=j) ) {
        //System.out.println(i+","+j+","+l+","+m);
        //analyses the possibility of performing all the soubtours based at heicle customert_i
        return secondCase(i,m);

    }
    //=========================== GENERAL CASE ===========================
    else  {
        System.out.println(i+","+j+","+l+","+m);

        assert (customers.get(l) instanceof VehicleCustomer);

        assert ( (i<l && l<=j) && (l<=m && m<=j) );
        return Math.min(thirdCaseFirstTerm(l,m), thirdCaseSecondTerm(l,m));
    } 

}

private double firstCase() {
    mainRoute.add(depot);
    mainRoute.add(customers.get(i));
    return depot.distanceFrom(customers.get(i));
}

private double secondCase(int i,int m) {
    double caseValue = Double.MAX_VALUE;
    int k = i;
    while (k<m) {   
        double totalDemand=0;
        for (int u=k+1; ( (u<=m) && (totalDemand<=truckCapacity) ); u++)
            totalDemand += customers.get(u).getDemand();

        double cost = F(i,k) + thita(i,k+1,m);
        if (cost <= caseValue) 
            caseValue = cost;

        k++;
    }       
    return caseValue;
}

private double thirdCaseFirstTerm(int l, int m) {
    double caseValue = Double.MAX_VALUE;

    int k = i;
    while (k<m) {

        double totalDemand=0;
        for (int u=k+1; ( (u<=m) && (totalDemand<=truckCapacity) ); u++)
            totalDemand += customers.get(u).getDemand();

        double cost = F(l,k) + thita(l,k+1,m);
        if (cost <= caseValue) 
            caseValue = cost;
        k++;
    }

    return caseValue;
}

private double thirdCaseSecondTerm(int l,int m) {
    double caseValue = Double.MAX_VALUE;

    int k = i; 

    for (Customer cust : customers) {
        int h = customers.indexOf(cust);
        if ( (!(cust instanceof VehicleCustomer)) || (h >=l)) {
            continue;
        }

        double totalDemand=0;
        for (int u=k+2; ( (u<=m) && (totalDemand<=truckCapacity) ); u++)
            totalDemand += customers.get(u).getDemand();

        double cost = F(h,k) + customers.get(h).distanceFrom(customers.get(l)) + thita(l,k+2,m);
        if (cost < caseValue)
            caseValue = cost;
    }

    return caseValue;
} 
```

方法 F(int,int) 从方法 routeCost() 中的 for 循环调用。我想找到一种方法来强制执行，只要断言`assert (customers.get(l) instanceof VehicleCustomer);` ` 不正确，而不是继续返回语句，我想从 routeCost() 的 for 循环中继续进行下一次迭代。但是 F() 必须返回一个值！

我知道我正在尝试做的事情几乎违反了面向对象的所有规则，但我真的需要这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:20:08.803

你可以扔进`Exception`去`F()`然后接住它`routeCost()`。

这种方法比使用断言要好得多。它们在实践中很少使用，这是有充分理由的：异常更灵活，更适合检测错误、无效输入等。

^([PS：当我说“很少使用”时，我是基于这样一个事实，即我在过去几年中看到了数十万行 Java 代码，并且我很少遇到使用断言的代码。])

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:33:58.787

你可以返回一个特殊的值`Double.NaN`，你可以用它来检查`Double.isNaN(d)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:48:00.307

为什么不用 if 语句替换断言？如果 if 语句为真，则计算该值，否则返回 double 的 MAX_VALUE。当 F 返回 MAX_VALUE 时，不会更新成本。

```
if (customers.get(l) instanceof VehicleCustomer) {
  if ( (i<l && l<=j) && (l<=m && m<=j) ) {
    return Math.min(thirdCaseFirstTerm(l,m), thirdCaseSecondTerm(l,m));
  }
}
return Double.MAX_VALUE; 
```

在开发过程中使用断言来清除在私有方法中不应该发生的事情。（断言可以在生产中关闭）

当意外发生时抛出异常（例如，您的类的客户端传入无效数据）。

但是，从您的问题来看，您似乎希望获得不是 VehicleCustomer 的实例，因此断言和异常在这里不是正确的方法。

Peter Lawrey 和 Jeff 的答案也将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T13:23:11.830

您可以让 F() 返回一个 Double （而不是 double ）并在您的断言失败的情况下返回 null 。然后让你的外部 for 循环在添加之前对返回的值进行空检查，等等。

# jquery - 选择菜单失去焦点

> ID：10980832
> 
> 赞同：1
> 
> 时间：2012-06-11T13:16:20.280
> 
> 标签：jquery

单击“单击我”时，文本变为选择菜单。更改选择菜单时，它会更新文本。

我需要做的最后一件事是如果选择菜单失去焦点（即单击选择菜单以外的其他内容），则恢复为原始文本。我该怎么做呢？

谢谢

[http://jsfiddle.net/tBRf8/2/](http://jsfiddle.net/tBRf8/2/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" /> 
<title>Select Clones</title>
<style type="text/css">
.hide {display:none;}
</style>

<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script> 
<script type="text/javascript">

$(document).ready(function(){

    $('#add').click(function(){
        $('#my-table tbody').append($("#row-clone").clone(true).removeAttr('id'));
    })

    $("#my-table td.edit")
    .on("click", "span", function(){
        var $t    = $(this),
        $html = $t.parent(),
        role  = $t.text();
        $html.html($("#select-clone").clone(true).removeAttr('id').removeAttr('class').focus().blur(function() {alert('Handler for .blur() called.')}));
        //$html.html($("#select-clone").clone(true).removeAttr('id').removeAttr('class'));
    })
    .on("change", "select", function() {
        var $t = $(this),
        val   = $('<span>').html($t.find(':selected').html());
        $t.parent().html(val);
    });

    //$('#select-clone').blur(function() {alert('Handler for .blur() called.')});
    //$('#select-clone').focusout(function() {alert('Handler for .focusout() called.')});

});

</script>

</head>
<body>

<table id="my-table">
  <thead class="hide">
    <tr id="row-clone"><td></td><td class="edit"><span>Click Me</span></td></tr>
  </thead>
  <tbody>
    <tr><td></td><td class="edit"><span>Click Me</span></td></tr>
    <tr><td></td><td class="edit"><span>Click Me</span></td></tr>
    <tr><td></td><td class="edit"><span>Click Me</span></td></tr>
  </tbody>
</table>
<br />
<select id="select-clone" class="hide">
<option value="1">One</option>
<option value="2">Two</option>
<option value="3">Three</option>
</select>

<button id="add">Add</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:19:52.607

用于`$("td.edit select").focus();`在显示时将焦点放在选择框上，然后使用 blur 事件：

```
$('#select-clone').blur(function () {
  $(this).hide();
}); 
```

# jquery - Jquery UI 可调整大小问题超出了包含范围（也使用了可拖动）

> ID：10980833
> 
> 赞同：3
> 
> 时间：2012-06-11T13:16:20.797
> 
> 标签：jquery, jquery-ui, jquery-resizable

我面临的问题是 div 的可调整性。当我将它与 Draggable 一起使用时，它会出现问题并且无法按宽度调整它的大小。

如果我单独使用可调整大小，那很好。但我需要让它与可拖动功能一起使用。

请建议。

**[单击演示的 jsFiddle 链接。](http://jsfiddle.net/e2yfC/1/)**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T13:45:15.310

将 a 添加`position:relative;`到容器中解决了这个问题。

请参阅此[工作小提琴](http://jsfiddle.net/zuul/e2yfC/5/)示例！

```
#ParentDIV {
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T03:09:03.167

如果您的可拖动元素是绝对定位的并且您的容器是绝对定位的，您可以将拖动的元素设置为固定的宽度和高度。这将创建一个边界框并防止可拖动对象从边缘掉落。

```
#container {
    position:absolute;
}

#draggedObject {
    position:absolute:
    width: 100px;
    height: 50px;
} 
```

# mysql - 使用多个 AND 优化连接查询的最佳方法是什么？

> ID：10980834
> 
> 赞同：3
> 
> 时间：2012-06-11T13:16:20.863
> 
> 标签：mysql, sql, sql-optimization

我正在开发一个在线预订系统，人们可以在其中根据一天中特定时间的可用性预订物品。为此，我使用了两个表 1.Item 2.Reservation

```
 Item:(InnoDB)
 -------------------------
 id INT (PRIMARY)
 category_id MEDIUMINT
 name VARCHAR(20)
 make VARCHAR(20)
 availability ENUM('1','0')

 Reservation:(InnoDB)
 -------------------------
 id INT (PRIMARY)
 date DATE
 Item_id INT
 slot VARCHAR(50)

SELECT Item.id,Item.category,Item.make,Item.name,reservation.slot
FROM Item 
INNER JOIN reservation ON Item.id=reservation.Item_id AND Item.category_id=2
  AND Item.availability=1 AND reservation.date = DATE(NOW()); 
```

我正在使用上述查询来显示特定类别下的所有项目，其中包含用户可以在特定日期预订的免费时间段。

**预留表中的插槽**字段包含字符串（例如：0:1:1:1:0:0:0:0:0:0:0:0:1:1:1:0:0:0:0:0: 0:0:0:0) 其中 1 表示保留小时，0 表示可用。

**项目表中的可用性**显示该项目是否可供预订（可能因维修而停机）。

首先我的表结构很好？其次优化我的查询（多列索引等）的最佳方法是什么。

谢谢，
拉维。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:20:46.033

在您的 FK 上放置外键约束和索引，这应该会加快速度。您似乎将项目 ID 的 INT 和 FK 的 MEDIUMINT 混合在一起，不确定这是自然的意图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:21:24.443

选择将在其上创建索引的属性时要记住的要点

在 SELECT 列表和 WHERE 子句中经常使用的列。
一列，其中的数据将按一系列值按顺序访问。
将与 GROUP By 或 ORDER BY 子句一起用于对数据进行排序的列。
连接中使用的列，例如 FOREIGN KEY 列。
用作主键的列。
尝试在数值上创建索引。如果没有数字 pK 可以引入代理键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T13:21:16.757

为什么将所有这些条件都放在 join 子句中？为什么不：

```
SELECT Item.id,Item.category,Item.make,Item.name,reservation.slot
FROM Item INNER JOIN reservation ON Item.id=reservation.Item_id
WHERE Item.category_id=2 AND Item.availability=1 AND reservation.date = DATE(NOW()); 
```

我没有足够的 SQL 专家来说明这是否会使其更快，但对我来说它看起来更明显。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T13:39:41.527

我建议在 Reservation.item_id 上创建一个索引。这应该可以帮助您提高查询性能。

# python - {解决}redis：本地主机：6379。无法分配请求的地址

> ID：10980850
> 
> 赞同：8
> 
> 时间：2012-06-11T13:17:04.363
> 
> 标签：python, redis

**更新：我已经解决了这个问题，从日志中，我看到数据库经常打开和关闭。我已将 redis 创建放入 for 循环中。所以...愚蠢的问题，如果有人像我一样的日志，请检查循环。**

我尝试关闭它并重新启动，但它仍然发生。这是错误消息：

redis.exceptions.ConnectionError：连接 localhost:6379 时出现错误 99。无法分配请求的地址。

我试图将 300000 条记录插入 redis（我的内存足够大）。但是在我插入大约 30000 条记录后，就会出现错误：

```
 redis.exceptions.ConnectionError: Error 99 connecting localhost:6379\. Cannot assign   requested address. 
```

查看日志文件后，我成功插入 30000 条记录后，redis 似乎关闭了。

以下是我的日志文件的一部分：

```
[32176] 11 Jun 20:59:27 - Accepted 127.0.0.1:36578
[32176] 11 Jun 20:59:27 - Client closed connection
[32176] 11 Jun 20:59:27 - Accepted 127.0.0.1:52327
[32176] 11 Jun 20:59:27 - Client closed connection
[32176] 11 Jun 20:59:27 - Accepted 127.0.0.1:52367
[32176] 11 Jun 20:59:27 - Client closed connection
[32176] 11 Jun 20:59:27 - Accepted 127.0.0.1:52368
[32176] 11 Jun 20:59:27 - Client closed connection
[32176] 11 Jun 20:59:27 - Accepted 127.0.0.1:52369
[32176] 11 Jun 20:59:27 - Client closed connection
[32176] 11 Jun 20:59:27 - Accepted 127.0.0.1:52370
[32176] 11 Jun 20:59:27 - Client closed connection
[32176] 11 Jun 20:59:28 - DB 6: 28226 keys (0 volatile) in 32768 slots HT.
[32176] 11 Jun 20:59:28 - 0 clients connected (0 slaves), 9181112 bytes in use
[32176] 11 Jun 20:59:33 - DB 6: 28226 keys (0 volatile) in 32768 slots HT.
[32176] 11 Jun 20:59:33 - 0 clients connected (0 slaves), 9181112 bytes in use
[32176] 11 Jun 20:59:38 - DB 6: 28226 keys (0 volatile) in 32768 slots HT.
[32176] 11 Jun 20:59:38 - 0 clients connected (0 slaves), 9181112 bytes in use
[32176] 11 Jun 20:59:43 - DB 6: 28226 keys (0 volatile) in 32768 slots HT.
[32176] 11 Jun 20:59:43 - 0 clients connected (0 slaves), 9181112 bytes in use 
```

# asp.net-mvc - 使用模板化 HtmlHelpers 的只读场景中的 ASP.NET MVC 3 显示标签 + 数据

> ID：10980851
> 
> 赞同：1
> 
> 时间：2012-06-11T13:17:09.713
> 
> 标签：asp.net-mvc

我需要显示简短的描述，如标签，并在它附近显示与此描述相关的数据。对于编辑数据，它看起来像

```
<div class="field">
    @Html.LabelFor(m => m.CustomerTaxId)
    @Html.EditorFor(m => m.CustomerTaxId)
</div> 
```

现在我想对只读数据做同样的事情。我已经写了下一个代码

```
<div>
    @Html.LabelFor(m => m.TotalAmount)
    @Html.DisplayFor(m => m.TotalAmount)
</div> 
```

它似乎有效，但它破坏了标签标签的语义含义，标签标签必须仅用于输入标签。MVC 3中有没有办法得到类似的东西

```
<div>
   <span class="label">Total amount</span>
   <span class="value">1500.00 $</span>
</div> 
```

用最少的努力（认为可以通过大量使用模板来完成）

好像我可以覆盖模板`Html.DisplayFor`来处理`Html.LabelFor`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:49:35.643

您可以创建自定义 html 帮助程序，如下所示，

```
public static MvcHtmlString Span<TModel, TValue>(this HtmlHelper<TModel> html, 
         Expression<Func<TModel, TValue>> expression, object htmlAttributes)
{
  var metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData, null);
  string spanInnerText = metadata.DisplayName ?? metadata.PropertyName;

  TagBuilder tag = new TagBuilder("span");
  tag.MergeAttributes(HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes));
  tag.SetInnerText(spanInnerText);

  return MvcHtmlString.Create(tag.ToString(TagRenderMode.Normal));
} 
```

您可以在视图中使用，

```
@Html.Span(m => m.Name, new { @class = "label" }) 
```

# java - Android - 从资产\ PDF显示访问文件

> ID：10980852
> 
> 赞同：9
> 
> 时间：2012-06-11T13:17:10.310
> 
> 标签：java, android, android-intent, assets

我正在尝试检索对存储在`assets`目录中的文件的引用到名为`myfile.pdf`. 我试图这样做：

```
File file = new File("android_assest/myfile.pdf);
Log.d("myTag", "" + file.isFile()); 
```

`false`不知何故，当目录`myfile.pdf`中存在do时，我得到了`assets`。我使用返回数组中的每个元素`getAssets().list("")`对其进行了验证。`Log.d()`

更多的是，我试图获取对 PDF 文件的引用，然后使用设备上已安装的任何 PDF 查看器来查看 PDF。

我猜想自从上一个问题（检索对文件的引用）返回`false`后，下一个截断的代码就会失败：

```
Intent i = new Intent(Intent.ACTION_VIEW,
    Uri.parse("file:///android_asset/myfile.pdf"));
startActivity(i); 
```

任何人都知道为什么我无法检索对文件的引用？以及为什么我不能使用已安装的 PDF 查看器来显示 PDF（在检索到 PDF 文件的引用之后）？

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-11T13:36:37.443

正如 Barak 所说，您可以将其从资产复制到内部存储或 SD 卡，然后使用内置的 pdf 应用程序从那里打开它。

关注 Snippet 将对您有所帮助。（我已更新此代码以写入和读取内部存储中的文件。

但我不推荐这种方法，因为 pdf 文件的大小可能超过 100mb。

所以不建议将那个大文件保存到内部存储中

还要确保在将文件保存到您使用的内部存储时

```
openFileOutput(file.getName(), Context.MODE_WORLD_READABLE); 
```

然后只有其他应用程序可以读取它。

检查以下代码段。

```
package org.sample;

import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.res.AssetManager;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;

public class SampleActivity extends Activity
{

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        CopyReadAssets();

    }

    private void CopyReadAssets()
    {
        AssetManager assetManager = getAssets();

        InputStream in = null;
        OutputStream out = null;
        File file = new File(getFilesDir(), "git.pdf");
        try
        {
            in = assetManager.open("git.pdf");
            out = openFileOutput(file.getName(), Context.MODE_WORLD_READABLE);

            copyFile(in, out);
            in.close();
            in = null;
            out.flush();
            out.close();
            out = null;
        } catch (Exception e)
        {
            Log.e("tag", e.getMessage());
        }

        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(
                Uri.parse("file://" + getFilesDir() + "/git.pdf"),
                "application/pdf");

        startActivity(intent);
    }

    private void copyFile(InputStream in, OutputStream out) throws IOException
    {
        byte[] buffer = new byte[1024];
        int read;
        while ((read = in.read(buffer)) != -1)
        {
            out.write(buffer, 0, read);
        }
    }

} 
```

确保包括

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

在清单中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:25:11.040

你不能那样做。apk 中没有目录结构，它只是数据。框架知道如何访问它（`getAssets`），但您不能在目录中将其作为文件查找。

您可以将其作为输入流打开...

```
in = new BufferedReader(new InputStreamReader(activity.getAssets().open(myfile.pdf))); 
```

或者，您可以将其从资产复制到内部存储或 SD 卡并在那里访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T21:40:52.873

就像说[Vipul Shah](https://stackoverflow.com/users/758104/vipul-shah)一样，但在外部的情况下。

```
import android.app.Activity;
import android.content.Intent;
import android.content.res.AssetManager;
import android.net.Uri;
import android.os.Environment;
import android.os.Bundle;
import android.util.Log;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        copyReadAssets();
    }

    private void copyReadAssets()
    {
        AssetManager assetManager = getAssets();

        InputStream in = null;
        OutputStream out = null;

        String strDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)+ File.separator + "Pdfs";
        File fileDir = new File(strDir);
        fileDir.mkdirs();   // crear la ruta si no existe
        File file = new File(fileDir, "example2.pdf");

        try
        {

            in = assetManager.open("example.pdf");  //leer el archivo de assets
            out = new BufferedOutputStream(new FileOutputStream(file)); //crear el archivo

            copyFile(in, out);
            in.close();
            in = null;
            out.flush();
            out.close();
            out = null;
        } catch (Exception e)
        {
            Log.e("tag", e.getMessage());
        }

        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.parse("file://" + Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS) + File.separator + "Pdfs" + "/example2.pdf"), "application/pdf");
        startActivity(intent);
    }

    private void copyFile(InputStream in, OutputStream out) throws IOException
    {
        byte[] buffer = new byte[1024];
        int read;
        while ((read = in.read(buffer)) != -1)
        {
            out.write(buffer, 0, read);
        }
    }
} 
```

更改部分代码，如下所示：

```
out = new BufferedOutputStream(new FileOutputStream(file)); 
```

前面的示例是针对 Pdfs 的，如果是示例 .txt

```
FileOutputStream fos = new FileOutputStream(file); 
```

# php - 如何从自己的网站 - facebook 应用程序在 Facebook 墙上发布照片？

> ID：10980858
> 
> 赞同：0
> 
> 时间：2012-06-11T13:17:36.033
> 
> 标签：php, facebook-graph-api

我设法创建了一个 facebook 应用程序，让用户可以访问我的网站并使用用户名和登录名将他们的照片直接上传到我的 facebook 粉丝页面。

根据他们的用户名和登录名 - 用户可以将他们的照片上传到他们在我的 Facebook 粉丝页面上的特定相册！

现在我想知道以下是否可能：

我希望如果每次用户上传照片时，它都会显示在粉丝页面墙上。

非常感谢xxx :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:27:52.103

不，您不能使用用户名和密码登录，您需要使用 Facebook 的[身份验证](https://developers.facebook.com/docs/authentication/)流程和 API 来访问用户的详细信息。

如果您想直接接受用户的照片并将它们发布到主页，您需要为您的主页获取[主页访问令牌](https://developers.facebook.com/docs/authentication/pages/)并使用它来上传照片

# prototypejs - 在原型中使可拖动的 div 属性为 false

> ID：10980861
> 
> 赞同：0
> 
> 时间：2012-06-11T13:17:41.653
> 
> 标签：prototypejs, draggable

我在原型中有一个 div，它是可拖动的我想让它的可拖动属性为 false。我该怎么做？谢谢。

```
<div id="answer_0_3" class="dragndrop_0 foreign dropped_answer" >Notebook</div> 
```

我的可拖动如下：

```
var draggables = [];
$$('.answer.dragndrop_0').each(function(answer) {
      draggables.push( new Draggable( answer, {revert: 'failure', scroll: window} ) );
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:29:38.203

Prototype 本身不支持 Draggable，但它通常与[Scriptaculous](http://script.aculo.us)结合使用。如果您引用[Scriptaculous Draggable](http://madrobby.github.com/scriptaculous/draggable/)，那么您需要调用它的`.destroy`方法：

```
// suppose you initialize your Draggable something like this:
var answer_0_3_draggable = new Draggable('anser_0_3', ...);

...

// later in your code
answer_0_3_draggable.destroy() 
```

你如何初始化那些 Draggables 呢？请显示更多代码而不是您的单行代码？

# spring - 如何使用 Enunciate 为 Spring-Jersey 项目生成 REST 文档？

> ID：10980865
> 
> 赞同：10
> 
> 时间：2012-06-11T13:17:58.967
> 
> 标签：spring, maven, jersey, enunciate

我正在努力解决我认为非常简单的事情——为一组已经存在的 REST 服务生成文档，这些服务基本上只是带有**JAX-RS**注释的 POJO注释。我使用**Jersey**作为实现提供者。REST API 作为**Spring** Web 应用程序的一部分进行部署。

我只想为 REST 服务 POJO 生成文档，所以我的**enunciate.xml**配置是这样的：

```
<?xml version="1.0"?>
<enunciate label="novaglobalapi" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://enunciate.codehaus.org/schemas/enunciate-1.25.xsd">

    <api-classes>
        <include pattern="com.something.api.rest.*"/>
    </api-classes>

    <modules>
        <docs docsDir="restapi" title="REST API"/>
    </modules>
</enunciate> 
```

我已经按照*enunciate*文档中的建议配置了我的**pom.xml ：**

 *```
<build>
...
    <plugin>
        <groupId>org.codehaus.enunciate</groupId>
            <artifactId>maven-enunciate-plugin</artifactId>
            <version>1.25</version>
            <executions>
                <execution>
                    <goals>
                        <goal>docs</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <configFile>enunciate.xml</configFile>
            </configuration>
    </plugin>
...
</build> 
```

但是当我运行时`mvn enunciate:docs`，我收到以下构建错误：

```
[ERROR] Failed to execute goal org.codehaus.enunciate:maven-enunciate-plugin:1.25:docs (default-cli) on project NovaGlobalSSOAPI: Problem assembling the enunciate app. invalid LOC header (bad signature) -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.enunciate:maven-enunciate-plugin:1.25:docs (default-cli) on project NovaGlobalSSOAPI: Problem assembling the enunciate app.
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: Problem assembling the enunciate app.
    at org.codehaus.enunciate.DocsMojo.execute(DocsMojo.java:99)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: java.util.zip.ZipException: invalid LOC header (bad signature)
    at java.util.zip.ZipFile.read(Native Method)
    at java.util.zip.ZipFile.access$1200(ZipFile.java:31)
    at java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:459)
    at java.util.zip.ZipFile$1.fill(ZipFile.java:242)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:141)
    at java.io.DataInputStream.readFully(DataInputStream.java:178)
    at java.util.jar.JarFile.getBytes(JarFile.java:362)
    at java.util.jar.JarFile.getManifestFromReference(JarFile.java:161)
    at java.util.jar.JarFile.getManifest(JarFile.java:148)
    at org.codehaus.enunciate.main.Enunciate.scanClasspath(Enunciate.java:409)
    at org.codehaus.enunciate.main.Enunciate.doGenerate(Enunciate.java:319)
    at org.codehaus.enunciate.ConfigMojo$MavenSpecificEnunciate.doGenerate(ConfigMojo.java:634)
    at org.codehaus.enunciate.main.Enunciate$Stepper.step(Enunciate.java:1706)
    at org.codehaus.enunciate.main.Enunciate$Stepper.stepTo(Enunciate.java:1738)
    at org.codehaus.enunciate.DocsMojo.execute(DocsMojo.java:95)
    ... 21 more 
```

我想不通，我做错了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T20:45:25.420

如果配置文档目录会发生这种情况吗？

```
<build>
...
    <plugin>
        <groupId>org.codehaus.enunciate</groupId>
        <artifactId>maven-enunciate-plugin</artifactId>
        <version>1.25</version>
        <executions>
            <execution>
                <goals>
                    <goal>docs</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
            <!-- the directory where to put the docs -->
            <docsDir>${project.build.directory}/docs</docsDir>
            <configFile>enunciate.xml</configFile>
        </configuration>
    </plugin>
...
</build> 
```

编辑：忘记关闭 docsDir

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-15T00:00:56.827

在您的 maven pom 中使用以下代码：

```
 <build>
        <plugins>
            <plugin>
                <groupId>com.webcohesion.enunciate</groupId>
                <artifactId>enunciate-maven-plugin</artifactId>
                <version>${enunciate.version}</version>
                <configuration>
                  <sourcepath-includes>
                    <sourcepath-include>
                      <groupId>com.your.company.web.rest</groupId>
                    </sourcepath-include>
                    <sourcepath-include>
                      <groupId>com.external</groupId>
                      <artifactId>external</artifactId>
                    </sourcepath-include>
                  </sourcepath-includes>
                </configuration>
                <executions>
                  <execution>
                    <goals>
                      <goal>assemble</goal>
                    </goals>
                  </execution>
                </executions>
            </plugin>
        </plugins>
    </build> 
```

具有以下属性：

```
<properties><enunciate.version>2.10.1</enunciate.version></properties> 
```

在您的 Maven 主页中，确保您有一个名为 enunciate.xml 的 xml 文件，其中包含以下代码行：

```
<enunciate xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://enunciate.webcohesion.com/schemas/enunciate-2.0.0-M.4.xsd">

  <title>Your Company REST API</title>
  <description package="com.your.company.web.api"/>
  <copyright>www.yourcompany.com</copyright>

    <api-classes>
        <include pattern="com.your.company.web.rest.*"/>
    </api-classes>

    <modules>
        <docs docsDir="src/main/webapp/restapi" title="Your Company REST API"/>
        <jackson disabled="true"/>
        <swagger basePath="/yourcompany/api/"/>
    </modules>

</enunciate> 
```*

# mysql - 查找两个列中都存在的两个人 ID

> ID：10980870
> 
> 赞同：0
> 
> 时间：2012-06-11T13:18:12.377
> 
> 标签：mysql

以下是我所拥有的

```
+++++++++++++++++
+id1    +   id2 +
+++++++++++++++++
+  1    +    2  +
+  2    +    1  +
+  1    +    3  +
+  3    +    2  +
+  4    +    5  +
+  5    +    4  +
+++++++++++++++++ 
```

我要查找的是两个列中的两个人的 ID。

下面是我将拥有的

```
+++++++++++++++++
+id1    +   id2 +
+++++++++++++++++
+  1    +    2  +
+  2    +    1  +
+  4    +    5  +
+  5    +    4  +
+++++++++++++++++ 
```

## 或者

```
+++++++++++++++++
+id1    +   id2 +
+++++++++++++++++
+  1    +    2  +
+  4    +    5  +
+++++++++++++++++ 
```

## 或者

```
+++++++++++++++++
+id1    +   id2 +
+++++++++++++++++
+  2    +    1  +
+  5    +    4  +
+++++++++++++++++ 
```

知道如何实现这一目标吗？

## [这是测试数据](http://sqlfiddle.com/#!3/80feb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:27:01.557

这应该让你开始：

```
SELECT
    mytable1.id1, mytable1.id2
FROM
    myTable mytable1,
    myTable mytable2
WHERE
    mytable1.id1 = mytable2.id2
    AND
    mytable2.id1 = mytable1.id2
ORDER BY
    mytable1.id1 
```

## [演示](http://sqlfiddle.com/#!3/80feb/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:34:53.620

基本的 id 列表是这样的：

```
select distinct t1.id1
from mytable t1
join mytable t2 on t1.id1 = t2.id2; 
```

如果你想要*行*：

```
select distinct t1.*
from mytable t1
join mytable t2 on t1.id1 = t2.id2; 
```

如果你想要任何 2 行：

```
select distinct t1.*
from mytable t1
join mytable t2 on t1.id1 = t2.id2
limit 2; 
```

# jquery - 使用 jQuery 从单选按钮获取 id 值

> ID：10980872
> 
> 赞同：0
> 
> 时间：2012-06-11T13:18:17.970
> 
> 标签：jquery, html, forms, radio-button

**问题：**

在单击或不单击时使用 jQuery 从单选按钮获取 id。jQuery 应该检测该值是否已设置并选择它或在单击时选择它。

**HTML 代码（场景 1 - 没有选择）：**

```
<th><input type="radio" name="itemquestion" id="1" value="11"></th>
<th><input type="radio" name="itemquestion" id="2" value="12"></th>
<th><input type="radio" name="itemquestion" id="3" value="13"></th>
<th><input type="radio" name="itemquestion" id="4" value="14"></th>
<th><input type="radio" name="itemquestion" id="5" value="15"></th> 
```

**HTML 代码（场景 2 - 已选择）：**

```
<th><input type="radio" name="itemquestion" id="1" value="11"></th>
<th><input type="radio" name="itemquestion" id="2" value="12" checked="checked"></th>
<th><input type="radio" name="itemquestion" id="3" value="13"></th>
<th><input type="radio" name="itemquestion" id="4" value="14"></th>
<th><input type="radio" name="itemquestion" id="5" value="15"></th> 
```

**jQuery代码：**

```
$('input[type=radio]', $('#itembuttons')).click(
    function() {
        var pos = $(this).parent().index() + 1;
        $('#itemresponse').val(pos);
    }
); 
```

**问题：**

如何修改 jQuery，以便除了对 click() 执行操作外，还检测在提交时已检查了哪个单选按钮并返回该 ID（在本例中为 2）？换句话说，用户可以在不单击单选按钮的情况下提交表单，但我希望 #itemresponse 包含 id 值 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:34:13.790

如果您想在用户单击单选按钮之前进行填充，您可以添加它以在页面加载时设置值：

```
$(document).ready(function () {
    var selected_id = $('form input[type=radio]:checked').attr("id");
    $('#itemresponse').val(selected_id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:31:40.357

在提交表单之前，您需要检查是否选中了单选按钮。尝试这样的事情：

```
$('#form').on('submit', function(e){
    if($('input[type=radio]:checked', $('#itembuttons')).length > 0){
        //Checked, do nothing
        //var pos = $('input[type=radio]:checked').attr('id');
    }else{
        //Not checked: Append an input
        $('#form').append('<input type="hidden" name="itemquestion" value="2" />');    
    }
});​​​​​​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:33:02.307

为了完整性，因为你要求两者。

加载时存储选择（由 指定`John Lawrence`）：

```
$(document).ready(function () {
    var selected_id = $('input[type="radio"]:checked').attr("id");
    $('#itemresponse').val(selected_id);
}); 
```

用户更改选择：

```
$('input[type="radio"][name="itemquestion"]').click(
    function() {
        var pos = $(this).attr('id');
        $('#itemresponse').val(pos);
    }
); 
```

[演示](http://jsfiddle.net/FranWahl/PTQXb/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T13:26:40.410

在表单上添加一个[.submit](http://api.jquery.com/submit/)事件处理程序，类似这样

```
$('#myform').submit(function(){
    var $selected = $('input[type="radio"]​​​​:checked');
    //Extract the value you need here either $selected.attr('id'); or whatever
}); 
```

我使用[.checked](http://api.jquery.com/checked-selector/)选择器

*注意：当您说在提交时已经检查了哪个单选按钮并返回该****ID***时，我不清楚您的意思

 **我不确定**id**指的是什么（id 属性？因为您使用父级和索引进行了一些计算），所以我在函数中添加了注释，在那里进行您需要的计算。

祝你好运！**

# ios - 如何在另一个线程上正确打开和关闭 NSStream

> ID：10980874
> 
> 赞同：8
> 
> 时间：2012-06-11T13:18:23.523
> 
> 标签：ios, multithreading, nsstream

我有一个应用程序在另一个线程上使用 NSStream 连接到服务器。如果用户决定注销，应用程序也会关闭连接。问题是我永远无法在用户断开连接后成功关闭流或线程。下面是关于如何为网络创建线程并尝试关闭流的代码示例：

```
+ (NSThread*)networkThread
{
    static NSThread *networkThread = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        networkThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkThreadMain:) object:nil];

        [networkThread start];
    });

    return networkThread;
}

+ (void)networkThreadMain:(id)sender
{
    while (YES)
    {
        @autoreleasepool {
            [[NSRunLoop currentRunLoop] run];
        }
    }
}

- (void)scheduleInThread:(id)sender
{
    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
    [inputStream open];
}

- (void)closeThread
{    
    [inputStream close];
    [inputStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
    [inputStream release];
    inputStream = nil;
} 
```

尝试连接输入流时调用：

```
[self performSelector:@selector(scheduleInThread:) onThread:[[self class] networkThread] withObject:nil waitUntilDone:YES]; 
```

任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-07-08T19:07:40.550

您混合静态变量和实例变量的方式令人困惑。你结婚就这样吗？如果你把它放在一个 NSOperation 中并使用一个 NSOperationQueue 运行它，我认为你会得到更清晰的封装。该操作将管理自己的异步线程，因此您不必这样做。另外，如果可以的话，我强烈建议使用 ARC。

几点注意事项：

1.  确保设置流的委托并处理委托事件。您可能应该在操作中执行此操作（使操作成为委托）并在必要时关闭流并完成操作。
2.  除了 NSStreamStatusClosed 之外，流可能还有其他失败情况，例如 NSStreamStatusNotOpen 等。您可能需要添加额外的处理，这可以通过侦听委托方法来完成。
3.  您的代码可能无法正常工作，主要是因为您的 while 循环永远运行 runloop。你必须具备爆发的条件。NSOperation 为您提供了一些非常好的标准化方法。

```
#import <Foundation/Foundation.h>

NS_ASSUME_NONNULL_BEGIN

@interface AsyncStreamOperation : NSOperation

@end

NS_ASSUME_NONNULL_END 
```

```
#import "AsyncStreamOperation.h"

@interface AsyncStreamOperation ()

@property (atomic, strong) AsyncStreamOperation *config;

@property (atomic, strong) NSInputStream *stream;

@property (atomic, assign, getter=isExecuting) BOOL executing;
@property (atomic, assign, getter=isFinished) BOOL finished;

@end

@implementation AsyncStreamOperation

@synthesize executing = _executing;
@synthesize finished = _finished;

- (instancetype)initWithStream:(NSInputStream *)stream
{
    self = [super init];

    if(self) {
        _stream = stream;
    }

    return self;
}

- (BOOL)isAsynchronous
{
    return YES;
}

- (BOOL)isExecuting
{
    @synchronized (self) {
        return _executing;
    }
}

- (void)setExecuting:(BOOL)executing
{
    @synchronized (self) {
        [self willChangeValueForKey:@"isExecuting"];
        _executing = executing;
        [self didChangeValueForKey:@"isExecuting"];
    }
}

- (BOOL)isFinished
{
    @synchronized (self) {
        return _finished;
    }
}

- (void)setFinished:(BOOL)finished
{
    @synchronized (self) {
        [self willChangeValueForKey:@"isFinished"];
        _finished = finished;
        [self didChangeValueForKey:@"isFinished"];
    }
}

- (void)start
{
    // Get runloop
    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];

    // Schedule stream
    [self.stream scheduleInRunLoop:runLoop forMode:NSDefaultRunLoopMode];
    [self.stream open];

    // Loop until finished
    // NOTE: If -cancel is not called, you need to add your own logic to close the stream so this loop ends and the operation completes
    while(self.executing && !self.finished && !self.cancelled && self.stream.streamStatus != NSStreamStatusClosed) {
        @autoreleasepool {
            // Maximum speed once per second or CPU goes through the roof
            [runLoop runMode:NSDefaultRunLoopMode beforeDate:[NSDate dateWithTimeIntervalSinceNow:1.0]];
        }
    }

    self.executing = NO;
    self.finished = YES;
}

- (void)cancel
{
    [super cancel];

    [self.stream close];

    self.executing = NO;
    self.finished = YES;
}

@end 
```

# sql - SQL ROW_NUMBER 和排序问题

> ID：10980877
> 
> 赞同：5
> 
> 时间：2012-06-11T13:18:46.580
> 
> 标签：sql, sql-server, sorting, sql-order-by, row-number

在 SQL 2005/2008 数据库中，我们有表 BatchMaster。列：RecordId bigint - 自动增量 ID，BatchNumber bigint - 唯一非聚集索引，BatchDate）。我们有从这个表返回分页数据的 sproc。该存储过程适用于大多数客户端，但在一个 SQL 服务器实例中，我们的记录顺序存在问题。一般来说，在 sproc 我们做

```
select * from
(
    select row_number() over (order by bm.BatchDate desc, bm.BatchNumber desc) as Row,
    *
    from dbo.BatchMaster bm with (nolock)
)
where Row between @StartingRow and @EndgingRow 
```

因此，您可以从上面的脚本中注意到，我们希望返回按 BatchDate 和 BatchNumber 排序的记录。这不会发生在我们的一位客户身上： ![在此处输入图像描述](../Images/f8008bfc58bbccfb6974410add943c91.png)

记录顺序错误。另外，请注意第一列（行），它不是按升序排列的。

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T13:22:22.220

假设您想要最小的`BatchNumber`给定数字，并且您希望按 排序，试试这个：`BatchDate``Row``Row`

```
select * from
(
    select row_number() over (order by bm.BatchDate desc, bm.BatchNumber asc) as Row,
    *
    from dbo.BatchMaster bm with (nolock)
)
where Row between @StartingRow and @EndgingRow
order by Row 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-11T13:22:10.510

您的代码实际上并未对结果进行排序，它仅根据 BatchDate 和 Batchnumber 的顺序设置“行”，并且似乎正确地执行了该操作。您需要在语句中添加 ORDER BY Row。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T13:22:44.077

更改查询以在最外层查询中包含排序

```
select * from
(
    select row_number() over (order by bm.BatchDate desc, bm.BatchNumber desc) as Row,
    *
    from dbo.BatchMaster bm with (nolock)
)
where Row between @StartingRow and @EndgingRow
order by Row 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-11T13:26:38.577

您的排名函数中的`ORDER BY`子句`ROW_NUMBER`仅适用于计算该排名函数的值，它实际上并不对结果进行排序。

如果您希望按特定顺序返回记录，则需要在查询中指定：`ORDER BY [Row]`

# common-lisp - 对新手友好的 asdf（另一个系统定义工具）用户指南

> ID：10980883
> 
> 赞同：1
> 
> 时间：2012-06-11T13:19:14.543
> 
> 标签：common-lisp, asdf

我目前正在尝试掌握[asdf](http://common-lisp.net/project/asdf/)，但遗憾的是（但显然并不[少见](http://smuglispweeny.blogspot.de/2008/12/beginners-guide-to-asdf-ha.html)）标准用户指南并没有任何帮助，因为它确实解释了（我猜）相关部分，但错过了分发一些包含评论的扩展示例，所以新手可以看到这些命令的运行情况。

我对语法的用法`:defsystem-depends-on`和`:components` 部分特别感兴趣。`defsystem`

因此问题是：**有没有比标准用户指南更复杂和对新手友好的 asdf 用户指南？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T18:29:55.263

我没有时间写一个全面的教程（而且我没有全面的理解），但我*可以*提供一个链接和我拥有的项目的副本。

```
(asdf:defsystem #:cl-yahoo-finance
  :depends-on ( #:drakma #:babel #:cl-csv #:yason #:url-rewrite)
  :components ((:file "cl-yahoo-finance"))  ;;cl-yahoo-finance is cl-yahoo-finance.lisp, in the same directory.
  :name "cl-yahoo-finance"
  :version "3.2"
  :maintainer "Paul Nathan"
  :author "Paul Nathan"
  :licence "LLGPL"
  :description "CL interface to Yahoo's finance API"
  :long-description "Common Lisp interface to Yahoo's finance API, available over the web. See usage.lisp for example code.") 
```

[https://github.com/pnathan/cl-yahoo-finance/blob/master/cl-yahoo-finance.asd](https://github.com/pnathan/cl-yahoo-finance/blob/master/cl-yahoo-finance.asd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T17:00:21.467

你有什么具体问题吗？

`:defsystem-depends-on`只是在处理系统定义之前必须加载的一些系统。从语法中您可以看到系统名称是字符串或符号。

`:components`- 很多用途都比较简单。例如，它会列出一堆文件。

另见[ASDF DEFSYSTEM 的语法。](http://common-lisp.net/project/asdf/asdf.html#The-defsystem-grammar)

# google-app-engine - 向使用来自 Windows 客户端应用程序的联合登录的 Google AppEngine 应用程序进行身份验证

> ID：10980885
> 
> 赞同：0
> 
> 时间：2012-06-11T13:19:17.717
> 
> 标签：google-app-engine, authentication

我计划将 Java 应用程序部署到 Google AppEngine 并使用联合登录（根据 Google 仍处于试验阶段）。该应用程序是非常简单的 Java EE 应用程序，它为简单的 CRUD 操作公开了 RESTful 接口。

然后，我希望能够使用用 C# 编写的 Windows 客户端应用程序对该应用程序进行身份验证。我认为应用程序应该能够在 ti 中使用浏览器打开一个窗口，该窗口将显示我的 Web 应用程序的登录页面，并且在成功验证后，我应该能够获取登录令牌或 cookie 以在我的 HTTP 的其余部分中使用要求。

是否可以使用联合登录来做这样的事情？[我发现一篇文章解释了如何使用谷歌专有登录来做到这一点。](http://dalelane.co.uk/blog/?p=894)

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:47:42.177

我设法使这项工作变得比我想象的要容易得多。

1.  当我向我的 Web 服务发送 HTTP 请求时，我得到 302 Found 响应，响应标头名称 Location 指向登录页面。
2.  我使用 WebBrowser 控件，向它注册 Navigated even 并导航到 Location 标头中的 URL。
3.  当 Navigated 甚至触发时，我使用[此答案中的代码来获取 cookies 容器](https://stackoverflow.com/questions/3382498/is-it-possible-to-transfer-authentication-from-webbrowser-to-webrequest/5633826#5633826)。
4.  我检查每个 cookie，直到找到一个名为 ACSID 的 cookie 并将其存储。
5.  对于我的服务的每个 Web 请求，我都会添加 cookie 名称 ACSID 以及在步骤 4 中保存的值。

这不是最安全的方法。我将添加对 cookie 域的检查，但这看起来不错。

# android - 如何解决粒子效果中的logcat

> ID：10980887
> 
> 赞同：0
> 
> 时间：2012-06-11T13:19:24.187
> 
> 标签：android, andengine, particle-system

我正在尝试在我的游戏中添加粒子效果。运行时没有错误但显示 logcat。下面是我的代码和logcat。

```
@Override
public void onLoadResources() {

    //prepare a container for particle
    mParticleBitmapTextureAtlas = new BitmapTextureAtlas(32, 32, TextureOptions.BILINEAR_PREMULTIPLYALPHA);

    // setting assets path for easy access
    BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

    mParticleTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mParticleBitmapTextureAtlas, this, "particle_fire.png", 0,0);

    // loading textures in the engine
    mEngine.getTextureManager().loadTexture(this.mParticleBitmapTextureAtlas);
 }

@Override
public Scene onLoadScene() {
    mEngine.registerUpdateHandler(new FPSLogger());
            mMainScene = new Scene();
    mMainScene.setBackground(new ColorBackground(0f, 0f, 0f));

    //particle system 

    /* Left to right Particle System. */
    {
        final ParticleSystem particleSystem = new ParticleSystem(new PointParticleEmitter(0, CAMERA_HEIGHT), 6, 10, 70, this.mParticleTextureRegion);
        particleSystem.setBlendFunction(GL10.GL_SRC_ALPHA, GL10.GL_ONE);

        particleSystem.addParticleInitializer(new VelocityInitializer(15, 22, -60, -90));
        particleSystem.addParticleInitializer(new AccelerationInitializer(5, 15));
        particleSystem.addParticleInitializer(new RotationInitializer(0.0f, 360.0f));
        particleSystem.addParticleInitializer(new ColorInitializer(1.0f, 0.0f, 0.0f));

        particleSystem.addParticleModifier(new ScaleModifier(0.5f, 2.0f, 0, 5));
        particleSystem.addParticleModifier(new ExpireModifier(11.5f));
        particleSystem.addParticleModifier(new AlphaModifier(1.0f, 0.0f, 2.5f, 3.5f));
        particleSystem.addParticleModifier(new AlphaModifier(0.0f, 1.0f, 3.5f, 4.5f));
        particleSystem.addParticleModifier(new ColorModifier(1.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 11.5f));
        particleSystem.addParticleModifier(new AlphaModifier(1.0f, 0.0f, 4.5f, 11.5f));

        this.mMainScene.getLastChild().attachChild(particleSystem);
    }
          return mMainScene;
         } 
```

//////////////////logcat////////////////////

```
 06-11 18:51:59.588: E/AndroidRuntime(1539): FATAL EXCEPTION: main
06-11 18:51:59.588: E/AndroidRuntime(1539): java.lang.NullPointerException
06-11 18:51:59.588: E/AndroidRuntime(1539):     at com.example.AndEngineTest.AndEngineTest.onLoadScene(AndEngineTest.java:251)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at org.anddev.andengine.ui.activity.BaseGameActivity.doResume(BaseGameActivity.java:169)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at org.anddev.andengine.ui.activity.BaseGameActivity.onWindowFocusChanged(BaseGameActivity.java:85)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onWindowFocusChanged(PhoneWindow.java:2366)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at android.view.View.dispatchWindowFocusChanged(View.java:5735)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at android.view.ViewGroup.dispatchWindowFocusChanged(ViewGroup.java:851)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2557)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at android.os.Looper.loop(Looper.java:137)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at java.lang.reflect.Method.invokeNative(Native Method)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at java.lang.reflect.Method.invoke(Method.java:511)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-11 18:51:59.588: E/AndroidRuntime(1539):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T16:55:07.663

尝试`this.mMainScene.attachChild(particleSystem);`不使用`.getLastChild()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T16:51:04.443

`getLastChild()``null`给定时返回`Entity`（在这种情况下`Scene`）没有孩子。请参阅[实体源代码](https://github.com/nicolasgramlich/AndEngine/blob/GLES2/src/org/andengine/entity/Entity.java#L632)。

您`Scene`不包含任何孩子，并且您想将粒子效果附加到最后一个孩子，因此`NullPointerException`. 不要将粒子系统附加到最后一个孩子，而是`mMainScene`直接将其附加到：

```
this.mMainScene.attachChild(particleSystem); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T14:00:54.050

发生在第`NullPointerException`251 行，您所说的是：

```
this.mMainScene.getLastChild().attachChild(particleSystem); 
```

您之前访问过`mMainScene`没有问题，因此看起来好像`getLastChild()`正在返回`null`.

# cakephp - cakephp 的变形器 slug 可以忽略指定的字符吗？

> ID：10980893
> 
> 赞同：0
> 
> 时间：2012-06-11T13:19:33.547
> 
> 标签：cakephp, cakephp-2.1, slug

我想要实现的是：

Let inflector slug 忽略字符串中的特殊字符，该字符通常会被替换字符串替换为 inflector slug。

例如我想被忽略的字符：'/'

输入：这是一个 /example/

输出：this_is_an_example

我想要的输出：this_is_an_/example/

我在文档中找到了“_uninflected”属性，但我认为这不是我想要的（它也不会满足我的需求）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:52:54.520

你可以做一个爆炸和蛞蝓每个令牌。

```
$input='/hi/im/a/non inflected ùrl/:=D';
$tokens=explode('/',$input);
foreach($tokens as &$token) $token=Inflector::slug($token);
$output='this_is_an_'.implode('/',$tokens); 
```

# perl - Win32_Product 是如何工作的？

> ID：10980899
> 
> 赞同：2
> 
> 时间：2012-06-11T13:19:56.340
> 
> 标签：perl, wmi, snmp, auditing

在从事审计项目时，我遇到了有关软件和许可证的不同问题。我的项目使用 Perl 在 Linux 上运行，我通过 SNMP 和 WMI 成功地重试了远程机器软件。最大的问题是这两种协议返回的结果完全不同。例如，一个人可能会找到一个程序，而另一个人可能找不到，反之亦然。

我知道 SNMP 检索具有相关卸载密钥的软件（如果我错了，请纠正我）：

> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall

但是[Win32_Product](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394378%28v=vs.85%29.aspx)呢？这就是文档所说的：

> Win32_Product WMI 类表示由 Windows Installer 安装的产品。一个产品通常与一个安装包相关联。

这意味着什么？最后但并非最不重要的一点是，有没有办法改进已安装软件的检索方式？我的意思是，如果我从控制面板查看已安装的软件并使用 SNMP 和 WMI 处理结果，就会发现很多奇怪的东西。

编辑：只是一个快速更新，我用 .NET C# 开发了几个程序，我安装在许多计算机上。太糟糕了，WMI 和 SNMP 都没有发现它们。我使用通常的 Visual Studio 生成的设置安装了这些程序。有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T06:38:29.290

人们基本上使用WMI来查询各种系统参数。WMI 公开了许多可以利用的接口。它主要与 VBScript 一起使用，但也可以使用 C++/COM 或 C# 与之交互。[这篇维基百科文章](http://en.wikipedia.org/wiki/Windows_Management_Instrumentation)可以给你一个关于 WMI 的详细解释，然后你就可以理解 Win32_Product Class 的作用。[这是另一篇很棒的文章](http://msdn.microsoft.com/en-us/library/ms811553.aspx)，对于开始使用 WMI 的人来说是必读的。

还要仔细阅读这些文章：

> [检索 CLASS](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393244%28v=vs.85%29.aspx)
> 
> [检索实例](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393243%28v=vs.85%29.aspx)
> 
> [检索实例的一部分](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393247%28v=vs.85%29.aspx)
> 
> [访问限定符](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384701%28v=vs.85%29.aspx)

这些文章将使您对 WMI 概念有一个很好的理解。

就 Windows 安装程序而言：

Windows 安装程序基于服务器-客户端架构。Windows 安装程序实际上是一个 Windows 服务。Windows 安装程序支持的各种功能使其成为最标准的应用程序生命周期管理方法。带有 .msi 扩展名的 Basic MSI（没有任何基本内容）包用于打包和分发应用程序。

Basic MSI 包基本上是一个数据库。应用程序二进制文件和其他东西可以打包为 CAB 文件并包含在 MSI 包中，也可以存在于它之外。

这称为 TRANSACTIONAL 安装方法。应用程序打包开发人员只需填写数据库中的各种表，Windows Installer 引擎会处理其他所有事情。这可能看起来或听起来很容易，但非常困难并且需要大量知识。

当应用程序安装到任何系统上时，Windows Installer 会写入正确管理安装到系统上的所有资源所需的所有注册表项。由于应用程序的生命周期由 Windows Installer 管理，因此它可以轻松支持：

> 1) 维修
> 
> 2) 弹性

一旦你经历了这一切，你可能对你案件所涉及的所有各方都有一个更好的了解。然后你会有更清晰的问题（或者可能没有！），我们可以更好地帮助你（或者你可能根本不需要它！）。

# java - Jetty HttpExchange 超时所有请求？

> ID：10980900
> 
> 赞同：0
> 
> 时间：2012-06-11T13:19:59.827
> 
> 标签：java, jetty

在我们的产品服务器中，对外部服务的请求每隔一段时间就会开始超时并失败。在此之前有一段较短的高响应时间。有趣的是，我们有一组相同的服务器调用相同的服务（Apple Purchase 和/或 Facebook），并且只有一个节点的响应时间很长。因此，它不仅仅是服务缓慢。这个问题很少见且难以重现，但仍然非常令人担忧。

节点上的线程数和内存数看起来不错，没有异常只是超时。重新启动 Java 进程将始终解决此问题。

从我们的响应时间图看来，如果外部服务实际上慢了一段时间，但随后恢复了我们的一些节点，仍然会看到该节点处于关闭状态。现在这只是一个猜测，因为响应时间慢可能只是我们这边的一个错误的功能。

我在下面添加了一个代码摘录，我们为每个请求创建一个新的交换对象，所以我相当确定没有坏数据缓存。

```
public void doSomething() {
    HttpExchange httpExchange = new HttpExchange();
    httpExchange.setURL("SOME_URL");
    httpExchange.setMethod("GET");
    httpExchange.setEventListener(listener);
    httpExchange.setTimeout(this.timeout);
    this.client.send(httpExchange);
} 
```

有人见过 Jetty HttpClient 的类似问题吗？是否有任何已知的边缘情况会导致 Jetty Http Client 以这种方式运行？
Jetty 内部是否有任何共享对象，我应该查看它是否超载了越野车？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:01:59.287

仅供参考，我在网站上启动了[Bug Tracking](https://bugs.eclipse.org/bugs/show_bug.cgi?id=382174)，我们终于有了一套很好的可重复性步骤，一个解决方法和一个正在修复的工作。

然而，同时修复“我目前正在通过在我的 .onExpire() 事件处理程序中调用 HttpExchange.cancel() 来解决这个问题。你能测试这个相同的修复吗？” --Wade Simmons 看到[Bug Tracking](https://bugs.eclipse.org/bugs/show_bug.cgi?id=382174)

# java - 结合 DispatcherServlet、ContextLoaderListener 和 SpringSecurity

> ID：10980905
> 
> 赞同：5
> 
> 时间：2012-06-11T13:20:02.063
> 
> 标签：java, hibernate, servlets, spring-mvc, spring-security

我在这里有很多问题要破解..一直在尝试将上述 3 种技术集成到我们的 webapp 中..我们想使用

1.  春季网络
2.  Spring MVC 作为视图技术（使用 freemarker）
3.  Spring Security 作为安全层

但是无论我如何配置我的 web.xml 和其他上下文文件，我都无法让所有东西同时工作。**使用我当前的配置，一切都会工作，除了 SpringSecurity 不会拦截 URL 模式**

一些谷歌搜索（和常识）告诉我，结合 DispatcherServlet 和 ContextLoaderListener 可能是一个问题。

所以这是我的配置。（很抱歉这么多文字，感谢阅读）：

网页.xml：

```
<!-- Needed by Spring -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/dw-manager-context.xml</param-value>
</context-param>

<!-- Needed by Spring MVC -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<!-- Needed by Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

我的 servlet-context.xml：

```
<!-- Scan for controllers -->
<context:component-scan base-package="dw.manager" />

<!-- Need to declare annotation driven transactions again so they are picked up above controller methods -->
<tx:annotation-driven transaction-manager="transactionManager" />

<mvc:annotation-driven />

<bean id="viewResolver"     class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver">
    <!-- ... -->
</bean>

<bean id="freemarkerConfig"
    class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">
    <!-- ... -->
</bean> 
```

我的经理-context.xml：

```
<context:annotation-config />   

    <!-- deployment-setup just loads properties (files) -->
<import resource="deployment-setup.xml" />
<import resource="spring-security-context.xml" />
<import resource="dw-manager-datasource.xml" />

<!-- Import sub-modules -->
<import resource="classpath:dw-security-context.xml" />
<!-- ... --> 
```

Spring-Security-context.xml：

```
<http pattern="/login" security="none" />
<http pattern="/accessDenied" security="none" />
<http pattern="/" security="none" />

<!-- enable use of expressions, define URL patterns and login/logout forms 
    and targets) -->
<http use-expressions="true" access-denied-page="/accessDenied">
    <intercept-url pattern="/*" access="hasRole('ROLE_USER')" />
    <!-- more stuff -->
</http>

<!-- a lot more... --> 
```

manager-datasource 只是设置数据库...

* * *

感谢您阅读所有内容并希望对我有所帮助.. ;)

* * *

**编辑：更多信息**

我不能只跳过 ContextLoaderListener，它是 SpringSecurity 所要求的。我也不能跳过 contextConfigLocation，因为这是 ContextLoaderListener 所需的上下文。我只是自己定义名称，否则它将搜索 applicationContext.xml。也许我可以添加一个空的 contextConfigLocation？但这可能只是意味着，底层模块不会找到要注入的 bean..？

* * *

**编辑2**

我认为主要问题是 SpringSecurity 需要一个 webapp 上下文（ContextLoaderListener）才能工作，但 web 应用程序在 servlet 上下文中运行。控制器方法由 servlet 上下文映射，因此在 servlet 上下文“外部”运行的 spring security 不会收到事件通知，并且过滤器不会启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:38:25.497

叹息..我不知道为什么它第一次不起作用，可能是错误的解决方案在尝试正确的解决方案时在缓存中..但是它现在就像我发布它的方式一样工作。感谢 Arun 抽出宝贵时间。

现在唯一的问题：spring-test-mvc 不支持 Spring Security 的 FilterChain 但这是另一个问题..

# php - 如何获取驻留在一列中的多个结果

> ID：10980912
> 
> 赞同：-1
> 
> 时间：2012-06-11T13:20:29.417
> 
> 标签：php, mysql

我正在寻找一个查询，它将`views`根据单个用户的`id`.

这是表格的内容：

```
id |  post_id | user_id | views

1 |      4     |   67    | 4
1 |      56     |   67    | 3
1 |      34     |   67    | 10 
```

我想获取用户拥有的帖子视图总数

```
SELECT *,count(views) from users WHERE user_id = 67 
```

结果必须是**17**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:24:00.730

```
SELECT user_id, sum(views) FROM users WHERE user_id = 67 GROUP BY user_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:24:41.127

你想要`SUM`运营商。

```
SELECT SUM(views) FROM users WHERE user_id = 67 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:24:52.273

只是[`SUM`](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_sum)意见：

简单的方法：

```
SELECT SUM(views) 
FROM users
WHERE user_id = 67; 
```

更复杂的方法：

```
SELECT user_id, SUM(views) 
FROM users
WHERE user_id = 67
GROUP BY user_id; 
```

# java - Java：在 JTextPane 中为多种文本颜色获取正确的 StartOffset

> ID：10980918
> 
> 赞同：0
> 
> 时间：2012-06-11T13:20:54.833
> 
> 标签：java, swing, highlight, jtextpane

我需要创建一个接受字符串输入并突出显示字符串列表中的某些单词的程序。

例子：

```
String MyList[] = {"Dog","Cat","Lion"};

Sample Input Text: I have a Dog and a Cat and a Lion . " 
```

如果输入文本没有任何换行符或转义字符，我没有问题，但如果输入文本有换行符，这就是结果。

例子：

```
String MyList[] = {"Dog","Cat","Lion"}; 
```

示例输入文本：

```
I have a Dog 
and a Cat
and a Lion 
```

**注意：大写字符表示高亮字符**

```
I have a DOG
and a cAT
and a liON 
```

我的突出显示示例代码：

```
for(String x : MyList)
{

int startOffset = inputText.indexOf(x);
doc.setCharacterAttributes  (startOffset,x.length,myStyle,false);

} 
```

我想问题是换行符或转义字符，但我找不到解决方法。

如果输入字符串有新行，我如何才能获得单词的正确起始偏移量？

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T13:48:09.400

*   AFAIK 这是可能的`Document`，

*   `Document`是`Model`为了`JTextComponents`

*   例如[_](https://stackoverflow.com/a/9878360/230513)

# winapi - 引用 GUID

> ID：10980920
> 
> 赞同：10
> 
> 时间：2012-06-11T13:21:00.030
> 
> 标签：winapi, guid

我正在尝试捕获一个事件并引用一个 GUID 以查看它是哪个事件。代码如下：

```
DWORD WINAPI AvisionEventProc(LPVOID lpParam){
    //HANDLE hEvent = * (HANDLE *) lpParam;   // This thread's read event
    STINOTIFY pStiNotify;

    if (debug){
        wprintf(L"Avision Event\n");
    }
    while(true){
        WaitForSingleObject(hAvisionEvent, INFINITE);
        wprintf(L"Event");
        pStiDevice->GetLastNotificationData(&pStiNotify);
        if (pStiNotify.guidNotificationCode == GUID_STIUserDefined1){
            wprintf(L"User defined 1");
        }else if (pStiNotify.guidNotificationCode == GUID_STIUserDefined2){
            wprintf(L"User defined 2");
        }else if (pStiNotify.guidNotificationCode == GUID_STIUserDefined3){
            wprintf(L"User defined 3");
        }

        ResetEvent(hAvisionEvent);
    }
    return 1;
} 
```

这编译得很好，但链接时出现以下错误：

```
1>sti.obj : error LNK2001: unresolved external symbol _GUID_STIUserDefined3
1>sti.obj : error LNK2001: unresolved external symbol _GUID_STIUserDefined2
1>sti.obj : error LNK2001: unresolved external symbol _GUID_STIUserDefined1 
```

奇怪的是，当我从中提取其他常量时，sti.h 被链接了。我确实通过 GUID 声明注意到以下内容：

```
#if defined( _WIN32 ) && !defined( _NO_COM)

/*
 * Class IID's
 */

// B323F8E0-2E68-11D0-90EA-00AA0060F86C
DEFINE_GUID(CLSID_Sti, 0xB323F8E0L, 0x2E68, 0x11D0, 0x90, 0xEA, 0x00, 0xAA, 0x00, 0x60, 0xF8, 0x6C);

/*
 * Interface IID's
 */

// {641BD880-2DC8-11D0-90EA-00AA0060F86C}
DEFINE_GUID(IID_IStillImageW, 0x641BD880L, 0x2DC8, 0x11D0, 0x90, 0xEA, 0x00, 0xAA, 0x00, 0x60, 0xF8, 0x6C);

<snip>

/*
 * Standard event GUIDs
 */

// {740D9EE6-70F1-11d1-AD10-00A02438AD48}
DEFINE_GUID(GUID_DeviceArrivedLaunch, 0x740d9ee6, 0x70f1, 0x11d1, 0xad, 0x10, 0x0, 0xa0, 0x24, 0x38, 0xad, 0x48);

<snip>

#endif 
```

“如果已定义”行是否会停止引用 GUID（我正在编写一个 win32 控制台应用程序），或者由于对 GUID 缺乏了解，我在这里有什么更基本的错误？

在此先感谢您的帮助。

干杯，

尼尔

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-06-16T20:38:37.310

`#include <initguid.h>`应该添加。这会有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-11T14:42:54.473

`DEFINE_GUID`宏要么将命名定义为静态`GUID`，要么只是进行前向声明以实际在其他地方完成。您的代码可能只有后者，并且符号在项目中没有实际初始化。

看：

*   [如何使用 DEFINE_GUID 避免错误“LNK2001 unresolved external”](http://support.microsoft.com/kb/130869)
*   [INITGUID：解释](http://www.gamedev.net/topic/18905-initguid-an-explanation/)
*   [DEFINE_GUID 宏是如何工作的？](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375463%28v=vs.85%29.aspx)- 在页面的底部

# ruby-on-rails - 使用 Rails 获取 Google plus 用户的活动

> ID：10980921
> 
> 赞同：0
> 
> 时间：2012-06-11T13:21:08.453
> 
> 标签：ruby-on-rails, google-plus

我正在尝试阅读和显示 G+ 用户的活动。使用**Google oauth2**，我可以在授权完成后接收用户的 access_token。

我使用**google_plus** gem 调用 G+，我可以使用以下代码接收用户信息

`@person = GooglePlus::Person.get("user_id_goes_here", :key => "google_api_key_here")`

但是当我尝试使用下面的活动时

`activity = GooglePlus::Activity.get("user_id_goes_here")`

我可以看到以下错误，

![在此处输入图像描述](../Images/85cef1d6909806b91e7b193e5208e6e1.png)

我尝试在网上搜索解决方案，有人建议超出了 api 调用限制。（默认为每天 10,000 次点击）。但我确信我今天只使用了 20-30 个电话。

对此问题的任何建议表示赞赏。

**仅供参考：**我刚刚在 /config/initializers/omniauth.rb 文件中添加了 google_oauth2 的配置代码，如下所示`provider :google_oauth2,Rails.application.config.client_id , Rails.application.config.client_secret`

**注意：**下面是我尝试使用 Oauth2 进行身份验证时的屏幕截图。我希望这不包括 Google plus 范围，让我知道我应该在omniauth.rb 中添加 {:scope => "REQUIRED_URL_HERE_GOOGLE_PLUS_RELATED"}。但不确定我应该在那里提供什么网址。

![在此处输入图像描述](../Images/f0eca0ee6f40a4d351d8cfa8917f41bc.png)

谢谢，巴兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:37:02.410

我可以为我的问题找到解决方案..

```
 1) Used {:scope => "https://www.googleapis.com/auth/plus.me"} in /config/initializers/omniauth.rb file
2) Used the code 

    activities = GooglePlus::Activity.for_person("user_id", :key => "GOOGLE_API_KEY").items 

```

希望有人会发现这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T03:48:05.183

Google_Plus gem 要求您在每个请求中传递您的应用程序密钥。您可以内联执行此操作：

```
GooglePlus::Activity.get("user_id_goes_here", key: "api_key_goes_here") 
```

或者在初始化器中设置一个全局变量

```
GooglePlus.api_key = 'api_key_goes_here' 
```

gem 规范中的示例假定您已包含一个全局变量，因此不显示`key:`字符串。这可能是导致您出现问题的原因？

在回答您的第二个问题时，您需要在您的 oauth 请求中指定一个范围。此处给出了范围列表[https://developers.google.com/gdata/faq#AuthScopes](https://developers.google.com/gdata/faq#AuthScopes)，但值得注意的是，url 格式似乎与已发布的格式有所不同。请尝试`https://www.googleapis.com/auth/xxxxx`，其中 xxx 是您需要的服务。

# sql-server - 根据日期时间计算表中不同记录之间的持续时间

> ID：10980922
> 
> 赞同：1
> 
> 时间：2012-06-11T13:21:09.313
> 
> 标签：sql-server, view, calculated-columns

对于这个问题，假设我有一个包含以下数据的表：

1) 姓名 2) 心情 3) 日期时间

我可以插入如下记录：

```
Andy    Happy    '11.06.2012 - 14.06.07' -- Inserted on 11.06.2012 @ 19:12.32
Arthur  Angry    '11.06.2012 - 15.06.57' -- Inserted on 11.06.2012 @ 17:12.32
Andy    Sad      '11.06.2012 - 14.34.05' -- Inserted on 11.06.2012 @ 17:12.32
Arthur  Happy    '11.06.2012 - 13.34.05' -- Inserted on 11.06.2012 @ 14:12.32 
```

我想获得与这些情绪变化相关的“持续时间”信息！

我的表包含数千条记录，我无法承受花费太多时间的过程。计算这个的最佳方法是什么？

*   触发“插入后”，填充“持续时间”列？
*   填充先前创建的“持续时间”列的存储过程？
*   计算列？
*   一个视图（我已经试过了，显示需要超过 2 秒，这是完全不能接受的）
*   另一个想法？

谢谢你的帮助 ！

重要编辑：情绪记录分组到数据包中，我们不能确定已经插入的记录有更小的日期！（请参阅我的记录旁边的上述评论）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:39:24.733

一个可能的 SQL 版本：

```
WITH CTE AS(
    SELECT ROW_NUMBER()OVER(PARTITION BY [Name] ORDER BY [Time])As RowNum
    , *
    FROM @table T
)
SELECT 
    DiffSec=DATEDIFF(s,[Time],(SELECT [Time] FROM CTE c2 WHERE c2.[Name]=CTE.[Name] AND c2.RowNum=CTE.RowNum+1))
    , [Name]
    , Mood
    , [Time]
FROM CTE 
ORDER BY [Name],[RowNum] 
```

结果：

```
DiffSec Name    Mood    Time
1678    Andy    Happy   2012-06-11 14:06:07.000
NULL    Andy    Sad     2012-06-11 14:34:05.000
5228    Arthur  Angry   2012-06-11 14:06:57.000
NULL    Arthur  Happy   2012-06-11 15:34:05.000 
```

您的测试数据：

```
declare @table table(name varchar(10),mood varchar(10),time datetime);
insert into @table values('Andy','Happy',convert(datetime,'11.06.2012 14:06:07',104));
insert into @table values('Arthur','Angry',convert(datetime,'11.06.2012 14:06:57',104));
insert into @table values('Andy','Sad',convert(datetime,'11.06.2012 14:34:05',104));
insert into @table values('Arthur','Happy',convert(datetime,'11.06.2012 15:34:05',104)); 
```

* * *

**编辑**自加入 a`CTE`似乎是一个非常糟糕的主意（*“[如果你自己加入 CTE，它会杀了你](http://dbaspot.com/sqlserver-programming/379487-cte-vs-temp-tables.html)”*）。我用临时表中的 500000 条记录测试了我的查询，并在 30 分钟后取消了查询。

这是使用子查询（使用您的注释模式）的更快方法（全部 4 秒）：

```
SELECT T.*
    ,(SELECT DATEDIFF(s,MAX(T2.Time),T.Time)
      FROM dbo.Temp T2
      WHERE T2.HE_Id = T.HE_Id
          AND T2.Time < T.Time
    ) AS DiffSec
FROM dbo.Temp AS T
ORDER BY HE_Id ,DiffSec 
```

# jax-ws - 来自Web服务方法的tomcat6 Web服务调用notfounderror

> ID：10980923
> 
> 赞同：0
> 
> 时间：2012-06-11T13:21:11.777
> 
> 标签：jax-ws, tomcat6

我正在开发一个公开 Web 服务的 Java Web 应用程序。此 Web 服务在同一个 tomcat 服务器上远程调用另外两个 java Web 服务。如果我尝试从其他两个服务调用方法，我会得到一堆错误，这些错误会导致自动生成的代码中出现 NoSuchMethodError。我正在使用 Netbeans 6.9、sun java 1.6 和 apache tomcat 6.0.26。我单独测试了 Web 服务，它们运行良好。

感谢您的时间。

让我更具体

我有带有 RecommendationManager Web 服务的 RecommendationWeb Web 应用程序：

```
@WebService()
public class RecommendationManager {
    public ArrayList<Long> getRecommendation(long userId, int NumOfRecommendations) {
        List<RecommendedItem> recommendations = this.myHModel.getRecommendations(userId, NumOfRecommendations);
        ArrayList<Long> result = new ArrayList<Long>();
        Iterator itr = recommendations.iterator();
        while(itr.hasNext()) {
            RecommendedItem recItem = (RecommendedItem) itr.next();
            result.add(new Long(recItem.getItemID()));
        }
        return result;
    }
} 
```

以及带有 ETL_WS Web 服务的 ETL_Procedures Web 应用程序：

```
@WebService()
public class ETL_WS {
    public ArrayList<Long> getCorrespondingActiveCouponsForRecommendation(ArrayList<Long> itemCategories, int numOfRecoms) {
    int sumOfAllRecommendedCategories = 0;
    Iterator itr = itemCategories.iterator();
    ArrayList<Coupon> coupons = new ArrayList<Coupon>();
    ArrayList<Long> recommendedCoupons = new ArrayList<Long>();
    HashMap productOccurences = new HashMap();
    while(itr.hasNext()) {
        Long item = (Long) itr.next();
        int val = 0;
        ArrayList<Coupon> temp = (ArrayList<Coupon>) couponMap.getCoupon(item);
        if(temp != null) {
            Iterator itr_a = temp.iterator();
            while(itr_a.hasNext()) {
                val += 1;
                sumOfAllRecommendedCategories += 1;
                Coupon tmp_coupon = (Coupon) itr_a.next();
                if(tmp_coupon.isActive())
                    coupons.add(tmp_coupon);
            }
            productOccurences.put(item, new Integer(val));
        }
    }
    long currentCat = coupons.get(0).getItem_id();
    int categoryRecs = 0;
    Integer currentOccurence = (Integer) productOccurences.get(new Long(currentCat));
    int maxCategoryItems = (currentOccurence.intValue()/sumOfAllRecommendedCategories);
    int tempRecItems = 0;
    int listIndex = 0;
    while(tempRecItems < numOfRecoms && listIndex < coupons.size()) {
        if(categoryRecs < maxCategoryItems && currentCat == coupons.get(listIndex).getItem_id()) {
            recommendedCoupons.add(coupons.get(listIndex).getItem_id());
            listIndex += 1;
            tempRecItems += 1;
            categoryRecs += 1;
        }else if(categoryRecs < maxCategoryItems && currentCat != coupons.get(listIndex).getItem_id()) {
            recommendedCoupons.add(coupons.get(listIndex).getItem_id());
            currentCat = coupons.get(listIndex).getItem_id();
            currentOccurence = (Integer) productOccurences.get(new Long(currentCat));
            maxCategoryItems = (currentOccurence.intValue()/sumOfAllRecommendedCategories);
            categoryRecs = 1;
            listIndex += 1;
            tempRecItems += 1;
        }else {
            recommendedCoupons.add(coupons.get(listIndex).getItem_id());
            currentCat = coupons.get(listIndex).getItem_id();
            currentOccurence = (Integer) productOccurences.get(new Long(currentCat));
            maxCategoryItems = (currentOccurence.intValue()/sumOfAllRecommendedCategories);
            categoryRecs = 1;
            listIndex += 1;
            tempRecItems += 1;
        }
    }

    return recommendedCoupons;
}
} 
```

这两个方法是在 INTERFACE_LAYER Web 服务的 Recommended_Interface Web 应用程序中调用的：

```
@WebService()
public class INTERFACE_LAYER {
    public ArrayList<Long> requestRecommendation(long userID, int noOfRecoms) {
    ArrayList<Long> recommendedCoupons = null;
    ArrayList<Long> recommendedItems = (ArrayList<Long>) getRecommendation(userID, noOfRecoms);
        recommendedCoupons = (ArrayList<Long>) getCorrespondingActiveCouponsForRecommendation(recommendedItems, noOfRecoms);
    return recommendedCoupons;
}

private static java.util.List<java.lang.Long> getRecommendation(long arg0, int arg1) {
    ws.recommender.RecommendationManagerService service = new ws.recommender.RecommendationManagerService();
    ws.recommender.RecommendationManager port = service.getRecommendationManagerPort();
    return port.getRecommendation(arg0, arg1);
}

private static java.util.List<java.lang.Long> getCorrespondingActiveCouponsForRecommendation(java.util.List<java.lang.Long> arg0, int arg1) {
    ws.etl.ETLWSService service = new ws.etl.ETLWSService();
    ws.etl.ETLWS port = service.getETLWSPort();
    return port.getCorrespondingActiveCouponsForRecommendation(arg0, arg1);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:02:16.443

不工作的原因是 Web 服务的方法 ArrayList 的返回值。当我将其更改为字符串时，它起作用了。

# c++ - 将无符号整数的三倍映射为双倍——这是最优化/最有效的方式吗？

> ID：10980924
> 
> 赞同：4
> 
> 时间：2012-06-11T13:21:15.710
> 
> 标签：c++, optimization, map

我面临以下任务：将无符号整数的三元组映射到一个值，该值为零或正（双）；并且能够为给定的三元组获得双倍或说它实际上为零；

我有以下简化：第一个（我们称之为 I）和第二个（我们称之为 J）整数在已知范围内（从零到 IMAX 和 JMAX）。对于第三个索引 (K)，我知道三元组的估计值（第三个索引是分散的），比如 ESTIMATE；在计算三元组增长的数量时，更准确地说，对于给定的 I 和 K，第三个指数的数量可以增加。

到目前为止，我看到了以下解决方案：

保持地图向量的向量：

```
vector< vector < map <unsinged int, unsigned int>>>  tri_map_;
//^I    ^J            ^K            ^index 
```

如果 'index' 不为零，则从补充向量中获取值：

```
vector< double> values;
values[index]; 
```

整个东西被初始化为：

```
tri_map_.resize(IMAX);
for (int i=0;i<IMAX;++i) tri_map_[i].resize(JMAX); 
```

您如何看待该解决方案？有更好的方法吗？

我不喜欢的是，我似乎无法为地图做“保留”之类的事情。有没有办法尝试分配足够的内存（因为我估计了第三个索引）并检查是否有足够的内存？除此之外我很满意。

EDIT1：IMAX ~ 数百 JMAX ~ 10^5

EDIT2：试图合并sehe的解决方案，但对于unordered_set和pair；所以，这就是我遇到问题的地方`specialization of ‘template<class _Tp> struct std::tr1::hash’ in different namespace`：... EDIT3：以下作品将调查其速度。谢谢大家的建议和意见！

```
#include <tr1/functional>
#include <vector>
#include <map>
#include <tr1/unordered_set>
#include <list>
#include <set>
#include <tr1/array>
#include <iostream>

struct pair_int {
    unsigned int first;
    unsigned int second;

    bool operator< (pair_int const& o) const {
        if ( first < o.first )
        return true;
        if ( first > o.first )
          return false;
        return second < o.second;
   }
   bool operator==(pair_int const& o) const {
        return ( (first==o.first)&&(second==o.second) );
   }
};

namespace std {
namespace tr1 {
    template<> struct hash<pair_int> {
        unsigned int operator()(pair_int const& key) const {
            return  ~key.first + 17u*key.second;
        }
    };
}
}

class pair_storage {
public:
    pair_storage() {};  
    ~pair_storage();
    ....
private:
    pair_int pair_ij_;
    std::map<pair_int,double>::iterator  pairMapIterator_;
    std::vector< std::map<pair_int,double> >  pairMapVector_;
    std::vector< std::tr1::unordered_set< pair_int > > pairMapVectorZero_;
}; 
```

无法编译它，`-std=c++0x`因为我在大代码的某些部分有一些问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T14:11:42.340

```
struct Triple
{
    unsigned int A;
    unsigned int B;
    unsigned int C;
};

map<Triple, double> mapping; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T14:32:46.557

在我看来你正在寻找

*   [标准::地图](http://en.cppreference.com/w/cpp/container/map)
*   [std::multimap](http://en.cppreference.com/w/cpp/container/multimap)
*   [std::unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map)
*   [std::unordered_multimap](http://en.cppreference.com/w/cpp/container/unordered_multimap)

这是一个使用 std::unordered_multimap 的简单示例（这将需要`std::hash<>`对您的键类型进行专门化，因此编写它的方式稍微复杂一些）：

```
#include <tuple>
#include <unordered_map>
#include <cassert>
#include <iostream>

struct triplet 
{ 
    unsigned a,b,c;
    bool operator< (triplet const& o) const { return std::tie(a,b,c) < std::tie(o.a,o.b,o.c); }
    bool operator==(triplet const& o) const { return std::tie(a,b,c) ==std::tie(o.a,o.b,o.c); }
};

namespace std {
    template<> struct hash<triplet> {
        unsigned int operator()(triplet const& key) const { 
            return  ~key.a + 17u*key.b + 17u*key.c; // totally made that up, could be better, I suppose
        }
    };
}

static std::ostream& operator<<(std::ostream& os, triplet const& key) {
    return os << '[' << key.a << ',' << key.b << ',' << key.c << ']';
}

int main()
{
    std::unordered_multimap<triplet, double> map;

    // insert items dynamically
    map.insert({ triplet{ /*I*/ 1, /*J*/ 2, /*K*/ 3 },  0.1 } );
    map.insert({ triplet{ /*I*/ 4, /*J*/ 5, /*K*/ 6 },  0.2 } );
    map.insert({ triplet{ /*I*/ 7, /*J*/ 8, /*K*/ 9 },  0.3 } );
    map.insert({ triplet{ /*I*/ 1, /*J*/ 2, /*K*/ 0 },  0.4 } ); // duplicate (I,J) ok

    map.insert({ triplet{ /*I*/ 1, /*J*/ 2, /*K*/ 0 }, 0.5 } );

    assert(0 == map.count(triplet {1,5,6}));
    assert(1 == map.count(triplet {4,5,6}));

    auto range = map.equal_range(triplet { 1,2,0 });
    for (auto it=range.first; it!=range.second; ++it)
        std::cout << it->first << ": " << it->second << "\n";
} 
```

输出（见**[http://ideone.com/pm8Oz](http://ideone.com/pm8Oz)**）：

```
[1,2,0]: 0.4
[1,2,0]: 0.5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:54:00.757

关于“这是最优化/最有效的方式吗？”的问题：

尝试使用`hash_map`or `unordered_map`; 这可能比`map`（或可能不是，取决于您的用例）更快。

关于“有没有办法尝试分配足够的内存......？”这个问题：

您可以使用它`unordered_map::max_load_factor`来调整内存/性能权衡；这就像预分配一样。

哦，您还可以使用`unordered_set`来存储映射为零的元素。这可能会减少内存消耗而无需性能成本。

# ruby-on-rails - 安装 ruby -filemagic 时出现“**** 错误：缺少编译此模块所需的库”

> ID：10980939
> 
> 赞同：1
> 
> 时间：2012-06-11T13:22:23.967
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, bundle

我需要 gem ruby​​-filemagic 来满足我项目中的一些要求。我将它包含在我的 Gemfile 中，当我运行 bundle install 时，它给了我这个错误

```
*** ERROR: missing required library to compile this module
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:29:35.897

您可能需要安装[libmagic](http://packages.debian.org/unstable/libdevel/libmagic-dev)才能使其工作，因为这是它使用的底层库。实际说明因发行版而异，因此如果您在安装 libmagic 本身时需要帮助，则需要向我们提供有关您的操作系统的更多信息。

# c++ - c++ 中是否有等效于 Java 的 equals 方法？

> ID：10980947
> 
> 赞同：9
> 
> 时间：2012-06-11T13:22:46.860
> 
> 标签：c++, variables, comparison

有类似 Java 的东西`equals()`吗？比较对象是否相同？

```
public boolean equals(Object obj) {
    if (obj == null || !(obj instanceof ViewMode)) {
        return false;
    }

    ViewMode dm = (ViewMode) obj;
    return dm.width == w
        && dm.h == h
        && dm.b == b
        && dm.f == f;
}

public int hashCode() {
    return w ^ h ^ f  ^ b ;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T13:43:26.757

对于您的示例的惯用等效项，您将定义`operator==`如下：

```
friend bool operator==(const ViewMode &lhs, const ViewMode &rhs) {
    return (lhs.w == rhs.w) && the rest;
}

friend bool operator!=(const ViewMode &lhs, const ViewMode &rhs) {
    return !(lhs == rhs);
} 
```

在 C++ 中，您通常不会编写函数来允许将`ViewMode`对象与与`ViewMode`. 我想如果您真的希望该比较返回 false，而不是拒绝编译，那么您可以添加几个模板运算符（作为自由函数，在类之外）：

```
template <typename T>
bool operator==(const ViewMode &, const T&) {
    return false;
}

template <typename T>
bool operator==(const T &, const ViewMode&) {
    return false;
} 
```

但我真的不推荐它。这个 Java 习语不适用于 C++，因为在 C++ 中你几乎不应该有一个对象，但不知道它的类型。

如果您希望您的 equals 函数是虚拟的，那么最好编写一个`equals()`虚拟函数，而不是使用`operator==`它。您可以将其编写为采用`const ViewObject &`as 参数，因此不需要任何等效于`instanceof`检查的方法。这也很好，因为 C++ 没有任何方法可以获取完全未知类型的对象并测试它是否是指定类型的实例。

在 C++ 中你很少需要多态的 equals 函数，但如果你`std::unordered_map`在`unordered_map`. 给它一个相等比较函数，它接受两个指针并调用`equals`一个或另一个，以及一个做一些有意义的事情的哈希函数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-11T13:24:32.757

不，C++ 没有像 Java 这样的全局类型模型。没有任何`Object`类型可以继承所有其他类型，因此没有`equals`为所有类定义的方法（如 ）。

C++ 提供了一个使用通用比较操作构建类型模型的框架：`operator ==`. 由您决定在所有类中构建它的所有实现，以便它们正确交互。但是没有与`Object.equals`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-11T13:26:17.533

你可以`operator==`在你的类中定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T13:26:57.117

您也许可以为此使用[`typeid`](http://en.cppreference.com/w/cpp/language/typeid)运算符。

# xsd - JAXB 认为可以接受的 XSD 模式

> ID：10980949
> 
> 赞同：0
> 
> 时间：2012-06-11T13:22:55.107
> 
> 标签：xsd, jaxb

我有一个 REST XML 响应，其中包含如下数据块：

```
<tag>
  <total-pages type="integer">5</total-pages>
  <previous-page nil="true"></previous-page>
  <next-page nil="true"></next-page>
  <offset type="integer">5</offset>
</tag> 
```

现在，有时数据可以像这样返回：

```
<tag>
  <total-pages type="integer">5</total-pages>
  <previous-page type="integer">0</previous-page>
  <next-page type="integer">1</next-page>
  <offset type="integer">5</offset>
</tag> 
```

我一直在尝试提出一个 XSD 模式结构，该结构将解释 JAXB 可以接受的两种可能性。

我努力了：

```
<tag>
  <total-pages type="numeric-type" />
  <previous-page type="numeric-type" />
  <next-page type="numeric-type" />
  <offset type="numeric-type" />
</tag>

<xsd:complexType>
    <xsd:simpleContent>
        <xsd:extension base="xsd:integer">
            <xsd:attribute type="xsd:string" name="type" use="optional">
            <xsd:attribute type="xsd:boolean" name="nil" use="optional">
        </xsd:extension>
    </xsd:simpleContent>
</xsd:complexType> 
```

但 JAXB 因解组错误而崩溃。

关于我可以使用什么 XSD 模式结构来解释返回 XML 的可变性的想法（我无法更改 XML，它来自我无法控制的第三方）。

谢谢，

佩里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:26:20.570

我首先从您的 XML 示例（在您的情况下为两个）生成一个 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="tag">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="total-pages">
          <xs:complexType>
            <xs:simpleContent>
              <xs:extension base="xs:unsignedByte">
                <xs:attribute name="type" type="xs:string" use="required" />
              </xs:extension>
            </xs:simpleContent>
          </xs:complexType>
        </xs:element>
        <xs:element name="previous-page">
          <xs:complexType>
            <xs:simpleContent>
              <xs:extension base="xs:string">
                <xs:attribute name="type" type="xs:string" use="optional" />
                <xs:attribute name="nil" type="xs:boolean" use="optional" />
              </xs:extension>
            </xs:simpleContent>
          </xs:complexType>
        </xs:element>
        <xs:element name="next-page">
          <xs:complexType>
            <xs:simpleContent>
              <xs:extension base="xs:string">
                <xs:attribute name="type" type="xs:string" use="optional" />
                <xs:attribute name="nil" type="xs:boolean" use="optional" />
              </xs:extension>
            </xs:simpleContent>
          </xs:complexType>
        </xs:element>
        <xs:element name="offset">
          <xs:complexType>
            <xs:simpleContent>
              <xs:extension base="xs:unsignedByte">
                <xs:attribute name="type" type="xs:string" use="required" />
              </xs:extension>
            </xs:simpleContent>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

当您与 XSD 进行比较时，您会注意到使用**字符串**而不是**整数**作为基本类型。这就解释了为什么您在解组时遇到问题：空字符串不是有效数字。

如果您将获得 xsi:nil 属性而不是“nil”，则 XSD 的生成方式将有所不同，即您的元素将具有 nillable="true"。

由于您无法更改 XML，因此您只能使用字符串；或者，您可以在空字符串和数值之间创建一个联合...至于在 JAXB 中的外观，您可以尝试一下...

# android - 操作栏选项菜单图标

> ID：10980950
> 
> 赞同：-2
> 
> 时间：2012-06-11T13:22:56.997
> 
> 标签：android, android-actionbar, icons, optionmenu

有谁知道如何在操作栏中的点菜单图标下添加“菜单”文本？

另外，如何让我的选项菜单项在 Android 4.0 中显示图标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T16:09:21.083

您无法在 4.0 操作栏中的默认菜单图标下添加文本，但是您有两种选择

1）您可以创建自己的图标，包括文本“菜单”（不利）

2）使用点图像和属性创建一个自定义菜单项，以便文本出现在它旁边。

```
android:showAsAction="always|withText" 
```

查看[Action Bar 上的 Android SDK 文档，](http://developer.android.com/guide/topics/ui/actionbar.html)了解如何创建自定义项并让它们执行任务。

# android - 在 Android 中使用 AUTOINCREMENT 键插入或忽略表

> ID：10980954
> 
> 赞同：5
> 
> 时间：2012-06-11T13:23:14.733
> 
> 标签：android, sqlite, insert, replace

我正在尝试将数据插入到一个新的空表中。但我不断收到错误（错误代码 19：约束失败）。我认为问题可能是由'INTEGER PRIMARY KEY AUTOINCREMENT'引起的。这是我的代码：

```
database.execSQL("CREATE TABLE IF NOT EXISTS contacts (cid INTEGER PRIMARY KEY AUTOINCREMENT, name varchar NOT NULL, user varchar NOT NULL, UNIQUE(user) ON CONFLICT REPLACE)");
...
String sql = "INSERT OR IGNORE INTO contacts ( name , user) VALUES (?, ?)";
database.beginTransaction();

SQLiteStatement stmt = database.compileStatement(sql);
stmt.bindString(1, name);
stmt.bindString(2, entry.getUser());
int i = (int)stmt.executeInsert();
stmt.execute();
stmt.clearBindings();
stmt.close();

// error: 06-11 20:50:42.295: E/DB(12978): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed 
```

有人知道sql语句有什么问题吗？我怎么解决这个问题？谢谢
我已经阅读了几篇关于stackoverflow的文章。但找不到与“插入或替换”+“整数主键自动增量”相关的任何帖子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T12:55:12.810

我认为你的代码正在做它应该做的事情。阅读您的代码，您似乎希望它忽略已经插入内容的插入。您收到的错误是告诉您插入失败。

> 如果您使用 INSERT IGNORE，那么如果它导致重复键，则实际上不会插入该行。但该语句不会产生错误。它会生成一个警告。这些案例包括：
> 
> 在具有 PRIMARY KEY 或 UNIQUE 约束的列中插入重复键。将 NULL 插入具有 NOT NULL 约束的列中。向分区表插入一行，但插入的值未映射到分区。- [“插入忽略”与“插入......重复密钥更新”](https://stackoverflow.com/questions/548541/insert-ignore-vs-insert-on-duplicate-key-update)

我建议在插入之前捕获 SQLiteConstraintException 或检查数据是否已经存在。如果您需要一些关于如何检查数据是否已插入的想法，请告诉我，我之前必须这样做。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:31:01.237

[Lars Vogella 在这里写的 Android 上的 SQLite](http://www.vogella.com/articles/AndroidSQLite/article.html)有一个很好的开始结束示例

在里面和下面的一些地方是他用来创建表格的字符串：

```
// Database creation sql statement
private static final String DATABASE_CREATE = "create table "
        + TABLE_COMMENTS + "(" + COLUMN_ID
        + " integer primary key autoincrement, " + COLUMN_COMMENT
        + " text not null);"; 
```

我刚刚没有尝试过他或你的，但我注意到他和你之间的一些不同之处是：

*   他在表名和左括号之间没有空格
*   他在 SQL 字符串中有一个分号。在右括号之后。

我不确定这些是否会为您解决问题，但这可能是一个好的开始。

# mysql - 查询以添加基于 GROUP BY 的增量字段

> ID：10980957
> 
> 赞同：5
> 
> 时间：2012-06-11T13:23:24.733
> 
> 标签：mysql, sql

有一张桌子照片

```
photos.id
photos.user_id
photos.order 
```

A）是否可以通过单个查询按用户对所有照片进行分组，然后更新顺序 1,2,3..N ？

B）增加了扭曲，如果某些照片已经具有关联的订单价值怎么办？确保新的 photos.order 永远不会重复，并填写低于或高于现有订单的蚂蚁订单（尽可能）

我唯一的想法就是在上面运行一个脚本并循环遍历它并重新“排序”所有内容？

```
photos.id int(10)
photos.created_at datetime
photos.order int(10)
photos.user_id int(10) 
```

现在数据可能看起来像这样

```
user_id = 1
photo_id = 1
order = NULL

user_id = 2
photo_id = 2
order = NULL

user_id = 1
photo_id = 3
order = NULL 
```

期望的结果是

```
user_id = 1
photo_id = 1
order = 1

user_id = 2
photo_id = 2
order = 1

user_id = 1
photo_id = 3
order = 2 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T16:18:36.613

**一种）**

您可以使用随每一行递增并随每个 user_ID 重置的变量来获取行数。

```
SELECT  ID,
        User_ID,
        `Order`
FROM    (   SELECT  @r:= IF(@u = User_ID, @r + 1,1) AS `Order`,
                    ID,
                    User_ID,
                    @u:= User_ID
            FROM    Photos,
                    (SELECT @r:= 1) AS r,
                    (SELECT @u:= 0) AS u
            ORDER BY User_ID, ID
        ) AS Photos 
```

[SQL Fiddle 示例](http://sqlfiddle.com/#!2/7c3eb/3)

**二）**

我的第一个解决方案是添加`Order`到添加行号的排序中，因此任何具有`Order`Gets 的内容首先按其顺序排序，但这仅在您的排序系统没有间隙并且从 1 开始时才有效：

```
SELECT  ID,
        User_ID,
        RowNumber AS `Order`
FROM    (   SELECT  @r:= IF(@u = User_ID, @r + 1,1) AS `RowNumber`,
                    ID,
                    User_ID,
                    @u:= User_ID
            FROM    Photos,
                    (SELECT @i:= 1) AS r,
                    (SELECT @u:= 0) AS u
            ORDER BY User_ID, `Order`, ID
        ) AS Photos
ORDER BY `User_ID`, `Order` 
```

[`Order`使用字段的示例](http://sqlfiddle.com/#!2/c1967/52)

**有间隙订购**

我最终找到了一种即使在序列中有间隙时也能保持排序顺序的方法。

```
SELECT  ID, User_ID, `Order`
FROM    Photos
WHERE   `Order` IS NOT NULL
UNION ALL
SELECT  Photos.ID,
        Photos.user_ID,
        Numbers.RowNum
FROM    (   SELECT  ID,
                    User_ID,
                    @r1:= IF(@u1 = User_ID,@r1 + 1,1) AS RowNum,
                    @u1:= User_ID 
            FROM    Photos,
                    (SELECT @r1:= 0) AS r,
                    (SELECT @u1:= 0) AS u
            WHERE   `Order` IS NULL
            ORDER BY User_ID, ID
        ) AS Photos
        INNER JOIN
        (   SELECT  User_ID,
                    RowNum,
                    @r2:= IF(@u2 = User_ID,@r2 + 1,1) AS RowNum2,
                    @u2:= User_ID 
            FROM    (   SELECT  DISTINCT p.User_ID, o.RowNum
                        FROM    Photos AS p,
                                (   SELECT  @i:= @i + 1 AS RowNum
                                    FROM    INFORMATION_SCHEMA.COLLATION_CHARACTER_SET_APPLICABILITY,
                                            ( SELECT @i:= 0) AS i
                                ) AS o
                        WHERE   RowNum <= (SELECT COUNT(*) FROM Photos P1 WHERE p.User_ID = p1.User_ID)
                        AND     NOT EXISTS
                                (   SELECT  1
                                    FROM    Photos p2
                                    WHERE   p.User_ID = p2.User_ID
                                    AND     o.RowNum = p2.`Order`
                                )
                        AND     p.`Order` IS NULL
                        ORDER BY User_ID, RowNum
                    ) AS p,
                    (SELECT @r2:= 0) AS r,
                    (SELECT @u2:= 0) AS u
            ORDER BY user_ID, RowNum
        ) AS numbers
            ON Photos.User_ID = numbers.User_ID
            AND photos.RowNum = numbers.RowNum2
ORDER BY User_ID, `Order` 
```

但是，正如您所看到的，这非常复杂。这是通过将具有`order`价值的人与没有价值的人分开对待而起作用的。`order`最上面的查询只是按照每个用户的 ID 顺序排列所有没有值的照片。底部查询使用交叉连接为每个用户 ID 生成从 1 到 n 的顺序列表（最多为每个 User_ID 的条目数）。因此，使用这样的数据集：

```
ID  User_ID Order
1   1       NULL
2   2       NULL
3   1       NULL
4   1       1
5   1       3
6   2       2
7   2       3 
```

它会产生

```
UserID  RowNum
1       1
1       2
1       3
1       4
2       1
2       2
2       3 
```

然后，它使用`NOT EXISTS`非 null 来消除 Photos 已经使用的所有组合`order`，并按由 User_ID 划分的 RowNum 的顺序排列

```
UserID  RowNum  Rownum2
1       2       1
1       4       2
2       1       1 
```

然后可以将 RowNum2 值与在 from 子查询中获得的 rownum 值匹配，从而给出正确的`order`值。长篇大论，但它的工作原理。

**[SQL Fiddle 示例](http://sqlfiddle.com/#!2/802b9/25)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-28T15:25:05.693

为我工作。我需要将*版本*分组增加 4 个字段（*主机、文件夹、文件名、状态*）并按 1 排序（*下载*的AtTicks ）。这是我的**选择**

```
SET @status := NULL;
SET @version := NULL;
SELECT
  id,
  host,
  folder,
  fileName,
  status,
  downloadedAtTicks,
  version,
  IF(IF(status IS NULL, 0, status) = @status, @version := @version + 1, @version := 0) AS varVersion,
  @status := IF(status IS NULL, 0, status) AS varStatus
FROM csvsource
ORDER BY host, folder, fileName, status, downloadedAtTicks; 
```

这是我的**更新**

```
SET @status := NULL;
SET @version := NULL;
UPDATE
    csvsource csv,
    (SELECT
       id,
       IF(IF(status IS NULL, 0, status) = @status, @version := @version + 1, @version := 0) AS varVersion,
       @status := IF(status IS NULL, 0, status) AS varStatus
     FROM csvsource
     ORDER BY host, folder, fileName, status, downloadedAtTicks) AS sub
SET
  csv.version = sub.varVersion
WHERE csv.id = sub.id; 
```

# c# - 在 Windows Phone 7 的网络浏览器中显示时出现问题

> ID：10980962
> 
> 赞同：-3
> 
> 时间：2012-06-11T13:23:37.347
> 
> 标签：c#, visual-studio-2010, windows-phone-7

像往常一样，我打开我的项目开始工作。但是昨天，我打开它，它不起作用。我什至没有更改我的代码。前一天它工作，昨天它没有。通过我在互联网上的搜索，我知道这是通过更改网络引起的。我不知道它是否正确，我不知道如何解决它。我的代码如下，它将网站 google.com 加载到 windows phone 7 的网络浏览器。

```
 private void webBrowser1_Loaded(object sender, RoutedEventArgs e)
    {
        Uri u = new Uri("http:///www.google.com", UriKind.RelativeOrAbsolute);
        webBrowser1.Navigate(u);
    } 
```

第一次，我在 VS2010 上的 Tools>Options>Web browser>Security 中降低了安全性，然后它就可以工作了。但第二天它又没有工作了。请帮我 。如果再次发生这种情况，我将无能为力。请帮我。我真的需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:01:11.493

您的 URL(http:///www.google.com) 似乎有误，删除多余的 '/' 并尝试[http://www.google.com](http://www.google.com)

# java - 自定义注释驱动开发

> ID：10980966
> 
> 赞同：1
> 
> 时间：2012-06-11T13:23:45.683
> 
> 标签：java, annotations, code-generation, switch-statement

我想为我的 bean 编写自己的验证器和代码生成器。我定义注释并用它们注释我的字段。当我验证它们时：

```
public boolean validate(Object obj) {
    Class clazz = obj.getClass();
    for (Field field : clazz.getDeclaredFields()) {
        for (Annotation annotation : field.getAnnotations()) {
            ...//What to do here
        }
    }
    return false;
} 
```

即我的注释是@NotEmpty

我应该喜欢`if else if else ...`还是有任何其他简短的方法（以及用来比较的是我看起来的注释，即@NotNull -> 带有annotation.equals（“NotNull”））？我的意思是如何实现它。另一方面，Lombok 项目有这样的注释：

```
@Getter @Setter 
```

如何为我的类动态（或在编译之前）生成 getter 和 setter（我想只用 Java 实现它，而不需要任何其他库）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:30:27.827

我认为您最好搜索所需的注释，而不是遍历所有注释。您可以像这样查看注释是否存在：

```
field.isAnnotationPresent(NotEmpty.class) 
```

并获取注释并检查您可以使用的元素：

```
Annotation notEmpty = field.getAnnotation(NotEmpty.class) 
```

要在运行时修改您的类，我认为[这](https://stackoverflow.com/a/6229591/1384984)就是您要寻找的。[在这里](http://asm.ow2.org/doc/tutorial-asm-2.0.html)您可以找到 ASM 的教程。

# tridion - Tridion CP 2009 SP1 的内容提取的最大大小是多少？

> ID：10980971
> 
> 赞同：3
> 
> 时间：2012-06-11T13:23:57.993
> 
> 标签：tridion

我收到大约 120MB 的“内容太大”错误。这是硬限制还是可以通过设置进行扩展？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T13:32:37.267

ASFAIK，在内容搬运工级别没有硬性限制。但是，IIS 对文件上传有默认的 30 MB 限制。您可以根据需要将 web.config 中的值增加到更高的值。增加限制的参考链接：http: [//sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_ContentPorter_2009_SP1/task_CCFED8DFFA9A4E138DEA72FBDF4C18AD](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_ContentPorter_2009_SP1/task_CCFED8DFFA9A4E138DEA72FBDF4C18AD)

```
<system.web>
      <httpRuntime maxRequestLength="209715200"/>
</system.web>
<security>
  <requestFiltering>
    <requestLimits maxAllowedContentLength="209752100" />
  </requestFiltering>
</security> 
```

web.config 中的上述配置值会将限制设置为 200 MB。

更改完成后不要忘记启动 Tridion 核心服务、内容搬运服务和 IIS 重置。

希望这些信息有所帮助。

# c# - Ghost 文件在删除和重新创建时仍然存在

> ID：10980973
> 
> 赞同：3
> 
> 时间：2012-06-11T13:24:00.800
> 
> 标签：c#, file, delete-file

我刚刚注意到删除和重写文件的一个奇怪行为：如果两个操作之间的间隔足够短，则文件创建时间不会得到更新。

我运行了以下代码：

```
File.Delete("hello");
using(var stream = new StreamWriter("hello"))
{
    stream.WriteLine("hello");
}
var f = new FileInfo("hello");
Console.WriteLine("{0} {1}ms", f.CreationTime, f.CreationTime.Millisecond); 
```

如果我在行上放一个断点`using(...)`，我可以看到文件在删除后消失，但最后它仍然会给我旧的创建日期。我什至可以从资源管理器中手动删除文件，然后运行此代码，它仍然显示旧的创建时间。

但是，如果我在删除和重新创建之间等待一个不确定的时间（大约 1 分钟），则创建时间设置正确（如果我在上面提到的断点上等待调试器）。

这是从哪里来的？它是记录在案的 Windows 行为吗？我是不是忘记了什么？

PS：我正在 Windows XP 上测试它，这很重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T13:29:51.823

这是 Windows 中称为文件隧道的已知问题/功能。

参考： http: [//support.microsoft.com/kb/172190](http://support.microsoft.com/kb/172190)

相关：
[https ://serverfault.com/questions/92757/incorrect-file-creation-date-in-windows-xp-vista](https://serverfault.com/questions/92757/incorrect-file-creation-date-in-windows-xp-vista)
[为什么 Windows 将新创建文件的“创建时间”属性设置为旧时间？](https://stackoverflow.com/questions/661977/why-windows-sets-new-created-files-created-time-property-to-old-time)
[Windows文件系统：删除并再次创建文件时，文件的创建时间不会改变](https://stackoverflow.com/questions/8804342/windows-filesystem-creation-time-of-a-file-doesnt-change-when-while-is-deleted)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:26:26.753

尝试强制刷新 FileInfo（因为数据已缓存）：

```
var f = new FileInfo("hello");
f.Refresh(); // Force to read all props again
Console.WriteLine("{0} {1}ms", f.CreationTime, f.CreationTime.Millisecond); 
```

# matlab - 类中的 GUI 句柄

> ID：10980974
> 
> 赞同：1
> 
> 时间：2012-06-11T13:24:00.833
> 
> 标签：matlab, user-interface, handles

我正在编写一个 OO gui 程序，但在尝试使用该`set()`函数更改 GUI 元素属性时遇到问题。我只是想将按钮启用属性从关闭更改为打开。我附上了显示下面相同问题的删节代码。matlab 处理类等的方式感觉很奇怪，所以问题可能只是由于我对系统的误解造成的。无论如何，当我尝试在 上使用该`set()`函数时`handle AD.buttonExit`，当我在函数中执行命令时，它会按预期`initUI()`工作。如果我尝试在不同的函数中做同样的事情，它会失败。我通过简单地打印`AD`. 在`initUI`函数中，它清楚地显示了一个句柄值`buttonExit`，它不在构造函数（或任何其他类成员函数）中。我觉得我犯了一个基本的错误，但是我没有看到它，我希望有人可以帮助我。

-- rfhigler

代码（为清楚起见而删节）：

```
classdef test

  properties 
      AppUI;
      buttonExit;
  end

  methods 
      function AD = test()
          %draws UI
          AD.initUI(); 
          set(AD.buttonExit, 'Enable', 'on')
          AD.test2()
      end
      function initUI(AD)
          AD.AppUI = figure('Visible','off','Position',[520,321,695,482], 'MenuBar', 'none', 'Name', '3D Particle Tracking',...
              'NumberTitle', 'off', 'Resize', 'off', 'Color', [0.94,0.94,0.94]);
          AD.buttonExit = uicontrol('Enable', 'off', 'Style', 'pushbutton', 'Visible', 'on', 'Position', [35,29,181,31], 'String', 'Exit');
          set(AD.AppUI, 'Visible', 'on');
          %1 set(AD.buttonExit, 'Enable', 'on')
      end
      function test2(AD)
          set(AD.buttonExit, 'Enable', 'on')
      end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:29:53.560

Matlab 类有点奇怪：默认情况下，它们是“值”类而不是“句柄”类。[此处](http://www.mathworks.com/help/techdoc/matlab_oop/brfylwk-1.html)描述了不同之处。

简而言之，使您的类扩展`handle`该类将使其行为方式与您对其他 OO 语言的期望相同。只需将类定义行更改为

```
classdef test < handle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-06T22:49:20.733

因为您在 initUI 中更新了 AD，所以必须输出更新后的变量。因此，您需要更改以下几行：

`function initUI(AD)`至`function AD = initUI(AD)`

并且，在 test() 函数中：

`AD.initUI();`至`AD = AD.initUI();`

# c# - 如何在 MonoDroid 中正确继承 SeekBar？

> ID：10980975
> 
> 赞同：0
> 
> 时间：2012-06-11T13:24:03.970
> 
> 标签：c#, android, .net, xamarin.android, seekbar

我目前对 MonoDroid 中的 SeekBar 类有疑问。

目前我已经像这样扩展它：

```
 public class TTSeekBar : SeekBar, ITTComponent
    {
        public TTSeekBar(Context context): base(context)
        {

        }

        private int _min = 0;
        public int Min { get { return _min; } set { _min = value;} }

        public override int Progress
        {
            get
            {
                return base.Progress + _min;
            }
            set
            {
                base.Progress = value;
            }
        }

        public override int Max
        {
            get
            {
                return base.Max + _min;
            }
            set
            {
                base.Max = value + _min;
            }
        }

        public object GetInputData()
        {
            return (this.Progress + _min).ToString();
        }
    } 
```

但是每当我尝试使用`TTSeekBar _seekBar = new TTSeekBar(this);`（`this`活动在哪里）创建一个对象时，我都会`Sytem.NotSupportedException`在构造函数中抛出一条消息

> 无法从本机句柄 44fdad20 激活 TTApp.TTSeekBar 类型的实例

像这样扩展命名空间的其他组件`Android.Widget`似乎工作得很好，所以我想知道为什么这个不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T17:19:13.787

刚刚在 API Level 8 上进行了测试，它似乎可以工作。

```
using System;
using System.Globalization;
using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Util;
using Android.Widget;
using Android.OS;

namespace AndroidApplication1
{
    [Activity(Label = "AndroidApplication1", MainLauncher = true, Icon = "@drawable/icon")]
    public class Activity1 : Activity
    {
        int count = 1;

        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            // Set our view from the "main" layout resource
            SetContentView(Resource.Layout.Main);

            // Get our button from the layout resource,
            // and attach an event to it
            Button button = FindViewById<Button>(Resource.Id.MyButton);

            button.Click += delegate { button.Text = string.Format("{0} clicks!", count++); };

            var seekbar = new TTSeekBar(this);

            var ll = FindViewById<LinearLayout>(Resource.Id.LinearLayout);

            ll.AddView(seekbar);
        }
    }

    public class TTSeekBar : SeekBar
    {
        protected TTSeekBar(IntPtr javaReference, JniHandleOwnership transfer) : base(javaReference, transfer)
        {
        }

        public TTSeekBar(Context context) : base(context)
        {
        }

        public TTSeekBar(Context context, IAttributeSet attrs) : base(context, attrs)
        {
        }

        public TTSeekBar(Context context, IAttributeSet attrs, int defStyle) : base(context, attrs, defStyle)
        {
        }

        private int _min = 0;
        public int Min { get { return _min; } set { _min = value; } }

        public override int Progress
        {
            get
            {
                return base.Progress + _min;
            }
            set
            {
                base.Progress = value;
            }
        }

        public override int Max
        {
            get
            {
                return base.Max + _min;
            }
            set
            {
                base.Max = value + _min;
            }
        }

        public object GetInputData()
        {
            return (Progress + _min).ToString(CultureInfo.InvariantCulture);
        }
    }
} 
```

因此，正如我所说，您只需要实现正确的构造函数，它就可以正常工作。

这里有一个解释：[MonoDroid：调用自定义视图的构造函数时出错 - TwoDScrollView](https://stackoverflow.com/questions/10593022/monodroid-error-when-calling-constructor-of-custom-view-twodscrollview)

# python - python双端队列/列表过滤

> ID：10980983
> 
> 赞同：0
> 
> 时间：2012-06-11T13:24:27.997
> 
> 标签：python

我有一个来自数据库的操作列表。这被复制到一个双端队列中，因为我想按顺序处理它，一边走一边从左边弹出东西。

所以我有类似 actions = deque(actions) 的东西，这很好。

每个操作项都是来自使用 DictCursor 的 psycopg 模块的列表。每个列表都有项目“阶段”。

所以事情是分阶段进行的。有些动作在“a”阶段，有些在“b”阶段，等等。这不是存储数据的最佳方式，但这就是我得到的。

所以为了让我的生活更轻松，我想将双端队列分阶段分成几个双端队列。

因此，如果 actions[0]['phase'] == 'a' 那么这将进入一个列表，其中仅包含来自阶段 a 的项目，依此类推，b 等。

我可以通过一堆 if 和附加来做到这一点，但这似乎需要付出很多努力。我认为答案可能是 filter()，但我不太确定如何使用它。

随机注意事项：

*   每个项目都是有序的，需要在每个双端队列中保留顺序。
*   这些阶段是已知的和连续的。例如，如果阶段 c 不存在，我们知道阶段 d 不存在。阶段的数量是有限的，如果我记得的话，大概是 5 个。

澄清尝试：

我有一个双端队列，动作。就像是：

```
actions = [
    ['phase': 'a', 'something_else': 'x'], 
    ['phase': 'a', 'something_else': 'y'],
    ['phase': 'b', 'something_else': 'x']
] 
```

想要结束（类似）：

```
a = [
    ['phase': 'a', 'something_else': 'x'], 
    ['phase': 'a', 'something_else': 'y']
]
b = [
    ['phase': 'b', 'something_else': 'x']
] 
```

使用最少的代码，以及适用于阶段/等中任意数量的阶段/项目的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:45:17.010

首先定义一个键函数，当给定一个动作时返回相位，例如

```
key = lambda action: action["phase"] 
```

现在首先排序`key`——这不会重新排列不必要的顺序，即每个阶段都保持顺序（它是“[稳定](http://wiki.python.org/moin/HowTo/Sorting/#Sort_Stability_and_Complex_Sorts)的”）——然后像这样使用[`groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)from `itertools`：

```
from itertools import groupby

actions.sort(key=key)

results = []    
for phase, action_iterable in groupby(actions, key=key):
    action_list = list(action_iterable)
    action_list.reverse()
    results.append((phase, action_list))) 
```

如您所见，我已经颠倒了列表。这样您就可以有效地弹出列表的末尾，而不是在双端队列上使用 popleft。如果您愿意，可以将它们变成双端队列而不是反转。现在像这样使用：

```
for phase, actions in results:
    while actions:
        action = actions.pop()
        # etc... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T13:43:33.500

我认为您需要 itertools 模块中的 groupby 。

[http://docs.python.org/library/itertools.html#itertools.groupby](http://docs.python.org/library/itertools.html#itertools.groupby)

# matlab - Matlab - “0:.1:1”意外的精度行为

> ID：10980994
> 
> 赞同：1
> 
> 时间：2012-06-11T13:24:53.427
> 
> 标签：matlab, floating-point, precision, floating-accuracy, floating-point-precision

> **可能重复：**
> [Matlab 给出错误答案](https://stackoverflow.com/questions/10930750/matlab-gives-wrong-answer)

`0:.1:1`当我使用-range 函数时，谁能向我解释为什么会发生以下情况？

```
>> vecA = 0:.1:1;
>> vecB = [0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1];
>> vecA == vecB

ans =

     1     1     1     0     1     1     1     1     1     1     1 
```

为什么 vecA(4) 不等于 0.3？它们*看起来*完全一样；）

```
vecA =

  Columns 1 through 7

         0    0.1000    0.2000    0.3000    0.4000    0.5000    0.6000

  Columns 8 through 11

    0.7000    0.8000    0.9000    1.0000

>> vecB

vecB =

  Columns 1 through 7

         0    0.1000    0.2000    0.3000    0.4000    0.5000    0.6000

  Columns 8 through 11

    0.7000    0.8000    0.9000    1.0000 
```

我认为这里的精度有问题吗？还是我的理解有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:33:39.687

计算机是二进制的，它们的原生浮点格式不能精确存储小数。（您可以使用比率类型或定点小数类型，但使用这些类型的计算要慢得多。）

因此，测试浮点值是否相等实际上是没有用的。而是检查差异的绝对值。

你绝对应该阅读[每个计算机科学家应该知道的关于浮点运算的知识](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.22.6768)

（也有一些更简单的解释，比如[http://floating-point-gui.de/](http://floating-point-gui.de/)但是你应该用这些来帮助你理解Goldberg的论文，而不是代替它）

* * *

在这种情况下，您实际看到的是`0.2 + 0.1 != 0.3`（范围使用第一个版本，`vecA(3) = vecA(2) + step`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T13:33:00.313

这可能是有限精度浮点运算的一般结果。尝试使用

```
 format long 
```

然后输出值以查看更精确的显示。我会想象在内部 vecA 是使用循环和值递增或划分范围创建的，这会导致微小的差异。当您使浮点值相等时，您会遇到此问题。通常，这是直接比较浮点数的常见结果。

# ajax - 按顺序进行 jQuery ajax 调用

> ID：10980997
> 
> 赞同：4
> 
> 时间：2012-06-11T13:24:56.500
> 
> 标签：ajax, jquery

我想以这种方式进行一堆 Ajax 调用： call(n) 在 call(n-1) 完成后开始......

我不能使用**async:false**有很多原因：

*   一些请求可能是*jsonp*（最相关的）
*   我还有其他可能同时工作的ajax请求..
*   浏览器被屏蔽了

我不能以这种方式链接我的请求：

```
$.post('server.php', {param:'param1'}, function(data){
        //process data
    $.post('server.php', {param:'param2'}, function(data){
        //process data
    });
}); 
```

因为请求的数量和参数是根据用户输入动态创建的。

一个小[例子](http://jsfiddle.net/u5HJm/)说明了我的问题。

你会看到服务器响应顺序是随机的，我想要实现的就是有序

```
Response to arg1
Response to arg2
Response to arg3
Response to arg4
Response to arg5
Response to arg6 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T13:33:30.903

好的，jQuery [Ajax](http://api.jquery.com/jQuery.ajax/)返回一个[Deferred Object](http://api.jquery.com/category/deferred-object/)，这可以帮助您实现这一点。

这是如何做到的：

```
var args = ['arg1','arg2','arg3','arg4','arg5','arg6'];

deferredPost(0, 5);

function deferredPost(index, max){    
    var delay = Math.random()*3;
    if (index<max){
        return $.post('/echo/html/', {html:('Response to '+args[index]), delay:delay}, 
        function(data){
            $('#response').append(data+'<br>');
        }).then(function(){
            deferredPost(index+1, max);
        });
    } else {
        return $.post('/echo/html/', {html:('Response to '+args[index]), delay:delay}, 
        function(data){
            $('#response').append(data+'<br>');
        });
    }
} 
```

[演示](http://jsfiddle.net/YCXhL/1/)

这里我使用了[**then**](http://api.jquery.com/deferred.then/)函数。

我还建议阅读更多关于延迟对象的内容，它们可以解决一些常见问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:45:39.957

这是队列的工作。

```
var queue = ['arg1','arg2','arg3','arg4','arg5','arg6'];

function runQueueInOrder() {
    if (queue.length === 0) { return; }
    var arg = queue.pop();
    var delay = Math.random()*3;
    $.post('/echo/html/', {html:('Response to '+ arg), delay:delay}, 
        function(data){
            $('#response').append(data+'<br>');        
    }).then(function() {
        runQueueInOrder();
    });        
}

runQueueInOrder(); 
```

`then`如果您已将队列的处理封装在一个函数中，则无需使用 jQuery即可。不过它很方便。该代码具有破坏性，因为它从原始数组中删除了元素（但在处理它们时，通常没问题）。

调用该方法`runQueueInOrder`以启动处理。

当没有更多工作要做时，函数简单地退出。（我之前写过一个在计时器上轮询的版本，但这里不需要）。

该函数抓取下一个工作`arg`，调用您的`post`调用语法，并在完成后使用 jQuery 的 deferred then 回调再次调用该函数（如果需要进一步处理队列）。

（我查看了另一个答案，发现它难以理解，因此我采用了一种更简单的方法。使用我的简单版本，您可以在发现新作品时添加新项目 - 或删除它们。）。