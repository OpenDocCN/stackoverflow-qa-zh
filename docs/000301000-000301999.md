# StackOverflow 问答 000301000-000301999

# javascript - 要显示的元素的计算高度：无

> ID：301004
> 
> 赞同：1
> 
> 时间：2008-11-19T04:38:04.410
> 
> 标签：javascript

为了计算可变高度元素的顶部位置，我正在考虑执行以下操作：

1.  将元素移出视口顶部 1000px
2.  设置要显示的元素：block
3.  获取元素的高度
4.  设置要显示的元素：无
5.  继续前进，好像一切都正常而美好

这种方法有什么陷阱吗？有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T04:46:54.563

我会看看[原型的](http://prototypejs.org/assets/2008/9/29/prototype-1.6.0.3.js)`getDimensions`实现。

它将位置设置为绝对，将可见性设置为隐藏，并将显示设置为短暂阻止。我已经写了一个处理获取`display:none`元素中包含的东西的高度的方法，但在某些边缘情况下它有点虚弱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T05:06:17.957

你能不只是将可见性设置为隐藏并获得偏移高度吗？

# c++ - 什么是 C++ 中的“查询参数”？

> ID：301008
> 
> 赞同：0
> 
> 时间：2008-11-19T04:41:12.733
> 
> 标签：c++, sql, db2, stringstream

我们使用 stringstream 在 C++ 中准备选择查询。但我们强烈建议使用 QUERY PARAMETERS 提交 db2 sql 查询以避免使用 stringstream。任何人都可以分享 C++ 中查询参数的确切含义吗？另外，分享一些实用的示例代码片段。

提前感谢帮助。

编辑：它是 stringstream 而不是 strstream。

谢谢， 马修 Liju

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T04:47:50.037

我怀疑这通常指的是参数化查询，而不是在字符串中构造查询，它们提供 sql 变量（或参数），然后分别传递这些变量。这些对于处理 SQL 注入攻击要好得多。用一个例子来说明：

```
"SELECT * FROM Customers WHERE CustomerId = " + _customerId; 
```

不好，虽然这样：

```
"SELECT * FROM Customers where CustomerId = @CustomerId" 
```

很好。问题是您必须将参数添加到查询对象（我不知道这是如何在 C++ 中完成的。

参考其他问题：

*   [https://stackoverflow.com/questions/1973/what-is-the-best-way-to-avoid-sql-injection-attacks](https://stackoverflow.com/questions/1973/what-is-the-best-way-to-avoid-sql-injection-attacks)
*   [存储过程与参数化查询](https://stackoverflow.com/questions/230668/stored-procedures-vs-parameterized-queries)

狂野的网络：

*   [http://www.justsoftwaresolutions.co.uk/database/database-tip-use-parameterized-queries.html](http://www.justsoftwaresolutions.co.uk/database/database-tip-use-parameterized-queries.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T05:02:15.157

参数化查询形式的sql查询比字符串形式的查询安全，避免sql注入攻击。参数化查询示例

```
StringBuilder sqlstr = new StringBuilder();  
cmd.Parameters.AddWithValue("@companyid", CompanyID);  
sqlstr.Append("SELECT evtconfigurationId, companyid, 
  configname, configimage FROM SCEVT_CONFIGURATIONS ");
sqlstr.Append("WHERE companyid=@companyid "); 
```

查询字符串格式示例

```
StringBuilder sqlstr = new StringBuilder();   
sqlstr.Append("SELECT evtconfigurationId, companyid, configname, 
   configimage FROM SCEVT_CONFIGURATIONS ");
sqlstr.Append("WHERE companyid" +  CompanyID); 
```

# operating-system - 多核/多 CPU 机器中的中断如何工作？

> ID：301018
> 
> 赞同：21
> 
> 时间：2008-11-19T04:51:02.433
> 
> 标签：operating-system, kernel, multicore

我最近开始深入研究低级操作系统编程。我（非常缓慢）目前正在阅读两本较旧的书籍，XINU 和 Build Your Own 32 Bit OS，以及一些优秀的 SO 人在我之前的问题中建议的一些资源，[How to get started in operating system development](https://stackoverflow.com/questions/43180/how-to-get-started-in-operating-system-development)。

可能只是我还没有在任何这些资源中遇到过它，但这可能是因为这些资源中的大多数是在无处不在的多核系统之前编写的，但我想知道中断在多核/多处理器系统中是如何工作的。

例如，假设 DMA 想要发出文件读取操作完成的信号。哪个处理器/内核确认已发出中断信号？是启动文件读取的处理器/内核吗？是哪个处理器/内核先到达它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-19T08:28:33.600

查看[IoConnectInterrupt](http://msdn.microsoft.com/en-us/library/ms801597.aspx)函数，您可以找到 ProcessorEnableMask，它将选择允许运行[InterruptService](http://msdn.microsoft.com/en-us/library/ms795727.aspx)例程 (ISR) 的 cpu。
基于此信息，我可以假设在低级别的某个地方（请参阅[Adam 的](https://stackoverflow.com/questions/301018/how-do-interrupts-in-multicoremulticpu-machines-work#301148)帖子）可以指定将中断路由到何处。

在旁注文件操作与中断和/或 dma 没有直接关系。文件操作是文件系统概念，它转换为低级别取决于文件系统所在的总线，它可能是 IDE 或 SATA 磁盘，甚至可能是 USB 存储，在这种情况下，扇区读取将被转换为 USB 总线上的 3 个逻辑操作，那里将由 USB 主机控制器驱动程序提供中断服务，但它与原始文件读取操作并不真正相关，这可能以任何方式拆分为较小的事务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T05:11:47.290

在过去，中断会发送到所有处理器。在现代，操作系统可以对某些硬件进行编程，以将中断发送到一个特定的处理器。当然，如果您可以动态而不是静态地选择处理器，您就不会希望将中断发送到启动 I/O 的任何处理器，而是希望将其发送到当前负担最小的处理器并且可以最有效地启动下一个 I/O 操作，和/或任何一个当前负担最小的处理器，并且可以最有效地执行等待结果的线程。

# c++ - 验证 EXE 上的 Authenticode 签名 - 没有 CAPICOM 的 C++

> ID：301024
> 
> 赞同：15
> 
> 时间：2008-11-19T04:56:13.560
> 
> 标签：c++, winapi, cryptography, authenticode

我正在为安装程序 DLL 编写一个函数，以验证系统上已安装的 EXE 文件的 Authenticode 签名。

该功能需要：

> A) 验证签名是否有效。
> B) 验证签名者是我们的组织。

因为它在安装程序中，并且因为它需要在较旧的 Win2k 安装上运行，所以我**不想**依赖 CAPICOM.dll，因为它可能不在目标系统上。

WinVerifyTrust API 非常适合解决 (A) [。](http://msdn.microsoft.com/en-us/library/aa388208(VS.85).aspx)

我需要找到一种方法来将已知证书（或其中的属性）与签署相关 EXE 的证书进行比较。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-11-21T08:13:30.837

您应该使用[CryptQueryObject](http://msdn.microsoft.com/en-us/library/aa380264(VS.85).aspx)。

这篇知识库文章演示了如何使用：[如何从 Authenticode 签名的可执行文件中获取信息](https://support.microsoft.com/kb/323809)。

对于询问如何在没有 Windows-API 的情况下执行此操作的评论者，我不知道有任何库可以做到这一点，但格式记录在这里：[Windows Authenticode Portable Executable Signature Format](http://www.microsoft.com/whdc/winlogo/drvsign/Authenticode_PE.mspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T13:19:17.290

如果签名有效，其证书链将包含您的证书。[CertGetCertificateChain](http://msdn.microsoft.com/en-us/library/aa376078%28VS.85%29.aspx)将获得该链。

# javascript - 任何带有代码辅助的开源 Javascript 编辑器/javascript eclipse 插件

> ID：301036
> 
> 赞同：1
> 
> 时间：2008-11-19T05:08:02.303
> 
> 标签：javascript, jquery

我刚刚阅读[了 Microsoft 的 jQuery Intellisense 更新，](http://www.west-wind.com/Weblog/posts/536756.aspx)想知道是否有任何编辑器或 eclipse 插件可以提供完整的智能感知或代码辅助。有吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-19T05:14:43.493

**[我相信带有Aptana](http://www.aptana.com/)**插件的 eclipse有一些[JQuery 支持](http://www.aptana.com/blog/lorihc/jquery1.2.6_now_available)。

如前所述[，](http://www.aptana.com/docs/index.php/Getting_started_with_Aptana_and_jQuery)支持智能感知：

> 5\. 开始编码。
> 
> 1.  在您键入时，请注意 Code Assist 现在对您使用的 jQuery 对象和函数处于活动状态。
> 2.  随时按 ctrl+space 以激活 Code Assist。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T05:11:03.080

为什么不是 Visual Studio/Web Developer 2008（或者我错过了什么）？[特快版](http://www.microsoft.com/express/vwd/)是免费的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-20T21:17:01.210

您可以使用[Aptana Studio](http://www.aptana.com/studio/download)的独立版本，它是免费的，并且比完整的 Eclipse 轻得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-05-28T11:06:46.320

Aptana 提供 Javascript 代码辅助，但不提供智能感知。当前仅由三个 ID 提供的 Javascript 的真正智能感知：

*   NetBeans（开源）
*   IntelliJ Idea（专有网络开发）
*   MS Visual Studio（存在专有、免费版）

所以答案 - NetBeans。

但是，不幸的是，这些都不能很好地完成这项工作。

# bash - 如何在 bash 循环列表中转义空格？

> ID：301039
> 
> 赞同：130
> 
> 时间：2008-11-19T05:10:42.813
> 
> 标签：bash, loops, whitespace

我有一个 bash shell 脚本，它遍历某个目录的所有子目录（但不是文件）。问题是某些目录名称包含空格。

这是我的测试目录的内容：

```
$ls -F test
Baltimore/  Cherry Hill/  Edison/  New York City/  Philadelphia/  cities.txt 
```

以及遍历目录的代码：

```
for f in `find test/* -type d`; do
  echo $f
done 
```

这是输出：

```
测试/巴尔的摩
测试/樱桃
爬坡道
测试/爱迪生
测试/新
约克
城市
测试/费城

```

樱桃山和纽约市被视为 2 或 3 个单独的条目。

我尝试引用文件名，如下所示：

```
for f in `find test/* -type d | sed -e 's/^/\"/' | sed -e 's/$/\"/'`; do
  echo $f
done 
```

但无济于事。

必须有一个简单的方法来做到这一点。

* * *

下面的答案很棒。但是为了使这更复杂 - 我并不总是想使用我的测试目录中列出的目录。有时我想将目录名称作为命令行参数传递。

我接受了查尔斯关于设置 IFS 的建议，并提出了以下建议：

```
dirlist="${@}"
(
  [[ -z "$dirlist" ]] && dirlist=`find test -mindepth 1 -type d` && IFS=$'\n'
  for d in $dirlist; do
    echo $d
  done
) 
```

除非命令行参数中有空格（即使引用了这些参数），否则这很好用。例如，像这样调用脚本：`test.sh "Cherry Hill" "New York City"`会产生以下输出：

```
樱桃
爬坡道
新的
约克
城市

```

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2008-11-19T05:19:41.220

首先，不要那样做。最好的方法是`find -exec`正确使用：

```
# this is safe
find test -type d -exec echo '{}' + 
```

另一种安全的方法是使用 NUL 终止列表，但这需要您的 find 支持`-print0`：

```
# this is safe
while IFS= read -r -d '' n; do
  printf '%q\n' "$n"
done < <(find test -mindepth 1 -type d -print0) 
```

您还可以从 find 中填充一个数组，然后再传递该数组：

```
# this is safe
declare -a myarray
while IFS= read -r -d '' n; do
  myarray+=( "$n" )
done < <(find test -mindepth 1 -type d -print0)
printf '%q\n' "${myarray[@]}" # printf is an example; use it however you want 
```

如果您的 find 不支持`-print0`，那么您的结果就是不安全的——如果存在名称中包含换行符的文件（是的，这是合法的），则以下内容将不会按预期运行：

```
# this is unsafe
while IFS= read -r n; do
  printf '%q\n' "$n"
done < <(find test -mindepth 1 -type d) 
```

如果不打算使用上述方法之一，第三种方法（在时间和内存使用方面效率较低，因为它在进行分词之前读取子进程的整个输出）是使用`IFS`不'不包含空格字符。关闭通配符 ( `set -f`) 以防止包含通配符的字符串，例如`[]`,`*`或被`?`扩展：

```
# this is unsafe (but less unsafe than it would be without the following precautions)
(
 IFS=$'\n' # split only on newlines
 set -f    # disable globbing
 for n in $(find test -mindepth 1 -type d); do
   printf '%q\n' "$n"
 done
) 
```

最后，对于命令行参数情况，如果您的 shell 支持数组（即 ksh、bash 或 zsh），您应该使用数组：

```
# this is safe
for d in "$@"; do
  printf '%s\n' "$d"
done 
```

会保持分离。请注意，引用（以及使用`$@`而不是`$*`）很重要。数组也可以通过其他方式填充，例如 glob 表达式：

```
# this is safe
entries=( test/* )
for d in "${entries[@]}"; do
  printf '%s\n' "$d"
done 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-11-19T05:21:19.343

```
find . -type d | while read file; do echo $file; done 
```

但是，如果文件名包含换行符，则不起作用。以上是我知道的唯一解决方案，当您实际上想要在变量中包含目录名称时。如果您只想执行某些命令，请使用 xargs。

```
find . -type d -print0 | xargs -0 echo 'The directory is: ' 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-09-23T09:01:43.937

这是一个处理文件名中的制表符和/或空格的简单解决方案。如果您必须处理文件名中的其他奇怪字符（如换行符），请选择另一个答案。

测试目录

```
ls -F test
Baltimore/  Cherry Hill/  Edison/  New York City/  Philadelphia/  cities.txt 
```

进入目录的代码

```
find test -type d | while read f ; do
  echo "$f"
done 
```

`"$f"`如果用作参数，则文件名必须用引号 ( ) 括起来。如果没有引号，则空格充当参数分隔符，并为调用的命令提供多个参数。

和输出：

```
test/Baltimore
test/Cherry Hill
test/Edison
test/New York City
test/Philadelphia 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-11-19T05:45:43.553

这在标准 Unix 中非常棘手，并且大多数解决方案都会与换行符或其他字符发生冲突。但是，如果您使用的是 GNU 工具集，那么您可以利用该`find`选项`-print0`并使用`xargs`相应的选项`-0`（减零）。有两个字符不能出现在简单的文件名中；这些是斜杠和 NUL '\0'。显然，斜杠出现在路径名中，因此使用 NUL '\0' 标记名称结尾的 GNU 解决方案是巧妙且万无一失的。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-03-09T08:05:00.857

您可以暂时使用 IFS（内部字段分隔符）：

```
OLD_IFS=$IFS     # Stores Default IFS
IFS=$'\n'        # Set it to line break
for f in `find test/* -type d`; do
    echo $f
done

IFS=$OLD_IFS 
```

<!>

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-27T18:50:45.280

不要将列表存储为字符串；将它们存储为数组以避免所有这些分隔符混淆。这是一个示例脚本，它可以对 test 的所有子目录或在其命令行上提供的列表进行操作：

```
#!/bin/bash
if [ $# -eq 0 ]; then
        # if no args supplies, build a list of subdirs of test/
        dirlist=() # start with empty list
        for f in test/*; do # for each item in test/ ...
                if [ -d "$f" ]; then # if it's a subdir...
                        dirlist=("${dirlist[@]}" "$f") # add it to the list
                fi
        done
else
        # if args were supplied, copy the list of args into dirlist
        dirlist=("$@")
fi
# now loop through dirlist, operating on each one
for dir in "${dirlist[@]}"; do
        printf "Directory: %s\n" "$dir"
done 
```

现在让我们在一个带有一两条曲线的测试目录上尝试一下：

```
$ ls -F test
Baltimore/
Cherry Hill/
Edison/
New York City/
Philadelphia/
this is a dirname with quotes, lfs, escapes: "\''?'?\e\n\d/
this is a file, not a directory
$ ./test.sh 
Directory: test/Baltimore
Directory: test/Cherry Hill
Directory: test/Edison
Directory: test/New York City
Directory: test/Philadelphia
Directory: test/this is a dirname with quotes, lfs, escapes: "\''
'
\e\n\d
$ ./test.sh "Cherry Hill" "New York City"
Directory: Cherry Hill
Directory: New York City 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-02-26T11:07:26.427

为什么不直接放

```
IFS='\n' 
```

在 for 命令前面？这会将字段分隔符从 <Space><Tab><Newline> 更改为 <Newline>

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-03-15T16:38:49.033

```
find . -print0|while read -d $'\0' file; do echo "$file"; done 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-06-10T14:26:06.370

我用

```
SAVEIFS=$IFS
IFS=$(echo -en "\n\b")
for f in $( find "$1" -type d ! -path "$1" )
do
  echo $f
done
IFS=$SAVEIFS 
```

这还不够吗？
想法取自[http://www.cyberciti.biz/tips/handling-filenames-with-spaces-in-bash.html](http://www.cyberciti.biz/tips/handling-filenames-with-spaces-in-bash.html)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-11-03T23:48:30.950

ps如果它只是关于输入中的空间，那么一些双引号对我来说很顺利......

```
read artist;

find "/mnt/2tb_USB_hard_disc/p_music/$artist" -type f -name *.mp3 -exec mpg123 '{}' \; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-11-19T05:53:32.853

补充一下[乔纳森](https://stackoverflow.com/questions/301039/how-to-escape-white-space-in-bash-loop-list#301097)所说的：使用以下`-print0`选项`find`结合`xargs`：

```
find test/* -type d -print0 | xargs -0 command 
```

`command`这将使用正确的参数执行命令；带有空格的目录将被正确引用（即它们将作为一个参数传入）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-07-10T18:52:01.463

也必须处理路径名中的空格。我最后做的是使用递归和`for item in /path/*`：

```
function recursedir {
    local item
    for item in "${1%/}"/*
    do
        if [ -d "$item" ]
        then
            recursedir "$item"
        else
            command
        fi
    done
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-11-18T11:54:02.500

```
#!/bin/bash

dirtys=()

for folder in *
do    
 if [ -d "$folder" ]; then    
    dirtys=("${dirtys[@]}" "$folder")    
 fi    
done    

for dir in "${dirtys[@]}"    
do    
   for file in "$dir"/\*.mov   # <== *.mov
   do    
       #dir_e=`echo "$dir" | sed 's/[[:space:]]/\\\ /g'`   -- This line will replace each space into '\ '   
       out=`echo "$file" | sed 's/\(.*\)\/\(.*\)/\2/'`     # These two line code can be written in one line using multiple sed commands.    
       out=`echo "$out" | sed 's/[[:space:]]/_/g'`    
       #echo "ffmpeg -i $out_e -sameq -vcodec msmpeg4v2 -acodec pcm_u8 $dir_e/${out/%mov/avi}"    
       `ffmpeg -i "$file" -sameq -vcodec msmpeg4v2 -acodec pcm_u8 "$dir"/${out/%mov/avi}`    
   done    
done 
```

上面的代码会将 .mov 文件转换为 .avi。.mov 文件位于不同的文件夹中，文件夹名称也有**空格**。我上面的脚本会将 .mov 文件转换为同一文件夹中的 .avi 文件。不知道对大家有没有帮助。

案子：

```
[sony@localhost shell_tutorial]$ ls
Chapter 01 - Introduction  Chapter 02 - Your First Shell Script
[sony@localhost shell_tutorial]$ cd Chapter\ 01\ -\ Introduction/
[sony@localhost Chapter 01 - Introduction]$ ls
0101 - About this Course.mov   0102 - Course Structure.mov
[sony@localhost Chapter 01 - Introduction]$ ./above_script
 ... successfully executed.
[sony@localhost Chapter 01 - Introduction]$ ls
0101_-_About_this_Course.avi  0102_-_Course_Structure.avi
0101 - About this Course.mov  0102 - Course Structure.mov
[sony@localhost Chapter 01 - Introduction]$ CHEERS! 
```

干杯!

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-09-17T21:10:41.297

将文件列表转换为 Bash 数组。这使用了 Matt McClure 从 Bash 函数返回数组的方法：http: [//notes-matthewlmcclure.blogspot.com/2009/12/return-array-from-bash-function-v-2.html](http://notes-matthewlmcclure.blogspot.com/2009/12/return-array-from-bash-function-v-2.html) 结果是一种方法将任何多行输入转换为 Bash 数组。

```
#!/bin/bash

# This is the command where we want to convert the output to an array.
# Output is: fileSize fileNameIncludingPath
multiLineCommand="find . -mindepth 1 -printf '%s %p\\n'"

# This eval converts the multi-line output of multiLineCommand to a
# Bash array. To convert stdin, remove: < <(eval "$multiLineCommand" )
eval "declare -a myArray=`( arr=(); while read -r line; do arr[${#arr[@]}]="$line"; done; declare -p arr | sed -e 's/^declare -a arr=//' ) < <(eval "$multiLineCommand" )`"

for f in "${myArray[@]}"
do
   echo "Element: $f"
done 
```

即使存在错误字符，这种方法似乎也有效，并且是将任何输入转换为 Bash 数组的通用方法。缺点是如果输入很长，您可能会超过 Bash 的命令行大小限制，或者会占用大量内存。

最终在列表上运行的循环也将列表通过管道输入的方法的缺点是读取标准输入并不容易（例如要求用户输入），并且循环是一个新过程，因此您可能想知道为什么变量循环结束后，您在循环内设置的内容不可用。

我也不喜欢设置 IFS，它会弄乱其他代码。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-04-11T12:54:30.230

好吧，我看到太多复杂的答案。我不想传递 find 实用程序的输出或编写循环，因为 find 对此有“exec”选项。

我的问题是我想将所有带有 dbf 扩展名的文件移动到当前文件夹，其中一些包含空格。

我是这样解决的：

```
 find . -name \*.dbf -print0 -exec mv '{}'  . ';' 
```

对我来说看起来很简单

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-05-25T09:12:04.490

[刚刚发现我的问题](https://stackoverflow.com/questions/905891/passing-argument-containing-space-in-shell-script)和你的问题有一些相似之处。显然，如果您想将参数传递给命令

```
test.sh "Cherry Hill" "New York City" 
```

按顺序打印出来

```
for SOME_ARG in "$@"
do
    echo "$SOME_ARG";
done; 
```

注意 $@ 被双引号包围，[这里有一些注释](http://tldp.org/LDP/abs/html/internalvariables.html#ARGLIST)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-08-24T19:46:24.747

我需要相同的概念来顺序压缩某个文件夹中的几个目录或文件。我已经解决了使用 awk 从 ls 解析列表并避免名称中出现空格的问题。

```
source="/xxx/xxx"
dest="/yyy/yyy"

n_max=`ls . | wc -l`

echo "Loop over items..."
i=1
while [ $i -le $n_max ];do
item=`ls . | awk 'NR=='$i'' `
echo "File selected for compression: $item"
tar -cvzf $dest/"$item".tar.gz "$item"
i=$(( i + 1 ))
done
echo "Done!!!" 
```

你怎么看？

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-01-15T09:55:28.027

```
find Downloads -type f | while read file; do printf "%q\n" "$file"; done 
```

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2011-07-13T04:28:12.357

对我来说，这很有效，而且非常“干净”：

```
for f in "$(find ./test -type d)" ; do
  echo "$f"
done 
```

* * *

## 回答 #20

> 赞同：-4
> 
> 时间：2010-04-21T19:19:28.247

只是有一个简单的变体问题...将类型为 .flv 的文件转换为 .mp3（打哈欠）。

```
for file in read `find . *.flv`; do ffmpeg -i ${file} -acodec copy ${file}.mp3;done 
```

递归查找所有 Macintosh 用户 flash 文件并将它们转换为音频（复制，无转码）......就像上面的 while，注意 read 而不是只是 'for file in `' 会转义。`

 `# c# - 在流的新 XmlRecordsetWriter 中实现 XmlTextWriter

> ID：301045
> 
> 赞同：0
> 
> 时间：2008-11-19T05:11:59.083
> 
> 标签：c#, xml, dataset, recordset

有关背景，请参阅我的问题[here](https://stackoverflow.com/questions/291761/converting-a-fairly-simple-c-class-library-into-a-com-object)。

所以现在的问题不是我不能发送`DataSet`到经典的 ASP，而是它不能用它做任何事情。所以我找到了一些代码来创建一个记录集 xml 结构`DataSet`。

我已经从它的原始[来源](http://www.microsoft.com/mspress/books/companion/6235.aspx#Companion%20Content)对其进行了一些调整。问题是我似乎无法提取基本流并使用它，而不必写入文件。我错过了什么？

这是我尝试测试课程的方式：

```
[Test]
    public void TestWriteToStream()
    {            
        MemoryStream theStream = new MemoryStream();
        XmlRecordsetWriter theWriter = new XmlRecordsetWriter(theStream);
        theWriter.WriteRecordset( SomeFunctionThatReturnsADataSet() );
        theStream = (MemoryStream)theWriter.BaseStream;
        string xmlizedString = UTF8ByteArrayToString(theStream.ToArray());
        xmlizedString = xmlizedString.Substring(1);

        //Assert.AreEqual(m_XMLNotNull, xmlizedString);
        Console.WriteLine(xmlizedString);
    } 
```

这是我的课：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.IO;
using System.Text;
using System.Xml;

namespace Core{

public class XmlRecordsetWriter : XmlTextWriter
{
    #region Constructors
    // Constructor(s)
    public XmlRecordsetWriter(string filename) : base(filename, null) { SetupWriter(); }

    public XmlRecordsetWriter(Stream s) : base(s, null) { SetupWriter(); }

    public XmlRecordsetWriter(TextWriter tw) : base(tw) { SetupWriter(); }

    protected void SetupWriter()
    {
        base.Formatting = Formatting.Indented;
        base.Indentation = 3;
    }
    #endregion

    #region Methods

    // WriteRecordset
    public void WriteRecordset(DataSet ds) { WriteRecordset(ds.Tables[0]); }

    public void WriteRecordset(DataSet ds, string tableName) { WriteRecordset(ds.Tables[tableName]); }

    public void WriteRecordset(DataView dv) { WriteRecordset(dv.Table); }

    public void WriteRecordset(DataTable dt)
    {
        WriteStartDocument();
        WriteSchema(dt);
        WriteContent(dt);
        WriteEndDocument();
    }

    // WriteStartDocument
    public void WriteStartDocument()
    {
        base.WriteStartDocument();
        base.WriteComment("Created by XmlRecordsetWriter");

        base.WriteStartElement("xml");
        base.WriteAttributeString("xmlns", "s", null, "uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882");
        base.WriteAttributeString("xmlns", "dt", null, "uuid:C2F41010-65B3-11d1-A29F-00AA00C14882");
        base.WriteAttributeString("xmlns", "rs", null, "urn:schemas-microsoft-com:rowset");
        base.WriteAttributeString("xmlns", "z", null, "#RowsetSchema");
    }

    // WriteSchema
    public void WriteSchema(DataSet ds) { WriteSchema(ds.Tables[0]); }

    public void WriteSchema(DataSet ds, string tableName) { WriteSchema(ds.Tables[tableName]); }

    public void WriteSchema(DataView dv){ WriteSchema(dv.Table); }

    public void WriteSchema(DataTable dt)
    {
        // Open the schema tag (XDR)
        base.WriteStartElement("s", "Schema", null);
        base.WriteAttributeString("id", "RowsetSchema");
        base.WriteStartElement("s", "ElementType", null);
        base.WriteAttributeString("name", "row");
        base.WriteAttributeString("content", "eltOnly");

        // Write the column info 
        int index=0;
        foreach(DataColumn dc in dt.Columns)
        {
            index ++;
            base.WriteStartElement("s", "AttributeType", null);
            base.WriteAttributeString("name", dc.ColumnName);
            base.WriteAttributeString("rs", "number", null, index.ToString());
            base.WriteEndElement();
        }

        // Close the schema tag 
        base.WriteStartElement("s", "extends", null); 
        base.WriteAttributeString("type", "rs:rowbase");
        base.WriteEndElement();
        base.WriteEndElement();
        base.WriteEndElement();
    }

    // WriteContent
    public void WriteContent(DataSet ds) { WriteContent(ds.Tables[0]); }

    public void WriteContent(DataSet ds, string tableName) { WriteContent(ds.Tables[tableName]); }

    public void WriteContent(DataView dv) { WriteContent(dv.Table); }

    public void WriteContent(DataTable dt)
    {
        // Write data
        base.WriteStartElement("rs", "data", null);
        foreach(DataRow row in dt.Rows)
        {
            base.WriteStartElement("z", "row", null);
            foreach(DataColumn dc in dt.Columns)
                base.WriteAttributeString(dc.ColumnName, row[dc.ColumnName].ToString());
            base.WriteEndElement();
        }
        base.WriteEndElement();
    }

    // WriteEndDocument
    public void WriteEndDocument()
    {
        base.WriteEndDocument();
        base.Flush();
        base.Close();
    }
    #endregion
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-04T16:23:13.030

我认为您想使用基于数据的对象和基于 XML 的数据。如果是这样，我建议使用`ADODB`类（它在 COM 参考中：Microsoft ActiveX 数据对象 6.0 库 - 或其他版本，如 2.8-）。

您可以通过以下代码将您`DataTable`的转换为：[将 ADO.NET DataTable 转换为 ADODB.Recordset 的最简单代码](http://www.codeproject.com/Articles/10503/Simplest-code-to-convert-an-ADO-NET-DataTable-to-a)。所以你有一个方法可以在下一个代码中使用。`ADODB.Recordset``ConvertToRecordset()`

现在您只需要`save()`获取 XML 文件的方法：

```
using ADODB;
using System;
using System.Data;
using System.IO;

namespace ConsoleApplicationTests
{
    class Program
    {
        static void Main(string[] args)
        {
            Recordset rs = new Recordset();
            DataTable dt = sampleDataTable();   //-i. -> SomeFunctionThatReturnsADataTable() 

            //-i. Convert DataTable to Recordset 
            rs = ConvertToRecordset(dt);

            //-i. Sample Output File
            String filename = @"C:\yourXMLfile.xml";
            FileStream fstream = new FileStream(filename, FileMode.Create);

            rs.Save(fstream, PersistFormatEnum.adPersistXML);
        }
    }
} 
```

的强大之处`ADODB.Recordset`在于，您可以非常轻松地打开保存的 XML 文件：

```
rs.Open(fstream); 
```

我希望它有效！，实际上我写了这个答案是为了稍后完成它，如果我的方向是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T18:38:50.380

首先，行：

```
theStream = (MemoryStream)theWriter.BaseStream; 
```

是多余的，因为`MemoryStream`应该已经是 writer 的基本流。

听起来你想要的只是：

```
theWriter.Close();
theStream.Position = 0; // So you can start reading from the begining

string xml = null;
using (StringReader read = new StringReader(theStream))
{
   xml = read.ReadToEnd();
} 
```

然后 xml 将成为您的 xml 字符串，您可以将其加载到`XPathDocument`or`XmlDocument`中并随心所欲地使用。

# windows - 重新分配/覆盖热键 (Win + L) 以锁定窗口

> ID：301053
> 
> 赞同：25
> 
> 时间：2008-11-19T05:16:08.153
> 
> 标签：windows, locking, keyboard-shortcuts, monitor, energy

`Win`是否可以将+热键重新分配`L`给另一个可执行文件/快捷方式？

用例 - 我想在笔记本电脑显示器锁定后立即关闭它。我知道可以锁定和关闭显示器的可执行文件，但我不想更改系统锁定的方式（通过显式运行程序或通过其他快捷方式）。如果`Win`+`L`可以分配给这个可执行文件，那将是最好的。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-11T21:43:59.353

您需要设置以下注册表项以完全禁用 Windows 锁定功能：

```
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\System] "DisableLockWorkstation"=dword:00000001 
```

并重新启动计算机。

这适用于 Win7、Win8 和 Win10

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-11-25T14:35:53.950

`Win`+是系统分配的`L`热键，没有禁用它的选项。这意味着应用程序无法检测到它，除非您使用[低级全局键盘挂钩](http://msdn.microsoft.com/en-us/library/ms644959.aspx#wh_keyboard_llhook)( `WH_KEYBOARD_LL`)。这适用于 XP SP3；虽然还没有在 Vista 中测试过：

```
LRESULT CALLBACK LowLevelKeyboardProc(int code, WPARAM wparam, LPARAM lparam) {
    KBDLLHOOKSTRUCT& kllhs = *(KBDLLHOOKSTRUCT*)lparam;
    if (code == HC_ACTION) {
        // Test for an 'L' keypress with either Win key down.
        if (wparam == WM_KEYDOWN && kllhs.vkCode == 'L' && 
            (GetAsyncKeyState(VK_LWIN) < 0 || GetAsyncKeyState(VK_RWIN) < 0))
        {
            // Place some code here to do whatever you want.
            // ...

            // Return non-zero to halt message propagation
            // and prevent the Win+L hotkey from getting activated.
            return 1;
        }
    }
    return CallNextHookEx(0, code, wparam, lparam);
} 
```

请注意，您需要一个*低级*键盘挂钩。*普通*的键盘钩子 ( `WH_KEYBOARD`) 不会捕获热键事件。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-01-16T00:05:13.690

基于注册表的解决方案本身完全禁用锁定系统（即使通过`Start`菜单）。

这是一种实际上提供了一种在没有`Win`-`L`和弦的情况下锁定计算机的方法的方法。锁定既可以通过任务栏上的快捷方式完成，也可以通过依次按下它们来完成`Enter`。

首先，创建一个可以切换系统锁定并触发锁定本身的批处理文件；执行此操作的说明取自[论坛帖子](http://www.autohotkey.com/board/topic/95733-wanna-override-win-l/)：

*   创建用于打开或关闭系统锁定的 reg-edit 文件。这与布伦特福斯特的回答相同。

    *   在`DisableLockWorkstation.reg`：

        ```
         Windows Registry Editor Version 5.00
         [HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\System]
         "DisableLockWorkstation"=dword:00000001 
        ```

    *   在`EnableLockWorkstation.reg`：

        ```
         Windows Registry Editor Version 5.00

          [HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\System]
          "DisableLockWorkstation"=- 
        ```

*   **运行**reg-edit 脚本以**禁用**系统锁定。

*   创建一个批处理文件以使用文件切换功能`.reg`：

    ```
    regedit /S EnableLockWorkstation.reg
    rundll32.exe user32.dll,LockWorkStation
    regedit /S DisableLockWorkstation.reg 
    ```

现在，您可以[创建一个快捷方式并将其固定到任务栏](https://superuser.com/a/193255/199803)：

*   右键单击批处理文件并创建一个快捷方式。
*   右键单击新的快捷方式，编辑快捷方式属性，然后将目标更改为`cmd.exe /C "<path>\lock.bat"`，其中`<path>`是`lock.bat`文件的完整路径。
*   快捷方式现在应该可以固定到任务栏（在手动更改目标之前**不是这样）；**它可以像往常一样拖到那里。
    *   （请注意，在将快捷方式固定到任务栏*之前*，您可能还想将图标更改为挂锁之类的东西。）

如上所述，完成上述过程后，您应该能够按顺序使用`Win`, `L`,锁定计算机（**不是**作为和弦 - 尽管请参阅下面使用 - 作为和弦的解决方案）。这是因为该序列解释如下：`Enter`**`Ctrl``Alt``L`**

 ***   `Win`-- 调出开始菜单，虽然您实际上不需要等待它加载
*   `L`-- 搜索自定义锁定脚本；在我的机器上，**如果**`lock.bat`快捷方式`L`是我的任务栏上唯一以. （在尝试以这种方式锁定您的计算机之前**验证这一点！）****`L`**
*****   `Enter`-- 一旦搜索找到一个项目，它就会被启动 -- 即快捷方式将被调用，您的计算机将被锁定。您**无需**等待搜索加载；您可以按顺序快速按`Win`、`L`、`Enter`并走开。屏幕不会立即锁定，但应该会在几秒钟内锁定。****

 ****下面是我制作的任务栏快捷方式的图片（使用[此图标](http://www.softicons.com/web-icons/i-love-icons-by-svengraph/lock-icon)）：

[![lock.bat 任务栏快捷方式](https://i.stack.imgur.com/w7o71.png)](https://i.stack.imgur.com/w7o71.png)

* * *

### 编辑：使用和弦，例如`Ctrl`- `Alt`-`L`

在下面的评论中，用户 lub094 建议了一种将快捷方式分配给*和弦* `Ctrl`- `Alt`- `L`（或您想要的任何快捷方式）的方法。我没有花时间对此进行测试，因为我已经重新启用了系统快捷方式，但我认为它可以工作。

*   使用内置的快捷方式创建功能来分配和弦：

    [![在此处输入图像描述](https://i.stack.imgur.com/fIQgx.png)](https://i.stack.imgur.com/fIQgx.png)

*   将快捷方式本身放在开始菜单文件夹中：

    ```
    "C:\Users\ [user_name]\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\ [custom_folder]\" 
    ```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-19T05:18:42.890

看起来你不能。

> **您可以通过对注册表进行以下更改来禁用除 Win+L**和 Win+U 之外的所有内置 Windows 热键（这应该适用于所有操作系统，但可能需要重新启动）：
> 
> HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer NoWinKeys REG_DWORD 0x00000001 (1)

（[http://www.autohotkey.com/docs/misc/Override.htm](http://www.autohotkey.com/docs/misc/Override.htm)）

但是您可以尝试使用 Tweak UI。在资源管理器树视图项下，取消选中“启用 Windows+X”热键。[Hoekey](http://www.bcheck.net/apps/hoe.htm)也可能有效，没有尝试过。[来源](http://www.virtualplastic.net/msgboard/thread.php?forum=0&thread=865)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-11T02:23:04.193

@FrancoisB 方法适用于 Win8 和 Win7。自动化解决方案：

1.  创建带有 .reg 后缀的文本文件（例如，DisableWinL.reg）

2.  粘贴以下内容并保存文件：

    ```
    [HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\System]
    "DisableLockWorkstation"=dword:00000001 
    ```

3.  使用 RegEdit 打开该文件（双击应该可以）以执行更改。

    可以将此文件复制到新机器以重复该过程。并且可以创建另一个名为“EnableWinL.reg”的名称来重新启用`Win`+`L`键：

    ```
    [HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Policies\System]
    "DisableLockWorkstation"=dword:00000000 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-18T13:42:55.737

使用适用于 Windows 10 的电动玩具。您可以选择重新映射快捷方式.. [下载电动玩具](https://insider.windows.com/en-us/articles/powertoys-v012-now-available/)

# c++ - 如何确定 Win32 线程是否已终止？

> ID：301054
> 
> 赞同：15
> 
> 时间：2008-11-19T05:17:03.567
> 
> 标签：c++, c, multithreading, winapi

如何确定 Win32 线程是否已终止？

**[GetExitCodeThread](http://msdn.microsoft.com/en-us/library/ms683190(VS.85).aspx)**的文档警告不要因为这个原因使用它，因为其他原因可能会返回错误代码 STILL_ACTIVE。

谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-11-19T05:45:48.220

MSDN 提到“当一个线程终止时，线程对象达到一个信号状态，满足任何在该对象上等待的线程”。

因此，您可以通过检查线程句柄的状态来检查线程是否已终止 - 是否已发出信号：

```
DWORD result = WaitForSingleObject( hThread, 0);

if (result == WAIT_OBJECT_0) {
    // the thread handle is signaled - the thread has terminated
}
else {
    // the thread handle is not signaled - the thread is still alive
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-19T05:22:17.190

您链接到的文档警告不要将`STILL_ACTIVE`其用作返回代码，因为它无法与用于指示活动线程的返回值区分开来。*所以不要把它作为返回值，你就不会有这个问题。*

# vb6 - Visual Basic 6 IDE 语法检查器问题

> ID：301057
> 
> 赞同：2
> 
> 时间：2008-11-19T05:18:40.863
> 
> 标签：vb6, ide

Visual Basic 6.0 IDE 即时检查语法错误。每次发现语法错误时，都会弹出一个警告对话框。这个功能让我发疯，因为每次我在输入语句的过程中尝试剪切和粘贴时，我都必须处理这个弹出窗口。

有什么方法可以禁用这种即时语法检查？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-19T05:20:31.063

转到工具-> 选项并关闭“自动语法”检查。

当你在那里打开“需要变量声明”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-19T05:20:42.247

是的。在“工具”->“选项”菜单中，有一个名为“自动语法检查”的复选框。禁用此选项：

[替代文字 http://img513.imageshack.us/img513/9809/vbsyntaxcheckdh9.png](http://img513.imageshack.us/img513/9809/vbsyntaxcheckdh9.png)

# sql - 如何查找最近对某个表执行的 sql 更新操作 (SQL Server 2005)

> ID：301060
> 
> 赞同：0
> 
> 时间：2008-11-19T05:19:47.087
> 
> 标签：sql, sql-server-2005

假设我想在 XX 表中找到最新添加的行（任何用户的 UPDATE，不一定是执行 UPDATE 的行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T05:40:24.267

您需要使用事务日志阅读器工具。有几个免费的以及商业产品。

*   [ApexSQL 日志](http://www.apexsql.com/sql_tools_log.asp)

您也可以尝试[这个](http://www.mssqlcity.com/Articles/KnowHow/ViewLog.htm)未记录的命令：

```
 DBCC LOG(<database name>[,{0|1|2|3|4}]). 
```

如果您使用的是 SQL Server 2000，RedGate 有一个名为[SQL Log Rescue](http://www.red-gate.com/products/SQL_Log_Rescue/index.htm)的免费工具。

编辑：DBC LOG 文档： [(1)](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.39996_1250/html/svrtsg/svrtsg102.htm) [(2)](http://www.mssqlcity.com/Articles/Undoc/SQL2000UndocDBCC.htm#part_2_8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T14:24:06.503

[SQL Server Profiler](http://msdn.microsoft.com/en-us/library/ms187929.aspx)将允许您实时跟踪对数据库的命中。您可以在许多属性上设置过滤器以获取所需的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T05:38:13.117

请参阅 SQL Docs 并查找 OUTPUT 子句（您可以使用 UPDATE/INSERT 来获取受影响的记录）。

[http://msdn.microsoft.com/en-us/library/ms177564.aspx](http://msdn.microsoft.com/en-us/library/ms177564.aspx)

# c# - PrintPreviewDialog 中使用 MeasureString 测量的字符串高度与实际打印时不同

> ID：301066
> 
> 赞同：3
> 
> 时间：2008-11-19T05:21:50.793
> 
> 标签：c#, .net, printing, gdi+

我正在尝试测量某些文本的高度以用于表格打印目的。

这是代码。就我而言，它在预览和实际页面上打印不同的数字。我现在无法尝试使用 Microsoft Office Document Image Writer 以外的任何打印机，但我很确定这不是打印机问题。

也许有人找到了解决这个问题的方法？

```
 private void button1_Click(object sender, EventArgs e)
    {
        Print();
    }

    public void Print()
    {
        PrintDocument my_doc = new PrintDocument();
        my_doc.PrintPage += new PrintPageEventHandler(this.PrintPage);

        PrintPreviewDialog my_preview = new PrintPreviewDialog();
        my_preview.Document = my_doc;

        my_preview.ShowDialog();

        my_doc.Dispose();
        my_preview.Dispose();
    }

    private void PrintPage(object sender, 
       System.Drawing.Printing.PrintPageEventArgs e)
    {
        e.Graphics.PageUnit = GraphicsUnit.Pixel;

        string s = "String height is ";

        SizeF h = e.Graphics.MeasureString(s, new Font("Arial", 24));

        e.Graphics.DrawString(s + Convert.ToString(h.Height), 
           new Font("Arial", 24), new SolidBrush(Color.Black), 1, 1);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-09T21:23:24.433

我想问题在于 System.Drawing.Graphics 基于 GDI+，而实际打印基于 GDI。

您可以替换对 MeasureString 的调用以使用基于 GDI 的方法：

```
SizeF hT = TextRenderer.MeasureText(s, new Font("Arial", 24)); 
```

> System.Windows.Forms.TextRenderer 类的开发目的是为 Windows 窗体控件中的复杂脚本提供与我们期望 Windows 操作系统相同级别的支持。此 TextRenderer 基于 GDI 文本渲染 API，它使用 Windows Unicode 脚本处理器 (Uniscribe)。[[来自 MSDN]](http://msdn.microsoft.com/en-us/magazine/cc751527.aspx)

有关更多详细信息，请参阅 MSDN 杂志上关于文本渲染的这篇好文章：

> [文本渲染：使用 Windows 窗体控件中的复杂脚本构建全球通用的应用程序](http://msdn.microsoft.com/en-us/magazine/cc751527.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T06:22:51.513

我已经尝试了所有可用的 PageUnit，但没有任何区别。预览高度与打印高度的比率约为 1.029336，并且是恒定的。

PS。其实我已经找到了解决方法。我使用 MeasureString 来计算行数，然后将其乘以从 Font 类派生的字符高度，以计算文本块的高度。它可以很好地进行一些调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T06:00:34.757

在 PrintPage 事件中尝试使用 Graphics.Pixel 以外的 PageUnit。英寸、毫米或点（以及其他）应该在预览或打印输出中为您提供相同的结果。像素我不希望，因为预览屏幕和打印机有不同的像素分辨率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-03T01:25:35.563

我想我可以解决你的问题......我知道如何解决它，更多的是不太了解它的原因。

问题是字符之间的间距。例如，如果您在她的印刷品上使用“VA”一词（或者当您使用“Graphics.FromImage”时），字母“A”就在字母“V”之后开始......在“PrintPreview”中，字母“A”从字母'V'内部开始......如果将'PrintPreview'中的各个字母相加，您将获得相同的打印结果！

# python - 在 Python 字符串文字中引用反斜杠

> ID：301068
> 
> 赞同：73
> 
> 时间：2008-11-19T05:22:47.640
> 
> 标签：python, string

我有一个包含双引号和反斜杠的字符串，我想将其设置为 Python 中的变量。但是，每当我尝试设置它时，引号或斜杠都会被删除或转义。这是一个例子：

```
>>> foo = 'baz "\"'
>>> foo
'baz ""' 
```

因此，`baz "\"`我得到的不是我想要的`baz ""`。如果我然后尝试逃避反斜杠，它也无济于事：

```
>>> foo = 'baz "\\"'
>>> foo
'baz "\\"' 
```

现在与我输入的内容相匹配，但不是我最初想要的。你如何解决这个问题？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2008-11-19T05:26:43.983

你被输出误导了——你采取的第二种方法实际上是你想要的，你只是不相信它。:)

```
>>> foo = 'baz "\\"'
>>> foo
'baz "\\"'
>>> print(foo)
baz "\" 
```

顺便说一句，还有另一种可能更清晰的字符串形式：

```
>>> print(r'baz "\"')
baz "\" 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2008-11-19T05:29:45.927

使用原始字符串：

```
>>> foo = r'baz "\"'
>>> foo
'baz "\\"' 
```

请注意，虽然看起来不对，但实际上是对的。字符串中只有一个反斜杠`foo`。

发生这种情况是因为当您`foo`在提示符下键入时，python 会`__repr__()`在字符串上显示结果。这会导致以下结果（注意只有一个反斜杠并且`print`ed 字符串周围没有引号）：

```
>>> foo = r'baz "\"'
>>> foo
'baz "\\"'
>>> print(foo)
baz "\" 
```

让我们继续，因为还有更多的反斜杠技巧。如果你想在字符串末尾有一个反斜杠并使用上面的方法，你会遇到一个问题：

```
>>> foo = r'baz \'
  File "<stdin>", line 1
    foo = r'baz \'
                 ^  
SyntaxError: EOL while scanning single-quoted string 
```

当您这样做时，原始字符串无法正常工作。您必须使用常规字符串并转义反斜杠：

```
>>> foo = 'baz \\'
>>> print(foo)
baz \ 
```

但是，如果您使用的是 Windows 文件名，那么您会遇到一些麻烦。你想要做的是使用正斜杠和`os.path.normpath()`函数：

```
myfile = os.path.normpath('c:/folder/subfolder/file.txt')
open(myfile) 
```

这将节省大量的逃跑和头发撕裂。 [不久前浏览此页面时，此页面](http://pythonconquerstheuniverse.blogspot.com/2008/06/python-gotcha-raw-strings-and.html)很方便。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-19T08:17:59.067

哈雷所说的，除了最后一点——实际上没有必要在调用 open 之前将 '/' 更改为 '\'。Windows 很乐意接受带有正斜杠的路径。

```
infile = open('c:/folder/subfolder/file.txt') 
```

您唯一可能需要字符串 normpathed 的情况是您通过 shell（使用`os.system`或`subprocess`模块）传递给另一个程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-15T17:06:59.953

如果您在这里寻找文件路径，只需使用`"\\"`

```
import os
path = r"c:\file"+"\\"+"path"
os.path.normpath(path) 
```

这将输出`c:\file\path`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-10-03T19:40:54.070

用反斜杠结束字符串的另一种方法是用反斜杠后跟空格来结束字符串，然后`.strip()`在字符串上调用函数。

我试图连接两个字符串变量并用反斜杠分隔它们，所以我使用了以下内容：

```
newString = string1 + "\ ".strip() + string2 
```

# .net - 选项卡控件选择

> ID：301074
> 
> 赞同：0
> 
> 时间：2008-11-19T05:25:37.200
> 
> 标签：.net, winforms, tabcontrol

如何实现一些需要通过某些事件或某些按钮单击来关闭的选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-26T14:09:53.440

您可以像这样从 TabControl 中删除选项卡：

```
tabControl1.TabPages.Remove(tabControl1.SelectedTab); 
```

关闭多个选项卡时，您可能希望首先删除索引号较高的选项卡，因为弹出选项卡时选项卡页的索引会发生变化：

```
private void button1_Click(object sender, EventArgs e)
{
    // Close second and fourth tab
    if (tabControl1.TabPages.Count > 3)
    {
        // Work backwards when removing tabs
        tabControl1.TabPages.RemoveAt(3);
        tabControl1.TabPages.RemoveAt(1);
    }
} 
```

如果您在关闭它们后再次需要这些选项卡，那么`Hide()`将无济于事。您应该在内存中存储每个选项卡的引用，并在以后添加或插入它们：

```
tabControl1.TabPages.Remove(tabPage1);
tabControl1.TabPages.Add(tabPage1);
tabControl1.TabPages.Insert(0, tabPage1); 
```

使用下面的示例，您可以保留您关闭的选项卡的集合，并稍后将它们推送到 TabControl。最好您将创建一个允许您保存位置和对选项卡的引用的小类。此示例使用泛型 List 和 Control.Tag 执行相同的操作。

```
private List<TabPage> tabsClosed = new List<TabPage>();

private void button1_Click(object sender, EventArgs e)
{
    // Close second and fourth tab
    if (tabControl1.TabCount > 3)
    {
        // Keep a reference to tabs in memory before closing them
        tabsClosed.Add(tabControl1.TabPages[1]);
        tabsClosed.Add(tabControl1.TabPages[3]);

        // Store the tabs position somewhere
        tabControl1.TabPages[1].Tag = 1;
        tabControl1.TabPages[3].Tag = 3;

        // Work backwards when removing tabs
        tabControl1.TabPages.RemoveAt(3);
        tabControl1.TabPages.RemoveAt(1);
    }
}

private void button2_Click(object sender, EventArgs e)
{
    foreach (TabPage tab in tabsClosed)
    {
        //tabControl1.Controls.Add(tab);
        tabControl1.TabPages.Insert((int)tab.Tag, tab);
    }
    tabsClosed.Clear();
} 
```

# .net - .NET Windows 服务运行外部应用程序

> ID：301078
> 
> 赞同：0
> 
> 时间：2008-11-19T05:32:59.603
> 
> 标签：.net

我正在编写一个 Windows 服务，该服务将用于监视其他一些服务并在服务出现故障时运行外部应用程序。

我已经完成了大部分工作，windows 服务运行，监控其他服务的代码很有效，但是当出现故障时，我在运行外部应用程序时遇到了问题。

外部应用程序只是一个控制台应用程序，其中包含一堆命令行开关，但我不能 100% 确定开关是否设置正确或者我想要什么**a)**想看看正在执行的命令是什么和**b)**查看它的任何输出消息。

我有这个代码：

```
Process p = new Process();
p.StartInfo.FileName = "C:\MyExternalApp.exe";
p.StartInfo.Arguments = "stop";
p.Start();
p.WaitForExit(); 
```

所以一切都通过了，我没有抛出任何异常，但我不知道外部应用程序是否不起作用，也看不到它的任何消息。

如何查看应用程序的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T05:37:50.920

[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process(VS.71).aspx)类有一个[StandardOutput](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput(VS.71).aspx)属性——它是一个表示进程输出的流。

来自 MSDN 文档：

```
Process myProcess = new Process();
ProcessStartInfo myProcessStartInfo = new ProcessStartInfo("Process_StandardOutput_Sample.exe" );
myProcessStartInfo.UseShellExecute = false;
myProcessStartInfo.RedirectStandardOutput = true;
myProcess.StartInfo = myProcessStartInfo;
myProcess.Start();

StreamReader myStreamReader = myProcess.StandardOutput;
// Read the standard output of the spawned process.
string myString = myStreamReader.ReadLine();
Console.WriteLine(myString);
myProcess.Close(); 
```

# refactoring - “重构”有什么正式的定义吗？

> ID：301085
> 
> 赞同：8
> 
> 时间：2008-11-19T05:38:41.260
> 
> 标签：refactoring, theory, program-transformation

任何人都知道以更正式的方式定义重构的方法吗？

更新。

> 重构是一对 R = (pre; T)，其中 pre 是程序必须满足的前提条件，T 是程序转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T05:56:43.610

这是一个有趣的问题，我没有考虑过。我做了一点谷歌搜索，并提出了这篇关于 AOP 重构的[论文](http://wwwiti.cs.uni-magdeburg.de/iti_db/forschung/ramses/publications/ADI2006.pdf)(PDF)，它试图将一些数学模型应用于方面，以表明功能方面与传统方面具有相同的灵活性，但复杂性降低了。我没有阅读整篇论文，但你可能会在那里找到一些东西。

另一个有趣的想法是按照与编译器优化相同的思路来考虑重构。本质上，编译器会即时重构您的代码，尽管其目标与代码级重构不同。您必须以某种合理的方式量化代码复杂性和可读性，以展示特定重构如何影响它。提出模型可能是困难的部分。

我还发现这篇[论文](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.58.2327)建立了面向对象编程的代数并推导出了一些基本规律，然后使用这些基本规则推导出更复杂的重构。

有趣的东西。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T06:20:18.697

重构是一系列保持正确性的转换，*但*重构可能会导致比原始代码更通用的代码

所以我们不能只断言程序 P 上的重构变换 T 在重构前后具有相同的属性 R，但重构后的程序 P' 的属性 R' 至少应该等价于 R

```
given program P implies R
refactoring transformation T(P) produces P'
where (P' implies R') and (R' is equivalent to or subsumes R') 
```

我们还可以断言输入和输出保持相同或等效

但是按照您的示例，也许我们想将重构转换 T 定义为 4 元组 P,I,O,R 其中 P 是原始程序，I 是输入和/或前提条件，O 是输出和/或后置条件，R 是转换后的程序，然后断言（使用时间逻辑？）

```
P:I -> O 
```

转换前成立

```
T(P) -> R 
```

定义转换，并且

```
R:I -> O 
```

转化后成立

我的符号数学生锈了，但这是一个大方向

这将是一篇很好的硕士论文，顺便说一句

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T07:23:05.230

有趣的是，大多数重构都是成对出现的：

*   添加参数 - 删除参数
*   提取类/方法 - 内联类/方法
*   上拉场/方法 - 下拉场/方法
*   将双向关联更改为单向 - 将单向关联更改为双向
*   ...

应用该对的两个重构是一个空转换。

对于重构对 R, R' ：

> R'(R(代码)) = 代码

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2008-11-19T05:49:25.513

好吧，不是直接，而是在金钱方面-我可以说是。我想不出一个方程式:)

编写良好的代码，没有复杂性（可能是由于重构）可以节省时间/精力，从而节省金钱。

# asp.net - ASP.NET 和 Windows 工作流 (WF) - 我们是否需要将其保持在应用程序状态？

> ID：301090
> 
> 赞同：1
> 
> 时间：2008-11-19T05:42:38.820
> 
> 标签：asp.net, workflow-foundation

我一直在尝试在我的 ASP.NET 应用程序中使用 WF（实际上，它是 ASP.NET MVC ......但它是 MVC 而不是 WebForms 的事实根本不重要）。

现在，我可以运行 WF 并且它工作正常，等等，但它以异步方式启动，因此 WF 的任何结果（好*或*坏）都会丢失页面生命周期。

我发现一篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/aa349445.aspx "请点击我！")说在 ASP.NET 应用程序中，我们需要

*   放入`WorkflowRuntime`Application状态
*   该`WorkflowRuntime`实例已`ManualWorkflowSchedulerService`添加到它（无论是什么）。
*   需要时使用此应用程序状态工作流实例。

这与我学习的方式不同：

*   使 WorkflowRuntime 成为静态对象，该对象在需要时首先创建。
*   在您要运行的新工作流上使用此静态 WorkflowRuntime 实例。

那么......哪种方式更好？我们需要将其粘贴到应用程序中吗？两者有什么区别？

我知道这里实际上有两个问题......

*   应用程序状态与静态对象（使用锁/空或[双空检查](http://en.wikipedia.org/wiki/Double_checked_locking_pattern "点我！！")）
*   *DefaultWorkFlowSchedulerService*与*ManualWorkFlowSchedulerService*

干杯！

编辑：

*   [第一个问题在这里](https://stackoverflow.com/questions/303725/aspnet-application-state-vs-a-static-object "去！ 点击 点击 点击")回答。
*   下面回答第二个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-19T21:01:51.943

我不确定您的第一个问题（尽管我*怀疑*它们是等效的）。但是，我确信第二个问题：你一定要选择`ManualWorkflowSchedulerService`. 主要原因如下：

*   这是在工作流实例空闲之前阻止宿主应用程序执行的唯一方法。请注意，您必须明确使用该`RunWorkflow`方法。
*   `ManualWorkflowSchedulerService`重用发出 ASP.NET Web 请求的线程来运行工作流实例。这可确保在任何时候，工作流运行时中的活动线程数都等于 ASP.NET 进程中的活动 Web 请求数。

查看[此示例](http://www.codeproject.com/KB/WF/WorldWideDating.aspx?display=Print)了解更多信息。

# search - 如何获取 URL 的描述

> ID：301091
> 
> 赞同：3
> 
> 时间：2008-11-19T05:42:39.350
> 
> 标签：search, url, metadata

我有一个 URL 列表，正在尝试收集它们的“描述”。通过描述，我的意思是出现了什么，例如，如果你用谷歌搜索了链接。例如，http://stackoverflow.com">Google: http://stackoverflow.com 显示描述为

> 面向程序员的独立于语言的协作编辑问答网站。用户投票和标签显示的问题和答案。

这是我试图为我拥有的 URL 积累的数据。

我尝试解析 URL 的元描述，但是它们中的大多数都缺少元描述（但谷歌和其他搜索引擎设法以某种方式获得描述）。

有任何想法吗？我应该只是“谷歌”每个链接并抓取数据吗？我有一种感觉，谷歌不会喜欢这样的......

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T05:51:28.223

如果/当它们缺少描述元标记时，不同的搜索引擎有不同的算法来从页面中获取描述。有些人会忽略标签，即使它在那里。

如果你想要谷歌的描述，最准确的方法是抓取它。否则，您可以编写自己的代码或在网上四处寻找代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T13:09:50.413

这些被称为片段。

谷歌使用专有的（可能是[专利](http://www.patentstorm.us/patents/6424362/description.html)的）方法来获取这些信息，所以没有简单的答案。

正如您所建议的，他们将使用元描述信息（如果存在）。（[如何设置元信息以帮助谷歌](http://www.google.com/support/webmasters/bin/answer.py?hl=en&answer=35264)。）

他们还将尊重页面作者*不*包含片段的请求。（[如何防止谷歌显示片段](http://www.google.com/support/webmasters/bin/answer.py?answer=35304)）你也应该尊重这一点（当然还有 robots.txt。）

您可能对现有的自动摘要包（例如[OTS](http://debaday.debian.net/2007/06/06/ots-command-line-text-auto-summary/) ）有一些运气。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T06:22:32.560

我不熟悉[Google APIs](http://code.google.com/more/ "网站目录 - 谷歌代码")，但也许有一种官方方法可以获取此类信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T06:29:32.187

有趣的。有些来源比其他来源更好。

对于“audiotuts.com” ， [google](http://www.google.com/search?hl=en&q=audiotuts.com&btnG=Google+Search&aq=f&oq=)的描述比[AboutUs.com](http://www.aboutus.org/AudioTuts.com)更糟糕。

谷歌

> 11 月 18 日一般 by Joel Falconer · 1\. 最近，一位 AUDIOTUTS 读者问我创作过程。虽然这是一个不能变成...的话题

AboutUs.com：

> AUDIOTUTS 是音乐家、制作人和音频爱好者的博客/教程网站！它是流行的 PSDTUTS、VECTORTUTS 和 NETTUTS 的姐妹网站。

我讨厌这样的问题……它们应该是微不足道的，但事实并非如此！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T07:05:06.280

如果你能假设英文内容，你可以先找Meta Description，如果不行，你可以找前两三个类似句子的词序列。

我工作的一个产品查找第一个 P 或 DIV，其中包含多个由句点分隔的 > n 个“单词”序列。它将使用两个或三个类似句子的序列，最多 x 个单词，作为摘要段落。它不是 100% 准确，但对于一般情况来说已经足够了。字数调整了几次，以消除导航元素之类的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-19T05:57:07.573

您可能需要查看 AboutUs.org（即[http://www.aboutus.org/StackOverflow.com](http://www.aboutus.org/StackOverflow.com)）。但是，该网站几乎不可能有关于我们的页面而没有元描述。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-19T05:58:55.650

一些可能解释谷歌如何做到这一点的信息：

*   [网站管理员/网站所有者帮助](http://www.google.com/support/webmasters/bin/topic.py?topic=8522)
*   [将 URL 添加到 google](http://www.google.com/addurl/?continue=/addurl)

# asp.net-mvc - 为 MVC beta 编写自己的验证框架是否有任何意义，或者您是否希望很快发布一个验证框架？

> ID：301095
> 
> 赞同：1
> 
> 时间：2008-11-19T05:44:37.800
> 
> 标签：asp.net-mvc, validation

关于 MVC 验证有很多问题，但到目前为止，答案几乎没有定论。

特别是对于我的需要，我想要一些能够从相同的描述生成客户端验证和服务器验证的东西，并且应该允许那些只使用 ORM（例如 LINQ TO SQL）的人使用基于模型的属性和基于代码的声明。

我已经看到一些验证包已经被掀起来做这件事，但它们往往会引入很多依赖关系或者相当不完整（例如，不支持复选框或不支持“更高级别”的验证）。

我们是开始编写自己的验证框架，还是等待团队在他们拥有验证结构和 jQuery 的情况下真正发布一些东西？

对于那些在现场实际使用 MVC 的人来说，您现在使用什么进行验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T18:25:22.103

您是否知道在预览版 5 中添加了验证语义？[Scott Gu 的](http://weblogs.asp.net/scottgu/archive/2008/09/02/asp-net-mvc-preview-5-and-form-posting-scenarios.aspx)这篇文章描述了如何使用它，[这篇](http://weblogs.asp.net/scottgu/archive/2008/10/16/asp-net-mvc-beta-released.aspx#eight)文章详细介绍了测试版中的变化。

我没有亲自使用过它，它可能无法满足您的所有要求，但我毫不怀疑它可以扩展为您想要的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-17T05:00:19.227

从发布的 MVC 1.0 开始，最好的方法是使用[xVal](http://xval.codeplex.com/)。
您可能还需要查看[这篇](http://goneale.com/2009/03/04/using-metadatatype-attribute-with-aspnet-mvc-xval-validation-framework/)关于使用 xVal 实现 Linq2SQL 的帖子，以防尚未解决/不起作用。

# windows - 在 Windows cmd 脚本中添加到 %TIME% 变量

> ID：301108
> 
> 赞同：10
> 
> 时间：2008-11-19T05:52:16.803
> 
> 标签：windows, scripting, cmd

我意识到这可能在任何数量的其他脚本语言中都可以更容易地完成，但开始在 cmd 中快速完成，现在我很好奇。

希望在另一个进程开始的时间偏移处启动一个进程。让我们说 5 分钟以保持简单。有没有办法添加到 %TIME% 变量？

例如：

```
start /b foo.exe
at %TIME% + 5 minutes bar.exe 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-19T06:13:46.213

我刚刚输入`set/?`并发现 cmd 比旧蝙蝠好得多... :-)

```
set h=%TIME:~0,2%
set m=%TIME:~3,2%
set/a m2="m+5"
set t2=%h%:%m2%
set t2 
```

显然，你可以得到 62 分钟，等等，我让你做额外的数学...... :-D

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-21T15:56:44.207

这是额外的数学：

```
:: Get an offset of 1 minute from the current time, accounting for edge cases
set hr=%TIME:~0,2%
set /a mn=%TIME:~3,2%+1
:: check minutes; greater than 60? add n/60 to hour, n%60 to mins
if %mn% geq 60 set /a hr=hr+mn/60 && set /a mn=mn%%60
if %hr% geq 24 set /a h=0
:: pad zeros if necessary
if %mn% leq 9 set mn=0%mn%
if %hr% leq 9 set hr=0%hr% 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-10T13:30:45.287

2 菲洛

**谢谢**

我的洗澡密码：

```
set h=%TIME:~0,2%
set m=%TIME:~3,2%
set s=%TIME:~6,2%
set time=%h%_%m%_%s%
mkdir c:\test\%time%
move c:\test\*.* c:\test\%time%
"C:\Program Files\WinRAR\RAR" a -ep c:\test\%time%\ -agDD-MM-YY_hh-mm-ss c:\test\%time%\*.* -zc:\arhiv\HEADERS.TXT
move c:\test\%time%\*.rar c:\arhiv\
rmdir c:\test\%time% /S /Q 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-05-18T06:03:56.443

```
 @echo off
        :: START USAGE  ==================================================================
        ::SET THE NICETIME 
        :: SET NICETIME=BOO
        :: CALL GetNiceTime.cmd 

        :: ECHO NICETIME IS %NICETIME%

        :: echo nice time is %NICETIME%
        :: END USAGE  ==================================================================

        echo set hhmmsss
        :: this is Regional settings dependant so tweak this according your current settings
        for /f "tokens=1-3 delims=:" %%a in ('echo %time%') do set hhmmsss=%%a%%b%%c 
        ::DEBUG ECHO hhmmsss IS %hhmmsss%
        ::DEBUG PAUSE
        echo %yyyymmdd%
            :: this is Regional settings dependant so tweak this according your current settings
        for /f "tokens=1-3 delims=." %%D in ('echo %DATE%') do set  yyyymmdd=%%F%%E%%D
        ::DEBUG ECHO yyyymmdd IS %yyyymmdd%
        ::DEBUG PAUSE

        set NICETIME=%yyyymmdd%_%hhmmsss%
        ::DEBUG echo THE NICETIME IS %NICETIME%

        ::DEBUG PAUSE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-02T04:55:21.723

复制.cmd：

```
set hr=%TIME:~0,2%
if %hr% leq 9 set hr=0%hr:~1,1%
set mydate=%DATE:~6,4%%DATE:~3,2%%DATE:~0,2%-%hr%%TIME:~3,2%%TIME:~6,2%
copy file.txt file-%mydate%.txt
pause 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-13T19:02:12.397

稍微扩展了“洗澡代码”：

```
echo ----- time -----
echo %time%
set _hh=%time:~0,2%
set _mm=%time:~3,2%
set _ss=%time:~6,2%
set __time=%_hh%%_mm%%_ss%
echo _%__time%_
echo ----- time -----
echo:
echo ----- date -----
echo %date%
set _Y=%date:~0,4%
set _M=%date:~5,2%
set _D=%date:~8,2%
set __date=%_Y%%_M%%_D%
echo _%__date%_
echo ----- date -----
pause 
```

%__time% 的输出*205146*

%__date% 的输出*20180613*

# c# - 如何为tabcontrol实现“关闭所有选项卡”

> ID：301109
> 
> 赞同：2
> 
> 时间：2008-11-19T05:52:25.680
> 
> 标签：c#, windows

如何使用上下文菜单条为选项卡控件实现“关闭所有其他选项卡”功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T07:42:03.820

我制作了一个小应用程序，在主窗口中只有一个 tabcontrol 和一个连接到该 tabcontrol 的上下文菜单。

以下是上下文菜单项的处理程序：

```
 private void closeAllOtherToolStripMenuItem_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < this.tabControl1.TabCount; i++)
            if (i != tabControl1.SelectedIndex)
                tabControl1.TabPages.RemoveAt(i--);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-11T05:08:38.750

试试这个简单的代码来“关闭所有标签”。

```
tabControl.TabPages.Clear() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-07T11:42:12.083

以下代码关闭所有选项卡，并在关闭之前确保选项卡的内容得到保存。

```
 private void closeAllToolStripMenuItem_Click(object sender, EventArgs e)
    {
        TabControl.TabPageCollection pages = tabControl1.TabPages;
        foreach (TabPage page in pages)
        {
            saveToolStripMenuItem_Click(sender, e);
            closeTabToolStripMenuItem_Click(sender, e);
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T13:26:01.280

在“关闭所有”选项卡之前，您应该处置（并删除事件处理程序）您在每个选项卡页中实例化的任何控件/对象。此外，您可以使用 TabPages 集合的 .Clear 方法，而不是在循环中删除每个标签页。

# java - 从 java 连接到 DotNet Web 服务的最佳方式是什么？

> ID：301113
> 
> 赞同：2
> 
> 时间：2008-11-19T05:54:10.887
> 
> 标签：java, .net, web-services, wsdl

我们有一个使用 Java 的客户想要连接的 dotnet Web 服务。他们使用的最佳技术是什么？Axis或Metro，还是别的什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T05:56:58.417

WSDL 是以正确的方式遵循协议的标准语言，技术不应该介意。

仅当此实施需要满足客户的上市时间时。在这种情况下，请使用可以更快实施的那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T06:03:41.723

我已经成功使用 Apache Axis2 连接到 .Net 服务

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T07:01:50.080

从理论上讲，您可以使用任何符合标准的框架来做到这一点。实际上，某些工具生成的代码（使用默认设置）可能不适合您。例如，您可能需要修改命名空间或添加 SOAP 标头。例如，您可以使用 Axis2 和 CXF 执行此操作，但需要一些额外的配置。

我会推荐 CXF 而不是 Axis2，因为我认为它更容易配置。它还需要更少兆字节的 jar 文件来重新分发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-19T07:14:03.143

我没有使用 Metro，但使用 Axis 很容易连接到 .Net 服务

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-19T08:37:25.783

sun 和 MS 一直在使用 MS 框架和 SUN 的 Metro 进行昂贵的互操作测试。Axis 和 Axis2 从一开始就与 MS 框架进行了良好的互操作，但是如果您想要完全测试互操作，那就选择 Metro。

BR，
~A

# ruby-on-rails - Ruby on Rails - 使用集合在部分循环中出现问题

> ID：301115
> 
> 赞同：2
> 
> 时间：2008-11-19T05:55:11.617
> 
> 标签：ruby-on-rails, collections, partials

我在使用 :collection 命令处理我在 rails 中创建的表单中的部分时遇到问题。理想情况下，我想使用 :collection 命令，这样我就可以在我的 .rjs 模板中轻松操作这一部分（当复选框更改时，表单将提交并重新加载表单，这是一个待办事项列表）。

此代码有效：

```
<% form_for "list[]", :url => {:action => "checkbox_update"} do |f| %>
      <ul id="lists_not_completed">
           <% for @list in @lists %>
               <%= render :partial => @list,  :locals => {:f =>f, :complete => FALSE } %>   
          <% end %>
      </ul>
<% end %> 
```

与部分：

```
<% if @list.completed == complete %>
        <li><%= f.check_box :completed %>
                <%=h @list.name %>

        <%= link_to 'Show', list %>
        <%= link_to 'Edit', edit_list_path(list) %>
    <%= link_to 'Destroy', list, :confirm => 'Are you sure?', :method => :delete %></li>
<% end %> 
```

此代码不起作用，但我希望它使用这种形式：

```
<% form_for "list[]", :url => {:action => "checkbox_update"} do |f| %>
  <ul id="lists_not_completed">
      <%= render :partial => 'list', :collection => @lists, :locals => {:f =>f, :complete => FALSE } %> 
  </ul>
<% end %> 
```

与非工作部分：

```
<% if list.completed == complete %>
        <li><%= f.check_box :completed %>
                <%=h list.name %>

        <%= link_to 'Show', list %>
        <%= link_to 'Edit', edit_list_path(list) %>
    <%= link_to 'Destroy', list, :confirm => 'Are you sure?', :method => :delete %></li>
<% end %> 
```

我得到错误：

object[] 命名但 object param 和 @object var 不存在或不响应 to_param: nil。它指的是这一行：`<li><%= f.check_box :completed %>`。我不确定为什么这不起作用并且尝试了很多很多不同的变体，但我无法让它工作。表格是否阻止我这样做？form_for 代码直接来自 Rails Way 手册，用于在表单中列出来自一个模型的多个对象。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T19:37:25.200

我认为问题在于，当您使用渲染：partial 和：collection 时，您没有在任何地方定义@list。

当您调用 f.check_box 时，系统正在寻找 @list 以匹配 list[]

你可以在你的部分设置@list = list 来解决这个问题。我想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T22:39:13.743

蒂姆的回答是正确的，但我可能会完全避免在 form_for 循环中提取部分内容。我想这是一个风格问题，但我认为这里的混乱并不值得在这种情况下部分表示的清理。我可能会写一个包含整个表单的部分。

# c++ - 如何通过 C++ 创建数据库连接

> ID：301129
> 
> 赞同：1
> 
> 时间：2008-11-19T06:03:05.063
> 
> 标签：c++

在 C++ 中，如何建立 SQL 连接以将数据存储在 SQL 数据库中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T06:11:39.867

如果您的目标是 Windows，那么您可能想要使用 ODBC。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T06:13:18.320

您应该看一下传统上存在于数据库中的 C 预处理器（用于 postgres 的[ecpg ，用于 oracle 的](http://www.postgresql.org/docs/8.3/interactive/ecpg.html)[Pro*C](http://www.cs.umbc.edu/help/oracle8/server.815/a68022/toc.htm) ......它允许您将直接 SQL 直接嵌入到源文件中）或用于 mysql的[原始系统。](http://dev.mysql.com/doc/refman/6.0/en/apis-cplusplus.html)ECPG 将使用 C++，对于其他一些预处理器来说，情况并非如此......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T07:35:42.227

您可以尝试使用 SQLite 作为数据库的 wxSqlite。这为您提供了一个开源连接头/c++ 文件以供您开始使用。

一般来说 - 您应该获得某种为您提供所需功能的库。所有主要的数据库供应商都应该至少提供一个 C 库。大多数时候你会得到一个 C++ 库或 C 的包装器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T07:38:20.160

使用 SQLAPI++ - 它是跨平台的，支持 MS SQL Server、Oracle、Postgres 等。非常容易使用。

[http://www.sqlapi.com/](http://www.sqlapi.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T10:24:04.803

如果您以 Windows 为目标，您始终可以使用导入功能。

```
#import "c:\Program Files\Common Files\System\ADO\msado15.dll" no_namespace rename( "EOF", "EndOfFile" ) 
```

然后你可以制作一个包装器来处理 SQL。

小例子，只是为了打开关闭一个连接

```
// H
class CExtAdoDatabase
{

public:
    CExtAdoDatabase( const char* p_cConnectString="", const char* p_cUsername="", const char* p_cPwd="" );
    virtual ~CExtAdoDatabase();

    bool Open( const char* p_cConnectString="", const char* p_cUsername="", const char* p_cPwd="" );
    bool Close();

private:
    HRESULT _hInitRes;
    bool _bIsValid;

    _ConnectionPtr *_p_pConnection;
};

// CPP
CExtAdoDatabase::CExtAdoDatabase( const char* p_cConnectString, const char* p_cUsername, const char* p_cPwd ) : _hInitRes( CoInitialize( NULL ))
{
    _p_pConnection = new _ConnectionPtr( "ADODB.Connection" );

    if( FAILED( _hInitRes ))
            _bIsValid = false;
    else
    {
        _bIsValid = true;
        (*_p_pConnection)->ConnectionTimeout=0;
        (*_p_pConnection)->CommandTimeout=0;

        if( p_cConnectString != NULL && strlen(p_cConnectString) )
        {
            _bstr_t scs( p_cConnectString );
            _bstr_t susr( p_cUsername );
            _bstr_t spwd( p_cPwd );
            (*_p_pConnection)->Open( scs, susr, spwd, NULL );
        }
    }
}
CExtAdoDatabase::~CExtAdoDatabase()
{
    Close();
    delete _p_pConnection;
    CoUninitialize();
}

bool CExtAdoDatabase::Open( const char* p_cConnectString, const char* p_cUsername, const char* p_cPwd )
{
    if(_bIsValid)
    {
        _bstr_t scs( p_cConnectString );
        _bstr_t susr( p_cUsername );
        _bstr_t spwd( p_cPwd );
        return ((*_p_pConnection)->Open( scs, susr, spwd, NULL ) == S_OK);
    }
    else
        return false;
}

bool CExtAdoDatabase::Close()
{
    if( _bIsValid )
    {
        if( (*_p_pConnection)->GetState() == adStateOpen )
            return !!(*_p_pConnection)->Close();
        else
            return true;
    }
    else
        return false;
} 
```

# c - “C”中的 Microsoft Word 文本解析器

> ID：301132
> 
> 赞同：0
> 
> 时间：2008-11-19T06:06:47.193
> 
> 标签：c, parsing, ms-word

我想知道从 Microsoft Word（.doc 和 .docx）文档中解析和获取文本内容的过程。使用的编程语言应该是普通的“C”（应该是 gcc）。

是否有任何图书馆已经完成这项工作，

扩展名：我也可以使用相同的程序来解析 Microsoft power point 文件中的文本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T06:10:47.233

我不知道存在的库，但格式规范可从[Microsoft](http://www.microsoft.com/interop/docs/OfficeBinaryFormats.mspx)免费获得，并且承诺不会因使用它们而起诉您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T06:24:03.743

Microsoft Word 文档是一个巨大的野兽——您*绝对*不想自己编写此代码。考虑使用现有的免费 Word 库，例如[antiword](http://www.winfield.demon.nl/)或[wvWare](http://wvware.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T06:26:36.437

在 Windows 上，让 word 完成这项工作并与 COM 对象交互，在 linux 上，这项工作是在[antiword](http://www.winfield.demon.nl/)中完成的。[或者，您可以使用UNO](http://wiki.services.openoffice.org/wiki/Documentation/DevGuide/ProUNO/Professional_UNO)对象模型在任何平台上自动化[OpenOffice.org 。](http://www.openoffice.org/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-19T13:33:34.367

如果您愿意在 C 语言中使用 COM 接口，您可以使用自 Windows 2000 以来每个版本的 Windows 中内置的[IFilter](http://msdn.microsoft.com/en-us/library/windows/desktop/bb266451%28v=vs.85%29.aspx)接口。您可以使用它从任何办公文档（Word、Excel、等）、PDF 文件或任何安装了 IFilter 支持的文件类型。

几年前我写了[一篇关于它的博客文章。](http://tlzprgmr.wordpress.com/2008/02/02/using-the-ifilter-interface-to-extract-text-from-documents/)都是 C++，但你可以使用 C 中的 COM 对象。

# python - 如何以字符串形式导入模块？

> ID：301134
> 
> 赞同：620
> 
> 时间：2008-11-19T06:09:57.407
> 
> 标签：python, python-import

我正在编写一个将命令作为参数的 Python 应用程序，例如：

```
$ python myapp.py command1 
```

我希望应用程序是可扩展的，也就是说，能够添加实现新命令的新模块，而无需更改主应用程序源。这棵树看起来像：

```
myapp/
    __init__.py
    commands/
        __init__.py
        command1.py
        command2.py
    foo.py
    bar.py 
```

所以我希望应用程序在运行时找到可用的命令模块并执行适当的命令模块。

Python 定义了一个**__import__**函数，它接受一个字符串作为模块名称：

> __import__(name, globals=None, locals=None, fromlist=(), level=0)
> 
> 该函数导入模块名称，可能使用给定的全局变量和局部变量来确定如何在包上下文中解释名称。fromlist 给出了应该从 name 给定的模块导入的对象或子模块的名称。
> 
> 来源：[https : **//docs.python.org/3/library/functions.html#import**](https://docs.python.org/3/library/functions.html#__import__)

所以目前我有类似的东西：

```
command = sys.argv[1]
try:
    command_module = __import__("myapp.commands.%s" % command, fromlist=["myapp.commands"])
except ImportError:
    # Display error message

command_module.run() 
```

这工作得很好，我只是想知道是否可能有一种更惯用的方式来完成我们用这段代码所做的事情。

请注意，我特别不想使用鸡蛋或扩展点。这不是一个开源项目，我不希望有“插件”。重点是简化主应用程序代码，并且无需在每次添加新命令模块时对其进行修改。

* * *

## 回答 #1

> 赞同：370
> 
> 时间：2008-11-19T06:17:18.687

对于早于 2.7/3.1 的 Python，这几乎就是您的操作方式。

对于较新的版本，请参阅`importlib.import_module`Python [2](https://docs.python.org/2/library/importlib.html#importlib.import_module)和[Python 3](https://docs.python.org/3/library/importlib.html#importlib.import_module)。

`exec`如果您愿意，也可以使用。

或者使用`__import__`您可以通过执行以下操作导入模块列表：

```
>>> moduleNames = ['sys', 'os', 're', 'unittest'] 
>>> moduleNames
['sys', 'os', 're', 'unittest']
>>> modules = map(__import__, moduleNames) 
```

直接从[Dive Into Python](http://web.archive.org/web/20120315061111/http://www.diveintopython.net/functional_programming/dynamic_import.html)撕下来。

* * *

## 回答 #2

> 赞同：355
> 
> 时间：2012-12-22T07:33:46.093

Python 2.7 和 3.1 及更高版本的推荐方法是使用[`importlib`](http://docs.python.org/3/library/importlib.html#importlib.import_module)模块：

> importlib.import_module（名称，包=无）
> 
> 导入一个模块。name 参数以绝对或相对术语（例如 pkg.mod 或 ..mod）指定要导入的模块。如果名称以相对术语指定，则 package 参数必须设置为作为解析包名称的锚点的包名称（例如 import_module('..mod', 'pkg.subpkg')将导入 pkg.mod）。

例如

```
my_module = importlib.import_module('os.path') 
```

* * *

## 回答 #3

> 赞同：136
> 
> 时间：2008-11-19T08:21:25.567

> 注意：**imp**自 Python 3.4 起已弃用，取而代之的是**importlib**

如前所述，[imp](http://docs.python.org/library/imp.html)模块为您提供加载功能：

```
imp.load_source(name, path)
imp.load_compiled(name, path) 
```

我以前用过这些来执行类似的操作。

就我而言，我定义了一个特定的类，其中包含所需的已定义方法。一旦我加载了模块，我会检查该类是否在模块中，然后创建该类的一个实例，如下所示：

```
import imp
import os

def load_from_file(filepath):
    class_inst = None
    expected_class = 'MyClass'

    mod_name,file_ext = os.path.splitext(os.path.split(filepath)[-1])

    if file_ext.lower() == '.py':
        py_mod = imp.load_source(mod_name, filepath)

    elif file_ext.lower() == '.pyc':
        py_mod = imp.load_compiled(mod_name, filepath)

    if hasattr(py_mod, expected_class):
        class_inst = getattr(py_mod, expected_class)()

    return class_inst 
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2019-03-02T07:55:06.970

现在你应该使用[importlib](https://docs.python.org/3/library/importlib.html)。

## 导入源文件

[文档](https://docs.python.org/3/library/importlib.html#importing-a-source-file-directly)实际上为此提供了一个配方，它就像：

```
import sys
import importlib.util

file_path = 'pluginX.py'
module_name = 'pluginX'

spec = importlib.util.spec_from_file_location(module_name, file_path)
module = importlib.util.module_from_spec(spec)
spec.loader.exec_module(module)

# check if it's all there..
def bla(mod):
    print(dir(mod))
bla(module) 
```

这样你就可以`hello`从你的模块`pluginX.py`——在这个被调用的片段中`module`——在它的命名空间下访问成员（例如，一个函数“”）；例如，`module.hello()`。

如果您想导入成员（例如，“ `hello`”），您可以将`module`/包含`pluginX`在内存中的模块列表中：

```
sys.modules[module_name] = module

from pluginX import hello
hello() 
```

## 导入一个包

在当前目录下导入包（*例如*， ）实际上很简单：`pluginX/__init__.py`

```
import importlib

pkg = importlib.import_module('pluginX')

# check if it's all there..
def bla(mod):
    print(dir(mod))
bla(pkg) 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2008-11-19T06:28:28.960

使用[imp 模块](http://docs.python.org/library/imp.html#imp.load_module)，或更直接的[`__import__()`](http://docs.python.org/library/functions.html#__import__)功能。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2011-11-06T17:08:08.677

如果你想在当地人那里得到它：

```
>>> mod = 'sys'
>>> locals()['my_module'] = __import__(mod)
>>> my_module.version
'2.6.6 (r266:84297, Aug 24 2010, 18:46:32) [MSC v.1500 32 bit (Intel)]' 
```

同样适用`globals()`

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2008-11-19T06:12:54.747

您可以使用[`exec`](https://docs.python.org/3/library/functions.html#exec)：

```
exec("import myapp.commands.%s" % command) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-06-30T20:46:19.490

与@monkut 的解决方案类似，但可重用且容错，此处描述[http://stamat.wordpress.com/dynamic-module-import-in-python/](http://stamat.wordpress.com/dynamic-module-import-in-python/)：

```
import os
import imp

def importFromURI(uri, absl):
    mod = None
    if not absl:
        uri = os.path.normpath(os.path.join(os.path.dirname(__file__), uri))
    path, fname = os.path.split(uri)
    mname, ext = os.path.splitext(fname)

    if os.path.exists(os.path.join(path,mname)+'.pyc'):
        try:
            return imp.load_compiled(mname, uri)
        except:
            pass
    if os.path.exists(os.path.join(path,mname)+'.py'):
        try:
            return imp.load_source(mname, uri)
        except:
            pass

    return mod 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-19T19:32:13.017

下面的作品对我有用：

```
>>>import imp; 
>>>fp, pathname, description = imp.find_module("/home/test_module"); 
>>>test_module = imp.load_module("test_module", fp, pathname, description);
>>>print test_module.print_hello(); 
```

如果要在 shell 脚本中导入：

```
python -c '<above entire code in one line>' 
```

* * *

## 回答 #10

> 赞同：-8
> 
> 时间：2010-08-20T08:24:14.593

以下对我有用：

```
import sys, glob
sys.path.append('/home/marc/python/importtest/modus')
fl = glob.glob('modus/*.py')
modulist = []
adapters=[]
for i in range(len(fl)):
    fl[i] = fl[i].split('/')[1]
    fl[i] = fl[i][0:(len(fl[i])-3)]
    modulist.append(getattr(__import__(fl[i]),fl[i]))
    adapters.append(modulist[i]()) 
```

它从文件夹“模式”加载模块。这些模块有一个与模块名称同名的类。例如文件 modus/modu1.py 包含：

```
class modu1():
    def __init__(self):
        self.x=1
        print self.x 
```

结果是动态加载的类“适配器”列表。

# database - 如何通过 Perl CGI 脚本使用数据库服务器？

> ID：301143
> 
> 赞同：0
> 
> 时间：2008-11-19T06:16:09.860
> 
> 标签：database, perl, cgi

我的程序已经可以工作了，我有 Perl（GUI 窗口），我可以在其中输入数据，将数据传递到网页（使用 Tomcat 服务器，JSP），然后将其**保存**到 oracle 数据库。我想要的是使用 Perl CGI 从 Oracle 数据库中**检索/提取数据的搜索参数（webapp）。**可能吗？或者有什么建议可以解决我的程序？谢谢！：-）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-19T12:32:47.757

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T06:43:53.547

技术混合的任何具体原因？为什么不使用 servlet/JSP？

如果您必须使用 Perl，那么您需要选择运行您的 Perl 脚本的网络服务器。

通常，这将是使用[mod_perl](http://perl.apache.org/)的 Apache 。

但是，如果您只打算将它用于一些管理脚本，那么您可以按照[此处](http://www.wellho.net/forum/Perl-Programming/Running-Perl-CGI-scripts-under-Apache-Tomcat.html)所述从 tomcat 运行 Perl 。

一旦你设法让一个简单的 perl 脚本运行，那么我会考虑使用[DBI/DBD::Oracle](http://dbi.perl.org/)来访问你的数据库？

希望这可以帮助...

# c++ - 我可以从哪里下载 Turbo C++ 安装程序

> ID：301144
> 
> 赞同：2
> 
> 时间：2008-11-19T06:16:51.900
> 
> 标签：c++, installation

从那里我可以下载 Turbo C++ 设置，我们在学术中使用的带有蓝色屏幕的设置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-19T06:21:38.600

从[博物馆](http://dn.codegear.com/article/21751)（合法）

# html - 水平对齐表格的CSS方法

> ID：301147
> 
> 赞同：101
> 
> 时间：2008-11-19T06:17:47.297
> 
> 标签：html, css, alignment, css-tables

我想在浏览器窗口的中心显示一个固定宽度的表格。现在我用

```
<table width="200" align="center"> 
```

但是 Visual Studio 2008 在这一行给出警告：

*属性“对齐”被认为是过时的。建议使用较新的构造。*

我应该对表格应用什么 CSS 样式以获得相同的布局？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2008-11-19T06:28:04.717

[理论上](http://theodorakis.net/tablecentertest.html)，史蒂文是对的：

> 使用 CSS 使表格居中的“正确”方式。如果左右边距相等，符合标准的浏览器应该将表格居中。完成此操作的最简单方法是将左右边距设置为“自动”。因此，可以在样式表中写：

```
table
{ 
    margin-left: auto;
    margin-right: auto;
} 
```

但是这个答案开头提到的文章为您提供了使表格居中的所有其他方式。

> 一个优雅的 css 跨浏览器解决方案：这适用于 MSIE 6（Quirks and Standards）、Mozilla、Opera 甚至 Netscape 4.x，而无需设置任何明确的宽度：

```
div.centered 
{
    text-align: center;
}

div.centered table 
{
    margin: 0 auto; 
    text-align: left;
}

<div class="centered">
    <table>
    …
    </table>
</div> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-11-19T06:27:05.203

试试这个：

```
<table width="200" style="margin-left:auto;margin-right:auto"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T21:05:22.763

简单的。IE6 及更高版本会很乐意将您的表格与“margin: 0 auto;”居中 如果只有页面以“标准”模式呈现。要做到这一点，您需要一个有效的 doctype 声明，例如

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

或者

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

诚然，IE5.5 及更低版本仍会拒绝将表格居中，但也许您可以忍受这一点，尤其是在表格左对齐的情况下页面仍然有效的情况下。我认为现在 IE5.5 及以下版本的用户已经习惯了一些看起来很奇怪的网站 - 但您仍然需要确保这些视觉故障不会导致您的网站无法使用。

快乐编码！

编辑：对不起，我也许应该指出，您不必有一个“严格”的文档类型就可以让 IE6 进入“标准”渲染模式。从我上面发布的 doctype 示例中，我意识到这似乎是这样的。例如，这个 doctype 声明当然同样有效：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-22T19:57:47.200

尽管在当今世界它可能是异端——在过去，您会执行以下非 css 代码。这适用于今天的浏览器，包括今天的浏览器，但是 - 正如我所说 - 它在当今世界是异端邪说：

```
<center>
<table>
   ...
</table>
</center> 
```

您需要的是某种方式来告诉您想要使表格居中并且该人正在使用旧版浏览器。然后在表格周围插入“<center>”命令。否则 - 使用 css。

令人惊讶的是——如果你想把所有东西都放在身体区域的中心——你可以使用标准

```
text-align: center; 
```

css 命令，在 IE8 中（至少）它会将页面上的所有内容居中，包括表格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T06:22:08.833

```
style="text-align:center;" 
```

（我想）

或者你可以忽略它，它仍然有效

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-19T06:30:21.467

这应该有效：

```
<div style="text-align:center;">
  <table style="margin: 0 auto;">
    <!-- table markup here. -->
  </table>
</div> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-10-02T02:36:49.350

我只是在学习这个，最终对我有用的是首先制作一个三行表。将左右行的边距设置为 50%。然后在中心“表格行”的“表格数据”内放置一个单行、固定宽度的表格。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-19T09:50:24.067

```
<style>
    .abc {
        text-align: center;
    }
</style>

<table class="abc">
    <tr>
        <td>Item1</td>
        <td>Item2</td>
    </tr>
</table> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-25T08:44:41.103

添加到 div 样式：

```
width: fit-content; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-25T09:14:48.553

基本上，它的工作原理是，

```
<table align="center">
... 
```

但是，您可以使用 CSS 以更好的方式做到这一点，这将是使用 CSS 的更好方法，因为它为网页提供动态行为并且是响应式的。

```
 <table style="text-align:center;"> 
```

此外，如果您只需要在页面上显示表格，那么您可以只使用 body 标签对齐，如下所示，

```
 <body style="text-align:center;">
<table>
  ...
</table> 
```

如果您需要任何其他建议，请告诉我。一定会在这方面为您提供帮助。同样使用引导功能，这将更加简单和互动。

# php - php url 参数

> ID：301149
> 
> 赞同：0
> 
> 时间：2008-11-19T06:18:30.960
> 
> 标签：php, mysql

我正在我的网站上工作，我正在尝试获取 url 参数“page”，它是一个整数，它告诉 MySQL 数据库中要读取的条目，该数据库保存所有页面的 HTML。这是我的代码，出于安全原因删除了 MySQL 用户名和密码：

```
 if ($_GET["page"]) {
  $con = mysql_connect("localhost","username","password");
  if (!$con)
  {
    die('Could not connect: ' . mysql_error());
  }
  mysql_select_db("jmurano_pages", $con);
  $title=mysql_query("SELECT title FROM pageContent WHERE pageID=" . $_GET['page']);
  echo "<title>" . $title . "</title>\n";
  echo "</head>\n";
  echo "<body>\n";
  $content = mysql_query("SELECT content FROM pageContent WHERE pageID=" . $_GET['page']);
  echo $content;
  echo "\n</body>\n</html>";
} 
```

这将标题设置为“资源 ID #2”，将内容设置为“资源 ID #3”。我想不出我可能做错了什么。

* * *

我仍然很困惑。我是一个完整的 PHP 新手。我究竟需要做什么才能访问内容和标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T06:45:36.163

除了注入漏洞（见约翰的回答），你应该从 mysql_query 使用

```
 $res = mysql_query("SELECT title FROM pageContent WHERE pageID=" . $escapedpage);
 $title = mysql_fetch_assoc($res);
 $title = $title['title']
 $res2 = mysql_query("SELECT content FROM pageContent WHERE pageID=" . $escapedpage);
 $content = mysql_fetch_assoc($res2);
 $content = $content['content']; 
```

但是，我认为如果您遵循在线 mysql php 教程将是明智的。

**编辑**
更好的是只使用 1 mysql_query 像这样：

```
$res = mysql_query("SELECT title, content FROM pageContent WHERE pageID=" . $escapedpage);
$row = mysql_fetch_assoc($res);
$title = $row['title'];
$content = $row['content']; 
```

这将节省您的脚本时间和资源，因为只需要一个 mysql 查询。
这个教程比较好：[http ://www.freewebmasterhelp.com/tutorials/phpmysql](http://www.freewebmasterhelp.com/tutorials/phpmysql)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T07:37:03.020

你显然有很多东西要学*（我们都必须从某个地方开始！）*，所以关于 SO 的单一答案将无法教会你一切，但这里有一个开端：

当您`mysql_query`在 SELECT 查询上运行时，它将返回以下两种情况之一：

*   如果您的查询中有错误，它将返回**false**。
    *   有关此错误的详细信息，请致电`mysql_error()`
*   如果查询没问题，它将返回一个**资源**
    *   使用此资源，您可以调用其他 mysql 函数来查找有关您刚刚使用 SELECT 创建的数据集的信息。
    *   `mysql_fetch_assoc()`将从您的查询中返回一行的关联数组。
        *   这样做可以看到：`$row = mysql_fetch_assoc($resource); print_r($row);`
    *   再次调用它以检索下一行。
    *   当没有更多行时，`mysql_fetch_assoc()`将返回 false。
        *   因此，您可以编写如下循环：
            `while ($row = mysql_fetch_assoc($resource)) { // do stuff }`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T09:18:16.560

您应该在一个查询中检索这两个字段，因为这可能会更快。还假设 pageID 始终是整数，您应该首先将其转换为整数以防止 SQL 注入。我会使用类似的东西：

```
<?php
if (isset($_GET["page"])) {
    $con = mysql_connect("localhost","username","password");
    if (!$con) {
        die('Could not connect: ' . mysql_error());
    }
    mysql_select_db("jmurano_pages", $con);

    $pageId = (int) $_GET['page'];

    $result = mysql_query('SELECT title, content FROM pageContent WHERE pageID= ' . $pageId);

    if (!$result) {
        die(mysql_error());
    }

    $row = mysql_fetch_assoc($result);

    if (!$row) {
        die('page not found');
    }

    echo "<title>" . $row['title'] . "</title>\n";
    echo "</head>\n";
    echo "<body>\n";
    echo $row['content'];
    echo "\n</body>\n</html>";

} else{ 
    //what are you going to do if page is not passed?
}
?> 
```

注意

*   您可能希望将数据库连接代码放在一个单独的位置，这样您就不必将它复制到多个页面上
*   您可能应该阅读有关 SQL 注入的信息，以及一些如何保持 HTML 和 PHP（表示和逻辑）分离的方法，否则您可能会得到非常混乱的代码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-19T06:50:38.103

这是一些伪代码。

```
$result = mysql_query($sql);

//for each row in the result, do stuff with it...
while ($row = mysql_fetch_array($result)){
  $title = $row["title"];
  $content = $row["content"];

  //this will show you the row data visually
  //var_dump($row);
} 
```

作为 PHP 新手，学习调试（必要时使用 var_dump）、阅读文档和阅读教程。

另外，网上有大量的 php + mysql 教程... google "php and mysql"

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T06:27:38.447

您应该阅读手册[http://de.php.net/mysql_query](http://de.php.net/mysql_query)

> **返回值**
> 
> 对于返回结果集的`SELECT`、`SHOW`、和其他语句， `DESCRIBE`成功时返回资源，错误时返回 FALSE。`EXPLAIN``mysql_query()`
> 
> 对于其他类型的 SQL 语句，, , `INSERT`,`UPDATE`等， 成功时返回 TRUE，错误时返回 FALSE。`DELETE``DROP``mysql_query()`
> 
> 返回的结果资源应该传递给`mysql_fetch_array()`和其他处理结果表的函数，以访问返回的数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-19T06:32:22.587

此外，您有一个 SQL 注入漏洞......永远不要将 $_GET、$_POST 或其他用户提供的变量直接放入查询中。

你应该做：

```
$page = $_GET["page"];
$escaped_page = mysql_real_escape_string($page); 
```

并将 $escaped_pa​​ge 放入您的查询中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-19T06:52:22.873

还有一件事..您可以在一个查询中同时选择标题和内容：

选择标题，内容来自 ....

# asp.net - 用于在 ASP.net 中编辑 Web.config 的 UI 设计器

> ID：301158
> 
> 赞同：2
> 
> 时间：2008-11-19T06:26:08.433
> 
> 标签：asp.net

我需要丰富的 UI 设计器来编辑 ASP.net 应用程序的 web.config。从设计器我们可以编辑配置文件中的标签

它可能是要编辑我的配置文件的任何 Windows 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T22:06:19.550

ASphere 是一个不错的 Windows GUI 应用程序，用于编辑 web.config：

*   [ASPhere](http://asphere.aspweb.cz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T11:46:59.940

Visual Studio 本身就非常适合这一点，因为它会自动选择您的解决方案或 Schemas 文件夹中的架构（.xsd 文件）。

```
C:\Program Files\Microsoft Visual Studio 9.0\Xml\Schemas 
```

确保此文件夹包含所需的 xsd 文件：

*   DotNetConfig20.xsd
*   DotNetConfig30.xsd
*   ...

默认情况下应该选择这些。

如果您删除配置文件中的默认命名空间声明可能会有所帮助。如果你有这个：

```
<configuration xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0"> 
```

把它改成这样：

```
<configuration> 
```

这帮助我启用了智能感知。感谢 Scott Gu 顺便说一句：

[http://weblogs.asp.net/scottgu/archive/2005/12/02/432077.aspx](http://weblogs.asp.net/scottgu/archive/2005/12/02/432077.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T11:12:30.977

你到底想完成什么？Web.config 只是一个 XML 文件，并且有很多好的 XML 编辑器可用。但是，使用 Visual Studio 2008 可以为您提供完整的 IntelliSense 支持。IIS Web 服务器管理器还有一个内置的图形编辑器，但您需要访问 Web 服务器。

# c# - C# 中各种线程同步选项有什么区别？

> ID：301160
> 
> 赞同：174
> 
> 时间：2008-11-19T06:26:56.997
> 
> 标签：c#, multithreading, synchronization, locking, mutex

有人可以解释以下之间的区别：

*   锁定（某个对象）{}
*   使用互斥锁
*   使用信号量
*   使用监视器
*   使用其他 .Net 同步类

我就是想不通。在我看来，前两个是一样的？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2008-11-19T06:33:03.710

好问题。我可能错了..让我试试..我的原始答案的修订版#2..有了更多的理解。谢谢你让我阅读:)

**锁（对象）**

*   是用于（对象内？）线程同步的 CLR 构造。确保只有一个线程可以获取对象锁的所有权并进入锁定的代码块。其他线程必须等到当前所有者通过退出代码块来放弃锁定。此外，建议您锁定类的私有成员对象。

**监视器**

*   *lock(obj) 在内部使用 Monitor 实现。*你应该更喜欢 lock(obj) 因为它可以防止你像忘记清理过程一样搞砸。如果你愿意的话，它'白痴''Monitor 构造。
    使用 Monitor 通常比互斥锁更受欢迎，因为 Monitor 是专门为 .NET Framework 设计的，因此可以更好地利用资源。

使用锁或监视器对于防止同时执行对线程敏感的代码块很有用，但**这些构造不允许一个线程将事件传递给另一个线程。这需要同步事件**，它们是具有两种状态之一的对象，有信号和无信号，可用于激活和挂起线程。互斥量、信号量是操作系统级别的概念。例如，使用命名互斥锁，您可以跨多个（托管）exe 进行同步（确保您的应用程序只有一个实例在机器上运行。）

**互斥体：**

*   然而，与监视器不同的是，**互斥锁可用于跨进程同步线程。**当用于进程间同步时，互斥锁被称为**命名互斥锁**，因为它要在另一个应用程序中使用，因此不能通过全局或静态变量共享。必须给它一个名称，以便两个应用程序都可以访问同一个互斥对象。相反，**Mutex 类是 Win32 构造的包装器。虽然它比监视器更强大，但互斥体需要的互操作转换比 Monitor 类所需的计算成本更高。**

**[信号量](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)**（伤害我的大脑）。

*   使用 Semaphore 类来控制对资源池的访问。线程通过调用WaitOne方法进入信号量，该方法继承自WaitHandle类，并通过调用Release方法释放信号量。每次线程进入信号量时，信号量上的计数都会减少，而当线程释放信号量时，计数会增加。当计数为零时，后续请求会阻塞，直到其他线程释放信号量。当所有线程都释放信号量时，计数为创建信号量时指定的最大值。 **一个线程可以多次进入信号量。信号量类不会在 WaitOne 或 Release 上强制执行线程标识。程序员有责任不搞砸。** 信号量有两种类型：本地信号量和命名信号量**系统信号量。如果使用接受名称的构造函数创建 Semaphore 对象，则它与该名称的操作系统信号量相关联。**命名系统信号量在整个操作系统中都是可见的，可用于同步进程的活动。 **本地信号量仅存在于您的进程中。它可以被进程中任何引用本地信号量对象的线程使用。每个 Semaphore 对象都是一个单独的本地信号量。**

[要阅读的页面 - 线程同步（C#）](http://msdn.microsoft.com/en-us/library/ms173179(VS.80).aspx)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2008-11-19T06:58:09.057

重新“使用其他 .Net 同步类”-您应该了解的其他一些：

*   [ReaderWriterLock](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlock.aspx) - 允许多个读取器或单个写入器（不是同时）
*   [ReaderWriterLockSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx) - 和上面一样，开销更低
*   [ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx) - 打开时允许代码通过的门
*   [AutoResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx) - 同上，但打开后自动关闭

[CCR/TPL（并行扩展](http://blogs.msdn.com/pfxteam/)CTP）中还有更多（低开销）锁定结构- 但 IIRC，这些将在 .NET 4.0 中提供

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-11-19T06:40:29.560

正如 ECMA 中所述，您可以从 Reflected 方法中观察到 lock 语句基本上等同于

```
object obj = x;
System.Threading.Monitor.Enter(obj);
try {
   …
}
finally {
   System.Threading.Monitor.Exit(obj);
} 
```

从上述示例中，我们看到监视器可以锁定对象。

当您需要进程间同步时，互斥锁很有用，因为它们*可以*锁定字符串标识符。不同的进程可以使用相同的字符串标识符来获取锁。

信号量就像类固醇上的互斥锁，它们通过提供最大并发访问计数来允许并发访问。一旦达到限制，信号量就会开始阻止对资源的任何进一步访问，直到其中一个调用者释放信号量。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-06-06T16:36:51.570

我为 DotGNU 中的线程提供了类和 CLR 支持，我有一些想法......

除非您需要跨进程锁，否则应始终避免使用互斥锁和信号量。.NET 中的这些类是围绕 Win32 Mutex 和 Semaphores 的包装器，并且重量相当大（它们需要将上下文切换到内核中，这很昂贵 - 特别是如果您的锁没有处于争用状态）。

正如其他人所提到的，C# lock 语句是 Monitor.Enter 和 Monitor.Exit 的编译器魔法（存在于 try/finally 中）。

监视器有一个简单但强大的信号/等待机制，而 Mutexes 没有通过 Monitor.Pulse/Monitor.Wait 方法。Win32 等价物是通过 CreateEvent 的事件对象，它实际上也作为 WaitHandles 存在于 .NET 中。Pulse/Wait 模型与 Unix 的 pthread_signal 和 pthread_wait 相似，但速度更快，因为在非竞争情况下它们可以完全是用户模式操作。

Monitor.Pulse/Wait 使用简单。在一个线程中，我们锁定一个对象，检查一个标志/状态/属性，如果它不是我们所期望的，调用 Monitor.Wait 它将释放锁定并等待直到发送一个脉冲。当等待返回时，我们循环返回并再次检查标志/状态/属性。在另一个线程中，每当我们更改标志/状态/属性时，我们都会锁定对象，然后调用 PulseAll 来唤醒任何侦听线程。

通常我们希望我们的类是线程安全的，所以我们在代码中加了锁。但是，通常情况下，我们的类只会被一个线程使用。这意味着锁不必要地减慢了我们的代码......这就是 CLR 中的巧妙优化可以帮助提高性能的地方。

我不确定 Microsoft 的锁实现，但在 DotGNU 和 Mono 中，锁状态标志存储在每个对象的标头中。.NET（和 Java）中的每个对象都可以成为锁，因此每个对象都需要在其标头中支持这一点。在 DotGNU 实现中，有一个标志允许您为每个用作锁的对象使用全局哈希表——这有利于消除每个对象的 4 字节开销。这对于内存来说不是很好（尤其是对于线程不重的嵌入式系统），但会影响性能。

Mono 和 DotGNU 都有效地使用互斥锁来执行锁定/等待，但使用自旋锁风格[的比较和交换](http://en.wikipedia.org/wiki/Compare-and-swap)操作来消除实际执行硬锁的需要，除非真的有必要：

您可以在此处查看如何实现监视器的示例：

[http://cvs.savannah.gnu.org/viewvc/dotgnu-pnet/pnet/engine/lib_monitor.c?revision=1.7&view=markup](http://cvs.savannah.gnu.org/viewvc/dotgnu-pnet/pnet/engine/lib_monitor.c?revision=1.7&view=markup)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-04-06T03:41:51.297

锁定您使用字符串 ID 标识的任何共享互斥锁的另一个警告是，它将默认为“本地\”互斥锁，并且不会在终端服务器环境中的会话之间共享。

使用“Global\”为您的字符串标识符添加前缀，以确保正确控制对共享系统资源的访问。在我意识到这一点之前，我刚刚遇到了一大堆与在 SYSTEM 帐户下运行的服务同步通信的问题。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2010-05-18T12:05:27.833

如果可以的话，我会尽量避免使用“lock()”、“Mutex”和“Monitor”...

查看 .NET 4 中的新命名空间 System.Collections.Concurrent
它有一些不错的线程安全集合类

[http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)

并发字典摇滚！我不再需要手动锁定！

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-01-29T22:54:55.323

在大多数情况下，您**不应该**使用锁（=Monitors）或互斥体/信号量。它们都在同步操作时阻塞等待线程。所以它们只适用于非常小的操作。

而且你绝对**不应该使用** `System.Collections.Concurrent`类——它们不支持具有多个集合的事务，并且还使用阻塞同步。

令人惊讶的是，.NET 没有有效的非阻塞同步机制。

我在 C# 上实现了来自 GCD（世界）的[串行队列](https://github.com/Gentlee/SerialQueue)`Objc/Swift`- 非常轻量级，不阻塞使用线程池的同步工具，并带有测试。

在大多数情况下，这是同步任何东西的最佳方式——从数据库访问（hello sqlite）到业务逻辑。

# iphone - 有没有办法以编程方式获取 iPhone 用户的运营商信息？

> ID：301162
> 
> 赞同：2
> 
> 时间：2008-11-19T06:27:15.483
> 
> 标签：iphone

除了使用区域来推断用户所在的运营商之外。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-01-10T00:34:43.167

第一次导入`#import <CoreTelephony/CTTelephonyNetworkInfo.h>`确保您也安装了框架。

```
CTTelephonyNetworkInfo *phoneInfo = [[CTTelephonyNetworkInfo alloc] init];
CTCarrier *phoneCarrier = [phoneInfo subscriberCellularProvider];
NSLog(@"Carrier = %@", [phoneCarrier carrierName]);
[phoneInfo release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-04T00:30:16.883

是否可以检查 IP 地址以确定运营商？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T03:25:13.370

不，SDK 中没有 API 可以执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-12T00:58:53.260

您可以使用我公司的此产品来获取手机的国家和运营商：[http](http://werwar.com) ://werwar.com ，我会为您设置免费试用，但您从您的应用程序向我们的服务器发送帖子并返回带有（已知的）运营商和国家/地区的字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-01-10T00:23:06.580

我知道这是一个非常古老的问题，当时没有检查使用哪个运营商的机制。但是自从iOS4以来就有了。

[请参阅上一个问题](https://stackoverflow.com/questions/900547/is-there-any-way-to-determine-if-the-iphone-is-roaming)的答案，该问题提供使用 CTTelephonyNetworkInfo 的解决方案

# asp.net - 有没有办法在 ASP.NET 中为应用程序定义时区？

> ID：301168
> 
> 赞同：4
> 
> 时间：2008-11-19T06:30:50.033
> 
> 标签：asp.net, time, timezone

有没有办法在 ASP.NET 中为应用程序定义时区，以便从当前服务器时间读取/比较的所有时间都被隐式转换，或者我是否需要在每个 DateTime.Now 调用中放入转换语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T06:43:20.957

我不确定 ASP 的最新发展，但[2006 年的这篇文章](http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/772971a4-9f1b-4004-a873-c1e0e2098852/)提供了一个有趣的答案：

> 问题是时区信息不能直接通过网络浏览器获得。您可以使用启发式方法来确定正确的时区，或者您必须根据用户的选择来存储用户的时区设置。

[.Net 3.5 及其TimeZoneInfo..ConvertTime](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.converttime.aspx)方法可能不需要以下内容，但为了完整起见：

> 一旦你有了时区设置，你现在需要翻译时间。**您应该始终将您的日期/时间值存储在 UTC 中的数据库中**。这消除了许多转换问题。如果您将信息存储在 UTC 中，那么当您向用户显示数据时，您只需要从 UTC 转换为用户的本地时区，并且当您从他们那里获取日期/时间值时，您需要从他们的时区转换为 UTC。
> 
> 使这变得更加困难的是 TimeZone 类并不是那么有用。幸运的是，在 v2.0 中，更新了 DateTime 以支持时间是否为 UTC 的指示符。 **您可以使用 DateTime.ToUniversalTime 方法将 DateTime 转换为 UTC。不幸的是，您无法将其转换回来**。
> 
> [ToLocalTime](http://msdn.microsoft.com/en-us/library/system.datetime.touniversaltime.aspx)方法使用本地时区，当在服务器上运行时，使用服务器的时区，这不是您想要的。然而更糟糕的是，您不能简单地创建一个 TimeZone 对象并使用它，因为该支持不存在。
> 
> Michael Brumm 创建了一个不错[的小类](http://www.michaelbrumm.com/simpletimezone.html)，可以轻松创建和使用时区。我个人在自己的应用程序中使用了该代码的大量修改版本，它运行良好。以下是将 DB UTC 值转换为本地用户时区的步骤。

1) 为用户获取存储的时区值
2) 创建一个 SimpleTimeZone 类来包装它（使用一些将 DB 值映射到底层 Windows 注册表版本的映射方案）
3) 使用 SimpleTimeZone.ToLocalTime 方法将 DateTime 值转换为当地时间。

> 出于性能原因，您可能应该获取并初始化 SimpleTimeZone 实例，并将其缓存在 Items 属性中以保持请求的长度，这样您就不必继续创建它。
> 
> 要从用户的本地时区转换为 UTC，请执行相反的操作：

1) 从用户那里获取存储的时区值
2) 创建一个 SimpleTimeZone 类来包装它
3) 使用 SimpleTimeZone.ToUniversalTime 方法将 DateTime 转换为 UTC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T06:36:38.240

在内部使用[DateTime.UtcNow](http://msdn.microsoft.com/en-us/library/system.datetime.utcnow.aspx)。对于 .NET 3.5，请查看 [TimeZoneInfo.ConvertTime](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.converttime.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-10T17:59:34.667

*请允许我直接*回答这个问题。

> 有没有办法在 ASP.NET 中为应用程序定义时区，以便从当前服务器时间读取/比较的所有时间都被隐式转换......

不，这是不可能的。.NET 中没有机制可以在每个线程或每个应用程序的基础上更改本地时区。它只能通过运行代码的机器的时区设置在系统范围内更改。 [另请参阅此答案](https://stackoverflow.com/a/19254366/634824)。

> ...还是我需要在每个 DateTime.Now 调用中放入转换语句？

您不应该`DateTime.Now`在 Web 应用程序中使用。因为您的服务器的时区设置很容易更改，所以您应该将应用程序设计为忽略它。这意味着`DateTime.UtcNow`在读取当前系统时间时使用。或者，您可以使用`DateTimeOffset`其`DateTimeOffset.Now`或`DateTimeOffset.UtcNow`属性。

另请参阅：[反对 DateTime.Now 的案例](http://codeofmatt.com/2013/04/25/the-case-against-datetime-now/)

当您需要使用特定用户的本地时间时，可以 - 您必须为每次使用进行转换。您可以使用`TimeZoneInfo`该类来完成此操作。

您还可以考虑使用[Noda Time](http://nodatime.org)，它提供了[IANA 时区数据库](http://en.wikipedia.org/wiki/Tz_database)的实现，并且通常是一个更好的 API。

# windows - 删除运行时使用的文件

> ID：301174
> 
> 赞同：1
> 
> 时间：2008-11-19T06:37:01.127
> 
> 标签：windows, file

如何删除运行时某个进程正在使用/打开的文件。我正在为我的项目使用 vb.net，图片显示在图片框中，应该删除，而不关闭该文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T06:50:02.397

如果文件是由另一个进程以独占模式打开的，你不能——Windows 不会让你这样做。在这种情况下，您可以做的最好的事情是等待其他进程关闭文件然后将其删除，或者在下次重新启动时使用[`MoveFileEx()`](http://msdn.microsoft.com/en-us/library/aa365240(VS.85).aspx)标志`MOVEFILE_DELAY_UNTIL_REBOOT`和目标位置将其删除`NULL`。

如果文件由另一个进程非独占打开，您可以[`DeleteFile()`](http://msdn.microsoft.com/en-us/library/aa363915(VS.85).aspx)正常调用（假设您有权这样做）。该文件将在其他进程打开时保留，但一旦其他进程关闭它就会被删除。

（是的，我意识到这些链接是针对 Win32 C API 的；在 VB .NET 下应该可以使用相同的功能）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T12:29:46.267

请参阅[删除锁定的文件](https://stackoverflow.com/questions/215461/delete-locked-files "删除锁定的文件")，[](https://stackoverflow.com/questions/229851/overcoming-it-is-being-used-by-another-person-or-program "克服“它正被另一个人或程序使用。”">克服“它正被另一个人或程序使用。”</a> 等等。</p>     </div>
    <div class=")

[于 2008-11-19T12:29:46.267 回答](https://stackoverflow.com/questions/229851/overcoming-it-is-being-used-by-another-person-or-program "克服“它正被另一个人或程序使用。”">克服“它正被另一个人或程序使用。”</a> 等等。</p>     </div>
    <div class=")[](https://stackoverflow.com/questions/229851/overcoming-it-is-being-used-by-another-person-or-program "克服“它正被另一个人或程序使用。”">克服“它正被另一个人或程序使用。”</a> 等等。</p>     </div>
    <div class=")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T15:56:23.073

您可以关闭进程，然后将其删除，或在重新启动时删除。使用上述建议获取有关在 Windows 中使用 MoveFileEx() 的信息。

要关闭进程，您可以执行以下操作：

```
For Each proc As Process In System.Diagnostics.Process.GetProcessesByName("process name here")
proc.Kill()
Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T06:50:35.577

我不认为这是可能的。在 Windows 上，您不能删除具有打开句柄的文件。[http://support.microsoft.com/kb/320081](http://support.microsoft.com/kb/320081)

但是，根据您的描述，您不需要在应用程序中保持文件打开。打开文件，读取图像，然后关闭文件。然后可以删除文件，但应用程序仍将具有图像数据。

# asp.net - 字节数组的系统类型是什么 - asp.net？

> ID：301176
> 
> 赞同：0
> 
> 时间：2008-11-19T06:41:20.930
> 
> 标签：asp.net, vb.net

我需要使用字节数组作为网站中的配置文件属性。通常我会将类型声明为 system.string 或 system.int32 但我不知道字节数组的类型。

编辑：我需要将其用作在 web.config 中声明的配置文件属性，如下所示：

```
<profile defaultProvider="ProfileProvider" enabled="true">
    <properties>
            <add name="Username" allowAnonymous="false" type="System.String" />
            <add name="LoginToken" allowAnonymous="false" type=" System.Byte()" />
        </properties>
</profile> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T06:53:42.387

我来自 C# 背景，所以我的回答并不准确，但我认为你想要类似的东西：

```
system.byte[] myByteArray = new system.byte[50]();
myByteArray[0] = 1;
myByteArray[2] = 20; // etc, etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T07:01:56.757

显然 vb 希望它在 web.config 中声明为 System.Byte[]

# php - 如何在 flickr 上获取照片信息？

> ID：301193
> 
> 赞同：1
> 
> 时间：2008-11-19T06:53:42.293
> 
> 标签：php, flickr

如何获取有关作者之类的照片的信息，使用 PHP 的许可证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-17T20:08:52.483

您调用 HTTP REST 查询，并将结果作为字符串加载：

```
$query = "http://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key=" . API_KEY . "&photo_id=" . $photoid . "&format=json&nojsoncallback=1";
data = json_decode(file_get_contents($query));

echo "created by: " . data->photo->owner->username;
echo "link to photopage: " . "http://www.flickr.com/photos/" . data->photo->owner->nsid; . "/" . data->photo->id; 
```

您可以从所需的任何 REST 调用中获取所需的任何数据。

所有这些都可以通过[flickr api获得](http://www.flickr.com/services/api/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T06:59:57.977

这些信息都可以通过[Flickr API](http://www.flickr.com/services/api/)获得，如果您浏览他们的文档，您可能会找到您要查找的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-20T11:58:43.397

您需要使用[Flickr 的公开可用的 API](http://www.flickr.com/services/api/)。注册一个 API 密钥，然后查看[此页面](http://www.flickr.com/services/api/response.php.html)（它为您提供了联系 API 和解析序列化 PHP 的基本介绍。我个人更喜欢将 XML 与 SimpleXML 一起使用）。

您可能会发现使用以下软件包之一更容易：

*   [梨](http://code.iamcal.com/php/flickr/readme.htm)
*   [phpFlickr](http://phpflickr.com/)
*   [phlickr](http://sourceforge.net/projects/phlickr/) (PHP5)

有关使用它们的信息，请参阅文档。

# ruby-on-rails - RoR：如何确保只有一个对象分配给我的对象？

> ID：301198
> 
> 赞同：1
> 
> 时间：2008-11-19T06:56:44.457
> 
> 标签：ruby-on-rails, ruby

在我的 Ruby on Rails 应用程序中，我有一个 User 表和一个 Foo 表。我还有一个存储交叉引用数据的 User_Foo 表。

我已经为我的视图按我想要的方式工作了所有东西，但是，现在我需要确保同一个 Foo 不会多次分配给我的用户。

最好的方法是什么？

我假设我可以在我的模型中使用 validates_uniqueness_of，但这并不特定于单个用户。我需要在更新时执行此操作吗？我希望有一个内置的“Ruby Way”来做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-19T07:05:48.277

validates_uniqueness_of 涵盖了它，你只需要添加一个额外的选项来获得你想要的行为。

假设您有一个 UserFoo 模型来存储交叉引用关系（并且不是无模型的）。以下验证不允许重复的 foo-user 链接。

```
class UserFoo < ActiveRecord::Base
  belongs_to :user
  belongs_to :foo
  validates_uniqueness_of :foo_id, :scope => :user_id 
```

# operating-system - 对于 Microsoft 开发人员来说，最好的操作系统是什么？

> ID：301201
> 
> 赞同：3
> 
> 时间：2008-11-19T06:57:58.917
> 
> 标签：operating-system, development-environment

这几年来一直困扰着我，最近由于引入了 Windows Vista（驱动程序要求和 UAC 限制是主要因素）而加剧了这种情况。

有许多不同风格的 Windows Vista（ [在此处](http://www.microsoft.com/windows/windows-vista/compare-editions/default.aspx)进行比较），还有其他选项（将 Windows Server 作为工作站运行），但对于我来说，我不知道哪个是开发工作站的最佳选择。

Vista 作为开发环境使用起来很痛苦（出于许多原因，我不想在这里讨论），但替代方案也有一些严重的缺点。

Windows Server 2008 是一个合乎逻辑的选择，但需要大量额外的配置和调整（更不用说它显然不是为高端图形或其他开发机器要求而设计的）。

问题是：对于 MS 平台开发，（当前）首选的 Microsoft 操作系统是什么？..或者，为什么Vista没有“开发者版”？

就我个人而言，我使用的是 Windows Server 2008，但我看到很多开发人员坚持使用 Windows XP，还有不少开发人员使用 Vista。显然，某些开发（例如 DirectX）确实必须在 XP 或 Vista 上完成。但是对于标准的 WinForms/Web 和服务器开发工作，黄金标准是什么？

您使用什么（如果您使用的是 MS 操作系统）以及为什么它对您有用？你认为什么是替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T07:05:17.637

用你最舒服的。对此没有单一的答案，因为它因以下因素而异：

*   您正在开发什么类型的软件
*   个人喜好
*   对疼痛的容忍度

此外，如果您编写在 XP、Vista 和 Server 上运行的软件，您仍然需要在所有这些平台上对其进行测试。

我个人同时使用 XP 和 Vista 并且没有遇到任何问题，但是当我使用 Windows 时，我没有做任何特别的事情（普通的 .NET winforms、一些远程处理可能、数据库访问等等），所以我没有注意到很大的差异。在 Vista 上，我运行 VS 2008，应用了一个补丁，并且作为我的本地用户帐户运行它没有任何问题（虽然它是 Ultimate）。在 XP 上，我使用 2005，它也可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T07:03:46.253

我使用 Windows Vista 专业版。我在 Visual Studio 2005 和 2008 中开发，当我以管理员身份运行它们时，它似乎对我来说工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T07:27:09.963

我没有在我的 Vista 笔记本电脑上进行任何开发，因为我尽量避免使用半成品的 VSTO 插件和类似的东西弄乱它。相反，我运行了大约 10 个不同的虚拟机（带有 IE 6/7/8 的 XP、一些 Vista 变体、干净的 2003 服务器、带有 Wss 的 2003 服务、带有 MOSS 的 2003 等等。到目前为止，只要我有 4 GB 内存，VM 位于单独的硬盘上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-19T07:35:07.547

我使用vista Ultimate，没有特别的痛苦。

以管理员身份运行 VS 2005 和 2008，主要是做网络工作。无论部署目标是什么，所有真正的测试都是在测试框中的虚拟机堆栈上完成的。我在主机箱上放了一张 XP 图像，以备不时之需。

如果您有足够的马力来喂它，则 vista 没有特别的问题。
似乎比 XP 崩溃少，不记得我上次操作系统崩溃是什么时候了。
启动时间有点迟缓，但公平地说，至少比我使用 XP 时多 1 TB 的驱动器空间，是泡咖啡的好时机。

这么多年过去了，我只是厌倦了看 XP，想要一些不同的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T07:24:55.867

您输入代码并进行编译的机器应该是您可以轻松输入代码并进行编译的机器。这可能是一台经过适当调整的服务器机器，或者是一台经过适当调整的 XP 机器。

您正在测试的机器，可能也使用 Visual Studio，但更多的是设置断点和检查对象的值，需要是您的客户将使用的每种机器和配置。不管你是否习惯使用这些系统，你都需要看看你的客户会看到什么。XP 和 Vista（所有品种）。受限用户和管理员。和服务器系统，如果那是你的市场。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-19T09:33:39.820

我使用的是 Windows Server 2003，主要是因为它包含了 IIS 6——它让我在类似于生产服务器的环境中测试应用程序变得更加轻松。此外，如果需要，您可以使用 Sharepoint 的本地实例（WSS 或 MOSS）轻松测试您的 Web 部件/功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-19T09:47:48.340

我使用 XP pro 和 Vista Ultimate。如果您关闭 uac，Vista 对我来说似乎很好，尽管我知道许多开发人员使用它进行开发。最近出现了一些只能在 vista 上运行的东西（可能是卡空间预览但不确定？）。

一些框架元素在 XP 和 vista 中的工作方式有所不同。例如，一些写入事件日志的代码在 XP 中可以正常工作，但在 Vista 中不会，除非您正确设置权限以创建事件源等。起初这让我很恼火，因为它的功能不一样，但如果你认为关于它为什么应用程序不需要写入事件日志的权限。

虽然 MS 在支持 XP 等方面已经“相当”好（除了上面的例子，我想不出在两者上都不起作用的东西），但如果你想使用一些新功能进行开发，那么你将需要一个较新的操作系统。XP 是一个很好的操作系统，我不想开始一个 vista bashing 会话，但 XP 现在已经有 8 年的历史了。

# c++ - 提取 C++ 模板参数

> ID：301203
> 
> 赞同：35
> 
> 时间：2008-11-19T06:58:56.713
> 
> 标签：c++, templates, rtti

虽然我很怀疑，但我很好奇是否可以从现有类型中提取原始类型模板参数，也许使用 RTTI。

例如：

```
typedef std::bitset<16> WordSet; 
```

是否可以在上面的代码中提取数字 16 而无需在其他地方进行硬编码？欢迎使用编译器特定的实现，尽管我对`g++`.

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2008-11-19T07:53:58.087

通常不可能选择任意模板参数。

但是，通常的做法是：

```
template<int N>
struct foo {
    static const int value = N;
}; 
```

对于类型

```
template<typename T>
struct foo {
    typedef T type;
}; 
```

您可以使用`foo<39>::value`或访问它`foo<int>::type`。

如果您有特定类型，则可以使用部分模板特化：

```
template<typename>
struct steal_it;

template<std::size_t N>
struct steal_it< std::bitset<N> > {
    static const std::size_t value = N;
}; 
```

事实上，同样的原则也适用于类型参数。现在您可以将任何位集传递给它，例如`steal_it< std::bitset<16> >::value`（注意使用 size_t，而不是 int！）。因为我们还没有可变参数的许多模板参数，所以我们必须将自己限制在特定的参数计数，并重复从 1 到 N 计数的steal_it 模板特化。另一个困难是扫描具有混合参数的类型（类型和非类型参数）。这可能很难解决。

如果你没有类型，而只有一个对象，你可以使用一个技巧，在编译时仍然得到一个值：

```
template<typename T>
char (& getN(T const &) )[steal_it<T>::value];  

int main() {
    std::bitset<16> b;
    sizeof getN(b); // assuming you don't know the type, you can use the object
} 
```

诀窍是让函数模板自动推断类型，然后返回对字符数组的引用。该函数不需要定义，唯一需要的是它的类型。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-01-11T08:19:59.053

您可以在 C++11 中使用参数推导和未评估的上下文轻松地做到这一点（请注意，为了方便，演示使用 C++14 的变量模板功能）。

```
#include <type_traits>
#include <iostream>

template<int>
struct foo {};

template<int arg_N>
struct val {
    static constexpr auto N = arg_N;
};

template<template <int> typename T, int N>
constexpr auto extract(const T<N>&) -> val<N>;

template<typename T>
constexpr auto extract_N = decltype(extract(std::declval<T>()))::N;

int main() {
    std::cout << extract_N<foo<5>>;
} 
```

[`Live demo`](http://coliru.stacked-crooked.com/a/498365c253663e80)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-09-29T17:50:20.973

我喜欢 Marc Garcia 的回答，因为它展示了如何以通用方式提取模板参数，但我相信他的示例可以更简单：

```
#include <type_traits>
#include <iostream>

template<int>
struct MyType {};

template<template <int> typename T, int N>
constexpr int extract(const T<N>&) { return N; }

int main() {
    constexpr MyType<5> myObj;
    std::cout << extract(myObj);
} 
```

[`Live demo`](http://coliru.stacked-crooked.com/a/edd4525fb4eb74a5)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-19T07:20:27.670

在 的情况下`std::bitset`，您可以只使用`size()`成员函数：

```
size_t sz = oh_my_word.size();  // sz is now 16 
```

在一般情况下，您可以定义一个以类似方式返回大小的成员函数：

```
template <int N>
class Foo
{
public:
  int size() const { return N; }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-04T13:42:26.563

正如其他答案所述，因为`std::bitset`您可以通过使用`size()`成员函数来获取大小，这应该是正确的选择，比任何其他技巧都要好。

有几个针对通用案例的建议，与我在下面建议的几乎相似，但我仍然认为这个更简单：

```
template <template<std::size_t> typename T, std::size_t K>
auto extractSize(const T<K>&) {
    return K;
}

int main() {
    std::bitset<6> f1;
    std::bitset<13> f2;
    std::cout << extractSize(f1) << std::endl;
    std::cout << extractSize(f2) << std::endl;
} 
```

# macos - 在 Mac 上获取桌面背景

> ID：301215
> 
> 赞同：5
> 
> 时间：2008-11-19T07:13:33.190
> 
> 标签：macos, wallpaper, desktop-background

如何在 Mac 上获取当前壁纸？只需将我指向一个 API 函数，以便我可以搜索更多内容。

编辑：我想我找到了。[NSUserDefaults standardUserDefaults] 在[http://lists.apple.com/archives/student-dev/2004/Aug/msg00140.html中提到](http://lists.apple.com/archives/student-dev/2004/Aug/msg00140.html)

也可以从 shell：默认读取 com.apple.desktop 背景

并来自 AppleScript： [http ://discussions.apple.com/thread.jspa?messageID=7111272](http://discussions.apple.com/thread.jspa?messageID=7111272)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-19T11:04:09.153

## 更新的答案（小牛队和更新）

从 Mavericks 开始，Apple 将桌面图像写入

```
/Users/<current-user>/Application Support/Dock/desktoppicture.db 
```

这是一个 SQLite 数据库。您可以像这样在终端中打开此文件

```
sqlite3 "/Application Support/Dock/desktoppicture.db" 
```

然后运行以下 SELECT：

```
SELECT display_uuid,space_uuid,value 
FROM preferences 
JOIN data ON preferences.data_id=data.ROWID 
JOIN pictures ON preferences.picture_id=pictures.ROWID
JOIN displays ON pictures.display_id=displays.ROWID 
JOIN spaces ON pictures.space_id=spaces.ROWID ; 
```

输出将是

```
<UID1>|<UID2>|<PicturePath>
<UID1>|<UID2>|<PicturePath>
: 
```

`UID1`是显示器的 UID（例如 MacBook 的显示器、外部显示器等，因为每个显示器都可以有自己的背景图像），`UID2`是可选的（有时它会丢失，这可能意味着该显示器的所有空间）并且它是空间的 UID（OS X 上的每个显示器都可以有多个空间，每个空间都可以有自己的背景图像），并且`<PicturePath>`是图片的路径（对于此特定显示器上的特定空间）。

当然，您可以将您的应用程序与 SQLite 库链接，并通过库调用来完成所有这些操作，但是如何使用 SQLite 以及用于查询和更新数据的 SQL 语法当然*超出了这个答案的范围。*只有一个提示：您`sqlite`通过键入退出客户端`.exit`（注意前导句点！）并按回车键（CTRL+C 不起作用）。

还有一点需要注意：您可以在应用程序中更新数据库，但这不会产生任何影响，因为 Dock 不会知道它（您在其背后更改它）。为了让 Dock 知道该更改，您已经像杀死它一样`killall Dock`，只需 HUP 它（`killall -HUP Dock`）就足够了，这不会真正杀死它（我没有测试过）。在应用程序中，您必须找到 Dock 的进程 ID 并向其发送信号（这与此相同`killall`），获取进程 ID 和发送信号也超出了该回复的范围。

## 旧版答案（Lion 及更早版本）

你在正确的轨道上。如果您使用 Carbon/Cocoa 编写应用程序，只需加载首选项文件。它位于

```
/Users/<current-user>/Library/Preferences/com.apple.desktop.plist 
```

该字典包含一个带有键的`default`子字典，该子字典包含一个键`ImageFilePath`，其中包含图像文件的绝对路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T10:12:34.643

您可以像这样在 shell + Applescript 中执行此操作：

```
#!/bin/bash
osascript -e 'tell app "finder" to get posix path of (get desktop picture as alias)' 
```

# perl - 当 Perl 中的命令执行失败时，如何读取 stderr？

> ID：301221
> 
> 赞同：3
> 
> 时间：2008-11-19T07:15:19.070
> 
> 标签：perl, external-process

我正在执行一个`diff`命令`perl`。

```
my @lines = `/usr/local/bin/diff -udr \"$expected_file\" \"$gen_file\"`;

if ($? != 0)
{
    print ERRFILE "Diff between $expected_file and $gen_file failed\n";
    return $diff_err;
} 
```

这里`diff`可能由于某种原因失败了。例如：stderr 显示*/usr/local/bin/diff: test.txt: No such file or directory*。我想在程序中阅读此消息。如何找到`diff`命令（或`grep`我执行的任何命令）的 stderr 消息？

提前感谢帮助。

谢谢， 马修 Liju

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-19T09:58:17.150

这在[perlfaq8 中得到了回答：如何从外部命令中捕获 STDERR？](http://learn.perl.org/faq/perlfaq8.html#How-can-I-capture-STDERR-from-an-external-command)

如果我想读取进程的 STDOUT 和 STDERR，我使用 Perl 附带的 IPC::Open3。这样，我不必合并这些流，然后再弄清楚输出的哪一部分来自什么。

我会尽量避免使用临时文件（所以没有`2>file.txt`）。当我可以直接阅读 STDERR 时，这只是太多的工作和代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-19T12:33:57.600

有几个 CPAN 模块可以简化此操作，并让您将 STDOUT 和 STDERR 分开。例如，[IO::CaptureOutput](http://search.cpan.org/perldoc?IO::CaptureOutput)会让你这样做（虽然你需要自己拆分行）：

```
use IO::CaptureOutput 'qxx';

my ($stdout, $stderr, $ok) = 
    qxx( qq(/usr/local/bin/diff -udr "$expected_file" "$gen_file") );

if (! $ok)
{
    print ERRFILE "Diff between $expected_file and $gen_file failed\n";
    return $stderr;
}

my @lines = split /\n/, $stdout; 
```

- 大卫

# asp.net-mvc - 使用 Web 浏览器作为瘦客户端访问服务器上的某些应用程序

> ID：301224
> 
> 赞同：0
> 
> 时间：2008-11-19T07:17:10.733
> 
> 标签：asp.net-mvc, architecture

我有一个 ASP.NET MVC 应用程序，当用户单击该应用程序的提交按钮时，服务器应捕获表单中的所有信息，并调用本地 Windows 应用程序（位于“c:\Program Files... "并在将数据传回给用户之前进行一些处理。

现在，这可能吗？Web 应用程序调用本地应用程序是否有任何安全限制？

换句话说，我可以使用[System.Diagnostic.Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类在我的 asp.net 应用程序中启动一个新进程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T08:36:26.393

*现在，这可能吗？* 是的

*Web 应用程序调用本地应用程序是否有任何安全限制？* 您应该检查您的 IIS 为此类操作工作的角色，例如，如果您的 IIS 在 NETWORK SERVICE 角色下工作并且无权访问您要执行的进程路径，那么它将失败......

*我可以使用 System.Diagnostic.Process 类在我的 asp.net 应用程序中启动一个新进程吗？* 到目前为止我还没有尝试过，但我认为这不会有限制，你可以像大多数其他 Windows 应用程序一样认为 asp.net 应用程序。

# asp.net-mvc - 在路由定义中间使用贪婪路由参数

> ID：301230
> 
> 赞同：0
> 
> 时间：2008-11-19T07:21:59.977
> 
> 标签：asp.net-mvc, routing

我正在尝试创建遵循树导航系统结构的路线，即我想在我的路线中包含树中的整个路径。所以如果我有一棵看起来像这样的树

*   电脑
    *   软件
        *   发展
        *   图形
    *   硬件
        *   中央处理器
        *   显卡

然后我希望能够拥有看起来像这样的路线

*   site.com/catalog/computers/software/graphics

这本身并不难，可以通过看起来像这样的路线捕获

*   目录/{*类别}

但是我希望能够在该 URL 的末尾添加产品信息，就像这样

*   site.com/catalog/computers/software/graphics/title=Photoshop

这意味着我会要求像以下示例一样定义的路线

*   site.com/{*categories}/title={name}
*   site.com/{*categories}

然而，这些路线中的第一个是无效的，因为在诸如 {*categories} 之类的贪婪参数之后不会出现其他任何东西，所以我有点卡住了。我一直在考虑实现正则表达式路由，或者可能使用 IRouteContraint 来解决这个问题，但我想不出一个体面的解决方案，让我也可以使用**Html.ActionLink(...)**方法生成出站 URL填写了 {*categories} 和 {name}

非常感谢任何建议！

*你们中的一些人可能昨天看到了我提出的类似问题，但我已将其删除，因为此后我对其进行了更多思考，并且旧问题包含对我的问题的不完整描述*

**更新 2008/11/26**我在[http://thecodejunkie.blogspot.com/2008/11/supporting-complex-route-patterns-with.html发布了解决方案](http://thecodejunkie.blogspot.com/2008/11/supporting-complex-route-patterns-with.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-03-15T08:04:59.000

## URL 中任意位置的贪婪段

我编写`GreedyRoute`了支持 URL 中任意位置的贪婪（全部捕获）段的类。您需要它已经有一段时间了，但它将来可能对其他人有用。

它支持以下任何模式：

*   `{segment}/{segment}/{*greedy}``Route`- 默认类已支持此功能
*   `{segment}/{*greedy}/{segment}`-**中间贪心**
*   `{*greedy}/{segment}/{segment}`-**一开始很贪心**

您可以阅读[我的博客文章](http://erraticdev.blogspot.com/2011/01/custom-aspnet-mvc-route-class-with.html)中的所有详细信息并获取代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T08:45:41.553

路由忽略查询字符串参数。但同时，只要不存在同名的路由 URL 参数，查询字符串参数就会传递给操作方法。所以我将只使用第二条路线，并通过查询字符串传递标题。

另一种选择更复杂。您编写一个从 Route 派生的自定义路由并覆盖 GetRouteData 方法，以便它解析“categories”的值（类似于 RouteData.Values["categories"]，然后将解析的数据添加到路由值字典（RouteData.Values [“标题”] = 已解析标题。

# objective-c - 访问模型类中的控制器数据成员

> ID：301233
> 
> 赞同：2
> 
> 时间：2008-11-19T07:23:26.807
> 
> 标签：objective-c, cocoa

我正在使用 Xcode 开发 GUI 应用程序。我有一个模型类和一个控制器类。我的控制器类中有一个 NSTextView 数据成员。如何从模型类访问此变量？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-11-19T11:00:11.393

首先，模型类不应与视图类对话。TextView 是视图的一部分。

[替代文字 http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaFundamentals/Art/cocoa_mvc.gif](http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaFundamentals/Art/cocoa_mvc.gif)

控制器与视图类对话，视图类向控制器提供反馈。模型类由控制器更新并向其提供反馈。模型类从不与视图类对话，它们甚至不知道任何视图类的存在。所以我认为你在这里有一个基本的设计问题。您可能在此模型中实现了 MVC：

[替代文字 http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaFundamentals/Art/traditional_mvc.gif](http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaFundamentals/Art/traditional_mvc.gif)

然而，这不是在 Mac OS X 中完成的方式，这不是 Apple 的方式，也不是整个 Cocoa 对象结构的设计方式！所以你的问题的答案是：你不这样做，因为你不应该。

除了你有一个设计缺陷之外，你访问它就像访问 Objective-C 中的所有数据成员一样。如果是公开的，可以直接访问：

```
MyController * c = [[MyController alloc] init];
// c has a member name textView, let's access it
[c->textView ...]; 
```

您应该已经知道，这实际上是一种非常糟糕的编程风格。您不应该直接访问另一个对象的数据成员。实际上，您甚至不应该将它们公开。如果您将它们声明为私有，则上面的代码将失败（编译器强制您不要这样做）。另一种方法是实现一个getter并通过getter访问它：

```
// This goes into the controller

- (NSTextView) textView
{
    return textView;
}

// This is called in the modell

[[c textView] ...]; 
```

然而，这也是糟糕的设计。模型可能对这个对象做任何它想做的事，而你的控制器不会看到它！你为什么不建模只是告诉控制器它想要发生什么？

```
// In the controller

- (void) notifyContentHasChanged:(NSString *)name
{
    // update the text view here ...
}

// In the modell

[c notifyContentHasChanged:...]; 
```

瞧，您拥有 Apple 想要的 MVC。模型只通知控制器发生了什么，控制器相应地更新视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-21T18:26:35.593

回复：递归`#import`问题，你要找的是`@class`指令。在大多数情况下，您的类接口需要知道的关于其他类的所有信息就是它们的名称，因为所有实际的特定于实现的东西都在您的`*.m`文件中。因此，该`@class`指令为接口定义提供了一种方法来告诉编译器“嘿，当你遇到这个词时，它是一个类名，所以不要惊慌。” 在接口声明中使用`@class`时，不需要导入该类的头文件。

[Objective-C 2.0 编程语言：类接口（指其他类）](http://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/Articles/chapter_3_section_3.html#//apple_ref/doc/uid/TP30001163-CH12-TPXREF124 "Objective-C 2.0 编程语言：类接口（参考其他类）")。

# function - PostgreSQL 中的更新函数

> ID：301234
> 
> 赞同：1
> 
> 时间：2008-11-19T07:24:37.990
> 
> 标签：function, postgresql, sql-update

我对我创建的更新功能有疑问...

```
CREATE OR REPLACE FUNCTION rm_category_update(icompany bpchar, iraw_mat_cat_code bpchar, iraw_mat_cat_desc bpchar)

RETURNS character AS

$BODY$

DECLARE
   loc_result    CHAR(50); 

BEGIN

UPDATE rm_category

 SET
    raw_mat_cat_code    = iraw_mat_cat_code,
    raw_mat_cat_desc    = iraw_mat_cat_desc

WHERE company = icompany;

loc_result = 'success';

RETURN loc_result ;

END;

$BODY$

LANGUAGE 'plpgsql' VOLATILE;

ALTER FUNCTION rm_category_update(icompany bpchar, iraw_mat_cat_code bpchar, iraw_mat_cat_desc bpchar) OWNER TO postgres; 
```

好的，所以如果我输入一条不存在的记录，例如 9，即使我知道它没有更新任何内容，它也会返回成功！

如果更新不存在的行，SQL 不会抛出错误吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T08:17:53.747

您可以使用“FOUND”来检测最后一条语句是否影响了一行或多行，请参阅[Manual](http://www.postgresql.org/docs/8.3/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-DIAGNOSTICS)。

例子：

```
-- snippet
IF FOUND THEN
  loc_result = 'success';
ELSE
  loc_result = 'failed'; -- or something similiar...
END IF; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T07:42:13.570

这取决于 DBMS - 但不，它不应该抛出错误。根据 SQL 标准（现在的 ISO/IEC 9075:2008），它应该设置 SQLNOTFOUND 条件（+100），这与任何错误条件是分开的。（对于 Informix，如果您使用 MODE ANSI 数据库，则会得到 SQLNOTFOUND；如果使用非 ANSI 数据库，则会得到 0（无错误）作为条件。其原因早于原始 SQL-86 标准。 )

请注意，SQL 是一种基于集合的语言。您要求的是该语句更新一组（匹配）行 - 更新包含零（匹配）行的集合是完全有效的。

# java - loadComponentFromURL 摔死了，怎么做心肺复苏术？

> ID：301239
> 
> 赞同：0
> 
> 时间：2008-11-19T07:29:41.053
> 
> 标签：java, python, jython, openoffice.org

好吧，我测试了我的 jython 程序，它做了一些简洁的 [".xls"、".doc"、".rtf"、".tif"、".tiff"、".pdf" 文件] -> pdf（中间文件） -> 使用 Open Office 进行 tif（最终输出）转换。由于自动化方面的问题，我们离开了 MS Office。现在看来，我们已经击倒了许多与显示塞子错误相关的瓶子，只剩下一瓶。OO 会在一段时间后挂起。

它发生在你在代码中看到这一行 '<<<<<<<<<<<'

什么是我处理停滞不前的 Open Office 流程的正确方法。您能否提供有用的链接，并在出路时给我一个好的建议。
还有一个问题。

总结：
* 如何处理停滞的 Open Office 实例？
* 如何使用 java headless 进行转换，所以我不会一直弹出 GUI 浪费内存。
* 任何关于代码质量、优化和通用编码标准的一般性建议也将不胜感激。

* * *

Traceback（最里面的最后一个）：
文件“dcmail.py”，第 184 行，在？
文件“dcmail.py”，第 174 行，主
文件“C:\DCMail\digestemails.py”，第 126 行，process_inbox
文件“C:\DCMail\digestemails.py”，第 258 行，_convert
文件“C: \DCMail\digestemails.py"，第 284 行，在 _choose_conversion_type
文件中 "C:\DCMail\digestemails.py"，第 287 行，在 _open_office_convert
文件中 "C:\DCMail\digestemails.py"，第 299 行，在 _load_attachment_to_convert
com.sun .star.lang.DisposedException：
com.sun.star.lib.uno.bridges.java_remote.java_remote_bridge$MessageDi spatcher.run（java_remote_bridge.java:176）处的 java.io.EOFException

com.sun.star.lang.DisposedException: com.sun.star.lang.DisposedException: java.i o.EOFException

只是为了清除此异常仅在我终止打开的办公室进程时引发。否则程序只是等待开放办公室完成。无限期

* * *

代码（带有非功能代码标签）

[代码]

> > ```
> > #ghost script handles these file types  
> > GS_WHITELIST=[".pdf"]  
> > #Open Office handles these file types  
> > OO_WHITELIST=[".xls", ".doc", ".rtf", ".tif", ".tiff"]   
> > #whitelist is used to check against any unsupported files.  
> > WHITELIST=GS_WHITELIST + OO_WHITELIST 
> > ```

```
def _get_service_manager(self):
    try:
        self._context=Bootstrap.bootstrap();
        self._xMultiCompFactory=self._context.getServiceManager()
        self._xcomponentloader=UnoRuntime.queryInterface(XComponentLoader, self._xMultiCompFactory.createInstanceWithContext("com.sun.star.frame.Desktop", self._context))
    except:
        raise OpenOfficeException("Exception Occurred with Open Office")

def _choose_conversion_type(self,fn):
    ext=os.path.splitext(fn)[1]
    if ext in GS_WHITELIST:
        self._ghostscript_convert_to_tiff(fn)
    elif ext in OO_WHITELIST:
        self._open_office_convert(fn)

def _open_office_convert(self,fn):
    self._load_attachment_to_convert(fn)
    self._save_as_pdf(fn)
    self._ghostscript_convert_to_tiff(fn)

def _load_attachment_to_convert(self, file):
    file=self._create_UNO_File_URL(file)
    properties=[]
    p=PropertyValue()
    p.Name="Hidden"
    p.Value=True
    properties.append(p)
    properties=tuple(properties) 
    self._doc=self._xcomponentloader.loadComponentFromURL(file, "_blank",0, properties) <<<<<<<<<<<<<<< here is line 299

def _create_UNO_File_URL(self, filepath):
    try:
        file=str("file:///" + filepath)
        file=file.replace("\\", "/")
    except MalformedURLException, e:
        raise e
    return file

def _save_as_pdf(self, docSource):
    dirName=os.path.dirname(docSource)
    baseName=os.path.basename(docSource)
    baseName, ext=os.path.splitext(baseName)
    dirTmpPdfConverted=os.path.join(dirName + DIR + PDF_TEMP_CONVERT_DIR)
    if not os.path.exists(dirTmpPdfConverted):
        os.makedirs(dirTmpPdfConverted)
    pdfDest=os.path.join(dirTmpPdfConverted + DIR + baseName + ".pdf")
    url_save=self._create_UNO_File_URL(pdfDest)
    properties=self._create_properties(ext)
    try:
        try:
            self._xstorable=UnoRuntime.queryInterface(XStorable, self._doc);
            self._xstorable.storeToURL(url_save, properties)
        except AttributeError,e:
                self.logger.info("pdf file already created (" + str(e) + ")")
                raise e
    finally:
        try:
            self._doc.dispose()
        except:
            raise

def _create_properties(self,ext):
    properties=[]
    p=PropertyValue()
    p.Name="Overwrite"
    p.Value=True
    properties.append(p)
    p=PropertyValue()
    p.Name="FilterName"
    if   ext==".doc":
        p.Value='writer_pdf_Export'
    elif ext==".rtf":
        p.Value='writer_pdf_Export'
    elif ext==".xls":
        p.Value='calc_pdf_Export'
    elif ext==".tif":
        p.Value='draw_pdf_Export'
    elif ext==".tiff":
        p.Value='draw_pdf_Export'
    properties.append(p)
    return tuple(properties)

def _ghostscript_convert_to_tiff(self, docSource):
    dest, source=self._get_dest_and_source_conversion_file(docSource)
    try:
        command = ' '.join([
            self._ghostscriptPath + 'gswin32c.exe',
           '-q',
           '-dNOPAUSE',
           '-dBATCH',
           '-r500',
           '-sDEVICE=tiffg4',
           '-sPAPERSIZE=a4',
           '-sOutputFile=%s %s' % (dest, source),
           ])
        self._execute_ghostscript(command)
        self.convertedTifDocList.append(dest)
    except OSError, e:
        self.logger.info(e)
        raise e
    except TypeError, (e):
        raise e
    except AttributeError, (e):
        raise e
    except:
        raise 
```

[/代码]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T09:48:45.890

OpenOffice.org 有一个“-headless”参数，可以在没有 GUI 的情况下运行它。我不确定这是否真的会释放所有用于 GUI 的资源。这是我运行服务器端无头实例的方式：

```
soffice -headless -accept="socket,port=1234;urp" -display :25 
```

我不知道是什么导致了您的 Python 脚本出现停滞问题，但您可能想查看[PyODConverter](http://www.artofsolving.com/opensource/pyodconverter)，看看这个脚本有什么不同，可能会发现导致您的麻烦的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T11:26:53.210

棘手的解决方案是为 OpenOffice 进程设置一个监视器。如果您的监视器知道 PID 并具有权限，它可以每隔几秒获取一次 CPU 时间。如果 OO 处于停滞状态（没有更多 CPU），则监视器可以杀死它。

处理此问题的最简单方法是让启动开放式办公室任务的“包装器”在它运行时监视它，并在它挂起时杀死它。父进程无论如何都必须等待，所以它也可以监视。

如果 OpenOffuce 陷入循环，则更难发现。CPU 通常会突破，停留在那里，优先级会下降到可能的最低优先级。处理或挂起？判决电话。你必须让它像这样挂“一段时间”（选择一个随机的持续时间，例如 432 秒（3 打）；你总是会怀疑自己。）

# php - 什么是 PHP 框架，什么是好的框架？

> ID：301240
> 
> 赞同：8
> 
> 时间：2008-11-19T07:29:54.017
> 
> 标签：php, frameworks

我正在运行一个关于 PHP 框架的网站，但我找不到它的确切定义，而且我一直在思考一个问题，如何制作一个好的 PHP 框架？特征？手动的？效率？或者其他的东西？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-11-19T07:53:50.737

询问编程论坛什么是好框架就像询问汽车论坛什么是好车一样。意见千差万别，在 95% 的情况下，你选择什么并不重要，只要它是积极开发的。您的大部分回复将基于宗教而非主观比较。:)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-11-19T08:39:19.587

本质上，框架是您可以选择在其上构建程序的结构。它可以让您连接到许多不同的 API，并确定您自己的应用程序的结构。我使用 Zend 框架。它不是最容易学习的，但肯定拥有出色应用程序所需的一切。我建议通过网站上的快速入门指南来了解这一点。它使用模型-视图-控制器，这在我看来是必不可少的。配置完成后，它使事情变得非常容易！

其他框架包括 CodeIgniter 和 Symfony。有些人喜欢 CodeIgniter，因为它占用的空间更小。这都是偏好问题。无论您选择哪个，请务必使用网站上的文档，因为了解如何最好地使用它至关重要。此外，不要害怕每隔一段时间就在代码中达到顶峰，只是为了更好地了解事情是如何工作的。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-11-19T09:52:40.047

框架提供了可以让您更快/更干净地开发的脚手架。它们通常为 UI 组件和底层数据库访问提供工具集。

对于（非常）小的项目，一个框架可能是多余的，但通常，为您提供大量可重用的代码会很有帮助。

一些著名的 PHP 框架： [Zend Framework](http://framework.zend.com) [CodeIgniter](http://codeigniter.com/) [Symfony](http://www.symfony-project.org/) [CakePHP](http://cakephp.org/) [Mojavi](http://www.mojavi.org/)

[对比图。](http://www.phpit.net/demo/framework%20comparison/chart.php) [更详细的评论网站。](http://www.phpframeworks.com/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-11-19T07:35:01.697

在我看来，PHP 框架是帮助您开发 Web 应用程序的类的集合。

在我的公司，我们使用 Zend 框架。我不得不说，开始使用这个框架非常困难，但如果你知道如何使用 API 和参考指南，你就会拥有一个很棒的框架。这也很有趣，因为他们有 Zend 人员参与该项目，因此他们可以使用这些内部技巧并获得一些其他人无法获得的性能提升。

ZF 与其他公司的不同之处还在于能够轻松创建 MVC 程序。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-19T10:34:08.853

关于框架有很多话要说——这里有好帖子。但是请注意，它们并不总是最好的解决方案。您可能更愿意避免使用它们的原因是

1.  由于代码库的大小，它们往往很慢（例如，我看到 Zend 引用的简单 PHP 嵌入式页面交付速度慢了 10 倍的数据 - 诚然是较大的数据之一）。

2.  在他们打算使用的“域”之外，它们可能是不灵活的。扩展一个框架来做一些非标准的事情可能比从头开始编码要困难得多。

3.  需要牺牲一些模块化。使用更简单的模板/控制文件系统（例如[TinyButStrong](http://www.tinybutstrong.com)）的优点是每个页面都是一个不同的单元，这自然会使您的系统更容易进行单元测试和健壮。

4.  它们往往容易受到版本控制问题的影响。开发你的第一个非常好，但是在你开发了十几个网站之后，你很可能会发现你一直在使用该框架的三个或四个发布版本，并且你有一个混杂的代码库来使用 - 并同步所有内容需要您可能没有的时间。

以上都不是反对使用框架的结论性论据，在许多（大多数？）情况下，优势会得分更高，但如果不首先考虑您的要求是什么以及每个特定的最佳解决方案是什么，您不应该达到一个问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-19T09:44:17.643

PHP 框架是一个库，它通过隐藏 HTTP 协议的一些复杂性或添加一些有用的功能，使站点开发人员的生活更轻松。例如，[CakePHP](http://www.cakephp.org/)实现了所谓的[MVC](http://en.wikipedia.org/wiki/Model-view-controller)，它使开发人员的思维水平高于 HTTP。这是我到目前为止所学到的。

# c++ - 现场粘贴，语法高亮

> ID：301241
> 
> 赞同：1
> 
> 时间：2008-11-19T07:31:19.037
> 
> 标签：c++, c, syntax-highlighting, paste

我正在获得一个网络主机，并且我有团队垫的项目。我认为拥有自己的粘贴站点是一个不错的主意，该站点没有粘贴到期日期（我知道[http://pastie.org/](http://pastie.org/)存在）和其他内容。我想知道。我可以在代码上使用的简单高亮库是什么？我只会使用 C/C++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T07:51:21.257

问题被标记为“php”，但您“只会使用 C/C++”？

PHP 解决方案是[GeSHi](http://qbnz.com/highlighter/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T08:22:38.713

只为一种语言（无上下文，使用 C++ 等常规词位）构建荧光笔实际上非常容易，因为您基本上可以将所有词位包装到一个大的正则表达式中：

```
$cpplex = '/
    (?<string>"(?:\\\\"|.)*?")|
    (?<char>\'(?:\\\\\'|.)*?\')|
    (?<comment>\\/\\/.*?\n|\\/\*.*?\*\\/)|
    (?<preprocessor>#\w+(?:\\\\\n|[^\\\\])*?\n)| # This one is not perfect!
    (?<number>
        (?: # Integer followed by optional fractional part.
            (?:0(?:
                    x[0-9a-f]+|[0-7]*)|\d+)
            (?:\.\d*)?(?:e[+-]\d+)?)
        |(?: # Just the fractional part.
            (?:\.\d*)(?:e[+-]\d+)?))|
    (?<keyword>asm|auto|break|case…)|            # TODO Complete. Include ciso646!
    (?<identifier>\\w(?:\\w|\\d)*)
    /xs';

$matches = preg_match_all($cpplex, $input, $matches, PREG_OFFSET_CAPTURE);

foreach ($matches as $match) {
    // TODO: determine which group was matched.
    // Don't forget lexemes that are *not* part of the expression:
    // i.e. whitespaces and operators. These are between the matches.
    echo "<span class=\"$keyword\">$token</span>";
} 
```

# .net - Delphi 7 中 .NETs NetworkStream / SslStream 的对应物

> ID：301246
> 
> 赞同：0
> 
> 时间：2008-11-19T07:35:45.190
> 
> 标签：.net, delphi, sockets, ssl, networkstream

我在 .NET 中编写了一个安全的 TCP 服务器。这基本上就像创建一个 TcpListener 实例并用 SslStreams 包装连接的客户端的 NetworkStreams 一样简单。

现在我需要使用 Delphi 7（或者：Delphi 2007）访问这个 TCP 服务器。

我在帮助中没有找到任何内容，并且 Google 搜索显示了许多复杂的商业包。有没有更简单的解决方案，或者我忽略的德尔福集成的东西？

如果没有，我可以使用任何简单的免费或商业软件包吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T07:39:47.100

[印](http://www.indyproject.org/index.en.aspx)地 免费。它的一个版本甚至随 Delphi 7 一起提供，尽管我建议你去下载一个更新的版本。（我链接的网页将其称为 Indy.Sockets，以将其与 Indy 扩展到的其他一些项目区分开来。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T14:09:21.493

您还可以使用[Synapse](http://synapse.ararat.cz/doku.php/download)，这也是一个易于使用的免费解决方案。它与 Indy 的不同之处在于它不使用组件，而是使用简单的阻塞函数。对于 SSL 支持，Synapse通过简单易用的包装器支持使用[OpenSSL 。](http://www.openssl.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T07:53:07.323

请参阅[带有 Delphi 的 OpenSSL](http://www.delphi3000.com/articles/article_5010.asp?SK=)。它提到了 Indy 和[DelphiWebStart](http://sourceforge.net/projects/delphiwebstart/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T07:47:26.400

[ICS](http://www.overbyte.be/eng/products/ics.html)，互联网组件套件。免费。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-12-20T09:57:53.953

Indy / ICS / Synapse 都没有内置 SSL。它们插入第三方模块，例如 OpenSSL 或我们的[SecureBlackbox](http://www.eldos.com/sbbdev/delphi-ssl.php)产品。

# unix - Unix进程正在使用的文件

> ID：301247
> 
> 赞同：15
> 
> 时间：2008-11-19T07:36:21.787
> 
> 标签：unix, command-line, solaris, pid, fuser

该**`fuser`**命令让我知道哪些进程正在使用文件或目录。

我正在寻找相反的命令：让我知道进程正在使用哪些文件。

* * *

## 更新

忘了说它是针对 Solaris 系统的。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2008-11-19T07:38:27.883

```
lsof -p <pid> 
```

从[这里](http://ph7spot.com/articles/leveraging_lsof)

> lsof 代表“<strong>列出打开的文件”。这个 shell 命令看起来很简单：它列出了 UNIX 机器上的进程打开的文件的信息。
> 
> 尽管 lsof （表面上的）使命宣言不大，但它实际上是最强大和最有用的 UNIX 命令之一。它的原始力量来自 UNIX 的设计原则之一，通常被描述为“在 UNIX 中一切都是文件”。这意味着打开文件的 lsof 概念不仅涵盖常规文件，还包括以下内容：

*   目录
*   流或网络文件（例如，Internet 或 UNIX 域套接字和 NFS 文件）
*   本机库（例如，链接到进程的 .soor .dylibdynamic 库）
*   块和字符特殊文件（例如，磁盘卷、外部硬盘驱动器、控制台或鼠标）
*   管道

* * *

**等等，我在我的系统上找不到 lsof！**

> lsof 是一个非常受欢迎的工具，它已被移植到几乎所有的 UNIX 方言（Linux、Mac OS X、BSD、Solaris 等）中。如果它在您的盒子上不可用，请使用您通常的包管理系统来安装它。[您可以在Sun Freeware](http://www.sunfreeware.com/programlistsparc10.html#lsof)上找到适用于 Solaris 的 lsof 软件包。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-24T18:02:11.867

虽然我不会嫉妒任何学习 Dtrace 或获得安装软件经验的人，但在 Solaris 中有**一个**命令可以查看进程打开的文件：/usr/bin/pfiles

```
% tail -f /etc/motd &
[1] 6033

% pfiles 6033
6033:   tail -f /etc/motd

      Current rlimit: 256 file descriptors
       0: S_IFREG mode:0644 dev:182,65538 ino:163065 uid:0 gid:3 size:54
          O_RDONLY|O_LARGEFILE
          /etc/motd
       1: S_IFCHR mode:0620 dev:299,0 ino:718837882 uid:101 gid:7 rdev:24,3
          O_RDWR|O_NOCTTY|O_LARGEFILE
          /dev/pts/3
       2: S_IFCHR mode:0620 dev:299,0 ino:718837882 uid:101 gid:7 rdev:24,3
          O_RDWR|O_NOCTTY|O_LARGEFILE
          /dev/pts/3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-16T19:40:47.637

1.  您可以使用**ls**命令和**grep**找出 chrome 使用的文件

**$ ls -l /proc/*/fd | grep“铬”**

lrwx------ 1 ba abc 64 Jul 16 22:19 104 -> /home/abc/.config/google-chrome/Default/Cookies

lr-x------ 1 abc abc 64 Jul 16 22:19 113 -> /opt/google/chrome/nacl_irt_x86_64.nexe

lrwx------ 1 abc abc 64 Jul 16 22:19 121 -> /home/abc/.cache/google-chrome/Default/Cache/data_0

lrwx------ 1 abc abc 64 Jul 16 22:19 122 -> /home/abc/.cache/google-chrome/Default/Cache/data_1

lrwx------ 1 abc abc 64 Jul 16 22:19 123 -> /home/abc/.cache/google-chrome/Default/Cache/data_2

lr-x------ 1 abc abc 64 Jul 16 22:19 125 -> /home/abc/.config/google-chrome/Dictionaries/en-US-3-0.bdic

**使用lsof**和**grep**查找结果的另一个命令

 ****$ lsof | grep“铬”**

铬 2204 abc cwd DIR 8,5 4096 1441794 /home/abc

铬 2204 abc rtd DIR 8,5 4096 2 /

铬 2204 abc txt REG 8,5 87345336 5111885 /opt/google/chrome/chrome

chrome 2204 abc mem REG 8,5 4202496 1443927 /home/abc/.cache/google-chrome/Default/Media Cache/data_3

chrome 2204 abc mem REG 8,5 1056768 1443926 /home/abc/.cache/google-chrome/Default/Media Cache/data_2

chrome 2204 abc mem REG 8,5 270336 1443925 /home/abc/.cache/google-chrome/Default/Media Cache/data_1

chrome 2204 abc mem REG 8,5 45056 1443924 /home/abc/.cache/google-chrome/Default/Media Cache/data_0

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-19T07:55:37.507

您可以从[http://www.sunfreeware.com/programlistsparc10.html#lsof获取 lsof](http://www.sunfreeware.com/programlistsparc10.html#lsof)

您也可以尝试 pfile：

[http://docs.oracle.com/cd/E23823_01/html/816-5165/pfiles-1.html#scrolltoc](http://docs.oracle.com/cd/E23823_01/html/816-5165/pfiles-1.html#scrolltoc)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-19T08:03:01.187

这是**[dtrace](http://www.sun.com/bigadmin/content/dtrace/)**的经典应用程序。

我不记得确切的语法，但是每次系统上的任何进程打开文件时，您都可以触发跟踪。它可以在一个正在运行的系统上完成，而不会像我预期的那样有任何开销。如果您以管理员身份运行 solaris，dtrace 是您最好的朋友。即使你不是程序员，它也非常简单易学，是一个非常强大的系统查询工具。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-19T08:47:02.753

在某些 unix 系统下，（IE：Linux），一个进程打开的所有文件都有一个 FD id。

这些可以在下面看到

/proc/$PID/fd

```
ls -la /proc/2055/fd 
total 0
dr-x------ 2 kent kent  0 Nov 19 21:44 .
dr-xr-xr-x 7 kent kent  0 Nov 19 21:42 ..
lr-x------ 1 kent kent 64 Nov 19 21:44 0 -> /dev/null
l-wx------ 1 kent kent 64 Nov 19 21:44 1 -> /home/kent/.xsession-errors
lrwx------ 1 kent kent 64 Nov 19 21:44 10 -> socket:[3977613]
lrwx------ 1 kent kent 64 Nov 19 21:44 11 -> /home/kent/.googleearth/Cache/dbCache.dat
lrwx------ 1 kent kent 64 Nov 19 21:44 12 -> /home/kent/.googleearth/Cache/dbCache.dat.index
lrwx------ 1 kent kent 64 Nov 19 21:44 13 -> socket:[3978765]
lrwx------ 1 kent kent 64 Nov 19 21:44 14 -> socket:[3978763]
lrwx------ 1 kent kent 64 Nov 19 21:44 15 -> socket:[3978766]
lrwx------ 1 kent kent 64 Nov 19 21:44 17 -> socket:[3978764]
l-wx------ 1 kent kent 64 Nov 19 21:44 2 -> /home/kent/.xsession-errors
lr-x------ 1 kent kent 64 Nov 19 21:44 3 -> pipe:[3977583]
l-wx------ 1 kent kent 64 Nov 19 21:44 4 -> pipe:[3977583]
lr-x------ 1 kent kent 64 Nov 19 21:44 5 -> pipe:[3977584]
l-wx------ 1 kent kent 64 Nov 19 21:44 6 -> pipe:[3977584]
lr-x------ 1 kent kent 64 Nov 19 21:44 7 -> pipe:[3977587]
l-wx------ 1 kent kent 64 Nov 19 21:44 8 -> pipe:[3977587]
lrwx------ 1 kent kent 64 Nov 19 21:44 9 -> socket:[3977588] 
```

此外，有时您甚至会得到“FDINFO”（我认为这是 linux 上的内核标志）

```
cat /proc/2055/fdinfo/11 
pos:    232741818
flags:  02 
```

# asp.net - 支持 Ajax 的 ASP.NET 第三方控件

> ID：301250
> 
> 赞同：2
> 
> 时间：2008-11-19T07:37:11.817
> 
> 标签：asp.net, asp.net-ajax

我们是一家即将成立的公司，所以我们不能购买两个三个第三方控件并自己找出最好的一个。（更好的解决方案之一）我们有预算只买一个。因此，我们想根据您的经验了解哪种第三方控件最适合在 ASP.NET 中使用。

而且我肯定已经在这里看到了一个问题。

[https://stackoverflow.com/questions/215993/best-3rd-party-aspnet-grid-control](https://stackoverflow.com/questions/215993/best-3rd-party-aspnet-grid-control)

仍然问这个，因为

1.  不仅想知道网格，我还想知道整套。
2.  没有看到很多答案。

所以请给我们一些关于如何进行的建议。我们的要求是

1.  无缺陷工作
2.  速度
3.  良好的文档
4.  优秀的支持团队

还有第三方ListView吗？

问候，

纳文

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-19T07:45:38.400

对于所有这些要求，只有两家公司可供选择：[Telerik](http://www.telerik.com/)和[DevExpress](http://www.devexpress.com/)。两者都有出色的支持和令人难以置信的 ASP.NET 产品。它们经常发布，并且以不断添加新控件而闻名。大约一年前，我不得不在两者之间做出决定，并选择了 DevExpress，因为它包含了生产力工具。

我看到这两家公司与 Infragistics 等更大的竞争对手之间的区别在于，它们致力于制造质量最好、性能最好的产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T07:56:11.263

我们使用 Telerik。整体体验很好。对我们来说，主要的陷阱是页面大小。例如，包含 50 个项目的单个组合框可能会生成 40kb 的 HTML！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T14:29:14.573

We've been using Telerik for some time now in my company. I believe we've renewed our subscription for the third time this year, and they just keep getting better and better! Their support is fantastics also!

I haven't used any DevExpress ASP.NET controls so I can't compare.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T07:52:28.260

我会将 Componentone 添加到制造出色组件的优秀公司列表中。查看他们的工作室以获取 Asp.Net 包。充满了漂亮的组件。他们中的大多数使用 Ajax。您可以在他们的主页上查看所有组件的示例，您可以在购买前下载并试用。

许可证是基于开发人员的，您无需为 redist 支付任何费用。他们有很好的支持和大量的示例和代码，因此很容易使用这些组件。

www.componentone.com

[http://componentone.com/SuperProducts/StudioASPNET/](http://componentone.com/SuperProducts/StudioASPNET/)

# ruby - 使用 ruby 将存储为有符号的无符号整数转换回原始值

> ID：301259
> 
> 赞同：2
> 
> 时间：2008-11-19T07:42:56.783
> 
> 标签：ruby, postgresql, unsigned, signed

一个 C 程序将它认为是 64 位无符号整数放入 Postgres 数据库中类型为 int8 的列中。对于 Postgres，int8 始终是 'signed int8'（没有像 'unsigned int8' 这样的东西）。因此，我的 Ruby 程序在该空间的上半部分显示从 Postgres 检索到的数字为负数。

在 Ruby 中，获取 -ve 整数并将其转换为 C 程序员想要的 64 位*无符号整数的正确方法是什么？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-19T07:48:42.450

我不确定 Ruby 的细节，但如果数字是负数，基本上你需要添加 2^64。这是假设数字存储为 2 的补码，几乎可以肯定。

仅供参考，2的补码系统，本质上它将（例如）32位数字视为数字模2 ^ 32。这意味着 -1 与 2^32 - 1 或 0xFFFFFFFF 相同。事实证明，这在硬件级别上使用起来非常简单。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-19T07:56:38.267

这可能有效：

```
x += 0x1_0000_0000_0000_0000 if x < 0 
```

巨大的常数是 2 到第 64 位，作为一个正常的文字。我添加了下划线，以便更容易验证该数字确实是一个后跟 64 位零的数字。与往常一样，每个十六进制数字代表四位。下划线是标准的 Ruby 语法。

# c++ - 如何在 mfc CListCtrl 中实现简单的复制/粘贴功能？

> ID：301279
> 
> 赞同：1
> 
> 时间：2008-11-19T07:59:33.580
> 
> 标签：c++, windows, mfc

这真的是最简单的方法吗？

[http://simplesamples.info/MFC/Clipboard.php](http://simplesamples.info/MFC/Clipboard.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T08:06:00.153

您的列表是来源还是目的地？您是否需要复制/粘贴到 Excel 等其他内容？你期待一些特定的格式吗？这一切都取决于。

**编辑**：如果您将内容移至简单的文本，您的链接看起来不错。请参阅[剪贴板：](http://msdn.microsoft.com/en-us/library/80db3kax.aspx)也使用 Windows 剪贴板。

# java - Netbeans 和外部配置文件

> ID：301283
> 
> 赞同：9
> 
> 时间：2008-11-19T08:06:03.663
> 
> 标签：java, netbeans, external, resources

我正在开发一个 Java 桌面应用程序，并希望有一个外部 configuration.xml。
我正在使用 Netbeans 开发应用程序，并尝试在 dist 目录中添加 configuration.xml 文件，以便它驻留在应用程序工作文件夹中。但是当 Netbeans 执行它的 clean 操作时，它会删除 dist 目录，
我应该把这个 configuration.xml 文件放在哪里，这样它就不会被删除，并且会存在于应用程序启动目录中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-19T09:43:32.107

您可以将其添加到您的 build.xml ：

```
<target name="-post-jar">
   <copy todir="${dist.jar.dir}">
       <fileset dir="resources" includes="**"/>
   </copy>        
</target> 
```

您现在可以将您的 configuration.xml 文件放在项目中的文件夹“resources”（您需要创建）中，并且其中的所有文件都将在构建过程中复制到 dist 文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-09-08T16:19:28.087

我能够让它工作，但是如果没有在主构建配置中明确输入它作为依赖项，我就无法触发 -post-jar。这是用于富客户端项目的 Netbeans 7.0.1。

相反，在我想要拥有外部资源文件（主要是用户以后可能编辑的 .txt 文件）的 Netbeans 模块的 build.xml 中，我输入了以下内容：

```
 <target name="netbeans-extra">
      <echo>Copying resources files to build cluster directory...</echo>
      <mkdir dir="${cluster}/resources"/>
      <copy todir="${cluster}/resources">
        <fileset dir="resources" includes="**"/>
      </copy>
    </target> 
```

然后，我在模块的顶层目录（紧挨着 src、release、build 旁边）创建一个名为“resources”的新目录，并将我的 .txt 文件放在那里。

当您在此模块上进行构建时，netbeans-extra 将作为依赖项调用，并在主项目构建/集群目录中创建一个“资源”文件夹，然后将项目资源目录的内容复制到那里.

Ultimately, when you build a distribution for your project, you'll find the resource directory placed right next to your projects modules directory, making for a nice and neat side by side arrangement.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T07:49:52.150

Correct code...

```
<target name="-pre-jar">
    <echo>Copying resources files to build directory...</echo>
    <mkdir dir="${dist.jar.dir}/resources"/>
    <copy todir="${dist.jar.dir}/resources">
        <fileset dir="resources" includes="**"/>
    </copy>
</target> 
```

Add this in the main build.xml (not nbproject\build-impl.xml). You may also replace "-pre-jar" with "-post-jar"

# php - html的脚本标签中带有扩展名php的脚本会被缓存吗？

> ID：301284
> 
> 赞同：0
> 
> 时间：2008-11-19T08:12:03.930
> 
> 标签：php, javascript, html, browser

我有下面的代码示例。

```
<script type="text/javascript" src="assets/scripts/somescript.php">. 
</script> 
```

那么，我的浏览器是否仍会通过不将此脚本标头元标记缓存设置为必须重新验证来缓存它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T08:33:39.363

一些浏览器在默认缓存方面比其他浏览器更具侵略性。但是，您可以发送缓存控制标头来指示何时重新加载代码。

```
header("Expires: " . date("r", time() + ( 60 * 60 * 24 * 7 * 1 ) ) ); // Expires in 1 week
header("Content-Type: application/x-javascript"); 
```

是我已知使用的代码片段。

您可以使用更多花哨的东西，例如 If-Not-Modified 标头和 ETag，但只有过期时间才能消除额外的服务器调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T08:22:01.367

如果您发送一个`Content-type: text/javascript; charset="your_charset"`，浏览器会将您的 PHP 脚本识别为有效的 Javascript 资源，并将像处理任何其他 Javascript 一样处理它。您可以通过在 PHP 脚本中使用正确的标头来控制浏览器缓存行为[`header()`](http://de.php.net/manual/en/function.header.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T11:03:21.777

一个技巧是用不断变化的查询字符串写出你的脚本标签。您的主要 PHP 可以写出以下内容，这些内容每天都在变化：

```
<script type="text/javascript" src="assets/scripts/somescript.php?date=20081118"></script> 
```

somescript.php 将忽略查询字符串，但浏览器每次都会将该 URL 视为一个新 URL，并重新加载脚本。

# visual-studio-2008 - OLAP 多维数据集：Analysis Services 2005 和 2008 之间的兼容性

> ID：301289
> 
> 赞同：1
> 
> 时间：2008-11-19T08:13:44.880
> 
> 标签：visual-studio-2008, visual-studio-2005, ssas, olap

我正在使用 Analysis Services，但遇到了兼容性问题。这是我的情况。我有3台机器：

*   Server2005：这台机器有 SQL Server、Analysis Services 和 Visual Studio，都是 2005 版本。
*   Client2008：这台机器有 Visual Studio 2008。
*   Client2005：这台机器有 Visual Studio 2005

我想做的事：

*   开发在 Client2008 上工作并在 Server2005 上部署的多维数据集。

问题：

*   我可以读取数据并部署多维数据集。但是，当我尝试“处理”一个多维数据集时，我收到一条错误消息：高级关系引擎中的错误。无法与 DataSourceID 为“xxxxx”、名称为“xxxxx”的数据源建立连接。模拟信息设置为“使用服务帐户”。我不知道为什么我可以使用连接来读取数据，我可以部署多维数据集（在 Server2005 中创建了一个新的 AnalysisServices db）但我无法处理数据。

有效的测试：

*   我可以使用 SQL Server 2008 在 Client2008 上本地部署和处理多维数据集。
*   我可以在 Server2005 上本地部署和处理多维数据集。
*   我可以从 Client2005 在 Server2005 上部署和处理多维数据集。
*   最奇怪的是：我使用 Client2005 开发了一个立方体。我将可视化项目复制到 Client2008 并更新项目以将其与 VS2008 一起使用，并且......它可以工作！但是，如果我从一开始就用 VS2008 开发完全相同的多维数据集，我会得到上一个错误。我比较了用 VS2005 和 VS2008 生成的 .ds 文件，并没有发现任何显着差异。

我一无所知。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T15:43:37.327

模拟设置略有变化。最好的解决方案是确保您的 SQL Server 数据库授予 Analysis Services 服务帐户读取权限。

您可能还需要更改数据源连接模拟信息：

![数据源 > 模拟信息选项卡](https://farm4.static.flickr.com/3055/3047537407_cfcef465c9.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-28T20:00:33.407

当我谈到授予服务帐户读取权限时，我的意思是 Analysis Services 服务以与您不同的身份运行，因此即使您可以读取服务不能读取的数据。

它将是 SYSTEM、NETWORK SERVICE 或特定用户帐户 - 在运行提示符下键入 services.msc 以获取服务列表...

您需要为此帐户授予对您的 SQL 数据库的相关读取权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-06-30T23:15:31.937

您的数据源使用哪个提供商？

如果要在 SQL Server 2005 上部署，则需要确保提供程序是“SQLNCLI.1”而不是“SQLNCLI10.1”。

在您的分析项目中，双击数据源并单击连接字符串下方的“编辑”。顶部有一个下拉列表，您可以在其中选择正确的提供商。您需要在 Client2008 上安装 SQL Server Native Client 9.0（[在此处](http://www.microsoft.com/downloads/details.aspx?FamilyID=536fd7d5-013f-49bc-9fc7-77dede4bb075&displaylang=en)下载，查找“Microsoft SQL Server Native Client”）。

或者，如果您在 2005 服务器上安装 SQL Server Native Client 10.0，它应该可以工作（[在此处](http://www.microsoft.com/downloads/details.aspx?FamilyID=CEB4346F-657F-4D28-83F5-AAE0C5C83D52&%3bdisplaylang=de&displaylang=en)下载，查找“Microsoft® SQL Server® 2008 R2 Native Client”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-28T19:49:42.810

同样的问题......看起来在VS2008中构建的项目无法部署到SQL Server Analysis Services 2005......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-19T21:53:39.213

我们遇到了同样的问题，只是将 SQL Native 10.0 数据源替换为 OLEDB SQL Server 数据源。

佩德罗·戈麦斯。

祝你好运

# .net - 如何提高进程的 I/O 优先级？

> ID：301290
> 
> 赞同：14
> 
> 时间：2008-11-19T08:15:01.677
> 
> 标签：.net, file-io, windows-vista

我想增加进程的 I/O 优先级。.NET 和 Windows Vista 的答案都很好。processexplorer 也可以。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-11-19T08:48:58.193

与通常的 MS 文档相比，相关信息似乎有点分散。有这篇白皮书讨论[了 windows 中的 I/O 优先级](http://www.google.co.nz/url?sa=t&source=web&ct=res&cd=2&url=http%3A%2F%2Fdownload.microsoft.com%2Fdownload%2Fa%2Ff%2F7%2Faf7777e5-7dcd-4800-8a0a-b18336565f5b%2FPriorityio.doc&ei=6s8jSem3NqGksQOL1c3uDg&usg=AFQjCNHvihuifDRqFplOHe7Z1NY0ufmnDw&sig2=lL48ZkwbbP9KnqXn562XaQ)。这个文档似乎到处都是 beta 标志，但我想它可能非常准确。

需要注意的两个重要事项：

1.  您只能将 IO 请求的优先级降低到正常以下。
2.  驱动程序可以忽略任何此类请求并将其视为正常。

对客户端应用程序有用的 API 是[SetFileInformationByHandle](http://msdn.microsoft.com/en-us/library/aa365539(VS.85).aspx)：

```
FILE_IO_PRIORITY_HINT_INFO priorityHint;
priorityHint.PriorityHint = IoPriorityHintLow;
result = SetFileInformationByHandle( hFile,
                                     FileIoPriorityHintInfo,
                                     &priorityHint,
                                     sizeof(PriorityHint)); 
```

[设置优先级](http://msdn.microsoft.com/en-us/library/ms686219(VS.85).aspx)：

```
// reduce CPU, page and IO priority for the whole process
result = SetPriorityClass( GetCurrentProcess(),
                           PROCESS_MODE_BACKGROUND_BEGIN);
// do stuff
result = SetPriorityClass( GetCurrentProcess(),
                           PROCESS_MODE_BACKGROUND_END); 
```

[SetThreadPriority](http://msdn.microsoft.com/en-us/library/ms686277(VS.85).aspx)类似：

```
// reduce CPU, page and IO priority for the current thread
SetThreadPriority(GetCurrentThread(), THREAD_MODE_BACKGROUND_BEGIN);
// do stuff
SetThreadPriority(GetCurrentThread(), THREAD_MODE_BACKGROUND_END); 
```

[SetFileBandwithReservation](http://msdn.microsoft.com/en-us/library/aa365537(VS.85).aspx)：

```
// reserve bandwidth of 200 bytes/sec
result = SetFileBandwidthReservation( hFile,
                                  1000,
                                  200,
                                  FALSE,
                                  &transferSize,
                                  &outstandingRequests ); 
```

对于 .Net，使用 P/Invoke 做通常的事情。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2010-06-16T22:37:32.267

看起来设置进程的 IO 优先级的“真实”方法是`NtSetInformationProcess`与`ProcessIoPriority`信息类一起使用。不幸的是，这个 API 没有记录，但你可以通过将调试器附加到 taskeng.exe 并插入`ExeTask::GetYourPrioritiesStraight`.

我相信`PROCESS_INFORMATION_CLASS`值`ProcessIoPriority`是33（0x21），优先级值如下：

```
Very Low: 0
Low: 1
Normal: 2
High: 3 or above? 
```

上面的值是根据我从调试器中得知的最佳猜测；任务调度程序似乎对优先级为 7 的任务使用值 1，对优先级为 5 的任务使用值 2（有关任务调度程序优先级的更多信息，请参阅[此问题](https://stackoverflow.com/questions/2427142/is-there-anyway-for-a-win2k8-scheduled-task-to-have-normal-priority-io)和[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa383512(VS.85).aspx)）。调用`SetPriorityClass`with`PROCESS_MODE_BACKGROUND_BEGIN`使用值 0。

`SetPriorityClass`不幸的是，除了@1800 INFORMATION 的答案中将优先级设置为非常低的方法之外，我还没有找到任何可用于此的公共 API 。

编辑：我编写了一个实用程序，可用于查询或设置进程的 IO 优先级，[可在此处获得](http://blog.misterfoo.com/2010/07/process-priority-utility.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-03-27T19:14:48.303

正确的方法是使用**PROCESS_BACKGROUND_MODE_BEGIN调用****SetProcessPriorityClass**来启动后台模式。这会导致非常低（后台）I/O 优先级和空闲 CPU 优先级。完成后，再次调用 SetProcessPriorityClass，提供**PROCESS_BACKGROUND_MODE_END**。同样可以通过**SetThreadPriority**和 THREAD_BACKGROUND_MODE_BEGIN/END 在线程级别完成。

 ******如果要直接设置 I/O 优先级，独立于 CPU 优先级，则必须使用 NT 原生 API。我[在此处](http://www.bitsum.com/pl_io_priority.php)记录了它，但没有包含代码示例，因为我们都知道它们会被逐字删除。

您想要的 API 是 NT Native API **NtSetInformationProcess**。使用此 API，您可以更改 I/O 优先级。此 API 接受一个“类”变量，告诉它您要更改的进程信息类型，该类变量必须设置为 ProcessIoPriority。然后您可以通过这种方式设置整个进程的 I/O 优先级。

同样，可以通过**NtQueryInformationProcess**检索 I/O 优先级。

坏消息是优先级有点受限。关键是为系统分页操作保留的。剩下的就是“**正常**”和**“非常低”**（背景）。低和高可能会或可能不会在较新版本的 Windows 中实现。至少似乎有部分支持。

如果您没有使用 NT Native API 的经验，首先要做的是了解它们。完成后，您会发现它与单个 API 调用一样简单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-03-17T03:49:57.363

只是对此的更新 - 这一切都可以通过 .NET 完成，而无需借助 WinAPI ...

```
// Set the current process to run at 'High' Priority
System.Diagnostics.Process process = System.Diagnostics.Process.GetCurrentProcess();
process.PriorityClass = System.Diagnostics.ProcessPriorityClass.High;

// Set the current thread to run at 'Highest' Priority
Thread thread = System.Threading.Thread.CurrentThread;
thread.Priority = ThreadPriority.Highest; 
```

我已经尝试在 WPF 应用程序中设置进程优先级，它工作正常。不需要设置线程优先级。

编辑：这与进程的 CPU 优先级有关，而不是 I/O 优先级，但是进程的 CPU 优先级与其 I/O 优先级之间可能存在一些相关性/联系。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-03T15:23:57.963

调用时请务必`FILE_IO_PRIORITY_HINT_INFO`正确对齐结构`SetFileInformationByHandle`。

否则，您将收到`ERROR_NOACCESS`（错误 998，0x000003E6）。

```
_declspec(align(8)) FILE_IO_PRIORITY_HINT_INFO priorityHint;
priorityHint.PriorityHint = IoPriorityHintLow;

BOOL ret = SetFileInformationByHandle(hFile, FileIoPriorityHintInfo, &priorityHint, sizeof(FILE_IO_PRIORITY_HINT_INFO));
DWORD err = GetLastError(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-19T19:00:03.980

如果您希望您的应用程序正在处理的文件具有关键 I/O 优先级，我相信将文件重命名为 .mp3 会为您提供帮助！Windows 对 .mp3、.mp4 等媒体文件执行此操作。可以使用“磁盘”选项卡中的 Process Hacker 进行观察，只要有任何内容读取 mp3，您就会看到它们都处于关键 I/O 中。我还没有找到任何关于此的文档，可能有注册表设置？

编辑：这是在 Win 7 上，我只是在 Win 10 上尝试过，但情况不一样，我看到它曾一度达到高优先级，但通常是正常的，但从不严重。在写这篇文章时，我尝试了一个 Win 7 VM，但它也没有在那里做！我不知道为什么我的主要 Win 7 会怀疑是否有第三方，但是什么？有人知道吗？

# .net - RSA 私钥是否始终包含公钥，还是只是 .NET？

> ID：301302
> 
> 赞同：4
> 
> 时间：2008-11-19T08:25:52.453
> 
> 标签：.net, key, private, public, rsacryptoserviceprovider

我在 .NET 2 中使用 RSACryptoServiceProvider，似乎公钥/私钥对的 Private 部分也总是包含 Public 部分。

我需要使用我的公钥加密一些信息，并允许对方只解密我加密的内容。我不希望他们知道我是如何加密我的信息的。在 .NET 中使用 RSACryptoServiceProvider 是否可行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-19T08:32:03.860

私钥始终包含公钥。

您可能真正想要的是签名。使用相同的 .NET 类，您可以使用您的私钥对数据进行签名，并使用公钥（显然不包含私钥）验证对方的签名。

```
 public static string Sign(string data, string privateAndPublicKey)
    {
        byte[] dataBytes = Encoding.UTF8.GetBytes(data);
        RSACryptoServiceProvider provider = CreateProviderFromKey(privateAndPublicKey);
        byte[] signatureBytes = provider.SignData(dataBytes, "SHA1");
        return Convert.ToBase64String(signatureBytes);
    }

    public static bool Verify(string data, string signature, string publicKey)
    {
        byte[] dataBytes = Encoding.UTF8.GetBytes(data);
        byte[] signatureBytes = Convert.FromBase64String(signature);
        RSACryptoServiceProvider provider = CreateProviderFromKey(publicKey);
        return provider.VerifyData(dataBytes, "SHA1", signatureBytes);
    }

    private static RSACryptoServiceProvider CreateProviderFromKey(string key)
    {
        RSACryptoServiceProvider provider = new RSACryptoServiceProvider();
        provider.FromXmlString(key);
        return provider;
    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-11-19T08:40:11.613

**如何使用：**

**对方的公钥**：

如果您想加密只有对方（并且没有其他人）可以解密的东西，您必须使用他们的公钥（而不是您的密钥）对其进行加密。

如果您从对方那里得到签名，您可以使用对方的公钥验证签名是否正确（而不是由其他人创建）。

**您自己的私钥**：

如果您想对某些内容进行签名以便每个人都可以验证您创建了内容，您可以使用自己的私钥对其进行签名。您的公钥将用于验证它。内容根本没有加密（除非您单独加密）。

如果有人向您发送使用您的公钥加密的消息（以便只有您可以阅读），您可以使用您的私钥对其进行解密。

**您自己的公钥**：

您不使用自己的公钥。对方使用它来验证您的签名，并为您的眼睛加密消息。

**对方的私钥**：

你没有那个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-19T08:39:11.067

使用私钥/公钥的数据加密不是这样工作的。您必须使用其他**人的公钥**，以便他/她可以通过他/她的私钥解密它。

尽管如此，这确实很慢，因此实际上用于加密消息的是在会话时生成的对称密钥。对称密钥是通过另一端的公钥加密的（比整个消息少得多的数据），然后附加到加密的消息中。例如 SSL 就是这样工作的。

# c# - Vista上的MDI子窗体最大化问题

> ID：301305
> 
> 赞同：1
> 
> 时间：2008-11-19T08:26:50.080
> 
> 标签：c#, winforms, windows-vista

我在使用 Visual Studio 2005 (C#) 编写的 Winforms 应用程序时遇到问题。它有一个 MDI 主窗体和一个最大化的 mdi 子窗体。在 Windows XP 中，子窗体可以通过 MDI 父窗体完美地调整大小和最大化。

使用 Windows Vista（企业和商业）调整大小效果很好，但是当您最大化 MDI 窗体时，子窗体并没有完全最大化。右侧大约有 8 个像素的间隙。子窗体仍然像最大化一样执行，只是看起来不太好。如果您手动拉伸表格以填充桌面，它看起来很好 - 只有当 MDI 设置为最大化时才会出现间隙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-14T02:10:54.697

这是一个尚未修复的已知问题（我在 Windows Server 2008 上也有）。

您可以在 MSDN 论坛上的此线程中找到更多信息和可能的修复：
[Problem with minimized MDI child window](http://social.msdn.microsoft.com/forums/en-US/windowsuidevelopment/thread/d6cb9184-826e-466d-9f48-7ee4e316ac58/)

# java - JDBC 内置函数和预处理语句

> ID：301312
> 
> 赞同：1
> 
> 时间：2008-11-19T08:31:53.517
> 
> 标签：java, jdbc

有没有办法使用 PreparedStatement 执行查询（包含内置的 DB 函数）？

示例：插入 foo (location) 值 (pointfromtext('12.56666 13.67777',4130)) 这里 pointfromtext 是一个内置函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T08:33:33.013

当然，这应该有效。

如果不是，您的数据库系统是什么，您可以从 SQL 命令行运行完全相同的命令吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T15:54:11.940

据我所见，pointfromtext 函数的第一个参数是一个字符串，第二个参数是一个数字。因此，请尝试以下操作：

```
PreparedStatement preparedStatement = getConnection().prepareStatement("insert into map_address (location) values(pointfromtext('POINT(' || ? || ' ' || ? || ')',4130))");
preparedStatement.setString(1, "12.56565665");
preparedStatement.setString(2, "12.57565757");
preparedStatement.executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T10:24:13.587

问号没有被正确评估，因为它们位于简单的引号之间。删除它们，它应该工作，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T09:18:42.157

PreparedStatement 对象的范围正是执行查询。如果查询包含内置的 DB 函数是可以的，并且如果相同的查询在 PreparedStatement 之外工作，一切都应该工作。

正如 Thilo 所说，从 SQL 命令行或您通常使用的 SQL 图形工具测试您的查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T09:23:29.963

您是否在此代码之后放置了**connection.commit() ？**

代码应该是：

```
 PreparedStatement bar = connection.prepareStatement("insert into foo (location) values (pointfromtext('? ?',4130)))");
 bar.setDouble(1, 13.67777);
 bar.setDouble(2, 13.67777); 
 bar.executeUpdate();
 connection.commit(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-19T10:22:48.003

您是否尝试在preparedStatement 中不设置双打？只是为了测试，您应该尝试将此参数直接插入到字符串中，例如：

```
String sql = "insert into map_address (location) values(pointfromtext('POINT(" +  "12.56565665" + " " + "12.57565757" + ")',4130))"

PreparedStatement preparedStatement = getConnection().prepareStatement(sql); 
```

然后尝试执行更新。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-19T11:28:11.290

也许您发现 Postgresql JDBC 驱动程序存在问题，而不是 JDBC 本身。通常，您想要实现的目标与 JDBC 一起使用。

# asp.net-mvc - XSL（类似）声明性语言作为强类型模型的 MVC 视图？

> ID：301314
> 
> 赞同：1
> 
> 时间：2008-11-19T08:32:45.900
> 
> 标签：asp.net-mvc, xslt, declarative

作为一个巨大的 XSL 粉丝，我很高兴在 ASP.NET 上使用 xsl 作为我们专有的 MVC 框架中的视图。模型中的对象在后台使用 .NET 的 xml 序列化程序进行序列化，我们使用非常原子的 xsl 模板来声明每个对象或属性应该如何转换。

例如：

```
 <xsl:template match="/Article">
    <html>
      <body>
        <div class="article">
          <xsl:apply-templates />
        </div>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="Article/Title">
    <h1>
      <xsl:apply-templates />
    </h1>
  </xsl:template>

  <xsl:template match="@*|text()">
    <xsl:copy />
  </xsl:template> 
```

这种机制允许我们快速覆盖默认匹配模板，例如在列表中的最后一项或选定的项上匹配模板等。此外，.NET 中的 xsl 扩展对象允许我们只需要一点额外的抓地力. 可以拆分和包含公共共享模板。

然而

尽管我可以忽略 xsl 的冗长缺点（因为 Visual Studio 架构智能感知 + 片段真的很光滑，对 VS 团队的赞美），但模型中没有对强类型对象进行智能感知的缺点确实让我很烦恼。

我已经看到了 ASP.NET MVC + 用户控件的实际应用，并且真的开始喜欢它，但我想知道；

有没有一种方法可以在我们正在迭代的 XML 上获得某种智能感知，或者您是否知道一种提供 XSL 的自由和声明性但具有 webforms/usercontrols/asp.net 的强类型/智能感知优势的语言.mvc 视图？

（我可能知道答案：“不”，我很快就会发现自己在使用 Phil Haack 非常酷的 mvc shizzle ......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-21T04:01:48.803

**您可以使用对象的序列化 (xml) 形式并使用 VS 的 XML 编辑器进行编辑**（我使用 VS2008）。

然后将一个 xsd 模式关联到这个 xml 文档。使用 xsd,exe 自己生成的模式以及它在序列化/反序列化中使用的模式。

**您将看到您免费获得智能感知**！

此外，如果您编辑架构并添加

```
    <xs:注解>
      <xs:文档>
        有用的解释。
      </xs:文档>
    </xs:注解>

```

**那么 XML 编辑器不仅会提示**您可能的元素或属性名称和值，**而且还会**为每个将注释数据输入 xml 模式的元素或属性弹出“有用的说明”。

要了解如何将 xml 架构与 xml 文档相关联，请查找 [**本地 VS2008 帮助**](http://ms-help://MS.VSCC.v90/MS.MSDNQTR.v90.en/wd_xmleditor/html/d6fda3ef-d465-4788-8514-2f2d528d658c.htm)或[**在线 MSDN 上找到它**](http://msdn.microsoft.com/en-us/library/ms255816.aspx)，或在[**此处**](http://www.danielmoth.com/Blog/2007/10/xml-schemas-dialog-in-visual-studio.html)阅读。

希望这有帮助。

干杯，

迪米特·诺瓦切夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-17T12:42:38.713

这有点离题了，但一直在使用 xsl(t) 创建 CMS 的路线上，以及导致我推荐 asp.net mvc 的痛苦，而不是智能感知。但这很好。

我最初使用 xsl 将视图与数据分开，它确实做到了。但设计师发现这很困难，主要是因为对他们来说这一切看起来都像 html。更多尖括号等。我一直在进行对话，“但是为什么我不能有一个包含*所有内容*的文档”

Xsl 也很慢，而且非常消耗内存。内存不足错误是令人尴尬的，当你得到它们的时候已经很晚了。当然，缓存只会使用更多内存。

自从我们使用 MVC 以来，真的没有回头路，如果您真的很喜欢冒险，甚至可以选择创建自己的视图引擎。所以你可以在你觉得需要的地方保留一点 xsl。

事实上，在[MVCContrib](http://www.codeplex.com/MVCContrib)库中已经有一个基于该项目的项目。

希望这有助于您的决定

# apache - SSL 大于 40 位的电子商务应用程序的系统要求

> ID：301317
> 
> 赞同：0
> 
> 时间：2008-11-19T08:36:07.313
> 
> 标签：apache, tomcat, ssl, hardware, requirements

我需要定义使用 SSL（超过 40 位）构建电子商务 Web 应用程序的系统要求硬件和软件。我没有使用 SSL 的经验，所以我不知道如何配置或我需要什么 apache 版本。这是我的想法：

**操作系统 Linux**
Web 服务器：Apache
DBMS：MySQL 5.0 或更高版本
应用服务器：Tomcat 5.5 或更高版本
Java 1.5 或更高 版本

**内存：576 MB**
磁盘空间：10 GB
数据传输限额：75GB
双核 AMD Opteron(tm) 处理器 270

有谁知道我需要哪个 Apache/Tomcat 版本来支持 SSL（超过 40 位）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-19T09:26:58.287

所有版本都支持`40 bit`SSL。40 位更广为人知的是伪造加密。

# assembly - 在装配应用程序中修改内存

> ID：301327
> 
> 赞同：1
> 
> 时间：2008-11-19T08:41:06.790
> 
> 标签：assembly, x86-16

我正在从“x86 汇编的艺术”一书中学习汇编语言，我有一个问题我想不出答案。

程序是这样的：

> “在本练习中，您将启动一个运行程序，该程序检查和操作内存中的值。然后您将切换到内存屏幕并修改内存中的值（也就是说，您将在程序继续运行时直接访问内存）。
> 
> 程序首先将内存位置 1000h 设置为零，然后循环直到满足两个条件之一 - 用户切换 FFF0 开关或用户更改内存位置 1000h 中的值。切换 FFF0 开关会终止程序。
> 
> 更改内存位置 1000h 中的值会将控制权转移到将 n 个字相加的程序部分，其中 n 是内存位置 1000h 中的新值。”

在对这些值求和后，它使用“put”打印它们的总和

我有这个代码：

```
d:  mov cx,0
    mov [1000],cx

a:  mov cx,[1000]
    cmp cx,0
    jne c

    mov ax,[fff0]
    cmp ax,0
    je a
    halt

c:  mov bx,1002
    mov ax,0

b:  add ax,[bx]
    add bx,2
    sub cx,1
    cmp cx,0
    jne b

    put
    jmp d 
```

问题是当我将值 12h 放在 1000h 上时，程序会输出 2 个值、总和和数字 1。

当我单步执行程序时，它输出 1 个值（总和），但是当我运行它时，它输出 2 个值（总和和数字 1）。

有人可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-21T18:00:33.920

我解释了代码，希望它可以帮助某人：

注意：此代码不考虑多线程或中断更改寄存器。这是一个直截了当的自上而下的分析（帮助初学者，而不是“专家”）。

```
d:  mov cx,0 ; cx = 0
    mov [1000],cx ; Memory address 1000=0

a:  mov cx,[1000] ; Get from memory address 1000 to cx (cx=0)
    cmp cx,0 ; Is cx = 0?
    jne c ; If cx not 0 goto c

    mov ax,[fff0] ; ax = {whatever is at FFF0}
    cmp ax,0 ; Is ax=0?
    je a ; If ax = 0 goto a
    halt ; {STOP PROCESSOR} 

c:  mov bx,1002 ;  BX = 1002
    mov ax,0 ; AX = 0

b:  add ax,[bx] ; Add to ax WHATEVER is in MEMORY location bx
    add bx,2 ; Add 2 to bx
    sub cx,1 ; Deduct 1 from cx
    cmp cx,0 ; is cx = 0?
    jne b ; If cx is not 0 goto b

    put {what do you want to print?}  
    jmp d ; goto d (back to the top) 
```

# c# - 当文本太大时，用 WPF 中的哈希替换数字

> ID：301328
> 
> 赞同：0
> 
> 时间：2008-11-19T08:42:07.067
> 
> 标签：c#, wpf, excel

我正在寻找一种简单、惯用的方法来复制 Excel 的视觉提示，即数字太大而无法在列中显示。我有以下xaml：

```
<ListView.View>
    <GridView>
        <GridViewColumn ... />
    </GridView>
<ListView.View> 
```

我想要的是，如果列中的文本太小而无法显示（即被剪裁），我想用“#”字符替换显示的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T09:08:49.307

您可以将单元格的内容与实际数字、包含列的宽度以及`TextBlock`. 然后使用转换器相应地转换选择内容。伪 XAML：

```
<GridViewColumn.CellTemplate>
    <DataTemplate>
        <TextBlock x:Name="_textBlock">
            <TextBlock.Content>
                <MultiBinding Converter="{StaticResource MyConverter}">
                    <Binding Path="."/>
                    <Binding Path="ActualWidth" RelativeSource="{RelativeSource Ancestor, AncestorType={GridViewColumn}}"/>
                    <Binding Path="DesiredSize.Width" ElementName="_textBlock"/>
                </MultiBinding>
            </TextBlock.Content>
        </TextBlock>
    </Datatemplate>
</GridViewColumn.CellTemplate> 
```

伪代码：

```
public class MyConverter : IMultiValueConverter
{
    public object Convert(...)
    {
        object content = values[0];
        double actualWidth = (double)values[1];
        double desiredWidth = (double)values[2];

        if (desiredWidth > actualWidth)
        {
            return "######";
        }

        return content;
    }
} 
```

除此之外，您可以编写自己的`TextBlock`子类来自动执行类似的操作，然后在每个列模板中使用它。

# c++ - 确定 Type 是否是模板函数中的指针

> ID：301330
> 
> 赞同：43
> 
> 时间：2008-11-19T08:44:00.013
> 
> 标签：c++, templates

如果我有一个模板函数，例如这样：

```
template<typename T>
void func(const std::vector<T>& v) 
```

有什么方法可以在函数中确定 T 是否是指针，或者我必须为此使用另一个模板函数，即：

```
template<typename T>
void func(const std::vector<T*>& v) 
```

谢谢

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2008-11-19T08:54:53.407

实际上，模板可以通过部分模板专业化来做到这一点：

```
template<typename T>
struct is_pointer { static const bool value = false; };

template<typename T>
struct is_pointer<T*> { static const bool value = true; };

template<typename T>
void func(const std::vector<T>& v) {
    std::cout << "is it a pointer? " << is_pointer<T>::value << std::endl;
} 
```

如果在函数中你做的事情只对指针有效，你最好使用单独函数的方法，因为编译器会作为一个整体对函数进行类型检查。

但是，您应该为此使用 boost，它也包括：http: [//www.boost.org/doc/libs/1_37_0/libs/type_traits/doc/html/boost_typetraits/reference/is_pointer.html](http://www.boost.org/doc/libs/1_37_0/libs/type_traits/doc/html/boost_typetraits/reference/is_pointer.html)

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-04-12T14:41:25.920

C++ 11 内置了一个不错的小指针检查功能：`std::is_pointer<T>::value`

这将返回一个布尔`bool`值。

来自 [http://en.cppreference.com/w/cpp/types/is_pointer](http://en.cppreference.com/w/cpp/types/is_pointer)

```
#include <iostream>
#include <type_traits>

class A {};

int main() 
{
    std::cout << std::boolalpha;
    std::cout << std::is_pointer<A>::value << '\n';
    std::cout << std::is_pointer<A*>::value << '\n';
    std::cout << std::is_pointer<float>::value << '\n';
    std::cout << std::is_pointer<int>::value << '\n';
    std::cout << std::is_pointer<int*>::value << '\n';
    std::cout << std::is_pointer<int**>::value << '\n';
} 
```

# ms-access - 如何在 Access 中构建带有模块的接口？

> ID：301336
> 
> 赞同：0
> 
> 时间：2008-11-19T08:53:08.607
> 
> 标签：ms-access, interface

我在 Access vba 中编写了一些代码模块。每个代码都出于各种目的而运行，并对数据库执行各种操作。
我对vba没有太多经验。我计划构建一个“界面”或“表单”，以便用户可以选择他想要执行的操作并基于该特定代码运行。

有人可以指导我到一个教程或网站，向我展示一些关于这方面的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-19T16:21:22.367

查看 Northwind 示例数据库几乎总是一个好主意：http: [//www.microsoft.com/downloads/details.aspx? familyid=C6661372-8DBE-422B-8676-C632D66C529C&displaylang=en](http://www.microsoft.com/downloads/details.aspx?familyid=C6661372-8DBE-422B-8676-C632D66C529C&displaylang=en)

# .net - .NET MailMessage 类注入安全吗？

> ID：301339
> 
> 赞同：2
> 
> 时间：2008-11-19T08:55:06.310
> 
> 标签：.net, email

我想知道[MailMessage](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx)类是否受到[电子邮件注入](http://en.wikipedia.org/wiki/E-mail_injection)的保护。例如，我是否应该在将值传递给其构造函数之前检查它们：

```
MailMessage message = new MailMessage(fromTextBox.Text, toTextBox.Text); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-16T11:37:31.140

该类`MailAddress`根据 RFC822 中的完整 BNF 语法检查其地址。（见`MailBnfHelper`）。

`MailMessage`使用s.时没有注射风险。（您自己的内容中的 HTML 注入除外）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T09:07:39.577

我快速查看了源代码，似乎根本没有检查（除了那些参数不为空的）但是如果你只是创建一个MailMessage，应该没有问题，因为它的纯文本.. . 只有在使用替代视图时，您才应该注意注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T09:03:09.913

MailAddress 类中似乎只有一个简单的检查来检查地址是否包含@。

# asp.net - 使用自动完成扩展器时滚动条消失

> ID：301345
> 
> 赞同：1
> 
> 时间：2008-11-19T09:01:01.977
> 
> 标签：asp.net, .net-2.0, autocomplete, ajaxcontroltoolkit

我使用自动完成扩展器功能从我的数据库中获取建议列表。这个控件没有滚动条，所以我在一个面板（MS .net 2.0）中添加了一个滚动条，我将它附加到我的自动完成扩展器。现在问题出在 srcoll 条上。像这样

```
<asp:Panel ID="autocompleteDropDownPanel" runat="server"  ScrollBars="Auto"  Height="100px" HorizontalAlign="Left" /> 
```

并将其添加到这样的自动竞争扩展器中

```
:CompletionListElementID="autocompleteDropDownPanel" 
```

当我调用我的页面时，我会得到建议列表并出现滚动条。当我单击滚动条或尝试拖动时，一切都消失了。

难道我做错了什么？有没有其他方法可以向我的自动完成扩展器控件添加滚动条

任何提示都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-10T03:00:16.810

我有一个类似的问题，好像还没有解决。

当附加到 AutoPostBack="true" 的 TextBox 时，单击 AutoCompleteExtender 滚动条会导致回发。

重现步骤：

1.  使用 AutoPostBack="true" 将 TextBox 添加到您的 ASPX 页面。
2.  添加一个 AutoCompleteExtender 并将上面的 TextBox 指定为目标控件。
3.  创建一个新的 Web 服务方法并在 AutoCompleteExtender 上指定适当的 ServicePath 和 ServiceMethod。
4.  根据需要在 AutoCompleteExtender 上指定所有适当的属性，以便键入一些文本会显示一个下拉列表。
5.  从 Web 服务方法中，确保您将返回大量项目，以便 AutoCompleteExtender 的下拉列表显示滚动条。
6.  单击或 Tab 进入 TextBox 并键入一些文本，以便显示下拉菜单（带有滚动条）。
7.  为了更好地衡量，首先尝试简单地按下箭头键，直到下拉菜单开始自行滚动。这工作正常，没问题。
8.  现在，不是向下箭头，而是单击滚动条并开始滚动。
9.  嗬！突然之间，TextBox 控件似乎失去了焦点，这自然会导致 AutoPostBack 行为启动。这会导致下拉菜单消失，并且您永远无法以预期的方式滚动。

似乎我们需要的是一种在显示下拉菜单时或可能只是在有人尝试滚动时临时禁用 AutoPostBack 行为的方法。也许在滚动条上单击可以设置某种标志来禁用 AutoPostback，然后释放鼠标会重新启用它。我不知道这有多可行，但如果有人有想法肯定会很好。

[http://www.codeplex.com/AjaxControlToolkit/WorkItem/View.aspx?WorkItemId=15161](http://www.codeplex.com/AjaxControlToolkit/WorkItem/View.aspx?WorkItemId=15161)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T13:35:05.923

我刚刚在 ASP.NET 3.5 中使用时遇到了同样的症状`AutoCompleteExtender`.....这是因为我`AutoPostBack=True`在文本框上，关闭它可以使滚动条正常工作。

（我知道这与原始问题的情况不同，但我在尝试解决我的问题时从谷歌找到了这个，所以发布我的解决方案似乎是合适的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-24T13:38:26.983

这并不能直接回答您的问题 - 但我会问您是否确定自动完成扩展器是在这种情况下使用的最佳控件。

从可用性的角度来看，自动完成的好处是我可以输入 3-4 个字符，查看一些可用的输入，并使用键盘使用一些向下光标按键轻松选择它们。

如果您在自动完成列表中显示的项目比在屏幕上轻松查看的项目多，那么我不确定解决方法是添加滚动条。

在我们的场景中，我们有一个包含 2800 个名称的列表，这些名称在自动完成中可用。我们将显示的数字限制为 20，但将其设置`MinimumPrefixLength`为 1。这意味着当用户键入一个字符时，他们会看到一个自动完成列表，该列表实际上只是让他们知道他们正在输入的文本框具有此功能。列表中的结果列表只有在用户输入 3-4 个字符后才真正有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-19T14:30:17.803

好吧，现在在 Visual Studio 2008 sp1 ajaxtoolkit 中解决了这个问题，您可以提供滚动到列表但编辑 CompletionListCssClass 集的 css

```
overflow:auto;
height:60px; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-11T15:39:13.460

在我的情况下，单击滚动条问题是通过`AutoPostBack=false`在文本框上设置来解决的。但是后来 AutoCompleteExtender 的功能就消失了。使用该`OnClientItemSelected`属性，我可以调用触发回发的 javascript 函数，并且所有 IE 浏览器用户再次感到高兴:-)

# c# - 为什么 LocalTime 显示服务器时间而不是浏览器时间？

> ID：301354
> 
> 赞同：1
> 
> 时间：2008-11-19T09:11:41.627
> 
> 标签：c#, datetime, localtime

我可能做错了什么——但不知道为什么。我的数据库中有一个 DateTime 字段，保持 UTC 时间

我的服务器在美国，浏览器在欧洲。

页面加载代码如下：

```
DateTime t = DateTime.SpecifyKind((DateTime)rdr["startTime"], DateTimeKind.Utc);
label1.Text = t.ToLocalTime().ToString(); 
```

我得到的显示时间是美国当地时间而不是欧洲。我应该怎么做才能显示浏览器的本地时间？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-19T09:28:02.343

一种技术是在客户端浏览器上使用 JavaScript 检测客户端时区偏移量（以分钟为单位）：

```
alert((new Date()).getTimezoneOffset()); 
```

然后可以将其发送回服务器并存储在会话或 cookie 中，并用于抵消显示给它们的 UTC 日期。或者，另一种技术是让用户配置文件可以指定他们的时区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T09:29:16.740

toLocalTime 在您的服务器上执行，而不是在浏览器上。如果要在服务器端转换日期，则必须获取用户所在的时区（欧洲至少有 3 个时区，如果算上夏令时，则为 6 个......）

一种方法是将 UTC 时间发送到客户端，然后使用一些 javascript 将其转换为用户本地时间（javascript 中的 Date 对象知道用户系统设置的时间）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T10:04:49.740

正如[一些人所写](https://stackoverflow.com/questions/301354/why-localtime-displays-server-time-and-not-browser-time#301385)的那样，代码正在服务器上执行 - 所以应用的时区是服务器本地的时区是有道理的。

除了他将 UTC 发送到浏览器的建议（这在可用时很好，但并不总是一种选择），如果您使用的是 .NET 3.5，您应该查看[TimeZoneInfo 。](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.aspx)这将让您在 UTC 和任意时区之间进行转换，包括历史变化。（时区不仅仅是“GMT + 5”等。）最大的困难是确定用户实际所在的时区。您通常可以使用 JavaScript 获得与 UTC 的当前偏移量，但这并没有给您始终如一地正确处理所需的所有信息。迟早您可能必须针对他们所在的时区进行每个用户的设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-19T10:19:55.203

我认为根据客户端浏览器中的时间将时间值存储在数据库中是不明智的。

如果您在许多不同的时区有许多客户，并且存储的信息曾经被整理或共享 - 事件的顺序将不正确。例如，格林威治标准时间 10:16 早于美国东部时间 10:30。

出于这个原因，最好使用服务器时间（或者像其他人所说的那样再次更好 - 尝试使用 UTC）。

# c# - ComponentModel 反射（例如 PropertyDescriptor）和标准反射（例如 PropertyInfo）之间的区别？

> ID：301356
> 
> 赞同：26
> 
> 时间：2008-11-19T09:14:09.127
> 
> 标签：c#, reflection

你可以用它们做的事情之间有明显的重叠。ComponentModel 反射的东西只是 System.Reflection 之上的一个更友好的层吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-11-19T09:17:19.913

不——还有更多。ComponentModel 允许您做一些 DLR 类型的事情，例如运行时属性。这就是 DataView 向网格公开列的方式——它们不是反射属性——它们是运行时属性。这里的关键字是`ICustomTypeDescriptor`和`TypeDescriptionProvider`。

该模型还允许抽象和间接。例如，如果您正在对属性进行大量反射，请考虑[HyperDescriptor](http://www.codeproject.com/KB/cs/HyperPropertyDescriptor.aspx) - 这是我编写的一个实用程序，它使用自定义`PropertyDescriptor`实现将反射模型交换为预编译模型，从而获得巨大的性能提升。

在使用方面，还有一些其他的区别；ComponentModel 仅支持成员上任何属性的单个实例（与反射不同，反射允许多个相似的属性）。而且它是以数据为中心的——所以属性存在，事件也存在（主要用于更改通知）——但没有字段或方法。

它还对 i18n 有很好的支持——因为 DisplayName 等可以即时定制。

但是，ComponentModel 不（直接）与 LINQ（特别是成员表达式）之类的东西兼容——因为它想要绑定到反射数据。

最后，ComponentModel 在 IDE 中被 PropertyGrid 之类的东西高度使用（这就是工具提示的额外属性的工作方式），但同样几乎所有 UI 数据绑定都是通过 ComponentModel 发生的（因为这允许绑定支持 DataTable、类，以及您能想到的任何其他内容）。

# c++ - 在Visual C++ 中delete 和delete [] 一样吗？

> ID：301357
> 
> 赞同：7
> 
> 时间：2008-11-19T09:14:25.210
> 
> 标签：c++, visual-c++

我知道我应该在使用`delete []`后使用`new []`，所以使用`auto_ptr`with`new []`并不是一个好主意。

但是，在调试时`delete []`（使用 Visual Studio 2005），我注意到调用进入了一个如下所示的函数：

```
void operator delete[]( void * p )
{
    RTCCALLBACK(_RTC_Free_hook, (p, 0))
    operator delete(p);
} 
```

这是否意味着`[]`语法在 Visual C++ 上丢失了？如果是这样，为什么？是为了减轻开发人员记住正确语法的负担吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-11-19T11:23:00.690

考虑这段代码：

```
class DeleteMe
{
public:
  ~DeleteMe()
  {
    std::cout << "Thanks mate, I'm gone!\n";
  }
};

int main()
{
  DeleteMe *arr = new DeleteMe[5];
  delete arr;
  return 0;
} 
```

如果你在 VS2005 中运行它，它将打印：

```
谢谢大佬，我走了！
```

如果您更改`main()`为正确遵守 C++ 标准：

```
int main()
{
  DeleteMe *arr = new DeleteMe[5];
  delete[] arr;
  return 0;
} 
```

它将打印：

```
谢谢大佬，我走了！
谢谢大佬，我走了！
谢谢大佬，我走了！
谢谢大佬，我走了！
谢谢大佬，我走了！
```

不要朝自己的脚开枪。如果您不匹配不同风格的新/删除，VS2005 将**不会做正确的事情。**任何其他符合 C++ 标准的编译器也不会。

`operator new`周围有一些编译器魔法`operator delete`（以及它们的不同风格），基本上对ctors和dtors的调用是在幕后添加的。这个魔法取决于那些小括号 []，所以不要失去它们，否则你会失去魔法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-19T09:24:16.703

我想这只是一个实现细节。在释放数组和指针时，它们的堆分配器的工作方式相同。

但是由于标准允许实现对这两种情况有不同的算法，所以你真的不应该假设`delete`并`delete[]`做同样的事情。行为甚至可能在编译器版本之间发生变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T09:22:14.320

仅仅因为它们现在可能工作相同，并不意味着您一定可以对它们一视同仁——行为可能会改变。此外，谁在乎 - 你应该编写你的代码，这样你就不必记住了。

此外，您可以使用[scoped_array](http://www.boost.org/doc/libs/1_36_0/libs/smart_ptr/scoped_array.htm)删除数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-19T09:32:10.977

也许您删除的数据没有析构函数？如果是这样，这个简单的删除将是有意义的。毕竟它正在处理 void* 。

无论如何，您应该使用 delete[] 来确保为数组中的每个元素运行析构函数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-19T10:02:34.660

删除没有 [] 的数组只会释放内存，但不会调用数组中每个对象的析构函数。所以，从技术上讲，如果你的析构函数需要被调用，你只需要 [] 。

# asp.net-mvc - 在 IIS 5.1 (Windows XP) 上部署 ASP.NET MVC

> ID：301359
> 
> 赞同：35
> 
> 时间：2008-11-19T09:16:52.350
> 
> 标签：asp.net-mvc, deployment, iis-5

好的，部署 ASP.NET MVC 似乎很痛苦。我想在 Windows XP (IIS 5.1) 上部署我的 ASP.NET MVC 应用程序，但似乎找不到如何去做。当我在 Web 浏览器地址栏中输入应用程序名称时，我收到“网站不可用”消息。

[IIS 6.0](https://stackoverflow.com/questions/239981/deploy-aspnet-mvc-beta-to-iis-6-causing-404s)有一些解决方法，但是 IIS 5.1 呢？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-11-24T02:08:29.623

这是我发现的和对*我*有用的： [在 Windows XP (IIS 5.1) 上部署 ASP.NET MVC 应用程序](http://itscommonsensestupid.blogspot.com/2008/11/deploy-aspnet-mvc-app-on-windows-xp-iis.html)

**编辑：**

对于 ASP.NET MVC 的最新版本，在添加/编辑应用程序扩展映射中将 .mvc 替换为通配符 .* 扩展文本框。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-11-19T14:53:50.017

您需要在 IIS 5 中添加通配符映射。在 IIS 6 中，您有一个特定的部分来添加通配符映射。在 IIS 5 中，您映射扩展名 .* 并选择您的 asp.net ISAPI dll。如果“确定”按钮不可点击，请点击 dll 路径的文本框，然后它应该是可点击的（不要问，这一直发生在我身上）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-10-09T04:20:23.360

要在 Windows XP 中托管 ASP .NET MVC 应用程序，请使用[IIS Developer Express](http://www.microsoft.com/download/en/details.aspx?id=1038)。

安装 IIS Express 后，在安装位置打开命令提示符并执行以下命令（必要时替换）：

> iisexpress.exe /path:[path_to_mvc_project] /port:[port] /systray:true /clr:v2.0

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-19T14:43:11.863

适用于 6.0的*相同*过程（使用 Ionic 重写器）适用于 5.x。您在 Windows 应用事件日志中看到了什么？和 IIS 服务器日志？你试过改写器吗？

# regex - vc6 Cstring的正则表达式库？

> ID：301363
> 
> 赞同：2
> 
> 时间：2008-11-19T09:19:31.283
> 
> 标签：regex, open-source, visual-c++-6

是否有任何正则表达式库可以与 vc6 的 CString 一起使用？需要开源/免费库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-03T10:44:22.153

[基于 boost regex 的正则表达式组件库](http://www.tropicsoft.com/Components/RegularExpression/)3.1.3版本支持 VC6 甚至更低的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T09:27:28.723

Boost 对 VC6 有一些支持。不过，请准备好在每一步都与编译器抗争。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T11:49:00.543

我会使用[PCRE](http://www.pcre.org/ "聚合酶链反应")来适应 CString。它已经为*string*提供了 C++ 扩展。

# .net - 自动单元测试示例代码

> ID：301365
> 
> 赞同：11
> 
> 时间：2008-11-19T09:21:03.900
> 
> 标签：.net, unit-testing, sandcastle

我的团队负责为我们编写的大型系统开发 API。我们需要提供示例代码，以便其他使用我们 API 的开发人员可以学习如何使用它。我们一直在使用 xml 文档注释记录代码。例如。

```
/// <summary>Summary here</summary>
/// <example>Here is an example  <code>example code here</code> </example>
public void SomeFunction() 
```

然后我们使用 Sandcastle 并构建我们需要的帮助文件（chm 和一个在线网站）。

当示例代码不起作用时，这是相当尴尬的，这通常是因为某些功能发生了变化或一个简单的错误。

有没有人做过这样的事情，而且还配置了单元测试以在示例代码上运行，以便知道它们在构建期间可以工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-19T09:56:58.073

我建议在您的 XML 中使用一个特殊的标记，上面写着“从这个地方获取代码示例”。它将引用可以通过单元测试运行的普通 C# 文件。举个例子，你可能有：

```
/// <summary>Summary here</summary>
/// <example>Here is an example
/// <code>!!sourcefile:SomeClassTest.cs#SomeFunction!!</code></example>
public void SomeFunction() 
```

您的单元测试正常运行，然后在“创建 XML”和“运行 Sandcastle”之间插入一个构建步骤，您将用适当的内容替换每个“文件令牌”。您甚至可以在文档生成时将挂钩放入 Sandcastle 以执行此操作 - 我对 Sandcastle 的了解还不够，无法确定。

发明自己的标记当然很难看，但它应该可以工作。

当然，这假设代码示例很容易进行单元测试——有些可能不是（如果它们正在处理资源等）。至少你会知道它可以编译:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-02T23:39:06.490

是的，sandcastle 支持这一点，保持示例的正确性非常好。您可以像这样指向代码区域：

```
 /// <summary>
   /// Gizmo which can act as client or server.
   /// </summary>
   /// <example>
   /// The following example shows how to use the gizmo as a client:
   /// <code lang="cs"
   ///    source="..\gizmo.unittests\TestGizmo.cs"
   ///    region="GizmoClientSample"/>
   /// </example>
   public class Gizmo 
```

然后，您可以使用 TestGizmo.cs 中的一些测试代码作为示例，将其包含在一个区域中：

```
[Test]
public GizmoCanActAsClient()
{
   #region GizmoClientSample
   Gizmo gizmo = new Gizmo();
   gizmo.ActAsClient();
   #endregion
} 
```

警告：如果您移动或重命名测试文件，则只有在您尝试使用 sandcastle 重新生成文档时才会收到错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T09:49:57.633

**简单的解决方案：** 制作一个包含所有示例代码头的小型应用程序，然后调用它们各自的入口点

```
#include "samples/sampleA.h"

void main()
{
  SomeFunction();
} 
```

然后在构建运行这些小应用程序之后，您需要确保它们运行正常。但是，您能否在没有人与 NightlyBuild 服务器举行睡衣派对的情况下验证代码是否正常运行？

**更好**的解决方案：记录输出并让某人在早上查看它。

**更好**的解决方案：记录输出并 grep 或其他东西，这样除非它坏了，否则没有人需要查看它。

**最佳解决方案：**找到一个合适的测试框架，希望能得到所有花里胡哨的东西，这样它就可以在它坏了或类似的情况下给人们发电子邮件。在我们的例子中，我们避免了花里胡哨的东西，而是连接了一个**USB 警笛**，当有什么东西发生故障时它会响起。这非常令人兴奋！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T09:50:53.263

我自己没有这样做，但我在实用程序员书籍中看到过这一点。如果我没记错的话，“使用 Nunit 在 C# 中进行实用单元测试”一书提到他们为这本书做了这个。不过，可能是他们在其中一个播客中提到过。

他们提到他们为他们的书籍设置了一个持续构建服务器。如果我没记错的话，他们使用乳胶或其他一些基于文本的标记来编写他们的书，并且他们有构建步骤来格式化书中的标记以及构建和单元测试代码。

# oracle - oracle形式的url如何读取参数

> ID：301366
> 
> 赞同：0
> 
> 时间：2008-11-19T09:21:18.800
> 
> 标签：oracle, forms

我正在使用Oracle form 10 我想知道如何以oracle形式访问URL的参数

例如：每当我运行它在浏览器中打开的表单时，它的 URL 是

[http://112.10.0.10:7778/forms/frmservlet?config=pkamble](http://112.10.0.10:7778/forms/frmservlet?config=pkamble)

我只想知道如何在 oracle 表单代码中访问“config”参数的值。

当我们使用 10g 运行 oracle 表单时

我将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-04T09:18:49.847

我不知道您是否可以读取配置参数，但要从 URL 读取另一个参数，您的 URL 必须像：

```
http://112.10.0.10:7778/forms/frmservlet?config=pkamble&otherparams=name=value 
```

在您的 .fmb 中，您必须在参数块中添加“名称”参数，然后您可以执行以下操作：

```
if :PARAMETER.name = 'value' then
 message('ok');
end if; 
```

并且对于多个参数使用：

```
http://112.10.0.10:7778/forms/frmservlet?otherparams=name1=value1+name2=value2+name3=value3 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-12-09T07:25:38.420

您正在尝试将内置变量配置分配给参数，但实际上您必须将参数命名为

[http://112.10.0.10:7778/forms/frmservlet?config=pkamble&otherparams=confing1=pkamble](http://112.10.0.10:7778/forms/frmservlet?config=pkamble&otherparams=confing1=pkamble)

如果你想使用预定义参数，那么用户 get_application_property inbult 函数由 oracle

# oracle - PL/SQL：如何声明会话变量？

> ID：301369
> 
> 赞同：18
> 
> 时间：2008-11-19T09:24:09.840
> 
> 标签：oracle, plsql

如何在 PL/SQL 中声明一个会话变量 - 一个仅在会话期间持续存在的变量，而无需我将其存储在数据库本身中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-19T18:08:10.250

您可以使用“用户创建的上下文”来存储在会话中跨多个单元共享的数据。

首先，创建一个上下文：

```
CREATE CONTEXT SYS_CONTEXT ('userenv', 'current_schema')|| '_ctx' USING PKG_COMMON 
```

其次，创建一个可以管理您的上下文的包：

```
CREATE OR REPLACE PACKAGE PKG_COMMON
IS
   common_ctx_name   CONSTANT VARCHAR2 (60)
                 := SYS_CONTEXT ('userenv', 'current_schema')
                    || '_ctx';

   FUNCTION fcn_get_context_name RETURN VARCHAR2;
   PROCEDURE prc_set_context_value (var_name VARCHAR2, var_value NUMBER);
END;

CREATE OR REPLACE PACKAGE BODY PKG_COMMON
IS
   FUNCTION fcn_get_context_name
      RETURN VARCHAR2
   IS
   BEGIN
      RETURN common_ctx_name;
   END;

   PROCEDURE prc_set_context_value (var_name VARCHAR2, var_value NUMBER)
   IS
   BEGIN
      DBMS_SESSION.set_context (common_ctx_name, var_name, var_value);
   END;
END; 
```

prc_set_context_value 可以更高级，这只是一个例子。有了上下文和创建的包，您就可以开始使用它们了。使用过程调用设置上下文变量

```
begin
  PKG_COMMON.prc_set_context_value('MyVariable', 9000)
end; 
```

并在任何地方使用它——任何过程、包、函数或事件视图。

```
CREATE VIEW V_TEST AS
  SELECT ID, LOGIN, NAME 
    FROM USERS 
   WHERE ROLE_ID =  SYS_CONTEXT(PKG_COMMON.FCN_GET_CONTEXT_NAME, 'MyVariable') 
```

有关详细信息，请参阅[http://www.psoug.org/reference/sys_context.html](http://www.psoug.org/reference/sys_context.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-11-19T09:51:30.080

您创建一个包级别变量。这是一个最小的例子：

```
CREATE OR REPLACE PACKAGE my_package
AS
    FUNCTION get_a RETURN NUMBER;
END my_package;
/

CREATE OR REPLACE PACKAGE BODY my_package
AS
    a  NUMBER(20);

    FUNCTION get_a
    RETURN NUMBER
    IS
    BEGIN
      RETURN a;
    END get_a;
END my_package;
/ 
```

如果你这样做，你应该阅读（并正确处理）`ORA-04068`错误。每个数据库会话都有它自己的 a 值。你可以试试这个：

```
SELECT my_package.get_a FROM DUAL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-25T08:42:04.547

我喜欢使用**简短但直观的语法**，因此会创建一些**`ctx`包**，它只提供**一个函数来设置和获取一些全局“变量”**。
（仅对当前会话有效；在我的情况下，无需将其实现为用户创建的上下文变量，但可以在后台轻松更改为它；使用 some`foo varchar2`和`bar number`vars 的示例）

**用法**：

```
select ctx.foo from dual                                                 -- => null (init)
select ctx.foo('a') from dual                                            -- => 'a'
select ctx.foo('b') from dual ; select ctx.foo from dual                 -- => 'b', 'b' 
```

.

```
-- (optimizer should cause the subquerys unselected columns not to be executed:)
select 'ups' from (select ctx.foo('a') from dual) ; select ctx.foo from dual   -- => null

select ctx.bar(1.5) from dual ; select ctx.bar from dual                 -- => 1.5,  1.5
-- ... 
```

**包头**：

```
create or replace package  ctx  as

  -- select ctx.foo from dual                                            -- => null (init)
  -- select ctx.foo('a') from dual                                       -- => 'a'
  -- select ctx.foo('b') from dual ; select ctx.foo from dual            -- => 'b', 'b'
  -- (optimizer should cause the subquerys unselected columns not to be executed:)
  -- select 'ups' from (select ctx.foo('a') from dual) ; select ctx.foo from dual
    -- => null
  -- parallel_enable for queries since it should not change inside of them
  function foo(  set varchar2 := null  ) return varchar2  parallel_enable;

  -- (samples like in foo above as executable test comments like in foo above skipped for 
  -- brevity)
  function bar(  set number := null  ) return  number  parallel_enable;

end; 
```

**包体**：

```
create or replace package body  ctx  as

  foo_  varchar2(30);  -- e.g. 'blabla'
  bar_  number;

  -- internal helper function for varchars
  function set_if_not_null( ref  in out  varchar2,  val  varchar2  ) return varchar2 as 
  begin
    if  val is not null  then  ref := val;  end if;
    return ref ;
  end;

  -- internal helper function for numbers
  function set_if_not_null( ref  in out  number,  val number  ) return  number  as begin
    if  val is not null  then  ref := val;  end if;
    return ref ;
  end;

  -- (same test comments like in foo above skipped for brevity)      
  function foo(  set varchar2 := null  ) return varchar2  parallel_enable as begin
    return set_if_not_null(  foo_,  set  ) ;
  end;

  -- (same test comments like in foo above skipped for brevity)      
  function bar(  set number := null  ) return  number  parallel_enable as begin
    return set_if_not_null(  bar_,  set  ) ;
  end;

end; 
```

如果您知道**变量 ( `foo`) 可能会在单个查询中发生变化，则可以使用 remove`parallel_enable`**，否则如果查询是可并行化的，那么它的性能应该更高。

根据需要，当然可以添加一些`foo_reset()`将其设置为 null 等。

# c# - 为什么字典在 C# 中优于 Hashtable？

> ID：301371
> 
> 赞同：1505
> 
> 时间：2008-11-19T09:24:24.877
> 
> 标签：c#, .net, vb.net, data-structures

在大多数编程语言中，字典比哈希表更受欢迎。这背后的原因是什么？

* * *

## 回答 #1

> 赞同：1667
> 
> 时间：2008-11-19T09:28:55.367

对于它的价值，字典**是**（概念上）一个哈希表。

如果您的意思是“为什么我们使用`Dictionary<TKey, TValue>`类而不是`Hashtable`类？”，那么这是一个简单的答案：`Dictionary<TKey, TValue>`是泛型类型，`Hashtable`不是。这意味着您可以使用 获得类型安全性`Dictionary<TKey, TValue>`，因为您不能将任何随机对象插入其中，并且您不必强制转换取出的值。

有趣的是，`Dictionary<TKey, TValue>`.NET Framework 中的实现是基于`Hashtable`.

> 通用字典是从 Hashtable 的源代码中复制的

[来源](http://referencesource.microsoft.com/#mscorlib/system/collections/hashtable.cs)

* * *

## 回答 #2

> 赞同：665
> 
> 时间：2011-04-21T10:32:47.110

## 差异

| `Dictionary` | `Hashtable` |
| --- | --- |
| **通用的** | **非通用** |
| 需要**自己的线程同步** | 通过方法提供**线程安全**版本**`Synchronized()`** |
| 枚举项：**`KeyValuePair`** | 枚举项：**`DictionaryEntry`** |
| 较新 (> **.NET 2.0** ) | 较旧（自**.NET 1.0**起） |
| 在**System.Collections.Generic中** | 在**System.Collections中** |
| 请求不存在的密钥**引发异常** | 对不存在的键的请求**返回 null** |
| **值类型**可能会更快一些 | **值类型慢一点**（需要装箱/拆箱） |

## 相似之处：

*   两者都是内部**哈希表**== 根据键快速访问多项数据
*   两者都需要**不可变和唯一的键**
*   两者的键都需要自己的**`GetHashCode()`**方法

## 替代 .NET 集合：

*（可以代替 Dictionary 和 Hashtable 使用的候选人）*

*   `ConcurrentDictionary`-**线程安全**（可以同时从多个线程安全访问）
*   `HybridDictionary`-**优化的性能**（对于少数项目也适用于许多项目）
*   `OrderedDictionary`- 可以**通过 int index 访问**值（按添加项目的顺序）
*   `SortedDictionary`- 项目**自动排序**
*   `StringDictionary`- 对字符串进行强类型化和**优化**（现在不推荐使用 Dictionary<string,string>）

* * *

## 回答 #3

> 赞同：188
> 
> 时间：2008-11-19T09:27:55.417

因为`Dictionary`是一个泛型类 ( `Dictionary<TKey, TValue>`)，所以访问它的内容是类型安全的（即您不需要`Object`像使用 a 那样从 强制转换`Hashtable`）。

比较

```
var customers = new Dictionary<string, Customer>();
...
Customer customer = customers["Ali G"]; 
```

到

```
var customers = new Hashtable();
...
Customer customer = customers["Ali G"] as Customer; 
```

但是，`Dictionary`它在内部实现为哈希表，因此从技术上讲，它的工作方式相同。

* * *

## 回答 #4

> 赞同：95
> 
> 时间：2008-11-19T11:55:47.583

仅供参考：在 .NET 中，`Hashtable`对于多个读取线程和单个写入线程使用是线程安全的，而在`Dictionary`公共静态成员中是线程安全的，但不保证任何实例成员都是线程安全的。

因此，我们不得不将所有字典改回`Hashtable`。

* * *

## 回答 #5

> 赞同：71
> 
> 时间：2008-11-19T09:28:04.293

`Dictionary<,>`在 .NET 中，和之间的区别`HashTable`主要在于前者是泛型类型，因此您可以获得泛型在静态类型检查方面的所有好处（并减少装箱，但这并不像人们想象的那么大就性能而言——尽管拳击有一定的内存成本）。

* * *

## 回答 #6

> 赞同：34
> 
> 时间：2008-11-19T13:03:41.597

人们说字典与哈希表相同。

这不一定是真的。哈希表是*实现*字典的一种方式。一个典型的，它可能是`Dictionary`类中 .NET 中的默认一个，但根据定义，它不是唯一的一个。

您同样可以使用链表或搜索树来实现字典，只是效率不高（对于某些效率指标）。

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2012-09-17T11:10:14.450

`Collections`&`Generics`对于处理对象组很有用。在 .NET 中，所有集合对象都在 interface 下`IEnumerable`，而 interface 又具有`ArrayList(Index-Value))`& `HashTable(Key-Value)`。在 .NET 框架 2.0 之后，`ArrayList`&`HashTable`被替换为`List`& `Dictionary`。现在，`Arraylist`&`HashTable`不再用于现在的项目中。

`HashTable`&`Dictionary`之间的区别`Dictionary`是通用的，`Hastable`而不是通用的。我们可以向 中添加任何类型的对象`HashTable`，但是在检索时我们需要将其转换为所需的类型。所以，它不是类型安全的。但是 to `dictionary`，在声明自身时我们可以指定键和值的类型，所以在检索时不需要强制转换。

让我们看一个例子：

**哈希表**

```
class HashTableProgram
{
    static void Main(string[] args)
    {
        Hashtable ht = new Hashtable();
        ht.Add(1, "One");
        ht.Add(2, "Two");
        ht.Add(3, "Three");
        foreach (DictionaryEntry de in ht)
        {
            int Key = (int)de.Key; //Casting
            string value = de.Value.ToString(); //Casting
            Console.WriteLine(Key + " " + value);
        }

    }
} 
```

**字典，**

```
class DictionaryProgram
{
    static void Main(string[] args)
    {
        Dictionary<int, string> dt = new Dictionary<int, string>();
        dt.Add(1, "One");
        dt.Add(2, "Two");
        dt.Add(3, "Three");
        foreach (KeyValuePair<int, String> kv in dt)
        {
            Console.WriteLine(kv.Key + " " + kv.Value);
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2013-01-15T10:29:53.123

从 .NET Framework 3.5开始，如果您只需要键而不需要值，它还[`HashSet<T>`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)提供了所有优点。[`Dictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

因此，如果您使用 a`Dictionary<MyType, object>`并始终将值设置为`null`来模拟类型安全哈希表，您可能应该考虑切换到[`HashSet<T>`](http://msdn.microsoft.com/en-us/library/bb359438.aspx).

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2014-05-28T07:53:11.923

**字典：**

*   如果我们试图找到一个不存在的键，它会返回/抛出异常。

*   它比 Hashtable 更快，因为没有装箱和拆箱。

*   只有公共静态成员是线程安全的。

*   Dictionary 是一种通用类型，这意味着我们可以将它与任何数据类型一起使用（创建时，必须为键和值指定数据类型）。

    例子：`Dictionary<string, string> <NameOfDictionaryVar> = new Dictionary<string, string>();`

*   Dictionay 是 Hashtable 的类型安全实现，`Keys`并且`Values`是强类型的。

**哈希表：**

*   如果我们试图找到一个不存在的键，它会返回 null。

*   它比字典慢，因为它需要装箱和拆箱。

*   Hashtable 中的所有成员都是线程安全的，

*   Hashtable 不是泛型类型，

*   Hashtable 是松散类型的数据结构，我们可以添加任何类型的键和值。

* * *

## 回答 #10

> 赞同：18
> 
> 时间：2014-10-29T11:12:30.700

[MSDN 上使用 C# 对数据结构进行广泛检查的](http://msdn.microsoft.com/en-US/library/ms379571(v=vs.80).aspx)文章指出，**冲突解决策略**也有所不同 ：

Hashtable 类使用一种称为**重新散列**的技术。

> 重新散列的工作方式如下：有一组不同的散列函数 H [1] ... H [n]，当从散列表中插入或检索项目时，最初使用 H [1]散列函数。如果这导致碰撞，则改为尝试H [2] ，如果需要，继续尝试 H [n 。]

Dictionary 使用一种称为**链接**的技术。

> 通过重新散列，在发生冲突时重新计算散列，并尝试与散列对应的新槽。然而，通过链接，**使用辅助数据结构来保存任何冲突**。具体来说，字典中的每个插槽都有一个映射到该存储桶的元素数组。如果发生碰撞，碰撞元素将被添加到存储桶列表中。

* * *

## 回答 #11

> 赞同：17
> 
> 时间：2008-11-19T09:28:22.637

是一种松散类型的`Hashtable`数据结构，因此您可以将任何类型的键和值添加到`Hashtable`. 该类`Dictionary`是类型安全的`Hashtable`实现，键和值是强类型的。创建`Dictionary`实例时，您必须指定键和值的数据类型。

* * *

## 回答 #12

> 赞同：17
> 
> 时间：2010-01-24T21:20:04.457

请注意，[文档](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2)说：“Dictionary<(Of <(TKey, TValue>)>) 类实现为**哈希表**”，而不是“Dictionary<(Of <(TKey, TValue>)>) 类实现为一个**哈希表**“

字典不是作为哈希表实现的，而是按照哈希表的概念来实现的。由于使用了泛型，该实现与 HashTable 类无关，尽管 Microsoft 在内部可以使用相同的代码并将 Object 类型的符号替换为 TKey 和 TValue。

在 .NET 1.0 中不存在泛型；这是 HashTable 和 ArrayList 最初开始的地方。

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2016-07-13T10:45:09.920

**哈希表：**

键/值将在存储到堆中时转换为对象（装箱）类型。

从堆中读取时，需要将键/值转换为所需的类型。

这些操作非常昂贵。我们需要尽可能避免装箱/拆箱。

**Dictionary :** HashTable 的通用变体。

没有装箱/拆箱。无需转换。

* * *

## 回答 #14

> 赞同：9
> 
> 时间：2014-05-01T09:37:04.947

Hashtable 对象由包含集合元素的存储桶组成。桶是 Hashtable 中元素的虚拟子组，**它使搜索和检索比大多数集合更容易和更快**。

Dictionary 类与 Hashtable 类具有相同的功能。对于值类型，特定类型（Object 除外）的 Dictionary**比 Hashtable 具有更好的性能**，因为 Hashtable 的元素属于 Object 类型，因此，在存储或检索值类型时通常会发生装箱和拆箱。

进一步阅读：[哈希表和字典集合类型](http://msdn.microsoft.com/en-us/library/4yh14awz(v=vs.90).aspx)

* * *

## 回答 #15

> 赞同：8
> 
> 时间：2015-11-12T10:17:45.530

另一个重要的区别是 Hashtable 是线程安全的。Hashtable 具有内置的多读取器/单写入器 (MR/SW) 线程安全性，这意味着 Hashtable 允许一个写入器与多个读取器一起使用而无需锁定。

在 Dictionary 的情况下，没有线程安全；如果您需要线程安全，则必须实现自己的同步。

进一步阐述：

> Hashtable 通过该属性提供了一些线程安全性`Synchronized`，该属性返回一个围绕集合的线程安全包装器。包装器通过在每次添加或删除操作时锁定整个集合来工作。因此，每个试图访问集合的线程都必须等待轮到它来获取一个锁。这是不可扩展的，并且可能导致大型集合的性能显着下降。此外，该设计并未完全免受竞争条件的影响。
> 
> .NET Framework 2.0 集合类如`List<T>, Dictionary<TKey, TValue>`等不提供任何线程同步；当在多个线程上同时添加或删除项目时，用户代码必须提供所有同步

如果您需要类型安全以及线程安全，请使用 .NET Framework 中的并发集合类。进一步阅读[这里](https://msdn.microsoft.com/en-us/library/dd997305(v=vs.110).aspx)。

另一个区别是，当我们在 Dictionary 中添加多个条目时，会保持添加条目的顺序。当我们从 Dictionary 中检索项目时，我们将以插入它们的相同顺序获取记录。而 Hashtable 不保留插入顺序。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2009-04-17T04:53:53.843

我能弄清楚的另一个区别是：

我们不能在 Web 服务中使用 Dictionary<KT,VT>（泛型）。原因是没有 Web 服务标准支持泛型标准。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2012-05-22T08:07:00.750

`Dictionary<>`是泛型类型，因此它是类型安全的。

您可以在 HashTable 中插入任何值类型，这有时可能会引发异常。但`Dictionary<int>`只接受整数值，同样`Dictionary<string>`只接受字符串。

因此，最好使用`Dictionary<>`而不是`HashTable`.

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-03-06T01:58:11.153

> 在大多数编程语言中，字典比哈希表更受欢迎

我认为这不一定是真的，大多数语言都有一个或另一个，这取决于[他们喜欢的术语](https://en.wikipedia.org/wiki/Comparison_of_programming_languages_(associative_array))。

然而，在 C# 中，明确的原因（对我来说）是 C# HashTables 和 System.Collections 命名空间的其他成员在很大程度上已经过时。它们出现在 c# V1.1 中。从 C# 2.0 开始，它们已被 System.Collections.Generic 命名空间中的通用类取代。

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2010-03-09T14:28:06.403

根据我使用[.NET Reflector](http://en.wikipedia.org/wiki/.NET_Reflector)所看到的：

```
[Serializable, ComVisible(true)]
public abstract class DictionaryBase : IDictionary, ICollection, IEnumerable
{
    // Fields
    private Hashtable hashtable;

    // Methods
    protected DictionaryBase();
    public void Clear();
.
.
.
}
Take note of these lines
// Fields
private Hashtable hashtable; 
```

所以我们可以确定 DictionaryBase 在内部使用了一个 HashTable。

# c# - 大型接口的统一错误处理

> ID：301372
> 
> 赞同：2
> 
> 时间：2008-11-19T09:24:46.297
> 
> 标签：c#, .net, error-handling

假设我有一个 .NET 程序集 A，它使用反射来加载程序集 B 和 C（也是 .NET）。这两个程序集都实现了许多大型接口（两者相同）。当在 A 中调用方法时，它会尝试让 B 完成工作。但是，B 不可靠，可能会引发异常。现在 A 有两种模式，一种将异常传播给 A 的调用者，另一种在更稳定（但性能较低）的 C 上调用匹配方法。

有没有更好的方法（更少的代码）来实现这个场景，而不是将 B 公开的所有方法包装在所有 B 接口的巨大实现中，现在才用代码包围每个调用，如下所示？程序集 B 和 C 对所选择的错误处理方法一无所知，因此它们无法实现逻辑。

```
public class BErrorWrapper : I1, I2, I3{
   ...
   public int DoSomeWork(int num){
      if (FailWithExceptions)
      {
         try
         {
            return B.DoSomeWork(num);
         }
         catch(MyLibException e)
         {
            return C.DoSomeWOrk(num);
         }
      }
      else
      {
         return B.DoSomeWork(num);
      }
   }
   ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T09:31:13.490

你可以这样做，它可以节省一些重复：

```
public class BErrorWrapper : I1, I2, I3{
   ...
   public int DoSomeWork(int num){
      try
      {
         return B.DoSomeWork(num);
      }
      catch(MyLibException e)
      {
         if (FailWithExceptions) throw;
         return C.DoSomeWOrk(num);
      }
   }
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T09:37:20.420

嗯...要保存一些代码，您可以通过委托包装大多数常见签名，如下所示（请注意，我只包含核心位以保持清晰 - 但您可以简单地添加您的`FailWithExceptions`东西）：

```
 static void TryWithFallback<T>(Action<T> primary, Action<T> fallback, T arg)
    {
        try
        {
            primary(arg);
        }
        catch // add your other regular code here...
        {
            fallback(arg);
        }
    } 
```

然后，您可以通过以下方式将其重新用于实现：

```
 TryWithFallback(b.DoSomeWork, c.DoSomeWork, num); 
```

显然，您可以为相关代码添加一些签名，例如：

```
 static TResult TryWithFallback<T, TResult>(Func<T, TResult> primary, Func<T, TResult> fallback, T arg)
    {
        try
        {
            return primary(arg);
        }
        catch
        {
            return fallback(arg);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T10:45:48.520

我建议你看看使用反射和 System.CodeDom 来生成代码。最近，当我尝试为 COM 互操作程序集编写包装器时遇到了类似的问题，该程序集具有非常大的接口，其中包含许多方法的签名，其中包含我不想在客户端使用但我可以使用的参数类型轻松转换为我在客户端想要的类型。它们也是 'ref' 参数，这会使客户端代码更加冗长。这些方法具有不同数量的参数，这些参数具有我想在客户端公开的有意义的名称。

为您的包装器编写一个基类，该基类具有 A 和 B 的实例的成员。编写一个代码生成类来生成派生的包装器类。然后，代码生成应该迭代包装器应该实现的每个接口的方法，并添加一个方法和方法体以及适当的代码，以便在所需的错误处理构造中调用 A 和 B。您生成的调用 A 和 B 的代码将取决于您正在调用的方法的签名，但这并不难通过迭代正在生成或调用的方法的参数来实现。

我可以发布我的代码，但由于我正在做一些稍微不同的事情，我认为你最好回到 MSDN 或其他公共示例。我只能说，我发现这出奇的简单和健壮。

我建议您签入您的代码生成代码而不是生成的代码，并将代码生成作为构建的一部分运行。

# openid - OpenID 消费者错误

> ID：301373
> 
> 赞同：1
> 
> 时间：2008-11-19T09:24:51.070
> 
> 标签：openid

在将 Zend OpenID Server 集成到 MVC 期间，我对消费者的回答有疑问（在 Livejournal 上）。它说：

> “naive_verify_failed_return：提供者说签名无效”。

有谁知道它为什么会出现？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-11-08T22:38:23.443

当消费者在无状态模式下运行并且 OP 无法验证签名时会发生此错误。假设一个正确实现的 OP 并且没有数据损坏，这不应该发生。如今，发生这种情况的最常见原因是一个长期存在的错误`Net::OpenID::Consumer`，导致它向 OpenID 2.0 OP 发送格式错误的签名验证请求。

我刚刚向 CPAN 推送了一个修复程序，`Net-OpenID-Consumer 1.030099_003`它很快就会发布稳定版本。同时，您可以通过实现关联缓存来解决此问题，从而避免无状态模式。有关更多详细信息，请参阅此线程：

[http://groups.google.com/group/openid-perl/browse_thread/thread/6f28a022cce5bcdd](http://groups.google.com/group/openid-perl/browse_thread/thread/6f28a022cce5bcdd)

# php - 处理混合 HTML 和用户输入的最佳方式？

> ID：301374
> 
> 赞同：0
> 
> 时间：2008-11-19T09:25:48.150
> 
> 标签：php, parsing

在我正在编写的 PHP 应用程序中，我想让用户在文本中输入 HTML 和带尖括号的文本，但是当我显示此文本时，我想让 HTML 标签由非 HTML 标签呈现显示文学作品，例如用户应该能够输入：

```
<b> 5 > 3 = true</b> 
```

显示时，用户应该看到：

**5 > 3 = 真**

解析这个的最佳方法是什么，即找到所有非 HTML 括号，将它们转换为 > <?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T09:30:53.990

我建议让用户输入 BBcode 样式标记，然后将其替换为 html 标记：

```
[b]This is bold[/b]
[i]this is italic with a > 'greater than' sign there[/i] 
```

这使您可以更好地控制如何将用户的输入解析为 html，尽管我承认这看起来是不必要的负担。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T19:46:23.827

如果你允许用户输入 HTML，你必须解决一个比几个未转义的尖括号更大的问题；HTML 真的很难正确验证和过滤，如果你做的不对，你就会面临 XSS 攻击。我写了一个库来做到这一点；其他人已经在这里发布了指向它的链接，所以我不会重复。

但是，要回答您的问题，将杂散的尖括号转换为其转义形式的最简单方法是使用 DOM/libxml 解析 HTML，然后重新序列化它。任何使用正则表达式等的东西都注定会因边缘情况而失败。您也可以编写自己的解析器，但这也需要一些工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T10:21:28.380

最好的方法是反其道而行之：与其查找非 HTML 括号并转义它们，不如先转义所有内容，然后查找`&lt;b&gt;`并`&lt;/b&gt;`仅对这些特殊情况进行转义。这样，您就不会冒用户在您的页面中注入恶意 HTML 的风险（如果您尝试仅转义需要的内容，则可能会丢失一些重要的内容）。

# jquery - 查找不包含的元素

> ID：301376
> 
> 赞同：2
> 
> 时间：2008-11-19T09:27:18.990
> 
> 标签：jquery, html, css

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-19T09:36:56.427

您可以使用以下内容选择带有/不带有子图像的锚点

```
$('a.button:has(img)')

$('a.button:not(:has(img))') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T09:52:47.877

选择包含 img 元素的“按钮”类元素

```
$('a.button:has(img)').corner('tl bl 10px'); 
```

选择不包含 img 元素的“按钮”类元素

```
$('a.button:not(:has(img))').corner() 
```

为简洁起见，您可能可以将这些语句链接成一个

# c# - 每次将数据从网页插入数据库时 ，是否应该使用 Trim 功能？

> ID：301386
> 
> 赞同：3
> 
> 时间：2008-11-19T09:29:37.253
> 
> 标签：c#, asp.net

每次将任何数据从网页插入数据库时​​，我是否应该使用 textbox.text.Trim() 函数。

我只是有使用修剪功能的习惯吗？它会以任何方式影响性能吗？我应该每次使用还是只在需要时使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T09:35:34.450

我已经看到许多意外添加到文本字段末尾的空格问题（例如神秘地不起作用的登录）。因此，将 trim() 大多数文本字段输入作为标准做法一点也不坏。

我认为 trim() 对性能的影响绝对可以忽略不计，除非可能是流量超高的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T12:11:43.463

您应该在数据进入应用程序时（从提交的表单）修剪数据，而不是在将其放入数据库之前。这是将数据转换为受控格式的验证步骤，而不是安全存储在数据库中的转义步骤。(*)

您还应该删除控制字符和其他任何会导致您的应用程序出现问题的内容。例如，想象一下带有换行符或空字节的用户名可能导致的困难（和潜在的安全问题）。典型的浏览器 UI 可能不允许输入这些字符，但这并不能阻止攻击者提交它们。一些表单阅读库可能会为您解决这个问题，但大多数不会。

不是所有的东西都需要修剪。例如，像我现在输入的大文本字段可能有正当理由在开始和/或结束时有空格。但是对于任何与它相关的逻辑都是值得的，尤其是像用户名这样的东西。

*：未修剪空格存在一个数据库问题：许多数据库会默默地修剪尾随空格，并意外地将字符串与任意数量的尾随空格匹配。不要指望从数据库中取回尾随空格，除非它是一个 BLOB 列，并且在使用匹配用户名之类的逻辑进行任何操作之前再次进行修剪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T09:42:27.150

使用 trim 并确保创建一个函数来去除任何潜在的 sql 中毒攻击。

php为您提供

```
mysql_real_escape_string(); 
```

# c# - C#中的目录遍历

> ID：301392
> 
> 赞同：7
> 
> 时间：2008-11-19T09:32:24.470
> 
> 标签：c#, ntfs

如何使用 C# 遍历文件夹结构而不陷入[连接点](http://en.wikipedia.org/wiki/NTFS_junction_point)的陷阱？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-19T09:37:00.903

对于那些不知道的人：连接点的行为类似于 linux 上文件夹的符号链接。当您设置递归文件夹结构时，会发生提到的陷阱，如下所示：

```
given folder /a/b
let /a/b/c point to /a
then
/a/b/c/b/c/b becomes valid folder locations. 
```

我建议像这样的策略。在 Windows 上，您被限制为路径字符串的最大长度，因此递归解决方案可能不会破坏堆栈。

```
private void FindFilesRec(
    string newRootFolder,
    Predicate<FileInfo> fileMustBeProcessedP,
    Action<FileInfo> processFile)
{
    var rootDir = new DirectoryInfo(newRootFolder);
    foreach (var file in from f in rootDir.GetFiles()
                         where fileMustBeProcessedP(f)
                         select f)
    {
        processFile(file);
    }

    foreach (var dir in from d in rootDir.GetDirectories()
                        where (d.Attributes & FileAttributes.ReparsePoint) != FileAttributes.ReparsePoint
                        select d)
    {
        FindFilesRec(
            dir.FullName,
            fileMustBeProcessedP,
            processFile);
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2008-11-19T09:45:28.283

您可以使用以下代码：

```
private void processing(string directory)
        {
            cmbFilesTypesSelectedIndex = cmbFilesTypes.SelectedIndex;
            CheckForProjectFile(directory);
            DirectoryInfo dInfo = new DirectoryInfo(directory);
            DirectoryInfo[] dirs = dInfo.GetDirectories() ;
            foreach (DirectoryInfo subDir in dirs)
            {
                CheckForProjectFile(subDir.FullName);
                processing(subDir.FullName);
            }
        }

        private void CheckForProjectFile(string directory)
        {
            Boolean flag = false; 
            DirectoryInfo dirInfo = new DirectoryInfo(directory);
            FileInfo[] files = dirInfo.GetFiles();
            //You can also traverse in files also
            foreach (FileInfo subfile in files)
            {
                //Do you want

            }
        } 
```

# .net - 我可以（并且我曾经想要）在.net 中设置最大堆大小吗？

> ID：301393
> 
> 赞同：31
> 
> 时间：2008-11-19T09:32:33.520
> 
> 标签：.net, performance, garbage-collection, heap-memory

来自 java 背景，我习惯的一件事是告诉 JVM 最大堆大小应该是多少。如果正在运行的程序尝试吞下的资源超出了允许范围，而垃圾收集器无法释放更多资源，则会抛出 OutOfMemoryError 并且一切都会发生。所以设置最大堆大小在 Java 中很重要。

**这适用于.net吗？** 你能设置堆大小限制吗？CLR 是否会不断增长其堆，直到达到机器的物理极限？或者，由于某种微妙的原因，我的 Java 闪烁器阻止我看到，这在 .net 中不是问题吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-11-19T09:57:03.860

除非您自己在进程中托管 CLR，否则您无法在 .Net 中设置最大堆大小。

编辑：要控制 CLR 的内存分配，包括最大堆大小，您需要使用托管 api 来托管 clr 并专门使用“内存管理器接口”，一些入门信息可以在这里找到[MSDN 杂志，CLR Inside Out 列: CLR 托管 API](http://msdn.microsoft.com/en-us/magazine/cc163567.aspx)

编辑：回答你的问题，你为什么要控制内存分配或特别是最大堆大小，你通常不想，但**如果**你正在编写一个像 SQL Server 或 IIS 或一些实时应用程序这样的应用程序那么你就有很好的理由来控制内存，特别是避免分页，否则 CLR 本身和操作系统已经为你做了很好的工作，剩下的就是确保你的应用程序使用最少的资源事情进展顺利。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-11-19T09:49:40.113

不，它不适用于 .NET。堆确实一直在增长，直到它不再增长。（很明显，这是“在尝试通过 GC 恢复内存之后，增加堆”。）基本上，.NET GC 中可用的调优几乎没有 Java 中那么多。您可以选择服务器 GC 或客户端 GC，我认为有一个选项可以打开/关闭并发 GC（我会在一分钟内找到链接）但基本上就是这样。

编辑：似乎还有一点，虽然不是很大。[Rick Minerich 关于 GC 设置的博客文章](http://www.atalasoft.com/cs/blogs/rickm/archive/2008/05/14/choosing-the-right-garbage-collector-settings-for-your-application-net-memory-management-part-4.aspx)和[后续](http://www.atalasoft.com/cs/blogs/rickm/archive/2008/08/20/changing-your-garbage-collector-settings-on-the-fly-net-memory-management-part-5.aspx)文章似乎比我更了解这件事。它们可能是进一步调查的一个很好的起点——但它们主要是标志，而不是 JVM 中可用的内存限制。

编辑：Pop 的回答提出了一个很好的观点——我一直在假设一个“正常”的 CLR 托管模型（即不受您的控制）。如果您想自己托管它，您可能会获得更多控制权 - 以托管它的额外工作为代价。我不能说我曾经研究过事情的那一面。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-03-18T17:01:01.577

您可能想查看[System.Runtime.MemoryFailPoint](http://msdn.microsoft.com/en-us/library/system.runtime.memoryfailpoint.aspx)。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-08-05T15:31:42.677

据我所知，没有简单的方法可以使用 CLR[控制 .Net 应用程序的堆大小。](http://bytes.com/groups/net-c/683386-how-set-max-heap-size-c)

上面的链接只回答了一半的问题。当我研究了同样的问题时，响应是“堆增长到使用所有可用内存”，好像这是您想要控制最大堆大小的唯一原因。

在（通常是 Java）服务器环境中，您不希望表现不佳的应用程序以牺牲其他托管应用程序为代价来占用内存。一个简单的解决方案是限制应用程序可用于其堆的内存量。这是通过 Java 的 -Xmx 参数完成的，因此您可以保证应用程序不会使用超出计划的内容，例如 -Xmx256M。由于在初始化期间在堆上分配内存会减慢应用程序的启动速度，Java 使用 -Xms 参数来允许在初始化期间执行大量对象创建的应用程序以一大块堆开始，而不是 JVM 不断调整堆的大小去。

.Net的CLR没有这个能力。我怀疑这是因为 .Net 的 CLR 不是虚拟机。CLR 恰好是一个 API（相当全面，我可能会补充），它充当本机 .dll 的适配器，在内存管理方面，它等同于一种更像可执行文件的方法。

我已经问过有关 SharePoint 开发的这个问题，并且确实听说可以通过使用称为 Web 应用程序的 IIS 模块来控制堆大小，您可以告诉 IIS 限制给定 Web 应用程序的内存。我想知道这是否是因为 IIS 具有替换/覆盖 new()/malloc()/etc 的自定义例程，因此可以为客户端应用程序提供这种类型的控制。这意味着独立的 .Net 应用程序不走运，除非您想用 C++ 编写自定义内存管理器并为 .Net 创建接口

# ruby-on-rails - 如何将 YAML 放在 YAML 文档中

> ID：301400
> 
> 赞同：4
> 
> 时间：2008-11-19T09:37:25.210
> 
> 标签：ruby-on-rails, ruby, yaml

我正在使用 Rails 夹具来测试我的 rails 应用程序。除了我的数据库列之一应该包含 YAML 内容之外，这一切都很好。但是，我确定如何将要加载到数据库中的 YAML 标记放入 YAML 文件中。这是一个例子：

```
mvnforum:
    name: mvnforum
    abstraction_type: SVN
    url: src: test username: admin #is this possible?
    sourcepath: mvnforum/src/
    webroot:
    codesecure_project: mvnforum 
```

如果在 YAML 文件中不可能有 YAML，那么为什么将它加载到数据库中进行测试最好呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-19T10:27:15.203

如果要将 YAML 代码放入 YAML 文档中，则需要将其视为字符串：

```
url: "src: test username: admin" 
```

如果你需要一个多行字符串，你可以这样做

```
mvnforum:
   name: mvnforum
   abstraction_type: SVN
   url: "
src: test\n
username: admin\n
"
   sourcepath: mvnforum/src/
   webroot:
   codesecure_project: mvnforum 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T13:19:16.353

您可能想研究使用[工厂模式](http://en.wikipedia.org/wiki/Factory_pattern)来替换您的测试装置，并使用类似[Factory Girl](http://textmode.at/2008/6/12/factory-girl-rails-fixture-replacement)的东西。

看看这篇[很棒的文章，为什么你应该使用工厂而不是固定装置](http://www.dcmanges.com/blog/38)和好处。

# visual-studio-2008 - VisualStudio 中的 Eclipse 功能

> ID：301410
> 
> 赞同：0
> 
> 时间：2008-11-19T09:47:11.600
> 
> 标签：visual-studio-2008, eclipse

这可能会在其他地方被问到（似乎是一个有用的话题），但搜索结果却一无所获。

在 Eclipse 中编写 Java 时我喜欢的一个特性是，我不必担心从我正在实现它们的接口中放入 import 语句和任何遗漏的函数 - 如果我确实错过了它们，只需从列表中单击即可实现它们我。

现在我正在使用 C# 在 VisualStudio2008 中工作，我真的很想念那个功能。我想知道功能是否在那里，但被埋藏或可以通过第 3 方购买？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-20T10:14:00.080

如果您从某个标准库（或项目引用的库）中调用某些不是“使用”的东西，智能将在关键字下方显示一个标记，如下所示：

![替代文字](https://i89.photobucket.com/albums/k220/kipper_308/intelli1.png)

将鼠标悬停在它上面并打开菜单，您可以选择添加“使用”关键字，或者使类型名显式，如下所示：

![替代文字](https://i89.photobucket.com/albums/k220/kipper_308/intelli2.png)

然后它将“使用”添加到文件的顶部。

![替代文字](https://i89.photobucket.com/albums/k220/kipper_308/intelli3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T09:51:13.903

您必须为此功能付费。查看 JetBrains 的 Resharper 4.0。这对我来说是一个完美的解决方案。

# javascript - 领先的 javascript 引擎的代码和数据足迹是什么？（V8、松鼠鱼、TraceMonkey..）

> ID：301422
> 
> 赞同：5
> 
> 时间：2008-11-19T09:53:01.870
> 
> 标签：javascript, v8, footprint, tracemonkey, squirrelfish

由于顶级 Javascript 引擎的速度似乎相当，下一个标准是足迹。领先的 javascript 引擎的代码和数据足迹是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-01T17:02:40.467

squirrelfish 的占用空间应该最小（我记得我在某处读到它使用一个非常简单的从 JS 代码到本机代码的转换表），但是如果您想要一些非常小的东西，您应该查看早期的 js 引擎（不使用本机代码表）因为他们解释代码，而不是根据当前机器编译整个东西。

我看不出比较 js 引擎的意义，因为它们基本上是单线程的（新引擎是多线程的，但这是来自新的“高度优化”引擎）并且它们只加载一次，然后解释兆字节的 JS 代码...速度比大小更重要..即使对于移动设备，因为我不希望 JS 引擎使用超过 1-2Mb 的内存（即使在我看来这也太多了..）但是总和基于 JS 的页面中的 JS 脚本可以轻松传递它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-05T04:34:43.553

V8 是最好的引擎 AFAIK，性能指标更高，内存占用更小。V8 根据上下文将每个 JS 对象加载到内存中，并且还使用分代垃圾收集器，这意味着可以收集更多的运行时内存，同时降低性能开销。

如果您将代码和数据大小表示为纯二进制大小，那么 V8 只需 KB 的二进制大小就可以击败大多数当前的高性能引擎。

在 V8 中，所有内置对象（如数组、数学等）也是动态加载的 JS 文件。由于内置对象驻留在 VM 上时非常轻量级，因此如果需要更多性能并牺牲一些内存，我们也可以将其作为静态代码。

# c# - 是否可以将 PagedDataSource 绑定到通用列表？

> ID：301425
> 
> 赞同：4
> 
> 时间：2008-11-19T09:57:45.013
> 
> 标签：c#, asp.net, generics

我有一种方法可以将一组对象作为通用列表返回，然后将其绑定到中继器。我想使用 PagedDataSource 类在转发器上实现分页，但我不确定这是否可行，因为它似乎不起作用。

我是否必须更改方法的返回类型，或者是否可以将 PagedDataSource 绑定到通用列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-19T10:12:07.120

我刚刚修改了我的一些代码以使用通用列表，并且似乎运行良好，希望这会有所帮助：

请注意，可以使用或不使用页码来调用整个方法以自动设置页面，它还在调用 PagingPanel 的面板内部构建了一个分页控件。

在 PagedDataSource 实例 (dataSource) 上设置 DataSource 的行确实采用了 NewsItems (searchResults) 的数组，我已对其进行了更新以使用使用 NewItem 数组创建的 List。

```
void PopulateNewsItems (int? pageNo)
{
    var model = ModelFactory.GetNewsModel ();
    var searchResults = model.GetNewsItems ();

    var dataSource = new PagedDataSource ();

    // CHANGED THE ARRAY OF NEWSITEMS INTO A GENERIC LIST OF NEWSITEMS.
    dataSource.DataSource = new List<NewsItem> (searchResults);
    dataSource.AllowPaging = true;

    var pageSizeFromConfig = ConfigurationManager.AppSettings["NewsItemsPageCount"];
    var pageSize = 10;

    int.TryParse (pageSizeFromConfig, out pageSize);

    dataSource.PageSize = pageSize;
    dataSource.CurrentPageIndex = pageNo ?? 0;

    PagingPanel.Controls.Clear ();
    for (var i = 0; i < dataSource.PageCount; i++)
    {
        var linkButton = new LinkButton ();
        linkButton.CommandArgument = i.ToString ();
        linkButton.CommandName = "PageNo";
        linkButton.Command += NavigationCommand;
        linkButton.ID = string.Format ("PageNo{0}LinkButton", i);
        if (pageNo == i || (pageNo == null && i == 0))
        {
            linkButton.Enabled = false;
            linkButton.CssClass = "SelectedPageLink";
        }

        linkButton.Text = (i + 1).ToString ();

        PagingPanel.Controls.Add (linkButton);
        if (i < (dataSource.PageCount - 1))
            PagingPanel.Controls.Add (new LiteralControl ("|"));
    }

    NewsRepeater.DataSource = dataSource;
    NewsRepeater.DataBind ();
}

void NavigationCommand (object sender, CommandEventArgs e)
{
    PopulateNewsItems (int.Parse ((string)e.CommandArgument));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T10:13:32.080

1.  将您的 PagedDataSource 的数据源设置为您的列表
2.  将 PagedDataSource 的分页变量设置为您需要的任何内容
3.  将转发器的数据源设置为 pageddatasource 对象本身
4.  绑定中继器
5.  任务完成

# javascript - 如何在 CSSEdit 中调试 JS 代码？

> ID：301426
> 
> 赞同：0
> 
> 时间：2008-11-19T09:58:07.930
> 
> 标签：javascript, debugging, client-side, cssedit

是的，听起来很傻，但我是一名设计师，我正在开发的网站不在 CSSEdit 中工作。这对我来说很糟糕，非常糟糕。该站点有一个庞大的 JS/Ajax 客户端，可以在所有使用与 CSSEdit 相同的浏览器引擎的浏览器、IE、Firefox 和 Safari 中运行！

由于 MacRabbit 没有客户服务（他们不会真正回复电子邮件），这是最后的手段。

任何提示都会非常有价值。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T22:19:31.350

您可以通过退出 CSSEdit，在终端中运行以下命令，然后重新启动 CSSEdit 来启用 WebKit Inspector（其中包括一些用于调试 Javascript 的工具）：

```
defaults write com.macrabbit.CSSEdit WebKitDeveloperExtras -bool YES 
```

要打开 WebKit 检查器，请在预览窗口中单击鼠标右键并选择“检查元素”。

**原帖：**

您最好的选择（如果您无法获得 MacRabbit 支持）可能会寻找替代工作流程。[尽管 CSSEdit 的覆盖功能是一个巨大的好处，但使用 Firefox 和Firebug](https://addons.mozilla.org/en-US/firefox/addon/1843)和[Web 开发人员扩展程序](https://addons.mozilla.org/en-US/firefox/addon/60)为现有站点开发 CSS 当然是可能的。

如果您可以通过 FTP 访问测试服务器（不是实时环境），您还可以使用 CSSEdit 远程编辑样式表，并在另一个浏览器中预览您的更改（我所知道的所有 Mac FTP 程序都提供“Edit with.. ." 远程文件的选项）。

祝你好运！

# ms-access - 具有可变列数的 VBA Access 2003 表

> ID：301429
> 
> 赞同：1
> 
> 时间：2008-11-19T10:00:47.953
> 
> 标签：ms-access, vba

我在 Access 2003 VBA 中有一个包含 164 列的表，但我得到的数据有 181 列，将来它可能会变得更大。我需要知道如何在运行时调整表的大小并添加额外的列我知道如何检查我需要多少列，所以我只需要知道如何调整我自己的表的大小。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T13:37:00.310

另外的选择; 与其有一个有很多列的“*短胖”表，不如有一个有很多行的“**高瘦*”表：

**短脂：**

```
 ID
   FirstName
   LastName
   ...
   Amount

   1 Joe Smith   ... $123
   2 Bob Roberts ... $214
   3 Jim Black   ... $500 
```

**高瘦：**

```
 RecordID
   FieldNumber
   FieldName
   FieldValue

   1 1 FirstName Joe
   1 2 LastName  Smith
   ...
   1 n Amount $123
   2 1 FirstName Bob
   2 2 Lastname  Roberts
   ...
   2 n Amount    $214
   3 1 FirstName Jim
   3 2 LastName  Black
   ...
   3 n Amount    $500 
```

如果您有一个不必与其他表连接的“独立”表，这很好，否则您将陷入痛苦的世界。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T13:52:20.623

没有太多的依据，但这听起来像是一个设计问题。我会查看驱动这些附加列的数据，看看您是否可以创建一个列来存储它。

如果数据真的那么不稳定，我会考虑创建一个新表`Key, FieldName, FieldValue`作为你的列。这样您就不必在每次数据更改时更改您的报告、查询、导入例程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T14:07:50.967

我没有评论的声誉，但为了扩展短胖与长瘦的论点，我认为从那里开始是个好主意。然后您可以使用具有旧字段名称的字段作为列标题创建交叉表查询。然后从该查询中编写一个生成表，您将拥有您的表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-19T16:10:28.987

如果您被这种糟糕的设计所困扰，您可以根据需要使用 SQL 添加列：

```
strSQL="ALTER TABLE tblTable ADD COLUMN NewCol Text (25)"
CurrentDB.Execute strSQL,dbFailOnError 
```

或者您可以使用 TableDef。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-19T13:06:52.090

可能是[这里](http://www.functionx.com/vbaccess/Lesson09b.htm)的东西。我可能会在旧表的基础上创建一个新表，并使用数据源中的额外列。然后我会从两个数据源填充新表。如果没有其他原因，我会这样做，这意味着我在制作新数据的同时保持旧数据的安全。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-19T16:11:38.893

那么您是否正在寻找 VB/VBA 代码来更改 MDB 中的表？听起来这就是你所追求的——基于传入数据的自动化。如果您没有 MDB 文件的权限，这将很难做到，但我认为您真正要说的是您没有在 Access 中打开 MDB 并对其进行修改的选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-19T15:48:19.580

问题是我无权更改设计完整的数据库已经创建我的工作只是阻止读取 csv 数据但这些大坝......数据需要比 previos 程序员所暗示的更多的列这就是为什么我不能只删除该表，此外还有大约 30 或 40 个表，就像我在问题中描述的那样，这就是为什么我要求某种算法来更改列的数量

但感谢快速的遮阳篷

# c# - 在内联数据绑定上下文中使用扩展方法

> ID：301430
> 
> 赞同：4
> 
> 时间：2008-11-19T10:02:00.840
> 
> 标签：c#, asp.net, data-binding, gridview, extension-methods

我正在尝试使用一些扩展方法来对 DateTime 和 Int32 应用一致的格式 - 这在后面的代码中工作得非常好，但是我遇到了数据绑定问题。

我得到：

```
'System.DateTime' does not contain a definition for 'ToCustomShortDate' 
```

为了

```
<%# ((ProductionDetails)Container.DataItem).StartDate.ToCustomShortDate() %> 
```

（在用户控件中包含的网格视图的模板字段内）

即使我在用户控件的顶部包含定义扩展方法的命名空间：

```
<%@ import namespace="MyAssembly.Formatting" %> 
```

有没有其他人遇到过这个问题，有什么办法可以解决吗？

**编辑：**我的错误，上面应该是：

```
<%@ import namespace="MyNamespace.Formatting" %> 
```

IE。我没有错误地引用命名空间（在后面的代码中逐字使用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-28T15:08:13.310

发现问题！我按照我的想法正确地包含了命名空间 - 但真正的问题是该应用程序仅包含 .NET 3.5 程序集而不是使用 3.5 编译器进行编译，丢失了 web.config 中的一些条目，当我创建一个空项目并在那里尝试（成功）！

错误消息有时会如此具有误导性......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T10:57:04.503

关于我上面实现的扩展方法，我的命名空间应该是这样的吗？

```
namespace MyNamespace.Formatting 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T10:27:45.107

您应该从导入命名空间中删除程序集名称...

我猜您的扩展方法位于名为 Formatting 的命名空间中。

```
namespace Formatting
{

    public static class DateTimeExtender
    {
        public static string ToCustomShortDate(this DateTime date)
        {
            return date.ToString("dd MMM yyyy");
        }
    }

    public class ProductionDetails
    {
        public DateTime StartDate { get; set; }    
    }
} 
```

在 ASPX 页面中...

```
<%@ Import Namespace="Formatting" %> 
```

# ruby-on-rails - 根据验证错误从 AJAX 更新不同的 div

> ID：301435
> 
> 赞同：1
> 
> 时间：2008-11-19T10:08:24.320
> 
> 标签：ruby-on-rails, ajax, prototype

我有一个通过 AJAX 提交的表单（使用原型和内置的 rails 'form_remote_tag' 助手）。
如果存在表单验证错误，我想要更新一个 div（状态区域），但如果提交成功，则更新另一个 div（表单所在的 div）。

我的代码看起来像这样：

```
<div id="recipe-status"><!-- I want form validation errors to go here --></div>
<div id="recipe">
    <%= form_remote_tag(:update => "recipe-status",
       :before => "Element.show('wait-indicator')",
       :success => "Element.hide('wait-indicator')",
       :complete => visual_effect(:appear, "recipe-status"),
       :url => { :action => 'import', :id => @recipe.id },
        :failure => "alert('Unable to import recipes at present')") %>
    <-- Form goes here, I want this to be replaced if the submit succeeds -->
</div> 
```

我能想到的唯一方法是在出现验证错误时返回 HTTP 错误状态，但这似乎有点像 hack。有没有更清洁的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T18:45:12.030

我会查看[有关 jQuery 的最新 Railscasts](http://railscasts.com/episodes/136-jquery)以及[有关 RJS 模板的较早一集](http://railscasts.com/episodes/43-ajax-with-rjs)。这些应该可以让您在 AJAX 和 Rails 应用程序中正常运行，并使一切正常、干净地运行，而无需任何黑客攻击。

在查看了您的代码后，我建议您使用 jQuery（参见上面的情节），您将从表单中提取所有 javascript，[使其不那么突兀](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)（这是一件非常好的事情）。

看起来你已经掌握了这些技术，所以你会很快学会用 jQuery 编写不显眼的 Javascript，你最终会成为一个更快乐的人，拥有一个更干净的应用程序。:)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T13:56:25.030

正如另一个答案中所述，我建议您考虑使用 jQuery。然而，这肯定需要一些加速，所以坚持使用 Rails 的默认设置，这样你就可以更快地前进......

您要研究的是内联 RJS。您可以在控制器中进行 AJAX 更新，而不是在 form_remote_tag 调用中执行所有操作。这样，您可以管理是否存在验证错误的逻辑，并根据它执行一个或另一个 AJAX 更新（到任何 div）。

对于初学者，请参阅[Jamis Buck 的这篇文章。](http://weblog.jamisbuck.org/2007/1/10/inline-rjs)

# .net - 是否有 .NET 库或 API 可以与/编辑 IIS 元数据库进行交互？

> ID：301438
> 
> 赞同：4
> 
> 时间：2008-11-19T10:10:55.610
> 
> 标签：.net, iis, api, metabase

...或者我是否坚持滚动我自己的“XML 切割”功能。我想创建一个小型任务托盘应用程序，这样我就可以快速将虚拟目录重新指向我硬盘上的几个文件夹之一。

**一点背景：**

我的开发机器上有我们代码库的 3 个不同的 svn 分支。

```
Current Production Branch    ( C:\Projects\....\branches\Prod\ )
Next Release Canidate Branch ( C:\Projects\....\branches\RCX\ )
Trunk                        ( C:\Projects\....\trunk\ ) 
```

我们的应用程序与我安装的第 3 方 CMS 集成

```
http://localhost/cms/ 
```

为了工作，我们的应用程序必须位于同一个根目录中。所以：

```
http://localhost/app/ 
```

根据我正在处理的分支，我`/app/`通过进入 IIS 管理器将目录重新指向上面列出的 3 个路径之一。只是觉得有一个快速应用程序为我做这件事会很方便。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T12:18:51.513

好的...这不是托盘应用程序，但您可以从命令行运行它。只需根据需要更改物理路径：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.DirectoryServices;

namespace Swapper
{
  class Program
  {
    static void Main(string[] args)
    {
      using (DirectoryEntry appRoot = 
               new DirectoryEntry("IIS://Localhost/W3SVC/1/root/app"))
      {
        switch (args[0].ToLower())
        {
          case "prod":
            appRoot.Properties["Path"].Value = @"e:\app\prod";
            appRoot.CommitChanges();
            break;

          case "rcx":
            appRoot.Properties["Path"].Value = @"e:\app\rcx";
            appRoot.CommitChanges();
            break;

          case "trunk":
            appRoot.Properties["Path"].Value = @"e:\app\trunk";
            appRoot.CommitChanges();
            break;

          default:
            Console.WriteLine("Don't know");
            break;
        }
      }
    }
  }
} 
```

然后运行如下：

```
C:\>swapper prod
C:\>swapper rcx 
```

ETC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T10:19:41.380

我自己没有使用过这个，所以我不能 100% 确定它会解决你的问题。但是看看 .NET 中的 System.DirectoryServices。它可以访问 IIS。

[目录服务的 MSDN 帮助](http://msdn.microsoft.com/en-us/library/system.directoryservices.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-23T11:07:01.987

那么，对于 IIS 7，有一个 .NET 包装器可以通过 .NET 启用 IIS 管理。有关详细信息，请参阅此链接，

[http://learn.iis.net/page.aspx/165/how-to-use-microsoftwebadministration/](http://learn.iis.net/page.aspx/165/how-to-use-microsoftwebadministration/)

对于以前版本的 IIS（5 或 6），提供了 ADSI 和 WMI 接口，

[http://msdn.microsoft.com/en-us/library/ms525885.aspx](http://msdn.microsoft.com/en-us/library/ms525885.aspx)

# javascript - 如何将 JavaScript 文件连接到一个文件中？

> ID：301442
> 
> 赞同：37
> 
> 时间：2008-11-19T10:13:31.953
> 
> 标签：javascript, batch-file, compression

我想为我的网站创建一个编译好的 JavaScript 文件。对于开发，我更愿意将 JavaScript 保存在单独的文件中，并且作为我的自动化脚本的一部分，将文件连接成一个文件并在其上运行压缩器。

我的问题是，如果我使用旧的 DOS 复制命令，它还会放入压缩器抱怨的 EOF 标记：

复制 /A *.js 编译的.js /Y

其他人在做什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-11-19T12:44:45.503

我推荐使用 Apache Ant 和 YUI Compressor。

[http://ant.apache.org/](http://ant.apache.org/)

[http://yui.github.com/yuicompressor/](http://yui.github.com/yuicompressor/)

在 Ant 构建 xml 中放置类似的内容。它将创建两个文件，application.js 和 application-min.js。

```
<target name="concatenate" description="Concatenate all js files">
    <concat destfile="build/application.js">
        <fileset dir="src/js" includes="*.js" />
    </concat>
</target>

<target name="compress" depends="concatenate" description="Compress application.js to application-min.js">
    <apply executable="java" parallel="false">
        <filelist dir="build" files="application.js" />
        <arg line="-jar" />
        <arg path="path/to/yuicompressor-2.4.2.jar" />
        <srcfile />
        <arg line="-o" />
        <mapper type="glob" from="*.js" to="build/*-min.js" />
        <targetfile />
    </apply>
</target> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-11-19T10:32:34.723

要不使用 EOF 进行复制，请使用二进制模式：

```
copy /B *.js compiled.js /Y 
```

如果生成的文件仍有可能来自原始文件之一的 EOF，则可以通过以下变体进行修复：

```
copy /A *.js compiled.js /B /Y 
```

/A 从原始文件中删除尾随 EOF（如果有），/B 防止将 EOF 附加到结果文件中。如果 EOF 不在末尾，则源文件将被截断。开关的顺序很重要。如果你写

```
copy /A *.js /B compiled.js /Y 
```

- 源文件中的 EOF 不会被删除，但仍不会附加生成的 EOF。

自己试试吧，我就是从那里得到的。DOS命令很奇怪。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-07-10T19:42:57.913

在 asp.net AJAX 中，您可以使用“CompositeScript”标签。这会将您的所有脚本合并为 1 个大 js 文件，通过减少 http 304 和可能的 http 401 的数量来节省带宽。

样本：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
        <CompositeScript>
            <Scripts>
                <asp:ScriptReference Path="~/Scripts/Script1.js" />
                <asp:ScriptReference Path="~/Scripts/Script2.js" />
                <asp:ScriptReference Path="~/Scripts/Script3.js" />
            </Scripts>
        </CompositeScript>
    </asp:ScriptManager> 
```

有关详细信息，请参阅此处：http: [//msdn.microsoft.com/en-us/library/cc488552.aspx](http://msdn.microsoft.com/en-us/library/cc488552.aspx)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-11-27T01:42:28.053

这是一个非常古老的问题，但我想提一下，还有一些方法可以使用 javascript 连接 javascript！显然使用 nodejs ......例如，有一些工具发布为像 [这样](https://www.npmjs.org/package/concat)的 npm 模块，也有[grunt](https://www.npmjs.org/package/grunt-contrib-concat)和[gulp](https://www.npmjs.org/package/gulp-concat)插件。

我还想提一个非常非常有趣的技术，它被用于像 jQuery 和 Modernizr 这样的大型项目中。这两个项目都是完全使用 requirejs 模块开发的，然后他们使用[requirejs 优化器](http://requirejs.org/docs/optimization.html)作为一个非常智能的连接器。有趣的是，正如您所见，jQuery 和 Modernizr 都不需要 requirejs 才能工作，这是因为它们删除了 requirejs 语法仪式，以便在代码中摆脱 requirejs。所以他们最终得到了一个使用 requirejs 模块开发的独立库！多亏了这一点，他们能够执行库的 cutsom 构建，以及其他优势。[这](http://augustoaltman.tumblr.com/post/103432024045/from-requirejs-modules-to-standalone-javascript)是一篇博客文章，更详细地解释了所有这些。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-07-14T05:11:33.143

在你的机器上安装压缩器 uglifyjs：

```
sudo npm -g install uglify-js 
```

那么下面的命令就可以用来拼接和压缩所有的js文件了。

```
cat myAppDir/*.js | uglifyjs > build/application.js 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-11-19T10:48:59.137

我们创建了一个由以下部分组成的机制：

*   minfication（用于 js 和 css）
*   包中的聚合
*   缓存（http 状态 304 的东西）
*   在开发模式下发送原始文件

它可能对您的需求来说太多了，但至于回答您的问题，其他人会做什么，这是它的工作原理：

1.  例如，/css.aspx?package=core 处有一个请求
2.  我们在 xml 配置文件中查找包名（例如声明包“核心”包含文件 /js/mootools.js 和 /js/swfobject.js）
3.  我们检查是否启用了缩小。例如，在开发环境中，我们不希望提供缩小的 js 内容，而是编写原始文件。对于 js，这是通过包含脚本的 document.writes 来完成的，对于 css，我们编写导入规则。
4.  如果需要缩小（在生产环境中），我们会检查请求中的 if-modified-since 标头。如果这个客户端已经有了缩小的内容，我们发送 http 头 304。如果客户端确实需要这些内容，我们检查缓存中是否有缩小的内容并提供它。否则，我们缩小并发送结果。

所有这些都分解为单独的服务。jsminificationwriter 服务中注入了缓存服务。这利用了仅处理缩小规则的原始缩小服务。

这种方法的好处是：

*   它迫使我们的开发团队考虑 js/css “包”，因此正确地拆分功能并将它们分发到需要它们的页面上。
*   在开发过程中，您完全能够调试，获得正确的文件和行号。
*   您可以连接任何其他缩小服务实现，例如 YUI 等。JsMin 只是我们的第一次拍摄。
*   这是一种适用于不同内容类型的通用方法。

希望这可以帮助。如果您愿意，我可以发布一些代码片段来进行更多说明。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-11-19T11:39:19.847

你也可以这样做：

```
type *.js > compiled.js 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-11-19T12:51:02.353

我将使用第二个 yuicompressor，但我使用 /packer/

[http://johannburkard.de/blog/programming/javascript/automate-javascript-compression-with-yui-compressor-and-packer.html](http://johannburkard.de/blog/programming/javascript/automate-javascript-compression-with-yui-compressor-and-packer.html)

这对我来说真的很棒。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-09-09T17:41:19.923

你也可以试试[wro4j](http://alexo.github.com/wro4j)（java 的 web 资源优化器），它可以用作构建工具（maven 插件）、运行时解决方案（使用过滤器）或命令行工具。它允许您使用十几个用于机器人类型资源的压缩器轻松组织资源并为您处理合并：js 和 css。

定义要合并的资源很简单：

```
<groups xmlns="http://www.isdc.ro/wro">
  <group name="all">
    <css>/asset/*.css</css>
    <js>/asset/*.js</js>
  </group>
</groups> 
```

免责声明：我是这个项目的提交者。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-28T09:20:18.567

我知道这是一个非常古老的问题，但为了完整起见，我会提到使用[Browserify](http://browserify.org/)的选项。它允许您使用 NPM 的`require`函数将项目构建为不同的模块来解决依赖关系，然后它会解析这些依赖关系并将整个项目连接到一个文件中。

例如，假设您的项目名为**FooBar**，并且您想要输出一个名为`foobar.js`. 您将创建一个`main.js`文件作为项目的入口点，需要所有应包含的模块。

***main.js***

```
require("./doFoo");
require("./doBar"); 
```

然后运行：

```
browserify main.js -o foobar.js 
```

或者，要在每次源文件更改时自动执行此操作，您也可以使用[Watchify](https://www.npmjs.com/package/watchify)。

```
watchify main.js -o foobar.js 
```

Browserify 还将解决模块之间的依赖关系。例如，如果 doBar.js 依赖于`doQux.js`...

***doBar.js***

```
require("./doQux");
const doBar = ()=>{
    //Do some bar stuff.
}
exports.doBar = doBar; 
```

然后 Browserify 将确保包含`doQux.js`到`foobar.js`，这样您就不会有任何损坏的依赖项。

# c# - 为 Visual Studio 优化 windows XP

> ID：301448
> 
> 赞同：2
> 
> 时间：2008-11-19T10:16:11.887
> 
> 标签：c#, visual-studio-2008, windows-xp

我有一个相对强大的开发工作站 - 8 个内核和 3 Gig 的 Ram。但是，Visual Studio 2008 似乎没有充分利用，尤其是在大型构建期间。是否需要对 XP VM 设置等进行任何调整以提高性能？我记得在过去的糟糕日子里，开箱即用的窗口不能充分利用具有大量内存的机器，现在仍然如此吗？

PS假设我不能做任何硬件改动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T10:24:09.343

在大型项目中工作时，我通常遇到的最大问题不是 CPU 或内存，而是硬盘驱动器。在不同的通道上获取多个 HD（或使用 SCSI 以获得最佳性能）并将输出文件、中间文件、临时文件夹放在 3 个不同的 HD 上。那应该有很大的不同。

我知道你说没有硬件更改，但由于你没有写你有什么类型的高清设置，我只想提一下。

除非你有一个非常快速的高清设置，否则 VS 将无法有效地使用你所有的 8 个 cpu。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T10:25:12.087

Visual Studio 2010 将进行改进，以便更好地利用多核机器，而无需您做任何事情。在此之前，您需要通过更新 msbuild 设置自己做一些额外的工作。

阅读这两篇描述该过程的优秀文章。

[并行建设项目](http://blogs.msdn.com/msbuild/archive/2007/04/26/building-projects-in-parallel.aspx)

[并行构建场景](http://blogs.msdn.com/msbuild/archive/2005/10/14/481171.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T10:37:27.693

与 VS 无关，但在 Eclipse 中，我记得能够指定核心数，它会为您指定的核心数启动 gcc 进程。链接过程仍然必须在一个内核上完成（直到链接器实际上是多线程的）。

实际上，仅使用超线程就感觉快了很多（可能快了 2 倍？？）。再次; 我猜应该归咎于驱动器。

从未想过将每个进程的文件（源文件、临时文件、构建文件、中间文件）拆分到不同的硬盘上；但如果这是您喜欢的方式，您实际上最好创建一个 RAM 磁盘（可能是 128-256mb）并将其用于中间文件。显然，您可以将源文件保存在真实磁盘上（如果您愿意）；但我很乐意将所有内容都留在内存中，然后每半小时左右返回 SVN，或者将副本复制到真实磁盘。

ram 磁盘非常适合临时文件、中间文件和构建文件。满意后，您可以随时将构建文件从 ram 磁盘中复制出来。

我使用的 ram 磁盘是 Microsoft Windows 2000 的；它不是“官方”支持的，但它在 XP 上运行良好，并且在过去一年中一直运行没有问题。设置驱动器的大小并重新启动有点烦人，但一旦启动并运行，您几乎只需将其视为磁盘即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T13:06:35.007

据我记得，XP Pro 最多只支持 2 个处理器，核心属于他们对处理器的定义？XP Home 官方只支持 1，但我知道人们可以让 2 工作。

# hash - 计算文件哈希的最快方法？

> ID：301450
> 
> 赞同：3
> 
> 时间：2008-11-19T10:16:33.617
> 
> 标签：hash

很多文件将存储在数据库中，我需要文件哈希来唯一标识文件未更改。（一般情况下，会用作 Windows 个人防火墙的一部分）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2011-03-11T01:05:16.450

如果我理解“用作 Windows 个人防火墙”部分正确，MD5 作为算法不是一个好的选择。

存在对 MD5 算法的成功攻击，它可以让您找到产生相同哈希的不同消息，而工作量相对较少（与蛮力相比）。这种攻击*过去*没有真正的影响，例如，当使用 MD5 对密码等进行哈希处理时。与此同时，新的攻击已经被发现，因此 MD5 和 SHA-1 都可以以可怕的速度进行散列/碰撞，并且用这些“老”散列破解整个“正确加盐”和单散列用户密码数据库是不可能的仅完全可行，但已被证明。
但是，在*“确保这个文件没有被篡改”*的特定应用中，这种攻击**一直存在**是一个问题，不仅仅是最近。MD5 可以非常安全地检测到位错误或意外修改，但是试图绕过您的个人文件墙的恶意软件可能会通过查找受感染二进制文件的冲突以使哈希与原始文件匹配，从而轻松绕过您的整个安全性。

对于这种情况，您应该使用 SHA-256 [*更新：*与此同时，SHA-3 已经出局，虽然我个人不同意 NIST 选择获胜者（或排除某些非常好的第 2 轮的模糊标准）候选人），使用 SHA-3 (Keccak) 或 SHA-3 决赛选手之一是*更安全的选择。*所有入围者都由经验丰富的团队精心设计，经过非常彻底的分析，到目前为止，还没有一个真实的攻击或可能导致真实攻击的已知问题，而且它们也都有“更多位”（这本身并没有多大意义，但更多的比特不会受到伤害）]。

此外，请记住除了散列之外始终保存文件的长度，这会以可忽略不计的成本大大加强即使是糟糕的散列。如果可以，计算两个不同的哈希值。对于攻击者来说，找到在*一个哈希上产生冲突**的*消息比找到产生冲突且长度完全相同的消息，甚至是在两个不同的哈希上发生冲突并具有相同长度的消息要容易*得多*. 由于带宽（磁盘和内存）在计算散列时是不可忽略的因素，因此计算单个散列或两个散列甚至可能以相当的速度同时运行。 **在计算 CRC 并随后使用分组密码加密相同的块时，我观察到了这种效果。是否计算 CRC 对整体运行时间的影响小于 1%，因此基本上是自由操作。**

 **如果您认为您有充分的理由不使用众所周知的标准哈希（性能限制？），您可以构建自己的安全哈希。使用 Merkle–Damgård 构造（或最近的 HAIFA），您可以将任何安全块密码转换为安全散列函数。例如，使用固定密钥使用 AES 加密每个输入块，并将输出异或到下一个块，然后再加密该块。最后一个块之后的输出是你的哈希值。

虽然“自己构建”通常不是一个好主意，但在这种情况下确实有正当理由，因为 AES 速度很快，并且在最新处理器的硬件中得到了支持。在我的机器上，AES 以大约 130MB/s 的速度运行。在 i7（具有硬件支持）上，据报道它在 Internet 上的速度约为 570MB/s。

至于受 I/O 限制，unwind 是正确的，磁盘很可能是限制因素，尽管不必如此。内存映射是您的朋友，尤其是在您的特定情况下。

如果您检查在防火墙上申请权限的文件，那么这些文件将是已加载到 RAM 中的可执行文件（怎么可能有什么不同，毕竟它们正在被执行！）。因此，映射已经在 RAM 中的页面将只是添加一个页表条目，或多或少是一个空操作。即使数据不在 RAM 中，内存映射的性能（和易用性）也非常惊人，这些天我很少使用其他任何东西，因为速度是任何问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-19T10:21:02.487

当然，这在一般情况下是不可能的。许多人仍然为此目的使用散列，而[MD5](http://en.wikipedia.org/wiki/MD5)是一种流行的算法，它为您提供一个 128 位的文件“签名”，当文件内容发生更改时，该文件很有可能发生更改。

在一般情况下，您需要查看文件的每一位以将其包含在哈希中，并且性能可能会受到 I/O 限制。这是对文件中所有数据的顺序扫描，更新您为每个新字节使用的任何散列算法的状态。在现代 CPU 上，后者将比前者更快。[这个相当陈旧的分析](http://www.isi.edu/touch/pubs/sigcomm95.html)显示，在 Pentium 90 MHz CPU 上约为 45 MB/s。

# c# - 在 ItemTemplate 中使用列表框

> ID：301453
> 
> 赞同：1
> 
> 时间：2008-11-19T10:20:01.270
> 
> 标签：c#, wpf

我有`listbox`控制权。我`ItemTemplate`为此创建了一个，`listbox`其中有两个控件。

1.  切换按钮
2.  列表框控件

结构

```
<Listbox x:Key="Listbox1" ItemTemplate={StaticResource ListBox1ParentItemTemplate}>

</Listbox>

<Datatemplate x:Key="ListBox1ParentItemTemplate">
    <ToggleButton></ToggleButton>
    <Listbox x:Key="Listbox1" ItemTemplate={StaticResource ListBox2ParentItemTemplate}>
    </Listbox>
</Datatemplate>

<Datatemplate x:Key="ListBox2ParentItemTemplate">
    <TextBlock Text="{Binding Mode=Default, XPath=@Description}" TextWrapping="Wrap"/>
    <CheckBox DockPanel.Dock="Right" />
</Datatemplate> 
```

基本上`Listbox2`是一个`CheckedListbox`. 我的要求如下 1\. 绑定到`ToggleButton`，`Listbox1 SelectedItem`即如果选择了 4 项，`Listbox1`则第 4 项的切换按钮应自动选中，其他切换按钮应取消选中。2\. 如果选中，则应自动选中`ToggleButton`所有复选框。`Listbox2`此外，如果其中一个复选框`Listbox2`未选中，`ToogleButton`则应自动取消选中。（此功能类似于`TreeNode`子节点功能。如果选中父节点，则选择所有子节点，如果未选择子节点之一，则应取消选择父节点）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T19:08:54.090

示例代码将帮助我们更好地了解您的问题。

看起来您正在尝试在 UI 上添加一些业务逻辑，尝试创建正确的 ViewModel，然后将其绑定到控件，以便可以在 ViewModel 端完成计算，并根据您的逻辑，您可以更新 UI-（INotifyPropertyChanged )

ViewModel 将具有一个 Bool 属性（绑定到 ToggleButton），该属性会根据其他 3 个布尔值（绑定到 4 个复选框）而变化。在 ViewModel 内的任何 setter 调用都必须重新计算（这将是一个布尔 AND 操作）整个 Properties。由于 CheckBox 绑定模式默认为 TwoWay，所以实现起来会非常容易。

# unix - 远程 Unix 终端键映射

> ID：301466
> 
> 赞同：3
> 
> 时间：2008-11-19T10:25:08.373
> 
> 标签：unix, terminal, keymapping

这一直困扰着我。当我通过 ssh 或 telnet 连接到 Unix 服务器（无论何种风格）时，它总是能够正确猜测我正在登录的终端类型，因此键盘总是“正常”运行......即退格键有效。

但是当我成功登录后，它经常会错误地猜测我正在使用的终端类型并进行错误的键映射 - 特别是对于退格键，这意味着我必须发出：

```
stty erase ... 
```

键入命令来修复它。

任何 Unix 大师都知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T10:38:09.690

我认为您的意思是退格在您输入用户名和密码时正常工作，然后在您登录后停止工作。

很可能 stty 被设置为 ~/.profile 或 /etc/profile （或登录时执行的另一个脚本）中的其他内容。

找到该文件并注释该行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T10:49:39.917

安全外壳 (ssh) 很可能会在尝试联系主机之前在客户端软件中询问用户名和密码，因此它使用本地约定。

Telnet 通常会与主机（远程端）上的 telnetd 守护进程通信，并且主机将处理 I/O。

很有可能您的终端程序已正确配置为与 telnetd 通信，但是在登录后，会运行各种可能影响终端设置的脚本（例如`stty erase '^H'`）。根据您连接到的 UNIX 系统和您使用的 shell，这可能是 /etc/profile、~/.profile、~/.bashrc、~/.kshrc 等的组合）。

最好的办法是找到配置文件类型文件链中的最后一个（可能是 ~/.profile）并`stty erase 'X'`在其中放一个，其中 X 是您的终端程序实际所需的按键。

顺便说一句，profile-type 只为登录 shell 运行，而其他的则倾向于为任何创建的子 shell 运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T10:43:05.607

您使用的是什么 SSH/telnet 软件？

通过 SSH 登录时，用户名/密码输入通常由客户端处理，因此可能无关紧要。

我的猜测是您的终端软件错误地设置了 TERM 环境变量，例如。当终端设置为 xterm 等行为时设置为“vt100”。

# sql-server - 服务器 2008 和 SQL 2008 上的经典 ASP

> ID：301468
> 
> 赞同：1
> 
> 时间：2008-11-19T10:25:38.340
> 
> 标签：sql-server, asp-classic, adodb

我目前正在将我的一个客户端站点迁移到 Windows Server 2008 和 SQL 2008 设置，但是从站点连接到数据库时遇到了很多问题。

我已将数据库从 SQL 2k 备份恢复到 SQL 2008 服务器，我已正确设置用户，并且可以在管理工作室中以该用户身份登录。我已经复制了站点 .asp 文件，这些文件在没有数据库访问时可以正常加载。但是当我尝试访问数据库时，它失败并显示“用户登录失败......”。

我已经重置了密码，创建了新用户，将连接字符串从 OLEDB 更改为 SQL Native Client 并再次返回，但不断出现错误。我什至设置了一个虚拟数据库和用户，但仍然遇到同样的问题。

有谁知道为什么会发生这种情况？我缺少 SQL 或 Windows 中的设置吗？

我已经在这几个小时了，真的很感激任何想法。

更新：如果我在连接字符串中输入了错误的登录详细信息，我会在 conn.open 上收到错误，但如果我输入正确的登录详细信息，我会在 cmd.activeconnection = conn 上收到错误。不确定这是否有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T11:23:45.883

我刚刚在我们的 Windows 2008 和 SQL Server 2008 上遇到了一些类似的问题。据我所知，这些是我们使用 SQL 身份验证启用连接所经历的步骤

1.  以管理员身份登录 SQL Server，更改服务器属性以允许混合模式身份验证（SQL 身份验证和 Windows 身份验证）

2.  重新启动 SQL Server 服务

3.  使用 SQL Server 配置管理器确保协议已启用 (TCP/IP)

关于连接性，我们遇到了很多防火墙问题。有时，用户登录失败并不是问题的真正原因。我通常会创建一个带有 udl 扩展名的文件来测试连接性。

当您登录到 SQL Server 时，您是否使用 Windows 身份验证？

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:24:00.400

我一直有类似的问题。

我通过连接字符串从这里更改：

```
DRIVER={SQL Server};SERVER=80.82.xxx.xxx;DATABASE=mydatabasename;UID=myusername;PWD=mypassword 
```

对此：

```
Provider=SQLNCLI10.1;SERVER=80.82.xxx.xxx;DATABASE=mydatabasename;UID=myusername;PWD=mypassword 
```

它奏效了。

您可能想尝试使用不同的提供程序设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T23:05:15.883

由于您将数据库恢复到新服务器，因此您现在可能在数据库上有一个孤立用户。您需要将孤立用户重新连接到服务器登录。有关详细信息，请参阅[如何将现有 SQL Server 登录名连接到同名的现有 SQL Server 数据库用户](https://stackoverflow.com/q/3144380/911083)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-03-06T07:26:26.193

I got the solution, for classical asp connection string is:

```
myConnection.ConnectionString = "Driver={SQL Server};Server=xxx.xxx.xxx.xxx,1533;Database=mydb;Uid=user123;Pwd=user123d;" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T12:13:50.090

听起来像是 ADO 的问题。如果您已经拥有最新版本，您是否尝试过安装最新版本或刷新安装？

编辑：抱歉，没有注意到您正在运行 Windows Server 2008。该版本随 Windows DAC 6.0 一起提供，据我所知无法重新安装。由于您的 UDL 文件有效，我唯一能想到的就是确保您的 ASP 站点的用户身份可以访问包含 DAC dll 的文件夹。您可以尝试从 Sysinternals 运行 FileMon 并检查这些文件的访问被拒绝条目。

# asp.net - ASP.NET 在嵌套在更新面板中的用户控件中注入 javascript

> ID：301471
> 
> 赞同：5
> 
> 时间：2008-11-19T10:26:21.383
> 
> 标签：asp.net, javascript, updatepanel, custom-server-controls

我正在尝试在更新面板的异步回发期间通过 Page.LoadControl 方法将带有用户 Web 控件的 javascript 代码加载到页面中。

我已经尝试了专门为该场景设计的脚本管理器方法，但是 javascript 并没有返回给用户。

为了更好地解释我的情况：

母版页有脚本管理器，一个页面在异步回发期间通过 Page.LoadControl 方法加载用户控件。自定义控件在预渲染事件处理程序中注入 javascript。这是注入js的时间问题还是不可能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-02T01:57:15.870

为此，您可以做到

```
string scr;
scr = "<script src='/scripts/myscript.js'></script>"
Page.ClientScript.RegisterStartupScript(GetType(Page), "key", scr, false) 
```

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-12-23T19:44:26.263

**如果您不想对 JavaScript 进行硬编码**，而是从文件中包含它，请调用[ScriptManager.RegisterClientScriptInclude](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.registerclientscriptinclude.aspx)，然后在[ScriptManager.RegisterStartupScript](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.registerstartupscript.aspx)中调用您的初始化函数。

```
protected void Page_Load(object sender, EventArgs e)
{
   ScriptManager.RegisterClientScriptInclude(
      this, GetType(), "formatterScript", ResolveUrl("~/js/formatter.js"));
   ScriptManager.RegisterStartupScript(
      this, GetType(), "formatTableFunction", "formatTable()", true);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T14:08:01.480

你试过了吗

```
Page.ClientScript.RegisterStartUpScript(GetType(Page), "key", <your script here>, addSctiptTags:=true) 
```

我们在用户控件中执行此操作，它对我们有用

高温高压

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-19T20:20:59.357

您可以使用 ScriptManager 类的 RegisterStartupScript 方法来注入可执行脚本：

```
public partial class WebUserControl : System.Web.UI.UserControl
{          
    protected void Page_PreRender(object sender, EventArgs e)
    {
        ScriptManager.RegisterStartupScript(this, GetType(), ClientID, "alert(1)", true);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-06-30T16:41:01.927

如果您的控件嵌套在 asp.net 模式弹出窗口中，则将 RegisterStartupScript 放在 Page_PreRender 事件中可能不起作用。相反，当 IsPostBack = False 时将其放入 Page_Load。

# asp.net - Ajax 更新后在 jQuery 中重新绑定事件（更新面板）

> ID：301473
> 
> 赞同：80
> 
> 时间：2008-11-19T10:26:44.580
> 
> 标签：asp.net, jquery, asp.net-ajax, updatepanel

我的页面上有几个输入和选项元素，每个（几乎）都附加了一个事件，以便在页面上的某些文本更改后更新它们。我使用 jQuery，这真的很酷 :)

我还使用 Microsoft的[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)框架，利用 UpdatePanel。我这样做的原因是某些元素是基于某些服务器端逻辑在页面上创建的。我真的不想解释为什么我使用 UpdatePanel - 即使它可以（它可以付出相当大的努力）被重写为只使用[jQuery](http://en.wikipedia.org/wiki/JQuery)我仍然想要那个 UpdatePanel。

您可能已经猜到了——一旦我在 UpdatePanel 上进行了回发，jQuery 事件就会停止工作。我实际上已经预料到了这一点，因为“回发”并不是真正的新回发，所以我在 document.ready 中绑定事件的代码不会再次被触发。我还通过在 jQuery 帮助库中阅读它来证实我的怀疑。

[无论如何，在 UpdatePanel 完成更新DOM](http://en.wikipedia.org/wiki/Document_Object_Model)之后，我仍然存在重新绑定控件的问题。我最好需要一个不需要向页面添加更多 .js 文件（jQuery 插件）的解决方案，但只要能够捕获 UpdatePanel 的“更新后”，我就可以调用我的方法来重新绑定所有表单元素。 .

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2008-11-19T10:33:19.760

由于您使用的是 ASP.NET AJAX，因此您可以访问`pageLoad`事件处理程序，每次页面回发时都会调用该事件处理程序，无论是全部还是部分来自 UpdatePanel。您只需将功能放入您的页面，无需连接。

```
function pageLoad(sender, args)
{
   if (args.get_isPartialLoad())
   {
       //Specific code for partial postbacks can go in here.
   }
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2009-02-13T19:19:38.310

[`on()`](http://api.jquery.com/on/)或者您可以通过该方法检查最新的 jQuery 的实时功能。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2008-11-20T08:32:40.347

```
Sys.Application.add_load(initSomething);
function initSomething()
{
  // will execute on load plus on every UpdatePanel postback
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-08-01T17:21:00.577

从 jQuery 1.7 开始，推荐的方法是使用[jQuery 的 .on()](http://api.jquery.com/on/)语法。

**但是，请确保在文档**对象上设置事件，而不是在 DOM 对象本身上。例如，*这将在 UpdatePanel 回发之后中断*：

```
$(':input').on('change', function() {...}); 
```

...因为 ':inputs' 已被重写。改为这样做：

```
$(document).on('change', ':input', function() {...}); 
```

只要文档存在，任何输入（包括来自 UpdatePanel 刷新的输入）都会触发更改处理程序。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2009-07-29T10:05:56.883

使用以下代码

```
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(pageLoaded);

function pageLoaded(sender, args) {
    var updatedPanels = args.get_panelsUpdated();
    // check if Main Panel was updated 
    for (idx = 0; idx < updatedPanels.length; idx++) {
        if (updatedPanels[idx].id == "<%=upMain.ID %>") {
            rebindEventsForMainPanel();
            break;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-11-19T10:54:48.440

您可以使用 jQuery 和事件委托。基本上将事件挂钩到容器而不是每个元素并查询 event.target 并基于此运行脚本。

它有多种好处，可以减少代码噪音（无需重新绑定）。浏览器内存也更容易（DOM中绑定的事件更少。）

快速示例[在这里](http://pastebin.me/4922b20867e9d)。

用于轻松事件委托的[jQuery 插件。](http://www.danwebb.net/2008/2/8/event-delegation-made-easy-in-jquery)

PS 我有 99% 的把握在下一个版本中委派将出现在 jQuery 核心中。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2010-11-04T16:21:02.987

使用以下代码，您需要验证控件将使用数据选择器：

```
 <script type="text/javascript" language="javascript">

         Sys.WebForms.PageRequestManager.getInstance().add_endRequest(addDataPicker); 
         function addDataPicker(sender, args)
         {
            var fchFacturacion = document.getElementById('<%= txtFechaFacturacion.ClientID %>');
            if (fchFacturacion != null) {
               $(fchFacturacion).datepicker({ onSelect: function () { }, changeMonth: true, changeYear: true, showOn: 'button', buttonImage: '../Imagenes/calendar.gif', buttonImageOnly: true});}
         } 

    </script>

     <asp:UpdatePanel ID="upEjem" runat="server" UpdateMode="Conditional">
       <ContentTemplate>
              <div id="div1" runat="server" visible="false">
                  <input type="text" id="txtFechaFacturacion" 
                      name="txtFechaFacturacion" visible="true"
                      readonly="readonly" runat="server" />
              </div>
       </ContentTemplate>
     </asp:UpdatePanel> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2010-01-12T14:46:23.693

```
 <script type="text/javascript">
             function pageLoad() {

                 if (Sys.WebForms.PageRequestManager.getInstance().get_isInAsyncPostBack()) {

       }

            </script>

        </ContentTemplate>
    </asp:UpdatePanel> 
```

在“if”中，您可以将每次更新面板执行 AsyncPostBack 时需要执行的代码放入其中。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-03-12T19:33:13.623

使用 jQuery 的新 'live' 方法绑定您的事件。它会将事件绑定到您当前的所有元素以及所有未来的元素。查清！:)

# .net - 告诉我在 C# 4.0 中使用新的“动态”关键字的方法

> ID：301479
> 
> 赞同：4
> 
> 时间：2008-11-19T10:28:18.353
> 
> 标签：.net, dynamic, c#-4.0

这是 4.0 版中新的 C# 未来，称为动态。告诉我如何在我的代码中使用它，以及这个未来如何帮助我？

* * *

相关问题：

*   [新的“动态”C# 4.0 关键字是否会弃用“var”关键字？](https://stackoverflow.com/questions/298277/does-the-new-dynamic-c-40-keyword-deprecate-the-var-keyword)
*   [您如何看待新的 C# 4.0 'dynamic' 关键字？](https://stackoverflow.com/questions/244302/what-do-you-think-of-the-new-c-40-dynamic-keyword)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-13T13:50:08.923

一旦你有了一个动态对象，编译器就不会担心你可能对动态对象进行的任何方法调用。调用将仅在运行时解决。在这种情况下，方法 Read() 在运行时动态调度。

更美妙的是，C# 现在让您可以灵活地指定应该如何分派动态调用。您可以实现 IDynamicObject，自己编写这些绑定器。例如，看看我是如何创建一个动态阅读器类的，它允许你在它的实例上调用你自己的方法。

```
public class DynamicReader : IDynamicObject
    {
        public MetaObject GetMetaObject
              (System.Linq.Expressions.Expression parameter)
        {
            return new DynamicReaderDispatch (parameter);
        }
    }

    public class DynamicReaderDispatch : MetaObject
    {
        public DynamicReaderDispatch (Expression parameter) 
                   : base(parameter, Restrictions.Empty){ }

        public override MetaObject Call(CallAction action, MetaObject[] args)
        {
            //You might implement logic for dynamic method calls. Action.name
            // will give you the method name

            Console.WriteLine("Logic to dispatch Method '{0}'", action.Name);
            return this;
        }
    } 
```

现在，动态关键字可用于创建动态对象，就像

```
dynamic reader=new DynamicReader();
dynamic data=reader.Read(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T11:59:04.283

Anders Hejlsberg 做了一个很好的 PDC 会议，名为“C# 的未来”。有一个很好的使用动态关键字的演示：

[http://channel9.msdn.com/pdc2008/TL16/](http://channel9.msdn.com/pdc2008/TL16/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-02-11T22:51:07.263

我们在 TDD 中使用 C#“动态”关键字。

此代码无法编译，因为未实现方法“Addition”

```
[TestMethod()]
public void CalculatorThingAdd_2PositiveNumbers_ResultAdded()
{
    CalculatorThing myCalculator = new CalculatorThing();
    int result = 0; 
    int expcected = 3;

    // --> CalculatorThing  does not contain a definition for 'Addition'
    result = myCalculator.Addition(1, 2);

    Assert.AreEqual(result, expcected);
} 
```

使用“动态”关键字，代码编译并且测试失败！--> TDD

在此处查看答案 [https://stackoverflow.com/questions/244302/what-do-you-think-of-the-new-c-4-0-dynamic-keyword/2243818#2243818](https://stackoverflow.com/questions/244302/what-do-you-think-of-the-new-c-4-0-dynamic-keyword/2243818#2243818)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-19T10:37:25.603

其中一种用法是静态和动态语言之间的互操作。

假设您想从 silverlight 调用 JavaScript 函数：

```
HtmlPage.Window.Invoke("HelloWorldFunction"); 
```

如果窗口是动态的（并且正确实现），您将能够像这样使用它：

```
HtmlPage.Window.HelloWorldFunction(); 
```

# c# - 将 ListBox 选择更改为切换选择的最佳方法

> ID：301482
> 
> 赞同：1
> 
> 时间：2008-11-19T10:30:19.517
> 
> 标签：c#, .net, wpf, silverlight, listbox

我有一个 ListBox 控件，我想将其更改为具有切换选择。即单击一个项目选择它，再次单击它取消选择它。此外，单击列表中的另一个项目应该执行取消选择前一个项目并选择新项目的默认操作。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T14:05:46.430

你想要的是一个 RadioButtonList。您可以通过创建 ItemDataTemplate 并将 RadioButton 放入其中来创建一个。然后您可以修改 RadioButton 的模板，使其看起来像一个按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T13:15:40.480

我会保留标准的 ListBox，因为这样你会保留你想要的默认行为，然后为了取消选择一个项目，你可以在鼠标按下事件中处理它吗？即使用这样的东西：

```
Point newPoint = e.GetPosition(backgroundImage);

HitTestResult result = VisualTreeHelper.HitTest(this, newPoint);

if (result.VisualHit is ListBoxItem) 
```

我不确定这是否是最好的方法，我要做的唯一其他方法是从标准 Windows 控件派生我自己的 ListBox 并添加一个依赖属性以允许我处理样式中的取消选择。如果您想采用这种方法，我也不应该删除您想要保留的默认行为，我使用这种方法创建了一个在文本旁边显示图像的 ListBox。

如果你需要任何关于从哪里开始的指示，那就给我喊一声。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T16:33:25.527

我通过稍微创建两个自定义类 ToggleListBox 和 ToggleListBoxItem 自己设法实现了这一点。有几个方便的覆盖（ToggleListBox 中最重要的是创建 ListBoxItem 的那个）。

从那里很容易处理两次单击同一项目，或按空格/输入键。这两个类都有 40 行代码，并且工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-01-26T22:29:36.207

以防万一有人感兴趣，我找到了一个不同的解决方案，这对我来说非常有效。我设置`ListBox.SelectionMode`为`Multiple`并处理了 MouseDown 事件：

```
EventManager.RegisterClassHandler(typeof(ListBoxItem),
    ListBoxItem.MouseLeftButtonDownEvent,
    new RoutedEventHandler(this.HandleListBox_MouseDown));

...

void HandleListBox_MouseDown(object sender, RoutedEventArgs e)
{
    var listBoxItem = (ListBoxItem)sender;
    if (ShouldDeselectOtherListItems(listBoxItem))
    {
        listBox.SelectedIndex = -1;
    }
}

bool ShouldDeselectOtherListItems(ListBoxItem listBoxItem)
{
    return !listBoxItem.IsSelected
        && listBox.SelectedItems.Count > 0;
} 
```

其中 listBox 是父 ListBox 控件。它确保在处理系统 MouseDown 事件处理程序之前取消选择所有列表框项，从而允许切换相同列表框项的选择状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-10T21:54:34.840

我开始寻找一种“内置”的方式来做到这一点。当我看到没有，并注意到这里有一些我不太喜欢的答案时，我想我会发布我认为最好的方法。

[这个答案与Bijington](https://stackoverflow.com/users/32348/bijington)的答案最相似我只是在 ListBox 中添加了一个 PreviewMouseDown 处理程序

```
<ListBox ... PreviewMouseLeftButtonDown="ListBox_OnPreviewMouseLeftButtonDown"... /> 
```

然后在代码中

```
private void ListBox_OnPreviewMouseLeftButtonDown (object sender, MouseButtonEventArgs e)
{
    // I have a special extension for GetParent, numerous examples on the internet of how you would do that
    var lbi = ((DependencyObject) e.OriginalSource).GetParent<ListBoxItem>();
    if (lbi != null && lbi.IsSelected)
    {
        lbi.IsSelected = false;
        e.Handled = true;
    }
} 
```

然后我认为将它变成附加属性会很好，所以这里有一些伪代码来解释如何做到这一点......

```
public static class ListBoxEx
{
    private static DependencyProperty ToggleSelectionProperty = DependencyProperty.RegisterAttached(..., HandleToggleSelectionChanged);
    private static bool GetToggleSelection (DependencyObject obj) => (bool)obj.GetValue(ToggleSelectionProperty);
    private static void SetToggleSelection (DependencyObject obj, bool shouldToggle) => obj.SetValue(ToggleSelectionProperty, shouldToggle);

    private static void HandleToggleSelectionChanged (DependencyObject obj)
    {
        if (obj is ListBox listBoxObj)
        {
           bool shouldToggle = GetToggleSelection(obj);
           if (shouldToggle)
           {
               listBoxObj.PreviewMouseLeftButtonDown += ToggleListBox_OnPreviewMouseLeftButtonDown ;
           }
           else
           {
               listBoxObj.PreviewMouseLeftButtonDown -= ToggleListBox_OnPreviewMouseLeftButtonDown ;
           }
        }
    }

    private static void ToggleListBox_OnPreviewMouseLeftButtonDown (object sender, MouseButtonEventArgs e)
    {
        // I have a special extension for GetParent, numerous examples on the internet of how you would do that
        var lbi = ((DependencyObject) e.OriginalSource).GetParent<ListBoxItem>();
        if (lbi != null && lbi.IsSelected)
        {
            lbi.IsSelected = false;
            e.Handled = true;
        }
    }
} 
```

然后在代码中：

```
<ListBox ... yourNamespace:ListBoxEx.ToggleSelection="True" /> 
```

**相关信息：**

*   附加属性帮助：[Microsoft 文档链接](https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/attached-properties-overview)

*   GetParent 实用程序示例：[MSDN 链接](https://social.msdn.microsoft.com/Forums/vstudio/en-US/c47754bd-38c7-40b3-b64a-38a48884fde8/how-to-find-a-parent-of-a-specific-type?forum=wpf)

# javascript - IE中的HTML解析器问题

> ID：301484
> 
> 赞同：35
> 
> 时间：2008-11-19T10:31:47.330
> 
> 标签：javascript, html-parsing

我正在尝试创建一个对话框，该对话框仅在选择的浏览器是 IE（任何版本）时才会出现，但是我收到此错误：

> 消息：HTML 解析错误：在关闭子元素之前无法修改父容器元素 (KB927917)

这就是 "Line/Char/Code" 0 中的所有内容，所以我不知道错误在哪里。我正在使用的代码是这样的：

```
 <script type="text/javascript"> 
  <!--  
  if(BrowserDetect.browser.contains("Explorer"))
  {     
    var Nachricht = 'Hemos detectado que está utilizando ' + BrowserDetect.browser + ' ' +
  BrowserDetect.version + '. Puede que algunas funciones no estén habilitadas. <p></p> Si desea experimentar todo el potencial del portal, por favor intente desde otro navegador (browser). <p></p>Gracias
 showDialog('¡Aviso Importante!',Nachricht,'warning',10);
 } 
 </script> 
```

我注意到如果我删除“BrowserDetect.browser”和 .version 它会删除错误，但我需要那些检查 =/...任何想法将不胜感激 =)。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-11-20T00:19:17.457

您在加载文档时正在修改文档（当浏览器没有“看到”此元素的结束标记时）。这会在解析器中导致非常棘手的情况，在 IE 中是不允许的。

[IE 博客](http://blogs.msdn.com/ie/archive/2008/04/23/what-happened-to-operation-aborted.aspx)对此进行了解释。

解决方案是修改文档中较早且已完全加载的另一个元素（浏览器已经看到它的结束标记）。

顺便说一句：元素`</`中不允许使用该字符串。`<script>`在 JS 字符串中使用`<\/`which 是安全的等价物。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-06-17T20:12:56.877

我有同样的问题。我的问题是在包含`div`关闭之前我正在调用 Javascript 函数。

为了解决这个问题，我在 jQuery`ready`事件处理程序中调用了 Javascript 函数：

```
$(document).ready(function(){
    some_random_javascript_function();
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2010-09-30T11:29:23.257

阅读[porneL](http://blogs.msdn.com/ie/archive/2008/04/23/what-happened-to-operation-aborted.aspx)链接的文档，我发现了一个解决这个问题的简单方法：在脚本中添加一个参数'defer'，一切正常。

```
<script defer=true> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-19T11:58:31.320

就像 Sergey Kirienko 说的：使用条件注释。下面的代码只能由 Internet Explorer 执行。Microsoft 在[此](http://msdn.microsoft.com/en-us/library/ms537512(VS.85).aspx)页面上有很好的信息。

```
<!--[if IE]>
<script type="text/javascript"> 
 showDialog('¡Aviso Importante!','message','warning',10);
 </script>
<![endif]--> 
```

如果你想要一个特定的版本，你也可以测试它：

```
<!--[if lte IE 7]>
    <script type="text/javascript"> 
     showDialog('¡Aviso Importante!','Your are using a too old version of Internet explorer. Please upgrade','warning',10);
    </script>
<![endif]--> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-19T20:10:52.903

浏览器嗅探是一个应尽可能避免的杂项。最好嗅探您想要使用的*功能。*假设您想使用 document.evaluate() 执行一个 XPath 表达式，但您不知道它是否受支持。不要嗅探支持的浏览器，而是这样做：

```
if (document.evaluate) {
    // go ahead and use it
} else {
    // browser doesn't support it; do something else
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-19T10:41:05.517

仅处理 IE 的最佳方法是*条件注释*。你甚至不需要使用 JavaScript。参见例如[http://www.positioniseverything.net/articles/ie7-dehacker.html](http://www.positioniseverything.net/articles/ie7-dehacker.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-05-25T11:55:24.530

也许有点晚了，但是如果您使用 SWFObject 并且有 2 个具有相同 id 的 div，也会弹出此错误。

我有重复的 div，[id="flashcontent"，感谢复制和粘贴]。

通过重命名具有唯一 ID 的 div 来解决。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-26T13:20:21.473

javascript 与 navigator.appName 一起使用非常容易。（参见[http://de.selfhtml.org/javascript/objekte/navigator.htm](http://de.selfhtml.org/javascript/objekte/navigator.htm)）您可以使用它创建一个 if 查询。很简单，试试吧！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-24T22:49:14.010

当前版本的[https://apis.google.com/js/plusone.js](https://apis.google.com/js/plusone.js)在我的一个站点中的 IE8 上导致了此错误。

最简单的解决方案 - 删除 google+。

简单的解决方案 - 将代码包装在 jquery 的 document.ready -function 或类似函数中：

```
$(document).ready(function(){
     var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
     po.src = 'https://apis.google.com/js/plusone.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
}); 
```

# unit-testing - 除了正在测试的方法之外，我可以（或应该）模拟正在测试的对象上的方法吗？

> ID：301490
> 
> 赞同：2
> 
> 时间：2008-11-19T10:33:48.543
> 
> 标签：unit-testing, mocking, rhino-mocks

我有这样的课：

```
public class ClassA
{
    public bool MethodA()
    {
      //do something complicated to test requiring a lot of setup
    }
    public bool MethodB()
    {
         if (MethodA())
             //do something
         else
             //do something else
         endif
    }
} 
```

我对 MethodA 进行了测试，并想测试 MethodB，但我想做的只是验证 MethodA 是否返回 true 是否发生了某些事情，如果 MethodA 返回 false 是否发生了其他事情。我可以用 Rhino Mocks 做到这一点吗？或者我是否必须设置我在 MethodA 测试中已经拥有的所有相同的模拟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T10:52:58.847

很难说这在没有上下文的情况下是否可行，但是一种解决方案可以将 MethodA() 提取到它自己的类中，这样您就可以让 MethodB() 在模拟对象上调用 MethodA() ，这将作为您的单元测试愿望.

另一种可能性是在**您的单元测试**中继承 ClassA 并覆盖 MethodA() 以根据您的单元测试返回 true 或 false。

```
//--- pseudo-code 
public ClassAMethodAReturnTrue : public ClassA { 
  public bool MethodA() { return true; } 

  ... 
```

然后在您的测试中，您实例化 ClassAMethodAReturnTrue 而不是 ClassA。同样，您将编写 ClassAMethodAReturnFalse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T11:00:56.133

您可能必须从类中提取接口或使其抽象，我有理由确信 Rhino.Mocks 可以模拟类和接口。这意味着您应该能够执行以下操作：

```
ClassA myClass = MockRepository.PartialMock(typeof(ClassA));

Expect.Call(myClass.MethodA).Return( true );

MockRepository.ReplayAll()
Assert.AreEqual( false, myClass.MethodB() )
MockRepository.VerifyAll() 
```

语法可能有点偏离，但这应该允许 MethodB 独立于 MethodA 进行测试

# java - 哪种语言最容易和最快地处理 XML 内容？

> ID：301493
> 
> 赞同：20
> 
> 时间：2008-11-19T10:35:18.820
> 
> 标签：java, .net, python, xml, ruby

我们的开发人员了解这些语言 - Ruby、Python、.Net 或 Java。我们正在开发一个主要处理 XML 文档的应用程序。大部分工作是将预定义的 XML 文件转换为数据库表，通过数据库提供 XML 文档之间的映射，从数据库创建报告等。哪种语言最容易和最快使用？（这是一个网络应用程序）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-11-19T11:31:34.887

一个动态的语言规则。为什么？映射易于编码和更改。您不必重新编译和重建。

实际上，只要稍微聪明一点，您就可以将“XML XPATH to a Tag -> DB table-field”映射作为主应用程序导入的不相交的 Python 代码块。

Python 代码块**是**您的配置文件。它不是描述配置的`.ini`文件或文件。**就是**配置`.properties`。

 **为此，我们使用 Python、xml.etree 和 SQLAlchemy（将 SQL 从您的程序中分离出来），因为我们只需很少的努力和很大的灵活性就可以启动并运行。

* * *

**源码.py**

```
"""A particular XML parser.  Formats change, so sometimes this changes, too."""

import xml.etree.ElementTree as xml

class SSXML_Source( object ):
    ns0= "urn:schemas-microsoft-com:office:spreadsheet"
    ns1= "urn:schemas-microsoft-com:office:excel"
    def __init__( self, aFileName, *sheets ):
        """Initialize a XML source.
        XXX - Create better sheet filtering here, in the constructor.
        @param aFileName: the file name.
        """
        super( SSXML_Source, self ).__init__( aFileName )
        self.log= logging.getLogger( "source.PCIX_XLS" )
        self.dom= etree.parse( aFileName ).getroot()
    def sheets( self ):
        for wb in self.dom.getiterator("{%s}Workbook" % ( self.ns0, ) ):
            for ws in wb.getiterator( "{%s}Worksheet" % ( self.ns0, ) ):
                yield ws
    def rows( self ):
        for s in self.sheets():
            print s.attrib["{%s}Name" % ( self.ns0, ) ]
            for t in s.getiterator( "{%s}Table" % ( self.ns0, ) ):
                for r in t.getiterator( "{%s}Row" % ( self.ns0, ) ):
                    # The XML may not be really useful.
                    # In some cases, you may have to convert to something useful
                    yield r 
```

**模型.py**

```
"""This is your target object.  
It's part of the problem domain; it rarely changes.
"""
class MyTargetObject( object ):
    def __init__( self ):
        self.someAttr= ""
        self.anotherAttr= ""
        self.this= 0
        self.that= 3.14159
    def aMethod( self ):
        """etc."""
        pass 
```

**builder_today.py**众多映射配置之一

```
"""One of many builders.  This changes all the time to fit
specific needs and situations.  The goal is to keep this
short and to-the-point so that it has the mapping and nothing
but the mapping.
"""

import model

class MyTargetBuilder( object ):
    def makeFromXML( self, element ):
        result= model.MyTargetObject()
        result.someAttr= element.findtext( "Some" )
        result.anotherAttr= element.findtext( "Another" )
        result.this= int( element.findtext( "This" ) )
        result.that= float( element.findtext( "that" ) )
        return result 
```

**加载器.py**

```
"""An application that maps from XML to the domain object
using a configurable "builder".
"""
import model
import source
import builder_1
import builder_2
import builder_today

# Configure this:  pick a builder is appropriate for the data:
b= builder_today.MyTargetBuilder()

s= source.SSXML_Source( sys.argv[1] )
for r in s.rows():
    data= b.makeFromXML( r )
    # ... persist data with a DB save or file write 
```

* * *

要进行更改，您可以更正构建器或创建新构建器。您调整加载器源以确定将使用哪个构建器。您可以毫不费力地将 builder 的选择设为命令行参数。动态语言中的动态导入对我来说似乎有点矫枉过正，但它们很方便。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-19T11:40:58.690

## XSLT

我建议根据需要使用[XSLT 模板](http://en.wikipedia.org/wiki/Xslt)将 XML 转换为 INSERT 语句（或任何您需要的）。
您应该能够从您提到的任何语言中调用 XSLT。

这将导致比长期执行更少的代码。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-19T10:48:54.143

在 .NET 中，C# 3.0 和 VB9 为使用 LINQ to XML 处理 XML 提供了出色的支持：

[LINQ to XML 概述](http://msdn.microsoft.com/en-us/library/bb387061.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-19T13:13:16.740

我将对[Hpricot](http://code.whytheluckystiff.net/hpricot/)提出一个建议，这是一种流行的 Ruby XML 解析器（尽管有许多类似的选项）。

例子：

给定以下 XML：

```
<Export>
  <Product>
    <SKU>403276</SKU>
    <ItemName>Trivet</ItemName>
    <CollectionNo>0</CollectionNo>
    <Pages>0</Pages>
  </Product>
</Export> 
```

您只需通过以下方式解析：

```
FIELDS = %w[SKU ItemName CollectionNo Pages]

doc = Hpricot.parse(File.read("my.xml")) 
(doc/:product).each do |xml_product|
  product = Product.new
  for field in FIELDS
    product[field] = (xml_product/field.intern).first.innerHTML
  end
  product.save
end 
```

听起来您的应用程序非常适合[Rails](http://www.rubyonrails.org)应用程序，您可以快速制作所需的原型，与您选择的数据库直接交互，并且可以根据需要输出数据。

[这是使用 Hpricot 解析 XML](http://code.whytheluckystiff.net/hpricot/wiki/HpricotXML)的另一个很棒的资源页面，它可能与[文档](http://code.whytheluckystiff.net/doc/hpricot/)一样有帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-11-19T13:17:41.333

为了快速周转，我发现[Groovy](http://groovy.codehaus.org/Processing+XML)非常有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-19T10:50:18.527

使用 LiNQ 到 XML 的 C# 或 VB.Net。LiNQ to XML 非常强大且易于实现

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-28T21:15:01.293

一个有趣的解决方案可能是 Ruby。只需使用 XML-> 对象映射器，然后使用对象关系映射器 (ORM) 将其放入数据库中。我不得不用 ruby​​ 做一个关于 XML 映射的简短演讲，你可以看看幻灯片，看看你最喜欢什么：http: [//www.marc-seeger.de/2008/11/25/ruby-xml-mapping/](http://www.marc-seeger.de/2008/11/25/ruby-xml-mapping/)

至于 ORM：Active Record 或 Datamapper 应该是要走的路

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-11-28T21:27:31.483

ECMAScript 使用 E4X（“ECMAScript for XML”）很好地处理 XML。这可以在 Adob​​e 最新版本的 ActionScript 版本 3 中看到。我相信 JavaScript 2（我认为将与 Firefox 4 一起发布）也将支持 E4X。

不确定独立 JavaScript 解释器（即 Rhino 等）的支持，我想这对你来说最重要......但如果你觉得它看起来不错，你可以随时查看他们对它的支持（并向我们​​报告:-))。

有关简单示例，请参见[http://en.wikipedia.org/wiki/E4X#Example](http://en.wikipedia.org/wiki/E4X#Example)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-29T12:42:15.897

如果您精通 Java，可以尝试使用[VTD](https://vtd-xml.sourceforge.io/) XML Parser 来解析大量 XML 数据。

# c# - C# 应用程序中的 Opera

> ID：301497
> 
> 赞同：1
> 
> 时间：2008-11-19T10:37:18.660
> 
> 标签：c#, opera, toolbox

我在袖珍电脑上有一个 C# 应用程序。它看起来像一个浏览器，但有一些底层额外的东西。目前我正在使用.net 的网络浏览器，但我想使用 Opera 浏览器的功能。是否可以在我的表单上添加歌剧项目？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T14:46:21.093

据我所知，Opera 没有可用于将浏览器嵌入应用程序的 API。我在谷歌上做了一些搜索，并没有想出任何东西。

# c# - 如何检测流中的图像格式

> ID：301499
> 
> 赞同：2
> 
> 时间：2008-11-19T10:37:26.837
> 
> 标签：c#, .net

我需要检测图像格式来保存像 image1.jpg、image2.gif 这样的图像，但我只有一个流，我不知道图像格式（gif、jpeg、png 等）

有没有办法从流中检测图像格式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-19T10:45:18.333

用于`Image.FromStream`加载图像，然后您可以看到它是什么`Image.RawFormat`。

# asp.net - ASPNET RoleProvider 出错

> ID：301502
> 
> 赞同：0
> 
> 时间：2008-11-19T10:37:55.663
> 
> 标签：asp.net, web-config, machine.config

我刚刚在 win2003 服务器上安装了一个应用程序，我收到了这个错误：

```
Line 149:    <roleManager>
Line 150:      <providers>
Line 151:        <add name="AspNetSqlRoleProvider" connectionStringName="LocalSqlServer" applicationName="/" type="System.Web.Security.SqlRoleProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
Line 152:        <add name="AspNetWindowsTokenRoleProvider" applicationName="/" type="System.Web.Security.WindowsTokenRoleProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
Line 153:      </providers>

Source File: C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Config\machine.config    Line: 151 
```

我正在使用 RoleProvider 并在 web.config 中正确配置（它适用于其他服务器），如下所示：

```
<membership defaultProvider="AdminMembershipProvider">
  <providers>
    <clear/>
    <add name="AdminMembershipProvider" connectionStringName="SiteSqlServer" type="MyApp.Providers.AdminMembershipProvider" applicationName="MyApp" writeExceptionsToEventLog="false" enablePasswordRetrieval="false" enablePasswordReset="false" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" PasswordFormat="Clear" MinRequiredNonAlphanumericCharacters="1" MinRequiredPasswordLength="8" MaxInvalidPasswordAttempts="5" PasswordAttemptWindow="10">
    </add>
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="AdminRoleProvider" cacheRolesInCookie="true">
  <providers>
    <add name="AdminRoleProvider" type="MyApp.Providers.AdminRoleProvider" writeExceptionsToEventLog="true"/>
  </providers>
</roleManager> 
```

关于它为什么在 machine.config 而不是 web.config 上寻找配置的任何提示？我该如何调试呢？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T11:03:33.773

Machine.Config 保存与整台计算机相关的设置。Machine.Config 的某些元素允许您覆盖它们。如果一个元素有一个`allowOverride = "true"`属性，它可以被 web.config 覆盖。但是，如果它适用于其他机器，我会查看 machine.config 文件中的差异。

请记住，编辑 machine.config esp 通常不是一个好主意。如果您计划部署到多台机器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T11:59:57.573

事实上，它首先读取 machine.config，然后是取代 machine.config 的 web.config。但在某些情况下，web.config 中的值会附加或包含在列表中，因此可能有点难以理解。

但是在工作服务器上仔细阅读 machine.config 可能会为您提供更多信息。

# c - 如何在 C -> ruby 接口中返回变量？

> ID：301504
> 
> 赞同：0
> 
> 时间：2008-11-19T10:38:05.947
> 
> 标签：c, ruby, interface, ffi, rubydl

对先前问题的跟进，显示了当我尝试从目标库获取错误消息时失败的部分：

```
require 'gt4r'

@@test_environment = "INCLUDE=C:\\graphtalk\\env\\aiadev\\config\\aiadev.ini"
@@normal_user = "BMCHARGUE"

describe Gt4r do
  it 'initializes' do
      rv = Gt4r.gTD_initialize @@normal_user, @@normal_user, @@test_environment
      Gt4r.gTD_get_error_message rv, @msg
      @msg.should == ""
      rv.should == 0
  end
end 
```

我希望在@msg 中返回错误消息，但是运行时我得到以下信息：

```
Gt4r
(eval):5: [BUG] Segmentation fault
ruby 1.8.6 (2008-08-11) [i386-mswin32]

This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

如果我使用符号 (:msg) 来代替：

```
C:\code\GraphTalk\gt4r_dl>spec -fs -rgt4r gt4r_spec.rb

Gt4r
- initializes (ERROR - 1)

1)
NoMethodError in 'Gt4r initializes'
undefined method `to_ptr' for :msg:Symbol
(eval):5:in `call'
(eval):5:in `gTD_get_error_message'
./gt4r_spec.rb:9:

Finished in 0.046 seconds

1 example, 1 failure 
```

显然，我遗漏了一些关于在 ruby​​ 和 C 之间传递参数的内容。我需要什么样的 ruby​​ 变量才能返回我的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T12:39:49.070

哪个位失败？我猜是这样的：

```
Gt4r.gTD_get_error_message rv, @msg 
```

方法是如何实现的？该方法的 C 签名是什么？(*字符)?

顺便说一句：冒着听起来像破唱片的风险，写一个 C 扩展比试图把东西硬塞进 DL 要容易得多。AFAIK，没有人使用深度学习，除了可能一次性的黑客来映射单个功能。您提到 FFI 在 Windows 下不起作用，您可能想看看 RubyInline ( [http://www.zenspider.com/ZSS/Products/RubyInline/](http://www.zenspider.com/ZSS/Products/RubyInline/) )，或者只使用普通的 C 扩展名（如果您知道 C足以使用 DL，您对 C 的了解足以编写扩展）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T14:16:02.810

`FFI`现在可以在 Windows 上运行。

这是一个在 Ruby 中使用的示例`FFI`，展示了如何将 C 函数中的变量返回到 Ruby 中。

*   [从返回指向字符串的指针的 DLL 调用 C 函数](https://stackoverflow.com/a/14182535/181638)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-11-19T12:43:44.600

@msg 此时是否已初始化：

```
Gt4r.gTD_get_error_message rv, @msg 
```

如果 @msg 为 nil，DL 可能会将其转换为空指针，当您的 lib 尝试取消引用它时，该指针会崩溃。

# design-patterns - “外观设计模式”中有超过 1 个外观类？

> ID：301509
> 
> 赞同：1
> 
> 时间：2008-11-19T10:39:42.417
> 
> 标签：design-patterns, oop

在外观设计模式中创建超过 1 个外观*类*（不是实例）是否可以接受？我的意思是，它是正式禁止的吗？它会抑制“外观设计模式”本身的优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-19T10:42:13.113

外观基本上是一种方便的功能分组。如果存在多个这样的分组，您当然可以制作多个外观。

请注意，当使用依赖注入模式时，外观模式的使用远没有以前那么普遍。

# winforms - 将简单形式转换为 exe 文件的最简单方法是什么？

> ID：301510
> 
> 赞同：1
> 
> 时间：2008-11-19T10:40:59.857
> 
> 标签：winforms, forms, webforms

我有一个离线纸质表格。我需要将其转换为人们可以在计算机上使用的软件来填写和提交信息。由于表格（它是纳税申报表）需要相当长的时间来填写，所以在网上不方便。我宁愿有一个简单的 exe 来收集信息，应用验证规则，然后上传包含填充信息的结构化数据文件（如 XML 文件）。

* * *

我的意思是我有一个离线纸质表格。我需要将其转换为人们可以在计算机上使用的软件来填写和提交信息。由于表格（它是纳税申报表）需要相当长的时间来填写，因此仅在线获取并不方便。我宁愿有一个简单的 exe 来收集信息，应用验证规则，然后上传包含填充信息的结构化数据文件（如 XML 文件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-22T18:29:32.963

有许多 Windows 程序可以采用纸质表格并将其转换为人们可以填写的电子表格，包括 Acrobat、Form Pilot 和 OmniForm。

[OmniForm](http://www.nuance.com/omniform/)可能对您有好处，因为它允许计算字段等内容，并且可以以 XML 等结构化格式输出数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T10:43:17.027

你到底是什么意思？当您构建一个包含表单的项目时，如果项目类型是“Windows 窗体应用程序”，它将已经构建一个可执行文件。

如果您有一个包含多个表单的项目，并且每个表单需要一个可执行文件，那么您应该将您的项目拆分——每个表单一个项目。（您*可以*根据可执行文件名称使代码显示不同的形式 - 或者有多个入口点并使用不同的`/main`标志构建相同的代码，但这会非常讨厌。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-23T19:54:03.543

为什么必须有 .exe？Acrobat 可以创建可以离线填写和查询的 PDF 表单。如果您的用户在线，为什么不创建一个用户填写并将数据直接提交到您的数据库或其他什么的 Web 前端？无需创建可执行文件、下载或上传任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T11:04:09.497

诚然，您在编译 Windows.Forms 应用程序时得到一个 exe，只检查项目的 bin 文件夹。

您可以在 Visual Studio 的 Project/Properties/Application/Output 类型中检查输出。

这有点离题：您可以使用[NGen](http://msdn.microsoft.com/en-us/library/6t9t5wcf(VS.80).aspx)（Microsoft 实用程序）创建本机映像，但有一些限制。这意味着代码将被编译为本机映像，直接放入缓存并从那里运行，而无需每次都使用 JIT。正如 Jon 所指出的，这可以提高性能，但它不是真正的本机 exe。

# unit-testing - 单元测试站点地图节点

> ID：301517
> 
> 赞同：4
> 
> 时间：2008-11-19T10:42:40.477
> 
> 标签：unit-testing, tdd, mocking, sitemap

有谁知道如何对 SiteMapNode 进行单元测试？我们正在构建一些自定义导航控件，它使用自定义属性从站点地图呈现无序的 html 列表。

我正在尝试遵循测试优先的方法，但发现 SiteMapNode 对 HttpContext 具有内部依赖关系。为了遍历站点地图文件，它坚持使用虚拟路径来查找站点地图文件。

我已经构建了一个站点地图，我想对其进行测试，但我不想在 Web 项目中创建我的单元测试环境（！）

有什么建议么？嘲讽？覆盖相关成员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T10:14:28.457

一个相当无聊的问题，所以没有得到回应也就不足为奇了！对于可能偶然发现此问题的其他任何人，这是我的首选解决方案：

我发现处理此问题的最佳方法是将物理站点地图加载到 xml 文档中。然后我有一个 NavigationNodeFactory，它从 xml 文档验证并构建我自己的复合 NavigationNode 树。

我的 NavigationNode 类与我喜欢的一样固执己见，并解决了我在 SiteMap 和 SiteMapProvider 中发现的问题，即实施者的可测试性差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-20T10:45:48.503

我认为问题可能出在您的描述中，您试图首先测试一个已经存在的类 - SiteMapNode。

您将希望在应用程序中测试站点地图节点的**使用**，因此我建议如果您想对 sitemapnode 类执行操作，请使用中间 ISiteMapProvider 或您自己制作的类似摘要进行包装，并使用自定义导航控件与之交互。

然后，您可以拥有一个用于运行时调用 SiteMapNode 进行操作的 SiteMapNodeProvider，以及用于将您的测试值传递给自定义控件的单元测试的 StubbedSiteMapProvider。

# debugging - 你最好的调试提示是什么？

> ID：301525
> 
> 赞同：8
> 
> 时间：2008-11-19T10:44:18.337
> 
> 标签：debugging

您认为每个人都应该使用的您最喜欢的语言的专家调试提示是什么？

作为示例，我将提供我的 C++ 调试提示，它们之间的提示帮助我摆脱了我遇到的大多数错误，使用这种通常难以调试的语言。

**C++**

*   将编译器的警告级别提高到最大，然后停止那些经常发生并且您决定不关心的警告（对我来说，这是未使用的参数）。g++ 不会警告函数中缺少返回语句（我经常发现的一个问题），直到警告级别非常高。

*   了解如何打开编译器的调试标准库并使用它！（ -D_GLIBCXX_DEBUG 用于 g++）。这会发现很多错误，也有助于准确显示错误发生的位置。

*   总是，总是，总是通过一个非常好的内存检查器运行你的代码，比如[valgrind](http://valgrind.org/)，并修复它产生的所有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-19T10:52:55.993

了解 VS 内存处理程序在处理内存时写入的不同幻数意味着什么。

0xCDCDCDCD 在堆中分配，但未初始化。由 malloc
0xCCCCCCCC 分配到栈上，但没有初始化。
0xDDDDDDDD 释放堆内存。通过释放
0xFDFDFDFD "NoMansLand" 栅栏自动放置在堆内存的边界。永远不应该被覆盖。如果您确实覆盖了一个，那么您可能会离开数组的末尾。
0xFEEEFEEE 由 HeapFree 删除的内存
0xBAADF00D 在堆中分配，但未初始化。通过 HeapAlloc
0xABABABAB 不知道。如果有人知道这是什么意思，请补充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T11:42:20.793

我自己的几个，因为花了太多的夜晚调试编译器或运行时环境可能会警告我是否正确使用它的东西：

*   如果您在 C++ 中使用指针做任何事情，请在合适的地方断言（）它们。事实上，assert()ing 不变量通常是一个好主意，并且可以将一个晦涩的 bug 的调试时间从几周缩短到几分钟。只要记住在发布版本中关闭它们即可。哦，不要在里面放任何有副作用的东西，否则你会调试你的发布版本一段时间。别问我是怎么知道的
*   同样，BOOST_STATIC_ASSERT 在检查编译时可以检查的差异方面非常有帮助
*   [PurifyPlus](http://www.ibm.com/developerworks/rational/products/purifyplus/)或[valgrind](http://valgrind.org/)等内存调试器是出色的省时设备，应该在每个开发人员的机器上
*   了解如何正确使用调试器，以便您可以充分利用它的功能，而不仅仅是将其用作允许您单步执行代码的设备
*   如果你真的卡住了，向同事解释问题和代码
*   对于 C++，一旦您正确配置，像[FlexeLint/PC-Lint](http://www.gimpel.com/)这样的工具可以帮助查明很多难以找到的东西。你必须花时间来配置它，否则你会淹没在警告中
*   如果您正在编写 C++ 并且您正在使用标准容器，请编写使用迭代器的代码，并让运行时的调试版本（或调试 STL）捕获您的错误。如果你使用索引来引用 std::vector<> 中的元素，你必须自己找到那些
*   如果可以的话，通过不同的编译器运行代码，并注意每个编译器产生的警告。但是，请确保它们处于相似的语言兼容性级别（通过 MS VC++ 6 运行现代 C++ 代码没有意义），否则您最终会遇到实际上并不存在的问题。

理想情况下，您应该在需要启动调试器之前尝试捕获问题 - 与在调试器中跟踪它然后修复它相比，您可以调整任何会导致编译错误的东西都更容易修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T10:46:04.573

在您的监视窗口中始终显示“err, hr”。我将展示调用 GetLastError 得到的结果。当您单步执行代码时，它会动态更新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-19T13:17:05.483

我的调试（PHP）主要包括对（密码，IP锁定）页面最后一行的补充：

```
echo '<pre>'; print_r($GLOBALS); echo '</pre>'; 
```

如果问题不存在，您可以“正确”调试，但 10 次中有 9 次它会从中跳出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T13:09:02.350

不确定这是否算作调试，但对于 C 和 Objective-C 代码，我发现[LLVM/Clang 静态分析器](http://clang.llvm.org/StaticAnalysis.html)非常宝贵。甚至在您看到它们的影响之前帮助发现错误、内存泄漏和逻辑错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-19T13:31:01.370

在 Visual C++ 调试器中，您经常发现自己处于内联单行函数中，您无法进入并查看其本地函数。例如：

```
 class foo
  {
     int bar() { int i = func1(); int j = func2(i); return j; }
  }; 
```

要显示 i 的值，您需要一个堆栈帧。但是调试器不会进入 bar() 并向您显示 i 的内容。

这里的技巧是在调试器中启用内联汇编。这扩展了函数的处理器指令，现在不止一行。所以现在你可以进入函数并查询变量。

或者也许还有另一种方法。:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-05-11T21:43:30.083

偶尔运行您的发布版本，而不是您的调试版本。某些错误仅在打开优化时才会发生。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2010-05-11T21:35:10.000

我对此没有任何参考，但有人告诉我 0xABABABAB 地址意味着“超出分配内存范围的内存”。希望能帮助到你。

# c++ - Ant -> Nant -> Visual Studio 2005 构建

> ID：301526
> 
> 赞同：3
> 
> 时间：2008-11-19T10:44:22.720
> 
> 标签：c++, visual-studio-2005, ant, nant, visual-c++-2005

我正在开发一个大型 C++ 项目。它使用单个 Ant 脚本构建，这使得编译针对多个平台和编译器的相同源代码成为可能。

但是，我只需要为 Windows 平台和 Visual Studio 2005 C++ 编译器工作。如果我可以在 Visual Studio 中编写代码和编译，而不是像现在这样使用 Notepad++ 和 Ant 脚本，那就太好了。

我尝试为 Visual Studio 2005 安装 Nant 和 Nant 插件，并使用现有的 Ant 脚本，但似乎 Ant 脚本不能用作 Nant 脚本。

有没有办法将 Ant 脚本转换为 Nant？是否有任何其他解决问题的方法，或者我必须手动创建 Visual Studio 解决方案和项目？

我会尽量避免这样的解决方案，因为我有一堆我不知道在这种情况下如何使用的测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-28T20:32:21.457

据我所知，没有*自动*将 Ant 脚本转换为 NAnt 的方法。但是，由于 NAnt 是基于 Ant 的，因此只要任务是“核心”任务，转换过程就不会离原来的太远。可能在 Ant 脚本上进行 XSLT 转换以转换为 NAnt，因为两者都是 XML。如果要走这条路，则应根据原始 Ant 脚本*动态地*进行转换，以便只需要维护一组脚本。

如果您想在 Visual Studio 中编写和编译您的 C++ 代码，那么很难超越 IDE 内置的功能。但是，这需要创建项目文件。否则，似乎有人会冒险使用该工具进行一场艰苦的战斗。

测试的一种选择是通过[自定义构建步骤](http://msdn.microsoft.com/en-us/library/e85wte0k(VS.80).aspx)调用以运行它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-23T13:23:13.813

根据我的经验，将 VS 与 ant 集成的最佳方法是在 IDE 端调用 ant 作为自定义构建步骤（正如 Scott Saad 建议的那样），并从 ant 调用 msbuild.exe 作为可执行文件来构建项目命令行。

我知道这个问题已经得到解答——我只是想建议使用 msbuild 的可能性，因为它是迄今为止从 ant 本身构建 VS 项目的最简单方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-12-13T23:09:32.970

使用封装在 NAnt 任务中的 MSBuild 任务。我在上一份工作中不得不这样做，这是我能想出的最好的解决方案，但我又一次可能非常糟糕。

# python - 将带有日期和时间的字符串转换为日期

> ID：301528
> 
> 赞同：22
> 
> 时间：2008-11-19T10:45:01.190
> 
> 标签：python, datetime

我有这个日期时间字符串：

```
post["date"] = "2007-07-18 10:03:19" 
```

我想只提取“2007-07-18”作为日期。我已经看到了一些参考，`strptime`但我不确定如何使用它。如何从此字符串中提取日期？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2008-11-19T11:05:41.787

其他两个答案很好，但如果您真的想要其他日期，您可以使用该`datetime`模块：

```
from datetime import datetime
d = datetime.strptime('2007-07-18 10:03:19', '%Y-%m-%d %H:%M:%S')
day_string = d.strftime('%Y-%m-%d') 
```

现在可能有点矫枉过正，但它会派上用场。[您可以在此处](http://docs.python.org/library/time.html#time.strftime)查看所有格式说明符。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-19T10:50:03.177

在您的情况下，只需使用拆分：

```
>>> d1="2007-07-18 10:03:19"
>>> d1.split()[0]
'2007-07-18'
>>> 
```

（用空格分割后的第一部分）

如果你坚持使用`strptime`，格式为`"%Y-%m-%d %H:%M:%S"`：

```
>>> import time
>>> time.strptime(d1,"%Y-%m-%d %H:%M:%S")
time.struct_time(tm_year=2007, tm_mon=7, tm_mday=18, tm_hour=10, tm_min=3, tm_sec=19, tm_wday=2, tm_yday=199, tm_isdst=-1)
>>> time.strftime("%Y-%m-%d", _)
'2007-07-18'
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T10:51:19.880

可能不是您要查找的内容，但您可以拆分字符串：

```
post["date"].split()[0] 
```

会给你`'2007-07-18'`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T06:25:29.037

您可以使用[https://pypi.python.org/pypi/python-dateutil](https://pypi.python.org/pypi/python-dateutil)，它可以支持任何日期时间格式，例如：

```
>>> from dateutil.parser import parse
>>> d1="2007-07-18 10:03:19"
>>> date_obj = parse(d1)
>>> date_obj
datetime.datetime(2007, 7, 18, 10, 3, 19)
>>> date_obj.strftime("%Y-%m-%d")
'2007-07-18'
>>> d2 = "18-07-2007 10:03:19"
>>> d = parse(d2)
>>> d
datetime.datetime(2007, 7, 18, 10, 3, 19)
>>> d.strftime("%Y-%m-%d")
'2007-07-18' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-19T11:10:27.970

您可以使用`mx.DateTime`来自[eGenix的模块](http://www.egenix.com/products/python/mxBase/mxDateTime/)

```
import mx

date_object = mx.DateTime.Parser.DateTimeFromString('2007-07-18 10:03:19')
print "%s-%s-%s" % (date_object.year, date_object.month, date_object.day) 
```

将输出：`2007-07-18`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-19T11:11:54.737

您可以使用[parsedatetime](http://pypi.python.org/pypi/parsedatetime/)模块。

```
>>> from parsedatetime.parsedatetime import Calendar
>>> c = Calendar()
>>> c.parse("2007-07-18 10:03:19")
((2008, 11, 19, 10, 3, 19, 2, 324, 0), 2) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-29T07:57:56.390

```
import dateutil.parser
a = "2007-07-18 10:03:19"
d = dateutil.parser.parse(b).date() 
```

您的输出将是这样的**

> datetime.date(2007, 07, 18)

**

# wpf - 如何在 Windows 中模拟其他鼠标？

> ID：301532
> 
> 赞同：2
> 
> 时间：2008-11-19T10:46:10.470
> 
> 标签：wpf, multipoint

我正在使用[MultiPoint](http://www.microsoft.com/unlimitedpotential/programs/multipoint.mspx) SDK 为较不富裕国家的儿童创建一个协作教育应用程序，那里的教室里没有每个学生都使用一台计算机。

因为我们需要支持最多 40 个连接到一台计算机的鼠标，所以我们需要一种自动化的方式来测试我们的软件。SDK 将支持它可以在系统上找到的尽可能多的鼠标，并检测何时添加和删除鼠标。每个鼠标在 WPF 窗口中显示为“虚拟”鼠标指针。每个孩子都可以独立控制屏幕上的“他们的”指针。

我们想创建一个测试工具，让 Windows 认为它​​有多个鼠标。线束需要创建这些假设备（40+）并使用它们发送鼠标消息，如移动、按下按钮等

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T15:21:43.597

将鼠标伪造到您需要 MultiPoint 的程度将需要设备驱动程序。这不是一件容易的事，但绝不是不可能的。

最好的方法可能是您可以使用[Setup API安装的](http://msdn.microsoft.com/en-us/library/aa972910.aspx)[HID 微型驱动](http://msdn.microsoft.com/en-us/library/ms790173.aspx)程序。然后驱动程序将接受s ，这将导致它模拟鼠标输入报告。`DeviceIoControl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-10-06T15:19:03.413

您可以在 ddk（驱动程序开发工具包）中使用 dsf（设备模拟框架）来添加模拟设备，不要担心它的示例是在 vbscript 中，您只需要找出正确的输入报告格式和要发送的代码。

# java - PHP var_dump 的 Java 等价物是什么？

> ID：301536
> 
> 赞同：137
> 
> 时间：2008-11-19T10:49:51.303
> 
> 标签：java, php

**PHP 有一个[var_dump()](http://php.net/var_dump)函数，它输出对象的内部内容，显示对象的类型和内容。**

例如：

```
class Person {
  private $firstName;
  private $lastName;

  public function __construct($firstName, $lastName) {
    $this->firstName = $firstName;
    $this->lastName = $lastName;
  }
}

$person = new Person('Jon', 'Smith');
var_dump($person); 
```

将输出：

```
object(Person)#1 (2) {
  ["firstName:private"]=>
  string(3) "Jon"
  ["lastName:private"]=>
  string(5) "Smith"
} 
```

**Java 中的等价物是什么？**

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2008-11-19T11:04:20.633

**它在 Java 中并不那么成熟，所以你不能免费获得它。** 它是通过约定而不是语言结构完成的。在所有数据传输类中（甚至可能*在您编写的所有类中......*），您应该实现一个明智的[`toString`](http://java.sun.com/javase/6/docs/api/java/lang/Object.html#toString())方法。所以在这里你需要`toString()`在你的`Person`类中覆盖并返回所需的状态。

有一些[实用程序可以](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/builder/ToStringBuilder.html)帮助编写一个好的 toString 方法，或者大多数 IDE 都有一个自动`toString()`编写快捷方式。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2008-11-19T15:56:22.543

根据我的经验，var_dump 通常用于调试 PHP，而不是逐步调试器。在 Java 中，您当然可以使用 IDE 的调试器来查看对象内容的可视化表示。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-11-19T11:06:04.330

您的替代方法是覆盖`toString()`对象的方法以您喜欢的方式输出其内容，或者使用反射来检查对象（以类似于调试器所做的方式）。

使用反射的优点是您不需要将单个对象修改为“可分析”，但是会增加复杂性，如果您需要嵌套对象支持，则必须编写它。

`Object`此代码将列出“o”的字段及其值

```
Field[] fields = o.getClass().getDeclaredFields();
for (int i=0; i<fields.length; i++)
{
    System.out.println(fields[i].getName() + " - " + fields[i].get(o));
} 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-12-13T13:02:26.137

我认为最好的方法是使用 google-gson（将 JSON 转换为 Java 对象的 Java 库，反之亦然）

[下载](http://code.google.com/p/google-gson/)它，将“jar”文件添加到您的项目中

```
HashMap<String, String> map = new HashMap<String, String>();

map.put("key_1", "Baku");
map.put("key_2", "Azerbaijan");
map.put("key_3", "Ali Mamedov");

Gson gson = new Gson();

System.out.println(gson.toJson(map)); 
```

输出：

```
{"key_3":"Ali Mamedov","key_2":"Azerbaijan","key_1":"Baku"} 
```

您可以将任何对象（数组、列表等）转换为 JSON。我认为，它是 PHP 的**var_dump()的最佳模拟**

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-11-19T13:25:34.000

apache commons lang 包提供了这样一个类，它可以用来构建一个默认的 toString() 方法，使用反射来获取字段的值。看看[这个](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/builder/ReflectionToStringBuilder.html)。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-05-12T15:30:44.373

我喜欢使用 GSON，因为它通常已经依赖于我正在处理的项目类型：

```
public static String getDump(Object o) {
    return new GsonBuilder().setPrettyPrinting().create().toJson(o);
} 
```

或者将 GSON 替换为您使用的任何其他 JSON 库。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-01-12T22:53:13.653

我使用[Jestr](http://sourceforge.net/projects/jestr "小丑")得到了合理的结果。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-09-18T09:28:14.790

我找到了这个转储对象的方法，试试这个[String dump(Object object)](http://code.google.com/p/dump-to-string/source/browse/src/main/java/com/borntojava/dts/DumpToString.java)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-10T13:17:57.030

我认为您可以做的类似事情是创建一个简单的方法来打印您想要查看的对象。像这样的东西：

```
public static void dd(Object obj) { System.out.println(obj); } 
```

它与 var_dump() 不同，但您可以大致了解它，而无需转到调试器 IDE。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-24T11:52:25.533

只是为了添加字段解决方案（setAccessible），以便您可以访问对象的私有变量：

```
public static void dd(Object obj) throws IllegalArgumentException, IllegalAccessException {
    Field[] fields = obj.getClass().getDeclaredFields();
    for (int i=0; i<fields.length; i++)
    {
        fields[i].setAccessible(true);
        System.out.println(fields[i].getName() + " - " + fields[i].get(obj));
    } 

} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2010-09-23T12:29:11.683

您进行 XML 序列化，即使是深度嵌套的对象，您也应该得到一个非常简洁的表示。

# sql - 是否有更有效的方法来执行此 SQL 选择？

> ID：301544
> 
> 赞同：3
> 
> 时间：2008-11-19T10:52:26.277
> 
> 标签：sql, sorting, performance

我有这个 SQL 查询：

```
SELECT * FROM IMAGES WHERE
IMAGENAME in ('IMG1', 'IMG2', 'IMG3', 'IMG4', 'IMG5', 'IMG6')
ORDER BY CASE IMAGENAME
  WHEN 'IMG1' THEN 1
  WHEN 'IMG2' THEN 2
  WHEN 'IMG3' THEN 3
  WHEN 'IMG4' THEN 4
  WHEN 'IMG5' THEN 5
  WHEN 'IMG6' THEN 6
  ELSE 7
END 
```

我不能保证 IMAGENAME 列表将按字母顺序排列，因此是 case 语句，但我更愿意在数据库中排序而不是在代码中排序，因为我比我更信任它们的排序代码:)

SQL Server 分析 78% 的执行时间花在排序上——我可以减少这个吗？

当我们以 SQL Server 和 Oracle 为目标时，它需要是相当普通的 SQL。

任何调整建议都会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-19T11:24:01.577

我不确定这是否在您的目标数据库中可用，但它可能至少可以作为更好方法的灵感。在 MySQL 中，您可以使用 FIELD() 函数执行您想要的操作，如下所示：

```
SELECT * FROM IMAGES WHERE
  IMAGENAME IN ('IMG1', 'IMG2', 'IMG3', 'IMG4', 'IMG5', 'IMG6')
  ORDER BY FIELD(IMAGENAME, 'IMG1', 'IMG2', 'IMG3', 'IMG4', 'IMG5', 'IMG6'); 
```

FIELD() 函数采用第一个参数，然后根据参数列表中的位置返回一个整数，如果参数列表中不存在，则返回零。这使您能够为您的查询创建完全自定义的排序。

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_field)

我希望 SQL Server 或 Oracle 中可能会有类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T11:15:53.590

```
SELECT *
FROM IMAGES
WHERE IMAGENAME in ('IMG1', 'IMG2', 'IMG3', 'IMG4', 'IMG5', 'IMG6')
ORDER BY IMAGENAME ASC 
```

您不需要剥离图像名称；您只选择了上面提到的少数情况，并且 order by 可以很好地订购字符串。此外，“else”条件没有任何意义，因为它永远不会被使用，因为您在 where 子句中去掉了所有其他选项。

注意：这是基于您发布的查询，如果有更多的条件或可能性，您也应该给出它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T11:12:39.293

您能否在写入数据库时​​将的`IMG`（或非数字）部分剥离到新列，然后对新的仅数字列进行排序？`IMAGENAME`

例如：

```
SELECT * FROM IMAGES WHERE
IMAGENAME in ('IMG1', 'IMG2', 'IMG3', 'IMG4', 'IMG5', 'IMG6')
ORDER BY IMAGENO
END 
```

where`IMAGENO`将分别包含`1, 2, 3, 4, 5, 6`您示例中的每一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T11:14:20.613

你可以尝试排序

```
CAST(SUBSTRING(IMAGENAME, 4, LEN(IMAGENAME) -3) as INTEGER) 
```

但是，如果不进行一些调整，这可能无法在 Oracle 中工作，而且它可能不会比您拥有的更快

我认为您可能会更好地在表中添加某种 Rank 列并在写入时设置它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T11:17:02.670

如果您的所有图像都命名为“IMG”，那么您应该能够从字符 4 中提取名称，然后将其转换为数字。我不知道这方面的 SQL Server 功能，但在 Oracle 中它会是：

```
SELECT * FROM IMAGES WHERE
IMAGENAME in ('IMG1', 'IMG2', 'IMG3', 'IMG4', 'IMG5', 'IMG6')
ORDER BY TO_NUMBER(SUBSTR(IMAGENAME,4)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-19T11:17:17.473

我之前应该说我给出的字符串是虚拟字符串，不幸的是，实际字段最后没有数字，但感谢您的建议。

我会考虑添加一个数字列以加快排序速度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-19T12:10:09.737

有一种几乎等效的方法可以执行 ChrisThomas123 在 SQL Server（但不是 ORACLE）中建议的操作，也就是说：

```
ORDER BY CHARINDEX(IMAGENAME, 'A,B,C,D,E,F,G') 
```

但它似乎并没有更快。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-19T21:50:32.797

如果您可以选择添加索引，那么（在 sql server 上）如果您在 IMAGENAME 上定义聚集索引，则数据将被预先排序。即使行没有按正确的顺序排序，它们至少会按 IMAGENAME 分组，因此排序应该更快。如果添加 numecic 列，则将聚集索引放在此上。添加列的替代方法是查找表。但是您可能没有打开这些选项

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-20T13:24:27.777

创建一个包含关系的新表

（图像名称，序列号）。

加载它 ('IMG1', 1), ('IMG2', 2), ('IMG3', 3) ,... 在您的查询中加入此表，并按 SEQUENCENUMBER 排序。

它应该运行得更快。

# delphi - 使用 Delphi 调用 Http GET url 的最简单方法是什么？

> ID：301546
> 
> 赞同：44
> 
> 时间：2008-11-19T10:52:34.620
> 
> 标签：delphi, http, network-programming

我想在我的应用程序中调用一个 Web 服务，我可以使用它来导入 WSDL，或者只使用带有 URL 和参数的“HTTP GET”，所以我更喜欢后者，因为它很简单。

我知道我可以使用 indy idhttp.get 来完成这项工作，但这是非常简单的事情，我不想将复杂的 indy 代码添加到我的应用程序中。

**更新**：对不起，如果我不清楚，我的意思是“不要添加复杂的 indy 代码”，我不想为这个简单的任务添加 indy 组件，并且更喜欢更轻松的方式。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-11-19T11:13:15.890

使用 Indy 调用 RESTful Web 服务非常简单。

将 IdHTTP 添加到您的 uses 子句。请记住，IdHTTP 需要 URL 上的“HTTP://”前缀。

```
function GetURLAsString(const aURL: string): string;
var
  lHTTP: TIdHTTP;
begin
  lHTTP := TIdHTTP.Create;
  try
    Result := lHTTP.Get(aURL);
  finally
    lHTTP.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-11-19T11:27:46.873

您可以像这样使用[WinINet API](http://msdn.microsoft.com/en-us/library/aa383630(VS.85).aspx)：

```
uses WinInet;

function GetUrlContent(const Url: string): string;
var
  NetHandle: HINTERNET;
  UrlHandle: HINTERNET;
  Buffer: array[0..1024] of Char;
  BytesRead: dWord;
begin
  Result := '';
  NetHandle := InternetOpen('Delphi 5.x', INTERNET_OPEN_TYPE_PRECONFIG, nil, nil, 0);

  if Assigned(NetHandle) then 
  begin
    UrlHandle := InternetOpenUrl(NetHandle, PChar(Url), nil, 0, INTERNET_FLAG_RELOAD, 0);

    if Assigned(UrlHandle) then
      { UrlHandle valid? Proceed with download }
    begin
      FillChar(Buffer, SizeOf(Buffer), 0);
      repeat
        Result := Result + Buffer;
        FillChar(Buffer, SizeOf(Buffer), 0);
        InternetReadFile(UrlHandle, @Buffer, SizeOf(Buffer), BytesRead);
      until BytesRead = 0;
      InternetCloseHandle(UrlHandle);
    end
    else
      { UrlHandle is not valid. Raise an exception. }
      raise Exception.CreateFmt('Cannot open URL %s', [Url]);

    InternetCloseHandle(NetHandle);
  end
  else
    { NetHandle is not valid. Raise an exception }
    raise Exception.Create('Unable to initialize Wininet');
end; 
```

来源：[http ://www.scalabium.com/faq/dct0080.htm](http://www.scalabium.com/faq/dct0080.htm)

WinINet API 使用与 InternetExplorer 相同的东西，因此您还可以免费获得 InternetExplorer 设置的任何连接和代理设置。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2011-10-13T20:17:29.520

实际上接受答案中的代码对我不起作用。所以我对其进行了一些修改，所以它实际上返回 String 并在执行后优雅地关闭所有内容。示例将检索到的数据作为 UTF8String 返回，因此它适用于 ASCII 和 UTF8 页面。

```
uses WinInet;

function GetUrlContent(const Url: string): UTF8String;
var
  NetHandle: HINTERNET;
  UrlHandle: HINTERNET;
  Buffer: array[0..1023] of byte;
  BytesRead: dWord;
  StrBuffer: UTF8String;
begin
  Result := '';
  NetHandle := InternetOpen('Delphi 2009', INTERNET_OPEN_TYPE_PRECONFIG, nil, nil, 0);
  if Assigned(NetHandle) then
    try
      UrlHandle := InternetOpenUrl(NetHandle, PChar(Url), nil, 0, INTERNET_FLAG_RELOAD, 0);
      if Assigned(UrlHandle) then
        try
          repeat
            InternetReadFile(UrlHandle, @Buffer, SizeOf(Buffer), BytesRead);
            SetString(StrBuffer, PAnsiChar(@Buffer[0]), BytesRead);
            Result := Result + StrBuffer;
          until BytesRead = 0;
        finally
          InternetCloseHandle(UrlHandle);
        end
      else
        raise Exception.CreateFmt('Cannot open URL %s', [Url]);
    finally
      InternetCloseHandle(NetHandle);
    end
  else
    raise Exception.Create('Unable to initialize Wininet');
end; 
```

希望它对像我这样正在寻找如何在 Delphi 中检索页面内容的简单代码的人有所帮助。干杯，阿尔迪斯 :)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-12-30T17:44:31.780

在较新的 Delphi 版本中，最好`THTTPClient`从`System.Net.HttpClient`单元中使用，因为它是标准的和跨平台的。简单的例子是

```
function GetURL(const AURL: string): string;
var
  HttpClient: THttpClient;
  HttpResponse: IHttpResponse;
begin
  HttpClient := THTTPClient.Create;
  try
    HttpResponse := HttpClient.Get(AURL);
    Result := HttpResponse.ContentAsString();
  finally
    HttpClient.Free;
  end;
end; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2010-03-20T12:47:03.320

如果可以下载到文件，您可以使用 ExtActns 单元中的 TDownloadURL。比直接使用 WinInet 简单得多。

```
procedure TMainForm.DownloadFile(URL: string; Dest: string);
var
  dl: TDownloadURL;
begin
  dl := TDownloadURL.Create(self);
  try
    dl.URL := URL;
    dl.FileName := Dest;
    dl.ExecuteTarget(nil); //this downloads the file
  finally
    dl.Free;
  end;
end; 
```

使用它时也可以获得进度通知。只需将事件处理程序分配给 TDownloadURL 的 OnDownloadProgress 事件。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-12-25T15:48:19.497

使用 Windows HTTP API 也可能很容易。

```
procedure TForm1.Button1Click(Sender: TObject);
var http: variant;
begin
 http:=createoleobject('WinHttp.WinHttpRequest.5.1');
 http.open('GET', 'http://lazarus.freepascal.org', false);
 http.send;
 showmessage(http.responsetext);
end; 
```

*   [https://msdn.microsoft.com/ru-ru/library/windows/desktop/aa382925.aspx](https://msdn.microsoft.com/ru-ru/library/windows/desktop/aa382925.aspx)
*   [http://forum.lazarus.freepascal.org/index.php?topic=14609.0](http://forum.lazarus.freepascal.org/index.php?topic=14609.0)
*   [使用 Delphi XE 将通过 WinHTTP 下载的文件保存到磁盘](https://stackoverflow.com/questions/6795915)
*   [如何异步使用“WinHttp.WinHttpRequest.5.1”？](https://stackoverflow.com/questions/8547188)
*   [http://www.delphigroups.info/2/4/217167.html](http://www.delphigroups.info/2/4/217167.html)
*   [https://github.com/fabriciocolombo/delphi-rest-client-api/blob/master/src/HttpConnectionWinHttp.pas](https://github.com/fabriciocolombo/delphi-rest-client-api/blob/master/src/HttpConnectionWinHttp.pas)

在上面的代码中，我暗示 COM 已经为 VCL 主线程初始化。据报道，简单的应用程序或拼箱应用程序可能并非总是如此。此外，异步（多线程）工作绝对不是这种情况。

下面是运行真实代码的片段。注意 - 功能是额外的。它不需要工作。因此，当我发出请求时，我并不关心他们的结果，结果被忽略并丢弃。

```
procedure TfmHaspList.YieldBlinkHTTP(const LED: boolean; const Key_Hardware_ID: cardinal);
var URL: WideString;
begin
  URL := 'http://127.0.0.1:1947/action.html?blink' +
    IfThen( LED, 'on', 'off') + '=' + IntToStr(Key_Hardware_ID);

  TThread.CreateAnonymousThread(
    procedure
    var Request: OleVariant;
    begin
      // COM library initialization for the current thread
      CoInitialize(nil);
      try
        // create the WinHttpRequest object instance
        Request := CreateOleObject('WinHttp.WinHttpRequest.5.1');
        // open HTTP connection with GET method in synchronous mode
        Request.Open('GET', URL, False);
        // set the User-Agent header value
//        Request.SetRequestHeader('User-Agent', 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0');
        // sends the HTTP request to the server, the Send method does not return
        // until WinHTTP completely receives the response (synchronous mode)
        Request.Send;
//        // store the response into the field for synchronization
//        FResponseText := Request.ResponseText;
//        // execute the SynchronizeResult method within the main thread context
//        Synchronize(SynchronizeResult);
      finally
        // release the WinHttpRequest object instance
        Request := Unassigned;
        // uninitialize COM library with all resources
        CoUninitialize;
      end;
    end
  ).Start;
end; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-19T13:44:31.873

使用HTTPSEND 单元 ( [HTTPGetText, HTTPGetBinary](http://synapse.ararat.cz/doc/help/httpsend.html) )中的[Synapse TCP/IP功能。](http://synapse.ararat.cz/doku.php/download)它将为您执行 HTTP 拉取，并且不需要除 Winsock 之外的任何外部 DLL。最新的 SVN 版本在 Delphi 2009 中运行良好。这使用了阻塞函数调用，因此没有要编程的事件。

更新：这些单位很轻，不是基于组件的。SVN 的最新版本在 Delphi XE4 中也运行良好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-15T18:14:03.600

如果您的应用程序仅适用于 Windows，我建议使用 WinSock。它很简单，允许执行任何 HTTP 请求，可以同步和异步工作（使用带有回调的非阻塞 WSASend/WSARecv 或在专用线程中使用旧的发送/接收）。

# java - 对线程安全函数的调用是否也需要同步？

> ID：301551
> 
> 赞同：3
> 
> 时间：2008-11-19T10:53:36.727
> 
> 标签：java, synchronization, concurrenthashmap

如果我使用 ConcurrentHashMap（其中 put 是线程安全的），并且我提供了一个使用 ConcurrentHashMap put 的公共函数 myPut - 我需要同步我的函数吗？

含义：这应该同步吗？

```
ConcurrentHashMap map;  
public void myPut(int something) {  
   this.map.put(something);  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-19T15:16:51.420

因为`map`没有声明引用，`final`所以它可能会被更改。因此，这里有一个潜在的线程错误。

如果`map`应该是可变引用，那么您将需要做更多的工作。否则使用`final`. 事实上，`final`尽可能使用，即使它“更容易”不使用。“`final`是新的[旧] `private`。” 您可能也想制作`map` `private`和通用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-24T17:01:39.820

ConcurrentHashMap 等并发实用程序的设计使您无需同步：它们将在内部处理线程安全访问。

汤姆说的是真的，你需要考虑地图参考改变的潜力。如果引用实际上*没有*改变，那么实际上你会在这里逃脱：ConcurrentHashMap 的内部同步——实际上是一般的 java.util.concurrentlibrary——保证放入映射中的对象被安全地发布到其他线程。但我同意即便如此，最好还是决定引用是否可以更改，然后在代码中明确说明这一点（如果不能，则为“final”；如果可以，则为“volatile”或 AtomicReference能够）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T11:03:33.960

如果您使用 ConcurrentHashMap，则不应同步“put”，但这并不意味着您的“puts”将被调用一次。这取决于您 Map 的并发级别...

所以你必须知道你想要什么。

顺便说一句，看看 ConcurrentHashTable Javadoc，一切都很好解释......

-帕特里克

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T10:55:03.447

不
，您可以一次调用 myPut 多次。
put 将一次调用一个，因为 HashTable 的访问需要一次一个。（另见共享内存中的并发写入）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T12:59:32.663

这取决于。

当您为将在多个线程中使用的对象编写类时，整个游戏都会发生变化。如果您希望提供任何线程安全保证，您需要了解您想要达到的结果。

在这种情况下，如果这是您的类中唯一的方法，那么同步对该方法的访问是没有意义的。但它不会是唯一的方法——因为它会使课程变得毫无意义。

如果出于其他原因需要同步此方法以使类线程安全，则只需要同步此方法 - 此时，您可能想质疑 a 的开销是否`ConcurrentHashMap`值得。

# c# - c# 带有格式化文本的 Treeview 节点，例如选项卡和新行

> ID：301552
> 
> 赞同：3
> 
> 时间：2008-11-19T10:53:59.783
> 
> 标签：c#, treeview, format, treenode

是否有可能（通过使用股票 c# TreeView）拥有多行树节点？

此外，是否可以在 TreeNode 的文本中添加控制字符，例如 '\t'？同样的效果也可以通过向 TreeNode 添加列来实现。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T12:21:30.103

我不相信使用 WinForms 是不可能的，至少在不绘制你自己的节点的情况下是不可能的。不过，我不知道，您也许可以在 WinForms 中使用“所有者绘制的”树节点来完成此操作。

不过，WPF 本身就支持这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-30T14:49:29.027

您的问题不是很清楚您是使用 ASP.NET 还是 WinForms。如果您在 ASP.NET 中，您可以尝试使用 PRE 标记来获取格式...？

也就是说，您可以在[此处](http://ra-ajax.org/samples/Viewport-RSS-Starter-Kit.aspx)看到一个示例的 Ra-Ajax TreeView 可以在其中包含任何套利量的 HTML 和/或什至控件，这在很大程度上使其优于 ASP.NET 中的内置 TreeView。（免责声明；我与 Ra-Ajax 合作）

这使您可以完全按照您的意愿格式化 TreeView 的内容。虽然如果你完全发疯，你仍然冒着创建“显示伪影”的风险，因为空间太大或类似的东西......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-21T10:28:04.517

不可能在 TreeNode 内有效地使用制表符。无论如何，我有一个解决方法：

字体“Consolas”的每个字母的间距相等，因此您可以轻松地用空格隔开。GetEmptyInfoByIndex 方法返回一个自定义长度的空格字符串以填充空白直到指定长度。这里 = 20。

```
mynode.NodeFont = new System.Drawing.Font("Consolas", 9,FontStyle.Regular);

string displaytext = String.Format(CultureInfo.InvariantCulture, "{0}{2} = {1}", mystringOfDifferentLenght, myresult, GetEmptyInfoByIndex(mystringOfDifferentLength, 20));
mynode.Text = displaytext;
rootnode.Nodes.Add(mynode);

private string GetEmptyInfoByIndex(string _string, int maxLength)
    {
        string retstr = string.Empty;
        for (int i = 0; i < maxLength - _string.Length; i++)
        {
            retstr += " ";
        }
        return retstr;
    } 
```

[证明在这里！](https://i.stack.imgur.com/fWCAx.jpg)

# c++ - 从 ActiveX 控件中的方法返回值

> ID：301553
> 
> 赞同：1
> 
> 时间：2008-11-19T10:54:05.617
> 
> 标签：c++, activex

我正在创建一个 ActiveX 控件，该控件将在网页中用于查询客户端计算机上当前安装的第 3 方软件的版本。该控件只需要公开一个方法 - GetVersion - 以整数形式返回版本。我对 ActiveX 非常缺乏经验，而且我遇到了一些简单的问题，比如从方法中正确返回值。如果我在 IDL 中使用以下声明：

```
[id(1)] void GetVersion(); 
```

与以下实现配对：

```
BEGIN_DISPATCH_MAP(CDetectorCtrl, COleControl)
    DISP_FUNCTION_ID(CDetectorCtrl, "GetVersion", 1, GetVersion, VT_EMPTY, VTS_NONE)
END_DISPATCH_MAP()

void CDetectorCtrl::GetVersion()
{
    MessageBox(L"Test");
} 
```

我可以从 HTML 中调用该方法并查看我的 MessageBox 就好了。

但是，如果我将定义/代码更改为：

```
[id(1)] int GetVersion(); 
```

和

```
BEGIN_DISPATCH_MAP(CDetectorCtrl, COleControl)
    DISP_FUNCTION_ID(CDetectorCtrl, "GetVersion", 1, GetVersion, VT_INT, VTS_NONE)
END_DISPATCH_MAP()

int CDetectorCtrl::GetVersion()
{
    MessageBox(L"Test");
    return 1337;
} 
```

当我从 HTML 调用该方法时发生崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T14:12:31.223

问和回答...

问题出现在方法本身缺少 AFX_MANAGE_STATE 上：

```
LONG CDetectorCtrl::GetVersion(void)
{
    AFX_MANAGE_STATE(AfxGetStaticModuleState());
    return 1337;
} 
```

# c++ - 如何在 win 2003 上使用 VC6 附加到进程？

> ID：301555
> 
> 赞同：1
> 
> 时间：2008-11-19T10:54:36.317
> 
> 标签：c++, visual-studio, debugging, winapi

在 win 2003 上运行的 VC6 上的“附加到进程”对话框（我相信 vista 也是如此）没有要附加到其中的进程...我尝试以管理员身份登录并以管理员身份运行，但没有运气。还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-19T12:04:27.690

安装最新的服务包会有所帮助... doh。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T12:05:18.827

SP 4 中修复了一个错误。有关详细信息，请参阅[此](http://support.microsoft.com/kb/235434/EN-US/)内容。

# encryption - 创建不可修改的文件

> ID：301557
> 
> 赞同：5
> 
> 时间：2008-11-19T10:54:53.010
> 
> 标签：encryption, hash, protection

我希望能够创建一个文件，将其分发给最终用户，但阻止他们对文件进行修改。

现在，显然，我实际上无法阻止任何人修改文件 - 所以我的方法是检测并拒绝文件是否被修改。

我的意图是生成文件内容的加盐哈希并将其附加到文件中。读取时，在读取文件的其余部分之前验证哈希。这样做的缺点是我必须在读取文件的可执行文件中分发固定的“盐”。显然我可以在某种程度上混淆它，但这仍然感觉像是一个薄弱环节。

有没有更好的方法来解决这类问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-19T11:18:34.413

[您想将数字签名](http://en.wikipedia.org/wiki/Digital_signature)附加到您的文档。这是一个已经被广泛研究的领域。简而言之，您可以相当肯定地确保文件未被篡改，但您无法**阻止**用户对其进行篡改。

（与音乐行业的比较并不完全相关，因为他们也想阻止人们**复制**文件，这是一个更难的问题。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-19T11:12:53.177

如果您的应用程序在用户的机器上运行，他们总是可以修补二进制文件，因此甚至不进行验证，从而使您的所有辛勤工作变得无用:-)

甚至可以通过嗅探流量绕过服务器端解决方案。因此，您需要将它们组合起来并使用 SSL。然后他们只是像上面那样修补了二进制文件，就这样。因此，您使用各种措施来混淆您的二进制文件，并且您的用户会推出像 IDA PRO 这样的反汇编程序。

如果我处于你的位置，我会问自己的问题是“如果我与用户进行军备竞赛，我会赢吗？”。如果答案是否定的，那么我不会浪费我的时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-19T11:42:11.573

使用数字签名。签名是使用公私钥加密的哈希值。您的应用程序仅包含公钥。该密钥用于解密散列，然后验证散列。要在文件修改后“纠正”散列，用户必须计算新的散列，用私钥对其进行加密，并在文件末尾替换旧的散列。问题：他没有私钥。私钥不在您的应用程序中。私钥不会随您的应用程序一起提供。您的应用程序只有公共应用程序。如果他用公共的加密它，它不会用公共的解密，所以这是没有用的。私钥在您的计算机上，没有人可以访问它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-19T10:59:35.887

如果您想要 100% 的解决方案，则不是。看看电影和音乐行业。他们已经尝试并失败了很多年:)

我认为您的解决方案已经足够好了。为了使修改文件变得更加困难，您可以对其进行加密，但是他们无法读取它，因此只有在这是一个好的限制时它才会起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-19T11:33:34.087

对于您对散列散列的关注... 好的做法是制作散列并使用私钥-公钥对对其进行加密。你只需要分发公钥。这样，他们可以阅读它，但不能修改它或创建新的。

我建议按照 JesperE 的建议使用数字签名。这个过程是标准的，你会发现很多例子来演示它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-19T12:27:47.347

即使用户修补他们自己的二进制文件以确保他们编辑的文件副本正常工作，它的编辑副本仍然无法在未修补的机器上工作。阻止这种编辑的目的是什么？

顺便说一句，与纯文本文件相比，用户不太容易编辑二进制文件。此外，如果你给他们一个二进制文件，用户不太容易感到恼火，而不是你给他们一个带有校验和的文本文件，假设他们有一些合法的理由希望编辑它，并且可以通过查看文件来告诉他们如果您没有添加校验和或其他任何内容，这样做会很容易。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-19T11:06:42.953

根据您要保护的文件类型，您可以使用一些文档管理工具。Adobe PDF 有这方面的工具。此外，如果您将应用程序托管在应用程序服务器或 Web 服务器上，则用户无法访问和修改代码。这样，您可以在服务器端拥有一个哈希数据库，其中包含您想要保护的文件。

当然，保护仅取决于用户想要（或可以）投入多少时间和精力来破坏保护。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-19T11:30:16.650

这就是 md5 哈希和 CRC 的用途，这就是为什么您检查从 Internet 下载的文件与他们的 md5 文件，以确保它没有在途中被劫持。

无论如何，我认为 Roddy 使用 C++，所以我可以推荐 Boost::CRC 它非常快速且开销很小，您也不需要以这种方式加密文件

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-27T17:56:41.017

谁是您的用户以及他们尝试更改文件的难度。如果您的用户能够找到您添加到哈希中的盐，那么他们可能会在您的代码中找到一个公钥，将其更改为他们自己生成的公钥，并使用他们的私钥计算修改后文件的签名。我会去混淆盐。

另一种选择是某种在线系统，它增加了巨大的复杂性，而且通常无论如何都是可以破解的。

看看 HMAC，了解一种使用“盐”的编码方法，就像你在想的那样（盐被称为键）。

# java - 差异 fn(String... args) 与 fn(String[] args)

> ID：301563
> 
> 赞同：65
> 
> 时间：2008-11-19T10:58:28.477
> 
> 标签：java, variadic-functions

这个语法有什么用：

```
 function(String... args) 
```

这和写作一样吗

```
 function(String[] args) 
```

仅在调用此方法时有所不同，或者是否涉及其他任何功能？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2008-11-19T11:13:37.980

两者之间的唯一区别是调用函数的方式。使用 String var args 您可以省略数组创建。

```
public static void main(String[] args) {
    callMe1(new String[] {"a", "b", "c"});
    callMe2("a", "b", "c");
    // You can also do this
    // callMe2(new String[] {"a", "b", "c"});
}
public static void callMe1(String[] args) {
    System.out.println(args.getClass() == String[].class);
    for (String s : args) {
        System.out.println(s);
    }
}
public static void callMe2(String... args) {
    System.out.println(args.getClass() == String[].class);
    for (String s : args) {
        System.out.println(s);
    }
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-11-19T11:38:14.437

区别仅在于调用该方法时。第二种形式必须用数组调用，第一种形式可以用数组调用（就像第二种形式一样，是的，这根据 Java 标准是有效的）或字符串列表（多个字符串用逗号分隔）或根本没有参数（第二个总是必须有一个，至少必须传递 null ）。

它在语法上是糖。实际上编译器转

```
function(s1, s2, s3); 
```

进入

```
function(new String[] { s1, s2, s3 }); 
```

内部。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-11-19T11:17:45.693

使用 varargs ( `String...`) 您可以这样调用该方法：

```
function(arg1);
function(arg1, arg2);
function(arg1, arg2, arg3); 
```

你不能用数组 ( `String[]`)做到这一点

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-11-19T11:16:13.013

您将第一个函数称为：

```
function(arg1, arg2, arg3); 
```

而第二个：

```
String [] args = new String[3];
args[0] = "";
args[1] = "";
args[2] = "";
function(args); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-11-19T11:06:25.140

在接收器大小上，您将获得一个字符串数组。区别仅在于调用方。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-08-09T11:57:40.193

```
class  StringArray1
{
    public static void main(String[] args) {
        callMe1(new String[] {"a", "b", "c"});
        callMe2(1,"a", "b", "c");
    callMe2(2);
        // You can also do this
        // callMe2(3, new String[] {"a", "b", "c"});
}
public static void callMe1(String[] args) {
        System.out.println(args.getClass() == String[].class);
        for (String s : args) {
            System.out.println(s);
        }
    }
    public static void callMe2(int i,String... args) {
        System.out.println(args.getClass() == String[].class);
        for (String s : args) {
            System.out.println(s);
        }
    }
} 
```

# python - 如何更新 turbogears 应用程序生产数据库

> ID：301566
> 
> 赞同：1
> 
> 时间：2008-11-19T11:00:34.793
> 
> 标签：python, database, postgresql, data-migration, turbogears

我在生产中有一个 postgres 生产数据库（其中包含大量数据）。现在我需要修改 tg-app 的模型以将几个新表添加到数据库中。

我该怎么做呢？我正在使用 sqlAlchemy。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T12:10:43.607

最简单的方法是简单地编写一些 sql 更新脚本并使用这些脚本来更新数据库。显然，这是一种相当低级（实际上）的方法。

如果你认为你会经常做这件事并想坚持使用 Python，你可能想看看[sqlalchemy-migrate](http://code.google.com/p/sqlalchemy-migrate/)。在最近的 Python Magazine 中有一篇关于它的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T12:10:50.923

这总是有效的，不需要思考——只需要耐心。

1.  做好备份。

2.  实际做好备份。每个人都跳过第 1 步，以为他们有备份，但他们永远找不到它或使用它。不要相信任何您无法恢复的备份。

3.  创建一个新的数据库模式。

4.  在新模式中从头开始定义您的新结构。理想情况下，您将运行构建新模式的 DDL 脚本。没有构建架构的脚本？创建一个并将其置于版本控制之下。

    使用 SA，您可以定义表，它可以为您构建架构。这是理想的，因为您的模式在 Python 中处于版本控制之下。

5.  移动数据。

    一种。对于未更改结构的表，使用简单的 INSERT/SELECT 语句将数据从旧模式移动到新模式。

    湾。对于确实改变结构的表，开发 INSERT/SELECT 脚本以将数据从旧数据移动到新数据。通常，这可以是每个新表的单个 SQL 语句。在某些情况下，它必须是具有两个开放连接的 Python 循环。

    C。对于新表，加载数据。

6.  停止使用旧模式。开始使用新架构。找到每个使用旧模式的程序并修复配置。

    没有应用程序列表？做一个。说真的——这很重要。

    应用程序具有硬编码的数据库配置？修复它，也，当你在它的时候。要么创建一个公共配置文件，要么使用一些公共环境变量或其他东西来（a）确保一致性和（b）集中“生产”的概念。

您可以在任何时候进行大手术时进行这种手术。除了提取数据外，它从不接触旧数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-24T00:30:18.340

我大体上同意[约翰](https://stackoverflow.com/users/5868/john-montgomery)的观点。单程 SELECTing 和 INSERTing 对于大型数据库不实用，设置复制或多程差异 SELECT / INSERT 可能更难且更容易出错。

就个人而言，我使用 SQLAlchemy 作为[TurboGears](http://turbogears.com/)下的 ORM 。要进行架构迁移，我运行：

```
tg-admin sql status 
```

要查看实时模式和开发模式之间的区别，然后手动编写（和版本控制）DDL 脚本以进行所需的更改。

对于那些使用 SQLAlchemy 独立（即不在 TurboGears 下）的人，`sql status`功能非常简单，可以在 TG 源中找到： http: [//svn.turbogears.org/branches/1.1/turbogears/command/sacommand.py](http://svn.turbogears.org/branches/1.1/turbogears/command/sacommand.py)（有1.0 分支中旧 Python / SA 版本的版本）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T12:10:19.223

如果您只是添加表，而不是修改其中包含现有数据的任何表，您可以简单地将新的 sqlAlchemy 表定义添加到 model.py，然后运行：

```
tg-admin sql create 
```

这不会覆盖您现有的任何表。

对于架构迁移，您可以查看[http://code.google.com/p/sqlalchemy-migrate/](http://code.google.com/p/sqlalchemy-migrate/)虽然我自己还没有使用它。

始终在迁移活动之前备份生产数据库。

# c++ - 如何告诉 valgrind 对分叉进程进行 memcheck？

> ID：301576
> 
> 赞同：43
> 
> 时间：2008-11-19T11:04:51.633
> 
> 标签：c++, c, linux, fork, valgrind

我有一个过程`x`，我想用`valgrind`. 问题是`x`由 运行`y`，而`y`反过来又由 运行`z`。我无法`x`独立运行，因为`y`并`z`设置了环境`x`，例如环境变量、命令行开关、所需的文件`x`等。

1.  有什么方法可以告诉我`valgrind`继续运行，`z`但要遵循它找到的任何分叉并报告它们？
2.  有什么方法可以告诉我`valgrind`遵循任何分叉，但只报告名为的进程`x`？
3.  有什么方法可以告诉我`valgrind`附加到已经运行的进程，就像我可以用 gdb 做的那样？

我不知道这是否重要，但我在 SuSE64 linux 和 valgrind-2.4.0 下运行。

谢谢！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-11-19T11:08:56.943

1.  给定`--trace-children=yes`选项时，Valgrind 会遵循分叉进程。
2.  您应该能够通过使用合适的过滤器来实现这一点。
3.  不会。Valgrind 使用 LD_PRELOAD 挂钩到模块加载代码，因此无法附加到正在运行的进程。

# visual-studio - 为什么 Visual Studio 2008 忘记将加载项的窗口窗格停靠在哪里？

> ID：301577
> 
> 赞同：7
> 
> 时间：2008-11-19T11:05:02.083
> 
> 标签：visual-studio, visual-studio-2008, add-in, visual-studio-addins, docking

我为 Visual Studio 2008 编写了一个简单的加载项，它打开了一个可停靠的窗口窗格。

[您可以单击此处下载源代码和二进制安装程序。](http://www.codeplex.com/ora)

加载项的性质意味着它理想情况下会停靠在您编辑源的位置旁边。但有时，在某些安装中，它不会保持停靠。你运行 VS，停靠我的窗格，关闭 VS，重新启动 VS，然后挂掉它 - 窗格再次浮动。在某些机器上，我每次都必须重新对接。

但在其他安装中，它永远停靠在我放置的任何地方。我最初认为这可能是 Vista 和 XP 之间的区别，但现在我有报告称它在 XP 上也将出现问题。

从我读到的内容（以及它有时保持停靠的事实），我得到的印象是 VS 应该负责为我保存停靠状态。但它没有这样做。而同一 VS 安装上的其他插件则没有这个问题。因此，我必须采取一些措施来改善这种情况。

我怀疑我的代码中唯一相关的部分是：

```
public class Connect : IDTExtensibility2
{
    private static DTE2 _applicationObject;
    private AddIn _addInInstance;
    private static CodeModelEvents _codeModelEvents;

    public static DTE2 VisualStudioApplication
    {
        get { return _applicationObject; }
    }

    public static CodeModelEvents CodeModelEvents
    {
        get { return _codeModelEvents; }
    }

    public static event EventHandler SourceChanged = delegate { };

    public void OnConnection(object application, 
           ext_ConnectMode connectMode, object addInInst, ref Array custom)
    {
        _applicationObject = (DTE2)application;
        _addInInstance = (AddIn)addInInst;
    }

    public void OnStartupComplete(ref Array custom)
    {
        try
        {
            Events2 events = (Events2)_applicationObject.Events;
            _codeModelEvents = events.get_CodeModelEvents(null);

            object objTemp = null;

            Windows2 toolWins = (Windows2)_applicationObject.Windows;

            Window toolWin = toolWins.CreateToolWindow2(
                _addInInstance, GetType().Assembly.Location, "Ora.OraPane", "Ora", 
                "{DC8A399C-D9B3-40f9-90E2-EAA16F0FBF94}", ref objTemp);
            toolWin.Visible = true;
        }
        catch (Exception ex)
        {
            MessageBox.Show("Exception: " + ex.Message);
        }
    }

    public void OnBeginShutdown(ref Array custom) { }

    public void OnDisconnection(ext_DisconnectMode disconnectMode, ref Array custom) { }

    public void OnAddInsUpdate(ref Array custom) { }
} 
```

（MSDN 文档建议应在 OnConnection 中创建窗口，但如果我这样做，则窗口大多不会出现。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-23T22:35:08.057

我遇到了一些与 TeamReview ( [http://www.codeplex.com/TeamReview](http://www.codeplex.com/TeamReview) ) 相同的对接问题。我不能说它为什么会发生，但我可以帮助您指出始终在 OnStartupComplete 中记录您的窗口的代码。如果你有一个特定的位置，你希望它在你可以在创建你的 toolWin 之后和调用 Visible 属性之前将它链接到一个框架内。您必须检查哪些常量适合 CreateLinkedWindowFrame 和 SetKind 方法的条件。此外，您可能希望将窗口链接到 MainWindow 以外的其他内容，例如 SolutionExplorer

```
EnvDTE80.Window2 frame = toolWins.CreateLinkedWindowFrame(toolWin, toolWin, vsLinkedWindowType.vsLinkedWindowTypeTabbed);

frame.SetKind(EnvDTE.vsWindowType.vsWindowTypeToolWindow);

_applicationObject.MainWindow.LinkedWindows.Add(frame);

frame.Activate(); 
```

此示例类似于： http: [//www.codeplex.com/TeamReview/SourceControl/changeset/view/16102#](http://www.codeplex.com/TeamReview/SourceControl/changeset/view/16102#) 2008 -> TeamReview -> 命令 -> ShowReplayWindowCommand.cs -> ShowForm()

这是[一个很好的 Microsoft 示例](http://msdn.microsoft.com/en-us/library/envdte80.windows2(VS.80).aspx)，用于将输出窗口、命令窗口和解决方案资源管理器链接在一起。然后，它操纵这些链接窗口的宽度和高度，最后将它们全部从链接窗口框架中取消停靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-10T15:16:33.367

我和作者有同样的问题。我注意到 Visual Studio 2005 仅在使用调试的会话之后“忘记”工具窗口位置。

接受的答案没有多大帮助，因为工具窗口总是停靠在底部。我真的希望用户能够选择他们想要停靠的位置，并通过简单地停靠在他们喜欢的地方来保存他们的偏好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-18T14:02:29.967

这对我有帮助。我使用 Visual Studio 2005，但这也可能对您有所帮助。

```
public void OnBeginShutdown(ref Array custom)
{
     if (_toolWin != null)
          _toolWin.Visible = false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T17:47:32.277

将工具窗口可见性设置为 false 效果非常好。谢谢JK。

为了回答 JK 关于调试后取消停靠的问题，我想知道项目调试属性中的 devenv.exe /resetaddin 开关是否会导致这种情况发生。它肯定会重置插件创建的所有其他内容。

*想法：/resetaddin 开关会在您创建插件项目时自动添加到调试配置中。我通常在 /resetaddin 命令中的类名称的字体上放置一个无效字符，例如“x”，这样当我们确实需要硬重置时，可以通过删除 x 轻松重新启用它。每次调试时通常不需要重置！*

# c# - MSI 为安装人员提出问题

> ID：301579
> 
> 赞同：3
> 
> 时间：2008-11-19T11:05:39.617
> 
> 标签：c#, winforms, windows-installer, deployment

我已经为 Windows 窗体应用程序创建了一个 Windows 安装程序作为 MSI。我已经发布了这个并将它放在一个 zip 文件中并发送给客户。当他们尝试运行安装程序时，会收到消息“无法验证发布者。你确定要运行这个软件吗？'</p>

当客户端单击安装程序时，是否有设置或我需要做的事情来阻止此消息出现？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T11:12:01.417

这是证书问题吗？我不必使用 msi 执行此操作（我通常使用 ClickOnce，这使得这非常容易），但快速搜索会显示类似的内容[或](http://www.advancedinstaller.com/digital-signatures.html)MSDN [here](http://msdn.microsoft.com/en-us/library/aa371854(VS.85).aspx)上的内容。

请注意，您的证书必须在客户信任链中 - 即间接来自某人“pucka”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T11:18:32.463

您需要对您的 msi 进行数字签名。你可以用 来做[`signtool`](http://msdn.microsoft.com/en-us/library/aa387764(VS.85).aspx)，当然你需要有一个证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T14:09:04.647

我与这里的一些人交谈过，有人使用 Orca 编辑了一些 msi 内容。显然在此之前安装程序很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T22:40:19.280

1) 按照其他人的建议，在发货前对 MSI 进行数字签名（我们在这里使用威瑞信代码签名证书）

2) 如果客户正在编辑，建议他们使用 Orca 创建转换，而不是直接编辑 MSI。这样原始签名仍然有效

3) 如果你们的人在剪辑，就拍打他们的手腕并辞去 MSI 的职务。

4）从命令行使用MSIEXEC而不是双击，AFAIK验证提示是由Windows资源管理器触发的，所以这绕过了这个问题。

# c++ - 使用#include 的区别 和#include 在 C++ 中

> ID：301586
> 
> 赞同：39
> 
> 时间：2008-11-19T11:07:06.370
> 
> 标签：c++, include, namespaces

[在C++](http://en.wikipedia.org/wiki/C%2B%2B)`#include<filename> and #include<filename.h`中使用> 有什么区别？使用这两者中的哪一个以及为什么使用它？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2008-11-19T13:33:10.773

C++ 仅包含在 C 标准中找不到的文件，从未使用过`filename.h`。自从第一个 C++ 标准问世（1998 年）以来，他们一直使用`filename`自己的头文件。

C 标准继承的文件变成`cfilename`了`filename.h`. 继承使用 like 的 C 文件`filename.h`已弃用，但仍是 C++ 标准的一部分。

不同之处在于，在 C 中未定义为宏的名称在 C++ 中的命名空间内找到`std::`，`cfilename`而 in`filename.h`中的名称在全局命名空间范围内。所以你会`::size_t`在 stddef.h 和`std::size_t`cstddef 中找到。两者都是标准 C++，但不推荐使用 ::size_t（参见 C++ 标准的附录 D）。

现在这些是不同的。

### 为什么要使用 `filename.h` ？

*   与 C 编译器的兼容性
*   与非常古老的 C++ 编译器的兼容性

### 为什么要使用 `cfilename` ？

*   名称在命名空间内`std::`。不再有名称冲突。
*   新的 C++ 特性（例如，浮点数、长整数的重载数学函数）
*   C 兼容性标头 ( `filename.h`) 将来可能会消失。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-11-19T11:13:54.047

在 C++ 标准之前的`#include <foo.h>`C++ 代码中很常见。该标准将其更改为`#include <foo>`从标题中放置在`std`名称空间中的所有内容。（感谢 litb 指出该标准从未允许 .h 标头。）

没有什么魔法，第一个查找名为“foo.h”的文件，第二个查找名为“foo”的文件。它们是文件系统中的两个不同文件。该标准只是更改了应包含的文件的名称。

在大多数编译器中，旧的头文件仍然存在以实现向后兼容性（以及与 C 的兼容性），但是想要遵循标准的现代 C++ 程序不应该使用它们。

在标准 C 头文件的情况下，C++ 版本以 ac 开头，因此 C 头文件

```
#include <stdio.h> 
```

变成

```
#include <cstdio> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-19T13:13:24.663

旧标准使用`#include <filename.h>`语法。当命名空间和模板添加到语言中时，标准更改为`#include <filename>`.

这样做是为了让标准库的东西都可以放在 std 命名空间中。没有命名空间概念的旧代码仍然可以工作，因为`#include <filename.h>`文件不使用命名空间。

新代码应**始终**使用该`#include <filename>`格式。如果您使用旧格式，则它们定义的所有符号都将放置在全局命名空间中，而不是 std。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-19T11:09:24.947

没有 .h 的是 C++ 头文件，而那些有 .h 的是 C 头文件。这仅适用于 C++ 中的标准头文件。

如果您包含自己的文件或不属于标准 C++ 的文件，则需要始终编写完整的文件名（可以是任何文件名）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-19T11:09:56.473

如果您在谈论标准库（因为否则它根本不起作用），区别在于

```
#include< header >
//my code 
```

是根据 C++ 标准调用标头的正确方法，而

```
#include< header.h >
//my code 
```

已弃用（在 C++ 标准中，但根据 C99 标准仍然是必需的）并与 C 包的其余部分一起出现。

所以你应该使用：

```
#include< cmath >
//my code 
```

不是：

```
#include< math.h >
//my code 
```

# latex - Latex：对单个长表行的超引用

> ID：301590
> 
> 赞同：5
> 
> 时间：2008-11-19T11:09:58.407
> 
> 标签：latex, label, ref, hyperref, longtable

我有几个长表可以延伸几页，我想使用 pageref 和 hyperref 链接到这些行。

但无论我尝试什么，链接总是指向表格的开头。当我查看 aux 文件时，所有标签似乎都被重新定义为 table.[number of table]。

我尝试将不可见的虚拟人物放入表格中，但这只会给我带来太多浮点数的错误。

我还尝试将标签放入小型页面，但无济于事。

即使将标签放入脚注也不起作用，不知何故 longtable 似乎总是能找到它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T06:41:31.867

我通过引入自定义计数器和标签命令解决了这个问题：

```
\newcounter{mycounter}
\newcommand{\mylabel}[1]{\refstepcounter{mycounter} \label{#1}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T15:36:15.080

根据[这篇文章](http://newsgroups.derkeiler.com/Archive/Comp/comp.text.tex/2008-05/msg01417.html)和Hyperref[自述](http://www.ctan.org/tex-archive/macros/latex/contrib/hyperref/)文件，您需要在包含 Longtable 后包含 Hyperref 包

# strongly-typed-dataset - ParentRelations 在生成的数据集中不起作用？

> ID：301602
> 
> 赞同：0
> 
> 时间：2008-11-19T11:14:53.017
> 
> 标签：strongly-typed-dataset, dataset-designer

我创建了两个表：

**出版商**

*   PK, PublisherId, int, not null, indentity +1
*   PublisherName，varchar(50)，不为空

**产品**

*   PK, ProductId, int, not null, identity +1
*   产品名称，varchar(50)，不为空
*   PublisherId，整数，不为空

然后我在连接 PublisherId 的那些表之间创建了一个外键约束**FK__Product__Publisher 。**

这样，我想支持每个都有一个发布者的产品，而每个发布者可以有多个产品。就这么简单。

现在我在 C# 中创建了一个控制台项目，添加了一个类型化数据集和两个 TableAdapter。一个指向 Publisher 一个指向 Product。DataSet-Designer 根据从 SQL Server 获得的内容自动添加关系。

它还会自动生成属性，这些属性应该允许我访问来自选定产品的发布者和来自选定发布者的所有产品。

这是我的测试代码：

```
ProductTableAdapter adapter = new ProductTableAdapter();

foreach (ProductRow product in adapter.GetData())
{
    Console.WriteLine(product.PublisherRow.PublisherName);
} 
```

但是，这不起作用。使用生成的代码，属性 PublisherRow 如下所示：

```
[global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
public LanguageRow PublisherRow {
    get {
        return ((PublisherRow)(this.GetParentRow(this.Table.ParentRelations["FK_Product_Publisher"])));
    }
    set {
        this.SetParentRow(value, this.Table.ParentRelations["FK_Product_Publisher"]);
    }
} 
```

this.Table.ParentRelations 不包含关系。它为 null 并且访问它会导致 NullReferenceException。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T13:12:39.877

回答我自己的帖子似乎有点奇怪。这有点像自言自语。但是，我找到了一个解决方案，因为这个问题似乎很常见，所以我在这里发布。

简单地使用 TableAdapters 获取数据不会从数据库中检索正确的关系。关系的初始化发生在数据集类中（即从数据集的 c'tor 调用的 InitClass 方法）：

```
public DbDataSet() {
    this.BeginInit();
    this.InitClass();
    ...
    this.EndInit();
} 
```

对应生成的 InitClass 方法如下所示：

```
private void InitClass() {
    ...
    this.relationFK_Product_Publisher= new global::System.Data.DataRelation("FK_Product_Publisher", new global::System.Data.DataColumn[] { this.tableProduct.PublisherIdColumn}, new global::System.Data.DataColumn[] { this.tablePublisher.PublisherIdColumn}, false);
    this.Relations.Add(this.relationFK_Product_Publisher);
} 
```

这就是为什么您需要实例化数据集类本身并使用 fill 方法来填充您的表类，如下所示：

```
DbDataSet ds = new DbDataSet();    

ProductTableAdapter productAdapter = new ProductTableAdapter();            
productAdapter.Fill(ds.Product);

PublisherTableAdapter publisherAdapter = new PublisherTableAdapter();
publisherAdapter.Fill(ds.Publisher);

foreach (ProductRow product in ds.Product)
{                
    Console.WriteLine(product.PublisherRow.PublisherName);
} 
```

# .net - 创建没有 svcutil.exe 的 WCF 应用程序？

> ID：301604
> 
> 赞同：7
> 
> 时间：2008-11-19T11:16:05.540
> 
> 标签：.net, wcf

如何在不使用 svcutil.exe 工具的情况下创建 WCF 应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-22T05:06:43.523

One way to build your WCF client without using svcutil.exe is to use ChannelFactory. What you would need to do is build the WCF service interface in a separate assembly from the service implementation. You can then reference that interface assembly from both your client and your service.

Once you have the reference, you could use the following code to create a WCF client:

```
var factory = new ChannelFactory<IMyWcfService>();
var wcfClient = factory.CreateChannel();
bool closedSuccessfully = false;

try
{
    // Now you can make calls on the wcfClient object
    ((ICommunicationObject)wcfClient).Close();
    closedSuccessfully = true;
}
finally
{
    if (!closedSuccessfully)
    {
        ((ICommunicationObject)wcfClient).Abort();
    }
} 
```

*Note the cleanup routine.* You can't use a using statement reliably to clean up the wcfClient variable. If you do, and the object is in a faulted state, you'll get an exception thrown when the using() block goes out of scope and Dispose() is executed on the wcfClient variable. See [Jesse Ezell's blog](http://old.iserviceoriented.com/blog/post/Indisposable+-+WCF+Gotcha+1.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-19T11:49:11.480

您使用的是什么版本的 Visual Studio？

VS2008 整合了 svcutil 工具的功能。要生成代理，请单击解决方案资源管理器并选择“添加服务引用”，然后您可以输入服务器的 URL，为命名空间命名，然后就可以了。

您可能希望扩展您的问题，以提供有关您想要实现的目标的更多详细信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-19T12:24:42.423

svcutil.exe 工具（以及 VS2008 中的等效功能）通常这样使用：-

您将其指向服务描述（WSDL 文档），它会生成客户端代码和配置，以帮助您创建可以与 WSDL 中描述的服务进行通信的客户端。这些工具也可以做其他事情，但这是它们最常用的用途。我认为您指的是 svcutil.exe 的这种用法。

因此，如果您有一个现有的服务，可能是使用其他堆栈（不是 WCF）编写的，那么使用 svcutil 会使您的生活比其他方式更轻松。但请记住，生成的代码和配置可能是您编写的。通常配置看起来很冗长，因为该工具将所有默认设置都放在那里。如果您自己编写配置，您可能会省略大部分内容。

如果您自己使用 WCF 编写客户端和服务，则几乎没有理由使用 svcutil.exe。当您定义 [ServiceContract] 时，您可以在客户端和服务中使用相同的定义。创建服务配置文件时，基于它创建客户端配置文件是一项简单的工作 - 大部分内容是相同的。

最后，理解 svcutil.exe 生成的所有代码/配置的实际含义是无可替代的。然后你就可以在没有它的情况下工作。

# visual-studio - 自动化 Visual Studio 安装项目

> ID：301613
> 
> 赞同：3
> 
> 时间：2008-11-19T11:23:17.867
> 
> 标签：visual-studio, visual-studio-2008

我正在使用 Visual Studio 2008，我想通过运行批处理文件来自动化构建安装程序的过程。

批处理文件应首先对程序集进行签名，然后开始构建安装程序。创建安装程序后，批处理文件也应该对文件进行签名`.msi`。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-09-30T10:46:59.020

[FinalBuilder](http://www.finalbuilder.com)对此有一些支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T11:31:36.743

如果您想自动化整个构建过程，从从版本控制中提取代码开始，您可能会发现这篇文章很有用。

[使用 PowerShell 从 Team System 自动提取和构建](http://www.codeproject.com/KB/install/ExtractAndBuild.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T21:47:43.957

是的，它可以从批处理文件中完成。要对程序集进行签名，您需要从 Microsoft Platform SDK 获取 signtool.exe 的副本。内置帮助将为您提供有关如何使用该工具的良好概述。Next Visual Studio 2008 采用[命令行参数](http://msdn.microsoft.com/en-us/library/xee0c8y7.aspx)，但您必须确保`vcvars32.bat`在尝试从命令行运行之前调用适当的脚本`devenv.exe`。最后，您可以使用`signtool.exe`签名您的 MSI 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T22:20:47.510

MSBUILD 是您所需要的。Msbild 使用 xml 格式的 .proj 和 .target 文件。[在这里](http://msdn.microsoft.com/en-us/library/wea2sca5(VS.80).aspx)你可以找到微软的文档。我警告你这并不容易，但我强烈建议你花一些时间在这上面。你花在它上面的每一秒都会返回给你乘以 100。我们将它用于 nigtly 和部分构建，它可以做所有事情：代码构建、数据库设置、配置文件、单元测试执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-09T14:58:41.783

正如 enba 所提到的，您所需要的只是 msbuild。如果您使用[WiX](http://en.wikipedia.org/wiki/WiX)生成您的 msi，则尤其如此，这意味着您可以调用您的 WiX 解决方案文件。您只需要设置一个如下所示的 build.xml：

```
<Project>
    <Target Name="Install">
        <Exec Command="signcode.exe -spc mycert.cer -v mykey.pvk myproj\release\myassy.dll"/>
        <MSBuild Projects="WixInstall.sln" Properties="Configuration=Release"/>
    </Target>
</Project> 
```

假设 signcode.exe 在您的路径中，您所要做的就是“msbuild build.xml”。

# c# - C# 和 CLR 特性混淆，什么特性值得严格描述为 C# 特性？

> ID：301618
> 
> 赞同：1
> 
> 时间：2008-11-19T11:26:37.797
> 
> 标签：c#, .net, clr

我得写几篇关于 C# 的文章，一般来说是小菜一碟？不！

我搜索了各种互联网资源和书籍，但我得到了一种头痛。例如**垃圾收集器**，一些消息来源说这是 C# 功能，其他 CLR 获得了此功能，而 C# 以及所有其他 .NET 语言默认获得了它。当然，我对 CLR 的投票是，但还有很多其他的事情会带来混乱，比如**避免显式代码转换**。也许我有不好的书籍和资源......所以也许有人会建议某个地方清楚地谈论 C#

第二件事是 C# 语法的起源，同样很少有选择，也不清楚，其他作者的其他语言组合。C、c++、Java，没关系，但 VB6 和 Delphi，我有疑问。来自这些语言的特性又与 c# 混淆了，但实际上并不清楚它是 C# 还是 CLR 特性

第 MTH

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-19T11:37:44.170

GC 由 CLR 提供

C# 是语言规范规定的一切，仅此而已。

一些更有趣的东西实际上是 C# 特性：

*   迭代器块 [yield return]
*   匿名方法/闭包/ lambdas [语法，不要与表达式树混淆]

但是任何与您键入的代码相关但不是由 CLR 或框架直接提供的内容都是语言功能。当然，其他语言也可以实现它们......

*   使用 [try/finally/Dispose]
*   锁定 [Monitor.Enter/try/finally/Monitor.Exit]
*   foreach [GetEnumerator()/while/[Dispose]]
*   扩展方法解析
*   查询语法 ["where pred" to .Where(x=>pred) etc]

（当然，这些只是几个例子；同样——其他语言也可以自由地提供这些功能！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T11:40:28.580

GC 本身是 CLR 功能，但 C# 语言假定它运行在具有垃圾收集的平台上 - 没有定义确切的语义。

精确地确定是一件困难的事情，但粗略的经验法则是“如果它在语言规范中得到很好的定义，它就是 C# 特性”。

如果您可以提供更多要分类的*功能*示例（“避免显式代码转换”不是语言功能，除非您想提供更多细节），这将有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T11:36:31.770

CLR 是一个开发平台，一个运行时环境，支持用一种 .NET 语言编写的托管代码，C# 就是其中之一。垃圾收集是 CLR 的一项功能。与托管代码的代码访问安全性和即时编译一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T11:47:59.267

您可能需要 C# 语言规范。以下是参考资料：

1.  [C# 规范 (MSDN)](http://msdn.microsoft.com/en-us/vcsharp/aa336809.aspx)
2.  [标准 ECMA-334 C# 语言规范](http://en.csharp-online.net/CSharp_Language_Specification)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-20T08:52:11.913

> 第二件事是 C# 语法的起源，同样很少有选择，也不清楚，其他作者的其他语言组合。C、c++、Java，没关系，但 VB6 和 Delphi，

C# 从 VB 得到的东西：

*   特性
*   活动
*   For-Each 循环
*   模块，在 C# 中声明为“静态类”
*   使用默认属性使类像数组一样工作
*   后期绑定 (C# 4)
*   整数溢出检查（C、C++ 和 Java 无法检测到何时溢出整数）
*   P/Invoke 用于调用 C++ dll

在某种程度上，可选参数（C# 4），但实际上是来自 COM。

# c++ - C++ 枚举到无符号整数比较

> ID：301622
> 
> 赞同：1
> 
> 时间：2008-11-19T11:28:01.303
> 
> 标签：c++, enums, comparison, integer, unsigned

我在目前正在处理的代码中发现了这一点，并认为这是我遇到的一些问题的原因。

在某处的标题中：

```
enum SpecificIndexes{
    //snip
    INVALID_INDEX = -1
}; 
```

然后稍后 - 初始化：

```
nextIndex = INVALID_INDEX; 
```

并使用

```
if(nextIndex != INVALID_INDEX)
{
    //do stuff
} 
```

调试代码，nextIndex 中的值不太有意义（它们非常大），我发现它被声明了：

```
unsigned int nextIndex; 
```

因此，INVALID_INDEX 的初始设置使 unsigned int 下溢并将其设置为一个巨大的数字。我认为这是导致问题的原因，但仔细观察，测试

```
if(nextIndex != INVALID_INDEX) 
```

行为正确，即当 nextIndex 为“大 +ve 值”时，它从未执行 if 的主体。

它是否正确？这是怎么回事？枚举值是否被隐式转换为与变量相同类型的无符号整数，因此以相同的方式包装？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-19T11:35:53.723

是的一切。它是有效代码，也是常用的库端 C++ 代码，在现代 C++ 中更是如此（当你第一次看到它时很奇怪，但它在现实中是一种非常常见的模式）。

然后枚举是有符号整数，但它们会隐式转换为无符号整数，现在这取决于您的编译器可能会发出警告，但它仍然非常常用，但是您应该显式转换以使维护者清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-21T13:06:10.390

根据枚举是否包含任何负值以及编译器的感觉，枚举可以用有符号或无符号整数类型表示。此处的示例包含负值，因此必须由有符号整数类型表示。

有符号和无符号类型之间的相等比较是安全的，通常会按照作者的意图进行 - 有符号值将首先转换为无符号，这样做的结果由 C++ 标准定义并且很直观（至少，一旦你知道目标类型。除非整数不是二进制补码。所以可能不是那么直观，但通常不会导致问题）。

订单比较更容易出错。例如：

```
SpecificIndexes value = INVALID_VALUE;
return (value >= 0); 
```

返回 false，但是：

```
unsigned int value = INVALID_VALUE;
return (value >= 0); 
```

返回真。有时作者不会欣赏这种差异，特别是如果“价值”的类型在使用时不是很明显。不过，编译器可能会对第二个示例发出警告，因为 (value >= 0) 是重言式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T11:35:03.833

事实上，当 -1 被分配给 nextValue 时，它​​被隐式地转换为它的等价无符号值。等价的无符号是具有相同按位表示的值（即 111111111111...，这是最大的无符号值）。

稍后，在比较语句中，发生了另一个隐式转换。

所以这现在有效，但将来可能会导致问题。混合有符号和无符号值绝不是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T11:47:01.873

是的，我相信枚举已签名。改变

```
unsigned int nextIndex; 
```

到

```
int nextIndex; 
```

你的程序应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-02-28T01:41:58.520

C++ 标准允许实现对枚举使用有符号类型，但不需要它。因此，您通常不能假设将负数放入枚举中是安全的。

# spring - 春季BeanIsAbstractException

> ID：301624
> 
> 赞同：1
> 
> 时间：2008-11-19T11:28:40.103
> 
> 标签：spring

我正在尝试使用 XmlWebApplicationContext setConfigLocations 方法加载spring bean。但是，我不断收到一个

```
BeanIsAbstractException 
```

我知道 bean 是抽象的，我以这种方式配置它，所以 Spring 应该知道不要尝试实例化它。

我正在使用 Spring2.0.8.jar 和 jetspeed2.1。

春豆：

```
<bean id="ThreadPool" abstract="true" class="com.sample.ThreadPoolFactoryBean"/> 
```

代码：

```
ctx = appContext;
    appContext.refresh();
    BeanFactory factory = appContext.getBeanFactory();
    String[] beansName = appContext.getBeanFactory()
            .getBeanDefinitionNames();

...

map.put(beansName[mnCnt], factory.getBean(beansName[mnCnt])); 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T11:39:06.477

以下代码将尝试创建抽象类的实例，但无法创建：

```
map.put(beansName[mnCnt], factory.getBean(beansName[mnCnt])); 
```

只是为了避免混淆，“抽象”bean***与***抽象类不同。它们主要是一种减少重复属性设置的便捷机制。

> 子 bean 定义将从父 bean 继承构造函数参数值、属性值和方法覆盖，并可选择添加新值。如果指定了 init 方法、destroy 方法、工厂 bean 和/或工厂方法，它们将覆盖相应的父设置。

一个人为的例子：

```
class Fruit {
    private String colour;
    private String name;
    // setters...
}

class Car {
    private String colour;
    private String manufacturer;
    // setters...
} 
```

和：

```
<!-- specifying a class for an abstract bean is optional -->
<bean id="sharedPropsBean" abstract="true">
    <property name="colour" value="red" />
</bean>

<bean id="myFruit" parent="sharedPropsBean" class="Fruit">
    <property name="name" value="apple" />
</bean>

<bean id="myCar" parent="sharedPropsBean" class="Car">
    <property name="manufacturer" value="Ferrari" />
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T12:49:10.987

```
map.put(beansName[mnCnt], factory.getBean(beansName[mnCnt])); 
```

有你的问题，不是吗？通过使用抽象 bean 的名称调用 getBean，您尝试实例化它，这将产生异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T11:43:39.463

春豆：

```
<bean id="ThreadPool" abstract="true" class="com.sample.ThreadPoolFactoryBean"/> 
```

代码：

```
ctx = appContext;
    appContext.refresh();
    BeanFactory factory = appContext.getBeanFactory();
    String[] beansName = appContext.getBeanFactory()
            .getBeanDefinitionNames(); 
```

然后，当我遍历字符串数组时，它给出了异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T11:48:00.343

您正在迭代并编写名称以表示标准输出？这不应该造成问题。你的代码中没有任何东西试图强制spring实例化有问题的bean吗？

# c++ - 如何在 CDateTimeCtrl 中保留 UTC？

> ID：301626
> 
> 赞同：1
> 
> 时间：2008-11-19T11:30:32.470
> 
> 标签：c++, mfc

我的 MFC 应用程序与日期选择器进行了对话。当我初始化这个对话时，我需要调用 CDateTimeCtrl::SetTime() 并且我试图决定给它什么参数。我有一个整数数组，表示 UTC 中的年、月、日、小时和分钟。这是重要的一点：日期选择器必须以 UTC 显示时间，而不是本地时间。当我稍后调用 GetTime() 时，我需要确保我返回的内容可以被视为 UTC。

SetTime() 函数具有三个覆盖：第一个采用 CTime*，第二个采用 COleDateTime&，第三个采用 LPSYSTEMTIME。看起来好像 CTime 的构造函数自动将其输入转换为本地时间，而 COleDateTime 的构造函数却没有。真的吗？而且我认为 LPSYSTEMTIME 并不是真正设计为手工构建的吗？那么从我的数组中构建一个 COleDateTime 并将其传递给 SetTime 是我最好的课程吗？

鉴于我冬天在伦敦，我如何测试这些东西以确保它们的行为符合我的要求？有没有办法暂时假装我在芝加哥并检查这不会影响我的日期选择器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T14:09:29.247

我很久以前做过类似的事情。我相信我使用了 COleDateTime。真正的优势是它不会自动转换为当地时间。
如果您真的想测试一下，请尝试将您的时区设置为悉尼时间，因为我们现在处于夏令时 (UTC+11)。半球的变化将考验你！

# php - PHP HttpRequest

> ID：301637
> 
> 赞同：2
> 
> 时间：2008-11-19T11:34:27.983
> 
> 标签：php

我需要从 PHP 执行 HTTP GET。

更具体地说，我需要从 /index.php 中获取 /trac/ 和 /svn/ 的内容，找到“ul”元素，然后在 index.php 上渲染然后内联。

/trac 和 /svn 是相对 URL，而不是文件系统文件夹。 [http://myserver/trac](http://myserver/trac)和[http://myserver/svn](http://myserver/svn)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-19T11:48:27.380

最简单的方法是[`file_get_contents()`](http://www.php.net/file_get_contents)。

```
$str = file_get_contents('http://myserver/svn/');

// Or, if you don't want to hardcode the server
$str = file_get_contents('http://' . $_SERVER['HTTP_HOST'] . '/svn/');

if ($str)
{
    // Find the ul
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T11:48:06.647

我建议你看看...

*   HTTP_Request2 [PEAR](http://pear.php.net/package/HTTP_Request2)包，
*   PHP中的[CURL 库](http://de3.php.net/manual/en/book.curl.php)（如果已安装）或
*   PHP 中的普通[文件系统函数](http://de3.php.net/manual/en/ref.filesystem.php)（如果您启用了[allow_url_fopen](http://de3.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T11:47:47.567

看看[file_get_contents](http://it.php.net/function.file-get-contents) - 它可以用于在某些条件下打开 url，其他一些[文件系统函数](http://it.php.net/manual/en/ref.filesystem.php)也可以：

> 如果启用了 fopen 包装器，则 URL 可以用作此函数的文件名。有关如何指定文件名和支持的协议/包装器列表的更多详细信息，请参阅 fopen() 以获取支持的 URL 协议列表。

# web-applications - Filemaker & lasso：可行的 Web 应用程序？

> ID：301639
> 
> 赞同：0
> 
> 时间：2008-11-19T11:35:16.970
> 
> 标签：web-applications, filemaker, lasso-lang

我们在 lasso 上运行了一个巨大的 Web 应用程序，主要是因为它首先是一个巨大的内部 Filemaker 数据库，它将作为 Web 应用程序向公众开放。

Web 应用程序虽然不使用 Filemaker，但它在 MySQL 数据库上运行，每天都在重新创建。

我知道使用 lasso 的唯一原因是它很容易与 Filemaker 集成，但我从未使用过 lasso。（我是 perl/php/mysql/javascript 的人）

* * *

所以我有三个问题：
套索是一种适用于网络应用程序的可行语言吗？与其他语言相比，它有什么重要的好处吗？

我们应该升级那个应用程序，我们应该使用更广泛使用和了解的语言，还是应该坚持使用套索？

这里有人真正使用套索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-11T03:02:20.783

套索历史悠久。在转向 PHP 之前，我们公司过去使用过很多次。Lasso 的语法相当繁琐，但那是在很多版本之前（3.6.6，大约在 2001 年），它可能已经改进了。我的感觉是开发社区相对较小。

我会将您的决定集中在两个问题上：

1）它现在有效吗？2) 你能多容易地找到或培训了解 Lasso 的人？

由于您的后端是 MySQL，因此使用 PHP 之类的语言没有任何障碍。Lasso 到 PHP 的音译通常非常简单，具体取决于您使用了多少 Lasso 更高级的工具。但即使是那些也倾向于在 PHP 等中有现成的等价物。

真的没有答案。如果应用程序出现故障或性能不佳，和/或您预计在不久的将来需要对其进行全面修改，并且您对找到合格的帮助存有疑虑，那么这可能是考虑迁移到新平台的理由.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-24T15:14:33.490

嘿那里......只是想我会在讨论中添加我的两分钱：我目前每天都在 Lasso 开发。大约 1.5 年前，我在这里（新英格兰大学）被聘为一名网络程序员......几乎没有编程经验（在以前的生活中，我是一名网页设计师。我对 CSS 和 HTML 了如指掌，但是只有一些非常有限的php）。事实上，在我开始这里之前，我什至没有听说过 Lasso 编程语言。无论如何，他们非常有信心我会很快把它捡起来。尽管我持怀疑态度，但他们是对的。Lasso 语法快速且易于学习。一旦你围绕语法和 . `[SquareBrackets]`，其余部分立即到位。在很短的时间内，我就能够构建一些非常复杂的、数据库驱动的 Web 应用程序。

就社区而言，显然 Lasso 的规模远不及 php 或 ruby​​……但我发现 Lasso 的开发人员是该语言的铁杆粉丝，因此非常活跃和乐于助人。就个人而言，我发现一个小型的忠诚社区更容易平易近人，也不那么令人生畏。大多数真正有趣的 Lasso 对话都发生在[LassoTalk](http://www.nabble.com/Lasso---Talk-f739.html)上。哦，还有，我去年参加了 Lasso 开发者大会，被 Lassosoft 公司和开发者社区的奉献精神所震撼。（更不用说 Lasso 9 中出现的所有令人兴奋的东西......今年晚些时候？）

Lasso 的一些缺点：首先是成本。它的价格昂贵。没有两种方法（尽管如果您只是想为演示或非常小的部署构建一些东西，您可能能够摆脱[开发人员的安装](http://www.lassosoft.com/Downloads/index.lasso)）。其次，缺乏成熟的托管选择。看看你可以在任何随机 $5/mo 中获得的大量东西。php 托管计划并将其与您可以为 Lasso 找到的任何内容进行比较。是的，那里很粗糙（这些家伙没什么可看的，但非常可靠：[cheaplassohosting.com](http://cheaplassohosting.com/)）。不过，我猜大多数 Lasso 用户都在托管自己的解决方案。

如果您决定继续使用 Lasso，这里有一些我发现非常宝贵的资源：

[tagSwap - 套索自定义标签的公共交换](http://tagswap.net/index.lasso)

[套索参考](http://reference.lassosoft.com/Reference.LassoApp)

[本周小贴士](http://www.lassosoft.com/Documentation/TotW/index.lasso)

另外值得注意的是，Eclipse 有一个 Lasso 环境，以及 Panic 的 Coda 中的内置支持（我非常赞同！）。

是的……并不是说要这么长。无论如何，我很乐意为您回答一些具体问题。祝您无论选择哪个方向都好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-02T16:30:32.160

不幸的是，我们在这里维护了一个 Lasso 应用程序，这绝对是一场噩梦。Lasso 平均每天崩溃一次。LassoSoft 的人很快就拿走了我们的钱，但没有提供任何有用的支持。就像您可能注意到的那样，没有人使用 Lasso，您将很难聘请合格的员工。使用 Ruby、Python、Perl、Java 甚至 PHP 会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-11T13:49:22.120

我多年前使用 Lasso（使用 FileMaker 6）我只记得它很困难，但我记不起更多关于它的内容了，所以进一步评论它是不公平的，我相信 Dreamweaver 有一个 Lasso Studio 插件，我希望它是自 2003 年以来有所改善。

但是，我可以评论替代方案

*   FileMaker 提供了一个 php 站点助手（既然你是 php 人，这个应该会感兴趣），我没用过这个但是听说过很好的报告

*   一家名为 Six Fried Rice 的公司为 Ruby on Rails 开发了一个名为 Rfm 的插件（请参阅[http://sixfriedrice.com/wp/products/rfm/](http://sixfriedrice.com/wp/products/rfm/)），因此您可以在 Rails 中构建站点并轻松与 FileMaker 服务器通信 -如果你想学习一门新语言，为什么不试试呢，虽然我不是 Rails 专家，但我发现很容易达到一个称职的水平。

有了如此出色的替代方案，并且得到了积极主动的社区的大力支持，我在早期就放弃了 Lasso。

我希望我的意见，尽管它们是主观的，可以帮助你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-04T13:40:21.410

我们使用 Lasso 已有 10 年了，并且对它非常满意。随着时间的推移，我遇到了 2 个不同的开发人员，他们在开始时都了解一些 PHP。我们在这两点上都考虑过是否有理由滴下 Lasso 并将所有内容转移到 PHP。随着每个开发人员对这个职位感到满意，他们都得出结论，Lasso 易于使用，并且在许多方面比 PHP 更直观。在每种情况下，我们都没有朝着完全转换的方向走得太远。

FileMaker 仍然几乎完全满足了我们的数据库需求。因为它可以与 Oracle、MySQL 和 MS Server Server 一起使用，所以它对我们来说仍然是一个完美的数据库解决方案。我们的大多数 Lasso/Web 工作只是将数据显示到 Web 和简单的 Web 表单。我们已经使用 FileMaker PHP 进行了一些尝试，我认为它看起来很有希望。我们还以有限的方式使用了 FileMaker Instant Web Publishing。为工作选择正确的工具，而不是认为一个工具可以做所有事情。

与之前的用户不同，我们多年来没有遇到过崩溃问题。我们的套索/网络服务器在 5 年内没有崩溃过一次。

如果我没有使用 fileMaker 并且使用 Lasso 已有 10 年的历史，我仍然会看一看。我的经验是，它很容易上手，如果你的代码写得很好，文档也很好，那么你就不必担心找到一个有经验的 Lasso 开发人员是多么容易。我认为对于一个 PGH 人来说，打开没有记录的套索代码是最困难的部分——他们没有太多的开始。所以文档就是一切！

最后，Lasso 社区是一个很棒的资源，非常有帮助。虽然可能有大量的 PHP 资源，但很难找到有用的、有用的人。Lasso 有一些非常棒的资源，但也有一个非常活跃的社区，非常愿意帮助你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-01-11T20:24:49.737

我们公司使用 Lasso 和 Filemaker。我发现它与我过去的做法大相径庭。首先选择它的原因是因为 Filemaker。如果您使用的是 MySQL，那么我建议您切换到 PHP 或其他方式。您可以使用更多文档、论坛和示例代码。但话又说回来，移植如此庞大的项目的成本可能不值得。

仅供参考，我们的 Lasso 服务器每月崩溃一次或两次，这比它应该更频繁。

让我们知道您的决定，祝您好运！

# silverlight - 移动 Silverlight 2 弹出窗口

> ID：301641
> 
> 赞同：1
> 
> 时间：2008-11-19T11:36:04.410
> 
> 标签：silverlight, popup, window

我们在 Silverlight 2 应用程序中使用弹出窗口；这些可以通过单击标题栏并拖动以标准方式移动。如果标题栏被拖出浏览器镶边后面的站点，则无法再移动窗口。

我们有用户认为这是有问题的，我想知道当窗口卡在 chrome 后面时是否有其他方法可以移动窗口。

或者也许一种防止弹出窗口的任何部分超出窗口的方法会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-26T07:24:08.250

您的鼠标移动以离散的时间间隔报告。也就是说，您移动鼠标的速度越快，报告的鼠标位置就越远。将鼠标从窗口内快速拖动到窗口外可以报告一个在窗口内的位置（PointA），而下一个报告将在窗口外（PointB）。如果您在拖动时使用 CaptureMouse 调用，您仍然可以在指针位于主机窗口之外时收到鼠标位置报告。当您发现您已经移出窗口时，您可以假设鼠标位于窗口边缘。也就是说，如果您要从 PointA 到 PointB 绘制一条假想线，您可以假设您的最后一点是该线穿过窗口边界的位置。如果您不使用 MouseCapture，或者您使用的是无窗口插件，我不会 不要认为在窗口外拖动时会看到鼠标事件。在这种情况下，估计鼠标越过窗口边界的位置更加困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-20T12:17:58.957

经过一番挖掘，我发现弹出窗口没有标准的拖动机制，但一位同事已经实现了它。很容易扩展代码以将弹出窗口限制在主机窗口中。虽然它的行为有点奇怪。缓慢而平滑的拖动允许弹出窗口向上移动到主窗口的边缘，但快速不稳定的拖动会导致它在完全到达边缘之前停止。仍在试图弄清楚为什么会这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T15:39:47.770

处理此问题的最佳方法是防止用户将其拖到浏览器窗口之外。为此，您可以获得[Silverlight 主机控件](http://msdn.microsoft.com/en-us/library/system.windows.application.host(VS.95).aspx)的宽度和高度。获得该信息后，您可以在用户拖动窗口时检查窗口的位置，并且不要让它们超出窗口的范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-18T00:41:58.853

可能是因为 Mouse_Leave 事件正在触发吗？

# c++ - C++ Visual Studio 运行时错误

> ID：301655
> 
> 赞同：2
> 
> 时间：2008-11-19T11:44:10.070
> 
> 标签：c++, visual-studio, debugging

谁能向我解释这意味着什么？

“运行时检查失败 #0 - ESP 的值未在函数调用中正确保存。这通常是调用使用一种调用约定声明的函数和使用不同调用约定声明的函数指针的结果。”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-19T12:33:17.617

调用函数时，编译器必须将一些参数压入堆栈，或者将它们放入一些寄存器中。函数体将更改一些内存位置（或寄存器）以包含返回值。然后它将返回到存储在堆栈“某处”位置的代码块。

调用约定规定了具体的细节：例如首先压入返回地址，然后从左到右压入堆栈参数（输入或输出），然后执行函数，再次弹出参数，然后弹出返回地址并跳转到那个位置。

如果调用者执行此操作的方式与函数预期的不同，则可能会出错（返回位置不在预期的堆栈位置）。

ESP 通常是包含当前堆栈帧地址的寄存器。该寄存器与索引结合使用以获取函数体中的参数。返回时，堆栈顶部通常重置为 ESP，并且处理器跳转到例如 ESP+1 处的位置。

可能导致这种情况发生的事情：

*   有人改写了堆栈的值并更改了返回位置（例如缓冲区溢出）
*   调用者的调用约定与被调用者不同

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T11:47:37.677

可能性 #1 是您的对象别名错误。这意味着编译器错误地错误地转换了一个对象，最常见的是作为一种优化。

可能性 #2 您使用对无效对象的引用。

可能性 #3 一些完全不相关的东西破坏了你的堆栈，可能是缓冲区溢出。

没有代码示例 除了这些可能性之外，很难预测，但它们涵盖了可能发生的 90%。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T13:26:11.223

这意味着在调用函数后处理器 ESP 寄存器中的值没有正确恢复。

如前所述，函数参数被压入堆栈，并在函数结束后通过调整 esp 寄存器转储。在某些调用约定中，esp 寄存器在函数调用返回后由调用代码进行调整。在其他约定中，它由被调用的函数调整，就在它返回之前。

当调用代码和被调用代码之间出现关于谁调整 esp 的分歧时，我看到了这个错误。仔细查看函数的声明方式，特别是如果它位于单独的库或 dll 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T14:00:28.720

这通常是在调用 Windows API（例如 DialogBox）时强制转换函数指针以关闭编译器的情况：

```
DialogBox(hInstance, MAKEINTRESOURCE(MY_DIALOG), hWnd, &dlgProc); 
```

Windows 有点奇怪，因为所有函数都是使用 stdcall 调用约定定义的，这与 C 中的默认值 cdecl 相反。因此，应该传递给 Windows API 的所有函数都应该使用 WINAPI（stdcall 的定义）定义：

```
INT_PTR WINAPI dlgProc(HWND, UINT, WPARAM, LPARAM); 
```

如果你错过了，而是将你的 dlgProc 定义为：

```
INT_PTR dlgProc(HWND, UINT, WPARAM, LPARAM); 
```

您的代码将无法编译，您可能非常想关闭 frikkin' 编译器：

```
DialogBox(hInstance, MAKEINTRESOURCE(MY_DIALOG), hWnd, (DLGPROC)&dlgProc); // be a DLGPROC already, dammit!! 
```

不要那样做。程序会崩溃。编译器是你的朋友。C 风格的强制转换运算符不是。编译器试图告诉你这将会发生。这是正确的。听这个。

# asp.net - 断点aspx页面

> ID：301658
> 
> 赞同：11
> 
> 时间：2008-11-19T11:47:09.237
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2008, debugging

如何在 .aspx 页面的服务器标记中设置断点。例如

```
<%   dim breakhere =new object() %> 
```

`<compilation debug="true" ...`Web 应用程序使用web.config以调试模式运行。但是页面说：

> 断点目前不会被击中。没有为此文档加载任何符号。

还有什么我需要设置的吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-11-19T15:02:49.703

而不是直接设置断点，您可以使用

```
<%  System.Diagnostics.Debugger.Break();

    // more code here...

     %> 
```

也许更好的建议是不要将内联代码放入您的标记中 - 而是将其放入代码隐藏文件中的一个方法中，然后从您的标记中调用该方法。在代码隐藏的方法中，您可以像往常一样使用断点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-11-19T13:59:39.097

我自己没有尝试过，但是在 ASP (VBScript) 中，您可以注入一个 STOP 语句，这将触发 IDE 在该行中断

例子

```
<%
STOP
Dim o as Object = new Object()
%> 
```

高温高压

# php - 正则表达式仅在两个字符串之外替换文本？

> ID：301667
> 
> 赞同：1
> 
> 时间：2008-11-19T11:49:06.223
> 
> 标签：php, regex

我想用“>”替换“>”，用“<”替换“<”，但前提是它们出现在“<pre>”和“</pre>”之外。这可能吗？

```
$newText = preg_replace('&gt', '>', $text); 
```

如上所述，我将在 PHP 中使用 preg_replace。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T12:37:43.740

这不是一个真正的答案，因为您要求使用正则表达式，但我只是编写了一个非常脏的函数来做到这一点：

```
<?php

$html = ' <pre>hello &gt; &lt;</pre>
            &gt; &lt;
            <pre></pre>';

function stringReplaceThing($str) {
    $offset = 0;
    $num = 0;
    $preContents = array();
    $length = strlen($str);

    //copy string so can maintain offsets/positions in the first string after replacements are made
    $str2=$str;

    //get next position of <pre> tag
    while (false !== ($startPos = stripos($str, '<pre>', $offset))) {
        //the end of the opening <pre> tag
        $startPos += 5;

        //try to get closing tag
        $endPos = stripos($str, '</pre>', $startPos);

        if ($endPos === false) {
            die('unclosed pre tag..');
        }

        $stringWithinPreTags = substr($str, $startPos, $endPos - $startPos);
        //replace string within tags with some sort of token
        if (strlen($stringWithinPreTags)) {
            $token = "!!T{$num}!!";
            $str2 = str_replace($stringWithinPreTags, $token, $str2);
            $preContents[$token] = $stringWithinPreTags;
            $num++;
        }

        $offset = $endPos + 5;
    }

    //do the actual replacement
    $str2 = str_replace(array('&gt;', '&lt;'), array('>', '<'), $str2);

    //put the contents of <pre></pre> blocks back in
    $str2 = str_replace(array_keys($preContents), array_values($preContents), $str2);
    return $str2;
}

print stringReplaceThing($html); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-20T07:40:18.860

如果你想用一个正则表达式来做到这一点，诀窍是让你的正则表达式匹配你不想替换的东西以及你想要替换的东西，并根据匹配的内容动态计算替换。

```
$new_text = preg_replace_callback('%&lt;|&gt;|<pre>.*?</pre>%si', compute_replacement, $text);

function compute_replacement($groups) {
    if ($groups[0] == '&lt;') {
      return '<';
    } elseif ($groups[1] == '&gt;') {
      return '>';
    } else {
      return $groups[0];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T12:29:14.240

我不确定 PHP 的正则表达式引擎是否会做负面的环视，但这就是你感兴趣的。其他语言的正则表达式看起来像：

```
/(?<!(<pre>[^(<\/pre>)]*))XXX(?!(.*<\/pre>))/ 
```

（吸气——我*想*我有这个权利）

其中 XXX 是您的模式“<”或“>”

注意。可能还有更简单的模式

# java - 编程简单的绘图应用程序

> ID：301669
> 
> 赞同：1
> 
> 时间：2008-11-19T11:49:44.227
> 
> 标签：java, graphics, svg

为了对数据进行一些可视化，我想在我的图表中包含矩形、圆形和文本。有谁知道可以导出 SVG 图形的基于 Java 的框架（可能类似于非常基本的 Powerpoint 功能）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T12:01:07.853

看看 Java Advanced Imaging ( [JAI](http://java.sun.com/javase/technologies/desktop/media/jai/) ) 和[Batik](http://xmlgraphics.apache.org/batik/) SVG 工具包：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T12:08:39.040

[这里](http://java.sun.com/developer/technicalArticles/GUI/svg/)有一篇关于 SVG 和 Java 的有趣文章。最后，它讨论了以编程方式创建 SVG 元素（使用 DOM 操作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T12:19:22.123

我使用的另一个解决方案（尽管在我的情况下仅显示 SVG 文件）是[Salamander](https://svgsalamander.dev.java.net/)：

它重量轻，易于与秋千一起使用。它包含一个 SVGIcon 类，可以轻松地将 SVG 图像添加到应用程序中。

因为它支持动画，所以您可以修改 SVG 文件的 DOM，并且更改将显示在屏幕上。

只有以SVG开头才能满足能够轻松导出为SVG的要求...：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T14:05:54.247

一个*可能的*解决方案是使用具有[Java 绑定](http://www.cairographics.org/bindings/ "Language bindings")并且可以导出为多种格式（包括 SVG）的[Cairo 。](http://www.cairographics.org/ "开罗")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T12:17:23.310

您可以使用内置的 java.awt 包来实现基本绘图功能。

[http://java.sun.com/j2se/1.4.2/docs/api/java/awt/Graphics2D.html](http://java.sun.com/j2se/1.4.2/docs/api/java/awt/Graphics2D.html)

从 java.awt.Drawable 接口扩展您的类并实现：

`public void draw(Graphics graphicsIn)`方法。

编辑：我没有读到您需要 SVG 导出。在这种情况下，我的建议可能是愚蠢的。

# web-applications - 基于 Web 的应用程序的 3d 图形

> ID：301676
> 
> 赞同：3
> 
> 时间：2008-11-19T11:57:26.987
> 
> 标签：web-applications, 3d, kinematics

我必须创建一个基于 Web 的应用程序，其中包括以下任务

*   从数据库加载 3D 模型。
*   显示 3D 模型。
*   进行逆运动学计算以生成模型从初始位置移动到最终位置的一系列步骤。
*   实时显示动画。

该应用程序最初旨在成为基于 Qt/OpenGL 的基于 PC 的应用程序，但我们正在调查将其实现为基于 Web 的应用程序是否可行。

我对基于 Web 的开发的知识仍然有限。

为了提出解决方案，推荐的方法/技术是什么？

谢谢！！

更新：首选平台独立解决方案。该应用程序需要在 Mac 和 Windows 机器上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-19T12:01:15.683

如果它是一个 web 应用程序，您应该研究 Papervision3D ( [http://papervision3d.org/](http://papervision3d.org/) ) 以获得基于 Flash 的方法（如果您希望它相对独立于平台，那就是这种方法）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-19T12:28:42.930

Java 小程序也可能会做你想做的事。

看看[java 3d](http://java.sun.com/javase/technologies/desktop/java3d/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-04T06:08:32.997

还有谷歌优秀但新的 O3D：[http ://code.google.com/apis/o3d/](http://code.google.com/apis/o3d/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-07-09T17:33:30.347

webgl 也是一个有趣的选择。没有插件，只需在浏览器中打开gl（包括着色器）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-19T12:04:25.663

好吧，您当然不能在 HTML 中完成所有这些操作，因此选择插件技术是个问题。

在我看来，最好的选择是 Flash，因为这是一个成熟的平台，有许多 3rd 方扩展（例如[http://www.flashsandy.org/](http://www.flashsandy.org/)）可让您进行 3D 建模。

另一种选择是 Silverlight，它将为您提供 .NET/C#（而不是脚本）的强大功能。

两者都是跨平台和跨浏览器的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-22T16:34:05.197

Canvas 和 JavaScript 可能能够渲染它，这取决于您的 3D 模型的复杂性。请参阅此[Canvas 3D 示例](http://lbi.lostboys.nl/blog/artikelen/canvas-in-full-3d/)

还有用于编写 3D 应用程序的[Firefox Canvas 3D 插件](https://addons.mozilla.org/en-US/firefox/addon/7171)和[Canvas 3d JS 库。](http://www.c3dl.org/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-19T12:31:45.123

有很多方法可以解决这个问题。我想到的一些：

*   考虑将其作为 ActiveX 组件提供（最快，但仅限 Win32）。
*   考虑使用 .NET (Silverlight)（在可预见的未来通过 Moonlight 使用 Win32、OSX、*nix；仅限 DirectX/Direct3D）
*   考虑使用Java，它也可以访问OpenGL。
*   考虑使用您遇到的任何中间位置..应该有几十个。

一个问题可能是便携性。这里有两个警告：您的代码需要在任何地方运行，并且需要 3D 加速。这是一个问题，因为您无法确定它是否具有 3D（当然，您可以查询您的上下文）。

因此，您可能还需要考虑在 CPU 上进行光栅化和渲染（即使用 MESA3D）。如果您不需要允许自由变换并且想要制作 30 帧的动画并使用 Mesa，您可能会在典型硬件上的典型模型上渲染 5fps，那么您需要 6 秒来计算整个场景。那就足够了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-12-24T06:52:10.027

另一个 Java 选项，与 JVM 集成较少，但基于 OpenGl - [lwjgl](http://lwjgl.org/)（我最喜欢的）和 [jogl](https://jogl.dev.java.net/)。

检查 Jake2 webstart：[http ://bytonic.de/html/jake2_webstart.html](http://bytonic.de/html/jake2_webstart.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-07-09T17:29:42.023

Adobe Shockwave 具有强大的 3D 建模功能。不幸的是，目前它的支持不足，但 Flash 没有 3d 功能（papervision3d 项目试图纠正这一点，YMMV）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-07-09T20:09:54.617

我同意其他人的观点，Flash 可能是您最好的选择。如果将来对在苹果移动设备上运行有顾虑，并且成本不是问题，那么可以考虑使用 Unity 开发一些东西。它是一个插件（如 Flash），但并没有激起史蒂夫乔布斯的愤怒。

[http://unity3d.com/gallery/developer-profiles/web-games/](http://unity3d.com/gallery/developer-profiles/web-games/)

# c# - 在 winform 中嵌入 winform (c#)

> ID：301678
> 
> 赞同：15
> 
> 时间：2008-11-19T11:58:43.707
> 
> 标签：c#, winforms

是否可以在另一个窗体中嵌入窗体？

我在 Visual Studio 中创建了一个 Windows 窗体及其所有相关行为。

我现在想创建另一个包含选项卡视图的窗体，并且我想将第一个窗体嵌入到选项卡视图中。这可能吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-05-21T14:57:45.913

## 免责声明

当我在我的应用程序中广泛使用它时，这将起作用。话虽如此，我会追求用户控制路线，这取决于您将嵌入的东西开始*剥落的**程度*。供参考

 ** * *

是的，这是可能的。这是如何：

```
public static void ShowFormInContainerControl(Control ctl, Form frm)
{
    frm.TopLevel = false;
    frm.FormBorderStyle = FormBorderStyle.None;
    frm.Dock = DockStyle.Fill;
    frm.Visible = true;
    ctl.Controls.Add(frm);
} 
```

我在类库中有它，然后我从要嵌入的 FORM 中这样调用它。

```
public FrmCaseNotes FrmCaseNotes;
FrmCaseNotes = new FrmCaseNotes();
WinFormCustomHandling.ShowFormInContainerControl(tpgCaseNotes, FrmCaseNotes); 
```

`tpgCaseNotes`我想`FrmCaseNotes`嵌入表单的控件在哪里。
在这种情况下，我从中调用表单上的一个标签页。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-11-19T12:02:04.527

不是直接的。您可以创建一个用户控件，将所有代码从您的表单移动到用户控件并在两个表单中使用它。您可能需要更改表单中的一些代码，但可能不会太多。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-19T13:05:39.050

做到这一点的方法是使用用户控件而不是表单。这就是用户控件的用途。这种技术可以用于相当多的用户界面技巧，例如向导（控件可以在向导和应用程序的其他部分之间共享）、带有树控件的资源管理器样式浏览器以及基于所选节点换出的控件。

我在应用程序架构方面做了很多工作，这些架构使用用户控件来控制一切，并为资源管理器、向导和其他类型的表单（甚至可以追溯到 VB6）提供框架。作为一种方法，它非常有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-07-28T17:56:58.213

假设您有 2 个项目 win1 和 win2。两者都是winform项目。你寻找在win1中嵌入win2。

解决方案：

打开win2项目并将输出类型更改为“类库”（在应用程序选项卡中）

打开项目win1，将win2 dll项目添加为win1项目中的ref，进入win1代码，并输入：

```
 win2.Form1 formI = new win2.Form1();
        formI.TopLevel = false;
        formI.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
        formI.Size = this.Size;
        formI.BringToFront();
        formI.Visible = true;
        this.Controls.Add(formI); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T12:45:07.140

您可以尝试 SetParent() API 调用，尽管我还没有验证它是否可以自己工作。如果这不起作用，上述 Mendlet 的解决方案可能是您的最佳选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-22T20:08:49.437

```
using System.Runtime.InteropServices;
class EmbedForm{
    [DllImport("user32.dll")]
    public extern IntPtr SetParent(IntPtr hWndChild, hWndNewParent);
    //code, code, code...
} 
```

用法： EmbedForm.SetParent(ChildForm.Handle, ParentForm.Handle)

# printing - 未指定运行报告所需的一个或多个参数

> ID：301679
> 
> 赞同：7
> 
> 时间：2008-11-19T11:58:47.390
> 
> 标签：printing, reportviewer, rdlc

我试图在不显示 Microsoft Report Viewer 的情况下直接打印 RDLC 文件，我遵循了[MSDN 的示例](http://msdn.microsoft.com/en-us/library/ms252172.aspx)，但现在，每次我调用 LocalReport 类实例的“Render”方法时，它都会抛出“一个或多个参数需要运行报告尚未指定。” 例外。

谁能告诉我我错过了哪个参数？或者我如何才能找到有关此异常的更多详细信息？

```
 LocalReport report = new LocalReport();
        report.ReportPath = System.Windows.Forms.Application.StartupPath + "\\" + rdlcFileName;
        report.EnableExternalImages = true;

        ReportParameter[] reportParams = new ReportParameter[]
        {
            new ReportParameter("LogoAddress", settings.LogoFileName),
            new ReportParameter("FooterValue", settings.InvoicesFooter)
        };
        report.SetParameters(reportParams);

        report.DataSources.Add(new ReportDataSource("Invoice", new PrintableInvoice[] { invoice }));
        report.DataSources.Add(new ReportDataSource("InvoiceItem", invoiceItems));

        Warning[] warnings;
        try
        {
            string deviceInfo =
                "<DeviceInfo>" +
                "  <OutputFormat>EMF</OutputFormat>" +
                "  <PageWidth>8.5in</PageWidth>" +
                "  <PageHeight>11in</PageHeight>" +
                "  <MarginTop>0.25in</MarginTop>" +
                "  <MarginLeft>0.25in</MarginLeft>" +
                "  <MarginRight>0.25in</MarginRight>" +
                "  <MarginBottom>0.25in</MarginBottom>" +
                "</DeviceInfo>";

            m_streams = new List<Stream>();
            report.Render("Image", deviceInfo, _CreateStream, out warnings);

            foreach( Stream stream in m_streams )
                stream.Position = 0;
        }
        catch( Exception ex )
        {
            System.Diagnostics.Debug.WriteLine(ex.Message);
        } 
```

_CreateStream 是：

```
 private Stream _CreateStream(string name, string fileNameExtension, Encoding encoding, string mimeType, bool willSeek)
    {
        Stream stream = new FileStream(name + "." + fileNameExtension, FileMode.Create);
        m_streams.Add(stream);
        return stream;
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2010-11-12T09:39:12.507

我刚刚发现如果你将参数值作为空字符串传递，比如 parameter = "" 它会给你那个错误

花了我一段时间

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-14T19:41:14.457

在参数属性中允许 null 将解决此问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-04T10:56:28.847

原因：本地报告不允许您传递空或空参数，我不知道为什么，但它会引发异常。

修复：找出导致异常的参数的一种方法是调用 `var result = report.LocalReport.GetParameters();` 方法，在结果参数数组中它具有 `result[0].State` 属性，如果它是值 `MissingValidValue` 则导致异常。

例子：

```
 var rv = new ReportViewer { ProcessingMode = ProcessingMode.Local };
        rv.LocalReport.ReportPath = Server.MapPath("~/PrintForms/FromForm.rdlc");
        rv.LocalReport.Refresh();

        string mimeType;
        string encoding;
        string filenameExtension;
        string[] streamids;
        Warning[] warnings;

        rv.LocalReport.SetParameters(new ReportParameter("ClientName", "გიორგი გიორგაძე"));
        rv.LocalReport.SetParameters(new ReportParameter("Account", "888"));var streamBytes = rv.LocalReport.Render("PDF", null, out mimeType, out encoding, out filenameExtension, out streamids, out warnings);
        return File(streamBytes, mimeType); 
```

上面的代码可以正常工作，但是如果您将参数添加行更改为：

```
rv.LocalReport.SetParameters(new ReportParameter("Account", null)); 
```

Account ReportParameter 的 State 值将是 MissingValidValue 并且会导致 Exception 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-14T17:25:57.250

如果您确实需要将空白字符串作为值传递，则可以执行以下操作：

*   打开参数属性（右键单击报告数据面板上的参数）；
*   标记*允许空白值 ("")*复选框。

这为我解决了问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-04T21:00:22.860

另一种可能发生这种情况的方式是，如果您使用的是共享数据集，并且您包含报表未使用的数据集。每个报告必须在本地为每个共享数据集定义自己的参数版本。因此，如果您已将数据集作为您的数据源之一，并且您没有明确定义此特定报告将如何将参数传递给该数据集，您将收到此错误。

# php - PHP5“克隆”如何工作？

> ID：301681
> 
> 赞同：0
> 
> 时间：2008-11-19T11:59:46.607
> 
> 标签：php, clone

编辑：此行为可通过[查询全局变量](https://stackoverflow.com/questions/301766/mutability-and-reference-of-php5-get-variables)重现。

我有以下内容：

```
 $_SESSION['query_key'] = $_GET['query_key'];
  print($query_key); 
```

比。

```
 $_SESSION['query_key'] = clone $_GET['query_key'];
  print($query_key); 
```

前者打印出 $query_key 的值，而后者什么也不打印。克隆的这种奇怪的副作用是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T12:15:44.127

你一定在用你的代码做一些很奇怪的事情。 [克隆](http://www.php.net/clone)用于对象。除非您将对象填充到 $_GET 中，否则该代码将导致致命错误（或旧 PHP 版本中的警告）。

@Michael Haren - clone 实际上对一个对象进行了浅拷贝，也就是说，它复制了所有属性，但是如果一个属性是对另一个对象的引用，它将复制引用，而不是克隆另一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T13:29:16.210

我知道这并没有真正具体回答这个问题，但根据您对 Roborg 的评论，我认为这不是您在其他问题（[此处](https://stackoverflow.com/questions/301766/php5-get-variables)）中提到的问题的好解决方案 - 您最好禁用 register_globals

只要你这样做

```
$_SESSION['query_key'] = 'anything' 
```

$query_key 将是对 的引用 `$_SESSION['query_key']`，因此克隆您放入其中的内容不会有任何区别

**编辑**

克隆仅适用于对象，因此您无法克隆字符串。这将导致致命错误。我认为，如果您查看日志或将 display_errors 设置为“开”，您将收到错误而不是空白页

# logging - 为什么自动注入日志对象并不总是在 grails 中工作？

> ID：301683
> 
> 赞同：4
> 
> 时间：2008-11-19T12:00:17.917
> 
> 标签：logging, grails, groovy, log4j, code-injection

在 grails-framework 中，一些对象正在使用日志。这通常由 grails 注入。它适用于`grails test-app`. 但是相同的测试（集成测试）在执行`grails test-app -integration`.

这里出了什么问题，我可以以某种方式强制注入日志对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T21:31:30.527

你用的是什么版本的grails？在 1.0.4（最新版本）上，这两种情况都适用于我。

我创建了一个新的空白应用程序并创建了一个带有集成测试的服务类：

FooService.groovy：

```
class FooService {
    def logSomething(message) {
        log.error(message)
        return true
    }
} 
```

FooServiceTests.groovy：

```
class FooServiceTests extends GroovyTestCase {
    def fooService
    void testSomething() {
    assert fooService.logSomething("it works")
    }
} 
```

仅运行 test-app 时，我收到日志消息：

```
% grails test-app             

Welcome to Grails 1.0.4 - http://grails.org/
....
-------------------------------------------------------
Running 1 Integration Test...
Running test FooServiceTests...
                        testSomething...[4174] service.FooService it works
SUCCESS
Integration Tests Completed in 440ms
-------------------------------------------------------
... 
```

仅运行集成测试时，它也可以：

```
% grails test-app -integration

Welcome to Grails 1.0.4 - http://grails.org/
....
-------------------------------------------------------
Running 1 Integration Test...
Running test FooServiceTests...
                    testSomething...[4444] service.FooService it works
SUCCESS
Integration Tests Completed in 481ms
-------------------------------------------------------
.... 
```

您是否在使用记录器类（或在任何以前的集成类或单元测试中覆盖记录器上的任何元类内容，然后不重新初始化元类？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-10T10:21:54.877

我刚刚遇到了这个确切的问题，通过调用 mockLogging 功能*很容易解决：*

```
void testTheMagic() {
    mockLogging(MyMagicService)
    def testService = new MyMagicService()
    ...
} 
```

（使用 Grails 1.1.1，如果重要的话）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-08-11T15:21:45.617

我正在使用 1.3.2，并且登录测试工作正常。只要确保您已经为测试环境指定了 log4j 配置。

# sql - SQL汇总时间范围的最小/最大活动

> ID：301695
> 
> 赞同：2
> 
> 时间：2008-11-19T12:06:59.650
> 
> 标签：sql

这是一个 SQL 问题，我无法在一个简单的查询中解决问题 有可能吗？

数据集是（为便于理解添加了字母）：

```
Start      End
10:01      10:12     (A)
10:03      10:06     (B)
10:05      10:25     (C)
10:14      10:42     (D)
10:32      10:36     (E) 
```

所需的输出是：

```
PeriodStart   New       ActiveAtEnd    MinActive   MaxActive
09:50         0         0              0           0
10:00         3 (ABC)   2 (AC)         0           3 (ABC)
10:10         1 (D)     2 (CD)         1 (C)       2 (AC or CD)
10:20         0         1 (D)          1 (C)       2 (CD)
10:30         1 (E)     1 (D)          1 (D)       2 (DE)
10:40         0         0              0           1 (D)
10:50         0         0              0           0 
```

因此，需要的查询是对第一个表的摘要，从第一个表计算 10 分钟内的最小重叠时间段（Start-End）和最大重叠时间段（Start-End）。

'New' 是汇总期间具有 Start 的行数。'ActiveAtEnd' 是在汇总期结束时活动的行数。

我正在使用 Oracle，但我确信可以调整解决方案。不允许存储过程 - 只是简单的 SELECT/INSERT（允许查看）。每 10 分钟输出运行一个 SQL 命令也可以（一旦填充，这将是它保持最新的方式。

感谢您的任何想法，包括“不可能”；-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T15:46:01.330

假设您还有（或创建）一个名为 @Times 的表，每十分钟开始时间有一条记录，那么...

```
 Select T.Start,  
      (Select Count(*) From testTab
       Where Start Between T.Start 
          And DateAdd(minute, 10, T.Start)) New,
      (Select Count(*) From testTab
       Where Start < DateAdd(minute, 10, T.Start)
          And EndDt > DateAdd(minute, 10, T.Start)) ActiveAtEnd,
      (Select Max(Cnt) From 
          (Select Count(Distinct T.Which) Cnt
           From  (Select Distinct Start
                    From testTab
                    Where Start Between T.Start 
                           And DateAdd(minute, 10, T.Start)
                    Union Select T.Start 
                    Union Select DateAdd(minute, 10, T.Start)) Z
             Left Join testTab T 
               On Z.Start Between T.Start And T.EndDt
           Group By Z.Start) ZZ ) MaxActive,
      (Select Min(Cnt) From 
           (Select Count(Distinct T.Which) Cnt
            From  (Select Distinct Start
                   From testTab
                   Where Start Between T.Start 
                           And DateAdd(minute, 10, T.Start)
                   Union Select T.Start                                                         
                   Union Select DateAdd(minute, 10, T.Start)) Z
              Left Join testTab T 
                 On Z.Start Between T.Start And T.EndDt
           Group By Z.Start) ZZ ) MinActive     
   From @Times T 
```

我在 SQL Server 中将此表创建为表变量，使用

```
Declare @Times Table (Start datetime Primary key Not Null)
Declare @Start DateTime 
Set @Start = '1 Nov 2008 10:00'
While @Start < '1 Nov 2008 11:00' begin
    Insert @Times(Start) values(@Start)
    Set @Start = DateAdd(minute, 10, @Start) 
End 
```

如果您使用的是另一种产品，请改用临时表...但是这种方法确实需要一个表，其中每十分钟“期间”有一个记录作为运行的挂钩...

使用以下数据，此查询生成如下输出：

```
start                   endDt                   Which
----------------------- ----------------------- -----
2008-11-01 10:01:00.000 2008-11-01 10:12:00.000 A
2008-11-01 10:03:00.000 2008-11-01 10:06:00.000 B
2008-11-01 10:05:00.000 2008-11-01 10:25:00.000 C
2008-11-01 10:14:00.000 2008-11-01 10:42:00.000 D
2008-11-01 10:32:00.000 2008-11-01 10:36:00.000 E
2008-11-01 10:22:00.000 2008-11-01 10:51:00.000 F
2008-11-01 10:22:00.000 2008-11-01 10:23:00.000 G

Start                   New         ActiveAtEnd MaxActive   MinActive
----------------------- ----------- ----------- ----------- -----------
2008-11-01 10:00:00.000 3           2           3           0
2008-11-01 10:10:00.000 1           2           2           2
2008-11-01 10:20:00.000 2           2           4           2
2008-11-01 10:30:00.000 1           2           3           2
2008-11-01 10:40:00.000 0           1           2           1
2008-11-01 10:50:00.000 0           0           1           0 
```

警告：空值被聚合或其他 SET 操作消除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T14:18:48.013

我正在为 ActiveAtEnd 值苦苦挣扎，但其他都可以。

这是针对 MySQL 的：

```
set @active:=0;

select 
  period, 
  sum( if( score=1, 1, 0)) New, 
  if( max(ab) > max(aa), max(ab), max(aa)) MaxActive, 
  if( min( ab ) < min( aa ), min(ab), min(aa)) MinActive  
from  (
        select 
          period, 
          etime, 
          score, 
          @active ab, 
          @active:=@active+score aa 
        from (
               select 
                 from_unixtime( floor( unix_timestamp(start)/600) * 600) period, 
                 start etime, 
                 +1 score 
               from ev  
               union all
               select from_unixtime( floor( unix_timestamp(end)/600) * 600) period, 
                 end etime, 
                 -1 score
               from ev 
             ) event order by etime
      ) as temp 
group by period; 
```

最里面的选择将原始表格分成一组事件 - 开始事件的得分为 +1，结束事件的得分为 -1。union all 用于允许重复事件。

下一个内部选择在分数值上运行一个变量 - @active 保存每个时间点的活动间隔数的计数。@active 在添加当前计数之前和之后的值都被选中：我不知道它的可移植性如何。

最外层的选择会累积每个时期的结果。'New' 是'+1' 分数的总和，MaxActive 和 MinActive 必须同时考虑 active before (ab) 和 active after (aa) 的值。

以下是示例结果：

```
+---------------------+------+-----------+-----------+
| period              | New  | MaxActive | MinActive |
+---------------------+------+-----------+-----------+
| 2008-11-19 10:00:00 |    3 |         3 |         0 |
| 2008-11-19 10:10:00 |    1 |         2 |         1 |
| 2008-11-19 10:20:00 |    0 |         2 |         1 |
| 2008-11-19 10:30:00 |    1 |         2 |         1 |
| 2008-11-19 10:40:00 |    0 |         1 |         0 |
+---------------------+------+-----------+-----------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T13:56:01.770

我曾经能够解决此类问题的唯一方法是获取每分钟的“开始”计数。然后，您将获得 10 分钟组的最大值（或最小值）。我无法应用基于集合的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T12:24:52.267

New 和 ActiveAtEnd 相当简单（假设期间的开始和结束存储在临时变量中）：

```
select  @periodStart PeriodStart
, @periodEnd PeriodEnd 
, n.[new]
, ae.ActiveAtEnd
from (
select  count(*) [new] 
from    @times 
where   [start] >= @periodStart
and [start] < @PeriodEnd 
) n 
cross join 
(
select  count(*) [ActiveAtEnd] 
from    @times
where   [start] < @PeriodEnd 
and [end] >= @PeriodEnd 
) ae 
```

Max 和 Min Actives 更难。您可以假设一分钟的粒度，因此您需要以该粒度展开活跃期，以便能够探测每个切片。

我不确定这在单个查询中是否可行。

# javascript - 下载js和css时显示加载信息

> ID：301696
> 
> 赞同：1
> 
> 时间：2008-11-19T12:07:44.813
> 
> 标签：javascript

我有一个在 javascript 和 css 中大量加载的网络应用程序。用户第一次登录时，下载 js 等需要一些时间来加载。然后缓存将使一切变得更快。

我希望我的用户知道这个加载时间。如何在下载 js 和 css 时添加一些代码以“显示”一些加载信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T12:23:34.780

您可以显示一个叠加层，上面写着“正在加载...”，并在下载完成时隐藏它。

```
<html>
    <head>
        ... a bunch of CSS and JS files ...

        <script type="text/javascript" src="clear-load.js"></script>
    </head>
    <body>
        <div 
            style="position: absolute; left: 50px; right: 50px; top: 50px; bottom: 50px; border: 3px solid black;"
            id="loading-div"
        >
            This page is loading! Be patient!
        </div>

        ... Your body content ...
    </body>
</html> 
```

clear-load.js 的内容：

```
document.getElementById('loading-div').style.display = 'none'; 
```

当然，您也可以在加载的最后一个 javascript 文件的底部添加隐藏 div 的 javascript 代码。

此外，尝试将您的 javascript 和 css 文件打包到一个文件中，并对它们应用 gzip 压缩或“缩小”。如果操作正确，您可以在 20 个请求中将 500KB 的 javascript 带入 1 个小于 100KB 的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T12:19:10.470

仁慈的母亲，Ricardo，这个应用程序涉及到多少 Javascript 和 CSS？

我猜你可以做一些事情，使用 AJAX 请求加载 JS 和 CSS 而对它们不做任何事情。这会将您的 JS 和 CSS 文件加载到缓存中。您可以在“加载”页面上完成所有这些操作，并在加载文件后重定向到真实页面。但是 IMO 你真的不应该这样做。使用[Fiddler](http://www.fiddlertool.com/fiddler/)真正了解幕后发生的事情——确保人们在进行此优化之前确实必须等待他们的 JS/CSS 文件下来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T12:22:42.457

加载时间取决于 javascript 和 css 的大小，这对我来说似乎很奇怪。您确定没有其他因素导致加载时间过长吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-20T18:29:08.770

请帮自己一个忙并尝试 YSlow，可在[http://developer.yahoo.com/yslow 获得](http://developer.yahoo.com "慢")。这是一个 Firebug 插件（是的，一个插件的插件），它将分析您的网站并推荐修复它的策略。

# content-management-system - Alfresco + Opsoro 设置

> ID：301698
> 
> 赞同：2
> 
> 时间：2008-11-19T12:08:14.000
> 
> 标签：content-management-system, alfresco

我想建立一个内容管理系统。而且我觉得 Alfresco 和 Opsoro 的结合是一个很好的组合。还有其他建议吗？

参观[Alfresco](http://www.alfresco.com) & [Opsoro](http://www.fme.de/Screencams/opsoro/opsoro.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-02T21:38:48.590

免责声明 - 我为 Alfresco 工作。只是想指出——我最近创建[了一个 wiki 页面](http://wiki.alfresco.com/wiki/Category:Alternate_UIs)，用于跟踪 Alfresco 可用的不同 UI——包括 Opsoro。

# c - C 预处理器宏是否可以包含预处理器指令？

> ID：301711
> 
> 赞同：32
> 
> 时间：2008-11-19T12:12:38.000
> 
> 标签：c, macros, nested, c-preprocessor, expansion

我想做相当于以下的事情：

```
#define print_max(TYPE) \
#  ifdef TYPE##_MAX \
     printf("%lld\n", TYPE##_MAX); \
#  endif

print_max(INT); 
```

现在，`#ifdef`就我在函数宏中看到的而言，不允许使用或任何嵌套的预处理器指令。有任何想法吗？

更新：所以这似乎是不可能的。即使是在运行时检查的 hack 似乎也无法实现。所以我想我会选择类似的东西：

```
#ifndef BLAH_MAX
#  define BLAH_MAX 0
#endif
# etc... for each type I'm interested in

#define print_max(TYPE) \
    if (TYPE##_MAX) \
       printf("%lld\n", TYPE##_MAX);

print_max(INT);
print_max(BLAH); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-11-19T15:48:18.283

[Boost 预处理器](http://www.boost.org/doc/libs/1_37_0/libs/preprocessor/doc/index.html)（它适用于 C 和 C++，尽管 Boost 作为一个整体是一个 C++ 库）库可以帮助完成此类任务。它不是在宏中使用#ifdef（这是不允许的），而是帮助您多次包含一个文件，每次定义不同的宏，以便文件可以使用#ifdef。

以下代码，如果保存到 max.c，应该对文件顶部的 MAXES #define 中列出的每个单词执行您想要的操作。但是，如果任何 _MAX 值是浮点数，它将不起作用，因为预处理器无法处理浮点数。

（Boost Processor 是一个方便的工具，但它并不十分简单；您可以决定这种方法是否是对复制粘贴的改进。）

```
#define MAXES (SHRT)(INT)(LONG)(PATH)(DOESNT_EXIST)

#if !BOOST_PP_IS_ITERATING

/* This portion of the file (from here to #else) is the "main" file */

#include <values.h>
#include <stdio.h>
#include <boost/preprocessor.hpp>

/* Define a function print_maxes that iterates over the bottom portion of this
 * file for each word in MAXES */
#define BOOST_PP_FILENAME_1 "max.c"
#define BOOST_PP_ITERATION_LIMITS (0,BOOST_PP_DEC(BOOST_PP_SEQ_SIZE(MAXES)))
void print_maxes(void) {
#include BOOST_PP_ITERATE()
}

int main(int argc, char *argv[])
{
    print_maxes();
}

#else

/* This portion of the file is evaluated multiple times, with
 * BOOST_PP_ITERATION() resolving to a different number every time */

/* Use BOOST_PP_ITERATION() to look up the current word in MAXES */
#define CURRENT BOOST_PP_SEQ_ELEM(BOOST_PP_ITERATION(), MAXES)
#define CURRENT_MAX BOOST_PP_CAT(CURRENT, _MAX)

#if CURRENT_MAX
printf("The max of " BOOST_PP_STRINGIZE(CURRENT) " is %lld\n", (long long) CURRENT_MAX);
#else
printf("The max of " BOOST_PP_STRINGIZE(CURRENT) " is undefined\n");
#endif

#undef CURRENT
#undef CURRENT_MAX

#endif 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-19T13:24:41.773

我以前试过。问题是它`#`已经被保留用于对宏参数进行字符串化。它不像`#`定义中的那样被解析为预处理器标记。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-19T13:35:29.347

我唯一的解决方案是作弊 - 生成一个类型列表，其中包含 _XXX_MAX 作为一组定义，然后使用它。我不知道如何在预处理器中以自动化方式生成列表，所以我不尝试。假设列表不会太长，也不会维护得太密集。

```
#define PRINT_MAX(type) printf("%lld\n", _TYPE##_MAX);
#define HAVE_MAX(type) _TYPE##_MAX // not sure if this works 

/* a repetitious block of code that I cannot factor out - this is the cheat */
#ifdef HAVE_MAX(INT)
#define PRINT_INT_MAX PRINT_MAX(INT)
#endif

#ifdef HAVE_MAX(LONG)
#define PRINT_LONG_MAX PRINT_MAX(LONG)
#endif
/* end of cheat */

#define print_max(type) PRINT_##TYPE##_MAX 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-02T03:35:55.887

没有简单的方法可以做到这一点。最接近的方法是#define 大量 IFDEF 宏，例如：

```
#undef IFDEF_INT_MAX
#ifdef INT_MAX
#define IFDEF_INT_MAX(X)  X
#else
#define IFDEF_INT_MAX(X)
#endif

#undef IFDEF_BLAH_MAX
#ifdef BLAH_MAX
#define IFDEF_BLAH_MAX(X)  X
#else
#define IFDEF_BLAH_MAX(X)
#endif

     : 
```

因为你需要很多（它们可能在多个地方都有用），所以将所有这些都放在它们自己的头文件“ifdefs.h”中很有意义，你可以在需要它们时包含它。您甚至可以编写一个脚本，从“感兴趣的宏”列表中重新生成 ifdef.h

然后，您的代码变为

```
#include "ifdefs.h"
#define print_max(TYPE) \
IFDEF_##TYPE##_MAX( printf("%lld\n", TYPE##_MAX); )

print_max(INT);
print_max(BLAH); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T13:01:51.817

我认为这不是#ifdef 中不允许使用## 运算符的情况。我试过这个：

```
#define _print_max(TYPE) \
#ifdef TYPE \
printf("%lld\n", _TYPE); \
#endif

#define print_max(TYPE) _print_max(MAX##_TYPE)

void main() 
{
    print_max(INT)
} 
```

它仍然不起作用（它不喜欢#ifdef TYPE）。问题是#ifdef 将只接受#defined 符号，而不是#define 参数。这是两个不同的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-19T13:29:32.743

与模板不同，预处理器不是[图灵完备的](http://en.wikipedia.org/wiki/Turing_completeness)。宏内部`#ifdef`是不可能的。您唯一的解决方案是确保您只调用定义`print_max`了匹配的类型`_MAX`，例如`INT_MAX`. 当它们不是时，编译器肯定会告诉你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-18T04:18:23.553

只要您只对整数值感兴趣，并假设硬件使用 2 的补码和 8 位字节：

```
// Of course all this MAX/MIN stuff assumes 2's compilment, with 8-bit bytes...

#define LARGEST_INTEGRAL_TYPE long long

/* This will evaluate to TRUE for an unsigned type, and FALSE for a signed
 * type.  We use 'signed char' since it should be the smallest signed type
 * (which will sign-extend up to <type>'s size) vs. possibly overflowing if
 * going in the other direction (from a larger type to a smaller one).
 */
#define ISUNSIGNED(type) (((type) ((signed char) -1)) > (type) 0)

/* We must test for the "signed-ness" of <type> to determine how to calculate
 * the minimum/maximum value.
 *
 * e.g., If a typedef'ed type name is passed in that is actually an unsigned
 * type:
 *
 *  typedef unsigned int Oid;
 *  MAXIMUM_(Oid);
 */
#define MINIMUM_(type)  ((type) (ISUNSIGNED(type) ? MINIMUM_UNSIGNED_(type)   \
                              : MINIMUM_SIGNED_(  type)))

#define MAXIMUM_(type)  ((type) (ISUNSIGNED(type) ? MAXIMUM_UNSIGNED_(type)   \
                          : MAXIMUM_SIGNED_(  type)))

/* Minumum unsigned value; zero, by definition -- we really only have this
 * macro for symmetry.
 */
#define MINIMUM_UNSIGNED_(type)     ((type) 0)

// Maximum unsigned value; all 1's.
#define MAXIMUM_UNSIGNED_(type)         \
     ((~((unsigned LARGEST_INTEGRAL_TYPE) 0))   \
      >> ((sizeof(LARGEST_INTEGRAL_TYPE) - sizeof(type)) * 8))

/* Minimum signed value; a 1 in the most-significant bit.
 *
 * We use LARGEST_INTEGRAL_TYPE as our base type for the initial bit-shift
 * because we should never overflow (i.e., <type> should always be the same
 * size or smaller than LARGEST_INTEGRAL_TYPE).
 */
#define MINIMUM_SIGNED_(type)       \
  ((type)               \
   ((signed LARGEST_INTEGRAL_TYPE)  \
    (~((unsigned LARGEST_INTEGRAL_TYPE) 0x0) << ((sizeof(type) * 8) - 1))))

// Maximum signed value; 0 in most-significant bit; remaining bits all 1's.
#define MAXIMUM_SIGNED_(type)       (~MINIMUM_SIGNED_(type)) 
```

# c# - 如何为 shdocvw.dll 创建强命名互操作 dll

> ID：301713
> 
> 赞同：5
> 
> 时间：2008-11-19T12:13:10.527
> 
> 标签：c#, internet-explorer, interop, bho, strongname

我在 c# 中有一个 Browser Helper Object 项目，它（显然）引用了 shdocvw.dll。我想我想为 shdocvw.dll 创建一个强命名的互操作 dll。我该怎么做 - 我已经看到了一堆关于 aximp.exe 和 tlimp 的建议，但我不清楚它们是如何组合在一起的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-19T12:40:06.137

您应该能够将 tlbimp 与 /keyfile:FileName 或 /keycontainer:FileName 开关一起使用来执行此操作。或者我认为您曾经能够在 IDE 中执行此操作，只需添加一个 COM 引用（有一个复选框可以将相同的键应用于此类）。

```
sn -k new.snk
tlbimp shdocvw.dll /out:axshdocvw.dll /keyfile:new.snk 
```

显然，您可以使用现有的密钥...

您可能还想检查它`WebBrowser`是否已经完成了您需要的一切......

# php - 损坏的ajax结果

> ID：301714
> 
> 赞同：0
> 
> 时间：2008-11-19T12:13:28.187
> 
> 标签：php, html, ajax

我正在使用以下 html 页面：

```
<html>

<head>

<title>AJAX Example</title>

<meta http-equiv="Content-Type" content="text/html"; charset="iso-8859-1">

</head>

<script language="JavaScript" src="ajaxlib.js"></script>

<!--define the ajax javascript library-->

<body>

Click this <a href="#" OnClick="GetEmployee()">link</a> to show ajax

content (will be processed backgroundly without

refreshing whole page)<br/>

<!--a href=# OnClick=GetEmployee() is the javascript event on a

link to execute javascript function (GetEmployee) inside ajaxlib.js-->

<div id="Result">< the result will be fetched here ></div>

<!--javascript use GetElementById function to replace the data

backgroundly, we use <div> tag with  id Result here so javascript

can replace this value-->

</body>

</html> 
```

Javascript 在这里：[http ://www.nomorepasting.com/getpaste.php?pasteid=22046](http://www.nomorepasting.com/getpaste.php?pasteid=22046)

PHP 在这里：[http ://www.nomorepasting.com/getpaste.php?pasteid=22047](http://www.nomorepasting.com/getpaste.php?pasteid=22047)

问题是，一切似乎都合乎逻辑，没有错误，但似乎没有调用 javascript，直接调用 php 文件会得到如下结果：

好吧，显然这些字符甚至都不会粘贴进去....，但是很多小盒子都是这样的：

```
10
01 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T12:27:02.323

对于初学者，您的`getEmployee()`函数应该`return false;`防止`<a>`. 小盒子的东西似乎暗示字符集不匹配。确保 HTML 页面和 PHP 页面都使用相同的字符集。我建议尝试将所有内容都设为 UTF-8。

编辑：略有误读 - 我认为这是 PHP 输出的字符集与数据库中的字符集不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T12:26:21.233

我建议获取 Firefox + 篡改数据插件。您将能够查看您的浏览器是否正在下载 javascript，还可以查看 ajax 请求 + 数据以了解发生了什么。还要检查错误控制台是否有 javascript 错误。我会从那里开始。

# c# - DataContext 绑定和刷新

> ID：301716
> 
> 赞同：3
> 
> 时间：2008-11-19T12:14:05.753
> 
> 标签：c#, wpf, data-binding, refresh

我的情况是：

我有一个带有 3 个数据绑定文本框的 WPF 窗口

```
SettingsUI : Window

<Grid Name="SettingsUIGrid1">
    <TextBox Text="{Binding val1}" ....
    <TextBox Text="{Binding val2}" ....
    <TextBox Text="{Binding val3}" ....
</Grid> 
```

在构造函数中，我这样做：

```
SettingsUIGrid1.DataContext = coll[0]; // collection first value 
```

单击取消按钮时，我关闭窗口：

```
private void btnCancel_Click(object sender, RoutedEventArgs e) {
Close();
} 
```

当我单击“显示”按钮时，会在文本框中显示来自数据库的值，如果用户更改文本框值并重新加载窗口，则显示新值而不是旧值。有人可以建议如何重新加载值并清除内存中的对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-19T13:05:36.473

Binding 有两种工作方式：它获取值并将其设置为在文本框中可编辑，如果值更改，它会更新原始对象的值...

如果您只想显示数据，可以使用 Binding 中的 Mode=OneTime 选项

```
{Binding Path =val1, Mode=OneTime} 
```

这只会评估一次数据..

如果您确实需要修改数据，请确保克隆或使用另一个对象作为数据源属性。这样，如果不再需要数据源对象，您可以丢弃它...

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T13:30:16.520

好的，抱歉，只是为了澄清您从数据库加载集合并填充文本框的所有内容，然后用户可以修改这些值，具体取决于他们单击保存/确定或取消将分别保存或不保存更改。如果是这种情况，那么我会使用 arcturus 的解决方案。

我使用了我的解决方案，因为我们创建了自己的“类型化”数据集，这些数据集实现了 IEnumerable，使生活比必须继续填充集合更轻松。虽然我开始希望我们使用 LINQ。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T13:46:02.570

我是这样做的-> 再添加一个文本框，将它与对象的 ID 绑定（应该只有一个对象，因为我只有一个存储我所有设置的记录），并使用 ,Mode=OneTime 进行所有绑定。 ....所以如果用户保存它将更新现有的对象。取消现在可以工作............哇！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T14:01:16.957

如果您不想修改数据，可以将绑定设置为 OneWay：

```
<Grid Name="SettingsUIGrid1">
<TextBox Text="{Binding Path =val1, Mode=OneWay}" ....
<TextBox Text="{Binding Path =val2, Mode=OneWay}" ....
<TextBox Text="{Binding Path =val3, Mode=OneWay}" ....
</Grid> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-19T13:01:37.543

我建议将一些代码放入您的取消按钮单击事件中，以检查是否有任何数据已从最初加载的数据中更改，因为我假设如果他们不单击取消，则另一个按钮将被保存/确定，这意味着数据将提交到数据库。

什么是科尔？

如果它是一个 DataTable 那么你可以使用这个：

```
private static bool DataRowReallyChanged(DataRow row)
    {
        if (row == null)
        {
            return false;
        }

        if (!row.HasVersion(DataRowVersion.Current) || (row.RowState == DataRowState.Unchanged))
        {
            return false;
        }

        foreach (DataColumn c in row.Table.Columns)
        {
            if (row[c, DataRowVersion.Current].ToString() != row[c, DataRowVersion.Original].ToString())
            {
                return true;
            }
        }

        return false;
    } 
```

然后只需将调用添加到取消按钮事件中，例如：

```
if (DataRowReallyChanged((DataRow)SettingsUIGrid1.DataContext))
{
     ((DataRow)SettingsUIGrid1.DataContext).RejectChanges();
} 
```

我希望这有帮助。如果您不使用 DataTable，请告诉我您正在使用什么，看看我是否可以提供进一步帮助。

# jquery - 表单输入的样式祖先元素：焦点（jQuery）

> ID：301722
> 
> 赞同：1
> 
> 时间：2008-11-19T12:17:32.203
> 
> 标签：jquery, css, focus, background, selector

我有一个带有 DIV、3 个输入的表单，每个输入都位于一个标签元素内。我想在关注每个 INPUT 时更改 DIV 元素的背景图像。

我无法返回 DOM 来用 CSS 修复这个问题，所以有人可以建议几行 jQuery 吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T12:28:24.803

```
$('div input').focus(function(){
    $(this).parents('div:eq(0)').addClass('specialCSSclass');
}).blur(function(){
    $(this).parents('div:eq(0)').removeClass('specialCSSclass');
}); 
```

您需要在 CSS 中创建一个类，然后用它替换“specialCSSclass”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T12:27:49.343

```
$('input').focus(function(){
    $(this).parent().parent().addClass('highlight');
}).blur(function(){
     $(this).parent().parent().removeClass('highlight');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-01-14T19:14:29.070

jQuery最接近也是一种选择。

```
closest( selector )
    .closest( selector )
    .closest( selector, [ context ] )
closest( selectors, [ context ] )
    .closest( selectors, [ context ] ) 
```

根据描述.. 获取与选择器匹配的第一个祖先元素，从当前元素开始并向上遍历 DOM 树。

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

# javascript - 获取 TR 的索引

> ID：301725
> 
> 赞同：1
> 
> 时间：2008-11-19T12:19:10.080
> 
> 标签：javascript

我需要找出TR的位置。

实际上，我得到的 TD 的索引是 291，但是我需要得到包含 TD 的 TR 的索引。

我们可以`innerHTML`通过

```
document.getElementsByTagName("td")[291].parentNode.innerHTML.. 
```

如何获得`parentNode`我的意思是TR的索引。

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T12:32:05.670

```
var parent = document.getElementsByTagName("td")[291].parentNode;
var index = -1;
for (var i = 0; i < parent.childNodes.length; i++) {
  if (parent.childNodes.item(i) == tr) {
    index = i;
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T12:25:24.667

我想知道为什么你需要那个节点的索引？

你可以分配

var trNode = document.getElementsByTagName("td")[291].parentNode;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T12:35:02.027

这是另一个例子......

[http://www.maratz.com/blog/archives/2005/05/18/detect-table-row-index-with-javascript/](http://www.maratz.com/blog/archives/2005/05/18/detect-table-row-index-with-javascript/)

# error-handling - 404劫持

> ID：301750
> 
> 赞同：6
> 
> 时间：2008-11-19T12:28:33.133
> 
> 标签：error-handling, http-headers, http-status-code-404

某些[恶意软件（例如 AVG）](http://www.avg.com/special-toolbar-404-dns-error-tlbrc.tpl-mcr1)劫持 404 页面，以便在浏览器中显示一个充斥着自己广告的页面。我发现的唯一解决方法是放弃我的 webapp 中自定义错误页面的 404 http 状态代码。

还有其他解决方法吗？

编辑：

任何人都知道任何其他工具栏/程序也劫持 404 页面而不检查它们是否是通用错误页面？

有没有办法从查询字符串或其他方式检测 AVG 的存在？（我假设不是）

我已经为此[向 AVG 创建了请愿书](http://www.petitiononline.com/avg404/petition.html)。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-11-19T12:41:39.893

这不是你的错，当然也不是你的责任。保留 HTTP 状态码，它们很有用。如果您的某些用户决定安装处理 404 状态代码的浏览器插件，请不要尝试解决它。

[有一篇关于此主题的 Google 网站管理员中心博客文章](http://googlewebmastercentral.blogspot.com/2008/08/farewell-to-soft-404s.html)：

> [...] 让用户感到困惑，而且搜索引擎可能会花费大量时间来抓取和索引您网站上不存在的、通常是重复的 URL。这可能会对您网站的抓取覆盖率产生负面影响 - 由于 Googlebot 在不存在的网页上花费的时间，您的唯一网址可能不会很快被发现或访问频繁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T13:21:30.327

是的，防病毒软件劫持404页面的保护球拍。不过，这不是放弃状态码的理由。让用户受苦，直到他学会为止。

某些软件，例如 google 的 chrome，仅在 404 页面小于一定大小时才劫持它们，因此请确保创建一个有意义且有用的错误页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T12:33:35.510

当您将 AVG 描述为“恶意软件”时，您指的是防病毒软件吗？

我不认为恶意软件意味着你认为它意味着什么。

除了放弃 404 代码之外，我怀疑您可以做很多事情，因为客户可以自由地对您的 404 做任何它不想做的事情。

我有一个 Firefox 插件，它可以检查 Internet 档案中我遇到的任何 404 页面的存档版本。

如果它不是 404，那么不要告诉我它是 404，我不会把它当作 404 对待...

# java - 如何在控制台中返回到行首？

> ID：301759
> 
> 赞同：28
> 
> 时间：2008-11-19T12:32:34.170
> 
> 标签：java, console

如何返回到行首并覆盖控制台上已经输出的内容？以下似乎不起作用：

```
System.out.print(mystuff+'\r'); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2008-11-19T14:39:09.033

我怀疑你的光标正在移动到行的前面。你已经拥有的文本并没有消失，因为你没有用任何东西覆盖它。您可以输出空格以空白行，然后添加另一个 \r。

我刚刚在 Windows XP 和 AIX 上测试了以下内容，它按预期工作：

```
public class Foo {
  public static void main(String[] args) throws Exception {
   System.out.print("old line");
   Thread.sleep(3000);
   System.out.print("\rnew");
  }
} 
```

我打印出“旧行”，延迟 3 秒，然后“旧行”变为“新行”

我故意让第一行比第二行长，以证明如果你想擦除整行，你必须用空格覆盖结尾。

另请注意，“\b”转义序列将备份 1 个空格，而不是到行首。因此，如果您只想擦除最后 2 个字符，您可以编写：

```
System.out.println("foo\b\bun") 
```

并获得“乐趣”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-19T12:45:19.120

我的猜测（这是一个猜测）是 '\r' 确实有效，但您使用的控制台并没有像您预期的那样对待它。您使用的是哪个控制台？如果它类似于 IDE 中的控制台输出，您是否在真正的命令行上尝试过？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-19T12:41:04.887

如果你只想在控制台写一个新行，你应该使用 println() 方法：

```
System.out.println(mystuff); 
```

但是，这不会删除已经在线的内容。实际上，由于 System.out 是一个 PrintStream，它是 OutputStream 的一种类型，这基本上很难做到，尽管您可能会找到特定于终端的方法来做到这一点。

使用 curses 库的 Java 实现可能会更好，例如[JavaCurses](http://sourceforge.net/projects/javacurses/)。

# visual-studio - 在 Visual Studio 中自定义生成后事件

> ID：301765
> 
> 赞同：0
> 
> 时间：2008-11-19T12:34:01.827
> 
> 标签：visual-studio, macros, customization, post-build

有没有办法自定义构建后事件宏，我想将新程序集移动到由程序集版本命名的同一目录中的子文件夹，即

复制 $(TargetDir)$(TargetFileName) $(TargetDir)$( **ASSEMBLYVERSION** )\$(TargetFileName)

然而，没有这样的“宏观”。有点像这样构建可执行文件以获得版本

```
call foo.bat $(TargetName) 
```

我们让 foo.bat 通过调用打印您传入的程序集版本的托管应用程序来评估目标的版本，例如 GetVersion.exe

```
for /f %%t in ('GetVersion.exe %1') do (
        set _version=%%t
    )
echo %_version% 
```

有任何想法吗？？当然有一种方法可以直接自定义宏？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-06T15:40:39.117

不确定是否可以通过构建后脚本完成，但您可以修改项目文件以执行相同的操作。

右键单击项目并选择“卸载项目”。

然后再次右键单击它并选择“编辑项目”。

现在在项目文件中，找到“AfterBuild”目标。它通常位于文件的底部并被注释掉。

取消注释，或粘贴以下内容：

```
<Target Name="AfterBuild">
  <GetAssemblyIdentity AssemblyFiles="path\to\bin\$(Configuration)\$(OutputName).dll">
    <Output TaskParameter="Assemblies" ItemName="AssemblyVersion"/>
  </GetAssemblyIdentity>

  <Copy 
    SourceFiles="path\to\bin\$(Configuration)\$(OutputName).dll" 
    DestinationFiles="path\to\bin\$(Configuration)\%(AssemblyVersion.Version)\$(OutputName).dll" />
</Target> 
```

最后再次右键单击项目并选择“重新加载项目”。

您可能需要修改变量名称，并可能在复制到文件夹之前创建文件夹。希望这会有所帮助。

取自[WiX 的自动安装程序版本号的想法](http://www.tentaclesoftware.com/blog/archive/2009/05/03/38.aspx)

# php - PHP5 GET 变量的可变性和引用

> ID：301766
> 
> 赞同：0
> 
> 时间：2008-11-19T12:34:14.823
> 
> 标签：php, variables

我在页面中有以下内容，例如`/mypage?myvar=oldvalue`

```
$_SESSION['myvar'] = $_GET['myvar'];
$myvar = 'a_new_string' 
```

现在`$_SESSION['myvar']`有价值`'a_new_string'`

这是设计使然吗？

我怎样才能复制它的*值*而`'myvar'`不是引用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T12:44:17.000

这是一个功能而不是错误:-)

幸运的是你可以关闭它，在你的 php.ini 中设置[register_globals = off](http://www.php.net/register_globals)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T14:24:29.840

register_globals 是魔鬼的发明。幸运的是，在 PHP 6.0 中它将被完全禁用。这不仅仅是一个巨大的安全问题，它让人们感到困惑。请在您的 php.ini 中使用 register_globals = Off 将其关闭 更多信息：[http](http://us2.php.net/register_globals) : //us2.php.net/register_globals 您也可以使用命令 if (ini_get(register_globals)) echo "turn it off! :)';

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T12:45:39.603

我已经在 register_globals 打开和关闭的情况下对此进行了测试，但无法重现它。您使用的是什么版本的 PHP（我在 5.2.6 上）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T12:45:58.887

运行后：

```
<?php
session_start(); 
$_GET['myvar'] = ''; 
$_SESSION['myvar'] = $_GET['myvar']; 
$myvar = 'a_new_string'; 
var_dump($_SESSION); 
?> 
```

在 PHP 5.2.6 我得到这个：

```
array(1) { ["myvar"]=>  string(0) "" } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-03-21T05:48:33.700

$_Get['myvar'] 是一个数组项 $myvar 是一个变量。这两者之间没有关系

（$_GET 是一个超全局数组）

## 考虑下面的例子

$myarry=array('myvar'=>'myvalue');- 这里 myvar 是数组变量中的一项 $myarray $myvar='';- 这里 myvar 本身就是一个变量。

# jquery - jQuery 电子邮件验证要求

> ID：301769
> 
> 赞同：10
> 
> 时间：2008-11-19T12:37:45.190
> 
> 标签：jquery, email-validation, client-side-validation

我正在使用 jQuery.Validation 插件进行客户端验证，除此之外，我还验证了电子邮件地址。现在我还想在服务器端进行验证（对于没有 javascript 等的用户）。由于缺乏更好的想法，我开始使用正则表达式，但很快我意识到我想使用与 jQuery 方法相同的要求很重要。或者，如果我能找到某种方法来用我自己的方法覆盖 jQuery 验证要求，那也可以。

有谁知道jQuery方法有什么要求？是正则表达式验证吗？如果是，表达式是什么？有没有办法覆盖它，即使我不知道？

（我注意到可以进行远程验证，但如果可能的话，我想避免这种额外的网络流量......）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-11-19T12:46:23.190

jQuery 验证插件的源代码确实使用了一个怪物正则表达式。您应该能够以系统语言在服务器端应用相同的正则表达式。

这是来源：

```
// http://docs.jquery.com/Plugins/Validation/Methods/email
email: function(value, element) {
    // contributed by Scott Gonzalez: http://projects.scottsplayground.com/email_address_validation/
    return this.optional(element) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(element.value);
}, 
```

这只是正则表达式部分：

```
/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-
\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-
\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([
\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF
\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF
\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(
\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[
\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF
\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-
\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[
\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF
\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]
)))\.?$/ 
```

**编辑**：我之前没有注意到，但正则表达式中的一些字符被用作标记。我把它放在一个代码块中并添加了换行符。请注意，这些换行符是为了“可读性”，而不是实际正则表达式的一部分。

# spring.net - XmlApplicationContext(sFileName) 将读取的 xml 上下文定义文件的格式是什么？

> ID：301770
> 
> 赞同：0
> 
> 时间：2008-11-19T12:38:12.473
> 
> 标签：spring.net

我可以在线搜索的所有示例都使用指定上下文定义的 App.Config 模式检索到

```
contextToGetSprungObjects = ContextRegistry.GetContext(contextname) 
```

我想用

```
contextToGetSprungObjects = new XmlApplicationContext(sXmlFileName) 
```

（我正在从另一个可执行文件（MsWord）调用一个 DLL（需要 Spring.net），因此 app.config 方法不可用）。我试着偷偷溜进 MyDll.dll.config.. 没有飞。在使用 XmlApplicationContext 方法从指定的 xml 文件中读取它时，我收到以下错误

```
{"Error registering object with name '' defined in 'file [D:\\Work\\Seven\\WordAutomation\\ContentControls\\WordDocument1\\bin\\debug\\MyWPFPlotPopup.dll.config]' : There is no parser registered for namespace ''\r\n<configSections><sectionGroup name=\"spring\"><section name=\"context\" type=\"Spring.Context.Support.ContextHandler, Spring.Core\" /></sectionGroup><section name=\"log4net\" type=\"log4net.Config.Log4NetConfigurationSectionHandler, log4net\" /></configSections>"} 
```

这使我相信这两种方法需要将它们的 xml 放在不同形状的瓶子中。我搜索了高低，但所需的 xml 架构让我望而却步。我能找到的所有东西都使用 X.exe.config 或 Web.config。有人可以为我指出 Spring.net 的有效 xml 上下文定义吗？

```
<spring>
    <context>
        <context name="MyApplication">
            <resource uri="file://Resources/MyApplicationContext.xml"/>
        </context>
    </context>
</spring> 
```

我认为这是我希望 Spring.net 读取的 app.config 的相关部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-20T15:26:22.040

终于扫清了这个障碍。XmlApplicationContext 不会读取 app.config 中的中间映射 xml...它直接读取指向资源元素的内容。它不会读取 app.config 格式 - Spring.net 中的 ContextRegistry 类使用该格式。 *Spring.net 文档是一个很好的疼痛练习。*

```
context = new XmlApplicationContext("file://Resources/MyApplicationContext.xml"); 
```

此 xml 的格式如下。

```
<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net">
  <object id="Wilma" type="WhatIsSpring.Wilma, WhatIsSpring"/>
  <object id="Fred" type="WhatIsSpring.Fred, WhatIsSpring">
    <property name="TheDependency" ref="Wilma"/>
  </object>
</objects> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-04T11:04:26.870

> Spring.NET 文档是一个很好的痛苦练习

您是否查看了参考文档的介绍性部分“[基础 - 容器和对象”？](http://www.springframework.net/docs/1.2.0/reference/html/objects.html#objects-basics)恕我直言，第 5.2.1 章“配置元数据”和 5.2.2“实例化容器”非常清楚地展示了您想要实现的目标。你的痛点是什么？我们很乐意收到您的改进建议！

我还想建议您将 Spring for .NET 相关问题发布到我们的[社区论坛](http://forum.springframework.net/)——那里更有可能回答您的问题。

干杯，埃里希

# asp.net-mvc - ASP.NET MVC Storefront VB 端口？尤其是惰性列表

> ID：301772
> 
> 赞同：2
> 
> 时间：2008-11-19T12:39:02.440
> 
> 标签：asp.net-mvc, vb.net, model-view-controller

我正在使用 Rob Connery 出色的 MVC Storefront 作为我的新 MVC Web 应用程序的松散基础，但我无法将 LazyList 代码移植到 VB.NET（不要问）。

似乎 VB 不允许将 GetEnumerator 函数指定两次，但返回类型不同。有谁知道我该如何解决这个问题？

谢谢

```
Private Function GetEnumerator() As IEnumerator(Of T) Implements IEnumerable(Of T).GetEnumerator
  Return Inner.GetEnumerator()
End Function

Public Function GetEnumerator() As IEnumerator Implements IList(Of T).GetEnumerator
  Return DirectCast(Inner, IEnumerable).GetEnumerator()
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-27T03:40:56.563

VB.NET 允许您为函数指定一个与您正在实现的函数不同的名称。

```
Public Function GetEnumerator() As IEnumerator(Of T) _
  Implements IEnumerable(Of T).GetEnumerator

  Return Inner.GetEnumerator()
End Function

Public Function GetListEnumerator() As IEnumerator _
  Implements IList(Of T).GetEnumerator

  Return DirectCast(Inner, IEnumerable).GetEnumerator()
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T17:08:19.637

抱歉，我不知道如何使用 VB 解决这个问题，但 .NET 的优点之一是在运行时您可以使用使用不同语言构建的程序集。因此，您可以创建一个包含 LazyList 类的非常简单的 C# 程序集，并仅引用该程序集。这就是 .NET 支持的跨语言重用的全部意义——它使您免于重新发明轮子！

# email - 使用 unix utils 连接许多电子邮件文件

> ID：301776
> 
> 赞同：1
> 
> 时间：2008-11-19T12:40:13.513
> 
> 标签：email, sed, awk, unix, eml

我想知道是否有任何简单的方法可以打印多封电子邮件（大约 200 封），以便它们继续打印，而不是每页打印一封。我已经尝试过雷鸟和进化，这似乎是不可能的。连接单个邮件文件是否可行，或者是否有其他 unix 实用程序可以做到这一点？sed 或 awk 适合这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T12:50:38.470

为什么不将邮件中的所有数据放在一个文本文件中并打印出来。

这可以通过以下方式完成：

```
cat *.eml > file.txt 
```

或者直接打印

```
cat *.eml | lpr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-25T15:30:02.483

[Perl 使用Email::Abstract](http://search.cpan.org/~rjbs/Email-Abstract-2.134/lib/Email/Abstract.pm)模块使它变得非常容易。给下面的脚本（maildump）一个要转储的电子邮件列表，然后将其全部通过管道传输到 lpr...

邮件转储 m1 m2 m3 m4 | lpr

```
#!/usr/bin/perl

use Email::Abstract;

while ($mfile = shift @ARGV)
{
    open(DATA, "<$mfile") || die "unable to open $mfile";

    my $message = do { local $/; <DATA>; };

    my $email = Email::Abstract->new($message);

    my $subject = $email->get_header("Subject");
    my $from = $email->get_header("From");
    my $date = $email->get_header("Date");
    my $body = $email->get_body;

    print "SUBJECT: $subject\nFROM: $from\nDATE: $date\n\n$body\n\n";
    print "-" x 65, "\n" if $#ARGV > 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T12:51:09.903

我可以肯定地说 *n*x，但如果可以定义一个只输出文本的打印机，并将输出到一个文本文件，那么你可以将你的批次打印到该打印机并从中删除换页生成的文本文件。

我在 Windows 中使用了类似的技术：使用 Generic / Text-Only 驱动程序创建新打印机，并指定输出到文本文件。然后打印任何内容，将输出文件的位置提供给打印对话框，然后在打印完成后清理结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-22T12:56:49.487

如果您想过滤电子邮件，那么我建议您找到数据的存储位置并在该级别编写解决方案。

在我的 Windows 机器上，Thunderbird 将我的收件箱存储在一个相当大的文件中

> C:\Documents and Settings\Bruce Axtens\Application Data\Thunderbird\Profiles\x5j9chtd.default\Mail\Local Folders\Inbox

我不知道 *n*x 将您的存储在哪里：可能在您根目录的隐藏文件夹中。例如

> /home/josh/.thunderbird

解析原始电子邮件数据不适合胆小的人（尽管[Wikipedia](http://en.wikipedia.org/wiki/Email)上有一篇关于电子邮件的好文章，可以让您朝着正确的方向开始。）

对于我们其他人（包括我），有很多脚本资源可以为您完成 hack 工作，同时您可以制定解决方案。如果发现[这](http://www.perl.com/lpt/a/846)是开始 Perl 的好地方。其他人可能能够建议其他语言的库。

# sql-server - SQL Server 2008 校准

> ID：301777
> 
> 赞同：2
> 
> 时间：2008-11-19T12:40:22.097
> 
> 标签：sql-server, licensing

我需要购买 SQL Server 2008 标准版，因为它的功能符合我的需要。在功能页面上，它说它可以处理 32,767 个用户连接，但它如何与 CAL 连接？

什么是 CAL，它们如何影响项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T13:15:07.750

此外，不允许使用“多路复用”，这意味着您不能购买单个 CAL 并让应用程序服务器代表其自己的连接中继数据库请求。

对于大多数项目，当然根据我的经验，购买单个 CAL 并不能维持其初始成本效益，因为系统可扩展。如果可能的话，对处理器许可证进行投资。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T13:09:35.687

CAL 是客户端访问许可证。

SQL Server 2008 有 3 种许可模式（[在此处](http://www.microsoft.com/Sqlserver/2005/en/us/licensing.aspx)解释）：

*   处理器许可模型
*   Server Plus 设备 CAL 许可模式
*   Server Plus 用户 CAL 许可模式

您尝试选择满足您要求的最便宜的型号。

从这个[页面](http://www.microsoft.com/Sqlserver/2005/en/us/pricing-licensing-faq.aspx)：

问：设备客户端访问许可证 (CAL) 和用户 CAL 有什么区别？

A. 设备 CAL 允许任意数量的用户从特定设备访问许可的服务器软件。用户 CAL 允许特定用户从任意数量的设备访问许可的服务器软件。换言之，用户 CAL 涵盖特定用户从工作计算机和膝上型计算机以及家用计算机、手持计算机、互联网信息亭和其他设备对服务器软件的访问。设备 CAL 涵盖多个用户从单个共享设备访问服务器软件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-11-08T03:57:45.577

只是要补充一点，微软不会对 CAL 许可证进行任何强制执行。这纯粹是纸张限制。

但是，在“每服务器”许可中，有一个许可窗口服务允许强制使用，但可以停止此服务

我想知道他们为什么不强制执行这个......

# mysql - MySQL - 在 WHERE 子句中使用 COUNT(*)

> ID：301793
> 
> 赞同：181
> 
> 时间：2008-11-19T12:47:36.213
> 
> 标签：mysql, count, aggregation, having

我正在尝试在 MySQL 中完成以下操作（请参阅`pseudo`代码）

```
SELECT DISTINCT gid
FROM `gd`
WHERE COUNT(*) > 10
ORDER BY lastupdated DESC 
```

有没有办法在 WHERE 子句中不使用 (SELECT...) 来做到这一点，因为这似乎是一种资源浪费。

* * *

## 回答 #1

> 赞同：307
> 
> 时间：2008-11-19T12:52:53.303

尝试这个;

```
select gid
from `gd`
group by gid 
having count(*) > 10
order by lastupdated desc 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-11-19T12:52:55.470

我不确定你想要做什么......也许像

```
SELECT gid, COUNT(*) AS num FROM gd GROUP BY gid HAVING num > 10 ORDER BY lastupdated DESC 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2008-11-19T12:52:12.197

```
SELECT COUNT(*)
FROM `gd`
GROUP BY gid
HAVING COUNT(gid) > 10
ORDER BY lastupdated DESC; 
```

编辑（如果你只想要gids）：

```
SELECT MIN(gid)
FROM `gd`
GROUP BY gid
HAVING COUNT(gid) > 10
ORDER BY lastupdated DESC 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-09-10T12:25:29.150

只是没有条款的学术版本：

```
select *
from (
   select gid, count(*) as tmpcount from gd group by gid
) as tmp
where tmpcount > 10; 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2008-11-19T12:52:59.963

尝试

```
SELECT DISTINCT gid
FROM `gd`
group by gid
having count(*) > 10
ORDER BY max(lastupdated) DESC 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-01-20T09:11:21.507

WHERE 子句中不能有聚合函数（例如 COUNT、MAX 等）。因此，我们改用 HAVING 子句。因此，整个查询将与此类似：

```
SELECT column_name, aggregate_function(column_name)
FROM table_name
WHERE column_name operator value
GROUP BY column_name
HAVING aggregate_function(column_name) operator value; 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-09-05T13:45:20.733

> COUNT(*) 只能与 HAVING 一起使用，并且必须在 GROUP BY 语句之后使用 请看以下示例：

```
SELECT COUNT(*), M_Director.PID FROM Movie
INNER JOIN M_Director ON Movie.MID = M_Director.MID 
GROUP BY M_Director.PID
HAVING COUNT(*) > 10
ORDER BY COUNT(*) ASC 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2011-11-16T13:22:00.343

-- 搜索缺少半小时记录的气象站

```
SELECT stationid
FROM weather_data 
WHERE  `Timestamp` LIKE '2011-11-15 %'  AND 
stationid IN (SELECT `ID` FROM `weather_stations`)
GROUP BY stationid 
HAVING COUNT(*) != 48; 
```

-- yapiskan 的变体，带有 where .. in .. select

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-05T06:32:27.480

我认为你不能添加`count()`with `where`。现在看看为什么....

`where`不一样`having`，`having`意味着你正在工作或处理小组和计数相同的工作，它也在处理整个小组，

现在如何计算它作为一个整体工作

创建一个表并输入一些ID，然后使用：

```
select count(*) from table_name 
```

您会发现总值意味着它表示某个组！`where`添加`count()`;也是如此

# c# - C# 中缺少用于类型安全数据绑定的“nameof”运算符的解决方法？

> ID：301809
> 
> 赞同：45
> 
> 时间：2008-11-19T12:54:00.150
> 
> 标签：c#, .net, data-binding, .net-3.5, .net-2.0

`nameof`在 C#中包含运算符的想法很多。作为此运算符如何工作的示例，`nameof(Customer.Name)`将返回 string `"Name"`。

我有一个域对象。我必须绑定它。然后我需要属性名称作为字符串。我希望它们是类型安全的。

我记得在 .NET 3.5 中遇到过一种解决方法，它提供了 lambda 表达式的功能`nameof`并涉及到 lambda 表达式。但是，我无法找到此解决方法。任何人都可以向我提供这种解决方法吗？

如果可能的话，我也对`nameof`在 .NET 2.0 中实现功能的方法感兴趣。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2008-11-19T14:03:17.107

这段代码基本上是这样做的：

```
class Program
{
    static void Main()
    {
        var propName = Nameof<SampleClass>.Property(e => e.Name);

        Console.WriteLine(propName);
    }
}

public class Nameof<T>
{
    public static string Property<TProp>(Expression<Func<T, TProp>> expression)
    {
        var body = expression.Body as MemberExpression;
        if(body == null)
            throw new ArgumentException("'expression' should be a member expression");
        return body.Member.Name;
    }
} 
```

（当然是3.5码……）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-19T14:53:26.397

虽然 reshefm 和 Jon Skeet 展示了使用表达式执行此操作的正确方法，但值得注意的是，对于方法名称有一种更便宜的方法：

在您的方法周围包装一个委托，获取 MethodInfo，然后您就可以开始了。这是一个例子：

```
private void FuncPoo()
{
}

...

// Get the name of the function
string funcName = new Action(FuncPoo).Method.Name; 
```

不幸的是，这只适用于方法；它不适用于属性，因为您不能拥有属性 getter 或 setter 方法的委托。（似乎是一个愚蠢的限制，IMO。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-19T12:57:24.137

解决方法是使用表达式树，然后将该表达式树拆开以找到相关的`MemberInfo`. [在这个](http://csharpindepth.com/ViewNote.aspx?NoteID=69)注释中有更多的细节和评论（虽然不是提取成员的代码——我相信这是另一个 SO 问题的地方）。

不幸的是，由于 .NET 2.0 中不存在表达式树，因此实际上没有等价物。

避免拼写错误的一种解决方案是使用一组访问器来获取`PropertyInfo`特定属性的相关信息，并对它们进行单元测试。那将是唯一有字符串的地方。这将避免重复并使重构更容易，但它有点苛刻。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-01-11T12:00:44.433

reshefm 所做的扩展，简化了 nameof() 运算符的使用，并给出了方法和类成员以及方法的名称：

```
/// <summary>
/// Provides the <see cref="nameof"/> extension method that works as a workarounds for a nameof() operator, 
/// which should be added to C# sometime in the future.
/// </summary>
public static class NameOfHelper
{
    /// <summary>
    /// Returns a string represantaion of a property name (or a method name), which is given using a lambda expression.
    /// </summary>
    /// <typeparam name="T">The type of the <paramref name="obj"/> parameter.</typeparam>
    /// <typeparam name="TProp">The type of the property (or the method's return type), which is used in the <paramref name="expression"/> parameter.</typeparam>
    /// <param name="obj">An object, that has the property (or method), which its name is returned.</param>
    /// <param name="expression">A Lambda expression of this pattern: x => x.Property <BR/>
    /// Where the x is the <paramref name="obj"/> and the Property is the property symbol of x.<BR/>
    /// (For a method, use: x => x.Method()</param>
    /// <returns>A string that has the name of the given property (or method).</returns>
    public static string nameof<T, TProp>(this T obj, Expression<Func<T, TProp>> expression)
    {
        MemberExpression memberExp = expression.Body as MemberExpression;
        if (memberExp != null)
            return memberExp.Member.Name;

        MethodCallExpression methodExp = expression.Body as MethodCallExpression;
        if (methodExp != null)
            return methodExp.Method.Name;

        throw new ArgumentException("'expression' should be a member expression or a method call expression.", "expression");
    }

    /// <summary>
    /// Returns a string represantaion of a property name (or a method name), which is given using a lambda expression.
    /// </summary>
    /// <typeparam name="TProp">The type of the property (or the method's return type), which is used in the <paramref name="expression"/> parameter.</typeparam>
    /// <param name="expression">A Lambda expression of this pattern: () => x.Property <BR/>
    /// Where Property is the property symbol of x.<BR/>
    /// (For a method, use: () => x.Method()</param>
    /// <returns>A string that has the name of the given property (or method).</returns>
    public static string nameof<TProp>(Expression<Func<TProp>> expression)
    {
        MemberExpression memberExp = expression.Body as MemberExpression;
        if (memberExp != null)
            return memberExp.Member.Name;

        MethodCallExpression methodExp = expression.Body as MethodCallExpression;
        if (methodExp != null)
            return methodExp.Method.Name;

        throw new ArgumentException("'expression' should be a member expression or a method call expression.", "expression");
    }
} 
```

要使用它：

```
static class Program
{
    static void Main()
    {
        string strObj = null;
        Console.WriteLine(strObj.nameof(x => x.Length)); //gets the name of an object's property.
        Console.WriteLine(strObj.nameof(x => x.GetType())); //gets the name of an object's method.
        Console.WriteLine(NameOfHelper.nameof(() => string.Empty)); //gets the name of a class' property.
        Console.WriteLine(NameOfHelper.nameof(() => string.Copy(""))); //gets the name of a class' method.
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-09-28T13:56:13.333

除非有人改变主意，否则`nameof`操作符看起来就像是在 C# 6 中出现。以下是关于它的设计会议记录：

[https://roslyn.codeplex.com/discussions/552376](https://roslyn.codeplex.com/discussions/552376)

[https://roslyn.codeplex.com/discussions/552377](https://roslyn.codeplex.com/discussions/552377)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-18T21:47:29.060

这是 C# 6.0 中语言的一部分

[https://msdn.microsoft.com/en-us/magazine/dn802602.aspx](https://msdn.microsoft.com/en-us/magazine/dn802602.aspx)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-19T08:29:02.510

公认的解决方案很好，简单而优雅。

但是，构建表达式树很昂贵，我需要整个属性路径。

所以我稍微改了一下。它一点也不优雅，但它很简单，并且在大多数情况下都能很好地工作：

```
public static string Property<TProp>(Expression<Func<T, TProp>> expression)
{
    var s = expression.Body.ToString();
    var p = s.Remove(0, s.IndexOf('.') + 1);
    return p;
} 
```

例子：

```
? Nameof<DataGridViewCell>.Property(c => c.Style.BackColor.A);
"Style.BackColor.A" 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-18T03:58:34.097

reshefm 的答案非常好，但这是一个更简单的 API IMO：

使用示例： `NameOf.Property(() => new Order().Status)`

```
using System;
using System.Diagnostics.Contracts;
using System.Linq.Expressions;

namespace AgileDesign.Utilities
{
public static class NameOf
{
    ///<summary>
    ///  Returns name of any method expression with any number of parameters either void or with a return value
    ///</summary>
    ///<param name = "expression">
    ///  Any method expression with any number of parameters either void or with a return value
    ///</param>
    ///<returns>
    ///  Name of any method with any number of parameters either void or with a return value
    ///</returns>
    [Pure]
    public static string Method(Expression<Action> expression)
    {
        Contract.Requires<ArgumentNullException>(expression != null);

        return ( (MethodCallExpression)expression.Body ).Method.Name;
    }

    ///<summary>
    ///  Returns name of property, field or parameter expression (of anything but method)
    ///</summary>
    ///<param name = "expression">
    ///  Property, field or parameter expression
    ///</param>
    ///<returns>
    ///  Name of property, field, parameter
    ///</returns>
    [Pure]
    public static string Member(Expression<Func<object>> expression)
    {
        Contract.Requires<ArgumentNullException>(expression != null);

        if(expression.Body is UnaryExpression)
        {
            return ((MemberExpression)((UnaryExpression)expression.Body).Operand).Member.Name;
        }
        return ((MemberExpression)expression.Body).Member.Name;
    }
  }
} 
```

完整代码在这里： [http ://agiledesignutilities.codeplex.com/SourceControl/changeset/view/b76cefa4234a#GeneralPurpose/NameOf.cs](http://agiledesignutilities.codeplex.com/SourceControl/changeset/view/b76cefa4234a#GeneralPurpose/NameOf.cs)

# sql - 如何在 Oracle SQL 中选择相关的一组项目

> ID：301817
> 
> 赞同：2
> 
> 时间：2008-11-19T13:00:14.520
> 
> 标签：sql, oracle

我有一些表格数据

```
Key    ID      Link       
1      MASTER  123
2      AA      123
3      AA      123
4      BB      123
5      MASTER  456
6      CC      456 
```

我希望能够在同一选择中选择与选择条件匹配的所有链接项目，以及链接的主项目。例如，如果我的 ID 为 'AA'，我希望返回 ID = 'AA' 的行，以及 ID = 'MASTER' 的行和 123 的链接：

```
1      MASTER  123
2      AA      123
3      AA      123 
```

我使用的是 Oracle 10.2g，所以如果有任何特殊的 Oracle 语法可以使这更容易，那就没问题了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-19T13:16:38.467

这是一种方法。

```
SELECT DISTINCT key, id, link
  FROM the_table
  START WITH id = 'AA'
  CONNECT BY id = 'MASTER' and link = PRIOR link and 'AA' = PRIOR ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-19T13:08:15.893

SELECT * FROM table_name WHERE ID=your_id UNION ALL SELECT * FROM table_name WHERE ID='MASTER' AND link = (SELECT link FROM table_name WHERE ID=your_id)

那应该回答我理解的问题；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T13:10:45.357

如果我理解正确，这是一个我认为可以满足您要求的示例：

```
select * from my_table where link in
(select link
from my_table
where id = 'AA')
and id in ('AA','MASTER') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T13:30:33.693

我的理解是，所有与 id = AA 具有相同“链接”的记录首先需要链接字段：

```
select i.link from table i
where i.id = YOUR_ID 
```

现在您“选择”具有该链接的记录

```
select * from table 
where link in (select i.link from table i where i.id = YOUR_ID) 
```

此选择应该为您提供所需的记录...

# web-applications - 您如何确定某些内容应该位于您的 Web 路径下方还是位于您的 Web 路径内？

> ID：301826
> 
> 赞同：2
> 
> 时间：2008-11-19T13:05:47.333
> 
> 标签：web-applications

我想知道是否有某种标准可用于确定脚本或文件的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-19T13:08:37.547

如果您不介意任何人都可以看到内容，那么请将其放在 Web 路径中。否则就放在外面。

内部：任何公开可用的东西——图像、javascript、css、静态内容。您将减轻服务器的压力，并自动利用它所拥有的任何缓存和压缩服务。

外部：任何私人的东西。如果服务器故障导致脚本文件被当作文本而不是被解析，那么带有密码和其他敏感细节的脚本文件可能容易受到攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T13:31:02.353

通常最好把它放在外面，但当然这一切都取决于个人喜好。我不认为有任何与此相关的固定规则

# c# - UnitTest 你如何组织你的测试文件？

> ID：301839
> 
> 赞同：12
> 
> 时间：2008-11-19T13:09:23.627
> 
> 标签：c#, java, c, unit-testing

目前，我正在按包（项目）拆分我的所有测试。因此，如果我有 12 个项目，我将再创建 1 个用于单元测试的项目，其中包含 12 个类来测试我的所有包。

您是否以相同的方式进行操作，或者您是否有 1 个逐个测试课程？你如何组织所有的测试？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-19T13:29:14.273

在 Java/Maven 设置中：

```
project/src/main/java/Package/Class.java
project/src/test/java/Package/ClassTest.java
project/src/main/resources/Package/resource.properties
project/src/test/resources/Package/test_resource.properties 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-19T13:47:58.230

像 Pokus 一样，我的测试与要测试的类在同一个程序集中，因此我可以测试内部和私有。

在 C# 中，您有 Debug 和 Release 版本，我添加了另一个名为 UnitTest 的编译器指令 UNITTEST。然后我可以在测试类的顶部添加指令（#if UNITTEST），这样当我编译 Debug 或 Release 时，测试不会被编译，但是当我编译 UnitTest 时它们会被编译。

我添加了一个名为 Tests 的文件夹，其中包含我的测试类。Class1.cs 有一个测试类 Tests\Class1UnitTest.cs。

也许更好的方法，但这对我有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-19T13:23:06.407

因为我倾向于做 TDD，所以我为每个类都有一个测试类，并将这些测试类分组为一个直接的类，以便将测试项目与实际项目进行匹配。根据解决方案的大小，测试项目要么存在于同一个解决方案中（如果小），要么分成单独的解决方案（如果更大）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-19T13:21:09.923

我们把它组织成这样（C++）：

```
package/Class.cpp
package/Class.hpp
package/test/ClassUnitTest.cpp
package/test/ClassIntegrationTest.cpp
test/unit-test/main.cpp
test/integration-test/main.cpp
test/data
test/tmp 
```

其中*unit-test*和*integration-test*只是测试运行器，*test/data*保存集成测试使用的数据文件，*test/tmp*保存由相同测试创建的临时文件，并为每个测试套件清除。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-19T13:28:14.870

我将单元测试保存在他们测试的项目中的一个包中。这样，所有测试都可以通过应用程序代码从版本控制中检查出来。单元测试目录基本上是源目录的镜像，所以两者的包结构是相同的。

举个例子（不是我真实的包名）：

```
src.com.app
src.com.app.model
src.com.app.view
src.com.app.controller

tests.com.app
tests.com.app.model
tests.com.app.view
tests.com.app.controller 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-19T13:35:37.960

我的项目中有我的测试类。这样我可以测试内部的东西。我在类名中添加了“Test”后缀。示例：MyClass.cs 将是 MyClassTest.cs

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-19T14:32:21.823

我喜欢让我的 src 和测试存在于同一个包中。所以我组织我的如下：

```
src/com/company/package/Class.java
testsrc/com/company/package/ClassTest.java 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-11-19T17:39:12.273

我将它们保存在整个产品的单独包装中。我不喜欢将生产代码与单元测试代码混淆。

```
公司/产品/包装1
公司/产品/包装N
公司/产品/UnitTest/Package1/Class/Method1Fixture.cs
公司/产品/UnitTest/Package1/Class/MethodNFixture.cs
公司/产品/UnitTest/PackageN/Class/Method1Fixture.cs
公司/产品/UnitTest/PackageN/Class/MethodNFixture.cs

```

我所有的方法都被声明为公共虚拟的，我也经常使用模拟。当然，这主要是因为我正在单元测试的包通常是业务逻辑和数据层，因此它们很少有任何真正的内部方法。但我确实有一些具有“内部”方法的项目。对于那些，如果它们是公司内部代码，那么对所有方法使用 public 不是问题。我相信如果您不想公开所有方法，您可以使用强命名程序集并设置它们，以便单元测试程序集可以访问内部方法。最后，我有一个单元测试程序集，它将包含整个项目的所有测试装置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-19T14:07:38.223

我们进行一对一的测试程序集 (C#)。对于解决方案中的每个程序集，我们都有一个相应的测试项目。每个项目对相应项目中的每个类都有一个测试。

例如：

Company.Product.Feature
  类名Alpha
  类名Beta 类名
  Delta

Company.Product.Feature.UnitTests
  类名AlphaTests
  类名BetaTests 类名
  DeltaTests

我把 xando 做的更进一步。我没有使用默认的调试/发布配置，而是为我们在 Team Foundation Server 中用于构建配置的每个分支进行了配置。所以，我有开发、集成和生产。无需考虑令人麻木的无聊细节，单元测试是为开发和集成配置构建的。它们包含在生产分支中，但不与构建一起编译。包含它们的原因是当我们必须从生产（例如修补程序）分支时，可以运行、修改单元测试并与修改后的代码进行反向集成。

我们目前只有一小部分团队正在使用它，因为我们正在从遗留产品和版本控制系统迁移，但到目前为止它运行良好。到目前为止，它的单元测试方面工作得特别好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-27T08:03:48.827

我喜欢让它们**靠近**它们支持的代码，通常在一个单独的子目录中。这样我就可以让它们与代码一起编译，这使得它们可见 - 这对于只有少数组件具有单元测试的遗留项目很重要。

```
 .../component/src/
              /include/
              /doc/
              /bin/
              /test/ 
```

我们通常每个二进制文件都有一个套件，但这也有例外。我们可以通过一个简单的命令运行任何目录下的所有测试。

经验法则是让单元测试易于查找、易于编译和易于运行，这样它们就不会妨碍您。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-27T21:10:22.390

我的测试按测试类别组织。如果我所有的单元测试文件都在 1 个目录中。所有集成在 1 个目录中。我在另一个中进行了所有持久性测试。所有文件夹都有许多文件用于测试每个相似的东西。

# c# - 使用 UI 控件的单元测试方法

> ID：301844
> 
> 赞同：6
> 
> 时间：2008-11-19T13:11:28.973
> 
> 标签：c#, unit-testing, mocking

我目前正在编写一些对表单控件执行一些基本操作的方法，例如 Textbox、Groupbox，这些操作是通用的，可以在任何应用程序中使用。

我开始编写一些单元测试，只是想知道我应该使用 System.Windows.Forms 中的真实表单控件，还是应该只是模拟我正在尝试测试的部分。例如：

假设我有这个方法，它需要一个控件，如果它是一个文本框，它将像这样清除文本属性：

```
 public static void clearall(this Control control)
        {
            if (control.GetType() == typeof(TextBox))
            {
                ((TextBox)control).Clear();
            }
        } 
```

然后我想测试这个方法，所以我做了这样的事情：

```
 [TestMethod]
        public void TestClear() 
        {
            List<Control> listofcontrols = new List<Control>();
            TextBox textbox1 = new TextBox() {Text = "Hello World" };
            TextBox textbox2 = new TextBox() { Text = "Hello World" };
            TextBox textbox3 = new TextBox() { Text = "Hello World" };
            TextBox textbox4 = new TextBox() { Text = "Hello World" };

            listofcontrols.Add(textbox1);
            listofcontrols.Add(textbox2);
            listofcontrols.Add(textbox3);
            listofcontrols.Add(textbox4);

            foreach (Control control in listofcontrols)
            {
                control.clearall();
                Assert.AreEqual("", control.Text);
            }
        } 
```

我应该在单元测试中添加对 System.Window.Forms 的引用并使用真正的 Textbox 对象吗？还是我做错了？

注意：上面的代码只是一个例子，我没有编译或运行它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-19T13:27:46.617

如果您尝试通过模拟与 UI 控件的交互来对应用程序逻辑进行单元测试，您应该使用[MVC 模式](http://en.wikipedia.org/wiki/Model-view-controller)进行一些抽象。然后你可以有一个存根视图并从你的单元测试中调用控制器方法。

如果它是您尝试进行单元测试的实际控件，那么您有我。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-19T16:43:25.177

有几种模式可用于将 UI 表示与 UI 逻辑分离，包括 Model-View-Controller 和 Model-View-Presenter 的各种化身（AKA Humble Dialog）。Humble Dialog 是专门为简化单元测试而设计的。你绝对应该在你的设计库中拥有这些 UI 模式之一。

但是我发现对于简单的表单，当框架支持它时，直接针对真实的 UI 控件进行测试是非常简单的。我已经在 J​​ava Swing 和 Windows.Forms 中构建了非常健壮的 UI，完全以测试为先。我无法在 SWT 或 ASP.NET 中管理它并恢复为 MVP。

为了测试这样的事情......

```
[Test] public void ShouldCopyFromAvailableToSelectedWhenAddButtonIsCLicked(){
  myForm.AvailableList.Items.Add("red");
  myForm.AvailableList.Items.Add("yellow");
  myForm.AvailableList.Items.Add("blue");

  myForm.AvailableList.SelectedIndex = 1;
  myForm.AddButton.Click();

  Assert.That(myForm.AvaiableList.Items.Count, Is.EqualTo(2));
  Assert.That(myForm.SelectedList.Items[0], Is.EqualTo("yellow"));
} 
```

...直接针对 UI 控件工作可以正常工作。但是如果你想开始测试鼠标移动、击键或拖放，你最好选择像 Brian 建议的那样更健壮的 UI 模式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-19T13:28:14.790

如果您的代码依赖于 System.Windows.Forms.Control，您的建议甚至不会编译。您的 Control 和 Textbox 版本只是错误的类型。

相反，如果您将 UI 和 Logic 与接口分开，那么您可以这样做……像这样：

```
public interface ITextBox
{
    public string Text {get; set;}
}

public class TextBoxAdapter : ITextBox
{
    private readonly System.Windows.Forms.TextBox _textBox;
    public TextBoxAdapter(System.Windows.Forms.TextBox textBox)
    {
        _textBox = textBox;
    }

    public string Text
    {
        get { return _textBox.Text; }
        set { _textBox.Text = value; }
    }
}

public class YourClass
{
    private ITextBox _textBox;
    public YourClass(ITextBox textBox)
    {
        _textBox = textBox;
    }

    public void DoSomething()
    {
        _textBox.Text = "twiddleMe";
    }
} 
```

然后，在您的测试中，您需要做的就是创建一个模拟、伪造或存根 ITextBox 并将其传入。

当我做这样的事情时，我创建了一个稍微更高级别的界面......我创建了一个看起来很像整个 UI 的界面，并让 UI 实现了该界面。然后，我可以随意摆弄我所需要的 UI，而无需真正知道它是一个 Forms 控件。

顺便说一句，如果您想采用创建实际控件的方法，请考虑这篇关于它的博客文章：http: [//www.houseofbilz.com/archive/2008/10/12/winforms-automation-extensions.aspx](http://www.houseofbilz.com/archive/2008/10/12/winforms-automation-extensions.aspx)

# c# - 实例化后在 SelectList 中设置选定值

> ID：301854
> 
> 赞同：31
> 
> 时间：2008-11-19T13:16:23.927
> 
> 标签：c#, .net, asp.net-mvc, selectlist

我是否认为创建后无法在 C# 类 SelectList 中设置选定值？是不是有点傻？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2010-02-12T16:48:26.990

我认为您正在与框架作斗争。进入您的视图的数据应在最后一分钟 (LPM) 创建。

以这种方式思考，a`SelectList`是一种用于提供`DropDownList`HTML 帮助器的类型。在您决定如何处理数据时，它不是存储数据的地方。

更好的解决方案是将数据检索到 a 中`List<T>`，然后`SelectList`在需要时初始化 (s)。这种做法的一个直接好处是它允许您重复使用`List<T>`多个`DropDownList`，例如：

```
Country of birth
Country of residence 
```

这些`SelectLists`都使用国家列表类型`List<Country>`。

您可以`List<T>`像在此示例中一样在“最后一分钟”使用您的：

```
public class TaxCheatsFormViewModel
{
    private List<Country> countries { get; set; }

    public TaxCheat Cheat { get; private set; }
    public SelectList CountryOfBirth { get; private set; }
    public SelectList CountryOfResidence { get; private set; }
    public SelectList CountryOfDomicile { get; private set; }

    public TaxCheatsFormViewModel(TaxCheat baddie)
    {
        TaxCheat = baddie;
        countries = TaxCheatRepository.GetList<Country>();
        CountryOfBirth = new SelectList(countries, baddie.COB);
        CountryOfResidence = new SelectList(countries, baddie.COR);
        CountryOfDomicile = new SelectList(countries, baddie.COD);
    }
} 
```

关键是您应该将数据保存在`List<T>`真正需要输出之前；最后一分钟 (LPM)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-04-09T02:06:23.253

因为这在谷歌中是一个很高的结果，所以我提供了我发现在这里工作的东西（尽管年龄很大）：

如果您使用的是强类型视图（即模型具有分配的类型），则提供给 SelectList 的构造函数的 SelectedValue 将被用于页面模型的对象的值覆盖。

这在编辑页面上效果很好，但在您想要预选特定值时不适用于创建，因此一种解决方法是简单地在您作为模型传递给视图的默认构造对象上分配正确的值。例如

```
var model = new SubjectViewModel()
{
   Subject = new Subject(),
   Types = data.SubjectTypes.ToList()
}
model.Subject.SubjectType = model.Types.FirstOrDefault(t => t.Id == typeId);
ViewData.Model = model;
return View(); 
```

所以我的创建视图中的代码如下所示：

```
Html.DropDownListFor(model => model.Subject.SubjectTypeId, new SelectList(model.Types, "Id", "Name")) 
```

返回下拉列表，其值为我指定为列表中的 SelectedValue。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T17:52:19.947

我知道这是一个老问题，但它可能会帮助那里的人。我做了看起来与 Erik 所做的非常相似的事情。我刚刚从现有的 SelectList 中创建了一个新的...

```
SelectList myList = GetMySelectList();
SelectListItem selected = myList.FirstOrDefault(x => x.Text.ToUpper().Contains("UNITED STATES"));
if (selected != null)
{
     myList = new SelectList(myList, "value", "text", selected.Value);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-19T13:49:50.503

“SelectedValue”属性是只读的。在构造函数中设置它是唯一的方法。

Tor，SelectList 是一个 ASP.NET MVC 构造，用于创建下拉列表。以你的方式做也应该有效，但如果做得好，SelectList 应该为你做（而不是在 JS 中）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-01T15:26:18.293

我认为您可以在控制器中执行此操作。如果您要使用名称/ID StateCode 呈现下拉列表，则可以在创建 SelectList 后使用此代码设置选定状态：

ViewData["StateCode"] = "VT";

似乎下拉列表 HTML 助手会查找与正在创建的下拉列表同名的 ViewData 项。

我不认为我喜欢使用这种技术，但它似乎确实有效。

我同意 SelectList 类目前有点弱。我希望能够创建一个 SelectList，然后稍后通过值或文本选择一个值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-19T13:44:13.683

你的意思是客户端，在浏览器中？

```
var select = document.getElementById('mySelect');
select.options[newIndex].selected = true; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-12T03:33:14.200

SelectList 对象在创建后是只读的。如果你想选择一些你最好这样做的东西：

```
<%= Html.DropDownList("clientId", ViewData["clients"] as List<SelectListItem>,)%> 
```

在后面的代码中：

```
 ViewData["clientId"] = "ASD"; //This should be the value of item you want to select
    ViewData["clients"] = clientItemList; //List<SelectListItem> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-08-27T19:05:12.203

用 jQuery 可以很容易地做到这一点；

```
$(function() {
    $("#myselectlist option[@value='ItemToSelectValue'].attr('selected', 'true');
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-11-07T22:07:31.320

我自己需要一个带有预选下拉值的可编辑网格中的下拉列表。Afaik，选择列表数据由控制器提供给视图，因此它是在视图使用它之前创建的。视图使用 SelectList 后，我​​将其交给使用标准 DropDownList 帮助器的自定义帮助器。所以，一个相当轻的解决方案imo。在撰写本文时，猜测它符合 ASP.Net MVC 精神；不开心的时候自己滚……

```
公共静态字符串 DropDownListEx（此 HtmlHelper 助手，字符串名称，SelectList selectList，对象 selectedValue）
{
    return helper.DropDownList(name, new SelectList(selectList.Items, selectList.DataValueField, selectList.DataTextField, selectedValue));
}

```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-10T05:46:33.307

我同意@awrigley 和其他人的观点，在通常情况下，当您有一个下拉列表时，最好使用选择列表构造函数加载选定的值。但是，有时，需要在视图上设置选定的值，例如当您有一个具有 n 个相同下拉列表的页面时。由于在控制器中创建这样的集合是不切实际的，甚至可能事先不知道您需要多少个下拉列表，因此更好的方法是在视图模型中创建一个实例作为没有选定值集的模板，然后动态创建其余的在视图上动态显示。

当孩子需要下拉菜单时，我经常在编辑视图上遍历子项目列表时遇到这种情况。在这种情况下，您可以使用一行代码来执行此操作：

```
@Html.DropDownListFor(x => myViewModelFieldName, new SelectList(Model.MyRawSelectListFromMyViewModel.Select(x=> new {x.Value, x.Text}), "Value", "Text", TheValueYouWantToSelect)) 
```

# c - 在 C 中获得 NTFS 访问权限的技术是什么？

> ID：301855
> 
> 赞同：0
> 
> 时间：2008-11-19T13:16:25.750
> 
> 标签：c, security, winapi, acl, ntfs

我正在努力思考如何在多个平台上使用访问权限。现在我正在访问 Microsoft Windows 和 NTFS 文件/目录的权限。

我必须说我正在使用 C 语言工作。我的问题很笼统。我有一个用户名和一个文件路径。

我是否需要更多信息来检查用户是否有权读取/写入/执行？

我应该使用什么技术？ACL 或基本 Win32 API ？还有什么？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T14:12:34.297

在这种情况下，Windows API 有什么问题？

来自平台 SDK 的 GetSecurityInfo 应该会有所帮助。它返回与对象关联的所有者、组等（不仅是文件和目录）。然后，您需要根据您给定的用户名进一步检查返回的信息。

# vbscript - 了解用户是否具有 VBScript 管理权限的最佳方法

> ID：301860
> 
> 赞同：6
> 
> 时间：2008-11-19T13:17:49.257
> 
> 标签：vbscript, privileges

我需要检查执行脚本的用户是否在机器上具有管理权限。

我已经指定了执行脚本的用户，因为脚本可能已经使用类似于“Runas”的登录用户以外的用户执行。

@Javier：这两种解决方案都可以在安装了英文版 Windows 的 PC 上工作，但如果安装的是不同的语言，则不能。这是因为管理员组不存在，名称不同，例如西班牙语。我需要适用于所有配置的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-19T15:21:06.840

通过这样做，您打破了用户拥有您的脚本所需的权限但不属于管理员的情况。与其检查组成员身份，不如检查您需要的特定能力。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-12T23:03:44.607

我知道这个线程很旧并且标记为已回答，但答案并没有真正给出 OP 所询问的内容。

对于搜索和查找此页面的其他人，这里有一个替代方案，它基于权限而不是组成员身份进行报告，因此 Runas Administrator 将管理员权限显示为 True。

```
Option Explicit 

msgbox isAdmin(), vbOkonly, "Am I an admin?"

Private Function IsAdmin()
    On Error Resume Next
    CreateObject("WScript.Shell").RegRead("HKEY_USERS\S-1-5-19\Environment\TEMP")
    if Err.number = 0 Then 
        IsAdmin = True
    else
        IsAdmin = False
    end if
    Err.Clear
    On Error goto 0
End Function 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-19T13:43:08.240

如果要查看登录用户是否为管理员，可以使用脚本

```
Set objNetwork = CreateObject("Wscript.Network")
strComputer = objNetwork.ComputerName
strUser = objNetwork.UserName

isAdministrator = false

Set objGroup = GetObject("WinNT://" & strComputer & "/Administrators")
For Each objUser in objGroup.Members
    If objUser.Name = strUser Then
        isAdministrator = true        
    End If
Next

If isAdministrator Then
    Wscript.Echo strUser & " is a local administrator."
Else
    Wscript.Echo strUser & " is not a local administrator."
End If 
```

恐怕当脚本使用“Runas”运行时，我不确定如何处理它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-12-03T22:32:41.243

检查“\\computername\Admin$\system32”怎么样？

```
function IsLoggedInAsAdmin()
    isAdmin = false
    set shell = CreateObject("WScript.Shell")
    computername = WshShell.ExpandEnvironmentStrings("%computername%")
    strAdmin = "\\" & computername & "\Admin$\System32"

    isAdmin = false

    set fso = CreateObject("Scripting.FileSystemObject")

    if fso.FolderExists(strAdmin) then
        isAdmin = true
    end if

    IsLoggedInAsAdmin = isAdmin
end function 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-10-20T20:39:36.813

我已经在我公司网络上的 Windows 7 机器上尝试了 Tim C 的解决方案，我确实拥有管理员权限。但它显示我的用户没有管理员权限。

相反，我使用了一种更骇人的方法，因为在 cmd 提示符下调用“defrag”需要管理员访问权限。虽然它有效，但请注意 XP 和 7（可能还有未来的 Windows 版本）在返回码方面有所不同。可能有比碎片整理更一致的选择，但它现在有效。

```
Function isAdmin
    Dim shell
    set shell = CreateObject("WScript.Shell")
    isAdmin = false
    errlvl = shell.Run("%comspec% /c defrag /?>nul 2>nul", 0, True)
    if errlvl = 0 OR errlvl = 2 Then '0 on Win 7, 2 on XP
        isAdmin = true
    End If
End Function 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-19T15:05:29.167

[这篇文章](http://www.tek-tips.com/viewthread.cfm?qid=1348699)有很多关于如何枚举组成员的代码（为方便起见，在此处复制并编辑为不使用电子邮件地址）：

```
Function RetrieveUsers(domainName,grpName)

dim GrpObj
dim mbrlist
dim mbr

'-------------------------------------------------------------------------------
' *** Enumerate Group Members ***
'-------------------------------------------------------------------------------

' Build the ADSI query and retrieve the group object
Set GrpObj = GetObject("WinNT://" & domainName & "/" & grpName & ",group")

' Loop through the group membership and build a string containing the names
for each mbr in GrpObj.Members
   mbrlist = mbrlist & vbTab & mbr.name & vbCrLf
Next

RetrieveUsers=mbrlist

End Function 
```

然后，您可以编写一个函数来查看用户是否在列表中......

```
Function IsAdmin(user)
    IsAdmin = InStr(RetrieveUsers("MachineName", "Administrators"), user) > 0
End Function 
```

...并这样称呼它：

```
If IsAdmin("LocalAccount") Then
    Wscript.Echo "LocalAccount is an admin"
Else
    Wscript.Echo "LocalAccount is not an admin"
End If 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-15T13:53:13.280

另一种快速的肮脏方法。如果 IsNotAdmin 返回 <> 0

```
Function IsNotAdmin()
    With CreateObject("Wscript.Shell")
        IsNotAdmin = .Run("%comspec% /c OPENFILES > nul", 0, True)
    End With
End Function 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-06T13:37:50.567

用户可能不在本地管理员组中。例如 - 域管理员。UAC 通常会阻止管理员访问注册表、共享等，即使是管理员（只有手动“以管理员身份运行”才正确）...

这是我的疯狂方式：

```
Set Shell = CreateObject("WScript.Shell")
set fso = CreateObject("Scripting.FileSystemObject")
strCheckFolder = Shell.ExpandEnvironmentStrings("%USERPROFILE%") 
strCheckFolder = strCheckFolder+"\TempFolder"

if fso.FolderExists(strCheckFolder) then
        fso.DeleteFolder(strCheckFolder)
end if

fso.CreateFolder(strCheckFolder)
tempstr = "cmd.exe /u /c chcp 65001 | whoami /all >" & strCheckFolder & "\rights.txt"
Shell.run tempstr

tempstr = strCheckFolder & "\rights.txt"
WScript.Sleep 200
Set txtFile = FSO.OpenTextFile(tempstr,1)

IsAdmin = False

Do While Not txtFile.AtEndOfStream
  x=txtFile.Readline
  If InStr(x, "S-1-5-32-544") Then
      IsAdmin = True
  End If
Loop

txtFile.Close 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-17T16:15:19.920

```
Function isAdmin
    Dim shell
    Set shell = CreateObject("WScript.Shell")
    isAdmin = false
    errorLevel = shell.Run("%comspec% /c net session >nul 2>&1", 0, True)
    if errorLevel = 0
        isAdmin = true
    End If
End Function 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-29T13:55:00.203

使用“localhost”而不是真正的主机名将脚本运行时间增加了大约 10 倍！
我的最终代码是：

```
' get_admin_status.vbs
Option Explicit

Dim oGroup:   Set oGroup   = GetObject("WinNT://localhost/Administrators,group")
Dim oNetwork: Set oNetwork = CreateObject("Wscript.Network")

Dim sSearchPattern: sSearchPattern = "WinNT://" & oNetwork.UserDomain & "/" & oNetwork.UserName

Dim sMember
For Each sMember In oGroup.Members
  If sMember.adsPath = sSearchPattern Then
    ' Found...
    Call WScript.Quit(0)
  End If
Next

' Not found...
Call WScript.Quit(1) 
```

如果当前用户是本地管理员，则此脚本返回退出代码 0。
用法：cscript.exe get_admin_status.vbs

# sharepoint - 如何将动态搜索参数添加到 Sharepoint 搜索？

> ID：301865
> 
> 赞同：1
> 
> 时间：2008-11-19T13:21:08.597
> 
> 标签：sharepoint, search, scope, search-engine

所以我们的场景是这样的：我们有多个 Sharepoint 站点，这些站点是根据“请求”动态创建的。基本上每个新项目都有一个新站点。现在，对于每个站点，我们要添加一个搜索子句，说明只有元数据标记值等于站点名称的内容才能被找到。快速示例：有 2 个站点/项目：Bear 和 Wolf。Sharepoint Search 已经索引了这些站点中的所有文档/列表/等，并为它们建立了一个公共存档。公共档案中的所有文档都有一个名为“ProjectName”的属性。当 Wolf 团队的 Bill 想要在他的项目站点 (Wolf) 中搜索“规范”时，他只想查看与该项目相关的文档。那么如何确保所有文档的“ProjectName”值都设置为“Wolf”？

我猜我*可以*在这里使用 Scopes，但目前有大约 200 个站点，而且每个月都在增长，因此手动维护它不是一种选择。如果有一种相对简单的自动化范围的方法；出色的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-29T05:46:10.413

虽然您可以为此使用范围，但我不推荐它。href 字段将为您提供完全自动化搜索所需的一切，而无需持续的维护负担。

您可以执行搜索并根据站点 URL 过滤掉所选站点之外的所有项目，作为返回的任何项目的必需前缀。这是可行的，因为例如给定一个位于[http://server/bears](http://server/bears)的站点，该站点内所有项目的 URL 将采用[http://server/bears/](http://server/bears/) ...的形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T20:34:58.830

搜索范围很容易以编程方式管理。见[这里](http://msdn.microsoft.com/en-us/library/bb428856.aspx)。

当搜索范围需要作为功能的一部分发布时，我已经这样做了。

工作正常。

下面，从上面的 MS 文章中提取的代码。

```
private ServerContext serverctx = null;
private SearchContext searchctx = null;
serverctx = ServerContext.GetContext("SharedServices1");
searchctx = SearchContext.GetContext(serverctx);
Scopes scopes = new Scopes(searchctx);
foreach (Scope scope in scopes.GetSharedScopes())

TreeNode node = treeViewScopes.Nodes.Add(scope.Name);

foreach (TreeNode node in treeViewScopes.Nodes)
{
  foreach (ScopeRule rule in scope.Rules)
  {
    if (rule is PropertyQueryScopeRule)
    {
      PropertyQueryScopeRule prule = (PropertyQueryScopeRule)rule;
      TreeNode childnode = node.Nodes.Add("Property Query Rule: ");
      childnode.Text += prule.Property.Name + " =  " + prule.Value;
    }
    if (rule is AllContentScopeRule)
    {
      AllContentScopeRule arule = (AllContentScopeRule)rule;
      node.Nodes.Add("All Content Rule");
    }
    if (rule is UrlScopeRule)
    {
      UrlScopeRule urule = (UrlScopeRule)rule;
      TreeNode childnode = node.Nodes.Add("URL Rule: ");
      childnode.Text += urule.MatchingString;
    }
  }
} 
```

**更新**

我会向每个站点添加一个属性，并使用该属性来确定每个 Web 需要添加到哪个范围。然后，控制台样式的应用程序可以通过服务器上的每个 Web 并添加范围规则以将每个 url 添加到正确的范围内。

这将允许将文档添加到站点，而无需显式设置文档级别的“项目”属性，确保文档不会被排除在特定范围内的搜索之外。

另一个解决方案是遍历每个文档，如果还没有指定项目名称的字段，则添加一个字段，如果项目名称与站点的属性不匹配，则在文档上设置该项目名称。最终可能会成为一项长期运行的任务。使用我认为的搜索范围要好得多。

# colors - 如果已知背景颜色，如何找到好看的字体颜色？

> ID：301869
> 
> 赞同：86
> 
> 时间：2008-11-19T13:21:55.600
> 
> 标签：colors, accessibility, readability

那里似乎有很多色轮、颜色选择器和颜色匹配器 Web 应用程序，您可以在其中提供一种颜色，然后它们会找到其他几种颜色，这些颜色在组合使用时会产生和谐的布局。然而，它们中的大多数只关注背景颜色，并且在每种背景颜色上打印的任何文本（如果在预览中完全打印文本）都是黑色或白色。

我的问题不一样。我知道要用于文本区域的背景颜色。我需要帮助的是选择几种颜色（越多越好）我可以在这个背景上用作字体颜色。最重要的是颜色将确保字体可读（对比度不要太低，也可能不要太高以避免眼睛受到压力），当然前景和背景的组合看起来不错。

有人知道这样的应用程序吗？我更喜欢 Web 应用程序，而不是我必须下载的任何东西。谢谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-11-19T14:49:55.593

如果您需要算法，请尝试以下操作：将颜色从 RGB 空间转换为 HSV 空间（色相、饱和度、值）。如果你的 UI 框架做不到，请查看这篇文章：[http ://en.wikipedia.org/wiki/HSL_and_HSV#Conversion_from_RGB_to_HSL_or_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV#Conversion_from_RGB_to_HSL_or_HSV)

色调在 [0,360) 中。要找到“相反”的颜色（想想色轮），只需添加 180 度：

```
h = (h + 180) % 360; 
```

对于饱和度和值，反转它们：

```
l = 1.0 - l;
v = 1.0 - v; 
```

转换回 RGB。即使大多数组合看起来很丑陋，这也应该始终为您提供高对比度。

如果你想避免“丑”的部分，建立一个有几个“好”组合的表，找到差异最小的一个

```
def q(x):
    return x*x
def diff(col1, col2):
    return math.sqrt(q(col1.r-col2.r) + q(col1.g-col2.g) + q(col1.b-col2.b)) 
```

并使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-19T19:00:01.987

好的，这仍然不是最好的解决方案，但是一个很好的起点。我写了一个小 Java 应用程序，它计算两种颜色的对比度，并且只处理比例为 5:1 或更好的颜色 - 这个比例和我使用的公式已经由 W3C 发布，可能会取代当前的推荐（我认为非常有限）。它在当前工作目录中创建一个名为“chosen-font-colors.html”的文件，其中包含您选择的背景颜色和通过此 W3C 测试的每种颜色的一行文本。它需要一个参数，即背景颜色。

例如，你可以这样称呼它

```
java FontColorChooser 33FFB4 
```

然后只需在您选择的浏览器中打开生成的 HTML 文件，然后从列表中选择一种颜色。给出的所有颜色都通过了此背景颜色的 W3C 测试。您可以通过将 5 替换为您选择的数字来更改截止（较低的数字允许较弱的对比度，例如 3 将仅确保对比度为 3:1，10 将确保它至少为 10:1），您还可以切断以避免太高的对比度（通过确保它小于某个数字），例如添加

```
|| cDiff > 18.0 
```

if 子句将确保对比度不会太极端，因为太极端的对比度会使您的眼睛感到压力。这是代码，玩得开心一点:-)

```
import java.io.*;

/* For text being readable, it must have a good contrast difference. Why?
 * Your eye has receptors for brightness and receptors for each of the colors
 * red, green and blue. However, it has much more receptors for brightness
 * than for color. If you only change the color, but both colors have the
 * same contrast, your eye must distinguish fore- and background by the
 * color only and this stresses the brain a lot over the time, because it
 * can only use the very small amount of signals it gets from the color
 * receptors, since the breightness receptors won't note a difference.
 * Actually contrast is so much more important than color that you don't
 * have to change the color at all. E.g. light red on dark red reads nicely
 * even though both are the same color, red.
 */

public class FontColorChooser {
    int bred;
    int bgreen;
    int bblue;

    public FontColorChooser(String hexColor) throws NumberFormatException {
        int i;

        i = Integer.parseInt(hexColor, 16);
        bred = (i >> 16);
        bgreen = (i >> 8) & 0xFF;
        bblue = i & 0xFF;
    }

    public static void main(String[] args) {
        FontColorChooser fcc;

        if (args.length == 0) {
            System.out.println("Missing argument!");
            System.out.println(
                "The first argument must be the background" +
                "color in hex notation."
            );
            System.out.println(
                "E.g. \"FFFFFF\" for white or \"000000\" for black."
            );
            return;
        }
        try {
            fcc = new FontColorChooser(args[0]);
        } catch (Exception e) {
            System.out.println(
                args[0] + " is no valid hex color!"
            );
            return;
        }
        try {
            fcc.start();
        } catch (IOException e) {
            System.out.println("Failed to write output file!");
        }
    }

    public void start() throws IOException {
        int r;
        int b;
        int g;
        OutputStreamWriter out;

        out = new OutputStreamWriter(
            new FileOutputStream("chosen-font-colors.html"),
            "UTF-8"
        );

        // simple, not W3C comform (most browsers won't care), HTML header
        out.write("<html><head><title>\n");
        out.write("</title><style type=\"text/css\">\n");
        out.write("body { background-color:#");
        out.write(rgb2hex(bred, bgreen, bblue));
        out.write("; }\n</style></head>\n<body>\n");

        // try 4096 colors
        for (r = 0; r <= 15; r++) {
            for (g = 0; g <= 15; g++) {
                for (b = 0; b <= 15; b++) {
                    int red;
                    int blue;
                    int green;
                    double cDiff;

                    // brightness increasse like this: 00, 11,22, ..., ff
                    red = (r << 4) | r;
                    blue = (b << 4) | b;
                    green = (g << 4) | g;

                    cDiff = contrastDiff(
                        red, green, blue,
                        bred, bgreen, bblue
                    );
                    if (cDiff < 5.0) continue;
                    writeDiv(red, green, blue, out);
                }
            }
        }

        // finalize HTML document
        out.write("</body></html>");

        out.close();
    }

    private void writeDiv(int r, int g, int b, OutputStreamWriter out)
        throws IOException
    {
        String hex;

        hex = rgb2hex(r, g, b);
        out.write("<div style=\"color:#" + hex + "\">");
        out.write("This is a sample text for color " + hex + "</div>\n");
    }

    private double contrastDiff(
        int r1, int g1, int b1, int r2, int g2, int b2
    ) {
        double l1;
        double l2;

        l1 = ( 
            0.2126 * Math.pow((double)r1/255.0, 2.2) +
            0.7152 * Math.pow((double)g1/255.0, 2.2) +
            0.0722 * Math.pow((double)b1/255.0, 2.2) +
            0.05
        );
        l2 = ( 
            0.2126 * Math.pow((double)r2/255.0, 2.2) +
            0.7152 * Math.pow((double)g2/255.0, 2.2) +
            0.0722 * Math.pow((double)b2/255.0, 2.2) +
            0.05
        );

        return (l1 > l2) ? (l1 / l2) : (l2 / l1);
    }

    private String rgb2hex(int r, int g, int b) {
        String rs = Integer.toHexString(r);
        String gs = Integer.toHexString(g);
        String bs = Integer.toHexString(b);
        if (rs.length() == 1) rs = "0" + rs;
        if (gs.length() == 1) gs = "0" + gs;
        if (bs.length() == 1) bs = "0" + bs;
        return (rs + gs + bs);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T13:31:04.660

这是一个有趣的问题，但我认为这实际上是不可能的。两种颜色是否“适合”作为背景和前景颜色取决于显示技术和人类视觉的生理特征，但最重要的是取决于经验塑造的个人品味。快速浏览一下 MySpace 非常清楚地表明，并非所有人都以相同的方式感知颜色。我不认为这是一个可以通过算法解决的问题，尽管在某个地方可能有一个巨大的数据库可以接受匹配的颜色。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-21T18:49:18.573

出于不同的原因，我实现了类似的东西 - 那是告诉最终用户他们选择的前景色和背景色是否会导致无法阅读的文本的代码。为此，我没有检查 RGB 值，而是将颜色值转换为 HSL/HSV，然后通过实验确定在比较 fg 和 bg 值时，为了便于阅读，我的截止点是什么。这是您可能想要/需要考虑的事情。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-11T04:47:29.167

在我最近制作的一个应用程序中，我使用了反转颜色。有了 r,g 和 b 值，只需计算（在本例中，颜色范围从 0 到 255 不等）：

```
r = 127-(r-127) and so on. 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-19T15:04:22.803

回答我自己的问题可能很奇怪，但这是我以前从未见过的另一个非常酷的颜色选择器。它也不能解决我的问题:-((((但是我认为这对我已经知道的这些来说要酷得多。

[http://www.colorjack.com/](http://www.colorjack.com/)

在右侧，在工具下选择“Color Sphere”，一个非常强大且可自定义的球体（看看你可以用顶部的弹出窗口做什么），“Color Galaxy”，我仍然不确定它是如何工作的，但看起来很酷，“色彩工作室”也不错。此外，它可以导出为各种格式（例如 Illustrator 或 Photoshop 等）

这个怎么样，我在那里选择我的背景色，让它创建一个互补色（从第一个弹出窗口开始） - 这应该具有最高的对比度，因此是最好的可读性，现在选择互补色作为主色并选择中性？嗯......也不是很好，但我们正在变得更好;-)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-19T13:48:41.303

您是否考虑过让您的应用程序的用户选择他们自己的配色方案？毫无疑问，您将无法通过您的选择取悦所有用户，但您可以让他们找到让他们满意的东西。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-19T19:11:12.180

与@Aaron Digulla 的建议类似，只是我建议使用图形设计工具，选择基色，在您的情况下选择背景色，然后调整色相、饱和度和值。使用它，您可以非常轻松地创建颜色样本。Paint.Net 是免费的，我一直为此使用它，付费工具也可以做到这一点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-01-01T18:13:53.237

我个人认为我们无法通过指定背景颜色来找到一种算法来计算最匹配的文本颜色。

我认为目前艺术家应该有一个阅读质量好的颜色对列表，我们可以将它们添加到一个表格中，并随机设置其中一个作为我们的*阅读主题*......

这很合理，我们不会得到丑陋的颜色对......

# c# - 在未打开 Outlook 应用程序的情况下阅读电子邮件

> ID：301882
> 
> 赞同：9
> 
> 时间：2008-11-19T13:26:49.100
> 
> 标签：c#, email, outlook

这就是我使用 C# 阅读电子邮件的方法：

```
outLookApp.NewMailEx += new ApplicationEvents_11_NewMailExEventHandler(outLookApp_NewMailEx);
            Outlook.NameSpace olNameSpace = outLookApp.GetNamespace("mapi");

olNameSpace.Logon("xxxx", "xxxxx", false, true);
Outlook.MAPIFolder oInbox  = olNameSpace.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderInbox);
Outlook.Items oItems  = oInbox.Items;
MessageBox.Show("Total : " + oItems.Count); //Total Itemin inbox
 oItems = oItems.Restrict("[Unread] = true");
 MessageBox.Show("Total Unread : " + oItems.Count); //Unread Items
 Outlook.MailItem oMsg;

 Outlook.Attachment mailAttachement;
 for (int i = 0; i < oItems.Count; i++)
 {
     oMsg = (Outlook.MailItem)oItems.GetFirst();

     MessageBox.Show(i.ToString());

    MessageBox.Show(oMsg.SenderName);
    MessageBox.Show(oMsg.Subject);
    MessageBox.Show(oMsg.ReceivedTime.ToString());
    MessageBox.Show(oMsg.Body); 
```

我面临的问题是这个应用程序只有在机器上打开 Outlook 时才有效。如果 Outlook 已关闭，则会引发异常：

> 服务器不可用。如果这种情况仍然存在，请联系您的管理员。

无论如何我可以在打开 Outlook 的情况下阅读电子邮件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T13:31:52.380

当 Outlook 关闭时，您可能会遇到[这种情况。](https://stackoverflow.com/questions/235231/how-to-avoid-outlook-security-alert-when-reading-outlook-message-from-c-program)

同样遵循[本教程](http://www.programminghelp.com/programming/dotnet/access-your-email-within-outlook-pt-1-of-3-c/)将确保您执行所有正确的步骤。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T09:52:50.623

这是一个老问题，但我要回答这个问题，因为我在同一个问题上挣扎了很长时间，而这个页面上以前的答案并没有真正帮助我。

我必须编写一个程序并使用 Outlook 在具有不同 UAC 级别的不同机器上发送电子邮件，这是我经过很长时间后想出的。

```
using Outlook = Microsoft.Office.Interop.Outlook;

// Create the Outlook application.
Outlook.Application oApp = null;

// Check whether there is an Outlook process running.
int outlookRunning = Process.GetProcessesByName("OUTLOOK").Length;
if (outlookRunning > 0)
{
    // If so, use the GetActiveObject method to obtain the process and cast it to an Application object.
    try
    {
        oApp = Marshal.GetActiveObject("Outlook.Application") as Outlook.Application;
    }
    catch (Exception)
    {
        oApp = Activator.CreateInstance(Type.GetTypeFromProgID("Outlook.Application")) as Outlook.Application;
    }
    finally
    {
        // At this point we must kill Outlook (since outlook was started by user on a higher prio level than this current application)
        // kill Outlook (otherwise it will only work if UAC is disabled)
        // this is really a kind of last resort
        Process[] workers = Process.GetProcessesByName("OUTLOOk");
        foreach (Process worker in workers)
        {
            worker.Kill();
            worker.WaitForExit();
            worker.Dispose();
        }
    }
}
else
{
    // If not, create a new instance of Outlook and log on to the default profile.
    oApp = new Outlook.Application();
    Outlook.NameSpace nameSpace = oApp.GetNamespace("MAPI");
    try
    {
        // use default profile and DO NOT pop up a window
        // on some pc bill gates fails to login without the popup, then we must pop up and lets use choose profile and allow access
        nameSpace.Logon("", "", false, Missing.Value);
    }
    catch (Exception)
    {
        // use default profile and DO pop up a window
        nameSpace.Logon("", "", true, true);
    }
    nameSpace = null;
}

// Done, now you can do what ever you want with the oApp, like creating a message and send it
// Create a new mail item.
Outlook.MailItem oMsg = (Outlook.MailItem)oApp.CreateItem(Outlook.OlItemType.olMailItem); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T14:05:22.860

您确定要将 Outlook 用作代理吗？

[人们](http://www.codeproject.com/KB/IP/popapp.aspx) [似乎](http://www.java2s.com/Code/CSharp/Network/APOP3emailchecker.htm)在 C# 中处理这样一个任务的低级别（令人惊讶的是框架中没有任何内置组件......）

*关于 Mat 的回应，Redemption 确实是一个很好的产品（在 Outlook 到达时用它来解析邮件），但我怀疑它可以在没有运行 Outlook 的情况下工作。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T14:42:22.520

我个人不会使用 Outlook 作为代理。如果您试图最终监控 Exchange 存储，那么我会使用 WebDav。您的 Exchange 服务器必须支持它 - 但如果支持，它就是一个简单的 XML API。好吧，API 位很简单，但 XML 相当复杂。但是，一旦您将其封装在一些代码中，使用起来就轻而易举了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-01T04:06:45.090

为您的代码使用[Redemption COM 库](http://www.dimastr.com/redemption/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-02-21T20:54:51.440

使用 MAPI 客户端检索电子邮件并使用 MIME 解码器读取它们。两者都存在于 lumisoft 框架中：

[http://www.lumisoft.ee/lswww/download/downloads/Net/](http://www.lumisoft.ee/lswww/download/downloads/Net/)

# c++ - 在 C++ (MSVC) 中打印堆栈跟踪？

> ID：301892
> 
> 赞同：10
> 
> 时间：2008-11-19T13:29:44.053
> 
> 标签：c++, qt, visual-c++

在我的 C++ 应用程序（使用 Visual Studio 2003 开发）和[Qt4](http://en.wikipedia.org/wiki/Qt_(toolkit)#Current)中，我想将堆栈跟踪从特定代码行打印到控制台输出或文件中。

需要什么？Qt 有帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-19T14:14:36.367

[Jochen Kalmbach [MVP VC++] 的StackWalker](http://www.codeproject.com/KB/threads/StackWalker.aspx)并在 codeproject 上可用，这可能是最简单的方法。它包含了处理底层 StackWalk64 API 的所有细节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-11T01:39:24.743

它不在公共 Qt API 中，但如果您查看

> $QTDIR/src/corelib/kernel/qcrashhandler.*

你可以看到跨平台实现的开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T13:56:44.860

[dbghelp.dll 库中的StackWalk64](http://msdn.microsoft.com/en-us/library/ms680650(VS.85).aspx)应该可以满足您的需求。

# eclipse - Eclipse 软件更新无法满足依赖关系

> ID：301896
> 
> 赞同：2
> 
> 时间：2008-11-19T13:30:29.810
> 
> 标签：eclipse

最近，我的 Eclipse 3.4 安装在尝试更新已安装的软件时开始抱怨。

我通常打开自动更新，所以这特别烦人。

找到了更新，但我无法安装它们，因为 eclipse 无法满足版本依赖关系。

从 .log 文件：

!ENTRY org.eclipse.equinox.p2.director 2 0 2008-11-17 16:07:58.006 !MESSAGE 解决供应计划的问题。!SUBENTRY 1 org.eclipse.equinox.p2.director 2 0 2008-11-17 16:07:58.006 !MESSAGE 无法满足来自 org.eclipse.jst.web_ui.feature.feature.group 3.1.0.v200809240655-的依赖7E6EAaDgvY1exFj6Cn354dmz01jf 到 requiredCapability：org.eclipse.equinox.p2.iu/org.eclipse.wst.web_ui.feature.feature.group/[3.1.0,4.0.0)。!SUBENTRY 1 org.eclipse.equinox.p2.director 2 0 2008-11-17 16:07:58.006 !MESSAGE 无法满足从 org.eclipse.datatools.sqltools.data.core 1.0.0.200612181 到 requiredCapability:osgi 的依赖关系。捆绑包/com.ibm.icu/[3.4.4,3.5.0)。

现在，我没有改变我对功能的选择——它只是试图更新现有的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T13:33:01.460

在这种情况下，已经发布到jst更新站点的新版本jst依赖于新版本的wst。

wst的更新站点和jst的不一样，17号还没更新。

今天写，19号，jst更新站点现在有正确的新版本，更新会顺利通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T13:40:53.113

似乎这是一个当前的[问题](https://glassfishplugins.dev.java.net/issues/show_bug.cgi?id=54)，Eclipse p2 更新过程不会警告用户缺少依赖项，而是愉快地尝试安装新的服务器插件，然后在重新启动时失败，让用户不走运。

一个[Eclipse 错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=246208)正在进行中...

# asp.net-mvc - 计数选择列表项（计数 IEnumerable）

> ID：301918
> 
> 赞同：6
> 
> 时间：2008-11-19T13:42:01.330
> 
> 标签：asp.net-mvc, selectlist

正如你[在这里](https://stackoverflow.com/questions/301854/set-selected-value-in-selectlist-after-instantiation)和[这里](https://stackoverflow.com/questions/295313/modelbinding-with-selectlist)所看到的，我不是 asp.net MVC 的 SelectList 的好朋友。
这次我想知道如何计算其中的项目。如果可能的项目不提供任何选择（items.count <2），我想显示标签而不是下拉列表。

**- 编辑 -**

虽然威尔的回答可能也有效，但最简单的方法是打电话

```
.GetListItems().Count() 
```

这会禁用您可能拥有的任何惰性获取，但由于它们无论如何都会在下拉列表中，我认为这应该不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-19T13:56:22.847

[Linq 有一个名为 Count() 的 IEnumerable](http://www.hookedonlinq.com/CountOperator.ashx)扩展方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-01-06T12:55:13.680

Linq 没有名为 Count() 的 IEnumerable 扩展方法。Count() 是为 IEnumerable 实现的，这是一个很大的区别。

# php - 尝试在本地上传 1M 文件，但出现致命错误

> ID：301922
> 
> 赞同：2
> 
> 时间：2008-11-19T13:43:28.723
> 
> 标签：php

“致命错误：已用尽允许的 31457280 字节内存大小（尝试分配 9828 字节）”。

这是我得到的错误，但我只是想上传一个 1mb 的图像。我增加了 php.ini 中的内存限制和执行时间。我正在使用 firefox 的 Mac 上的本地 MAMP 服务器上尝试此操作。这将用于在线图片库。有任何想法吗？下面是代码：

```
 ini_set("memory_limit","30M");
    if(isset($_POST['submit'])){
      if (isset ($_FILES['new_image'])){
          $imagename = $_FILES['new_image']['name'];
          $source = $_FILES['new_image']['tmp_name'];
          $target = "images/".$imagename;
          move_uploaded_file($source, $target);

          $imagepath = $imagename;
          //below here for the removed code

          $save = "thumbs/uploads/" . $imagepath; //This is the new file you saving
          $file = "images/" . $imagepath; //This is the original file
          $imagesize = getimagesize($file);

          list($width, $height) = $imagesize; 

          unset($imagesize);

          if($width>$height)
            {
                $modwidth = 150; 
                $diff = $width / $modwidth;
                $modheight = $height / $diff;
            }else{
                $modheight = 150; 
                $diff = $height / $modheight;
                $modwidth = $width / $diff;
            }
          $tn = imagecreatetruecolor($modwidth, $modheight); 
          $image = imagecreatefromjpeg($file); 
          $imagecopy = imagecopyresampled($tn, $image, 0, 0, 0, 0, $modwidth, $modheight, $width, $height); 

          imagedestroy($image);
          imagedestroy($im);
          imagedestroy($imagecopy);
          imagedestroy($source);

          $imagejpg = imagejpeg($tn, $save, 100); 
            imagedestroy($tn);
          imagedestroy($imagejpg); 
```

* * *

编辑

现在这个问题已经得到了解决。我的一位同事一直有解决方案，但没有告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-19T13:47:28.030

您可能会加载图像以对其进行一些操作。这会导致图像数据被解压缩，这需要大量内存用于大图像（我认为每个像素大约 4 个字节）。

您可以选择不处理图像，或者在 PHP 之外进行处理 - 例如通过调用 ImageMagick 或其他程序。这在一定程度上取决于您要完成的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T15:18:57.250

这与您上传的图像的（文件）大小无关，打破内存限制的调用是 imagecreatetruecolor()。

imagecreatetruecolor() 将分配一个内存区域来存储*不*压缩的真彩色图像，并且每个像素使用 32 位（4 字节）。

例如，对于 1024x768 像素的图像，imagecreatetruecolour() 将使用 1024*768*4 = 3145728 字节，或大约 3MB。

问题是这种规模相当大。通过同样的计算，一张 3072x2034（6 兆像素）的图像需要大约 24MB 才能加载到内存中——我猜这就是你正在处理的那种大小。

解决方案是将处理交给其他东西，比如 imagemagick 或 NetPBM，它们将作为一个单独的进程运行并且不计入 PHP 内存限制。

[NetPBM](http://netpbm.sourceforge.net/)是我个人最喜欢的，看起来像：

```
anytopnm <file> | pnmscale -xysize <dimensions> | pnmtojpg  > <outfile> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T13:52:30.890

[如此处](http://bytes.com/forum/thread455194.html)所述：

> 不要忘记[imagedestroy](http://us.php.net/imagedestroy) () 函数，或者缓存你的缩略图——它们会为你节省很多工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T13:48:12.207

增加内存限制后是否重新启动了 apache？如果是，则再增加一点。

# python - Python：urllib/urllib2/httplib 混淆

> ID：301924
> 
> 赞同：52
> 
> 时间：2008-11-19T13:44:20.577
> 
> 标签：python, http, urllib2

我正在尝试通过在 Python 中编写登录序列脚本来测试 Web 应用程序的功能，但我遇到了一些麻烦。

这是我需要做的：

1.  使用一些参数和标题进行 POST。
2.  跟随重定向
3.  检索 HTML 正文。

现在，我对 python 比较陌生，但是到目前为止我测试过的两件事都没有奏效。首先，我使用 httplib、putrequest()（在 URL 中传递参数）和 putheader()。这似乎没有遵循重定向。

然后我尝试了 urllib 和 urllib2，将标头和参数都作为 dicts 传递。这似乎返回了登录页面，而不是我尝试登录的页面，我猜这是因为缺少 cookie 或其他原因。

我错过了一些简单的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-11-19T14:52:47.490

专注`urllib2`于此，效果很好。不要乱用`httplib`，它不是顶级 API。

你注意到的是它`urllib2`不遵循重定向。

您需要折叠一个实例，`HTTPRedirectHandler`该实例将捕获并遵循重定向。

此外，您可能希望对默认值进行子类化`HTTPRedirectHandler`以捕获信息，然后将其作为单元测试的一部分进行检查。

```
cookie_handler= urllib2.HTTPCookieProcessor( self.cookies )
redirect_handler= HTTPRedirectHandler()
opener = urllib2.build_opener(redirect_handler,cookie_handler) 
```

然后，您可以使用此`opener`对象进行 POST 和 GET，正确处理重定向和 cookie。

您可能还想添加自己的子类`HTTPHandler`来捕获和记录各种错误代码。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2011-01-29T09:33:42.020

这是我对这个问题的看法。

```
#!/usr/bin/env python

import urllib
import urllib2

class HttpBot:
    """an HttpBot represents one browser session, with cookies."""
    def __init__(self):
        cookie_handler= urllib2.HTTPCookieProcessor()
        redirect_handler= urllib2.HTTPRedirectHandler()
        self._opener = urllib2.build_opener(redirect_handler, cookie_handler)

    def GET(self, url):
        return self._opener.open(url).read()

    def POST(self, url, parameters):
        return self._opener.open(url, urllib.urlencode(parameters)).read()

if __name__ == "__main__":
    bot = HttpBot()
    ignored_html = bot.POST('https://example.com/authenticator', {'passwd':'foo'})
    print bot.GET('https://example.com/interesting/content')
    ignored_html = bot.POST('https://example.com/deauthenticator',{}) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-11-19T15:17:31.590

@S.Lott，谢谢。您的建议对我有用，并进行了一些修改。这就是我的做法。

```
data = urllib.urlencode(params)
url = host+page
request = urllib2.Request(url, data, headers)
response = urllib2.urlopen(request)

cookies = CookieJar()
cookies.extract_cookies(response,request)

cookie_handler= urllib2.HTTPCookieProcessor( cookies )
redirect_handler= HTTPRedirectHandler()
opener = urllib2.build_opener(redirect_handler,cookie_handler)

response = opener.open(request) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-11-19T15:12:08.637

我最近不得不自己做这件事。我只需要标准库中的类。这是我的代码的摘录：

```
from urllib import urlencode
from urllib2 import urlopen, Request

# encode my POST parameters for the login page
login_qs = urlencode( [("username",USERNAME), ("password",PASSWORD)] )

# extract my session id by loading a page from the site
set_cookie = urlopen(URL_BASE).headers.getheader("Set-Cookie")
sess_id = set_cookie[set_cookie.index("=")+1:set_cookie.index(";")]

# construct headers dictionary using the session id
headers = {"Cookie": "session_id="+sess_id}

# perform login and make sure it worked
if "Announcements:" not in urlopen(Request(URL_BASE+"login",headers=headers), login_qs).read():
    print "Didn't log in properly"
    exit(1)

# here's the function I used after this for loading pages
def download(page=""):
    return urlopen(Request(URL_BASE+page, headers=headers)).read()

# for example:
print download(URL_BASE + "config") 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-11-19T14:19:19.010

我会给 Mechanize（[http://wwwsearch.sourceforge.net/mechanize/](http://wwwsearch.sourceforge.net/mechanize/)）一个机会。它可能会透明地处理您的 cookie/标头。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-11-19T14:15:32.323

试试[twill](http://twill.idyll.org/) - 一种允许用户从命令行界面浏览 Web 的简单语言。使用斜纹，您可以浏览使用表​​单、cookie 和大多数标准 Web 功能的网站。更重要的是，*twill*是用 python API 编写的`Python`，[例如](http://twill.idyll.org/python-api.html)：

```
from twill import get_browser
b = get_browser()

b.go("http://www.python.org/")
b.showforms() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-19T14:00:59.157

除了您可能缺少 cookie 的事实之外，表单中可能有一些字段是您没有 POST 到网络服务器的。最好的方法是从 Web 浏览器捕获实际的 POST。您可以使用[LiveHTTPHeaders](https://addons.mozilla.org/en-US/firefox/addon/3829) 或[WireShark](http://www.wireshark.org/)来窥探流量并在脚本中模仿相同的行为。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-19T14:32:49.887

[Funkload](http://funkload.nuxeo.org/)也是一个很棒的网络应用测试工具。它包装了 webunit 来处理浏览器仿真，然后在上面为您提供功能和负载测试功能。

# sharepoint - 有没有一种将数组存储在 MOSS 自定义内容类型中的好方法？

> ID：301934
> 
> 赞同：1
> 
> 时间：2008-11-19T13:49:26.060
> 
> 标签：sharepoint, moss, wss

我需要在 MOSS 中以自定义内容类型存储一个数组。这将始终被隐藏，仅以编程方式使用。在列表项的整个生命周期中，我将向数组添加值。一段时间后，我的数组可能看起来像这样：

```
值1,1 | 值1,2 | 值1,3 | 值1,4
值2,1 | 值2,2 | 值2,3 |
值3,1 | 值3,2 | 值3,3 |
值4,1 | 值4,2 | 值4,3 | 值4,4

```

我知道我可以使用 SPFieldMultiColumn 来存储第一行，但看起来我不能存储多行。我也知道我可以自己创建一个文本字段并序列化我的数组。只是好奇当您需要存储数组时是否已经有一个字段可供使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T17:38:04.740

没有可以存储二维数组的开箱即用字段。
通常，您要么将每一行存储在不同的项目中，要么将值序列化到更简单的字段（如多行文本）中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T18:51:28.897

序列化它可能是小型阵列的最佳解决方案。或者，您可以将其存储在单独的列表中。请记住，没有禁止创建自己的自定义表格的法律。

# mysql - MySQL：将当前年份添加为字段“年份”的默认值

> ID：301937
> 
> 赞同：10
> 
> 时间：2008-11-19T13:50:22.047
> 
> 标签：mysql, mysql-error-1067

我在 MySQL（版本 5）中有下表：

```
id     int(10)       UNSIGNED             No    auto_increment              
year   varchar(4)    latin1_swedish_ci    No             
title  varchar(250)  latin1_swedish_ci    Yes   NULL         
body   text          latin1_swedish_ci    Yes   NULL 
```

我希望数据库在插入时自动添加当前年份，我尝试了以下 SQL 语句：

```
ALTER TABLE `tips` CHANGE `year` `year` VARCHAR(4) NOT NULL DEFAULT year(now()) 
```

但它给出了以下错误：

```
1067 - Invalid default value for 'year' 
```

我该怎么做才能获得此功能？提前致谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-11-19T14:01:47.453

> 数据类型规范中的 DEFAULT value 子句指示列的默认值。除了一个例外，默认值必须是一个常量；它不能是函数或表达式。例如，这意味着您不能将日期列的默认值设置为 NOW() 或 CURRENT_DATE 等函数的值。例外情况是您可以将 CURRENT_TIMESTAMP 指定为 TIMESTAMP 列的默认值。

[-- MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html)

但是，您可以编写一个[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)来设置该值。我希望我能提供帮助，但我对在 MySQL 中编写存储过程并不熟悉。

我认为这会起作用：

```
CREATE TRIGGER ins_year
BEFORE INSERT ON tips
    FOR EACH ROW SET NEW.year = YEAR(NOW()); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-19T13:55:16.420

以下应该有效：

```
ALTER TABLE tips MODIFY COLUMN year YEAR(4) NOT NULL DEFAULT CURRENT_TIMESTAMP 
```

请参阅[年份数据类型](http://dev.mysql.com/doc/refman/5.0/en/year.html)了解更多信息。

因此，我在获得访问权限后对其进行了测试，但它不起作用。正如另一位海报指出的那样，CURRENT_TIMESTAMP 仅适用于[TIMESTAMP](http://dev.mysql.com/doc/refman/5.0/en/timestamp.html)数据类型。

存储完整的时间戳然后只在代码中使用年份是否存在特定问题？如果不是，那么我建议将此值存储为时间戳。

您的另一个选择是创建一个[触发器](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)：

```
CREATE TRIGGER example_trigger AFTER INSERT ON tips
FOR EACH ROW BEGIN
UPDATE tips SET year = YEAR(NOW()) WHERE tip_id = NEW.tip_id
END; 
```

否则，请从您的代码中将此值分配给 INSERT 语句。

在您的情况下，最佳解决方案将完全取决于您的特定应用程序周围的环境。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-10-19T17:09:56.090

我知道这是一个相当老的帖子，但对于其他人仍然通过搜索引擎找到它。从 MySQL 8.0.13 开始，您可以使用[表达式作为列默认值](https://dev.mysql.com/doc/refman/8.0/en/data-type-defaults.html#data-types-defaults-explicit)。因此，您原来的 alter 语句是有效的。你只需要像这样用括号括起来。我还建议使用`YEAR` [数据类型](https://dev.mysql.com/doc/refman/8.0/en/year.html)而不是 varchar，它包含验证和内置转换；like`10`将被转换为`2010`etc...

```
ALTER TABLE `tips`
    CHANGE `year` `year` YEAR NOT NULL DEFAULT (YEAR(CURDATE())); 
```

# security - 为用户身份验证和授权编写安全类的提示

> ID：301948
> 
> 赞同：2
> 
> 时间：2008-11-19T13:56:34.577
> 
> 标签：security, language-agnostic

我的应用程序中有一堆对象（组织、个人、订单等），我需要一种干净的方式来决定哪些用户可以查看/编辑这些对象，哪些用户不能查看/编辑这些对象。用户拥有一系列权限，例如“可以编辑自己的联系人”和“可以查看团队的联系人”，还可以是“客户经理”等组的成员，因此需要检查各种事情（该用户是客户经理吗？是此联系人由此用户团队管理？此用户可以编辑他的团队联系人吗？），然后才能确定他们是否有权访问该对象。

以前大部分逻辑都是内联的，但随着它变得越来越复杂，我决定最好将其移到新的类中，例如 OrganisationSecurity、OrderSecurity 等，并在它们上创建诸如 CanEdit 之类的方法。

这是正确的方法吗？有什么我应该注意的问题吗？你怎么处理这个？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T14:07:34.993

查看[安全模式](http://www.securitypatterns.org/patterns.html)，尤其是关于身份验证和授权的领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T14:22:22.623

确保它没有“过度设计”，并仔细考虑为什么需要阻止访问以及您对对象用户的信任程度。

您可以考虑编写一个方面来阻止/允许访问某些方法： [http ://en.wikipedia.org/wiki/Aspect-oriented_programming](http://en.wikipedia.org/wiki/Aspect-oriented_programming)

在我的公司，我们尝试了 Acegi（在一个 Java 项目上），但发现它的重量太重/设计过度，无法满足我们的需求。也许它更适合您的情况： [http ://www.javaworld.com/javaworld/jw-10-2007/jw-10-acegi2.html](http://www.javaworld.com/javaworld/jw-10-2007/jw-10-acegi2.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-02T12:14:33.537

谷歌为术语权利管理和 XACML。这将使您指向更好的方向。

# wmi - 查找远程系统中是否存在特定产品

> ID：301956
> 
> 赞同：0
> 
> 时间：2008-11-19T14:02:29.450
> 
> 标签：wmi

尝试查找产品是否安装在远程PC中，执行需要很长时间，有什么方法可以更快地实现这一点。

//用法： //uninstall4("hostname", "productname", "{AC9C1263-2BA8-4863-BE18-01232375CE42}", "10.0.0.69");

```
 public void uninstall4(string targetServer, string product,string guid , string version)
    {
        //Connect to Server
        System.Management.ConnectionOptions connoptions = new System.Management.ConnectionOptions();
        connoptions.Impersonation = System.Management.ImpersonationLevel.Impersonate;
        connoptions.Timeout = new TimeSpan(0, 0, 10); // 10 seconds
        System.Management.ManagementScope scope = new System.Management.ManagementScope(@"\\" + targetServer + @"\root\cimv2", connoptions);
        scope.Connect();

        string q = "select * from Win32_Product where name = '" + product + "' and IdentifyingNumber='"+guid+"' and version = '"+version+"'";

        System.Management.SelectQuery query = new System.Management.SelectQuery(q);

        System.Management.EnumerationOptions options = new System.Management.EnumerationOptions();
        options.EnumerateDeep = false;
        options.ReturnImmediately = false;
        options.DirectRead = true;

        using (System.Management.ManagementObjectSearcher searcher
            = new System.Management.ManagementObjectSearcher(scope, query, options))
        {
            using (System.Management.ManagementObjectCollection moc = searcher.Get())
            {
                if(moc == null || moc.Count == 0)
                {
                    throw new Exception("product Not Found");
                }

            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-30T16:02:45.400

没有。Win32_Product 类的提供程序必须在您查询时动态构建信息，而且它总是很慢。

# c++ - 向量迭代器不可解引用

> ID：301959
> 
> 赞同：9
> 
> 时间：2008-11-19T14:04:47.917
> 
> 标签：c++, stl

我有一个名为 Shape 的抽象基类，从中派生了 Circle 和 Rectangle，但是当我在 VS 2005 中执行以下代码时，我得到错误调试断言失败。同时我没有在任何类中重载 == 运算符

表达式：向量迭代器不可解引用，这是什么原因。

```
 vector<Shape*> s1;
  s1.push_back(new Circle(point(1,2),3));
  s1.push_back(new Circle(point(4,3),5));
  s1.push_back(new Rectangle(point(1,1),4,5));

  vector<Shape*> s2(s1);
  reverse(s1.begin(),s1.end());

  (*find(s1.begin(),s1.end(),new Circle(point(1,2),3)))->move(point(10,20)); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-19T14:16:34.663

简单的 ：

*   查找失败，因为通过比较 Shape * 在向量中找不到您新创建的 Circle
*   失败的查找返回结束迭代器，该迭代器不能被 Debug 断言捕获

为了让它像你想要的那样工作，你需要比较 Shape，而不是 Shape*

正如其他答案中所指出的，[boost::ptr_vector](http://www.boost.org/doc/libs/1_37_0/libs/ptr_container/doc/ptr_vector.html)是实现这一目标的简单方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-19T14:39:30.980

就像@David Pierre 建议的那样：find 是基于值的：它在迭代器的范围内查找一个等于指向`new Circle(point(1,2),3)`您刚刚创建的指针的指针（例如 0x0F234420）。由于那是一个新对象，它不会在那里。

您可以通过使用`find_if`比较指针引用的对象的运算符来解决此问题。

但是，Criterium 应该能够区分形状类型。

```
class Shape {
public:
    //amongst other functions
    virtual bool equal( const Shape* ) const = 0;
};

class Circle : public Shape {
public:
    bool equal( const Shape* pOther ) const {
        const Circle* pOtherCircle = dynamic_cast<const Circle*>( pOther );
        if( pOtherCircle == NULL ) return false;
        // compare circle members
    }
};

class Rectangle : public Shape {
public:
    bool equal( const Shape* pOther ) const {
        const Rectangle* pOtherR = dynamic_cast<const Rectangle*>( pOther );
        if( pOtherR == NULL ) return false;
        // compare rectangle members
    }
};

Shape* pFindThis = new Circle(point(1,2),3);
vector<Shape*>::const_iterator itFound = find_if(s1.begin(),s1.end(), 
    bind1st( mem_fun( &Shape::equal ), pFindThis) ) );
delete pFindThis; //leak resolved by Mark Ransom - tx!

if( itFound != s1.end() ) {
    (*itFound)->move(point(10,20));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-19T19:54:19.223

这是使用 boost::ptr_vector 的一个很好的理由。

它不仅处理您的对象需要被销毁的事实。
xtofl@: 你忘记了虚拟析构函数。

但它也通过返回引用而不是指针使成员看起来像对象。这使您可以更自然地使用标准算法，而不是在“相等”函数中玩弄指针（这很不像 C++）。

```
#include <boost/ptr_container/ptr_vector.hpp>
#include <iostream>

class Shape
{
    public:
        ~Shape()    {}
        bool operator==(Shape const& rhs) const
        {
            if (typeid(*this) != typeid(rhs))
            {
                return false;
            }

            return this->isEqual(rhs);
        }
    private:
        virtual bool isEqual(Shape const& rhs) const    = 0;
};

class Circle: public Shape
{
    public:
        Circle(int r)
            :radius(r)
        {}
    private:
        virtual bool isEqual(Shape const& r) const
        {
            Circle const&   rhs = dynamic_cast<Circle const&>(r);
            return radius == rhs.radius;
        }
        int radius;
};
class Rectangle: public Shape
{
    public:
        Rectangle(int h,int w)
            :height(h)
            ,width(w)
        {}
    private:
        virtual bool isEqual(Shape const& r) const
        {
            Rectangle   const&  rhs = dynamic_cast<Rectangle const&>(r);
             return (height == rhs.height) && (width == rhs.width);
        }
        int height;
        int width;
};

int main()
{

    boost::ptr_vector<Shape>    data;

    data.push_back(new Circle(5));
    data.push_back(new Circle(6));
    data.push_back(new Rectangle(7,4));

    boost::ptr_vector<Shape>::iterator f;
    f = find(data.begin(),data.end(),Circle(6));

    std::cout << "Find(" << (f - data.begin() ) << ")" << std::endl;

} 
```

# c# - SignalAndWait 用于锁定上下文

> ID：301960
> 
> 赞同：1
> 
> 时间：2008-11-19T14:05:02.940
> 
> 标签：c#, multithreading, locking, resetevent

我有一个为线程池生成任务的管理器类，每个线程都应该在完成后进行回调。

我使用锁来处理变量和字段，并使用信号来处理线程间通信。我正在寻找的是一种退出当前 lock() 并以原子方式等待信号的方法，例如 SignalAndWait，但对于 locks()。

代码看起来像这样：

```
// ... part of the scheduler
foreach(WorkTask task in worktasks)
{
   lock(_syncObj)
   {
      new Job(task, myCallback); // creates a thread
      instanceCount++;
      while(instanceCount > _maxConcurrentTasks)
          _resetEvent.WaitOne(Timeout.Infinite);
   }
}

// .. the callback

void myCallback()
{
    lock(_syncObj)
    {
        instanceCount--;
        _resetEvent.Set();
    }
} 
```

这里的问题是 .WaitOne() 不会退出 lock()，因此任何执行回调的线程都会死锁。

我对 WaitOne(Int32, bool exitContext) 寄予厚望，但该上下文似乎是关于远程处理和其他东西，而不是同步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T14:10:24.783

有什么理由使用事件原语而不是`Monitor.Wait/Pulse/PulseAll`？`Monitor.Wait`原子地释放锁并等待，在它返回之前重新获取锁。有关更多详细信息，请参阅[我的线程文章](http://pobox.com/~skeet/csharp/threads/deadlocks.shtml)。

# c# - 使用 LINQ to SQL 定期删除一组记录的最佳方法

> ID：301965
> 
> 赞同：2
> 
> 时间：2008-11-19T14:06:30.783
> 
> 标签：c#, performance, linq-to-sql, tsql, transactions

这是我第一次破解在我的 ASP.NET 应用程序的生命周期内定期运行以清理存储在我的数据库中的过期会话的方法。它似乎工作得很好，但我的软件工程师对这段代码感觉不“正确”。我已经使用 LINQ to SQL 几个月了，但我对下面的代码不是很有信心。我担心几件事：

1.  在我的应用程序中的不同线程访问数据库的情况下，以下代码是否可以安全运行？我对交易的概念有很好的理解，但我想确保我正确地使用它们。

2.  我的查询会导致性能问题吗？或者在这种情况下选择这个特定表中的所有记录是否合适？此方法仅每 15 分钟运行一次，因此不会在短时间内反复进行查询。

3.  有没有更好的方法可以做到这一点？我有一种挥之不去的感觉。

代码：

```
/// <summary>
/// Method, run periodically, to remove all sign in records that correspond to expired sessions.
/// </summary>
/// <param name="connectionString">Database connection string</param>
/// <returns>Number of expired sign in records removed</returns>
public static int Clean(String connectionString)
{
    MyDatabaseDataContext db = new MyDatabaseDataContext(connectionString);

    var signIns = db.SignIns.Select(x => x);
    int removeCount = 0;

    using (TransactionScope scope = new TransactionScope())
    {
        foreach (SignIn signIn in signIns)
        {
            DateTime currentTime = DateTime.Now;
            TimeSpan span = currentTime.Subtract(signIn.LastActivityTime);

            if (span.Minutes > 10)
            {
                db.SignIns.DeleteOnSubmit(signIn);
                ++removeCount;
            }
        }

        db.SubmitChanges();
        scope.Complete();
    }

    return removeCount;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-19T14:28:04.827

这听起来像是您可以在存储过程中轻松完成的事情。SQLServer 为您提供了一个返回当前时间的 GETDATE() 方法......我不明白为什么你不能只是

```
 DELETE * FROM tblSignIns 
 WHERE LastActivityTime < DATEADD("minute", -10, GETDATE()); 
```

那不会做同样的事情吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T14:29:53.420

一条评论：你不想要[`TimeSpan.Minutes`](http://msdn.microsoft.com/en-us/library/system.timespan.minutes.aspx)，你想要[`TimeSpan.TotalMinutes`](http://msdn.microsoft.com/en-us/library/system.timespan.totalminutes.aspx)。*大多数*时候它可能无关紧要，但至少它是一个逻辑错误:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T14:25:42.773

您可以将存储过程作为数据库上下文中的方法。为什么不写一个做你想做的事，然后通过你的上下文调用它呢？这样，您还可以使用集合逻辑，而不是遍历您的集合。（Linq to SQL 可能会将其编译掉 - 不确定它如何处理删除。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-25T02:39:51.243

FWIW 我不久前发布了一段示例代码，展示了 Linq 的基于集合/批量更新的实现（单语句更新而不是逐记录更新）。

我还没有发布相同的删除版本，但很快就会发布（阅读：当我有心情输入另一个博客条目时:)）。同时，您可以从“更新”语句版本中获得它。

您可以在此处找到描述和源代码：http: [//blog.huagati.com/res/index.php/2008/11/05/architecture-linq-to-sql-and-set-based-operations-更新语句/](http://blog.huagati.com/res/index.php/2008/11/05/architecture-linq-to-sql-and-set-based-operations-update-statements/)

**更新：**可以在此处找到“删除”示例：http: [//blog.huagati.com/res/index.php/2008/11/25/architecture-linq-to-sql-and-set-based-operations-删除语句/](http://blog.huagati.com/res/index.php/2008/11/25/architecture-linq-to-sql-and-set-based-operations-delete-statements/)

# visual-studio - Visual Studio 中包含的图标在哪里？

> ID：301968
> 
> 赞同：86
> 
> 时间：2008-11-19T14:07:30.470
> 
> 标签：visual-studio, icons

我听说 Visual Studio 带有一个图像库，但我在任何地方都找不到它。有谁知道它在哪里？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-11-12T16:09:47.247

从 Visual Studio 2012 开始，图标可以从 Visual Studio 单独下载：

*   [Visual Studio 图像库](https://docs.microsoft.com/en-us/visualstudio/designers/the-visual-studio-image-library)

该库包含出现在 Microsoft Visual Studio、Microsoft Windows、Office 系统和其他 Microsoft 软件中的应用程序图像。

在 Visual Studio 2012 启动时，该下载[最初不可用。](http://connect.microsoft.com/VisualStudio/feedback/details/758881/image-library-missing-from-visual-studio-2012)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-11-19T14:08:39.607

在 VS 2008 中，它们位于：

PROGRAMFILES\Microsoft Visual Studio 9.0\Common7\VS2008ImageLibrary\1033

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2011-12-11T22:07:04.870

视觉工作室 2010：

PROGRAMFILES\Microsoft Visual Studio 10.0\Common7\VS2010ImageLibrary\1033\VS2010ImageLibrary.zip

解压并享受

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-19T00:42:14.643

VS2012 现代图像库

Microsoft 于 2013 年 3 月 13 日发布了有关 Visual Studio Image Library Version 2012 的信息，您可以从页面下载

[http://www.microsoft.com/en-us/download/details.aspx?id=35825](http://www.microsoft.com/en-us/download/details.aspx?id=35825)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-11-19T14:10:52.367

视觉工作室 2005：

C:\Program Files (x86)\Microsoft Visual Studio 8\Common7\VS2005ImageLibrary\VS2005ImageLibrary

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-02-26T18:55:44.087

Visual Studio 2019 社区

`C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\Common7\IDE\Assets`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-11T13:44:12.110

适用于 Windows 手机的 Visual Studio 2012

C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Icons

# c# - 学习 Orca 的好资源

> ID：301979
> 
> 赞同：1
> 
> 时间：2008-11-19T14:12:22.190
> 
> 标签：c#, winforms, deployment, configuration

已下载 Orca 以编辑 MSI 文件。我想在安装过程中删除一些横幅文本。我已设法对 MSI 执行此操作，并将其与 MSI 一起保存。但是在保存模板然后将其应用于后续安装程序时遇到问题。查看了 Orca 的帮助文件，基本上不知道如何执行此操作。任何人都可以建议我如何对 Orca 进行更改并保存这些更改，然后将它们应用到后续的 MSI，这些 MSI 只是对原始 MSI 的更新？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T14:39:24.880

我使用这些[MSI 互操作工具](http://sourceforge.net/projects/izfree/)来自动执行这些更改 - 即您决定（使用 ORCA）您想要更改的内容和方式，然后编写一个简单的程序将它们应用于您想要的任何安装程序。

很不错的东西。

# windows - 什么是适用于 Windows 的最佳（免费）字体资源管理器？

> ID：301982
> 
> 赞同：1
> 
> 时间：2008-11-19T14:12:48.400
> 
> 标签：windows, fonts

我正在寻找一个替代我的旧“字体导航器”的替代品，我......从 CorelDraw Suite 借来...... :-)

谷歌搜索，带我浏览了数百页旧软件，所以我希望从这里找到一个快速的想法（等待来自 Linotype 的 FontExplorer X）。

您目前使用哪种 Windows 字体资源管理器？我的“必要条件”是：

*   浏览和预览已安装/卸载的字体

*   安装/卸载字体

*   自由的 ：-）

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T14:39:36.863

该[线程](http://typophile.com/node/41998)引用了主要的字体浏览器，如[Bitstream Font Navigator](http://www.bitstream.com/fonts/index.html)、[Typograf](http://www.neuber.com/typograph/)（都已经提到）和[OT1 Font Manager](http://www.ot1fontmanager.com/en/)

...但它们不是免费的。

唯一*可能*免费的是[Font Explorer X](http://www.linotype.com/2629/fontexplorerxfeatures.html)，它有一个[PC 测试版](http://fex.linotype.com/download/pc/FontExplorerX-0.9.1.2250.exe)，但那个版本相当“危险”

> “这非常有问题。不是完全没用，但你必须克服它完全搞乱任何字体目录的事实。因此，为要导入程序的字体创建一个单独的文件夹，因为它将从原始文件夹中删除这些字体。还要备份你的 windows 字体文件夹，以防万一它决定从那里删除字体。”</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T14:42:35.843

我发现 Opcion 非常实用。适用于多个平台。

不执行安装/卸载，但执行其他所有操作。

[http://opcion.sourceforge.net/](http://opcion.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T14:54:39.967

这些年来我尝试了很多。我目前使用的是[AMP Font Viewer](http://www.ampsoft.net/utilities/FontViewer.php "AMP 字体查看器")，它非常好，可以满足您的所有要求……以及更多（例如“临时安装字体”、管理类别等）。

[Arjan Mel 的字体查看器]( [http://www.google.fr/search?q=%22arjan+mel%22](http://www.google.fr/search?q=%22arjan+mel%22) "Arjan Mel 的字体查看器") 也不错，但老旧、废弃且有点不稳定...

另外，我有各种字符表查看器，包括一流的[BabelMap](http://www.babelstone.co.uk/Software/BabelMap.html "BabelMap（Unicode 字符映射）")。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T14:40:51.760

开始->运行->字体

为我工作（：

您可以卸载、预览和添加新字体。它还显示字体类型。

这是一个重定向到 WINDOWSDIR\Fonts

# asp.net - 如何在 jQuery AJAX 请求中保留 HTML？

> ID：301983
> 
> 赞同：2
> 
> 时间：2008-11-19T14:13:04.560
> 
> 标签：asp.net, jquery

我正在开发一个想要实现 AJAX 的项目，并且我决定将 jQuery 作为 JavaScript 库。这是HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>jQuery AJAX</title>
    <!--<script language="javascript" type="text/javascript" src="inc/scripts.js"></script>-->
    <script language="javascript" type="text/javascript" src="inc/jquery-1.2.6-intellisense.js"></script>
    <script language="javascript" type="text/javascript">
        $(document).ready(function(){
            $("#clicker").click(function () {
                $.ajax({
                    type: "POST",
                    url: "test.aspx/randomString",
                    data: "{}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(msg) {
                        $("#result").append(msg.d);
                    }
                });
            });
        });
    </script>
</head>
<body runat="server">
    <form id="form1" runat="server">
        <div id="result" runat="server" style="margin-bottom:5em;"></div>
        <div id="clicker" runat="server" style="cursor:pointer;">Click Here to Refresh</div>
    </form>
</body>
</html> 
```

这是后端**`test.aspx`**：

```
<WebMethod()> _
Public Shared Function randomString() As String
    Dim KeyGen As RandomKeyGenerator
    Dim NumKeys As Integer
    Dim i_Keys As Integer
    Dim RandomKey As String
    Dim oRet As New StringBuilder
    NumKeys = 20
    KeyGen = New RandomKeyGenerator
    KeyGen.KeyLetters = "abcdefghijklmnopqrstuvwxyz"
    KeyGen.KeyNumbers = "0123456789"
    KeyGen.KeyChars = 12
    For i_Keys = 1 To NumKeys
        RandomKey = KeyGen.Generate()
        oRet.AppendLine(String.Format("{0}{1}", RandomKey, ControlChars.NewLine))
    Next
    Return oRet.ToString
End Function 
```

我已经尝试**`$("#result).text(msg.d)`**过以及形成一个列表，**`String.Format("<li>{0}</li>",RandomKey)`**并添加一个中断标签**`String.Format("{0}<br />",RandomKey)`**。

当我运行它作为一行返回的页面时，会显示所有 HTML。我需要做什么才能使其呈现 HTML？

[我从这个站点](http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/)获得了有关如何在没有 ScriptManager 的情况下调用页面的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-19T14:35:41.537

采用：

```
$("#result").html(msg.d) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T14:21:14.623

如果您需要将 html 放入节点中，例如，如果您有一个 id=container 的 div。你这样做 $('#container').html(htmlContent);。但请注意，您从服务器返回的响应不应将 html 转换为安全字符串（带有字符实体）。但是您也使用 json 作为数据类型。您应该为此使用文本。或者从您从服务器获取的 json 变量中获取字符串并将其植入节点中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T14:20:15.513

为什么在返回 html 时使用“json”作为数据类型？使用“html”作为数据类型并将 msg.d 替换为 msg

# asp.net-mvc - 在 Asp.net MVC 中导出到 Excel

> ID：301986
> 
> 赞同：21
> 
> 时间：2008-11-19T14:15:17.957
> 
> 标签：asp.net-mvc

我正在开发一个 ASP.NET MVC 应用程序，我需要将数据导出到 Excel 电子表格。以前，在 webforms 应用程序中，我使用我发现的一些代码将 GridView 呈现为与 excel 兼容的文件。这很方便。我想知道在 MVC 中最快/最有效的方法是什么。谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-11-19T16:34:23.667

这是 Stephen Walther 的一篇博文，题为[ASP.NET MVC Tip #2 - Create a custom Action Result that return Microsoft Excel Documents](http://stephenwalther.com/blog/archive/2008/06/16/asp-net-mvc-tip-2-create-a-custom-action-result-that-returns-microsoft-excel-documents.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-11-19T14:19:15.407

一个简单的选择是创建一个视图来呈现 Excel 文件的 XML 版本。您可以使用新的 Office 2007 版本或旧的 2003 版本。我们选择了 2003 版本，以便更多人可以使用它，但这当然取决于您。

[MSDN 上的 XML 2003 参考](http://msdn.microsoft.com/en-us/library/aa140066.aspx#odc_xmlss_ss:Workbook)

[MSDN 上的 XML 2007 参考](http://msdn.microsoft.com/en-us/library/aa338205.aspx)

# coldfusion - 何时在应用程序范围内使用锁定

> ID：301988
> 
> 赞同：1
> 
> 时间：2008-11-19T14:15:43.807
> 
> 标签：coldfusion, locking, shared-memory

我想知道是否需要锁定在应用程序范围内创建的一些代码。如果我在应用程序范围内创建一个对象说 userDAO.cfc，那么它可用于所有页面。然后，如果我在该对象中有一个方法说 getUserInfo(userID) 将在应用程序的不同部分调用，我是否需要锁定此方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-19T15:10:30.700

简短的回答：可能不是。

如果该对象是在 Application.cfc 的 OnApplicationStart() 方法中在应用程序范围内创建的，并且它永远不会更改，并且您确保为所有函数更改所有变量，那么您不需要锁定访问给它。

在这种情况下， OnApplicationStart() 会为您进行锁定，并且在创建该方法之前不会让任何人继续进行。这很好，因为它只允许创建一次项目，并确保它在其他人使用它之前就存在。

如果您从其他任何地方实例化对象，例如某个随机页面的顶部，那么是的，您需要将它锁定在这里，以及引用它的任何地方。

如果该对象将更改为另一个对象，或者如果它保持任何状态，例如私有或公共变量（变量。* 或 this.*）会更改为其他对象，您可能希望在外部锁定它，或者您可以尝试锁定它基于每个变量在 cfc 中。

最后，如果您不改变所有变量（[使用 Mike Schierberl 的 varScoper！](http://varscoper.riaforge.org/)），那么您将更改对象的状态。您永远不应该真正达到这一点，但这是锁定的情况。

整个事情的大例外是如果您使用的是 CF 5 或更低版本，在这种情况下必须锁定任何共享范围访问，如果您使用的是 CF 6 或 6.1，在这种情况下没有 Application.cfc。

# postgresql - 如何设置 ODBC .DSN 文件以允许它访问 Postgresql 中的任何数据库？

> ID：301989
> 
> 赞同：0
> 
> 时间：2008-11-19T14:16:28.203
> 
> 标签：postgresql, odbc

我正在编写一个 MFC 应用程序来使用 ODBC 自动配置 Postgresql 以供另一个应用程序使用。这个想法是用户运行应用程序，它会自动在其中创建数据库和表。我的问题是，当我设置文件 DSN 时，它似乎需要它将访问的数据库的名称。这在 DSN 文件中显示为 ..

```
DATABASE=mydb 
```

但是我还没有创建 mydb 所以无法连接到 Postgresql ！我曾尝试编辑 DSN 文件，因此该行显示为 ..

```
DATABASE= 
```

并完全删除它，但随后我收到错误并且无法连接。

DSN 文件是否可以允许访问任何数据库？如果是这样，我该怎么做？

谢谢

伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T14:26:50.647

我不熟悉 PostgreSql，但是 SQL Server 中是否有像“master”这样的数据库，您可以最初连接到，然后再使用不同的数据库？
您可能还想尝试[connectionstrings.com](http://www.connectionstrings.com/default.aspx?carrier=postgresql)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-11T06:40:50.840

PostgreSQL 数据库“postgres”始终存在，可用于此类任务。

# delphi - 使用 Delphi 调用 Http POST url 的最简单方法是什么？

> ID：301991
> 
> 赞同：37
> 
> 时间：2008-11-19T14:17:22.493
> 
> 标签：delphi, http

受到问题的启发，[使用 Delphi 调用 Http GET url 的最简单方法是什么？](https://stackoverflow.com/questions/301546/whats-the-simplest-way-to-call-http-get-url-using-delphi) 我真的很想看看如何使用 POST 的示例。最好从调用中接收 XML。

补充：在帖子数据中包含图像或其他文件怎么样？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2008-11-19T14:39:49.873

使用印地。将您的参数放入 StringList (name=value) 并使用 URL 和 StringList 简单地调用 Post。

```
function PostExample: string;
var
  lHTTP: TIdHTTP;
  lParamList: TStringList;
begin
  lParamList := TStringList.Create;
  lParamList.Add('id=1');

  lHTTP := TIdHTTP.Create;
  try
    Result := lHTTP.Post('http://blahblahblah...', lParamList);
  finally
    lHTTP.Free;
    lParamList.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-06-08T21:04:11.097

这是使用 Indy 将 JPEG 发布到运行[Gallery的网络服务器的示例](http://gallery.menalto.com/)

我有更多这类东西的例子（我在 Delphi 中为可用的 Gallery 项目编写的屏幕保护程序中使用它们[，](http://gloss.ildica.com/)或者在 Gallery 网站上的更多信息[）](http://codex.gallery2.org/GLoSS)。

我认为重要的一点是JPEG作为流传入。

```
procedure AddImage(const AlbumID: Integer; const Image: TStream; const ImageFilename, Caption, Description, Summary: String);
var
  Response: String;
  HTTPClient: TidHTTP;
  ImageStream: TIdMultipartFormDataStream;
begin

  HTTPClient := TidHTTP.Create;

  try
    ImageStream := TIdMultiPartFormDataStream.Create;
    try
      ImageStream.AddFormField('g2_form[cmd]', 'add-item');
      ImageStream.AddFormField('g2_form[set_albumId]', Format('%d', [AlbumID]));
      ImageStream.AddFormField('g2_form[caption]', Caption);
      ImageStream.AddFormField('g2_form[force_filename]', ImageFilename);
      ImageStream.AddFormField('g2_form[extrafield.Summary]', Summary);
      ImageStream.AddFormField('g2_form[extrafield.Description]', Description);

      ImageStream.AddObject('g2_userfile', 'image/jpeg', Image, ImageFilename);

      Response := HTTPClient.Post('http://mygallery.com/main.php?g2_controller=remote:GalleryRemote', ImageStream);
    finally
      ImageStream.Free;
    end;
  finally
    HTTPClient.Free;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-11-19T18:44:56.243

再次，[Synapse TCP/IP 库](http://synapse.ararat.cz/doku.php/download)来救援。使用 HTTPSEND 例程[HTTPPostURL](http://synapse.ararat.cz/doc/help/httpsend.html#HttpPostURL)。

```
function HttpPostURL(const URL, URLData: string; const Data: TStream): Boolean; 
```

您的 URL 也将是要发布的资源，URLDATA 将是表单数据，您的 XML 结果将作为 DATA 中的流返回。

# ms-access - SSRS 报表生成器 - 来自经验的问题？

> ID：301992
> 
> 赞同：14
> 
> 时间：2008-11-19T14:18:00.073
> 
> 标签：ms-access, reporting-services, usability, reportbuilder

我正在研究向我们的最终用户推出基于 Web 的 SSRS Report Builder 的想法，以允许他们根据我们的生产应用程序数据库创建自己的报告。从我目前看到的情况来看，这个工具比 VS Biz Intel Studio 报表设计器更容易使用，而且它更容易安装，并且部署报表对于最终用户来说更容易理解（另外最大的一点是没有 SQL我猜）。

有没有人对赋予用户这种权力的陷阱有任何想法或经验？现在，我们收到很多将数据导出到平面文件的请求，以便他们可以读取它，然后在 Access 中针对它构建报告，所以我认为 SSRS 会比 Accesss 更好......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-11-19T14:59:00.567

报表模型设计的一些技巧：

**1.建立数据集市**

有几种工具，例如 Report Builder：Business Objects、Oracle Discoverer 等等。它们都有元数据层，可以为您提供一些最终用户报告工具的方法，但是它们仍然需要以合适的格式输入数据，以便产生有效的解决方案。这意味着您确实需要考虑构建某种数据集市。

如果没有干净的数据，这些工具将暴露生产数据库中的所有问题，因此用户必须了解这些问题才能获得正确的结果。这意味着报告应该真正来自干净的数据源。

您对这些工具生成的 SQL 的控制几乎为零，因此它们非常有能力生成将突出您的生产数据库的查询。这意味着您的报告应在单独的服务器上进行。对临时工具（例如星型模式）友好的模式将减轻最严重的潜在性能问题。

**2.清理数据**

没有开发人员参与使用 ad-hoc 工具，因此用户会天真地使用该工具而不知道数据问题是什么。 *不准确的查询结果将永远被视为工具的故障*。为了可信度，需要从工具上游的数据集中消除这些陷阱。

**3\. 使导航健壮且防白痴**

报表生成器可以设置从一个实体移动到另一个实体的限制。如果没有这些，就可以将多个表以 am:m 关系连接在一起。这称为[Fan Trap](http://db.grussell.org/section005.html#_Toc67114416)，将返回不正确的总数。您需要设置模型，以便在公共维度上聚合各个事实表 - 即在加入之前汇总。做到这一点可以消除一类错误。大多数工具都有一些机制来防止这种情况。

**4\. 进行数据聚合**

您可以从 Business Objects 免费获得此功能，但您必须使用 Report Builder 显式地在每个基本度量上放置一个聚合度量。隐藏基本度量并公开聚合。这意味着系统会将数据汇总到用户选择的维度的粒度。

**结论**

将临时工具直接放在生产数据库上不太可能正常工作。数据将有太多陷阱，并且架构不适合报告。这意味着您准备好构建一个数据集市来清理数据并为该工具做好准备。如果您花费大量时间构建临时数据提取，那么在开发人员的时间中可能会有一个业务案例，这将在以后节省。

**编辑：**报表模型向导（像大多数这样的东西）在运行时会变得一团糟。您必须调整设置，例如限制不相关聚合的生成。在过去，我通过生成总和、隐藏所有基本度量并公开聚合，就好像它们是基本度量一样，取得了很好的结果。这提供了很像 Business Objects 的行为。在特定情况下，您可能还想公开计数、最小值/最大值或平均值。

我正在考虑的特定实例是一个相当大的报表模型，其中包含大约 1,500 个字段，因此从向导生成的聚合 fest 总共有 10,000 多个字段是无法管理的。您还可以像 Analysis Services 一样设置文件夹结构，并使用这些结构来组织字段。最后，如果在最终用户工具中将鼠标悬停在该字段上，该字段上的描述将显示为工具提示。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-05T18:53:54.910

对上一个答案的几点评论：
1\. SQL Server Reporting Services 报表生成器使用的语义查询模型的设计目的是防止粉丝陷阱/m:m 关系上的不正确总计。启用此功能不需要额外的努力；它是报表生成器生成的查询结构中固有的。
2\. 默认情况下，模型向导会在数字字段上创建聚合度量，因此不需要额外的工作来公开聚合。您可以根据需要通过添加或删除聚合计算来自定义模型。

总的来说，“垃圾进垃圾出”这句老话当然适用。如果您的数据不干净，那么 Report Builder 或其他临时报告工具只会让这一点更加明显。

Aaron Meyers
软件开发工程师，SQL Server Reporting Services

# eclipse - 什么是最好的 Eclipse GWT 插件？

> ID：301994
> 
> 赞同：8
> 
> 时间：2008-11-19T14:18:22.007
> 
> 标签：eclipse, gwt, eclipse-plugin

我们将为我们的项目调查 GWT。在搜索 Eclipse GWT 插件时，我得到了很多。

1.  [谷歌 Eclipse 插件](http://code.google.com/eclipse)
2.  [GWT 设计师](http://www.instantiations.com/windowbuilder/gwtdesigner/index.html)
3.  [赛帕尔工作室](http://code.google.com/p/cypal-studio/)
4.  无，以托管模式运行 GWT
5.  [GWT-工具](http://code.google.com/p/gwt-tooling/)
6.  其他？

在您看来，Eclipse 最好的 GWT 插件是什么？为什么？

[ *11 月 27 日：编辑以反映以下答案...* ]

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-09-03T21:00:12.430

[![替代文字](https://i.stack.imgur.com/rUrp3.png)](https://i.stack.imgur.com/rUrp3.png)
[（来源：[google.com](https://code.google.com/eclipse/images/google-plugin.png)）]

**[Eclipse 的谷歌插件](http://code.google.com/eclipse/)**

有什么比*来自 Google 本身的更好和***免费的 Eclipse GWT 插件**？它甚至支持两者：

 **   谷歌网络工具包
*   谷歌应用引擎

我一直在关注 GWT Tooling 和 Cypal Studio 的进展，但两者似乎都处于休眠状态。我的猜测是他们承认 VS [Google Plugin for Eclipse](http://code.google.com/eclipse/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-06-09T20:22:28.937

我不知道这个问题的人是否见过，但谷歌已经推出了他们自己的 Eclipse 插件。看一看：

[http://code.google.com/eclipse/](http://code.google.com/eclipse/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-24T17:52:15.897

GWT Designer 完全符合要求。如果不是 Eclipse，那么即使是用于 GWT 的 Netbeans 插件也不错。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-23T14:52:41.080

没有列出的。直接从 Eclipse 以托管模式运行它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-25T18:57:11.990

几个月以来我没有看过，但 GWT 设计师非常好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-27T20:33:42.557

根据我使用 GWT 的经验（使用该框架进行了大约 9 个月的不间断开发），最终您仍然会在很多时间试图查明将出现的各种错误和错误行为。

所以插件很好，但不会为您节省大部分工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-17T19:23:21.850

Google 现在拥有自己的 GWT 开发插件。教程：[http ://www.vogella.de/articles/GWT/article.html](http://www.vogella.de/articles/GWT/article.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-26T01:51:12.760

此外，[Cypal Studio](http://code.google.com/p/cypal-studio/)的 GWT 插件和[Googlipse](http://sourceforge.net/projects/googlipse)是一回事。看看[这个](http://blog.grprakash.com/2007/04/25/googlipse-is-dead-long-live-cypal-studio-for-gwt/)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-25T10:26:51.657

我没有使用 gwt 插件在 eclipse 中开发 gwt 应用程序。（同样简单）

*   com.google.gwt.dev.GWTShell (GWT host) 由 *.launch 直接在 eclipse 中激活
*   com.google.gwt.dev.Compiler 将 gwt java 代码编译为 javascript 以获取 war 文件。

但是对于新项目，我想用插件来尝试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-09-10T04:11:43.840

我使用 Netbeans Free-Form 项目来开发 GWT 应用程序。这种 Netbeans 项目使用 ant 来管理您的项目。 [一个例子](http://saeedzarinfam.blogspot.com/2009/03/gwt-16-on-netbeans-65.html)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-04-26T19:10:57.040

[Cypal 1.0](http://code.google.com/p/cypal-studio/)是 Eclipse 最好的免费插件，因为它使 gwt 文件的创建和管理非常简单。它还可以为您整齐地组织您的 xml 文件。不幸的是，cypal 2.0 的 alpha 版本已经有一年多了，我不知道开发人员是否会继续使用它应用程序。虽然使用起来非常简单，但 gwt 设计器在运行时很糟糕，尤其是在处理大型数据集时。因此，虽然很好用，但不值这个价

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-02-04T01:32:50.150

不要使用设计器插件。最近的更新（本文发布时为 8.1.1）包含允许用户添加与 IE 不兼容的元素的按钮，例如 CellTable、DeckPanel、Horizo​​ntalPanel 和 VerticalPanel。

这意味着无论谁使用该插件，都将完全自担风险。如果 IE7 尝试拉入这些元素，它将加载部分页面但无法加载使用这些元素的组件。IE8 可能根本无法加载应用程序。

# c++ - 写入大文件

> ID：301995
> 
> 赞同：11
> 
> 时间：2008-11-19T14:18:43.520
> 
> 标签：c++, file-io, win64

我尝试写入一个大文件，但它似乎不适用于大于 2GB 的文件。我尝试过使用 boost::iostreams::file_sink。这只是提升流的限制吗？还有其他方法可以在 Win64 和 win32 上编写大文件吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-19T14:59:52.890

这取决于：

*   您正在使用的文件系统。像 FAT 这样的旧文件系统只允许最大 2GB 的文件。使用 NTFS。
*   您的库必须编译为允许大文件（64 位查找偏移量）。如果他们使用 32 位整数在文件中查找（检查调用“seek”和“tell”的参数和结果），您只能访问 2GB（2^31 位，第 32 位是符​​号 +/-）

这也可能有帮助： http: [//www.boost.org/doc/libs/1_37_0/libs/iostreams/doc/faq.html#offsets](http://www.boost.org/doc/libs/1_37_0/libs/iostreams/doc/faq.html#offsets)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-19T15:13:24.877

在 Win32/64 中，ReadFile 和 WriteFile 可以写入大于 4gb 的文件。定位是通过 SetFilePointerEx 中的 64 位 _LARGE_INTEGER 值[完成](http://msdn.microsoft.com/en-us/library/aa365542(VS.85).aspx)的。同样，要获得文件大小，您需要[GetFileSizeEx](http://msdn.microsoft.com/en-us/library/aa364957(VS.85).aspx)而不是基本的 GetFileSize。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-19T16:34:20.733

在 NTFS 中，唯一真正的限制是卷的大小。如果您想对此进行测试，您可以使用命令行创建一个虚拟文件：
fsutil file createnew [filename] [validdatalength]
例如：
fsutil file createnew TestFile.bin 65536000000
假设您有一个 NTFS 卷，它将创建一个 64GB 的文件。

# sharepoint - SharePoint: programmatically move documents between document libraries

> ID：301999
> 
> 赞同：4
> 
> 时间：2008-11-19T14:19:53.797
> 
> 标签：sharepoint

What's the best way to move a document from one doc library to another? I don't care about version history or preserving CreatedBy and ModifiedBy metadata...

```
SPList lib1 = (SPDocumentLibrary) web.Lists["lib1"];
SPList lib2 = (SPDocumentLibrary) web.Lists["lib2"];
SPItem item1 = lib1.Items[0];
//insert code to move item1 to lib2 
```

I'm currently looking at `SPItem.MoveTo()` but wonder if anyone already solved this problem and has some advice.
Thanks in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-19T14:57:26.733

Got it:

```
SPList lib1 = (SPDocumentLibrary) web.Lists["lib1"];
SPList lib2 = (SPDocumentLibrary) web.Lists["lib2"];
SPListItem item1 = lib1.Items[0];
byte[] fileBytes = item1.File.OpenBinary();
string destUrl = lib2.RootFolder.Url + "/" + item1.File.Name;
SPFile destFile = lib2.RootFolder.Files.Add(destUrl, fileBytes, true /*overwrite*/); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-11T05:31:03.760

MoveTo() and CopyTo() both seem to work fine within Visual Studio 2008 sequential workflow. But neither do meta-data or version history. :-(********************`