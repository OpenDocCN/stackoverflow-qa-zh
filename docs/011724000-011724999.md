# StackOverflow 问答 11724000-11724999

# c++ - 实现缩放滑块 QGraphicsView

> ID：11724000
> 
> 赞同：5
> 
> 时间：2012-07-30T14:55:37.660
> 
> 标签：c++, qt, user-interface, math, qgraphicsview

我需要`QGraphicsView`在 Qt 4.x 中为 a 集成一个缩放滑块，我有一个像这样的工作实现：

```
connect(slider, SIGNAL(valueChanged(int)), customGraphicsView, SLOT(setZoomLevel(int)); 
```

在插槽中，`setZoomLevel`我有以下内容

```
void CustomView::setZoomLevel(int level)
{
    if(zoomLevel - level < -1){
        setZoomLevel(level - 1);
    }else if(level - zoomLevel < -1){
        setZoomLevel(level + 1);
    }
    if(level < zoomLevel){
        scale(1 - (scaleFactor * (zoomLevel - level)), 1 - (scaleFactor * (zoomLevel - level)));
    }else if (level > zoomLevel){
        scale(1 + (scaleFactor * (level -  zoomLevel)), 1 + (scaleFactor * (level -  zoomLevel)));
    }

    zoomLevel = level;
} 
```

所以我的问题源于将一个值为 n 到 m 的滑块配对，以表示`scale()`函数的缩放级别，该函数`QGraphicsView`需要两个浮点值来将场景乘以以获得新的大小。

所以我遇到的问题是，如果你取 1 * .9 * 1.1，你仍然不会得到 1，而是 0.99，它会稍微偏离，因为它不是一个正确的公式。所以我的最大变焦随着时间的推移变得越来越小。

递归调用是因为滑块有时会跳过快速幻灯片上的值，这增加了“错误”，所以我将其平滑以包扎一点。

是否有处理缩放的正确方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T16:06:19.877

这也花了我一段时间才弄清楚。问题是 QGraphicsView::scale() 将比例级别与当前比例级别结合在一起。而是尝试：

```
setTransform(QTransform::fromScale(sx, sy)); 
```

请注意，在[文档](http://doc.qt.io/qt-4.8/qgraphicsview.html#setTransform)中有一个可选的第二个参数`combine = false`. 这很好，因为您不想组合转换。

如果您的 QGraphicsView 除了缩放还有其他转换，上述建议将丢弃它们。在这种情况下，您只需使用`QGraphicsView::transform()`获取当前转换，您可以随意更改它，然后使用`QGraphicsView::setTransform()`它再次设置它。

# ios - 为什么 UILabel 没有初始化？

> ID：11724003
> 
> 赞同：2
> 
> 时间：2012-07-30T14:55:56.453
> 
> 标签：ios, objective-c, setter, init, cs193p

代码来自斯坦福 CS193p。我添加了一个 NSLog 来检查它。标签似乎没有被初始化。任何的想法？

```
@interface AskerViewController() <UITextFieldDelegate>
@property (weak, nonatomic) IBOutlet UILabel *questionLabel;
@property (weak, nonatomic) NSString *question;
@end

@implementation AskerViewController
@synthesize questionLabel = _questionLabel;
@synthesize question = _question;

 - (void)setQuestion:(NSString *)question
{
    _question = question;
    self.questionLabel.text = question;
    NSLog(@"label is %@", self.questionLabel);
}

@end 
```

NSLog 结果是：

```
2012-07-31 01:56:45.177 Kitchen Sink[23931:f803] label is (null) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T18:50:29.923

您可能在显示视图控制器之前设置了问题字符串属性，大概是在 prepareForSegue:? 此时，视图尚未加载，label 属性仍将为 nil。

您[通过拥有一个单独的字符串属性来做正确的事情](http://oleb.net/blog/2012/02/passing-data-between-view-controllers/)，您只是错过了还必须在 viewDidLoad 中设置标签文本的步骤 - 此时您的标签已从情节提要中实例化并准备好使用。

如果您在调用 viewDidLoad 之前设置属性，则预期标签为 nil。如果您从 prepareForSegue 设置属性，则视图还没有加载。视图控制器在需要在屏幕上显示它们之前不会加载它的视图和子视图，并且在执行 segue 之前不会发生这种情况 - 正如您可以猜到的那样，prepareForSegue 是在执行 segue 之前完成的。

# c# - 使用反射获取嵌套类型的容器类型

> ID：11724004
> 
> 赞同：31
> 
> 时间：2012-07-30T14:56:05.507
> 
> 标签：c#, .net, reflection

假设我有这样的课程：

```
public class Test {
    public class InnerTest{}
} 
```

现在有一个`TypeInfo`对象`InnerTest`。如何从 中找出`TypeInfo`Test 的对象`InnerTest`？

另一种方法很简单，我可以只使用`GetNestedTypes()`，但我找不到方法或属性（除了`IsNestedType`）来找出嵌套类的包含类。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-30T14:59:29.903

您可以通过检索属性“DeclaringType”来获得它。

引用 MSDN：

> 如果当前类型是嵌套类型，则表示封闭类型的 Type 对象；或泛型类型定义，如果当前类型是泛型类型的类型参数；或声明泛型方法的类型，如果当前类型是泛型方法的类型参数；否则为空。

[http://msdn.microsoft.com/en-us/library/system.type.declaringtype.aspx](http://msdn.microsoft.com/en-us/library/system.type.declaringtype.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T15:00:37.083

听起来你正在寻找[`Type.DeclaringType`](http://msdn.microsoft.com/en-us/library/system.type.declaringtype.aspx)财产。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-03T10:56:16.067

除了上述之外，我想补充一点，如果涉及泛型类型，它会变得有点复杂，因为泛型类型参数是在内部实例的 Type 上定义的，而不是在`DeclaringType`.

考虑这个类：

```
internal class WithGenericArg<T>
    {
        private T _data;

        public WithGenericArg(T data)
        {
            _data = data;
        }

        public class Internal
        {
            public int Foo()
            {
                return 0;
            }
        }

        public class Internal2<T2>
        {
            public T2? _data2;

            public Internal2(T2? data2)
            {
                _data2 = data2;
            }

            public T2? Foo2()
            {
                return _data2;
            }
        }
    } 
```

当查看其属性的类型时，`Inner`它的`IsGenericType`属性为 true 并`GetGenericArguments()`返回 1 个元素（以及`GenericTypeArguments`在类型关闭时返回 1 个元素）。这是外部（！）类的类型参数的类型参数（或具体类型）。

在查看类型时，`Inner2`甚至有 2 个类型参数，一个用于外部类，一个用于内部类。

# c++ - 异常类和调试细节

> ID：11724012
> 
> 赞同：1
> 
> 时间：2012-07-30T14:56:22.387
> 
> 标签：c++

我正在设计一个 C++ 异常类。

我打算添加以下内容

1>Debug flag(默认为false) 2>Debug Message

在开发、单元测试和调试期间，此调试标志将为真。因此，这将在日志文件（以及输出）中打印所有必要的详细信息。

这是一个好的设计还是我应该删除那些额外的代码（部署后永远不会使用）？

是否有任何标准或设计模式或模板可用于设计 c++ 异常类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:02:09.943

我会在生产和调试之间保持异常相同。我认为没有必要赋予它不同的功能，但那时您不会在调试版本中测试您的生产代码。

首先确保您的异常确实是异常。然后，如果在开发过程中发生这种情况，您只需打开调试器，看看发生了什么。当然，请确保该`what`方法提供了适量的信息，并在整个开发生命周期中保持不变。

正如另一个人指出的那样，继承自`std::exception`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:58:45.133

创建异常类的好主意是从[std::exception](http://www.cplusplus.com/reference/std/exception/exception/)派生它。

# design-patterns - 我如何描述实例或静态从属关系的概念？

> ID：11724013
> 
> 赞同：1
> 
> 时间：2012-07-30T14:56:20.877
> 
> 标签：design-patterns, static, instance, concept, conceptual

当我为采用类型 (.NET) 参数的方法编写文档时[`MethodAttributes`](http://msdn.microsoft.com/en-us/library/system.reflection.methodattributes.aspx)，我很难将成员的概念称为静态成员或实例成员。

是否有一个好的词或短语来命名静态/实例从属关系的概念而不写出来（就像我在这里所做的那样）？

编辑：
API 如下。它允许用户向我们称为可变类型的东西添加方法。非常类似于 Reflection.Emit 的[TypeBuilder.DefineMethod](http://msdn.microsoft.com/en-us/library/cbwdt101.aspx)方法。

```
public MutableMethodInfo AddMethod (
    string name,
    MethodAttributes attributes,
    Type returnType,
    IEnumerable<ParameterDeclaration> parameterDeclarations,
    Func<MethodBodyCreationContext, Expression> bodyProvider
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:42:34.670

我不相信有一个特定的词可以捕捉属于类或实例的方法的质量。首先，无论如何，不​​同的语言对这些事物使用非常不同的词。Java 和 C# 使用静态或不使用，C++ 也是如此。Objective-C 用“-”或“+”标记方法，但人们通常指的是类或实例方法。Javascript 当然没有真正的类，所以又不同了，等等。

你最好在代码中打赌 isStatic 或 isClassMethod 之类的东西。完全可读，应该毫不怀疑它的含义。在文档中，最好使用简写形式，即“类或实例方法”或“实例或静态方法”。

# sql-server - 在 SSMS 中隐藏 Report Services 作业

> ID：11724014
> 
> 赞同：6
> 
> 时间：2012-07-30T14:56:31.563
> 
> 标签：sql-server, reporting-services, sql-server-2008-r2, ssms

我有一个创建数百个作业的 Report Services 实例。这些作业采用串行格式（即 xxxxxx-xxx-xxxxx-xxxx-xxxx），并且在 SSMS 中的作业部分视图混乱。有没有办法隐藏这些工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T15:12:48.040

快速执行此操作的方法是编辑 SSMS 用于获取作业列表的底层过程，以忽略“报告服务器”创建的任何作业。

1.  右键单击并修改`msdb.dbo.sp_help_category`（系统存储过程）以调出过程代码。
2.  在第 19 行附近，`@where_clause`从更改`VARCHAR(500)`为`VARCHAR(MAX)`
3.  在第 96/97 行附近，您会注意到最后一条`EXECUTE`语句，就*在*此行之前添加以下内容：

> ```
> -- Ignore Reporting Services Jobs IN SSMS
> SET @where_clause += N'
> AND
> CASE
>   WHEN 
>       name = ''Report Server'' 
>       AND (
>           SELECT program_name 
>           FROM sys.sysprocesses 
>           where spid = @@spid) = ''Microsoft SQL Server Management Studio''  THEN 0
>   ELSE 1
> END = 1 ' 
> ```

有关更多信息，请参阅此答案所依据的原始文章：

[http://timlaqua.com/2012/01/hiding-ssrs-schedule-jobs-in-ssms/](http://timlaqua.com/2012/01/hiding-ssrs-schedule-jobs-in-ssms/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-06T14:53:20.650

我按照上述步骤操作，但在 sp_help_category 存储过程中添加了一个变量：

```
DECLARE @ShowSSRS BIT 
SELECT @ShowSSRS = ShowSSRS FROM ShowSSRS 
```

ShowSSRS 是我添加到 msdb 数据库中的一个表，它有一个位字段，也称为 ShowSSRS，它可以让我在真假之间切换。通常我将其设置为 false，因为我们有很多 SSRS 报告使列表变得混乱。当我需要对其中一个进行故障排除时，我将其设置为 true，然后刷新它们都会出现。我实际上有一个列出所有作业的 SSRS 报告，所以我知道哪个 GUID 是哪个作业的。

在第 96/97 行附近添加的代码中，我只是检查了变量：

```
IF @ShowSSRS = 0
      SET @where_clause += N'
        AND
        CASE
          WHEN 
              name = ''Report Server'' 
              AND (
                  SELECT program_name 
                  FROM sys.sysprocesses 
                  where spid = @@spid) = ''Microsoft SQL Server Management Studio''  THEN 0
          ELSE 1
        END = 1 ' 
```

# c++ - 在字符串中搜索一个单词，并返回与向量数量对应的数字。C++

> ID：11724018
> 
> 赞同：-3
> 
> 时间：2012-07-30T14:56:44.640
> 
> 标签：c++

有什么想法吗？
（完成）我想在我的字符串中搜索一个特定的词
（完成）如果找到那个词
（任何想法）我想输出向量的数量，它是其中的词。

我这里有这个字符串模块[MODULENO+1] = {"", "Maths", "Sciences", "French", "English"}; 我在这个字符串中搜索一个词..我找到那个词..我想要的是输出其中的向量的编号..假设我正在搜索英语..我找到那个词...现在我想要输出（（模块英语在向量 4 中））

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:57:42.873

我将此代码从接受的答案复制到您的其他问题：

```
bool checkValidTitle(string modules[], string word_to_check)
{
  for (int i = 1; i <= MODULENO; ++i)
    if (modules[i] == word_to_check)
       return true;
  return false;
} 
```

如果您想要数字索引而不是布尔值，请更改函数返回类型和`return`语句：

```
int getModuleNo(string modules[], string word_to_check)
{
  for (int i = 1; i <= MODULENO; ++i)
    if (modules[i] == word_to_check)
       return i;
  return -1; // some magic value to indicate "not found"
} 
```

使用此功能的一种可能方法是：

```
string word = "English";
int index = getModuleNo(modules, word);
std::cout << "Module " << word << " is number " << index << '\n'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:06:58.017

我想您应该使用*std::find*来查找元素，然后使用*std::distance*来计算元素的索引。

# objective-c - xcode 数组随机填充标签文本

> ID：11724019
> 
> 赞同：0
> 
> 时间：2012-07-30T14:56:45.617
> 
> 标签：objective-c, xcode, arrays, label

大家好！我对 xcode 和 Objective-c 很陌生，但我已经用 C# 编程很长时间了。我刚开始使用 Xcode，我的任务是制作一个应用程序，我迷路了！

我有 5 个 UILabel 和一个包含 5 个值的数组，我希望 UILabel 从数组中随机加载一个值，直到使用数组中的所有值。

我可以制作动态标签，但是让它们正确排列很痛苦，如果需要我会这样做，但我不确定如何使用objective-c（在C＃中很容易）来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:42:18.097

据我所知，你有一个数组，想要 5 个字符串，然后想在标签中随机显示？我认为你可以这样做：

```
-(void)fillLabel {

int random = arc4random() % 5; //random value from 0-4
yourLabel.text = [NSString stringWithFormat:@"%@",[yourArray objectAtIndex:random]];

} 
```

你可以用

> [自填标签];

如果你在同一个班。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:58:29.427

嘿，欢迎来到 SO，这是帮助您学习 XCode 和 Objective-C 的好地方。

有几种方法可以做到这一点，所以我只给你一个示例解决方案。

您实际上可以在您的 NIB(.xib) 文件中创建标签，然后将它们链接到代码中的变量，这样您就可以轻松访问它们而无需以编程方式创建它们。您执行此操作的方式如下：

```
ViewController.h

@interface ViewController : UIViewController
{
    //Some Variables
}

@property (nonatomic, strong) NSMutableArray *stringValues;

@property (nonatomic, strong) IBOutlet UILabel *randLabel1;
@property (nonatomic, strong) IBOutlet UILabel *randLabel2;
@property (nonatomic, strong) IBOutlet UILabel *randLabel3;
@property (nonatomic, strong) IBOutlet UILabel *randLabel4;
@property (nonatomic, strong) IBOutlet UILabel *randLabel5; 
```

这里的关键是标签被声明为 .h 文件中的 IBOutlets。这允许您然后进入您的 .xib 文件并将您定位的标签链接到代码中的变量。要链接标签，请按住控制键，然后将其拖到视图控制器并释放，您应该会看到一个列出 5 个标签的菜单，然后您可以选择适当的一个。

至于然后选择一个随机字符串加载到标签中，您可以通过以下方式进行。

```
ViewController.m 

-(void)selectLabelValue: 
{
    for(int i = 5; i > 0; i--)
    {
        randIdx = arc4random() % i;
        switch (i):
        case 1:
            Label1.text = [stringValue objectAtIndex:randIdx];
            [stringValue removeObjectAtIndex:randIdx];            
        case 2:
            Label2.text = [stringValue objectAtIndex:randIdx];
            [stringValue removeObjectAtIndex:randIdx];  
        case 3:
            Label3.text = [stringValue objectAtIndex:randIdx];
            [stringValue removeObjectAtIndex:randIdx];  
        case 4:
            Label4.text = [stringValue objectAtIndex:randIdx];
            [stringValue removeObjectAtIndex:randIdx];  
        case 5: 
            Label5.text = [stringValue objectAtIndex:randIdx];
            [stringValue removeObjectAtIndex:randIdx];  
        default:
            NSLog(@"Error, index out of bounds, there is no label for this value!";
} 
```

上面的想法是你遍历你的 5 个标签，当你这样做时，你随机生成一个索引来选择要加载的字符串。加载字符串后，将其从可能的字符串中删除，以免重复。我会仔细检查数组操作的函数名称，因为我是在脑海中完成的，所以我不是 100% 确定它们是正确的，但确实存在一些可以做他们应该做的事情。

无论如何，我希望对您有所帮助，如果您有任何问题，请发表评论，我会尽力回答。

**编辑：**以防万一有人略读并且没有阅读理查德的评论。他提出了一个有效的观点，即在上面使用 switch 语句是不好的设计，应该使用数组来处理，同时以编程方式创建标签。这样您就可以轻松地通过数组索引选择您想要的标签。**这是一种非常清洁的解决方案，并且比上述解决方案更可取。**使用开关完成的唯一原因是，您不必通过 user1221399 偏好的代码创建标签，因此请记住这一点。

# functional-programming - 自下而上 Hindley-Milner 类型推断：将替换应用于隐式约束

> ID：11724023
> 
> 赞同：3
> 
> 时间：2012-07-30T14:56:53.447
> 
> 标签：functional-programming, type-inference, unification, hindley-milner

我正在尝试实现“自下而上”类型推理算法，该算法可在[Generalizing Hindley-Milner Type Inference Algorithms中找到](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.18.9348)

第 6 页解释了隐式约束是如何产生的

> `t1`应该是类型方案的一个实例，它是通过`t2`关于单态类型变量集的类型泛化获得的`M`

然而，在第 9 页，在解释如何对隐式约束应用替换时，有人告诉我对这组单态类型变量应用替换。问题是，如果我有替换`[t1 := t2 -> t3]`，则`M`不再是一组类型变量。

我在这里有什么误解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T17:50:29.627

我与论文的作者取得了联系，当他们告诉我答案时，我确实有点自责：

替换函数具有以下形式`S : Substitution -> a -> a`，因此当将其应用于一组类型变量时，结果将是一组类型变量。

因此，当应用`[t1 := t2 -> t3]`而不是替换时，`t2 -> t3`我替换为`ftv(t2 -> t3)`aka `[t2, t3]`（其中`ftv`是获取类型中的自由类型变量的函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-29T17:39:44.600

如果一组单态类型变量被编码为一组单型（与裸变量名相反），那么第 9 页的 freevars(M) 中的 freevars 不需要（又一次）重载，同上替换的应用。

在这方面，SOLVE 的类型似乎有点不正确：在 activevars 的定义中，freevars 应用于 M，而在 SOLVE 中，freevars 不应用于 M（“freevars(t2) - M”），并且 M 不可能包含类型方案，即具有绑定变量。那么 M 是一组自由变量名称（无需在与其他 freevars(t) 进行集合操作之前应用 freevars）还是一组单型（需要应用 freevars）？

# c# - 无法将“ASP.Catalogue_aspx”类型的对象转换为“System.Web.UI.WebControls.LinkBut ton”类型

> ID：11724024
> 
> 赞同：0
> 
> 时间：2012-07-30T14:56:54.727
> 
> 标签：c#, asp.net, sql

我正在从数据库中检索我的 toyName 并希望将其会话到下一页。我的会话没有任何问题，但我有这个错误，如下所示，我不确定我哪里出错了。我的 .aspx 页面中有 2 个链接按钮，这个有错误的链接按钮是我创建的第二个链接按钮。

错误信息：

```
Unable to cast object of type 'ASP.Catalogue_aspx' to type 'System.Web.UI.WebControls.LinkButton'. 
```

源错误：

```
Line 13:     protected void Page_Load(object sender, EventArgs e)
Line 14:     {
Line 15:         LinkButton LinkButton = (LinkButton)sender;
Line 16:         int toyID = Convert.ToInt32(LinkButton.CommandName);
Line 17: 
```

这是我的 page_load .cs 代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    LinkButton LinkButton = (LinkButton)sender;
    int toyID = Convert.ToInt32(LinkButton.CommandName);

    string strConnectionStr = ConfigurationManager.ConnectionStrings["ASPNETConnectionString"].ConnectionString;
    string sql = "SELECT toyID, toyName FROM Toys WHERE toyID=@toyID";

    SqlConnection myConnect = new SqlConnection(strConnectionStr);
    myConnect.Open();
    SqlCommand command = new SqlCommand(sql, myConnect);
    command.Parameters.AddWithValue("@toyID", toyID);

    SqlDataReader dr = command.ExecuteReader();

    while (dr.Read())
    {
        Label1.Text = dr["toyName"].ToString();
    }

    dr.Close();
    myConnect.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:57:46.277

这是完全错误的。

`sender`for是页面，而`Page_Load`不是`LinkButton`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:07:29.613

您不能将页面转换为链接按钮..这永远不会起作用。当您在页面加载中投射发件人时，您在技术上投射页面

如果你想使用会话，你需要把

```
session["something"]= what ever you are trying to save 
```

然后检索它

```
var myVariable = session["something"] (maybe cast this as something) 
```

除此之外，我不确定您要做什么

# jquery - jQuery UI 可拖动但有限制

> ID：11724026
> 
> 赞同：1
> 
> 时间：2012-07-30T14:57:02.107
> 
> 标签：jquery, user-interface, draggable

我正在尝试使用 jquery ui 创建可拖动滑动门的效果。HTML是：

```
<div id ="home-elev-door" class="elev-door-wrap">           
        <div class="elev-door"></div>
</div> 
```

我目前拥有的代码是这样的：

```
var elevWrap = $('.elev-door-wrap')

$(function() {
    $( ".elev-door" ).draggable({
        cursor: 'pointer',
        axis: 'x',
        drag : function(event, ui) { ui.position.left = onDragElev(ui.position.left); },
        });
});

function onDragElev(left){
    if ( left > 0 ) { left = 0; }
    else if ( (elevWrap.width()+left) < 27 ) { left = 27-elevWrap.width(); }
    return left;
} 
```

这基本上是使我能够向左和向后滑动门，并设置 27px 的限制，以限制它在父 div 内的可拖动距离。但是，我想要做的是扭转这一点，以便限制仅在右侧。我尝试将“左”的所有实例更改为“右”，但这似乎不起作用。相反，它会直接拖出两侧的父 div。

对此的任何帮助将不胜感激。提前谢谢了。

更新：我有一个 js fiddle 链接来帮助说明我的意思。希望它有所帮助。 [http://jsfiddle.net/metallikat79/RCGDH/](http://jsfiddle.net/metallikat79/RCGDH/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:37:44.527

猜出来了。所需要的只是一行代码用于包含并传递一组坐标作为限制，即；

```
containment: [0, 0, 200, 0] 
```

这是我在 JS Fiddle 上更新的工作示例的链接：http: [//jsfiddle.net/metallikat79/RCGDH/2/](http://jsfiddle.net/metallikat79/RCGDH/2/)

# authorization - 使用 imageresizer 自定义图像动态授权

> ID：11724028
> 
> 赞同：0
> 
> 时间：2012-07-30T14:57:03.783
> 
> 标签：authorization, asp.net-mvc-4, imageresizer

我正在尝试 ImageResizer 并正在寻找一种基于角色、组等动态授权用户访问图像（和其他文件）的好方法，从而限制图像访问。我读到 ImageResizer 支持 Url 授权，但不确定到什么程度（只有当我实现它时才会遵循或有帮助者）。最好是可以与他们的磁盘缓存模块一起使用的灵魂。看到了一些关于实现自定义 url 授权的通用信息，但不确定它是否只是为图像路径设置授权的问题，就像任何其他资源一样，然后让 imageresizer 对抗它。或者，如果某些逻辑应该连接到 imageresizer。在这里找到了一些关于 url 授权的信息，但我想我不是第一个实施这种组合的人？

我看到的最佳设置将是一个限制，如果身份验证未授予访问权限，则没有文件（拇指、图像、缓存图像或其他）在线可用。

因此，寻找更多关于这个健全和体面安全的实现的信息/细节，也许这个示例实现/代码存在于我还没有找到的某个地方？

**编辑：**计算机语言学家链接给了我很多我想要的东西。不过有两件事让我印象深刻。1.是否有任何最佳实践来重新定义事件处理程序中的内容，或者我可以为此特定目的构建服务并在处理程序中使用它？2\. 由于这将针对每个图像触发，我想避免直接进行 dbcall 进行权限检查（即尝试为相应用户缓存权限的方法）？或者这对实际的影响通常很小以至于没关系？考虑到这一点，User.IsInRole 是否不会直接调用 dbcall 来确定成员资格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:14:42.353

你想太多了。

ImageResizer 对源文件、结果和缓存图像应用相同的安全性。

它遵循 URL 授权规则，但允许您通过`Config.Current.Pipeline.AuthorizeImage`事件完全控制所有图像授权。

处理该事件，您就可以访问所有可以想象的请求数据，并且您可以设置事件 AllowAccess 变量以根据您想要的任何逻辑允许或拒绝请求。此事件发生在所有 URL 重写发生后，因此*如果*您的规则基于物理文件路径而不是可见路径，这是进行授权的最准确位置。

此外，您所做的任何通用 AuthorizeRequest 级别的工作都将受到 ImageResizer 的尊重，因为它在 PostAuthorizeRequest 之前不会激活。

ImageResizer 事件：http: [//imageresizing.net/docs/events](http://imageresizing.net/docs/events)

# sql-server - 从不同的表中删除具有约束的多个列

> ID：11724037
> 
> 赞同：1
> 
> 时间：2012-07-30T14:57:34.017
> 
> 标签：sql-server, tsql

我正在尝试使用 T-SQL 从不同的表中删除不同的列。

我按照我在 SO 上找到的一些提示制作了这段代码

```
/* Declaration of variable */
declare @tablename nvarchar(200)
declare @colname nvarchar(200)
declare @default sysname, @sql nvarchar(max)

/* **** Modifications in TITULORECEBERFATURA_ITEMS**** */
/* Drop column NRSEQORDEM */
set @tablename = 'TITULORECEBERFATURA_ITEMS'
set @colname = 'NRSEQORDEM'

select @default = CONSTRAINT_NAME
FROM 
   INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE 
WHERE 
   TABLE_NAME = @tablename 
   AND COLUMN_NAME = @colname

   set @sql = N'alter table ' + @tablename + ' drop constraint ' + @default
exec sp_executesql @sql

set @sql = N'alter table ' + @tablename + ' drop column ' + @colname
exec sp_executesql @sql 
```

上面的代码没有任何问题。但是当我在它下面添加其他代码时，会发生错误。

```
/* Declaration of variable */
declare @tablename nvarchar(200)
declare @colname nvarchar(200)
declare @default sysname, @sql nvarchar(max)

/* **** Modifications in TITULORECEBERFATURA_ITEMS**** */
/* Drop column NRSEQORDEM */
set @tablename = 'TITULORECEBERFATURA_ITEMS'
set @colname = 'NRSEQORDEM

select @default = CONSTRAINT_NAME
FROM 
   INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE 
WHERE 
   TABLE_NAME = @tablename 
   AND COLUMN_NAME = @colname

   set @sql = N'alter table ' + @tablename + ' drop constraint ' + @default
exec sp_executesql @sql

set @sql = N'alter table ' + @tablename + ' drop column ' + @colname
exec sp_executesql @sql

/* **** Modifications in EMAILCONTAS **** */
/* Drop column NRSEQOPERADORA */
set @tablename = 'EMAILCONTAS'
set @colname = 'NRSEQOPERADORA'

select @default = CONSTRAINT_NAME
FROM 
   INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE 
WHERE 
   TABLE_NAME = @tablename 
   AND COLUMN_NAME = @colname

   set @sql = N'alter table ' + @tablename + ' drop constraint ' + @default
exec sp_executesql @sql

set @sql = N'alter table ' + @tablename + ' drop column ' + @colname
exec sp_executesql @sql 
```

和他的`NRSEQORDEM`约束被删除没有问题，但是我在`NRSEQOPERADORA`和他的约束列中遇到了这个错误

> 消息 5074，级别 16，状态 1，第 1 行
> 对象“FK_ *EMAILCONT* _NRSEQ__25276EE5”依赖于列“NRSEQOPERADORA”。
> 消息 4922，级别 16，状态 9，第 1 行
> ALTER TABLE DROP COLUMN NRSEQOPERADORA 失败，因为一个或多个对象访问此列。

并且列`NRSEQOPERADORA`不会下降。

**如果我为每个**声明使用不同的名称，我可以做到（但不仅有 2 个，而且有很多，而且做得不好，我正在寻找一种“正确”的方式来做到这一点）

```
/* Declaration of variable */
    declare @tablename nvarchar(200)
    declare @colname nvarchar(200)
    declare @tablename2 nvarchar(200)
    declare @colname2 nvarchar(200)
    declare @default sysname, @sql nvarchar(max)

    /* **** Modifications in TITULORECEBERFATURA_ITEMS**** */
    /* Drop column NRSEQORDEM */
    set @tablename = 'TITULORECEBERFATURA_ITEMS'
    set @colname = 'NRSEQORDEM

    select @default = CONSTRAINT_NAME
    FROM 
       INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE 
    WHERE 
       TABLE_NAME = @tablename 
       AND COLUMN_NAME = @colname

       set @sql = N'alter table ' + @tablename + ' drop constraint ' + @default
    exec sp_executesql @sql

    set @sql = N'alter table ' + @tablename + ' drop column ' + @colname
    exec sp_executesql @sql

    /* **** Modifications in EMAILCONTAS **** */
    /* Drop column NRSEQOPERADORA */
    set @tablename2 = 'EMAILCONTAS'
    set @colname2 = 'NRSEQOPERADORA'

    select @default = CONSTRAINT_NAME
    FROM 
       INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE 
    WHERE 
       TABLE_NAME = @tablename2 
       AND COLUMN_NAME = @colname2

       set @sql = N'alter table ' + @tablename2 + ' drop constraint ' + @default
    exec sp_executesql @sql

    set @sql = N'alter table ' + @tablename2 + ' drop column ' + @colname2
    exec sp_executesql @sql 
```

* * *

**编辑：**

1.  代码**有效**约束被删除，列被删除。（见第一个代码示例）
2.  如果我放置一个跟随脚本，使用一**组**不同的表和列但使用相同的声明名称（@tablename、@colname、@default），代码的第一部分**将**删除约束和列而没有任何问题，但是第二个脚本将显示一条错误消息（请参阅错误引用和第二个代码示例）
3.  我需要能够同时做不止一次。我不能一次运行一个查询，我正在编写一个脚本来一次执行它们。但是声明部分让事情变得更难了。如果我为每个查询使用不同的声明，它会起作用；但我认为这不是正确的做法。这就是为什么我想知道，我怎么能做到这一点？还是除了变通方法**没有别的**办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:00:16.933

可能您首先需要删除约束 FK_ *EMAILCONT* _NRSEQ__25276EE5 尝试

```
alter table ... drop constraint FK__EMAILCONT__NRSEQ__25276EE5 
```

# perl - 使用 Perl 的 LWP 时，是否可以根据“Content-Type”中止 HTTP 请求？

> ID：11724041
> 
> 赞同：4
> 
> 时间：2012-07-30T14:57:47.053
> 
> 标签：perl, http, lwp

我希望我的脚本只下载文本/html 内容，而不是下载可能需要更多时间的二进制文件或图像。我知道[max_size](http://search.cpan.org/~gaas/libwww-perl-6.04/lib/LWP/UserAgent.pm)参数，但我想在`Content-Type`标题上添加一个检查。这是可行的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:27:27.777

正如其他人指出的那样，您可以在`HEAD`请求之前执行`GET`请求。您应该这样做是为了对服务器有礼貌，因为您实际上很容易中止连接，但对于 Web 服务器来说，中止发送一堆数据并在其末端做一堆工作并不一定容易.

根据您想要的复杂程度，有一些不同的方法可以做到这一点。

1.  您可以在您的请求中发送一个`Accept`标头，其中仅列出`text/html`. `406 Not Acceptable`如果您说您不接受文件的任何内容，那么一个实施良好的 HTTP 服务器将返回一个状态。当然，无论如何，他们可能会将其发送给您。您也可以根据自己的`HEAD`要求执行此操作。

2.  使用最新版本的[LWP::UserAgent](http://metacpan.org/module/LWP::UserAgent)时，您可以使用处理程序子例程在标头之后和内容正文之前中止请求的其余部分。

    ```
    use LWP::UserAgent;
    use Try::Tiny; 

    my $ua = LWP::UserAgent->new;
    $ua->add_handler( response_header => sub {
        my($response, $ua, $h) = @_;

        die "Not HTML" unless $response->content_type eq 'text/html';
    });

    my $url = "http://example.com/foo";

    my $html;
    my $head_response = $ua->head($url, Accept => "text/html");
    if ($head_response->is_success) {
        my $get_response = $ua->get($url, Accept => "text/html");
        if ($get_response->is_success) {
            $html = $get_response->content;
        }
    } 
    ```

有关处理程序的详细信息，请参阅 LWP::UserAgent 文档的[处理程序](https://metacpan.org/module/LWP::UserAgent#Handlers)部分。

我没有发现抛出的异常或确保在这里仔细处理 406 响应。我把它留给读者作为练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:01:10.083

您可以使用 HEAD 请求来查询 URI 的标头信息。如果服务器响应头部，你将得到 GET 将返回的所有内容，除了那个讨厌的身体。

然后，您可以根据 MIME 类型决定要做什么。

否则，在请求之前，您必须依赖文件的扩展名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:07:49.787

如果您使用的是最小子`LWP::Simple`类，`LWP`则该`head`函数将内容类型作为列表的第一个元素返回。

所以你可以写

```
use strict;
use warnings;

use LWP::Simple;

for my $url ('http://www.bbc.co.uk') {
  my ($ctype) = head $url;
  my $content = get $url if $ctype eq 'text/html';
} 
```

# css - 仅当为一个元素设置了 2 个类时才应用 CSS 规则

> ID：11724043
> 
> 赞同：6
> 
> 时间：2012-07-30T14:58:05.223
> 
> 标签：css, css-selectors

> **可能重复：**
> [仅当存在 2 个类时，您能否使用 CSS 定位元素？](https://stackoverflow.com/questions/640996/can-you-target-an-element-with-css-only-if-2-classes-are-present)
> [适用于具有两个类的元素的 CSS 选择器](https://stackoverflow.com/questions/3772290/css-selector-that-applies-to-elements-with-two-classes)

只有在应用了 2 个类的情况下，有没有办法将 CSS 样式应用于元素？

例如，将我的自定义样式应用于此：

```
<div class="one two">Text</div> 
```

但不是这些：

```
<div class="one">Text</div>
<div class="two">Text</div> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T14:59:35.827

当然：

```
.one.two { border: 1px red solid } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:00:35.410

尝试在 css 选择器中使用`.one.two`

# sql - 根据另一个表中的条件选择表中的记录

> ID：11724051
> 
> 赞同：0
> 
> 时间：2012-07-30T14:58:38.800
> 
> 标签：sql, ruby-on-rails-3, postgresql, join, scope

在我正在处理的 Rails 应用程序中，我有以下设置：

```
class Volunteer < AR::Base
  has_many :engagements
end

class Engagement < AR::Base
  belongs_to :volunteer
end 
```

我正在尝试选择所有未在特定日期或日期范围之间参与的志愿者：

```
scope :not_engaged_on, lambda { |q| joins(:engagements).where(["engagements.date != ?", q])}

scope :not_engaged_between, lambda { |s, e| joins(:engagements).where(["engagements.date NOT BETWEEN ? AND ?", s, e]) } 
```

我将这些范围与其他范围合并以过滤志愿者。

上述范围`:not_engaged_between`产生以下 SQL：

```
SELECT "volunteers".* FROM "volunteers" INNER JOIN "accounts" ON "accounts"."user_id" = "volunteers"."id" AND "accounts"."user_type" = 'Volunteer' INNER JOIN "engagements" ON "engagements"."volunteer_id" = "volunteers"."id" WHERE (accounts.activation_state = 'active') AND (engagements.date NOT BETWEEN '2012-07-30' AND '2012-08-04') 
```

问题是志愿者可能到目前为止还没有任何参与，在这种情况下，查询完全忽略了这些志愿者。即使他们没有任何参与，我如何才能让所有志愿者返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:38:38.537

@Anthony 已经提到过`NOT EXISTS`。另一个选项是[`LEFT [OUTER] JOIN`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)+ 检查是否存在 ( `e.volunteer_id IS NULL`)：

```
 SELECT v.*
FROM   volunteers       v
JOIN   accounts         a ON a.user_id = v.id
**LEFT  JOIN engagements e ON e.volunteer_id = v.id
                        AND e.date BETWEEN '2012-07-30' AND '2012-08-04'**
WHERE  a.user_type = 'Volunteer'
AND    a.activation_state = 'active'
**AND   e.volunteer_id IS NULL**; 
```

在这种情况下，您必须将条件移动`e.date BETWEEN '2012-07-30' AND '2012-08-04'`到连接子句。

如果它也可能丢失，请使用另一个`LEFT JOIN`for 。`accounts`但是您似乎确实想检查`user_type`and `activation_state`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:09:13.787

你需要一个`not exists`来做到这一点。这种语法对 SQL 来说有点重，也许有更好的 arel 方法来做到这一点。

```
scope :not_engaged_on, lambda { |q| where(["NOT EXISTS (SELECT ID from engagements WHERE engagements.date = ? AND volunteer_id = volunteers.id)", q])}

scope :not_engaged_between, lambda { |s, e| where(["NOT EXISTS (SELECT ID from engagements WHERE engagements.date BETWEEN ? AND ? AND volunteer_id = volunteers.id)", s, e]) } 
```

# nhibernate - 休眠查询结束

> ID：11724054
> 
> 赞同：4
> 
> 时间：2012-07-30T14:58:46.133
> 
> 标签：nhibernate, queryover

我试图用这样的代码从我的表中只选择一些字段

```
IList<Product> res = sess.QueryOver<Product>()            
             .Select(x =>x.name)           
             .List<Product>(); 
```

此代码没有错误，但在运行时我得到了这个：“无法执行查找 [SQL：SQL 不可用]”值“Prod1 不是 SympleFlhLINQ.Product 类型，并且不能用于此通用集合”。

如果有人告诉我如何仅获取产品名称和引用的类别名称宽度这样的东西，那就太好了

```
 IList<Product> res = sess.QueryOver<Product>() 
                .Select(x =>x.name)
                .Select(x=>x.Cat.CategoryName)
                .List<Product>(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T12:44:14.413

```
IList<string> names = sess.QueryOver<Product>()            
         .Select(x =>x.Name)
         .List<string>(); 
```

或者

```
ProductDto product = null;
Category category = null;
IList<ProductDto> res = sess.QueryOver<Product>()
    .JoinAlias(x => x.Category, () => category)
    .SelectList(list => list
        .Select(x => x.Name).WithAlias(() => product.Name)
        .Select(() => category.Name).WithAlias(() => product.CategoryName))
    .TransformUsing(Transformers.AliasToBean<ProductDto>())
    .List<ProductDto>(); 
```

# mysql - 在 Mysql 中使用表别名删除

> ID：11724055
> 
> 赞同：0
> 
> 时间：2012-07-30T14:58:47.370
> 
> 标签：mysql, innodb

我正在尝试删除 mysql 5.1 表中的重复行

查询是

```
delete from sessions o where exists (select * from sessions i where i.data=o.data and i.id<>o.id); 
```

但它似乎不起作用，我读到在 mysql 中使用表别名来删除语句是不可能的，但是这是如何工作的：[删除记录](https://stackoverflow.com/questions/6517664/deleting-records)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:39:57.923

试试这个查询 -

```
DELETE t1 FROM sessions t1
  JOIN (SELECT data, MIN(id) id FROM sessions GROUP BY data) t2
    ON t1.id <> t2.id AND t1.data = t2.data; 
```

# c#-4.0 - 如何将类的属性转换为参数？

> ID：11724058
> 
> 赞同：4
> 
> 时间：2012-07-30T14:59:00.967
> 
> 标签：c#-4.0, dynamics-crm-2011

## 背景

我正在使用 Microsoft Dynamics CRM 2011 QueryExpressions，对于所有非 CRM 人员，我只知道我正在使用 SDK 来访问一个数据库，该数据库需要您输入您选择的列的字符串名称在自定义 ColumnSet 类中：

```
new ColumnSet("personid", "name", "age"); 
```

SDK 确实生成了早期绑定类，所以我确实有所有数据库表的类，并且早期绑定类都有一个字典，其键是已在对象上填充的表的列。IE：

```
var p = new Person { Name = "John", Age = 39, SSN = null };
p.Attributes.Count == 3;
// p.Attributes.Keys == { "name", "age", "ssn" }; 
```

## 问题

填充 ColumnSet 时遇到三个问题

1.  我忘记了类/表包含哪些列
2.  我用手指填充了一些列，直到运行时才出现错误
3.  实例化 ColumnSet 时，列名称都必须小写，这会导致可读性差，即`thissillyexampleisntthatreadable`vs`ThisSillyExampleIsntThatReadable`

所有这三个问题都可以通过早期绑定来解决。

我知道我可以为每个包含类的所有列的类创建一个枚举或结构，即：new ColumnSet(PersonColumns.PersonId, PersonColumns.Name, PersonColumns.Age)，但我希望它使用已经生成的类.

## 我最好的尝试

我目前能想到的最好的是：

```
ColumnSetFactory.Create<Person>(p => p.PersonId = null, p.Name = null, p.Age = null); 
```

Create 接受 T 类型的对象（本例中为 person），然后检查对象的字典以生成并返回 ColumnSet。

## 目标

有一个利用早期绑定类生成 ColumnSet 的通用函数：

```
ColumnSetFactory.Create<Person>(p => p.PersonId, p.Name, p.Age); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:45:37.767

不幸的是，您的尝试/目标语法在 C# 中不起作用，但您可能会得到一些接近它的东西。

我不熟悉动态 crm，所以我做出这个假设，构造函数`ColumnSet`接受可变数量的字符串参数并具有签名：

```
public ColumnSet(params string[] arguments) 
```

* * *

您可以创建一个返回对象初始值设定项（以创建匿名对象）的 lambda 表达式，并使用一些反射来使用初始值设定项的成员绑定调用构造函数。如果我了解您要完成的工作，您希望使用对象的现有参数名称实质上将这些名称传递给此构造函数以创建对象。

您可以这样做：

```
public static ColumnSet Create<T>(Expression<Func<T, object>> parameters)
{
    var initializer = parameters.Body as NewExpression;
    if (initializer == null || initializer.Members == null)
        throw new ArgumentException("lambda must return an object initializer");
    var memberNames = initializer.Members
        .Select(member => member.Name.ToLower())
        .ToArray();
    var ctor = typeof(ColumnSet).GetConstructor(new Type[] { typeof(string[]) });
    return (ColumnSet)ctor.Invoke(new object[] { memberNames });
} 
```

然后使用它，这样调用它：

```
ColumnSetFactory.Create<Person>(p => new { p.PersonId, p.Name, p.Age });

// Personally I prefer to call it like this to let the compiler
// infer the generic arguments
ColumnSetFactory.Create((Person p) => new { p.PersonId, p.Name, p.Age }); 
```

这将生成对构造函数的等效调用：

```
new ColumnSet("personid", "name", "age"); 
```

您甚至可以组成列名并给它们随机值，这些值本身不会被使用，只是成员的名称。

```
ColumnSetFactory.Create<Person>(p => new
{
    p.PersonId,
    p.Name,
    p.Age,
    Foobar = 0,
    Boo = "rawr!!!",
}); 
```

这将生成对构造函数的等效调用：

```
new ColumnSet("personid", "name", "age", "foobar", "boo"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:52:35.207

这里有几个活动部分。

首先，使用 C#，您需要具有后期绑定执行的早期绑定项目，不幸的是，您无法以您想要的方式到达那里。早期绑定在编译时间之前构建一个类。

因此，一种选择是为您想要的少数实体创建自己的简化早期绑定创建（或使用 Microsoft 早期绑定的东西）

另一种选择是使用字典 - 但这可能会更乏味并且只处理问题#3。

我知道这不是您要寻找的答案，但我会退后一步，看看使用 Fetch。

使用 stunnware 之类的工具，您可以轻松创建获取查询并对其进行测试，以便获得所需的结果。

然后只需创建一个通用函数来执行 fetch 以返回一个 IList>。这样，您可以轻松地根据您在 fetch 中指定的属性引用字段。（照顾问题＃1和＃2）

# c# - 如何序列化具有空值的数据集，所有元素都具有 xsisnil？

> ID：11724060
> 
> 赞同：1
> 
> 时间：2012-07-30T14:59:01.827
> 
> 标签：c#, xml, serialization, null, dataset

我正在使用需要将数据库中的数据与 XML 文件中的数据进行比较的应用程序。问题是当它比较时，当 XML 文件中缺少的元素被视为空字符串并因此与数据库中的数据不正确匹配时，会出现故障。

应用程序本身会创建 XML 文件，所以我可以控制它。我想做的是为 XML 文件中的所有元素设置默认值，以便稍后将该 XML 文件读入数据集时，将 XML 文件中缺少的元素转换为 NULL。

源数据是一个数据集——数据可能来自不同数据库中的不同表或视图。对于此类问题，我能找到的唯一解决方案是`[XmlElement("object1"), DefaultValue(NULL)]`在设置类时使用类似于对象之前的东西。当不同源表的表中的列不同时，如何为数据集实现这一点？

以下是对 XML 文件进行序列化的当前代码：

```
 TextWriter tw = new StreamWriter(fileNameAndPath);
            XmlSerializer xs = new XmlSerializer(typeof(DataCopy));
            xs.Serialize(tw, DataCopyLog1); 
```

这是 DataCopy 的类定义：

```
public class DataCopy
{
    public DateTime LastCopy { get; set; }
    public DataSet Data { get; set; }

    public DataCopy() 
    {
        Data = new DataSet();
        LastCopy = DateTime.Now;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:48:19.617

由于没有人发表评论，我想我会留下如何解决这个问题：事实并非如此。我找不到将空值正确放入 XML 并在加载到 DataTable 时作为空值读回的方法；每次它都会作为空字符串加载。

相反，潜在的问题以不同的方式受到攻击。该项目现在需要它正在使用的表上的主键，因此如果它是新行、已删除行等，则在比较的实际数据中没有空值。

# iphone - 如何在 UIView 中为按钮添加 TouchUpInside

> ID：11724061
> 
> 赞同：0
> 
> 时间：2012-07-30T14:59:04.773
> 
> 标签：iphone, objective-c, xcode, ipad

我有以下内容：

```
- View
  Image View
  Image View
  - Second View
    Image View
    Image View
    MY BUTTON 
```

当我进入界面生成器并尝试将“我的按钮”的 TouchUpInside 添加到“第二视图”时，它不允许我这样做。我只能将它添加到第一个视图。

“第二视图”是 UIView 的子类，所以我在 Interface Builder 中选择了我的类，但它不会让我创建它。

任何有助于理解这一点的帮助将不胜感激。

我希望我解释得很好，如果这是一个愚蠢的问题，对不起！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:32:32.833

我已经完成并为您上传了一张图片。指定第二个视图类，然后右键单击第二个视图，它将在 SecondView 中显示 IBAction，然后连接它。
这里蓝色视图是 SecondView 类的第二个视图。

![在此处输入图像描述](../Images/4d5c1819ddcbc84386d9114078ff757a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:54:17.510

您想通过 xib 文件选择一个 Button..rounded rect 或 custom。并在头文件中声明

```
IBOUTLet UIbutton * btn; 
```

然后行动声明一个方法...

```
-(IBAction)btnaction{
    //write your code
} 
```

然后在 nib 文件中连接。

# javascript - 为什么我的场景没有渲染？

> ID：11724063
> 
> 赞同：0
> 
> 时间：2012-07-30T14:59:25.123
> 
> 标签：javascript, coffeescript, three.js

我正在尝试在 CoffeeScript中重新实现[这个示例。](http://gdd11-webgl.appspot.com/#19)我的代码如下所示：

```
class Example
    width: 640
    height: 480

    constructor: ->
        @camera = new THREE.PerspectiveCamera 45, @width/@height, 10000
        @camera.position.z = 300

        @scene = new THREE.Scene
        cube = new THREE.Mesh(new THREE.CubeGeometry(50,50,50), new THREE.MeshBasicMaterial ({color: 0x000000}))

        @scene.add cube

        @renderer = new THREE.WebGLRenderer { antialias: true }
        @renderer.setSize @width, @height
        @renderer.setClearColorHex 0xEEEEEE, 1.0
        @renderer.clear()

        @element = $(@renderer.domElement).appendTo $('div#display')

        @renderer.render(@scene, @camera) 
```

但是，这仅显示灰色背景，而不是 Chrome 和 Firefox 中的立方体。在 Chrome 中，这个灰色背景在加载时也会闪烁一次。怎么了？

上下文：这是使用实例变量包含在其自己的类中的，因为稍后将对其进行扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:10:43.390

您的近平面似乎在 10000 的距离处。更改为以下内容：

```
@camera = new THREE.PerspectiveCamera 45, @width/@height, 1, 10000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:07:07.917

```
@camera = new THREE.PerspectiveCamera 45, @width/@height, 1, 10000 
```

# android - 如何从视图中释放背景

> ID：11724064
> 
> 赞同：0
> 
> 时间：2012-07-30T14:59:25.513
> 
> 标签：android, android-layout

我在活动中遇到 OOM 错误问题。我有一个使用两个图像视图和大约 5 或 6 个按钮的布局。目前，我收到 OOM 错误，但注意到这些方法的改进。我使用这种方法在主屏幕中设置我的布局：

```
private void createButtons() 
{
    bitmaps = new ArrayList<Bitmap>();

    ImageView img = (ImageView)findViewById(R.id.homescreen_logo);
    Bitmap bmp = (Bitmap)BitmapFactory.decodeResource(getResources(), R.drawable.homescreen_logo);
    img.setImageBitmap(bmp);
    bitmaps.add(bmp);

    ImageView imge = (ImageView)findViewById(R.id.countdown_labels);
    Bitmap bitmp = (Bitmap)BitmapFactory.decodeResource(getResources(), R.drawable.homescreen_countdown_text);
    imge.setImageBitmap(bitmp);
    bitmaps.add(bitmp);
} 
```

然后，在 onPause 方法中我调用这个方法：

```
private void recycleHomescreenImages() {
    for (Bitmap bmap : bitmaps) {
        bmap.recycle();
    }
    bitmaps = null;
} 
```

虽然这确实在退出主屏幕活动时降低了我的堆使用量，但这还不够。由于我使用的其他视图不是 ImageViews，因此我不能采用仅使用 setImageBitmap() 方法的相同策略。关于如何强制为按钮收集背景的任何建议？这是我的一个按钮在 xml 中的样子。

```
<Button
  android:id="@+id/1_button"
  android:layout_width="294dp"
  android:layout_height="60dp"
  android:layout_alignParentTop="true"
  android:layout_centerHorizontal="true"
  android:layout_marginTop="33dp"
  android:background="@drawable/homescreen_button_1"
  android:onClick="onClick1"/> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:14:05.247

我会建议延迟加载这些`Bitmap`和`Drawable`对象，例如尽可能晚地按需加载。此外，当您不再需要它们时，将对它们`Bitmap`和`Drawable`对象的引用设置为 null，并确保您没有对这些`Bitmap`s 和`Drawable`s 的其他引用，以使它们有资格进行垃圾回收。请注意，您无法知道垃圾收集器何时启动，因此您可以这样做以节省内存。希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:27:56.783

实际上，我可以通过将[此处](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)的答案修改为如下所示来使其正常工作：

```
private void unbindDrawables(View view) {
    if (view.getBackground() != null) {
    view.getBackground().setCallback(null);
    view.setBackgroundDrawable(null);
    }
    if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
        unbindDrawables(((ViewGroup) view).getChildAt(i));
        }
    ((ViewGroup) view).removeAllViews();
    }
} 
```

编辑：谎言，我有时仍然会得到OOM。

# algorithm - 平铺不同大小的矩形

> ID：11724066
> 
> 赞同：7
> 
> 时间：2012-07-30T14:59:30.723
> 
> 标签：algorithm, optimization, tiling

我正在寻找一些指向算法的指针，这些算法应该允许平铺不重叠不同大小的矩形。

给定一组不同大小的矩形，将它们平铺在大小为 H x W 的区域上，不重叠。目标是最大化使用的空间或相反 - 最小化间隙面积。如果没有足够的空间，继续第二个相同大小的区域，依此类推。

假设每个矩形的宽度和高度都小于平铺区域的相应尺寸。矩形不会旋转或以其他方式变换 - 即它们的边是水平的或垂直的。

我不是在寻找完成的代码，只是好奇什么方法/算法最适合用来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:30:08.647

最简单的是使用 kd-tree 将树细分为垂直和水平 euklidian 2d 空间。然后您可以将一个矩形打包到其中一个创建的空间中并递归地细分树。在线提供了一个 Jquery treemap 插件示例。jquery plugin masonry 可以做同样的事情，但它更像是一个 1d bin-packing 求解器。二维装箱要复杂得多，也可能意味着旋转矩形。这是打包光照贴图的示例：http: [//www.blackpawn.com/texts/lightmaps/default.html](http://www.blackpawn.com/texts/lightmaps/default.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:39:21.097

我有一个想法可以朝着正确的方向发展。这个想法是在边界框中跟踪平铺区域与白色区域的比率。

输入：输入矩形的无序集输出：填充区域

1.  定义空边界框
2.  从边界框 B 包含最小空白区域比率的输入集中选择这两个矩形 A_i 和 B_j
3.  用两个最优框更新边界框
4.  将边界框放在一个角落里，比如 (1,1)
5.  重复直到没有盒子
    1.  从集合中取出一个新框，例如更新的边界框具有最小空白
    2.  如果边界框的宽度或高度超过输出区域的宽度或高度，则限制在水平或垂直方向增长
    3.  如果无法添加新框，则继续使用新区域 H x W 并重新启动算法，否则更新边界框

还有一些要点需要定义——如何最好地确定边界框的位置？如何施加边界框增长限制？如何有效地找到最佳边界框？

# c# - Excel.Range.Find 使用超过 255 个字符的字符串

> ID：11724067
> 
> 赞同：2
> 
> 时间：2012-07-30T14:59:31.873
> 
> 标签：c#, excel

我在 Excel 中存储每个包含 1023 个字符的字符串。稍后，我需要能够搜索 excel 文件并找到值所在的行。我可以保证我要查找的字符串恰好出现在工作簿的某个位置。

目前，每次尝试搜索时都会出现类型不匹配错误（由于 find 函数的长度限制为 255）。当我用“teststring”之类的短字符串替换我的搜索字符串时，它可以正常工作。如何在 Excel 中搜索 1023 个字符的字符串？

```
foreach (string missingItem in missingItems)
{
    Range currentFind = null;
    foreach (Worksheet searchSheet in oWB.Worksheets)
    {
        Range lookAtRange = (Range)searchSheet.get_Range ("A1", "F20");

        currentFind = lookAtRange.Find (
            missingItem, 
            Missing.Value, 
            XlFindLookIn.xlValues,
            Missing.Value,
            Missing.Value, 
            XlSearchDirection.xlNext, 
            false, 
            false,
            Missing.Value);

        if (currentFind != null)
        {
            Range deleteRow = (Range)searchSheet.Rows[currentFind.Row];
            deleteRow.Delete (XlDirection.xlUp);
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:34:40.377

[http://www.vbaexpress.com/forum/archive/index.php/t-9179.html](http://www.vbaexpress.com/forum/archive/index.php/t-9179.html)

In short, if all your strings are unique for the first 255 characters, you don't need to worry about the rest.

You just need to truncate the string before you perform a find on it:

```
missingItem = Left(missingItem,255) 
```

or alternatively:

```
missingItem = Right (missingItem,255) 
```

Otherwise, if there are many duplicates of the first 255 characters, you could divide the string by 255 - then round up - then split the original string into seperate strings, search them individualy - does that help you?

EDIT:

Otherise, here is how you can check a string for equivalency for each cell in a range: [http://www.vbaexpress.com/kb/getarticle.php?kb_id=167](http://www.vbaexpress.com/kb/getarticle.php?kb_id=167)

```
Sub FindIt()
    Dim Cell As Range
    Dim SearchString As String
    For Each Cell In Range("A1:D500")
        If Cell.Value = "dqwlokjdowqijowqijdoinowiqhdoiwqiophiruegnqpiunrgpiuqgnrgkjffndskfiougpiodghiudhfgtothisansdfldkjflsdffjlksdjflksjfdoiejwfoiwjeoinfoinewoifjwoiejfoiwejfoiwejfoijjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjwerkjwelkfjwelkjflkwejlfkjwelkjflwkjeflknweoifnoweinfoinewfoinoifwnwoienfoinweoddddddddddddddddddddddddddddddddddddddddfinwoioiefldkjsfoijoneiojfoijfewwefweeeeeeeeeeeefwef" Then '<< use "Like" for wildcards in If-Then statements
            MsgBox "An ''it'' was found at " & Cell.Address & " (" & Cell & ")"
        End If
    Next Cell
End Sub 
```

![Funny Search String](../Images/c4e24d6d7d71826b9b9e11d6928274b7.png)

And yes I did pretend to type that as something important as my boss walked by. I don't think he was fooled though - since I just mashed it out on my keyboard.

# java - HttpsURLConnection 未在 Android 中返回 401

> ID：11724070
> 
> 赞同：3
> 
> 时间：2012-07-30T14:59:36.310
> 
> 标签：java, android, android-4.0-ice-cream-sandwich, http-status-code-401, httpsurlconnection

我遇到了一个似乎很奇怪的问题。我在我的 Android 应用程序中使用 HttpsURLConnection 类，并使用 Authenticator 类进行身份验证。

我可以使用输入的用户名和密码连接到 Web 服务，并返回 JSON 响应。如果我输入有效凭据，这绝对可以正常工作，并且我会收到返回的响应。但是，如果我给它无效的凭据，那么我永远不会得到响应，并且我的异步任务（正在运行代码）永远不会完成。

进行连接的代码如下：

```
private static String retrieveStream(String url) throws SocketTimeoutException {

    String streamContent = "";
    HttpsURLConnection urlConnection = null;

    try {

        Log.d("Connection", "Connecting to: " + url);

        Log.d("Connection", "Opening connection");
        urlConnection = (HttpsURLConnection) new URL(url).openConnection();
        Log.d("Connection", "Setting connect timeout");
        urlConnection.setConnectTimeout(5000);
        Log.d("Connection", "Setting read timeout");
        urlConnection.setReadTimeout(5000);
        Log.d("Connection", "Setting Allow All certs (because this is just testing)");
        urlConnection.setHostnameVerifier(new AllowAllHostnameVerifier());

        Log.d("Connection", "Connection Response: " + urlConnection.getResponseCode() + " " + urlConnection.getResponseMessage());

        if (urlConnection.getResponseCode() == HttpURLConnection.HTTP_OK) {
            streamContent = readStreamFromConnection(urlConnection);
            Log.d("Connection", "Returned content is: " + streamContent);
        }

    } catch (MalformedURLException e) {
        Log.e("Error", "MalformedURLException thrown in retrieveStream: " + e);
    } catch (IOException e) {
        Log.e("Error", "IOException thrown in retrieveStream for " + url + " : " + e);
    } finally {
        urlConnection.disconnect();
    }

    return streamContent;
} 
```

如果我使用无效凭据运行它，这就是我在日志中得到的：

```
07-30 15:52:57.040: DEBUG/Connection(16000): Connecting to: https://webservice-that-i-use
07-30 15:52:57.040: DEBUG/Connection(16000): Opening connection
07-30 15:52:57.040: DEBUG/Connection(16000): Setting connect timeout
07-30 15:52:57.040: DEBUG/Connection(16000): Setting read timeout
07-30 15:52:57.040: DEBUG/Connection(16000): Setting Allow All certs (because this is just testing) 
```

然后它就挂在这里，直到我强制停止应用程序或重新部署。我没有收到任何异常或 ANR。

[似乎我遇到了与此处](https://stackoverflow.com/questions/7808301/android-httpsurlconnection-with-authenticator-for-basic-authentication-iterates)发布的完全相同的问题，但从未得到答复。有没有人知道为什么会发生这种情况？如何使用 HttpsURLConnection 使连接超时？

任何帮助，将不胜感激。我还应该注意，我的同事在 iOS 中可以正常工作，所以这不是服务器问题。这是在 Asus Transformer TF101 上使用 ICS SDK 运行的。

谢谢阅读！

# c# - WCF - 动态生成的 URI 和单个客户端 -> 多服务设置...鸡/蛋情况

> ID：11724072
> 
> 赞同：0
> 
> 时间：2012-07-30T14:59:46.780
> 
> 标签：c#, .net, wcf, silverlight, client-server

请理解，我是微软商店开发的新手......

我正在使用 silverlight / c# 来设计一个可移植的基于 Web 的 UI（我称之为“WebUI”），它必须能够远程连接到同一类的多个实例（我们称之为“RemoteClass”），获取“状态”每个实例并有选择地调用实例方法。

这个想法是用户将手动实例化所有 RemoteClass 实例，如果他需要前往另一个位置，将使用 WebUI 与它们进行交互。

我对 WebUI 的编码方式*没有*限制，但是，当涉及到 RemoteClass 时，我正在一个受限制的框架内工作*。*RemoteClass 仅是 .NET3.5 c#。

相关限制如下：

*   “RemoteClass”实例，看不到任何外部类实例。
*   因此，我想引用的任何内容都必须在 RemoteClass 中声明。
*   我要实例化的任何其他类都必须实例化为 RemoteClass 实例中的嵌套类

现在 - 可能有任意数量的 RemoteClass 实例，每个实例都有自己唯一的 ID。在这种情况下，我无法在外部托管一组实例 ID，并且在 WebUI 应用程序启动之前无法预测这些 ID。

因为 - 在我看来 - 我需要每个 RemoteClass 服务实例的唯一 URI，以便能够远程调用一个特定实例的方法，但是 WebUI 中的客户端将需要按顺序知道每个 URI要连接到它，我能看到的唯一明显的解决方案是执行以下操作：

*   编写一个单独的“中间”应用程序（比如“InterApp”），它可以保存一个动态的 ID 数组并实例化 2 个 ServiceHost 实例——比如 ServiceHost1 和 ServiceHost2
*   要求在创建任何 RemoteClass 实例之前运行“InterApp”。
*   在创建每个新的 RemoteClass 实例时连接到 ServiceHost1，并将 ID 传递给 InterApp 中的数组进行存储。
*   同样，在每个 RemoteClass 实例化时实例化一个嵌套的 ServiceHost 实例，具有唯一的 URI，基于它的唯一 ID（InterApp 知道），然后我可以通过调用“GetIDList()”服务来使用 WebUI 连接到InterApp 的 ServiceHost2

我希望以上内容是有道理的——我确信必须有一种不那么复杂、更可靠的方法来实现这一目标，尽管我仍然很年轻并且不知道可能的选择......

我打算使用基于 ServiceHost 的服务器和基于 ChannelFactory 的客户端...

欢迎任何建议/建设性批评。

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T06:41:11.533

[WCF Durable Services](http://msdn.microsoft.com/en-us/library/bb628514%28v=vs.90%29.aspx)解决了您的问题。这支持在没有所有自定义寻址的情况下具有比会话允许的生命周期更长的独特服务实例。它最常与工作流服务一起使用，但它在普通的 WCF 服务实现上运行良好。

# wcf - 带有客户端证书的 WCF svcutil

> ID：11724077
> 
> 赞同：4
> 
> 时间：2012-07-30T14:59:58.473
> 
> 标签：wcf, svcutil.exe

我开发了一个 WCF 服务，该服务使用传输安全性和所需的客户端证书。它托管在 IIS 7.5 上，需要检查客户端证书。我已经设置了一个 mex 端点，并且能够在我的浏览器中的[https://mydomain.com/Folder/Service.svc/mex?wsdl](https://mydomain.com/Folder/Service.svc/mex?wsdl)中查看 wsdl 。使用 SoapUI，我能够成功连接并且服务完美运行。

但是，我想使用 svcutil.exe 设置一个测试客户端，因为这是我的客户端创建客户端所要做的。但是，当我运行时：

svcutil [https://mydomain.com/Folder/Service.svc/mex?wsdl](https://mydomain.com/Folder/Service.svc/mex?wsdl) /svcutilConfig:app.config

我收到以下错误：

```
C:\Program Files\Microsoft Visual Studio 9.0\VC>svcutil https://mydomain.com/Folder/Service.svc/mex?wsdl /svcutilConfig:app.config
Microsoft (R) Service Model Metadata Tool
[Microsoft (R) Windows (R) Communication Foundation, Version 3.0.4506.2152]
Copyright (c) Microsoft Corporation.  All rights reserved.

Attempting to download metadata from 'https://mydomain.com/Folder/Service.svc/mex?wsdl' using WS-Metadata Exchange or DISCO.
Microsoft (R) Service Model Metadata Tool
[Microsoft (R) Windows (R) Communication Foundation, Version 3.0.4506.2152]
Copyright (c) Microsoft Corporation.  All rights reserved.

Error: Cannot obtain Metadata from https://mydomain.com/Folder/Service.svc/mex?wsdl

If this is a Windows (R) Communication Foundation service to which you have access, please check that you have enabled metadata publishing at the specified address.  For help enabling metadata publishing, please refer to the MSDN documentation at http://go.microsoft.com/fwlink/?LinkId=65455.

WS-Metadata Exchange Error
URI: https://mydomain.com/Folder/Service.svc/mex?wsdl

Metadata contains a reference that cannot be resolved: 'https://mydomain.com/Folder/Service.svc/mex?wsdl'.

The HTTP request was forbidden with client authentication scheme 'Anonymous'.

The remote server returned an error: (403) Forbidden.

HTTP GET Error
URI: https://mydomain.com/Folder/Service.svc/mex?wsdl

There was an error downloading 'https://mydomain.com/Folder/Service.svc/mex?wsdl'.

The request failed with HTTP status 403: Forbidden. 
```

这是我的服务器 web.config 文件中的相关配置：

```
<system.serviceModel>
<bindings>
  <wsHttpBinding>
    <binding name="MyServices">
      <security mode="Transport">
        <transport clientCredentialType="Certificate"/>
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<services>
  <service behaviorConfiguration="ServiceBehavior" name="MyService.MyServiceManager">
    <endpoint address="" binding="wsHttpBinding" bindingConfiguration="MyServices"
     name="MyServices" contract="MyService.IMyServiceManager">
      <identity>
        <dns value="mydomain.com" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="wsHttpBinding"  bindingConfiguration="MyServices"
        name="mexEndpoint" contract="IMetadataExchange"/>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehavior">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpsGetEnabled="true" httpsGetUrl="https://mydomain.com:443/Folder/Service.svc/mex"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>
      <serviceCredentials>
        <clientCertificate>
          <certificate storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectDistinguishedName" findValue="CN=tempClientcert"/>
        </clientCertificate>
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

这是我的客户端 /svcutilConfig:app.config 文件：

```
<configuration>
    <system.serviceModel>
        <client>
            <endpoint name="mexEndpoint" address="mex" binding="wsHttpBinding" contract="IMetadataExchange" behaviorConfiguration="MyBehavior" />
        </client>
        <behaviors>
            <endpointBehaviors>
                <behavior name="MyBehavior">
                    <clientCredentials>
                        <clientCertificate storeName="My" storeLocation="LocalMachine" x509FindType="FindBySubjectDistinguishedName" findValue="CN=tempClientcert" />
                    </clientCredentials>
                </behavior>
            </endpointBehaviors>
        </behaviors>
    </system.serviceModel>
</configuration> 
```

我不明白为什么这个配置不起作用。此外，所有 wsdl 导入都解析为正确的 FQDN url，并且在 IIS 中启用了匿名身份验证。

任何援助将不胜感激。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:19:38.707

也打这个。我唯一能想到的是你引用了一个找不到的证书，在这种情况下，svcutil 似乎并没有正确地失败。该证书是否肯定在正确的商店中并且具有该专有名称（不仅仅是“常规”主题名称）？

无论如何，我解决这个问题的时间足够长，以至于我决定写一篇关于如何做到这一点的博客文章，它可以在这里找到：http: [//blogs.msdn.com/b/stephens_scratchpad/archive/2012/12/19/ client-certificates-for-https-wcf-services.aspx](http://blogs.msdn.com/b/stephens_scratchpad/archive/2012/12/19/client-certificates-for-https-wcf-services.aspx) - 希望对某人有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T10:45:35.437

老问题，但我需要在客户端证书过期后更改它（在那之后它不起作用！）但是在更改它之后，浏览器在 wsdl 端点上工作，但 svcutil 没有，这是由你所在的 Windows 凭据管理器引起的可以针对 URL 存储证书以在访问 URL 时自动上传。

我忘记用新证书更新凭证管理器！

# c# - 添加到 ConcurrentDictionary 的项目立即进入僵尸状态

> ID：11724078
> 
> 赞同：1
> 
> 时间：2012-07-30T15:00:03.987
> 
> 标签：c#, mono, concurrentdictionary

我正在尝试使用[Alchemy Websockets](http://alchemywebsockets.net/)组合一个快速的小程序，该程序在其示例中使用 ConcurrentDictionary 集合。

在我编写的代码中，我试图将一个新客户端添加到 ConcurrentDictionary。我注意到我的脚本在尝试访问此客户端时在其他区域失败，并将其缩小到我添加到 ConcurrentDictionary 的项目立即进入“僵尸”状态。

这是我添加客户端的测试代码：

```
Client test = new Client(ctx, sessId);
Clients.TryAdd(test, String.Empty);
Console.WriteLine ("Adding new client: " + sessId); 
```

如果我使用调试器在该区域中断，我可以看到“测试”包含正确的客户端信息，但在将其添加到客户端集合后立即显示“对象处于僵尸状态。（来自 HRESULT 的异常：0x8013134F）” .

字典在我的类中声明如下：

```
protected ConcurrentDictionary<Client, string> Clients = new ConcurrentDictionary<Client, string>(); 
```

我知道我可能正在做一些愚蠢的事情，但是什么给了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T20:47:29.437

如果您的结论是进入 ConcurrentDictionary 的项目进入僵尸状态，那么您假设**任何**对象都会这样做，对吗？然后，尝试通过编写一个更小的程序来测试这个假设，简化的测试用例，它不耦合到客户端类，或者根本不耦合到 WebSockets 库。

如果这仍然给您带来问题，恭喜，您现在正在缩小问题范围。我要做的第二步是使用您的较小程序并尝试在 MS.NET（而不是 Mono）中执行它。如果它适用于 MS.NET 而不是 Mono，那么我将在 Mono 的错误跟踪器中提交一个错误：http: [//bugzilla.xamarin.com/](http://bugzilla.xamarin.com/)。

但是，如果您的程序也不能在 MS.NET 中运行，那么您可能做错了什么！

# java - 有关如何以 RSS 格式呈现 URL 响应（文本）的示例代码

> ID：11724081
> 
> 赞同：0
> 
> 时间：2012-07-30T15:00:13.563
> 
> 标签：java, url, rss, rendering, response

我需要帮助来生成一种从 RSS 格式的 URL 呈现响应的方法。有人可以帮我提供如何去做的示例代码吗？我正在用Java编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:34:46.600

[在http://rometools.org/](http://rometools.org/)查看罗马图书馆。您应该找到有关如何在 Java 中生成 RSS/ATOM 提要的源代码示例。您必须在 servlet 中调用 Rome 库来输出 RSS 数据

# javascript - 在 Javascript 中覆盖

> ID：11724084
> 
> 赞同：0
> 
> 时间：2012-07-30T15:00:17.307
> 
> 标签：javascript

Func2 在我单击 button 时被调用。为什么我没有任何弹出窗口？我应该在第一个之后同时看到警报警报（“override1”）和警报（“override2”）吗？

```
// JavaScript Document
function person(name, surname) {
    this.name = "";
    this.surname = "";
    this.age = "11";
    this.setName(name);
    this.setSurname(surname);
    //alert('Person instantiated'); 
}
person.prototype.setName = function(name) {
    this.name = "Sir1" + name;
}
person.prototype.setSurname = function(surname) {
    this.surname = "-" + surname;
}
person.prototype.setAge = function(newAge) {
    this.age = newAge;
}
person.prototype.show = function() {
    alert("override1");
}
function employee(name, surname, company) {
    //if (arguments[0] === inheriting) return;
    person.call(this, name, surname); // -> override del costruttore
    //this.name = "Sir2"+name;
    this.company = company;
};
employee.prototype.show = function() {
    person.prototype.show;
    alert("override2");
}
function test2() {
    employee.prototype = new person();
    // correct the constructor pointer because it points to Person  
    employee.prototype.constructor = employee;
    // Crea un oggetto impiegato da persona
    impiegato = new employee("Antonio", "Di Maio", "Consuldimo");
    //impiegato.show();
    impiegato.show();
}​ 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:06:55.963

在`test2()`您将整个替换为`employee.prototype`的实例时`person`，从而用继承自的函数覆盖`employee.prototype.show`您之前定义的函数`person`。此外，正如代码框的答案所述，`employee.prototype.show()`您不是在调用`person.prototype.show()`，而只是在 void 上下文中对其进行评估，这根本没有任何效果。

在定义其原型上的任何其他方法*之前，*您必须设置`employee`'s parent ：

 *```
employee.prototype = new person();
employee.prototype.constructor = employee;
employee.prototype.show = function() { ... } 
```

此外，当您调用父母的方法时，您需要自己提供正确的上下文：

```
person.prototype.show.call(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:04:32.763

在`employee.prototype.show`您没有调用该`person.prototype.show`方法时-将其更改为：

```
employee.prototype.show = function() {
     person.prototype.show();  
     alert ("override2");
 } 
```*

# c# - 从 TreeNode 继承时，我应该覆盖哪些字段或函数以使节点在 TreeView 控件中具有文本描述？

> ID：11724086
> 
> 赞同：0
> 
> 时间：2012-07-30T15:00:18.927
> 
> 标签：c#, text, treeview, treenode, inheritance

我正在尝试从 TreeNode 继承以将自己的节点添加到 TreeView：

```
class TreeViewItem : TreeNode
{
    public new string Text;

    public override string ToString()
    {
        return "asd";
    }
} 
```

我试过了：

```
 TreeViewItem tvi = new TreeViewItem();
    tvi.Text = "asd";
    trv_bd_content.Nodes.Add(tvi); 
```

但仍然将空节点添加到 TreeView（没有文本“asd”的节点）。
我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:27:24.153

据我了解，您将覆盖`TreeNode`只是为了显示您自己构建的一些文本。如果在将节点添加到树之前知道计算所需的值，我建议这样做：

```
 treeView = new TreeView();
        var node = new TreeNode(
            string.Format("{0}: {1} / {2} / {3}", name, latitude, longitude, H));
        treeView.Nodes.Add(node); 
```

仅仅为了在其中保留额外的数据而覆盖视觉元素并不是一个好主意。通常你覆盖视觉元素来修改它的绘图或与它的行为相关的东西作为视觉元素。

为了保留相应的数据，您可以使用`Tag`可以保存任何数据（未键入）的属性。因此，您可以放置​​一个包含您的数据的类的实例。

```
 node.Tag = "AnyData"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-17T09:15:58.477

在我看来，treenode 不使用 ToString() 来获取显示信息。它使用 .Text 属性代替（似乎不喜欢被覆盖）

如果您愿意，可以在构造函数中设置 Text 属性。

```
class TreeViewItem : TreeNode
{
    // public new string Text;  Remove this so you don't call it

    public TreeViewItem(){
        this.Text = "asd";
    }

    //Treeview doesn't seem to use this
    public override string ToString()
    {
        return "asd";
    }
} 
```

# weblogic - CentOS 与 WebLogic 与 RHEL？

> ID：11724088
> 
> 赞同：0
> 
> 时间：2012-07-30T15:00:22.293
> 
> 标签：weblogic, centos, rhel

我想切换到 CentOS 来运行当前部署在 RHEL 下的 WebLogic 11g。人们在 CentOS 上运行 WebLogic 11g 时是否遇到过任何我应该注意的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:52:57.977

大约三年前，我一直在 CentOS 的生产和测试环境中运行 WebLogic 10gR3，并且没有遇到特定于操作系统环境的问题。至少我们没有发现。
此外，我一直使用 JRockit 没有任何问题（至少到目前为止我所知道的没有问题），而且我从来不需要联系 Oracle 支持。实际上，我在这个环境中挣扎的唯一两次是我关于 SO 的两个问题：[this](https://stackoverflow.com/questions/9332791/weblogic-10gr3-unsupportedencodingexception-parsing-content-type-header-for-mu)和[this](https://stackoverflow.com/questions/9168441/load-balancing-requests-to-a-weblogic-10gr3-rmi-server-on-amazon-ec2)。
不幸的是，我无法帮助您获得许可，因为这个问题是由其他人处理的。

# sql - 查询从同一个表的多行返回表中的一行

> ID：11724089
> 
> 赞同：0
> 
> 时间：2012-07-30T15:00:28.987
> 
> 标签：sql, oracle

我的桌子看起来像

```
ID    AB_ID   VALUES
1      2        20
2      2        10
3      2        30
4      2        60 
```

我想创建一个查询以返回

```
AB_ID     value1     value2     value3     value4
  2        20          10        30           60 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:24:30.007

由于您知道每行将有四行`AB_ID`，因此您应该能够沿着这些线进行旋转

```
SELECT ab_id,
       MAX( CASE WHEN rn = 1 THEN values ELSE NULL END ) value1,
       MAX( CASE WHEN rn = 2 THEN values ELSE NULL END ) value2,
       MAX( CASE WHEN rn = 3 THEN values ELSE NULL END ) value3,
       MAX( CASE WHEN rn = 4 THEN values ELSE NULL END ) value4
  FROM (SELECT ab_id,
               values,
               rank() over (partition by ab_id 
                                order by id) rn
          FROM your_table)
 GROUP BY ab_id 
```

如果您使用的是 Oracle 11.2，您应该也可以使用`PIVOT`关键字。不过，我不确定您使用的是哪个版本的 Oracle。

# netbeans - 无法将 Netbeans 7.1 更新到 7.2

> ID：11724093
> 
> 赞同：11
> 
> 时间：2012-07-30T15:00:37.630
> 
> 标签：netbeans, netbeans-7

我有netbeans 7.1。当我尝试更新它时，它显示“您的 IDE 是最新的！”。但是你知道，有 7.1.2 和 7.2 ！！！我认为这是因为更新渠道中的错误。

但是，我昨天安装了 C++ 并在 netbeans 中点击“更新”。它向我展示了需要更新的 C++ 插件列表，是的，它也更新了它们！为什么我无法将 netbeans 更新到下一个版本？

不像几天前，现在当我使用智能来了解特定的 Java 方法应该做什么时，有时 netbeans 会显示“未找到文档”。这与上述问题有关吗？

错误，当我在 google 中输入“下载 netbeans”时，第一个链接是“Nightly - NetBeans”。这是什么“夜间”的东西？请回答这两个问题。谢谢..

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-31T12:03:48.363

我在 NetBeans IDE 7.2 安装说明中找到了以下答案：

> ## 笔记：
> 
> 此时无法执行 IDE 的增量版本升级。要升级到最新版本，您必须下载最新的安装程序。

[http://netbeans.org/community/releases/72/install.html#upgrading](http://netbeans.org/community/releases/72/install.html#upgrading)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T13:43:18.243

这是我发现的最接近普通升级的东西：

1.  [从http://netbeans.org/downloads/index.html](http://netbeans.org/downloads/index.html)下载最新版本 并运行安装程序。安装程序将检测您是否安装了旧版本，并询问您是否要从该版本导入配置。

2.  当您启动新版本的 IDE 时，它会自动检测旧版本中安装的插件，并询问您是否要在新版本中安装它们（在 IDE 启动后的最初几分钟内可能不会发生，但它最终确实会发生）。

# java - 如何测量分布式系统中的请求时间？

> ID：11724094
> 
> 赞同：1
> 
> 时间：2012-07-30T15:00:45.460
> 
> 标签：java, multithreading, logging, distributed

经过研究，我决定从每个组件中记录每个请求：时间、本地化和某种请求 ID。然后将它们放在一起并按ID排序。然后我可以知道每个请求通过单个组件需要多长时间，这正是我需要的。

我的问题是我不知道如何在整个系统中传递 ID（线程是由例如 RMI 创建的）。我的想法是为连接到一个请求的所有线程设置相同的线程名称（[请参阅此处的](https://stackoverflow.com/questions/11722749/how-to-find-the-name-of-the-parent-thread)讨论），但我仍然需要一些建议如何做到这一点。或者也许有更好的主意将线程聚集在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:08:30.280

我这样做的方法是传递一个包含该过程中所有关键步骤的时间戳的字符串。最后，我对所有时间都有完整的端到端记录。这意味着传递一个额外的参数，但由于报告要简单得多，因此值得。

# mysql - MySQL 查询 IN GROUP_CONCAT 不起作用

> ID：11724098
> 
> 赞同：0
> 
> 时间：2012-07-30T15:00:56.850
> 
> 标签：mysql, select, inner-join, group-concat

MySQL 查询有问题。仅返回结果 GROUP_CONCAT 数组中第一项的结果。即结果数组为 [1,3,4]，仅返回用户 ID 1 的问卷。

```
$query_search = "SELECT questionnaires_index.id, questionnaires_index.ea_num, questionnaires_index.address, questionnaires_index.status, questionnaires_index.json_stored, users.username FROM questionnaires_index INNER JOIN users ON users.id = questionnaires_index.interviewer_id WHERE questionnaires_index.interviewer_id IN (SELECT GROUP_CONCAT(id) FROM users WHERE supervisor = (SELECT id FROM users WHERE username = '".$username."'))"; 
```

我是否错误地使用了 GROUP_CONCAT？有没有更好的方法来做到这一点？

**编辑 1** 这是此查询中使用的 SQL 表

```
CREATE TABLE IF NOT EXISTS `questionnaires_index` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `ea_num` int(10) unsigned NOT NULL,
  `address` varchar(100) NOT NULL,
  `interviewer_id` int(10) unsigned NOT NULL,
  `status` varchar(30) NOT NULL DEFAULT 'Available',
  `json_stored` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;

--
-- Dumping data for table `questionnaires_index`
--

INSERT INTO `questionnaires_index` (`id`, `ea_num`, `address`, `interviewer_id`, `status`, `json_stored`) VALUES
(1, 101, '29 De Havilland Crescent Pro Park, Building 1 Persequor Technopark Pretoria 0020', 1, 'Non Contact', 1),
(2, 102, '5th Floor, Imperial Bank Terraces Carl Cronje Drive Tyger Waterfront Bellville 7530', 1, 'Available', 0),
(3, 101, '29 De Havilland Crescent Pro Park, Building 1 Persequor Technopark Pretoria 0020', 3, 'Partially Completed', 0),
(4, 102, '5th Floor, Imperial Bank Terraces Carl Cronje Drive Tyger Waterfront Bellville 7530', 3, 'Available', 0),
(5, 201, '101 test address', 4, 'Available', 0); 
```

对于用户：

```
CREATE TABLE IF NOT EXISTS `users` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(20) NOT NULL,
  `password` varchar(20) NOT NULL,
  `supervisor` int(10) unsigned NOT NULL,
  `version_code` varchar(10) NOT NULL,
  `is_interviewer` tinyint(1) NOT NULL DEFAULT '0',
  `is_supervisor` tinyint(1) NOT NULL DEFAULT '0',
  `surname` varchar(50) NOT NULL,
  UNIQUE KEY `id` (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

--
-- Dumping data for table `users`
--

INSERT INTO `users` (`id`, `username`, `password`, `supervisor`, `version_code`, `is_interviewer`, `is_supervisor`, `surname`) VALUES
(1, 'Rynardt', 'q', 2, '2.2.0', 1, 0, ''),
(2, 'Herholdt', 'q', 0, '2.2.0', 0, 1, ''),
(3, 'test', 'test', 2, '2.2.0', 1, 0, ''),
(4, 'Botha', 'q', 2, '', 1, 0, ''); 
```

**编辑 2** 有关我正在尝试做的事情的更多信息：

如果您查看我所做的 EDIT，您将看到现在包含 SQL 表。u.supervisor 是操作类型整数，用于指示用户表中主管条目的 id。$username 是字符串类型，表示主管的名称。因此，我首先必须获取主管的 id，然后获取所有拥有具有先前找到的 id 的主管的用户的 id。然后使用这个 users.id 数组获取与这些用户关联的所有问卷，并在主管登录时将其显示给主管。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:11:57.017

```
SELECT GROUP_CONCAT(id) FROM users WHERE supervisor = 
   (SELECT id FROM users WHERE username = '".$username."') 
GROUP BY supervisor 
```

要使用聚合函数`group_concat`，您需要有一个聚合结果集；）

编辑...嗯...在这种特殊情况下

```
 WHERE ... IN (SELECT id FROM ...) 
```

应该足够了，不需要连接结果集

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:12:23.320

首先，您可以在这里完全跳过 GROUP_CONCAT(ID) 并简单地使用 interviewer_id IN ( SELECT ID FROM users [...] )

编辑：因为你用表格更新了你的帖子，是的 - 那么你很可能需要那个子查询。您还可以在附加查询中提取主管的 ID，并可以在此处跳过嵌套 sql。或者，既然您说主管登录并且必须查看获取的数据......也许还可以将用户 ID 保存到您的会话中（我猜它来自那里？）并通过添加完全跳过子查询和附加查询用户 ID 到您的登录脚本创建会话变量。

顺便说一句……您至少应该使用 md5 或 sha 对密码进行哈希处理。好主意是保存用户注册的时间，并在散列并将密码保存到表之前使用时间戳 + 一个常量来加盐密码。

# matlab - 用于从 Matlab 中的 C .dll 文件接收数据的握手

> ID：11724100
> 
> 赞同：0
> 
> 时间：2012-07-30T15:01:01.713
> 
> 标签：matlab, dll, handshake

我正在尝试从 Matlab 获得摄像机的实时视图。摄像机 SDK 是用 C 编写的，所以我一直在使用 .dll 从 Matlab 与摄像机进行通信（我是一名自学成才的程序员，所以如果我的术语不正确，我深表歉意）。然而，对于实时取景，我担心当 Matlab 从相机缓冲区读取数据时，相机不会意识到 Matlab 正在读取数据，并继续盲目更新缓冲区。因此，我认为需要握手机制，这就是我的麻烦所在。

下面是概述我当前解决方案的伪代码。我的问题是关于两个 while() 循环中的语句。我该如何检查我正在使用的布尔值的状态？我能想到的可能性需要在多个函数之间进行杂乱无章的参数传递。有没有更清洁的方法？

```
//C-code
initCamera();
dataReadyForSend = false;
grabFrame();
dataReadyForSend = true;
while(dataReceivedByMatlab == false)
    { // Check status};
//repeat 
```

现在对于 Matlab 方面：

```
% Matlab-code
dataReceieved = false;
while(waitForReadySignal() == false)
    { %Check status}
readDataFromC();
dataRecieved == true;
sendMessageOfSuccess(); %Tell C "I got the data" 
```

谢谢，

RS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:15:17.590

`mex`Matlab可以很方便的调用用命令编译的c代码。似乎最简单的事情是编写代码以从 c 中的相机缓冲区读取，然后从 matlab 中调用它。

[您可以在此处](http://www.mathworks.com/help/matlab/matlab_external/table-of-mex-examples.html)查看这些扩展的一些示例。

# eclipse - RSA 分析停止

> ID：11724102
> 
> 赞同：0
> 
> 时间：2012-07-30T15:01:08.130
> 
> 标签：eclipse, profiling, websphere, rsa

我正在使用 IBM RSA。我不小心在分析模式下运行了我的应用程序。从那以后，我无法在正常模式或调试模式下启动我的应用程序。请帮助我。

我在 Windows>Preferences 中也找不到服务器。

我正在使用 Websphere Access Server 6.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-15T08:26:59.117

就这么简单：`-agentlib:getClasses`从通用 JVM 参数中移除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:20:06.827

不了解 Websphere Access Server，但您是否尝试过进入菜单（运行 > 运行配置 ...）？

或者最终（Windows > 显示视图 > 服务器），右键单击您的服务器，然后单击开始。

?

让我知道它是否有帮助。

# signalr - 存储变量服务器端 SignalR

> ID：11724107
> 
> 赞同：4
> 
> 时间：2012-07-30T15:01:34.733
> 
> 标签：signalr

我想知道如何存储可以在调用时向连接的客户端触发的变量服务器端？

我使用并发字典来跟踪连接 GUID，并且想知道我是否可以在服务器上存储字符串或其他数据类型，例如最后 10 条消息，因此当发生新连接时，客户端会获取最后 10 条消息，即使它们事先没有连接的地方。

我可以看到它的许多用途，但对此看不到太多，这是不受欢迎的吗？还是不好的做法？我可以看到在服务器端存储大量字符串可能会导致很多问题。但我的提议真的那么糟糕吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T16:34:26.243

不，它一点也不皱眉。[JabbR](http://jabbr.net)是用于测试 SignalR 的旗舰应用程序，是一个类似于 IRC 的聊天系统，存储“房间”、消息、用户名/身份信息等。

*如何*存储这些取决于您。JabbR 恰好使用 ADO.NET Entity Framework 将数据存储在 SQL DB 中。您显然可以做同样的事情或使用 RavenDB 或 Azure 表存储或其他任何东西。

您需要做的就是在集线器中实现您的逻辑，然后，当有消息进来时，您可以执行对这种消息有意义的任何类型的数据访问/存储。

[我强烈建议您查看GitHub 上](https://github.com/davidfowl/JabbR)提供的 JabbR 源代码，以更好地了解它如何为您工作。

# java - 支柱没有工作

> ID：11724109
> 
> 赞同：0
> 
> 时间：2012-07-30T15:02:05.227
> 
> 标签：java, tomcat, struts

我有一个表格，我将动作 pf 设置为 /translate

```
<form name="frm" action="/translate">
...
</form> 
```

并像这样在 struts-config.xml 中映射 /translate URL：

```
 <action-mappings>
    <action name="TranslatorBean" path="/translate" scope="request" type="com.myapp.struts.TranslateCtrl" validate="false">
        <forward name="success" path="/welcomeStruts.jsp"/>
    </action>
</action-mappings> 
```

但是当我提交表单时，我收到 404 错误！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:06:59.860

尝试

```
<form name="frm" action="/translate.do"> 
```

反而

问候

# c# - 尝试将计算值传递给没有控制器的视图

> ID：11724110
> 
> 赞同：0
> 
> 时间：2012-07-30T15:02:05.617
> 
> 标签：c#, asp.net-mvc-3, mvcmailer

我正在使用 MvcMailer 并尝试传递计算值。这些值是在用户将信息输入向导表单（文本框、单选按钮列表等）后计算的。对不起，如果这很长，但我想提供尽可能多的上下文以避免“显示更多代码”评论。我正在使用视图模型 ( `QuoteData`)。我的“价格”保存在模型 ( `PriceQuote`) 中。

这是我的示例计算（以及随之而来的“总”代码）`Calculation.cs`：

```
public decimal decOne(QuoteData quoteData)
{
    if (quoteData.Step.RadioButtonOne == Step.EnumOne.ChoiceOne)
            return PriceQuote.priceOne;
    else
        return 0;
}
....
public decimal TotalOne(QuoteData quoteData)
{
    decimal totalOne = PriceQuote.priceBase;
    total += this.decOne(quoteData);
    ....
    return total;
} 
```

我的视图模型是这样的（不确定这是否正确，或者我是否应该在此处进行一些计算）：

```
public class QuoteData
{
    public Calculations Calculations { get; set; }
    ....
}
public QuoteData()
{
Calculations = new Caluclations();
} 
```

我**之前**为模拟目的所做的是将它放在模拟控制器中的一个动作中：

```
Calculations calc = new Calculations();

var totalone = calc.TotalOne(quoteData);
ViewBag.CalculateTotalOne = totalone;

return View(quoteData); 
```

我在页面中这样称呼它：

```
@((ViewBag.CalculationTotalOne).ToString("C2")) 
```

同样，这是出于**模拟**目的。现在，使用 MvcMailer 我不能做同样的事情，并且整个周末都在努力弄清楚如何让它工作。我研究和尝试过的一切都没有奏效。我确定这是我忽略的简单事情。

MvcMailer 的视图不使用控制器。它使用一个类（`QuoteMailer`在我的例子中）。这是我的向导传递给 MvcMailer 的方式：

```
public ActionResult Submitted()
{
    QuoteMailer.EMailQuote(quoteData).Send();
    return View(quoteData);
} 
```

这是`EMailQuote`在`QuoteMailer`：

```
public virtual MailMessage EMailQuote(QuoteData model)
    {
        var mailMessage = new MailMessage { Subject = "..." };

        mailMessage.To.Add(model.Step.EMail);
        mailMessage.To.Add("web@site.com");

        ViewData = new ViewDataDictionary(model);
        PopulateBody(mailMessage, viewName: "EMailQuote");

        return mailMessage;
    } 
```

任何帮助表示赞赏（我如何在这里传递我的计算，而在我使用的模拟场景中`ViewBag`？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:14:46.917

MVCMailer Mailers 扩展了 ControllerBase，因此最终它们的工作方式与控制器完全一样。您应该能够像在常规控制器中一样将数据发送到 Mailer 视图。 [这](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)是一个链接，描述了您可以将数据发送到 Mailer View 的所有方式。在您的情况下，只要 View 期望 QuoteData 类型的模型，您就可以执行以下操作来使用强类型模型：

```
public virtual MailMessage EMailQuote(QuoteData model)
{
    var mailMessage = new MailMessage { Subject = "..." };

    mailMessage.To.Add(model.Step.EMail);
    mailMessage.To.Add("web@site.com");

    ViewData.Model = model;
    PopulateBody(mailMessage, viewName: "EMailQuote");

    return mailMessage;
} 
```

# java - 如何在 Java 中创建文件的数据包

> ID：11724116
> 
> 赞同：0
> 
> 时间：2012-07-30T15:02:10.783
> 
> 标签：java, serialization, serial-port

我必须创建一个程序来获取二进制文件并通过 UART 将其传输到另一个设备，我怎样才能从文件中制作数据包。请帮助我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:06:19.827

UART 级别没有数据包，只有字节流。如果要将文件放入数据包中，请定义自己的数据包格式，在其中添加一些标头字节（文件名、大小等），然后是文件数据，并可能以 CRC 结尾。然后你在 UART 上流式传输你的数据包并在另一端解析它。

# iphone - 无法使用肥皂信封和方法名称访问服务器

> ID：11724118
> 
> 赞同：0
> 
> 时间：2012-07-30T15:02:17.083
> 
> 标签：iphone, ipad, wsdl

> 连接错误 Error Domain=NSURLErrorDomain Code=-1002“不支持的 URL”UserInfo=0x6a3f420 {NSErrorFailingURLStringKey=http%3A%2F%2F10.101.189.65%3A8090%2Fbusinessservice.svc, NSErrorFailingURLKey=http%3A%2F%2F10.101.189 .65%3A8090%2Fbusinessservice.svc，NSLocalizedDescription=不支持的 URL，NSUnderlyingError=0x6a3f450“不支持的 URL”}

我在访问服务器时收到此错误。

它直接调用了didfailwithError。-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{

```
NSLog(@"Error with connection %@",error); 
```

}

我可以知道这个错误何时调用！

我创建soapenvelope 并使用方法名称调用soap 请求。并对 url 进行编码并发送到 dot.net 网络服务器

```
NSString *soapMessage = [self getTestSoapEnvelope];
NSLog(@"soapMessage %@",soapMessage);

NSString *urlString = @"http://systemName:8090/businessservice.svc";
NSString *encodeUrl = (__bridge_transfer NSString *)
CFURLCreateStringByAddingPercentEscapes(NULL,
                                    (__bridge_retained CFStringRef)urlString,
                                    NULL,
                                    (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                    kCFStringEncodingUTF8);

NSURL *url = [NSURL URLWithString:encodeUrl];    
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];

[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: @"ManageCase" forHTTPHeaderField:@"SOAPAction"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"GET"];
    [theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];

    theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if( theConnection )
    {
        webData = [NSMutableData data];
    }
    else
    {
        NSLog(@"theConnection is NULL");
    } 
```

请求时间是 GET

无法访问服务器。请任何人就这个问题给我建议。

@提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:17:18.807

问题是您正在编码完整的 URL：

```
NSString *urlString = @"http://systemName:8090/businessservice.svc";
NSString *encodeUrl = (__bridge_transfer NSString *)
CFURLCreateStringByAddingPercentEscapes(NULL, ... 
```

而您应该只对最后一个 URI 部分（包含参数等的部分）进行编码。

在您的情况下，您实际上不需要对您的 URL 进行编码，因为没有以下部分：

```
@"?param=1&url=newsite.com&title=Post title"; 
```

只需传递`urlString`给`URWithString`：

```
NSString *urlString = @"http://systemName:8090/businessservice.svc";
NSURL *url = [NSURL URLWithString:urlString]; 
```

# .htaccess - 如何使用 CakePHP 创建子域

> ID：11724119
> 
> 赞同：0
> 
> 时间：2012-07-30T15:02:24.260
> 
> 标签：.htaccess, cakephp, subdomain

我想要的是：

```
http://mydomain.com/view/paris -> http://paris.mydomain.com
http://mydomain.com/view/new-york -> http://new-york.mydomain.com
etc 
```

如何使用 .htaccess 制作它，或者告诉我另一个解决方案（如果存在）。

**PS**对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:03:24.080

正如 CakePHP API 文档所述：http: [//api12.cakephp.org/class/controller#method-Controllerredirect](http://api12.cakephp.org/class/controller#method-Controllerredirect)

您可以将子域的 URL 提供给重定向方法：

```
$this->redirect('http://paris.mydomain.com'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:06:21.733

请阅读

[http://pastebin.com/dJVj80mE](http://pastebin.com/dJVj80mE)

[http://www.webmasterworld.com/apache/4046649.htm](http://www.webmasterworld.com/apache/4046649.htm)

[子域重定向](https://stackoverflow.com/questions/9446214/subdomain-redirect)

// cakephp 的子域组件，依赖于模型

[https://gist.github.com/1498851](https://gist.github.com/1498851)

或尝试

将子域重定向到 CakePHP 动作

```
<IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine on
  RewriteCond %{HTTP_HOST} ^(.*).myserver.com$ [NC]
  RewriteRule ^(.*)$ http://myserver.com/m/%1/$1 [L]
</IfModule>

RewriteCond %{HTTP_HOST} ^([^.]+).myserver.com$ [NC]
RewriteRule (?!^m/$)^.*$ http://myserver.com/m/sites/%1%{REQUEST_URI} [NC,L,P] 
```

或者

```
RewriteEngine on
RewriteBase   /

RewriteCond   %{HTTP_HOST}    ^(www\.)?dir\.domain\.com$
RewriteRule   ^.*             http://domain.com/dir/$0     [R=301,L]

RewriteCond   %{HTTP_HOST}    ^www\.domain\.com$
RewriteRule   ^dir/.*         http://domain.com/$0         [R=301,L] 
```

# c# - 正则表达式不能按我的需要工作

> ID：11724124
> 
> 赞同：4
> 
> 时间：2012-07-30T15:02:47.697
> 
> 标签：c#, regex

我需要验证一个帐号。它应该只有数字并且有 9 或 10 个字符。我试过这个：

```
return Regex.IsMatch(id, "[0-9]{9,10}"); 
```

但这不能正常工作，因为如果数字是“1234567890blah”，它会返回 true。你能帮忙吗，因为我对正则表达式不太擅长？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T15:05:37.523

您需要指出数字必须是整个字符串。放在`^`开头表示它必须是字符串的开头并`$`表示它必须是结尾。

```
return Regex.IsMatch(id, "^[0-9]{9,10}$"); 
```

有关更多详细信息，请参阅[正则表达式锚](http://www.regular-expressions.info/anchors.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T15:05:33.267

使用（添加开始和结束字符，^ 和 $ 字符）修改

```
return Regex.IsMatch(id, "^[0-9]{9,10}$"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T15:10:04.087

这是正则表达式的问题。有更简单和更清晰的解决方案。

```
string acct = "1234567890";
long temp; 

return (acct.Length == 9 || acct.Length == 10)
    && long.TryParse(acct, out temp); 
```

# vb.net - 为什么代码重复搜索结果？

> ID：11724125
> 
> 赞同：0
> 
> 时间：2012-07-30T15:02:50.343
> 
> 标签：vb.net

下面的代码应该允许用户搜索特定记录或执行关键字搜索。

换句话说，如果用户只是点击了搜索按钮，数据就会呈现到屏幕上。

问题是，如果您不断点击搜索按钮，相同的记录或记录会不断重复。

有任何想法吗？

请查看代码，非常感谢您的帮助。

```
Protected Sub bnt_Click(ByVal sender As Object, ByVal e As EventArgs) Handles bnt.Click

    Dim txtSearch As String

    'OR Perhaps pamametized query will be better
    txtSearch = searchBox.Text.Trim()

    Dim strSQL As String = ("SELECT fieldname FROM mytable WHERE keycode like '%' + @txtSearch + '%'")
    Dim connStr As String = ConfigurationManager.ConnectionStrings("constr").ConnectionString
    Dim conn As New SqlConnection(connStr)
    Dim cmd As New SqlCommand(strSQL, conn)
    Dim objReader As SqlDataReader
    cmd.Parameters.AddWithValue("@txtSearch", strSearch)
    conn.Open()
    objReader = cmd.ExecuteReader()

    DataBind()

    While objReader.Read()
        With objReader
            Dim li As New ListItem(objReader(0).ToString())
            url.Items.Add(li)
        End With
    End While

    conn.Close()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:05:13.420

在 While 循环中添加新的之前，您需要清除旧的

所以就在while循环之前你可以 url.Items.clear();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:24:16.013

在添加项目之前尝试清除`CheckBoxList`控件：

```
url.Items.Clear()
While objReader.Read()
    With objReader
        Dim li As New ListItem(objReader(0).ToString())
        url.Items.Add(li)
    End With
End While 
```

# java - 在 Java 中解码 NONBase64 字符串时未获得非法参数异常

> ID：11724126
> 
> 赞同：0
> 
> 时间：2012-07-30T15:02:53.420
> 
> 标签：java, jakarta-ee, base64, decode, decoder

我同时使用了 javax.xml.bind.DatatypeConverter 和 sun.misc.BASE64Decoder。但是当我给出非Base 64字符串时，BASE64Decoder没有任何异常

所以

```
public static void main(String[] args) throws IOException{
    BASE64Decoder decoder = new BASE64Decoder();
    decoder.decodeBuffer("Asdghäö'¨öä'");
} 
```

这不会引发任何异常

和这个，

```
DatatypeConverter.parseBase64Binary("ÖSaAA&&%¤"); 
```

引发 IndexOutOfBounds

但

```
 DatatypeConverter.parseBase64Binary("ASDGW&&"); 
```

在我期望 IllegalArgumentException 的地方根本没有给出任何东西，因为它[在这里说明](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/DatatypeConverter.html)

有没有人遇到过这个？你有什么建议？

谢谢

# android - 倒计时期间的 setText

> ID：11724127
> 
> 赞同：0
> 
> 时间：2012-07-30T15:02:58.480
> 
> 标签：android, android-layout, android-widget

我有一个问题，我无法在倒计时期间设置按钮的文本，这是代码：

```
begin.setText("Start level 1");
begin.setOnClickListener(new OnClickListener(){
public void onClick(View arg0) {

final int delay = 0000; // delay for 5 sec.
final int period = 1000; // repeat every sec.
final Timer timer = new Timer();
timer.scheduleAtFixedRate(new TimerTask() {
    public  void run() {
        begin.setText("" + t);
        t--;
        if(t == 0) {
            timer.cancel()
        }
    }
}, delay, period); 
```

这是日志猫：

```
android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
07-30 17:27:05.273: E/AndroidRuntime(22543):    at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at android.view.ViewRoot.requestLayout(ViewRoot.java:594)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at android.view.View.requestLayout(View.java:8128)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at android.view.View.requestLayout(View.java:8128)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at android.view.View.requestLayout(View.java:8128)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:254)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at android.view.View.requestLayout(View.java:8128)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at android.view.View.requestLayout(View.java:8128)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at android.widget.TextView.checkForRelayout(TextView.java:5405)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at android.widget.TextView.setText(TextView.java:2712)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at android.widget.TextView.setText(TextView.java:2580)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at android.widget.TextView.setText(TextView.java:2555)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at it.bisemanuDEV.piano.livello1$1$1.run(livello1.java:134)
07-30 17:27:05.273: E/AndroidRuntime(22543):    at java.util.Timer$TimerImpl.run(Timer.java:289) 
```

我希望你能帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:29:12.350

正如@Jug6ernaut 提到的，你不应该使用`TimerTask`.
相反，您可以尝试使用`Handler`. 这就是我在计时器中做类似事情的方式。

例如，在你想要调用的计时器中`.setText()`，执行以下操作：

```
mHandler.post(new Runnable() {
    @Override
    public void run() {
        begin.setText(gcalendar.get(Calendar.MINUTE)+":"+gcalendar.get(Calendar.SECOND));   
    }
}); 
```

它被简单地初始化为`Handler mHandler = new Handler()`。

**编辑：**刚刚注意到这与您的答案下方评论中发布的其他 SO 问题链接的想法相同......好吧，无论如何都是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:08:09.333

使用 a[`TimerTask`](http://developer.android.com/reference/java/util/TimerTask.html)而不是这个。根据文档，`The TimerTask class represents a task to run at a specified time. The task may be run once or repeatedly`. 正是您正在寻找的。`TimerTask`可以在[此处](http://thedevelopersinfo.wordpress.com/2009/10/18/scheduling-a-timer-task-to-run-repeatedly/)找到使用 a 的示例。

# java - Android WebView 文件上传

> ID：11724129
> 
> 赞同：36
> 
> 时间：2012-07-30T15:03:03.567
> 
> 标签：java, android, file-upload, android-webview

我正在开发一个 Android 应用程序。基本上它是一个`WebView`和一个progressBar。Facebook 的移动网站 (m.facebook.com) 加载到`WebView`.

当我单击“选择文件”按钮上传图像时，没有任何反应。我已经尝试了所有解决方案，但没有一个有效。我正在运行 4.0.3 的 Galaxy Note (GT-N7000) 上进行测试。我的最低 SDK 版本是版本 8。

[![我的应用](../Images/440e145cb6662c914deb33861f7ac448.png)](https://i.stack.imgur.com/M2xvm.png)
[（来源：[istyla.com](https://www.istyla.com/scrn.png)）]

**这是我的代码以获取更多信息...**

```
public class IStyla extends Activity {
    private ValueCallback<Uri> mUploadMessage;
    private final static int FILECHOOSER_RESULTCODE = 1;

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == FILECHOOSER_RESULTCODE) {
            if (null == mUploadMessage)
                return;
            Uri result = intent == null || resultCode != RESULT_OK ? null
                    : intent.getData();
            mUploadMessage.onReceiveValue(result);
            mUploadMessage = null;

        }
    }
    private class MyWebChromeClient extends WebChromeClient {
        public void openFileChooser(ValueCallback<Uri> uploadMsg) {
            mUploadMessage = uploadMsg;
            Intent i = new Intent(Intent.ACTION_GET_CONTENT);
            i.addCategory(Intent.CATEGORY_OPENABLE);
            i.setType("image/*");
            IStyla.this.startActivityForResult(Intent.createChooser(i, "Image Browser"), FILECHOOSER_RESULTCODE);
        }

        @Override
        public boolean onJsAlert(WebView view, String url, String message,final JsResult result) {
            //handle Alert event, here we are showing AlertDialog
            new AlertDialog.Builder(IStyla.this)
                .setTitle("JavaScript Alert !")
                .setMessage(message)
                .setPositiveButton(android.R.string.ok,
                    new AlertDialog.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {
                            // do your stuff
                            result.confirm();
                        }
                    }).setCancelable(false).create().show();
            return true;
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_istyla);
        WebView webView = (WebView) findViewById(R.id.webView1);
        WebSettings webSettings = webView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webView.setWebChromeClient(new MyWebChromeClient(){
            public void onProgressChanged(WebView view, int progress) {
                // Activities and WebViews measure progress with different scales.
                // The progress meter will automatically disappear when we reach 100%
                ProgressBar progressBar = (ProgressBar) findViewById(R.id.progressBar1);
                if(progress < 100 && progressBar.getVisibility() == ProgressBar.GONE){
                    progressBar.setVisibility(ProgressBar.VISIBLE);
                }
                progressBar.setProgress(progress);
                if(progress == 100) {
                    progressBar.setVisibility(ProgressBar.GONE);
                }
            }
            public void openFileChooser(ValueCallback<Uri> uploadMsg) {
                mUploadMessage = uploadMsg;
                Intent i = new Intent(Intent.ACTION_GET_CONTENT);
                i.addCategory(Intent.CATEGORY_OPENABLE);
                i.setType("image/*");
                IStyla.this.startActivityForResult(Intent.createChooser(i, "Image Browser"), FILECHOOSER_RESULTCODE);
            }
        });
        webView.setWebViewClient(new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                ProgressBar progressBar = (ProgressBar) findViewById(R.id.progressBar1);
                progressBar.setVisibility(ProgressBar.VISIBLE);
                return true;
            }

        });
        webView.loadUrl("https://m.facebook.com");

    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK){
            if(((WebView)findViewById(R.id.webView1)).canGoBack()){
                ((WebView)findViewById(R.id.webView1)).goBack();
                return true;
            }
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_istyla, menu);
        return true;
    }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-07-01T03:39:01.357

这就是我在我的应用程序中使用的方式

```
 private class MyWebChromeClient extends WebChromeClient {
    //The undocumented magic method override
    //Eclipse will swear at you if you try to put @Override here

    // For Android 3.0+
    public void openFileChooser(ValueCallback uploadMsg, String acceptType) {
        mUploadMessage = uploadMsg;
        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
        intent.addCategory(Intent.CATEGORY_OPENABLE);
        intent.setType("*/*");
        startActivityForResult(Intent.createChooser(intent, "File Browser"), FILECHOOSER_RESULTCODE);
    }

    //For Android 4.1+ only
    protected void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType, String capture) {
        mUploadMessage = uploadMsg;
        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
        intent.addCategory(Intent.CATEGORY_OPENABLE);
        intent.setType("*/*");
        startActivityForResult(Intent.createChooser(intent, "File Browser"), FILECHOOSER_RESULTCODE);
    }

    protected void openFileChooser(ValueCallback<Uri> uploadMsg) {
        mUploadMessage = uploadMsg;
        Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
        intent.addCategory(Intent.CATEGORY_OPENABLE);
        intent.setType("*/*");
        startActivityForResult(Intent.createChooser(intent, "File Chooser"), FILECHOOSER_RESULTCODE);
    }

    // For Lollipop 5.0+ Devices
    public boolean onShowFileChooser(WebView mWebView, ValueCallback<Uri[]> filePathCallback, WebChromeClient.FileChooserParams fileChooserParams) {
        if (uploadMessage != null) {
            uploadMessage.onReceiveValue(null);
            uploadMessage = null;
        }

        uploadMessage = filePathCallback;
        Intent intent = null;
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            intent = fileChooserParams.createIntent();
        }
        try {
            startActivityForResult(intent, REQUEST_SELECT_FILE);
        } catch (ActivityNotFoundException e) {
            uploadMessage = null;
            Toast.makeText(getApplicationContext(), "Cannot Open File Chooser", Toast.LENGTH_LONG).show();
            return false;
        }
        return true;
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T22:31:51.257

[Fr33dan](https://stackoverflow.com/a/12204160/1331135)分享的[Mike Olivier 的参考资料](https://stackoverflow.com/a/8713321/1331135)很重要。我正在分享在与您的情况非常相似的情况下对我有用的方法。

```
wv.setWebChromeClient(new WebChromeClient()  {

// For Android 3.0+
public void openFileChooser( ValueCallback<Uri> uploadMsg, String acceptType ) {  
mUploadMessage = uploadMsg;  
Intent i = new Intent(Intent.ACTION_GET_CONTENT);  
i.addCategory(Intent.CATEGORY_OPENABLE);  
i.setType("image/*");  
MainActivity.this.startActivityForResult( Intent.createChooser( i, getString(R.string.fileselect) ), MainActivity.FILECHOOSER_RESULTCODE ); 
}

// For Android < 3.0
public void openFileChooser( ValueCallback<Uri> uploadMsg ) {
openFileChooser( uploadMsg, "" );
}

// For Android > 4.1
public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType, String capture){
openFileChooser( uploadMsg, "" );
}
}); 
```

注意：我在堆栈溢出和[m0s 的博客](http://m0s-programming.blogspot.in/2011/02/file-upload-in-through-webview-on.html)中找到了这个。

另外，忽略 lint 警告。这对于 API 8 及更高版本非常有效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-30T19:33:49.030

鉴于投票数很高，我猜没有人注意到第 3 条评论（来自[David Esteves](https://stackoverflow.com/users/815553/david-esteves)）包含[回答此问题的链接。](https://stackoverflow.com/questions/5907369/file-upload-in-webview)

[米歇尔奥利维尔](https://stackoverflow.com/users/1127969/michel-olivier)说：

> 该解决方案也适用于蜂窝和冰淇淋三明治。似乎谷歌引入了一个很酷的新特性（accept 属性）并且忘记实现向后兼容的重载。

因此，您只需向接受字符串参数`openFileChooser`的类添加一个重载`MyWebChromeClient`，然后调用不接受的类：

```
public void openFileChooser( ValueCallback<Uri> uploadMsg, String acceptType ) 
{  
    this.openFileChooser(uploadMsg);
} 
```

这样做我能够使您的代码按预期运行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-28T13:35:59.957

在 WebChromeClient.OpenFileChooser 中调用 AlertDialog 时，您需要通知 webchrome 在返回按钮的情况下未进行任何选择。由于可以在对话框中按下后退按钮，因此您必须处理对话框的 OnCancel 并告诉 WebChrome 选择已完成。

例如：

```
private ValueCallback<Uri> mUploadMessage;
private final static int FILECHOOSER_RESULTCODE = 1;
private final static int CAMERA_RESULTCODE = 2;

...

    webView.setWebChromeClient(new WebChromeClient() {
      public boolean onConsoleMessage(ConsoleMessage cm) {
        Log.d("MyApplication", cm.message() + " -- From line "
                             + cm.lineNumber() + " of "
                             + cm.sourceId() );
        return true;
      }

      public void onExceededDatabaseQuota(String url, String
            databaseIdentifier, long currentQuota, long estimatedSize, long
            totalUsedQuota, QuotaUpdater quotaUpdater) {
                            quotaUpdater.updateQuota(estimatedSize+65536);
            } 

     @SuppressWarnings("unused")
    public void openFileChooser(ValueCallback<Uri> uploadMsg, String AcceptType, String capture) {
            this.openFileChooser(uploadMsg);
         }

     @SuppressWarnings("unused")
    public void openFileChooser(ValueCallback<Uri> uploadMsg, String AcceptType) {
        this.openFileChooser(uploadMsg);
     }

     public void openFileChooser(ValueCallback<Uri> uploadMsg) {

         mUploadMessage = uploadMsg;
        PesScreen.this.openImageIntent();
     }
    }); 
```

...

```
private void openImageIntent() {

final File root = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES); //file storage

    root.mkdirs();
    int nCnt = 1;
    if ( root.listFiles() != null )
        nCnt = root.listFiles().length;
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss");
    final String fname =  String.format("/dest-%s-%d.jpg", sdf.format(Calendar.getInstance().getTime()), nCnt);

    final File sdImageMainDirectory = new File(root.getAbsolutePath() + fname);
    outputFileUri = Uri.fromFile(sdImageMainDirectory);
//selection Photo/Gallery dialog
    AlertDialog.Builder alert = new AlertDialog.Builder(this);

    alert.setTitle("Select source");

    final CharSequence[] items = {"Photo", "Gallery"};
    alert.setItems(items, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {

            dialog.dismiss();
            if( whichButton == 0)
            {
                Intent chooserIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                chooserIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
                startActivityForResult(chooserIntent, CAMERA_RESULTCODE);
            }
            if( whichButton == 1)
            {
                Intent chooserIntent = new Intent(Intent.ACTION_GET_CONTENT);
                chooserIntent.setType("image/*");
                startActivityForResult(chooserIntent, FILECHOOSER_RESULTCODE);
            }
      }
    });
    alert.setOnCancelListener(new DialogInterface.OnCancelListener() {
        @Override
        public void onCancel(DialogInterface dialog) {

        //here we have to handle BACK button/cancel 
            if ( mUploadMessage!= null ){
                mUploadMessage.onReceiveValue(null);
            }
            mUploadMessage = null;
            dialog.dismiss();
        }
    });
    alert.create().show(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-23T18:00:38.313

此代码将有助于解决问题

只需使用以下代码更新**MainActivity.Java**文件

```
public class MainActivity extends Activity{
    private WebView mWebview ;
    private ValueCallback<Uri> mUploadMessage;
    public ValueCallback<Uri[]> uploadMessage;
    public static final int REQUEST_SELECT_FILE = 100;
    private final static int FILECHOOSER_RESULTCODE = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);

        mWebview  = (WebView) findViewById(R.id.help_webview);
        WebSettings webSettings = mWebview.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webSettings.setUseWideViewPort(true);
        webSettings.setLoadWithOverviewMode(true);
        webSettings.setAllowFileAccess(true);
        webSettings.setJavaScriptCanOpenWindowsAutomatically(true);
        webSettings.setBuiltInZoomControls(true);
        webSettings.setPluginState(WebSettings.PluginState.ON);
        webSettings.setSupportZoom(true);
        webSettings.setAllowContentAccess(true);

        final Activity activity = this;
        mWebview.setWebViewClient(new WebViewClient() {
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
                Toast.makeText(activity, description, Toast.LENGTH_SHORT).show();
            }
        });

        mWebview .loadUrl("http://www.google.com");

        String permission = Manifest.permission.CAMERA;
        int grant = ContextCompat.checkSelfPermission(this, permission);
        if (grant != PackageManager.PERMISSION_GRANTED) {
            String[] permission_list = new String[1];
            permission_list[0] = permission;
            ActivityCompat.requestPermissions(this, permission_list, 1);
        }

        mWebview.setWebChromeClient(new WebChromeClient()
        {
            // For 3.0+ Devices (Start)
            // onActivityResult attached before constructor
            protected void openFileChooser(ValueCallback uploadMsg, String acceptType)
            {
                mUploadMessage = uploadMsg;
                Intent i = new Intent(Intent.ACTION_GET_CONTENT);
                i.addCategory(Intent.CATEGORY_OPENABLE);
                i.setType("image/*");
                startActivityForResult(Intent.createChooser(i, "File Browser"), FILECHOOSER_RESULTCODE);
            }

            // For Lollipop 5.0+ Devices
            @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)
            public boolean onShowFileChooser(WebView mWebView, ValueCallback<Uri[]> filePathCallback, WebChromeClient.FileChooserParams fileChooserParams)
            {
                if (uploadMessage != null) {
                    uploadMessage.onReceiveValue(null);
                    uploadMessage = null;
                }

                uploadMessage = filePathCallback;

                Intent intent = fileChooserParams.createIntent();
                try
                {
                    startActivityForResult(intent, REQUEST_SELECT_FILE);
                } catch (ActivityNotFoundException e)
                {
                    uploadMessage = null;
                    Toast.makeText(MainActivity.this.getApplicationContext(), "Cannot Open File Chooser", Toast.LENGTH_LONG).show();
                    return false;
                }
                return true;
            }

            //For Android 4.1 only
            protected void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType, String capture)
            {
                mUploadMessage = uploadMsg;
                Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
                intent.addCategory(Intent.CATEGORY_OPENABLE);
                intent.setType("image/*");
                startActivityForResult(Intent.createChooser(intent, "File Browser"), FILECHOOSER_RESULTCODE);
            }

            protected void openFileChooser(ValueCallback<Uri> uploadMsg)
            {
                mUploadMessage = uploadMsg;
                Intent i = new Intent(Intent.ACTION_GET_CONTENT);
                i.addCategory(Intent.CATEGORY_OPENABLE);
                i.setType("image/*");
                startActivityForResult(Intent.createChooser(i, "File Chooser"), FILECHOOSER_RESULTCODE);
            }
        });

    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent intent)
    {
        if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP)
        {
            if (requestCode == REQUEST_SELECT_FILE)
            {
                if (uploadMessage == null)
                    return;
                uploadMessage.onReceiveValue(WebChromeClient.FileChooserParams.parseResult(resultCode, intent));
                uploadMessage = null;
            }
        }
        else if (requestCode == FILECHOOSER_RESULTCODE)
        {
            if (null == mUploadMessage)
                return;
            // Use MainActivity.RESULT_OK if you're implementing WebView inside Fragment
            // Use RESULT_OK only if you're implementing WebView inside an Activity
            Uri result = intent == null || resultCode != MainActivity.RESULT_OK ? null : intent.getData();
            mUploadMessage.onReceiveValue(result);
            mUploadMessage = null;
        }
        else
            Toast.makeText(MainActivity.this.getApplicationContext(), "Failed to Upload Image", Toast.LENGTH_LONG).show();
    } 
```

确保启用**AndroidManifest.xml**中的权限更新以下行

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.MANAGE_DOCUMENTS" />
        <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

尝试使用此代码对我有用。

# css - html, css：在外部显示不同的跨度文本 对于每个 ul li a，当悬停时

> ID：11724130
> 
> 赞同：0
> 
> 时间：2012-07-30T15:03:04.250
> 
> 标签：css, visibility, html

好吧，我有

```
<ul id="menu">
<li><a href="page1.html" title="" class="small"><img class="large" src="img/image1.jpg" title="" /></a></li>
<li><a href="page2.html" title="" class="small"><img class="large" src="img/image2.jpg" title="" /></a></li>
<li><a href="page3.html" title="" class="small"><img class="large" src="img/image3.jpg" title="" /></a></li>
</ul> 
```

使用 css 样式，`menu`当其中一个链接悬停时（其余所有的宽度 = 0px），仅显示 (image1.jpg, image2.jpg, image3.jpg) 的一个图像。一切都很完美。我唯一想要的也是在悬停时显示的图像上显示一些文本（评论）。每张图片都有不同的评论。每个评论都在 之外`<ul id="menu">`，它显示在页面的另一部分。例如，对于每个图像，跨度如下：

```
<span class="span_ny">New York</span>
<span class="span_eu">Europe</span>
<span class="span_oo">Moon</span> 
```

`menu`如果未悬停来自 的链接，则跨度被隐藏。

如果第一个链接悬停，如何使`New York`文本出现在页面上？我希望第二个链接`Europe`和`Moon`第三个链接一样。

如果可能的话，我更喜欢没有 jQuery 的代码。我相信仅使用 css 是不可能的，但这将是最首选的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:07:31.333

这在 CSS 中是不可能的，除非注释元素是 DOM 树中锚点的后代（在这种情况下，您可以选择性地显示其中一个`#menu a:hover span`或类似的东西）。

这意味着您实际上只有两个选择：要么更改标记以将评论带入列表，要么使用 Javascript/jQuery。

[使用 jQuery 执行此操作的示例小提琴](http://jsfiddle.net/p5YA6/)。

# google-maps - 谷歌地图 v3 显示可缩放图像

> ID：11724133
> 
> 赞同：0
> 
> 时间：2012-07-30T15:03:17.007
> 
> 标签：google-maps, google-maps-api-3

我正在尝试让 Google 地图显示可用于缩放的图像。我在大部分工作中都使用了本[教程，但遇到了两个问题。](http://blog.mikecouturier.com/2011/07/create-zoomable-images-using-google.html)

1.  我试图自然显示的图像是 256x193。图像被拉伸以适合 256x256。我怎样才能让谷歌地图知道只以 256x193 显示图像。
2.  我正在尝试绑定框，以便图像始终在视图中，而不是背景。我很接近，但我正在寻求更好的解决方案。我使用的那个只限制了中心。如果我平移，我仍然可以部分看到地图背景。

    ```
    var allowedBounds = null;
    var lastValidCenter = null;

    google.maps.event.addListenerOnce(map, 'idle', function(){
        allowedBounds = map.getBounds();
        lastValidCenter = map.getCenter();
    });    

    google.maps.event.addListener(map, 'center_changed', function() {
        if (allowedBounds.contains(map.getCenter())) {
        lastValidCenter = map.getCenter();
            return; 
        }

        map.panTo(lastValidCenter);
    }); 
    ```

PS。我使用谷歌是因为我对他们的所有事情都有点迷恋。如果有更好更标准的解决方案可以让我缩放多个图像级别，请告诉我。

更新：我得到了随机图像大小的工作！下面的代码修改了上面教程开始的内容

```
 Demo.ImgMapType.prototype.imageSize= new google.maps.Size(256, 193);
    Demo.ImgMapType.prototype.getTile = function (coord, zoom, ownerDocument) {
        var tilesCount = Math.pow(2, zoom);
        var maxWidth = this.imageSize.width * tilesCount;
        var maxHeight = this.imageSize.height * tilesCount;
        var width = this.tileSize.width;
        var height = this.tileSize.height;
        var maxX = width * (1 + coord.x);
        var maxY = height * (1 + coord.y);
        if (maxX > maxWidth){
            width = width - (maxX - maxWidth);
        }
        if (maxY > maxHeight){
            height = height - (maxY - maxHeight);
        }

        var div = ownerDocument.createElement('div');
        div.style.width = this.tileSize.width + 'px';
        div.style.height = this.tileSize.height + 'px';
        div.style.backgroundColor = this._backgroundColor;

        if (width <= 0 || coord.x < 0 || height <= 0 || coord.y < 0) {
            return div;    
        }

        var img = ownerDocument.createElement('IMG');
        img.width = width;
        img.height = height;
        img.src = Demo.Utils.GetImageUrl(this._theme + '_' + zoom + '_' + coord.x + '_' + coord.y + '.jpg');
        // Add the image to the div so that we hide the map background
        div.appendChild(img);
        return div;
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:48:22.697

根据平台和语言，您可以让处理上传的脚本分析图像并相应地填充它。那不会很难。

不知道如何处理它。

至于边界：[如何限制 Google 地图 API V3 中的平移？](https://stackoverflow.com/questions/3125065/how-do-i-limit-panning-in-google-maps-api-v3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:20:31.827

我得到了随机图像大小的工作！下面的代码修改了我提到的教程开始的内容

```
 Demo.ImgMapType.prototype.imageSize= new google.maps.Size(256, 193);
    Demo.ImgMapType.prototype.getTile = function (coord, zoom, ownerDocument) {
        var tilesCount = Math.pow(2, zoom);
        var maxWidth = this.imageSize.width * tilesCount;
        var maxHeight = this.imageSize.height * tilesCount;
        var width = this.tileSize.width;
        var height = this.tileSize.height;
        var maxX = width * (1 + coord.x);
        var maxY = height * (1 + coord.y);
        if (maxX > maxWidth){
            width = width - (maxX - maxWidth);
        }
        if (maxY > maxHeight){
            height = height - (maxY - maxHeight);
        }

        var div = ownerDocument.createElement('div');
        div.style.width = this.tileSize.width + 'px';
        div.style.height = this.tileSize.height + 'px';
        div.style.backgroundColor = this._backgroundColor;

        if (width <= 0 || coord.x < 0 || height <= 0 || coord.y < 0) {
            return div;    
        }

        var img = ownerDocument.createElement('IMG');
        img.width = width;
        img.height = height;
        img.src = Demo.Utils.GetImageUrl(this._theme + '_' + zoom + '_' + coord.x + '_' + coord.y + '.jpg');
        // Add the image to the div so that we hide the map background
        div.appendChild(img);
        return div;
    }; 
```

# gcc - 向量访问比矩阵访问快吗？

> ID：11724135
> 
> 赞同：0
> 
> 时间：2012-07-30T15:03:23.400
> 
> 标签：gcc, compilation, g++

我创建了一个非常简单的代码来了解向量访问是否比矩阵访问更快。

我尝试了 3 件事：

1：创建一个包含 100.000.000 个 int 元素的向量：

```
int *matrix=(int*)malloc(sizeof(int)*100000*1000)
for(long int=x;x<100000*1000;x++)matrix[x]=1; 
```

2：创建一个大小相同的矩阵：

```
int ** matrix=(int**)malloc(sizeof(int*)*100000);
for(long int=0; x<100000;x++){
   matrix[x]=(int*)malloc(sizeof(int*)*1000);
}
for(int x=0; x<100000;x++){
   for(int y=0;y<1000;y++){
     matrix[x][y]=1;
   }
} 
```

3：创建相同的向量，但在其中写入矩阵

```
for(int x=0; x<100000;x++){
   for(int y=0;y<1000;y++){
     matrix[(x*1000)+y]=1;
   }
} 
```

总是矩阵访问（CASE 2）需要 2 倍的情况 1 和 3。情况 3 比情况 1 快一点。我在我的 C++ 编译器（g++）中使用 -O2 参数

我可以理解为什么向量比矩阵更快：（但我会喜欢一些解释）。但我不明白为什么案例 3 比案例 1 快，我想乘法过程会减慢很多事情，而不是让它更快。我不明白为什么，即使差异是 0.002（可能是时间和当时的处理器使用情况（我想））

如果我在没有优化的情况下编译所有 3 个案例，则案例 2 比案例 1 慢，案例 3。因此，如果没有优化过程，案例 1 更快。

Vector 通常更快？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:33:11.153

案例 2 最慢的原因是因为它多了一层间接性。

在情况 1 和 3 中，您从内存中获取所需的元素。而在情况 2 中，您首先必须从内存中获取行/列数组的地址，然后才能从所需元素中获取。在现代计算机中，内存访问是最昂贵的操作（就执行而言），难怪它要慢得多。

正如预期的那样，1 和 3 的差异非常小。摆弄优化选项已经产生了影响，因此在这里没有人可以在知道您正在使用的确切机器的情况下给您一个明确的答案。这里最好的（也是唯一合理的）方法是查看生成的汇编代码。一个原因可能是，在一个版本中，您的循环变量很长，而在另一个版本中则不是（因此您在那里进行元素地址计算），这取决于您的 CPU，这可能会有所不同。

**编辑：**您的措辞选择非常糟糕，因为没有矩阵内存访问。记忆总是平坦的。矩阵寻址只是您放在顶部的“虚拟”寻址（直接像您在 3 中所做的那样）或间接（通过使用例如为您完成它的不同语言，例如 fortran）。因此，您或多或少可以区分矩阵的不同内存布局。在 3 中，您将矩阵作为矩阵中的一大块，而在 2 中，您将它逐行/逐列地保存在内存中，其缺点是它多了一层间接性（但有优点是您可以更快地执行某些操作，例如交换到行，并且对于垃圾收集器可能更好）。还有许多其他方法可以将矩阵存储在内存中（尤其是如果您必须处理稀疏矩阵）。

# html - XSLT 更改内部字符串

> ID：11724137
> 
> 赞同：3
> 
> 时间：2012-07-30T15:03:25.090
> 
> 标签：html, xslt

我在 HTML 中使用 XSLT 来操作提供给我的一些 XML。提供一些关于我需要做什么的背景：

我会收到一些 XML 格式的

```
<base>
    <string>
        "Hi, this is a String"
    </string>
    <redlist>
        <red>
            <start>3</start>
            <end>5</end>
        </red>
        <red>
            <start>9</start>
            <end>11</end>
        </red>
    </redlist>
</base> 
```

这最终应该会生成一些输出 HTML，这些 HTML 将突出显示`<red>`标记中以红色表示的包含字符。所以这应该输出“嗨，这是一个字符串”，“th”和“is”部分为红色。

我认为我需要对子字符串进行某种花哨的处理，但我真的不知道该怎么做。

有什么建议么？

更新：

我有以下 -

```
<xsl:for-each select="base/redlist">
    <span style="color:black">
        <xsl:value-of select="substring(../string, 0, red/start)">
    </span>
    <span style="color:red">
        <xsl:value-of select="substring(../string, red/start, red/end)">
    </span>
</xsl:for-each> 
```

但显然这不起作用，因为在 for-each 循环的每次迭代中都是 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:24:46.583

请注意，最后一个可选参数`substring()`是子字符串的长度，而不是结束索引。

像下面这样的东西可能是一种方法。您需要根据您的索引是从零还是从一以及您是否打算将引号作为字符串的一部分来相应地调整它。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="base">
    <span style="color:black">
      <xsl:apply-templates select="redlist/red">
        <xsl:with-param name="string" select="normalize-space(string)"/>
      </xsl:apply-templates>
    </span>
  </xsl:template>

  <xsl:template match="red">
    <xsl:param name="string"/>
    <xsl:if test="not(preceding-sibling::red)">
        <xsl:value-of select="substring($string, 1, start - 1)"/>
    </xsl:if>
    <span style="color:red">
      <xsl:value-of select="substring($string, start, end - start)"/>
    </span>
    <xsl:variable name="next" select="following-sibling::red"/>
    <xsl:choose>
      <xsl:when test="$next">
        <xsl:value-of select="substring($string, end, $next/start - end)"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="substring($string, end)"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

# asp.net - 无法加载文件或程序集 PDFNET 或其依赖项之一

> ID：11724138
> 
> 赞同：0
> 
> 时间：2012-07-30T15:03:29.570
> 
> 标签：asp.net

我试图在我的一个网站项目中引用来自 PDFTron 的 PDFNET dll。但它给了我以下错误：

无法加载文件或程序集“PDFNet”或其依赖项之一。试图加载格式不正确的程序。

我使用的是 Windows 64 位版本，我的 VS2010 也设置为使用 ANYCPU 构建。当我在 Web 应用程序项目而不是网站项目中引用它时，它工作正常。无法弄清楚为什么它不适用于网站项目的原因。PDFNET dll 也是一个 x64 位 dll。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T18:21:41.440

我在这里看到了答案：[无法加载文件或程序集“PDFNet”或其依赖项之一。试图加载格式不正确的程序](https://stackoverflow.com/questions/15498256/could-not-load-file-or-assembly-pdfnet-or-one-of-its-dependencies-an-attempt)

我将我的应用程序池设置为启用 32 位应用程序。将 True 更改为 False，一切都很好。

# linux - 未阻塞的信号需要多长时间才能传递？

> ID：11724141
> 
> 赞同：10
> 
> 时间：2012-07-30T15:03:40.260
> 
> 标签：linux, signals

1.  当一个进程向另一个进程发送信号时，接收进程在什么情况下会等到它重新调度运行？
2.  在什么情况下会立即调用已安装的信号处理程序？
3.  与直接调用相应的信号处理程序相比，在发出信号时该过程会产生多少开销？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:40:18.657

关于信号的传递，TLPI 指出，在下一次调度任务时、从内核模式切换到用户模式时、或者在任务已经运行时“立即”传递信号（大概“立即”必须通过首先触发中断，否则它怎么能这样做）。好吧，不管这意味着什么，它不是严格绑定的，但它非常接近发生的事情。

您必须区分实时信号和“正常”信号以及同步生成的“正常”信号，大部分时间是由于硬件事件（例如分段错误）和那些不是（它们是异步生成的） ）。

实时信号*排队*，正常信号*没有*。这意味着正常信号的实现很可能只是类似于每个任务的一个用作位掩码的字。
生成“正常”信号意味着设置一个位，当操作系统接下来决定是否必须传递信号时，它会针对零测试该字，并在必要时确定设置了哪些位，并调用信号处理程序(s)，如果有的话，相应地。
需要知道这一点的唯一实际原因是有可能“丢失”信号。如果在传递第一个信号之前生成了两个或多个信号，那么它仍然只是一个信号。

实时信号的实现（需要排队到与实现相关的长度）显然要复杂得多。

由于硬件事件（例如段错误）而发生的信号是同步生成的，就像进程调用`kill`自身一样（第 22.4 章 TLPI），即它们“立即”传递，有两个原因。首先，做其他事情没有意义，其次，当陷阱处理程序返回时，已经发生了内核/用户切换。所以无论如何交付总是“立即”的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:09:29.363

基本上，信号是异步的。它们依靠信号处理程序在收到信号时执行代码，因为您永远不知道什么时候会由于进程调度程序等因素而发生。发送信号的延迟取决于硬件/软件中断，而硬件/软件中断是基于时钟速度的。

如果您想了解某些东西是如何在 Linux 上实现的，请查看[POSIX](http://en.wikipedia.org/wiki/POSIX)标准。

关于信号的重要信息：

[http://www.gnu.org/software/libc/manual/html_node/index.html#toc_Signal-Handling](http://www.gnu.org/software/libc/manual/html_node/index.html#toc_Signal-Handling)

> 当一个信号产生时，它就变成了*pending*。通常它会在很短的时间内保持未决状态，然后被*传递*到发出信号的进程。但是，如果这种信号当前*被阻塞*，它可能会无限期地保持等待状态——直到那种信号被*解除阻塞*。解封后，即刻送达。

另一个摘录：

> 当信号被传递时，无论是立即还是经过长时间的延迟，都会对该信号采取*指定的操作。*

# ruby-on-rails - 在 Rails 应用程序中从本地主机发送的电子邮件中以所需的字体显示字体

> ID：11724143
> 
> 赞同：0
> 
> 时间：2012-07-30T15:03:41.193
> 
> 标签：ruby-on-rails, actionmailer

我有一个 Rails 应用程序，我想在其中发送电子邮件，并在某些文本上应用字体。这些字体文件在我的服务器上。

我在我的 application.rb 中尝试了这些设置

```
config.assets.paths << Rails.root.join("app", "assets", "fonts")
config.assets.precompile += %w( .svg .eot .woff .ttf ) 
```

然后在电子邮件的 HTML 模板中的样式标签中的字体代码。

```
@font-face {
font-family: 'TestFont';
src: url('<%= root_url%>assets/test-webfont.eot');
src: url('<%= root_url%>assets/test-webfont.eot?#iefix') format('embedded-opentype'),
     url('<%= root_url%>assets/test-webfont.woff') format('woff'),
     url('<%= root_url%>assets/test-webfont.ttf') format('truetype'),
     url('<%= root_url%>assets/test-webfont.svg#MelbourneRegular') format('svg');
font-weight: normal;
font-style: normal;
} 
```

但是这些字体文件对发送的电子邮件没有影响。我还尝试将字体文件放在 public/fonts 文件夹中，但没有成功。

任何建议或帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:50:11.283

谢谢大家。

我还检查了这个[http://kb.mailchimp.com/article/can-i-upload-or-use-my-own-custom-fonts/](http://kb.mailchimp.com/article/can-i-upload-or-use-my-own-custom-fonts/)。所以将使用图像而不是字体。

# c - STM32F4Discovery：CAN过滤器配置

> ID：11724145
> 
> 赞同：3
> 
> 时间：2012-07-30T15:03:49.207
> 
> 标签：c, arm, stm32, can-bus

我正在使用[STM32F4Discovery](http://www.st.com/en/evaluation-tools/stm32f4discovery.html)套件构建一个简单的[CAN](http://en.wikipedia.org/wiki/CAN_bus)接口。我设法对其进行了配置，以便可以传输 CAN 消息，但是，我一直无法接收它们。据我所知，要接收 CAN 消息，它必须通过接受过滤器。我想将过滤器设置为接受从 ID 0x700 到 0x7FF 的所有（标准，2.0A）消息。我该怎么做呢？

我已阅读参考手册，但我不知道如何实际配置过滤。

```
void CAN_FilterConfiguration(void) {
    CAN_FilterInitTypeDef CAN_FilterInitStructure;

    /* CAN2 filter configuration */
    CAN_FilterInitStructure.CAN_FilterNumber = 1; // filter number = 1 (0<=x<=13)
    CAN_FilterInitStructure.CAN_FilterMode = CAN_FilterMode_IdMask;
    CAN_FilterInitStructure.CAN_FilterScale = CAN_FilterScale_16bit;
    CAN_FilterInitStructure.CAN_FilterIdHigh = 0x0000;
    CAN_FilterInitStructure.CAN_FilterIdLow = 0x0000;
    CAN_FilterInitStructure.CAN_FilterMaskIdHigh = 0x0000;
    CAN_FilterInitStructure.CAN_FilterMaskIdLow = 0x0000;
    CAN_FilterInitStructure.CAN_FilterFIFOAssignment = CAN_FIFO0; // FIFO = 0
    CAN_FilterInitStructure.CAN_FilterActivation = ENABLE;
    CAN_FilterInit(&CAN_FilterInitStructure);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T12:55:33.867

过滤器在列表或掩码模式下工作。它们可以是 32 位或 16 位。您可以有 32 个过滤器，但 0-13 分配给 CAN1，而 14+ 分配给 CAN2。

在一个过滤器中有一个 32 位过滤器或两个 16 位过滤器

*   一个用于 STDID[10:0]、EXTID[17:0]、IDE 和 RTR 位的 32 位滤波器。
*   STDID[10:0]、RTR、IDE 和 EXTID[17:15] 位的两个 16 位滤波器。

这是制作测试词的方法。在掩码模式下，CAN 在 TESTED & MASK == ID 时接受。在列表模式下，当 TESTED == ID 或 MASK == ID 时 CAN 接受。16 位有两个过滤器，32 位有一个过滤器 - 当 ID = IDHigh << 16 | IDLow（和加入掩码的方法相同）。

有关 DM0090[链接的更多信息](http://www.st.com/internet/com/TECHNICAL_RESOURCES/TECHNICAL_LITERATURE/REFERENCE_MANUAL/DM00031020.pdf)

# internet-explorer - 使用 jquery 在 Internet Explorer 中将元素附加到引导手风琴体

> ID：11724155
> 
> 赞同：0
> 
> 时间：2012-07-30T15:04:20.640
> 
> 标签：internet-explorer, twitter-bootstrap, accordion

我正在玩 twitter bootstrap 的手风琴插件，我注意到在 IE 中，如果您使用 jquery 的 append() 将元素添加到手风琴的主体，主体不会扩展以合并新添加的元素，这会导致一半元素及其下方的所有内容都将被截断。有解决办法吗？我尝试为与手风琴主体相对应的 css 添加溢出：自动，但这只会使用户必须向下滚动才能查看主体的其余部分。在 IE 中，有没有什么东西会导致手风琴体自动扩展以合并新元素而不切断任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:51:21.500

问题已经解决了：[github commit](https://github.com/philBrown/bootstrap/commit/75b8347a05fbe1196f60c771f14ba859315a78ee)

您可以使用该版本来纠正错误。

如果您无法修改 JavaScript，则存在一种**丑陋**的绕过方式。

**除非有某些后果，否则不应使用它**：如果您在显示的侦听器中以某种方式抛出错误，它会起作用。例如 ：

```
$('.collapse').on('shown',function() { someUndefinedFunction(); }); 
```

最后提醒一下：**更喜欢[插件的更新版本](https://github.com/philBrown/bootstrap/commit/75b8347a05fbe1196f60c771f14ba859315a78ee)而不是这个修复**。

# asp.net - 是否可以在 AppHarbor 上运行插件系统？

> ID：11724156
> 
> 赞同：0
> 
> 时间：2012-07-30T15:04:23.627
> 
> 标签：asp.net, plugins, appharbor

我为我的 Web 应用程序编写了一个插件系统，在应用程序启动时，程序集被读取和编目。如果我有一个要推送到的“插件”文件夹，这是否可能，如果它不在我的 webapp 文件夹结构中，我将如何引用该文件夹？

**编辑**

我发现this [SO](https://stackoverflow.com/questions/9084552/how-to-run-external-executables-from-an-appharbor-application-html-to-pdf-gener) question about the use of exe files for external processes，似乎构建中包含的文件是可能的。这是在 IIS 可以访问的应用程序路径中创建一个文件夹的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:58:15.903

如果您确保复制相关程序集以构建输出，那么这应该可以正常工作。您可以通过将相关程序集包含在作为 Visual Studio 项目一部分的插件目录中来完成此操作，并将 dll 标记为“内容”（就像您想要部署的 javascript 和其他内容一样）。[您可以按照常见问题解答](http://support.appharbor.com/kb/getting-started/frequently-asked-questions/)中的建议尝试 AppHarbor 构建过程以使其正常工作。

# sql-server - 安装 SQL Server 2012 错误“系统无法打开指定的设备或文件。”

> ID：11724160
> 
> 赞同：3
> 
> 时间：2012-07-30T15:04:44.307
> 
> 标签：sql-server, sql-server-2012

我正在尝试在我的机器上安装 SQL Server 2012 Developer，该机器已经安装了 SQL Server 2008 R2 Express 和 Windows 7。

我使用 Microsoft Secure Download Manager 下载安装程序，它会自动将安装程序文件转换为 ISO 文件。我正在使用 WinRAR 解压缩 ISO 文件并在安装时运行设置我收到以下错误消息：

> 无法打开 Windows 安装程序文件“C:\SQLSErverInstaller\x64\setup\sql_engine_core_inst_msi\sql_engine_core_inst.msi”。
> 
> Windows Installer 错误消息：系统无法打开指定的设备或文件。
> 
> 单击“重试”以重试失败的操作，或单击“取消”以取消此操作并继续设置。

单击重试时，我无法进行安装，但失败了。

查看目录我可以找到`sql_engine_core_inst`文件。单击它我无法运行它并收到消息

> 无法打开此安装包。联系应用程序供应商以验证这是一个有效的 Windows 包。

我尝试下载安装程序很多次，但每次都出现同样的错误，请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:10:55.310

右键单击并选择安装文件的属性，然后选择“取消阻止”，转到“常规”选项卡的“安全”部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T09:51:55.223

我建议您将整个安装从 ISO 复制到硬盘上，在那里，您将能够看到安全选项（我的不需要更改），但安装应该可以正常工作，因为它可以正确访问文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-13T10:09:56.240

我在安装 SQL Server 时遇到了同样的问题。解决方法是从已安装程序列表中删除 SQL 2012 Native Client。然后开始重装。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-06-13T20:15:33.233

缺少的文件包含在 SQLEXPRWT_x（您的 WIN 风格）_ESN.exe 中

SQLEXPRWT_x86_ESN.exe

# php - Comparing published date in Joomla K2 for New Icon

> ID：11724164
> 
> 赞同：0
> 
> 时间：2012-07-30T15:05:03.997
> 
> 标签：php, joomla, joomla-k2

I am trying to automate the process of adding a css New icon next to my K2 article within the first 3 days of the published date. So here's what I came up with in com_k2\template\category_item.php

```
 $newdate = time($this->item->publish_up) + 86400;
    $nowdate = time();
    <?php echo $nowdate <= $newdate?' item-new':'' ?> 
```

The first line will get the published date of the article and add 3 days to it. The 2nd line would then grab the current server time. Then the 3rd line would compare the two date and echo item-new if the current time is still within 3 days from the published date.

The code did not generate any error msg, but the comparing of the two date doesn't seems to work because the New icon display on every article.

Could someone kindly point me in the right direction? I'm not good with php and most of that coding was inferred from other code. My guess is that the variables were defined properly but I cannot simply compare two dates with smaller or equal to?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:10:30.750

It is possible to compare time in PHP using comparison operators. The problem is that [`time()`](http://php.net/manual/en/function.time.php) doesn't take any arguments (PHP isn't throwing an error because it takes extra arguments as params, like JS). What you probably want to use is [`strtotime()`](http://www.php.net/manual/en/function.strtotime.php).

```
$newdate = strtotime($this->item->publish_up) + 86400;
$nowdate = time();
<?php echo $nowdate <= $newdate?' item-new':'' ?> 
```

# jquery - jQuery就地编辑奇怪的行为

> ID：11724165
> 
> 赞同：1
> 
> 时间：2012-07-30T15:05:10.867
> 
> 标签：jquery

我使用[http://www.arashkarimzadeh.com/jquery/7-editable-jquery-plugin.html](http://www.arashkarimzadeh.com/jquery/7-editable-jquery-plugin.html) edit-inplace 插件。

对于单个可编辑元素，它工作正常，但我的项目中有很多。当我单击一个元素时，会发生以下情况：

![在此处输入图像描述](../Images/1d4b8c7f92c06c80740d5de0434af415.png)

实际文本消失。而是`<input>`出现了一个元素。我所做的一切都是

```
$('th,td').editable(); 
```

但是表是动态加载到 DOM 中的，所以：

```
$('#id').load('template.html', function() {
    $('th,td').editable();
}); 
```

知道这里有什么问题吗？你知道如何解决这个问题吗？

[http://jsfiddle.net/2gYw2/6/](http://jsfiddle.net/2gYw2/6/)（不工作） - 添加元素并单击以编辑它，然后单击 td 或 th 以查看问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:08:14.087

实际上，您应该调用一次可编辑的方法，不再赘述。我找到了解决这个问题的两种可能性（也许有更多的解决方案）。

1.  您创建一个数组并存储已使用 editable() 调用的对象。
2.  您添加一个变量来标记 jQuery 对象中可编辑的调用

我更喜欢第二种解决方案，因为我发现它更容易使用。我只是向 jquery 添加了一个新函数来执行此操作。

编辑 ：

我将变量替换为 HTMLElement 的类。

```
(function($){
    $.fn.refreshEditable = function(){
        $(this).each(function(){
            if(!$(this).hasClass("not-editable")){
              $(this).addClass("not-editable");
              $(this).editable();
            }
        });
    }        
})( jQuery );

$('th,td,h2').refreshEditable();

$('#addTable').click(function(){
    $('body').append("<div><h2>Add element</h2></div>");
    $('th,td,h2').refreshEditable();
}); 
```

我认为这样做有点糟糕，但它确实有效。住[在这里](http://jsfiddle.net/charlesjourdan/fZq5X/4/)的例子。

# sencha-touch - 未从字段集的某些字段中获取值

> ID：11724168
> 
> 赞同：0
> 
> 时间：2012-07-30T15:05:31.670
> 
> 标签：sencha-touch, extjs

我正在尝试从包含姓名、手机号码、电子邮件地址和所有这些的字段集中获取值。这是我的字段集代码：

```
 {
                    xtype : 'fieldset',
                    docked : 'top',
                    id: 'signuptextfield',
                    margin : '10 0 0 0',
                    width : 600,
                    scrollable: true,
                    height : 180,

                    items : [ {
                        xtype : 'textfield',
                        id : 'consumername',
                        style : 'font: Droid Sans',
                        label : 'Consumer Name',
                        labelWidth : '30%'
                    }, {
                        xtype : 'numberfield',
                        id : 'mobilenum',
                        style : 'font: Droid Sans',
                        label : 'Mobile',
                        labelWidth : '30%'
                    }, {
                        xtype : 'emailfield',
                        id : 'email',
                        label : 'Customer Email id',
                        labelWidth : '30%',
                        placeHolder : 'email@example.com'
                    }, {
                        xtype : 'textareafield',
                        id : 'adressfield',
                        style : 'font: Droid Sans',
                        label : 'Address',
                        labelWidth : '30%'
                    }, {
                        xtype : 'textfield',
                        id : 'areafield',
                        style : 'font: Droid Sans',
                        label : 'Area/Location',
                        labelWidth : '30%'
                    }, {
                        xtype : 'selectfield',
                        label : 'City',
                        labelWidth : '30%',
                        options : [ {
                            text : 'Bangalore',
                            value : 'first'
                        }, {
                            text : 'Delhi',
                            value : 'second'
                        }, {
                            text : 'Mumbai',
                            value : 'third'
                        } ]
                    }, {
                        xtype : 'numberfield',
                        id : 'pinfield',
                        style : 'font: Droid Sans',
                        label : 'Pincode*',
                        labelWidth : '30%'
                    }, ]
                }, {
                    xtype : 'button',
                    height : 40,
                    id : 'submitbtn',
                    margin : '10 0 0 0',
                    ui : 'orange',
                    width : 220,
                    text : 'Submit'
                } 
```

现在点击提交按钮，我试图获取这个值：首先，我尝试使用以下代码：

```
var consumerName = Ext.getCmp('signuptextfield').getValues(); 
```

但它给出了错误：

```
Uncaught TypeError: Object [object Object] has no method 'getValues' at file:///android_asset/www/app/controller/MyController.js:164 
```

然后我尝试使用以下代码：

```
onSubmitButtonTap : function(button, e, options) {
function storeCustomerDetails(tx)
    {
        var consumerName = Ext.getCmp('consumername').getValue();
        var consumerMobNo = Ext.getCmp('mobilenum').getValue();
        var consumerEmail = Ext.getCmp('email').getValue();
        var consumerAddress = Ext.getCmp('adressfield').getValue();
        var consumerArea = Ext.getCmp('areafield').getValue();
        console.log("the datas are:"+consumerName);
        console.log("the datas are:"+consumerMobNo);
        console.log("the datas are:"+consumerEmail);
        console.log("the datas are:"+consumerAddress);
        console.log("the datas are:"+consumerArea);
   } 
```

但我只能获得消费者姓名和手机号码。它返回null的其他字段..我不知道确切的问题在哪里..

需要帮助..

# firefox - firefox css 列中断 - 它有效吗？

> ID：11724173
> 
> 赞同：1
> 
> 时间：2012-07-30T15:05:41.920
> 
> 标签：firefox, css

火狐 14。

我正在尝试使用 css 道具：

```
-moz-column-break-before:always;
-moz-column-break-after: always; 
```

但它不起作用，因为它在 chrome 中工作：（`-webkit-column-break-before: always;`）

FF中的分列符是否损坏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:47:18.743

不是“破碎”，而是没有实施。[他们的扩展参考页](https://developer-new.mozilla.org/en-US/docs/CSS/CSS_Reference/Mozilla_Extensions)上没有列出这样的属性。

Webkit 有它，但根据[此页面](https://developer-new.mozilla.org/en-US/docs/CSS/CSS_Reference/Webkit_Extensions#Proprietary_WebKit-prefixed_properties_%28do_not_use_on_Web_sites%29)（截至 2012 年 7 月 30 日），即使这也被认为是“专有的 WebKit 前缀属性（**不要在网站上使用）”。**

# capistrano - twitter-bootstrap-rails application.css - 无效的 CSS

> ID：11724176
> 
> 赞同：1
> 
> 时间：2012-07-30T15:05:54.573
> 
> 标签：capistrano, twitter-bootstrap-rails

application.css 中的行

*= 需要 bootstrap_and_overrides

这在本地工作得很好。但是 cap deploy 失败了：

“*”之后的无效 CSS：预期的“{”，是“= 需要引导...”

我将 gem 移到 :development 组之外，但似乎没有帮助。有任何想法吗？谢谢。

# c++ - 实现井字游戏的极小极大算法

> ID：11724177
> 
> 赞同：1
> 
> 时间：2012-07-30T15:05:57.537
> 
> 标签：c++, algorithm, minimax

我正在尝试为井字游戏实现极小极大算法，其中两个玩家都是人类，并且每次计算机都使用极小极大算法建议最佳移动。但它并不是每次都给出正确的建议。例如：它没有为以下场景提供正确的建议：玩家 X：1 玩家 O：2 玩家 X：5。这是我的代码：

```
#include <stdio.h>
#include <algorithm>  
#include <string>
using namespace std;

#define inf 1<<20
int posmax, posmin;
char board[15];

void print_board()
{
    int i;
    for (i = 1; i <= 9; i++)
    {   
        printf("%c ",board[i]);
        if (i % 3 == 0)
            printf("\n");
    }
    printf("\n");
}

int check_win(char board[])
{
    if ((board[1] == 'X' && board[2] == 'X' && board[3] == 'X') ||
        (board[4] == 'X' && board[5] == 'X' && board[6] == 'X') ||
        (board[7] == 'X' && board[8] == 'X' && board[9] == 'X') ||
        (board[1] == 'X' && board[4] == 'X' && board[7] == 'X') ||
        (board[2] == 'X' && board[5] == 'X' && board[8] == 'X') ||
        (board[3] == 'X' && board[6] == 'X' && board[9] == 'X') ||
        (board[1] == 'X' && board[5] == 'X' && board[9] == 'X') ||
        (board[3] == 'X' && board[5] == 'X' && board[7] == 'X'))
    {
        return 1;
    }
    else if((board[1] == 'O' && board[2] == 'O' && board[3] == 'O') ||
            (board[4] == 'O' && board[5] == 'O' && board[6] == 'O') ||
            (board[7] == 'O' && board[8] == 'O' && board[9] == 'O') ||
            (board[1] == 'O' && board[4] == 'O' && board[7] == 'O') ||
            (board[2] == 'O' && board[5] == 'O' && board[8] == 'O') ||
            (board[3] == 'O' && board[6] == 'O' && board[9] == 'O') ||
            (board[1] == 'O' && board[5] == 'O' && board[9] == 'O') ||
            (board[3] == 'O' && board[5] == 'O' && board[7] == 'O'))
    {
        return -1;
    }
    else return 0;
}

int check_draw(char board[])
{
    if ((check_win(board) == 0) && (board[1] != '_') && (board[2] != '_') &&
        (board[3] != '_') && (board[4] != '_') && (board[5] != '_') &&
        (board[6] != '_') && (board[7] != '_') && (board[8] != '_') &&
        (board[9] != '_'))
    {
        return 1;
    }
    else return 0;
}

int minimax(int player, char board[], int n)
{
    int i, res, j;

    int max = -inf;
    int min = inf;

    int chk = check_win(board);
    if (chk == 1)
        return 1;
    else if (chk == (-1))
        return -1;
    else if (chk = check_draw(board))
        return 0;

    for (i = 1; i <= 9; i++)
    {
        if(board[i] == '_')
        {
            if(player == 2)  
            {
                board[i] = 'O';
                res = minimax(1, board, n + 1);

                board[i] = '_';
                if(res < min)
                {
                    min = res;
                    if (n == 0)
                        posmin = i;
                }
            }
            else if (player == 1)
            {
                board[i] = 'X';
                res = minimax(2, board, n + 1);
                board[i] = '_';
                if (res > max)
                {
                    max = res;
                    if (n == 0)
                        posmax = i;
                }
            }
        }
    }

    if (player == 1)
        return max;
    else return min;    
}

// 1 is X, 2 is O
int main()
{
    int i, j, input, opt;

    for(i = 1; i <= 9; i++)
        board[i] = '_';

    printf("Board:\n");
    print_board();

    for(i = 1; i <= 9; i++)
    {
        if (i % 2 == 0)
            printf("Player O give input:\n");
        else 
            printf("Player X give input:\n");

        scanf("%d", &input);
        if (i % 2 != 0)
            board[input] = 'X';
        else
            board[input] = 'O';

        printf("Board:\n");
        print_board();

        int chk = check_win(board);
        if (chk == 1)
        {
            printf("Player X wins!\n");
            break;
        }
        else if (chk == -1)
        {
            printf("Player O wins!\n");
            break;
        }
        else if ((chk == 0) && (i != 9))
        {
            posmax = -1;
            posmin = -1;
            if(i % 2 == 0)
            {
                opt = minimax(1, board, 0);
                printf("Optimal move for player X is %d\n", posmax);
            }
            else 
            {
            opt = minimax(2, board, 0);
            printf("Optimal move for player O is %d\n", posmin);
            }
        }
        else 
            printf("The game is tied!\n");
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:49:37.990

在我看来，您的程序没有给出错误的建议。如果两个玩家都处于最佳状态，Minimax 会计算移动的分数。在您的情况下，得分可以是 +1、-1 和 0，因此，如果一场比赛（例如）不可避免地输掉，那么输掉的深度并没有什么不同。给定以下游戏状态

```
X O _
X _ _
_ _ _ 
```

和玩家 X 的最佳玩法，玩家 O 在哪里下棋并不重要（他在任何一种情况下都输了）：

*   O打7后，X打5，O打6，X打8 --> X赢
*   O 打 3 后，X 打 7 --> X 获胜

玩家 X 获胜。移动 7 与移动 3 和所有其他可玩移动的得分相同。如果你想让你的算法给出这个例子的移动建议 7，你必须在你的评估函数中包含游戏深度。您可以通过将函数的返回值更改为以下内容来做到这一点：

```
int chk = check_win(board);
if (chk == 1)
    return (10 - n);
else if (chk == (-1))
    return -(10 - n);
else if (chk = check_draw(board))
    return 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:09:47.793

我认为这（尽管编码效率低下）是正确的。如果不是，请给出您认为程序错误的移动顺序。

它没有给出最短的移动序列，这可能是你所追求的。然后，您应该重构它以返回给出最短移动序列（如果获胜）或最长移动序列（如果失败）的移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:05:27.963

除非我读错 main() ，否则在宣布平局之前，您只需要填充 8 个方格。这可能不是您要寻找*的错误，但它是一个开始。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T21:22:50.227

替换 `printf("Optimal move for player X is %d %d\n", posmax);` 为 `printf("Optimal move for player X is %d\n", posmax);`

和

`printf("Optimal move for player O is %d %d\n", posmin);` 和 `printf("Optimal move for player O is %d\n", posmin);`

其他一切似乎都是正确的，尽管它并不总是打印出最快的胜利（如果胜利存在的话）。

# asp.net-mvc - asp mvc 报告服务

> ID：11724178
> 
> 赞同：1
> 
> 时间：2012-07-30T15:05:59.860
> 
> 标签：asp.net-mvc, entity-framework, razor, reporting-services

如何将我已经准备好的报告插入到视图中？我正在开发一个 .net mvc Web 应用程序。我应该在 .cshtml 文件中添加什么代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:40:11.723

您不能将 ReportView 添加到您的 cshtml 以创建报告，这是因为它是 Web 表单的组件。您可以做的最多的事情是在您的 mvc 项目中添加一个文件夹并在此文件夹中创建一个 Web 表单，并将报表查看器添加到此 WebForm 中。

# c# - Vector2在c ++中等效？

> ID：11724179
> 
> 赞同：2
> 
> 时间：2012-07-30T15:06:01.403
> 
> 标签：c#, c++, xna, cocos2d-x

嗨，我正在将我的游戏从 c#/xna 移植到 c++/cocos2d-x，我试图找到一个与 Vector2 等效的版本。我确实找到了一对，比如 b2Vec2，我只是不确定我应该使用哪一个，因为我需要它是跨平台的，而不是绑定到特定的操作系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:37:15.373

您要查找的类是名称不佳的*[`CCPoint`](http://www.cocos2d-x.org/reference/native-cpp/d2/df3/classcocos2d_1_1_c_c_point.html)类。Cocos2d-x 是 Cocos2d API 的直接端口，它是为 Objective C 设计的。由于 Objective C 没有运算符重载，Cocos2d-x 也没有，即使它是用存在运算符重载的 C++ 编写的。所以你必须[使用自由函数来做向量运算](http://www.cocos2d-x.org/reference/native-cpp/dc/d53/_c_c_point_extension_8h.html#)。

*：如果您想知道*为什么*它的名字不好，“向量”涵盖了“点”（空间中的位置）和“方向”（空间中的方向）的概念。向量可以是这些中的任何一个。添加向量在几何上具有特定的含义，与它们相减、相乘、取长度等一样。将一个点添加到另一个点在几何上是无意义的。您只能添加矢量*方向*，而不是位置。您可以将位置转换为另一个空间，但不能通过将一个位置添加到另一个位置来实现。

# powershell - Powershell 通过代理远程调用

> ID：11724182
> 
> 赞同：0
> 
> 时间：2012-07-30T15:06:13.827
> 
> 标签：powershell

我需要先清除远程服务器上的文件夹，然后再将新文件复制到该文件夹​​。

所以我客户端上的脚本包含以下内容：

```
Invoke-Command -Computer $TargetServer -ScriptBlock { Remove-Item $ClearPath } 
```

当我运行它时，我收到以下错误：

```
Connecting to remote server failed with the following error message : The client cannot connect to the destination specified in the request. Verify that the service on the destination is running and is accepting requests 
```

我在 technet 上查找了这个，我的理解是，如果服务器使用代理（我在尝试访问 Internet 时使用代理），那么我需要使用 $PSSessionOption 对象。所以我改变了我的脚本，以便首先执行以下内容：

```
$User = "group\tfs_service"
$Password = ConvertTo-SecureString -String "x" -AsPlainText -Force
$Credential = New-Object –TypeName System.Management.Automation.PSCredential –ArgumentList $User, $Password
$PSSessionOption = New-PSSessionOption -ProxyAccessType IEConfig -ProxyAuthentication Negotiate -ProxyCredential $Credential 
```

现在，当我运行脚本时，出现以下错误：

```
 Connecting to remote server failed with the following error message : The WinRM client cannot process the request. Setting proxy information is not valid when the HTTP transport is specified. Remove the proxy information or change the transport and try the request again 
```

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:44:44.040

似乎我在吠叫错误的树，以为我需要配置代理。唯一的问题是我没有在远程服务器上启用 powershell 远程处理。我可以通过在提升的 powershell 窗口中执行以下命令来做到这一点：

```
Enable-PSRemoting 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:20:04.120

powershell 客户端和远程 powershell 服务器之间的通信必须保持安全，以避免代理窃听（= 中间人），这就是 Powershell 远程处理仅在传输是 HTTPS 时才支持代理的原因。

这篇博客文章[Proxy Servers and WinRM](https://docs.microsoft.com/en-us/windows/win32/winrm/proxy-servers-and-winrm)展示了如何设置服务器端 HTTPS 侦听器以及如何通过代理连接到此侦听器。

设置服务器端 HTTPS 侦听器后，尝试从客户端调用您的脚本块，如下所示：

```
Invoke-Command -Computer $TargetServer -ScriptBlock { Remove-Item $ClearPath } -sessionoption $PSSessionOption -UseSSL -Authentication Basic -Credential $Credential 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:02:08.243

您是否尝试在另一台服务器上运行 WinRm quickconfig？这将配置您的脚本所针对的 winrm 侦听器

# html - 导致奇怪锚行为的阿拉伯文本

> ID：11724189
> 
> 赞同：5
> 
> 时间：2012-07-30T15:06:22.480
> 
> 标签：html, css, right-to-left

我今天遇到了一个奇怪的问题，一个锚似乎与 2 个阿拉伯语的锚合并（因为需要一个更好的词）。

谁能解释为什么会发生这种情况？

有一个 jsfiddle 在[这里](http://jsfiddle.net/d7y7h/1/)展示了这一点。

这是下面的html。

```
<div>
    <a href="#">بيان الخصوصية</a>
    <a href="#">شروط الاستخدام</a>
    <a href="#">© 2012 Hewlett-Packard Development Company, L.R</a>
</div>​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:12:20.770

尝试将文本方向设置为从右到左。

CSS：

```
.rtl {direction:rtl; } 
```

HTML：

```
<div class="rtl">
    <a href="#">بيان الخصوصية</a>
    <a href="#">شروط الاستخدام</a>&nbsp;
    <a href="#">© 2012 Hewlett-Packard Development Company, L.R</a>
</div> 
```

您可能希望将 rtl 放在整个页面的 body 标记上，并为英语部分创建一个从左到右的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:50:43.817

发生这种情况是因为您的字符具有不同的固有方向性：从左到右（拉丁字母）强，从右到左（阿拉伯字母）强，以及或多或少是中性或自适应的（数字、版权符号）。真正经常引起麻烦的是中立者。

为了解决这个问题，假设您的整体布局方向性应该是从右到左（对于主要是阿拉伯语内容来说很自然），因此例如三个`a`元素设置为从右到左，设置

```
body{ direction: rtl; }
:lang(en) { unicode-bidi: embed; direction: ltr; } 
```

并将属性添加`lang="en"`到最后一个`a`元素。您也可以使用一个类，比如`class="en"`，和一个类选择器，比如`.en`，但是使用`lang`标记和语言选择器听起来更自然。

这样，英文文本的整体 rtl 方向性被覆盖，*并且*该文本被转换为“方向性隔离”，因此那里的任何中性字符都服从 ltr 方向性，而不会受到相邻 rtl 文本的干扰。

这将使版权声明显示为英文，版权标志在左侧。

# android - 输入密码时启动我的应用程序？

> ID：11724192
> 
> 赞同：5
> 
> 时间：2012-07-30T15:06:34.210
> 
> 标签：android

当密码（例如`*#*#12345#*#*`在拨号器中输入）时，我将如何启动我的应用程序？

我在 Android 文档中找不到解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T16:24:49.137

我是这样做的：

我将主要活动更改为没有意图过滤器：

```
<activity
            android:name=".ParentTrap"
            android:label="@string/title_activity_parent_trap"
            android:theme="@android:style/Theme.Holo" >
        </activity> 
```

然后我使用意图过滤器操作制作了一个广播接收器：`android.provider.Telephony.SECRET_CODE`

然后我向其中添加了数据。整个事情如下：

```
<receiver android:name=".ParentTrap$Launch" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SECRET_CODE" />

                <data
                    android:host="(secret code)"
                    android:scheme="android_secret_code" />
            </intent-filter>
        </receiver> 
```

完成后，创建一个类（我在主类中创建了 Launch 类，扩展了广播接收器），然后在 onReceive 类中，触发启动活动的意图。

然后输入`*#*#(secret code)#*#*`拨号器将启动应用程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T15:12:44.327

使用此操作创建广播接收器：

*   [ACTION_NEW_OUTGOING_CALL](http://developer.android.com/reference/android/content/Intent.html#ACTION_NEW_OUTGOING_CALL)

在附加信息中，您可以找到[拨打的号码](http://developer.android.com/reference/android/content/Intent.html#EXTRA_PHONE_NUMBER)。

*编辑：*这是广播接收器的[教程](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:45:53.167

安装广播接收器也许你应该注册到正确的活动意图。例如[Intent.ACTION_CALL](http://developer.android.com/reference/android/content/Intent.html#ACTION_CALL)看起来很有前途。问题是如何过滤意图以仅接收这一特定数字。我怀疑它看起来像这样（我正在根据我在文档中找到的内容进行计算）：

```
<action name=".YourAction">
    <intent-filter . . . >
        <action android:name="android.intent.action.CALL" />
        <!-- data is crutial here, you have to figuire it out exacly yourself -->
        <data android:scheme="tel" android:path="yourSpecyficSecretCode" />
    </intent-filter>
</action> 
```

看看[这里](http://developer.android.com/guide/components/intents-filters.html)和[这里](http://developer.android.com/guide/topics/manifest/data-element.html#scheme)。使用 LogCat 查看确切的意图 contatins 然后您可以正确过滤它。

# c# - 2 DateTime c#的时间比较

> ID：11724193
> 
> 赞同：4
> 
> 时间：2012-07-30T15:06:39.223
> 
> 标签：c#, datetime

比较 2 个`DateTime`对象的时间的最佳方法是什么？

例如

*   日期时间1 = 2012-07-30 01:00
*   日期时间2 = 2012-08-01 02:00

我只需要比较时间而不是日期。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T15:09:14.147

```
if (DateTime1.TimeOfDay > DateTime2.TimeOfDay)
{
    MessageBox.Show("DateTime1 is later");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T15:09:25.977

您可以使用[`DateTime.TimeOfDay`](http://msdn.microsoft.com/en-us/library/system.datetime.timeofday.aspx)来获取要比较的时间部分。这与您所做的基本相同`d - d.Date`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T15:09:37.973

使用`TimeOfDay`属性：

[http://msdn.microsoft.com/en-us/library/system.datetime.timeofday.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.timeofday.aspx)

这为您提供了没有日期部分的值的时间部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T15:08:44.863

尝试这样的事情：

```
TimeSpan ts = d1 - d2;
int totalSecondNumber = ts.TotalSeconds; 
```

TimeSpan 是日期之间的差异。它为您提供 TotalSeconds、TotalHours 等属性或仅提供 Seconds、Hours 等属性

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-14T12:06:38.160

使用 DateTime.TimeOfDay 的示例代码

```
DateTime timeNow = DateTime.Now;
DateTime fromTime = new DateTime(2015, 11, 14, 08, 00, 00);
DateTime toTime = new DateTime(2015, 11, 14, 14, 30, 00);

if (TimeSpan.Compare(timeNow.TimeOfDay, fromTime.TimeOfDay) == 1 && TimeSpan.Compare(timeNow.TimeOfDay, toTime.TimeOfDay) == -1)  
{
} 
```

在上面的代码中，如果变量 timeNow 介于 08:00:00 到 14:30:00 之间，则条件为真。

```
1 represents time1 > time2
0 represents time1 = time2
-1 represents time1 < time2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T15:10:28.837

如果您尝试比较两次之间的差异，您应该使用 Timespan 对象。

通过使用时间跨度，您可以获得秒、小时和天等方面的差异。

查看以下内容以获取更多信息：

[时间跨度](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)

# regex - VBA 正则表达式 - 匹配不以特定单词开头的表达式

> ID：11724196
> 
> 赞同：5
> 
> 时间：2012-07-30T15:06:55.167
> 
> 标签：regex, vba

我正在寻找创建一个 VBA 正则表达式，它将在一组括号内找到两个特定字符串的存在。

例如，在这个表达式中：

(aaa, bbb, ccc, ddd, xxx aaa)

它应该以某种方式告诉我它在表达式中找到了“aaa”和“xxx aaa”。即，由于前面没有“xxxx”的“aaa”匹配，并且表达式后面的“xxx aaa”也有匹配，它应该返回true。由于这两个序列可以以任一顺序出现，因此反过来也应该是正确的。

所以我认为表达式/s会是这样的：

"( *xxx aaa"* [^x][^x][^x][^x] *aaa* )"

以一种顺序查找单词并且

"( *aaa"* [^x][^x][^x][^x] *xxx aaa* )"

换成另一个顺序的单词。

这有意义吗？还是有更好的方法？

我知道这正在改变规范，但有一个重要的附录 - 术语之间不能有任何中间括号。

例如，这不应该匹配：

(aaa, bbb, ccc, ddd, (eee, xxx aaa))

换句话说，我试图只在一组匹配的括号之间查找。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:22:34.613

从你的问题中并不清楚你到底想要什么（也许这里真的不需要 Regexp），但这可能很接近：

```
Sub Tester()
    RegexpTest ("(aaa, bbb, ccc, ddd, xxx aaa)")
End Sub

Sub RegexpTest(txt As String)
    Dim re As Object
    Dim allMatches, m

    Set re = CreateObject("VBScript.RegExp")
    re.Pattern = "([^,\(]*aaa)"
    re.ignorecase = True
    re.Global = True

    Set allMatches = re.Execute(txt)

    For Each m In allMatches
        Debug.Print Trim(m)
    Next m

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:20:02.777

零宽度前瞻断言是您的朋友。

```
Function FindInParen(str As String, term1 As String, term2 As String) As Boolean
  Dim re As New VBScript_RegExp_55.RegExp

  re.Pattern = "\(" & _
               "(?=[^()]*)\)" & _
               "(?=[^()]*\b" & RegexEscape(term1) & "\b)" & _
               "(?=[^()]*\b" & RegexEscape(term2) & "\b)"

  FindInParen = re.Test(str)
End Function

Function RegexEscape(str As String) As String
  With New VBScript_RegExp_55.RegExp
    .Pattern = "[.+*?^$|\[\](){}\\]"
    .Global = True
    RegexEscape = .Replace(str, "\$&")
  End With
End Function 
```

这种模式读作：

*   从一个开放的paren开始，检查：
    *   匹配的结束括号在某处后面，并且内部没有嵌套的括号
    *   发生`term1`在结束括号之前
    *   发生`term2`在结束括号之前

由于我使用了前瞻 ( `(?=...)`)，因此正则表达式引擎实际上从未在字符串上向前移动，因此我可以链接尽可能多的前瞻断言并检查它们。副作用是字符串中出现的顺序`term1`无关紧要`term2`。

我在控制台（“立即窗口”）上对其进行了测试：

```
? FindInParen("(aaa, bbb, ccc, ddd, xxx aaa)", "aaa", "xxx aaa")
True

? FindInParen("(aaa, bbb, ccc, ddd, (eee, xxx aaa))", "aaa", "xxx aaa")
True

? FindInParen("(aaa, bbb, ccc, ddd, (eee, xxx aaa))", "bbb", "xxx aaa")
False 
```

笔记：

*   第二个测试产生`True`，因为 - 从技术上讲 - 两者`aaa`都`xxx aaa`在同一组括号内。
*   正则表达式不能处理嵌套结构。你永远不会用正则表达式得到嵌套括号。仅使用正则表达式，您将永远无法找到*“一组匹配的括号”* - 只有一个中间没有其他括号的打开/关闭对。如果需要处理嵌套，请编写解析器。
*   在您的项目中引用*“Microsoft VBScript 正则表达式 5.5” 。*

* * *

FWIW，这是一个最小的嵌套感知函数，适用于上面的第二个测试用例：

```
Function FindInParen(str As String, term1 As String, term2 As String) As Boolean
  Dim parenPair As New VBScript_RegExp_55.RegExp
  Dim terms As New VBScript_RegExp_55.RegExp
  Dim matches As VBScript_RegExp_55.MatchCollection

  FindInParen = False
  parenPair.Pattern = "\([^()]*\)"
  terms.Pattern = "(?=.*?[(,]\s*(?=\b" & RegexEscape(Trim(term1)) & "\b))" & _
                  "(?=.*?[(,]\s*(?=\b" & RegexEscape(Trim(term2)) & "\b))"

  Do
    Set matches = parenPair.Execute(str)
    If matches.Count Then
      If terms.Test(matches(0).Value) Then
        Debug.Print "found here: " & matches(0).Value
        FindInParen = True
      End If
      str = parenPair.Replace(str, "[...]")
    End If
  Loop Until FindInParen Or matches.Count = 0

  If Not FindInParen Then
    Debug.Print "not found"
  End If

  If InStr("(", str) > 0 Or InStr(")", str) > 0 Then
    Debug.Print "mis-matched parens"
  End If
End Function 
```

安慰：

```
? FindInParen("(aaa, bbb, ccc, ddd, (eee, xxx aaa))", "aaa", "xxx aaa")
not found
False

? FindInParen("(aaa, bbb, ccc, ddd, (eee, xxx aaa))", "eee", "xxx aaa")
found here: (eee, xxx aaa)
True 
```

# ruby - 在 Ruby 中使用浏览器作为 GUI

> ID：11724201
> 
> 赞同：2
> 
> 时间：2012-07-30T15:07:00.397
> 
> 标签：ruby, internet-explorer, user-interface, vbscript

在 vbscript 中，通常使用浏览器 (IE) 作为 GUI。请参阅下面的示例，它会询问名称并将其返回给脚本。在 Ruby 中，您有一些 GUI，例如 Tcl 和 Shoes，但我想知道如何在浏览器中执行此操作。最简单的 Ruby 解决方案是什么？所以没有额外的 gem 或包，没有已经在运行的服务器。如果需要 gem，最好是可以在 Windows 中正常工作的 gem。

这里是 vbscript 示例

```
Set web = CreateObject("InternetExplorer.Application")
If web Is Nothing Then
  msgbox("Error while loading Internet Explorer")
  Wscript.Quit
Else
  with web
    .Width = 300
    .Height = 175
    .Offline = True
    .AddressBar = False
    .MenuBar = False
    .StatusBar = False
    .Silent = True
    .ToolBar = False
    .Navigate "about:blank"
    .Visible = True
  end with
End If

'Wait for the browser to navigate to nowhere
Do While web.Busy
  Wscript.Sleep 100
Loop

'Wait for a good reference to the browser document
Set doc = Nothing
Do Until Not doc Is Nothing
  Wscript.Sleep 100
  Set doc = web.Document
Loop

'Write the HTML form
doc.Write "Give me a name<br><form><input type=text name=name ><input type=button name=submit id=submit value='OK' onclick='javascript:submit.value=""Done""'></form>"
Set oDoc = web.Document
Do Until oDoc.Forms(0).elements("submit").Value <> "OK"
  Wscript.Sleep 100
  If web Is Nothing or Err.Number <> 0 Then
    msgbox "Window closed"
    Wscript.Quit
  End If
Loop
name = oDoc.Forms(0).elements("name").value
oDoc.close
set oDoc = nothing
web.quit
set web = nothing
Wscript.echo "Hello " & name 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T16:57:51.550

您可以使用 Watir 宝石。gem 最初旨在驱动 IE 浏览器，但会满足您的需要。

查看：

1) 安装 Watir gem

2) 使用以下内容创建一个 test.htm 文件：

```
Give me a name<br>
<form name="myForm" title="myForm">
    <input type="text" id="name" >
    <input id="submit" type="button" value="OK" onclick='document.myForm.submit.value="Done"'>
</form> 
```

3) 运行以下 watir 脚本，这将打开浏览器到您的表单。输入名称后点击【确定】，即可输出名称。请注意，您可能需要根据保存 test.htm 的位置更改脚本中文件的位置：

```
require 'watir'

b = Watir::IE.new
begin
    b.goto('file:///C:/Documents%20and%20Settings/Setup/Desktop/test.htm')
    begin
        sleep(5)
    end until b.button(:id, 'submit').value != "OK"
    name = b.text_field.value
ensure
    b.close
end
puts name 
```

我认为这表明了做你想做的事情的一般可行性。表单的验证和动态创建也是可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:58:07.457

通常在 Ruby 中，人们使用 Rails、Sinatra 或 Camping 之类的东西来制作 Web 应用程序。这些都需要宝石。如果您想要更类似于您的 VBscript 示例的东西，而不必使用 gems，您可能可以使用 Win32OLE（尽管我没有尝试将它打开并与 IE 交互）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T18:33:37.563

`win32ole`已经[提到过](https://stackoverflow.com/a/11726110/676874)。

这是一个示例脚本：

```
require 'win32ole' 
def inputbox( message, title="Message from #{__FILE__}" )
  # returns nil if 'cancel' is clicked
  # returns a (possibly empty) string otherwise
  # hammer the arguments to vb-script style
  vb_msg = %Q| "#{message.gsub("\n",'"& vbcrlf &"')}"|
  vb_msg.gsub!( "\t", '"& vbtab &"' )
  vb_msg.gsub!( '&""&','&' )
  vb_title = %Q|"#{title}"|
  # go!
  sc = WIN32OLE.new( "ScriptControl" )
  sc.language = "VBScript"
  sc.eval(%Q|Inputbox(#{vb_msg}, #{vb_title})|)
  #~ sc.eval(%Q|Inputbox(#{vb_msg}, #{vb_title}, aa,hide)|)
end

#simple use
res = inputbox "Your input please." 
p res 
```

要提供消息框，您可以使用：

```
require 'win32ole'
def popup(message)
  wsh = WIN32OLE.new('WScript.Shell')
  wsh.popup(message, 0, __FILE__)
end 
```

在[http://rubyonwindows.blogspot.com/2007/04/ruby-excel-inputbox-hack.html](http://rubyonwindows.blogspot.com/2007/04/ruby-excel-inputbox-hack.html)（此示例的来源）中，您还可以找到使用 Excel 的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T16:29:45.787

好吧，我相信最简单的 Windows 图形用户界面是简陋的命令提示符。不需要 gems，据我从上面的 VBscript 代码中可以看出，不需要打开浏览器或将内容保存到 excel 或文本文件中。所以用你的简约规格;）你在这里..：

```
 puts "Give me a name" #output to cmd
    $name=gets.chomp #get a name from user 

    puts "Hello there..: #{$name}" 
```

上面的程序将使用 windows cmd 作为 GUI，并从用户那里获取输入并将其输出到屏幕上。然后，如果您想使用带有按钮和东西的表单，请使用几个表单创建一个简单的网站并按以下方式加载它（需要一个 gem --> 'selenium-webdriver'）

```
require "selenium-webdriver"        #selenium lib
driver = Selenium::WebDriver.for :firefox

!30.times { if (driver.navigate.to("http://www.google.com") rescue false) then break else sleep 1; end }  #loop that will try 30times (once every sec to access the google.com) 
```

如果您需要更多关于如何从/向文件传递/读取值的信息，请告诉我。祝你好运！

# c# - 从代码隐藏更改母版页上的 DIV 标记高度

> ID：11724206
> 
> 赞同：0
> 
> 时间：2012-07-30T15:07:24.460
> 
> 标签：c#, asp.net, css, master-pages

我无法更改**母版页上****div**项的**背景颜色**和高度。

 ****我在 default.aspx 页面上有一个按钮，它位于母版页的“内部”。我在 default.aspx 上有 <%@ MasterType... 元素和一个名为“selectedPanel”的公共枚举属性。当我单击 default.aspx 页面上的按钮时，“selectedPanel”属性正在更改，但浏览器上没有任何反应。

当我调试时，“selectedPanel”的属性 set{...} 被很好地触发。在我看来，在“selectedPanel”属性发生变化之后，一些“刷新”或类似的东西丢失了。

**页面逻辑**如下：单击 default.aspx -> 在母版页上设置“SelectedPanel”属性 -> 在母版页上更改“searchPlace”DIV 的背景颜色。

我阅读了这个网站上的所有其他问题，但我的项目出了点问题......

**注册**主页

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="reg.Master.cs" Inherits="Reg.Reg" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <link href="App_Themes/Default/reg.css" rel="stylesheet" type="text/css" />
</head>
<body>
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server" />

<div id="container">

    <div id="searchPlace" runat="server">
        <%-- Search --%>
        <asp:ContentPlaceHolder ID="cphSearch" runat="server">
        </asp:ContentPlaceHolder>
    </div>

</div>
</form>    
</body>
</html> 
```

**Reg.Master.cs**页面

```
public enum panelItem
{
    simpleSearch,
    advancedSearch,
    newItem
} 
```

**我想在这里更改 DIV 背景颜色：**

```
public panelItem selectedPanel
{
    set
    {
        if (value == panelItem.simpleSearch)
        {
            searchPlace.Style.Add(HtmlTextWriterStyle.BackgroundColor, "green");
        }
        else if (value == panelItem.advancedSearch)
        {
            searchPlace.Style.Add(HtmlTextWriterStyle.BackgroundColor, "black");
        }
    }
} 
```

**reg.css**文件

```
#searchPlace
 {
     float:left;
     top: 100px;
     width:800px;
     height:350px;
     padding-left: 10px;
     padding-right: 10px;
 } 
```

**Default.aspx**页面

```
<%@ Page Title="Reg" Language="C#" MasterPageFile="~/reg.Master" AutoEventWireup="true" CodeBehind="default.aspx.cs" Inherits="Reg._default" %>
<%@ MasterType VirtualPath="~/reg.Master" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>

<asp:Content ID="cntSearch" ContentPlaceHolderID="cphSearch" runat="server">
<asp:UpdatePanel ID="updSearch" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true">
<ContentTemplate>
    <asp:Button ID="btnChangeColor" runat="server" onclick="changeColor" Text="Button" />
</ContentTemplate>
</asp:UpdatePanel>
</asp:Content> 
```

**Default.aspx.cs**文件

```
protected void btnChangeColor_Click(object sender, EventArgs e)
{
    Master.selectedPanel = Reg.panelItem.simpleSearch;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:22:10.640

问题在于 Ajax updatePanel。我无法在 updatePanel 之外更新 DIV (searchPlace) 属性。

**母**版页：

```
<div id="container">
   <%-- Search --%>
   <asp:ContentPlaceHolder ID="cphSearch" runat="server">
   </asp:ContentPlaceHolder>
</div> 
```

**默认.aspx**页面：

```
<asp:Content ID="cntSearch" ContentPlaceHolderID="cphSearch" runat="server">
<asp:UpdatePanel ID="updSearch" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="true">
<ContentTemplate>
<div id="searchPlace" runat="server"> <-- DIV tag moved here
    <asp:Button ID="btnChangeColor" runat="server" onclick="changeColor" Text="Button" />
</div>
</ContentTemplate>
</asp:UpdatePanel> 
```

**Default.aspx.cs 上的事件句柄**：

```
searchPlace.Style.Add(HtmlTextWriterStyle.Height, "300px");
searchPlace.Style.Add(HtmlTextWriterStyle.BackgroundColor, "Black");
updSearch.Update(); 
```****

# opencv - 使用 open cv 合并不同通道中的图像

> ID：11724210
> 
> 赞同：0
> 
> 时间：2012-07-30T15:07:34.167
> 
> 标签：opencv

我正在将 opencv# 用于一个项目并尝试合并两个图像（一个是具有 3 个通道的图像，另一个是单通道图像）。我尝试使用方法 Cv.ScaleAdd，但它不会合并具有不同通道的两个图像。我需要一些帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:14:20.280

您希望结果是灰度还是彩色？添加两个图像的最简单方法是为每个图像声明一个权重。一个说 0.4，另一个说 0.6。然后逐个像素地将一个图像乘以 0.4，将另一幅图像乘以 0.6，然后将它们相加以获得新的像素值。如果您希望最终结果为灰度，则从将 3 通道图像转换为灰度开始，如果您希望它是彩色，则通过将灰度转换为彩色开始。将灰度转换为颜色实际上不会给它上色，它只会用三个通道表示灰色。您可以自己编写代码，或者我怀疑函数调用

```
cv::cvtColor(input,output,CV_GRAY2BGR);
or
cv::cvtColor(input,output,CV_BGR2GRAY); 
```

其次是

```
cv::scaleAdd 
```

会成功的。

# sql - SQL 如何将表复制到另一台服务器

> ID：11724211
> 
> 赞同：0
> 
> 时间：2012-07-30T15:07:40.093
> 
> 标签：sql, sql-server-2008, copy

我正在使用 VPN 连接和远程桌面登录服务器并尝试从一个表中获取数据。

我尝试了“生成脚本”，但它太大了，当我在本地 SQL 服务器（2008）上运行它时，它显示“内存不足”。然后我尝试在本地 SQL Server Management Studio 上连接到他们的数据库，但由于权限问题而失败。此外，由于它的大小，备份整个数据库是不可能的。

有没有其他方法可以帮助我从一个表复制到另一台服务器？另外，是否可以仅在表级别备份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:10:42.080

最简单的方法是：
1\. 在源服务器上创建空数据库
2\. 使用导出数据向导复制表
3\. 备份并将此数据库传输到第二台服务器

或者，您可以尝试运行导出/导入数据向导并设置源服务器和目标服务器，如果它们同时可供您使用（如果您的网络配置允许）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:16:50.700

当所有其他方法都失败时，如果可能，请创建您的“创建表”DDL 脚本。远程运行它。然后从源数据生成一系列插入语句。将插入语句保存到文本文件中。远程运行文本文件。

# javascript - Google 地图 API 的堆栈溢出 (IE7 IE8)

> ID：11724212
> 
> 赞同：0
> 
> 时间：2012-07-30T15:07:43.730
> 
> 标签：javascript, google-maps-api-3, internet-explorer-8, internet-explorer-7, stack-overflow

我一直在解决我们网站上的谷歌地图问题，该问题在 IE7 和 IE8 上首次加载时发生。我试图通过结合 firefox 和 ie8 调试器来处理该解决方案，但这非常困难（而且我的老板也在推动我解决其他问题），因为 JS 被缩小并且 IE 调试器对此无能为力。我们有同一个站点的两个版本，一个位于 irelandhotels.com，开发环境位于 groupbke.young.netaffinity.net。第一个有 500 多个标记，开发环境只有 5 个左右。但是，两个站点都出现此问题。

执行将进入函数 yf，然后进入一个包含 3 个未命名函数的循环。

我在这里发现了一篇关于这个问题的有趣文章：http: [//cappuccino.org/discuss/2010/03/01/internet-explorer-global-variables-and-stack-overflows/](http://cappuccino.org/discuss/2010/03/01/internet-explorer-global-variables-and-stack-overflows/)

我们的地图初始化代码在这里： http: [//groupbke.young.netaffinity.net/bookings/googlemap](http://groupbke.young.netaffinity.net/bookings/googlemap)

我有一些图片，到目前为止无法发布它们，也无法发布它们的链接：/

任何帮助将不胜感激。

格格利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:15:07.820

我过去总是这样做是这样的：

```
function initialize(mapid) {
    // make this local to your initialize function
    var hoteldata = [
        ['Griffen Hotel S1', 53.27093787103, -6.30448181406804, 'Lorem Ipsum', 1],
        ['Young Testing Hotel - LiÃ¨ge', 53.33932, -6.261427, 'Lorem Ipsum', 4]
    ];

    var myOptions = {
        zoom: 15,  // according to the documentation zoom and center are required when creating instances of the Map class
        center: new google.maps.LatLng(50.820645,-0.137376),
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: false
    };
    var bounds = new google.maps.LatLngBounds();
    var map = new google.maps.Map(document.getElementById(mapid), myOptions);
    var infowindow = new google.maps.InfoWindow();
    var markers = [];
    var i, latLng, img;

    for (i = 0; i < hoteldata.length; i++) {
        latLng = new google.maps.LatLng(hoteldata[i][1], hoteldata[i][2]);
        bounds.extend(latLng);

        // why not use a switch here?
        img = '/images/hotel-marker.png';
        if (hoteldata[i][4] == 2) {
            img = '/images/country-marker.png';
        }
        if (hoteldata[i][4] == 3) {
            img = '/images/guesthouse-marker.png';
        }
        if (hoteldata[i][4] == 4) {
            img = '/images/hotel-self-marker.png';
        }
        var marker = new google.maps.Marker({
        position: latLng,
        icon: img,
        shadow: '/images/marker-shadow.png'
        });
        markers.push(marker);

        bindInfoWindow(marker, map, infowindow, hoteldata[i][3]);
    }

    map.fitBounds(bounds);
}

function bindInfoWindow(marker, map, infowindow, html) { 
    google.maps.event.addListener(marker, 'click', function() { 
        infowindow.setContent(html); 
        infowindow.open(map, marker); 
    }); 
} 
```

此外，（尽管您说这不是问题）IE 讨厌以逗号结尾的数组或结构。

```
var hoteldata = [
    ['Griffen Hotel S1', 53.27093787103, -6.30448181406804, '<div class="nearby-hotel"> <h1><a href="/hotels/ireland/dublin/dublin/griffen-hotel-s1">Griffen Hotel S1</a></h1> <div class="star-rating-0"></div><div class="clear"></div> <div class="nearby-hotel-image l"> <a href="/hotels/ireland/dublin/dublin/griffen-hotel-s1"><img src="http://groupbke.young.netaffinity.net/images/placeholder-60px.jpg" border="1" class="imagetype1"/></a> </a> </div> <div class="nearby-hotel-description l">  <a class="nearby-hotel-desc" href="/hotels/ireland/dublin/dublin/griffen-hotel-s1">Located in the heart of the city, this charming 100 executive Bedroom hotel is just a minute\'s walk from the main shopping and business districts.      Just step into the reception area and immediately you will know that you are somewhere very special. The beautiful reception area invites you to relax with the daily paper or a soothing drink whilst you contemplate your day.    With sumptuous executive hotel rooms and something for all the family, the Griffen Hotel undoubtedly earns its reputation as one of the cities finest.   </a> <a href="/hotels/ireland/dublin/dublin/griffen-hotel-s1" class="btn-small">Book Now</a> </div> <div class="clear"></div> </div>', ],
    ...
]; 
```

删除最后一个，就在第一个关闭 ] 之前，它看起来像：

```
var hoteldata = [
    ['Griffen Hotel S1', 53.27093787103, -6.30448181406804, '<div class="nearby-hotel"> <h1><a href="/hotels/ireland/dublin/dublin/griffen-hotel-s1">Griffen Hotel S1</a></h1> <div class="star-rating-0"></div><div class="clear"></div> <div class="nearby-hotel-image l"> <a href="/hotels/ireland/dublin/dublin/griffen-hotel-s1"><img src="http://groupbke.young.netaffinity.net/images/placeholder-60px.jpg" border="1" class="imagetype1"/></a> </a> </div> <div class="nearby-hotel-description l">  <a class="nearby-hotel-desc" href="/hotels/ireland/dublin/dublin/griffen-hotel-s1">Located in the heart of the city, this charming 100 executive Bedroom hotel is just a minute\'s walk from the main shopping and business districts.      Just step into the reception area and immediately you will know that you are somewhere very special. The beautiful reception area invites you to relax with the daily paper or a soothing drink whilst you contemplate your day.    With sumptuous executive hotel rooms and something for all the family, the Griffen Hotel undoubtedly earns its reputation as one of the cities finest.   </a> <a href="/hotels/ireland/dublin/dublin/griffen-hotel-s1" class="btn-small">Book Now</a> </div> <div class="clear"></div> </div>'],
    ...
]; 
```

# c++ - 为什么 *(pa-1) 的输出是 `a` 的最后一个元素？

> ID：11724215
> 
> 赞同：4
> 
> 时间：2012-07-30T15:07:50.077
> 
> 标签：c++

我从以下代码的输出中得到的是`*(pa-1)=5`：为什么会这样？

```
#include<iostream>

using namespace std;

int main(){

    int a[5]={1,2,3,4,5};
    int *pa=(int *)(&a+1);

    cout<<"*(pa-1)="<<*(pa-1)<<endl;

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T15:11:51.647

`&a`是数组的地址，它的类型为“pointer-to- `int[5]`”。因此`&a + 1`，前进了一个完整的五个数组，并且点刚好经过该数组。

`pa`是一个类型双关指针*，它现在将相同的地址视为*整数*数组（不是数组！）中的地址。因此，它与过去的指针相同`a + 5`。减一给出指向数组中最后一个元素的指针，即`5`.

[*) 这种类型的双关语是可以接受的，并且只要数组的基础类型是*standard-layout*就可以满足您的期望`int`。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:16:19.617

你还能期待什么？ `&a`有类型，`int (*)[5]`所以`&a + 1`指向下一个；它是用于迭代元素的经典“结束”迭代器。然后，您将其转到 , 并访问它。形式上，我认为您的代码具有未定义的行为，因为您可以合法地对 a 的结果做的唯一事情是将其转换回原始类型。（在涉及到字符类型的指针的情况下也有例外。）实际上，在整个标准中散布的各种要求意味着您将获得最后一个in的地址。`int[5]``a``int[5]``reinterpret_cast``int*``reinterpret_cast``int``a`

# sql-server - OLE DB 目标任务在值的末尾添加值

> ID：11724217
> 
> 赞同：2
> 
> 时间：2012-07-30T15:07:56.960
> 
> 标签：sql-server, sql-server-2008, ssis

当我尝试时，一个简单的数据流会引起很多麻烦

1.  **从一列（ oracle 9.2.0.8**）读取数据和
2.  直接写入oracle目标表（同一个数据库）

**我导入**的列（**varchar2 25byte**）如下所示：

 **```
241200001
151200001
211200001
161200001
1231704383 
```

**当我选择目标**表的列（**char 10byte**）时，它看起来像这样：

 **```
241200001
151200001 3
211200001 3
161200001 3
1231704383 
```

* * *

以下屏幕截图显示了源和目标之间的数据网格。在这里，一切似乎都很好。

![在此处输入图像描述](../Images/9eee4318e975cc90e9af2206ef010c2c.png)

下一个屏幕截图显示，添加了零和结尾，但不是到处都是。（这是目标任务的预览窗口，但在 TOAD 中看起来是一样的）

![在此处输入图像描述](../Images/f1dd16c0b854dc8aac302afee77c6571.png)

* * *

检查值的长度会得到以下结果，这看起来还不错：

```
Select
id,
length(id) as length
from test_view

ID                           LENGTH
------------------------- ----------
42120001                           8
23120001                           8
22120001                           8
26120001                           8
25120001                           8
22120001                           8
22120001                           8
23120001                           8
18120001                           8
18120001                           8
1235800020                        10
58120001                           8
52120001                           8
52120001                           8
57120001                           8
52120001                           8
52120001                           8 
```

* * *

出于某种原因，末尾有一个空格添加的值。我已经看到在 之间添加了值`1-3`，我真的很想知道这是从哪里来的。如果您担心较短的目的地，则不会发生截断。当我将目标列设置为`varchar2`它时，它可以工作，但我们需要保持原样。

在数据流内部，数据是一个`string(25)`. 那么为什么这个目的地会有问题呢？

**更新：**

这很奇怪。我认为代码页警告不会导致此错误。输入数据看起来不错，包也很标准。这真的是驱动程序问题，还是目标任务的问题/错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:12:49.123

尝试在数据流中使用派生列转换将 varchar(25) 显式转换为 char(10) - 错误可能来自未按预期工作的隐式转换。****

# r - 带有r-plugin的gvim（linux）无法识别带有注释的.R文件

> ID：11724218
> 
> 赞同：1
> 
> 时间：2012-07-30T15:08:06.363
> 
> 标签：r, vim, vim-plugin

注意：重写了原始问题以反映给出的正确解决方案。

vim (ubuntu 12.04 w/ r-plugin) 无法将 .R 或 .r 文件识别为 R 文件，其中安装了 r-plugin 并在文件中添加注释，如下所示。

```
# comment
x <- 2
x 
```

没有评论，一切正常。我的 ~/.vim/filetype.vim 读取：

```
augroup filetypedetect
  au! BufRead,BufNewFile *.r         setfiletype r
  au! BufRead,BufNewFile *.R         setfiletype r
  au! BufRead,BufNewFile *.Rnw       setf noweb
augroup END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:16:04.277

多种文件类型似乎使用该`R`扩展名。我发现这个`$VIMRUNTIME/filetype.vim`：

```
" Rexx, Rebol or R
au BufNewFile,BufRead *.r,*.R           call s:FTr()

func! s:FTr()
let max = line("$") > 50 ? 50 : line("$")

for n in range(1, max)
    " Rebol is easy to recognize, check for that first
    if getline(n) =~? '\<REBOL\>'
    setf rebol
    return
    endif
endfor

for n in range(1, max)
    " R has # comments
    if getline(n) =~ '^\s*#'
    setf r
    return
    endif
    " Rexx has /* comments */
    if getline(n) =~ '^\s*/\*'
    setf rexx
    return
    endif
endfor

" Nothing recognized, assume Rexx
setf rexx
endfunc 
```

因此，您需要在文件中添加注释，以便 Vim 正确检测 R。

如果您从不使用 Rexx 或 Rebol 文件，您可以覆盖检测：

```
au BufNewFile,BufRead *.r,*.R setf r 
```

# java - 如何派生（扩展）递归连接类（树）

> ID：11724221
> 
> 赞同：0
> 
> 时间：2012-07-30T15:08:08.610
> 
> 标签：java, derived-class

为了显示项目树，我编写了引用自身的类：

```
CTree
{
    String name;
    CGroupOfItems[] groups

    CGroupOfItems[] getGroups();
    //... and more getter and setter methods
}

CGroupOfItems
{
    String name;
    CItem[] items;

    CItems[] getItems();
    //... and more getter and setter methods
}

CItem
{
    String name;
    CItem[] childItems;

    CItems[] getChildItems();
    //... and more getter and setter methods
} 
```

有了这个，我管理树，如：

```
tree
 -group 1
   - item 1.1
     - item 1.1.1
       - item 1.1.1.1
     - item 1.1.2
   - item 1.2
 - group 2
  - item 2.1
..... 
```

现在对于其他一些功能，我想管理其成员提供更多数据的树：

```
CTreeBig
{
    String name;
    int id;
    String additionalData;
    CGroupOfItemsBig[] groups

    CGroupOfItemsBig[] getGroups();
    //... and more getter and setter methods
}

CGroupOfItemsBig
{
    String name;
    int id;
    String additionalData;
    CItemBig[] items;

    CItemBig[] getItems();
    //... and more getter and setter methods
}

CItemBig
{
    String name;
    int id;
    String additionalData;
    CItemBig[] childItems;

    CItemBig[] getChildItems();
    //... and more getter and setter methods
} 
```

现在我想从 CTree 扩展 CTreeBig。但这是不可能的，因为我无法覆盖

```
CGroupOfItems[] getGroups(); 
```

和：

```
CGroupOfItemsBig[] getGroups(); 
```

谁能给我一个提示，我可以如何使用 Java-Extension 来解决这个问题。至少有必要从 Object CTreeBig 获取 Object CTree。

当然我可以手动编码，但我现实我的类更复杂，我不仅有两个类 CT​​ree，而且可能有 4 个或 5 个......

提前致谢

焦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:58:08.177

您在滥用或误解继承和多态性。无需重写 CGroupOfItems[] getGroups()。您只需以适合 CGroupOfItemsBig 的方式实现它，但返回类型是 CGroupOfItems，因为 CGroupOfItemsBig“是”CGroupOfItems。但我怀疑在这里理解语言存在更深层次的问题。也许这会有所帮助：[http ://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)

# algorithm - 给定一个已排序的整数数组，如何从它形成二叉搜索树？

> ID：11724226
> 
> 赞同：10
> 
> 时间：2012-07-30T15:08:25.993
> 
> 标签：algorithm, data-structures, binary-search-tree, catalan

考虑我有一个数组`[3,18,15,25,26]`，可以从中形成多少个可能的二叉搜索树？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-30T16:46:45.827

看了MicSim链接的问题后，我还是不满意，所以我开始自己研究。这就是我想出的...

每棵树都可以被认为是具有父根节点的两棵树。如果您分别知道两个子分支的可能组合的数量，则具有该根节点的总组合是子组合的乘积。

我们可以通过首先解决较低计数的实例来开始构建较高计数的解决方案。

我将使用`C(n)`加泰罗尼亚数来表示 n 个节点的所有可能组合。

希望这两个是显而易见的：

```
C(0) = 1
C(1) = 1 
```

C(2) 也相当明显，但它可以构建，所以让我们这样做。有两种方法可以选择根节点。一个留下一个孩子计数（左：右）`1:0`和另一个`0:1`。所以，第一种可能性是`C(1)*C(0) = 1*1 = 1`。第二个是`C(0)*C(1) = 1*1 = 1`。把这些加在一起给了我们

```
C(2) = 2 
```

没有什么太令人兴奋的了。现在让我们做3个节点。有 3 种方法可以选择根节点，因此有 3 个子分组。您可能的组`2:0`是`1:1`和`0:2`。

根据我们之前的定义，`C(3)`可以写成`C(2)*C(0) + C(1)*C(1) + C(0)*C(2) = 2*1 + 1*1 + 1*2 = 2+1+2 = 5`。

```
C(3) = 5 
```

4 个节点具有`3:0`、`2:1`和`1:2`的子组`0:3`。所以，`C(4)`可以写成`C(3)*C(0) + C(2)*C(1) + C(1)*C(2) + C(0)*C(3) = 5*1 + 2*1 + 1*2 + 1*5 = 5+2+2+5 = 14`。

```
C(4) = 14 
```

希望有两件事开始变得明显。首先，这很快就会变得很麻烦。其次，我以相当冗长的方式描述的是 wiki 页面上的递归关系表示。

我不知道这是否有帮助，但它帮助我完成了练习，所以我想我会分享。我开始时并没有尝试重新创建递归关系，所以我的结果与现有方法之一相匹配是件好事。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-30T15:15:11.073

可以使用 N 个键创建的二叉搜索树的可能数量由第 N 个[加泰罗尼亚语数](http://en.wikipedia.org/wiki/Catalan_number)给出。

另请参阅此问题：[可以使用 N 个键创建的二叉搜索树的可能数量由第 N 个加泰罗尼亚语数给出。为什么？](https://stackoverflow.com/q/1352776/44522)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-30T15:16:47.093

数组的任何节点都可以是 BST 的根，对于每个根，不同的搜索树的数量是左右子数组的组合（乘积）。所以，

```
BSTCount(0) = 1
BSTCount(n) = sum_{i = 1}^{n} BSTCount(i-1) * BSTCount(n-i) 
```

您可以对前几个 n 评估此函数，然后在[On-Line Encyclopedia of Integer Sequences™ (OEIS)](http://oeis.org/)中查找序列以找到闭合形式。

# c++ - Win32：为富编辑设置默认字体和文本颜色

> ID：11724231
> 
> 赞同：2
> 
> 时间：2012-07-30T15:08:34.143
> 
> 标签：c++, winapi

这应该是一个简单的问题，但我无法在谷歌上找到答案：How to set a default font and color to a richedit using plain c++ and win32？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:40:18.300

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/hh298393%28v=vs.85%29.aspx)：

> 您还可以使用 EM_SETCHARFORMAT 和 EM_GETCHARFORMAT 消息来设置和检索插入点的字符格式，这是应用于任何随后插入的字符的格式。例如，如果应用程序将默认字符格式设置为粗体，然后用户键入一个字符，则该字符为粗体。

那是你要找的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T20:39:00.787

来自 MSDN 也

> Rich Edit 4.1：要为脚本设置默认字体，请使用 CHARFORMAT2 调用 EM_SETCHARFORMAT，指定 yHeight、bCharSet、bPitchAndFamily、szFaceName 和 lcid 成员的值。此外，要获取特定代码页的默认字体，请使用 CHARFORMAT2 调用 EM_GETCHARFORMAT，指定 bCharSet 和 lcid 成员的值。

# php - 具有正确定义的 PHP 格式标点符号

> ID：11724233
> 
> 赞同：1
> 
> 时间：2012-07-30T15:08:37.770
> 
> 标签：php, html-entities

是否有一个 PHP 函数/程序可以采用逗号、解释标记、井号、引号等形式的标点符号，并使用正确的 html 定义重新格式化它们。

```
eg. £ to become &pound; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:09:44.810

您正在寻找仅替换五个字符（, , , , ）的[htmlspecialchars](http://www.php.net/manual/en/function.htmlspecialchars.php)：`&``"``'``<``>`

```
echo htmlspecialchars($str); 
```

OR [htmlentities](http://www.php.net/manual/en/function.htmlentities.php)替换所有输入：

```
echo htmlentities($str); 
```

# c++ - 带有 g++ -O2 （或 -Os、-O、-O1、...）的模板的警告

> ID：11724235
> 
> 赞同：1
> 
> 时间：2012-07-30T15:08:44.210
> 
> 标签：c++, events, templates, optimization, warnings

我收到一些关于模板和 g++ -Os 的警告。为什么 ？如何使用 -Os -Winline 删除这些警告？

**编辑 1**：g++ v4.6.1 如果我用 unsigned int 替换uint32_t**我****的**主要错误得到更正：（此错误已报告：[http](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52888) ://gcc.gnu.org/bugzilla/show_bug.cgi?id=52888 ）

 **```
Event.h:109:12: attention : inlining failed in call to ‘uint32_t Event<ParamT>::attach(ListenerT*, bool (ListenerT::*)(ParamT)) [with ListenerT = Listener, ParamT = unsigned int, uint32_t = unsigned int]’: mismatched arguments [-Winline] 
```

**编辑 2**：以下警告似乎是 g++ 错误（[http://gcc.gnu.org/ml/gcc-help/2012-07/msg00029.html](http://gcc.gnu.org/ml/gcc-help/2012-07/msg00029.html)）（我没有任何 ~Player()）`inlining failed in call to ‘Player::~Player()’: call is unlikely and code size would grow [-Winline]`

**编辑 3**：要删除以前的警告，请添加`Player::~Player() __attribute__ ((noinline)) {}`

.

测试代码：**Event.h**

```
#ifndef EVENT_H
#define EVENT_H

#include <map>
#include <stdint.h>

/***************************************************************************//*!
* @brief Collect Listener
* @tparam ParamT        Param type of the function
*/
template<typename ParamT>
class EventHandlerBase
{
    public:
        virtual bool notify( ParamT param ) = 0;
};

/***************************************************************************//*!
* @brief Conteneur d'un receveur d'event.
* @tparam ListenerT     Object type
* @tparam ParamT        Param type of the function
*/
template<typename ListenerT, typename ParamT>
class EventHandler : public EventHandlerBase<ParamT>
{
    private:
        typedef bool (ListenerT::*PtrMember)(ParamT);

    private:
        ListenerT*      m_object;//!< Object listener
        PtrMember       m_member;//!< Function listener

    public:
        /********************************************************************//*!
        * @brief Constructor
        * @param[in] object     Instance listener
        * @param[in] member     Function listener ( Function need to be a public member of {object} )
        * @return[NONE]
        */
        EventHandler( ListenerT* object, PtrMember member )
        {
            m_object = object;
            m_member = member;
        }

        /*******************************************************************//*!
        * @brief Emit a signal to listeners
        * @param[in] param      Data
        * @return FALSE for breaking event loop
        */
        bool notify( ParamT param )
        {
            return (m_object->*m_member)(param);
        }
};

/***************************************************************************//*!
* @brief Event system
* @tparam ParamT        Param type of the function
*/
template<typename ParamT>
class Event
{
    private:
        typedef typename std::map< uint32_t, EventHandlerBase<ParamT>* > HandlersMap;

    private:
        HandlersMap     m_handlers;//!< Contient la liste des instances::fonctions en écoute sur cet event
        uint32_t        m_counter;//!< Permet de gérer les id

    public:
        /********************************************************************//*!
        * @brief Constructor
        * @return[NONE]
        */
        Event()
        {
            m_counter = 0;
        }

        /********************************************************************//*!
        * @brief Destructor
        * @return[NONE]
        */
        ~Event()
        {
            typename HandlersMap::iterator it = m_handlers.begin();
            for(; it != m_handlers.end(); it++)
            {
                if( it->second )
                    delete it->second;
            }
        }

        /*******************************************************************//*!
        * @brief Link a function and instance to this event
        * @param[in] object     Instance listener
        * @param[in] PtrMember  Function listener ( Function need to be a public member of {object} )
        * @return Connection ID
        *
        * @warning DO NOT FORGET TO CALL Event::detach(uint32_t) if you delete {object}
        */
        template<typename ListenerT>
        uint32_t attach( ListenerT* object, bool (ListenerT::*PtrMember)(ParamT) )
        {
            m_handlers[m_counter] = new EventHandler<ListenerT,ParamT>(object, PtrMember);
            m_counter++;
            return m_counter-1;
        }

        /*******************************************************************//*!
        * @brief Emit a signal to listeners
        * @param[in] param      Data
        * @return[NONE]
        */
        void notify( ParamT param )
        {
            typename HandlersMap::iterator it = m_handlers.begin();
            for(; it != m_handlers.end(); it++)
            {
                if( !it->second->notify(param) )
                    return ;
            }
        }

        /*******************************************************************//*!
        * @brief Unlink a listener.
        * @param[in] id     Connection ID from Event::attach
        * @return TRUE if removed
        */
        bool detach( uint32_t id )
        {
            typename HandlersMap::iterator it = m_handlers.find(id);

            if( it == m_handlers.end() )
                return false;

            delete it->second;
            m_handlers.erase(it);
            return true;
        }
};

#endif // EVENT_H 
```

**主文件**

```
#include <stdio.h>
#include "Event.h"

class Player
{
    public:
        Event<uint32_t> e_speed;

    private:
        uint32_t        m_speed;

    public:
        Player()
        {
            m_speed = 15;
        }
        void setSpeed( uint32_t speed )
        {
            m_speed = speed;
            e_speed.notify(speed);
        }
};

class Listener
{
    private:
        Player      m_player;

    public:
        Listener()
        {
            m_player.e_speed.attach(this, &Listener::SLOT_speed);
        }
        bool SLOT_speed( uint32_t speed )
        {
            printf("Speed changed to %u\n", speed);
            return true;
        }
        Player* player()
        {
            return &m_player;
        }
};

int main()
{
    Listener l;
    l.player()->setSpeed(42);

    return 0;
} 
```

使用以下命令编译此代码：**g++ -Os -W -Wall -Winline *.cpp** 您将收到以下警告：

```
Event.h:109:12: attention : inlining failed in call to ‘uint32_t Event<ParamT>::attach(ListenerT*, bool (ListenerT::*)(ParamT)) [with ListenerT = Listener, ParamT = unsigned int, uint32_t = unsigned int]’: mismatched arguments [-Winline]
main.cpp:32:56: attention : appelé d'ici [-Winline]
main.cpp:4:7: attention : inlining failed in call to ‘Player::~Player()’: call is unlikely and code size would grow [-Winline]
main.cpp:31:3: attention : appelé d'ici [-Winline]
main.cpp:4:7: attention : inlining failed in call to ‘Player::~Player()’: call is unlikely and code size would grow [-Winline]
main.cpp:24:7: attention : appelé d'ici [-Winline]
main.cpp:4:7: attention : inlining failed in call to ‘Player::~Player()’: call is unlikely and code size would grow [-Winline]
main.cpp:24:7: attention : appelé d'ici [-Winline] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T15:39:51.670

你的动机有点不清楚...

你想让警告消失吗？删除`-Winline`选项。这就是它的作用：它警告非内联内联函数。

即使代码可能变得更大/更慢，您是否希望内联这些函数？您将不得不使用启发式进行内联。您可以尝试多种选择：

*   添加`__attribute__(always_inline)`相关功能。
*   用`-finline-limit=N`一个大的`N`.
*   使用编译器选项`--param NAME=VALUE`。有数十个控制内联的参数（`max-inline-insns-single`、`max-inline-insns-auto`、`large-function-insns`、`inline-unit-growth`等）您可以阅读`info gcc`以获取详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:45:35.150

似乎g ++在将它们用作模板参数之前扩展了typedef，但在将它们与前者进行比较时未能扩展未用作模板参数的typedef。

您的代码的更简单版本说明了这一点：

```
#include <iostream>

typedef unsigned int uint32_t;

template <typename T>
class Foo {
    public :
        template <typename C>
        void fun(C* c, void (C::*f)(T)) {
            (c->*f)(42);
        }
};

class BarBad {
    private :
        Foo<uint32_t> foo;

    public :
        BarBad() {
            foo.fun(this, &BarBad::fun);
        }
        void fun(uint32_t t) {
            std::cout << t << std::endl;
        }
};

template <typename T>
class BarGood {
    private :
        Foo<T> foo;

    public :
        BarGood() {
            foo.fun(this, &BarGood<T>::fun);
        }
        void fun(T t) {
            std::cout << t << std::endl;
        }
};

int main(void) {
    BarBad bb;
    BarGood<uint32_t> bg;
    return 0;
} 
```

此代码仅收到代码警告`BarBad`：

```
test.cpp: In function ‘int main()’:
test.cpp:9: warning: inlining failed in call to ‘void Foo<T>::fun(C*, void (C::*)(T)) [with C = BarBad, T = unsigned int]’: function not considered for inlining
test.cpp:20: warning: called from here 
```

在`BarBad`中，调用 时`Foo<uint32_t>::fun`，第二个参数的类型是`void (BarBad::*)(uint32_t)`，但是被调用的函数期望`void (BarBad::*)(unsigned int)`，并且看不到，`uint32_t`并且`unsigned int`是相同的类型。

在`BarGood<uint32_t>`中，当调用 时`Foo<uint32_t>::fun`，第二个参数的类型是`void (BarGood<uint32_t>::*)(unsigned int)`，它与被调用函数所期望的相匹配。

这对我来说就像一个编译器错误。一些搜索发现了这个错误报告：

[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52888](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52888)

我还没有测试那里的解决方案是否也解决了这个问题，但听起来好像可以。**

# c# - 数据转换问题可能，char 到 unsigned char。一个软件和固件CRC32交互问题

> ID：11724238
> 
> 赞同：0
> 
> 时间：2012-07-30T15:08:50.140
> 
> 标签：c#, c, crc, firmware, crc32

我当前的问题是我在软件中计算 CRC32 哈希，然后在固件中检查它，但是当我在固件中计算哈希时，它应该是它的两倍。

软件（用 C# 编写）：

```
 public string SCRC(string input)
        {
            //Calculate CRC-32
            Crc32 crc32 = new Crc32();
            string hash = "";

            byte[] convert = Encoding.ASCII.GetBytes(input);

            MemoryStream ms = new MemoryStream(System.Text.Encoding.Default.GetBytes(input));

            foreach (byte b in crc32.ComputeHash(ms))
                hash += b.ToString("x2").ToLower();

            return hash;

        } 
```

使用的固件功能（用 C 编写）：

```
unsigned long chksum_crc32 (unsigned char *block, unsigned int length)
{
   register unsigned long crc;
   unsigned long i;

   crc = 0xFFFFFFFF;
   for (i = 0; i < length; i++)
   {
      crc = ((crc >> 8) & 0x00FFFFFF) ^ crc_tab[(crc ^ *block++) & 0xFF];
   }
   return (crc ^ 0xFFFFFFFF);
}

/* chksum_crc32gentab() --      to a global crc_tab[256], this one will
 *              calculate the crcTable for crc32-checksums.
 *              it is generated to the polynom [..]
 */

void chksum_crc32gentab ()
{
   unsigned long crc, poly;
   int i, j;

   poly = 0xEDB88320L;
   for (i = 0; i < 256; i++)
   {
      crc = i;
      for (j = 8; j > 0; j--)
      {
         if (crc & 1)
         {
            crc = (crc >> 1) ^ poly;
         }
         else
         {
            crc >>= 1;
         }
      }
      crc_tab[i] = crc;
   }
} 
```

调用上述函数的固件代码（用C编写）：

```
//CommandPtr should now be pointing to the rest of the command      
        chksum_crc32gentab();
        HardCRC = chksum_crc32( (unsigned)CommandPtr, strlen(CommandPtr));
        printf("Hardware CRC val is %lu\n", HardCRC); 
```

请注意，CommandPTR 是对软件方法中名为“字符串输入”的相同数据的引用。

有谁知道为什么我可以获得大约两倍于我在软件中使用的价值？Aka HardCRC 是其应有的两倍，我猜它与我的 unsigned char 转换有关。

# c# - 数据网格中的按钮

> ID：11724239
> 
> 赞同：0
> 
> 时间：2012-07-30T15:08:53.047
> 
> 标签：c#, wpf, xaml, datagrid, wpfdatagrid

我在 WPF 中创建了一个 Datagrid 控件，其中每行的单元格中有一个按钮

列（子图）。如何使按钮仅对子图列中的某些单元格行可见。

```
 XAML:
 <DataGridTemplateColumn x:Name="subgraphtyp" Header="H" Width="50">
      <DataGridTemplateColumn.CellTemplate>
           <DataTemplate>
               <Button Name="btnTable" Visibility="Visible" Height="20" Width="25"   
                       Click="Button_Table_Click">
                  <Image Height="16" Source="Subgraph.png" Stretch="Fill" Width="16"/>
               </Button>
           </DataTemplate>
      </DataGridTemplateColumn.CellTemplate> 
 </DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:15:46.297

最简单的方法是将按钮的可见性绑定到网格中的某个值，该值将确定它是否应该对该行可见。基本上，在后端代码中创建一个函数，该函数检索该行的数据，对其进行解析，然后如果应该显示按钮则返回“Visible”，如果不应该显示则返回“Hidden”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:21:36.090

尝试这个：

XAML 属性用法

```
dataGridColumn Visibility="Visible"/>
dataGridColumn Visibility="Collapsed"/>

private void cbHideColumn_Changed(object sender, RoutedEventArgs e)
   {
     CheckBox cb = sender as CheckBox;
     if (this.dataGrid1 != null)
       {
         if (cb.IsChecked == true)
            this.dataGrid1.Columns[0].Visibility = Visibility.Collapsed;
         else if (cb.IsChecked == false)
            this.dataGrid1.Columns[0].Visibility = Visibility.Visible;
       }
   } 
```

# c++ - 如何比较 VARIANTARG 类型

> ID：11724240
> 
> 赞同：0
> 
> 时间：2012-07-30T15:08:54.463
> 
> 标签：c++, windows, variant, idispatch

我正在尝试构建一个函数来将 VARIANTARG 类型分配给 DISPARAMS 结构，并且在弄清楚如何检查 arg 的实际类型时遇到了一些问题。

```
myFunc(int count, const BYTE* types, ...)
{
    DISPPARAMS dParams;
    //Initialization stuff goes here

    for(int x = 0;x < count;x++)
    {
        BYTE vt = types[0];
        dParams.rgvarg[x].vt = vt;
        if(vt == VTS_I4)
        {
            dParams.rgvarg[x].lVal = ...;
        }
    }
}

BYTE params[] = {VTS_I4};
myFunc(1, params, 123); 
```

当我编译这个时，我在 if 语句中得到两个错误：

```
error C2446: '==' : no conversion from 'const char *' to 'int'
error C2040: '==' : 'int' differs in levels of indirection from 'const char [2]' 
```

所以我在这里很困惑：为什么我可以从 VTS_I4 分配一个 BYTE 值，但我以后不能比较它？如果我将 VTS_I4 转换为 BYTE，那么我可以比较它，但它具有不同的值，因此不会触发 if 语句。由于 VTS_I4 在 afxdisp.h 中定义为“\x03”，我可以做的另一件事是检查 if(vt == 0x03)，它工作正常，但必须以某种方式出错。

问这个问题的另一种方法可能是为什么我可以这样做：

```
BYTE a[] = VTS_I4; 
```

但不是这个：

```
BYTE b = VTS_I4; //'initializing' : cannot convert from 'const char [2]' to 'BYTE' 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:53:27.243

正如评论中提到的，问题是我使用了错误的常量；我需要使用 VT_I4 而不是 VTS_I4。

# php - 根本没有收到来自 Facebook 的实时更新

> ID：11724241
> 
> 赞同：22
> 
> 时间：2012-07-30T15:08:56.347
> 
> 标签：php, iphone, objective-c, ios, facebook

我已经设置了我的服务器以接收来自 facebook 的实时更新，我已经完成了身份验证以获取令牌等，注册了回调 url ......并且自身份验证 GET 请求以来我没有收到任何通知。

当`GET graph.facebook.com/APP-ID/subscriptions`我收到...

```
data: [
{
  object: "user",
  callback_url: "REDACTED-VAID-URL",
  fields: [
    "activities",
    "books",
    "checkins",
    "events",
    "feed",
    "friends",
    "interests",
    "likes",
    "location",
    "movies",
    "music",
    "television"
  ],
  active: true
}
] 
```

据我所知，实时通知设置正确。当我将自己的 POST 发送到回调 URL 时，服务器每次都会通过电子邮件向我发送 POST 详细信息，但在 Facebook 更新后我从未收到过此消息，所以我很确定它只是没有点击 URL。我有几个用户通过该应用程序进行了身份验证，我们都在 facebook 上尝试了各种方法来尝试触发它（状态更新、发布等）。我可以从正常的休息 API 中提取他们的提要等。

这里一定有一些我只是想念的东西，我还需要做什么才能让它工作？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T07:51:30.390

对于那些使用 PHP...

Facebook 的实时 POST 数据不会通过 PHP 中的普通 $_POST 数组传入或识别。您可以使用以下内容获取构成对服务器的请求的原始 JSON：

```
$json = file_get_contents("php://input"); 
```

然后，您可以通过以下方式将其转换为数组：

```
$realtime = json_decode($json, true); 
```

然而，太糟糕了，Facebook 在这些请求中为您提供的数据大多一文不值：-/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T18:49:52.733

就我而言，我接受了 GET 请求，但不接受回调 URL 上的 POST 请求。

# jquery - 如何在动画不透明度时阻止 IE 更改透明背景？

> ID：11724242
> 
> 赞同：-1
> 
> 时间：2012-07-30T15:09:03.993
> 
> 标签：jquery, internet-explorer, animation, opacity

我似乎无法使用 jQuery 在 IE 中为图像设置不透明度动画，它为它们提供了轻微的轮廓背景。我在这方面看到了很多线程，但没有一个真正喜欢我的。如何阻止 IE 添加此大纲？看到[这个小提琴](http://jsfiddle.net/j5mA6/1/)

我还上传了一张显示粗边框的图片。您无法通过该图像很好地看到它，但是当您将鼠标悬停和鼠标移出时，它是一个明显的区别。

![在此处输入图像描述](../Images/3cbabac6133a77788a43f7a74617ec1f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:13:51.207

如果您指的是围绕问号创建的工件，那是因为 IE 对 png alpha 非常不利。

如果您负担得起，请尝试使用不透明的图像（白色背景）。

# c# - 设置 tcp 服务器与 android 和 kinect 通信

> ID：11724250
> 
> 赞同：0
> 
> 时间：2012-07-30T15:09:32.683
> 
> 标签：c#, android, tcp, kinect

我正在制作一个带有 android 和 kinect 的双重应用程序。我希望能够从 kinect 向 android 应用程序发送通知。有人告诉我，完成此任务的最佳方法是设置一个简单的 tcp 服务器。我尝试使用此 <[链接](http://www.switchonthecode.com/tutorials/csharp-tutorial-simple-threaded-tcp-server)> 中的教程进行设置。然而，该教程对我来说描述性不够，我无法使其工作。发布它的人基本上发布了几段代码，没有任何关于组装它们的说明。我需要有人指导我设置此服务器，或者我需要一个指向详细教程的链接。我自己在网上搜索了几个小时，但没有找到任何有用的东西，这就是我在这里问的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:19:50.297

以下是我认为他在该教程中所说的内容：

```
using System;
using System.Text;
using System.Net.Sockets;
using System.Threading;
using System.Net;

namespace TCPServerTutorial
{
  class Server
  {
    private TcpListener tcpListener;
    private Thread listenThread;

    public Server()
    {
      this.tcpListener = new TcpListener(IPAddress.Any, 3000);
      this.listenThread = new Thread(new ThreadStart(ListenForClients));
      this.listenThread.Start();
    }

    private void HandleClientComm(object client)
    {
      TcpClient tcpClient = (TcpClient)client;
      NetworkStream clientStream = tcpClient.GetStream();

      byte[] message = new byte[4096];
      int bytesRead;

      while (true)
      {
        bytesRead = 0;

        try
        {
          //blocks until a client sends a message
          bytesRead = clientStream.Read(message, 0, 4096);
        }
        catch
        {
          //a socket error has occured
          break;
        }

        if (bytesRead == 0)
        {
          //the client has disconnected from the server
          break;
        }

        //message has successfully been received
        ASCIIEncoding encoder = new ASCIIEncoding();
        System.Diagnostics.Debug.WriteLine(encoder.GetString(message, 0, bytesRead));
      }

      tcpClient.Close();
    }

    private void ListenForClients()
    {
      this.tcpListener.Start();

      while (true)
      {
        //blocks until a client has connected to the server
        TcpClient client = this.tcpListener.AcceptTcpClient();

        //create a thread to handle communication
        //with connected client
        Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
        clientThread.Start(client);
      }
    }

    //you'll have to find a way to pass this arg
    private void SendBack(TcpClient tcpClient)
    {
    NetworkStream clientStream = tcpClient.GetStream();
    ASCIIEncoding encoder = new ASCIIEncoding();
    byte[] buffer = encoder.GetBytes("Hello Client!");

    clientStream.Write(buffer, 0 , buffer.Length);
    clientStream.Flush();
    }
  }
} 
```

但这只是我。他只谈论过一个类，因此假设他的所有功能都在该类中是合乎逻辑的。

对于客户端代码，他几乎只是为您提供了一个函数的代码（当然是在 C# 中），它将一些字节发送到一个 IP 地址（也就是您的服务器正在运行的机器的 IP）。您可以将此函数放在任何 C# 类中，并以您希望的任何方式调用它。他已经硬编码了 IP 地址和要发送的消息，但这些很容易成为传递给函数的参数。

```
private void SendToServer(){
    TcpClient client = new TcpClient();

    //IP of the server: currently loopback, change to whatever you want
    IPEndPoint serverEndPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 3000);

    client.Connect(serverEndPoint);

    NetworkStream clientStream = client.GetStream();

    ASCIIEncoding encoder = new ASCIIEncoding();

    //Message being sent: "Hello Server!"
    byte[] buffer = encoder.GetBytes("Hello Server!");

    clientStream.Write(buffer, 0 , buffer.Length);
    clientStream.Flush();
} 
```

# python - Python：使用 chroot 和 chjail 保护不受信任的脚本/子进程？

> ID：11724257
> 
> 赞同：12
> 
> 时间：2012-07-30T15:09:54.023
> 
> 标签：python, security, subprocess, chroot, jail

我正在编写一个基于 Python 的 Web 服务器，它应该能够执行“插件”，以便轻松扩展功能。

为此，我考虑了在其中拥有多个文件夹（每个插件一个）和多个 shell/python 脚本的方法，这些脚本以可能发生的不同事件的预定义名称命名。

一个例子是`on_pdf_uploaded.py`当一个 PDF 上传到服务器时执行一个文件。为此，我将使用 Python 的*子流程*工具。

为了方便和安全，这将允许我使用 Unix 环境变量来提供更多信息并设置进程的工作目录 (cwd)，以便它可以访问正确的文件而无需找到它们的位置。

由于插件代码来自不受信任的来源，我想让它尽可能安全。我的想法是在子进程中执行代码，但将其放入具有不同用户的 chroot 监狱，这样它就无法访问服务器上的任何其他资源。

不幸的是，我对此一无所知，而且我不想依靠不受信任的脚本将自己关进监狱。

此外，我也不能将主/调用进程放入 chroot 监狱，因为插件代码可能在服务器响应其他请求时同时在多个进程中执行。

那么问题来了：如何在 chroot 监狱中以最低权限执行子进程/脚本，以保护服务器的其余部分不被错误的、不受信任的代码损坏？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T17:05:42.957

也许是这样的？

```
# main.py
subprocess.call(["python", "pluginhandler.py", "plugin", env]) 
```

然后，

```
# pluginhandler.py
os.chroot(chrootpath)
os.setgid(gid) # Important! Set GID first! See comments for details.
os.setuid(uid)
os.execle(programpath, arg1, arg2, ..., env)
# or another subprocess call 
subprocess.call["python", "plugin", env]) 
```

编辑：想使用 fork() 但我真的不明白它做了什么。查了一下。新代码！

```
# main.py
import os,sys
somevar = someimportantdata
pid = os.fork()
if pid:
    # this is the parent process... do whatever needs to be done as the parent
else:
    # we are the child process... lets do that plugin thing!
    os.setgid(gid) # Important! Set GID first! See comments for details.
    os.setuid(uid)
    os.chroot(chrootpath)
    import untrustworthyplugin
    untrustworthyplugin.run(somevar)
    sys.exit(0) 
```

[这](http://www.myelin.co.nz/post/2003/3/13/)很有用，我几乎只是偷了那个代码，所以感谢那个人的一个体面的例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T16:43:06.153

创建你的监狱后，你会`os.chroot`从你的 Python 源调用进入它。但即便如此，解释器已经打开的任何共享库或模块文件仍然是打开的，我不知道关闭这些文件的后果是什么`os.close`；我从来没有尝试过。

即使这样可行，设置 chroot 也是一件大事，因此请确保其收益物有所值。在最坏的情况下，您必须确保整个 Python 运行时以及您打算使用的所有模块，以及所有依赖程序和共享库以及来自 等的其他文件`/bin`在`/lib`每个被监禁的文件系统中都可用。当然，这样做不会保护其他类型的资源，例如网络目的地、数据库。

另一种方法是将不受信任的代码作为字符串读入，然后`exec code in mynamespace`在哪里`mynamespace`有一个字典，只定义您想要向不受信任的代码公开的符号。这将是 Python VM 中的“监狱”。您可能必须首先解析源代码以查找`import`语句之类的内容，除非替换内置`__import__`函数会拦截它（我不确定）。

# c# - 使用 WebDriver 处理 FireFox 中的“不受信任的连接”

> ID：11724261
> 
> 赞同：0
> 
> 时间：2012-07-30T15:10:21.267
> 
> 标签：c#, firefox, testing, webdriver

我遇到了 ff 测试的问题，当它尝试打开 https 页面时，我收到“不受信任的连接”消息并且测试失败。我尝试了很多解决方法，例如

```
 FirefoxProfile profile = new FirefoxProfile();
        bool AcceptUntrustedCertificates = true;
        DesiredCapabilities capability = DesiredCapabilities.Firefox();
        capability.SetCapability(FirefoxDriver.ProfileCapabilityName, profile);
        capability.SetCapability(CapabilityType.AcceptSslCertificates, true);
        Driver = new FirefoxDriver(); 
```

或者我尝试使用默认配置文件，将测试站点添加到异常中。另外，我将圆顶添加到受信任的

> 首选项 > 编辑 > 高级 > 加密 > 查看证书 > 服务器

当 webdriver 打开浏览器域时受信任，但我仍然检索到错误消息。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:17:55.240

当你像你一样创建 FirefoxDriver 时，它会为会话创建一个临时配置文件。您要做的是创建一个新配置文件，将站点和证书添加到例外列表，然后将该配置文件与 ForefoxDriver 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:24:49.887

在您的脚本中使用以下内容

```
 ProfilesIni allProfiles = new ProfilesIni();
  System.setProperty("webdriver.firefox.profile","Selenium"); //name of your profile
  String browserProfile = System.getProperty("webdriver.firefox.profile");
  FirefoxProfile profile = allProfiles.getProfile(browserProfile); 
  profile.setAcceptUntrustedCertificates(false); 
  WebDriver driver = new FirefoxDriver(profile); 
```

# spring - 我的 Spring Web 应用程序如何捕获我没有捕获和记录的错误？这是apache commons的结果吗？

> ID：11724264
> 
> 赞同：0
> 
> 时间：2012-07-30T15:10:33.607
> 
> 标签：spring, log4j

我对如何记录错误感到困惑，而我却没有隐式地捕获它们并注销错误。我所做的只是将 log4j.xml 文件放在我的项目中定义附加程序，现在日志捕获并记录框架中的所有内容。如果我说尝试在 Hibernate 中查询并且查询失败，或者我尝试打开一个不存在的文件，或者我得到一个空指针异常，如果 log4j.xml 文件定义了一个日志文件，并且错误级别设置正确，那么错误会在那里捕获吗？

我的 Spring Web 应用程序如何捕获我没有捕获和记录的错误？这是 apache commons 日志记录的结​​果吗？

或者这是 log4j 知道如何处理的一些魔法 - 将流捕获到控制台等？任何信息表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:37:53.123

来自 spring 官方文档：

> 公共日志记录的好处是您不需要任何其他东西来使您的应用程序工作。它有一个运行时发现算法，可以在类路径上的知名位置查找其他日志框架，并使用它认为合适的一个（或者如果需要，您可以告诉它是哪一个）。如果没有其他可用的，您可以仅从 JDK（java.util.logging 或简称 JUL）获得漂亮的日志。在大多数情况下，您应该会发现您的 Spring 应用程序可以正常工作并愉快地登录到控制台，这很重要。

* * *

> 要使 Log4j 使用默认的 JCL 依赖项（commons-logging），您只需将 Log4j 放在类路径中，并为其提供配置文件（类路径根目录中的 log4j.properties 或 log4j.xml）。

看看完整的解释：[http ://static.springsource.org/spring/docs/3.0.x/reference/overview.html#d0e743](http://static.springsource.org/spring/docs/3.0.x/reference/overview.html#d0e743)

# xcode - XCode 从 PopOver 导航更改图像

> ID：11724270
> 
> 赞同：0
> 
> 时间：2012-07-30T15:10:54.937
> 
> 标签：xcode, ipad, popover

我想知道你是否可以帮助我。

基本上我们有一组 16 张图像，ImageA.png ImageB.png 等...需要通过从“菜单”中选择来显示。

我希望它像拆分视图控制器一样工作，但我不想通过将导航栏放在侧面来限制屏幕的宽度，因为应用程序必须在横向模式下运行。

这是我想出的而不是SplitView的屏幕截图；

[http://i.stack.imgur.com/fdy21.png](https://i.stack.imgur.com/fdy21.png)

该图像位于 UIImageView 中，并且我已将 PopOver 添加到链接到 UITableView 的按钮中。

我想要的是能够从 PopOver Navigation 中选择一个图像，它将 UIImageView 中的图像更改为相应的图像。

抱歉，如果我解释得不够多……我是 XCode 的新手！

另外：我在 Storyboard 模式下使用 XCode；

[http://i.stack.imgur.com/RSuyY.png](https://i.stack.imgur.com/RSuyY.png)

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:17:20.897

要使主视图不是静态的，请在您的`UISplitViewControllerDelegate`：

```
- (BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation 
```

`YES`从此方法返回，拆分视图控制器在横向和纵向中的行为方式相同

# ember.js - 如何在视图中获取数组控制器中索引处的对象？

> ID：11724272
> 
> 赞同：1
> 
> 时间：2012-07-30T15:10:59.333
> 
> 标签：ember.js

我有一个将数组控制器作为属性的视图。我想在视图中的索引处获取一个元素。

视图： `{{ App.array.firstObject }}` 有效但： `{{ App.array.objectAt(1) }}` 无效。在我的情况下，我无法迭代。

那么有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T15:52:03.550

对你有用`{{App.array.[1]}}`吗？

# c# - 执行后线程保持活动状态

> ID：11724273
> 
> 赞同：1
> 
> 时间：2012-07-30T15:11:13.993
> 
> 标签：c#, execution, termination, thread-state

我创建了一个`ThreadManager`处理类，`Threads`它的任务是添加新`threads`的和清理死的`threads`。但是，`threads`所创建的仍处于**活动**状态并处于`ThreadState.WaitSleepJoin`状态。我已经检查过主体是否已成功完成执行。有任何想法吗？

```
 public bool TryAddThread(ThreadStart threadBody, ThreadStartInfo startInfo)
    {
        bool success = false;

        // Validate arguments
        if (threadBody == null || startInfo == null)
        {
            return false;
        }

        if (!Monitor.TryEnter(_lock) || !_allowNewThreads)
        {
            return false;
        }

        try
        {
            Thread newThread = new Thread(threadBody);

            StartThread(newThread, null, startInfo);

            success = true;
        }
        finally
        {
            Monitor.Exit(_lock);
        }

        return success;
    }

    private void StartThread(Thread newThread, object threadParams, ThreadStartInfo startInfo)
    {
        if (newThread == null || startInfo == null)
        {
            return;
        }

        // Apply start info
        newThread.Name = startInfo.Name;
        newThread.SetApartmentState(startInfo.ApartmentState);
        newThread.IsBackground = startInfo.IsBackground;

        if (threadParams == null)
        {
            newThread.Start();
        }
        else
        {
            newThread.Start(threadParams);
        }

        _threads.Add(newThread);

        RemoveDeadThreads();
    }

    public void RemoveDeadThreads()
    {
        _threads.RemoveAll(t => (!t.IsAlive));
    } 
```

在主线程中执行：

```
 public void InsertAsync(AP p, APr pr)
    {
        ParameterizedThreadStart thread = new ParameterizedThreadStart(InsertPr);
        List<object> parameters = new List<object>();

        // Create new controller. Must be before the thread to avoid cross-thread operation exception.
        PageController controller = new PageController();
        controller.Initialize(siteWebBrowser);

        parameters.Add(controller);
        parameters.Add(p);
        parameters.Add(pr);
        parameters.Add(_session);

        // If the thread cannot start notify listeners
        if (!_threadManager.TryAddThread(thread, parameters, new ThreadStartInfo("InsertAsync", ApartmentState.STA, true)) && ThreadCreationFailed != null)
        {
            _logger.Error("InsertAsync: Could not start thread.");
            ThreadCreationFailed();
        }

    }

    private static void InsertPr(object o)
    {
        try
        {
            _logger.Debug("Thread start - InsertPr");

            List<object> parameters = (List<object>)o;
            PageController controller = (PageController)parameters[0];
            AP p = (AP)parameters[1];
            APr pr = (APr)parameters[2];
            Session session = (Session)parameters[3];

            if (patient == null)
            {
                throw new ArgumentException("Null patient.");
            }

            session.WaitForHistorySynchronizationSuspension();

            if (Program.ShouldAbortBackgroundOperations)
            {
                throw new Exception("Aborting..");
            }

            session.DoingSomeJob = true;

            controller.ClearCurrent();

            controller.GoToHomePage(3, true);

            controller.ClickNew();

            controller.SearchForP(p.Id);

            try
            {
                controller.WaitUntilDivExists(Constants.NewPrContainerDivId);
            }
            catch (Exception)
            {
                _logger.Error("InsertAsync: Error while waiting for div '" + Constants.NewPrContainerDivId + "' to appear.");
                throw;
            }

            if (PrInsertionCompleted != null)
            {
                PrInsertionCompleted();
            }
        }
        catch (Exception ex)
        {
            _logger.ErrorException("InsertAsync", ex);

            if (InsertionFailed != null)
            {
                InsertionFailed(Constants.MessageFailed);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:27:34.403

当程序的主启动线程终止时，您可以要求 CLR 为您自动中止线程。但这*不是*自动的，您必须将线程的 IsBackground 属性显式设置为 true。线程池线程会自动打开该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:22:18.230

WaitSleepJoin 表示线程已通过调用 lock (Monitor.Enter)、调用 Thread.Sleep、调用 Thread.Join 或其他一些线程同步对象来阻塞自己。

也许如果您提供导致此线程状态的示例线程入口点，有人可以提供更详细的答案。

# sql-server - CASE 或 AND/OR 在 WHERE 条件下。最佳做法是什么？

> ID：11724283
> 
> 赞同：3
> 
> 时间：2012-07-30T15:11:45.753
> 
> 标签：sql-server, tsql

我经常遇到这样的情况，我可以像这样编写 t-sql 查询的条件......

```
DECLARE @FirstName NVARCHAR(500)    
SET @FirstName ='Joe'

SELECT * 
FROM dbo.Customers c
WHERE 
    CASE 
        WHEN  @FirstName <> ''  THEN
            CASE WHEN c.FirstName= @FirstName THEN 1 ELSE 0 END
        ELSE 1
     END = 1 
```

或者像这样...

```
SELECT * 
FROM dbo.Customers c
WHERE 
    (@FirstName = ''  OR (@FirstName <> '' AND c.FirstName = @FirstName)) 
```

它们都产生相同的结果，并且两个查询计划似乎相同。

所以我很好奇哪一个是最佳实践，或者一个比另一个有什么陷阱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:14:08.860

我认为在这种情况下主要也是关于可读性的，但在第一个查询示例中你做得更多。您正在强制数据库为每行创建一个 0 或 1 的值，并要求数据库检查该值是 0 还是 1。在我看来，创建查询时步骤越少越好。

我会选择第二种方法，尽管您可能可以摆脱 @FirstName<> '' 因为它是不必要的，所以您的查询会清理更多：

```
SELECT * 
FROM dbo.Customers c
WHERE 
    (@FirstName = ''  OR c.FirstName = @FirstName) 
```

编辑：马丁史密斯提供了一个非常好的见解，您可能需要考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:46:49.583

我更喜欢第二种的变体——将你的变量默认为空，因为在最近的 SQL Server 版本中有一个特定的优化可以针对它进行优化。

```
DECLARE @FirstName NVARCHAR(500) = NULL

SELECT * 
FROM dbo.Customers c
WHERE 
    (@FirstName IS NULL OR c.FirstName = @FirstName) 
```

有关更多详细信息，请参阅此 SO 答案：[https ://stackoverflow.com/a/3415629/1564603](https://stackoverflow.com/a/3415629/1564603)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-20T18:10:14.513

***使用 LIKE 来避免 Null Mathing 怎么样？***

声明 @FirstName NVARCHAR(500) = NULL

SELECT * FROM dbo.Customers c WHERE (c.FirstName LIKE @FirstName+'%')

我认为结果可能是相同的，甚至更有趣不管搜索的时间成本更长的事实

# c++ - 模板运算符重载错误

> ID：11724284
> 
> 赞同：-1
> 
> 时间：2012-07-30T15:11:46.663
> 
> 标签：c++, templates, operator-overloading

我写了一个类，我想为它实现一个迭代器（如下代码所示）。我需要重载各种运算符，我遇到了下面提到的错误：

```
class BaseClass
{
    virtual ~BaseClass() {}
};

template<class T>
class AbstractBaseOrgan: public BaseClass
{
public:
    typedef T value;
    template<class TT>
    class AbstractBaseIterator:
        public std::iterator<std::random_access_iterator_tag,
        typename std::iterator_traits<TT>::value_type>
    {
    protected:
        TT _M_current;
        const TT&
        base() const
        { return this->_M_current; }
    };
protected:
    value te;
};

template<typename Iter>
inline bool
operator<(const typename AbstractBaseOrgan<typename 
    std::iterator_traits<Iter>::value_type>::template 
    AbstractBaseIterator<Iter>& lhs,
    const typename AbstractBaseOrgan<typename 
    std::iterator_traits<Iter>::value_type>::template 
    AbstractBaseIterator<Iter>& rhs)
{ return lhs.base() < rhs.base(); }

int main()
{
    AbstractBaseOrgan<int>::AbstractBaseIterator<int*> temp;
    AbstractBaseOrgan<int>::AbstractBaseIterator<int*> temp2;
    int ttemp;
    if(operator< (temp,temp2))
        ttemp = 0;
    return 0;
} 
```

编译它会给我以下错误：

```
error: no matching function for call to ‘operator<(AbstractBaseOrgan<int>::AbstractBaseIterator<int*>&, AbstractBaseOrgan<int>::AbstractBaseIterator<int*>&)’ 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:52:14.757

> 4 在大多数情况下，用于构成 P 的类型、模板和非类型值参与模板参数推导。也就是说，它们可用于确定模板参数的值，并且如此确定的值必须与其他地方确定的值一致。然而，在某些情况下，该值不参与类型推导，而是使用在其他地方推导或明确指定的模板参数的值。如果模板参数仅在非推导上下文中使用且未明确指定，则模板参数推导失败。
> 
> 非推导上下文是： — 使用限定 ID 指定的类型的嵌套名称说明符。

您可以通过几种方式避免这种情况。第一种方式 - 为类 AbstractIteratorBase 或其成员创建 operator < 朋友。

```
template<class TT>
class AbstractBaseIterator:
    public std::iterator<std::random_access_iterator_tag,
    typename std::iterator_traits<TT>::value_type>
{
    public:
        template<typename Iter>
        friend bool operator < (const AbstractBaseIterator<Iter>& lhs, const AbstractBaseIterator<Iter>& rhs)
        {
            return lhs.base() < rhs.base();
        }
protected:
    TT _M_current;
    const TT&
    base() const
    { return this->_M_current; }
}; 
```

第二个变体是在模板类中定义 AbstractBaseIterator 类。然后`typedef AbstractBaseIterator<T> iterator;`在 AbstractBaseOrgan 中。如果你可以使用 C++11，你可以使用类似的东西。

```
class BaseClass
{
    virtual ~BaseClass() {}
};

template<class TT>
class AbstractBaseIterator:
public std::iterator<std::random_access_iterator_tag,
typename std::iterator_traits<TT>::value_type>
{
protected:
    TT _M_current;
    const TT&
    base() const
    { return this->_M_current; }
};

template<typename Iter>
bool operator < (const AbstractBaseIterator<Iter>& lhs, const AbstractBaseIterator<Iter>& rhs)
{
   return lhs.base() < rhs.base();
}

template<class T>
class AbstractBaseOrgan: public BaseClass
{
public:
    typedef T value;
    template<typename TT>
    using iterator = AbstractBaseIterator<TT>;
protected:
    value te;
};

int main()
{
    AbstractBaseOrgan<int>::iterator<int*> temp;
    AbstractBaseOrgan<int>::iterator<int*> temp2;
    int ttemp;
    if(operator< (temp,temp2))
        ttemp = 0;
    return 0;
} 
```

# ruby-on-rails - 在模型中使用 Rails 应用程序配置变量

> ID：11724285
> 
> 赞同：5
> 
> 时间：2012-07-30T15:11:47.577
> 
> 标签：ruby-on-rails

我在我的 Rails 应用程序（APP_CONFIG 哈希）中定义了自定义配置变量。好的，现在如何在我的模型中使用这些变量？在模型中直接调用 APP_CONFIG['variable'] 是一种非轨道方式！例如，我可以在没有 Rails 环境的情况下使用这些模型。那么APP_CONFIG 没有被定义。

ATM 我使用模型观察器并为全局配置变量分配实例变量，如下所示：

```
def after_initialize model
  Mongoid.observers.disable :all do
    model.user_id = APP_CONFIG['user_id'])
    model.variable = User.find(model.user_id).variable
  end
end 
```

但是这个解决方案看起来像一个猴子补丁。有更好的方法吗？

或者我应该保持最简单，可以在新应用程序（不是 Rails 应用程序）中定义 APP_CONFIG 哈希？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:44:04.363

我会使用依赖注入。如果您有一个需要各种配置值的对象，您可以通过构造函数注入配置对象：

```
class Something
  def initialize(config = APP_CONFIG)
    @config = config
  end
end 
```

如果配置只需要一个方法，只需将其传递给方法：

```
def something(config = APP_CONFIG)
  # do something
end 
```

Ruby 在调用方法时评估参数。默认值允许您在开发/生产中使用配置对象，而无需手动将其传递给方法，并在测试中使用存根而不是实际配置。

除了定义另一个全局变量/常量，您还可以[使用 Rails 配置](https://stackoverflow.com/a/5053882/279024)：

```
def something(config = Rails.config)
  # do something
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:04:07.173

/config/config.yml

```
defaults: &defaults
  user_id :100

development:
  <<: *defaults

test:
  <<: *defaults

production:
  <<: *defaults 
```

/config/initializers/app_config.rb

```
APP_CONFIG = YAML.load_file("#{Rails.root}/config/config.yml")[Rails.env] 
```

您现在可以`APP_CONFIG['user_id']`在模型中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T16:29:10.003

用于`:before_create`保持代码本地化到您的模型：

```
class MyModel < ActiveRecord::Base

  before_create :set_config

  private

  def set_config
    self.app_config = APP_CONFIG
  end
end 
```

或者，作为替代方案，您可以使用`ActiveSupport::Concern`，这是一种创建模块的非常干净的方法，您可以在 N 个模型中很好地重用：

```
class MyModel < ActiveRecord::Base    
  include AppConfig     
end

module AppConfig
    extend ActiveSupport::Concern

    included do
       #...
    end

    module ClassMethods
       #...
    end

    def app_config
      APP_CONFIG
    end
end 
```

# internet-explorer - 在 Internet Explorer 中始终打开链接

> ID：11724291
> 
> 赞同：0
> 
> 时间：2012-07-30T15:11:58.763
> 
> 标签：internet-explorer, javascript-events

我正在尝试为将使用 Google Charts API（仅在 Internet Explorer 中运行良好）弹出图表的网页编写 JavaScript 代码。无论使用本机浏览器查看网页，是否有办法在 Internet Explorer 中自动打开链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:13:15.553

不; 那是完全不可能的。

Google Charts API 在其他浏览器中也能正常工作。

# asp.net-mvc - 如果资源文件使用区域性前缀命名，则资源命名空间不存在

> ID：11724293
> 
> 赞同：0
> 
> 时间：2012-07-30T15:12:13.667
> 
> 标签：asp.net-mvc, localization, resources

我`Res.en.resx`在我的 Asp.Net Mvc 4 项目中命名了一个资源文件。

在一个视图中，我试图像这样访问它的属性：`@MvcApp.Resources.Res.Title`但我收到以下错误：

> 命名空间“MvcApp”中不存在类型或命名空间名称“Resources”（您是否缺少程序集引用？）

如果我将资源名称更改为`Res.resx`一切正常。

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T18:56:35.147

我相信您至少需要一个名为 xxx.resx 的文件，其中包含应用程序默认语言的翻译。

因此，如果您的主要语言是法语并且您想要英文版本，您需要：

*   xxx.resx 文件，其中包含您的应用程序的默认语言。
*   xxx.en.resx 文件，其中包含您的文件的英文版本。

希望这有帮助！

# html - HTML5 Canvas - 带图像的圆形动画

> ID：11724294
> 
> 赞同：0
> 
> 时间：2012-07-30T15:12:16.237
> 
> 标签：html, animation, canvas

我试图得到这样的东西——> [http://jsfiddle.net/NhvAZ/10/](http://jsfiddle.net/NhvAZ/10/)但在圆圈内有图像。

我做了与上面示例完全相同的方式，但它不适用于图像。这是我的代码：http: [//jsfiddle.net/uyEaq/](http://jsfiddle.net/uyEaq/)

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T19:22:34.773

嗯，这真的很令人困惑，但看看你给过的小提琴的一些以前的迭代，我想我知道你想要什么。

您希望出现不断增加的图像切片，对吗？剪辑可以为您做到这一点。这是使用您的一些代码的示例：

[http://jsfiddle.net/QMZg2/](http://jsfiddle.net/QMZg2/)

# asp.net-mvc - 输入模型不为空

> ID：11724298
> 
> 赞同：0
> 
> 时间：2012-07-30T15:12:25.087
> 
> 标签：asp.net-mvc

是星期一。在查询字符串中不带参数调用`GET`此操作。输入模型不为空。它不应该为空吗？还是发生了其他事情而我还没醒？

```
 public ActionResult Report(VariancesReportForm form)
 {
      if (form == null)
           return View(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:13:30.943

> 它不应该为空吗？

不，不应该。默认模型绑定器实例化参数。然后它绑定它的属性。但是由于没有任何查询字符串参数，所有属性都将为空。

# iphone - 如何在我的 iOS 应用程序中从邮件中打开自定义数据文件？

> ID：11724303
> 
> 赞同：0
> 
> 时间：2012-07-30T15:12:49.100
> 
> 标签：iphone, objective-c, ios, ios5

我不知道从哪里开始。如何在 Mail 中启用“在...我的应用程序中打开”，然后如何将自定义数据文件加载到我的应用程序中？

我认为我在 Google 搜索中的措辞不是很好，因为我没有找到我正在寻找的确切内容或任何可以引导我走向正确方向的东西。

非常感谢。

# c - 如何访问指向结构内数组的指针？

> ID：11724304
> 
> 赞同：-1
> 
> 时间：2012-07-30T15:12:53.583
> 
> 标签：c, arrays, pointers, structure

我有以下结构

```
typedef struct {
uint8  u8Status;
uint64 u64IeeeAddrRemoteDev;
uint16 u16NwkAddrRemoteDev;
uint8  u8NumAssocDev;
uint8  u8StartIndex;

/* rest of the message is variable Length */
uint16* pu16NwkAddrAssocDevList;
} ZPS_tsAplZdpIeeeAddrRsp; 
```

这`pNwkAddrAssocDevList`是一个指向 16 位网络地址列表的指针。

我正在使用以下这段代码

```
ZPS_tsAplZdpIeeeAddrRsp p;
/* this structure p is already filled by the system, i just need to access it*/
/* using for loop */
printf("%04x",p.pu16NwkAddrAssocDevList[i]); 
```

但我没有得到正确的值，它返回一些内存地址。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:34:00.170

这里 pu16NwkAddrAssocDevList 是一个指针。您需要在结构中添加另一个变量来定义 pu16NwkAddrAssocDevList 中值的长度/编号，例如**int length**。获得长度后，您可以通过循环访问 pu16NwkAddrAssocDevList 的值。

`for (int i=0; i < p.length; i++) {`

```
 printf("%04x", p->pu16NwkAddrAssocDevList);

    pu16NwkAddrAssocDevList++; 
```

`}`

这样，您可以轻松地遍历存储在 pu16NwkAddrAssocDevList 中的值。

# php - 多域单点登录

> ID：11724305
> 
> 赞同：3
> 
> 时间：2012-07-30T15:12:56.220
> 
> 标签：php, html, authentication, single-sign-on, josso

我目前正在尝试加入不同域 example1.com 和 ex.example2.net 上的 2 个 Web 应用程序，以便您可以登录到 example1 并单击指向 example2 的链接并立即登录，因为这对客户来说更方便只需登录一次并在站点之间导航。

我研究了各种方法，即。php 会话、openID、JOSSO 和 Kerberos，但什么是实现此功能的安全且简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:20:28.420

Kerbros 非常广泛，适用于需要高安全性的系统。它很难使用，甚至只是设置，除非您非常了解 linux，并且如果您的托管服务提供商允许您通过机器进行这种类型的访问，否则我不会建议您使用这条路线。

但是，我对 JOSSO 或 openID 还不够熟悉，无法对它们进行很好的评论。

任何 php 会话都只对域有益，并且域所在的服务器，有点像 cookie，但不是，尽管你会使用它们。

如果两个站点位于同一托管帐户/服务器上，我认为您最简单的解决方案更是如此。就是要有一个专门针对这个原因的数据库。您要做的是像通常一样创建一个登录系统，但是您将有 2 个站点读取此登录信息。除了正常登录之外，您还将拥有一个会话跟踪表。通常，您已经在用户登录时设置了会话以使他们保持登录状态，并且您会在此处执行相同的操作，但是您需要在方程式中添加一个 cookie，两个站点都可以识别并使用该 cookie 来比较您跟踪的新表中的条目你的用户。我会说继续尝试通过 IP、浏览器，也许还有一个用户 ID，所有这些都在一个 cookie 中，具有某种唯一的哈希值，以及特定于用户的东西，基于只有服务器可以根据他们为用户拥有的信息重新创建的东西。

当然，我在概念上把它弄糊涂了，它比我想象的要复杂一些，但这将是你的一般垫脚石。

此外，如果站点彼此独立，您总是可以在它们之间创建一个 API 来来回传递 JSONP 样式的信息，这样一个站点就可以充当登录中心，而另一个站点只是验证

但总的来说，这完全取决于你想要做什么，如何，何时何地等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:50:19.363

您可以让一个应用程序使用 php 会话处理两个站点的登录。

example1.com 用户登录并存储 php 会话 cookie。

ex.example2.net 检查 example1.com 并验证会话 cookie。如果不存在重定向到 example1.com 登录页面或 example1.com 上的自定义登录页面。如果确实存在，则将用户登录到 ex.example2.net。

如果您只想要一个链接，那么您会生成一个哈希值，并在他们登录第一个应用程序后将其传递给第二个应用程序。如果哈希有效，则将它们登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T15:21:57.960

如果它适合你，我的建议是去**openID 路线**。这是更简单的方法，并且足够安全。此外，注册过程对用户来说也更容易、更快捷。

如果您愿意，您实际上可以只允许来自您的登录域的 ID，使其几乎成为一个“私人”登录系统。

也有缺点...您无法很好地控制注册过程，您依赖于 openID 授权过程...如果您的主机配置不正确，可能会出现一些问题（例如时区差异） .

但总的来说，它是一个相对安全的系统，易于实施。

Kerberus 非常安全，但使用起来却是一场噩梦。除非您正在处理高度敏感的用户信息，例如信用卡号码，或者认为您的网站成为黑客攻击的诱人目标，否则我认为这不值得您花时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T15:17:48.353

我会使用在两个站点之间共享的数据库表。如果您沿着 PHP 会话路线走，请不要尝试将会话数据从一个站点传递到不同域上的下一个站点，它将无法正常工作。很多个月前我发现这篇文章很有帮助：[跨多个域的单点登录](https://stackoverflow.com/questions/44509/single-sign-on-across-multiple-domains)

# macos - 代码可在 Windows 上运行，但无法在 MAC 上运行（错误 68）

> ID：11724306
> 
> 赞同：1
> 
> 时间：2012-07-30T15:13:03.380
> 
> 标签：macos, excel, vba

在专家最亲切的帮助下，我能够实现我的目标 1) 根据第 3 列中的条目自动创建文件夹结构；和 2) 在相应的列中自动创建超链接

代码可以在下面找到

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Not Intersect(Target, Columns(3)) Is Nothing Then
    Dim tr As String
    With Target
        tr = ThisWorkbook.Path & "\" & .Offset(, -2).Value
        If Len(Dir(tr)) = 0 Then
            MkDir tr
            MkDir tr & "\Subfolder 1"
            MkDir tr & "\Subfolder 2"
            MkDir tr & "\Subfolder 3" & "\Sub-subfolder 1"
            .Hyperlinks.Add .Offset(, 4), tr, TextToDisplay:="Name"
        End If
    End With
End If

End Sub 
```

我一直试图让它在 Mac 上工作，但我总是得到错误 68，然后调试器在线打开

```
If Len(Dir(tr)) = 0 Then 
```

我尝试`\`在下面的行中更改内引号

```
tr = ThisWorkbook.Path & "\" & .Offset(, -2).Value 
```

至

*   使用`:`
*   使用`\`
*   使用`" "`（基本上是空白空间）
*   我试图改变`"(denominator)"`-`application.pathseparator`仍然没有。

绝对没有。

用户友好地建议了这个网页[http://www.rondebruin.nl/mac.htm#Directory](http://www.rondebruin.nl/mac.htm#Directory) （请参阅当它不存在时制作一个导演部分）这可能确实有效 - 我看到的问题是它不似乎检查一个文件夹是否已经存在，而且我不太清楚如何创建子文件夹。

但出于某些（固执/愚蠢？）的原因，我相信这一定会奏效，而且我的生活过于复杂。

有什么想法吗？

卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:05:21.957

在 Mac 上，您应该使用正斜杠 /。

由于您真的不知道您是在 PC 上还是 Mac 上，我建议使用文件系统对象而不是您提到的 shell 调用，因为这样做您还需要知道您是在调用 Windows 命令行还是mac bash 脚本。他们不一样。:)

此处对其进行了描述：[http ://www.tek-tips.com/faqs.cfm?fid=4116](http://www.tek-tips.com/faqs.cfm?fid=4116)

# r - 我应该为在线课程使用 utf-8 编码吗？

> ID：11724309
> 
> 赞同：3
> 
> 时间：2012-07-30T15:13:07.763
> 
> 标签：r

你好这是我的问题：

我目前正在为编程背景为零的人（这是学习生物学、兽医学、医学、经济学……）的人开设 R 编程入门课程，因此他们往往不太精通技术并使用 Windows。在他们下载并打开我准备的 R 脚本后，他们会不时发现编码错误的字符（因为课程是西班牙语并且有很多口音）。发生这种情况是因为我的脚本是使用 UTF-8 编码制作的，并且默认情况下在 Windows 中不受支持。

避免这种滋扰的选项是：

1.  将我所有的脚本更改为编码 WINDOWS-1252
2.  指示所有人将其编码更改为 UTF-8

第一个选项对我来说更烦人，有助于防止学生因一个很小的细节而分心。

从教学的角度来看，第二种选择没有明显的优势，所以我想问一下你认为它有哪些优点......

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:28:46.590

我强烈建议指导他们将编码更改为 UTF-8。我在许多情况下都遇到过同样的问题，使用网络应用程序脚本，一般来说，通过代码比指导客户（或者在你的情况下，学生）使用 UTF-8 编码要麻烦得多。

毕竟你所参加的课程是一门入门课程，你可能需要考虑简要介绍一下这个主题并解释两者之间的区别——更具体地说：当它不起作用时会发生什么？

你有一个千载难逢的机会在以后的道路上拯救自己，并且可能完全避免“为什么我的屏幕上到处都是问号”这个问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:55:28.647

也许您可以在脚本中避免使用非 ASCII 字符。例如，要表示希腊语“mu”字符，您可以使用

```
> mu <- "\u03BC"
> Encoding(mu) <- "UTF-8"
> mu
[1] "μ" 
```

现在，如果您`mu`在控制台上打印，它会正确显示。在脚本中，您根本没有使用任何非 ASCII 字符。

# c# - 如何使这个函数在恒定时间内处理？

> ID：11724310
> 
> 赞同：3
> 
> 时间：2012-07-30T15:13:07.610
> 
> 标签：c#, time-complexity

我需要找到这个无限级数的第 n 项：1,2,2,3,3,3,4,4,4,4...

你能给我这个任务的常数时间函数吗？

```
int i = 1;
while(true)
{
   if(i = n)
      //do things and exit the loop

   i++;
} 
```

我认为这不会是一个恒定的时间函数......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:17:30.660

**编辑**

阅读更多评论后，我似乎误解了这个问题。

如果您想在常数时间内找到*数组*`n`中第 th 位置的项目，那么答案很简单：，因为数组访问是常数时间。但是，如果由于某种原因您使用了一些访问时间不固定的容器（例如链表），或者不想在数组中查找值，则必须使用[算术级数](http://mathworld.wolfram.com/ArithmeticSeries.html)公式来找到答案。*`x[n]`*

 *算术级数告诉我们第 th 个独特项目的位置`n`将`i`是

```
n = i * (i - 1) / 2 
```

所以我们只需要解决`i`. 使用二次公式，并丢弃无意义的否定选项，我们得到：

```
i = Math.Floor( (1 + Math.Sqrt(1 + 8 * n)) / 2) 
```

**原始回复**

我假设您正在寻找第 n 个*唯一项的**位置*，因为否则问题很简单。

 *听起来第 n 个唯一项的第一次出现应该遵循[算术级数](http://mathworld.wolfram.com/ArithmeticSeries.html)。即第 n 个唯一项的位置是：

```
n * (n - 1) / 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:31:23.613

鉴于我对这个问题的理解，这更像是一个数学问题而不是编程问题。

如果问题是：

**给定一个由 1 的 1 个副本、2 的 2 个副本、3 的 3 个副本... n 个 n 的副本组成的无限序列，这个序列中的第 k 个值是多少？**

现在处理这个问题的第一个线索是在第一次出现 n + 1 之前有 1 + 2 + 3... + n 个值。具体来说，在 n+1 之前有（前 n 个数字的总和）值，或者(n)(n-1)/2。

现在设置 (n)(n-1)/2 = k。乘以并有理化为 n^2 - n - 2k = 0。使用二次方程求解，得到 n = (1 + sqrt(1+8k))/2。它的下限为您提供了 n 之前有多少完整副本，并且令人高兴的是，给定基于零的索引，下限为您提供数组中第 k 个点的值。

这意味着您在 c# 中的最终答案是

`return (int) Math.Floor((1 + Math.Sqrt(1 + 8 * k)) / 2);`

给定非零基索引，

`return (int) Math.Floor((1 + Math.Sqrt(-7 + 8 * k)) / 2);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:48:32.357

```
 public static long Foo(long index)
        {
            if (index < 0)
            {
                throw new IndexOutOfRangeException();
            }

            long nowNum = 0;
            long nowIndex = 0;
            do
            {
                nowIndex += nowNum;
                nowNum++;
            } while (nowIndex < index);
            return nowNum;
        } 
```**

# r - 如何添加不同大小和颜色的ggplot2字幕？

> ID：11724311
> 
> 赞同：97
> 
> 时间：2012-07-30T15:13:13.603
> 
> 标签：r, ggplot2, subtitle

我正在使用 ggplot2 来改进降水条形图。

这是我想要实现的可复制示例：

```
library(ggplot2)
library(gridExtra)
secu <- seq(1, 16, by=2)
melt.d <- data.frame(y=secu, x=LETTERS[1:8])
m <- ggplot(melt.d, aes(x=x, y=y)) +
  geom_bar(fill="darkblue") + 
  labs(x="Weather    stations", y="Accumulated Rainfall [mm]") +
  opts(axis.text.x=theme_text(angle=-45, hjust=0, vjust=1),
       title=expression("Rainfall"), plot.margin = unit(c(1.5, 1, 1, 1), "cm"),
       plot.title = theme_text(size = 25, face = "bold", colour = "black", vjust = 5))
z <- arrangeGrob(m, sub = textGrob("Location", x = 0, hjust = -3.5, vjust = -33, gp = gpar(fontsize = 18, col = "gray40"))) #Or guessing x and y with just option
z 
```

我不知道如何避免在 ggplot2 上的 hjust 和 vjust 上使用猜测数字？有没有更好的方法来放置字幕（不仅仅是使用 \n，而是使用不同文本颜色和大小的字幕）？

我需要能够与 ggsave 一起使用才能拥有 pdf 文件。

这里有两个相关的问题：

[在 R 的绘图区域之外添加脚注引用？](https://stackoverflow.com/questions/10197738/add-a-footnote-citation-outside-of-plot-area-in-r)

[如何在 R 中添加字幕并更改 ggplot 绘图的字体大小？](https://stackoverflow.com/questions/3864535/how-can-i-add-a-subtitle-and-change-the-font-size-of-ggplot-plots-in-r)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2016-03-16T04:08:23.277

最新的 ggplot2 版本（即 2.1.0.9000 或更高版本）具有字幕和情节下方字幕作为内置功能。这意味着你可以这样做：

```
library(ggplot2) # 2.1.0.9000+ 

secu <- seq(1, 16, by=2)
melt.d <- data.frame(y=secu, x=LETTERS[1:8])

m <-  ggplot(melt.d, aes(x=x, y=y))
m <- m + geom_bar(fill="darkblue", stat="identity")
m <- m + labs(x="Weather    stations", 
              y="Accumulated Rainfall [mm]",
              title="Rainfall",
              subtitle="Location")
m <- m + theme(axis.text.x=element_text(angle=-45, hjust=0, vjust=1)) 
m <- m + theme(plot.title=element_text(size=25, hjust=0.5, face="bold", colour="maroon", vjust=-1))
m <- m + theme(plot.subtitle=element_text(size=18, hjust=0.5, face="italic", color="black"))
m 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-07-30T21:07:42.680

**忽略此答案** `ggplot2`2.2.0 版具有标题和副标题功能。[请参阅下面](https://stackoverflow.com/a/36026629/4581200)的@hrbrmstr 的答案。

* * *

您可以在 an 中使用嵌套`atop`函数`expression`来获得不同的大小。

**编辑**ggplot2 0.9.3 的更新代码

```
m <-  ggplot(melt.d, aes(x=x, y=y)) + 
     geom_bar(fill="darkblue", stat = "identity") + 
     labs(x="Weather    stations", y="Accumulated Rainfall [mm]") + 
     ggtitle(expression(atop("Rainfall", atop(italic("Location"), "")))) +
     theme(axis.text.x = element_text(angle=-45, hjust=0, vjust=1), 
     #plot.margin = unit(c(1.5, 1, 1, 1), "cm"), 
     plot.title = element_text(size = 25, face = "bold", colour = "black", vjust = -1)) 
```

![在此处输入图像描述](../Images/4638c8286c30901e3cd008f9d0a37d77.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-03T01:42:46.887

It appears `opts` is deprecated as of ggplot 2 0.9.1 and no longer functional. This worked for me with the latest versions as of today: `+ ggtitle(expression(atop("Top line", atop(italic("2nd line"), ""))))`.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-03-16T19:43:54.873

将 grobs 添加到 gtable 并以这种方式制作精美的标题并不难，

```
library(ggplot2)
library(grid)
library(gridExtra)
library(magrittr)
library(gtable)

p <- ggplot() + 
  theme(plot.margin = unit(c(0.5, 1, 1, 1), "cm"))

lg <- list(textGrob("Rainfall", x=0, hjust=0, 
                    gp = gpar(fontsize=24, fontfamily="Skia", face=2, col="turquoise4")),
               textGrob("location", x=0, hjust=0, 
                        gp = gpar(fontsize=14, fontfamily="Zapfino", fontface=3, col="violetred1")),
           pointsGrob(pch=21, gp=gpar(col=NA, cex=0.5,fill="steelblue")))

margin <- unit(0.2, "line")
tg <- arrangeGrob(grobs=lg, layout_matrix=matrix(c(1,2,3,3), ncol=2),
                  widths = unit.c(grobWidth(lg[[1]]), unit(1,"null")),
                  heights = do.call(unit.c, lapply(lg[c(1,2)], grobHeight)) + margin)

grid.newpage()
ggplotGrob(p) %>%
  gtable_add_rows(sum(tg$heights), 0) %>%
  gtable_add_grob(grobs=tg, t = 1, l = 4)  %>%
  grid.draw() 
```

[![在此处输入图像描述](../Images/8b19e85d777699033415ed9028c5ddd1.png)](https://i.stack.imgur.com/ozDSD.png)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-06-15T07:12:41.057

这个版本使用了一个`gtable`函数。它允许标题中有两行文本。每行的文本、大小、颜色和字体可以相互独立设置。但是，该函数将仅使用单个绘图面板修改绘图。

**次要编辑：更新到 ggplot2 v2.0.0**

```
# The original plot
library(ggplot2)

secu <- seq(1, 16, by = 2)
melt.d <- data.frame(y = secu, x = LETTERS[1:8])

m <- ggplot(melt.d, aes(x = x, y = y)) + 
     geom_bar(fill="darkblue", stat = "identity") + 
     labs(x = "Weather    stations", y = "Accumulated Rainfall [mm]") + 
     theme(axis.text.x = element_text(angle = -45, hjust = 0, vjust = 1))

# The function to set text, size, colour, and face
plot.title = function(plot = NULL, text.1 = NULL, text.2 = NULL, 
   size.1 = 12,  size.2 = 12,
   col.1 = "black", col.2 = "black", 
   face.1 = "plain",  face.2 = "plain") {

library(gtable)
library(grid)

gt = ggplotGrob(plot)

text.grob1 = textGrob(text.1, y = unit(.45, "npc"), 
   gp = gpar(fontsize = size.1, col = col.1, fontface = face.1))
text.grob2 = textGrob(text.2,  y = unit(.65, "npc"), 
   gp = gpar(fontsize = size.2, col = col.2, fontface = face.2))

text = matrix(list(text.grob1, text.grob2), nrow = 2)
text = gtable_matrix(name = "title", grobs = text, 
   widths = unit(1, "null"), 
   heights = unit.c(unit(1.1, "grobheight", text.grob1) + unit(0.5, "lines"), unit(1.1,  "grobheight", text.grob2) + unit(0.5, "lines")))

gt = gtable_add_grob(gt, text, t = 2, l = 4)
gt$heights[2] = sum(text$heights)

class(gt) =  c("Title", class(gt))

gt
}

# A print method for the plot
print.Title <- function(x) {
   grid.newpage()   
   grid.draw(x)
}

# Try it out - modify the original plot
p = plot.title(m, "Rainfall", "Location", 
   size.1 = 20, size.2 = 15, 
   col.1 = "red", col.2 = "blue", 
   face.2 = "italic")

p 
```

![在此处输入图像描述](../Images/239821ca5cb456849e6c3192ff4582aa.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-30T20:41:34.683

您可以使用将绘图包装在 grid.arrange 中并传递自定义的基于网格的标题，

[![在此处输入图像描述](../Images/833f348e9c8f3272cc1b78a0dbd4e1f3.png)](https://i.stack.imgur.com/ixXoL.png)

```
library(ggplot2)
library(gridExtra)

p <- ggplot() + 
  theme(plot.margin = unit(c(0.5, 1, 1, 1), "cm"))

tg <- grobTree(textGrob("Rainfall", y=1, vjust=1, gp = gpar(fontsize=25, face=2, col="black")),
               textGrob("location", y=0, vjust=0, gp = gpar(fontsize=12, face=3, col="grey50")),
               cl="titlegrob")
heightDetails.titlegrob <- function(x) do.call(sum,lapply(x$children, grobHeight))

grid.arrange(p, top = tg) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-09-21T01:20:31.927

您可能已经注意到 Sandy 的代码没有为“Rainfall”生成粗体标题 - 使这个粗体的指令应该出现在 atop() 函数中而不是 theme() 函数中。

```
ggplot(melt.d, aes(x=x, y=y)) + 
 geom_bar(fill="darkblue", stat = "identity") + 
 labs(x="Weather    stations", y="Accumulated Rainfall [mm]") + 
 ggtitle(expression(atop(bold("Rainfall"), atop(italic("Location"), "")))) +
 theme(axis.text.x = element_text(angle=-45, hjust=0, vjust=1),
 plot.title = element_text(size = 25, colour = "black", vjust = -1)) 
```

[![在此处输入图像描述](../Images/5788984e23fa8db9cfd2c3210496fc96.png)](https://i.stack.imgur.com/yUflw.png)

# objective-c - 线程 1：更改 ViewController 时的 EXC_BAD_ACCESS

> ID：11724314
> 
> 赞同：0
> 
> 时间：2012-07-30T15:13:19.187
> 
> 标签：objective-c, ios

我需要碰碰我的 ViewControllers，所以我使用了这个函数：

```
(void)pushViewFromRight:(UIViewController*)coming over:(UIViewController*)going {
    CGRect frameComing = coming.view.frame;
    CGRect frameGoing = going.view.frame;
    frameComing.origin.x = 0;
    frameComing.origin.y = -460;
    coming.view.frame = frameComing;
    if ([coming.view superview] == nil)
        [SlideContainer addSubview:coming.view];

    [UIView beginAnimations:@"frame" context:nil];
    [UIView setAnimationDuration:1];

    [coming viewWillAppear:YES];
    [going viewWillAppear:YES];
    frameComing.origin.y = 0;
    coming.view.frame = frameComing;
    going.view.frame = frameGoing;
    [going viewDidDisappear:YES];
    [coming viewDidAppear:YES];

    [UIView commitAnimations];

} 
```

在第二个 ViewController 上，我创建了一个返回按钮。但是当我想返回时（即使按下按钮后没有任何操作），它会因 EXC_BAD_ACCESS 而崩溃。为什么会这样？

# c++ - 从 C++ 处理 UIAlertView 委托

> ID：11724319
> 
> 赞同：0
> 
> 时间：2012-07-30T15:13:31.270
> 
> 标签：c++, objective-c

我在 iOS 上有一个 C++ 项目。它主要使用 C++，除了一些需要 Objective-C 的任务。例如，显示 UIAlert。

所以我从 C++ 调用 UIAlert。我如何获得结果并知道用户点击的按钮是什么？

这是调用Objective-C的C++类的实现

```
void iOSBridge::iOSHelper::ShowAlert()
{
    [IsolatedAlert showAlert];
} 
```

在这里，我有 Objective-C 的实现：

```
+ (void)show{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning" 
                                                    message: @"hello" 
                                                   delegate:self 
                                          cancelButtonTitle:@"Cancel" 
                                          otherButtonTitles:@"OK", nil];
    [alert show];
    [alert release];
}

+ (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

} 
```

有没有办法从 clickedButtonAtIndex 委托再次调用 C++？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:52:57.147

将此类的扩展设置为`.mm`
Then have an static var `YourClaas *delegate;`in it

```
+ (void)showAlertWithDelegate:(YourClass*)del{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Warning" 
                                                    message: @"hello" 
                                                   delegate:self 
                                          cancelButtonTitle:@"Cancel" 
                                          otherButtonTitles:@"OK", nil];
    delegate = del;
    [alert show];
    [alert release];
}

+ (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
   del->buttonClickAtIndex(buttonIndex);
} 
```

并在您的文件中定义`void buttonClickAtIndex(int index)`方法`cpp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:42:34.920

没有什么能阻止您从 Objective C 调用 C++ 类。您需要为您的 Objective C 类提供某种 C++ 类的句柄，它需要将其存储为实例变量。然后你可以用它做任何你想做的事情。

当你像你一样只使用类方法时，这将是一件很尴尬的事情。最好使用实例方法，然后从 C++ 端创建实例，为实例提供句柄，然后将消息发送到实例而不是类。

# asp.net-mvc - 自动发现自动映射器配置

> ID：11724326
> 
> 赞同：4
> 
> 时间：2012-07-30T15:13:56.093
> 
> 标签：asp.net-mvc, reflection, automapper, automapper-2, auto-registration

当你在 MVC 中创建一个控制器时，你不需要为它做任何额外的注册。添加区域也是如此。只要你的 global.asax 有一个 AreaRegistration.RegisterAllAreas() 调用，就不需要额外的设置。

使用 AutoMapper，我们必须使用某种`CreateMap<TSource, TDestination>`调用来注册映射。可以使用 static 显式执行这些操作`Mapper.CreateMap`，或者通过从类派生`AutoMapper.Profile`、覆盖方法并从那里`Configure`调用。`CreateMap`

在我看来，应该能够扫描程序集以查找扩展自的类，`Profile`例如 MVC 扫描扩展自`Controller`. 有了这种机制，难道不能简单地通过创建一个派生自的类来创建映射`Profile`吗？是否存在任何这样的库工具，或者自动映射器中是否内置了一些东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T15:18:45.357

我不知道这样的工具是否存在，但写一个应该很简单：

```
public static class AutoMapperConfiguration
{
    public static void Configure()
    {
        Mapper.Initialize(x => GetConfiguration(Mapper.Configuration));
    }

    private static void GetConfiguration(IConfiguration configuration)
    {
        var assemblies = AppDomain.CurrentDomain.GetAssemblies();
        foreach (var assembly in assemblies)
        {
            var profiles = assembly.GetTypes().Where(x => x != typeof(Profile) && typeof(Profile).IsAssignableFrom(x));
            foreach (var profile in profiles)
            {
                configuration.AddProfile((Profile)Activator.CreateInstance(profile));
            }
        }
    }
} 
```

然后在你的`Application_Start`你可以自动接线：

```
AutoMapperConfiguration.Configure(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-22T20:29:49.827

作为对@Darin Dimitrov 答案的轻微改进，在 AutoMapper 5 中，您可以为其提供要扫描的组件列表，如下所示：

```
//--As of 2016-09-22, AutoMapper blows up if you give it dynamic assemblies
var assemblies = AppDomain.CurrentDomain.GetAssemblies()
                    .Where(x => !x.IsDynamic);
//--AutoMapper will find all of the classes that extend Profile and will add them automatically    
Mapper.Initialize(cfg => cfg.AddProfiles(assemblies)); 
```

# android - android数据库未在平板电脑中读取

> ID：11724329
> 
> 赞同：0
> 
> 时间：2012-07-30T15:14:07.950
> 
> 标签：android, database, sqlite, tablet

基本上我正在做的是一个测验应用程序，它从数据库中读取问题以及该问题的相应选项。该应用程序适用于平板电脑，因此屏幕左侧显示问题列表（根据数据库中的问题数量创建），右侧显示带有四个选项的问题。我遇到的问题是，即使它在模拟器上完美运行，它也不能在平板电脑上运行。我从 bin 文件夹中取出 .apk 并将其安装在平板电脑上，看起来它没有成功读取数据库。如果我要发布的代码看起来很草率，我深表歉意，这是我第一次使用 Android，我所做的一切都是基于我在通过互联网阅读的各种教程中阅读的内容.

这是数据库助手：

```
//Declaration of the Questions Database
public class DBHelper extends SQLiteOpenHelper{
//Columns to be created in the table questions
public static final String TABLE_QUESTIONS = "questions";
public static final String COLUMN_QUESTIONID = "_questionid";
public static final String COLUMN_QUESTION = "question";
public static final String COLUMN_EXPLANATION = "explanation";
public static final String COLUMN_QIMAGE = "questionimage";
public static final String COLUMN_EIMAGE = "explanationimage";
public static final String COLUMN_MODULEID = "moduleid";
//***************************************************************//
//Columns to be created in the table options
public static final String TABLE_OPTIONS = "options";
public static final String COLUMN_OPTIONID = "_optionid";
public static final String COLUMN_OPTION = "option";
public static final String COLUMN_CORRECTANSWER = "correctanswer";
//public static final String COLUMN_QUESTIONID = "questionid";
//***************************************************************//
//Database name and version
private static final String DATABASE_NAME = "discipulus.db";
private static final int DATABASE_VERSION = 1;

// Database creation SQL statement of questions table
private static final String QUESTIONS_CREATE = "CREATE TABLE " + TABLE_QUESTIONS + "(" + COLUMN_QUESTIONID + " integer primary key autoincrement, " 
        + COLUMN_QUESTION + " text not null, " 
        + COLUMN_EXPLANATION + " text not null, "
        + COLUMN_QIMAGE + " text not null, "
        + COLUMN_EIMAGE + " text not null, "
        + COLUMN_MODULEID + " integer not null);";

private static final String OPTIONS_CREATE = "CREATE TABLE " + TABLE_OPTIONS + "(" + COLUMN_OPTIONID + " integer primary key autoincrement, " 
        + COLUMN_OPTION + " text not null, " 
        + COLUMN_CORRECTANSWER + " integer not null, "
        + COLUMN_QUESTIONID + " integer not null);";

public DBHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase database) {
    database.execSQL(QUESTIONS_CREATE);
    database.execSQL(OPTIONS_CREATE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(DBHelper.class.getName(),
            "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_QUESTIONS);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_OPTIONS);
    onCreate(db);
}
}

public class QuestionDataSource {
private SQLiteDatabase database;
private DBHelper dbHelper;
private String[] allColumns = { DBHelper.COLUMN_QUESTIONID, DBHelper.COLUMN_QUESTION, DBHelper.COLUMN_EXPLANATION, 
    DBHelper.COLUMN_QIMAGE, DBHelper.COLUMN_EIMAGE, DBHelper.COLUMN_MODULEID };

public QuestionDataSource(Context context) {
    dbHelper = new DBHelper(context);
}

public void open() throws SQLException {
    database = dbHelper.getWritableDatabase();
}

public void close() {
    dbHelper.close();
} 
```

这是`Helper`表格问题

```
public Question createQuestion(String question, String explanation, String questionImage, String explanationImage, int moduleID) {
    ContentValues values = new ContentValues();
    values.put(DBHelper.COLUMN_QUESTION, question);
    values.put(DBHelper.COLUMN_EXPLANATION, explanation);
    values.put(DBHelper.COLUMN_QIMAGE, questionImage);
    values.put(DBHelper.COLUMN_EIMAGE, explanationImage);
    values.put(DBHelper.COLUMN_MODULEID, moduleID);
    long insertID  = database.insert(DBHelper.TABLE_QUESTIONS, null, values);

    Cursor cursor = database.query(DBHelper.TABLE_QUESTIONS, allColumns, DBHelper.COLUMN_QUESTIONID + " = " + insertID, null, null, 
            null, null);
    cursor.moveToFirst();
    Question newQuestion = cursorToQuestion(cursor);
    cursor.close();
    return newQuestion;
}

public List<Question> getAllQuestions() {
    List<Question> questions = new ArrayList<Question>();
    Cursor cursor = database.query(DBHelper.TABLE_QUESTIONS, allColumns, null, null, null, null, null);
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Question question = cursorToQuestion(cursor);
        questions.add(question);
        cursor.moveToNext();
    }
    cursor.close();
    return questions;
}

private Question cursorToQuestion(Cursor cursor) {
    Question question = new Question();
    question.setQuestionID(cursor.getInt(0));
    question.setQuestion(cursor.getString(1));
    question.setExplanation(cursor.getString(2));
    question.setQuestionImage(cursor.getString(3));
    question.setExplanationImage(cursor.getString(4));
    question.setModuleId(cursor.getInt(5));
    return question;
}
} 
```

这是表格选项的助手

```
public class OptionDataSource {
private SQLiteDatabase database;
private DBHelper dbHelper;
private String[] allColumns = { DBHelper.COLUMN_OPTIONID, DBHelper.COLUMN_OPTION, DBHelper.COLUMN_CORRECTANSWER, 
    DBHelper.COLUMN_QUESTIONID };

public OptionDataSource(Context context) {
    dbHelper = new DBHelper(context);
}

public void open() throws SQLException {
    database = dbHelper.getWritableDatabase();
}

public void close() {
    dbHelper.close();
}

public Option createOption(String option, int correctAnswer, int questionID) {
    ContentValues values = new ContentValues();
    values.put(DBHelper.COLUMN_OPTION, option);
    values.put(DBHelper.COLUMN_CORRECTANSWER, correctAnswer);
    values.put(DBHelper.COLUMN_QUESTIONID, questionID);
    long insertID  = database.insert(DBHelper.TABLE_OPTIONS, null, values);
    Cursor cursor = database.query(DBHelper.TABLE_OPTIONS, allColumns, DBHelper.COLUMN_OPTIONID + " = " + insertID, null, null, 
            null, null);
    cursor.moveToFirst();
    Option newOption = cursorToOption(cursor);
    cursor.close();
    return newOption;
}

public List<Option> getAllOptions() {
    List<Option> options = new ArrayList<Option>();
    Cursor cursor = database.query(DBHelper.TABLE_OPTIONS, allColumns, null, null, null, null, null);
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Option option = cursorToOption(cursor);
        options.add(option);
        cursor.moveToNext();
    }
    cursor.close();
    return options;
}

public List<Option> getOptions(int qID) {
    List<Option> options = new ArrayList<Option>();
    String MY_QUERY = "SELECT * FROM options WHERE _questionid = " + qID + ";";
    Cursor cursor = database.rawQuery(MY_QUERY, null);
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
        Option option = cursorToOption(cursor);
        options.add(option);
        cursor.moveToNext();
    }
    cursor.close();
    return options;
}

private Option cursorToOption(Cursor cursor) {
    Option option = new Option();
    option.setOptionID(cursor.getInt(0));
    option.setOption(cursor.getString(1));
    int cAnswer = cursor.getInt(2);
    if (cAnswer == 0) {
        option.setCorrectAnswer(false);
    }else {
        option.setCorrectAnswer(true);
    }
    option.setQuestionID(cursor.getInt(3));
    return option;
}
} 
```

这是`MainActivity`课程：

```
public class MainActivity extends ListActivity {
private QuestionDataSource dataSourceQuestions;
private OptionDataSource dataSourceOptions;
ArrayList<String> listItems = new ArrayList<String>();
ArrayAdapter<String> adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    dataSourceQuestions = new QuestionDataSource(this);
    dataSourceQuestions.open();

    dataSourceOptions = new OptionDataSource(this);
    dataSourceOptions.open();

    List<Question> questions = dataSourceQuestions.getAllQuestions();
    int qnCount = questions.size();
    for(Question qn : questions) {
        TextView pregunta = (TextView) findViewById(R.id.textView1);
        pregunta.setText(qn.getQuestion());
    }
    for (int i = 0; i < qnCount; i++) {
        listItems.add("Question " + (i + 1));
    }
    listItems.add("Question 3");
    adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listItems);
    setListAdapter(adapter);
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

protected void onListItemClick(ListView l, View v, int position, long id) {
    List<Question> questions = dataSourceQuestions.getAllQuestions();
    TextView pregunta = (TextView) findViewById(R.id.textView1);
    pregunta.setText(questions.get(position).getQuestion());
    int questionID = questions.get(position).getQuestionID();
    setRadioButtons(questionID);
}

private void setRadioButtons(int questionID) {
    List<Option> options = dataSourceOptions.getOptions(questionID);

    RadioButton rdb1 = (RadioButton) findViewById(R.id.rdbOption1);
    rdb1.setText(options.get(0).getOption());

    RadioButton rdb2 = (RadioButton) findViewById(R.id.rdbOption2);
    rdb2.setText(options.get(1).getOption());

    RadioButton rdb3 = (RadioButton) findViewById(R.id.rdbOption3);
    rdb3.setText(options.get(2).getOption());

    RadioButton rdb4 = (RadioButton) findViewById(R.id.rdbOption4);
    rdb4.setText(options.get(3).getOption());
}
} 
```

如果有人能帮我解决这个问题，我将不胜感激。同样，我遇到的问题是它在模拟器上运行良好，但是当我在平板电脑上运行它时它似乎没有读取数据库（在平板电脑中安装 .apk）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:17:33.893

我将插入查询放在`onCreate()`而不是，`MainActivity`它工作得很好。

# sql - SQL Server - 加入 4 个快速查询给了我一个慢查询

> ID：11724333
> 
> 赞同：2
> 
> 时间：2012-07-30T15:14:21.970
> 
> 标签：sql, sql-server, performance, sql-server-2008

我的 MS Sql Server 数据库中有 4 个视图，它们都非常快（不到 2 秒）并且返回的行数都少于 50 行。

但是，当我创建一个加入这 4 个视图（左外连接）的查询时，我得到一个需要将近一分钟才能完成的查询。

我认为查询优化器在这里做得不好，有什么办法可以加快速度。我很想将 4 个视图中的每一个复制到一个表中并将它们连接在一起，但这对我来说似乎是一种太多的解决方法。

（旁注：我不能在任何表上设置任何索引，因为视图来自不同的数据库，并且我不允许在那里更改任何内容，所以这不是一个选项）

**编辑：**我很抱歉，但我不认为发布 sql 查询会有所帮助。它们非常复杂，使用大约 50 个不同的表。我也无法发布执行计划，因为我没有足够的访问权限在某些数据库上生成执行计划。

我想我现在最好的解决方案是生成临时表来存储每个查询的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T15:18:12.757

如果您不能触摸索引，为了加快速度，您可以将 4 个查询的结果放在 4 个临时表中，然后加入它们。

您可以在存储过程中执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T07:06:01.343

您可以在加入时拥有派生的视图表。

示例：而不是有这个查询

```
 SELECT V1.* FROM dbo.View1 AS V1 INNER JOIN dbo.View2 as V2
     ON V1.Column1=V2.Column1; 
```

您可以进行以下查询

```
 SELECT V1.* FROM (SELECT * FROM dbo.View1) AS V1 INNER JOIN (SELECT * FROM dbo.View2) AS V2
     ON V1.Column1=V2.Column1; 
```

我希望这可以提高性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T15:19:50.257

如果您有很多列，则只包括您需要的列。特别是，如果您对列有许多数学运算，则数据库在返回结果时必须转换所有数字。

还有一点是，有时做 3 个查询比做一个巨大的连接并做 1 个查询更好。

然而，如果没有具体细节，就很难给出超出一般性的正确建议。

# orchardcms - Orchard CMS 使用 Migrations.cs 中定义的 MediaPickerField

> ID：11724335
> 
> 赞同：5
> 
> 时间：2012-07-30T15:14:39.340
> 
> 标签：orchardcms

MediaPickerFields 仍然让我难以理解。

我在 Migrations.cs 中定义了一个新部分，并在该部分中添加了一个`Boolean`列和一个`MediaPickerField`，如下所示：

```
SchemaBuilder.CreateTable("ImageContentPartRecord", table =>
            table.ContentPartRecord()
            .Column("DisplayImage", DbType.Boolean));

ContentDefinitionManager.AlterPartDefinition("ImageContentPart", builder =>
            builder
                .Attachable()
                .WithField("ImageField", fld =>
                    fld.OfType("MediaPickerField")
                    .WithDisplayName("Image"))); 
```

假设我有`ImageContentPart`类`ImageContentPartRecord`，如何从驱动程序和部件模板（编辑/显示）中的 MediaPickerField（url、尺寸、替代文本、类等）检索数据？

即 - Parts.ImageContent.cshtml （我想完成这样的事情）：

```
<div>
     <img src="@Model.ImageField.Url" alt="@Model.ImageField.Alt" />
</div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T23:17:21.087

这是解决方案：

在我的显示驱动程序方法中，我确保在构建时传递我的`ImageContentPart`( `part`) `ContentShape`：

```
return ContentShape("Parts_ImageContent", () =>
            shapeHelper.Parts_ImageContent(
                Content: part)); 
```

然后在我的模板视图中，我利用 Orchard 架构的动态特性来使用我的`MediaPickerField`. 为此，您访问`.ContentItem`您的部分属性，然后依靠动态，链接部分名称 ( `.ImageContentPart`) 和字段名称 ( `.ImageContent`) 以访问该字段。

```
@{
    // Attempting to access MediaPickerField named 'ImageContent'
    var image = Model.Content.ContentItem.ImageContentPart.ImageContent;

    // Leaning on Orchard dynamics to access properties of the field
    var url = image.Url;
}

<img src="@url" alt="@T(image.AlternateText)" /> 
```

以下是 MediaPickerField 属性的详尽列表`\\Orchard.Fields\Views\Fields\MediaPicker.cshtml`：

```
@* 
    Alternate Text: @Model.ContentField.AlternateText
    Class: @Model.ContentField.Class
    Style: @Model.ContentField.Style
    Alignment: @Model.ContentField.Alignment
    Width: @Model.ContentField.Width
    Height: @Model.ContentField.Height
    Url: @Model.ContentField.Url

    You can also display an image using this example, and add the attributes you need:
    <img src="@Href(Model.ContentField.Url)" />
*@ 
```

希望，如果您偶然发现类似的问题，这将有所帮助！

# grails - 未找到名称 [selenium] 的 Grails Selenium 插件

> ID：11724339
> 
> 赞同：0
> 
> 时间：2012-07-30T15:14:42.567
> 
> 标签：grails, selenium, grails-plugin

我一直在尝试为我正在从事的项目安装 grails selenium 插件。我在项目目录中但是，当我执行以下命令时

```
grails install-plugin selenium 
```

我收到以下错误，

```
Resolving plugin selenium. Please wait...

:: problems summary ::
:::: WARNINGS
    module not found: org.grails.plugins#selenium;latest.integration

==== grailsPlugins: tried

  -- artifact org.grails.plugins#selenium;latest.integration!selenium.zip:

  /home/jacob/selenium/grailsSelPlugin/selTestApp/lib/selenium-[revision].zip

  /home/jacob/.grails/1.3.8/projects/selTestApp/plugins/selenium-0.1/lib/selenium-[revision].zip

==== grailsHome: tried

  /usr/share/grails/1.3.8/lib/selenium-[revision].xml

  -- artifact org.grails.plugins#selenium;latest.integration!selenium.zip:

  /usr/share/grails/1.3.8/lib/selenium-[revision].zip

==== grailsHome: tried

  /usr/share/grails/1.3.8/dist/selenium-[revision].xml

  -- artifact org.grails.plugins#selenium;latest.integration!selenium.zip:

  /usr/share/grails/1.3.8/dist/selenium-[revision].zip

==== grailsHome: tried

  -- artifact org.grails.plugins#selenium;latest.integration!selenium.zip:

  /usr/share/grails/1.3.8/plugins/grails-selenium-[revision].zip

==== grailsCentral: tried

  -- artifact org.grails.plugins#selenium;latest.integration!selenium.zip:

  http://plugins.grails.org/grails-selenium/tags/LATEST_RELEASE/grails-selenium-[revision].zip

    ::::::::::::::::::::::::::::::::::::::::::::::

    ::          UNRESOLVED DEPENDENCIES         ::

    ::::::::::::::::::::::::::::::::::::::::::::::

    :: org.grails.plugins#selenium;latest.integration: not found

    ::::::::::::::::::::::::::::::::::::::::::::::

Error resolving plugin [name:selenium, group:org.grails.plugins,    
version:latest.integration].
Plugin not found for name [selenium] and version [not specified] 
```

有任何想法吗？我已经尝试过“grails clean”，但除此之外我没有太多想法，也无法在网上找到任何关于此的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:47:31.233

我再次发现自己在回答自己的问题，但这是对我有用的答案。

首先，我必须安装包含 grails selenium 插件的 zip 文件。我使用的是 grails-selenium-0.8.zip（可以通过 selenium 网站或谷歌搜索找到）。

接下来真正让我感动的是 GRAILS_HOME 环境变量设置不正确。我已经使用 grails 几个月了，安装和清理之类的东西一直在工作，我什至会收到消息

```
 Grails home is set to: /usr/share/grails/1.3.8 
```

但是，当我使用检查我的环境变量时

```
env | grep GRAILS_HOME 
```

我什么都没有。所以我进入 .bashrc 并将以下几行添加到该文件的最底部，

```
export GRAILS_HOME=/usr/share/grails/1.3.8
export PATH=$GRAILS_HOME:$PATH 
```

我重新启动终端并运行

```
grails install-plugin ../grails-selenium-0.8.zip 
```

终于找到了成功。

# grails - Grails 2.0 问题渲染 FancyBox

> ID：11724342
> 
> 赞同：1
> 
> 时间：2012-07-30T15:15:04.320
> 
> 标签：grails, fancybox, grails-2.0, fancybox-2

使用 Grails 2.0.4 和 FancyBox 2。

我正在尝试在 grails 框架的模式或对话框弹出窗口中呈现 html。目前我正在尝试使用 FancyBox 2 来执行此操作。但是我似乎无法渲染 fancybox。这是我目前拥有的。

控制器：

```
class TestController {

def index() { }

def createResult() {
    render 'got here dude'
} 
```

}

从 gsp 中发挥作用：

```
 <body>
    //attempts to use fancy box but fails 
    <a class="fb" href="${createLink(action: 'createResult', controller: 'test') }" >Click Here</a>
    //not fancy box, renders page only
    <a class="not" href="${createLink(action: 'createResult', controller: 'test') }" >Click Here2</a>
    <script type="text/javascript">
    $(document).ready(function() {
        $(".fb").fancybox();
    });
    </script>
</body> 
```

通过单击顶部链接，我最终收到以下错误：未捕获错误：语法错误，无法识别的表达式：/ModalTest/test/createResult

有没有人对如何让它与 grails 一起工作或有另一个可以通过使用控制器工作的对话框/模态解决方案有任何建议？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T22:43:06.310

添加类**fancybox.ajax**，这应该可以工作，因为您正在尝试加载 ajax 内容：

```
<a class="fb fancybox.ajax" href="${createLink(action: 'createResult', controller: 'test') }" >Click Here</a> 
```

# vba - 在 Excel 的 VBA 宏中创建错误的语法选项

> ID：11724347
> 
> 赞同：1
> 
> 时间：2012-07-30T15:15:30.747
> 
> 标签：vba, syntax, excel

在为 Excel 编写 VBA 宏时，我遇到了一些语法选项问题。在 VBA 中，您可以通过两种不同的方式调用对象上的方法：

```
foo.bar(arg1, arg2) 
```

或者

```
foo.bar arg1, arg2 
```

我绝对讨厌第二种语法，因为我发现它缺乏任何清晰度，所以我通常坚持第一种选择。但是，我遇到了一种情况，使用第一个选项会产生错误，而第二个选项执行得很好。（这可能表明我的代码中存在其他问题。）这是罪魁祸首代码：

```
Function GetFundList() As Collection
    Dim newFund As FundValues
    Range("A5").Select
    Set GetFundList = New Collection

    While Len(Selection.Value)
        Set newFund = New FundValues

        ' I set the fields of newFund and move Selection 
```

问题出在下一行：

```
 GetFundList.Add newFund
    Wend
End Function 
```

FundValues 是我创建的一个类，它本质上只是一个结构；它具有三个在循环期间设置的属性。

基本上，当我打电话时，`GetFundList.Add(newFund)`我收到以下错误：

运行时错误“438”：对象不支持此属性或方法

但是打电话`GetFundList.Add newFund`完全没问题。

有没有人足够了解 VBA 的复杂性来解释为什么会发生这种情况？

编辑：非常感谢您的解释！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:44:43.887

向集合中添加项不是定义为返回值的函数，而是定义为子例程：

```
Public Sub Add( _
   ByVal Item As Object, _
   Optional ByVal Key As String, _
   Optional ByVal { Before | After } As Object = Nothing _
) 
```

当通过名称调用另一个子例程并发送参数时（不添加“Call”语句），您不需要添加括号。*当您调用一个返回值给变量*
的函数时，您需要添加括号。

 *例子：

```
Sub Test_1()
Dim iCnt As Integer
Dim iCnt_B As Integer
Dim iResult As Integer

iCnt = 2
iCnt_B = 3

fTest_1 iCnt, iResult, iCnt_B

End Sub

Public Function fTest_1(iCnt, iResult, iCnt_B)

iResult = iCnt * 2 + iCnt_B * 2

End Function

Sub Test_2()

Dim iCnt As Integer
Dim iCnt_B As Integer
Dim iResult As Integer

iCnt = 2
iCnt_B = 3

iResult = fTest_2(iCnt, iCnt_B)

End Sub

Public Function fTest_2(iCnt, iCnt_B)

fTest_2 = iCnt * 2 + iCnt_B * 2

End Function 
```

如果不清楚，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:57:39.160

这个[Excel 对话的每日剂量](http://www.dailydoseofexcel.com/archives/2012/05/01/quick-vba-tip-parentheses/#comment-79292)将很有帮助。

当您使用括号时，您会强制 VBA 评估其中的内容并将结果添加到集合中。由于 NewFund 没有默认属性 - 我假设 - 评估不会产生任何结果，因此无法添加。如果没有括号，它将评估为类的实例，这就是您想要的。

另一个例子。这：

```
Dim coll As Collection
Set coll = New Collection
coll.Add Range("A1")
Debug.Print coll(1); TypeName(coll(1)) 
```

还有这个 ...

```
coll.Add (Range("A1"))
Debug.Print coll(1); TypeName(coll(1)) 
```

...两者都产生 debug.window 中 A1 中的任何内容，因为 Value 是 Range 的默认属性。但是，第一个将产生“范围”类型，而第二个示例中的类型是 A1 中的数据类型。换句话说，第一个向集合添加一个范围，第二个范围的内容。

另一方面，这有效：

```
Dim coll As Collection
Set coll = New Collection
coll.Add ActiveSheet
Debug.Print coll(1).Name 
```

...这不会：

```
coll.Add (ActiveSheet)
Debug.Print coll(1).Name 
```

因为 ActiveSheet 没有默认属性。你会得到一个运行时错误 438，就像你的问题一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T01:23:47.823

这是看待同一件事的另一种方式。

假设单元格 A1 包含字符串 Hi!

```
Function SomeFunc(item1, item2)
    SomeFunc = 4
End Function

Sub Mac()
    ' here in both of the following two lines of code,
    '  item1 will be Variant/Object/Range, while item2 will be Variant/String:
    SomeFunc Range("A1"), (Range("A1"))
    Let i = SomeFunc(Range("A1"), (Range("A1")))

    'this following is a compile syntax error
    SomeFunc(Range("A1"), (Range("A1"))) 

    ' while here in both the following two lines of code, 
    '  item1 will be Variant/String while item2 will be Variant/Object/Range:
    SomeFunc ((Range("A1")), Range("A1")
    Let j = SomeFunc((Range("A1")), Range("A1"))

    'this following is a compile syntax error
    SomeFunc((Range("A1")), Range("A1"))

    Set r = Range("A1")       ' sets r to Variant/Object/Range
    Set r = (Range("A1"))     ' runtime error 13, type mismatch; cannot SET r (as reference) to string "Hi!" -- Strings are not objects in VBA
    Set r = Range("A1").Value ' runtime error (same)

    Let r = Range("A1")       ' set r to "Hi!" e.g. contents of A1 aka Range("A1").Value; conversion to value during let = assignment
    Let r = (Range("A1"))     ' set r to "Hi!" e.g. contents of A1 aka Range("A1").Value; conversion to value by extra ()'s
    Let r = Range("A1").Value ' set r to "Hi!" by explicit use of .Value 
End Sub 
```

我只是添加这个来帮助说明这里发生了两件事，这可能是混为一谈的。

第一个是表达式中的 () 将项目转换为其 Value 属性，如上面其他答案中所述。

第二个是为了捕获或使用返回值而调用的函数需要额外的 () 围绕整个参数列表，而在没有意图捕获或使用返回值的情况下调用的函数（或子）（例如 as 语句）必须在没有调用的情况下调用那些围绕参数列表的相同 ()。这些周围的 () 不使用 .Value 转换参数列表。当参数列表只有一个参数时，这种区别可能特别令人困惑。*

# c# - 加密 XmlTextWriter 并将其序列化为文件的正确方法是什么？

> ID：11724348
> 
> 赞同：0
> 
> 时间：2012-07-30T15:15:31.823
> 
> 标签：c#, .net, xml, encryption, .net-4.0

我有一个 XmlTextWriter，它使用如下所示的 XmlSerializer 写入文件：

```
using (XmlTextWriter writer = new XmlTextWriter(path, null))
{
   writer.Formatting = Formatting.Indented;
   writer.Indentation = 3;
   MyFileObj.ourSerializer.Serialize(writer, xmlFile, ourXmlNamespaces);
} 
```

其中“ourSerializer”只是对 System.Xml.Serialization.XmlSerializer 对象的引用。但是，我有一个实例，必须将此 XML 加密到磁盘，以便最终用户无法读取其内容，并且我不确定使用现有代码的正确方法，因为有很多地方调用此代码并且不需要加密。任何人都可以对我有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-09T16:29:34.527

另一种方法是使用 CryptoStream，如下所示：

```
using (var fs = new FileStream(path, System.IO.FileMode.Create))
{
    using (var cs = new CryptoStream(fs, _Provider.CreateEncryptor(), CryptoStreamMode.Write))
    {
        using (var writer = XmlWriter.Create(cs))
        {

            writer.Formatting = Formatting.Indented;
            writer.Indentation = 3;
            MyFileObj.ourSerializer.Serialize(writer, xmlFile, ourXmlNamespaces);
        }
    }
} 
```

其中 _Provider 是正确初始化的 AesCryptoServiceProvider。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T15:08:09.187

这是我最终解决问题的方法：

```
MemoryStream ms = new MemoryStream();
XmlSerializer ourSerializer.Serialize(ms, xmlFile, ourXmlNamespaces);
ms.Position = 0;
//Encrypt the memorystream
using (TextReader reader = new StreamReader(ms, Encoding.ASCII))
using (StreamWriter writer = new StreamWriter(path))
{
   string towrite = Encrypt(reader.ReadToEnd());
   writer.Write(towrite);
} 
```

基本上将 XML 序列化为 MemoryStream，将文本读回 TextReader，加密 TextReader 内容，然后将生成的加密字符串保存到文件中。

# javascript - Ember.js Ember.View didRender 事件

> ID：11724350
> 
> 赞同：1
> 
> 时间：2012-07-30T15:15:43.830
> 
> 标签：javascript, jquery, coffeescript, ember.js

我构建了一个 ember.js 应用程序，该应用程序也与其他一些 jQuery 插件相关联。我有一些表单字段，一旦视图被渲染，我需要调用一个 jQuery 插件。我试过挂钩`didInsertElement`，但显然绑定表单字段的值不是在插入时分配的。当视图完全呈现或绑定初始化时是否存在回调？

IE。

```
MyView: Ember.View.extend
    #Boaring normal stuff here

    didInsertElement: ->
        $('.some-class').doSomething() 
```

和

```
{{view Ember.TextField valueBinding="someField" class="some-class"}} 
```

不起作用，因为 的值`.some-class`尚未设置。

我不想使用 a`setTimeout`并创建一个竞争条件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T20:06:22.180

好吧，发生了什么，是在插入视图后更新了 testValue 绑定。所以你可以做的是在函数`$('.silly-field').doSomethingSilly();`内部`Ember.run.next()`调用。

正如文档中所写：

```
Ember.run(myContext, function(){
 // code to be executed in the next RunLoop, which will be scheduled after the current one
}); 
```

# r - 如何调整 plotmatrix 中的图形设置？

> ID：11724351
> 
> 赞同：3
> 
> 时间：2012-07-30T15:15:45.110
> 
> 标签：r, ggplot2

我可以调整绘图矩阵中的点大小、alpha、字体和轴刻度吗？

这是一个例子：

```
library(ggplot2)
plotmatrix(iris) 
```

![在此处输入图像描述](../Images/c23ce493c7a38079b8ef872632abbc3c.png)

我怎样才能：

*   使点大两倍
*   设置 alpha = 0.5
*   每个轴上不超过 5 个刻度
*   将字体设置为 1/2 大小？

我已经摆弄了 的`mapping = aes()`论点`plotmatrix`以及`opts()`添加了诸如 之类的层`+ geom_point(alpha = 0.5, size = 14)`，但这些似乎都没有做任何事情。我通过写入一个大的 pdf ( `pdf(file = "foo.pdf", height = 10, width = 10)`) 对大小进行了一些修复，但这只能提供有限的控制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T02:37:56.793

几乎所有**ggplot2**散点图矩阵选项仍然是相当新的，可能有点实验性。

但是**GGally** *中*的设施允许您手动构建这种情节，但是：

```
custom_iris <- ggpairs(iris,upper = "blank",lower = "blank",
                       title = "Custom Example")

p1 <- ggplot(iris,aes(x = Sepal.Length,y = Sepal.Width)) + 
          geom_point(size = 1,alpha = 0.3)
p2 <- ggplot(iris,aes(x = Sepal.Width,y = Sepal.Length)) + 
          geom_point()

custom_iris <- putPlot(custom_iris,p1,2,1)
custom_iris <- putPlot(custom_iris,p2,3,2)

custom_iris 
```

![在此处输入图像描述](../Images/c9ef06b3f6a7cffda2784e706ed74f67.png)

我只是通过直接按照`?ggpairs`.

# mysql - 用于 4 表连接的 MySQL 表索引

> ID：11724358
> 
> 赞同：0
> 
> 时间：2012-07-30T15:16:14.267
> 
> 标签：mysql, optimization, indexing

我有四张桌子：

```
activity (activity_id (PRIMARY), item_id, geolat, geolng, user_id, created_at)
users (user_id (PRIMARY), user_name, first_name, last_name, user_banned)
items (item_id (PRIMARY), item_name)
ratings (item_id (PRIMARY), avg_rating_score) 
```

我想运行以下查询：

```
SELECT item_name, count(distinct activity.user_id) as distinct_user_count, ratings.avg_rating_score
FROM activity
INNER JOIN users on activity.user_id = users.user_id
INNER JOIN items on activity.item_id = items.item_id
INNER JOIN ratings on activity.item_id = ratings.item_id
WHERE activity.user_id != 1
AND (activity.geolat BETWEEN 'XXXXX' and 'XXXX' and activity.geolng BETWEEN 'XXXX' and 'XXXX') 
AND (users.user_banned = 0)
GROUP by activity.item_id
HAVING distinct_user_count >= 5
ORDER by avg_rating_score DESC
LIMIT 0,5 
```

我正在为这个连接寻找正确的索引。现在我有：

```
ALTER TABLE activity ADD INDEX (user_id)
ALTER TABLE activity ADD INDEX (item_id)
ALTER TABLE activity ADD INDEX (geolat)
ALTER TABLE activity ADD INDEX (geolng)
ALTER TABLE users ADD INDEX (user_banned) 
```

查询的目标是获取用户 1 从未添加的项目列表（在 lat/lng 半径内），这些项目在用户 1 的本地区域中至少出现 5 次，按该项目的评分降序排列，最后不包括任何被禁止的用户。

这是最好的方法吗？有没有更好的方法来处理这个查询？上面列出的索引运行速度非常慢。

# c# - 如何在 WPF 应用程序中使用 windows 键

> ID：11724359
> 
> 赞同：2
> 
> 时间：2012-07-30T15:16:16.090
> 
> 标签：c#, wpf, sendkeys

根据这个[问题](https://stackoverflow.com/questions/325636/how-to-use-windows-key-in-my-application)，我尝试在我的 WPF 应用程序中使用 windows 键。但是，它没有用！这是我的代码

```
case "My Computer":
DeviceSpeak.Speak("Opening My Computer");
SendKeys.SendWait("{Key.LWin}E");
break; 
```

我的问题是如何在 C# 中使用 windows 键。我想打开我的电脑（WindwosKey+E）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:48:22.273

我认为没有一种方法可以`WIN`使用`SendKeys`. 无论如何，您可以使用它们的 CLSID 打开特殊位置：

```
// open "My Computer"
System.Diagnostics.Process.Start("::{20d04fe0-3aea-1069-a2d8-08002b30309d}"); 
```

更多 CLSID（有些可能不起作用）：

```
Administrative Tools: {D20EA4E1-3957-11d2-A40B-0C5020524153}
All Tasks:            {ED7BA470-8E54-465E-825C-99712043E01C}
Control Panel:        {21EC2020-3AEA-1069-A2DD-08002b30309d}
Connections:          {241D7C96-F8BF-4F85-B01F-E2B043341A4B}
Fonts:                {D20EA4E1-3957-11d2-A40B-0C5020524152}
Computer:             {20D04FE0-3AEA-1069-A2D8-08002B30309D}
Documents:            {450D8FBA-AD25-11D0-98A8-0800361B1103}
History:              {ff393560-c2a7-11cf-bff4-444553540000}
Network Places:       {208d2c60-3aea-1069-a2d7-08002b30309d}
Printers and Faxes:   {2227A280-3AEA-1069-A2DE-08002B30309D}
Programs Folder:      {7be9d83c-a729-4d97-b5a7-1b7313c39e0a}
Recycle Bin:          {645FF040-5081-101B-9F08-00AA002F954E}
Start Menu:           {48e7caab-b918-4e58-a94d-505519c795dc}
Scheduled Tasks:      {D6277990-4C6A-11CF-8D87-00AA0060F5BF} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:25:41.780

[您可以在此处](http://www.autohotkey.com/docs/misc/CLSID-List.htm)找到有关 CLSID的更多信息，希望快速的 Google 搜索对您有很大帮助。

# .net - 通过将另一个类中的对象传递给类构造函数来修改它们

> ID：11724361
> 
> 赞同：0
> 
> 时间：2012-07-30T15:16:19.823
> 
> 标签：.net, pointers, reference, constructor, c++-cli

我想将对象传递给另一个类以对其进行修改，并且我希望对它所做的更改传播到从中获取它的类实例中的该对象。这应该与此代码一起使用：

```
public class sth{
private:
Object^ thisObject;
public: sth(Object^ ob)
{
    this->thisObject=ob;
}
void someFunct()
{
   this->thisObject=gcnew Object();
}
}; 
```

但它不起作用。另一方面，这段代码：

```
public: sth(Object^& ob)
{
    ob=gcnew Object();
} 
```

工作正常，但如果我希望这个句柄被类构造函数不调用的某个方法使用，我必须创建一个我认为的全局句柄（因为 c++/cli 句柄是一个指向引用的指针）以这种方式是可能的：

```
public class sth{
private:
Object^ thisObject;
public: sth(Object^% ob)
{
    this->thisObject=ob;//this doesn't works
    /*ob = this->thisObject;*///this neither
}
void someFunct()
{
   this->thisObject=gcnew Object();
}
}; 
```

我读过[这个](https://stackoverflow.com/questions/3380315/tracking-reference-in-c-cli)

我想我理解指针和引用在 c++/cli 中的工作方式，对吗？

如何在不在父类中创建全局变量并将其实例传递给构造函数的情况下完成此操作？

父类的代码：

```
void method()
{
    array<Object^>^ thisArr=nullptr;
    verifyDial^ thisDial = gcnew verifyDial(thisArr);
    thisDial->ShowDialog();
    if(thisArr !=nullptr)
       //do sth
    else
        return;
} 
```

这是verfiyDial类：

```
public ref class verifyDial{

public: array<Object^>^ thisArr;
public: verifyDial(array<Object^>^ arr)
{
      this->thisArr=arr;
}

///////////////////////
void someMethod()////event handler
{
if(/*everything went right*/)
{
this->thisArr=gcnew array<Object^>(2);
this->thisArr[0] = true;
this->thisArr[1] = true;
}
this->Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:40:37.710

我不太了解您要做什么，但通常您需要了解实际传递给方法的内容（通过引用或值）。当您定义（和调用）具有简单类型参数的方法时，它通常按值传递（除非您专门定义获取变量地址/引用的方法）。对于复杂的对象/类，对象的地址/引用是按值传递的，但是因为它是引用/地址的值，除非您想销毁（或完全重新创建）实际对象，否则它并不重要。您仍然可以使用对对象的引用值重置所有对象的成员/属性。

只是为了澄清您的意图：您是否正在尝试创建实用程序类来保存各种其他类的“默认”值？

为了我

```
 Class1 c1 = new Class1(); 
```

比

```
 Class1 c1 = ...;
  someUtilityClass.resetClassReference(c1); 
```

# extjs - EXTJS4.1 : TreePanel 和单元格编辑（单元格编辑插件的意外行为）

> ID：11724362
> 
> 赞同：1
> 
> 时间：2012-07-30T15:16:33.243
> 
> 标签：extjs, extjs4, extjs4.1

我有一个包含两列“树”和“描述”的树面板。

我从 TreeStore 渲染树和描述列，使用 CellEditing 插件使描述列可编辑。

当我编辑描述列下的任何单元格时，其对应的树节点的名称更改为第一个树节点的名称。

这是我的代码，

```
var store = Ext.create('Ext.data.TreeStore',{
        autoLoad : false,
        autoSync : true,

        proxy : {
            type : 'ajax',
            url : 'data/tree.json',

        },

        fields: [
            {name: 'optionName',     type: 'string'}, {name: 'description', type: 'string'}
        ] 

    }
);

Ext.override(Ext.data.AbstractStore,{
    indexOf: Ext.emptyFn
}); 

Ext.define('AEV.view.TreePanel', {
    extend: 'Ext.tree.Panel',

    title: 'Simple Tree',

    width: 700,
    height: 400,

    store: store,
    rootVisible: false,
    disableSelection:true,

    viewConfig : {
        emptyText : '<center><span class="empty-table">No data!</span></center>',
        singleSelect : true,
        stripeRows : true
    },

    selType: 'cellmodel',
    plugins: [
            Ext.create('Ext.grid.plugin.CellEditing', {
            clicksToEdit:1
            })
    ],

    columns:[
        {
            xtype: 'treecolumn',
            text: 'Tree',
            dataIndex: 'optionName',
            flex: 1,
            sortable: false
        },
        {
            text: 'Description',
            dataIndex: 'description',
            flex: 2,
            sortable: false,
            editor: {
                xtype: 'textfield',
                allowBlank: true
            }
        }   
    ],

    renderTo: Ext.getBody()

}); 
```

我的 tree.json 是

```
{
    "children": [
        {
            "optionName": "ABC",
            "expanded": true,
            checked: true,
            "children": [
                {
                    "optionName": "DEF",
                    checked: true,
                    "leaf": true, 
            "description" : ""
                },
                {
                    "optionName": "GHI",
                    checked: true,
                    "leaf": true, 
            "description" : ""
                }
            ], "description" : ""
        },
        {
            "optionName": "JKL",
            "expanded": true,
        checked: true,
            "children": [
                {
                    "optionName": "MNO",
                    checked: true,
                    "leaf": true, 
            "description" : ""
                }
            ], 
        "description" : ""
        },
        {
            "optionName": "PQR",
            checked: true,
            "expanded": true,
            "children": [
                {
                    "optionName": "STU",
                    checked: true,
                    "expanded": true,
                    "children": [
                        {
                            "optionName": "VW",
                            checked: true,
                            "leaf": true, 
                "description" : ""
                        },
                        {
                            "optionName": "XYZ",
                            checked: true,
                            "leaf": true, 
                "description" : ""
                        }
                    ], 
            "description" : ""
                }
            ], 
        "description" : ""
        }
    ]
} 
```

[我还覆盖了 AbstractStore 的 indexOf 配置，我在http://www.sencha.com/forum/showthread.php?131602-4.0.0-Cellediting-on-TreeGrid](http://www.sencha.com/forum/showthread.php?131602-4.0.0-Cellediting-on-TreeGrid)中将其视为错误

我不希望树节点名称更改，因为我编辑任何其他列数据。帮助将不胜感激。提前致谢。

# vb.net - 比较字符串总是失败（从 Byte() 转换的字符串）

> ID：11724363
> 
> 赞同：0
> 
> 时间：2012-07-30T15:16:36.550
> 
> 标签：vb.net

我的应用程序通过 TCP 接收命令，如果我尝试比较命令，比较总是失败。

消息被转换为 byte() 并返回，但在下面的示例中应该比较好吗？还是我错过了什么？

```
Imports MyApp.Client

Public Class Form1
    Public Delegate Sub MessageReceivedHandler(ByVal message As String)

    Private Sub Message_Received(ByVal message As String)
        'update the display using invoke
        Invoke(New MessageReceivedHandler(AddressOf PrintToScreen), New Object() {message})
    End Sub

    Private Sub PrintToScreen(ByVal msg As String)
        Select Case msg
            Case "#all"
                'Do Something
            Case Else
                'Do Something Else
        End Select
    End Sub
End Class

'Client class
Public Class Client
    Private _tcpClient As TcpClient
    Public Event MessageReceived As MessageReceivedHandler

    Public Sub Connect(ByVal address As IPAddress, ByVal port As Integer)
        _tcpClient = New TcpClient()
        Dim serverEndPoint As New IPEndPoint(address, port)
        _tcpClient.Connect(serverEndPoint)
        ThreadPool.QueueUserWorkItem(New WaitCallback(AddressOf Read))
    End Sub

    Public Sub Send(ByVal buffer As Byte())
        _tcpClient.GetStream().Write(buffer, 0, buffer.Length)
        _tcpClient.GetStream().Flush()
    End Sub

    Private Sub Read()
        Dim encoder As New ASCIIEncoding()
        Dim buffer As Byte() = New Byte(4095) {}
        Dim bytesRead As Integer
        While True
            Try
                bytesRead = _tcpClient.GetStream().Read(buffer, 0, 4096)
                RaiseEvent MessageReceived(encoder.GetString(buffer, 0, bytesRead).ToString)
            Catch ex As IO.IOException
                Application.Exit()
            End Try
        End While
    End Sub

    Public Sub Dispose()
        _tcpClient.Close()
    End Sub
End Class 
```

该变量是一个包含与案例相同的文本的字符串，但比较失败：

![消息变量](../Images/2aec4ba9e6a36f1dee25835f7baf3de7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:12:05.390

发现问题，发送应用程序在转换为 byte() 并发送之前将 vbNullChar 添加到字符串的末尾。（看不到从接收端转换的字符串中删除它的方法）

# postgresql - Scala + Play -> 类型不匹配；找到： anorm.RowParser 必需： anorm.ResultSetParser[Option[models.User]]

> ID：11724368
> 
> 赞同：1
> 
> 时间：2012-07-30T15:16:50.777
> 
> 标签：postgresql, scala, playframework

解决方案：我不知道我们如何返回 Option[User] 的不存在，所以在未找到用户的情况下，我创建了一个虚拟用户对象并从控制器对其进行推理（感觉很糟糕但工作......） : 来自 Application.scala

```
val loginForm = Form(
tuple(
  "email" -> text,
  "password" -> text
) verifying ("Invalid email or password", result => result match {
  case (email, password)  => (User.authenticate(email, password).map{_.id}.getOrElse(0) != 0)
}) 
```

)

反对：

```
val loginForm = Form(
  tuple(
  "email" -> text,
  "password" -> text
) verifying ("Invalid email or password", result => result match {
  case (email, password) => User.authenticate(email, password).isDefined
}) 
```

)

++++++++++++++++++ 原版 2 ++++++++++++++++++++ 感谢您的建议！我做了一些改变，似乎越来越近了，但是我不知道如何返回一个未定义的选项 [用户]。我也试过 case _ => null，见下文：

来自 User.scala

```
case class User(id: Int, email: String, name: String, password: String)

object User {

  // -- Parsers

  /**
   * Parse a User from a ResultSet
   */
  val userParser = {
            get[Option[Int]]("uid")~        
            get[Option[String]]("email")~
            get[Option[String]]("fname")~
            get[Option[String]]("pbkval") map {
            case (uid~email~name~pbkval) => validate(uid,email, name, pbkval)
            }
  }

  /**
   * Retrieve a User from email.
   */
  def findByEmail(email: String): Option[User] = {
    DB.withConnection { implicit connection =>
      SQL("select * from get_pbkval({email})").on(
                'email -> email         
            ).as(userParser.singleOpt)
    }
  }

  /**
   * Authenticated user session start.
   */
  def authenticate(email: String, password: String): Option[User] = {
    DB.withConnection { implicit connection =>
      SQL(
            """
                        select * from get_pbkval({email})
            """
            ).on(
                'email -> email
            ).as(userParser.singleOpt)

        }
    }

  /**
   * Validate entry and create user object.
   */
    def validate(uid: Option[Int], email: Option[String], fname: Option[String], pbkval: Option[String]): User = {
                val uidInt : Int = uid.getOrElse(0)
                val emailString: String = email.getOrElse(null)
                val fnameString: String = fname.getOrElse(null)
                val pbkvalString: String = pbkval.getOrElse(null)
                User(uidInt, emailString, fnameString, pbkvalString)
    } 
```

我想很明显，我在这里并没有真正得到一些基本的东西。我已经阅读了[http://www.playframework.org/modules/scala-0.9.1/anorm](http://www.playframework.org/modules/scala-0.9.1/anorm)并搜索了几个小时。任何帮助都是非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:42:10.437

您没有指定要映射的行。在行映射器之后，放一个 * 来表示要映射的行。当您使用它时，我发现在单独的 val 中定义我的行映射器更容易。像这样的东西。

```
 val user = { 
   get[Option[Int]]("uid")~        
   get[Option[String]]("email")~
   get[Option[String]]("fname")~
   get[Option[String]]("pbkval") map {
    case uid~email~name~password => validate(uid,email, name, password)
  }
}

def authenticate(email: String, password: String): Option[User] = {
DB.withConnection { implicit connection =>
  SQL(
    """
        select * from get_pbkval({email})
    """
    ).on(
        'email -> email
    ).as(user *)
  }
 } 

    def validate(uid: Option[Int], email: Option[String], fname: Option[String], pbkval: Option[String]): Option[User] = {
    if (uid != None) {
            val uidInt : Int = uid.getOrElse(0)
            val emailString: String = email.getOrElse(null)
            val fnameString: String = fname.getOrElse(null)
            val pbkvalString: String = pbkval.getOrElse(null)
            User(uidInt, emailString, fnameString, pbkvalString)
    } else { return null}
} 
```

请注意，“as”方法现在有两个参数，您的行映射器（现在定义为 val“用户”和一个“*”，表示您要映射所有行。

# iphone - UIPickerView - 很多组件时右边的黑条

> ID：11724370
> 
> 赞同：3
> 
> 时间：2012-07-30T15:16:54.507
> 
> 标签：iphone, objective-c, formatting, uipickerview

我必须创建一个包含 14-16 个组件的 UIPickerView。一切都初始化并运行良好，但是，我在右侧得到一个奇怪的黑条（见图），这浪费了已经很紧的空间。

有没有办法摆脱它？还有没有办法摆脱组件之间的所有黑色间距和组件内部的灰线？

谢谢你。

![在此处输入图像描述](../Images/385d118dc3725de2cd73bc1469e5cbb1.png)

```
(UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:     
(NSInteger)component reusingView:(UIView *)view
{
    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 30, 30)];
    [label setText:[numArray objectAtIndex:row]];
    [label setTextAlignment:UITextAlignmentCenter];
    [label setFont:[UIFont boldSystemFontOfSize:14]];
    [label setBackgroundColor:[UIColor clearColor]];
    return label;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:37:45.973

您的选择器视图的宽度是多少？你是怎么设置宽度的？宽度是固定的还是你使用了类似的东西（考虑横向模式） `CGRectGetHeight([UIScreen mainScreen].applicationFrame) // use this as width in landscape mode`

然后你会将该宽度除以选择器视图的数量（14-16）。使用这种宽度的选择器视图，您不应该有那个黑条。

如果您确实做了我刚刚写过的事情，并且我猜您做到了，那么如果您以编程方式创建了所有这些（正如您所拥有的），那可能是状态栏空间。在故事板之外创建 ui 组件时，某些组件将自身定位在 0.0f，20.0f 用于状态栏。其中一些是 UINavigationController。

# windows-server-2003 - 黑客攻击 - Windows server 2003

> ID：11724372
> 
> 赞同：1
> 
> 时间：2012-07-30T15:17:03.330
> 
> 标签：windows-server-2003, event-viewer, windows-security

我在我的办公室 PC 上看到了一些黑客攻击尝试。上周五我的电脑突然重启了两次，当我登录时，我的一些重要文件不在那里。刚删了。因此，我检查了事件查看器以查找有关此重新启动的原因。我得到了这些日志，并且在这些日志上看到了某人的 PC 名称。有人可以向我解释一下吗？

谢谢！

* * *

```
Date:7/27/2012   Source:Security
Time:2.35.26 PM Category:Account Logon
Type:Success A  Event ID:680
User:MyPC/Administrator
Computer: MyPC
Description:
  Logon attempt by: MICROSOFT_AUTHENTICATION_PACKAGE_V1_0
  Logon Account:Administrator
  Source Workstation:OtherPC
  Error Code:0x0 
```

* * *

```
Date:7/27/2012   Source:Security
Time:2.35.26 PM Category:Logon/Logoff
Type:Success A  Event ID:576
User:MyPC/Administrator
Computer: MyPC
Description:
   Special privileges assigned to new logon:
   User Name:Administrator
   DOMAIN: MyPC
   Logon ID: (0x0, 0x251E985)
   Privileges:SeSecurityPrivilege
   SeBackupPrivilege
   ... 
```

* * *

```
Date:7/27/2012   Source:Security
Time:2.35.26 PM Category:Logon/Logoff
Type:Success A  Event ID:540
User:MyPC/Administrator
Computer: MyPC
Description:
   Successful Network Logon:
   User Name:Administrator
   DOMAIN: MyPC
   Logon ID: (0x0, 0x251E985)
   Logon Type:3
   Logon Process:NtLmSsp
   Authentication Package:NTLM
   Workstation Name:OtherPC
   Logon GUID:-
   Caller User Name:-
   Caller Domain:-
   Caller Logon ID:-
   Caller Process ID:-
   Transited services:-
   Source Network Address:192.168.x.x
   Source Port:0 
```

* * *

```
Date:7/27/2012   Source:Security
Time:2.35.26 PM Category:Logon/Logoff
Type:Success A  Event ID:551
User:MyPC/Administrator
Computer: MyPC
Description:
   User initiated logoff:
   User Name:Administrator
   DOMAIN: MyPC
   Logon ID: (0x0, 0x2059c) 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:51:04.190

除了将计算机名称更改为“MyPC”和“OtherPC”之外，您是否以任何方式编辑过这些日志？例如，在事件查看器中，源应该是“安全”，而不是“安全”。这让我质疑这些日志的有效性。

在任何情况下，事件 ID 540 都是与您的计算机建立的远程连接，在这种情况下，是从 OtherPC。给定 OtherPC 的 IP 地址，它似乎在您的网络中。您可以访问 OtherPC 吗？您能否也给我们来自 OtherPC 的事件查看器日志？

总而言之，这里没有什么太乱的地方。第一个和最后一个日志是标准登录和注销日志。第二个相当普遍地遵循登录日志。如果没有更多信息，我们无法了解更多关于第三个的信息。

# c# - 页面忙于asp.net时怎么办？

> ID：11724383
> 
> 赞同：1
> 
> 时间：2012-07-30T15:17:41.587
> 
> 标签：c#, asp.net, event-listener, busy-waiting

我有一个 asp.net Web 应用程序，当您单击一个按钮时，它会执行我所有的东西，但它很慢，需要 10 到 15 秒才能工作，而且我不希望用户在网站繁忙时点击该按钮的垃圾邮件。所以我的计划是禁用按钮并让它下面的标签变得忙碌并说“正在运行”，完成后按钮会重新激活并且标签会说“完成”但是这个按计划工作的是我的代码按钮监听器。

```
 protected void SubmitButton_Click(object sender, EventArgs e)
    {
        SubmitButton.Enabled = false;
        RunStatus.Text = "Running";
        RunStatus.Visible = true;
        ErrorField.Visible = false;

//i deleted all my code that actually does the stuff that takes time from here

        RunStatus.Text = "Done";
        SubmitButton.Enabled = true;
    } 
```

问题是所有的视觉效果都是在方法运行之后发生的，所以当它运行时没有任何改变，但是在它完成了文本字段显示之后。我也很高兴有一个忙碌的光标，但这是次要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:22:06.543

将您的按钮包装在 an 中`UpdatePanel`并使用`UpdateProgress`控件向客户端显示 AJAX 调用正在发生。有关更多信息，请参阅[本教程](http://msdn.microsoft.com/en-us/library/bb386421.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:22:43.470

很抱歉，您对 ASP.NET 页面生命周期的了解存在根本性的差距。它与 Windows 窗体确实非常不同——这就是您发布的代码适用的类型。

我恭敬地建议你拿一本关于 ASP.NET 的好书，并尝试建立一个关于 ASP.NET 在 HTTP/HTML 上的抽象的基本理解。

# wpf - 选项卡后面的 WPF 和 Awesomium 控件未调整大小

> ID：11724386
> 
> 赞同：3
> 
> 时间：2012-07-30T15:17:53.507
> 
> 标签：wpf, awesomium

我在 WPF 应用程序中有一个 TabControl。在其中一个选项卡中，我有一个 WebControl 类（来自 Awesomium.Net）。

当我在此选项卡处于活动状态时调整窗口大小时，浏览器会调整大小。

当我在另一个选项卡处于活动状态时调整窗口大小时，浏览器不会调整大小。当我回到带有浏览器控件的选项卡时，控件仍然是旧大小。

我该如何解决这个问题？

我试图破解 TabControl.SelectionChanged 事件，但没有成功：

我的xml：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:MyApp"
    xmlns:Custom="http://schemas.awesomium.com/winfx"      
    x:Class="MyApp.MainWindow"
    Title="MainWindow"
    Height="350"
    Width="525"       >
    <Grid>    
        <TabControl
            SelectionChanged="Tabs_SelectionChanged">
            <TabItem
                Header="MyTab" Name="MyTab" >
                <Grid>
                    <Custom:WebControl x:Name="browser" />
                </Grid>
            </TabItem>
            <TabItem Header="Another tab">
                <Grid>                       
                </Grid>
            </TabItem> 
        </TabControl>
      </Grid>
</Window> 
```

和我背后的代码：

```
private void Tabs_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    var tabs = e.Source as TabControl;
    if (tabs != null && tabs.SelectedItem == myTab)
    {
        var parent = browser.Parent as FrameworkElement;
        parent.UpdateLayout();

        // also tried
        parent.InvalidateArrange();
        // also tried
        browser.InvalidateArrange();
        // also tried
        parent.Width -= 1;
        parent.InvalidateArrange();
        parent.Width += 1;

    }
} 
```

**[编辑]**当我使用 WPFInspector 附加应用程序时，我可以看到 WebControl 本身实际上已调整大小。似乎是内部控制（哪一个）没有正确调整大小。

**[编辑 2]**另一个不成功的测试：

```
 private static readonly System.Reflection.PropertyInfo g_WebControlIsDirtyProperty = typeof(WebControl).GetProperty("IsDirty");
    private void Tabs_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var tabs = e.Source as TabControl;
        if (tabs != null && tabs.SelectedItem == myTab)
        {
            g_WebControlIsDirtyProperty.SetValue(
                browser,
                true
                );
        }
    } 
```

**[编辑 3]**我玩过[AvalonDock 2.0](http://avalondock.codeplex.com/)。行为是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:02:56.980

我想我遇到了同样的问题，当我最初加载 WebControl 时，我无法显示网站的实际内容，直到我手动调整 WebControl 的大小。尽管受到您的无效调用的启发，但我确实设法找到了解决方法。我在初始加载后调用了 browser.Invalidate **Measure ()。**对于您的情况，我怀疑您需要将其放在 TabControl 的选择更改中。

# java - Fitnesse 扩展 TestResponder 并覆盖类路径位置

> ID：11724390
> 
> 赞同：1
> 
> 时间：2012-07-30T15:17:58.530
> 
> 标签：java, testing, fitnesse

我最近开始使用fitnesse，遇到了必须在测试中对我的jar 路径进行硬编码的问题。

我遇到了一些旧教程，它们解释了扩展测试响应器可以设置类路径，例如这个版本：

```
/** For FitNesse 20081115
protected String buildClassPath() throws Exception {
    return super.buildClassPath() + PATH_SEPARATOR + getInheritedClassPath();
}

protected String getInheritedClassPath() {
    String inheritedClasspath = "";
    String parentClassPath = System.getProperty("java.class.path");
    String[] classPathElements = parentClassPath.split(PATH_SEPARATOR);
    for (String element : classPathElements) {
        inheritedClasspath += PATH_SEPARATOR + "\"" + element + "\"";
    }
    return inheritedClasspath;
} 
```

但是，我使用的是最新版本，并且 buildClassPath() 方法不可用，任何人有什么想法可以解决这个问题吗？

# security - 恼人的密码系统困境。（本地化系统）

> ID：11724392
> 
> 赞同：1
> 
> 时间：2012-07-30T15:18:03.220
> 
> 标签：security, passwords, system, reset

所以我设置了这个小配置工具，用户必须输入密码才能编辑在计算机上加密的文件。它相当安全，尽管任何真正想要访问的人都可以这样做。现在，老板说要添加一个密码更改机制（毫无疑问，将密码设置为 1234 之类的东西，他可以将其传播给任何人）。很简单，对吧？

问题是，当没有人知道密码或密码文件被删除时会发生什么？（是的，我正在存储哈希）我只是让他们制作一个新密码吗？如果是这样，是什么阻止未经授权的用户仅删除密码文件并轻松获得对程序的访问权限？将其重置为默认通行证几乎没有任何好处。但是，让人们留下一个因为忘记密码而完全无法使用的系统的想法有点令人不安。而且由于都是客户端，我无法支持授权重置。我是这里的业余爱好者，不知道该怎么做，不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:06:30.977

无法区分攻击者和忘记密码/PIN 的人。安全问题的使用值得商榷，但如果无法获取当前密码，无论如何也没什么帮助。有些允许密码提醒（提示）。

如果用户丢失了密码/PIN，拒绝访问本地加密数据是正常的。

如果您忘记了解锁 iPad 的 PIN，您可以重置您的 iPad，但您将丢失任何未保存在其他地方的本地数据。

微软做同样的事情。如果您更改帐户密码而不输入以前的密码，您将无法访问任何加密文件。

让他们重置密码，但他们将无法访问任何加密文件。

# android - 在 AchartEngine 中禁用平移后的性能问题

> ID：11724393
> 
> 赞同：2
> 
> 时间：2012-07-30T15:18:05.450
> 
> 标签：android, android-layout, android-view, achartengine

我有一个简单的不可滚动的 xy 折线图。我在图表顶部显示了一个计时器，它每毫秒更新一次。

我使用以下功能禁用了图形滚动和单击事件：

```
renderer.setClickEnabled(false);
renderer.setPanEnabled(false, false); 
```

一切正常，但看起来图形仍在消耗触摸事件。当用户触摸或尝试滚动图形时，顶部运行的计时器闪烁。这给人的印象是应用程序有点挂起。当我们触摸图表时，计时器失去了平滑度。在未触及的位置，它运行非常平稳。这是我的渲染器设置。

```
renderer.setXLabels(0);
renderer.setYLabels(0);
renderer.setRange(new double[]{5,10,15,20,25,30});
renderer.setShowGrid(false);
renderer.setXLabelsAlign(Align.RIGHT);
renderer.setYLabelsAlign(Align.RIGHT);
renderer.setZoomButtonsVisible(false);
renderer.setClickEnabled(false);
renderer.setPanEnabled(false, false);
renderer.setBackgroundColor(Color.argb(0, 0, 0, 0));
renderer.setMarginsColor(Color.argb(0, 0, 0, 0));
renderer.setYTitle(yTitle);
renderer.setTextTypeface(null, Typeface.BOLD);
renderer.setXAxisMin(xMin);
renderer.setXAxisMax(xMax);
renderer.setYAxisMin(yMin);
renderer.setYAxisMax(yMax);
renderer.setTextTypeFace(FontManager.getInstance(context).getTypeface("HelveticaLTStd-BoldCond.otf"));
renderer.setAxesColor(Color.parseColor(context.getString(R.color.gray_for_axis_color)));
renderer.setLabelsColor(Color.parseColor(context.getString(R.color.yellow)));
renderer.setAntialiasing(true);
renderer.setShowGridY(true);
renderer.setShowLegend(false);
renderer.setMargins(new int[]{0,30,0,12});
renderer.setXLabelsColor(Color.parseColor(context.getString(R.color.yellow)));
renderer.addTextLabel(1, "");
renderer.addTextLabel(2, "10 \nMin");
renderer.addTextLabel(3, "");
renderer.addTextLabel(4, "20 \nMin");
renderer.addTextLabel(5, "");
renderer.addTextLabel(6, "30 \nMin");
renderer.addTextLabel(7, "");
renderer.addTextLabel(8, "40 \nMin");
renderer.addTextLabel(9, "");
renderer.addTextLabel(10, "50 \nMin");
renderer.addTextLabel(11, "");
renderer.addTextLabel(12, "60 \nMin"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:33:13.107

您可能还想禁用捏缩放：

```
renderer.setZoomEnabled(false, false); 
```

# javascript - $在javascript库和其他语言中的意义

> ID：11724395
> 
> 赞同：2
> 
> 时间：2012-07-30T15:18:10.130
> 
> 标签：javascript, programming-languages, naming-conventions

著名的 JavaScript 库，

1.  jQuery
2.  原型
3.  模拟工具
4.  写实的

所有用途`$`。有什么意义`$`？

而且，甚至 php 也使用它来声明变量。我相信其他一些语言也使用它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T15:19:08.157

它只是一个字符，可以成为 JavaScript 中标识符的一部分。除了外观独特之外，没有什么特别的意义。扫描代码时很容易识别。

现在，在其他语言中，它可以（并且确实）意味着各种各样的东西。当指代在编程语言中具有句法意义的“特殊”字符时，术语*sigil*已经流行起来，特别是修改对变量的引用的语义。在 JavaScript 中，我不会使用“$”这个术语，因为它对解释器没有任何特别的意义。

*编辑*——正如评论中所指出的，“$”在 JavaScript 正则表达式语法中占有一席之地，但我认为这与它在变量名中的使用没有任何关系。（也许有人会；我不知道。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:38:15.760

在 Javascript 中，$ 只是另一个可以在变量中使用的字符。jQuery 决定使用它作为 jQuery() 函数的简称，这样它会占用更少的空间。标识符可以由字母、数字以及 $ 和 _ 字符组成

在其他语言中：

Perl 变量前面的 $ 表示标量，@ 表示数组，% 表示哈希，& 表示函数。PHP $ 表示后面是一个可以是对象引用的变量。Commodore basic：结尾的 $ 表示它是一个字符串变量。（你不需要知道这一点。）

在 PHP 和 Perl 中，语法揭示了标识符的细节，因此程序更容易理解。name() name[] $name() 等都表示不同的东西，从语法上可以看出。

# php - 如何使用php从时间戳中修剪时间

> ID：11724399
> 
> 赞同：1
> 
> 时间：2012-07-30T15:18:12.690
> 
> 标签：php, mysql

我在我的桌子上使用了时间戳。2012-07-30 10:12:39 是我的mysql记录中的时间格式。如何修剪时间并仅显示日期。在 php 页面中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:20:59.247

```
$mysqlDateTime = "2012-07-30 10:12:39"; 
```

如果你只需要那个日期，你可以使用这样的（简单的）：

```
list($date, $time) = explode(" ", $mysqlDateTime);
echo $date; 
```

但是，您也可以使用这样的东西：

```
echo date("Y-m-d", strtotime($mysqlDateTime)); 
```

**编辑**

[donald123](https://stackoverflow.com/a/11724466/246051)的解决方案可能对您来说也很有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:22:02.087

或在您的 sql 查询中

```
Select DATE_FORMAT(YOUR_TIME_FIELD,'%Y-%m-%d') as datefield
FROM Table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T15:27:02.177

只在php中？

```
//get value from database
$result = mysql_query("SELECT `datetime` FROM `table`");
$row = mysql_fetch_row($result);
$date = date_create($row[0]);

//output
echo date_format($date, 'd/m/y');
#output: 30/07/2012 
```

使用 MySql：

```
Select DATE_FORMAT(`datetime`,'%d-%m-%Y') as formattedDate FROM table 
```

# python - 使用 timedelta 比较时间时避免 TypeError

> ID：11724400
> 
> 赞同：1
> 
> 时间：2012-07-30T15:18:16.183
> 
> 标签：python, datetime, timedelta

我有一个包含时间和一些相应信息的嵌套列表，并试图从一个时间块的开头提取一行，这些时间块彼此相隔一秒（例如 10:04:23,10:04:24， 10:04:25..）。应该有很多这样的小块。我不确定我所拥有的是否正确，如果是，它会引发 TypeError 并且我不确定如何解决它。

这是与动物访问某个区域有关的数据，并且每秒都会进行记录。我的目标是每次访问只有一个记录，因此是后续时间块中的第一行。

previous_and_next 从[这里被盗](https://stackoverflow.com/questions/1011938/python-previous-and-next-values-inside-a-loop)

```
 data=[['07/11/2012', '09:53:36', 'U', '#0F', '0006E7895B', 'T', 'U\n', '09:53:36'],
 ['05/13/2012', '09:54:27', 'U', '#0F', '0006E3DADA', 'T', 'U\n', '5031', '09:54:27'] etc]

       #define a function to get previous and following values
from itertools import tee, islice, chain
    def previous_and_next(some_iterable):
        prevs, items, nexts = tee(some_iterable, 3)
        prevs = chain([None], prevs)
        nexts = chain(islice(nexts, 1, None), [None])
        return zip(prevs, items, nexts)

    #convert times to datetime objects
    for d in data:
        try:
            f=datetime.datetime.strptime(d[1],'%H:%M:%S')
            g=f.strftime('%H:%M:%S')
            d.append(g)
        except:
            pass

    new_list=[]
    for prev,item,next in previous_and_next(data):
        aftersecond=item[1]+datetime.timedelta(seconds=1)
        if next[1]==aftersecond: #if next time is this time plus a second
            this=True
        else:
            this==False
        while this==True:
            continue
        else:
            new_list.append(data) 
```

aftersecond 是 raise `TypeError: Can't convert 'datetime.timedelta' object to str implicitly`，我理解，但不明白如何避免。我什至不确定这段代码是否符合我的要求。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:13:27.863

我建议这个解决方案看起来更简单但可能太简单了：

```
import datetime

from pprint import pprint

data=[['07/11/2012', '09:53:36', 'U', '#0F', '0006E7895B', 'T', 'U\n', '09:53:36'],
      ['07/11/2012', '09:53:37', 'U', '#0F', '0006E7895B', 'T', 'U\n', '09:53:37'],
      ['07/11/2012', '09:53:38', 'U', '#0F', '0006E7895B', 'T', 'U\n', '09:53:38'],
      ['05/13/2012', '09:54:27', 'U', '#0F', '0006E3DADA', 'T', 'U\n', '5031', '09:54:27'],
      ['05/13/2012', '09:54:28', 'U', '#0F', '0006E3DADA', 'T', 'U\n', '5031', '09:54:28'],
      ['05/13/2012', '09:54:29', 'U', '#0F', '0006E3DADA', 'T', 'U\n', '5031', '09:54:29']]

#convert times to datetime objects
for d in data:
    dt = ' '.join( d[0:2] )
    dt = datetime.datetime.strptime(dt,'%m/%d/%Y %H:%M:%S')
    d.append( dt )

newdata = [ data[0] ]
latest_time = newdata[-1][-1]
for d in data[1:]:
    delta = d[-1] - latest_time
    latest_time = d[-1]
    if delta != datetime.timedelta(0, 1):
        newdata.append( d )

pprint(newdata) 
```

有了这个虚拟数据，假设有两次动物访问，每次有 3 次观察，结果将是：

```
[['07/11/2012',
  '09:53:36',
  'U',
  '#0F',
  '0006E7895B',
  'T',
  'U\n',
  '09:53:36',
  datetime.datetime(2012, 7, 11, 9, 53, 36)],
 ['05/13/2012',
  '09:54:27',
  'U',
  '#0F',
  '0006E3DADA',
  'T',
  'U\n',
  '5031',
  '09:54:27',
  datetime.datetime(2012, 5, 13, 9, 54, 27)]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:31:40.973

```
dateTimes = []
for d in data:
    try:
        f=datetime.datetime.strptime(d[1],'%H:%M:%S')
        g=f.strftime('%H:%M:%S')
        d.append(g)
        dateTimes.append(f) #append datetime object
        #you could also append f to the end of d ... 
    except:
        pass

new_list=[]
for i,prev,item,next in enumerate(previous_and_next(data)):
    aftersecond=dateTimes[i]+datetime.timedelta(seconds=1)
    if next[1]==aftersecond: #if next time is this time plus a second
        this=True
    else:
        this==False
    while this==True:
        continue
    else:
        new_list.append(data) 
```

可能工作...

# azure - 使用 Azure Blob 存储 Azure 表，反之亦然

> ID：11724403
> 
> 赞同：1
> 
> 时间：2012-07-30T15:18:25.030
> 
> 标签：azure, azure-storage

我正在创建一个云应用程序，我必须存储要在我的应用程序上使用的文本和图片，并且我正在为此使用 Windows Azure 云存储，最近我创建了一个单独的表来存储我的实体和一个单独的表Blob 来存储我的图像，现在我想知道是否可以在 Blob 或表格中存储文本和图像？！我该怎么做？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T15:33:20.743

是的，这是可能的：

*   要将文本存储在 Blob 中，您只需调用[UploadText](http://msdn.microsoft.com/en-us/library/windowsazure/ee772818.aspx)方法即可。
*   要将图像存储在表存储中，您可以将其存储在 byte[] 属性中（请参阅[此博客文章](http://blogs.msdn.com/b/avkashchauhan/archive/2011/12/16/how-you-can-store-decimal-data-in-windows-azure-table-storage.aspx)）。请注意，这里的限制是每个属性 64KB，记录限制为 1MB，但有一些方法可以解决这个问题（例如[FatEntity](http://code.google.com/p/lokad-cloud/wiki/FatEntities)）。

现在，这不是因为你可以，你应该。将图像上传到 blob 存储是一种常见的做法，只需将指向该 blob 的 URL 保存在表存储实体中（连同其他信息，如创建日期、创建它的用户......）。

Windows Azure 培训工具包中的留言簿练习就是一个完美的例子：http: [//msdn.microsoft.com/en-us/wazplatformtrainingcourse_introtowindowsazurelabvs2010_topic2#_Toc313609301](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_introtowindowsazurelabvs2010_topic2#_Toc313609301)

# javascript - 如何发送 ajax 请求并重定向到另一个页面

> ID：11724404
> 
> 赞同：0
> 
> 时间：2012-07-30T15:18:32.710
> 
> 标签：javascript, jquery, ajax

我在客户端代码中看到了以下序列：

```
$.ajax({
    url: "...",
    data: {},
    success: function() {
    // I don't care about the response
    }
});

top.location.href="http://...." 
```

如您所见，浏览器发送一个 ajax 请求，并不关心响应。在它发送请求后，页面使用`top.location.href`语句重定向到另一个 url。

我是 javascript 的新手，我不确定是否保证发送 ajax 请求？

是否有另一种方法来获取此*发送和忘记并重定向*ajax 行为？

**编辑**：

澄清一下，我不想等待这个 ajax 完成它的长时间操作并将重定向行放在成功回调中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:21:32.117

如果您想 100% 确定消息已被接收和处理，您应该在`success`处理程序中进行重定向。

如果需要，这也将使您能够进行错误处理 - 例如，如果您发出 AJAX 请求但由于某种原因失败了怎么办？如果你只是重定向用户永远不会知道有问题。但是，根据您的应用程序的具体情况，您可能不需要关心这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:22:08.153

如果您只想在 ajax 请求成功后重定向到其他页面，那么为什么不将您的 top.location 放入成功函数中，或者如果您只想重定向，无论您的 ajax 是否成功...写您的 top.location完整参数的函数。

# javascript - 禁用 JavaScript - 相关下拉列表

> ID：11724406
> 
> 赞同：0
> 
> 时间：2012-07-30T15:18:37.277
> 
> 标签：javascript, asp.net-mvc-3

我有一个 ASP .NET MVC 3 应用程序，我正在使用 Jquery 来增强用户体验。我有一个页面，其中有一个州和县下拉菜单，并且县下拉菜单是根据选择的州（使用 JQuery）加载的。现在我有某些用户禁用了 JS 并且它没有加载。

任何人都可以提出一种方法来实现这一点（如果需要，我也准备重新设计我的页面）。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:20:36.110

如果在浏览器中禁用了 javscript，则页面中的 jQuery /any javascript 将不起作用。由于 javascript 在改善当今 Web 应用程序的用户体验方面发挥着重要作用，如果禁用 javascript，我肯定会向用户添加一条消息。

```
<noscript>
  <p>You are missing some awesome features of this site. Enable Javascript to see it</a>
</noscript> 
```

如果你真的想让它在没有 javascript 的情况下工作，你可以在从下拉列表中选择国家后提交你的表单（用户应该点击提交按钮）。您的`POST`操作可以读取所选国家/地区并获取列表`States`并将其设置在您的模式/视图模型中，然后再次将其发送回视图。但这不是一个用户友好的选择！如此多的按钮点击和表单提交。啊！！！. 我会告诉用户启用 javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:29:11.860

一个可能的选择是有一个“禁用 JavaScript”的视图，允许用户选择州，然后单击提交按钮（该县将在下一个视图中），并将表单发送到一个控制器，该控制器接收state 来自表单，确定要显示的县，并返回一个包含可能县的视图（禁用该视图上的状态选择）。

如何确定哪个视图（JavaScript 增强或 JavaScript 禁用）取决于您。

# ruby-on-rails - validate_inclusion_of 使用数据库中的列表

> ID：11724407
> 
> 赞同：1
> 
> 时间：2012-07-30T15:18:42.010
> 
> 标签：ruby-on-rails

这是我正在尝试做的事情：

我有一个铁路模型，我们称之为项目。在数据库中，我有一个项目列表。因此我可以做一个

```
item = Item.find(28) 
```

并获取一个表示在数据库中找到的项目的对象。

现在，我还有另一个模型，假设 Order 需要对其一个字段执行 validate_inclusion_of，以查看项目名称是否在 Item 数据库中。就像是

```
validates: item_name, :presence => true
:inclusion => Item.all.name #get an array of all possible item names 
```

这可以做到吗？最好的方法是什么？

此致，

O。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:29:04.043

尝试这个：

```
validates_inclusion_of :item_name, :in => Proc.new{Item.select(:name).map(&:name)} 
```

更新

这是一个完整的实现：

```
rails new shop
cd shop
rails g model item name:string
rails g model order item_name:string
rake db:migrate 
```

现在在您的订单模型中：

```
class Order < ActiveRecord::Base
  attr_accessible :item_name
  validates_inclusion_of :item_name, :in => Proc.new{Item.select(:name).map(&:name)}
end 
```

现在我们需要在控制台中测试它

```
rails c 
```

在控制台中

```
Item.create(name: 'book')
o = Order.new
o.valid?
=> false
o.errors
=> @messages={:item_name=>["is not included in the list"]}
o.item_name = 'book'
o.valid?
=> true 
```

# c# - 在接口上使用 Func<>？

> ID：11724411
> 
> 赞同：7
> 
> 时间：2012-07-30T15:18:51.287
> 
> 标签：c#, design-patterns, interface, func, solid-principles

我有一个已经存在的泛型类

```
public class Foo<T>
{
    private T _item;
    public Foo(T item){ _item = item;}
} 
```

我必须创建一个方法来返回 T 的某个属性。
我在这里看到两个解决方案。

1.  创建接口：

    ```
    public const string TestVar = "bar";
    public interface INamable { string Name { get; } }
    public class Bar : INamable
    {
        public string Name { get { return TestVar; } }
    }

    public class Foo<T> where T : INamable
    {
        private T _item;
        public Foo(T item) { _item = item; }
        public string GetName() { return this._item.Name; }
    }

    [TestMethod()]
    public void TestInterface()
    {
        var bar = new Bar();
        var foo = new Foo<Bar>(bar);
        Assert.AreEqual(TestVar, foo.GetName());
    } 
    ```

2.  传递函数：

    ```
    public const string TestVar = "bar";
    public class Bar
    {
        public string Name { get { return TestVar; } }
    }

    public class Foo<T>
    {
        private T _item;
        private Func<T, string> _funcName;
        public Foo(T item, Func<T, string> funcName) { _item = item; _funcName = funcName; }
        public string GetName() { return _funcName.Invoke(_item); }
    }

    [TestMethod()]
    public void TestFunc()
    {
        var bar = new Bar();
        var foo = new Foo<Bar>(bar, b => b.Name);
        Assert.AreEqual(TestVar, foo.GetName());
    } 
    ```

我选择第二种解决方案，因为我不必创建界面，而且我很懒。只需将一个参数添加到已经调用的 foo 构造函数。

此外，Foo 类仍然可以与各种类一起使用，我更喜欢这种方式。

但是，我不确定这是否是使用 Func 的好方法？它仍然很好而且很坚固吗？这是我第一次尝试使用 Func，这就是我问自己的原因！

几个月前，我使用了第一个解决方案，带有经典界面......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:23:04.250

第一个解决方案（即没有 Func）要简单得多。绝对不需要调用 Func 对象来实现一个普通的属性访问器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T15:38:44.160

如果您的界面最终只有一种方法，那么使用`Action`或`Func`委托是完全有效的。这更清洁恕我直言。

不过你不必写`Invoke`。只需用括号调用它：`_funcName(_item)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T15:38:57.837

我正在重新表述我的答案，因为从评论中我意识到我并不是很清楚。

这取决于您的代码的意图以及谁有责任为您的类命名（客户端应该知道并指定如何命名类，而类本身应该有一个名称）。我正在稍微更改@Scorpi0 的示例，以便 Foo 实际上使用名称（它问候它）而不是仅仅返回它。

## 示例 1（接口）

```
interface INamable { string Name { get; } }

class AThingWithAName : INamable 
{
    public string Name {get {return "thing";}}
}

class AnotherThingWithAName : INamable 
{
    public string Name {get {return "different thing";}}
}

class Foo<T> where T : INamable
{
    public string Greet(T item) {return "hi " + item;}
} 
```

无论 Foo 是什么，这里的事物都有一个名称。Foo 知道如何向事物打招呼，只要它们有名称（通过实现 INamable 接口的合同来保证）。在这里，您要保证 Foo 仅适用于具有 Name 的事物，并且尝试迎接其他任何事物应该是编译器捕获的类型错误。

另外，请注意，您在每个类中封装了 Name 的具体实现。名称可能取决于其类的私有状态。

## 示例 2（功能）

```
class AThing {}
class AnotherUnrelatedThing {}

class Foo<T>
{
    public string Greet(T item, Func<T, string> namingFunction) 
    {
        return "hi " + namingFunction(item);
    }
} 
```

这里的重点是Foo。事物不一定有名称。我想建立一个可以迎接任何事物的 Foo 类。它是如何做到的？好吧，对于任何类型，调用者有责任传入一个可以为该类型命名的函数。在这种情况下，我们不仅不要求保证 T 知道它自己的名称，而且我们正在构建 Foo 以使其可以 Greet 任何类型，只要我们知道如何给它一个名称。例如这有效：

```
var foo = new Foo<int>();
var res=foo.Greet(2, n=>n.ToString()); 
```

为了换取这种灵活性，我们放弃了封装。现在 Name 不再是类的责任来实现，我们（调用者）告诉 Foo 如何给我们使用它的每个类命名。

因此，根据您想要表达的内容以及如果您有一个对象层次结构，这些对象的名称与 Foo 无关，您可以选择一种或另一种方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T22:28:03.827

在许多情况下，委托对于实现者来说会更方便使用，因为 vb.net 和 C# 编译器都包含使其非常易于使用的功能。接口可以做一些委托不能做的事情（例如，包括开放的泛型方法族），并且在某些情况下可能比委托更有效（因为对实现接口的对象的引用可以作为该接口类型传递，而不必创建另一个堆对象来保存它）。然而，编译器支持轻松创建内联委托，虽然没有为单函数接口提供可比的工具，但这一事实提出了支持前者的非常有力的论据。

# java - 如何在 GWT 中制作一个垂直的、可折叠的菜单？

> ID：11724412
> 
> 赞同：0
> 
> 时间：2012-07-30T15:18:51.613
> 
> 标签：java, eclipse, gwt, menu

好吧，检查我的代码：

```
public MainForm() {

        HorizontalPanel horizontalPanel = new HorizontalPanel();
        initWidget(horizontalPanel);

        VerticalPanel verticalPanel = new VerticalPanel();
        horizontalPanel.add(verticalPanel);

        MenuBar menuBar = new MenuBar(true);
        verticalPanel.add(menuBar);
        MenuBar menuBar_1 = new MenuBar(true);

        MenuItem mntmNewMenu = new MenuItem("General", false, menuBar_1);

        MenuItem mntmBuilding = new MenuItem("Building", false, (Command) null);
        menuBar_1.addItem(mntmBuilding);

        MenuItem mntmModularBuilding = new MenuItem("Modular Building", false, (Command) null);
        menuBar_1.addItem(mntmModularBuilding);
        menuBar.addItem(mntmNewMenu);
        MenuBar menuBar_2 = new MenuBar(true);

        MenuItem mntmNewMenu_1 = new MenuItem("New menu", false, menuBar_2);
        mntmNewMenu_1.setHTML("EPC");
        menuBar.addItem(mntmNewMenu_1); //target
        MenuBar menuBar_3 = new MenuBar(true);

        MenuItem mntmNewMenu_2 = new MenuItem("New menu", false, menuBar_3);
        mntmNewMenu_2.setHTML("Constructions");
        menuBar.addItem(mntmNewMenu_2);
        MenuBar menuBar_4 = new MenuBar(true);

        MenuItem mntmRecommendations = new MenuItem("Recommendations", false, menuBar_4);
        menuBar.addItem(mntmRecommendations);

    } 
```

目前，带有“建筑”和“模块化建筑”选项的子菜单即将出现。如何更改代码以使子菜单出现在菜单栏选项下方？一些显示它们是子菜单的样式也会有所帮助。

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:18:49.417

您可以`StackPanel`用于此目的。请在此处查看展示：http: //gwt.google.com/samples/Showcase/Showcase.html#! [CwStackPanel](http://gwt.google.com/samples/Showcase/Showcase.html#!CwStackPanel)

我希望这会有所帮助。

# xcode - 在 uitextview 中选择文本时应用程序崩溃

> ID：11724415
> 
> 赞同：1
> 
> 时间：2012-07-30T15:18:59.507
> 
> 标签：xcode, crash, uitextview

我正在编写应该是一个非常简单的应用程序，其中一个方面是 uitextview。视图加载并可以轻松滚动，但如果用户尝试按住以选择某些文本，则应用程序崩溃：

> 2012-07-30 23:07:01.547 SASB[36340:c07] +[_UIDictionaryWrapper _availableDictionaryAssets] 返回失败 - 重试。错误：错误域=ASError 代码=4“操作无法完成。（ASError 错误 4 - 无法复制资产信息）”UserInfo=0xaa64b90 {NSDescription=无法复制资产信息} SASB(36340,0xac2a7a28) malloc：*** 对象 0xaa611a0 的错误：双重释放 ***在 malloc_error_break 中设置断点以进行调试 (lldb)

我不知道为什么会这样。在最好的情况下，我不太擅长调试，但这只会让我回到 main.m 文件：

```
#import <UIKit/UIKit.h>

int main(int argc, char *argv[])
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    int retVal = UIApplicationMain(argc, argv, nil, nil);
    [pool release];
    return retVal;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:21:41.967

哎呀！

看来这可能是 Xcode 4.5 beta 中的一个错误。我完全忘记了我什至在使用测试版。我想我现在必须跳过 IOS6 功能 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T00:24:08.137

我怀疑你是对的克里斯托弗。我有一个正在针对 ios6 测试的应用程序，我得到了相同的控制台消息。

在我的情况下，应用程序继续运行良好，并且在使用 UITextView 对象完成编辑时保存数据，就像使用 ios5 一样。

# hibernate - 休眠：仅保存子对象并忽略父对象

> ID：11724417
> 
> 赞同：0
> 
> 时间：2012-07-30T15:19:12.053
> 
> 标签：hibernate

我有一个对象模型：

```
class Parent {
   List<childType1>childList1;
   List<childType2>childList2;
   List<childType3>childList3;
} 
```

在数据库中，我只需要保存子对象列表，并且 children 之间没有关系。我可以只调用`session.save(ParentObj)`一次，休眠将只保存子数据而忽略父对象吗？
否则我必须提取每个列表并调用 session.save 100 次。

# google-apps-script - 请在 Google Apps 脚本上使用最新版本的 Google Prediction API

> ID：11724419
> 
> 赞同：0
> 
> 时间：2012-07-30T15:19:16.497
> 
> 标签：google-apps-script, google-prediction

我已在我的 Google Apps 脚本中成功添加了 Google Prediction API。但是，版本选择器仅显示预测 API 的 1.2。最新版本是 1.5，现在已经发布了几个月。请问我们可以在应用程序脚本上获得最新版本的 Google API 吗？还是我只是错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:17:18.520

Apps 脚本现在支持 1.5 版的 Prediction API。

# infinispan - Infinispan 集群和 hotrod 客户端无法通信

> ID：11724420
> 
> 赞同：1
> 
> 时间：2012-07-30T15:19:22.033
> 
> 标签：infinispan, jgroups

我有一个带有几个节点的复制集群——它们可以在彼此之间自由通信。我还有一个 Hotrod 服务器加入集群（我可以看到它被其他节点识别）。但是，当我将 Hotrod 客户端连接到服务器并尝试将某些内容放入缓存时，出现以下异常：

*   hotrod 客户端： `org.infinispan.client.hotrod.exceptions.HotRodClientException:Request for message id[4] returned server error (status=0x85): org.infinispan.CacheException: Problems invoking command.`

*   热棒服务器：`Caused by: org.infinispan.CacheException: Type of data read is unknown. Id=-2147482548 is not amongst known reader indexes.`

*   具有缓存存储的节点：`WARN: Problems unmarshalling remote command from byte buffer org.infinispan.CacheException: Type of data read is unknown. Id=-2147482548 is not amongst known reader indexes.`

此外，Hotrod 客户端也看不到其他节点提供的任何更改。如果除了 hotrod 服务器之外集群中没有任何节点 - 一切正常。如果有任何其他节点（例如注册了 CacheListener）可用，我会得到上述异常。

我到处使用 Infinispan 5.1.5.Final 和 JGroups 3.0.10.Final。Win7 64 位，Java 6_0_32 32 位。所有节点都在一台机器上工作，集群建立在 TCP 传输堆栈上。每个节点都是一个 Java SE 应用程序。infinispan 论坛 (https://community.jboss.org/thread/199539) 上有一个类似的帖子，但它是针对旧版本的（在这种情况下，更新有所帮助）。

有人有类似的问题，或者知道我应该在哪里寻找问题的根源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T14:00:57.600

没关系...自己解决

我添加了对集群节点 pom 的依赖项（那些不是 hotrod 服务器）：

```
<dependency>
  <groupId>org.infinispan</groupId>
  <artifactId>infinispan-server-hotrod</artifactId>
</dependency> 
```

# c# - SolidColorBrush 无法正确显示

> ID：11724431
> 
> 赞同：0
> 
> 时间：2012-07-30T15:19:57.407
> 
> 标签：c#, asp.net, wpf

在 C# WPF 应用程序中，我对这些饼图切片进行了编码：但它实际上显示的不是红色而是金色。现在我被告知这是因为 Visifire 有一些错误。不过，有什么办法可以显示红色。这很重要，因为护士必须知道可能没有输入某人的指控。

```
if (alrg.Description == "No Allergies") 
    alrg.Color = new SolidColorBrush(Colors.Red);
else if (alrg.Description == "Unknown") 
    alrg.Color = new SolidColorBrush(Colors.Yellow);
else if (alrg.Description == "Allergies") 
    alrg.Color = new SolidColorBrush(Colors.Green); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:41:42.293

当然，alrg 上的 Color 属性是颜色，而不是画笔。如果是这样，您的分配应该是 alrg.Color = Colors.Red;

您可以发布 alrg 类的代码吗？

# javascript - raphaeljs bbox 在集合中的麻烦

> ID：11724433
> 
> 赞同：0
> 
> 时间：2012-07-30T15:19:58.307
> 
> 标签：javascript, raphael

我尝试使用 rafael 库的 set()，得到了 bbox 的奇怪行为，这里是示例（请设置 a i>2 以查看问题），也放在 jsfiddle [http://jsfiddle.net/Uue5h/46/](http://jsfiddle.net/Uue5h/46/)

```
var paper=Raphael("out",320,200);
var box=paper.rect(50,50,30,30);
var lx=0;
 var ly=0;
 //just to have placement
 var bx=box.getBBox().x;
 var by=box.getBBox().y;
 var pset=paper.set();
 for (var i=0;i<6;i++) {
   //place a box to randmom place;
   var newbox=paper.rect(Math.round(Math.random()*100),Math.round(Math.random()*100),10,10);
    //translate it once to be sure that it is not because it was translated
    newbox.translate(10,10);
        pset.push(newbox);

 }
 //set here i<2 to see a problem
 for (var i=0;i<1;i++) {
    //place items in rows;
 for (var nn in pset.items) {
    //new placement calculate;
       var nx=bx+lx*32;
       var ny=bx+ly*32;
       var cb=pset[nn];
    //here the problem !
    //if called second time the returnded bbx looks incorrect
       var bbx=cb.getBBox();
    //calculate translate coordinates
       var tx=nx-bbx.x;
       var ty=ny-bbx.y;
    //translate item
       cb.translate(tx,ty);
    //shift it to front
       cb.toFront();   
    //calculate row/col    
       lx++;
    if (lx>=2) {lx=0;ly++}
 }       
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T17:13:06.180

RaphaelJS 中的 bbox 存在一个已知问题。

[pathBBox() 返回对缓存 bbox 的引用](https://github.com/DmitryBaranovskiy/raphael/issues/543)

pathBBox() 返回的是引用而不是缓存的 bbox 值的副本，这意味着该值可能会被意外覆盖。

简单修复：

raphael.js - 第 1300 行

```
return clone(pth.bbox); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:26:03.017

Cyrena 关于调整 Raphael 代码的答案帮助解决了我的问题！下面的代码应该多次克隆图像（将 SVG 转换为 Raphael 系统），并使部分可点击。但在我找到这篇文章之前，它只会显示第 1、2 和 8 张图像，并且奇怪地将各种其他克隆放置在 x 坐标上的 -10,000 和 +20,000,000 像素处，远远超出纸张区域和通用代码当我开始克隆时，应该所有到 0,0 的图像都不起作用。我很开心。

但是请注意[这里](https://stackoverflow.com/questions/10079066/raphaeljs-2-1-vs-1-5-2-getbbox-error "这里")指出的一个缺点。在我遇到问题之前，我会保持我已经开始做的事情

```
window.onload = function () {

var paper = null; 

paper = Raphael('canvas', 1000,400);
var paper_border = paper.rect(0,0,1000,400);

var env_set = [];

paper.setStart();
Obj=paper.path('M 163.4 14.6 C 165.5 18.1 164.8 183.6 162.1 190.1 C 159.9 195.3 90 253.4 86.4 254.9 C 39.1 254.6 7.3 237.4 2 228.3 C 0 216.9 1.7 40.8 3.6 37.1 C 5.3 33.9 94.7 1.9 97.8 1.1 C 100.6 0.5 161 10.8 163.4 14.6Z');
Obj.attr({'fill':'#c7c7c7','stroke':'none'});
env_set[1] = paper.setFinish();

for (i=2; i<10; i++){
    env_set[i] = env_set[1].clone();
}

/*********************************************************************************
The below lines use the set to transform your SVG to:
Translate (Move) your image to the top left of the paper.
*********************************************************************************/
for (i=1; i<10; i++){
    //alert(env_set[i].getBBox().x);
    env_set[i].transform('T'+(-1*env_set[i].getBBox().x)+200*i+','+(-1*env_set[i].getBBox().y));

}

/*********************************************************************************
The below lines use the set to add event handlers.
As you mouseover the above code window vectors they change colour.
If your trying to locate a path, click on the vector image above...
*********************************************************************************/
function callback(member)
{
member.mouseover(function (e) {  this.ofill=this.attr('fill');this.attr({fill:'#000000'}); });
member.mouseout(function (e) { this.attr({fill:this.ofill}); });
member.click(function (e) { var thisPath=this.attr('path');alert('You just clicked on Element #'+this.id+'.To help you find it in the code its path starts with......'+thisPath); });
}

for (i=1; i<10; i++){
    env_set[i].forEach(callback);
}

} 
```

# jquery - 带有 javascript 对象列表的 jQuery UI 自动完成

> ID：11724436
> 
> 赞同：0
> 
> 时间：2012-07-30T15:20:13.937
> 
> 标签：jquery, autocomplete

现在我正在尝试对 facebook 朋友列表进行一些自动完成，我希望它的工作方式是我希望自动完成显示一个字段（名称），但是当提交表单时，它改为发布另一个字段，ID

这样做的好方法是什么？

提前致谢。

# windows - Windows 批处理文件 - 到 FIND 的管道

> ID：11724440
> 
> 赞同：8
> 
> 时间：2012-07-30T15:20:19.497
> 
> 标签：windows, batch-file

尝试测试字符串以查看它是否包含 Windows 批处理文件中的子字符串。

这是我到目前为止所拥有的：

```
echo %1 | find "message"
if %errorlevel% == 0 echo contains string 
```

命令行输出是（%1 的内容是“messages\Message.js”）：

```
消息\Message.js
包含字符串

```

我遇到的问题是，我可以让它工作的唯一方法是使用确切的行：`echo %1 | find "js"`.

如何在不每次都回显文件路径的情况下做到这一点？当我删除 时`echo`，操作系统会尝试打开该文件。我很想将文件路径保存到一个变量中，但我尝试过的没有任何效果，我总是以一个空变量结束。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:41:18.113

```
 echo %1 | find "message" > NUL
    if %errorlevel% == 0 echo contains string 
```

# java - 将泛型类型枚举作为参数传递（java）

> ID：11724442
> 
> 赞同：14
> 
> 时间：2012-07-30T15:20:31.103
> 
> 标签：java, enums

我写了以下方法

```
@SuppressWarnings("unchecked")
protected <E extends Enum<E>> void populateComboWithEnumValues(Combo combo, E enumData, String defaultSelectionValue) {

    // populate commbo
    for (Enum<E> enumVal: enumData.getClass().getEnumConstants()) {  
        combo.add(enumVal.toString());
    }  

    // select default selection
    for (Enum<E> enumVal: enumData.getClass().getEnumConstants()) {  
        if(enumVal.toString().equals(defaultSelectionValue)) {
            try {
                combo.select((Integer) enumVal.getClass().getMethod("getSelectionIndex").invoke(enumVal));
            } catch (IllegalArgumentException e) {
                LOGGER.debug("an IllegalArgumentException exception occured");
            } catch (SecurityException e) {
                LOGGER.debug("an SecurityException exception occured");
            } catch (IllegalAccessException e) {
                LOGGER.debug("an IllegalAccessException exception occured");
            } catch (InvocationTargetException e) {
                LOGGER.debug("an InvocationTargetException exception occured");
            } catch (NoSuchMethodException e) {
                LOGGER.debug("an NoSuchMethodException exception occured");
            }
        }
    } 
```

如何将不同的枚举类型传递给第二个参数？我知道我无法创建枚举的实例，但初始化枚举意味着我将传递单个值而不是整个初始化的枚举，如下所示......其他枚举也将传递给 Combo 细节的相同方法

```
public enum ServerEnvironmentName {

    /** 
     * The CFD environment name. 
     * Selection Index
     */
    CFD("CFD", 0),

    /** 
     * The PIT environment name. 
     * Selection Index
     */
    PIT("PIT", 1),

    /** 
     * The SIT environment name. 
     * Selection Index
     */
    SIT("SIT", 2),

    /** 
     * The DEV environment name. 
     * Selection Index
     */
    DEV("DEV", 3);

    /** The input string to identify the environment. */
    private String envURL;

    /** The index value for view selection.*/
    private int selectionIndex;

    /**
     * Enum constructor to initialise default values. 
     * 
     * @param selectionIndex index value for view selection
     * @param envURL input parameter for environment
     */
    ServerEnvironmentName(String envURL, int selectionIndex) {
        this.envURL = envURL;
        this.selectionIndex = selectionIndex;
    }

    /**
     * Getter for the envURL.
     * 
     * @return the environment string 
     */
    public String getEnvironmentUrl() {
        return envURL;
    }

    /**
     * This method returns the index of the enum value.
     * 
     * @return the selection index
     */
    public int getSelectionIndex() {
        return selectionIndex;
    }
} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-30T15:25:43.827

您可能想要传递类，而不是枚举实例：

```
protected <E extends Enum<E>> void populateComboWithEnumValues(Combo combo, Class<E> enumClass, String defaultSelectionValue) {...} 
```

这里有一个使用示例：

```
public class EnumTest {

    protected static <E extends Enum<E>> void enumValues(Class<E> enumData) {
        for (Enum<E> enumVal: enumData.getEnumConstants()) {  
            System.out.println(enumVal.toString());
        }  
    }

    public static enum TestEnum {
        ONE, TWO, THREE;
    }

    public static void main(String param [] ) {
        EnumTest.enumValues(EnumTest.TestEnum.class);
    }
} 
```

# c - 在 C 中将字符串转换为数字，反之亦然（非 C++）

> ID：11724447
> 
> 赞同：0
> 
> 时间：2012-07-30T15:20:47.343
> 
> 标签：c, string, numbers

有没有办法在C中将字符串转换为数字，反之亦然？我知道我可以在 C++ 中使用 iostream 并使用 atoi() 或 sprintf() 等。我想知道是否有一种方法可以在不使用流的情况下在 C 中实现这一点。我在这一点上看到的唯一解决方案是创建我自己的函数，除非有人知道已经存在且经过验证的解决方案。

基本上，是否有与 C++ 的 atoi() 和 sprintf() 等效的 C 语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:24:23.877

这两个都是 C 函数：

*   `atoi`在`stdlib.h`
*   `sprintf`在`stdio.h`

由于这些都包含在 C 中，因此它们都不需要 C++ 流。

# jquery - jQuery ColorBox 真实多实例

> ID：11724452
> 
> 赞同：0
> 
> 时间：2012-07-30T15:21:04.090
> 
> 标签：jquery, instance, colorbox

这个问题以前在 Google Group 中被问过，但从未真正回答过，该小组被 ColorBox 开发人员 Jack Moore 关闭（顺便说一句，很棒的插件，谢谢！）。

我想创建一个 ColorBox 灯箱的真实多个实例。这是为了能够打开一个灯箱实例，然后在关闭它时，只隐藏而不是从 dom 中删除它。我开发了一个支持灯箱选项的 Moodle 活动模块。在我的课程页面中，我有多个 ColorBox 灯箱实例（每个都包含一个 iframe）。当学生在打开的灯箱中浏览书籍或任何内容并关闭它时，他稍后必须能够再次打开它，并且书籍内容处于与他关闭它时相同的位置/状态。

我想这不是标准功能，但是有人找到了方法吗？保留颜色框实例/ div，如果它已经存在，稍后再取消隐藏它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:29:25.160

抱歉，我认为没有实用的方法可以做到这一点。您必须重新编写大量插件才能支持多个实例。

您可以将 iframe 保留为不同的内联内容。我不确定在 DOM 周围移动 iframe 是否会导致它失去滚动位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-08T15:33:34.237

您可以调用关闭事件新颜色框。例子：

```
$.colorbox({
  html:'test',
  onClosed::function(){
        // open the other colorBox   
        $.colorbox({html:'test'});
    }
}); 
```

# html - 将多个 HTML 表与 POST 请求一起使用

> ID：11724454
> 
> 赞同：0
> 
> 时间：2012-07-30T15:21:09.337
> 
> 标签：html, ruby-on-rails, sqlite

这可能是一个相当简单的问题，我只是不精通 Rails 或 HTML ......

我的视图中有两个 HTML 表，它们都从各自的数据库表中更新。我有一个下拉菜单来选择每个表的时间范围。我最初使用了一个 GET 请求，但这弄乱了另一个表，我宁愿在 URL 中没有参数。因此，使用 POST，每个表都独立工作，但每次我更新一个表时，它都会将另一个表返回到我的`:selected =>`标签指定的默认时间范围。

```
<%= form_tag home_landing_path, :method => 'post' do %>
  <p>
    <%= select_tag :timePeriod, options_for_select(["1 Week Ago", "3 Months Ago"], :selected => params[:timePeriod]) %>
    <%= submit_tag "Refresh", :name => nil %>
  </p>
<% end %> 
```

两个表都使用相同的代码（`:timePeriod`参数除外）。如何让每张桌子“记住”它的位置？

Ruby 1.9.3、Rails 3.2.6、SQLite3 3.6.20

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:23:23.950

在 html 中，表单是完全相互独立的。

如果您提交一个表单（仅围绕一个表），那么只有该表单中的参数才会到达服务器。它没有从其他表单中获取任何值......所以当它重新呈现页面时，它不知道第二种表单中是否有其他值。

与任何问题一样，有多种解决方法，每种方法都有自己的问题。

AJAX 是一个很好的解决方案 - 这意味着表单被提交，但您仍然留在页面上，原始的第二个表单仍然存在......这样第二个表单中的所有信息都不会每次都丢失你点击“提交”。

如果由于某种原因你不能这样做，另一种（相当丑陋的）方法是只有一个表格......只发布一个动作......然后根据 form1 中是否有有用的信息或form2的数据。我不推荐这种方式，除非你出于某种奇怪的原因必须这样做。

我会说去 AJAX 方法。

# jquery - jquery显示/隐藏具有相同起始的元素

> ID：11724455
> 
> 赞同：0
> 
> 时间：2012-07-30T15:21:12.723
> 
> 标签：jquery, hide, show, show-hide

我有三十个 div 和三十个按钮。每个按钮隐藏以前打开的 div 并打开不同的 div。例如：

打开了名为“divnr4”的 div。我按下 7 号按钮，divnr4 消失，但出现 divnr7。我怎么能这样做？我正在考虑使用类似的东西

```
$('#divnr').hide();
$('#divnr7').show(); 
```

但我不确定它是否有效以及如何正确执行此操作。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T15:25:08.353

```
$("button").on("click", function() {
    $( "div[id^=divnr]" ).hide();
    $( "#divnr" + ( $(this).index() + 1 ) ).show();
}); 
```

[**演示**](http://jsfiddle.net/9EbZL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:27:20.427

如果一次只打开一个 div，您可以调用一些代码来显示所选 div 并隐藏其余部分。[这个链接](http://www.randomsnippets.com/2011/04/10/how-to-hide-show-or-toggle-your-div-with-jquery/)有一个工作示例，可以说明我的意思。

# c# - 如何在 cshtml（剃刀）上设置属性？

> ID：11724456
> 
> 赞同：3
> 
> 时间：2012-07-30T15:21:13.053
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

我想根据我的后端数据设置“选定”选项。这是我的代码示例...

```
<select id="listName" name="listName">
    <option>Select Name</option>
        @foreach (var item in ViewBag.NameList as Dictionary<string, string>)
        {                
            //worked in MVC2, not with razor
            <option value= '@item.Key' @if (TempData["name"].ToString() == item.Key) { selected = "&quot;selected&quot;"); }>@item.Value - @item.Key</option> 

            string nameSelect = TempData["name"].ToString() == item.Key ? "selected" : "";
            <option value= '@item.Key' selected= '@nameSelect'>@item.Value - @item.Key</option>                           
        }
</select> 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T15:32:29.833

> 有一个更好的方法吗？

哦，地狱是的。当然使用视图模型。所以让我们定义一个视图模型：

```
public class MyViewModel
{
    public string SelectedValue { get; set; }
    public IEnumerable<SelectListItem> Values { get; set; }
} 
```

然后是一个控制器操作，它将从您的数据源填充此视图模型：

```
public ActionResult SomeAction()
{
    var model = new MyViewModel();

    // preselect an item with Value=2
    model.SelectedValue = "2"; 

    // this could of course come from a database or something
    model.Values = new[]
    {
        new SelectListItem { Value = "1", Text = "item 1" },
        new SelectListItem { Value = "2", Text = "item 2" },
        new SelectListItem { Value = "3", Text = "item 3" },
    };

    return View(model);
} 
```

最后是相应的强类型视图：

```
@model MyViewModel
....

@Html.DropDownListFor(x => x.SelectedValue, Model.Values, "Select") 
```

现在，由于您在问题中显示了一些字典，我们可以假设您已经拥有这本字典。在您的示例中，您已将其填充到 ViewBag 中（这是错误的），但您可以将其绑定到视图模型：

```
public ActionResult SomeAction()
{
    Dictionary<string, string> values = ......

    var model = new MyViewModel();
    model.SelectedValue = (string)TempData["name"]; 
    model.Values = values.Select(x => new SelectListItem
    {
        Value = x.Key,
        Text = string.Format("{0} {1}", x.Key, x.Value)
    });

    return View(model);
} 
```

这就是 ASP.NET MVC：强类型、视图模型、没有 ViewBag。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:44:40.937

除了`@Html.DropDownListFor`，你可以这样编码：

```
<option value= '@item.Key' @(TempData["name"].ToString() == item.Key ? "selected" : "")>@item.Value - @item.Key</option> 
```

顺便说一句，我不喜欢@Html.DropDownListFor ..

# ruby-on-rails - Rails 3.2 sunspot_rails 和 sunspot_solr 无法在 Windows 上启动

> ID：11724457
> 
> 赞同：0
> 
> 时间：2012-07-30T15:21:16.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sunspot, sunspot-rails, sunspot-solr

编辑：下载 zip 并手动安装，现在一切正常。

* * *

不幸的是，在 Windows 上设置 Sunspot 和 Solr 似乎是不可能的。运行 rake sunspot:solr:run 工作正常，但是，当尝试重新索引或在服务器开发模式下执行搜索方法时，您会收到异常“无法建立连接，因为目标机器主动拒绝它。-connect(2 )”。我今天安装了 sunspot_rails 和 sunspot_solr，所以应该是最新版本。今天也将 java 更新到 1.7.0_05。现在，[有些](https://github.com/sunspot/sunspot/issues/163)人通过将 server.rb 中的第 104 行从 exec(Shellwords.shelljoin(command)) 更改为 system(Shellwords.shelljoin(command)) 来使其工作，但这对我也不起作用。我真的没有看到任何可能的解决方案可以尝试。有人知道如何让它在 Windows 7 上运行吗？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:29:28.300

This is possibly from the port. Can you check sunspot.yml configuration and the real port Sunspot is running on? You should see it when you run Sunspot.

I had similar issue and used to start/stop it, change the port from 8981 to 8982 and it worked.

# c# - Telerik 网格客户端模板

> ID：11724462
> 
> 赞同：4
> 
> 时间：2012-07-30T15:21:46.540
> 
> 标签：c#, asp.net-mvc, telerik, telerik-grid

在我的 MVC 应用程序的 Telerik 网格中显示 DateTime 时，我正在尝试使用 C# 应用一些逻辑，但是在使其正常工作时遇到了一些麻烦。我的第一个问题是我不完全了解 ClientTemplate 调用的工作原理。我也找不到解释它是如何工作的文档。所以，解释它是如何工作的会很有帮助，然后可能特别是我的例子有什么问题：

```
columns.Bound(p => p.SetupDate).ClientTemplate("<#= SetupDate == DateTime.Min || SetupDate == null ? string.empty : SetupDate #>") 
```

**更新：**

我同意了丹尼尔的建议。我只是从 ClientTemplate() 调用这个函数。这是最终代码：

```
// Setup a minDate to mimic C#'s Date.MinDate constant.
var minDate = new Date();
minDate.setFullYear(1, 0, 1);
minDate.setHours(0, 0, 0, 0);

function checkDateWithFormat(d, f)
{
    if (d.getTime() == minDate.getTime())
    {
        return "";
    }
    else
    {
        return d.toString(f);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T15:41:10.373

首先，您可能要确保 SetupDate 自己工作。如果是这样，您可以尝试添加括号。

```
columns.Bound(p => p.SetupDate).ClientTemplate("<#= ((SetupDate == DateTime.Min) || (SetupDate == null)) ? string.Empty : SetupDate #>") 
```

或者您可以尝试使用 if 语句。

```
columns.Bound(p => p.SetupDate).ClientTemplate("<# if ((SetupDate != DateTime.Min) && (SetupDate != null)) { #><#= SetupDate #><# } #>") 
```

**更新** NullReference 的答案是正确的，它说您不能在 ClientTemplate 中使用 c#。所以你不能使用 DateTime.Min 或 string.Empty。

实现相同目的的一种方法是使用 javascript 函数。像这样定义列：

```
columns.Bound(p => p.SetupDate).ClientTemplate("<#= checkDate(SetupDate) #>") 
```

然后添加 javascript 函数 checkDate()。（可能有更好的方法来找到最小值，但如果它是最小值，getMilliseconds 应该是 0。）

```
<script>
  function checkDate(setupDate) {
    if ((setupDate.getMilliseconds() === 0) || (setupDate === null))
      return '';
    else
      return setupDate;
  }
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T15:33:40.423

客户端模板在 javascript 中的客户端上执行，因此您不能使用 C#。任何被“<# #>”包围的内容都对应于模型上的属性。我发现找到这些东西的最佳位置是在[此处](http://demos.telerik.com/aspnet-mvc/razor/grid/templatesclientside)查看 Telerik 的演示页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:20:53.900

客户端模板是将在客户端执行的javascript代码，其结果将转换为字符串并在此位置使用。所以你不能在你的 ClientTemplate 中使用 string.Empty 并且应该使用 '' 代替它。

```
columns.Bound(p => p.SetupDate)
       .ClientTemplate("<#= (SetupDate == DateTime.Min) || (SetupDate == null) ? '' : SetupDate #>") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T19:02:56.127

我会在模型上定义另外几个属性以使 ClientTemplate 更干净：

```
public bool HasSetupDate {
  get {
    return this.SetupDate != DateTime.Min && this.SetupDate != null;
  }
}

public string SetupDate_Str {
  get{
    return this.SetupDate.ToString("MM/dd/yyyy");
  }
} 
```

然后 ClientTemplate 看起来像这样： .ClientTemplate("<#=HasSetupDate ? SetupDate_Str : '' #>")

# excel - CountIfS - 日期子句

> ID：11724463
> 
> 赞同：1
> 
> 时间：2012-07-30T15:21:52.100
> 
> 标签：excel

目前我正在计算一个人的缺勤情况，并且我很想为其添加一个日期过滤器。我有一个工作代码来做到这一点。

```
=COUNTIFS('Old Data'!$A:$A,Tracking!A7,'Old Data'!$B:$B,B5, 'Old Data'!D:D, ">1/1/2012") 
```

上面的代码工作并返回我想要的值。但是，我需要能够轻松地更改多个单元格中的日期和年份。因此，我在 B4 中创建了一个下拉列表，以便轻松完成此操作。

```
=COUNTIFS('Old Data'!$A:$A,Tracking!A6,'Old Data'!$B:$B,B5, 'Old Data'!D:D, >B4) 
```

是我在逻辑上得出的结论......但它不起作用。如果您取出 > 符号，则引用该单元格，但一旦您将其放入，则不再引用该单元格。我现在已经搜索了几个小时，似乎找不到任何可以让它工作的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:36:42.117

在 IF(S) 公式中混合单元格引用和操作数时，您必须连接以构建字符串

```
">"&B4 
```

是你想要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:40:11.397

```
=COUNTIFS('Old Data'!$A:$A,Tracking!A6,'Old Data'!$B:$B,B5, 'Old Data'!D:D, ">" &B4) 
```

发现这篇有用的文章应该可以帮助您解决问题。 [计数函数](http://office.microsoft.com/en-us/excel-help/countifs-function-HA010047494.aspx)

# ruby-on-rails - 根据角色/订阅禁用 Rails 应用程序的功能

> ID：11724464
> 
> 赞同：1
> 
> 时间：2012-07-30T15:21:52.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authorization, roles, subscriptions

是否有任何好的 gems/plugins/extensions 可以根据用户的角色或他们拥有的包订阅有选择地为用户禁用功能？

例如，存在两个包（标准、高级）。标准套餐允许用户每月在应用程序中最多提出 20 个问题，高级套餐允许用户每月提出 50 个问题。因此，功能限制不仅包括套餐订阅，还包括已问问题的数量。

注意：我已经在使用[cancan](https://github.com/ryanb/cancan/)来完成简单的授权任务。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:58:30.200

如果可能的话，我会尽量留在康康。你可能已经在使用设计进行身份验证了？如果是这样，我会尝试修改 cancan。如果该用户是超级用户（系统管理员）或高级用户或标准用户的基本情况，您可以拥有这三件事的角色。

如果用户可以注册不止一件事，我会考虑创建会员/产品注册类（user_id、package_id、membership_level_id）或向用户添加范围/条件/标志，以查看谁可以从“什么”开始做什么先交合格用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:49:32.580

看看`Rolify`。这是一个很好的 gem，可以很好地集成`CanCan`资源范围和授权。
关于如何一起使用它们的文档教程：
[https ://github.com/EppO/rolify/wiki/Tutorial](https://github.com/EppO/rolify/wiki/Tutorial)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:31:07.117

您可以使用 cancan 定义可继承的角色。这将允许您创建您的两个角色，标准和高级，并让高级继承标准和定义您自己的所有能力。

[https://github.com/ryanb/cancan/wiki/Role-Based-Authorization](https://github.com/ryanb/cancan/wiki/Role-Based-Authorization)

# jsf-2 - facelat模板JSF2.0中链接上的方法

> ID：11724467
> 
> 赞同：0
> 
> 时间：2012-07-30T15:22:04.063
> 
> 标签：jsf-2, hyperlink

当我在我的 facelet 模板中使用此标记时，我使用 JSF2.0

```
<li><a class="identifiant" href="/impression/faces/vues_utilisateur/#{userController.deconnecter}.xhtml"><h:graphicImage library="images" name="facebook.png" /></a></li> 
```

在上面的标签之后对这个 managedBean“userController”的所有调用：我没有结果我没有点击这个链接，但是如果我调用另一个 managedBean：我有一个结果

但是当我通过以下方式更改此行时：

```
<li><a class="identifiant" href="/impression/faces/vues_utilisateur/login.xhtml"><h:graphicImage library="images" name="facebook.png" /></a></li> 
```

它有效，但我想使用第一个，因为我想在用户按下此链接时执行一个方法，我不会使用 h:commandlink 因为列表的 css 不能正常工作你知道吗谢谢

# java - ImageJ API：在我自己的代码中使用过滤器

> ID：11724468
> 
> 赞同：0
> 
> 时间：2012-07-30T15:22:04.753
> 
> 标签：java, api, image-processing, imagej

我想使用 ImageJ API 过滤图像。ImageJ 库已正确连接到我的项目。

现在我想使用 API 中的平均过滤器处理图像。这是如何运作的？

```
public Image filterMyImage(ImagePlus imagePlus) 
{
        // IMAGEPLUS FILTERING PROCESS HERE

        return image;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:41:02.920

我假设“平均滤波器”是指具有 3x3 内核的均值滤波器，在这种情况下你可以这样做：

```
ImageProcessor ip = imagePlus.getProcessor();
ip.smooth();
return ip.getBufferedImage(); 
```

该`smooth`方法的文档在[这里](http://rsbweb.nih.gov/ij/developer/api/ij/process/ImageProcessor.html#smooth%28%29)。如果您想在 3x3 内核上使用中值滤波器，则可以使用[方法`medianFilter`](http://rsbweb.nih.gov/ij/developer/api/ij/process/ImageProcessor.html#medianFilter%28%29).

# wordpress - 永久链接：建立在 Joomla 网站上的 Wordpress 博客

> ID：11724472
> 
> 赞同：-1
> 
> 时间：2012-07-30T15:22:13.080
> 
> 标签：wordpress, .htaccess, redirect, joomla, permalinks

提前谢谢你，这是我的情况：

我的网站是在 www.whatever.com 域上的 joomla 中构建的，该域上的“搜索引擎友好 URL”和使用“Apache mod_rewrite”并且处于打开状态

现在，我在 Wordpress 上建立一个博客，放在 www.whatever.com/blog

如果我直接写 url，博客就会出现，没有任何错误，但我在永久链接和重定向方面遇到了一些问题，因为 wordpress 博客中的每一篇文章都会让我看到类似 www.whatever.com/?p=1 的内容，并且只显示主要的 Joomla页面而不是 wordpress 文章。

我尝试了一些我在互联网上阅读的选项，但似乎无法使用 htaccess 文件进行此操作。我不知道如何编写它以及将它放在哪里以保持 joomla 的原样和博客文章出现作为 www.whatever.com/wordpress-article-name

提前感谢您，感谢所有帮助或线索。

佩德罗·特谢拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T05:09:09.380

那么 mod_rewrite 实际上是在您的网站托管的服务器上。

我会说这需要确认。确保你也经历过这个：http: [//codex.wordpress.org/Using_Permalinks](http://codex.wordpress.org/Using_Permalinks)

一些 ISP 似乎不允许这些：

```
The FollowSymLinks option enabled
FileInfo directives allowed 
```

还要确保 /blog 文件夹中的 .htaccess 文件具有以下内容：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L]
</IfModule>

# END WordPress 
```

# xml - XQuery 3 - 获取节点路径的字符串表示

> ID：11724474
> 
> 赞同：0
> 
> 时间：2012-07-30T15:22:28.057
> 
> 标签：xml, xquery

我有一个接受节点作为参数的函数。我想获取路径的字符串表示**是否存在**。

```
declare function mylib:getString($node) as xs:string {
    return /*the string representation of the node's path*/
}; 
```

和示例调用：

```
mylib:getString($xmlMessage/some/dummy/element); 
```

上面的例子应该返回`/some/dummy/element`字符串。我已经尝试了两种解决方案：

1.  函数 path()（例如 /some/node/path()）。
2.  FunctX 库中的函数[path-to-node(...)但没有成功。](http://www.xqueryfunctions.com/xq/functx_path-to-node.html)

不幸的是，这两个函数都只能在现有节点上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:26:55.977

如果`/some/dummy/element`什么都不返回，则无法找出它返回的具体内容。如果路径表达式没有选择任何内容，则结果是一个空序列，并且您不能将函数应用于空序列来确定空序列的来源。

# c# - 正则表达式替换字符串

> ID：11724479
> 
> 赞同：4
> 
> 时间：2012-07-30T15:22:44.627
> 
> 标签：c#, regex, winforms

我正在寻找 regex repalce 命令来替换特定的字符串。假设我希望在 HTML 代码`ss`中替换文本。`<u>ss</u>`所以如果我的输入是 `<p style="">ss</p>`我想看到输出`<p style=""><u>ss</u></p>`

但我不想要这样的词

`<b>Issues</b>`被替换`<b>I<u>ss</u>es</b>`

所以我需要检查它是一个完整的单词还是单词的一部分。

我想要 regex.replace 为

`">ss<"`&`> ss <`

对此有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:25:50.130

撇开正则表达式不是与 HTML 一起使用的最佳工具这一观察不谈，您可以使用`\bss\b`表达式来确保在您匹配的字符串之前和之后有一个单词边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:24:25.343

更好的解决方案是使用 HTML 解析器库，解析 html 并替换标签。结帐[HTML 敏捷包](http://htmlagilitypack.codeplex.com/)

话虽如此，如果您仍然坚持使用正则表达式，因为您知道您的数据是特定格式的，那么遵循正则表达式应该足以满足您的需要。

```
[>]\s?ss\s?[<] 
```

*   [>] 是关闭标签
*   [<] 是开放标签
*   \s 是可选的空白
*   ss 是模式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T15:24:44.493

您不应该使用正则表达式来解析 html，正则表达式是为常规语言设计的，其中 HTML 是上下文无关的。

我强烈建议使用[HTML Dom Parser](http://htmlagilitypack.codeplex.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T15:43:34.020

像这样的简单解决方案怎么样：

```
public string ReplaceHtmlTagContent(string value, string search) {
    return value.Replace(">" + search + "<", "><u>" + replace + "</u><")
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T15:31:59.377

```
 string input = "<p style="">ss</p>  <b>Issues</b>";
  string pattern = "(?<=\>)ss(?=\<)";
  string replacement = "<u>ss</u>";
  Regex rgx = new Regex(pattern);
  string result = rgx.Replace(input, replacement);
  Console.WriteLine("Original String: {0}", input);
  Console.WriteLine("Replacement String: {0}", result); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T15:35:20.407

不确定我是否完全理解您在这里想要什么，但这有什么问题：

```
dataString = dataString.Replace(">ss<", "><u>ss</u><").Replace("> ss <", "><u> ss </u><"); 
```

# java - 在 JAVA 中创建换行符

> ID：11724482
> 
> 赞同：2
> 
> 时间：2012-07-30T15:23:00.570
> 
> 标签：java, youtube-api

如果我做对了，或者我遗漏了一些东西，我不会这样做。当我执行以下操作以在我的 YouTube 描述中创建一个新行时，它们并没有正确显示。

```
private static final String newLine = System.getProperty("line.separator");
mg.setDescription(new MediaDescription());
mg.getDescription().setHtmlContent("This is line one." + newLine + "This is line two." + newLine + newLine + "This is line three."); 
```

**这就是它在 YouTube 描述中的显示方式**

> 这是第一行。
> 这是第二行。这是
> 第三行。

*什么时候应该这样出来。*

> 这是第一行。
> 这是第二行。
> 
> 这是第三行。

我有点认为我在这里没有做某事；如果我没有得到正确的布局作为我的最终结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:24:23.223

添加换行符实际上不会在 HTML 中创建换行符。相反，您需要使用`<br />`标签。

# asp.net-mvc-3 - 将视图数据传递给创建表单 MVC3

> ID：11724483
> 
> 赞同：0
> 
> 时间：2012-07-30T15:23:01.847
> 
> 标签：asp.net-mvc-3, viewdata

我将 id 从一个控制器 (Index) 传递到另一个控制器 (Details)，并添加了一个 ViewData 语句以将数据保存在详细信息视图中，并将其转发到另一个控制器上的视图。

```
@Html.EditorFor(model => model.PersonID) 
```

如何修改此语句以输入 ViewData 元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:25:11.550

你不能。诸如 EditorFor 之类的强类型助手仅适用于强类型。ViewBag 是弱类型。所以不要使用 ViewBag。请改用视图模型。

# php - PHP 的 preg_match

> ID：11724486
> 
> 赞同：1
> 
> 时间：2012-07-30T15:23:04.317
> 
> 标签：php, preg-match

我试图只从字符串中取出两个括号 ([ ]) 之间的数字。

这是我的代码：

```
$str = "[#123456] Some text";
preg_match('/^[#(?P<number>\w+)]/', $string, $matches);

// Returns 123456
echo $matches['number']; 
```

有人能帮我解决这个问题吗？

编辑：我澄清了我的问题。我只需要得到括号之间的数字。到目前为止的回复会给我整个字符串中的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:27:45.340

如果您需要数字以及它们周围的大括号，您可以使用这个正则表达式：

```
preg_match('/\[#\d+\]/U', $str, $matches);
echo $matches[0]; 
```

否则，使用

```
preg_match('/\[#(\d+)\]/U', $str, $matches);
echo $matches[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:24:38.253

用这个：

```
preg_match('/[0-9]*/', $string, $matches);
var_dump($matches); 
```

有关正则表达式的更多信息，[请单击此处](http://weblogtoolscollection.com/regex/regex.php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:27:05.193

或者...（编辑代码以显示为代码）

```
$str = preg_replace('/[^0-9]/', '', $str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T15:34:07.067

这将仅在此上下文中返回数字 [#....]

```
$str = "[#123456] Some text";
preg_match('/\[#(\d+)\]/', $str, $matches);
var_dump($matches);
echo $matches[1]; // 123456 
```

# iphone - 使用窗口而不是视图？

> ID：11724493
> 
> 赞同：0
> 
> 时间：2012-07-30T15:23:39.663
> 
> 标签：iphone, objective-c, xcode

只是想知道，（我知道它很糟糕）但为什么它很糟糕我不知道？

与其使用许多视图，为什么我们不能只使用窗口来代替？有什么缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:32:02.300

A`UIWindow`是包含根视图控制器的内容。通过使用 a`UIWindow`而不是 a `UIView`，你会弄乱整个层次结构。它会从`UIWindow -> UIViewController -> UIView`到 just`UIWindow`或可能`UIWindow -> UIViewController -> UIWindow`？还要记住，一个视图控制器可以管理多个视图，并且一个视图可以有任意数量的子视图。出于这个原因，通常只有一个根视图控制器可以根据需要将控制权传递给其他视图控制器。如果你使用`UIWindow`它来代替`UIView`你会有很多根视图控制器......希望你能明白为什么这是不好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:31:01.767

根据正确的软件界面设计，使用多个窗口会破坏用户的“流程”，从而降低软件的效率和用户的乐趣。尽管设计软件将多个窗口是可行的，但它被广泛认为是不好的做法。

利用多个视图以及选项卡视图和转换等内容，可以使应用程序更加直观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:01:31.860

如上所述，使用视图可以增加软件用户的使用体验，但是有些应用程序需要使用窗口，例如 iCall，其中每个聊天会话都在单独的聊天窗口中。

编辑：嗯...刚才看到您的问题是关于 iPhone 的，在这种情况下，您可以对不同的聊天会话使用相同的视图。这是因为在 iPhone 上，您通常没有空间看到更多...

# c - 打印到缓冲区或文件重用代码

> ID：11724497
> 
> 赞同：6
> 
> 时间：2012-07-30T15:23:52.410
> 
> 标签：c

我想定义两个函数 fdump 和 sdump，在每种情况下使用 fprintf 和 sprintf 将结构转储到文件或缓冲区。

有没有办法在不重复两个函数中的代码的情况下定义它们？一种解决方案可以是定义 sdump，然后基于它定义 fdump，ei：

```
void fdump(FILE* f, struct mystruct* param) {
  char buffer[MAX];
  sdump(buffer, MAX, param);
  fprint(f, "%s", buffer);
} 
```

但该解决方案浪费和中间缓冲。尽管 fprintf 可能也是如此。其他解决方案可能是通过预处理宏，但它看起来相当复杂。请问，有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:29:05.387

您可以使用`fmemopen`为您提供指向一块内存的文件句柄，然后只编写一个采用文件句柄的函数版本：

```
#include <stdio.h>

void foo(FILE *fh) {
  fprintf(fh, "test\n");
}

int main() {
  foo(stderr);
  char str[100];
  FILE *mem = fmemopen(str, sizeof str, "w");
  foo(mem);
  fclose(mem);
  fprintf(stdout, "%s", str);
  return 0;
} 
```

# file-upload - IIS7.5中的自定义404.13错误，没有上传整个文件

> ID：11724498
> 
> 赞同：2
> 
> 时间：2012-07-30T15:24:02.507
> 
> 标签：file-upload, error-handling, iis-7.5

使用运行 MVC3 的 IIS7.5，我将 web.config 中的文件上传大小限制为 5MB

```
<system.web>
  <httpRuntime maxRequestLength="5120" executionTimeout="180" />
</system.web>

<security>
  <requestFiltering>
    <requestLimits maxAllowedContentLength="5242880"/>
  </requestFiltering>
</security> 
```

这很有效，当有人尝试上传大于 5MB 的文件时，会显示 404 错误页面。

然后，我在 IIS 中为错误页面下的站点设置了一个自定义错误页面，并添加了用于此错误的默认 C:\inetpub\custerr\en-US\404-13.htm 页面。现在，当文件大小超过 5MB 时会显示此页面，但在显示页面之前，会上传整个文件。

有没有解决的办法？如果我删除自定义 404.13 错误，旧的 404 页面是即时的，看起来甚至没有上传任何内容。这就是我想要的自定义错误页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T02:20:12.797

不确定您是否找到了解决方案，但您可以在服务器上使用 IIS 级别过滤，如果文件太大而无法上传，它似乎会立即返回。

看看这个

[http://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits](http://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits)

# javascript - 为什么我看不到正确的 google javascript 地图？

> ID：11724506
> 
> 赞同：0
> 
> 时间：2012-07-30T15:24:40.397
> 
> 标签：javascript, google-maps, google-maps-api-3

我在我的网络应用程序中使用 google maps javascript api 来显示地图。以下是显示地图的代码：

```
 var map;
 var jsMap;

 $(function() {

      // doing stuff here 

      // showing map
      $('#map_div_1').append('<div id="map_1" style="width:640px; height:427px; margin-left:auto; margin-right:auto"></div>');
      var centerLatLng = new google.maps.LatLng(centerlat, centerlong);
      var myOptions = {
            center: centerLatLng,
            zoom: 17,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            draggable: true
        };

       map = new google.maps.Map(document.getElementById("map_1"), myOptions);

          // markerArray is initialized with values in beginning            
             var triangleCoords = new Array();

            for(var x=0;x<markerArray.length;x++){
                triangleCoords.push(new google.maps.LatLng(markerArray[x].latitude, markerArray[x].longitude));
                        }

            jsMap = new google.maps.Polygon({
                paths: triangleCoords,
                strokeColor: "#FF0000",
                strokeOpacity: 0.8,
                strokeWeight: 2,
                fillColor: "#FF0000",
                fillOpacity: 0.35
            });

            jsMap.setMap(map);

      // if this button will be clicked then i want to make another javascript google map in another div map_2
      $('#show_2nd_map').unbind("click");
      $('#show_2nd_map').bind('click', function(){
                // doing stuff
                  jsMap.setMap(null);
              jsMap = null;
              map = null;
               // showing 2nd map

               $('#map_div_2').append('<div id="map_2" style="width:640px; height:427px; margin-left:auto; margin-right:auto"></div>');

            var centerLatLng1 = new google.maps.LatLng(centerlat2, centerlong2);

            var myOptions = {
            center: centerLatLng1,
            zoom: 17,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            draggable: true
        };

         map = new google.maps.Map(document.getElementById("map_2"), myOptions);

         var triangleCoords2 = new Array();

         for(var x=0;x<markerArray2.length;x++){
                triangleCoords2.push(new google.maps.LatLng(markerArray2[x].latitude, markerArray2[x].longitude));
                        }

         jsMap = new google.maps.Polygon({
            paths: triangleCoords2,
            strokeColor: "#FF0000",
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: "#FF0000",
            fillOpacity: 0.35
         });

      jsMap.setMap(map);

      });
   }); 
```

第一张地图创建得很好。但是，当我单击 show_2nd_map 按钮时，会创建地图，但无法正确显示。我附上两个屏幕截图。

![第一张地图是这样的，没错](../Images/0eea4616e2de72c896b4cec8cd006f7b.png)

![第二张图是这样的，错了](../Images/6a974095a003c180858aa2d735214741.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:29:42.017

谷歌根据地图画布元素计算地图的大小，因此它需要在地图初始化之前画布（div）是可见的。有两个走动：

1.  不要隐藏你的画布，只需将它们放在其他地方（绝对位置和左侧：-99999，顶部：-99999）。

2.  重新计算地图的宽度和高度`google.maps.event.trigger(map, "resize");`

# uiimageview - 为 UIImageVIew 添加圆角并显示阴影效果

> ID：11724517
> 
> 赞同：6
> 
> 时间：2012-07-30T15:25:53.797
> 
> 标签：uiimageview, calayer, shadow

我和这里的链接有同样的问题： [Can't add a corner radius and a shadow](https://stackoverflow.com/questions/3316424/cant-add-a-corner-radius-and-a-shadow)

如果我设置 maskToBounds = YES，我会得到圆角，但没有阴影 如果我设置 maskToBounds = NO，我会得到阴影，但没有圆角。

然后我按照上面那个链接中的说明，设置 maskToBounds = NO，“而是设置角半径并用圆角矩形设置阴影的贝塞尔路径。保持两者的半径相同”。但是，我没有得到圆角，也没有得到任何阴影！（即没有阴影的方形图像）你能帮我解决这个问题吗？我不知道我做错了什么。提前致谢。

```
self.userImageView.backgroundColor = [UIColor redColor]; 
self.userImageView.clipsToBounds = NO; 
self.userImageView.contentMode = UIViewContentModeCenter; 
self.userImageView.layer.masksToBounds = NO; 

self.userImageView.layer.borderWidth = 1; 
self.userImageView.layer.borderColor = [[UIColor grayColor] CGColor]; 

self.userImageView.layer.shadowOpacity = 1; 
self.userImageView.layer.shadowColor = [[UIColor blackColor] CGColor]; 
self.userImageView.layer.shadowRadius = 8.0f; 
self.userImageView.layer.shadowOffset = CGSizeMake(-3, 0);
self.userImageView.layer.shouldRasterize = YES; 

self.userImageView.layer.shadowPath = [[UIBezierPath bezierPathWithRoundedRect:[self.userImageView bounds] cornerRadius:10.0f] CGPath]; 

[self addSubview:self.userImageView]; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-19T17:32:28.820

不幸的是，我不认为 UIImageView 同时支持圆角和阴影。

但是，您可以在 UIImageView 的超级视图中制作阴影。

```
CGFloat cornerRadius = 3.0

UIView *container = [[UIView alloc] initWithFrame:aRect];
container.layer.shadowOffset = CGSizeMake(0, 0);
container.layer.shadowOpacity = 0.8;
container.layer.shadowRadius = 5.0;
container.layer.shadowColor = [UIColor redColor].CGColor;
container.layer.shadowPath = [[UIBezierPath bezierPathWithRoundedRect:container.bounds cornerRadius:cornerRadius] CGPath];

self.userImageView.layer.cornerRadius = cornerRadius;
self.userImageView.layer.masksToBounds = YES;
self.userImageView.frame = container.bounds;
[container addSubview:self.userImageView];
[self addSubview:container]; 
```

# github - Github for Windows 安装出现错误“无法检索应用程序文件，文件在部署中损坏”

> ID：11724519
> 
> 赞同：7
> 
> 时间：2012-07-30T15:25:54.867
> 
> 标签：github

我正在尝试为 Windows 安装 Github。在下载 30.6MB 数据时，我收到以下错误：

> 无法检索应用程序文件，文件在部署中损坏”

我已经尝试过多次，但下载始终是 30.6MB 数据，并且总是显示此错误。我很困惑。

我在下面提供了更多详细信息：

> 平台版本信息 Windows：6.1.7600.0 (Win32NT) 公共语言运行时：4.0.30319.269 System.Deployment.dll：4.0.30319.1 (RTMRel.030319-0100) clr.dll：4.0.30319.269 (RTMGDR.030319-2600) df.dll dll : 4.0.30319.1 (RTMRel.030319-0100) dfshim.dll : 4.0.31106.0 (Main.031106-0000)
> 
> 来源 部署网址： http: [//github-windows.s3.amazonaws.com/GitHub.application](http://github-windows.s3.amazonaws.com/GitHub.application) 服务器：AmazonS3 应用程序网址： http: [//github-windows.s3.amazonaws.com/Application%20Files/GitHub_1_0_20_2/GitHub.exe .manifest](http://github-windows.s3.amazonaws.com/Application%20Files/GitHub_1_0_20_2/GitHub.exe.manifest) 服务器：AmazonS3
> 
> 身份部署身份：GitHub.application，版本=1.0.20.2，文化=中性，PublicKeyToken=8f45a2159c87c850，处理器架构=x86 应用程序身份：GitHub.exe，版本=1.0.20.2，文化=中性，PublicKeyToken=8f45a2159c87c850，处理器架构=x86，类型=win32
> 
> 应用程序摘要 * 可安装的应用程序。* 信任 url 参数已设置。错误摘要 下面是错误摘要，这些错误的详细信息在日志后面列出。* 激活[http://github-windows.s3.amazonaws.com/GitHub.application](http://github-windows.s3.amazonaws.com/GitHub.application)导致异常。检测到以下失败消息： + 从文件 Markdown.dll 加载清单时发生异常：清单可能无效或无法打开文件。+ 无法从组件文件加载内部清单。
> 
> 组件存储事务失败摘要未检测到事务错误。
> 
> 警告 此操作期间没有警告。
> 
> 操作进度状态 * [2012/7/30 22:52:00] : [http://github-windows.s3.amazonaws.com/GitHub.application](http://github-windows.s3.amazonaws.com/GitHub.application)的激活已经开始。* [2012/7/30 22:52:02]：部署清单的处理已成功完成。* [2012/7/30 22:52:02] : 应用程序的安装已经开始。* [2012/7/30 22:52:03] : 应用清单处理已成功完成。* [2012/7/30 22:52:08]：找到兼容的运行时版本 4.0.30319。* [2012/7/30 22:52:09] : 平台信任检测请求完成。
> 
> 错误详细信息 在此操作期间检测到以下错误。* [2012/7/30 23:01:14] System.Deployment.Application.InvalidDeploymentException (ManifestLoad) - 从文件 Markdown.dll 加载清单时发生异常：清单可能无效或无法打开文件。- 来源：System.Deployment - 堆栈跟踪：在 System.Deployment.Application.Manifest.AssemblyManifest.LoadFromInternalManifestFile(String filePath) 在 System.Deployment 的 System.Deployment.Application.Manifest.AssemblyManifest.ManifestLoadExceptionHelper(Exception exception, String filePath)。 Application.Manifest.AssemblyManifest..ctor(String filePath) at System.Deployment.Application.DownloadManager.ProcessDownloadedFile(Object sender,
> 
> 组件商店交易详情 没有可用的交易信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:46:50.303

您的下载只是损坏了。请再试一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T06:05:29.287

我通过切换浏览器并再次下载解决了这个问题。我用 IE explore 来下载它。现在效果很好。您可以在问题的最后一个答案中找到对此[的讨论。](https://stackoverflow.com/questions/13490229/github-for-windows-installation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-06T00:12:43.030

在这里复活一个老问题，因为我认为最近有些人可能会因为不同的原因遇到同样的错误。所以很可能不是下载只是损坏了。我遇到了同样的问题，并从许多来源下载以进行审查，无论使用何种网络，我都会遇到同样的错误。这可能是您的 .NET 框架的问题。经过一些研究和经验测试，这就是我发现的。

.NET 4.5 取代了 .NET 4.0，但它不包含 .NET 4.0 作为包的一部分。安装 4.5 时，它会覆盖它与 4.0 共享的所有二进制文件，但不会填充 4.0 中可能缺少的任何二进制文件。

我从一台全新的机器开始。我安装了 .NET 4.5.1，尝试在 github 上安装 Windows 并收到您的错误。我卸载了 .NET 4.5.1，安装了 4.0，然后安装了 4.5.1，并成功地重新尝试了 github 进行 windows 安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-14T20:21:25.227

我的工作场所防火墙设备遇到了这个问题，这是一个检查点防火墙。我们也有一个微软域。

我通过更改 Windows IE 连接设置来解决它，因此它直接连接到互联网而不是自动配置脚本，或自动检测设置或代理。

取消选中所有，然后按确定，（您也可以尝试使用加密的外部已知良好代理 https）

[然后将这个http://github-windows.s3.amazonaws.com/GitHub.application](http://github-windows.s3.amazonaws.com/GitHub.application)粘贴到 url 中，不要重启 IE。（某些工作场所在 ie 程序启动时重新配置 ie）下载器将使用 IE 的当前 LAN 设置。当我的下载像发条一样停止在 34 MB 时，这对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-02T19:42:51.053

也添加这个问题，但在我的情况下，它只是防病毒软件阻止它。在更新期间禁用了 AV 并且它工作。

AV 阻止了这个文件`GitHub.UI.dll`，并设法通过详细的安装日志找到它。日志中的确切消息是

```
File GitHub.UI.dll is not a valid Portable Executable (PE) file. 
```

# iphone - 使用 cocos2d-iphone 在图像 iphone 上绘图

> ID：11724520
> 
> 赞同：0
> 
> 时间：2012-07-30T15:26:01.237
> 
> 标签：iphone, ios, cocos2d-iphone

我正在*使用 cocos2d-iphone 为 ipad 创建绘图应用程序，* 它使用*CCRenderTexture*进行绘图。我可以截取我的绘图并将其保存到应用程序文档目录。

但现在我想加载它作为我的背景图像来绘制它，并且可以更改图像，所以基本上我想将我的图像与我的渲染纹理合并我尝试[了这个](https://stackoverflow.com/questions/1954936/cocos2d-adding-a-background-image-to-a-layer) 但图像出现在我的渲染纹理下方（z = -1 ），我无法弄清楚。有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:17:32.977

所以这就是我解决问题的方法

步骤 1> 创建了我的 RenderTexture

```
renderTexture = [[CCRendertexture alloc]initWithWidth:self.contentSize.width height:self.contentSize.height pixelFormat:kCCTexture2DPixelFormat_RGBA8888];
renderTexture.anchorPoint = ccp(0,0);
renderTexture.position = ccp(width*0.5,height*0.5f); 
```

步骤 2> 使用背景图像创建 CCSprite

```
CCSprite *bgImage = [CCSprite spriteWithCGImage:myImage.CGImage key:imgkey];
bgImage.position = ccp(width*0.5f,height*o.5f); 
```

Step3> 这是其中的重要部分

```
[renderTexture begin];
[bgImage visit];
[renderTexture end];

[self addChild:renderTexture]; // added to my layer as child 
```

本教程帮助了我[http://www.raywenderlich.com/4421/how-to-mask-a-sprite-with-cocos2d-1-0](http://www.raywenderlich.com/4421/how-to-mask-a-sprite-with-cocos2d-1-0)

我希望这对某人有帮助

# kineticjs - 如何在 Kinetic JS 中指定形状的中心

> ID：11724521
> 
> 赞同：1
> 
> 时间：2012-07-30T15:26:01.350
> 
> 标签：kineticjs

我创建了一个饼图并使用 drawFunc 方法在其中添加了渐变，我想将该饼图移动到 Kinetic JS 舞台的中心，但它会在其他地方旋转。我的代码如下：

```
 var gradientPie = new Kinetic.Shape({

                    drawFunc: function(context) {
                        var startingAngle = (60 * Math.PI)/180;
                        var arcSize = (60 * Math.PI)/180;
                        var endingAngle = startingAngle + arcSize;
                        context.beginPath();
                        context.moveTo(500, 375);
                        context.arc(500, 375, 250,
                                startingAngle, endingAngle, false);
                        context.closePath();

                        var gradient = context.createLinearGradient(500, 375, 500+250, 375+250);

                        gradient.addColorStop(0, '#fff');
                        gradient.addColorStop(0.25, '#99FF99');
                        gradient.addColorStop(0.5, '#00CC33');
                        gradient.addColorStop(1, '#009900');
                        context.fillStyle = gradient;

                        context.fill();
                        this.fill(context);
                        this.stroke(context);
                    },
                    stroke: "#006400",
                    strokeWidth: 1

                });

                layer.add(gradientPie);

                /*
                 * leave center point positioned
                 * at the default which is the top left
                 * corner of the rectangle
                 */
                var blueRect = new Kinetic.Rect({
                    x: 500,
                    y: 375,
                    width: 100,
                    height: 50,
                    fill: "#00D2FF",
                    stroke: "black",
                    strokeWidth: 4
                });
                layer.add(blueRect);

                stage.add(layer);

                // one revolution per 4 seconds
                var angularSpeed = Math.PI / 2;
                stage.onFrame(function(frame) {
                    var angleDiff = frame.timeDiff * angularSpeed / 1000;
                    gradientPie.setOffset(500, 375);
                    gradientPie.rotate(angleDiff);
                    blueRect.rotate(angleDiff);
                    layer.draw();
                }); 
```

我能够移动蓝色矩形，同样我想在相同的中心点移动我的梯度派，但它不会移动。谢谢，任何帮助将不胜感激。

# c# - 对引用和命名空间感到困惑

> ID：11724523
> 
> 赞同：0
> 
> 时间：2012-07-30T15:26:16.640
> 
> 标签：c#

我创建了一个新的类库（DLL），当我试图从另一个程序集或库中的 DLL 创建一个类的对象时，它不起作用，我想一定是关于命名空间或引用问题，也许两者都是因为有不同的命名空间。

我应该是其他库名称空间，例如在其他库类的开头使用名称空间，以便能够在 DLL 中创建此类的对象吗？

我测试了右键单击其他库并选择添加对这个新 DLL 的引用，但这不起作用。一些帮助是preciated。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:29:30.740

您需要将其添加到引用中，然后按如下方式访问它：

```
 using MyLibrary 
```

这应该就是你所需要的。

然后您将按如下方式访问这些方法：

```
 var result = new MyLibrary.MyMethod() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:49:10.670

其他答案不正确，说您必须使用`using`. 您根本*不需要*使用`using`语句。另一方面，参考是必需的。

例如，假设您创建了一个名为 的程序集`TwentyNine.dll`，包括以下类型声明：

```
namespace Kreativ.Application.One
{
    public class SomeClass
    {
        public static int GetSomeResult()
        {
            return 863;
        }
    }
 } 
```

现在，您正在创建一个新应用程序，并且您想要调用 GetSomeResult()。 *您必须在新项目中添加对 TwentyNine.dll 的引用。*

最常见的是，您会这样调用该方法：

```
using Kreativ.Application.One;
using System;

namespace Kreativ.Application.Two
{
    public class MainClass
    {
        public static void Main()
        {
            int i = SomeClass.GetSomeResult();
            Console.WriteLine(i);
        }
    }
} 
```

但是您可以在不使用的情况下执行此操作`using`：

```
namespace Kreativ.Application.Two
{
    public class MainClass
    {
        public static void Main()
        {
            int i = Kreativ.Application.One.SomeClass.GetSomeResult();
            System.Console.WriteLine(i);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T15:29:02.643

> 我应该是其他库名称空间，例如在其他库类的开头使用名称空间，以便能够在 DLL 中创建此类的对象吗？

是的，只要您添加对该程序集 (DLL) 的引用，并且您的库中的类型是*public*。

> 我测试了右键单击其他库并选择添加对这个新 DLL 的引用，但这不起作用。一些帮助是preciated。

为了使用库中定义的类型，这是绝对必要的。引用是允许编译器查找和使用类型的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T15:29:19.570

您必须首先添加引用，然后在您使用它的任何文件中，您需要`using`在文件顶部添加指令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T15:30:43.677

*   首先，您需要添加对库的引用（我想您是这样做的）

但这还不够

*   您需要标记您使用的*类型*的命名空间（库中可能有多个命名空间）或文件顶部

    使用 MyLibraryNameSpace；

或在代码行中，例如

```
MyLibraryNameSpace.MyLibType t = new MyLibraryNameSpace.MyLibType(); 
```

# xml - 从 Windows CE 写入 SD 卡失败？

> ID：11724524
> 
> 赞同：1
> 
> 时间：2012-07-30T15:26:22.160
> 
> 标签：xml, windows-mobile-6.5

我正在使用 Windows-CE 将 XML 文件写入 SD 卡`Dataset.WriteXML()`。大多数情况下它都能正确通过，但有时我会遇到错误：

```
 Error Time:7/25/12 1:17:07 PM Message:  Details:
System.IO.IOException: IOException
   at System.IO.__Error.WinIOError(Int32 errorCode, String str)
   at System.IO.FileStream.WriteCore(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.FileStream.Write(Byte[] array, Int32 offset, Int32 count)
   at System.IO.StreamWriter.Flush(Boolean flushStream, Boolean flushEncoder)
   at System.IO.StreamWriter.Write(Char value)
   at System.Xml.XmlTextWriter.InternalWriteEndElement(Boolean longFormat)
   at System.Xml.XmlTextWriter.WriteEndElement()
   at System.Data.DataTextWriter.WriteEndElement()
   at System.Data.XmlDataTreeWriter.XmlDataRowWriter(DataRow row, String    encodedTableName)
   at System.Data.XmlDataTreeWriter.Save(XmlWriter xw, Boolean writeSchema)
   at System.Data.DataSet.WriteXml(String fileName, XmlWriteMode mode) 
```

# configuration - Fluent NHibernate 中的 DynamicUpdate 不起作用

> ID：11724526
> 
> 赞同：0
> 
> 时间：2012-07-30T15:26:30.927
> 
> 标签：configuration, fluent-nhibernate, fluent-nhibernate-mapping

在我的应用程序中，有很多情况下我必须更新数据库中实体的一个属性。在互联网上，我读到`DynamicUpdate()`应该改变 Fluent NHibernate 的行为，所以它只会更新属性！= null

所以我这样写了我的映射：

```
public class Building
{
    public virtual Guid Id { get; set; }

    public virtual int ConstructionPhase { get; set; }

    public virtual string Name { get; set; }

    [some other properties]
}

public class BuildingMap : ClassMap<Building>, IMappedEntity
    {
        public BuildingMap()
        {
            DynamicUpdate();
            SelectBeforeUpdate();

            Id(x => x.Id);
            Map(x => x.ConstructionPhase);
            Map(x => x.Name);
            [some other properties]
        }
    } 
```

但是，如果我尝试更新实体并将`name`属性留空，则会在数据库中删除该名称。

我是否必须以其他方式配置 Fluent NHibernate，或者有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:39:12.433

`DynamicUpdate()`将指示 NHibernate 仅保存**已更改**的属性，因此加载对象、更改单个属性和刷新会话将仅更新已更改的列。

更新：更新单个属性而不去数据库使用 hql

```
var affectedRows = session.CreateQuery("UPDATE MyEntity SET SomeProperty=:newValue WHERE Id=:id")
    .SetParameter("newValue", value)
    .SetParameter("id", id)
    .ExecuteUpdate(); 
```

# objective-c - iOS 中的 XOR 文件加密

> ID：11724527
> 
> 赞同：7
> 
> 时间：2012-07-30T15:26:36.157
> 
> 标签：objective-c, ios, nsfilemanager, xor

我正在为 iOS 开发一个 ePub 阅读器。我从服务器下载的 ePub 文件是使用 XOR 算法加密的。我将这些文件以 .xlsx 格式获取，并带有解密它的密钥。我正在解密文件并将其加载到阅读器，如下所示：

1.  从下载的目录将文件加载为 NSData。
2.  使用密钥解密数据。
3.  将解密后的数据写入临时目录。
4.  将文件从临时目录加载到阅读器。

我正在使用 AePubReader 加载文件。

下面是解密代码：

```
- (NSData *)obfuscate:(NSData *)data withKey:(NSString *)key
{
     NSMutableData *result = [data mutableCopy];

    // Get pointer to data to obfuscate
    char *dataPtr = (char *) [result mutableBytes];

    // Get pointer to key data
    char *keyData = (char *) [[key dataUsingEncoding:NSUTF8StringEncoding] bytes];

    // Points to each char in sequence in the key
    char *keyPtr = keyData;
    int keyIndex = 0;

    // For each character in data, xor with current value in key
    for (int x = 0; x < [data length]; x++) 
    {
        // Replace current character in data with 
        // current character xor'd with current key value.
        // Bump each pointer to the next character
        *dataPtr = *dataPtr++ ^ *keyPtr++; 

        // If at end of key data, reset count and 
        // set key pointer back to start of key value
        if (++keyIndex == [key length])
            keyIndex = 0, keyPtr = keyData;
    }

    return result;
} 
```

但是当我尝试将解密的文件加载到阅读器时，我收到如下错误：

```
2012-07-30 20:45:12.652 XYX[5986:12203] ERROR: ePub not Valid
2012-07-30 20:45:12.652 XYX[5986:12203] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter'
*** First throw call stack: 
```

我检查了 url 路径，它不为空，甚至检查了路径中是否存在文件。文件存在于指定路径。

我可能会出错的地方???任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T12:56:27.753

我解决了。正如保罗所说，问题在于：

```
*dataPtr = *dataPtr++ ^ *keyPtr++; 
```

我将其更改为：

```
*dataPtr = *dataPtr ^ *keyPtr;
        dataPtr++;
        keyPtr++; 
```

谢谢保罗。

# python - 文本文档中不包括标点符号的词频

> ID：11724530
> 
> 赞同：0
> 
> 时间：2012-07-30T15:26:48.793
> 
> 标签：python, string, replace

我正在尝试编写一个程序来读取名为“GlassDog.txt”的文本文档中的所有单词。一旦程序读取了单词，它将需要删除所有标点符号，并将所有字母变为小写。然后当程序完成所有这些后，我希望它打印它找到的单词以及它在文档中使用了多少次。

到目前为止，这是我的代码：

```
def run():
    count = {} 
    for w in open('GlassDog.txt').read().split(): 
        if w in count: 
            count[w] += 1 
        else: 
            count[w] = 1

    for word, times in count.items(): 
        print ("%s was found %d times" % (word, times)) 

run() 
```

此代码将读取并显示单词和单词的频率。但是，我找不到如何实现删除标点符号并用小写字母替换大写字母的代码的方法。这个问题可能已经被问过几次了，我似乎找不到任何专门做我正在寻找的东西。如果这是一个重复的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:33:31.293

您可以在字符串上使用 .lower() 以在 if 块之前转换为小写，并且仅匹配字母数字尝试使用正则表达式，具体查看 \w

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:36:42.313

```
from collections import Counter

def just_alnum(s):
    return ''.join(c for c in s if c.isalnum())

with open('GlassDog.txt', 'r') as f:
    counts = Counter(just_alnum(w.lower()) for w in f.read().split()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:35:08.113

```
>>>msg = "Hello,World!"
>>>msg = msg.lower() #convert into all lowercase
>>>print msg
hello,world!
>>>msg = filter(lambda x: x.isalpha(), msg) #remove every character that isn't a letter
>>>print msg
helloworld 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T16:07:19.873

这种方法当然不是最优化的，但我认为它很健壮：

```
>>> msg = "A   very42 dirty__ string ©."
# Replace all non alphabetical characters (maybe you want isalnum() instead)
>>> msg = map(lambda x: x if x.isalpha() else ' ', msg)
# Concat splitted chars
>>> msg = ''.join(msg)
# Avoid multiple spaces
>>> msg = ' '.join(msg.split())
>>> msg
'A very dirty string' 
```

在巨大且异构的输入上，它会消耗大量资源，因此，如果您想要更优化的东西，您应该根据您对输入文件了解的限制进行调整（例如：标点符号是否总是被空格包围？ ）。

此外，您可以在一行中完成所有这些工作，但是对于您的代码的下一个读者来说可能很难理解......

# windbg - 如何在 !dumpheap windbg 命令后获取详细信息

> ID：11724539
> 
> 赞同：1
> 
> 时间：2012-07-30T15:27:17.933
> 
> 标签：windbg

我已经执行了 windbg 命令 `!dumpheap -stat` 来获取一个转储堆。现在我想获取有关类类型内容的更多信息。如何查看课程类型的更多详细信息？

```
0:007> !do 00000000062782d0    
Free Object
Size:        566112(0x8a360) bytes
0:007> !do 000007ff00c88fc8        
<Note: this object has an invalid CLASS field>
Invalid object 
```

这一切都无法获得更多信息。是否也可以获得 IL 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T01:48:23.720

在 .Net 中，类由方法表标识，它存在于程序集元数据中。用于`!dumpmt`转储方法表。例如：

```
`0:031> !dumpmt -md 71ad219c
EEClass:         716e3d94
Module:          716e1000
Name:            System.EventHandler
mdToken:         020000da
File:            C:\windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll
BaseSize:        0x20
ComponentSize:   0x0
Slots in VTable: 16
Number of IFaces in IFaceMap: 2
MethodDesc Table
   Entry MethodDe    JIT Name
719c99d0 716e6a08 PreJIT System.Object.ToString()
719cf140 71766428 PreJIT System.MulticastDelegate.Equals(System.Object)
719e1440 71766484 PreJIT System.MulticastDelegate.GetHashCode()
719b1500 716e6a44 PreJIT System.Object.Finalize()
...` 
```

# c++ - 需要帮助弄清楚为什么我的反向字符串 c++ 程序会中断

> ID：11724544
> 
> 赞同：1
> 
> 时间：2012-07-30T15:27:30.007
> 
> 标签：c++, xcode, string, reverse

我正在尝试反转一个字符串，就像一个简单的练习，让自己为面试做准备。我想用 C++ 编写一个接受键盘输入并反转它的程序。出于某种原因，我在“cin >> myString;”行收到 EXC_BAD_ACCESS 错误（在 Xcode 中）我怀疑我在做一些非常愚蠢的事情，但我真的可以使用一些帮助来找出问题所在，以及我应该如何解决它。谢谢！

```
#include <iostream>
#include <cstring>
#include "stdlib.h"

using namespace std;

int main(int argc, const char * argv[])
{
    char *myString = nullptr;
    char *revString = nullptr;
    cout << "Please enter a string: ";
    cin >> myString;

    cout << endl;

    size_t myLength = strlen(myString);

    for (int i = 0; i < myLength; i++)
    {
        revString[i] = myString[myLength -1 - i];
    }

    cout << "Your string, reversed, has become: ";
    printf(revString);
    cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T15:30:23.537

没有为`myString`或分配内存`revString`。您需要使用`new[]`或使用分配内存[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)。如果您使用`new[]`或使用 的堆栈分配数组`char`，则需要限制读取的字符数以避免缓冲区溢出。使用`std::string`可以消除您的这种责任，因为`std::string`它将动态增长到所需的大小。

不确定这是学习练习还是不允许使用 STL 算法，但如果是，您可以使用它们[`std::reverse()`](http://en.cppreference.com/w/cpp/algorithm/reverse)来反转 a `std::string`（参见此处的示例[http://ideone.com/7LZHs](http://ideone.com/7LZHs)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:30:01.483

您的代码至少存在两个问题：您正在写入一个未分配的字符缓冲区，并且您正在从字符串的后半部分构造一个回文，而不是反转它。

由于这是 C++，因此您不应该使用 C 字符串，而是更喜欢 C++ 字符串（`std::string`这是您需要的类型）。您还应该交换字符串两端的字符，而不是简单地将结尾部分的字符分配给字符串初始部分的字符。最适合交换字符的函数是`std::swap`.

```
string str = "quick brown fox jumps over the lazy dog";
for (int i = 0, j = str.size()-1 ; i < j ; swap(str[i++], str[j--]))
    ;
cout << str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:29:59.900

您需要为 myString 分配内存。使用静态数组或新语句。

```
char myString[512];
char * myString = new char[512]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T15:34:43.850

问题是您试图将数据塞入一个不指向您可以使用的内存的指针中。

这一行声明了一个指向字符的指针并将其设置为`nullptr`：

```
char *myString = nullptr; 
```

但仅此而已 - 它不指向任何可写内存，因此输入无处可去。`cin`不会为您进行任何类型的内存分配。

解决它的一种方法是静态分配您的字符串：

```
char myString[SOME_SIZE] = ""; 
```

哪里`SOME_SIZE`是一个足以容纳输入字符串的常量值。

或者您可以将其声明为 std::string ，正如另一位海报所建议的那样。在 C++ 中，这是避免任何可能的溢出的更安全/更好的方法。

```
std::string myString; 
```

# vb.net - 为什么设置 POST Content-type:"Application/Json" 会导致 REST WebService 出现“错误请求”？

> ID：11724547
> 
> 赞同：1
> 
> 时间：2012-07-30T15:27:47.197
> 
> 标签：vb.net, json, web-services, rest

我在使用我的网络服务时遇到了一个奇怪的问题：

当我作为客户端将表单发布到 REST Web 服务而不设置任何“类型内容”标头时，一切正常。我在服务器上接到电话，并且 Json 文本可用。

如果我作为客户端将我的发布请求的内容类型标头设置为“application/json”，则服务器会回复“错误请求 (400)”。

网络服务方法是：

```
 <WebInvoke(UriTemplate:="Login", Method:="POST")>
 Public Function LoginFormAccess(data As IO.Stream) As String
 (...)
 end function 
```

如果我不提及“Application/Json”，我可以检索客户端 json 类型的正文，并发布在*数据*流中。如果我这样做，我会得到错误的请求答案。

为什么关于内容类型值的行为存在如此大的差异，以及提供这种差异的原因是什么？该方法是否需要其他类型的参数，或者必须更改或检查其他内容？

**添加：如果内容类型是“应用程序/Json”并且正文为空，那么它可以工作......！**

*   注 1：负责接听电话的类**已**实例化。（new() 中的痕迹证明了这一点）。所以，问题似乎是服务器没有找到合适的方法来调用该对象......

*   注意 2：我在使用不同的客户端时遇到了这个问题，所以我很确定是服务器端的问题。

*   注 3：我使用 WCF REST 服务应用程序模板来创建我的项目。

*   注 4：提及“ResponseFormat=WebMessageFormat.Json”和“RequestFormat=WebMessageFormat.Json”没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:01:03.710

当您向*请求*`content-type`添加标头时，您指定的是*请求*中数据的内容类型，而不是您希望看到返回的内容。

 **根据您发布的内容，我敢打赌，您正在将 XML 发布到服务中，并且当您设置`content-type`为 JSON 时，您正在破坏服务器解析正文的能力。您关于它有效的模棱两可的声明“如果内容类型是“应用程序/Json”并且正文为空”可能会证明这一点（假设您的意思是您的请求正文，而不是响应正文）。

您可以通过添加 XML 而不是 JSON 的内容类型来证明这一点 - 如果它与您的请求的实际正文匹配，它将正常工作。

简而言之：它给出了“错误请求”错误，因为您的请求指定了 JSON 内容并且您没有发送 JSON。**

# getelementsbytagname - 由 HTML DOM 的“querySelectorAll”方法或“getElementsByTagName”方法引起的一个非常奇怪的问题

> ID：11724551
> 
> 赞同：0
> 
> 时间：2012-07-30T15:28:01.260
> 
> 标签：getelementsbytagname, dom, selectors-api

见代码：

```
<!DOCTYPE html>
<meta charset="utf-8">
<title>An HTML5 Document</title>
<p>
<p>
<script>
    var a = [1, 2],
        b = [3, 4],
        c = a.concat(b),
        d, e, f, g;

    console.log(c); // No problem

    d = [document.querySelectorAll('p')[0], document.querySelectorAll('p')[1]];
    e = a.concat(d);
    console.log(e); // No problem

    f = document.querySelectorAll('p'); // f = document.getElementsByTagName('p');
    g = a.concat(f);
    console.log(g); // Pretty strange...
</script> 
```

jsFiddle：http: [//jsfiddle.net/V7gmE](http://jsfiddle.net/V7gmE)

我的问题是：

`c.length`是`4`。没有问题。 `e.length`是`4`。没有问题。

如果我使用`f = document.querySelectorAll('p');`or `f = document.getElementsByTagName('p');`，为什么`g.length`是'3'？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:30:40.930

没问题，你的第三个数组只是`[1, 2, NodeList]`. `querySelectorAll`返回 a`NodeList`在这种情况下包含两个元素。在第二个示例中，您专门从 NodeList 中获取第一个和第二个元素并将它们放入一个数组中。虽然 NodeList 可能看起来像数组，但它们不是，并且当您在其上使用该`Array.concat`方法时，不会挑选出单个元素。

来自[MDN](https://developer.mozilla.org/En/DOM/NodeList)：

> NodeList 的使用与数组非常相似，并且很想在它们上使用 Array.prototype 方法。然而，这是不可能的。

这是另一个可能有助于理解这一点的示例：http: [//jsfiddle.net/radu/j5gvy/1/](http://jsfiddle.net/radu/j5gvy/1/)

```
var a = [1, 2],
    obj = { 0 : '', 1 : ''},
    b = [obj[0], obj[1]];

c = a.concat(obj);

console.log(c.length); // 3

d = a.concat(b);

console.log(d.length); // 4 
```

仅仅因为我定义了一个可以像数组一样访问的对象并不能使它成为一个数组。

# android - Android AsyncTask 使用 Socket 发送/读取数据

> ID：11724553
> 
> 赞同：1
> 
> 时间：2012-07-30T15:28:10.693
> 
> 标签：android, sockets, android-asynctask

我正在做一个测试项目，比如一个使用 wi-fi 连接的基本聊天程序。我正在创建套接字来连接两个不同的设备，但我的问题是当我发送第一条消息时，它显示在另一个设备中。但是，如果我尝试再次发送，我可以在第一个日志中看到消息已发送，但它从未出现在第二个设备中。

我试图在另一个线程中实现接收数据的读取..或在异步任务中，但问题仍然存在。这是我的两种实现方式：

单线程：

```
public void listenForSocket(){
    thread =  new Thread(new Runnable() {
        public void run() {
            Log.e("READDATAFROMSOCKET","READDATAFROMSOCKET");
            try {
                // sets the service running state to true so we can get it's state from other classes and functions.                     
                serverSocket = new ServerSocket(DNSUtils.port);
                client = serverSocket.accept();
                client.setKeepAlive(true);
                InputStream is = client.getInputStream();
                Log.d("","is Size : "+is.available());
                BufferedReader in = new BufferedReader(new InputStreamReader(is));
                int readed = in.read();
                Log.d("","readed bytes : "+readed);
                String line = "";
                while ((line = in.readLine()) != null) {
                    Log.i("","line : "+line);
                    changeText(line);
                }

                //client.close();
                //serverSocket.close();
            } catch (UnknownHostException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    });
    thread.start();
} 
```

这是 AsyncTask ：

```
class ServerTask extends AsyncTask<Void, Void, Void>{

    private String line = "";

    @Override
    protected Void doInBackground(Void... params) {
        try {
            Log.e("ASYNCTASK","ASYNCTASK");
            // sets the service running state to true so we can get it's state from other classes and functions.                     
            serverSocket = new ServerSocket(DNSUtils.port);
            client = serverSocket.accept();
            client.setKeepAlive(true);
            InputStream is = client.getInputStream();

            Log.d("","is Size : "+is.available());
            BufferedReader in = new BufferedReader(new InputStreamReader(is));
            int readed = in.read();
            Log.d("","readed bytes : "+readed);

            while ((line = in.readLine()) != null) {
                Log.i("","line : "+line);                   
            }

            //client.close();
            //serverSocket.close();
        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        changeText(line);
    }
} 
```

更改文本（字符串）；-

```
private void changeText(final String line) {
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            LinearLayout.LayoutParams params = new LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
            params.gravity = Gravity.RIGHT;
            TextView sendMsg = new TextView(MainActivity.this);
            sendMsg.setText(DNSUtils.clientName+" : "+line);
            sendMsg.setTextColor(Color.DKGRAY);
            sendMsg.setTextSize(18);
            layout.addView(sendMsg, params);
        }
    });
} 
```

任何想法如何解决这个问题？

另一个问题是，当我读取接收到的数据时，发送字符串的第一个字母从不显示。它总是从第二个字母开始。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:44:33.120

如果我是你，我将尝试`serverSocket = new ServerSocket(DNSUtils.port);`只用 new 实现一次；不是在每个线程中。

# javascript - 有没有办法在 IE 8 中对我的 Rails javascript application.js 进行故障排除？

> ID：11724554
> 
> 赞同：0
> 
> 时间：2012-07-30T15:28:11.323
> 
> 标签：javascript, ruby-on-rails, internet-explorer-8

我有一个在 Firefox、Safari 和 Opera 中运行良好的应用程序，但在 IE 8 中失败。它给出了一个非常愚蠢的错误消息：

```
Message: Object doesn't support this property or method
Line: 350
Char: 3
Code: 0
URI: http://evokat.localhost.com/javascripts/application.js?1343661671 
```

所做的只是指向这一行的第一个字母（缩进 2 个空格）：

```
partslist = $("#partslist").dataTable({
              "bPaginate": false,
              "bLengthChange": false,
              "bFilter": false,
              "bSort": false,
              "bInfo": false }); 
```

当然，我最大的 2 个客户使用 Internet Explorer 8。该错误消息完全没有告诉我任何信息，而且我无法为 IE 找到类似 Firebug 的调试环境。请问我下一步应该采取什么措施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:23:04.797

有一些关于使用 IE 安装开发者工具栏/萤火虫的有趣讨论，看看它们，可能会得到一个提示

[如何在ie8中使用firebug](https://stackoverflow.com/questions/7719848/how-to-use-firebug-in-ie8)

[https://superuser.com/questions/43653/whats-ie8-equivalent-of-chrome-and-firefox-firebug-inspect-element](https://superuser.com/questions/43653/whats-ie8-equivalent-of-chrome-and-firefox-firebug-inspect-element)

[如何安装 Firebug lite IE8？](https://stackoverflow.com/questions/4716164/how-to-install-firebug-lite-ie8)

# javascript - 如何精确获取页面的最大滚动位置？

> ID：11724556
> 
> 赞同：6
> 
> 时间：2012-07-30T15:28:14.877
> 
> 标签：javascript, html, dom, browser

如果我使用公式

```
document_height - window_height = max_scroll_position 
```

它评估为 1 或 0，尽管我认为它应该始终评估为 0。例如，**在 firefox**打开控制台上，滚动到[http://stackoverflow.com](http://stackoverflow.com)上的页面底部并在控制台上执行以下操作：

```
($(document).height() - $(window).height()) - $(document).scrollTop() 
```

我得到 1 作为答案（*记住将滚动位置保持在最底部*）但是在 jquery.com 上，执行上述操作会得到 0

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T00:00:03.803

经过一些测试，那额外的 1 个像素肯定是舍入误差。所有这三个变量（文档高度、窗口高度和滚动顶部）都保持在更高的内部精度或未缩放浏览器窗口的比例，然后根据需要进行缩放和舍入以满足 JavaScript 属性的要求。在某些边缘情况下，随着缩放比例的增加，这些值变得更有可能，这些值会以产生您看到的不一致结果的方式进行舍入。

除非您根据其他变量的值多次快速调整多个变量中的一个，否则此舍入误差不太可能导致用户可见的任何问题。如果您必须经常调整它们，那么您可能应该缓存调整后的数字，并使用您的缓存版本而不是浏览器报告的数字进行进一步计算。

[注意：我最终能够使用 OP 中的公式得到 -1 的舍入误差，在 Firefox 中放大 250%。]

# php - MySQL Select 语句 --- 显示所有在哪里，除非这个 --- 不太确定怎么做

> ID：11724559
> 
> 赞同：1
> 
> 时间：2012-07-30T15:28:20.893
> 
> 标签：php, mysql

我正在尝试创建一个 SQL 查询，它将选择显示的所有内容……但我的条件是总小时数！= 0。这可行，但我必须再添加一个条件来排除总小时数的条件！= 0。

我基本上需要查询看起来像： AND project_timecard_task_days.total_hours != 0 UNLESS task.type ="Fixed Rate"

因此，声明的“除非”部分是问题所在。任何帮助都感激不尽！

```
SELECT project_timecard_tasks.task_id, 
       project_timecard_tasks.datetime, 
       project_timecard_tasks.total_hours, 
       project_timecard_tasks.user_id, 
       project_timecard_tasks.project_id, 
       users.user_id, 
       users.firstname, 
       users.lastname, 
       users.billingrate, 
       tasks.id, 
       tasks.taskname, 
       tasks.billingoption, 
       tasks.fixedrate, 
       tasks.rate_schedule_id, 
       hourlyrates.rate_schedule_id, 
       hourlyrates.hourlyrate, 
       project_timecard_tasks.project_task_id, 
       project_timecard_task_days.project_task_id, 
       project_timecard_task_days.project_task_day_id, 
       project_timecard_task_days.total_hours, 
       project_timecard_task_days.comments, 
       project_timecard_task_days.invoiced 
FROM   project_timecard_tasks 
       JOIN users 
         ON project_timecard_tasks.user_id = users.user_id 
       JOIN tasks 
         ON project_timecard_tasks.task_id = tasks.id 
       JOIN project_timecard_task_days 
         ON project_timecard_tasks.project_task_id = 
            project_timecard_task_days.project_task_id 
       JOIN hourlyrates 
         ON project_timecard_tasks.billing_code_id = hourlyrates.hourly_rate_id 
WHERE  project_timecard_tasks.project_id = '$jobNumber' 
       AND project_timecard_task_days.total_hours != 0 
       AND project_timecard_task_days.invoiced != 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:30:58.440

```
...AND (project_timecard_task_days.total_hours != 0 OR task.type ="Fixed Rate")... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:30:47.880

只需使用`OR`：

```
WHERE
(
  project_timecard_tasks.project_id = '$jobNumber' 
  AND 
  project_timecard_task_days.total_hours != 0 
  AND 
  project_timecard_task_days.invoiced != 1 
)
OR
  task.type ="Fixed Rate" 
```

或者也许（取决于你想要你的条件）：

```
WHERE
  project_timecard_tasks.project_id = '$jobNumber' 
  AND 
  project_timecard_task_days.invoiced != 1 
  AND 
  (
    project_timecard_task_days.total_hours != 0
    OR
    task.type ="Fixed Rate"
  ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:31:36.320

使用`OR`声明。

```
...
AND (project_timecard_task_days.total_hours != 0 OR task.type = "Fixed Rate")
AND... 
```

# objective-c - 无法访问自己？

> ID：11724562
> 
> 赞同：0
> 
> 时间：2012-07-30T15:28:37.840
> 
> 标签：objective-c, self

在这个函数中，我通过一个名为 AFKissXMLRequestOperation 的 Kiss xml 函数获取 xml。但由于它是无效的，除非我 NSLog 它，否则我无法访问 XMLDocument，但是当我需要访问 XML 时，这没有用。因此，我尝试将其设置为 self 的变量，以便在其他函数中访问它。如果我在块内使用 NSLog self.xmlDocument，它就可以工作。但是，当我在调用 NSLog(@"self!%@", [self.xmlDocument XMLStringWithOptions:DDXMLNodePrettyPrint]); 它是空的。那么如何访问 self.XMLDocument 呢？

```
 -(id)xmlRequest:(NSString *)xmlurl
{
AFKissXMLRequestOperation* operation= [AFKissXMLRequestOperation XMLDocumentRequestOperationWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:xmlurl]] success:^(NSURLRequest *request, NSHTTPURLResponse *response, DDXMLDocument *XMLDocument) {
    NSLog(@"kiss operation %@", [XMLDocument XMLStringWithOptions:DDXMLNodePrettyPrint]);
    self.xmlDocument=XMLDocument;

} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, DDXMLDocument *XMLDocument) {
    NSLog(@"Failure!");
}];

[operation start]; 
NSLog(@"self!%@", [self.xmlDocument XMLStringWithOptions:DDXMLNodePrettyPrint]);
return self.xmlDocument; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:44:32.367

`NSURLRequest`异步执行，因此您必须检查代码的组织方式或使用`synchroneous`网络操作。

上述代码中的错误是，由于 `NSURLRequest`异步执行，

```
NSLog(@"self!%@", [self.xmlDocument XMLStringWithOptions:DDXMLNodePrettyPrint]);
return self.xmlDocument; 
```

在 完成**之前**执行`operation`，因此返回`nil`.

你*真的*需要回来`xmlDocument`吗？我不这么认为，因为您将其设置为属性。我的猜测是，在成功块中（您设置的位置`self.xmlDocument=XMLDocument;`），您实际上可以根据需要处理 xmlDocument 或调用执行此操作的方法。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:47:32.560

我相信 AFKissXMLRequestOperation 是一个异步操作，所以你应该对成功块内的响应做你需要做的事情。如果您希望将响应处理分开，那么成功块当然可以调用另一个函数。如果您需要将响应传递回另一个类，您可以通过设置自己的委托协议/属性或自己使用块来做到这一点：

委托协议：

```
@protocol XMLResponseHandlerDelegate <NSObject>

- (void)handleResponseXML:(XMLDocument *)xmlDoc;

@end 
```

然后调用它：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:xmlurl]]; 
AFKissXMLRequestOperation* operation= [AFKissXMLRequestOperation XMLDocumentRequestOperationWithRequest:request
success:^(NSURLRequest *request, NSHTTPURLResponse *response, DDXMLDocument *xmlDocument)     
{
    NSLog(@"kiss operation %@", [XMLDocument XMLStringWithOptions:DDXMLNodePrettyPrint]);
    [self.delegate handleResponseXML:xmlDocument];
} 
failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, DDXMLDocument *XMLDocument) 
{
    NSLog(@"Failure!");
}]; 
```

# java - 图像不会出现在 JLabel 中

> ID：11724564
> 
> 赞同：2
> 
> 时间：2012-07-30T15:28:46.940
> 
> 标签：java, image, swing, user-interface, jframe

我使用 Netbeans 的 GUI Builder 为我的应用程序创建了 GUI。我正在尝试显示`JFrame`包含`JLabel`图像的图像，但无法`Image`显示。

我生成的代码：

```
private void initComponents() {
        //...
        jLabel1 = new JLabel(new ImageIcon(myPicture));
} 
```

我的课程代码：

```
public class GUIWindow extends javax.swing.JFrame {

    BufferedImage myPicture;

    /** Creates new form GUIWindow */
    public GUIWindow() throws IOException {
        myPicture = ImageIO.read(new File("images/logo.png"));
        initComponents();
        this.add(jLabel1);

    }
} 
```

但我仍然看不到图像...... **（图像文件的路径很好）**它的......

```
my-project :
  /build
  /dist
  /images/logo.png
  /nbproject
  /src (here I have all my source files)
  /build.xml
  /manifest.mf 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:33:52.683

你可以这样使用

```
URL imgSmartURL = this.getClass().getResource("your image path");
jLabel1 = new JLabel(new ImageIcon(imgSmartURL), JLabel.CENTER); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:03:27.303

我会做这样的事情。

```
 JLabel dice1 = new JLabel();
    ImageIcon one = new ImageIcon("dice/1.png");

    //set dice1 position
    dice1.setLocation(20, 100);
    dice1.setSize(115, 115);
    dice1.setIcon(one);
    gamepanel.add(dice1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T07:32:08.400

如果您使用的是 netbeans，您可以通过设置属性直接将图像添加到 jLabel。`Right click on the jLabel -> properties -> icon -> (if it's external image) import to project(upload your image) -> ok`. 它将被添加到您的 jLabel 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T05:02:51.237

1.  我建议您将图像复制到单独的文件夹（图像）中。
2.  然后使用 `Toolkit.getDefaultToolkit().getImage("images/A.png");`

我相信有一个类似的[问题](https://stackoverflow.com/questions/10876742/netbeans-imageicon-not-displaying)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-07T16:54:47.647

私人 ImageIcon imageIconPrint =

```
new ImageIcon(getClass().getResource("/image/print.gif")); 
```

创建按钮并添加以下代码：

jbtCanada.addActionListener(new ActionListener() {

```
 public void actionPerformed(ActionEvent e) {

    jlblFlag.setIcon(imageIconCanada);

  }

}); 
```

这会帮助我想

# xcode4 - xcode 4dismissModalViewControllerAnimated

> ID：11724565
> 
> 赞同：-1
> 
> 时间：2012-07-30T15:28:53.680
> 
> 标签：xcode4

在我的应用程序中，我在视图 [dismissModalViewControllerAnimated] 之间切换值。我在第一个视图控制器中有一个文本和一个按钮。如果文本为空，我按下按钮时，会显示警报视图。如果文本已满，则计算第二个视图标签。它的作品。但是当我从第一个视图控制器移动到第二个视图控制器时，文本的值是在传递之前写入的。所以，当我第二次按下并按下按钮时，我在标签中看到了正确的值。我能帮帮我吗

**第一视图控制器.m**

```
(IBAction)go:(id)sender {
if ([aText.text length]>0)
    {

        SecondViewController *lvc =[self.storyboard instantiateViewControllerWithIdentifier:@"second"];
        [self presentModalViewController:lvc animated:YES];

    }

    else {
        UIAlertView *message =[[UIAlertView alloc] initWithTitle:@"Warning" message:@"Please enter value" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [message show];
        [self dismissModalViewControllerAnimated:YES];

    } 
```

**第二视图控制器.m**

```
(IBAction)back:(id)sender {
    [self dismissModalViewControllerAnimated:YES]; 
} 
```

* * *

变量我的公式的值：`[atext floatvalue] * 2`当文本为空时，我输入文本 10，按下按钮标签为 NAN 后按返回按钮，再次转到第一个视图控制器按 GO 按钮标签为 20

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:35:06.523

抱歉，但我无法理解您要做什么（我已经尝试过！）。

如果你想从一个 ViewController 传递一个值到另一个，你应该这样做：

```
SecondViewController *lvc =[self.storyboard instantiateViewControllerWithIdentifier:@"second"];
lvc.value = yourValue;
[self presentModalViewController:lvc animated:YES]; 
```

# actionscript-3 - Flash 文件下载在服务器上不起作用

> ID：11724574
> 
> 赞同：0
> 
> 时间：2012-07-30T15:29:20.690
> 
> 标签：actionscript-3, http, actionscript, loading

我正在创建一个 Flash 引擎，并且我有一个 Loader 类。当我在地图中打开 .swf 文件时它可以工作，但是当我在我的服务器上打开它时它不会。HTTP 状态返回 200，因此这意味着它有连接但图像不显示...这是如何引起的，我该如何解决？

```
package com.loading{
import flash.display.Loader;
import flash.media.Sound;
import flash.net.URLRequest;
import flash.events.Event;
import flash.events.ErrorEvent;
import flash.events.IOErrorEvent;
import flash.events.EventDispatcher;
import com.events.LoaderEvent;
import flash.media.SoundChannel;
import flash.events.HTTPStatusEvent;

public class Loader extends EventDispatcher {

    public var returnImages:Array = new Array();

    public var totalImages:int = 0;

    public function Loader() {
    }

    public function LoadImage(path:String) {
        var imgLoader:flash.display.Loader = new flash.display.Loader();
        imgLoader.contentLoaderInfo.addEventListener(LoaderEvent.COMPLETE, loadImageComplete);
        imgLoader.contentLoaderInfo.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpError,false,0,true);
        imgLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, error, false, 0 ,true);
        imgLoader.load(new URLRequest(path));
        totalImages = 1;
    }

    public function LoadImages(paths:Vector.<String>) {
        totalImages = paths.length;
        for (var i:int = 0; i<paths.length; i++) {
            var imgLoader:flash.display.Loader = new flash.display.Loader();
            imgLoader.contentLoaderInfo.addEventListener(LoaderEvent.COMPLETE, loadImageComplete);
            imgLoader.contentLoaderInfo.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpError,false,0,true);
            imgLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, error, false, 0 ,true);
            imgLoader.load(new URLRequest(paths[i]));
        }
    }

    private function loadImageComplete(e:Event) {
        returnImages.push(e.target.content);
        if (returnImages.length == totalImages) {
            dispatchEvent(new LoaderEvent(LoaderEvent.ALL_IMAGES_LOADED,0,totalImages,true));
        } else {
            dispatchEvent(new LoaderEvent(LoaderEvent.IMAGE_LOADED,returnImages.length,totalImages,true));
        }
    }

    private function error(e:IOErrorEvent) {
        dispatchEvent(new LoaderEvent(LoaderEvent.ERROR,0,0,e.text,true));
    }

    private function httpError(e:HTTPStatusEvent) {
        if (e.status != 200) {
            dispatchEvent(new LoaderEvent(LoaderEvent.ERROR,0,0,e.status,true));
        }
    }

}

} 
```

这就是它的加载方式：

```
var lo:com.loading.Loader = new com.loading.Loader();
lo.LoadImage("http://s3files.core77.com/blog/images/Balloon-Tank.jpg");
lo.addEventListener(LoaderEvent.ERROR, error, false, 0 ,true);
lo.addEventListener(LoaderEvent.ALL_IMAGES_LOADED,loadImage, false, 0, true);
function loadImage(e:LoaderEvent) {
for (var i:int =0; i<e.totalPosition; i++) {
    info.appendText("Loaded Image: " + i+"\n");
    try {
        var tempBitmap:Bitmap = lo.returnImages[i];
        tempBitmap.scaleX = tempBitmap.scaleY = 2;
        tempBitmap.alpha = 0.5;
        addChild(tempBitmap);
    } catch (error:Error) {
        info.appendText("Catched Error: " + error.toString() + "\n");
    }
}
}

function error(e:LoaderEvent) {
info.appendText("Error: " + e.currentString+"\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T23:34:26.973

`Bitmap`我认为当您从加载的图像创建新图像并尝试操作其`scale`和`alpha`属性时，您会遇到跨域问题。快速解决方法是从托管 SWF 的同一服务器加载测试图像。

如果您对与 Flash 相关的跨域策略感兴趣，您应该阅读（相当深奥的）[Adobe 文档](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7c98.html)，特别是标题为“遍历显示列表”的部分。

# java - 在java中使用对象函数

> ID：11724575
> 
> 赞同：3
> 
> 时间：2012-07-30T15:29:21.430
> 
> 标签：java, function, object

我正在尝试在 Java 中实现函数对象。我有一个 Unit 类，它有一个默认的添加函数，应该在 Unit 对象的大多数初始化中使用。但是，对于某些问题，我需要不同的添加功能。代码将如下所示：

```
public class Unit() {
   public Unit(unitType) {
      if (unitType == "specialType") {
         additionFunc = defaultFunc } else {
         additionFunc = specialFunc }
      }
   }
   public int swim() {
      return additionFunc()
   }
  // definiion of regularFunc
  // definition of specialFunc

} 
```

然后，从主文件：

```
Unit fish = new Unit(regularTyoe);
Unit fatFish = new Unit(specialType);
fish.swim(); //regular function is called
fatFish.swim(); //special function is called 
```

就是这样..有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:37:00.800

您需要查找[继承](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)和[方法覆盖](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)。阅读正确的面向对象编程也可能会有所帮助。

正确的方法是：

```
class Fish {
  public void swim() {
    // normal swim
  }
}

class FatFish extends Fish {
  @Override
  public void swim() {
    // special swim
  }
}

Fish fish = new Fish()
Fish fatFish = new FatFish()
fish.swim()    // normal swim
fatFish.swim() // slow swim 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:44:18.453

您的问题有很多解决方案，其中之一是使用继承，您可以有一个默认实现`Unit`，并用新的方法覆盖所需的方法来扩展它。

基本上会是这样的：

```
public class FatFish {
    @Override
    public void swim() {
        // new behavior 
    }
} 
```

* * *

另一种方法是实现[Strategy Design Pattern](http://en.wikipedia.org/wiki/Strategy_pattern)，它允许您在运行时选择算法。因此，您可以执行以下操作：

```
public interface SwimStrategy {
    void execute();
}

public class FatFishSwimStrategy implements SwimStrategy {
    @Override
    public void execute() {
        // fat fish swim impl
    }

}

public class FishSwimStrategy implements SwimStrategy {
    @Override
    public void execute() {
        // normal fish swim impl
    }

}

public class Fish {

    private final SwimStrategy swimStrategy;

    public Fish(SwimStrategy swimStrategy) {
        this.swimStrategy = swimStrategy;
    }

    public void swim() {
        swimStrategy.execute();
    }

} 
```

为了实例化一个对象，你可以这样做：

```
new Fish(new FatFishSwimStrategy()); 
```

或正常行为：

```
new Fish(new FishSwimStrategy()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T15:33:37.680

创建一个新的 FatFish 类，它扩展了 Unit 并覆盖了 Swim()。

```
Unit fish = new Unit();
Unit fatFish = new FatFish();
fish.swim(); //regular function is called
fatFish.swim(); //special function is called 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T15:43:42.127

我认为它可以通过扩展和工厂方法来完成：

> 公共课单元{
> 
> ```
> public static Unit createUnit(UnitType type) {
>     if (UnitType.Special == type) {
>         return new Unit(type) {
>             @Override
>             public int swim() {
>                 System.out.println("special swim");
>                 return 0;
>             }
>         };
>     }
>     return new Unit(UnitType.Default);
> }
> 
> private UnitType type;
> 
> private Unit(UnitType type) {
>     this.type = type;
>     System.out.println("create unit for " + type);
> }
> 
> public int swim() {
>     System.out.println("default swim");
>     return 0;
> }
> 
> public static void main(String[] args) {
>     Unit fish = Unit.createUnit(UnitType.Default);
>     Unit fatFish = Unit.createUnit(UnitType.Special);
>     fish.swim();
>     fatFish.swim();
> 
> } 
> ```
> 
> }

这是一个简单的类型枚举：

> 公共枚举 UnitType { 默认，特殊
> 
> }

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-30T15:38:43.477

使用简单的 if 语句：

```
private String unitType;

public Unit(unitType) {
    this.unitType = unitType;      
}

public int swim() {
    if (unitType.equals("specialType") {
        return specialFunc();
    }
    else {
        return regularFunc();
    }
} 
```

或者使用多态性和工厂方法：

```
public abstract class Unit() {

    protected Unit() {
    }

    protected abstract int addition();

    public int swim() {
        return addition();
    }

    public static Unit forType(String unitType) {
        if (unitType.equals("specialType") {
            return new SpecialUnit();
        }
        else {
            return new RegularUnit();
        }
    }

    private static class SpecialUnit extends Unit {
        @Override
        protected addition() {
            // special addition
        }
    }

    private static class RegularUnit extends Unit {
        @Override
        protected addition() {
            // regular addition
        }
    }
} 
```

或者使用一个`Adder`函数式接口，定义一个`addition()`方法，以及这个接口的两个具体实现：

```
private Adder adder;

public Unit(unitType) {
    if (unitType.equals("specialType") {
        this.adder = new SpecialAdder();
    }
    else {
        this.adder = new RegularAdder();
    }  
}

public int swim() {
    return adder.addition();
} 
```

最后一个与您在问题中提出的最接近。函数对象本身不存在，但可以被接口替换。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T15:39:30.380

在 Java 中有两种方法可以完成这种多态行为。第一种是使用继承和分层的类集。例如，您可以有一个抽象基类，它定义了一个名为“swim”的抽象方法。然后每个具体的鱼类将扩展这个基类并实现游泳方法。稍后当您有一组鱼对象时，您可以将它们向上转换到基类并在每个对象上调用游泳方法。

第二种方法是使用接口。你定义了一个接口（例如ISwim），它声明了公共方法swim。每个鱼类（无论是否属于类层次结构）都将实现 ISwim 接口，这意味着它们将定义一个游泳方法。然后，如果您有一组不同类型的鱼类对象，您可以将每个对象强制转换为 ISwim 接口并在每个对象上调用游泳方法。

Java 没有函数指针，因此您正在考虑的方法不适合该语言。即使在具有函数指针的语言中，我认为上述两种方法也是最合适的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-30T15:39:32.883

一种方法是使用`enum`for 类型`Unit`和`Unit`子类：

```
public class Unit {
    public enum UnitType {
        REGULAR {
            public Unit makeUnit() {
                return new RegularUnit();
            }
        },
        SPECIAL {
            public Unit makeUnit() {
                return new SpecialUnit();
            }
        };
        abstract public Unit makeUnit();
    }
    protected Unit() {}
    public abstract int swim();
    private static class RegularUnit extends Unit {
        RegularUnit() {}
        public int swim() {
            return 0;
        }
    }
    private static class SpecialUnit extends Unit {
        SpecialUnit() {}
        public int swim() {
            return 1;
        }
    }
}

Unit fish = UnitType.REGULAR.makeUnit();
Unit fatFish = UnitType.SPECIAL.makeUnit(); 
```

另一种方法是使用`Callable`对象：

```
public class Unit {
    public enum UnitType { REGULAR, SPECIAL }
    private Callable<Integer> additionFunc;
    public Unit(UnitType type) {
        switch (type) {
        case REGULAR:
            additionFunc = new Callable<Integer>() {
                public Integer call() {
                    return 0;
                }
            };
            break;
        case SPECIAL:
            additionFunc = new Callable<Integer>() {
                public Integer call() {
                    return 1;
                }
            };
            break;
        }
    }
    public int swim() {
        return additionFunc();
    }
} 
```

# java - 在java中读取需要用户名和密码的远程文件

> ID：11724576
> 
> 赞同：8
> 
> 时间：2012-07-30T15:29:27.760
> 
> 标签：java, network-programming

我正在尝试在 java 中读取远程文件

```
File f = new File("//192.168.1.120/home/hustler/file.txt"); 
```

远程机器需要用户名和密码才能访问该文件。

有没有办法通过java代码传递参数并读取文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-21T08:28:58.840

```
package com.eiq;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;

import org.apache.commons.vfs.FileObject;
import org.apache.commons.vfs.FileSystemOptions;
import org.apache.commons.vfs.Selectors;
import org.apache.commons.vfs.UserAuthenticator;
import org.apache.commons.vfs.VFS;
import org.apache.commons.vfs.auth.StaticUserAuthenticator;
import org.apache.commons.vfs.impl.DefaultFileSystemConfigBuilder;

public class RemoteFileDemo {
    public static void main(String[] args) throws IOException {

        String domain = "hyd\\all";
        String userName = "chiranjeevir";
        String password = "Acvsl@jun2013";
        String remoteFilePath = "\\\\10.0.15.74\\D$\\Suman\\host.txt";

        File f = new File("E:/Suman.txt"); //Takes the default path, else, you can specify the required path
        if (f.exists()) {
            f.delete();
        }
        f.createNewFile();
        FileObject destn = VFS.getManager().resolveFile(f.getAbsolutePath());

        //domain, username, password
        UserAuthenticator auth = new StaticUserAuthenticator(domain, userName, password);
        FileSystemOptions opts = new FileSystemOptions();
        DefaultFileSystemConfigBuilder.getInstance().setUserAuthenticator(opts, auth);

        FileObject fo = VFS.getManager().resolveFile(remoteFilePath, opts);

        System.out.println(fo.exists());

        //fo.createFile();

        destn.copyFrom(fo, Selectors.SELECT_SELF);
        destn.close();

        //InputStream is = new FileInputStream(f);

    }
} 
```

这是一个从远程机器读取文件并将其作为文件存储在本地机器中的程序`E:/Suman.txt`。

写文件路径时要小心，而不是`:`我们必须用`$`符号替换它，例如： `D:\Suman\Boorla\kpl.txt`是错的， `D$\\Suman\\Boorla\\kpl.txt`是对的。

在上述程序中，您必须更改远程机器的域名、用户名、密码和文件路径。要使用上述程序，我们需要`jar`在类路径中添加以下文件。

```
commons-vfs.jar
commons-logging.jar 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-23T14:29:13.000

[jCIFS](https://jcifs.samba.org/)的另一种替代方法是您可以轻松指定身份验证参数：

```
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication("domain", "user", "password"); // Authentication info here, domain can be null
try (InputStream is = new SmbFile("smb://192.168.1.120/home/hustler/file.txt", auth).getInputStream()) {
    // Read from 'is' ...
} catch (IOException e) {
    // Handle IOException
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T16:42:50.887

这是我编写的代码，它运行良好。

```
File f=new File("abc.txt"); //Takes the default path, else, you can specify the required path
if(f.exists())
{
    f.delete();
}
f.createNewFile(); 
FileObject destn = VFS.getManager().resolveFile(f.getAbsolutePath());
UserAuthenticator auth = new StaticUserAuthenticator("", "myusername", "secret_password");
FileSystemOptions opts = new FileSystemOptions();

DefaultFileSystemConfigBuilder.getInstance().setUserAuthenticator(opts, auth);
FileObject fo = VFS.getManager().resolveFile("\\\\192.168.0.1\\direcory\\to\\GetData\\sourceFile.txt",opts);
destn.copyFrom(fo,Selectors.SELECT_SELF);
destn.close(); 
```

现在您可以使用该文件执行所需的操作。就像是...

```
InputStream is = new FileInputStream(f); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-30T15:47:45.713

你也可以试试[Commons VSF](http://commons.apache.org/vfs/api.html)。检查[用户身份验证器](http://commons.apache.org/vfs/apidocs/org/apache/commons/vfs2/UserAuthenticator.html)

# javascript - 如何在 jquery 中链接多组动画？

> ID：11724578
> 
> 赞同：0
> 
> 时间：2012-07-30T15:29:32.577
> 
> 标签：javascript, jquery

假设我有几个功能，我可以在其中执行某种动画和其他一些事情：

```
function animations1() {
    $('some_object').animation();
    ...
}

function animations2() {
    $('some_object').animation();
    ...
}

function animations3() {
    $('some_object').animation();
    ...
} 
```

链接这些功能的最佳方式是什么，完成时调用 ei `animations2`，完成时`animations1`调用？`animations3``animations2`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:31:53.283

可以使用 animate 方法的回调函数：

```
$('some_object').animate({..}, 100, function(){
   $('another_object').animate({..}, 100)
}) 
```

或者：

```
function animations1() {
     $('some_object').animate({..}, 100, function(){
       animations2() 
     })
}

function animations2() {
     $('another_object').animate({..}, 100, function(){
       animations3() 
     })
}

function animations3() {
    $('some_object').animation();
    ...
} 
```

# actionscript-3 - 启动 AS3 时的补间

> ID：11724579
> 
> 赞同：0
> 
> 时间：2012-07-30T15:29:33.980
> 
> 标签：actionscript-3, tweener

```
for (var i:int=cardCount; i < numberOfCardsToDispatch;i++){

            Tweener.addTween(packArray[i], {x:packPosX - dealXPos, time:.4, delay:dealDelay, transition:"easeOutExpo", onStart:function(){packArray[i].visible = true;}});

        } 
```

我正在遍历我的数组， packArray[i] 指的是一个精灵。我想要它，以便在 Tween 启动时精灵可见。

上面的代码没有补间精灵，只是冻结它，只要我把 onStart 拿出来，它就可以工作。有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:43:40.793

*Tweener*不再维护。你应该试试*[TweenMax](http://www.greensock.com/tweenmax/)*。

> Tweener 从 2005 年 6 月到 2009 年 6 月进行了维护。虽然它仍然有效，但它不再被维护 [...]

使用*补间*：

```
Tweener.addTween(packArray[i], {
    time: .4,
    delay: dealDelay,
    x: packPosX - dealXPos,
    ease: "easeOutExpo",
    onStart: function():void { this.visible = true; } // You should use this
}); 
```

使用*TweenMax*：

```
TweenMax.to(packArray[i], .4, {
    delay: dealDelay,
    x: packPosX - dealXPos, // Or "-100" if you want to move to the left to 100px
    ease: Expo.easeOut,
    onStart: function():void { packArray[i].visible = true; }
}); 
```

# css - 容器侧面的光影 (CSS)

> ID：11724581
> 
> 赞同：0
> 
> 时间：2012-07-30T15:29:40.357
> 
> 标签：css

我一直在尝试建立一个站点，主容器的右侧和左侧都有棕色阴影。

到目前为止，我实现了我的目标，但还没有完全实现，这意味着我两边都有阴影，但它太暗了。我希望我的影子更轻（类似于 Bloomingdales.com 网站）。

这是我的css代码，有什么建议吗？

谢谢！

```
.container {
overflow: hidden;
background: white;
padding: 15px;
-webkit-box-shadow: 4px 2px #492409,  -4px 0 2px #492409;
-moz-box-shadow: 4px 0 2px -6 #492409,  -1px 0 2px #492409;   
box-shadow: 4px 0 2px  #492409,  -4px 0 2px #492409;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:27:24.090

正如@Vlad Saling 指出的那样，css3 支持多种 box-shadow 选项。

[这个网站](http://attaboy.tumblr.com/post/49711604/faded-shadows-opacity-and-box-shadow-with-css3)有一些关于浏览器如何计算阴影的重要信息。尤其是：

> 您可以使用备用 rgba([red], [green], [blue], [alpha]) 语法在 CSS 中指定颜色。RGB 值以十进制 (0-255) 写入，最后一个属性是“alpha”（即不透明度），一个从 0（透明）到 1（不透明）的十进制数。0.5 alpha 给你 50% 透明的东西。所以 rgba(0, 0, 0, 0.25) 给你一个很好的褪色黑色阴影，它保持足够暗，即使在深灰色上也很明显。

要解决您的问题，请将颜色更改为较浅的棕色阴影，或通过使用 rgba 而不是 hex 声明其颜色来调整框阴影属性以包含 alpha 通道：

```
-webkit-box-shadow: 4px 2px rgba(28, 14, 3, x),  -4px 0 2px rgba(28, 14, 3, x);
-moz-box-shadow: 4px 0 2px -6 rgba(28, 14, 3, x),  -1px 0 2px rgba(28, 14, 3, x);   
box-shadow: 4px 0 2px  rgba(28, 14, 3, x),  -4px 0 2px rgba(28, 14, 3, x); 
```

应该管用。将*x*替换为所需的 Alpha 透明度（不透明度）。例如，0.5 表示 50% 的透明度。

# google-apps-script - 使用脚本更新 Google 电子表格数据透视表范围

> ID：11724583
> 
> 赞同：2
> 
> 时间：2012-07-30T15:29:49.133
> 
> 标签：google-apps-script, google-sheets, pivot-table, google-sheets-api

如何使用脚本在 Google Docs 电子表格中编辑数据透视表的数据范围？

或者...

是否可以将命名范围用于数据透视表范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T22:32:28.157

不幸的是，在这个时候（2012 年 7 月 31 日），我相信答案是“你不能”和“不”。:-(

我可以建议的唯一解决方法是：1\. 使用 QUERY 电子表格函数（它支持可容纳不断增长的数据的开放范围）来生成表格，或者 2\. 使用 Google Apps 脚本本身来生成表格。与仅使用脚本修改源数据范围（就像使用 Excel/VBA 一样）相比，这两者都需要更多的努力。另一方面，GSheets 中数据透视表的一般实现仍然存在一些问题，因此您可能出于这个原因想要探索其他选项之一，这是有争议的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T16:27:17.663

我找到了一种可以帮助您的解决方法，就像我在另一篇文章中回答的那样：[更改数据透视表数据范围的 JavaScript 方法 Google Docs 电子表格](https://stackoverflow.com/questions/11987253/javascript-method-to-change-pivottable-data-range-google-docs-spreadsheet)

创建一个专用于您的数据的工作表，第 1 行 = 标题，所有其他行 = 数据。

删除没有数据的行。

例如，如果您使用 A 到 F 列，请创建一个 Pivot 并使用此范围：SHEET_NAME!A:F

枢轴将“增长”到新行，因为范围是“A 到 F 列中的所有数据”。

# sql-server - SQL Server 代理作业完成电子邮件通知

> ID：11724584
> 
> 赞同：0
> 
> 时间：2012-07-30T15:29:54.667
> 
> 标签：sql-server, email, sql-server-2008-r2, ssms

我创建了一个数据库邮件帐户（经过测试并发送没有问题），创建了一个操作员，为我要监视的作业设置了警报，并重新启动了我的 SQL Server 代理。但是当相关工作完成时，我仍然没有收到警报。有没有少了一个步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:51:00.923

查看您的数据库邮件日志并确保您没有任何错误发送到那里。确保您的内部中继邮件服务器允许从 SQL 服务器的 IP 地址发送。同时运行`EXEC msdb.dbo.sysmail_help_status_sp`并确保 dbmail 队列状态为“Started”或“Receives_Occuring”。如果队列处于 Stopped 状态，请使用`EXEC msdb.dbo.sysmail_stop_sp`and重新启动它`EXEC msdb.dbo.sysmail_start_sp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:19:26.603

打开作业，转到通知并选择电子邮件，选择您创建的操作员，以及条件“当作业失败时”。那应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:16:13.823

能够在服务器重新启动后获得通知以开始发送

# javascript - 如何制作添加的回调函数或同步制作此脚本？

> ID：11724591
> 
> 赞同：1
> 
> 时间：2012-07-30T15:30:12.987
> 
> 标签：javascript, jquery, templates

我写了一个加载数据的脚本，它用handelbars编译成一个字符串。然后我将这些元素添加到 DOM 并希望给它们一些事件侦听器和可拖动的功能，但它不起作用。似乎它是异步工​​作的，而不是像我在许多其他帖子中读到的那样同步工作。有人可以给我一个提示我认为哪里错了吗？我在这里发布了代码

[http://jsfiddle.net/Zjx35/](http://jsfiddle.net/Zjx35/)

我会很高兴任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:45:14.617

您似乎输入了错误的班级名称。

```
//
<div style="position:absolute; top:{{posy}}; left:{{posX}}" class="d_entity">
//
$(".p_entity").draggable().css("background","red"); 
```

更新示例：http: [//jsfiddle.net/Zjx35/1/](http://jsfiddle.net/Zjx35/1/)

# c++ - 为什么需要 std::move ？

> ID：11724592
> 
> 赞同：11
> 
> 时间：2012-07-30T15:30:16.600
> 
> 标签：c++, c++11

我读了一篇关于 C++11 中移动语义的[漂亮文章](http://www.cprogramming.com/c++11/rvalue-references-and-move-semantics-in-c++11.html)。这篇文章写得很直观。文章中的示例类如下所示。

```
class ArrayWrapper 
{ 
public: 
    // default constructor produces a moderately sized array 
    ArrayWrapper () 
        : _p_vals( new int[ 64 ] ) 
        , _metadata( 64, "ArrayWrapper" ) 
    {} 

    ArrayWrapper (int n) 
        : _p_vals( new int[ n ] ) 
        , _metadata( n, "ArrayWrapper" ) 
    {} 

    // move constructor 
    ArrayWrapper (ArrayWrapper&& other) 
        : _p_vals( other._p_vals  ) 
        , _metadata( other._metadata ) 
    { 
        other._p_vals = NULL; 
    } 

    // copy constructor 
    ArrayWrapper (const ArrayWrapper& other) 
        : _p_vals( new int[ other._metadata.getSize() ] ) 
        , _metadata( other._metadata ) 
    { 
        for ( int i = 0; i < _metadata.getSize(); ++i ) 
        { 
            _p_vals[ i ] = other._p_vals[ i ]; 
        } 
    } 
    ~ArrayWrapper () 
    { 
        delete [] _p_vals; 
    } 
private: 
    int *_p_vals; 
    MetaData _metadata; 
}; 
```

显然，在上述移动构造函数实现中，嵌入元素不会发生移动`_metadata`。为了促进这一点，诀窍是使用这样的`std::move()`方法。

```
ArrayWrapper (ArrayWrapper&& other) 
        : _p_vals( other._p_vals  ) 
        , _metadata( std::move( other._metadata ) ) 
{ 
    other._p_vals = NULL; 
} 
```

到目前为止，一切都很好。

标准说：

§5（C++11 §5[expr]/6）：

> [ 注意：表达式是一个 xvalue，如果它是：
> 
> *   调用函数的结果，无论是隐式还是显式，其返回类型是对对象类型的右值引用，
>     
>     
> *   转换为对对象类型的右值引用，
>     
>     
> *   一个类成员访问表达式，指定一个非引用类型的非静态数据成员，其中对象表达式是一个 xvalue，或
>     
>     
> *   一个`.*`指向成员的表达式，其中第一个操作数是一个 xvalue，第二个操作数是一个指向数据成员的指针。

我的问题：

现在，`other`移动构造函数中的变量是一个 xvalue（对吗？）。那么根据上面最后一条规则，`other._metadata`也应该是一个xvalue。因此编译器可以隐式使用`_metadata`' 类的移动构造函数。所以，这里没必要`std::move`。

我错过了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-30T15:37:17.447

你的假设不是真的。构造函数的参数是 an `xvalue`，它允许绑定右值引用，但是一旦绑定了右值引用，在构造函数内部，它就不再是 an`xvalue`而是 an `lvalue`。从概念上讲，调用位置的对象是*expiring*，但在构造函数内部并且在它完成之前它不再是*expiring*，因为它可以稍后在构造函数块中使用。

```
ArrayWrapper f();
ArrayWrapper r = f();   // [1] 
```

在 [1] 中，表达式`f()`指的是一个临时的，在调用构造函数后会*过期*，所以它可以被一个右值引用绑定。

```
ArrayWrapper (ArrayWrapper&& other) 
    : _p_vals( other._p_vals  ) 
    , _metadata( other._metadata )        // [2] 
{ 
    other._p_vals = NULL; 
    std::cout << other._metadata << "\n"; // [3]
} 
```

在构造函数内部，`other`不会过期，它会在构造函数的每一条指令中存活。如果编译器允许在 [2] 中*移动*，那么进一步使用 [3] 中的变量将是无效的。您必须明确告诉编译器您希望该值*现在*过期。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-30T15:32:25.680

`other`是一个左值，因为它是一个变量。命名引用是左值，不管它们是什么类型的引用。

# opencv - 使用 OpenCV 从二进制图像中分解简单形状

> ID：11724593
> 
> 赞同：0
> 
> 时间：2012-07-30T15:30:17.727
> 
> 标签：opencv

如何使用 OpenCV 从二进制图像中将复杂的形状分解为简单的形状？我会发布一张图片......但它不允许新用户使用。我的例子是一个盒子覆盖在另一个盒子上，两个盒子的颜色完全相同（一种颜色）......我想把它分成两个盒子......最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:36:08.257

我建议您针对您的具体问题使用霍夫变换，因为它对检测重叠的参数形式很有效。

请注意，维基百科可能不是介绍霍夫变换的最佳来源！

最初 Hough 变换用于检测图像内的线条，但该概念的推广很容易实现。

# iphone - 如何实现从 java 到 Objective c 的等待方法？

> ID：11724595
> 
> 赞同：0
> 
> 时间：2012-07-30T15:30:18.167
> 
> 标签：iphone, objective-c

> **可能重复：**
> [在目标 c 中等待并通知等效项？](https://stackoverflow.com/questions/6229319/wait-and-notify-equivalent-in-objective-c)

如何实现从 java 到 Objective c 的等待方法？我有代码： `wait(a);` 其中一个 - 整数变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:04:57.307

使用 GCD 的调度信号量怎么样？[苹果关于调度信号量的文档](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html#//apple_ref/doc/uid/TP40008091-CH102-SW24)说：

> 调度信号量类似于传统的信号量，但通常更有效。只有当调用线程因为信号量不可用而需要阻塞时，调度信号量才会向下调用内核。如果信号量可用，则不进行内核调用。有关如何使用调度信号量的示例，请参阅“使用调度信号量来调节有限资源的使用”。</p>

以下是我正在开发的纸牌游戏的示例。主线程等待直到某个条件（玩家完成他的回合）被批准。

```
 // a semaphore is used to prevent execution until the asynchronous task is completed ...

   dispatch_semaphore_t sema = dispatch_semaphore_create(0);

   // player chooses a card - once card is chosen, animate choice by moving card to center of board ...

   [self.currentPlayer playCardWithPlayedCards:_currentTrick.cards trumpSuit:_trumpSuit completionHandler:^ (WSCard *card) {

       BOOL success = [self.currentTrick addCard:card];

       DLog(@"did add card to trick? %@", success ? @"YES" : @"NO");

       NSString *message = [NSString stringWithFormat:@"Card played by %@", _currentPlayer.name];
       [_messageView setMessage:message];

       [self turnCard:card];
       [self moveCardToCenter:card];

       // send a signal that indicates that this asynchronous task is completed ...

       dispatch_semaphore_signal(sema);

       DLog(@"<<< signal dispatched >>>");
   }];

   // execution is halted, until a signal is received from another thread ...

   DLog(@"<<< wait for signal >>>");

   dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
   dispatch_release(sema); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:48:46.790

如果要阻止另一个线程访问代码的关键部分，可以使用[@synchronized指令。](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocThreading.html)如果你只是为了等待而等待......你可以使用`performSelector:withObject:afterDelay:`方法`NSObject`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-30T15:35:22.360

你可以使用C函数sleep

```
sleep(5);  // sleep for 5 seconds 
```

如果您想在不阻塞主线程的情况下等待，请使用：

```
[self performSelector:@selector(delayFunction:) withObject:nil afterDelay:5.0]; 
```

# vb.net - VB.NET 2012 属性集上的属性获取

> ID：11724600
> 
> 赞同：2
> 
> 时间：2012-07-30T15:30:30.010
> 
> 标签：vb.net, properties, .net-2.0, visual-studio-2012

我在针对 .NET 2.0 的 VS 2012 RC VB.NET 项目中遇到了一个非常奇怪的情况。由于某种原因，除了调用它的 Get 方法之外，还调用了属性的 Set 方法：

这按预期工作：

```
Dim _searchparray = New Byte() {37, 115, ...}
Dim rep() As Byte = _opt.ReplaceBytes
If Arrays.CompareTo(rep, _searchparray, 1, False) = -1 AndAlso _opt.SearchMatchPlaceholderInReplaceBytes Then ... 
```

也就是_opt.ReplaceBytes 的Get 方法只被调用一次，它的Set 方法没有被调用。

但这不起作用：

```
Dim _searchparray = New Byte() {37, 115, ...}
If Arrays.CompareTo(_opt.ReplaceBytes, _searchparray, 1, False) = -1 AndAlso _opt.SearchMatchPlaceholderInReplaceBytes Then ... 
```

在这里，首先调用_opt.ReplaceBytes 的Get 方法，然后Arrays.CompareTo 返回，然后调用_opt.ReplaceBytes 的Set 方法！为什么？调用堆栈表明调用者是上面示例中的最后一行！但是它在哪里设置属性？它不能在 Arrays.CompareTo 中，因为 Set 方法是在函数返回值后调用的，也不能通过 _opt.SearchMatchPlaceholderInReplaceBytes 的 Get 方法设置，因为它的 Get 方法返回的是底层字段的值，没有其他任何作用！

有人对这种奇怪的行为有解释吗？谢谢。

这是演示这一点的整个示例项目：

```
Imports System.Runtime.CompilerServices

Module Module1

Sub Main()
    Dim _opt As New Opts
    Dim _searchparray = New Byte() {37, 115}
    If Arrays.CompareTo(_opt.ReplaceBytes, _searchparray, 1, False) = -1 AndAlso _opt.SearchMatchPlaceholderInReplaceBytes Then
        Console.WriteLine("0")
    End If
    Console.WriteLine("1")
End Sub

End Module

Module Arrays

<Extension()> _
Friend Function CompareTo(Of T As IEquatable(Of T))(ByRef SearchArray() As T, ByRef AnotherArray() As T, ByRef aWildCardElement As T, Optional aUseWildcards As Boolean = True) As Integer
    Dim min As Integer = If(SearchArray.Length < AnotherArray.Length, SearchArray.Length, AnotherArray.Length) - 1
    If aUseWildcards AndAlso aWildCardElement IsNot Nothing Then
        For i = 0 To min
            If SearchArray(i).Equals(aWildCardElement) Then Continue For 
            If Not SearchArray(i).Equals(AnotherArray(i)) Then Return i
        Next
    Else
        For i = 0 To min
            If Not SearchArray(i).Equals(AnotherArray(i)) Then Return i
        Next
    End If
    If SearchArray.Length = AnotherArray.Length Then
        Return -1
    Else
        Return min + 1
    End If
End Function

End Module

Public Class Opts

Private _ReplaceBytes() As Byte = New Byte() {}
<Xml.Serialization.XmlIgnore()> _
Public Property ReplaceBytes As Byte()
    Get
        Return _ReplaceBytes
    End Get
    Set(ByVal value As Byte())
        _ReplaceBytes = value
    End Set
End Property

Private _SearchMatchPlaceholderInReplaceBytes As Boolean = False
Public Property SearchMatchPlaceholderInReplaceBytes() As Boolean
    Get
        Return _SearchMatchPlaceholderInReplaceBytes 'Set breakpoint here 
    End Get
    Set(ByVal value As Boolean)
        'Set breakpoint here too
        _SearchMatchPlaceholderInReplaceBytes = value
    End Set
End Property

End Class

Namespace Global.System.Runtime.CompilerServices

<AttributeUsage((AttributeTargets.Method Or (AttributeTargets.Class Or AttributeTargets.Assembly))), System.Reflection.Obfuscation(ApplyToMembers:=True, Exclude:=True)> _
Public NotInheritable Class ExtensionAttribute
    Inherits Attribute
    Public Sub New()
    End Sub
End Class

End Namespace 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:40:00.697

这是 ByRef 声明和将属性作为参数传递之间的交互。这在 C# 中是被禁止的，但 VB.NET 编译器可以解决这个问题。

通过声明参数 ByRef，您可以告诉编译器您*可以*修改传递的对象引用。如果您将局部变量作为方法参数传递，这很好，当您的代码分配参数时，该局部变量会得到更新。但是当你传递一个属性时这是一个问题，这样的赋值必须调用属性设置器。这反过来又使传递的参数无效。这可能会导致非常难以诊断的错误。

由于可能存在错误，C# 编译器只是禁止这样做。然而，VB.NET 编译器通过确保在方法停止执行*后*调用 setter来解决此问题。这正是您在调试器中看到的。麻烦的是，它总是调用 setter，即使你没有修改参数。

解决方法很明显，使用 ByRef 只是一个错误。您的方法实际上并未分配 SearchArray 参数。参数必须是 ByVal。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:18:45.613

似乎在 VB.NET 中，当您通过引用传递 Array 类型的属性时，它会在函数末尾复制回来。这是有道理的，因为传递它 ByRef 意味着引用可能在函数内部发生了变化。由于它是通过引用传递的属性，因此我们会影响（可能已更改）对属性设置器的引用。

解决方案是通过值传递它（ByVal）。您无需在代码中通过引用传递它。事实上，在大多数情况下，通过值传递比通过引用传递更好。仅当参数也用作返回值时才使用 ByRef。

# php - 如何让我的网站不在 iframe 中显示

> ID：11724604
> 
> 赞同：-2
> 
> 时间：2012-07-30T15:30:40.657
> 
> 标签：php, html, .htaccess

> **可能重复：**
> [如何阻止 iframe 调用](https://stackoverflow.com/questions/5881139/how-to-block-iframe-call)

我希望我的网站不显示在 iframe 中。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:32:42.877

将此添加到您的 htaccess 或服务器配置中：

```
Header always append X-Frame-Options SAMEORIGIN 
```

它将阻止（至少在支持它的浏览器中）您的网站显示在*另一个网站的*iFrame 中。

# html - 谷歌分析和 iframe 内容 - 所有跟踪都有效吗？

> ID：11724605
> 
> 赞同：4
> 
> 时间：2012-07-30T15:30:41.827
> 
> 标签：html, iframe, google-analytics, p3p

我在这里看到了一堆关于谷歌分析跟踪和 iframe 以及如何可能存在一些问题的帖子。也看过这个：[https ://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#trackingIFrames](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#trackingIFrames)

我在父网站中有我不关心的跟踪代码，并且我在嵌入在我关心的 iframe 中的页面中有跟踪代码。iframe 内容是一个完全不同的域。

**我想知道 iframe 页面是否能够获取有关人口统计的所有信息，并能够正确地将数据发送到 Google 以进行事件跟踪等。**同样，在这种情况下，我根本不关心父母。只是 iframe 中的谷歌分析代码完全独立工作。

我觉得我上面从 Google 发布的文章与希望以某种方式将 iframe 中的分析与父级中的分析联系起来的用户相关，但我可能弄错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T23:21:36.237

该[文档](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#trackingIFrames)准确描述了您必须执行的操作。它真的归结为：

*   加载 iframe`_getLinkerUrl`以将 iframe 内的访问与顶部框架上的访问链接起来
*   在 iframed 页面上使用 P3P 标头来解决愚蠢的 Internet Explorer。

我会添加一些注释：

*   即使您不关心顶级页面，您也应该在其中添加标签，否则您将无法使用`_getLinkerUrl`并且会丢失流量来源等。如果您在 iframe 中不使用`_getLinkerUrl`GA，则会认为这是来自顶级页面的全新访问推荐。
*   在 iframe 中设置 cookie，在第三方域中是第三方 cookie 的定义。因此，任何设置为阻止第三方 cookie 的浏览器都会阻止 GA cookie，而 GA 将无法工作。这包括默认设置为阻止第三方 cookie 的 Safari（桌面版和移动版）。因此，如果使用 Safari 或 iDevices 访问对您很重要（可能是现在），那么这种跟踪可能不会给您带来好的结果。唯一的解决方案是消除 iframed 页面，将其放在您的域中或在新窗口/选项卡中打开它。

# c# - 将 uniqueidentifier 参数传递给存储过程

> ID：11724614
> 
> 赞同：7
> 
> 时间：2012-07-30T15:31:03.567
> 
> 标签：c#, sql-server, uniqueidentifier

我正在尝试使用以下代码将 uniqueidentifier 参数传递给存储过程：

```
myCommand.Parameters.Add("@BlogID", SqlDbType.UniqueIdentifier).Value = "96d5b379-7e1d-4dac-a6ba-1e50db561b04"; 
```

我不断收到错误消息，但说程序无法从字符串转换为 GUID。我是否错误地传递了值？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-30T15:32:30.510

试试这个

```
myCommand.Parameters.Add("@BlogID", SqlDbType.UniqueIdentifier).Value = new Guid("96d5b379-7e1d-4dac-a6ba-1e50db561b04"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T15:33:49.540

唯一标识符是[GUID](http://msdn.microsoft.com/en-us/library/system.guid.aspx)。所以它与您的字符串是不同的对象类型。

你需要

```
myCommand.Parameters.Add("@BlogID", SqlDbType.UniqueIdentifier).Value = 
                                        new Guid("96d5b379-7e1d-4dac-a6ba-1e50db561b04"); 
```

# wcf - WCF 和 Castle 库（玻璃映射器）

> ID：11724616
> 
> 赞同：1
> 
> 时间：2012-07-30T15:31:18.647
> 
> 标签：wcf, sitecore, sitecore6, glass-mapper

你好，我在 Sitecore 6 下有 WCF 服务，`webHttpEndpointBehavior`我使用 Glass Mapper 读取项目，Glass Mapper 依赖于 Castle 库。

它运行良好，但我有一些使用 Contract 的方法，例如：

```
 [OperationContract]
        [WebInvoke(Method = "POST",BodyStyle = WebMessageBodyStyle.Wrapped, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        List<Shade> GetAllShades(int columns, int rows); 
```

我尝试以 JSON 格式返回我的类的列表，在使用 SvcTraceViewer.exe 调试我的服务期间，我发现了下一个错误：

> 尝试序列化参数时出错：GetFamilyShadesResult。InnerException 消息是 'Type 'Castle.Proxies.ShadeProxy' 与数据合同名称 'ShadeProxy: [http://schemas.datacontract.org/2004/07/Castle.Proxies](http://schemas.datacontract.org/2004/07/Castle.Proxies) ' 不是预期的。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。有关更多详细信息，请参阅 InnerException。

如何解决这个问题？`Castle.Proxies.ShadeProxy`是 Castle 下的动态类，我不能使用 `KnownTypeAttribute`.

实际上，如果我使用 JSON.net 库并将结果作为字符串返回，则一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:25:25.320

我假设你有一个类链接到通过 Glass 加载的其他类，例如

```
[SitecoreClass]
public class Shade{

    [SitecoreField]
    public virtual IEnumerable<AnotherClass> SomeField{get;set;}

    [SitecoreChildren]
    public virtual IEnumerable<AnotherClass> Children{get;set;}      
}
[SitecoreClass]
public class AnotherClass{} 
```

为了允许延迟加载类，Glass 使用 Castle 生成的代理，因此在运行时将类加载到 SomeField 属性中时，您实际上获得了 AnotherClass 类的子类。

要解决此问题，您必须明确告诉类将其他类作为具体类型加载，更新 SitecoreField 属性应该可以解决此问题：

```
[SitecoreClass]
public class Shade{

    [SitecoreField(Setting=SitecoreFieldSettings.DontLazyLoad)]
    public virtual IEnumerable<AnotherClass> SomeField{get;set;}

    [SitecoreChildren(IsLazy=false)]
    public virtual IEnumerable<AnotherClass> Children{get;set;}
}
[SitecoreClass]
public class AnotherClass{} 
```

# c# - 在服务器上上传时出现 SqlCacheDependency 问题

> ID：11724617
> 
> 赞同：1
> 
> 时间：2012-07-30T15:31:20.120
> 
> 标签：c#, asp.net, sqlcachedependency

我在我的网站中使用了 SqlCacheDependency，它在 localhost 上运行没有问题。但是当在服务器上上传并恢复我的数据库时，它有以下错误：

```
 The SQL Server Service Broker for the current database is not enabled,
 and as a result query notifications are not supported.
 Please enable the Service Broker
 for this database if you wish to use notifications. 
```

但我将其设置为 true 并且在 localhost 上运行良好。`Broker true`我该如何设置`plesk`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T19:23:40.797

我发现必须在服务器管理员的服务器上启用代理。

# html - 将 2 个表格列宽相互对齐

> ID：11724620
> 
> 赞同：12
> 
> 时间：2012-07-30T15:31:23.833
> 
> 标签：html, css

我有 2 个表，一个在另一个之上，我想将它们的列宽完全对齐，有没有办法做到这一点？尝试了固定的表格宽度等没有乐趣

您可以在小提琴上看到这些列彼此略微偏离 [http://jsfiddle.net/askhe/](http://jsfiddle.net/askhe/)

HTML

```
<table class="tblresults txtblack">
                            <tr class="tblresultshdr bold">
                                <td class="col1">Company</td>
                                <td>Currency</td>
                                <td>Bid</td>
                                <td>Ask</td>
                                <td>YTD Vol</td>
                            </tr>
                            <tr>
                                <td class="col1">ABC</td>
                                <td>GBP</td>
                                <td>94</td>
                                <td>16</td>
                                <td>3,567,900</td>
                            </tr>
                            <tr>
                                <td class="col1">DEF</td>
                                <td>GBP</td>
                                <td>3</td>
                                <td>46</td>
                                <td>10,000</td>
                            </tr>
                            <tr>
                                <td class="col1">GHI</td>
                                <td>GBP</td>
                                <td>3</td>
                                <td>46</td>
                                <td>10,000</td>
                            </tr>
                            <tr>
                                <td class="col1">JKLM</td>
                                <td>GBP    </td>
                                <td>7</td>
                                <td>46</td>
                                <td>56,000</td>
                            </tr>

</table>
                        <table class="tblresults txtblack margintop10">
                            <tr>
                                <td colspan="5" class="bold" >Investments</td>
                            </tr>
                            <tr>
                                <td class="col1">ghjk</td>
                                <td>GBP</td>
                                <td>13</td>
                                <td>6</td>
                                <td>130,000</td>
                            </tr>
                            <tr>
                                <td class="col1">asdsa</td>
                                <td>GBP</td>
                                <td>120</td>
                                <td>46</td>
                                <td>16,000</td>
                            </tr>
                            <tr>
                                <td class="col1">dfdsfsdf </td>
                                <td>GBP</td>
                                <td>1</td>
                                <td>4</td>
                                <td>13,000</td>
                            </tr>
                       </table>​ 
```

CSS

```
table.tblresults {
    width:100%;
    *width:99.5%;
    border: 1px solid #b9b8b8;
    top: 0;
}
table.tblresults tr.tblresultshdr {background: lightgrey;}
table.tblresults tr.tblresultshdr td {padding: 6px;}
table.tblresults td {padding: 8px; border: 1px solid #b9b8b8;}
table.tblresults td.col1 {width: 70%;}
​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:40:48.470

`table`用于科学数据的元素，例如来自实验的探针，而不是用于实际布局：

> 表格不应纯粹用作布局文档内容的一种方式，因为这可能会在呈现到非可视媒体时出现问题。此外，当与图形一起使用时，这些表格可能会迫使用户水平滚动以查看在具有更大显示器的系统上设计的表格。为了尽量减少这些问题，作者应该使用样式表而不是表格来控制布局。

虽然您没有将它们用于布局，但您的问题实际上是渲染/布局问题。最简单的解决方案是[将两个表合并为一个 (jsfiddle)](http://jsfiddle.net/askhe/1/)。

如果您希望将数据封装在许多小表中而不是一张大表中，则需要为几乎所有列指定宽度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T15:44:52.693

为什么不把它们放在同一张桌子上呢？看起来它们在语义上是相似的。 [http://jsfiddle.net/askhe/5/](http://jsfiddle.net/askhe/5/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-26T11:21:18.973

不用合并表，可以用这个

```
table-layout: fixed; 
```

这里有一篇关于它的精彩文章 [https://css-tricks.com/fixing-tables-long-strings/](https://css-tricks.com/fixing-tables-long-strings/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-26T10:04:00.640

尽管我同意在许多情况下合并表的解决方案是最好和最简单的解决方案，但我开始需要真正拥有这两个具有相同列的单独表（以使一个表固定并且第二个可滚动）

为了实现这一点，我声明了 2 个具有相同列数的表，一个具有宽度规则（% 和 px），一个没有

然后，使用 Javascript，我将规则表的宽度应用于自由表：

```
document.getElementById("HeaderTable").style.width = document.getElementById("main").clientWidth ;
document.getElementById("tar1").style.width = document.getElementById("org1").clientWidth ;
document.getElementById("tar2").style.width = document.getElementById("org2").clientWidth ;
document.getElementById("tar3").style.width = document.getElementById("org3").clientWidth ;
document.getElementById("tar4").style.width = document.getElementById("org4").clientWidth ; 
```

第一行固定表格宽度，然后逐列完成。使用`.clientWidth`很重要，因为`.style.width`如果它是应用于规则列的百分比，则发送一个百分比。

这几乎可以工作，但并不完全。表格有类似的布局，但偏移了几个像素。因为我只需要在 IE 中工作，我虽然可以用固定值移动它，尽可能接近我想要的，所以我将我的代码更改为：

```
document.getElementById("tar1").style.width = document.getElementById("org1").clientWidth - 9;
document.getElementById("tar2").style.width = document.getElementById("org2").clientWidth ;
document.getElementById("tar3").style.width = document.getElementById("org3").clientWidth - 10;
document.getElementById("tar4").style.width = document.getElementById("org4").clientWidth - 10; 
```

我猜不同表的值可能不同。但令我惊讶的是，它适用于所有主流浏览器，与缩放级别无关

windows resize 会破坏对齐，因此您需要将函数绑定到此事件。此外，此解决方案不再适用于极端尺寸的桌子

这是一个[jsfiddle](https://jsfiddle.net/Rafa28/hoyfhk4r/3/)，因为涉及到一些 CSS。目前它不适用于缩放，因为我的浮动标题不粘`right: 0px`，不知道为什么

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-09-26T11:37:19.843

好吧，使用这个简单的 HTML 片段，您可以做到。就我而言，我是从 HTML 创建 pdf 的，所以这个解决方案对我有用。希望它可以帮助别人。

```
<table border=0>
  <tr>
    <td>
      <!--Insert table 1 -->
    </td>
    <td>
      <!--Insert table 2 -->
    </td>
  </tr>
</table> 
```

# c# - 如何在.net MVC3中的javascript函数中访问c#变量值？

> ID：11724623
> 
> 赞同：1
> 
> 时间：2012-07-30T15:31:30.800
> 
> 标签：c#, javascript, .net, asp.net-mvc-3

我想在 javascript 函数中访问 ac# 变量值，其代码类似于下面的代码段：

`@{ var i=0; }`

`....`

`<script type="javascript">`

`function MyObjects(e) {`

`for (j = 0; j <= @i; j++) {....}`

`</script>`

`.....` `{ i=@i+1;}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:34:22.790

您不能从 JavaScript “访问” C# 变量，因为 C# 代码在服务器端运行以呈现 HTML，而包含生成的 JavaScript 的 HTML 在客户端浏览器中运行。

如果您想将 C# 变量的值呈现到客户端上运行的 JavaScript 代码中，您的代码

```
for (j = 0; j <= @i; j++) {....} 
```

就是这样做的。

但是，如果您期望

```
{ i=@i+1;} 
```

在客户端运行并影响服务器上的状态，它不会。

**解决方案**

如果您需要通过 JavaScript 更新服务器上某些内容的状态而不将 HTML 页面发送回服务器，则可以使用 Ajax 回调来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:38:29.643

您可以轻松地将 C#/Razor 值作为字符串获取。

```
<script type="text/javascript">
    var i = parseInt("@i");
</script> 
```

# image - 使用 servlet 从 Oracle 表中不显示图像

> ID：11724624
> 
> 赞同：0
> 
> 时间：2012-07-30T15:31:32.310
> 
> 标签：image, servlets, oracle10g, blob, data-retrieval

经过长时间的尝试，我终于可以成功上传一张**图片**到一个`oracle database`. 至少我的代码是这样说的。但是为了检查图像是否成功，我写了一个`servlet`. 运行后`servlet`，我的浏览器出现黑屏，没有别的。`servlet`代码是：

```
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.sql.Blob;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class DisplayImage extends HttpServlet {
private static final long serialVersionUID = 1L;
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException  {
    // TODO Auto-generated method stub
     try {
         Class.forName("oracle.jdbc.driver.OracleDriver");  
         String url = "jdbc:oracle:thin:@localhost:1521:XE";
         Connection con = DriverManager.getConnection(url,"system","root");
            PreparedStatement ps = con.prepareStatement("select image from insertimage");
            ResultSet rs = ps.executeQuery();
            rs.next();
            Blob  b = rs.getBlob("image");
            response.setContentType("image/jpeg");
            response.setContentLength( (int) b.length());
            InputStream is = b.getBinaryStream();
            OutputStream os = response.getOutputStream();
            byte buf[] = new byte[(int) b.length()];
            is.read(buf);
            os.write(buf);
            os.close();
        }
        catch(Exception ex) {
             System.out.println(ex.getMessage());
        }
    } 

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        processRequest(request, response);
    } 
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        processRequest(request, response);
}

  } 
```

顺便说一句，由于我对此完全陌生，因此我从这个[文件上传和显示演示](http://www.srikanthtechnologies.com/blog/java/fileupload.aspx)中获得了广泛的帮助。 **编辑：**如果只从 FF 查看，我会得到黑屏，但如果从 Eclipse 的内部 Web 浏览器查看，它会显示一个单词`upload`。很奇怪的行为！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:59:08.473

使用调试器或代码中的跟踪来查看它执行了什么。

使用 Firebug 查看响应包含的内容。

并修复从 blob 到输出流的读取和写入：`InputStream.read()`不一定一次读取所有字节。它返回实际读取的字节数。您应该循环直到此方法返回 -1 以指示已读取所有内容。阅读[Java IO 教程](http://docs.oracle.com/javase/tutorial/essential/io/bytestreams.html)。

# javascript - 为什么单选按钮的文本无法显示？

> ID：11724627
> 
> 赞同：2
> 
> 时间：2012-07-30T15:31:40.453
> 
> 标签：javascript, jquery, html

为什么运行以下代码时单选按钮的文本无法呈现：

```
<div id='sctices'></div>​

var result = [
               {"id":"G84","value":"Mman, J"},
               {"id":"G95","value":"Ekara, G"},
               {"id":"G98","value":"Gedala, PS"}
             ];

var key, count = 0;
for(key in result) 
{
  var btnId = result[key].id;
  var btnValue = result[key].value;

    var radio = $("<input></input>",
    {
         type: 'radio',
         name: 'gtice',
         class: 'radio-default',
         checked: false,
         value: btnValue,
         id: btnId,
         text: btnValue
    });

//radio.text(btnValue);// did not work
radio.insertAfter("#sctices");
radio.wrap("<div></div>");
} 
```

请帮忙。奇怪的是，文本出现在生成的源代码中。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:35:47.083

这是因为`radio`输入不显示任何文本。一般的做法是`label`在它旁边使用一个元素。尝试添加这一行：

```
var $label = $("<label></label>").text(btnValue).prepend(radio); 
```

[**示例小提琴**](http://jsfiddle.net/pm7ZQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:36:02.303

这是我的版本

在我看来，源看起来更干净[DEMO](http://jsfiddle.net/mplungjan/T8KRd/)

```
var result = [
    {
    "id": "G84",
    "value": "Mman, J"},
{
    "id": "G95",
    "value": "Ekara, G"},
{
    "id": "G98",
    "value": "Gedala, PS"}
];

var key, count = 0;
for (key in result) {
    var btnId = result[key].id;
    var btnValue = result[key].value;
    var $div = $('<div/>');
    var $radio = $("<input/>", {
        type: 'radio',
        name: 'gtice',
        class: 'radio-default',
        checked: false,
        value: btnValue,
        id: btnId,
    });

    var $label = $("<label/>",{ 'for' : btnId}).text(btnValue);
    $("#sctices").append($div.append($radio).append($label));
 } 
```

* * *

结果：

```
<div id="sctices">
  <div>
    <input type="radio" name="gtice" class="radio-default" value="Mman, J" id="G84">
    <label for="G84">Mman, J</label>
  </div>
  <div>
    <input type="radio" name="gtice" class="radio-default" value="Ekara, G" id="G95">
    <label for="G95">Ekara, G</label>
  </div>
  <div>
    <input type="radio" name="gtice" class="radio-default" value="Gedala, PS" id="G98">
    <label for="G98">Gedala, PS</label>
  </div>
</div> 
```

# oracle - oracle删除重复行

> ID：11724635
> 
> 赞同：0
> 
> 时间：2012-07-30T15:32:03.677
> 
> 标签：oracle, oracle11g

以下查询不应该适用于删除 oracle 中的重复行吗

```
SQL> delete from sessions o 
      where 1<=(select count(*) 
                  from sessions i 
                 where i.id!=o.id 
                   and o.data=i.data); 
```

似乎删除了所有重复的行！（我希望保持1强硬）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:56:45.653

您的声明不起作用，因为您的表至少有一行，其中两个不同`ID`的 ' 共享相同的值`DATA`。

尽管您的*意图*可能是查找`DATA` `ID`by的不同值`ID`，但您的 SQL*所说*的实际上是基于集合的：“将我的表视为一个整体。如果表中有任何行`DATA`相同，但`ID`是不同的（即，inner`COUNT(*)`大于 0），然后`DELETE`是表中的每一行。”

您可能正在尝试特定的、基于行的逻辑，但您的陈述是全局的（基于集合的）。例如，其中没有任何内容可以挑出重复的行，例如 Ollie 所链接的解决方案。

# html - 为什么通过链接加载页面时我的字体呈现不同？

> ID：11724637
> 
> 赞同：0
> 
> 时间：2012-07-30T15:32:11.020
> 
> 标签：html, css, webfonts

通过链接加载网站时，我在网站上遇到了一个奇怪的问题。

以下是两个不同的实例：

1.  通过 URL 栏加载[http://www.visioncreativegroup.com.au 。](http://www.visioncreativegroup.com.au)字体按预期加载（中等重量）。
2.  访问[http://www.wpagroup.com.au](http://www.wpagroup.com.au)并单击页脚中的“视觉网站”链接。[如该屏幕截图](http://cl.ly/image/2s143D33193t)所示，字体要粗得多。

正在使用@font-face 加载字体。

以前有没有人偶然发现过类似的问题？这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:49:57.537

试试这个...

```
.semi {
    font-family: 'AauxNext-SemiBold',sans-serif;
    font-weight: normal;
} 
```

它在 Mac 上的 Firefox 中显示为粗体，就像在屏幕截图中一样。如果添加 font-weight: normal; 它不再是粗体。我认为Firefox和其他人以不同的方式呈现字体，可能与它是半粗体有关？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:39:50.457

我认为您可以尝试像素而不是百分比。

```
font-size:xxpx;  instead of percentage. 
```

我不确定，它可以帮助你。

# windows - XP 和 Windows 7 中的 RASPHONE.exe 行为

> ID：11724639
> 
> 赞同：0
> 
> 时间：2012-07-30T15:32:15.523
> 
> 标签：windows, winapi, modem, ras

我使用“ShellExecuteEx”从我的 C 代码中调用“Rasphone.exe”来创建拨号连接。我在 Windows XP 和 Windows 7 上发现了不同的行为。

Windows XP 中的行为：创建 RASDial 连接时没有任何弹出窗口。

Windows 7 中的行为： 拨号窗口弹出询问要拨打的号码。我没有输入任何号码，然后单击“拨号”按钮。连接得到连接。下面是我在 Windows 7 中获得的快照窗口？

![在此处输入图像描述](../Images/1495d4c3d9b51a31f6fab994a4392adb.png)

行为差异的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:19:17.407

> 行为差异的原因是什么？

Windows 7 是与 Windows XP 不同的操作系统。在发明 Metro 之前，Windows 团队无事可做，所以他们坐在那里修改一堆旧代码，看看是否有人注意到。看起来你已经找到了他们改变的事情之一。

不过不用担心。你拥有的代码一开始就注定失败。拨号网络连接的正确方法不是启动网络拨号应用程序，而是调用为此目的提供的 API。

您想要的 API 的名称是 WinINet，您可以在[此处](http://msdn.microsoft.com/en-us/library/aa385331)找到它的文档。特别是，您将对“[建立与 Internet 的拨号连接”](http://msdn.microsoft.com/en-us/library/aa384005.aspx)部分感兴趣，其中提到了[`InternetDial`功能](http://msdn.microsoft.com/en-us/library/aa384587.aspx)。

当然，他们也改变了这一点。从 Windows Vista 开始，此函数在内部使用[RAS API](http://msdn.microsoft.com/en-us/library/aa446739.aspx)来建立连接。[`RasDial`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa377004.aspx)通过直接调用or[`RasDialDlg`](http://msdn.microsoft.com/en-us/library/aa377020.aspx)函数跳过中间人。

# php - PHP url 路由正则表达式

> ID：11724640
> 
> 赞同：1
> 
> 时间：2012-07-30T15:32:15.670
> 
> 标签：php, regex

我正在使用正则表达式来路由我的应用程序，这是我正在使用的正则表达式：

```
@/users/([a-zA-Z0-9\-\_]+)/posts@ 
```

但不幸的是，它也与这些网址匹配：

```
/users/:uid/posts/:pid
/users/:uid/posts/:pid/comment/:cid 
```

但它不应该，它应该匹配完全相同的网址，所以只有：

```
/users/:uid/posts 
```

我应该在正则表达式中更改什么以使其匹配完全相同的字符串？

感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:35:10.087

您应该在字符串的开头 ( ) 和结尾 ( ) 中包含[锚点：](http://php.net/manual/en/regexp.reference.anchors.php)`^``$`

```
@^/users/([a-zA-Z0-9\-\_]+)/posts/?$@ 
```

我还允许`/`在 URL 的末尾添加一个可选的。

# java - 在使用 Java（或其他语言）的 Windows 机器上通过 SSH/Telnet 连接到 linux 服务器？

> ID：11724650
> 
> 赞同：-1
> 
> 时间：2012-07-30T15:32:30.093
> 
> 标签：java, windows, linux, connect

我的主要目标：通过 Windows 机器上的 linux 服务器收集特定信息。我希望该程序向用户询问所需的信息，并且该程序将使用软件中“硬编码”的凭据登录 linux 服务器，并获取用户请求的适当特定信息。

我的情况：这个程序将用于不同的操作系统（Mac、Windows、Linux 等）。我已经编写了一个执行我想要的任务的 Perl 脚本，但是要运行该脚本，您必须在 linux 服务器上，但我希望用户不必登录到 linux 服务器。我的电脑上确实有 PuTTy，我用它来登录 linux 服务器。我不知道这是否有用。

我的程序步骤：

1) 一旦用户打开程序，GUI 将显示用户与之交互的不同元素。这些元素要求提供有助于通过 linux 服务器获取特定信息的信息。

2）连接到linux服务器。这是棘手的部分。例如，如果我用 Java 编写代码，使用 Swing 制作一个普通的应用程序并且我在 Windows 机器上运行，我如何才能直接连接到 linux 服务器，输入命令，并获取输出信息并将其发送到文本文件？

3) 将本应输出到终端屏幕的信息发送到 linux 服务器和/或本地的文本文件。

4) 收尾......（关闭终端，告诉用户成功或失败等）。

就像我上面说的，我写了一个 Perl 脚本，你可以运行它并获取所有信息并将输出发送到一个文本文件并做我想做的每一件事，但我希望它更具交互性和“用户-friendly”，并且不必让用户登录到 linux 服务器，只需打开一个程序并单击几个按钮。该程序将登录（此登录信息每次都是相同的用户名和密码）到 linux 服务器，将所需的信息发送到文本文件，并为它们做所有事情。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:50:48.807

Putty 网站上的 Plink 程序应该可以做你想做的事。请参阅[http://the.earth.li/~sgtatham/putty/0.62/htmldoc/Chapter7.html#plink](http://the.earth.li/~sgtatham/putty/0.62/htmldoc/Chapter7.html#plink)问题出在 SSH 指纹上，必须第一次从腻子本身确认，而不是从 plink 确认。

# java - WCF 方法中的“Out”变量将在 Java 客户端中工作吗？

> ID：11724651
> 
> 赞同：0
> 
> 时间：2012-07-30T15:32:31.830
> 
> 标签：java, wcf

我有一个 WCF Web 服务方法，它返回一个 List<> 对象，并且在其方法签名中还有一个 out 变量，如下面的代码所示。这适用于 Java 客户端吗？我正在尝试创建与 Java 兼容的 Web 服务。**我担心的是 out 变量**，因为我知道 List<> 的返回类型将被 Java 接受，因为 'Contract' 类只是一个具有整数或字符串属性的类。

```
 List<Contract> GetContractsWithcount(out int totalCount, string contractSearchText, int startRowIndex, int maximumRows) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:41:12.760

简短的回答是 out 关键字在 Java 中不起作用，但请参阅以下链接以获取可能有效的解决方法示例。

[Java 有类似 C# 的 ref 和 out 关键字吗？](https://stackoverflow.com/questions/2806545/does-java-have-something-like-cs-ref-and-out-keywords)

# java - Java与树的组合

> ID：11724654
> 
> 赞同：1
> 
> 时间：2012-07-30T15:32:48.610
> 
> 标签：java, data-structures, tree, combinatorics

对于我目前正在处理的一个项目，我正在处理一个整数列表，其形式如下：

```
{[1,2];[5];[3,6,7]} 
```

这里的想法是，我试图将一个 n 维数组解析为在我碰巧看到的任何特定轴上出现的局部最大值的列表。我的问题是：我想列出这个 n 维空间中的点的列表，其中包含该列表中所有可能的条目组合。例如，我希望以上内容返回：

```
{[1,5,3];[1,5,6];[1,5,7];[2,5,3];[2,5,6];[2,5,7]} 
```

订购对我来说实际上并不重要。我如何解决这个问题的第一个想法是将其归结为一棵树，其中每个路径代表一个可能的组合并输出每个可能的路径，但我真的不确定这是否是最好的方法，我我对 Java 的树类不够熟悉，因此不确定这是否真的可以直接实现。想法？

啊，我的错误，完全重复。

# visual-c++ - LNK2019 未解析的外部符号 user32.lib

> ID：11724656
> 
> 赞同：0
> 
> 时间：2012-07-30T15:32:54.930
> 
> 标签：visual-c++

我不知道为什么会收到此错误：

test_project.obj：错误 LNK2019：函数 _WinMain@16 中引用的未解析外部符号“int __cdecl run(void)”(?run@@YAHXZ)

代码如下：

```
 #include "stdafx.h"
            #include "test_project.h"
            #include <Windows.h>

            HWND ghMainWnd = 0;

            bool InitWindowsApp (HINSTANCE instanceHandle, int show);

            int run();

            LRESULT CALLBACK
            WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam);

            int WINAPI
            WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR pCmdLine, int nShowCmd) {
                if (!InitWindowsApp (hInstance, nShowCmd) )
                    return 0;
                return run();
            }

            bool InitWindowsApp (HINSTANCE instanceHandle, int show) {
                WNDCLASS wc;
                wc.style        = CS_HREDRAW | CS_VREDRAW;
                wc.lpfnWndProc  = WndProc;
                wc.cbClsExtra   = 0;
                wc.cbWndExtra   = 0;
                wc.hInstance    = instanceHandle;
                wc.hIcon        = LoadIcon( 0, IDI_APPLICATION );
                wc.hCursor      = LoadCursor( 0 , IDC_ARROW );
                wc.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);
                wc.lpszMenuName = 0;
                wc.lpszClassName = L"BasicWndClass";

                if (!RegisterClass(&wc) ) {
                    MessageBox(0, L"RegisterClass FAILED", 0, 0);
                    return false;
                }

                ghMainWnd = CreateWindow (
                    L"BasicWndClass",
                    L"Win32Basic",
                    WS_OVERLAPPEDWINDOW,
                    CW_USEDEFAULT,
                    CW_USEDEFAULT,
                    CW_USEDEFAULT,
                    CW_USEDEFAULT,
                    0,
                    0,
                    instanceHandle,
                    0);

                if (ghMainWnd == 0) {
                    MessageBox ( 0, L"CreateWindow FAILED", 0, 0);
                    return false;
                }
                ShowWindow (ghMainWnd, show);
                UpdateWindow (ghMainWnd);

                return true;
            }

            int Run() {
                MSG msg = {0};

                BOOL bRet = 1;
                while ((bRet = GetMessage(&msg, 0, 0, 0)) != 0) {
                    if (bRet == -1)
                    {
                        MessageBox(0, L"GetMessage FAILED", L"Error", MB_OK);
                        break;
                    }
                    else {
                        TranslateMessage(&msg);
                        DispatchMessage(&msg);
                    }
                }
                return (int)msg.wParam;
            }

            LRESULT CALLBACK
            WndProc ( HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam) {
                switch(msg) {
                case WM_LBUTTONDOWN:
                    MessageBox(0, L"Hello, World", L"Hello", MB_OK);
                    return 0;
                case WM_KEYDOWN:
                    if (wParam == VK_ESCAPE)
                        DestroyWindow(ghMainWnd);
                    return 0;
                case WM_DESTROY:
                    PostQuitMessage(0);
                    return 0;
                }

                return DefWindowProc (hWnd, msg, wParam, lParam);
            } 
```

在属性页->c/c++->general->additional include 目录中，我放置了包含 lib 的目录：C:\Program Files\Microsoft SDKs\Windows\v7.1\Lib

在属性页->链接器->输入->附加依赖项中，我已将完整路径放入库 C:\Program Files\Microsoft SDKs\Windows\v7.1\Lib\user32.lib

在属性页->链接器->系统->子系统中，我放置了 Windows (/SUBSYSTEM:WINDOWS)

我不知道接下来要尝试什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:36:46.517

C++[区分大小写](https://stackoverflow.com/q/503218/464709)。您必须决定是命名您的函数`run()`还是`Run()`.

```
int run();

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
                   PSTR pCmdLine, int nShowCmd) {
    if (!InitWindowsApp (hInstance, nShowCmd) )
        return 0;
    return run();  // <-- There.
} 
```

相对：

```
int Run() {
    // ...
} 
```

# php - PHP、Date() 和 fopen

> ID：11724657
> 
> 赞同：0
> 
> 时间：2012-07-30T15:32:54.747
> 
> 标签：php, date, fopen

我有一个错误系统，它接受**date()**和错误并将其插入到文件中：

```
$fp = fopen('errorFile.txt', 'a');
$message = "At the time: " . date("Y,m,d\|H:i:s") . " the following error took place: " . $e->getMessage();
fwrite($fp, $message);
fclose($fp); 
```

**我的问题：**对于从第二个参数的 fopen 开始，我需要将**指针放在开头**并查看手册，并且我需要**仅写入**参数，**将指针放在开头而不是将文件截断为零长度**，我唯一发现的是参数**'a** **'**除了**每次都在末尾的指针**之外，所有的参数都很好，所以如果有人知道我可以使用什么参数，**那么开头的指针**和它是**只写**的它**不会将文件截断为零长度**，我也在尝试插入日期，**例如**：这里的时间是**18:00 插入的时间是 15:00**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:37:29.543

你可以试试这个逻辑

```
$message = "At the time: " . date("Y,m,d\|H:i:s") . " the following error took place: " . $e->getMessage();

$file = '/path/to/file';

$fileContents = file_get_contents($file);

file_put_contents($file, $message . $fileContents); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-07T14:13:57.147

要在开始时获得指针，您需要使用 fseek 函数，例如：

```
fseek($fp, 0);//place pointer at beginning 
```

在 fseek 之后，您可以使用 fwrite 写入文件

```
$fp = fopen('errorFile.txt', 'a');
$message = "At the time: " . date("Y,m,d\|H:i:s") . " the following error took place: " . $e->getMessage();
 fseek($fp, 0);
fwrite($fp, $message);
fclose($fp); 
```

有关 fseek 的更多详细信息，您可以参考[PHP 文档](http://php.net/manual/en/function.fseek.php)

# javascript - 在 Internet Explorer 上遇到 jquery 问题

> ID：11724659
> 
> 赞同：0
> 
> 时间：2012-07-30T15:32:59.340
> 
> 标签：javascript, jquery, html, internet-explorer, internet-explorer-9

我在让一些 jquery 在 Internet Explorer 上工作时遇到问题......有时它似乎工作，有时它似乎不起作用。虽然 chrome/firefox 没有问题，但我不明白这些问题的原因是什么。

我不包括文件中的 jquery 源，而是将文件内联到文件中。我已经把它分成几行，就像他们在实际的 jquery.min.js 中所做的那样，所以这不应该引起任何问题。

其余的 HTML 都在一行上，这一行的长度会引起问题吗？当单击页面上的某些链接并且列表器应该在 click() 函数上激活时，它只会打开 Windows 资源管理器工具，而不是捕获它并激活 e.preventDefault()。

我可以向你们展示 JS 的源代码，但我知道它工作正常，正如我在 chrome/firefox 上所说的那样，所以我觉得 Internet Explorer 存在一些我不知道的隐藏问题。我已经列出了这个问题的所有可能的细节和原因......请帮忙？感谢任何信息，我可以回答任何问题以使其正常工作:)

编辑：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-type" content="application/octet-stream" /><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /><!-- JQUERY 1.7.2 HERE --></head><body><!-- HTML IS HERE WITH LOTS OF DIVS --><!-- JQUERY CODE HERE --></body></html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T11:01:20.073

javascript 也有同样的问题，它在 Chrome 和 Firefox 下完美运行，似乎完全无法在 IE 上加载，我惊讶地发现，如果你的代码中有 console.log，Internet Explorer 没有执行你的 javascript，使用用于调试（或其他目的），感谢stackoverflow，我对此有所了解。

因此，如果 IE 中的所有内容似乎都可以与 Dev 一起正常工作。打开工具（F12），然后从脚本中删除 console.log 后一切都会好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:37:28.810

如果您有任何 console.log 语句，请将它们取出。如果启用开发者工具 (F12)，IE 将工作。否则，它将停止使用 console.log 执行代码。

最好的测试方法是打开开发者工具，然后查看代码在 IE 中是否有效。如果是这样，那么删除语句应该可以解决问题。

# objective-c - UITableView 多选

> ID：11724660
> 
> 赞同：2
> 
> 时间：2012-07-30T15:33:09.397
> 
> 标签：objective-c, xcode, uitableview

我有一个 uitableview，其中包含从预定义的 nsarray 填充的 50 行。

如何选择多行，一次最多允许 3 行，并在选择时显示检查并在取消选择时删除检查/

我对 xcode 真的很陌生，非常感谢任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:47:50.297

您的数据需要跟踪它是否被选中。

两种常见的方法是：预定义数组中的每个对象都有一个 BOOL 指示它是否被选中，或者您保留第二个数组，该数组仅包含对选定对象的引用。由于您只能选择三个，因此第二个选项可能会更好。

当有人在您的表格中选择一个单元格时，您会更改相关对象的选择状态，或者切换其 BOOL 或在额外数组中添加/删除它。这也是检查您是否已经拥有尽可能多的选择的地方。如果选择发生了变化，您将告诉您的表重新加载数据。

在`cellForRowAtIndexPath:`您检查对象是否被选中并相应地标记它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T15:48:30.623

```
int counter = 0; //keep track of how many rows are selected
int maxNum = 3; //Most cells allowed to be selected

//Called when the user selects a row
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    //If the cell isn't checked and there aren't the maximum allowed selected yet
    if (cell.accessoryType != UITableViewCellAccessoryCheckmark && counter < maxNum)
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        counter++;
    }
    else if (counter >= maxNum) return; //Don't do anything if the cell isn't checked and the maximum has been reached
    else //If cell is checked and gets selected again, deselect it
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
        counter--;
    }
} 
```

您可能还希望保留所选单元格的索引数组，以防您想对其中的数据执行某些操作。如果您不知道如何执行此操作，请告诉我，我将添加代码。

笔记：

*   您需要实现表视图委托协议才能正确调用此方法。
*   这不是做到这一点的“最佳”方式（使用单元格内容来跟踪选择通常不受欢迎）但它非常容易。
*   您可能会遇到单元重用的问题。如果要解决此问题，请存储单元格的索引并将附件类型设置为`cellForRowAtIndexPath`

# regex - 简单网址的正则表达式

> ID：11724663
> 
> 赞同：0
> 
> 时间：2012-07-30T15:33:14.067
> 
> 标签：regex, url

我正在寻找简单 URL 的正则表达式

*   `http://www.google.com`
*   `http://www.yahoo.in`
*   `http://www.example.eu`
*   `http://www.example.net`
*   等等

不允许有子目录。例如，在这种情况下，它不能验证`http://www.google.com/`, `http://www.yahoo.in/mail`。

有谁知道任何正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:35:43.747

我仍然是菜鸟，但试试这个：

```
^http:\/\/[a-zA-Z0-9_\-]+\.[a-zA-Z0-9_\-]+\.[a-zA-Z0-9_\-]+$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:52:25.267

这个应该做：

```
^(https?:\/\/)?[0-9a-zA-Z]+\.[-_0-9a-zA-Z]+\.[0-9a-zA-Z]+$ 
```

`http://`这应该适用于以或`https://`不以协议名称开头的 URL 。

正则表达式也应该用作不区分大小写的。在这种情况下，它可以缩短一点：

```
^(https?:\/\/)?[0-9a-z]+\.[-_0-9a-z]+\.[0-9a-z]+$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T15:56:53.403

如果你不关心它是否是一个有效的 url，你可以使用：

```
\S*www\.\S+ 
```

所有示例都包含 `www.`后跟一个非空格字符，但这不太可能出现在普通单词中。

# jquery - 如何将 Backgrounder jQuery 插件用作幻灯片？

> ID：11724665
> 
> 赞同：0
> 
> 时间：2012-07-30T15:33:22.237
> 
> 标签：jquery, jquery-plugins

我正在尝试使用[jQuery Backgrounder Plugin](https://github.com/bigfolio/jQuery-Backgrounder)作为幻灯片，但效果不佳。我真的很感激任何帮助。谢谢。这是我到目前为止所得到的：

**HTML：**

```
<div id="my_background">
   <img src="/img/main/home.jpg" />
   <img src="/img/main/home-2.jpg" />
</div> 
```

**jQuery 调用：**

```
$(function() {
      setInterval( $('#my_background').backgrounder({element : '#content-bg'}) , 5000 );
    }); 
```

**jQuery插件**

换行

```
var img = $(this).children('img').first(); 
```

到

```
var img = $(this).children('img').next(); 
```

它应该每 5 秒切换一次图像，但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:58:56.507

像这样的东西应该可以解决问题，而无需修改插件代码：

[http://jsfiddle.net/WZ3TL/](http://jsfiddle.net/WZ3TL/)

**HTML**

```
<div id="my_background"></div>
<div id="content-bg"></div>
​ 
```

**JS**

```
$(function() {

    //list of images
    var images = [
        'http://flickholdr.com/1200/600/landscape/bw',
        'http://flickholdr.com/1200/600/landscape/2'
    ];

    function rotate(){

        //get first images from the list
        var img = images.shift();
        //put it a the end of the list again
        images.push(img);

        //put image in source container
        $('#my_background').html('');
        $('<img/>').attr('src', img).appendTo($('#my_background'));

        //call backgrounder (again)
        $('#my_background').backgrounder({
            element: '#content-bg'
        });
    }

    //initial call
    rotate();

    //call in interval
    setInterval( rotate, 1000 );
}); 
```

​</p>

# git - 展平分支上的提交

> ID：11724666
> 
> 赞同：33
> 
> 时间：2012-07-30T15:33:28.433
> 
> 标签：git

是否可以在与主分支合并之前将分支上的提交压缩为单个提交？我认为这将是一个相当普遍的情况，但也许我没有使用正确的搜索词。

我将更详细地解释这个场景。通常，我希望在处理分支中的更改时进行许多本地提交，以确保我拥有全面的更改历史记录。但是一旦完成分支中的更改，当我合并到 main 时，我想将分支上的提交减少到一个，然后将其合并到 main。我确实知道在 Git 中提交成本很低，但在某些情况下，我可能更喜欢这样做。

```
*   merge to main
|\
* | commit 2 on main
* | commit 1 on main
| * commit 2 on branch
| * commit 1 on branch
|/
*   branch from main 
```

看起来像

```
*   merge to main
|\
* | commit 2 on main
* | commit 1 on main
| * commit on branch (branch commits flattened to one)
|/
*   branch from main 
```

我是 git 的新手。如果我在使用术语时出现错误，我深表歉意。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-31T04:02:31.123

我建议学习使用交互式变基，但如果你觉得它太复杂，你可以简单地使用

`git reset --soft <diverging-commit>`

在不更改索引的情况下撤消直到分歧点的所有提交，并且

`git commit -s`

对所有更改进行一次提交。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-30T15:35:46.643

使用交互式变基。找到您的分支与 master 分歧的提交（可以使用`git merge-base`; 让我们称之为 commit `<diverge>`），然后

```
git rebase -i <diverge> 
```

并且会弹出一个编辑器，允许您以交互方式重写历史记录。你会想要压缩提交。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-16T21:14:02.553

您还可以使用`git merge --squash <branch>`合并分支而不执行任何提交：

```
$ git checkout master
$ git merge --squash mybranch
...
Squash commit -- not updating HEAD
Automatic merge went well; stopped before committing as requested
$ git commit 
```

（更新：删除了提倡避免重写历史的文章的链接。我现在认为在审查之前压缩小功能分支是一个好习惯。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T15:37:29.013

看`git rebase`。该`-i`选项使您有机会编辑、压缩（您想要的）甚至删除提交。

比如我一般的使用方式是这样的：

```
git rebase -i origin/master
....
git push 
```

# javascript - DateBox 的 dateFormat 选项不起作用？

> ID：11724670
> 
> 赞同：2
> 
> 时间：2012-07-30T15:33:38.350
> 
> 标签：javascript, jquery, mobile, jquery-mobile, datebox

我试图让`dateFormat`jtsage 的 jQuery-mobile DateBox 插件的选项工作。我在 HTML 文档中有以下代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <script src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.core.min.js"></script>
    <script src="http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.mode.calbox.min.js"></script>
    <script src="http://dev.jtsage.com/cdn/datebox/i18n/jquery.mobile.datebox.i18n.en_US.utf8.js"></script>
</head>
<body>
    <div data-role="page">
        <input type="date" name="date" data-role="datebox" data-options='{"mode":"calbox","dateFormat":"%b %d"}' />
    </div>
</body>
</html> 
```

我的问题有两个部分：

1.  的值`dateFormat`基于此页面：[http](http://dev.jtsage.com/jQM-DateBox/demos/api/dateformat.html) ://dev.jtsage.com/jQM-DateBox/demos/api/dateformat.html 。我希望选择一个日期，它将显示在 中`dateFormat`，即 1 月 2 日、3 月 29 日等。这是正确的，还是应该以不同的方式使用？使用此代码，选择日期会生成 2012 年 1 月 2 日、2012 年 3 月 29 日等格式。

2.  我们存储在数据库中的值与我们希望日期选择器显示的值不同，即 2012-01-02 => Jan 2, Jan 2 => 2012-01-02。这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:42:35.153

[http://jsfiddle.net/PGFxZ/3/](http://jsfiddle.net/PGFxZ/3/)在这个小提琴中将你的日期格式更改为'%b/%d'，你会得到像这样的日期格式 jan/01..etc..

# java - 如何在 Servlet 中记录和查看 try-catch 块捕获的消息？

> ID：11724678
> 
> 赞同：0
> 
> 时间：2012-07-30T13:14:17.223
> 
> 标签：java

这是我的 try-catch 块：

```
try {
    return dbConnection.createStatement();
} catch(SQLException sqle) {
    // TODO SQL Exception
    System.out.println(sqle.getMessage());
} 
```

`System.out`在 Servlet中使用对象是否正确？

调试目的最简单的方法是什么？

我希望将消息打印在服务器生成的错误页面中，例如：`HTTP Status 500`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T13:19:38.060

用户很可能不关心也不理解实际错误是什么。相反，显示一个通用但生动的错误页面，并使用类似 log4j 的东西记录实际错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:37:14.290

在 servlet 中使用 System.out 是不正确的。一种选择是使用 RequestDispatcher 简单地转发到错误页面：

```
 RequestDispatcher rd = getServletContext().getRequestDispatcher("/error.jsp");
  rd.forward(request, response); 
```

此外，您可以在转发到错误页面之前将异常对象存储在请求范围内，以便自定义错误。

```
 try {
   return dbConnection.createStatement();
 }   catch(SQLException sqle) {
    // TODO SQL Exception
    request.setAttribute("ex", sqle);
    RequestDispatcher rd = getServletContext().getRequestDispatcher("/error.jsp");
    rd.forward(request, response);
  } 
```

然后在 error.jsp 上，您可以处理该异常并打印出一些详细信息。

# c# - ExpressionListInit 如何创建列表

> ID：11724682
> 
> 赞同：0
> 
> 时间：2012-07-30T15:34:14.497
> 
> 标签：c#, linq, lambda, expression

我正在尝试使用 Linq.Expression 命名空间对数组进行水合，因为这将内置到 IQueryable 投影助手中。

到目前为止，我已经设法获取列表的构造函数，识别它的类型，现在我被困在如何构建一个表达式，该表达式将遍历源列表并为这个新数组返回一个新项目以初始化.

Expression.Loop 似乎是我最好的选择，但我不知道如何让它遍历源数组并将转换后的项目还给我？

有人知道我可以从哪里开始吗？

硅

# plugins - 尝试使用插件更改 CRM 4.0 上的帐户所有者

> ID：11724684
> 
> 赞同：2
> 
> 时间：2012-07-30T15:34:22.610
> 
> 标签：plugins, dynamics-crm-4, account, owner

我正在为 Microsoft Dynamics CRM 4 创建一个插件，它将根据另一个查找字段的值更改帐户实体的所有者。现在我已经设法获得将充当帐户“所有者”的用户的 GUID。到现在为止还挺好。当我尝试更改所有者时，问题就出现了。我正在尝试使用 AssignRequest 但它不起作用。当我尝试执行请求时，我在 C# 调试器上收到 SoapException，并且 Web 服务输出一个对话框，说明：“未找到请求的记录，或者您没有足够的权限查看它”

下面是我正在使用的代码：

```
 TargetOwnedAccount target = new TargetOwnedAccount();

                    SecurityPrincipal assignee = new SecurityPrincipal();
                    assignee.Type = SecurityPrincipalType.User;
                    assignee.PrincipalId = context.InitiatingUserId;

                    target.EntityId = ownerGuid; //this is the GUID I am retrieving from the other lookup field

                    AssignRequest assign = new AssignRequest();
                    assign.Assignee = assignee;
                    assign.Target = target;

                    AssignResponse res = (AssignResponse)crmService.Execute(assign); //this is where i get the exception 
```

我希望我没有错过任何东西。任何帮助将不胜感激:)谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:09:26.420

好的，我终于设法解决了这个问题。它一直盯着我的脸 :P 我在错误的地方输入了错误的 ID。我需要将“assignee.PrincipalId”设置为“ownerGuid”，然后将“target.EntityId”设置为当前帐户 ID。新代码如下：

```
 TargetOwnedAccount target = new TargetOwnedAccount();

                SecurityPrincipal assignee = new SecurityPrincipal();
                assignee.Type = SecurityPrincipalType.User;
                assignee.PrincipalId = ownerGuid; //this is the GUID I am retrieving from the other lookup field

                target.EntityId = ((Key)entity.Properties["accountid"]).Value;

                AssignRequest assign = new AssignRequest();
                assign.Assignee = assignee;
                assign.Target = target;

                AssignResponse res = (AssignResponse)crmService.Execute(assign); 
```

不敢相信我昨天花了 8 个小时看它，然后今天我立即意识到：P

# android - 如何一次性将 ListView 保存到数据库

> ID：11724685
> 
> 赞同：0
> 
> 时间：2012-07-30T15:34:23.757
> 
> 标签：android, database, listview, listactivity, android-cursoradapter

我是 Android 编程新手，有一个基本问题。

我创建了一个`ListActivity`其中的每一行`ListView`都有一个`TextView`和一个`RatingBar`。我可以通过从预先填充的数据库中读取它们来显示`TextView`和中的值；`RatingBar`我通过自定义`CursorAdapter`和它的`bindView()`方法来做到这一点，即

```
public class MyCursorAdapter extends CursorAdapter {
    ...

    public void bindView(View view, Context context, final Cursor cursor) {
        TextView name = (TextView)view.findViewById(R.id.name);
        name.setText(cursor.getString(cursor.getColumnIndex(MyDbAdapter.KEY_NAME)));
        RatingBar rating = (RatingBar)view.findViewById(R.id.life_bar_rating);
        rating.setRating(cursor.getFloat(cursor.getColumnIndex(MyDbAdapter.KEY_RATING_VALUE)));
    }

    ...
} 
```

现在，我的问题是，`ListActivity`我希望用户能够单击“保存”按钮，以便将所有更改一次性保存到数据库中？我将如何遍历适配器以获取行 ID 和评级值，以便可以保存它们（或者有另一种更好的方法吗？）。

我想一次性保存的原因是因为我认为每次用户更改单个评分时更新数据库是一种不好的做法（即使这更容易），因为这会导致更多的磨损在闪存上。我对此可能是错误的，但我认为闪存的读写次数是有限的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:35:10.573

还记得适配器的后备数组吗？你用来初始化它的那个？保存；）

或者如果这不起作用......

```
for(int i = 0; i < listView.getAdapter().getCount(); i++)
    SaveThing(listView.getAdapter().getItem(i)); 
```

如果您需要保存的 SQLite 示例......明天。

编辑以保持评论干净：

就该对象而言-您可以自由地将其转换为列表视图中的任何内容。数据类型，而不是视图类型。

因此，例如，与字符串一起使用的 arrayAdapter 仍然返回对象。但是您肯定会将它们转换为字符串，因为您知道这就是您放入的内容。这很尴尬，但就是这样。

# graph-theory - 有多少个图有 10 个节点和 2 条边

> ID：11724697
> 
> 赞同：1
> 
> 时间：2012-07-30T15:35:21.667
> 
> 标签：graph-theory, combinatorics

准备考试 我对以下练习有疑问：
存在多少个正好有 10 个节点和 2 条边的无向图？

我的方法：
我需要 3 或 4 个节点来绘制 2 条边。

所以我有

10 选择 3 = 120
和 10 选择 4 = 210
= 330 种可能性？！

这是正确的还是我错过了什么？

**编辑：**允许孤立节点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:43:42.977

我看到它的方式可能完全偏离基础，您有两个选择：

```
A---B
|
C 
```

和

```
A---B

C---D 
```

在这两种情况下，都有 90`A---B`种组合 (10 * 9)。

在第一种情况下，C 有 8 个选项，它可以连接到 A 或 B，所以你有`10 * 9 * 8 * 2 = 1440`图表。

在第二种情况下，C 有 8 个选项，D 有 7 个选项，所以你有`10 * 9 * 8 * 7 = 5040`图表。这些总和是 6480 个图。

这不**处理**两条边都连接相同节点 ( `A==B`) 的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:02:50.030

你不远了。

案例 #1：3 个节点连接在一起。选择 3 个节点后，您必须选择哪个节点位于中间

案例 #2：连接了 2 对不同的节点。选择 4 个节点后，您仍然必须选择它们的连接方式。

不过，更简单的方法是计算可能边的总数：10 选择 2。然后，在这些可能性中，选择其中的两个。

# python - Python2 正则表达式似乎有问题

> ID：11724699
> 
> 赞同：2
> 
> 时间：2012-07-30T15:35:41.297
> 
> 标签：python, regex, python-2.7

在 Linux 上使用 Python 2.7.3。这是一个逐字的shell会话。

```
>>> f = open("feed.xml")
>>> text = f.read()
>>> import re
>>> regexp1 = re.compile(r'</?item>')
>>> regexp2 = re.compile(r'<item>.*</item>')
>>> regexp1.findall(text)
['<item>', '</item>', '<item>', '</item>', '<item>', '</item>', '<item>', '</item>']
>>> regexp2.findall(text)
[] 
```

这是一个错误，还是我对 Python 正则表达式不了解？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T15:39:49.967

默认情况下， '。' 不匹配换行符。尝试

```
regexp2 = re.compile(r'<item>.*</item>', re.DOTALL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:37:53.623

这是这个问题的最佳答案：不要使用正则表达式来解析非正则语言，例如 XML。[它让一位 SO 用户发疯。](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454) [另一个相关链接。](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)

# spring - Apache WebServer + Tomcat + Spring + Https

> ID：11724706
> 
> 赞同：0
> 
> 时间：2012-07-30T15:35:51.187
> 
> 标签：spring, apache, tomcat, https

我有一个在 http 上运行的应用程序，然后我尝试通过 https 创建登录页面。早期的 apache web server 用于通过 ajp 协议将请求转发给注册 worker 的 tomcat。现在我在 中添加了一个密钥和证书，`/etc/apache2/crt`即. 里面还有一个文件。用于上述证书生成的命令来自[http://www.akadia.com/services/ssh_test_certificate.html](http://www.akadia.com/services/ssh_test_certificate.html)我没有完成第 6 步，因为其中有两个文件：和. 我更改了两行：`ssl.key``ssl.crt``certificate.csr``/etc/apache2/sites-available``default``default-ssl``default-ssl`

```
SSLCertificateFile    /etc/apache2/crt/certificate.csr
SSLCertificateKeyFile /etc/apache2/crt/ssl.key 
```

我还更改`server.xml`了 tomcat 以在 8446 后接收 https：

```
<Connector port="8446" protocol="HTTP/1.1" SSLEnabled="true"
          maxThreads="150" scheme="https" secure="true"
          clientAuth="false" sslProtocol="TLS" 
          keystoreFile="/etc/apache2/crt/ssl"
          keystorePass="password"/> 
```

我也改变了`web.xml`，它现在还包含：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Secure Login</web-resource-name>
        <url-pattern>/login/*</url-pattern>
     <!--   <url-pattern>/other/secure/stuff/*</url-pattern> -->
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

我试过了`curl -Iv https://localhost`，`curl -Iv https://localhost:8446`但出现以下错误：

```
About to connect() to localhost port 8446 (#0)
*   Trying 127.0.0.1... Connection refused
* couldn't connect to host
* Closing connection #0
curl: (7) couldn't connect to host 
```

请让我知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T01:24:09.600

`SSLCertificateFile`应该指向您的`ssl.crt`文件而不是`ssl.csr`（这仅对提交给您的证书颁发机构以请求证书有用......之后，CSR 根本没有用）。

如果您让 Apache httpd 执行您的 SSL 终止（这就是为什么您会在其中使用`SSLCertificateFile`其他指令），那么您不需要在 Tomcat 中进行任何额外的设置来处理`CONFIDENTIAL`通信。

如果您想将 Tomcat 配置为接受 HTTPS 通信，那么您的`/etc/apache2/crt/ssl`文件需要是 Java 密钥库，而不是像 Apache httpd 使用的裸证书文件。Java 密钥库是更复杂的野兽，需要使用 Java`keytool`程序来操作。

我强烈建议您阅读[Tomcat 的 SSL Howto](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)，它为您提供了有关如何正确设置密钥库并在 Tomcat 中配置它的分步指导。

# php - 如何实现一个简单的 Android OAuth 和服务器 API

> ID：11724716
> 
> 赞同：8
> 
> 时间：2012-07-30T15:36:25.527
> 
> 标签：php, android, authentication, oauth

我有一个将数据发送到我的网络服务器的 android 应用程序（数据由 php 处理并存储在 mysql db 中）。出于安全原因，我需要验证发送数据的用户是否是他/她所说的他/她。

我不想验证登录名/密码，我宁愿使用手机的注册（帐户管理员）谷歌帐户，例如联合登录。我玩弄了 [nick johnson 的 GAE 示例](http://blog.notdot.net/2010/05/Authenticating-against-App-Engine-from-an-Android-app)，但它特定于基于 GAE 的应用程序，并且不允许与我自己的服务器 API 集成，因此身份验证不起作用（我得到一个 google authToken，但它对我的服务器 API 没有意义） .

据我了解，最安全+最简单的解决方案是使用 OAuth。

但我完全难以理解 OAuth（我理解它的概念，但找不到任何我可以实现的例子）。

有没有人有类似功能示例的东西，我可以根据自己的需要进行调整和调整？提前谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-08T10:12:49.630

当用户第一次登录或使用您的应用程序时，您应该捕获他/她的设备 MAC 地址，并将其存储到数据库中，您可以使用此 MAC 地址轻松验证用户身份

# php - PHP快速替换字符之间字符串中的内容的方法

> ID：11724719
> 
> 赞同：2
> 
> 时间：2012-07-30T15:36:29.473
> 
> 标签：php, variables, str-replace

在创建自动电子邮件时，电子邮件的某些部分需要用存储的数据替换。

例如。亲爱`%first_name% %surname%`的，感谢您参加`%place_name%`。

这可以通过对它们中的每一个进行字符串替换来完成，但必须有更快的方法。

假设变量名称与我们想要的系统名称相同，例如。`%first_name%`应该换成`$user['first_name']`等……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:38:40.050

您可以利用数组值[`preg_replace_callback`](http://php.net/preg_replace_callback)替换 's 之间的键：`%`

```
$fields = array('first_name' => 'Tim', 'place_name' => 'Canada');

$string = preg_replace_callback('/%(.+?)%/', function($arr) use($fields)
{
    $key = $arr[1];
    return array_key_exists($key, $fields) ? $fields[$key] : $arr[0];
}, $string); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:10:49.973

一种选择：

```
$vars = array(
  'firstname' = 'Bob',
  'surname' = 'Dole',
  'place' = 'Las Vegas',
  // ...
);
extract($vars);
include('my_template.phtml'); 
```

在 my_template.phtml 中：

```
<?php
echo <<<EOF
    Dear $firstname $surname,<br>
    Thank you for attending the Viagra and Plantains Expo in $place.
EOF;
?> 
```

如果您在使用 时担心名称冲突[`extract()`](http://tw.php.net/manual/en/function.extract.php)，您可以随时使用该`EXTR_PREFIX_ALL`选项或其他提取方法之一。

或者，更好的是，不要重新发明轮子。只需使用[Smarty](http://www.smarty.net/)或[mustache.php 即可](https://github.com/bobthecow/mustache.php/)。

另请参阅此问题：[带变量的 PHP 模板类？](https://stackoverflow.com/questions/2564352/php-template-class-with-variables)

# java - 在单元测试中模拟控制器标准...... grails

> ID：11724722
> 
> 赞同：2
> 
> 时间：2012-07-30T15:36:35.217
> 
> 标签：java, hibernate, grails, junit, criteria

在我的控制器中，我有一个使用条件来命中数据库并获取结果的操作。

```
def c = DomainObj.createCriteria()
def result =[]
result = c.list(params) {
    'eq'("employerid", id)
    } 
```

我试图在我的单元测试中模拟这个标准。

```
def mycriteria =[
list: {Closure cls -> new DomainObj(id:1)}
]                                   ]
DomainObj.metaClass.static.createCriteria = {mycriteria} 
```

以上不起作用。执行 c.list(params) 时会抛出异常。例外是“groovy.lang.MissingMethodException：没有方法签名：testSearch_closure3.docall() 适用于争论类型：

PS-但是，如果我从控制器中的 c.list() 中删除参数，请参见下文：

```
def c = DomainObj.createCriteria()
    def result =[]
result = c.list() {
    } 
```

然后，它正在工作。不确定这里的问题是什么。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T16:12:53.323

这是因为该`list`方法的默认参数。

例如

```
def method(Object[] params = {/*no params*/}, Closure c, etc. etc.)  {...} 
```

上面可以像这样使用：

```
method(c: {...})
method(params) {...}
method(params, {...}) // this is the same as the above
method(params:new Object[]{...}, c: {...}) // and this also
//etc. 
```

您更改`metaClass`并添加`list`仅采用一个参数的方法。

所以你`mycriteria`应该看起来像这样：

```
def mycriteria = [
    list: {Object params=null, Closure cls -> new DomainObj(id:1)}
    //or recreate `list` declaration with all parameters
]
DomainObj.metaClass.static.createCriteria = {mycriteria} 
```

考虑这个例子：

```
def cl = {String a = 'x', b -> println a +','+ b}
cl("z") 
```

输出是：

```
x, z 
```

**编辑**

要更改返回的对象，您可以像以前一样：

```
class A {
}

A.metaClass.static.createCriteria = {
    [list: 
        {def a = new A(); a.metaClass.totalResult=5; a}
    ]
}

def c = A.createCriteria()
def result = c.list()
println result.totalResult 
```

# python - 如何为这些网址编写正则表达式

> ID：11724725
> 
> 赞同：2
> 
> 时间：2012-07-30T15:36:38.673
> 
> 标签：python, regex, django, urlconf

我正在尝试构建一个小型 wiki，但在为它们编写正则表达式规则时遇到了问题。

我想要做的是每个页面都应该有一个自己的编辑页面，当我在编辑页面上按下提交时，它应该将我重定向到维基页面。

我想在我的应用程序中有以下网址：

*   `http://example.com/<page_name>`

*   `http://example.com/_edit/<page_name>`

我的 URLConf 有以下规则：

```
url(r'(_edit/?P<page_name>(?:[a-zA-Z0-9_-]+/?)*)', views.edit),
url(r'(?P<page_name>(^(?:_edit?)?:[a-zA-Z0-9_-]+/?)*)', views.page), 
```

但由于某种原因，它们没有工作。

我怎样才能使这项工作？

似乎其中一个 - 或两者 - 匹配相同的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:20:00.080

按照更简洁的方法，我真的将编辑 URL 定义为：

```
http://example.com/<pagename>/edit 
```

在我的拙见中，这更加清楚和可猜测。

然后，请记住，Django 会按照您定义它们的顺序循环您的 url 模式，并在与传入请求匹配的第一个模式处停止。所以定义它们的顺序非常重要。

来回答你的问题：

`^(?P<page_name>[\w]+)$`匹配对任何 /PageName 的请求

请始终记住开始的插入符号和最后的美元符号，这表示我们希望 URL 在我们的正则表达式之前和之后分别开始和停止，否则任何前导或尾随符号/字符也会使正则表达式匹配（虽然你可能在这种情况下想要显示 404）。

`^_edit/(?P<page_name>[\w]+)$`匹配编辑 URL（或者`^(?P<page_name>[\w]+)/edit$`如果您喜欢用户友好的 URL *，通常称为 REST url，而 RESTfullnes 是一个与 URL 样式无关的概念*）。

* * *

总结将以下内容放入您的网址中：

```
url(r'^(?P<page_name>[\w]+)$', views.page)
url(r'^_edit/(?P<page_name>[\w]+)$', views.edit) 
```

*`\w`您可以通过更改您自己定义的集合轻松地强制 URL 不具有某些特定字符。*

要了解有关 Django URL 调度的更多信息，[请阅读此处](https://docs.djangoproject.com/en/dev/topics/http/urls/)。

**注意**：正则表达式既强大又危险，尤其是在网络上时。保持简单，并确保真正理解您定义的内容，否则您的 Web 应用程序可能会面临多个安全问题。

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题。——杰米·扎温斯基

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:50:57.793

请尝试以下更简单的 URL：

```
url(r'_edit/(?P<page_name>[\w-]+), views.edit)'
url(r'(?P<page_name>[\w-]+), views.page), 
```

# c# - WPF 应用程序无法处理远程桌面分辨率更改

> ID：11724729
> 
> 赞同：1
> 
> 时间：2012-07-30T15:36:42.263
> 
> 标签：c#, .net, wpf, xaml, c#-4.0

我正在开发一个 .NET 4 WPF 应用程序，就在前几天，遇到了一个非常奇特的错误。我涉及三台 Windows 7 Pro 机器：笔记本电脑（1366x768）、台式机（1680x1050，多显示器）和远程机器（分辨率未知）。我们的应用程序安装在远程机器上。

考虑以下事件：我从笔记本电脑远程桌面进入远程机器，启动我们的应用程序，并在应用程序中启动特定功能（mdi 子项）。如果我从我的桌面连接到同一个远程会话（从而关闭我的笔记本电脑上的会话），我的应用程序中的这个功能将完全无法使用。不可用，我的意思是组合框下拉菜单显示在左上角（很像[这里](https://stackoverflow.com/questions/4677701/c-sharp-strange-wpf-combobox-behavior)描述的内容），其他控件布局不正确，有些控件甚至根本不显示。鼠标坐标似乎已关闭，因为单击某些控件不再调用适当的操作。这是我见过的最奇怪的事情。

如果我关闭应用程序并在我的桌面上启动一个新实例，一切都会很好。此外，它似乎只在我在笔记本电脑上启动该功能，然后移至桌面时才会发生。永远不要反过来。

我希望我可以显示一些代码，但我什至不知道从哪里开始或显示什么。我可以说它只发生在某些功能上。一些功能可以完美地处理分辨率变化。

有没有其他人见过这些类型的症状？或者知道什么可能导致它们或如何修复它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:17:37.377

这有点尴尬。经过几个小时的“淘汰过程”，我发现另一位开发人员添加了一些非托管代码来自动最大化窗口。他们遵循的方法记录[在这里](http://blogs.msdn.com/b/llobo/archive/2006/08/01/maximizing-window-_2800_with-windowstyle_3d00_none_2900_-considering-taskbar.aspx)。此方法不适用于远程桌面会话。哈哈。

# c# - phalanger (PHP)：调用嵌套的静态 C# 类

> ID：11724731
> 
> 赞同：2
> 
> 时间：2012-07-30T15:36:52.143
> 
> 标签：c#, php, phalanger

如果没有编译器因为我......愚蠢而大喊大叫，我似乎无法让它工作。但是我有一个类，里面有另一个嵌套的静态类。我正在尝试访问它，但出现语法错误：

```
unexpected token :: 
```

我正在尝试按如下方式调用该类：

```
myLibrary\myClass::nestedClass::myFunction() 
```

第一个设置为 '::' 工作正常，但第二对导致错误。知道我如何处理这个问题吗？我的很多库都是这样写的，如果有人能帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:56:28.397

实际上有一个解决方案。傻我！为了让嵌套类脱离类，它真的很简单。查看如何从 System .NET 类中获取 DataTable 类：

```
 System\Data\DataTable 
```

您的图书馆也可以这样做。对于我上面发布的代码，只需执行以下操作：

```
 myLibrary\myClass\nestedClass::myFunction() 
```

我用 \ 替换了第一个 :: 这样编译器就知道我在找什么了！感谢您的建议，所有这些都会很好地工作，实际上可能是更好的代码实践！

# c++ - tail -n 的高效实现

> ID：11724732
> 
> 赞同：2
> 
> 时间：2012-07-30T15:36:56.387
> 
> 标签：c++

> **可能的重复：**
> [您将如何有效地实现尾部？](https://stackoverflow.com/questions/10164597/how-would-you-implement-tail-efficiently)

我的一个朋友被问到他将如何实施`tail -n`. 为了清楚起见，我们需要打印`n`指定文件的最后几行。

我想过使用一个由 n 个字符串组成的数组并以循环方式覆盖它们。但是，如果我们给定一个`10 GB`文件，那么这种方法根本无法扩展。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:42:32.517

内存映射文件，从末尾迭代寻找行尾`n`时间，从该点写入文件末尾到标准输出。

通过不映射整个文件，而只是映射最后 X kb 的内存（比如几个内存页）并在那里寻找，您可能会使解决方案复杂化。如果没有足够的行，那么内存映射一个更大的区域，直到你得到你想要的。您可以使用一些启发式方法来实现对要映射多少内存的*猜测（例如粗略估计每行 1kb）。*我不会真的这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:47:08.750

“这取决于”，毫无疑问。鉴于文件的大小应该是已知的，并且给定一个合理的文件操作库，它可以“寻找”到一个非常大的文件的末尾，而无需依次遍历每个字节或颠簸虚拟内存，您可以简单地从结束计数换行符。

但是，当您处理这么大的文件时，您如何处理`n`接近多 GB 文件中行数的退化情况？将内容存储在临时字符串中也不会扩展。

# mysql - 我将如何编写这个 SQL 脚本？

> ID：11724733
> 
> 赞同：1
> 
> 时间：2012-07-30T15:36:58.180
> 
> 标签：mysql

我有一个开发数据库，​​我会定期从 prod 数据库的数据转储中重建它。在进行初始重建后，我运行了一个清理脚本，它会做一些事情，特别是将所有电子邮件更改为开发地址，这样我们的客户就不会在我们开发时无意中收到垃圾邮件。这一直很好，直到我更改了我们的数据库的结构，以便每个客户可以拥有多封电子邮件，并且有一个独特的约束，不允许每个客户多次发送同一封电子邮件。现在我正在尝试重写我的清理脚本以将所有电子邮件更改为“xyzpdq@abc.com”，但由于唯一约束它失败了。

出于明显的原因，我不想删除我的开发数据库上的唯一约束。我需要找出一种方法来为拥有多个联系人的客户分配虚假但独特的电子邮件。

这是我的数据结构：

```
CREATE TABLE contact (
    contactid decimal(22,0) DEFAULT '0' NOT NULL,
    ...,
    PRIMARY KEY (contactid)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE contact_email (
    contactemailid decimal(22,0) DEFAULT '0' NOT NULL,
    contactid decimal(22,0) DEFAULT '0' NOT NULL,
    emailaddress varchar(255) COLLATE latin1_bin NOT NULL,
    PRIMARY KEY (contactemailid),
    CONSTRAINT ce_contactid_fk FOREIGN KEY (contactid) REFERENCES contact (contactid) ON DELETE NO ACTION ON UPDATE NO ACTION,
    INDEX ce_contactid_fk (contactid),
    CONSTRAINT ce_uniquecombokey UNIQUE KEY (contactid, emailaddress)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE merchant_contact (
    merchantcontactid decimal(22,0) DEFAULT '0' NOT NULL,
    merchantacctid decimal(22,0) DEFAULT '0' NOT NULL,
    contactid decimal(22,0) DEFAULT '0' NOT NULL,
    billingcontact tinyint(1) default '0' NOT NULL,
    PRIMARY KEY (merchantcontactid),
    CONSTRAINT mc_contactid_fk FOREIGN KEY (contactid) REFERENCES contact (contactid) ON DELETE NO ACTION ON UPDATE NO ACTION,
    INDEX mc_contactid_fk (contactid),
    CONSTRAINT mc_uniquecombokey UNIQUE KEY (merchantacctid, billingcontact)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

在我允许每个客户发送多封电子邮件之前，我的清理脚本的这一部分很简单：

```
update contact_email set emailaddress = 'xyzpdq@abc.com'; 
```

现在它由于约束而失败。我得到一个`Error Code: 1062, SQL State: 23000`（完整性约束违规）。

有什么建议么？提前致谢。我将继续自己努力，但会感谢经验丰富的 SQL 脚本编写者的建议/想法。

ETA：感谢到目前为止的想法。我遗漏的一件事是，我目前将它们全部设置为的虚假地址确实出现在我这里，因此我可以在测试时看到电子邮件。我在询问我们的操作组是否可以将类似“dev-{contactemailid}@abc.com”的内容配置为全部来找我，但我不太乐观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:41:20.663

```
update contact_email set emailaddress = CONCAT(contactemailid, 'xyzpdq@abc.com') 
```

# android - 使用字符串引用（android）在java文件顶部设置包名？

> ID：11724736
> 
> 赞同：1
> 
> 时间：2012-07-30T15:37:12.040
> 
> 标签：android

java文件上面的包名，可以设置在一个地方比如strings文件吗？

伪代码

```
 package com.website.app_name;   <=======

 imports....

 public class Main extends Activity{} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:09:44.810

不，您不能那样做，就像您不能像`import com.xyz.ABC`使用字符串一样更改导入语句。

以及为什么甚至需要这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:40:29.103

不，Java 不允许这样做...

# php - 意外令牌 < AJAX jquery

> ID：11724745
> 
> 赞同：3
> 
> 时间：2012-07-30T15:37:38.530
> 
> 标签：php, ajax, jquery

我的 AJAX 有问题。当我通过 AJAX 发送请求时，首先我从 xhr.status 返回 200（好的）。但后来，我回来了

`syntaxerror: unexpected token <`.

难道它是html标签的一部分？我的标题是应用程序/json。那么可能是什么问题呢？这是我所有的文件：

**HTML**

```
 <?
 require_once('../includes/helpers.php'); //just setting up

 session_start();

 //Google Maps API key: AIzaSyDUE08r9kD1p5QsqOzmI6_EcoUNCJntf5I

 render('header', array('title' => 'BART index'));  
        ?>

      <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDUE08r9kD1p5QsqOzmI6_EcoUNCJntf5I&sensor=false"></script>
      <script type="text/javascript">

       function initialize() { //start the map. code from google maps tutorial.
        var mapOptions = {
          center: new google.maps.LatLng(37.7750, -122.4183),
          zoom: 11,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
      }
      </script>

         <script type="text/javascript">

         $(document).ready(function() {
       $("#submit").click(function() {

            console.log($("#route").val());
            $.ajax ({
                type: "GET",
                responseType: "json",
                url: "stations.php",
                data: {
                    route: $("#route").val()
                },
                success: function(data) {
                    console.log(data);
                    var i = 1;
                    var routePathCoords = [];
                    var pathColor = data.color; 
                    console.log(data.stations);
                    $.each(data.stations, function() {
                        routePathCoords.push(new google.maps.LatLng(data.lat[i], data.longit[i]));
                        i++;
                    });

                    function initialize() { //start the map. code from google maps tutorial.
                            var mapOptions = {
                              center: new google.maps.LatLng(37.7750, -122.4183),
                              zoom: 11,
                              mapTypeId: google.maps.MapTypeId.ROADMAP
                            };

                            var map = new google.maps.Map(document.getElementById("map_canvas"),
                                mapOptions);
                          }

            },
            error:function (xhr, ajaxOptions, thrownError){
                    console.log(ajaxOptions);
                    alert(xhr.status);
                    alert(thrownError);
                }    
        });
        return false;
    });
    });

     </script>

    <? 
    render('header2'); 
    ?>

      <form id="form" class="form-inline">

    <input type="hidden"><select type="text" name="route" id="route">
        <option name="route">Pittsburg/Bay Point - SFIA/Millbrae</option>
        <option name="route">Fremont - Richmond</option>
        <option name="route">Fremont - Daly City</option>
        <option name="route">Richmond - Daly City/Millbrae</option>
        <option name="route">Dublin/Pleasanton - Daly City</option>
    </select>

    <input type="submit" value="Route" class="btn" id="submit">

      </form>

      <div id="map_canvas" style="width:500px; height:500px"></div>

   <? 
    render('footer'); 
   ?> 
```

**PHP**

```
 <?
    require_once("../includes/helpers.php");
    session_start();

    $dbh = connect_db('mysql:host=localhost;dbname=project2', '*****', '*****');

    //defining class Route
    class Route {
        public $stations = array();
        public $color;
        public $lat = array();
        public $longit = array();
    }

    header("Content-type: application/json");

    $route = htmlspecialchars($_GET['route']); //getting desired route

    //find route within database
    $query = $dbh->query("SELECT color, lat, longit, station FROM stations WHERE route='$route'");

    var_dump($query);

    if ($query->rowCount() > 0) { //does query exist?
        $route = new Route();

        foreach ($query as $row) { //getting all variable names

            $route->color = $row['color']; //then setting them to object variables

            foreach ($query as $value) {

                array_push($route->stations, $value['station']); //adding on for each station to the array
                array_push($route->lat, $value['lat']); //adding latitude
                array_push($route->longit, $value['longit']); //and longitude
            }

            break;
        }
    }

    json_encode($route);

 ?> 
```

我提前为糟糕的间距道歉。谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:40:56.567

你没有输出任何东西......改变

```
json_encode($route); 
```

到

```
echo json_encode($route); 
```

调试此类问题的最佳方法是使用诸如[firebug](https://getfirebug.com/)之类的东西——您可以看到包括内容在内的实际通信

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:40:49.390

可能是你应该删除`var_dump($query);`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T15:43:46.153

您想使用`dataType`而不是`responseType`- 请参阅[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)。也许这是问题的一部分？

# php - 原型js中的问题

> ID：11724746
> 
> 赞同：0
> 
> 时间：2012-07-30T15:37:39.137
> 
> 标签：php, javascript, sql, prototype

我正在尝试使用 ajax 更新数据库，但如果在控制台中看到，则会在错误下方出现一些错误。

```
INSERT INTO customers(customerName,contactLastName,contactFirstName, phone, addressLine1,addressLine2, city, state, postalCode,country,salesRepEmployeeNumber,creditLimit) VALUES (,,,, ,,,,,,,)
Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ',,, ,,,,,,,)' at line 1 
```

我已经突出了包含原型 ajax 代码的 JS 代码，然后是包含插入详细信息的 php 代码

你们能帮我解决这个问题吗

我的网站链接

```
http://localhost/fashionsite/customer.php 
```

我的js代码`enter code here`

```
$('submit_btn').observe('click', function(ev) {
    $('customerdetails').request({
        method: 'get',
        onFailure: function() { 
        alert("failed");
        },      
        onComplete: function(details){
            console.log(details.responseText);

            //alert("inserted success fully");
            //$("content_updated").update(details.responseText);
        }
    });
    ev.preventDefault();
}); 
```

我的PHP代码

```
<?php

include 'config.php';
include 'opendb.php';
//$sNO = $_POST["sNO"];
//$customerNumber = $_POST["customerNumber"];
$customerNames = $_POST["customerName"];
$contactLastName = $_POST["contactLastName"];
$contactFirstName = $_POST["contactFirstName"];
$phone = $_POST["phone"];
$addressLine1 = $_POST["addressLine1"];
$addressLine2 = $_POST["addressLine2"];
$city = $_POST["city"];
$state = $_POST["state"];
$postalCode = $_POST["postalCode"];
$country = $_POST["countryText"];
$salesRepEmployeeNumber = $_POST["salesRepEmployeeNumber"];
$creditLimit = $_POST["creditLimit"];

/*echo $customerNumber .'<br/>'. $customerName .'<br/>'. $contactLastName .'<br/>'. $contactFirstName .'<br/>'. $phone .'<br/>'. $addressLine1 .'<br/>'. $addressLine2 .'<br/>'. $city .'<br/>'. $state .'<br/>'. $postalCode .'<br/>'. $country .'<br/>'. $salesRepEmployeeNumber .'<br/>'. $creditLimit;*/

$sql = "INSERT INTO customers(customerName,contactLastName,contactFirstName, phone, addressLine1,addressLine2, city, state, postalCode,country,salesRepEmployeeNumber,creditLimit) VALUES ($customerNames,$contactLastName,$contactFirstName,$phone, $addressLine1,$addressLine2,$city,$state,$postalCode,$country,$salesRepEmployeeNumber,$creditLimit)";

print $sql;

//echo $sql .'<br/><br/><br/><br/>';

if (!mysql_query($sql,$conn))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

?> 
```

我已经突出了包含原型 ajax 代码的 JS 代码，然后是包含插入详细信息的 php 代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:48:08.597

您发送`GET`请求，但尝试在 php 中从`$_POST`数组中获取值。那么在 sql 中你会得到`'VALUES (,,,, ,,,,,,,)'`，这是错误的原因。

# c# - 具有默认操作的 MVC Web Api 路由不起作用

> ID：11724749
> 
> 赞同：1
> 
> 时间：2012-07-30T15:37:56.743
> 
> 标签：c#, routes, asp.net-web-api

在我的`TestController`我有以下内容：

```
 [HttpGet]
    public IEnumerable<String> Active()
    {
        var result = new List<string> { "active1", "active2" };

        return result;
    }

    [HttpGet]
    public String Active(int id)
    {
        var result = new List<string> { "active1", "active2" };

        return result[id];
    } 
```

在`RouteConfig`映射中是：

```
 routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { action = "", id = RouteParameter.Optional }); 
```

在浏览器中，以下请求有效：

```
api/test/active/1 
```

但这会返回**内部服务器错误**：

```
api/test/active 
```

您必须做什么才能以与默认 Get 类似的方式返回可能具有或不具有参数的*操作？*

**更新 1** 正如 Cuong Le 所建议的，改变路线的顺序有帮助，路线现在是：

```
 routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

我必须`action = ""`从 ActionApi 路由中删除，否则其他控制器上的标准 Get 停止工作（即 api/values）

api/test/active 现在正在解析，但我现在得到一个 500 Internal Server Error for /api/test 是否有可能同时解析，所以 api/test 将返回“all”而 /test/active 只返回“some” ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:05:17.057

由于您有两个名为 action 的方法，因此可能会感到困惑。尝试删除或重命名其中一个，看看是否可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:08:53.420

一种方法是为参数提供默认值，

```
[HttpGet]
public String Active(int id = 0)
{
    var result = new List<string> { "active1", "active2" };

    if (id == 0) {
      return result;
    } else {
      return result[id];
    }
} 
```

# asp.net-mvc-3 - 返回列表以在 MVC3 中查看和操作它，数据库优先方法

> ID：11724753
> 
> 赞同：0
> 
> 时间：2012-07-30T15:38:12.313
> 
> 标签：asp.net-mvc-3

我有一个触发存储过程的函数，该过程运行 select * from tbl_admin where id=".." and username=".." select 语句的返回输出存储在一个复杂的返回类型对象 spa_user_Result 并存储到列表。

我想将此列表传递给视图并使用它来显示数据，我该怎么做？代码是这样的：

```
 public ViewResult Index()
        {
            <spa_users_Result> result = new <spa_users_Result>();
            System.Data.Objects.ObjectResult<spa_users_Result> r;
            r = db.adminUser("s","superuser");

            result = (<spa_users_Result>)r.ToList();

            return View();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:54:38.740

您需要将对象传递给`View`方法

```
public ActionResult YourAction()
{
  var result =  db.adminUser("s","superuser").ToList();
  return View(result );
} 
```

假设您的`db.adminUser("s","superuser")`方法返回一个`spa_users_Result`对象集合。

使您的视图强类型化到 spa_users_Result 对象列表

```
@model IEnumerable<spa_users_Result>
@foreach(var item in Model)
{
  <p>@item.Name</p>
} 
```

假设您的`spa_users_Result`班级有一个名为`Name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:43:46.963

我不完全确定您正在寻找这个问题的详细程度，但将列表传递给视图非常简单：

```
return View(result); 
```

编辑：您也不希望结果成为列表吗？

```
List<spa_users_Result> result = new List<spa_users_Result>(); 
```

# internet-explorer - 是否可以从 Firefox 中打开 IE 中的链接？

> ID：11724757
> 
> 赞同：1
> 
> 时间：2012-07-30T15:38:20.503
> 
> 标签：internet-explorer, firefox

我正在开发一个计划作为 Firefox 插件发布的项目。但是，该项目的一部分需要在 Internet Explorer 中打开一个链接。我已经做了一些研究，到目前为止，唯一能做到这一点的结果是 Firefox 的附加组件。我们试图避免使用其中之一，因为我们希望用户的安装过程尽可能简单。那么，有什么解决方法吗？我知道这是一种可怕的做法，但如果可能的话，我能想到的唯一解决方案是在打开链接之前将用户的默认浏览器更改为 IE，然后在页面加载后将其切换回来。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T00:13:01.957

如果您正在开发自己的 Firefox 插件，您可以使用[nsIProcess](https://developer.mozilla.org/en/nsIProcess)和相关来启动 iexplore.exe 进程。您可以在命令行上传递 url。

请不要更改用户的偏好。:)

# python - urllib2 - 跳过证书验证的能力

> ID：11724765
> 
> 赞同：6
> 
> 时间：2012-07-30T15:38:49.657
> 
> 标签：python, ssl, urllib2

我需要以某种方式模拟选项`-k`（`--insecure`用于忽略 SSL 证书验证）`curl`但使用`urllib2`. 有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:45:40.143

这里没有什么特别可做的。`urllib2`默认情况下不进行 SSL 证书验证。[文档http://docs.python.org/library/urllib2.html](http://docs.python.org/library/urllib2.html)中有一个警告

> 警告 HTTPS 请求不会对服务器的证书进行任何验证。

# database - 影响数据库中所有项目的用户操作，如何有效处理？

> ID：11724766
> 
> 赞同：0
> 
> 时间：2012-07-30T15:38:49.253
> 
> 标签：database, performance, architecture

我正在为我的公司开发一个投票系统，在这个系统中，每个用户都可以对一个或多个主题进行投票。对某个主题进行投票将导致该主题的声望值+1，而所有其他主题的声望值将下降-1。（这些数字相当随意，实际值是一个复杂的公式）。

我正在考虑构建我的数据库，创建一个视图，在其中存储每个主题的 ID、该主题的总票数、其他主题的总票数以及计算出的声誉。

我的问题是关于性能/可扩展性。我认为这个解决方案不是很有效，因为如果我有 100 个主题和每秒 2 个投票，我将不得不每秒刷新所有主题的所有值两次，即每秒总共 200 条记录。

这个分析正确吗？mssql引擎会轻松处理它吗？还是我应该寻找其他方法？你有什么建议？

谢谢，奥斯卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:47:41.370

这对数据库来说将是非常困难的。

你的公式取决于哪些变量？如果您要添加和减去的数量是全局性的，您可以跟踪它们并仅在需要显示时计算每个主题的分数。

例如，您可以只增加一个主题的分数，但也可以增加一个全局变量来跟踪总共有多少“upvotes”。这样，当您想要显示任何主题的分数时，您就可以即时计算它而不会轰炸您的数据库。

有关该公式的更多信息可以为您提供更好的建议。

**编辑：**

你有这个公式：

```
origninalRep + (upvotes*10 - otherVotes) 
```

您可以`originalRep`通过一个查询变得简单明了。

对`upvotes`.

“棘手”的部分是`otherVotes`. 但这很简单`globalVotesCount - upvotes`，如果您跟踪全球投票数，您就会拥有这些。

我希望这有帮助。

# javascript - 寻找类似于 facebook 的 textarea 调整大小插件

> ID：11724767
> 
> 赞同：2
> 
> 时间：2012-07-30T15:38:50.393
> 
> 标签：javascript, jquery, textarea

当您在 facebook 中输入评论时，评论文本区域会在您输入时自动调整大小。如果你按回车，它会发布评论，如果你按 ctrl + enter，它会在调整大小时转到下一行。

我正在寻找一个实现相同功能的 javascript / jquery 插件。

*   在您键入时平滑地调整文本区域的大小，如 facebook，适用于所有新浏览器

*   可以动态调用，例如，如果通过 javascript 添加了一个新的 textarea，则可以在之后立即调用它并将其分配给该 textarea。

*   有一个选项/功能可以忽略输入并调用回调函数，而不是发布用户在按下输入时输入的内容。

*   当按下 ctrl + enter 时，有一个选项/功能被推送到新行。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T20:22:19.973

我不知道是否已经存在任何这样的插件，但如果你没有找到，你可以自己制作。我很快就想出了这个，也许你可以将它用作起始模板（它绝不是完美的，也不是你需要的一切）：

[http://jsfiddle.net/NfWAN/](http://jsfiddle.net/NfWAn/)

```
<!doctype html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
        <script>
            (function($) {
                $.fn.smartText = function(options) {

                    var $this = $(this);

                    var defaults = {
                        size_interval : 15
                    };

                    var settings = $.extend({}, defaults, options);

                    $('body').append('<div id="checkValHeight" style="display:none; word-wrap:break-word"></div>');
                    var checkValHeight = $('#checkValHeight');

                    $this.each(function() {
                        $this.addClass('smartText');
                    });

                    $('textarea.smartText').live('keyup paste', function() {
                        var $this = $(this);
                        var cur_height = $this.height();

                        checkValHeight
                            .css({
                                'width': $this.width()
                            })
                            .html($this.val());

                        if(checkValHeight.height() > cur_height) {
                            $this.css({
                                'height': (cur_height + settings.size_interval) + 'px'
                            });
                        }

                        checkValHeight.empty();
                    });

                    return $this;
                }
            })(jQuery);
        </script>
        <script>
            $(function() {

                $('textarea').smartText({
                    size_interval: 30
                });

                $('#addTextArea').click(function() {
                    $('body').append('<textarea class="smartText"></textarea>');
                    return false;
                });
            });
        </script>
    </head>
    <body>

        <a href="#" id="addTextArea">Add Textarea [+]</a><br />

        <textarea></textarea>
        <textarea></textarea>

    </body>
</html> 
```

# asp.net-mvc-2 - 使用 asp.net mvc 2.0 将数据插入到 tblEducation

> ID：11724770
> 
> 赞同：0
> 
> 时间：2012-07-30T15:39:09.627
> 
> 标签：asp.net-mvc-2

我在数据库中有 2 个表：tbleducation，tblemployee。无论如何，对于表 tblemployee，我有字段：employeeID，employeeName ....我想将数据插入到具有以下字段的 tbleducation 中：EmployeeID，Duration，.....和对于表 tbleducation 的 EmployeeID，我想做一个下拉列表，将 tblEmployee 中的所有 EmployeeName 列出到下拉列表中。我的代码如下：

**看法**

```
<div id="Education">
<%Html.EnableClientValidation(); %>
<% using (Html.BeginForm("Education","EmployeeProfile")){%>
 <% Html.ValidationSummary(true, "Unsuccessfull"); %>
      <table>
        <tr>
          <td>Employee Name</td>
          <td><%= Html.DropDownListFor(x => x.EmployeeName, Model.Employee, "select EmployeeName")%</td>
          <td>Duration</td>
          <td><%: Html.TextBoxFor(m=> m.Duration, new { id="duration",name="duration"})%>
      <%: Html.ValidationMessageFor(m => m.Duration) %></td>
       <tr>
          <td><input type="submit" name="add" id="add" value="Add" /></td>
      </tr>
    </table>
   <%}%>
</div> 
```

**模型**

```
public class UserModels
{

    public string EmployeeName { get; set; }
    public int EmployeeCode { get; set; }
    public IEnumerable<SelectListItem> Employee { set; get; }
} 
```

**控制器**

```
public ActionResult Education() {

        var query = (from e in context.tblEmployee_Employee
                     select new
                     {
                         empID = e.Code,
                         EmpName = e.NameEng
                     }
                              ).ToList();

        var model = new UserModels();
        var _Emp = query;
        foreach (var item in _Emp)
        {
            model.EmployeeCode = item.empID;
            model.EmployeeName = item.EmpName;
            model.Employee = new SelectList(_Emp, "EmpName", "EmpName");

        }
        return View(model);
    }
   [HttpPost]
    public ActionResult Education(UserModels model, FormCollection edu) {
        tblEmployee_Education education = new tblEmployee_Education();

        education.Duration = edu["Duration"].ToString();
        education.Certificate = edu["Certificate"].ToString();
        education.Country = edu["Country"].ToString();
        education.SchoolName = edu["SchoolName"].ToString();
        education.Major = edu["Major"].ToString();
        education.SubDescript = edu["SubDescript"].ToString();
        string EName = edu["EmployeeName"].ToString();
        return Content(
           string.Format(
               "Selected role for {0} is {1}", model.EmployeeName, model.EmployeeCode
           )
       );
        context.AddTotblEmployee_Education(education);
        context.SaveChanges();
        return View("Personal");
    } 
```

我收到警告消息“检测到无法访问的代码”。我真的不知道如何解决它。请帮助我，

先谢谢了，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:43:21.517

在您的 POST 操作中，此处：

```
return Content(
    string.Format(
        "Selected role for {0} is {1}", model.EmployeeName, model.EmployeeCode
    )
); 
```

你已经返回了一个结果，动作执行结束。

所以摆脱它后面的行，它们将永远不会被执行：

```
context.AddTotblEmployee_Education(education);
context.SaveChanges();
return View("Personal"); 
```

如果您希望它们被执行，请删除该`return Content(...)`行。

# c# - 如何在 MVC3 中获取 trace.axd 的自定义错误页面？

> ID：11724771
> 
> 赞同：5
> 
> 时间：2012-07-30T15:39:12.527
> 
> 标签：c#, asp.net-mvc-3, trace, custom-error-pages, axd

我的 MVC3 应用程序显示 403、404 和 500 状态代码的自定义错误页面，但浏览到 trace.axd 会显示以下 YSOD：

```
 Server Error in '/' Application.

    Trace Error

    Description: Trace.axd is not enabled in the configuration file for this application. Note: Trace is never enabled when <deployment retail=true /> 

    Details: To enable trace.axd, please create a <trace> tag within the configuration file located in the root directory of the current web application. This <trace> tag should then have its "enabled" attribute set to "true".

    <configuration>
         <system.web>
            <trace enabled="true"/>
        </system.web>
    </configuration> 
```

所以我禁用了跟踪，这很好，但是为什么没有显示 500 页面，因为这是从服务器返回的 403？我对 404、403 或 500 真的很满意——只要它不是丑陋的黄色屏幕！

编辑：在本地主机上运行时，我得到了 500 和 YSOD，但它实际上是服务器上的 403，更接近我的预期 - 但仍然没有自定义错误页面。服务器上的标准错误页面也略有不同：

```
Server Error in '/' Application.

Trace Error

Description: The current trace settings prevent trace.axd from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine. 

Details: To enable trace.axd to be viewable on remote machines, please create a <trace> tag within the configuration file located in the root directory of the current web application. This <trace> tag should then have its "localOnly" attribute set to "false".

<configuration>
    <system.web>
        <trace localOnly="false"/>
    </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-04T11:24:11.690

按照@Cosmologinaut 的建议删除 IgnoreRoute 对我不起作用，而且他说感觉不对。我找到了一个更好的解决方案，即删除 Web.config 文件中的跟踪 HTTP 处理程序：

```
 <system.webServer>
    <!-- remove TraceHandler-Integrated - Remove the tracing handlers so that navigating to /trace.axd gives us a 
         404 Not Found instead of 500 Internal Server Error. -->
    <handlers>
      <remove name="TraceHandler-Integrated" />
      <remove name="TraceHandler-Integrated-4.0" />
    </handlers>
  </system.webServer> 
```

导航到 /trace.axd 现在给我们一个 404 Not Found 而不是 500 Internal Server Error。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T13:35:30.947

由于没有回复，我在 Twitter 上询问了@shanselman，谁建议`<deployment retail = "true" />`可以解决它，但它仍然返回相同的 YSOD。

最后我通过删除 routes.IgnoreRoute("{resource}.axd/{*pathInfo}"); 解决了它 从路由配置。看起来不太对，但它确实有效。

# wpf - 在 WPF 应用程序中使用每个会话 WCF 服务

> ID：11724772
> 
> 赞同：2
> 
> 时间：2012-07-30T15:39:14.733
> 
> 标签：wpf, multithreading, wcf, caliburn.micro, coroutine

我不确定如何以良好的代码方式处理我的场景。

我工作的基本标准是这样的：

*   使用 WCF 服务的 WPF 应用程序
*   该服务使用每个会话实例
*   会话在应用程序启动后立即开始，并且应该在应用程序生命周期内存在（有小例外）
*   会话中的某些方法调用必须先于并在调用其他方法之前完成

这意味着我必须能够在整个应用程序中拥有一个代理客户端实例。我还必须能够处理异步调用，因此客户端不会挂断，但同时确保它们完成。

我对 WCF 的技术理解非常有限，以至于不知道某些场景是否会按预期工作。所以我要列出我的不确定性：

*   会话何时开始，何时结束。它是基于客户端的创建，还是如果第一个客户端出现故障，一个单独的客户端实例是否可以访问同一个会话。
*   通过 WCF 服务处理异常的最佳方法是什么
*   ChannelFactory 是我应该看的东西来帮助我把它放在这里。

所以我在第一次迭代中做了什么来尝试解决其中的一些问题。

*   我使用依赖注入在我的 WPF 应用程序的整个类中注入客户端实例（我正在使用 MVVM），以确保相同的实例无处不在。
*   我使用异步生成方法进行服务引用以获取所有方法的 Begin 和 End 版本，以确保调用是异步的
*   我使用了 Caliburn.Micro 框架的协程（IResult 接口）特性来确保一个异步操作在另一个异步操作开始之前完成（不知道这是否是正确的使用，或者它是否是一个聪明的举动）。

我仍然遇到的问题当然是如何处理客户端的故障状态。我现在假设我可以重新实例化客户端并拯救会话，或者我实际上可以重新设置它。我现在需要在每次注入相同的新实例的地方重新实例化它。

因此，我认为最好创建一个包装客户端的 ClientManager 类。这样我就可以注入这个 ClientManager 并在需要时重新实例化他。我想我应该把他暴露在外面以便能够进行方法调用，但如果我能以某种方式在他内部进行错误处理，那就太好了。我只是在测试我的方法时遇到了困难，而且我不确定它是否会在集成中正常工作，因为我不了解 WCF、协程和线程的所有内部工作原理。

有没有人在这些问题上比我更有经验，可以给我一些指示，或者至少告诉我 WCF 在这些情况下是如何工作的（每个会话）以及我做错了什么，什么是对的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:42:29.480

WCF 支持开箱即用的会话，因此我建议从[这篇](http://msdn.microsoft.com/en-us/library/ms733040.aspx)MSDN 文章开始。

在一个非常高的级别上，首先你设置`SessionMode=SessionMode.Required`你的`ServiceContract`. 然后，在 OperationContract 上设置`IsInitiating=True`和`IsTerminating=True`属性来标记每个会话的开始和结束。

但是请注意，WCF 默认将并发会话限制为[16](https://stackoverflow.com/questions/10614903/servicethrottling-default-values)以防止[DOS 攻击](https://stackoverflow.com/questions/1788760/why-does-maxconcurrentsessions-default-to-such-a-low-value-and-what-is-a-safe-v)，但您始终可以提高该值。此外，您会意识到会话是有效的，只要它的主机（IIS / Windows 服务 / 其他）没有被回收。

在相关的说明中，我之前使用过[WCF 持久服务](http://msdn.microsoft.com/en-us/library/bb412184%28v=vs.90%29.aspx)- 它旨在将 WCF 服务的状态持久保存在数据存储中（默认为 SQL Server）。当然，这里有一个性能打击。建议[进一步](https://stackoverflow.com/questions/5313407/is-wcf-durable-services-the-right-choice)阅读，看看这是否适合您。

希望这可以帮助。

# php - 命名约定

> ID：11724773
> 
> 赞同：3
> 
> 时间：2012-07-30T15:39:16.010
> 
> 标签：php, orm, doctrine, doctrine-orm

**关于多对一/一对多**关系的文件类和属性是否有**命名约定。**这听起来像是一个关于命名概念的经典问题，但事实并非如此，这是一个应用于**关系**的问题，例如在 Doctrine 中。

 ****这可能很愚蠢，但名字很重要，不是吗？

在这种情况下，我有一个 entity **`GolferProfile`**，一个 entity **`Category`**，因此想要一个中间**`GolferProfile-Category`**实体。

**我应该为中间实体使用什么类名？**

```
GolferProfileCategory OR GolferProfile_Category OR GolferProfile-Category  OR anything else? 
```

与属性相同...我见过人们使用每个类的第一个字母，`$gc`在这种情况下就是这样。这很难阅读，但另一方面，我们不想使用长名称，例如`$golferprofile_category`?

对此的任何想法都将帮助我了解如何使用名称..干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:41:27.737

考虑到 PHP 是一种类似 C 的语言，我会遵循它的学说。

参考：[http ://www.psgd.org/paul/docs/cstyle/cstyle04.htm](http://www.psgd.org/paul/docs/cstyle/cstyle04.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T15:56:24.280

没有经验法则，但我建议在为所有内容命名约定时坚持单一做法：您似乎已经在使用[camelCase](http://en.wikipedia.org/wiki/CamelCase)，那么为什么不将它用于其他所有内容呢？

```
GolferProfile
Category
GolferProfileCategory

$golferProfile
$category
$golferProfileCategory 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T15:56:31.047

```
class GolferProfile-Category {} 
```

产生[语法错误](http://codepad.viper-7.com/Px8xfE)。

```
GolferProfile_Category {} 
```

下划线将被[PSR-0 中](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)的目录分隔符替换。

```
GolferProfileCategory {} // is the winner. 
```

> 与属性相同...我见过人们使用每个类的第一个字母，在这种情况下是 $gc 。这很难阅读，但另一方面，我们不想使用像 $golferprofile_category 这样的长名称？

`$gc`是一个可怕的名字。没有人会知道这意味着什么。如果您指的是作为类实例的变量，我总是选择 camelCase。

```
$golferProfileCategory 
```

根据我的经验，大多数人（至少在 PHP 中）都是这样做的。****

# c# - 字典 其中 myField 是 myObject 的成员

> ID：11724776
> 
> 赞同：3
> 
> 时间：2012-07-30T15:39:24.927
> 
> 标签：c#, hash, hashmap

是否可以在 C# 中创建一个由对象组成的字典，以便`Key`仅引用字段的值（或 的字段`Value`），以便保证`index == myDictionary[index].myField`？

例如，想象一个标准的 C# `Dictionary`。假设我有`Car`对象：

```
class Car {
    string name;
    int wheels;
    double weight;
    double horsepower;
    double topSpeed;

    // Appropriate constructors
} 
```

我想存储在这个字典中，按名称索引：

```
var cars = new Dictionary<string, Car>();

var newCar = Car("Ford", 4, 2387.4, 4535.7, 128.2);
cars["Ford"] = newCar; 
```

我的标准不能保证，因为我可以：

```
cars["Ford"].name = "not Ford"; 
```

并且条件被打破。我可以简单地`name`从 中删除该字段`Car`，但是汽车本身将不知道自己的名字——即使我们抛开性能成本，在当今时代，汽车处于一种尴尬的境地。

所以我的问题是：是否可以在 C# 中轻松制作哈希映射，使得哈希值始终等于哈希元素的某些部分，并且每当元素存在时哈希都会更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:55:29.817

您正在描述[KeyedCollection](http://msdn.microsoft.com/en-us/library/ms132438.aspx)类，但如果在将项目添加到集合后更改项目的键，则会遇到问题。

如果您想要一个哈希集合来处理对其标识属性的元素的更改，您可以在类型上实现 INotifyPropertyChanged （`Car`在您的示例中），并根据需要让集合重新定位项目（或删除并重新添加它们）。这将是低效的并且非常容易出现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:14:51.647

一种替代方法是使用基于字符串的索引器构建您自己的指定`CarDictionary`索引器（假设`Name`字段/属性为`public`）：

```
public class CarDictionary : List<Car>
{
    public Car this[string name]
    {
        get { return this.Single(car => car.Name.Equals(name)); }
        set {
            var oldCar = this.SingleOrDefault(car => car.Name.Equals(name));
            if (oldCar != null) base.Remove(oldCar);
            value.Name = name;
            base.Add(value);
        }
    }

    public new void Add(Car car)
    {
        if (this.Any(c => c.Name.Equals(car.Name))) 
            throw new InvalidOperationException("Dictionary already contains a Car with the same name");
        base.Add(car);
    }
} 
```

此外，您需要重新实现或隐藏其他基类方法，例如等`AddRange`，`Remove`以确保集合不会意外损坏。

如果您现在初始化您的汽车“字典”并添加*Ford*：

```
var cars = new CarDictionary();

var newCar = new Car("Ford", 4, 2387.4, 4535.7, 128.2);
cars["Ford"] = newCar; 
```

字典状态是：

```
Number of cars: 1, name of first car: Ford 
```

如果你然后尝试：

```
cars["Ford"].Name = "not Ford"; 
```

字典状态将是：

```
Number of cars: 1, name of first car: not Ford 
```

接下来，使用重新实现的`Add`方法添加一个新的*Ford*：

```
cars.Add(new Car("Ford", 6, 4000.0, 500.0, 100.0)); 
```

将产生以下字典状态：

```
Number of cars: 2, name of last car: Ford 
```

尝试使用该方法添加另一个*福特*`Add`将产生异常：

```
var anotherFord = new Car("Ford", 3, 1000.0, 50.0, 120.0);
cars.Add(anotherFord);

InvalidOperationException: Dictionary already contains a Car with the same name 
```

但如果您改用索引器，新*福特*将取代旧的：

```
cars["Ford"] = anotherFord;

Number of cars: 2, name of last car: Ford 
```

最后，使用索引器向`Car`字典添加新的一个特点是索引器可能（应该？）更改添加的名称`Car`：

```
cars["thought this was a Ford?"] = anotherFord;

Number of cars: 3, name of last car: thought this was a Ford? 
```

据我所知，这将是索引器设置器的预期行为。如果不希望出现这种行为，只需删除该行

```
value.Name = name; 
```

从索引器设置器实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:41:39.247

[您可以使用 C# http://msdn.microsoft.com/en-us/library/2549tw02.aspx](http://msdn.microsoft.com/en-us/library/2549tw02.aspx)中的索引器来实现它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T15:51:16.343

您可以考虑将课程设计更改为：

```
class Car { public string name { get; private set; } } 
```

因此，您将无法更改标识对象的部分。否则，字典似乎是一个好方法。

# python - 使用 Python “pip”安装时出错：无法获取索引基 URL http://

> ID：11724779
> 
> 赞同：10
> 
> 时间：2012-07-30T15:39:30.887
> 
> 标签：python, django, pip

我正在尝试安装本地版本的 ScrumDo 进行测试。只有这样我才能在我的安装中找到我必须运行的点：

> 源 bin/激活
> pip install -r requirements.txt

我得到错误：

> 下载/解压 django-storages
> 
> > 无法获取索引基础 URL http : //b.pypi.python.org/simple/
> > 找不到任何满足 django-storages 要求的下载
> 
> 没有找到 django-
> storages 的发行版在 ./pip-log.txt 中存储完整的日志

我用谷歌搜索了一下，在这里和 Stack Overflow 上搜索，发现我应该添加一个 --proxy= 选项和/或取消设置我的 http_proxy 环境变量。然而我的安装没有代理并且没有设置环境变量。我试着跑步

> pip install -r requirements.txt --proxy=

然而错误仍然是一样的。我还创建了一个 /root/.pip/pip.conf 包含：

> [全局]
> index-url = http : //b.pypi.python.org/simple

并检查服务器实际上是在线的，如果包 django-storages 存在，这都是真的。

我尝试的最后一件事，因为[ScrumDo 的安装文档是这样](https://github.com/ScrumDoLLC/ScrumDo/wiki/Set-up)说的：

> pip install -U Django==1.1.4

再次没有成功......错误总是保持不变，有人有任何想法吗？

我的 pip-error.log 显示以下内容（该 URL 在同一网络中的另一台机器上的 Firefox 中工作，该机器也没有使用代理，我可以从同一台机器上 ping 它）：

```
/var/www/ScrumDo/pinax-env/bin/pip run on Mon Jul 30 10:24:08 2012
proxy):

Downloading/unpacking Django==1.1.4
proxy):

  Getting page http://b.pypi.python.org/simple/Django
proxy):

  Could not fetch URL http://b.pypi.python.org/simple/Django: HTTP Error 404: Not Found
proxy):

  Will skip URL http://b.pypi.python.org/simple/Django when looking for download links for Django==1.1.4
proxy):

  Getting page http://b.pypi.python.org/simple/
proxy):

  Could not fetch URL http://b.pypi.python.org/simple/: HTTP Error 404: Not Found
proxy):

  Will skip URL http://b.pypi.python.org/simple/ when looking for download links for Django==1.1.4
proxy):

  Cannot fetch index base URL http://b.pypi.python.org/simple/
proxy):

  URLs to search for versions for Django==1.1.4:
proxy):

  * http://b.pypi.python.org/simple/Django/1.1.4
proxy):

  * http://b.pypi.python.org/simple/Django/
proxy):

  Getting page http://b.pypi.python.org/simple/Django/1.1.4
proxy):

  Getting page http://b.pypi.python.org/simple/Django/
proxy):

  Could not fetch URL http://b.pypi.python.org/simple/Django/1.1.4: HTTP Error 404: Not Found
proxy):

  Will skip URL http://b.pypi.python.org/simple/Django/1.1.4 when looking for download links for Django==1.1.4
proxy):

  Could not fetch URL http://b.pypi.python.org/simple/Django/: HTTP Error 404: Not Found
proxy):

  Will skip URL http://b.pypi.python.org/simple/Django/ when looking for download links for Django==1.1.4
proxy):

  Could not find any downloads that satisfy the requirement Django==1.1.4
No distributions at all found for Django==1.1.4
proxy):

Exception information:
proxy):

Traceback (most recent call last):
  File "/var/www/ScrumDo/pinax-env/lib/python2.6/site-packages/pip-0.6.1-py2.6.egg/pip.py", line 482, in main
proxy):

    self.run(options, args)
proxy):

  File "/var/www/ScrumDo/pinax-env/lib/python2.6/site-packages/pip-0.6.1-py2.6.egg/pip.py", line 675, in run
proxy):

    requirement_set.install_files(finder, force_root_egg_info=self.bundle)
proxy):

  File "/var/www/ScrumDo/pinax-env/lib/python2.6/site-packages/pip-0.6.1-py2.6.egg/pip.py", line 2422, in install_files
proxy):

    url = finder.find_requirement(req_to_install, upgrade=self.upgrade)
proxy):

proxy):

  File "/var/www/ScrumDo/pinax-env/lib/python2.6/site-packages/pip-0.6.1-py2.6.egg/pip.py", line 1485, in find_requirement
proxy):

proxy):

    raise DistributionNotFound('No distributions at all found for %s' % req)
proxy):

proxy):

DistributionNotFound: No distributions at all found for Django==1.1.4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-03T05:50:09.107

如果您最近尝试使用 pip 安装软件包，您可能会遇到此错误：

```
Could not fetch URL https://pypi.python.org/simple/Django/: There was a problem confirming the ssl certificate: <urlopen error [Errno 1] _ssl.c:504: error:0D0890A1:asn1 encoding routines:ASN1_verify:unknown message digest algorithm>
  Will skip URL https://pypi.python.org/simple/Django/ when looking for download links for Django==1.5.1 (from -r requirements.txt (line 1))
  Could not fetch URL https://pypi.python.org/simple/: There was a problem confirming the ssl certificate: <urlopen error [Errno 1] _ssl.c:504: error:0D0890A1:asn1 encoding routines:ASN1_verify:unknown message digest algorithm>
  Will skip URL https://pypi.python.org/simple/ when looking for download links for Django==1.5.1 (from -r requirements.txt (line 1))
  Cannot fetch index base URL https://pypi.python.org/simple/
  Could not fetch URL https://pypi.python.org/simple/Django/1.5.1: There was a problem confirming the ssl certificate: <urlopen error [Errno 1] _ssl.c:504: error:0D0890A1:asn1 encoding routines:ASN1_verify:unknown message digest algorithm>
  Will skip URL https://pypi.python.org/simple/Django/1.5.1 when looking for download links for Django==1.5.1 (from -r requirements.txt (line 1))
  Could not fetch URL https://pypi.python.org/simple/Django/: There was a problem confirming the ssl certificate: <urlopen error [Errno 1] _ssl.c:504: error:0D0890A1:asn1 encoding routines:ASN1_verify:unknown message digest algorithm>
  Will skip URL https://pypi.python.org/simple/Django/ when looking for download links for Django==1.5.1 (from -r requirements.txt (line 1))
  Could not find any downloads that satisfy the requirement Django==1.5.1 (from -r requirements.txt (line 1))
No distributions at all found for Django==1.5.1 (from -r requirements.txt (line 1))
Storing complete log in /Users/paul/.pip/pip.log 
```

这似乎是旧版本的 OpenSSL 与 pip 1.3.1 不兼容的问题。如果您使用的是非库存 Python 发行版（尤其是 EPD 7.3），那么您很可能有一个在没有大量工作的情况下无法与 pip 1.3.1 一起使用的设置。

目前最简单的解决方法是安装不需要 SSL 的 pip 1.2.1：

```
curl -o https://pypi.python.org/packages/source/p/pip/pip-1.2.1.tar.gz
tar xvfz pip-1.2.1.tar.gz
cd pip-1.2.1
python setup.py install 
```

如果您正在使用 EPD，并且您没有将它用于可能会出现问题的课程，您可能需要考虑安装新的化身：Enthought Canopy。我知道他们知道以前版本的 OpenSSL 引起的问题，并且会想象他们现在使用的新版本应该可以很好地与 pip 1.3.1 配合使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T17:42:47.087

您可以尝试自行安装 django-storages .. 试试这个？

```
sudo pip install https://bitbucket.org/david/django-storages/get/def732408163.zip 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T17:24:13.957

尝试在命令中提供代理设置

```
pip --proxy=http://user:password@Proxy:PortNumber install -r requirements.txt 
```

或尝试

```
export http_proxy=http://user:password@Proxy:PortNumber 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-07T06:11:05.490

这个问题很可能是DNS设置造成的：服务器无法解析域名，所以无法下载包。

解决方案：sudo nano /etc/network/interface

添加一行：dns-nameservers 8.8.8.8

保存文件并退出

```
 sudo ifdown eth0 && sudo ifup eth0 
```

然后 pip install 现在应该可以工作了。

# php - 选择和显示来自不同日期值的行

> ID：11724788
> 
> 赞同：0
> 
> 时间：2012-07-30T15:40:11.117
> 
> 标签：php, mysql

我想根据不同的日期从表中获取行。尽管日期的值并不总是相同的。

基本上我必须首先获取日期范围，然后根据这些日期提取列的行。

我不能做`SELECT COUNT(location) FROM tweets WHERE date<= NOW()`或`date<=2012-07-29 17:38:32`

因为正如我所说，日期不固定。我不放日期，但它们是动态创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:14:59.140

好吧，关键是如何生成日期，但查询很简单：

```
$start = '2012-6-24';
$end   = '2012-7-24';

"SELECT COUNT(location) FROM tweets WHERE date between '$start' and '$end'"; 
```

# sql-server - 带字母的前缀字段

> ID：11724789
> 
> 赞同：-1
> 
> 时间：2012-07-30T15:40:15.390
> 
> 标签：sql-server

我的任务是将 7`databases`合并到一个仅保存静态数据的遗留系统中。

所以我想做的是在每个的身份字段中添加两个字母的前缀，`table`这样我就可以看到`ID`它`database`最初来自的地方，例如

`StaffID = 1`在旧数据库中，在新单曲中，`database`我希望它看起来像这样`StaffID = AB1`。这也是为了摆脱所有七个数据库中的用户具有相同`StaffID`（以及其他ID字段）的问题。

有没有一种快速简便的方法来做到这一点？或者你们认为有更好的解决方案吗？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:45:31.357

快捷方便; 并不真地。如果要更新现有 ID，而不是创建新列来引用：

*   首先，您需要将任何数字（`int`等）的ID 字段更改`varchar`为保存新键的字段。`varchar`需要有适当的大小来容纳最大的 ID 和前缀。

*   您还需要将任何外键字段从数字字段转换为适当大小的 varchar 字段。

*   最后，您需要将数据导入新数据库，将前缀附加到任何主键和外键。

# java - Sitemesh 不装饰返回的视图

> ID：11724791
> 
> 赞同：2
> 
> 时间：2012-07-30T15:40:20.290
> 
> 标签：java, spring, sitemesh

我试图设置一个简单的站点网格装饰页面，但现在遇到了墙。

首先，我的设置：

```
#decorators.xml
<?xml version="1.0" encoding="UTF-8"?>
<decorators>
    <decorator name="basicLayout" page="/WEB-INF/views/layout.jsp">
        <pattern>*</pattern>
    </decorator>
</decorators> 
```

这里没什么特别的

```
#web.xml
<filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>com.opensymphony.sitemesh.webapp.SiteMeshFilter</filter-class>
</filter>
<filter-mapping>
   <filter-name>sitemesh</filter-name>
   <url-pattern>*.jsp</url-pattern>
</filter-mapping> 
```

那里没什么特别的

当我调用应用程序的索引时，它会被修饰。当我单击调用返回视图的控制器的链接时，返回的视图不会被修饰。实际上，这目前仅适用于欢迎文件。我尝试了不同的装饰器模式，结果要么相同，要么异常：D

有人可以给我一个提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T05:18:51.817

对于 sitemesh 视图装饰，它认为“主”模板是默认的。所以如果你没有在你的 JSP 中指定任何模板（被装饰），那么它会将定义作为来自 decorator.xml 的 main。

如果您的应用程序中只有一个模板（机会非常少），那么将装饰器名称从 basicLayout 重命名为 main。

如果没有，那么您可以在 JSP 中使用来指定要使用的装饰器。

# c# - 在 C# 中使用我的程序的输出添加页眉和页脚

> ID：11724797
> 
> 赞同：0
> 
> 时间：2012-07-30T15:40:51.580
> 
> 标签：c#, header, save, footer

我是 C# 的新手，我的程序中有一个“保存到文件”选项，它将富文本框的输出保存在 Word 文档中，当用户选择此选项时，我使用了 saveFileDialogue 框供用户选择文件名和位置。

我想要的是，每次当用户选择此选项时，保存输出的 word 文档都有一个预定义的页眉和页脚图像......

非常感谢您提前提供的帮助！

下面是我的“保存到文件”代码。

```
 private void menuItem7_Click(object sender, EventArgs e)
    {
        // Create a SaveFileDialog to request a path and file name to save to.
        SaveFileDialog saveFile1 = new SaveFileDialog();

        // Initialize the SaveFileDialog to specify the RTF extension for the file.
        saveFile1.DefaultExt = "*.rtf";
        saveFile1.Filter = "RTF Files|*.rtf";

        // Determine if the user selected a file name from the saveFileDialog.
        if (saveFile1.ShowDialog() == System.Windows.Forms.DialogResult.OK &&
                saveFile1.FileName.Length > 0)
        {
            // Save the contents of the RichTextBox into the file.
            richTextBox1.SaveFile(saveFile1.FileName,
            RichTextBoxStreamType.PlainText);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:56:24.607

这是一个如何使用 Open XML SDK 的示例...

[源代码](https://www.yousendit.com/download/QlVneUNNR3NCTWswTWNUQw)

您必须在“此处为原始文本”的位置插入文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:24:34.447

您为“新手”选择了一项非常艰巨的任务。要混合图像和文本，您将需要 PostScript、PDF、DocX 或 RTF 等复杂格式。控制分页，例如只指定一次页眉和页脚图像并让它们自动显示在每个页面的顶部和底部，是一项更加困难的任务。

你没有给我们足够的信息来告诉你从哪里开始。例如，什么是“我的程序”？它像文字处理器吗？您必须使用这些`System.Drawing.Printing.PrintDocument`类来定义打印文档、在到达每页的适当位置时绘制页眉和页脚、执行行布局、中断和分页。对于专业程序员来说，这是一项艰巨的工作。

或者您只是想生成另一个程序可以输出的带有页眉和页脚的文件？你可以输出 RTF；规范在[这里](http://msdn.microsoft.com/en-us/library/office/aa140277%28v=office.10%29.aspx)。这是一个更容易的任务；您也许可以利用现有的[RTF 解释器](http://en.wikipedia.org/wiki/Rich_Text_Format#Implementations)。

或者您想在屏幕上显示这些文档？Han 建议通过自动化使用现有应用程序是一个很好的建议。

将您的任务分解为更小的需求并调查每个需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T17:19:29.477

首先，创建一个函数来获取图像、宽度和高度并返回 rtf：

这是一个png

```
 public string GetImage(string path, int width, int height)
    {
        var stream = new MemoryStream();
        var img = Image.FromFile(path);
        img.Save(stream, System.Drawing.Imaging.ImageFormat.Png);

        var bytes = stream.ToArray();

        var str = BitConverter.ToString(bytes, 0).Replace("-", string.Empty);

        var mpic = @"{\pict\pngblip\picw" + img.Width.ToString() + @"\pich" + img.Height.ToString() +
            @"\picwgoa" + width.ToString() + @"\pichgoa" + height.ToString() + 
            @"\hex " + str + "}";
        return mpic;
    } 
```

现在您需要将此“图像”插入 rtf 中的正确位置。如果您在记事本中打开 rtf 文件，您应该会看到如下内容：

> {\rtf1\ansi\ansicpg1252\deff0\deflang2057{\fonttbl{\f0\fnil\fcharset0 Microsoft Sans Serif;}} \viewkind4\uc1\pard\f0\fs17 MYTEXT\par }

如果你想要一个快速而肮脏的方法，那么从richTextBox 中获取rtf 到一个字符串中，然后在deflang2057 后面插入你的标题图像字符串，然后是'/par' 来创建一个新行。然后在结束 '}' 之前插入您的页脚图像字符串

像这样的东西：

```
 // Determine if the user selected a file name from the saveFileDialog.
    if (saveFile1.ShowDialog() == System.Windows.Forms.DialogResult.OK &&
            saveFile1.FileName.Length > 0)
    {
        var rtf = richTextBox1.Rtf.Insert(richTextBox1.Rtf.IndexOf("deflang2057") + 11, GetImage(@"c:\a.png", 5, 5) + @"\par");

        using (var rtfFile = new StreamWriter(saveFile1.FileName))
        {
            rtfFile.Write(rtf);
        }
    } 
```

我希望这能让你开始。

# php - Wordpress 替代使用 GET？

> ID：11724809
> 
> 赞同：0
> 
> 时间：2012-07-30T15:41:15.150
> 
> 标签：php, wordpress

我目前有一个插件，可以显示为我的网站写博客的作者的图像。

插件如下：

```
function display_authors() {
    global $wpdb;
    $authors = $wpdb->get_results("SELECT * from $wpdb->users ORDER BY display_name");

    $output = '<ul id="authors">';

    foreach($authors as $author) {

        if($author->display_name != 'admin')
        {
            // display user image for each author
            $output .=  '<li class="author" id="author-'.$author->ID.'">';
            // userphoto function echoes image HTML rather than returning it
            $output .= userphoto($author->ID);
            $output .= '</li>';
        }
    }   

    $output .= '</ul>';

    echo $output;
}

add_shortcode('oe-list-authors', 'display_authors'); 
```

我想知道的是如何链接到一个页面，我将在其中显示一些作者的元内容和他们的最新帖子等。

我希望这是同一页面，因为它需要在导航栏中具有相同的父级。

通常在 PHP 中，您可以检查是否`GET`设置了变量，以便您可以显示作者列表和随附的页面内容，或者特定作者的个人资料信息，但我不知道如何在其中进行Wordpress 的限制，我真的很感激一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:50:47.690

我可能错了，但我认为您仍然可以使用 GET 访问变量`$_GET['varname']`

请参阅此页面：

[http://wordpress.org/support/topic/using-custom-_get-variables-with-templates-and-permalinks](http://wordpress.org/support/topic/using-custom-_get-variables-with-templates-and-permalinks)

那么你有没有试过：

```
$whatever = $_GET['somevar']; 
```

?

# c# - 如何解析没有定义结构的 JSON.NET 文件？

> ID：11724811
> 
> 赞同：2
> 
> 时间：2012-07-30T15:41:17.510
> 
> 标签：c#, asp.net, dictionary, json.net, deserialization

我正在使用来自 OpenCalais 的 API，它为我提供了一个包含一堆 JSON 对象的 json 字符串。问题是，根据我传递给 API 的内容，JSON 字符串的结构会发生变化，这意味着我无法针对我可以制作的自定义类进行反序列化。另一个问题是输出不是键值形式，而是一个复杂的对象结构。这是输出的示例-

```
{"doc":
{"info":
{"allowDistribution":"true",
"allowSearch":"true",
"calaisRequestID":"c1cdd79a-ed89-8431-138c-50e8a37100f9",
"externalID":"17cabs901",
"id":"http://id.opencalais.com/0RCcU306*HTR05*7HlUb5A",
"docId":"http://d.opencalais.com/dochash-1/6188237f-a2a5-3263-95b7-ea894ba98298",
"document":"Bill Gates worked at Microsoft from 2008 to 2011\. He is also married to Melinda Gates.",
"docTitle":"",
"docDate":"2012-07-26 15:51:00.885",
"externalMetadata":"",
"submitter":"ABC"} 
```

所以你可以看到这里有多个层次的对象，没有键值结构。我从这段代码中需要的基本上是字典中的所有名称/值信息。然后我可以根据相关信息的键进行排序。如果我也能以某种方式获取对象值的父级，那也会很酷。所以例如我想要的输出是key：allowSearch，value：true，parent：info。我一直在尝试使用不同的反序列化方法、动态对象以及使用 .Ancestor 之类的函数进行简单的解析，但我没有发现任何有用的东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:55:47.927

你看过[JSON.NET](http://json.codeplex.com/)吗？它可以动态解析 JSON，然后您可以对其进行迭代：

```
using Newtonsoft.Json.Linq;

JObject rootObject = JObject.Parse(jsonString); 
```

您可以遍历子节点，或搜索其他节点，如下所示：

```
JToken info = rootObject.SelectToken("info"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T11:59:33.750

Json.NET 支持命名空间下的**LINQ to JSON**`Newtonsoft.Json.Linq`。

要使用[的示例](http://james.newtonking.com/projects/json/help/index.html?topic=html/LINQtoJSON.htm)`JObject`

```
JObject o = JObject.Parse(@"{'CPU': 'Intel','Drives': ['DVD read/writer','500 gigabyte hard drive']}");

string cpu = (string)o["CPU"];
// Intel

string firstDrive = (string)o["Drives"][0];
// DVD read/writer

IList<string> allDrives = o["Drives"].Select(t => (string)t).ToList();
// DVD read/writer
// 500 gigabyte hard drive 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:44:04.413

您可以使用[DeserializeObject](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.deserializeobject)，它本质上返回一个`Dictionary<string, object>`.

例如：

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
Dictionary<string, object> myGraph = (Dictionary<string, object>)serializer.DeserializeObject(myJson); 
```

要从`myGraph`字典中读取内容，您将不得不在每个步骤中进行转换。

例如：

```
Dictionary<string, object> doc = (Dictionary<string, object>)myGraph["doc"];
Dictionary<string, object> info = (Dictionary<string, object>)doc["info"];
string externalID = (string)info["externalID"]; 
```

我相信你可以将它泛化一点，但我认为这应该适用于你发布的 json。

# scroll - 应用程序脚本 TextArea：无法使用 setCursorPos 将文本滚动到视图中

> ID：11724816
> 
> 赞同：0
> 
> 时间：2012-07-30T15:41:41.760
> 
> 标签：scroll, textarea, google-apps-script

我在气体 TextArea 中有一个长文本，我想将一行文本滚动到视图中。我尝试了几种解决方案（setCursorPos、setSelectionRange），但文本始终显示在顶部；即它永远不会向下滚动到我想要的位置......

我确实注意到文档说：“这仅在 TextArea 附加到文档而不是隐藏时才有效。”。这不应该真正适用于我的情况（我希望应用程序在特定位置弹出......），但我尝试在显示应用程序之前和之后设置它。

这是代码。

```
....
var cursorPos=15;//just a test...
var fileString = "a very long text that I'm not putting in here....";
var mytextArea=myapp.createTextArea().setValue(fileString).setSize("100%","100%").setName("TextArea").setId("TextArea");
myapp.add(mytextArea.setCursorPos(cursorPos));
var doc=SpreadsheetApp.getActive();
doc.show(myapp);
myapp.getElementById("TextArea").setFocus().setCursorPos(cursorPos); 
```

我一定是在做一些明显错误的事情。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T04:19:33.187

问题在这里：[http](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1635) ://code.google.com/p/google-apps-script-issues/issues/detail?id=1635 问题响应是：“不幸的是，这是底层 GWT 技术的限制” :(所以很快就没有修复......：即 setCursorPos(cursorPos) 什么都不做......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T15:42:00.667

您是否尝试过将文本区域包装在滚动面板中并设置滚动面板的位置？

# silverlight - Silverlight 识别信息

> ID：11724818
> 
> 赞同：0
> 
> 时间：2012-07-30T15:41:50.963
> 
> 标签：silverlight, client, identification

我目前正在开发一个与服务器应用程序对话的 Silverlight 应用程序。我正在尝试提供任何可用于在连接时识别客户端的信息。我显然在服务器端有 IP，但仅此而已。我正计划让客户端在连接过程中发送一条带有其 ID 信息的消息。我遇到的问题是，没有提升权限的 Silverlight 无法访问任何有用的东西来识别客户端。我尝试了计算机名称、用户名等，但它们都是 Silverlight 在没有提升权限或外部服务的情况下无法访问的东西。有什么我想念的吗？有什么可以帮助识别客户的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:23:12.577

您可以尝试根据插件、屏幕大小等生成“指纹”。这是一个声称可以做到这一点的 j-query 插件：

[https://github.com/carlo/jquery-browser-fingerprint](https://github.com/carlo/jquery-browser-fingerprint)

# git - 重复的 Git 提交？

> ID：11724820
> 
> 赞同：2
> 
> 时间：2012-07-30T15:42:01.637
> 
> 标签：git

我对 Git 还是很陌生，但今天我注意到我的一些提交显示为具有相同 SHA-1 和提交消息的重复项。这里发生了什么？

```
$ git log --pretty=oneline
739ca79856dc1742890b7790c01c23198c312ae3 cleanup unused js
7ced47ade57a1d677288e7c98a20eaf374fc2efe final (hopefully) ie fix for menu js
66af4165df70640c6f65cf1ba58db48f2d89012d v0.5
f2954f57eaf2b8a9261680d2d34fd4022178b539 Final menu style, added sidebar styling
04432e237098cccd464a17b7a50226d55b7b4c48 ie fix for previous commit
476e33937a9f6bc8383cd04d8cfe967e25090bc0 Fixed menu false positive on click for
7ced47ade57a1d677288e7c98a20eaf374fc2efe final (hopefully) ie fix for menu js
66af4165df70640c6f65cf1ba58db48f2d89012d v0.5
f2954f57eaf2b8a9261680d2d34fd4022178b539 Final menu style, added sidebar styling
04432e237098cccd464a17b7a50226d55b7b4c48 ie fix for previous commit
476e33937a9f6bc8383cd04d8cfe967e25090bc0 Fixed menu false positive on click for 
```

我怀疑我做错了什么或者误解了我的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:48:47.037

这不是重复的，它只是向您展示其他分支中的相同提交。尝试运行`gitk --all`它将为您提供 repo 的真实图形表示，您将看到提交的实际位置。

# javascript - JS属性-值onclick替换

> ID：11724827
> 
> 赞同：1
> 
> 时间：2012-07-30T15:42:34.420
> 
> 标签：javascript, jquery, onclick, codemirror

我使用 codemirror 和 jquery 在浏览器中“模拟”一个 xml 编辑器。一些 xml-Tag 包含一个带有两个可能值（true 或 false）的“on”属性。是否可以在 onclick 事件中切换这些值？是否有可用的 codemirror/jquery 插件？

**编辑 ：**

*自编码解决方案。*

```
function attrtoggle(){
    var pos = editor.getCursor();
    var line = editor.getLine(pos.line);
    var index = line.indexOf("on=");

    if(index > 0){
        //define range 
        if ( pos.ch -3 < index || pos.ch - 9 > index)
            return false;

        var len = 10;
        var replace_pos = index + 4;

        if(line.charAt(replace_pos) == "t"){
            //insert false
            line = line.replace('true', 'false');
        } else{
            //insert true
            line = line.replace('false', 'true');
        }
        edited = pos.line;
        editor.setLine(pos.line, line);
    }
} 
```

只需为 onclick 事件添加一个事件处理程序

```
$(".CodeMirror").attr("onclick","javascript:attrtoggle()"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:07:29.043

到目前为止并不完美（糟糕的设计等），但它可以按预期工作：

只需在 onclick 事件中触发该功能。

```
function attributeToggle(){

    var transitions = {
        "on": {
            "false":"true",
            "true":"false"
        }
    }

    var pos = editor.getCursor(); // object {line, ch}
    var token = editor.getTokenAt(pos);
    var line = editor.getLine(pos.line);

    try{

        var prev_pos = token.start - 1;
        var prev_token = editor.getTokenAt({'line':pos.line, 'ch':prev_pos});

        if(prev_token.className == "attribute")
            var attr = prev_token.string;
        else
            return false;

        if(typeof transitions[attr] === "undefined") //nothing to replace
            return false;

        var current_val = token.string.toLowerCase().replace(/(['"])/g, "");

        if(typeof transitions[attr][current_val] === "undefined")
            return false;

        var line_new =  line.substring(0, token.start) + \
 "\"" + transitions[attr][current_val] + "\"" +  line.substring(token.end);

        editor.setLine(pos.line, line_new);

    } catch (e){
        console.log(e);
    }
} 
```

# ruby-on-rails - i18n: t 方法不起作用

> ID：11724831
> 
> 赞同：7
> 
> 时间：2012-07-30T15:42:37.970
> 
> 标签：ruby-on-rails

在我的 Rails 3.2.2 应用程序中，我正在尝试使用 i18n，但有些东西无法正常工作。

实际上“t”方法不起作用，只有“i18n.t”起作用。

因此，例如：

```
t(:login)
=> login 
```

反而：

```
i18n.t(:login)
=> Provide the necessary login info 
```

你能帮我弄清楚我做错了什么吗？

谢谢，奥古斯托

更新

我用 pry 显示了 t 助手的来源并得到了这个：

来自：/Users/phishman/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.2/lib/action_view/helpers/translation_helper.rb @ 第 46 行：行数：16 所有者：ActionView： :Helpers::TranslationHelper 可见性：public

```
 def translate(key, options = {})
      options.merge!(:rescue_format => :html) unless options.key?(:rescue_format)
      if html_safe_translation_key?(key)
        html_safe_options = options.dup
        options.except(*I18n::RESERVED_KEYS).each do |name, value|
          unless name == :count && value.is_a?(Numeric)
            html_safe_options[name] = ERB::Util.html_escape(value.to_s)
          end
        end
        translation = I18n.translate(scope_key_by_partial(key), html_safe_options)

        translation.respond_to?(:html_safe) ? translation.html_safe : translation
      else
        I18n.translate(scope_key_by_partial(key), options)
      end
    end

3] pry(main)> show-source helper.t

From: /Users/phishman/.rvm/gems/ruby-1.9.2-p290/gems/actionpack-3.2.2/lib/action_view/helpers/translation_helper.rb @ line 46:
Number of lines: 16
Owner: ActionView::Helpers::TranslationHelper
Visibility: public

def translate(key, options = {})
  options.merge!(:rescue_format => :html) unless options.key?(:rescue_format)
  if html_safe_translation_key?(key)
    html_safe_options = options.dup
    options.except(*I18n::RESERVED_KEYS).each do |name, value|
      unless name == :count && value.is_a?(Numeric)
        html_safe_options[name] = ERB::Util.html_escape(value.to_s)
      end
    end
    translation = I18n.translate(scope_key_by_partial(key), html_safe_options)

    translation.respond_to?(:html_safe) ? translation.html_safe : translation
  else
    I18n.translate(scope_key_by_partial(key), options)
  end
end 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-30T15:48:44.207

该`t`方法是一个助手，因此仅在视图和控制器中可用。

如果您尝试从模型或 rails 控制台使用 I18n，您应该使用`I18n.t`

# php - php中的for循环获取数组

> ID：11724832
> 
> 赞同：-2
> 
> 时间：2012-07-30T15:42:39.903
> 
> 标签：php, html, checkbox

我想用复选框删除 mySQL 行。这是一个应该根据互联网上的某人工作的代码，但由于某种原因它不适合我。当我单击删除时，它只会刷新，但该行不会消失。这与我在表格中的 ID 有关吗？

```
<body>
<?php
$host="localhost"; // Host name
$username="root"; // Mysql username
$password="*****"; // Mysql password
$db_name="test"; // Database name
$tbl_name="deviation"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);

$count=mysql_num_rows($result);

?>
<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<td><form name="form1" method="post" action="">
<table width="400" border="0" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<td bgcolor="#FFFFFF">&nbsp;</td>
<td colspan="4" bgcolor="#FFFFFF"><strong>Delete multiple rows in mysql</strong> </td>
</tr>
<tr>
<td align="center" bgcolor="#FFFFFF">Åtgärda</td>
<td align="center" bgcolor="#FFFFFF"><strong>Chassinummer</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Problem detail</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Fault code</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Position</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Help object</strong></td>
<td align="center" bgcolor="#FFFFFF"><strong>Operation step</strong></td>
</tr>
<?php
while($rows=mysql_fetch_array($result)){
?>
<tr>
<td align="center" bgcolor="#FFFFFF"><input name="checkbox[]" type="checkbox"     id="checkbox[]" value="<?php echo $rows['id']; ?>"></td>
<td bgcolor="#FFFFFF"><?php echo $rows['chassi']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $rows['problem_detail']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $rows['fault_code']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $rows['fault_code']; ?></td>
<td bgcolor="#FFFFFF"><?php  echo $rows['position']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $rows['help_object']; ?></td>
<td bgcolor="#FFFFFF"><?php echo $rows['operation_step']; ?></td>
</tr>
<?php
}
?>

<tr>
<td colspan="5" align="center" bgcolor="#FFFFFF"><input name="delete"     type="submit"     id="delete" value="Delete"></td>
</tr>
<?php

**$checkbox = $_POST['checkbox'];**
**$delete = $_POST['delete'];**

// Check if delete button active, start this
if($delete){
for($i=0;$i<$count;$i++){
$del_id = $checkbox[$i];

**$sql = "DELETE FROM $tbl_name WHERE id='$del_id'";**
$result = mysql_query($sql);
}

// if successful redirect to delete_multiple.php
if($result){
echo "<meta http-equiv=\"refresh\" content=\"0;URL=deletetable.php\">";
}
}
mysql_close();
?>
</table>
</form>
</td>
</tr>
</table>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:11:43.353

我想将您的注意力引向某些事情：

1) PHP 中有许多行用无意义的双星号括起来。我很震惊 PHP 居然通过了这些。

2）您`$result`在脚本顶部的全局范围内定义了一个（从中获得了资源指针`mysql_query()`）。这意味着在底部，您检查`if($result)`，该检查将始终进行`true`（除非存在语法错误）。这也意味着无论删除是否实际发生，当您单击提交时页面将始终刷新。

正如我在评论中提到的那样，该代码（坦率地说）是一堆废话。它容易受到 SQL 注入的影响，代码实际上并没有做它应该做的事情，它使用了不推荐使用的属性和函数......代码无法做你想做的事情不是因为你的表中的 ID，而是因为您从 Internet 上复制的损坏的、无法运行的代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T15:53:32.223

不要遍历整个表替换这个

```
for($i=0;$i<$count;$i++){
$del_id = $checkbox[$i];

**$sql = "DELETE FROM $tbl_name WHERE id='$del_id'";**
$result = mysql_query($sql);
} 
```

和

```
if(isset($_POST['checkbox']) && is_array($_POST['checkbox')){
    foreach($_POST['checkbox'] as $id){
        $id = (int)$id;
        $sql = "DELETE FROM $tbl_name WHERE id='$id'";
        $result = mysql_query($sql);
    }
} 
```

# javascript - 将 javascript 变量传递到 rails 控制器

> ID：11724833
> 
> 赞同：1
> 
> 时间：2012-07-30T15:42:40.147
> 
> 标签：javascript, jquery, ruby-on-rails

我需要将一个 javascript 变量传递给 rails 控制器。这是我的应用程序代码：

**视图.html.erb**

```
<script type="text/javascript">
    var imageURL;
    var sCode = function () {
        $("#qr").html("<p align='center'><img src='https://chart.googleapis.com/chart?chs=250x250&cht=qr&chl=123&choe=UTF-8'/></p>");   
        imageURL = "https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=123&choe=UTF-8";
    }
</script>

<div class=" modal-body" id="qr"> 
</div>

<div class="modal-footer" id="footer">
    <%= form_tag({:controller => 'branches',:action => 'mailme' }, {:method => :post})  
    do %>
        <%= submit_tag  "Mail", :id => "mailme", :class => "btn btn-primary pull-left" %>
    <% end %>
</div> 
```

在这里，我需要将`imageURL`变量`mailme`从控制器传递给方法`branches`。我怎样才能得到那个变量？我试图附加该变量`submit_tag`并试图`hidden_filed_tag`得到它，但没有任何效果。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:53:12.830

您必须使用 javascript 来操作将在表单中提交的隐藏字段标记。

形式 ：

```
<%= hidden_field_tag "image_url" %> 
```

JS：

```
<script type="text/javascript">
    var imageURL;
    var sCode = function () {
        $("#qr").html("<p align='center'><img  src='https://chart.googleapis.com/chart?  
        chs=250x250&cht=qr&chl=123&choe=UTF-8'/></p>"); 
        imageURL = "https://chart.googleapis.com/chart?chs=150x150&cht=qr&chl=123&choe=UTF-8";
        $('#image_url').val(imageURL);
    }
</script> 
```

当然，您必须以`sCode`某种方式执行声明的函数。

在控制器中，只需访问`params[:image_url]`即可获取URL

# .net - 如何在 DataGrid 上设置 d:DataContext d:DesignInstance

> ID：11724834
> 
> 赞同：10
> 
> 时间：2012-07-30T15:42:48.680
> 
> 标签：.net, wpf, xaml

xml:

```
 <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <TextBox VerticalAlignment="Center" FocusManager.IsFocusScope="True" Grid.ColumnSpan="2" Name="SearchTextBox" Text="{Binding Path=SearchTerm.Value, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource FontStyle}" KeyUp="SearchTextBoxKeyUp" />

    <DataGrid Grid.Row="1" ItemsSource="{Binding Path=EpisodesView, Mode=TwoWay}" MouseDoubleClick="ListViewDoubleClick" Style="{StaticResource FontStyle}" KeyUp="ListViewKeyup" Name="EpisodeList" AutoGenerateColumns="False" IsReadOnly="True"
              d:DataContext="{d:DesignInstance vm:Episode}">
        <DataGrid.Columns>
            <DataGridTextColumn Header="File" Binding="{Binding File.Name}" />
            <DataGridTextColumn Header="Age" Binding="{Binding PrettyAge}" SortMemberPath="Age" />
        </DataGrid.Columns>
    </DataGrid>
</Grid>
</Window> 
```

在上面 xaml 底部的 DataGrid 中，我无法同时获得设计时间 d:DataContext DesignInstance 引用对于 DataGrid 本身的绑定和特定列的绑定都是正确的。

如果我在 DataGrid 中包含以下代码段（如上面的 xaml），则 DataGridTextColumns 有效，并且我获得了列绑定的智能感知：

```
d:DataContext="{d:DesignInstance vm:Episode} 
```

但现在 DataGrid 绑定智能感知不再起作用。如果我删除上面的代码片段，则会发生相反的情况：DataGrid 绑定的 Intellisense 有效，但列绑定无效。

明确地说，这只是一个设计时问题。运行时一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-10T02:40:03.063

设置该`d:DataContext`属性会更改设计时间以使用`Episode`使用默认构造函数创建的新对象。您可能需要设置`IsDesignTimeCreatable`为 true

```
d:DataContext="{d:DesignInstance vm:Episode, d:IsDesignTimeCreatable=True}" 
```

但是我希望您的问题是`Episode`item type 并且没有 property `EpisodesView`。您需要将数据网格设计时数据上下文设置为`Episodes`

# facebook - Facebook 自定义点赞按钮故事

> ID：11724835
> 
> 赞同：2
> 
> 时间：2012-07-30T15:42:51.830
> 
> 标签：facebook, facebook-like, facebook-javascript-sdk, facebook-opengraph

我已经阅读了很多，我希望有人可以解释我如何实现它。

出现在 FB 时间线/新闻提要上的默认故事是：AKG 喜欢 Sushi Bar 上的 Sushi。

1.  如何将此默认设置自定义为文本，例如 AKG 给 Sushi Bar 的 Sushi 评分！（据我所知，你需要提交一些东西给FB批准吗？）

2.  我可以添加自定义消息，例如：

    AKG 喜欢寿司吧的寿司。点击*这里*了解它是由什么制成的。（*这里是一个 URL 的链接*）

**编辑**：我已经设置了所有类似的按钮，并且工作正常。

非常感谢你亲爱的 SO 社区——你对我通过 PHP 和 JavaScript 的学习之旅非常有益（我有一个平面设计师的大脑，所以我觉得这很困难......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:27:46.257

您所描述的是自定义 Open Graph*对象*和*操作*...

*给予评级*将被视为一种行动。*寿司*将被视为一个对象。开始的最好方法是开始搞乱创建动作和对象。转到您的应用程序设置，然后单击**打开图表**部分。然后单击**开始**。它将引导您完成设置动作/对象对。您可以在未经批准的情况下测试动作和对象，但是当您准备好在世界上发布您的应用程序时，您必须将它们提交给 FB 以供批准。

另外，请阅读此...

[https://developers.facebook.com/docs/opengraph/keyconcepts/](https://developers.facebook.com/docs/opengraph/keyconcepts/)

# machine-learning - 将混合数据类型加载到 MATLAB 神经网络工具箱中

> ID：11724836
> 
> 赞同：1
> 
> 时间：2012-07-30T15:42:52.290
> 
> 标签：machine-learning, neural-network, matlab

我很难将制表符分隔的输入文件加载到 MATLAB nprtool 中，我认为这是因为 nprtool GUI 不支持加载混合数据类型。我正在加载的 .tab 文件大约有 1100 个数据样本（行），每个样本看起来像：

```
864 1342470776.212023000    172.25.177.41   155.34.234.20   HTTP    440 58689   http-alt    GET http://i.cdn.turner.com/cnn/.e/img/3.0/global/header/hdr-main.gif   image/png,image/*;q=0.8,*/*;q=0.5   gzip,deflate            0.000094000     http://www.cnn.com/ 
```

以上只是输入向量中的一个样本。我尝试使用 nprtool GUI 加载文件，但它无法正确识别数据。它将所有内容都视为“文本数据”，“数据”部分中有一些垃圾。然后，我尝试通过脚本在没有 GUI 的情况下执行此操作。此方法会引发错误（如下）。有什么办法吗？下面是我用来加载文件和错误的脚本片段。任何帮助表示赞赏。谢谢！

```
text1 = fopen('/Users/cgarry/Desktop/CRANEUM/output.tab');
pacTargets = importdata('/Users/cgarry/Desktop/CRANEUM/data.tab','\t');
pacInputs = textscan(text1,'%s %s %s %s %s %s %s %s %s %s %s %s %s %s %s %s');
fclose(text1);

inputs = pacInputs;
targets = pacTargets;

% Create a Pattern Recognition Network
hiddenLayerSize = 10;
net = patternnet(hiddenLayerSize);

% Setup Division of Data for Training, Validation, Testing
net.divideParam.trainRatio = 70/100;
net.divideParam.valRatio = 15/100;
net.divideParam.testRatio = 15/100;

% Train the Network
[net,tr] = train(net,inputs,targets);

% Test the Network
outputs = net(inputs);
errors = gsubtract(targets,outputs);
performance = perform(net,targets,outputs);

% View the Network
view(net)

% Plots
% Uncomment these lines to enable various plots.
%figure, plotperform(tr)
%figure, plottrainstate(tr)
%figure, plotconfusion(targets,outputs)
%figure, ploterrhist(errors)

>> nnet
Error using trainscg (line 97)
Inputs X{1,1} is not numeric or logical.

Error in network/train (line 106)
[net,tr] = feval(net.trainFcn,net,X,T,Xi,Ai,EW,net.trainParam);

Error in nnet (line 21)
[net,tr] = train(net,inputs,targets); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T04:14:59.833

Thats right, Matlab Neural network doesn't support mixed data type. But don't worry there are multiple ways to handle this. The easiest way is to categorize your data. For example all data including HTTP are represented with 1 while other can be represent by 2, 3,.... There are some other softwares available. I think R neural net package can handle this (not sure).

# ftp - recv() 只读取 1 个字节（使用 winsock 实现 FTP）

> ID：11724837
> 
> 赞同：1
> 
> 时间：2012-07-30T15:43:00.130
> 
> 标签：ftp, winsock, recv

我正在尝试使用winsock 实现一个简单的FTP 客户端。我在尝试下载文件时遇到问题。这是我目前正在使用的代码：

```
bool FTPHandler::downloadFile(const char * remoteFilePath, const char * filePath) {
    if (!isConnected()) {
         setErrorMsg("Not connected, imposible to upload file...");
         return false;
     }   

     if (usePasiveMode) {
         this->pasivePort = makeConectionPasive();
         if (this->pasivePort == -1) {
             //error msg will be setted by makeConectionPasive()
             return false;
         }
     } else {
         setErrorMsg("Unable to upload file not in pasive mode :S");
         return false;
     }

     char * fileName = new char[500];
     getFileName(remoteFilePath,fileName);     

     // Default name and path := current directory and same name as remote.
     if (filePath == NULL) {
          filePath = fileName;
     }

     if (!setDirectory(remoteFilePath)) {
         return false;
     }

    char msg[OTHER_BUF_SIZE];
    char serverMsg[SERVER_BUF_SIZE];
    sprintf(msg,"%s%s\n",RETR_MSG,fileName);
    send(sock, msg, strlen(msg), 0);

     SOCKET passSocket;
     SOCKADDR_IN passServer;

     passSocket = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);
     if (passSocket == INVALID_SOCKET) {
         WSACleanup();  
         sprintf(errorMsg,"Error trying to create socket (WSA error code: %d)",WSAGetLastError());
         return false;
     }

     passServer.sin_family = PF_INET;
     passServer.sin_port =   htons(this->pasivePort);
     passServer.sin_addr = *((struct in_addr *)gethostbyname(this->host)->h_addr);
     memset(server.sin_zero,0,8);

     int errorCode = connect(passSocket, (LPSOCKADDR) &passServer, sizeof(struct sockaddr));
     int tries = 0;
     while (errorCode == SOCKET_ERROR) {
           tries++;
           if (tries >= MAX_TRIES) {
               closesocket(passSocket);
               sprintf(errorMsg,"Error trying to create socket");
               WSACleanup();
               return false;
           }
     }

     char * buffer = (char *) malloc(CHUNK_SIZE);
     ofstream f(filePath);

     Sleep(WAIT_TIME);
     while (int readBytes = ***recv(passSocket, buffer, CHUNK_SIZE, 0)***>0) {
           buffer[readBytes] = '\0';
           f.write(buffer,readBytes);
     }
     f.close();

     Sleep(WAIT_TIME);
     recv(sock, serverMsg, OTHER_BUF_SIZE, 0);
     if (!startWith(serverMsg, FILE_STATUS_OKEY_CODE)) {
         sprintf(errorMsg,"Bad response: %s",serverMsg);
         return false;
     }

     return true;
} 
```

最后一个 recv() 多次返回 1 个字节，然后方法结束，应该在 1Kb 左右的文件只有 23 个字节。

为什么 recv 不读取孔文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T21:26:33.337

此代码中存在各种逻辑漏洞和不正确/缺失的错误处理。一般来说，您确实需要清理此代码。

您将错误的`sizeof()`值传递给`connect()`，如果失败则无法正确处理错误`connect()`（您的重试循环无用）。您需要使用`sizeof(sockaddr_in)`or`sizeof(passServer)`代替`sizeof(sockaddr)`. 您也没有`passServer`正确初始化。

您没有检查`recv()`错误。并且在`recv()`实际读取`CHUCK_SIZE`字节数的情况下，当您将空字节写入缓冲区（您不需要这样做）时，您会遇到缓冲区溢出，这会破坏内存，因为您将其写入超出了边界缓冲。

如果`connect()`失败，或者`recv()`由于服务器端发起的断开连接以外的任何错误而失败，您并没有告诉服务器中止传输。

一旦您告诉服务器进入被动模式，您需要连接到服务器告诉您的 IP/端口（不仅仅是端口），然后再发送您的`RETR`命令。

不要忘记向服务器发送`TYPE`命令，以便它知道发送文件字节的格式，例如`TYPE A`ASCII 文本和`TYPE I`二进制数据。如果您尝试以错误的格式传输文件，可能会损坏数据。FTP 的默认值`TYPE`是 ASCII，而不是二进制。

最后，由于您显然不知道如何有效地编程套接字，我建议您使用 WinInet 库的 FTP 部分而不是直接使用 WinSock，例如[`FtpGetFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384157.aspx)函数。让 WinInet 为您处理传输 FTP 文件的细节。

# php - 如何在 PHP 中捕获捕获子进程的输出

> ID：11724838
> 
> 赞同：2
> 
> 时间：2012-07-30T15:43:06.507
> 
> 标签：php

我需要在 PHP 中捕获子进程的输出来操作它。

我有两个小脚本，`parent.php`并且`child.php`

这是代码`parent.php`

```
 $exe = $_SERVER['_'];
    $command = '/var/www/child.php';

    echo "\nSTART\n";

    $pid = pcntl_fork();

    ob_start();

    echo "\nHELLO\n";

    if ($pid == -1)
        exit("Could not fork");
    else if ($pid)
        pcntl_waitpid($pid, $status);
    else
    {
        $args = array
        (
            "arg1" => 'one',
            "arg2" => 'two',
            "arg3" => 'three'
        );

        pcntl_exec($exe, array($command), $args);
    }

    $content = ob_get_contents();
    ob_end_clean();

    echo "\nEND\n";

    echo $content . "\n"; 
```

这是代码`child.php`

```
 echo "\n\tHELLO FROM TEST\n";

    echo "\t"; var_dump($_SERVER['arg1']);
    echo "\t"; var_dump($_SERVER['arg2']);
    echo "\t"; var_dump($_SERVER['arg3']); 
```

现在......这是我的输出：

```
START

    HELLO FROM TEST
    string(3) "one"
    string(3) "two"
    string(5) "three"

END

HELLO 
```

但我需要**这个**输出

```
START

END

HELLO

    HELLO FROM TEST
    string(3) "one"
    string(3) "two"
    string(5) "three" 
```

这可能是经典缓冲区解决方法`ob_start()`不起作用吗？

**注意：**输出的顺序并不重要，我需要捕获它以进行操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:04:22.230

我找到了解决方案。

您必须使用允许您直接使用流缓冲区的**proc_open()函数：**

```
echo "\nSTART\n";

$stream = null;

$descriptorspec = array(
   0 => array("pipe", "r"),
   1 => array("pipe", "w"),
   2 => array("file", "/tmp/error-output.txt", "a")
);

$cwd = '/tmp';
$env = array('some_option' => 'aeiou');

$process = proc_open('/usr/bin/php', $descriptorspec, $pipes, $cwd, $env);

if (is_resource($process))
{
    fwrite($pipes[0], '<?php echo "HELLO FROM TEST"; ?>'); // here directly the code of child.php
    fclose($pipes[0]);

    $stream = stream_get_contents($pipes[1]);
    fclose($pipes[1]);

    proc_close($process);
}

echo "\nEND\n";

echo "\n$stream\n"; 
```

输出是：

```
START

END

HELLO FROM TEST 
```

# watin - 使用编码 UI 的浏览器测试

> ID：11724840
> 
> 赞同：0
> 
> 时间：2012-07-30T15:43:10.520
> 
> 标签：watin, coded-ui-tests

如何使用 CodedUI 编写以下用 Watin 编写的测试

我正在尝试学习 CodedUI 但真的很挣扎

```
[Test]

public void SearchForWatiNOnGoogle()

{

using (var browser = new IE("http://www.google.com"))

 {

   browser.TextField(Find.ByName("q")).TypeText("WatiN");

   browser.Button(Find.ByName("btnG")).Click();

  Assert.IsTrue(browser.ContainsText("WatiN"));

 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:17:33.653

WatiN 和 Visual Studio Coded UI 测试是不同的。“编码的 UI 测试”是指 Visual Studio 自己的 UI 测试工具。WatiN 是一个不同的测试框架。

就个人而言，我不喜欢 WatiN，因为编写测试需要很长时间，而且它不能可靠地回放测试（至少从我的经验来看）。我更喜欢 Visual Studio Coded UI 测试，因为它们提供了一个自动生成测试代码的测试记录器和一个图形测试编辑器，同时仍然让您可以灵活地自己编辑测试代码。

我发现 Visual Studio 编码的 UI 测试更成功。开始使用 VS Coded UI 测试创建测试的最佳方法是阅读[MSDN 文档](http://msdn.microsoft.com/en-us/library/dd286726)，特别是一定要阅读“ [Anatomy of a Coded UI Test](http://msdn.microsoft.com/en-us/library/ff398062) ”以了解生成的代码。阅读文档中的每篇文章，因为它经历了从记录测试到编辑、维护它们和最佳实践的整个过程。

此外，请确保您已下载 Visual Studio Feature Pack 2，以便能够使用图形测试编辑器，这在创建和编辑测试时很有用。

WatiN 真正令人不快的事情（除了它的不可靠性）是它没有真正的文档，因此很难知道如何处理元素。我认为你应该放弃 WatiN，并使用 Visual Studio 编码的 UI 测试，如果它们可供你使用的话。Visual Studio 编码的 UI 测试的优点在于它可以处理 UI 的微小更改并自动适应。WatiN 做不到这样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T17:25:20.560

您可能会从以下链接之一中找到一些帮助：http: [//blogs.msdn.com/b/gautamg/archive/2009/12/18/why-is-coded-ui-test-generated-code-not -a-straight-line-code.aspx](http://blogs.msdn.com/b/gautamg/archive/2009/12/18/why-is-coded-ui-test-generated-code-not-a-straight-line-code.aspx) - 这是 MSDN 上的一篇博客文章，讨论了通过记录测试生成的代码。它附有一个示例项目，您可能会考虑查看。

正如我在您的另一个问题中所说，最好的方法是创建录音。MSDN 上也有一个不错的小演练，这里：http: [//msdn.microsoft.com/en-us/library/ff977233.aspx](http://msdn.microsoft.com/en-us/library/ff977233.aspx)。这个向您展示了记录测试以及为其生成和维护代码的过程。

我强烈建议您仔细阅读这两篇文章。

# django - Django Pipeline 不编译 .eco 文件

> ID：11724842
> 
> 赞同：1
> 
> 时间：2012-07-30T15:43:13.777
> 
> 标签：django, spine.js

今天重新安装了我所有的 Python 库后，我注意到我的 .eco 文件都没有被 Pipeline 编译，即使每个 .eco 文件都调用了Django Spine 的`EcoCompiler`类。`compile_file`

为什么没有编写任何已编译的 .eco 文件（输出为 .js 文件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:43:13.777

[Django Spine](https://github.com/ikeikeikeike/django-spine) 0.3.2（在撰写本文时）需要一个比当前版本更旧的[Pipeline](https://github.com/cyberdelia/django-pipeline)（当前版本：1.2.13，Django Spine 0.3.2：1.2.10 是必需的），它实际上将编译后的文件写入硬盘驱动器本身：

从`pipeline.compilers.__init__`1.2.10 版开始，第 36 – 38 行：

```
content = self.read_file(path)
compiled_content = compiler.compile_file(content, finders.find(path))
self.save_file(new_path, compiled_content) 
```

与`pipeline.compilers.__init__`版本 1.2.13 的第 38 行比较：

```
compiler.compile_file(infile, outfile, outdated=outdated, force=force) 
```

请注意如何`compile_file`使用非常不同的参数调用。如果您检查[当前源](https://github.com/cyberdelia/django-pipeline/blob/master/pipeline/compressors/__init__.py)，您会注意到管道根本没有调用`save_file`！

无论如何，只要 django-spine 和 django-pipeline 在这个问题上对齐：

```
pip uninstall django-pipeline
pip install django-pipeline==1.2.10 
```

# xcode - Xcode 4.4 - 找不到遥控器

> ID：11724847
> 
> 赞同：6
> 
> 时间：2012-07-30T15:43:37.240
> 
> 标签：xcode, git

当我尝试使用 Xcode 集成推送到遥控器时，安装 10.8 和 Xcode 4.4 Xcode 告诉我“找不到遥控器”。我仍然可以通过命令行成功推送，所以我的实际存储库很好。我已经安装了命令行工具，并尝试过多次重启 Xcode。此外，如果我去 Organizer 并尝试选择存储库，我得到的只是一个旋转的活动指示器。如果我为给定的存储库选择“远程”，它是空白的。请注意，Xcode*确实*承认 git 可用，因为它确实显示了哪些文件被修改并允许提交。/usr/bin/ 中报告的系统 git 版本为：

```
git version 1.7.9.6 (Apple Git-31.1) 
```

是否有其他人遇到这种情况，或者您对补救措施有任何建议（或者至少有一个地方可以查看日志以查看问题所在）？

**2013 年 10 月 18 日更新**

*此问题已在 Xcode 5 中解决。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T15:10:57.307

当您在 Xcode 或命令行中添加远程存储库时（无论从何处添加），请确保使用存储库的完整路径。

例如：

从命令行指定就足够了

```
git remote add <name> gituser@gitserver:example.git 
```

当您的 example.git 位于 gituser 的主目录中时。但是，当您尝试将提交推送到此远程存储库时，Xcode 无法处理此注释并显示“未找到遥控器”。

为了满足 Xcode，您应该键入整个路径，例如：

```
git remote add <name> gituser@gitserver:/home/gituser/example.git 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:34:54.963

我用 Git 为 Xcode 找到了这个解决方案：

> 组织者 > 遥控器 > 起源

1) 移除旧遥控器

2）添加新的遥控器：

*   远程名称：起源

*   位置：与以前相同，但仅将所有“：/”或“//”替换为“/”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-16T11:55:35.707

我对 Xcode 4.6.3 也有同样的问题。

以下是我为解决问题而执行的步骤：

**1.**在 Xcode 中，我转到 File -> Source Control -> Repositories（打开 Organizer）

**2.** 然后我从树中为我遇到问题的存储库选择了 Remotes 对象。

**3.**我的遥控器被命名为origin，但是在扩展它时，我注意到它没有与之关联的分支。

**4.**然后我选择了远程源并按下了移除远程选项，从视图中删除了远程源。

**5.**然后我去了一个终端并重新添加了遥控器： -

```
`git remote add origin http://username@localhost:7990/scm/iac/main-repository.git` 
```

**6.**然后我需要将分支添加到这个遥控器，它最初不能正常工作，所以我然后使用 -f 命令强制它。我使用的命令是：-

```
`git push origin master -f` 
```

***注意：***可能可以跳过第 4 步和第 5 步，直接进入第 6 步。我已经移除了遥控器，所以没有机会对此进行测试。

***注意 2：***您需要重新启动 Xcode（或者可能只是 Organizer）才能看到远程和分支现在可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T00:42:20.597

您需要首先添加一个远程存储库： git remote add yourname [https://github.com/user/repo.git](https://github.com/user/repo.git)

而不是推送......和xcode找到远程仓库并且也可以推送。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-17T10:52:59.387

我遇到了一个类似的问题，即遥控器无法加载，特别是 kiln 作为远程主机。在 git config 中查看存储库信息，URL 已更改为将我的电子邮件地址添加到它前面。

所以我简单地退出了 Xcode，然后从命令行执行：

```
git remote set-url kiln https://...kiln repo name.git 
```

当我重新启动 Xcode 时，这似乎解决了它 - 拉和推都再次工作了。

我不知道为什么 Xcode 损坏了 URL。这是 Xcode 4.6.3

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-26T09:02:24.710

我对 SSH 定义的主机也有同样的问题。
我的`~/.ssh/config`样子是这样的：

```
Host myGitServer
HostName {real address goes here}
{Some more config for the host here} 
```

我的存储库远程 URL 的形式为`ssh://myGitServer/git/project.git`

问题是 XCode 没有读取 SSH 配置来解析“myGitServer”，因此存储库总是“离线”。我最终将“myGitServer”添加到`/etc/hosts`.

我想除其他外，当 XCode 无法直接解析 GIT 远程服务器的名称时，会导致“找不到遥控器”问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-07T23:59:35.470

1-搜索并应用指南。提到“在mac finder中显示所有隐藏文件”。并删除.git目录（这个文件夹不解决article-1就不会出现）

2-XCode>Preferences>Accounts>Delete github account并关闭xcode。而不是通过全部添加来打开并重新配置相同的 github 帐户。

3-单击部分小图标，即“源代码管理导航”（位于项目导航器附近）。当您右键单击时，将出现一个弹出窗口。并选择在 github 上创建 blabla”。实际上这个步骤解决了同样的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-14T07:28:17.253

**Xcode 10.2.1**

再检查一遍：

1) 偏好设置下的 Git Acc。2）cmd + 2，在remote下右键创建一个remote。

# css - 嵌套选择器内的与号（父选择器）

> ID：11724861
> 
> 赞同：20
> 
> 时间：2012-07-30T15:44:08.670
> 
> 标签：css, css-selectors, sass

这是否没有记录或只是不可能？

```
#parent {
  #child {
    width: 75%;

    .additional_parent_class & {
      width: 50%;
    }
  }
} 
```

这基本上会变成：

```
.additional_parent_class #parent #child {
  width: 50%;
} 
```

虽然这是有道理的，因为 & 符号的实现以及它的使用方式。如果我试图让它实现这一点怎么办：

```
#parent.additional_parent_class #child {
  width: 50%;
} 
```

我能够实现这一点的唯一方法是在子声明之外编写另一条规则：

```
#parent{
  #child {
    width: 75%;
  }

  &.additional_parent_class #child {
    width: 50%;
  }
} 
```

虽然这在此实现中不一定是“麻烦事”，但如果#child 有自己的孩子现在需要在两个规则中复制，这似乎会适得其反。

无论如何，也许我只是挑剔，但如果有更多的方法可以遍历选择器，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-24T17:24:58.407

尽管目前还不可能，但这一语法改进以及许多类似的`&`语法改进都计划在 Sass 3.3 中发布。[您可以在此处](https://github.com/nex3/sass/issues/286)关注有关 Sass 问题的功能的讨论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T05:19:22.217

我同意这将非常有帮助。不幸的是，目前在 SASS（或我知道的任何其他 CSS 预处理器）中是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T05:00:25.383

This is capable in v3.4 might be in 3.3 but not sure. I am not a fan of the syntax though. & is much easier. Wish there was something like &^ for an alias :)

```
#parent {
    #child {
        width: 75%;
        @at-root #{selector-replace(&, '#parent', '#parent.additional_parent_class')} {
            width: 50%;
        }  
    }
} 
```

# javascript - HTML 翻转按钮图像：如何使用 Internet Explorer？

> ID：11724862
> 
> 赞同：0
> 
> 时间：2012-07-30T15:44:11.853
> 
> 标签：javascript, html

我有这段简单的代码，它在 Internet Explorer 中不起作用，但在 Chrome、Firefox 等中起作用。它是一个简单的按钮图像“翻转”。

```
<html>
<head>
</head>
<body>
    <img src="p1.png" name="img1"  onMouseOver="document.images[0].src='p2.png'" onMouseOut="document.images[0].src='p1.png'" ></a>
</body>
</html> 
```

IE 6,7,8 有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:06:49.073

将您的代码更改为：

```
<html>
    <head>
    </head>
    <body>

        <img src="p1.png" name="img1"  onMouseOver="this.src='p2.png'" onMouseOut="this.src='p1.png'" />

    </body>
</html> 
```

* * *

另外，如果您的 HTML 页面包含比您在问题中显示的 HTML 页面更多的数据，我建议您将此代码放在开头，`<body>`以便预加载翻转图像，这样当您想要翻转工作（否则，只有在用户悬停图像时才会将翻转图像下载到用户的设备，从而导致翻转稍微延迟（取决于`onMouseOver`图像大小））：

```
<img src="p2.png" class="hiddenPic" />
<!-- loading (hidden) rollover image before all the other page data --> 
```

并添加 CSS`hiddenPic`类代码：`.hiddenPic { display: none; }`

* * *

其他预加载翻转图像的方法可以使用[CSS](https://www.google.co.il/search?hl=en&q=preload%20images%20css&oq=preload%20images%20css&gs_l=serp.3..0l2j0i30l8.2408.3542.0.3658.10.8.0.2.2.1.179.754.4j3.7.0...0.0...1c.82QAK4ScX-M)或[JavaScript`onLoad`事件处理程序](https://www.google.co.il/search?hl=en&q=javascript%20preload%20image%20onload&oq=javascript%20image%20onload&gs_l=serp.1.2.0i7j0j0i7j0j0i7j0l5.5963.6540.0.8020.2.2.0.0.0.0.151.290.0j2.2.0...0.0...1c.BHxz-zwmbGM)来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:50:37.863

```
onmouseover="this.src='p2.png'" 
```

使用它而不是 document.images....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:59:37.070

另一种方法（如果您还需要翻转更改其他内容也可以使用）：

```
<img src="p1.png" name="img3" id="img3" onMouseOver="document.getElementById('img3').src='p2.png'" onMouseOut="document.getElementById('img3').src='p1.png'" > 
```

[http://jsfiddle.net/DNtUY/5/（3](http://jsfiddle.net/DNtUY/5/) 个例子，你的，Said 的，这个）。

PS。您的打开标签是`<img ...>`，但关闭标签是`</a>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T16:06:41.363

也许如果图像不是那么重，您可以尝试不同的方法，例如声明两个图像并隐藏其中一个。然后，当您滚动可见图像时，使用 javascript 将其隐藏并显示另一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T22:08:00.880

您的问题的完美工作代码 mr.Stighy：

```
<html> 
<head> 
  <style type="text/css">
</head> 
<body> 
 <img src="../a_b_c/a.jpg" alt="" onMouseOver="this.src='b.jpg'" onMouseOut="this.src='a.jpg'" onClick="this.src='c.jpg'" class="style1"></a>
</body> 
</html> 
```

我认为我们搞砸了图像，就是这样...... ps Giulio 正在监视你。

# c# - 需要 CRC 编程帮助，从 .NET 类到 C 的 CRC32 转换

> ID：11724864
> 
> 赞同：0
> 
> 时间：2012-07-30T15:44:22.527
> 
> 标签：c#, .net, c, crc, crc32

代码（用C编写）：

```
unsigned long chksum_crc32 (unsigned char *block, unsigned int length)
{
   register unsigned long crc;
   unsigned long i;

   crc = 0xFFFFFFFF;
   for (i = 0; i < length; i++)
   {
      crc = ((crc >> 8) & 0x00FFFFFF) ^ crc_tab[(crc ^ *block++) & 0xFF];
   }
   return (crc ^ 0xFFFFFFFF);
}

/* chksum_crc32gentab() --      to a global crc_tab[256], this one will
 *              calculate the crcTable for crc32-checksums.
 *              it is generated to the polynom [..]
 */

void chksum_crc32gentab ()
{
   unsigned long crc, poly;
   int i, j;

   poly = 0xEDB88320L;
   for (i = 0; i < 256; i++)
   {
      crc = i;
      for (j = 8; j > 0; j--)
      {
         if (crc & 1)
         {
            crc = (crc >> 1) ^ poly;
         }
         else
         {
            crc >>= 1;
         }
      }
      crc_tab[i] = crc;
   }
} 
```

对于初学者; 我知道 CRC 是如何工作的，首先使用指定的多项式计算除数，然后将此 FCS（帧校验序列）附加到数据集并发送到最终用户系统。传输完成后，使用用于计算 FCS 的相同多项式检查 FCS，如果具有该除数的数据的余数为零，则您知道数据是正确的。

我不明白这两个功能的实现。据我所知，函数 chksum_crc32gentab() 生成校验和可以采用 32 位 CRC 多项式的所有可能的十六进制值。我不明白的一件事是**poly = 0xEDB88320L;** 等价于多项式。我也不明白这个函数底部的逻辑。例如，条件**if (crc & 1)**，这是否意味着对于 crc 中为 1 的每一位，计算，否则右移一位？

我也不明白**chksum_crc32(unsigned char *block, unsigned int length);** . 这个函数是否只接收一串字节并将它们转换为使用表计算的正确 crc 值？我想我对它在 for 循环中使用的逻辑感到困惑。

如果有人理解这段代码，解释会很好；这确实适用于 .net 类的 crc32 转换，如何转换数据然后由这些函数使用的示例如下：（C# 源代码）

```
 MemoryStream ms = new MemoryStream(System.Text.Encoding.Default.GetBytes(input));

            foreach (byte b in crc32.ComputeHash(ms))
                hash += b.ToString("x2").ToLower(); 
```

这是 C 代码的原始站点和项目。**[http://www.codeproject.com/Articles/35134/How-to-calculate-CRC-in-C](http://www.codeproject.com/Articles/35134/How-to-calculate-CRC-in-C)**

任何解释都会有所帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:49:10.870

或者只是谷歌它......第二次点击是：[http ://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/libkern/crc32.c](http://www.opensource.apple.com/source/xnu/xnu-1456.1.26/bsd/libkern/crc32.c)

从 C# 向后移植它是*很难*做到的，这些算法中的大多数已经在 C 中了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T19:12:59.120

在 CRC 计算中，二进制多项式是`x^n`系数为 0 或 1 的总和，它们被简单地表示为二进制字，其中 0 或 1 的位置指示它的哪个幂`x`是系数。

`0xEDB88320L`将 CRC32 多项式的系数表示为 1，其中有一个`x^n`项（项除外`x^32`，它被省略了）。CRC32多项式（*为什么stackoverflow没有像math.stackexchange这样的TeX方程——我不能在这里写出像样的方程！叹息，抱歉咆哮......*）是：

```
x^32 + x^26 + x^23 + x^22 + x^16 + x^12 + x^11 + x^10 + x^8 + x^7 + x^5 + x^4 + x^2 + x + 1 
```

由于该 CRC 是如何根据位排序定义的，因此最低系数位于最高位中。所以`E`上面十六进制常量中的第一个`1110`表示（按位从左到右的顺序）`1 + x + x^2`，。

[您可以在zlib](http://zlib.net/)`crc32.c`的源文件中找到该结构，此处显示了其中的一个片段：

```
static const unsigned char p[] = {0,1,2,4,5,7,8,10,11,12,16,22,23,26};

    /* make exclusive-or pattern from polynomial (0xedb88320UL) */
    poly = 0;
    for (n = 0; n < (int)(sizeof(p)/sizeof(unsigned char)); n++)
        poly |= (z_crc_t)1 << (31 - p[n]);

    /* generate a crc for every 8-bit value */
    for (n = 0; n < 256; n++) {
        c = (z_crc_t)n;
        for (k = 0; k < 8; k++)
            c = c & 1 ? poly ^ (c >> 1) : c >> 1;
        crc_table[0][n] = c;
    } 
```

`if (crc & 1)`或以上在移开之前在每一步查看`c & 1 ?`CRC 的低位。这实际上是多项式减法运算的进位位，因此如果它是 1，则从 CRC 中的下移多项式（乘以`x`）中减去（异或）多项式。无论低位是否为 1，CRC 都会下移。

您显示的`chksum_crc32()`函数确实计算了提供的数据块上的 CRC。它是对字节串进行 CRC 计算的标准基于表的方法，它通过数据字节和 CRC 的低字节的异或来索引表。这与一次移入一个位并将多项式应用于 1 位的作用相同，但它是一步完成的，而不是八位。CRC 有效地乘以`x^8`(the `>> 8`)，并且根据索引值在不同的移位位置处与多项式进行异或 0 到 8 次的异或运算。这只是使用预先计算的表格的速度技巧。

您可以找到 zlib 中使用的更极端的速度技巧，这些技巧`crc32.c`使用更大的表并一次处理更多数据。

# html - 无法在按钮内移动文本

> ID：11724865
> 
> 赞同：0
> 
> 时间：2012-07-30T15:44:24.067
> 
> 标签：html, css, button

我一直在制作各种按钮。

然而，我遇到了麻烦。

当它变小时，它会将文本推出框外，我似乎无法将其放回原处。

这是一个链接：http: [//jsfiddle.net/MichaelT/ByxRh/1/](http://jsfiddle.net/MichaelT/ByxRh/1/)

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:51:26.000

看起来 line-height 被设置为`p`.

```
p.speech {
     height:50px;
     line-height:100px;
} 
```

如果您只是将 的 line-height 设置为`p`您希望`p`出现的高度，并且不给它任何明确的高度，它应该看起来不错：http: [//jsfiddle.net/ByxRh/16/](http://jsfiddle.net/ByxRh/16/)

```
p.speech {
     line-height:50px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T15:50:58.193

[jsfiddle](http://jsfiddle.net/ByxRh/13/)

这是您的代码的更新版本。试着弄乱高度、字体大小等，直到你得到你想要的。

# android - TabWidget.OnTabSelectionChanged 无法解析为类型

> ID：11724871
> 
> 赞同：0
> 
> 时间：2012-07-30T15:44:36.613
> 
> 标签：android, eclipse, compiler-errors, android-tabhost, tabwidget

我正在尝试创建一个自定义`TabHost`. 我想`setTabSelectionListener()`调用`TabWidget`.

但我有以下错误：

> TabWidget.OnTabSelectionChanged 无法解析为类型

这是我的测试代码：

```
public class CustomTabHost {
    public CustomTabHost(Activity activity) {       
        TabWidget tab_widget = (TabWidget) activity.findViewById(R.id.tab_widget);
        tab_widget.setTabSelectionListener(new TabWidget.OnTabSelectionChanged() {
            public void onTabSelectionChanged(int tabIndex, boolean clicked) {

            }
        });
    }
} 
```

我正在使用 Eclipse 和 Android 2.2。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:57:14.673

而不是使用 setTabSelectionListener 为什么不使用 .OnchangeTabListener 如图所示：[如何在 android 中使用 TabHost.OnTabChangeListener？](https://stackoverflow.com/questions/2243360/how-to-use-tabhost-ontabchangelistener-in-android)

```
 public class ListFragment extends Fragment implements OnTabChangeListener{

View v;
TabHost tabHost;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

     v =  inflater.inflate(R.layout.main_menu_libraries, container, false);

      tabHost=(TabHost) v.findViewById(R.id.tabHost);
     tabHost.setup();

     TabSpec spec1=tabHost.newTabSpec("Tab 1");
     spec1.setContent(R.id.tab1);
     spec1.setIndicator("About",getResources().getDrawable(R.drawable.android));

     TabSpec spec2=tabHost.newTabSpec("Tab 2");
     spec2.setContent(R.id.tab2);
     spec2.setIndicator("Blog",getResources().getDrawable(R.drawable.android));

     tabHost.addTab(spec1);
     tabHost.addTab(spec2);

     tabHost.setOnTabChangedListener(this);

     return v;
}

@Override
public void onTabChanged(String arg0) {

    if (tabHost.getCurrentTab()==0)
            {
        //your code here

            }

           if (tabHost.getCurrentTab()==1)
           {
        //your code here
            } 
```

同样在它说 //your code here 的部分......尝试调用一个扩展 Fragment 的新类并用菜单膨胀特定的片段！

# mysql - MySQL 中的 SmallInt 与 Date - 性能、灵活性和大小

> ID：11724877
> 
> 赞同：1
> 
> 时间：2012-07-30T15:44:59.707
> 
> 标签：mysql, sql

我正在创建一个表来存储每周的产品数据，实际上是计数器。

例子：

```
 id = 1
 productId = 195
 DateTime = 01/07/2012
 Counter = 0 
```

我的问题是关于数据库存储空间、查询灵活性和性能。

而不是 DateTime 列，我考虑使用 SmallInt 'WeekNumber' 列。

我将决定星期的开始日期（基准日期）。假设 2012 年 10 月 10 日。

对于每个产品和每周，都会有一行代表我每天计算的总内容（即特定产品页面的浏览量）。

从我读过的内容：

日期列是 4 个字节

SmallInt 是 2 个字节

我想尽可能多地节省空间，但我希望能够根据日期范围（2012 年 8 月至 2013 年 9 月）、特定年份的特定星期等查询数据库。

这种架构方法是否良好，或者我会发现自己在 SQL 性能、查询灵活性、索引等方面存在问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:49:51.103

考虑一下您将要做出的牺牲和复杂性，以节省~~2 个字节~~ **一个字节**....

为了使用，`smallint`您将通过一个函数传递对数据的每次调用，以从您自己的任意日期开始获取其“周数”......这既不是更高效也不是更清晰。

同样，查询也不那么灵活，因为每个查询都需要根据您的神奇“开始日期”进行比较，而不仅仅是日期比较/组。您的查询可能不是 SARGable 并且可能会**更慢**

**编辑：**根据您的评论，您有 50GB 的硬限制....对于您正在讨论的聚合数据库来说，这是一个很大的空间。通过使这复杂化，您正在招致过度的压力和可持续性的丧失。

根据 MySQL，`DATE`类型只有 3 个字节，而 2 个字节`SMALLINT`

[http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html](http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html)

因此，您将每行保存**一个字节**（您说每周 2000 字节）......所以我们说每周 2KB，每年 104 KB......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:19:48.860

如果此表没有子表（没有引用它的外键），为了节省空间，您可以考虑省略代理主键`(id)`，而是使用复合键`(productId,date_)`作为主键。（根据您的描述，听起来您希望将这些列的组合设为 UNIQUE，并且将这两个列都设为 NOT NULL。

如果您要存储的是“周”标识符而不是 DATE，那么在数据库方面没有问题，只要您的查询没有将该列包装在表达式中以获取要在谓词中使用的 DATE 值. 也就是说，为了性能，您的谓词将需要位于“星​​期标识符”列，例如

```
WHERE t.product_id = 195 AND t.week_id >= 27 AND t.week_id < 40 
```

像这样在裸列上的谓词将是 sargable（即，允许使用索引。）您不想将该`week_id`列包装在表达式中以返回 DATE，并在该表达式上使用 WHERE 子句。（在比较的文字方面有表达式不是问题......你只是不希望它们在“表”方面。

这确实将成为您是否可以使用 a`week_id`代替 DATE 列的决定因素。

使用“期间 id”代替 DATE 对于整月的期间实施起来相当简单。（“天”也很简单，但在那里实际上没有什么好处。）在“周”期间实施这种方法更加复杂，因为您需要在两年之间进行一周的处理。

例如，考虑一下，今年（2012 年）的最后两天是周日和周一，但同一周的周二到周六是 2013 年。你需要决定这是两个单独的星期，还是那是同一周。

但是（SMALLINT 与 DATE 的）节省 1 字节并不是真正的好处。“week_id”列让你（如我所见）是你有一个标识一周的 id 值。考虑,的日期值`'2012-07-30'`，它们实际上都代表同一周。所以你有多个一周的值，这样一个 UNIQUE 约束并不能真正保证（在数据库方面）你在同一周没有超过行。（这当然不是一个无法克服的问题，您可以指定只存储一个星期日（或星期一）的日期值。）`'2012-07-31'``'2012-08-01'``(product_id,date)`

* * *

总之，

为了节省空间，我将首先删除该代理`id`列，并将 product_id 和 DATE 的组合作为主键。

然后我只会*考虑*将该 DATE 更改为 SMALLINT，如果我可以保证所有查询都将引用该裸 SMALLINT 列，而不是引用将 SMALLINT 列转换回 DATE 的表达式。

# arrays - 给定一个有序数组，中间有几个数字反转。如何排序？

> ID：11724879
> 
> 赞同：3
> 
> 时间：2012-07-30T15:45:08.523
> 
> 标签：arrays, algorithm, sorting, language-agnostic

我实际上是在尝试解决一个问题，即我有一个已排序但有几个数字颠倒的数组。例如： `1 2 3 4 9 8 7 11 12 14`是数组。

现在，我的第一个想法是应用一个`Binary Search`算法来找到一个`PEAK ( a[i]>a[i+1] && a[i]>a[i-1])`

但是，我觉得它可能并不总是给出正确的结果。此外，由于列表几乎已排序，因此它可能效率不高。

下一个印象：`Insertion Sort`如果我没记错的话，由于列表已排序并且插入排序在这种情况下提供最佳性能，因此应用。

那么任何人都可以提出更好的解决方案，或者我的解决方案是否正确？有效还是无效？

PS-这不是作业！

更新：插入排序（在这种情况下为 O（n））或线性扫描以找到子序列，然后再次反转它（O（n））。如果我们可以优化它，还有机会吗？或者可能在 O(logn) 中做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:50:26.567

线性搜索第一个反转（即`a[i+1] < a[i]`），称为它的索引`inv1`。继续直到反转停止，调用最后一个索引`inv2`。反转 和 之间的数组`inv1`，`inv2`包括在内。

在您的示例中，`inv1`是 4，并且`inv2`是 6；数组元素从零开始编号。

该算法在原始条目的数量上是线性的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T15:49:14.383

如果您确定列表已排序，除了嵌入的反向子序列，我建议您进行简单扫描，检测反向子序列的开头（通过查找第一个反向变化），扫描到末尾子序列（更改恢复正确方向）并反转子序列。如果它们不重叠，这也应该适用于多个子序列。复杂度应该是 O(n)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T16:15:05.887

注意：应该有一个额外的决定是在 {4,9} 之间还是在 {9,8} 之间进行切割。（我只是添加一个;-)

```
#include <stdio.h>

int array[] = {1,2,3,4,9,8,7,11,12,14};

unsigned findrev(int *arr, unsigned len, unsigned *ppos);
void revrev(int *arr, unsigned len);

unsigned findrev(int *arr, unsigned len, unsigned *ppos)
{
unsigned zlen,pos;

for(zlen=pos=0; pos < len-1; pos++ ) {
        if (arr[pos+1] < arr[pos]) zlen++;
        else if (zlen) break;
        }
if (zlen) *ppos = pos - zlen++;

return zlen;
}

void revrev(int *arr, unsigned len)
{
unsigned pos;
for (pos = 0; pos < --len; pos++) {
        int tmp;
        tmp = arr[pos];
        arr[pos] = arr[len] ;
        arr[len] = tmp;
        }
}

int main(void)
{
unsigned start,len;

len = findrev(array, 10, &start);
printf("Start=%u Len=%u\n", start, len);
revrev(array+start, len);

for (start=0; start < 10; start++) {
        printf(" %d", array[start] );
        }
printf("\n"  );

return 0;
} 
```

注意：反向运行的长度也可以通过二进制搜索大于（或等于）反向序列的第一个元素的第一个值来找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T17:10:15.753

Timsort 非常擅长对大部分已经排序的数组进行排序 - 最重要的是，它通过使用两个不同的合并步骤来进行就地合并排序，具体取决于哪个会更好。我被告知它可以在 python 和 java 标准库中找到，也许还有其他标准库。不过，您仍然可能不应该在循环内使用它 - 在循环内，最好使用 treap（以获得良好的平均速度）或红黑树（以获得低标准偏差速度）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T02:45:41.700

我认为线性解决方案 [O(n)] 是最好的解决方案，因为在 n 个数字的列表中，如果 n/2 个数字是反向排序的，如下例所示，我们将不得不反转 n/2 个数字，这会给出 O( n)。

即使在这种情况下，对于类似的序列，我认为在最坏的情况下插入排序将是 O (n^2) 而不是 O (n)。

示例：考虑一个具有以下分布的数组，我们尝试使用插入排序，

n/4 个已排序的数字 | n2 个逆序数 | n/4 个已排序的数字

对于 n/2 个反向排序的数字，排序复杂度将为 O(n^2)。

# xcode - 为单元测试目标禁用 *No visible @interface* 错误

> ID：11724880
> 
> 赞同：-1
> 
> 时间：2012-07-30T15:45:10.997
> 
> 标签：xcode, unit-testing, compiler-errors

我有一个类别 (on `NSDate`)，其中包含一个仅从类别中的另一个方法调用的方法，因此无需在类别的头文件中公开该方法。

但是，正如预期的那样，如果我从单元测试中调用该方法，编译器会大喊

> 'NSDate' 没有可见的@interface 声明选择器'myMethod:'

我希望能够关闭这些特定错误（当然，仅针对单元测试目标）。

有人可以指出正确的编译器标志的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:51:08.540

与其关闭它们，为什么不直接重新声明呢？如果您完全关闭警告，那么您将失去编译器会在真实位置向您发出警告的事实。

所以只需在单元测试上方声明它

```
@interface NSDate (UnitTests)

// your method sig

@end

@implementation YourUnitTest

//... 
```

# c# - 如何在 byte[] 数组的数据前添加 'ff ff ff ff' (HEX)？

> ID：11724884
> 
> 赞同：-2
> 
> 时间：2012-07-30T15:45:21.860
> 
> 标签：c#, connection, udp, hex, packet

我目前正在为多人游戏编写模拟器。
客户端将此发送到服务器：`ÿÿÿÿ2joinParty 61586 110000140b9f842 1 1 0 -1 1 pw 1`.
我的程序发送`joinParty 61586 110000140b9f842 1 1 0 0 1 pw 1`到服务器。
现在，当我让它发送`ÿÿÿÿ`'s 时，它发送而不是`ff ff ff ff`, `3f 3f 3f 3f`。几乎所有的数据包都需要`ff ff ff ff`，否则服务器会拒绝连接。

我怎样才能添加它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:51:08.117

```
byte[] firstArray = new byte[] {0xFF,0xFF,0xFF,0xFF}; 
byte[] secondArray = [your data here]
byte[] result = firstArray.Concat(secondArray).ToArray(); 
```

# c# - 如何确保对图像的响应是完整的？

> ID：11724886
> 
> 赞同：1
> 
> 时间：2012-07-30T15:45:27.697
> 
> 标签：c#, asp.net, httpwebrequest, web-scraping, captcha

我正在为一个网站在 ASP.net 中做一个网页抓取项目，因为需要 Catpcha 代码，因此我需要让用户在继续之前输入 Captcha 代码。

到目前为止，该项目运行良好，但我发现的唯一问题是有时验证码响应未完全捕获，因此将响应流转换为 Image 导致以下错误：“参数无效。”

我注意到网络浏览器没有这个问题，只要服务器没有关闭，它总是可以很好地显示验证码。

但是，这对HttpWebRequest来说没有意义，有时能得到，有时不能，请问有没有办法保证Response Stream完整？

我的代码片段如下：

```
public Image GetCaptchaCode()
{
    Image returnVal = null;
    Uri uri = new Uri(URL_CAPTCHA);
    HttpWebRequest request = null;
    HttpWebResponse response = null;

    try
    {
        // Get Cookies
        CookieCollection cookies = this.GetCookies();
        foreach (Cookie cookie in cookies)
        {
            Console.WriteLine(cookie.Name + ": " + cookie.Value);
        }

        // Get Catpcha
        request = (HttpWebRequest)HttpWebRequest.Create(uri);
        request.ProtocolVersion = HttpVersion.Version11;
        request.Method = WebRequestMethods.Http.Get; // use GET for loading Captcha
        request.CookieContainer = this._cookies; // Store Cookies Info
        System.Net.ServicePointManager.Expect100Continue = false;

        // Add more cookies
        if (cookies != null)
        {
            request.CookieContainer.Add(cookies);
        }

        // Handle Gzip Compression
        request.Headers.Add(HttpRequestHeader.AcceptEncoding, HEADER_TYPE);
        request.AutomaticDecompression = DecompressionMethods.GZip;
        request.Referer = URL_REFERER;
        request.UserAgent = USER_AGENT;

        // Get Response
        response = (HttpWebResponse)request.GetResponse();
        returnVal = Image.FromStream(response.GetResponseStream());

    }
    catch (Exception ex)
    {
        string errMsg = ex.Message;
    }
    finally
    {
        if (uri != null) uri = null;
        if (request != null) request = null;

        if (response != null)
        {
            response.Close();
            response = null;
        }

    }

    return returnVal;
} 
```

# symfony - Symfony 2 FosUser：注册后进行身份验证

> ID：11724888
> 
> 赞同：1
> 
> 时间：2012-07-30T15:45:32.423
> 
> 标签：symfony, fosuserbundle

我将 FOSUserBundle 与 NnmMultiUserBundle 一起使用。当用户注册时，使用我的 form_handler，用户实体被创建，并且应该自动登录这个新用户。

我无法使自动登录工作。

**我的控制器：**

```
public function registerAction()
    {
        $discriminator = $this->container->get('nmn_user_discriminator');
        $discriminator->setClass('Travelyo\UserBundle\Entity\UserFrontend');
        $form = $discriminator->getRegistrationForm();

        //$form = $this->container->get('fos_user.registration.form');
        $formHandler = $this->container->get('fos_user.registration.form.handler');
        $confirmationEnabled = $this->container->getParameter('fos_user.registration.confirmation.enabled');

        $process = $formHandler->process($confirmationEnabled, array(User::ROLE_CUSTOMER));
        if ($process) {
            $user = $form->getData();

            if ($confirmationEnabled) {
                $this->container->get('session')->set('fos_user_send_confirmation_email/email', $user->getEmail());
                $route = 'fos_frontend_registration_check_email';
            } else {
                $this->authenticateUser($user);
                $route = 'fos_frontend_registration_confirmed';
            }

            $this->setFlash('fos_user_success', 'registration.flash.user_created');
            $url = $this->container->get('router')->generate($route);

            return new RedirectResponse($url);
        }

        return $this->container->get('templating')->renderResponse('TravelyoUserBundle:Registration:user_frontend.form.html.' . $this->getEngine(), array('form' => $form->createView(),));
    } 
```

**鉴定方法：**

```
protected function authenticateUser(UserInterface $user)
    {
        try {
            $this->container->get('fos_user.user_checker')->checkPostAuth($user);
        } catch (AccountStatusException $e) {
            // Don't authenticate locked, disabled or expired users
            return;
        }

        $providerKey = $this->container->getParameter('fos_user.firewall_name');
        $token = new UsernamePasswordToken($user, null, $providerKey, $user->getRoles());
        $this->container->get('security.context')->setToken($token);
    } 
```

调用 athenticate 后，控制器重定向到 ConfirmedAction，它会尝试获取“登录”用户：

```
public function confirmedAction()
{
    $user = $this->container->get('security.context')->getToken()->getUser();
    if (!is_object($user) || !$user instanceof UserInterface) {
        throw new AccessDeniedException('This user does not have access to this section.');
    }

    return $this->container->get('templating')->renderResponse('FOSUserBundle:Registration:confirmed.html.'.$this->getEngine(), array(
        'user' => $user,
    ));
} 
```

**错误信息：**

> 致命错误：在第 115 行的 /Data/Web/Local/travelyo/vendor/bundles/FOS/UserBundle/Controller/RegistrationController.php 中的非对象上调用成员函数 getUser()

如果我然后尝试使用登录表单登录它可以正常工作（这意味着用户的创建正在工作）。但我不明白为什么不能从 security.context 中检索到这个令牌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:23:35.527

安全上下文（如 symfony 2 文档中所述）不跨防火墙共享。

我的注册表在“公共防火墙”=> /register 中。

在对用户进行身份验证时（在用户注册后），将令牌保存为 public security.context。

然后我被重定向到我的实际“帐户”防火墙 => / 帐户，并且在 security.context 中找不到令牌，因为从未为该防火墙定义过令牌。

为了解决它，我只是将我的注册过程移到了同一个防火墙下，它现在就像一个魅力。

但我仍然认为应该可以为另一个 security.context 设置一个令牌，如果有人知道它可能有用的话。

谢谢！

# objective-c - MPMediaPickerController“无法打开数据库文件”

> ID：11724890
> 
> 赞同：1
> 
> 时间：2012-07-30T15:45:37.270
> 
> 标签：objective-c, ios, mpmediapickercontroller, mpmediaquery, core-media

在某些情况下，当在我的 iOS 设备上显示 MPMediaPickerController 时，我没有在控制台中显示和记录任何结果，我发现许多 SQLite 错误以及“无法打开数据库文件”错误。我以前在 SQLite 工作过，我知道这个错误通常意味着数据库文件当前正在另一个线程和/或进程中使用。

问题是，问题充其量是间歇性的。它不会一直发生，我不确定这是否会最终发生有一个共同的主题。我很熟悉 SQLite 来理解这个问题，但是实际的数据库查询是“黑盒的”，所以我几乎无法控制它，而且我是 CoreMedia 和 MediaPlayer 框架的新手。以前有没有人看到过这种情况，如果是这样，他们是否设法找到解决问题的方法？

**编辑：**我用来实例化控制器的代码是这样的：

```
MPMediaPickerController* pickCont = [[MPMediaPickerController alloc] initWithMediaTypes:MPMediaTypeAnyAudio];
pickCont.allowsPickingMultipleItems = YES;
pickCont.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
pickCont.modalPresentationStyle = UIModalPresentationFullScreen;
pickCont.delegate = self;
[self presentModalViewController:pickCont animated:YES]; 
```

# javascript - Windows 8 wcf Web 服务（本地主机/内联网）

> ID：11724891
> 
> 赞同：0
> 
> 时间：2012-07-30T15:45:37.717
> 
> 标签：javascript, wcf, web-services, windows-8

我正在尝试从 Metro 应用程序调用 Web 服务。我正在使用 javascript 开发应用程序，并且 web 服务是基于 wcf 的。

我试过这样：

```
function callWCF() {
WinJS.xhr({
    type: "GET",
    url: "http://lei-023880-ws.sinternal.de:8732/sdata/myApp/myContract/-/employees",
}).done(
function (result) {
    console.log(result.responseText)       
},
function (request) {
}
);} 
```

或像这样：

```
 var xhr = new XMLHttpRequest();
        xhr.open("GET", "http://lei-023880-ws.s.de:8732/sdata/myApp/myContract/-/$schema", true);
        xhr.responseType = "text";
        xhr.onreadystatechange = function () {
            if (xhr.readyState == xhr.DONE) {
                var blob = xhr.reponse;
                window.console.log(blob);
            }
        }
        xhr.send(); 
```

我回来的只是一个带有代码的网络错误：2efd。我用谷歌搜索了它。它是一个“Internet_cannot_connect”错误。当我将网址更改为“microsoft.com”时，它工作正常。所以我想问题出在 wcf 服务上？在 Windows 8 浏览器中调用 URL 时，它也可以工作。为什么应用程序无法调用 url？

提前致谢。

罗比德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T22:13:07.850

由于 microsoft.com 工作，听起来好像已在清单中设置了 Internet 连接选项？（不想成为明显的船长:)，但我已经忽略了几次！）

您可以尝试 Fiddler 并查看请求的进展情况 - 如果有的话。Windows 8 的提琴手很棘手，但这篇文章应该可以帮助您进行设置：http: [//blogs.msdn.com/b/fiddler/archive/2011/09/14/fiddler-and-windows-8-metro-style -applications-https-and-private-network-capabilities.aspx](http://blogs.msdn.com/b/fiddler/archive/2011/09/14/fiddler-and-windows-8-metro-style-applications-https-and-private-network-capabilities.aspx)

# c# - 将按钮的“启用”属性绑定到 DataSet.HasChanges()

> ID：11724893
> 
> 赞同：0
> 
> 时间：2012-07-30T15:45:44.397
> 
> 标签：c#, winforms, data-binding

我想将我的 C# Windows 窗体应用程序上[`Enabled`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enabled.aspx)的 a 属性绑定到实例变量是否有更改。（即如果未更改，则禁用保存按钮。）`Button``DataSet``DataSet`

问题是，[`DataSet.HasChanges`](http://msdn.microsoft.com/en-us/library/zky7370c.aspx)它是作为*方法*实现的，而不是作为属性实现的，所以它不能被绑定。有没有简单的方法来实现这个？我是以错误的方式接近这个吗？似乎这样的事情比在数据发生变化时手动禁用和启用按钮要容易得多。

在我的研究中，我提出了[这个问题](https://stackoverflow.com/questions/2305203/databinding-to-a-method-in-wpf)，但它的解决方案（设计类以便您需要绑定的是一个属性）对于这种情况似乎不切实际。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:57:06.537

在 WinForms 应用程序中，您根本不需要将按钮的 Enabled 属性直接绑定到 DataSet。构建一个中间层（无论如何这将更容易维护和扩展），其中包含一个将 DataSet 的方法解释为控件可以绑定到的 Property 的类：

```
public bool HasChanges
{
    get
    {
        return myData == null ? false : this.myData.HasChanges();
    }
} 
```

# string - vim：将所有字符替换为给定标记

> ID：11724897
> 
> 赞同：20
> 
> 时间：2012-07-30T15:45:55.637
> 
> 标签：string, vim, replace

使用 vim 我想用另一个字符替换直到某个字符的所有字符，比如空格 -*而不会*影响行中字符的布局/数量。这是一个例子：

前：

```
real(kind=R12), intent(out) :: my_var 
```

替换`, intent(out)`为空格后（即从 开始`,`，一直到`)`）：

```
real(kind=R12)              :: my_var 
```

我知道`r`要替换一个字符，并且`nr`要替换`n`字符，但我想知道我是否可以在不先计算要替换的字符的情况下完成我的任务。

非常感谢您的回复！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-30T16:01:29.233

视觉模式可能是这里最短的方式：

```
vt:r 
```

*   `v`进入视觉模式
*   `t:`选择直到`:`
*   `r`（注意后面`r`的空格）用空格替换所选区域。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-18T15:14:42.737

在命令模式下键入“ **df** ?” 最多删除那个 (?) 字符。然后' **i** '返回插入。

例如，如果您认为以下句子：

```
The wizard quickly jinxed the gnomes before they vaporized. 
```

然后你输入 **dfs**

您将得到：

```
 before they vaporized. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T03:08:13.853

> 我知道 r 替换一个字符

你知道这`R`会让你处于替换模式吗？所以你可以点击`R`然后按住`Space`，直到你替换了你想要的所有东西。

但是，我仍然会接受托尔的回答。可视模式允许您在 vim 中使用高效的文本导航方法，而无需计算字符。

但如果您不同意，总会有[EasyMotion](http://www.vim.org/scripts/script.php?script_id=3526)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T15:47:39.323

您可以在此处使用正则表达式（用于`(.*?)`引用直到标记的所有值）。

例如：

正则表达式：`(.*?)foo`将摆脱 foo 之前的所有内容。

# c# - 正则表达式 C# 断言字符串是分数

> ID：11724900
> 
> 赞同：0
> 
> 时间：2012-07-30T15:46:10.823
> 
> 标签：c#, .net, regex, fractions

全部，

我需要 2 个将在 .NET 中工作的正则表达式来检测用户是否输入了分数：

1.  只有没有任何整数部分的小数值（不想检查 1 1/4、3 1/2 等）仅：1/2、3/4、8/3 等。分子、分母可以是浮点数或整数。

2.  所有有效分数，例如 1/3、2/3、1 1/4 等。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:42:09.067

尝试这个：

```
/// <summary>
/// A regular expression to match fractional expression such as '1 2/3'.
/// It's up to the user to validate that the expression makes sense. In this context, the fractional portion
/// must be less than 1 (e.g., '2 3/2' does not make sense), and the denominator must be non-zero.
/// </summary>
static Regex FractionalNumberPattern = new Regex(@"
    ^                     # anchor the start of the match at the beginning of the string, then...
    (?<integer>-?\d+)     # match the integer portion of the expression, an optionally signed integer, then...
    \s+                   # match one or more whitespace characters, then...
    (?<numerator>\d+)     # match the numerator, an unsigned decimal integer
                          #   consisting of one or more decimal digits), then...
    /                     # match the solidus (fraction separator, vinculum) that separates numerator from denominator
    (?<denominator>\d+)   # match the denominator, an unsigned decimal integer
                          #   consisting of one or more decimal digits), then...
    $                     # anchor the end of the match at the end of the string
    ", RegexOptions.IgnorePatternWhitespace
    );

/// <summary>
/// A regular expression to match a fraction (rational number) in its usual format.
/// The user is responsible for checking that the fraction makes sense in the context
/// (e.g., 12/0 is perfectly legal, but has an undefined value)
/// </summary>
static Regex RationalNumberPattern = new Regex(@"
    ^                     # anchor the start of the match at the beginning of the string, then...
    (?<numerator>-?\d+)   # match the numerator, an optionally signed decimal integer
                          #   consisting of an optional minus sign, followed by one or more decimal digits), then...
    /                     # match the solidus (fraction separator, vinculum) that separates numerator from denominator
    (?<denominator>-?\d+) # match the denominator, an optionally signed decimal integer
                          #   consisting of an optional minus sign, followed by one or more decimal digits), then...
    $                     # anchor the end of the match at the end of the string
    " , RegexOptions.IgnorePatternWhitespace ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:56:36.840

**为了第一**

对于 形式的任何分数`##/##`，其中分子或分母可以是任意长度，您可以只使用：

```
\d+(\.\d+)?/\d+(\.\d+)? 
```

只要至少有一个或多个数字，就在斜线前后抓住尽可能多的数字。如果有小数点，它后面也必须跟一个或多个数字，但整个组是可选的，并且只能出现一次。

**对于第二个**

假设它*必须*是一个分数，所以一个整数单独喜欢`1`不会计数，只需将以下内容贴在前面

```
\d*\s* 
```

在分数的其余部分之前抓取一些数字和空格。

# vb.net - 平均图像的颜色

> ID：11724901
> 
> 赞同：1
> 
> 时间：2012-07-30T15:46:16.783
> 
> 标签：vb.net, vb.net-2010

我正在使用此代码来计算图像的平均颜色，但这并没有按预期工作。结果不准确。 **如何找到图像的平均颜色**？

```
Private Sub btnAvg_Click() Handles btnAvg.Click
    Dim x, y As Integer
    bmp = New Bitmap(picBox.Tag.ToString)

    For y = picBox.Top To picBox.Bottom
        For x = picBox.Left To picBox.Right
            With bmp.GetPixel(x, y)
                totalR = totalR + .R : totalG = totalG + .G : totalB = totalB + .B
            End With
        Next x
    Next y

    avgR = totalR / ((picBox.Bottom - picBox.Top) * (picBox.Right - picBox.Left))
    avgG = totalG / ((picBox.Bottom - picBox.Top) * (picBox.Right - picBox.Left))
    avgB = totalB / ((picBox.Bottom - picBox.Top) * (picBox.Right - picBox.Left))
End Sub 
```

*我正在寻找一个准确率超过 80% 的高速结果。这不是重复的问题，因为其他问题仅涉及 C#*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:19:54.470

这应该有效：

```
Private Function getAverageColor(ByVal imageFilePath As String) As Color
    Dim bmp As New Bitmap(imageFilePath)
    Dim totalR As Integer = 0
    Dim totalG As Integer = 0
    Dim totalB As Integer = 0
    For x As Integer = 0 To bmp.Width - 1
        For y As Integer = 0 To bmp.Height - 1
            Dim pixel As Color = bmp.GetPixel(x, y)
            totalR += pixel.R
            totalG += pixel.G
            totalB += pixel.B
        Next
    Next
    Dim totalPixels As Integer = bmp.Height * bmp.Width
    Dim averageR As Integer = totalR \ totalPixels
    Dim averageg As Integer = totalG \ totalPixels
    Dim averageb As Integer = totalB \ totalPixels
    Return Color.FromArgb(averageR, averageg, averageb)
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T16:23:50.860

一般来说，平均颜色没有多大意义。粉红色和海军黄色的平均值是多少？您现在计算它的方式会产生完全不同的颜色。

您需要在不同的色彩空间中工作。HSB 是一种易于使用的工具，并由 Color 类型直接支持。尽管它不处理人眼的强烈非线性颜色感知。Color.GetHue() 返回色调，一个与颜色成正比的值。您还应该创建一个直方图，以便照片的背景不会过多地干扰结果。或者至少从照片的中心向外工作。这是否足以检测肤色是相当值得怀疑的。

# ruby-on-rails - rails 电子邮件错误 - 530-5.5.1 需要身份验证。

> ID：11724906
> 
> 赞同：3
> 
> 时间：2012-07-30T15:46:52.087
> 
> 标签：ruby-on-rails, ruby, email, smtp, actionmailer

尝试从 Ruby on Rails 发送电子邮件，但得到以下信息：

```
SocketError in UsersController#create
getaddrinfo: nodename nor servname provided, or not known 
```

我的环境/development.rb 文件有：

```
 config.action_mailer.smtp_settings = { 
    address: "smtp.gmail.com",
    port: 587,
    domain: "my_company.org",
    authentication: "plain",
    enable_starttls_auto: true,
    user_name: "my_username@my_company.org",
    password: "my_pass"
  } 
```

和

```
 config.action_mailer.delivery_method = :smtp 
```

和

```
 config.action_mailer.default_url_options = { :host => 'localhost:5000' } 
  # 5000 rather than 3000 as I am using foreman. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T16:01:17.867

我使用我的 Gmail 做了同样的事情，以下是我的配置，试试看是否可行

```
 config.action_mailer.default_url_options = { :host => 'localhost:3000' }
  ActionMailer::Base.smtp_settings = {
                    :address        => "smtp.gmail.com",
                    :port           => 587,
                    :authentication => :plain,
                    :user_name      => "<my gmail>@gmail.com",
                    :password       => "<my gmail password>",
                    :openssl_verify_mode  => 'none'
  } 
```

请注意

```
:openssl_verify_mode  => 'none' 
```

部分跳过 SSL 错误。

但是很抱歉，我不知道错误是什么，可能您尝试将 Gmail SMTP 服务器与另一个域名一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-25T13:33:16.700

如果其他人遇到同样的问题，我只想补充一点，我在我的 Rails API 中尝试使用 gmail 实现邮件系统时遇到了完全相同的问题，并且添加`:openssl_verify_mode => 'none'`并没有解决我的问题。

相反，安装[figaro](https://github.com/laserlemon/figaro) gem，然后`application.yml`像这样添加我的环境变量：

```
gmail_username: "myemail@gmail.com"
gmail_password: "mypassword" 
```

为我做了伎俩。

（不要忘记更改您的 SMTP 设置：）

```
user_name:             ENV['gmail_username'],
password:              ENV['gmail_password'], 
```

# c# - 获取Windows中空闲进程的总CPU时间类似于任务管理器

> ID：11724907
> 
> 赞同：2
> 
> 时间：2012-07-30T15:47:02.773
> 
> 标签：c#, windows

我正在开发一个大型应用程序，想了解两个时间点之间 CPU 的负载情况。我不仅对我自己的流程感兴趣，而且对所有流程感兴趣。

我的想法是在两个时间段之间获取空闲进程的总 CPU 时间。然后将该值与实际时间差进行比较。然后可以计算在空闲进程上花费的平均 CPU 时间百分比，从而计算在实际进程上花费的平均 CPU 百分比。

例如：

*   实时样本：2012/07/30 13:56:1 和 2012/07/30 13:56:21
*   空闲进程总 CPU 时间样本：56:23:10 和 56:23:15
*   实时差异：20s
*   空闲进程总CPU时间的差异：5s
*   空闲进程中的平均 % CPU 时间：25%
*   实际进程中的平均 % CPU 时间：75%

为了尽可能减少对性能的影响，我只想取两个样本。一个在开头，一个在结尾。

我也不想查看其他进程来计算总 CPU 负载，只查看空闲进程。（例如我不想计算其他进程的总 CPU 时间的总和）

我曾尝试使用 Kernel32.dll [OpenProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684320%28v=vs.85%29.aspx)。但显然您无法访问空闲进程。它抛出一个 ERROR_ACCESS_DENIED 异常。

这必须是可能的，因为任务管理器显示空闲进程的总 CPU 时间。

**注意：我对进程的瞬时 % CPU 时间不感兴趣。只有 Total CPU Time 才能在以后计算平均值。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:43:01.090

您可能正在寻找这样的东西：

```
static Program
{
    private static PerformanceCounter cpuCounter = new PerformanceCounter() { 
        CategoryName = "Processor", 
        CounterName = "% Processor Time", 
        InstanceName = "_Total" };

    static void Main()
    {
        cpuCounter.NextValue();
        // Do your processing here.
        float totalCpuUsagePercentage = cpuCounter.NextValue();
    }
} 
```

然后，totalCpuUsagePercentage 将包含自上次 cpuCounter.NextValue() 以来的总负载百分比。

如果您不想要百分比，您可以使用 CounterName = "Processor Time" 代替。

希望这对您的探索有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:59:33.060

“空闲进程”很可能不存在。

您可以尝试替换您自己的“空闲进程”，其中包含 [no. 核心]线程，空闲+1优先级，CPU循环，计算经过的时间。那可能行得通。

它还会给你的冷却系统一些锻炼，让你的办公室暖和起来：）

# jquery - jQuery UI 可拖动并在拖动事件上添加类

> ID：11724908
> 
> 赞同：8
> 
> 时间：2012-07-30T15:47:05.707
> 
> 标签：jquery, jquery-ui-draggable

我正在尝试使用 jQuery UI 向可拖动事件添加一个类。

但是，我编写的以下代码没有按预期工作；

```
$(function () {
    $('ul.sortable div.draggable').draggable({
        start: function(event, ui) { ui.helper.addClass('move'); },
    });
}); 
```

本质上，我正在尝试向 div.draggable 添加一个阴影（使用移动类）。当拖动事件有效时我做错了什么，但没有出现投影？

提前致谢..

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-30T15:54:24.667

来自[jQuery UI Draggable 文档](http://jqueryui.com/demos/draggable/)：

> . 在拖动过程中，元素也会获得一个 ui-draggable-dragging 类

您可以编写 CSS 来利用这个类，而不是尝试添加一个类。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-11T20:26:51.470

相同的 CSS 继承仍然适用。如果您有自己的样式表，请包括类似

```
.ui-draggable-dragging{
    box-shadow:0 0 2px #000;
} 
```

如果您没有样式表。您仍然可以使用`<style>`标签在 html 文件中添加此内联

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-26T11:47:25.373

我想我们在 dargging start 上添加一个新的`class` **my_class**，那么代码应该是这样的：

```
$(function () {
    $('ul.sortable div.draggable').draggable({
         start: function( event, ui ) {
              $(this).addClass('my_class'); 
         }
    });
}); 
```

CSS：

```
.my_class{
/* YOUR CLASS CSS */
} 
```

请参阅此[JSFIDDLE](http://jsfiddle.net/phpdeveloperrahul/Bz4GN/)以在拖动开始和拖动结束时添加和删除类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-27T02:08:34.477

尝试使用选项类：[https ://api.jqueryui.com/draggable/#option-classes](https://api.jqueryui.com/draggable/#option-classes)

例如：

```
$( ".selector" ).draggable({
    classes: {
      "ui-draggable": "move"
    }
  });
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.0/jquery.min.js"></script>
```

# haproxy - 如何使用 HAProxy 维护静态 URL

> ID：11724910
> 
> 赞同：0
> 
> 时间：2012-07-30T15:47:11.140
> 
> 标签：haproxy

我正在使用带有两个不同节点的 Haproxy，这些节点具有“地理上分散”的不同机器

*   具有 dns = http1.example.com 的负载均衡器
*   具有 dns = http2.example.com 的负载均衡器两个

[该服务正在使用原始主机名](http://mysite.com)--haproxy侦听 DNS主站点

我的问题是如何维护静态 URL？即它不能显示后端服务器域或IP，我只想显示原始主机名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:19:12.387

最简单的方法是设置一个轮询 DNS 条目，该条目返回两个服务器的 IP 地址。

但是，您可能希望使用 GSLB（全局服务器负载平衡）解决方案，该解决方案可以根据运行状况检查从响应中删除失败的负载平衡器。如果您位于多个数据中心，一些 GSLB 解决方案可以将用户路由到对他们来说性能最高的位置。

F5 和 Netscaler 拥有硬件 GSLB 解决方案。Dyn、Akamai、UltraDNS 等提供 GSLB 作为服务。AWS 的 Route53 具有加权循环解决方案。他们目前不提供基于地理位置的健康检查或路由。

# c# - 如何获取 EntityObject 类型的类型并用数据填充它？

> ID：11724911
> 
> 赞同：0
> 
> 时间：2012-07-30T15:47:22.733
> 
> 标签：c#, entity-framework

我正在尝试创建一种方法，该方法将循环实体对象上的属性列表，检查每个属性并在其中粘贴一些虚拟数据。这可能吗？我的尝试在下面，但我被卡住了......（评论详细说明了我无法解决的问题）......

```
private static void SetAllNonNullableProperties(EntityObject airport, string uniqueMessage)
{
    Type t = airport.GetType();
    PropertyInfo[] props = t.GetProperties();

    foreach (var prop in props)
    {
        //1) How do I see if this property is nullable?
        //2) How do I tell the type so that I can stick a string/bool/datetime in it with dummy data?
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:28:32.980

**嗨*Exitos*，试试这个：**

```
public bool isNullableProperty(PropertyInfo p)
{
    bool result = false;
    foreach (object attr in p.GetCustomAttributes(typeof(EdmScalarPropertyAttribute), false))
        if (!(((EdmScalarPropertyAttribute)attr).IsNullable))
            result = true;
    return result;
}

public void SetAllNonNullableProperties(System.Data.Objects.DataClasses.EntityObject airport)
{
    Type t = airport.GetType();
    PropertyInfo[] props = t.GetProperties();

    foreach (PropertyInfo p in props)
    {
        if (isNullableProperty(p)) 
            // Now i know the secrets... ;)

        if (p.PropertyType() == typeof(DateTime))
            //  This property type is datetime
        else if (p.PropertyType() == typeof(int))
            // And this type is integer

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:48:48.197

尝试这样的事情：

```
using System;
using System.Reflection;

namespace ReflectionProp
{
    class Program
    {
        static void Main(string[] args)
        {
            Foo obj = new Foo { Name = "obj", Num = null, Price = null };
            Console.WriteLine(obj);

            SetAllNonNullableProperties(obj, 100, 20);

            Console.WriteLine(obj);

            Console.ReadKey();
        }

        private static void SetAllNonNullableProperties(Foo obj, int num, decimal dec)
        {
            Type t = obj.GetType();
            PropertyInfo[] props = t.GetProperties();

            foreach (var prop in props)
            {
                // check if property is nullable
                if (Nullable.GetUnderlyingType(prop.PropertyType) != null)
                {
                    // check if property is null     
                    if (prop.GetValue(obj, null) == null)
                    {
                        if(prop.PropertyType == typeof(Nullable<int>))
                            prop.SetValue(obj, num, null);

                        if (prop.PropertyType == typeof(Nullable<decimal>))
                            prop.SetValue(obj, dec, null);
                    }                    
                }
            }
        }
    }

    public class Foo
    {
        public Nullable<int> Num {get;set;}
        public string Name { get; set; }
        public Nullable<decimal> Price { get; set; }

        public override string ToString()
        {
            return String.Format("Name: {0}, num: {1}, price: {2}", Name, Num, Price);
        }
    }
} 
```

# ruby-on-rails - 使用 Doorkeeper 使用客户端凭据在 OAuth 中发布

> ID：11724912
> 
> 赞同：10
> 
> 时间：2012-07-30T15:47:25.767
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rest, oauth

我已经实现了一个 REST API 并用门卫保护它。我编写了一个小型客户端程序来访问它，并且使用资源所有者凭据流可以正常工作。

现在我正在尝试使用客户端凭据[流](https://github.com/applicake/doorkeeper/wiki/Client-Credentials-flow)来实现调用。所以我按照链接中的示例进行操作。

当我使用 GET 请求时，一切都很好，但是当我使用 POST 请求时，我得到一个`401 Unauthorized`. 这是对不需要资源所有者的方法的调用。

我的 API 控制器中唯一相关的是：

```
doorkeeper_for :all 
```

我还没有实现任何范围或任何此类（我需要吗？）。

我的客户端代码如下所示（与[github 中的示例](https://github.com/applicake/doorkeeper/wiki/Client-Credentials-flow)完全相同）：

```
require 'rest-client'
require 'json'

client_id = 'my_client_id...'
client_secret = 'my_client_secret...'

response = RestClient.post 'http://localhost:3000/oauth/token', {
  grant_type: 'client_credentials',
  client_id: client_id,
  client_secret: client_secret
}
token = JSON.parse(response)["access_token"]

# this line works great:
RestClient.get 'http://localhost:3000/api/v1/flights.json', { 'Authorization' => "Bearer #{token}" }
# this line always fails (401 Unauthorized):
RestClient.post 'http://localhost:3000/api/v1/flights.json', { 'Authorization' => "Bearer #{token}" } 
```

知道我可能做错了什么吗？为了启用客户端凭据流，我应该在我的应用程序中做些什么特别的事情吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-04T08:08:47.160

我想到了。问题是我没有正确使用 RestClient.post 。第二个参数应该是有效载荷，第三个应该是标头。它应该是这样的：

```
RestClient.post 'http://localhost:3000/api/v1/flights.json', {}, { 'Authorization' => "Bearer #{token}" } 
```

# orbeon - 我们需要更新 Orbeon 吗？

> ID：11724915
> 
> 赞同：0
> 
> 时间：2012-07-30T15:47:36.920
> 
> 标签：orbeon, xforms, exist-db

我们正在尝试在一个已有 4 年历史的 orbeon 项目中使用**fr:error-summary**组件，但我们无法使其工作。我们收到以下错误消息：

```
Error Message

Cannot load "/xbl/orbeon/error-summary/error-summary.xbl" with webapp loader

Exception Class org.orbeon.oxf.resources.ResourceNotFoundException 
```

该项目现在使用 orbeon v3.7.1 并存在 v1.3。此错误是由于 orbeon 的过时版本造成的吗？如果没有，如何配置 orbeon 以使这些线路正常工作？

```
<fr:error-summary observer="my-group">
    <fr:label>Your Form Contains the Following Errors</fr:label>
</fr:error-summary> 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:31:12.953

简而言之，您不能`fr:error-summary`在 3.7.1 中使用，因为它在该版本中不能作为单独的、可重用的组件使用。

[您可以在此处](https://github.com/orbeon/orbeon-forms/blob/tag-release-dev-3.7.1/src/resources/apps/fr/components/view.xsl#L414)和[此处](https://github.com/orbeon/orbeon-forms/blob/tag-release-dev-3.7.1/src/resources/apps/fr/includes/error-summary-model.xml)查看它是如何连接到 3.7.1 的 Form Runner 中的。

# javascript - 用自定义路径和 rexep 替换 css 中的相对链接

> ID：11724926
> 
> 赞同：0
> 
> 时间：2012-07-30T15:48:07.883
> 
> 标签：javascript, css, regex

使用此功能，我可以在 ajax 加载的 css 文件中获取所有相对链接，并将它们替换为自定义路径。

```
var newCss = cssText.replace(/url\('([^)]+)'\)/gm, function (a, b) {
    return 'url(\'' + 'myCustomPath' + b + '\')';
}); 
```

但是这个似乎只改变了带有*单引号*的链接。

我怎样才能用*双引号*和*不*带引号来使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:50:18.503

尝试替换这个：

```
/url\('([^)]+)'\)/gm 
```

这样 ：

```
/url\(['"]?([^'")]+)['"]?\)/gm 
```

# visual-studio-2010 - OSTYPE_solaris 在哪里定义

> ID：11724939
> 
> 赞同：0
> 
> 时间：2012-07-30T15:48:57.077
> 
> 标签：visual-studio-2010, porting

我正在将代码从 Solaris 移植到 Windows Visual Studios。为了使代码与两者兼容，我使用了#if defined (Win32) 和#ifdef(OSTYPE_solaris) 等语句。我找到了 Win32 的定义位置，但我找不到 OSTYPE_solaris 的定义位置。我在想我可能找不到它的定义，因为我在 Visual Studios 上寻找它，而定义 OSTYPE_solaris 的标头在 Visual Studios 上不可用。我的假设是否正确？如果是这样，有谁知道 OSTYPE_solaris 是在哪里定义的？我用谷歌搜索了一下，但我没有找到这个问题的运气。我对 OSTYPE_linux 也有同样的困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:00:48.737

我的猜测是它们是由编译器本身定义的。如果 Solaris 使用 gcc 作为编译器，您可以检查编译器定义的变量，如下所示：

回声"" | gcc -E -dM -

但我认为在大多数情况下你不应该按平台定义，最好使用基于特征的定义，如 HAVE_SOCKET_H。但这需要在提供这些定义的多平台构建系统上做更多的工作，而您可能不需要它们。

# jdbc - 使用 Jdbc 返回的日期位于 PDT 时区

> ID：11724946
> 
> 赞同：0
> 
> 时间：2012-07-30T15:49:19.407
> 
> 标签：jdbc, google-apps-script

我编写了一个独立的脚本，它使用 Google Apps Script JDBC 对象在 mySQL 数据库中存储日期（日期类型字段）。日期的时区是 UTC。

我做了一个选择所有日期的查询，例如：SELECT `Date1`FROM`Table1`

当我使用 GetObject(1) 检索数据时，它返回一个设置了 PDT 时区的 Date 对象。更准确地说，当我提示 theDate.toString() 时，它给了我： Mon Jul 30 2012 23:51:25 GMT+0200 (CEST) 我注意到原始日期 (2012-07-30 14:51:25 ) 来自 db 已被视为 PDT 并转换为 GMT+2。

脚本时区不相关，设置为 GMT+1...

如何告诉 JDBC 数据库中的日期是 UTC？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:48:39.590

[在Issue 1642](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1642)中进行的一些调试表明这是由于 JDBC 如何与 MySQL 一起工作，并且当前无法在 Apps 脚本中设置修复它所需的连接标志。

为了清楚起见，将 JavaScript 日期转换为字符串时显示的时区将始终是服务器的时区，在本例中为太平洋时间。使用[Utilities.formatDate](https://developers.google.com/apps-script/class_utilities#formatDate)在特定时区显示日期。

# plone - 一个适用于叠加层的 z3c.form 日历小部件？

> ID：11724947
> 
> 赞同：1
> 
> 时间：2012-07-30T15:49:27.747
> 
> 标签：plone

我需要一个用于 z3c.form 的 Date 字段的日历小部件，它适用于覆盖。

我已经测试过了`collective.z3cform.datetimewidget`。它以正常形式工作，但日历小部件不会出现在叠加层内。同样的事情`jyu.z3cform.datepicker`; 它不适用于叠加层。 `collective.z3cform.datepicker`日期格式存在问题，似乎处于开发的早期阶段。

Plone 是否有任何适用于覆盖的日期字段的日历小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:54:54.733

问题是未加载小部件的 JavaScript 支持。在使用小部件的独立页面上，这是半自动处理的——但不是在小部件加载到叠加层时。

只需访问 Zope 管理界面中的 portal_javascripts 工具，并全局启用**plone.app.jquerytools.dateinput.js**支持。您还需要在 portal_css 中启用它的 css。

# php - 我似乎无法弄清楚为什么这个查询给了我错误

> ID：11724948
> 
> 赞同：0
> 
> 时间：2012-07-30T15:49:34.680
> 
> 标签：php, javascript, ajax, jquery

我在 wamp 服务器上试图为我的网站制作一个小张贴系统。

我要发布的 PHP 是：

```
$c=mysql_connect("localhost","root","") or die(mysql_error());
mysql_select_db("postes");
$t = $_POST['title'];
$body = $_POST['body'];
$ts = time();
$query = mysql_query("INSERT INTO `postes`(`title`, `text`, `timestamp`) VALUES (`$t`,`$body`,`$ts`)")  or die(mysql_error()); 
```

然后我使用 Ajax 发送：

```
$(document).ready(function () {
    $('#send').click(function () {
        var n = $('#title').val(),
            e = $('#body').val();
        $.post('post.php', {
            title: n,
            body: e
        }, function (data) {
            alert(data)
        });
    });
}); 
```

无论我在网站的标题字段中输入什么内容，都会出现错误。它说：“'字段列表'中的未知列'{text}'”

我什至没有在 sql 的列部分输入标题，所以我不明白。另外，我是 PHP 和 Mysql 的新手

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:51:29.073

值必须用引号括起来，而不是反引号。反引号用于数据库、表、字段、索引等的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T15:52:14.050

查询

```
INSERT INTO `postes`(`title`, `text`, `timestamp`) VALUES (`$t`,`$body`,`$ts`) 
```

要求您的*posts*表包含名为*title*、*text*和*timestamp*的列。确保这些列存在于表定义中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T15:50:58.300

此错误表示表中不存在该字段`postes`

# jquery-mobile - jQuery mobile中加载页面时如何自动滚动页面

> ID：11724949
> 
> 赞同：0
> 
> 时间：2012-07-30T15:49:39.350
> 
> 标签：jquery-mobile, cordova

我想自动滚动到 my 页面底部的特定 div `[data-role="page"]`，但它不起作用。滚动条仍保留在顶部，但我希望它在页面加载时向下滚动。如果您需要更好的解释，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T17:18:10.053

您可以绑定到`pageshow`事件，然后使用该`$.mobile.silentScroll()`方法将所需元素滚动到视图中。这是一个例子：

```
$(document).delegate('.ui-page', 'pageshow', function () {

    //get the offset of the element
    var offset = $(this).find('[some-element]').offset().top;

    //now scroll to the element
    setTimeout(function () {
        $.mobile.silentScroll(offset);
    }, 0);
}); 
```

这是一个演示：http: [//jsfiddle.net/JNSRn/](http://jsfiddle.net/JNSRn/)

`setTimeout`允许滚动在已排队运行的所有其他内容实际运行之后运行。

您可以将`.ui-page`选择器更改为 ID 或类以仅在特定页面或特定页面集上运行此代码，目前它会在显示任何 jQuery Mobile 伪页面时运行事件处理程序。

文档`$.mobile.silentScroll()`：http: [//jquerymobile.com/demos/1.1.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)（页面底部）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:10:02.123

您可以尝试创建标签并单击它（例如，`anchor`您甚至不需要将其附加到`DOM`

`var a = $('<a />').attr('href', '#myParticularDiv').click();`

# java - StringTokenizer 不在数字末尾显示 0

> ID：11724952
> 
> 赞同：2
> 
> 时间：2012-07-30T15:49:50.963
> 
> 标签：java, stringtokenizer

我正在使用 Java，我正在使用 StringTokenizer 来获取我的 String 的一部分，但问题是当我使用“StringTokenizer”时，我的结果的一部分没有出现这是我的 java 代码：

```
for(String iopp:opp){
                   StringTokenizer tokenizer = new StringTokenizer(iopp,"form:blocConfigurations:configurations:0:parametrage:options:");
                   while(tokenizer.hasMoreTokens()){
                   ind.add(tokenizer.nextToken());

                   }
               }   

               logger.info("Mes indices sont :"+ind); 
```

在我的控制台中：

```
 what was it :[form:blocConfigurations:configurations:0:parametrage:options:1,            form:blocConfigurations:configurations:0:parametrage:options:6, form:blocConfigurations:configurations:0:parametrage:options:9, form:blocConfigurations:configurations:0:parametrage:options:17, form:blocConfigurations:configurations:0:parametrage:options:20, form:blocConfigurations:configurations:0:parametrage:options:21, form:blocConfigurations:configurations:0:parametrage:options:22]
   17:13:45,876 INFO  [com.sfr.price.functionalTest.scenario.impl.AJLINGE.etapeParametrerOption](821) [] Mes indices sont :[1, 6, 9, 17, 2, 21, 22] 
```

StringToknizer 工作得很好，但我不明白为什么在这个元素形式中：blocConfigurations:configurations:0:parametrage:options:20 它只显示 2 而不是 20

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T15:56:09.243

阅读 javadoc: [StringTokenizer](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html#StringTokenizer%28java.lang.String,%20java.lang.String%29)。
中的每个字符`form:blocConfigurations:configurations:0:parametrage:options:`都是分隔符。`0`也是分隔符，因为此字符串包含`0`. `StringTokenizer`不是此任务的正确工具。您可以尝试`String.split`：

```
String[] tokens = iopp.split("form:blocConfigurations:configurations:0:parametrage:options:"); 
```

但要小心，因为`split`将正则表达式作为分隔符。如果您的分隔符字符串中有一些特殊字符，则需要对其进行转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:06:09.337

[new StringTokenizer(str,delim)](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html#StringTokenizer%28java.lang.String,%20java.lang.String%29)中的每个 delim 字符 都被视为单独的分隔符。

您应该考虑使用[String.indexOf(String str, int fromIndex)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String,%20int%29)

# sql - 从一列创建多列

> ID：11724953
> 
> 赞同：2
> 
> 时间：2012-07-30T15:49:52.340
> 
> 标签：sql, sql-server, sql-server-2000

我的数据库结构如下：

```
Number | Month | Country
------------------------
63     | June  | Ireland
48     | June  | England
55     | June  | Spain
66     | May   | Ireland
33     | May   | England
53     | May   | Spain
44     | April | Ireland
44     | April | England
44     | April | Spain 
```

我想使用 SQL 语句从上面的数据中调用它。谁能帮帮我。基本上我想根据与之关联的月份将数字列拆分为多个其他列。我正在使用 sql-server 2000

```
Country | June | May | April
---------------------------
Ireland | 63   | 66  |  44
England | 48   | 33  |  44
Spain   | 55   | 53  |  44 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T15:53:30.907

该过程称为旋转。一种方法：

```
 select  Country
 ,       sum(case when Month = 'June' then Number end) as June
 ,       sum(case when Month = 'May' then Number end) as May
 ,       sum(case when Month = 'April' then Number end) as April
 from    YourTable
 group by
         Country 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T16:32:06.023

试试这个，这里这个查询将给出正确的结果，而不管月数是多少。这意味着不需要将月份名称硬编码为列名。

```
CREATE TABLE tbl1(Number int,Months varchar(10),Country varchar(10))
INSERT INTO tbl1
VALUES(63,'June','Ireland'),
(48,'June','England'),
(55,'June','Spain'),
(66,'May','Ireland'),
(33,'May','England'),
(53,'May','Spain'),
(44,'April','Ireland'),
(44,'April','England'),
(44,'April','Spain')

DECLARE @month_colms varchar(100)
DECLARE @sqlstr varchar(1000)
DECLARE @colname varchar(100)
select @month_colms=STUFF((select ', '+months from (select months from tbl1 group by months) a for xml path('')),1,1,'')
SET @sqlstr=''
While(CHARINDEX(',',@month_colms,1)>0)
BEGIN
SELECT @colname=LEFT(ltrim(rtrim(@month_colms)),CHARINDEX(',',ltrim(rtrim(@month_colms)),1)-1)
SET @month_colms=RIGHT(ltrim(rtrim(@month_colms)),LEN(ltrim(rtrim(@month_colms)))-CHARINDEX(',',ltrim(rtrim(@month_colms)),1))
SET @sqlstr=@sqlstr+','+'sum(case when Months = '''+@colname+''' then Number end) as '''+@colname+''''
END

SET @sqlstr=@sqlstr+','+'sum(case when Months = '''+ltrim(rtrim(@month_colms))+''' then Number end) as '''+@month_colms+''''

exec('select  Country'+@sqlstr+' from tbl1 group by Country') 
```

# python - 如何分隔每个列表

> ID：11724954
> 
> 赞同：-1
> 
> 时间：2012-07-30T15:49:55.090
> 
> 标签：python, python-2.7

我对此很陌生，我不知道如何解决这个问题。我有一个庄家，然后它在开始时询问有多少玩家将玩。然后每个玩家和经销商从一副牌中获得 2 张牌。问题是，例如，如果我有 3 个玩家，则代码还会列出下一个玩家的前 2 张牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:58:13.700

您可能需要每个玩家的列表。字典可能会完成这项工作，例如：

```
hands = {}
...
for player in players:
    hand = hands[player] = []
    for j in range(2):
         c = deck.pop()
         hand.append(c)

for player in players:
    print('{}: {}'.format(player, ', '.join(hands[player]))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:45:54.157

```
import random

class Cards(object):
    suit  = ['H', 'D', 'S', 'C']
    value = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A']

    def __init__(self):
        self.deck = [v+s for s in Cards.suit for v in Cards.value]

    def shuffle(self):
        random.shuffle(self.deck)

    def deal(self, n):
        res, self.deck = self.deck[:n], self.deck[n:]
        return res

show_hand = ' '.join

def main():
    num_players = 3
    deck = Cards()
    deck.shuffle()

    dealer  = deck.deal(2)
    players = [deck.deal(2) for i in xrange(num_players)]

    print('Hands:')
    print('  Dealer: {}'.format(show_hand(dealer)))
    for i in xrange(num_players):
        print('Player {}: {}'.format(i+1, show_hand(players[i])))

if __name__=="__main__":
    main() 
```

结果是

```
Hands:
  Dealer: JH 9H
Player 1: AS 2D
Player 2: QD 8H
Player 3: 10H 6D 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T15:57:18.250

您需要为每个玩家重置手牌。所以你的第二个循环应该看起来更像：

```
for i in range(players):
   hand = []
   for j in range(2):
      c = deck.pop()
      hand.append(c)
   print "Player " + str(i+1) + ":"
   print "Cards: " + cards.hand_display(cards) 
```

否则`hand`会继续追加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T15:59:25.663

你的手是一个数组，所以你只是将新牌附加到同一个数组中，每次打印手牌时，你都在打印同一个数组，只是起初只有 2 张牌，然后是 4 张，然后是 6 张。

您应该做的是使用字典或数组数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T17:32:11.640

您的代码（现在已被删除）的问题是您将每个玩家的手牌附加到同一个列表中。简单的解决方法是在循环顶部重置变量。

由于您可能需要在玩游戏时跟踪所有手牌，因此创建一个单独的列表列表是有意义的，其中包含庄家手牌的一个子列表，以及每个玩家的一个单独的子列表。这些可以存储在列表列表中，并根据需要进行索引。

您正在调用玩家：玩家 1、玩家 2 等，实际上是从 1 开始编号，因此可以将庄家的手牌存储在索引 0 中，并将玩家 1 的牌放在手牌 [玩家+1] 中，并且很快。这是一些示例代码：

```
#### testing scaffold #######################
import random

class Cards(object):
    def __init__(self):
        deck = self._deck = []
        for rank in "A23456789JQK":
            for suit in "CDHS":
                deck.append(rank+suit)

    def deck(self):
        return self._deck

    def hand_display(self, player_num):
        return ' '.join(hands[player_num])

cards = Cards()
players = 3
##########################################

deck = cards.deck()
random.shuffle(deck)
hands = [[]]  # for dealer's hand
hands.extend([] for player in range(players))  # for each player's hand
DEALER = 0
CARDS_PER_HAND = 2

print "Hands:"
for i in xrange (CARDS_PER_HAND):
    cd = deck.pop()
    hands[DEALER].append(cd)
print "Dealer: " + cards.hand_display(DEALER)

for player_num in [player+1 for player in range(players)]:
    for j in xrange(CARDS_PER_HAND):
        c = deck.pop()
        hands[player_num].append(c)
    print "Player " + str(player_num) + ":"
    print "Cards: " + cards.hand_display(player_num) 
```

输出：

```
Hands:
Dealer: 6H 5H
Player 1:
Cards: 7H 3H
Player 2:
Cards: 4D JD
Player 3:
Cards: 3S 4S 
```

# text - 查询默认存在于高维空间中的文本分类数据

> ID：11724956
> 
> 赞同：1
> 
> 时间：2012-07-30T15:50:00.767
> 
> 标签：text, machine-learning, svm

我读过很多支持向量机的书籍和技术论文，这是许多作者为大多数文本分类任务选择线性核而做出的假设。

他们说，由于文本分类问题中的数据已经存在于高维空间中，因此在尝试使用 SVM 对数据进行分类时，选择一个线性内核来分离数据就足够了。

我对这个假设的理解如下：

在任何文本分类任务中，为分类任务选择的特征数量（在许多情况下是我们在文档中寻找的某些重要词）大多会非常高，这就是驻留在一个高维空间。

我对假设的理解准确吗？如果不是，我希望有人尝试阐明这个假设。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:17:42.723

据我了解，您是正确的。

*   每个特征对应一个维度。
*   更高的维度 => 更高的分离概率。
*   非线性内核仅将数据（非线性）转换为更高的维度以增加分离的概率，因此在具有许多特征的情况下不需要。

我可以推荐阅读有关 SVM 和类似内容的讲座：[http](http://www.csc.kth.se/utbildning/kth/kurser/DD2427/bik12/Schedule.php) ://www.csc.kth.se/utbildning/kth/kurser/DD2427/bik12/Schedule.php 这是我在该主题中所知道的最好的资源。简明扼要。

# vb6 - 是否有用于帮助管理 if/else 和循环语句的 Visual Basic 6 插件？

> ID：11724957
> 
> 赞同：3
> 
> 时间：2012-07-30T15:50:04.657
> 
> 标签：vb6, add-in

Visual Studio 具有代码折叠功能，并且至少具有代码帮助，使您能够通过指示它们的开始和结束位置来保持 if/else 语句和循环的顺序。Visual Basic 6 有类似的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T19:40:40.420

如果您有 249 美元，请查看[CodeSMART](http://www.axtools.com/products-codesmart-vb6.php#T4)：

> 2.1。支线
> 
> 绘制分支线以强调控制语句分支，即在每个控制语句的开始部分和结束部分之间绘制的线；在可视化代码嵌套方面非常有用。

![支线预览](../Images/6fff9e1920e0f54d3296002b08d6d9c3.png)

# android - Flurry 设备方向分析，Android

> ID：11724958
> 
> 赞同：0
> 
> 时间：2012-07-30T15:50:09.910
> 
> 标签：android, analytics, flurry, activity-lifecycle

我正在尝试查找有关我的应用程序中的设备方向是否由于活动生命周期中发生的会话日志而导致分析偏斜的信息。

Flurry 中的会话似乎随着活动的开始和结束而开始和结束，并且设备方向有效地导致新的活动生命周期开始，我是否为此收到两组数据？

如果是这样，处理设备方向的正确方法是什么，以便当用户旋转设备时我不会收到倾斜的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T01:05:11.950

如果先前的呼叫发生在十秒前，则呼叫`onStartSession`将仅启动新会话。`onEndSession`（十秒是默认值，请参阅[`setContinueSessionMillis`](http://support.flurry.com/sdkdocs/android/classcom_1_1flurry_1_1android_1_1_flurry_agent.html#acfaeba82634cedacbc386623b6502646)）

因此，如果您`onStartSession`从每一个调用`Activity.onStart`，您的会话数据将不会因方向变化而膨胀，因为这些 Activity 生命周期方法将比相隔十秒快得多。您的会话数据也不会因用户从 FooActivity 移动到 BarActivity 而膨胀，因为这些转换也短于十秒。`onEndSession``Activity.onStop`

相反，如果用户启动您的应用程序并从 FooActivity 转到 BarActivity，然后离开您的应用程序，当他们返回 BarActivity 时`onStart`将调用`FlurryAgent.onStartSession`，并且如果他们离开的时间超过 10 秒，则将启动一个新会话。这通常是开发人员想要跟踪的。

（免责声明：我在 Flurry 开发 Android SDK）

# javascript - activeElement 相对于父级的子级编号

> ID：11724959
> 
> 赞同：1
> 
> 时间：2012-07-30T15:50:10.803
> 
> 标签：javascript

vanilla JS（即不是 JQuery 等）中是否有一个函数来确定`activeElement`的子编号？

我目前正在使用此代码，但我更喜欢使用`selCell = document.activeElement.childNumber;`（例如）而不是循环通过父级：

```
for(var j = 0; cell = document.activeElement.parentNode.cells[j]; j++)
    if(cell == document.activeElement)
        selCell = j; 
```

如果需要任何说明（例如 HTML 上下文），请尽管询问！

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:52:08.437

表格单元格保留自己的索引...

```
selCell = document.activeElement.cellIndex; 
```

* * *

对于其他元素类型，一个常见的解决方案是从当前元素开始，遍历之前的兄弟元素，每次遇到一个元素时递增一个计数器。

```
var i = 0;

while(elem = elem.previousSibling)
    if (elem.nodeType === 1)
        i++; 
```

# javascript - jQuery 悬停显示 div 切换

> ID：11724962
> 
> 赞同：0
> 
> 时间：2012-07-30T15:50:24.033
> 
> 标签：javascript, jquery, html, hover, toggle

我正在这个非常简单的网站上工作，但是自从我摆弄 jQuery 以来已经有一段时间了，我认为我在这里做错了。

在这里您可以使用 jsFiddle [http://jsfiddle.net/rGb34/1/预览这个想法](http://jsfiddle.net/rGb34/1/)

jQuery 存在一些问题。

1.  如果您将鼠标悬停在黄色按钮上，黄色内容开始切换。
2.  如果您将鼠标悬停在按钮上然后将其退回，则 div 会消失（由于切换功能），但我希望即使没有悬停也能激活最后一个 div。

有没有人给我一个好的提示，所以我可以完成这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:04:58.477

首先：不要将相同的 id 名称与另一个标签一起使用。在您的示例中，它是 id="slider" 。

[这是 jsFiddle 玩（我也编辑了你的 html 和 css）](http://jsfiddle.net/rGb34/18/)

你可以用这种方式做到这一点，更可靠：

jQuery：

```
jQuery(document).ready(function() {

    $('.greenC, .blueC, .orangeC').hide();

    $('.nav li').hover(function() {
        var takeClass = $(this).attr('class');
       // takes class hovered element. example: '.yellow'

        $('.slider').hide();
        $('.'+ takeClass + 'C').show();// shows the element '.yellowC'
    });

});​ 
```

你的html应该是这样的：

```
<div class="yellowC slider">...</div>
<div class="greenC slider">...</div>
<div class="blueC slider">...</div>
<div class="orangeC slider">...</div>

<div class="wrap">
  <ul class="nav">
     <li class="yellow"><a href="./" class="y_button">Fiducairy services</a></li>
     <li class="green"><a href="./" class="g_button">Licensing</a></li>
     <li class="blue"><a href="./" class="b_button">Payment processing</a></li>
     <li class="orange"><a href="./" class="o_button">E-zone colocation</a></li>
   </ul>
</div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:59:06.870

$('.green, .blue, .orange, .yellow').hide(); 如果你也隐藏黄色，它对我来说很好......这是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:16:05.163

如果您希望第一个`div`在加载时正确显示，您必须更具体地了解您的`.yellow`事件处理程序

```
$('.y_active, .yellow').hover(
function() {
    $('.yellow').show();
    $('.green').hide();
    $('.blue').hide();
    $('.orange').hide();
}, function() {
    $('.yellow').hide();
}); 
```

[**演示**](http://jsfiddle.net/Br8gV/)

# c - tcp 原始程序中的 PCAP 函数。

> ID：11724966
> 
> 赞同：1
> 
> 时间：2012-07-30T15:50:41.380
> 
> 标签：c, pointers, tcp, network-programming, pcap

我遇到了一些无法正确编译的函数的问题。它们几乎是从一个示例程序中借来的，以便更好地了解网络编程的工作原理，并看看我是否可以使用 RAW 套接字建立一个可靠的 TCP 连接（3 次握手）。这些是功能：

```
void recieve(u_char *args, const struct pcap_pkthdr *pkthdr, const u_char *buffer)

{

const int one = 1;

u_char *ptr;

int LEN = args;   /* FIRST WARNING POINTS HERE */

struct ipheader *ip;

struct tcpheader *tcp;

ip = (struct ipheader *)(buffer + LEN);

tcp = (struct tcpheader *)(buffer + LEN + sizeof (struct ipheader));

printf("%d\n", LEN);

printf("Packet recieved. ACK number: %d\n", ntohl (tcp->tcph_seqnum));

printf("Packet recieved. SEQ number: %d\n", nthol (tcp->tcph_acknum));

s_seq = nthol (tcp->tcph_seqnum);

send_syn_ack(s_seq, dip, sip, dport, sport);    

sleep(100);

} 
```

和

```
void capture()

{

pcap_t *pd;

bpf_u_int32 netmask;

bpf_u_int32 localnet;

char *filter = ("ip dest host %s", dstip);   /* SECOND WARNING POINTS HERE */   

char *dev = NULL;

char errbuf[PCAP_ERRBUF_SIZE];

struct bpf_program filterprog;

int dl = 0, dl_len = 0;

if ((pd = pcap_open_live(dev, 1514, 1, 500, errbuf)) == NULL)       
    {           

        fprintf(stderr, "cannot open device %s: %s\n", dev, errbuf);

        exit(1);

    }

pcap_lookupnet(dev, &localnet, &netmask, errbuf);

pcap_compile(pd, &filterprog, filter, 0, localnet);

if (pcap_setfilter(pd, &filterprog) == - 1)

    {

        fprintf(stderr, "cannot set pcap filter %s: %s\n", filter, errbuf);

        exit(1);

    }

pcap_freecode(&filterprog);

dl = pcap_datalink(pd);

switch(dl) {

    case 1:

        dl_len = 14;

        break;

    default:

        dl_len = 14;

        break;

}       

if (pcap_loop(pd, -1, recieve, (u_char *)dl_len) < 0) { /* LAST WARNING HERE */

    fprintf(stderr, "cannot get raw packet: %s\n", pcap_geterr(pd));

    exit(1);

}

} 
```

这些是错误消息：

```
In function ‘recieve’:
warning: initialization makes integer from pointer without a cast
In function ‘capture’:
warning: initialization makes pointer from integer without a cast
Warning: cast to pointer from integer of different size 
```

即使在示例程序中，我也会收到第一个和最后一个警告。这两个功能有什么好处吗？是否有更简单、更清洁的方法来实现它们的目的？如果没有，我应该怎么做才能摆脱这些警告？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:40:23.420

u_char 不是标准类型。等效的是 uint8_t，它是 C99 标准的一部分。或多或少第一个错误请尝试，

int LEN = *args

uint8_t 在库 stdint.h 中定义

在第二个错误位置，执行以下操作，

`char *s = "ip 目标主机";

```
char *filter = (char *)malloc(strlen(s) + strlen(dstip) + 1);
strcpy(filter,s);
strcat(filter,dstip);' 
```

请包括字符串函数 strlen、strcpy 和 strcat。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T17:58:01.477

好吧，警告是正确的 - 在 中`recieve()`，第一个参数是`u_char *args`，并且在您标记的行中，您正试图分配`args`给`int LEN`; `args`is not an `int`，并且您没有明确要求将其转换为 an `int`，因此编译器会发出警告。

对于第二个，我不确定是什么类型`dstip`，因为声明/定义不包含在您发布的代码中，但如果它不是 a `char *`，那将解释第二条消息。

对于第三个，我必须知道`pcap_loop()`期望什么代替`u_char *`你通过它，但这也可能是不匹配的。

# php - 使用 php 编辑图像

> ID：11724969
> 
> 赞同：-2
> 
> 时间：2012-07-30T15:50:55.203
> 
> 标签：php

我正在使用 php，我想要一个帮助用户使用 php 剪切图像的工具。当用户上传图像时，它会被保存（例如 image1.png）。我想知道是否有一个功能可以让我这样做。例如，如果我想剪切宽度和高度为 200 像素的 image1.png 并使其宽度为 100 像素，我该怎么办？

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:02:06.173

```
function setImage($image)
{

//Your Image
$this->imgSrc = $image; 

//create image from the jpeg
this->myImage = imagecreatefromjpeg($this->imgSrc) or die("Error: Cannot find image!"); 

$this->cropWidth   = 100; 
$this->cropHeight  = 200; 

//getting the top left coordinate
$this->x = 0;
$this->y = 0;          
}  

function createThumb()
{

$this->thumb = imagecreatetruecolor(100, 200); 

imagecopyresampled($this->thumb, $this->myImage, 0, 0,$this->x, $this->y, 100, 200, $this->100, $this->200); 

}  

function renderImage()
{

header('Content-type: image/jpeg');
imagejpeg($this->thumb);
imagedestroy($this->thumb); 

}  

$image = new cropImage;
$image->setImage($src);
$image->createThumb();
$image->renderImage(); 
```

取自[http://www.talkphp.com/advanced-php-programming/1709-cropping-images-using-php.html](http://www.talkphp.com/advanced-php-programming/1709-cropping-images-using-php.html)

编辑以满足您的特定需求。访问链接以获得 PHP 裁剪的全面概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:53:34.160

是的，有可能，使用 php [GD](http://php.net/manual/en/book.image.php)库，确保它已安装在您的服务器上。

例如，请参阅 [imagecopyresampled](http://php.net/manual/en/function.imagecopyresampled.php) 与 [imagecreatetruecolor](http://www.php.net/manual/en/function.imagecreatetruecolor.php)函数相结合

# makefile - 在 CMake 中包含外部 makefile

> ID：11724980
> 
> 赞同：11
> 
> 时间：2012-07-30T15:51:12.287
> 
> 标签：makefile, cmake

我想在我自己的软件的 makefile 中包含来自外部库的 makefile。最简单的方法是找出 Makefile 等价物的 CMake 代码`include ${dir}/makefile`。

但也许我应该提供一些背景信息。我正在尝试将 PETSc（和 SLEPc）集成到我的代码中。以下是使用 SLEPc 的示例中的一些代码（尽管 PETSc 几乎相同）：

```
hello: hello.o chkopts
        -${CLINKER} -o hello hello.o ${SLEPC_LIB}
        ${RM} hello.o

include ${SLEPC_DIR}/conf/slepc_common 
```

如您所见，它需要包含一个特定的 makefile，其中包含一堆其他的 makefile。这有点奇怪，因为似乎只有一个包含目录会更简单，但显然它比我理解的要多。无论如何，我的第一个解决方案是简单地包含它想要的生成文件，看看它是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T05:50:30.867

I believe this requirement **doesn't fit CMake's design model** at all as the Makefiles were generated during the **generation phase** and one of CMake's core principle is to make it **cross platform**, so the better idea might be:

1.  Rewrite the external build system in CMake scripts
2.  Include the CMake scripts in your project

If the effort is huge, you can try with **add_custom_target/add_custom_command** to do some out of box commands to tweak generated files, but those would also import considerable efforts - just read the manual and seek more opportunities.

# javascript - 似乎无法使用 JavaScript/jQuery 更改 h:outputText “值”，甚至是值表达式

> ID：11724987
> 
> 赞同：0
> 
> 时间：2012-07-30T15:51:29.947
> 
> 标签：javascript, jquery, jsf, jstl

所以这是我的问题。我正在尝试获取来自后端的值并删除值中不需要的文本。所以基本上我得到了一种颜色，颜色名称的末尾有一两个星号。我将该值发送到 JavaScript 函数并删除字符串中可能存在的所有星号。到目前为止，这对我来说一直很好。我发现另一个发生这种情况的位置，当我尝试做同样的事情时，它不起作用。字符串带有星号，我删除它们并用新字符串替换 html 并在短时间内工作，然后原始字符串又回来了。

所以，这里有更多的细节。在我正在开发的应用程序中，有一个链接，单击该链接会打开一个 Richfaces 模式窗口。然后，有一个表格，其中包含来自网站的各种报价。每行末尾都有一个“查看”链接，用于查看报价的详细信息。单击该按钮后，它会打开另一个模式，其中包含一个表格，其中包含客户希望引用的每种产品、颜色、尺寸和其他信息。在“查看”链接代码中有一个 onclick，这是我放置函数调用的地方。

```
<a4j:commandLink ajaxSingle="true" action="# editRequestedQuoteController.viewRequestedQuote}"
    reRender="mainRequestedQuotePanel,subpanel,btnPanel,messagPanelView"
    onclick="#{rich:component('viewRequestedQuotePanel')}.show(); changeColorName()">
    <span>View</span>
    <f:param name="orderId" value="#{order.id}"/>
</a4j:commandLink> 
```

调用 changeColorName() 函数并运行以下代码：

```
function changeColorName() {
    jQuery(".managedorder-color-name").each(function(){
        var existingColor = jQuery(this).text();
        var newColor = existingColor.replace(/\*/g, '');
        jQuery(this).text(newColor.trim(newColor));
    });
} 
```

代码 newColor.trim(newColor) 只是从字符串中删除前导/尾随空格。

这是正在呈现字符串的代码：

```
<c:forEach var="orderItem" items="#{editRequestedQuoteBean.orderItems}" varStatus="status" >
    ...
    <td rowspan="#{orderItem.logo.logoName != null ? '4' : '2'}">
        <h:outputText styleClass="managedorder-color-name" value="#{orderItem.itemColor.swatchcolor}" />
    </td>
    ...
</c:forEach> 
```

当我使用 FireBug 调试它时，我可以浏览代码并查看它的执行情况，因此我知道它正在被调用。但是我应该在这里指出，有时在第一次运行时，代码似乎没有执行，但如果我第二次单击“veiw”链接，它就会执行。当我越过最后一行时，我可以看到文本被我发送的字符串替换，但是如果我“继续”（F8），字符串会回到我开始使用的版本，即带有星号的版本。有谁知道为什么会发生这种情况？任何人，请让我知道这是否不清楚或您需要更多信息。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T17:07:18.917

ajax 渲染会覆盖这些更改。在ajax 请求*之前*`onclick`执行。但是当 ajax 请求完成时，HTML DOM 树会用来自服务器端的新元素进行更改。需要在ajax渲染*后*执行JS函数。您可以为此使用该属性。*`changeColorName()`*`oncomplete`**

 **```
<a4j:commandLink ... oncomplete="changeColorName()" /> 
```**

# mysql - 随机“在‘读取初始通信数据包’时丢失与 MySQL 服务器的连接，系统错误：110”

> ID：11724988
> 
> 赞同：1
> 
> 时间：2012-07-30T15:51:31.257
> 
> 标签：mysql, database-connection, remote-access, packet-loss

我有一个远程连接到数据库的网站，这种情况已经持续了一年多，我没有遇到任何问题。

但是，今天浏览网站时，我注意到 mysql 连接似乎超时了。有时页面加载得非常好，但有时它会生成以下警告。

```
Warning: mysql_connect() [function.mysql-connect]: Lost connection to MySQL server at    'reading initial communication packet', system error: 110 in xxx/mysql_info.php on line 7
Lost connection to MySQL server at 'reading initial communication packet', system error: 110 - It seems we are having a slight technical issue, please check back soon. 
```

由于它的零星性质，我有点不知所措。我可以控制数据库服务器和托管服务器，我没有更改任何设置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T16:00:54.277

看起来错误 #110 是连接超时。这可能是与 DNS 或路由相关的问题，或者您的数据库服务器可能存在一些间歇性问题。我会尽快对数据库进行备份，然后查看 fsck 以查看磁盘是否正常，并进行一些 ping 和网络测试以查看它是否可以从您的 Web 服务器访问。

# javascript - 重新加载页面并从 URL 执行脚本

> ID：11724990
> 
> 赞同：0
> 
> 时间：2012-07-30T15:51:43.153
> 
> 标签：javascript, google-chrome, search, refresh

这是我到目前为止所得到的：

```
var x = document.getElementsByName("treeframe")[0].contentDocument.getElementsByTagName("a");
for(var idx = 0; idx < x.length; idx++){
    var link = x[idx].href;
    if ( link.indexOf("STRING_TO_SEARCH") != -1){
        alert("found!!!");
    } else {
        window.setTimeout("location.reload(true);",10000);
    }
} 
```

问题是，在找不到时重新加载后，它不会重新执行脚本。

注意：*getElementsByName 是必需的，因为我需要在页面内的框架中搜索，但不能仅访问 iframe*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T19:02:48.457

所以你说的是书签？或者你在框架集中有这个东西吗？如果它在框架集中，并且您控制框架集，那么您应该能够将事件侦听器附加到您正在重新加载的元素。否则，您可能可以使用 setTimeout 或 setInterval 进行某种形式的轮询，以检查帧的内容是否可访问。

# asp.net - 是否可以在 mvc 中使用 $.post 和 RedirectToAction

> ID：11724992
> 
> 赞同：0
> 
> 时间：2012-07-30T15:51:45.593
> 
> 标签：asp.net, asp.net-mvc

我是 asp.net 的新手，我使用 $.post（Jquery 语法）将我的所有数据发布到服务器。

在完成动作方法执行后，控制器的动作被执行@结束我将 RedirectToAction 调用到不同的动作方法。

Eecution 到达 $.Post() 的完成回调事件，其中我将 html 中的请求结果加载到页面的根元素。$(html).html(结果)。

我如何将 $.post 与 RedirectToAction 一起使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:54:33.200

替换整个页面时使用 AJAX 有什么意义？AJAX 的全部意义在于只刷新 DOM 的特定部分。如果您要刷新整个页面，则只需使用标准链接，无需 AJAX。但是，如果我们假设您的控制器操作处理 2 种情况：一种是返回局部视图，另一种是重定向，您可以将目标 url 作为 JSON 传递：

```
[HttpPost]
public ActionResult SomeAction()
{
    if (Something)
    {
        return PartialView();
    }

    return Json(new { redirectTo = Url.Action("Foo", "Bar") });
} 
```

然后在客户端：

```
$.post('@Url.Action("SomeAction")', function(result) {
    if (result.redirectTo) {
        // the controller action passed us the url to redirect to
        window.location.href = result.redirectTo;
    } else {
        // the controller action passed us a partial result => 
        // let's update some portion of the DOM
        $('#someId').html(result);
    }
}); 
```

# android - 我无法从我的 Android 模拟器中删除日文 IME

> ID：11724993
> 
> 赞同：8
> 
> 时间：2012-07-30T15:51:50.040
> 
> 标签：android, keyboard, locale

我已经多次看到这个问题，但答案总是“从‘语言和键盘设置’菜单中取消选中 IME。问题是那里没有复选框。

菜单 - 自定义区域设置 - en_US 已选择。

菜单 - 设置 - 语言和键盘 - 选择语言 - 选择“英语（美国）”。

菜单 - 设置 - 语言和键盘 - 日文 IME 是唯一的 IME，并且没有复选框可以将其删除。

我还将光标放入编辑视图并尝试弄乱键入时可见的键盘选项。我怎么才能让英语出现？在不幸的重新安装之前，这曾经可以正常工作。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-01T13:18:49.643

长按文本字段 > 输入法 > Android 键盘

# vb.net - 调整图片框大小以匹配图像大小

> ID：11724995
> 
> 赞同：0
> 
> 时间：2012-07-30T15:51:51.927
> 
> 标签：vb.net, vb.net-2010

如果图像尺寸小于显示器尺寸，如何调整图片框的大小以便它可以显示完整的图像！我写了一个无法调整大小*的代码（但仍然发布代码）*！

单击按钮加载图像之前的代码

```
Dim bmp As Bitmap
bmp = New Bitmap(path)
If bmp.Width < picBox.Image.Width Then picBox.Width = bmp.Width : If bmp.Height < picBox.Image.Height Then picBox.Height = bmp.Height
picBox.Invalidate() : picBox.Refresh()
'picBox.SetBounds(x,y,width,height) 
```

该代码不会调整图片框的大小，它只是未触及！

# 编辑

该表单只有 picBox 和一个 groupbox [dock enabled] 控件。

```
bmp = New Bitmap(dlgOpen.FileName)
picBox.SizeMode = PictureBoxSizeMode.Normal
Dim w As Integer = picBox.ClientSize.Width
Dim h As Integer = picBox.ClientSize.Height
If bmp.Width > w Then
            w = bmp.Width
End If
If bmp.Height > h Then
            h = bmp.Height
End If
If w > Me.Width - grpBox.Width Then
            w = Me.Width - grpBox.Width
End If
If h > grpBox.Height Then
            h = grpBox.Height
End If
picBox.ClientSize = New Size(w, h)
picBox.ImageLocation = dlgOpen.FileName 
```

*此代码也不会重新调整图片框的大小*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:59:36.647

在 .NET 中，`Public Enumeration PictureBoxSizeMode`您可以更改 PictureBox 处理不同大小图像的方式：

*   普通的
*   拉伸图像
*   自动尺寸
*   中心图像
*   飞涨

`.SizeMode`您可以通过该属性为当前的 PictureBox 设置它。`AutoSize`可能是您正在寻找的。如果它大于窗口或框架，则必须在`PictureBox.Resize`事件中处理此问题以调整窗口大小或重新缩放图像。

所以，它可能是这样的：

```
Dim bmp As Bitmap
bmp = New Bitmap(path)
picBox.SizeMode = PictureBoxSizeMode.AutoResize
picBox.Image = bmp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T16:10:25.933

```
Dim bmp As New Bitmap(path)
PictureBox1.SizeMode = PictureBoxSizeMode.Normal
Dim w As Integer = PictureBox1.ClientSize.Width
Dim h As Integer = PictureBox1.ClientSize.Height
If bmp.Width > w Then
    w = bmp.Width
End If
If bmp.Height > h Then
    h = bmp.Height
End If
If w > maxWidth Then
    w = maxWidth
End If
If h > maxHeight Then
    h = maxHeight
End If
PictureBox1.ClientSize = New Size(w, h)
PictureBox1.Image = bmp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:44:19.550

图片框只能**在加载图像之前**调整大小，之后它是只读的并且没有效果！

# asp.net - 在 .NET C# .aspx 页面中是否可以包含基于参数的文件？

> ID：11724999
> 
> 赞同：-1
> 
> 时间：2012-07-30T15:51:57.980
> 
> 标签：asp.net

我试过

```
<!--#include virtual="<%= incFile %>" --> 
```

没有运气。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:01:25.203

对于客户端代码（html、javascript 等），请检查[如何在 ASP.NET 中动态包含文件](http://support.microsoft.com/kb/306575)。

如果您谈论的是服务器端可执行代码，我建议您利用[面向对象编程](http://www.codeproject.com/Articles/219869/Object-Oriented-Programming-in-Csharp-NET)和/或[用户控件 (.ascx)](http://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx)