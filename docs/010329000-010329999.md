# StackOverflow 问答 10329000-10329999

# algorithm - 最短路径，最少转弯算法

> ID：10329005
> 
> 赞同：1
> 
> 时间：2012-04-26T07:29:31.313
> 
> 标签：algorithm, shortest-path

有一个*带有障碍物*的方形网格。在那个网格上，一个类有两个成员`Person`。他们面向某个方向（上、右、左或下）。每个人都有一定的能量。使人转动或移动会消耗能量（转动消耗 1 个能量单位，移动消耗 5 个能量单位）。

我的目标是让它们尽可能靠近彼此移动（表示为曼哈顿距离），尽可能消耗最少的能量。请记住，网格上有障碍物。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:02:22.547

我会做出假设并稍后删除它们。

假设网格小于 1000x1000 并且您不能耗尽能量..：

假设他们不能互相到达：对于 Person1,Person2，找到他们各自的可达点集 R1,R2。

（以广度优先搜索为例）

按 x 值对 R1 和 R2 进行排序。

现在通过 R1 和 R2 找到最接近的点对。提示：我们对这两个数组进行了排序，这样我们就可以知道点的 x 坐标何时接近。我们在 x 坐标上的距离永远不必比当前找到的最小值更远。

假设他们可以互相到达：从 person1 使用 BFS，直到找到 person2 并记录路径

如果使用 BFS 找到的路径不需要转弯，那么这就是解决方案，

否则：

**创建网格的 4 个副本（称它们为右网格、左网格、上网格、下网格）。**

规则是，如果您向左移动，您只能在左侧网格中，如果您向右移动，您只能在右侧网格中，等等。要转弯，您必须从一个网格移动到另一个网格（使用能量）。

创建此结构，然后使用 BFS。

例子：

现在左侧网格假设您正在向左移动，因此从左侧网格创建一个图形，其中每个点都连接到其左侧的点，并带有向前移动的能量。

在左网格中唯一的其他选择是移动到上网格或下网格（使用1能量），因此连接上网格和左网格等的相应网格点。

现在您已经构建了图表，只需再次使用广度优先搜索。

我建议你使用 pythons NetworkX，它只有大约 20 行代码。

如果路上有障碍物，请确保不要连接方块。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:48:52.443

我会使用广度优先搜索并计算到达每个方格的最小能量值。当玩家相遇或没有更多能量时，它将终止。

# c# - C#：如何根据最大高度按比例调整图像大小

> ID：10329010
> 
> 赞同：4
> 
> 时间：2012-04-26T07:29:38.810
> 
> 标签：c#, asp.net, image-resizing, aspect-ratio

我需要在不改变纵横比的情况下按比例调整图像大小。我有代码可以用固定的高度和宽度调整大小，但我需要用最大高度（比如 600 像素）按比例调整图像大小。如何修改代码以满足我的要求？

```
public static void Main()
{
  var image = Image.FromFile(@"c:\logo.png");
  var newImage = ScaleImage(image, 300, 400);
  newImage.Save(@"c:\test.png", ImageFormat.Png);
}

public static Image ScaleImage(Image image, int maxWidth, int maxHeight)
 {
  var ratioX = (double)maxWidth / image.Width;
  var ratioY = (double)maxHeight / image.Height;
  var ratio = Math.Min(ratioX, ratioY);

  var newWidth = (int)(image.Width * ratio);
  var newHeight = (int)(image.Height * ratio);

  var newImage = new Bitmap(newWidth, newHeight);
  Graphics.FromImage(newImage).DrawImage(image, 0, 0, newWidth, newHeight);
  return newImage;
} 
```

请提供您宝贵的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T07:48:05.697

这几乎感觉很容易，我觉得我错过了一些东西。无论如何，这不会奏效吗？

```
public static Image ScaleImage(Image image, int maxHeight) 
{ 
    var ratio = (double)maxHeight / image.Height; 

    var newWidth = (int)(image.Width * ratio); 
    var newHeight = (int)(image.Height * ratio); 

    var newImage = new Bitmap(newWidth, newHeight); 
    using (var g = Graphics.FromImage(newImage))
    {
        g.DrawImage(image, 0, 0, newWidth, newHeight); 
    }
    return newImage; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:42:35.723

使用以下功能

```
public Bitmap ProportionallyResizeBitmapByHeight(Bitmap imgToResize, int height)
{
  int sourceWidth = imgToResize.Width;
  int sourceHeight = imgToResize.Height;

  float scale = 0;

  scale = (height / (float)sourceHeight);

  int destWidth = (int)(sourceWidth * scale);
  int destHeight = (int)(sourceHeight * scale);

  Bitmap result = new Bitmap(destWidth, destHeight);
  result.SetResolution(imgToResize.HorizontalResolution, imgToResize.VerticalResolution);
  Graphics g = Graphics.FromImage(result);
  g.DrawImage(imgToResize, 0, 0, destWidth, destHeight);
  g.Dispose();

  return result;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T07:48:13.897

好吧，仔细考虑一下这个过程：如果你有一个 800 x 600 大小的图像，并且想要将其调整为 newWidth x 400 高度（加上相应的 newWidth），你可以通过除以 newHeight（你的case) 用 600 乘以 800 这个比率，对吗？

因此，在这种情况下，您需要将 maxWidth 和 maxHeight 更改为可选参数（例如 800 x 600），以赋予自己一些活力并获得以下信息：

```
public static Image ScaleImage(Image image, int maxWidth = 800, int maxHeight = 600)
 {

  int newWidth;
  int newHeight;
  double ratio = image.Height / image.Width;

  if(maxHeight != 600) {

     newWidth = image.Width * ratio;
     newHeight = maxHeight;

  }   

  Bitmap newImage = new Bitmap(newWidth, newHeight);
  Graphics.FromImage(newImage).DrawImage(image, 0, 0, newWidth, newHeight);
  return newImage;
} 
```

我希望这有帮助。我没有测试它，但我已经重写了我的VB代码，所以据称它应该没问题......

这里还有一个 ResizeStream 方法：[http](http://forums.asp.net/t/1576697.aspx/1) ://forums.asp.net/t/1576697.aspx/1 ，您可能会发现它很有用。如果要保持图像质量，可以使用 CompositingQuality 和 SmoothingMode 等变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-05T14:02:12.217

100% 工作

```
 private static BitmapFrame CreateResizedImage(ImageSource source, int Max_width, int Max_height, int margin)
{
    float scaleHeight = (float)Max_width / (float)source.Height;
    float scaleWidth = (float)Max_height / (float)source.Width;
    float scale = Math.Min(scaleHeight, scaleWidth);

     int width = (int)(source.Width * scale);
     int height = (int)(source.Height * scale);

    var rect = new Rect(margin, margin, width - margin * 2, height - margin * 2);

    var group = new DrawingGroup();
    RenderOptions.SetBitmapScalingMode(group, BitmapScalingMode.HighQuality);
    group.Children.Add(new ImageDrawing(source, rect));

    var drawingVisual = new DrawingVisual();
    using (var drawingContext = drawingVisual.RenderOpen())
        drawingContext.DrawDrawing(group);

    var resizedImage = new RenderTargetBitmap(
        width, height,         // Resized dimensions
        96, 96,                // Default DPI values
        PixelFormats.Default); // Default pixel format
    resizedImage.Render(drawingVisual);

    return BitmapFrame.Create(resizedImage);
}

//--------Main------------//

  BitmapImage imageSource = (BitmapImage)ImagePreview.Source;
  var NewImage= CreateResizedImage(imageSource , 300, 300, 0); 
```

# tsql - 如何获取日期时间间隔为秒（int）？

> ID：10329021
> 
> 赞同：0
> 
> 时间：2012-04-26T07:30:50.083
> 
> 标签：tsql, datetime, intervals

我有一个包含一些日期时间列的表，现在我想以秒为单位获取两列之间的时间跨度/间隔（作为 int）：

```
declare @Sessions TABLE
(
  [session_id] [int] not null,
  [start] [datetime] not null,
  [end] [datetime] not null
)
insert into @Sessions([session_id], [start], [end])
values (1, '01.04.2012 08:15:05', '01.04.2012 08:16:40');

select [session_id], [end]-[start] as 'duration'
from @Sessions 
```

我得到的是一个类似间隔类型的日期时间：例如。1900-01-01 00:01:35.000。我想要的是以秒为单位的时间跨度：例如。95 年代。

解析字符串不应该是一个选项，因为我认为有一个易于使用的功能 - 深深隐藏在我还没有找到的 msdn 文档中。那么，如何以秒为单位获得这些时间间隔？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:34:25.947

将最后选择更改为

```
select [session_id],datediff(ss,[start],[end]) as 'duration' from @Sessions 
```

我在下面使用表而不是表变量尝试了相同的操作：

![在此处输入图像描述](../Images/fed9335452b58e16461a742f9a0ef3cc.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:34:35.487

```
SELECT  [session_id]
      , DATEDIFF(second, [start] - [end]) as 'Duration'
FROM @Sessions 
```

[DATEDIFF (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

返回指定开始日期和结束日期之间跨越的指定日期部分边界的计数（有符号整数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:33:44.137

使用[DATEDIFF](http://msdn.microsoft.com/en-us/library/ms189794%28v=sql.100%29.aspx)，您可以将两个日期之间的差异缩小到您想要的任何分辨率

例如

```
SELECT DATEDIFF(ss, start, end)
FROM @Sessions 
```

# mysql - mysql count group by order by optimization

> ID：10329024
> 
> 赞同：4
> 
> 时间：2012-04-26T07:31:07.990
> 
> 标签：mysql, group-by, sql-order-by

我有一张桌子要`tag name`存放`posts`

```
table: tagname
tags                    |  pid
festival                | 10034
New York Fashion Week   | 10034
festival                | 10035
car                     | 10036
... 
```

该表现在已经有 590,000 条记录。现在我想从这个表中获取前 10 个最受欢迎的标签。

```
SELECT tags, COUNT(*) as Num FROM tagname
GROUP BY tags
ORDER BY Num DESC 
```

这将花费 23.88 秒。返回`358 kinds of tags`

```
tags       |  Num
festival   |  7201
art        |  6988
gift       |  6755
... 
```

如何优化这个查询，即使在`my.cnf`？我尝试为标签添加索引，似乎没有效果。

编辑： `EXPLAIN SELECT tags, COUNT(tags) as Num FROM`标记名`GROUP BY tags order by Num DESC`

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE      tagname ALL     NULL    NULL     NULL    NULL   597649  Using temporary; Using filesort 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:33:31.870

`tags`为您的列添加索引：

```
ALTER TABLE `tagname` 
ADD INDEX `tags_index` (`tags` ASC) ; 
```

## 编辑：

尝试创建第二个索引

```
CREATE INDEX tags_pid_index ON tagname (tags, pid); 
```

然后将您的查询修改为：

```
SELECT tags, COUNT(pid) as Num 
FROM tagname
GROUP BY tags
ORDER BY Num DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:47:10.750

你有没有试过这样：

```
 SELECT tags, COUNT(*) as Num FROM tagname
    GROUP BY tags HAVING COUNT(*) > 1
    ORDER BY Num DESC LIMIT 10 
```

诀窍可以是：如果您知道最小流行度数，则可以更改 COUNT(*) > x 中的数字

谢谢

# sql - 向表中添加列会更改视图的 sql

> ID：10329027
> 
> 赞同：2
> 
> 时间：2012-04-26T07:31:46.360
> 
> 标签：sql, view

将列添加到视图所依赖的表时，我对带有命名字段的视图产生了非常意想不到的影响。

SQL：

```
SELECT     dbo.AccessCustomFieldDepartment.AccessCustomFieldDepartmentID, dbo.AccessCustomFieldDepartment.AccessCustomField_StoreID, 
                      dbo.AccessCustomFieldDepartment.AccessCustomField_ShopOwner, dbo.AccessCustomFieldDepartment.AccessCustomField_CVRnumber, 
                      dbo.AccessCustomFieldDepartment.AccessCustomField_OpenMonToWed, dbo.AccessCustomFieldDepartment.AccessCustomField_OpenMonToThu, 
                      dbo.AccessCustomFieldDepartment.AccessCustomField_OpenMonToFri, dbo.AccessCustomFieldDepartment.AccessCustomField_OpenMonToTue,
--..
--a bunch of other fields
--..

                  dbo.AccessUser.AccessUserAddress, dbo.AccessUser.AccessUserAddress2, dbo.AccessUser.AccessUserZip, dbo.AccessUser.AccessUserCity, 
                  dbo.AccessUser.AccessUserCountry, dbo.AccessUser.AccessUserWeb
FROM         dbo.AccessUser INNER JOIN
                      dbo.AccessCustomFieldDepartment ON dbo.AccessUser.AccessUserID = dbo.AccessCustomFieldDepartment.AccessCustomFieldDepartmentID 
```

当其他人的代码对表AccessUser进行动态添加列时，服务器或其他东西会更改视图的sql！

例如：

```
dbo.AccessUser.AccessUserCountry, dbo.AccessUser.AccessUserWeb 
```

更改为

```
dbo.AccessUser.AccessUserCountry AS AccessUserCity, 
dbo.AccessUser.AccessUserWeb AS AccessUserCountry 
```

这极大地影响了我对*数据*的最终呈现......就像视图试图保持各个列的位置一样。

删除该列会神奇地将 sql 更改回原始状态。

所以问题是：

*   到底是怎么回事？是服务器吗？CMS 软件中的一些功能（添加字段功能所在的位置）
*   我可以在视图上进行设置以使其 sql 语句 100% 静态吗？

问候，

斯蒂恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:36:18.080

要重新编译视图或过程，请执行以下操作：

```
/* View: */
exec sp_refreshview 'dbo.MyViewName'

/* Procedure, FN, IF, TF */
exec sp_recompile 'dbo.ProcedureName'
exec sp_recompile 'dbo.ScalarFunctionName'
exec sp_recompile 'dbo.InlineFunctionName'
exec sp_recompile 'dbo.TableFunctionName' 
```

您可以从 sysobjects 获取对象列表。将这些选择到表变量中应该相对容易，并生成一个循环，依次重新编译每个变量。

```
set nocount on
declare @o table(
    id int primary key,
    object_full_name nvarchar(1000),
    xtype nvarchar(20)
)
insert @o
select
    id, object_schema_name(id) + '.' + object_name(id) as object_full_name, xtype
from sysobjects so 
where 
    xtype in ('V', 'P', 'FN', 'TF', 'IF')

while exists (select 1 from @o)
begin
    declare @id int
    declare @object_full_name nvarchar(1000)
    declare @xtype nvarchar(20)
    set @id = null
    select top 1 @id = id, @object_full_name = object_full_name, @xtype = xtype from @o order by xtype, object_full_name, id
    delete @o where id = @id
    if @xtype = 'V'
    begin
        raiserror('Marking for recompile - %s: %s', 0, 1, @xtype, @object_full_name)
        exec dbo.sp_refreshview @object_full_name
    end
    else
    begin
        raiserror('Marking for recompile - %s: %s', 0, 1, @xtype, @object_full_name)
        exec dbo.sp_recompile @object_full_name
    end
end 
```

您还可以考虑使用 DDL 触发器来按需执行此操作。

# php - 复选框验证和发布 PHP，快速一个 :)

> ID：10329030
> 
> 赞同：-2
> 
> 时间：2012-04-26T07:31:53.787
> 
> 标签：php, validation, required

我需要检查复选框是否已选中（必需）并且需要验证才能像其他表单字段一样执行，然后我需要在电子邮件中发布值。

整个表单的 PHP：

```
<?php
if(isset($_POST['formtrigger'])):

    //config
    define('FORM_SENDTO','hello@domain.com');
    define('FORM_SUBJECTLINE','Enquiry from website');
    define('ERR_MSG_FIELD_REQUIRED','This field is required.');
    define('ERR_MSG_FIELD_INVALIDEMAIL','Please enter a valid email address.');

    //setup validation rules

        //Name
        $validation_rules['forename']['required'] = true;
        $validation_rules['surname']['required'] = true;

        //Company
        $validation_rules['company']['required'] = true;

        //Address
        $validation_rules['address']['required'] = true;

        //Tel
        $validation_rules['tel']['required'] = true;

        //Email
        $validation_rules['email']['required'] = true;
        $validation_rules['email']['valid_email'] = true;

        //Enquiry
        $validation_rules['enquiry']['required'] = true;

        //title/gender
        $validation_rules['ts1']['required'] = true;

        $validation_rules['ts2']['required'] = true;

    //validate the form
    $formerrors=0;
    foreach($_POST as $formfield_name=>$formfield_value):

        //set the entered value as a sanitised string
        $_POST_SANITISED[$formfield_name] = filter_var($formfield_value,FILTER_SANITIZE_STRING);

        //Check if required
        if($validation_rules[$formfield_name]['required']):
            if(!strlen($formfield_value)>0):
                $formerrors++;
                $fielderrors[$formfield_name][] = ERR_MSG_FIELD_REQUIRED;
            endif;
        endif;

        //Check if valid email required
        if($validation_rules[$formfield_name]['valid_email']):
            if(!filter_var($formfield_value,FILTER_VALIDATE_EMAIL)):
                $formerrors++;
                $fielderrors[$formfield_name][] = ERR_MSG_FIELD_INVALIDEMAIL;
            endif;
        endif;

    endforeach;

    //process form and send message if validation passed
    if($formerrors==0):
        $email_msg[] = "New general enquiry\n\n-----------\n";
        $email_msg[] = "Title: ".$_POST_SANITISED['ts1']."\n";
        $email_msg[] = "Gender: ".$_POST_SANITISED['ts2']."\n";
        $email_msg[] = "Forename: ".$_POST_SANITISED['forename']."\n";
        $email_msg[] = "Surname: ".$_POST_SANITISED['surname']."\n";
        $email_msg[] = "Company: ".$_POST_SANITISED['company']."\n";
        $email_msg[] = "Address: ".$_POST_SANITISED['address']."\n";
        $email_msg[] = "Telephone No.: ".$_POST_SANITISED['tel']."\n";
        $email_msg[] = "Email: ".$_POST_SANITISED['email']."\n";
        $email_msg[] = "Enquiry: ".$_POST_SANITISED['enquiry']."\n";

        $email_msg[] = "-----------\n";

        $email_msg = implode('',$email_msg);

        $email_headers = 'From: ' . $_POST_SANITISED['email'] . "\r\n" .
        'Reply-To: ' . $_POST_SANITISED['email'] . "\r\n" .
        'X-Mailer: PHP/' . phpversion();

        mail(FORM_SENDTO,FORM_SUBJECTLINE,$email_msg,$email_headers);

        header('Location: ?msgsent=1#thanks');

    endif;

endif;

function errorOutput($fieldname=''){
    global $fielderrors;
    if(count($fielderrors[$fieldname])>0):
        foreach($fielderrors[$fieldname] as $err_msg):
            $error_str .= '<div class="form-fielderror-msg">'.$err_msg.'</div>';
        endforeach;
    endif;
    return $error_str ? $error_str : false;
}

function errorClass($fieldname=''){
    global $fielderrors;
    $error_class = '';
    if(count($fielderrors[$fieldname])>0):
       $error_class = 'form-fielderror';
    endif;
    return $error_class ? $error_class : false;
} 
```

?>

这是HTML：

```
 <?php if($_GET['msgsent']==1): ?>

    <h1>Thanks for your enquiry. If requested, we will get in touch shortly.</h1>

    <?php else: ?>

    <div id="form-cont">

        <form action="<?=$_SERVER['PHP_SELF']?>" method="post">

            <div class="form-element">
                <label for="ts1">Title:*</label>
                <select name="ts1" class="<?=errorClass('ts1')?>">
                        <option value="">-- Please select --</option>
                        <option value="Mr" <?=$_POST['ts1']=='Mr' ? 'selected="selected"' : '' ?>>Mr</option>
                        <option value="Mrs" <?=$_POST['ts1']=='Mrs' ? 'selected="selected"' : '' ?>>Mrs</option>
                        <option value="Miss" <?=$_POST['ts1']=='Miss' ? 'selected="selected"' : '' ?>>Miss</option>
                        <option value="Ms" <?=$_POST['ts1']=='Ms' ? 'selected="selected"' : '' ?>>Ms</option>
                </select>
                <?=errorOutput('ts1')?>
            </div>

            <div class="form-element">
                <label for="ts2">Gender:*</label>
                <select name="ts2" class="<?=errorClass('ts2')?>">
                        <option value="">-- Please select --</option>
                        <option value="Male" <?=$_POST['ts2']=='Male' ? 'selected="selected"' : '' ?>>Male</option>
                        <option value="Female" <?=$_POST['ts2']=='Female' ? 'selected="selected"' : '' ?>>Female</option>
                </select>
                <?=errorOutput('ts2')?>
            </div>      

            <div class="form-element">
                <label for="forename">Forename:*</label>
                <input type="text" name="forename" class="textbox <?=errorClass('forename')?>" value="<?=$_POST['forename']?>" />
                <?=errorOutput('forename')?>
            </div>

            <div class="form-element">
                <label for="surname">Surname:*</label>
                <input type="text" name="surname" class="textbox <?=errorClass('surname')?>" value="<?=$_POST['surname']?>" />
                <?=errorOutput('surname')?>
            </div>

            <div class="form-element">
                <label for="company">Company:*</label>
                <input type="text" name="company" class="textbox <?=errorClass('company')?>" value="<?=$_POST['company']?>" />
                <?=errorOutput('company')?>
            </div>

            <div class="form-element">
                <label for="address">Address:*</label>
                <input type="text" name="address" class="textbox <?=errorClass('address')?>" value="<?=$_POST['address']?>" />
                <?=errorOutput('address')?>
            </div>

            <div class="form-element">
                <label for="tel">Telephone No:*</label>
                <input type="text" name="tel" class="textbox <?=errorClass('tel')?>" value="<?=$_POST['tel']?>" />
                <?=errorOutput('tel')?>
            </div>

            <div class="form-element">
                <label for="email">Email:*</label>
                <input type="text" name="email" class="textbox <?=errorClass('email')?>" value="<?=$_POST['email']?>" />
                <?=errorOutput('email')?>
            </div>  

            <div class="form-element">
                <label for="enquiry">Your Enquiry:*</label>
                <textarea name="enquiry" class="<?=errorClass('enquiry')?>"><?=$_POST['enquiry']?></textarea>
                <?=errorOutput('enquiry')?>
            </div>      

            <div class="form-element">
                <label for="terms">Terms and Conditions</label>
                <input type="checkbox" name="terms" class="checkbox <?=errorClass('terms')?>" value="<?=$_POST['terms']=1?>" />
                <?=errorOutput('terms')?>
            </div>      

            <div class="form-element">
            <p class="clear">* denotes required field.</p>
            <input type="submit" class="submit" name="submit" value="Send" alt="Submit" title="Submit" />
            </div>
            <input type="hidden" name="formtrigger" value="1" />
        </form>

    </div>
    <?php endif ?> 
```

底部有问题的复选框：

```
<div class="form-element">
            <label for="terms">Terms and Conditions</label>
            <input type="checkbox" name="terms" class="checkbox <?=errorClass('terms')?>" value="<?=$_POST['terms']=1?>" />
            <?=errorOutput('terms')?>
        </div> 
```

非常感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:05:24.317

```
if (isset($_POST['terms']))
{
    // checked
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:38:06.420

世界上没有办法这个代码会运行复选框的验证是你的最小问题

A. 你有很多`Notice: Undefined index`错误，比如 55

B. 如果您的服务器支持短标签，这将无法正常工作''

C. 重复太多

我只会更正您要求的验证错误，但相信我有很多事情是错误的

```
 $formerrors=0;
    $_POST_SANITISED = array();
    foreach($_POST as $formfield_name=>$formfield_value){
        //set the entered value as a sanitised string
        $_POST_SANITISED[$formfield_name] = filter_var($formfield_value,FILTER_SANITIZE_STRING);
        //Check if required
        if(isset($validation_rules[$formfield_name]['required']))
        {
            if(!strlen($formfield_value)>0){
                $formerrors++;
                $fielderrors[$formfield_name][] = ERR_MSG_FIELD_REQUIRED;
            }
        }
        //Check if valid email required
        if(isset($validation_rules[$formfield_name]['valid_email']))
        {
            if(!filter_var($formfield_value,FILTER_VALIDATE_EMAIL)){
                $formerrors++;
                $fielderrors[$formfield_name][] = ERR_MSG_FIELD_INVALIDEMAIL;
            }
        }
    };

    if(!isset($_POST['terms']))
    {
        $formerrors++;
        $fielderrors["terms"][] = ERR_MSG_FIELD_REQUIRED;       
    } 
```

# java - 休眠：使用子查询时出错

> ID：10329032
> 
> 赞同：0
> 
> 时间：2012-04-26T07:32:00.183
> 
> 标签：java, hibernate, hql, subquery

我正在尝试以这种格式编写子查询

```
listObj = session.createQuery("from TablePersistence where column1 not in (select column2 from TablePersistence)").list(); 
```

请注意，我在子查询中使用同一张表的不同列。

但是当它执行时我得到一个异常。异常消息是：

```
No data type for node: org.hibernate.hql.ast.tree.IdentNode 
\-[IDENT] IdentNode: 'column2' {originalText=column2} 
```

如果需要，我也可以提供堆栈跟踪。

但是从查看堆栈跟踪我的感觉是，这不是编写子查询的方式，我错过了一些东西。

请告诉我这个查询有什么问题。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:36:51.087

您需要提供表别名。然后它会工作

```
from TablePersistence table1 where table1.column1 not in (select table2.column2 from TablePersistence table2) 
```

# html-table - 如何在鼠标拖动时制作可调整大小的 html 表格？

> ID：10329033
> 
> 赞同：1
> 
> 时间：2012-04-26T07:32:11.040
> 
> 标签：html-table, resize, drag

我想在 html 中创建一个有 2 列和 3 行的表格，但是如果我们从它的角落拖动鼠标，它应该调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-29T14:24:21.760

使用 colResizable，一个[jquery 插件来调整 html 表和列的大小](http://www.bacubacu.com/colresizable/)

示例 html

```
<table id="sample">
    <tr> <td>cell</td> <td>cell</td> <td>cell</td> </tr>
</table> 
```

示例js：

```
$("#sample").colResizable({liveDrag:true}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:37:50.513

使用[jQuery UI](http://www.google.com/url?sa=t&rct=j&q=jquery%20ui&source=web&cd=1&ved=0CDUQFjAA&url=http://jqueryui.com/&ei=K_uYT9nmM4WSiAex2snpBQ&usg=AFQjCNGozghm2ayt4t8eDFJl92PWcMmhZQ&cad=rja)，它具有[可调整大小](http://jqueryui.com/demos/resizable)的功能，可以使 HTML 元素（例如表格）可调整大小。

# c - 结构指针转换为 uint8_t * 会引发错误

> ID：10329034
> 
> 赞同：3
> 
> 时间：2012-04-26T07:32:22.913
> 
> 标签：c, memory-management, casting, compiler-errors, truncate

在我的函数中，我为一个名为 messagePacket 的结构分配内存并填充

```
struct messagePacket *packet = malloc(sizeof(struct messagePacket));
//fill 
```

当我尝试将指针转换为 (uint8_t *) 时，gcc 会抛出一个警告，上面写着：大整数隐式截断为无符号类型

```
sendBuf(..., (uint8_t *)packet); 
```

我已经能够很好地执行以下操作，并且我知道我可以使用这种方法作为解决方法。我在这里是因为我宁愿从中学习也不愿解决它。

```
uint8_t *buf = malloc(sizeof(struct messagePacket)); 
```

struct messagePacket 的大小 = 1209 B。我最好的猜测是内存块超级大，我存储在一个高内存地址中，例如 16 字节地址？但这不符合我可以 malloc 相同大小的 uint8_t * 的事实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:43:59.723

我猜编译器会注意到你的结构大于 8bit 并且使用`uint8_t`你只会处理结构的第一个字节。由于这似乎是有意的，您可以先转换为`(void *)`，然后再转换为`(uint8_t *)`. 但是你应该告诉 sendBuf 缓冲区大小是`sizeof(struct messagePacket)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:38:56.013

我认为警告是关于其他一些论点。请提供该行的完整代码、`sendBuf()`函数原型以及相关行的完整编译器警告。

一般来说，`sendBuf()`函数应该使用 a`const void *`而不是 a`const uint8_t *`来发送数据。见`[send()](http://linux.die.net/man/2/send)`和朋友。

# javascript - 在这个例子中如何避免使用 `eval()`？

> ID：10329039
> 
> 赞同：0
> 
> 时间：2012-04-26T07:32:27.510
> 
> 标签：javascript, eval

我正在尝试使用字符串作为对变量的引用以传递给函数。例如：

```
var names = ['Peter', 'John'],

var hasName = function(name){
    var params = ['names'];
    return $.inArray(name, eval( params[0] )) === -1;
}; 
```

如何避免`eval()`？

**编辑：**

字符串 from`params[0]`来自我的 html 中`data-qval`的a 。`input`包含实际数据的数组可以在任何地方声明，`params[0]`只是对作为字符串 in 传入的数组的引用`data-qval`，它是一个参数。我在这里粘贴了我的插件代码。

[http://pastebin.mozilla.org/1598528](http://pastebin.mozilla.org/1598528)行`101`。

完整示例：http: [//jsfiddle.net/elclanrs/ZsS2D/29/](http://jsfiddle.net/elclanrs/ZsS2D/29/)

它目前有效，我只是在寻找一种方法来摆脱`eval()`......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:34:07.110

~~在这种特殊情况下，只需使用`names`：~~

 ~~```
var names = ['Peter', 'John'],
var hasName = function(name){
    var params = ['names'];
    return $.inArray(name, names ) === -1;
}; 
```~~ 

~~（另请参阅下面的注释。）~~ *（您的编辑使上述内容不适用。）*

如果您尝试使用 string 在某个容器中查找`names`数组，`"names"`则必须引用该容器，例如：

```
var obj = {
    names: ['Peter', 'John'
};
var hasName = function(name){
    var params = ['names'];
    return $.inArray(name, obj[params[0]] ) === -1;
}; 
```

如果除了您正在执行此操作的变量范围之外没有容器，*则*必须使用`eval`. 但是您可以（并且通常应该）调整一些东西，以便您拥有一个容器（如上所述），这样您就可以避免它。请注意，如果`names`在全局范围内声明，则您确实有一个容器 ( `window`)。

所以总结一下：

1.  如果`names`是`var`在全局范围内（或[隐式全局](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)），`window[params[0]]`将为您提供对它的引用。

2.  如果`names`已经在某个容器对象中，您可以使用`container[params[0]]`它来获取对它的引用。

3.  如果`names`是`var`函数内的，则无法使用没有`eval`;的运行时字符串来获取它。理想情况下，而不是`var names = [...];`, 使用`var container = {names: [...]};`然后你可以使用`container[params[0]]`.

* * *

请注意，您的函数被调用`hasName`，但是`true`当数组**没有**名称以及有名称`false`时，它会返回。你可能想要`!== -1`，不是`=== -1`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T07:34:45.133

这还不够吗？

```
var hasName = function(name){
    return $.inArray(name, names) > -1;
}; 
```

另外，注意比较

> 因为 JavaScript 将 0 视为松散地等于 false（即 0 == false，但 0 !== false），如果我们要检查数组中是否存在值，我们需要检查它是否不等于（或大于) -1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:02:11.487

字符串作为变量的引用？如果它是浏览器中的全局对象，它将在 window 对象中，因此您只需`window[variableName]`获取它的值即可。对象也一样，即代替`object.foo`，你可以做`object['foo']`or `bar = 'foo', object[bar]`。对于局部范围的变量，如果不使用对象或`eval`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T08:23:00.283

如果`names`是全局的，则可以使用全局命名空间，即`window`

```
var hasName = function(name,namespace){
    namespace = namespace || window;
    return $.inArray(name, namespace.names) > -1;
};
hasName('Peter'); //=> true; 
```

这也可能是一个想法：

```
var MYNS = { names:['Peter','John']
            ,hasName: function(name){
               return $.inArray(name, this.names) > -1;
             }
           };
 MYNS.hasName('Peter'); //=>true 
```

# android - 使用新建的 libdvm.so 重新启动会出现致命错误

> ID：10329044
> 
> 赞同：0
> 
> 时间：2012-04-26T07:32:41.523
> 
> 标签：android, build, jit, dalvik

我已将 JIT 表（/dalvik/vm/Globals.h 中的 pJitEntryTable）的结构从链式数组（哈希排序）更改为哈希表和 B 树的组合。它根据PC找到散列值，并将对应的JitEntry(dalvik地址，翻译地址)输入到散列索引指向的b-tree中。我成功构建了代码并将 libdvm.so 文件推送到模拟器中，并通过杀死 zygote 重新启动了模拟器。但是启动屏幕无限显示“android”，当我执行 $adb logcat 时，我发现以下日志

```
 I/DEBUG   (   33): *** *** *** *** *** *** *** *** *** *** *** *** 
*** *** *** *** 
I/DEBUG   (   33): Build fingerprint: 'generic/sdk/generic:4.0.3/ 
MR1/237985:eng/test-keys' 
I/DEBUG   (   33): pid: 491, tid: 520  >>> system_server <<< 
I/DEBUG   (   33): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault 
addr 002e0080 
I/DEBUG   (   33):  r0 002e0081  r1 4d685228  r2 00000014  r3 002e006d 
I/DEBUG   (   33):  r4 4d685228  r5 51669e38  r6 001de3b8  r7 000086f4 
I/DEBUG   (   33):  r8 407d9dc0  r9 00000002  10 00000000  fp 520a0e68 
I/DEBUG   (   33):  ip 00000030  sp 520a0da0  lr 00000000  pc 
002e0080  cpsr 20000030 
I/DEBUG   (   33):  d0  437000004382353f  d1  3ff0000043700000 
I/DEBUG   (   33):  d2  3ff0000000000000  d3  4197d78400000000 
I/DEBUG   (   33):  d4  3ff0000000000000  d5  4028000000000000 
I/DEBUG   (   33):  d6  43e0000000000000  d7  000000f000000000 
I/DEBUG   (   33):  d8  0000000000000000  d9  0000000000000000 
I/DEBUG   (   33):  d10 0000000000000000  d11 0000000000000000 
I/DEBUG   (   33):  d12 0000000000000000  d13 0000000000000000 
I/DEBUG   (   33):  d14 0000000000000000  d15 0000000000000000 
I/DEBUG   (   33):  scr 80000012 
I/DEBUG   (   33): 
D/dalvikvm(  491): in getCodeAddrCommon function 
D/dalvikvm(  491): searching in the JIT table 
I/DEBUG   (   33):          #00  pc 002e0080 
I/DEBUG   (   33):          #01  lr 00000000  <unknown> 
I/DEBUG   (   33): 
I/DEBUG   (   33): code around pc: 
I/DEBUG   (   33): 002e0060 ffffffff ffffffff ffffffff 
ffffffff  ................ 
I/DEBUG   (   33): 002e0070 ffffffff ffffffff ffffffff 
ffffffff  ................ 
I/DEBUG   (   33): 002e0080 ffffffff ffffffff ffffffff 
ffffffff  ................ 
I/DEBUG   (   33): 002e0090 ffffffff ffffffff ffffffff 
ffffffff  ................ 
I/DEBUG   (   33): 002e00a0 ffffffff ffffffff ffffffff 
ffffffff  ................ 
I/DEBUG   (   33): 
I/DEBUG   (   33): code around lr: 
I/DEBUG   (   33): 00000000 ffffffff ffffffff ffffffff 
ffffffff  ................ 
I/DEBUG   (   33): 00000010 ffffffff ffffffff ffffffff 
ffffffff  ................ 
I/DEBUG   (   33): 00000020 ffffffff ffffffff ffffffff 
ffffffff  ................ 
I/DEBUG   (   33): 00000030 ffffffff ffffffff ffffffff 
ffffffff  ................ 
I/DEBUG   (   33): 00000040 ffffffff ffffffff ffffffff 
ffffffff  ................ 
I/DEBUG   (   33): 
I/DEBUG   (   33): memory map around addr 002e0080: 
I/DEBUG   (   33): 0000b000-00237000 [heap] 
I/DEBUG   (   33): (no map for address) 
I/DEBUG   (   33): 10000000-10001000 
I/DEBUG   (   33): 
I/DEBUG   (   33): stack: 
I/DEBUG   (   33):     520a0d60  4d685228  /system/framework/ 
framework.odex 
I/DEBUG   (   33):     520a0d64  00000000 
I/DEBUG   (   33):     520a0d68  00000000 
I/DEBUG   (   33):     520a0d6c  407d9dc0  /system/lib/libdvm.so 
I/DEBUG   (   33):     520a0d70  00000002 
I/DEBUG   (   33):     520a0d74  00000000 
I/DEBUG   (   33):     520a0d78  520a0e68 
I/DEBUG   (   33):     520a0d7c  4083c78b  /system/lib/libdvm.so 
I/DEBUG   (   33):     520a0d80  4d685228  /system/framework/ 
framework.odex 
I/DEBUG   (   33):     520a0d84  51669e38 
I/DEBUG   (   33):     520a0d88  001de3b8  [heap] 
I/DEBUG   (   33):     520a0d8c  000086f4  /system/bin/app_process 
I/DEBUG   (   33):     520a0d90  407d9dc0  /system/lib/libdvm.so 
I/DEBUG   (   33):     520a0d94  4083c7e5  /system/lib/libdvm.so 
I/DEBUG   (   33):     520a0d98  df0027ad 
I/DEBUG   (   33):     520a0d9c  00000000 
I/DEBUG   (   33): #00 520a0da0  00000000 
I/DEBUG   (   33):     520a0da4  001de3b8  [heap] 
I/DEBUG   (   33):     520a0da8  4086ef90  /system/lib/libdvm.so 
I/DEBUG   (   33):     520a0dac  520a0dd8 
I/DEBUG   (   33):     520a0db0  44e6bb60  /dev/ashmem/dalvik- 
LinearAlloc (deleted) 
I/DEBUG   (   33):     520a0db4  520a0e1c 
I/DEBUG   (   33):     520a0db8  00000000 
I/DEBUG   (   33):     520a0dbc  fffffe60 
I/DEBUG   (   33):     520a0dc0  520a0e68 
I/DEBUG   (   33):     520a0dc4  407ef200  /system/lib/libdvm.so 
I/DEBUG   (   33):     520a0dc8  00000000 
I/DEBUG   (   33):     520a0dcc  00000000 
I/DEBUG   (   33):     520a0dd0  00000000 
I/DEBUG   (   33):     520a0dd4  520a0eb8 
I/DEBUG   (   33):     520a0dd8  00000000 
I/DEBUG   (   33):     520a0ddc  00000000 
I/DEBUG   (   33):     520a0de0  00000000 
I/DEBUG   (   33):     520a0de4  00000000 
I don't understand the error. Do i need to make any adjustments to the 
jit code cache size and heap size? Any help regarding this will be 
appreciated. 
Thanks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:01:57.063

这是一个段错误崩溃。有东西试图访问尚未分配的内存段，否则不允许访问。这很可能表明您所做的 libdvm 更改中存在错误。

调试会很棘手。我会尝试构建一个链接它的 libdvm_new.so 和 dalvikvm_new 二进制文件，并将它们推送到设备/模拟器（而不是替换现有的 libdvm.so 和 dalvikvm），然后使用 gdb-server 和 gdb 调试 dalvikvm_new ，在命令行类型程序（典型的静态 void main(String[] args) 类型程序）上。

# php - php $FILES 为空

> ID：10329046
> 
> 赞同：0
> 
> 时间：2012-04-26T07:32:52.523
> 
> 标签：php, jquery

我尝试使用 php 和 jquery 向 db 插入一行

我有这个代码

```
$.post('/json/management/AddArtistAjax', 
    {
       "artistName": $("#nameSurnameID").val()
            ,
            "Country": $("#country").val()
            ,
            "bDate" :  $("#demo1").val()
            ,
            "dDate" :  $("#demo2").val()
            ,
            "bio" : $("#bioID").val()

    },
    function(response){
            alert(response);
        }); 
```

我可以将以上所有内容都发送到 php 端。但是，我无法将文件发送到 php 端

print_r($_FILES) 数组为空，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T07:34:43.153

您不能通过 AJAX 上传这样的文件。如果您不需要支持旧浏览器，您可以使用支持 AJAX 文件上传的[表单插件](http://jquery.malsup.com/form/)，甚至可以回退到旧浏览器的隐藏 iframe。

# visual-studio-2010 - Web 部署项目 (.wdproj) 和 MSDeploy 之间的区别

> ID：10329051
> 
> 赞同：2
> 
> 时间：2012-04-26T07:33:19.887
> 
> 标签：visual-studio-2010, msdeploy, web-deployment-project

*   [Web 部署项目](http://www.microsoft.com/download/en/details.aspx?id=24509)(.wdproj) 和新的 [MSDeploy](http://weblogs.asp.net/scottgu/archive/2010/07/29/vs-2010-web-deployment.aspx)有什么区别？
*   是否更喜欢使用 MSDeploy 而不是 Web 部署项目？
*   [这个插件](http://www.microsoft.com/download/en/details.aspx?id=24509)是为了向后兼容已经创建的 Visual Studio 2005/2008 项目而创建的，还是它是一个将不断发展的产品？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T16:22:31.030

1.  Web 部署项目和 Web 部署（又名 MSDeploy）不是相互排斥的；您可以使用 WDP 创建 Web Deploy 部署包。Web Deploy 是一个可供 Visual Studio 或 MSBuild 使用的 IIS 工具。在 Visual Studio 2010 中，Web 发布管道是使用 MSBuild 实现的，因此它可以从 IDE（一键发布功能）或通过从命令行调用 MSBuild 目标以相同的方式工作。请参阅此 MSDN 页面：

[http://msdn.microsoft.com/en-us/library/dd394698.aspx](http://msdn.microsoft.com/en-us/library/dd394698.aspx)

2.  如果您使用的是 VS 2010 或更高版本，并且您使用的是 Web 应用程序项目而不是网站项目，则不需要 Web 部署项目，除非您想在部署中构建预编译/合并步骤。如果您使用的是网站项目，您仍然需要使用 Web 部署项目。

3.  WDP 的日子屈指可数，它不会发展。

# php - 需要在php中使用粗体标签

> ID：10329055
> 
> 赞同：2
> 
> 时间：2012-04-26T07:33:32.827
> 
> 标签：php, html, css

我已经完成了这个表单，并且在提交表单时工作正常，信息通过电子邮件发送到电子邮件 ID，但是所有内容在交付时都以纯文本显示我希望当表单信息到达电子邮件 ID 时，它应该字段名称以粗体显示。

```
<?php 
$errors = '';
$myemail = 'abc@email.com';//<-----Put Your email address here.

if(
empty ($_POST['fullname']) ||
empty ($_POST['martialstatus']) ||
empty ($_POST['dateofbirth']) ||
empty ($_POST['email']) ||
empty ($_POST['telephone']) ||
empty ($_POST['cell']) ||
empty ($_POST['graduation']) ||
empty ($_POST['yearatt']) ||
empty ($_POST['department']) ||
empty ($_POST['program']) ||
empty ($_POST['permanentaddress']) ||
empty ($_POST['currentemp']) ||
empty ($_POST['designation']) ||
empty ($_POST['selfemp']) ||
empty ($_POST['officeemail']) ||
empty ($_POST['officetele']) ||
empty ($_POST['portfolio']) ||
empty ($_POST['membership']))

{
    $errors .= "\n Error: all fields are required";
}

$fullname = $_POST['fullname'];
$martialstatus = $_POST['martialstatus'];
$dateofbirth = $_POST['dateofbirth'];
$email = $_POST['email'];
$telephone = $_POST['telephone'];
$cell = $_POST['cell'];
$graduation = $_POST['graduation'];
$yearatt = $_POST['yearatt'];
$department = $_POST['department'];
$program = $_POST['program'];
$permanentaddress = $_POST['permanentaddress'];
$currentemp = $_POST['currentemp'];
$designation = $_POST['designation'];
$selfemp = $_POST['selfemp'];
$officeemail = $_POST['officeemail'];
$officetele = $_POST['officetele'];
$portfolio = $_POST['portfolio']; 
$membership = $_POST['membership'];

if( empty($errors))
{
    $to = $myemail; 
    $email_subject = "Membership Information: $fullname";
    $email_body = "You have received a new message. ".
    " Here are the details:\n  Personal Information \n\n 
    Name:                      $fullname \n 
    Martial Status:            $martialstatus \n 
    Date of Birth:             $dateofbirth \n 
    Email:                     $email \n 
    Telephone:                 $telephone \n 
    Cell:                      $cell \n 
    Year of Graduation:        $graduation \n 
    Years Attended:             $yearatt \n
    Department:                $department \n 
    Program Attended:          $program \n 
    Permanent Address:         $permanentaddress \n\n 
    Career Information \n\n 
    Currently Employeed with:  $currentemp \n 
    Designation:               $designation \n 
    Self Employeed:            $selfemp \n 
    Office Email:              $officeemail \n 
    Office Telephone:          $officetele \n 
    Portfolio:                 $portfolio \n\n 
    MemberShip \n\n 
    Type of MemberShip:        $membership \n\n "; 

    $headers = "From: $myemail\n"; 
    $headers .= "Reply-To: $email";

    mail($to,$email_subject,$email_body,$headers);
    //redirect to the 'thank you' page
    header('Location: contact-form-thank-you.html');
} 
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html>
<head>
    <title>Contact form handler</title>
</head>

<body>
<!-- This page is displayed only if there is some error -->
<?php
echo nl2br($errors);
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T07:39:28.870

粗体文本可以用 HTML 电子邮件完成，设置内容类型标题：

```
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html;\r\n"; 
```

使用`<strong>`标签：

```
<strong>Name:</strong>                      $fullname <br /> 
```

不要忘记`\n`不会在 HTML 电子邮件中显示新行，您需要使用`<br />`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T07:39:42.637

请务必添加[邮件页面文档中指定的标题](http://php.net/manual/en/function.mail.php)

```
$headers .= 'MIME-Version: 1.0' . "\r\n";  
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

然后使用标记来撰写您的电子邮件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T07:41:25.757

您需要添加`Content-type`标题，并将 HTML 标记添加到您发送的电子邮件中。所以：

```
$headers = "From: $myemail\n"; 
$headers .= "Reply-To: $email\n";
$headers .= "Content-type: text/html"; 
```

此外，您需要转换`\n`为 HTML 换行符，因此：

```
$email_body = nl2br($email_body);
mail($to,$email_subject,$email_body,$headers); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T07:41:27.920

您的标头必须始终以 `\r\n" 结尾

这是错误的

```
$headers = "From: $myemail\n"; 
$headers .= "Reply-To: $email"; 
```

应该是这样的

```
$headers = "From: $myemail\r\n";
$headers .= "Reply-To: $email\r\n";
$headers .= 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
```

您需要在邮件中添加 HTML 标签

例子

```
 Name:                      <strong>$fullname</strong><br /> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-26T07:37:03.460

确保以 HTML 格式发送电子邮件并将相应的行更改为

```
Email:                     <b>$email</b> \n 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-26T08:25:45.487

我冒昧地重写了很多次，主要是因为重复太多，还有一个巨大的安全问题。

人们也可以对此进行一些进一步的改进，但这留给读者作为练习。

```
<?php
$errors = '';
$myemail = 'abc@email.com';//<-----Put Your email address here.

$fields = array(
    'fullname' => 'Name',
    'martialstatus' => 'Martial Status',
    'dateofbirth' => 'Date of Birth',
    'email' => 'Email',
    'telephone' => 'Telephone',
    'cell' => 'Cell',
    'graduation' => 'Year of Graduation',
    'yearatt' => 'Years Attended',
    'department' => 'Department',
    'program' => 'Program Attended',
    'permanentaddress' => 'Permanent Address',
    'currentemp' => 'Currently Employeed with',
    'designation' => 'Designation',
    'selfemp' => 'Self Employeed',
    'officeemail' => 'Office Email',
    'officetele' => 'Office Telephone',
    'portfolio' => 'Portfolio',
    'membership' => 'Type of MemberShip',
);

// Don't allow HTML in form.
foreach ($_POST as $key => $value) {
    $_POST[$key] = strip_tags($value);
}

$missing_fields = array_diff_assoc($fields, $_POST);

if (count($missing_fields) > 0) {
    $errors .= "\n Error: all fields are required";
}

if (empty($errors)) {
    $to = $myemail;
    $email_subject = 'Membership Information: ' . $_POST['fullname'];
    $email_body = 'You have received a new message. Here are the details:<br />  Personal Information <br/ ><br/ >';
    foreach (array('fullname', 'martialstatus', 'dateofbirth', 'email', 'telephone', 'cell', 'graduation', 'yearatt', 'department', 'program', 'permanentaddress') as $key) {
      $email_body .= $fields[$key] . ': <strong>' . $_POST[$key] . "</strong><br />";
    }

    $email_body .= "Career Information <br /><br />";

    foreach (array('currentemp', 'designation', 'selfemp', 'officeemail', 'officetele', 'portfolio') as $key) {
      $email_body .= $fields[$key] . ': <strong>' . $_POST[$key] . "</strong><br />";
    }

    $email_body .= "MemberShip <br /><br />";

    foreach (array('membership') as $key) {
      $email_body .= $fields[$key] . ': <strong>' . $_POST[$key] . "</strong><br />";
    }

    $headers = "From: $myemail\r\n";
    $headers .= "Reply-To: $myemail\r\n";
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-type: text/html; charset=iso-8859-1\r\n";

    mail($to,$email_subject,$email_body,$headers);
    //redirect to the 'thank you' page
    header('Location: contact-form-thank-you.html');
}
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Contact form handler</title>
</head>

<body>
<!-- This page is displayed only if there is some error -->
<?php
echo nl2br($errors);
?>

</body>
</html> 
```

# javascript - 在应用程序中使用 HtmlCtrl 时，“onscroll”事件处理程序中的“scrollHeight”未更新，但在 IE9 中正常工作

> ID：10329059
> 
> 赞同：3
> 
> 时间：2012-04-26T07:33:55.260
> 
> 标签：javascript, internet-explorer, dom-events, onscroll, htmlcontrols

当下面的代码示例在 IE9 中加载时，它可以正常工作，但是当在应用程序的 html 控件中加载时，当我更改处理程序中的内容时，事件处理程序中`scrollHeight`没有更新，因此不会显示警报。`onscroll``innerHTML`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<script>
function f()
{
    var nBodyHeightOld = document.getElementById("div1").scrollHeight;
    document.getElementById("div1").innerHTML += '<div>It is a test!</div>';
    if (document.getElementById("div1").scrollHeight != nBodyHeightOld)
        alert('scrollHeight changed!');
}
</script>
</head>
<body>
<div id='div1' style='overflow:scroll; height:300px' onscroll="f()">
    <div style='height:400px'></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:37:15.737

因为应用程序使用 IE8。要强制应用程序使用 IE9 将元标记添加到 html：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" > 
```

# c++ - Unix 和 Windows Server 上的 GUI 开发

> ID：10329067
> 
> 赞同：0
> 
> 时间：2012-04-26T07:34:37.080
> 
> 标签：c++, windows, linux, visual-studio, user-interface

如果我熟悉 c/c++ 和 oops 的概念，我应该选择什么工具（语言）来开发 GUI，这样它可以增强我的 c/c++ 技能，而不是学习一门新语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:45:08.250

QT 和 C# 可以工作，因为您已经了解 c/c++

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T09:33:32.263

我非常喜欢[WxWidgets](http://www.wxwidgets.org/)。它在 Linux、Windows 和 Mac 上运行良好。我已经将它用于几个小型应用程序。此外，如果您不关心原生外观和感觉，您可能也会喜欢[FLTK](http://www.fltk.org/)。我在 C++ 中都取得了不错的成绩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:30:14.410

我将使用 Java 和 Swing 甚至 JavaFX

# ios - 文本到语音和导航

> ID：10329072
> 
> 赞同：0
> 
> 时间：2012-04-26T07:34:48.020
> 
> 标签：ios, uiwebview, uiscrollview

我在 iOS 上使用 Acapela TTS。我有一个 HTML 文档，其中包含我想要读出的所有文本（和标记）。文本被分成几段，我希望能够在每个标题处开始 TTS。目前，我将每个段落放在它自己的 UIWebView 中（用于处理内部标记）并将它们添加到 UIScrollView 以导航所有元素。每个 UIWebView 都带有一个按钮，所以当它被按下时，连接的文本会被大声朗读。我现在的问题是，我必须使用框架（意味着静态 y 位置）放置 UIWebView 和按钮，但这需要我有准确的高度，这是我当前的问题。我试过使用这个问题中提到的解决方案：[UIWebView height](https://stackoverflow.com/questions/745160/how-to-determine-uiwebview-height-based-on-content-within-a-variable-height-uit)，但它仍然看起来不太好 - webviews 太高或太短，我需要它是完美的，所以它看起来像一个一致的网页。

有没有人知道一种不同的方式来做这种类型的 TTS，而不是将它分成我忽略的单独的 webviews？

这是我放置 UIWebViews 的代码：

```
float yOffset = 0;
UIWebView *previous = nil;

//UIWebView delegate
-(void)webViewDidFinishLoad:(UIWebView *)webView{

NSString *height = [webView stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"];

if(previous!=nil){
    yOffset += previous.frame.size.height;
}
CGFloat h = [height floatValue];

CGRect frame = CGRectMake(0, yOffset, scrollView.frame.size.width, h); 

[webView setFrame:frame];
[webView setOpaque:NO];
[webView setBackgroundColor:[UIColor whiteColor]];
previous = webView;
[scrollView addSubview:webView];

yOffset += previous.frame.size.height;

[scrollView setContentSize:CGSizeMake(scrollView.frame.size.width, yOffset)]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:42:21.593

只是一个想法：您可以将完整的段落转换为指向段落标识符的可点击链接。然后，您可以使用 javascript 覆盖单击事件`UIWebViewDelegate`并获取段落文本。我的意思是这样的：

HTML：

```
<p id="paragraph1"><a href="paragraph1">First paragraph</a></p>
<p id="paragraph2"><a href="paragraph2">Second paragraph</a></p> 
```

实施：`shouldStartLoadWithRequest`_`UIWebViewDelegate`

```
 - (BOOL)webView:(UIWebView *)webView 
shouldStartLoadWithRequest:(NSURLRequest *)request 
            navigationType:(UIWebViewNavigationType)navigationType 
{
  NSString* link = [request.URL lastPathComponent]; // not sure

  // use rangeOfString to find all
  if (inType == UIWebViewNavigationTypeLinkClicked && [link compare:@"paragraph1"] == NSOrderedSame) 
  { 
    // check this
    NSString* javaScript = 
      [NSString stringWithFormat:@"document.getElementById('%@').nodeValue", link]; 
    NSString paragraphToRead = 
      [webView stringByEvaluatingJavaScriptFromString:javaScript];
    // read out paragraphToRead
    return NO;
  }
} 
```

# .net - 托管 WCF 服务时出错

> ID：10329079
> 
> 赞同：3
> 
> 时间：2012-04-26T07:35:10.450
> 
> 标签：.net, wcf, hosting

我正在尝试在 IIS 中托管 WCF 服务，但出现以下错误。“无法读取配置节‘oracle.dataaccess.client’，因为它缺少节声明”

我添加了以下程序集。

```
add assembly="Oracle.DataAccess, Version=2.111.7.20, Culture=neutral, PublicKeyToken=89B483F429C47342" 
```

并宣布

```
<oracle.dataaccess.client>
    <settings>
        <add name="SubbType" value="udtMapping factoryName='Project.TypeObjects.TYP_SUBMISSION_PROCESSFactory, PublicKeyToken=NULL'            typeName='TYP_SUBMISSION_PROCESS' schemaName='ABC' dataSource='XYZ'"/>       
    </settings>
 </oracle.dataaccess.client> 
```

这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T07:49:14.230

正如错误所说，您缺少部分声明。像这样的东西：

```
<configSections>
    <section name="oracle.dataaccess.client"
             type="Oracle.DataAccess.ClientSettings, Oracle.DataAccess, Version=2.111.7.20, Culture=neutral, PublicKeyToken=89B483F429C47342" />
</configSections> 
```

`type`请注意：这只是一个示例，我不知道在您的特定情况下该属性究竟需要什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T18:06:15.233

我在 IIS 7.5 上遇到了这个问题。缺少的是 machine.config 中的“oracle.dataaccess.client”部分。Oracle 的 ODP.NET 安装程序应该将此部分添加到 machine.config，但它丢失了。因此，如上所述，您可以将缺少的部分添加到 web.config 或将缺少的部分添加到 machine.config。

机器配置：

> `<section name="oracle.dataaccess.client" type="System.Data.Common.DbProviderConfigurationHandler,`System.Data，版本=4.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089" />

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-21T13:06:15.820

添加此部分声明对我有用：

```
<configSections>
  <section name="oracle.manageddataaccess.client"
    type="OracleInternal.Common.ODPMSectionHandler, Oracle.ManagedDataAccess, Version=4.112.3.50, Culture=neutral, PublicKeyToken=89b483f429c47342" />
</configSections> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T09:01:58.527

我在 64 位服务器和 32 位 oracle 客户端上的 IIS 7.5 也遇到了这个问题，并且“oracle.dataaccess.client”部分仅在 ...Framework64/v4.0.30319/Config/machine.config 中丢失。在 32 位中有定义的部分。在我添加部分 IIS 后，我可以在我的应用程序中加载 web.config。

所以我建议你检查两台机器配置。ODAC客户端（32bit/64bit）只改动了一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-25T21:57:27.847

Oracle.DataAccess.Client 是较旧的 oracle 驱动程序。在我的情况下，我有一个使用这些旧驱动程序的应用程序，我没有在我的机器上安装它。新的托管驱动程序可以作为 nuget 包安装，我相信这不需要在您的机器上安装驱动程序或更改 machine.config。

我用来消除错误的步骤是（这都在我的实体框架项目中，我能够通过 LINQPad 进行连接）。

1.  安装 Oracle.ManagedDataAccess nuget 包，版本 12.2.1100。有更新的版本，没试过。
2.  将连接字符串从 Oracle.DataAccess.Client 更改为 Oracle.ManagedDataAccess.Client。
3.  通过编辑 XML 更改了我的 EDMX 文件。在顶部它引用了 Oracle.DataAccess.Client，将其更改为引用 Oracle.ManagedDataAccess.Client

这些步骤允许我使用 LINQPad 创建一个新连接并加载数据模型和 app.config 文件并从基础表中读取。我希望这对你有用。更改您的 WCF 项目也应该是安装 nuget 包并更正连接字符串的问题。

# moq - Lambda 参数在 Moq 中不起作用

> ID：10329081
> 
> 赞同：0
> 
> 时间：2012-04-26T07:35:16.567
> 
> 标签：moq

我不断收到“不支持的表达式”异常。似乎 lambda 表达式 (a=>a.PP_EventID==1) 是问题所在。这个怎么解决的？

```
pricepackPersistenceMock.Setup(pricepack => pricepack.Delete(a=>a.PP_EventID==1)).Verifiable(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:43:23.673

您应该使用谓词 inside`It.Is<T>()`方法。

```
pricepackPersistenceMock.Setup(pricepack => ricepack.Delete(It.Is<TypeOfa>(a=>a.PP_EventID==1)))
                        .Verifiable(); 
```

**更新：**

```
eventPersistenceMock.Setup(u => u.Single(It.IsAny<Func<tbl_SBAem_Event, bool>>()))
                    .Returns(eventlists.Where(a => a.EventMngID == currentevent.EventMngID).Single());
// you can directly return the value
//verifiable is not needed because you set the return value 
```

# c# - 如何在 C# 运行时填充通用列表？

> ID：10329082
> 
> 赞同：0
> 
> 时间：2012-04-26T07:35:23.457
> 
> 标签：c#, generics

我有一个如下所示的课程：

```
 public class GUIView 
    {
        public GUIView()
        {
            Views = new List<View>();
        }

        public List<View> Views
        {
            get;
            set;
        }

        public ViewMode ViewMode
        {
            get;
            set;
        }

        public ViewStatus Status
        {
            get;
            set;
        }
}

public class View 
    {        
        public View()
        {
            DisplayFunctions = new List<DisplayFunction>();
        }        
        public ChartType ViewType
        {
            get;
            set;
        }        
        public List<DisplayFunction> DisplayFunctions
        {
            get;
            set;
        }
    }

 public class DisplayFunction
    {
        public int Id
        {
            get;set;
        }

        public byte[] Color
        {
            get;
            set;
        }

        public FunctionShape Shape
        {
            get;
            set;
        }
    } 
```

我有一个 xml 文件，我在运行时从中填充对象。我能够填充简单的属性，如 int string 等。

但是我没有找到一种方法来填充 List 类型的示例属性“Views”中的 List 类型的属性。

即使我无法找到该属性的类型。

只是我想在运行时初始化属性。

```
Views = new List<View>(); 
```

然后创建一个 View 的实例

```
View v = new View(); 
```

然后填充视图对象，最后将其添加到列表中

```
Views.Add(view) 
```

这是我的xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Views>
  <GUIView ViewMode="Single" Status="On">
    <View ViewType="Lt">
      <DisplayFunction Shape="Bar" Id="514" Color="122,222,123,133" />
    </View>
    <View ViewType="Lt">
      <DisplayFunction Shape="Bar" Id="122" Color="122,222,123,133" />
    </View>
  </GUIView>
  <GUIView ViewMode="Dual" Status="On">
    <View ViewType="Lt">
      <DisplayFunction Shape="Bar" Id="122" Color="122,222,123,133" />
    </View>
    <View ViewType="Lt">
      <DisplayFunction Shape="Bar" Id="122" Color="122,222,123,133" />
    </View>
  </GUIView>
  <GUIView ViewMode="Dual" Status="On">
    <View ViewType="Lt">
      <DisplayFunction Shape="Bar" Id="122" Color="122,222,123,133" />
    </View>
    <View ViewType="Lt">
      <DisplayFunction Shape="Bar" Id="122" Color="122,222,123,133" />
    </View>
  </GUIView>
  <GUIView ViewMode="Dual" Status="On">
    <View ViewType="Lt">
      <DisplayFunction Shape="Bar" Id="122" Color="122,222,123,133" />
    </View>
    <View ViewType="Lt">
      <DisplayFunction Shape="Bar" Id="122" Color="122,222,123,133" />
    </View>
  </GUIView>
</Views> 
```

我已经编写了一个填充对象的方法，该方法适用于简单的属性，但我需要帮助来填充列表，这是我的方法：

```
public static XElement FromXml(this XElement xe, object obj)
        {
            if (xe != null && xe.HasAttributes)
            {
                foreach (XAttribute attribute in xe.Attributes())
                {
                    try
                    {
                        PropertyInfo p = obj.GetType().GetProperty(attribute.Name.ToString());
                        if (p != null && p.CanWrite)
                        {
                            string s = attribute.Value;
                            if (s.Length > 0)
                            {
                                UpdateProperty(p, obj, s);
                            }
                        }
                    }
                    catch (Exception ex)
                    {
                        Log.Error("FromXml", ex);
                    }
                }
            }
            return xe;
        } 
```

任何想法都会很棒，因为我已经尝试过，但到目前为止还没有找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:48:17.943

这看起来是一个很好的 XML 序列化/反序列化候选者。.NET 有一组[内置类](http://msdn.microsoft.com/en-us/library/182eeyhh%28v=vs.100%29.aspx)，允许您将对象持久化（序列化）到 XML，并从 XML 创建对象的实例（反序列化）。

我建议您在 MSDN 上阅读此内容，并首先将您的类的实例序列化为 XML 作为学习练习。

框架提供了一组[属性](http://msdn.microsoft.com/en-us/library/83y7df3e%28v=vs.100%29.aspx)，您可以使用它们来微调对象的 XML 表示。

# objective-c - 单击子视图时将值设置为超级视图

> ID：10329086
> 
> 赞同：2
> 
> 时间：2012-04-26T07:35:39.860
> 
> 标签：objective-c, ios, xcode

我已经动态创建了具有许多按钮的 uiviews。它用于从每一行（uiview）中选择特定值（uibutton）。单击按钮时，我必须更改按钮图像（如突出显示）。现在我越来越喜欢那个，但是顺序不匹配。在某些行中没有选择按钮。请检查下面的代码

```
for (int j=0; j<[viewTagAry count]; j++)
    {  
        if ([[viewTagAry objectAtIndex:j] isEqualToString:[NSString stringWithFormat:@"%d",v]]) 
        {  
            for (int i=0; i<[lastSelectedButtonAry count]; i++) 
            {
                lastSelectedButton=[lastSelectedButtonAry objectAtIndex:i];
                int tag=[[btnTagArray objectAtIndex:i] intValue];
                UIImage *numImg=[UIImage imageNamed:[NSString stringWithFormat:@"%db.png",tag]];
                [lastSelectedButton setBackgroundImage:numImg forState:UIControlStateNormal];
            }
}
}
-(void)highlightButton:(id)sender{

    UIButton *button = (UIButton *)[sender userInfo];
    int t=button.tag+1;

            UIImage *numImg=[UIImage imageNamed:[NSString stringWithFormat:@"%da.png",t]];
            [button setBackgroundImage:numImg forState:UIControlStateNormal];

} 
```

# c# - 自定义字段不保存

> ID：10329087
> 
> 赞同：2
> 
> 时间：2012-04-26T07:35:45.713
> 
> 标签：c#, list, sharepoint, sharepoint-2010, custom-fields

我创建了一个包含自定义字段的列表（sharepoint 2010）。自定义字段继承自 SPFieldUser。在我创建了一个新的 ListItem (webfrontend) 并查看元素详细信息后，该字段为空。

**Webfronted NewItemForm** ![Webfronted NewItemForm](../Images/6b4e56f25159c7a5a08d5c096b18e689.png) **Webfronted ItemDetailsForm ** ![Webfronted ItemDetailsForm](../Images/a4f7cc7d178a6cef52621f934bbd3133.png) **Webfronted EditItemForm** ![Webfronted EditItemForm](../Images/33f2c5bd13607deedbb825fb4b2e4823.png)

**我的代码：**

```
public class Vertreter_FieldType:SPFieldUser
    {
     public Vertreter_FieldType(SPFieldCollection fields, string fieldName)
           : base(fields, fieldName)
       {

       }
        public Vertreter_FieldType(SPFieldCollection fields, string typeName, string fieldName)
            : base(fields, typeName, fieldName)
        {
        }

        public override object GetFieldValue(string value)
        {
            return base.GetFieldValue(value);
        }

        public override string DefaultValue
        {
            get
            {
                return base.DefaultValue;
            }
            set
            {
                base.DefaultValue = value;
            }
        }
    } 
```

**XML 类型：**

```
<FieldTypes>
  <FieldType>
    <Field Name="TypeName">Vertreter_FieldType</Field>
    <Field Name="ParentType">User</Field>
    <Field Name="TypeDisplayName">Vertreter</Field>
    <Field Name="TypeShortDescription">Auswahl Vertreter</Field>
    <Field Name="UserCreatable">TRUE</Field>
    <Field Name="FieldTypeClass">CustomFieldTypes.Vertreter_FieldType, $SharePoint.Project.AssemblyFullName$</Field>
  </FieldType>
</FieldTypes> 
```

**我的内容类型列表基于：**

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
...
<Field ID="{2C338272-3BC8-45bc-B33E-5FBD1223F398}"
         DisplayName="Administrator" Name="Administrator" 
         Type="Admin_FieldType" Required="TRUE"
         UnlimitedLengthInDocumentLibrary="FALSE"
     />
  <Field ID="{585CE72A-72D7-4ecc-8324-484BA1E483F1}"
         DisplayName="Vertreter" Name="Vertreter"
         Type="Vertreter_FieldType" Required="TRUE"
         UnlimitedLengthInDocumentLibrary="FALSE"
         >
  </Field>
...
  <FieldRefs>

...
     <FieldRef ID="{2C338272-3BC8-45bc-B33E-5FBD1223F398}" Name="Administrator" Required="TRUE" ShowInNewForm="TRUE" ShowInEditForm="TRUE" />
     <FieldRef ID="{585CE72A-72D7-4ecc-8324-484BA1E483F1}" Name="Vertreter" Required="TRUE" ShowInNewForm="TRUE" ShowInEditForm="TRUE" />
 ...

    </FieldRefs>
  </ContentType>
</Elements> 
```

我的环境：sharepoint 2010、visualstudio 2010

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:14:26.100

找到解决方案：我必须将**List="UserInfo"**添加到 FieldDefinition。

```
<Field ID="{585CE72A-72D7-4ecc-8324-484BA1E483F1}" DisplayName="Vertreter" Name="Vertreter" Type="Vertreter_FieldType" Required="TRUE" UnlimitedLengthInDocumentLibrary="FALSE" List="UserInfo"> 
```

# ios - Away3d 4 + IOS StageWebView + 视频全屏 = View3D 为空

> ID：10329098
> 
> 赞同：1
> 
> 时间：2012-04-26T07:36:38.823
> 
> 标签：ios, air, away3d, stagewebviewbridge

在我的应用程序（用于 iPad 的 flash + away3d 4 + adobe air 3.2）中，我有一个 View3D，其中包含一些正确显示的对象。当我触摸特定对象时，它会启动一个带有此 html 内容的 stagewebview：

`[...] <video id="video" controls="true" autoplay="true" width="100%" height="100%" src="video.mp4"></video> [...]`

stagewebview 显示正常，我可以毫无问题地启动视频，并且我继续在后台看到 View3D。

但是，如果我使用标准 ios 播放器将视频切换到全屏模式，然后返回窗口模式，View3D 是空的：不再显示对象，但它们存在于内存中并且可见 = true。

我已经为 view3D 设置了一个 backgroundColor，所以我可以看到它总是在我的舞台上，只有网格丢失了。

我怀疑 stage3d 和 ios 视频播放器之间存在冲突，因为它们都使用硬件加速。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:38:45.537

您的问题可能与我遇到的这个错误有关。它似乎在 PC 上受到打击和错过，但它发生在我办公室的每台 PC 上，所以我不得不假设它是绝大多数问题。

[http://away3d.com/forum/viewthread/2188/](http://away3d.com/forum/viewthread/2188/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:10:59.340

不幸的是，这是一个尚未解决的 AIR 错误！

[https://bugbase.adobe.com/index.cfm?event=bug&id=3486264](https://bugbase.adobe.com/index.cfm?event=bug&id=3486264)

# xml - Postgresql：如何更改 XML 列中属性的值？

> ID：10329102
> 
> 赞同：4
> 
> 时间：2012-04-26T07:37:08.690
> 
> 标签：xml, postgresql, plpgsql, postgresql-9.1

在将其返回给客户端之前，我需要使用表中的 XML 数据类型更改存储在列中的 XML 属性的值。

现在我使用**cursor**，获取**xml**，**将其**转换为`VARCHAR`，解析它，**更改属性值**（或者如果它不存在则添加它），**将其放入临时表**并从临时表返回数据。一切都在存储过程（pl/pgsql）中完成。

我想知道是否有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T06:25:30.063

您可以在[PL/PerlU](http://www.postgresql.org/docs/current/static/plperl.html)函数（或 PL/Perl，如果您可以在中预加载 XML::LibXML）中使用[XML](https://metacpan.org/release/XML-LibXML) ::LibXML，如下所示：[`plperl.on_init`](http://www.postgresql.org/docs/current/static/plperl-under-the-hood.html#PLPERL-CONFIG)`postgresql.conf`

```
CREATE EXTENSION IF NOT EXISTS plperlu;

CREATE OR REPLACE FUNCTION replace_attribute(
    xml   xml,
    attr  text,
    val   text
) RETURNS XML LANGUAGE plperlu AS $$
    my ($xml, $attr, $val) = @_;
    use XML::LibXML;
    my $dom = XML::LibXML->load_xml(string => $xml);
    for my $elem ($dom->findnodes("*[\@$attr]")) {
        $elem->setAttribute($attr => $val);
    }
    return $dom->serialize;
$$; 
```

然后你可以像这样使用它：

```
try=# SELECT replace_attribute(
    '<foo id="blah">hi</foo>',
    'id',
    'whatever'
);
      replace_attribute      
-----------------------------
 <foo id="whatever">hi</foo>+ 
```

在 XPath 表达式 to 中有相当多的灵活性`findnodes()`，以防您需要更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-26T17:43:46.703

蟒蛇版本：

```
create or replace function replace_attrib(data xml, attr text, val text)
returns xml as
$$
import xml.etree.ElementTree as ET
r = ET.fromstring(data)
r.attrib[attr] = val
return ET.tostring(r)
$$ language plpython3u;

select replace_attrib('<foo id="blah">hi</foo>', 'id', 'whatever') 
```

# mongodb - 为什么索引的方向在 MongoDB 中很重要？

> ID：10329104
> 
> 赞同：127
> 
> 时间：2012-04-26T07:37:23.960
> 
> 标签：mongodb, performance, sorting, indexing, query-optimization

引用[文档](http://www.mongodb.org/display/DOCS/Indexes)：

> 创建索引时，与键关联的数字指定索引的方向，因此它应始终为 1（升序）或 -1（降序）。方向对于单键索引或随机访问检索无关紧要，但如果您对复合索引进行排序或范围查询，则方向很重要。

但是，我看不出为什么指数的方向对复合指数很重要。有人可以提供进一步的解释（或示例）吗？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-04-26T09:07:53.640

MongoDB 以某种方式连接复合键并将其用作 BTree 中的键。

**查找单个项目时**- 树中节点的顺序无关紧要。

**如果您要返回一系列节点**- 彼此靠近的元素将位于树的相同分支下。节点在范围内越近，检索它们的速度就越快。

**使用单个字段索引** - 顺序无关紧要。如果它们按升序接近，它们也将按降序接近。

**当您拥有复合键**时 - 顺序开始变得重要。

例如，如果键是 A 升序 B 升序，则索引可能如下所示：

```
AB行
1 1 1
2 2 6
3 2 7
4 3 4
5 3 5
6 3 6
7 5 1

```

对 A 升序 B 降序的查询将需要乱序跳转索引以返回行并且会更慢。例如它将返回 Row`1, 3, 2, 6, 5, 4, 7`

与索引顺序相同的范围查询将简单地以正确的顺序依次返回行。

在 BTree 中查找记录需要 O(Log(n)) 时间。按顺序查找一系列记录只需 OLog(n) + k，其中 k 是要返回的记录数。

如果记录乱序，成本可能高达 OLog(n) * k

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-05-28T15:11:51.783

您正在寻找的**简单答案**是方向*仅在您对两个或多个字段进行排序时才重要*。

如果您正在排序`{a : 1, b : -1}`：

索引`{a : 1, b : 1}`会*比*索引慢`{a : 1, b : -1}`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-08-11T18:42:48.107

# 为什么要索引

了解两个关键点。

1.  虽然有索引比没有索引好，但正确的索引比任何一个都好得多。
2.  MongoDB 每次查询只使用一个索引，从而使复合索引具有适当的字段排序，您可能想要使用它。

索引不是免费的。它们会占用内存，并在执行插入、更新和删除时施加性能损失。通常，性能损失可以忽略不计（尤其是与读取性能的提升相比），但这并不意味着我们不能聪明地创建索引。

# 如何建立索引

确定应该一起索引哪组字段是关于了解您正在运行的查询。用于创建索引的字段顺序至关重要。好消息是，如果你把顺序弄错了，索引根本不会被使用，所以很容易通过解释来发现。

# 为什么排序

您的查询可能需要排序。但是排序可能是一项代价高昂的操作，因此将您正在排序的字段视为您正在查询的字段非常重要。所以如果它有索引会更快。但是有一个重要的区别，您要排序的字段必须是索引中的最后一个字段。此规则的唯一例外是，如果该字段也是您的查询的一部分，那么 must-be-last-rule 不适用。

# 如何排序

您可以对索引的所有键或子集指定排序；但是，排序键的列出顺序必须与它们在索引中出现的顺序相同。例如，索引键模式 { a: 1, b: 1 } 可以支持对 { a: 1, b: 1 } 的排序，但不支持对 { b: 1, a: 1 } 的排序。

排序必须为其所有键指定相同的排序方向（即升序/降序）作为索引键模式，或者为其所有键指定相反的排序方向作为索引键模式。例如，索引键模式 { a: 1, b: 1 } 可以支持对 { a: 1, b: 1 } 和 { a: -1, b: -1 } 的排序，但不支持对 { a: -1 ，乙：1}。

假设有这些索引：

```
{ a: 1 }
{ a: 1, b: 1 }
{ a: 1, b: 1, c: 1 }

Example                                                    Index Used
db.data.find().sort( { a: 1 } )                            { a: 1 }
db.data.find().sort( { a: -1 } )                           { a: 1 }
db.data.find().sort( { a: 1, b: 1 } )                      { a: 1, b: 1 }
db.data.find().sort( { a: -1, b: -1 } )                    { a: 1, b: 1 }
db.data.find().sort( { a: 1, b: 1, c: 1 } )                { a: 1, b: 1, c: 1 }
db.data.find( { a: { $gt: 4 } } ).sort( { a: 1, b: 1 } )   { a: 1, b: 1 } 
```

# php - 如何在 Linux 上的 PHP 中将 HTML/CSS 转换为 PDF

> ID：10329119
> 
> 赞同：2
> 
> 时间：2012-04-26T07:38:31.793
> 
> 标签：php, linux, pdf, pdf-generation, wkhtmltopdf

我一直在尝试将 html 页面转换为 PDF，但没有成功，我尝试使用 wkhtmltopdf (http://code.google.com/p/wkhtmltopdf/) 和同一开发人员提供的 PHP 类 (http: //code.google.com/p/wkhtmltopdf/wiki/IntegrationWithPhp) 尽管以下命令在终端中正确执行：

```
wkhtmltopdf http:/www.googl.com test.pdf 
```

由于以下错误，我无法在 PHP 中执行命令：无法连接到 X 服务器。

任何人都可以为我提供分步教程，以便能够将 html/css 转换为 PDF 文件，无论是使用 wkhtmltopdf 还是任何其他体面的解决方案。

提前致谢

这是我使用过的类[http://code.google.com/p/wkhtmltopdf/wiki/IntegrationWithPhp](http://code.google.com/p/wkhtmltopdf/wiki/IntegrationWithPhp)

下面是我的代码

```
$html = file_get_contents("test.html");

$pdf = new WKPDF();

$pdf->set_html($html);

$pdf->render();

$pdf->output(WKPDF::$PDF_EMBEDDED,'sample.pdf'); 
```

以下是错误：

```
Fatal error: Uncaught exception 'Exception' with message 'WKPDF didn't return any data.
/usr/bin/wkhtmltopdf: /opt/lampp/lib/libxml2.so.2: no version information available
(required by /usr/lib/libgstreamer-0.10.so.0) No protocol specified wkhtmltopdf: cannot
connect to X server :0 </pre>' in /var/www/c4/components/com_wkhtmltopdf
/wkhtmltopdf.class.php:211 Stack trace: #0 /var/www/c4/components/com_wkhtmltopdf
/wkhtmltopdf.php(68): WKPDF->render() #1 /var/www/c4/components/com_wkhtmltopdf
/wkhtmltopdf.php(50): html2pdf() #2 /var/www/c4/index2.php(114): require_once('/var/ww...') 
#3 {main} thrown in /var/www/c4/components/com_wkhtmltopdf/wkhtmltopdf.class.php on line 211 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T05:32:13.690

我找到了解决方案，以下错误“未指定协议 wkhtmltopdf：无法连接到 X 服务器：0”基本上是由使用 apt-get 安装的旧版本“wkhtmltopdf”引起的。解决方案是使用以下链接从 code.google 下载静态二进制文件： [http ://code.google.com/p/wkhtmltopdf/downloads/list](http://code.google.com/p/wkhtmltopdf/downloads/list)

然后执行以下操作：

```
tar -jxvf wkhtmltopdf-0.11.0-static.tar.bz2
sudo aptitude install ia32-libs 
```

接下来，您必须在 /usr/bin 中创建一个指向 WKHTMLTOPDF 的符号链接。

```
sudo ln -s /full_path/WKHTMLTOPDF /usr/bin/WKHTMLTOPDF 
```

# javascript - 如何使用 JSDoc 在另一个私有对象中记录一个私有对象

> ID：10329120
> 
> 赞同：0
> 
> 时间：2012-04-26T07:38:36.763
> 
> 标签：javascript, jsdoc

我正在使用 jsdoc 工具包来记录一个项目，并且我在记录另一个私有对象中的私有对象的问题中。

我收到了这个警告：

> > 警告：试图将连接记录为未记录符号 testObject 的成员。

但是 testObject 在我的 Docs 输出中显示为“ {Object} testObject ”

这是javascript文件测试：

```
/* 
 * @fileOverview Various Test functions.
 * @author Regards
 */

 /**
 * @description testUtilsNameSpace 'namespace' helps 
 * @name testUtils
 * @type Object
 * @namespace
 **/
(function($) {
'use strict';

    /**
    * @description minPageReached private var
    * @private
        * @type number
    * @name testUtils#minPageReached
    * @field
    */
    var minPageReached = 0;

    /**
     * @description maxPageReached public var
     * @type number
     */
    testUtils.maxPageReached = 0;

    /**
     * @description testPrivate private function
     * @inner
     * @param {page} page Info on the page you want to request
     * @type Function
     * @memberOf testUtils
     */
    var testPrivate = function(page){
        console.log("testPrivate");
    };

    /**
     * @description testPublic public function
     * @param {page} page Info on the page you want to request
     * @type Function
     * @memberOf testUtils
     */
    testUtils.testPublic = function(page){
            console.log("testPublic");
    }

    /**
     * @description loadDependencies function
     * @type Function
     * @memberOf testUtils
     */
    var loadDependencies = function() {

    };

    /**
    * @description testObject
    * @private
    * @field
    * @name testUtils#testObject
    * @type Object
    */
    var testObject = {

            /**
             * @description connection object
             * @field
             * @name testObject#connection
             * @type Object
             */
            connection: {

            }

    }

})(window.jQuery); 
```

# ruby-on-rails-3 - 如何在 rails3 + 设计应用程序中跟踪用户活动？

> ID：10329126
> 
> 赞同：2
> 
> 时间：2012-04-26T07:39:03.850
> 
> 标签：ruby-on-rails-3, android-activity, devise, observers

我需要一个活动表来跟踪用户的各种活动，例如分析、社交功能（点击项目是投票）、安全性、调试等。

为了实现这一点，在我的带有设计 (2) 的 rails (3.2.3) 应用程序中，我想要一个表来存储当前登录用户在模型和控制器级别的所有活动。我的活动表有列 model、id、action（创建、读取、更新、销毁、获取）、actor（登录用户）和 ip（原始计算机的 IP 地址）。

设计解决方案的问题是由于 MVC 关注点分离。如果我使用观察者，我可以跟踪所有模型级别的活动，但无法获取当前用户或 ip。如果我使用应用程序过滤器，我可以获得用户和 ip 信息，但为了真正知道（例如）记录是否已保存，我必须在（例如）model.save 附近插入代码！在每个控制器的每个动作中调用。

实现这一点的最佳方法是什么？

# java - 我怎样才能重新设计这个查询？

> ID：10329127
> 
> 赞同：2
> 
> 时间：2012-04-26T07:39:04.620
> 
> 标签：java, sql, jdbc, derby

如何重新设计以下查询以避免错误：

```
String sqlQueryToMakeTable = "create table " + UserEmail + 
                                        "(" +
                                           "NameOfThePhoto varchar(255)," + 
                                            "Caption varchar(255)" +
                                         ")";
// UserEmail is of type String 
```

*UserEmail*的格式为*user@host.com*，当我执行查询时，我收到以下错误：

```
java.sql.SQLSyntaxErrorException: Lexical error at line 1, column 18\.  Encountered: "@" (64), after : "".
at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
at org.apache.derby.client.am.Connection.prepareStatement(Unknown Source)
at com.sun.gjc.spi.base.ConnectionHolder.prepareStatement(ConnectionHolder.java:562)
at com.sun.gjc.spi.jdbc40.ConnectionWrapper40.prepareCachedStatement(ConnectionWrapper40.java:255)
at com.sun.gjc.spi.jdbc40.ConnectionWrapper40.prepareCachedStatement(ConnectionWrapper40.java:52)
at com.sun.gjc.spi.ManagedConnection.prepareCachedStatement(ManagedConnection.java:964)
    ..... 
```

我理解异常的原因。我通过将电子邮件地址放在双引号中直接运行此查询，但我在这里做什么？

**编辑**我们不能在表名中有@吗？

![在此处输入图像描述](../Images/566294f86239d91536f87c60013ef3a3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:47:45.210

大多数数据库允许在表名中使用任意字符，只要将它们括在数据库的正确引号中即可。例如，

对于 MySQL：

```
"create table `" + UserEmail + "` " + 
```

对于 DB2：

```
"create table \"" + UserEmail + "\" " + 
```

对于 SQL Server：

```
"create table [" + UserEmail + "] " + 
```

对于 Derby，看起来双引号可能会起作用，就像 DB2 一样： http: [//db.apache.org/derby/docs/10.0/manuals/reference/sqlj08.html](http://db.apache.org/derby/docs/10.0/manuals/reference/sqlj08.html)

再说一次，你为什么要为每个用户创建一个表？

**更新**：通常的方法是使用单个标题表，其中还包含一些可用于识别用户的数据。例如：

```
CREATE TABLE PhotoCaptions (
    UserEmail      varchar(255),
    NameOfThePhoto varchar(255),
    Caption        varchar(255)
) 
```

然后，要查找特定用户的特定照片的标题，您可以使用如下查询：

```
SELECT Caption FROM PhotoCaptions 
WHERE UserEmail = 'email' AND NameOfThePhoto = 'photoname' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:42:26.833

您正在尝试将表名作为电子邮件地址，但您的表名中不能包含 a `@`。代替它。

但正如 arnaud 所说：您确定要为每个用户创建一个表吗？

最好制作一个包含用户 ID 的列的通用电子邮件表。

编辑：

如果使用反引号，则可以在表名中包含 @。例子：

```
create table `user@host.com` (id int); 
```

但你不应该那样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:46:01.717

我认为你应该做的是像这样引用 UserEmail 变量：

```
String sqlQueryToMakeTable = "create table \'" + UserEmail + "\'" + 
                                        "(" +
                                           "NameOfThePhoto varchar(255)," + 
                                            "Caption varchar(255)" +
                                         ")"; 
```

我认为这会奏效。mysql 中的表名可以同时具有 . 和@符号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T07:47:22.483

这取决于您使用的数据库。在sql server中你需要`[table_name]`在mysql中使用你需要`'table_name'`

这将抑制表名中的任何特殊字符含义

# android - ICS 中的首选项

> ID：10329129
> 
> 赞同：0
> 
> 时间：2012-04-26T07:39:10.827
> 
> 标签：android

我没有任何冰淇淋三明治设备，现在我正在使用菜单按钮开发应用程序以显示选项菜单。如果某些 ICS 设备（如 Galaxy Nexus）中没有菜单按钮，如何调用菜单？在这种情况下要遵循哪种模式？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:12:29.577

如果您的应用需要，ICS 在底部栏中显示一个菜单按钮。您的应用无需修改即可运行。

不过，您可以看看 ActionBar 。通过兼容性包或通过[ActionBarSherlock](http://actionbarsherlock.com/)

# php - MIME 类型检查对文件上传没用？（特别是使用 Javascript 文件 API）？

> ID：10329133
> 
> 赞同：5
> 
> 时间：2012-04-26T07:39:34.523
> 
> 标签：php, javascript, file, upload, mime

我有一个服务器脚本从 Javascript 接收上传的文件。

客户端，使用一个`File`对象（来自[W3C File API](http://www.w3.org/TR/file-upload/)）和类似于此行的代码：

```
if (file.type.indexOf("text") == 0) { ... } 
```

可以检查文件类型。显然，这使用了[MIME 类型](http://www.w3.org/TR/file-upload/#dfn-type)（返回[这些字符串](https://www.rfc-editor.org/rfc/rfc2046#section-4.1)）。

在我通过 SO 的旅程中，我冒险遇到了[这个有价值的贡献者](https://stackoverflow.com/a/370679/385273)，他认为 MIME 类型是无用的。

MIME 类型在文件上传情况下是否确实基本上无用，因此任何类型检查都应该发生在服务器端？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:12:17.323

该贡献者坚持认为*所有*MIME 类型检查都是无用的，无论是客户端还是服务器端。

在某种程度上，他是对的。MIME 类型检查始终基于嗅探文件的某些特征。他的例子：PDF 文件应该以`%PDF-1.4`. 但以 开头的文件`%PDF-1.4`不一定是 PDF 文件。（简化解释。）

用户可以将所有正确的提示放在所有正确的位置，因此 MIME 检测器会将文件检测为某种特定类型，因为它正在查看那些特定的提示。但是文件的其余部分可能完全不同。如果你走那么远，那么是什么制作了某种类型的文件呢？这一切都只是二进制 gobbledygook。最后，确保文件是 X 类型的有效文件的唯一方法是尝试使用需要 X 类型文件的解析器打开并解析它。如果解析正确，则该文件可用作 X 类型的文件。如果它像鸭子一样走路，像鸭子一样嘎嘎叫……

考虑到这一点，尝试解析文件比在服务器端嗅探 MIME 类型要好于在客户端嗅探 MIME 类型比使用用户的话来了解它是什么类型的文件要好。请注意，客户端 MIME 类型嗅探与听从用户的话一样不可靠，因为这一切都发生在客户端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T08:15:33.213

投稿人是对的。您不能仅仅依靠 MIME 类型检查来真正验证文件。它仅对快速查找有用。例如，在客户端，您可以在文件发送到服务器之前检查文件的 MIME 类型，以防用户选择错误的文件类型，节省时间和带宽。为自由使用逗号道歉！

# c++ - 将“int”或“bool”形式的标志传递给函数，在性能方面更好吗？

> ID：10329137
> 
> 赞同：1
> 
> 时间：2012-04-26T07:39:46.740
> 
> 标签：c++, function, boolean

说，我有一个如下所示的功能

```
void caller()
{
    int flag = _getFlagFromConfig();
    //this is a flag, which according to the implementation
    //is supposed to have only two values, 0 and 1 (as of now)

    callee_1(flag);
    callee_2(1 == flag);
}

void callee_1(int flag)
{
    if (1 == flag)
    {
        //do operation X
    }
}

void callee_2(bool flag)
{
    if (flag)
    {
        //do operation X
    }
} 
```

哪个被调用函数将是更好的实现？

我已经浏览了这个[链接](https://stackoverflow.com/questions/5764956/which-is-faster-if-bool-or-ifint)，我非常相信在 if 条件下使用 bool 进行比较不会对性能产生太大影响。但就我而言，我将标志作为整数。在这种情况下，是否值得为第二个被调用者？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T07:42:11.613

它在性能方面没有任何区别，但是在可读性方面，如果只有 2 个值，那么 a`bool`更有意义。特别是如果您将标志命名为`isFlagSet`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T07:46:09.317

在效率方面，它们应该是相同的。

但是请注意，它们不会做同样的事情 - 您可以传递除`1`第一个函数之外的其他内容，即使参数本身不是 false，条件也会评估为 false。额外的比较**可能会**导致*一些*开销，可能不会。

因此，让我们假设以下情况：

```
void callee_1(int flag)
{
    if (flag)
    {
        //do operation X
    }
}

void callee_2(bool flag)
{
    if (flag)
    {
        //do operation X
    }
} 
```

在这种情况下，从技术上讲，第一个变体会更快，因为`bool`值不会直接检查`true`or `false`，而是提升为字大小的类型，然后检查`0`. 尽管生成的程序集可能相同，但处理器理论上在该`bool`选项上做了更多的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T07:45:50.293

如果值或参数被用作布尔值，请声明它`bool`。它对性能产生任何影响的可能性几乎为 0，并且`bool`向读者和编译器都记录了您的意图。

此外，如果您有一个`int`which 被用作标志（由于现有接口）：使用隐式转换（如果接口将其记录为布尔值），或者将其与`0`（而不是与 `1`）进行比较。`int`这与如何用作布尔值的旧定义一致（在 C++ 之前`bool`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T07:56:23.497

bool 和 int 之间的差异导致不同（优化的）asm 的一种情况是否定运算符（“！”）。

对于“!b”，如果 b 是布尔值，编译器可以假设整数值是 1 或 0，因此否定可以是简单的“b XOR 1”。OTOH，如果 b 是整数，则编译器（除非进行数据流分析）必须假定变量可能包含任何整数值，因此要实现否定，它必须生成如下代码

```
(b != 0) ? 0: 1 
```

话虽如此，我敢肯定，否定是性能关键操作的代码非常罕见。

# performance - 将 XML 文档转换为二进制文件是什么意思？

> ID：10329143
> 
> 赞同：2
> 
> 时间：2012-04-26T07:40:17.907
> 
> 标签：performance, windows-phone-7, binary, xml

我遇到了性能问题`XDocument.Load("large_file.xml")`，加载文件大约需要 25 秒。

[我在这个问题](https://stackoverflow.com/questions/6671415/windows-phone-7-loading-a-big-xml-file)中读到，使用二进制格式可以提供高达 10 倍的性能提升。

二进制格式是什么样的？您如何将 XML 文件转换为它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:23:23.763

让我们从隐含的问题开始：

问：什么是二进制格式？

答：它是一种数据以非文本形式表示的格式。例如，Java`int`可能表示为 4 个字节，而不是十进制数字和符号的序列。

问：它看起来像什么？

A：如果你用文本编辑器/查看器查看它，它看起来像垃圾。

问：您如何将 XML 文件转换为二进制形式？

答：用手。由于二进制格式本质上是一种不是文本的格式（*任何*格式），因此没有什么神奇的方法可以转换它。

问：二进制格式如何以及为什么更快？

答：二进制格式的加载速度不会自动比 XML（或 JSON）快。这个想法是您（程序员）为您的应用程序*设计*一种特定的二进制格式，这样*可以*更快地加载。您通常通过以下方式执行此操作：

*   避免包含冗长/重复的结构信息（例如 XML 标记和属性名称），
*   使用需要较少 CPU 工作量的数据编码来转换为内存中的表示，
*   避免包含不必要的元数据，
*   避免需要额外的内存数据复制的事情，
*   等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T08:05:00.753

XML 格式有很多信息。所以它又大又慢。您可以创建自己的格式。

例如：

`<Data>Value</Data>`可以更改为仅`value`在二进制文件中的具体地址处。

# c# - 尝试使用 Python 从工作 C# 代码生成 RSA 签名

> ID：10329147
> 
> 赞同：1
> 
> 时间：2012-04-26T07:40:36.253
> 
> 标签：c#, python, encryption, rsa, pycrypto

我正在使用其他人的代码生成用于在 xbox 360 保存文件中进行验证的 RSA 签名。该代码从文件中读取所需的值并正确生成签名。

代码是：

```
 byte[] xHash=null;
    RSAParameters xParams = new RSAParameters();
    br.BaseStream.Position = 0x1A8;
    xParams.D = br.ReadBytes(0x80);
    xParams.Exponent = br.ReadBytes(0x4);
    xParams.Modulus = br.ReadBytes(0x80);
    xParams.P = br.ReadBytes(0x40);
    xParams.Q = br.ReadBytes(0x40);
    xParams.DP = br.ReadBytes(0x40);
    xParams.DQ = br.ReadBytes(0x40);
    xParams.InverseQ = br.ReadBytes(0x40);
    br.close();

    br=new BinaryReader(File.OpenRead(f));
    br.BaseStream.Position=0x22c;
    xHash = new SHA1CryptoServiceProvider().ComputeHash(br.ReadBytes(0x118));
    byte[] xrsa=SignatureGenerate(xParams, xHash);

public static byte[] SignatureGenerate(RSAParameters xParam, byte[] xHash)
        {
            RSACryptoServiceProvider xRSACrypto = new RSACryptoServiceProvider();
            RSAPKCS1SignatureFormatter xRSASigFormat = new RSAPKCS1SignatureFormatter();
            xRSACrypto.ImportParameters(xParam);
            xRSASigFormat.SetHashAlgorithm("SHA1");
            xRSASigFormat.SetKey(xRSACrypto);
            return xRSASigFormat.CreateSignature(xHash);

        } 
```

我试图结束 中的内容`xrsa`，但使用 Python。我安装了 pycrypto，我正在查看文档，但我仍然缺少一些明显的东西。首先，来自 Crypto.PublicKey 的 RSA.construct 只需要六个参数，而不是指数一和二（DP 和 DQ）。此外，输入需要很长。在 C# 代码中，值是 128 和 64 字节长，而不是 4 字节长。

我知道这似乎很明显，但我不知道我需要做什么。

我正在使用 Python 2.7.3

编辑：另外，要加密的“消息”是文件的 0x118 字节的 sha1 哈希，其中包含元数据和文件其他部分的哈希。

编辑：非常感谢mata，我觉得我离让它工作更近了。它仍然与 C# 签名不匹配。在 C# 中，签名格式设置为 SHA1。这是在做什么，可以在 Python 中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:52:57.930

好的，首先：python 中的 long 不是 4 字节。在 python 中，long 没有预定义的大小，所以使用 long 存储一个 128 字节的数字是没有问题的。要将字节串转换为 long，您可以使用：

```
long_value = long(string_value.decode('hex'), 16)
# maybe someone knows a better way? 
```

难道不是文件是DER形式吗？在这种情况下，您只需使用以下命令简单地读取文件：

```
from Crypto.PublicKey import RSA
with open("keyfile", "rb") as f:
    key = RSA.importKey(f.read()) 
```

如果没有，最好将其转换为 PEM 或 DER，因此您不必自己读取参数。[无论如何， RSA.construct](https://www.dlitz.net/software/pycrypto/api/current/Crypto.PublicKey.RSA-module.html#construct)中的最后三个参数是可选的，特别`u`可以计算为`1/p % q (where p > q)`. 至少从我的尝试来看，即使您只指定前三个参数，它也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T06:17:24.330

我尝试了 pycrypto 和另一个库，但只得到了我想要使用 M2Crypto 的东西。

在 Windows 上安装 M2Crypto 是一件非常痛苦的事情，但使用此处的安装文件非常容易：

[http://chandlerproject.org/bin/view/Projects/MeTooCrypto](http://chandlerproject.org/bin/view/Projects/MeTooCrypto)

Windows 安装程序的下载链接在这里：[http ://chandlerproject.org/pub/Projects/MeTooCrypto/M2Crypto-0.21.1.win32-py2.7.exe](http://chandlerproject.org/pub/Projects/MeTooCrypto/M2Crypto-0.21.1.win32-py2.7.exe)

# md5 - 是否有可能使用 md5 生成相同的哈希键？

> ID：10329150
> 
> 赞同：0
> 
> 时间：2012-04-26T07:40:58.377
> 
> 标签：md5, unique-key, api-key

我正在使用此功能生成唯一的 api 密钥并存储到数据库中。

```
strtoupper( md5( uniqid(rand(), TRUE ) ) ); 
```

是否有可能通过上述函数生成相同的哈希键？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:45:27.417

uniqid 是以毫秒为单位的时间，将其与随机前缀结合起来，这是极不可能的。

有关 uniqid 的更多信息，请参见下文： [PHP: uniqid - Manual](http://php.net/manual/en/function.uniqid.php "PHP: uniqid - 手册")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:47:44.553

尽管uniqueid函数生成的唯一值确实非常唯一，但是在使用MD5哈希算法时还是有相当大的可能发生冲突（即不同的值会产生相同的哈希值）。事实上，MD5 被[US-CERT](http://www.kb.cert.org/vuls/id/836068)认为是“密码损坏且不适合进一步使用” ，如果您担心冲突，您应该考虑改用 SHA256/SHA512 算法。

# c# - 当 XML 属性等于 XSD（.Net C#）中的默认值时，如何强制写入 XML 属性

> ID：10329155
> 
> 赞同：0
> 
> 时间：2012-04-26T07:41:47.583
> 
> 标签：c#, xml, serialization, xml-attribute

我有一个定义了以下类型的 XSD：

```
<xs:complexType name="AttributeValue">
    <xs:simpleContent>
        <xs:extension base="xs:string">
            <xs:attribute name="type"
                type="ns:MyType" 
                default="Value"/> 
```

我想`XmlSerializer`用这些 attributeValue 类型之一编写一个通过 XSD.exe 创建的 C# 对象。`type`即使它等于默认值，是否可以强制序列化程序写出属性？

请注意，我无法修改 XSD，我想避免修改通过 XSD.exe 生成的 C# POCO，因为这将在未来发生变化，我想避免维护开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:15:00.140

This is by-design. [Here](http://support.microsoft.com/kb/325691) is the reply from MS. Suggested workaround is to comment out/remove the **System.ComponentModel.DefaultValueAttribute** for the attribute field. The KB article says that "Microsoft plans to change this behavior in the next major version release of the .NET Framework.", but it looks like they didn't.

# cobol - 通过 JCL 将 SYSUID 和 JOB ID 作为参数传递给 COBOL 程序

> ID：10329158
> 
> 赞同：2
> 
> 时间：2012-04-26T07:42:05.357
> 
> 标签：cobol, jcl

我需要将 SYSUID 和 JOBID 传递给 cobol 程序以进行记录，这怎么可能？

可以作为 JCL 中查询的输入传递。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T11:57:13.400

SYSUID 很简单，只需将其添加到[EXEC](https://www.ibm.com/docs/en/zos/2.4.0?topic=reference-exec-statement)语句的[PARM](https://www.ibm.com/docs/en/zos/2.4.0?topic=statement-parm-parameter)参数中即可。

```
//ASTEP EXEC PGM=A#PGM,PARM='&SYSUID' 
```

JOBID 不能作为参数使用。如果需要，您将不得不编写 COBOL 代码来链接 z/OS[控制块](https://www.ibm.com/docs/en/zos/2.4.0?topic=zos-mvs)（请参阅该链接中的数据区书籍）。这可以做到，但我不建议这样做。

如果你真的想得到作业编号，你可以编写代码去到 PSA 控制块，它位于相对内存位置 0。从那里你得到一个指向当前 TCB 的指针，它位于 PSA 的 PSATOLD 字段中，从TCB 你得到 TCBJSCBB 字段，它是一个指向 JSCB 的指针，从 JSCB 中的 TCBJSCBB 字段你得到一个指向 SSIB 的指针，它包含 SSIBJBID 字段，它是作业号。所有这些控制块 PSA、TCB、JSCB 和 SSIB 都记录在上面的链接中（对于 z/OS 2.4）。我重申我不建议这样做。

Longpela有一个关于通过 z/OS 控制块链接的教程，[分为两](http://www.longpelaexpertise.com.au//ezine/CtBlksBeginners1.php) [部分](http://www.longpelaexpertise.com.au/ezine/CtBlksBeginners2.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T21:31:32.027

我同意@cschneid 的观点，即您不想为了获得工作编号而进行所有的指针链接。当然，我们在创建“横幅页面打印”程序时确实这样做了。我们基于[http://gsf-soft.com/Freeware/COB2JOB.shtml](http://gsf-soft.com/Freeware/COB2JOB.shtml)上的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T04:01:43.030

如果您对在 LINKAGE SECTION、REDEFINE-ing POINTER 和 COMP-5 项目中使用 SET ADDRESS OF 项目感到满意，以及从汇编程序 DSECT 创建 01 级结构，那么一定要这样做。作为一个轻量级的 COBOL 子例程，它的开销并不比汇编例程多多少（但汇编器更好）。如果您对 REXX STORAGE 功能感到满意，可以查看 Dave Alcock 的 IPLINFO 程序。

However, if the COBOL language constructs I mentioned are unknown to you, then write an assembler subroutine, or ask someone to write it.

# java - 当我在 Java 中只有一个对象的引用时，如何将一个对象分配给另一个对象？

> ID：10329162
> 
> 赞同：3
> 
> 时间：2012-04-26T07:42:19.407
> 
> 标签：java, list, variable-assignment

我正在使用 Java，并且有各种对象，我列出了如下列表：

```
objx   o1;
objx   o2;
objx   o3;

objx olist [] = { o1, o2, o3 }; 
```

现在我想将其他对象分配给原始对象 o1-o3 但使用列表。

就像是：

```
olist[0] = onew; 
```

但在这种情况下，只有列表被更改，而不是原始对象 o1。我怎样才能在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:46:15.130

你不能。`o1`只是对堆中某个地址的引用，如果您分配`o1`另一个值，它只是指向另一个地址。

如果您需要更改对象`o1`指向的“内容”，则必须更改（可能通过设置器）其属性的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:53:58.473

你不能。但是，您可以只存储数组，然后您就可以更改在数组的每个位置引用的对象。

例如

```
objx olist[] = new objx[ 3 ];

olist[ 0 ] = new objx( );
olist[ 1 ] = new objx( );
olist[ 2 ] = new objx( ); 
```

然后稍后您可以通过索引数组来更改任何引用的对象：

```
...

olist[ 1 ] = onew; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T07:57:14.313

您必须使用容器对象。即包含对“objx”对象的引用的对象。最简单的容器对象是一个元素的数组，但它是一种极其丑陋且容易出错的解决方案。

请注意，为简洁起见，我省略了访问器方法。您通常不应该像我在这里那样使用直接成员访问。

```
public class ObjxContainer {
    public Objx objx;
}

...

ObjxContainer o1;
ObjxContainer o2;
ObjxContainer o3;
ObjxContainer[] arr = new ObjxContainer[] { o1, o2, o3 }; 
```

现在，访问 ObjxContainer 中的 objx 将产生您想要的效果：

```
arr[0].objx = new Objx(); 
```

# arrays - Delphi：TImage 数组

> ID：10329171
> 
> 赞同：4
> 
> 时间：2012-04-26T07:43:23.547
> 
> 标签：arrays, image, delphi

这是我的整个代码：

```
 unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls;

type
  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;
  Images: array[0..29,0..39] of TImage; //array
implementation

{$R *.dfm}
//form create
procedure TForm1.FormCreate(Sender: TObject);
var xx,yy: Integer; //local variables
begin
        for xx:=0 to 29 do
                for yy:=0 to 39 do
                        begin
                             Images[xx,yy]:=Timage.Create(Form1);
                             Images[xx,yy].Canvas.Rectangle(0,0,17,17);
                             Images[xx,yy].Left:=xx*16;
                             Images[xx,yy].Top:=yy*16;
                        end;
end;

end. 
```

而且我总是收到错误消息：“ ***Project Project1.exe 引发了异常类 EClassNotFound，并带有消息“TImage not found”。进程已停止。使用 step 或 run 继续***“

我在互联网上尝试过其他代码，例如：
[Delphi：TImage.Create 导致访问冲突](https://stackoverflow.com/questions/1036590/delphi-timage-create-causes-access-violation)
[http://www.delphi-central.com/tutorials/memory_game_2.aspx](http://www.delphi-central.com/tutorials/memory_game_2.aspx)

没有什么帮助！为什么会这样？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T07:53:17.117

你确定你在 TImage.Create 的那一行得到了异常吗？难道你有一个无效的 DFM 文件仍然包含 TForm1 声明中缺少的 TImage 实例？

通常，在表单或数据模块中用作子级的所有类都会自动注册以进行流式传输。由于表单中没有声明 TImage，并且应用程序的其他表单中没有包含 TImage，因此没有注册。

您可以通过将 TImage 拖放到表单上来简单地进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:16:55.323

如果你想以表格形式显示，请将此代码添加到循环中：

```
Images[xx,yy].Parent:= Self; 
```

# apache - PHP、Apache、MySQL老版本安装

> ID：10329184
> 
> 赞同：0
> 
> 时间：2012-04-26T07:44:22.790
> 
> 标签：apache

我需要在我的电脑上安装 PHP 5.1.6、MySQL 5.0.95 和 Apache/2.2.3。我在哪里可以得到这些版本？我试图在 Wamp 上安装 Apache 2.3.3。问题是它已安装，但它不想与 PHP 5.1.6 一起运行。当我尝试选择 PHP 5.1.6 版本时，我收到以下消息：

```
This version doesn't seem to be compatible with your actual Apache version. 
```

我该怎么做才能让它发挥作用？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:09:58.067

我发现在 Windows 操作系统上将该 PHP 版本与该 Apache 版本相结合是有问题的。我已经通过使用 Apache 2.0.x 解决了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:55:24.273

为什么不尝试单独安装它们？

*   Apache 2.2.22（找不到 2.2.3）：[http ://mirror.mkhelif.fr/apache//httpd/binaries/win32/](http://mirror.mkhelif.fr/apache//httpd/binaries/win32/)
*   PHP 5.1.6： http: [//museum.php.net/php5/](http://museum.php.net/php5/)
*   MySQL 5.0.96（找不到95）：[http ://dev.mysql.com/downloads/mysql/5.0.html](http://dev.mysql.com/downloads/mysql/5.0.html)

# deployment - MSTest 部署不适用于“../../path”，但适用于 Visual Studio 2010 上的完整路径

> ID：10329190
> 
> 赞同：0
> 
> 时间：2012-04-26T07:44:41.747
> 
> 标签：deployment, mstest, relative-path

我遇到了 MSTest 部署问题，我将文件夹部署设置为**“..\MyProject\bin\debug\”**

我知道此路径与测试解决方案目录（在我的情况下为 C:\dev\MyApplication\Tests）相关，并且它 在部署 GUI 中显示为**>Solution Directory>..\MyProject\bin\debug\ 。**

问题是根本没有错误，但没有复制文件夹或文件。**但是，如果我像这样C:\dev\myApplication\MyProject\bin\debug\**放置完整路径， 我会收到一条警告，它无法在其他计算机上运行，​​因为它位于解决方案文件夹之外。尽管有这个警告，它仍然有效，并且我的调试文件夹中的所有文件都被复制了。问题是我想要相对路径，因为团队中的每个人都有一个不同的解决方案的根路径。任何想法 ？？？

我忘了提到这个项目是从它工作的VS2008迁移到我遇到这个问题的vs2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:29:41.533

默认情况下，relativeroot 是解决方案目录。所以这应该是“MyProject\bin\debug\”

# oracle - 定义主键、Hibernate 逆向工程、Oracle 序列

> ID：10329193
> 
> 赞同：-1
> 
> 时间：2012-04-26T07:44:43.353
> 
> 标签：oracle, hibernate, netbeans, reverse-engineering

我想使用hibernate（Netbeans）生成java类。当表没有主键时，这似乎是不可能的。

我无法访问数据库，我刚刚发现，他们使用序列而不是主键。

```
create sequence SEQ_ANY
minvalue 0
maxvalue 99999999999999999999
start with 0
increment by 1000
cache 20; 
```

所以我现在的问题是，我可以编辑 hibernate.hbm 或 hibernate.cfg.xml 或任何其他文件来告诉 hibernate 哪个类包含主键吗？铁

```
<table name="myTable">
<useThisFieldAsPrimaryKey name="uniqueSequenz"/>
</table> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:47:32.917

序列是一个对象，可为您提供主要可能的唯一值。因此，您的表可能有一个由单列组成的主键。

然后每个表都有一个主键（在最坏的情况下，所有列一起形成主键 - 这通常是一个糟糕的数据库设计）。一个主键可以有多个列。

Hibernate 喜欢由单列组成的主键。不过，您可以在 Hibernate 中定义由多个列组成的复合键。

您需要表的架构。如果没有，你会被卡住。

# spring - 在同一 XML 文件中的 JPA 中配置多个持久性单元

> ID：10329195
> 
> 赞同：4
> 
> 时间：2012-04-26T07:44:51.513
> 
> 标签：spring, jpa

我有两个数据库 A，BI 在数据库 A 中有一个名为 asample 的表，在数据库 B 中有一个名为 bsample 的表。现在我想将 B 数据库的 bsample 表中的数据传输到 A 数据库的 asample 表。为此，我必须在我的 persistence.xml 文件中使用两个持久性单元。我正在使用 JPA，Spring。我是 jpa 的新手。谁能告诉我如何实现这一目标。

如果我使用下面提到的代码，我会收到此异常：

```
ERROR: org.springframework.web.servlet.DispatcherServlet - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0' defined in ServletContext resource [/WEB-INF/classes/META-INF/spring-context/dao-DB1.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mediationEntityManagerFactory' defined in ServletContext resource [/WEB-INF/classes/META-INF/spring-context/dao-DB2.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: DB2] Unable to build EntityManagerFactory
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:710)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:410)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:442)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:458)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:339)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:306)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:127)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mediationEntityManagerFactory' defined in ServletContext resource [/WEB-INF/classes/META-INF/spring-context/dao-DB2.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: DB2] Unable to build EntityManagerFactory
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(DefaultListableBeanFactory.java:398)
    at org.springframework.beans.factory.BeanFactoryUtils.beansOfTypeIncludingAncestors(BeanFactoryUtils.java:275)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:139)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
    at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:99)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1439)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1408)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    ... 26 more
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: DB2] Unable to build EntityManagerFactory
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:900)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:225)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:308)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 41 more 
```

我将两个持久性单元放在了我的 persistence.xml 文件中，并且我有两个 dao 文件，分别为 dao-DB1.xml、dao-DB2.xml，我正在配置 EntityManager，如答案中所述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T13:36:31.613

Spring 提供 PersistenceUnitManager 来充当中央存储库并避免（可能很昂贵）持久性单元发现过程。默认实现允许指定多个位置。

```
<bean id="pum" class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
  <property name="persistenceXmlLocation">
    <list>
     <value>org/springframework/orm/jpa/domain/persistence-multi.xml</value>
     <value>classpath:/my/package/**/custom-persistence.xml</value>
     <value>classpath*:META-INF/persistence.xml</value>
    </list>
  </property>

</bean>

<bean id="emf" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <property name="persistenceUnitManager" ref="pum"/>
</bean> 
```

来源 - [Spring orm jpa](http://static.springsource.org/spring/docs/2.5.x/reference/orm.html#orm-jpa)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T11:18:40.930

具有两个数据源的示例`persistence.xml`，在本例中是两个 Oracle 数据库，使用 hibernate 作为 JPA 提供程序：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="2.0">
<persistence-unit name="DB1" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="javax.persistence.jdbc.driver" value="oracle.jdbc.driver.OracleDriver"/>
        <property name="javax.persistence.jdbc.url" value="jdbc:oracle:thin:@server:port:sid"/>
        <property name="javax.persistence.jdbc.user" value="username"/>
        <property name="javax.persistence.jdbc.password" value="password"/>
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
    </properties>
</persistence-unit>
<persistence-unit name="DB2" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <!-- same as above, different properties -->
    </properties>
</persistence-unit>
</persistence> 
```

如果你想通过 spring 配置持久化单元，你可以这样做：

```
<bean id="DB1" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
    <property name="url" value="jdbc:oracle:thin:@server:port:sid"/>
    <property name="username" value="username"/>
    <property name="password" value="password"/>
</bean>

<bean id="DB2" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <!-- same as above, different properties --> 
</bean>

<bean id="DB1entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="DB1-unit"/>
    <property name="dataSource" ref="DB1"/>
    <property name="persistenceProviderClass" value="org.hibernate.ejb.HibernatePersistence"/>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
    </property>
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
        </props>
    </property>
</bean>

<bean id="DB2entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="DB2-unit"/>
    <property name="dataSource" ref="DB2"/>
    <!-- same as above -->
</bean> 
```

# jquery - 选择的搜索不适用于 Jquery 对话框。为什么？

> ID：10329196
> 
> 赞同：3
> 
> 时间：2012-04-26T07:44:53.557
> 
> 标签：jquery, jquery-ui, dialog, jquery-chosen

这是我的代码

```
 var dlg = $("#transfer_client").dialog({
                dialogClass: "templateDialog",
                autoOpen: false,
                modal: true,
                zIndex: 1500,
                height: 200,
                width: 200,
                title: "Transfer Campaign to a different Client"
            });

        dlg.parent().appendTo(jQuery("form:first")); 
```

其中 transfer_client 是 div 代码是：

```
 <div id="transfer_client" class="dialog position" title="Transfer to a different Client">
    <span>Client:</span>
    <asp:DropDownList runat="server" Height="30px" ID="ddlClients" DataTextField="ClientName"
        DataValueField="ClientID">
    </asp:DropDownList>
    <br />
    <br />
    <asp:Button runat="server" OnClientClick="return confirmSubmit();" ID="btnTranfer"
        Text="Transfer" OnClick="btnTranfer_Click" />
</div> 
```

我已经尝试过`$("#dropDownID").chosen()`，之后`dlg.parent().appendTo(jQuery("form:first"));` 或之前，但它不能使其可搜索。但是在没有任何对话框的情况下使用代码可以正常工作。知道如何让它在对话框中工作吗？

**编辑**：标记为已解决，因为这是对话框 js 中的一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T10:08:52.560

你看过[github 上的 issue #18](https://github.com/harvesthq/chosen/issues/18)吗？

它解决了我的类似问题，基本上归结为增加搜索框的 CSS `z-index`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T07:00:05.883

试试这个

```
.chosen-container .chosen-results {
    position: fixed;
    z-index: 23423423423;
    height: 200px;
    width: 300px;
    background-color: white;
} 
```

# batch-file - 为特定用户运行 .bat

> ID：10329198
> 
> 赞同：0
> 
> 时间：2012-04-26T07:45:04.837
> 
> 标签：batch-file, windows-xp, authentication, logoff

我有一个 Excel 文件说 Log.xls，它跟踪他的登录和注销时间。我想在特定用户登录以及注销时打开它。

我为此找到了解决方案，

1.  写一个 .bat 文件说 OpenLog.bat 打开 Log.xls

    ```
    @ECHO OFF 
    @ECHO "Please Wait, Your log file is about to open... Please Fill Your Work Log..."
    @CD E:\Anoop\Documents
    @CALL Log.xls
    @ECHO "Have a nice time" 
    ```

2.  运行 gpedit.msc

    在用户配置 -> Windows 设置 -> 打开脚本下

    向其中添加 Bat 文件名。

我希望这个 Log.xls 在我的 Windows XP 机器上为特定用户帐户运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:52:43.270

好的，假设用户名是“John”

```
@ECHO OFF
if '%username%' == 'John' goto label1 else exit
label1:
ECHO "Please Wait, Your log file is about to open... Please Fill Your Work Log..."
CD E:\Anoop\Documents
CALL Log.xls
ECHO "Have a nice time" 
```

# java - 无法从输入 URL 获取音频输入流

> ID：10329205
> 
> 赞同：1
> 
> 时间：2012-04-26T07:45:37.713
> 
> 标签：java, runtime-error, javasound

我正在尝试使用以下代码在 Java 中运行声音文件：

```
 public class Audio3
  {
     public static void main(String[] args) throws Exception
      { 
        URL soundFile =new URL( 
          "http://everyayah.com/data/Ghamadi_40kbps/audhubillah.mp3");
        AudioInputStream ais = AudioSystem.getAudioInputStream(soundFile);
        AudioPlayer.player.start(ais);
      }
  } 
```

我得到了这个例外

```
javax.sound.sampled.UnsupportedAudioFileException: 
    could not get audio input stream from input URL 
```

知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:13:07.863

根据[JavaSound 信息。页](https://stackoverflow.com/tags/javasound/info)。

> ## MP3解码支持
> 
> Java Sound API 在内部不支持多种格式的采样声音。在 1.6.0_24 Oracle JRE`getAudioFileTypes()`通常会返回 { `WAVE, AU, AIFF`}。至少一个 MP3 解码器就在附近。**Java Media Framework 支持解码 MP3** **。`mp3plugin.jar`**

我可以保证这些信息，因为我已经使用 Java Sound 和 MP3 SPI 成功加载了 MP3（并且还写了 info.page ;)）。JMF 安装程序下载变得越来越难找到，但您可以[`mp3plugin.jar`](http://pscode.org/lib/mp3plugin.jar)直接从我放置它的地方获取，以便在 JWS 应用程序中使用。

# templates - 更改 NetBeans 自动生成的代码

> ID：10329207
> 
> 赞同：0
> 
> 时间：2012-04-26T07:45:48.937
> 
> 标签：templates, netbeans, auto-generate

NetBeans 有一些很棒的特性，比如自动生成代码。但是，我想更改一些缺少的东西。我的一种做法是在生成的代码中添加注释，告诉我它是什么。例如说我正在用 php 编写并自动为一个对象生成一个构造函数。最终结果将像这样自动生成：

```
function __construct(){}; 
```

但是，如果我希望 NetBeans 像这样在旁边生成注释怎么办：

```
//constructor
function __construct(){}; 
```

是否可以更改 NetBeans 中的某些内容来实现这一点？可能是模板？如果是这样，哪个模板文件以及我应该如何更改它以满足我的需要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:51:33.987

你可以去工具->选项->编辑器->代码模板。
您选择语言 php。
在那里你可以看到模板。您可以更改它们或添加您的。

# iphone - 将 Webservice 数据缓存到核心数据中

> ID：10329215
> 
> 赞同：0
> 
> 时间：2012-04-26T07:46:24.560
> 
> 标签：iphone, ios, web-services, core-data

将Web服务数据缓存到核心数据的好方法是什么。主要目标是当设备在线或发生一些更新并且用户也能够离线获取数据时将Web服务数据同步到核心数据中。那么如何那件事将实施任何好的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:54:25.103

我已经做到了。我的过程是使用网络客户端（在我的例子中是 AFNetworking），然后在成功请求后，我会执行以下操作：

从核心数据实体中删除所有对象

在 AppDelegate 中创建一个 NSOperationQueue 并使用一个自定义 Parser 类，该类实例化一个新的 ManagedObjectContext 以在后台线程上使用

解析来自 Web 服务的响应，并使用后台线程将对象插入回 CD 实体中

```
// Register context with the notification center
NSNotificationCenter *nc = [NSNotificationCenter defaultCenter]; 
[nc addObserver:self
       selector:@selector(mergeChanges:) 
           name:NSManagedObjectContextDidSaveNotification
          object:ctx]; 
```

然后当我保存托管对象时（我每五次保存一次），通知将被发送并且此方法将被触发：

```
- (void)mergeChanges:(NSNotification *)notification
{
    id appDelegate = [[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *mainContext = [appDelegate managedObjectContext];

    // Merge changes into the main context on the main thread
    [mainContext performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:) 
                              withObject:notification
                           waitUntilDone:NO];
} 
```

这将主要在后台更新核心数据实体，然后在主线程中合并更改（每五个“记录”）。我为用户提供的初始 UI 是一个 TableView，它依赖于更新的核心数据实体，并且更新速度足够快，用户能够在新数据进入时使用 tableview（FetchedResultsController 将管理新数据的插入电视中的行）。

如果需要，我可以发送更多代码，但其要点是使用 NSOperationQueue 解析在后台线程上创建的托管对象，然后使用主线程的 MOC 每隔一段时间（在我的情况下为 5 条记录）将更改合并到上下文中.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:23:23.110

试试 RestKit：[http: //restkit.org/](http://restkit.org/)

> RestKit 的主要目标是允许开发人员更多地考虑其应用程序的数据模型，而不必担心发送请求、解析响应和构建远程资源表示的细节。

# sql - Oracle 11 中的递归 SQL 选择查询

> ID：10329221
> 
> 赞同：2
> 
> 时间：2012-04-26T07:47:04.327
> 
> 标签：sql, oracle, hierarchical-data

我有 4 个不同的表`bommodule`，`bomitem`和`mapbomitemmodule`，`mapbomparentsubmodule`。

**bommodule 表**：

```
CREATE TABLE "BOMMODULE"
(
  "MODULEID"         NUMBER(10,0) NOT NULL ENABLE,
  "ISROOTMODULE"     NUMBER(1,0) NOT NULL ENABLE,
  "MODULENAME"       VARCHAR2(255 CHAR),
  .....
) 
```

**bomitem 表：**

```
CREATE TABLE "BOMITEM"
  (
    "ITEMID"     NUMBER(10,0) NOT NULL ENABLE,
    ....
  ) 
```

**mapbomitemmodule-table：（**此表将项目映射到一个或多个模块）。

```
CREATE TABLE "SSIS2"."MAPBOMITEMMODULE"
  (
    "ITEMID"   NUMBER(10,0) NOT NULL ENABLE,
    "MODULEID" NUMBER(10,0) NOT NULL ENABLE,
    CONSTRAINT "MAP_ITEM_MODULE_FK" FOREIGN KEY ("ITEMID") REFERENCES "BOMITEM" ("ITEMID") ENABLE,
    CONSTRAINT "MAP_MODULE_ITEM_FK" FOREIGN KEY ("MODULEID") REFERENCES "BOMMODULE" ("MODULEID") ENABLE
  ) 
```

**mapbomparentsubmodule-table：（**此表将模块映射到子模块）

```
CREATE TABLE "MAPBOMPARENTSUBMODULE"
  (
    "PARENTMODULEID" NUMBER(10,0) NOT NULL ENABLE,
    "SUBMODULEID"    NUMBER(10,0) NOT NULL ENABLE,
    CONSTRAINT "PARENTMODULE_SUBMODULE_FK" FOREIGN KEY ("SUBMODULEID") REFERENCES "BOMMODULE" ("MODULEID") ENABLE,
    CONSTRAINT "SUBMODULE_PARENTMODULE_FK" FOREIGN KEY ("PARENTMODULEID") REFERENCES "BOMMODULE" ("MODULEID") ENABLE
  ) 
```

所以想象一个像这样的结构。

```
root module
  submodule 1
    submodule 2
      submodule 3
        submodule 4
          submodule 5
          item 5
          item 6
          item 7
      item 2
      item 3
      item 4
  item 1 
```

我需要找出属于特定 moduleId 的所有项目。应列出所有子模块级别的所有项目。

我怎样才能做到这一点？我使用 Oracle 11 作为数据库。

非常感谢您的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:39:35.850

谢谢你的有趣问题

**1步。**为规范的 oracle 层次结构准备表。

```
select PARENTMODULEID, SUBMODULEID, 1 HTYPE
from MAPBOMPARENTSUBMODULE

union all

select null, MODULEID, 1 --link root to null parent
from BOMMODULE B
where ISROOTMODULE = 1

union all 

select MODULEID, ITEMID, 2
from MAPBOMITEMMODULE 
```

**2步。**通过使用扩展层次结构`connect by`

```
select PARENTMODULEID
      ,SUBMODULEID
      ,HTYPE
      ,level
      ,lpad('|', level*3, '|')
from
(
    select PARENTMODULEID, SUBMODULEID, 1 HTYPE
    from MAPBOMPARENTSUBMODULE

    union all

    select null, MODULEID, 1
    from BOMMODULE B
    where ISROOTMODULE = 1

    union all 

    select MODULEID, ITEMID, 2
    from MAPBOMITEMMODULE
) ALL_HIER
connect by prior SUBMODULEID = PARENTMODULEID
       and prior HTYPE = 1 --parent is always module
start with ALL_HIER.PARENTMODULEID is null
order siblings by HTYPE 
```

**3步。**最后的。加入值表。

```
select PARENTMODULEID
      ,SUBMODULEID
      ,HTYPE
      ,ALL_VAL.VAL
      ,level
      ,rpad('|', level * 3, ' ') || ALL_VAL.VAL
from
(
    select PARENTMODULEID, SUBMODULEID, 1 HTYPE
    from MAPBOMPARENTSUBMODULE

    union all

    select null, MODULEID, 1
    from BOMMODULE B
    where ISROOTMODULE = 1

    union all 

    select MODULEID, ITEMID, 2
    from MAPBOMITEMMODULE
) ALL_HIER
,(
    select MODULEID VAL_ID, MODULENAME VAL, 1 VTYPE
    from BOMMODULE

    union all

    select ITEMID, 'item '||ITEMID, 2
    from BOMITEM
) ALL_VAL
where ALL_VAL.VAL_ID = ALL_HIER.SUBMODULEID
  and ALL_VAL.VTYPE = ALL_HIER.HTYPE
connect by prior SUBMODULEID = PARENTMODULEID
       and prior HTYPE = 1
start with ALL_HIER.PARENTMODULEID is null
order siblings by HTYPE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:02:17.680

首先使用 CONNECT BY 子句调查[分层查询的使用。](http://docs.oracle.com/cd/E18283_01/server.112/e17118/queries003.htm)它专为这种类型的模型而设计。

多表原理与单表相同：

一世。您确定“起始行”。
ii. 您可以根据“当前”集定义识别下一级行的逻辑。

在某些情况下，它可以帮助在内联视图中定义分层查询，特别是当单个表包含识别起始行和级别之间的连接所需的所有数据时。

这些查询总是很棘手，并且与许多 SQL 问题一样，它通常有助于从简单开始并增加复杂性。

# button - 使用选项卡聚焦时的gmail登录按钮白色边框

> ID：10329223
> 
> 赞同：0
> 
> 时间：2012-04-26T07:47:17.417
> 
> 标签：button, css

请告诉我如何获得这种效果的代码？我有 gmail 按钮代码 [http://cssdeck.com/item/50/google-buttons](http://cssdeck.com/item/50/google-buttons)，但这并没有显示我想要的效果。我检查了谷歌代码。他们没有使用按钮而不是使用按钮来`div`获得更好的性能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:06:43.097

我找到了答案。我需要添加下面的 css 代码来获得按钮的焦点效果。

> .button:focus{ box-shadow: 0 0 0 1px #FFFFFF inset; }

# javascript - jQuery相互覆盖，noConflict不起作用

> ID：10329225
> 
> 赞同：0
> 
> 时间：2012-04-26T07:47:25.710
> 
> 标签：javascript, jquery

我的页面上有 3 个 jquery 脚本。菜单的第二个脚本干扰了第三个脚本，即轮播。当我取出第二个脚本时，轮播再次工作。我尝试放入 noConflict，但也许我把它放在错误的地方，因为它破坏了更多的东西。这是我的代码：

```
<script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('.flexslider').flexslider();
  });
</script>

<script type="text/javascript">
$.noConflict();
jQuery(document).ready(function($){

    $('#main-menu').prepend('<div id="menu-icon">Menu</div>');

    $("#menu-icon").on("click", function(){
        $("#nav").slideToggle();
        $(this).toggleClass("active");
    });

});
</script>

<script type="text/javascript" language="javascript" src="js/jquery.carouFredSel-5.5.0-packed.js"></script>
<script type="text/javascript" language="javascript">
    $(function() {
        $('#foo4').carouFredSel({
            responsive: true,
            width: '100%',
            scroll: 2,
            items: {
                width: 400,
                    visible: {
                    min: 6,
                    max: 6
                }
            }
        });

    });
</script> 
```

# android - 为什么“78.137.18”没有被拒绝为无效的IP地址？

> ID：10329227
> 
> 赞同：1
> 
> 时间：2012-04-26T07:47:41.027
> 
> 标签：android, sockets, exception, exception-handling

当我的 android 程序中发生异常时，我正在尝试在套接字的异常块中打印一些东西。

但是，即使我提供了一个无效的 IP 地址，我的异常也不会被调用。

```
 try{
      SocketAddress socketAddress = new InetSocketAddress("78.137.18" , 8364);
      } 
      catch (Exception e)
      {
        System.out.println("ERROR");
      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T07:54:18.397

这实际上是一个有效的 IP 地址。

```
mslade@mickpc:~$ perl -nle 'use Socket; print inet_ntoa(inet_aton($_))'
78.137.18 
78.137.0.18 
```

for 的构造函数`InetSocketAddress`也将接受主机名。

如果您想明确拒绝这些地址（但您确定吗？），那么您将不得不编写代码来检查地址字符串，可能使用正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:01:50.290

`InetSocketAddress`创建一个表示套接字地址的对象。它确实将主机名解析为 IP 地址，但它不连接也不绑定到指定的地址。这就是为什么你没有得到异常。该地址在语法上是正确的，并且从未进行过连接尝试，因此没有理由抛出异常。

# android - android datepickerDialog 不应该接受未来的日期

> ID：10329236
> 
> 赞同：1
> 
> 时间：2012-04-26T07:47:59.817
> 
> 标签：android, datetime

我正在使用日期选择器对话框来选择用户的出生日期，因此我可以显示该对话框。但不应允许用户比当前日期增加年份或日期或月份。我怎样才能做到这一点？

这是我的代码：

```
private int mYear;
     private int mMonth;
     private int mDay;
     static final int DATE_DIALOG_ID = 1;
     @Override
     protected void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);
             setContentView(R.layout.main);   

             Button pickDate = (Button) findViewById(R.id.but);
             pickDate.setOnClickListener(new View.OnClickListener() {
                     public void onClick(View v) {
                             showDialog(DATE_DIALOG_ID);
                     }
             });
             final Calendar c = Calendar.getInstance();
             mYear = c.get(Calendar.YEAR);
             mMonth = c.get(Calendar.MONTH);
             mDay = c.get(Calendar.DAY_OF_MONTH);             
     }
     @Override
     protected Dialog onCreateDialog(int id) {
             switch (id) {
             case DATE_DIALOG_ID:
                     return new DatePickerDialog(this,
                             mDateSetListener,
                             mYear, mMonth, mDay);
             }
             return null;
     }
     protected void onPrepareDialog(int id, Dialog dialog) {
             switch (id) {
             case DATE_DIALOG_ID:
                     ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);
                     break;
             }
     }    

     private DatePickerDialog.OnDateSetListener mDateSetListener =
             new DatePickerDialog.OnDateSetListener() {
             public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {

                        if (year > mYear)
                        view.updateDate(mYear, mMonth, mDay);

                        if (monthOfYear > mMonth && year == mYear)
                        view.updateDate(mYear, mMonth, mDay);

                        if (dayOfMonth > mDay && year == mYear && monthOfYear == mMonth)
                        view.updateDate(mYear, mMonth, mDay);
             }
     }; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T08:11:37.193

```
@Override
     protected Dialog onCreateDialog(int id) {
             switch (id) {
             case DATE_DIALOG_ID:
                     DatePickerDialog _date =  new DatePickerDialog(this,  mDateSetListener,
                             mYear, mMonth, mDay){
                @Override
                public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth)
                {   
                     if (year > mYear)
                        view.updateDate(mYear, mMonth, mDay);

                        if (monthOfYear > mMonth && year == mYear)
                        view.updateDate(mYear, mMonth, mDay);

                        if (dayOfMonth > mDay && year == mYear && monthOfYear == mMonth)
                        view.updateDate(mYear, mMonth, mDay);

                }
            };
            return _date;
     }
     } 
```

您必须使用上面的 oncreate 对话框来限制未来的日期

```
private DatePickerDialog.OnDateSetListener mDateSetListener =
        new DatePickerDialog.OnDateSetListener() {
        @Override
        public void onDateSet(DatePicker view, int year, 
                int monthOfYear, int dayOfMonth) {
                      //do your stuff when user clicks on set button in dialog  
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:56:58.150

```
1\. Since API level 11 there is a method for that:
    DatePicker.setMaxDate(long maxDate) 

2\. If it has to work in previous versions, use this method:
    public void init(int year, int monthOfYear, int dayOfMonth, DatePicker.OnDateChangedListener onDateChangedListener) 
```

您可以通过自己的 OnDateChangedListener 将无效日期“重置”为最新的有效日期：

```
DatePicker picker = ... 
int year = ... 
int monthOfYear = ... 
int dayOfMonth = ... 
picker.init(year, monthOfYear, dayOfMonth, new DatePicker.OnDateChangedListener() { 

    @Override 
    public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) { 
        // check if current date is OK 
        boolean dateOk = ... 
        if (!dateOk) { 
            // correct the date, but be sure the corrected date is OK 
            // => otherwise you might get endless recursion 
            year = ... 
            monthOfYear = ... 
            dayOfMonth = ... 
            // update the date widget with the corrected date values 
            view.updateDate(year, monthOfYear, dayOfMonth); 
        } 
    } 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T13:08:20.927

```
import java.util.Calendar;

import android.app.DatePickerDialog;
import android.content.Context;
import android.widget.DatePicker;

public class MyDatePickerDialog extends DatePickerDialog {

    private CharSequence title;
    final Calendar c = Calendar.getInstance();
     int maxYear = c.get(Calendar.YEAR) -100; // this year ( 2013 ) +100 =2113
    int maxMonth = c.get(Calendar.MONTH);
    int maxDay = c.get(Calendar.DAY_OF_MONTH);
    int minYear = c.get(Calendar.YEAR);
    int minMonth = c.get(Calendar.MONTH);; // january
    int minDay = c.get(Calendar.DAY_OF_MONTH);
    /**
     * Instantiates a new my date picker dialog.
     *
     * @param context the context
     * @param callBack the call back
     * @param year the year
     * @param monthOfYear the month of year
     * @param dayOfMonth the day of month
     */
    public MyDatePickerDialog(Context context, OnDateSetListener callBack,
            int year, int monthOfYear, int dayOfMonth) {
        super(context, callBack, year, monthOfYear, dayOfMonth);
    }

    /**
     * Sets the permanent title.
     *
     * @param title the new permanent title
     */
    public void setPermanentTitle(CharSequence title) {
        this.title = title;
        setTitle(title);
    }

    @Override
    public void onDateChanged(DatePicker view, int year, int month, int day) {
        //super.onDateChanged(view, year, month, day);
        disable(view, year, month, day);
        setTitle(title);

    }

    private void disable(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {

                if (year < maxYear)
                view.updateDate(maxYear, maxMonth, maxDay);

                if (monthOfYear < maxMonth && year == maxYear)
                view.updateDate(maxYear, maxMonth, maxDay);

                if (dayOfMonth < maxDay && year == maxYear && monthOfYear == maxMonth)
                view.updateDate(maxYear, maxMonth, maxDay);

                if (year >minYear)
                // view.updateDate(minYear, minDay, minMonth);

                view.updateDate(minYear, monthOfYear, dayOfMonth);

                if (monthOfYear > minMonth && year == minYear)
                // view.updateDate(minYear, minMonth, minMonth);
                view.updateDate(minYear, minMonth, dayOfMonth);

                if (dayOfMonth > minDay && year == minYear && monthOfYear == minMonth)
                view.updateDate(minYear, minMonth, minDay);
                }

} 
```

# action - 推荐 (fb_action_ids) 值是否存储在用户在时间线应用上进行的活动中？

> ID：10329244
> 
> 赞同：0
> 
> 时间：2012-04-26T07:48:25.403
> 
> 标签：action, facebook-timeline, referrals

我正在测试我刚刚制作的时间线应用程序。

我正在使用 Graph API Explorer 进行测试。

我测试了下一个网址：

[https://graph.facebook.com/10150691128476714](https://graph.facebook.com/10150691128476714)

其中 10150691128476714 是我通过我的应用程序进行的活动的 ID。

它返回下一个值：

```
{
  "id": "10150691128476714", 
  "from": {
    "name": "Moisés Briseño Estrello", 
    "id": "719621713"
  }, 
  "start_time": "2012-04-26T07:22:00+0000", 
  "end_time": "2012-04-26T07:22:00+0000", 
  "publish_time": "2012-04-26T07:22:00+0000", 
  "application": {
    "name": "appname", 
    "namespace": "appname", 
    "id": "367747679937600"
  }, 
  "data": {
    "objectname": {
      "id": "10150825002710211", 
      "url": "https://young-planet-1642.herokuapp.com/AMLO.html", 
      "type": "appname:objectname", 
      "title": "TItle"
    }
  }, 
  "type": "appname:actionname", 
  "likes": {
    "count": 0, 
    "can_like": true, 
    "user_likes": false
  }, 
  "comments": {
    "count": 0, 
    "can_comment": true
  }
} 
```

我想知道推荐（fb_action_ids）值是否也存储在这里或者我可以在哪里找到它？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:24:33.237

动作的 ID 是 fb_action_ids 值，即`fb_action_ids = 10150691128476714`.

# paperclip - 设置相对图像大小回形针 [Rails]

> ID：10329246
> 
> 赞同：0
> 
> 时间：2012-04-26T07:48:28.920
> 
> 标签：paperclip

是否可以使用回形针为图像设置相对大小？是否存在这样的东西？

```
 :medium => "50x50%" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:33:18.877

请参阅以下链接，我认为它会帮助您观看调整大小选项
[https://github.com/thoughtbot/paperclip/wiki/Thumbnail-Generation](https://github.com/thoughtbot/paperclip/wiki/Thumbnail-Generation)

并且有以下链接示例

[http://www.imagemagick.org/Usage/resize](http://www.imagemagick.org/Usage/resize)
[http://www.imagemagick.org/Usage/resize/#percent](http://www.imagemagick.org/Usage/resize/#percent)

谢谢。

# postgresql - Postgres存储函数如何返回表

> ID：10329247
> 
> 赞同：11
> 
> 时间：2012-04-26T07:48:34.927
> 
> 标签：postgresql, function, return

我想了解 Postgres 存储函数如何返回带有已识别列的表。我使用了返回 setof returnType：

```
-- create employeeSearchResult returnType
create type employeeAllReturnType as
(
  id bigserial,
  "positionId" integer,
  "subjectId" bigint,
  "dateEngaged" date,
  "nextKin" text,
  "nrcNo" text,
  dob date,
  father text,
  mother text,
  wife text,
  "userId" integer,
  "statusId" integer,
  "mainCode" text,
  "subCode" text
);

-- Search for emmployee by name
CREATE OR REPLACE FUNCTION "employee_search_by_name"(employeeNameIN text)
returns setof employeeAllReturnType as 
$$
declare
    results record;
    resultsRow employee%rowtype;
    nameIn text;
begin
    nameIn = employeeNameIN || '%';
    for results in select 
        employee.id,-- bigserial NOT NULL,
  employee."positionId",-- integer,
  employee."subjectId",-- bigint NOT NULL,
  employee."dateEngaged",-- date,
  employee."nextKin",-- text,
  employee."nrcNo",-- text,
  employee.dob,-- date,
  employee.father,-- text,
  employee.mother,-- text,
  employee.wife,-- text,
  employee."userId",-- integer NOT NULL,
  employee."statusId",-- integer,
  employee."mainCode",-- character(5) NOT NULL,
  employee."subCode"-- character(10),
     from employee, subject where employee."subjectId" = subject.id and (subject.name1 ILIKE nameIn OR subject.name2 ILIKE nameIn OR subject.name3 ILIKE nameIn OR subject.name4 ILIKE nameIn) loop
      return next results;
    end loop;
end;
$$ language 'plpgsql'; 
```

并返回表（）：

```
-- Search for emmployee by name
CREATE OR REPLACE FUNCTION "employee_search_by_name"(employeeNameIN text)
returns table (id bigserial,
  position integer,
  subject bigint,
  date_engaged date,
  next_kin text,
  nrc_no text,
  dob date,
  father text,
  mother text,
  wife text,
  user_id integer,
  status_id integer,
  main_code text,
  sub_code text) as 
$$
declare
    results record;
    resultsRow employee%rowtype;
    nameIn text;
begin
    nameIn = employeeNameIN || '%';
    for results in select 
        employee.id,-- bigserial NOT NULL,
        employee."positionId",-- integer,
        employee."subjectId",-- bigint NOT NULL,
        employee."dateEngaged",-- date,
        employee."nextKin",-- text,
        employee."nrcNo",-- text,
        employee.dob,-- date,
        employee.father,-- text,
        employee.mother,-- text,
        employee.wife,-- text,
        employee."userId",-- integer NOT NULL,
        employee."statusId",-- integer,
        employee."mainCode",-- character(5) NOT NULL,
        employee."subCode"-- character(10),
     from employee, subject where employee."subjectId" = subject.id and (subject.name1 ILIKE nameIn OR subject.name2 ILIKE nameIn OR subject.name3 ILIKE nameIn OR subject.name4 ILIKE nameIn) loop
      return next results;
    end loop;
end;
$$ language 'plpgsql'; 
```

但两者都有以下格式的输出：

```
"(1,1,1,2011-12-01,Timea,fg1254,1981-12-27,moses,sarada,timea,1,1,"ADM  ","1         ")"
"(37,3,10,2011-11-11,s,s,2011-11-11,s,s,s,1,1,"OP   ","1         ")" 
```

无论如何，我可以有输出，例如从表中选择结果的输出？

```
"1";1;1;"2011-12-01";"Timea";"fg1254";"1981-12-27";"moses";"sarada";"timea";1;1;"ADM  ";"1         " 
```

这样处理来自前端的结果数据就不需要解析器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T09:24:03.743

你应该像这样查询你的函数：

```
SELECT * FROM employee_search_by_name('Bob'); 
```

此外，为了简化您的功能，您可能会查看[`RETURN QUERY EXECUTE ...`](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)构造。并且没有必要引用`plpgsql`关键字。

# javascript - 我如何区分移动设备和大屏幕设备。？

> ID：10329248
> 
> 赞同：2
> 
> 时间：2012-04-26T07:48:51.070
> 
> 标签：javascript, mobile, responsive-design, media-queries

我正在构建一个 Web 应用程序，我有两套流体布局，一套用于小屏幕设备，另一套用于大屏幕。？那么我怎样才能把我的基准放在这两个类别之间。？我知道如何在 js 中放置不同的 css 媒体查询和设备检测技术。

但我想要一个通用标准来区分这两类

例如：我有

```
var deviceIs = {
    android : agent.match(/Android/i),  
    iPhone  : agent.match(/iPhone/i),
    iPad    : agent.match(/iPad/i),
    iPod    : agent.match(/iPod/i),
    BB      : agent.match(/BlackBerry/i),
    webOS   : agent.match(/webOS/i)
};

var currentRES = {
    width : screen.width,
    height : screen.height
} 
```

但我想创建一个像

```
var screenTypeis ={

       smallScreen : function(){     
         if(i want this generalized condition){
                 return true;    
           }
          else{    
           return false;
          }    
} 
```

}

例如，设备宽度 > 480 on potrait 和 < 480 && etc etc....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T07:53:40.923

谁说什么是小屏幕，什么不是？

例如，新 iPad 的尺寸相当小（与普通屏幕相比），但分辨率很高，比高清标准多出一百万像素。

就个人而言，我只会使用 CSS 媒体查询，因为无论如何都可以轻松修改用户代理字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:27:26.233

据我了解，你想要这样的[东西](http://jsfiddle.net/PAXq3/1/)

```
function detectDevice(s) {
    var userAgent = navigator.userAgent.toLowerCase(),
        platform = navigator.platform.toLowerCase();
    if (s) {
        if (userAgent.match(s.toLowerCase()) != null)
            return true;
        return false;
    }

    this.isSmall = function() {
        if (screen.width <= 480 && screen.height <= 480)
            return true;
        return false;
    };
    this.device = function() {

        var a = ["Android", "iPhone", "iPad", "iPod", "BB", "webOS"];
        for (var i = 0; i < a.length; i++) {
            if (userAgent.match(a[i].toLowerCase()) != null)
                return a[i];
        }
        var a = ["Win", "Mac", "Linux"];
        for (var i = 0; i < a.length; i++) {
            if (platform.match(a[i].toLowerCase()) != null)
                return (a[i] == "Win") ? "Windows" : a[i];
        }
        return "Unknown Device";
    };
    this.userAgent = userAgent;
    this.platform = platform;
} 
```

[例子](http://jsfiddle.net/PAXq3/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T08:36:18.857

基本上，你不能。知道这一点的唯一方法是通过某种方式获取 DPI 设置，然后将分辨率除以它。但是，JavaScript 无法访问 DPI。有关详细信息，请参阅此问题：[您可以在 Javascript 函数中访问屏幕显示的 DPI 设置吗？](https://stackoverflow.com/questions/476815/can-you-access-screen-displays-dpi-settings-in-a-javascript-function)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T13:14:15.773

好的，所以我发现是这样的

```
 var screenType = {
        isMobileScreen: function () {
            if (deviceIs.iPhone || deviceIs.iPod || deviceIs.BB || deviceIs.webOS || deviceIs.mobile || (currentRES.width <= 480 && currentRES.height <= 720)) {
                return true;
            }
            return false;
        }
    }; 
```

而且我还添加了更多设备列表。

```
 var deviceIs = {
        mobile: agent.match(/Android; Mobile|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec/i),
        iPhone: agent.match(/iPhone/i),
        iPad: agent.match(/ipad/i),
        tab: agent.match(/ipad|android 3|gt-p7500|sch-i800|playbook|tablet|kindle|gt-p1000|sgh-t849|shw-m180s|a510|a511|a100|dell streak|silk/i),
        iPod: agent.match(/iPod/i),
        BB: agent.match(/BlackBerry/i),
        webOS: agent.match(/webOS/i)
    }; 
```

# java - CannotGetJdbcConnectionException：BUFFERDIR 连接属性无效

> ID：10329250
> 
> 赞同：3
> 
> 时间：2012-04-26T07:48:53.520
> 
> 标签：java, sql, spring, mybatis

启动应用程序时出现以下错误。由于我没有在任何地方明确指定 BUFFERDIR 属性，我不确定选择的默认值是什么。当我将我的 catalina 基地和 catalina 家更改为共享的 tomcat 时，这个问题就开始了。

```
org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (The BUFFERDIR connection property is invalid.)
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
    at org.mybatis.spring.SqlSessionUtils.getSqlSession(SqlSessionUtils.java:117) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T08:47:15.163

好的..我自己找到了答案。BUFFERDIR 被 jdbc 用来临时存储数据。当我使用为 CATALINA_TMPDIR 指定的错误位置启动应用程序时，jdbc 无法将数据缓冲到文件中。在我为临时目录设置正确的值后，问题得到了解决。

# yii - 如何使用会话获取用户的在线时长？

> ID：10329254
> 
> 赞同：1
> 
> 时间：2012-04-26T07:49:10.720
> 
> 标签：yii, php

在 yii 中，我需要存储用户`_login time`和 使用会话。`logout time``total duration logged_`

我是会话概念的新手。我不知道如何检索`total logged time`, `login time`, `log out time`. 在会话表中它只存储`id--expire--data`

我存储会话的代码是

```
protected/config/main.php

            'components'=>array(

    'session'=>array(
            'class' => 'CDbHttpSession',

            'connectionID' => 'db',
            'sessionTableName' => 'dbsession',
        ),
    ), 
```

一切正常，但存储在 db 中的数据已加密。所以我无法检索我需要的数据。另一件事是什么数据存储在会话表中。

我在没有会话的情况下使用的替代方式，但也有问题。我用它来获取`login time`,`logout time`和`total duration logged`

我使用了带有字段的表活动

```
id,username,user_activity,url,ip,time 
```

用户登录和注销时在表格中填写数据的代码如下

```
protected/controller/sitecontrollers.php

         public function actionLogin()
        {
                /* log in */

                $model=new LoginForm;

                // if it is ajax validation request
                if(isset($_POST['ajax']) && $_POST['ajax']==='login-form')
                {
                        echo CActiveForm::validate($model);
                        Yii::app()->end();
                }

                // collect user input data
                if(isset($_POST['LoginForm']))
                {
                        $model->attributes=$_POST['LoginForm'];
                        // validate user input and redirect to the previous page if valid
                        if($model->validate() && $model->login())                                                                               
                               {
                                $activity = new Activity;
                                $activity->username = Yii::app()->user->id;                          
                                //$activity->userId = Yii::app()->user->id;
                                $activity->user_activity = "1";
                $activity->url=$_SERVER['HTTP_REFERER'];
                $activity->ip=$_SERVER['REMOTE_ADDR'];
                                // This breaks the site when log in details are wrong
                                $activity->save();
                                if($activity->save())
                                $this->redirect(Yii::app()->homeUrl);
                    }                          

                }

                // display the login form
      if(Yii::app()->user->id==null)
      {
                  $this->render('login',array('model'=>$model));
      }
         else
           {
         throw new CHttpException(404,'User already logged in.');
             }
        }

        /**
         * Logs out the current user and redirect to homepage.
         */
       public function actionLogout()
        {

                // log
                $activity = new Activity;
                $activity->username = Yii::app()->user->id;
                $activity->user_activity = "0";
        $activity->url=$_SERVER['HTTP_REFERER'];
        $activity->ip=$_SERVER['REMOTE_ADDR'];
                $activity->save();      

                Yii::app()->user->logout();   
                                if($activity->save())                                  

                $this->redirect(Yii::app()->homeUrl);
        } 
```

以这种方式一切正常，但是当浏览器关闭时，应用程序被注销并且数据没有进入数据库。那么持续时间的计算就会出错。所以只有我参加了方法会话但不知道如何使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T10:04:37.093

我认为你永远不会正确地做这种事情，但会犯一些错误（或多或少几分钟，取决于你的需要）。

### 1\. 通过页面请求保持活力

您可以将活动状态发送到您的 ajax 页面`actionImAlive`，而且您更经常这样做，更**准确地说**，您会知道用户会话有多长时间。如果你在 5 分钟内做1 次*活的事情*，你将有大约 5 分钟错误的持续时间。

1.  添加列 t_login、t_last_activity
2.  在用户登录更新 t_login 和 t_last_activity 与当前时间戳
3.  在每个用户新页面加载时检查是否需要更新 t_last_activity

    主控制器 *(components/Controller.php)

    ```
    public function keepAlive( ) {
            User::model()->updateByPk( 
                Yii::app()->user->id, 
               // array('t_last_activity' => 'NOW()') //CURRENT_TIMESTAMP
             array('t_last_activity' => new CDbExpression('NOW()')) //CURRENT_TIMESTAMP..this working fine 
        );
    }

    // Runs after any action in controller
    public function afterAction($action) {
        self::keepAlive();
        parent::afterAction($action);
    }

    // This action can be reached by ajax every 5min 
    // if user stays in one page long enaugh
    // (write javascript..)
    public function actionImAlive() {
        self::keepAlive();
    } 
    ```

4.  每次用户加载新页面时，上面的代码都会更新 t_last_activity，但您可以通过在用户会话中保存上次活动时间图并在执行 keepAlive() 函数之前检查它每 5 分钟执行一次

    **其他控制器**

    所有其他控制器都使用 Controller 类作为父级

    ```
    SiteController extends Controller
    MyController extends Controller
    SomeController extends Controller 
    ```

### 2\. 仅用于用户显示（计算从登录时间到现在的持续时间`now() - t_login`：）

如果您想向用户显示此会话持续时间（我不知道为什么要这样做，但无论如何..）您可以将`t_login`列添加到用户表并即时计算持续时间。

这些是我的头等大事。

# ios - iOS：将现有核心数据数据库迁移到 iCloud

> ID：10329256
> 
> 赞同：6
> 
> 时间：2012-04-26T07:49:21.360
> 
> 标签：ios, core-data, migration, icloud

我在现有应用程序中使用 Core Data。现在我想集成 iCloud，以便用户可以在他们的 iOS 设备之间同步他们的内容。为此，我为我的 NSPersistentStoreCoordinator 编写了以下代码（当然占位符已在我的代码中填写）：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {

if (persistentStoreCoordinator_ != nil) {
    return persistentStoreCoordinator_;
}

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"<DB_Name>.sqlite"];

persistentStoreCoordinator_ = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

NSPersistentStoreCoordinator* psc = persistentStoreCoordinator_;

if (IOS_VERSION_GREATER_THAN_OR_EQUAL_TO(@"5.0")) {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSFileManager *fileManager = [NSFileManager defaultManager];

        // Migrate datamodel
        NSDictionary *options = nil;

        // this needs to match the entitlements and provisioning profile
        NSURL *cloudURL = [fileManager URLForUbiquityContainerIdentifier:@"<App_Identifier>"];
        NSString* coreDataCloudContent = [[cloudURL path] stringByAppendingPathComponent:@"data"];
        if ([coreDataCloudContent length] != 0) {
            // iCloud is available
            cloudURL = [NSURL fileURLWithPath:coreDataCloudContent];

            options = [NSDictionary dictionaryWithObjectsAndKeys:
                       [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                       [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                       @"<App_Name>.store", NSPersistentStoreUbiquitousContentNameKey,
                       cloudURL, NSPersistentStoreUbiquitousContentURLKey,
                       nil];
        } else {
            // iCloud is not available
            options = [NSDictionary dictionaryWithObjectsAndKeys:
                       [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                       [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                       nil];
        }

        NSError *error = nil;
        [psc lock];
        if (![psc addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error])
        {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        }
        [psc unlock];

        dispatch_async(dispatch_get_main_queue(), ^{
            NSLog(@"asynchronously added persistent store!");
            [[NSNotificationCenter defaultCenter] postNotificationName:@"RefetchAllDatabaseData" object:self userInfo:nil];
        });

    });

} else {
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                             nil];

    NSError *error = nil;
    if (![persistentStoreCoordinator_ addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error])
    {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    }
}

return persistentStoreCoordinator_;
} 
```

使用该代码，所有**新添加**的数据记录都会在所有 iOS 设备之间自动同步，从而完全按照应有的方式工作！

但我想要的是**所有现有**数据记录也在所有设备之间同步；那还不行。现有记录在应用程序中仍然可用并且可以使用，但它们不会同步。

我需要做什么才能使所有现有数据记录也与 iCloud 同步？我已经用这个方法做了一些实验

```
migratePersistentStore:toURL:options:withType:error: 
```

但没有任何成功。

我非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:40:30.180

查找 WWDC 2012 会话 Using CoreData with iCloud。他们在最后一节的播种主题下讨论了这个问题。他们也有一些示例代码，您可以从有示例的站点获得。简而言之，您将必须打开 2 个持久存储，设置提取大小，然后从源中获取批次，循环它们并将它们添加到新存储中，并以批次大小为间隔，保存并重置。很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:52:11.033

查看 WWDC 2012 - 将核心数据与 iCloud 结合使用。这种技术称为播种。[在https://github.com/jab5990/TestCDiCloud/tree/master/Shared](https://github.com/jab5990/TestCDiCloud/tree/master/Shared)找到示例代码

# reporting-services - WPF 用户控件作为 CustomReportItem

> ID：10329262
> 
> 赞同：1
> 
> 时间：2012-04-26T07:49:39.037
> 
> 标签：reporting-services

有没有办法将 WPF UserControl 用作 SSRS 的 CustomReportItem？在 draw 方法中，我想创建 WPF 控件的实例并将其呈现为可视画笔。唯一的问题是 WPF 控件只能在 STA 环境中实例化。在 STA 环境中创建一个新线程以便在 VisualStudio 中创建控件，但部署到 SQL Server，几乎每次线程以 MTA 模式启动时 - 即使它在启动之前被设置为 STA。

我知道无论如何都不应该在 SQL Server 上下文中启动 STA 线程 - 但是这个问题真的没有解决方案吗？

BR,

特里斯坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:23:04.880

不，提供访问 SSRS 的唯一组件是“Visual Studio 的 ReportViewer 控件”。但是您还可以使用 SOAP 和 UrlAccess 与 SSRS 进行交互

[http://msdn.microsoft.com/en-us/library/ms153697.aspx](http://msdn.microsoft.com/en-us/library/ms153697.aspx)

# java - 石英作业未触发

> ID：10329264
> 
> 赞同：1
> 
> 时间：2012-04-26T07:49:43.960
> 
> 标签：java, servlets, properties, quartz-scheduler, job-scheduling

我提到了一个先前的问题，在[Quartz 属性中发现不会触发 Quartz Job](https://stackoverflow.com/questions/9596957/quartz-properties-does-not-trigger-quartz-job)，并从中大量借用（作为 Quartz 的新手等等），但我的工作似乎没有被解雇。

我的`quartz.properties`：

```
org.quartz.scheduler.instanceName = MyScheduler
org.quartz.threadPool.threadCount = 3
org.quartz.jobStore.class = org.quartz.simpl.RAMJobStore

#===================================================
# Configure the Job Initialization Plugin
#===================================================

org.quartz.plugin.triggerHistory.class: org.quartz.plugins.history.LoggingTriggerHistoryPlugin
org.quartz.plugin.jobInitializer.class: org.quartz.plugins.xml.XMLSchedulingDataProcessorPlugin
org.quartz.plugin.jobInitializer.fileNames: quartz-jobs.xml
org.quartz.plugin.jobInitializer.failOnFileNotFound: true
org.quartz.plugin.jobInitializer.scanInterval: 10
org.quartz.plugin.jobInitializer.wrapInUserTransaction: false 
```

我的`quartz-job.xml`：

```
<?xml version='1.0' encoding='utf-8'?>
<job-scheduling-data xmlns="http://www.quartz-scheduler.org/xml/JobSchedulingData"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.quartz-scheduler.org/xml/JobSchedulingData http://www.quartz-scheduler.org/xml/job_scheduling_data_1_8.xsd"
version="1.8">

    <schedule>
        <job>
            <name>myjob</name>
            <group>MYJOBGROUP</group>
            <description>Job to Test</description>
            <job-class>com.mpm.epick.enotify.EmailNotifier</job-class>
        </job>
        <trigger>
            <cron>
                <name>my-trigger</name>
                <group>MYTRIGGER_GROUP</group>
                <job-name>myjob</job-name>
                <job-group>MYJOBGROUP</job-group>
                <cron-expression>* * * * * ?</cron-expression>
            </cron>
        </trigger>
    </schedule>

</job-scheduling-data> 
```

我添加的部分`web.xml`：

```
<!-- added by ck -->
<context-param>
    <param-name>quartz:config-file</param-name>
    <param-value>quartz.properties</param-value>
</context-param>
<context-param>
    <param-name>quartz:shutdown-on-unload</param-name>
    <param-value>true</param-value>
</context-param>
<context-param>
    <param-name>quartz:wait-on-shutdown</param-name>
    <param-value>false</param-value>
</context-param>
<context-param>
    <param-name>quartz:start-scheduler-on-load</param-name>
    <param-value>true</param-value>
</context-param>

<listener>
    <listener-class>org.quartz.ee.servlet.QuartzInitializerListener</listener-class>
</listener>

<servlet> 
    <servlet-name>QuartzInitializer</servlet-name> 
    <servlet-class>org.quartz.ee.servlet.QuartzInitializerServlet</servlet-class> 
    <init-param>
        <param-name>shutdown-on-unload</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet>
<!-- end additions --> 
```

我希望运行的类文件，“EmailNotifier”（现在它只是一个存根实现）：

```
package com.mpm.epick.enotify;

import org.quartz.Job;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;

public class EmailNotifier implements Job {

    public EmailNotifier() {}

    public void execute(JobExecutionContext context) throws JobExecutionException {
        System.out.println("Cron executing ");
    }

} 
```

所以我观察到我的调度程序可以正常启动/停止，如以下调试行所示：

```
INFO: QuartzInitializer: Scheduler has been started...
INFO: QuartzInitializer: Quartz Scheduler successful shutdown. 
```

但在我的控制台上，我根本看不到调试行。我尝试了日志文件，但它也不存在。

我错过了什么来解雇我的工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:24:55.737

我想知道这是否可能是因为您的 cron 表达式很奇怪。我不确定“* * * * * ”的意图是什么？表达式，但如果您希望它每秒触发一次，您可能应该使用“0/1 * * * * ?”。有关构建 cron 表达式的更多信息，请参阅[http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-06](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-06)。

# javascript - 是否值得收集与 jQuery 相关的脚本以在文档末尾运行它们？

> ID：10329268
> 
> 赞同：1
> 
> 时间：2012-04-26T07:50:01.140
> 
> 标签：javascript, jquery, performance

我想在关闭`</body>`-Tag 之前放置 jQuery，就像推荐的那样。但是因为我使用的是内容管理系统，所以需要 jQuery 的内联脚本将在结束 body 标记之前执行。

我现在的问题是：是否值得在数组中收集基于 jQuery 的脚本并在加载 jQuery 时在文档末尾运行它们（[EXAMPLE](http://pastebin.com/1sAn08D8)）或者只是在头部加载 jQuery？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T07:54:52.380

您可以采用[此处描述的方法](http://samsaffron.com/archive/2012/02/17/stop-paying-your-jquery-tax)

`q`这个想法是很快在标题中创建一个全局变量，并使用一个临时`window.$`函数来收集所有依赖于 jQuery 的代码/函数/插件。

```
window.q=[];
window.$=function(f){
  q.push(f);
}; 
```

在你加载 jQuery 之后，你会将所有函数传递给真正的`$.ready`函数。

```
$.each(q,function(index,f){
  $(f)
}); 
```

通过这种方式，您将能够在 jQuery lib 包含之前安全地包含您的 jquery 代码

如果这可能比在头部加载 jQuery 更好，那可能取决于您必须将多少代码推送到`q`临时函数中。

放置到`<head>`section 中的 jQuery 需要一个单独的阻塞`script`。但是如果你有很多代码要在文档中的任何地方注入，你可能会有很多巨大的阻塞脚本来停止渲染过程。

相反，在 dom 就绪事件之后加载大量脚本可以很容易地使您的页面加载速度更快，因此这种方法更好，并且好处可以更加明显。

**所以没有一个对所有代码和所有页面都**有效的明确答案：即使这种技术通常是好的和可取的（因为你有尽可能晚的脚本执行的好处），你应该做一些使用这两种方法进行测试并查看加载和渲染时间。*开头的文章对性能有一些考虑，但也解释了为什么stackoverflow没有使用它。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:54:07.467

只需在头部加载 jQuery，它会在第一次加载后被缓存，之后不会减慢任何速度。

其他一切听起来都像是过头了，我不确定性能的提升是否会如此显着以证明额外工作的合理性。

有时，如果您的页面在底部使用 javascript 加载缓慢，则可能需要更长的时间才能加载，这意味着没有 javascript 的视觉效果可能是可见的，并且无法为用户提供如此好的体验。

# c++ - 由于影子存储大小导致 VSS 失败

> ID：10329269
> 
> 赞同：2
> 
> 时间：2012-04-26T07:50:10.267
> 
> 标签：c++, windows, volume-shadow-service

我已经使用 VSS API 来制作 C: 的快照。程序因 VSS 异常而失败。但是，当我尝试使用 VSS Admin 创建同一卷的快照时，它会成功完成。

我发现影子存储空间小于 300 mb，因此导致我的程序失败。增加影子存储空间对我有用。

我的问题是：

1.  即使 shadowstorage 空间小于 300MB，VSS Admin 如何正常工作？
2.  为什么使用 VSS API 创建的程序也不能创建快照？

少了什么东西？

# php - 将多个 If 语句合并为一个语句。php

> ID：10329270
> 
> 赞同：0
> 
> 时间：2012-04-26T07:50:23.233
> 
> 标签：php, if-statement

```
function rawtransform{

            if ($raw>=500 && $raw<=550){
                    $score= 1;
            }
            if ($raw>=550 && $raw<=600){
                    $score= 2;
            }
            if ($raw>=600 && $raw<=650){
                    $score= 3;
            }
            if ($raw>=700 && $raw<=750){
                    $score= 4;
            }
            if ($raw>=750 && $raw<=800){
                    $score= 5;
            }
            if ($raw>=800 && $raw<=850){
                    $score= 6;
            }
            if ($raw>=850 && $raw<=900){
                    $score= 7;
            }
            if ($raw>=900 && $raw<=950){
                    $score= 8;
            }
            if ($raw>=950 && $raw<=1000){
                    $score= 9;
            }
    } 
```

这似乎很基本，编码也不是很好。（我只是在学习 php ）任何人都可以提供更好的方法吗？也许是一个 if 语句。我认为有一种方法不能让我的头脑围绕它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:58:08.817

只用数学怎么样？

```
function rawtransform($raw) {
  $score = (int)($raw/50)-9;
} 
```

不过，您可能希望为输入添加范围检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:56:20.397

您可以创建条件列表，然后循环并应用 if。

```
$conditions = array(
    array(500, 550, 1), // greater than value, lesser than value, assignment value
    array(550, 600, 2),
    array(650, 700, 3)  // add the rest of the conditions
);

foreach($conditions as $condition) {
    if($raw >= $condition[0] && $raw <= $condition[1]) {
        $score = $condition[2];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:54:22.537

```
if ($raw >= 500 && $raw<= 1000){
        $score = ceil(($raw-500)/50);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T07:56:48.873

您的逻辑似乎是您从 raw 中减去 450，然后将其除以 50 并四舍五入到最接近的整数。（但是，您的实现中存在问题，好像 raw 是 50 的因子，它将满足两个 if 语句的要求，并且当它落在 650 和 700 之间时缺少一个条件。）

你可以这样做：

```
floor(($raw-450)/50) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T07:56:53.827

您可以使用 if...else 构造。

```
 if ($raw>=500 && $raw<=550){
                $score= 1;
        }
        elseif ($raw>=550 && $raw<=600){
                $score= 2;
        }
        elseif ($raw>=600 && $raw<=650){
                $score= 3;
        } 
```

这样，如果脚本遇到大小为 575 的情况，它甚至不会费心经历以下条件。

在您给定的示例中，可以通过以下方式简化脚本：

```
function rawtransform($raw) { $score = floor(($raw - 450)/50); return $score; } 
```

# android - Android - 打开带有帖子数据的网址

> ID：10329271
> 
> 赞同：0
> 
> 时间：2012-04-26T07:50:28.847
> 
> 标签：android, post

在我的应用程序中，我需要打开一个 WebMoney 页面 (https) 并将其发送 POST 数据。或运行活动 wm keeper（如果安装）并将必要的数据传递给它。这是真的吗？

# php - SELECT COUNT(a.id) AS id... => 结果数组为空！[PHP、MySQL]

> ID：10329276
> 
> 赞同：3
> 
> 时间：2012-04-26T07:51:02.967
> 
> 标签：php, mysql, arrays

从昨天开始，我在使用一些 PHP 时遇到了问题，浏览了网络并有一种愚蠢的感觉，我错过了一些重要的东西。

`mysql_fetch_object`通常使用，`mysql_fetch_array`尽管尝试过（没有帮助）。这是让我头疼的代码部分：

```
public static function get_datacenter_by_id($id) {
$result = mysql_query("SELECT COUNT(rack.id) AS Racks, COUNT(device.id) AS Devices, COUNT(card.id) AS Cards, COUNT(port.id) AS Ports 
          FROM datacenter, rack, device, card, port, location, building 
          WHERE location.id = building.location_id AND
          building.id = datacenter.building_id AND
          datacenter.id = '.$id.' AND
          rack.id = device.rack_id AND
          device.id = card.device_id AND
          (card.id = port.card_id1 OR
          card.id = port.card_id2)") or die ("Error in query: ".mysql_error());

$array = array();

while($row = mysql_fetch_object($result)) {
    $array[] = array($row->Racks, $row->Devices, $row->Cards, $row->Ports);                     
}

return $array;
} 
```

$array 在另一个 .php 文件中使用，但 using`print_r $array`已经向您显示，该数组保持`empty (0)`. 我很确定错误出现在这段代码中，“ **`COUNT (x) AS y`**”可能有问题吗？

PS：MySQL Query 工作，之前通过 Workbench 测试过。我会很感激一些好的建议！:-)

祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:04:37.047

而不是像这样使用它

```
while($row = mysql_fetch_object($result)) {
$array[] = array($row->Racks, $row->Devices, $row->Cards, $row->Ports);                     
} 
```

你应该做这个

```
$row = mysql_fetch_object($result)
$array[] = $row->Racks;
$array[] = $row->Devices;
$array[] = $row->Cards; 
```

因为您正在获取 1 条记录并在 while 中使用它会导致问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:06:42.677

这不是这么简单吗：

```
$result = mysql_query("SELECT COUNT(rack.id) AS Racks, COUNT(device.id) AS Devices,     COUNT(card.id) AS Cards, COUNT(port.id) AS Ports 
      FROM datacenter, rack, device, card, port, location, building 
      WHERE location.id = building.location_id AND
      building.id = datacenter.building_id AND
      datacenter.id = '" . $id . "' AND
      rack.id = device.rack_id AND
      device.id = card.device_id AND
      (card.id = port.card_id1 OR
      card.id = port.card_id2)") or die ("Error in query: ".mysql_error()); 
```

注意'.$id.'的修改。到 '" . $id . "'. 您的查询正在查找“.$id.”的数据中心 ID。

# proxy - nginx 1.2.0 - socket.io - HTTP/1.1 - 代理 websocket 连接

> ID：10329281
> 
> 赞同：25
> 
> 时间：2012-04-26T07:51:38.123
> 
> 标签：proxy, nginx, websocket, socket.io, reverse-proxy

我想用 nginx proxy_pass 模块替换我的 node-http-proxy 模块。正如我所读到的，新发布的 nginx 版本是否有可能支持开箱即用的 HTTP/1.1。我看到一些线程正在努力解决这个问题，nginx 不支持 websockets。

在我的情况下，我在后台运行多个节点项目，并希望将我的 websocket 连接从端口 80 路由到 8000-8100，具体取决于域。有没有不使用 tcp_module 插件的本地方式来做 websocket 代理/反向代理？

我尝试在 nginx.conf 中使用 proxy_passing 设置上游，但如果我尝试通过 websocket 连接到端口 80，我会收到 502 网关错误。

有人面临同样的问题吗？有没有人有 nginx + spcket.io 的工作示例，通过端口 80 代理？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-08T12:53:53.310

不，这还不可能；nginx 1.2 合并了来自 1.1.x 开发分支的东西，其中确实包括 HTTP/1.1 反向代理。Websocket 连接是使用 HTTP/1.1 “升级”标头建立的，但 nginx 现在支持这种标头的事实并不意味着它支持 websockets（websockets 是不同的协议，而不是 HTTP）。（我自己尝试使用 1.1.x 分支（我发现它对于我的目的足够稳定）并且没有 tcp_module 就无法工作）

[1.3.x ( http://trac.nginx.org/nginx/roadmap](http://trac.nginx.org/nginx/roadmap) )可能会支持 Websockets 。

您的替代方案是：

*   继续使用 node-http-proxy
*   使用没有 tcp 模块的 nginx；socket.io 不会使用 websockets，而是使用其他东西（例如长轮询）
*   带有 tcp 模块的 nginx：在这种情况下，我认为您需要为该模块添加一个额外的端口（我自己从未尝试过）
*   把别的东西放在前面作为反向代理：我在 nginx 和 node.js 前面使用 HAProxy（它支持 websockets）。Nginx 现在只是充当静态文件服务器，而不是代理。如果您想要额外的缓存，清漆是另一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T05:34:54.763

关于带有 TCP 模块的 NginX，我遇到的问题很少。但最棘手的一个是尝试在 EC2 实例的端口 80 上使用 nginx 运行 websocket。

[我在这里](http://blog.i-evaluation.com/2012/12/09/installing-nginx-with-websockets-support/)描述了整个配置

# c++ - 如何在c ++中确定字符串中的字符

> ID：10329284
> 
> 赞同：0
> 
> 时间：2012-04-26T07:52:06.257
> 
> 标签：c++, c

我有一个名为“String”的变量，它可能具有以下值：

```
const char* String = "/v1/AUTH_abb52a71-fc76-489b-b56b-732b66bf50b1/test/DSC_0188.JPG"; 
```

或者

```
const char* String = "/auth/v1.0"; 
```

或者

```
const char* String = "/v2/AUTH_abb52a71-fc76-489b-b56b-732b66bf50b1/images?limit=1000&delimiter=/&format=xml"; 
```

现在我想确定“String”是否有字符“v1”。检查这必须是精确的。我尝试使用 strchr，但它不太准确，因为它不将“v1”作为一个字符，而是将“v”和“1”作为两个单独的字符。此外，我不能使用命名空间标准和库字符串，我只能使用“string.h”。在这些限制内，如何准确检查变量“String”是否具有字符“v1”？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T07:53:24.933

> 我想确定“字符串”是否有字符“v1”
> 
> 我只能使用“string.h”

那么你可能想要[`strstr`](http://en.cppreference.com/w/cpp/string/byte/strstr). `v1`也不是一个字符，它是一个字符串。

* * *

旁注：为什么`cstring`在 C++ 中使用？什么样的老师还在叫`string.h`？！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T07:58:35.070

`v1`不是任何字母表中的字符。这是一个正确的字符串“v1”，正如@cnicutar 提到的，在字符串中搜索字符串的 c 方法是使用`strstr`. 它非常易于使用并且运行速度也非常快的[KMP](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)（尽管对于您的字符串类型来说它并不那么重要）。

我建议你：

*   始终以小型大写字母开头（即`String`-> `my_string`）命名您的变量
*   将您的字符串声明为`const char[]`，无需干扰指针，当您可以避免它们时。将其声明为指针可能会使您感到困惑，因为您为字符串动态分配了内存。

# html - XML 中的文本到 XSLT 之后的行

> ID：10329285
> 
> 赞同：1
> 
> 时间：2012-04-26T07:52:08.590
> 
> 标签：html, xml, xslt

我的 XML 文件中有类似的内容

```
<ELEMENT attribute="Value of the attribute">Some text</ELEMENT> 
```

XSLT 模板是

```
<span>
    <p>
        <xsl:value-of select="@attribute"/>
    </p>
</span> 
```

在被一些 XSLT 转换后，我有了这个

```
<span>
    <p>
        Value of the attribute
    </P>
 </span> 
```

但是有时候，属性的值太长了，我想把它显示在两行上。
我怎样才能做到这一点？是否可以在回车的属性值中添加一些东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:09:21.127

您可以将换行实体添加`&#10;`到属性值。它将导致在所需位置换行：

```
<ELEMENT attribute="Value of the&#10;attribute">Some text</ELEMENT> 
```

这应该导致这样的事情：

```
<span>
  <p>
    Value of the 
attribute
  </p>
</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:13:03.467

**这是一个 XSLT 2.0 转换，它将单词分成两行，以便第一行不超过预定义的长度**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="pMaxLength" select="15"/>

 <xsl:template match="ELEMENT">
  <xsl:variable name="vWords" select="tokenize(@attribute, '\W+')"/>

  <xsl:variable name="vNumWords" select="count($vWords)"/>

  <xsl:variable name="vLastWordPos" select=
   "for $k in 1 to vNumWords
      return
         if(string-length(string-join($vWords[position() le $k],
                                      ' ')
                          )
            le $pMaxLength
         and
            string-length(string-join($vWords[position() le $k+1],
                                      ' ')
                          )
            gt $pMaxLength
            )
         then $k
         else ()
   "/>

   <xsl:variable name="vLastPos" select=
    "($vLastWordPos, $vNumWords)[1]"/>

      <span>
        <p>
         <xsl:value-of select=
         "string-join($vWords[position() lt $vLastPos], ' '),
          string-join($vWords[position() ge $vLastPos], ' ')
         "
         separator="&#xA;"/>
        </p>
       </span>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<ELEMENT attribute="Value of the attribute">Some text</ELEMENT> 
```

**产生了想要的正确结果：**

```
<span>
   <p>Value of the
attribute</p>
</span> 
```

**请注意**：由于输出是 HTML，您可能希望在上面的代码中替换它：

```
 <span>
    <p>
     <xsl:value-of select=
     "string-join($vWords[position() lt $vLastPos], ' ')"/>
     <br />
      <xsl:value-of select=
              "string-join($vWords[position() ge $vLastPos], ' ')"/>
    </p>
   </span> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:14:59.090

正如另一个答案所说，编码的新行是您最好的选择，但请注意，这几乎完全取决于您使用的 XSL 处理器，甚至取决于版本 - 即 msxsl 3 和 4 将产生不同的输出（3 将需要很多更多行）。

它的基础是无论您是否有新行，您的输出都将在 html 中显示相同

另一种选择是检查 XSL 中的行长，如果太长，请在最近的空格处手动断开

# android - 启动默认音乐播放器，默认播放音乐

> ID：10329289
> 
> 赞同：2
> 
> 时间：2012-04-26T07:52:33.090
> 
> 标签：android, android-intent, playback, android-music-player

我正在开发一个应用程序，我需要在其中启动默认音乐应用程序并播放所有歌曲。我尝试了多种方法，但似乎没有任何效果。

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage(
                          "com.android.music.MediaPlaybackActivityStarter");
startActivity( LaunchIntent ); 
```

和

```
Intent intent = new Intent();
ComponentName comp = new ComponentName("com.android.music",
    "com.android.music.MediaPlaybackActivity");
intent.setComponent(comp);
intent.setAction(Intent.ACTION_RUN);
startActivity(intent); 
```

刚启动音乐播放器

```
Intent i = new Intent(Intent.ACTION_VIEW);
Uri u = Uri.withAppendedPath(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,  "1");
startActivity(i); 
```

只播放第一首歌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-22T21:52:25.500

将此用于 15 以下的 api

```
Intent intent = new Intent("android.intent.action.MUSIC_PLAYER");
inintent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

稍后使用`android.intent.category.APP_MUSIC`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T06:33:52.890

要简单地启动音乐播放器，请执行以下操作：

```
Intent intent = new Intent(MediaStore.INTENT_ACTION_MUSIC_PLAYER);
startActivity(intent); 
```

请注意，这仅适用于 SDK API 8 级以上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:02:48.040

我认为你应该实现你的播放列表，你可以将你的列表传递给 mediaplayer 并在 mediaplayer.onCompletion () 中设置你的下一首歌曲。

```
player.setOnCompletionListener(new OnCompletionListener() {

                @Override
                public void onCompletion(MediaPlayer mp) {
                    Log.d("ON COMPLETE", "true");
                    player.isCompleteTrack = true;
                    if (mPlaylist.isLastTrack()) {

                        Log.i(PLAYER_ENGINE_TAG, " end playlist");
                        stop();
                    } else {

                        Log.i(PLAYER_ENGINE_TAG, " next song");
                        next();
                    }
                }
            }); 
```

下一个（）

```
@Override
    public void next() {

        if (!mPlaylist.isEmpty()) {

            mPlaylist.setSelectedMedia(mPlaylist.getSelectedMedia() + 1);
        }

        play();
    } 
```

或者您可以尝试打开 m3u（播放列表）文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-12T11:34:23.797

我最近在一些安全更新后也开始遇到这个问题。要解决此问题，您需要禁用来自默认音乐播放器的所有通知。通过转到设置/应用程序和通知/应用程序/音乐来执行此操作然后确保所有通知都设置为关闭并阻止应用程序访问您的存储。

# python - Python 3.x：使用 string.maketrans() 来创建 unicode 字符转换

> ID：10329290
> 
> 赞同：8
> 
> 时间：2012-04-26T07:52:36.367
> 
> 标签：python, string, unicode, python-3.x

我想编写以下代码：

```
import string
frm = b'acdefhnoprstuw'
to  = 'אקדיפהנופרסתאו'
trans_table = string.maketrans(frm, to)
hebrew_phrase = 'fear cuts deeper than swords'.translate(trans_table) 
```

上面的代码不起作用，因为`to`参数 to`string.maketrans(frm, to)`必须是字节序列，而不是字符串。问题是字节序列只能包含 ASCII 文字字符。因此，我无法进行将英语字符串翻译成希伯来语字符串的转换。原因是它会`string.maketrans()`返回一个字节对象。

有没有一种优雅的方式来为我的任务使用`string.maketrans()`and`translate()`函数（或与 unicode 一起工作的等效函数）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T10:02:39.860

您需要使用 str.maketrans()，它以两个 str 作为参数。

```
>>> frm = 'acdefhnoprstuw'
>>> to = 'אקדיפהנופרסתאו'
>>> trans_table = str.maketrans(frm, to)
>>> hebrew_phrase = 'fear cuts deeper than swords'.translate(trans_table)
>>> hebrew_phrase
'פיאר קאתס דייפיר תהאנ סוורדס' 
```

String.maketrans 在 Python 3.1 中仍然存在，但这只是因为他们错过了将其移至 3.0 中的 bytes.maketrans() 。它已经在 3.1 中被弃用，在 3.2 中它已经消失了。

# ios - 在 iOS 中播放短声音

> ID：10329291
> 
> 赞同：61
> 
> 时间：2012-04-26T07:52:37.007
> 
> 标签：ios, audio

我想我可以`AVAudioPlayer`用来播放声音，但是，我需要的只是播放一个短的声音，我不需要任何循环或对音量等进行细粒度控制。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-04-26T15:53:38.377

其他每一个答案都会泄漏内存（除非为*其中一个*答案启用了 ARC）......奇怪的是，最初标记为正确的答案`retainCount`无缘无故地被调用。

如果你有`alloc/init`什么东西，它需要被释放（除非你使用 ARC）。

如果你打电话`AudioServicesCreateSystemSoundID()`，你必须处理产生的声音。

请参阅[音频 UI 声音](http://developer.apple.com/library/ios/#samplecode/SysSound/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008018)示例。

基本上：

```
@interface MyClass:UI*ViewController // fixed
{
     SystemSoundID mySound;
}
@implementation MyClass
- (void) viewDidLoad {
    [super viewDidLoad];
    AudioServicesCreateSystemSoundID(.... URL ...., &mySound);
}

- (void) playMySoundLikeRightNowReally {
    AudioServicesPlaySystemSound(mySound);
}

- (void) dealloc {
   AudioServicesDisposeSystemSoundID(mySound);
   [super dealloc]; // only in manual retain/release, delete for ARC
}
@end 
```

为了完整性：
添加 AudioToolbox.framework
`#import <AudioToolbox/AudioToolbox.h>`

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-04-26T08:09:11.960

对于短的声音片段（少于 30 秒），有一个 SystemSounds 库，非常好。

优点：您不需要单独管理音量设置。声音在单独的线程中播放，音频剪辑的加载和播放速度非常快。简而言之，您将此剪辑视为另一个系统声音。

缺点：您无法提供单独的音频控制设置。它与系统声音的设置有关。你不能玩超过 30 秒。您可能无法应用任何声音过滤器来增强音频效果。

肯定有更多的优点和缺点，但这些是我能想到的，从我的脑海中浮出水面。

使用这个导入：`<AudioToolbox/AudioToolbox.h>` 添加 AudioToolbox 框架，然后调用下面的方法，如 [self playSound]，无论你想在哪里播放剪辑。

```
-(void) playSound {
    NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"changeTrack" ofType:@"aif"];
    SystemSoundID soundID;
    AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath: soundPath], &soundID);
    AudioServicesPlaySystemSound (soundID);
    [soundPath release];
} 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-10-01T04:24:14.703

# 迅速

这里的其他答案使用了 Objective-C，所以我在这里提供了一个 Swift 版本。Swift 使用自动引用计数（ARC），所以我不知道这个答案有任何内存泄漏问题（正如在接受的答案中所警告的那样）。

# 使用音频工具箱

`AudioToolbox`当您不需要太多控制它们的播放方式时，您可以使用该框架播放短声音。

以下是您将如何设置它：

```
import UIKit
import AudioToolbox

class PlaySoundViewController: UIViewController {

    var soundURL: NSURL?
    var soundID: SystemSoundID = 0

    @IBAction func playSoundButtonTapped(sender: AnyObject) {

        let filePath = NSBundle.mainBundle().pathForResource("yourAudioFileName", ofType: "mp3")
        soundURL = NSURL(fileURLWithPath: filePath!)
        if let url = soundURL {
            AudioServicesCreateSystemSoundID(url, &soundID)
            AudioServicesPlaySystemSound(soundID)
        }
    }
} 
```

笔记：

*   这个例子改编自[How to play a short sound clip with AudioToolbox in Swift](http://fvimagination.hubpages.com/hub/Play-a-short-sound-clip-with-AudioToolbox-in-Swift)。
*   请记住将`yourAudioFileName.mp3`（或`.wav`等）添加到您的项目中。
*   记得`import AudioToolbox`
*   这个答案将代码放在 IBAction 按钮点击中，但当然，它也可以很容易地放在另一个函数中。

# 使用 AVAudioPlayer

通过导入`AVFoundation`框架，您可以使用`AVAudioPlayer`. 它适用于短音频剪辑和长歌曲。与使用 AudioToolbox 方法相比，您还可以更好地控制播放。

以下是您将如何设置它：

```
import UIKit
import AVFoundation

class PlaySoundViewController: UIViewController {

    var mySound: AVAudioPlayer?

    // a button that plays a sound
    @IBAction func playSoundButtonTapped(sender: AnyObject) {
        mySound?.play() // ignored if nil
    }

    override func viewDidLoad() {
        super.viewDidLoad()

        // initialize the sound
        if let sound = self.setupAudioPlayerWithFile("yourAudioFileName", type: "mp3") {
            self.mySound = sound
        }
    }

    func setupAudioPlayerWithFile(file: NSString, type: NSString) -> AVAudioPlayer? {

        let path = NSBundle.mainBundle().pathForResource(file as String, ofType: type as String)
        let url = NSURL.fileURLWithPath(path!)
        var audioPlayer: AVAudioPlayer?
        do {
            try audioPlayer = AVAudioPlayer(contentsOfURL: url)
        } catch {
            print("Player not available")
        }

        return audioPlayer
    }
} 
```

笔记：

*   这个例子改编自[Learn To Code iOS Apps With Swift Tutorial 5: Making it Beautiful (Adding Sound)](http://www.raywenderlich.com/114298/learn-to-code-ios-apps-with-swift-tutorial-5-making-it-beautiful)
*   请记住`import AVFoundtation`并添加`yourAudioFileName.mp3`到您的项目中。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-04-26T12:19:19.367

最近，我用这段代码播放了简短的 mp3 音频，效果很好：-

在@implementation 下方声明

```
NSString *path;

NSURL *url;

//where you are about to add sound 

path =[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"quotes_%d",soundTags] ofType:@"mp3"];

    url = [NSURL fileURLWithPath:path];
    player = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:NULL];
    [player setVolume:1.0];
    [player play];

//just add AVFoundation framework 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-04-26T08:06:45.300

我用这段代码在 iOS 上播放了一个简短的 aiff-sound

```
#import <AudioToolbox/AudioServices.h> 

SystemSoundID completeSound;
NSURL *audioPath = [[NSBundle mainBundle] URLForResource:@"downloadCompleted" withExtension:@"aiff"];
AudioServicesCreateSystemSoundID((CFURLRef)audioPath, &completeSound);
AudioServicesPlaySystemSound (completeSound); 
```

希望这可以帮助。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-05-09T08:58:04.073

**简单干净的 Swift 3 版本**

我喜欢更多地控制我的声音，所以我使用了 AVFoundation。

```
import AVFoundation

class TodayViewController: UIViewController {

  var clink: AVAudioPlayer?
  var shatter: AVAudioPlayer?

  override func viewDidLoad() {
    super.viewDidLoad()

    // initialize the sound
    shatter = setupAudioPlayer(withFile: "shatter", type: "wav")
    clink = setupAudioPlayer(withFile: "clink", type: "wav")
  }

  func setupAudioPlayer(withFile file: String, type: String) -> AVAudioPlayer? {
    let path = Bundle.main.path(forResource: file, ofType: type)
    let url = NSURL.fileURL(withPath: path!)
    return try? AVAudioPlayer(contentsOf: url)
  }

  func onClick() {
    clink?.play()
  }
} 
```

确保将声音文件添加到项目中并导入 AVFoundation。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-02-28T16:16:45.640

我的回答是比尔的回答，但我在没有 init 或 dealloc 的情况下使用它，并在播放后释放声音：

```
- (void)playSound:(NSURL *)url
    SystemSoundID ssID = 0;
    AudioServicesCreateSystemSoundID((CFURLRef)url, &ssID);
    AudioServicesAddSystemSoundCompletion(ssID, NULL, NULL, (AudioServicesSystemSoundCompletionProc)MyAudioServicesSystemSoundCompletionProc, NULL);
    AudioServicesPlaySystemSound(ssID);
    //AudioServicesDisposeSystemSoundID(ssID);
}

void MyAudioServicesSystemSoundCompletionProc (SystemSoundID  ssID, void *clientData) {
    AudioServicesDisposeSystemSoundID(ssID);
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-01-09T16:25:10.197

# 使用斯威夫特 4

```
import AudioToolbox

func playSoundEasy(note : String) {
    var soundURL: NSURL?
    var soundID: SystemSoundID = 0

    let filePath = Bundle.main.path(forResource: note, ofType: "wav")
    soundURL = NSURL(fileURLWithPath: filePath!)
    if let url = soundURL {
        AudioServicesCreateSystemSoundID(url, &soundID)
        AudioServicesPlaySystemSound(soundID)
    }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-01-17T00:16:52.273

这是一种快速清理方法，您可以复制并在您的应用中使用：

```
-(BOOL) playSoundFXnamed: (NSString*) vSFXName Loop: (BOOL) vLoop
{
    NSError *error;

    NSBundle* bundle = [NSBundle mainBundle];

    NSString* bundleDirectory = (NSString*)[bundle bundlePath];

    NSURL *url = [NSURL fileURLWithPath:[bundleDirectory stringByAppendingPathComponent:vSFXName]];

    AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];

    if(vLoop)
        audioPlayer.numberOfLoops = -1;
    else
        audioPlayer.numberOfLoops = 0;

    BOOL success = YES;

    if (audioPlayer == nil)
    {
        success = NO;
    }
    else
    {
        success = [audioPlayer play];
    }
    return success;
} 
```

然后使用：

```
[self playSoundFXnamed:@"someAudio.mp3" Loop: NO]; 
```

如果你要循环，那么你需要把你`AVAudioPlayer *audioPlayer`带到你的课堂上才能停止声音。如果你只是想要一个简短的声音，你不会这样做。

使用 ARC……我从来没有对 NSError 做过任何事情，所以如果你喜欢就使用它……

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-01-11T01:35:48.387

很多答案令人困惑，有些正在使用`AudioToolbox`框架，与框架不同`AVAudioFoundation`......这就是我所做的。在`.h`文件中，我将此代码放入：

`@property (nonatomic, retain) AVAudioPlayer *player;`

此代码声明了一个名为“player”的音频播放器。在`.m`文件中，在您的`@implementation`声明下，添加`@synthesize player`. 这综合了该`player`属性。

在您想要的任何功能中，通过添加这行代码将您的声音绑定到播放器，其中`yourSound`是声音文件的名称，并且`aif`是您的文件扩展名：

`player = [[AVAudioPlayer alloc] initWithContentsOfURL:[[NSBundle mainBundle] URLForResource:@"yourSound" withExtension:@"aif"] error:nil]`

我知道 Apple 文档说要声明一个字符串和一个 NSURL，但是如果你将它组合成一行，那么你以后就不必处理它了。此外，由于这是您`ViewController.m`文件中的一个属性，因此您不必继续设置该`player`对象以与您的声音相关联。

其他答案还包括使用 a `SystemSoundID`，但这也施加了一些限制，例如“文件不能超过 30 秒”、“它必须采用特定格式”和作品。这样，它可以一次播放多个声音（如果您正在开发音板），并且更容易创建声音。

要真正播放您的声音，请插入这一行（是的，这真的很简单）：

`[player play]`

如果您使用 ARC，则无法手动处理播放器，因为系统会为您处理。如果您是开发新手并且使用的是最新版本的 Xcode，那么您启用了 ARC。如果由于某种奇怪的原因您不这样做，那么用于处理所使用资源的代码`player`是：

`[player release]`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-09T12:29:32.407

From [Sound 仅适用于设备，但不适用于模拟器](https://stackoverflow.com/questions/10351199/sound-does-only-work-on-device-but-not-in-simulator)

[Nick](https://stackoverflow.com/users/422133/nick-lockwood)创建了一个库，可用于在 iOS 和 Mac 应用程序中播放声音。

见[nicklockwood/SoundManager](https://github.com/nicklockwood/SoundManager)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-07-14T06:35:03.760

请参考[简单的iOS音频播放](http://gregheo.com/blog/simple-audio/)

```
- (void)playSound
{
    SystemSoundID soundId;

//    NSURL *soundURL = [[NSBundle mainBundle] URLForResource:@"sample"
//                                              withExtension:@"caf"];
//    AudioServicesCreateSystemSoundID((__bridge CFURLRef)soundURL, &soundId);

    NSString *path = [[NSBundle mainBundle] pathForResource:@"sample" ofType:@"mp3"];
    AudioServicesCreateSystemSoundID((__bridge CFURLRef)[NSURL fileURLWithPath:path], &soundId);
    AudioServicesAddSystemSoundCompletion(soundId,
                                      NULL,
                                      NULL,
                                      systemAudioCallback,
                                      NULL);
    AudioServicesPlaySystemSound(soundId);
    //AudioServicesPlayAlertSound(soundId);
}

- (void) systemAudioCallback(SystemSoundID soundId, void *clientData)
{
    AudioServicesRemoveSystemSoundCompletion(soundId);
    AudioServicesDisposeSystemSoundID(soundId);
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-04-26T08:11:18.137

查看 systemsound 以播放短音频文件

包括音频工具箱框架

并创建

systemsoundid 对象

```
NSString *soundPath =  [[NSBundle mainBundle] pathForResource:file ofType:@"aiff"];
AudioServicesCreateSystemSoundID((CFURLRef)[NSURL fileURLWithPath: soundPath], &soundID);
AudioServicesPlaySystemSound (soundID); 
```

# c# - 创建自定义 TreeView/TreeNode

> ID：10329293
> 
> 赞同：4
> 
> 时间：2012-04-26T07:52:40.173
> 
> 标签：c#, asp.net, webforms, treeview, treenode

我需要扩展 TreeNode 类，以便可以向每个节点添加自定义属性（因为 WebForms TreeNode 不包含 Tag 属性）。所以这是我的CustomTreeNode：

```
public class CustomTreeNode : TreeNode
{

    public CustomTreeNode()
    {               
    }

    public CustomTreeNode(int nodeId, string nodeType)
    {
        NodeId = nodeId;
        NodeType = nodeType;
    }

    public string NodeType { get; set; }
    public int NodeId { get; set; }
} 
```

如果我创建一个 CustomTreeNode 并将其添加到 TreeView：

```
CustomTreeNode node = new CustomTreeNode(1, "CustomType");            
treeView.Nodes.Add(node); 
```

然后我会得到一个强制转换异常，执行以下操作：

```
CustomTreeNode selectedNode = (CustomTreeNode)TreeView.SelectedNode; 
```

因为 TreeView 返回的是 TreeNode，而不是 CustomTreeNode。

我做了一些阅读，看起来我需要扩展 TreeView 类，并重写 CreateNode() 方法以返回 CustomTreeNode 而不是 TreeNode。所以我创建了这个：

```
public class CustomTreeView : TreeView
{
    protected override TreeNode CreateNode()
    {
        return new CustomTreeNode();
    }
} 
```

然而，问题是 CreateNode() 不接受任何参数，因此您必须调用 CustomTreeNode 类的空构造函数。因此，当我在上面创建我的 CustomTreeNode 时，当我从 CustomTreeView 取回它时，nodeId 和 nodeType 值已经丢失，因为空构造函数返回一个没有任何值的节点。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T08:55:28.787

这就是我想出的（专家，欢迎任何建议）。`CustomTreeNode`在后面的代码中实例化s 并通过 setter 设置属性。修改您的`CustomTreeNode`类以将值保留在 ViewState 中。您的自定义树视图返回的节点`CreateNode`将加载 ViewState 信息。

树节点类：

```
[DefaultProperty("Text")]
[ToolboxData("<{0}:CustomTreeNode runat=server></{0}:CustomTreeNode>")]
public class CustomTreeNode : TreeNode
{
    private const int NODE_TYPE = 1;
    private const int NODE_ID = 2;

    public string NodeType { get; set; }
    public int NodeId { get; set; }

    protected override void LoadViewState(Object savedState)
    {
        if (savedState != null)
        {
            object[] myState = (object[])savedState;
            if (myState[0] != null)
                base.LoadViewState(myState[0]);
            if (myState[NODE_TYPE] != null)
                this.NodeType = (string)myState[NODE_TYPE];
            if (myState[NODE_ID] != null)
                this.NodeId = (int)myState[NODE_ID];

        }
    }

    protected override Object SaveViewState()
    {
        object baseState = base.SaveViewState();
        object[] allStates = new object[3];
        allStates[0] = baseState;
        allStates[NODE_TYPE] = this.NodeType;
        allStates[NODE_ID] = this.NodeId;

        return allStates;
    }
} 
```

树视图类：

```
[DefaultProperty("Text")]
[ToolboxData("<{0}:CustomTreeView runat=server></{0}:CustomTreeView>")]
public class CustomTreeView : TreeView
{
    protected override TreeNode CreateNode()
    {
        // Tree node will get its members populated with the data from VIEWSTATE
        return new CustomTreeNode();
    }
} 
```

简单的 .aspx 文件（假设您的自定义控件在程序集“Foo”和命名空间“Bar”中定义：

```
<%@ Register TagPrefix="customControl" Assembly="Foo" Namespace="Bar"  %>

<customControl:CustomTreeView ID="sampleTree" 
    runat="server" onselectednodechanged="sampleTree_SelectedNodeChanged"></customControl:CustomTreeView>
<asp:Label ID="lblSelectedNode" runat="server" ></asp:Label> 
```

代码隐藏：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            PopulateTree();
        }
    }

    private void PopulateTree()
    {
        sampleTree.Nodes.Clear();
        CustomTreeNode root = new CustomTreeNode();
        root.Value = "root node";

        sampleTree.Nodes.Add(root);

        // Creating some fake nodes (you would of course be using real data)
        for (int i = 0; i < 10; i++)
        {
            CustomTreeNode child = new CustomTreeNode();
            child.NodeId = i;               // Saved in ViewState
            child.NodeType = "Type " + i;   // Saved in ViewState
            child.Value = child.NodeType;
            root.ChildNodes.Add(child);
        }
    }

    protected void sampleTree_SelectedNodeChanged(object sender, EventArgs e)
    {
        CustomTreeView cTreeView = (CustomTreeView) sender;
        lblSelectedNode.Text = ((CustomTreeNode)cTreeView.SelectedNode).NodeType;
    } 
```

# wpf - 应用 LayoutTransform 与 RenderTransform 的性能影响？

> ID：10329298
> 
> 赞同：10
> 
> 时间：2012-04-26T07:53:01.873
> 
> 标签：wpf, performance, rendertransform, layouttransform

我已经处理过 LayoutTransform 和 RenderTransform 并且我知道每个都适合我在以前的项目中发现的特定场景。

然而，从性能的角度来看，在使用 WPF 分析工具时，例如，哪个对 UI 性能的影响较小？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T07:59:11.407

由 MSDN 指定：

> 要将转换应用于 FrameworkElement，请创建一个 Transform 并将其应用于 FrameworkElement 类提供的两个属性之一： LayoutTransform – 在布局传递之前应用的转换。应用变换后，布局系统会处理元素变换后的大小和位置。RenderTransform – 修改元素外观但在布局传递完成后应用的变换。通过使用 RenderTransform 属性而不是 LayoutTransform 属性，您可以获得性能优势。你应该使用哪个属性？**由于它提供的性能优势，请尽可能使用 RenderTransform 属性，尤其是在使用动画变换对象时。**在缩放、旋转或倾斜时使用 LayoutTransform 属性，并且您需要元素的父级来调整元素的变换大小。请注意，当它们与 LayoutTransform 属性一起使用时，TranslateTransform 对象似乎对元素没有影响。这是因为布局系统将翻译后的元素返回到其原始位置作为其处理的一部分。

并且：

> 如果在不需要布局系统完全通过的场景中调用 LayoutTransform，可能会导致应用程序性能下降。当您将 LayoutTransform 应用于 Panel 的 Children 集合时，它会触发布局系统的新通道并强制重新测量和重新排列所有屏幕上的对象。如果您要更新完整的应用程序用户界面 (UI)，那么此功能可能正是您所需要的。但是，如果您不需要完整的布局传递，请使用 RenderTransform 属性，该属性不会调用布局系统，因此对于这种情况通常是更好的选择。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-26T08:01:44.670

为了补充 gliderkite 的答案，RenderTransforms 也将在 GPU 有能力时由 GPU 处理，而 LayoutTransforms 在 CPU 上完成。

# c# - 使用 PGP 密钥加密

> ID：10329299
> 
> 赞同：2
> 
> 时间：2012-04-26T07:53:02.740
> 
> 标签：c#, .net, encryption, pgp

我最近被分配到加密一些数据并将其发送到我们的服务器的任务。我在互联网上找到了一些有价值的资源，但它们都需要公钥、私钥和密码才能加密。请问有什么简单的方法可以只用 pgp 密钥加密，因为这就是我得到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:30:19.470

我假设你已经获得了一个公开的 OpenPGP 密钥。这足以对数据进行加密，旨在由向您提供公钥的人解密。

在 .NET 中，您可以使用我们 SecureBlackbox 产品的 BouncyCastle 或[OpenPGPBlackbox](http://www.eldos.com/sbb/net-pgp.php)包。SecureBlackbox 附带大量示例并提供支持（与替代品不同）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T09:28:19.703

公共 PGP 密钥可以加密数据并验证签名。私有 PGP 密钥可以解密数据和签署数据。如果您有某人的公钥，只需使用它，它不会提示您输入密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T07:55:19.290

PGP 只使用一对私钥和公钥。据我所知，秘密密码是可选的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-20T19:40:38.070

最近，我正在做 PGP 加密并将文件发送到 SFTP 服务器。这是我使用 Python 遵循的简单步骤：

`pip install py-pgp`

将 public_key 保存在同一目录中

获取收件人信息`gpg --list-keys`

脚本：

```
import os, gnupg
key = '<public_key>.asc'
src = '<file_to_be_encrypted>'
dst = './' #destination, it could be current directory
def encrypt(key, src):
    home = os.path.join(os.getcwd(), '')
    gpg = gnupg.GPG(gnupghome=home)
    with open(key, "rb") as f:
        keys = gpg.import_keys(f.read())

    with open(src, "rb") as f:

         result = gpg.encrypt_file(f, recipients='<name_retrieved_from_public_key>', output='<file_name>.pgp', always_trust=True)
    if not result:
        raise RuntimeError(result.status)

encrypt(key, src) 
```

这将为您提供同一目录中的加密文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-19T18:23:03.630

任何语言的标准 PGP 加密过程如下：

### 第 1 步：生成您的私钥/公钥对

首先生成您的 OpenPGP 密钥对，例如使用[gnupg](https://www.gnupg.org/)。该对由发送方用来加密数据的公钥和接收方用来解密数据的私钥组成。

### 第 2 步：共享您的公钥并收集其他方的公钥

每一方都需要拥有所有其他方的公钥。要执行此步骤，您可以使用 U 盘提供您的公钥，或者将其上传到公钥服务器。

### 第 3 步：加密并发送您的数据

您编写数据并为收件人加密。您还可以对数据进行签名，以保证收件人可以验证数据是由您创建的。加密后，您将数据发送给收件人。

### 第 4 步：数据验证

您不必执行此步骤，但非对称加密（例如 PGP）的另一个好处是它允许身份验证。在您与合作伙伴交换公钥后，私钥可用于对加密内容进行数字签名，从而允许解密站点验证发件人的真实性。

使用私钥完成数据加密后，您可以使用接收方（可能还有其他方）已知的公钥加密会话密钥。之后，您可以选择创建加密数据的哈希并使用您的私钥对该哈希进行签名，这称为签名。

以例如 OpenPGP 格式保存数据。

### 第五步：解密数据并验证签名

如果您收到您解密的数据并且如果数据已签名，则验证签名以确保数据是由您拥有公钥的发件人发送的。

# java - 如何开始和停止亮点？

> ID：10329300
> 
> 赞同：0
> 
> 时间：2012-04-26T07:53:12.980
> 
> 标签：java, syntax-highlighting, spell-checking, jtextpane

我有一个看似很小的问题，但过去2天我找不到明确的答案。我正在创建一个自动完成拼写检查器来检查 JTextPane（称为`mainTxtTypeArea`）。我可以通过开始和结束索引获取用户正在处理的当前单词，但是当我只想突出显示一个特定单词时，荧光笔将继续超出键入的单词。这是文档事件发生时调用的代码：

```
public void checkWord(DocumentEvent e) {
            try {
                Highlighter redZigZag = mainTxtTypeArea.getHighlighter();
                int start = Utilities.getWordStart(mainTxtTypeArea, e.getOffset());
                int end = Utilities.getWordEnd(mainTxtTypeArea, e.getOffset());
                int length = end - start;
                String word = mainTxtTypeArea.getDocument().getText(start, length);

                if(dictionary.find(word) == false && Character.isWhitespace(word.charAt(0)) == false){
                    System.out.println("Incorrect: "+word);
                    //I found a zigzag highlighter online, but the default yields the same result
                    redZigZag.addHighlight(start, end, painter);
                } else {
                    System.out.println("Correct: "+word);
                }

            } catch (BadLocationException ex) {}
        } 
```

我也对任何替代方案持开放态度。我尝试使用样式，但它会引发异常，因为样式不能应用于文档侦听器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:59:02.743

好的，我找到了替代方案。我没有使用文档侦听器，而是使用 KeyReleased 操作事件来监视我的文本窗格，然后将拼写错误的单词设为红色斜体。代码如下：

```
private void mainTxtTypeAreaKeyReleased(java.awt.event.KeyEvent evt) {
    checkWord();
}

private void checkWord() {
    try {
        int start = Utilities.getWordStart(mainTxtTypeArea, mainTxtTypeArea.getCaretPosition());
        int end = Utilities.getWordEnd(mainTxtTypeArea, mainTxtTypeArea.getCaretPosition());
        int length = end - start;

        if(length > 0) {
            StyledDocument doc = mainTxtTypeArea.getStyledDocument();
            SimpleAttributeSet as = new SimpleAttributeSet();

            if(dictionary.find(doc.getText(start, length)) == false){
                StyleConstants.setItalic(as, true);
                StyleConstants.setForeground(as, Color.red);
            } else {
                StyleConstants.setItalic(as, false);
                StyleConstants.setForeground(as, Color.BLACK);
            }
            doc.setCharacterAttributes(start, length, as, false);
        }
    } catch (BadLocationException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

# javascript - 为什么这个while循环会使浏览器崩溃？

> ID：10329315
> 
> 赞同：1
> 
> 时间：2012-04-26T07:54:34.503
> 
> 标签：javascript, c++

我正在尝试比较类似片段与 javascript 和 C++ 之间的差异。这是我的片段：

```
var i = 0;

while (i<=10)
{
    document.write('Hello<br />');
    //i++;
} 
```

使用 C++，如果我编写一个等效的代码段，我记得控制台会永远打印该行，直到我输入 Ctrl + C。但是，使用 Javascript，如果我尝试打开浏览器，它会崩溃。这是否与浏览器试图永远加载“Hello”行直到我强制退出有关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T07:56:08.060

您不能像在 C++ 中那样停止在 javascript 中的进程。

在 javascript 中，大多数浏览器甚至都有循环执行次数的限制，并且大多数浏览器（如果不是全部）都会因这些类型的循环而崩溃。

JS中没有无限循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:59:10.270

浏览器可能不会崩溃，但它会检测到您的脚本出错并询问您是否要终止脚本。如果您回答“否”，那么它将永远循环并导致浏览器无法使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:03:00.387

浏览器将永远循环，您可以通过停止浏览器中的 js 使用来停止它的无限迭代。例如在 Firefox 中选择（停用 javascript）

在浏览器中停止java脚本是唯一的方法，但我相信有很多方法可以做到这一点。

# web-services - Spring 3 MVC Web 服务：许多具有相同名称的参数

> ID：10329317
> 
> 赞同：1
> 
> 时间：2012-04-26T07:54:37.880
> 
> 标签：web-services, spring, spring-mvc, parameter-passing, spring-3

我遇到了下一个问题。我已经在控制器中声明了一个方法，就像下一个一样，用作 Web 服务：

```
@RequestMapping(value = "/" + "prueba" , method = RequestMethod.GET)
public void prueba(ExampleBean pExample1, ExamlpleBean pExample2) {
    // Wonderful code here

} 
```

类 ExampleBean 只是一个 Bean：

```
public class ExampleBean implements Serializable {

   private String id;
   private String whatever;

   // getters, setters, and more.
} 
```

如果界面是这样的：

```
@RequestMapping(value = "/" + "prueba" , method = RequestMethod.GET)
public void prueba(ExampleBean pExample1) {
    // Wonderful code here

} 
```

每次我想调用该 Web 服务时，我都会通过以下方式调用 URL：

[http://myWebProject/prueba?id=1&whatever=hola](http://myWebProject/prueba?id=1&whatever=hola)

但是......当我必须为同一类的两个参数赋值时，我该怎么办？我的意思是，我不能重复参数，所以我不知道在编写 URL 时如何区分来自 pExample1 的 id 和来自 pExample2 的 id。

我的意思是，也有两个来自不同类的参数，但有一个同名的属性。例如，如果第二个参数来自 DifferentExampleBean 类，该类也有一个“id”参数。

非常感谢！

PS：我正在使用 StringHttpMessageConverter。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:27:54.580

您要做的是创建一个父类，该类将包含您感兴趣的特定字段，然后`ExampleBean`扩展`ExampleBean1`该父类，并且您只有一种类型要发送`prueba(ParentClass instance1, ParentClass instance2)`。

Where `instance1`will be instance of`ExampleBean`和`instance2`will be instance of`ExampleBean2`

# c# - 正则表达式 - 从 "[A]16 and 5th and A[20] and 15" 得到 [A]16, 5, A[20], 15

> ID：10329318
> 
> 赞同：2
> 
> 时间：2012-04-26T07:54:39.563
> 
> 标签：c#, regex, expression

我有一个这样的字符串 -`"[A]16 and 5th and A[20] and 15"`

我需要取值`[A]16`, `5`, `A[20]`, `15`. （数字和 [A]，如果存在的话）

我正在使用 C#。

```
 string[] numbers = Regex.Split("[A]16 and 5th and [A]20 and 15", @"\D+"); 
```

下面的代码只会给我数字。但我还需要 [A] 数字字体（如果存在）。

拜托，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:04:36.247

更通用的模式可能是：

```
@"\[[A-Z]][0-9]+|[A-Z]\[[0-9]+]|[0-9]+"

[[A-Z]][0-9]       - matches [Letter from A-Z]Number          example: [A]10
or |[A-Z]\[[0-9]+] - matches Letter from A-Z[Number]          example: A[10]
or |[0-9]+         - matches Numers from 1-N                  example: 5, or 15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:58:12.853

使用这种模式：`@"(\[A\])?\d+"`如果只有`[A]`s。
如果你也有`[B]`, `[C]`...你可以使用这个模式：`@"(\[[A-Z]\])?\d+"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:05:53.377

您可以使用此模式：

```
string lordcheeto = @".*?(\[A\]\d+|\d+|A\[\d+\]).*?"; 
```

它还会从您想要的匹配项中删除垃圾。虽然，由于工作方式`Split`，数组中会有空字符串。至于看似必要的一般情况，您可以使用：

```
string lordcheeto = @".*?(\[[A-Z]\]\d+|\d+|[A-Z]\[\d+\]).*?"; 
```

**代码**

```
using System;
using System.Text.RegularExpressions;

namespace RegExIssues
{
    class Program
    {
        static void Main(string[] args)
        {
            // Properly escaped to capture matches.
            string lordcheeto = @".*?(\[A\]\d+|\d+|A\[\d+\]).*?";
            string input = "[A]16 and 5th and A[20] and 15";

            executePattern("lordcheeto's", input, lordcheeto);

            Console.ReadLine();
        }

        static void executePattern(string version, string input, string pattern)
        {
            // Avoiding repitition for this example.
            Console.WriteLine("Using {0} pattern:", version);

            // Needs to be trimmed.
            var result = Regex.Split(input.Trim(), pattern);

            // Pipe included to highlight empty strings.
            foreach (var m in result)
                Console.WriteLine("|{0}", m);

            // Extra space.
            Console.WriteLine();
            Console.WriteLine();
        }
    }
} 
```

**测试**

[http://goo.gl/VNqpp](http://goo.gl/VNqpp)

**输出**

```
Using lordcheeto's pattern:
|
|[A]16
|
|5
|
|A[20]
|
|15
| 
```

**注释**

如果您需要更多内容或者这与其他字符串中断，请告诉我，我可能会对其进行修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T09:12:38.090

**尝试这个 ：**

```
(\[[A-Z]\][0-9]+)|([A-Z]\[[0-9]+\])|([0-9]+) 
```

**演示：**

[http://regexr.com?30p8v](http://regexr.com?30p8v)

# iphone - coreplot：转换坐标，有问题。[plotSpace plotPoint:plotPoint forPlotAreaViewPoint:point];

> ID：10329321
> 
> 赞同：2
> 
> 时间：2012-04-26T07:54:42.340
> 
> 标签：iphone, ios, core-plot

我想将触摸的点转换为 CPTXYPlotSpace 点。但我发现那里有带有真实坐标的偏移量。我发现，它从边界计算了 x 轴的一部分。我想将点映射到 x&y 轴的值。

我的英语很差……我想知道哪里错了？请告诉我 。

这是代码。

```
-(BOOL)plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceDownEvent:(id)event atPoint:(CGPoint)point
{    NSDecimal plotPoint[2]; 
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
    [plotSpace plotPoint:plotPoint forPlotAreaViewPoint:point]; 

   //HERE HAVE SOME OFFSET. I FIND ,it Calculated part of the x-axis from the border
    NSLog(@"touch plotPoint = %d, %f", 
    [[NSDecimalNumber decimalNumberWithDecimal:plotPoint[CPTCoordinateX]] intValue],
    [[NSDecimalNumber decimalNumberWithDecimal:plotPoint[CPTCoordinateY]] doubleValue]);
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T23:07:49.480

先将点转换为绘图区域的坐标系：

```
CGPoint plotAreaPoint = [graph convertPoint:point toLayer:graph.plotAreaFrame.plotArea];
[plotSpace plotPoint:plotPoint forPlotAreaViewPoint:plotAreaPoint]; 
```

# php - PHP动态值中的复选框混淆

> ID：10329327
> 
> 赞同：0
> 
> 时间：2012-04-26T07:55:21.477
> 
> 标签：php, checkbox

我在表单中有输入

```
<form name="frmAdd" method="POST" action="/index.php?a=save">
Status : <input type="checkbox" id="status" name="chkActive" value="" ><label for="status">Active</label>
</form> 
```

但是当我通过 $_POST['chkActive'] 调用它的值时，它在该页面上给出了相同的值。我是否检查了该值。

请告诉我我怎么知道这个复选框是否被选中（在 PHP 中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:01:01.910

如果您只使用一个复选框，您可以这样做：

```
<input type="checkbox" id="status" name="chkActive" value="1" > 
```

在 PHP 中

```
if (isset($_POST['chkActive'])) {
   //its checked
} 
```

但您需要确保在 HTML 中设置了一个值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:01:15.020

```
<form name="frmAdd" method="POST" action="/index.php?a=save">
  Status : <input type="checkbox" id="status" name="chkActive" value="1" ><label      for="status">Active</label>
</form>

<?php if($_POST['chkActive']=='1'){
  echo "is Active";
}else{
  echo "not Active";
} 
```

复选框仅在选中时传递值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:12:24.553

澄清它是如何工作的。

```
<input type="checkbox" id="status" name="chkActive" 
```

如果未选中复选框（由用户选中），则不会向服务器发送任何内容。“chkActive”将不存在。所以我们使用 isset() 来检查它。

# ruby - Ruby：如何转换字符串中的温度单位？

> ID：10329329
> 
> 赞同：3
> 
> 时间：2012-04-26T07:55:56.023
> 
> 标签：ruby, regex, string

Ruby 是否有一种优雅的正则表达式来替换字符串中所有出现的°C 到°F（同时转换单位）？例如：

> “今天是 25°C，明天是 27°C。”

应该导致类似：

> “今天是 77°F，明天是 81°F。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:39:56.423

```
# -*- encoding : utf-8 -*-
def c2f(c)
  c*9.0/5+32
end

def convert(string)
  string.gsub(/\d+\s?°C/){|s| "#{c2f(s[/\d+/].to_i)}°F"}
end

puts convert("Today it is 25°C and tomorrow 27 °C.")
# result is => Today it is 77.0°F and tomorrow 80.6°F. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:33:33.983

看起来的块形式`String#gsub`是你需要的：

```
s = "Today it is 25C and tomorrow 27 C." # 
re = /(\d+\s?C)/ # allow a single space to be present, need to include the degree character
s.gsub(re) {|c| "%dF" % (c.to_f * 9.0 / 5.0 + 32.0).round } #=> "Today it is 77F and tomorrow 81F." 
```

我丢失了学位字符（我使用了 Ruby 1.8.7，它对 Unicode 不太友好），但希望这足以让我们了解可能发生的事情。

# javascript - 在 textarea 中运行显示 - JavaScript

> ID：10329331
> 
> 赞同：0
> 
> 时间：2012-04-26T07:56:00.493
> 
> 标签：javascript, textarea

我想知道如何将输出保存在 textarea 框中。我正在编写一个 javascript 程序来将英语单词翻译成猪拉丁语，所以你好就是 ellhay。无论如何，假设我输入“are”并在 textarea 中将其翻译为“reaay”，然后我输入“hello”（翻译“ellohay”），textarea 应该在其下输出“ellohay”和“reaay”

我已经尝试过了（现在编辑尝试使用名为输出的数组）：

```
function printLatinWord() { 
    <!--
        var outputs = new Array(); 
var input = document.form.english.value;
    var lowercase = input.toLowerCase();
        var fininput = lowercase.split (" ");
    var output = ""; 

for (i = 0; i < fininput.length; i++) { 
    var result = fininput[i]; 
    output += result.substring (1, result.length) + result.substring(0,1) + "ay ";
    document.form.piglat.value = output + "\n"; 
    var j = 0;
    output = outputs[j];
    j++;

}
    /* 
var newtext = "\n"; 
document.form.piglat.value = newtext + document.form.piglat.value;
   //trying to keep running display of conversions 
var newtext = ("\n");
output += newtext;*/

} 
```

基本上没有什么新的事情发生在最后，var **newtext**应该是存储输出的位置.. 但我不确定如何从 textarea 中获取值并将它们保留在那里以显示*在*新输出下，如果那样的话说得通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:04:11.363

`document.form.piglat.value += newtext;`附加`newtext`到现有值。如果你想把它*放在前面*，请使用

`document.form.piglat.value = newtext + document.form.piglat.value;`

# opencv - opencv如何在光流后跟踪物体？

> ID：10329340
> 
> 赞同：1
> 
> 时间：2012-04-26T07:56:43.760
> 
> 标签：opencv

在对视频进行光流 (lk) 之后，根据这些数据找到对象并跟踪它们的最佳方法是什么？

这可能听起来很无聊，但我希望能够在物体周围定义一个清晰的轮廓，所以如果它是一个形状怪异的瓶子或能够检测边缘的东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T08:04:26.870

我不确定 LK 是不是最好的算法，因为它计算一组稀疏的角状点的运动，并且跟踪通常从密集的光流结果（例如 Farneback 或 Horn Schunck）中表现得更好。在计算流程之后，作为第一步，您可以对其范数进行一些阈值处理（以保留移动部分），并尝试从该结果中提取连接区域。但请注意，如果您没有要跟踪的对象的模型，您的任务将不会轻松。

另一方面，如果您主要对跟踪感兴趣并且可以接受一点交互性，则可以查看 camshift 示例代码，了解如何根据其外观选择和跟踪图像区域。

**- - 编辑 - -**

如果您的相机是静态的，请改用背景减法。使用 OpenCV 2.4 beta，您必须在视频模块文档中查找类 BackgroundSubtractor 及其子类。

另请注意，光流可以是实时的（或不是很远），具有良好的参数选择，也可以使用 GPU 实现。在 Windows 上，您可以使用来自[TU Graz/Gpu4Vision 组](http://gpu4vision.icg.tugraz.at)的 flowlib 。OpenCV 也有一些 GPU 密集的光流，例如 gpu::BroxOpticalFlow 类。

**--- 编辑 2 ---**

将单像素检测加入大对象是一项称为[连接组件标记](https://en.wikipedia.org/wiki/Connected-component_labeling)的任务。有一个快速算法，在 OpenCV 中实现。所以这给了你一个管道，它是：

*   运动检测（像素级）--->连接的comp。标记--->对象跟踪（添加运动信息，卡尔曼滤波的可能轨迹......）。

但是我们将不得不停在这里，因为我们很快就会远远超出您最初问题的范围;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-01T18:39:40.883

您可以使用 TLD 或 CLM 进行对象跟踪（它松散地基于光流跟踪和模型学习同时进行的思想）。您可以找到以下有用的链接 [https://www.gnebehay.com/tld/](https://www.gnebehay.com/tld/) [https://www.gnebehay.com/cmt/](https://www.gnebehay.com/cmt/)

# r - 更高分辨率的海岸线数据是否可用于 R

> ID：10329343
> 
> 赞同：5
> 
> 时间：2012-04-26T07:56:50.983
> 
> 标签：r, ggmap

我希望为相对较小的海岸区域（经度和纬度延伸约 3 度）创建一张地图。有没有人知道 R 的现成数据比 mapdata 包中的高分辨率数据提供的分辨率更高？或者有人知道导入这些数据的来源和方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T08:17:10.613

我不了解地图数据，但谷歌地图和openstreetmaps 可以提供小区域。该`ggmap`软件包使地图的获取和呈现相当简单。下面的代码给出了巴布亚新几内亚西部省 Gogodala 地区的水道。分辨率够高吗？

```
library(ggmap)
pngMAP_df = get_map(location = c(142.5, -8.10, 143.1, -7.9), source = "osm", zoom = 12)
ggmap(pngMAP_df) 
```

# android - 使用模拟器测试 Web 应用程序

> ID：10329344
> 
> 赞同：0
> 
> 时间：2012-04-26T07:56:53.810
> 
> 标签：android, ios, blackberry, jquery-mobile, symbian

我目前是一个带有 jquery mobile 的移动网络应用程序。有没有一种方法可以在我的本地机器上使用适用于 ipad、ios、黑莓、android、symbian 和其他主要操作系统的模拟器来测试应用程序，而无需连接到互联网或使用真实的手机或硬件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:20:08.917

您可能对涟漪项目感兴趣。目前它是一个用于模拟不同设备的 chrome 扩展。当然它有缺点，但在某些情况下它可能非常有用。

[http://ripple.incubator.apache.org/](http://ripple.incubator.apache.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:07:19.190

1.  为了避免连接到互联网：在 localhost 上运行您的服务器
2.  为避免使用实际硬件，请使用您感兴趣的平台的 SDK 附带的模拟器。但首先，只需使用计算机浏览器；我推荐 Safari，因为它基于 WebKit，就像 iOS 和 Android 一样使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T14:33:11.017

我倾向于做的一件事是将 FireFox 与[用户代理切换器](https://addons.mozilla.org/en-US/firefox/addon/user-agent-switcher/)插件一起使用。这允许您在浏览器中配置一系列用户代理标识符，以“欺骗”您的 jQuery 移动网站，使其认为它正在处理特定的设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T17:40:15.793

如果您只想加载一个移动网址并查看它在不同手机上的外观，您可以试试这个网站

[http://www.synthphone.com/](http://www.synthphone.com/)

# python - |= 运算符在 python 中的作用是什么？

> ID：10329347
> 
> 赞同：1
> 
> 时间：2012-04-26T07:56:59.373
> 
> 标签：python, operators

如[以下配方](http://code.activestate.com/recipes/409002/)所示，使用了`|=`运算符。我以前从未见过它，也没有记录。这是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T07:58:12.953

这是一个就地的`|`. `a |= b`主要相当于. *_*`a = a | b`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T08:10:49.190

`|=`是所谓的[扩充赋值语句](http://docs.python.org/reference/simple_stmts.html#augmented-assignment-statements)。它的目的是做一个就地或操作，就像[正常`|`操作](http://docs.python.org/reference/expressions.html#binary-bitwise-operations)一样。

然而，存在一些细微的差异，因为对象的不同方法被调用：for `|`, it is[`__or__()`](http://docs.python.org/reference/datamodel.html#object.__or__)或[`__ror__()`](http://docs.python.org/reference/datamodel.html#object.__ror__), for `|=`, it is [`__ior__()`](http://docs.python.org/reference/datamodel.html#object.__ior__)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T11:54:11.860

在您询问的特定食谱中：

```
startupinfo.dwFlags |= subprocess.STARTF_USESHOWWINDOW 
```

`dwFlags`是一个位掩码，也就是说，它通过打开整数中的适当位来将多个标志存储在单个整数值中。在这种情况下，`STARTF_USESHOWWINDOW`的值为`1`，这意味着如果`dwFlags`整数中的最低有效位为 ，则设置此标志`1`，如果 LSB 为 ，则不设置此标志`0`。

在这种情况下，`|=`运算符所做的是获取左操作数并对其进行更改，以便将`1`左操作数中的位设置在其中，而其余位则保持不变。

例如，如果它设置了一些标志，使其之前的二进制表示是 ，例如，`00101000`它将被设置为`00101001`，添加`subprocess.STARTF_USESHOWWINDOW`到设置的标志而不影响在操作之前设置的其他标志。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T07:58:35.500

`a |= b` 意思相同`a = a | b`。

# ios - 如何停止处理手势

> ID：10329355
> 
> 赞同：2
> 
> 时间：2012-04-26T07:57:44.320
> 
> 标签：ios, gesture

在我的应用程序中，我有一个 tapGesture、panGesture、rotationGesture 和 pinchGesture。tapGesture 是所有手势的起点，它向我展示了选择了哪个子视图。

在我输入一个处理 ImagePicker 的按钮后，子视图仍处于选中状态，因此它仍在处理手势。

我的问题：是否有任何声明停止处理手势？

**编辑**

我不需要gestureRecognizer，因此我将它们置于非活动状态：

```
panRecognizer.enabled = NO;
pinchRecognizer.enabled = NO;
rotationRecognizer.enabled = NO; 
```

因此，如果我需要它们，我希望在处理 tapRecognizer 时让它们工作，但这里的识别器不会从非活动状态变为活动状态。

```
[panRecognizer isEnabled];
pinchRecognizer.enabled = YES;
rotationRecognizer.enabled = YES; 
```

**编辑**

我的视图是一个 ViewController，子视图在 imageView 上。
识别器被分配给 self.imageView。
在第一种方法中，我禁用识别器，在第二种方法中，我启用它们

```
- (IBAction)photo: (id) sender {

    panRecognizer.enabled = NO;
    pinchRecognizer.enabled = NO;
    rotationRecognizer.enabled = NO;

    UIImagePickerController* picker = [[UIImagePickerController alloc]init];
    picker.delegate = self;
    picker.allowsEditing = NO;

    @try {

        picker.sourceType=UIImagePickerControllerSourceTypeCamera;
        [self presentModalViewController:picker animated:YES];
    }
    @catch (NSException * e) {

        UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"Error" message:@"Camera is not available" 
                                                        delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease];
        [alert show];
    }
    [picker release];
}

- (IBAction)oneTap: (UIGestureRecognizer*)gestureRecognizer { 
    NSLog(@"oneTap");
    float differenz = 2000;
    [panRecognizer isEnabled];
    pinchRecognizer.enabled = YES;
    rotationRecognizer.enabled = YES;

    for (UIView* const subview in array) {  
        subview.opaque = YES;
        CGPoint const point = [gestureRecognizer locationInView:self.imageView];

            float zwischenS = sqrt(powf(point.x - subview.frame.origin.x,2)) + sqrt(powf(point.y - subview.frame.origin.y,2));

            if (differenz > zwischenS ) {

                differenz = sqrt(powf(point.x - subview.frame.origin.x,2)) + sqrt(powf(point.y - subview.frame.origin.y,2));
                newView.layer.borderColor = [[UIColor clearColor]CGColor];
                newView = subview;

                subview.layer.borderColor = [[UIColor whiteColor]CGColor];
                subview.layer.borderWidth = 3.0f;
                [imageView bringSubviewToFront: subview]; 
            } 
    }
} 
```

我的错误是什么？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T07:59:45.933

财产`[UIGestureRecognizer enabled]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T08:49:35.373

```
//YOU CREATE GESTURES LIKE THIS
 UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc]
                                      initWithTarget:self  action:@selector(handlePanGesture:)];

//YOU ADD THEM LIKE THIS
     [self.view addGestureRecognizer:panGesture];

//AND YOU REMOVE THEM LIKE THIS
     [self.view removeGestureRecognizer:panGesture]; 
```

我不确定你是如何编码的，但我希望这能给你一个想法

# java - 数据截断错误 - 列的数据太长

> ID：10329356
> 
> 赞同：5
> 
> 时间：2012-04-26T07:57:55.027
> 
> 标签：java, mysql, jpa

有趣的是，在实体中：

```
public static final int maxContentSize = 2097152; //2Mb
@Lob
@Column(length=maxContentSize)
private byte[] content;
@Column(length = 100)
private String mimetype;
@Column(length = 50)
private String fileName; 
```

但是，某些文件（65-70k 大小）插入正常，但大多数都收到错误：

```
com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column 'CONTENT' at row 1 
```

我已经检查过，在创建实体之前，大小是正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T08:36:29.637

根据 JPA doc，“长度”仅用于字符串属性。

> （可选）列长度。（仅在使用字符串值列时适用。）

如果您使用工具自动生成 DDL.. 您可以使用“columnDefinition”属性

```
@Column(columnDefinition = "LONGBLOB") 
private byte[] content; 
```

# java - 使用 *.ppk 通过 Java 连接 SSH（运行命令行）

> ID：10329361
> 
> 赞同：1
> 
> 时间：2012-04-26T07:58:29.337
> 
> 标签：java, ssh

我正在编写 java swing 应用程序。我需要我的应用程序连接到服务器 CentOS 5.5，使用用户名 + *.ppk 文件（我没有密码）。然后，我的应用程序在此服务器上执行一些命令行。

这可能吗 ？哪个图书馆最适合它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T09:47:17.263

有许多库支持您尝试以不同方式实现的目标。如今，通过 Java 连接到 SSH 服务器已经不是什么大事了。

这些是您可能会考虑的一些库：

* * *

### 木卫三

*   [http://www.cleondris.ch/opensource/ssh2/](http://www.cleondris.ch/opensource/ssh2/)

Ganymede 是由苏黎世联邦理工学院的一些学生制作的，效果很好。我个人在一个使用 Java 1.3 的非常旧的机器上运行的项目中使用它。除了 JRE，它不需要任何东西。然而，它不再那么活跃了。有一家公司似乎支持它（Cleondris），但我不知道它们有多可靠。不过没关系，因为它无论如何都是开源的。如果您需要在旧的 java 版本上运行您的应用程序或需要知道您的应用程序在没有 Java 加密扩展 (JCE) 的情况下运行，您可以选择此选项。

* * *

### JSch

*   [http://sourceforge.net/projects/jsch/](http://sourceforge.net/projects/jsch/)

JSch 也是一个成熟的软件，并且可以正常工作。如果你曾经使用过 ant 来完成 SSH/SCP 相关的任务，你可能已经知道了。这总是很麻烦，因为您必须手动将其提供给 ant :-) 该项目维护得很好，看起来并被广泛使用。我在许多现代 UI/Batch 应用程序中使用了它，并且一直对它感到满意。虽然它确实使用了 JCE，但我确实曾经遇到过问题（在较旧的 JRE 上，但仍然如此）。如果您打算将软件分发给您不认识的客户，这可能是个问题。JCE 需要在 JRE 安装本身内安装/配置的东西。可能 99% 的时间都有效，但仍然...

* * *

### SSH工具

*   [http://sshtools.sourceforge.net/](http://sshtools.sourceforge.net/)

从来没用过这个，但听说好东西。可能值得一试。

* * *

## 使用 Java 将 ppk 转换为 OpenSSH 格式

由于这显然是可能的，这只是实施它的问题。对你来说幸运的是，实际上有多种实现。它甚至可能在建议的 SSH 库之一中实现，但我没有检查。

快速的谷歌搜索向我展示了两个选择：

## 三铅腻子扩展

*   [https://github.com/kohsuke/trilead-putty-extension](https://github.com/kohsuke/trilead-putty-extension)

在我看来，这是一个非常不错的选择。尽管它是 Trilead SSH 库的扩展（它似乎不再可用），但它的代码并不多，并且可以轻松集成到现有项目中。有一个类可以完成这项工作，并且可以将 ppk 密钥转换为 openssh 密钥。字符串到字符串，所以没有惊喜。真的应该是小菜一碟。

我不知道Trilead怎么了。该公司不再在他们的网站上提及它，但它确实存在于某个时候（http://techtavern.wordpress.com/2008/11/13/about-trilead-ssh-open-source-project/）。

顺便说一句：写它的人也是写詹金斯/哈德森的人。[http://kohsuke.org/](http://kohsuke.org/)

* * *

## “ChillKat”Java 库

*   [http://www.example-code.com/java/ssh_ppk_to_pem.aspn](http://www.example-code.com/java/ssh_ppk_to_pem.aspn)

嗯......这只是作为一种选择。仅仅为此而下载“多用途”库似乎不值得付出努力和开销。您可以提取相关部分或让自己从中受到启发。也许 trilead 扩展不起作用，你必须选择这个，但我不会认为它是首选。

* * *

您当然可以随时手动转换 .ppk 文件，如下所述：[http ://www.lmolnar.com/geek/how-to-convert-puttys-private-key-ppk-into-opensshs-private-key- linux格式/](http://www.lmolnar.com/geek/how-to-convert-puttys-private-key-ppk-into-opensshs-private-key-format-in-linux/)

和其他地方，我猜。还有图形工具 puttygen，它包含在 putty-installer 中或可通过 putty 网站 (http://www.chiark.greenend.org.uk/~sgtatham/putty/) 独立下载。

你想知道更多吗？

检查这个： http: [//linuxmafia.com/ssh/java.html](http://linuxmafia.com/ssh/java.html)或写评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T08:08:43.550

如果将 .ppk 转换为不那么专有的格式（即 .pub rsa 或 dsa）是一种选择，请尝试使用[putty-](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)工具包。
然后使用[SSHTools](http://sourceforge.net/projects/sshtools/)，一个用于 SSH 的 java API（以及更多）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:33:12.743

一种选择是使用我们 SecureBlackbox 产品的[SSHBlackbox](http://www.eldos.com/sbb/java-ssh.php)包。它支持加载 Putty 密钥和与 SSH 相关的全部功能（SFTP 需要 SFTPBlackbox 包）。SecureBlackbox 附带大量示例和支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T11:23:59.270

当前的 JSch 版本不支持 *.ppk 文件，但 JSch 可以通过 Putty 的 Pageant使用[jsch-agent-proxy来使用这些文件。](http://www.jcraft.com/jsch-agent-proxy/)

# sql - sql查询可能的嵌套选择

> ID：10329367
> 
> 赞同：0
> 
> 时间：2012-04-26T07:59:01.997
> 
> 标签：sql, select, nested

我的老板今天有一个愿景，要彻底改变我几乎完整的程序的设计。因此，这是我目前使用的查询，它在产品组中显示具有帕累托位置的零件编号（帕累托是一个联盟，例如 1-100，最畅销的零件）。

我的老板希望的是用于帕累托历史的额外列。

这是当前代码：

```
ALTER PROCEDURE [dbo].[MyParetoConfirmed]
@pgParam varchar(255)

AS
SELECT
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.keycode,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto

FROM
OPENQUERY(SACBAUTO, 'SELECT                      
                    dbo.product.Keycode,
                    dbo.iLines.Pg,
                    dbo.product.pg as ppg,
                    SUM(COALESCE(dbo.iLines.Qty, 0)) as sales6months,
                    dbo.iLines.Prefix 
                 FROM 
                    Autopart.dbo.product
                 LEFT OUTER JOIN
                    Autopart.dbo.ilines
                 ON
                    dbo.product.keycode = dbo.ilines.part
                    AND ([datetime] > dateadd(month, -6, getdate()) OR [datetime] is null )
                 WHERE
                    (dbo.iLines.Prefix = ''i'' OR dbo.iLines.Prefix is null)
                 group by 
                    dbo.ilines.pg,
                    dbo.product.keycode,
                    dbo.ilines.prefix,
                    dbo.product.pg
                 order by sales6months desc') i
RIGHT JOIN
dbo.OldParetoAnalysis
on
i.keycode collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part
AND (i.pg = @pgParam or (i.pg is null AND i.ppg  = @pgParam))
INNER JOIN
dbo.NewParetoAnalysis
ON
dbo.OldParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS =   dbo.NewParetoAnalysis.Part

LEFT JOIN
OPENQUERY(SACBAUTO, 'SELECT                      
                    dbo.product.Keycode,
                    dbo.aLines.Pg,
                    SUM(COALESCE(dbo.aLines.Qty, 0)) as lostsales6months,
                    dbo.aLines.Prefix 
                 FROM 
                    Autopart.dbo.product
                 LEFT OUTER JOIN
                    Autopart.dbo.alines
                 ON
                    dbo.product.keycode = dbo.alines.part
                    AND ([datetime] > dateadd(month, -6, getdate()) OR [datetime] is null )
                 WHERE
                    (dbo.aLines.Prefix = ''d'' OR dbo.aLines.Prefix is null)
                 group by 
                    dbo.alines.pg,
                    dbo.product.keycode,
                    dbo.alines.prefix
                 order by lostsales6months desc') a
ON
dbo.NewParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS = a.keycode
WHERE(i.pg = @pgParam or (i.pg is null AND i.ppg  = @pgParam) AND dbo.NewParetoAnalysis.Pareto is not null)
GROUP BY
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.keycode,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto
ORDER BY
i.sales6months Desc 
```

我需要的是一个名为 paretoMain 的新表，它包含 pareto peroid 历史：

字段是：Pg、Part、Pareto、PareoidID、日期。

目前有 20K 零件具有唯一的 peroid ID 1-6，我需要像我的代码一样获取该 peroid 和 pg 的帕累托（只是没有得到 peroid），我需要为每个 peroid ID 1 执行 6 次-6。我认为这可能是多个选择语句或嵌套，但老实说，我无法弄清楚查询将有多大以及需要多少。

这方面的帮助会很棒！

非常感谢！

澄清每个选择将从新表中获得帕累托。每个选择都会得到 pareto 和别名 pareto1 ， pareto2 .....等。
所以查询需要选择和命名 6 次 bu 仍然使用我目前的查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:01:36.223

好的，解决方案是将表格本身更改为单独的表格。并通过视图简单地加入他们。

# python - 如何在 python 中模拟用户并使用 os.system

> ID：10329371
> 
> 赞同：3
> 
> 时间：2012-04-26T07:59:11.947
> 
> 标签：python, windows, cmd

我正在尝试在 python 中模拟用户并调用 CMD 命令：

```
login('secondUser','123')
os.system("some CMD command ")
logout() 
```

其中登录和注销是`win32api`用于模拟用户的功能。

问题是`os.system`不以模拟用户 ( `secondUser`) 的身份执行命令，而是以用户登录系统的身份执行命令。

我使用 windows7 64x 和 python 2.7

有没有办法`CMD`用模拟用户调用命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:58:43.233

os.system() 肯定是不适合这项工作的工具。如果您仍然使用它，请尝试使用 win32api 模块中的 CreateProcess。

# .net - 如何根据平台 (x86/x64) 定义 codeBase 元素

> ID：10329375
> 
> 赞同：1
> 
> 时间：2012-04-26T07:59:27.650
> 
> 标签：.net, cross-platform, configuration-files

我在构建（*）/测试 Web 应用程序时遇到问题，在该应用程序中我引用了工作站上的 c:\program 文件中可用的程序集，但构建服务器上的 c:\program 文件（x86）中的程序集。这个程序集是“Microsoft.VisualStudio.Enterprise.ASPNetHelper”（用于代码覆盖率）。

在本地，路径是“C:/Program Files/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/Microsoft.VisualStudio.Enterprise.ASPNetHelper.dll”。

在构建服务器上，路径是“C:/Program Files (x86)/Microsoft Visual Studio 10.0/Common7/IDE/PrivateAssemblies/Microsoft.VisualStudio.Enterprise.ASPNetHelper.dll”。

由于此程序集不在 GAC 中，Visual Studio 使用 web.config 中的 codeBase 元素来定义绑定

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.VisualStudio.Enterprise.ASPNetHelper" publicKeyToken="b03f5f7f11d50a3a" culture="neutral"/>
        <codeBase version="10.0.0.0" href="file:///C:/Program%20Files/Microsoft%20Visual%20Studio%2010.0/Common7/IDE/PrivateAssemblies/Microsoft.VisualStudio.Enterprise.ASPNetHelper.DLL"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

我该如何管理它以使其在本地和 Build 机器上工作？据我所知，没有办法在配置文件中定义变量或使用环境变量......

五。

# java - Portlet - 将参数从渲染阶段传递到资源阶段

> ID：10329376
> 
> 赞同：0
> 
> 时间：2012-04-26T07:59:37.673
> 
> 标签：java, portlet

是否可以将某些值从渲染（或更好的操作）阶段复制到资源路径？

可以将参数从动作阶段传递到渲染阶段，如 Liferay 文档中所述：将[信息从动作阶段传递到渲染阶段](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/passing-information-from-the-action-phase-to-the-render-phase)。

我认为使用该会话是不可行的，因为在多个选项卡中浏览......

也无法使用 ThreadLocal （它不是同一个线程）。

有任何想法吗？我想通过初始用户操作（操作阶段）跟踪 AJAX 调用（资源阶段）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:16:27.677

您可以在页面上呈现参数，然后使用这些参数发送 AJAX 请求。您还可以使用地图会话 id => 参数创建静态类。并在页面会话 id 上呈现，当您发送 AJAX 请求并从地图中检索参数时将其传递回服务器。

# blackberry - 编辑字段动态

> ID：10329378
> 
> 赞同：1
> 
> 时间：2012-04-26T07:59:47.003
> 
> 标签：blackberry, java-me

我使用下面的代码来编辑文本，其中我给出了编辑文本的宽度和高度，一旦文本填充给定的高度，该字段将滚动其内容，但我想让这段代码更加动态。我想要这个只有一行的编辑字段，它会增长 3 或 4 行，完成后该字段应该滚动它包含的内容。有什么帮助吗？

```
public class TextBoxField extends VerticalFieldManager {
    private int managerWidth;
    private int managerHeight;
    private EditField editField;

    public TextBoxField(int width, int height) {
        super(Manager.NO_VERTICAL_SCROLL);
        managerWidth = width;
        managerHeight = height;

        VerticalFieldManager vfm = new VerticalFieldManager(Manager.VERTICAL_SCROLL);

        editField = new EditField(){
            public void paint(Graphics g) {
            getManager().invalidate();
            super.paint(g);
        }
    };

    vfm.add(editField);
        add(vfm);
    }

    public void paint(Graphics g) {
        super.paint(g);
        g.drawRect(0, 0, getWidth(), getHeight());
    }

    public void sublayout(int width, int height) {
        if (managerWidth == 0) {
            managerWidth = width;
        }
        if (managerHeight == 0) {
            managerHeight = height;
        }
        super.sublayout(managerWidth, managerHeight);
        setExtent(managerWidth,managerHeight);
    }

    public String getText() {
        return editField.getText();
    }

    public void setText(String text) {
        editField.setText(text);
    }
} 
```

# css - 仅显示前 25% 的块

> ID：10329379
> 
> 赞同：0
> 
> 时间：2012-04-26T07:59:47.697
> 
> 标签：css

我有使用 css3 生成的某些形状。我只想显示块的一部分，例如：上方的 25% 或底部的 25%。我如何实现这一目标？

例如：在[http://jsfiddle.net/HNyHM/1/](http://jsfiddle.net/HNyHM/1/)中；我只想从上面显示 25%。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:08:00.913

检查这个。[http://jsfiddle.net/LB8mC/](http://jsfiddle.net/LB8mC/)

将你的 CSS 形状包裹在一个 div 中，给它高度、宽度，正是你想要显示形状的程度。然后相对于包装纸绝对定位形状。

这是我在小提琴中使用的。

```
 .shape-wrapper {
        position:relative;
        overflow:hidden
        height: 25px;
  }

  .shape-wrapper > div {
        top: -25px;
        left: -25px;
     } 
```

您可以继续更改子 div 的位置（前 25% 或后 25%，就像您使用 JS 所要求的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:08:39.493

添加包装器 div 可能会有所帮助。不过，请参阅[http://jsfiddle.net/HNyHM/3/](http://jsfiddle.net/HNyHM/3/)以获取固定大小的开始。

# android - 布局描述中的“$”字符 conca 两个组件是什么意思？

> ID：10329384
> 
> 赞同：1
> 
> 时间：2012-04-26T08:00:28.967
> 
> 标签：android, custom-controls

我在下一个代码的视图描述中看到了这个字符......视图正在使用 2 个自定义组件构建，但我正在寻找关于此的解释：

```
<view 
        class="com.icemobile.staatsloterij.ui.component.CustomCarousel$CustomViewFlipper" 
        android:id="@+id/carousel_flipper" 
        android:layout_width="275dp" 
        android:layout_height="wrap_content" 
        android:layout_centerHorizontal="true"
/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:02:56.050

`CustomViewFlipper`是 中的一个内部类`CustomCarousel`。`$`这是引用该类的方式（因为 java 编译器将为该类生成名称`CustomCarusel$CustomViewFlipper`）`CustomViewFlipper` 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:15:50.403

java静态成员类

CustomViewFlipper 是 CustomCarousel 的静态内部类

# asp.net - asp.net mvc页面上的奇怪字符输出

> ID：10329385
> 
> 赞同：2
> 
> 时间：2012-04-26T08:00:29.803
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

有时（随机）我的 asp.net mvc 应用程序输出页面，其中单个字符被替换为奇怪的问号，如图所示

![在此处输入图像描述](../Images/1d83dc66116c951a530a1057ac8a4dd8.png)

在数据更改之前，此行为是恒定的，并且不会随着页面刷新而消失。整个页面使用格鲁吉亚语 unicode。我正在将 asp.net mvc 3 与 Visual Studio 2010 和 iis express 一起使用。这也在 IIS 7.5 的已发布站点上观察到。我在 asp.net webforms 应用程序中也看到了类似的问题。

我不仅在 db 提供的数据上观察到这种行为，而且在使用 html 助手生成的简单锚点上也观察到了这种行为

```
TagBuilder addAnchor = new TagBuilder("a");
addAnchor.AddCssClass("add-item");
addAnchor.MergeAttribute("href", "#");
addAnchor.SetInnerText(SharedResources.Add); //resource item contains string დამატება 
```

哪个输出锚“დამატ���ბა”

这不是浏览器端页面渲染的问题，因为原始响应已经包含这些符号。

**更新：**

看起来，通过设置禁用缓冲区输出`Response.BufferOutput = false;`会从页面中删除奇怪的字符。但是我使用[Cassette](http://getcassette.net/)来引用捆绑包，它不能与禁用的缓冲区输出一起使用 - 页面上没有引用任何 scipts 或样式表。

你们有没有人遇到过类似的问题？这对我来说实际上很重要，因为目前它会影响单个字符被损坏的数据是多选测试问题的正确答案信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T11:50:57.927

我有同样的错误。它是 Cassette，具有重写结果 HTML 内容（并且需要将 BufferOutput 设置为 true）的功能，以便在需要时将引用的脚本和样式表标签移动到顶部。请参阅[http://getcassette.net/documentation/configuration上的](http://getcassette.net/documentation/configuration)**IsHtmlRewritingEnabled**选项。当我关闭此功能时，该错误已消失。

我的观察：

1.  它仅在远程请求中出现。本地请求总是可以的。
2.  对于所有客户端、浏览器和计算机，问号的位置始终保持不变。
3.  问号的位置只有在重新编译应用程序后才会发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:49:33.873

我想这与字符集有关。当我尝试显示不在特定字符集中的字符时，我遇到了这个问题。

例如`’ or – (&rsquo; or &ndash;)`在 UTF-8 中，当字符以前没有经过 HTML 编码时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T11:10:30.820

我也有这样的输出。在我的例子中，错误的来源在 Views/web.config 中。页面/命名空间中列出了一个程序集，该程序集不是引用程序集的一部分

# linux-kernel - 如何用特定的模组注册开发者？

> ID：10329388
> 
> 赞同：1
> 
> 时间：2012-04-26T08:00:33.093
> 
> 标签：linux-kernel, linux-device-driver

我的系统的一个 misc dev 是 600 mod，我需要它是 666 mod（全部为 rw），

chmod 是可用的，但是，我想知道如何在注册时使用 misc_register() 设置 mod， chmod 是唯一的方法吗？

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:45:04.103

将[miscdevice](http://lxr.linux.no/linux+v3.3.3/include/linux/miscdevice.h#L50) `mode`与`S_IRUGO | S_IWUGO`.

```
 50 struct miscdevice  {
  51        int minor;
  52        const char *name;
  53        const struct file_operations *fops;
  54        struct list_head list;
  55        struct device *parent;
  56        struct device *this_device;
  57        const char *nodename;
  58        umode_t mode;
  59 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:55:54.887

您的模块不应自行设置访问级别。口头禅是“策略属于用户空间，而不是内核。”

您想让 udev（或您使用的任何替代方案）决定这一点。

对于 udev 看`man 7 udev`。

# session - 使用不带 cookie 的 Coldfusion 会话

> ID：10329392
> 
> 赞同：2
> 
> 时间：2012-04-26T08:01:09.540
> 
> 标签：session, coldfusion, application.cfc

再会，

我们正在尝试在 Coldfusion 8 中实现一个不使用 cookie 的 API - 相反，我们通过 GET 或 POST 为每个请求传递 cfid、cftoken 和 jsessionid。

我们正在使用 mach-ii 及其 SessionFacade。我不知道您是否需要有关此的任何进一步信息；如果你这样做，请提及。

在 Coldfusion Administrator 中，客户端变量设置为“注册表”，内存变量为“使用 J2EE 会话变量、启用应用程序变量、启用会话变量”中的每一个打勾。

我的 Application.cfc 伪构造函数看起来像

```
<cfset this.name = "#cgi.server_name#" />
<cfset this.loginStorage = "session" />
<cfset this.sessionManagement = true />
<cfset this.setClientCookies = false />
<cfset this.setDomainCookies = false />
<cfset this.sessionTimeOut = CreateTimeSpan(0,1,0,0) />
<cfset this.applicationTimeOut = CreateTimeSpan(0,1,0,0) /> 
```

onSessionStart 或 onSessionEnd 中没有任何内容。

为了验证会话，我使用了一个插件，在它的 preProcess 方法中我有：

```
if (not getSessionFacade().has("authUserLoggedIn")){
    arguments.eventContext.clearEventQueue();
    arguments.eventContext.announceEvent("nologin", newEventArgs);
} 
```

我想我不明白的第一件事是，在使用 J2EE 会话时是否有必要发送 cfid 和 cftoken？还是 jsessionid 完全完全取代了它们的功能？

其次，我希望这个应用程序（而不是整个服务器）不发送 cookie。在我的 Application.cfc 中，我将 cookie 设置为禁用，但它仍然尝试发送包含 jsessionid 的 cookie。

这有我认为奇怪的副作用：

在禁用 cookie 的 Firefox 上，输入 URL 的 cfid、cftoken 和 jsessionid 正确地保持会话状态。

但我们也将它与接受 cookie 的 iPhone 应用程序一起使用。在我们通过将 cookie 保存到本地存储来修复它之前，当您关闭应用程序并重新打开它时，cookie 丢失了。不管在 URL 中发送仍然有效的 cfid、cftoken 和 jsessionid 的事实，它仍然给我们一个“未登录”错误。

所以我有三个问题：

首先，在使用 J2EE 会话时，是否有需要存储和重新发送 cfid 和 cftoken 的情况？

其次，是否有一个应用程序级别设置我可以用来强制 jsessionid 手动存储，而不是使用 cookie？

第三，在哪个阶段提取 jsessionid 并从内存中填充会话变量？这是我可以调试或询问的东西吗，所以我可以说些什么

```
if jsessionid refers to a current, valid session {
    ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T13:21:31.163

此设置：

```
<cfset this.setClientCookies = false /> 
```

防止设置客户端 cookie (cfid/cftoken)。这与客户端管理而*不是*会话管理有关。您尚未在属性中设置 clientManagement 值，因此它可能默认为 true - 这意味着这些值正在创建但未设置为 cookie。如果您没有在 URL 上传递它们（我现在谈论的是 cfid/cftoken），那么您可能会创建很多它们。检查您的注册表 :) 作为一项规则，如果您不使用它们，请将 clientmanagement 设置为 false。

CFID 和 CFTOKEN 用于客户端变量，即使您有 jsessionid；启用。但是在使用 jsessionID 时，会话不需要它们。

我知道的应用程序属性中没有 setClientCookies 等效项。从逻辑上讲，我希望看到一个“setSessionCookies =”，以便您可以对这些变量进行精细控制。但事实并非如此。我怀疑这*可能*是因为 CF 正在利用底层的 j2ee 会话架构，这就是它在幕后完成的方式。但不要引用我的话。

但是，我想知道为什么您不只是捕获 jsessionID；在 onSessionStart() 中并根据需要将其传递给您的 URL。Cookie 可能已设置 - 或者它们可能不基于所涉及的平台或客户端......但只要你在 url 上有它，你就很好，对吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T22:53:31.363

此设置：

```
<cfset this.setClientCookies = false /> 
```

设置 CFID & CFTOKEN 或 JSESSIONID cookie。这些用于客户端和会话！因此，如果您将此设置为 false 并且您没有将 CFID/CFTOKEN 或 JSESSIONID 放在请求 url 中，则无法使用会话管理。

# javascript - 检测 JavaScript 是否已从 HTML 邮件附件中删除？

> ID：10329400
> 
> 赞同：0
> 
> 时间：2012-04-26T08:02:09.933
> 
> 标签：javascript, html

我发送了一封带有 html 附件的电子邮件。一些收件人在特定的 Web 门户（NHS 网络邮件，即 MS Exchange）上阅读邮件，并尝试从门户保存附件。但是，JavaScript 会默默地从附件中删除，并且收件人最终会得到一个空白页面。所有脚本标签都被删除了——甚至是指向外部脚本的链接。

问题：我可以在 html 中添加任何智能，以便通知用户他们有一个无用的页面，而不是打电话给我问为什么上面什么都没有？我知道这是一个很长的镜头，但我对html了解不多，我认为值得一试。如果有帮助，用户不太可能使用 IE6、IE7 或 IE8。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:06:21.553

创建标签：

`<div id="noScriptsFound">Sorry, your page is messed up by your lame mail agent. Please download it in some other way</div>`

然后添加一个脚本（直接在`div`尽快执行之后）：

```
<script>
    document.getElementById("noScriptsFound").style.display = "none";
</script> 
```

现在，如果在保存附件时有东西切断了您的“脚本”标签，浏览器将不会执行脚本标签，因此文本将保持可见。

# android - Eclipse 中的 Android 模拟器明显变慢

> ID：10329402
> 
> 赞同：4
> 
> 时间：2012-04-26T08:02:12.487
> 
> 标签：android, api, sdk, emulation

自两天前以来，我遇到了一个最近的问题。在此之前，我正在运行 android 模拟器（API 版本 8 和 15），没有任何明显的延迟。但是由于这两天模拟器的启动变成了无法忍受的延迟，十五个API版本持续了两个小时左右，八个API版本可以延迟8个多小时。

我试图重新安装 SDK，擦除 AVD 没有结果。我启用了快照选项，但提到的延迟使工作非常缓慢。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:11:02.520

尝试使用以下内容：

```
emulator.exe -cpu-delay 0 -no-boot-anim -avd avd 
```

或使用 gfx 加速

```
emulator -avd <avd_name> -gpu on 
```

如果这不起作用，给[http://www.android-x86.org/](http://www.android-x86.org/)一个机会；）

由于您已经启用了快照选项，因此我不必再次命名它。

此外： [我可以调整我的 android 模拟器以使其更快吗？](https://stackoverflow.com/questions/1968170/can-i-tweak-my-android-emulator-to-make-it-fast) [为什么安卓模拟器这么慢？我们如何加快Android模拟器的速度？](https://stackoverflow.com/questions/1554099/slow-android-emulator) [为什么安卓模拟器很慢？](https://stackoverflow.com/questions/7399071/why-is-the-android-emulator-slow) [为什么安卓模拟器这么慢？我们如何加快Android模拟器的速度？](https://stackoverflow.com/questions/1554099/slow-android-emulator) [慢得无法忍受的安卓模拟器——有解决办法吗？](https://stackoverflow.com/questions/3210198/unbearably-slow-android-emulator-is-there-a-fix)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:06:58.130

你的创业公司需要**几个小时**？有什么严重的错误。我会检查您的开发机器，看它是否磁盘不足、碎片化或抖动。也许检查 AVD 没有声明太多虚拟 SD。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T07:44:38.707

如果您在虚拟机上运行 Android，它会快得多。您可以按照我的指南进行设置，此处为[http://www.bobbychanblog.com/2011/07/faster-android-emulator-alternative-using-virtualbox/](http://www.bobbychanblog.com/2011/07/faster-android-emulator-alternative-using-virtualbox/)

# ruby-on-rails - 在 Active Admin 中将布尔值显示为“是”和“否”

> ID：10329408
> 
> 赞同：13
> 
> 时间：2012-04-26T08:02:44.687
> 
> 标签：ruby-on-rails, internationalization, activeadmin

如何让活动管理员显示“是”和“否”而不是“真”和“假”。

我试图改变英语语言环境，但这不起作用。我正在考虑猴子补丁布尔类，但这看起来很丑陋。

还有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-05-15T16:54:42.713

你可能想做这样的事情：

```
index do
  id_column
  column(:published) do |story| 
    story.published? ? status_tag( "yes", :ok ) : status_tag( "no" )
  end
end 
```

这将在状态标签中包含“是”和“否”这两个词，看起来相当不错。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-05-10T06:20:48.700

尝试直接在活动管理员中使用条件，如下所示

```
column :column_name do|object|
    object.column_name? ? 'Yes' : 'No'
end 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-02T15:58:37.447

在这里，这行得通，它给你一个勾号和叉号，但似乎很容易修改。

[https://gist.github.com/2574969](https://gist.github.com/2574969)

您需要重新启动 Rails 服务器才能使其正常工作，因为它会修改 active_admin.rb 初始化程序。

当然，它创建了一个类，这是您想要避免的，但是在没有其他任何东西的情况下，这确实有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-10T09:17:55.313

它非常简单，

假设您的布尔字段名称处于活动状态，

创建一个名为 status 的方法，例如

```
def status
  self.active ? "Yes" : "No"
end 
```

将**状态**用作活动管理显示或索引中的普通字段。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-25T08:16:09.503

正如艾哈迈德所说，您希望避免为此创建课程。

所以还有另一种解决方案：

在您的 active_admin.en.yml 语言环境（或其他）中，只需添加这两行：

```
en:
  "true": Yes
  "false": No 
```

然后在您的 app/admin/my_model.rb 文件中，例如在索引页面上显示是/否，只需执行以下操作：

```
column :published do |post|
      t(post.published.to_s)
end 
```

因此，您只需将布尔值转为字符串并使用“t”函数（i18n 翻译），这样 Rails 就会在您的语言环境文件中搜索正确的翻译并将“真/假”替换为“是/否”。

我认为这是一个更好的解决方案，您遵循“Rails Spirit”，并且拥有不同语言的 active_admin 面板变得更加容易。

缺点（因为总是有一个）是每次你想用是/否替换布尔值时都需要使用“t”函数......

向 active_admin gem 发出拉取请求会很棒，只需像我一样通过更改 yml 文件来替换布尔值。

但是......直到它完成，我的解决方案工作正常。:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-14T15:16:01.753

我认为这也可以，无需任何猴子修补。

对于 Rails 5。

```
column :signed_up?, sortable: 'signed_up' do |interest|
  ActiveRecord::Type::Boolean::FALSE_VALUES.exclude?(interest.signed_up)
end 
```

对于 Rails 4。

```
column :signed_up?, sortable: 'signed_up' do |interest|
  ActiveRecord::Type::Boolean::TRUE_VALUES.include?(interest.signed_up)
end

column :signed_up?, sortable: 'signed_up' do |interest|
  ActiveRecord::Type::Boolean::FALSE_VALUES.exclude?(interest.signed_up)
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-25T13:20:35.553

如果额外的依赖项不打扰您，请查看[https://github.com/parabuzzle/humanize_boolean](https://github.com/parabuzzle/humanize_boolean)，它会自动执行该功能并支持 i18n。

# php - php，检查结果是否在mysql结果的第二列

> ID：10329409
> 
> 赞同：0
> 
> 时间：2012-04-26T08:02:46.977
> 
> 标签：php, mysql, variables

我有一个问题，

```
$theresult = mysql_query("SELECT * FROM table WHERE column_b = ".$variable); 
```

所以这将产生一个结果列表，3列。

我想要做的是检查结果的任何行在C列中是否有“27”。

我不需要结果，只是真/假..

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:06:34.653

尝试这个：

```
$theresult = mysql_query("SELECT * FROM table WHERE column_b = ".$variable . " AND column_c=27");
if (mysql_num_rows($theresult) == 0 ) echo "False/True"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:05:57.540

更改查询：

```
"SELECT * FROM table WHERE column_b = ".$variable." AND colc = 27" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:06:06.547

```
SELECT COUNT(*) FROM table WHERE column_b = 'var' AND column_c = 27 
```

这将返回匹配的行数。如果没有匹配的行，您将得到 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T08:25:19.200

嗨，我想您想检查任何行的 c 列在获取结果 PHP 时是否具有值 27 ..then

1.如果可以添加条件 column_c = 27 然后使用 mysql_num_rows 计算结果中的行数

```
 $result = mysql_query("select * from table where column_b = ".$variable." AND column_c = 27") or die(mysql_error());

 if($result){
   if(mysql_num_rows($result) > 0){
     echo "true";
   }else{
     echo "false";
  }
 } 
```

2.如果你不想改变mysql查询然后

```
 $result = mysql_query("select * from table where column_b = ".$variable."") or die(mysql_error());

 $exist = "false";

 if($result){
   while($row = mysql_fetch_array($result)){
      if($row['column_c'] == 27){
        $exist = "true";
      }
   }
 }
 echo $exit; 
```

# java - GridBagLayout 调整组件大小

> ID：10329412
> 
> 赞同：1
> 
> 时间：2012-04-26T08:02:54.157
> 
> 标签：java, swing, gridbaglayout

这是我使用 GridBagLayout 布置的：

![正常布局](../Images/5d1ce60e7e9a35913ba7c5682faf7523.png)

但是，当我选择一个文件时，应该填充几个标签。这是我使用那些小“...”按钮进行文件选择后的样子：

![混乱的布局](../Images/b767d2450d0d4dba45d7d0984611069a.png)

如您所见，整个布局变得一团糟。我在 actionlistener 中所做的就是：

```
 fileTxt = fileChooser.getSelectedFile();
            fileTxtField.setText(fileTxt.getAbsolutePath());
            labels = getLabels(); 
            lbl1.setText(labels[0].toUpperCase());
            Dimension size = lbl1.getPreferredSize();
            lbl1.setMinimumSize(size);
            lbl1.setPreferredSize(size);
            lbl2.setText(labels[1]);
            lbl2.setToolTipText(longLbl);
            size = lbl2.getPreferredSize();
            lbl2.setMinimumSize(size);
            lbl2.setPreferredSize(size);
            button1.setPreferredSize(new Dimension(20,25));
            button2.setPreferredSize(new Dimension(20,25)); 
```

所以，基本上，按钮会变成原来的尺寸，而不是首选尺寸。这会弄乱整个布局。我该如何解决？所有组件都设置为不填充 gridBagConstraints.fill 的 gridbagconstraint 设置为 GridBagConstraints.NONE - 但是，布局仍然混乱:(

**更新**

根据您的建议，我删除了调用 setPreferredSize() 方法的代码，这就是我得到的：

![在此处输入图像描述](../Images/7815454b4cd019f5c909f81f94c382ae.png)

显然，这是我想要避免的 - 一个大于其文本的按钮，这就是在按钮上设置 setPreferredSize 的原因。现在我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T08:15:59.157

不要打电话`setPreferredSize()`。让我们`LayoutManager`这样做。

在您的`GridBagConstraints`定义`fill`和`weightx`参数中定义应如何分配额外空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T19:37:16.343

有一个简单的解决方案。按钮的额外宽度是由于按钮文本左侧和右侧的默认[边距。](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/AbstractButton.html#setMargin%28java.awt.Insets%29)默认为 14

你可以设置`btn.setMargin(new Insets(2, 0, 2, 0));`，额外的差距就会消失。

# html - 如何在 tag? I have a set of the custom fonts (not the system fonts) that I want to use in one of my page (MVC 3). I want to display that fonts in a <select>tag but is it possible to render the text inside each element as its font style ? In o ID：10329415 赞同：3 时间：2012-04-26T08:03:11.627 标签：html, asp.net-mvc-3, fonts 回答 #1 赞同：3 时间：2012-04-26T08:10:25.680 是的，您在 CSS 中声明它是这样的： @font-face { font-family: urfont; src: url('urfont.otf'); } @font-face { font-family: urfont; font-weight: bold; src: url('urfont.otf');} 然后，您可以像其他标准字体一样引用它： <select style="font-family: urfont, sans-serif;"</select>

# c# - 为什么程序不以 main 方法开头

> ID：10329417
> 
> 赞同：-4
> 
> 时间：2012-04-26T08:03:22.010
> 
> 标签：c#, static, instance, main

```
class Program
    {
        static void Main()
        {           
            Console.WriteLine("enter main method");
            Console.WriteLine(Foo.X);
            Console.ReadKey();
        }
    }
    class Foo
    {
        public static Foo Instance = new Foo();
        public static int X = 3;
        //static Foo()
        //{
        //    Console.WriteLine("static constructor");
        //    Console.WriteLine(X);
        //}
        Foo()
        {
            Console.WriteLine("instance constructor");
        }
    } 
```

为什么程序从Foo中的代码开始，然后main方法开始执行。

结果是：

实例构造函数进入main方法3

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:07:41.913

Foo 有一个名为 Instance 的静态变量。

这个静态变量在 Main 执行之前被初始化，这会导致构造函数 Foo() 被调用

# jquery - 利用 iPhone 的陀螺仪值来控制 HTML 元素

> ID：10329424
> 
> 赞同：4
> 
> 时间：2012-04-26T08:04:09.023
> 
> 标签：jquery, iphone, ipad, gyroscope

我在这里想要实现的是读取陀螺仪的 y 轴值并使用它来控制 HTML 中某些图像的 CSS。

所以我的 HTML/CSS 看起来像下面这样：

```
<style>
    .imgblock{
         display:none;
    }
</style>

<div id="images">
   <img id="img01" class="imgblock" src="images/img01.jpg"/>
   <img id="img02" class="imgblock" src="images/img02.jpg"/>
   <img id="img03" class="imgblock" src="images/img03.jpg"/>
   <img id="img04" class="imgblock" src="images/img04.jpg"/>
   <img id="img05" class="imgblock" src="images/img05.jpg"/>
</div> 
```

所以这里应该发生的是，当我将 iPhone 沿 y 轴（向左）倾斜到 -45 度时，假设将其设置为`display:block`其余`<img id="img01" class="imgblock" src="images/img01.jpg"/>`图像`display:none`。如果我将它向右倾斜一点，使得方向现在沿 y 轴为 -27 度，`display:block`将设置为`<img id="img02" class="imgblock" src="images/img02.jpg"/>`并将`display:none`设置为其余图像。

我对此进行了一些研究，并在[这里](http://www.peterfriese.de/how-to-use-the-gyroscope-of-your-iphone-in-a-mobile-web-app/)偶然发现了一篇精彩的文章，但不太确定如何将代码实现到我的中。我尝试过以这种方式实现它，但它不起作用：

```
window.ondeviceorientation = function(event) {
    gamma = Math.round(event.gamma);    
    gamma = Math.round(event.beta); 
    if (gamma = -45){
        $("#img01").css({"display":"block"});
        $("#img02, #img03, #img04, #img05").css({"display":"none"})
    } elseif (gamma = -27) {
        $("#img02").css({"display":"block"});
        $("#img01, #img03, #img04, #img05").css({"display":"none"})
    }
} 
```

我很确定我在上面的某个地方搞砸了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:56:33.163

看来您正在事件处理程序的第二行用 beta 覆盖您的 gamma 值：

```
gamma = Math.round(event.beta); 
```

# ruby-on-rails - heroku上的应用程序错误

> ID：10329426
> 
> 赞同：1
> 
> 时间：2012-04-26T08:04:23.220
> 
> 标签：ruby-on-rails

我正在关注在线 railstutorial。我是新手，现在我完成了我的第二个应用程序。它在本地机器上工作正常，但我遇到了heroku的问题。我成功推送了我的应用程序，然后我完成了*heroku rake db:migrate但我在*[我的页面](http://strong-night-4868.heroku.com/) 上看到了这个错误

> 应用程序发生错误，无法提供您的页面。请稍后重试。如果您是应用程序所有者，请查看您的日志以获取详细信息

我在命令行中看到了这个警告：

> 耙中止！请安装 postgresql 适配器：`gem install activerecord-postgresql-adap ter`（pg 不是捆绑包的一部分。将其添加到 Gemfile。）

我用谷歌搜索了这个错误，发现我需要将此字符串添加到我的 gemfile 中：

> gem 'sqlite3', :group => :development gem 'pg', :group => :production

完成它，然后重试，但没有任何改变，我的命令行中仍然有这个

> 请安装 postgresql 适配器：`gem install activerecord-postgresql-adap ter`（pg 不是捆绑包的一部分。将其添加到 Gemfile。）

我不明白，因为我肯定有*pg gem*，我可以在我的本地机器上看到他的安装

```
Using thor (0.14.6)
Using railties (3.2.1)
Using coffee-rails (3.2.2)
Using jquery-rails (2.0.2)
Using pg (0.13.2)
Using rails (3.2.1)
Using sass (3.1.16)
Using sass-rails (3.2.5)
Using sqlite3 (1.3.6)
Using uglifier (1.2.4) 
```

但是当捆绑安装在heroku服务器上时我看不到相同的

```
 Installing thor (0.14.6)
  Installing railties (3.2.1)
  Installing coffee-rails (3.2.2)
  Installing jquery-rails (2.0.2)
  Using bundler (1.0.7)
  Installing rails (3.2.1)
  Installing sass (3.1.16)
  Installing sass-rails (3.2.5)
  Installing uglifier (1.2.4) 
```

我该如何解决？真的没有头绪。请帮我。

顺便说一句，对不起我的英语，我来自俄罗斯）

**更新：** 是的，我看到它运行 bundle install --without development，但我的 gemfile 现在看起来像：

```
group :production do
  gem 'pg'
end
group :development, :test do
   gem 'sqlite3-ruby', :require => 'sqlite3'
end 
```

如您所见，'pg' 肯定不在开发组中，但 heroku 没有安装它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:11:36.233

看起来您将 pg gem 添加到了 Gemfile 中的开发组 - 当 Heroku 部署时，它运行`bundle install --without development`，这意味着它不会在该组中安装 gem。将 gem 移出开发组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:36:55.887

如果您更新了 Gemfile，请确保将其提交并将 Gemfile.lock 提交到 git，然后将您的应用程序重新推送到 Heroku。

# attributes - 如何在 WSO2 身份服务器中通过 SAML 检索用户属性

> ID：10329430
> 
> 赞同：2
> 
> 时间：2012-04-26T08:04:39.737
> 
> 标签：attributes, wso2, saml, wso2is

我正在做一个示例 webapp，它通过 SAML 对 WSO2 Identity Server 进行身份验证。它工作正常，但现在我想检索用户属性和角色以进行授权，我完全迷失了。

阅读一些 SAML 文档，我知道我必须发送一个 AttributeQuery 请求，但不知道如何发送，并且我已经确定我应该使用 SOAP 请求，但我不知道服务器是如何工作的。我不知道 WSO2-IS 是否提供网络服务或其他方法。如果是，哪个是生成客户端的 wsdl URL？如果没有，我应该遵循哪种方法。相同的身份验证响应也可能包含用户属性。

感谢您的帮助，如果解决方案很明显，我们深表歉意。我在您的文档中没有找到任何关于此的内容，而且我不熟悉安全环境，也不了解管理控制台显示的所有选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:17:02.843

虽然可以发送属性请求以获取一个或多个用户属性的详细信息，但您可以通过一次调用（身份验证请求）获取所有信息 - 用户的所有属性（默认配置文件中的属性）和用户的角色.

有一个[基本的演示应用程序](http://wso2.org/library/articles/2010/07/saml2-web-browser-based-sso-wso2-identity-server)可用。

要获取属性，您应该使用 WSO2 4.0 M8 版本（支持属性配置文件）。注册服务提供者后，我们可以选择应返回的必需属性。有关此内容的更多信息以及获取 WSO2 4.0 M8 版本的链接可以从[“SAML2.0 SSO with the WSO2 Identity Server”](http://sureshatt.blogspot.in/2012/08/saml20-sso-with-wso2-identity-server.html)的评论部分获得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-05T11:27:54.607

本文提供了详细的描述，以获取 SAML 身份验证后的用户详细[信息](http://sureshatt.blogspot.in/2012/11/getting-user-claims-over-saml-sso-token.html)

# java - 在我的 android 应用程序中接收彩信

> ID：10329431
> 
> 赞同：0
> 
> 时间：2012-04-26T08:04:46.190
> 
> 标签：java, android, mms

我正在开发一个 android 应用程序，它将接收来自特定号码的彩信并将其显示在我的应用程序中，我找到了这段代码，但是当我运行它时，什么也没发生

```
 public class MMSActivity extends Activity {
ImageView imageView1;
TextView t; 
MMSMonitor myMonitor = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    t= (TextView) findViewById(R.id.t);
    imageView1= (ImageView) findViewById(R.id.imageView1);
    startMMSMonitor();

}

@Override
public void onDestroy()
{
    super.onDestroy();
    if(myMonitor != null)
        myMonitor.stopMMSMonitoring();
}

protected void startMMSMonitor()
{
    Context ctx = this;
    ContentResolver cr = this.getContentResolver();
    myMonitor = new MMSMonitor(cr, ctx);
    myMonitor.startMMSMonitoring();
}

public void setMMSText(String text)
{
    //Do whatever you want
}

public void setMMSImageData(byte[] data, String fileType)
{
    //Do whatever you want
}

public class MMSMonitor { 

    private ContentResolver contentResolver = null;
    private Handler mmshandler = null;
    private ContentObserver mmsObserver = null;
    public String mmsNumber = "";
    public boolean monitorStatus = false;
    public  String activationCode;
    int mmsCount = 0;
    String lastMMSTxId = null;
    String code;

    public MMSMonitor(final ContentResolver contentResolver, final Context mainContext) {
        this.contentResolver = contentResolver;
        mmshandler = new MMSHandler();
        mmsObserver = new MMSObserver(mmshandler);
        System.out.println( "MMSMonitor :: ***** Start MMS Monitor *****");
    }

    public void startMMSMonitoring() {
        try {
            monitorStatus = false;
            if (!monitorStatus) {//do not get it
                //it is observe anychange like delete or incoming MMS etc...

                //ContentObserver is used to get notified if the data residing in the data set has changed. 
                        //So it is used to observe the data source for changes.
                //Content providers manage access to a structured set of data
                //Content providers are the standard interface that connects data 
                //in one process with code running in another process.
                //When you want to access data in a content provider, you use the ContentResolver object 
                contentResolver.registerContentObserver(Uri.parse("content://mms-sms"), true, mmsObserver);

                Uri uriMMSURI = Uri.parse("content://mms");
                Cursor mmsCur = contentResolver.query(uriMMSURI, null, "msg_box = 4", null, "_id");
                if (mmsCur != null && mmsCur.getCount() > 0) {
                    //Number of MMS
                    mmsCount = mmsCur.getCount();
                    System.out.println( "MMSMonitor :: Init MMSCount ==" + mmsCount);
                }
            }
        } catch (Exception e) {
            System.out.println( "MMSMonitor :: startMMSMonitoring Exception== "+ e.getMessage());
        }
    }

    public void stopMMSMonitoring() {
        try {
            monitorStatus = false;
            if (!monitorStatus){
                contentResolver.unregisterContentObserver(mmsObserver);
            }
        } catch (Exception e) {
            System.out.println( "MMSMonitor :: stopMMSMonitoring Exception == "+ e.getMessage());
        }
    }
      //A Handler allows you to send and process Message and Runnable objects associated with a thread's MessageQueue. 

    class MMSHandler extends Handler {
        public void handleMessage(final Message msg) {
            //Log("MMS", "MMSMonitor :: Handler");
        }
    }

    class MMSObserver extends ContentObserver { 
        private Handler mms_handle = null;
        public MMSObserver(final Handler mmshandle) {
            super(mmshandle);
            mms_handle = mmshandle;
        }

        public void onChange(final boolean bSelfChange) { 
            super.onChange(bSelfChange);
            //Log("MMS", "MMSMonitor :: Onchange");

            Thread thread = new Thread() { 
                public void run() {
                    try { 
                        monitorStatus = true;

                        // Send message to Activity
                        Message msg = new Message();
                        mms_handle.sendMessage(msg);

                        // Getting the mms count
                        Uri uriMMSURI = Uri.parse("content://mms/");
                        Cursor mmsCur = contentResolver.query(uriMMSURI, null, "msg_box = 4 or msg_box = 1", null,"_id");

                        int currMMSCount = 0;
                        if (mmsCur != null && mmsCur.getCount() > 0) {
                            currMMSCount = mmsCur.getCount();
                        }

                        if (currMMSCount > mmsCount) {
                            mmsCount = currMMSCount;
                            mmsCur.moveToLast();

                            // get id , subject
                            //String subject = mmsCur.getString(6);
                            //int id = Integer.parseInt(mmsCur.getString(0));
                            String subject = mmsCur.getString(mmsCur.getColumnIndex("sub"));
                            int id = Integer.parseInt(mmsCur.getString(mmsCur.getColumnIndex("_id")));
                            System.out.println( "MMSMonitor :: _id  == " + id);
                            System.out.println( "MMSMonitor :: Subject == " + subject);

                            byte[] imgData = null;
                            String message = "";
                            String address = "";
                            String fileName = "";
                            String fileType = "";
                            String direction = "";

                            // GET DIRECTION
                            boolean isIncoming = false;
                            //int type = Integer.parseInt(mmsCur.getString(12));
                            int type = Integer.parseInt(mmsCur.getString(mmsCur.getColumnIndex("m_type")));
                            if (type == 128) {
                                direction = "0";
                                System.out.println( "MMSMonitor :: Type == Outgoing MMS");
                            } else {
                                isIncoming = true;
                                direction = "1";
                                System.out.println( "MMSMonitor :: Type == Incoming MMS");
                            }

                            // Get Parts
                            Uri uriMMSPart = Uri.parse("content://mms/part");
                            Cursor curPart = contentResolver
                            .query(uriMMSPart, null, "mid = " + id,   null, "_id");         
                            System.out.println( "MMSMonitor :: parts records length == "+ curPart.getCount());
                            curPart.moveToLast();
                            do {
                                //String contentType = curPart.getString(3);
                                //String partId = curPart.getString(0);
                                String contentType = curPart.getString(curPart.getColumnIndex("ct"));
                                String partId = curPart.getString(curPart.getColumnIndex("_id"));
                                System.out.println( "MMSMonitor :: partId == " + partId);
                                System.out.println( "MMSMonitor :: part mime type == "+ contentType);

                                // Get the message
                                if (contentType.equalsIgnoreCase("text/plain"))
                                {
                                    System.out.println("MMSMonitor :: ==== Get the message start ====");
                                    byte[] messageData = readMMSPart(partId);
                                    if (messageData != null && messageData.length > 0)
                                        message = new String(messageData);

                                    if(message == ""){
                                        Cursor curPart1 = contentResolver
                                        .query(uriMMSPart, null, "mid = " + id +
                                                " and _id =" + partId,null, "_id");
                                        for (int i = 0; i < curPart1.getColumnCount(); i++) 
                                        {
                                            System.out.println("MMSMonitor :: Column Name : " +
                                                    curPart1.getColumnName(i));
                                        }
                                        curPart1.moveToLast();
                                        message = curPart1.getString(13);
                                    }
                                    System.out.println("MMSMonitor :: Txt Message == " + message);

                                    //SEND DATA TO ACTIVITY
                                    setMMSText(message);
                                } 

                                // Get Image
                                else if (isImageType(contentType) == true) {

                                    System.out.println("MMSMonitor :: ==== Get the Image start ====");      
                                    fileName = "mms_" + partId;
                                    fileType = contentType;
                                    imgData = readMMSPart(partId);
                                    System.out.println( "MMSMonitor :: Iimage data length == "+ imgData.length);

                                    //SEND DATA TO ACTIVITY
                                    setMMSImageData(imgData, fileType);
                                }   
                            } while (curPart.moveToPrevious());

                        }

                    } catch (Exception e) {
                        System.out.println( "MMSMonitor Exception:: "+ e.getMessage());
                    }
                }
            }; 
            thread.start();
        } 
    } 

    private byte[] readMMSPart(String partId) {
        byte[] partData = null;
        Uri partURI = Uri.parse("content://mms/part/" + partId);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        InputStream is = null;

        try {

            System.out.println("MMSMonitor :: Entered into readMMSPart try..");
            ContentResolver mContentResolver = contentResolver;
            is = mContentResolver.openInputStream(partURI);

            byte[] buffer = new byte[256];
            int len = is.read(buffer);
            while (len >= 0) {
                baos.write(buffer, 0, len);
                len = is.read(buffer);
            }
            partData = baos.toByteArray();
            //Log.i("", "Text Msg  :: " + new String(partData));

        } catch (IOException e) {
            System.out.println( "MMSMonitor :: Exception == Failed to load part data");
        } finally {
            if (is != null) {
                try {
                    is.close();
                } catch (IOException e) {
                    System.out.println("Exception :: Failed to close stream");
                }
            }
        }
        return partData;
    }

    private boolean isImageType(String mime) {
        boolean result = false;
        if (mime.equalsIgnoreCase("image/jpg")
                || mime.equalsIgnoreCase("image/jpeg")
                || mime.equalsIgnoreCase("image/png")
                || mime.equalsIgnoreCase("image/gif")
                || mime.equalsIgnoreCase("image/bmp")) {
            result = true;
        }
        return result;
    }

}

   }

//=====================

      } 
```

任何答案我都会感激的，

还有这个声明应该做什么？

`Cursor mmsCur = contentResolver.query(uriMMSURI, null, "msg_box = 4 or msg_box = 1", null,"_id");`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:29:29.343

我认为你的方法甚至不是正确的。Afaik 你必须注册一个广播接收器并在你的应用程序中处理/实现它才能实现你想要的。

看

[Android MMS Broadcast receiver](https://stackoverflow.com/questions/6151749/android-mms-broadcast-receiver) [Detecting new MMS (Android 2.1)](https://stackoverflow.com/questions/3056455/detecting-new-mms-android-2-1) [Detecting MMS messages on Android](https://stackoverflow.com/questions/5329819/detecting-mms-messages-on-android)

有你需要的所有信息；）

# c# - 使用 LINQ 将一个列表复制到另一个列表和子列表

> ID：10329436
> 
> 赞同：4
> 
> 时间：2012-04-26T08:05:13.083
> 
> 标签：c#, linq, c#-4.0, linq-to-objects

我有一个员工列表，他们都有另一个嵌套的列表，称为 EmployeeValuesCollection。

所以我的课是这样的：-

```
public Employee(int employeeID, string jobTitle, int companyID, 
        List<EmployeeValues> employeeValuesCollection)
{
      EmployeeID = employeeID;
      JobTitle = jobTitle;
      CompanyID = companyID;
      EmployeeValuesCollection = employeeValuesCollection;
 } 
```

现在我希望用 LINQ 从另一个对象填充这个对象，到目前为止我有：-

```
List<DataFileRow> dataFiles = dfRow.Rows;
dataFiles
     .ForEach(l => employeeList
                      .Add(new Employee(l.EmpID, l.JobTitle, l.CompID))); 
```

这可行，但是我不知道如何在语句中添加 employeeValuesCollection。有可能吗？

所以我在想这样的事情：-

```
dataFiles
     .ForEach(l => employeeList
                     .Add(new Employee(l.EmpID, l.JobTitle, l.CompID, 
                          new List<EmployeeValuesCollection> .............))); 
```

感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:44:35.327

最好在 Employee 构造函数中遍历输入参数employeeValuesCollection list 来创建一个EmployeeValues 类型的局部变量并将其添加到Employee 类的实例列表变量中。如果我们使用 EmployeeValuesCollection = employeeValuesCollection;，我们实际上是在分配引用。因此，如果我们修改了一些employeeValuesCollection 的值，同样的修改也会反映到EmployeeValuesCollection。

```
public Employee(int employeeID, string jobTitle, int companyID, List<EmployeeValues> employeeValuesCollection)
    {
        EmployeeID = employeeID;
        JobTitle = jobTitle;
        CompanyID = companyID;

        foreach (var obj in employeeValuesCollection)
        {
            var empVal = new EmployeeValues() { Name = obj.Name};
            EmployeeValuesCollection.Add(empVal);
        } 
```

您可以将 LINQ 语句用作

```
dataFiles.ForEach(l => employeeList.Add(new Employee(l.EmpID, l.JobTitle, l.CompID, l.EmployeeValuesCollection))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:52:31.597

您可以在每一行上使用 Linq 投影。我会在“正确”的 linq 中做到这一点：

```
employeeList = (from r in dfRow.Rows
  select new Employee(r.EmpID, r.JobTitle, r.CompID, 
   new List<EmployeeValues>(/*parameter*/))).ToList(); 
```

在您指定`EmployeeValues`实际是什么（以及从哪个属性`DataFileRow`访问它们）之前，很难再说什么。但是假设它只是更多的属性，我总结它们就像键/值对（尽管类型上的名称是复数形式，这有点令人困惑）。

我从您对问题的第三条评论中获取了此处的名称，并假设该`DataFileRow`类型将这些值公开为一个名为 的 IEnumerable `EmployeeValues`。基于此 - 您可以使用内部投影。

```
employeeList = (from r in dfRow.Rows
  select new Employee(r.EmpID, r.JobTitle, r.CompID, 
   new List<EmployeeValue>((from v in r.EmployeeValues
    select new EmployeeValues(v.title, v.value, v.isVisible))).ToList()); 
```

# java - 从套接字输入流中读取以错误的顺序返回数据

> ID：10329437
> 
> 赞同：1
> 
> 时间：2012-04-26T08:05:14.893
> 
> 标签：java, sockets, inputstream

我正在通过套接字发送字节数组。发送的数据以 4 个字节开始，指示后续字节数组的长度。

```
// get the amount of data being sent
byte[] lengthOfReplyAsArray = new byte[4];
forceRead(inputStream, lengthOfReplyAsArray);
int lengthOfReply = byteArrayToInt(lengthOfReplyAsArray);

// read the data into a byte array
byte[] reply = new byte[lengthOfReply];
forceRead(inputStream, reply); 
```

用于从 InputStream 读取数据的方法：

```
private byte[] forceRead(InputStream inputStream, byte[] result)
        throws IOException {

    int bytesRead = 0;
    int total = result.length;
    int remaining = total;

    while (remaining > 0)
        remaining -= inputStream.read(result, bytesRead, remaining);

    return result;

} 
```

用于将字节数组转换为整数的方法：

```
private int byteArrayToInt(byte[] byteArray) {
    int result = 0;

    for (int i = 0; (i<byteArray.length) && (i<8); i++) {
        result |= (byteArray[3-i] & 0xff) << (i << 3);
    }
    return result;                  
} 
```

问题是，数据不是按照到达的顺序读取的。前 4 个字节被读取得很好。其余的都混在一起了。我进行了 TCP 转储以确保数据正确到达客户端。似乎数据被分成 4 个 TCP 数据包。InputStream 返回第一个数据包的前 4 个字节，然后是第四个数据包的全部数据，第二个数据包的最后部分（从“最后一个数据包的长度”开始）和第三个数据包的全部数据。按照这个顺序。

有谁知道可能导致此问题的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:25:32.187

您读取字节数组的逻辑不太正确：

从[文档](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28byte%5B%5D,%20int,%20int%29)：

> 从输入流中读取最多 len 个字节的数据到一个字节数组中。尝试读取多达 len 个字节，但可能会读取较小的字节数。实际读取的字节数以整数形式返回。

和

> 读取的第一个字节存储在元素 b[off] 中，下一个字节存储在 b[off+1] 中，依此类推。读取的字节数最多等于 len。设 k 为实际读取的字节数；这些字节将存储在元素 b[off] 到 b[off+k-1] 中，而元素 b[off+k] 到 b[off+len-1] 不受影响。

但是，由于您的`bytesRead`变量在整个循环中保持为 0，因此输入流中的任何数据都始终写入缓冲区的开头，从而覆盖那里已经存在的数据。

什么会更好（检查 -1 还将确保如果流过早地用完数据会导致`remaining`增加，则不会从剩余中减去 -1，这意味着循环将不必要地运行，直到缓冲区溢出导致`remaining`消极的）：

```
while ((bytesRead = inputStream.read(result, total - remaining, remaining)) != -1
     && remaining > 0) {
    remaining -= bytesRead; 
```

# encoding - 关于字符集和编码的书籍？

> ID：10329440
> 
> 赞同：1
> 
> 时间：2012-04-26T08:05:29.677
> 
> 标签：encoding, character-encoding

我想学习有关字符集和编码的完整和权威的知识。

最好它可以提供：

*   原产地，
*   历史，
*   字符集/编码的标准，

还包括一些特定的应用/支持领域，

如

1.  语言（java、c/c++、javascript、flash ..）、
2.  网页（html，http ..），
3.  数据库（数据库编码、整理、IBM 代码页...）、
4.  大型机（EBCDIC..）

谁能给个书单。

这么久才找到这本书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:29:27.663

我在这个主题上找到的最好的一个是 - **Unicode 标准：全球字符编码**。通过，Unicode 基金会本身，目前在其版本 5 中是对主题的详尽研究。

**链接：** [http ://www.amazon.com/Unicode-Standard-Worldwide-Character-Encoding/dp/0201567881](https://rads.stackoverflow.com/amzn/click/com/0201567881)

不过，您可能还想检查其他以前的版本。

其他关于 Unicode 的书籍：

*   Unicode 揭秘——理查德·吉拉姆 (Richard Gillam)
*   Unicode 解释 - 由 Jukka Korpeta
*   字体和编码
*   CJKV 信息处理。

他们中的大多数都可以在[这里](http://www.amazon.com/s/ref=nb_sb_noss?url=search-alias=stripbooks&field-keywords=unicode)找到。

# php - Mirc控制代码转为html，通过php

> ID：10329443
> 
> 赞同：1
> 
> 时间：2012-04-26T08:05:48.560
> 
> 标签：php, html, regex, preg-replace, mirc

我意识到以前在这个论坛上也有人问过这个问题，但建议的解决方案对我来说并不可靠。

到目前为止，我已经为此工作了一周或更长时间，昨天我一直熬夜到凌晨 3 点，但我离题了，让我谈谈手头的问题：

对于那些不知道的人，mirc 使用 ascii 控制代码来控制字符颜色、下划线、粗细和斜体。颜色的ASCII码是3，粗体2，下划线1F，斜体1D，反向（黑底白字），16。

作为该数据将要输入的形式的示例，我们有（在正则表达式中，因为这些字符不会打印）：

```
\x034this text is red\x033this text is green\x03 \x02bold text\x02
\x034,3this text is red with a green background\x03 
```

等等。

以下是我尝试修改以供自己使用的两个函数，但返回的结果不可靠。在我进入该代码之前，具体来说“不可靠”，有时代码会解析，有时文本中仍然会留下控制代码，我不知道为什么。反正;

```
function mirc2html($x) {
    $c = array("FFF","000","00007F","009000","FF0000","7F0000","9F009F","FF7F00","FFFF00","00F800","00908F","00FFFF","0000FF","FF00FF","7F7F7F","CFD0CF");
    $x = preg_replace("/\x02(.*?)((?=\x02)\x02|$)/", "<b>$1</b>", $x);
    $x = preg_replace("/\x1F(.*?)((?=\x1F)\x1F|$)/", "<u>$1</u>", $x);
    $x = preg_replace("/\x1D(.*?)((?=\x1D)\x1D|$)/", "<i>$1</i>", $x);
    $x = preg_replace("/\x03(\d\d?),(\d\d?)(.*?)(?(?=\x03)|$)/e", "'</span><span style=\"color: #'.\$c[$1].'; background-color: #'.\$c[$2].';\">$3</span>'", $x);
    $x = preg_replace("/\x03(\d\d?)(.*?)(?(?=\x03)|$)/e", "'</span><span style=\"color: #'.\$c[$1].';\">$2</span>'", $x);
    //$x = preg_replace("/(\x0F|\x03)(.*?)/", "<span style=\"color: #000; background-color: #FFF;\">$2</span>", $x);
    //$x = preg_replace("/\x16(.*?)/", "<span style=\"color: #FFF; background-color: #000;\">$1</span>", $x);
    //$x = preg_replace("/\<\/span\>/","",$x,1);
    //$x = preg_replace("/(\<\/span\>){2}/","</span>",$x);
    return $x;
}

function color_rep($matches) {
    $matches[2] = ltrim($matches[2], "0");
    $bindings = array(0=>'white',1=>'black',2=>'blue',3=>'green',4=>'red',5=>'brown',6=>'purple',7=>'orange',8=>'yellow',9=>'lightgreen',10=>'#00908F',
        11=>'lightblue',12=>'blue',13=>'pink',14=>'grey',15=>'lightgrey');
    $preg = preg_match_all('/(\d\d?),(\d\d?)/',$matches[2], $col_arr);
    //print_r($col_arr);
    $fg = isset($bindings[$matches[2]]) ? $bindings[$matches[2]] : 'transparent';
    if ($preg == 1) {
        $fg = $bindings[$col_arr[1][0]];
        $bg = $bindings[$col_arr[2][0]];
    }
    else {
        $bg = 'transparent';
    }

    return '<span style="color: '.$fg.'; background: '.$bg.';">'.$matches[3].'</span>';
} 
```

并且，如果它是相关的，在哪里调用代码：

```
$logln = preg_replace_callback("/(\x03)(\d\d?,\d\d?|\d\d?)(\s?.*?)(?(?=\x03)|$)/","color_rep",$logln); 
```

来源：[第一](http://forum.swiftirc.net/viewtopic.php?f=44&t=14875)，[第二](https://stackoverflow.com/questions/4503194/parsing-mirc-colors-in-php)

我当然也尝试过查看各种基于 php/ajax 的 irc 客户端完成的方法，但那里没有任何成功。至于做这个 mirc 方面，我也看过那里，虽然结果比 php 更可靠，但发送到服务器的数据呈指数增长，以至于套接字在上传时超时，所以它不是一个可行的选择。

与往常一样，我们将不胜感激在此问题上的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T09:13:21.827

您应该划分问题，例如使用分词器。标记器将扫描输入字符串并将特殊部分转换为命名标记，以便脚本的其余部分可以识别它们。使用示例：

```
$mirc = "\x034this text is red\x033this text is green\x03 \x02bold text\x02
\x034,3this text is red with a green background\x03";

$tokenizer = new Tokenizer($mirc);

while(list($token, $data) = $tokenizer->getNext())
{
    switch($token)
    {
        case 'color-fgbg':
            printf('<%s:%d,%d>', $token, $data[1], $data[2]);
            break;

        case 'color-fg':
            printf('<%s:%d>', $token, $data[1]);
            break;

        case 'color-reset':
        case 'style-bold';
            printf('<%s>', $token);
            break;

        case 'catch-all':
            echo $data[0];
            break;

        default:
            throw new Exception(sprintf('Unknown token <%s>.', $token));
    }
} 
```

这还不算多，但可以确定有趣的部分及其（子）值，如输出所示：

```
<color-fg:4>this text is red<color-fg:3>this text is green<color-reset> <style-bold>bold text<style-bold>
<color-fgbg:4,3>this text is red with a green background<color-reset> 
```

您应该相对容易地修改上面的循环并处理诸如打开/关闭颜色之类的状态和诸如粗体之类的字体变体标签。

标记器本身定义了一组标记，其中尝试在某个偏移量处（从字符串的开头开始）一个接一个地找到它们。标记由正则表达式定义：

```
/**
 * regular expression based tokenizer,
 * first token wins.
 */
class Tokenizer
{
    private $subject;
    private $offset = 0;
    private $tokens = array(
        'color-fgbg'  => '\x03(\d{1,2}),(\d{1,2})',
        'color-fg'    => '\x03(\d{1,2})',
        'color-reset' => '\x03',
        'style-bold'  => '\x02',
        'catch-all' => '.|\n',
    );
    public function __construct($subject)
    {
        $this->subject = (string) $subject;
    }
    ... 
```

正如这个私有数组所示，简单的正则表达式和它们的键名。这是上面声明中使用的名称`switch`。

该`next()`函数将在当前偏移量处查找令牌，如果找到，将推进偏移量并返回令牌包括。所有子组匹配。由于涉及偏移量，因此简化了更详细的`$matches`数组（删除了偏移量），因为主程序通常不需要知道偏移量。

这里的原则很简单：第一个模式获胜。因此，您需要将最匹配的模式（在字符串长度的意义上）放在顶部以使其正常工作。在您的情况下，最大的一个是前景色和背景色的标记，`<color-fgbg>`.

如果找不到令牌，`NULL`则返回，所以这里的`next()`函数：

```
...
/**
 * @return array|null
 */
public function getNext()
{
    if ($this->offset >= strlen($this->subject))
        return NULL;

    foreach($this->tokens as $name => $token)
    {
        if (FALSE === $r = preg_match("~$token~", $this->subject, $matches, PREG_OFFSET_CAPTURE, $this->offset))
            throw new RuntimeException('Pattern for token %s failed (regex error).', $name);
        if ($r === 0)
            continue;
        if (!isset($matches[0])) {
            var_dump(substr($this->subject, $this->offset));
            $c = 1;
        }
        if ($matches[0][1] !== $this->offset)
            continue;
        $data = array();
        foreach($matches as $match)
        {
            list($data[]) = $match;
        }

        $this->offset += strlen($data[0]);
        return array($name, $data);
    }
    return NULL;
}
... 
```

因此，字符串的标记化现在被封装到`Tokenizer`类中，并且标记的解析是您可以在应用程序的其他部分中自己做的事情。这应该使您更容易更改样式方式（HTML 输出、基于 CSS 的 HTML 输出或其他不同的东西，如 bbcode 或 markdown），而且将来还支持新代码。此外，如果缺少某些东西，您可以更轻松地修复问题，因为它要么是无法识别的代码，要么是转换中缺少的东西。

作为要点的完整示例：[Mirc 颜色和样式（粗体）代码的标记器示例。](https://gist.github.com/2497942)

相关资源：

*   [非常基本的、基于正则表达式的标记器例程示例](https://stackoverflow.com/a/6980115/367456)
*   [http://www.mirc.com/colors.html](http://www.mirc.com/colors.html)
*   [http://en.wikipedia.org/wiki/Control_key](http://en.wikipedia.org/wiki/Control_key)

# python - 使用 Django 的身份验证系统在站点范围内验证用户

> ID：10329444
> 
> 赞同：0
> 
> 时间：2012-04-26T08:05:52.663
> 
> 标签：python, django, authentication

如何根据用户是否登录来横向显示内容（在每个页面上）？我在`base.html`其中定义了一个侧边栏区域，其中填充了登录/注册表单（如果用户未登录）或仪表板（如果用户已登录）。

我怎样才能使我网站上的每个网页都通用？每次调用新视图时是否必须手动检查用户并将`user`变量传递给我的`render_to_response()`？必须有一个更简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:08:39.930

如果我理解正确，我认为没有系统范围的解决方案。您必须根据用户是否经过身份验证来验证每个页面。

在模板中添加以下代码以查看用户是否有效且经过身份验证。您必须为每个具有用户级内容的模板执行此操作。

```
{% if user.is_authenticated %}
  ... html stuff ...
{% endif %} 
```

另一个想法可能是使用装饰`@login_required`。但是，您仍然需要将其添加到具有用户级别内容的每个视图中。

# ruby-on-rails - 什么是加载模板页面的“Rails 方式”

> ID：10329445
> 
> 赞同：2
> 
> 时间：2012-04-26T08:05:53.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我刚刚开始学习 Ruby on Rails。我更喜欢它，但我遇到了障碍。我知道解决问题的两种方法，但我很好奇这样做的“Rails 方式”是什么。

**设置**

我有一个列出项目描述的索引页。当用户点击一个项目时，它会将他们带到`show`项目控制器的功能中。列表中的项目是从 MySQL 数据库加载的。

**我想做的事**

我希望能够在每个“项目页面”上加载项目特定信息。此信息由文档、代码示例等组成。每个页面都将具有相同的通用模板。

**方式一**

将 MySQL 数据库中的 HTML 和文本存储在“Sections”表中，并加载与该项目相关的所有部分。显示页面下方的每个部分。

**方式2**（我宁愿这样做）

每个项目都有一个单独的视图，包含完整的文档。`show`根据函数中加载的项目加载特定视图

**注释**

自从我使用 CodeIgniter 以来，Rails 中是否有一些我不习惯考虑的第三种方式？

我完全可以适应“Rails Way”是什么，但我只是不确定这种事情的正确约定是什么。

或者这个问题是一个案例，你怎么做都没有关系？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:43:49.103

如果每个项目都有相同的通用模板，我不知道拥有不同视图的价值是什么。

这里有一个试穿尺寸的建议。

您可以将文档、代码示例等存储在 section 表中，或者将每种类型存储在其自己的表中。如果您将它们放在sections 表中，请包含一个类型字段，并为每种类型使用不同的类。假设 Documentation 和 CodeExample 是两个这样的类。

使用 :conditions 选项在您的 Project 类中为每种类型定义一个 has_one。

```
class Project < ActiveRecord::Base
  has_one :documentation, :conditions => { :type => "Documentation" }
  has_one :code_example, :conditions => { :type => "CodeExample" }
end

class Documentation < ActiveRecord::Base
  set_table_name "sections"
  belongs_to :project
end 
```

如果你想组织你的项目展示页面来包含这些部分，你可以为每个部分类型调用 partials。

如果您希望您的项目显示页面具有链接或选项卡（您可以使用链接或 CSS 格式的按钮在页面上实现选项卡），请转到节类型的控制器中的显示操作。为此使用嵌套路由可能是您想要使用的想法。

```
resources :projects do
  resource :documentation
  resource :code_example
end 
```

这些是一些想法。如果你不想这样做，你可以从我的想法中得到你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:24:13.577

有很多方法可以做到这一点，最简单的方法之一是覆盖默认模板。（render :action 不会在目标操作仅模板中运行任何代码）这是您问题中的 Way2。例子：

```
def show
  @project = Project.find(params[:id])
  if @project.has_template?
    render :action => "show_#{@project.template_name}" and return
  end
  render :action => "show"
end 
```

在此示例目录中 app/views/projects 应该有每个项目的模板，其名称如默认的“show.html.erb”和带有模板名称“myspecialproject”的项目的“show_myspecialproject.html.erb”等......

template_name 是一个告诉你项目是否有这个或应该使用默认值的方法，你可以在这个方法中放入任何逻辑，它可以是附加的列 id 表或者只是 template_name 可以等于项目名称，或者它可以只检查文件是否存在在当前目录中。

如果您想使用 show.html.erb，您也可以使用部分模板，因为您有代码重复并保持模板 DRY。 [http://rails.rubyonrails.org/classes/ActionView/Partials.html](http://rails.rubyonrails.org/classes/ActionView/Partials.html) 这样

控制器动作是默认的

```
def show
    @project = Project.find(params[:id])      
end 

in show.html.erb
<h1><%= @project.name %></h1>
<%= render @project.tamplate_name %> 
```

在此示例中，所有部分模板都应以 "_" 开头，例如。：“_myspecialproject.html.erb”

# c++ - QML：如何创建半透明/半透明的 WebView 元素？

> ID：10329447
> 
> 赞同：0
> 
> 时间：2012-04-26T08:06:03.687
> 
> 标签：c++, qt, qml

我想知道如何创建一个透明的 WebView 元素（比如透明窗口......）我尝试类似：

```
 Rectangle {
           id: webBrowser
           width: 100; height: 100
           color: "red"
           WebView {
               html: "<style>body,html{background:transparent;background-color: rgba(1,255,0,0.5;)} </style><p>Hello</p>"
             //     preferredWidth: 50
              //    preferredHeight: 50
anchors.fill: parent

           }
       } 
```

但似乎无济于事=（我该怎么做才能使 WebView 透明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:20:13.190

You need to set the opacity of the WebView itself, not just the HTML content:

```
WebView {
   opacity: 0.5;
   html: "<style>body,html{background:transparent;background-color: 
         rgba(1,255,0,0.5;)} </style><p>Hello</p>"
   anchors.fill: parent
   } 
```

# java - ORA-00933: SQL 命令未正确结束: java

> ID：10329452
> 
> 赞同：0
> 
> 时间：2012-04-26T08:06:28.133
> 
> 标签：java, jdbc, ora-00933

我从文本文件中获取域并将其一一传递给查询。第一次查询执行良好..但是当它使用第二个域并将其传递给查询时出现错误“ORA-00933：SQL 命令未正确结束”下面是代码

```
sql.append("select person_org_id,profile_type_id as NEXUS, profile_option_id,profile_option_value  from TABLE1 ");
            sql.append(" where profile_type_id=1 and person_org_id in (select person_org_id from TABLE2 where ");
            sql.append(" account_id in (select account_id from TABLE3 where prod_id=10001 and prod_inst_name = ?)) ");

            ps = con.prepareStatement(sql.toString());
            System.out.println("----------checkpoint -----------");

            ps.setString(1,domain_name);
            System.out.println("----------checkpoint 4-----------");
            rs= ps.executeQuery();
            System.out.println("----------checkpoint 5-----------"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:09:56.030

如果您在循环中有此代码，并且您没有清除 StringBuilder 或使用新的，那么第二次，您将有两次 SQL 语句，这将解释错误。

如果一个简单的 String 可以，为什么还要使用 StringBuilder 呢？SQL 语句完全没有变化。当然，这可能是一个简化的例子。

此外，如果您在循环中执行此操作，并且每次 SQL 确实完全相同，您可以只准备一次语句，然后在循环中重复执行它。这就是*准备好的*语句的用途。

# jquery - Trirand JqGrid 如何触发另一个控件进行更新

> ID：10329453
> 
> 赞同：0
> 
> 时间：2012-04-26T08:06:32.647
> 
> 标签：jquery, jqgrid

例如，我在网站的左侧面板上使用 Trirand JqSuit TreeView 或一些 Ajax 类别导航。它包含2个类别：

新品上市 (50)

加工 (50)

现在，我有一个 JqGrid 显示“新来港定居人士”表数据。我编辑了一行，并将该行标记为“已处理”。我希望 JqGrid 在更新完成时触发 TreeView。所以我们可以有以下内容：

新品上市 (49)

加工 (51)

JqG​​rid 中使用什么方法来触发另一个控件（在 New Arivals 表的情况下）？或者被另一个控件触发（在 TreeView 的情况下）谢谢。

# jenkins - 在成功的 Jenkins 构建上自动部署上限

> ID：10329462
> 
> 赞同：3
> 
> 时间：2012-04-26T08:07:08.927
> 
> 标签：jenkins, capistrano

我想让詹金斯表演

```
cap deploy 
```

在每次成功构建时自动

有人这样做或有任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T15:03:57.480

[https://wiki.jenkins-ci.org/display/JENKINS/Post+build+task](https://wiki.jenkins-ci.org/display/JENKINS/Post+build+task)会做吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T21:19:57.680

在构建之后，您可以使用任何您喜欢的命令执行 shell 脚本，所以我会将 cap 命令放在那里。当然，在 Jenkins 系统上必须安装 Capistrano。

有关 Shell 脚本的更多详细信息，请参阅[Jenkins Wiki](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project#Buildingasoftwareproject-ShellScriptsandWindowsBatchCommands)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T06:30:23.463

一种方法是使用 Execute shell 创建单独的项目进行部署

```
cap deploy 
```

并将其添加为真实项目的 Post-Build Actions 中的“构建其他项目”。

# solr - 为什么 solr RemoveDuplicatesTokenFilterFactory 不起作用？

> ID：10329470
> 
> 赞同：3
> 
> 时间：2012-04-26T08:07:46.483
> 
> 标签：solr, token

我的 schema.xml 正在拆分产品名称，然后在拆分后使用 RemoveDuplicate 删除重复的单词。

```
 <fieldType name="type_name" class="solr.TextField">
        <analyzer type="index">
            <tokenizer class="solr.PatternTokenizerFactory" pattern="\|| " />
            <filter class="solr.LowerCaseFilterFactory"/>
            <filter class="solr.RemoveDuplicatesTokenFilterFactory"/> 
```

在查询分析器中，我看到 RemoveDuplicatesTokenFilterFactory 对重复的单词完全没有做任何事情。为什么？

![在此处输入图像描述](../Images/3d42cbddd688fab4afe5d52b48cdc84a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:25:11.537

如果您阅读[Wiki](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.RemoveDuplicatesTokenFilterFactory)，您会发现它只删除了相同位置的重复项，而这里的情况并非如此。

# javascript - 如果元素包含某些文本

> ID：10329477
> 
> 赞同：14
> 
> 时间：2012-04-26T08:08:12.233
> 
> 标签：javascript, jquery

```
$('.test').css('background','red');

<div id="example">Some text</div> 
```

`.addClass('test')`如果`#example`包含“文本”一词，我该怎么办？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-26T08:10:36.960

只使用`:contains`伪类

```
$('#example:contains("text")').addClass('test'); 
```

`#example`如果它包含“文本”，这将添加该类

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T08:10:50.460

您可以使用`$("#example")`获取元素的 jQuery 包装器，然后使用`text()`获取其文本，并使用`String#indexOf`，例如：

```
var ex = $("#example");
if (ex.text().indexOf("text") !== -1) {
    ex.addClass("test");
} 
```

你也可以`:contains("text")`像[F. Calderan 展示](https://stackoverflow.com/a/10329507/157247)的那样在选择器中使用，不过请注意，当你使用像这样的非标准伪选择器时，jQuery 不能使用底层浏览器的内置东西来查找元素，因此它可能会更慢。以上将允许 jQuery 使用`document.getElementById`. 不过，只有少数情况下速度真的很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T08:12:22.840

试试下面的代码

```
$('#example:contains("text")').addClass('test'); 
```

[在这里](http://api.jquery.com/contains-selector/)查看`:contains`选择器的示例和解释

# php - fwrite 不写反斜杠

> ID：10329478
> 
> 赞同：0
> 
> 时间：2012-04-26T08:08:31.710
> 
> 标签：php, fwrite, backslash

我在输入带有反斜杠的文本时遇到问题。这是由于从以前的表单中获得了 POST 消息（消息）。有没有办法解决这个问题？我的魔术引号已启用。

```
<?php
$filename = 'test.txt';
$somecontent = $_POST['message'];

// Let's make sure the file exists and is writable first.
if (is_writable($filename)) {

    // In our example we're opening $filename in append mode.
    // The file pointer is at the bottom of the file hence
    // that's where $somecontent will go when we fwrite() it.
    if (!$handle = fopen($filename, 'w')) {
         echo "Cannot open file ($filename)";
         exit;
    }

    // Write $somecontent to our opened file.
    if (fwrite($handle, $somecontent) === FALSE) {
        echo "Cannot write to file ($filename)";
        exit;
    }

    echo "Success, wrote ($somecontent) to file ($filename)";

    fclose($handle);

} else {
    echo "The file $filename is not writable";
}
?> 
```

结果：

```
Message= Jo\hn, POST result : Jo\\hn. Output: Jo\hn 
```

预期的：

```
Message = Jo\hn, POST result : Jo\\hn, Output : Jo\\hn 
```

输出必须与 POST Result 相同，而不是原始消息本身。

# selenium - Selenium - 获取属性 HTMLDocument.readyState 的权限被拒绝

> ID：10329479
> 
> 赞同：4
> 
> 时间：2012-04-26T08:08:32.520
> 
> 标签：selenium, selenium-ide, browser-automation

我们正在使用 Selenium（用于 Firefox）进行一些自动化，并录制了一个脚本来播放。在提供者进行一些新的更改之前，这一切正常。现在我们得到以下错误，不知道这意味着什么......

```
 [info] Executing: |waitForPopUp | LookuphdnProductId1 | 40000 |
  -->[error] Permission denied for <https://books.zoho.com> to get property HTMLDocument.readyState
    [info] Executing: |selectWindow | name=LookuphdnProductId1 | <br/>
  -->[error] Unexpected Exception: fileName -> chrome://selenium-ide/content/selenium-core/scripts/selenium-browserbot.js, lineNumber -> 840 
```

任何有浏览器自动化或 Selenium 经验的人都会给出一些提示？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T08:55:37.257

通过[这篇博文](http://www.woloszyn.org/2008/04/22/selenium-and-the-permission-denied-to-get-property-locationhref-problem/)和[Selenium 常见问题解答](http://wiki.openqa.org/display/SEL/Selenium+core+FAQ#SeleniumCoreFAQ-Whycan%27tIgetSeleniumCoreteststoworkwithGoogle%3F)：

这基本上是[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的问题，这是 Selenium RC（因此也是 Selenium IDE）的设计限制。问题是 Selenium 将所有命令作为 Javascript 运行 - 并且 Javascript 不能跨域运行。但是您显然在测试中的某个地方更改了域。

你不要在某个地方尝试打开这样的地址：`http://www.somedomain.com/link=www.google.com`？如果是，您可能想立即打开`http://google.com`。如果您单击具有此类 href 的链接，请尝试挖掘链接并在脚本中“手动”打开 url。或者将 Firefox 与一些插件一起使用，我已经看到了一些。

如果只是重定向到另一个网站/域，那么您就处于困境中。如果您开始`foo.com`并通过某个链接重定向到，`bar.org`那么您不得使用该`andWait`命令并`bar.org`在脚本中再次手动打开（因此它在该域上运行并具有正确的访问权限）。

顺便说一句，Selenium 2 (WebDriver) 没有这个限制。

# mongodb - 为动态集合和设计建议自动定义分片键

> ID：10329484
> 
> 赞同：2
> 
> 时间：2012-04-26T08:08:45.057
> 
> 标签：mongodb, sharding

我想为我的 MongoDb 实现分片，需要你的一些建议。

**洞察力**

1.  我们有很多 cron-job 收集关于机器的各种信息并将它们写入它自己的集合。
2.  集合是动态创建的。
3.  每个集合都有数百万个数据。
4.  每个集合的 Structure1 是 Name、Category、Subcategory、NodeId、Process-Start-Time、Process-End-Time、Value。
5.  每个集合的结构 2 是名称、类别、子类别、子类型、日期、值。
6.  每个集合的 Structure3 是 Name、Category、Subcategory、NodeId、Process-Start-Time、Process-End-Time、Value、Flag1、Flag2、Flag3。

经过研究，我们发现我们将使用分片并使其对多个服务器有用，这保证了两件事：

1.  不必担心空间不足。
2.  跨服务器的平衡性能

> **问题一：** 我的问题是找到一个正确的 shard-key 来对数据进行分区。除了默认的 ObjectId，我在集合中看不到唯一键。进一步阅读后，我发现可以使用复合键，将复合键或自定义 ObjectId 作为键是否有意义，其中值可能类似于 ObjectId：*_。这对于返回查询结果和移动块的性能非常关键。*
> 
>  ***问题2：** 由于我们的集合很大，动态创建集合时，每次在Mongo控制台设置分片会变得很困难。有没有办法让它在 mongo 中自动运行，以便每当为分片数据库创建集合时，它都会为该集合定义分片键？
> 
> **问题3：** 是否真的需要将shard-key传递给查询表达式？我认为我们没有在任何查询表达式中使用 ObjectId，我怀疑我是否可以使用唯一 ID，因为数据的结构不像传统数据库。如果是，它对这样的查询有何帮助：*

 ***例子：**

> {类别：“能源”，子类别：“瓦特”，过程开始时间：{$gte：132234234}}

提前感谢您介入并帮助我解决此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:31:30.007

最简单的方法可能是对数据库进行分片，但不要对集合进行分片。好处：

*   集合将分布在分片上（但每个集合只存在于一个分片上）。*编辑：我错了，这还没有实现。请参阅[相关的 Jira 票证](https://jira.mongodb.org/browse/SERVER-939)以进行跟踪。目前，您可以使用[标签](http://www.kchodorow.com/blog/2012/07/25/controlling-collection-distribution/)来分发集合，但不是自动的。*
*   无需在每个新集合上调用 shardCollection

缺点是集合的所有流量都将流向其分片，这对于您尝试做的事情可能不切实际。

至于你的问题：

问题 1：分片键不必是唯一的。您一般查询什么？您可能会更好地使用类似`{category:1}`or的东西`{category:1,subcategory:1}`。

问题 2：没有内置方法可以自动执行此操作，获得该行为的最佳方法可能是设置一个 cron 作业。

问题3：不可以。包含shard key的查询可以发送到特定的shard，没有shard key的查询必须发送到所有shard，见[http://www.mongodb.org/display/DOCS/Sharding+Introduction#ShardingIntroduction-操作类型](http://www.mongodb.org/display/DOCS/Sharding+Introduction#ShardingIntroduction-OperationTypes)。*

# asp.net-mvc-3 - 如何在一条路线 MVC 3 中设置 2 个 try-all 参数

> ID：10329485
> 
> 赞同：0
> 
> 时间：2012-04-26T08:08:50.740
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

无论如何，我可以在同一个 RouteBase 中使用 2 个 try-all 参数吗？

即：我目前有路由：“media/{*key}”，这是一条从 S3 获取媒体文件的自定义路由

出于 SEO 目的：我需要设置另一条路由“media/{*key}/{*name}”，它指向与上述相同的 S3 资源，但在末尾附加了一个名称

目前我在处理路由时创建了一个定制的“StorageServiceRoute”。

然而

```
var innerRoute = new Route(_routeUrl, this); 
```

无法在 _routURL ("media/{*key}/{*name}") 中有 2 个 try-catch，并且出现如下错误：

> 包罗万象的参数只能作为路由 URL 的最后一段出现。

在路由中有什么好的方法来处理这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:18:15.607

您可以编写自定义路线：

```
public class MediaRoute : Route
{
    public MediaRoute()
        : base(
            "media/{*catchall}",
            new RouteValueDictionary(new
            {
                controller = "Home",
                action = "Index"
            }),
            new MvcRouteHandler()
        )
    {
    }

    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        var rd = base.GetRouteData(httpContext);
        if (rd == null)
        {
            return null;
        }

        var catchall = rd.GetRequiredString("catchall");
        var tokens = catchall.Split(new[] { '/' }, 2);
        if (tokens.Length > 0)
        {
            rd.Values["key"] = tokens[0];
        }
        if (tokens.Length > 1)
        {
            rd.Values["name"] = tokens[1];
        }

        return rd;
    }
} 
```

可以在以下位置注册`Global.asax`：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.Add("media", new MediaRoute());

    routes.MapRoute(
        "Default",
        "{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:18:40.353

## 你的路由定义有问题

您的路由 URL 定义存在一个问题，即一个包罗万象的参数何时结束，下一个参数何时开始：

```
"media/{*key}/{*name}" 
```

如果第一个可以有任意数量的段。第二个也是如此。如果您的路线中可以有另一个静态段，那么事情会更简单。IE。：

```
"media/{*key}/something/{*name}" 
```

在这种情况下，您可以编写自己的自定义路线，也可以使用我编写的路线。[您可以在我的博客文章](http://erraticdev.blogspot.com/2011/01/custom-aspnet-mvc-route-class-with.html)中找到所有详细信息。

# python - 防止超出参数绑定的 sql 注入攻击

> ID：10329486
> 
> 赞同：0
> 
> 时间：2012-04-26T08:09:00.970
> 
> 标签：python, sql, sql-injection

我在阅读有关防止 sql 注入攻击的保护时完成了我的作业：我知道我需要使用参数绑定，但是：

*   我已经这样做了，谢谢。
*   我知道我的用户使用的一些数据库驱动程序以最愚蠢的方式实现参数绑定。即，它们容易受到sql注入攻击。我可以尝试限制他们可以使用哪个数据库驱动程序，但是这种策略注定要失败。
*   即使我使用了不错的数据库驱动程序，我也不相信自己不会忘记至少使用一次参数绑定

因此，我想通过对面向 http 的用户输入进行额外的清理来添加额外的保护层。诀窍是我知道这通常很难做到，所以我宁愿使用由安全专业人员编写的经过良好审核、精心设计的第三方库，以将输入字符串转义为不太危险的内容，但我找不到任何明显的候选人。我使用 python，所以我会对基于 python 的解决方案感兴趣，但如果我可以将它们绑定到 python，其他建议也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:20:19.033

> *   我已经这样做了，谢谢。

好的; 有了这个，您可以完全确定（是的，完全确定）用户输入仅被解释为值。您应该将精力用于保护您的站点免受其他类型的漏洞（想到 XSS 和 CSRF；确保您正确使用 SSL 等等）。

> *   我知道我的用户使用的一些数据库驱动程序以最愚蠢的方式实现参数绑定。即，它们容易受到sql注入攻击。我可以尝试限制他们可以使用哪个数据库驱动程序，但是这种策略注定要失败。

好吧，世上没有万无一失的东西，因为傻瓜太聪明了。如果您的受众决心破坏您为保护他们的数据而付出的所有努力，那么您真的无能为力。您*可以*做的是确定您认为哪些驱动程序是安全的，并在您检测到您的用户正在使用其他东西时生成一个**可怕的警告。**

> *   即使我使用了不错的数据库驱动程序，我也不相信自己不会忘记至少使用一次参数绑定

1.  所以不要那样做！

2.  在开发过程中，记录发送到驱动程序的*每个sql 语句。*定期检查用户数据是否从未在此日志中（或作为单独的事件记录，用于参数）。

3.  SQL 注入基本上是字符串格式化。您通常可以将每个数据库事务向后跟踪到原始 sql；如果用户数据在此过程中的某个地方被格式化，那么你就有问题了。在扫描项目时，我发现我能够以大约每分钟一个的速度找到这些项目，有效地使用了 grep 和我选择的编辑器。除非您有数以万计的不同 sql 语句，否则遍历每一个语句应该不会非常困难。
4.  尝试使您的数据库交互与应用程序的其余部分很好地隔离。将 sql 与您的其他代码混合在一起，很难维护，或者进行我上面描述的检查。理想情况下，您应该通过某种数据库抽象（完整的 ORM 或者更薄的东西），以便在手头的任务时可以*只处理与数据库相关的代码。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:24:45.840

我不知道这是否适用，但我只是为了完整性而将其放在那里，专家可以随意对我投反对票……更不用说我担心它在某些情况下的表现。

我曾经的任务是保护一个用经典 asp 编写的老化 Web 应用程序免受 sql 注入的影响（当时它们受到的打击非常严重）

我有时间浏览所有代码（不是可以选择的），所以我在我们的一个标准包含文件中添加了一个方法，该方法查看用户提交的所有内容（通过请求参数迭代）并检查它是否有列入黑名单的 html 标签（例如脚本标签）和 sql 注入标志（例如“;--”和“';shutdown”）..

如果它找到它重定向用户告诉他们他们提交是可疑的，如果他们有问题的电话或电子邮件..等等等等。

它还在表格中记录了注入尝试（一旦被转义）以及有关攻击的 IP 地址时间等的详细信息。

总的来说，这是一种享受……至少攻击停止了。

我使用的每一种网络技术都有某种方式来伪造这样的东西，我只花了一天时间来开发和测试..

希望它有所帮助，我不会将其称为行业标准或任何东西

**tl;dr?: 根据字符串黑名单检查所有请求参数**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:56:03.440

> 因此，我想通过对面向 http 的用户输入进行额外的清理来添加额外的保护层。

这种策略注定要失败。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-26T08:14:20.903

在 php 中，我使用 preg_replace 来保护我的网站免受 sql 注入攻击。preg_match 也可以使用。尝试在 python 中搜索 this 的等效函数。

# facebook - Facebook Like 按钮几天前突然停止工作

> ID：10329489
> 
> 赞同：1
> 
> 时间：2012-04-26T08:09:19.633
> 
> 标签：facebook, button, facebook-like

我有一个 Facebook 应用程序（朋友和个人资料统计），在以下 URL 上有一个喜欢按钮：

[http://www.facebook.com/apps/application.php?id=120125298051178](http://www.facebook.com/apps/application.php?id=120125298051178)（重定向到 [http://apps.facebook.com/statistics](http://apps.facebook.com/statistics)）

链接到第一个 URL 的点赞按钮在几天前停止工作，显示为 0 个点赞，点击时出错。

我已经通过 Facebook 的调试器/linter (developers.facebook.com/tools/lint/) 运行了该页面，它给出了几个警告但没有错误（我尝试摆脱警告但无济于事，因为我的应用程序在 iFrame 上运行Facebook 的网站）。

使用 Facebook 的 Like 按钮工具 (developers.facebook.com/docs/reference/plugins/like/)，我的 URL 收到相同的错误消息。这告诉我这不是我实现like 按钮的问题，而是我的URL 的问题。

知道可能出了什么问题以及如何解决吗？

# c# - 访问 WebMethod 和 jQuery 中的公共变量

> ID：10329492
> 
> 赞同：1
> 
> 时间：2012-04-26T08:09:42.000
> 
> 标签：c#, jquery, asp.net, webmethod

在我的 ASP.Net 页面中，我在使用 jQuery AJAX 滚动时从服务器加载数据。我正在使用这种方法，因为使用 AJAX 从服务器加载数据将有助于任何应用程序提高其性能，因为单独显示在屏幕上的数据是第一次加载，如果需要，更多数据将从服务器加载为用户滚动。我正在使用以下代码：

```
$(document).ready(

        function () {
            $contentLoadTriggered = false;
            $(window).scroll(

            function () {
                if ($(window).scrollTop() >= ($("#wrapperDiv").height() - $(window).height()) && $contentLoadTriggered == false) { //here I want to check for the isReady variable in ViewState
                    $contentLoadTriggered = true;
                    $.ajax({
                        type: "POST",
                        url: "MyPage.aspx/GetDataFromServer",
                        data: "{}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        async: true,
                        cache: false,
                        success: function (msg) {
                            $("#wrapperDiv").append(msg.d);
                            $contentLoadTriggered = false;
                        },
                        error: function (x, e) {
                            alert("The call to the server side failed. " + x.responseText);
                        }
                    });
                }
            });
        }); 
```

* * *

```
[WebMethod]
public static string GetDataFromServer()
{
    string resp = string.Empty;
    for (int i = 1; i <= 10; i++)
    {
        resp += "<p><span>" + i + "</span> This content is dynamically appended to the existing content on scrolling.</p>";
    }

    //if (myConidition)
        //ViewState["isReady"] = true;

    return resp;
} 
```

在某个时候（当我的条件得到满足时），我想停止从服务器加载数据。所以我想`isReady`在`ViewState`然后在 jQuery 中检查这个变量的值来判断是否调用 WebMethod。不幸的是，我不能在 WebServices 中使用 ViewState，我也不知道如何在 jQuery 中访问 ViewState。

我可以使用什么来替代 ViewState，它可以从 WebMethod 和 jQuery 访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:21:27.803

我能想到的最好方法是发送自定义类对象或字符串 [];

```
Public class CustomClass
{
    public string HTML { get; set; }
    public bool Load  { get; set; }
}

[WebMethod()]
public static StatusViewModel  GetDataFromServer()
{
    // do work
    return CustomObject;
} 
```

希望能帮助到你。

# java - Java 和 Web 开发：存储自定义敏感数据（如私钥、API 密钥等）的良好实践

> ID：10329493
> 
> 赞同：2
> 
> 时间：2012-04-26T08:09:44.657
> 
> 标签：java, spring-mvc, coding-style, sensitive-data

您建议在 Spring MVC 应用程序中（或实际上在任何其他 JAVA Web MVC 应用程序中）存储自定义敏感数据？假设我有一个 API 密钥，我需要它可用于我的控制器。我可以考虑的几种解决方案：

**1-**使用静态类：

```
public final static String API_KEY = "my-api-key"; 
```

**2-**使用上下文参数（`web.xml`）：

```
<context-param>
    <param-name>apiKey</param-name>
    <param-value>my-api-key</param-value>
</context-param> 
```

**3-**使用自定义`.properties`文件：

```
apiKey=my-api-key 
```

**4-**使用自定义`.xml`文件：

```
<entry key="apiKey">my-api-key</entry> 
```

**5-**您可能有的任何其他想法/解决方案:)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:25:48.140

如果您对任何开发人员/管理员都可以看到密钥感到高兴，上述任何一项似乎都很好。您也可以将其存储在数据库、目录等中。

这对于用户密码是不可接受的，因为没有人应该能够看到这些密码。密码最好存储为单向哈希 - 我不是安全专家，但我相信 md5 被认为是弱的，其他人推荐使用 SHA-256 之类的东西。

您可能应该考虑的其他事项是：

*   文件/目录权限（哪些用户/组可以读/写文件）
*   是否需要通过网络加密（在这种情况下，您需要公钥/私钥）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:40:06.907

如果您使用的是 spring-framework，我建议您使用[jasypt](http://www.jasypt.org/)库。我允许您加密某些属性并将主密码外部化到注册表或其他位置。

走这条路时，还建议在您的应用程序外部有一个属性文件，客户端可以在其中放置其加密属性，这些属性覆盖您的应用程序提供的默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T08:45:49.797

取决于您需要该信息的安全程度。

在您列出的选项中，我相信选项（1）

```
public final static String API_KEY = "my-api-key"; 
```

相对安全，因为 java 文件被编译为类文件，并且快速检查您的发行版不会让任何人看到 api-key，但缺点是它是硬编码的，如果不重新编译就无法更改它。

我建议在代码中使用硬编码密码，然后使用 DES 之类的东西加密密钥。然后可以将加密的密钥存储为属性文件或其他文件。

# jquery - javascript_include_tag 在 Ruby on Rails 的部分内部无法正常工作

> ID：10329495
> 
> 赞同：1
> 
> 时间：2012-04-26T08:09:54.750
> 
> 标签：jquery, ruby-on-rails, nested-forms, ruby-on-rails-3.2, renderpartial

我正在使用 simple_nested_form，并且在我的客户账单表格中有这个

```
<%= simple_nested_form_for @customer_bill do |f| %>
 <%= f.error_messages %>

 <%= f.label :employee_id %>
    <%= f.collection_select :employee_id, Employee.all,:id,:name, {:prompt => "Select Employee"}, :style => 'width:205px;' %><br />

            <%= f.label :date %>
            <%= f.datepicker :date, :dateFormat => 'dd MM, yy',  :showOn => "both", :buttonImage => "../assets/calendar.gif", :buttonImageOnly => true, :changeMonth => true, :changeYear => true, :placeholder => "Click on the Calender" %><br/>          

 <p><%= f.link_to_add "Add Product", :customer_bill_line_items %> </p>
  <p><%= f.submit %></p>
<% end %> 
```

在我单击“添加产品”后，呈现以下部分

```
 <%= javascript_include_tag 'calculations' %>
     <hr/> 
    <%= f.hidden_field :user_id, :value => current_user.id %>
    <%= f.hidden_field :customer_bill_id %>

    <%= f.label :product_id %>
    <%= f.collection_select :product_id,Product.all,:id,:title, :prompt => "Select a Product", :style => 'width:150px;' %>&nbsp;&nbsp;&nbsp;<%= f.link_to_remove "Remove Product"%>
    <br/>

     <p class="fields">
<%= f.input :price, :class =>"price" %>
<br/>
<%= f.input :quantity, :class =>"qty" %><br/>

<%= f.input :amount, :class =>"amount"%><br/>
</p> 
```

我的 Calculations.js 中有这个

```
jQuery(document).ready(function(){
jQuery(".price, .qty").keyup(function() {
        var p = jQuery(".price").val();
        var q = jQuery(".qty").val();
        jQuery(".amount").val(q * p);
    });
}); 
```

​</p>

现在问题是第一次当我点击“添加产品”并输入“价格”和“数量”时，金额在 js 文件中计算并显示在“金额”字段中，当我第二次点击添加产品时，第一个的计算被渲染，似乎 js 文件在每个“金额”字段中显示第一次计算的值

似乎是什么问题？每次我调用部分时，我该怎么做才能进行正确的计算？急需帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:22:42.733

第二次呈现“添加产品”部分后，页面上的一些元素具有重复`id`值（`price`, `qty`, `amount`）。这是无效的 HTML，jQuery 将无法判断您要绑定`keyup`到哪些。

尝试重写你的 partial 和 jQuery 来避免这个问题。要么生成正确的唯一 id，要么将您`keyup`连接到不同的属性（可能是一个类？）。如果您选择后一种路线，您还可以考虑将 jQuery 作为`live`调用放入页面，而不是`keyup`为每个新产品添加新绑定。

# erlang - 等于和完全等于术语比较运算符之间的区别

> ID：10329497
> 
> 赞同：10
> 
> 时间：2012-04-26T08:10:02.700
> 
> 标签：erlang

[等于 (==) 和完全等于 (=:=) erlang 术语比较运算符](http://www.erlang.org/doc/reference_manual/expressions.html#id76768)有什么区别？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T08:16:04.650

前者 ( `==`) 比较值；后者 ( `=:=`) 比较值**和类型**。

```
1> 1 =:= 1.0.
false
2> 1 == 1.0.
true 
```

# c - 使用 sleep 功能时如何增加计数？（在 C 语言中）

> ID：10329498
> 
> 赞同：0
> 
> 时间：2012-04-26T08:10:09.580
> 
> 标签：c, signals, sleep

嘿伙计们，我似乎迷路了。我应该能够在一个无限循环内增加一个孩子的计数，并在每次父母发送信号时打印计数，这应该是每 1 秒。我写了我的代码，但我认为使用 fork 后，子进程和父进程同时运行，但事实并非如此，所以我不确定如何解决这个问题。任何帮助都会很棒

```
#include <stdio.h>
#include <unistd.h>
#include <signal.h>
int count = 0;//global count variable

void catch(int signal){
printf("Ouch! - I got signal %d \n", signal);
printf("count is %d\n", count);
count = 0;
}

int main(){
int pid;
int sec=0;
pid = fork();
int count1 = 0;
(void) signal(SIGALRM, catch);
if(pid==-1){
    printf("error\n");
}
else if(pid==0){//if child
    while(1){//while loop to increment count while parent to sleeping
    count = count + 1;
    }
    //pause();

    }
else{//parent
    sleep(1);//1 second pause
    raise(SIGALRM);//send alarm
    count1 = count1 + 1;
    if(count1>=5){
        return 0;
    }
    exit(0);
}
return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:14:34.600

`raise`将信号发送给您自己（即父母）而不是孩子。使用`kill(child_pid, SIGALRM)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:15:37.730

使用 fork 后，两个进程的变量位于不同的内存位置。所以当你在父进程中发出信号时，打印出来的是父进程的“count”变量。您可以在子进程的循环中打印“计数”以查看它的增加

# android - Sqlite如何使用游标获取字符串项

> ID：10329500
> 
> 赞同：5
> 
> 时间：2012-04-26T08:10:16.827
> 
> 标签：android, string, sqlite, android-cursor

```
public Cursor getImages(long rowId) throws SQLException
{
    Cursor mCursor =
            db.rawQuery("select * from Pictures WHERE id=" + rowId + ";", null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

表格列“id、pic、comment”

我想将 pic & comment 的值用于字符串数组。

我的代码是：

```
int i=0;
Cursor c1 = db.getImages(memberId);     
c1.moveToFirst();
while(c1.isLast()){
    pictures[i]=c1.getString(1);
    comments[i]=c1.getString(2);
    i++;
} 
```

这不起作用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T08:21:39.457

你应该这样做：

`c1.getString(cursor.getColumnIndex("pic"));`

和

`c1.getString(cursor.getColumnIndex("comment"));`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-10T21:10:15.570

我就是这样做的

我更喜欢

> 获取列索引（）

而不是数字。

```
if(cursor.moveToFirst()){
    do{
          String varaible1 = cursor.getString(cursor.getColumnIndex("column_name1"));
          String varaible2 = cursor.getString(cursor.getColumnIndex("column_name2"));

       }while (cursor.moveToNext());
}
cursor.close(); 
```

始终使用列名而不是位置，因为列位置可以更改。

当然，列名也可以更改，但是如果您添加一个新列并且它位于第 1 列和第 2 列之间。如果您使用数字，则需要更改代码。但是如果你使用名字，你会没事的。

它更具可读性，如果你有 40 列会发生什么？（<-有人说，这很糟糕）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T08:29:16.163

只需`moveToNext`在循环中使用即可进行迭代。

```
while(ct.moveToNext()){
     pictures[i]=c1.getString(1);
     comments[i]=c1.getString(2);
     i++;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T08:28:53.397

而你应该做的是更换

```
c1.moveToFirst();
while(c1.isLast()){
     //your code
} 
```

经过

```
//c1.moveToFirst();
while(c1.moveToNext()){
     //your code
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-10T10:52:36.317

```
Cursor c = db.rawQuery("select username from user_information where username ='" + username_txt.getText() + "'", null);
c.moveToFirst();
if (c.moveToFirst()) {
    username = c.getString(c.getColumnIndex("username"));
} 
```

用这个。我希望它对你有帮助。

# google-docs-api - Google docs 3.0 java API 上传文件无法正常工作

> ID：10329501
> 
> 赞同：-1
> 
> 时间：2012-04-26T08:10:18.400
> 
> 标签：google-docs-api, google-drive-api

我刚刚下载了 newsest doc list api，并试了一下。我的代码如下：

```
DocsService client = new DocsService("testappv3");
client.setUserCredentials("username", "password");
File file = new File("c:/test.txt");
URL url = new URL("https://docs.google.com/feeds/defaults/private/full/");
String mimeType = DocumentListEntry.MediaType.fromFileName(file.getName()).getMimeType();
DocumentEntry newDocument = new DocumentEntry();
newDocument.setTitle(new PlainTextConstruct("test"));
//newDocument.setMediaSource(new MediaFileSource(file, mimeType));
newDocument.setFile(file, mimeType);
newDocument = client.insert(url, newDocument); 
```

错误如下：

```
com.google.gdata.util.ResourceNotFoundException: Not Found
<HTML>
<HEAD>
<TITLE>Not Found</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Not Found</H1>
<H2>Error 404</H2>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:26:09.440

Your URI is incorrect:

```
https://docs.google.com/feeds/defaults/private/full/ 
```

Should be

```
https://docs.google.com/feeds/default/private/full/ 
```

(with no s)

# r - 分类/决策树和选择拆分

> ID：10329502
> 
> 赞同：0
> 
> 时间：2012-04-26T08:10:21.863
> 
> 标签：r, machine-learning, data-mining, classification, decision-tree

这是一个非常基本的例子。但是我正在做一些数据分析，并且不断发现自己正在编写非常相似的 SQL 计数查询来生成概率表。

我的表被定义为值 0 表示事件没有发生，而值 1 表示事件确实发生了。

```
 > sqldf("select count(distinct Date) from joinedData where C_O_Above_prevHigh = 0 and  C_O_Below_prevLow = 0")
  count(distinct Date)
1                 1081

> sqldf("select count(distinct Date) from joinedData where C_O_Above_prevHigh = 0 and C_O_Below_prevLow = 0 and E_halfGap = 1")
  count(distinct Date)
1                  956

> sqldf("select count(distinct Date) from joinedData where C_O_Above_prevHigh = 1 OR C_O_Below_prevLow = 1 and E_halfGap = 1")
  count(distinct Date)
1                  504 
```

在上面的例子中，我的预测变量是`C_O_Above_prevHigh`，`C_O_Below_prevLow`我的结果变量是`E_halfGap`。有几种情况可能会有更多的预测变量，例如`Time`

而不是执行上述操作并手动输入具有不同排列的所有查询，R 或其他一些应用程序中是否有任何可用的东西：

1）根据我的预测器输出潜在的概率路径？2）允许我选择如何分割路径

感谢您的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:42:57.400

如果您想要所有总计和小计，您可以`CUBE BY`在 SQL（但它不在 SQLite 中）或`addmargins`R 中使用。

```
addmargins( Titanic )
# More readable:
ftable( addmargins( Titanic ) ) 
```

如果要构建决策树，可以使用`rpart`包或检查 [机器学习](http://cran.r-project.org/web/views/MachineLearning.html) 或 [图形模型](http://cran.r-project.org/web/views/gR.html) 任务视图

# c - 在 Linux 上使用 `splice` ......对于其他系统还有什么？

> ID：10329505
> 
> 赞同：5
> 
> 时间：2012-04-26T08:10:30.347
> 
> 标签：c, windows, macos, operating-system, bsd

在最近的 Linux 内核中，将文件或文件子集复制到另一个文件的最快方法是使用非常好的`splice`系统调用。该系统让内核（几乎）直接管理传输，而无需将数据复制到用户级内存。

现在，我有兴趣为其他系统找到类似的东西，特别是 Windows 和 BSD/MacOS X（我愿意得到一些用 Obj-C 编写的代码，在不太可能的情况下存在无法从原始 C 访问的 API ）。

谢谢

**注意**我假设 Windows 下最快的完整文件副本是`CopyFile`. 但是只复制一个文件的范围呢？

**注意** 我正在编写对性能敏感的代码，并且应该适用于各种大容量存储设备（即从 Android 智能手机到 NFS 挂载）。当然，我愿意为不同的操作系统编写不同的实现。

**注意**目前，我`splice`在 Linux/Android、`copyfile`BSD/Mac OS X、`CopyFile`Windows 下使用，并回退到`read`/`write`用于文件范围。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T08:55:16.967

在 BSDs`sendfile()`中扮演这个角色，只要目标文件描述符是一个套接字。

在所有 POSIX 操作系统中，`memmap()`都可以通过映射整个文件，然后调用`write()`映射的数据来实现这一点。由于您在进程中从不访问此内存，因此它仍然可以具有零拷贝性能。

几乎在任何地方，这种`read()/write()`组合都运作良好，而且速度非常快。零拷贝很酷，但是使用页面大小的缓冲区 ~4096，您将相当接近相同的速度，但使用每个人都可以理解的代码。

# android - Android：无法显示正确的印地语单词

> ID：10329510
> 
> 赞同：1
> 
> 时间：2012-04-26T08:10:51.093
> 
> 标签：android, hindi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T07:27:01.700

@Pushpendra 我的测试设备（HTC 手机）也有同样的问题。但我在三星 android 手机上尝试了相同的应用程序，它可以正常工作。所以我认为你应该在不同的设备上尝试你的应用程序可能会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T17:19:15.847

您可以使用 Unicode 而不是直接值...

```
String str="&# 2367;&# 2342;&# 2357;&# 2381;&# 2351;&# 2366;"; 
```

连续无间隙。

```
TextView txtview_name=(TextView)findViewById(R.id.textViewmyView);

final Typeface customF = Typeface.createFromAsset(this.getAssets(), "Hindi-SARAL1.TTF");

txtview_name.setText(Html.fromHtml(""+str));
txtview_name.setTypeface(customF); 
```

您还可以通过此站点将世界转换为 unicode... [http://mylanguages.org/converter.php](http://mylanguages.org/converter.php) 但在 दि 的情况下，使用 इ 的第一个 unicode 然后第二个 द ..b/c 直到 android 4.0 不支持正确的印地语unicode..`&# 2342;`是द的unicode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:03:57.600

代替 .ttf 文件，使用 .otf 文件。

# android - 使用未捕获的异常处理程序导致应用程序崩溃导致应用程序停止

> ID：10329513
> 
> 赞同：2
> 
> 时间：2012-04-26T08:10:53.620
> 
> 标签：android, exception, uncaughtexceptionhandler

我正在使用未捕获的异常处理程序来捕获异常，但这会导致我的应用程序停止。我指的是这篇文章 [如何在处理未捕获的异常后阻止我的应用程序僵尸化？](https://stackoverflow.com/questions/10033580/how-do-i-stop-my-application-from-zombifying-after-i-handle-an-uncaught-excepiti) 以及[在Android中设置全局未捕获异常处理程序的理想方式](https://stackoverflow.com/questions/2764394/ideal-way-to-set-global-uncaught-exception-handler-in-android)

```
@Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.advsearch);
        setTitle("Advance Search");

    Thread.setDefaultUncaughtExceptionHandler(new SRSDexception(this));

    String trace = null;
    String line;
    try {
        BufferedReader reader = new BufferedReader(
        new InputStreamReader(SRSDAdvSearch.this
        .openFileInput("stack.trace")));

        while((line = reader.readLine()) != null) {
        trace += line+"\n";
        }
        } catch(FileNotFoundException fnfe) {
        // ...
        } catch(IOException ioe) {
        // ...
        }

        Intent sendIntent = new Intent(Intent.ACTION_SEND);
        String subject = "Error report";
        String body =
        "Mail this to readerscope@altcanvas.com: "+
        "\n\n"+
        trace+
        "\n\n";

        sendIntent.putExtra(Intent.EXTRA_EMAIL,
        new String[] {"readerscope@altcanvas.com"});
        sendIntent.putExtra(Intent.EXTRA_TEXT, body);
        sendIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
        sendIntent.setType("message/rfc822");

        SRSDAdvSearch.this.startActivity(
        Intent.createChooser(sendIntent, "Title:"));

        SRSDAdvSearch.this.deleteFile("stack.trace"); 
```

这是我的活动类，它又调用了我的异常类阅读完网址后，您将了解我想要什么..我已经复制了未捕获的异常，即

```
import java.io.FileOutputStream;
import java.io.IOException;

import android.app.Activity;
import android.content.Context;

public class SRSDexception implements Thread.UncaughtExceptionHandler {

private Thread.UncaughtExceptionHandler defaultUEH;

private Activity app = null;

public SRSDexception(Activity app) {
this.defaultUEH = Thread.getDefaultUncaughtExceptionHandler();
this.app = app;

}

public void uncaughtException(Thread t, Throwable e) 
{   
//  System.out.println("You crashed thread " + t.getName());
//    System.out.println("Exception was: " + e.toString());
StackTraceElement[] arr = e.getStackTrace();
String Raghav =t.toString();
String report = e.toString()+"\n\n";
report += "--------- Stack trace ---------\n\n"+Raghav;
for (int i=0; i<arr.length; i++)
{
report += "    "+arr[i].toString()+"\n";
}
report += "-------------------------------\n\n";

// If the exception was thrown in a background thread inside
// AsyncTask, then the actual exception can be found with getCause
report += "--------- Cause ---------\n\n";
Throwable cause = e.getCause();
if(cause != null) {
report += cause.toString() + "\n\n";
arr = cause.getStackTrace();
for (int i=0; i<arr.length; i++)
{
report += "    "+arr[i].toString()+"\n";
}
}
report += "-------------------------------\n\n";

try {
FileOutputStream trace = app.openFileOutput(
"stack.trace", Context.MODE_PRIVATE);
trace.write(report.getBytes());
trace.close();
} catch(IOException ioe) {
// ...
}

defaultUEH.uncaughtException(t, e);
} 
```

堆栈跟踪

```
[android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:314),   
SRTekBox.Android.SRSD.SRSDAdvSearch.fnExpand(SRSDAdvSearch.java:390),  
SRTekBox.Android.SRSD.SRSDAdvSearch$5.onClick(SRSDAdvSearch.java:209), 
android.view.View.performClick(View.java:2408), android.view.View$PerformClick.run (View.java:8816),
android.os.Handler.handleCallback(Handler.java:587),
android.os.Handler.dispatchMessage(Handler.java:92),
android.os.Looper.loop(Looper.java:123),
android.app.ActivityThread.main(ActivityThread.java:4633),
java.lang.reflect.Method.invokeNative(Native Method),
java.lang.reflect.Method.invoke(Method.java:521),
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858),
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616),
dalvik.system.NativeStart.main(Native Method)] 
```

不知道是什么问题，可能是

1.  我的线程正在崩溃
2.  我的处理程序没有被调用
3.  或者它没有例外，但它导致我的申请暂停
4.  异常使其崩溃以下可能性

谁能帮我防止这种停止

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:02:45.573

使用 ACRA (http://code.google.com/p/acra/) ！他们做你需要的，并解决了你正在经历的问题

# php - 如何检查某些用户是否使用 php 在输入文本框中键入了 CTRL+S (control+s)？

> ID：10329517
> 
> 赞同：-2
> 
> 时间：2012-04-26T08:11:09.120
> 
> 标签：php, javascript, html, keyboard-events

如何检查某些用户是否使用 php 在输入文本框中键入 CTRL+S (control+s)？

检查那个键盘事件，它会显示本地字符还是像数学符号这样的 unicode 字符？

我该怎么做？我必须使用 javascript/jquery 吗？

假设我有一些键盘映射的 unicode 字符映射，在将数据提交到服务器期间，我是否必须使用 PHP 检查该键入字符的映射？

考虑对博客中的帖子发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:16:47.653

使用 JQuery（如上所述 PHP 仅用于服务）

```
$(document).keypress("s",function(e) {
  if(e.ctrlKey)
    alert("do something");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:15:13.057

你不能用 PHP 做到这一点。这是 jQuery（一个 JavaScript 库）中的一个解决方案

```
$(window).keypress(function(event) {
if (!(event.which == 115 && event.ctrlKey) && !(event.which == 19)) return true;
alert("Ctrl-S pressed");
event.preventDefault();
return false;
}); 
```

# haskell - Haskell System.Directory.doesFileExist 和非 ASCII 路径

> ID：10329518
> 
> 赞同：1
> 
> 时间：2012-04-26T08:11:16.060
> 
> 标签：haskell, unicode, filesystems, ghc

```
import System.Directory
import qualified Data.ByteString as BS  
import qualified Data.ByteString.UTF8 as BS_UTF8

main = do
    putStrLn "Input path to some file: "
    raw_inputed_path <- BS.getLine
    let inputed_path = BS_UTF8.toString raw_inputed_path
    such_file_exists <- doesFileExist inputed_path
    such_directory_exists <- doesDirectoryExist inputed_path
    if such_file_exists 
        then putStrLn "Yeah, I see it!"
        else if such_directory_exists
            then putStrLn "Aha, I see it, but it's a directory!"
            else putStrLn "Hmm... No such..." 
```

此代码仅适用于 ASCII 路径。但是如果我使用带有非 ASCII 符号的路径，`doesFileExist`并且`doesDirectoryExist`总是返回`False`. 为什么？

*   Debian GNU/Linux 6.0 x86_64
*   ghc 6.12.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:42:53.493

升级到 GHC 7.x 系列 - 6.12 现在已经过时了将近 3 年。该行为大约在一年前得到修复。

# sql - 如何将匿名块添加到过程 Oracle？

> ID：10329523
> 
> 赞同：1
> 
> 时间：2012-04-26T08:11:48.067
> 
> 标签：sql, oracle, procedures

我如何使用以下代码创建过程，因为我是 oracle 的新手，总是使用 sybase/ms sql，而且更容易。

```
DECLARE
    temp     VARCHAR2 (255);
    last_val NUMBER(9, 0);
    CURSOR c1 IS
      SELECT DISTINCT table_name
      FROM   user_tab_cols
      WHERE  column_name = 'id';
BEGIN
    FOR asd IN c1 LOOP
        temp := asd.table_name;

        EXECUTE IMMEDIATE 'select NVL(max("id"),0)+1 from "'||temp||'"' INTO
        last_val;

        BEGIN
            EXECUTE IMMEDIATE 'drop sequence "seq_'|| temp||'"';

            EXECUTE IMMEDIATE 'create SEQUENCE "seq_'|| temp||'" MINVALUE '||
            last_val||
            'MAXVALUE     999999999999999999999999999 INCREMENT BY 1 NOCACHE';

            EXECUTE IMMEDIATE 'select '||temp||'.nextval from dual';

            EXECUTE IMMEDIATE 'ALTER SEQUENCE "seq_'||temp||'" INCREMENT BY 1';
        EXCEPTION
            WHEN OTHERS THEN
              NULL;
        END;
    END LOOP;

    COMMIT;
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:14:25.483

使用喜欢

```
CREATE OR replace PROCEDURE Proc_name
IS
  temp     VARCHAR2 (255);
  last_val NUMBER(9, 0);
  CURSOR c1 IS
    SELECT DISTINCT table_name
    FROM   user_tab_cols
    WHERE  column_name = 'id';
BEGIN
    FOR asd IN c1 LOOP
        temp := asd.table_name;

        EXECUTE IMMEDIATE 'select NVL(max("id"),0)+1 from "'||temp||'"' INTO
        last_val;

        BEGIN
            EXECUTE IMMEDIATE 'drop sequence "seq_'|| temp||'"';

            EXECUTE IMMEDIATE 'create SEQUENCE "seq_'|| temp||'" MINVALUE '||
            last_val||
            'MAXVALUE     999999999999999999999999999 INCREMENT BY 1 NOCACHE';

            EXECUTE IMMEDIATE 'select '||temp||'.nextval from dual';

            EXECUTE IMMEDIATE 'ALTER SEQUENCE "seq_'||temp||'" INCREMENT BY 1';
        EXCEPTION
            WHEN OTHERS THEN
              NULL;
        END;
    END LOOP;

    COMMIT;
END;

/ 
```

# php - while循环中的php sum变量

> ID：10329535
> 
> 赞同：7
> 
> 时间：2012-04-26T08:12:49.553
> 
> 标签：php, variables, while-loop, sum

我必须在while中“求和”变量的值，这里是我的例子：

```
while($row = mysql_fetch_array($result)){
  $price= $row['price'] * $row['order_q'];
} 
```

如果我输入上面的代码，`echo $price;`例如：

> 19 15 20 13 10

我想要类似 :`sum($price)`或`array_sum($price)`计算 while 循环的所有结果。所以，我要数：`19+15+20+13+10 = 77`

我怎么能用php做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-26T08:16:04.343

只需在循环外初始化一个变量，例如：

```
$total_price = 0; 
```

并在你的循环中增加这个数字：

```
$total_price += $row['price'] * $row['order_q']; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-26T08:15:45.067

例如

```
$total = 0;
while($row = mysql_fetch_array($result)){
  $price= $row['price'] * $row['order_q'];
  $total += $price;
}
echo 'total: ', $total; 
```

或者 - 如果您想要从查询中得到的只是总数 - 您可以在 sql 查询“内”执行它。

```
SELECT Sum(price*order_q) as total FROM ... 
```

# macos - 如何在 xcode4 中使用带有 opencv 的配置文件？

> ID：10329537
> 
> 赞同：0
> 
> 时间：2012-04-26T08:12:57.077
> 
> 标签：macos, opencv, xcode4

我想在 Xcode 中使用配置文件来分析 opencv 程序，

和“架构”和“有效架构”是“x86_64”

但收到一条消息，如：“没有要编译的架构（ARCHS=ppc i386，VALID_ARCHS=x86_64）。”

如果我将“有效架构”更改为“x86_64 i386”，opencv 中的函数无法链接

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:18:45.407

您只需要使用 x86_64 架构构建您的 OpenCV，作为编译并链接到 OpenCV 库的架构之一。

这是有关如何执行此操作的潜在有用的教程：

[http://www.randomsequence.com/articles/opencv-snow-leopard/](http://www.randomsequence.com/articles/opencv-snow-leopard/)

[这是其他人问的一个相关问题，它也可以帮助你](https://stackoverflow.com/questions/5781198/compiling-opencv-code-on-a-64-bit-mac)。

# iphone-developer-program - 更新 iOS 开发者企业计划

> ID：10329543
> 
> 赞同：1
> 
> 时间：2012-04-26T08:13:34.383
> 
> 标签：iphone-developer-program, enterprise-distribution

如果您在第一年之后不续订企业计划会怎样？分发的应用程序是否停止工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:08:57.503

允许您在设备上安装应用程序的配置文件将过期，如果没有您的会员资格，您将无法续订该配置文件。您可以在设备上的“设置”应用中查看到期日期。

# installation - 如何检查 NSIS 中特定端口上运行的进程

> ID：10329544
> 
> 赞同：2
> 
> 时间：2012-04-26T08:13:43.430
> 
> 标签：installation, nsis, port80

我正在使用 NSIS 为我的应用程序开发安装程序。我需要对这个安装程序做的是检查端口 80 是否可用，如果可用，请继续安装程序，如果它没有给出错误消息，其中包含在端口 80 上运行的进程名称。

我找到了一种方法来检查端口 80 是否可用。为此，我使用 Ports.nsh 作为插件。[http://nsis.sourceforge.net/Check_open_ports](http://nsis.sourceforge.net/Check_open_ports)

```
${If} ${TCPPortOpen} 80
 MessageBox MB_OK|MB_ICONSTOP "PORT 80 is already using by another program..."
 Abort
${EndIf} 
```

但是有了这个，我无法在该端口上找到正在运行的进程。我需要给出一条错误消息，例如

```
//Skype is running on port 80 and close Skype to continue with the installation. 
```

有人可以帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:52:47.960

由于我在 nsis 中找不到正确的方法，我只使用 VBScript 来检查进程名称并通过 nsis 脚本调用它。以下是代码。

//TestPort80.vbs

```
Dim WshShell, oExec, key
Set WshShell = CreateObject("WScript.Shell")
Set oExec = WshShell.Exec("netstat -o -n -a")
key = "0.0:80"

Dim values
values = checkPortStatus(oExec, key)
portInUse = values(0)
input = values(1)

If portInUse Then
  x = InStrRev(input, " ")

  ProcessID = Mid(input, x+1)

  commandTxt = "tasklist /FI " & Chr(34) & "PID eq " & ProcessID & Chr(34)

Dim oExec2, key2
Set oExec2 = WshShell.Exec(commandTxt)
key2 = ProcessID

Dim values2
values2 = checkPortStatus(oExec2, key2)
Found = values2(0)
input2 = values2(1)

If Found Then
    y = InStr(input2, " ")
    ExeName = Left(input2, y-1)
        WScript.StdOut.WriteLine "Port 80 is using by " & ExeName
End If
End If
'## If we explicitly set a Success code then we can avoid this.
WScript.Quit 512

Function checkPortStatus(oExec, key)
portInUse = false
input = ""
Do While True

     If Not oExec.StdOut.AtEndOfStream Then
          input = oExec.StdOut.ReadLine()
          If InStr(input, key) <> 0 Then 
        ' Found Port 80
                portInUse = true
                Exit DO
          End If
     Else
        Exit DO
     End If
     WScript.Sleep 100
Loop

Do While oExec.Status <> 1
 WScript.Sleep 100
Loop
Dim values(1)
values(0) = portInUse
values(1) = input

checkPortStatus = values

End Function 
```

//安装程序.nsi

```
${If} ${TCPPortOpen} 80
 GetTempFileName $0
     File /oname=$0 `TestPort80.vbs` 
     nsExec::ExecToStack `"$SYSDIR\CScript.exe" $0 //e:vbscript //B //NOLOGO`
 Pop $0
 Pop $1
 MessageBox MB_OK|MB_ICONSTOP '$1'
 Abort
${EndIf} 
```

# java - Java 进程内存使用量比 Runtime.totalMemory 等方法所告诉的要多得多

> ID：10329546
> 
> 赞同：3
> 
> 时间：2012-04-26T08:14:05.053
> 
> 标签：java, memory-management, embedded

我已经被这个问题困扰很久了，没有任何提示。如果有人可以提供帮助，我将不胜感激。

我正在使用 ARM v7 处理器的设备上运行 Java 应用程序。它安装了 Ubuntu。使用“top”或“free -m”命令查看进程的内存使用量约为 180 MB，这比 Runtime.freeMemory 等方法告诉我的要多得多。

这就是我开始我的应用程序的方式：

> java -Xcheck:jni -XX:MaxPermSize=25m -Xmx65m -XX:ReservedCodeCacheSize=10m -jar MyAPP.jar myconfig.xml

据我了解，此进程的总内存使用量不应超过`25 + 65 + 10 = 100 MB`. 它可能更多（我不知道的其他非堆空间）。但即便如此，我认为差异应该不会那么大（80 MB）。

这就是“运行时”命令似乎在我的日志中告诉我的内容（我使用这些命令将使用信息打印为调试日志的一部分）。

使用信息：可用处理器：2 JVM 可用的可用内存：8474344，当前内存使用量：5943576，JVM 允许使用的最大内存：66977792

“顶部”的输出：

```
PID   USER     PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
3926  linaro   20  0   266m  188m 3636 S  1.0 21.1   0:37.81 java 
```

“free -m”的输出：

当 Java 进程运行时：

```
 total       used       free     shared    buffers     cached
Mem:     893         842         51          0         40        216
-/+ buffers/cache:   585        308
Swap:     0          0          0 
```

当进程停止时：

```
 total      used       free     shared    buffers     cached
Mem:      893        656        237          0         40        216
-/+ buffers/cache:   400        493
Swap:      0          0          0 
```

正如我们所看到的，493 - 308 = 185，与“top”所说的关于该进程的内存使用情况相匹配（之前我认为这台机器上安装了 top 可能存在错误）。

我也对这个过程进行了远程监控，它显示大约 14M 的“已提交”堆空间和大约 20M 的非堆空间。至少堆空间与我从“运行时”命令中得到的相匹配。所以连远程监控工具好像都说内存使用量远小于180M。

最奇怪的部分是，当我在笔记本电脑（MacBook Pro）或基于英特尔的标准 Linux 机器（不是 ARM）上运行时，同一个 jar 似乎一切就绪。进程只使用了大约 60 MB 的空间，这是我所期望的。

值得一提的是，我在 ARM 设备上使用的 Java VM 是 Oracle 的 Java SE Embedded 版本。

任何知道内存使用差异的人。抱歉问了这么长的问题:-)。

更新：

在对可能消耗内存的 Java 进程的各个部分进行了一些研究之后，我将注意力集中在本机代码交互 (JNI) 上。那是唯一一个我们无法从命令实时参数中限制内存消耗的人。在我的程序中，我使用 sqlite-jdbc 驱动程序来访问数据库。我评论了数据库访问部分，内存使用量下降到 24MB！！！所以我猜测这个内存差异与这个 sqlite jdbc 访问有关，虽然还不确定它是什么。随着我取得一些进展，将不断更新。

-桑迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:27:02.623

您观察到的是 JVM 与进程内存之间的区别。

看看这些答案：

[进程内存与堆——JVM](https://stackoverflow.com/questions/4893192/process-memory-vs-heap-jvm)

[JVM 进程与 JVM 堆内存使用情况](https://stackoverflow.com/questions/6785754/jvm-process-vs-jvm-heap-memory-usage)

由于您在每个系统上使用不同的 JVM 实现，因此您可能会有不同的内存行为。

# mysql - 在 mysql 中存储 JSON 数据

> ID：10329547
> 
> 赞同：9
> 
> 时间：2012-04-26T08:14:06.023
> 
> 标签：mysql, ruby-on-rails, database, arrays, json

例如，我有一个组织表

```
ID, name, address, phone, email, etc... 
```

现在我想添加多个地址、电话和电子邮件。

像这样在电子邮件列中存储json数据的好方法吗

```
[ "address2@example2.com", "address2@example2.com", "address2@example2.com" ] 
```

或者为电子邮件创建另一个表，为电话等创建另一个表......

如果存储 json 数据更好 - 在 Rails 中使用它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T17:13:03.423

这是我发现的

[http://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

> 在文本列中保存数组、哈希和其他不可映射的对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:17:15.160

将数据作为 JSON 字符串存储在单个数据库字段中意味着您将无法使用 SQL 操作/查询数据——这违背了将数据存储在数据库中的意义，您不妨将其存储在文本中文件。

我建议您的组织表与电子邮件地址和电话号码表之间存在[一对多关系。](http://en.wikipedia.org/wiki/Cardinality_%28data_modeling%29)观看[视频解释不同的关系类型](http://www.youtube.com/watch?v=RXOj0D80kRg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:11:27.990

建议您将这些信息存储在一个表中。根据您的要求。似乎使用一个好的多态模型会更好。

代码可能是这样的。

```
module MultiAttr

  def self.included(base)
    base.send :extend, ClassMethods
  end

  module ClassMethods
    def multi_attr(*args)
      args.each do |attr_name|
        class_eval <<-EOF
          has_many attr_#{attr_name}, :class_name => "MultiAttributes", :as => :owner,
             :conditions => {:key => '#{attr_name.singularize}'}

          def add_#{attr_name.singularize}(val)
            self.attr_#{attr_name}.create(:key => #{attr_name.singularize}, :value => val)
            #{attr_name}
          end

          def #{attr_name}
            self.attr_#{attr_name}.map(&:to_attr_model)
          end

        EOF
      end
    end

  end

end

class AttrModel < String

  def initialize(record)
    @record = record
    super(record.value)
  end

  def remove
    @record.destroy
  end

end

#owner_type, owner_id, key, value
class MultiAttribute < ActiveRecord::Base
  belongs_to :owner, :polymorphic => true

  def to_attr_model
    @attr_model ||= AttrModel.new(self)
  end
end 
```

如何使用

```
class User < ActiveRecord::Base
  include MultiAttr
  multi_attr :emails, :addresses
end

user.emails #=> ["abc@example.com"]
user.add_email "qq@example.com" #=> 
user.emails.first.remove 
```

这些代码未经测试。但这是我的基本想法。

# windows-phone-7 - WP7 Silverlight 类库本地化

> ID：10329548
> 
> 赞同：3
> 
> 时间：2012-04-26T08:14:13.587
> 
> 标签：windows-phone-7, dll, localization

我正在创建一个支持本地化（英语和德语）的 WP7 silverlight 类库项目。我将所有资源保存在类库本身中。仅当我使用同一解决方案中的此库运行应用程序（添加项目引用）时，语言更改才会正确反映。

但是当我在另一个解决方案中使用 library(.dll) 时，本地化似乎不起作用。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T06:26:37.193

您需要确保在主项目中定义支持的语言。对于 windows Phone 8，您可以在项目属性中执行此操作。对于 windows phone 7，您需要使用文本编辑器手动更改项目文件。

# ruby - 这个红宝石属性叫做“Open Class”吗？还有其他语言有这个属性吗？

> ID：10329549
> 
> 赞同：2
> 
> 时间：2012-04-26T08:14:15.163
> 
> 标签：ruby

```
class A
    def p
        puts "1"
    end
end

a = A.new
a.p   #=> "1"

class A
    def p
        puts "2"
    end
end

a.p   #=>"2" 
```

这个红宝石属性叫做“Open Class”吗？还有其他语言有这个属性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T09:29:55.833

是的，这在 Ruby中称为*开放类。*在我的脑海中，具有此属性的其他语言包括 Python 和 Smalltalk。此外，即使它们没有类，在 ECMAScript、Self、Io 和 Ioke 中对原型对象进行变异也会产生类似的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T00:01:09.853

尽管在 Smalltalk 中有一些方法可以做到这一点，但我倾向于问你为什么觉得你想要这样做并推动不同的解决方案。在运行时更改代码是使代码难以调试的秘诀。

# android - android有相同的小部件吗？

> ID：10329552
> 
> 赞同：2
> 
> 时间：2012-04-26T08:14:23.843
> 
> 标签：android, user-interface, view, android-widget

我需要在图像上制作小部件。有这样的android小部件吗？

![mac 操作系统小部件](../Images/55b2c082c368e3d9feb52e2e029e7f3f.png)

解决了：

简单的方法是使用 RadioGroup 并对其应用样式。有我的布局和样式，希望有用：

```
<RadioGroup
    android:id="@+id/fragment_search_type"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal" 
    android:layout_marginLeft="3dp" 
    android:layout_marginRight="3dp" style="@style/Searchtype">
    <RadioButton
        android:id="@+id/radio0"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:checked="true"
        android:layout_weight="0.25" 
        android:text="1" style="@style/Searchtype.RadioButton"/>
    <RadioButton
        android:id="@+id/radio1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.25" 
        android:text="2" style="@style/Searchtype.RadioButton"/>
    <RadioButton
        android:id="@+id/radio2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.25" 
        android:text="3" style="@style/Searchtype.RadioButton"/>
    <RadioButton
        android:id="@+id/radio3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.25" 
        android:text="4" style="@style/Searchtype.RadioButton"/>
</RadioGroup>

<style name="Searchtype">
    <item name="android:padding">3dp</item>
    <item name="android:background">@drawable/searchtypepanel</item>
    <item name="android:orientation">horizontal</item>
</style>

<style name="Searchtype.RadioButton" parent="@android:style/Widget.CompoundButton.RadioButton">
    <item name="android:padding">0dp</item>
    <item name="android:background">@drawable/searchtypepanel_button</item>
    <item name="android:button">@android:color/transparent</item>
    <item name="android:textColor">#FFFFFF</item>
    <item name="android:textSize">12dp</item>
    <item name="android:textStyle">bold</item>
    <item name="android:gravity">center</item>
</style> 
```

![解决了](../Images/0fa9804965117468f028009232922518.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:15:47.480

Afaik 没有这样的确切小部件。但是您可以使用其中的线性布局和 3 个图像按钮轻松地自己构建它。只需建立自己的复合控制。

见
[http://developer.android.com/guide/topics/ui/layout-objects.html](http://developer.android.com/guide/topics/ui/layout-objects.html)
[http://developer.android.com/resources/tutorials/views/index.html](http://developer.android.com/resources/tutorials/views/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:22:27.827

制作您自己的复合视图，其中包含多个具有切换状态的图像视图。

# javascript - jqPlot 显示 y 刻度两次

> ID：10329559
> 
> 赞同：3
> 
> 时间：2012-04-26T08:14:43.883
> 
> 标签：javascript, jquery, jqplot

在 y 轴上使用两个具有正常整数值的 DateAxisSeries（x 轴），我的 jqPlot 将 y 刻度渲染两次。

像这样：

```
2|
2|
1|
1|
0|______________________________________ 
```

这会导致值渲染不正确，除了显然不应该发生的面部。

意甲：[["07.03.2012", 2], ["17.03.2012", 2], ["28.03.2012", 1]]

意甲 2: [["01.03.2012", 1], ["08.03.2012", 1], ["14.03.2012", 1], ["24.03.2012", 1]]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-09T23:36:44.133

你为你的 y 轴 formatString 使用什么？我遇到了同样的问题，因为我无意中使用了 formatString='%d'，导致 y 值 1.5 呈现为 1。

您应该能够通过删除/修改您的 yaxis formatString 或指定特定的 tickInterval 来解决此问题，例如

```
yaxis: {
    min:          0,
    max: {{ max_count }} + 1,
    tickInterval: 1,
    tickOptions:  {
        formatString:'%d'
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T17:09:26.530

我从未有过带有两个日期轴的图表，但我怀疑您面临的问题与一个相同。

您是否记得为每个轴**设置最小和最大参数？**我已经在我的一个答案中提到了这个解决方案。[请在这里找到它。](https://stackoverflow.com/a/10233111/613495)

这似乎是使数据轴正常工作的唯一方法，因为否则它会自动调整大小的重复值的机会。

# java - 在 Java 中实现延迟

> ID：10329560
> 
> 赞同：1
> 
> 时间：2012-04-26T08:14:45.450
> 
> 标签：java

嗨，我有以下代码：

```
okBtn.addEventListener(Events.ON_CLICK, new EventListener()
{
            @Override
            public void onEvent(final Event arg0) throws Exception
            {
                //when the user clicks on ok, we take the current 
                //string from fckeditor...
                String currentValue = fckEditor.getValue();
                // set the string to preview to the current value 
                html.setContent(currentValue);

            }
 }); 
```

我面临的问题是这个 fckEditor.getValue() （fckEditor 类似于 textArea）调用存在延迟，因为 ok 操作比 fckEditor.getValue() 检索数据所需的操作更快，因此有时当我非常快地修改 fckEditor 中的文本并点击 okBtn 时，没有反映更改。

我想出了这个解决方案，

```
 okBtn.addEventListener(Events.ON_CLICK, new EventListener()
    {
        @Override
        public void onEvent(final Event arg0) throws Exception
        {

            String currentValue;

            synchronized (fckEditor)
            {
                currentValue = fckEditor.getValue();
                fckEditor.wait(100);
            }

            html.setContent(currentValue);

        }

    }); 
```

但是，我并不完全相信这将是最好的解决方案，因为我正在对延迟进行硬编码，`.wait(100);`并且可能延迟在不同的计算机中可能会有所不同。所以最终其他环境可能需要或多或少的延迟。

如何让执行等到`fckEditor.getValue();`调用完全完成？那么`currentValue`可以保持正确的字符串并正确保存吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:20:45.130

```
Timer timer = new Timer() {
 public void actionerformed() {
   setRepeats( false );
   String currentValue = fckEditor.getValue();
   try {
      Thread.sleep( 100 );
   } catch( Exception ex ) {
      ex.printStackTrace();
   }//catch
   html.setContent(currentValue);
 }//met
}//inner class
timer.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:44:42.333

您应该使用不带参数的等待并让执行程序调用`notify`或`notifyAll`在它完成执行时调用。

* * *

按照 Marko Topolnik 的建议，一个非常简单的例子：

```
//declaration
final CountDownLatch latch = new CountDownLatch(1);
...
//in the executor thread
latch.countDown();
//in the waiting thread
exec.start();
latch.await(); 
```

# c - 耳机插到3.5接口怎么知道？

> ID：10329564
> 
> 赞同：4
> 
> 时间：2012-04-26T08:14:58.670
> 
> 标签：c, linux, kernel, interrupt, udev

我想用**C**写一个小程序：当我将耳机插入笔记本时，它应该调低音量。然后，当我从笔记本电脑上取下耳机时，它应该会调高音量。

我正在使用`alsa`驱动程序，并且我知道如何控制音量。

问题是：插入耳机时如何获得通知？

在我问这个问题之前，我尝试使用 IRQ。我曾经`watch -d0.5 cat /proc/stat`在插入或移除耳机时查看系统是否遇到任何中断，我看到了 8 个中断。我不知道 IRQ 是正确的，所以我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:15:51.307

也许您不需要编写任何程序。Alsamixer 应该让您指定扬声器的音量和耳机的音量。您只需将耳机的音量调低一点，仅此而已。

# php - Extbase 中已删除 ModelInstance 上的 deleteAction 失败

> ID：10329565
> 
> 赞同：0
> 
> 时间：2012-04-26T08:15:09.070
> 
> 标签：php, extbase

例如，删除链接被点击了两次或来自不同的用户。虽然第一次单击将正确删除我的对象，但第二次单击将在调用 deleteAction 之前失败（因为它已过时）。我怎样才能防止这种情况？

```
/**
 * action delete
 *
 * @param $upload
 * @dontvalidate $upload
 * @return void
 */
public function deleteAction(Tx_MyExt_Domain_Model_Upload $upload) {
    $this->uploadRepository->remove($upload);
    $this->flashMessageContainer->add('Your Upload was removed.');
    $this->redirect('list');
} 
```

我得到一个例外：

> 该值必须属于“Tx_MyExt_Domain_Model_Download”类型，但属于“NULL”类型。

在 action 中做某​​事并没有帮助，因为它之前失败了……</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:13:06.037

我假设您有一些流畅的标记，如下所示：

```
<f:link.action action="delete" arguments="{upload:uploadObjectToDelete}" > ... 
```

其中说：`uploadObjectToDelete`当用户单击此链接时，将对象传递给删除操作。当用户单击该链接时，ExtBase`PropertyMapper`使用与链接一起发送的参数来定位`uploadObjectToDelete`数据库中的 ，然后将其交给您的控制器和删除操作。

第一次单击后，该删除操作成功地从数据库中删除了对象，并且当您重定向到列表操作时页面会重新加载。但是，这次`uploadObjectToDelete`对象为空。因此，对于第二次单击，当`PropertyMapper`尝试查找`upload`删除操作的参数时，没有要查找的对象。并且由于该`upload`参数是必需的（即不能是`null`），因此您会遇到异常。

**选项1**

Change your list action so that it doesn't show these links when the `uploadObjectToDelete` object is `null`. This is probably the best option.

```
<f:if condition="uploadObjectToDelete">
    <f:link.action action="delete" arguments="{upload:uploadObjectToDelete}" > ... 
</f:if> 
```

**Option 2**

Change your delete action to accept `null` arguments:

```
public function deleteAction(Tx_MyExt_Domain_Model_Upload $upload = null) { ... 
```

But this option doesn't make sense. Why would you allow your user to try and delete an object that is already null?

These are just suggestions.

# javascript - appendTo 对象不会对 jquery 更改采取行动

> ID：10329569
> 
> 赞同：0
> 
> 时间：2012-04-26T08:15:29.547
> 
> 标签：javascript, jquery, input, appendto

我有输入更改功能，它适用于已经存在的第一个输入，但是当 jscript
使用 appendTo 添加另一个输入对象时，相同的功能不起作用......

```
$("input[type=file]").change(function() {
$('<input name="fails[]" type="file" />').appendTo('#input_lauki');
$('<a href="#" onclick="dzest(this);return false" class="link" name="dzest" style="font-weight:normal; display:inline;">Izdzēst</a><br/>').appendTo('#input_lauki')
$('.link').css('display','inline');

}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:18:08.843

您还需要使用[$.on](http://api.jquery.com/on/)来绑定添加到 DOM 的新元素：

```
$.on("change", "input[type=file]", function() {
    $('<input name="fails[]" type="file" />').appendTo('#input_lauki');
    $('<a href="#" onclick="dzest(this);return false" class="link" name="dzest" style="font-weight:normal; display:inline;">Izdzēst</a><br/>').appendTo('#input_lauki')
    $('.link').css('display','inline');

}); 
```

或者[如果](http://api.jquery.com/live/)您使用的是旧版本的 jQuery，则可以使用，因为它有一些特殊处理，您应该在文档中阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:22:03.630

当您定义更改事件处理程序时，您有定义数量的输入文件，因此您稍后插入的新输入没有为该事件定义处理程序。

您应该改为将事件捕获给父级`#input_lauki`

```
$("#input_lauki").on('change', 'input[type=file]', function() {
 ...
} 
```

小提琴示例：http: [//jsfiddle.net/TwWEt/](http://jsfiddle.net/TwWEt/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T08:19:25.747

你可以试试

```
$('input[type=file]').on('change',function(){

 //your code

}); 
```

# axapta - 循环遍历 Dynamics AX 中的列表时出现对象未初始化错误？

> ID：10329571
> 
> 赞同：2
> 
> 时间：2012-04-26T08:15:29.813
> 
> 标签：axapta, ax, dynamics-ax-2012

问题：

*   我有一个以对象为元素的列表。
*   我使用枚举器循环列表。
*   在循环时，我将元素分配给与元素具有相同类型的变量对象。
*   当我在对象上调用方法时，我收到以下错误消息：

> MyClass 对象未初始化。

我想我必须投射，但不知道如何在 Dynamics AX 中执行此操作。

我在 MS Dynamics AX 2012 中开发。

```
MyExampleDataContract exampleDataContract = new MyExampleDataContract();
while (listEnumerator.moveNext())
{
    exampleDataContract = listEnumerator.current();
    info(exampleDataContract.parmCustomerId()); //This gives an error.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:07:11.310

列表元素可以为空。

```
List l = new List(Types::Class);
;
l.addEnd(null);
info(int2str(l.elements())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T06:50:53.323

解决方案是：在列表中插入元素之前，它们应该首先被实例化。

```
for (counter = 1; counter <= 3; counter++)
{
    exampleDataContract = new MyExampleDataContract(); // This is what I missed :)
    exampleDataContract.init("DEV-000000000" + int2str(counter));
    myList.addEnd(exampleDataContract);
} 
```

# c++ - 比较不包括标点符号和空格的字符串

> ID：10329582
> 
> 赞同：0
> 
> 时间：2012-04-26T08:16:04.843
> 
> 标签：c++, algorithm, palindrome

我正在编写一个程序来查找 C++ 中的大回文，我需要获取输入字符串的回文，**忽略大小写、标点符号和空格**。例如，请参见以下行：

> 孔子说：夫人，我是亚当。

在这里，最大的回文是Madam，如果你忽略大小写、标点符号和空格*，我是 Adam 。*

该程序还必须高效，以便在 < 1 秒内测试 2000 个字符的字符串。所以我有以下代码来返回最大的回文：

```
string largestPal(string input_str) {
    string isPal = "";
    string largest = "";

    int j, k;
    for(int i = 0; i < (input_str.length() - 1); ++i) {
        k = i + 1;
        j = i - 1;

        if(j >= 0 && k < (input_str.length())) {
            if(input_str[i] == input_str[j])
                j--;
            else if(input_str[i] == input_str[j])
                k++;
        }

        while(j >= 0 && k < (input_str.length())) {
            if(input_str[j] != input_str[k])
                break;

            else {
                j--;
                k++;
            }

            isPal = input_str.substr(j + 1, k - j - 1);
            if(isPal.length() > largest.length()) {
                largest = isPal;
            }
        }
    }
    return largest;
} 
```

我尝试输入一个完全格式化的字符串（没有空格、标点符号和大小写）作为该方法的参数，并成功获得了我想要的输出。（例如，前面的示例返回**MADAMIMADAM**作为最大回文数。

**问题：**

如何将此字符串转换回原来的状态（使用标点符号、空格和大小写）？

或者

如何在方法中直接测试剥离的字符串`largestPal`，但返回对应于所选最大回文的原始字符串（未剥离的）？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:22:58.887

最简单的方法是制作一个表格，将剥离字符串中的字符映射到它们在未剥离字符串中的原始位置。

例如，如果输入是“a V, v”，那么您剥离的字符串将是“avv”。你的地图将是 1,3,6。这表示剥离后的字符串中的第一个字符是未剥离的第一个，接下来是第三个，接下来是第六个。在剥离字符串时制作此地图。

当你有你的最终输出时，在剥离的字符串中找到它。在原始字符串中查找剥离字符串中第一个和最后一个字符的索引，然后输出该范围的字符。

因此，对于“avv”1、3、6，您的剥离输出将是“vv”。您在“avv”中找到“vv”并查找相应的索引并得到 3,6——因此您希望输出原始字符串中包含 3-6 的字符，即“V, v”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T08:34:26.300

有两种策略：

*   使用未修改的字符串，使用切片系统和特定比较器
*   使用规范版本来查找回文，但要记住它们来自哪里

鉴于您选择了第二种策略，剩下的就是记住您在原始字符串中的位置。如果你记住了回文首字母的索引，那么你可以只计算字母来检索原始字符串中的回文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:24:09.627

搜索回文时，您必须存储字符位置。所以返回值应该是一个位置对，而不是一个字符串。

然后以与剥离字符串时类似的方式处理原始字符串。跳过空格和标点符号，并计算字母以找到开始和结束位置。

# ruby-on-rails - 带有 netbeans 的 Ruby 调试器

> ID：10329583
> 
> 赞同：0
> 
> 时间：2012-04-26T08:16:06.220
> 
> 标签：ruby-on-rails, ruby, netbeans, glassfish, jruby

我是Ruby的新手。
我无法使用 Ruby 1.9 安装调试器，这是我唯一下载的 netbeans 6.9。现在我正在使用 Jruby 但现在我收到以下错误

请帮忙！

```
Fast Debugger (ruby-debug-ide 0.4.6) listens on localhost:53114
C:/Program Files/NetBeans 6.9/ruby/jruby-     1.5.0/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require': load error: server --   java.lang.UnsatisfiedLinkError: Unable to load library 'c': The specified module could not be found.
(LoadError)

    from C:/Program Files/NetBeans 6.9/ruby/jruby-1.5.0/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    from C:/Program Files/NetBeans 6.9/ruby/jruby-1.5.0/lib/ruby/gems/1.8/gems/glassfish-1.0.3-universal-java/lib/glassfish.rb:2
    from C:/Program Files/NetBeans 6.9/ruby/jruby-1.5.0/lib/ruby/gems/1.8/gems/glassfish-1.0.3-universal-java/lib/glassfish.rb:31:in `require'
    from C:/Program Files/NetBeans 6.9/ruby/jruby-1.5.0/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    from C:/Program Files/NetBeans 6.9/ruby/jruby-1.5.0/lib/ruby/gems/1.8/gems/glassfish-1.0.3-universal-java/bin/glassfish:54
    from C:/Program Files/NetBeans 6.9/ruby/jruby-1.5.0/lib/ruby/gems/1.8/gems/glassfish-1.0.3-universal-java/bin/glassfish:103:in `debug_program'
    from C:/Program Files/NetBeans 6.9/ruby/jruby-1.5.0/lib/ruby/gems/1.8/gems/ruby-debug-ide-0.4.6/bin/rdebug-ide:82
    from C:/Program Files/NetBeans 6.9/ruby/jruby-1.5.0/lib/ruby/gems/1.8/gems/ruby-debug-ide-0.4.6/bin/rdebug-ide:19:in `load'
    from C:\Program Files\NetBeans 6.9\ruby\jruby-1.5.0\bin\rdebug-ide:19 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:28:41.630

这是 Netbeans 上的 Ruby 调试 wiki [http://wiki.netbeans.org/RubyDebugging](http://wiki.netbeans.org/RubyDebugging)按照步骤操作，它应该可以正常工作。它对我有用！

# c# - 如何获取 RibbonApplicationMenuItem 的 Click 事件

> ID：10329585
> 
> 赞同：1
> 
> 时间：2012-04-26T08:16:15.190
> 
> 标签：c#, wpf, xaml, ribbon

我正在使用 Microsoft 功能区，并且正在尝试使其正常工作。

这是我尝试过的：

```
<ribbon:RibbonApplicationMenuItem Header="New Project"
    x:Name="MenuNewProject"
    ImageSource="Images/newfolder.ico" 
    Click="MenuNewProject_Click" 
    MouseLeftButtonUp="MenuNewProject_MouseLeftButtonUp" 
    PreviewMouseLeftButtonUp="MenuNewProject_PreviewMouseLeftButtonUp"/> 
```

上述事件（Click、MouseLeftButtonUp、PreviewMouseLeftButtonUp）均未触发。

我如何知道用户是否点击了 RibbonApplicationMenuItem？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:26:57.003

您能否提供更多代码，因为我无法复制您的问题。

两者都`Click`应该`PreviewMouseLeftButtonUp`开火。（预览事件是一个隧道事件，因此处理会阻止相应的气泡事件触发）。

您是否考虑过在数据上下文中使用`Command`属性`RibbonApplicationMenuItem`并将其连接到命令？

# hibernate - 当我拥有每 30 秒将 15000 条记录写入数据库的集群服务器时，我应该使用 Hibernate 缓存吗？

> ID：10329590
> 
> 赞同：0
> 
> 时间：2012-04-26T08:16:41.073
> 
> 标签：hibernate, caching, ehcache

当我拥有每 30 秒更新/写入 15000 条记录到数据库的集群服务器时，我应该使用 Hibernate 缓存吗？还是我只能直接查询和更新到数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:57:56.157

Hibernate 缓存最适合选择操作（使用缓存减少了对数据库的调用次数），但是对于保存或更新操作，缓存不会有太大帮助（同样，提供了一些帮助）...

我建议您不要缓存涉及如此繁重的保存或更新操作的表/pojo，并尝试使用[弹簧批处理](http://static.springsource.org/spring-batch/)，这将提高性能。

# sql - 带有hierarchyid的SQL Server INNER JOIN

> ID：10329591
> 
> 赞同：2
> 
> 时间：2012-04-26T08:16:44.677
> 
> 标签：sql, hierarchyid

我有两张表，一张是物品容器，它包含与产品相关的所有数据。另一个表用于类别，其中数据使用层次结构进行组织。
查询的目标是从所选类别向下列出与类别匹配的项目。

例子：

```
CatID: 3, Parent: Root, Name: Computers  
CatID: 4, Parent: 3, Name: Laptops  
CatID: 5, Parent: 3, Name: Monitors  
CatID: 6, Parent: 3, Name: Printers  
CatID: 7, Parent: 6, Name: Laser  
CatID: 8, Parent: 6, Name: Ink  
CatID: 9, Parent: 6, Name: Multifunction  
CatID: 10, Parent: 6, Name: Copier 
```

如果`CatID`选择3，则显示所有计算机产品，但如果`CatID`选择6，则仅显示打印机（带有`CatID`7、8、9和10的项目）

我对层次结构 ID 很陌生，我对如何处理这个查询一无所知。

感谢所有做出贡献的人。

卡洛斯

两个表的模式 想法是将 mz_category 连接到 ic_item_cat，因此查询可以列出给定类别的所有项目，也可以列出所有子类别。这适用于特殊的“自制”树视图，其中所有类别都根据层次结构显示；当用户单击一个类别时，它会显示属于该类别的所有项目以及属于子类别的所有项目。希望你能明白。

```
/****** Object:  Table [dbo].[mz_category]    Script Date: 04/26/2012 19:14:34 ******/
SET ARITHABORT ON
GO
SET CONCAT_NULL_YIELDS_NULL ON
GO
SET ANSI_NULLS ON
GO
SET ANSI_PADDING ON
GO
SET ANSI_WARNINGS ON
GO
SET NUMERIC_ROUNDABORT OFF
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
SET ARITHABORT ON
GO
/****** Categories Table ******/
CREATE TABLE [dbo].[mz_category](
    [CatNode] [hierarchyid] NOT NULL,
    [CatLevel]  AS ([CatNode].[GetLevel]()),
    [CatID] [int] NOT NULL,
    [CatName] [varchar](80) NOT NULL,
    [SectorId] [varchar](2) NULL,
    [CatIcon] [varchar](255) NULL,
    [oldCat] [varchar](8) NULL,
PRIMARY KEY CLUSTERED 
(
    [CatNode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
    [CatID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[ic_item_cat]    Script Date: 04/26/2012 19:14:34 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
/****** Items Table ******/
CREATE TABLE [dbo].[ic_item_cat](
    [item_code] [varchar](25) NOT NULL,
    [item_description] [varchar](80) NULL,
    [item_sector] [varchar](2) NULL,
    [item_line] [varchar](2) NULL,
    [item_reference] [varchar](50) NULL,
    [item_upcean] [varchar](50) NULL,
    [item_category] [int] NULL,
    [item_brand] [varchar](8) NULL,
    [item_cost] [decimal](12, 4) NULL,
    [item_price1] [decimal](12, 4) NULL,
    [item_price2] [decimal](12, 4) NULL,
    [item_price3] [decimal](12, 4) NULL,
    [item_webprice] [decimal](12, 4) NULL,
    [item_dprice1] [decimal](12, 4) NULL,
    [item_dprice2] [decimal](12, 4) NULL,
    [item_dprice3] [decimal](12, 4) NULL,
    [item_lastcost] [decimal](12, 4) NULL,
    [item_lastcostdate] [datetime] NULL,
    [item_lastqtyout] [decimal](12, 4) NULL,
    [item_lastqtyoutdate] [datetime] NULL,
    [item_lastqtyin] [decimal](12, 4) NULL,
    [item_lastqtyindate] [datetime] NULL,
    [item_additionaldesc] [varchar](max) NULL,
    [item_weight] [decimal](12, 4) NULL,
    [item_weight_measure] [varchar](2) NULL,
    [item_width] [decimal](12, 4) NULL,
    [item_width_measure] [varchar](2) NULL,
    [item_length] [decimal](12, 4) NULL,
    [item_length_measure] [varchar](2) NULL,
    [item_height] [decimal](12, 4) NULL,
    [item_height_measure] [varchar](2) NULL,
    [item_whpackdesc] [varchar](80) NULL,
    [item_salespackdesc] [varchar](80) NULL,
    [item_purchpackdesc] [varchar](80) NULL,
    [item_salespackconv] [decimal](12, 4) NULL,
    [item_purchpackconv] [decimal](12, 4) NULL,
    [item_warranty] [varchar](2) NULL,
    [item_delivtime] [varchar](2) NULL,
    [item_rating] [int] NULL,
    [item_vat] [varchar](2) NULL,
    [item_status] [int] NULL,
    [item_avgleadtime] [int] NULL,
    [web_flag] [bit] NULL,
    [partner_id] [varchar](25) NULL,
    [unique_id] [uniqueidentifier] NOT NULL
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:58:10.230

您可以使用`CTE`.

*   选择起始记录
*   在递归部分获取这些起始记录的子项

**SQL 语句**

```
;WITH q AS (
  SELECT  CatID, Parent, Name
  FROM    YourTable
  WHERE   CatID = 3
  UNION ALL
  SELECT  t.CatID, t.Parent, t.Name
  FROM    q
          INNER JOIN YourTable t ON t.Parent = q.CatID
)
SELECT  *
FROM    q 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:28:17.927

这样的事情会起作用吗？

```
DECLARE @CatNode hierarchyid;
SET @CatNode = (
    SELECT CatNode from mz_category
    WHERE CatID = @CatID
  );
SELECT * FROM Items
WHERE CatID IN (
  SELECT  CatID
  FROM    mz_category
  WHERE   CatNode.IsDescendantOf(@CatNode) = 1
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:00:49.563

```
DECLARE @CatID hierarchyid = '/6/';

WITH RootCategory AS (
    SELECT  CatID,
            Parent,
            Name
    FROM    Category
    WHERE   CatID = @CatID

    UNION ALL

    SELECT      C.CatID,
                C.Parent,
                C.Name
    FROM        Category C
    INNER JOIN  RootCategory R ON C.Parent = R.CatID
)
SELECT  *
FROM    RootCategory 
```

# dojo - 在 dgrid (dojo) 中检索选定的单元格信息

> ID：10329597
> 
> 赞同：1
> 
> 时间：2012-04-26T08:17:18.243
> 
> 标签：dojo, dgrid

我在我的 dojo 项目中使用 dgrid 组件。我有一个网格和一个按钮。我在网格上启用了单元格选择。

如何检索所选单元格的信息（数据）？我的用例是每当我单击按钮时，我应该能够获取与网格中选定单元格关联的数据。

我尝试在[https://github.com/SitePen/dgrid/wiki/Components-Mixins](https://github.com/SitePen/dgrid/wiki/Components-Mixins)查找文档，但找不到任何相关信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:18:01.733

在[https://github.com/SitePen/dgrid/blob/master/demos/dTuned/index.html](https://github.com/SitePen/dgrid/blob/master/demos/dTuned/index.html)的示例中，使用 mixins 创建了一个网格。

```
window.grid = new (declare([Grid, Selection, Keyboard, Hider]))({
    ...
}, "grid"); 
```

选择 mixin 具有以下属性：

```
// selection:
//      An object where the property names correspond to 
//      object ids and values are true or false depending on whether an item is selected
selection: {}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T16:47:44.577

[*例如，您可以使用网格中的select*](https://github.com/SitePen/dgrid/wiki/Selection#property-summary)属性和[*cell()*](https://github.com/SitePen/dgrid/wiki/Grid#method-summary)方法实现一个返回选定单元格的方法。

```
getSelectedCells: function() {
  var cell,
      results = [];

  for (var rowIdx in grid.selection) {
    for (var colIdx in grid.selection[rowIdx]) {
      cell = grid.cell(rowIdx, colIdx);
      results.push(cell);
    }
  }

  return results;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-02T11:36:14.323

您应该使用[CellSelection mixin](https://github.com/SitePen/dgrid/blob/v1.0.0/doc/components/mixins/CellSelection.md)。

选定的单元格可以通过`selection`对象或内部访问`dgrid-select`，`dgrid-deselect`事件可以通过其`cells`属性访问。

来自 mixin 的文档：

> 选择对象存储一个嵌套散列，其中外部散列由项目 ID 键入，内部散列由列 ID 键入。
> 
> dgrid-select 和 dgrid-deselect 事件仍会触发，但包括一个包含单元对象数组的单元格属性，而不是行属性。

# javascript - 您如何使用 Javascript API 在 Facebook 上发表评论

> ID：10329604
> 
> 赞同：0
> 
> 时间：2012-04-26T08:17:51.080
> 
> 标签：javascript, jquery, facebook-graph-api

我希望能够在我的网站上回复 Facebook 上的帖子。我已经设法在我的网站上获得帖子和评论，但现在我需要执行下一步并发表评论。我找到了这篇文章，但需要一些帮助来理解它。

[从 JavaScript 向 Facebook 发表评论](https://stackoverflow.com/questions/9873608/posting-comment-to-facebook-from-javascript)

# java - 获取特定位置的所有元素的数据结构

> ID：10329606
> 
> 赞同：0
> 
> 时间：2012-04-26T08:17:54.583
> 
> 标签：java, memory-management, data-structures, hash

我有一个`Grid`具有一定高度和宽度的正方形。它包含类的成员`Item`。每一个`Item`都有一定的`Position`。我希望能够在恒定时间内将所有项目放在某个位置，并且我希望能够在摊销恒定时间内将项目放置在网格上。

什么（Java）结构可以做到这一点，同时使用与已使用位置（至少有 1 个项目的位置）数量成正比的内存量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:23:18.670

如果您的 Grid 具有固定大小，我将使用数组。

```
Item[][] itemArray = new Item[3][3];
itemArray[0][0] = new Item();
System.out.println(itemArray[0][0]); 
```

我会把它包装到课堂上`Grid`

```
public final class Grid {

    private Item[][] grid;

    public Grid(int width, int height) {
        grid = new Item[width][height];
    }

    public void setItemAt(Position position, Item item) {
        int x = position.getX();
        int y = position.getY();

        grid[x][y] = item;
    }

    public Item getItemAt(Position position) {
        int x = position.getX();
        int y = position.getY();

        return grid[x][y];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:32:38.470

上面的用户是对的，您可以在内部使用数组。当然它应该是 type `List<Item>[][]`。无论你使用`ArrayList`或`LinkedList`，加法都会摊销常数时间。尽管我建议您选择 a `LinkedList`，因为您`Grid`的人口可能很少（`ArrayList`总是从已经分配的几个空间开始）。

如果`Grid`需要能够增长，只需​​使用相同的技巧`ArrayList`：跟踪当前的宽度/高度，如果您需要更多空间，只需将可用空间乘以合适的值（对于 2D 数组，加倍可能有点多，但这取决于可能的增长类型）。

# objective-c - iOS 中的 H.264 编码器和解码器

> ID：10329607
> 
> 赞同：1
> 
> 时间：2012-04-26T08:17:55.660
> 
> 标签：objective-c, ios, h.264

在我们的 iOS 应用程序中，我们需要从 iPhone 或 iPad 相机捕获缓冲区并使用 h.264 对其进行编码并将其发送到服务器，同样设备将接收 h.264 它需要解码为原始 RGB 格式并显示在屏幕上，

我想知道如何开始使用它，谷歌搜索后似乎iOS不支持它，我们需要编写自定义H.264编码器和解码器，

我将获得流媒体内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:24:58.193

[https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAssetExportSession_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAssetExportSession_Class/Reference/Reference.html)

> 导出不会将视频从较小的尺寸放大。视频使用 H.264 压缩；音频使用 AAC 压缩。某些设备不支持某些尺寸。

# sql - 如何从每个配置文件中提取最后一条评论？

> ID：10329608
> 
> 赞同：0
> 
> 时间：2012-04-26T08:17:55.870
> 
> 标签：sql, greatest-n-per-group

我需要为每个配置文件提取最后 100 个配置文件的最后一条评论

每个配置文件，如果 type==1，至少有 1 条评论

*   type==1 => 是公司
*   type==2 => 是人类

以下是相关表格和数据：

```
CREATE TABLE IF NOT EXISTS `comment` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `profile` int(11) NOT NULL,
  `name` varchar(200) NOT NULL,
  `email` varchar(200) NOT NULL,
  `county` int(11) NOT NULL,
  `comment` text NOT NULL,
  `created` int(11) NOT NULL,
  `status` int(11) NOT NULL,
  `verified` int(11) NOT NULL,
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

INSERT INTO `comment` (`id`, `profile`, `name`, `email`, `county`, `comment`, `created`, `status`, `verified`) VALUES
(1, 1, 'ANGAJAT 1', 'email 2', 1, 'comm 1', 1335423985, 0, 0),
(2, 3, 'ANGAJAT 2', 'email 4', 1, 'comm 2', 1335424011, 0, 0),
(3, 5, 'ANGAJAT 3', 'email 6', 1, 'comm 3', 1335424037, 0, 0),
(4, 5, 'ANGAJAT 3', 'email 6', 1, 'comm 4', 1335424039, 0, 0);

CREATE TABLE IF NOT EXISTS `profile` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `type` int(11) NOT NULL COMMENT '1 = angajatori ; 2 - angajati',
  `name` varchar(200) NOT NULL,
  `county` int(11) NOT NULL,
  `email` varchar(200) NOT NULL,
  `created` int(11) NOT NULL,
  `comments` int(11) NOT NULL,
  `status` int(11) NOT NULL,
  `verified` int(11) NOT NULL,
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7 ;

INSERT INTO `profile` (`id`, `type`, `name`, `county`, `email`, `created`, `comments`, `status`, `verified`) VALUES
(1, 1, 'ANGAJATOR 1', 1, 'email 1', 1335423985, 0, 0, 0),
(2, 2, 'ANGAJAT 1', 1, 'email 2', 1335423985, 0, 0, 0),
(3, 1, 'ANGAJATOR 2', 1, 'email 3', 1335424011, 0, 0, 0),
(4, 2, 'ANGAJAT 2', 1, 'email 4', 1335424011, 0, 0, 0),
(5, 1, 'ANGAJATOR 3', 1, 'email 5', 1335424037, 0, 0, 0),
(6, 2, 'ANGAJAT 3', 1, 'email 6', 1335424037, 0, 0, 0);\ 
```

我试过 ：

```
SELECT * 
FROM COMMENT c
JOIN profile p ON p.id = c.profile
GROUP BY c.profile
ORDER BY c.created DESC , p.id ASC 
LIMIT 100 
```

我得到了：

```
id  profile name    email   county  comment created status  verified    id  type    name    county  email   created comments    status  verified
3   5   ANGAJAT 3   email 6 1   comm 3  1335424037  0   0   5   1   ANGAJATOR 3 1   email 5 1335424037  0   0   0
2   3   ANGAJAT 2   email 4 1   comm 2  1335424011  0   0   3   1   ANGAJATOR 2 1   email 3 1335424011  0   0   0
1   1   ANGAJAT 1   email 2 1   comm 1  1335423985  0   0   1   1   ANGAJATOR 1 1   email 1 1335423985  0   0   0 
```

查询返回最后每 100 家公司的第一条评论

请帮助查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:58:48.533

试试这个：

```
SELECT c.* 
FROM COMMENT c
JOIN 
  (SELECT MAX(created_at) created_at, profile FROM COMMENT
   GROUP BY profile) p ON p.profile = c.profile AND p.created_at = c.created_at
ORDER BY c.created DESC , p.profile ASC 
LIMIT 100 
```

它应该可以解决问题。

# dynamics-crm-2011 - 更新表单加载上的联系人中间名字段 - MS CRM 2011 插件

> ID：10329610
> 
> 赞同：1
> 
> 时间：2012-04-26T08:17:57.780
> 
> 标签：dynamics-crm-2011

几天前我开始了 MS CRM 开发，今天我花了几个小时在这个非常简单的基本操作上，并没有找到我做错了什么的运气。

我想在创建记录时更新联系人实体的中间名。我可以用下面的代码来做。

但是现在我想在打开联系人记录时做同样的事情。我确实在联系实体下注册了一个关于检索消息的新步骤。但它不起作用..没有抛出异常。

```
 public class IzzyPlugin : IPlugin
{
    public void Execute(IServiceProvider serviceProvider)
    {
        try
        {
            IPluginExecutionContext context = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));

            IOrganizationServiceFactory factory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
            IOrganizationService service = factory.CreateOrganizationService(context.UserId);

            if (context.InputParameters.Contains("Target") && context.InputParameters["Target"] is Entity)
            {
                Entity currentEntity = (Entity)context.InputParameters["Target"];

                if (currentEntity.Attributes.Contains("middlename"))
                {
                    currentEntity.Attributes["middlename"] = "Middle name changed";
                }
                else
                {
                    currentEntity.Attributes.Add("middlename", "Middle name changed");
                }

                service.Update(currentEntity);

            }
        }
        catch (Exception f)
        {
            throw new InvalidPluginExecutionException(f.ToString());
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:11:17.713

打开记录时，您不能在页面加载时使用 javascript 设置中间名值吗？IMO会容易得多

像这样的 onload 会起作用

Xrm.Page.getAttribute('middlename').setValue('New Middle Name');

如果您需要从同一实体中的其他字段计算中间名，您可能需要参考[MSDN 上的 XRM Page 文档](http://msdn.microsoft.com/en-us/library/gg334351.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T06:41:10.540

我建议使用 JavaScript 来执行此操作。我不认为你可以注册一个可以在打开记录时触发的插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:16:55.993

我不会质疑您为什么要这样做，或者您将在哪里获得中间名的值，但是我怀疑问题在于您的插件/更新的排序。`Retrieve`由于消息如此频繁地被调用，因此针对消息编写插件并不是一个好主意。我个人认为 JScript 是要走的路，但是......

如果您想在 Retrieve 中插入一个值`middlename`并将其返回给用户，但*不*将其提交给数据库（我知道这不是您的确切问题），那么：

1.  在 Retrieve 消息的**Post-operation**中注册您的插件
2.  在您的代码中输入：

```
>     Entity currentEntity = (Entity)context.OutputParameters["Entity"];
>     if(currentEntity.Attributes.contains("middlename"){
>         currentEntity["middlename"] = "New value";    
>     }else{
>         currentEntity.Attributes.Add("middlename","New value");
>     } 
```

如果您想在 Retrieve 上插入一个值`middlename`并将其返回给用户**并将其**提交给数据库，那么我怀疑您需要将两者结合到一个在 Retrieve 操作前后注册的插件中，然后执行类似的操作这个（但我什至对每次检索都尝试更新......！）：

```
public class IzzyPlugin : IPlugin
{
    public void Execute(IServiceProvider serviceProvider)
    {
        try
        {
            IPluginExecutionContext context = (IPluginExecutionContext)serviceProvider.GetService(typeof(IPluginExecutionContext));
            IOrganizationServiceFactory factory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
            IOrganizationService service = factory.CreateOrganizationService(context.UserId);

            if (context.InputParameters.Contains("Target") && context.InputParameters["Target"] is Entity)
            {
                var middleNameValue = "Middle name changed";
                Entity currentEntity;

                // Pre-stage plugin
                if(context.Stage < 30){
                    currentEntity = (Entity)context.InputParameters["Target"];

                    if (currentEntity.Attributes.Contains("middlename"))
                    {
                        currentEntity.Attributes["middlename"] = middleNameValue;
                    }
                    else
                    {
                        currentEntity.Attributes.Add("middlename", middleNameValue);
                    }
                    service.Update(currentEntity);
                }else{
                    currentEntity = (Entity)context.OutputParameters["Entity"];
                    if(currentEntity.Attributes.contains("middlename"){
                        currentEntity["middlename"] = middleNameValue;    
                    }else{
                        currentEntity.Attributes.Add("middlename",middleNameValue);
                    }                   
                }
            }
        }
        catch (Exception f)
        {
            throw new InvalidPluginExecutionException(f.ToString());
        }
    }
} 
```

# uitableview - 故事板 Xcode 中的 UISearchBar

> ID：10329615
> 
> 赞同：6
> 
> 时间：2012-04-26T08:18:32.220
> 
> 标签：uitableview, uisearchbar, uistoryboard

我想在storyboard xcode中为我的表创建searchBar，一切都对我有用，我没有任何错误，只是搜索不起作用。

我看到了这两个教程，但仍然无法正常工作。我无法搜索。我的教程：

```
 -http://stackoverflow.com/questions/9897171/uisearchbar-implemented-with-storyboards
   -http://www.youtube.com/watch?v=IqDZHgI_s24 
```

你能帮我吗，在此先感谢！

这是我的代码

创建视图控制器.h

```
#import <UIKit/UIKit.h>

@interface CreateViewController : UITableViewController <UITableViewDelegate, UITableViewDataSource,       UISearchBarDelegate>
{
// @property (weak, nonatomic) IBOutlet UISearchBar *searchBar;
NSArray *datas;
NSMutableArray *displayItems;
IBOutlet UITableView * tableView;
IBOutlet UISearchBar * searchbar;
}

@end 
```

创建视图控制器.m

```
#import "CreateViewController.h"

@interface CreateViewController ()

@end

@implementation CreateViewController

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

datas = [NSMutableArray arrayWithObjects:@"Johan", @"Paul",@"George",@"Ringo", nil];
displayItems = [[NSMutableArray alloc] initWithArray:datas];
[super viewDidLoad];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
}

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [datas count];
}

- (UITableViewCell *)tableView:(UITableView *)atableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";//This is the identifier in storyboard    
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
}

cell.textLabel.text = [datas objectAtIndex:indexPath.row];
return cell;
}
-(void)searchbar:(UISearchBar *)searchbar textDidChange:(NSString *)searchText{
if([searchText length] == 0){
    [displayItems removeAllObjects];
    [displayItems addObjectsFromArray:datas];
}else{
    [displayItems removeAllObjects];
    for(NSString * string in datas){
        NSRange r = [string rangeOfString:searchText options:NSCaseInsensitiveSearch];
        if (r.location != NSNotFound){
            [displayItems addObject:string];   
        }
    }
}
[tableView reloadData];
}

 #pragma mark - Table view delegate

 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
// Navigation logic may go here. Create and push another view controller.
/*
 <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib    name#>" bundle:nil];
 // ...
 // Pass the selected object to the new view controller.
 [self.navigationController pushViewController:detailViewController animated:YES];
 */
}

@end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T20:45:43.560

使用本教程 iOS 快速提示：使用搜索栏过滤 UITableView

[http://code-ninja.org/blog/2012/01/08/ios-quick-tip-filtering-a-uitableview-with-a-search-bar/](http://code-ninja.org/blog/2012/01/08/ios-quick-tip-filtering-a-uitableview-with-a-search-bar/)

```
-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
{
if(text.length == 0)
{
    isFiltered = FALSE;
}
else
{
    isFiltered = true;
    filteredTableData = [[NSMutableArray alloc] init];

    for (Food* food in allTableData)
    {
        NSRange nameRange = [food.name rangeOfString:text options:NSCaseInsensitiveSearch];
        NSRange descriptionRange = [food.description rangeOfString:text options:NSCaseInsensitiveSearch];
        if(nameRange.location != NSNotFound || descriptionRange.location != NSNotFound)
        {
            [filteredTableData addObject:food];
        }
    }
}

[self.tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:14:33.897

您可以将 NSPredicate 用于此功能，修改您的搜索委托方法如下

```
 [datas release];
datas = nil;

datas = [[NSMutableArray alloc] initWithArray: displayItems];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF like[c] %@",[NSString stringWithFormat:@"%@*",searchBar.text]];
[datas filterUsingPredicate:predicate];
[tableView reloadData]; 
```

在此处查看示例代码

[http://dl.dropbox.com/u/58723521/SearchSample.zip](http://dl.dropbox.com/u/58723521/SearchSample.zip)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T10:19:55.930

我同意，您需要更改`cellForRowAtIndexPath`并`numberOfRowsInSection`使用`displayItems`数组而不是数据数组。还要检查您是否设置了`UISearchBarDelegate`搜索栏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T09:39:03.460

您需要更改 cellForRowAtIndexPath 以使用 displayItems 数组而不是 datas 数组

```
- (UITableViewCell *)tableView:(UITableView *)atableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";//This is the identifier in storyboard    
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];

}

cell.textLabel.text = [displayItems objectAtIndex:indexPath.row];
return cell;
} 
```

并更改 numberOfRowsInSection 以使用 displayItems 数组计数

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

// Return the number of rows in the section.
return [displayItems count];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T08:51:44.670

像这样做，

*   在你的头文件中声明这样的数组，

    ```
    NSMutableArray *datas;
    NSMutableArray *displayItems; 
    ```

*   然后像这样在**viewDidLoad**中更改数组初始化，

    ```
    datas = [[NSMutableArray alloc] initWithObjects:@"Johan", @"Paul",@"George",@"Ringo", nil];
    displayItems = [[NSMutableArray alloc] initWithArray:datas]; 
    ```

*   更改**cellForRowAt**方法中的数组，

    ```
    cell.textLabel.text = [displayItems objectAtIndex:indexPath.row]; 
    ```

*   然后使用 NSLog在**textDidChange**方法中打印您的搜索字符串。如果不打印，则 IBOutlet 连接有问题。如果打印出来，更换这个方法，看看是否有效，

    ```
    -(void)searchbar:(UISearchBar *)searchbar textDidChange:(NSString *)searchText{

    if([searchText length] == 0){

    }else{
        [displayItems removeAllObjects];
        for (int i=0; i<[datas count]; i++) {
            if ([searchText hasPrefix:[datas objectAtIndex:i]]) {
                [displayItems addObject:[datas objectAtIndex:i]];
            } else {

            }
        }
    }
    [tableView reloadData];
    } 
    ```

我的排序方法不是世界上最好的。但请尝试让您的代码正常工作。

**编辑**：我认为你的代表不会开火。试试这个方法而不是上面的方法。

```
- (void) searchBarSearchButtonClicked:(UISearchBar*) theSearchBar
{
if([searchBar.text length] == 0){
arrayDisplayData = arrayOriginalData;
}else{
    [arrayDisplayData removeAllObjects];
    for(NSString * string in arrayOriginalData){
        NSRange r = [string rangeOfString:searchBar.text options:NSCaseInsensitiveSearch];
        if (r.location != NSNotFound){
            [arrayDisplayData addObject:string];   
        }
    }
}
[tblResults reloadData];
} 
```

或这个，

```
- (BOOL)searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text 
```

# memory - 减少现有网页的内存占用

> ID：10329619
> 
> 赞同：4
> 
> 时间：2012-04-26T08:18:45.427
> 
> 标签：memory, browser

我正在使用一个非常消耗内存的 Web 应用程序，因为原始编码人员在客户端（JavaScript、jQuery）中放置了很多业务逻辑。因此，当用户在应用程序中使用许多对象时，Web 浏览器会由于内存不足而崩溃。

将业务逻辑转移到服务器端并不是短期的选择。因此，我一直在网上搜索有关**如何快速减少现有网页的内存占用的**想法，但空手而归。

*有什么**通用**提示吗？*（例如，缩短 JavaScript 变量的名称是否会带来显着的改进？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:41:37.793

这是一个非常广泛的问题，因为我们看不到执行此业务逻辑的 Javascript 代码。我希望该网站托管在受控环境中，因为显然脚本阻止程序/仅禁用 javascript 会使其无用。我想建议的一些事情是：

1.  将所有 Javascript 放在一个 .js 文件中并缩小它。您不会对开发版本执行此操作，只有将文件缩小为生产版本才会使其完全无法维护 - 请参阅[http://code.google.com/p/minify/](http://code.google.com/p/minify/)了解更多信息。将所有 Javascript 放在一个文件中将减少客户端下载脚本所需的 HTTP 连接数量。

2.  将您的 SCRIPT 标签放在页面底部而不是顶部。这将改善客户端的渲染时间（但是，它不会降低内存利用率，因为代码仍然存在）。解析 SCRIPT 块会锁定浏览器，直到它完成，它不能异步加载这些。

有很多方法可以改进这一点，而不必重写整个事情——尽管我当然会将重构视为这个问题的“整体解决方案”。我基本上是在重复这篇文章[http://developer.yahoo.com/performance/rules.html中的提示](http://developer.yahoo.com/performance/rules.html)

# class - CodeIgniter中发起的Controller在哪里

> ID：10329621
> 
> 赞同：1
> 
> 时间：2012-04-26T08:18:56.400
> 
> 标签：class, codeigniter, controller

我想知道控制器在哪里启动（我的意思是文件包含在哪里，然后加载它的类并调用它的方法）。我想知道，因为我想对核心进行小修改。

我真正需要的是模拟调用新的控制器。我不需要像 HMVC 这样的技术，但我正在研究一些更简单的东西，但我确实需要模拟调用控制器，这些控制器以后可以与请求的控制器交互。

我已经扩展了核心的 Loader 类以允许通过 loader 类调用新的控制器，但我找不到控制器在哪里启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:26:59.963

它位于`system/core/CodeIgniter.php`第 317 到 360 行（CodeIgniter 2.1.0）。

```
/*
 * ------------------------------------------------------
 *  Call the requested method
 * ------------------------------------------------------
 */
    // Is there a "remap" function? If so, we call it instead
    if (method_exists($CI, '_remap'))
    {
        $CI->_remap($method, array_slice($URI->rsegments, 2));
    }
    else
    {
        // is_callable() returns TRUE on some versions of PHP 5 for private and protected
        // methods, so we'll use this workaround for consistent behavior
        if ( ! in_array(strtolower($method), array_map('strtolower', get_class_methods($CI))))
        {
            // Check and see if we are using a 404 override and use it.
            if ( ! empty($RTR->routes['404_override']))
            {
                $x = explode('/', $RTR->routes['404_override']);
                $class = $x[0];
                $method = (isset($x[1]) ? $x[1] : 'index');
                if ( ! class_exists($class))
                {
                    if ( ! file_exists(APPPATH.'controllers/'.$class.'.php'))
                    {
                        show_404("{$class}/{$method}");
                    }

                    include_once(APPPATH.'controllers/'.$class.'.php');
                    unset($CI);
                    $CI = new $class();
                }
            }
            else
            {
                show_404("{$class}/{$method}");
            }
        }

        // Call the requested method.
        // Any URI segments present (besides the class/function) will be passed to the method for convenience
        call_user_func_array(array(&$CI, $method), array_slice($URI->rsegments, 2));
    } 
```

但是，您尝试做的事情仍然没有任何意义。

# wpf - 为什么 tabchange 会更改绑定值

> ID：10329622
> 
> 赞同：0
> 
> 时间：2012-04-26T08:19:00.847
> 
> 标签：wpf, data-binding, datagrid, tabcontrol

当我在应用程序的 TabControl 中使用它时，我编写的 UserControl 有问题。TabControl 是 DataBound 并使用模板。在更改当前选项卡（每次鼠标单击）时，绑定属性设置为空。我想将当前选定的项目保留在 ViewModel 中。如果我使用 DataGrid 或 ListBox，一切都会按预期工作。ViewModel 的 SelectedItem-Property 未设置为 null。

也许我必须设置我的 DependencyProperty 不同？涉及的属性定义如下：

```
SelectedItemProperty = DependencyProperty.Register("SelectedItem", typeof(object), typeof(BusinessListEditor), new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault));
ItemsSourceProperty = DependencyProperty.Register("ItemsSource", typeof(IEnumerable), typeof(BusinessListEditor), new FrameworkPropertyMetadata(null)); 
```

此属性直接绑定到 UserControl 内的 DataGrid。

```
<DataGrid x:Name="dgDataGrid"
              ItemsSource="{Binding ItemsSource,
                                    ElementName=ucBusinessListEditor}"
              SelectedItem="{Binding SelectedItem,
                                     ElementName=ucBusinessListEditor}"
              Style="{Binding DataGridStyle,
                              ElementName=ucBusinessListEditor}" /> 
```

我如何防止 SelectedItem-Property 在 SelectedTab-Change 上发生更改的问题。我试图分析这一点，但并不完全理解这个案例。SelectedItemChanged 不知何故来自 DataGrid 的 ItemsChanged。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:28:16.500

如果您更改当前选项卡，旧选项卡将从可视树中卸载。这意味着不`DataGrid`，不`SelectedItem`。

您可以尝试[停止这种行为](https://stackoverflow.com/q/5038107/620360)，或者更简单地备份您的 DP 中的最后一个 SelectedItem ，该属性在[PropertyChangedCallback](http://msdn.microsoft.com/en-us/library/system.windows.propertychangedcallback.aspx)中不为空。

# apache-flex - Flex Tree 持久化排序和处理拖放

> ID：10329623
> 
> 赞同：0
> 
> 时间：2012-04-26T08:19:01.213
> 
> 标签：apache-flex, sorting, drag-and-drop, tree

我想将 flex 树的排序状态保存到我的数据库中。我使用树中每个项目的子列表上的排序对象对树项目进行递归排序。因此排序工作正常。但是，当我现在拖放东西时，似乎树是使用这些排序功能排序的，而不是将项目放在我想要的位置。

是否有任何最佳实践来处理树上的拖放和排序功能？

刷新列表后，我还尝试将排序设置为 null，但随后拖放会引发奇怪的错误。

如果它有帮助，我可以发布一些代码，但是我宁愿寻找一种最佳实践方法来处理这个问题。如果有什么可以指点我的，我将不胜感激。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:33:53.090

建议： - 发布一些代码，以便人们可以在帮助您的同时节省时间，并且可以清楚地了解您正在寻找什么。如果可能，请逐步解释您的问题。

# python - Python - 计算冲突。需要某种范围变量

> ID：10329627
> 
> 赞同：1
> 
> 时间：2012-04-26T08:19:08.000
> 
> 标签：python, python-3.x

我真的很难过。我为我的老师编写了一个程序（我使用 Python 3 顺便说一句），这样他就可以将此代码提供给学生来计算他们的成绩，而不是等待他们的成绩单。我只是一个初学者，所以请尽量保持答案简单：D

好的，问题就在这里。我有代码所需的所有输入。输入是这样工作的。A = 5 B = 4 C = 3 D = 2 E = 1。如果你得到全A，你会得到50分，以此类推，但如果结果是35分，所有成绩计算器都会崩溃。因为如果它 >30 则为 B，但如果 >20 则为 C，但 >20 和 >30 同时打印。因为如果结果大于 30，它们都会执行。而且我不知道如何制作它，如果它是 31 到 40，它会打印说“B”。

这是代码

```
a = eval(input())
b = eval(input())
c = eval(input())
d = eval(input())
e = eval(input())
f = eval(input())
g = eval(input())
h = eval(input())
i = eval(input())
j = eval(input())

average = a + b + c + d + e + f + g + h + i + j
print(average)

if average >41:
    print(" Grade A ")

if average >31: 
    print(" Grade B")

if average >21:
    print(" Grade C")

if average >11 :
    print(" Grade D")

if average >0 
    print(" Grade E") 
```

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T15:08:04.520

做你想做的最好的方法是定义一组数据。`if`/`elif`块可以工作，但很笨拙，并且需要大量额外的输入：

```
import sys

mark_boundaries = [("A", 41), ("B", 31), ("C", 21), ("D", 11), ("C", 0)]

try:
    marks = []
    for i in range(10):
        marks.append(int(input()))
except ValueError:
    print("You entered an invalid mark, it must be a number.")
    sys.exit(1)

average = sum(marks) #I'd just like to note the misleading variable name here.
#average = sum(marks)/len(marks) #This would be the actual average mark.
print(average)

for mark, boundary in mark_boundaries:
    if average >= boundary:
        print("Grade "+mark)
        break #We only want to print out the best grade they got. 
```

在这里，我们使用一个元组列表来定义我们的边界。我们从最高到最低检查，如果我们匹配就会突破（所以它不会“落入”较低的分数）。

同样，您可以看到我使用循环来收集数据以获取标记。您在编程时以低效的方式做某事的一个好迹象是您复制并粘贴（或一次又一次地输入）一些代码。这通常意味着你需要把它放在一个循环中，或者让它成为一个函数。我还使用`int(input())`了而不是`eval(input())`，这是一个更安全的选择，因为它不允许执行用户想要的任何操作。`ValueError`如果用户输入的不是数字，它还允许我们很好地捕获异常。

请注意，有进取心的人可能会查看对元组的列表，并认为 a`dict`将是一个很好的替代品。虽然在大多数情况下是正确的，但在这种情况下，我们需要正确排序——`dict`顺序是任意的，可能导致我们首先检查较低的分数，给他们一个低于应得的分数。

就像一个注释，完全有可能做到

```
if 31 < average < 41: #Equivalent to `if 31 < average and average < 41:`
    print("Grade B") 
```

在蟒蛇。也就是说，对于这种用法，这意味着比使用列表和循环或`if`/更多的输入`elif`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T08:27:42.387

基本上，这就是你想要的：

```
if average >41:
    print(" Grade A ")
elif average >31: 
    print(" Grade B")
elif average >21:
    print(" Grade C")
elif average >11 :
    print(" Grade D")
elif average >0 
    print(" Grade E")
else
    print("You broke the system") 
```

`elif`是 的缩写`else if`，因此仅在未执行前一个`if`/`elif`块时才执行。

# delphi - 使用 TAmazonStorageService.UploadObject 时 Content-type 为“text/*”时出现 SignatureDoesNotMatch 错误

> ID：10329628
> 
> 赞同：6
> 
> 时间：2012-04-26T08:19:09.223
> 
> 标签：delphi, amazon-s3, content-type, indy, http-status-code-403

使用以下 Delphi XE2（更新 4）代码：

```
var
  ConInfo: TAmazonConnectionInfo;
  RespInfo: TCloudResponseInfo;
  Service: TAmazonStorageService;
  Content: TBytes;
  Headers: TStringList;
begin
  ConInfo:=TAmazonConnectionInfo.Create(self);
  ConInfo.AccountName:='YOUR ACCOUNT NAME';
  ConInfo.AccountKey:='YOUR ACCOUNT KEY';
  ConInfo.Protocol:='http';

  Service:=TAmazonStorageService.Create(ConInfo);
  RespInfo:=TCloudResponseInfo.Create;

  SetLength(Content, 128);
  FillMemory(@Content[0], 128, Byte('x'));

  Headers:=TStringList.Create;
  Headers.Values['Content-type']:='text/plain';
  if not Service.UploadObject('YOUR BUCKET', 'test.txt', Content, TRUE, nil, Headers, amzbaPrivate, RespInfo) then
    ShowMessage('Failed:' + RespInfo.StatusMessage); 
```

调用 UploadObject 时总是出错：

> 失败：HTTP/1.1 403 Forbidden - 我们计算的请求签名与您提供的签名不匹配。检查您的密钥和签名方法。（签名不匹配）

这仅在 Content-type 设置为 'text/plain'、'text/html' 或 text 任何内容时才会发生。使用完全相同的代码，如果您只是将内容类型更改为任何其他内容类型，例如“video/3gpp”，那么它会按预期工作且不会出错。正在上传的对象的实际内容不相关，并且与是否收到错误无关。

我已经通过 Delphi 中的 Indy 代码进行了跟踪，但我对为什么文本内容类型总是给出这个错误感到困惑。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T14:33:33.903

如果将 "; charset=ISO-8859-1" 附加到 Content-Type 字符串，则它可以工作：

```
Headers.Values['Content-type']:='text/plain; charset=ISO-8859-1'; 
```

单步执行代码，我看到 TIdEntityHeaderInfo.SetHeaders (IdHTTPHeaderInfo.pas) 中的 Content-Type 正在更改，它是从 TIdHTTPProtocol.BuildAndSendRequest (IdHTTP.pas) 调用的。

最终，问题似乎在于 TIdEntityHeaderInfo.SetContentType (IdHTTPHeaderInfo.pas) 正在将一个字符集附加到内容类型，如果它是“文本”并且它还没有。在这些情况下不应该更改内容类型，因为内容类型是要签名的字符串的一部分，因此在签名后更改它会使签名无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-03T20:25:04.750

我有同样的问题。我也使用 application/octet-stream 作为内容类型，但还是遇到了一些麻烦。后来，我发现存储桶名称必须小写（在美国标准区域，Amazon 允许使用大写或混合大小写名称定义存储桶；但是，这些存储桶无法通过 HTTP API（包括 TAmazonStorageService）访问。而不是未找到消息，我仍然收到 403 错误（未经身份验证的用户）。但是，我将名称更改为全小写，它工作正常。希望它有所帮助

# javascript - 将百分比数字转换为 marginTop 动画像素值

> ID：10329629
> 
> 赞同：1
> 
> 时间：2012-04-26T08:19:23.537
> 
> 标签：javascript, jquery, jquery-animate, percentage

我需要取一个百分比值，将其转换为像素并使用 JQuery animate 向上移动一个 div，以获得我正在尝试构建的进度条。包含需要向上移动的图形的 div 的高度为 268 像素（所以这是我们的 100%）。

例如，我将 38% 作为我需要转换为像素值的起始百分比值，并将 id 为 prog_anim 的 div 向上移动到该像素数（应该是 101 像素左右）

```
var result = 38 / 100 * 268;
function bgr_animate(result) {
    $('#prog_anim').animate({
    'marginTop' : result
    });
} 
```

然后我在执行该操作的按钮上有以下链接：

```
a href="javascript:;" onclick="bgr_animate(result)" 
```

作为一个完全的 Javascript 菜鸟，我不知道上面的语法哪里错了。有人可以在这里纠正我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:24:54.253

我看到了一些需要改进的地方。

代替硬编码 268，使用`var graphicHeight = $("#prog_anim").outerHeight();`.

您需要反转边距顶部的方向，因为您希望它向上移动。marginTop 是一种方法，但设置 CSS`position: absolute;`并使用 top 而不是 marginTop 会更好。

所以：

```
var result = -(38 / 100 * graphicHeight); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:24:24.127

试试这个：

```
function bgr_animate(percent, height) {
    var pixels = percent / 100 * height;
    $('#prog_anim').animate({
        'marginTop' : pixels
    });
} 
```

还有你的按钮；

```
<a href="javascript:;" onclick="bgr_animate(30, 268)"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:40:44.673

试试这个

```
$('#prog_anim').animate({
      height: result
      top:-=resultInc
      }, 5000, function() {
     alert("Animated");
}); 
```

其中 resultInc 是它增长的像素数

使用它，您可以向上移动并向下增加高度，给人一种向上生长的印象

# session - Session.CFID / CFTOKEN VS Client.CFID / CFTOKEN

> ID：10329638
> 
> 赞同：2
> 
> 时间：2012-04-26T08:20:13.440
> 
> 标签：session, coldfusion

例如，我们的应用程序使用客户端变量管理来唯一标识网站访问者，并最终将其存储为电子商务订单的 ID。

我们的客户订单表将“10000032:98517605:77134665”(cfid+cftoken) 等字符串保存为其唯一 ID。

现在我们需要摆脱客户端变量，因此我们的代码中不再有“CLIENT.cfid”。

我想到的第一件事就是简单地将其替换为“SESSION.cfid”和“SESSION.cftoken”。但最大的疑问是：

生成的 id 和 token 对现有的仍然是唯一的吗？进行这样的更改是否有可能导致重新生成“10000032:98517605:77134665”？

考虑到现有的，我如何制作唯一的访客 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T12:43:57.657

我会设置一个新的会话值`onSessionStart`，你可以保证它是唯一的。所以在`onSessionStart`Application.cfc的方法中，可以设置如下：

```
<cfset Session.CustomerID = CreateUUID() /> 
```

这样，当会话开始时，一个 UUID（保证是唯一的）将被放入会话范围内。然后，您可以根据需要使用它。如果这需要持久化，您也可以将其写入 cookie（因为会话不会像客户端变量那样长期持久化）。

# ruby - 为什么不调用存根方法？

> ID：10329644
> 
> 赞同：0
> 
> 时间：2012-04-26T08:21:09.493
> 
> 标签：ruby, testing, rspec, stub

好像我理解错了什么。我有一堂课

```
module Spree
  class OmnikassaPaymentResponse
    #...
    # Finds a payment with provided parameters trough ActiveRecord.
    def payment(state = :processing)
      Spree::Payment.find(:first, :conditions => { :amount => @amount, :order_id => @order_id, :state => state } ) || raise(ActiveRecord::RecordNotFound)
    end
  end
end 
```

在 Rspec 中指定：

```
describe "#payment" do
  it 'should try to find a Spree::Payment' do
    Spree::Payment.any_instance.stub(:find).and_return(Spree::Payment.new)
    Spree::Payment.any_instance.should_receive(:find)
    Spree::OmnikassaPaymentResponse.new(@seal, @data).payment
  end
end 
```

然而，这总是抛出`ActiveRecord::RecordNotFound`. 我希望`any_instance.stub(:find).and_return()`确保无论何时，无论我`#find`在什么地方调用一个 Spree::Payment 实例，它都会返回一些东西。

换句话说：我希望 the`stub.and_return`会避免到达`|| raise(ActiveRecord::RecordNotFound)`. 但事实并非如此。

我的假设是错误的吗，我的代码？还有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:24:04.410

在您的情况下`find`，不是实例方法，而是`Spree::Payment`. 这意味着你应该直接存根它而不是`any_instance`这样：

```
Spree::Payment.stub(:find).and_return(Spree::Payment.new) 
```

# android - 如何以编程方式/动态更改 TabHost 的标签

> ID：10329647
> 
> 赞同：2
> 
> 时间：2012-04-26T08:21:15.050
> 
> 标签：android, android-tabhost

我有一个由

```
 this.tabHost = getTabHost();

     // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    // Create an Intent to launch the first Activity for the tab (to be reused)
    intent = new Intent().setClass(this, FirstGroup.class);

    // Initialize a TabSpec for the first tab and add it to the TabHost
    spec1 = tabHost.newTabSpec("FirstGroup").setIndicator("Regionlar",
            getResources().getDrawable(R.drawable.region2)) // Replace null with R.drawable.your_icon to set tab icon
                    .setContent(intent);
    tabHost.addTab(spec1); 
```

我想以编程方式更改tabhost的标签：“Regionlar”到“newMenuTabbar”。我找不到任何例子。感谢关注。

编辑：我想将第二个tabitem的标签从“Mənzərələr”=>“secondTabitem”更改

意图 = new Intent().setClass(this, FirstGroup.class);

```
 // Initialize a TabSpec for the first tab and add it to the TabHost
    spec1 = tabHost.newTabSpec("FirstGroup").setIndicator("Regionlar",
            getResources().getDrawable(R.drawable.region2)) // Replace null with R.drawable.your_icon to set tab icon
                    .setContent(intent);
    tabHost.addTab(spec1);

        // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, SecondActivityGroup.class);
    spec2 = tabHost.newTabSpec("SecondActivityGroup").setIndicator("Mənzərələr",
            getResources().getDrawable(R.drawable.img_gallery_icon)) // Replace null with R.drawable.your_icon to set tab icon
                    .setContent(intent);
    tabHost.addTab(spec2); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T08:25:32.560

试试这个：

```
final TextView label = (TextView) tabHost.getTabWidget().findViewById(android.R.id.title);
label .setText(YOUR NEW LABEL); 
```

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-10T07:43:02.600

bi 的代码只能更改第一个选项卡的标题。我认为这是完成工作的更直接的方法：

```
((TextView) mTabHost.getTabWidget().getChildTabViewAt(position)
.findViewById(android.R.id.title))
.setText(yourTitle); 
```

where`position`是选项卡的位置，`yourTitle`是您希望为选项卡设置的标题。如果要更改当前选项卡的文本，则可以替换`position`为，而不是替换 为`getCurrentTab``getTabWidget().getChildTabViewAt(position)``getCurrentTabView()`

写这个的人应该定义了一个`setTabText(int position, String text)`方法，否则谁会知道他们有一个文本视图 id'ed `android.R.id.title`？或者如果他们已经有了，请赐教。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:29:31.270

试试这个代码

```
public class SlideMainActivity extends TabActivity {
    public static RelativeLayout headerLayout;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.main_silde_tab);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE,
                R.layout.hd_header);
        setTabs();
    }

    private void setTabs() {
        addTab("FirstGroup", R.drawable.tab_home, FirstGroup.class);
        addTab("Regionlar", R.drawable.tab_search, Regionlar.class);

    }

    private void addTab(String labelId, int drawableId, Class<?> c) {
        TabHost tabHost = getTabHost();
        Intent intent = new Intent(this, c);
        TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId);

        View tabIndicator = LayoutInflater.from(this).inflate(
                R.layout.tab_indicator, getTabWidget(), false);
        TextView title = (TextView) tabIndicator.findViewById(R.id.title);
        title.setText(labelId);
        ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
        icon.setImageResource(drawableId);

        spec.setIndicator(tabIndicator);
        spec.setContent(intent);
        tabHost.addTab(spec);
    }

} 
```

# android - Android GUI 在运行时更新

> ID：10329653
> 
> 赞同：1
> 
> 时间：2012-04-26T08:21:31.633
> 
> 标签：android, user-interface, runtime

我有一个从 Java 层调用并成功调用的本机方法。native方法在不同的时间向java层发送两个整数值，这些值在java层接收成功（来回数据传输成功）。我的问题是：在 android GUI 中，我采用这两个值并使用在 java 层接收到的数据更新文本框（textview）。如果我打印数据（system.out.println(..).... 或 Log.e(..)），可以在日志中看到数据。但是 'textbox.settext(..) 不会更新文本框，即使它是以字符串格式打印的。

如何在 Android GUI 层中更新这些值？我尝试使用线程、处理程序和 postinvalidate() 方法，但似乎没有任何效果。

谁能告诉我如何在运行时更新 gui？更新或刷新的任何技巧？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:26:55.243

听起来您使用“myTextView.setText("new");" 但你不在ui线程中。尝试

```
runOnUiThread(new Thread()
    {
        public void run()
        {
            //update your view here
        }
    }); 
```

再看看： [Android更新UI](https://stackoverflow.com/questions/5683164/android-update-ui)

# plone - Plone.app.Discussion ：订阅新评论时不通知新条目

> ID：10329656
> 
> 赞同：2
> 
> 时间：2012-04-26T08:21:43.920
> 
> 标签：plone

Plone 4.1.4 上的 plone.app.discussion 2.1.3 似乎有问题。

第一条评论被顺利转移，评论审阅者收到有关评论的邮件。但是，如果我们选中该框以启用对文档的新评论的通知，则后续评论只会向审阅者发出消息，而不是新评论的订阅者。

我们看到有一些关于 plone.app.discussion 的错误报告，但这与这个问题无关。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:15:01.823

这似乎是 plone.app.discussion 中的一个错误。请在 plone.org 问题跟踪器中提交错误报告，描述重现问题的确切步骤：

[https://dev.plone.org/newticket](https://dev.plone.org/newticket)

# maven - Hive UDF 依赖关系坏了？

> ID：10329657
> 
> 赞同：1
> 
> 时间：2012-04-26T08:21:50.463
> 
> 标签：maven, hadoop, hive

我正在尝试将 hive-exec jar 作为对我的项目的依赖项，以便我可以创建自定义 UDF。maven 工件[http://mvnrepository.com/artifact/org.apache.hive/hive-exec/0.8.1](http://mvnrepository.com/artifact/org.apache.hive/hive-exec/0.8.1)依赖于 [http://mvnrepository.com/artifact/org.apache.hive/hive-metastore/ 0.8.1](http://mvnrepository.com/artifact/org.apache.hive/hive-metastore/0.8.1)又依赖于 jd2-api 版本 2.3-ec。但是[http://mvnrepository.com/artifact/javax.jdo/jdo2-api](http://mvnrepository.com/artifact/javax.jdo/jdo2-api)没有 2.3-ec。

我怎样才能过去呢？

# android - Android OpenGL - 形状透明度（纹理中没有）

> ID：10329662
> 
> 赞同：0
> 
> 时间：2012-04-26T08:22:16.103
> 
> 标签：android, opengl-es

这是我的第一个问题...

我有一个带有纹理（.png）的正方形（三角形条）。这个 .png 有光滑的角落，就像一张扑克牌。四个末端（角）是透明的。

绘制正方形时，在角落里，我看到了形状的白色。（就像纹理背后的背景）我的问题是：

如何为形状绘制透明颜色，但使用完整的 apha 保持纹理的颜色？

（如果我设置透明颜色......那么纹理也会变得透明）

我怎样才能分开这两个上下文？

在此先感谢.. 抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:34:54.210

首先，您必须使用带有 Alpha 通道的纹理格式。

然后，如果您使用的是固定功能管道，则必须启用混合。
glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);
glEnable(GL_BLEND);

如果您没有使用固定功能管道，请分享片段着色器代码；以及有关您如何使用它的更多详细信息。

# java - Jython，我应该把我的 .py 文件放在哪里

> ID：10329667
> 
> 赞同：3
> 
> 时间：2012-04-26T08:22:44.940
> 
> 标签：java, python, path, jython

我对 Java/Eclipse 真的很陌生，我正在尝试做这个[Jython 教程](http://wiki.python.org/jython/JythonMonthly/Articles/September2006/1)。

我不明白应该将我的 python 文件放在 IDE 的树目录结构中的什么位置。我尝试将文件放置在多个位置但没有成功（我一定遗漏了一些东西）。这是我收到的错误消息：

```
<module 'sys' (built-in)>
Exception in thread "main" Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named Employee 
```

我本教程的树目录结构如下：

```
JythonTest
---src
------jyinterface
---------factory
------------EmployeeFactory.java
------------Employee.py
---------interfaces
------------EmployeeType.java
------------Employee.py
---------Main.java
---------Employee.py
---Employee.py
---lib
------jython-2.5.2.jar
------Employee.py 
```

* * *

***编辑***：所以我部分地回答自己，对于第一部分，我发现[这个链接](http://www.rexx.com/~dkuhlman/jython_course_03.html#example-a-possible-organization-on-disk)解释了同样的情况，它有效！

* * *

剩下的问题是，我将如何处理我未来的 python 库的导入路径，有什么技巧吗？看来我将不得不使用类似的东西：

```
PySystemState sys = Py.getSystemState();
sys.path.append(new PyString("isItHereThatIShouldPointToJython-2.5.2.jar???")); 
```

有没有办法设置相对路径或安装独立的东西？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-18T16:40:44.220

> 运行：线程“main” Traceback 中的异常（最近一次调用最后一次）：文件“”，第 1 行，在 ImportError 中：没有名为 Employee C:\Users\A\AppData\Local\NetBeans\Cache\8.1\executor-snippets 的模块\run.xml:53：Java 返回：1 BUILD FAILED（总时间：2 秒）

当我遇到这个问题时，我尝试了两件事。由于 cmd 错误，我停止使用独立 jar。然后在尝试此代码时

```
https://wiki.python.org/jython/JythonMonthly/Articles/October2006/3
```

我没有将 Employee.py 放在 jyinterface.interfaces 包中，而是将它自由浮动地放在 src 文件夹中。（我正在使用带有 py 插件的 Netbeans）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-09T10:16:13.817

如果您正在使用 Eclipse，我建议您查看[PyDev](http://pydev.org/)插件。我们将它广泛用于复杂环境中的 Jython 开发，它会为我们处理一切，包括 .py 文件的放置位置或构建包的位置。

# python - Tornado - 安装瓶应用程序

> ID：10329668
> 
> 赞同：0
> 
> 时间：2012-04-26T08:22:45.113
> 
> 标签：python, websocket, wsgi, tornado, bottle

你如何在 Tornado 服务器中安装 Bottle 应用程序？ [这是我的代码](https://gist.github.com/2497341)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T20:02:08.570

`bottle.default_app()`返回一个 WSGI 可调用对象：

```
if __name__ == "__main__":
    bottle_app = bottle.default_app()
    bottle_handler = tornado.wsgi.WSGIContainer(bottle_app)
    HTTPServer(Application([(r"/ws", WSHandler),
                            (r"/css/(.*)", StaticFileHandler, {"path": "./css/"}),
                            (r"/js/(.*)", StaticFileHandler, {"path": "./js/"}),
                            (r"/img/(.*)", StaticFileHandler, {"path": "./img/"}),
                            ("/(.*)", bottle_handler)])
                         ).listen(1024)
    IOLoop.instance().start() 
```

# java - GridView.LayoutParams 在不同的屏幕尺寸下是一样的，有可能吗？

> ID：10329673
> 
> 赞同：1
> 
> 时间：2012-04-26T08:23:18.310
> 
> 标签：java, android, image, gridview, layoutparams

我制作了一个 6 列 60 行的网格视图。我可以在其中添加、移动和删除图像。但是我无法设置列之间的距离（我不希望列之间有任何空间）。因为它会根据屏幕大小而改变。我为我的手机设置了它，然后在朋友的手机上尝试了它，列之间的距离约为 10dp。继承 GridView**编辑的 xml：如果我在较小的手机中尝试它，图像在哪里适合单元格。**

```
<GridView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/image_grid_view"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:numColumns="@integer/num_columns"
            android:stretchMode="columnWidth" /> 
```

这是布局的java代码

```
ImageCell v = null;
if (convertView == null) {
    v = new ImageCell (mContext);
    v.setLayoutParams(new GridView.LayoutParams(80, 80));
    v.setScaleType(ImageView.ScaleType.CENTER_CROP );

} else {
    v = (ImageCell) convertView;
} 
```

我尝试将 v.setLayoutParams... 更改为

```
v.setLayoutParams(new GridView.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT )); 
```

和

```
v.setLayoutParams(new GridView.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

但这两个使 GridView 无法使用。如果有人知道我做错了什么，请告诉我，如果有人需要其他东西也可以要求（我不能发布截图）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-08T17:23:26.277

我遇到了类似的问题，我使用了另一种方法与 getDisplayMetrics。

```
DisplayMetrics metrics = this.getResources().getDisplayMetrics();
int screenWidth = metrics.widthPixels; 
```

并在列数之间进行划分。

```
v.setLayoutParams(new GridView.LayoutParams(screenWidth/2, screenWidth/2));
v.setPadding(8, 8, 8, 8); 
```

它不是那么优雅，但它很容易。:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T08:31:02.907

问题是您正在硬编码单元格的宽度和高度。

这使得所有手机上的单元格都为 80 像素宽。如果手机有更大的分辨率（真实像素变小），你的视野会更小。如果您真的想在 Java 中而不是在 xml 中创建整个视图，请至少从资源文件中加载单元格的[维度](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)。这将使您能够将值保存在与密度无关的像素中，并让手机将值调整为与实际屏幕分辨率相匹配的值。

阅读文档中[支持多个屏幕](http://developer.android.com/guide/practices/screens_support.html)的部分，以更深入地了解这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T08:35:11.533

除了 Janusz 的评论，您可能需要将您的设置`stretchMode`为，`none`以便 Android 不会自动拉伸任何东西。此外，如果您不需要列之间有任何间距，则设置`horizontalSpacing`为 0。您最终可能会得到以下 XML：

```
<GridView
        ...
        android:stretchMode="none"
        android:horizontalSpacing="0dp"
</GridView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T08:36:03.710

请参阅 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

如果您的图形在小型手机上太大，请使用额外的可绘制目录，例如 drawable-mdpi 或 sth。你也应该`android:stretchMode="none"`在你的gridview（xml）中尝试。

# java - 如何用 Java 定义一个有序栈

> ID：10329675
> 
> 赞同：0
> 
> 时间：2012-04-26T08:23:21.687
> 
> 标签：java, stack, heap, priority-queue

我有一个关于堆栈的问题。通常，我会以最简单的方式定义 push 方法，例如

```
 Int size;
 public void push(int value){
    elements[size++] = value;} 
```

如果我想以递增顺序推送整数并以递减顺序调用 pop 方法，我如何在同一个推送方法中定义此方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:29:08.203

**您在Stack**中没有**分类**设施。**更好的方法是，在将数据推**入堆栈 之前按升序对数据进行排序。在从堆栈中弹出数据时，您将按降序获取数据。

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:27:35.680

它不保持堆栈尝试[排序列表](https://stackoverflow.com/questions/4324097/sorted-list-in-java)

并获取第一个元素并在弹出期间将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:28:05.787

使用排序集合而不是普通数组来存储数据。[您可以在此处](https://stackoverflow.com/questions/416266/sorted-collection-in-java)找到有关创建排序列表的建议。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-26T08:27:54.563

堆栈通常是 LIFO 数据结构。如果您正在寻找一些有序集合，请查看[SortedSet](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)。****

# c# - 如何拆分数组中的元素并将其作为新数组返回

> ID：10329677
> 
> 赞同：1
> 
> 时间：2012-04-26T08:23:25.697
> 
> 标签：c#, asp.net, arrays, linq

我有一个以下格式的字符串数组。

```
string[] sports = { "Cricket" ,  "Football"  ,"Boxing/Tennis " , "Soccer"} ; 
```

是否有任何内置方式在 C# 中或使用 LINQ 在数组中拆分字符串并返回新数组，如

```
string[] sportsNewArray = { "Cricket" ,  "Football"  ,"Boxing" , "Tenis " , "Soccer"} ; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T08:24:45.673

```
string[] sportsNewArray = sports.SelectMany(s=>s.Split('/')).ToArray(); 
```

# jquery - django中日期字段的验证错误

> ID：10329678
> 
> 赞同：0
> 
> 时间：2012-04-26T08:23:29.130
> 
> 标签：jquery, django, datepicker

我使用 jQuery datepicker 来选择日期。

在模板的脚本标签内。

```
$(function() {
    $( "#id_birthday" ).datepicker({
        changeMonth: true,
        changeYear: true
    });
    $('#id_birthday').datepicker({ dateFormat: 'yyyy-mm-dd' });
}); 
```

在模板的表单标签内。

```
{{ form.birthday }} 
```

在我的models.py里面

```
class UserProfiles(models.Model):
    birthday = models.DateField() 
```

在我的 forms.py 里面

```
class UserProfileForm(ModelForm):
    birthday = forms.DateField(widget=forms.DateInput(format = '%Y-%m-%d'), input_formats=('%Y-%m-%d',))

    class Meta:
        model = UserProfiles
        fields = ('email', 'location', 'birthday', 'name') 
```

我越来越

> ValidationError [u'以 YYYY-MM-DD 格式输入有效日期。']

此外，当我使用选择器选择日期时，它会显示为 mm/dd/yyyy。我的 jQuery 代码也错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:46:36.703

这已经解决了。问题出在 Java 脚本代码上。

```
$(function() {
    $( "#id_birthday" ).datepicker({
        dateFormat: 'yy-mm-dd',
        changeMonth: true,
        changeYear: true
    });
}); 
```

解决了这个问题。

# ios - 创建一些音频过程，如 Voice Changer 或 iZotope 框架

> ID：10329680
> 
> 赞同：0
> 
> 时间：2012-04-26T08:23:41.877
> 
> 标签：ios, core-audio, openal

我正在iOS上进行音频过滤工作。

安静的艰难。

我想让“对象”包括使用现有音频制作音频 DSP 的 AudioSession。

所以，我在笔记上做了一些 DSP 过滤器，但是，

我不知道如何将现有的音频文件带到会话中

以及如何对其应用过滤器。

您的每一个提示都将被授予。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:17:03.370

要过滤麦克风输入，请查看 Apple 的文档和有关音频队列和音频单元 API 的示例应用程序。

# html - 如何在 HTML 网页的列表菜单中添加下拉菜单

> ID：10329681
> 
> 赞同：-2
> 
> 时间：2012-04-26T08:23:48.647
> 
> 标签：html, css

我有网页我想在参考按钮上添加下拉菜单我正在使用以下 css 代码我想要这个网站给定模板我是 css 新手请帮忙

[http://www.psdgraphics.com/templates/black-horizo​​ntal-html-and-css-dropdown-menu/](http://www.psdgraphics.com/templates/black-horizontal-html-and-css-dropdown-menu/)

## 这是 CSS 文件

```
 .menu {
float:right;
margin: 39px 18px 0 0;
height:47px;
background-repeat:no-repeat;
   }

    .menu ul li {
list-style:none;
float:left;
    }

   menu.sub-menu {
visibility: hidden;
position: absolute;
padding:10px;
top: 48px;
left: 0;
z-index: 598;
background: #353535 url(images/dropdown-list-bg.gif) repeat-x left top;
border-right: 1px solid #000;
border-bottom: 1px solid #000;
border-left: 1px solid #000;
 }

    .menu ul li a {
text-decoration:none;
display:block;
    }

    .menu .active {
text-decoration:none;
background-image:url();
    }

   .menu .stix {
width:2px;
font-size:0px;
background-image:url(image/seperator.gif);
background-repeat:no-repeat;
padding:0;
height:47px;
    } 
```

下面是我的 HTML 代码

```
<div class="menu">
    <ul>
        <li class="stix"></li>
        <li><a href="#page_one"><img src="image/overview_active.png" /></a></li>
        <li class="stix"></li>
        <li><a href="#page_two"><img src="image/strategy.gif"/></a></li>
        <li class="stix"></li>
        <li><a href="#"><img src="image/draxxin.gif"/></a></li> 
        <li class="stix"></li>
        <li><a href="#"><img src="image/excede.gif"/></a></li>
        <li class="stix"></li>
        <li><a href="#"><img src="image/results.gif"/></a></li>
        <li class="stix"></li>
        <li><a href="#"><img src="image/reference.gif"/></a></li> 
        <li class="sub-menu">DRAXXIN</li>
        <li class="stix"></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:58:35.653

**HTML**

```
<div id="wrapper">
    <div id="navMenu">
    <ul style="height: 30px; width: 308px">
    <li id="wrapper1" style="left: 0px; top: 0px; width: 150px; height: 31px"><a style="color:black" href="#">Products</a>
    <ul>
    <li id="wrapper3"><a href="#">Link 1</a></li>
    <li><a href="#">Link 2</a></li>
    <li><a href="#">Link 3</a></li>
    <li><a href="#">Link 4</a></li>
    <li><a href="#">Link 5</a></li>
    <li><a href="#">Link 6</a></li>
    </ul>
    </li>
    <li id="wrapper4"><a style="color:black" href="#">Products</a>
    <ul>
    <li id="wrapper3"><a href="#">Link 1</a></li>
    <li><a href="#">Link 2</a></li>
    <li><a href="#">Link 3</a></li>
    <li><a href="#">Link 4</a></li>
    <li><a href="#">Link 5</a></li>
    <li><a href="#">Link 6</a></li>
    </ul>
    </li>
    </ul>
    </div>
    </div> 
```

**CSS**

```
#navMenu{
    margin:0;
    padding:0;
}
#navMenu ul{
    margin:0;
    padding:0;
    line-height:30px;
}
#navMenu li{
    margin:0;
    padding:0;
    list-style:none;
    float:left;
    position:relative;
    background:#3A4956;
}
#navMenu ul li a{
    text-align:center;
    color:black;
    text-decoration:none;
    font-family:"Comic Sans MS";
    height:30px;
    width:150px;
    display:block;
    border-bottom:1px black solid;
}
#navMenu ul li a:hover{
    color:white;
}
#navMenu ul ul{
    position:absolute;
    visibility:hidden;
} 
#navMenu ul li:hover ul{
    visibility:visible
}
#wrapper1{
    border-radius:8px 0 0 0;
    border-right:1px black solid

}
#wrapper4{
    border-radius:0 8px 0 0;
} 
```

# ios - IOS：AVAudioPlayer 出现奇怪的错误

> ID：10329689
> 
> 赞同：0
> 
> 时间：2012-04-26T08:24:29.277
> 
> 标签：ios, xcode, crash, avaudioplayer

在我的应用程序中，我使用 AVAudioPlayer 播放音频；一切都好，它可以正常工作几分钟，但在某些时候它会崩溃，这是我的代码和控制台输出，但我不明白如何解决我的问题......

我有这个代码：

```
- (void) viewDidLoad{
    [super viewDidLoad];

    soundID = [[AVAudioPlayer alloc]init];
}

- (void)playAudioReturnLettera{
    NSString *path = [NSString stringWithFormat:@"%@/%@",
                      [[NSBundle mainBundle] resourcePath],
                      @"returnObject.mp3"];
    NSURL *filePath = [NSURL fileURLWithPath:path isDirectory:NO];
    [soundID initWithContentsOfURL:filePath error:nil];
    soundID.delegate = self; //<-- here I have the problem (Thread 1)
    [soundID prepareToPlay]; 
    [soundID play];

} 
```

这是控制台中的输出：

```
10:13:07.639 <0x3fbdad98> shm_open failed: "AppleAudioQueue.100.778" (23) flags=0x2 errno=24

2012-04-26 10:13:07.643 Game[155:418b] 10:13:07.643 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.779" (23) flags=0x2 errno=24

2012-04-26 10:13:07.655 Game[155:418f] 10:13:07.655 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.780" (23) flags=0x2 errno=24

2012-04-26 10:13:07.664 Game[155:4193] 10:13:07.664 <0x2fffd000> shm_open failed: 
"AppleAudioQueue.100.781" (23) flags=0x2 errno=24

2012-04-26 10:13:07.680 Game[155:4197] 10:13:07.680 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.782" (23) flags=0x2 errno=24

2012-04-26 10:13:07.696 Game[155:419b] 10:13:07.696 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.783" (23) flags=0x2 errno=24

2012-04-26 10:13:07.711 Game[155:419f] 10:13:07.711 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.784" (23) flags=0x2 errno=24

2012-04-26 10:13:07.727 Game[155:41a3] 10:13:07.727 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.785" (23) flags=0x2 errno=24

2012-04-26 10:13:07.744 Game[155:41a7] 10:13:07.744 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.786" (23) flags=0x2 errno=24

2012-04-26 10:13:07.759 Game[155:41ab] 10:13:07.759 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.787" (23) flags=0x2 errno=24

2012-04-26 10:13:07.775 Game[155:41af] 10:13:07.775 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.788" (23) flags=0x2 errno=24

2012-04-26 10:13:07.792 Game[155:41b3] 10:13:07.793 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.789" (23) flags=0x2 errno=24

2012-04-26 10:13:07.807 Game[155:41b7] 10:13:07.807 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.790" (23) flags=0x2 errno=24

2012-04-26 10:13:07.823 Game[155:41bb] 10:13:07.823 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.791" (23) flags=0x2 errno=24

2012-04-26 10:13:07.840 Game[155:41bf] 10:13:07.841 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.792" (23) flags=0x2 errno=24

2012-04-26 10:13:07.857 Game[155:41c3] 10:13:07.857 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.793" (23) flags=0x2 errno=24

2012-04-26 10:13:07.873 Game[155:41c7] 10:13:07.873 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.794" (23) flags=0x2 errno=24

2012-04-26 10:13:07.890 Game[155:41cb] 10:13:07.890 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.795" (23) flags=0x2 errno=24

2012-04-26 10:13:07.905 Game[155:41cf] 10:13:07.906 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.796" (23) flags=0x2 errno=24

2012-04-26 10:13:07.921 Game[155:41d3] 10:13:07.921 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.797" (23) flags=0x2 errno=24

2012-04-26 10:13:07.938 Game[155:41d7] 10:13:07.938 <0x2fffd000> shm_open failed: "AppleAudioQueue.100.798" (23) flags=0x2 errno=24

2012-04-26 10:13:10.478 Game[155:707] *** -[AVAudioPlayer setDelegate:]: message sent to deallocated instance 0x546bb50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:02:43.373

`initWithContentsOfURL:error:`您正在对已初始化的对象 ( )调用初始化方法 ( )，`soundID`而不存储该方法返回的对象。

将分配和初始化保持在一起（并且只初始化一次）是一个好主意，因此您的代码应如下所示：

```
- (void) viewDidLoad{

    [super viewDidLoad];

    NSString *path = [NSString stringWithFormat:@"%@/%@",
                     [[NSBundle mainBundle] resourcePath],
                     @"returnObject.mp3"];
    NSURL *filePath = [NSURL fileURLWithPath:path isDirectory:NO];
    soundID = [[AVAudioPlayer alloc] initWithContentsOfURL:filePath error:nil];
    soundID.delegate = self;
}

- (void)playAudioReturnLettera{
    [soundID prepareToPlay]; 
    [soundID play];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:41:17.593

试试这个代码..这对你有用。不要忘记添加`AVAudioPlayerDelegate`您的 .h 文件。

```
- (void) viewDidLoad{

    [super viewDidLoad];

}

- (void)playAudioReturnLettera{
    NSString *path = [NSString stringWithFormat:@"%@/%@",
                     [[NSBundle mainBundle] resourcePath],
                     @"returnObject.mp3"];
    NSURL *filePath = [NSURL fileURLWithPath:path];
    soundID = [[AVAudioPlayer alloc] initWithContentsOfURL:filePath error:nil];
    soundID.delegate = self;
    [soundID play];
}
-(void)audioPlayerDidFinishPlaying: (AVAudioPlayer *)player successfully:(BOOL)flag{
    NSLog(@"Audio Player Successfully played");
}

-(void)audioPlayerDecodeErrorDidOccur:(AVAudioPlayer *)player error:(NSError *)error{

    NSLog(@"Decode Error occurred");
} 
```

# gwt - 无法使用智能 GWT

> ID：10329691
> 
> 赞同：0
> 
> 时间：2012-04-26T08:24:30.097
> 
> 标签：gwt, smartgwt, gwt2

尝试使用智能 GWT

使用从以下链接下载的 smart gwt 2.5

[智能网关 2.5](http://code.google.com/p/smartgwt/downloads/list)

火狐 6.0

我制作了一个运行良好的小型 Web 应用程序项目（**没有智能 GWT**）。

现在在*同一个项目中，我*添加了 smartGwt 2.5* 并添加`<inherits name="com.smartgwt.SmartGwt"/>` 到`myprojet.gwt.xml`文件中。

但是现在当我运行该项目时，它给了我以下错误：

```
[ERROR] [myprojet] - Unable to load module entry point class 
com.smartgwt.client.SmartGwtEntryPoint (see associated exception for details)

com.google.gwt.core.client.JavaScriptException: (TypeError): $wnd.isc is undefined
at com.google.gwt.dev.shell.BrowserChannelServer.invo keJavascript(BrowserChannelServer.java:248)
at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke (ModuleSpaceOOPHM.java:136)
at com.google.gwt.dev.shell.ModuleSpace.invokeNative( ModuleSpace.java:561)
at com.google.gwt.dev.shell.ModuleSpace.invokeNativeV oid(ModuleSpace.java:289)
at com.google.gwt.dev.shell.JavaScriptHost.invokeNati veVoid(JavaScriptHost.java:107)
at com.smartgwt.client.SmartGwtEntryPoint.init(SmartG wtEntryPoint.java)
at com.smartgwt.client.SmartGwtEntryPoint.onModuleLoa d(SmartGwtEntryPoint.java:239)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Nativ e Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Native MethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(De legatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.gwt.dev.shell.ModuleSpace.onLoad(Module Space.java:396)
at com.google.gwt.dev.shell.OophmSessionHandler.loadM odule(OophmSessionHandler.java:200)
at com.google.gwt.dev.shell.BrowserChannelServer.proc essConnection(BrowserChannelServer.java:525)
at com.google.gwt.dev.shell.BrowserChannelServer.run( BrowserChannelServer.java:363)
at java.lang.Thread.run(Thread.java:662) 
```

当我`<inherits name="com.smartgwt.SmartGwt"/>` 从`myprojet.gwt.xml file`项目中删除时工作正常

* * *

XML

```
<inherits name='com.google.gwt.user.User' />

<inherits name='com.google.gwt.user.theme.clean.Clean' />

<!-- Other module inherits -->

<inherits name="com.smartgwt.SmartGwt"/>
<!-- Specify the app entry point class. -->
<entry-point class='com.example.client.MyProjet' />

<!-- Specify the paths for translatable code -->
<source path='client' />
<source path='shared' /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T10:59:51.030

你的`gwt.xml`似乎是正确的。

GWT 编译和清理浏览器缓存应该可以工作。

# php - 使用 Javascript 编辑和保存用户 HTML - 它有多安全？

> ID：10329698
> 
> 赞同：5
> 
> 时间：2012-04-26T08:25:00.230
> 
> 标签：php, javascript, jquery, html, ajax

例如，我有一个**Javascript 驱动的表单创建**工具。您使用链接添加元素的 html 块（如输入字段）和 TinyMCE 来编辑文本。这些是通过自动保存功能保存的，该功能在特定事件的后台执行 AJAX 调用。

被调用的保存函数执行数据库保护，但我想知道用户是否可以操纵 DOM 以添加他想要的任何内容（如自定义 HTML 或不需要的脚本）。

**如果有的话，**这有多安全？****

 ***首先想到的是我可能应该从收到的 html 代码中搜索并删除任何内联 javascript。*

使用 PHP、JQuery、Ajax。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T08:28:18.480

一点都不安全。你**永远不能相信客户**。即使是新手也很容易在客户端修改 DOM（例如，只需为 Firefox 安装 Firebug）。

虽然可以接受来自客户端的 HTML，但请确保您在服务器端使用 PHP 正确验证和清理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:28:20.040

您是否将完整的 inline-html 保存在数据库中？如果是这样，请尝试重新制作所有内容，仅将必要的数据保存到您的后端。**如果以预期的方式接收所有**字段，则还应控制它们。

所有 inline-js 都可以轻松删除。

你**永远不能**相信用户！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T08:29:28.323

绝对不安全，除非您当然采取措施使其安全。StackOverflow 允许某些标签被过滤，这样用户就不能做恶意的事情。你肯定需要做类似的事情。

我会选择清理输入服务器端，以便每个人都能清理他们的输入，无论他们是否阻止了脚本。使用类似这样的东西：[http](http://www.phpclasses.org/package/3746-PHP-Remove-unsafe-tags-and-attributes-from-HTML-code.html) ://www.phpclasses.org/package/3746-PHP-Remove-unsafe-tags-and-attributes-from-HTML-code.html或[http://grom.zeminvaders.net/html - 使用AJAX](http://grom.zeminvaders.net/html-sanitizer)实现的消毒器将是一个很好的解决方案**

# map - 如何使用 OpenLayers 在 OSM 上覆盖 GeoJSON？

> ID：10329699
> 
> 赞同：1
> 
> 时间：2012-04-26T08:25:03.240
> 
> 标签：map, openlayers, geo, openstreetmap

我正在尝试创建一张地图。我使用 OSM 作为基础层，现在我试图将我的道路网络覆盖为 GeoJSON。我的代码中没有错误（由 Firebug 检查）。我可以查看漂亮的 OSM 地图，但问题是我的 OSM 地图上没有任何道路网络。我不知道我做了什么。贝娄，我已经给出了我的代码。

我使用以下命令从我的控制台创建 GeoJSON。我正在使用 OSGeo Live (Ubuntu)。

```
$ ogr2ogr -f "GeoJSON" roads.json roads.shp roads 
```

JavaScript 代码----

```
//OSM Layer-----------------------------------------------
var map = new OpenLayers.Map('map');
var layer = new OpenLayers.Layer.OSM( "Simple OSM Map");
map.addLayer(layer);

//GeoJSON Layer-------------------------------------------
var vector_format = new OpenLayers.Format.GeoJSON({}); 
var vector_protocol = new OpenLayers.Protocol.HTTP({
    url: 'ml/roads.json',
    format: vector_format
});
var vector_strategies = [new OpenLayers.Strategy.Fixed()];
var vector_layer = new OpenLayers.Layer.Vector('More Advanced Vector Layer',{
    protocol: vector_protocol,
    strategies: vector_strategies 
});

map.addLayer(vector_layer);

//Projection-----------------------------------------------
map.setCenter(
    new OpenLayers.LonLat(18.068611, 59.329444).transform(
        new OpenLayers.Projection("EPSG:4326"),
            map.getProjectionObject()
    ), 10
); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:19:43.603

你的 GeoJSON 在`EPSG:900913`吗？您应该尝试在地图构造函数中明确设置地图的投影。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T12:44:03.573

我认为您的问题是预测之一。您可以使用 OGRINFO 获取有关 road.shp 文件的数据，但听起来最简单的方法可能是让 OGR2OGR 使用球形墨卡托投影。您可以通过使用 -t 开关运行 OGR2OGR 来做到这一点。这应该看起来像

```
$ ogr2ogr -f "GeoJSON" roads.json roads.shp roads -t_srs EPSG:900913 
```

然后确保您的地图使用的是球形墨卡托投影

```
var map = new OpenLayers.Map('map', 
            {projection: new OpenLayers.Projection("EPSG:3857"),
                sphericalMercator: true }); 
```

这可能是使用相同 GCS 将所有内容与 OSM 集成的最简单方法，EPSG900913 和 EPSG:3857 应该是同义词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:42:51.787

首先，您可以尝试使用添加到地图后设置图层的可见性`layer.setVisibility(true)`

`ml/road.json`其次，如果请求完成并且您获得了正在查找的地图部分的数据，您应该使用 firebug进行查看。

然后你可能想刷新图层，这是我在一个 pas 项目中使用的： `layer.refresh({force:true});`

最后，您可以尝试将图层直接放入 Map 构造函数中：

```
//OSM Layer-----------------------------------------------
var layer = new OpenLayers.Layer.OSM( "Simple OSM Map");

//GeoJSON Layer-------------------------------------------
var vector_format = new OpenLayers.Format.GeoJSON({}); 
var vector_protocol = new OpenLayers.Protocol.HTTP({
    url: 'ml/roads.json',
    format: vector_format
});
var vector_strategies = [new OpenLayers.Strategy.Fixed()];
var vector_layer = new OpenLayers.Layer.Vector('More Advanced Vector Layer',{
    protocol: vector_protocol,
    strategies: vector_strategies,
    isBaseLayer: false
});

var options = {
    layers: [layer, vector_layer]
};
var map = new OpenLayers.Map("Map", options);
//Projection-----------------------------------------------
map.setCenter(
    new OpenLayers.LonLat(18.068611, 59.329444).transform(
        new OpenLayers.Projection("EPSG:4326"),
            map.getProjectionObject()
    ), 10
); 
```

# javascript - 聚合来自 mongodb、map reduce 或任何其他方式的数据？

> ID：10329701
> 
> 赞同：0
> 
> 时间：2012-04-26T08:25:13.637
> 
> 标签：javascript, node.js, mongodb

好吧，我正在努力解决聚合问题。我认为解决问题的最简单方法是使用 map reduce 或进行单独的查找查询，然后使用异步库帮助进行循环。

架构在这里：

```
db.keyword
keyword: String
start: Date
source: String(Only one of these (‘google’,’yahoo’,’bing’,’duckduckgo’) )
job: ref db.job
results: [
    {
            title: String
            url: String
            position: Number
    }
]

db.job
name: String
keywords: [ String ]
urls: [ String ]
sources: [ String(‘google’,’yahoo’,’bing’,’duckduckgo’) ] 
```

现在我需要把数据带到这个表格：

```
data = {
    categories: [ 'keyword1', 'keyword2', 'keyword3' ],
    series: [
        {
            name: 'google',
            data: [33, 43, 22]
        },
        {
            name: 'yahoo',
            data: [12, 5, 3]
        }

    ]
} 
```

那么最大的问题是 series[0].data 数组是由非常难以找到的，将 db.job.urls 与 db.keyword.results.url 匹配，然后得到位置。有什么方法可以简化查询_？我查看了许多 map reduce 示例，但我找不到正确的方法来映射哪些数据和减少哪些数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:55:10.777

看起来好像您正在尝试组合来自两个单独集合（关键字和作业）的数据。

Map Reduce 以及新的聚合框架一次只能对一个集合进行操作。

您最好的选择可能是分别查询每个集合并以编程方式组合结果，以最适合您的应用程序的任何形式保存它们。

如果您想尝试使用 Map Reduce，这里是一个用户撰写的博客文章的链接，该用户使用增量 Map Reduce 操作来组合来自两个集合的值。
[http://tebros.com/2011/07/using-mongodb-mapreduce-to-join-2-collections/](http://tebros.com/2011/07/using-mongodb-mapreduce-to-join-2-collections/)

有关在 MongoDB 中使用 Map Reduce 的更多信息，请参阅 Mongo 文档： [http](http://www.mongodb.org/display/DOCS/MapReduce) ://www.mongodb.org/display/DOCS/MapReduce （关于增量 Map Reduce 的部分在此处：[http ://www.mongodb.org /display/DOCS/MapReduce#MapReduce-IncrementalMapreduce](http://www.mongodb.org/display/DOCS/MapReduce#MapReduce-IncrementalMapreduce) )

MongoDB Cookbook 中有一些额外的 Map Reduce 示例：http: [//cookbook.mongodb.org/](http://cookbook.mongodb.org/)

有关如何运行 Map Reduce 操作的分步演练，请参阅 MongoDB 食谱食谱“使用版本化文档查找最大值和最小值” [http://cookbook.mongodb.org/patterns的“附加”部分/finding_max_and_min/](http://cookbook.mongodb.org/patterns/finding_max_and_min/)

希望以上内容将为您提供一些有关如何实现所需结果的想法。正如我所提到的，我相信最直接的解决方案就是以编程方式组合结果。但是，如果您成功编写了执行此操作的 Map Reduce 操作，请发布您的解决方案，以便社区可以从您的经验中受益。

# c# - 在 MVC 3 中维护状态

> ID：10329704
> 
> 赞同：0
> 
> 时间：2012-04-26T08:25:20.110
> 
> 标签：c#, asp.net-mvc-3

我只是使用 mvc 3 开发输入表单。我有很多文本框、单选按钮、标签。因此，当将数据从视图回发到控制器时，它会丢失输入的数据。如何为所有回发保留这个？默认情况下是否有任何 mvc 机制可用？这意味着通过启用某些属性，我们是否命令 mvc 自己处理状态？

我对发送 viewdata 对象不感兴趣。除了 mvc3 中可用的默认机制是什么？

# 更新：

```
@using (Html.BeginForm())
{
<table>
    <tr>
        <td>

            @Html.TextBox("txtTitle")
@Html.CheckBox("chkOption")
        </td>
        <td>               
            @Html.TextBox("txtDetails")
@Html.DropDownList("drpList")
        </td>
        <td>
            <input type="submit" value="Cancel" name="action" />
            <input type="submit" value="Create" name="action" />

        </td>
    </tr>
</table>
} 
```

如何维护所有回发的输入和选定值的状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:26:59.533

您可以使用[Session](http://msdn.microsoft.com/en-us/library/ms178581.aspx)在多个回发中保持状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T09:21:16.007

看起来您需要在模型的属性上创建`Model`并使用`@Html.TextBoxFor()`,`@Html.CheckBoxFor()`和方法。`@Html.DropdownListFor()`

然后，您将拥有一个名称相似的操作方法，装饰有一个`[HttpPost]`属性和模型作为参数。然后，您将能够对尝试的表单提交执行验证，并在表单状态有效时处理模型。

我会考虑研究强类型视图、模型，并且可能会通过一些在线教程。

下面包含的链接似乎是一个很好的教程，它有几页长，但应该包含您入门所需的所有内容。

[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)

# java - 使用 Jackson 将 Json 反序列化为其他类层次结构

> ID：10329706
> 
> 赞同：25
> 
> 时间：2012-04-26T08:25:25.353
> 
> 标签：java, json, serialization, jackson, deserialization

现在我正在和杰克逊一起工作，我对此有一些疑问。

首先。我有两个服务，第一个是数据收集和发送服务，第二个是接收这些数据，例如，将其记录到文件中。

所以，第一个服务有这样的类层次结构：

```
 +----ConcreteC
         |
Base ----+----ConcreteA
         |
         +----ConcreteB 
```

第二个服务具有这样的类层次结构：

```
ConcreteAAdapter extends ConcreteA implements Adapter {}
ConcreteBAdapter extends ConcreteB implements Adapter {}
ConcreteCAdapter extends ConcreteC implements Adapter {} 
```

第一个服务一无所知`ConcreteXAdapter`。

我在第一个服务上发送数据的方式：

```
Collection<Base> data = new LinkedBlockingQueue<Base>()
JacksonUtils utils = new JacksonUtils();
data.add(new ConcreteA());
data.add(new ConcreteB());
data.add(new ConcreteC());
...
send(utils.marshall(data));
...

public class JacksonUtils {

    public byte[] marshall(Collection<Base> data) throws IOException {
        ByteArrayOutputStream out = new ByteArrayOutputStream() {
            @Override
            public byte[] toByteArray() {
                return buf;
            }
        };

        getObjectMapper().writeValue(out, data);
        return out.toByteArray();
    }
    protected ObjectMapper getObjectMapper() {
        return new ObjectMapper();
    }

    public Object unmarshall(byte[] json) throws IOException {
        return getObjectMapper().readValue(json, Object.class);
    }

    public <T> T unmarshall(InputStream source, TypeReference<T> typeReference) throws IOException {
        return getObjectMapper().readValue(source, typeReference);
    }

    public <T> T unmarshall(byte[] json, TypeReference<T> typeReference) throws IOException {
        return getObjectMapper().readValue(json, typeReference);
    }
} 
```

所以，我想将 json 反序列化为 Collection of `ConcreteXAdapter`，而不是 Collection of `ConcreteX`( `ConcreteA -> ConcreteAAdapter, ConcreteB -> ConcreteBAdapter, ConcreteC -> ConcreteCAdapter`)。在我描述的情况下，我想得到：

```
Collection [ConcreteAAdapter, ConcreteBAdapter, ConcreteCAdapter] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-26T15:31:00.273

为此，您需要在 JSON 中传递其他信息：

```
@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, 
      include=JsonTypeInfo.As.PROPERTY, property="@type")
class Base {
...
} 
```

然后在序列化时它会添加@type 字段：

```
objectMapper.registerSubtypes(
            new NamedType(ConcreteAAdapter.class, "ConcreteA"),
            new NamedType(ConcreteBAdapter.class, "ConcreteB"),
            new NamedType(ConcreteCAdapter.class, "ConcreteC")
            );

// note, that for lists you need to pass TypeReference explicitly
objectMapper.writerWithType(new TypeReference<List<Base>>() {})
     .writeValueAsString(someList);

    {
      "@type" : "ConcreteA",
      ...
    } 
```

在反序列化时它将是：

```
 objectMapper.registerSubtypes(
            new NamedType(ConcreteA.class, "ConcreteA"),
            new NamedType(ConcreteB.class, "ConcreteB"),
            new NamedType(ConcreteC.class, "ConcreteC")
            );
    objectMapper.readValue(....) 
```

[更多信息在这里](https://web.archive.org/web/20170901051352/http://wiki.fasterxml.com:80/JacksonPolymorphicDeserialization)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-27T10:49:23.817

我是如何解决这个问题的。这是示例项目的类图： ![类图](../Images/b84c375a711f0c6a2a67aa7a5728e852.png)

所以我想在反序列化后得到`ConcreteAAdapter`表格`ConcreteA`。

我的解决方案是扩展`ClassNameIdResolver`添加功能，将基类对象反序列化为子类型类对象（子类型类不添加额外功能和额外字段）。

这是`ObjectMapper`为反序列化创建的代码：

```
protected ObjectMapper getObjectMapperForDeserialization() {
        ObjectMapper mapper = new ObjectMapper();

        StdTypeResolverBuilder typeResolverBuilder = new ObjectMapper.DefaultTypeResolverBuilder(ObjectMapper.DefaultTyping.OBJECT_AND_NON_CONCRETE);
        typeResolverBuilder = typeResolverBuilder.inclusion(JsonTypeInfo.As.PROPERTY);
        typeResolverBuilder.init(JsonTypeInfo.Id.CLASS, new ClassNameIdResolver(SimpleType.construct(Base.class), TypeFactory.defaultInstance()) {
            private HashMap<Class, Class> classes = new HashMap<Class, Class>() {
                {
                    put(ConcreteA.class, ConcreteAAdapter.class);
                    put(ConcreteB.class, ConcreteBAdapter.class);
                    put(ConcreteC.class, ConcreteCAdapter.class);
                }
            };

            @Override
            public String idFromValue(Object value) {
                return (classes.containsKey(value.getClass())) ? value.getClass().getName() : null;
            }

            @Override
            public JavaType typeFromId(String id) {
                try {
                    return classes.get(Class.forName(id)) == null ? super.typeFromId(id) : _typeFactory.constructSpecializedType(_baseType, classes.get(Class.forName(id)));
                } catch (ClassNotFoundException e) {
                    // todo catch the e
                }
                return super.typeFromId(id);
            }
        });
        mapper.setDefaultTyping(typeResolverBuilder);
        return mapper;
    } 
```

这是`ObjectMapper`为序列化创建的代码：

```
protected ObjectMapper getObjectMapperForSerialization() {
    ObjectMapper mapper = new ObjectMapper();

    StdTypeResolverBuilder typeResolverBuilder = new ObjectMapper.DefaultTypeResolverBuilder(ObjectMapper.DefaultTyping.OBJECT_AND_NON_CONCRETE);
    typeResolverBuilder = typeResolverBuilder.inclusion(JsonTypeInfo.As.PROPERTY);
    typeResolverBuilder.init(JsonTypeInfo.Id.CLASS, new ClassNameIdResolver(SimpleType.construct(Base.class), TypeFactory.defaultInstance()));
    mapper.setDefaultTyping(typeResolverBuilder);

    return mapper;
} 
```

测试代码：

```
public static void main(String[] args) throws IOException {
    JacksonUtils JacksonUtils = new JacksonUtilsImpl();

    Collection<Base> data = new LinkedBlockingQueue<Base>();
    data.add(new ConcreteA());
    data.add(new ConcreteB());
    data.add(new ConcreteC());

    String json = JacksonUtils.marshallIntoString(data);

    System.out.println(json);

    Collection<? extends Adapter> adapters = JacksonUtils.unmarshall(json, new TypeReference<ArrayList<Adapter>>() {});

    for (Adapter adapter : adapters) {
        System.out.println(adapter.getClass().getName());
    }
} 
```

JacksonUtils 类的完整代码：

```
public class JacksonUtilsImpl implements JacksonUtils {

    @Override
    public byte[] marshall(Collection<Base> data) throws IOException {
        ByteArrayOutputStream out = new ByteArrayOutputStream() {
            @Override
            public byte[] toByteArray() {
                return buf;
            }
        };

        getObjectMapperForSerialization().writerWithType(new TypeReference<Collection<Base>>() {}).writeValue(out, data);
        return out.toByteArray();
    }

    @Override
    public String marshallIntoString(Collection<Base> data) throws IOException {
        return getObjectMapperForSerialization().writeValueAsString(data);
    }

    protected ObjectMapper getObjectMapperForSerialization() {
        ObjectMapper mapper = new ObjectMapper();

        StdTypeResolverBuilder typeResolverBuilder = new ObjectMapper.DefaultTypeResolverBuilder(ObjectMapper.DefaultTyping.OBJECT_AND_NON_CONCRETE);
        typeResolverBuilder = typeResolverBuilder.inclusion(JsonTypeInfo.As.PROPERTY);
        typeResolverBuilder.init(JsonTypeInfo.Id.CLASS, new ClassNameIdResolver(SimpleType.construct(Base.class), TypeFactory.defaultInstance()));
        mapper.setDefaultTyping(typeResolverBuilder);

        return mapper;
    }

    protected ObjectMapper getObjectMapperForDeserialization() {
        ObjectMapper mapper = new ObjectMapper();

        StdTypeResolverBuilder typeResolverBuilder = new ObjectMapper.DefaultTypeResolverBuilder(ObjectMapper.DefaultTyping.OBJECT_AND_NON_CONCRETE);
        typeResolverBuilder = typeResolverBuilder.inclusion(JsonTypeInfo.As.PROPERTY);
        typeResolverBuilder.init(JsonTypeInfo.Id.CLASS, new ClassNameIdResolver(SimpleType.construct(Base.class), TypeFactory.defaultInstance()) {
            private HashMap<Class, Class> classes = new HashMap<Class, Class>() {
                {
                    put(ConcreteA.class, ConcreteAAdapter.class);
                    put(ConcreteB.class, ConcreteBAdapter.class);
                    put(ConcreteC.class, ConcreteCAdapter.class);
                }
            };

            @Override
            public String idFromValue(Object value) {
                return (classes.containsKey(value.getClass())) ? value.getClass().getName() : null;
            }

            @Override
            public JavaType typeFromId(String id) {
                try {
                    return classes.get(Class.forName(id)) == null ? super.typeFromId(id) : _typeFactory.constructSpecializedType(_baseType, classes.get(Class.forName(id)));
                } catch (ClassNotFoundException e) {
                    // todo catch the e
                }
                return super.typeFromId(id);
            }
        });
        mapper.setDefaultTyping(typeResolverBuilder);
        return mapper;
    }

    @Override
    public Object unmarshall(byte[] json) throws IOException {
        return getObjectMapperForDeserialization().readValue(json, Object.class);
    }

    @Override
    public <T> T unmarshall(InputStream source, TypeReference<T> typeReference) throws IOException {
        return getObjectMapperForDeserialization().readValue(source, typeReference);
    }

    @Override
    public <T> T unmarshall(byte[] json, TypeReference<T> typeReference) throws IOException {
        return getObjectMapperForDeserialization().readValue(json, typeReference);
    }

    @Override
    public <T> Collection<? extends T> unmarshall(String json, Class<? extends Collection<? extends T>> klass) throws IOException {
        return getObjectMapperForDeserialization().readValue(json, klass);
    }

    @Override
    public <T> Collection<? extends T> unmarshall(String json, TypeReference typeReference) throws IOException {
        return getObjectMapperForDeserialization().readValue(json, typeReference);
    }
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-19T14:48:59.363

我发现程序员布鲁斯的方法是最清晰和最容易上手的（下面的例子）。我从他对相关问题的回答中获得了信息： [https](https://stackoverflow.com/a/6339600/1148030) ://stackoverflow.com/a/6339600/1148030 和相关的博客文章： http: [//programmerbruce.blogspot.fi/2011/05/deserialize-json-with -jackson-into.html](http://programmerbruce.blogspot.fi/2011/05/deserialize-json-with-jackson-into.html)

还可以查看这个友好的 wiki 页面（在 Eugene Retunsky 的回答中也提到过）： [https ://github.com/FasterXML/jackson-docs/wiki/JacksonPolymorphicDeserialization](https://github.com/FasterXML/jackson-docs/wiki/JacksonPolymorphicDeserialization)

另一个不错的 wiki 页面：[https ://github.com/FasterXML/jackson-docs/wiki/JacksonMixInAnnotations](https://github.com/FasterXML/jackson-docs/wiki/JacksonMixInAnnotations)

这是一个简短的示例，可以为您提供这个想法：

像这样配置 ObjectMapper：

```
 mapper.getDeserializationConfig().addMixInAnnotations(Base.class, BaseMixin.class);
    mapper.getSerializationConfig().addMixInAnnotations(Base.class, BaseMixin.class); 
```

示例 BaseMixin 类（易于定义为内部类。）

```
@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property="type")
@JsonSubTypes({
    @JsonSubTypes.Type(value=ConcreteA.class, name="ConcreteA"),
    @JsonSubTypes.Type(value=ConcreteB.class, name="ConcreteB")
})  
private static class BaseMixin {
} 
```

在第二个服务中，您可以像这样定义 BaseMixin：

```
@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property="type")
@JsonSubTypes({
    @JsonSubTypes.Type(value=ConcreteAAdapter.class, name="ConcreteA"),
    @JsonSubTypes.Type(value=ConcreteBAdapter.class, name="ConcreteB")
})  
private static class BaseMixin {
} 
```

# .net - new StackTrace(Thread, bool) 在到达 MemberInfoCache 时挂起 .AddMethod()

> ID：10329712
> 
> 赞同：1
> 
> 时间：2012-04-26T08:25:48.310
> 
> 标签：.net, multithreading, freeze, system.diagnostics

我正在编写在我们的多用户多线程应用程序服务器中实现某种“**进程内**分析器”组件的代码。它基本上工作完美 - 显示每个线程的堆栈跟踪以及一些附加信息，例如该线程的 CPU 利用率、SQL 等待时间等，每 X 秒刷新一次。我差点签到，但突然在调试会话中我注意到我的应用程序挂起！它并非一直发生，而是随机发生，暗示了一些并发问题。经过仔细检查，我发现该应用程序在调用“new StackTrace(one_of_my_threads, false)”期间挂起。这是调试器的堆栈：

```
[Managed to Native Transition]  
mscorlib.dll!System.RuntimeType.RuntimeTypeCache.MemberInfoCache<System.Reflection.RuntimeMethodInfo>.AddMethod(System.RuntimeTypeHandle declaringType = {System.RuntimeTypeHandle}, System.RuntimeMethodHandle method, System.RuntimeType.RuntimeTypeCache.CacheType cacheType) + 0x88 bytes   
mscorlib.dll!System.RuntimeType.RuntimeTypeCache.GetMethod(System.RuntimeTypeHandle declaringType, System.RuntimeMethodHandle method) + 0x2d bytes  
mscorlib.dll!System.RuntimeType.GetMethodBase(System.RuntimeTypeHandle reflectedTypeHandle, System.RuntimeMethodHandle methodHandle) + 0xf5 bytes   
mscorlib.dll!System.Diagnostics.StackFrameHelper.GetMethodBase(int i) + 0x4e bytes  
mscorlib.dll!System.Diagnostics.StackTrace.CaptureStackTrace(int iSkip, bool fNeedFileInfo = false, System.Threading.Thread targetThread, System.Exception e = null) + 0xb8 bytes   

mscorlib.dll!System.Diagnostics.StackTrace.StackTrace(System.Threading.Thread targetThread, bool needFileInfo) + 0x18 bytes 

>Almog.Next.Tools.dll!Almog.Next.Services.ThreadWorkUnit.GetStackTrace(System.Threading.Thread th = {System.Threading.Thread}, Almog.Next.Services.StackDetalization details = Simplified) Line 175 + 0x2c bytes    

Almog.Next.Tools.dll!Almog.Next.Services.ThreadWorkUnit.InternalCalculate(Almog.Next.Services.StackDetalization sdetails = Simplified) Line 131 + 0x1b bytes

Almog.Next.Tools.dll!Almog.Next.Services.ThreadWorkUnit.Calculate(Almog.Next.Services.StackDetalization sdetails = Simplified) Line 90 + 0xc bytes

Almog.Next.Tools.dll!Almog.Next.Services.InProcessProfiler.GetThreadWorks(Almog.Next.Services.StackDetalization stackLevel = Simplified) Line 41 + 0xe bytes

Almog.Next.Tools.dll!Almog.Next.CommonControls.ShowWorkloadForm.timer_Tick(object sender = {Interval = 250}, System.EventArgs e = {System.EventArgs}) Line 40 + 0x9 bytes

System.Windows.Forms.dll!System.Windows.Forms.Timer.OnTick(System.EventArgs e) + 0x17 bytes 

System.Windows.Forms.dll!System.Windows.Forms.Timer.TimerNativeWindow.WndProc(ref System.Windows.Forms.Message m) + 0x34 bytes  

System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 275, System.IntPtr wparam, System.IntPtr lparam) + 0x5a bytes 

[Native to Managed Transition]  

[Managed to Native Transition]  

System.Windows.Forms.dll!System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(int dwComponentID, int reason = -1, int pvLoopData = 0) + 0x24e bytes 

System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(int reason = -1, System.Windows.Forms.ApplicationContext context = {System.Windows.Forms.ApplicationContext}) + 0x177 bytes 

System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoop(int reason, System.Windows.Forms.ApplicationContext context) + 0x61 bytes    

System.Windows.Forms.dll!System.Windows.Forms.Application.Run(System.Windows.Forms.Form mainForm) + 0x31 bytes  

NextServer.exe!Almog.Next.Server.Program.Main(string[] ParamStr = {string[0]}) Line 24 + 0x1d bytes 
```

我还注意到其他线程看起来也被阻塞了，**主要是在分配新对象时（调用“new”）**。线程示例之一，挂在这行代码上：

```
return new TransactionController(this, transactionMode, isolationLevel); 
```

我相信每个“新”都与 MemberInfoCache 有关，但即使在使用 Reflector 查看 AddMethod() 的代码后，我也无法弄清楚我能做什么。请帮忙！我完全被困住了。

这是读取堆栈跟踪的代码。没有什么不寻常的，恕我直言：...

```
if (th == Thread.CurrentThread)
                throw new NextException("Internal error: it seems the thread {0} once called BeginWork() is the same thread which calls GetThreadWorks() now...", th.ManagedThreadId);
pragma warning disable 612, 618
            th.Suspend();
            var trace = new StackTrace(th, details == StackDetalization.Detailed);
            th.Resume();
pragma warning restore 612, 618
            var sb = new StringBuilder();
            int frameCount = trace.FrameCount;
            for (int i = 0; i < frameCount; i++)
            { 
```

...

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:41:54.987

如果您挂起的线程持有一个锁并且 StackTrace 正在使用该锁，您将死锁。

**不推荐**使用 Thread.Suspend的原因是：您基本上不能安全地使用它。如果您确切知道挂起的线程正在运行什么代码，包括任何 BCL 内容，您才能使用它。你不能知道。

我不知道这个问题的解决方案。我猜线程*需要*暂停才能捕获堆栈跟踪？

# php - 从另一个文件运行 PHP 文件

> ID：10329713
> 
> 赞同：1
> 
> 时间：2012-04-26T08:25:52.013
> 
> 标签：php

我的服务器上有一个脚本发送发送电子邮件。并将响应显示为 0 或 1

## 这是网址：

```
 http://examplewebsite.com/emailsender.php?to=$to&subject=$subject&message=$message 
```

我在 $to,$messages,$header 中输入数据。它正在发送电子邮件。

我也需要得到页面的响应。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:28:42.120

使用 file_get_contents 或 curl 获取输出：

```
$output = file_get_contents(" http://smwebtech.com/webservices/emailsender.php?to=$to&subject=$subject&message=$message"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:30:44.693

[可以使用file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)或[cURL](http://php.net/manual/en/book.curl.php)调用 URL ，两者都会为您提供生成的 HTML。

您应该实施某种安全措施来防止人们滥用您的电子邮件脚本，例如 IP 白名单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:30:32.690

在 PHP 中有很多方法。最简单的是 file_get_contents() （它支持 URL 包装器），或者如果您想要更多功能但更多设置，您可以使用 CURL。

```
<?php
  $response = file_get_contents('http://smwebtech.com/webservices/emailsender.php?to=$to&subject=$subject&message=$message');
  var_dump($response);
?> 
```

# google-docs-api - 上传新的修订文件

> ID：10329714
> 
> 赞同：0
> 
> 时间：2012-04-26T08:25:52.887
> 
> 标签：google-docs-api, google-drive-api

是否可以上传现有文件并自动创建新修订而不是替换它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:33:35.853

在更新 (PUT) 请求或补丁请求中，您可以指定[newRevision](https://developers.google.com/drive/v1/reference/files/update#newRevision)查询参数来创建新修订。

# soap - WinRT 中的 SOAP（Windows 8 Metro 应用程序）

> ID：10329715
> 
> 赞同：3
> 
> 时间：2012-04-26T08:26:02.780
> 
> 标签：soap, windows-8, windows-runtime, winjs

我想在 Metro App 中使用 SOAP Web 服务，使用 WinJS。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:55:15.097

您将需要使用 WinJS.xhr 对象来调用您的 SOAP Web 服务。你没有提到你想要做的肥皂请求的很多细节，所以我创建了一个小虚拟代码，你需要用你自己的参数填写：

```
WinJS.xhr({
  type: "GET", 
  user: accountSid, 
  password: authKey, 
  url: "http://yourWebserviceUrl.com",
  headers: { "YourSoapHeaders": "WithTheirValues" },
    }).then(success, error);

function succes(response)
{
}

function error(error)
{
} 
```

请注意，只有*xhr请求中的**url*属性是强制性的。如果您没有用户名/密码，您可以从对象中删除这些值。另外，如果您需要随请求发送数据（例如，如果您执行 POST 请求），则可以使用*data*属性输入该数据。

 **另外这里是 MSDN 上关于使用 WinJS.Xhr [http://msdn.microsoft.com/en-us/library/windows/apps/hh868282.aspx使用 Web 服务的帖子](http://msdn.microsoft.com/en-us/library/windows/apps/hh868282.aspx)

（请注意，这不是 SOAP 网络服务，但他们解释了使用网络服务的概念）**

# algorithm - 有效的键/值列表在erlang中合并

> ID：10329717
> 
> 赞同：2
> 
> 时间：2012-04-26T08:26:25.570
> 
> 标签：algorithm, list, erlang

我有几个键/值属性列表，如下所示：

```
 L1 = [{k1, 1}, {k2, 2}, ... {k32, 32}],
    L2 = [{k32, 0.1}, {k31, 0.2}, ... {k1, 0.32}]. 
```

什么是按键合并它的有效方法？目前我确实喜欢这样：

```
 MergeFun = fun(_, X, Y) -> X+Y end,
    D1 = dict:from_list(L1),
    D2 = dict:from_list(L2),
    Res = dict:to_list(dict:merge(MergeFun, D1, D2)). 
```

但这很慢。我假设输入列表不是那么大，也许 32-64 个元素和元素可以按任何顺序排列。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T10:00:19.603

使用 orddict 模块，该模块明确适用于对列表：

> orddict:merge(fun(_,X,Y) -> X+Y end, orddict:from_list(L1), orddict:from_list(L2))。

更好的是，如果您确保 L1 和 L2 始终保持按键排序，则无需在合并之前调用 from_list(L)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T10:51:31.087

我将对这两个列表进行排序，然后与一个简单的函数合并。我目前还没有更快的方法来做到这一点。

```
test() ->
    L1 = [{k1, 1}, {k2, 2}, {k32, 32}],
    L2 = [{k32, 0.1}, {k2, 0.2},  {k1, 0.32}],
    MergeFun = fun(X, Y) -> X+Y end,    
    merge(MergeFun, L1, L2).

merge(Fun, L1, L2) ->
    my_marge(Fun, lists:keysort(1, L1), lists:keysort(1, L2), []).

my_marge(Fun, [{Key, V1} | L1], [{Key, V2} | L2], Acc) ->
    my_marge(Fun, L1, L2, [{Key, Fun(V1, V2)} | Acc]);

my_marge(Fun, [], [{Key, V} | L], Acc) ->
    my_marge(Fun, [], L, [{Key, V} | Acc]);

my_marge(Fun, [{Key, V} | L], [], Acc) ->
    my_marge(Fun,L,[], [{Key, V} | Acc]);

my_marge(Fun, [{Key1, V1} | L1], [{Key2, V2} | L2], Acc) when Key1 < Key2 ->
    my_marge(Fun, L1, [{Key2, V2} | L2], [{Key1, V1} | Acc]);

my_marge(Fun, L1, [{Key, V} | L2], Acc) ->
    my_marge(Fun, L1, L2, [{Key, V} | Acc]);

my_marge(_Fun, [], [], Acc) ->
    Acc. 
```

# unicode - 使用 curl 获取 utf-8 url

> ID：10329718
> 
> 赞同：0
> 
> 时间：2012-04-26T08:26:26.597
> 
> 标签：unicode, curl

我正在尝试使用 curl 访问一些带有非拉丁字符的 url，问题是当我访问时我没有得到响应。我的浏览器访问它们没有问题，我检查了字符串转换，似乎我正在访问“http://www.linkedin.com/pub/j-rgen-a-tr-ff/7/606/68a”，而我的浏览器访问“http://se.linkedin.com/pub/j%C3%B6rgen-a-tr%C3%A4ff/7/606/68a”如何转换该字符串以使 curl 成功？

```
function hitFormGet($loginURL, $loginFields, $referer,$cookieString)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_COOKIEJAR, "cookies.txt");
    curl_setopt($ch, CURLOPT_COOKIEFILE, "cookies.txt");

    //curl_setopt($ch,    CURLOPT_AUTOREFERER,         true);
    curl_setopt($ch,    CURLOPT_COOKIESESSION,         true);
    //curl_setopt( $ch, CURLOPT_COOKIE,$cookieString);
    curl_setopt($ch,    CURLOPT_FAILONERROR,         false);
    curl_setopt($ch,    CURLOPT_FOLLOWLOCATION,        false);
    curl_setopt($ch, CURLOPT_VERBOSE, 1 );
    curl_setopt($ch, CURLOPT_ENCODING, 'gzip,deflate,sdch');
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch,    CURLOPT_FRESH_CONNECT,         true);
    curl_setopt($ch,    CURLOPT_HEADER,             false);
    //curl_setopt($ch,    CURLOPT_POST,                 true);
    curl_setopt($ch,    CURLOPT_RETURNTRANSFER,        true);
    curl_setopt($ch,    CURLOPT_CONNECTTIMEOUT,     30);
    curl_setopt($ch,    CURLOPT_USERAGENT, "Googlebot/2.1 (+http://www.googlebot.com/bot.html)");

    curl_setopt($ch, CURLOPT_URL, $loginURL.$loginFields);

    curl_setopt($ch, CURLOPT_REFERER, $referer);

    //curl_setopt($ch, CURLOPT_POSTFIELDS, $loginFields);
    $ret = curl_exec($ch);
    curl_close($ch);
    return $ret;
}

$res=hitFormGet("http://se.linkedin.com/pub/j%C3%B6rgen-a-tr%C3%A4ff/7/606/68a","","",""); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:33:14.750

您好像是从瑞典访问linkedin。这就是您被重定向到 se.linkedin.com 的原因。要按预期转换 URL，您可以在动态 url 部分应用 urlencode()，如您在以下示例中的示例：j-rgen-a-tr-ff/7/606/68a。

它应该工作。

# z3 - 任意长度的通用位向量类型

> ID：10329721
> 
> 赞同：2
> 
> 时间：2012-04-26T08:26:32.420
> 
> 标签：z3

出于与此处所述相同的原因（[用户定义的未解释函数](https://stackoverflow.com/questions/7740556/equivalent-of-define-fun-in-z3-api)），我想定义自己的未解释函数

bvredxnor() ：对给定位向量的位进行异或。

如果我按照此处给出的示例（[使用 C API 的通用量词示例](https://stackoverflow.com/questions/9777381/c-api-for-quantifiers)），我不知道为我的函数的参数提供什么类型（位向量）

我可以创建一个给定长度的位向量，但我想为任何长度的位向量创建它。

查看 C API 中可用的位向量函数，我注意到所有参数的类型都是 Z3_ast，所以我想我可以使用相同的泛型类型。但是API中没有生成Z3_ast排序的函数......（写这个我觉得我正在触及类型和排序之间的区别，但仍然有点不清楚）

是使用未解释排序的解决方案吗？如果是这样，那么在这样做时，我不会通过过度扩大类型来降低模型的一些精度，而这个人工制品仅用于调试目的？我的意思是，如果我将此函数应用于位向量，这会起作用吗？

先感谢您，

AG。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:33:10.237

SMTLib*不允许*具有可变长度的位向量。也就是说，您不能表达在位向量长度上参数化的问题。这样做的原因是，由于基数问题，关于位向量的属性不一定在长度上保持参数化。也就是说，考虑：

```
exists x0, x1, x2, x3, x4\. distinct [x0, x1, x2, x3, x4] 
```

此属性表示至少有 5 个不同的位向量值。如果 x 的域的长度至少为 3，则这是正确的，否则则不然。因此，声明的有效性取决于域。您也可以将其视为一般 SMTLib 一阶性质的限制。

当然，以上适用于 SMTLib，不一定适用于 Z3。Leo 和 co 一直处于领先地位，Z3 确实有许多超出 SMTLib 要求的技巧。如果 Z3 确实以您描述的方式支持某些参数位向量问题的概念，那将是一个惊喜。

# html - 显示子节点

> ID：10329722
> 
> 赞同：1
> 
> 时间：2012-04-26T08:26:33.123
> 
> 标签：html, xml, xslt

我目前有一个简单的标记，主要代表 HTML。

下面是其中的一个片段

```
<li>Make this <b>Bold</b></li> 
```

我当然可以`<xsl:copy-of>`用来确保`<b>`标签通过并自动显示为粗体，但是我有一个问题。

我正在使用另一个 XSL，它根据关键字或短语的存储库检查标记，如果它们存在，则会创建链接。

下面是我的 XSL

```
<xsl:template name="List" match="li">
  <li>
          <xsl:call-template name="markup">
            <xsl:with-param name="text" select="."/>
            <xsl:with-param name="phrases" select="document('../../documents/main/keywords.xml')/keywords/keyword"/>
            <xsl:with-param name="first-only" select="false()"/>
          </xsl:call-template>
  </li>
  </xsl:template> 
```

此方法可防止任何子标签通过，但是我不确定如何解决此问题。

任何帮助是极大的赞赏！担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:59:35.873

问题是您的链接创建模板做错了事。

正确的做法是**使用标识模板**`<li>`并为元素的文本节点后代创建专用模板。

试试这个：

```
<xsl:variable 
  name="keywords"
  select="document('../../documents/main/keywords.xml')/keywords/keyword" 
/>

<!-- the identity template does copies of everything not matched otherwise -->
<xsl:template match="node() | @*">
  <xsl:copy>
    <xsl:apply-templates select="node() | @*" />
  </xsl:copy>
</xsl:template>

<!-- text nodes in <li> elements get special treatment -->
<xsl:template match="li//text()">
  <xsl:call-template name="markup">
    <xsl:with-param name="phrases" select="$keywords"/>
    <xsl:with-param name="first-only" select="false()"/>
  </xsl:call-template>
</xsl:template>

<!-- marks up the current node -->
<xsl:template name="markup">
  <xsl:with-param name="phrases" />
  <xsl:with-param name="first-only" select="true()" />

  <!-- you can use . here - no need to pass in a $text param -->
</xsl:template> 
```

身份模板是成功解决此类问题的关键。它透明地处理复制`<li>`和。`<b>`

1.  它对输入进行完全遍历，复制它，除非更具体的模板与当前节点匹配。
2.  这意味着您只需为要*更改*的节点编写模板。在这种情况下，匹配*文本节点*效果最好，因为它们不能有嵌套的子节点。
3.  避免命名模板，如`<xsl:template name="List">`. 这是“推式”XSLT，即它是必要的，并且经常导致相当笨拙的结果。
4.  将节点从流中`<xsl:template match="li//text()">` *拉出*并做一些比复制它们更复杂的事情。这是“拉式”XSLT，即模板匹配。它通常更容易处理并生成更清晰的 XSLT 代码。
5.  当然，您不受限于`<li>`元素内的文本节点。只需更改匹配表达式以影响其他节点。

假设您想在不破坏任何其他模板的情况下将所有`<b>`节点转换为。`<strong>`使用拉式风格，这很简单：

```
<xsl:template match="b">
  <strong>
    <xsl:apply-templates select="node() | @*" />
  <strong>
</xsl:template> 
```

另请注意，当您这样做时，*当前节点*不会更改`<xsl:call-template>`。因此不需要将当前节点传递给被调用的模板。

# python - 如何在 ubuntu 12.04 上从源代码为 python2.6 编译 pygtk

> ID：10329739
> 
> 赞同：3
> 
> 时间：2012-04-26T08:27:42.987
> 
> 标签：python, compilation, makefile, pygtk

我有一个卡在 python2.6 的应用程序。由于特定和复杂的扩展，我无法将其移植到 python2.7。

问题是 12.04 删除了 python2.6 的 pygtk，因为 python2.7 成为默认的 python 版本。

然后我需要从源代码为 python2.6 构建 pygtk。我已按照自述文件进行操作，但我做错了什么。（文档很简洁）

构建看起来不错，因为如果我在解压缩的存档文件夹中，我可以导入 gtk（我执行*python -c 'import gtk'*）。但是 make install 不能正常工作。

AFAICT，我已将 PYTHON 和 PYTHONPATH 变量导出到正确的路径。

```
PYTHONPATH=/usr/lib/python2.6/dist-packages
PYTHON=/usr/bin/python2.6 
```

知道这个配置有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T22:22:36.540

我不知道我是否比你走得更远，但这就是我目前正在做的事情。也许我们可以一起解决这个问题。

```
$ sudo su
# pip install pygtk 
```

这会产生一堆错误，包括“要以受支持的方式构建 PyGTK，请阅读安装文件”。在阅读了该内容和其他内容后，我尝试了以下操作：

```
# cd build/pygtk
# chmod 755 configure
# PYTHON=/usr/bin/python2.6 ./configure --prefix=/usr 
```

这会找到正确的 Python 版本，但现在找不到 GLIB。错误包括，“这通常意味着 GLIB 安装不正确。” 当我查看时，`config.log`我发现了这个错误，“致命错误：glib.h：没有这样的文件或目录”。我找到[了一个帮助页面](http://wiki.zmanda.com/index.php/Could_not_run_GLIB_test_program,_checking_why)，提示如果您尚未安装 GLIB 的开发版本，您可能会收到此错误。

```
# apt-get install libglib2.0-dev
# PYTHON=/usr/bin/python2.6 ./configure --prefix=/usr 
```

进步！我现在看到一个新错误“找不到包 'pygobject-2.0'”。该错误出现在带有安装建议[的论坛帖子](http://ubuntuforums.org/showthread.php?t=1837389)`python-gobject-dev`中。

```
# apt-get install python-gobject-dev
# PYTHON=/usr/bin/python2.6 ./configure --prefix=/usr 
```

没有错误，所以我尝试运行`make`和`make install`. 第一个有效，但安装失败并出现错误“/bin/bash: line 16: ../py-compile: Permission denied”。以 root 身份运行时，权限被拒绝很奇怪。经过一段时间后，我回到配置脚本的输出并看到一条消息，“正在检查 PYCAIRO...否”，然后是另一条消息，“由于缺少 pycairo 而没有检查 gtk”。一点点猜测让我安装了另一个模块。

```
# apt-get install python-cairo-dev
# PYTHON=/usr/bin/python2.6 ./configure --prefix=/usr 
```

这解决了 pycairo 投诉，但还有更多，包括 GTK。

```
# apt-get install python-gtk2-dev
# PYTHON=/usr/bin/python2.6 ./configure --prefix=/usr 
```

这解决了大部分投诉，只是缺少 LIBGLADE。

```
# apt-get install libglade2-dev
# PYTHON=/usr/bin/python2.6 ./configure --prefix=/usr 
```

好的，所有模块都将被构建，但它显示“Numpy 支持：否”。

```
# make
# make install 
```

这会失败并出现我之前看到的相同错误“/bin/bash: line 16: ../py-compile: Permission denied”。

我暂时把它留在这里，稍后再回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T12:02:40.040

尝试对 2.6 使用 easy_install，假设在您的 ubuntu 中安装了 2.6 和 2.7。您可以使用 easy_install（默认为 2.7）和 easy_install-2.6 来安装 2.6 的专用软件包。

# nsis - 删除 $windir 中文件夹的快捷方式

> ID：10329749
> 
> 赞同：1
> 
> 时间：2012-04-26T08:28:23.667
> 
> 标签：nsis

我的要求是删除文件夹的快捷方式。名为 test 的文件夹位于 $windir 中。该文件夹的快捷方式在桌面上。我的 nsis 脚本应该删除那个快捷方式。这样做的脚本行是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:45:23.217

快捷方式目标的名称无关紧要，快捷方式只是一个带有隐藏 .lnk 扩展名的文件。

```
Delete "$desktop\nameofyourshortcut.lnk" 
```

# c# - 不是按名称而是按类型指定接口成员

> ID：10329750
> 
> 赞同：3
> 
> 时间：2012-04-26T08:28:25.020
> 
> 标签：c#, .net, oop, class, interface

我有很多由 svcutil 从一些外部 WSDL 文件生成的类似类。任何类都有一个名为 的`Header`属性和`string`属性`class name + "1"`。

例如，我有类：`SimpleRequest`具有`Header`属性和`SimpleRequest1`属性。
另一种是`ComplexRequest`具有`Header`财产和`ComplexRequest1`财产的。

所以，我想为这些类创建一个通用接口。所以，基本上我可以定义类似的东西：

```
interface ISomeRequestClass {
  string Header;
  // here is some definition for `class name + "1"` properties...
} 
```

是否可以在接口中定义这样的成员？

* * *

*这是帖子编辑...*

这是生成类的示例：

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "3.0.0.0")]
[System.ServiceModel.MessageContractAttribute(IsWrapped=false)]
public partial class SimpleRequest
{

    public string Header;

    [System.ServiceModel.MessageBodyMemberAttribute(Name="SimpleRequest", Namespace="data", Order=0)]
    public SimpleRequestMsg SimpleRequest1;

    public SimpleRequest()
    {
    }

    public SimpleRequest(string Header, SimpleRequestMsg SimpleRequest1)
    {
        this.Header = Header;
        this.SimpleRequest1 = SimpleRequest1;
    }
} 
```

* * *

**编辑后 2**

我更改了这个烦人的 +1 属性的定义以表示真实的实际图片。它都有不同的类类型。那么如何将其拉出到通用界面呢？

* * *

**编辑后 3**

这是可以带来更多澄清的[耦合问题。](https://stackoverflow.com/questions/10410917/reorganize-classes-structure)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:34:17.907

**编辑**（在看到您的代码示例之后）：从技术上讲，您的代码没有`Header` *property*，它有一个`Header` *field*。这是一个重要的区别，因为[您不能在 interface 中指定字段](https://stackoverflow.com/questions/2115114/why-cant-c-sharp-interfaces-contain-fields)。但是，使用下面描述的方法，您可以将属性添加到返回字段值的类中。

* * *

> 是否可以在接口中定义这样的成员？

不，接口名称不能是动态的。无论如何，这样的界面不会很有用。如果你有一个 class 的实例`ISomeRequestClass`，你会用什么名字来访问那个属性？

但是，您可以使用显式接口实现：

```
interface ISomeRequestClass {
    string Header { get; set; }
    string ClassName1 { get; set; }
}

class SomeClass : ISomeRequestClass {
     string Header { ... }

     string SomeClass1 { ... }

     // new: explicit interface implementation
     string ISomeRequestClass.ClassName1 {
          get { return SomeClass1; }
          set { SomeClass1 = value; }
     }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T22:17:38.510

您可以更一般地定义您的界面：

```
interface ISomeRequestClass {
  string HeaderProp {get; set;}
  string Prop {get; set;}
} 
```

您的具体类可以通过将接口成员映射到类字段来扩展（在额外的代码文件中），如下所示：

```
public partial class SimpleRequest : ISomeRequestClass
{
  public string HeaderProp
  {
    get
    {
      return Header;
    }
    set
    {
      Header = value;
    }
  }

  public string Prop
  {
    get
    {
      return SimpleRequest1;
    }
    set
    {
      SimpleRequest1= value;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T08:36:05.107

暂时搁置类和属性的命名。

如果您希望创建一个具有与您的特定 +1 类型相关的属性的界面，您有几个选择。

**为您的 +1 使用基类**

如果您的两个 +1 类都继承自同一个基类，您可以在接口定义中使用它：

```
public interface IFoo
{
 [...]
 PlusOneBaseType MyPlusOneObject{get;set;}
} 
```

**在您的界面上创建一个通用属性**

此方法允许您将 +1 属性的类型指定为泛型参数：

```
public interface IFoo<TPlusOneType>
{
 [...]
 TPlusOneType MyPlusOneObject{get;set;}
} 
```

您可能会使用如下：

```
public class SimpleRequest : IFoo<SimpleRequest1>
{
 [...]
} 
```

**更新**

鉴于您的类是部分类，您总是可以创建第二个（非机器生成的）版本的部分类来暗示您的接口。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T08:57:00.243

您提到了 svcutil，所以我假设您将这些类用作 WCF DataContracts？

如果是这种情况，那么您可以利用`name`.`DataMemberAttribute`

```
interface IRequest 
{
    string Header { get; set; }
    string Request1 { get; set; }
}

[DataContract]
class SimpleRequest : IRequest
{
    [DataMember]
    public string Header { get; set; }

    [DataMember(Name="SimpleRequest1"]
    public string Request1 { get; set; }
}

[DataContract]
class ComplexRequest : IRequest
{
    [DataMember]
    public string Header { get; set; }

    [DataMember(Name="ComplexRequest1"]
    public string Request1 { get; set; }
} 
```

如果您担心在将来某个时间重新生成代码时会给自己做更多的工作，那么我建议您编写一个 PowerShell 脚本来自动执行此转换。毕竟 svcutil 只是微软某个人编写的脚本。这不是魔术或“正确”或“标准”。您的脚本可以调用 scvutil，然后对生成的文件进行一些快速更改。

**编辑**（看到你的编辑后）

您已经在使用`MessageBodyMemberAttribute`' 的`Name`属性，所以只需更改此：

```
public string SimpleRequest1; 
```

至

```
public string Request1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T05:55:12.037

你真的需要*这些类*有一个通用的接口吗？我很想创建一个*包装器*接口（或只是一个具体的类），然后可以使用反射来访问相关字段：

```
// TODO: Make this class implement an appropriate new interface if you want
// to, for mocking purposes.
public sealed class RequestWrapper<TRequest, TMessage>
{
    private static readonly FieldInfo headerField;
    private static readonly FieldInfo messageField;

    static RequestWrapper()
    {
        // TODO: Validation
        headerField = typeof(TRequest).GetField("Header");
        messageField = typeof(TRequest).GetField(typeof(TRequest).Name + "1");
    }

    private readonly TRequest;

    public RequestWrapper(TRequest request)
    {
        this.request = request;
    }

    public string Header
    {
        get { return (string) headerField.GetValue(request); }
        set { headerField.SetValue(request, value); }
    }

    public TMessage Message
    {
        get { return (TMessage) messageField.GetValue(request); }
        get { messageField.SetValue(request, value); }
    }
} 
```

如果反射证明太慢，您可以使用表达式树为此构建委托，但我会坚持从一个简单的解决方案开始。

这样做的好处是您只需要编写一次此代码 - 但这确实意味着围绕真实的请求对象创建一个包装器，而部分类的答案却没有。

# database - 如何使用codeigniter的MVC原理显示这个联合表中的数据。？

> ID：10329751
> 
> 赞同：0
> 
> 时间：2012-04-26T08:28:37.530
> 
> 标签：database, codeigniter, view, model, controller

我从一个帖子中看到了这个答案，该帖子旨在发布来自特定 set_id 的数据库数据及其以下问题和答案。我发现很难将它转换为codeigniter的models-controllers-views原则。我需要一些帮助

它有 3 个表并提出了以下代码：

```
<?php
$this->db->select('s.id as set, s.name as name, q.id as qid, q.question as qu, a.id as aid, a.answer as an, a.points as p')
     ->from('sets s')
     ->join('questions q', 'q.set_id = s.id')
     ->join('answers a', 's.set_id = s.id')
     ->where('s.id', 'SET ID');

$questions = $this->db->get();
$set = array('questions' => array());

foreach($questions as $s){
  $set['id'] = $s->set;
  $set['name'] = $s->name;
  $set['questions'][$s->qid]['id'] = $q->qid;
  $set['questions'][$s->qid]['question'] = $q->qu;
  if(!isset($set['questions'][$s->qid]['answers']))
    $set['questions'][$s->qid]['answers'] = array();
  $set['questions'][$s->qid]['answers'][] = array(
    'id' => $q->aid,
    'answer' => $q->an',
    'points' => $q->p
  );
}

echo '<h2>'.$set['name'].'</h2>';
foreach($set['questions'] as $q){
  echo '<div class="question">';
  echo '<h3>'.$q['question'].'</h3>';
  echo '<div class="answers">';
  foreach($q['answers'] as $a){
    echo '<label for="a'.$a['id'].'">'.$a['answer'].'<input type="checkbox         value="'.$a['id'].'" name="q'.$q['id'].'" /></label><br />';
  }
  echo '</div>';
  echo '</div>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:20:23.500

In this instruction there is a problem

```
$set = $questions->result_array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:36:28.443

一旦你习惯了 MVC 模式，它就很简单。模型组件基本上处理数据库查询。您可以为不同的查询编写简单的函数并将它们放在模型类下。Controller 基本上是拉取模型数据并提交给 View 组件。在控制器内部，您将定义如何以及在何处将数据放入不同的视图类的逻辑。以下链接是查看的好地方。

[http://kyokasuigetsu25.wordpress.com/2012/01/06/codeigniter-beginner-tutorial-3-playing-with-the-database/](http://kyokasuigetsu25.wordpress.com/2012/01/06/codeigniter-beginner-tutorial-3-playing-with-the-database/)

# java - struts 如何理解哪个是模型，哪个是控制器？

> ID：10329760
> 
> 赞同：0
> 
> 时间：2012-04-26T08:29:26.357
> 
> 标签：java, struts

我的管理器类和数据访问对象 (DAO) 类位于模型视图控件的模型组中，那么 struts 如何理解哪个是模型，哪个是控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:30:46.433

在struts 中，如果你正在扩展Action Class，Struts 会自动将其视为一个Action Object，即控制器，并且在其中你调用你的manager/helperClasses 的方法。流程是:: 框架(RequestDispatcher) 将调用你的Action 类的execute 方法，通过创建Action 类的引用并实例化struts-config.xml 中提到的你的action 类。希望这很有用。

# algorithm - 这个有向图的关节点是什么？

> ID：10329763
> 
> 赞同：2
> 
> 时间：2012-04-26T08:29:29.860
> 
> 标签：algorithm, graph-theory

此有向图中的 5 个节点。

边缘：

1 -> 2

2 -> 3

2 -> 4

4 -> 5

（图形图像：http: [//i.imgur.com/hafBv.jpg](http://i.imgur.com/hafBv.jpg)）

我认为关节点是节点 2 和 4 是否正确？（如果删除节点 2 或节点 4，则图形断开连接）

但是我在任何地方看到的定义都类似于：

> 一个节点 u 是一个关节点，如果对于 u 的每个子 v，从 v 到 DFS 树中比 u 更高的节点都没有后边。

这对有向图有什么作用？例如，节点 3 没有到 DFS 树中高于 2 的节点的后边。这是否将节点 3 归类为关节点？但它的删除不会导致图形被分成 2 个或更多部分（这是我对关节节点的外行定义）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:36:34.160

关节点应始终有孩子和父母。这是您的定义中缺少的东西，并且使节点 1 和 3 关节点，而它们不是。

另请注意，在您对节点 3 的推理中，您认为节点本身不是其子节点。如果你仔细应用这个定义，你会发现你应该考虑孩子。在您的情况下-空集，并且根据我的扩展定义， 3 不再是关节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:37:36.937

`Node 3 does not have a back edge to a node higher in the DFS tree than 2`

节点 3 没有子节点，因此它不能是关节点（来自 def）。如果我们把这个定义放在有向树的上下文中，那么关节点就是除了根节点和叶节点之外的所有点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:06:14.423

免责声明：我的记忆很模糊。

有向图具有三种连通性。

如果从每个顶点到每个其他顶点都有一条路径，则为“强连通”，如果在任何两个节点之间存在一条路径，但不是双向的，则为“连通”。如果仅在用无向弧替换弧时图是连接的，则为“弱连接”。

eg 1->2 , 2->3 , 3->1 强连接，可以从每个节点到每个其他节点

1->2 , 2->3 你不能从 3 到 1 但你可以从 1 到 3 所以它是连接的

1->2 , 3->2 没有办法从 1 到 3 或从 3 到 1，所以它只是弱连接。

哪些节点是关节点取决于您正在考虑的连接类型。

您的图表只是弱连接，因为没有办法从 3 到 4 或从 4 到 3。这意味着谈论关节点的唯一方法是将弧视为无向的。如您所说，在这种情况下，2 和 4 将是关节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-17T19:42:50.127

but when we follow the method we used to solve the undirected graph we get the respected (num,low) values for nodes are node-1(1,1) 2 (2,2) ,node 3 (3,3), node 4(4,4).node 5(5,5). so following the def of articulation point and finding the node with 2 children and satisfying the rule (low(child)>=num(node)) we get only the node 2 so that is the articulation point . but the theory can be applied because it is still a connected graph i.e where every node is reachable but when we are finding we had to take care of tree and back edges and the rest is same as that of undirected graph.

# jquery - 使用 jquery post 将字典数据传递给控制器 字符串方法

> ID：10329765
> 
> 赞同：3
> 
> 时间：2012-04-26T08:29:31.803
> 
> 标签：jquery, ajax, asp.net-mvc

我的 Jquery 代码如下

```
 $("#btnExec").live('click', function () {
       var data1= "lorem ipsum";
       var data2= "lorem ipsum";
       var data3= "lorem ipsum";
       var dict = new Object();

       $("#ArgsTable tr").each(function (e) {
                var firstTD = $(this).find("td").eq("0").html().trim().replace(/\s/g, "");
                var secondValue = $(this).find("td").eq("1").find("input:text").val();
                dict[e] = [firstTD,secondValue]; 
       });

       $.ajax({
                type: 'POST',
                cache: false,
                data: { strdata1: data1, strdata2: data2, strdata3: data3, myDictionary: dict },    
                url: '<%=Url.Action("ExecData","Home") %>',
                success: function (data) {        
                }
              });
 }); 
```

我的控制器方法如下

```
public string ExecData(string strdata1, string strdata2, string strdata3,  Dictionary<object, object> myDictionary)
{
    //do some stuff...
} 
```

如果我单击**btnExec**表示，它会正确触发带有字符串值的控制器方法，但字典值总是**null** ..

在我的场景中“控制器方法的返回类型应该是字符串”

我该如何解决这个问题？提前致谢 ！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T08:47:55.997

蒂尔是这样的：

```
[HttpPost]
public ActionResult ExecData(
    string strdata1, 
    string strdata2,  
    string strdata3, 
    Dictionary<string, string> myDictionary
)
{
    return Content("hello world");
} 
```

进而：

```
var data = {
    strdata1: 'lorem ipsum',
    strdata2: 'lorem ipsum',
    strdata3: 'lorem ipsum'
};

$('#ArgsTable tr').each(function (index, item) {
    var firstTD = $(this).find('td').eq(0).html().trim().replace(/\s/g, '');
    var secondValue = $(this).find('td').eq(1).find('input:text').val();
    data['myDictionary[' + index + '].Key'] = firstTD;
    data['myDictionary[' + index + '].Value'] = secondValue;
});

$.ajax({
    url: '<%=Url.Action("ExecData","Home") %>',
    type: 'POST',
    traditional: true,
    data: data,
    success: function (result) {

    }
}); 
```

# javascript - HTML5 Canvas 游戏有错误，点击时第一个拼图变为不同的拼图？

> ID：10329769
> 
> 赞同：0
> 
> 时间：2012-04-26T08:29:35.903
> 
> 标签：javascript, canvas

我想我只需要对我正在开发的这款游戏重新审视。

这是一个滑动图像拼图（您将图像分成几块并以随机顺序显示它们，然后我删除一块拼图，用户必须单击每个拼图来移动它，从而放置图像重新走到一起）

完整代码在这里：[https ://github.com/Integralist/HTML5-Image-Slider-Game](https://github.com/Integralist/HTML5-Image-Slider-Game)

我遇到的错误是在您移动的第一个拼图上，如果您再次单击它 - 当它移回它刚刚来自的位置时 - 拼图变为另一块（在一个实例中，我注意到它是更改为启动游戏而被移除的拼图，但这可能只是巧合）。

起初我认为问题出在异步的 setInterval 方法上（我在想，因为我在一个循环中，可能参考循环迭代搞砸了，但我现在将相关迭代传递给 setInterval 和问题仍然存在，所以不可能那样）。

**更新：**
我仍然认为问题与 setInterval 有关。主要问题是当我们开始将图像绘制到画布上时，原始 x/y 坐标显然已经与我们预期的有所不同。我注意到，当我们单击同一个拼图以将其移回刚刚所在的位置时，保存我们要移动的拼图坐标的对象是不正确的。我注意到 drawOnCanvasX/Y 属性与它们应有的不同，并且它们现在匹配 empty_space 变量的 x/y 坐标？这种情况并非一直发生的事实让我认为 setInterval 没有通过正确的对象从循环传递到在间隔上执行的函数？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:21:21.907

问题是因为我没有从随机数组中删除特定项目。

为了让游戏正常运行，我需要移除 1 个拼图，这允许其他拼图有一个可以移动的空间。问题是我有`clearRect`我想要的那块，但实际上并没有从阵列中删除它。因此，当我在 Array 中循环查找具有这些确切 X/Y 坐标的项目时，它正在找到应该被移除的拼图项目（并且因为被移除的部分是随机选择的，这就是为什么有时件将首先通过循环找到，其他时候会找到正确的件）。

基督那是痛苦的。

# c++ - 错误 C4430、C2146 - 缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

> ID：10329770
> 
> 赞同：2
> 
> 时间：2012-04-26T08:29:40.217
> 
> 标签：c++

我在编译文件 Mutex.h 时遇到问题 -> 它属于库 STK（Synthesis Toolkit C++）。

我刚刚包含了我需要的文件（“RtWvOut.h”、Mutex.h/cpp、Stk.h/cpp、WvOut.h），并且在编译过程中以下问题消失了。感谢您的回答:)

* * *

d:\kari\Mutex.h:67: 错误:C2146: 语法错误: 缺少';' 在标识符 'mutex_' d:\kari\Mutex.h:67 之前：错误：C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数 d:\kari\Mutex.h:68: Error:C2146: syntax error: missing ';' 在标识符 'condition_' d:\kari\Mutex.h:68 之前：错误：C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

* * *

这是 Mutex.h 的代码

```
 #ifndef STK_MUTEX_H
    #define STK_MUTEX_H

    #include "Stk.h"

    #if (defined(__OS_IRIX__) || defined(__OS_LINUX__) || defined(__OS_MACOSX__)){

      #include <pthread.h>
      typedef pthread_mutex_t MUTEX;
      typedef pthread_cond_t CONDITION;
    }
    #elif defined(__OS_WINDOWS__){

      #include <windows.h>
      #include <process.h>
      typedef CRITICAL_SECTION MUTEX;
      typedef HANDLE CONDITION;
    }
    #endif

    namespace stk {

    /**************************************************/
    /*! \class Mutex
        \brief STK mutex class.

        This class provides a uniform interface for
        cross-platform mutex use.  On Linux and IRIX
        systems, the pthread library is used. Under
        Windows, critical sections are used.

        by Perry R. Cook and Gary P. Scavone, 1995-2011.
    */
    /***************************************************/

    class Mutex : public Stk
    {
     public:
      //! Default constructor.
      Mutex();

      //! Class destructor.
      ~Mutex();

      //! Lock the mutex.
      void lock(void);

      //! Unlock the mutex.
      void unlock(void);

      //! Wait indefinitely on the mutex condition variable.
      /*!
        The mutex must be locked before calling this function, and then
        subsequently unlocked after this function returns.
       */
      void wait(void);

      //! Signal the condition variable.
      /*!
        The mutex must be locked before calling this function, and then
                subsequently unlocked after this function returns.
       */
      void signal(void);

    protected:

     MUTEX mutex_;                    ##################x LINE 67
     CONDITION condition_;            ##################  LINE 68

    };
    } // stk namespace
    #endif 
```

* * *

和 Mutex.cpp 的代码

```
/***************************************************/
/*! \class Mutex
    \brief STK mutex class.

    This class provides a uniform interface for
    cross-platform mutex use.  On Linux and IRIX
    systems, the pthread library is used. Under
    Windows, critical sections are used.

    by Perry R. Cook and Gary P. Scavone, 1995-2011.
*/
/***************************************************/

#include "Mutex.h"

namespace stk {

Mutex :: Mutex()
{

#if (defined(__OS_IRIX__) || defined(__OS_LINUX__) || defined(__OS_MACOSX__))

  pthread_mutex_init(&mutex_, NULL);
  pthread_cond_init(&condition_, NULL);

#elif defined(__OS_WINDOWS__)

  InitializeCriticalSection(&mutex_);
  condition_ = CreateEvent(NULL,  // no security
                           true,  // manual-reset
                           false, // non-signaled initially
                           NULL); // unnamed

#endif 
}

Mutex :: ~Mutex()
{
#if (defined(__OS_IRIX__) || defined(__OS_LINUX__) || defined(__OS_MACOSX__))

  pthread_mutex_destroy(&mutex_);
  pthread_cond_destroy(&condition_);

#elif defined(__OS_WINDOWS__)

  DeleteCriticalSection(&mutex_);
  CloseHandle( condition_ );

#endif 
}

void Mutex :: lock()
{
#if (defined(__OS_IRIX__) || defined(__OS_LINUX__) || defined(__OS_MACOSX__))

  pthread_mutex_lock(&mutex_);

#elif defined(__OS_WINDOWS__)

  EnterCriticalSection(&mutex_);

#endif 
}

void Mutex :: unlock()
{
#if (defined(__OS_IRIX__) || defined(__OS_LINUX__) || defined(__OS_MACOSX__))

  pthread_mutex_unlock(&mutex_);

#elif defined(__OS_WINDOWS__)

  LeaveCriticalSection(&mutex_);

#endif 
}

void Mutex :: wait()
{
#if (defined(__OS_IRIX__) || defined(__OS_LINUX__) || defined(__OS_MACOSX__))

  pthread_cond_wait(&condition_, &mutex_);

#elif defined(__OS_WINDOWS__)

  WaitForMultipleObjects(1, &condition_, false, INFINITE);

#endif 
}

void Mutex :: signal()
{
#if (defined(__OS_IRIX__) || defined(__OS_LINUX__) || defined(__OS_MACOSX__))

  pthread_cond_signal(&condition_);

#elif defined(__OS_WINDOWS__)

  SetEvent( condition_ );

#endif 
}
} // stk namespace 
```

* * *

和代码，Mutex.h 包括在哪里：(RtWvOut.h)

```
#ifndef STK_RTWVOUT_H
#define STK_RTWVOUT_H

#include "WvOut.h"
#include "RtAudio.h"
#include "Mutex.h"

namespace stk {

/***************************************************/
/*! \class RtWvOut
    \brief STK realtime audio (blocking) output class.

    This class provides a simplified interface to RtAudio for realtime
    audio output.  It is a subclass of WvOut.  This class makes use of
    RtAudio's callback functionality by creating a large ring-buffer
    into which data is written.  This class should not be used when
    low-latency is desired.

    RtWvOut supports multi-channel data in interleaved format.  It is
    important to distinguish the tick() method that outputs a single
    sample to all channels in a sample frame from the overloaded one
    that takes a reference to an StkFrames object for multi-channel
    and/or multi-frame data.

    by Perry R. Cook and Gary P. Scavone, 1995-2011.
*/
/***************************************************/

class RtWvOut : public WvOut
{
 public:

  //! Default constructor.
  /*!
    The default \e device argument value (zero) will select the
    default output device on your system.  The first device enumerated
    by the underlying audio API is specified with a value of one.  The
    default buffer size of RT_BUFFER_SIZE is defined in Stk.h.  An
    StkError will be thrown if an error occurs duing instantiation.
  */
  RtWvOut( unsigned int nChannels = 1, StkFloat sampleRate = Stk::sampleRate(),
           int device = 0, int bufferFrames = RT_BUFFER_SIZE, int nBuffers = 20 );

  //! Class destructor.
  ~RtWvOut();

  //! Start the audio output stream.
  /*!
    The stream is started automatically, if necessary, when a
    tick() method is called.
  */
  void start( void );

  //! Stop the audio output stream.
  /*!
    It may be necessary to use this method to avoid undesireable
    audio buffer cycling if you wish to temporarily stop audio output.
  */
  void stop( void );

  //! Output a single sample to all channels in a sample frame.
  /*!
    If the device is "stopped", it is "started".
  */
  void tick( const StkFloat sample );

  //! Output the StkFrames data.
  /*!
    If the device is "stopped", it is "started".  The number of
    channels in the StkFrames argument must equal the number of
    channels specified during instantiation.  However, this is only
    checked if _STK_DEBUG_ is defined during compilation, in which
    case an incompatibility will trigger an StkError exception.
  */
  void tick( const StkFrames& frames );

  // This function is not intended for general use but must be
  // public for access from the audio callback function.
  int readBuffer( void *buffer, unsigned int frameCount );

 protected:

  RtAudio dac_;
  Mutex mutex_;
  bool stopped_;
  unsigned int readIndex_;
  unsigned int writeIndex_;
  long framesFilled_;
  unsigned int status_; // running = 0, emptying buffer = 1, finished = 2

};

} // stk namespace

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:33:59.070

你有没有告诉它它在哪个平台上运行？如果你看这行代码：

```
#if (defined(__OS_IRIX__) || defined(__OS_LINUX__) || defined(__OS_MACOSX__)){ 
```

你可以看到，它需要以某种方式被告知。有些东西必须定义适当的`__OS_...`标志。

# php - 预订系统租用一天一个街区

> ID：10329775
> 
> 赞同：3
> 
> 时间：2012-04-26T08:30:29.417
> 
> 标签：php, mysql, datetime, timestamp

我在使用必须构建的预订系统 (PHP/Mysql) 验证日期时遇到问题。[我在预订系统日期](https://stackoverflow.com/questions/10304552/reservation-system-dates/10305681#10305681)之前发布了一个类似的问题，但有些事情发生了变化。

我遇到的问题；我们在办公室设有工作室/会议室。这是在有限的时间范围内出租。用户选择他想租房间的日期、时间和小时数。

**预约步骤：**

1- 用户选择他想要租用工作室的月份。2-用户选择他想要租用工作室的日期。（我在这里卡住了） 3- 用户选择他希望获得密钥的时间。

**领取钥匙的时间：**

```
00:00:00 - 06:00:00
06:00:00 - 12:00:00
12:00:00 - 18:00:00
18:00:00 - 24:00:00 
```

这些时间是用户将收到门钥匙的时间。

4- 用户选择他希望租用工作室的小时数。

**问题：** 我可以查看工作室租用的日期，但不知道具体的时间。我知道如何在 PHP 中检查时间。但例如；

用户 1 于 2012 年 4 月 27 日 12:00:00 至 18 小时后租用工作室。用户 2 想在 2012 年 4 月 26 日 18:00:00 到 12 小时后租用工作室。用户 3 想在 4 月 28 日租用工作室。

我将如何检查用户 2 是否可以在最多 4 月 27 日 12:00:00 之前租用工作室。以及如何检查用户 3 是否可以在 28 日租用工作室并确保它在 06:00 之后可用。

**数据库：**

```
id                 int(11)
user_id             int(11)
rental_name         varchar(255)
key_receive_time varchar(255)
start_date         int(11)
end_date         int(11)
total_hours      int(11) 
```

我已经连续2天了，仍然无法破解它。我想解决方案很简单，但我可能朝错误的方向搜索。

提前致谢。

**编辑示例查询：**

```
SELECT * FROM reservations
WHERE (start_date >= " . $start_block_1 . " AND end_date <= " . $end_block_1   . ")
OR    (start_date >= " . $end_block_1   . " AND end_date <= " . $start_block_1 . ") 
```

`$start_block_1`和表示一天中**00:00:00 - 06:00:00**块的`$end_block_1`时间戳 。

 **我执行此查询 4 ​​次，因为一天中有 4 个区块可供用户获取密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:59:44.813

似乎您需要检查间隔（一对开始日期和结束日期）是否与数据库中的现有间隔冲突。如果这是您想要的，那么这里是查询：

```
-- //// FOR TESTING \\\\
CREATE TABLE reservations (start_date INT, end_date INT);

INSERT INTO reservations(
    start_date,
    end_date
)
VALUES (
    UNIX_TIMESTAMP('2012-04-27 12:00:00'), -- start date booked by user 1
    UNIX_TIMESTAMP('2012-04-28 06:00:00')  -- end date booked by user 1
);

SET @d1 = UNIX_TIMESTAMP('2012-04-26 18:00:00'); -- start date requested by user 2
SET @d2 = UNIX_TIMESTAMP('2012-04-27 06:00:00'); -- end date requested by user 2
-- \\\\ FOR TESTING ////

SELECT 1
FROM reservations
WHERE
(@d1        <= start_date AND start_date <  @d2     ) OR -- start datetime lies "inside" the interval
(@d1        <  end_date   AND end_date   <= @d2     ) OR -- end datetime lies "inside" the interval
(start_date <= @d1        AND @d2        <= end_date)    -- the interval itself lies inside start and end datetime 
```

查询将返回与给定间隔冲突的行。变量`@d1`和`@d2`用于在 mysql 客户端中测试您的查询；用从 PHP 代码传入的数据替换它们。

注意：比较运算符`<`和`<=`可能需要更改，具体取决于您的开始/结束日期时间是包含还是不包含。**

# java - HttpResponse 代码 302

> ID：10329779
> 
> 赞同：6
> 
> 时间：2012-04-26T08:30:34.290
> 
> 标签：java, http, blackberry, http-status-code-302

我正在使用模拟器 BB 8900。我正在尝试连接到 url 并获取响应代码 302。这是什么意思？这是我的代码片段：

```
import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;
.....
connection = (HttpConnection)Connector.open(url);
responseCode = connection.getResponseCode(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T08:46:49.233

[HTTP 302 是“临时重定向”](http://en.wikipedia.org/wiki/HTTP_302)。你需要处理它。

根据标准，如果您收到 302 响应，则响应将包含带有重定向的“Location”标头字段：

```
Client request:
GET /index.html HTTP/1.1
Host: www.example.com

Server response:
HTTP/1.1 302 Found
Location: http://www.redirected-address.example.com/ 
```

您需要从响应中提取新 URL。（[`getHeaderField("Location")`](http://java.sun.com/javame/reference/apis/jsr219/javax/microedition/io/HttpConnection.html#getHeaderField%28java.lang.String%29)用于执行此操作）。然后在你得到的新 URL 上执行相同的方法。

另外两点：

1.  由于这是一个“临时”重定向，因此您无法存储此新 URL。您应该继续使用旧的，如果它返回 302，则使用“位置”中的任何 URL。

2.  如果您没有执行 GET 或 HEAD，则不应自动执行重定向。而是要求用户干预。[RFC 要求这样做](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。

# android - SurfaceView 自动隐藏

> ID：10329781
> 
> 赞同：0
> 
> 时间：2012-04-26T08:30:38.080
> 
> 标签：android

我有一个 glview 和一个表面视图。我所做的是我创建了一个相对布局并在该相对布局上添加了两个视图。一切正常。我的 glview 在后面，而我的 surfaceview 在前面。

但是当我按下主页按钮并回到我的活动表面视图时，会自动回到后面。只有当我按下主页按钮时才会出现问题。

我已经尝试了几件事，但表面视图并没有出现在前面。谁能帮我。提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:55:39.673

我自己找到了解决方案。我没有将所有内容添加到单个相对布局中，而是将 setcontentview(glview) 设置为 glview，它将允许我的 glview 显示在整个屏幕上。

我添加到相对布局中的所有其他内容，然后将内容视图添加到具有透明背景的相对布局中。这允许我的相对布局总是在前面，而我的表面视图在相同的相对布局上总是在前面。

# touch - 如何在 Windows 8 中触摸交互后显示指针

> ID：10329785
> 
> 赞同：6
> 
> 时间：2012-04-26T08:30:56.350
> 
> 标签：touch, accessibility, windows-8

当您在 Windows 8 中触摸屏幕时，鼠标指针会隐藏，直到您移动鼠标（或其他指针设备）。这发生在桌面和 Metro 界面中。

我们有一个程序允许人们使用其他输入法（例如操纵杆）移动鼠标指针，因此我需要确保鼠标指针可见。

如何强制显示鼠标指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T03:29:24.627

您可以设置触摸反馈的标志。

`[setting]` `->[control panel]->[pen and touch]->[touch feekback]`项目，有一个复选框，`[show visual feedback when touch the screen]`如果你不能选择复选框，你可以在触摸屏幕时显示鼠标指针而不用编码任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T12:13:28.847

您可以使用 Windows API 在开始操纵杆控制之前注入鼠标移动：

```
POINT p;
GetCursorPos(&p);

MOUSEINPUT mi;
mi.dx = (LONG) ((p.x * 65535) / screen_width);
mi.dy = (LONG) ((p.y * 65535) / screen_height);
mi.mouseData = 0;
mi.dwFlags = type | MOUSEEVENTF_ABSOLUTE;
mi.time = 0;
mi.dwExtraInfo = NULL;

INPUT input;
input.type = INPUT_MOUSE;
input.mi   = mi;

SendInput(1, &input, sizeof(INPUT)); 
```

# c++ - 使用 SDL 加载 OpenGL 纹理

> ID：10329786
> 
> 赞同：2
> 
> 时间：2012-04-26T08:31:00.747
> 
> 标签：c++, opengl, sdl, sdl-opengl

我已经开始使用 NeHe 教程学习 OpenGL。这是第 6 课的代码。它应该加载一个 bmp 图像并将其用作我正在绘制的立方体的纹理。但是它不能正常工作并且立方体完全保持白色。加载图像的功能是“loadGLTextures”。有人可以帮忙吗？我的图像位深度是 24。我正在使用 Visual Studio 2010。

```
#include <Windows.h>
#include <stdio.h>
#include <gl\GL.h>
#include <gl\GLU.h>
#include <SDL\SDL.h>

#pragma comment(lib , "SDL.lib")
#pragma comment(lib , "SDLmain.lib")
#pragma comment(lib , "OPENGL32.lib")
#pragma comment(lib , "glu32.lib")

//height , width and bit depth
#define SCREEN_WIDTH 800
#define SCREEN_HEIGHT 600
#define SCREEN_BPP 16

//SDL surface
SDL_Surface* surface;

//Texture storage.
GLuint texture[1];

//Quit func.
void Quit(int returnCode)
{
    SDL_Quit();
    exit(returnCode);
}

//This function will load a bitmap image.
bool loadGLTextures(void)
{
    SDL_Surface* textureImage;
    textureImage = SDL_LoadBMP("123.bmp");
    if(!textureImage)
    {
        fprintf(stderr , "Couldn't load %s.\n" , "123.bmp");
        return false;
    }

    else
    {
        //Create the texture.
        glGenTextures(1 , &texture[0]);

        //Typical texture generation using data from the bitmap.
        glBindTexture(GL_TEXTURE_2D , texture[0]);

        //Generate the texture.
        glTexImage2D(GL_TEXTURE_2D , 0 , 3 , textureImage->w , 
            textureImage->h , 0 , GL_RGB , GL_UNSIGNED_BYTE , 
            textureImage->pixels);

        //Linear filtering.
        glTexParameteri(GL_TEXTURE_2D , GL_TEXTURE_MIN_FILTER , GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D , GL_TEXTURE_MAG_FILTER , GL_LINEAR);

        //Free up the memory.
        if(textureImage)
            SDL_FreeSurface(textureImage);

        return true;
    }

}

//All of the drawing goes throw this.
int drawGLScene(void)
{
    static float xrot = 0 , yrot = 0 , zrot = 0;
    //Clear screen and depth buffer.
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();

    glTranslatef(0.0f , 0.0f , -5.0f);
    glRotatef(xrot , 1.0f , 0.0f , 0.0f);
    glRotatef(yrot , 0.0f , 1.0f , 0.0f);
    glRotatef(zrot , 0.0f , 0.0f  ,1.0f);

    //Select the texture.
    glBindTexture(GL_TEXTURE_2D , texture[0]);

    glBegin(GL_QUADS);
    //Front:
    //Bottom left of the texture and quad.
    glTexCoord2f(0.0f , 0.0f); glVertex3f(-1.0f , -1.0f , 1.0f);
    //Bottom right fo the texture and quad.
    glTexCoord2f(1.0f , 0.0f); glVertex3f(1.0f , -1.0f , 1.0f);
    //Top right of the texture and quad.
    glTexCoord2f(1.0f , 1.0f); glVertex3f(1.0f , 1.0f , 1.0f);
    //Top left of the texture and quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(-1.0f , 1.0f , 1.0f);

    //Back:
    //Bottom left of the texture and quad.
    glTexCoord2f(0.0f , 0.0f); glVertex3f(1.0f , -1.0f , -1.0f);
    //Bottom right of the texture and quad.
    glTexCoord2f(1.0f , 0.0f); glVertex3f(-1.0f , -1.0f , -1.0f);
    //Top right of the texture and the quad.
    glTexCoord2f(1.0f , 1.0f); glVertex3f(-1.0f , 1.0f , -1.0f);
    //Top left of the texture and the quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(1.0f , 1.0f , -1.0f);

    //Top:
    //Top right of the texture and quad.
    glTexCoord2f(1.0f , 1.0f); glVertex3f(1.0f , 1.0f , -1.0f);
    //Top left of the texture and quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(-1.0f , 1.0f , -1.0f);
    //Bottom left of the texture and quad.
    glTexCoord2f(0.0f , 0.0f); glVertex3f(-1.0f , 1.0f , 1.0f);
    //Bottom right of the texture and quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(1.0f , 1.0f , 1.0f);

    //Bottom:
    //Top left of the texture and quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(-1.0f , -1.0f , 1.0f);
    //Bottom left of the texture and quad.
    glTexCoord2f(0.0f , 0.0f); glVertex3f(-1.0f , -1.0f , -1.0f);
    //Bottom right of the texture and quad.
    glTexCoord2f(1.0f , 0.0f); glVertex3f(1.0f , -1.0f , -1.0f);
    //Top right of the texture and quad.
    glTexCoord2f(1.0f , 1.0f); glVertex3f(1.0f , -1.0f , 1.0f);

    //Right:
    //Bottom right of the texture and quad.
    glTexCoord2f(1.0f , 0.0f); glVertex3f(1.0f , -1.0f , -1.0f);
    //Top right of the texture and quad.
    glTexCoord2f(1.0f , 1.0f); glVertex3f(1.0f , 1.0f , -1.0f);
    //Top left of the texture and quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(1.0f , 1.0f , 1.0f);
    //Bottom left of the texture and quad.
    glTexCoord2f(0.0f , 0.0f); glVertex3f(1.0f , -1.0f , 1.0f);

    //Left:
    //Bottom left of the texture and quad.
    glTexCoord2f(0.0f , 0.0f); glVertex3f(-1.0f , -1.0f , -1.0f);
    //Bottom right of the texture and quad.
    glTexCoord2f(1.0f , 0.0f); glVertex3f(-1.0f , -1.0f , 1.0f);
    //Top right of the texture and quad.
    glTexCoord2f(1.0f , 1.0f); glVertex3f(-1.0f , 1.0f , 1.0f);
    //Top left of the texture and quad.
    glTexCoord2f(0.0f , 1.0f); glVertex3f(-1.0f , 1.0f , -1.0f);
    glEnd();

    SDL_GL_SwapBuffers();

    xrot += 0.1;
    yrot += 0.1;
    zrot += 0.1;

    return true;

}

//This function will reset our viewport after a windows resize.
int resizeWindow(int width , int height)
{
    //Height / width ration.
    float ratio;

    //Protect against a division by zero.
    if(height == 0)
        height = 1;

    ratio = width / height;

    //Setup viewport
    glViewport(0 , 0 , width , height);

    //Change to the projection matrix and reset it.
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    //set perspective.
    gluPerspective(45.0f , ratio , 0.1f , 100.0f);

    //Change to model view matrix and reset it.
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    return true;
}

//Toggle fullScreen.
void toggleFullscreen(SDL_Surface* screen)
{
    int videoFlags = screen->flags;
    (videoFlags & SDL_FULLSCREEN) == SDL_FULLSCREEN ? videoFlags ^= SDL_FULLSCREEN : videoFlags |= SDL_FULLSCREEN;//NICE!!
    screen = SDL_SetVideoMode(SCREEN_WIDTH , SCREEN_HEIGHT , SCREEN_BPP , videoFlags);
    resizeWindow(surface->w , surface->h);
    drawGLScene();
}

//OpenGL initialization.
int initGL(void)
{
    if(!loadGLTextures())
        return false;

    glShadeModel(GL_SMOOTH);
    glEnable(GL_TEXTURE_2D); //Enable texture mapping.
    glClearColor(0.0f , 0.0f , 0.0f , 0.5f);
    glClearDepth(1.0f);
    glEnable(GL_DEPTH_TEST);
    glDepthFunc(GL_LEQUAL);
    //Nice perspective.
    glHint(GL_PERSPECTIVE_CORRECTION_HINT , GL_NICEST);
    return true;
}

//This func will handle any key inputs.
void handleKeyPress(SDL_keysym* keysym)
{
    switch(keysym->sym)
    {
    case SDLK_ESCAPE:
            Quit(0);
            break;
    case SDLK_F1:
        toggleFullscreen(surface);
        break;
    case SDLK_r:
        drawGLScene();
        break;
    default:
        break;
    }
    return;
}

int main(int argc , char* argv[])
{
    //Flags to pass to SDL_SetVideoMode : awsome!! ints can be compiled.
    int videoFlags;
    //Event
    SDL_Event event;
    //Holds information about display.
    const SDL_VideoInfo* videoInfo;
    //Is window active?
    bool isActive = true;

    //SDL initialization.
    if(SDL_Init(SDL_INIT_VIDEO) < 0)
    {
        fprintf(stderr , "SDL video initialization failed : %s\n" , SDL_GetError());
        Quit(1);
    }

    //Fetch the video info.
    videoInfo = SDL_GetVideoInfo();

    if(!videoInfo)
    {
        fprintf(stderr , "Video query failed : %s\n" , SDL_GetError());
        Quit(1);
    }

    //Add flags to pass to SDL_SetVideoMode.
    videoFlags = SDL_OPENGL;              //Enable OpenGL in SDL.
    videoFlags |= SDL_GL_DOUBLEBUFFER;    //Enable double buffering.
    videoFlags |= SDL_HWPALETTE;          //Store the palette in hardware.
    videoFlags |= SDL_RESIZABLE;          //Enable window resizing.

    //This checks to see if surfaces can be stored in hardware.
    videoInfo->hw_available ? videoFlags |= SDL_HWSURFACE : SDL_SWSURFACE;

    //This checks if harware blits can be done.
    if(videoInfo->blit_hw)
        videoFlags |= SDL_HWACCEL;

    //Set OpenGL double buffering.
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER , 1);

    surface = SDL_SetVideoMode(SCREEN_WIDTH , SCREEN_HEIGHT , 16 , videoFlags);

    //verify the surface.
    if(!surface)
    {
        fprintf(stderr , "Video mode set failed : %s\n" , SDL_GetError());
        Quit(1);
    }

    SDL_WM_SetCaption("OpenGL-Sample" , 0);

    //initialize OpenGL
    if(initGL() == false)
    {
        fprintf(stderr , "Could not initialize OpenGL.\n");
        Quit(1);
    }

    //Main loop
    while(1)
    {
        //Handle the events in the queue.
        if(SDL_PollEvent(&event))
        {
            switch(event.type)
            {
            case SDL_ACTIVEEVENT:
                if(event.active.gain == 0)
                    isActive = false;
                else
                    isActive = true;
                break;
            case SDL_VIDEORESIZE:
                //Handle resize event.
                surface = SDL_SetVideoMode(event.resize.w , event.resize.h , SCREEN_BPP , videoFlags);
                if(!surface)
                {
                    fprintf(stderr , "Could not get a surface after resize : %s\n" , SDL_GetError());
                    Quit(1);
                }
                resizeWindow(event.resize.w , event.resize.h);
                break;
            case SDL_KEYDOWN:
                handleKeyPress(&event.key.keysym);
                break;
            case SDL_QUIT:
                Quit(0);
            default:
                break;
            }
        }
        if(isActive)
            drawGLScene();
    }

} 
```

这是我要加载的[图像。](http://myup.ir/images/55988621609195672965.bmp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:41:57.600

我使用 SOIL 库[http://www.lonesock.net/soil.html](http://www.lonesock.net/soil.html)，

这是一个非常易于使用的 OpenGL 纹理加载器库，您不必担心图像格式或自己编写任何加载代码，它会为您完成这一切。

加载纹理就像这样简单：

```
int textureID = SOIL_load_OGL_texture("img.png", SOIL_LOAD_AUTO, 
    SOIL_CREATE_NEW_ID, SOIL_FLAG_MIPMAPS);
if(textureID == 0) { cout << "Failed to load texture!" << endl }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:22:29.273

Everything depends on your image's format. As Michael said `SDL_LoadBMP` does not convert the image data. So you can't be sure which flag you should pass.
I recommend you to use `SDL_Image` library. Which converts all the image formats to one specific format. Then you can use (for example) `GL_RGBA` flag and make sure everything works!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:03:46.123

通过更改，我能够让您的程序生成纹理（尽管它是镜像的）：

```
 textureImage->h , 0 , GL_RGB , GL_UNSIGNED_BYTE , 
```

至：

```
 textureImage->h , 0 , GL_RGBA , GL_UNSIGNED_BYTE , 
```

不幸的是，弄错该字段不会产生任何错误。如果您试图告诉 GL 图像数据比实际数据大，它可能会导致您的程序崩溃，但是传递 GL_RGB 而不是 GL_RGBA 的效果是说它比实际数据小。

Keep in mind that [`SDL_LoadBMP()`](http://sdl.beuc.net/sdl.wiki/SDL_LoadBMP) doesn't attempt to convert the image data, so you have to make sure the format of the BMP file is what the program expects. you probably need to use GL_RGBA or GL_RGB.

# computer-vision - 对图像/视频中的 3D 测量初学者的建议？

> ID：10329790
> 
> 赞同：1
> 
> 时间：2012-04-26T08:31:16.090
> 
> 标签：computer-vision

我应该面对在监控视频中估计汽车尺寸（长度、宽度和高度）的应用。我应该从哪里开始学习？最新技术可以达到的基线准确度（%1？%10？）是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T15:53:36.793

最近对自动流量分析的评论就是[这个](http://www.mendeley.com/research/review-computer-vision-techniques-analysis-urban-traffic/)。一个稍微大一点的[在这里](http://www.mendeley.com/research/computer-vision-techniques-traffic-flow-computation/)。

实际上 - 这是一个难题。对相关车辆的额外测量至少需要某种形式的校准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T11:29:16.547

这不是一个容易学习的主题，但如果你愿意，这里有一本很棒的书可以帮助你入门：[计算机视觉中的多视图几何](http://www.robots.ox.ac.uk/~vgg/hzbook/)

# html - 带有图像的样式按钮？

> ID：10329793
> 
> 赞同：4
> 
> 时间：2012-04-26T08:31:40.037
> 
> 标签：html, css, forms

我一直在尝试使用图像设置提交按钮的样式。我会使用 CSS，但按钮设计过于复杂。我尝试将背景图像添加到按钮，但图像位置错误。我也尝试过使用

`<input type="image" src="myimage.png">`

但唉，这不是一个提交按钮，所以它不起作用。我已经查看并尝试了所有我认为可能的方法，但找不到使按钮提交表单的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:34:40.163

如果`<input type="image">`没有按预期工作，请尝试

```
<button type="submit"><img src="myimage.png"></button> 
```

但是正如我在上面写的评论一样，您的代码也应该可以正常工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T08:51:54.077

提交按钮有不同的可能性：

```
<input type="image">
<input type="submit">
<button></button> <!-- no type needed, since submit is the default type --> 
```

这些都是提交按钮。选择最适合您的那个。

现在您可以选择在按钮之间放置图像或使用背景图像并正确定位它们。

带有背景图像的按钮示例：

```
button {
  background:url(data:image/gif;base64,R0lGODlhEgASAPYAAAAA/2NFB4tsE7KKCtCiDbWMCpFwDotwGdCgAe65FvjFKvjGLffDJNuqC5V1EaqJGPjHMPbKPvfOTLuRCo5yG+q3F/bEKG1SFdGjBvrcbeGuD2NFCY5wFfG+JPfNRpp1CLSOEfnJNPbOS/rPRsCSBmdJC8+mGvnLOv3ni/3nj/zkgPrUU9uqDWNCA9GoHfjSVfvie/rXW96tEmVHCreQFPnLP/fTXfrbdPzihf3qlP3mhsSYD5VzEPXEOffSWvrbcfzigP3rkqJ8DXFWFd2tFPrQSfnYYvvfdQAAAO7CNGVHDJh3DfLCK/nSUPraZ/zjfv3qkvzlhfvecqiCD2pNEL6TC/fGLvrSTfrbav3pjv3ojPzlgv3TT82kIWpOEZ55C+OyFfnMPvzdb/zda/3XWe/FOqiDEGpKAWZJDXNWEZt2B8KXDt6vHd+yIcifHKN+EXRTAmtQFmlMD2JCBWdIBmdIAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQF+gAAACwAAAAAEgASAAYH/4AAgoN1dHNzcnGDi4Rwb25tbGtqaWiMgmdmZWRjYmNkYWBfXoxnXVxiW1pZWltYV1ZVVIRTXFJRWVC6WU9OTUxLSoJwSWO4SEi6yEdGRURDAHRCV0+5yFBByEA/Pj08SnQ7ZDrWSDlQyDg3NjU0M3MyMTrK5lnIMFgvNS4tLSwrKqCcS4FiC5AnUoxcOWGiRQkSI6ToQKFjy5OLR7DEEBECxBwvH6zEQALjIgwYGUd66MBhA4A0Gkb4QJIhgxQsTkaKOIHhgiAlXyyIaIKsKBIPNSpQmDPIy4QOYUSIkCDCQwQIFR7MYCTHQQMGC6woYJAAwYGtl2ZcMFCAAIEBAg0utLi0aMOGfgHmMgoEACH5BAkFAAAALAYABQAGAAMABgcMgFCCg1BBhodBgoaBACH5BAkKAAAALAYABQAGAAMABgcOgEhIUFCCgkFBhoOFSIEAIfkEAQUAAAAsBgAFAAYAAwAGBwyAUIKDUEGGh0GChoEAOw==) no-repeat 5px center;
  padding:5px 5px 5px 27px;
}
```

```
<button type='submit'>Submit</button>
```

（或作为[小提琴](http://jsfiddle.net/wRtpR)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T08:40:37.497

使用按钮元素并使用 css 对其进行样式设置。不要省略文本，您的表单应该可以在[没有](http://en.wikipedia.org/wiki/Web_accessibility)图像或 css 的情况下访问。

```
<button type='submit'>Informative submit text</button>

button {
    background-image:url('myimage.png');
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-17T23:50:06.840

如果有人需要更新的 html5 好的答案：

```
<button id='' name=''  value='' ><img src='img.jpg' /></button> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T08:53:08.523

```
<input type="image" src="myimage.png"> 
```

或者

```
<input type="submit" style="background:url(myimage.png)"> 
```

# c# - 无法提取属性数据

> ID：10329794
> 
> 赞同：1
> 
> 时间：2012-04-26T08:31:51.073
> 
> 标签：c#, reflection, attributes

我正在尝试提取属性。属性是自定义属性。![在此处输入图像描述](../Images/b0347b3ee8ac8f532996b6331cf79a50.png) 但是有些我无法使用`object.id`的东西。
例如，我的注释代码`adpter.id`无效，即使您看到我已将该对象转换为它的类型。

这是属性的代码：

```
 [AttributeUsage(AttributeTargets.All, AllowMultiple = true, Inherited = true)]
 public class Adapter : Attribute
 {
    // This class implements the Adapter Attribite
    readonly int id;
    readonly string Title;
    public string Comment { get; set; }

    private string[] Relation;

    public Adapter(int id, string Title,string []relations)
    {
       this.id = id;
       this.Title = Title;
       this.Relation = relations;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:39:14.267

字段的默认可见性是私有的，尝试制作`id`和`Title`公开。
您还可以使用私有设置器将字段更改为属性，如下所示：

```
public Id { get; private set; }
public Title { get; private set; } 
```

或只读属性：

```
public Id { get { return id; }  }
public Title { get { return title; } } 
```

因为创建公共领域被认为是糟糕的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:38:45.447

你想从另一个类中读取 id 吗？您缺少公共修饰符。

```
public readonly int id; 
```

缺少修饰符的变量、属性和方法将自动变为私有。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T08:40:37.263

我想给定一个类作为私有成员的默认行为，您可以尝试将其更改为`public`!

# bugzilla - 我可以通过重新导入 XML 来修改 BugZilla 中的错误字段吗？

> ID：10329795
> 
> 赞同：2
> 
> 时间：2012-04-26T08:31:52.597
> 
> 标签：bugzilla

在 BugZilla 中，我们可以通过读取 XML 文件来导入数据[`importxml.pl`](http://bzr.mozilla.org/bugzilla/4.0/annotate/head:/importxml.pl)。

是否可以通过读取某些 XML 文件`importxml.pl`或其他方式来更新现有错误的某些字段？如果是，那么如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:25:24.947

不是通过 importxml.pl。但是，email_in.pl 可以做到这一点，但不是 XML 格式。

[http://www.bugzilla.org/docs/4.2/en/html/api/email_in.html](http://www.bugzilla.org/docs/4.2/en/html/api/email_in.html)

# php - 从 PHP 更新 Javascript 变量而无需重新加载页面

> ID：10329799
> 
> 赞同：0
> 
> 时间：2012-04-26T08:32:01.947
> 
> 标签：php, jquery

我使用 jCart 作为购物车，从 jCart 可以得到变量`$subtotal`.

但是，当更改购物车中的某些内容时，该变量`$subtotal`在页面重新加载之前不会更改。

是否可以使用 jQuery 来更新`$subtotal`页面点击`.click(function())`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T09:21:48.437

*The question is flawed to begin with.*

PHP runs server side. When all PHP is done, it gets presented to the browser and all the variables are gone. Maybe you're echoing some of them, so they are "there" in literal format, **but there is no PHP variable anymore to update.**

You can update something, like a javascript variable that you have filled before trough PHP, or a HTML value that got set by PHP. This can be done by reload, or this can be done by using an AJAX post, then some PHP magic, then a return + assign, but you are NOT replacing/reloading any PHP variables.

It is REALLY important to understand that **there is no `$subtotal` anymore** whatsoever after you've send the page to the browser. Please look into server side versus client side!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:11:27.937

我在这里为您制作了一个 ajax 帖子示例的 JSFiddle（无需重新加载页面）：http: [//jsfiddle.net/5RjUt/1/](http://jsfiddle.net/5RjUt/1/)

查询

```
$("#button").click(function(){ // click function fired

var subtotal = $("#subtotal").val()
var dataString = 'subtotal=' + subtotal;

$.ajax({ // ajax post
    type: "POST",
    url: "YOUR_PHP_PAGE.php", // post data to this URL
    data: dataString,
    cache: false,
    success: function(html){ // this is where you can set a success callback
       $("#subtotal").val("You're new value");
    }
});
return false; // this tells the page not to refresh

)};​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:41:41.923

## 有点不清楚您要做什么

但这里有一些建议。

* * *

## 仅使用 jQuery 更新客户端：

如果您需要更新网页上的某些可见值，假设您只需要增加或减少`subtotal`网页上显示的值，那么您可以使用 jQuery 来执行此操作，而无需任何服务器端处理。

### 客户端处理（Javascript / jQuery）：

```
var subtotal = 0;

// Add value to subtotal and update div displaying subtotal
function addToSubtotal( value ) {
    subtotal += value;
    $('#subtotal').html(subtotal);
}

// When DOM is loaded...
$(document).ready( function(){
    // Bind onclick event to every <a class="buyme">
    $('.product').on('click', 'a.buyme', null, function(e){
        // Buyme link clicked, add <span class="pricetag"> value to subtotal:
        addToSubtotal( parseInt( $(this).siblings('.pricetag').html() ));
    });
}); 
```

​</p>

### 客户端处理（HTML）：

```
<div class="product">
    <a class="buyme" href="#">Add to subtotal</a><br/>
    <span class="pricetag">55</span>€
</div>
<br/>
<span id="subtotal">0</span>​​​​​​​​​​​ 
```

* * *

## 或者使用 jQuery.ajax() 来更新服务器端：

您也可以使用它来更新 JS 变量，尤其是在服务器检查并返回`subtotal`. 在这种情况下，实际上是服务器为您返回新的小计值。

似乎您的 PHP 变量`$subtotal`首先是从某个数据存储系统中读取的，它可能看起来总是在那里，例如在执行`$myStore = new onlineStore();`.

我假设它`$subtotal`已经可用并且包含一些一致的整数值。

### AJAX 更新请求的代码（服务器端和客户端）：

如果正确使用，这将更新`server side`PHP 变量，并检索它们以与`client side`jQuery / Javascript 一起使用。

但是，此功能不会开箱即用，只能用作您完整实施的起点。

### 客户端处理（javascript/jquery）：

```
function updateSubtotalAtServer( args ) {
    $.ajax({
        type: 'POST',
        url: 'processing.php', // <= Request url
        // Add method=ajax, we use PHP to check that value
        data: $(args).serialize()+"&method=ajax",
        // processing.php returned some data:
        success: function(data){
            // Try decoding data as JSON encoded string:
            try { 
                dataobj = $.parseJSON(data);
            } catch (e) { 
                dataobj = null;
            }
            // Check if JSON return value decoded successfully:
            if (dataobj !== null) {
                // Successfully decoded JSON, log values to console.
                // ...update subtotal <span> to display it for user:
                $('#subtotal').html( dataobj.subtotal );
                console.log( dataobj );
            } else {
                // Result was not JSON string (server error).
            }
        }
    });
}

// Create new object to be used as array:
var arrayobject = new Object;
// Add this value at server side to $subtotal:
arrayobject.addtosubtotal = 55;
// Then send ajax request to server:
updateSubtotalAtServer( yourvariables or array object ); 
```

### 服务器端处理（php）：

```
// Variable that needs updating:
/* $subtotal is already available, ..read above.. */ 

if (isset($_POST['method']) && $_POST['method'] == 'ajax') {
    // Update variables:
    $subtotal += (int)$_POST['addtosubtotal'];
    // Put all data together what is needed at client side:
    $ajaxreply = array( 'subtotal' => $subtotal, 'othervalue' => 'FooBar' );
    // Return it to browser:
    echo json_encode( $ajaxreply );
    // JSON reply will fail if there is any additional output after that.
    exit;
} 
```

更多阅读/可能有用的答案：
[关于 jQuery.ajax 的另一个答案，专注于 REST、表单和数据数组](https://stackoverflow.com/a/10235181/1338846)
[关于 jQuety.ajax 的另一个答案，从服务器获取数据](https://stackoverflow.com/questions/10197507/displaying-images-with-ajax/10198264#10198264)

# php - 限制字符串中的链接数（PHP）

> ID：10329802
> 
> 赞同：0
> 
> 时间：2012-04-26T08:32:08.360
> 
> 标签：php, regex, hyperlink, limit

我刚刚开始允许在我的博客上发表访客帖子，但为了避免垃圾邮件，我想自动限制每个帖子的链接数量。

如果作者创建的链接超过 3 个，则应删除其余链接，但不应删除锚文本。

这可能吗？

最好的问候金克里斯滕森

编辑：

感谢您的回复。我现在找到了以下解决方案：

```
$html = 'hejsdjhf ksdfh ksdhf ksdfh klsfh kldjfh klsdfh ksdfh ksdfh ksdfh ksd <a href="http://www.test.com">test</a> dkhjdfjkgh ksdfhg ksdhf kjsdhfkg jhsdfklgh sdlfkg <a href="http://www.test.com">test2</a> skdjfh kgh kshg kdjh gklhf gkldhg kjsdfhgk hjsdfkg hdkgh dksfgh ksdfhg ksdhf g <a href="http://www.test.com">test3</a>';

$regexp = "/<a\s[^>]*href=(\"??)([^\" >]*?)\\1[^>]*>(.*)<\/a>/siU";
if(preg_match_all($regexp, $html, $matches)) {
    $link_count = count($matches[2]);
}

//echo $link_count;
$limit = $link_count - 2;

$regexp = "/<a\s[^>]*href=(\"??)([^\" >]*?)\\1[^>]*>(.*)<\/a>/siU";
echo preg_replace($regexp, "$2", $html, $limit); 
```

我不知道它是否非常有效，但它有效:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:37:55.440

您可以使用该函数在循环中查找锚标记结尾 ( `</a>`)，并为您找到的锚的数量设置一个计数器。当你达到三个时，只需在找到最后一个的位置将字符串分成两部分（+4 表示“”的长度）并用于字符串的其余部分。`for``strpos ()``strpos ()``</a>``strip_tags ()`

编辑：像这样的东西：

```
define ('MAX_ANCHOR', 3);
define ('ANCHOR_ENDING', '</a>');

$counter = 0;
$strposResult = 0;
do {
  $strposResult = $strposResult === FALSE ? FALSE : strpos ($string, ANCHOR_ENDING, $strposResult) + strlen (ANCHOR_ENDING);
  $counter++;
} while ($counter < MAX_ANCHOR && $strposResult !== FALSE);

if ($counter == MAX_ANCHOR) {
  $firstHalf = substr ($string, 0, $strposResult);
  $secondHalf = substr ($string, $strposResult);
  $string = $firstHalf . strip_tags ($secondHalf);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:38:21.740

您可以在 PHP 中使用正则表达式

```
preg_match_all('/\<a[^>]+>/i',$html, $result); 
```

此正则表达式将捕获所有链接标记并将其设置在 $result 变量上。

你只需要使用这个 var 来计算你有多少链接标签

# powershell - 如何使用批处理或 PowerShell 脚本遍历 CSV 文件？

> ID：10329804
> 
> 赞同：7
> 
> 时间：2012-04-26T08:32:40.433
> 
> 标签：powershell, batch-file, cmd

我有一个包含两列不同列的 CSV 文件，一列带有 PC 名称，另一列带有 MAC 地址，如下所示：

```
PCxxxx 00-11-22-33-44-55
...
... 
```

这些值应放入以下 ​​CLI 命令中：

```
wdsutil /Set-Device /Device:PCxxxx /ID:00-11-22-33-44-55 
```

现在因为大约有 200 个，我想自动化这个。

作为一个有趣的问题，可以用批处理来做到这一点吗？这会很复杂，对吧？我想到了数组，但不认为可以批量执行此操作。

也许使用 PowerShell 会更容易一些。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T08:53:30.993

在批处理文件中：

```
for /f "tokens=1,2 delims= " %%a in (foo.csv) do (
    wdsutil /Set-Device /Device:%%a /ID:%%b
) 
```

`cmd`实际上，您可以直接从单行中执行此操作：

```
for /f "tokens=1,2 delims= " %a in (foo.csv) do wdsutil /Set-Device /Device:%a /ID:%b 
```

在 PowerShell 中，您可以使用类似的想法：

```
Get-Content foo.csv | ForEach-Object {
  $name,$mac = -split $_
  wdsutil /Set-Device /Device:$name /ID:$mac
} 
```

或使用 CSV 导入 cmdlet，但鉴于您的问题，您似乎没有列标题，因此您需要手动提供它们：

```
Import-CSV -Delim ' ' -Path foo.csv -Header Name,Mac | ForEach-Object {
    wdsutil /Set-Device "/Device:$($_.Name)" "/ID:$($_.Mac)"
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T08:47:13.290

```
# First column in csv file must be titled PCName, second column must be titled MacAddress.
Import-Csv myfile.csv | %{ wdsutil /Set-Device /Device:$_.PCName /ID:$_.MacAddress } 
```

警告：未经测试。

# android - 如何从自定义 ListView 获取数据以在 Activity 中使用？

> ID：10329805
> 
> 赞同：1
> 
> 时间：2012-04-26T08:32:43.577
> 
> 标签：android, listview, custom-adapter

我正在`ListView`使用`ListAdapter`基于`BasedAdapter`. 我的`ListView`项目有一个`ToggleButton`和一个`EditText`。在使用这个的活动中`ListView`，我有一个`Button`叫做`Save`. 当我单击`Save`时，活动必须找到某种方式来获取数据`ListView`以对此进行一些处理。

在自定义`ListView`适配器中，我使用 an`ArrayList`来跟踪更改`DataItem`，其中表示`ListView`项目的模型（包含用于 的`boolean`变量`ToggleButton`和`String`用于 中的文本的变量`EditText`）。问题是，当我单击 时`Save`，我必须以某种方式`ArrayList`从适配器中获取数据，该适配器还包含每个列表项的更新数据`EditText`和中的数据？`ToggleButton`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:42:47.350

通常，您会将此适配器设置到 ListView 中。您需要做的就是将此适配器的实例保存在 Activity 的成员变量中。Adapter 已经提供了访问单个项目的方法。您可以添加更多方法来获取数据。像这样的东西：

```
public class MyAdapter extends BaseAdapter {
    List data;
    ......

    public boolean[] getCheckStates() {
        //get values of your checkboxes here
    }

    public String[] getTexts() {
        //get text of your text boxes here
    }

    // implement all other methods of BaseAdapter
} 
```

然后在您的活动中：

```
public class MyActivity extends Activity {
    MyAdapter adapter;

    public onCreate(Bundle instance) {
        .....
        adapter = new MyAdapter(...);
        ...
        myList.setAdapter(adapter);
        ...
        btnSave.setOnClickListener(new OnClickListener() {
            public void onClick (View v) {
                boolean[] checks = adapter.getCheckStates();
                String[] texts = adapter.getTexts();
                ....
            }
        });
    }

    ........
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:48:41.597

嗨，这是你需要的：

```
public class MusicTrack extends Activity {  
private ArrayAdapter<CardDetails> listAdapter ;  
ArrayList<Boolean> itemChecked = new ArrayList<Boolean>();  
CardDetailsAdapter mListAdapter;  
public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    setContentView(R.layout.main);  

    final ArrayList<CardDetails> cardResults = GetCardDetails();
    for (int i = 0; i < cardResults.size(); i++) {
        System.out.println("card redsults: " + cardResults.get(i).isSelected());
    }
    final ListView welcomelist = (ListView) findViewById(R.id.welcomelistID);

    listAdapter = new CardDetailsAdapter(this, cardResults);
    welcomelist.setAdapter(listAdapter );      

    final Button saveBtn = (Button) findViewById(R.id.saveID);
    saveBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // get the checkbox status and save related details into database
        //  Intent intent = new Intent(MusicTrack.this, TransactionSummaryActivity.class);
            itemChecked = mListAdapter.itemChecked1;    
            System.out.println("item checked: " + itemChecked);

            for (int i = 0; i < cardResults.size(); i++) {
                System.out.println("cardResults and checked status: " + cardResults.get(i).getText());
                System.out.println("cardResults and checked status111: " + cardResults.get(i).isSelected());
            }
        }
    });

}
private ArrayList<CardDetails> GetCardDetails() {

    ArrayList<CardDetails> carddetailresults = new ArrayList<CardDetails>();
    CardDetails sr1 = new CardDetails();

      sr1.setText("Text1"); 
      sr1.setSelected(false);
      carddetailresults.add(sr1);

      sr1 = new CardDetails();
      sr1.setText("Text2"); 
      sr1.setSelected(true);
      carddetailresults.add(sr1);

      sr1 = new CardDetails();
      sr1.setText("Text3"); 
      sr1.setSelected(true);
      carddetailresults.add(sr1);

      sr1 = new CardDetails();
      sr1.setText("Text4"); 
      sr1.setSelected(true);
      carddetailresults.add(sr1);

      sr1 = new CardDetails();
      sr1.setText("Text5"); 
      sr1.setSelected(false);
      carddetailresults.add(sr1);

    return carddetailresults;
}}
class CardDetails{   
String text;   
Boolean selected;   
public String getText() {
    return text;
}

public void setText(String bankName) {
    text = bankName;
}

 public boolean isSelected() {
        return selected;
    }

    public void setSelected(boolean selected) {
        this.selected = selected;
    }}

class CardDetailsAdapter extends ArrayAdapter<CardDetails> {
private static ArrayList<CardDetails> searchArrayList;
public static ArrayList<Integer> alSelCards = new ArrayList<Integer>();
public static ArrayList<Boolean> itemChecked1 = null;
private LayoutInflater mInflater;

protected Context getContext;
 public CardDetailsAdapter( Context context, ArrayList<CardDetails> results) {
      super( context, R.layout.webview, R.id.textID, results );
      // Cache the LayoutInflate to avoid asking for a new one each time.
      searchArrayList = results;
      getContext = context;
      mInflater = LayoutInflater.from(context) ;
      itemChecked1 = new ArrayList<Boolean>();
        for (int i = 0; i < results.size(); i++) {
            itemChecked1.add(i, results.get(i).isSelected()); // initializes all items value with

        }
    }

public int getCount() {
    if (searchArrayList != null)
        return searchArrayList.size();
    return 0;
}

public CardDetails getItem(int position) {

    return searchArrayList.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView,
        final ViewGroup parent) {
    CardDetails planet = (CardDetails) this.getItem(position);
        final ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.webview, null);
            holder = new ViewHolder();
            holder.text = (TextView) convertView.findViewById(R.id.textID);
            holder.chkbox = (ToggleButton) convertView.findViewById(R.id.togID);

            convertView.setTag(holder);

            holder.text.setText(searchArrayList.get(position).getText());
            holder.chkbox.setTag(planet);
            holder.chkbox.setChecked(planet.isSelected());

        } else {
            holder = (ViewHolder) convertView.getTag();
            ViewHolder viewHolder = (ViewHolder) convertView.getTag();
            holder.chkbox = viewHolder.getCheckBox();
            holder.text = viewHolder.getText();

            holder.text.setText(searchArrayList.get(position).getText());
            holder.chkbox.setTag(planet);

            holder.chkbox.setChecked(planet.isSelected());

        }
        holder.chkbox.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                ToggleButton cb = (ToggleButton) v;
                CardDetails planet = (CardDetails) cb.getTag();
                //planet.setSelected(cb.isChecked());
                if (holder.chkbox.isChecked()) {
                    itemChecked1.set(position, true);
                    holder.chkbox.setChecked(true);
                    planet.setSelected(true);

                } else if (!holder.chkbox.isChecked()) {
                    itemChecked1.set(position, false);
                    holder.chkbox.setChecked(false);
                    planet.setSelected(false);
                }
            }
        });

        return convertView;
    }

    public static class ViewHolder {
        private ToggleButton chkbox;
        TextView text;

        public ViewHolder() {
        }

        public ViewHolder(TextView text, ToggleButton chkbox) {
            this.chkbox = chkbox;
            this.text = text;
        }

        public ToggleButton getCheckBox() {
            return chkbox;
        }

        public void setCheckBox(CheckBox checkBox) {
            this.chkbox = chkbox;
        }

        public TextView getText() {
            return text;
        }

        public void setText(TextView text) {
            this.text = text;
        }

    }} 
```

导入需要的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T07:26:47.320

对，那是正确的。此外，要获得 radioButton checkedId，您需要创建一个 onCkeckedChangeListener 并在那里设置 checkedId。之后覆盖以下方法

```
public int[] getChkId() {
        return chkId;
    } 
```

获取选中的单选按钮。谢谢。

# javascript - 使用jquery隐藏表格边框

> ID：10329806
> 
> 赞同：2
> 
> 时间：2012-04-26T08:32:48.580
> 
> 标签：javascript, jquery, asp.net, css

我有一个 div，它显示动态创建的表（实际上是在 asp.net 中继器中）。根据从数据库中获取的项目，表的数量可能会有所不同。我在下面给出了一个带有 css 和 jquery 代码的示例标记。该表将再次被动态创建。我只给了两个，并没有在其中包含标记。

```
.todotable{border-bottom:1px solid white;}

<div id="divalert">
<table></table>
<table></table>
</div>

 $(document).ready(function () {
       $("#divalert").last().css("border-bottom", "none");
  }); 
```

我的问题是，如何删除最后一张桌子的边框？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T08:34:31.003

您尚未选择表。尝试其中之一：

```
$("#divalert :last-child").css("border-bottom", "none");

// or

$("#divalert table").last().css("border-bottom", "none");
$("#divalert table:last").css("border-bottom", "none"); // same as above 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T08:42:16.367

我宁愿为此使用 CSS。在 CSS 可用时使用 JS 绝不是一个好主意 :-)

```
#divalert table:last-child {
    border-bottom: none;
} 
```

# android - 在 HoneyComb 或 ICS（三星）设备上未收到 Intent.ACTION_USER_PRESENT

> ID：10329810
> 
> 赞同：5
> 
> 时间：2012-04-26T08:33:02.663
> 
> 标签：android, android-intent, android-3.0-honeycomb, android-4.0-ice-cream-sandwich

我有一个`BackgroundReceiver`设置来接收`android.intent.action.USER_PRESENT`清单文件中的内容：

```
 <receiver android:name="com.demo.MyBroadcastReceiver">
        <intent-filter>
            <action android:name="android.intent.action.USER_PRESENT" />
        </intent-filter>
    </receiver> 
```

我的重写`onReceive(Context, Intent)`方法非常简单：

```
@Override
public void onReceive(Context context, Intent intent)
{
    if (intent != null)
    {

        if (Intent.ACTION_USER_PRESENT.equals(intent.getAction())
        {
            // wrapper for Log.d(String, String)
            Dbug.log("MyBroadcastReceiver: [" + intent.getAction() + "]");

            // this calls a service
            serviceExample(context, intent);
        }
    }
} 
```

* * *

*   这在 2.1、2.2 和 2.3 设备（HTC Desire、HTC WildFire、摩托罗拉 Razr）上完美测试。
*   这似乎不适用于 HoneyComb（Samsung Galaxy Tab 10.1）或 ICS（Samsung Galaxy Nexus）设备。
*   根据这个错误（[当键盘保护被禁用时 USER_PRESENT 永远不会在蜂窝和 ICS 上触发](http://code.google.com/p/android/issues/detail?id=25300)），我在故障设备上设置了键盘保护。它没有帮助。

**问题：**

1.  在 Android 3.x 和 4.x 上使用这些意图操作有什么技巧吗？
2.  也许这是一个已知的三星问题？
3.  或者也许我在这些设备上忽略了一些设备设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:06:13.027

[ubuntudroid](https://stackoverflow.com/users/304266/ubuntudroid)对此答案（[仅带有服务的 android 应用程序](https://stackoverflow.com/a/990944/383414)）发表了评论，指出您需要至少启动一次活动，然后它才能正确接收所需的意图。

显然是在 Android 3.0 中引入的。

我还没有测试过这个理论，但它可以解释你所看到的。

# c - C 程序中预增量运算符的行为

> ID：10329814
> 
> 赞同：4
> 
> 时间：2012-04-26T08:33:06.050
> 
> 标签：c, pre-increment

我正在运行以下 C 代码：

```
#define cube(x) (x*x*x)
void main()
{   
    int x=2,y;   
    y=cube(++x);            
    printf("%d %d",++x,y);    
} 
```

我期待结果为

```
6,60 
```

但它给出了不同的结果。我想我对预处理器有误解。我认为代码将类似于

```
void main()
{   
    int x=2,y;   
    y=++x*++x*++x;            
    printf("%d %d",++x,y);    
} 
```

如果我错了，请纠正我。

我将结果解释为 3*4*5=60
但它即将到来 125

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T08:36:07.530

您定义了一个宏，它用作简单的字符串替换，因此呈现的翻译是正确的。

但是，子表达式的执行顺序是未定义的，例如，它们可以是交错的，这会导致**未定义的行为**。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-26T09:23:37.800

预处理器采用我们给出的表达式，因此，对于您的 c 代码，最初 x=2，因此在执行宏时，

首先需要两个值相乘，然后将第三个值乘以结果，所以序列应该是，

++x * ++x => 3（第一个增量），4（再次为下一个增量），所以现在 x 值为 4，根据表达式

```
4 * 4 => 16, 
```

再次为下一个增量 x => 5，所以根据你的表达式结果应该是，

```
16 * 5 => 80 
```

所以现在乘法的总结果是 80，x 值为 5。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T10:27:22.573

该程序的输出因编译器、操作系统甚至同一编译器的不同版本而异，因为输出取决于子表达式的执行顺序。
我用 Visual Studio 编译：o/p 是 125。
当我用 gcc 编译时：o/p 是 80。
所以你无法预测输出。
而且我不知道为什么人们会在面试中问这些类型的问题（那些没有明确的结果）？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-26T10:42:42.703

表达式将`++x*++x*++x`增加`x`三次的值，即分配给表达式的值。输出也是如此。同样，该值因编译器的体系结构而异。`x``5``5*5*5 = 125`

# asp.net-mvc - 将表单的结果发布到另一个表单

> ID：10329819
> 
> 赞同：0
> 
> 时间：2012-04-26T08:33:22.527
> 
> 标签：asp.net-mvc

在我目前正在编写的应用程序中，我需要将一个表单的结果发送到另一个表单。我没有使用嵌套标签，也没有使用局部视图。

我已经像这样渲染了内部形式：

```
@using (Html.BeginForm())
{
    foreach (var item in @Model)
    {   

            <input type="checkbox" name="@model.item" id="" align="right" checked="true"/>
            <label for="@model.item">@model.item</label> <br />

    }

        <input type="submit" value="Save Settings" />
} 
```

并像这样渲染外部形式：

```
@using (Html.BeginForm())
{
    <div class="settings-label">
        @Html.LabelFor(model => model.anotherItem)
    </div>

    <div class="settings-label">
        @Html.TextBoxFor(model => model.anotherItem)
    </div>

    <a href="../innerform/innerform">Choose inner form stuff</a><br />

    <input type="submit" value="Save Settings" />
} 
```

外部形式是代表我网站设置的不同类型的列表，而内部形式是特定设置的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:02:38.907

要将值从一个传递到另一个，您只需将数据/模型发布到操作，然后将数据/模型发送到另一个视图

```
 [HttpPost]
    public ActionResult OutterFormHandler(MyModel data)
    {
        //do something with data
        return View("AnotherView", data);
    } 
```

这就是你要找的？？？

# javascript - 解析来自外域请求的 XML 返回数据

> ID：10329820
> 
> 赞同：0
> 
> 时间：2012-04-26T08:33:27.610
> 
> 标签：javascript, xml, parsing, xmlhttprequest

我正在尝试解析从外国网站返回的 XML 数据。我使用域请求将一些变量发送到这样的网站：[http](http://www.url.com/page.php?var1=val1&var2=val2) ://www.url.com/page.php?var1=val1&var2=val2 ...

我把它附加在一个里面`<div>`：

```
<!--?xml version="1.0" encoding="UTF-8"?-->
<liste>
<produits>
<produit>
<nomprod>Title</nomprod>
<desc>Desc</desc>
<texte>Text</texte>
<url>http://www.url.com</url>
</produit>
</produits>
</liste> 
```

我想解析这些数据并将它们正确显示在我的页面中

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:40:09.863

[JKL.ParseXML](http://www.kawa.net/works/js/jkl/parsexml-e.html)是一个非常简单易用的库，您可能想看看。您可以使用这个超级简单的代码从您的 xml 中获取值

```
var xml = yourXMlInAString,
    data = xml.parse(),
    title, desc, text, url;
title = data["liste"]["produits"]["produit"]["nomprod"];
desc = data["liste"]["produits"]["produit"]["desc"];
text = data["liste"]["produits"]["produit"]["text"];
url = data["liste"]["produits"]["produit"]["url"]; 
```

然后你可以用数据做你想做的事，这当然取决于你。

或者，[jQuery](http://www.jquery.com/)也可以解析 XML，如果您选择更轻的库，我想我会理解的！如果您要使用它，您会想要查看[parseXML](http://api.jquery.com/jQuery.parseXML/)函数，该函数的页面上有很好的文档，所以如果您选择 jQuery，请查看那里。

# javascript - Javascript 原型通过 Object.create()

> ID：10329821
> 
> 赞同：10
> 
> 时间：2012-04-26T08:33:31.480
> 
> 标签：javascript, prototype

```
var someObj = function() { }
var p = new someObj();

alert(someObj.prototype);   // This works
alert(p.prototype);         // UNDEFINED, but why?

someObj.prototype.model= "Nissan";
alert(p.model);             // This works! I understand the dynamic nature of prototypes, but doesn't that mean that p.prototype === someObj.prototype? 
```

为什么会这样？既然“p”是“someObj”的一个实例，为什么原型是未定义的？我的意思是，当我向“someObj”原型添加一个属性时，“p”可以访问它，那么为什么原型无法访问？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T08:36:35.910

这里重要的是`prototype`函数对象的属性**不是**对象的原型。该对象将被分配为您通过创建的对象的原型`new someObj`。在 ES5 之前，你不能直接访问对象的原型；从 ES5 开始，您可以通过[`Object.getPrototypeOf`](http://es5.github.com/#x15.2.3.2).

关于

> `alert(p.prototype); // UNDEFINED, but why?`

原因是该`p`对象没有称为“原型”的属性。它有一个底层原型，但这不是您访问它的方式。

所有函数对象都有一个名为的属性`prototype`，因此如果将它们用作构造函数，我们可以定义由这些构造函数创建的对象的底层原型的属性是什么。这可能会有所帮助：

```
function Foo() {
}
Foo.prototype.answer = 42;

console.log(Foo.prototype.answer); // "42"
var f = new Foo();
console.log(f.answer); // "42" 
```

最后一行是这样工作的：

1.  获取`f`对象。
2.  是否`f`有**自己的**属性称为“答案”？
3.  不，`f`有原型吗？
4.  是的，原型是否有**自己的**属性，称为“答案”？
5.  是的，返回该属性的值。

你[`Object.create`](http://es5.github.com/#x15.2.3.5)在问题的标题中提到了。重要的是要理解它`Object.create`与构造函数完全不同。它被添加到语言中，因此如果您不想使用构造函数，则不必这样做，但仍然可以设置对象的原型——直接在创建该对象时。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T08:44:36.350

那是因为`prototype`是构造函数的属性，而不是自身的属性。但是，该`prototype`对象具有对构造函数的引用，因此您可以`prototype`通过其`constructor`属性访问对象的：

```
function Foo() {}

Foo.prototype.foo = "bar";

var c = new Foo;

console.log( c.constructor === Foo );   // true
console.log( c.constructor.prototype ); // { foo: 'bar' } 
```

但是，如果您覆盖`prototype`构造函数的初始属性，这将不起作用：

```
function Foo() {}

// I overwrite the prototype property, so I lose the initial reference
// to the constructor.
Foo.prototype = {
  foo: "bar"
};

var c = new Foo;

console.log( c.constructor === Foo );    // false
console.log( c.constructor === Object ); // true
console.log( c.constructor.prototype );  // {} 
```

这就是为什么你最好使用[`Object.getPrototypeOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/getPrototypeOf)ES5 中引入的新方法。

```
function Foo() {}

Foo.prototype = {
  foo: "bar"
};

var c = new Foo;

console.log( c.constructor === Foo );    // false
console.log( c.constructor === Object ); // true
console.log( c.constructor.prototype );  // {}
console.log( Object.getPrototypeOf(c) ); // { foo: 'bar' } 
```

另一种解决方案是确保您恢复`constructor`原型上的引用：

```
function Foo() {}

// Overwriting the initial prototype    
Foo.prototype = {
  constructor: Foo, // restore the constructor reference
  foo: "bar"
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T08:37:38.633

p.prototype 不起作用，因为在这种情况下 p = someObj.prototype。

基本上，当您使用 new 运算符时，会发生构造函数 someObj 用于初始化新对象的情况。这意味着它返回一个具有构造函数原型的属性和方法的对象。

因此 p = someObj.prototype 和 p.prototype 是未定义的，因为 p 不是构造函数。

这篇文章可能有助于解释这一点

[http://www.htmlgoodies.com/html5/tutorials/javascript-prototypical-inheritance-explained.html#fbid=A2ikc3JLxeD](http://www.htmlgoodies.com/html5/tutorials/javascript-prototypical-inheritance-explained.html#fbid=A2ikc3JLxeD)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T08:37:59.840

`p`是 的一个*实例*。`someObj`原型属于构造函数。您可以使用检索`p`的构造函数原型`p.constructor.prototype`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T08:47:39.827

在 Javascript 中，构造函数以及实际上所有函数都获得了原型属性。一个对象（即一组键值对）没有原型属性。在你上面的例子中，

```
var someObj = function() { } // this is a function, so it has a prototype property
var p = new someObj(); // this is an instance object, so it doesn't 
```

这就是为什么定义了 someObj.prototype 而没有定义 p.prototype 的原因。

# iphone - 我们可以将实时应用程序转换为 iphone 中的 InApp 应用程序吗？

> ID：10329824
> 
> 赞同：0
> 
> 时间：2012-04-26T08:33:43.727
> 
> 标签：iphone

**我们可以将实时应用程序转换为 iPhone 中的应用程序内应用程序吗？**

我有一个已经在苹果提交的申请。现在我想将此应用程序转换为以前没有的 InApp。那么我必须为此做些什么改变。在这里，我使用了一个苹果 ID 和分发 ID 来开发这个应用程序。

因此，为了使它成为 InApp，我必须再次创建 id，或者任何其他必要的东西，请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:45:59.033

如果您询问是否可以将不支持应用内购买的现有应用程序更新为支持应用内购买的新版本，那么可以。

你需要：

*   在 iTunes Connect 中为此应用程序创建应用内购买。

    （管理您的应用程序 -> 选择应用程序 -> 管理应用内购买 -> 新建）

*   编写支持应用内购买的新版本

*   **彻底测试**这个新版本：[In-App Purchase Programming Guide](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html)，[iTunes Connect Developer Guide](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf)

*   提交这个经过测试的新版本

你必须小心处理。您必须免费提供您的应用程序（新版本）并仅启用部分功能。

当用户进行应用内购买时，您将启用完整的功能。

所有功能都应该用同一个二进制文件编码，其中一部分只是“锁定”，直到用户购买。

**重要提示**：如果您的应用程序目前在 App Store 中提供完整功能，您必须**确保现有用户不必购买应用程序内购买**- 他们的应用程序应在首次启动时“解锁”。有几种方法可以检查您的应用程序是否已安装。您可能需要进行额外的中间更新，但这完全是另一个话题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:41:18.887

NO你不能这样做，App Store没有提供任何关于这个的Authentication，如果你想在APP中这样做，你必须重新启动APP，并使用inAPP购买代码，注册和其他过程。

# knockout.js - 敲除数据绑定嵌套的 html 元素

> ID：10329825
> 
> 赞同：5
> 
> 时间：2012-04-26T08:33:44.927
> 
> 标签：knockout.js

我有一个带有数据绑定文本属性的 h2 标记到模型值，并且在里面我有一个跨度标记，它也是模型值的数据绑定文本属性。

但是当模型绑定时 span 正在被替换，有没有办法附加 html。

[http://jsfiddle.net/WKnWr/1/](http://jsfiddle.net/WKnWr/1/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-25T10:11:16.327

使用最新的淘汰赛，您可以为 h2 文本使用虚拟元素，类似于 John Earles 解决方案，但这意味着您可以将姓氏与名字分开设置样式

```
<h2>
    <!-- ko text: firstName --><!-- /ko --> 
    <span data-bind="text: lastName"></span>
</h2> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T10:00:14.533

您当前的代码将覆盖，因为“文本”绑定为该元素设置了 innerText（或 textContent），因此您的 h2 文本绑定将覆盖任何现有的嵌入 html（例如您的跨度）。

你可以这样做：

```
<h2>
    <span data-bind="text:firstName"></span>
    <span data-bind="text:lastName "></span>
</h2>​ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T13:44:40.283

通常，您会希望更改您的 HTML 以使其在这种情况下正常工作。但是，如果这是不可能的，那么您可以使用为您插入跨度的自定义绑定。

就像：

```
ko.bindingHandlers.insertText = {
    init: function(element, valueAccessor) {
        var span = document.createElement("span"),
            firstChild = element.firstChild;

        element.insertBefore(span, firstChild);
        ko.applyBindingsToNode(span, { text: valueAccessor() });       
    }       
}; 
```

示例：http: [//jsfiddle.net/rniemeyer/fLmXu/](http://jsfiddle.net/rniemeyer/fLmXu/)

# .net - 内部查询处理器错误：查询处理器在执行期间遇到意外错误

> ID：10329826
> 
> 赞同：-1
> 
> 时间：2012-04-26T08:33:54.287
> 
> 标签：.net, sql-server, sql-server-2005, stored-procedures

内部查询处理器错误：查询处理器在执行期间遇到意外错误。

请帮我解决..

当我尝试执行 sp 时，我得到了错误

警告：空值被聚合或其他 SET 操作消除。消息 8630，级别 17，状态 52，过程 USPReportPerformanceIndex_test，第 456 行内部查询处理器错误：查询处理器在执行期间遇到意外错误。

这个问题怎么解决。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T07:40:51.337

这可能对你有用。我的团队在 Microsoft Dynamics CRM 数据库上遇到了类似的错误。CRM 解决方案不知何故有一个悬空的外键引用，当我们尝试从表中删除该行时，我们收到“内部查询处理器错误：查询处理器在执行期间遇到意外错误”错误。所以，这就是我们所做的，之后我们就可以运行查询了。请注意，这些步骤特定于 CRM 错误。您可以选择适用于您的步骤。

### 步骤1

> > 备份 CRM 组织数据库

### 第2步

> > 查找具有无效 Null 引用的依赖项：

```
select top 10 * from DependencyBase
where RequiredComponentNodeId not in
(select DependencyNodeId from DependencyNodeBase) 
```

### 第 3 步

> > 将 CRM 组织数据库置于单用户模式

### 第4步

> > 运行以下脚本

```
dbcc checkdb('Cap_MSCRM',repair_rebuild)
go

update statistics DependencyBase
update statistics DependencyNodeBase

delete from DependencyBase
where DependencyId = '31BB8193-DD65-40E8-9A24-E7B7E2ADACD2' –DependencyId returned in Step 2 
```

### 第 5 步

> > 将 CRM 组织数据库置于多用户模式

### 第 6 步

> > 做 IISreset

# templates - GWT：小部件/模板和 ClientBundle

> ID：10329833
> 
> 赞同：0
> 
> 时间：2012-04-26T08:34:32.790
> 
> 标签：templates, gwt, widget, clientbundle

允许 Widget/Template 和 ClientBundle 的哪些组合，以及在使用它们时是否有任何已知的限制/您应该考虑的事情。

Afaik 类似：

```
@Template(""{0}\"<p>not allowed</p>")
SafeHtml iconONLY(Widget w); 
```

不允许，因为它会引发错误。

就像是

```
@Template("{0}<p>not allowed</p>")
SafeHtml iconONLY(Element e); 
```

并将它与类似的东西一起使用`iconONLY(w.getElement());`是可能的，但是 Widget 失去了所有功能，因为它的 attache 方法没有正确执行。

总而言之，我假设模板不打算在其中放置小部件！

ClientBundle 旨在保存内容小部件。在其他元素中使用它们，例如：喜欢

```
@Template("{0}<p>not allowed</p>")
SafeHtml iconONLY(SafeUrl safeurl); 
```

调用`iconONLYimageResource.getSafeUrl);`可能会导致问题...

我的假设正确吗？请告诉我您是否尝试/使用过其中一种组合以及它是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:44:23.013

The first and the second ones makes sense that they don't work, since you are trying to insert just the element or widget into a string (SafeHtml is at the end of the day just a String) - of course the event wiring won't work. Widgets cant be cloned like that, there is more to them then just the element they are made of.

The last is an error because you are putting a Uri into the text content - you probably mean something like

```
@Template("<img src=\"{0}\" /><p>not allowed</p>")
SafeHtml iconONLY(SafeUri safeurl); 
```

to display an image.

What are you trying to do? If trying to display an image, putting the `SafeUri` in an `img` tag is one option, another would be to put together a `SafeHtml` instance to insert:

```
@Template("{0}<p>not allowed<p>")
SafeHtml iconONLY(SafeHtml icon);

//...
AbstractImagePrototype proto = AbstractImagePrototype.create(icon);
SafeHtml iconHtml = SafeHtmlUtils.fromTrustedString(proto.getHTML());
template.iconONLY(iconHtml); 
```

The basic idea of SafeHtml is that you build up strings of html instead of dom elements - this allows those strings to be reused, or to all be injected at once (which is usually faster than appending elements to the dom) - this is not how widgets are added to one another, and trying to manipulate widgets like this will just end up with missing pieces, as you've noticed.

# sql - MS SQL sql 语句返回空结果

> ID：10329835
> 
> 赞同：0
> 
> 时间：2012-04-26T08:34:39.390
> 
> 标签：sql, sql-server

有两个表：

## |idperson|工作负载|活动|idpm|名字|姓|

## |idsupportday|日期|fk_person|

和这个 SQL 语句：

```
SELECT person.idperson, person.firstname, person.lastname, person.workload,
       person.active, person.idpm, COUNT(supportday.idsupportday) AS SupportDays,
       MIN(supportday.date) AS FirstDate, MAX(supportday.date) AS LastDate
FROM   person
INNER JOIN supportday 
ON         person.idperson = supportday.fk_person
WHERE      (person.active = 1)
GROUP BY   person.idperson, person.firstname, person.lastname, person.workload,
           person.active, person.idpm 
```

现在如果`supportday`表是空的，我也会收到一个空的结果。但我仍然希望所有人都`person.active=1`在结果中。

我需要改变什么？

感谢您的回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T08:37:25.397

更改`INNER JOIN`为`LEFT OUTER JOIN`：

```
SELECT person.idperson, person.firstname, person.lastname, person.workload,
       person.active, person.idpm, COUNT(supportday.idsupportday) AS SupportDays,
       MIN(supportday.date) AS FirstDate, MAX(supportday.date) AS LastDate
FROM   person
LEFT OUTER JOIN supportday 
ON         person.idperson = supportday.fk_person
WHERE      (person.active = 1)
GROUP BY   person.idperson, person.firstname, person.lastname, person.workload,
           person.active, person.idpm 
```

*   [MSDN：使用外部联接](http://msdn.microsoft.com/en-us/library/ms187518%28v=sql.105%29.aspx)
*   [在 T-SQL 中编写外连接](http://www.sqlteam.com/article/writing-outer-joins-in-t-sql)

> 仅当两个表中至少有一行与连接条件匹配时，内部连接才返回行。内连接消除了与另一个表中的行不匹配的行。**然而，外部连接至少返回 FROM 子句中提到的一个表或视图中的所有行，只要这些行满足任何 WHERE 或 HAVING 搜索条件。所有行都从使用左外连接引用的左表中检索**，并且从右外连接引用的右表中的所有行检索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T08:36:59.917

更改`INNER JOIN`为`LEFT OUTER JOIN`

# c# - 为什么双击滚动条时会触发 DataGrid MouseDoubleClick 事件？

> ID：10329838
> 
> 赞同：14
> 
> 时间：2012-04-26T08:34:42.867
> 
> 标签：c#, .net, wpf

为什么当我双击滚动条或标题时会触发 DataGrid MouseDoubleClick 事件？

有什么方法可以避免这种情况并仅在我在数据网格内双击时触发事件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T08:59:12.210

滚动条和标题是网格的一部分，但不处理双击，因此事件“冒泡”到网格。

不雅的解决方案是通过事件源或鼠标坐标在某种程度上找出“点击了什么”。

但你也可以做类似的事情（未经测试）：

```
<DataGrid>
  <DataGrid.RowStyle>
    <Style TargetType="{x:Type DataGridRow}">
      <EventSetter Event="MouseDoubleClick" Handler="OnRowDoubleClicked"/>
    </Style>
  </DataGrid.RowStyle>
</DataGrid> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T08:45:08.350

您可以在鼠标单击事件中检查有关命中点的详细信息 -

```
DependencyObject dep = (DependencyObject)e.OriginalSource;

// iteratively traverse the visual tree
while ((dep != null) &&
        !(dep is DataGridCell) &&
        !(dep is DataGridColumnHeader))
{
    dep = VisualTreeHelper.GetParent(dep);
}

if (dep == null)
    return;

if (dep is DataGridColumnHeader)
{
    DataGridColumnHeader columnHeader = dep as DataGridColumnHeader;
    // do something
}

if (dep is DataGridCell)
{
    DataGridCell cell = dep as DataGridCell;
    // do something
} 
```

[https://blog.scottlogic.com/2008/12/02/wpf-datagrid-detecting-clicked-cell-and-row.html](https://blog.scottlogic.com/2008/12/02/wpf-datagrid-detecting-clicked-cell-and-row.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-21T08:40:57.617

我遇到了同样的问题并解决了这个问题：

```
DependencyObject src = VisualTreeHelper.GetParent((DependencyObject)e.OriginalSource);
if (!(src is Control) && src.GetType() != typeof(System.Windows.Controls.Primitives.Thumb))
{
    //your code
} 
```

我读过这篇文章以获得这个想法：[如何检测列表视图滚动条上的双击？](https://stackoverflow.com/questions/2056106/how-to-detect-double-click-on-list-view-scroll-bar)

我希望它会有所帮助:)

# delphi - 如何从我的独立应用程序上的 bpl 获取组件名称

> ID：10329839
> 
> 赞同：3
> 
> 时间：2012-04-26T08:34:46.473
> 
> 标签：delphi, delphi-7, bpl

`Classes.GetPackageInfo`可以枚举一个包的所有单元和所需的包。但我想要一个像这样的 Proc：

```
procedure GetPackageComponents(ModuleName: PChar; ComponentsList: TStrings); 
```

这将从 Designtime 包中获取所有 IDE 组件。
有可能是一种通用的方式吗？例如。从 VC 应用程序调用这个过程？

# android - 为什么在 Android 中使用 sqlite 数据库？

> ID：10329842
> 
> 赞同：30
> 
> 时间：2012-04-26T08:35:10.670
> 
> 标签：android, web-services, sqlite, mobile

为什么我们在android中使用sqlite数据库。我正在开发一个android应用程序，其中数据将从服务器获取并进行一些数据计算并在UI上显示。

将数据提取到 sqlite DB 并在每 20 分钟内定期从 sqlite 更新 UI 对我有好处吗？或者将 Http get 请求发送到服务器并从响应中更新数据会更好吗用户界面。

我想知道哪一个会更好，为什么？为什么要涉及 sqlite DB？数据对应一些 40X40 的表格数据，需要对其进行一些繁重的数学处理，然后显示在 UI 上（类似于股票市场应用程序），并且需要每隔 12 小时清除一次数据。PLZ建议Rgds，劳尔

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-26T08:43:59.057

在您的情况下使用数据库很好。

优点：

*   如果您的应用程序关闭，内存中的数据将丢失，但之后您将能够从数据库中恢复状态（如果您有一个）
*   特别是对于复杂计算的情况，最好将结果一次存储在数据库中，而不是按需重新计算多次
*   数据库会将您的 UI 与 Internet 连接解开，因此即使没有 Internet 连接，您也可以显示结果
*   使用数据库，您将能够从后台服务获取更新的数据，而不会影响您的 UI
*   在数据库中组织数据通常可以更轻松地管理所有应用程序数据。

缺点：

*   添加数据库将需要您付出一些额外的努力

如您所见，我的列表证明您应该在您的情况下使用数据库。也许我有偏见，但至少我为您提供了要考虑的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T08:42:55.870

这确实是一个设计决策，SQLite 提供了一种非常健壮的方式来组织和持久化您的数据，您唯一的其他选择是写入文件或保存在 SharedPrefs 中，一旦大小达到您的数据开始增长，因为您必须手动保留对象列表并管理它们的名称等。40 x 40 的表数据足以证明使用 SQLite 是合理的，即使您每 12 小时删除和重新创建表也是如此。

您可能需要考虑使用 ORM 库来更简单地从数据库中获取和保存数据，ORMLite 很好并且与 Android 兼容

[http://ormlite.com/](http://ormlite.com/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T08:43:12.490

如果您的应用程序严重依赖 Internet 连接，则无需在数据库中缓冲信息。但是，如果您想使用信号不佳或没有信号的应用程序，您可能需要使用 sqlite 数据库中的缓存值。由于互联网连接速度较慢，您的应用程序可能没有响应，因此缓存可能是一个好主意 - 但它不一定在 sqlite 数据库中。您应该将 sqlite 数据库用于设备经常需要且与您的服务器组件无关的数据。如果数据频繁更新但仅在应用程序运行时更新，您可能希望缓存在设备内存中。我假设您的应用程序在 12 小时内并未一直运行，而是定期调用以检查某些内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T08:41:53.033

12 小时是很长的时间，所以不要让你的数据在 RAM 中徘徊，我建议你使用数据库。因为你永远不知道什么时候可能需要再次阅读它。

否则，如果您的目的只是下载数据、处理数据并在活动中显示，那么您不需要涉及数据库，因为如果您的应用程序已关闭（由于用户或内存不足），无论如何您的应用程序将从服务器……我说的对吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T08:53:55.747

```
> update the UI on regular interval from the sqlite in evry 20 minutes 
```

不要指望您的应用程序会打开这么长时间。

准确建议您的情况

```
 Avoid DB 

 Fetch Data at app start or at appropriate time when app is opened 
 and save it in plain java objects.

 Define Methods within it that perform operation in it.

 Make map or list to save those POJO

 Define Seprate Controller Classes within your project to update map of pojo at any     
 specific change to make fresh data available to UI. 
```

# forms - 添加 jquery ui 图标以输入文本表单元素

> ID：10329845
> 
> 赞同：1
> 
> 时间：2012-04-26T08:35:18.797
> 
> 标签：forms, jquery-ui, usability

是否可以简单地将图标添加到输入文本元素？

例如，我可以将图标添加到按钮元素，但不能添加到带有类型文本的输入`$(".mybutton").button({icons: {primary:'ui-icon-circle-check'}});`

# wpf - 在 wpf 中填充 ListView 中的 ObservableCollection 或 DataSet？

> ID：10329846
> 
> 赞同：1
> 
> 时间：2012-04-26T08:35:21.667
> 
> 标签：wpf

谁能建议我哪一种是填充`ListView`WPF 应用程序的最佳、快速和有效的方法。

从`ObservableCollection`还是从`DataSet`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:26:48.780

我总是选择 ObservableCollection，我永远不会使用直接绑定到控件的 DataSet。如果您不更改集合中的项目，则应考虑使用 List。

但是有了更多信息，也许有充分的理由使用数据集，但我不这么认为。

# django - Django order_by 具体顺序

> ID：10329849
> 
> 赞同：19
> 
> 时间：2012-04-26T08:35:32.490
> 
> 标签：django, django-orm

是否可以在 django ORM 中复制这种特定的 sql 排序：

```
order by

(case

    when id = 5 then 1

    when id = 2 then 2

    when id = 3 then 3

    when id = 1 then 4

    when id = 4 then 5

end) asc 
```

?

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2015-07-24T13:01:30.037

**从 Django 1.8**开始，您有了[条件表达式](https://docs.djangoproject.com/en/1.8/ref/models/conditional-expressions/)，因此`extra`不再需要使用。

```
from django.db.models import Case, When, Value, IntegerField

SomeModel.objects.annotate(
    custom_order=Case(
        When(id=5, then=Value(1)),
        When(id=2, then=Value(2)),
        When(id=3, then=Value(3)),
        When(id=1, then=Value(4)),
        When(id=4, then=Value(5)),
        output_field=IntegerField(),
    )
).order_by('custom_order') 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-04-03T08:07:59.060

有可能的。从 Django 1.8 开始，您可以通过以下方式进行操作：

```
from django.db.models import Case, When

ids = [5, 2, 3, 1, 4]
order = Case(*[When(id=id, then=pos) for pos, id in enumerate(ids)])
queryset = MyModel.objects.filter(id__in=ids).order_by(order) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-26T09:23:02.790

`extra()`你可以用/或更简单的方法来做`raw()`，但在更复杂的情况下它们不能很好地工作。

```
qs.extra(select={'o':'(case when id=5 then 1 when id=2 then 2 when id=3 then 3 when id=1 then 4 when id=4 then 5 end)', order_by='o'}

YourModel.raw('select ... order by (case ...)') 
```

对于您的代码，条件集非常有限，您可以轻松地在 Python 中进行排序。

# ms-access - 何时应将 VBA 代码从表单模块移动到单独的模块？

> ID：10329853
> 
> 赞同：5
> 
> 时间：2012-04-26T08:35:42.720
> 
> 标签：ms-access, ms-access-2007, vba

我有很多例子，我从一个基本的子表单开始，然后我有 3 个其他子表单建立在它之上，每个子表单都在基本子表单上添加了一些不同的元素。这意味着我对每个子表单都有一个代码页，其中有很多重复。是否可以将公共元素放入单独的模块中，并在其代码页上仅保留与每个子表单相关的附加代码？这有任何性能问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:25:37.733

关于你问题的最后一部分，“*这有什么性能问题吗？* ”

我知道有两个后果：

1.  表单加载时间
2.  内存使用

作为一个假设示例，假设您有一个带有选项卡控件的表单。该选项卡控件包含 10 个页面，每个页面包含一个子表单。如果这些子表单包含相同 VBA 代码的副本，则必须为每个子表单再次加载该公共代码。这需要时间并增加内存使用。

如果您将公共代码移动到标准模块并从子表单中引用它，则只需加载一次...减少表单加载时间和内存消耗。

所以最终结果是您正在考虑的方法可以使您的应用程序更具响应性......这可能会导致更快乐的用户。

但是，即使这种方法没有产生明显的性能改进，我仍然会这样做，因为这意味着您只需要维护一份通用代码的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:34:01.590

简短的回答，是的，这样做，拆分每个表单之间重复的代码。

更长的答案，但在我看来，将重复的代码提取到单独的模块或类中是更好的方法。

类使您的代码更易于管理和维护。如果您在多个地方都有相似的代码，那么维护会更加困难，因为您必须在每个位置进行更改。将它放在一个地方可以更容易地管理和维护。

优点列表来自[`Chicago Access Users Group (CAUG) talk - "Class Modules in Access"`](http://www.caug.com/caug-classes.htm)：

```
Advantages of using classes/objects:
 - let's you create more complex objects than tables or queries provide
   alone
 - using classes within classes let's you restrict function visibility
 - class methods & attributes are more descriptive than module's
   function list alone
 - let's you use Intellisense for more efficient coding
 - no "ambiguous name" errors with multiple copies of the same class
   module
 - can copy class modules without worry of creating ambiguous function
   names
 - static variables are implicit in class objects, and so are easier to
   manage
 - isolating access layers within wrapper classes promote
   portability/maintainability
 - better support for separation of UI/business logic/data access =
   n-tier development
 - promotes modular thinking in analysis, design
 - easier to adapt many publicly-available object models to Access apps
 - prepares you for transition to .NET and other fully object-oriented
   architectures 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:14:31.990

如果我理解这个问题，是的，您可以通过将一定数量的代码移动到标准代码模块中来集中它。可能有很多方法可以做到这一点，但更好的方法之一是将表单对象传递给您的函数。这是一个例子：

```
Private Sub Form_BeforeUpdate(Cancel As Integer)
    If ValidateContact = False Then Cancel = True
End Sub

'This code goes in a standard code module not associated with any form
Public Function ValidateContact(ByRef frm as Form) as Boolean
    Dim bValid as Boolean
    bValid = True
    If Nz(frm!FirstName, "") = "" Then
        MsgBox "First Name cannot be blank."
        bValid = False
    ElseIf Nz(frm!LastName, "") = "" Then
        MsgBox "Last Name cannot be blank."
        bValid = False
    End If
    ValidateContact = bValid
End Function 
```

另外，如果我理解正确，您的问题根本不是关于使用类模块/类对象，至少不是明确的。（事实上​​，基本上你在 Access 中编写的每一段代码都在使用类对象，通常是隐式的。）另一个 SO 用户已经发布了一个很好的答案，关于在 Access 中使用类对象的好处，所以我不会解释更多关于这一点。事实上，标准代码模块基本上是一个单例类，不需要像类对象那样实例化。首选单例/标准代码模块是有原因的，至少在某些情况下，如果没有其他原因，调用函数更容易。然而，如果你发现自己编写的函数有大约四个或更多参数，你'

# php - 来自数据库的数组

> ID：10329854
> 
> 赞同：0
> 
> 时间：2012-04-26T08:35:55.553
> 
> 标签：php, mysql, database, arrays

我不热衷于如何从数据库中创建一个数组。试图避免学习这些，但显然现在需要它。

基本上我的数据库是由数百万行构成的。Player Name 和 Snap（Unix 时间戳）通常是“重复的”，但在这些行（城市、x、y 等）中具有不同的数据。

理想情况下，试图弄清楚如何通过`SELECT`语句制作数组，例如：

输出，我想是这样的：Name = Snap =>（那天有多少个城市），Snap =>（另一天有多少个城市）..等等..

这里的问题是，什么是正确的数组“命令”（如果你这么称呼它）来提取名称 ONCE 并根据快照的计数提取多个快照。

我的选择是：

```
// SELECT count(*), player, snap
// FROM DB WHERE GROUP BY snap, player ORDER BY snap, player DESC
while ($row = fetch_assoc($Result) {
     // How you go about putting array here?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:40:13.953

它会像这样完成：

```
$Result = mysql_query("SELECT count(*) as count, player,
     snap FROM DB GROUP BY snap, player ORDER BY snap, player DESC");
while ($row = mysql_fetch_array($Result) {
  print_r( $row );
  echo "This is the count value -> " . $row['count'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:45:12.980

我同意关于需要阅读更多基础知识的评论，但您可以执行以下操作来创建您的多维数组：

```
<?php

$results = array();

$Result = 'SELECT count(*),player,snap FROM DB WHERE GROUP BY snap,player ORDER BY snap,player DESC';
while ($row = fetch_assoc($Result){
  if (!isset($results[$row['player']][$row['snap']]) {
    $results[$row['player']][$row['snap']] = 0;
  }
  $results[$row['player']][$row['snap']] += $row['count(*)']; 
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:42:46.710

先试试这些：-

1.  [http://phpsense.com/2006/php-mysql/](http://phpsense.com/2006/php-mysql/)
2.  [http://www.freewebmasterhelp.com/tutorials/phpmysql](http://www.freewebmasterhelp.com/tutorials/phpmysql)

您还需要 SQL 基础知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T08:49:12.293

你可以试试

```
$sql = "SELECT count(*) as count, player,
        snap FROM DB GROUP BY snap, player ORDER BY snap, player DESC";

/* Connect To Database */
$mysqli = new mysqli ( "localhost", "username", "password", "database" );

/* check connection */
if ($mysqli->connect_errno) {
    printf ( "Connect failed: %s\n", $mysqli->connect_error );
    exit ();
}

$result = $mysqli->query ( $sql );
$array = array();
if ($result) {
    while ( $row = $mysqli->fetch_assoc ( $result ) ) {
        $array[$row['player']] += $row['count'];
    }

    print_r($array); // Return array
} 
```

# html - 关于 html 表单的一些菜鸟

> ID：10329856
> 
> 赞同：0
> 
> 时间：2012-04-26T08:36:03.230
> 
> 标签：html

> **可能重复：**
> [根据先前的下拉菜单显示下拉菜单值](https://stackoverflow.com/questions/9170453/display-dropdown-values-based-on-previous-dropdown)

我非常了解 html 和表单，但想知道，例如：

单击某个下拉列表项时，会根据先前的字段选择出现第二个下拉列表。你会如何整合这个，我可以去一个特定的网站吗？

一个代码示例将不胜感激。我假设您可以为此使用javascript？您是检索特定值还是仅对特定选择使用不同的下拉列表

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:45:53.283

我的头顶。

在提交表单之前，您将在页面上处理您的 javascript。

步骤 1\. 在标题中引用 jquery 步骤 2\. 加载时，隐藏第二个选择，将此脚本放在引用 jquery 下方

```
<script type="text/javascript">
$(function () {
   $("#secondselect").hide()

   $("#firstselect").change(function () {
            if($(this).val() != 0){
               $("#secondselect").show()
            }
            else
            {
                $("#secondselect").hide()
            }

        });
});
</script>

<select id="firstselect" name="firstselect" >
    <option value="0">first</option>
    <option value="1">second</option>
    <option value="2">third</option>
    <option value="3"></option>
</select>

<select id="secondselect" name="secondselect">
    <option value="0">first</option>
    <option value="1">second</option>
    <option value="2">third</option>
    <option value="3"></option>
</select> 
```

在我的头顶......但我会这样做。

祝你好运。

哦...只是快速更新。

您可以使用开关而不是 if 这样，可能会更整洁...

**从**

```
if($(this).val() != 0){
               $("#secondselect").show()
            }
            else
            {
                $("#secondselect").hide()
            } 
```

**至**

```
switch($(this).val())
{
    case '1':
       $("#secondselect").show();
    break;
    case '1':
       //do something else... show a third dropdown instead
       //for instance...
       // $("#thirdselect").show();
       alert('got to case 1');
       //or if you use firebug or chrome, right click and inspect an element then click on Console and this log report should show
       console.log('got here, showing the log');
    break;
    default:
       $("#secondselect").hide();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:34:09.703

我从您的问题中假设您希望根据第一个下拉列表的选定值动态填充第二个下拉列表。

为此，您可以使用 jQuery 获取第一个选定值的值，将其传递给 PHP 文件，以获取第二个下拉列表需要的选项的响应并填充它们。

您还可以使用 .show() 和 .hide() 在需要时隐藏或显示下拉菜单。

```
$('#first').change(function(){
    var selected= $('#first').val();
    $.getJSON('data.php',{name: selected},function(data){
        var results='';
        $.each(data, function(i, item) {
            results += '<option value="'+item.Description+'">'+item.Description+'</option>"' ;
          });
          $("select#Second").html(results);

    })
 }); 
```

如果选项不需要动态更改而您只需要隐藏和显示，那么您可以使用 simpsons88 答案！

# c# - 在将 Html 转换为 Pdf 时显示 Unicode 字符

> ID：10329863
> 
> 赞同：8
> 
> 时间：2012-04-26T08:36:24.677
> 
> 标签：c#, unicode, itext

我正在使用 itextsharp dll 将 HTML 转换为 PDF。

HTML 有一些 Unicode 字符，如 α、β...当我尝试将 HTML 转换为 PDF 时，PDF 中不显示 Unicode 字符。

我的功能：

```
Document doc = new Document(PageSize.LETTER);

using (FileStream fs = new FileStream(Path.Combine("Test.pdf"), FileMode.Create, FileAccess.Write, FileShare.Read))
{
    PdfWriter.GetInstance(doc, fs);

    doc.Open();
    doc.NewPage();

    string arialuniTff = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts),
                                      "ARIALUNI.TTF");

    BaseFont bf = BaseFont.CreateFont(arialuniTff, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);

    Font fontNormal = new Font(bf, 12, Font.NORMAL);

    List<IElement> list = HTMLWorker.ParseToList(new StringReader(stringBuilder.ToString()),
                                                 new StyleSheet());
    Paragraph p = new Paragraph {Font = fontNormal};

    foreach (var element in list)
    {
        p.Add(element);
        doc.Add(p);
    }

    doc.Close();
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T12:16:26.907

您还可以使用新的**XMLWorkerHelper**（来自**itextsharp.xmlworker**库），但是您需要覆盖默认的 FontFactory 实现。

```
void GeneratePdfFromHtml()
{
  const string outputFilename = @".\Files\report.pdf";
  const string inputFilename = @".\Files\report.html";

  using (var input = new FileStream(inputFilename, FileMode.Open))
  using (var output = new FileStream(outputFilename, FileMode.Create))
  {
    CreatePdf(input, output);
  }
}

void CreatePdf(Stream htmlInput, Stream pdfOutput)
{
  using (var document = new Document(PageSize.A4, 30, 30, 30, 30))
  {
    var writer = PdfWriter.GetInstance(document, pdfOutput);
    var worker = XMLWorkerHelper.GetInstance();

    document.Open();
    worker.ParseXHtml(writer, document, htmlInput, null, Encoding.UTF8, new UnicodeFontFactory());

    document.Close();
  }    
}

public class UnicodeFontFactory : FontFactoryImp
{
    private static readonly string FontPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts),
      "arialuni.ttf");

    private readonly BaseFont _baseFont;

    public UnicodeFontFactory()
    {
      _baseFont = BaseFont.CreateFont(FontPath, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);

    }

    public override Font GetFont(string fontname, string encoding, bool embedded, float size, int style, BaseColor color,
      bool cached)
    {
      return new Font(_baseFont, size, style, color);
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-26T15:26:09.953

在处理 Unicode 字符和 iTextSharp 时，您需要注意几件事。您已经完成的第一个是获得支持您的字符的字体。第二件事是你想用 iTextSharp 实际注册字体，以便它知道它。

```
//Path to our font
string arialuniTff = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts), "ARIALUNI.TTF");
//Register the font with iTextSharp
iTextSharp.text.FontFactory.Register(arialuniTff); 
```

现在我们有了字体，我们需要创建一个`StyleSheet`对象来告诉 iTextSharp 何时以及如何使用它。

```
//Create a new stylesheet
iTextSharp.text.html.simpleparser.StyleSheet ST = new iTextSharp.text.html.simpleparser.StyleSheet();
//Set the default body font to our registered font's internal name
ST.LoadTagStyle(HtmlTags.BODY, HtmlTags.FACE, "Arial Unicode MS"); 
```

您还需要做的一个非 HTML 部分是设置一个特殊`encoding`参数。此编码特定于 iTextSharp，在您的情况下，您希望它是`Identity-H`. 如果您不设置，则默认为`Cp1252`( `WINANSI`)。

```
//Set the default encoding to support Unicode characters
ST.LoadTagStyle(HtmlTags.BODY, HtmlTags.ENCODING, BaseFont.IDENTITY_H); 
```

最后，我们需要将样式表传递给`ParseToList`方法：

```
//Parse our HTML using the stylesheet created above
List<IElement> list = HTMLWorker.ParseToList(new StringReader(stringBuilder.ToString()), ST); 
```

将所有这些放在一起，从打开到关闭，您将拥有：

```
doc.Open();

//Sample HTML
StringBuilder stringBuilder = new StringBuilder();
stringBuilder.Append(@"<p>This is a test: <strong>α,β</strong></p>");

//Path to our font
string arialuniTff = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts), "ARIALUNI.TTF");
//Register the font with iTextSharp
iTextSharp.text.FontFactory.Register(arialuniTff);

//Create a new stylesheet
iTextSharp.text.html.simpleparser.StyleSheet ST = new iTextSharp.text.html.simpleparser.StyleSheet();
//Set the default body font to our registered font's internal name
ST.LoadTagStyle(HtmlTags.BODY, HtmlTags.FACE, "Arial Unicode MS");
//Set the default encoding to support Unicode characters
ST.LoadTagStyle(HtmlTags.BODY, HtmlTags.ENCODING, BaseFont.IDENTITY_H);

//Parse our HTML using the stylesheet created above
List<IElement> list = HTMLWorker.ParseToList(new StringReader(stringBuilder.ToString()), ST);

//Loop through each element, don't bother wrapping in P tags
foreach (var element in list) {
    doc.Add(element);
}

doc.Close(); 
```

**编辑**

在您的评论中，您显示了指定覆盖字体的 HTML。iTextSharp 不蜘蛛系统的字体和它的 HTML 解析器不使用字体回退技术。在 HTML/CSS 中指定的任何字体都必须手动注册。

```
string lucidaTff = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts), "l_10646.ttf");
iTextSharp.text.FontFactory.Register(lucidaTff); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-24T08:28:31.987

```
private class UnicodeFontFactory : FontFactoryImp
{
    private BaseFont _baseFont;

    public  UnicodeFontFactory()
    {
        string FontPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts), "arialuni.ttf");
        _baseFont = BaseFont.CreateFont(FontPath, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);                
    }

    public override Font GetFont(string fontname, string encoding, bool embedded, float size, int style, BaseColor color, bool cached)
    {                                
        return new Font(_baseFont, size, style, color);
    }
} 
```

//和代码

```
FontFactory.FontImp = new UnicodeFontFactory();

string convertedHtml = string.Empty;
foreach (char c in htmlText)
{
     if (c < 127)  
           convertedHtml += c;
     else
           convertedHtml += "&#" + (int)c + ";";
}

List<IElement> htmlElements = XMLWorkerHelper.ParseToElementList(convertedHtml, null);

// add the IElements to the document
foreach (IElement htmlElement in htmlElements)
{                            
      document.Add(htmlElement);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-24T22:06:06.613

这一定是迄今为止我必须解决的最困难的问题之一。网络上的答案，包括堆栈溢出，要么是糟糕的要么是过时的信息。Gregor 的回答非常接近。我想回馈这个社区，因为我花了很多时间来得到这个答案。

这是我用 c# 编写的一个非常简单的程序，作为我自己笔记的示例。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using iTextSharp.text;
using iTextSharp.text.pdf;
using iTextSharp.tool.xml;

namespace ExampleOfExportingPDF
{
    class Program
    {
        static void Main(string[] args)
        {
            //Build HTML document
            StringBuilder sb = new StringBuilder();
            sb.Append("<body>");
            sb.Append("<h1 style=\"text-align:center;\">これは日本語のテキストの例です。&lt;/h1>");
            sb.Append("</body>");

            //Create our document object
            Document Doc = new Document(PageSize.A4);

            //Create our file stream
            using (FileStream fs = new FileStream(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "Test.pdf"), FileMode.Create, FileAccess.Write, FileShare.Read))
            {
                //Bind PDF writer to document and stream
                PdfWriter writer = PdfWriter.GetInstance(Doc, fs);

                //Open document for writing
                Doc.Open();

                //Add a page
                Doc.NewPage();

                MemoryStream msHtml = new MemoryStream(System.Text.Encoding.UTF8.GetBytes(sb.ToString()));
                XMLWorkerHelper.GetInstance().ParseXHtml(writer, Doc, msHtml, null, Encoding.UTF8, new UnicodeFontFactory());

                //Close the PDF
                Doc.Close();
            }

        }

        public class UnicodeFontFactory : FontFactoryImp
        {
            private static readonly string FontPath = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts),
          "arialuni.ttf");

            private readonly BaseFont _baseFont;

            public UnicodeFontFactory()
            {
                _baseFont = BaseFont.CreateFont(FontPath, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);

            }

            public override Font GetFont(string fontname, string encoding, bool embedded, float size, int style, BaseColor color,
          bool cached)
            {
                return new Font(_baseFont, size, style, color);
            }
        }

    }
} 
```

希望这将在未来节省一些时间。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-12-23T17:57:05.830

**这是在将 Html 转换为 Pdf 时显示 unicode 字符的几个步骤**

1.  创建一个 HTMLWorker
2.  注册一个 unicode 字体并分配它
3.  创建样式表并将编码设置为 Identity-H
4.  将样式表分配给 html 解析器

**检查下面的链接以获得更多的理解......**

*   [在将 Html 转换为 Pdf 时显示 Unicode 字符](http://www.codescratcher.com/asp-net/display-unicode-characters-in-converting-html-to-pdf/)

在使用此方法从 HTML 转换为 PDF 期间，还会显示印地语、土耳其语和特殊字符。检查下面的演示图像。

[![在此处输入图像描述](../Images/53a65f19435276842835c0194b0a56a9.png)](http://www.codescratcher.com/asp-net/display-unicode-characters-in-converting-html-to-pdf/)

# c# - 如何在 C# 中使用 xmlserializer 自定义 xml？

> ID：10329870
> 
> 赞同：2
> 
> 时间：2012-04-26T08:36:47.983
> 
> 标签：c#

我有以下课程：

```
public class DisplayFunction 
    {
        [System.Xml.Serialization.XmlAttribute()]
        public byte[] Color
        {
            get;
            set;
        }
        [System.Xml.Serialization.XmlAttribute()]
        public FunctionShape Shape
        {
            get;
            set;
        }
        [System.Xml.Serialization.XmlAttribute()]
        public int Id
        {
            get;
            set;
        }
} 
```

我正在使用 xml 序列化程序并得到结果：

```
<DisplayFunctions Color="et57hQ==" Shape="Bar" Id="514" /> 
```

虽然我希望结果是：

```
 <DisplayFunctions Color="122,222,123,133" Shape="Bar" Id="514" /> 
```

我怎样才能得到那个结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:03:37.043

XML 序列化程序正在使用字节数组对颜色进行序列化。所以结果很奇怪。

我的建议是使用类型的公共属性`string`来序列化颜色，然后使用转换将颜色转换为字符串，反之亦然。

```
string HtmlColor = System.Drawing.ColorTranslator.ToHtml(MyColorInstance);
string HtmlColor = System.Drawing.ColorTranslator.ToHtml(MyColorInstance); 
```

因此，您需要以下内容：

```
 Color mColor;
  [XmlIgnore]
  public Color Color
  {
      get { return mColor; }
      set { mColor = value; }
  }

  [XmlElement("Color")]
  public string ColorStr
  {
      get { return ColorTranslator.ToHtml(Color); }
      set { Color = ColorTranslator.FromHtml(value); }
  } 
```

**注意**：如果您需要将 转换`Color`为 a `byte[]`，您可以添加一个附加属性以获取颜色作为`byte[]`也忽略`[XmlIgnore]`属性。

如果提供的格式`ColorTranslator.ToHtml`对您无效，您可以使用自定义颜色翻译，例如

```
public string ToCustomString(Color color)
{
    return string.Format("{0},{1},{2},{3}", color.A, color.R, color.G, color.B);
} 
```

以及用于从字符串中分配颜色的类似方法。

希望能帮助到你-

# vba - Excel VBA 用于在 Word 中创建编号列表

> ID：10329871
> 
> 赞同：1
> 
> 时间：2012-04-26T08:36:52.693
> 
> 标签：vba, excel, ms-word, office-2007

我正在尝试在 Excel 中使用 VBA 代码在 Word 文档中创建编号列表。

```
Dim wrdApp As Word.Application
Dim wrdDoc As Word.Document

Set wrdApp = CreateObject("Word.Application")
wrdApp.Visible = True
Set wrdDoc = wrdApp.Documents.Add

With wrdDoc
    For i = 0 To 5
        .Content.InsertAfter ("Paragraph " & i)
        .Content.InsertParagraphAfter
    Next

    .Paragraphs(1).Range.ListFormat.ApplyListTemplateWithLevel ListTemplate:= _
        ListGalleries(wdNumberGallery).ListTemplates(1), ContinuePreviousList:= _
        False, ApplyTo:=wdListApplyToWholeList, DefaultListBehavior:= _
        wdWord10ListBehavior
End With

Set wrdApp = Nothing
Set wrdDoc = Nothing 
```

当我运行它时，我得到一个错误：

> 对象“ListFormat”的方法“ApplyListTemplateWithLevel”失败

我已经检查了`Microsoft Word 12.0 Object Library`Excel VBA 参考列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T09:58:11.157

好的，我发现了问题。我远程进入朋友的机器进行检查。如果打开了其他word文档，我会遇到与您相同的错误。如果没有打开其他 word 文档，那么您的代码就可以正常工作。

试试这个代码。它与 Word 应用程序后期绑定，因此您不需要添加引用。

```
Sub Sample()
    Dim oWordApp As Object, oWordDoc As Object

    '~~> Establish an Word application object
    On Error Resume Next
    Set oWordApp = GetObject(, "Word.Application")

    If Err.Number <> 0 Then
        Set oWordApp = CreateObject("Word.Application")
    End If
    Err.Clear
    On Error GoTo 0

    oWordApp.Visible = True

    Set oWordDoc = oWordApp.Documents.Add

    With oWordDoc
        For i = 0 To 5
            .Content.InsertAfter ("Paragraph " & i)
            .Content.InsertParagraphAfter
        Next

        DoEvents

        .Paragraphs(1).Range.ListFormat.ApplyListTemplateWithLevel ListTemplate:= _
        ListGalleries(wdNumberGallery).ListTemplates(1), ContinuePreviousList:= _
        False, ApplyTo:=wdListApplyToWholeList, DefaultListBehavior:= _
        wdWord10ListBehavior
    End With

    Set oWordApp = Nothing
    Set oWordDoc = Nothing
End Sub 
```

# geolocation - 如何正确地对 GSM 蜂窝塔进行三角测量以获取位置？

> ID：10329877
> 
> 赞同：31
> 
> 时间：2012-04-26T08:37:03.740
> 
> 标签：geolocation, gsm, at-command

首先，我试图在 c# (.net 4) 中完成所有这些灾难，所以如果你想出一些代码来帮助我，我将不胜感激，但在这一点上真的任何事情都会有所帮助。

我有一种情况，我的设备只能获取 GSM 小区信息（顺便通过`AT+KCELL`命令），所以我有一组关于小区塔的值（每个都有 LAC、MCC、MNC、小区 ID、信号强度和第一个时间进步）。因此，我认为我处于一个能够提出某种经度和纬度坐标的好地方（尽管不准确，但是，嗯）。这就是我寻求帮助的地方，因为现在我的小脑袋很困惑......

我可以看到各种提供单元代码解析的服务（Google、Open Cell ID 等），它们将 LAC、MCC 等作为参数并返回坐标。因此，我认为他们返回的内容将是我通过的给定塔的坐标。所以在我的情况下，我可以发送我拥有的所有 LAC 等，并取回一组经度和纬度。太棒了，但这不是我的设备所在的地方。现在我想我需要做一些三角测量，这就是我缺乏知识伤害我的地方。

那么到目前为止我是对的吗？假设我是，我该如何执行这个计算（那里有什么东西可以告诉我如何处理所有这些数字，或者更好的是，我可以参考一些开源库并将所有这些东西输入以获得一些明智的东西） ?

我假设我需要使用时间提前来计算出与手机信号塔的大致距离（可能以某种方式使用信号强度），但我该怎么办？正如你所知道的 - 我在这里超出了我的深度！

例如，这是我可能从前面提到的 AT 命令中得到的东西：

```
5,74,33,32f210,157e,8101,50,0,79,3,32f210,157e,80f7,37,64,5,32f210,157e,810b,37,55,32,32f210,157e,9d3,27,41,33,32f210,157e,edf8,15 
```

分解它并解析它我会得到（我希望我能正确解析它 - 当然我的解析例程中可能存在错误，但它看起来很合理）：

```
Number of cells: 5 
```

**单元格 1**

```
LAC: 5502
MNC: 1
MCC: 232
Cell ID: 33025
Signal: 80
ARFCN: 74
BSIC: 33
Timing advance: 0
Longitude: 14.2565389
Latitude: 48.2248439 
```

**单元格 2**

```
LAC: 5502
MNC: 1
MCC: 232
Cell ID: 33015
Signal: 55
ARFCN: 79
BSIC: 3
Longitude: 14.2637736
Latitude: 48.2331576 
```

**单元格 3**

```
LAC: 5502
MNC: 1
MCC: 232
Cell ID: 33035
Signal: 55
ARFCN: 64
BSIC: 5
Longitude: 14.2488966
Latitude: 48.232513 
```

**单元格 4**

```
LAC: 5502
MNC: 1
MCC: 232
Cell ID: 2515
Signal: 39
ARFCN: 55
BSIC: 32
Longitude: 14.2488163
Latitude: 48.2277972 
```

**单元格 5**

```
LAC: 5502
MNC: 1
MCC: 232
Cell ID: 60920
Signal: 21
ARFCN: 41
BSIC: 33
Longitude: 14.2647612
Latitude: 48.2299558 
```

那么，有了所有这些信息，我如何以最准确的方式找到我的实际位置？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-26T10:11:26.260

我可以帮助你一些理论。

三角测量基本上是找到3个圆的交点。

每个移动塔都是一个圆的中心。圆圈的大小与该塔的信号强度有关。

3个圆圈重叠的地方就是用户所在的地方。

您可以进行一些非常基本的三角测量，如下所示：

```
3 塔在
 tx1,ty1
 TX2,TY2
 tx3,ty3

信号强度为 s1、s2、s3

我们计算每个信号的权重。本质上是一个从 0 到 1 的数字，每个塔的权重总和为 1。

加权信号 w1、w2、w3 其中：
 w1 = s1/(s1+s2+s3)
 w2 = s2/(s1+s2+s3)
 w3 = s3/(s1+s2+s3)

用户将在
x：（w1 * tx1 + w2 * tx2+ w3 * tx3）
y: (w1 * ty1 + w2 * ty2+ w3 * ty3)

```

这是一个使用您问题中的值的工作示例：

```
s1 = 80
s2 = 55
s3 = 55
s4 = 55
s5 = 21

w1 = 80 / ( 80 + 55 + 55 + 55 + 21 )
w2 = 55 / ( 80 + 55 + 55 + 55 + 21 )
w3 = 55 / ( 80 + 55 + 55 + 55 + 21 )
w4 = 55 / ( 80 + 55 + 55 + 55 + 21 )
w5 = 21 / ( 80 + 55 + 55 + 55 + 21 )

w1 = 0.3007519
w2 = 0.2067669
w3 = 0.2067669
w4 = 0.2067669
w5 = 0.0789474

1.经度：14.2565389
1\. 纬度：48.2248439

2.经度：14.2637736
2\. 纬度：48.2331576

3.经度：14.2488966
3\. 纬度：48.232513

4.经度：14.2488163
4\. 纬度：48.2277972

5.经度：14.2647612
5\. 纬度：48.2299558

位置经度 =
 14.2565389 * 0.3007519 +
 14.2637736 * 0.2067669 +
 14.2488966 * 0.2067669 +
 14.2488163 * 0.2067669 +
 14.2647612 * 0.0789474

位置纬度：=
 48.2248439 * 0.3007519 +
 48.2331576 * 0.2067669 +
 48.232513 * 0.2067669 +
 48.2277972 * 0.2067669 +
 48.2299558 * 0.0789474

结果经度：14.255507
结果纬度：48.2291628

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T10:23:37.373

这不是一个真正的答案，但它是一个开胃菜，我可能会添加更多：

单元格 ID 似乎已发布：

[http://openbmap.org/](http://openbmap.org/)

我从这个 wiki 页面中找到了这个链接，该链接包含指向其他单元格 id 数据源的链接：[http](http://en.wikipedia.org/wiki/Cell_ID) ://en.wikipedia.org/wiki/Cell_ID ）

请参阅页面底部，这是指向单元格 ID 数据的链接：

[http://openbmap.org/latest/cellular/raw/input_raw.zip](http://openbmap.org/latest/cellular/raw/input_raw.zip)

我还发现了这个 youtube 视频，其中一个人正在玩一些似乎有手机信号塔位置的应用程序：

[http://www.youtube.com/watch?v=CYvVN5dJD7A](http://www.youtube.com/watch?v=CYvVN5dJD7A)

可能在单元格 ID 和信号强度之间，您可以猜测..

但是对于一般三角测量，您需要知道至少三个塔的确切位置以及与它们的确切距离（这可能是信号强度的粗略距离，但它可能太不准确了）。

似乎维基百科说它是以这种方式完成的..使用您所在的单元格，最近的塔和信号强度的组合来获取您的位置：

[http://en.wikipedia.org/wiki/Mobile_phone_tracking](http://en.wikipedia.org/wiki/Mobile_phone_tracking)

# css - 当溢出可见时CSS背景消失

> ID：10329881
> 
> 赞同：3
> 
> 时间：2012-04-26T08:37:31.543
> 
> 标签：css, background, overflow

我有一个具有以下基本结构的站点。这个站点应该有一个白色的背景，一个出现一次的图像，但它只是从`html{ }`CSS 中的声明中继承颜色。应该具有背景的元素下方的所有元素都是透明的，即使正在添加背景（在 Firebug 中检查），它似乎也低于`html{ }`.

这只是在我`overflow: none;`从`#content-container`中删除声明后才发生的，和以前一样。但是，我需要删除它，因为站点发生的更改需要导航菜单具有下拉菜单，因此下面的容器必须允许溢出。

发生这种情况是否有特定的 CSS 原因？或者我需要提供什么其他东西才能让某人能够提供帮助？谢谢。

```
<div id="main-container">

    <div id="header-container">
        <div id="header-top">
            {Code}
        </div>

        <div id="header-middle">
            {Code}
        </div>

        <div id="header-nav">
            {Code}        
        </div>
    </div>

    <div id="content-container">
        <div id="content-left" class="index">  
            {Code}
        </div>

        <div id="content-right">
            {Code}
        </div>
    </div>

    <div id="footer-container">
        {Code}
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T08:43:21.703

我猜这`#content-left`和`#content-right`元素是浮动的？在这种情况下，`overflow: none`on`#content-container`会导致元素*self-clear*。没有这个，元素将没有高度，因为其中的所有元素都是浮动的，因此无法计算容器的高度。

如果必须使用`overflow: visible`，解决方法是将 a`div`放在包含元素的末尾，并`clear: both`在其上设置：

```
<div id="content-container">
    <div id="content-left" class="index">  
        {Code}
    </div>

    <div id="content-right">
        {Code}
    </div>

    <div class="clear"></div>
</div> 
```

```
.clear { clear: both; } 
```

# php - 添加数据时如何在 CakePHP 2 fotm 中使用 trim() 函数？

> ID：10329882
> 
> 赞同：2
> 
> 时间：2012-04-26T08:37:32.453
> 
> 标签：php, cakephp-2.0

`trim()`在添加数据时如何使用CakePHP 2 表单中的函数？

```
<?php
    echo $this->Form->input('service_id');
    echo $this->Form->input('name');
    echo $this->Form->input('unit');
    echo $this->Form->input('price');
    echo $this->Form->input('date');
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:39:52.763

在您的控制器中，在`save()`数据之前：

```
$this->data['YourModelName'] = array_map('trim', $this->data['YourModelName']); 
```

如果您愿意，您也可以单独为每个字段执行此操作。

# ruby-on-rails - 无法加载 sass 文件 Rails 3.1.3

> ID：10329885
> 
> 赞同：1
> 
> 时间：2012-04-26T08:37:39.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, sass, rails-engines

我导入了一个 css.sass 文件，该文件又包含：

```
@import "mountable_engine/file.sass" 
```

但是由于一些奇怪的原因，找到了一些 sass 文件，对于一些我得到以下错误：

> **ActionView::Template::Error（找不到或无法读取要导入的文件：mountable_engine/file1.sass**

我怎样才能摆脱这个错误？

**编辑：**这发生在可安装的引擎中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:03:22.363

看来这是我自己的错误。预编译资产存在问题，因此该文件以某种方式被 rails 遗漏了。清除 rails 缓存文件夹并重新运行资产预编译后，我的问题得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:08:53.523

SCSS 导入是相对于进行导入的文件而言的，我认为 SASS 是相同的。

如果两个文件在同一目录中，请尝试

```
@import "file.sass" 
```

编辑：对不起，误读的问题。这可能没有帮助。

# mysql - 从 MySql 查询计算方程

> ID：10329886
> 
> 赞同：0
> 
> 时间：2012-04-26T08:37:52.973
> 
> 标签：mysql

我如何使用 mysql 查询选择像这样的等式（ decimalnumber_1 / (100+decimalnumber_2) * 100 ）

```
decimalnumber_1 = //SELECT table_1.a_decimalnumber_1 AS decimalnumber_1 FROM table_1 WHERE table_1.another_coloumn_name = z

decimalnumber_2 = //SELECT table_2.a_decimalnumber_2 AS decimalnumber_2 FROM table_2 WHERE table_2.an_another_coloumn_name = x

result =  //SELECT ( decimalnumber_1 / (100+decimalnumber_2) * 100 ) AS result 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:04:04.780

```
CREATE PROCEDURE @eqresult 
@result int output
AS
DECLARE @decNum1 int,@decNum2 int 
SET @decNum1=(SELECT table_1.a_decimalnumber_1 AS decimalnumber_1 FROM table_1 
             WHERE  table_1.another_coloumn_name = z)
SET @decNum1=(SELECT table_2.a_decimalnumber_2 AS decimalnumber_2 FROM table_2 
             WHERE  table_2.another_coloumn_name = x)
SET @result=( @decNum1 / (100+@decNum2) * 100 )
RETURN @result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:41:55.040

尝试

```
SELECT ( (SELECT table_1.a_decimalnumber_1 AS decimalnumber_1 FROM table_1 WHERE table_1.another_coloumn_name = z
)/ (100+(SELECT table_2.a_decimalnumber_2 AS decimalnumber_2 FROM table_2 WHERE table_2.an_another_coloumn_name = x
)) * 100 ) AS result 
```

# visual-c++ - 在 vc++ 2010 的命令行上设置目标平台

> ID：10329887
> 
> 赞同：1
> 
> 时间：2012-04-26T08:37:54.090
> 
> 标签：visual-c++

我一直在谷歌搜索，但没有任何运气。谁能告诉我如何在 Vc++ 2010 的命令行上将目标平台设置为仅 x86 而不是任何 CPU？我正在使用 Code::Blocks 并且它没有在 gui 中显示这个选项，因为它似乎不了解 vc++ 2010。它的最高值是 2008，至少在我的版本中是这样。

# javascript - 图片库显示“无法加载请求的内容。” （花式盒）

> ID：10329890
> 
> 赞同：0
> 
> 时间：2012-04-26T08:38:00.527
> 
> 标签：javascript, wordpress, themes, fancybox, buddypress

我的新 buddypress 主题（buddyboss）有问题。里面有一个图片库，当我安装它时效果很好。它甚至可以在我的本地安装中使用相同的主题文件。但现在它显示“无法加载请求的内容”。当我单击缩略图打开它时。这很奇怪，因为它在一开始就很好用。我不知道我做错了什么......这是页面：[http ://crowdartgallery.de/members/superduper/pictures/](http://crowdartgallery.de/members/superduper/pictures/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:42:17.623

它正在查看此页面：

[http://crowdartgallery.de/activity/p/22/?buddyboss_ajax_pic=true](http://crowdartgallery.de/activity/p/22/?buddyboss_ajax_pic=true)

这将返回 404。您需要让它请求图像的实际 url。

使用 Chrome 的开发工具，您可以查看网络请求并查看问题所在。

# ruby-on-rails - “捆绑安装”导致 Gem::RemoteFetcher::FetchError 在每个 gem

> ID：10329892
> 
> 赞同：7
> 
> 时间：2012-04-26T08:38:14.157
> 
> 标签：ruby-on-rails, gem, openssl, rvm, bundler

打电话时

```
rails new project 
```

该过程一直进行，直到我点击捆绑安装。在那时候：

```
identical  vendor/plugins/.gitkeep
         run  bundle install
Fetching gem metadata from https://rubygems.org/.........

Gem::RemoteFetcher::FetchError: SSL_connect returned=1 errno=0 state=unknown state: sslv3 alert handshake failure (https://d2chzxaqi4y7f8.cloudfront.net/gems/rake-0.9.2.2.gem)
An error occured while installing rake (0.9.2.2), and Bundler cannot continue.
Make sure that `gem install rake -v '0.9.2.2'` succeeds before bundling. 
```

我可以使用 gem install 手动安装 gem 并再次启动 rails new ，并且下一个 gem 会重复该错误。我最终手动安装每一个宝石。

我使用 rvm 1.13.0 单用户。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T09:20:15.570

你有安装 OpenSSL 吗？您没有提及您的操作系统，但在 Ubunutu（或其他基于 Debian 的发行版）上您会这样做：

```
sudo apt-get install openssl 
```

如果失败，请尝试[http://railsapps.github.com/openssl-certificate-verify-failed.html](http://railsapps.github.com/openssl-certificate-verify-failed.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T15:07:23.280

试试这个。

```
rvm pkg install openssl
rvm reinstall 1.9.2 --with-openssl-dir=$rvm_path/usr 
```

# jakarta-ee - Java EE 插件框架

> ID：10329893
> 
> 赞同：4
> 
> 时间：2012-04-26T08:38:14.190
> 
> 标签：jakarta-ee, plugins, deployment, frameworks, ejb

我想让我的 Java EE 应用程序可插入。主应用程序将部署在一个耳朵中，但它在 EJB 中的代码将包含插件的入口点。插件可以部署在自己的 jar 文件中。有什么好的框架可以做到这一点吗？我正在寻找一个轻量级的框架。

我应该阅读或学习什么来制作这样的框架？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T09:29:35.040

OSGi 非常适合这个。Apache Felix 或 Eclipse Equinox 都可以在您的 Java EE 应用程序中启动，并且 OSGi 包（在 MANIFEST.MF 文件中有一些额外条目的 jar 文件）可以部署到它们。

这里有一些关于嵌入 Felix 的好信息：http: [//felix.apache.org/site/apache-felix-framework-launching-and-embedding.html#ApacheFelixFrameworkLaunchingandEmbedding-embedding](http://felix.apache.org/site/apache-felix-framework-launching-and-embedding.html#ApacheFelixFrameworkLaunchingandEmbedding-embedding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:20:40.487

为 Java EE 创建插件的另外两种方法是通过其连接器架构 (JCA) 和通过其可移植扩展 (CDI)。

虽然功能强大，但 JCA 的文档记录并不完善，因为供应商而不是常规应用程序开发人员更常使用它。

# java - 在 JavaME 中实现阻塞队列：如何优化它？

> ID：10329896
> 
> 赞同：5
> 
> 时间：2012-04-26T08:38:30.923
> 
> 标签：java, java-me, concurrency, producer-consumer

我正在尝试在 Java ME 中实现一个简单的阻塞队列。在 JavaME API 中，Java SE 的并发实用程序不可用，所以我不得不像过去一样使用等待通知。

这是我的临时实现。我使用`notify`而不是`notifyAll`因为在我的项目中有多个生产者但只有一个消费者。我故意使用一个对象来等待通知以提高可读性，尽管它浪费了一个参考：

```
 import java.util.Vector;

    public class BlockingQueue {    
        private Vector queue = new Vector();
        private Object queueLock = new Object();    

        public void put(Object o){
            synchronized(queueLock){
                queue.addElement(o);
                queueLock.notify();
            }       
        }

        public Object take(){
            Object ret = null;
            synchronized (queueLock) {
                while (queue.isEmpty()){
                    try {
                        queueLock.wait();
                    } catch (InterruptedException e) {}
                }

                ret = queue.elementAt(0);
                queue.removeElementAt(0);
            }
            return ret;
        }
    } 
```

我的主要问题是关于`put`方法。我可以把这`queue.addElement`条线放在外面`synchronized`吗？如果是这样，性能会提高吗？

此外，这同样适用于`take`：我可以将这两个操作`queue`排除在外`synchronized block`吗？

还有其他可能的优化吗？

编辑：
正如@Raam 正确指出的那样，消费者线程在`wait`. 那么有什么替代方法可以防止这种情况发生呢？（注意：在 JavaME 中，我没有来自 Java SE 的所有这些好类。把它想象成旧的 Java v1.2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:54:13.987

Vector 类不保证线程安全，您应该像您所做的那样同步对它的访问。除非您有证据表明您当前的解决方案存在性能问题，否则我不会担心。

另一方面，我认为使用`notifyAll`而不是`notify`支持多个消费者没有什么害处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T09:09:00.153

`synchronized`用于保护对共享状态的访问并确保原子性。

请注意，方法`Vector`已经同步，因此`Vector`保护它自己的共享状态本身。因此，您的同步块只需要确保您的操作的原子性。

您当然不能`queue`从方法中的同步块继续操作`take()`，因为原子性对于该方法的正确性至关重要。但是，据我了解，您可以从`put()`方法中的同步块中移动队列操作（我无法想象会出错的情况）。

然而，上面的推理纯粹是理论上的，因为在所有情况下你都有双重同步：你的 synchronize on`queueLock`和`Vector`隐式 synchronize on的方法`queue`。**因此提出的优化没有意义**，它的正确性取决于双重同步的存在。

为避免双重同步，您还需要同步`queue`：

```
synchronized (queue) { ... } 
```

另一种选择是使用非同步集合（例如`ArrayList`）而不是`Vector`，但 JavaME 不支持它。在这种情况下，您也将无法使用建议的优化，因为同步块还保护非同步集合的共享状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T22:35:05.500

除非您特别由于垃圾收集而出现性能问题，否则我宁愿使用链表而不是 Vector 来实现队列（先进先出）。

当您的项目（或另一个）获得多个消费者时，我还将编写可以重用的代码。尽管在这种情况下，您需要注意 Java 语言规范并没有强加实现监视器的方法。实际上，这意味着您无法控制通知哪个消费者线程（现有的 Java 虚拟机中有一半使用 FIFO 模型实现监视器，而另一半使用 LIFO 模型实现监视器）

我还认为使用阻塞类的人也应该处理 InterruptedException。毕竟，否则客户端代码将不得不处理 null Object 返回。

所以，像这样：

```
 /*package*/ class LinkedObject {

    private Object iCurrentObject = null;
    private LinkedObject iNextLinkedObject = null;

    LinkedObject(Object aNewObject, LinkedObject aNextLinkedObject) {
        iCurrentObject = aNewObject;
        iNextLinkedObject = aNextLinkedObject;
    }

    Object getCurrentObject() {
        return iCurrentObject;
    }

    LinkedObject getNextLinkedObject() {
        return iNextLinkedObject;
    }
}

public class BlockingQueue {
    private LinkedObject iLinkedListContainer = null;
    private Object iQueueLock = new Object();
    private int iBlockedThreadCount = 0;

    public void appendObject(Object aNewObject) {
        synchronized(iQueueLock) {
            iLinkedListContainer = new iLinkedListContainer(aNewObject, iLinkedListContainer);
            if(iBlockedThreadCount > 0) {
                iQueueLock.notify();//one at a time because we only appended one object
            }
        } //synchonized(iQueueLock)
    }

    public Object getFirstObject() throws InterruptedException {
        Object result = null;
        synchronized(iQueueLock) {
            if(null == iLinkedListContainer) {
                ++iBlockedThreadCount;
                try {
                    iQueueLock.wait();
                    --iBlockedThreadCount; // instead of having a "finally" statement
                } catch (InterruptedException iex) {
                    --iBlockedThreadCount;
                    throw iex;
                }
            }
            result = iLinkedListcontainer.getCurrentObject();
            iLinkedListContainer = iLinkedListContainer.getNextLinkedObject();
            if((iBlockedThreadCount > 0)  && (null != iLinkedListContainer )) {
                iQueueLock.notify();
            }
        }//synchronized(iQueueLock)
        return result;
    }

} 
```

我认为，如果您尝试在同步块中放置更少的代码，则该类将不再正确。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-26T09:53:47.480

这种方法似乎存在一些问题。即使队列中有元素，您也可能会遇到消费者错过通知并在队列中等待的情况。按时间顺序考虑以下序列

T1 - Consumer 获取 queueLock，然后调用 wait。Wait 将释放锁并导致线程等待通知

T2 - 一个生产者获取 queueLock 并将一个元素添加到队列并调用 notify

T3 - 通知消费者线程并尝试获取 queueLock 但由于另一个生产者同时出现而失败。（来自 notify java doc - 被唤醒的线程将以通常的方式与可能积极竞争以同步该对象的任何其他线程竞争；例如，被唤醒的线程在成为下一个要锁定的线程时没有可靠的特权或劣势这个对象。）

T4 - 第二个生产者现在添加另一个元素并调用 notify。当消费者在 queueLock 上等待时，此通知会丢失。

因此，从理论上讲，消费者可能会饿死（永远卡在试图获取 queueLock），您也可能会遇到内存问题，多个生产者将元素添加到队列中，而这些元素没有被读取并从队列中删除。

我建议的一些更改如下 -

*   保持可以添加到队列中的项目数的上限。
*   确保消费者始终阅读所有元素。[这](http://www.java-samples.com/showtutorial.php?tutorialid=306)是一个程序，它显示了如何对生产者 - 消费者问题进行编码。

# webusercontrol - 找不到将 Web 用户控件编译为自定义控件命名空间名称？

> ID：10329897
> 
> 赞同：0
> 
> 时间：2012-04-26T08:38:41.147
> 
> 标签：webusercontrol

示例 aspx 代码：

我的示例代码

**<%@ 注册 TagPrefix="XF" 命名空间="MyNameSPace" %>**

 **我想在我的控件中注册标签，但为什么它说找不到命名空间？有什么理想吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:20:08.170

您要么缺少程序集属性，要么尝试注册没有 src 属性的用户控件：

我当前项目的真实世界工作示例：

用户控件 (.ascx)：

```
<%@ Register TagPrefix="uc1" TagName="FooDialog" Src="FooDialog.ascx" %> 
```

一个 web 控件（在没有设计器文件的类中定义）：

```
<%@ Register TagPrefix="ie" Namespace="Microsoft.Web.UI.WebControls" Assembly="Microsoft.Web.UI.WebControls" %> 
```**

# java - 与 PropertyDescriptor 类的 getName 方法有关的 Java Beans 查询

> ID：10329900
> 
> 赞同：0
> 
> 时间：2012-04-26T08:39:04.900
> 
> 标签：java, javabeans, propertydescriptor

这可能是一个幼稚的问题。我责怪我在 Java Beans 方面的经验不足。

我使用Java Beans如下 -

我有一个`ComponentModel`有`boolean`成员的班级`isComponentEditable`

然后我有一`ComponentPropertyEditor`堂课，我在其中执行以下操作-

```
public ComponentPropertyEditorModel(ComponentModel bean) {
                 BeanInfo info = Introspector.getBeanInfo(bean.getClass());
                PropertyDescriptor[] props = info.getPropertyDescriptors();
                for (PropertyDescriptor prop : props) 
                    System.out.println(prop.getName());

        } 
```

我看到`getName()`我前面提到的成员`isComponentEditable`被退回为`componentAsEditable`. 我的印象是，对于类，成员名称将按原样返回`getName()`。

javadoc 说`getName()`返回“程序名称”。

什么是程序名，为什么它与我前面提到的班级成员的名字不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:34:20.070

`getFoo()`由or访问的 JavaBean 属性的名称`isFoo()`是“foo”。如果您想要访问器方法 ( `isFoo()`)，您应该调用`getReadMethod()`.

例如，它是在属性更改时触发事件时将使用的名称，或者在使用 Groovy 或 JSP EL 等脚本语言访问属性时将使用的名称：

```
<c:out value="${bean.componentEditable}"/> 
```

有关详细信息，请参阅[http://docs.oracle.com/javase/tutorial/javabeans/writing/properties.html](http://docs.oracle.com/javase/tutorial/javabeans/writing/properties.html)。

# ms-access - MS Access 中的并发用户 (2007)

> ID：10329901
> 
> 赞同：0
> 
> 时间：2012-04-26T08:39:12.330
> 
> 标签：ms-access, concurrency

我应该让我们的 MS Access 应用程序并行工作。基本上，我们最多只能有 3 个需要并发访问的人（所以从我读到的内容来看，这在流量方面应该不是太大的问题）。

大多数情况下，我们都需要在同一个表上工作（嗯，实际上是 3 个表，但是使用此访问工具，您始终可以通过单击 + 直接打开子表）。

我很难找到有关如何执行此操作的信息，因此欢迎任何指向好文章的指针。

此外，我希望能够看到谁改变了什么......所以实现某种日志记录。

在数据库位于某处的那一刻，我们下载它（写它正在使用），进行更改并将其上传回来。这是一个石器时代的解决方案，我需要尽快改变它。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:13:14.567

最简单的方法是将 mdb/accdb 文件粘贴到网络驱动器上，让人们从那里打开它，而不是先在本地复制它。3 个并发用户可能不会经常崩溃，但请确保定期备份。

至于日志记录，很容易审计通过表单所做的更改，但对表来说就不那么容易了。看看这个线程[http://forums.devarticles.com/microsoft-access-development-49/creating-audit-trail-of-all-edits-to-database-22382.html](http://forums.devarticles.com/microsoft-access-development-49/creating-audit-trail-of-all-edits-to-database-22382.html)

# c - 用于 Mandelbrot 循环的 x86 汇编中的高效复杂算术

> ID：10329903
> 
> 赞同：9
> 
> 时间：2012-04-26T08:39:20.163
> 
> 标签：c, assembly, x86, sse, complex-numbers

考虑以下程序：

```
for i=1 to 10000000 do
  z <- z*z + c 
```

其中`z`和`c`是复数。

使用 x87 与 SSE 以及单精度与双精度算术的该程序的有效 x86 汇编器实现是什么？

**编辑**我知道我可以用另一种语言编写它并相信编译器会为我生成最佳机器代码，但我这样做是为了学习如何自己编写最佳 x86 汇编程序。我已经看过由 生成的代码`gcc -O2`，我的猜测是还有很大的改进空间，但我不够熟练，无法自己手动编写最佳的 x86 汇编程序，所以我在这里寻求帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T08:43:08.707

您不需要在汇编程序*本身*中执行此操作- 您可以通过内在函数使用 SSE 来实现有效的实现，特别是如果您可以使用单精度。

```
temp.re = z.re * z.re - z.im * z.im;
temp.im = 2.0 * z.re * z.im;
z.re = temp.re + c.re;
z.im = temp.im + c.im; 
```

如果您适当地打乱您的输入向量，那么您可以在一条指令中获得所有乘法 ( `_mm_mul_ps`)，并在第二条指令 ( `_mm_hadd_ps`) 中获得加法。

如果您需要双精度，则适用相同的一般原则，但您需要两次乘法和两次水平加法。

请注意，大多数现代 x86 CPU 都有两个标量 FPU，因此 SSE 中双精度的好处可能不值得 - 但是单精度绝对应该是一个胜利。

* * *

这是使用 SSE 的初始工作实现 - 我认为它现在或多或少已调试 - 性能并不比使用 gcc -O3 编译的标量代码好多少，因为 gcc 在为此生成 SSE 代码方面做得很好：

```
static Complex loop_simd(const Complex z0, const Complex c, const int n)
{
    __m128 vz = _mm_set_ps(z0.im, z0.re, z0.im, z0.re);
    const __m128 vc = _mm_set_ps(0.0f, 0.0f, c.im, c.re);
    const __m128 vs = _mm_set_ps(0.0f, 0.0f, -0.0f, 0.0f);
    Complex z[2];
    int i;

    for (i = 0; i < n; ++i)
    {
        __m128 vtemp;

        vtemp = _mm_shuffle_ps(vz, vz, 0x16); // temp = { z.re, z.im, z.im, z.re }
        vtemp = _mm_xor_ps(vtemp, vs);        // temp = { z.re, -z.im, z.im, z.re }
        vtemp = _mm_mul_ps(vtemp, vz);        // temp = { z.re * z.re, - z.im * z.im, z.re * z.im, z.im * z.re }
        vtemp = _mm_hadd_ps(vtemp, vtemp);    // temp = { z.re * z.re - z.im * z.im, 2 * z.re * z.im, ... }
        vz = _mm_add_ps(vtemp, vc);           // temp = { z.re * z.re - z.im * z.im + c.re, 2 * z.re * z.im + c.im, ... }
    }
    _mm_storeu_ps(&z[0].re, vz);
    return z[0];
} 
```

请注意，内部循环只有 6 条 SSE 指令（实际上应该是 5 条）+ 循环本身的一些内务管理：

```
L4:
    movaps  %xmm0, %xmm1
    shufps  $22, %xmm0, %xmm1
    xorps   %xmm3, %xmm1
    mulps   %xmm1, %xmm0
    haddps  %xmm0, %xmm0
    addps   %xmm2, %xmm0
    incl    %eax
    cmpl    %edi, %eax
    jne L4
L2: 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T08:43:23.613

查看您最喜欢的编译器的反汇编。如果您希望对`z`和的多个值执行此计算`c`（例如计算 mandelbrot 图像），我建议您一次处理四个值并将它们放入 SSE 寄存器中。如果您查看 Paul R 答案中的代码，您可以一次对四个值进行所有这些计算：

```
__m128 z_im, z_re, c_im, c_re; //Four z and c values packed
__m128 re = _mm_sub_ps(_mm_mul_ps(z_re, z_re), _mm_mul_ps(z_im, z_im));
__m128 im = _mm_mul_ps(z_re, z_im);
im = _mm_add_ps(im, im); // Multiply by two
z_re = _mm_add_ps(re, c_re);
z_im = _mm_add_ps(im, c_im); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T08:52:54.653

Z = Z*Z + C

这就是曼德布洛特分形迭代。

我相信你会在网上找到高度优化的代码。我将从 Xaos 和 Fractint 的源代码开始。

*   Xaos：[http ://wmi.math.u-szeged.hu/xaos](http://wmi.math.u-szeged.hu/xaos)
*   [分形： http](http://www.fractint.org/) ://www.fractint.org/

# javascript - Javascript 中的 JSON 映射

> ID：10329906
> 
> 赞同：1
> 
> 时间：2012-04-26T08:39:35.930
> 
> 标签：javascript, json, map

所以我有这个 JSON

`https://bitcoinpayflow.com/orders{"order":{"bitcoin_address":"1NwKSH1DJHhobCeuwxNqdMjK5oVEZBFWbk"}}`

不，我想引用 bitcoin_address

所以首先我去掉开头的字符串

```
 var stripped = data.substring(33);
        alert(stripped);
                var btc = stripped.orders.bitcoin_address;
        alert(btc); 
```

我收到第一个警报，但不是第二个。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:41:29.550

因为`stripped`仍然只是一个字符串。您需要将其解析为一个对象。您可以使用本机`JSON.parse`方法执行此操作：

```
var stripped = JSON.parse(data.substring(33)); 
```

此外，您正在引用`orders`不存在的属性。是`order`。

请注意，`JSON.parse`旧版浏览器不支持。你可以使用[这个 polyfill](https://github.com/douglascrockford/JSON-js)来确保它始终可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:42:16.180

解码json的最简单方法——字符串——使用eval

```
var bitcoins = eval('(' + json_string + ')'); 
```

和访问`bitcoins['order']['bitcoin_address']` 但它有点不安全。上方法更安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T08:51:22.687

我会使用 JSON.parse 如下。

```
$.post('php/whatever.php',{data:dS},function(res){
    var o=JSON.parse(res);
    var bitcoins=o.order.bitcoinaddress;
},"text"); 
```

# c++ - BSD Sockets ip6 inet_pton 以及如何检索范围 ID

> ID：10329908
> 
> 赞同：1
> 
> 时间：2012-04-26T08:39:43.763
> 
> 标签：c++, c, sockets, bsd

我目前正在研究 IPv6 类并使用 inet_pton 从字符串中检索 IP 的实际二进制表示，即：

```
 AdressV6::AdressV6(const String & _ip)
    {
        int result = inet_pton(AF_INET6, _ip.c_str(), &(m_nativeAdress));

        if(result <= 0)
            //throw...

        //How can I retrieve the sope ID from that?
    } 
```

有没有一种通用的方法可以做到这一点？您是否只是手动解析字符串并查找听起来不是很防弹的“％”:(

谢谢！

我现在尝试了手动解析，这似乎可行。不过，如果有更好的方法，请告诉我：

```
 //retrieve scope ID
        uint32 scopeId = 0;
        size_t pos = _ip.find("%");
        if(pos != String::npos)
        {
            String theId = _ip.substr(pos+1);
            scopeId = atoi(theId.c_str());
        }
        m_scopeId = scopeId; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T18:55:31.910

在基于 BSD 和 BSD 的系统上（例如包括 MacOS X），作用域 ID 嵌入到地址本身中，以作为第二个 16 位字的链接本地地址。请参考[FreeBSD 手册](http://www.freebsd.org/doc/en/books/developers-handbook/ipv6.html)并搜索“8.1.1.3 Scope Index”（不带引号）。

因此，假设 intf1 的范围 ID 为 1，而 intf2 的范围 ID 为 2，`inet_pton()`将在这些平台上按如下方式转换字符串：

```
"fe80::1234%intf1" -> fe80:1::1234
"fe80::1234%intf2" -> fe80:2::1234
"fe80::1234"       -> fe80::1234 
```

最后一个地址只是无范围的，因此不能真正用于发送数据。

请注意，这是非标准的；`inet_pton()`在基于 Linux 或 Windows 的系统上不起作用。但是，我认为即使在基于 Linux 和 Windows 的系统上，`inet_pton()`最后也允许使用范围 ID，但它会简单地忽略它。

对于非链接本地地址，这个技巧当然不起作用，但这些地址通常没有作用域。它们可以限定范围，但通常每个接口都有一个自己的、唯一的接口 IPv6 地址，基于其接口标识符（即使您使用 DHCPv6，在这种情况下，它具有由 DHCP 服务器分配的 DHCP 地址，以及自动生成的IPv6 接口地址，除非此自动生成已被禁止）。

该`struct sockaddr_in6`结构有一个用于范围 ID 的字段，但定义该字段的 RFC（[RFC 2553 - 第 3.3 节](https://www.rfc-editor.org/rfc/rfc2553#section-3.3)）并没有真正详细说明如何解释该字段。它只说：

> sin6_scope_id 到一个接口或一组接口的映射留给关于站点标识符主题的实现和未来规范。

所以这个字段完全是特定于实现的。

如果您希望正确填写此字段，并且您的代码应尽可能跨平台，则应使用`getaddrinfo()`：

```
struct addrinfo hints;
struct addrinfo * result;

memset(&hints, 0, sizeof(hints));
// AI_NUMERICHOST prevents usage of DNS servers,
// it tells getaddrinfo that the input string is a numeric IP address.
hints.flags = AI_NUMERICHOST;
if (getaddrinfo("fe80::1234%intf1", NULL, &hints, &result) == 0) {
    // result->ai_addr claims to be a pointer to struct sockaddr,
    // in fact it will be a pointer to a struct sockaddr_in6 in our case.
    struct sockaddr_in6 * so = (struct sockaddr_in6 *)result->ai_addr;

    // It will be prefilled like this:
    //
    // so->sin6_family   ==> AF_INET6;
    // so->sin6_port     ==> 0
    // so->sin6_flowinfo ==> 0
    // so->sin6_addr     ==> fe80::1234
    // so->sin6_scope_id ==> "intf1" as scope ID

    // Do something with that sockaddr,
    // e.g. set a port number and connect a socket to that address.

    freeaddrinfo(result);
} 
```

一个额外的提示：如果你想使用返回`getaddrinfo()`的服务器套接字（你想在本地绑定然后调用`accept()`它的套接字），你还应该设置被动标志：

```
hints.flags = AI_NUMERICHOST | AI_PASSIVE; 
```

并不是说它在大多数情况下都会起作用，但这是正确的使用方式`getaddrinfo()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T00:51:01.393

`inet_pton()`不支持范围 ID。我不知道其他平台，但在 Windows 上你可以使用[`RtlIpv6StringToAddressEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa814463.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:07:58.637

`inet_pton()`semi-支持作用域标识符，作用域是用一个解析地址时不会报错。主要限制是调用的参数是`struct in6_addr`不包含范围标识符字段的，因此`struct sockaddr_in6`需要上层结构。

为了方便起见，简单的方法是包装`getnameinfo()`和`getaddrinfo()`使用`struct sockaddr`参数。例如，

```
socklen_t
sockaddr_len (
        const struct sockaddr*  sa
        )
{
        socklen_t sa_len;
        switch (sa->sa_family) {
        case AF_INET:   sa_len = sizeof(struct sockaddr_in); break;
        case AF_INET6:  sa_len = sizeof(struct sockaddr_in6); break;
        default:        sa_len = 0; break;
        }
        return sa_len;
}

int
sockaddr_ntop (
        const struct sockaddr* restrict sa,
        char*                  restrict host,
        size_t                          hostlen
        )
{
        return getnameinfo (sa, sockaddr_len (sa),
                            host, hostlen,
                            NULL, 0,
                            NI_NUMERICHOST);
}

int
sockaddr_pton (
        const char*      restrict src,
        struct sockaddr* restrict dst           /* will error on wrong size */
        )
{
        struct addrinfo hints = {
                .ai_family      = AF_UNSPEC,
                .ai_socktype    = SOCK_STREAM,          /* not really */
                .ai_protocol    = IPPROTO_TCP,          /* not really */
                .ai_flags       = AI_NUMERICHOST
        }, *result = NULL;
        const int status = getaddrinfo (src, NULL, &hints, &result);
        if (0 == status) {
                memcpy (dst, result->ai_addr, result->ai_addrlen);
                freeaddrinfo (result);
                return 1;
        }
        return 0;
} 
```

为了回答最初的前提但给定 a `struct sockaddr`，可能需要额外的 API，例如：

```
uint32_t
sockaddr_scope_id (
        const struct sockaddr*  sa
        )
{
        uint32_t scope_id;
        if (AF_INET6 == sa->sa_family) {
                struct sockaddr_in6 s6;
                memcpy (&s6, sa, sizeof(s6));
                scope_id = s6.sin6_scope_id;
        } else
                scope_id = 0;
        return scope_id;
} 
```

# javascript - jQuery .data() 从存储的数组中删除项目

> ID：10329909
> 
> 赞同：0
> 
> 时间：2012-04-26T08:39:49.237
> 
> 标签：javascript, jquery, ajax

我在 jQuery 中使用 .data() 函数来存储数组，如下所示：

```
var myArray = {};
myArray[0] = {};
myArray[0][0] = "test00";
myArray[0][1] = "test01";
myArray[1] = {};
myArray[1][0] = "test10";
myArray[1][1] = "test11";

$('#datastorage').data("testname". myArray); 
```

我只想从“testname”中删除一项（myArray[0]）并保留其余的。

以下不起作用：

```
$('#datastorage').removeData("testname").removeData(0); 
```

我相信 jQuery 以普通对象的形式存储了数组（测试结果为`$.isPlainObject()`真）我现在正在尝试使用该函数`.not()`来删除元素......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:49:57.737

由于原始对象是一个数组，实际存储的只是对原始数据的引用，因此您所做的任何修改都会反映在对该数组的*每个*`.data()`引用中，包括存储在.

所以你可以从数组中删除元素：

```
$('#datastorage').data("testname").shift(); 
```

或者，如果您想更灵活地删除哪些元素，请使用`.splice()`.

```
$('#datastorage').data("testname").splice(0, 1); 
```

或者如果您仍然可以访问`myArray`：

```
myArray.shift(); 
```

无需将数组放回`.data()`- 以上任何一项都会修改两者`myArray`以及已经存在的任何内容`.data()`-*它们是**同一个**数组！*.

如果数据是对象，则同样适用，但如果它是原始类型，则不适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:45:57.737

您必须取出阵列，从中取出，然后将其放回原处。

```
var a = $('#datastorage').data('testname');

a.splice(0,1); // remove 1 item from position 0

$('#datastorage').data('testname', a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:47:10.203

试试这个代码

```
var myArray = []; // myArray is an Array, not an object
myArray[0] = {};
myArray[0][0] = "test00";
myArray[0][1] = "test01";
myArray[1] = {};
myArray[1][0] = "test10";
myArray[1][1] = "test11";

$('#datastorage').data("testname", myArray);
console.log($('#datastorage').data("testname"));

$('#datastorage').data("testname", myArray.slice(1));
console.log($('#datastorage').data("testname")); 
```

小提琴示例：http: [//jsfiddle.net/nNg68/](http://jsfiddle.net/nNg68/)

# java - 使用jsoup读取表格内容

> ID：10329912
> 
> 赞同：0
> 
> 时间：2012-04-26T08:39:57.147
> 
> 标签：java, dns, jsoup

谁能帮我弄清楚为什么我不能使用 jsoup 来阅读下面这个链接中的表格： [http://data.fpt.vn/InfoDNS.aspx?domain=google.com](http://data.fpt.vn/InfoDNS.aspx?domain=google.com) 我用它来获取主机的 DNS。

这是我使用的代码：

```
import java.net.URL;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.nodes.Node;
import org.jsoup.nodes.TextNode;
import org.jsoup.select.Elements;

public class dnsjava {
public static void main(String... args) throws Exception {
     String fpt = "http://data.fpt.vn/InfoDNS.aspx?domain=google.com";
     String espn = "http://espn.go.com/mens-college-basketball/conferences/standings/_/id/2/year/2012/acc-conference"
     org.jsoup.nodes.Document doc = Jsoup.connect(fpt).get();
     Elements table = doc.select("table.tabular");
     for (Element row : table.select("tr")) {
     Elements tds = row.select("td");
     System.out.println(tds.text());
     System.out.println(tds.text());
     }
 }
 } 
```

它适用于 espn 的 url 和 doc.select("table.tablehead"); 但是使用 fpt url，什么都没有发生！谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:51:00.827

当我执行链接的“查看源代码”（在浏览器中）时，看起来您正在寻找的响应不存在。

doc.select("table.tabular"); //

```
"tabular" is not present in response. 
```

# jquery - Flexigrid 不显示数据

> ID：10329913
> 
> 赞同：2
> 
> 时间：2012-04-26T08:39:57.177
> 
> 标签：jquery, json, grid, flexigrid

我最近开始从事一个网络项目。我的要求是使用 Flexigrid Jquery 插件来呈现数据库中的一些数据块。在服务器端，我使用 Jackson 来格式化数据。我的 jquery 脚本如下所示：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#customers").flexigrid({
          url: 'JsonHandler',
          dataType: 'json',
          colModel : [
            {display: 'Id', name : 'userid',},
            {display: 'Name', name : 'fullname',},
            ],
          title: 'Table',
          width: 700,
          height: 200
        });   
        });
</script> 
```

服务器将有效的 Json 数据发送到浏览器（这是我在 Firebug 中得到的）：

```
[{"userid":"a","fullname":"John Doe"},
 {"userid":"b","fullname":"Mark Brown"},
 {"userid":"c","fullname":"Mads Borsen"}] 
```

由于某种原因，我的桌子仍然是空的。如果你有什么建议，请帮忙。

对于我的`name`情况和.`colModel``userid``fullname`

它可能与字符编码有关吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:01:03.573

**FLEXIGRID**需要渲染的格式是这样的

```
{"page":"1","total":"1","rows": 
[ 
  {"id":"1","cell":["1","55144602","Z014162","C"]},
  {"id":"3","cell":["3","55189392","Z014162","C"]},
  {"id":"4","cell":["4","55189393","Z014162","C"]},
  {"id":"5","cell":["5","55189394","Z014162","C"]},
  {"id":"6","cell":["6","55189395","Z014162","C"]}
]} 
```

您需要包括“page”、“total”和“rows”字段，以及“id”和“cell”字段。"cell":[] 括号中包含的值是 flexigrid 用于渲染或填充网格的值，我用 jsp 文件模拟答案以进行测试，我的网格有 4 个字段，如您所见，它们填充了答案的每个单元格字段的值。

我正在构建一个 JACKSON 可以渲染的对象，但我仍在处理它，我必须实现的唯一线索是，如果你发送一个 ArrayList，jackson 返回一个 [] 响应，如果你只返回一个 Oject，或者它返回一个 JavaBean一个答复。

希望此信息有所帮助。

**曼努埃尔·桑蒂兰·艾尔莱昂**

# .htaccess - 一个 FuelPHP 安装的多个站点

> ID：10329915
> 
> 赞同：1
> 
> 时间：2012-04-26T08:40:07.037
> 
> 标签：.htaccess, multiple-instances, fuelphp

我想从一个 FuelPHP 安装运行多个站点。这背后的主要驱动力是共享模型和数据库配置的能力。

我已经看到了一些需要更改 FuelPHP 目录结构或通过使用模块的建议。

*   我真的不想弄乱目录结构。

*   我不认为我完全理解模块如何帮助我，但我认为生成的配置会比我需要的更复杂。

我提出的解决方案涉及对位于 /public 中的 .htaccess 文件进行简单更改。因此我根据主机名修改重写规则。每个站点的控制器和视图位于主结构的子目录中。

**原始 .htaccess**

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

**多站点 .htaccess**

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{HTTP_HOST} main.loc
    RewriteRule ^(.*)$ index.php/main/$1 [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{HTTP_HOST} admin.loc
    RewriteRule ^(.*)$ index.php/admin/$1 [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{HTTP_HOST} api.loc
    RewriteRule ^(.*)$ index.php/api/$1 [L]
</IfModule> 
```

我的问题是，这是一个可行的解决方案吗？您是否预见到我可能会遇到的任何陷阱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:25:34.260

我的工作解决方案是并排创建三个 FuelPHP 应用程序，然后对核心目录、一些包和模型目录等关键目录进行符号链接。

一个问题是我的 FTP 客户端忽略了符号链接，所以我不得不在登台服务器上重新创建它们。当我终于开始使用 SSH 自动部署时，这将不是问题。

# zend-framework - Zend 关系 - 引用另一个表中的单个字段的两列

> ID：10329918
> 
> 赞同：1
> 
> 时间：2012-04-26T08:40:10.180
> 
> 标签：zend-framework, zend-db-table

我有两个结构如下所述的表：

```
 CREATE TABLE `up_offer` (
  `up_offer_id` int(11) NOT NULL AUTO_INCREMENT,
  `from_subscription_id` int(11) NOT NULL,
  `to_subscription_id` int(11) NOT NULL,
  PRIMARY KEY (`up_offer_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `subscription` (
  `subscription_id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(1000) NOT NULL,
  `code` varchar(45) NOT NULL,
  `price` decimal(6,2) NOT NULL,
  `billing_cycle` int(11) NOT NULL,
  `desc` varchar(2000) DEFAULT NULL,
  `start_date` date NOT NULL,
  `end_date` date NOT NULL,
  `emaillist_id` int(11) NOT NULL,
  `old_created_date` datetime NOT NULL,
  `old_last_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `created_on` datetime NOT NULL,
  `last_updated_on` datetime NOT NULL,
  `is_active` bit(1) NOT NULL DEFAULT b'1',
  PRIMARY KEY (`subscription_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

用于这两个表的 dbTable 类如下：

```
class Admin_Model_DbTable_Subscription extends Zend_Db_Table_Abstract
{
    protected $_name = 'subscription';
    protected $_primary = 'subscription_id';

    protected $_dependentTables = 'Admin_Model_DbTable_UpOffer';

    protected $_referenceMap = array(
        'UpOffer' => array(
            'columns'       => array('subscription_id'),
            'refTableClass' => 'Admin_Model_DbTable_UpOffer',
            'refColumns'    => array('from_subscription_id','to_subscription_id'),
        ),
    );

}

class Admin_Model_DbTable_UpOffer extends Zend_Db_Table_Abstract{
    protected $_name = 'up_offer';

    protected $_dependentTables = 'Admin_Model_DbTable_Offer'; 

    protected $_referenceMap = array(
        'Offer'=>array(
            'columns'           => 'up_offer_id',
            'refTableClass'     => 'Admin_Model_DbTable_Offer',
            'refColumns'        => 'up_offer_id'
        )
    );
} 
```

我想从“Zend_Db_Table_Row 对象”中获取相关数据：正在编写的代码是：

`$upOfferData->toArray()`给出字段：

```
Array
(
    [up_offer_id] => 1
    [from_subscription_id] => 10
    [to_subscription_id] => 9
) 
```

并`$upOfferData->findDependentRowset('Admin_Model_DbTable_Subscription');`给出如下输出：

```
Array
(
    [0] => Array
        (
            [subscription_id] => 10
            [name] => 001
            [code] => 010
            [price] => 10.00
            [billing_cycle] => 1
            [desc] => Test
            [start_date] => 2012-04-21
            [end_date] => 2012-05-20
            [emaillist_id] => 0
            [old_created_date] => 0000-00-00 00:00:00
            [old_last_updated] => 2012-04-20 15:29:57
            [created_on] => 2012-04-20 09:59:56
            [last_updated_on] => 2012-04-20 01:31:44
            [is_active] => 1
        )

) 
```

to_subscription_id 呢？我如何正确映射 DbTable 类以及获得所需输出的正确方法是什么？期望的应该是这样的：

```
Array
    (
        [0] => Array
            (
                [subscription_id] => 10
                [name] => 001
                [code] => 010
                [price] => 10.00
                [billing_cycle] => 1
                [desc] => Test
                [start_date] => 2012-04-21
                [end_date] => 2012-05-20
                [emaillist_id] => 0
                [old_created_date] => 0000-00-00 00:00:00
                [old_last_updated] => 2012-04-20 15:29:57
                [created_on] => 2012-04-20 09:59:56
                [last_updated_on] => 2012-04-20 01:31:44
                [is_active] => 1
            )
        [1] => Array
            (
                [subscription_id] => 9
                [name] => 002
                [code] => 011
                [price] => 50.00
                [billing_cycle] => 2
                [desc] => Test
                [start_date] => 2012-04-21
                [end_date] => 2012-05-20
                [emaillist_id] => 0
                [old_created_date] => 0000-00-00 00:00:00
                [old_last_updated] => 2012-04-20 15:29:57
                [created_on] => 2012-04-20 09:59:56
                [last_updated_on] => 2012-04-20 01:31:44
                [is_active] => 1
            )
    ) 
```

# java - 访问 dispatchMessage 内部的外部变量

> ID：10329922
> 
> 赞同：0
> 
> 时间：2012-04-26T08:40:23.847
> 
> 标签：java, android

我正在处理遗留代码。我的任务是处理异步任务的结果。

我一直无法访问 dispatchMessage 方法中的外部对象。有什么方法可以实现它还是应该使用 Singleton 或静态属性？

到目前为止，我已经创建了一个负责在异步模式下运行的类。

```
private class BackgroundTask extends AsyncTask<Object, Void, Boolean> 
    { 
        @Override
        protected Boolean doInBackground(Object... params){
            // ...
        }

        @Override
        protected void onPostExecute(Boolean result){
            // ...
        }

    } 
```

在 OnPostExecute 或 doInBackground 方法中，我想使用处理程序发送消息，所以我推入了一些简单的东西：

```
Message m = new Message();
Bundle b = new Bundle();
b.putString("sizeKEY", "size " + _count);
m.setData(b);
_handler.sendMessage(m); 
```

我需要在这里访问外部对象：

```
new Handler(){
@Override
    public void dispatchMessage(Message msg) {
                super.dispatchMessage(msg);
                // get access to, say, Activity property or method here 
            }
        } 
```

它是怎么做的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:43:35.907

你可以`<MyOuterClass>.this`用来访问外部的对象（因为你在一个内部类中）。

如果您的外部类具有名称“MyActivity”（只是一个示例）并且您想访问它的附加功能，那么它将是：

```
MyActivity.this.getIntent().getExtras() 
```

见
[http://www.java-forums.org/java-tip/6296-inner-class-accessing-outer-class.html](http://www.java-forums.org/java-tip/6296-inner-class-accessing-outer-class.html)

# android - C2DM 通知可以替换吗？

> ID：10329926
> 
> 赞同：3
> 
> 时间：2012-04-26T08:40:34.353
> 
> 标签：android, android-c2dm

我正在使用 C2DM 通知服务。当我连续发送 2 个通知时，我只能看到第二个。我的问题是可以替换来自相同服务的通知吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:46:35.837

我不太明白你的问题，但如果`collapse_key`设备处理第一条消息之前发送的两条消息相同，服务器会自动删除第一条消息。因此，如果您需要多条消息到达，请更改键的值。
您可以在这里阅读更多相关信息：[https ://developers.google.com/android/c2dm/?hl=sv-SE#push](https://developers.google.com/android/c2dm/?hl=sv-SE#push)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T08:53:26.407

这可能是由于不能保证 C2DM 消息被传递（有点像 UDP 而不是 TCP）。某些服务（例如 Urban Airship）声称可以解决此问题/功能。

# azure - Azure Connect 无法连接

> ID：10329930
> 
> 赞同：0
> 
> 时间：2012-04-26T08:40:49.097
> 
> 标签：azure, connect

刚刚在我的本地主机上安装了 azure connect，但它不会连接。我将我的机器 dbates-HP 作为我的 azure 门户上的可视网络/连接部分中的活动端点，并将其组织成一个组。

我可以在 azure connect 门户中看到机器端点处于活动状态，并且自上次连接更新以来它会刷新。

我的本地连接客户端列出了以下诊断消息： 策略检查：这台机器上没有连接策略。IPsec 证书检查：未找到 IPsec 证书。

也试过关闭防火墙。

邓肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:46:34.587

您是否已将您的 Azure 角色与您创建的机器组“链接”？消息“此计算机上没有连接策略”表明您尚未定义（在门户中）此计算机应连接到的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:40:45.603

在某些情况下，让 Windows Azure 连接到工作变得非常复杂。我曾处理过多个此类场景，发现最常见的问题与网络设置有关。要开始调查，您需要先从您的计算机收集 Azure Connect 日志，然后尝试自己解决问题。我在这里描述了一些关于收集日志的信息：

[http://blogs.msdn.com/b/avkashchauhan/archive/2011/05/17/collecting-diagnostics-information-for-windows-azure-connect-related-issues.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2011/05/17/collecting-diagnostics-information-for-windows-azure-connect-related-issues.aspx)

要打开免费的 Windows Azure 支持事件，请使用以下链接： [https ://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect=1&sd=gn](https://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect=1&sd=gn)

# asp.net-mvc - 如何使用测试和发布版本策略配置 ASP.NET MVC 应用程序

> ID：10329931
> 
> 赞同：0
> 
> 时间：2012-04-26T08:40:55.077
> 
> 标签：asp.net-mvc, visual-studio-2010, entity-framework-4

我不知道如何配置我的 ASP.NET MVC3 应用程序以在至少两个不同的构建版本中工作。

我想要实现的是我的客户使用的发布版本，该版本带有一个保存他们实时数据的数据库。此外，应该至少有一个额外的发布版本用于测试目的，使用测试数据连接到另一个数据库。

环境：ASP.NET MVC 3 Entity Framework 4 VisualStudio 2010 Pro MSSQL Server 2008 IIS7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:43:23.010

如果你开始一个 MVC3 项目，你应该已经有 2 个构建 web.config 文件：调试和发布。在这些文件中，您将定义您的数据库连接。现在，您可以通过“配置管理器”为开发人员、测试、接受和发布环境创建自己的构建配置文件。

# java - 仅在用户交互后调用 itemStateChanged()

> ID：10329932
> 
> 赞同：4
> 
> 时间：2012-04-26T08:40:57.277
> 
> 标签：java, swing

在我的摇摆应用程序中，我有一个带有 ItemListener 的组合框，如果用户更改值（通过 itemStateChanged()），它会执行 X。但是，我还有一个不同的函数可以更改该组合框的值。在这种情况下，我不希望 X 完成。

有没有办法找出状态变化是由用户交互还是由函数引起的？

谢谢！

编辑：我使用了标志方法。感谢您的快速回答。我只想补充一点，itemStatechanged 实际上被调用了两次，一次用于取消选择，一次用于选择。这需要处理，否则标志不会有任何影响。这个问题在[这里](https://stackoverflow.com/questions/330590/why-is-itemstatechanged-on-jcombobox-is-called-twice-when-changed)讨论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T08:50:45.287

有两种方法可以进行检查：

1.  定义一个标志`isUser`。该标志是`true`默认的。在以编程方式更改之前将其设置为`false`并在设置组合框值后重置。在侦听器中，只需检查标志并在必要时跳过该操作。
2.  保留对侦听器的引用并在设置值之前将其删除，然后添加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T08:48:45.723

据我了解，您可以使用标志很容易地解决您的问题。只需制作一个布尔标志，例如`isDoneByMethod`，它将在设置为的方法入口处设置为`true`，并在最后设置为`false`这两者之间并在这两者之间对组合框进行操作。然后在`itemStateChanged()`检查`isDoneByMethod`标志的值并采取相应的行动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-24T14:31:46.873

我有类似的情况，我需要区分两种情况。这里讨论的两个选项（监听器的标志和删除/添加）并不总是有效，因为项目监听器是在 EDT 线程上异步调用的。但是删除和添加特定的项目侦听器更安全。为了进一步确保在添加项目侦听器之前处理所有先前的操作，我`fireEvents()`在再次添加侦听器之前使用。

# nuget - Nuget：指定依赖项而不添加引用

> ID：10329933
> 
> 赞同：9
> 
> 时间：2012-04-26T08:40:57.587
> 
> 标签：nuget

我有一个包（比如 MyStuff.Data），它需要 EntityFramework（和其他）才能工作，但仅限于内部。我不希望每个使用 MyStuff.Data 的项目也引用 EntityFramework（以及所有其他项目），但 dll 总是需要在那里。

有什么方法可以将 EntityFramework 添加为 MyStuff.Data 的依赖项（以便它在 packages 文件夹中获取 EntityFramework.dll），但没有向使用它的每个项目添加引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T18:39:56.817

不，那里没有。一个选项可以是嵌入 EntityFramework dll 并将其发送到您自己的包中，并明确说明在安装过程中应在目标项目中添加哪些引用。您可以使用包的 nuspec 中的元数据元素来指定这一点。可以在此处的文档中找到更多信息：http: [//docs.nuget.org/docs/reference/nuspec-reference#Specifying_Explicit_Assembly_References](http://docs.nuget.org/docs/reference/nuspec-reference#Specifying_Explicit_Assembly_References)

请注意，嵌入特定版本的依赖项是对所有消费者的限制性约束，这意味着作为包生产者，您将决定消费者可以并且将使用哪个版本的 EF……这不是一个好主意所处的情况。

最好尝试抽象出任何非受控 (EF) 依赖项并将真正的实现选择留给消费者（或者您提供一个包含实现的单独包，以便您的消费者仍然可以选择加入并使用您的）。

# .net - 用户登录内网时执行自定义代码

> ID：10329934
> 
> 赞同：0
> 
> 时间：2012-04-26T08:41:00.197
> 
> 标签：.net, windows, sharepoint

当用户登录到 Intranet 时，有没有办法运行我的代码（曾经）？

这是一个 SharePoint 场，我想在用户通过登录他/她的计算机登录到 Intranet 时在后台为用户创建我的网站）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T11:20:38.630

您的意思是当用户登录到他的计算机 = 到他的 Windows 时？您可以在 SharePoint 服务器上创建一个触发服务（例如 Web 服务）或远程执行命令（例如 PowerShell）的[登录脚本。](http://technet.microsoft.com/en-us/library/cc758918%28v=ws.10%29.aspx)在该命令/服务中，您可以检查 My Site 的存在并创建它。

--- 费尔达

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:43:19.277

也许你可以看看 Global.asax => 有 SessionStart() 在那里你可以做那种工作。

[http://msdn.microsoft.com/en-us/library/2027ewzw.aspx](http://msdn.microsoft.com/en-us/library/2027ewzw.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:44:59.393

有一种方法，但我不确定它是否合乎道德，因为它有点涉及黑客领域。您可以使用 iframe 执行某种代码，因为最喜欢（就像您使用 SharePoint）用户也在使用 Internet Explorer。或者你可以谷歌一点关于这样的想法：

[http://thehackernews.com/2012/02/dangerous-ie-browser-vulnerabilities.html](http://thehackernews.com/2012/02/dangerous-ie-browser-vulnerabilities.html)

但是，我再说一遍，如果这真的是你想要的，要小心。

# c++ - 如何以编程方式从 IHTMLDocument 获取 documentMode？

> ID：10329935
> 
> 赞同：1
> 
> 时间：2012-04-26T08:41:00.353
> 
> 标签：c++, webbrowser-control, ihtmldocument2

我在 C++ 应用程序中使用 WebBrowser 控件，并希望检索已加载文档的[documentMode 属性](http://msdn.microsoft.com/en-us/library/cc196988%28v=vs.85%29.aspx)。

IHTMLDocument2接口具有特定属性的方法（[get_domain](http://msdn.microsoft.com/fr-fr/library/aa752575)、[get_charset](http://msdn.microsoft.com/fr-fr/library/aa752566%28v=VS.85%29.aspx)、[get_readyState](http://msdn.microsoft.com/fr-fr/library/aa752602%28v=VS.85%29)，...），但没有用于[documentMode](http://msdn.microsoft.com/en-us/library/cc196988%28v=vs.85%29.aspx)的方法。

是否有通过名称获取属性的通用方法或可用于获取该属性的其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T01:55:38.987

QI 为 IHTMLDocument6，然后调用 IHTMLDocument6::get_documentMode。您还可以使用后期绑定（IDispatchEx 的 QI，然后是 Invoke）。

# delphi - FastMM4 显示“块页脚已损坏”

> ID：10329940
> 
> 赞同：5
> 
> 时间：2012-04-26T08:41:39.677
> 
> 标签：delphi, delphi-7

我在我们的 Delphi 7 应用程序中有这个功能，在我将 FastMM4 v4.99 包含到项目中之前它运行良好。包含后，FastMM4 引发以下错误消息：“FastMM 在 FreeMem 操作期间检测到错误。块页脚已损坏。” 执行在 FreeMem 行中停止。

```
function BinaryFieldToArrayOfWord( aBinaryField   : TVarBytesField;
                                   out aArrValues : TArrWord ) : Boolean;
var
  p : Pointer;
begin
  if not aBinaryField.IsBlob then
  begin
    GetMem( p, aBinaryField.DataSize );     
    try
      if aBinaryField.GetData( p ) then         
      begin
        // do something
      end;
    finally
      FreeMem( p, aBinaryField.DataSize );
    end;
  end; // if
end; 
```

一开始我以为函数肯定有bug，但实际上和Delphi 7帮助中的这个TField.GetData方法示例一样：

```
{ Retrieve the "raw" data from Field1 }
with Field1 do
begin
  if not IsBlob  { this does not work for BLOB fields }
  begin
    { Allocate space }
    GetMem(MyBuffer, DataSize);
    try
      if not GetData(MyBuffer) then
         MessageDlg(DisplayName + ' is NULL', mtInformation, [mbOK], 0)
      else 
         { Do something with the data };
    finally
      { Free the space }
      FreeMem(MyBuffer, DataSize);
    end;
  end;
end; 
```

我在网上发现，上面的错误信息往往是因为没有足够的空间存放数据。所以我增加了内存块的大小，错误消息消失了，函数按预期工作。经过一些实验，我发现需要 2 个字节并且足够了：

```
 GetMem( p, aBinaryField.DataSize + 2 );

    FreeMem( p, aBinaryField.DataSize + 2 ); 
```

虽然它解决了我的问题，但我对这个解决方案并不完全放松，因为我不知道它的背景。很高兴知道此消息的原因。FastMM4 自己的页脚是否需要额外的 2 个字节？

更新：在调试了一天之后，我现在相信 Delphi 7 TField.GetData 方法中存在错误。它在分配的内存块之外写入 2 个零字节。我在使用和不使用 FastMM4 的情况下都尝试过，它在两种情况下都会覆盖（所以它不是 FastMM4 错误）。我还尝试将字段类型转换为 TVarBytesField，没有区别。这是我使用的带有详细注释的代码，其中包含结果。我唯一剩下的问题：他们在后来的 Delphis 中纠正了这个错误吗？

```
 procedure TfrmMain_PBC_TH.btnDEBUGClick(Sender: TObject);
  type
    TArrBytes = array of Byte;  
  var
    p       : Pointer;
    qryTest : TADOQuery;
  begin
    qryTest := TADOQuery.Create( Application );
    try
      // The type of the TQM_BinaryData.BinData column in the MSSQL database is a       varbinary(7900). 
      // Load the #168 binary data record. It contains exactly 7900 bytes, and the value of each byte is 255
      qryTest.Connection := MainConn;
      qryTest.SQL.Add('SELECT [BinData] FROM [TQM_BinaryData] WHERE [Id] = 168');
      qryTest.Open;

      // Allocate the memory block for this.
      GetMem( p, qryTest.FieldByName('BinData').DataSize );
      // DataSize is 7902 because all TVarBytesFields have 2 byte prefix in Delphi, containing the data length.
      // So the size of the allocated memory block is 7902 bytes - we are correct so far.
      try
        // Values of the first four bytes beyond the end of the memory block (memory thrash at this point) before GetData:
        // TArrBytes(p)[7902] = 96
        // TArrBytes(p)[7903] = 197
        // TArrBytes(p)[7904] = 219
        // TArrBytes(p)[7905] = 43

        // Critical point: get the data from the field with the Delphi GetData method
        qryTest.FieldByName('BinData').GetData( p );

        // Values after GetData:
        // TArrBytes(p)[0]    = 220    TArrBytes(p)[0] and TArrBytes(p)[1] contains the length of the binary data
        // TArrBytes(p)[1]    = 30     it is correct as 30 * 256 + 220 = 7900
        // TArrBytes(p)[2]    = 255    actual data starts
        // TArrBytes(p3[2]    = 255    
        // ...
        // TArrBytes(p)[7900] = 255
        // TArrBytes(p)[7901] = 255    actual data ends
        // TArrBytes(p)[7902] = 0      changed from 96!
        // TArrBytes(p)[7903] = 0      changed from 197!
        // TArrBytes(p)[7904] = 219    no change
        // TArrBytes(p)[7905] = 43     no change
      finally
        // Here FastMM4 throws the block footer corrupt error because GetData modified the 2 bytes after the allocated memory block 
        FreeMem( p );
      end;

      qryTest.Close;
    finally
      qryTest.Free;
    end;
  end; 
```

添加数据断点后，调用堆栈为：

```
 @FillChar(???,???,???)
    TDataSet.DataConvert($7D599770,$12F448,$7D51F7F0,True)
    VarToBuffer
    TCustomADODataSet.GetFieldData($7D599770,$7D51F7F0,True)
    TField.GetData($7D51F7F0,True)
    TfrmMain_PBC_TH.btnDEBUGClick($7FF7A380)
    TControl.Click
    TButton.Click 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T09:09:37.560

FastMM 在您分配的块的末尾分配一些内存，并在那里写入已知值。然后，当您解除分配时，FastMM 会检查这些值是否符合预期。如果不是，那么您看到的错误就会引发，因为 FastMM 知道您的代码正在写入超出内存块的末尾。

因此，try/finally 块中的某些内容正在写入超出内存块末尾的内容。这就是为什么增加它的大小可以消除 FastMM 错误。如果没有看到该代码，我们无法判断到底是什么错误，您需要进行一些调试来解决问题。

你关心你的“解决方案”是完全正确的。反复试验从来都不是一种合理的编程方式。你必须找出为什么你的程序写的超出了块的末尾。

一种方法是为该块末尾之后的地址设置一个数据断点。这将迫使调试器中断超出块末尾写入的代码。

顺便说一句，您不需要将第二个参数传递给 FreeMem。这样做会使您的代码更难维护，并且完全没有任何作用。只将指针传递给 FreeMem。

# c++ - 错误：无法找到字符串文字运算符 "" SLASHES

> ID：10329942
> 
> 赞同：11
> 
> 时间：2012-04-26T08:41:53.863
> 
> 标签：c++, qt, gcc4

我正在尝试使用 gcc 4.7 构建 qtCreator 2.3，但出现以下错误：

> 错误：找不到字符串文字运算符“”

我正在`mingw32-make -lto`用作 qtCreator 源目录。有什么想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-26T09:08:33.753

刚用谷歌搜索了一下，在[这个页面上看到了以下评论](http://groups.google.com/group/cython-users/browse_thread/thread/d0262ac367111658?pli=1)

> 出现主题错误是因为在新的 c++11 中，字符串连接之间的空格是强制性的

这可能与您所看到的有关。

# xml - 阅读 Facebook wall xml 并提供给 jquery 移动网络应用程序

> ID：10329943
> 
> 赞同：1
> 
> 时间：2012-04-26T08:41:54.947
> 
> 标签：xml, facebook, jquery-mobile, xmlhttprequest, web-applications

我试图从 Facebook 读取基本的墙信息，并显示在查询移动列表中。该代码通过 phonegap 工作正常，但是当作为 Web 应用程序发布时，出现“xmlhttprequest cannont load [https://www.facebook.com](https://www.facebook.com) ...”错误。

当前代码：

```
 <script type="text/javascript">

var cc_news_feed = 'http://www.facebook.com/feeds/page.php?id=47160778899&format=rss20&callback=?';
var cc_news_item = 'item';
var cc_news_title = 'title';
var cc_news_content = 'description';
var cc_news_limit = 10;

    $('#news').live('pageshow', function(){
        if(newsLoaded != '1'){
            cc_news_limit = cc_news_limit +1;

        $.mobile.showPageLoadingMsg();

        $("#newslist").empty();

        $.ajax({
            type: "GET",
            url: cc_news_feed,
            dataType: "xml",
            success: parseXml
        });

        function parseXml(xml10){        
            var i = 1;

            $(xml10).find(cc_news_item).each(function(){
                if(i < cc_news_limit){ //Limit results
                  var pageid = "detailpage" + i;                                         
                    $("#newslist").append("<li data-theme=\"y\"><a href='javascript:void(0)' onclick=\"javascript: $.mobile.changePage($('"+"#"+pageid+"'), 'slide');\">" + ($(this).find(cc_news_title).text()) + "</a></li>");                    
                  $("body").append("<div data-role='page' id='"+pageid+"'><div data-role='header' data-theme='z'><a href='#news' data-direction='reverse'>back</a><h1>News Detail</h1></div><div data-role='content' class='newsdetail'><h1>" + ($(this).find(cc_news_title).text()) + "</h1>" + ($(this).find(cc_news_content).text()) +"</div></div>");

                    i++;
                }
            });

            $("#newslist").listview('refresh'); 
            $.mobile.hidePageLoadingMsg();

            //Mark as loaded
            newsLoaded = '1';
        }
      }
    });
</script>

<div data-role="page" id="news" data-theme="z">
  <div data-role="header" data-position="fixed" data-theme="z">
    <h1>News</h1>
    <a href="#home" data-icon="home" class="ui-btn-right" data-iconpos="notext" data-transition="slidedown" data-theme="x">Home</a>
  </div>
  <div data-role="content">
    <ul data-role="listview" data-theme="z" data-inset="true" id="newslist"></ul>
  </div>
</div> 
```

我已经阅读了一些关于 xmlhttprequest 的内容，但仍然有点困惑和迷失......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T15:46:40.887

部署为应用程序时，您的代码拥有更多权限，例如从多个站点下载。

在浏览器中，这些权限受到严重限制，我最好的猜测是您收到错误，因为 URL 被从 HTTP 重定向到 HTTPS。

可能这将解决问题：

var cc_news_feed = 'http **s** ://www.facebook.com/feeds/page.php?id=47160778899&format=rss20&callback=?';

请检查您被错误重定向到的 URL，并将其准确粘贴为 Ajax 使用的 URL。

# android - 在 android ICS 上渲染脚本应用程序

> ID：10329949
> 
> 赞同：0
> 
> 时间：2012-04-26T08:42:19.583
> 
> 标签：android, 3d, renderscript

我想在android ICS上使用renderscript创建一个带有浮动气泡的动态壁纸。如何继续。请需要一些输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:53:10.190

查看[Renderscript 开发人员指南](http://developer.android.com/guide/topics/renderscript/index.html)。另请阅读 Android 开发者博客[介绍 Renderscript](http://android-developers.blogspot.in/2011/02/introducing-renderscript.html)和[Renderscript 第 2 部分](http://android-developers.blogspot.in/2011/03/renderscript.html)。mobile tuts+ 有一个[关于 Android 上 RenderScript 入门](http://mobile.tutsplus.com/tutorials/android/getting-started-with-renderscript-on-android/)的教程。

# iphone - 这里的泄漏点在哪里？

> ID：10329950
> 
> 赞同：0
> 
> 时间：2012-04-26T08:42:23.137
> 
> 标签：iphone, objective-c, ios, memory-management, memory-leaks

```
if ([elementName isEqualToString:@"type"])
    {
        items       = [[NSMutableDictionary alloc] init];
        currentname = [[NSMutableString alloc] init];
        currentid   = [[NSMutableString alloc] init];
    } 
```

如何解决泄漏问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:57:27.980

```
currentElement = [elementName copy];
items          = [[NSMutableDictionary alloc] init];
currentname    = [[NSMutableString alloc] init];
currentid      = [[NSMutableString alloc] init]; 
```

您泄漏了存储在这些 ivars 中的先前值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T09:20:08.753

*   `currentElement = [elementName copy];`
*   `items = [[NSMutableDictionary alloc] init];`
*   `currentname = [[NSMutableString alloc] init];`
*   `currentid = [[NSMutableString alloc] init];`

`parser:didStartElement:namespaceURI:qualifiedName:attributes:`如果方法运行不止一次，这些都会导致内存泄漏。

解决此问题的一种简单方法是将变量更改为属性。例如，在您的头文件中，更改：

```
@interface SomeClass {
    NSMutableDictionary *items;
} 
```

至：

```
@interface SomeClass {
}

@property (retain) NSMutableDictionary *items; 
```

并在之后添加`@implementation SomeClass`：

```
@synthesize items; 
```

然后将您的原始代码更改为：

```
self.items = [[[NSMutableDictionary alloc] init] autorelease]; 
```

当您想检查内存问题时，Xcode 和 Instruments 中的“分析”功能都是您的朋友。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:03:51.980

如果您确定此代码段中存在泄漏，我假设您已经运行了 Instruments，它告诉您 NSString 对象“elementName”正在泄漏。

Romain 是对的：一个好的步骤是运行 Xcode 静态分析器。它可能会告诉您`[elementName copy]`返回一个保留计数为 +1 的对象。（根据 Cocoa 约定，所有“复制”选择器都将返回对象的所有权转移到您的代码中）。

所以这里的解决方案是通过在不需要时释放复制的对象来平衡“复制”调用，使用：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{ 
     [currentElement release];
     currentElement = [elementName copy];

     // your method body here…
 } 
```

# iphone - 以编程方式创建新视图并管理它们

> ID：10329953
> 
> 赞同：1
> 
> 时间：2012-04-26T08:42:37.740
> 
> 标签：iphone, objective-c, ios

我是 Objective-C 的新手，我开始研究将有几个 View 的应用程序。我想在没有`XIB`文件的情况下以编程方式 100% 创建它们。我知道我必须`ViewControllers`为我的屏幕创建我的类，但我想问你如何使用它来管理导航。假设我有一个`ViewController`包含`tableView`. 我想创建下一个屏幕。所以我明白`row`在`tableViewController`课堂上打电话

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath { //... } 
```

但是下一个屏幕呢？我还没有。我应该创建一个“准备好的”`ViewController`类吗？在这种情况下如何处理导航？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T08:52:23.560

In your case, when a cell is selected, you would:

*   创建下一个视图控制器的新实例，
*   将这个新实例推送到 UINavigationController 堆栈上。

因此，首先，您需要确保您的第一个视图控制器（带有表格视图的那个）包含在 UINavigationController 中。

```
// AppDelegate, in applicationDidFinishLanching:

UIViewController *firstViewController = [[[MyCustomTableViewController alloc]
                                          initWithNibName:nil bundle:nil]
                                         autorelease];
UINavigationController *navigationController = [[[UINavigationController alloc]
                                                 initWithRootViewController:firstViewController]
                                                autorelease];

[self.window setRootViewController:navigationController]; 
```

然后，当您选择表格视图中的一个单元格时，您可以编写：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIViewController *nextViewController = [[[MyNextViewController alloc]
                                             initWithNibName:nil bundle:nil]
                                            autorelease];

    [self.navigationController pushViewController:nextViewController
                                         animated:YES]

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T08:53:51.727

确保您阅读了 Apple 的文档：[View Controllers Programming Guide](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/BasicViewControllers/BasicViewControllers.html%20View%20Controllers%20Programming%20Guide)

基本上，您必须将表视图控制器（作为**内容**视图控制器）嵌入导航控制器（**容器**视图控制器）中。

然后在 -tableView:didSelectRowAtIndexPath: 中，您将实例化一个新的**内容**视图控制器，并通过带有此类消息的导航控制器将其推送到您当前的表视图控制器上：

```
[[self navigationController] pushViewController:<#myNextViewController#> animated:YES]; 
```

一定要阅读来自 Apple 的代码示例（有些很薄，所以很容易理解）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T08:56:40.150

我讨厌 IB，并且尝试在没有它的情况下制作应用程序时遇到了一些麻烦，但是它是如此嵌入到工作流程中，以至于我发现咬紧牙关使用它更容易。但是，有些帖子在不同程度上描述了如何在没有 IB 的情况下进行开发，例如：

*   [http://blog.shinetech.com/2009/07/15/why-would-you-use-interface-builder-for-iphone-development/](http://blog.shinetech.com/2009/07/15/why-would-you-use-interface-builder-for-iphone-development/)
*   [http://www.calvinx.com/2011/02/05/iphone-app-without-interface-builder/](http://www.calvinx.com/2011/02/05/iphone-app-without-interface-builder/)

# .net - 通过 .NET 运行 SAS 作业

> ID：10329956
> 
> 赞同：1
> 
> 时间：2012-04-26T08:42:47.647
> 
> 标签：.net, sas

我对SAS的API没有经验。我只是想知道是否可以使用 API 的任何部分来静默运行 SAS 作业。我知道可以通过启动 SAS.exe 进程和文件作为参数来运行 a，但我希望能够从 .NET 静默执行此操作。

关于为此使用哪种 API 和方法的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:31:49.357

使用 ADO.net 的示例 [http://support.sas.com/kb/25/276.html#](http://support.sas.com/kb/25/276.html#) 另一种选择是使用集成对象模型 (IOM) [http://support.sas.com/rnd/itech/doc9 /overview/index.html](http://support.sas.com/rnd/itech/doc9/overview/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T23:00:29.833

如果您没有适当的许可证，您还可以通过命令行从 .NET 启动 SAS 作业，并使用 SRVANY.EXE 让它静默运行。这将需要一些额外的工作并且有点杂乱无章，但这是我所知道的唯一其他无声的选择。

# android - 设置为 wrap_content 时，Android 微调器未左对齐

> ID：10329958
> 
> 赞同：1
> 
> 时间：2012-04-26T08:42:51.203
> 
> 标签：android, layout, operating-system, spinner, alignment

我在 2.3 上的微调器：

![在此处输入图像描述](../Images/dabc612c07838fb4fad943ee2989d8ff.png)

在 4.0 上：

![在此处输入图像描述](../Images/b11216704a4eb92384dcfd07fc002165.png)

这是我的代码：

```
Spinner s = (Spinner) findViewById(R.id.spinner);
    ArrayAdapter<?> adapter = ArrayAdapter.createFromResource(
            this, R.array.planets, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    s.setAdapter(adapter); 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:padding="10dip"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dip"
        android:text="Please select a planet:"
    />

    <Spinner 
        android:id="@+id/spinner"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:drawSelectorOnTop="true"
    />
</LinearLayout> 
```

和数组资源，

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string-array name="planets">
        <item>a</item>
        <item>aa</item>
        <item>aaa</item>
        <item>aaaa</item>
        <item>aaaaa</item>
        <item>aaaaaa</item>
        <item>aaaaaaa</item>
        <item>aaaaaaaa</item>
    </string-array>
</resources> 
```

我意识到在 2.3 上，微调器布局宽度将基于微调器项目内容，而它修复了最宽的内容，并且在 4.0 上不会改变其他内容。如果微调器布局设置为 fill_parent 没有问题，但我需要一个 wrap_content 微调器...

您知道如何使其在两个系统上保持一致吗？因为当内容长度非常不同时它看起来很丑。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T09:01:23.643

1.  您可以尝试使用设置为微调器的布局权重。

2.  另一种可能性是微调器的 setwidth 以编程方式表示设备宽度的一半或设备宽度的三分之一。

# iphone - Coredata 性能——为只读数据集提供预填充的核心数据 sqlite db

> ID：10329959
> 
> 赞同：0
> 
> 时间：2012-04-26T08:42:51.577
> 
> 标签：iphone, core-data, ios5

我正在考虑创建一个预填充核心数据 sqlite 文件并复制到我的资源中。并使用它而不是在第一次运行时从头开始创建数据库。

我的数据是只读的，不会被 iphone 应用程序修改。

数据库可能会每月更新一次。那么对于更新我可以通过http请求获取更新的coredata sqlite db并丢弃前一个并开始使用更新的数据库。这种方法还将为我省去迁移和其他事情的麻烦

请建议，如果这种方法看起来不错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:59:15.960

是的，你的想法看起来不错，但有一个问题。

主应用程序包中的文件是只读的，因此您无法更新 sqlite 文件。

您可以做的是在创建 coredata 存储文件时，检查该文件是否在文档目录中。如果它不存在，则从那里的捆绑包中复制文件，然后创建托管存储。

# visual-studio-2012 - Visual Studio 11 beta：缺少一些 JavaScript 模板

> ID：10329966
> 
> 赞同：1
> 
> 时间：2012-04-26T08:43:10.040
> 
> 标签：visual-studio-2012

我开始使用带有 Visual Studio 11 beta 的 Windows 8 Metro。我创建了一个空白的 Javascript（Metro 风格）项目并尝试添加一个“HTML 片段”项目。问题是此模板项不存在，我无法选择它。

我查看了*C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ItemTemplates\JavaScript\Windows Metro style\1033*文件夹，其中包含一个文件 Fragment.zip。

我的环境：带有 Windows 8 消费者预览版和 Visual Studio 11 beta + SDK 的 Virtual Box VM。

我错过了什么吗？

谢谢。

# android - Android twitter 推文分享与默认推文框

> ID：10329968
> 
> 赞同：2
> 
> 时间：2012-04-26T08:43:12.953
> 
> 标签：android, twitter

我在一个 android 应用程序中工作，我想从我的 android 应用程序向 twitter 发布推​​文。我从链接[https://github.com/ddewaele/AndroidTwitterSample](https://github.com/ddewaele/AndroidTwitterSample)获得了一个很好的示例，我将其集成并成功运行。但我的要求是从原始推特网站带来默认推文框并从中发布推文。是否可以将默认的推文框带到我们在 android.xml 中的应用程序中。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T09:00:33.433

当用户按下按钮分享推文时，您可以在 WebView（您的应用程序中的您自己的 WebView）或默认浏览器中打开链接。

```
"http://www.twitter.com?status=" 
```

或传递任何静态消息，

```
"http://www.twitter.com?status=MyMessageHere" 
```

# c# - 从数字向上向下值转换为 int32，给出错误的数字

> ID：10329969
> 
> 赞同：1
> 
> 时间：2012-04-26T08:43:14.960
> 
> 标签：c#, datatable

在尝试将数字从 numericupdown 的值转换为 int32 时，它给了我错误的数字，我逐步调试并调试了它，它甚至显示为 numeric up down 的值为 3，但它是 int存储在以 2 的形式出现。我真的不知道它为什么这样做

```
int max = Convert.ToInt32(Sale.numericUpDown3.Value); 
```

当调试值显示为 3，但最大值显示为 2 时，这意味着稍后使用 max 时，它会从我的数据表中的错误行中检索数据。这发生在任何人身上吗？:S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:57:45.393

因此我从来没有看到过这个问题，并且想知道它到底是怎么做到的，有点让人头疼，但一个简单的解决方案！谢谢直到谁指出这可能是时间问题，解决了我的问题！

# asp.net - “最大数组长度配额...”WCF解决方案

> ID：10329976
> 
> 赞同：1
> 
> 时间：2012-04-26T08:43:51.000
> 
> 标签：asp.net, wcf

使用 WCF 的 ASP.NET 应用程序存在特定问题。我的数据库中有一个表，其中包含用于图像存储的二进制字段。我可以毫无问题地使用.net实体读取和写入图像的二进制数组。但是当我使用 WCF 时，出现了一些问题。

更改我的 Web 应用程序的 web.config（增加数组配额）我解决了使用 WCF 读取二进制数组的问题，但使用 WCF 写入此数组仍然存在问题。我有这样的消息：

> 格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数 [http://tempuri.org/:question](http://tempuri.org/:question)时出错。InnerException 消息是“反序列化 SL.DTO.QuestionDTO 类型的对象时出错。读取 XML 数据时已超出最大数组长度配额 (16384)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxArrayLength 属性来增加此配额。第 1 行，位置 55410.'。

这是我的 WEB 应用程序的 web.config：

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>        
        <binding name="BasicHttpBinding_IDAI_ExamenationService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true" >
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>        
      </basicHttpBinding>      
    </bindings>
    <client>
      <endpoint address="http://localhost:22840/DAI_ExamenationService.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IDAI_ExamenationService"
        contract="DAI_ExamenationServiceReference.IDAI_ExamenationService"
        name="BasicHttpBinding_IDAI_ExamenationService" /> 
    </client>    
  </system.serviceModel> 
```

这是服务应用程序的 web.config：

```
<system.serviceModel>    
    <behaviors>      
      <serviceBehaviors>        
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

我想我应该更改服务的 web.config 中的权限来解决这个问题，但不知道哪些是......真的

# java - 如何修复警告无法自省 Maven 项目中的测试类？

> ID：10329980
> 
> 赞同：2
> 
> 时间：2012-04-26T08:44:06.133
> 
> 标签：java, apache, class, loader, introspection

当我从 Eclipse 在嵌入式 tomcat 上启动我的 Web 应用程序时，我在日志中看到：

```
unknown.jul.logger - Could not introspect classes from MyTestClass...
java.lang.NoClassDefFoundError: MyTestDataClass...

at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at org.apache.catalina.loader.WebappClassLoader.findClassInternal
    (WebappClassLoader.java:2889)
  .... 
```

如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:44:45.867

`java.lang.NoClassDefFoundError: MyTestDataClass`是你问题的根源。

这可能是因为您引用了`src/test/java`from中的类`src/main/java`。`mvn test`有效，因为它们都在类路径上。在部署中，测试类不存在。

因此，修复该依赖项（将类移动到`src/main/java`或删除引用，视情况而定）它应该可以工作。

# r - R不召回内存中的对象

> ID：10329984
> 
> 赞同：3
> 
> 时间：2012-04-26T08:44:21.030
> 
> 标签：r

我正在构建一个包含多个步骤的函数，其中每个步骤都创建一个对象。某个步骤失败（temp3）并且找不到前面的步骤对象（错误：找不到对象'temp2'）。我不知道为什么 - 我有类似的函数遵循完全相同的结构，每个步骤都遵循之前创建的对象，在函数中运行良好。当您在函数之外运行该代码时，它可以工作（因此代码看起来很好），并且使用 debug() 应该不创建数据的步骤（temp2）实际上存储到本地内存中（所以我可以看到对象“temp2”），但由于某种原因，R 似乎没有识别或使用它。我难住了！也许我' 我只是不知道 R 如何评估步骤和调用本地内存中的对象？我是否以错误的方式编写函数？

我可以很容易地准备一个工作示例，如果它更有用，因为这个函数会调用奇怪的包等，但目前我认为这更多的是我如何误解 R 如何将对象分配给函数中的本地内存的问题。这里有一个类似的查询，[R How does R handle object in function call?](https://stackoverflow.com/questions/7537273/how-does-r-handle-object-in-function-call) ，但实际上我在函数中分配了每个新对象。能否请你帮忙？

```
 glm.random<-function(df){
  reps=5
  output<-matrix(NA, ncol=1, nrow=0)
    while (length(output[,1])<reps) {    
      temp1 <- ddply(df,.(study_id),randomRows,1)
      temp2 <- subset(temp1,select = c(continent,taxatype, metric,nullm, yi_pos))
      temp3 <- glmulti(yi_pos ~ ., data = temp2, family = gaussian( link = log), crit = aic, plotty = F,  report = F)           
      temp4 <- noquote(paste(summary(temp3)$bestmodel[1]))
      output<-rbind(output,temp4)     
      }
    write.table(output, "output.glm.random1.txt", append=TRUE, sep="\t", quote=FALSE)
  } 
```

回复：

你好，我们又见面了，

安德烈——1）。所以我删除了子集的使用（但在这里很好奇，你指的是什么“意外结果”？）。2）。我一直觉得手头的数据很困难，但我明白你的意思，需要在这里改进我​​的编码方法 3)。好提示！但在这里它只是为了检查事情是否正常工作——我可能只是使用该输出对象进行更多分析。

加文 1) 会的！2+3) 看来错误在于创建（或调用）“temp1”。

我希望下面是一些可重现的代码。如果它有帮助，我试图复制的方法可以在 Gibson 等人中找到。2011 自然 478:378。（参见详细方法“广义线性模型”。）。

```
Thank you!

    #rm(list = ls())
    library("plyr")
    library("glmulti")
    # random rows function
    randomRows = function(df,n){
      return(df[sample(nrow(df),n),])
    }
    # Dataframe example
    study_id <- c(1,1,1,1,2,2,3,3,3,4)
    continent <- c("AF","AF","AF","AF","AF","AF", "AS", "AS", "AS", "SA")
    taxatype <- c("bird","bird","bird","mam","mam","arthro", "arthro", "arthro", "arthro", "arthro")
    metric<- c("sppr","sppr","sppr","sppr","abund","abund", "abund", "abund", "abund", "abund")
    extra.data<- c(34:43)
    yi_pos<- runif(1:10)
    df<- data.frame(study_id=study_id, continent=continent,metric=metric, taxatype=taxatype,extra.data = extra.data, yi_pos = yi_pos)
    df

    # Function. Goal:repeat x10000 (but here reps =5) ( Select one random value per study_id, run glmulti{glmulti}, select best ranked model, concatenate to an output and export). 
    glm.random<-function(df){
      reps=5
      output<-matrix(NA, ncol=1, nrow=0)
      while (length(output[,1])<reps) {

        temp1 <- ddply(df,.(study_id),randomRows,1)
        temp3 <- glmulti(yi_pos ~ continent+taxatype+metric, data = temp1, family = gaussian( link = log), crit = aic, plotty = F,  report = F)          
        temp4 <- noquote(paste(summary(temp3)$bestmodel[1]))
        output<-rbind(output,temp4)       
        }
      write.table(output, "output.glm.random1.txt", append=TRUE, sep="\t", quote=FALSE)
    }

    # run function to obtain error
    glm.random(df)

# debug(glm.random)
# glm.random(df)
# undebug(glm.random) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:39:53.983

从`?glmulti`,

> 如果`data`未指定 [参数]，glmulti 将尝试从作为 y 参数传递的拟合模型或全局环境中查找公式环境中的数据。

但是，当您指定 时`data = temp1`，`glmulti`显然会在全局环境中查找此对象。因此，您可能需要将随机选择的数据分配给全局环境（我已经稍微重命名了一些东西以尝试检查名称和对象）：

```
glm.random2<-function(df){
  reps=5
  output<-matrix(NA, ncol=1, nrow=0)
  while (length(output[,1])<reps) {
## Here things are different
    temp2 <- ddply(df,.(study_id),randomRows,1)
    names(temp2)[2]<-"cOntinent"
    assign("temp1",temp2,envir=.GlobalEnv)
## Note the slightly modified formula, to check whether
## gmulti looks for terms in temp1 or simply as named objects in the environment
## It looks like the former, which is good.
    temp3 <- glmulti(yi_pos ~ cOntinent+taxatype+metric, data = temp1, 
      family = gaussian( link = log), crit = aic, plotty = F,  report = F)          
    temp4 <- noquote(paste(summary(temp3)$bestmodel[1]))
    output<-rbind(output,temp4)
## Remove the object temp1 from the global environment
    rm(temp1,envir=.GlobalEnv)
    }
  write.table(output, "output.glm.random1.txt", append=TRUE, sep="\t", quote=FALSE)
}

# run function - no error for me!
glm.random2(df) 
```

You might want to check with the package maintainer to see if this is the intended way for `glmulti` to work.

# wpf - 像 WPF 一样的 Silverlight 继承

> ID：10329985
> 
> 赞同：0
> 
> 时间：2012-04-26T08:44:21.233
> 
> 标签：wpf, silverlight, expression-blend, silverlight-5.0

为了最小化 WPF 中的代码行，我的所有控件都继承自一个名为 BaseControlStyle 的样式，它看起来像这样：

```
<Style x:Key="BaseControlStyle" TargetType="{x:Type FrameworkElement}">
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="SnapsToDevicePixels" Value="True"/>
    <Style.Triggers>
        <Trigger Property="IsEnabled" Value="false">
            <Setter Property="Opacity" Value="0.5"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

新的按钮样式如下所示：

```
<Style x:Key="ButtonStyle" TargetType={x:Type Button} BasedOn="{StaticResource BaseControlStyle}">
....
</Style> 
```

但是作为 Silverlight 的新手，我找不到答案是否可以将此 BaseControlStyle 转移到使用 VisualStateManager （或其他东西）的 SilverlightBaseControlStyle 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T08:55:40.710

不幸的是，silverlight 不支持这种类型的使用：

```
BasedOn="{StaticResource {x:Type Button}}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T08:53:09.427

不幸的是，Silverlight 中没有属性触发器之类的东西 - 而是使用视觉状态，这意味着处理代码中的外观。对于您的情况，创建标准按钮样式的副本并更改其默认 ControlTemplate 中的动画会更容易。[有时使用行为](http://www.silverlightshow.net/items/Behaviors-and-Triggers-in-Silverlight-3.aspx)也很有用。

# ios - 半透明状态栏

> ID：10329990
> 
> 赞同：1
> 
> 时间：2012-04-26T08:44:50.257
> 
> 标签：ios, ios5, statusbar

我的 iPhone 应用程序（iOS 5.0 或更高版本）有一个半透明的状态栏。首次启动时，它会显示启动画面，然后在应用程序的剩余生命周期中，启动画面会通过状态栏显示。这是一个不错的小细节，在视觉上看起来很有效，而且令人愉悦。

然而，接到电话后

```
 - (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {} 
```

突然，桌面在状态栏中显示出来。有谁知道为什么会发生这种情况以及我能做些什么来防止这种情况发生？

# python - 如何重用 python Http 连接？

> ID：10329993
> 
> 赞同：0
> 
> 时间：2012-04-26T08:45:02.067
> 
> 标签：python, http

以下 python 脚本工作正常：

```
#!/usr/bin/env python
import httplib, urllib
params = urllib.urlencode({'url':'xxx/xxx/0AAAUw7n6qPQ922.jpg', 'key': 'xxxx'})
headers = {"Content-type": "application/x-www-form-urlencoded", "Accept": "text/html"}
conn = httplib.HTTPConnection("xxx.test.com")
conn.request("POST", "/xx/delete", params, headers);
response = conn.getresponse()
print response.status, response.reason
data = response.read()
print data
conn.close() 
```

但是如果我想重用打开的 http 连接来运行 post 更多次，它就行不通了：

```
#!/usr/bin/env python
import httplib, urllib
import sys

if len(sys.argv)<2:
  print "invalid input"
  sys.exit(0)

path = sys.argv[1]
f = open(path)
lines = f.readlines()
f.close()

conn = httplib.HTTPConnection("xxx.test.com")
headers = {"Content-type": "application/x-www-form-urlencoded", "Accept": "text/html"}
for line in lines:
  if len(line) < 6:
    continue
  params = urllib.urlencode({'url': line, 'key': 'xxxx'})
  conn.request("POST", "/xx/delete", params, headers);
  response = conn.getresponse()
  print response.status, response.reason
  data = response.read()
  print data
conn.close() 
```

返回状态为：500 Server Error

我只想重用http连接来提高性能，我该如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:01:28.963

删除字符串中的换行符 ('\n')。它工作正常！

# excel - 自定义 Excel VBA 公式生成 #VALUE！仅在自动计算时

> ID：10329997
> 
> 赞同：2
> 
> 时间：2012-04-26T08:45:09.663
> 
> 标签：excel, vba

我有一个包含 2 个自定义函数/公式的复杂公式的单元格“A”。

我了解当单元格更改值时，Excel 会自动重新计算其所有相关单元格。当单元格“A”从此机制更新时，它会给出#VALUE！。

没有做任何其他事情，我选择单元格“A”>点击F2（编辑）>然后点击回车（退出编辑），单元格“A”的值被重新计算并给出正确的值。

**编辑 1**：在这些[键盘快捷键](http://office.microsoft.com/en-ca/excel-help/change-formula-recalculation-iteration-or-precision-HP010054149.aspx#BMrecalculate_a_worksheet_or_workbook_m)中，只有 CTRL+ALT+SHIFT+F9 给出了正确的值。所有其他人都给#VALUE！如果该功能没有`Application.Volatile`.

公式：

```
=HLOOKUPRANGE(arr(CB43,CC43,CE43),Q!$CD$3:$DG$28,CG43) 
```

有问题的 VBA 函数：

```
Public Function arr(ParamArray fields() As Variant)
    arr = fields
End Function

Public Function HLOOKUPRANGE(headers() As Variant, lookup_range As Range, row_index As Integer) As Variant
    If lookup_range.Columns.Count = 1 Then
        HLOOKUPRANGE = lookup_range(row_index, 1)
    Else
        ' look at the first row in the range for the header
        For colStart = 1 To lookup_range.Columns.Count Step 1
            col = lookup_range.Cells(1, colStart).Value
            If col = headers(1) Then
                colEnd = colStart + lookup_range.Cells(1, colStart).MergeArea.Columns.Count - 1
                Exit For
            End If
        Next

        ' set the new smaller range
        First = lookup_range.Cells(2, colStart).Address
        Last = lookup_range.Cells(lookup_range.Rows.Count, colEnd).Address
        Dim szRange As String
        szRange = First & ":" & Last

        ' set the new headers array
        Dim header_next() As Variant
        If UBound(headers) > 1 Then
            ReDim header_next(1 To UBound(headers) - 1)
            For i = LBound(headers) + 1 To UBound(headers) Step 1
                header_next(i - 1) = headers(i)
            Next
        End If

        HLOOKUPRANGE = HLOOKUPRANGE(header_next, Range(szRange), row_index)
    End If
End Function 
```

这些函数的组合工作是以自上而下的方式从标题中导航查找表，并根据 arr() 中定义的字符串标题在表中返回一个值。

**编辑 1**：检查计算步骤时，arr() 正确计算为 HLOOKRANGE({"hdr1","hdr2","hdr3"},Q!$CD$3:$DG$28,CG43)，但此结果计算为 #价值！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:30:22.060

似乎 Range() 函数在调用时具有`Application.ActiveSheet`范围，而不是包含同一函数的单元格公式的工作表的范围。

因此，为了解决我的问题，我需要从正确的工作表中显式调用 Range()，例如

```
Dim rangeWorksheet as String
rangeWorksheet = lookup_range.Cells(2, colStart).Parent.Name
Dim curws As Worksheet
Set curws = Worksheets(rangeWorksheet)
curws.Range(...) 
```

# php - php加密密码

> ID：10329999
> 
> 赞同：1
> 
> 时间：2012-04-26T08:45:16.247
> 
> 标签：php, security, encryption, hash

**好的，我知道这个话题在stackoverflow**中被提出了很多，但他们没有强调我正在寻找的答案。

我使用 md5 加密，我告诉过它（不久前我还是 php 的菜鸟）是安全的，但如果你在旧的谷歌上查找它，它已经加密和解密。

所以我开始在这里寻找其他地方。

我听说过所有的加密方法，例如 SHA-1、MD5、SHA-2、SHA-256、SHA-512 等等。

很多人说使用我正在查看的**Bcrypt**，它与 SHA-512 相比。

人们说使用随机盐并将其保存在您的数据库中，这很愚蠢，因为说黑客入侵了您的数据库并获取了所有密码的盐，因此在黑客解密所有密码并开始之前更改所有盐是一个小窗口到其他地方并尝试它们，例如**facebook、google 和 stackoverflow**

所以我的问题是这样做是最安全的方法（加密（使用 SHA-512）并使用也将存储在数据库中的随机盐）或使用硬连接到我的 php 代码中的固定盐与数据库随机盐相同的安全性。

我已经阅读了很多关于这方面的帖子，所以我想我知道我在说什么，而且我喜欢冷漠，因为我已经阅读了很多关于这方面的帖子，确切地说是 20 篇。

哦，差点忘了，如果您多次加密密码或仅与一次加密大致相同，会更安全吗？

**感谢您对写得太多的帖子的帮助**

我很抱歉那些让我有点困惑的人，但我没有明白其他人的帖子的意思，我开始谈论加密，但我在谈论散列字符串。

对此感到抱歉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T08:55:23.763

> 我使用 md5 加密，我告诉过它（不久前我还是 php 的菜鸟）是安全的，但如果你在旧的谷歌上查找它，它已经加密和解密。

首先是一些吹毛求疵。它是散列而不是加密。散列是一种方法。现在回答你的问题：不要`md5()`用来散列密码。它不再安全了。它已经坏了好几年了。不仅发现了冲突（导致相同哈希的多个值），而且 md5 可以使用任何体面的 GPU 非常*非常*快地被暴力破解。

> 很多人说使用我正在查看的 Bcrypt，它与 SHA-512 相比

你应该使用 bcrypt。这是目前密码哈希的最佳选择。

> 人们说使用随机盐并将其保存在您的数据库中，这很愚蠢

不，这并不愚蠢。加盐密码可防止攻击者为您的所有密码创建彩虹表。[为了您的方便， ircmaxell](https://stackoverflow.com/users/338665/ircmaxell)创建了一个密码库，可以在[GitHub](https://github.com/ircmaxell/PHP-PasswordLib)上找到。

一些相关文章和 Stack Overflow 帖子：

*   [是否有比 bcrypt 和 scrypt 更现代的密码散列方法？](https://security.stackexchange.com/q/5605/2685)
*   [bcrypt 常见问题](https://stackoverflow.com/questions/tagged/bcrypt?sort=frequent)
*   [彩虹表就够了：您需要了解的有关安全密码方案的知识](http://chargen.matasano.com/chargen/2007/9/7/enough-with-the-rainbow-tables-what-you-need-to-know-about-s.html)
*   [如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/q/4795385/508666)
*   [介绍：密码库](http://blog.ircmaxell.com/2012/04/introducing-passwordlib.html)
*   [正确加盐密码，针对 Pepper 的案例](http://blog.ircmaxell.com/2012/04/properly-salting-passwords-case-against.html)
*   [OWASP 密码存储备忘单](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet)

**更新**

当 PHP 5.5 发布时，它将引入一种简单的方法来正确加密您的密码。默认情况下它将使用 bcrypt 并自动为您的密码添加盐。当将来有更好的算法可用时（例如 scrypt），它将能够使用它。有关此新功能的更多信息，请参阅[RFC](https://wiki.php.net/rfc/password_hash)。它还将具有一项功能，可以检测当前散列密码的使用算法，并在用户登录到更新（/更安全）算法（如果可用）时自动更新它们。有关实现示例，请查看[此 GitHub gist](https://gist.github.com/3707231)。

如果您仍在使用旧版本的 PHP 并且无法更新，则[可以使用 C API 的纯 PHP 实现，并支持 PHP >= 5.3.7](https://github.com/ircmaxell/password_compat)。此兼容 API 使用与 C API 完全相同的实现。

*注意：使用更安全的 scrypt 会更好，但是到目前为止 PHP 还不支持它。如果在某个时候确实如此，我将更新此答案。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T08:48:35.677

您将[hashing](http://en.wikipedia.org/wiki/Hash_function)与[encryption](http://en.wikipedia.org/wiki/Encryption)混淆了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T08:49:45.857

我用用户名中的某些字符以及 php 代码中的字符串加盐。从理论上讲，他们需要代码和数据库来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T09:09:54.860

盐是值得的，因为它可以防止预先计算所有可能的结果。多轮也有助于减慢速度，但如果有人碰巧获得了哈希值并且有几个 GPU 可供他们使用，那么这并没有多大作用。要具体回答这个问题，如果我是你并且我可以使用 bcrypt，那么我会的。如果您决定只使用 SHA-512 哈希，请使用盐和多轮（数万轮）。

此外，MD5 和 SHA1 哈希等是单向的。从哈希中获取原始输出的唯一方法是通过蛮力或纯粹的运气猜测它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-10T08:37:04.843

**2015 年 6 月更新：**

正如@PeeHa 所说，PHP 5.5 包含一个内置机制和一个简短的教程/解释，用于使用 PHP 实现散列密码。您可以查看[Password Hashing](http://php.net/manual/en/book.password.php)。

使用这些方法可以进行密码散列：

*   `string password_hash ( string $password , integer $algo [, array $options ] )`

> password_hash() 使用强大的单向散列算法创建一个新的密码散列。password_hash() 与 crypt() 兼容。因此，由 crypt() 创建的密码哈希可以与 password_hash() 一起使用。

*   `boolean password_verify ( string $password , string $hash )`

> 验证给定的哈希是否与给定的密码匹配。

**您可能会收到用户的输入，因此为了防止 SQL 注入，我建议使用这些方法来清除输入：**

您可以使用[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)，它允许您将用户输入安全地插入到 SQL 查询中：

```
 $stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (:name, :value)");
 $stmt->bindParam(':name', $name);
 $stmt->bindParam(':value', $value);

 $name = 'one';
 $value = 1;
 $stmt->execute(); 
```

[有关@Theos answer](https://stackoverflow.com/questions/60174/how-can-i-prevent-sql-injection-in-php)中准备好的语句的更多信息。

**其他替代方法是清除用户输入字符串：**

*   `string stripslashes ( string $str )`

> stripslashes() 的一个使用示例是当 PHP 指令 magic_quotes_gpc 处于打开状态时（在 PHP 5.4 之前它默认处于打开状态），并且您没有将此数据插入需要转义的位置（例如数据库）。例如，如果您只是直接从 HTML 表单输出数据。[斜线 API](http://us.php.net/manual/en/function.stripslashes.php)

*   `string mysqli::escape_string ( string $escapestr )`

> 此函数用于创建可以在 SQL 语句中使用的合法 SQL 字符串。考虑到连接的当前字符集，给定的字符串被编码为转义的 SQL 字符串。 [real_escape_string API](http://us.php.net/manual/en/mysqli.real-escape-string.php)