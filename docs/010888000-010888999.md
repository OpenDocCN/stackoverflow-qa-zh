# StackOverflow 问答 10888000-10888999

# jquery - 带有附加警报框的 MVC3 Razor JQuery 客户端验证

> ID：10888000
> 
> 赞同：1
> 
> 时间：2012-06-04T20:36:09.770
> 
> 标签：jquery, asp.net-mvc-3, razor, jquery-validate

我被要求创建一个登录表单，当用户输入未通过验证时，它会弹出一个警告框。

我使用基于模型的验证将所有内容连接起来。

前任：

```
 public class LogonViewModel
    {
        [Required( ErrorMessage = "User Name is Required")]
        public string UserName { get; set; }

        [Required( ErrorMessage = "Password is required")]
        public string Password { get; set; }
    } 
```

我在页面上有一个验证摘要：

```
Html.ValidationSummary() 
```

我希望摘要出现在页面上，以防用户关闭 javascript。但是，如果客户端验证触发，我还想捕获验证事件并将错误放入警报框中，就像我被问到的那样。

我的表格基本上是...

```
@Html.ValidationSummary()
 @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "loginForm" }))
     {
      username: @Html.TextBoxFor(m => m.UserName) <br/>
      password: @Html.TextBoxFor(m => m.Password) <br/>
      <input type="submit" value="Login"/>

    } 
```

我尝试过的一件事是

```
<script language="javascript">
        $(document).ready(function () {

            $("#loginForm").validate({
                invalidHandler: function (form, validator) {
                    var errors = validator.numberOfInvalids();
                    if (errors) {
                        alert(errors);
                    }
                }
            });
        });

    </script> 
```

我不知道如何使这项工作。我只想允许正常验证和显示错误，但有机会做更多的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:02:07.697

一种解决方案是修改 jquery.validate.unobtrusive.js 中的 onErrors 函数。该函数可读性很强。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:54:35.557

经过大量搜索：

我在 jQuery 验证器初始化之后发现了这个[Add InvalidHandler](http://www.herikstad.net/2010/04/add-invalidhandler-after-jquery.html) 这导致我找到了这个解决方案：

```
 $(document).ready(function () {
            $("#loginForm").bind('invalid-form.validate',
                function (form, validator) {
                    var errors = "Login failed:\r\n";

                    for (var i = 0; i < validator.errorList.length; i++) {
                        errors = errors + "\r\n\t-" + validator.errorList[i].message;    
                    }

                    alert(errors);

                }
                );
        }); 
```

这将运行正常验证并更新验证摘要并设置所有样式，然后允许我在后做额外的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-08T09:31:10.783

这对我有用...

```
var settings = $.data($('form')[0], 'validator').settings;

if (jQuery.validator) {
    jQuery.validator.setDefaults({
        showErrors: function (errorMap, errorList) {
            $.extend($.validator.defaults, settings);
            var message = '';
            for (var i = 0; i < errorList.length; i++) {
                message += errorList[i].message + '\n\n';
            }

            alert(message);//Replace your modal popup here
        }
    });
} 
```

# java - 使用计时器打破循环

> ID：10888008
> 
> 赞同：0
> 
> 时间：2012-06-04T20:36:46.873
> 
> 标签：java, loops, timer

我正在尝试为呼叫/响应 ping 建立超时。这是为了确定在自动连接序列中使用哪个 CommPort。当我发送`CALL_SIGNAL`byte[] 时，我希望得到“FU”作为回复。这就是我将如何确定哪个是我的设备。SSCCE 在下面（对不起，长度，但这*是*缩短的版本）

```
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Enumeration;
import java.util.Timer;
import java.util.TimerTask;
import javax.comm.CommPortIdentifier;
import javax.comm.CommPort;
import javax.comm.PortInUseException;
import javax.comm.SerialPort;

public class PingTest {
    public static final long PING_TIMEOUT = 1000; // in millis
    public static final byte[] CALL_SIGNAL = {70, 68, 73, 68};

    public boolean ping(CommPortIdentifier cpi)  {
        System.out.println("Pinging " + cpi.getName());
        CommPort port = null;
        InputStream input = null;
        OutputStream output = null;

        //Initialization test
        try {
            port = cpi.open("pingTest", 50);
            input = port.getInputStream();
            output = port.getOutputStream();
        } catch (PortInUseException ex) {
            if (cpi.getCurrentOwner().startsWith("pingTest")) {
                System.out.println("Port already owned by this application.");
                return true;
            }
            return false;
        } catch (Exception ex) {
            try {
            port.close();
            } catch (NullPointerException e) {
            }
            System.out.println("Failed initialization test.");
            System.err.println(ex);
            return false;
        }
        System.out.println("Passed initialization test."); 

        //Call and response test
        final Stop stop = new Stop();
        Timer timer = new Timer();
        timer.schedule(new TimerTask() {

            @Override
            public void run() {
                System.out.println("Stop timer triggered.");
                stop.shouldStop = true;
            }
        }, PING_TIMEOUT);
        try {
            System.out.println("Writing...");
            output.write(CALL_SIGNAL);
            System.out.println("Reading...");
            boolean waitForF = true;
            while (!stop.shouldStop && !stop.didPass) {
                if (waitForF) {
                    if ((byte) 'F' == input.read()) {
                        waitForF = false;
                    }
                } else {
                    System.out.println('F');
                    if ((byte) 'U' == input.read()) {
                        System.out.println('U');
                        stop.didPass = true;
                    } else {
                        System.out.println();
                        waitForF = true;
                    }
                }
            }
        } catch (IOException ex) {
            System.out.println("Failed I/O test.");
            return false;
        } finally {
            port.close();
        }

        if (stop.didPass) {
            System.out.println("Successful ping.");
            return true;
        }
        System.out.println("Failed call and response test.");
        return false;
    }

    public static void main(String[] args) {
        PingTest pinger = new PingTest();
        Enumeration<CommPortIdentifier> ports = CommPortIdentifier.getPortIdentifiers();
        boolean trigger = true;
        String name = null;
        while (trigger && ports.hasMoreElements) {
            CommPortIdentifier cpi = ports.nextElement();
            name = cpi.getName();
            trigger = !ping(cpi);
        }
        if (trigger) {
            System.out.println("Found it. It is " + name);
        } else {
            System.out.println("Not Found");
        }
    }
}

class Stop {
    boolean shouldStop = false;
    boolean didPass = false;
} 
```

我的输出是：

```
Pinging COM1
Passed initialization test.
Writing...
Reading...
Stop timer triggered. 
```

然后应用程序冻结。尝试用 a 停止 while 循环是否有问题`Timer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:49:51.043

你的阅读被阻塞了。您需要使用[超时](http://docs.oracle.com/cd/E17802_01/products/products/javacomm/reference/api/javax/comm/CommPort.html#enableReceiveTimeout%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:46:47.320

您在没有任何同步的情况下同时从不同线程访问共享状态（`shouldStop`和变量）。`didPass`如果您想确保阅读其他线程所写的内容，则应同步每次访问。

因此，要么添加方法来获取和设置这些变量，并使这些方法同步，或者，如果每个变量代表彼此不同的信息并且它们可以独立地写入和读取，则使这些变量易失。

第三种方法（仅在与 volatile 解决方案相同的条件下有效）是使用 AtomicBoolean 变量而不是布尔变量。

# c++ - 在没有事先声明的情况下错误使用枚举？

> ID：10888011
> 
> 赞同：5
> 
> 时间：2012-06-04T20:37:04.410
> 
> 标签：c++

我正在从一本书中学习 C++，以下示例在代码块中不起作用。我的编译器给出了一个错误：

> `'Days'`在没有事先声明的情况下使用枚举

有人可以在这里启发我吗？

```
#include <iostream>
using namespace std;

int main() // main routine
{
    int a;
    enum Days (zo,ma,di,wo,do,vr,za); // <error here> : use of enum 'Days' without previous declaration
    Days today;
    today = ma;
    if (today == zo || today == za)
        cout << "weekend \n"
    else
        cout << "ohno workday \n";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-04T20:42:35.227

你使用`enum`不正确。你的括号应该是大括号：

```
enum Days {zo,ma,di,wo,do,vr,za}; 
```

现在`zo`将等于 0，因为您没有明确定义一个值，并且此后的每个值都将比上一个值多一个。

还要注意（很容易，由于语法突出显示）与为语句保留`do`的关键字冲突。`do``do...while`

# ruby-on-rails - 生产中的 Rails Resque 工作人员 - 在哪里保留 Redis 服务器？

> ID：10888013
> 
> 赞同：1
> 
> 时间：2012-06-04T20:37:16.970
> 
> 标签：ruby-on-rails, amazon-ec2, redis, resque, production-environment

我有使用 Resque 和 Redis 配置的 Rails 应用程序。我正在使用上帝来启动/停止工人。到目前为止，我一直在使用 Redis-to-go，但由于我转移到 EC2 高内存实例，我认为在该 EC2 实例上运行 Redis 服务器并在那里发生所有事情会是一个更好的主意。

这是一个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T19:37:34.893

我们在与我们应用程序的其余部分相同的服务器上运行我们的 Redis 实例（用于 resque）。它很棒，而且使用的内存很少。但我们每天只处理大约 5000 个工作。

无论哪种方式，假设您只使用 Redis for Resque，我们已经以极低的 CPU 或内存开销完成了它。Redis 作为 Resque 存储非常高效。

# iphone - 导航栏和 UIWebview

> ID：10888015
> 
> 赞同：1
> 
> 时间：2012-06-04T20:37:28.037
> 
> 标签：iphone, objective-c, ios, cocoa, ipad

我有一些小问题并试图解决它，但找不到最简单的答案。我有一个导航栏，它会带走顶部像素，因此如果我没记错的话，webview 内容最后 44 px 会在反弹下并隐藏内容。因此问题是我有一个提交按钮，并且由于需要单击它，它处于反弹状态并且不允许我选择按钮。对此问题的任何快速解决方案将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:43:51.143

确保您的 UIWebView 将 autoresizingMask 设置为高度和宽度灵活。您可以在界面生成器或代码中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:20:45.443

您可以将底部内容插图设置为 44。但您的视图似乎没有正确放置（网络视图大小未考虑导航栏，网络视图未正确调整大小等）我会修复它而不是修补插图修复。

# c# - C# - 无法从内部异常获取 WebException 响应

> ID：10888016
> 
> 赞同：1
> 
> 时间：2012-06-04T20:37:37.767
> 
> 标签：c#, web-services, exception, exception-handling

我发现了一个异常，我已经通过两种方式完成了。使用第一种方法，我正在捕获完整的异常，检查内部异常是否为 WebException 类型，如果是，则获取响应流。下面是第一个示例，但是我总是得到一个零字符串响应：

```
catch (Exception e)
{
    if (e.InnerException is WebException)
    {
        WebException webEx = (WebException)e.InnerException;
        HttpWebResponse myResponse = webEx.Response as HttpWebResponse;
        string response = string.Empty;

        if (myResponse != null)
        {
            StreamReader strm = new StreamReader(myResponse.GetResponseStream(), Encoding.UTF8);
            response = strm.ReadToEnd();
            //EMPTY RESPONSE
        }
    }
} 
```

但是，如果我捕捉到 Web 异常，并且几乎做同样的事情，我会得到很好的响应：

```
catch (WebException e)
{
    HttpWebResponse myResponse = e.Response as HttpWebResponse;
    string response = string.Empty;

    if (myResponse != null)
    {
        StreamReader strm = new StreamReader(myResponse.GetResponseStream(), Encoding.UTF8);
        response = strm.ReadToEnd();
        //POPULATED RESPONSE
    }
} 
```

任何想法为什么我能够解析第二个示例中的响应但不能解析第一个示例中的响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:39:20.187

不要看 InnerException，在第二个示例中，您正在读取捕获的异常的响应，这就是它起作用的原因。只需将其更改为此，应该可以正常工作：

```
catch (Exception e)
{
  if (e is WebException)
  {
      WebException webEx = (WebException)e;
      HttpWebResponse myResponse = webEx.Response as HttpWebResponse;
      string response = string.Empty;

      if (myResponse != null)
      {
          StreamReader strm = new StreamReader(myResponse.GetResponseStream(), Encoding.UTF8);
          response = strm.ReadToEnd();
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T09:43:38.207

不要检查`InnerException`，它是`Exception`导致当前异常的实例（[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.net.webexception.aspx)）

只需检查`Exception`-

```
 catch (Exception e)
        {
            if (e is WebException)
            {
                WebException webEx = (WebException)e.InnerException;
                HttpWebResponse myResponse = webEx.Response as HttpWebResponse;
                string response = string.Empty;

                if (myResponse != null)
                {
                    StreamReader strm = new  StreamReader(myResponse.GetResponseStream(), Encoding.UTF8);
                    response = strm.ReadToEnd();
                    //EMPTY RESPONSE
                }
            }
        } 
```

希望能帮助到你 ！！

# extendscript - 如何从另一个文档页面的子集（在 InDesign (CS6) 中使用 ExtendScript）创建新文档？

> ID：10888017
> 
> 赞同：2
> 
> 时间：2012-06-04T20:37:46.633
> 
> 标签：extendscript, adobe-indesign

我需要提供一项功能，允许 InDesign 用户在 InDesign 文档中选择页面范围并从这些页面中创建新文档。这听起来很简单，但事实并非...

我尝试了许多不同的方法来做到这一点，但它们都在某种程度上失败了。有些方法将所有页面放在一个跨页中（这有时会导致 InDesign 崩溃）。我所能做的最好的（见下面的代码）在开始和结束时仍然存在问题（见下面的截图）：

**原始文件：**

![原始文件概览。 中间被删除（红线）。](../Images/0c782c964afd8641360fdcbf1ab93eb1.png)

**新文件：**

![新文档概述。 中间被删除（红线）。](../Images/2d1f57ffc5f8c22e7994d2d458980e3e.png)

**问题：**如何从另一个文档页面的子集（在 InDesign 中使用 ExtendScript）创建新文档而不会出现屏幕截图中显示的问题？

**注意：**脚本的行为在 CS5.5 和 CS6 中完全不同。我的问题涉及 CS6。

* * *

第二个屏幕截图是通过将以下代码应用于第一个屏幕截图中显示的文档获得的：

**代码**

```
var firstPageName = { editContents: "117" };  // This page number is actually entered by the user in an integerEditbox
var lastPageName = { editContents: "136" };  // This page number is actually entered by the user in an integerEditbox
var sourceDocument = app.activeDocument;
var destDocument = app.documents.add();
destDocument.importStyles(ImportFormat.paragraphStylesFormat, new File(sourceDocument.filePath + "/" + sourceDocument.name), GlobalClashResolutionStrategy.LOAD_ALL_WITH_OVERWRITE);
destDocument.importStyles(ImportFormat.characterStylesFormat, new File(sourceDocument.filePath + "/" + sourceDocument.name), GlobalClashResolutionStrategy.LOAD_ALL_WITH_OVERWRITE);
destDocument.viewPreferences.horizontalMeasurementUnits = sourceDocument.viewPreferences.horizontalMeasurementUnits;
destDocument.viewPreferences.verticalMeasurementUnits = sourceDocument.viewPreferences.verticalMeasurementUnits;
destDocument.documentPreferences.facingPages = sourceDocument.documentPreferences.facingPages;
destDocument.documentPreferences.pageHeight = sourceDocument.documentPreferences.pageHeight;
destDocument.documentPreferences.pageWidth = sourceDocument.documentPreferences.pageWidth;
destDocument.documentPreferences.pageSize = sourceDocument.documentPreferences.pageSize;
var sourceSpreads = sourceDocument.spreads;
var nbSourceSpreads = sourceSpreads.length;
var firstPageFound = false;
var lastPageFound = false;
var i;
var newSpreadNeeded;
var currentDestSpread;

for (i = 0; !lastPageFound, i < nbSourceSpreads; ++i) {
  newSpreadNeeded = true;
  var sourcePages = sourceSpreads[i].pages;
  var nbSourcePages = sourcePages.length;
  var j;
  for (j = 0; !lastPageFound, j < nbSourcePages; ++j) {
    if (sourcePages[j].name === firstPageName.editContents) {
      firstPageFound = true;
      destDocument.documentPreferences.startPageNumber = parseInt(firstPageName.editContents);  // We want to preserve page numbers
    }
    if (firstPageFound) {
      // Copy this page over to the new document.
      var firstInNewSpread = false;
      if (newSpreadNeeded) {
        currentDestSpread = destDocument.spreads.add();
        newSpreadNeeded = false;
        firstInNewSpread = true;
      }
      var newPage = sourcePages[j].duplicate(LocationOptions.AT_END, currentDestSpread);
      var k;
      for (k = 0; k < newPage.index; ++k) {
        currentDestSpread.pages[k].remove();
      }
    }
    if (sourcePages[j].name === lastPageName.editContents) {
      lastPageFound = true;
    }
  }
}
destDocument.spreads[0].remove(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:01:02.133

我到处乱搞，想出了这个小脚本。虽然它从相反的方向解决问题，但它似乎在这里工作正常。另外，我还在 InDesign CS5 中运行，但也许它对你有用。希望我明白你的问题的要点？

这会将第 3 页到第 5 页提取到一个单独的文档中：

```
var doc = app.activeDocument;

var newFilePath = doc.filePath + "/subset_" + doc.name;
var newFile = File(newFilePath); // Create a new file path

doc.saveACopy(newFile); // Save a copy of the doc
var newDoc = app.open(newFile); // Open the copy

var firstPageNum = 3; // First page number in the range
var lastPageNum = 5;  // Last page number in the range

var firstPage = newDoc.pages[firstPageNum-1];
var lastPage = newDoc.pages[lastPageNum-1];

// Remove all text from the last page in the range to the end of the document
var lastPageFrames = lastPage.textFrames.everyItem().getElements();
for (var i=0; i < lastPageFrames.length; i++) {
   var frame = lastPageFrames[i];
   var parentStory = frame.parentStory;
   var lastFrameInsert = frame.insertionPoints.lastItem();
   var lastStoryInsert = parentStory.insertionPoints.lastItem();
   var textAfter = parentStory.insertionPoints.itemByRange(lastFrameInsert,lastStoryInsert);
   textAfter.remove();
};

// Remove all text from the beginning of the document to the first page in the range
var firstPageFrames = firstPage.textFrames.everyItem().getElements();
for (var i=0; i < firstPageFrames.length; i++) {
   var frame = firstPageFrames[i];
   var parentStory = frame.parentStory;
   var firstFrameInsert = frame.insertionPoints.firstItem();
   var textBefore = parentStory.insertionPoints.itemByRange(0,firstFrameInsert.index);
   textBefore.remove();
};

// Remove the pages that aren't in the range
var allPages = newDoc.pages.everyItem().getElements();
for (var i=0; i < allPages.length; i++) {
   var page = allPages[i];
   if (i < firstPageNum || i > lastPageNum) {
      page.remove();
   }
}; 
```

# mysql - 修改 MySQL 表

> ID：10888018
> 
> 赞同：3
> 
> 时间：2012-06-04T20:37:54.537
> 
> 标签：mysql, database

如何修改每秒插入数百条记录的 MySQL 表，而不会出现任何停机/丢失数据或错误。

例如：添加一个新字段

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:46:38.207

直觉告诉你应该避免修改表格。另一种方法是将您的列添加到新表并链接到原始表以保持引用完整性，因此原始表保持不变。

另一种相当典型的方法是使用添加的列创建一个新表，将其与旧表交换，然后将数据添加回新表。虽然不是一个很好的解决方案。

MySQL 大师可能会不同意我的观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:56:03.573

好吧，如果只插入我认为最好的方法是：

```
CREATE TABLE the_table_copy LIKE the_table;
ALTER TABLE the_table_copy ADD new_field VARCHAR(60);
RENAME TABLE the_table TO the_table_backup;
RENAME TABLE the_table_copy TO the_table; 
```

但首先复制它并在足够快的情况下尝试复制。然后在真实的生活中做到这一点！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:58:16.007

好吧，我会锁定表格，添加字段，解锁表格。然后插入会有一点延迟，但我想这不会太麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T20:58:54.490

当您说“添加字段”时，您是在创建新列，还是只是在更新列中的值？两者是完全不同的东西。如果您只是更新一列，请更改您的数据模型以支持同一表中同一行的多个版本，并在表的末尾继续添加新行。这为您提供了最佳的读写并发性。

除此之外，您可以查看“Handler Socket”方法。 [http://yoshinorimatsunobu.blogspot.com/search/label/handlersocket](http://yoshinorimatsunobu.blogspot.com/search/label/handlersocket)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T20:59:42.457

如果您只需要添加一列，则没有理由需要停机。该表将在 ALTER TABLE 语句的持续时间内被锁定（毫秒）。在此期间提交的任何 DML 都必须等待，因此可能会短暂影响性能，但不应导致任何异常，除非某处的代码明确检查锁。

# c# - MonoTouch 中 JSON.Net 的奇怪异常

> ID：10888020
> 
> 赞同：0
> 
> 时间：2012-06-04T20:38:04.683
> 
> 标签：c#, .net, json, xamarin.ios, json.net

我收到与[此处](http://lists.ximian.com/pipermail/monotouch/2012-March/008547.html)的帖子类似的错误。

我正在像他一样在后台线程上使用 JSON.NET 解析 JSON。它偶尔会失败并出现错误`Array.Copy`。

这是一个堆栈跟踪：

```
System.NullReferenceException: Object reference not set to an instance of an object
  at System.Array.Copy (System.Array sourceArray, Int32 sourceIndex, System.Array destinationArray, Int32 destinationIndex, Int32 length) [0x00104] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/Array.cs:979 
  at System.Collections.ArrayList.CopyTo (Int32 index, System.Array array, Int32 arrayIndex, Int32 count) [0x0002d] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Collections/ArrayList.cs:3064 
  at System.Collections.ArrayList.CopyTo (System.Array array, Int32 arrayIndex) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System.Collections/ArrayList.cs:3046 
  at System.MonoCustomAttrs.GetCustomAttributes (ICustomAttributeProvider obj, System.Type attributeType, Boolean inherit) [0x0026c] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/MonoCustomAttrs.cs:259 
  at System.MonoType.GetCustomAttributes (System.Type attributeType, Boolean inherit) [0x00011] in /Developer/MonoTouch/Source/mono/mcs/class/corlib/System/MonoType.cs:582 
  at Newtonsoft.Json.Utilities.ReflectionUtils.GetAttributes[JsonConverterAttribute] (ICustomAttributeProvider attributeProvider, Boolean inherit) [0x00000] in <filename unknown>:0 
  at Newtonsoft.Json.Utilities.ReflectionUtils.GetAttribute[JsonConverterAttribute] (ICustomAttributeProvider attributeProvider, Boolean inherit) [0x00000] in <filename unknown>:0 
  ... Continues ... 
```

这是 JSON.Net 中的违规代码：

```
#if !(NETFX_CORE)
    public static T[] GetAttributes<T>(ICustomAttributeProvider attributeProvider, bool inherit) where T : Attribute
    {
      ValidationUtils.ArgumentNotNull(attributeProvider, "attributeProvider");

      object provider;

#if !PORTABLE
      provider = attributeProvider;
#else

...  omitted junk ...

      if (provider is Type)
        return (T[])((Type)provider).GetCustomAttributes(typeof(T), inherit); 
```

我猜`GetCustomAttributes`是返回null。Xamarin 有人知道这个问题吗？新闻组的那个人说他把这项工作放在主线程上并修复了它（但我不确定我是否想这样做）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:01:46.433

这是一个[已知的错误](https://bugzilla.xamarin.com/show_bug.cgi?id=3676)。

它在 5.3.3 alpha 版本中得到修复。

# django - Django 1.4 想要使用 SelectDateWidget 在我的表单中创建出生日期字段

> ID：10888021
> 
> 赞同：1
> 
> 时间：2012-06-04T20:38:06.903
> 
> 标签：django, django-models, django-forms, django-views, django-widget

我正在尝试为用户创建一个表单，以自行更改其个人资料帐户信息。目前我有它，所以他们可以更新他们的第一个、最后一个和用户名、性别和“生日”。“生日”是唯一一个我不能不需要的。目前，我的表单检查是否在任何表单字段中都没有输入，如果没有进行任何更改，则不会更新用户信息。

~~模型.py~~

```
class Account(models.Model):
    user               = models.OneToOneField(User)      #link (pointer) to the users     other information in User model                                        
    birthdate          = models.DateField(blank = True, null = True) # True makes this field optional                                                        
    gender             = models.CharField(max_length = 10, choices = GENDER_CHOICE, null = True, blank = True)
    profilePic         = models.ImageField(upload_to = "profilepics/%Y/%m/%d", default = "profilepics/default.jpg", blank = True) 
```

-- 收集用户设置更改的表单

```
class EditAccountForm(forms.Form):
    username           = forms.CharField(max_length = 30, required = False)
    first_name         = forms.CharField(max_length = 30, required = False)
    last_name          = forms.CharField(max_length = 30, required = False)
    birthdate          = forms.DateField(widget = SelectDateWidget(required = False, years = range(2022, 1930, -1))) # make birthdate drop down selectable    
    gender             = forms.CharField(max_length = 10, widget=forms.Select(choices = GENDER_CHOICE),)# null = True) 
```

~~views.py

```
def AccountSettings(request):
    sluggedSettingError = request.GET.get('error', '') # error message with slugged character                                                                
    settingError = sluggedSettingError.replace('-', ' ')
    # form variable may need to be inside below if statement                                                                                                 
    settingForm = EditAccountForm(request.POST or None) # variable is called in edit_user.html                                                               
    if request.method == 'POST':
        if settingForm.is_valid():

            userSettings = request.user.get_profile() # returns the current settings of the users profile 
if request.POST['gender'] == '---':
                print "Gender was not changed"
            else:
                userSettings.gender = request.POST['gender']  # add a check for birthdate submission                                                         
            userSettings.birthdate = settingForm.cleaned_data.get('birthdate')   # currently requires input format YYYY-mm-dd                                
            # check if the first name submission is not changed                                                                                              
            if request.POST['first_name'] == '':
                print "First name not changed"
            else:
                userSettings.user.first_name = request.POST['first_name']
            # check if the last name submission is not changed                                                                                               
            if request.POST['last_name'] == '':
                print "Last name not changed"
            else:
                userSettings.user.last_name = request.POST['last_name']
            # check if the username submission is not changed                                                                                                
            if request.POST['username'] == '':
                print "Username not changed"
            else:
                userSettings.user.username = request.POST['username']
            # check if the ProfilePicture submission is not changed                                                                                          
#                if request.POST['profilePic'] == None:
#                    print "Profile picture not changed"
#                else:
#                    userSettings.profilePic = request.POST['profilePic']
            userSettings.user.save()              # save the changes to the fields in used from the auth library                                             
            userSettings.save()                   # save the altered and unaltered settings                                                                  
            return HttpResponseRedirect('/')
    return render_to_response("user_settings.html", {'settingForm': settingForm, 'settingError': settingError}, context_instance = RequestContext(request)) 
```

有没有办法在使用 SelectDateWidget() 时使出生日期字段不需要，因为我当前的 required = False 尝试不起作用。或者可能是允许用户编辑他们的设置并提交更改的更好方法？

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:56:58.410

我希望您的问题源于以下事实：

```
settingForm.cleaned_data.get('birthdate') 
```

不会返回`None`，但会给您一个空字符串`''`，这不是 Date 或 DateTime 字段所期望的。

如果用户实际上没有选择日期，您应该返回 NoneType。

# emacs - 如何在 ECB 中重建目录缓冲区？

> ID：10888023
> 
> 赞同：1
> 
> 时间：2012-06-04T20:38:22.503
> 
> 标签：emacs, emacs-ecb

这基本上是一个问题。自打开 ECB 以来，我添加了一个新目录，但目录缓冲区没有更新。我如何强制它更新？尝试在目录缓冲区`C-c . s`中`revert-buffer`无效。

**编辑**

抱歉，这很奇怪，我实际上找到`M-x ecb-update-directories-buffer`了，但它不会更新它：S...这是已知的事情吗？这只是我添加的一个常规目录，只是名称只有一个字母。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:53:58.253

我不使用 ECB，但`g`它是用于“刷新缓冲区内容”功能的常用 Emacs 绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-29T19:24:26.893

Shift + 单击要刷新的节点。

# java - 数据有时不会插入到表中

> ID：10888025
> 
> 赞同：0
> 
> 时间：2012-06-04T20:38:36.063
> 
> 标签：java, sql, jdbc, struts, oracle11g

我有一个表 A。我通过用户界面将数据插入到表 A 中。表 A 有一个使用序列生成的 ID（主键）和 16 个其他列。其中一列称为 cntrct_no。

当我尝试通过 UI 向表中插入数据时，它第一次运行良好。我检查了表 A，所有数据都在那里。

但是，当我尝试在不更改任何内容的情况下再次插入相同的数据时，看起来数据正在添加到表中并且我没有收到任何错误。但是当我检查表A时，第二次插入的数据不存在。

如果我尝试通过 SQL 开发人员直接插入相同的数据，则数据会插入到表中。

奇怪的是，如果我只是在 UI 中更改 cntrct_no 的值并使其余数据保持不变，则数据会被插入。

任何人都可以向我解释可能导致这种情况的原因吗？

不确定这是否有帮助：stmt.executeUpdate(); 未插入数据时返回 0，插入时返回 1。

```
public void writeToAudit(String contractNo, String tripNo, 
        String tripEffDate, 
        String tripDiscDate, String transpModeId, String userId, 
        String transType, AplLeg[] legs) {

    final Session session = HibernateUtil.getSession();
    Connection con = null;
    con = session.connection(); 
    PreparedStatement stmt = null;
    PreparedStatement stmtSelId = null;
    ResultSet rs = null;
    long nextId = -1;
    int i=0;

    try {

        for(i=0;i<legs.length;i++) {

            String sqlNextId = "SELECT rpt_audit_transportation_seq.NEXTVAL as seqval FROM DUAL";
            stmtSelId = con.prepareStatement(sqlNextId, ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
            rs = stmtSelId.executeQuery();
            rs.last();
            final int rows = rs.getRow();
            if (rows == 0){
                nextId = -1;
            }
            rs.beforeFirst();
            rs.next();
            nextId = rs.getInt(1);

            if(nextId==-1)
                throw new SQLException("Cannot get next val from rpt_audit_transportation sequence.");

            stmt = con.prepareStatement(WRITE_TO_AUDIT_DML);
            stmt.setLong(1, nextId);
            stmt.setString(2, userId.toUpperCase());
            stmt.setString(3, transType);
            stmt.setString(4, contractNo);
            stmt.setString(5, tripNo);
            stmt.setInt(6, Integer.parseInt(transpModeId));
            stmt.setString(7, tripEffDate);
            stmt.setString(8, tripDiscDate);
            stmt.setLong(9, legs[i].getLegId().longValue());
            int temp =  stmt.executeUpdate();
            con.commit();
        }

        stmt.close();
    }
    catch (Exception e) {
    }
    finally {
        closeConnection(session, con, stmtSelId, rs);
    }
} 
```

SQL 语句：

```
private static final String WRITE_TO_AUDIT_DML =
    "INSERT INTO rpt_audit_transportation " + 
    "(audit_id, audit_date, audit_process, audit_userid, " +
    "audit_trans_type, audit_route_no, audit_trip_no, " +
    "audit_eff_dt, audit_disc_dt, audit_orig_facility_id, " +
    "audit_dest_facility_id, audit_arvl_tm, audit_dprt_tm, " +
    "audit_leg_seq_no, audit_freq_id, audit_trnsp_mode_id) " +
    "(SELECT ?, " +     // audit id
         "SYSDATE, " +
         "'TOPS_UI', " +
         "?, " +        // userId
         "?, " +
         "rte.cntrct_no, " +
         "trp.trip_no, " +
         "rte.cntrct_eff_dt, " +
         "rte.cntrct_disc_dt, " +
         "NVL(leg.orig_facility_id, trp.orig_fac_id), " +
         "NVL(leg.dest_facility_id, trp.dest_fac_id), " +
         "NVL(leg.arvl_tm, trp.arvl_tm), " +
         "NVL(leg.dprt_tm, trp.dprt_tm), " +
         "leg.leg_seq, " +
         "trp.freq_id, " +
         "rte.trnsp_mode_id " +
        "FROM apl_contract rte, " +
         "apl_trip trp, " +
         "apl_leg leg " +
        "WHERE rte.cntrct_no = ? " +        // contract id
          "AND trp.trip_no = ? " +          // trip no
          "AND rte.trnsp_mode_id = ? " +        // transp mode id
          "AND rte.cntrct_locked_ind = 'N' " +
          "AND trp.trip_eff_dt = to_date(?,'MM/DD/YYYY') " +            // trip eff date
          "AND trp.trip_disc_dt = to_date(?,'MM/DD/YYYY') " +           // trip disc date
          "AND trp.cntrct_id = rte.cntrct_id " +
          "AND leg.trip_id = trp.trip_id " +
          "AND leg.leg_id = ?) "; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:43:39.820

看起来您不是在插入普通值，而是根据参数进行选择的结果。您使用的是一个`INSERT ... SELECT ()`子句，因此如果该`SELECT`部分不返回任何行，`INSERT`则不会插入任何内容，并且`stmt.executeUpdate()`将返回`0`. 找出为什么`SELECT`不返回任何行。

这可能是由于某些触发器在您执行 insert into 时将内容保存在其他表中`rpt_audit_transportation`，但这只是一个猜测。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:44:56.183

问题是你有一个`catch`正在吞噬你的异常

```
catch (Exception e) {
} 
```

这意味着当 SQL 语句抛出错误时，您是在告诉您的代码捕获异常并忽略它。这样做几乎总是一个错误，因为正如您所发现的那样，这意味着您的代码可能无法执行您期望的操作，而无法让您知道某事失败了。至少，您需要在某处记录异常。但是，一般来说，如果您无法修复导致异常的任何条件，则应该重新引发异常，或者根本不首先捕获它。

我的猜测是第二次插入违反了表上定义的某些约束。但是由于您的代码正在捕获异常并将其丢弃，因此不会通知您存在违反约束的情况，您的代码也不会注意到违反了哪个约束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T20:55:59.010

1.  当相`cntrct_no`同时，您会遇到异常，并且正如@Justin Cave 所说，您正在抑制它。这可能是因为您对该字段具有唯一约束，并且数据库抛出错误并且您正在抑制。

2.  何时`cntrct_no`更改 - 显然约束不会失败，并且对于主键，因为您使用的是它会生成下一个数字的序列，并且它很高兴地被插入到数据库中。

永远不要压制异常。在该块中做一些事情，要么重新抛出应用程序特定的异常，要么转换为错误代码并将其传播到前端。

# c# - 在winforms中模拟控制台，如何让它变得更好的艰难方法

> ID：10888029
> 
> 赞同：0
> 
> 时间：2012-06-04T20:38:43.940
> 
> 标签：c#, winforms, multithreading

我试图在 Windows 窗体应用程序中模拟控制台。我通过使用两个额外的线程和一个委托来与我的多行文本框进行交互，使之成为可能。

这似乎让我把事情复杂化了很多。所以我的问题。

1.  有没有更好的方法来做到这一点？
2.  当我按下回车时，命令不会被发送，首先如果我再次按下它会被发送？这是为什么？我很想调试它，但找不到解决方案。

编辑！我使用 CsharpSSH 进行 SSH 连接。我现在也包含了我的完整代码！

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;
    using Tamir.SharpSsh;
    using System.IO;
    using System.Threading;
    using System.Timers;

    namespace WindowsFormsApplication3
    {

    public partial class Form1 : Form
    {

    public string mHost;
    SshShell mShell;
    public string mInput;
    string pattern = "";
    bool mInputHolder = false;
    string mPattern = "";
    int mValue = 0;
    bool mStatus = false;
    private Thread thrdtwo = null;
    private Thread thrdone = null;
    public string mKorv;
    string mString = "";
    delegate void SetTextCallback(string text);
    bool clientopen = true;

    public Form1()
    {
        InitializeComponent();

        txthost.Text = "sdf.org";
        txtuser.Text = "kalle82";
        txtpass.Text = "kattsand";
        string pattern = "sdf:";
        mPattern = pattern;

    }

    public void button1_Click(object sender, EventArgs e)
    {

        mShell = new SshShell(Host, User);
        mShell.Password = Pass;
        //WRITING USER MESSAGE
        txtOutput.AppendText("Connecting...");
        mShell.Connect();
        txtOutput.AppendText("OK");
        mShell.ExpectPattern = mPattern;
        mShell.RemoveTerminalEmulationCharacters = true;
        this.SetText(mShell.Expect(pattern)); 
        txtInput.Focus();

        thrdone = new Thread(new ThreadStart(appengine));
        thrdone.Start();      

    }

    private void appengine()
    {
        this.txtInput.KeyPress += new System.Windows.Forms.KeyPressEventHandler(checkforenter);

      //  MessageBox.Show("Appengine started");

        while (mShell.ShellOpened)
        {

            thrdtwo = new Thread(new ThreadStart(startthread2));
            thrdtwo.Start();
            thrdtwo.Join();     

           // this.SetText(mShell.Expect(pattern));
            if (clientopen == false) break;
        }

       // MessageBox.Show("Appengine stopped");

    }

    private void startthread2()
    {

        //Wait for answer
        while (mStatus == false)
        {

        }

    }

    //Recieves keypressevent
    public void checkforenter(object sender, System.Windows.Forms.KeyPressEventArgs e)
    {
        if (e.KeyChar == (char)13)
        {

            mStatus = true;
            mString = txtInput.Text;
            mShell.WriteLine(mString);
            this.SetText(mShell.Expect(pattern));
            txtOutput.AppendText(txtInput.Text + "\n");
        }

        mStatus = false;
    }

    private void SetText(string text)
    {
        // InvokeRequired required compares the thread ID of the
        // calling thread to the thread ID of the creating thread.
        // If these threads are different, it returns true.
        if (this.txtOutput.InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(SetText);
            this.Invoke(d, new object[] { text });
        }
        else
        {
            this.txtOutput.Text = text.ToString();
        }
    }

    public int checkfortrue()
    {

        if (mInputHolder != true)
        {
            mValue = 0;
        }
        if (mInputHolder == false)
        {
            mValue = -1;
        }
        return mValue;
    }

    public string userInput()
    {
        while (mInputHolder == true)
        {

        }
        mInputHolder = true;
        return txtInput.Text;
    }
    //Properties
    public string Host
    {
        get
        {
            return txthost.Text;
        }
        set
        {
            txthost.Text = value;
        }

    }

    public string User
    {
        get
        {
            return txtuser.Text;
        }
        set
        {
            txtuser.Text = value;
        }

    }

    public string Pass
    {
        get
        {
            return txtpass.Text;
        }
        set
        {
            txtpass.Text = value;
        }

    }

    public string Pattern
    {
        get
        {
            return pattern;
        }

        set
        {
            pattern = value;
        }

    }

    private void button2_Click(object sender, EventArgs e)
    {
        clientopen = false;
    }

}

} 
```

# java - 多插座设计建议 (Android)

> ID：10888035
> 
> 赞同：0
> 
> 时间：2012-06-04T20:39:01.287
> 
> 标签：java, android, service, android-activity

我正在想办法实现一个应用程序：

- 打开 x 数量的套接字（用户指定）
- 每个套接字可以在应用程序的生命周期内保持打开状态并继续在后台运行
- 创建相同布局的多个活动，每个活动将用于显示从套接字接收的信息。

目前我有一个从一个套接字发送/接收的实现。服务在后台运行以继续处理来自套接字的信息，然后将其发送到活动。但是，我目前的思路让我相信，我需要为每个打开的套接字提供一项服务才能继续在后台处理它。我对Android相当陌生，所以一些澄清会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:08:54.503

我将实现一个管理所有套接字连接的服务。服务是在你的 AndroidManifest 中定义的，因此你不能运行多个相同类型的服务，你不能在运行时创建服务（因为你不能在运行时定义新的服务）。因此，您只能使用单一服务。这并不意味着您不能拥有代表与服务器的每个连接的类的多个实例。事实上，这正是我所推荐的，但这些实例不会是 Android 服务。

对于活动来说，它的东西是一样的。您不能真正同时创建 Activity 的多个实例。Android 使用了很多技巧让它看起来像这样，但实际上它要么总是与上次相同的实例，要么那个实例消失了，而这是一个新实例。但是，一次只有一个 Activity 实例。因此，您将不得不克服这些限制，但它们是为了您自己的利益而存在的，可以防止您使用大量内存。

现在，这意味着显示聊天会话的 Activity 必须灵活，以便可以通过应该显示的会话对其进行参数化。这可以通过 Intent 额外参数轻松完成。例如：

```
public void openSession( ChatSession session ) {
    Intent intent = new Intent( getContext(), ChatSessionActivity.class )
         .putExtra( ChatSessionActivity.PARAM_CHAT_SESSION_ID, session.getID() );
    startActivity( intent );
} 
```

这就是另一个 Activity 可能会将用户导航到 ChatSession 的方式，例如从聊天会话列表中进行选择。在您的活动中，您将查看传递给 onCreate() 的意图，并连接到服务，然后在服务中查询 ChatSession。您必须有一种机制来允许 ChatSessionActivity 向服务注册和注销自身以获取更新。这可以通过使用广播接收器、注册侦听器、消息等来实现。有很多选项。例如：

```
public void onServiceConnected() {
   ChatSession session = service.getSession( sessionId );
   session.setChatListener( this );
}

public void onStart() {
    if( service.isConnected() ) session.setChatListener(this);
}

public void onStop() {
   session.setChatListener( null );
} 
```

无论如何，这些只是关于如何构建程序的一些简单想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:50:47.090

我只会使用一项服务。请记住，即使您在服务中运行代码，您也需要在单独的线程/异步任务中执行所有与网络相关的操作，否则您最终会冻结 ui 线程。

如果我是你，我会看一下[java nio framework](http://rox-xmlrpc.sourceforge.net/niotut/)，它也可以在 android 中使用。它应该更容易打开/管理许多连接。

关于活动，我只会使用一种活动（我的意思是，一种活动类），根据它所指的连接进行区分。

最后，不要忘记您的手机资源有限。打开多个插座（此外，让它们在后台保持连接）可能会导致电池耗尽。

您应该警告用户您的应用程序将继续在后台运行，例如，每当您的应用程序在后台运行时，使用通知图标通知它。

# c# - 如何在 C# 中将 â€™ 转换为撇号？

> ID：10888040
> 
> 赞同：9
> 
> 时间：2012-06-04T20:39:23.940
> 
> 标签：c#

我尝试了几种 ASCII、Latin1、Windows-1252、UTF-8 和 Unicode 的组合来将 â€™ 转换为 C# 中的撇号，但无济于事。

```
byte[] uBytes = Encoding.Unicode.GetBytes(questionString);
byte[] utf8Bytes = Encoding.Convert(Encoding.Unicode, Encoding.UTF8, uBytes);
string converted = Encoding.UTF8.GetString(utf8Bytes); 
```

我正在使用这个转换表来发现每个代码应该是什么：[http ://www.i18nqa.com/debug/utf8-debug.html](http://www.i18nqa.com/debug/utf8-debug.html)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-04T20:49:02.760

[尝试](https://compilify.net/1sq)以下操作：

```
var bytes = Encoding.Default.GetBytes("â€™");
var text = Encoding.UTF8.GetString(bytes);
Console.WriteLine(text); 
```

# java - 应用程序具有上下文根“/”的 URL 中的 Geronimo 双斜杠“//”

> ID：10888042
> 
> 赞同：3
> 
> 时间：2012-06-04T20:39:52.020
> 
> 标签：java, geronimo

我正在使用 Geronimo 2.2.1 版。我正在尝试部署一个`war`-file 并将其上下文根设置为`/`in `geronimo-web.xml`。

现在每次我浏览我的应用程序时，所有的 url 都会用双斜杠重写。

例子：

```
http://mydomain:8080//login.jsp
http://mydomain:8080//home.html 
```

如何更改配置以便只出现一个斜杠。我发现了类似的问题，但似乎都没有答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:37:06.420

这是 Geronimo 2.2.1 的一个已知问题。[您可以在Geronimo 问题 6171](https://issues.apache.org/jira/browse/GERONIMO-6171)中查看详细信息。

该问题已得到修复，并将成为下一个版本的一部分。我已经使用 Geronimo 2.2.2 的最新快照验证了一切正常。

# exception - 简单的 IPython 示例在 sys.exit() 上引发异常

> ID：10888045
> 
> 赞同：17
> 
> 时间：2012-06-04T20:40:12.410
> 
> 标签：exception, pyqt4, exit, ipython, pyside

我正在 IPython 中做一些非常简单的 PySide（和 PyQt）教程。一个教程只是创建了一个带有一些滑块的窗口来演示插槽和信号。

当我关闭正在运行的演示应用程序的窗口时，我看到了这个错误：

```
An exception has occurred, use %tb to see the full traceback.
SystemExit: 0
To exit: use 'exit', 'quit', or Ctrl-D. 
```

所以我运行 %tb 并得到这个：

```
SystemExit                                Traceback (most recent call last)
/Workspaces/scratch/<ipython-input-1-88966dcfb499> in <module>()
     33 
     34 if __name__ == "__main__":
---> 35     main()

/Workspaces/scratch/<ipython-input-1-88966dcfb499> in main()
     29         w.show()
     30         app.exec_()
---> 31         sys.exit(0)
     32 
     33 

SystemExit: 0 
```

如果我再次尝试执行我的代码，我会得到：

```
RuntimeError: A QApplication instance already exists. 
```

如果有帮助，这里是我的代码：

```
from PySide.QtCore import *
from PySide.QtGui import *
import sys

class MyWindow(QWidget):
    def __init__(self):
        QWidget.__init__(self, None)

        vbox = QVBoxLayout(self)

        self.slider1 = QSlider(Qt.Horizontal)
        self.slider1.setRange(0, 99)
        self.slider1.setValue(0)
        vbox.addWidget(self.slider1)

        self.slider2 = QSlider(Qt.Horizontal)
        self.slider2.setRange(0, 99)
        self.slider2.setValue(99)
        vbox.addWidget(self.slider2)

        self.slider1.valueChanged.connect(self.slider2Changed)

    def slider2Changed(self, position):
        self.slider2.setValue(self.slider2.maximum() - position)

def main():
        app = QApplication(sys.argv)
        w = MyWindow()
        w.show()
        app.exec_()
        sys.exit(0)

if __name__ == "__main__":
    main() 
```

使用 python 运行代码时我没有错误：

```
python myexample.py 
```

仅当我在 IPython（包括笔记本或 qtconsole 或常规 ipython 终端）中运行代码时才会发生此错误。

更新：我的主要问题是我无法快速轻松地再次运行该应用程序。如果我尝试再次运行我的代码，我会得到：

```
RuntimeError: A QApplication instance already exists. 
```

这扼杀了 IPython 的快速、交互性 :(

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-05T15:47:29.617

这个答案要感谢 ipython-users 邮件列表中的 Matthias BUSSONNIER。

> 当我关闭正在运行的演示应用程序的窗口时，我看到了这个错误：发生了异常，使用 %tb 查看完整的回溯。系统退出：0

只是不要使用 sys.exit(0) ，因为您没有退出 python，但仍在运行 IPython。

如果您希望从（真实）命令行运行您的应用程序并具有返回状态，请将其添加回来。

> 如果我再次尝试执行我的代码，我会得到：
> RuntimeError: A QApplication instance already exists。

这是他们“不会修复”的 PySide 错误，因为他们不认为这是一个错误。

请参阅[https://github.com/ipython/ipython/issues/1124](https://github.com/ipython/ipython/issues/1124)）
和[http://bugs.pyside.org/show_bug.cgi?id=855](http://bugs.pyside.org/show_bug.cgi?id=855)

> QApplication 只能有一个实例，退出应用程序显然不被认为是足够删除对象的理由......

您可以从上述问题中使用此代码：

```
app=QtGui.QApplication.instance() # checks if QApplication already exists 
if not app: # create QApplication if it doesnt exist 
     app = QtGui.QApplication(sys.argv) 
```

对于我目前的需求，这是一个足够的解决方案。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-29T19:13:24.230

您需要做的是使 QApplication 稍后被删除，如下所示：

```
app = QApplication(sys.argv)
app.aboutToQuit.connect(app.deleteLater) 
```

使用此代码，您可以在 IPython 或其他任何地方多次重新运行应用程序，并且每次关闭 qt 应用程序时，该对象将在 python 中删除。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-04T21:45:56.280

`sys.exit`只是提出`SystemExit`终止interperter。

ipython`SysExit`在以交互模式执行脚本时会捕获，因此这实际上不是错误，但 ipython 的一个功能确实避免了交互式解释器在执行脚本时被关闭，因为这不是您通常在交互式会话中想要的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-05-25T16:15:20.633

根据[https://github.com/spyder-ide/spyder/issues/4639](https://github.com/spyder-ide/spyder/issues/4639)，

首先，检查实例是否已经存在，然后分配它，或者创建一个新实例：

```
if not QApplication.instance():
    app = QApplication(sys.argv)
else:
    app = QApplication.instance() 
```

（此片段摘自@NotSoBrainy 的答案。）

然后，在`show()`方法之后：

```
QtWidgets.QApplication.setQuitOnLastWindowClosed(True)
app.exec_()
app.quit() 
```

没有必要`sys.exit()`。

这解决了我的问题，这是完全相同的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-03T21:54:25.413

检查是否已经存在 QApplication 的实例，因为当实例已经在运行并且您正在尝试创建新实例时会发生错误。

```
if not QtWidgets.QApplication.instance():
    app = QtWidgets.QApplication(sys.argv)
else:
    app = QtWidgets.QApplication.instance() 
```

# ios - 应用分发系统查询

> ID：10888049
> 
> 赞同：1
> 
> 时间：2012-06-04T20:40:52.730
> 
> 标签：ios, version, distribution

我对通过应用商店的应用分发系统有疑问。

我在应用商店有一个应用程序，它与不同位置的不同客户端服务器交互。它的功能类似于 1.0 版 iphone 应用程序将能够与 1.0 版客户端-服务器正确交互。现在的问题是我的客户中很少有人迟到/不愿意升级他们的 iphone 用户连接的服务器。一旦我为我的 iphone 应用程序发布更新（比如 2.0），很少有客户端服务器仍在运行 1.0 版本。如果这些客户端的最终用户为他的 iphone 应用程序安装了更新 (2.0)（在不知不觉中，他要连接的客户端服务器仍然在 1.0 上），他会使他的应用程序无法使用。如何处理这些类型的场景？

我可以在升级自己之前开发与服务器交互的应用程序的新更新，或者我可以开发一些在服务器版本不匹配时自动回滚更新的东西吗？

请建议如何处理这个问题！

非常感谢您的建议。

非常感谢，马努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:01:39.337

你不能做你提到的任何事情。应用商店指南禁止从应用中删除功能（也就是与 1.0 的兼容性），但他们对此相当宽容。无论如何，不​​支持客户端/服务器软件的最新旧版本是一种糟糕的用户体验。

大多数人会在他们的“新功能”文本的开头放置一个很大的警告，例如“警告：此版本不适用于服务器应用程序版本 1.0”。如果该人费心阅读它，这有点有效，但是它有点粗糙。

无论如何，应用程序的版本 2 不应该简单地崩溃 -`UIAlertView`如果他们的服务器版本与客户端不兼容，您应该通过 a 提供反馈。

此外，您的服务器版本 2 应该继续发送版本 1 可以解析的响应，或者发送回您通过 a 向用户显示的错误消息，`UIAlertView`告诉他们他们需要更新应用程序。

# java - GSON/Jackson - 如何解析变量类型数组的数组

> ID：10888051
> 
> 赞同：0
> 
> 时间：2012-06-04T20:40:58.683
> 
> 标签：java, json, jackson, gson

我有一个 JSON 看起来像：

```
{"response":[[215,{TypeA},{TypeA},...,{TypeA}],[{TypeB},{TypeB},...,{TypeB}]]}; 
```

215是一个整数，每次响应的变化，并不重要。TypeA、TypeB 是我应用的一些类。我如何解析 JSON 以获取 TypeA/B[] 或 List？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:53:43.497

好的，在这里找到了杰克逊的解决方案[http://programmerbruce.blogspot.com/2011/05/deserialize-json-with-jackson-into.html](http://programmerbruce.blogspot.com/2011/05/deserialize-json-with-jackson-into.html)

# objective-c - ARC 中未调用 UIButton 选择器

> ID：10888055
> 
> 赞同：0
> 
> 时间：2012-06-04T20:41:22.263
> 
> 标签：objective-c, uibutton, automatic-ref-counting, selector

我有两个类，一个`View`和一个`ViewController.`创建`View`一个按钮如下：

```
_button = [[UIButton alloc] initWithFrame:CGRectMake(50, 0, buttonImage.size.width, buttonImage.size.height)];
[_button setImage:buttonImage forState:UIControlStateNormal];
[_button setImage:[UIImage imageNamed:@"btn_learn_focus_pad"] forState:UIControlEventTouchUpInside];
[_button addTarget:self action:nil forControlEvents:UIControlEventTouchUpInside];
[_someView addSubview:_button]; 
```

在中`ViewController`，我在中实例化视图后`loadView`，添加一个选择器如下：

```
[view.button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

选择器没有被调用。我试图`NSLog`在`ViewController`按钮的位置，它打印出一个零。我怀疑 ARC 正在释放按钮。`_button`但是，是一个`strong`指针 ( `@property`)。所以我不确定为什么会这样。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:44:03.897

您没有使用由属性合成生成的正确 getter/setter 方法。如果您只是将第一行更改为：

```
self.button = [[UIButton alloc] initWithFrame:CGRectMake(50, 0, buttonImage.size.width, buttonImage.size.height)]; 
```

它将正确保留指针

# python - 从 Python 中捕获音频

> ID：10888058
> 
> 赞同：0
> 
> 时间：2012-06-04T20:41:27.750
> 
> 标签：python, audio, ubuntu

我想使用 Python 从音频中捕获原始数据。在 Python 文档中，似乎使用 ossaudiodev 可以达到此目的。但是，我使用的是没有 /dev/dsp 的 Ubuntu 11.10：

```
>>> import ossaudiodev
>>> ossaudiodev.open('r');
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 2] No such file or directory: '/dev/dsp' 
```

有没有人知道如何使用 Python 捕获我的声卡输出的声音？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:56:02.327

OSS 是用于 Linux 的较旧且已弃用的音频系统。当前的标准是使用 ALSA，并使用 JACK 或 PulseAudio 在 ALSA 之上分层。Ubuntu 使用 PulseAudio。

您可以做的最好的事情是找到用于连接到 PulseAudio 的良好 Python 绑定。我刚刚在 Google 上进行了快速搜索，没有找到任何适合您的信息，而且我现在没有时间跟进更多信息。

编辑：我只记得 ALSA 确实有 OSS 兼容模式。您也许可以安装 OSS 兼容性的东西，然后只需使用您已有的 Python 代码。

[https://help.ubuntu.com/community/alsa-oss](https://help.ubuntu.com/community/alsa-oss)

[http://www.alsa-project.org/main/index.php/Main_Page](http://www.alsa-project.org/main/index.php/Main_Page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:06:36.127

我有需要`/dev/dsp`使用的程序

```
aoss <PROGRAM NAME AND ARGUMENTS HERE> 
```

如果你`aoss`在 Ubuntu 的命令行上输入，它会告诉你要安装的包，然后应该安装所需的依赖项。如果它不能立即工作，您可以尝试加载内核模块，例如`sudo modprobe snd_mixer_oss`.

# macos - 在 MacOsX 上安装 cmake 2.8.8 时找不到 Firebreath Cmake

> ID：10888061
> 
> 赞同：1
> 
> 时间：2012-06-04T20:41:35.187
> 
> 标签：macos, cmake, kinect, firebreath

尝试使用以下命令行构建 xcode 项目时：./firebreath/prepmac.sh projects/build/

我得到： 在中使用项目：/Users/uwecerron/Desktop/Node/projects 在中生成构建文件：/Users/uwecerron/Desktop/Node/build 注意：/Users/uwecerron/Desktop/Node/build 中的构建文件不*应该*直接修改。在 cmake 中进行更改并重新运行此脚本。~/Desktop/Node/build ~/Desktop/Node ./firebreath/prepmac.sh：第 10 行：cmake：找不到命令 CMake 失败。请检查错误信息

没有错误消息，我安装了 cmake 2.8-8。关于做什么的任何建议？这是一个使用 depthjs 的 kinect 项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T06:04:48.133

When you installed cmake it would have ask you if you wanted to install the command line links; you probably accidentally told it not to. Install cmake again and tell it to install the command-line links and it should work fine.

# php - 我的查询有问题吗？

> ID：10888063
> 
> 赞同：2
> 
> 时间：2012-06-04T20:41:57.363
> 
> 标签：php, mysql, sql, database

我正在开发一个包含 3 个表的数据库，其中一些表的信息重叠。用户可以通过我正在创建的 Web 应用程序更新每个表中的一些列。但是……有一个问题。不知道它是什么，但我的更新没有发生。我想知道我的查询是否有问题。（其实经过调试，我是相当肯定有的）。

```
 if (empty($errors)) {   
    $query1 = "UPDATE owner SET
            name = '{$name}'
        WHERE ownerId= '{$ownerId}'";
    $query1_result = mysql_query($query1);
    if (mysql_affected_rows()==1) { 
        $query2 = "UPDATE queue_acl SET
                    date_expires = '{$date_expires}' 
                WHERE user_id='{$ownerId}'";
        $query2_result = mysql_query($query2);
        if (mysql_affected_rows()==2) {
            $query3 = "UPDATE ownerOrganization SET
                    orgId = {$orgId}
                WHERE ownerId = '{$ownerId}'";
            $query3_result = mysql_query($query3);
            if (mysql_affected_rows()==3) {
                    $_SESSION['name'] = $name;
                    $_SESSION['updates_occurred'] = true;
            }
        }
    } 
```

对不起，如果它是微不足道的；我以前从未使用过多个表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:59:24.137

以您的方式更新表格不是一个好习惯。如果更新以某种方式相关，您可能需要考虑创建事务。事务确保执行所有更新（如果没有，则完成回滚（这意味着不会执行更新））：

```
// disable autocommit 
mysqli_autocommit($dblink, FALSE);

// queries
$query1 = mysqli_query($dblink, "UPDATE owner SET name = '{$name}' WHERE ownerId= {$ownerId}'");
$query2 = mysqli_query($dblink, "UPDATE queue_acl SET date_expires = '{$date_expires}' WHERE user_id='{$ownerId}'");
$query3 = mysqli_query($dblink, "UPDATE ownerOrganization SET orgId = {$orgId} WHERE ownerId = '{$ownerId}'");

if($query1 && $query2 && $query3)
{
   mysqli_commit($dblink);
   $_SESSION['name'] = $name;
   $_SESSION['updates_occurred'] = true;
}
else
   mysqli_rollback($dblink); 
```

我还没有测试过它，但它猜它应该可以工作。您还应该查看 mysqli 或准备好的语句，因为 mysql_ 已弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:25:15.493

第一个问题可能与范围有关。你的 if 条件错误？

```
If (result ==1)
{
  if(result == 2)
  { 
   ...
  }
} 
```

因此，如果您的第一个结果大于 1，则将跳过所有内部条件。

如果我理解它应该是：

```
if(result ==1)
{
}
elseif(result ==2)
{
}
...(other conditions)...
else
{ 
} 
```

如果您的结果超出预期，我会推荐一个基本案例来捕捉。

第二个问题可能是您引用了除 orgId = {$orgId} 之外的所有数据。这可能应该是 orgId = '{$orgId}' 如果 id 是一些随机字符串，那么不引用会导致问题。

最后一个问题是检查 ownerId。如果由于某种原因它是空白的，那么您的查询将失败，因为 id=0 （假设您启用了自动增量）永远不会是真的。放置一个 if(!empty(ownerId) 条件。

# objective-c - 如何在透明 NSWindow 中区分 mouseDown 事件和 mouseDragged

> ID：10888065
> 
> 赞同：1
> 
> 时间：2012-06-04T20:42:01.550
> 
> 标签：objective-c, xcode, macos, transparent, nswindow

我有一个透明`NSWindow`的，里面有一个简单的图标，可以在屏幕上拖动。
我的代码是：
.h：

```
@interface CustomView : NSWindow{
}

@property (assign) NSPoint initialLocation; 
```

.m

```
@synthesize initialLocation;

- (id) initWithContentRect: (NSRect) contentRect
                 styleMask: (NSUInteger) aStyle
                   backing: (NSBackingStoreType) bufferingType
                     defer: (BOOL) flag{
    if (![super initWithContentRect: contentRect 
                          styleMask: NSBorderlessWindowMask 
                            backing: bufferingType 
                              defer: flag]) return nil;
    [self setBackgroundColor: [NSColor clearColor]];
    [self setOpaque:NO];
    [NSApp activateIgnoringOtherApps:YES];
    return self;
}

- (void)mouseDragged:(NSEvent *)theEvent {
    NSRect screenVisibleFrame = [[NSScreen mainScreen] visibleFrame];
    NSRect windowFrame = [self frame];
    NSPoint newOrigin = windowFrame.origin;

    // Get the mouse location in window coordinates.
    NSPoint currentLocation = [theEvent locationInWindow];
    // Update the origin with the difference between the new mouse location and the old mouse location.
    newOrigin.x += (currentLocation.x - initialLocation.x);
    newOrigin.y += (currentLocation.y - initialLocation.y);

    // Don't let window get dragged up under the menu bar
    if ((newOrigin.y + windowFrame.size.height) > (screenVisibleFrame.origin.y + screenVisibleFrame.size.height)) {
        newOrigin.y = screenVisibleFrame.origin.y + (screenVisibleFrame.size.height - windowFrame.size.height);
    }

    // Move the window to the new location
    [self setFrameOrigin:newOrigin];
}

- (void)mouseDown:(NSEvent *)theEvent {    
    // Get the mouse location in window coordinates.
    self.initialLocation = [theEvent locationInWindow];
} 
```

我想`NSPopover`在用户单击透明窗口的图像时显示。但是，正如您在代码中看到的那样，该`mouseDown`事件用于获取鼠标位置（上面的代码取自示例）。
当用户单击图标只是为了拖动它或只是单击它来显示时，我该怎么做才能知道`NSPopover`？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T02:24:14.940

这是在您需要它以开始操作之后接收定义事件的经典情况。具体来说，直到拖动开始之后，您才能知道 mouseDown 是否是拖动的开始。但是，如果没有开始拖动，您希望对该 mouseDown 采取行动。

在 iOS 中（我意识到这与这里的代码没有直接关系，但它是指导性的），有一个完整的 API 围绕让 iOS 尝试为您做出这些决定而构建。整个手势系统是基于这样一种想法，即用户开始做某事可能是许多不同动作之一，因此需要随着时间的推移而解决，可能导致在跟踪期间取消动作。

在 OS X 上，我们没有很多系统可以帮助解决这个问题，所以如果你有一些需要不同地处理点击和拖动的东西，你需要推迟你的下一个动作，直到一个保护时间过去，如果通过，您可以执行原始操作。在这种情况下，您可能需要执行以下操作：

在 中`mouseDown`，开始一个`NSTimer`适当的保护时间（不要太长以至于人们会不小心移动指针，也不要太短以至于你会在用户拖动之前触发）以便稍后回调你以触发弹出框。

在 中`mouseDragged`，使用一个警戒区域来确保如果用户只是稍微抽搐，它不会算作拖拽。这可能很烦人，因为有时需要将某些东西拖得比开始拖动所需的距离要远，因此您需要在某个地方找到一个神奇的常数，或者进行一些实验。当超出警戒区域时，然后通过取消`NSTimer`with开始您的合法拖动操作`[timer invalidate]`并进行拖动。

在计时器的回调中，显示您的弹出框。如果用户拖动，`NSTimer`则将无效，导致它不会触发，因此不会显示弹出框。

# java - 带有 Maven 和 Eclipse 的 Java 动态 Web 项目

> ID：10888068
> 
> 赞同：29
> 
> 时间：2012-06-04T20:42:10.373
> 
> 标签：java, eclipse, jakarta-ee, maven, junit

我有几个关于使用 Maven 和 Eclipse 创建 Java Web 应用程序的问题：

*   如何使用 Maven 创建包含 servlet、jsp 和其他类的 Java Web 项目？
*   它创建了一个简单的目录结构，src->main->java。我在哪里以及如何放置 web-inf 文件夹？
*   我是否需要手动将 jdbc-drivers 添加到 web-inf/lib 内的文件夹中，或者只是指出依赖关系就可以了吗？
*   有没有办法用junit测试servlet？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-06-05T00:07:04.200

哇，这一次有很多问题。我承认使用 Maven 和 Eclipse 建立一个 webapp 项目可能会很棘手，所以我将尝试全部回答。

## 使用 Maven 创建 Web 应用程序项目

> 如何使用 servlets jsp 和其他带有 maven 的类创建 java web 项目？它创建了一个简单的目录结构，src->main->java。

创建 Java Web 项目时，最终产品应该是 WAR 或 EAR 文件。WAR 和 EAR 文件是具有特定结构的 JAR 文件，可以部署在应用程序服务器或 servlet 容器中。

如前所述，为 Web 应用程序设置 Maven 项目的最简单方法是使用原型：

```
mvn archetype:generate -DarchetypeArtifactId=maven-archetype-webapp 
```

如果我们用这个原型创建一个项目，那么就会生成一个简单的目录结构和 pom.xml。该项目遵循您提到的标准 Maven 目录布局，带有`/src/main/java/`,`/src/test/java`等。Maven 从此结构生成 WAR 文件，目标为 war:war。

请注意，此原型适用于非常简单（过时）的 Web 应用程序，但它是最好的可用起点。您可能希望放弃 web.xml 文件并创建一个支持 Servlet 3.0 的新文件。

## WEB-INF 位置

> 我在哪里以及如何放置 web-inf 文件夹？

默认情况下，Maven 期望应该进入 WAR 文件根目录的资源——例如图像、html 页面和 WEB-INF 目录——驻留在`/src/main/webapp/`. **所以 WEB-INF 文件夹应该位于`/src/main/webapp/WEB-INF/`.** 如果您使用 maven-archetype-webapp，则会自动创建此目录以及示例 web.xml 文件。

## Eclipse 集成

您在问题标题中提到了 Eclipse，确实可以使用 m2eclipse 插件在 Eclipse 中开发 Mavenized Web 应用程序。Eclipse 通过 WTP（Web 工具平台）对 Web 应用程序有很好的支持。

尽管 Internet 上的许多指南（错误地）推荐它，但**您不应该使用 mvn eclipse:eclipse 命令来创建 Eclipse 项目**。这个插件只能为非常旧的 Eclipse 版本生成 WTP 项目（WTP 2.0 是最大值）。[相反，请使用此处](http://www.tech-juice.org/2012/05/13/hello-world-with-jsf-2-0-glassfish-3-maven-svn-and-eclipse/#Install_Eclipse_Plugins)描述的 m2eclipse 插件。

## 依赖项

> 我是否需要手动将 jdbc-drivers 添加到 web-inf/lib 内的文件夹中，或者只是指出依赖关系就可以了吗？

无需手动执行此操作，因为 Maven 的主要优势之一是依赖管理。如果你在 pom.xml 中添加一个范围为*compile*或*runtime*的依赖项，JAR 文件将自动包含在`WEB-INF/lib/`WAR 文件的目录中。例如，要添加 Postgresql JDBC 驱动程序依赖项，请将其添加到您的 pom.xml：

```
<dependency>
    <groupId>postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <version>9.1-901.jdbc4</version>
</dependency> 
```

由于未指定范围，Maven 将假定它在默认范围内*compile*。结果是 Maven 将包含`WEB-INF/lib/postgresql-9.1-901.jdbc4.jar`在 WAR 文件中。

## 测试

> 有没有办法用junit测试servlet？

在 Stackoverflow 上已经提出（并回答）了这个问题：

*   [对 Java servlet 进行单元测试](https://stackoverflow.com/questions/90907/unit-testing-a-java-servlet)
*   [单元测试 servlet](https://stackoverflow.com/questions/53532/unit-testing-servlets)

## 参考

*   [带有 JSF 2.0、Glassfish 3、Maven、SVN 和 Eclipse 的 Hello World。](https://web.archive.org/web/20121110081713/http://www.tech-juice.org/2012/05/13/hello-world-with-jsf-2-0-glassfish-3-maven-svn-and-eclipse)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-04T20:50:15.353

您应该基于 webapp Maven 原型创建一个项目，而不是您使用的默认项目。

我正在使用 SpringSource Tool Suite，在本练习中，它与带有 m2e 的 Eclipse 相同。创建一个新的 Maven 项目并确保选择以下原型：

![在此处输入图像描述](../Images/17d096f17f154fe4d2c4136ca93a4a91.png)

Maven 执行此操作的命令行方式是：

```
mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-webapp -DarchetypeArtifactId=maven-archetype-webapp 
```

此原型会将 WEB-INF 文件夹放在正确的位置（在 src/main/webapp 下）。

[您可以在http://maven.apache.org/guides/mini/guide-webapp.html](http://maven.apache.org/guides/mini/guide-webapp.html)找到更多信息

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-03-21T17:08:10.030

只需创建一个普通的“动态 Web 项目”。然后右键单击项目名称并选择配置 > 转换为 Maven 项目。完成转换最多可能需要一分钟，因此请耐心等待。请参阅以下文章：

[http://aykutakin.wordpress.com/2013/12/04/create-eclipse-dynamic-web-project-with-maven-2/](http://aykutakin.wordpress.com/2013/12/04/create-eclipse-dynamic-web-project-with-maven-2/)

如果这不起作用，请尝试以下操作：

[http://crunchify.com/how-to-create-dynamic-web-project-using-maven-in-eclipse/](http://crunchify.com/how-to-create-dynamic-web-project-using-maven-in-eclipse/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-04T09:49:38.230

*   第 1 步：创建您的 Web 应用程序文件夹。
*   第 2 步：在命令提示符下移动到该文件夹​​。
*   第 3 步：使用以下命令：

mvn archetype:generate -DgroupId=com.helloworld -DartifactId=HelloWorldDemo -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false

**DarchetypeArtifactId=maven-archetype-webapp**将创建一个 maven web 项目。

*   第 4 步：现在在命令提示符下进入项目文件夹并使用以下命令： `mvn eclipse:eclipse -Dwtpversion=2.0`使您的项目成为 eclipse 的动态 Web 项目，现在将这个新创建的项目导入为“ **Ëxisting project** ”

使用eclipse 的**m2eclipse 插件**在 eclipe 中启用 MAVEN。

**Web.xml**将位于**\src\main\webapp\WEB-INF**

# jquery - 防止 UI 由于 ajax 调用而冻结

> ID：10888069
> 
> 赞同：1
> 
> 时间：2012-06-04T20:42:12.183
> 
> 标签：jquery, ajax

[https://github.com/DjangoCoder/DjangoGUI/blob/master/templates/base.html](https://github.com/DjangoCoder/DjangoGUI/blob/master/templates/base.html)第 192、193、196、197、199 和 205 行的注释掉的代码冻结了 UI。我几乎无法使用我的文本编辑器。我想取消注释这些行。有没有办法在不冻结 UI 的情况下这样做？该网站位于

```
http://198.144.178.112:8000 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:48:09.093

您需要将 async 设置为 true。这就是 async 参数的目的是允许在浏览器继续执行其余代码时在后台发生这种情况。

编辑：对不起，这里有更多信息。

从第 173 行开始，您应该将 ajax 函数初始化中的 async 参数更改为 true。像这样：

```
function testConnection() {
    $.ajax({
        url: "/",
        cache: false,
        async : true,
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            $('#errorbar').css({'height': ($('#header').height()) + 'px'}).show();
        },
        success: function(html){
            $('#errorbar').hide();
        }
    });
} 
```

# sql - 从 SQL Server 2008 中的多个文件一次更改或创建多个存储过程

> ID：10888070
> 
> 赞同：1
> 
> 时间：2012-06-04T20:42:19.353
> 
> 标签：sql, sql-server, tsql, sql-server-2008

我有大量存储过程，我经常更新它们，然后转移到另一台服务器上的重复数据库。我一直在 SQL Server Management Studio 2008 中打开每个“storedproc.sql”文件，然后在工具栏中选择“执行”，这将创建或更改现有的存储过程。我一直在为每个存储过程这样做。

我正在寻找一个脚本（或其他方式），它允许我将数据库上的所有存储过程更改为一次位于文件夹中的存储过程。我基本上是在寻找一个脚本，它会执行类似于下面的伪代码的操作。

```
USE [DatabaseName]
UPDATE [StoredProcName]
   USING [directory\file\path\fileName.sql]
UPDATE [StoredProcNameN]
   USING [directory\file\path\fileNameN.sql
… 
```

不是最干净的伪代码，但希望你能理解这个想法。我什至愿意删除所有存储过程（基于名称），然后在数据库上再次创建相同的存储过程。如果您需要更多清晰度，请随时发表评论，我提前感谢您。

进一步说明：

我正在更改 SSRS 转换项目的每个报告存储过程。开发报表后，我将报表和存储过程移至服务器。然后，我必须针对重复的数据库手动运行（ALTER 或 CREATE）每个存储过程，以便数据库现在能够支持服务器上的报告。到目前为止这还不算太麻烦，但我最终会有 65 到 85 个存储过程；如果我必须为每个字段添加一个数据集字段，那么我将不得不手动运行每个字段以更新重复的数据库。

我想要做的是有一个 SQL 脚本，上面写着：对于这个数据库，ALTER/CREATE 这个命名的存储过程，你可以在这个文件夹中找到包含详细信息的 .sql 文本文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:55:56.843

这是我用来将所有存储过程从一个数据库移动到另一个数据库的一些代码：

```
DECLARE @SPBody nvarchar(max);
DECLARE @SPName nvarchar(4000);
DECLARE @SPCursor CURSOR;
SET @SPCursor = CURSOR FOR
    SELECT ao.name, sm.definition
    FROM <SOURCE DATABASE>.sys.all_objects ao JOIN
         <SOURCE DATABASE>.sys.sql_modules sm
         ON sm.object_id = ao.object_id
    WHERE ao.type = 'P' and SCHEMA_NAME(ao.schema_id) = 'dbo'
    order by 1;

OPEN @SPCursor;

FETCH NEXT FROM @SPCursor INTO @SPName, @SPBody;
WHILE @@FETCH_STATUS = 0
BEGIN
    if exists(select * from <DESTINATION DATABASE>.INFORMATION_SCHEMA.Routines r where r.ROUTINE_NAME = @SPName)
    BEGIN
        SET @query = N'DROP PROCEDURE '+@SPName;
        exec <DESTINATION DATABASE>..sp_executesql @query;
    END;
    BEGIN TRY
        exec <DESTINATION DATABASE>..sp_executesql @SPBody;
    END TRY
    BEGIN CATCH
        select @ErrMsg = 'Error creating '+@SPName+': "'+Error_Message()+'" ('+@SPBody+')';
        --exec sp__LogInfo @ProcName, @ErrMsg, @ProductionRunId;
    END CATCH;
    FETCH NEXT FROM @SPCursor INTO @SPName, @SPBody;
END; 
```

您需要适当地输入和输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T03:12:06.127

**[以供参考](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds.mspx?mfr=true)**

```
c:\>for %f in (*.sql) do sqlcmd /S <servername> /d <dbname> /E /i "%f" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:13:26.170

我建议保存所有`if exists(...) drop procedure`以该`create procedure`部分开头的存储过程脚本文件。`go`根据您的需要，可以选择在末尾添加一个声明。

然后，您可以使用工具将所有文件连接到一个脚本文件中。

我为此使用了一个自定义工具，它允许我定义依赖顺序、指定批处理分隔符、脚本类型、包含文件夹等。一些文本编辑器，如[UltraEdit](http://www.ultraedit.com/)具有此功能。

您还可以使用[Microsoft 数据库项目](http://msdn.microsoft.com/en-us/library/xee70aty.aspx)来选择一批脚本文件，并针对存储在项目中的一个或多个数据库连接执行它们。这是一个很好的起点，不需要任何额外的软件，但在项目中添加和管理文件夹和文件可能会有点麻烦。

使用诸如[RedGate 的 SQL 比较之](http://www.red-gate.com/products/sql-development/sql-compare)类的模式比较工具对于同步两个数据库的模式和/或对象很有用。不过，我不建议将其用作最佳实践部署或“推广到生产”工具。

# javascript - 在提示中单击确定

> ID：10888074
> 
> 赞同：1
> 
> 时间：2012-06-04T20:42:43.080
> 
> 标签：javascript, alert, confirm

我知道如何*创建*警报和确认框，但我不知道如何做的是实际单击 OK。我有一个弹出确认框的页面。 **我**想使用 Java Script 插件点击 OK。基本上，我希望我的代码单击页面上的链接，然后在出现提示时单击确定。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T20:44:50.550

这在浏览器弹出窗口中是不可能的。

但是，如果它是位于页面 DOM 中的模态对话框，那么您可以触发 JavaScript 事件来关闭它。这种对话框的一个例子是[jQuery 的 dialog](http://docs.jquery.com/UI/Dialog)。

# ruby-on-rails - 在 Rails 中使用 high_voltage gem 创建文件夹结构

> ID：10888076
> 
> 赞同：1
> 
> 时间：2012-06-04T20:42:49.460
> 
> 标签：ruby-on-rails, ruby, routing

我正在尝试使用[high_voltage](https://github.com/thoughtbot/high_voltage) gem 在我的 Rails 应用程序中提供静态页面。我想要的是让各个部分获得自己的文件夹，但不能完全让它工作并且无法在网络上找到解决方案。

**我想要的是：**

RAILS_ROOT/app/views/pages/(page) 被路由为 '/(page)'
而 RAILS_ROOT/app/views/pages/(directory)/(page) => '/(directory)/(page)'

**这是我的尝试：**

路线.rb：

```
Cam4::Application.routes.draw do

  root :to => 'high_voltage/pages#show', :id => 'index'
  match '/:id' => 'high_voltage/pages#show', :as => :static, :via => :get

  scope "ruby" do
    match '/ruby/:id' => 'high_voltage/pages/ruby#show', :as => :static, :via => :get
  end

end 
```

非常感谢，

卡梅伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:21:32.837

实际上最终使用路由匹配解决了我自己的问题。给定一个运行 high_voltage 的 Rails 3.2.5 应用程序，带有视图路径：

> RAILS_ROOT/app/views/pages/id **[=> '/pages/id' 或只是 '/id']**
> RAILS_ROOT/app/views/pages/ruby/id **[=> 'pages/ruby/id' 或 'ruby/ ID']**

路线.rb：

```
Cam4::Application.routes.draw do

  root :to => 'high_voltage/pages#show', :id => 'index'
  match '/*id' => 'high_voltage/pages#show', :as => :static, :via => :get

end 
```

# c# - C# 套接字与管道

> ID：10888077
> 
> 赞同：12
> 
> 时间：2012-06-04T20:42:51.613
> 
> 标签：c#, winapi, sockets, network-programming, named-pipes

目前我正在 Windows 上开发一个多进程桌面应用程序。此应用程序将是一个收缩包装的应用程序，将部署在世界各地的客户端机器上。虽然我们可以为机器制定广泛的规格 - 例如带有 .Net 4.0 CF 的 Windows XP SP3，但我们无法控制它们并且我们不能对它们的配置过于具体 - 例如我们不能指定机器必须具有支持 cuda 1.4 的图形处理器等等

其中一些进程是托管的（.Net 4.0），而其他进程是非托管的（C++ Win32）。进程需要共享数据。我迄今为止评估的选项是

*   Tcp 套接字
*   命名管道

管道的性能似乎稍好一些，但对于我们的需要 - 两者的性能都是可以接受的。套接字为我们提供了未来跨越机器（和操作系统——我们希望最终支持非微软操作系统）边界的灵活性，因此我们更喜欢使用套接字。

但是 - 我主要担心的是 - 如果我们使用 Tcp 套接字 - 我们可能会遇到防火墙问题吗？是否有其他人部署了使用 TCP 进行 IPC 的桌面应用程序/程序并遇到问题？如果是这样 - 什么样的？

我知道这是一个相当开放的问题，我很乐意重新措辞。但我真的很想知道我们可能会遇到什么样的潜在问题。

**编辑：**为了更亮一点——我们只传输一些 POD、整数、浮点数和字符串。我们已经建立了一个抽象层，它提供了两种范式——请求/响应和订阅。传输层已经被抽象出来，目前我们有两种实现方式——基于管道的和基于 TCP 的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T20:55:06.500

管道的性能在快速 LAN 上通常更好，但 TCP 在较慢的网络或 WAN 上通常更好。请参阅下面的 msdn 点。

TPC 也更具可配置性。关于防火墙，它们允许您打开/关闭通信端口。如果这不是一个选项或问题，替代方案将是 http（REST/json、Web 服务、xml rpc 等），但您必须考虑 http 开销是否可以接受。确保您使用真实世界的数据集进行尝试（在测试中传递琐碎的数据会使开销看起来不合理，这对于真实世界的数据集来说是非常合理的）。

来自[msdn](https://technet.microsoft.com/en-us/library/ms187892(v=sql.105).aspx?f=255&mspperror=-2147217396#Anchor_4)的其他一些信息：

> 在快速局域网 (LAN) 环境中，传输控制协议/Internet 协议 (TCP/IP) 套接字和命名管道客户端在性能方面具有可比性。但是，TCP/IP 套接字和命名管道客户端之间的性能差异在较慢的网络中变得明显，例如跨广域网 (WAN) 或拨号网络。这是因为进程间通信 (IPC) 机制在对等点之间进行通信的方式不同。
> 
> 对于命名管道，网络通信通常更具交互性。一个对等点不会发送数据，直到另一个对等点使用读取命令请求它。网络读取通常涉及一系列 peek 命名管道消息，然后才开始读取数据。在慢速网络中，这些成本可能非常高，并导致网络流量过多，进而影响其他网络客户端。
> 
> 澄清您是在谈论本地管道还是网络管道也很重要。如果服务器应用程序在运行 Microsoft® SQL Server™ 2000 实例的计算机上本地运行，则可以选择本地命名管道协议。本地命名管道在内核模式下运行并且速度非常快。
> 
> 对于 TCP/IP 套接字，数据传输更加流畅，开销也更少。数据传输还可以利用 TCP/IP 套接字性能增强机制，例如窗口化、延迟确认等，这在慢速网络中非常有用。根据应用程序的类型，这种性能差异可能很大。
> 
> TCP/IP 套接字还支持积压队列，与在您尝试连接到 SQL Server 时可能导致管道繁忙错误的命名管道相比，它可以提供有限的平滑效果。
> 
> **> 一般来说，在速度较慢的 LAN、WAN 或拨号网络中，套接字是首选，而当网络速度不是问题时，命名管道可能是更好的选择，因为它提供了更多的功能、易用性和配置选项。**
> 
> 有关 TCP/IP 的详细信息，请参阅 Microsoft Windows NT® 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T21:16:03.300

如果您需要[模拟命名管道客户端的安全凭证](http://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeserverstream.runasclient.aspx)，那么实际上只有一种选择 :) 命名管道也有更好的名称（尽管 DNS SRV 记录也可以为 TCP 端口提供这些名称）。

否则，差别不大。两者都将数据视为字节流，让您自己负责查找消息边界。命名管道具有为您保留消息边界的附加选项，但请注意，您必须在消息模式下创建管道并显式设置读取模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T12:09:28.393

如果我正确理解您的要求，您需要*在同一台计算机上运行的*进程之间进行通信。这些进程可能都在交互登录的用户的相同安全上下文中运行。

在这种情况下，我应该提到解决方案的不同方面。一个问题是在应用程序之间*共享*数据。另一个问题是协议，它定义了如何访问和修改公共数据以及进程之间的*通信*如何发生。例如，您可以让一个进程*提供*数据，而另一个进程*订阅*数据。另一种情况：您可以拥有所有应用程序都可以读取或修改的公共数据，您只需确保没有人同时修改共享数据，或者在另一个修改数据时没有人访问数据。当然，它可能是许多其他不同的通信场景。

在这方面，我会建议您在问题中未包含的其他两个选项：

*   **使用内存映射文件**（请参见[此处](http://msdn.microsoft.com/en-us/library/ms810613.aspx)和[此处](http://msdn.microsoft.com/en-us/library/dd997372.aspx)）
*   **COM接口的使用**

这两种方式都可以在 .NET 和非托管 C++ 中很好地实现。从性能的角度来看，使用内存映射文件是最好的方法。如果您创建不与某些物理文件关联的视图，您将只有可在进程之间使用的公共内存。您可以另外使用 Mutex 或 Event 来控制多个应用程序不会同时使用内存。

在最简单的场景中，您甚至可以使用C++ 中的[#pragma data_seg](http://msdn.microsoft.com/en-us/library/thfhx4st%28v=vs.90%29.aspx)将一些数据放置在 DLL 的命名部分中，并使用[/SECTION](http://msdn.microsoft.com/en-us/library/sf9b18xk%28v=vs.90%29.aspx)选项（如`/SECTION:.MYSEC,RWS`）使数据*共享*。您可以在所有 .NET 应用程序和所有非托管 C++ 应用程序中使用 DLL 来访问公共数据。在这种方式下，您将拥有访问公共数据的简单方法。

如果您需要一些更复杂的*通信场景*，那么在 C++/.NET 中使用 COM 接口的方法可能是最佳选择。如果我向您推荐[这篇文章，该文章](http://www.codeproject.com/Articles/12579/Building-COM-Servers-in-NET)逐步描述了如何仅在 .NET 中使用 COM 接口实现 Primary Interop Assembly，并在 .NET 和 C++ COM 中使用它进行通信。

# iphone - iPhone 应用程序随机崩溃，没有任何错误或堆栈跟踪

> ID：10888080
> 
> 赞同：4
> 
> 时间：2012-06-04T20:43:05.137
> 
> 标签：iphone, objective-c, ios, xcode, memory-leaks

我刚来这地方 。抱歉，如果我重复这个问题，但我的问题与其他问题略有不同。

我的应用程序在一定时间间隔后随机崩溃，没有任何错误日志或堆栈跟踪。我怀疑是内存问题。我有以下问题：

> 1.）如何获取堆栈跟踪（我尝试过启用 NSZombie 和 NSUnacughtExcpetion 处理程序）但没有奏效
> 
> 2.) 我的应用程序中经常收到内存警告。我如何确认它是否是上述问题的主要嫌疑人？（我使用过 Leaks，我的应用程序在使用 4Mb 时崩溃，所以我不太确定内存泄漏是否导致我的应用程序崩溃。我知道某些应用程序占用的堆内存超过 4MB。）
> 
> 3.) 在应用程序崩溃之前，iOS 中应用程序的内存泄漏上限是多少？
> 
> 4.) ARC 在这种情况下会帮助我吗？

此外，我尝试使用 NSLog 语句调试问题，但由于它随机崩溃，我很难使用这种技术检测根本原因。

任何想法或帮助将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T22:00:50.630

> 我的应用程序在一定时间间隔后随机崩溃，没有任何错误日志或堆栈跟踪。我怀疑是内存问题。

要确认这是内存问题，请将您的设备与 iTunes 同步，然后查找名称中`~/Library/Logs/CrashReporter/MobileDevice/`包含的文件`LowMemory`。如果您`(jettisoned)`在应用名称旁边看到，则表明它已被 iOS 杀死，因为它使用了过多的内存。

应用程序在不留下崩溃报告的情况下退出的唯一另一种方式是，如果它[错误地调用`exit()`](http://developer.apple.com/library/ios/qa/qa1561/)了.

有关详细信息，请参阅“[调试已部署的 iOS 应用程序](https://developer.apple.com/library/ios/qa/qa1747/)”和“[了解和分析 iOS 应用程序崩溃报告](https://developer.apple.com/library/ios/technotes/tn2151/)”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-08T12:06:39.690

不确定，但阅读寄存器可能会有所帮助。

首先使用左下角的 + 转到异常选项卡并“添加异常断点”。 ![在此处输入图像描述](../Images/35d59d2b8deac1c46fc8a63667f587cc.png)

然后当应用程序崩溃时，点击线程 1 下的“0 objc_exception_throw” ![在此处输入图像描述](../Images/3c515f7854106f41b7c074f799acb744.png)

最后在控制台输入：

*   寄存器读取（你应该得到一个寄存器列表）

*   po $rax （通常例外在 'rax' 中）

    （您应该在控制台上看到异常输出）

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T21:10:59.677

听起来确实可能设备内存不足并关闭了您。stackoverflow 上有很多关于调试内存警告的线程。

这一篇谈到了[使用 Instruments 工具时要寻找的](https://stackoverflow.com/a/6085952/119114)内容。

这里解释了如何[获得内存警告级别，以及代码的含义。](https://stackoverflow.com/a/2915477/119114)

iPhone 没有固定的内存限制。我已经向 Apple 支持代表询问了这个问题，但他们不会给我一个固定的答案（可能是因为该算法实际上并未对第 3 方应用程序实施任何硬性限制）。

而且，是的，ARC 可以是一件很棒的事情。在您的情况下，您可能需要重新编写大量代码以使其全部符合 ARC，但 ARC 绝对是一个有用的功能，并且可以生成内存问题更少的程序，并且编码人员的工作量更少（让您有更多时间解决其他问题！）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T20:55:09.503

我推荐仪器 [https://developer.apple.com/library/mac/#documentation/developertools/conceptual/InstrumentsUserGuide/AboutTracing/AboutTracing.html](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/InstrumentsUserGuide/AboutTracing/AboutTracing.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-16T20:13:59.353

在我的情况下，我关闭了所有其他应用程序并开始正​​常工作，可能是内存问题

# spring - 具有自定义 ViewScope 的托管 bean

> ID：10888084
> 
> 赞同：1
> 
> 时间：2012-06-04T20:43:18.860
> 
> 标签：spring, jsf-2, view-scope

我正在使用 Spring 3.1.0.RELEASE、JSF 2.x、JPA 2 和 Hibernate Provider 做一个 Web 应用程序。我使用 PrettyFaces 3.3.2 作为友好的 URL。该应用程序在 Tomcat 6.35 上运行。

我想使用 Jsf ViewScope 所以我决定按照网上找到的实现：http: [//comdynamics.net/blog/109/spring3-jsf2-view-scope/](http://comdynamics.net/blog/109/spring3-jsf2-view-scope/)

```
public class ViewScope implements Scope {

    private static final Logger logger = LoggerFactory.getLogger(ViewScope.class);

    @Override
    public Object get(String name, ObjectFactory objectFactory) {
        final Map<String, Object> viewMap = FacesContext.getCurrentInstance().getViewRoot().getViewMap();

        Object instance = viewMap.get(name);
        if (instance == null) {
            instance = objectFactory.getObject();
            viewMap.put(name, instance);
        }
        return instance;
    }

    @Override
    public Object remove(String name) {
        logger.debug("ViewScope::remove {}", name);
        return FacesContext.getCurrentInstance().getViewRoot().getViewMap().remove(name);
    }

    @Override
    public String getConversationId() {
        return null;
    }

    @Override
    public void registerDestructionCallback(String name, Runnable callback) {
        //Not supported
    }

    @Override
    public Object resolveContextualObject(String key) {
        return null;
    }
} 
```

我注意到`@PreDestroy`没有像显示这个问题那样调用它们[@PreDestroy 从未调用过 @ViewScoped](https://stackoverflow.com/questions/6368840/predestroy-never-called-on-viewscoped)。

**这是否意味着带有 ViewScope 的托管 bean 永远不会破坏？这导致内存泄漏。我们应该这样使用这个范围吗？**

**它只发生在 Spring 或 Mojarra 上的自定义 Viewscope 上？**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:28:42.090

问题是视图范围的不正确实现。它创建了 Spring bean `objectFactory.getObject();`，但从不销毁它。

要解决它 -[检查](https://github.com/michail-nikolaev/primefaces-spring-scopes/blob/master/primefaces-scopes-test/src/main/java/org/nkey/primefaces/scopes/test/spring/scope/ViewScope.java)支持`registerDestructionCallback`.

[BWT，当前的 Mojjara 实现也](https://stackoverflow.com/questions/6368840/predestroy-never-called-on-viewscoped)不会调用`@PreDestory`您的 bean 。但它至少会释放 bean 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T17:13:00.400

我尝试使用 spring 自定义视图范围解决 Jsf 视图范围 bean 内存泄漏问题。它适用于 Jsf 2.1 和 2.2。试试下面链接中的代码。 [ViewScoped bean 的内存泄漏？](https://stackoverflow.com/questions/12182844/memory-leak-with-viewscoped-bean)

# c# - 实体框架：复合键的字段不能为空？

> ID：10888087
> 
> 赞同：20
> 
> 时间：2012-06-04T20:43:34.797
> 
> 标签：c#, asp.net-mvc-3, entity-framework, ef-code-first

我有一个带有复合键的模型 - 行是关键：

```
public class Item
{
    [Key, Column(Order = 0)]
    public int UserId { get; set; }
    [Key, Column(Order = 1)]
    public DateTime? Date { get; set; }
} 
```

运行下面的代码会引发异常`DbEntityValidationException`消息`The Date field is required.`：：

```
var it = new Item { Date = null, UserId = 2 };
m_Entities.Items.Add(it);
m_Entities.SaveChanges(); // throws exception 
```

（`m_Entities`通常是`DbContext`定义为 Items 的后代）如果可以（声明为`DbSet<Item>`）为什么是必需的？以及如何允许成为有效值？`Date``null``DateTime?``null``Date`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T21:36:47.487

拉斐尔的回答引导我进行另一次搜索。这是不可能的原因（Cobsy 的回答）：

[复合主键中的可为空列有什么问题？](https://stackoverflow.com/questions/386040/whats-wrong-with-nullable-columns-in-composite-primary-keys)

简而言之： `NULL == NULL`-> false

奇怪。我的解决方案是将 Id 列添加到模型中。

顺便说一句：MySQL 允许我不定义主键，然后我可以拥有这样的模式 - EF 抱怨没有定义键:-(。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T21:15:53.260

对于主键的任何部分，Sql Server 或 Oracle 都不可能。

但是你可以对这些数据有一个独特的约束。

这意味着你可以有一次

```
UserId = 2, Date = null 
```

然后

```
UserId = 2, Date = <NOT NULL> 
```

您无法使用 Code First 直接创建唯一约束，但请查看 SMO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:52:40.277

这不可能。每个 RDBMS 要求是，主键不能为空。

# sql - 外键中的空值

> ID：10888089
> 
> 赞同：2
> 
> 时间：2012-06-04T20:43:40.660
> 
> 标签：sql, sql-server, null, foreign-keys, referential-integrity

[我从http://msdn.microsoft.com/en-us/library/ms175464(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms175464%28v=sql.105%29.aspx)复制了以下段落

> FOREIGN KEY 约束可以包含空值；但是，如果复合 FOREIGN KEY 约束的任何列包含空值，则会跳过对构成 FOREIGN KEY 约束的所有值的验证。要确保验证复合 FOREIGN KEY 约束的所有值，请在所有参与列上指定 NOT NULL。

有人可以为我提供一个简单的例子来帮助我理解上述内容吗？外键约束会做什么验证？我认为这与参照完整性有关。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:53:12.583

如果您以另一种方式考虑它，则不需要示例。

如果复合外键中的*任何*字段是，则在提供该键的*所有*`NULL`字段之前，不会检查其他字段的完整性。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:54:06.470

就是说，如果您有一个使用下面两列的复合外键，则不会强制执行该关系（因为 Name`NULL`用于 OtherId 2）。

```
OtherId  Name
-------  -------
1        Abe
2        NULL
3        Jim
4        Bob 
```

由于未强制执行关系，因此您无法强制执行参照完整性。如果您指定任何一个列都不能有空值，那么您将永远不会遇到这种情况，并且将保持参照完整性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T20:53:03.263

这是一个例子：

```
create table t1 (id1 int, id2 int,
    constraint PK_T1 primary key (id1, id2))
create table t2 (id1 int, id2 int)

insert t2 values (1,null)

alter table t2 add constraint FK_T2_T1 foreign key (id1, id2) references t1(id1, id2) 
```

最后一行应该会导致错误。毕竟，`t1`是空的，所以单行`t2`不可能引用任何东西。但是因为其中一列包含一个`null`值，所以会跳过验证。*

# mysql - Mysql Myisam 重新使用已删除的自动递增 id

> ID：10888090
> 
> 赞同：2
> 
> 时间：2012-06-04T20:43:56.067
> 
> 标签：mysql, primary-key, auto-increment, myisam

我有一张桌子：测试

id int(10) 自动递增名称 char(36)

现在让我们说我从 ID 1000 => 最大唯一 ID 号填充的整个表。ID 1 - 1000 = 之前已删除。

问题1；mysql 会重新使用这些删除的 id 吗？问题2; 如果没有，我该如何进行自动增量或任何重用表中不存在的唯一标识符？

我问的原因是我的表将包含很多条目，并且很多条目将一直被删除。当我在使用自动增量时“用完 ID”时会发生什么？

感谢您对此的任何启发:)

-汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:04:52.023

1.  > mysql 会重新使用这些删除的 id 吗？

    开始时，它通过查找现有记录的最大值（并加 1）`mysqld`来确定每列的下一个值。`AUTO_INCREMENT`因此，如果删除最高值的记录并重新启动服务器，删除的 id 确实会被重用。

    否则，只有在您手动更改下一个值时才会重用`AUTO_INCREMENT`值（*不*推荐这样做，因为它不是并发安全的）：

    ```
    ALTER TABLE foo AUTO_INCREMENT = 12345; 
    ```

2.  > 如果没有，我该如何进行自动增量或任何重用表中不存在的唯一标识符？

    一般来说，你不会：考虑重新设计你的数据结构，以便插入/删除不会以这种方式发生，或者使用更大的整数类型（`BIGINT UNSIGNED`是 8 个字节，所以可以达到 2^64 或 ~10^19 ）。

3.  > 当我在使用自动增量时“用完 ID”时会发生什么？

    如[手册](http://dev.mysql.com/doc/en/example-auto-increment.html)所述：

    > `AUTO_INCREMENT`对足够大的列使用最小的整数数据类型，以容纳您需要的最大序列值。当列达到数据类型的上限时，下一次生成序列号的尝试失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:49:57.703

1.  不，MySQL 不会重用已删除记录中的 ID
2.  你真的需要吗？如果您的自动增量列的类型是 BIGINT，那么您有 18446744073709551615 个可能的 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:46:59.937

你需要重置自动增量，自动增量只是不断增加，如果你不设置它至少不会回去。

```
alter table tablename auto_increment=value 
```

像这样

```
mysql> alter table t1 auto_increment=200;
Query OK, 202 rows affected (0.04 sec)
Records: 202  Duplicates: 0  Warnings: 0 
```

编辑：如果你删除一些记录，auto_increment 将是“最后一个值+1”，不管你做什么，只有当你删除整个表时，你才能“重新开始”。

最好使用触发器，但触发器不能更改表（[http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)）

所以你的最后一个选择是存储过程，看看这里：[Is it possible to alter a table in mySql via stored procedures？](https://stackoverflow.com/questions/547804/is-it-possible-to-alter-a-table-in-mysql-via-stored-procedures)

不建议这样做。

# opengl - Understanding DirectX and OpenGL

> ID：10888092
> 
> 赞同：-2
> 
> 时间：2012-06-04T20:44:11.403
> 
> 标签：opengl, 3d, directx

I don't exactly get the concept. Are they a set of api's to a library that accesses the hardware. If so is it possible for someone to create a brand new api like opengl and directx?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:18:37.647

The purpose of graphics API like OpenGL or DirectX is to provide a single graphics API to use across a wide range of hardware. In fact, a large portion of these APIs are actually implemented in the graphics drivers. If you were to design your own graphics API you would either have to make it run on almost entirely on the CPU ("in software") or to write special code for each type of graphics card you wanted to support.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:51:46.897

> is it possible for someone to create a brand new api like opengl and directx?

Yep. Just create a new [Gallium](http://en.wikipedia.org/wiki/Gallium3D) state tracker.

# java - JavaFX Scene Builder 在 Linux 支持上可用吗？

> ID：10888095
> 
> 赞同：6
> 
> 时间：2012-06-04T20:44:33.453
> 
> 标签：java, linux, netbeans, javafx-2, scenebuilder

[我在 Oracle 官方网站http://www.oracle.com/technetwork/java/javafx/overview/index.html](http://www.oracle.com/technetwork/java/javafx/overview/index.html)上找不到 JavaFX 场景构建器 Linux 包， 有什么解决方案可以让我在 Linux 上工作平台？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-15T19:05:46.597

MAC OS 版本也适用于 Linux，因为 SceneBuilder 主要是 100% 纯 Java。从这里下载 MacOS DMG 文件：[http ://www.oracle.com/technetwork/java/javafx/downloads/index.html](http://www.oracle.com/technetwork/java/javafx/downloads/index.html)

然后用 7-zip 解压。它是一个压缩的 HFS 文件系统。

```
$ mkdir javafx_scenebuilder
$ 7z e -ojavafx_scenebuilder javafx_scenebuilder-1_0-macosx-universal.dmg 
```

现在解压 HFS 分区：

```
$ cd javafx_scenebuilder
$ 7z x 4.hfs 
```

这将提取大量文件。您只需要“JavaFX Scene Builder 1.0/JavaFX Scene Builder 1.0.app/Contents/Java”。您可以删除所有其他文件。启动场景构建器：

```
$ cd "JavaFX Scene Builder 1.0/JavaFX Scene Builder 1.0.app/Contents/Java"
$ java -cp javafx-beans-dt.jar:javafx-designtime.jar:jfxrt.jar:SceneBuilder.jar com.oracle.javafx.authoring.Main 
```

开始说有关“ClassNotFoundException：com.sun.prism.es2.gl.x11.X11GLFactory”的内容时会出现异常，但无论如何它都会起作用。

请注意，您需要 JDK7u6 才能运行它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-01T17:50:57.073

现在有[适用于 Linux 的 SceneBuilder 的官方开发者预览版](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)。

[发行说明、安装说明和已知错误](http://docs.oracle.com/javafx/scenebuilder/1/release_notes_1-1/jsbpub-release_notes_1-1.htm)。

此预览版废弃了之前问题中发布的巧妙解决方法，以在 Linux 上使用 Wine 或 Mac OS X 版本的 SceneBuilder。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-08T10:59:57.350

是的。查看 JavaFX 场景生成器。

[开发者预览版下载](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-04T21:11:41.140

是的，你是对的，不幸的是，还没有可用的 Linux 版本。

我今年早些时候在 JavaFX 论坛上问过，你可以在这里找到 Jeff McDonald 的答案：

[https://forums.oracle.com/forums/thread.jspa?threadID=2369765&start=15&tstart=0](https://forums.oracle.com/forums/thread.jspa?threadID=2369765&start=15&tstart=0)

所以我认为你有两个选择：

*   手动编辑 FXML 文件
*   使用安装了 Scence Builder 支持的操作系统的虚拟机，并使用它来编辑 FXML 文件。（例如，您可以在 Linux 主机和来宾之间共享一个目录，并将其余的开发保留在 Linux 上。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-02T22:16:10.440

我有在 linux 上工作的场景构建器。1\. 获得 MacOS 版本（.dmg 文件） 2\. 提取 .jar 文件 3\. 创建正确的目录结构 4\. 创建执行正确命令的脚本 5\. win

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-08T07:17:47.720

在正式支持 Linux 之前，我使用的一种选择是通过 Wine 安装 Windows 版本的 Scene Builder。

# sql - 连接表和多个值的 SQL 查询

> ID：10888097
> 
> 赞同：11
> 
> 时间：2012-06-04T20:44:40.937
> 
> 标签：sql, postgresql, join

因此，我的问题涉及三个表，两个常规表和一个连接表，其中一个有很多并且属于很多关系。它们看起来像这样：

```
table1
--id
--data

table2
--id
--data

table1_table2
--table1_id
--table2_id 
```

所以，我的问题是我将如何查询（使用连接）对于 table1 中的一个项目在 table1_table2 中具有一个或多个值的东西。例如：

```
Table 1
+----------+
|id | data |
+----------+
|1  | none |
+----------+
|4  | match|
+----------+

Table 2
+----------+
|id | data |
+----------+
|1  | one  |
+----------+
|2  | two  |
+----------+

table1_table2
+----------------------+
|table1_id | table2_id |
+----------------------+
|1         | 1         |
+----------------------+
|4         | 1         |
+----------------------+
|4         | 2         |
+----------------------+ 
```

我需要一个与表 1 行 id 4 匹配的查询，因为它有一个通过连接到表 2 中的第 1 行和第 2 行的链接。如果这令人困惑，请提出任何问题。

也许我有点不清楚，我使用 table1_table2 作为连接而不是从。我需要确保它与表 2 中的 1 和 2 匹配。

到目前为止，这是我的查询...

```
SELECT DISTINCT table1.id,
table2.data

FROM table1

LEFT JOIN table1_table2 ON table1.id = table1_table2.table1_id
LEFT JOIN table2 ON table2.id = table1_table2.table2_id 
```

我需要一个可以使表 1 中的条目匹配表 2 中的 1 和 2 的位置。

我正在寻找的输出是：

```
+---------------------+
|table1.id|table2.data|
+---------------------+
|4        |one        |
+---------------------+
|4        |two        |
+---------------------+ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T21:59:20.977

如果您可以保证 Table1_Table2 表中没有重复项，则以下方法有效。也许你可以从这里开始，稍微细化一下。注意 JOIN 条件是如何工作的——将 IN 放在连接条件中与将 IN 条件放在 WHERE 子句中的工作方式不同。

我已经使用哈希标记来表示您需要将代码插入 SQL 中的值。

```
SELECT Table1.id, COUNT(Table1_Table2.Table2_id)
FROM Table1
JOIN Table1_Table2 ON (Table1_Table2.Table1_id = Table1.id
                   AND Table1_Table2.Table2_id IN (#somelist#))
GROUP BY Table1.id
HAVING COUNT(Table1_Table2.Table2_id) = (#length of somelist#) 
```

糟糕——你已经按照我建议的方式改变了你的问题，我忽略了你的编辑。但这应该可以帮助您入门，因为它会返回您感兴趣的所有 Table1 id。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T21:21:42.260

这是我的解决方案。它不是很笼统。如果此解决方案不起作用，您应该发表评论，因为它太具体到您的情况。

```
SELECT DISTINCT Table1.id
FROM Table1
INNER JOIN table1_table2 a ON (table1.id = table1_table2.table1_id
                           AND table2.id = 1)
INNER JOIN table1_table2 b ON (table1.id = table1_table2.table1_id
                           AND table2.id = 2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T22:20:17.003

如果我在 SQL Server 中执行此操作，我会将您要检查的值放入临时表（或表变量）中，然后使用 @ChrisCunningham 所说的变体。

```
CREATE TABLE #temp (Id INT)
INSERT INTO #temp 
VALUES (1, 3, 7)

SELECT a.id AS table1ID, table2.data
FROM
(
       SELECT Table1.id, Table1_Table2.table2_id 
  FROM Table1 JOIN Table1_Table2 
         ON (Table1_Table2.Table1_id = Table1.id                    
  AND Table1_Table2.Table2_id IN (SELECT Id FROM #temp)) 
  GROUP BY Table1.id 
  HAVING COUNT(Table1_Table2.Table2_id) = (SELECT count (*) FROM #temp) 
      ) a
JOIN Table2 ON Table2.id = a.Table2_id 
```

当然，我不确定 Postgre 对临时表有什么机制，但您甚至可以将其设为存储过程，在其中使用某种拆分函数来创建临时表的值，而不是像我那样。但至少这可能会给你一个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T20:51:53.293

我认为你应该能够选择这个：

```
select table1_id, count(*) as count from table1_table2 group by table1_id having count > 2; 
```

分组，计数和拥有是你的朋友！

# ruby-on-rails - 如何在带有 MiniTest 的 Rails 3.2 中模拟“编辑”或“销毁”按钮？

> ID：10888098
> 
> 赞同：0
> 
> 时间：2012-06-04T20:44:43.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, bdd, minitest

如何编写用于编辑项目的集成测试？我的“创建”测试如下所示：

```
 it "lets a user create a product" do
    login_user
    click_link("Products")
    click_link("New")
    fill_in "Identifier", :with => "MyString"
    click_button "Create"
    assert page.has_content?("Product was successfully created")
  end 
```

这很好用。我感到困惑的是如何进行编辑和销毁测试。我的索引页面提供了所有产品的列表。所以首先我使用工厂来创建几​​个产品。现在我处于有多个“编辑”和“销毁”按钮的情况。我不能只说：

```
click_button "Destroy" 
```

因为有两个。我如何告诉它点击哪一个？

如果我确实点击了正确的“销毁”按钮，如何在弹出的 Javascript 窗口中点击“确定”按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:02:07.927

假设您使用的是 Webrat，您可以使用“内部”选择器。

Webrat "within" 方法将 CSS 选择器作为参数。假设您的“Destroy”按钮位于一个 id 为“#product-2”的 div 中，您可以使用以下命令隔离该按钮：

```
within "#product-2" do |scope|
  scope.click_button "Destroy"
end 
```

如果您需要/宁愿使用 XPath，您可以执行以下操作：

```
 response.should have_xpath(xpath) do |button|
   click_button(button)
 end 
```

或者，如果你使用 Capybara，那么你可以使用“find”方法：

```
find("#product-2").find("button").click
find(:xpath, "//div/div/button").click 
```

# linux - 如何在 LINUX 的另一个目录中选择性地创建指向特定文件的符号链接？

> ID：10888105
> 
> 赞同：3
> 
> 时间：2012-06-04T20:45:05.397
> 
> 标签：linux, bash, symlink

我不完全确定如何执行此操作，但我需要为一个目录中的某些文件创建符号链接，并将符号链接放在另一个目录中。

例如，我想链接当前目录 bar1 中名称中包含“foo”一词的所有文件，该文件没有扩展名为“.cc”，并将符号链接放在目录 bar2 中。

我想知道是否有单行命令可以在 LINUX bash 中完成此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:01:49.783

假设您位于包含目录`bar1`和的目录中`bar2`：

```
find bar1 -name '*foo*' -not -type d -not -name '*.cc' -exec ln -s $PWD/'{}' bar2/ \; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T21:04:09.030

试试这个：

```
cd bar1
find . -maxdepth 1 -name '*foo*' -not -name '*.cc'  -exec echo ln -s $PWD/{} ../bar2 \; 
```

一旦您对试运行感到满意，请`echo`从命令中删除并真正运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T21:06:41.610

这可以通过扩展通配符轻松处理：

```
shopt -s extglob
cd bar2
ln -s ../bar1/foo!(*.cc) . 
```

如果您真的希望将所有内容集中在一行上，只需使用命令分隔符：

```
shopt -s extglob; cd bar2; ln -s ../bar1/foo!(*.cc) . 
```

这两个例子是相同的，但第一个更容易阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T21:00:23.587

从技术上讲，这不算作单行答案……但它可以粘贴在一个实例中，并且应该可以满足您的需求。

```
list=`ls | grep foo | grep -v .cc`;for file in $list;do ln $file /bar2/;done 
```

# asp.net - ASP.NET 中的 HTML5 类型

> ID：10888110
> 
> 赞同：1
> 
> 时间：2012-06-04T20:45:37.183
> 
> 标签：asp.net, html, webforms

网站将专门用于移动设备。所以对于只需要数字输入的字段，我想调出数字键盘。我可以通过使用类型设置为的 html 输入元素成功地做到这一点`tel`。我想在`asp:RequiredFieldValidator`此字段中添加一个并基于[MSDN](http://msdn.microsoft.com/en-us/library/ms972961.aspx)。

我需要将输入设置为`runat="server"`. 当我这样做时，我得到了这个错误；

> `tel`不是输入标签的有效类型。

如果我删除`runat="server"`，我得到

> 找不到属性`Contract`引用的控件 ID`ControlToValidate``''`

这是我的代码：

```
<input type="tel" runat="server" id="Contract"></input>
<asp:RequiredFieldValidator runat="server" ControlToValidate="Contract" 
                            ValidationGroup="IfOnRent" Text="*" 
                            ErrorMessage="Contract Required">
</asp:RequiredFieldValidator> 
```

我只是运气不好，必须编写自己的验证代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:48:31.547

您可能希望在代码“front”中未声明“type”。您可以在后面的代码中设置它（可能在`Page_Init`or中`Page_Load`）：

```
this.Contract.Attributes.Add("type", "tel"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:31:45.360

如果您安装了 Microsoft .NET Framework 4 Reliability Update 1 (KB2533523)，则`TextBox`接受新的 html5 输入类型（您也需要它`UpdatePanel`来在回发时识别它们）。

或者您可以`HtmlInputText`在自己的控件中继承（任何 .net 版本 - 任何输入类型）：

```
[ToolboxData("<{0}:Input runat='server' />"), Themeable(true)]
public sealed class Input: HtmlInputText { } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-31T03:17:34.550

如果你使用 C#

```
Contract.Attributes["type"]="tel" 
```

为 html 输入编写内联类型可能会在 .net 中产生**解析错误。**所以在你的**PageLoad()中添加上面的代码行**

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-06T13:04:07.980

您可以使用确保提交按钮具有与 requiredfieldvalidator 相同的验证组属性值

# javascript - javascript 中的正则表达式 (^|\\?|&)

> ID：10888111
> 
> 赞同：0
> 
> 时间：2012-06-04T20:45:41.200
> 
> 标签：javascript, regex

你能帮我理解这个 javascript RegExp 吗：

```
cbreg = new RegExp('((^|\\?|&)' + cbkey + ')=([^&]+)')
// where cbkey is a string 
```

我对这`(^|\\?|&)`部分感到困惑。那意味着什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T20:49:34.770

首先，鉴于正则表达式是从字符串文字创建的，双反斜杠在生成的正则表达式中仅变成一个反斜杠（因为这就是转义在字符串文字中的工作方式）：

```
(^|\?|&) 
```

手段 OR ，`|`所以你有：

```
^    - start of line, or
\?   - a question mark, or
&    - an ampersand 
```

问号本身在正则表达式中具有特殊含义，但转义的问号与实际的问号匹配。

括号表示它在匹配正则表达式的下一部分之前匹配其中一个选项。如果没有括号，第三个选项将包括表达式的下一部分（无论在 中`cbkey`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:47:58.987

`|`意思是“或”。这意味着：（`^`行首） OR `?`OR `&`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T20:48:20.237

它表示 ( `|`) 字符串的开头 ( `^`)、文字问题（`\?`因为问号需要在正则表达式中转义，并且`\\?`因为反斜杠需要在字符串中转义）标记或 & 符号 ( `&`)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T20:48:16.253

它搜索必须以字符“？”开头（^ = 必须以）开头的块（括号表示块）或 (| = 或) 字符 '&'。

# python - 使用 Python 的 Google 搜索结果数量有限

> ID：10888115
> 
> 赞同：0
> 
> 时间：2012-06-04T20:45:54.443
> 
> 标签：python

我正在尝试从 python 进行自定义谷歌搜索。[我在developer.google.com](https://developers.google.com/web-search/docs/#fonje)找到了相关代码。

我的代码：

```
url = ('https://ajax.googleapis.com/ajax/services/search/web'
       '?v=1.0&q=teen%20wolf%20s02e01%20divxstage.eu&userip=USERS-IP-ADDRESS')

request = urllib2.Request(url, None, {'Referer': "http://www.my-ajax-site.com"})
response = urllib2.urlopen(request)

results = simplejson.load(response)
print results 
```

如您所见，我正在查询`Teen Wolf S02E01 divxstage.eu`. 上面的脚本返回了一个[json 响应](http://pastie.org/4027579)。

现在，当我简单地从浏览器中搜索时`Teen Wolf S02E01 divxstage.eu`，谷歌给我的第一个链接`divxstage.eu`就是我需要的网站链接。

现在，如果您仔细查看`json response`它不包含`divxstage.eu`链接，结果也是有限的。

所以，我的问题是为什么上述两种方法**的输出存在差异，**以及如何自定义查询以获得所需的`divxstage.eu`链接，即`www.divxstage.eu/video/6qihgxf1ejzx1`.

# r - ggplot：两组的相对频率

> ID：10888117
> 
> 赞同：6
> 
> 时间：2012-06-04T20:45:57.860
> 
> 标签：r, ggplot2

我想要这样的情节，除了每个方面的总和为 100%。现在组 M 是 0.05+0.25=0.30 而不是 0.20+0.80=1.00。

```
df <- rbind(
    data.frame(gender=c(rep('M',5)), outcome=c(rep('1',4),'0')),
    data.frame(gender=c(rep('F',10)), outcome=c(rep('1',7),rep('0',3)))
)

df

ggplot(df, aes(outcome)) +
    geom_bar(aes(y = (..count..)/sum(..count..))) +
    facet_wrap(~gender, nrow=2, ncol=1) 
```

（使用 y = ..density.. 会产生更差的结果。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-04T21:40:22.620

这是另一种方式

```
ggplot(df, aes(outcome)) +
    geom_bar(aes(y = ..count.. / sapply(PANEL, FUN=function(x) sum(count[PANEL == x])))) +
    facet_wrap(~gender, nrow=2, ncol=1) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-04T20:59:19.720

我通常通过简单地预先计算**ggplot2**之外的值并使用来做到这一点`stat = "identity"`：

```
df1 <- melt(ddply(df,.(gender),function(x){prop.table(table(x$outcome))}),id.vars = 1)

ggplot(df1, aes(x = variable,y = value)) +
    facet_wrap(~gender, nrow=2, ncol=1) +
    geom_bar(stat = "identity") 
```

# macos - 使用 Qt 在 OSX 上重命名 .app

> ID：10888118
> 
> 赞同：1
> 
> 时间：2012-06-04T20:46:03.930
> 
> 标签：macos, qt, rename

我正在编写一个从文件服务器下载文件的更新程序应用程序。以下是操作顺序：

1) 从服务器下载文件。

2）重命名现有的.app **（如何？）**

3）将下载的应用程序移动到适当的位置。

OSX 上是否有以编程方式重命名应用程序的最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:37:13.437

你试过`QDir::rename()`吗？

[http://qt-project.org/doc/qt-4.8/qdir.html#rename](http://qt-project.org/doc/qt-4.8/qdir.html#rename)

我主要是 Windows/Linux Qt 用户，所以我无法帮助您了解 OS X 的最佳实践。

# objective-c - RubyMotion 是否支持集成 Objective-C 代码？

> ID：10888124
> 
> 赞同：0
> 
> 时间：2012-06-04T20:46:37.053
> 
> 标签：objective-c, ios, rubymotion

已经在 Objective-C 中构建了大量的库/代码片段，RubyMotion 可以使用这些位而不用 Ruby 重写它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:43:34.090

有几种方法可以做到这一点。一种是将您的第 3 方代码出售到`vendor`目录中，然后使用`app.vendor_project`您的`Rakefile`. 有关示例，请参阅[使用第 3 方库。](http://www.rubymotion.com/developer-center/guides/project-management/#_using_3rd_party_libraries)

另一种选择是使用[Cocoapods](http://www.rubymotion.com/developer-center/articles/cocoapods/)。使用`motion-cocoapods`Ruby gem，您可以使用以下方式在[此处添加任何库](https://github.com/CocoaPods/Specs)：

```
app.pods do
  dependency 'JSONKit'
end 
```

# c++ - 如何知道两个 c++ 断点之间的代码汇编行的大小？

> ID：10888128
> 
> 赞同：2
> 
> 时间：2012-06-04T20:46:42.587
> 
> 标签：c++, eclipse, debugging, assembly

我正在eclipse下构建一个c++项目，为了执行缓存优化，我需要估计代码的一些热点是否适合缓存。我放了两个断点并触发了eclipse反汇编程序，但是通过这种方式手动计数代码看起来很难..

有什么更实用的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:56:11.617

让您的编译器发出汇编输出。请务必为发布版本执行此操作，因为它们通常与调试版本非常不同。然后，您可以手动分析输出，并查看您的代码需要多少内存。

您提到了 Eclipse，所以我假设您在谈论 Linux 下的 gcc，但 Windows 下的 MSVC 也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:57:08.027

一种快速估算的方法是减去地址，然后除以平均指令大小。在 x86 上，我会使用 4 个字节（您可以选择不同的数字）。

# c# - 使用 Silverlight 创建自定义控件 C# ASP.NET

> ID：10888129
> 
> 赞同：0
> 
> 时间：2012-06-04T20:46:45.090
> 
> 标签：c#, asp.net, silverlight

有几件事情是现成的。

*   我以前从未使用过 Silverlight。
*   我将在 VS2008（3.5 框架）中使用 Silverlight v3.0

我将使用它为当前不使用 Silverlight 的现有 C# Web 应用程序创建用户控件，但我不知道该怎么做。

我应该将 Silverlight 应用程序添加到当前项目吗？我是否将其作为自己的项目并稍后以某种方式导入？另外，在尝试这样的事情时我应该知道什么考虑/担心？

不太确定从哪里开始。任何指导将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:42:08.797

我之前在 Silverlight 中构建了一个自定义文件上传器，所以我可以给你一些提示。

1.  创建一个独立的 silverlight 项目

2.  上面的项目构建了一个 .xap 文件

3.  还会生成一个 TestPage.html。它包含对 Silverlight.js 的引用和在网页上承载控件的 <OBJECT> 标记。

4.  您可以使用它来确定承载 Silverlight 控件所需的 HTML。

5.  创建您自己的 ASP.net 项目，并创建一个生成所需 HTML 的控件。

6.  在自定义控件的分发中包含 .xap 文件和 silverlight.js 文件。

# java - 通过java确定窗口显示编号和/或布局

> ID：10888131
> 
> 赞同：3
> 
> 时间：2012-06-04T20:46:51.567
> 
> 标签：java, multiple-monitors

我有一个全屏 Java 应用程序，它将在 Windows 7 机器上的 8 监视器数字标牌类型显示器上运行。我需要能够在特定的物理监视器上显示内容。理想情况下，我希望在“显示属性”->“设置”中按 1-8 排序显示，但是许多拔出/插入和重新排序的尝试都未能通过“显示属性”->“设置”以任何确定的顺序显示物理监视器。我可以很好地重新排序它们，但是当我的 java 程序检索显示器上的信息时，它不在 Windows 配置它们的布局/顺序中。

GraphicsEnvironment ID 返回诸如 Device0 和 Device1 之类的字符串，但它们与在显示属性中看到的 Windows 显示编号不匹配。例如，如果布局是 7、4、1、2、3、4、5、6，我仍然会返回 Device0、Device1... 其中 Device0 对应于识别的屏幕 1（不是 7，它是左侧的第一个屏幕）。有没有办法查询操作系统以确定显示器的布局和/或其他一些技术来在特定的物理监视器上显示全屏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T00:36:22.797

您可以获得相对于大型虚拟桌面的屏幕边界：

```
GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
for (GraphicsDevice gd : ge.getScreenDevices()) {
    Rectangle bounds = gd.getDefaultConfiguration().getBounds();
    System.out.println(bounds.toString());
} 
```

对于我的设置，这给出了：

```
java.awt.Rectangle[x=0,y=0,width=1280,height=1024]
java.awt.Rectangle[x=1280,y=304,width=1280,height=720] 
```

您可以使用此信息来确定它们的顺序。例如，如果您绝对确定您的显示器在一个漂亮的网格中，您可以像这样在右上角的显示器上全屏显示：

```
GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
GraphicsDevice gdUpperRight = null;
Rectangle bUpperRight = null;
for (GraphicsDevice gd : ge.getScreenDevices()) {
    Rectangle b = gd.getDefaultConfiguration().getBounds();
    if (bUpperRight == null || b.x > bUpperRight.x || b.y > bUpperRight.y) {
        bUpperRight = b;
        gdUpperRight = gd;
    }
}

gdUpperRight.setFullScreenWindow(myFrame); 
```

# java - 使用与appengine服务器兼容的java为android客户端开发webservice（json格式）

> ID：10888135
> 
> 赞同：1
> 
> 时间：2012-06-04T20:47:18.517
> 
> 标签：java, android, json, web-services, google-app-engine

我正在开发一个使用 json webservice 的学生 android 应用程序。我想每天在我的 android 应用程序中填充学生新闻或事件。我可以构建我所有的客户端程序。

但我无法构建服务器端 web 服务。请给我一些要遵循的步骤来在服务器端构建我的 web 服务。

我的要求：

我想要一个可以输入学生新闻和事件的网络表单，并且应该存储在 webservice(json) 上。此网络服务必须与 appengine 兼容。请帮助我，我对我不搬工作感到震惊..

对不起我的英语不好。

提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:52:39.127

App Engine 在他们的网站上有一些非常好的教程，我建议从那里开始：

[https://developers.google.com/appengine/docs/java/gettingstarted/creating](https://developers.google.com/appengine/docs/java/gettingstarted/creating)

我只是创建一个简单的表单，您可以将其发布到 servlet。您不一定要发送 JSON 数据，发送 App Engine 标准 POST 或 GET 数据、解析它并用它做你想做的事情会更容易。如果您希望 android 应用程序接收 JSON 数据，我建议您查看 Jackson：

[http://jackson.codehaus.org/](http://jackson.codehaus.org/)

这个库将解析 java 对象并将它们作为 JSON 字符串返回，非常好。

祝你好运！

# r - 如何在 R 中跳过前几个主成分进行 PCA 图？

> ID：10888142
> 
> 赞同：0
> 
> 时间：2012-06-04T20:47:43.853
> 
> 标签：r, pca

我有一些数据要在其上进行 PCA 绘图。但是，前两个主成分完全是由于 3 个异常值样本（共 32 个），我想跳过这些，只从第 3 个开始绘制主成分。这是可能的，还是我必须做一些计算才能从数据中减去前两个主成分，然后绘制余数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T20:56:47.707

如果异常值在您的 pca 中占主导地位，并且您不希望这样，我强烈建议您在执行 pca 之前将其删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T21:45:07.283

去除异常值的另一种方法是通过用稳健的方法拟合 PCA 来降低它们的影响或影响。R 具有广泛的稳健统计方法。[请参阅CRAN 上的稳健任务视图](http://cran.r-project.org/web/views/Robust.html)中的“多变量分析”项目符号。

# javascript - Sencha Touch Uncaught typeError: undefined is not a function

> ID：10888143
> 
> 赞同：3
> 
> 时间：2012-06-04T20:47:49.513
> 
> 标签：javascript, extjs, syntax-error

我最近开始检查 Sencha Touch。在遵循那里的教程时，我遇到了一些我似乎无法解决的问题。

sencha 提供的 app.js 中的一些基本代码运行良好。其他人似乎得到了错误。例如：

```
new Ext.application({
name: "NotesApp",
launch: function() {
        console.log("App Launch");
    }
}); 
```

有了这个我得到一个： Uncaught typeError: undefined is not a function

如果我在开头没有 new 的情况下重写代码，例如：

```
Ext.application({
name: "NotesApp",
launch: function() {
        console.log("App Launch");
    }
}); 
```

我得到“未捕获的类型错误：对象＃没有方法'应用程序'”

第二种方式是我在查找煎茶时看到的到处都是，但它似乎给我带来了问题。任何人都可以帮助我理解我做错了什么。

谢谢你 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:09:02.397

看起来 Ext.Application 有一个大写字母 A。请记住，Javascript 区分大小写。

[http://docs.sencha.com/touch/1-1/#!/api/Ext.Application](http://docs.sencha.com/touch/1-1/#!/api/Ext.Application)

# c++ - 空类和空结构是如何编译的？

> ID：10888156
> 
> 赞同：7
> 
> 时间：2012-06-04T20:48:32.837
> 
> 标签：c++, visual-c++, gcc, compiler-construction, clang

C++ 标准是否规定了类和结构的编译布局？它们的编译方式有何不同，尤其是在它们为空的情况下？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T20:51:05.090

在某种程度上，它说它必须为其分配空间，除非在某些情况下将其用作基类*（称为空基类优化）*。这是为了保证不同的对象有不同的地址。

除了默认的访问说明符之外，它们的编译方式相同`struct`并且是相同的。`class`在**C++11中引入了***标准布局*类/结构的概念，并保证空类的内存布局相同。

# objective-c - 之后无法在 UIButton 上进行本地化

> ID：10888159
> 
> 赞同：4
> 
> 时间：2012-06-04T20:49:15.067
> 
> 标签：objective-c, storyboard, nslocalizedstring

我正在使用 NSLocalizedString 函数来更改 UIButton 的语言

```
reset.titleLabel.text=NSLocalizedString(@"Reset", nil); 
```

我把这条线放在`viewDiLoad`, `viewWillAppear`, `viewDidAppear`, `viewDidDisappear`and`viewWillDisappear`

当视图加载时，文本的本地化版本出现，当我单击按钮时，文本变回故事板中按钮上的原始文本，然后在加载以下视图之前再次返回本地化语言（即使是titlelable也不会在这些阶段改变值！）

我看到其中一个解决方案是拥有 Storyboard 的本地化版本，但我不想这样做，因为我必须维护所有本地化版本......还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T02:11:09.580

我建议使用`-setTitle:forState:`更改标题。通过手动更改`titleLabel.text`，您应该期望文本偶尔会被重置。大多数文档示例只显示操作字体大小等而不是内容，这是因为`titleLabel`设置`currentTitle` 为图像缓存已适当更新。

```
[reset setTitle: NSLocalizedString( @"Reset", nil) forState: UIControlStateNormal]; 
```

只要没有明确设置其他状态，这将用于所有状态。如果要更改不同状态的标题，请使用其他状态内容之一。

# asp.net-mvc - 什么时候应该在 asp.net mvc 应用程序中使用 HttpDelete 或 HttpPut

> ID：10888160
> 
> 赞同：10
> 
> 时间：2012-06-04T20:49:18.867
> 
> 标签：asp.net-mvc, http-put, http-delete

即使我的操作是在数据库上执行删除方法，我也总是使用 HttpGet 或 HttpPost。

那我应该使用什么 HttpDelete/HttpPut ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-04T21:37:03.720

Web 浏览器仅支持 GET 和 POST，因此如果您正在构建网站，则无需 PUT 或 DELETE。但是，如果您正在构建一个 RESTful api，如果您希望您的用户能够放置和/或删除东西，那么 PUT 和 DELETE 是您的选择。

编辑：似乎浏览器在其 XMLHttpRequest 的实现中确实支持 DELETE 和 PUT。因此，您可以在 ajax 请求中使用它们。但是，HTML 形式不支持它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T20:58:27.090

如果您构建[OData](http://www.odata.org/)服务。

**HTTP DELETE** - 删除指定资源所代表的实体数据。请求或响应消息中不存在有效负载。

**HTTP PUT** - 将请求资源中的现有实体数据替换为请求消息的有效负载中提供的新数据。( [msdn](http://msdn.microsoft.com/en-us/library/dd728282%28v=vs.110%29.aspx) )

Scott Hanselman的[演讲](http://www.hanselman.com/blog/ODataBasicsAtTheAZGroupsDayOfNETWithScottGu.aspx)可能很有趣。（我还没看过。）

如果您订阅了 OData，还有[几场关于 Pulsight 的讲座。](http://www.pluralsight-training.net/microsoft/Courses#odata)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T02:11:36.160

我想您已经了解`DELETE`request 的使用，但`PUT`有点不同。

如果我在服务器中创建一个新资源并且可以访问它的 URI 是由我决定的，那么我会选择`PUT`. 在大多数情况下，URI 由服务器决定，因此`POST`用于创建，`PUT`通常用于更新。

最后一点是，就像`GET`两者一样`DELETE`和`PUT`是幂等的，这意味着客户端连续发送请求多少次，服务器的状态应该更改为与第一个请求相同。

# apache-flex - 跳转到 adobe Flex Tree 中的特定节点

> ID：10888161
> 
> 赞同：0
> 
> 时间：2012-06-04T20:49:19.953
> 
> 标签：apache-flex, tree, adobe

我有一个在画布组件内的逃亡树，我折叠树，然后我想单击一个按钮，将我带到树中的一个特定节点。我需要扩展我可以做的树，但我在将焦点设置到树中的特定节点时遇到问题。树绑定到 xmlcollection。

这是我当前调用的代码不起作用。我传递一个 id 值并打开树，然后什么都没有被选中

```
var _iAlbum_ID:String = photosList.selectedItem.album_id; 

for (var i:int = 0; i < treeMyAlbums.dataProvider.length; i ++)
{
    treeMyAlbums.expandChildrenOf(treeMyAlbums.dataProvider[i], true)
}

var node:XML = xmlMyAlbums.descendants("node").(@album_id == _iAlbum_ID)[0];
treeMyAlbums.selectedItem = node; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:47:57.700

您可能想检查“节点”是否与树的数据提供者中存在的对象相同。如果它没有指向内存中的同一个对象，它将不起作用。您通常可以使用调试器轻松检查这一点。

如果是这种情况，您需要通过检查一个或多个唯一属性并使用该其他对象来设置`selectedItem`属性，从而在数据提供者中找到“节点”对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:50:57.647

我发现该属性`@album_id`区分大小写。

# asp.net - 如何从 ViewData 解析数据

> ID：10888163
> 
> 赞同：0
> 
> 时间：2012-06-04T20:49:51.153
> 
> 标签：asp.net

我正在尝试从我的 ViewData 解析数据，但进展不顺利。

控制器：

```
public ActionResult ListFilm()
        {
            MediaCatalog mediaCL = new MediaCatalog();

            // Retrieve a list of film media's
            List<CatalogDb.FilmMedia> listFilmMedia = new List<CatalogDb.FilmMedia>();
            listFilmMedia = mediaCL.GetAllFilmMediaTitles();

            ViewData["FilmList"] = listFilmMedia.ToList();

            return View();
        } 
```

看法：

```
<% foreach(var item in (ViewData["FilmList"] as List<CatalogDb.FilmMedia>)) { %>
<%=item.title %>
<% } %> 
```

我注意到写在我的视图文件中的代码直接在源代码中解析，所以由于某种原因它没有作为代码执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T20:57:09.353

由于您使用的是剃刀视图引擎，因此您的语法不正确并且您的代码没有被解析。在[剃刀视图引擎](http://www.asp.net/web-pages/tutorials/basics/2-introduction-to-asp-net-web-programming-using-the-razor-syntax)中，您必须编写类似

```
@foreach (var item in (ViewData["FilmList"] as List<CatalogDb.FilmMedia>))
{
 @item.title
} 
```

您在那里写的是 Web 表单视图引擎语法。您可以切换到该视图引擎或以剃须刀语法编写代码，以便您的代码被解析和执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:16:57.440

我个人使用该[`ViewBag`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.viewbag%28v=vs.98%29.aspx)属性，它已被添加到 ASP.NET MVC3。它使用引擎盖下的[动态](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.viewbag%28v=vs.98%29.aspx)，这使得它`ViewBag`也是强类型的。（`ViewData`在引擎盖下使用字典，因此总是返回一个你必须转换的对象）。

因此，基本上，`ViewData["MyPropery"] as MyType`您可以直接调用`ViewBag.MyProperty`而不需要使用它，而无需将其强制转换（转换为“MyType”）。

# eclipse - ALT+CMD+R 停止工作

> ID：10888165
> 
> 赞同：5
> 
> 时间：2012-06-04T20:49:56.313
> 
> 标签：eclipse, macos, keyboard, key, shortcut

我正在使用 Mac 和 Eclipse。我曾经使用`ALT`++`CMD`进行`R`名称重构。不幸的是，这个键停止工作并使用我写的这个键（仅在 Eclipse 中）。`ALT`++在 Eclipse 首选项的`CMD`Keys`R`部分中仍然正确定义。什么可能导致这种奇怪的行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T01:15:17.743

也许与其他键绑定存在冲突。打开绑定视图并在未绑定的命令中按`ALT`+ `CMD`+ `R`。检查冲突部分。如果您只能看到“重命名-重构/在 Windows 中”，那您就可以了。

否则搜索“重构”，然后在“在 Windows 中”清除所有内容时在“重命名-重构”的绑定部分中，然后按`ALT`+ `CMD`+ `R`。检查冲突，如果有，请清除它们，然后保存。

瞧！你应该准备好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T06:19:30.477

尝试解开密钥。关闭eclipse并再次绑定。或者尝试用不同的键绑定它。所有其他快捷键都有效吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T03:03:36.367

我有同样的问题，解除绑定/重新绑定不起作用。但是，卸载 Aptana 插件会立即解决此问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T18:21:22.543

我知道 Eclipse 偶尔会丢失键绑定。通常取消定义绑定然后重新应用它就足以修复它们。在最坏的情况下，您可以导出您的键绑定，恢复默认设置，然后导入您的绑定。（或者，如果您使用默认值，只需恢复它们并跳过导入/导出。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-05T00:30:24.500

Aptana Studio 插件可能是问题所在。

在我安装 Aptana Studio 进行试用后，我开始出现这个问题。我尝试清除和重置键绑定，然后重新启动 Eclipse 无济于事。卸载 Aptana Studio 解决了这个问题。

# php - AFNetworking 上传图片

> ID：10888167
> 
> 赞同：13
> 
> 时间：2012-06-04T20:50:10.233
> 
> 标签：php, ios, afnetworking

我看过一些例子，但我认为我的问题可能出在 PHP 中。我正在尝试使用 AFNetworking 从 iphone 将图像上传到服务器。这是我的 obj-c 代码：

```
 -(IBAction)uploadButtonClicked:(id)sender
{

NSData *imageToUpload = UIImageJPEGRepresentation(mainImageView.image, 90);
AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://www.THESERVER.com"]];

NSMutableURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:@"/PROJECT/upload.php" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithFileData: imageToUpload name:@"file" fileName:@"temp.jpeg" mimeType:@"image/jpeg"];
}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSString *response = [operation responseString];
    NSLog(@"response: [%@]",response);
    [MBProgressHUD hideHUDForView:self.view animated:YES];
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    [MBProgressHUD hideHUDForView:self.view animated:YES];
    if([operation.response statusCode] == 403){
        NSLog(@"Upload Failed");
        return;
    }
    NSLog(@"error: %@", [operation error]);

}];

[operation start];
} 
```

这是我的upload.php：

```
function upload(){
    $uploaddir = '/uploads/';
    $file = basename($_FILES['file']['name']);
    $uploadfile = $uploaddir . $file;

    if (move_uploaded_file($_FILES['file']['tmp_name'], $uploadfile)) {
        sendResponse(200, 'Upload Successful');
        return true;
    }
    sendResponse(403, 'Upload Failed');
        return false;

} 
```

当我尝试上传时失败

```
if (move_uploaded_file($_FILES['file']['tmp_name'], $uploadfile)) { 
```

并返回我设置的 403 / false 状态码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:21:41.033

这是一个愚蠢的错误...

在我需要的 php 中

```
$uploaddir = 'uploads/'; 
```

代替

```
$uploaddir = '/uploads/'; 
```

# iphone - 用块理解 setNeedsDisplay/drawRect

> ID：10888172
> 
> 赞同：1
> 
> 时间：2012-06-04T20:50:35.083
> 
> 标签：iphone, uiview, grand-central-dispatch

我试图了解有关并发编程和调用 setNeedsDisplay 的工作原理。我基本上有三个对象。

```
Main View - container with different UIView objects, the main one being a UIScrollView
Small Map View - a small UIView that draws a miniature version of one of the other UIView items on screem
Processor - a delegate of the Main View that calculates what's on screen and calls the Main View back with what's in view. 
```

因此，一个简单的用例是用户触摸 ScrollView，然后处理器更新 scrollView 的视图（如计算坐标、中心点等）它使用块并异步执行此操作。然后，这会将通知发布到 MainView 对象。

当 MainView 收到通知时，它只是调用

```
[smallMap setNeedsDisplay];  // example 1 
```

我在这个电话周围放了一些日志，我确实看到它立即被调用。但是，此函数的 drawRect: 不会立即被调用。它在 2 秒左右后被调用。

我记得读过这`setNeedsDisplay`只是标记视图以在运行循环的下一个事件上发生重绘。

但是，如果我添加此代码：

```
// example 2
dispatch_async(dispatch_get_main_queue(), ^{
    [smallMap setNeedsDisplay];        
    }); 
```

我的视图立即被重绘。

我想我很困惑为什么我必须要求主事件循环调用 setNeedsDisplay 来立即重绘某些东西。就像在示例 1 中一样，我调用 setNeedsDisplay，是在后台完成的还是其他什么，这就是为什么它没有立即重绘的原因？我试图了解幕后发生的事情的不同之处，以便我知道将来要寻找什么。就像我是否应该在类似于示例 2 块的内容中立即重绘所有调用？或者是因为我正在异步处理我的数据，然后我需要请求主队列？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:12:46.700

`setNeedsDisplay`是 UIKIT API 调用，必须从应用程序的主线程调用，也称为 UI 线程。这就是为什么在后台线程中调用它不会立即产生任何效果，而在主队列上调度它会立即产生效果。

有关更详细的答案，请参阅此相关问题[https://stackoverflow.com/a/6988115/172690 。](https://stackoverflow.com/a/6988115/172690)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T23:51:18.583

我的猜测是两件事中的一件：

您在单独线程上运行的代码正在从单独的线程调用 MainView 方法，而不是使用 performSelectorOnMainThread 或调用主线程上的代码的 GCD 调用。因此，您对 setNeedsDisplay 的调用实际上是在后台线程上进行的，正如另一位海报所说，这是一个禁忌。

第二种可能性是您的 MainView 代码正在主线程上运行，但它忙于进行耗时的处理，或者等待对另一个线程的同步调用完成，并且不为事件循环提供服务。

您可以通过在对 setNeedsDisplay 的调用上设置断点并查看调试器中的调用跟踪以查看它从哪个线程运行来排除第一种可能性。

找出第二种可能性需要更多的工作。您可能需要深入研究乐器。

# kohana - Kohana 3：has_many 通过关系的验证规则

> ID：10888173
> 
> 赞同：1
> 
> 时间：2012-06-04T20:50:40.827
> 
> 标签：kohana, kohana-3, kohana-orm, kohana-3.2

是否可以在 Kohana 3 中创建一个验证规则来验证 has_many through 关系？

使用[指南页面](http://kohanaframework.org/3.2/guide/orm/relationships)上的示例，一篇博客文章可以通过`categories_posts`表格有多个类别。是否可以在 Post 模型中设置验证规则以验证至少添加了一个类别？

我尝试了以下方法：

```
public function rules()
{
    return array(
        'categories' => array(
            array(array($this, 'has'), array('categories'))
        )
    );
} 
```

因为我看到该`ORM::has`函数将返回真/假。但我认为因为“类别”是一种关系，而不是一个领域，所以我写的规则永远不会被检查。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:48:16.410

您必须`Post`在添加`has_many`关系之前保存。您可以`Post`在保存后检查类别，如果未设置，则将其标记为草稿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:03:20.213

哇，好主意。专注于 MVC 设计模式。我认为这是 C 业务而不是 M。

```
if ($post->categories->find_all())
{
   //blablabla
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:54:23.113

由于*类别*在*帖子*表之外，因此您需要使用外部验证。创建一个调用的函数，该函数`Model_Post::rule_has_valid_categories($submitted_categories, $post)`返回一个布尔值，表示提交的类别是否对此帖子有效。

然后，在您尝试保存帖子之前创建额外规则：

```
$extra_rules = Validation::factory(array('categories' => $submitted_categories))
    ->rule(
    'categories',
    'Model_Post::rule_has_valid_categories',
    array(':value', ':model')
);

try
{
    $post->save($extra_rules);
}
catch (ORM_Validation_Exception $e)
{
    // if categories rule failed, array will contain _external[categories] field
    print_r($e->errors('models')); 
} 
```

您将消息存储在 /application/messages/models/post/_external.php 中：

```
return array(

    'categories' => array(
        'Model_Post::rule_has_valid_categories' => 'Invalid categories'
    ),

); 
```

# ios - 同时查看活动和后台应用程序图形

> ID：10888182
> 
> 赞同：0
> 
> 时间：2012-06-04T20:52:11.970
> 
> 标签：ios, ipad

是否可以将来自活动应用程序的图形叠加在后台应用程序之上并在 iPad 上同时查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:19:01.723

**不幸的是，答案是否定的。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:53:42.210

除了史诗般的越狱之外，没有任何方法是可能的。

# ruby-on-rails - Rails 日期参数

> ID：10888187
> 
> 赞同：1
> 
> 时间：2012-06-04T20:52:33.210
> 
> 标签：ruby-on-rails, devise, params

我正在学习铁轨，最近遇到了一个路障。任何指导表示赞赏。

我正在使用设备，并且我有一个`:confirmed_at`DateTime 列作为受保护的属性。所以要从我的管理界面更新它，我超级控制器更新方法并添加：

```
 @user.update_attribute(:confirmed_at, params[:user][:confirmed_at])
      @user.update_attribute(:school_id, params[:user][:school_id]) 
```

`:school_id`正确更新，但`:confirmed_at`日期时间始终为零。我查看了参数哈希，果然它没有，`:confirmed_at`但它有

```
 "confirmed_at(1i)"=>"2012", 
      "confirmed_at(2i)"=>"6", 
      "confirmed_at(3i)"=>"2", 
      "confirmed_at(4i)"=>"04",   
      "confirmed_at(5i)"=>"11" 
```

Rails 似乎没有将字段的参数转换为数据库的日期时间对象。

** 如何获取这些值以`:confirmed_at`正确更新我的字段？

任何帮助表示赞赏。

导轨 3.1，红宝石 1.9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:59:01.557

尝试这个：

```
@user.update_attribute(:confirmed_at, params[:confirmed_at]) 
```

date_select 在其自己的参数中发送，而不是作为 params[:user] 哈希的一部分。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:21:19.323

我猜你正在使用`datetime_select`助手。

看看这个：[将数据从 `datetime_select` 转换为 DateTime 对象的 Rails 方法在哪里？](https://stackoverflow.com/questions/5073756/where-is-the-rails-method-that-converts-data-from-datetime-select-into-a-datet)

# jquery - Jquery Droppable Draggable 在 Chrome/Safari 和 IE 9 中不起作用

> ID：10888193
> 
> 赞同：0
> 
> 时间：2012-06-04T20:52:52.077
> 
> 标签：jquery, webkit, draggable

以下 Jquery Drag/Drop 不起作用：

Internet Explorer：9 Safari：5+ Chrome：19+

在 Chrome 和 Safari 中，drop 不起作用。当我放下可拖动对象时，它会恢复原状，但随后会重新出现在光标上。我必须点击 droppable 才能注册命中。

在 IE 9 中，拖动不起作用。它不动。

我需要它做的是在右边有一个库存。此库存将是一个滑块（为简单起见，我已将其删除）。当您从库存中拖动一个项目时，它会恢复原状，然后我将该图像源放在放置的图像占位符上。

```
 $(document).ready(function() {
    $('.circles').draggable({//The drag does not fire in IE9
        revert: "invalid",
        helper: "clone"

    });

    $('.circleTargetContainer').droppable({
        accept: '.circles',
        activeClass: 'ui-state-active',
         drop: function( event, ui ) {

             alert("HIT");//the hit does not register in Chrome and IE
                var popImage = $(ui.draggable).find('img').attr("src");
                //set placeholder to popImage
                var childImage = $(this).find('img');
                $(childImage).attr('src', popImage);

            }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:10:51.023

在玩 IE9 时，检查您的兼容性问题并尝试不同的问题总是很好的。

![在此处输入图像描述](../Images/daef1765d327a6166afc41b828dfd5b9.png)

你会发现在 IE9 Compatibility View 中，它可以正常工作，所以你只需要[强制 IE 加载这个视图](http://webdesign.about.com/od/internetexplorer/qt/force-compatibility-view-in-ie.htm)而不是默认视图。

关于 Chrome 19，我没有问题，除非这不是它应该做的

1.  我单击右侧的一个元素
2.  我将它拖到放置区
3.  我停止点击
4.  选择的元素粘在放置区

[可以在此处找到](http://bit.ly/KrTuNO)显示此内容的屏幕截图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:16:50.973

我已经在 Safari 5.1.7 和 Chrome 19 上测试了你的演示，它运行良好。只有在 IE 中它根本不起作用。 [检查 html 的有效性返回 2 个错误](http://validator.w3.org/check?verbose=1&uri=http%3a%2f%2fproductionworksinc.com%2fdnd%2fdnd.html)，只需尝试将`alt`元素添加到图像并检查它是否适用。如果没有这个错误，它应该像在*兼容模式下*一样工作（它工作的地方）。

# mysql - mysql选择a和b之间的时间戳返回全部或0个时间戳

> ID：10888194
> 
> 赞同：4
> 
> 时间：2012-06-04T20:53:01.540
> 
> 标签：mysql, timestamp

试过这个

```
select * from table where timestamp_field between 1330560000 and 1336170420 
```

还有这个

```
select * from table where timestamp_field >=1330560000 and timestamp_field<=1336170420 
```

两者都返回空结果集。

但是这个

```
select * from table where timestamp_field >= 1330560000 
```

返回所有行

让事情变得更荒谬

```
select * from table where timestamp_field <= 1336170420 
```

返回空结果集。

当然，在 1336170420=4.ma 2012\. 和 1330560000=1.march 2012 之前、之间和之后都存在时间戳值。

时间戳值没问题，至少 phpmyadmin 显示正确的（人类可读的）日期时间值。我通过解析字符串创建了时间戳，

```
UPDATE table SET timestamp_field = STR_TO_DATE(timestamp_string, '%d.%m.%Y') 
```

猜猜我错过了什么，但找不到什么！？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T21:16:36.247

MySQL 需要[日期文字](http://dev.mysql.com/doc/en/date-and-time-literals.html)，而不是整数：

```
SELECT *
FROM   table
WHERE  DATE(timestamp_field) BETWEEN '2012-03-01' AND '2012-05-04' 
```

要使用整数（假设它们是自 UNIX 纪元以来的秒数），首先使用 MySQL 的[`FROM_UNIXTIME()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_from-unixtime)函数对其进行转换：

```
SELECT *
FROM   table
WHERE  timestamp_field BETWEEN FROM_UNIXTIME(1330560000)
                           AND FROM_UNIXTIME(1336170420) 
```

或者[`UNIX_TIMESTAMP()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_unix-timestamp)用于将您的列转换为它的 UNIX 表示：

```
SELECT *
FROM   table
WHERE  UNIX_TIMESTAMP(timestamp_field) BETWEEN 1330560000 AND 1336170420 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T20:59:34.807

为什么在使用 sql 代码时不将时间戳 from_unixtime(timestamp/1000) 转换为 dateTime？你试过吗？

# c# - 谁远程连接？

> ID：10888197
> 
> 赞同：0
> 
> 时间：2012-06-04T20:53:15.553
> 
> 标签：c#, remote-access

我们有十个软件用户名，由于许可问题，我们需要 10 台独立的机器（10 个不同的 IP）。多个用户可以同时远程访问一台机器，但只有一个用户可以在机器上使用这个程序。好的，这就是交易。我正在用 c# Visual 开发一个简单的应用程序，它显示程序的实例当前是否正在机器上运行（一个简单的表）。它运作良好。我想在表中添加一列“所有者”——在特定机器上运行程序实例的人。我可以以某种方式跟踪远程登录并启动该过程的人的 IP 吗？每台机器上只有一个帐户。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:03:25.530

您想要的是显示相应进程的所有者，即可以看到的用户名，例如使用任务管理器或进程资源管理器。

检索它以使用 WMI 的进程的所有者的一种选择。例如，在此相关问题中对此进行了描述：

> [**如何在 C# 中确定进程的所有者？**](https://stackoverflow.com/a/777567/40347)

如果您还想在 RDP 会话中检索用户，您可能需要查看[Cassia](http://code.google.com/p/cassia/)库，例如使用如下代码：

```
new TerminalServicesManager().CurrentSession.ClientName 
```

获取客户端的主机名，或

```
new TerminalServicesManager().CurrentSession.UserName 
```

获取用户名。

# javascript - 如何在 Javascript 文本节点中获取 HTML 标签？

> ID：10888198
> 
> 赞同：1
> 
> 时间：2012-06-04T20:53:28.910
> 
> 标签：javascript, html, text, tags

我的问题在标题中得到了很好的解释。如何在 Javascript 文本节点中获取 HTML 标签？我在页面上的代码的结果是......

```
<a href="http://www.example.com">Click Here</a> 
```

但是，我希望“单击此处”成为链接。我是 Javascript 新手，所以这对我有很大帮助。下面是我所说的一个例子......

```
<div id="mydiv">
</div>
<script type="text/javascript">
var mynode=document.createTextNode('<a href="http://www.example.com">Click Here</a>');
document.getElementById('mydiv').appendChild(mynode);
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T20:55:13.003

您不能将链接放在文本节点中。链接是元素。元素可以（有时）包含文本节点，但反之则不然。

您需要创建一个元素，在其上设置属性，然后将文本附加到该元素。

```
var link = document.createElement('a');
link.setAttribute('href', 'http://www.example.com');
link.appendChild(document.createTextNode('Click Here'));
document.getElementById('mydiv').appendChild(link); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:05:41.197

```
<div id="mydiv">
</div>

<script type="text/javascript">

    var element = document.createElement('a');
    element.setAttribute("href","http://www.example.com");
    element.appendChild(document.createTextNode('Click Here'));
    document.getElementById('mydiv').appendChild(element); </script>

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:56:03.050

你在找`document.createElement`，不是`document.createTextNode`。文本节点不能包含 HTML。

一个简单的替代方案，如果您不使用复杂的 Javascript（您似乎没有），那就是：

```
document.getElementById('mydiv').innerHTML.='<a href="http://www.example.com">Click Here</a>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-01T13:18:29.680

我需要在文本节点的中间插入一个元素（用跨度替换一个单词）。我通过完全替换文本节点来做到这一点：

（使用 jQuery）

```
function replace_text(element, search, replacement_html){
  if(!element) element=document.body;
  var nodes=element.childNodes;
  for(var n=0;n<nodes.length;n++){
    if(nodes[n].nodeType==Node.TEXT_NODE){
      if(nodes[n].textContent.match(new RegExp(that.escapeRegExp(search),'gi'))){
        var newtextContent=nodes[n].textContent.replace(
              new RegExp(escape_regex(search),'gi'), replacement_html);
        $(nodes[n]).before(newtextContent).remove();
      }
    } else {
      replace_text(nodes[n], search, replacement_html);
    }
  }
}

function escape_regex(str) {
  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
} 
```

然后调用：

```
$('.highlight_terms_here').each(function(){
  replace_text(this, 
              the_word, 
              '<span style="background-color: yellow">'+the_word+'</span>');
}) 
```

或者简单地说：

```
 replace_text($('#contents')[0], the_word, 
              '<span style="background-color: yellow">'+the_word+'</span>'); 
```

# c# - 如何列出网络计算机上的所有打印机

> ID：10888201
> 
> 赞同：4
> 
> 时间：2012-06-04T20:53:32.617
> 
> 标签：c#, powershell, printing, wmi

如下图所示，当我尝试检索所有打印机时，我只有 2 台打印机。

有没有办法使用 PowerShell WMI 或 C# 返回所有打印机（以便我可以在 powershell 中翻译它）？

我已经尝试过`System.Drawing.Printing.PrinterSettings.InstalledPrinters`（参考[`how to get the list of all printers in computer - C# Winform`](https://stackoverflow.com/questions/2354435/how-to-get-the-list-of-all-printers-in-computer-c-sharp-winform)），但也只显示了 2 个条目。

![在此处输入图像描述](../Images/4170c6f34a162ca8f26dfc62ffb8b3ae.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:04:00.923

简单地，

通过[System.Drawing.Printing](http://msdn.microsoft.com/en-us/library/system.drawing.printing.aspx)

```
foreach (String printer in PrinterSettings.InstalledPrinters)
{
    Console.WriteLine(printer.ToString()+Environment.NewLine);
} 
```

通过[WMI](http://msdn.microsoft.com/en-us/library/aa394582%28v=VS.85%29.aspx)

```
public static void AvailablePrinters()
{
 oManagementScope = new ManagementScope(ManagementPath.DefaultPath);
 oManagementScope.Connect();

 SelectQuery oSelectQuery = new SelectQuery();
 oSelectQuery.QueryString = @"SELECT Name FROM Win32_Printer";

 ManagementObjectSearcher oObjectSearcher = 
    new ManagementObjectSearcher(oManagementScope, @oSelectQuery);
 ManagementObjectCollection oObjectCollection = oObjectSearcher.Get();

 foreach (ManagementObject oItem in oObjectCollection)
 {

 Console.WriteLine("Name : " + oItem["Name"].ToString()+ Environment.NewLine);
 }
} 
```

通过[PowerShell](http://msdn.microsoft.com/en-us/library/windows/desktop/dd835506%28v=vs.85%29.aspx)

```
Get-WMIObject -class Win32_Printer -computer $printserver | Select Name,DriverName,PortName 
```

* * *

有关更多信息，请查看[本文](http://www.codeproject.com/Articles/80680/Managing-Printers-Programatically-using-C-and-WMI)和 WMI 打印机[类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394363%28v=vs.85%29.aspx)

# scala - 与 Scala 一起使用的最简单的 2D 游戏库是什么？

> ID：10888207
> 
> 赞同：4
> 
> 时间：2012-06-04T20:54:00.493
> 
> 标签：scala, game-engine, scala-2.9, 2d-games

我需要集成一个用于强化学习的 scala 库，该库适用于 scala 2.9.1 和 2D 游戏库。如果它使用 SBT，那就太棒了。

我正在查看 scage，但是当前的 master 分支已损坏，它可以在 maven 上运行，并且如何设置入门项目的示例根本不起作用。

我不反对直接使用 java 库，但我真的想尽量减少开始所需的工作量。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:22:12.580

ScalaFX 怎么样？

*   [在 GitHub](https://github.com/scalafx)
*   [JavaFX 和 Scala 喜欢牛奶和饼干](http://www.slideshare.net/steveonjava/javafx-and-scala-like-milk-and-cookies)

# javascript - 使用 JavaScript 检测对转换的支持

> ID：10888211
> 
> 赞同：16
> 
> 时间：2012-06-04T20:54:08.330
> 
> 标签：javascript, css, css-transitions

我想根据浏览器是否支持 CSS3 转换来提供不同的 javascript 文件。有没有比我下面的代码更好的方法来检测转换支持？

```
window.onload = function () {
    var b = document.body.style;
    if(b.MozTransition=='' || b.WebkitTransition=='' || b.OTransition=='' || b.transition=='') {
        alert('supported');
    } else {
        alert('NOT supported')
    }
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-08T00:45:53.447

我也认为包括 Modernizr 是一种矫枉过正。下面的功能应该适用于任何功能。

```
function detectCSSFeature(featurename){
    var feature = false,
    domPrefixes = 'Webkit Moz ms O'.split(' '),
    elm = document.createElement('div'),
    featurenameCapital = null;

    featurename = featurename.toLowerCase();

    if( elm.style[featurename] !== undefined ) { feature = true; } 

    if( feature === false ) {
        featurenameCapital = featurename.charAt(0).toUpperCase() + featurename.substr(1);
        for( var i = 0; i < domPrefixes.length; i++ ) {
            if( elm.style[domPrefixes[i] + featurenameCapital ] !== undefined ) {
              feature = true;
              break;
            }
        }
    }
    return feature; 
}

var hasCssTransitionSupport = detectCSSFeature("transition"); 
```

灵感来自[https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations/Detecting_CSS_animation_support](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations/Detecting_CSS_animation_support)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:56:15.830

Modernizr 会为您检测到这一点。使用[此链接](http://modernizr.com/download/) 创建仅包含 CSS3 2D 和/或 3D 过渡的自定义下载版本。

运行后，您可以测试标签 (CSS)`csstransitions`上的类，或者在 JavaScript 中测试 if is .`html``Modernizr.csstransitions``true`

更多文档： http: [//modernizr.com/docs/#csstransitions](http://modernizr.com/docs/#csstransitions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-07T09:43:55.277

这是另一个测试代码。也许这是一个矫枉过正，但该函数尝试将 CSS 属性设置为 DOM 对象，然后从中读取。

从未在大量外来浏览器上测试过此代码，但它比仅检查 CSS 属性可用性更安全。啊，是的，它可以区分 2D 变换支持和 3D 变换支持！只需传递您要测试的 CSS 属性值！

此代码的优点是它检测支持的供应商前缀（如果有）。可能的返回值：

`false`，当功能不受支持时，或

```
{
    vendor: 'moz',
    cssStyle: '-moz-transition',
    jsStyle: 'MozTransition'
} 
```

支持功能时

```
/**
 * Test for CSS3 feature support. Single-word properties only by now.
 * This function is not generic, but it works well for transition and transform at least
 */
testCSSSupport: function (feature, cssTestValue/* optional for transition and transform */) {
    var testDiv,
        featureCapital = feature.charAt(0).toUpperCase() + feature.substr(1),
        vendors = ['', 'webkit', 'moz', 'ms', 'o'],
        jsPrefixes = ['', 'Webkit', 'Moz', 'ms', 'O'],
        defaultTestValues = {
            transition: 'left 2s ease 1s',
            transform: 'rotateX(-180deg) translateZ(.5em) scale(0.5)'
           // This will test for 3D transform support
           // Use other values if you need to test for 2D support only
        },
        testFunctions = {
            transition: function (jsProperty, computed) {
                return computed[jsProperty + 'Delay'] === '1s' && computed[jsProperty + 'Duration'] === '2s' && computed[jsProperty + 'Property'] === 'left';
            },
            transform: function (jsProperty, computed) {
                return computed[jsProperty].substr(0, 9) === 'matrix3d(';
            }
        };

    /* test given vendor prefix */
    function isStyleSupported(feature, jsPrefixedProperty) {
        if (jsPrefixedProperty in testDiv.style) {
            var testVal = cssTestValue || defaultTestValues[feature],
                testFn = testFunctions[feature];
            if (!testVal) {
                return false;
            }       

            testDiv.style[jsPrefixedProperty] = testVal;
            var computed = window.getComputedStyle(testDiv);

            if (testFn) {
                return testFn(jsPrefixedProperty, computed);
            }
            else {
                return computed[jsPrefixedProperty] === testVal;
            }
        }
        return false;
    }

    //Assume browser without getComputedStyle is either IE8 or something even more poor
    if (!window.getComputedStyle) {
        return false;
    }

    //Create a div for tests and remove it afterwards
    if (!testDiv) {
        testDiv = document.createElement('div');
        document.body.appendChild(testDiv);
        setTimeout(function () {
            document.body.removeChild(testDiv);
            testDiv = null;
        }, 0);
    }

    var cssPrefixedProperty,
        jsPrefixedProperty;

    for (var i = 0; i < vendors.length; i++) {
        if (i === 0) {
            cssPrefixedProperty = feature;  //todo: this code now works for single-word features only!
            jsPrefixedProperty = feature;   //therefore box-sizing -> boxSizing won't work here
        }
        else {
            cssPrefixedProperty = '-' + vendors[i] + '-' + feature;
            jsPrefixedProperty = jsPrefixes[i] + featureCapital;
        }

        if (isStyleSupported(feature, jsPrefixedProperty)) {
            return {
                vendor: vendors[i],
                cssStyle: cssPrefixedProperty,
                jsStyle: jsPrefixedProperty
            };
        }
    }

    return false;
} 
```

Github：[https ://github.com/easy-one/CSS3test](https://github.com/easy-one/CSS3test)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-18T15:28:04.233

```
if (window.TransitionEvent){

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-19T19:20:19.837

使用 Modernizr 3.0 (alpha)，您可以在本地生成自定义构建。这可能会解决上述“过度杀伤”问题 - 尽管我首先并不完全清楚这个问题（但我假设它的大小）。新的 api 提供了一个“构建”方法，您可以将包含您希望包含在构建中的测试的 json 传递给该方法。

我在我的 gulp 文件中使用了类似的东西，但不需要 gulp - 一个简单的节点脚本就可以了。

```
gulp.task('js:modernizr', function() {
    var modConfig = JSON.parse(fs.readFileSync('modernizr-config.json', {
            encoding: 'utf8'
        }));
    modernizr.build(modConfig, function(res) {
        fs.writeFileSync('modernizr.js', res);
        return true;
    });
}); 
```

“modernizr-config.json”文件的一个例子是

```
{
  "classPrefix": "",
  "options": [
    "addTest",
    "atRule",
    "domPrefixes",
    "hasEvent",
    "html5shiv",
    "html5printshiv",
    "load",
    "mq",
    "prefixed",
    "prefixes",
    "prefixedCSS",
    "setClasses",
    "testAllProps",
    "testProp",
    "testStyles"
  ],
  "feature-detects": [
    "css/transforms",
    "css/transforms3d",
    "css/transformstylepreserve3d",
    "css/transitions",
    "touchevents",
    "workers/webworkers",
    "history"
  ]
} 
```

完整的配置文件包含在 Modernizr 包中。

使用这种方法，您可以通过包安装程序利用维护良好的 Modernizr 测试套件，并根据需要轻松添加/删除测试。更少的测试，更小的文件显然。

'setClasses' 选项会将相关的测试类添加到您的 html 中，但您也可以利用 3.0 异步事件，如下所示：

```
Modernizr.on('csstransitions', function(bool) {
    if (bool === true) // do transition stuffs
} 
```

# sql - 索引视图的两列上的唯一聚集索引

> ID：10888214
> 
> 赞同：2
> 
> 时间：2012-06-04T20:54:27.640
> 
> 标签：sql, sql-server

我正在尝试在没有唯一 ID 的表上设置索引视图。它有两个唯一的标识符，如果组合起来对于它的行来说是唯一的。我在创建索引视图所需的唯一聚集索引时遇到了麻烦，当我在 MSDN 上找到一个大家都同意的线程时，可以从 2 列中为索引视图创建唯一聚集索引 @ [http://social .msdn.microsoft.com/Forums/en/transactsql/thread/f2c99845-3af1-46e8-9b52-363c24988744](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/f2c99845-3af1-46e8-9b52-363c24988744)

但是对于我的生活，无法弄清楚如何创建它。我正在处理这个查询，但它似乎并没有削减它。

```
CREATE UNIQUE CLUSTERED INDEX  [PK] ON MyView
(
MyId1, MyId2
) 
```

错误：

> CREATE UNIQUE INDEX 语句终止，因为为对象名称“dbo.MyView”和索引名称“PK”找到重复键。重复键值为 (71cd9b68-1a9e-47bc-bc6b-0008b230a6d8, 0e64aa3a-0631-4caf-82d9-73609ee79b19)。

列为重复的两个 ID 是来自 MyId2 的 ID。

那么，我怎样才能在这里创建一个唯一的聚集索引呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:04:01.797

好吧，错误消息似乎表明**MyId1** =`71cd9b68-1a9e-47bc-bc6b-0008b230a6d8`和**MyId2** =有不止一个记录`0e64aa3a-0631-4caf-82d9-73609ee79b19`。

我建议运行一个仅根据该条件进行选择的查询，并确认它只返回一条记录。如果它返回更多，那么除非您消除重复项，否则您无法在这两列上重新创建 UNIQUE 约束。

# qt - 因此，QVariant 实例化默默地注册了一个（先前声明的）元类型

> ID：10888219
> 
> 赞同：-1
> 
> 时间：2012-06-04T20:54:52.700
> 
> 标签：qt, qvariant

拿这个程序（改编自一个探索性测试用例，我注意到一个自定义元类型就像它被注册一样，虽然`qRegisterMetaType`没有被调用）：

```
#include <QMetaType>
#include <QVariant>

#include <iostream>

class C1 {
};

Q_DECLARE_METATYPE(C1)

int main() {
    std::cout << QMetaType::type("C1") << std::endl;

    QVariant v = QVariant::fromValue<C1>(C1());

    std::cout << QMetaType::type("C1") << std::endl;

    return 0;
} 
```

这输出：

```
0
256 
```

（进一步的测试确实表明元类型确实已注册——它可以被`construct`'ed （即使在`Q_DECLARE_METATYPE(..)`不可见的地方）等）

这种行为众所周知吗？依靠？（可能不是，但是尝试按照“官方”规则注册元类型首先让我感到困惑，因此提出了这个问题）

PS 当然，可以看到`qRegisterMetaType`调用 inside `Q_DECLARE_METATYPE(..)`，但问题仍然存在（至少我希望如此）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:02:41.653

`Q_DECLARE_METATYPE` doesn't call `qRegisterMetaType`, it defines a function that does. But `QVariant::fromValue<C1>` calls `qRegisterMetaType` indirectly, by calling the previously defined function.

The [documentation](http://qt-project.org/doc/qt-4.8/qmetatype.html#details) suggests that calling `qRegisterMetaType` is only needed for things like queued connections.

Which means that you don't need to call `qRegisterMetaType` before using `QVariant` template functions for your type (but `Q_DECLARE_METATYPE` has to be called in each compilation unit where those template functions are used or the compilation will fail).

# zsh - zsh 中不区分大小写的全局列表

> ID：10888225
> 
> 赞同：2
> 
> 时间：2012-06-04T20:55:12.740
> 
> 标签：zsh

我有以下代码：

```
 $ print -l backgrounds/**/*.((#i)jpg|jpeg|gif|webp|png|svg|xcf|cur|ppm|pcd) 
```

目的是列出文件终止情况下的一些图像文件indifernet。

但是我的代码似乎不起作用，因为不会列出以大写结尾的文件。有人可以在上面的代码示例中解释我的错误吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T21:20:28.480

您需要将`#i`应用于所有内容，而不仅仅是`jpg`. 您可以使用：

```
$ print -l backgrounds/**/*.(#i)(jpg|jpeg|gif|webp|png|svg|xcf|cur|ppm|pcd) 
```

确保您还完成了：

```
set -o extended_glob 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T20:59:27.487

请注意，使用`#i`需要`EXTENDED_GLOB`在您的脚本/外壳中设置：

```
setopt EXTENDED_GLOB 
```

请参阅[文档](http://zsh.sourceforge.net/Doc/Release/Expansion.html#Filename-Generation)，第*1.8.4 节 Globbing Flags*或 type `man zshexpn`。

你想要：`*.(#i)(jpg|gif|etc)`

# android - sqlite 数据库未创建

> ID：10888227
> 
> 赞同：8
> 
> 时间：2012-06-04T20:55:14.477
> 
> 标签：android, database, sqlite

我正在使用从流行的记事本示例中学到的标准方法来构建我的*第一个*应用程序。
但我陷入了一个奇怪的问题。
SQLite 数据库文件 (.db) 未在 /data/data/package/databases 中创建。我已经从 HeadFirst android dev 交叉检查了清单文件和 OpenHelper 文件。书（我将其用作参考）但我发现自己无法弄清楚为什么没有创建数据库文件。
是否有任何特殊权限或我们需要打开它才能使其工作？
奇怪的是，它对于预加载的示例工作正常。表示为记事本示例创建了“.db”文件，但是当我尝试时，它失败了。:(
这是我的文件。

*包 - database.test*

**1.AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".Database_testActivity"
        android:label="@string/app_name" >
    </activity>
</application> 
```

**2.TestOpenHelper.java**

```
package database.test;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class TestOpenHelper extends SQLiteOpenHelper {

TestOpenHelper(Context context){
    super(context,"mydb.db",null,1);
}
@Override
public void onCreate(SQLiteDatabase database){
    database.execSQL("create table test_1 " + " (field1 integer primary key, field2 integer);");
}
public void onUpgrade (SQLiteDatabase database, int oldVersion, int newVersion){
    database.execSQL("drop table if exists test1");
    onCreate(database);
}
} 
```

**3.Database_testActivity.java**

```
package database.test;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ListView;

public class Database_testActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ListView listview = (ListView)findViewById(R.id.test_list);
    TestAdapter ta = new TestAdapter();
    listview.setAdapter(ta);

    TestOpenHelper openHelper = new TestOpenHelper(this);
}
} 
```

我知道这是一个非常基本的问题，但过去十五天我一直在尝试解决这个问题，现在我完全感到沮丧。
请帮忙 ..

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-04T21:11:25.557

改变这个：

```
database.execSQL("create table test_1 " + " (field1 integer primary key, field2 integer)"); 
```

这个`TestOpenHelper openHelper = new TestOpenHelper(this);`改变为`SQLiteDatabase db = new TestOpenHelper(this).getWritableDatabase();`

你真的没有创建数据库，你只创建了你的实例，`SQLiteOpenHelper`但要创建或打开数据库，你必须使用`getWritableDatabase()`or`getReadableDatabase()`方法。

完全来自文档：

> 创建和/或打开将用于读取和写入的数据库。

# java - 我收到 Java.io.notserializableException 错误

> ID：10888231
> 
> 赞同：0
> 
> 时间：2012-06-04T20:55:36.210
> 
> 标签：java, exception

尝试在扩展和实现的类中将`java.io.notserializableException`对象写入服务器后出现错误，但如果扩展它运行良好`jpanel``serializable``jframe.`

这是代码：

```
//to send to server 
objectoutputstream out = new objectoutputstream(socket.getoutputstream()); 
out.writeobject(myobject); 

//to receive in server 
objectinputstream in = new objectinputstream(socket.getinputstream()); 
in.readobject(); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:01:51.063

从[JPanel (Java 2 Platform SE v1.4.2)](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JPanel.html)，它说：

> **警告：**此类的序列化对象将与未来的 Swing 版本不兼容。当前的序列化支持适用于运行相同版本 Swing 的应用程序之间的短期存储或 RMI。^(从 1.4 开始，对所有 JavaBeans TM)的长期存储的支持已添加到`java.beans`包中。请参阅[XMLEncoder](http://docs.oracle.com/javase/1.4.2/docs/api/java/beans/XMLEncoder.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T20:57:22.607

您对`JPanel`（`myobject`实例）的实现具有对其他对象的引用（例如私有字段），即未实现`Serializable`。正是另一个对象导致了异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-12T19:38:44.600

正如@Xeon 所说，为 myobject 提供 impl。正如您所说，异常即将出现在 Object 类上，这仅意味着您的类或任何类成员，即字段（它是一个对象，而不是 premitive 类型）没有实现 Serializable 接口。另外你如何在那里创建 myobject ？直接 Object myobject = ...
或 myobject = .... ？

只要确保每个人都实现可序列化。

Object 类提供方法但不实现该可序列化接口，否则 Java 中的每个对象都默认是可序列化的！

# perl - Perl 和 MongoDB：以字符串形式返回查找结果

> ID：10888232
> 
> 赞同：0
> 
> 时间：2012-06-04T20:55:46.903
> 
> 标签：perl, mongodb

相对简单的问题，但不是我找到确切答案的问题 - 假设我们已经对 MongoDB 驱动程序进行了 CPAN，设置了一个包含一些数据的数据库，并希望将查找结果捕获到文本字符串中以在 perl 脚本中操作。

```
use MongoDB;
use MongoDB::Database;
use MongoDB::OID;
my $conn = MongoDB::Connection->new;
my $db = $conn->test;
my $users = $db->x;
my $parseable;
#Ran this in mongoshell earlier: db.x.insert({"x":82})
$string = $users->find({"x" => 82}); 
@objects = $string->all;
print "LEN: ".(@objects.length())."\n"; #returns 1....hmmmm...would imply it has my    
entry!
print @objects[0]."\n";
print $objects[0]."\n";
print keys(@objects)."\n";
print keys(@objects[0])."\n";
print "@objects[0]"."\n"; 
```

这些在命令行上输出以下内容，它们都不是我想要的）-=：

```
LEN: 1
HASH(0x2d48584)
HASH(0x2d48584)
1
2
HASH(0x2d48584) 
```

我想要的是 BSON 作为字符串 - 我想要 mongoshell 在 Perl 中的字符串中返回的内容！我的梦想输出如下：

```
{ "_id" : ObjectId("4fcd1f450a121808f4d78bd6"), "x" : 82 } 
```

进一步增加的事实是我可以在一个变量中捕获这个字符串来操作。

下面的代码将很好地显示内容，但不会将其抓取到变量中进行操作，最不幸的是：

```
#!/usr/bin/perl 

use MongoDB;
use MongoDB::Database;
use MongoDB::OID;
my $conn = MongoDB::Connection->new;
my $db = $conn->test;
my $users = $db->x;
my $parseable;
#Ran this in mongoshell earlier: db.x.insert({"x":82})
$string = $users->find({"x" => 82});

use Data::Dumper; # new import
print Dumper $string->all,0; # call Dumper method 
```

带输出：

```
$VAR1 = {
      '_id' => bless( {
                        'value' => '4fcd1f450a121808f4d78bd6'
                      }, 'MongoDB::OID' ),
      'x' => '82'
    }; 
```

有人知道怎么做这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:08:48.747

试试下面的代码：

```
#!/usr/bin/perl
use strict;
use warnings;

use Data::Dumper;
use MongoDB;
use MongoDB::Collection;

my $conn = new MongoDB::Connection;
my $db   = $conn->test;
my $coll = $db->x;

my $all = $coll->find();
my $dts = $all->next;

use Data::Dumper;
print Dumper $dts; 
```

`Data::Dumper`是打印复杂 Perl 数据结构的必备模块。您将了解数据是如何以这种方式构建的。

然后您可以直接访问键/值：

```
#!/usr/bin/perl
use strict;
use warnings;

use MongoDB;
use MongoDB::Collection;

my $conn = new MongoDB::Connection;
my $db   = $conn->test;
my $coll = $db->x;

my $all = $coll->find();
my $dts = $all->next;

my @a = keys %$dts;

my $str = '{ "' .
    $a[0] .
    '" : ObjectId("' .
    $dts->{_id}. '"), "'.
    $a[1].'" : ' .
    $dts->{x} .
    " }\n";

print $str; 
```

输出是

```
{ "_id" : ObjectId("4fcd248f8fa57d73410ec967"), "x" : 82 } 
```

# javascript - 如何在 Jasmine 中设置命名空间进行测试？

> ID：10888243
> 
> 赞同：0
> 
> 时间：2012-06-04T20:56:20.167
> 
> 标签：javascript, unit-testing, jasmine

我需要向要使用 Jasmine 测试的 Javascript 类添加功能。类定义是这样的：

```
GAME.Player.CustomPlayerSetup = function() {
  ...
}; 
```

如果我删除`GAME.Player`，我可以编写正常的测试并让它们通过。但是当尝试离开`Game.Player`CustomPlayerSetup 的类定义时，我得到一个 Reference Error Game is not defined。如何定义这个测试？

为了回答查尔斯的建议，即使我在我的 Jasmine 测试文件中声明 GAME 和 Player vars 在它仍然给我的 require 行之前，如

```
GAME = {};
GAME.Player = {};

CustomPlayerSetup = require("../CustomPlayerSetup").CustomPlayerSetup;

describe("Custom Player Setup", function() {
  ...
}); 
```

指向生产代码文件而不是测试文件的相同错误。我正在使用 jasmine-node 运行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:31:26.873

在我看来，您需要`GAME.Player`在 jasmine 测试中运行/包含 js 文件之前实例化该对象。就像是：

```
<script type="text/javascript">
    var GAME = {Player:{}};
</script>
</script src="your_src.js"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:38:19.373

很可能在您的规范运行程序中，您有任何文件实例化 Game 和/或运行规范的文件下方的播放器（或者您根本没有包含它）。

如果不是这种情况，请尝试发布您的规范运行程序以及失败的测试之一。

# sql - 使用 SQL 匹配特定的一对多条目

> ID：10888253
> 
> 赞同：1
> 
> 时间：2012-06-04T20:57:15.470
> 
> 标签：sql

假设我有两张桌子：

```
product
-------
productid
name 
```

和

```
language
--------
productid
code 
```

我有三个产品：

```
1, 'homebody' -> 1, EN
2, 'continetnal' -> 2, FR
                 -> 2, EN
                 -> 2, ES
3, 'westy'       -> 3, EN
                 -> 3, ES
                 -> 3, FR
                 -> 3, PT
4, 'oktoberfest' -> 4, DE 
```

假设我有一个我感兴趣的语言列表，`EN, FR, ES`我想创建三种类型的查询来选择一些产品。

1.  匹配我列表中的任何语言（'homebody'、'continental'、'westy'）
2.  匹配我列表中的所有语言（'continental'、'westy'）
3.  完全匹配我列表中的语言（'大陆'）

我认为第一个的解决方案是：

```
SELECT * FROM products AS p JOIN language AS l ON (p.productid = l.productid) WHERE l.code IN ('EN', 'ES', 'FR') 
```

我解决其他查询的好方法是什么？我怀疑我计算与我的产品相关的语言数量并确保它等于或至少等于我的查询中的语言数量，但不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:02:50.223

如果您不能为同一产品使用两次 FR（或任何语言）：

2.

```
SELECT p.productid, p.name 
FROM products AS p 
JOIN language AS l ON (p.productid = l.productid) 
WHERE l.code IN ('EN', 'ES', 'FR')
GROUP BY p.productid, p.name
HAVING COUNT(*) = 3 
```

3.

```
WHERE l.code IN ('EN', 'ES', 'FR')
AND NOT EXISTS (SELECT NULL FROM language where productid = p.productid
   AND code NOT IN ('EN', 'ES', 'FR')
GROUP BY p.productid, p.name
HAVING COUNT(*) = 3 
```

或者如果你想检索语言代码

```
SELECT * FROM products p
JOIN language l on p.productid = l.productid
where p.productid IN
  (SELECT p1.productid from product p1
   JOIN language AS l1 ON (p1.productid = l1.productid) 
    WHERE l1.code IN ('EN', 'ES', 'FR')
    GROUP BY p1.productid,
    HAVING COUNT(*) >= 3) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-04T23:51:41.707

以下解决方案如何？

1.  匹配我列表中的任何语言（'homebody'、'continental'、'westy'）

    ```
    select p.* from product p, language l 
     where p.productid = l.productid
       and l.code in ('homebody', 'continental', 'westy') 
    ```

2.  匹配我列表中的所有语言（'continental'、'westy'）

    ```
    select distinct p.* from product p, product p2, language l 
     where p.productid = l.productid
       and l.code in ('continental', 'westy')
       and p.productid = p2.productid 
    ```

3.  完全匹配我列表中的语言（'大陆'）

    ```
    select p.* 
      from product p, language l 
     where p.productid = l.productid
       and l.code in ('continental') 
    ```

# json - 如何使用 UrlFetchApp 服务发送 JSON 有效负载？

> ID：10888254
> 
> 赞同：17
> 
> 时间：2012-06-04T20:57:19.527
> 
> 标签：json, google-apps-script, urlfetch

我正在尝试发布到期望使用 Google Apps 脚本将 JSON 作为有效负载的网络服务。我正在使用以下代码：

```
var options =
{
  "method" : "post",
  "contentType" : "application/json",
  "headers" : {
    "Authorization" : "Basic <Base64 of user:password>"  
  },
  "payload" : { "endDate": "2012-06-03" }
};

var response = UrlFetchApp.fetch("http://www.example.com/service/expecting/json", options); 
```

**在服务器**端，我收到以下错误：

```
WARN [facade.SettingsServlet] 04 Jun 2012 15:30:26 - Unable to parse request body: endDate=2012-06-03
net.liftweb.json.JsonParser$ParseException: unknown token e 
```

我假设服务器期望得到

```
{ "endDate": "2012-06-03" } 
```

代替

```
endDate=2012-06-03 
```

但我不知道如何`UrlFetchApp`做到这一点。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-05T08:50:53.340

我不明白服务器端错误，但“有效负载”参数必须是此处指定的字符串：[https](https://developers.google.com/apps-script/class_urlfetchapp?hl=fr-FR#fetch) ://developers.google.com/apps-script/class_urlfetchapp?hl=fr-FR#fetch 。

尝试：

```
var options =
{
  "method" : "post",
  "contentType" : "application/json",
  "headers" : {
    "Authorization" : "Basic <Base64 of user:password>"  
  },
  "payload" : '{ "endDate": "2012-06-03" }'
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-06T14:45:00.350

*   如果将有效负载设置为字符串，它将直接传递（作为 UTF-8 字符串）。
*   如果将有效负载设置为对象，它将像 HTML 表单一样发送（如果字段很简单，则表示“application/x-www-form-urlencoded”，如果对象包含斑点/文件）。

对于您的用例（服务器期望接收 JSON），听起来 Utilities.jsonStringify() 是要走的路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-08T20:21:36.827

在类似的情况下，这样的事情对我有用：

我没有创建**有效负载**并添加到**options**，而是将参数构建到一个字符串中以附加到 URL：

`var params = "id=2179853&price=62755";`

然后，我将参数附加到 url 字符串：

`var result = UrlFetchApp.getRequest(url + '?' + params, options);`

因此，我的**选项**仅包含**header**传递。

对于我的项目，这就像一个魅力。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-17T13:20:30.313

下面是应该与一些重要注释一起使用的代码：

```
function testMe() {
    var products_authkey = "------------";
    try {
        var url = "https://app.ecwid.com/api/v1/---------/product?id=----------&secure_auth_key=" + products_authkey;
        //url= "http://requestb.in/----------"; // you can actually debug what you send out with PUTs or POSTs using Requestb.in service
        var payload = {
            id: "21798583", // id is necessary and should be a string, or it might be sent in scientific representation (with E)
            price: 62755
        }; 

        payload = JSON.stringify(payload); // the payload needs to be sent as a string, so we need this
        var options = {
            method: "put",
            contentType: "application/json", // contentType property was mistyped as ContentType - case matters
            payload: payload
        }; 
        var result = UrlFetchApp.getRequest(url, options);
        Logger.log(result) // a better way to debug
        var result = UrlFetchApp.fetch(url, options); // works perfectly in my case
        Logger.log(result)
    } catch (e) {
        Logger.log(e)
    }
} 
```

# iphone - 获得正确的输出：NSXML 解析器

> ID：10888256
> 
> 赞同：0
> 
> 时间：2012-06-04T20:57:36.763
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我的 XML 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<plist version="1.0">
    <count count="3" />
    <spac>
        <opt>aa</opt>
        <opt>bb</opt>
    </spac>
</plist> 
```

我为 NSXML parssr 使用了以下代码行：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName 
 namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName 
attributes:(NSDictionary *)attributeDict {

if([elementName isEqualToString:@"spaces"]) {
    //Initialize the array.
    appDelegate.api = [[NSMutableArray alloc] init];

}

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string { 
[appDelegate.api addObject:string];
    NSLog(@"the count is :%d", [appDelegate.api count]);
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName 
namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
if([elementName isEqualToString:@"spaces"])
    return;
} 
```

但我在 gdb 得到以下输出，但我无法找出原因：

```
2012-06-05 02:20:57.940 XML[490:f803] the count is :0
2012-06-05 02:20:57.942 XML[490:f803] the count is :0
2012-06-05 02:20:57.943 XML[490:f803] the count is :1
2012-06-05 02:20:57.944 XML[490:f803] the count is :2
2012-06-05 02:20:57.945 XML[490:f803] the count is :3
2012-06-05 02:20:57.946 XML[490:f803] the count is :4
2012-06-05 02:20:57.946 XML[490:f803] the count is :5
2012-06-05 02:20:57.948 XML[490:f803] the count is :6
2012-06-05 02:20:57.948 XML[490:f803] the count is :7
2012-06-05 02:20:57.949 XML[490:f803] the count is :8 
```

有人可以帮我吗？我是目标 C 的新手。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:30:40.447

打印出两个零的原因是因为在第一个回调中，您仅在元素为`spaces`.

```
if([elementName isEqualToString:@"spaces"]) { //<- check for spaces to create array
    //Initialize the array.
    appDelegate.api = [[NSMutableArray alloc] init];

} 
```

但是，`- (void)parser:foundCharacters:`对于找到字符的每个元素都会调用它。因此，找到的第一个节点被添加到 nil 数组并打印 0。之后找到的任何节点`spaces`都将继续向其添加不需要的字符。如果您有如下所示的 XML，您可以看到正在发生的事情。

```
<xml>
   <node1>text that is found but gets added to a nil array (prints 0 count)</node1>
   <node2>more text that is found but gets added to a nil array (prints 0 count)</node2>
   <spaces>this is the spaces text that will get added to the array correctly</spaces>
   <node4>this text will be added to the non-nil array and appear to be spaces</node4>
</xml> 
```

# java - Java垃圾收集混乱

> ID：10888258
> 
> 赞同：2
> 
> 时间：2012-06-04T20:57:53.463
> 
> 标签：java, garbage-collection

如果我有一个持久的对象 A 和许多包含对 A 的引用的临时对象 B、C、D 等，只要 A 被某些东西引用，这些临时对象是否会被收集？

```
class A {} // (sits in web app session)

class B {
  private A a;
}

class C {
  private A a;
} 
```

其中 B 和 C 仅针对请求存在，但包含对 A 的引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T20:59:59.883

B 和 C 可以在请求后立即进行垃圾收集。没有任何东西提到他们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T20:59:56.013

如果无法到达 B 和 C（但它们会到达其他对象），它们将像往常一样被收集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T21:00:13.267

是的，它们可以被收集。如果 A 持有对它们的引用，那么只要 A 仍然可以访问，它们就不会被收集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T21:06:11.437

是他们会。只要可以从根可访问对象（基本上是当前活动调用中的局部变量，加上全局变量）可以访问它们，垃圾收集就会使对象保持活动状态。

如果`A`不包含对`B`and`C`对象的引用，那么它不能让它们保持活动状态；和对象`A`引用*的*事实`B`无关紧要。`C`

# c# - 从本地时间删除秒但保持格式

> ID：10888267
> 
> 赞同：3
> 
> 时间：2012-06-04T20:58:28.247
> 
> 标签：c#, silverlight, windows-phone-7

假设您已将 UTC 时间字符串转换为本地时间：

```
utcTimeString.ToLocalTime().ToString(); => "01/31/2012 12:00:00 PM" 
```

如何从结果字符串中删除秒但保持格式（在手机设置中设置？）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T21:02:56.440

要保留当前的文化信息，您可以执行以下操作：

```
utcTimeString.ToLocalTime().ToShortDateString() + 
" " + 
utcTimeString.ToLocalTime().ToShortTimeString(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T21:03:43.290

我会去

```
var date = utcTimeString.ToLocalTime();
date = date.AddSeconds(-date.Second);
string yourStr = date.ToString(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T21:01:09.070

```
utcTimeString.ToLocalTime().ToString("MM/dd/yyyy hh:mm tt"); 
```

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

作为替代方案，您可以使用

```
String.Format("{0:d} {0:t}",utcTimeString.ToLocalTime());
String.Format("{0:g}",utcTimeString.ToLocalTime()); 
```

[http://msdn.microsoft.com/en-us/library/az4se3k1.aspx](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

# iphone - 从后台返回时 AVCaptureSession 失败

> ID：10888269
> 
> 赞同：6
> 
> 时间：2012-06-04T20:58:37.700
> 
> 标签：iphone, ios, uiview, avcapturesession

我有一个相机预览窗口，它在 90% 的时间里都运行良好。但是，有时，如果它在后台返回我的应用程序，则不会显示预览。这是我在视图加载时调用的代码：

```
- (void) startCamera {

session = [[AVCaptureSession alloc] init];
session.sessionPreset = AVCaptureSessionPresetPhoto;

AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
captureVideoPreviewLayer.frame = _cameraView.bounds;
[_cameraView.layer addSublayer:captureVideoPreviewLayer];
captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
captureVideoPreviewLayer.position=CGPointMake(CGRectGetMidX(_cameraView.bounds), 160);

AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
NSError *error = nil;

AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
if (!input) {

    NSLog(@"ERROR: %@", error);

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Important!"
                                                    message:@"Unable to find a camera."
                                                   delegate:nil
                                          cancelButtonTitle:@"Ok"
                                          otherButtonTitles:nil];
    [alert show];
    [alert autorelease];
}

[session addInput:input];

stillImage = [[AVCaptureStillImageOutput alloc] init];
NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys:AVVideoCodecJPEG , AVVideoCodecKey, nil];
[stillImage setOutputSettings:outputSettings];

[session addOutput:stillImage];
[session startRunning];
} 
```

如果发生这种情况，我可以切换到我的偏好视图并再次返回，一切都很好，但这是一个我想杀死的烦人的错误。预览窗口是我故事板中的 UIView。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T21:02:38.337

不要在视图加载时启动捕获会话，而是在 viewWillAppear 上启动它并在 viewWillDissapear 上停止它。

当应用程序在后台时，您的视图控制器似乎正在清理一些内存。确保您在初始化捕获会话时牢记这一点。

在私有属性 getter 方法中而不是在您的 start 方法中懒惰地分配您的会话，您将通过这种方式避免内存泄漏。

# mongodb - pymongo：通过引用查询的最佳方式？

> ID：10888271
> 
> 赞同：0
> 
> 时间：2012-06-04T20:58:51.850
> 
> 标签：mongodb, pymongo

我在一个集合中有一堆`Paper`文档。`Papers`每个文档`Paper`都有一个 DBRef `Person`。所以`Paper`文档中的 person 属性是正确的 DBRef`Person`

人

```
{'name' : 'Person A', 'slug' : 'PA'},
{'name' : 'Person B', 'slug' : 'PB'} 
```

纸

```
{'name' : 'Paper 1', 'person': DBRef},
{'name' : 'Paper 2', 'person': DBRef},
{'name' : 'Paper 3', 'person': DBRef} 
```

我想创建一个查询，返回所有引用 Person A (slug=='PA') 的论文。我尝试在查询中进行过滤，但在 map reduce 语句中失败。在 pymongo 中处理这个问题的最佳方法是什么？

**此查询不返回任何结果**

```
for paper in db['papers'].find({'person.slug' : 'PA'}): 
    print paper 
```

**Map Reduce 也返回零结果**

```
mapper = Code("""
                function () {
                if (this.person.slug == slug) {
                        emit (this, 1);
                        }
                }
    """)

    reducer = Code("""
        function (key, values) {
            return key;
        }
    """)
    result = db['papers'].map_reduce(mapper, reducer, "myresults",  scope={'slug' : 'PA'})
    for doc in result.find():
        print doc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:27:04.000

看起来我可以这样做，并且我不能使用其他属性

```
for paper in db['papers'].find({'person.$id' : person['_id']}): 
```

# command-line - 启动 7zip 并从控制台获取输出

> ID：10888273
> 
> 赞同：1
> 
> 时间：2012-06-04T20:58:55.337
> 
> 标签：command-line, freepascal, 7zip

在一个 Lazarus (freepascal) 项目中，我添加了一个带有这些选项的 TAsyncProcess：`[poUsePipes,poStderrToOutPut]`捕获输出并显示最后一行。

使用该`ReadData`事件，如果我抓取一些文本，我添加了一些显示最后一行的代码：

```
procedure TForm1.AsyncProcess1ReadData(Sender: TObject);
var
  aOutput: TStringList;
  iCpt: integer;
  sLine: string;
begin
  aOutput := TStringList.Create();
  aOutput.LoadFromStream(AsyncProcess1.Output);

  if (aOutput.Count > 0) then
  begin
    setStatus(aOutput.Strings[aOutput.Count-1]);
  end;
end; 
```

然后我试图得到最后一个非空行：

```
procedure TForm1.AsyncProcess1ReadData(Sender: TObject);
var
  aOutput: TStringList;
  iCpt: integer;
  sLine: string;
begin
  aOutput := TStringList.Create();
  aOutput.LoadFromStream(AsyncProcess1.Output);

  if (aOutput.Count > 0) then
  begin
    // Get the last non-empty line
    for iCpt := (aOutput.Count-1) to 0 do
    begin
      sLine := aOutput.Strings[iCpt];
      if Length(Trim(sLine)) > 0 then
      begin
        setStatus(sLine);
        Break;
      end;
    end;
  end;
end; 
```

两者都没有显示。我已经成功地使用了 ffmpeg 的第一个代码。谢谢！

# jquery - 当 div 添加到 dom 时，使其可放置

> ID：10888275
> 
> 赞同：1
> 
> 时间：2012-06-04T20:59:07.607
> 
> 标签：jquery

是否可以允许将动态添加到 dom 的新 div 设置为 droppable ？

我正在尝试这个：

```
var myDroppable = '<div id="myDroppableDiv" >New droppable</div>';
$("#myDroppables").append(myDroppable ); 
```

但收到此错误：

```
Object has no method 'droppable' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T21:02:53.170

只需在`droppable`附加该方法后立即调用它：

```
$(myDroppable).appendTo('#myDroppables').droppable(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:02:47.960

是的; 你可以这样做：

```
​var d = $('<div />').droppable();​​​​​
​d.appendTo('body');​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/t4CCn/)。

# hyperlink - DNN Radeditor - 超链接管理器

> ID：10888276
> 
> 赞同：0
> 
> 时间：2012-06-04T20:59:09.910
> 
> 标签：hyperlink, dotnetnuke

由于我更新到版本 06.02.00，超链接管理器仅显示来自门户 0 的页面，而不是我正在创建的新父门户。最近几天我在谷歌上搜索过，找不到任何东西。这仅影响新门户，而不影响在此安装之前创建的现有门户。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T22:55:20.303

超链接管理器是开发人员并由 DNN 人员支持。您可以直接在他们的论坛中询问他们[http://www.dotnetnuke.com/Community/Forums/tabid/795/forumid/108/threadid/364908/scope/posts/Default.aspx](http://www.dotnetnuke.com/Community/Forums/tabid/795/forumid/108/threadid/364908/scope/posts/Default.aspx)

# neo4j - neo4j：如何更改数据库存储位置？

> ID：10888280
> 
> 赞同：40
> 
> 时间：2012-06-04T20:59:30.327
> 
> 标签：neo4j

嗨，我使用自定义 java 应用程序创建了一个 neo4j 数据库，并尝试更改配置文件中的路径以连接到创建的数据库。

尝试在 webadmin 控制台中检查数据时，只有节点 0 可见（似乎数据库为空）。我试图将相同的数据库导入到 Gephi 并且它不是空的。

此外，当我尝试切换回也不是空的原始数据库时，在 webadmin 中只出现了节点 0。

我尝试通过以下方式修改 neo4j-server.properied 文件：

```
#*****************************************************************
# Administration client configuration
#*****************************************************************

# location of the servers round-robin database directory. possible values:
# - absolute path like /var/rrd
# - path relative to the server working directory like data/rrd
# - commented out, will default to the database data directory.
org.neo4j.server.webadmin.rrdb.location=data/rrd

# REST endpoint for the data API
# Note the / in the end is mandatory
#org.neo4j.server.webadmin.data.uri=/db/data/ #original database
org.neo4j.server.webadmin.data.uri="/db/mydatabase" #my database

# REST endpoint of the administration API (used by Webadmin)
org.neo4j.server.webadmin.management.uri=/db/manage/

# Low-level graph engine tuning file
org.neo4j.server.db.tuning.properties=conf/neo4j.properties 
```

切换回原始数据库后（注释新路径并取消注释旧路径）

```
org.neo4j.server.webadmin.data.uri=/db/data/ #original database
#org.neo4j.server.webadmin.data.uri="/db/mydatabase" #my database 
```

旧的似乎也是空的。

有谁知道如何以及在哪里设置路径以便在 webadmin 控制台中查看适当的数据库并能够在所需的数据库上执行查询？

谢谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-01T11:45:20.557

您首先需要确认您正在连接的数据库已正确关闭（意味着您不应拍摄正在运行的数据库的映像）。

如果您处于服务器模式，请从文件设置数据库的位置

```
conf/neo4j-server.properties 
```

通过编辑以下行。

```
org.neo4j.server.database.location=data/graph.db 
```

如果您使用的是嵌入式 neo4j，您可以在实例化 GraphDatabaseService 时设置数据库的位置，如下所示：

```
new EmbeddedGraphDatabase("Path To Db Directory"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T01:14:42.123

您需要像这样设置数据库目录在磁盘上的位置：

```
org.neo4j.server.database.location=data/graph.db 
```

请参阅[http://docs.neo4j.org/chunked/stable/server-configuration.html](http://docs.neo4j.org/chunked/stable/server-configuration.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-25T15:14:24.503

对于其他努力寻找此文件的人 - 在我的 Ubuntu 上，我在`/etc/neo4j/neo4j.conf`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-28T07:46:06.053

我通过编辑行做到了这一点

```
# dbms.active_database=graph.db 
```

至

```
dbms.active_database=new.db 
```

在文件中`conf/neo4j.conf`

# php - 使用返回的数据通过 ajax 执行额外的 javascript 测试

> ID：10888281
> 
> 赞同：0
> 
> 时间：2012-06-04T20:59:32.737
> 
> 标签：php, jquery, html, ajax, email

我有一个由 ajax 脚本调用的 mail.php 文件。为了完整起见，下面附上了 ajax 脚本。mail.php 文件所做的只是执行一些服务器端验证，如果一切顺利，则发送一封电子邮件，其中包含`mail()`从 ajax 请求发送的数据。

我想要做的是根据请求的响应执行一些额外的 javascript 操作。您可以看到，在当前状态下，请求的响应只是简单地回显到屏幕上，这很好。但现在我想根据响应修改 HTML 元素。

例如，假设如果邮件已发送，我想在页面上附加一个名为“OK”的图像，如果邮件未发送，我想在页面上附加一个名为“FALSE”的图像。我想做的（在伪代码中）是这样的：

```
if ( request is OKAY ) $('.contact').append('<img src"OK"');
else ( $('.contact').append('<img src="BAD''); 
```

有什么办法可以做到这一点？

谢谢！

**ajax 脚本如下所示：**

```
$('.submit').click(function() {
    $('div.load').html('<img src="images/load.gif" alt="Loading..." id="loading" />'); 

    //creation of variables to send
    var name = $('#name').val();
        email = $('#email').val();
        phone = $('#phone').val();

    $.ajax({
        url: 'mail.php',
        type: 'POST',
        data: 'name=' + name + '&email=' + email + '&phone=' + phone,

        success: function(result) {
            $('p.error,p.correct').remove();
            $('.contact').append(result);
            $('#loading').fadeOut(500, function() {
                $(this).remove();
            });

        }
    });

    return false; 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:03:32.160

假设您的 PHP 以文本“OKAY”响应：

```
if (result==="OKAY")
   $('.contact').append('<img src"OK" />');
else
   $('.contact').append('<img src="BAD" />'); 
```

或者：

```
$('.contact').append('<img src"' + (result==="OKAY"?'OK':'BAD') + '" />'); 
```

另一种方法是更新您的 PHP，使其返回包含消息和图像的 html，例如，成功时它可以返回：

```
Your request was successful. <img src="OK" /> 
```

*“我应该提一下，我也想保留当前的响应，以确保非 JS 用户也能收到适当的消息”*

非 JS 用户不会得到任何东西，因为您的 Ajax 代码使用 JS...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:09:06.917

这就是 AJAX 调用初始化中成功/错误对象的目的。您需要添加三个失败案例。前两个失败案例将通过`success`ajax 调用出现，都是由于服务器端问题。第二个错误情况是在`error`ajax 调用的情况下。此外，您的 Web 服务应该返回一个成功参数。将您的代码更改为类似这样以实现您所描述的内容：

```
$('.submit').click(function() {
    $('div.load').html('<img src="images/load.gif" alt="Loading..." id="loading" />'); 

    //creation of variables to send
    var name = $('#name').val();
        email = $('#email').val();
        phone = $('#phone').val();

    $.ajax({
        url: 'mail.php',
        type: 'POST',
        data: 'name=' + name + '&email=' + email + '&phone=' + phone,

        success: function(result) {
            if (result) {
                if (result.success) {
                    $(".contact").append("<img src='OK.jpg'>");
                    $('p.error,p.correct').remove();
                    $('.contact').append(result);
                    $('#loading').fadeOut(500, function() {
                        $(this).remove();
                    });
                } else { // The server returned data, but there was an error on the server side.
                    $(".contact").append("<img src='BAD.jpg'>");
                }
            } else { // The server had a problem and didn't return any data.
                $(".contact").append("<img src='BAD.jpg'>");
            }
        }
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            // There was an error in the AJAX call.
            $(".contact").append("<img src='BAD.jpg'>");
        },
    }
});

    return false; 
}); 
```

另外，您使用的`data`参数错误。忽略上面示例的数据部分并将其用作您的数据：

```
data: {
    name: name,
    email: email,
    phone: phone
} 
```

对于不懂 JavaScript 对象的人来说，这看起来很奇怪。如果您希望我解释为什么我们定义具有相同名称的变量，请告诉我，例如：`name: name`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T21:04:52.383

您可能希望服务器端处理程序通过响应返回其状态，例如格式化为 JSON（PHP 有一个函数）。

为了实现这一点并且仍然为非 JavaScript 用户获得良好的响应，我建议在 AJAX 中使用与表单`action`属性中不同的 URL，例如使用额外的查询参数 à la `?json=1`。然后，如果参数存在，您的脚本通常可以执行其标准输出并返回易于解析的 JSON（例如，包含当前响应文本和状态代码的关联数组）。如果您告诉它，jQuery 的 AJAX 接口可以自动将响应解析为 JSON。

# java - java中的易失性

> ID：10888293
> 
> 赞同：12
> 
> 时间：2012-06-04T21:00:47.383
> 
> 标签：java, concurrency, volatile

据我所知*volatile write* **发生在** *volatile read*之前，所以我们总是会在 volatile 变量中看到最新的数据。我的问题基本上涉及“**发生之前**”一词以及它发生在哪里？我写了一段代码来澄清我的问题。

```
class Test {
   volatile int a;
   public static void main(String ... args) {
     final Test t = new Test();
     new Thread(new Runnable(){
        @Override
        public void run() {
            Thread.sleep(3000);
            t.a = 10;
        }
     }).start();
     new Thread(new Runnable(){
        @Override
        public void run() {
            System.out.println("Value " + t.a);
        }
     }).start();
   }
} 
```

*（为清楚起见，省略了 try catch 块）*

在这种情况下，我总是看到要在控制台上打印值 0。如果没有`Thread.sleep(3000);`我总是看到值 10。这是发生在关系之前的情况，还是打印“值 10”，因为线程 1 更早地启动了线程 2？

很高兴看到每个程序启动时带有和不带有 volatile 变量的代码的行为都不同的示例，因为上面代码的结果仅取决于（至少在我的情况下）线程的顺序和线程休眠。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T21:07:36.973

您会看到值 0，因为读取是在写入之前执行的。您会看到值 10，因为写入是在读取之前执行的。

如果您想进行具有更多不可预测输出的测试，您应该让两个线程都等待 CountDownLatch，以使它们同时启动：

```
final CountDownLatch latch = new CountDownLatch(1);
new Thread(new Runnable(){
    @Override
    public void run() {
        try {
            latch.await();
            t.a = 10;
        }
        catch (InterruptedException e) {
            // end the thread
        }
    }
 }).start();
 new Thread(new Runnable(){
    @Override
    public void run() {
        try {
            latch.await();
            System.out.println("Value " + t.a);
        }
        catch (InterruptedException e) {
            // end the thread
        }
    }
 }).start();
 Thread.sleep(321); // go
 latch.countDown(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T21:09:11.437

发生之前确实与写入发生在任何后续读取之前有关。如果写入尚未发生，则确实没有关系。由于写线程正在休眠，所以在写之前执行读。

要观察实际的关系，您可以有两个变量，一个是易失的，一个不是。根据 JMM，它说在易失性写入之前写入非易失性变量发生在易失性读取之前。

例如

```
volatile int a = 0;
int b = 0; 
```

**线程 1：**

```
b = 10;
a = 1; 
```

**线程 2：**

```
while(a != 1);
if(b != 10)
  throw new IllegalStateException(); 
```

Java 内存模型说`b`应该始终等于 10，因为非易失性存储发生在易失性存储之前。并且在 volatile 存储之前发生在一个线程中的所有写入都发生在所有后续的 volatile 加载之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T21:16:50.913

不要坚持“发生在之前”这个词。它是事件之间的关系，由 jvm 在 R/W 操作调度期间使用。在这个阶段，它不会帮助你理解 volatile。关键是：jvm 命令所有 R/W 操作。jvm 可以随心所欲地订购（当然要遵守所有同步、锁定、等待等）。现在：如果变量是易失性的，那么任何读取操作都将看到最新写入操作的结果。如果变量不是易失的，则不能保证（在不同的线程中）。就这样

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T11:27:00.337

我已经重新措辞（更改粗体字体）您问题的第一句话中提到的发生之前的规则如下，以便可以更好地理解 -

“将**volatile 变量的值写入主存储器** 发生在**随后从主存储器读取该变量**之前”。

*   同样重要的是要注意，*易失性写入/读取总是发生在主内存中，而**不是**来自任何本地内存资源，如寄存器、处理器缓存等。*

上述happens-before规则的实际含义是**共享一个volatile变量的所有线程将始终看到**该变量的一致值。没有两个线程在任何给定时间点看到该变量的不同值。

相反，**共享非易失性变量的所有线程可能在任何给定时间点看到不同的值，**除非它没有通过任何其他类型的同步机制（例如同步块/方法、final 关键字等）进行同步。

现在回到您关于此规则之前发生的问题，我认为您稍微误解了该规则。该规则并未规定写入代码应始终在读取代码之前发生（执行）。相反，它规定如果写入代码（易失性变量写入）要在另一个线程中的读取代码之前在一个线程中执行，那么写入代码的效果应该在读取代码执行**之前****发生**在主存储器中，以便读取代码可以看到最新的值。

 **在没有 volatile（或任何其他同步机制）的情况下，这发生在之前不是强制性的，因此读取器线程可能会看到非 volatile 变量的陈旧值，即使它最近已由不同的写入器线程写入。因为写入器线程可以将值存储在其本地副本中，而无需将值刷新到主存储器。

希望上面的解释清楚:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-17T00:35:54.663

piotrek 是对的，这是测试：

```
class Test {
   volatile int a = 0;
   public static void main(String ... args) {
     final Test t = new Test();
     new Thread(new Runnable(){
        @Override
        public void run() {
            try {
                Thread.sleep(3000);
            } catch (Exception e) {}
            t.a = 10;
            System.out.println("now t.a == 10");
        }
     }).start();
     new Thread(new Runnable(){
        @Override
        public void run() {
            while(t.a == 0) {}
            System.out.println("Loop done: " + t.a);
        }
     }).start();
   }
} 
```

with volatile: 它总会结束

没有 volatile：它永远不会结束

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-31T12:23:23.453

来自维基：

> *特别是在 Java 中，happens-before 关系保证语句 A 写入的内存对语句 B 可见，也就是说，语句 A 在语句 B 开始读取之前完成其写入。*

因此，如果线程 A 用值 10 写入 ta 并且线程 B 稍后尝试读取 ta，那么发生之前的关系保证线程 B 必须读取线程 A 写入的值 10，而不是任何其他值。这很自然，就像爱丽丝买牛奶并把它们放进冰箱然后鲍勃打开冰箱看到牛奶一样。但是，当计算机运行时，内存访问通常不会直接访问内存，这太慢了。相反，软件从寄存器或缓存中获取数据以节省时间。它仅在发生缓存未命中时才从内存中加载数据。问题发生了。

让我们看看问题中的代码：

```
class Test {
  volatile int a;
  public static void main(String ... args) {
    final Test t = new Test();
    new Thread(new Runnable(){ //thread A
      @Override
      public void run() {
        Thread.sleep(3000);
        t.a = 10;
      }
    }).start();
    new Thread(new Runnable(){ //thread B
      @Override
      public void run() {
        System.out.println("Value " + t.a);
      }
    }).start();
  }
} 
```

线程 A 将 10 写入值 ta 并且线程 B 尝试将其读出。假设线程 A 在线程 B 读取之前写入，那么当线程 B 读取时，它将从内存中加载值，因为它没有将值缓存在寄存器或缓存中，所以它总是得到 10 由线程 A 写入。如果线程 A 在之后写入线程 B 读取，线程 B 读取初始值 (0)。所以这个例子没有展示 volatile 的工作原理和区别。但是如果我们像这样更改代码：

```
class Test {
  volatile int a;
  public static void main(String ... args) {
    final Test t = new Test();
    new Thread(new Runnable(){ //thread A
      @Override
      public void run() {
        Thread.sleep(3000);
        t.a = 10;
      }
    }).start();
    new Thread(new Runnable(){ //thread B
      @Override
      public void run() {
        while (1) {
          System.out.println("Value " + t.a);
        }
      }
    }).start();
  }
} 
```

如果没有*volatile*，即使在线程 A 将 10 写入 ta 之后发生某些读取，打印值也应始终为初始值 (0)，这违反了之前发生的关系。原因是编译器优化了代码并将 ta 保存到寄存器中，每次它都会使用寄存器值而不是从缓存中读取，当然这要快得多。但这也导致了happens-before关系违规问题，因为线程B在其他人更新后无法获得正确的值。

在上面的例子中，*易失性写入发生在易失性读取之前*意味着使用*易失性*线程B将在线程A更新它之后获得正确的ta值一次。编译器将保证每次线程 B 读取 ta 时，它必须从缓存或内存中读取，而不仅仅是使用寄存器的陈旧值。**

# iphone - 为什么应用程序可以在 iPhone 上运行，而不是在 iPad 上运行？

> ID：10888294
> 
> 赞同：0
> 
> 时间：2012-06-04T21:00:57.557
> 
> 标签：iphone, ios, ipad, ios-universal-app

我从一个仅限 iPhone 的应用程序开始，它在 iPhone 和 iPad 上都运行良好（它在 iPad 上的一个 iPhone 大小的小窗口中运行......这很好）。然后我为 Target Device Family 选择了 iPhone/iPad，并创建了一个空白的 MyViewController~ipad.xib。然后我决定将应用程序恢复到以前的状态，我删除了 ~ipad.xib 并将目标设备系列设置回仅 iPhone。

现在，我的视图像以前一样在 iPad 上显示，但我无法与视图交互。在 iPhone 上一切正常，但在 iPad 上，我的按钮似乎没有链接到它们相应的操作。但是，现在只有 nib，所以显然这些按钮是链接的，因为它们可以在 iPhone 上使用。

根据@wrights 的建议，我删除了所有模拟器文件并再次清理项目。然后我得到一个新的错误：`*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/hap/Library/Application Support/iPhone Simulator/5.1/Applications/83BECBAA-2558-4927-9347-FAC972168299/WxT.app> (loaded)' with name 'MainWindow-iPad''`

应用程序此时就崩溃了。

我想让应用程序在 iPad 上正常运行，就像以前一样……只需要一个笔尖。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:56:20.307

事实证明 Info.plist 中有一个条目导致了这个问题。这个问题“ [iOS 开发：如何防止 iPad 在 iPad 模式下运行通用应用程序？](https://stackoverflow.com/questions/4923933/ios-development-how-can-i-prevent-an-ipad-from-running-a-universal-app-in-ipad) ”帮助我找到了它。

![带有条目的 plist 图像：'主 nib 文件基本名称 (iPad)](../Images/a457b5308eb0b53d7beb2ce6aa904f42.png)

一旦我删除了与 iPad 相关的条目，就清除了原来的问题和新的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:04:09.473

在运行恢复的应用程序之前，请确保您已经清理了您的构建并从 iPad 中删除了该应用程序。通过不从设备中删除应用程序，这些 iPad 文件可能会保留在应用程序包中，即使您已将它们从项目中删除。

> 1.) 从模拟器和设备中完全删除应用程序。
> 
> 2.) 清洁构建。
> 
> 3.) 在您选择的设备上运行还原的应用程序。

## 在 Xcode 中

导航到菜单项**Product**然后向下到**Clean**如屏幕截图所示，或者只需按`Shift`+`Command ⌘</kbd>+`K``

![在此处输入图像描述](../Images/1b02b354cff71b25eacf7a6f2f6d1f6b.png)

# javascript - InfoBubble 打开特定选项卡

> ID：10888299
> 
> 赞同：0
> 
> 时间：2012-06-04T21:01:32.680
> 
> 标签：javascript, google-maps-api-3, infobubble

在 JavaScript 中，我发现了一个用于 google maps API v3 的简洁小插件，名为[InfoBubble](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html)。它在使高度定制的信息窗口变得容易方面做得很好。我似乎在那里找不到的是如何通过函数调用而不是单击选项卡按钮打开特定选项卡。我尝试了 setTabActive(index) 这是插件的功能之一，但它似乎不起作用。我是否遗漏了一些明显的东西，或者不仅仅是在 js 文件中挖掘正确的功能？

作为参考，这是我的代码：

```
var center = new google.maps.LatLng(//...getting some lat/lng coords...
var bubble = new InfoBubble(
{
    map: motherMap,
    position: center,
    minHeight: 250,
    maxHeight: 250,
    minWidth: 250,
    maxWidth: 250,
    tabClassName: "contentTab",
    padding: 3
});

//...creating tabs, getting which tab should be opened, setting the value of tabToShow and so on...

//at this point I've checked with console.out() and tabToShow is a number 0-2
bubble.setTabActive(tabToShow); 
```

即使使用该代码，每次都会打开第一个选项卡。任何想法将不胜感激。

**编辑**：实际上，我在这里发布后就自己解决了这个问题......在仔细查看代码后，我注意到作者，无论出于何种原因，使用从 1 开始的编号而不是 0。这是一个不错的插件，但肯定需要一些文档.. .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:02:11.953

确保选项卡已打开（您可以使用 isOpen() 方法检查）。

如果需要，可以修改 InfoBubble.prototype.open 以打开特定选项卡：

```
 window.setTimeout(function() {
         that.open_(opt_map, opt_anchor);
         that.setTabActive(_defaultTab);        
  }, 0); 
```

# git - gitosis vs gitolite？

> ID：10888300
> 
> 赞同：140
> 
> 时间：2012-06-04T21:01:35.090
> 
> 标签：git, gitosis, gitolite

我正在寻找安装 git 服务器以与我的团队共享项目。我不想在服务器上为每个需要 git 访问权限的开发人员创建一个具有 SSH 访问权限的用户帐户。似乎有两种解决方案可以解决这个问题：gitosis 和 gitolite。

我找不到两种解决方案之间的任何比较。它们之间的主要区别是什么？还有其他类似的解决方案吗？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2012-06-04T21:19:43.547

> 我正在寻找安装 git 服务器以与我的团队共享项目。

## 你可以*只*使用 git。

要拥有一个 git 服务器，您在远程服务器上唯一需要的就是 git。如果您不需要细粒度的权限（仅与您的团队共享表明这是可能的）或任何额外的功能，您不需要 gitolite 或类似的。

## 免安装解决方案

如果 git 在远程服务器上可用，您可以立即执行您所要求的操作，而无需执行任何操作

```
ssh [user@]server
cd repos/are/here/
mkdir project.git
cd project.git
git init --bare 
```

本地：

```
cd projects/are/here/project
git remote add origin [user@]server:repos/are/here/project.git
git push -u origin master 
```

## 设置一个 git 服务器很容易。

如果您想与专门的 git 用户一起做事，那么[设置 git 服务器](http://git-scm.com/book/en/Git-on-the-Server-Setting-Up-the-Server)的文档很短——因为它真的很容易做到。

总之：

*   安装 git
*   创建一个名为 git 的用户
*   将您和您团队的公钥添加到 git 用户的`.ssh/authorized_keys`文件中
*   将 git 用户的 shell 更改为`git-shell`
*   在服务器上创建 repos
*   开始 git pull/push 到 git@yourserver.com

使用专用 git 用户与不使用的*唯一*区别是，如果您设置 git 用户使用`git-shell`它，它将不允许自己做任何其他事情。不过，就充当 git 服务器而言，它与免安装解决方案相同

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2012-06-04T21:06:07.850

主要区别在于 gitosis 现在已经过时，不再积极维护。

Gitolite[功能更加完善](http://sitaramc.github.com/gitolite/g2/morefeatures_.html)，并且刚刚发布了它的[第三个版本](http://sitaramc.github.com/gitolite/why.html)。

它最有趣的功能是**[虚拟参考（简称 VREF）](http://sitaramc.github.com/gitolite/vref.html)**，它允许您声明任意数量的[更新挂钩](http://git-scm.com/docs/githooks)，它允许您通过以下方式限制推送：

*   **dir/file name**：
    假设您不希望初级开发人员将更改推送到 Makefile，因为它非常复杂：
    `- VREF/NAME/Makefile = @junior-devs`

*   **新文件的数量**：
    假设您不希望初级开发人员每次提交推送超过 9 个文件，因为您希望他们进行*小*提交：
    `- VREF/COUNT/9/NEWFILES = @junior-devs`

*   **高级文件类型检测**：
    有时文件具有标准扩展名（不能是 'gitignore'd），但它实际上是自动生成的。这是捕获它的一种方法：
    `- VREF/FILETYPE/AUTOGENERATED = @all`
    查看[`src/VREF/FILETETYPE`](https://github.com/sitaramc/gitolite/blob/master/src/VREF/FILETYPE#L28)以查看检测机制。

*   **检查作者电子邮件**：
    有些人希望确保“您只能推送自己的提交”。
    `- VREF/EMAIL-CHECK = @all`
    见[`src/VREF/EMAIL-CHECK`](https://github.com/sitaramc/gitolite/blob/master/src/VREF/EMAIL-CHECK)。

*   **对提交进行投票**：对提交
    进行投票的基本实现非常简单：
    `- VREF/EMAIL-CHECK = @all`.
    `# 2 votes required to push master, but trusted devs don't have this restriction`
    `# RW+ VREF/VOTES/2/master = @trusted-devs`
    `# - VREF/VOTES/2/master = @devs`
    参见[`src/VREF/VOTES`](https://github.com/sitaramc/gitolite/blob/master/src/VREF/VOTES)实施。

*   等等...

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-06-05T12:40:06.707

只是一个旁注。您还可以根据需要使用**Gerrit**：

[Gerrit 代码审查](https://code.google.com/p/gerrit/ "Gerrit 代码审查")

首先，Gerrit 似乎用于代码审查，但实际上您也可以使用它来管理用户并为他们提供良好定义的权限。您可以**绕过**代码审查（**通过访问控制**）并将其仅用于管理项目和 ssh 密钥。Gerrit 有一个非常强大的访问控制机制：

[Gerrit 访问控制](http://gerrit-documentation.googlecode.com/svn/Documentation/2.4/access-control.html)

您可以限制推送访问控制文档中定义的任何分支、标签或您可以想象的任何内容。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-15T14:31:36.203

要获得更快和更脏的解决方案，只需使用[git daemon](https://www.kernel.org/pub/software/scm/git/docs/git-daemon.html)并进行点对点。[这是一篇](http://geekaholic.github.io/blog/2012/05/14/git-on-p2p-development/)关于这样做的文章。

编辑：我承认这并没有严格回答 OP 的问题。我把它放在这里主要是为了像我这样的人，他们在寻找一种肮脏的方式来共享代码直到建立企业 github 帐户时遇到了这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-12T16:32:22.817

我已经搞砸了一段时间，让一个 git 服务器使用 LDAP 访问、细粒度访问控制等......发现了一个启示：使用[Gitlab](http://gitlab.org/)：

*   git 存储库
*   细粒度访问（afaik gitlab 在引擎盖下使用 gitolite）

如果您想要快速快速的安装方法：使用[bitnami 安装程序](http://bitnami.com/stack/gitlab)

# reflection - 如何在 Groovy 的父静态方法中获取已定义类的名称

> ID：10888306
> 
> 赞同：2
> 
> 时间：2012-06-04T21:02:15.933
> 
> 标签：reflection, groovy, static

注意：我发现另一个答案表明 Java 会将静态方法调用重定向到它自己的类，即使它是在子类上调用的，所以我想我需要找到一个 Groovy 解决方法，否则它就是不可行的。

这就是问题所在：我创建了一个带有“public static void main”的抽象通用“Launcher”类。这个想法是你扩展它并在你的子类中注释这样的方法：

```
@Command("Show an explorere shell")
public dir() {
    "explorer".execute()    
} 
```

这个类的父类有一个 main ，它反映了 @Command 注释，如果方法名称与您的参数匹配，则执行它。

问题是我不知道如何在父类的静态 main 方法中判断实际的实例化类是什么。

我很确定某处有一个技巧——“this”在静态中不起作用，堆栈跟踪不包含实际的类，只包含父类，我在类中找不到任何元信息或有帮助的 MetaClass 对象。

目前，我已经通过将子类的名称硬编码到父类的主类中来使其工作，如下所示：

```
public class QuickCli {
    public static void main(String[] args} {
        (new HardCodedChildClassName())."${args[0]}"()
    }
} 
```

我削减了很多，但这是一般的想法。我想更换

```
"new HardCodedChildClassName()" 
```

适用于任何扩展此类的类的东西。

鉴于上面的两个代码片段，该命令将从命令行执行为：

```
groovy HardCodedChildClassName dir 
```

尽管我不希望将所有 @Command 方法都设为静态，但如果必须，我可以这样做，但目前我什至不相信我能做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:24:39.350

我不确定这是否可能。无论如何，如果是的话，它很可能是一个丑陋的黑客。我建议使用这种替代方法：与其使用静态`main()`入口点，不如制作`QuickCli`一个`Runnable`. Groovy 会在启动时自动创建一个实例并调用`run()`它。

这里的一个小问题是捕获命令行参数。Groovy 通过将它们传递给带有`String[]`参数的构造函数来处理这个问题。实例化的类需要这个构造函数来捕获 args，但是在 Java 中，构造函数不是继承的。幸运的是，Groovy 有一个[`InheritConstructors`](http://groovy.codehaus.org/gapi/groovy/transform/InheritConstructors.html)注释可以解决这个问题。

这是一个外观示例：

```
class QuickCli implements Runnable {
    def args

    QuickCli(String[] args) {
        this.args = args
    }

    void run() {
        "${args[0]}"()
    }
}

@groovy.transform.InheritConstructors
class HardCodedChildClassName extends QuickCli {

    @Command("Show an explorere shell")
    public dir() {
        "explorer".execute()    
    }
} 
```

# windows - 将 DebugDiag 与内部应用程序一起使用

> ID：10888316
> 
> 赞同：3
> 
> 时间：2012-06-04T21:03:01.690
> 
> 标签：windows, debugging, iis, debug-symbols

如何将 DebugDiag 与内部应用程序一起使用？

我需要做什么（包括 obj 文件、程序集的链接等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T21:03:01.830

Debugdiag 分析需要符号（默认情况下，Microsoft 公共符号服务器已经配置了 Debugdiag）。所有下载的 Microsoft 公共符号都将放在“c:\symcache”中</p>

如果您有一个内部应用程序，并且您有符号，那么您只需将您的 PDB 文件（仅）添加到符号路径：“c:\symcache”</p>

在调试过程中，如果要设置断点，则还需要将符号添加到适当的路径中。“c:\symcache”

![dxdiag 配置的图像](../Images/dbcb5239968b85939ba7931186e6500d.png)

# javascript - 如何构建嵌套模型和视图？

> ID：10888318
> 
> 赞同：0
> 
> 时间：2012-06-04T21:03:02.860
> 
> 标签：javascript, backbone.js

使用主干.js：

我有一个包含多个属性的 ModelA 集合以及一个包含多个 ModelB 的“节点”。ModelB 还包含几个属性。

```
CollectionA

 ModelA
  Attribute 1
  .
  .
  Attribute n
  "Node"
     ModelB
       Attribute 1
       Attribute 2
     ModelB
       Attribute 1
       Attribute 2

 ModelA
  Attribute 1
  .
  .
  Attribute n
  "Node"
     ModelB
       Attribute 1
       Attribute 2
     ModelB
       Attribute 1
       Attribute 2 
```

我仍在研究视图，但主要思想是视图应该以类似的方式构建。（Collection View 拥有多个 View A，而 View A 拥有多个 View B）。同一个 ModelB 永远不会在多个 ViewB 之间共享。

Q1：设计是否有意义或者我应该考虑任何明显的缺陷？（这是我第一次尝试使用 BackboneJs）。

Q2：设置“节点”的最佳方式是什么？现在我正在使用一组 ModelB。是否可以在每个 ModelA 上拥有 ModelB 的集合？哪种方法更好？

任何指导方针都适用！

我还想指出，我已经阅读了有关相关问题的[这篇](https://stackoverflow.com/questions/6353607/backbone-js-structuring-nested-views-and-models)优秀文章（推荐）。但是，该案例并未以与此案例相同的方式将 ModelB 包含在数组/集合中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:41:43.387

Q1：设计是否有意义或者我应该考虑任何明显的缺陷？设计假设：集合 A 有许多模型 A，模型 A 有模型 B 集合，每个模型 B 都有自己的视图 B。

Q2：每个ModelA上可能有一个ModelB的集合吗？

答：可行。

模型在其中“包含”一堆相关的子模型是很常见的。你绝对可以通过创建（就像你提到的那样）一个数组、一个对象、一个包含这些模型 B 的集合（我们称之为容器）来实现它。基本的方法就是创建容器，然后实例化新模型和将它们插入。很可能您希望在这些模型 B 中对相关的父模型 A 进行某种引用，以便您稍后可以返回到该状态。就像每个模型 B 都有一个 ModelA_ID 作为属性。

这可能是对 Paul Uithol 的[Backbone-Relational](https://github.com/PaulUithol/Backbone-relational)的一个很好的使用。

使用 Backbone-Relational，您可以设置模型（类）并以具有模型 B 集合的方式定义它。这是代码的样子。

```
ModelA = Backbone.RelationalModel.extend({
    relations: [{
        type: Backbone.HasMany,
        key: 'modelBs',
        relatedModel: 'ModelB',
        collectionType: 'ModelBCollection',
        reverseRelation: {
            key: 'parentA'
        }
    }],
    defaults: ...,
    initialize: ...,
    etc. ... // Other instance properties and functions of model.
}); 
```

执行此操作时，您实例化的每个模型 A 都将拥有一组模型 B，可以通过 ModelA 属性引用这些模型`modelBs`B。或您指定的任何键。

下面是实例化 ModelA 的样子。

```
myModelA = new ModelA({
    // Setting up ModelA attributes...
    'modelBs': [1, 3, 7]
}); 
```

我已经实例化了 ModelA，并且在设置您可能已经定义的其他属性的同时，我还设置了 ModelA 的属性 modelBs 的值。这是与 ModelA 相关的每个 ModelB 的 id 数组。这就是您的集合如何知道哪些 ModelB 与此 ModelA 相关联。

```
myModelA.fetchRelated('modelBs'); 
```

您的`.fetchRelated()`调用向服务器发送请求，以使用 ModelB 1、3 和 7 填充 modelBs 集合。

当您想访问 ModelA 中的 ModelB 集合时，您只需执行以下操作。

```
myModelA.get('modelBs'); 
```

这将返回与该 ModelA 相关的 ModelB 集合，假设您已获取相关模型并且该集合中包含 ModelB。

Backbone-Relational 的好处是它可以很容易地在父模型的实例化时自动建立这些定义的关系。它还创建了反向关系，因此从父级到子级、子级到父级的上下遍历很容易。

如果我正在操作 ModelB 并想到达 ModelA，我使用我建立的 reverseRelation 键`parentA`。

```
someModelB.get('parentA');    // Points to the related ModelA 
```

当您在模型中有模型时，它还有助于解决绑定和其他一些问题。关系适用于一对一、一对多和反向关系。有一个多对多的解决方法，但我认为这并不常见，因为对于事物的设置方式来说，这是一个困难的命题。

至于观点，我不确定你到底在想什么，但你需要有一个“集合”的观点吗？

假设您有 ModelA 和 ModelB 的集合。每个 ModelB 都有一个关联的视图。老式 LIST 的概念很好地说明了这一点。

```
<div id="ModelAView">
    <ul>
        <li>ModelB_1</li>
        <li>ModelB_3</li>
        <li>ModelB_7</li>
    </ul>
</div> 
```

虽然有一堆 ModelB，但您已经将它们整齐地放在一个集合中。如果您使用数据驱动的方式来管理您的视图，则无需将视图对象放在另一个列表中。相反，您可以让它们自我管理！

```
// Assume when you instantiate ViewB, you pass to it a ModelB.

ViewB = Backbone.View.extend({
    initialize: function() {
        this.model.bind('remove', this.remove, this);
        this.model.bind('update:colorAttr', this.updateColor, this);
    },
    updateColor: function() {
        this.$el.css('color', this.model.colorAttr);
    }
}); 
```

现在假设您从您的收藏中删除了 ModelB。

```
myModelA.get('modelBs').remove(someModelB); 
```

然后与此模型B 关联的视图将自动从视图中删除。

不确定这是否是您的想法。我通常采用这种方法。无论如何，如果有更多细节，请在评论中发布。希望这可以帮助。

# eclipse - 如何使用 eclipse 在 juddiv3 中发布 Web 服务

> ID：10888319
> 
> 赞同：1
> 
> 时间：2012-06-04T21:03:03.843
> 
> 标签：eclipse, web-services, tomcat, uddi, juddi

我是 Web 服务的新手。我试图使用 eclipse(indigo) Web Service Explorer 将 JAX-WS Web Service 发布到 apache juddiv3。但是每次我尝试发布它时都会产生以下错误：

```
IWAB0135E An unexpected error has occurred.
UDDIException
Message part {urn:uddi-org:api_v2}get_authToken was not recognized.  (Does it exist in   service WSDL?) 
```

我正在使用以下组件：

(i) Eclipse Indigo（EE 版本）。

(ii) juddi-portal-bundle-3.1.2

(iii) 视窗 7

在发布 Web 服务时，我在 Eclipse 的“Web 服务资源管理器”的“操作”部分下使用以下条目：

1.  发布=业务

2.  发布格式=简单

3.  发布 URL="http://localhost:8080/juddiv3/services/publish"

4.  用户 ID = 根

5.  密码 = 根

6.  名称 = 业务 1

很多时候，当我按下“开始”按钮然后“请稍候”时。即使在很长一段时间后，也会显示“操作仍在进行中”的消息。

请帮我解决这个问题。

请建议是否有除 juddiv3 之外的任何其他框架可用于在本地机器上创建私有 UDDI。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T02:17:43.947

eclipse插件是一个已知问题。已提交错误。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=307202](https://bugs.eclipse.org/bugs/show_bug.cgi?id=307202)

仅供参考，jUDDI 团队正在努力将 v2 端点添加到 v3 服务器。这个用例是驱动因素之一。它现在几乎处于工作状态，将与 3.2 版本的 jUDDI 一起发布。

# android - 手机水平倾斜时屏幕背景发生变化

> ID：10888322
> 
> 赞同：0
> 
> 时间：2012-06-04T21:03:26.993
> 
> 标签：android, xml, android-layout

在我正在开发的 android 应用程序中，我给出了一种颜色的背景。当手机水平倾斜时，屏幕背景会变为以前颜色的浅色版本？怎么办，避免这种情况？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#228b22"
    android:orientation="vertical" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:20:10.130

除非您已将颜色更改编码到您的应用程序中，否则它不会在程序中发生。更有可能的是，您的设备的 LCD 质量低，视角有限。

# php - 在ajax加载页面后执行javascript脚本 - 不起作用

> ID：10888326
> 
> 赞同：1
> 
> 时间：2012-06-04T21:03:54.120
> 
> 标签：php, javascript, ajax, google-maps

我正在尝试使用 AJAX 获取页面，但是当我获取该页面并且它包含 Javascript 代码时 - 它不会执行它。

为什么？

我的 ajax 页面中的简单代码：

```
<script type="text/javascript">
alert("Hello");
</script> 
```

...并且它不执行它。我正在尝试使用 Google Maps API 并使用 AJAX 添加标记，所以每当我添加一个标记时，我都会执行一个获取新标记的 AJAX 页面，将其存储在数据库中，并且应该将标记“动态”添加到地图中。

但是由于我不能以这种方式执行单个 javascript 函数，我该怎么办？

我事先在页面上定义的函数是受保护的还是私有的？

** 使用 AJAX 功能更新 **

```
function ajaxExecute(id, link, query)
{
    if (query != null)
    {
        query = query.replace("amp;", "");
    }

    if (window.XMLHttpRequest)
    {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            if (id != null)
            {
                    document.getElementById(id).innerHTML=xmlhttp.responseText;
            }
        }
    }

    if (query == null)
    {
        xmlhttp.open("GET",link,true);
    }
    else
    {
        if (query.substr(0, 1) != "?")
        {
            xmlhttp.open("GET",link+"?"+query,true);
        }
        else
        {
            xmlhttp.open("GET",link+query,true);
        }
    }
    xmlhttp.send();
} 
```

** Deukalion 的解决方案 **

```
var content = xmlhttp.responseText;

if (id != null)
{

    document.getElementById(id).innerHTML=content;
    var script = content.match("<script[^>]*>[^<]*</script>");

    if (script != null)
    {
        script = script.toString().replace('<script type="text/javascript">', '');
        script = script.replace('</script>', '');
        eval(script);

    }
} 
```

在某些事件上，我必须在脚本中添加事件侦听器，而不仅仅是制作“select onchange='executeFunctionNotIncludedInAjaxFile();'”，我必须为此添加EventListener("change", functionName, false)。在正在评估的脚本中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T21:08:32.283

当您通过将容器设置`innerHTML`为一些更新的内容来更新页面时，浏览器根本不会运行其中的脚本。您可以找到`<script>`标签，获取它们`innerHTML`（IE 可能更喜欢`innerTEXT`），然后`eval()`自己编写脚本（这几乎是 jQuery 所做的，尽管它会在更新 DOM 之前使用正则表达式找到脚本）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T00:11:25.540

使用这个功能：

```
function parseScript(_source) {
    var source = _source;
    var scripts = new Array();

    // Strip out tags
    while(source.indexOf("<script") > -1 || source.indexOf("</script") > -1) {
        var s = source.indexOf("<script");
        var s_e = source.indexOf(">", s);
        var e = source.indexOf("</script", s);
        var e_e = source.indexOf(">", e);

        // Add to scripts array
        scripts.push(source.substring(s_e+1, e));
        // Strip from source
        source = source.substring(0, s) + source.substring(e_e+1);
    }

    // Loop through every script collected and eval it
    for(var i=0; i<scripts.length; i++) {
        try {
            eval(scripts[i]);
        }
        catch(ex) {
            // do what you want here when a script fails
        }
    }

    // Return the cleaned source
    return source;
} 
```

然后`parseScript(xmlhttp.responseText);`在您替换/添加内容时执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-30T00:48:16.540

万一其他人偶然发现了这个旧线程，Deukalion 接受的答案存在一个问题，有一个问题可能被忽略了：正如所写，脚本仅查找第*一个*脚本标记。如果存在多个脚本标签，则忽略所有其他标签。

一些小的调整可以解决这个问题。将一行从：

```
 var script = content.match("<script[^>]*>[^<]*</script>"); 
```

至：

```
 var script = content.match(/<script[^>]*>[^<]*<\/script>/g); 
```

另一个来自：

```
 script = script.toString().replace('<script type="text/javascript">', ''); 
```

至：

```
 script = script.join("").replace(/<script type="text\/javascript">/g, ''); 
```

现在它将收集所有 <script> 代码并按照页面上的顺序执行它们。否则，这是一个很好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T21:07:16.383

在 AJAX 请求之后，您可以创建一个“成功”函数，该函数可以获取返回的 html 并对其进行处理。*然后*将执行某些操作。

如果有代码示例，那么我可以针对这种情况提供代码解决方案。但仅使用标准 xmlhttprequest，可以完成以下操作：

```
xhr = new XMLHttpRequest();
xhr.open("GET","ajax_info.txt",true);
xhr.onreadystatechange=function()
{
if (xhr.readyState==4 && xhr.status==200)
  {
  document.getElementById("myDiv").innerHTML = xhr.responseText;
  }
}
xhr.send();
​ 
```

# symfony - Symfony2/Doctrine manyToOne-relationship 没有出现在表中

> ID：10888335
> 
> 赞同：2
> 
> 时间：2012-06-04T21:04:21.377
> 
> 标签：symfony, doctrine, many-to-one

我正在使用 Doctrine 模式，但遇到了麻烦，因为 manyToOne-relationships 之一不会保留在数据库中。我不知道为什么会这样，因为在我看来，语法看起来是正确的。

任何人都可以识别问题吗？

下面是我在 yaml 中的架构。运行后，我的 mysql-database 中没有与这两个实体相关的表 `php app\console doctrine:schema:update --force`。

```
Me\MyBundle\Entity\FreeTextField:
  type: entity
  table: null
  fields:
    id:
      type: integer
      id: true
      generator:
        strategy: AUTO
    name:
      type: string
    flagPrivate:
      type: boolean
    description:
      type: text
      nullable: TRUE
  oneToMany:
    entries:
      targetEntity: FreeTextEntry
      mappedBy: xfield

  lifecycleCallbacks: {  }

Me\MyBundle\Entity\FreeTextEntry:
  type: entity
  table: null
  fields:
    id:
      type: integer
      id: true
      generator:
        strategy: AUTO
    content:
      type: text

  manyToOne:
    xfield:
      targetEntity: FreeTextField
      inversedBy: entries
  manyToOne:
    registration:
      targetEntity: Registration
      inversedBy: freeTextEntries
  lifecycleCallbacks: {  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:49:17.473

[可能和这里](https://stackoverflow.com/questions/7818097/doctrine2-cannot-make-2-one-to-many-relations)一样的问题。您需要将所有 manyToOne 类型关联放在 Entity\FreeTextEntry 中的同一类型声明下，如下所示：

```
manyToOne:
  xfield:
    targetEntity: FreeTextField
    inversedBy: entries
  registration:
    targetEntity: Registration
    inversedBy: freeTextEntries 
```

# html - 这种同时具有徽标图像和文本的方法是否良好，或者是否有更好的方法和/或其他选项或考虑因素？

> ID：10888336
> 
> 赞同：-2
> 
> 时间：2012-06-04T21:04:29.910
> 
> 标签：html, css, seo, semantic-markup

当我尝试对此进行研究时，我发现很难将这种情况与备受争议的图像替换讨论和辩论区分开来，但就我而言，我想同时使用图像和文本。

问题是我想要同时拥有徽标和图像，但显然标题想要在它自己的行上，所以我将图像向左浮动以获得所需的效果。对我来说似乎很好，但我不记得以前遇到过这个问题，我真的需要第一次解决这个问题，所以我的问题是：这种方法有什么问题吗，有没有值得考虑的替代方法？任何进一步的考虑，例如我没有看到任何需要清除浮动，但也许我应该在 h1 标签之后做。

```
<html>
<head>
    <style>
    h1 {
    line-height:100px;
    font-size:75px;
    background:#eee;
    }

    img#logo {
    margin-right:20px;
    float:left;
    }
    </style>
</head>

<body>
    <img id="logo" src="http://placehold.it/100x100">
    <h1>Title</h1>
    <p>Page Content ...</p>
</body>
</html> 
```

这是 JSFiddle [http://jsfiddle.net/CAc3E/](http://jsfiddle.net/CAc3E/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:10:31.240

很好，但是将标题和徽标包装在`<header>`标签中会更有意义：

```
<body>
    <header>
        <img id="logo" src="http://placehold.it/100x100">
        <h1>Title</h1>
    </header>

    <section role="main">
        ...
    </section>

    <footer>
        ...
    </footer>
</body> 
```

此外，CSS 与语义无关，您可以使用 a`clear`或省略它。它只对您的访问者很重要，而不是搜索引擎如何看待您的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:11:06.203

我认为这种方法没有任何问题。搜索引擎应该忽略图像，每个人都很高兴。就我个人而言，我将徽标放在`h1`标签内只是因为我很懒惰，但我实际上并没有测试过它的缺点，所以请谨慎使用。

由于您强制标题与图像高度相同，因此我也不会预见到缺少`clear`样式会导致任何问题。但是，当然，在你发布这样的东西之前，在最坏的情况下测试浏览器（特别是 IE7 和 IE6，如果你的目标受众*真的很糟糕）。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T21:15:55.310

您应该问自己，徽标图像本身是否为页面提供了任何有意义的内容，或者它是否纯粹是一种视觉辅助。例如，如果您的徽标图像的替代文本属性类似于“公司徽标”，那么可能就是后者。我知道您不想使用图像替换技术来完全摆脱文本，但您可能会尝试使用徽标图像作为标题元素的背景，即：

```
<head>
    <style>
    h1#logo {
        background:url("http://placehold.it/100x100") 0 0 no-repeat #eee;
        font-size:75px;
        height: 100px;
        line-height: 100px;
        text-indent: 120px;
    }
    </style>
</head>

<body>
    <h1 id="logo">Title</h1>
    <p>Page Content ...</p>
</body>
</html> 
```

您需要根据自己的喜好进行调整，但这是一般的想法。

# java - 用 Java 检测歌曲

> ID：10888342
> 
> 赞同：1
> 
> 时间：2012-06-04T21:05:01.883
> 
> 标签：java, audio, detect

是否有使用 Java 检测当前播放歌曲的库？不仅使用 WinAMP 或 WMP，而且通常是一种聆听音频输出的技术？

谢谢你。

**编辑：不，我只想听音频输出并决定现在是否正在播放歌曲。不识别。是否有歌曲（正在播放）。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:12:47.267

您可以对音频输入进行傅里叶变换，并将其与数据库中各种歌曲的已知频率分布进行比较。如果它们足够接近，您可以说它们是相同的。

这显然有一些缺陷，但这是一个你可以解决的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T21:32:53.237

[CLAMP](http://membres.multimania.fr/clamp/)是 WinAMP 的不错选择。人们对这个问题的误解如此之深。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:04:07.637

您可以尝试两件事：1\. 做 STFFT 并寻找谐波关系。当然，这些也出现在普通语音中，因此您必须尝试音乐与语音中存在哪些谐波关系。2\. 分析重复节奏模式的包络。

# solr - SOLR 拒绝提供精确匹配，如何？

> ID：10888343
> 
> 赞同：0
> 
> 时间：2012-06-04T21:05:03.100
> 
> 标签：solr, solr-schema

我有以下字段类型（注意没有过滤器，没有标记器）

```
<fieldType name="text_names" class="solr.StrField" /> 
```

我使用该类型在我的架构中创建一个字段：

```
<field name="exact_type" type="text_names" indexed="true" stored="true" /> 
```

现在，我搜索`q=*:*&fq=exact_type:aa&fl=exact_type` 我仍然得到该字段中除“aa”以外的结果`exact_type`。
我在这里想念什么？

这也表现相同：

```
q=exact_type:aa&fl=exact_type 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-06T09:29:06.430

我不认为 "q=*:*" 与 DisMaxHandler 一起使用，我相信您正在使用它，这两个查询的正确语法应该是：

```
q=&fq=exact_type:aa&fl=exact_type

fq=exact_type:aa&fl=exact_type 
```

# msbuild - 如何在 MSBuild 中进行批处理？

> ID：10888344
> 
> 赞同：2
> 
> 时间：2012-06-04T21:05:11.510
> 
> 标签：msbuild

我不知道如何将值传递到 MSBuild 任务中，就像我使用方法一样。获取以下项目文件...

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" DefaultTargets="Main">
<PropertyGroup>
    <Var1>Foo</Var1>
    <Var2>Bar</Var2>
</PropertyGroup>

<Target Name="Main">
    <Message Text="$(Var1)" Importance="high" />
    <Message Text="$(Var2)" Importance="high" />
</Target>   
</Project> 
```

我想将 Message 任务重构为一个目标，然后将 Var1 和 Var2 传递给它以获得相同的输出。这是一个非常简化的示例，但概念是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:12:38.487

我想你想做这样的事情：

```
<ItemGroup>
  <Messages Include="Message1">
    <Text>Hello from Message1</Text>
  </Messages>
  <Messages Include="Message2">
    <Text>Hello from Message2</Text>
  </Messages>
</ItemGroup>

<Target Name="TestMessage">
  <Message Text="%(Messages.Text)"/>
</Target> 
```

这会产生以下输出：

```
TestMessage:
  Hello from Message1
  Hello from Message2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-20T15:14:59.283

这是为了补充而不是取代[@BryanJ 的回答](https://stackoverflow.com/a/10897972/429091)。

有两种类型的批处理。一种是使用语法时发生的[任务批处理。](http://msdn.microsoft.com/en-us/library/ms171474.aspx)`%(ItemName.MetaData)`您只需将此值指定到任务参数中，就好像`%(ItemName.MetaData)`只会扩展到一个特定值一样。然后，MSBuild 会自动多次执行任务，从而避免任务显式支持迭代项目列表的需要。

另一种批处理类型是[目标批处理](http://msdn.microsoft.com/en-us/library/ms228229)。当您使用 的`Inputs`和`Outputs`属性时，会发生目标批处理`<Target/>`。要以这样一种方式对任意一组 Item 进行批处理，以使每个 Item 只执行一次目标，您可以指定`Inputs="@(ItemName)" Outputs=%(Identity).bogus`. 重要的是它`%(Identity)`是存在的。批处理将查看所有可能的扩展，`Inputs`并`Outputs`根据这些扩展决定其批处理。因此，如果您希望 Target 为每个项目单独运行，则必须确保每个项目都获得唯一的扩展。我对@BryanJ 的代码进行了修改，以使用这种风格的 Target 批处理：

```
<?xml version="1.0"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" DefaultTargets="all">
  <ItemGroup>
    <Messages Include="Message1">
      <Text>Hello from Message1</Text>
      <Group>1</Group>
    </Messages>
    <Messages Include="Message2">
      <Text>Hello from Message2</Text>
      <Group>1</Group>
    </Messages>
    <Messages Include="Message3">
      <Text>Hello from Message3</Text>
      <Group>2</Group>
    </Messages>
  </ItemGroup>
  <Target Name="all" DependsOnTargets="TestMessage;TestMessageGrouping" />
  <!--
      Use the Inputs/Outputs attributes to specify Target
      batching. The metadata value I am batching over is
      Identity. Since Identity is unique per item, this means the
      Target will get run in full once for every value in
      Messages. We provide something bogus for Outputs. It is
      important that our bogus values do not coincide with real
      filenames. If MSBuild finds a file with the name of a value
      in Outputs and another file, with an older timestamp,
      matching the corresponding value in Inputs, it will skip
      running this Target. (This is useful in many situations, but
      not when we want to just print out messages!)
  -->
  <Target Name="TestMessage" Inputs="@(Messages)" Outputs="%(Identity).bogus">
    <Message Text="I will print the Text metadata property of %(Messages.Identity)" />
    <Message Text="%(Messages.Text)" />
  </Target>
  <!--
      If you want to combine Task and Target batching, you can specify
      a different metadata value than Identity to group the items
      by. I use the Group metadata I specified in the ItemGroup.
  -->
  <Target Name="TestMessageGrouping" Inputs="@(Messages)" Outputs="%(Group).bogus">
    <Message Text="I will print the Text metadata property of all messages from Group %(Messages.Group)" />
    <!--
        Now, within the Target batch, we use Task batching to print
        all of the messages in our %(Messages.Group) at once.
    -->
    <Message Text="%(Messages.Text)" />
  </Target>
</Project> 
```

输出：

```
TestMessage:
  I will print the Text metadata property of Message1
  Hello from Message1
TestMessage:
  I will print the Text metadata property of Message2
  Hello from Message2
TestMessage:
  I will print the Text metadata property of Message3
  Hello from Message3
TestMessageGrouping:
  I will print the Text metadata property of all messages from Group 1
  Hello from Message1
  Hello from Message2
TestMessageGrouping:
  I will print the Text metadata property of all messages from Group 2
  Hello from Message3 
```

# caching - mongodb：强制在内存中

> ID：10888345
> 
> 赞同：1
> 
> 时间：2012-06-04T21:05:15.077
> 
> 标签：caching, mongodb, memory, indexing

在使用 myisam 多年后，3 个索引 + 大约 500 列用于 Mio 行，我想知道如何“强制”mongodb 将索引存储在内存中以实现快速读取性能。

一般来说，它是一个简单的结构化表，所有查询都是 WHERE index1=.. or index2=... or index3=.. (myisam) 并且在 mongodb 中也非常简单。如果 mongodb 自己管理索引和 ram，那就太好了。但是，我不确定它是否确实如此，以及 mongodb 能否以最好的方式加速这些索引上的查询。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:43:03.347

> 如果 mongodb 自己管理索引和 ram，那就太好了。

MongoDB 根本不管理 RAM。它使用内存映射文件，基本上“假装”一切都是 RAM。

相反，操作系统负责管理哪些对象保存在 RAM 中。通常基于 LRU。

您可能需要检查索引的大小。如果您不能将所有这些索引都保留在 RAM 中，那么 MongoDB 的性能可能会很差。

> 但是，我不确定它是否确实如此，以及 mongodb 能否以最好的方式加速这些索引上的查询。

MongoDB 可以使用[覆盖索引](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields#RetrievingaSubsetofFields-CoveredIndexes)直接从数据库中检索。但是，您必须*非常*具体地了解返回的字段。如果包含不属于索引的字段，则它不会返回“仅索引”查询。

默认行为是包含*所有*字段，因此您需要查看特定查询并进行适当更改以允许“仅索引”。请注意，这些查询不包括`_id`，这可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:17:17.237

您不需要“强制”mongo 将索引存储在内存中。索引在您使用时被带入内存，然后一直保留在内存中，直到操作系统将其踢出。

MongoDB 将在可能的情况下自动使用覆盖索引。

# azure - 哪些工具可以提供 Azure blob 存储的计划备份？

> ID：10888361
> 
> 赞同：8
> 
> 时间：2012-06-04T21:06:31.463
> 
> 标签：azure, azure-storage

我正在寻找防止 IT 意外删除的最佳方法——可能是复制到磁盘或单独的 Azure 存储帐户或亚马逊。什么工具可以做到这一点？ [Redgate 云服务](https://cloudservices.red-gate.com/)似乎最适合我想要的东西，但它似乎需要每个容器的配置。我知道存在一些其他工具，例如[Cloud Storage Studio](http://www.cerebrata.com/products/cloudstoragestudio/)和[Azure Sync Tool](http://azurestoragesynctool.powerybase.com/)，但我认为它们不支持 Blob 存储的计划备份。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:14:07.997

Windows Azure 存储备份了异地复制，这意味着在任何给定时间总共有 6 个数据副本。Windows Azure 中没有可用的内置服务将 Azure 存储上的数据备份到 Azure 存储或用户定义的位置之外。

Windows Azure Azure 由 RESTful 接口管理，因此第 3 方供应商已经为此目的创建了应用程序。除了上述之外，我有机会使用[Gladinet](http://www.gladinet.com/c/index.php/gladinet-cloud-desktop-for-windows-azure-blob-storage/) Cloud Backup 解决方案在您的情况下可能很有用。根据我的经验，有一些可用的备份工具，但没有一个可以完美满足每个人的期望。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T05:25:19.567

防止 IT 意外删除的一种廉价方法是将 blob 快照到备份容器中。IT 必须非常持久地删除原始 blob 拍摄的所有快照，以便意外删除它。

“除非同时删除快照，否则无法删除具有快照的 blob。您可以单独删除快照，或者在删除源 blob 时告诉存储服务删除所有快照。如果您尝试删除仍然具有快照的 blob，你的电话将返回一个错误。”

[http://msdn.microsoft.com/en-us/library/windowsazure/hh488361](http://msdn.microsoft.com/en-us/library/windowsazure/hh488361)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T09:59:37.647

CloudBerry Backup：它支持 Amazon S3、Azure、Google 和更多云存储提供商 [http://www.cloudberrylab.com/amazon-s3-microsoft-azure-google-storage-online-backup.aspx](http://www.cloudberrylab.com/amazon-s3-microsoft-azure-google-storage-online-backup.aspx)

# dfa - NFA 到 DFA 的转换

> ID：10888362
> 
> 赞同：1
> 
> 时间：2012-06-04T21:06:36.470
> 
> 标签：dfa, nfa

当我们从 nfa 转换为 dfa 时，可能会出现如下图所示的结果......我的问题是，是否有必要从状态 {4} 写入它会变为零状态？我的意思是不显示 {4} 的输入符号 1 与右下图相同？或没有？

![在此处输入图像描述](../Images/b317ef85c754e04d953fce943db8d832.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:19:42.953

这是一个约定俗成的问题。就我个人而言，我不希望用不必要的状态将我的 DFA 弄乱，特别是因为通过 NFA 转换获得的 DFA 无论如何都会变得相当复杂，而且由于它是确定性的，我们知道任何未显示的转换都必须是无效的。

但是，我经历过学术界的许多人教授/使用其他约定，并要求明确显示所有转换。在担任 TA（导师）时，我实际上与一位教授讨论过这个问题——他希望我们的导师在 DFA 中缺少转换的最终测试中扣分，但我说服他为此扣分是不公平的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:11:30.813

没有必要写 {4}-> 0 转换，因为自动机已经接受了这个词。这种转变仅意味着这对我们的解决方案“没有意义”。但是对于细节，给出它是有用的，以展示整个自动机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T15:48:05.123

仅当您尝试绘制 MinimalFA (MFA) 时才重要。
实际上，您可以从单个 NFA 生成无限数量的 DFA，每个 NFA 的状态数不同。
如果你去掉图中**的“Dead States”**，你就会得到 MFA。如果你只想要一个 DFA，这个数字就可以了

# android - 对具有 HTL 格式的同一个 TextView 使用不同的字体

> ID：10888363
> 
> 赞同：1
> 
> 时间：2012-06-04T21:06:36.650
> 
> 标签：android, html, typeface

我已经知道如何为我的 TextView 指定自定义字体。截至目前，我的应用程序正在使用一种自定义字体，该字体分为两个 ttf 文件。一个用于常规字符，一个用于粗体字符。

现在，我希望能够像使用 Html.fromHtml() 一样使用两个 TextView。由于它适用于系统字体，它应该能够使用我自己的字体来完成。目前，粗体字符是用常规字体和假粗体文本绘制的，非常难看。

任何想法 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:40:51.060

如果要在单个 TextView 中使用多个自定义字体：

## 使用以下代码：（我使用的是孟加拉语和泰米尔语字体）

```
 TextView txt = (TextView) findViewById(R.id.custom_fonts);  
        txt.setTextSize(30);
        Typeface font = Typeface.createFromAsset(getAssets(), "Akshar.ttf");
        Typeface font2 = Typeface.createFromAsset(getAssets(), "bangla.ttf");   
        SpannableStringBuilder SS = new SpannableStringBuilder("আমারநல்வரவு");
        SS.setSpan (new CustomTypefaceSpan("", font2), 0, 4,Spanned.SPAN_EXCLUSIVE_INCLUSIVE);
        SS.setSpan (new CustomTypefaceSpan("", font), 4, 11,Spanned.SPAN_EXCLUSIVE_INCLUSIVE);
        txt.setText(SS); 
```

* * *

结果是：

![在此处输入图像描述](../Images/c4933febeef66f9703b0f0684b64deff.png)

* * *

## CustomTypefaceSpan 类：

```
package my.app;
import android.graphics.Paint;
import android.graphics.Typeface;
import android.text.TextPaint;
import android.text.style.TypefaceSpan;

public class CustomTypefaceSpan extends TypefaceSpan {

private final Typeface newType;

public CustomTypefaceSpan(String family, Typeface type) {
    super(family);
    newType = type;
}

@Override
public void updateDrawState(TextPaint ds) {
    applyCustomTypeFace(ds, newType);
}

@Override
public void updateMeasureState(TextPaint paint) {
    applyCustomTypeFace(paint, newType);
}

private static void applyCustomTypeFace(Paint paint, Typeface tf) {
    int oldStyle;
    Typeface old = paint.getTypeface();
    if (old == null) {
        oldStyle = 0;
    } else {
        oldStyle = old.getStyle();
    }

    int fake = oldStyle & ~tf.getStyle();
    if ((fake & Typeface.BOLD) != 0) {
        paint.setFakeBoldText(true);
    }

    if ((fake & Typeface.ITALIC) != 0) {
        paint.setTextSkewX(-0.25f);
    }

    paint.setTypeface(tf);
}
} 
```

* * *

[参考](https://stackoverflow.com/questions/4819049/how-can-i-use-typefacespan-or-stylespan-with-custom-typeface)

# wolfram-mathematica - 为什么 PlotLegend 在 Mathematica 6.0 中是一个未知选项？

> ID：10888365
> 
> 赞同：0
> 
> 时间：2012-06-04T21:06:44.013
> 
> 标签：wolfram-mathematica

我想`PlotLegend`在情节的右上角有一个，但这个选项不起作用。

我怎样才能添加`PlotLegend`到我的`Plot`？我应该购买 Mathematica 8 吗？

```
u=Sech[x];
w=Cos[x];
v=Sin[x]^2;

Plot[{u,w,v},{x,-5,5},PlotStyle->{Automatic,Dashed,DotDashed},
    PlotLegend->{"Sech[x]","Cos[x]","Sin[x]"}] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T23:27:55.570

`PlotLegend`一直（至少从 2.2 开始）是通过附加包加载的。

如果需要，请升级，但使用加载图例`Needs["PlotLegends`"]`应该可以解决问题。

# java - 使用 JavaFX 2.1 编译和运行

> ID：10888367
> 
> 赞同：12
> 
> 时间：2012-06-04T21:07:02.403
> 
> 标签：java, runtime, mp3, javafx, noclassdeffounderror

我正在尝试使用从另一个stackoverflow页面（[here](https://stackoverflow.com/questions/6045384/playing-mp3-and-wav-in-java)）获得的一组简单的代码行来非常简单地使用JavaFX。但是，问题显然不在于该代码，而在于构建和运行过程中更基本的东西。

这是我的代码：

```
import javafx.scene.media.Media;
import javafx.scene.media.MediaPlayer;
.
.
.
Media medMsg = new Media("msg.mp3");
MediaPlayer medplMsg = new MediaPlayer(medMsg);
medplMsg.play(); 
```

起初我根本无法编译它。最终我发现我需要将 -classpath c:\Program Files\Oracle\JavaFX 2.1 SDK\lib\rt\jfxrt.jar 放在我的 javac 命令行上。（这里一个明显的复杂问题是：为什么没有在任何明显的地方记录它（1）这是需要的，（2）如何准确地确定 JavaFX 安装的路径是什么？！）

但是，当我运行代码时，我得到：

```
Exception in thread "main" java.lang.NoClassDefFoundError: javafx/scene/media/Media

    at progtest.main(progtest.java:120)
Caused by: java.lang.ClassNotFoundException: javafx.scene.media.Media
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 1 more 
```

这是什么意思？看起来它在运行时不知道如何找到类 javafx.scene.media.Media。但是，我的 %CLASSPATH% 变量中肯定有“c:\Program Files\Oracle\JavaFX 2.1 SDK\lib\rt\jfxrt.jar”。

有任何想法吗？先感谢您！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T21:38:52.780

这个问题有些重复[compile javafx 2.0 manual](https://stackoverflow.com/questions/9436219/compile-javafx-2-0-manually)。

*此答案专门针对 Oracle Java 8 发布之前的 JavaFX 2 版本。对于 Oracle JavaFX 8+，JavaFX 运行时位于类路径中，因此您无需在编译或运行 JavaFX 的应用程序时显式添加它。*

Java 包括 jdk7u6 及更高版本（适用于 Windows 和 Linux）和 jdk7u4 及更高版本（适用于 OSX）中的 JavaFX。

下载并使用 jdk7u6+，您无需在任何类路径中指定 jfxrt.jar 文件，所有与 JavaFX 相关的类路径问题都应该消失。

这是[jdk7u6 早期二进制构建的链接](http://jdk7.java.net/download.html)。

对于 Windows 上的 JavaFX 2.1，您确实需要在类路径中包含 jfxrt.jar 库以进行编译（如果您使用它的 JavaFX 平台设置，NetBeans 会自动执行此操作）和（如果您没有使用 javafxpackager 或 JavaFX 正确打包您的应用程序ant 任务），也在运行时。

适用于 Linux 的 JavaFX 2.1 是一个预发布版本（如果您正在使用它）。对于 Linux 预发行版，如果 Linux 上的 JavaFX 运行时设置不正确，您只需在编译和运行时都将 jfxrt.jar 包含在类路径中。

下面是一个在windows下命令行编译和执行JavaFX程序的例子。

启动编辑器：

```
C:\dev\test>notepad HelloWorld.java 
```

粘贴以下代码并保存：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.stage.Stage;

public class HelloWorld extends Application {
  public static void main(String[] args) {
    launch(args);
  }
  @Override
  public void start(Stage stage) {
    stage.setScene(new Scene(new Label("Hello World")));
    stage.show();
  }
} 
```

编译并运行它*JavaFX 2.2*：

```
C:\dev\test>javac -cp "\Program Files\Oracle\JavaFX 2.2 Runtime\lib\jfxrt.jar" HelloWorld.java
C:\dev\test>java -cp ".;\Program Files\Oracle\JavaFX 2.2 Runtime\lib\jfxrt.jar" HelloWorld 
```

对于 Oracle Java 8+，不需要显式 JavaFX 类路径说明符：

```
C:\dev\test>javac HelloWorld.java
C:\dev\test>java HelloWorld 
```

请注意，通常不仅仅是编译代码并运行它，您还可以使用 javafxpackager 或 javafx ant 任务打包代码。这些任务将在打包的应用程序中嵌入一个启动器类，该类将检测 JavaFX 运行时的版本和位置，因此您无需指定 jfxrt.jar 位置，除非您想覆盖平台的默认位置。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-04-18T19:34:04.017

对于 Java 7 update 21，Windows XP SP3，我使用

```
javac -cp "\Program Files\Java\jre7\lib\jfxrt.jar"   HelloWorld.java 
```

和

```
java -cp ".;\Program Files\Java\jre7\lib\jfxrt.jar"   HelloWorld 
```

# wcf - 如何为 WCF 服务库创建 wsdl 文件？

> ID：10888372
> 
> 赞同：1
> 
> 时间：2012-06-04T21:07:18.280
> 
> 标签：wcf, wcf-binding

我有一个 WCF 服务库项目。我正在尝试通过在 Visual Studio 中运行 WCF 测试客户端（按 F5）来生成 wsdl 文件。它启动了 WCF 测试客户端，但显示“无法添加服务。服务元数据可能无法访问。确保您的服务正在运行并公开元数据。”。它还给了我以下错误消息。

c:\Users\xxx\AppData\Local\Temp\Test Client Projects\10.0\354421b1-b65e-45fc-8d98-ac87254a5903\Client.cs(911,26)：错误 CS0644：“System.ComponentModel.PropertyChangedEventHandler”无法派生来自特殊类“System.MulticastDelegate”

我添加了服务行为来公开元数据，如下所示。我不确定我在这里还缺少什么能够生成 wsdl 文件。谢谢你的帮助！

```
<services>
  <service name="CU.Customer" behaviorConfiguration="Metadata">
    <endpoint address="" binding="wsHttpBinding" contract="CU.ICustomer">
      <identity>
        <dns value="localhost"/>
      </identity>
    </endpoint>
    <endpoint name="mex" address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/Design_Time_Addresses/CustomerService/Service1/"/>
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="Metadata">
      <!-- To avoid disclosing metadata information, 
      set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="True"/>
      <!-- To receive exception details in faults for debugging purposes, 
      set the value below to true.  Set to false before deployment 
      to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="False"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:13:35.983

您的元数据绑定没有任何问题，但您的服务中存在编译器错误。这会阻止 WCF 构建您的服务类，这是公开元数据端点所需的。

先修复这个错误：

> “System.ComponentModel.PropertyChangedEventHandler”不能从特殊类“System.MulticastDelegate”派生

当 WCF 尝试将服务合同在本地编译为可用于访问服务的类时，会发生错误（请注意，它位于临时文件中）。这意味着您遇到了在 C# 中合法但在 WCF 中不合法的东西。最有可能的是，鉴于错误，您有一个实现`INotifyPropertyChanged`在您的操作合同中用作数据联系人的类。

请注意，通过 WCF 通道序列化的*每个类都是一个数据协定。*通常你会用属性来装饰你的类，`DataContract`每个字段都会`DataMember`指示序列化器如何处理你的类。但是，如果您不这样做，并且将您的类作为参数或返回值包含在 中`OperationContract`，WCF就会*假装*您将这些属性放在类中的*每个*公共字段上。

在这种情况下，我猜你有一个类，你传入或传出一个服务调用，它有：

```
 public event PropertyChangedEventHandler PropertyChanged; 
```

这是一个公共字段，因此除非您另外告诉 WCF，否则它将尝试将其序列化为隐式数据协定的一部分。但是有些类型不能以这种方式序列化，并且`MulticastDelegate`是其中之一。

要解决并在将来避免此问题，请*始终*`DataContract`使用和`DataMember`显式装饰您用于服务的类型。将这些属性放在任何类上都是非常安全的——如果你从不尝试序列化它，这些属性就会被忽略。

# python - 在 django 中创建供下载的电子表格

> ID：10888373
> 
> 赞同：0
> 
> 时间：2012-06-04T21:07:27.107
> 
> 标签：python, django, linux, unix

我正在使用 xlrd 创建电子表格。在网站上，用户将能够创建自定义报告并下载该 xls 文件。

通常，我将文件存储在 S3 上，但在这种情况下，有没有办法不将文件存储在任何地方而直接将其提供给用户？或者如果我不想使用 S3 保存文件，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:17:13.127

[xlrd](http://www.python-excel.org/)是个不错的选择。关于生成和下载过程 - 这取决于使用的 web 框架，这里是web2py[的示例](http://thadeusb.com/weblog/2010/1/17/download_of_a_filelike_python_object_in_web2py)。

# ruby-on-rails - 模型关联的 Meta_search 错误

> ID：10888376
> 
> 赞同：0
> 
> 时间：2012-06-04T21:07:40.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, meta-search

我的控制器中有这些：

```
class AccountsController < ApplicationController
 def index
  @search = Account.search(params[:search])
  @accounts = @search.order("id desc").includes(:chef).page(params[:pagina]).per(10)
 end
end 
```

我的观点：

```
<%= f.text_field :username_or_email_or_chef_name_contains %> 
```

工作正常！但是，当我**基于 email**搜索时，我收到了这个错误：

```
ActiveRecord::StatementInvalid in Accounts#index 
Mysql2::Error: Column 'id' in order clause is ambiguous: SELECT  `accounts`.`id` AS t0_r0, `accounts`.`chef_id` AS t0_r1,... 
```

如果我取消帐户控制器的**.includes(:chef) ，则可以正常工作。**

**问题**

为什么会出现这个错误？出于性能原因，我不想`include`从帐户控制器中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:22:29.883

accounts 表和 chefs 表各有一个`id`列，因此 MySQL 不知道应该按哪些列排序。尝试在 order by 子句中指定表名：

```
@accounts = @search.order("accounts.id desc").includes(:chef).page(params[:pagina]).per(10) 
```

# php - 命令行中的警告变成带有ghostscript的php错误

> ID：10888378
> 
> 赞同：0
> 
> 时间：2012-06-04T21:07:41.703
> 
> 标签：php, pdf, ghostscript

我正在尝试使用 ghostscript 扫描 PDF 并告诉我哪些页面是彩色的，哪些是黑白的。我编写了一个脚本，用 ghostscript 打印出每一页及其颜色。当我使用命令行运行此脚本时，我收到以下警告：

```
Page 56
**** Warning: Short look-up table in the Indexed color space was padded with 0's. 
```

这似乎不是问题，因为脚本一直持续到它完成了所有剩余的 356 页。但是，当我使用 exec() 或 system() 函数在 PHP 中运行此脚本时，我在第 56 页得到以下信息：

```
Page 56 
Error: /ioerror in --run-- Operand stack: --dict:11/20(L)-- --dict:10/18(L)-- 3092695 
Indexed DeviceCMYK 56 
(\000\000\000\000\b\001\016\000\033\0040\000\005\001\t\000\002\000\003\000\)\007K\0008\bh\000N\017\224\000W\016\247\000r\034\327\000t\033\334\000\016\001\036\000D\t\177\000]\025\264\0003\007b\000S\021\234\000m\032\317\000\275t\007\000o9\t\000i\027\311\000;\to\000c\026\272\000,\006T\000\035\0047\000\022\002#\000\177jj\016uab\006r^_\005\f\t\t\000~ii\r\204oo\024SBC\000\005\003\003\000]KL\000o[\\\003\277\255\253\346\034\025\027\000@34\000\025\017\020\000gSU\001\275\254\252\335\265\245\243\255vac\007\271\252\247\312\221{z%\262\242\240\234%\034\035\0007+,\000\245\222\220X\212ut\033...) --nostringval-- 
Execution stack: %interp_exit .runexec2 --nostringval-- --nostringval-- --nostringval-- 2 %stopped_push --nostringval-- --nostringval-- --nostringval-- false 1 %stopped_push 1910 1 3 %oparray_pop 1909 1 3 %oparray_pop 1893 1 3 %oparray_pop --nostringval-- --nostringval-- 57 1 346 --nostringval-- %for_pos_int_continue --nostringval-- --nostringval-- --nostringval-- --nostringval-- %array_continue --nostringval-- --nostringval-- %loop_continue --nostringval-- 3092695 --nostringval-- --nostringval-- --nostringval-- --nostringval-- --nostringval-- --nostringval-- --nostringval-- --nostringval-- 
Dictionary stack: --dict:1162/1684(ro)(G)-- --dict:1/20(G)-- --dict:82/200(L)-- --dict:82/200(L)-- --dict:108/127(ro)(G)-- --dict:291/300(ro)(G)-- --dict:23/30(L)-- --dict:6/8(L)-- --dict:27/40(L)-- --dict:1/1(ro)(G)-- --dict:1/1(ro)(G)-- --dict:5/16(L)-- 
Current allocation mode is local Last OS error: 9 Unrecoverable error: ioerror in quit 
Operand stack: --nostringval-- --nostringval-- 
```

在我收到此错误后，PHP 脚本将停止并且不会像我在命令行中运行程序时那样继续。为什么我只会在 PHP 中得到这个错误，我该如何纠正它以忽略这些警告/错误？

以下是我调用 ghostscript 时的标志：

```
gs -dNOPAUSE -dBATCH -dSAFER -sDEVICE=display -dDisplayHandle=0 
   -dDisplayFormat=(values for DISPLAY_COLORS_RGB|DISPLAY_DEPTH_8|DISPLAY_LITTLEENDIAN|DISPLAY_BOTTOMFIRST) 
   test.pdf -f 
```

我也在使用ghostscript-9.05

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:02:53.953

您确定您的 PHP 调用 Ghostscript 会找到与您的命令行完全相同的版本吗？

您是否有可能在 2 个不同的位置安装了 2 个不同的 Ghostscript 实例？

你应该跑

```
gs -v 
```

和

```
gs -h 
```

从 PHP 内部以及命令行查看它们是否相同。

# java - 检查 Map 中的键

> ID：10888380
> 
> 赞同：-2
> 
> 时间：2012-06-04T21:07:48.087
> 
> 标签：java, map

谁能建议我为什么 if 条件在下面的代码中不起作用，因为记录的键为 SiteId。

```
while (!pdsxOutRecords.isEmpty()) {
PdsxRecord record = pdsxOutRecords.remove(0);
// The below if condition is not working
if(record.getAttrs().containsKey("SiteId")) {
System.out.println("Testing");
}
} 
```

而 PdsxRecord 类是这样的

```
public class PdsxRecord
{
    private String m_key;
    private Map<PdsxAttrKey, PdsxAttrValue> m_mapAttrs;

}
// constructor
    public PdsxRecord(String key, Map<PdsxAttrKey, PdsxAttrValue> mapAttrs)
    {
        m_key = key;
        m_mapAttrs = mapAttrs;
    }

    public String getKey()
    {
        return m_key;
    }

    public Map<PdsxAttrKey, PdsxAttrValue> getAttrs()
    {
        return m_mapAttrs;
    } 
```

下面的东西通过使用打印出来`record.getAttrs()`

```
{Gem.2036=null, Gem.2037=null, Gem.2038=com.ebay.pdsx.common.PdsxAttrValue@6b306b30, Gem.2039=null, Gem.10230=null, Gem.10117=null, Gem.10119=null, Gem.10240=null, UID=com.ebay.pdsx.common.PdsxAttrValue@1e501e50, Gem.10001=null, Gem.10002=com.ebay.pdsx.common.PdsxAttrValue@5d095d09, Gem.10003=null, Gem.10246=null, Gem.10247=null, Gem.60001=null, Gem.10007=null, Gem.10009=null, GEM_ROUTING.PartnerLastModifiedDate=null, Gem.70006=null, CGUID=com.ebay.pdsx.common.PdsxAttrValue@1e361e36, Gem.10173=null, Gem.10097=null, Gem.10131=null, Gem.10010=null, Gem.10132=null, Gem.10177=null, Gem.10178=null, Gem.10179=null, Gem.10015=null, TimeStamp=com.ebay.pdsx.common.PdsxAttrValue@1e571e57, Gem.10016=com.ebay.pdsx.common.PdsxAttrValue@645e645e, Gem.10018=null, Gem.10019=null, Gem.2025=null, SiteId=com.ebay.pdsx.common.PdsxAttrValue@1e3f1e3f, GEM_ROUTING.Partner1LastLoggedInUserId=null, GEM_ROUTING.Partner3LastLoggedInUserId=null, Gem.10181=null, Gem.10182=null, Gem.10183=null, Gem.10185=null, Gem.10187=null, Gem.10101=null, Gem.10189=null, Gem.10102=null, Gem.10026=null, PGuid=com.ebay.pdsx.common.PdsxAttrValue@1e461e46, Gem.2032=null, SGuid=null, Gem.2033=null, Gem.2034=null, Gem.2035=null} 
```

这是下面的 PdsxRecord 类

```
 public class PdsxRecord
{
    private String m_key;
    private Map<PdsxAttrKey, PdsxAttrValue> m_mapAttrs;

    // use the other constructor!
    protected PdsxRecord()
    {
    }

    // constructor
    public PdsxRecord(String key, Map<PdsxAttrKey, PdsxAttrValue> mapAttrs)
    {
        m_key = key;
        m_mapAttrs = mapAttrs;
    }

    /**
     * get Key 
     * 
     * @return
     */
    public String getKey()
    {
        return m_key;
    }

    /**
     * get attributes as a map of key=value
     * 
     * @return
     */
    public Map<PdsxAttrKey, PdsxAttrValue> getAttrs()
    {
        return m_mapAttrs;
    }

    /**
     * String -- for debugging and simple persistence
     */
    public String toString()
    {
        UnsynchronizedStringBuffer buf = new UnsynchronizedStringBuffer();
        buf.append("key=" + getKey() + "\n");
        if (getAttrs() == null || getAttrs().size() == 0) {
            return buf.toString();
        }

        for (Map.Entry<PdsxAttrKey, PdsxAttrValue> entry : getAttrs().entrySet()) {
            String key = (entry.getKey()==null ? "null" : entry.getKey().getKey());
            String value = ((entry.getValue() == null ||
                            entry.getValue().getValue() == null) ? 
                        "null" : entry.getValue().getValue().toString());
            buf.append("  " + key + "=" + value +"\n");
        }
        return buf.toString();
    }

} 
```

更新：- PdsxAttrKey 类

```
public class PdsxAttrKey
    {
        private String m_key;

        protected PdsxAttrKey()
        {
        }

        public PdsxAttrKey(String key)
        {
            m_key = key;
        }

        public String getKey()
        {
            return m_key;
        }

        /**
         * Override the default to allow comparing with Strings 
         */
        public boolean equals(Object o)
        {
            if (o == null) {
                return false;
            }
            if (o instanceof String) {
                return o.equals(m_key);
            }
            if (o instanceof PdsxAttrKey) {
                return m_key.equals(((PdsxAttrKey)o).getKey());
            }
            return false;
        }

        /**
         * hash code implementation
         */
        public int hashCode()
        {
            return (m_key == null ? 0 : m_key.hashCode());
        }

        public String toString()
        {
            return getKey();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T21:13:24.713

也许是因为您的 Map 由`PdsxAttrKey`一个键组成，并且您正在检查是否有一个`String`值为“SiteId”的键。

如果您不想将 Map 定义从以下内容更改为以下内容，这里有一些可能有用的`Map<PdsxAttrKey, PdsxAttrValue>`代码`Map<String, PdsxAttrValue>`：

```
while (!pdsxOutRecords.isEmpty()) {
  PdsxRecord record = pdsxOutRecords.remove(0);
  if(record.getAttrs().containsKey(new PdsxAttrKey("SiteId"))) {
    System.out.println("Testing");
  }
} 
```

请注意，这假定您可以将 String 传递给 PdsxAttrKey 构造函数，并且可以实例化该类。哦，当然你在课堂上`equals()`，`hashcode()`几乎只检查 . 的字符串值`PdsxAttrKey`。你可能会问自己这是否真的值得麻烦。这就是为什么我最初建议您更改 Map 定义以使用字符串作为键，但当然我不确定这是否是您的情况的可行解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T21:13:32.957

在`record.getAttrs()`你回来的时候：`Map<PdsxAttrKey, PdsxAttrValue>`。然后检查是否有类型为“SiteId”的键（类型`PdsxAttrKey`：）`String`。

您应该检查地图是否包含`PdsxAttrKey`（实现`equals`和`hashcode`方法`PdsxAttrKey`）或从中提取键`PdsxAttrKey`并将它们与“SiteId”进行比较。

如果你选择迭代试试这个：

```
 for(PdsxAttrKey key : record.getAttrs().keySet()) {
                if("SiteId".equals(key.getYourKeyStringValue())) {
                    //found
                    break;
                }
            } 
```

否则，您应该在和调用中实现`equals`和`hashcode`（记住 - 两者）：`PdsxAttrKey``contains`

```
 PdsxAttrKey lookupKey = new PdsxAttrKey("SiteId"); //with consideration of `equals` method
            if(record.getAttrs().containsKey(lookupKey)) {
                ...
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T00:29:19.937

正如至强所说，如果要将对象与字符串值进行比较，则必须覆盖用作键的类中的`equals`and方法，在这种情况下， . 举个例子：`hascode``PdsxAttrKey`

```
public class PdsxAttrKey {
    public String name; 

    public PdsxAttrKey(String name) {
        this.name = name;
    }

    @Override
    public int hashCode() {
        return name.hashCode(); 
    }

    @Override
    public boolean equals(Object obj) {
        if(obj == null) {
            return false;
        } else if (obj instanceof PdsxAttrKey) {
            return this.name.equals(((PdsxAttrKey)obj).name);
        }

        return false;
    }

} 
```

或者如果没有真正需要将对象作为键，那么您可以重新定义映射声明如下并使用字符串作为键。

`private Map<**String**, PdsxAttrValue> m_mapAttrs;`

# facebook - 用 cakephp 创建 facebook 画布应用程序

> ID：10888384
> 
> 赞同：0
> 
> 时间：2012-06-04T21:08:13.223
> 
> 标签：facebook, cakephp, cakephp-2.0, facebook-canvas

我想用 CakePhP 2.0 创建一个 Facebook 画布应用程序。我发现的所有教程似乎都已过时。谁能告诉我如何将 facebook-php sdk 集成到 cakephp 2.0 中？

任何帮助将不胜感激:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T14:46:09.597

我建议使用 webtechnik 插件将您的 Cakephp 应用程序无缝集成到 Facebook：[https ://github.com/webtechnick/CakePHP-Facebook-Plugin](https://github.com/webtechnick/CakePHP-Facebook-Plugin)

# ruby - Rails 编写抽象的 DateTime 计算 SQL 条件的方式

> ID：10888387
> 
> 赞同：1
> 
> 时间：2012-06-04T21:08:22.343
> 
> 标签：ruby, activesupport

我正在尝试编写一个适当的 Rails 抽象 SQL 语句，相当于：

`SELECT * FROM model WHERE DATE_SUB(date_field, INTERVAL 7 DAY) < CURDATE()`

虽然我知道可以在 Rails 中编写要执行的字符串 SQL，但如果能够以某种抽象的方式编写它，让我的代码数据库平台不可知，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:10:43.507

其实很简单：

```
Model.all( :conditions => [ "date_field BETWEEN ? AND ?", 7.days.ago, Date.today ]) 
```

你有它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:28:30.523

Squeel 电源 FTW ！！！

$ gem 安装 squeel

模型.rb

```
Model.where{date_colum > 10.years.ago & date_column < DateTime.now} 
```

# django - 我应该在哪里创建 django 1.4 中的 django 应用程序？

> ID：10888388
> 
> 赞同：2
> 
> 时间：2012-06-04T21:08:29.993
> 
> 标签：django

我刚刚在 django 1.4 中启动了一个新项目，因为他们更改了 manage.py 和整个文件夹层次结构的默认布局（请参阅[https://docs.djangoproject.com/en/dev/releases/1.4/# updated-default-project-layout-and-manage-py](https://docs.djangoproject.com/en/dev/releases/1.4/#updated-default-project-layout-and-manage-py)）我无法决定我应该把我的应用程序包放在哪里 - 在里面`mysite`还是外面？最佳做法是什么？出于某种原因，`startapp`命令会在包之外创建应用`mysite`程序，但这感觉有点不对劲。

那么，什么是最好的？这：

```
manage.py
mysite/
    __init__.py
    settings.py
    urls.py
    myapp/
        __init__.py
        models.py 
```

或这个：

```
manage.py
myapp/
    __init__.py
    models.py
mysite/
    __init__.py
    settings.py
    urls.py 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:11:32.153

第二种方式。

```
manage.py
myapp/
    __init__.py
    models.py
mysite/
    __init__.py
    settings.py
    urls.py 
```

# solr - 从 Solr 获取最新的 N 个文档

> ID：10888390
> 
> 赞同：0
> 
> 时间：2012-06-04T21:08:33.660
> 
> 标签：solr, lucene

我有一个标准的 Solr 3.6 索引，并希望取回最新的 N 个文档（从索引它们的日期升序）。

这个[网站](http://phatness.com/2009/11/sorting-by-date-with-solr/)很有帮助，但不完全是我想要的。

我想做这样的事情：

```
localhost:8080/solr/select/?q=greekbailout&wt=json; date asc 
```

基本上，使用 json 输出和最新的 N 个提交到索引的文档查询任何内容。有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:18:23.997

用于`&sort=date asc`纯排序，[这](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_boost_the_score_of_newer_documents)用于提升较新的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T11:28:28.797

在您的 Solr URL 中，只需附加`&sort=<field>+<asc/desc>`. 此外，您的字段应该被索引而不是多值。您还可以对多个字段进行排序。

```
&sort=<field name>+<direction>[,<field name>+<direction>]... 
```

[http://wiki.apache.org/solr/CommonQueryParameters#sort](http://wiki.apache.org/solr/CommonQueryParameters#sort)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T13:30:47.630

使用日期字段的 solr 查询，结果中返回 N 个文档

```
localhost:8080/solr/select/?q=greekbailout&wt=json&sort=date asc&rows=N 
```

solr 的默认模式有一个名为 timestamp 的字段，它存储创建或修改特定文档的时间，因此如果您的日期字段没有完全存储此时间并且这是您的要求，您可以使用 timestamp.. 只需将 date 替换为时间戳

# visual-studio-2010 - 安装 Visual Studio 2012 Release Preview 后出现错误“链接：致命错误 LNK1123：转换为 COFF 期间失败：文件无效或损坏”

> ID：10888391
> 
> 赞同：535
> 
> 时间：2012-06-04T21:08:40.690
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

我已经安装了 Visual Studio 2012 Release Preview，看起来还不错，但是现在当我尝试使用 Visual Studio 2010 编译 C++ 项目时，我收到以下错误消息：

> LINK：致命错误 LNK1123：转换为 COFF 时失败：文件无效或损坏

我不是 100% 确定这一点，但它似乎与其中包含`.rc`（资源）文件的项目有关。

我尝试通过添加/删除程序修复 Visual Studio 2010 并重新启动，但这没有效果。

如果我在设置为使用 Visual Studio 2010 工具集时使用 Visual Studio 2012 RC 编译 C++ 项目，也会遇到同样的错误。升级到 Visual Studio 2011 工具集可以解决这个问题（但我当然不想为生产代码这样做）。

更新：我已经*卸载 Visual Studio 2012*，重新启动，问题仍然存在！帮助！

* * *

## 回答 #1

> 赞同：653
> 
> 时间：2012-06-05T01:19:55.203

[这个 MSDN 线程](https://social.msdn.microsoft.com/Forums/da-DK/vssetup/thread/d10adba0-e082-494a-bb16-2bfc039faa80)解释了如何修复它。

总结一下：

*   通过转到禁用增量链接

    ```
    Project Properties 
       -> Configuration Properties 
           -> Linker (General) 
              -> Enable Incremental Linking -> "No (/INCREMENTAL:NO)" 
    ```

*   或安装 VS2010 SP1。

编辑（@CraigRinger）：请注意，安装 VS 2010 SP1 将*删除 64-bit compilers*。您需要安装[VS 2010 SP1 编译器包](https://devblogs.microsoft.com/setup/visual-c-2010-sp1-compiler-update-for-the-windows-sdk-7-1/)才能将它们取回。

这会影响**Microsoft Windows SDK 7.1 for Windows 7 和 .NET 4.0**以及**Visual Studio 2010**。

* * *

## 回答 #2

> 赞同：252
> 
> 时间：2013-01-03T18:14:49.463

如果禁用增量链接对您不起作用，并且关闭“嵌入清单”也不起作用，则在您的路径中搜索多个版本的 CVTRES.exe。

通过使用 /VERBOSE 链接器选项进行调试，我发现链接器在尝试调用 cvtres 并且失败时正在写入该错误消息。

事实证明，我的路径中有这个实用程序的两个版本。一个在`C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\cvtres.exe`，一个在`C:\Windows\Microsoft.NET\Framework\v4.0.30319\cvtres.exe`。VS2012 安装后，VS2010 版本的 cvtres.exe 将不再工作。如果这是您路径中的第一个，并且链接器决定需要将 .res 文件转换为 COFF 对象格式，则链接将失败并显示 LNK1123。

（真的很烦人，错误消息与实际问题无关，但这对于 Microsoft 产品来说并不罕见。）

只需删除/重命名该实用程序的旧版本，或重新排列您的 PATH 变量，以便首先使用该版本。

请注意，对于 x64 工具构建，您可能还需要检查`C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\amd64`其他`cvtres.exe`.

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2013-10-09T11:04:48.383

检查版本`cvtrs.exe`：

```
dir "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\cvtres.exe" 
```

错误版本：：
`date`03/18/2010
`time`：01:16 PM
`size`：31,048 字节
`name`：cvtres.exe

正确版本：：
`date`02/21/2011 ：06:03
`time`PM
`size`：31,056 字节
`name`：cvtres.exe

如果您有错误的版本，您应该从以下位置复制正确的版本：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\cvtres.exe 
```

并在此处替换一个：

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\cvtres.exe 
```

IE

```
copy "C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\cvtres.exe" "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\cvtres.exe" 
```

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2013-03-07T11:46:41.333

根据 MSDN 论坛中的这个帖子：[VS2012 RC 安装破坏 VS2010 C++ 项目](http://social.msdn.microsoft.com/Forums/da-DK/vssetup/thread/d10adba0-e082-494a-bb16-2bfc039faa80)，简单来说，`cvtres.exe`取自**VS2010 SP1**

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\cvtres.exe 
```

或来自**VS2012**

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\cvtres.exe 
```

并将其复制到`cvtres.exe`VS2010 **RTM**安装中（**没有 SP1**的那个）

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\cvtres.exe 
```

这样，您将有效地使用`cvtres.exe`11.0.51106.1 的更正版本。

对 64 位版本的工具重复相同的步骤`C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\amd64\cvtres.exe`。

此解决方案是为 VS2010 安装 SP1 的替代方案 - 在某些情况下，您根本无法安装 SP1（即，如果您需要支持 SP1 之前的构建）。

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2012-09-04T22:51:50.960

如果您安装了 Visual Studio 2012 RC，那么它安装了 .NET 4.5 RC。

卸载 .NET 4.5 RC，然后安装您需要的版本（VS 2010 为 4.0）。这应该可以解决您遇到的任何问题。

这解决了同样的问题。无需卸载 Visual Studio。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2012-06-18T17:14:57.320

这是因为[.NET](http://en.wikipedia.org/wiki/.NET_Framework) Framework 4.5 正在取代 .NET Framework 4.0。我多次卸载 Visual Studio 2010，但都没有成功。当我删除 .NET Framework 4.5 并重新安装 Visual Studio 2010 时，一切正常。

请参阅*[完全卸载 Visual Studio 11 以进行全新安装](http://social.msdn.microsoft.com/Forums/en/vssetup/thread/b315c30f-141d-4346-b77d-ec08a0362d7f)*。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2012-09-06T16:47:43.050

对我来说，将“生成清单”设置为“否”修复了它。（也用 /INCREMENTAL:NO 修复）

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2015-03-12T13:17:56.127

如果您使用的是 x64，[这里的资源会有所帮助](https://ask.mozilla.org/question/26/link-fatal-error-lnk1123-failure-during-conversion-to-coff-file-invalid-or-corrupt/)：

发生这种情况是因为 Microsoft .NET 4.5 与 Visual C++ 10 不兼容。解决方法是确保您运行 cvtres.exe 的 .NET 版本而不是 Visual C++ 版本。我通过重命名这些文件的 Visual C++ 版本并在其位置复制 .NET 版本来做到这一点。

```
1\. C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\cvtres.exe
2\. C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\amd64\cvtres.exe

1\. C:\windows\Microsoft.NET\Framework\v4.0.30319\cvtres.exe
2\. C:\windows\Microsoft.NET\Framework64\v4.0.30319\cvtres.exe 
```

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2012-06-04T23:09:42.893

我最终通过完全卸载 VS2012 RC，然后完全卸载 VS2010，然后从头开始重新安装 VS2010 解决了这个问题。

它花了很长时间，但我现在能够再次在 VS2010 中编译 C++ 项目。

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2012-10-17T20:19:59.063

[通过删除.NET](http://en.wikipedia.org/wiki/.NET_Framework) 4.5 并用**.NET 4.0**替换它，我神奇地解决了这个问题。然后我不得不修复 Visual Studio 2010 - 它在途中以某种方式损坏。

我以前安装过，然后卸载了 Visual Studio 2012 - 这可能与该问题有关。

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2012-12-05T14:38:47.603

我尚未安装 Visual Studio 2012，但在 Visual Studio 2010 中仍然出现此错误。我在安装 Visual Studio 2010 SP1 后解决了此问题。

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2016-05-14T11:21:18.720

我在使用**Microsoft Visual Studio 2010 Ultimate时遇到了同样的问题，并通过**[此 youtube 视频](https://www.youtube.com/watch?v=OZHjYqTJTMg)中描述的方法解决了

该视频建议将**C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin**中的文件**cvtres.exe**重命名为**cvtres-old.exe** **`(in my Win7X64 matchine)`**

 ***** * *

## 回答 #13

> 赞同：7
> 
> 时间：2014-03-28T04:58:59.627

在启用增量链接->“否（/INCREMENTAL:NO）”后它对我不起作用，但在我删除 rc 文件后它对我有用。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2012-10-08T22:53:13.857

+1 给用户简短[的答案](https://stackoverflow.com/questions/10888391/error-link-fatal-error-lnk1123-failure-during-conversion-to-coff-file-inval/10890428#10890428)对我有用！

我尝试对此进行一些调试`msbuild /v:diag`，并且我看到[MSBuild](http://en.wikipedia.org/wiki/MSBuild)正在尝试将清单嵌入到可执行文件中，在链接器命令行上使用 <somename>.dll.embed.manifest.res，这是一个资源从 <somename>.dll.embed.manifest 构建的文件。但清单文件是一个空的 Unicode 文本文件。（即 Unicode 0xFEFF 前缀的两字节文件）

因此，根本问题似乎与未生成该清单文件有关，或者在应该使用 <somename>.dll.intermediate.manifest 时使用它。

另一种解决方案似乎是关闭属性、清单工具、输入和输出下的“嵌入清单”选项。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2015-09-30T02:23:34.813

总结一下：

```
Step1

Project Properties 
   -> Configuration Properties 
       -> Linker (General) 
          -> Enable Incremental Linking -> "No (/INCREMENTAL:NO)" 
```

如果第 1 步不起作用，请执行第 2 步

```
Project Properties 
   -> Configuration Properties 
       -> Manifest Tool (Input and Output) 
          -> Enable Incremental Linking -> "No" 
```

如果第 2 步不起作用，请执行第 3 步复制文件之一：

1.  C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\bin\cvtres.exe
2.  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\cvtres.exe
3.  C:\Program Files (x86)\Microsoft Visual Studio 13.0\VC\bin\cvtres.exe

    然后，替换为 C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\cvtres.exe 和我一起做 3 步即可

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2014-02-01T19:54:41.190

截至 2014 年 1 月，由于某些原因我安装了 .NET Framework 4.5.1，我不知道是由于第三方软件安装还是自动更新。

1 月 29 日，我安装了一个组件并开始收到

```
LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt 
```

信息。当时，我通过避免增量链接来解决。

1 月 31 日，我安装了 .NET Framework 4.5.1 的另一个组件，增量链接技巧不再起作用。然后我安装了 Visual Studio 2010 SP1，但后来问题变成了：

```
Error   6   error LNK1104: cannot open file 'msvcrtd.lib'. 
```

我认为 SP1 搞砸了我的 Visual Studio 2010 安装。

所以我卸载了 .NET Framework 4.5.1，安装了 .NET Framework 4.0 并卸载然后重新安装了 Visual Studio 2010。这对我有用。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2014-11-04T08:29:35.770

即使安装了 Service Pack，您也会收到错误消息，然后尝试删除/重命名 C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin 文件夹中的 cvtres.exe。这对我有用。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2012-06-13T09:45:34.493

试了几次，终于通过卸载多次VS2010解决了这个问题。我想我没有卸载所有文件，这就是它第一次不起作用的原因。

在VS2012的安装中，据说如果你有VS2010 SP1，你就不能在两个程序中处理同一个项目。建议只有一个程序。

谢谢！

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2012-10-11T06:06:30.820

我将**启用增量链接**设置为**“否 (/INCREMENTAL:NO)”**，但它对*我不起作用*。

接下来我改变了：

```
Project Properties 
   -> Configuration Properties 
       -> General
          -> Platform Toolset -> "Visual Studio 2012 (v110)" 
```

它对我有用:)

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2013-03-26T20:38:31.550

重新安装 CMake 对我有用。CMake 的新副本发现它应该使用 Visual Studio 11 而不是 10。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2013-06-12T10:57:46.450

我通过执行以下操作解决了这个问题：

1.  在命令提示符下，键入 msconfig 并按 Enter。
2.  单击服务选项卡。
3.  查找“应用程序体验”并打勾（即选择此选项以启用）。
4.  单击确定。并在必要时重新启动。

因此，问题将永远存在。一定要随机构建并调试您的 C++ 项目，而不会受到任何干扰。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2013-06-19T11:09:20.910

我正在使用 Windows SDK 进行核心 Win32 编程，并且出于“未知”原因安装了 .NET 4.5。我已经卸载了它并像以前的答案一样安装了 4.0，是的，它也对我有用。

只是让我大吃一惊，我不得不使用无用的 .NET 框架来使用 SDK 构建 Win32 应用程序。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-08-08T23:29:42.133

对于那些使用 OpenGL SuperBible 6th 源代码示例寻找此问题的解决方案的人，该解决方案是在*Release*而不是*Debug*中构建的。所有项目都禁用了*Release*版本中的增量链接选项。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2013-10-17T11:20:49.183

我的问题是我的 PC 上有两条包含相同库的路径。两个路径都添加到**Configuration Properties -> Linker -> General中的****Additional Library Directories**中。删除其中一条路径解决了这个问题。

 *** * *

## 回答 #25

> 赞同：1
> 
> 时间：2015-07-02T20:34:34.993

更新 .NET 后我遇到了同样的问题：我先卸载了 .NET 框架，从[visualstudio.com](https://www.visualstudio.com/downloads/download-visual-studio-vs#d-2010-express)下载了 Visual Studio并选择了“修复”。

NET 框架是使用 Visual Studio 自动安装的 -> 现在可以正常工作了！

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2018-10-11T11:09:32.610

在之前安装了 Visual Studio 2010 的机器上安装了 Visual Studio 2017 和 .NET Framework 4.6 后，我遇到了这个问题。

问题是，在这样的安装之后，来自 C:\Windows\System32 的文件**msvcr100_clr0400.dll**被新文件覆盖，其大小非常小~19 Kb，而前一个文件约为 800 Kb。

在我从另一台构建机器手动恢复文件后，cvtres.exe 再次开始正常工作。******

# javascript - 简单的 javascript 函数在 IE7 中不起作用

> ID：10888400
> 
> 赞同：0
> 
> 时间：2012-06-04T21:09:11.330
> 
> 标签：javascript, internet-explorer

代码适用于所有主要浏览器，但点击时触发简单的警报不起作用。

这是我的标题

```
<script type="text/javascript">
    function this_function() {
        alert("got here mango!");
    }
</script> 
```

这是在体内

```
<button type="button" onclick="this_function()">click me</button> 
```

如果我将“onclick”放入标签中，那么它工作得很好而且很花哨。

关于如何让它在 IE 中工作的任何和所有建议都会很棒。提前致谢。

抱歉，“进入标签”是指将 onclick="alert()" 放入标签中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:10:54.047

~~尝试：`<button type="button" onclick="javascript:this_function();">click me</button>`~~

建议将 JavaScript 和标记分开。因此，无论您应该为按钮分配一个 ID 并附加 onclick 处理程序，如下所示：

```
document.getElementById("button").onclick = function() {
     alert("got here mango!");
};
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:28:26.773

你在运行这个沙盒吗？如果您不是，我强烈建议您在一个单独的 HTML 文件中自行尝试所有这些，而无需进行其他操作。IE7 可能会（悄悄地）在另一个阻止您的“this_function”正确加载到 DOM 的脚本问题上崩溃。

完成此操作后，无需将其放入头脑中，实际上我已经看到这在某些情况下会导致问题

# c# - 属性没有使用 LINQ TO XML 更新？

> ID：10888402
> 
> 赞同：1
> 
> 时间：2012-06-04T21:09:15.877
> 
> 标签：c#, linq-to-xml

我将 xml 文件加载到 Xelement 中。然后我通过以下方式查找一个名为 R 的元素：

```
XElement elem = xmlTemplate.Descendants().Where(x => x.Name.LocalName == "R").FirstOrDefault(); 
```

然后我通过以下方式搜索属性 EF 和 EX：

```
elem.Attribute("EF").SetValue(txtEffective.Text);
elem.Attribute("EX").SetValue(txtExpire.Text); 
```

但是当我调用 xTemplate.Save(...) 时，它不会保存更新的属性。我也试过：

```
elem.Attribute("EF").Value = txtEffective.Text;
elem.Attribute("EX").Value = txtExpire.Text; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:17:52.983

我发现了问题，但不知道如何避免它。当我加载 XML 时，我将两个属性加载到表单上的两个文本框中。当我更改文本框中的值以更新属性时，它会使用文本框中的原始值而不是新值来更新 xml。我想知道这是否与文本框在页面加载时加载的事实有关，当我单击按钮时，它实际上会再次加载 xml 并用原始值覆盖我的新值。在我没有在文本框中加载值之后，保存工作正常。

# python - 哪些跟踪解决方案可用于服务器端代码？

> ID：10888403
> 
> 赞同：2
> 
> 时间：2012-06-04T21:09:18.227
> 
> 标签：python, google-analytics, tracking, google-analytics-api

我正在研究一个用 Python 编写的跟踪代理（因为需要一个更好的术语）。它是一个简单的 http (wsgi) 应用程序，将在一个（可能更多）服务器上运行并接受来自桌面客户端的事件数据。然后，该服务会将跟踪数据转发到一些实际的跟踪平台（DeskMetrics、MixPanel、Google Analytics），这样我们就不必处​​理数据的切片和切块。

这种实现的原因是，对我们控制的服务器进程进行更改会更容易和更快，而不是在跟踪后端以某种方式发生变化时必须确保野外的每个客户端都得到更新。

我一直在查找有关各种选项的信息，我希望这里的人能从他们自己的经历中得到一些好的建议。理想情况下，我们可以使用 Google Analytics，因为它可以免费使用任何数量，但付费选项很好。

我唯一真正的要求是一个好的 Python 库或一个有据可查的 api，我可以为其编写一个包装器（当通过 js 或其他提供的库以外的任何方法触发事件时，GA 似乎有些缺乏）。

注意我们并没有真正跟踪服务器代码，所以像 NewRelic 这样的东西是不合适的，我们只是将桌面应用程序与跟踪后端的细节分离。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T00:10:34.563

We ran into this same problem a bunch of times, we ended up building a suite of server-side analytics libraries to make this easier.

Segment.io has libraries for [Python](https://segment.io/libraries/python), [Ruby](https://segment.io/libraries/ruby), [Java](https://segment.io/libraries/java), [Node](https://segment.io/libraries/node), [.NET](https://segment.io/libraries/.net) and [PHP](https://segment.io/libraries/php) that abstract the APIs for Mixpanel, KISSmetrics, Google Analytics and a bunch of other analytics services.

You could integrate the Python library once, and then send your data wherever you want. The data is proxied through Segment.io's hosted service. Hopefully this cleans up the mess of integrating a bunch of libraries, each with slightly different APIs. (The service is free for the first million events.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:28:18.560

你有没有试过下面的任何东西？

Google 数据 API Python 客户端库具有特定于分析的源代码

*   [http://code.google.com/p/gdata-python-client/](http://code.google.com/p/gdata-python-client/)
*   [http://code.google.com/p/gdata-python-client/source/browse/#hg%2Fsamples%2Fanalytics](http://code.google.com/p/gdata-python-client/source/browse/#hg%2Fsamples%2Fanalytics)
*   [https://developers.google.com/gdata/articles/python_client_lib](https://developers.google.com/gdata/articles/python_client_lib)

您也可以从这些来源借钱；Google 有一些他们正在为移动设备开发的东西，源代码可用于 PHP、JSP、ASP.net 和 Perl：[https ://developers.google.com/analytics/devguides/collection/other/mobileWebsites](https://developers.google.com/analytics/devguides/collection/other/mobileWebsites)

我也在 PHP [http://code.google.com/p/php-ga/中遇到过这个](http://code.google.com/p/php-ga/)

至于其他人：

*   KissMetrics： http: [//support.kissmetrics.com/apis/python](http://support.kissmetrics.com/apis/python)
*   [混合面板： https](https://mixpanel.com/docs/integration-libraries/python) ://mixpanel.com/docs/integration-libraries/python
*   DeskMetrics：好像没有python，[http ://docs.deskmetrics.com/index.html](http://docs.deskmetrics.com/index.html)

Sorry I cannot provide information based off extensive experience with anything python related other then providing a few of these resources. I would be interested to see what you come up with.

# javascript - 动态分组结构不良的 HTML，没有 ID？

> ID：10888404
> 
> 赞同：0
> 
> 时间：2012-06-04T21:09:24.980
> 
> 标签：javascript, google-chrome, userscripts

我使用了一个非常旧的网站，并且数据没有以友好的方式显示。我想写一个用户脚本（javascript/jQuery）来帮助这个网站的可读性。内容看起来像（HTML 注释是我自己的，以帮助显示这一点）：

```
<font size="3" face="Courier">
  <br>
  <!-- Begin entry 1 -->
  Name1 (Location1) - Date1:
  <br>
  Text1
  <br>
  Text1 (continued)
  <br>
  Text1 (continued)
  <br>
  <br>
  <!-- Begin entry 2 -->
  Name2 (Location2) - Date2:
  <br>
  Text2
  <br>
  Text2 (continued)
  <br>
  <br>
  Text2 (continued)
  <br>
  Text2 (continued)
  <br>
  <br>
  <!-- Begin entry 3 -->
  Name3 (Location3) - Date3:
  <br>
  Text3
  <br>
  Text3 (continued)
  <br>
  Text3 (continued)
  <br>
  <br>
  <br>
  Text3 (continued)
  <br>
  Text3 (continued)
  <!-- Below is Text3, but a user copied Entry1 here --> 
  Name1 (Location1) - Date1: <!-- text3 -->
  <br> <!-- text3 -->
  Text1 <!-- text3 -->
  <br> <!-- text3 -->
  Text1 (continued) <!-- text3 -->
  <br> <!-- text3 -->
  Text1 (continued) <!-- text3 -->
  <br>
  <br>
  <!-- Begin entry 4 -->
  Name4 ...
  ......
</font> 
```

*   名称示例：`Bob Dole`,`SMITH,JOHN`
*   位置示例：`via Web`,`INTERNAL`
*   日期示例：`Jul 25, 2011 - 1317 EDT`,`Dec 30, 2011 - 1411 EST`
*   Text1/Text2/etc 的示例：`Blah blah * (test) text goes here -Thanks Here: there`

如您所见，两个`<br>`总是在下一个“条目”（名称、位置、日期）之前出现，但由于文本是自由文本，它也可以包含各种内容，`<br>`包括 2 个或更多。另一个问题是文本是否还包含`Name (Location) - Date`从其他地方的另一个条目粘贴的内容。

因此，如果我想编写一个可以添加到谷歌浏览器的脚本，其中说添加了一个按钮，该按钮会折叠（如果已经折叠，则取消折叠）每个条目，这可能吗？我遇到的问题是，由于没有唯一元素开始或结束条目，我不知道如何开始。

一般概念是循环遍历每个“条目”（标题是名称/位置/日期）和随后的文本，直到下一个标题）并允许每个“条目”可折叠（例如 Reddit 评论是可折叠的）。

或者对于更简单的概念，如果我想用红色字体标记每个其他条目怎么办？那么所有的entry1都是黑色字体，entry2是红色字体，entry3是黑色字体，entry4是红色字体，依此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:16:56.980

您必须弄清楚如何搜索 DOM 以找到所需的元素。例如，您可以按标签名称查找内容，然后检查给定标签周围的上下文以查看它是否是您要查找的内容。

如果您提供有关您要查找的确切内容的更多信息，我们可能会帮助您提供更具体的代码。

例如，`document.getElementsByTagName("br")`查找`<br>`文档中的所有标签。`<br>`如果您要查找的是双标签，或者您正在查找双标签之前或之后的某些特定文本，您可以检查每一个以找到双`<br>`标签，您也可以查找它。正如我在评论中所说，在建议更具体的代码之前，您需要更具体地了解您实际正在寻找的模式。

例如，以下是搜索`<br>`文档中标签后的特定文本模式的方法：

```
var items = document.getElementsByTagName("br");
// modify this regex to suit what you're trying to match
var re = /\w+\s\(\w+\)/;
for (var i = 0, len = items.length; i < len; i++) {
    var node = items[i];
    while ((node = node.nextSibling) && node.nodeType == 3) {
        if (re.test(node.nodeValue)) {
            // add a marker test node (just for test purposes)
            var span = document.createElement("span");
            span.className = "marker";
            span.innerHTML = "X";
            node.parentNode.insertBefore(span, node.nextSibling);
        }            
    }        
}​ 
```

您可以将正则表达式修改为您希望搜索要查找的任何内容。

你可以在这里看到一个工作演示：http: [//jsfiddle.net/jfriend00/s9VMn/](http://jsfiddle.net/jfriend00/s9VMn/)

* * *

好的，这里又是一个使用正则表达式猜测您正在寻找什么模式的机会。这将查找两个连续`<br>`的标签，后跟与模式匹配的文本。然后它将该文本包装在一个跨度中，以便可以根据偶数或奇数对其进行样式设置。

```
function getTextAfter(node) {
    // collect text from successive text nodes
    var txt = "";
    while ((node = node.nextSibling) && node.nodeType == 3) {
           txt += node.nodeValue;
    }
    return(txt);    
}

function wrapTextInSpan(preNode, cls) {
    // collect successive text nodes
    // into a span tag
    var node = preNode, item;
    var span = document.createElement("span");
    span.className = cls;
    node = node.nextSibling;
    while (node && node.nodeType == 3) {
        item = node;
        node = node.nextSibling;
        span.appendChild(item);
    }
    preNode.parentNode.insertBefore(span, preNode.nextSibling);
    return(span);
}

// find double br tags
var items = document.getElementsByTagName("br");
var cnt = 1;
var re = /\w+\s+\([^)]+\)\s+-\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d+,\s+\d+\d+/i;
for (var i = 0, len = items.length; i < len; i++) {
    var node = items[i];
    // collect text from successive text nodes
    var txt = "";
    while ((node = node.nextSibling) && node.nodeType == 3) {
           txt += node.nodeValue;
    }
    // if no text, check for successive BR tags
    if (txt.replace(/\n|\s/g, "") == "") {
        if (i + 1 < len && node === items[i + 1]) {
            // found a double BR tag
            // get the text after it
            txt = getTextAfter(node);
            if (re.test(txt)) {
                wrapTextInSpan(node, "marker" + (cnt % 2 ? "Odd" : "Even"));
                ++cnt;
            }
            ++i;
        }
    }
}
​ 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/ewApy/](http://jsfiddle.net/jfriend00/ewApy/)

* * *

这是另一个版本，它实际上插入了展开/折叠目标并进行部分的展开/折叠。使用正确的 HTML 和像 jQuery 这样的不错的库，这可能很容易，但没有任何一个，它的代码就更多了：

```
function getTextAfter(node) {
    // collect text from successive text nodes
    var txt = "";
    while ((node = node.nextSibling) && node.nodeType == 3) {
           txt += node.nodeValue;
    }
    return(txt);    
}

function wrapTextInSpan(preNode, cls) {
    // collect successive text nodes
    // into a span tag
    var node = preNode, item;
    var span = document.createElement("span");
    span.className = cls;
    node = node.nextSibling;
    while (node && node.nodeType == 3) {
        item = node;
        node = node.nextSibling;
        span.appendChild(item);
    }
    preNode.parentNode.insertBefore(span, preNode.nextSibling);
    return(span);
}

function wrapBetweenInSpan(preNode, postNode, cls) {
    var node = preNode, item;
    var span = document.createElement("span");
    span.className = cls;
    node = node.nextSibling;
    if (node && node.nodeType == 1 && node.tagName == "BR") {
        preNode = node;
        node = node.nextSibling;
    }
    while (node && node != postNode) {
        item = node;
        node = node.nextSibling;
        span.appendChild(item);
    }
    preNode.parentNode.insertBefore(span, preNode.nextSibling);
    return(span);
}

function toggleClass(el, cls) {
    var str = " " + el.className + " ";
    if (str.indexOf(" " + cls + " ") >= 0) {
        str = str.replace(cls, "").replace(/\s+/, " ").replace(/^\s+|\s+%/, "");
        el.className = str;
    } else {
        el.className = el.className + " " + cls;
    }
}

function hasClass(el, cls) {
    var str = " " + el.className + " ";
    return(str.indexOf(" " + cls + " ") >= 0);    
}

function addButton(target) {
    var span = document.createElement("span");
    span.className = "expandoButton";
    span.innerHTML = "+++";
    span.onclick = function(e) {
        var expando = this;
        do {
            expando = expando.nextSibling;
        } while (expando && !hasClass(expando, "markerContents"));
        toggleClass(expando, "notshown");
    };
    target.parentNode.insertBefore(span, target.nextSibling);
}

// find double br tags
var items = document.getElementsByTagName("br");
var cnt = 1;
var spans = [];
var re = /\w+\s+\([^)]+\)\s+-\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+\d+,\s+\d+\d+/i;
for (var i = 0, len = items.length; i < len; i++) {
    var node = items[i];
    // collect text from successive text nodes
    var txt = "";
    while ((node = node.nextSibling) && node.nodeType == 3) {
           txt += node.nodeValue;
    }
    // if no text, check for successive BR tags
    if (txt.replace(/\n|\s/g, "") == "") {
        if (i + 1 < len && node === items[i + 1]) {
            // found a double BR tag
            // get the text after it
            txt = getTextAfter(node);
            if (re.test(txt)) {
                var span = wrapTextInSpan(node, "marker marker" + (cnt % 2 ? "Odd" : "Even"));
                spans.push(span);
                ++cnt;
            }
            ++i;
        }
    }
}

// now wrap the contents of each marker
for (i = 0, len = spans.length; i < len; i++) {
    wrapBetweenInSpan(spans[i], spans[i+1], "markerContents shown");
    addButton(spans[i]);
}
​ 
```

此版本的工作演示：http: [//jsfiddle.net/jfriend00/cPbqC/](http://jsfiddle.net/jfriend00/cPbqC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T00:24:09.583

对于这种事情，在状态机循环中解析条目。

以下代码始终是以下问题的第一个答案：

1.  按照问题中的指定对 HTML 进行分组。
2.  提供点击控制来扩展/收缩分组。
3.  折叠条目以开始 - 以获得更好的初始概述。

[**在 jsFiddle 上查看它的演示。**](http://jsfiddle.net/6Cvaw/)

## 更新：

[问题的 HTML 与实际的页面结构](http://jsbin.com/ureyin)不匹配。更新了下面的脚本以解决这个问题，并将 CSS 添加到脚本代码中：

```
var containerNode       = document.querySelector ("p font xpre");
var contentNodes        = containerNode.childNodes;
var tempContainer       = document.createElement ("div");
var groupingContainer   = null;
var hidableDiv          = null;
var bInEntry            = false;
var bPrevNodeWasBr      = false;

for (var J = 0, numKids = contentNodes.length;  J < numKids;  ++J) {
    var node            = contentNodes[J];

    //--- Is the node an entry start?
    if (    node.nodeType === Node.TEXT_NODE
        &&  bPrevNodeWasBr
        &&  /^\s*\w.*\s\(.+?\)\s+-\s+\w.+?:\s*$/.test (node.textContent)
    ) {
        //--- End the previous grouping, if any and start a new one.
        if (bInEntry) {
            groupingContainer.appendChild (hidableDiv);
            tempContainer.appendChild (groupingContainer);
        }
        else
            bInEntry        = true;

        groupingContainer   = document.createElement ("div");
        groupingContainer.className = "groupingDiv";

        /*--- Put the entry header in a special <span> to allow for
            expand/contract functionality.
        */
        var controlSpan         = document.createElement ("span");
        controlSpan.className   = "expandCollapse";
        controlSpan.textContent = node.textContent;
        groupingContainer.appendChild (controlSpan);

        //--- Since we can't style text nodes, put everythin in this sub-wrapper.
        hidableDiv          = document.createElement ("div");
    }
    else if (bInEntry) {
        //--- Put a copy of the current node to the latest grouping container.
        hidableDiv.appendChild (node.cloneNode(false) );
    }

    if (    node.nodeType === Node.ELEMENT_NODE
        &&  node.nodeName === "BR"
    ) {
        bPrevNodeWasBr  = true;
    }
    else
        bPrevNodeWasBr  = false;
}

//--- Finish up the last entry, if any.
if (bInEntry) {
    groupingContainer.appendChild (hidableDiv);
    tempContainer.appendChild (groupingContainer);
}

/*--- If we have done any grouping, replace the original container contents
    with our collection of grouped nodes.
*/
if (numKids) {
    while (containerNode.hasChildNodes() ) {
        containerNode.removeChild (containerNode.firstChild);
    }

    while (tempContainer.hasChildNodes() ) {
        containerNode.appendChild (tempContainer.firstChild);
    }
}

//--- Initially collapse all sections and make the control spans clickable.
var entryGroups         = document.querySelectorAll ("div.groupingDiv span.expandCollapse");
for (var J = entryGroups.length - 1;  J >= 0;  --J) {
    ExpandCollapse (entryGroups[J]);

    entryGroups[J].addEventListener ("click", ExpandCollapse, false);
}

//--- Add the CSS styles that make this work well...
addStyleSheet ( "                                                   \
    div.groupingDiv {                                               \
        border:         1px solid blue;                             \
        margin:         1ex;                                        \
        padding:        1ex;                                        \
    }                                                               \
    span.expandCollapse {                                           \
        background:     lime;                                       \
        cursor:         pointer;                                    \
    }                                                               \
    div.groupingDiv     span.expandCollapse:before {                \
        content:        '-';                                        \
        background:     white;                                      \
        font-weight:    bolder;                                     \
        font-size:      150%;                                       \
        padding:        0 1ex 0 0;                                  \
    }                                                               \
    div.groupingDiv     span.expandCollapse.collapsed:before {      \
        content:        '+';                                        \
    }                                                               \
" );

//--- Functions used...
function ExpandCollapse (eventOrNode) {
    var controlSpan;
    if (typeof eventOrNode.target == 'undefined')
        controlSpan     = eventOrNode;
    else
        controlSpan     = eventOrNode.target;

    //--- Is it currently expanded or contracted?
    var bHidden;
    if (/\bcollapsed\b/.test (controlSpan.className) ) {
        bHidden         = true;
        controlSpan.className = controlSpan.className.replace (/\s*collapsed\s*/, "");
    }
    else {
        bHidden         = false;
        controlSpan.className += " collapsed";
    }

    //--- Now expand or collapse the matching group.
    var hidableDiv      = controlSpan.parentNode.children[1];
    hidableDiv.style.display    = bHidden ? "" : "none";
}

function addStyleSheet (text) {
    var D                   = document;
    var styleNode           = D.createElement ('style');
    styleNode.type          = "text/css";
    styleNode.textContent   = text;

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    //--- Don't error check here. if DOM not available, should throw error.
    targ.appendChild (styleNode);
} 
```

* * *

如果嵌套/引用的条目要单独包装，您还需要递归。对于嵌套/引用的条目，请在回答此问题后打开一个新问题。

注意：新的示例 HTML 有多对`<html>`标签和 2 组条目！这可能是一个剪切和粘贴错误，但如果不是，请打开一个新问题，如果需要帮助，以便轻松模块处理多个集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T21:21:54.553

有许多方法可以让您在不知道 id 的情况下选择元素，例如：

*   [`.querySelectorAll()`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)
*   [`.getElementsByTagName()`](https://developer.mozilla.org/en/DOM/document.getElementsByTagName)
*   [`.getElementsByClassName()`](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)

更新：我没有看到任何方法来区分`<br>`作为条目结束标记`<br>`的一行中的两个元素和作为特定条目一部分的一行中的两个元素。从您的示例中，“文本”条目可以包含名称/位置/日期行中可能存在的任何内容。因此，稍微简化它并将*每个*双 br 作为条目的结尾，您可以执行以下操作：

```
window.onload = function() {
    var fontTags = document.getElementsByTagName("font"),
        i, j = 0;

    for (i = 0; i < fontTags.length; i++)
        fontTags[i].innerHTML = '<div class="entry odd">' +
            fontTags[i].innerHTML.replace(/<br>\s*?<br>/g, function() {
            return '</div><div class="entry ' + (j++ %2===0?'even':'odd') + '">';
        }) + '</div>';
}; 
```

这假定所有字体元素都包含要处理的数据，并用于[`.replace()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)查找出现双 br 并在每个条目周围放置包装器 div。我给每个 div 一个类“条目”，然后交替使用“偶数”和“奇数”类，这样你就可以应用这样的样式：

```
div.odd { color : red; } 
```

如本演示所示：http: [//jsfiddle.net/C4h7s/](http://jsfiddle.net/C4h7s/)

显然，如果您不能将类添加到样式表，您可以使用内联样式来设置颜色。

这是我能达到的最接近您的“所有其他条目为红色”的要求。在该示例中，我实际上并没有对任何东西使用“入口”类，但当时它似乎在以后可能有用，例如，在单击切换想法的这个非常笨重的实现中：[http://jsfiddle。净/C4h7s/1/](http://jsfiddle.net/C4h7s/1/)

（我真的没有时间或动力来整理这些演示，但至少它们应该给你一些关于一种继续进行的方法的想法。或者一种*不*继续的方法，这取决于你认为我的代码有多愚蠢。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T21:47:21.530

如果需要获取`<br />`s 之间的文本内容：

1.  选择`<font>`元素，例如[`.getElementsByTagName()`](https://developer.mozilla.org/en/DOM/document.getElementsByTagName)
2.  获取它[`childNodes`](https://developer.mozilla.org/en/childNodes)并遍历它们：
    *   如果它的[节点类型](https://developer.mozilla.org/en/nodeType)是`1`，它将是您的 `<br />`元素之一 - 请检查[`.nodeName`](https://developer.mozilla.org/en/DOM/Node.nodeName)（否则您需要在元素子元素上展开循环）
    *   如果它的节点类型是`3`，它是一个[文本节点](https://developer.mozilla.org/en/XUL/textnode)。获取文本值并将其与您的内容方案匹配

然后，您应该能够从中构建更合适的 DOM。您甚至可以重用文本节点并将它们包装在适当的标签中。

# parsing - 在运行时从表达式中获取 AST

> ID：10888405
> 
> 赞同：0
> 
> 时间：2012-06-04T21:09:27.460
> 
> 标签：parsing, ironpython, abstract-syntax-tree

我想在运行时从 IronPython 中的表达式中检索 AST：

目前我这样做：

```
def sum(a, b):
    return a + b 
```

接着：

```
source = inspect.getsource(sum)
AST = ast.parse(source) 
```

它工作得很好，但我认为将代码转换为字符串然后重新解析它以获取 AST 有点尴尬。

有没有办法直接从表达式中获取 ast ？

像：`AST = ast.get_ast(sum)`??

非常感谢。

# scala - 我可以在 Play Framework 的模板/视图中调用会话吗

> ID：10888407
> 
> 赞同：11
> 
> 时间：2012-06-04T21:09:29.287
> 
> 标签：scala, playframework, playframework-2.0

我是使用 Play Framework 2.0 的新手（我正在使用 Scala）并且对会话有疑问。

我来自 Ruby on Rails 背景，所以我倾向于考虑我在 Play Framework 中学到的关于 Ruby on Rails 的所有内容。

考虑到这一点，当我在视图中时，有什么方法可以调用存储在 Session 中的内容吗？

如果我在 Session 中存储了“hello”->“world”，我希望能够执行 @session.get("hello") 之类的操作并能够在视图中使用“world”。这可能吗？

我看到的另一个选项是将值存储在控制器中的变量中，然后通过执行 OK( var ) 之类的操作将其传递给视图，但这种方式似乎有点笨拙，尤其是当我开始使用更多变量时。

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-05T03:11:49.313

Play 中的会话存储在 cookie 中，实际上仅用于交叉请求数据。如果这是您想要的，那么您可以使用`@session.get("hello")`，但您实际上可能想要的是一种将内容从控制器传递到模板的方法，而无需将它们指定为参数。在这种情况下，请在此处查看该问题的非常详细的答案： [https ://stackoverflow.com/a/9632085/77409](https://stackoverflow.com/a/9632085/77409)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-04T22:04:51.037

是的，您可以`@session.get("hello")`在模板中使用，但是在将模板与 Scala 控制器一起使用时，看起来您至少需要在模板的开头指定名为“会话”的隐式参数：

```
@()(implicit session: play.api.mvc.Session) 
```

还有`flash`范围 - 它不同于`session`它只为一个请求而存在并且没有签名。因此，它最常用于传输错误/inf 消息。

请参阅[会话和闪存](http://www.playframework.org/documentation/2.0.1/ScalaSessionFlash)范围文档

最后，由于每个模板只是一个 Scala 函数，您还可以从控制器调用一些操作并检索会话数据

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-03T06:27:11.543

`ur`您可以在播放模板中定义地调用会话。

试试这个代码 - 它适用于视图：

```
$session.session_variable_name; 
```

# windows - Windows 批处理循环遍历子文件夹并运行命令

> ID：10888413
> 
> 赞同：2
> 
> 时间：2012-06-04T21:09:56.447
> 
> 标签：windows, batch-file

我正在尝试在 Windows 命令提示符中使用嵌套的 for 循环，在该循环中，我转到指定文件夹中的每个子文件夹，以将其中的所有文本文件连接到一个文本文件中。我正在尝试使用

```
FOR /F  IN (.) DO (for %f in (*.dat) do type “%f” >> aggregate.txt) 
```

但它不工作。谁来帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:42:13.600

我不确定您是否要连接 .txt 或 .dat 文件，但这应该适用于 .dat

```
(for /r %f in (*.dat) do @type "%f")>aggregate.txt 
```

`HELP FOR`从命令行键入以获取有关 FOR 语句的多种形式的更多信息。

将整个命令括在括号中并只执行一次重定向而不是为每个文件执行附加重定向更有效。

***编辑***-*评论中细化要求的解决方案：每个文件夹一个聚合*

如果需要，首先删除所有现有的 aggregate.txt 文件

```
del /s aggregate.txt 
```

那么以下应该会给你你想要的结果

```
for /r %F in (*.dat) do @type "%F" >>"%~dpF\aggregate.txt" 
```

请注意，如果将命令放在批处理文件中，则必须将 FOR 变量前的百分比加倍。例如，`%F`在命令行上就需要`%%F`在一个批处理文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T23:36:20.533

只需使用`for /r ...`遍历给定目录的所有子目录。例子：

```
for /r %f in (*.dat) do @type %d >> aggregate.txt 
```

不需要嵌套。交替：

```
(for /r %f in (*.dat) do @type %d) >> aggregate.txt 
```

您可以使用`/d`而不是`/r`仅在层次结构中深入一层并*仅列出文件夹*（而不是与某个通配符匹配的文件）。在“手动”进行目录遍历时，这可以用作拼图的一部分。但是，考虑到 NT 脚本中变量扩展（循环内部，有和没有子）的问题，我建议您坚持使用简单的解决方案。我过去曾用它来清理脚本，但`for /r`现在已经有一段时间了。

* * *

这应该让你开始

```
@echo off
for /r %%i in (*.dat) do @call :ConcatFolder "%%i"

:ConcatFolder
if "" == "%1" goto :EOF
setlocal ENABLEEXTENSIONS
set FLDR=%~dp1
type "%1" >> "%FLDR%aggregate.txt"
endlocal & goto :EOF 
```

# ruby-on-rails-3 - 试图从不属于 rails 模型的表单中传递值

> ID：10888415
> 
> 赞同：0
> 
> 时间：2012-06-04T21:09:59.410
> 
> 标签：ruby-on-rails-3

我正在尝试传递一个额外的变量，该变量确定用户是否单击了特定的复选框，并且该变量不是我模型的一部分。我想在控制器更新功能上做到这一点，它可以访问这个变量，并查看它的设置。对于此类问题，我已经看到了其他一些堆栈溢出的答案，通常建议使用 hidden_​​field_tag 执行某些操作，如下所示：

```
<% hidden_field_tag "blah", params[:test] %> 
```

或者

```
<% hidden_field_tag :example, "test" %> 
```

尝试这个时，我做了一个 params.inspect 并且找不到“测试”参数变量，使用上述两个选项。我应该尝试以不同的方式检索此隐藏字段标签吗？它会在对控制器的更新请求中可用吗？如果没有，有人知道这可能吗？

接受任何建议，

——安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:54:04.823

你要么这样做

```
<%= hidden_field_tag 'test' , 'blah' %> 
```

或者你可以这样做

```
<%= hidden_field_tag :whatever_you_want , 'blah', {:name=>'test'} 
```

您在帖子中颠倒了名称和价值。真正重要的是确保表单元素具有您希望在 params 哈希中显示的名称。第二个示例将生成 id='whatever_you_want' name='test' 的元素。

# ruby - 在 RVM 下安装 1.8.7 p358 时出现问题

> ID：10888416
> 
> 赞同：1
> 
> 时间：2012-06-04T21:10:02.273
> 
> 标签：ruby, rvm, ruby-1.8.7

获得 Xcode 后，一切`rvm install 1.9.3`正常。但是，`rvm install 1.8.7`会引发以下错误。

```
~ ☺  rvm install 1.8.7
Installing Ruby from source to: /Users/jordanscales/.rvm/rubies/ruby-1.8.7-p358, this may take a while depending on your cpu(s)...

ruby-1.8.7-p358 - #fetching 
ruby-1.8.7-p358 - #extracting ruby-1.8.7-p358 to /Users/jordanscales/.rvm/src/ruby-1.8.7-p358
Error running 'tar xjf /Users/jordanscales/.rvm/archives/ruby-1.8.7-p358.tar.bz2 -C /Users/jordanscales/.rvm/tmp/rvm_src_30581 ', please read /Users/jordanscales/.rvm/log/ruby-1.8.7-p358/extract.log
There has been an error while trying to extract the source.  
Halting the installation.
There has been an error fetching the ruby interpreter. Halting the installation.
Please be aware that you just installed a ruby that requires        2 patches just to be compiled on up to date linux system.
This may have known and unaccounted for security vulnerabilities.
Please consider upgrading to Ruby 1.9.3-194 which will have all of the latest security patches.
~ ☺ 
```

日志读取

```
[2012-06-04 17:06:23] tar xjf /Users/jordanscales/.rvm/archives/ruby-1.8.7-p358.tar.bz2 -C /Users/jordanscales/.rvm/tmp/rvm_src_30581 
ruby-1.8.7-p358/lib/test/unit/ui/gtk/testrunner.rb: (Empty error message)
tar: Error exit delayed from previous errors. 
```

知道如何解决吗？我已经尝试过`rvm get head`，安装 gcc-4.2 并使用它，使用 clang 等。但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T00:08:56.500

确保满足以下规定的所有要求：

```
rvm requirements 
```

包括**Xcode 4.1**或[osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer/downloads)

运行（修复损坏的下载）：

```
rvm cleanup archives 
```

然后再试一次：

```
rvm reinstall 1.8.7 
```

你有什么理由选择 1.8.7 吗？它即将结束，如果这不是必需的，则应使用 1.9.3 代替。

# javascript - 变量未定义错误（即使 console.log 显示变量）

> ID：10888419
> 
> 赞同：0
> 
> 时间：2012-06-04T21:10:16.867
> 
> 标签：javascript, jquery, ajax

我的功能看起来像这样

```
var mail_ntfy=$("#nav_mail"), question_ntfy=$("#nav_question"), users_ntfy=$("#nav_users");
function CheckAll(){
    var data=checkFor("m,q,u");
    if(mail_ntfy.attr("data-number")!=data.m_count && data.m_count!=0)
        mail_ntfy.attr("data-number", data.m_count);
    if(question_ntfy.attr("data-number")!=data.q_count && data.q_count!=0)
        question_ntfy.attr("data-number", data.q_count);
    if(users_ntfy.attr("data-number")!=data.u_count && data.u_count!=0)
        users_ntfy.attr("data-number", data.u-count);
    showNotes(data.msg);
    chngTitle(data.msg);    
}

$(document).ready(function () {
    setInterval(CheckAll(), 10000);
})

function checkFor(param){    
    $.ajax({
        url: "core/notifications.php",
        type: "POST",
        dataType: "json",
        data: {
            chk:param
        },
        success: function (data) { 
            if(data.status!="error")  {
                console.log(data);
                return data;                
            }

        }
    });
} 
```

我有两个问题：

1）我看到，`checkFor`函数返回结果（console.log 显示结果）但仍然获取数据是未定义的错误消息在线`if(mail_ntfy.attr("data-number")!=data.m_count && data.m_count!=0)`。我错过了什么？

2）我想`CheckAll`每 10 秒执行一次。但它不会启动超过 1 次。为什么 setinterval 不能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:11:54.340

您不能从`success`回调中返回数据。相反，您可以`CheckAll`像这样从成功回调中调用

```
success: function (data) { 
            if(data.status!="error")  {
                console.log(data);
                //return data;                
                CheckAll(data);
            }

        } 
```

要`checkFor`改为每 10 秒运行一次，您也可以在成功回调中设置计时器。这将`checkFor`在每次成功的 ajax 请求后调用 10 秒。使用`setInterval`可能会导致多个同时的 ajax 调用。

```
success: function (data) { 
                if(data.status!="error")  {
                    console.log(data);
                    //return data;                
                    CheckAll(data);
                    setTimeout(checkFor,10000);
                }

            } 
```

你的更新`checkAll`就像

```
function CheckAll(data){

    if(mail_ntfy.attr("data-number")!=data.m_count && data.m_count!=0)
        mail_ntfy.attr("data-number", data.m_count);
    if(question_ntfy.attr("data-number")!=data.q_count && data.q_count!=0)
        question_ntfy.attr("data-number", data.q_count);
    if(users_ntfy.attr("data-number")!=data.u_count && data.u_count!=0)
        users_ntfy.attr("data-number", data.u-count);
    showNotes(data.msg);
    chngTitle(data.msg);    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:12:57.997

`checkFor()`不返回任何结果*。*该`console.log()`语句位于附加到`success`您的 AJAX 请求处理程序的匿名函数中；它的返回不会*从*函数返回`checkFor()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T21:16:08.090

如果要`checkFor`返回`data`AJAX 调用必须是同步的。然而，这是一种糟糕的 Javascript 做法（例如，它将在页面上挂起脚本的执行，直到请求完成）。不幸的是，整个设计都有缺陷，但如果你真的需要，你可以使用这段代码：

```
function checkFor(param){    
  var result;
  $.ajax({
    url: "core/notifications.php",
    type: "POST",
    async: false,
    dataType: "json",
    data: {
        chk:param
    },
    success: function (data) { 
        if(data.status!="error")  {
            console.log(data);
            result = data;                
        }

    }
  });
  return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T21:16:15.257

您正在异步调用 Ajax，因此系统不会等待 ajax 结束以继续处理。你必须添加

```
async:false, 
```

对于您的 ajax 调用，如下所示：

```
function checkFor(param){    
    $.ajax({
        url: "core/notifications.php",
        type: "POST",
        async:false,
        dataType: "json",
        data: {
            chk:param
        },
        success: function (data) { 
            if(data.status!="error")  {
                console.log(data);
               var ret=data;                
            }

        }
    });
return ret;
} 
```

希望能帮助到你！

# objective-c - UIButtons 的 IBOutletCollection - 更改按钮的选定状态

> ID：10888422
> 
> 赞同：2
> 
> 时间：2012-06-04T21:10:28.233
> 
> 标签：objective-c, ios, xcode, ios5

我在一个视图中遇到了多个 UIButtons 的问题。我希望单独选择按钮，一次选择多个（例如：10 个按钮，选择按钮 1、4、5、9）。

在我的标题中，我有一个 IBOutletCollection 的属性：

```
@property (retain, nonatomic) IBOutletCollection(UIButton) NSMutableArray *buttonToStaySelected; 
```

在我的实现中，我有一个 IBAction：

```
-(IBAction)selectedButton:(id)sender{
  for (UIButton *b in self.buttonToStaySelected) {
     if (b.isSelected == 0){
        [b setSelected:YES];
  } else
        [b setSelected:NO];
  }
} 
```

我遇到的问题是，当我选择与集合相关的任何按钮时，它们都会变为选中状态。我知道问题很可能（几乎可以肯定）出在循环中，但是我试图规定的每个条件都会破坏代码，并且没有一个按钮能够“改变”状态。

***更新***

为了让它们可选择、更改状态并检查多个，我将其用作我的最终代码：

```
-(IBAction)selectedButton:(id)sender {
  for (UIButton *b in self.buttonToStaySelected) {
      if (sender == b) {
      [b setSelected:!b.isSelected];
    }
   }
  } 
```

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T21:27:41.243

消息发送时带有一个参数，该`selectButton:`参数指定被点击的按钮，但您将操作应用于集合中的所有按钮，而不仅仅是被点击的按钮。

```
-(IBAction)selectedButton:(id)sender
{
  for (UIButton *b in self.buttonToStaySelected)
  {
     if (sender == b)
     {
        b.isSelected == !b.isSelected
     }
  }
} 
```

# java - 使用 apache http 下载文件

> ID：10888424
> 
> 赞同：0
> 
> 时间：2012-06-04T21:10:32.227
> 
> 标签：java, download, apache-httpclient-4.x

我试图从需要用户名/密码才能访问的页面下载一个 zip 文件（基于 html 表单的身份验证）。我正在使用 apache http 库。早些时候我做过非常相似的事情，该页面只需要密码即可下载文件。这是我的代码

```
 DefaultHttpClient httpclient = new DefaultHttpClient();
            httpclient.setRedirectStrategy(new DefaultRedirectStrategy() {
                        public URI lastRedirectedUri;

                        public boolean isRedirected(HttpRequest request, 
                                                    HttpResponse response, 
                                                    HttpContext context) {
                            boolean isRedirect = false;
                            try {
                                isRedirect = 
                                        super.isRedirected(request, response, 
                                                           context);
                            } catch (org.apache.http.ProtocolException e) {
                                e.printStackTrace();
                            }
                            if (!isRedirect) {
                                int responseCode = 
                                    response.getStatusLine().getStatusCode();
                                if (responseCode == 301 || 
                                    responseCode == 302) {
                                    System.out.println("the original response code is" + responseCode);
                                    return true;
                                }
                            }
                            return isRedirect;
                        }

//                        public URI getLocationURI(HttpResponse response, HttpContext context)
//                                    throws ProtocolException {
//
//                                lastRedirectedUri = super.getLocationURI(request , response, context);
//
//                                return lastRedirectedUri;
//                            }

                    });

            List<NameValuePair> formparams = new ArrayList<NameValuePair>();
           // formparams.add(new BasicNameValuePair("password", arg[1]));
            formparams.add(new BasicNameValuePair("password", "*****"));
            formparams.add(new BasicNameValuePair("email", "****"));
            UrlEncodedFormEntity entity1 = 
                new UrlEncodedFormEntity(formparams, "UTF-8");
            HttpPost httppost = 
                new HttpPost("https://*************************/l/?next=/s/48750/d/");
               // new HttpPost(arg[0]);
            httppost.setEntity(entity1);

            HttpContext localContext = new BasicHttpContext();
            CookieStore cookieStore = new BasicCookieStore();
            localContext.setAttribute(ClientContextConfigurer.COOKIE_STORE, cookieStore);
            HttpResponse response = httpclient.execute(httppost, localContext);
            HttpHost target = 
                (HttpHost)localContext.getAttribute(ExecutionContext.HTTP_TARGET_HOST);
            System.out.println("Final target: " + target);

            System.out.println(response.getProtocolVersion());
            System.out.println(response.getStatusLine().getStatusCode());
            System.out.println(response.getStatusLine().getReasonPhrase());
            System.out.println(response.getStatusLine().toString());

            HttpEntity entity = response.getEntity();
                        if (entity != null) {
                            FileOutputStream fos = 
                                new java.io.FileOutputStream("download.zip");
                            entity.writeTo(fos);
                            fos.close();
            } 
```

如果您打开代码中提供的 url，您会发现表单有两个参数，名称为 email 和 password，我已将它们作为 formparams 提供（值在上面的代码中注释）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:01:05.110

尝试使用 BasicAuthentication。

[http://hc.apache.org/httpclient-3.x/authentication.html#Authentication_Schemes](http://hc.apache.org/httpclient-3.x/authentication.html#Authentication_Schemes) http://hc.apache.org/httpclient-3.x/authentication.html#Examples

# vb.net - .Net 异步委托中止

> ID：10888425
> 
> 赞同：3
> 
> 时间：2012-06-04T21:10:33.987
> 
> 标签：vb.net, multithreading, asynchronous

*背景：*我的应用程序用于使用[Selenium RC](http://seleniumhq.org/projects/remote-control/)服务器执行测试，当我对 Selenium 命令的调用没有返回来自 RC 服务器的响应时，我偶尔会遇到问题 - 然后它最终阻塞了线程执行测试。

*示例代码：*

```
Private Delegate Function DoCommand_Delegate(ByVal command As String, ByVal args() As String) As String
...
asyncCommand = New DoCommand_Delegate(AddressOf server.DoCommand)
asyncResult = asyncCommand.BeginInvoke(command, args, Nothing, Nothing)
Try
    ... (I have it use the AsyncWaitHandle to wait for periods of 10 seconds up to two minutes. At the end of each period it runs some checks for common problems that block Selenium from returning a response (modal dialogs) - I don't think that part is relevant to this question, it's just necessary.)
Finally
    result = asyncCommand.EndInvoke(asyncResult)
... 
```

在`EndInvoke`被调用的时候，worker delegate 要么已经完成，要么需要中止。大多数时候它已经有了响应，所以它工作得很好，但在极少数情况下 Selenium RC 的[DoCommand](http://release.seleniumhq.org/selenium-remote-control/0.9.2/doc/dotnet/Selenium.ICommandProcessor.DoCommand.html)不会返回，所以线程在那里被锁定。

**最后，我的问题是：**是否有一种资源友好的方式来中止正在执行的委托，或者我是否需要将其转换为使用可以中止和处置的手动控制线程？

*注意：*这不是关于 Selenium 的问题，只是适当的多线程。

*注意2：*我`Finally`在调用之前考虑过执行以下操作`EndInvoke`：

```
If Not asyncResult.IsCompleted Then asyncResult.AsyncWaitHandle.Close() 
```

...但我不知道这是否真的可以正常工作，或者可能造成什么损害。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:58:18.233

无法同时执行以下操作：

*   以非合作方式中止/杀死线程
*   不破坏与其相关的所有状态（AppDomain/process）

暗示：要么合作终止（这里不可能）或终止进程（AppDomain 不够，因为涉及本机状态）或不终止线程。

您不能只是不杀死线程并将其挂在那里。您的程序的其余部分（剩余的测试）可以继续执行。

我不乐意在生产中看到这一点，但对于测试套件来说这可能没问题（假设无法修复挂起）。

为什么不能中止线程？这已经在 Stack Overflow 上讨论过很多次了。

# android - 用于在 Opengles for android 中绘制文本的库

> ID：10888426
> 
> 赞同：4
> 
> 时间：2012-06-04T21:10:36.327
> 
> 标签：android, opengl-es

有没有用opengles为android绘制文本的库？我不想使用纹理，是否有任何库可以绘制文本，就像 android 的 opengles 中的形状一样？

# php - PHP ZipArchive zip 文件无法在 Mac OS 中打开

> ID：10888435
> 
> 赞同：2
> 
> 时间：2012-06-04T21:11:02.450
> 
> 标签：php, macos, ziparchive

> **可能重复：**
> [在 PHP 中由 ZipStream 动态创建的 zip 文件不会在 OSX 中打开](https://stackoverflow.com/questions/5573211/dynamically-created-zip-files-by-zipstream-in-php-wont-open-in-osx)

我正在使用 PHP ZipArchive 允许网站用户将几个文件组合成一个 zip 文件，然后下载它们。它在我运行它的 Fedora linux 计算机上完美运行。但是，如果我使用我的 Mac 笔记本电脑下载文件，文件将不会解压缩，双击会创建一个 cpgz 文件。双击 cpgz 文件会创建另一个 cpgz 等。

通过谷歌搜索，zip-cpgz 循环看起来是一个很常见的问题，但几乎所有的解决方案都表明原始文件的格式很差；一个不存在的初始文件的 zip，由 Windows 机器生成的具有不同文件结尾的 zip，诸如此类。我认为我的情况并非如此，因为它在我的 Linux 机器上运行良好。

使用 unzip 在终端中打开 zip 文件可以工作，但会发出警告

> 警告 [filename.zip]：在 zipfile 的开头或内部有 3 个额外字节（无论如何都在尝试处理）

不过，如果可以避免的话，我宁愿不告诉用户使用终端。

这是其中一个文件的链接，我无法提供我正在运营的网站的链接，它还没有启动和运行。该文件应包含 8 个 ascii 文件（它们是火星表面某个地点的表面温度）。

[http://eddybarratt.co.uk/wp-content/uploads/2012/06/files_run0000008.zip](http://eddybarratt.co.uk/wp-content/uploads/2012/06/files_run0000008.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:29:19.783

使用 PHP 的 ZipArchive 类可以提供更好的结果的替代方法是[PCL Zip 库](http://www.phpconcept.net/pclzip/)。当 PHP 的 ZipArchive 在用户的主机帐户上不可用时，我们在定制的 CMS 中使用它作为后备。这是我们如何使用它的示例：

```
if ( class_exists('ZipArchive') ) {
    ... zip up the files with the PHP ZipArchive class...
} else {
    require_once('pclzip.lib.php');
    $pclZip = new PclZip($destination);
    $pclZip->create($files, PCLZIP_OPT_REMOVE_ALL_PATH);
    return file_exists($destination);
} 
```

我意识到这并不能回答为什么 ZipArchive 创建的 zip 文件会变得混乱的问题，但希望它提供了另一种让事情为您工作的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T23:14:45.990

你用什么浏览器试过？在通过某个浏览器（在本例中为 Chrome）下载压缩文件时，我曾遇到过无法正确解压缩的经验。我尝试在 Safari 中下载该文件，它工作得很好。不过，我不确定为什么会这样，但请尝试使用其他浏览器，看看它是否有效。

# c# - 是否可以将 C# 字符串转换为 SqlChars？

> ID：10888449
> 
> 赞同：5
> 
> 时间：2012-06-04T21:11:55.570
> 
> 标签：c#, sql-server, sql-server-2008, gis

我正在为返回 SqlGeography 类型的一段代码创建一些单元测试。为了模拟 SqlGeography 列，我想使用[SqlGeography.STLineFromText](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.types.sqlgeography.stlinefromtext.aspx)创建一个行字符串。问题是 STLineFromText 将 SqlChars 作为参数。有谁知道如何将 C# 字符串转换为 SqlChars？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T21:14:05.353

```
new SqlChars(new SqlString(text)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T21:18:39.460

用这个：

```
new SqlChars(text.ToCharArray()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T21:15:21.397

您应该能够使用[SqlChars 构造函数](http://msdn.microsoft.com/en-us/library/9bk0b18s.aspx)：

```
SqlChars c = new SqlChars("test".ToArray()); 
```

# javascript - 使用 jquery 定位和显示隐藏元素

> ID：10888450
> 
> 赞同：0
> 
> 时间：2012-06-04T21:12:25.047
> 
> 标签：javascript, jquery, css

试图实现类似于 qtip 的东西，但是使用一个比较不同事物特征的表格，并且在定位我想在鼠标悬停时显示的隐藏元素时遇到问题。任何帮助将非常感激。[http://jsfiddle.net/2HMjQ/](http://jsfiddle.net/2HMjQ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:26:05.657

而不是`event.pageY`，我尝试使用`$(this).position().top`50 到位置的偏移量就在链接的正下方。见下文，

```
content.on('mouseenter',function(){ //Used .on instead of bind
    var index=content.index(this);
    if(index<0){
        stop();
    }
    else{
        content.eq(index).css("font-weight","bold");
        display.stop(true,true);
        display.eq(index).css("top",+ $(this).position().top + 50); //Changed
        display.eq(index).fadeIn('slow');
    }
}).on('mouseleave',function(){ //Used .on instead of bind
    var index=content.index(this);
    display.hide();
    content.css("font-weight","normal");
}); 
```

**演示：http:** [//jsfiddle.net/2HMjQ/13/](http://jsfiddle.net/2HMjQ/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:17:23.860

`display.eq(index).css("top",+event.PageY);`

需要是：

`display.eq(index).css("top",+event.pageY);`- 注意小写的“p”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T21:21:56.000

看起来案例有一个简单的问题。event.PageY 应该是 event.pageY。

我已经解决了这个问题，并在此处对您的代码进行了一些小的 CSS 更改：http: [//jsfiddle.net/2HMjQ/11/](http://jsfiddle.net/2HMjQ/11/)

# java - 有没有办法在休眠中选择额外的字段 - 不被保存？

> ID：10888462
> 
> 赞同：0
> 
> 时间：2012-06-04T21:14:06.770
> 
> 标签：java, hibernate, jpa

我想在休眠中执行以下sql：

```
SELECT emp.*, utilsPkg.getEmployeeDisplayName(emp.id) FROM employee emp; 
```

到目前为止一切都很好......问题是 - 我需要将它提取到一个实体 - 所以我可以更新员工。当然，pl\sql 函数不可更新，也不属于实际表...

如何在休眠中生成这样的实体 - 具有计算且不可更新的字段？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:36:10.117

使用`@Formula`注释，如[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e6481)中所述：

> 有时，您希望数据库为您而不是在 JVM 中进行一些计算，您还可以创建某种虚拟列。您可以使用 SQL 片段（又名公式）而不是将属性映射到列。这种属性是只读的（其值由您的公式片段计算）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:38:34.037

我不确定我是否完全理解您的问题，但您始终可以使用[Hibernate 实体生命周期回调](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/listeners.html#d0e3013)，或者您可以直接在查询中提供它：

```
select new MyEntity(o.column1, o.column2, utilsPkg.getEmployeeDisplayName(o.id)) from MyEntity as o where o.id = 5 
```

当然，您必须实现适当的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T21:19:44.040

使用该`@Transient`属性的 getter 方法上的注释。

# excel - 如果单元格包含特定文本，则复制整行 + 下一行

> ID：10888464
> 
> 赞同：0
> 
> 时间：2012-06-04T21:14:30.850
> 
> 标签：excel, vbscript

我对 VBS 很陌生，需要帮助。

我有sheet1和sheet2。我所有的原始数据都在 sheet1 A 列中，而 sheet2 将是摘要报告。我希望我的脚本搜索 A 列中的每个单元格并搜索“A 级”。如果找到，则复制包含 A 级单词的整行，并复制下一行并将其粘贴到 sheet2 中。这是一个例子。

表 1：

```
A              B                 C                
GradeA     sdfasdf        sadfsadf
Address    sadfas         sdfsadfs   
Grade B    sadfsd         dgfdsgdf
Address    sdfasf          ertertewt
Grade C    fhgfdgh        ukjtyuyt
GradeA     hhh             lll
Address    ppp             hhh 
```

运行脚本后，Sheet2 应该看起来像这样。

```
A              B                 C                
GradeA     sdfasdf        sadfsadf
Address    sadfas         sdfsadfs 
GradeA     hhh            lll
Address    ppp            hhh 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T16:30:36.747

试试下面的代码

```
Sub Test()
For Each Cell In Sheets(1).Range("A:A")
    If Cell.Value = "GradeA" Then
        matchRow = Cell.Row
        Rows(matchRow & ":" & matchRow + 1).Select
        Selection.Copy

        Sheets("Sheet2").Select
        lastRow = ActiveSheet.UsedRange.Rows.Count
        If lastRow > 1 Then lastRow = lastRow + 1
        ActiveSheet.Range("A" & lastRow).Select
        ActiveSheet.Paste
        Sheets("Sheet1").Select
    End If
Next
End Sub 
```

# android - onMeasure(...) 被传递 MeasureSpec.EXACTLY，显然是错误的

> ID：10888466
> 
> 赞同：1
> 
> 时间：2012-06-04T21:14:47.833
> 
> 标签：android, view, measurement

我创建了一个实现的自定义视图`onMeasure`：

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    float width = MeasureSpec.getSize(widthMeasureSpec);
    final int widthMode = MeasureSpec.getMode(widthMeasureSpec);

    float height = MeasureSpec.getSize(heightMeasureSpec);
    final int heightMode = MeasureSpec.getMode(heightMeasureSpec);

    float nominalHeight = getResources().getInteger(R.integer.nominalheight);
    float nominalWidth = getResources().getInteger(R.integer.nominalwidth);

    float aspectRatio = nominalWidth / nominalHeight;

    if( width / height > aspectRatio //too wide
            && (
                    widthMode == MeasureSpec.AT_MOST ||
                    widthMode == MeasureSpec.UNSPECIFIED 
            )
            ) { 
        width -= (width - height * aspectRatio);
    }
    if( width / height < aspectRatio //too tall
            && (
                    heightMode == MeasureSpec.AT_MOST ||
                    heightMode == MeasureSpec.UNSPECIFIED 
            )
            ) { 
        height -= (height - width / aspectRatio);
    }

    setMeasuredDimension((int)width, (int)height);
} 
```

`nominalheight`目的是在可能的情况下创建一个长宽比与和指定的长宽比相同的矩形`nominalwidth`。显然，如果函数被传递`MeasureSpec.EXACTLY`，那么它应该以该方向给定的尺寸布局。

我在 xml 中在两个方向上都进行了`View`布局。`WRAP_CONTENT`让我感到困惑的是，通过 onMeasure 调用，其中一半显示 MeasureSpec.AT_MOST 并且例程计算正确的矩形，另一半显示 MeasureSpec.EXACTLY 并且它显然使用给定的尺寸。更令人费解的是，如果我禁用条件（我会假设，从[文档](http://developer.android.com/guide/topics/ui/how-android-draws.html "Android 如何绘制视图")和[示例代码](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/LabelView.html "标签视图.java")中错误地）它工作正常。

为什么我会收到这些具有不同值的交替调用，以及如何说服 Android 以正确的尺寸布置我的视图？

# javascript - 为什么不产生 onChange 事件？

> ID：10888470
> 
> 赞同：0
> 
> 时间：2012-06-04T21:15:13.173
> 
> 标签：javascript, jquery, html, events, checkbox

假设，我们有以下标记：

```
<form>
    <button type="button" id="all">check all</button>
    <button type="button" id="none">check none</button>
    <input type="checkbox" value="one" />
    <input type="checkbox" value="two" />
    <input type="checkbox" value="three" />
</form> 
```

并遵循 JavaScript 代码：

```
(function($, document) {
    $('#all').on('click', function() {
         $('input', $(this).parent()).prop('checked', 'checked');
    });
    $('#none').on('click', function() {
        $('input', $(this).parent()).removeProp('checked');
    });

    $('input').on('change', function() {
        alert(this.value);
    });
}(jQuery, document)); 
```

（见[http://jsfiddle.net/inst/h7kyq/1/](http://jsfiddle.net/inst/h7kyq/1/)）

为什么当我们单击任何按钮时输入的 onChange 事件处理程序不执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:17:15.937

javascript 中发生更改时不会触发事件。您需要自己触发事件：

```
$('input', $(this).parent()).removeProp('checked').change(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:17:43.743

对输入元素的任何编程更改（从脚本更改）都不会触发`onchange`事件。

或者，您应该在更改状态/值时手动触发更改事件。

见下文，

```
$('input', $(this).parent()).removeProp('checked').change(); 
```

**演示：http:** [//jsfiddle.net/h7kyq/4/](http://jsfiddle.net/h7kyq/4/)

# javascript - 在 Firefox 中将 window.innerHeight 乘以非整数时出现意外结果

> ID：10888473
> 
> 赞同：0
> 
> 时间：2012-06-04T21:15:34.607
> 
> 标签：javascript, html, firefox, unity3d

首先，我绝不是网页设计师，所以我几乎不知道自己在做什么。

我正在为 Unity Webplayer 应用程序开发 HTML/Javascript，试图让 Webplayer 占据浏览器的大部分（不是全部）可视区域。页面的`<body>`设置为没有边距也没有滚动条，

```
<body margin="0" marginwidth="0" marginheight="0" scroll="no"> 
```

我正在获取浏览器可视区域的值，如下所示，

```
winWidth = window.innerWidth;
winHeight = window.innerHeight; 
```

我用这个来调用 Unity Webplayer，

```
unityObject.embedUnity("unityPlayer", "WebPlayer.unity3d", winWidth, winHeight, params); 
```

使用此设置，一切似乎都可以正常工作。但是，当我乘以`winWidth`非`winHeight`整数（即 0.5 或 1.9）时，高度在 Firefox 12 中没有正确缩放。无论我输入的值如何，它总是相同的（错误的）垂直高度。在这张图片中，两者都乘以`innerHeight`并且，正如你所看到的，高度肯定是错误的——无论我乘以什么非整数，这都是错误的高度。 `innerWidth``0.9`![内部高度 * 0.9](../Images/23ab4f5d514e3ef3f2cb04c270465f5a.png)

此代码在 Chrome 19 和 IE 9 中运行良好。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:32:59.603

我不知道确切的情况是什么，因为我不熟悉您使用的 Unity JavaScript 界面，但我认为您很有可能需要为播放器指定整数宽度和高度，而您的计算正在产生一个非整数。

简单地写`Math.round(winWidth * 0.9)`而不是`winWidth * 0.9`得到最接近的整数结果。

# amazon-ec2 - 使用 OpenStack Nova API 以编程方式设置实例名称

> ID：10888476
> 
> 赞同：5
> 
> 时间：2012-06-04T21:15:50.203
> 
> 标签：amazon-ec2, cloud, openstack

我已经接受了这样一个事实，即 EC2 用户习惯的许多功能（特别是标记）在 OpenStack 中并不存在。然而，有一个功能的缺席让我发疯。

尽管 OpenStack 不完全支持实例标签（就像 EC2 一样），但它**确实**具有实例名称的概念。此名称由 Web UI 公开，甚至允许您设置它：

![实例列表中的实例名称](../Images/598817478507893d0c5fff50a578dd7a.png)

![编辑实例名称](../Images/8b2e5212bb2ed462332a4bcc41fdd985.png)

此名称也通过`nova list`命令行实用程序公开。

但是（这是我的问题）这个字段*没有*通过`nova-ec2`API 层公开。他们将其与现有 EC2 平台工具集成的最简洁方法是模拟名称为“Name”的实例标签，但他们不这样做。[更重要的是，我不知道可以使用哪个 Nova API 端点来读取和写入名称（ API 参考](http://api.openstack.org/)中似乎没有记录）；但当然它必须以某种方式成为可能，因为网络客户端并且`nova-client`都可以以某种方式做到这一点。

目前，每次启动新实例时，我都不得不从网站手动更改它。（我无法在实例创建期间执行此操作，因为我使用的是`nova-ec2`API，而不是`nova`命令行客户端）。

我的问题是：

1.  有没有办法通过 EC2 API 层读取/写入实例名称？
2.  如果做不到这一点，那么以编程方式设置它的 REST 端点是什么？
3.  **（奖励）**：Nova 在支持通用实例标记方面取得了哪些进展？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T22:09:44.467

Python`novaclient.v1_1`包在`server`对象上有一个方法：

```
def update(self, server, name=None):
    """
    Update the name or the password for a server.

    :param server: The :class:`Server` (or its ID) to update.
    :param name: Update the server's name.
    """
    if name is None:
        return

    body = {
        "server": {
            "name": name,
        },
    }

    self._update("/servers/%s" % base.getid(server), body) 
```

这表明您可以通过 POST 将以下 JSON 更新为服务器名称`http://nova-api:port/v2.0/servers/{server-id}`：

```
{
  "server": {
      "name": "new_name"
  }
} 
```

当然，`X-Auth-Token` 仍然需要所有常用的身份验证标头（即来自您的 Keystone 服务器），因此对于您喜欢的任何语言使用客户端库来管理所有这些可能更容易。

# javascript - 使用 THREE.OBJLoader 渲染 OBJ 文件

> ID：10888479
> 
> 赞同：11
> 
> 时间：2012-06-04T21:15:56.620
> 
> 标签：javascript, three.js

如何使用 THREE.OBJLoader 方法渲染 OBJ 文件，我有一个示例 OBJ 格式，但它不会渲染任何东西，也不会在 chrome 开发工具中看到错误

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T21:20:51.040

[在https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_obj.html#L75](https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_obj.html#L75)查看 OBJLoader 使用示例

（在行动[http://mrdoob.github.com/three.js/examples/webgl_loader_obj.html](http://mrdoob.github.com/three.js/examples/webgl_loader_obj.html)）

```
var loader = new THREE.OBJLoader();
loader.load( objURL, function ( object ) {
  scene.add( object );
} ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-17T04:33:20.957

尝试在场景中添加灯光，或者只为 Obj 分配一个 MeshBasicMaterial 来查看它的形状：

```
 var objLoader = new THREE.OBJLoader();
    var material = new THREE.MeshBasicMaterial({color: 'yellow', side: THREE.DoubleSide});
    objLoader.load('file.obj', function (obj) {
        obj.traverse(function (child) {

            if (child instanceof THREE.Mesh) {
                child.material = material;
            }

        });
        scene.add(obj);
    }); 
```

然后你可以看到模型实际上已经被加载了。如果没有，请尝试调整相机的位置。

文档忽略了这一点，因此对于包括我在内的初学者来说，这一点似乎很混乱。:)

# search - 无法在 SOLR 中按范围删除

> ID：10888483
> 
> 赞同：2
> 
> 时间：2012-06-04T21:16:03.243
> 
> 标签：search, solr

我有一个 SOLR 3.6 实例正在运行，JSON 作为默认的 updateHandler。

我可以使用以下内容删除单个文档：

```
curl "http://myURL/update?commit=true" -H 'Content-type:application/json' -d '{"delete": {"id":"1730887464"}}' 
```

删除一系列 ID 的正确方法是什么？

我尝试了以下方法：

```
curl "http://myURL/update?commit=true" -H 'Content-type:application/json' -d '{"delete": {"id":"[* TO 1730887464]"}}'

curl "http://myURL/update?commit=true" -H 'Content-type:application/json' -d '{"delete": {"id":"[0 TO 1730887464]"}}' 
```

我得到以下异常。任何帮助/指针将不胜感激。我查过：

[http://wiki.apache.org/solr/UpdateJSON](http://wiki.apache.org/solr/UpdateJSON)

[http://lucene.apache.org/solr/api/doc-files/tutorial.html](http://lucene.apache.org/solr/api/doc-files/tutorial.html)

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>Error 500 For input string: "[* TO 1730887464]"

java.lang.NumberFormatException: For input string: "[* TO 1730887464]"
        at java.lang.NumberFormatException.forInputString(NumberFormatException.                                                                                                             java:65)
        at java.lang.Long.parseLong(Long.java:438)
        at java.lang.Long.parseLong(Long.java:478)
        at org.apache.solr.schema.TrieField.readableToIndexed(TrieField.java:295                                                                                                             )
        at org.apache.solr.schema.TrieField.toInternal(TrieField.java:307)
        at org.apache.solr.update.DirectUpdateHandler2.delete(DirectUpdateHandle                                                                                                             r2.java:288)
        at org.apache.solr.update.processor.RunUpdateProcessor.processDelete(Run                                                                                                             UpdateProcessorFactory.java:68)
        at org.apache.solr.update.processor.LogUpdateProcessor.processDelete(Log                                                                                                             UpdateProcessorFactory.java:137)
        at org.apache.solr.handler.JsonLoader.processUpdate(JsonLoader.java:120)
        at org.apache.solr.handler.JsonLoader.load(JsonLoader.java:75)
        at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(Co                                                                                                             ntentStreamHandlerBase.java:58)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandl                                                                                                             erBase.java:129)
        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handle                                                                                                             Request(RequestHandlers.java:244)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter                                                                                                             .java:365)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilte                                                                                                             r.java:260)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(Servlet                                                                                                             Handler.java:1212)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:3                                                                                                             99)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.jav                                                                                                             a:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:1                                                                                                             82)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:7                                                                                                             66)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHand                                                                                                             lerCollection.java:230)
        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.                                                                                                             java:114)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:1                                                                                                             52)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:54                                                                                                             2)
        at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnectio                                                                                                             n.java:945)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.                                                                                                             java:228)
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j                                                                                                             ava:582)
</title>
</head>
<body><h2>HTTP ERROR 500</h2>
<p>Problem accessing /solr/update. Reason:
<pre>    For input string: "[* TO 1730887464]"

java.lang.NumberFormatException: For input string: "[* TO 1730887464]"
        at java.lang.NumberFormatException.forInputString(NumberFormatException.                                                                                                             java:65)
        at java.lang.Long.parseLong(Long.java:438)
        at java.lang.Long.parseLong(Long.java:478)
        at org.apache.solr.schema.TrieField.readableToIndexed(TrieField.java:295                                                                                                             )
        at org.apache.solr.schema.TrieField.toInternal(TrieField.java:307)
        at org.apache.solr.update.DirectUpdateHandler2.delete(DirectUpdateHandle                                                                                                             r2.java:288)
        at org.apache.solr.update.processor.RunUpdateProcessor.processDelete(Run                                                                                                             UpdateProcessorFactory.java:68)
        at org.apache.solr.update.processor.LogUpdateProcessor.processDelete(Log                                                                                                             UpdateProcessorFactory.java:137)
        at org.apache.solr.handler.JsonLoader.processUpdate(JsonLoader.java:120)
        at org.apache.solr.handler.JsonLoader.load(JsonLoader.java:75)
        at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(Co                                                                                                             ntentStreamHandlerBase.java:58)
        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandl                                                                                                             erBase.java:129)
        at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handle                                                                                                             Request(RequestHandlers.java:244)
        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1376)
        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter                                                                                                             .java:365)
        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilte                                                                                                             r.java:260)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(Servlet                                                                                                             Handler.java:1212)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:3                                                                                                             99)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.jav                                                                                                             a:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:1                                                                                                             82)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:7                                                                                                             66)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHand                                                                                                             lerCollection.java:230)
        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.                                                                                                             java:114)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:1                                                                                                             52)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:54                                                                                                             2)
        at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnectio                                                                                                             n.java:945)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.                                                                                                             java:228)
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.j                                                                                                             ava:582) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T22:47:45.563

您需要使用按查询删除：

```
curl "http://myURL/update?commit=true" -H 'Content-type:application/json' -d '{"delete": {"query":"id:[* TO 1730887464]"}}' 
```

我不经常使用 json，所以不确定“查询”部分是否正确……但我想你明白我的意思

# python - jQuery 自动完成不想发送特定的 POST 数据

> ID：10888484
> 
> 赞同：0
> 
> 时间：2012-06-04T21:16:04.360
> 
> 标签：python, django, jquery-autocomplete

我正在尝试添加一个项目（基金）。自动完成成功显示所有资金。它应该检索`fund.id`与该“基金”相对应的内容。如果我能对此有所了解，将不胜感激……

只是要明确一点：我没有收到具体的错误。如果 POST 中没有“基金”，我的观点只是重定向。我只是想弄清楚为什么我的自动完成没有发布基金 POST 值'（fund.id）。

——谢谢提前

**模板**：

```
<script type="text/javascript" src="{{ STATIC_URL }}js/autocomplete/add_fund_autocomplete.js"></script>
...
<form method="POST" action="/profile/edit/">
 {% csrf_token %}
      <input type="hidden" name="fund" id="id_fund" />
      <div class="inline-block">
           <label for="id_omnibox">Fund</label>
           <input id="id_omnibox" name="omnibox" placeholder="Enter a fund name or search for an existing..." type="text" />
      </div>
      <div class="input-prepend inline-block">
           <label for="id_amount">Allocation</label>
           <span>$</span>
           <input id="id_amount" name="amount" type="text" placeholder="Enter amount" />
      </div>
      <button class="add" type="submit" name="add_position">Add</button>
 </form> 
```

**add_fund_autocomplete.js**：

```
$(document).ready(function() {
    $.get('/autocomplete/funds/', function(data) {
        var completions = new Array();
        var dict = JSON.parse(data, function(key, value) {
            completions.push(key);
            return value;
        });
        $('#id_omnibox').autocomplete({
            source: completions,
            minLength: 2,
            select: function(event, ui) {
                $('#id_fund').val(dict[ui.item.value]);
            }
        });
    });
}); 
```

**（自动完成）查看**：

```
@login_required
def funds(request):
    funds = Fund.objects.exclude(name='Placeholder')
    result = {}
    for fund in funds:
        result[fund.name] = str(fund.id)
    return HttpResponse(json.dumps(result)) 
```

**例如：添加** *金额为 $**的基金 。霍斯有限公司应该是。`Hoth Ltd``123``fund.id``1`*

**发布数据**

```
POST
---------------------------------------------------------
Variable               Value
---------------------------------------------------------
fund                   u'' #empty? :\
csrfmiddlewaretoken    u'436f77eb2023043be2f5242bb0443d80'
omnibox                u'Hoth Ltd'
amount                 u'123'
add_position           u'' #Just a trigger used in my view 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:25:18.293

`dict`调用选择回调函数时，该变量未定义。

你可以只使用`ui.item.value`.

# objective-c - 如何正确更改对象的位置？

> ID：10888489
> 
> 赞同：0
> 
> 时间：2012-06-04T21:16:36.043
> 
> 标签：objective-c, position, frame, cgpoint

我在 for 循环中使用一些函数来计算对象的新位置：

```
...some code....

for (int i = self.frame.origin.x; i <= 710; ++i) {
    CGPoint newP = CGPointMake(i, 1);
    float posY = a * pow((newP.x - w.x),2) - w.y;

    CGPoint result = CGPointMake(i, posY);
    [NSThread sleepForTimeInterval:1];
    self.frame = CGRectMake(result.x, result.y, self.frame.size.width, self.frame.size.height);
    NSLog(@"[%f, %f]", result.x, result.y);
} 
```

，但对象仍然存在。

控制台打印：

```
2012-06-04 23:13:19.183 PERT Estimator[326:707] [304.000000, 169.499985]
2012-06-04 23:13:20.195 PERT Estimator[326:707] [305.000000, 165.172806]
2012-06-04 23:13:21.197 PERT Estimator[326:707] [306.000000, 160.856293]
2012-06-04 23:13:22.200 PERT Estimator[326:707] [307.000000, 156.550461]
2012-06-04 23:13:23.225 PERT Estimator[326:707] [308.000000, 152.255295]
2012-06-04 23:13:24.265 PERT Estimator[326:707] [309.000000, 147.970810] 
```

ETC...

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:22:21.470

哇，你真的应该为此使用动画块。

```
/* Starting position  */
[self setFrame:CGRectMake(304, 169.499985,self.frame.size.width, self.frame.size.height)];

[UIView animateWithDuration:1.0
                      delay:0.0 
                    options:UIViewAnimationCurveEaseOut 
                 animations:^ 
                 {
                     [self setFrame:CGRectMake(309, 147, 320,110)];
                 } 
                 completion:^(BOOL finished) 
                 {
                     if ( finished )
                         /* Animation is done, do something, or not */
                         NSLog(@"[%f, %f]", result.x, result.y);
                }]; 
```

# c# - 枢轴双击 - 显示详细信息事件

> ID：10888491
> 
> 赞同：2
> 
> 时间：2012-06-04T21:16:38.570
> 
> 标签：c#, excel, vsto

有什么方法可以捕获 Pivot Double Click 事件？（在另一张纸上生成详细视图的事件。）

有什么方法可以将所选数据透视表的整个数据源视为数据表？

我正在使用 C#、VSTO 编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:27:37.053

这是您在 vba 中的操作方法。将此代码放入工作表的代码模块中：

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)
Dim pt As Excel.PivotTable

On Error Resume Next
Set pt = Target.PivotTable
If Err.Number = 0 Then
    MsgBox "captured"
    'to cancel uncomment next line
    'Cancel = True
End If
End Sub 
```

编辑：“我正在寻找双击事件后，因为我需要捕获新工作表上的值范围。”

那就试试这个。将它放在 ThisWorkbook 模块中。它使用模块级变量来跟踪是否双击了数据透视表，并在 NewSheet 事件中对其进行检查。

```
Private PivotDoubleClicked As Boolean

Private Sub Workbook_SheetBeforeDoubleClick(ByVal Sh As Object, ByVal Target As Range, Cancel As Boolean)
Dim pt As Excel.PivotTable
On Error Resume Next
Set pt = Target.PivotTable
If Err.Number = 0 Then
    PivotDoubleClicked = True
End If
End Sub

Private Sub Workbook_NewSheet(ByVal Sh As Object)
If PivotDoubleClicked Then
    MsgBox "new sheet from pivot double-click"
    PivotDoubleClicked = False
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:48:13.783

我相信您对`Range`对象的[`ShowDetail`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.showdetail%28v=office.11%29 "Range.ShowDetail 属性")属性感兴趣。

要获取整个数据集，您可以为数据[`DataBodyRange`](http://msdn.microsoft.com/en-us/library/aa168512%28v=office.11%29.aspx "DataBodyRange 属性")透视表设置此属性。

```
Excel.PivotTable pivotTable = (Excel.PivotTable)Globals.Sheet3.PivotTables(1);
pivotTable.DataBodyRange.ShowDetail = true; 
```

* * *

**编辑**：根据评论，如果您想要数据透视表呈现的数据集，您必须编写一个方法，使用`PivotCache`来确定`SourceType`并根据`SourceType`. 没有`PivotTable`or的属性`PivotCache`返回 a`ADODB.RecordSet`不管`SourceType`，更不用说 .NET 了`DataTable`。

# javascript - javascript中的重叠/命中测试

> ID：10888494
> 
> 赞同：3
> 
> 时间：2012-06-04T21:16:46.793
> 
> 标签：javascript, html, canvas, html5-canvas

我试图在下面的代码中进行命中测试/重叠测试，该代码在画布上的随机位置创建 200 个圆圈。我试图将圆的位置存储在一个数组中，然后每次在 for 循环中创建另一个圆时检查该数组，如果随机创建的 x 和 y 太接近已经创建的圆，它应该继续获得一个新的圆随机 x 和 y 直到它不太靠近已经创建的圆。

我只是不能让它在while循环中工作。

任何帮助请...

谢谢

```
 <script type="text/javascript">

    document.addEventListener("DOMContentLoaded", canvasDraw);

    function canvasDraw () {
    var c = document.getElementById("canvas");
    var w = window.innerWidth;
    var h = window.innerHeight;
    c.width = w;
    c.height = h;

    var ctx = c.getContext("2d");
    ctx.clearRect(0,0,c.width, c.height);
    var abc = 0;

    var colours = new Array ("rgb(0,100,0)", "rgb(51,102,255)");
    var positions = new Array();

    function hitTest(x, y) {
    for(var p in positions) {
            pp = p.split(",");
        pp[0] = parseInt(pp[0]);
        pp[1] = parseInt(pp[1]);

        if(((x > (pp[0] - 24)) && (x < (pp[0] + 24))) && ((y > (pp[1] - 24)) && (y < (pp[1] + 24)))) {

            return true;
        }
    }
    return false;
}

            //Loop 200 times for 200 circles
    for (i=0; i<200; i++) {

        var x = Math.floor(Math.random()*c.width);
        var y = Math.floor(Math.random()*c.height);

        while(hitTest(x, y) == true){
            var x = Math.floor(Math.random()*c.width);
            var y = Math.floor(Math.random()*c.height);
        }

        var pos = x.toString() + "," + y.toString();
        positions.push(pos);

        var radius = 10;
        var r = radius.toString();

        var b = colours[Math.floor(Math.random()*colours.length)];

        circle(ctx,x,y, radius, b);

    }   
   }

    function circle (ctx, x, y, radius, b) {
  ctx.fillStyle = b;
  ctx.beginPath();
  ctx.arc(x, y, radius, 0, Math.PI*2, true);
  ctx.closePath();
  ctx.fill();
   }
  </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:51:24.413

开始之前的一些事情：

1.  不要用 来创建数组`new Array()`，除非你指定了初始长度。使用`[]`；
2.  `for...in`不要使用: 使用`for`带有计数器的标准来遍历数组。这更像是一个好习惯；
3.  将数字转换为字符串并转换回数字是无用且昂贵的。使用一个小数组来存储这两个值；
4.  不要使用“幻数”，即具有精确值但难以立即识别的数字。使用命名的“常量”或在每个常量附近添加注释，说明它们的含义，以备将来维护。

好的，让我们看看代码。

```
if(((x > (pp[0] - 24)) && (x < (pp[0] + 24))) && ((y > (pp[1] - 24)) && (y < (pp[1] + 24)))) 
```

老实说，这是什么？我会称其为古怪而晦涩的片段。回想一下你在学校学到的东西：

```
var dx = pp[0] - x, dy = pp[1] - y;
if (dx * dx + dy * dy < 400) return true; 
```

不是更清楚了吗？

让我们看看整个函数：

```
function canvasDraw () {
    var c = document.getElementById("canvas");
    var w = window.innerWidth;
    var h = window.innerHeight;
    c.width = w;
    c.height = h;

    var ctx = c.getContext("2d");
    ctx.clearRect(0,0,c.width, c.height);
    // Lolwut?
    // var abc = 0;

    var colours = ["rgb(0,100,0)", "rgb(51,102,255)"];
    var positions = [];

    function hitTest(x, y) {
        for (var j = 0; j < positions.length; j++) {
            var pp = positions[j];
            var dx = pp[0] - x, dy = pp[1] - y;
            if (dx * dx + dy * dy < 400) return true;
        }
        return false;
    }

    // You declare the radius once and for all
    var radius = 10;
    // Declare the local scoped variables. You forgot i
    var x, y, i;
    for (i=0; i<200; i++) {

        // How about a do...while instead of a while?
        do {
            var x = Math.floor(Math.random()*c.width);
            var y = Math.floor(Math.random()*c.height);
        // Testing with === is faster, always do it if you know the type
        // I'll let it here, but if the type is boolean, you can avoid testing
        // at all, as in while (hitTest(x, y));
        } while (hitTest(x, y) === true);

        positions.push([x, y]);

        // This instruction is useless
        // var r = radius.toString();

        var b = colours[Math.floor(Math.random()*colours.length)];

        circle(ctx,x,y, radius, b);

    }   
} 
```

**但是**请注意，根据您的画布大小，可能没有更多空间容纳另一个圆圈，因此它可能会以无限循环结束。尝试将 200 个半径为 10 的圆放在一个 40x40 的盒子内……应该有另一个测试要做，*这*可能很复杂。

# scala - Scala中的案例类重载

> ID：10888498
> 
> 赞同：4
> 
> 时间：2012-06-04T21:16:53.067
> 
> 标签：scala, constructor-overloading

我的系统中有一条旧消息，我希望能够将它映射到我系统中的新版本消息。

为什么我不能重载我的案例类？

```
case class Message(a:Int, b:Int)
case class NewMessage(a:Int, b:Int, c:Int) {
  def this(msg : Message) = this(a = msg.a, b = msg.b, c = 0)
}
val msg = Message(1,2)
val converted = NewMessage(msg) 
```

此代码似乎无法编译。:(

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-04T21:32:37.933

您正在重载构造函数，而您想要做的是重载 apply 方法。您可以在伴随对象上执行此操作：

```
case class NewMessage(a: Int, b: Int, c: Int) 

object NewMessage {
  def apply(msg: Message) = new NewMessage(a = msg.a, b = msg.b, c = 0)
}

val converted = NewMessage(msg) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T21:22:17.280

您必须使用`new`运算符显式调用构造函数：

```
val converted = new NewMessage(msg) 
```

它之所以有效，是因为您实际上是在`NewMessage`普通的时候定义了第二个构造函数：

```
NewMessage(1, 2, 3) 
```

被翻译成：

```
NewMessage.apply(1, 2, 3) 
```

# web-services - 如何在自定义 cxf 拦截器中使用 Spring Autowired？

> ID：10888501
> 
> 赞同：7
> 
> 时间：2012-06-04T21:17:08.860
> 
> 标签：web-services, spring, dependency-injection, cxf

在自定义 cxf 拦截器中使用 @Autowired 时，我似乎遇到了一个小问题。我的用例是我想记录肥皂消息并使用 AMQP 将这些消息发送到另一个系统。此过程适用于普通服务等。但无论我做什么，所需的属性都不会自动装配并保持为空。

我检查了 Spring DI 日志并扫描并提取了上下文，那么我错过了什么？

这在 CXF 拦截器中是否可行？

```
@Component
public class LogInInterceptor extends AbstractSoapInterceptor {

    private @Value("#{rabbitMQProperties['rabbitmq.binding.log.soap']}")
    String binding;

    @Autowired
    AmqpTemplate amqpTemplate;

    public LogInInterceptor() {
        super(Phase.RECEIVE);
    }

    @Override
    public void handleMessage(SoapMessage soapMessage) throws Fault {
        logIt(soapMessage);
    }

    private void logIt(SoapMessage message) throws Fault {
        // rest of the code omitted...!!!     
        amqpTemplate.convertAndSend(binding, buffer.toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T21:23:53.357

您不能混合`@InInterceptors`使用（CXF 注释）*和* `@Component`（Spring 注释）。这将创建您的拦截器的两个独立实例：一个其依赖项由 Spring 注入，另一个由 CXF 创建。（您在`@InInterceptors`注解中提供类名，而不是 bean ID，因此 CXF 无法知道您已经在 Spring 上下文中创建了一个实例。）

删除`@InInterceptors`注释，除了[组件 scan](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#new-java-configuration)：

```
<context:component-scan base-package="org.example.config"/> 
```

您还需要在应用程序上下文中使用类似的内容：

```
<jaxws:endpoint id="myWebService" address="/MyWebService">
    <jaxws:inInterceptors>
        <ref bean="myInInterceptor" />
    </jaxws:inInterceptors>
</jaxws:endpoint> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-18T07:55:46.680

我知道这是一个老问题，但乔纳森 W 的回答对我有帮助，我想补充一下。

这就是我获得自定义拦截器并`@Autowired`使用 Spring Boot 1.3.1 的方式：

[http://cxf.apache.org/docs/jax-ws-configuration.html](http://cxf.apache.org/docs/jax-ws-configuration.html)

```
import java.util.Arrays;

import javax.jws.WebService;

import org.apache.cxf.Bus;
import org.apache.cxf.interceptor.LoggingInInterceptor;
import org.apache.cxf.jaxws.EndpointImpl;
import org.apache.cxf.transport.servlet.CXFServlet;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.boot.builder.SpringApplicationBuilder;
import org.springframework.boot.context.embedded.ServletRegistrationBean;
import org.springframework.boot.context.web.SpringBootServletInitializer;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.ImportResource;

@Configuration
@EnableAutoConfiguration
@ImportResource({ "classpath:META-INF/cxf/cxf.xml" })
public class Application extends SpringBootServletInitializer {

    @Autowired
    private ApplicationContext applicationContext;

    @Autowired
    private MyInterceptor myInterceptor;

    @Autowired
    private HelloWorldImpl helloWorldImpl;

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

    // Replaces the need for web.xml
    @Bean
    public ServletRegistrationBean servletRegistrationBean(ApplicationContext context) {
        return new ServletRegistrationBean(new CXFServlet(), "/api/*");
    }

    // Replaces cxf-servlet.xml
    @Bean
    // <jaxws:endpoint id="helloWorld" implementor="demo.spring.service.HelloWorldImpl" address="/HelloWorld"/>
    public EndpointImpl helloService() {
        Bus bus = (Bus) applicationContext.getBean(Bus.DEFAULT_BUS_ID);
        EndpointImpl endpoint = new EndpointImpl(bus, helloWorldImpl);

        // Set interceptors here
        endpoint.setInInterceptors(Arrays.asList(myInterceptor));

        endpoint.publish("/hello");
        return endpoint;
    }

    // Used when deploying to a standalone servlet container, i.e. tomcat
    @Override
    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
        return application.sources(Application.class);
    }

    // Web service endpoint
    @WebService(endpointInterface = "demo.spring.service.HelloWorld")
    //@InInterceptors not defined here
    public static class HelloWorldImpl {

    }

    public static class MyInterceptor extends LoggingInInterceptor {
      // @Autowired works here
    }

} 
```

# c# - 有没有办法尝试从文件名中猜测日期，如果不能，优雅地失败？

> ID：10888504
> 
> 赞同：0
> 
> 时间：2012-06-04T21:17:15.530
> 
> 标签：c#, winforms, datetime, datepicker

我想尝试（以编程方式）猜测文件的创建日期。它被命名为*BlaBla.2012-06-04.xlw*，我猜它是在 2012 年 6 月 4 日创建的。

但是，如果文件被命名为其他名称，例如*SitOnA.PotatoPanOtis.pal*，我希望能够简单地放弃（没有尝试转换为 DateTime 导致异常）并向用户呈现 DateTimePicker。

可行吗？

我有这个代码：

```
String substr = SelectedFileName.Substring(DATE_BEGIN_POS, DATE_LENGTH);
return DateTime.Parse(substr); 
```

我在想这样的事情是有道理的：

```
try 
{
    String substr = SelectedFileName.Substring(DATE_BEGIN_POS, DATE_LENGTH);
    return DateTime.Parse(substr);
}
catch (ConversionException ce) 
{
    //Show form with DateTimePicker
} 
```

## 更新

似乎这样的事情应该有效：

```
DateTime dt;
if (!(DateTime.TryParse(substr, out dt))) {
   . . . 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T21:19:12.243

不要猜。得到它 ！

```
var creationTime = File.GetCreationTime(@"c:\myfile.txt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:19:01.403

您可以使用 直接询问创建时间，`File.GetCreationTime`或者如果您试图通过文件名猜测，那么您可以使用[TryParse](http://msdn.microsoft.com/es-es/library/system.datetime.tryparse%28v=vs.80%29.aspx)作为日期，如果不起作用（方法返回 false）然后显示对话框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T21:21:26.167

使用 RegEx 匹配文件名。

```
Regex r = new Regex("\d{4}-\d{2}-\d{2}");
if (r.Match(fileName).Success) {
    //GUESS!
} 
```

# android - 动态加载图像的Android动画

> ID：10888507
> 
> 赞同：1
> 
> 时间：2012-06-04T21:17:20.070
> 
> 标签：android, android-layout, animation, android-animation

我想为动态加载到垂直线性布局中的图像创建动画。触发时，我希望图像向下滑动，并将其 alpha 设置为 0（我希望这会将其下方的所有内容向下滑动）然后淡入图像。作为 Android 动画的新手，我遇到了一些麻烦。现在我正试图让淡入淡出工作，这就是我所拥有的：

淡入淡出.xml

```
<?xml version="1.0" encoding="utf-8"?>

<alpha
    xmlns:android="https://chemas.android.com/ap/res/android"
    android:interpolator="@android:anim/anticipate_interpolator"
    android:fromAlpha="0.0"
    android:toAlpha="1.0"
    android:duration="5000" >
</alpha> 
```

在活动中：

```
Animation animation = AnimationUtils.loadAnimation(context, R.anim.fade_in);

ImageView image = new ImageView(context);
image.setImageResource(R.drawable.my_image);
image.setLayoutParams(layoutParams);
image.setAlpha(0);

((ViewGroup) view).addView(image, 0);

image.startAnimation(animation); 
```

图像正在加载，因为它下面的所有上下文都向下移动，但是如果永远不会淡入的话。我想让这个工作以及让图像向下滑动，这样动态添加看起来不会那么不稳定。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T22:40:30.190

`xmlns:android`您的标签中有错字。

它应该是

`xmlns:android = "http://schemas.android.com/apk/res/android"`

随着这一点得到纠正，只需删除`image.setAlpha(0);`它，它应该会动画。恐怕我不能给你一个为什么它不能与设置为 0 的 alpha 属性一起工作的原因。

关于向下滑动动画，您必须将`Animation`. 看看这个我认为可以帮助你得到你想要的答案：[https ://stackoverflow.com/a/5122460/871102](https://stackoverflow.com/a/5122460/871102)

# python - 使用 Python/Django 更新 GitHub

> ID：10888509
> 
> 赞同：1
> 
> 时间：2012-06-04T21:17:37.487
> 
> 标签：python, django, git, github

这是我为从我的 Django 支持的基于 Web 的代码编辑器更新 GitHub 存储库而编写的损坏代码，请参阅[https://github.com/DjangoCoder/DjangoGUI/blob/master/projects/views.py](https://github.com/DjangoCoder/DjangoGUI/blob/master/projects/views.py)第 763 行。我重写此代码以实际工作？

```
def update_github(request, project_slug):
    print 'UPDATE GITHUB\n' * 100
    project = Project.objects.get(created_by=request.user, slug=project_slug)
    import pexpect
    child = pexpect.spawn('/bin/bash',)
    import sys
    child.logfile = sys.stdout 
    print 'a'
    child.sendline('cd %s' % (project.get_current_directory()))
    print 'b'
    child.sendline('git add *')
    child.sendline('git commit -m "commit"')
    print 'c'
    child.sendline('git push -u origin master')
    print 'd'
    child.sendline('ssgmssgm2')
    print 'e'

    return HttpResponse('') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T14:20:22.773

我认为您应该将 github api 用于此类工作。
请参阅 [http://developer.github.com/v3/](http://developer.github.com/v3/) 更多详细信息。

# sql-server-2005 - 将数据类型 varchar 转换为数字 CAST 时出错

> ID：10888517
> 
> 赞同：0
> 
> 时间：2012-06-04T21:18:22.003
> 
> 标签：sql-server-2005

我知道这已经像死马一样被殴打了。但是，无论我如何切片、投射或转换它，我都有同样的问题。将数据类型 varchar 转换为数字时出错。

```
SELECT  property_id, property_case_number, property_address, property_city, 
property_state, property_zip, property_lon, property_lat 
FROM property 
WHERE (property_active = 1) 
AND 
(property_county = (SELECT property_county FROM property AS property_1 
WHERE (property_id = 9165))) 
AND 
(property_id <> 9165)
AND
property_lon IS NOT Null 
AND 
property_lat IS NOT Null 
AND 
dbo.LatLonRadiusDistance(
CONVERT(DECIMAL(15,12),(select property_lat from property where property_id = 9165)), 
CONVERT(DECIMAL(15,12),(select property_lon from property where property_id = 9165)), 
property_lat,property_lon) <= '5' 
```

我在最后添加 dbo.LatLonRadiusDistance 后就遇到了这个问题。

dbo.LatLonRadiusDistance 以英里为单位比较纬度和经度距离。

```
FUNCTION [dbo].[LatLonRadiusDistance] 
(
@lat1Degrees decimal(15,12),
@lon1Degrees decimal(15,12),
@lat2Degrees decimal(15,12),
@lon2Degrees decimal(15,12)
)
RETURNS decimal(9,4)
AS
BEGIN

DECLARE @earthSphereRadiusKilometers as decimal(10,6)
DECLARE @kilometerConversionToMilesFactor as decimal(7,6)
SELECT @earthSphereRadiusKilometers = 6366.707019
SELECT @kilometerConversionToMilesFactor = .621371

-- convert degrees to radians
DECLARE @lat1Radians decimal(15,12)
DECLARE @lon1Radians decimal(15,12)
DECLARE @lat2Radians decimal(15,12)
DECLARE @lon2Radians decimal(15,12)
SELECT @lat1Radians = (@lat1Degrees / 180) * PI()
SELECT @lon1Radians = (@lon1Degrees / 180) * PI()
SELECT @lat2Radians = (@lat2Degrees / 180) * PI()
SELECT @lon2Radians = (@lon2Degrees / 180) * PI()

-- formula for distance from [lat1,lon1] to [lat2,lon2]
RETURN ROUND(2 * ASIN(SQRT(POWER(SIN((@lat1Radians - @lat2Radians) / 2) ,2)
    + COS(@lat1Radians) * COS(@lat2Radians) * POWER(SIN((@lon1Radians - @lon2Radians) / 2), 2)))
    * (@earthSphereRadiusKilometers * @kilometerConversionToMilesFactor), 4)

END 
```

我确定这与

```
(select property_lat from property where property_id = 9165) 
```

但无论我如何转换或转换它都不会改变事情。

如果我自己运行该函数，它不会给出错误。

有人有任何见解吗？

这是一个示例行

```
8462    023-125514  15886 W MOHAVE ST   GOODYEAR    AZ  85338-0000  -112.400297000000   33.429041000000 
```

property_lat & property_lon 是 varchar(50)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:04:04.713

您很可能期望布尔短路来挽救评估 WHERE 子句的顺序。这是一个已知的谬误：在 SQL 中不保证布尔运算符短路。有关查询优化器可以跳过布尔短路的讨论和证明，请参阅[关于 SQL Server 布尔运算符短路。](http://rusanu.com/2009/09/13/on-sql-server-boolean-operator-short-circuit/)类似的主题是[T-SQL 函数并不意味着一定的执行顺序](http://rusanu.com/2011/08/10/t-sql-functions-do-no-imply-a-certain-order-of-execution/)。它的要点是 SQL 是一种*声明性*语言，而不是命令性语言。

在您的情况下，您的 cast 和 converts 可能会针对 ID**不同的属性调用，`property_id = 9165`并且`property_active=1`**可能会尝试将不是数字的字符串值转换为数字，因此您会看到异常。很难给出准确的诊断，因为您的问题描述中缺少太多信息（例如所有涉及的对象的*确切*定义，包括所有表、索引、列类型等）。

您最好的途径是升级到 SQL Server 2008 并使用内置的[地理](http://msdn.microsoft.com/en-us/library/cc280766.aspx)类型，该类型具有内置支持[`STDistance`](http://msdn.microsoft.com/en-us/library/bb933808)：

> 这是测地线距离的近似值。普通地球模型上的 STDistance() 与精确测地线距离的偏差不超过 0.25%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:52:33.923

在玩完查询后，我得到了它的工作。

```
SELECT  [property_id], [property_case_number], [property_address], [property_city], 
[property_state], [property_zip], [property_lon], 
[property_lat] 
FROM property 
WHERE ([property_active] = 1) 
AND 
([property_county] = (SELECT b.property_county FROM property b WHERE (b.property_id =     @prop_id))) 
AND 
([property_id] <> @prop_id)
AND
[property_lon] IS NOT Null 
AND 
[property_lat] IS NOT Null 

AND
dbo.LatLonRadiusDistance(
(SELECT c.property_lat FROM property c WHERE (c.property_id = @prop_id)),
(SELECT d.property_lon FROM property d WHERE (d.property_id = @prop_id)),
CAST([property_lat] as FLOAT), 
CAST([property_lon] as FLOAT)) <= 5 
```

添加 [] 似乎避开了我遇到的问题。

# php - 在每个页面上使用 spl_autoload 而不使用关键字？

> ID：10888519
> 
> 赞同：2
> 
> 时间：2012-06-04T21:18:30.020
> 
> 标签：php, namespaces, alias, autoload

我们最近一直在使用 OO 重写 PHP 应用程序的模型代码。我们已经完成了类，并且我们包含了命名空间（以 Project\Level1\Level2 或其他形式）。由于这是一个已经构建的应用程序，因此有很多类。我们正在使用自动加载器，以便于加载类，这很棒。但这就是麻烦所在。

我们可能有 300 个页面散布在整个应用程序中，所有这些页面一开始都需要一个 PHP 文件（一种引导脚本）。该引导文件中需要自动加载器脚本。

现在，我们的大多数页面都将使用至少一个但可能是多个类。我们知道这里有两种选择：

```
//either call the classes using qualified names
$person = new Project\Person;

//or include the "use" keyword on every page, so we can alias the classes for ease of use
use Project\Person as Person;
$person = new Person; 
```

但麻烦的是，我们真的不想在应用程序的每个页面上都这样做：

```
require_once('../php/bootstrap.php');
use Project\Person\ as Person,
    Project\Address\ as Address,
    Project\Group\ as Group
    Project\CustomField\ as CustomField;
$person = new Person;
$address = new Address; 
```

我们尝试了，在引导文件中包含我们所有类的 use 关键字，但根据 PHP 手册，*“导入规则是基于每个文件的，这意味着包含的文件不会继承父文件的导入规则。”*

似乎在我们的应用程序的每个页面上都包含这些庞大的 use 语句会造成比其价值更多的麻烦。如果我们在一页上使用 15 个类怎么办？那么使用语句将是巨大的。

我的问题是：是不是太麻烦了？我们在使用命名空间方面是正确的，还是在 PHP 中不是很有帮助？现在知道我们要做什么，我们做得对吗？我们缺少什么吗？我们应该一直调用具有完全限定名称的类吗？

（这是我在 stackoverflow 上的第一个问题，所以如果我以后需要对我的问题做一些不同或更好的事情，请告诉我）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:33:33.530

虽然使用 vanilla Zend Framework Autoloader 可能不是您想要的方式，但 Zend Loader 确实支持自定义自动加载器，它可以尊重内联或在运行时动态指定的命名空间。正如您已经注意到的那样，就您而言，您正在使用`use Project\Person\ as Person`which 可能会变得很麻烦。

使用带有自动加载器的命名空间将允许您利用使用简单路径遍历的自动加载来组织类，而不必为了到达有趣的部分而附加大路径。

因此，`new Corp_Assets_Generic_Person_Address`您可以保留文件夹结构并使用`new Namespace_Person_Address`.

命名空间避免了类名的冲突。特别是在实现自动加载器的大型应用程序中，这些应用程序需要从许多不同的库中加载**正确的类。**使用较短的类名使代码更易于阅读，但可能使其更难维护。添加`use`语句使其更易于阅读和以后维护，但是编写和重构会很麻烦。我的建议是记录自动加载器的预期行为并使用自定义自动加载器来制作更具可读性的类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:59:03.450

在 php.ini 中将您的文件添加为 prepend_file

# php - 使用 AJAX 在 Zend Framework 中更新 PHP 变量

> ID：10888521
> 
> 赞同：0
> 
> 时间：2012-06-04T21:18:38.963
> 
> 标签：php, javascript, jquery, ajax, zend-framework

我有一个页面可以为最近的 15 篇文章生成图块。文章计数在 IndexController 上设置，需要通过 AJAX 调用进行更新。将触发 AJAX 调用的事件是设备方向的变化，因此当移动设备从纵向视图变为横向视图时。

我可以让它在 Zend Framework 之外工作，但由于是这个 MVC 的新手，我不太确定如何在控制器级别访问变量。

因此，例如，我为我的 AJAX 调用使用了一些 jQuery：

```
var request = $.ajax({
  type: "GET",
  url: "index/get-data",
  data: {tileLayout : "landscape" }
}).done(function( msg ) {
});

request.done(function(msg) {
}); 
```

我需要更新位于控制器中的这个变量并确定显示多少个图块：

```
$tiles = 15; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T08:07:55.033

这个答案可以帮助你

[https://stackoverflow.com/a/8489447/949273](https://stackoverflow.com/a/8489447/949273)

这是一个使用 Zend Framework 和 Ajax(jquery) 的简单示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:32:17.010

您可以使用以下方法在控制器操作中获取 titleLayout：

```
 $titleLayout = $this->_getParam('titleLayout'); 
```

# php - 使用 PHP 管理 VM 上的文件

> ID：10888533
> 
> 赞同：0
> 
> 时间：2012-06-04T21:19:32.703
> 
> 标签：php, file, virtual-machine, pydio

我有多个虚拟机 (VM)。其中一个是 PHP 服务器，其他只是普通机器。如何让 PHP 服务器管理文件。以及我怎样才能实现对它的访问控制。我希望客户端能够通过网页控制文件。就像说，Dropbox。另外，我怎样才能允许特定用户查看某些文件，而其他人则不能。意思是，User1 拥有一个文件并与 User2 共享，但不与 User3 共享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-03T01:56:06.533

您基本上是在要求一个超出 SO 范围的整个应用程序设计。但是，我建议避免从头开始创建它。而是使用开源解决方案，您可以稍后根据需要对其进行自定义

看看有[Pydio](http://pyd.io)（原名`AjaXplorer`）

这是他们提供的[演示](https://demo.pyd.io/)

# html - 大纲变成内联 - 我认为 Chrome 错误

> ID：10888538
> 
> 赞同：0
> 
> 时间：2012-06-04T21:19:50.497
> 
> 标签：html, css, google-chrome

谁能告诉我为什么谷歌浏览器会发生这种情况？[http://jsfiddle.net/webtiago/D2jLr/](http://jsfiddle.net/webtiago/D2jLr/)

大纲意味着这是一条在某物之外的线，对吗？当我专注于我的输入时，我的大纲变成了“内联”。应该不对吧？这发生在我正在从事的几个项目中。我正在使用 Chrome 19.0.1084.52 m。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:59:31.790

Chrome`outline-offset`在焦点上更改（控制轮廓的位置）。

只需使用`outline: 1px solid blue; outline-offset: 0;`它，它就会按照您想要的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:25:55.673

看起来就是这样。试试[这个](http://jsfiddle.net/D2jLr/1/)，我把线条变粗了。轮廓仍在外面。

它以 1px 移动看起来只是一个 Chrome 错误。你可以通过切换焦点的边框和轮廓颜色来解决它。

```
input:focus { border: 1px solid red; outline: 1px solid orange;} 
```

它仍然以 1px 移动，但至少保持颜色的顺序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T21:35:19.687

Chrome 的轮廓边框比您输入的边框略厚，使其看起来像是在里面。如果这很烦人，您可以通过以下方式关闭 chrome 的轮廓：

```
outline:none; 
```

**演示** [http://jsfiddle.net/D2jLr/2/](http://jsfiddle.net/D2jLr/2/)

# python - python cgi ajax延迟

> ID：10888539
> 
> 赞同：2
> 
> 时间：2012-06-04T21:20:06.113
> 
> 标签：python, ajax, cgi

我使用 python 脚本通过 ajax 将文本显示到屏幕上，但它很滞后，有时甚至无法正常工作。

这是python脚本

```
#!/usr/bin/env python
import cgi, cgitb
form = cgi.FieldStorage()
q = form.getvalue('q')
print "Content-Type: text/html\n" 
print q 
```

和html

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript">
        function show(str){
            var xmlhttp;
            if (str.length == 0){
                document.getElementById("hint").innerHTML = "";
                return;
            }
            if(window.XMLHttpRequest){
                xmlhttp=new XMLHttpRequest();
            }
            else{
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function(){
                if (xmlhttp.readyState==4 && xmlhttp.status==200){
                    document.getElementById("hint").innerHTML=xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET","../cgi-bin/ajax_test.py?q="+str,true);
            xmlhttp.send();
        }
    </script>
</head>
<body>
    <form action="">
        <input type="text" id="txt1" onkeyup="show(this.value)" />
    </form>
    <span id="hint"></span>
</body> 
```

是我的代码的错吗？还是因为 cgi/python 很慢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:51:52.323

虽然您的示例在本地 OSX apache 服务器上对我来说效果很好，但我建议使用 python CGI 作为后端解决方案来提供 ajax 调用将非常低效。CGI 的本质意味着每个请求都必须生成该 python 脚本的进程。

[http://en.wikipedia.org/wiki/Common_Gateway_Interface](http://en.wikipedia.org/wiki/Common_Gateway_Interface)

> 调用命令通常意味着调用服务器上新创建的进程。与生成输出的实际工作相比，启动进程可能会消耗更多的时间和内存，尤其是当程序仍需要解释或编译时。如果经常调用该命令，则由此产生的工作负载会很快使 Web 服务器不堪重负。
> 通过使用编译的 CGI 程序（例如 C/C++ 中的程序）而不是使用 Perl 或其他脚本语言，可以减少解释中涉及的开销。可以通过 FastCGI 等解决方案或使用 mod_php 等扩展模块在 Web 服务器中完全运行应用程序代码来减少进程创建所涉及的开销。

虽然它可能在本地运行得很好，只需要您进行测试，但当您将其设为面向公众并连接多个客户端时，它会受到更大的影响。

wsgi（或至少是 fastcgi）是一种优于老式 CGI 脚本的方法。如果您使用的是 apache，则可以使用 mod_wsgi。我相信还有[uwsgi](http://projects.unbit.it/uwsgi/)、[gunicorn和许多其他方法。](http://gunicorn.org/)最终的想法是，不是为每个请求调用一个独立的脚本，而是有一个正在运行、接受请求和执行函数的持久进程。

这些天来，我认为人们只是使用 python CGI 模块作为通过 python 编写服务器端 Web 代码的学习步骤。您可能需要考虑迁移到框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:56:55.370

当使用 python 作为 cgi 时，对于每个请求，必须启动一个新的 python iterpreter 来处理请求，这自然包括一些进程创建的开销。

当您为每个`keyup`事件发送新请求时，后台可能会启动很多进程。`change`捕获事件或者仅在按下返回时发送请求可能会更好。

除此之外，最好使用[wsgi](http://wsgi.readthedocs.org/en/latest/)而不是 cgi 来运行您的脚本，因为这样可以避免在每个请求上重新启动解释器。

# apache - .htaccess 和 .htpasswd 不显示提示

> ID：10888541
> 
> 赞同：0
> 
> 时间：2012-06-04T21:20:22.290
> 
> 标签：apache, .htaccess, .htpasswd

我正在尝试使用 .htaccess 和 .htpasswd 保护目录。

我在 /home/marcos 中创建了文件 .htpasswd 并且看起来像这样：

```
profesor:weuqwhdiuqh 
```

在我要保护的目录（/var/www/privado）中，我有一个包含以下内容的 .htaccess 文件。

```
AuthUserFile /home/marcos/.htpasswd
AuthName Testing
AuthType Basic
require user profesor 
```

如果我访问`http://localhost/privado/privado.html`它应该会看到输入登录数据的提示。而是没有出现提示，页面正常显示。

我究竟做错了什么？。

我在 Ubuntu 11.04 服务器上使用 apache2。

这些是加载的模块（在 phpinfo 上查看）

核心 mod_log_config mod_logio prefork http_core mod_so mod_alias mod_auth_basic mod_authn_file mod_authz_default mod_authz_groupfile mod_authz_host mod_authz_user mod_autoindex mod_cgi mod_deflate mod_dir mod_env mod_mime mod_negotiation mod_php5 mod_reqtimeout mod_setenvif mod_status

谢谢您的帮助。

问候！

# c++ - 如何在没有背景的情况下加载bmp

> ID：10888542
> 
> 赞同：0
> 
> 时间：2012-06-04T21:20:27.267
> 
> 标签：c++, image, allegro

所以，我试图在快板中制作游戏，但我目前被这个该死的空白背景困住，这让我非常生气，因为我知道 PNG 图像在背景中已经具有透明度，但我无法加载 png，我有已经下载了devpaks，安装了库，但仍然没有发生任何好事，如果对我来说最好的选择是使用PNG，那么请告诉我如何加载然后正确使用。

如果最好的选择仍然是使用 BMP，并且有一种算法、函数或一些代码可以使空白背景消失，请告诉我。

对于那些不明白我想要什么的人，有一个更好的解释：http: [//3.bp.blogspot.com/-r9BaUuMLirc/ThjzRHOMBKI/AAAAAAAAAJI/kUilPnIPJLg/s400/bola_azul.png](http://3.bp.blogspot.com/-r9BaUuMLirc/ThjzRHOMBKI/AAAAAAAAAJI/kUilPnIPJLg/s400/bola_azul.png)

它目前在.png，但我在油漆中转换为.bmp，所以它使我成为一个空白背景，在快板中它显示了整个画面，我只想拥有球。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T05:49:28.140

`masked_blit()`正如您所评论的，对于 Allegro 4，颜色 0xFF00FF 在与or一起使用时被视为透明`draw_sprite()`。

要在 Allegro 4 中加载 PNG，您需要将[loadpng](http://tjaden.strangesoft.net/loadpng/)与 libpng 一起使用。您可以通过启用 Alpha 混合器来使用 8 位 Alpha 通道`set_alpha_blender()`。

如果您刚刚开始，您应该使用 Allegro 5，它具有现代 API 和对 PNG 文件的原生支持。

# wpf - 在 Template 中，当 Path 是 ContentPresenter 时，我可以触发更改 Path.Fill 吗？

> ID：10888547
> 
> 赞同：3
> 
> 时间：2012-06-04T21:20:45.637
> 
> 标签：wpf, templates, contentpresenter

我有一个按钮模板，其中 ContentPresenter 实际上是一个路径。

在 MouseOver 上，我想更改 Path.Fill。

见模板：

```
 <Style x:Key="spinButtonStyle" TargetType="{x:Type RepeatButton}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type RepeatButton}">
                    <Border x:Name="Bd" BorderThickness="0" Background="Transparent" CornerRadius="2">
                        <ContentPresenter HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" TargetName="Bd" Value="#666666"/>
                            <Setter Property="Control.Foreground" Value="#999999"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

以及使用此模板的代码：

```
<RepeatButton Style="{StaticResource spinButtonStyle}">
    <Path blah blah blah/>
</RepeatButton> 
```

现在，在这种情况下，ContentPresenter 是一个路径。有什么方法可以更改 XAML 中的 Path.Fill 颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:59:29.223

您现在需要做的就是将 Path Fill 属性绑定到您的 RepeatButton Foreground 属性：

```
Fill="{Binding Path=Foreground, RelativeSource={RelativeSource AncestorType={x:Type RepeatButton}}}" 
```

# ffmpeg - FFMPEG 缩小图像

> ID：10888550
> 
> 赞同：1
> 
> 时间：2012-06-04T21:20:56.297
> 
> 标签：ffmpeg

这是给你的 FFMPEG 大师！

我有视频，我截取了图像。这工作正常：

```
ffmpeg -i sourceMovie.mp4 -ss 0 -vframes 1 destImage.jpg 
```

但我希望一举将图像缩小到 150 像素宽。显然，我应该添加

```
scale=150:-1 
```

但是我在哪里以及如何在命令中插入它？

我什么都试过了；没有任何效果...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T21:52:01.720

scale 是一个 VideoFilter，所以你使用“-vf”：

```
ffmpeg -i sourceMovie.mp4 -ss 0 -vframes 1 -vf "scale=150:-1" destImage.jpg 
```

# ruby-on-rails-3 - 保留属性的先前值

> ID：10888551
> 
> 赞同：0
> 
> 时间：2012-06-04T21:20:57.543
> 
> 标签：ruby-on-rails-3, activerecord

我有以下情况：如果我的**学生对象的****名称**属性发生变化，我想保留旧值并将其保存到另一个表中。

 **因此，如果我有一个名称属性为“John 1”的学生对象，在**student.update_attributes(:name => 'John 2')**之后，我希望能够在**before_update**中捕获旧名称值“John 1”回调钩子，例如。最好的方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:48:50.780

在`before_update`钩子中，您可以访问特殊`_was`方法来获取每个字段的先前值

```
before_update do
  new_name = self.name     # 'John 2'
  old_name = self.name_was # 'John 1'
end 
```**

# c# - 从子表单更新数据库后刷新 datagridview win 表单

> ID：10888561
> 
> 赞同：5
> 
> 时间：2012-06-04T21:21:37.170
> 
> 标签：c#, datagridview, dataset, dataadapter

从另一个表单对数据库进行更改后如何刷新datagridview，在关闭子表单后我尝试使用click事件刷新datagridview但它不起作用，我必须使用数据集吗？

```
 //create an OleDbDataAdapter to execute the query
            dAdapter = new OleDbDataAdapter(gQuery, connString);

            //create a command builder
            cBuilder = new OleDbCommandBuilder(dAdapter);

            //create a DataTable to hold the query results
            dTable = new DataTable();

            //fill the DataTable
            dAdapter.Fill(dTable);

            //BindingSource to sync DataTable and DataGridView
            bSource = new BindingSource();

            //set the BindingSource DataSource
            bSource.DataSource = dTable;

            //set the DataGridView DataSource
            dataGridView1.DataSource = bSource;

    private void button_Refresh_Click(object sender, EventArgs e)
    {

        dataGridView1.DataSource = bSource;
        dataGridView1.Refresh();

    } 
```

帮助我，请提前谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T12:26:56.913

添加

```
dataGridView1.Update(); 
```

它会解决你的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-24T14:05:30.163

当您将数据库与 DataGridView 属性中的“DataSource”链接时，IDE 会自动将 BindingSource 和 TableAdapter 添加到您的表单中。

如果数据库已更新并且您想刷新 DataGridView，请调用：

```
this.<table name>TableAdapter.Fill(this.<DB name>DataSet.<table name>); 
```

Where`<table name>`是您的表的名称（例如 Users），`<DB name>`是您的数据库的名称（例如 MyDB）。

```
this.UsersTableAdapter.Fill(this.MyDBDataSet.Users); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:39:44.093

```
 bSource.DataSource = dTable;
 dataGridView1.DataSource = bSource; 
```

如果你能回忆起你的桌子会更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T21:26:30.120

你有没有尝试过

```
dataGridView1.DataSource = dTable; 
```

# java - stringbuffer 和 "0&" 导致截断或转义

> ID：10888572
> 
> 赞同：0
> 
> 时间：2012-06-04T21:22:31.533
> 
> 标签：java, escaping, stringbuffer

抱歉标题不清楚，但我什至不知道该怎么称呼它，我会继续解释发生了什么。

我正在使用 Stringbuffer 来构建 URL。它看起来像这样：

```
http://maps.googleapis.com/maps/api/geocode/json?latlng=49.0516736,8.38891840&sensor=false 
```

在将单元测试中的这个字符串与方法的实际结果进行比较时，我遇到了这种行为。

这是我得到的断言错误：

```
latlng=49.0516736[,8.38891840]&sensor=false> but was:<...on?latlng=49.0516736[,8.3889184]&sensor=false 
```

重点是在**sensor=false**之前的字符序列**0]&**和**4]&**

 ****如果我在&**测试变为绿色之前删除零。

然后创建的字符串如下所示：

```
latlng=49.0516736,8.3889184&sensor=false 
```

所以......正如预期的那样。这不是问题，0 本身被截断并且测试会失败 - 我已经证明我的代码正在做它应该做的事情（当我删除零时），但我想知道这里发生了什么。

**0&**必须是某种数组访问或某种转义的指示。我不知道。有人知道是什么导致了这种行为吗？

编辑：

这是我正在使用的代码

```
StringBuffer s = new StringBuffer( grailsApplication.config.geocodingurl.toString() )
s.append(coordinates.latitude)
s.append(",")
s.append(coordinates.longitude)
s.append("&sensor=false")
return s.toString() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T21:39:07.140

转换`double`为`String`.

您正在做的可能是使用[StringBuilder#append(double)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html#append%28double%29)最终调用[Double#toString()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Double.html#toString%28double%29)。

请参阅这些方法的 javadoc 并了解如何将`double`值转换为`String`. 或者，如果您想控制您的代码，请使用[NumberFormat](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/NumberFormat.html)或其子类。**

# graph - 如何在图表中显示/可视化此类数据？

> ID：10888573
> 
> 赞同：1
> 
> 时间：2012-06-04T21:22:34.060
> 
> 标签：graph, charts, data-visualization

我有与游戏中玩家移动相关的数据。每个玩家报告距离、速度、当前坐标和时间戳。

这个游戏可能有 1/2k 玩家在任何给定时间玩，所以在可能的情况下绘制这个只是模糊......我想知道可以从这些数据中提取和可视化哪些有用的（如果有的话）数据？我试图创建一个平均速度和总运动量的折线图（两个不同的图表），但这些似乎不是用户想要的。用户不确定他们想要什么，但他们“知道”折线图是错误的方法！

您可以向我提供有关提取哪些数据可能有用或如何最好地可视化这些数据的任何信息，我们将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T10:15:04.540

我认为有很多选择。我不是数据可视化专家，但听起来基本上可以单独显示球员，一次全部显示，总计，平均等。然后他们的实际统计数据（距离，速度，持续时间，时间，位置）可以单独显示或彼此之间的关系/比例（总计，平均，你知道）。那可能会在那里产生大量可能的观点？然后你可以选择如何直观地呈现这些观点。纯文本、图标/颜色、图形/轮廓 1D、2D、3D。你明白我的意思吗？

# android - 在 JNI 共享库中查找函数？

> ID：10888576
> 
> 赞同：2
> 
> 时间：2012-06-04T21:23:28.060
> 
> 标签：android, c++, java-native-interface

有谁知道如何通过 NDK 编译的共享库和面向公众的 JNI 函数/方法显示所有可用的函数？

我有一个 lib* **jni.so 文件，我需要访问它的方法。使用 nm -Dg lib** *jni.so 输出共享库中的所有符号。我只是在寻找定义为 JNI 钩子的那些。

谢谢，凯文

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T07:37:12.990

您可以使用一些技巧来找出答案。

1.  **检查相应的 .class 文件。**如果您有该库的 .class 文件，您可以在 Eclipse 中打开它们并搜索`native`关键字以查看哪些方法已被声明为在本机中实现。

2.  **使用该`strings`命令转储所有字符串。**除非该库执行 Java 方法名称等的运行时连接（不太可能），否则您应该能够列出从 .so 引用的大多数 Java 方法和类`strings`。使用正则表达式，您可以过滤掉有趣的字符串。例如将`strings lib*jni.so | grep 'L[^;]*;'`列出从 .so 引用的所有类（例如`Lcom/somecompany/project/SomeClass;`）。将方法与类匹配可能会很棘手，但根据您的需要，这可能就足够了。

3.  **构建一个版本的 Dalvik VM，每次注册本地方法时都会打印一条 logcat 消息。**这是最先进、最耗时但最准确的。只需按照[http://source.android.com/source/index.html](http://source.android.com/source/index.html)`dvmRegisterJNIMethod`上的说明构建 Android 模拟器，但在构建之前，请在[dalvik/vm/Jni.cpp](https://github.com/android/platform_dalvik/blob/master/vm/Jni.cpp)的末尾启用调试打印，使其变为：`LOGI("JNI-registered %s.%s:%s", clazz->descriptor, methodName, signature);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T07:37:02.560

`javap`使用本机方法在 .class 文件上运行。

# python - 我有什么版本的 Pyramid，最好的更新方式是什么？

> ID：10888577
> 
> 赞同：8
> 
> 时间：2012-06-04T21:23:40.843
> 
> 标签：python, pyramid

我正在使用 Pyramid，我想知道如何检查我当前使用的版本。另外，我怎样才能更新我的金字塔？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-05T10:17:01.773

要知道您拥有哪个版本的金字塔，您可以在 python 控制台中运行它：

```
>>> import pkg_resources
>>> pkg_resources.get_distribution("pyramid").version 
```

要更新，您可以运行`pip install --upgrade pyramid`，但为了更新金字塔及其所有依赖项，我建议您替换当前的 virtualenv 并用新的 virtualenv 替换它，并重新安装pyramid。如果您不确定如何执行此操作，文档中的[安装过程应该会对您有所帮助。](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/install.html#creating-the-virtual-python-environment)

# ios - dispatch_async期间的UIActivityIndi catorView？

> ID：10888579
> 
> 赞同：0
> 
> 时间：2012-06-04T21:23:59.060
> 
> 标签：ios, asynchronous, uitableview, uiactivityindicatorview

在我的应用程序中，我只实现了一个 dispatch_async 块，它将从 NSDictionary 中获取图像，然后最终当图像准备好时，将其设置为 UITableViewCell UIImageView。我想做的是在 dispatch_async 发生时在 UITableViewCell 的 UIImageView 中间创建一个 UIActivityIndi​​catorAppear 。

这是我的 dispatch_async 块代码：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0), ^(void) {
        NSData *data = [myDictionary objectForKey:@"myKey"];
        UIImage *cellImage = [UIImage imageWithData:data];

        //we get the main thread because drawing must be done in the main thread always
        dispatch_async(dispatch_get_main_queue(),^ {
            [cell.imageView setImage:cellImage];
        } );

    }); 
```

无论如何，这可能吗？如果是这样，怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:59:57.420

在您设置图像的主队列块**之前**显示进度指示器`dispatch_async`并删除或隐藏它。

# facebook - facebook graph api get /me/scores 不适用于所有用户

> ID：10888580
> 
> 赞同：1
> 
> 时间：2012-06-04T21:24:05.837
> 
> 标签：facebook, facebook-graph-api, fbconnect

我有以下权限。'user_games_activity，user_likes，friends_games_activity，read_friendlists'

我想为我所有玩它的朋友访问 Castleville 游戏的分数。这就是我现在正在做的事情。

1.  获取好友列表。'/用户/朋友'。
2.  获取朋友'/friend_id/scores'的所有游戏的用户分数
3.  检查分数数组中是否存在 Castleville 游戏 ID 并提取分数。

这是第 2 步中的问题。'/friend_id/score's 不会返回所有用户的数据。对于一些它显示，但对于大多数朋友来说，数组是空白的。它应该显示用户玩的所有游戏或至少一些游戏。我用我的一个朋友 id 进行了测试，他玩了几十场游戏，在他的时间线上显示了分数，但没有带有 '/scores' api 查询的数据。它与另一个朋友 id 一起工作。检查了两个用户的隐私设置和应用程序权限，一切都是一样的。

我想我错过了一些东西。有任何想法吗！

编辑：问题可能已解决。将我的应用程序的类别更改为游戏，现在我可以访问我所有朋友的分数（经过少数测试并显示）。尽管现在人们会在身份验证对话框中单击“玩游戏”，而我的应用程序不是游戏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:50:17.063

[根据规范](http://developers.facebook.com/docs/scores/)，评分系统仅在您将应用程序的类别设置为“游戏”时才可用。

# c# - 无法上传文件 ASP.NET MVC

> ID：10888581
> 
> 赞同：0
> 
> 时间：2012-06-04T21:24:10.000
> 
> 标签：c#, asp.net-mvc, file-upload

我正在尝试创建一个创建模型对象页面。我正在使用带有 c# 的 asp.net mvc。在我的项目中，我正在尝试创建一个包含书籍的图书馆应用程序，我们可以从具有图片的应用程序中添加书籍。所以我的创建控制器是这样的，

```
 [HttpPost]
    public ActionResult Create([Bind(Exclude = "id,bringBack,borrower,isBorrowed")]Book bookToCreate, HttpPostedFileBase picture1)
    {
        try
        {
            if (picture1.ContentLength > 0)
            {
                var fileName = Path.GetFileName(picture1.FileName);
                var path = Path.Combine(Server.MapPath("~/App_Data/pictures"), fileName);
                picture1.SaveAs(path);
            }

            // TODO: Add insert logic here
            _entities.AddToLibrary(bookToCreate);
            _entities.SaveChanges();

            return RedirectToAction("ListBooks");
        }
        catch
        {
            return View();
        }
    } 
```

而我的看法是这样的，

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<MvcApplication2.Models.Book>" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>Create</title>
</head>
<body>
<% using (Html.BeginForm(new { enctype = "multipart/form-data" }))
   {%>
    <%: Html.ValidationSummary(true) %>

    <fieldset>
        <legend>Fields</legend>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.name) %>
        </div>
        <div class="editor-field">
            <%: Html.TextBoxFor(model => model.name) %>
            <%: Html.ValidationMessageFor(model => model.name) %>
        </div>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.author) %>
        </div>
        <div class="editor-field">
            <%: Html.TextBoxFor(model => model.author) %>
            <%: Html.ValidationMessageFor(model => model.author) %>
        </div>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.picture) %>
        </div>
        <div class="editor-field">
            <%: Html.TextBoxFor(model => model.picture) %>
            <%: Html.ValidationMessageFor(model => model.picture) %>
        </div>
        <input type='file' name='picture1' id='picture1' />
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>

<% } %>

<div>
    <%: Html.ActionLink("Back to List", "Index") %>
</div> 
```

我尝试了很多东西，但我无法上传任何文件。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:25:44.347

尝试从中获取发布的文件`Request`。

```
var picture1 = this.Request.Files["picture1"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T10:21:32.933

在您的 Book 模型中应该是 preperty

```
HttpPostedFileBase picture1 
```

# iphone - facebook登录给我已经授权这个应用程序没有自动返回应用程序

> ID：10888582
> 
> 赞同：14
> 
> 时间：2012-06-04T21:24:16.430
> 
> 标签：iphone, objective-c, ios, facebook

我的应用程序应该使用 facebook 实现登录，但我注意到每次我想登录 facebook 时都告诉我你已经授权了这个应用程序，如果我已经授权了这个应用程序，facebook 应该自动返回而不按我看到的 okey 按钮在其他应用程序中？

见附图 ![在此处输入图像描述](../Images/6f937b7b22bd5b60a4fcb6102132f980.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T14:22:30.697

我通过执行以下步骤解决了我的问题：
1- 以管理员身份登录到您的 Facebook 到您的应用程序。
2- 转到[https://developers.facebook.com/apps/YOUR_FACEBOOK_APP_ID/summary](https://developers.facebook.com/apps/YOUR_FACEBOOK_APP_ID/summary)。
3- 转到**设置**>**基本**>本**机 IOS 应用程序**
4- 将**Configured for iOS SSO:**设置为启用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-04T19:59:30.243

在 iOS/Android 中，FBAccessToken 的过期时间最长为 60 天。当您在应用程序中执行 FBLogin 时，您将获得访问令牌。一旦获得令牌，您就不应再次登录（否则将提示您**已授权此应用程序**，因为您的应用程序之前已获得未过期的访问令牌）。您应该重用**未过期的访问令牌。**

像这样 ：

```
if FBSDKAccessToken.currentAccessToken() != nil {
  print(FBSDKAccessToken.currentAccessToken().userID)
  print(currentAccessToken().tokenString)
//OR call the *FBGraphRequest*
 } 
```

注意：用于应用内浏览器登录（SVC：Safari View Controller）

查看更多： [https](https://developers.facebook.com/blog/post/2015/10/29/Facebook-Login-iOS9/) ://developers.facebook.com/blog/post/2015/10/29/Facebook-Login-iOS9/ 和 [https://developers.facebook.com/docs/reference/ios/4.9/class/ FBSDKLoginManager/](https://developers.facebook.com/docs/reference/ios/4.9/class/FBSDKLoginManager/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T21:55:54.810

您需要确保您的应用在构建设置中具有正确的 URL 前缀。还要确保 URL 前缀与 Facebook 开发人员应用程序中的 Facebook ID/URL 前缀匹配。

**编辑：**您的问题可能是 access_token 即将到期，因此必须重新请求权限。

如果您的应用程序没有请求 offline_access 权限，就会发生这种情况。在较新的 SDK 中，offline_access 已被弃用，您现在必须扩展 access_token。

请参阅此链接：[https ://developers.facebook.com/docs/mobile/ios/build/#extend_token](https://developers.facebook.com/docs/mobile/ios/build/#extend_token)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-21T18:22:29.477

由于这个问题已经得到解答，但我想添加另一个有用的答案`Swift 3.0`：

在 Swift 中使用 FB Login 时，我遇到了问题，我以前这样做过：

```
let fbLoginManager : FBSDKLoginManager = FBSDKLoginManager()
fbLoginManager.loginBehavior = .systemAccount 
```

使用时，系统帐户检查用户是否被授权登录。除非您通过不同的用户注销并登录，否则应用程序会显示相同的“已授权”消息来代替 Fresh login。所以我用了这种方式，这个技巧就可以了：

```
let fbLoginManager : FBSDKLoginManager = FBSDKLoginManager()
fbLoginManager.loginBehavior = .web. 
```

注销后显示登录屏幕。希望这有助于解决这个问题。

随意评论。谢谢。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-09T06:27:25.030

在使用 登录之前，您应该检查是否存在当前会话`FBSDKLoginManager`。登录前请勿使用`[loginManager logout]`。

```
if ([FBSDKAccessToken currentAccessToken]) 
 {
      NSLog(@"Token is available : %@",[[FBSDKAccessToken currentAccessToken]tokenString]);
      // Now get details using graphpath. 
 } else {
     // login with permissions using FBSDKLoginManager and get details using graphpath in completion

 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T14:11:38.990

facebook.com 上有一个开放的错误

[https://developers.facebook.com/bugs/190389531089978](https://developers.facebook.com/bugs/190389531089978)

但是这个bug只出现在android，ios工作正常。

（顺便说一句。foursquare 和 spotify android 应用程序中的相同行为 - 看看）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-20T08:37:09.297

将您的 iOS FB 应用程序运行到设备而不是模拟器中，它工作正常，并且没有显示已经授权的屏幕。谢谢你。

# java - 将 GeoDB 地理坐标转换为纬度/经度并进行区域搜索

> ID：10888583
> 
> 赞同：0
> 
> 时间：2012-06-04T21:24:16.443
> 
> 标签：java, geocoding, latitude-longitude

我有一个数据库，其中包含十进制形式的每个邮政编码的地理坐标（例如 5099755、928690）

我想根据这些值进行区域搜索，但在我找到的公式中，我应该将 Lat 和 Lon 值作为 Double 传递。

如何将这些“十进制”值转换为“双”值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:30:58.213

如果 GeoPoints 是 GeoCoordinates 变量

双纬度 = GeoPoints.getLattitude(); 或双纬度 = GeoPoints.getLattitudeE6；双 lon = GeoPoints.getLongitude(); 或双纬度 = GeoPoints.getLongitudeE6；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T07:28:26.963

我认为我们需要知道您的数字所在的坐标系 - 它们看起来可能是 UTM（通用横向墨卡托），但如果是这样，还应该有一个“区域”参数（例如 55H）。[本文档](http://www.uwgb.edu/dutchs/UsefulData/UTMFormulas.htm)描述了如何从 UTM 转换为 DMS（并为各种地理基准提供参数），还提供了 Javascript，您应该能够很容易地将其转换为 Java。

另外，看看这个[stackoverflow 帖子](https://stackoverflow.com/questions/176137/java-convert-lat-lon-to-utm)，它讨论了可以进行坐标系转换的 java 包。

再说一次，也许你的代码想要数据的格式与它们已经存在的格式完全相同，在这种情况下，你需要做的就是将你的小数转换为双精度数。

# android - 应用程序无法在 Android 4.0.3 上运行，但在 Android 2.3.4 上运行

> ID：10888584
> 
> 赞同：1
> 
> 时间：2012-06-04T21:24:21.960
> 
> 标签：android, version, android-4.0-ice-cream-sandwich, android-2.3-gingerbread

我有一个在 Android 2.3.4（模拟器/电话）上完美运行的应用程序。但我试图将它安装在 Android 4.0.3（模拟器/电话）上，但当我运行它时它不起作用。它向我显示了这条消息

```
"Unfortunately AppName has stopped" 
```

当出现错误时，应用程序正在执行这些类：

```
public class EmpleadosAct extends Activity {

private ArrayList<String> datos;
private ListView list;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ActualizarVehiculos();

}

public void ActualizarVehiculos() {

    try {
        NotesCenter messageCenter = new NotesCenterImpl();

        List<Vehiculo> vehiculo = messageCenter.getVehiculo();

        for (Vehiculo v : vehiculo) {
            AndroidOpenDbHelper androidOpenDbHelperObj = new AndroidOpenDbHelper(
                    this);

            SQLiteDatabase sqliteDatabase = androidOpenDbHelperObj
                    .getWritableDatabase();

            ContentValues contentValues = new ContentValues();
            contentValues.put(AndroidOpenDbHelper.matricula, v.matricula);

            long affectedColumnId = sqliteDatabase.insert("Vehiculos",
                    null, contentValues);
            sqliteDatabase.close();
        }
    } catch (Exception ex) {
        Log.v("blah", ex.getMessage());

    }

}
} 
```

第二类：

```
public class SeleccionarEmpleado extends Activity implements OnClickListener,
OnItemClickListener {

private ListView listaEmpleados;
private EditText ECont;
String text;
Bundle dataBundle;
public EmpleadosAct actemple;
protected AppApplication app;

private ListAdapter uGraduateListAdapter;

private ArrayList<UndergraduateDetailsPojo> pojoArrayList;
private String contraseña;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.seleccionarempleado);

    ***Intent actServicios = new Intent(this, EmpleadosAct.class);
    startActivity(actServicios);***

    listaEmpleados = (ListView) findViewById(R.id.ListaEmpleados);
    listaEmpleados.setOnItemClickListener(this);

    pojoArrayList = new ArrayList<UndergraduateDetailsPojo>();

    uGraduateListAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, populateList());

    listaEmpleados.setAdapter(uGraduateListAdapter);

}

public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
    case R.id.actualizar:
        //Intent actualizarEmpleados = new Intent(this,EmpleadosAct.class);
        //startActivity(actualizarEmpleados);

        //return true;

    case R.id.opciones:
        Toast.makeText(SeleccionarEmpleado.this, "Save is Selected",
                Toast.LENGTH_SHORT).show();
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
}

public void onClick(View v) {
    Intent addNewUndergraduateIntent = new Intent(this,
            InsertarPedido.class);
    startActivity(addNewUndergraduateIntent);
}

public List<String> populateList() {

    List<String> uGraduateNamesList = new ArrayList<String>();

    AndroidOpenDbHelper openHelperClass = new AndroidOpenDbHelper(this);

    SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

    Cursor cursor = sqliteDatabase.query("Empleados", null, null, null,
            null, null, null);

    startManagingCursor(cursor);

    while (cursor.moveToNext()) {

        String idempleado = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.idempleado));
        String nombre = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.nombre));
        String primerapellido = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.primerapellido));
        String segundoapellido = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.segundoapellido));
        String contra = cursor.getString(cursor
                .getColumnIndex(AndroidOpenDbHelper.contra));

        UndergraduateDetailsPojo ugPojoClass = new UndergraduateDetailsPojo();
        ugPojoClass.setIdEmpleado(idempleado);
        ugPojoClass.setNombreEmpleado(nombre);
        ugPojoClass.setPrimerApellido(primerapellido);
        ugPojoClass.setSegundoApellido(segundoapellido);
        ugPojoClass.setContra(contra);

        pojoArrayList.add(ugPojoClass);

        uGraduateNamesList.add(nombre + " " + primerapellido + " "
                + segundoapellido);
    }

    sqliteDatabase.close();

    return uGraduateNamesList;
}

@Override
protected void onResume() {
    super.onResume();
    uGraduateListAdapter = new ArrayAdapter(this,
            android.R.layout.simple_list_item_1, populateList());
    listaEmpleados.setAdapter(uGraduateListAdapter);
}

public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

    UndergraduateDetailsPojo clickedObject = pojoArrayList.get(arg2);

    String Empleado = clickedObject.getNombreEmpleado() + " "
            + clickedObject.getPrimerApellido() + " "
            + clickedObject.getSegundoApellido();

    Empleado empleadoseleccionado = new Empleado();
    empleadoseleccionado.id = clickedObject.getIdEmpleado();
    empleadoseleccionado.nombre = Empleado;
    app = (AppApplication)getApplicationContext();
    app.setempleadoActual(empleadoseleccionado);
    app.setempleadoId(empleadoseleccionado);

}
} 
```

起初它正在执行第二个类，在第二个类中有一个打开第一个类的 Intent。第一类将数据从某个远程服务器添加到 android SQLite 数据库。然后第二节课展示了来自 android SQLite 数据库的结果。

这是日志：

```
06-04 21:08:13.034: W/dalvikvm(517): threadid=1: thread exiting with uncaught exception    (group=0x409c01f8)
06-04 21:08:13.054: E/AndroidRuntime(517): FATAL EXCEPTION: main
06-04 21:08:13.054: E/AndroidRuntime(517): java.lang.RuntimeException: Unable to start  activity ComponentInfo{dokesim.net/myapp.net.EmpleadosAct}: java.lang.NullPointerException:  println needs a message
06-04 21:08:13.054: E/AndroidRuntime(517):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-04 21:08:13.054: E/AndroidRuntime(517):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-04 21:08:13.054: E/AndroidRuntime(517):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-04 21:08:13.054: E/AndroidRuntime(517):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-04 21:08:13.054: E/AndroidRuntime(517):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-04 21:08:13.054: E/AndroidRuntime(517):  at android.os.Looper.loop(Looper.java:137)
06-04 21:08:13.054: E/AndroidRuntime(517):  at android.app.ActivityThread.main(ActivityThread.java:4424)
06-04 21:08:13.054: E/AndroidRuntime(517):  at java.lang.reflect.Method.invokeNative(Native Method)
06-04 21:08:13.054: E/AndroidRuntime(517):  at java.lang.reflect.Method.invoke(Method.java:511)
06-04 21:08:13.054: E/AndroidRuntime(517):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-04 21:08:13.054: E/AndroidRuntime(517):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-04 21:08:13.054: E/AndroidRuntime(517):  at dalvik.system.NativeStart.main(Native Method)
06-04 21:08:13.054: E/AndroidRuntime(517): Caused by: java.lang.NullPointerException: println needs a message
06-04 21:08:13.054: E/AndroidRuntime(517):  at android.util.Log.println_native(Native Method)
06-04 21:08:13.054: E/AndroidRuntime(517):  at android.util.Log.v(Log.java:117)
06-04 21:08:13.054: E/AndroidRuntime(517):  at myapp.net.EmpleadosAct.ActualizarVehiculos(EmpleadosAct.java:133)
06-04 21:08:13.054: E/AndroidRuntime(517):  at    myapp.net.EmpleadosAct.onCreate(EmpleadosAct.java:24)
06-04 21:08:13.054: E/AndroidRuntime(517):  at android.app.Activity.performCreate(Activity.java:4465)
06-04 21:08:13.054: E/AndroidRuntime(517):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-04 21:08:13.054: E/AndroidRuntime(517):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-04 21:08:13.054: E/AndroidRuntime(517):  ... 11 more 
```

第二个日志：

```
06-04 21:40:03.225: V/blah(720): Error happened: 
06-04 21:40:03.225: V/blah(720): android.os.NetworkOnMainThreadException
06-04 21:40:03.225: V/blah(720):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
06-04 21:40:03.225: V/blah(720):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
06-04 21:40:03.225: V/blah(720):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
06-04 21:40:03.225: V/blah(720):    at libcore.io.IoBridge.connect(IoBridge.java:112)
06-04 21:40:03.225: V/blah(720):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
06-04 21:40:03.225: V/blah(720):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
06-04 21:40:03.225: V/blah(720):    at java.net.Socket.connect(Socket.java:842)
06-04 21:40:03.225: V/blah(720):    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
06-04 21:40:03.225: V/blah(720):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
06-04 21:40:03.225: V/blah(720):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
06-04 21:40:03.225: V/blah(720):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119 )
06-04 21:40:03.225: V/blah(720):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
06-04 21:40:03.225: V/blah(720):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
06-04 21:40:03.225: V/blah(720):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
06-04 21:40:03.225: V/blah(720):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
06-04 21:40:03.225: V/blah(720):    at myapp.net.HttpNote.doGet(HttpNote.java:32)
06-04 21:40:03.225: V/blah(720):    at myapp.net.NotesCenterImpl.getVehiculo(NotesCenterImpl.java:23)
06-04 21:40:03.225: V/blah(720):    at myapp.net.EmpleadosAct.ActualizarVehiculo(EmpleadosAct.java:91)
06-04 21:40:03.225: V/blah(720):    at myapp.net.EmpleadosAct.onCreate(EmpleadosAct.java:24)
06-04 21:40:03.225: V/blah(720):    at android.app.Activity.performCreate(Activity.java:4465)
06-04 21:40:03.225: V/blah(720):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-04 21:40:03.225: V/blah(720):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-04 21:40:03.225: V/blah(720):    at  android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-04 21:40:03.225: V/blah(720):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-04 21:40:03.225: V/blah(720):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-04 21:40:03.225: V/blah(720):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-04 21:40:03.225: V/blah(720):    at android.os.Looper.loop(Looper.java:137)
06-04 21:40:03.225: V/blah(720):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-04 21:40:03.225: V/blah(720):    at java.lang.reflect.Method.invokeNative(Native Method)
06-04 21:40:03.225: V/blah(720):    at java.lang.reflect.Method.invoke(Method.java:511)
06-04 21:40:03.225: V/blah(720):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-04 21:40:03.225: V/blah(720):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-04 21:40:03.225: V/blah(720):    at dalvik.system.NativeStart.main(Native Method) 
```

那么是什么导致 2.3.4 中的 android 一切正常，而在 4.0.3 中却不是？我的代码有问题，不支持 4.0.3 版本？

感谢您的任何回答或建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T21:28:54.457

```
Log.v("blah", ex.getMessage()); 
```

问题是`ex.getMessage()`正在返回`null`。您可以检查`null`，但更好的方法是将异常作为第三个参数显式传递给 log 方法：

```
Log.v("blah", "Error happened: ", ex); 
```

# c# - 在 .NET 3.5 中找不到 System.Core.DLL 的元数据

> ID：10888585
> 
> 赞同：1
> 
> 时间：2012-06-04T21:24:23.123
> 
> 标签：c#, codedom

我想使用 CodeDom 编译代码并初始化编译器参数我正在做这样的事情：

```
CompilerParameters parameters = new CompilerParameters();
parameters.ReferencedAssemblies.Add("System.dll");
parameters.ReferencedAssemblies.Add("System.Windows.Forms.dll");
parameters.ReferencedAssemblies.Add("System.Core.dll"); //only works in .NET 4.0 
```

如果我将 Visual Studio 的目标框架放在 .NET 4.0 上，没问题，它可以工作。但是如果我将 Visual Studio 的目标框架放在 .NET 3.5 上，那么它会给我图片中的错误。实际上我需要在 .NET 3.5 下运行它:(

![在此处输入图像描述](../Images/a1549982bb992c49dd16617bc7a4ac8b.png)

# php - mySQL & PHP 循环

> ID：10888586
> 
> 赞同：7
> 
> 时间：2012-06-04T21:24:37.547
> 
> 标签：php, mysql

我已获得访问第三方数据库的权限，并希望使用他们的信息创建一个工具。为其最初目的设计的数据库非常庞大且隔离。我需要完成以下任务：

从下面的 Schema 中，我需要完成以下任务：

在 invTypes 中查找项目，检查 invTypeMaterials 和 ramTypeRequirements 以查看是否需要任何材料来构建项目。如果是，则在 invTypes 中查找这些材料中的每一个，并再次重复该过程以查看它们是否需要组件。这个循环一直持续到对 invTypeMaterials 和 ramTypeRequirements 的检查为 False，这可以是 5 或 6 个循环，但每个循环要检查 5 或 6 个项目，因此可能是 1561 个循环，假设原始项目有 1 个循环，然后每个循环 5 个循环其中材料有5、5倍。

![在此处输入图像描述](../Images/c337fae974e98f5bf760584655eb91aa.png)

现在我尝试完成代码并提出以下内容：

```
$materialList = array();

function getList($dbc, $item) {

    global $materialList;
    // Obtain initial material list
    $materials = materialList($dbc, $item);

    // For each row in the database
    while ($material == mysqli_fetch_array($materials)) {
        // Check if there are any sub materials required
        if (subList($dbc, $material['ID'])) {
            // If so then recurse over the list the given quantity (it has already done it once)
            for ($i = 0; $i < $material['Qty'] - 1; $i++) {
                if (!subList($dbc, $material['ID'])) {
                    break;
                }
            }
        } else {
            // If there are no further materials then this is the base material so add to the array.
            $materialList .= array(
                "Name" => $mMaterial['Name'],
                "Qty" => $mMaterial['Qty'],
                "ID" => $material['ID']
            );
        }
    }

    return $materialList;
}

function subList($dbc, $item) {

    global $materialList;
    // Query the material incase it require further building
    $mMaterials = materialList($dbc, $item['ID']);

    // If the database returns any rows, then it must have more sub-materials required
    if (mysqli_num_rows($mMaterials) > 0) {
        // Check the sub-materials to see if they intern require futher materials
        if (subList($dbc, $material['ID'])) {
            // If the function returns true then iterate over the list the given quantity (its already done it once before)
            for ($i = 0; $i < $material['Qty'] - 1; $i++) {
                if (!subList($dbc, $material['ID'])) {
                    break;
                }
            }
        } else {
            // if the database returns 0 rows then this object is the base material so add to array.
            $materialList .= array(
                "Name" => $mMaterial['Name'],
                "Qty" => $mMaterial['Qty'],
                "ID" => $material['ID']
            );
            return true;
        }
    } else {
        return false;
    }
}

function materialList($dbc, $item) {

    // Query
    $query = "  SELECT i.typeID AS ID, i.typeName AS Name,  m.Quantity AS Qty
                FROM invTypes AS i
                LEFT JOIN invTypeMaterials AS m
                ON m.materialTypeID = i.typeID
                LEFT JOIN ramTypeRequirements AS r
                ON r.typeID = i.typeID
                WHERE groupID NOT IN(278,269,278,270,268) AND m.typeID = $item";
    $snippets = mysqli_query($dbc, $query) or die('Error: ' . mysqli_error($dbc));

    return $snippets;
} 
```

我相信你们都注意到，当涉及到递归数据库调用时，这段代码违反了每条编程法则。不是很实用，尤其是`subList()`它不断地调用自己，直到发现它是错误的。SQL 不是我的强项，但我终其一生都无法解决这个问题。

任何指针都会非常有帮助，我当然不会要求你们中的任何人为我重写我的整个代码，但如果你对我应该考虑什么有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:54:38.837

作为通用解决方案，我将执行以下操作：

*   对于每一个`typeID`，从两者中收集`invTypeMaterials`和`ramTypeRequirements`
*   从收集的数据中，您创建一个新`SELECT`查询并继续循环

## 初始查询

```
SELECT t.*, m.materialTypeID, m.quantity AS m_quantity, r.requiredTypeID, r.quantity AS r_quantity
FROM invTypes t
LEFT JOIN invTypeMaterials m USING (typeID)
LEFT JOIN ramTypeRequirements r USING (typeID)
WHERE <conditions to select the types> 
```

我刚刚猜测需要加载额外表中的哪些数据；必要时扩大。

对于匹配行， `materialTypeID`and`requiredTypeID`将为非 null，否则为 null。

保留您之前已加载的类型表，以便更快地参考。然后对于第二个查询，您将条件替换为 `WHERE t.typeID IN ()

让我知道这是否有意义，以及它是否接近对您有用的东西:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:07:05.397

看起来这里的递归是不可避免的。我加入了杰克的回答，只是会用 PHP 代码扩展它:)

我必须警告你我从未执行过它，所以它需要调试，但我希望你能明白。:)

```
$checked_dependencies = array();
$materials            = array();

function materialList( $ids ) {
    // if we have an array of IDs, condition is ".. in (...)"
    if(is_array($ids)) {
        $condition = 'IN ('.implode(',',$ids).')';
        // add all to checked dependencies
        foreach($ids as $id) { $checked_dependencies[] = $id; }
    }else{
    // otherwise, checking for particular ID
        $condition = "= {$ids}";
        // add to checked dependencies
        $checked_dependencies[] = $ids;
    }

    $query = "SELECT t.*, 
                     m.materialTypeID, m.quantity AS m_quantity, 
                     r.requiredTypeID,                  
                     r.quantity AS r_quantity
              FROM invTypes t
              LEFT JOIN invTypeMaterials m ON t.typeId = m.typeId
              LEFT JOIN ramTypeRequirements r ON t.typeId = r.typeId
              WHERE t.typeID {$condition}";

    $res = mysqli_query($dbc, $query);

    // this will be the list of IDs which we need to get
    $ids_to_check = array();

    while($material = mysqli_fetch_assoc($res)) {
         $materialList[] = $material; // you can get only needed fields
         // if we didn't check the dependencies already, adding them to the list
         // (if they aren't there yet)
         if(!in_array($material['materialTypeId'], $checked_dependencies) 
            && !in_array($material['materialTypeId'], $ids_to_check)                 
            && !is_null($material['materialTypeId'])) {
              $ids_to_check[] = $material['materialTypeId'];
         }
         if(!in_array($material['requiredTypeId'], $checked_dependencies) 
         && !in_array($material['requiredTypeId'], $ids_to_check)
         && !is_null($material['requiredTypeId'])) {
              $ids_to_check[] = $material['requiredTypeId'];
         }
    }

    // if the result array isn't empty, recursively calling same func
    if(!empty($ids_to_check)) { materialList($ids_to_check); }

} 
```

我这里使用了一个全局数组，但是很容易重写 func 来返回数据。

我们也可以在这里设置一些深度限制以避免过多的递归。

一般来说，我会说它不是一个非常方便的（对于这个任务）数据库数据的组织。像这样递归地存储数据有点舒服，但是，正如您所见，它会导致未知数量的迭代和对数据库的请求以获取所有依赖项。这可能很昂贵*(PHP <-> MySQL <-> PHP <->...)*，在每次迭代中我们都会浪费时间，特别是如果数据库像您的情况一样位于远程服务器上。

当然，重新安排数据结构以便一次获得所有要求会很好，但据我了解，您对数据库具有只读访问权限。我想到的第二个解决方案是递归 MySQL 存储过程，这在这里也是不可能的。

**在某些情况下**（通常不是），最好在一个查询中获取尽可能多的数据，并在本地对其进行操作，以减少迭代次数。很难说这里是否可能，因为我不知道数据库的大小和结构等，但是例如，如果所有需要的依赖项都存储在一个组中，并且这些组不是很大，也许它在对 PHP 数组的一个请求中获取所有组信息然后在本地从该数组收集信息可能会更快。但是 - 这只是一个猜测，需要测试和检查。

# google-app-engine - GAE/J + Restlet + 后端 + Cron 作业 + 405 错误：

> ID：10888587
> 
> 赞同：0
> 
> 时间：2012-06-04T21:24:37.863
> 
> 标签：google-app-engine, cron, restlet, http-status-code-405

希望在我面临的以下问题上获得一些帮助或指导。

在实时系统上使用具有 cron 作业的 GAE 后端时，我收到 405（不允许方法）错误。cron 作业在我定义的后端启动，但在将调用委托给目标 Restlet 后抛出 405 错误。根据日志，url路由如下。

[http://backendname.appid.appspot.com/cronURL](http://backendname.appid.appspot.com/cronURL)

我目前的配置如下：

*   GAE/J：1.6.1
*   RESTLET：2.1 RC5

我已经做了以下事情：

*   在我的 Restlet 应用程序中定义了 cron url 路由到我的 java 类的附件
*   我定义了 backends.xml
    *   将我的后端设置为公开，看看是否能解决问题，但没有
*   我定义了 cron.xml
    *   设置 cron 作业的 url
    *   将目标设置为我的后端实例名称

如果您想了解更多信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:28:08.633

您是否使用 @Get 注释标记了您的 RESTlet？

cron 作业将使用 HTTP GET 调用指定的 URL。cron 作业不支持其他动词（例如，PUT、POST、DELETE）。

# flash - 如何在 Flash Pro CS 5.5 中编辑 _root 函数

> ID：10888595
> 
> 赞同：0
> 
> 时间：2012-06-04T21:25:50.090
> 
> 标签：flash, actionscript, actionscript-2, flash-cs5

我需要在 .fla 文件中创建一个全局函数。我知道我应该把它放进去`_root`。

我无法找到如何`_root`在 Flash Pro CS 5.5 中进行编辑。

抱歉，这个天真的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:48:24.077

将您的函数（或变量）添加到附加到主时间线的脚本中，将在`_root`范围内创建它，并使其可以通过`_root`关键字在程序中的任何位置访问。

您应该注意，如果可能的话，通常认为避免调用 root 是一种很好的做法。主要原因是如果你的电影被加载到另一个电影中，范围将会改变，因为 root 将引用父电影。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T04:25:33.860

这是一个坏主意，全局函数会污染全局范围，导致无法与其他代码配合使用的不可扩展和不可扩展的代码。

也就是说，inn actionscript 2 以下应该起作用：

```
_root.myFunctionName = function(){
    trace("do whatever here");
    //your actions
};

// you can now call _root.myFunctionName; 
```

# oracle - Oracle BLOB - 撤消表空间并高效写入文件

> ID：10888596
> 
> 赞同：1
> 
> 时间：2012-06-04T21:25:50.573
> 
> 标签：oracle, plsql

*请参阅本文末尾的 pl/sql 代码块*

我正在编写一些 pl/sql 代码来从 zip 中提取某些文件。我正在使用[http://technology.amis.nl/wp-content/uploads/2010/06/as_zip7.txt](http://technology.amis.nl/wp-content/uploads/2010/06/as_zip7.txt)中的“as_zip”包来获取 zip ( ) 中的文件名`AS_ZIP.GET_FILE_LIST`并提取某些文件名放入`BLOB`( `AS_ZIP.GET_FILE`) 中，然后使用 . 将其写入文件`UTL_FILE`。

**第一个问题**
据我在监控中看到的，`UNDO TABLESPACE`在此过程中似乎没有被写入，但我想与其他人确认这是真的……如果我只是将特定文件的内容提取到然后将`BLOB`其写入文件，会`UNDO TABLESPACE`受到影响吗？企业在他们收费的数据库上使用的每一兆字节，所以我们需要尽可能地寻找减少表空间的方法......

**第二个问题**
就将 blob 写入文件而言，是否有比我如何完成它更有效的方法？第一个文件（碰巧是最大的 3.03GB）写入文件系统的速度很快，但随后每个文件的写入速度似乎越来越慢。我是否需要释放资源或以不同方式分配它们或......

```
SET SERVEROUTPUT ON
declare
  zip_files as_zip.file_list;
  l_file UTL_FILE.FILE_TYPE;
  L_BUFFER RAW (32767);
  L_AMOUNT BINARY_INTEGER := 32767;
  l_pos INTEGER;
  L_BLOB BLOB;
  l_blob_len INTEGER;
BEGIN

  DBMS_OUTPUT.ENABLE(1000000);

  ZIP_FILES  := AS_ZIP.GET_FILE_LIST( 'MY_DIR', 'MY_FILE.zip' );

  for i in zip_files.first() .. zip_files.last
  LOOP
    FOR EXT_TABLE_REC IN (SELECT LOCATION FROM USER_EXTERNAL_LOCATIONS) LOOP

      -- Check if there's a match between what's in the zip file and what the external table name is
      IF (INSTR(TRIM(LOWER(ZIP_FILES(I))),TRIM(LOWER(EXT_TABLE_REC.LOCATION || '__'))) > 0) THEN

        DBMS_OUTPUT.PUT_LINE('Match found on ' || ZIP_FILES(I) || ', ' || EXT_TABLE_REC.LOCATION || ' - processing...');  

        L_BLOB := AS_ZIP.GET_FILE('MY_DIR', 'MY_FILE.zip', zip_files(i));

        -- Open the destination file. Note the third parameter "wb"
        l_file := UTL_FILE.FOPEN ('MY_DIR', EXT_TABLE_REC.LOCATION, 'wb');

        l_blob_len := DBMS_LOB.getlength (l_blob);

        -- Read chunks of the BLOB and write them to the file until complete.
        l_pos := 1;

        WHILE l_pos < l_blob_len
        LOOP
          DBMS_LOB.READ (l_blob, l_amount, l_pos, l_buffer);
          UTL_FILE.put_raw(l_file, l_buffer, FALSE);
          l_pos := l_pos + l_amount;
        END LOOP;

        -- Close the file.
        UTL_FILE.FCLOSE (L_FILE);

      end if;

    end loop;

  end loop;

END;
/ 
```

如果有人想知道，这是我登录时返回的数据库信息：

```
Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit Production
With the Partitioning, Real Application Clusters, Automatic Storage Management, Oracle Label Security,
OLAP, Data Mining, Oracle Database Vault and Real Application Testing options 
```

**编辑 1**
我已经`EXCEPTION WHEN OTHERS`根据我在 Oracle 网站上找到的信息删除了该块。现在，这个过程似乎只是挂起，所以不确定问题现在发生在哪里......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T08:35:20.193

LOB 段的撤消的管理方式与哈希表的正常撤消不同。撤消是作为 lob 列本身的一部分进行管理和存储的。使用 pctversion 参数，您可以指定为撤消留出多少空间。该值指定为百分比值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T20:06:25.413

在 DBMS_LOB.READ 调用中，l_amount 是一个 IN OUT 参数，并且每次通过您的外部循环都会变得越来越小。它可以小到 1，在这种情况下，您一次处理 1 个字节。在你设置 l_pos := 1; 之后 还设置 l_amount=32767;

# perl - perl cookie 时间错误

> ID：10888597
> 
> 赞同：3
> 
> 时间：2012-06-04T21:25:53.447
> 
> 标签：perl, cookies, time, timezone

所以我正在使用 Perl 的 CGI 模块创建 cookie，我是这样做的：

```
my $cookie = CGI::Cookie->new(-name    =>  "$name",
                         -value   =>  "$val",
                         -expires =>  "$expiration_date",
                         -path    =>  $cookie_path,
                         -secure  =>  0
                        );

print "Set-Cookie: $cookie\n"; 
```

并且cookie是在浏览器中设置的，唯一的问题是时间与我设置的过期日期不匹配。例如，如果我将 +1d 设置为到期日期，它实际上会执行类似于 +1d 的操作 - 几个小时。我检查了我的系统时间，看看是否是问题所在，但我的系统时间是正确的。然后我打印出 cookie，我得到了这个：

```
Actual Time of cookie creation: 6/4/2012 12:10:02 PM    
COOKIE: session_id=534fec49c864d8cf0325779b0921b6be1338829802484; path=/; expires=Tue, 05-Jun-2012 17:10:02 GMT 
```

上面的诡异之处在于，我使用 perl 的“localtime(time())”函数记录了 cookie 创建的实际时间，但它记录的时间与我的 date 命令输出的时间不同（所以不是实际的当前时间）！然后cookie上的过期时间实际上是正确的，但是它在错误的时区。

`date`因此，当我运行命令时，我的服务器位于东部时区：

```
Mon Jun  4 12:05:12 EST 2012 
```

但是，cookie 设置为 GMT 作为时区，我认为这是问题所在。除了 just 之外，还有其他时间我应该在服务器上设置`date`吗？如果有帮助的话，我正在 CentOS 5 上运行。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T21:31:13.197

这些时间实际上是等价的（美国东部标准时间 12:00 是格林威治标准时间 17:00）。请注意，规范要求使用 cookie 以 GMT 指定到期时间。反过来，您的浏览器需要自动将时区转换回来。

简而言之：一切都在按理说。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-04T21:43:47.490

> 但它记录的时间与我的日期命令输出的时间不同

这不是真的。

```
Tue, 05-Jun-2012 17:10:02 GMT 
```

和

```
Tue, 05-Jun-2012 12:10:02 EST 
```

是同一时间的不同表示。这里没有问题。如果你得到了就会有问题

```
Tue, 05-Jun-2012 17:10:02 EST 
```

或者

```
Tue, 05-Jun-2012 12:10:02 GMT 
```

但你没有。

使用 GMT 是因为“EST”不明确——澳大利亚有一个同名的时区——而且如果每个人都使用 GMT，则只需要知道一个时区而不是所有时区。

# c++ - 对象不会打包数据

> ID：10888603
> 
> 赞同：1
> 
> 时间：2012-06-04T21:26:18.537
> 
> 标签：c++, clang, xcode4.3, memory-alignment

我正在尝试将数据打包到 c++ 结构中。

我的结构有这样的布局：

```
struct structName
{
  int16_t member1;
  int32_t member2;
  uint32_t member3;
  uint32_t member4;
  uint32_t member5;
  etc
}__attribute__((packed)); 
```

使用`offsetof($structname, $membername)`我可以取回数据的正确偏移量（0,2,6,10,14 ......），但是当我通过成员名称访问数据时，我会以 4 字节偏移量（0,4,8， 12,16 . . .) 就好像结构没有打包一样。

是

```
} __attribute__((packed)); 
```

使结构打包的正确方法？. .

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T21:50:24.633

更新：*mydogisbox*写道：

> 为了记录，`__attribute__((packed))`和`#pramga pack(1)`所有`#pragma pack(push, 1)`工作。

`__attribute__((packed))`是一个**gcc**扩展，它是受支持的。

clang 文档说它还支持`#pragma pack(...)`指令：

> clang 对 Microsoft Visual C++ 的扩展提供了一些实验性支持；要启用它，请使用 -fms-extensions 命令行选项。这是 Windows 目标的默认设置。请注意，支持不完整；启用 Microsoft 扩展将静默删除某些结构（包括 __declspec 和 Microsoft 风格的 asm 语句）。
> 
> clang 支持 Microsoft`#pragma pack`用于控制记录布局的功能。

来源：[http ://clang.llvm.org/docs/UsersManual.html](http://clang.llvm.org/docs/UsersManual.html)

说啊：

```
#pragma pack(1)
struct my_struct {
    int16_t x;
    // etc.
}; 
```

看看它是否有效（`-fms-extensions`如果不使用 Windows 则编译）。

注意以上都是非标准扩展，新的C++11标准有一个新的`alignas`关键字：[http ://en.cppreference.com/w/cpp/language/alignas](http://en.cppreference.com/w/cpp/language/alignas)

```
struct alignas(1) my_struct {
    int16_t x;
    // etc.
}; 
```

但它的支持仍然有点粗略。

# ruby-on-rails - Rails：设计：确认后错误

> ID：10888608
> 
> 赞同：0
> 
> 时间：2012-06-04T21:26:31.717
> 
> 标签：ruby-on-rails, devise, confirmation-email

在用户确认后，我正在尝试向活动管理员发送电子邮件。

请参阅：[Rails：设计：在用户确认注册后发送电子邮件](https://stackoverflow.com/questions/10877475/rails-devise-sending-an-email-after-user-comfirms-registration)

我写了一个 EventMailer 类如下：

```
class EventMailer < ActionMailer::Base
  @user = User

  @host_name = "localhost:3000" if Rails.env.development?
  @host_name = "test.com" if Rails.env.test?
  @host_name = "production.com" if Rails.env.production?

 def self.send_email_to_admin
   @@smtp_settings = { #override default smtp settings since I'm using a difference sender
     :address => "smtp.gmail.com",
     :port => 587,
     :domain => @host_name,

     :authentication => "plain",
     :enable_starttls_auto_=> true,
     :user_name => ENV["ORG_FROM"],
     :password => ENV["ORG_FROM_PWD"],
     :to => ADMIN_RECIPIENTS
     #ADMIN_RECIPIENTS is defined elsewhere
   }
   mail(:subject => "Invite request received from " + @user.first.to_s + " " + @user.last.to_s)
 end
end 
```

当用户注册时，他们会收到一个注册链接。当他们单击该链接时，他们会收到以下错误消息：

```
undefined method `mail' for EventMailer:Class

app/mailers/event_mailer.rb:20:in `send_email_to_admin'
app/controllers/confirmations_controller.rb:11:in `show' 
```

有任何想法吗？

# 编辑：

解决方案是将 :to 和 :from 都移动到邮件网络中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:38:05.113

尝试`:to => DENT_ADMIN_RECIPIENTS`进入邮件方法：

```
mail(:to => DENT_ADMIN_RECIPIENTS, :subject => "Invite request received from " + @user.first.to_s + " " + @user.last.to_s) 
```

# mongodb - 如何在 Rails 控制台中查询特定的 MongoDB 集合字段？

> ID：10888609
> 
> 赞同：2
> 
> 时间：2012-06-04T21:26:33.567
> 
> 标签：mongodb, mongoid, rails-console

我有一个使用 MongoDB 的 Rails 3 应用程序，其中 Mongoid 作为 ORM。我想查询集合中的特定字段。

为了查询我使用的特定集合的所有记录，`User.all.to_a`相当于`User.all`在 ActiveRecord 中。

现在我想查询一个集合中的所有记录，但只输出一个特定的字段。在这种情况下，我想查看所有用户名。我该怎么做呢？

我确定我已经在 Mongoid 文档中看到了这一点，只是遗漏了一些东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:41:29.433

我在 mongoid 的新文档中找不到它，但这里有一个快速链接，[只](http://two.mongoid.org/docs/querying/criteria.html#only)指向旧的 2.xx 文档。

基本上你需要做：

```
User.all.only(:name).to_a 
```

# node.js - 使用 https.request 忽略 node.js 中无效的自签名 ssl 证书？

> ID：10888610
> 
> 赞同：372
> 
> 时间：2012-06-04T21:26:40.233
> 
> 标签：node.js, https, ssl-certificate

我正在开发一个登录本地无线路由器（Linksys）的小应用程序，但我遇到了路由器自签名 ssl 证书的问题。

我运行 wget 192.168.1.1 并得到：

```
ERROR: cannot verify 192.168.1.1's certificate, issued by `/C=US/ST=California/L=Irvine/O=Cisco-Linksys, LLC/OU=Division/CN=Linksys/emailAddress=support@linksys.com':
Self-signed certificate encountered.
ERROR: certificate common name `Linksys' doesn't match requested host name `192.168.1.1'.
To connect to 192.168.1.1 insecurely, use `--no-check-certificate'. 
```

在节点中，被捕获的错误是：

```
{ [Error: socket hang up] code: 'ECONNRESET' } 
```

我当前的示例代码是：

```
var req = https.request({ 
    host: '192.168.1.1', 
    port: 443,
    path: '/',
    method: 'GET'

}, function(res){

    var body = [];
    res.on('data', function(data){
        body.push(data);
    });

    res.on('end', function(){
        console.log( body.join('') );
    });

});
req.end();

req.on('error', function(err){
    console.log(err);
}); 
```

我怎样才能让 node.js 做相当于“--no-check-certificate”的事情？

* * *

## 回答 #1

> 赞同：733
> 
> 时间：2014-02-22T21:45:27.470

便宜且不安全的答案：

添加

```
process.env["NODE_TLS_REJECT_UNAUTHORIZED"] = 0; 
```

在代码中，在调用之前`https.request()`

[在这个问题](https://stackoverflow.com/questions/20433287/node-js-request-cert-has-expired#answer-29397100)中回答了一种更安全的方式（上面的解决方案使整个节点进程不安全）

* * *

## 回答 #2

> 赞同：192
> 
> 时间：2012-06-14T23:37:51.803

在您的请求选项中，尝试包括以下内容：

```
 var req = https.request({ 
      host: '192.168.1.1', 
      port: 443,
      path: '/',
      method: 'GET',
      rejectUnauthorized: false,
      requestCert: true,
      agent: false
    }, 
```

* * *

## 回答 #3

> 赞同：73
> 
> 时间：2016-08-23T10:51:04.713

不要相信所有试图误导你的人。

在您的请求中，只需添加：

```
ca: [fs.readFileSync([certificate path], {encoding: 'utf-8'})] 
```

如果您打开未经授权的证书，您将根本不会受到保护（因为不验证身份而暴露于 MITM），并且在没有 SSL 的情况下工作不会有很大的不同。解决方案是指定您期望的 CA 证书，如下一个片段所示。确保证书的通用名称与您在请求中调用的地址相同（在主机中指定）：

你会得到的是：

```
var req = https.request({ 
      host: '192.168.1.1', 
      port: 443,
      path: '/',
      ca: [fs.readFileSync([certificate path], {encoding: 'utf-8'})],
      method: 'GET',
      rejectUnauthorized: true,
      requestCert: true,
      agent: false
    }, 
```

请在此处阅读[本文](https://exhesham.com/2018/01/18/deploy-ca-ssl-certificates-in-your-testing-environment/)（披露：此答案作者撰写的博客文章）以了解：

*   CA 证书的工作原理
*   如何轻松生成 CA 证书以进行测试以模拟生产环境

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2015-05-25T12:17:16.143

添加以下环境变量：

```
NODE_TLS_REJECT_UNAUTHORIZED=0 
```

例如`export`：

```
export NODE_TLS_REJECT_UNAUTHORIZED=0 
```

（非常感谢胡安拉）

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2016-08-23T06:26:52.940

添加到@Armand 答案：

> 添加以下环境变量：
> 
> NODE_TLS_REJECT_UNAUTHORIZED=0 例如导出：
> 
> export NODE_TLS_REJECT_UNAUTHORIZED=0（非常感谢 Juanra）

**如果您在 Windows 上使用：**

```
set NODE_TLS_REJECT_UNAUTHORIZED=0 
```

[感谢：@weagle08](https://github.com/nodejs/node-gyp/issues/695)

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2018-05-23T17:16:35.043

您还可以使用默认选项创建请求实例：

```
require('request').defaults({ rejectUnauthorized: false }) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-01-04T07:08:13.367

对于meteorJS，您可以使用 npmRequestOptions 进行设置。

```
HTTP.post(url, {
    npmRequestOptions: {
        rejectUnauthorized: false // TODO remove when deploy
    },
    timeout: 30000, // 30s
    data: xml
}, function(error, result) {
    console.log('error: ' + error);
    console.log('resultXml: ' + result);
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-10T18:29:00.700

或者您可以尝试添加本地名称解析（在大多数操作系统`hosts`的目录中找到的文件，详细信息不同），如下所示：`etc`

```
192.168.1.1 Linksys 
```

接下来

```
var req = https.request({ 
    host: 'Linksys', 
    port: 443,
    path: '/',
    method: 'GET'
... 
```

将工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-17T23:51:30.130

所以，我的公司刚刚切换到 Node.js v12.x。我正在使用`NODE_TLS_REJECT_UNAUTHORIZED`，它停止工作。经过一番挖掘，我开始使用`NODE_EXTRA_CA_CERTS=A_FILE_IN_OUR_PROJECT`具有我们自签名证书的 PEM 格式，并且我的所有脚本都可以再次运行。

所以，如果你的项目有自签名证书，也许这个 env var 会对你有所帮助。

参考：[https ://nodejs.org/api/cli.html#cli_node_extra_ca_certs_file](https://nodejs.org/api/cli.html#cli_node_extra_ca_certs_file)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-07T18:07:10.127

尝试导出 NODE_TLS_REJECT_UNAUTHORIZED=0

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-25T16:00:10.307

# 当您无法控制请求创建时

使用包时，您有时无法在`request`调用中设置正确的设置，包也没有为您提供注入`request`.

但是，您可能仍希望避免不安全`NODE_TLS_REJECT_UNAUTHORIZED=0`并选择仅与指定目标建立不安全的连接。

这就是我解决问题的方法：

```
// check if host and port fit your application
function isSelf(host, port) {
  return host === myHost && port === myPort;
}

// get the built in tls module and overwrite the default connect behavior 
const tls = require("tls");
const _connect = tls.connect;
function wrappedConnect(options, secureConnectListener) {
  if (isSelf(options.host, options.port)) {
    options.rejectUnauthorized = false;
  }
  return _connect(options, secureConnectListener);
}
tls.connect = wrappedConnect; 
```

# ios - UIAutomation 和 NSNotification

> ID：10888613
> 
> 赞同：0
> 
> 时间：2012-06-04T21:26:57.110
> 
> 标签：ios, asynchronous, ios-ui-automation

我希望能够使用 UIAutomation 来测试应用程序。我遇到的问题是，我需要从网络下载数据。有没有办法在发布 NSNotification 之前暂停 UIAutomation 脚本，或者我只需`delay()`要比我认为下载数据所需的时间更长。等待一定的时间并不可取，因为有时不需要重新下载数据。

非常感谢任何帮助/链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:54:37.483

UIAutomation 有一个漂亮的函数，叫做`waitForInvalid()`. 如果您有一个进度条或将在数据下载完成后显示然后删除的东西，您可以使用它。

这也适用于用户已经拥有数据并且您不显示 UI 的情况，因为该函数会立即返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T16:56:09.993

杰克的答案适用于大多数细节，但一些网络工作发生在后台队列上，并且没有进度指示器。

我最终编写了一个将`CGRectZero`UIView 粘贴到元素中的助手。然后我们可以等到这个元素变得有效。它不像我希望的那样干净，但它正在醒来。

```
waitForElementNamed: function(name, element, timeout) {
  timeout = timeout || 10
  log("Waiting for " + timeout + " seconds")
  var valid = false
  for (var i = 0; i < timeout; i++) {
      UIATarget.localTarget().pushTimeout(.5)
      valid = element.elements()[name].isValid()
      if (valid) {
      log("Found Element " + name)
      return
      }
      UIATarget.localTarget().popTimeout()
      target.delay(.5)
  }
  if (!valid) {
      failed("Wait Timedout [" + timeout + "]")
  }
} 
```

它不漂亮，但它有效。

# ssis - 为什么 SSIS 抱怨“文件末尾有部分行”？

> ID：10888616
> 
> 赞同：3
> 
> 时间：2012-06-04T21:27:28.590
> 
> 标签：ssis

我正在使用 SSIS 中的数据流任务将平面文件导入数据库。该文件非常简单：每行包含三个逗号分隔的值。但是，每当我运行此任务时，我都会收到来自平面文件组件的警告：

> 警告：0x8020200F：文件末尾有部分行。

无论文件大小如何，此警告似乎都会发生：即使文件中只有少数行，经过视觉验证（带有扩展字符和不可见的内容）我仍然会收到它。此外，我是否在文件末尾有一个空白行或者我只是在没有尾随 CR+LF 的情况下结束它似乎并不重要。

我怎样才能摆脱这个警告，以便我可以在启用**WarnAsError**的情况下运行我的包？

（顺便说一句，似乎其他人可能[在文件末尾有一个部分行中](https://stackoverflow.com/questions/10530326/there-is-a-partial-row-at-the-end-of-the-file)遇到了类似的问题，尽管这不是什么大问题。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T21:27:28.747

如果您遇到此问题，我发现了三件事可以尝试。在这三种情况中至少有两种情况下，SSIS 忽略了我的输入文件的行，只显示了上面的警告。因此，**我不建议忽略此警告！**

## 第 1 步：验证您的平面文件是否有效

当您的输入文件无效时会出现此错误。如果您的输入文件有数百万行，就像我的一样，这可能特别难以检测，但是发现文件格式违规至关重要，因为 SSIS 会很乐意给您这个警告并继续前进而不导入有问题的行，或者，在某些情况下，违规行*之后的行。*我发现发现源文件问题的最简单方法是检查成功导入的行数。如果它与您在平面文件中期望的数字有很大不同，则中间某处可能出现问题。

## 第 2 步：在末尾尝试一条虚拟线（仅限固定宽度）

如果您使用的是固定宽度格式的输入文件，Microsoft 可能会为您提供有用的[知识库文章](http://support.microsoft.com/kb/937969)。基本上，他们建议您在文件末尾添加一个虚拟行。

我没有使用固定宽度的文件，所以我不能说这种技术有多有用。

## 第 3 步：关闭非文本的文本限定

这是一个棘手的问题，因为我相信*TextQualified*属性默认为**True**。如果您的输入文件使用非文本字段（整数等），那么您必须告诉 SSIS 它不应期望这些列被限定为文本。本质上，尽管看起来完全有效，但您的输入文件将无效。

*TextQualified*是平面文件连接管理器中列的属性。

![连接管理器](../Images/a7fc93d054ac712a3c25217817adcaf3.png)

要更改它，请打开您的连接管理器，单击“高级”，然后单击非文本列。确保*TextQualified*属性设置为**False**。您需要对所有非文本列执行此操作。

![在此处输入图像描述](../Images/9c609a0beb3623150ab162067a382f28.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T19:37:17.173

如果文件中行的字节宽度是已知的，您始终可以仔细检查文件的总字节大小是否可以除以预期的行大小，从而为您提供一个很好的圆形行数（而不是小数） .

它还有助于从您的来源了解预期有多少记录，但如果您没有这个，您至少可以在加载文件时仔细检查生成的加载表记录计数与行计数的计算。

当源平面文本文件丢失时，我经常看到此错误，它是文件末尾的最后一个 \r\n 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-18T20:25:30.300

在 Windows 64 位上运行是完美的。它导致没有丢失行，但是在 Windows 2008 上运行时我丢失了最后一行。

我的解决方法是 1\. 在 Windows 2008 上的 BID 中打开 ssis。 2\. 打开文件连接管理器，确保 Text Qualifier 设置为 3\. 重建它

在 Windows 7 和 Windows 2008 中一切正常。

# ipad - 在 Storyboard 中布局视图，然后从代码中将其加载到 PopOver 中？

> ID：10888621
> 
> 赞同：3
> 
> 时间：2012-06-04T21:27:43.647
> 
> 标签：ipad, ios5, storyboard, uipopovercontroller

我有相对复杂的 ui 出现在弹出窗口中（足够复杂，从代码中完成所有布局和关系会很痛苦），但是调用它的按钮是从代码创建并放置到父视图（存在于情节提要中）中的.

我尝试过从父视图的 viewcontroller 对象到弹出内容 vc 的弹出框 segue，然后使用 performSegueWithIdentifier 触发它。这几乎可行，但我不知道如何从代码中设置 popOver 的 Anchor，使其出现在错误的位置（在屏幕底部被挤压）。

有没有办法动态设置popOver segue的锚点？或者我可以创建一个 UIPopOverController 对象并将我在情节提要中放在一起的视图放入其中吗？还是有其他一些我没有看到的明显方法来做到这一点？

请温柔，我是新来的。

iPad iOS5.1 XCode4.3.2

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T17:46:40.760

亚历克斯，

我不完全确定我理解你想要做什么，但让我从我认为我理解的内容中尝试一下。

出于您引用的相同原因（视图复杂性等），我经常在情节提要中构建我的视图，然后从某些动作中加载它们。你可以做的是通过标识符实例化视图控制器，如下所示：

```
FancyViewController *controller = [[self storyboard] 
              instantiateViewControllerWithIdentifier:@"FancyViewController"]; 
```

这假设您已经创建了一个名为 FancyViewController 的 UIViewController 子类，并在情节提要中设置了视图控制器的类型。

现在，您可以在弹出控制器中显示视图控制器，也可以将其推送到导航堆栈上。您只需要确保已在情节提要中设置了视图控制器的标识符。

![在此处输入图像描述](../Images/c381858686d19a8aa243f8de4dc2ae67.png)

此外，如果您使用 popover 控制器并且每次触发操作时只需更新视图控制器属性，您可能希望实例化一次视图控制器。因此，如果它点击触发弹出框的按钮，您的代码可能如下所示：

```
- (IBAction)didTapButtonToShowFancyViewController:(id)sender
{
  if (![self fancyViewController])
  {
    // fancyViewContrller is a property of type FancyViewController *
    fancyViewController = [[[self storyboard]
          instantiateViewControllerWithIdentifier:@"FancyViewController"];

    // fancyViewPopoverController is also a property
    fancyViewPopoverController = [[UIPopoverController alloc] 
                  initWithContentViewController:fancyViewController];
  }

  // Perform setup on the fancy controller you want to do every
  // time the action gets triggered here. Do initialization in the if
  // block above.

  // Now display the popover from the sender's frame. I'm assuming the
  // sender is a UIButton.
  [fancyViewPopoverController presentPopoverFromRect:[sender valueForKey:@"frame"] 
                              inView:[self view] 
              permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

} 
```

动态设置弹出框的“锚点”的唯一方法是使用调用`presentPopoverFromRect:permittedArrowDirections:animated:`而不是 segue 的显式操作。

我希望这会有所帮助。如果我误解了您要执行的操作，请告诉我。

最好的祝福。

# android - 新安装的应用程序中的主页按钮和返回应用程序再次加载初始活动

> ID：10888623
> 
> 赞同：0
> 
> 时间：2012-06-04T21:27:57.980
> 
> 标签：android, android-activity

我在我的应用程序中遇到以下情况：

*   安装它并立即打开它（安装后使用打开按钮，而不是应用程序列表中的图标）。
*   浏览一些活动。
*   单击主页按钮。
*   单击应用程序图标以再次加载它。
*   不是返回到我所在的活动，而是加载了初始活动。之前的活动仍然存在，可以通过单击后退按钮访问，但实际上并没有办法知道这一点，看起来应用程序已完全重新启动。

这可能是这个应用程序中的一个问题，因为在某些情况下，它可能需要在执行一些操作后进行注册，并且失去对活动的关注可能会非常烦人

有什么办法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:03:17.493

Intent 下有几个标志可能会有所帮助。您在启动 Activity 时使用它们：

" **FLAG_ACTIVITY_TASK_ON_HOME**：如果在传递给 Context.startActivity() 的 Intent 中设置，此标志将导致新启动的任务被放置在当前主活动任务（如果有的话）之上。

**FLAG_ACTIVITY_REORDER_TO_FRONT**：如果在传递给 Context.startActivity() 的 Intent 中设置，则此标志将导致已启动的活动被带到其任务历史堆栈的前面（如果它已经在运行）。

[http://developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

# timeout - MBeanServerConnection.invoke 永远挂起

> ID：10888625
> 
> 赞同：5
> 
> 时间：2012-06-04T21:28:25.177
> 
> 标签：timeout, jmx, invoke, freeze, mbeans

我们有一个应用程序，它使用 MBeanServerConnection.invoke 在 MBean 上调用各种远程方法。有时，这些方法之一会挂起。有没有办法让通话超时？如果调用时间过长，它会返回异常吗？

或者我是否必须将所有这些调用移动到单独的线程中，这样它们就不会锁定 UI 并需要终止应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:45:26.030

See [http://weblogs.java.net/blog/emcmanus/archive/2007/05/making_a_jmx_co.html](http://weblogs.java.net/blog/emcmanus/archive/2007/05/making_a_jmx_co.html)

**===== Update =====**

I was thinking about this stuff when I first responded, but I was on my mobile and I can't type worth a damn on it.....

This is really an RMI problem, and unless you use a different protocol, there's not much you can do, except, as you say, move all those calls into separate threads so they don't lock up the UI.

But.... if you have the option of fiddling with the target server and you can customize the connecting client, you have at least 1 option which is to customize the [JMXConnectorServer](http://docs.oracle.com/javase/6/docs/api/javax/management/remote/JMXConnectorServer.html) on your target servers.

The standard JMXConnectorServer implementation is the [RMIConnectorServer](http://docs.oracle.com/javase/6/docs/api/javax/management/remote/rmi/RMIConnectorServer.html). Part of it's specification is that when you create a new instance using any of the constructors (like [RMIConnectorServer(JMXServiceURL url, Map environment)](http://docs.oracle.com/javase/6/docs/api/javax/management/remote/rmi/RMIConnectorServer.html#RMIConnectorServer%28javax.management.remote.JMXServiceURL,%20java.util.Map%29)), the **environment** map can contain a key/value pair where the key is [RMIConnectorServer.RMI_CLIENT_SOCKET_FACTORY_ATTRIBUTE](http://docs.oracle.com/javase/6/docs/api/javax/management/remote/rmi/RMIConnectorServer.html#RMI_CLIENT_SOCKET_FACTORY_ATTRIBUTE) and the value is a [RMIClientSocketFactory](http://docs.oracle.com/javase/6/docs/api/java/rmi/server/RMIClientSocketFactory.html). Therefore, you can specify a socket factory method like this:

```
RMIClientSocketFactory clientSocketFatory = new RMIClientSocketFactory() {
   public Socket createSocket(String host, int port) {
      Socket s = new Socket(host, port);
      s.setSoTimeout(3000);
   }
}; 
```

This factory creates a [Socket](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html) and then sets its [SO_TIMEOUT](http://docs.oracle.com/javase/6/docs/api/java/net/SocketOptions.html#SO_TIMEOUT) using [setSoTimeout](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#setSoTimeout%28int%29), so when the client connects using this socket, *all* operations, including connecting, will timeout after 3000 ms.

You could also checkout the [JMXMP](https://github.com/nickman/OpenDMK/tree/master/OpenDMK/jmx-optional/src/main/java/javax/management/remote/jmxmp) connector and server in the jmx-optional package of the [OpenDMK](https://github.com/nickman/OpenDMK). (links are to my github mavenized). No built in solution, mind you, but they're super easy to extend and JMXMP is simple TCP socket based rather than RMI, so this type of customization would be trivial.

Cheers.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T06:58:28.973

@ Nicholas：上面的代码不起作用。我的意思是请求在 3000.ms 之后没有超时。

map.put(RMIConnectorServer.RMI_CLIENT_SOCKET_FACTORY_ATTRIBUTE，新的 RMIClientSocketFactory() {

```
 @Override
            public Socket createSocket(String host, int port) throws IOException {
                if(logger.isInfoEnabled() ){
                    logger.info("JMXManager inside createSocket..." + host + ": port :" + port);
                    }
                  Socket s = new Socket(host, port);
                  s.setSoTimeout(3000);
                  return s;
            }
        });

        cs = JMXConnectorServerFactory.newJMXConnectorServer(url,map,mbeanServer); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T11:59:24.627

正如我回答的那样：[如何为 JMX 连接器设置请求超时，](https://stackoverflow.com/questions/12791025/how-to-set-request-timeout-for-jmx-connector/) RMI 属性可以为您提供帮助。所有属性都在 Oracle 文档站点上： http: [//docs.oracle.com/javase/7/docs/technotes/guides/rmi/sunrmiproperties.html](http://docs.oracle.com/javase/7/docs/technotes/guides/rmi/sunrmiproperties.html)。

例如：`-Dsun.rmi.transport.tcp.responseTimeout=60000`是客户端 tcp 响应超时。还有连接超时和服务器端连接的属性。

我也很不高兴 JMX/RMI/TCP 堆栈如何从较低级别的协议中隐藏重要设置，并使其无法用于单个连接。

# arrays - 基于图块的地图生成实用程序

> ID：10888632
> 
> 赞同：0
> 
> 时间：2012-06-04T21:29:13.413
> 
> 标签：arrays, map, tile

我开始在一个基于 2D 瓦片的游戏中工作，这就是我计划生成地图的方式：我有一个包含地图中所有瓦片的数组，每个元素都是一个整数，表示瓦片必须在那个位置呈现， 例如...

```
int tiles[100] = {
    0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,
    0,0,0,1,1,1,1,0,0,0,
    0,0,0,1,1,1,1,0,0,0,
    0,0,0,1,1,1,1,0,0,0,
    0,0,0,1,1,1,1,0,0,0,
    0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,
    0,0,0,0,0,0,0,0,0,0,

}; 
```

正如您可以想象的那样，更大的地图会出现问题，那些只有 100 个图块，我可能需要几千个……我不能手工完成。

所以，问题是：你们知道一些可以帮助我的实用程序吗？一些可视化工具，我可以在其中绘制地图并获取数组？我很确定在过去看到过类似的东西，遗憾的是我现在无法找到它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:34:52.867

使用任何图形编辑器，如 GIMP 或 Paint，然后加载生成的图像并使用像素数据（例如使用[libgd](http://www.libgd.org)之类的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:26:55.200

使用 imagemagick 来管理你的瓦片集 使用 Tiled 来制作数组（但它可以让你直观地看到数组）

平铺的替代品是 windowsmappy32

不要忘记，您可以随时制作自己的工具：P

# sql - 如何比较两个 int 列表、结果集？

> ID：10888637
> 
> 赞同：0
> 
> 时间：2012-06-04T21:29:28.213
> 
> 标签：sql

我在查询的结果集中有两个整数列表，例如： List_1: 11,16,28... List_2 11,16,19 .. 如何在 Where 条件下比较这两个列表？条件是如果列表不同，则进行选择。

这是代码：

```
 SELECT cosechaAnterior.c_Fk_IdBoleta as 'BOLETA_P16', cosechaAnteriorDestino.c_Fk_IdBoleta as 'BOLETA_P17'
FROM Clt_CosechaAnterior cosechaAnterior
INNER JOIN  Clt_CosechaAnteriorDestino cosechaAnteriorDestino
ON cosechaAnterior.si_Fk_IdDesglose = cosechaAnteriorDestino.si_Fk_IdDesglose
INNER JOIN Blt_Boleta as boleta
ON cosechaAnterior.c_Fk_IdBoleta = boleta.c_Pk_IdBoleta
WHERE  --boleta.c_Pk_IdBoleta = 44990112--@id_boleta  
           (select si_Fk_IdDesglose
           from Clt_CosechaAnteriorDestino as cosechaAnteriorDestino
           where SUBSTRING(cosechaAnteriorDestino.c_Fk_IdBoleta,5,4) = '0112'
           AND cosechaAnteriorDestino.c_Fk_IdBoleta = 44990112)              (select si_Fk_IdDesglose
                                                                              from Clt_CosechaAnterior as cosechaAnterior
                                                                              where SUBSTRING(cosechaAnterior.c_Fk_IdBoleta,5,4)= '0112'
                                                                              AND cosechaAnterior.c_Fk_IdBoleta = 44990112) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:47:59.607

您希望通过连接而不是在 WHERE 子句中执行此操作。您的问题有点不清楚这两个列表是什么。所以这个答案给出了一个通用的解决方案。

假设列表采用两列格式，如 (, )，其中列表 for 由多个值组成。然后以下查询返回所有具有完全相同的值集的 id：

```
select list1.id
from (<subquery 1>) list1 full outer join
     (<subquery 2>) list2
     on list1.id = list2.id and
        list1.val = list2.val
group by list1.id
having max(case when list1.id is null then 1 else 0 end) = 0 and
       max(case when list2.id is null then 1 else 0 end) = 0 
```

（此公式假设值中没有重复。）

这是一个完整的外部连接，并且只选择连接两侧没有 NULL 值的 id。当元素不匹配时，会在完全外连接上生成 NULL 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:08:24.563

将每个列表视为一个文本块，并使用该函数测试两个文本值是否相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T21:34:08.650

您可能可以使用[except](http://msdn.microsoft.com/en-us/library/ms188055.aspx)。如果**除**list_2 之外的 list_1 的计数 > 0，那么您就知道这些列表是不同的。

# php - 我不希望 $_SESSION 在很长一段时间后停止

> ID：10888641
> 
> 赞同：0
> 
> 时间：2012-06-04T21:29:45.220
> 
> 标签：php

> **可能的重复：**
> [在 PHP 中延长会话超时](https://stackoverflow.com/questions/514155/extending-session-timeout-in-php)

我有 php 会话，我可能遇到的问题是，如果我长时间不使用该应用程序，如果我刷新 Web 浏览器，我会突然收到关于我所有 $_SESSION 的通知。我想知道如果我很长时间没有使用网页，如果我刷新一个页面，是否有可能 $_SESSIONs 保持不变？

我知道可以使用 @ 符号，但这只是为了不显示错误消息吗？我只是不希望它停止会话。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:37:28.827

您可能收到的通知描述了您的代码有什么问题。考虑更正您的代码，以免收到通知，而不是避免出现错误的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:37:54.523

您的目标不应该是延长会话时间，而是删除通知。

正如@ceejayoz 提到的，通过修复代码而不是抑制错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T23:39:36.320

如果您想延长会话的长度，请尝试`ini_set('session.gc_maxlifetime', '3600');`，其中“3600”是您希望会话持续的时间长度（以秒为单位）。如果您希望会话永久持续，我建议在那里放置一个非常大的数字。

# shell - 仅用一个域替换电子邮件地址的域

> ID：10888643
> 
> 赞同：1
> 
> 时间：2012-06-04T21:29:56.377
> 
> 标签：shell, sed

我想编辑一个包含一组电子邮件 ID 的文件，以便所有域名都变得通用。

```
Example,
peter@yahoo.com,
julie@hotmail.com,
philip@gmail.com

to
peter@generic.com,
julie@generic.com,
philip@generic.com 
```

我使用了以下 sed 命令，

```
sed '/@/,/.com/ s//generic/' filename.txt 
```

在这里，sed 将 '@' 替换为 'generic， .com 替换为 'generic' 而不是 @ 和 .com 之间的内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:32:23.367

采用

```
sed 's/@[^,]*/@generic.com/' 
```

这将用 generic.com 替换“@”之后的所有内容，直到第一个逗号，从而修复域，并保留结尾逗号。

由于您似乎有些困惑，因此范围 ( `/regex/,/otherregex/`) 选择多行，而不是一行内的位置。

# sharepoint - Sharepoint 2010 如何在公式中使用“文件大小”列值？

> ID：10888645
> 
> 赞同：2
> 
> 时间：2012-06-04T21:29:58.620
> 
> 标签：sharepoint

我正在尝试在计算列公式中使用“文件大小”（又名“FileSizeDisplay”）。

“文件大小”是现有列（默认 SP 不是自定义）。但在任何库的“插入列”列表中不可用。如果手动将其作为 [File Size] 或 [FileSizeDisplay] 添加到公式中，SP 会显示一条错误消息，指出它不存在。

我要做的就是通知用户图像太大。不试图禁止文件大小上传或任何类似的技术。只想要一个计算列来显示一条消息。如果列值可用，则以下将起作用：

```
=IF([File Size]>50000,"Image is too big","Image is sized correctly") 
```

或者

```
=IF([FileSizeDisplay]>50000,"Image is too big","Image is sized correctly") 
```

有谁知道为什么这个专栏不可用？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:57:41.933

您首先要获取文件大小：[获取文件大小](http://www.dotnetperls.com/fileinfo-length)，然后您可以在弹出窗口中显示消息或您想要的方式

```
using System;
using System.IO;

class Program
{
    static void Main()
    {
    // The name of the file
    const string fileName = "test.txt";

    // Create new FileInfo object and get the Length.
    FileInfo f = new FileInfo(fileName);
    long s1 = f.Length;

    // Change something with the file. Just for demo.
    File.AppendAllText(fileName, " More characters.");

    // Create another FileInfo object and get the Length.
    FileInfo f2 = new FileInfo(fileName);
    long s2 = f2.Length;

    // Print out the length of the file before and after.
    Console.WriteLine("Before and after: " + s1.ToString() +
        " " + s2.ToString());

    // Get the difference between the two sizes.
    long change = s2 - s1;
    Console.WriteLine("Size increase: " + change.ToString());
    }
} 
```

# php - 如何确定重定向到 https 的位置

> ID：10888664
> 
> 赞同：4
> 
> 时间：2012-06-04T21:31:13.537
> 
> 标签：php, apache, .htaccess, redirect

我正在一个网站上工作，当通过 访问时`http`，会自动重定向到`https`. 我们正试图确定这发生在哪里。到目前为止，我们已经查看了以下几个地方：

*   `.htaccess`
*   在apache中`httpd.conf`
*   在我们编写的测试页面的 php 文件中 (site.com/test.php)

我在想`conf`apache中可能还有其他一些文件会发生这种重定向的东西..

我还应该去哪里看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:37:52.587

我以前也遇到过同样的问题。您是否查看了您的虚拟主机文件？

通常存储在 /etc/httpd/conf/vhosts/

我敢打赌，您有一个重定向的一般规则，例如 www.google.com/cars/* 将始终重定向到 https。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T21:41:32.370

有时我也有这个错误，直到我发现，对于 Firefox，只要缓存处于活动状态，编辑任何内容都是无用的。从那时起，我在[web developer](https://addons.mozilla.org/de/firefox/addon/web-developer/)的帮助下停用了缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T22:13:39.923

由于站点由负载均衡器提供服务，因此重定向到 https 逻辑实际上是在负载均衡器级别实现的。

# windows-phone-7 - 文件夹导航

> ID：10888668
> 
> 赞同：0
> 
> 时间：2012-06-04T21:31:33.743
> 
> 标签：windows-phone-7

我最近对 ​​skydrive api 很感兴趣，但我在文件夹导航方面遇到了问题。我解决了 2lvl 深度但更深我有问题。我正在考虑获取所有文件夹 ID 并将其存储在字符串 [] [] 中，但必须更加温和。你能建议点什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:40:46.267

您需要的是您需要存储的类似树的对象结构。你应该尝试这样的事情

```
 public class Folder
    {
        public Folder(Folder parent, string folderId)
        {
            this.FolderId = folderId;
            this.Parent = parent;
        }

        public Folder Parent { get; private set; }
        public string FolderId { get; private set; }
    } 
```

您可以在从父级开始的循环结构中使用和创建它们。

# facebook - Facebook api - 关闭浏览器后用户仍然登录

> ID：10888669
> 
> 赞同：0
> 
> 时间：2012-06-04T21:31:34.477
> 
> 标签：facebook, facebook-php-sdk

我的应用程序中的 facebook connect 有问题。我使用 PHP SDK 和 JS SDK。

当用户使用 facebook 登录到我的网络应用程序（在 Facebook 上没有记住我功能）时，关闭浏览器并重新启动它。当我调用 ->getUser() 和 ->api('/me') 时，他仍然记录在案，他不应该这样做。我搜索并尝试了所有可能的解决方案，但没有任何效果。问题是由于 facebook cookie fbm_APPID 和 fbsr_APPID 的问题，它由 Facebook 设置并在两小时后过期。当我销毁这些 cookie 时，它​​们会自动重新创建...

你有什么主意吗？

# sql - 从上次更新中获得最高赔率

> ID：10888670
> 
> 赞同：-1
> 
> 时间：2012-06-04T21:31:39.500
> 
> 标签：sql, postgresql

我在 PostgreSQL 数据库中有这些表：

**博彩公司**

```
-----------------------
| id   | name         |
-----------------------
| 1    | Unibet       |
-----------------------
| 2    | 888          |
----------------------- 
```

**赔率**

```
---------------------------------------------------------------------
| id  | odds_type  | odds_index  | bookmaker_id | created_at        |
---------------------------------------------------------------------
| 1   | 1          | 1.55        | 1            | 2012-06-02 10:30  |
---------------------------------------------------------------------
| 2   | 2          | 3.22        | 2            | 2012-06-02 10:30  |
---------------------------------------------------------------------
| 3   | X          | 3.00        | 1            | 2012-06-02 10:30  |
---------------------------------------------------------------------
| 4   | 2          | 1.25        | 1            | 2012-05-27 09:30  |
---------------------------------------------------------------------
| 5   | 1          | 2.30        | 2            | 2012-05-27 09:30  |
---------------------------------------------------------------------
| 6   | X          | 2.00        | 2            | 2012-05-27 09:30  |
--------------------------------------------------------------------- 
```

我要查询的是以下内容：

给我来自所有博彩公司的**最新更新**（created_at）的 1/X/2 赔率，以及从最后一次更新中，给我**每种odds_type**（'1'、'2'、'X'）的**最高赔率**。

 **在我的网站上，我将它们显示为：

```
Best odds right now:   1   |   X   |   2
                     --------------------
                     2.30  |  3.00 | 3.22 
```

我必须先得到最新的，因为昨天更新的赔率不再有效。然后从上次更新开始，我有 - 在这种情况下 - 来自 2 个不同博彩公司的 2 个赔率，所以我需要为类型 '1'、'2'、'X' 获得最佳赔率。

伪 SQL 类似于：

```
SELECT MAX(odds_index) WHERE odds_type = '1' ORDER BY created_at DESC, odds_index DESC 
```

但这不起作用，因为我总是会得到最新的赔率（而不是最新的最高/最好的赔率）

我希望我说得通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:37:52.033

救援子查询！

```
select o1.odds_type, max(o1.odds_index)
from odds o1
inner join (select odds_type, max(created_at) as created_at
            from odds group by odds_type) o2
on o1.odds_type = o2.odds_type
and o1.created_at = o2.created_at
group by o1.odds_type 
```

SQLFiddle：[http ://sqlfiddle.com/#!3/47df4/3](http://sqlfiddle.com/#!3/47df4/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:58:26.777

您的“来自上次更新”的话与您的示例相矛盾。这里有两种方法。

要从上次更新中获取，如何获取最大 created_at 日期，也就是上次更新，然后将其用于其余部分。

```
declare @max_date date
select @max_date = max(created_at) from odds
select odds_type, odds_index
from odds
where created_at = @max_date 
```

或者匹配你的例子

```
select odds_type, odds_index
from odds
group by odds_type
having created_at = max(created_at) 
```

注意：不同的 DBMS 给出不同的结果，具体取决于选择的列以及列是否比 group by 子句中的多。**

# android - 在 Java 中调用 ArrayList

> ID：10888673
> 
> 赞同：0
> 
> 时间：2012-06-04T21:32:06.940
> 
> 标签：android, arraylist

嗨，我试图让代码通过我在 XML 中的数组列表，然后将它们放在表格布局中，但我无法从 XML 调用数组列表

我正在尝试这样的事情

```
ArrayList list = Collection(R.array.arraylist);
    int total = list.size();

for (int current = 0; current < total; current++)
    {
        // Create a TableRow and give it an ID
        TableRow tr = new TableRow(this);
        tr.setId(100+current);
        tr.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));

 TextView labelTV = new TextView(this);
        labelTV.setId(200+current);
        labelTV.setText(list);
        labelTV.setTextSize(dip, 14);
        labelTV.setGravity(Gravity.CENTER);
        labelTV.setTextColor(Color.WHITE);
        labelTV.setLayoutParams(new LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT));
        tr.addView(labelTV); 
```

我不认为它实际上是通过arraylist数据和textview不显示文本所以请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-12T10:06:43.697

使用 java 文件或 xml 文件创建表格布局

**Step1：**（Step 1有两种方式跟随任何一种）

```
/*create tablelayout in java no need for create activity that can be handle in java file if u want xml file use or condition loop*/

 TableLayout tableLayout=new TableLayout(this);
    tableLayout.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.MATCH_PARENT));
    setContentView(tableLayout);
/*Follow java code only then add the activity in manifest file then Go to step 2*/ 
```

*   --------------------**或**--------

    /*在 xml 中创建 tablelayout 并在 java 中创建 getView* /

XML:

```
<?xml version="1.0" encoding="utf-8"?>
  <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/table"
         android:layout_width="match_parent"
         android:layout_height="match_parent">

 </TableLayout> 
```

爪哇：

```
 setContentView(R.layout.table_layout);
 TableLayout tableLayout= (TableLayout) findViewById(R.id.table); 
```

**第2步：**

```
 int colors[]=getResources().getIntArray(R.array.value);
    List<String> str=new ArrayList<String>();
    Collections.addAll(str, getResources().getStringArray(R.array.arrayvalues));
    Log.d(TAG,str.toString());
    for(int i=0;i<str.size();i++){
        TableRow row=new TableRow(this);
        row.setId(101+i);
        row.setBackgroundColor(Color.BLACK);
        row.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.MATCH_PARENT));

        TextView text=new TextView(this);
        text.setId(201+i);
        text.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT,TableRow.LayoutParams.WRAP_CONTENT));
        text.setText(str.get(i));
        text.setPadding(0,10,0,10);
        text.setTextColor(colors[i]);

        row.addView(text);
        tableLayout.addView(row);
    } 
```

**字符串.xml**

```
 <resources>
   <string-array name="arrayvalues">
    <item>Red</item>
    <item>Orange</item>
    <item>Yellow</item>
    <item>Green</item>
    <item>Blue</item>
    <item>Indigo</item>
    <item>Violet</item>
   </string-array>

   <integer-array name="value">
    <item>@color/Red</item>
    <item>@color/Orange</item>
    <item>@color/Yellow</item>
    <item>@color/Green</item>
    <item>@color/Blue</item>
    <item>@color/Indigo</item>
    <item>@color/Violet</item>
   </integer-array>
</resources> 
```

**颜色.xml**

```
<resources>
<color name="Red">#FF0000</color>
<color name="Orange">#FF7F00</color>
<color name="Yellow">#FFFF00</color>
<color name="Green">#00FF00</color>
<color name="Blue">#0000FF</color>
<color name="Indigo">#4B0082</color>
<color name="Violet">#9400D3</color>
</resources> 
```

**输出：**

[![在此处输入图像描述](../Images/c85f58427f7210735e17a7794a3a0140.png)](https://i.stack.imgur.com/JIDJj.png)

-------------------------------------------------- - - - - - - - - - - - -结束 - - - - - - - - - - - - - ----------------------

仅用于从 string.xml 文件中获取数组（不要遵循它仅用于从字符串文件中获取数组）

```
 ArrayList<String> str=new ArrayList<String>();
    String[] val=getResources().getStringArray(R.array.value);
    str.addAll(Arrays.asList(val));
    Log.d(TAG,str.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:38:57.493

而不是`labelTV.setText(list);`你需要`labelTV.setText(list.get(current));`我猜

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T21:41:01.297

引用要用于设置文本的 ArrayList 的特定元素，大概是：

```
labelTV.setText(list.get(current)); // no idea what type you're dealing with, .toString() or a similar accessor may be necessary 
```

# c# - 是否可以使用 ABCpdf 创建可保存的 PDF 表单？

> ID：10888678
> 
> 赞同：3
> 
> 时间：2012-06-04T21:32:46.327
> 
> 标签：c#, pdf, abcpdf, pdf-form

我有一组在 Acrobat Professional 中创建的 PDF 文件，其中包含可填写、可保存的表单。我可以修改表单中字段的值，并使用 ABCpdf 保存这些更改，效果很好。问题是使用 Adob​​e Reader 的用户无法再保存他们在表单中输入的任何数据。他们仍然可以填写表格并打印，只是不能保存。

这可能与许可相关（在 Adob​​e 的一端），但我无法以一种或另一种方式找到可靠的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T13:53:51.787

答案显然是“不”。为了在 Adob​​e Reader 中保存 PDF 表单，它必须由经过批准的产品签名。我不确定是否有任何第三方 PDF 库允许此功能，但 ABCpdf 绝对不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T18:51:39.357

使用 Adob​​e Reader XI，情况发生了一些变化。如果用户使用 Adob​​e Reader XI（或更新版本），则可以保存表单。对于较早版本的 Reader，所谓的扩展权限是必需的。可以使用 Adob​​e Acrobat (Pro) 或 LiveCycle Reader Extensions 服务器应用扩展权限。请注意，当使用 Acrobat 分配扩展权利时，表格的使用存在（法律）限制，并且 Acrobat 只能分配一组有限的权利。

# shell - 什么是“排序”命令限制为每行 65535 个字符的好解决方法？

> ID：10888684
> 
> 赞同：3
> 
> 时间：2012-06-04T21:32:57.533
> 
> 标签：shell, sorting, command-line, cmd, unix

这是 Sort 命令的帮助功能的一个片段：

```
 /REC[ORD_MAXIMUM] characters Specifies the maximum number of characters
                         in a record (default 4096, maximum 65535). 
```

这是我尝试对长行文件进行排序时出现的错误：

```
C:\Users\heqin\PIM2>cat Artist_Input.tsv | sort /REC 65535
Input record exceeds maximum length.  Specify larger maximum. 
```

没有编写自定义脚本（例如在 Python 中）来处理这种情况，对行长超过 65535 的文件进行排序有什么好的解决方法？

澄清一下，我使用的是在 Windows 上运行的 Unix Utils 版本的“sort”。

# regex - 获取 clojure 上正则表达式的所有匹配项

> ID：10888686
> 
> 赞同：3
> 
> 时间：2012-06-04T21:33:02.493
> 
> 标签：regex, clojure

我正在尝试解析一个 HTML 文件并在其中获取所有 href。

到目前为止，我使用的代码是：

```
(map 
   #(println (str "Match: " %)) 
   (re-find #"(?sm)href=\"([a-zA-Z.:/]+)\"" str_response)) 
```

str_response 是其中包含 HTML 代码的字符串。根据我对 Clojure 的基本理解，该代码应该打印一个匹配列表，但到目前为止，还没有运气。它不会崩溃，但它也不匹配任何东西。我试过使用`re-seq`而不是`re-find`，但没有运气。有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T22:28:59.840

通常，尽管[您无法使用正则表达式](https://stackoverflow.com/a/1732454/90801)（有趣的答案）解析 html，但仅找到一个标签的所有出现应该是可行的。

一旦你找出正确的正则表达式`re-seq`就是你想要使用的函数：

```
user> (re-find #"aa" "aalkjkljaa")
"aa"
user> (re-seq #"aa" "aalkjkljaa")
("aa" "aa") 
```

这对您来说不会崩溃，因为 re-find 返回 nil 哪个地图被解释为空列表并且什么也不做

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T22:36:30.373

这看起来真的像一个 HTML 抓取问题，在这种情况下，我建议使用[enlive](https://github.com/cgrand/enlive)。

像这样的东西应该工作

```
(ns test.foo
  (:require [net.cgrand.enlive-html :as html]))

(let [url (html/html-resource
           (java.net.URL. "http://www.nytimes.com"))]
  (map #(-> % :attrs :href) (html/select url [:a]))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T02:02:41.493

我认为您的代码没有任何问题。也许`str_response`是嫌疑人。以下适用于[http://google.com](http://google.com)与您的正则表达式：

```
(let [str_response (slurp "http://google.com")]
  (map #(println (str "Match: " %)) 
   (re-seq #"(?sm)href=\"([a-zA-Z.:/]+)\"" str_response)) 
```

Note`ref-find`也有效，尽管它只返回一个匹配项。

# mdx - 在 PowerPivot 上使用 RANKX 时出现的问题

> ID：10888689
> 
> 赞同：1
> 
> 时间：2012-06-04T21:33:12.363
> 
> 标签：mdx, powerpivot, dax

我正在尝试使用 RANKX 功能对一些销售额进行排名，我的表格看起来像这样

产品编号 | 产品总数 |

我想有一个名为 ProductRank 的第三列，它将根据 ProductTotal 对产品进行排名，这就是我所拥有的

```
=RANKX(ALL('Query'[ProductID]),'Query'[ProductTotal]) 
```

但是，这也行不通:(

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:05:18.720

如果 [ProductTotal] 是一列，则以下内容应该有效

```
=RANKX(ALL('Query'[ProductID]),CALCULATE(SUM('Query'[ProductTotal]))) 
```

# c# - WPF中的“浮动：左”行为

> ID：10888692
> 
> 赞同：2
> 
> 时间：2012-06-04T21:33:21.893
> 
> 标签：c#, wpf

在 WPF 中，是否有可能在容器的左侧有一个图像，然后有一个包装文本块留在图像旁边，然后一旦文本块的高度超过图像的高度，就会在图像下方包裹起来？这种行为类似于*float:left;* 在 CSS 中，例如做：

```
 <img src="..." style="float: left;">Some text here that eventually wraps below the image once this text exceeds the image height 
```

...但在 WPF 中。这可能吗？我正在从数据库绑定，所以我不想拆分文本块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T23:14:45.373

没有办法在不将文本拆分到多个控件的情况下复合 WPF 面板来获得此行为，但 FlowDocument 通过 Floaters 具有此功能。

[http://blogs.msdn.com/b/llobo/archive/2005/11/20/floaters.aspx](http://blogs.msdn.com/b/llobo/archive/2005/11/20/floaters.aspx)

或者

[http://msdn.microsoft.com/en-us/magazine/cc163371.aspx](http://msdn.microsoft.com/en-us/magazine/cc163371.aspx)

将文本从您的数据库中获取到 FlowDocument 结构中可能需要更多的工作，如果您之前只是使用 TextBlocks，FlowDocument 会非常繁重，但它可能会提供您想要的内容。没有更多的上下文，我不能说。

# python - 将 scipy 树状图输出到 TreeView 文件

> ID：10888694
> 
> 赞同：1
> 
> 时间：2012-06-04T21:33:28.977
> 
> 标签：python, hierarchical, hierarchical-clustering

我已经使用 pylab 和 scipy 编写了一个 python 脚本，以根据这篇文章从表达式矩阵中输出层次聚类热图和树状图： [在 python 中的数据矩阵上绘制层次聚类的结果](https://stackoverflow.com/questions/2982929/plotting-results-of-hierarchical-clustering-ontop-of-a-matrix-of-data-in-python)

现在我想将我的数组和基因（列和行）树状图导出到文本文件中，这样程序 TreeView 也可以查看这些数据（例如，cdt、gtr、atr 文件）。这个事情谁有经验？

谢谢

# mysql - SQL / 限制（另一个查询）

> ID：10888695
> 
> 赞同：-1
> 
> 时间：2012-06-04T21:33:28.867
> 
> 标签：mysql, sql, limit

我有 2 张桌子。其中一个持有限制号码。

我正在尝试运行类似的 sql

```
SELECT * FROM table WHERE x='1' LIMIT (another query) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:59:03.373

在 MySQL 中，您不能使用常规查询来做到这一点。LIMIT 子句不允许变量。LIMIT 子句只接受常数。

您必须使用存储过程而不是常规查询。

尝试在 SP 代码中使用类似这样的内容：

```
DECLARE offset bigint
SELECT your_field INTO offset FROM your_table where your_conditions
SELECT * FROM other_table LIMIT offset; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:56:01.907

使用准备好的语句：

```
PREPARE stmt FROM "SELECT * FROM table WHERE x='1' LIMIT ?";
SET @limit = (another query);
EXECUTE stmt USING @limit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:14:31.770

\您执行我向几个人建议的操作是从 select 语句生成 SQL，然后执行该语句。这是我的解决方案：

```
SELECT "select * from other_table LIMIT ", your_field 
FROM your_table where your_conditions 
```

然后执行这个新的 SQL。当然，这在 UNIX/Linux 和脚本语言中效果最好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T21:38:52.870

Select TOP 子句限制行数。你可以在里面放一个表达式

[http://msdn.microsoft.com/en-us/library/ms189463.aspx](http://msdn.microsoft.com/en-us/library/ms189463.aspx)

# wpf - 使用 MVVM 和 WPF 显示带有百分比的闪屏和进度条

> ID：10888696
> 
> 赞同：1
> 
> 时间：2012-06-04T21:33:31.833
> 
> 标签：wpf, c#-4.0, mvvm-light

我需要显示带有图像和进度条的启动画面。

1.  在我的应用程序启动中，我有如下代码来显示主窗口。

    ```
     SplashScreenWindowViewModel vm = new SplashScreenWindowViewModel(); 
         AutoResetEvent ev = new AutoResetEvent(false); 
          Thread uiThread = new Thread(() =>
         {
            vm.Dispatcher = Dispatcher.CurrentDispatcher;
            ev.Set();

            Dispatcher.CurrentDispatcher.BeginInvoke((Action)delegate()
            {
                SplashScreenWindow splashScreenWindow = new SplashScreenWindow();
                splashScreenWindow = new SplashScreenWindow();
                splashScreenWindow.Show();
                splashScreenWindow.DataContext = vm;
                vm.InstigateWorkCommand.Execute(null);

            });

            Dispatcher.Run();
        });
          uiThread.SetApartmentState(ApartmentState.STA);
          uiThread.IsBackground = true;
          uiThread.Start();
          ev.WaitOne(); 
    ```

2.  在我的主视图模型中，我的代码如下

    类 MainviewModel : viewmodelbase { rivate string _message; 私有对象内容；私有只读 BackgroundWorker 工作者；私有只读 ICommand instigateWorkCommand；

    ```
     public SplashScreenWindowViewModel()
        {

            this.instigateWorkCommand = new
             RelayCommand(() => this.worker.RunWorkerAsync(), () => !this.worker.IsBusy);
            this.worker = new BackgroundWorker { WorkerReportsProgress = true };           
            this.worker.DoWork += this.DoWork;
            this.worker.ProgressChanged += this.ProgressChanged;
            _message = "0 % completed";

        }

        public ICommand InstigateWorkCommand
        {

            get { return this.instigateWorkCommand; }
        }

        private double _currentProgress;
        public double CurrentProgress        
        {
            get { return this._currentProgress; }
            set
            {
                if (this._currentProgress != value)
                {

                    this._currentProgress = value;                   
                    RaisePropertyChanged("CurrentProgress");
                }
            }
        }
        private int _progressMax;
        public int ProgressMax
        {
            get { return this._progressMax; }

            set
            {
                if(this._progressMax != value)
                {
                  this._progressMax = value;
                  RaisePropertyChanged("ProgressMax");
                }

            }
        }

        private void ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
          this.CurrentProgress = e.ProgressPercentage;

        }

        private void DoWork(object sender, DoWorkEventArgs e)
        {

           // calling my long running operation
           DAL.dotimeconsumingcode();
           worker.ReportProgress((int)e.argument);

        }

        public string Message
        {
            get
            {
                return _message;
            }
            set
            {
                if (Message == value) return;
                _message = value;
                RaisePropertyChanged("Message");
            }
        }

        public object Content
        {
            get
            {
                return content;
            }
            set
            {
                if (Content == value) return;
                content = value;

                RaisePropertyChanged("Content");
            }
        }

        public Dispatcher Dispatcher
        {
            get;
            set;
        } 
    ```

    }

    MY UI 有一个带有进度条的用户控件和一个启动主窗口。当我长时间运行的操作完成后，我的主窗口（主应用程序）被打开。//用户控制

    ```
     <ProgressBar Height="27" Value="{Binding CurrentProgress, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"  Margin="53,162,57,0" Name="progressBar"  Grid.Row="1"
                 Maximum="{Binding Path=ProgressMax, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"    Visibility="{Binding ProgressVisibility}"  /> 
    ```

    //启动窗口

    ```
     <localView:usercontrol/> 
    ```

我的问题是

ProgressChangedevent 没有触发，并且 % 完成也没有显示在文本块中。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T00:18:28.500

您尚未注册完整的处理程序，并且您没有正确调用进度。这个来自 MSDN 的示例涵盖了所有内容。

[背景地勤工作者](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# vim - 如何在 vi/vim 编辑器中获取用户名？

> ID：10888697
> 
> 赞同：3
> 
> 时间：2012-06-04T21:33:33.533
> 
> 标签：vim, vi

我正在尝试查找调用 vi/vim 编辑器的当前用户的用户名/全名。

```
:autocmd bufnewfile *.sh exe "1," . 10 . "g/AUTHOR :.*/s//AUTHOR : " .getlogin() 
```

我尝试使用 getlogin()、getuser()、getpwnam()，但没有任何效果。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-04T21:48:46.593

您可以使用以下`$USER`变量：

```
:echo "Your username is" $USER 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T21:36:19.077

你总是可以间接访问 shell`!:whoami`

这在 cygwin 中有效......不确定它的平台特定性。替代方法，使用环境变量：（`:echo expand("$USERNAME")`或`:echo $USERNAME`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T09:34:32.867

正如其他人所建议的，以下内容对我有用：

```
autocmd Bufwritepre,Filewritepre *.c,*.vim,*.py,*.sh exe "silent 1," . num_header_lines . "g/MODIFIED BY :.*/s/MODIFIED BY :.*/MODIFIED BY : " . $USER 
```

# eclipse-plugin - GEF：如何将图形添加到 RootEditPart/-Figure 的不同 BorderLayout 部分

> ID：10888700
> 
> 赞同：0
> 
> 时间：2012-06-04T21:34:06.550
> 
> 标签：eclipse-plugin, visualization, layout-manager, eclipse-gef, draw2d

我有一个 GEF 编辑器，其中包含以下`RootEditPart`.

```
public class MyProjectEditPart extends AbstractGraphicalEditPart {

@Override
protected IFigure createFigure() {
    ScalableFreeformLayeredPane layer = new ScalableFreeformLayeredPane();
    layer.setLayoutManager(new FreeformLayout());
    return layer;
  } 
```

我正在使用编辑器创建一个自下而上的树：

```
 _7_
    /   \
   5     6
  / \   / \
 1   2 3   4 
```

`1-7`是`Rectangle`s，其中`1-4`代表与 不同的模型元素`5-7`。目前，所有图形都按脚（`new Rectangle(x, y, w, h)`+ `parent.setConstraint(this, figure, rectangle)`）排列。人物的位置是根据人物`5-7`上的位置用简单的算法计算出来的`1-4`。

为了实用起见，我希望能够简单地添加`1-4`到 RootFigure 的`FlowLayout`ed`Figure`中`BorderLayout.BOTTOM`，并将其余图形添加到 RootFigure 中`BorderLayout.CENTER`。

但是，我对 GEF 还很陌生，不知道该怎么做。我找不到正确的方法来添加`1-4`他们各自`EditPart`的数字`createFigure()`。

例如，我尝试过类似的东西`parent.getFigure().getChildren().get(0).add(Figure_1)`，例如，使用 RootEditPart 的`createFigure()`方法分别将两个新图形添加到`BorderLayout.BOTTOM`和`CENTER`..

我会感谢任何起点:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:23:08.737

You need an EditPartFactory which "dispatches" the model elements to different EditParts. The toplevel editpart (7) should then implement getModelChildren to return the 5 and 6, whose editparts in turn should return as children the 1,2 and 3,4.

How about taking some time the GEF shape example and/or with [http://www.redbooks.ibm.com/abstracts/sg246302.html](http://www.redbooks.ibm.com/abstracts/sg246302.html) ?

# android - Android Layout 无法让 EditText 在 LinearLayout 中对齐

> ID：10888703
> 
> 赞同：0
> 
> 时间：2012-06-04T21:34:19.623
> 
> 标签：android, android-layout

我为对话框创建了一个布局。我希望邮政编码 EditText 和电子邮件 EditText 编辑框的宽度相同，并且我希望它们左对齐。

所以它应该看起来像：

电子邮件： ***_* __ *_* ___**

邮政编码：***_* __ *_* ___**

更正：实际上上面在 StackOverflow 上显示不正确。上面的行应该是完全均匀的并且左对齐。所以我在这个论坛上有完全相同的显示问题。我在电子邮件后面放了空格：但它仍然不对齐。

相反，我收到的电子邮件总是比邮政编码更宽。我什至将两个 EditText 都更改为相同的输入类型，但没有运气。只有当 TextView 具有完全相同的文本时，它们才会像它们都说 Zip Code: 那样对齐。如果我用空格填充电子邮件文本编辑，他们的布局管理器似乎知道这一点并将电子邮件 EditText 扩展为大于邮政编码。非常令人沮丧！

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TextView
    android:id="@+id/messageMsg"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textSize="@dimen/text_21px"
    android:textColor="@color/white"
    android:text="lorum ipsum afasdf lajsdfasldfjald:"
    android:padding="10dip"
    />
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <TextView   
        android:id="@+id/emailDescriptor"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="@dimen/text_21px"
        android:textColor="@color/white"
           android:padding="10dip"              
           android:text="Email:    "/>
    <EditText android:id="@+id/emailId"
         android:inputType="textEmailAddress"
         android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="10dip"
           android:layout_margin="10dip"            
           android:textSize="@dimen/text_21px" />
</LinearLayout>
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">   
    <TextView   
        android:id="@+id/zipCodeDescript"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="10dip"
        android:textSize="@dimen/text_21px"
        android:text="ZIP Code: "
        android:textColor="@color/white"/>
    <EditText android:id="@+id/zCode"
         android:inputType="textEmailAddress"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:padding="10dip"
        android:layout_margin="10dip"
        android:textSize="@dimen/text_21px"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:14:12.560

正如@AedonEtLIRA 所说，您可以对职位进行硬编码。您可以增加左侧的边距属性以使它们对齐。

或者，您可以使用该属性，

```
android:layout_alignLeft="@id/your_other_edittext" 
```

第三个想法，使标签的文本框具有相同的“宽度”，然后以下编辑文本应该对齐。

最后，您可以使用加权嵌套布局。但这是个坏主意。表现不佳和过度混乱。=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:18:28.487

如果我理解正确，试试这个

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Email" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="textEmailAddress" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="7dp"
            android:text="ZipCode" />

        <EditText
            android:id="@+id/editText2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ems="10" >

            <requestFocus />
        </EditText>
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T01:45:00.337

今天偶然发现一个有用的属性并记住了这篇文章。

查看[Textview.setEms(int)](http://developer.android.com/reference/android/widget/TextView.html#setEms%28int%29)。Edittext 也继承了该功能。

# json - 让 Spider 输出 JSON

> ID：10888704
> 
> 赞同：1
> 
> 时间：2012-06-04T21:34:24.127
> 
> 标签：json, sphider

我最近将[Sphider](http://www.sphider.eu/)爬虫添加到我的网站以添加搜索功能。但是我下载的 Sphider 发行版附带的默认 search.php 太简单了，不能很好地与我网站的其他部分集成。我在网站顶部有一个小导航栏，里面有一个搜索框，我希望能够使用 Ajax 通过该搜索字段访问 Sphider 的搜索结果。为此，我认为我需要让 Sphider 以 JSON 格式返回其结果。

我这样做的方式是使用输出 JSON 的“主题”（Sphider 支持“主题化”它的输出）。我在 Sphider 网站上的[这个主题上找到了这个主题。](http://www.sphider.eu/forum/read.php?3,6210)它*似乎*有效，但更严格的 JSON 解析器不会解析它。这是一些示例 JSON 输出：

```
{"result_report":"Displaying results 1 - 1 of 1 match (0 seconds) ", "results":[ { "idented":"false", "num":"1", "weight":"[100.00%]", "link":"http://www.avtainsys.com/articles/Triple_Contraints", "title":"Triple Contraints", "description":" on 01/06/12 Project triple constraints are time, cost, and quality. These are the three constraints that control the performance of the project. Think about this triple-constraint as a three-leg tripod. If one of the legs is elongated or", "link2":"http://www.avtainsys.com/articles/Triple_Contraints", "size":"3.3kb" }, { "num":"-1" } ], "other_pages":[ { "title":"1", "link":"search.php?query=constraints&start=1&search=1&results=10&type=and&domain=", "active":"true" }, ] } 
```

问题是结尾附近有一个逗号。据此，[在](http://php.net/manual/en/function.json-decode.php)`json_decode()`使用 PHP 的函数时“不允许使用尾随逗号” 。此 JSON 也无法使用[此](http://jsonformatter.curiousconcept.com/)在线格式化程序进行解析。但是当我把逗号去掉时，它起作用了，我得到了这个格式更好的 JSON：

```
{
   "result_report":"Displaying results 1 - 1 of 1 match (0 seconds) ",
   "results":[
      {
         "idented":"false",
         "num":"1",
         "weight":"[100.00%]",
         "link":"http://www.avtainsys.com/articles/Triple_Contraints",
         "title":"Triple Contraints",
         "description":" on 01/06/12 Project triple constraints are time, cost, and quality. These are the three constraints that control the performance of the project. Think about this triple-constraint as a three-leg tripod. If one of the legs is elongated or",
         "link2":"http://www.avtainsys.com/articles/Triple_Contraints",
         "size":"3.3kb"
      },
      {
         "num":"-1"
      }
   ],
   "other_pages":[
      {
         "title":"1",
         "link":"search.php?query=constraints&start=1&search=1&results=10&type=and&domain=",
         "active":"true"
      }
   ]
} 
```

现在，我将如何以编程方式执行此操作？而且（也许更重要的是），有没有更优雅的方式来实现这一点？而且您应该知道 PHP 是我可以在我的共享主机帐户上运行的唯一语言，因此例如 Java 解决方案不适合我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:07:15.373

在`search_result.html`中，您可以`,`将 foreach 循环末尾的

# c# - ASP.NET C#：DropDownList SelectedIndexChanged 事件未触发

> ID：10888706
> 
> 赞同：1
> 
> 时间：2012-06-04T21:34:38.953
> 
> 标签：c#, asp.net, drop-down-menu

我的设置如下： 在 PageLoad 事件中，我初始化一个 dropDownList 如下：

```
SONumList = new DropDownList();
SONumList.DataSource = SOList;
SONumList.DataBind();
SONumList.Height = new Unit("19px");
SONumList.SelectedIndexChanged += (ChooseSODropDown);
SONumList.AutoPostBack = true;
Panel1.Controls.Add(SONumList); 
```

在更改 SONumList 上的 SelectedIndex 时触发的 ChooseSODropDown 事件中，我创建了另一个名为 PNum 的 DropDownList：

```
PNumList = new DropDownList();
PNumList.DataSource = dataSource2;
PNumList.DataTextField = "Part";
PNumList.DataValueField = "Part";
PNumList.DataBind();
PNumList.Height = new Unit("19px");
PNumList.SelectedIndexChanged += ChoosePNumDropDown;
PNumList.AutoPostBack = true;
Panel1.Controls.Add(PNumList); 
```

尽管 PNum 框本身可以正确显示并正确绑定数据，但即使页面执行回发，ChoosePNumDropDown 事件也不会触发。我在函数的开头尝试了一个断点，它根本没有触发。

是否有某些原因导致我无法将事件绑定到另一个事件触发内的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:46:52.903

简短的回答是，当`ChooseSODropDown`被触发时，将更多的事件处理程序绑定到现有控件为时已晚。这是因为控件的先前状态是从 OnLoad 中的视图状态反序列化的，*并且**该*初始状态用于触发要触发的*onchange*事件。

 **我相信您必须初始化 OnLoad 中的所有控件，包括 的事件处理程序`ChoosePNumDropDown`，并将任何所需的逻辑移动到该事件处理程序中。据我所知，没有办法在现有事件处理程序中添加更多事件处理程序并期望它在同一个回发中被触发。

我建议阅读[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)以了解事件的处理方式。**

# php - 如何根据 ID 列（准备语句）计算表中的行数？

> ID：10888716
> 
> 赞同：0
> 
> 时间：2012-06-04T21:36:12.063
> 
> 标签：php, mysql, pdo

我有一个填充了一个表中的记录的数组，并且想要计算另一个表中的相应记录并将其插入到数组中。

当我尝试此代码时，我不断收到此错误

> 警告：mysqli::prepare() [mysqli.prepare]：必须在新语句准备发生之前获取所有数据

```
foreach ($persons as $i=>$person)
{ 
    $stmt = $mysqli->prepare("SELECT COUNT(*) FROM order WHERE personId = ?");
    $stmt->bind_param("i", $person['personId']);
    $stmt->execute();
    $stmt->bind_result($totalOrders);
    $stmt->fetch();
    $stmt->close;       
    $persons[$i]['totalOrders'] = $totalOrders;
} 
```

就好像`$stmt->close;`被忽略了一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:38:17.720

您需要添加括号来调用 close 方法：

```
$stmt->close(); 
```

# javascript - 为什么我的 HTML5/JS 应用程序无法在我的 iPhone 上运行？

> ID：10888719
> 
> 赞同：0
> 
> 时间：2012-06-04T21:36:22.667
> 
> 标签：javascript, iphone, html

伙计们怎么样了？

最近，在这个网站的帮助下，我学会了如何通过单击按钮在 HTML5 画布上绘制一个矩形......这不是问题：）这是问题......不幸的是，它没有当我试图在我的 iPhone 上使用它时根本无法工作......为什么:(？

* * *

这是我的代码：

* * *

JAVASCRIPT：

```
// "Rectangle" Button
function rect()
{
var canvas = document.getElementById('canvasSignature'),
    ctx = canvas.getContext('2d'),
    rect = {},
    drag = false;

    function init() {
  canvas.addEventListener('mousedown', mouseDown, false);
  canvas.addEventListener('mouseup', mouseUp, false);
  canvas.addEventListener('mousemove', mouseMove, false);
}

function mouseDown(e) {
  rect.startX = e.pageX - this.offsetLeft;
  rect.startY = e.pageY - this.offsetTop;
  drag = true;
}

function mouseUp() {
  drag = false;
}

function mouseMove(e) {
  if (drag) {
    rect.w = (e.pageX - this.offsetLeft) - rect.startX;
    rect.h = (e.pageY - this.offsetTop) - rect.startY ;
    draw();
  }
}

function draw() {
  ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);
}

init();
} 
```

* * *

HTML5：

```
<div id="canvasDiv">
    <canvas id="canvasSignature" width="580px" height="788px" style="border:2px solid #000; background: #FFF;"></canvas>
</div>

<div id="rect">  
    <p><button onclick="rect();">Rectangle</button></p>
</div> 
```

* * *

任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:10:46.067

首先，您的代码有错误，您用这个加星标

```
rect() { 
```

并仅在脚本末尾关闭它

我认为在触摸设备上你需要使用触摸*事件

像这样的东西

```
var canvas = document.getElementById('canvasSignature'), ctx = canvas.getContext('2d'), rect = {}, drag = false;

function init() {
  canvas.addEventListener("touchstart", touchHandler, false);
  canvas.addEventListener("touchmove", touchHandler, false);
  canvas.addEventListener("touchend", touchHandler, false);
}

function touchHandler(event) {
  if (event.targetTouches.length == 1) { //one finger touche
    var touch = event.targetTouches[0];

    if (event.type == "touchstart") {
      rect.startX = touch.pageX;
      rect.startY = touch.pageY;
      drag = true;
    } else if (event.type == "touchmove") {
      if (drag) {
        rect.w = touch.pageX - rect.startX;
        rect.h = touch.pageY - rect.startY ;
        draw();
      }
    } else if (event.type == "touchend" || event.type == "touchcancel") {
      drag = false;
    }
  }
}

function draw() {
  ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);
}

init(); 
```

# javascript - 选择加入 window.resizeTo？

> ID：10888720
> 
> 赞同：0
> 
> 时间：2012-06-04T21:36:26.200
> 
> 标签：javascript, firefox, google-chrome, window-resize

我正在为我公司的内部使用构建一个浏览器内应用程序。如果我的用户可以在 6 个不同的浏览器维度之间快速切换，那将会很有帮助。我试过使用 window.resizeTo，但似乎大多数现代浏览器都禁用了任何类型的编码调整大小。Safari 似乎是我对 Mac 用户唯一的例外，但我担心他们也会效仿 Chrome 和 FF。

有人知道任何变通办法或用户选择加入吗？我找到了一个可以完成工作的 Chrome 扩展，但理想情况下不需要任何类型的配置或 3rd 方扩展，因为我的一些用户在他们的机器上拥有非常严格的权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:45:09.097

No, that's not possible. Otherwise all kind of ads would ask the user to allow them to resize themselves in the hope some people allow it (and thus most likely allow it for the whole adserver used by tons of websites).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:50:02.720

您可以将应用程序的内容包装在`<div>`with`overflow: scroll`中，并调整实际`div`的 . 如果您的应用程序的样式不允许这样做，您可以将其包装在`<iframe>`您想要强制执行的视口大小中。

# git - 在单独的 git 分支上合并 2 个目录的内容并稍后集成分支

> ID：10888724
> 
> 赞同：0
> 
> 时间：2012-06-04T21:36:52.890
> 
> 标签：git

我在 GitHub 上托管了一个项目。我们正在一个名为 metamodel 的共享主题分支上开发一组新功能，该分支已推送到 GitHub。与此同时，我们正在进行 master 上的错误修复工作。该计划是最终将元模型集成回主模型，此时元模型分支将消失。这两个分支都包含 2 个目录，我们希望将其内容合并到 1 个单个目录中。此时 2 个目录在 2 个分支之间已经存在分歧。此外，在分支整合之前，它们将继续分歧更大。

如果我将每个分支上的 2 个目录独立合并在一起，当我将分支集成在一起时会发生什么？作为一个项目，我们选择通过 rebase 来集成分支，以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:03:01.720

Git 并不真正关心目录，甚至文件名。它关心内容。它在合并方面相当聪明（它会弄清楚何时简单地移动或重命名事物）。

所以，基本上，在回答你“当我们将这些分支整合在一起时会发生什么”的问题时，答案是 - “我不知道”。我没看到内容。但我可以告诉你，Git 会相当有效地比较内容的差异/相似之处，并将所有内容很好地结合在一起。Git 卡住的任何事情都只会显示为合并冲突，您只需要逐个解决这些问题。

在这种情况下，考虑到您的 Git 历史记录和更改开始变得相当复杂，我会谨慎使用变基。变基可能工作正常，但我准备回滚以防它变得混乱。

由于您的分支非常分散并且走不同的路线和路径，您最好直接合并以将它们重新组合在一起。这样，您就不会冒以有害/不可恢复的方式重写历史的风险（请记住，变基是重写历史的一种形式）。另外，直接的 Git 合并将产生一个包含所有内容的新提交，这（考虑到已经发生的巨大差异）可能是一个有价值的“岔路口”提交，以防万一你需要回滚.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:31:29.700

变基很好，因为它可以清理您的历史记录，但我绝对不会在这样的复杂情况下这样做。

基本上，如果您曾经将分支推送到远程，那么在大多数情况下，您会希望避免在该分支上使用 rebase。在分支上进行一些本地更改以改善历史记录是很好的，但在那之后，以及推送到远程，只需使用合并。

我只会专注于合并和清理任何冲突。

# android - Android Hierarchy Viewer 的编程接口

> ID：10888725
> 
> 赞同：1
> 
> 时间：2012-06-04T21:36:58.327
> 
> 标签：android, user-interface, robotium

我尝试在我的应用程序运行时记录我的 UI 状态。我可以使用robotium 来浏览UI，但我希望我可以有一个像Hierarchy Viewer 工具这样的编程接口，它可以为我提供特定时间点的UI 属性。任何评论表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T23:24:29.653

好吧，由于 Hierarchy Viewer 是开源的，您可以查看它的代码并尝试制定某种准 API。但是，由于您的方法将不受支持，因此有时您可能不得不重新审视您的工作并对其进行更新以考虑到新的变化`adb`等等。

# azure - 可以以编程方式“回收”WebRole 吗？

> ID：10888728
> 
> 赞同：2
> 
> 时间：2012-06-04T21:37:09.543
> 
> 标签：azure, umbraco, azure-web-roles, umbraco5, azure-configuration

IIS7 应用程序池可以以编程方式回收。Azure 中的 Web 角色是否有等效的概念？

这是基本问题，但对于我为什么问的背景，我包括以下内容......

我们正在尝试在 Azure 中安装 Umbraco，Umbraco 安装向导会写入它的配置信息，然后手动重新启动应用程序池（在 IIS 中）以重新读取它刚刚写入的配置。它需要在 Azure 中以相同的方式工作，但此时我们无法让它从头开始重新初始化（就像在 IIS7 中所做的那样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:43:20.207

您可以为给定的角色实例调用[RoleEnvironment.RequestRecycle()](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.requestrecycle.aspx)。这有效地使 Windows Server VM 重新启动，重新执行您的启动脚本、`OnStart()`方法和`Run()`方法。执行此操作时，您可能需要考虑留下某种类型的*面包屑*：如果您在重新启动时发现安装了某些内容，则跳过安装过程；否则，请安装并请求回收。

# jquery - 在该页面上更改一个链接的 CSS 背景颜色

> ID：10888729
> 
> 赞同：0
> 
> 时间：2012-06-04T21:37:20.817
> 
> 标签：jquery, css

嘿，我只想在用户位于链接所针对的特定页面上时，将我的 NAV 中链接的背景颜色更改为与所有其他导航链接不同的颜色。

代码是：

```
$("#nav li ul li a #changeBG1").css("background-color","red"); 
```

导航 HTML 看起来有点像这样：

```
<ul id="nav">
    <li><a href="index.php">home</a></li>
    <li><a href="custHelp.php">who we are</a>
    <ul>
        <li id="changeBG1"><a href="about.php">about</a></li>
        <li id="changeBG2"><a href="help.php">team</a></li>
    </ul>
</li> 
```

然而，它似乎并没有改变那一个，它改变了所有这些。我似乎不知道如何调用**NAV**的 ID ，然后调用**changeBG1**的 ID，所以只有那个会改变。

Jquery 代码是：

```
var url = window.location.href;

url = url.substr(url.lastIndexOf("/") + 1);
$("#theNav").find("a[href='" + url + "']").addClass("theNavsBG");

if (url == 'about.php'){
    $("#nav li ul li a #changeBG1").css("background-color","red");
} 
```

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:51:17.563

我会创建一个 css 类，然后使用 jquery 将该类添加到该特定链接以显示它是当前页面。

CSS

```
.active {
   background-color: red;
} 
```

jQuery

```
var url = window.location.href;
url = url.substr(url.lastIndexOf("/") + 1);

$("#nav li ul li a").removeClass('active');
$("a[href='" + url + "']").addClass('active'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T21:40:38.397

尝试这个：

```
$("#changeBG1").css("background-color","red"); 
```

`id`是最好的选择器，你不需要添加它“东西”。

您还可以向其中添加一个类`li`：

```
$("#changeBG1").addClass('foo'); 
```

无论如何，看起来你的选择器应该是：

```
$("#nav li ul li#changeBG1").css("background-color","red"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T22:04:24.610

[http://jsfiddle.net/saluce/LhbKv/1/](http://jsfiddle.net/saluce/LhbKv/1/)

让自己的生活更简单...

```
.active{
    background-color: red;
}​ 
```

...

```
$("#nav a[href$='" + url + "']").addClass("active"); 
```

此代码将找到以 url 中的字符串结尾的链接（由`$`选择器中的 the 提供）并向该`a`标记添加一个类。如果要为 着色`li`，请使用`.parent()`。

```
$("#nav a[href$='" + url + "']").parent().addClass("active"); 
```

# javascript - FB 应用程序请求重定向到画布页面而不是标签页

> ID：10888735
> 
> 赞同：0
> 
> 时间：2012-06-04T21:37:46.457
> 
> 标签：javascript, facebook, facebook-canvas

当用户发送应用请求时，请求指向画布页面而不是页面选项卡。

我知道解决方案是将您的 Canvas App URL 指向重定向到页面选项卡的页面。但是，它不起作用。

这是我重定向页面上的 JS：

```
top.location.replace("#{PAGE_TAB_URL}"); 
```

直接转到重定向页面 (myapp.com/redirect) 将重定向到页面选项卡。但由于某种原因，请求不起作用。当用户点击查看请求时，我的应用返回 404。

`top.location.replace`Facebook内部有问题吗？

以下问题的解决方案对我不起作用：[FB app request points to canvas page instead of page tab](https://stackoverflow.com/questions/9949259/fb-app-request-points-to-canvas-page-instead-of-page-tab)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:19:16.127

问题出在我的路由文件中（它是一个 Rails 应用程序），我只是在`get`/redirect 中，而不是在处理`post`，这是在页面选项卡中发生的情况。工作解决方案：

在重定向页面上：

```
`window.top.location.href = "#{PAGE_TAB_URL}";` 
```

路线.rb：

```
`match "redirect" => "home#redirect"` 
```

# java - 如果条件使用正则表达式

> ID：10888742
> 
> 赞同：1
> 
> 时间：2012-06-04T21:38:06.073
> 
> 标签：java, regex

什么正则表达式将有助于满足以下情况：

```
if (string starts with a letter (one or more))
  it must be followed by a . or _ (not both)
else
  no match 
```

示例（假设我有一个要匹配的值列表，正在测试）：

```
public static boolean matches(String k) {

    for (final String key : protectedKeys) {

        final String OPTIONAL_SEPARATOR = "[\\._]?";
        final String OPTIONAL_CHARACTERS = "(?:[a-zA-Z]+)?";
        final String OR = "|";

        final String SEPARATED = OPTIONAL_CHARACTERS + 
                  OPTIONAL_SEPARATOR + key + OPTIONAL_SEPARATOR
                + OPTIONAL_CHARACTERS;

        String pattern = "(" + key + OR + SEPARATED + ")";

        if (k.matches(pattern)) {
            return true;
        }
    }
    return false;
} 
```

此代码与以下所有内容匹配

```
 System.out.println(matches("usr"));

    System.out.println(matches("_usr"));
    System.out.println(matches("system_usr"));
    System.out.println(matches(".usr"));
    System.out.println(matches("system.usr"));

    System.out.println(matches("usr_"));
    System.out.println(matches("usr_system"));
    System.out.println(matches("usr."));
    System.out.println(matches("usr.system"));

    System.out.println(matches("_usr_"));
    System.out.println(matches("system_usr_production"));
    System.out.println(matches(".usr."));
    System.out.println(matches("system.usr.production")); 
```

但是失败了

```
 System.out.println(matches("weirdusr")); // matches when it should not 
```

简化，我想认识到这一点

```
 final String a = "(?:[a-zA-Z]+)[\\._]" + key;
        final String b = "^[\\._]?" + key; 
```

当字符串以字符开头时，分隔符不再是可选的，否则，如果字符串以 a 分隔符开头，它现在是可选的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:56:26.937

要满足上述条件，请尝试：

```
srt.matches("[a-zA-Z]+(\\.[^_]?|_[^\\.]?)[^\\._]*") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:44:03.147

```
if (string starts with a letter (one or more))
  it must be followed by a . or _ (not both)
else
  no match 
```

可以用正则表达式写为：

```
^[A-Za-z]+[._] 
```

正则表达式是按规范制作的（您没有说任何关于允许遵循的内容）。

如果不满足条件，则匹配将根据定义失败，因此无需`else`使用强制失败进行任何更改`(?!)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:23:20.107

如果这对任何人有帮助，我也可以正常工作

```
 for (final String key : protectedKeys) {

        final String separator = "[\\._]";
        final String textSeparator = "(" + "^(?:[a-zA-Z]+)" + separator + ")";
        final String separatorText = "(?:" + separator + "(?:[a-zA-Z]+)$" + ")";

        final String OR = "|";

        final String azWithSeparator = textSeparator + "?" + key + separatorText + "?";
        final String optionalSeparatorWithoutAZ = separator + "?" + key + separator + "?";

        String pattern = "(" + key + OR + azWithSeparator + OR + optionalSeparatorWithoutAZ + ")";

        if (k.matches(pattern)) {
            return true;
        }
    } 
```

# c# - 我如何将一组键发送到我的程序以仅使用代码而不使用键盘 C# 来实现？

> ID：10888754
> 
> 赞同：-1
> 
> 时间：2012-06-04T21:39:06.390
> 
> 标签：c#, winforms, sendkeys

我如何实现一组由另一个程序发送给我的键，例如**(Alt & F4)**或任何其他想要的*序列*？，**在此先感谢 :)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:46:14.747

感谢每一个人，C# 提供了一个静态类来执行此操作：

```
SendKeys.Send("ABC"); 
```

这将发送到最顶层的 ABC 表格，更多密钥请查看此链接

[http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send.aspx)

# android - 一个应用程序中实例化了多少个 LayoutInflater？

> ID：10888756
> 
> 赞同：1
> 
> 时间：2012-06-04T21:39:14.087
> 
> 标签：android, layout-inflater

我在 LayoutInflater 上使用 Factory 界面，以便能够在我的应用程序中的所有 TextView 上设置自定义字体。不幸的是，我的应用程序中有一些地方不起作用。经过调查，例如，在我的 ListView 的适配器中，用于填充单元格的 LayoutInflater 似乎与应用程序其余部分使用的不同（我的活动具有复杂的片段结构）。

这种行为正常吗？如何确保始终使用相同的 LayoutInflater，无论我以何种方式检索它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:06:28.733

当你`LayoutInflater`从`Context.getSystemService(Context.LAYOUT_INFLATER_SERVICE)`（`ViewGroup.inflate`并且`Activity.getLayoutInflater`只是方便的包装器）获得引用时，我认为它总是返回对同一个充气器服务的引用，直到它被销毁并重新创建，然后这个新创建的被返回，等等......我认为那个经理从 getSystemService 方法获取的对象类似于“普通”服务的绑定对象。

编辑：上面说我错了；）

我检查了源代码和 android.view.ContextThemeWrapper （这是活动的超类）：

```
 @Override public Object  getSystemService(String name) {
     if (LAYOUT_INFLATER_SERVICE.equals(name)) {
         if (mInflater == null) {
             mInflater = LayoutInflater.from(mBase).cloneInContext(this);
         }
         return mInflater;
     }
     return mBase.getSystemService(name);
 } 
```

在 android.app.ContextImpl 这可能是 mBase Context 实现：

```
public Object getSystemService(String name) {
    ServiceFetcher fetcher = SYSTEM_SERVICE_MAP.get(name);
    return fetcher == null ? null : fetcher.getService(this);
} 
```

其中：私有静态最终HashMap SYSTEM_SERVICE_MAP = new HashMap();

ServiceFetcher 是一个用于缓存和检索“系统服务实例”的内部类。

可以肯定的是，每个活动/ContextWrapper 都有一个 LayoutInflater。有关更多观察研究来源，请；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:52:05.163

我不认为 LayoutInflaters 的数量真的很重要（除非你真的有数千个）。但是，是的，使用多个 Inflaters 确实是正常的。我在使用适配器视图时使用了很多（因为我不使用一个静态视图。每个适配器仍然只使用一个）。

如果您的代码中有适配器不起作用的地方，您可能会遗漏一些东西。我会在 Inflater 不起作用的地方发布代码。

# c - 复制数组的最快方法 - 它有问题吗？

> ID：10888757
> 
> 赞同：2
> 
> 时间：2012-06-04T21:39:22.283
> 
> 标签：c, performance

使用相同长度的数组时，请考虑创建一个仅包含数组的结构，以便通过简单地将结构复制到另一个结构中来更轻松地复制数组。

结构的定义和声明如下：

```
typedef struct {
    char array[X]; /* X is an arbitrary constant */
} Array;

Array array1; 
```

然后，只需执行以下操作即可执行复制：

```
Array array2;
array2 = array1; 
```

我发现这是复制数组的最快方式。它有什么缺点吗？

**编辑：** X 是一个任意常数，比如说 10。该数组不是可变长度数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:43:21.327

X 可能是任意的（直到您的编译环境的限制），但它（自然）对于 type 的所有对象都是相同的数字`Array`。如果您需要将许多相同长度和类型的数组相互复制，那么这本身并没有错，尽管访问这些数组可能比平时更麻烦。

```
Array array1;
array1.array[0] // to access the first element 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:49:05.610

这工作得很好，但由于`X`必须在编译时定义它是相当不灵活的。通过使用，您可以在任意长度的数组上获得相同的性能`memcpy`。事实上，编译器通常会转换`array2 = array1`为对`memcpy`.

* * *

如评论中所述，直接赋值是否转换为`memcpy`调用取决于数组的大小以及其他编译器启发式方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T22:08:37.307

它完全取决于您使用的编译器和优化级别。编译器“应该”将其缩减为具有恒定大小的 memcpy，而这又应缩减为存在用于复制各种大小的内存块的任何机器特定操作。如今，小块应该是高度机器专用的。实际上调用 memcpy 库函数复制 4 个字节将是“10 年前”。

随着优化关闭，所有性能赌注都被关闭。

# java - 在Java中将对象转换为双精度

> ID：10888758
> 
> 赞同：2
> 
> 时间：2012-06-04T21:39:32.327
> 
> 标签：java, exception, collections, casting, double

我正在尝试处理我的代码中源自单个关键点的许多 ClassCastExceptions。我将首先为这个问题提供一些背景信息

我正在从 csv 文件中读取不同类型的值。以下是包含它们的类的快照。

```
public class Row {
private Object[] data;

public Object getAtIndex(int i)
{
    return data[i];
}
} 
```

为了保存文件的不同行，我使用的是

```
ArrayList<Row> rows; 
```

**问题**在于一个函数**应该返回一个 Double[] 包含存储在 ArrayList 中的特定列的**值。我当前的功能看起来像这样

```
public Double[] getByIndex(int i)
    {
        Double[] result = new Double[rows.size()];
        String temp;
        for(int j=0;j<rows.size();j++)
        {
            temp =(String)rows.get(j).getAtIndex(i); //java.lang.ClassCastException: java.lang.Double cannot be cast to java.lang.String
            result[j]=Double.parseDouble(temp);
        }
        return result;
    } 
```

这个 getByIndex() 在调用时会抛出 ClassCastExceptions。我确保只为那些预期具有 Double 值的列调用此函数。有没有其他方法可以促进这个 Object 到 Double 的转换。由于这个问题，我的进度停滞不前。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T21:42:53.917

代替

```
temp =(String)rows.get(j).getAtIndex(i); //java.lang.ClassCastException: java.lang.Double cannot be cast to java.lang.String
result[j]=Double.parseDouble(temp); 
```

只需使用以下内容：

```
 result[j]=(Double)rows.get(j).getAtIndex(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:51:56.457

为了更加防弹，我会结合 esej 和 vizier 的答案......（但前提是这不是性能瓶颈！）

```
Object temp = rows.get(j).getAtIndex(i);
if (temp instanceof Double) {
   result[j]=(Double)rows.get(j).getAtIndex(i);
} else {
  try {
    temp = String.valueOf(rows.get(j).getAtIndex(i));
    result[j]= Double.parseDouble(temp);
  } catch (NumberFormatException e) {
    // logging and recovery code goes here, or rethrow as an exception you can handle.
  }
} 
```

如果这是应用程序的性能瓶颈，那么一定要按照 vizier 所说的 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T21:42:44.557

尝试：

```
String.valueOf(rows.get(j).getAtIndex(i)) 
```

或者：（如果您的行只包含 Double，那么您可能应该这样声明它。）

```
Double temp;
for(int j=0;j<rows.size();j++)
{
    temp =(Double)rows.get(j).getAtIndex(i);
    result[j]=Double.parseDouble(temp); 
```

您正在将某些东西明确地转换为字符串，当该东西不是字符串时，转换将失败（字符串在 Java 中是最终的）。正确的关键是你把什么放到行中，它只是双打吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T21:49:40.843

您正在尝试的内容存在许多问题。

首先，你不应该需要一个临时字符串来获得一个 Double。那是明确的代码气味，表明出了问题。

从外观上看，您应该可以直接进行该转换：

```
result[j]=(Double)rows.get(j).getAtIndex(i); 
```

^(这是@vizier 提出的建议)

其次，如果您*确实*想从某个不是字符串的对象中获取字符串，则应该使用`Object.toString()`or `String.valueOf`。简单地转换一个值以希望它是一个字符串几乎从来都不是一个好主意（除非您确定它将是一个字符串）。在你的情况下，你期待双打，所以`String.valueOf(Double)`会起作用。

# iphone - iphone app - uitabbarcontroller 总是在 uinavigationcontroller 中选择第一个视图？

> ID：10888759
> 
> 赞同：0
> 
> 时间：2012-06-04T21:39:53.400
> 
> 标签：iphone, uinavigationcontroller, tabbarcontroller

我正在构建一个 iphone 应用程序。

我有一个标签栏控制器，它有 2 个标签项。每个 tabitem 链接到不同的导航控制器。每个导航控制器链接到表视图控制器的层次结构。当用户单击选项卡 1，然后单击表中的项目，然后单击选项卡 2，然后单击选项卡 1，应用程序将显示他在单击选项卡 2 之前正在查看的表。

我如何让应用程序在每次他单击选项卡 1 时显示选项卡 1 的第一个表格，而不是显示他在离开 tab1 之前查看的最新表格？

我更喜欢编程解决方案，而不是使用 xcode 故事板。但如果不存在，那么情节提要解决方案也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:51:08.000

`popToRootViewControllerAnimated:`当 TabBarController 更改正在显示的选项卡时调用NavigationController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:03:14.710

试试这个基本示例，从头开始为每个 UItabBarItem 创建一个 UItabBar 和 UInavigationController ：

在您的头文件 (appdelegate.h) 中，添加此委托：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate,UITabBarControllerDelegate> 
```

在名为“didFinishLaunchingWithOptions”的函数中，添加这部分代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

UINavigationController *navController=[[UINavigationController alloc] init];
m_ViewController1 = [[ViewController1 alloc] initWithNibName:@"ViewController1" bundle:nil]; 
[navController pushViewController:m_ViewController1 animated:NO];

UINavigationController *navController2=[[UINavigationController alloc] init];
m_ViewController2 = [[ViewController2 alloc] initWithNibName:@"ViewController2" bundle:nil]; 
[navController pushViewController:m_ViewController2 animated:NO];

UITabBarController *mtabBarController = [[UITabBarController alloc] init];
mtabBarController.view.frame = CGRectMake(0, 0, 320, 460);

// Set each tab to show an appropriate view controller
[mtabBarController setViewControllers:  [NSArray arrayWithObjects:navController1,navController1,navController2, nil]];

self.window.rootViewController = mtabBarController;    
mtabBarController.delegate = self;
[self.window makeKeyAndVisible];

return YES;
} 
```

然后在这个函数中，不要忘记添加 popToRootViewControllerAnimated 函数：

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
    [m_ViewController1.navigationController popToRootViewControllerAnimated:YES];
    [m_ViewController2.navigationController popToRootViewControllerAnimated:YES];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T00:40:52.280

在我的 appdelegate.h 文件中，我更改了行

```
@interface wscAppDelegate : UIResponder <UIApplicationDelegate> 
```

到

```
@interface wscAppDelegate : UIResponder <UIApplicationDelegate,UITabBarControllerDelegate> 
```

然后在 viewDidLoad 函数的 CustomTabBarController 中，我添加了以下几行：

```
wscAppDelegate *appDelegate = (wscAppDelegate *)[[UIApplication sharedApplication] delegate];
self.delegate = appDelegate; 
```

然后在 appdelegate.m 文件中，我添加了这个函数

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
    for(int c=0; c<[tabBarController.viewControllers count]; c++)
    {
        UINavigationController * navcontroller = [tabBarController.viewControllers objectAtIndex:c];

        [navcontroller popToRootViewControllerAnimated:YES];
    }    

    return YES;

} 
```

# asp.net - 遍历 SearchResultCollection 非常慢

> ID：10888760
> 
> 赞同：1
> 
> 时间：2012-06-04T21:40:05.487
> 
> 标签：asp.net, performance, foreach, ldap, ldap-query

我正在运行一个 LDAP 查询，它返回多个条目并将它们存储在 SearchResultCollection 中。我正在迭代 SearchResultCollection，如下所示：

```
// results is my SearchResultCollection object
foreach (SearchResult sr in results)  
{
    ... do things to each SearchResult in here ...
} 
```

这似乎是最合乎逻辑的方法，但循环*非常*慢。当我使用调试器单步执行循环时，我发现这是初始化 foreach 循环的第一步需要时间——实际的迭代是瞬时的。

此外，当我在调试时查看 SearchResultCollection 的内容时，手表加载变量内容的时间也一样长。

我有一个理论，即 SearchResultCollection 实际上并不包含完整的 SearchResult 对象，而是对 Active Directory 服务器中的条目的引用，然后在我遍历 SearchResultCollection 对象时单独获取这些条目。谁能证实这个理论？是否有更好（更快）的方法来获取一组 LDAP 条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:47:01.250

我遇到了同样的问题，下面帖子中的方法比我自己的要快得多：

[http://msdn.microsoft.com/en-us/library/ms180881(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms180881(v=vs.80).aspx)

...要回答您的问题，是的，好像您尝试在仍在循环中时直接使用以下内容处理条目：

```
 If Not UserAccount.GetDirectoryEntry().Properties("sAMAccountName").Value Is Nothing Then sAMAccountName = UserAccount.Properties("sAMAccountName")(0).ToString() 
```

...这对性能有很大影响，您可以通过将集合添加到循环内的 Dictionary 然后处理字典来解决此问题：

```
 Dim searchResult As SearchResult
    Dim dictLatestLogonDatesTemp As New Dictionary(Of String, Date)
    SearchResults1 = mySearcher.FindAll()
    For Each searchResult In SearchResults1
        Dim propertyKey,sAMAccountName  As String
        Dim dteLastLogonDate As Date = Nothing
        For Each propertyKey In searchResult.Properties.PropertyNames
            Dim valueCollection As ResultPropertyValueCollection = searchResult.Properties(propertyKey)
            For Each propertyValue As Object In valueCollection
                If LCase(propertyKey) = LCase("sAMAccountName") Then sAMAccountName = propertyValue
                If LCase(propertyKey) = LCase("lastLogon") Then dteLastLogonDate = Date.FromFileTime(propertyValue)
            Next propertyValue
        Next propertyKey
        If sAMAccountName <> Nothing Then dictLatestLogonDatesTemp.Add(sAMAccountName, dteLastLogonDate)
    Next searchResult 
```

这有点限制，因为字典只有两个条目，但您可以用逗号分隔其他值或使用字典中的值字典：

```
 Dim tempDictionary As Dictionary(Of String, Dictionary(Of String, String)) 
```

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-17T21:17:05.107

我想提交的是，将它们添加到数据表也非常有效，并且允许比字典更多的属性。我从在 searchresultscollection 中迭代 2000 个用户花费了将近 2 分钟到不到 1-2 秒。希望这对其他人有帮助。

```
 Private Sub getAllUsers()
    Dim r As SearchResultCollection
    Dim de As DirectoryEntry = New DirectoryEntry(GetCurrentDomainPath)
    Dim ds As New DirectorySearcher(de)

    ds.SearchScope = SearchScope.Subtree
    ds.PropertiesToLoad.Add("name")
    ds.PropertiesToLoad.Add("distinguishedName")
    ds.PropertiesToLoad.Add("objectSID")
    ds.Filter = "(&(objectCategory=person)(objectClass=user))" '(!userAccountControl:1.2.840.113556.1.4.803:=2) not disabled users 

    PleaseWait.Status("Loading Users...")
    Application.DoEvents()

    r = ds.FindAll()

    Dim dt As New DataTable
    dt.Columns.Add("Name")
    dt.Columns.Add("SID")

    For Each sr As SearchResult In r
        Dim SID As New SecurityIdentifier(CType(sr.Properties("objectSID")(0), Byte()), 0)
        dt.Rows.Add(sr.Properties("name")(0).ToString(), SID.ToString)
    Next

    With lstResults
        lstResults.DataSource = dt
        .DisplayMember = "name"
        .ValueMember = "SID"
        .Items.Sort()
    End With

End Sub 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-04T21:43:32.067

There may be some ways to decrease the response time:

*   restrict the scope of the search
*   use a more restrictive search filter
*   use a base object closer to the object(s) being retrieved.

### see also

*   [LDAP: Mastering Search Filters](http://ff1959.wordpress.com/2011/09/21/mastering-ldap-search-filters/)
*   [LDAP: Programming practices](http://ff1959.wordpress.com/2011/10/27/ldap-programming-best-practices/)
*   [LDAP: Search Best Practices](http://www.ldapguru.info/ldap/ldap-search-best-practices.html)

# php - php 会话，将 url 链接添加到用户收藏夹

> ID：10888763
> 
> 赞同：0
> 
> 时间：2012-06-04T21:40:31.820
> 
> 标签：php, session, url

我正在尝试设计一个向用户显示许多不同项目的网站，我希望他们能够将他们选择的项目添加到“稍后查看”页面，基本上就像添加到收藏夹一样。当他们访问该页面时，我希望该项目显示为一个链接，该链接会将他们带回查看的项目。我不希望用户必须注册该站点，因此无法将选择存储在数据库中，有没有简单的方法可以在 PHP 中做到这一点。在过去的三天里，我一直对此感到困惑，任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:56:44.350

您可以使用 Cookie 或 HTML5 本地存储将数据存储在他们的计算机上。看看这个例子是否有帮助。

**HTML**

```
<a href="#" class="item" id="item1">Item 1</a>
<a href="#" class="item" id="item2">Item 2</a>
<a href="#" class="item" id="item3">Item 3</a> 
```

**JS**

```
var viewedItems = [];

$(".item").click(function() {
   viewedItems.push($(this).attr("id"));
   localStorage['viewedItems'] = JSON.stringify(viewedItems)
   console.log($(this).attr("id"));
   console.log('viewedItems: ', JSON.parse(localStorage['viewedItems']));
}); 
```

[演示](http://jsfiddle.net/kvZsP/)

您可以在站点的任何位置检索此数组，并向用户显示他们之前“保存”在其中的项目。localstorage 保存在用户的计算机上，因此只能从那里、在该浏览器中访问，并且只能访问您的站点。

# bash - 如何在bash中的变量中逃避通配符扩展？

> ID：10888764
> 
> 赞同：2
> 
> 时间：2012-06-04T21:40:37.157
> 
> 标签：bash, wildcard-expansion

如何在变量名中转义通配符扩展？

```
CP="lib/*"
COMMAND="java $VARIABLES -cp $CP SomeClass"
echo $COMMAND 
```

回显该命令总是会导致通配符扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:57:39.113

```
echo "$COMMAND" 
```

使用引号可以防止 glob 被扩展。

顺便说一句，请参阅[“我正在尝试将命令放入变量中，但复杂的情况总是失败！”](http://mywiki.wooledge.org/BashFAQ/050)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:57:31.143

[“我正在尝试将命令放入变量中，但复杂的情况总是失败！”](http://mywiki.wooledge.org/BashFAQ/050)

请改用数组。

# c++ - 基于 Win32 的应用程序，尝试更新标签的文本

> ID：10888766
> 
> 赞同：0
> 
> 时间：2012-06-04T21:40:49.150
> 
> 标签：c++, winapi, win32gui

此代码显示一个带有文本标签的窗口：“请输入一个数字”和一个按钮。

当您单击按钮时，它应该将文本替换为“ TEXT ”。它可以工作，但它会在第一个文本之上写入/打印新文本。所以它重叠。

我希望更改文本字符串而不是覆盖第一个文本字符串，但我不知道如何，因为我是 Windows 应用程序开发的新手。

请帮帮我。

整个来源是：

```
#include <windows.h>
#include <iostream>

using namespace std;

enum { ID_LABEL = 1,ID_BUTTON0};

static  HWND static_label, button0;

HDC          hdc;
HBRUSH  NewBrush;
HINSTANCE g_hInst;

LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam);

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd)
{
    LPCTSTR className = TEXT("myClass");
    WNDCLASSEX wc;

    wc.cbSize        = sizeof(wc);
    wc.style         = CS_HREDRAW | CS_VREDRAW;
    wc.cbWndExtra    = 0;
    wc.cbClsExtra    = 0;
    wc.lpfnWndProc   = WndProc;
    wc.hInstance     = hInstance;
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = TEXT("myClass");

    wc.hbrBackground  = (HBRUSH)(CreateSolidBrush(RGB(48, 38, 88)));

    wc.hIcon             = LoadIcon(NULL, IDI_APPLICATION);
    wc.hIconSm           = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor           = LoadCursor(NULL, IDC_ARROW);

    if(!RegisterClassEx(&wc))
    {
        MessageBox(NULL, TEXT("ERROR! FAILED TO REGISTER CLASS!"), TEXT("FATAL ERROR!"), MB_IConerror | MB_OK);
        return 1;
    }

    HWND hwnd = CreateWindowEx(0, TEXT("myClass"), TEXT("WINDOW TITLE"), WS_OVERLAPPEDWINDOW, 450, 100, 500 + 7, 500 + 33 , NULL, NULL, hInstance, NULL);

    if(!hwnd)
    {
        MessageBox(NULL, TEXT("ERROR! FAILED TO CREATE WINDOW!"), TEXT("FATAL ERROR!"), MB_IConerror | MB_OK);

        return true;
    }  

    ShowWindow(hwnd, nShowCmd);                
    UpdateWindow(hwnd); 

    MSG msg;

    while(GetMessage(&msg, NULL, 0, 0) > 0)
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    return (int)msg.wParam;
}

LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch(msg)
    {
        case WM_PAINT:
        {

        }

        case WM_CTLCOLORSTATIC:
        {
           SetBkMode((HDC) wParam, TRANSPARENT);        

           return (LONG) GetStockObject(NULL_BRUSH);
    }

    break;

    case WM_CREATE:
    {
        static_label = CreateWindow(L"Static",L"Please Enter A Number",WS_CHILD | WS_VISIBLE,35,15,175,25,hwnd,0, g_hInst,0);

        button0 = CreateWindow(L"Button",L"OK",BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE ,80,220,35,35,hwnd,(HMENU)ID_BUTTON0,g_hInst,0);   
      }

      break;

      case WM_COMMAND: //Command from Child windows and menus are under this message

      switch(wParam) //the ID is wParam
      {
         case ID_BUTTON0: //check for our button ID
         {
             SetWindowText(static_label,L"TEXT");

             break;
         }
      }//switch. 

  break;

  case WM_DESTROY: 
         PostQuitMessage(0);
         break; // pass to DefWindowProc(...) as well

      case WM_CLOSE:
         DestroyWindow(hwnd);
         break;
   } 

    return DefWindowProc(hwnd, msg, wParam, lParam);    
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-04T22:23:54.223

问题在这里：

```
case WM_CTLCOLORSTATIC:
{
   SetBkMode((HDC) wParam, TRANSPARENT);        
   return (LONG) GetStockObject(NULL_BRUSH);
} 
```

此代码告诉静态控件绘制没有背景颜色的文本并且不重新绘制背景。因此，新文本绘制在旧文本之上，而不是新背景上。

如果您需要一些自定义背景来显示，那么您必须使底层父窗口的那部分无效，并可能使用类似的东西`WS_EX_TRANSPARENT`来确保最后绘制子静态控件。这样，当它尝试绘制新文本时，应该绘制一个新的背景。

请注意，这意味着您不能`WS_CLIPCHILDREN`在底层父窗口上使用，这会在重绘时增加闪烁。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-03T17:17:44.453

使用此代码在函数**SetWindowText**之后更新标签：

```
SetWindowText(static_label,L"TEXT");         

ShowWindow(static_label, SW_HIDE);
ShowWindow(static_label, SW_SHOW); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T21:57:17.430

您的文本显示在“静态”窗口中，他们不希望文本发生变化，因此他们不会优雅地处理它。您需要强制控件擦除并重绘自身。

```
RedrawWindow(static_label, NULL, NULL, RDW_ERASE); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-02T01:19:11.807

RedrawWindow(H_frame,NULL,NULL,RDW_INVALIDATE) 当我想激发 WM_CTLCOLORSTATIC 引起的更改以立即产生可见效果时，它对我有用。

我之前通过 SendMessage(H_frame,WM_CTLCOLORSTATIC,0,(int)SpecificControlHandle) 得到了部分结果，但这仅部分有效，因为被调用的函数正在执行 GetWindowDC 并绘制东西......

RedrawWindow(H_frame,NULL,NULL,RDW_INVALIDATE) 方法要好得多。我一直在更改文本的文本和背景颜色（以及使用 SetWindowLong(SpecificControlHandle,GWL_ID,SomeNewID) 来告诉程序在发送 WM_CTLCOLORSTATIC 后要采用哪条路由的控件的 ID。使它被发送是通过以下方式解决的位RedrawWindow(H_frame,NULL,NULL,RDW_INVALIDATE)，因此我的帖子。如果它在更改 STATIC 的 ID 后工作，它应该在更改任何其他属性或样式等后工作。

# android - PACKAGE_ADDED 广播接收器不起作用

> ID：10888768
> 
> 赞同：11
> 
> 时间：2012-06-04T21:40:54.397
> 
> 标签：android, broadcastreceiver, android-4.0-ice-cream-sandwich

我在 Manifest 中注册了一个广播接收器：

```
<application ...>
    <receiver android:name="com.some.pkg.NewAppReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_ADDED" />
        </intent-filter>
    </receiver>
</appcication> 
```

和接收器：

```
public class NewAppReceiver extends BroadcastReceiver {

    private static final String TAG = "NewAppReceiver";

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d(TAG, "Intent: " + intent.getAction());
    }
} 
```

当我手动或从[Android Market安装](http://en.wikipedia.org/wiki/Google_Play)[APK](http://en.wikipedia.org/wiki/APK_%28file_format%29)时，什么也没有收到。为什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-04T22:32:48.937

您是否在安装其他应用程序之前运行了包含此广播接收器的应用程序？

从某些 API 版本开始，broadcastReceivers 在您执行应用程序之前将无法工作。放置一个活动并执行它。

另外，不要忘记将以下内容添加到广播接收器中：

```
<data android:scheme="package" /> 
```

* * *

编辑：在 Android 8 及更高版本上，如果您的应用程序以 API 27 或更高版本为目标，它将部分工作，因此您必须在代码中而不是在清单中注册这些事件。以下是清单中仍然可以安全使用的意图列表：[https](https://developer.android.com/guide/components/broadcast-exceptions.html) ://developer.android.com/guide/components/broadcast-exceptions.html 。

其余的应该在代码中使用。更多信息[**在这里**](https://developer.android.com/about/versions/oreo/background.html#broadcasts)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-16T13:49:15.053

由于[android.intent.action.PACKAGE_ADDED](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_ADDED)是一个系统意图（请注意，您自己的应用程序在安装时不会收到它），您的[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)将接收来自您应用程序外部来源的消息。因此，检查你没有放：*android:exported="false"*

您可能还需要添加：

```
<data android:scheme="package" /> 
```

因此，您的*[AndroidManifest.xml](http://developer.android.com/guide/topics/manifest/manifest-intro.html)*[中的BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)应如下所示：

```
<application ...>
    <receiver android:name=".NewAppReceiver" android:exported="true">
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_ADDED" />
            <data android:scheme="package" />
        </intent-filter>
    </receiver>
</appcication> 
```

如果还是不行，你可以尝试放一个更高的优先级，比如：*android:priority="1000"*

看看：http: [//developer.android.com/guide/topics/manifest/receiver-element.html](http://developer.android.com/guide/topics/manifest/receiver-element.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-07-24T13:11:13.580

从清单注册接收器不适用于 API 26（android 8）。因为它对旧版本有性能影响。

但是我们可以从 java 代码中注册接收器并接收已删除和添加的应用程序的更新。

```
 val intentFilter = IntentFilter()
    intentFilter.addAction(Intent.ACTION_PACKAGE_ADDED)
    intentFilter.addAction(Intent.ACTION_PACKAGE_REMOVED)
    intentFilter.addDataScheme("package")
    registerReceiver(YourBroadcastReceiver(), intentFilter) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-04T22:03:19.017

您是否尝试在您正在安装的应用程序中接收意图？[ACTION_PACKAGE_ADDED 的文档](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_ADDED)说：

> 注意新安装的包没有收到这个广播。

另一种可能性是，此意图可能不会传递给通过清单注册的组件，而只能手动传递（如[Mark Murphy 对 Stack Overflow 问题*Can't receive broadcasts for PACKAGE intents*](https://stackoverflow.com/a/1596466/56242)的回答中所述）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-13T15:45:24.890

如果您尝试接收其他包裹，它必须工作。

（正如@Savvas 所指出的）如果您尝试接收自己的包裹添加，您将无法接收它。即使您的广播接收器有`action.PACKAGE_ADDED`，接收器的`onReceive`方法[也不会被触发](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_ADDED)。

在这种情况下，您最好的选择是保存这些数据。通过使用`sharedPreferences`，添加一个类似“appIsWorkedBefore”的键，然后在启动器 Activity 的 onCreate 方法中将此变量设置为“true”。你可以根据这个布尔值来制作你的作品。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-07T16:18:41.810

此意图操作不再可用于应用程序。

```
This is a protected intent that can only be sent by the system. 
```

[https://developer.android.com/reference/android/content/Intent#ACTION_PACKAGE_ADDED](https://developer.android.com/reference/android/content/Intent#ACTION_PACKAGE_ADDED)

# java - NetBeans 中的 Apache Ivy 解决导入问题

> ID：10888769
> 
> 赞同：1
> 
> 时间：2012-06-04T21:40:56.687
> 
> 标签：java, apache, netbeans, dependencies, ivy

我想使用 Apache Ivy 在我的 Java 项目中解决一些依赖项（导入）。我正在使用 NetBeans 7.1.2（Java EE 版本）。我已经安装了 IvyBeans 插件（1.2 版）。然后我构建了我的项目，Ivy 在我的项目文件夹中创建了 IvyFiles 和 IvyLibraries 文件夹（它们都是空的）。问题是没有解决任何库。我从构建器获得以下消息：

```
[PATH_TO_PROJECT]\nbproject\ivy-impl.xml:92: settings file does not exist: [PATH_TO_PROJECT]\${ivy.settings.location} 
```

这是**常春藤解析输出**：

```
Resolving COMPILE scope ...
:: loading settings :: url = jar:file:/C:/Users/jakub/.netbeans/7.1.2/modules/ext/ivy-2.1.0.jar!/org/apache/ivy/core/settings/ivysettings.xml
:: resolving dependencies :: IvyThriftApp#IvyThriftApp;1.0
    confs: [compile]
:: resolution report :: resolve 6ms :: artifacts dl 0ms
    ---------------------------------------------------------------------
    |                  |            modules            ||   artifacts   |
    |       conf       | number| search|dwnlded|evicted|| number|dwnlded|
    ---------------------------------------------------------------------
    |      compile     |   0   |   0   |   0   |   0   ||   0   |   0   |
    ---------------------------------------------------------------------
Resolving PROCESSOR scope ...
:: loading settings :: url = jar:file:/C:/Users/jakub/.netbeans/7.1.2/modules/ext/ivy-2.1.0.jar!/org/apache/ivy/core/settings/ivysettings.xml
:: resolving dependencies :: IvyThriftApp#IvyThriftApp;1.0
    confs: [compile]
:: resolution report :: resolve 3ms :: artifacts dl 0ms
    ---------------------------------------------------------------------
    |                  |            modules            ||   artifacts   |
    |       conf       | number| search|dwnlded|evicted|| number|dwnlded|
    ---------------------------------------------------------------------
    |      compile     |   0   |   0   |   0   |   0   ||   0   |   0   |
    ---------------------------------------------------------------------
Resolving RUNTIME scope ...
:: loading settings :: url = jar:file:/C:/Users/jakub/.netbeans/7.1.2/modules/ext/ivy-2.1.0.jar!/org/apache/ivy/core/settings/ivysettings.xml
:: resolving dependencies :: IvyThriftApp#IvyThriftApp;1.0
    confs: [compile, runtime]
:: resolution report :: resolve 3ms :: artifacts dl 0ms
    ---------------------------------------------------------------------
    |                  |            modules            ||   artifacts   |
    |       conf       | number| search|dwnlded|evicted|| number|dwnlded|
    ---------------------------------------------------------------------
    |      compile     |   0   |   0   |   0   |   0   ||   0   |   0   |
    |      runtime     |   0   |   0   |   0   |   0   ||   0   |   0   |
    ---------------------------------------------------------------------
Resolving COMPILE_TEST scope ...
:: loading settings :: url = jar:file:/C:/Users/jakub/.netbeans/7.1.2/modules/ext/ivy-2.1.0.jar!/org/apache/ivy/core/settings/ivysettings.xml
:: resolving dependencies :: IvyThriftApp#IvyThriftApp;1.0
    confs: [compile, compile-test]
:: resolution report :: resolve 4ms :: artifacts dl 0ms
    ---------------------------------------------------------------------
    |                  |            modules            ||   artifacts   |
    |       conf       | number| search|dwnlded|evicted|| number|dwnlded|
    ---------------------------------------------------------------------
    |      compile     |   0   |   0   |   0   |   0   ||   0   |   0   |
    |   compile-test   |   0   |   0   |   0   |   0   ||   0   |   0   |
    ---------------------------------------------------------------------
Resolving RUNTIME_TEST scope ...
:: loading settings :: url = jar:file:/C:/Users/jakub/.netbeans/7.1.2/modules/ext/ivy-2.1.0.jar!/org/apache/ivy/core/settings/ivysettings.xml
:: resolving dependencies :: IvyThriftApp#IvyThriftApp;1.0
    confs: [compile, compile-test, runtime, runtime-test]
:: resolution report :: resolve 4ms :: artifacts dl 0ms
    ---------------------------------------------------------------------
    |                  |            modules            ||   artifacts   |
    |       conf       | number| search|dwnlded|evicted|| number|dwnlded|
    ---------------------------------------------------------------------
    |      compile     |   0   |   0   |   0   |   0   ||   0   |   0   |
    |   compile-test   |   0   |   0   |   0   |   0   ||   0   |   0   |
    |      runtime     |   0   |   0   |   0   |   0   ||   0   |   0   |
    |   runtime-test   |   0   |   0   |   0   |   0   ||   0   |   0   |
    --------------------------------------------------------------------- 
```

我对 Apache Ivy 在 NetBeans 下的工作方式有什么误解吗？我的愿景是在我的项目中使用一些依赖项——然后我构建它，Ivy 会自动从 Internet 获取依赖项，我不必关心将所有外部库添加到我的项目中。

任何建议如何解决这个问题？

非常感谢您的帮助或任何建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:24:54.440

看起来你的常春藤决心工作正常。在您的构建文件中，如何使用已解析的 jar 来填充您的 ANT 项目的类路径？

一种流行的选择是调用 ivy[检索](http://ant.apache.org/ivy/history/latest-milestone/use/retrieve.html)任务来填充本地 lib 目录：

```
 <ivy:retrieve/>
   <path id="build.path">
      <fileset dir="lib" includes="**/*.jar"/>
   </path> 
```

我的偏好和建议是使用 ivy 的[cachepath](http://ant.apache.org/ivy/history/latest-milestone/use/cachepath.html)任务：

```
 <ivy:cachepath pathid="build.path"/> 
```

这里给出了一个更完整的例子（使用 ivy 配置）：

[用于在多个版本的类路径之间进行选择的 Ant 脚本](https://stackoverflow.com/questions/10794813/ant-script-to-choose-between-multiple-version-of-classpaths/10824812#10824812)

# rest - 用于 API 访问多个资源的 REST 设计

> ID：10888774
> 
> 赞同：2
> 
> 时间：2012-06-04T21:41:19.503
> 
> 标签：rest

想象一个 API，它为一个电视节目表应用程序（如[zap2it 电视节目表）返回 JSON 数据。](http://tvlistings.zap2it.com/tvlistings/ZCGrid.do?aid=zap2it)

它基本上是一个电视频道列表，以及每个频道当前和以后的节目。目前，我有一个返回所有通道的 API `GET /channels`。但是，需要为该数据中的每个频道添加当前正在播放的节目。我正在考虑添加一个新的 API，`GET /channels/on_now`以将其与当前的 API 区分开来。**我想为新的 API 明确这一点，我不想为每个频道单独调用，需要为所有频道返回当前显示数据。**这是一个好的 REST API 设计吗？

当前`GET /channels`JSON 数据

```
[
   "channel": {
      "channelName": "KRON4",
    },
   "channel": {
      "channelName": "KTOV5",
    },
   ...
] 
```

`GET /channels/on_now`以下新 API 的预期 JSON 数据

```
[
  {
   "channel": {
      "channelName": "KRON4",
    },
    "on_now": {
      "startTime": "2012-06-04T11:30:00",
      "endTime": "2012-06-04T12:00:00",
      "shortDescription": "Latest local, statewide & national news events, along with sports & weather.",
      "shortTitle": "4:30am Newscast"
    }
  },
  {
   "channel": {
      "channelName": "KTOV5",
    },
    "on_now": {
      "startTime": "2012-06-04T11:30:00",
      "endTime": "2012-06-04T12:30:00",
      "shortDescription": "Local morning news and weather report",
      "shortTitle": "Morning Newscast"
    }
  },
  ...next channel...
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T23:09:07.957

我建议专注于*内容*，而不是 URL。

示例：您有一个入口点，'/'。这是 API 中唯一的 URL。GET 就返回 st like

```
{
    "channels" : {
        "href" : "path.to/channels"
        },
    "programs" : {
        "href" : "path.to/programs"
        }
} 
```

要检索频道列表，您可以在相应的 URL 上获取 - 然后您之前不需要知道 - 并获取，例如：

```
[
    {
        "name" : "BBC",
        "id" : 452,
        "href" : "path.to/channels/452"
    },
    {
        "name" : "FOO",
        "id"   : 112,
        "href" : "path.to/channels/112"
    }
] 
```

有关 BBC 的详细信息，您可以在提供的 URL 上获取：

```
{
    "name" : "BBC",
    "id" : 452,
    "self" : "path.to/channels/452",
    "live_url" : "link.to.bbc.cast",
    "whatever" : "bar",
    "current" : "path.to/channels/452/current",
    "program" : "path.to/channels/452/program"
} 
```

等等。URL 是即时发现的；您可以随时修改它们。使您的 API 成为内容的是内容：您必须与客户就返回的内容（字段、类型等）达成一致。您最终调用上面的“当前”URL 来获取有关当前程序的信息。

阅读此处了解更多信息：http: [//kellabyte.com/2011/09/04/clarifying-rest/](http://kellabyte.com/2011/09/04/clarifying-rest/)

**OP评论后编辑：**

您可以引入“嵌入”参数以限制请求数量：

```
GET path.to/channels/452?embed=current 
```

会返回：

```
{
    "name" : "BBC",
    "id" : 452,
    "self" : "path.to/channels/452",
    "live_url" : "link.to.bbc.cast",
    "whatever" : "bar",
    "current" : {
        "self" : "path.to/channels/452/current",
        "name" : "Morning Show",
        "start_time" : "(datetime here)",
        "end_time"   : "(datetime here)",
        "next"       : "whatever.comes.ne/xt"
        },
    "program" : "path.to/channels/452/program"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:30:28.460

您问：

> 这是一个好的 REST API 设计吗？

**是**的，是的。

与回答的其他人相反，您可以自由定义任何您想要的资源，只要它代表一个名词。这包括与时间相关的服务，例如“现在电视上有什么节目”或 perrenial 示例，“<city> 的当前天气”。这些服务资源与代表节目或频道的更多静态资源一样有效。

但是，我会更改 URI。`/channels`看起来像一个集合资源 URI。我希望它的孩子是频道，例如`/channels/kron4`（您可以使用任何唯一的字符串，而不是 ID，来识别实例资源）。
因此，`/channels/on_now`看起来很奇怪。它看起来像一个名为“on_now”的频道。虽然没有什么可以阻止您使用它，但它可能会在以后与一个名为“On Now”的频道发生*冲突*！**我会简单地`/on_now`用作您的 URI。** `/channels/kron4/on_now`显然也有利于单通道的响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T23:05:31.883

只是附加到上面的答案：

```
/Channels/bbc/Shows/time/now -----> Get all the show played on BBC now
/Channels/bbc/Shows/time/2011-03-27T03:00:00.000+02:00 -----> Get all the show played on BBC  on 2011-03-27T03:00:00.000+02:00 . 
```

这更具可扩展性，您不必担心任何名称为 current 的节目。

编辑：如果您可以在这里获得 api-doc 访问[https://developer.sdp.nds.com/page/about ，那么您可以很好地开始做这样的事情](https://developer.sdp.nds.com/page/about)

按照我的说法，需要更多数据，api 会是这样的： //epg?time=&start=0&limit=1&duration=

这将定义一个通用 api，以根据时间和持续时间获取基于位置的 tv_listing 信息。结果将与在给定时间跨度内发生的频道列表之间的所有节目进行分页。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T21:50:11.287

```
/Channels -----------------------> Get All Channels
/Channels/bbc  ------------------> Get BBC Channel
/Channels/bbc/Shows -------------> Get All shows in BBC
/Channels/bbc/Shows/Baseball ----> Get the show called "Baseball", in bbc channel
/Channels/bbc/Shows/current -----> Get the Current show running, in bbc channel 
```

假设您没有（也不会）有一个节目需要`Current`您的任何频道！:) 。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-10T01:22:13.467

我不是 API 专家，但我认为您应该考虑返回的内容，而不是“看起来有意义”来放置资源的位置。

一种解决方案是将 on_now 视为资源。

所以你的api将是：

```
/channels (all channels)
/channels/{channel-id} (the {channel-id} channel - could be bbc and can have a collection of shows)
/channels/{channel-id}/shows (shows of channel-id)
/channels/{channel-id}/shows?filter=on_now (you are filtering a result, so i guess it's better to use query string, as if you were doing a query) 
```

那么你想返回现在正在播放的内容，这不是频道的属性，而是本身的资源。那么如何实现呢？

```
/on_now/ (return a collection of on_now objects, which may be anything, channels, shows, whatever)
/on_now/?channel={channel-id} (this is a filter of the list by channel-id, you are just narrowing the list) 
```

所以不`/channels/{channel-id}/shows?filter=on_now` 一样`/on_now/?channel={channel-id}`吗？

实际上，**不**。

在第一个 uri 中，您将看到由 on_now 过滤的节目。在第二个中，您将获得按频道过滤的 on_nows（可以是任何表示形式，而不仅仅是节目）。

为什么我认为`on_now`应该被视为一种资源，为什么它很重要？

当您将此资源分开时，您现在可以拥有资源的不同表示形式。你也有更大的灵活性，没有碰撞。假设明天您还想在 on_now 中显示另一个不在任何频道上的“节目”，这很容易做到，在其他方法上它只需要在频道上。您还可以稍后按不同的条件过滤 on_now，因为它们是独立的对象。

你也可以这样做：

```
/on_now/{on_now_id} 
```

这将提供当前节目的详细信息，例如何时开始，何时结束以及一个位置，`/shows/{show-id}`以便您可以在它不再播放后稍后到达它。

然而，我认为最好的解决方案是将节目作为与频道无关的资源。但最重要的是，*我认为*您还应该问自己是否希望节目成为频道的基础……而要想到的提示是

> `I don't want to make individual call for each channel, the show-on-now data needs to be returned for all channels`

部分。

这让我认为节目不应该在`/channels/`路径内。

`/shows/?filter=on_now`那是因为如果您只返回节目，另一种方法将是。

你可以有：

```
/shows/?filters=on_now&channel=bbc 
```

我喜欢将资源视为我要返回的“东西”，而不是仅考虑关系的标准思维。图表中的底层非常适合属性，对“其他事物”的收集不太确定。

按照同样的例子，我宁愿有`/channels/{channel-id}/program`而不是`/channels/{channel-id}/shows`

# amazon-ec2 - 如何将文件和文件夹上传到 AWS EC2 实例？

> ID：10888775
> 
> 赞同：25
> 
> 时间：2012-06-04T21:41:22.660
> 
> 标签：amazon-ec2, amazon-web-services

我使用**SSH**连接到我的**Ubuntu 实例**。使用 SSH 我可以管理实例上的文件和文件夹，但是如何将文件和文件夹从本地机器上传到实例？

是否可以在不使用 SFTP 客户端的情况下直接从 SSH 会话中进行操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2021-03-29T12:12:30.727

您可以尝试[kitten](https://github.com/hoffa/kitten)实用程序，它是 boto3 的包装器。您可以轻松地上传/下载文件并在 EC2 服务器上或同时在多个服务器上运行命令。

```
kitten put -i ~/.ssh/key.pem cat.jpg /tmp [SERVER NAME][SERVER IP] 
```

服务器名称是例如 ubuntu 或 ec2-user 等。

这会将 cat.jpg 文件上传到服务器的 /tmp 目录

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-25T06:01:56.077

只是为 scp 命令添加更多细节（包括在 OSx 和大多数 linux/unix 中）：

```
scp -i myssh.pem local_file username@200.200.200.200:/home/username 
```

显然 - 将 pem 文件替换为用于 ssh 访问的文件。显然将“用户名”和“200.200.200..”替换为您的设置的有效值。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-06T16:06:33.223

如前所述，我使用了 WinSCP，它以“ec2-user”身份登录 - 然后确保通过 SSH 调整该用户的权限。例子：

```
chown -R ec2-user /path/to/files 
```

（首先以 root 用户身份进行身份验证。）

无论您需要通过 WinSCP 编辑什么文件夹或文件，都应允许对它们授予权限（否则在尝试在 WinSCP 中上传/编辑文件时您将收到权限被拒绝错误）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-04T21:46:34.280

您不能使用 ssh 复制文件。你可以使用 scp/sftp。

scp 如果你在 linux 上，[winscp](http://winscp.net/eng/index.php)如果你在 windows 上

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-03T20:03:45.467

你可以使用这个：

```
scp -i yourkeypair.pem source destination 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-08T03:59:01.373

这很好用

```
scp -r -i myssh.pem /local/directory remote_username@10.10.0.2:/remote/directory 
```

-r 递归

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-15T16:12:58.683

最简单的方法是从浏览器安装 webmin 并使用文件管理器（java 插件）。

//进入主文件夹

```
cd ~ 
```

//下载最新版本

```
wget http://prdownloads.sourceforge.net/webadmin/webmin-1.660-1.noarch.rpm 
```

//安装

```
sudo rpm -U webmin-1.660-1.noarch.rpm 
```

//修改root用户密码passwd

最后，在安全组中打开 10000 端口

然后，登录

```
https://server_name:10000 
```

使用用户：root 密码：what_you_set_before

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-05T05:57:23.463

您还可以安装和设置一个 FTP 服务器，这将允许您设置用户和目录供他们上传。话虽如此，我赞成上述方法，因为 scp/sftp 是理想的方法。

# javascript - How to prevent scrolling to the top after unhiding/hiding text?

> ID：10888787
> 
> 赞同：0
> 
> 时间：2012-06-04T21:43:21.700
> 
> 标签：javascript, jquery, html, css, mobile

There is an [old StackOverflow question](https://stackoverflow.com/questions/1907799/how-to-create-the-button-with-css) on how to unhide/hide text using +/- symbols.

[Cheeso](https://stackoverflow.com/users/48082/cheeso) posted a nice solution with some [sample code](http://jsbin.com/ikeca). It was just what I was looking for, although the original poster didn't agree. :-)

I'm using the code on a web site that is intended to be used on mobile devices. The only problem is that the page jumps back to the top of the screen whenever the +/- is tapped.

Is there anyway to get around that? Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:45:13.137

In your click event handler, return false.

```
$('a.selector').click(function() {
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T21:45:15.740

Here is the answer that [Cheeso](https://stackoverflow.com/users/48082/cheeso) provided to me in email. I am posting it here for the benefit of others who follow. This didn't quite work and I am in the process of figuring out why.

* * *

If you change this line $('div p a[href="#"]').click(function() { expando(this); });

to this:

$('div p a[href="#"]').click(function(ev) { ev.preventDefault(); expando(this); });

...I think it should stop scrolling to the top.

* * *

When a user clicks on a link that has a hash character, the browser is expected to scroll to the location on the page where the fragment marker is placed. Like a bookmark. For example, in this URL: [http://en.wikipedia.org/wiki/Causes_of_WWII#Militarism](http://en.wikipedia.org/wiki/Causes_of_WWII#Militarism) The fragment (bookmark) is #Militarism , and if you click that link, your browser will scroll to that section.

In the case of that sample I wrote, the hrefs are bare # characters, which implies an empty fragment. And I suppose the browser is scrolling to the default location, which (I guess) is "the top of the page".

To avoid this, just call ev.preventDefault() in the click handler. This is a jQuery trick that suppresses the normal handling of the click; in your case, it suppresses the part where the browser tries to scroll to a non-existent anchor.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T21:45:50.217

Implement [`event.preventDefault()`](http://api.jquery.com/event.preventDefault/) in the click handler.

```
$('a').click(function(e) {
    e.preventDefault();
    // more code here
}); 
```

# c# - 为什么在 WinForms 应用程序中使用 SaveFileDialogue 时出现 RPC 服务器错误？

> ID：10888791
> 
> 赞同：4
> 
> 时间：2012-06-04T21:43:34.243
> 
> 标签：c#, winforms, c#-4.0, savefiledialog, first-chance-exception

当我尝试在 WinForms 应用程序中使用 SaveFileDialogue 时出现错误。我一定遗漏了一些东西，因为错误没有意义（对我来说！）！

错误是：“TestProject.exe 中 0x000007fefc99cacd 的第一次机会异常：0x000006BA：RPC 服务器不可用。”

此行运行时发生错误：“if (SD.ShowDialog() == DialogResult.OK)”。

这是我的代码：

```
var SD = new SaveFileDialog();
SD.Filter = "PDF (*.pdf)|*.pdf|Show All Files (*.*)|*.*";
SD.FileName = "Untitled";
SD.Title = "Save As";
if (SD.ShowDialog() == DialogResult.OK)
{
// DO SOMETHING HERE
} 
```

编辑：我在本地保存文件，但是在用户甚至选择要保存的位置之前发生错误，它发生在我尝试显示对话框以供用户选择位置的地方！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:54:21.703

可能您在“异常调试”菜单中激活了一些标志。
尝试重置为默认配置去调试 - >异常 - >全部重置

# solr - 通过 SolrCell 来自 Tika 的没有元数据的文本内容

> ID：10888792
> 
> 赞同：4
> 
> 时间：2012-06-04T21:43:37.577
> 
> 标签：solr, apache-tika, solr-cell

使用 Solr 3.6 和 ExtractionRequestHandler（又名 Tika），是否可以*仅*将（PDF 的）文本内容映射到减去元数据的字段？不幸的是，Tika 生成的“内容”字段包含与文档的文本内容混在一起的所有元数据。

我想提供一些突出显示内容的片段，并且内容字段中的主题元数据会扭曲突出显示结果。

更新：由 Solr 索引的 Tika 输出的屏幕截图。突出显示的部分是作为文本块添加到 PDF 内容的元数据块。

![tika 输出的 solr 屏幕截图](../Images/cc4d4dc7fce8a46580fc3a5a84f88c11.png)

solrconfig.xml 中的 ExtractingRequestHandler：

```
<requestHandler name="/update/extract" startup="lazy" class="solr.extraction.ExtractingRequestHandler">
    <lst name="defaults">
    <str name="lowernames">true</str>
    <str name="uprefix">ignored_</str>
    </lst>
</requestHandler> 
```

Schema.xml 字段。注意“content”直接接收 Tika 的内容输出。当文档发布到处理程序时，“页面”和“集合”字段设置为文字值。

```
<field name="id" type="string" indexed="true" stored="true" required="true"/>
<field name="title" type="text_general" indexed="true" stored="true" multiValued="true"/>
<field name="subject" type="text_general" indexed="true" stored="true" multiValued="true"/>
<field name="content" type="text_general" indexed="true" stored="true" multiValued="true"/>
<field name="collection" type="text_general" indexed="true" stored="true"/>
<field name="page" type="tint" indexed="true" stored="true"/>
<field name="timestamp" type="date" indexed="true" stored="true" default="NOW" multiValued="false"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-20T14:02:08.450

由于所有其他答案完全无关紧要，我将发布我的：

我遇到了与 OP 描述的完全相同的问题，（**Solr 4.3.0**，自定义配置，自定义架构等。我不是新手或其他东西，并且非常了解 Solr 内部结构）

这**是**我的 ERH 配置：

```
 <requestHandler name="/update/extract" 
                  startup="lazy"
                  class="solr.extraction.ExtractingRequestHandler" >
    <lst name="defaults">
      <str name="uprefix">ignored_</str>
      <str name="fmap.a">ignored_</str>
      <str name="fmap.div">ignored_</str>
      <str name="fmap.content">text</str>
      <str name="captureAttr">false</str>

      <str name="lowernames">true</str>
      <bool name="ignoreTikaException">true</bool>
    </lst>
  </requestHandler> 
```

它基本上被配置为忽略除内容之外的所有内容（我相信这对很多人来说是合理的）。

仔细调查后发现，

```
<str name="captureAttr">false</str> 
```

是什么导致了OP的问题。默认情况下它是打开的，但我把它关闭了，因为我不需要它。那是我的错误。我不知道为什么，但它会导致 Solr 将提取的属性`fmap.content`与提取的文本一起放入字段中。

所以解决方案是重新打开它。 **最终ERH**：

```
 <requestHandler name="/update/extract" 
                  startup="lazy"
                  class="solr.extraction.ExtractingRequestHandler" >
    <lst name="defaults">
      <str name="uprefix">ignored_</str>
      <str name="fmap.a">ignored_</str>
      <str name="fmap.div">ignored_</str>
      <str name="fmap.content">text</str>
      <str name="captureAttr">true</str>

      <str name="lowernames">true</str>
      <bool name="ignoreTikaException">true</bool>
    </lst>
  </requestHandler> 
```

现在，仅将提取的文本放入`fmap.content`字段。

不幸的是，我没有找到任何可以解释这一点的文档。错误或只是愚蠢的行为

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T07:09:33.813

带有 Solr 的 Tika 为内容和元数据生成不同的字段。

如果您使用标准 ExtractingRequestHandler -

```
 <requestHandler name="/update/extract" 
                  startup="lazy"
                  class="solr.extraction.ExtractingRequestHandler" >
    <lst name="defaults">
      <!-- All the main content goes into "text"... if you need to return
           the extracted text or do highlighting, use a stored field. -->
      <str name="fmap.content">text</str>
      <str name="lowernames">true</str>
      <str name="uprefix">ignored_</str>

      <!-- capture link hrefs but ignore div attributes -->
      <str name="captureAttr">true</str>
      <str name="fmap.a">links</str>
      <str name="fmap.div">ignored_</str>
    </lst>   
</requestHandler> 
```

字段映射内容设置为文本字段，它应该只是您的 pdf 的内容。

可以通过修改 schema.xml 轻松检查其他元数据字段。

将已存储字段类型标记为真

```
<fieldtype name="ignored" stored="true" indexed="false" multiValued="true" class="solr.StrField" /> 
```

捕获所有字段 -

```
 <dynamicField name="*" type="ignored" multiValued="true" /> 
```

Tika 为元数据添加了许多字段，内容被单独设置，例如当使用 ppt 提供提取处理程序时的响应。

```
<doc>
    <arr name="application_name">
        <str>Microsoft PowerPoint</str>
    </arr>
    <str name="category">POT - US</str>
    <str name="comments">version 1.1</str>
    <arr name="company">
        <str>
        </str>
    </arr>
    <arr name="content_type">
        <str>application/vnd.ms-powerpoint</str>
    </arr>
    <arr name="creation_date">
        <str>2000-03-15T16:57:27Z</str>
    </arr>
    <arr name="custom_delivery_date">
        <str>
        </str>
    </arr>
    <arr name="custom_docid">
        <str>
        </str>
    </arr>
    <arr name="custom_docidinslide">
        <str>true</str>
    </arr>
    <arr name="custom_docidintitle">
        <str>true</str>
    </arr>
    <arr name="custom_docidposition">
        <str>0</str>
    </arr>
    <arr name="custom_event">
        <str>
        </str>
    </arr>
    <arr name="custom_final">
        <str>false</str>
    </arr>
    <arr name="custom_mckpapersize">
        <str>US</str>
    </arr>
    <arr name="custom_notespagelayout">
        <str>Lower</str>
    </arr>
    <arr name="custom_title">
        <str>Lower Universal Template US</str>
    </arr>
    <arr name="custom_universal_objects">
        <str>true</str>
    </arr>
    <arr name="edit_time">
        <str>284587970000</str>
    </arr>
    <str name="id">101</str>
    <arr name="ignored_">
        <str>slideShow</str>
        <str>slide</str>
        <str>slide</str>
        <str>slideNotes</str>
    </arr>
    <str name="keywords">test</str>
    <arr name="last_author">
        <str>Corporate</str>
    </arr>
    <arr name="last_printed">
        <str>2000-03-17T20:28:57Z</str>
    </arr>
    <arr name="last_save_date">
        <str>2009-03-24T16:52:26Z</str>
    </arr>
    <arr name="manager">
        <str>
        </str>
    </arr>
    <arr name="meta">
        <str>stream_source_info</str>
        <str>file:/C:/temp/nuggets/100000.ppt</str>
        <str>Last-Author</str>
        <str>Corporate</str>
        <str>Slide-Count</str>
        <str>2</str>
        <str>custom:DocIDPosition</str>
        <str>0</str>
        <str>Application-Name</str>
        <str>Microsoft PowerPoint</str>
        <str>custom:Delivery Date</str>
        <str>
        </str>
        <str>custom:Event</str>
        <str>
        </str>
        <str>Edit-Time</str>
        <str>284587970000</str>
        <str>Word-Count</str>
        <str>120</str>
        <str>Creation-Date</str>
        <str>2000-03-15T16:57:27Z</str>
        <str>stream_size</str>
        <str>181248</str>
        <str>Manager</str>
        <str>
        </str>
        <str>stream_name</str>
        <str>100000.ppt</str>
        <str>Company</str>
        <str>
        </str>
        <str>Keywords</str>
        <str>test</str>
        <str>Last-Save-Date</str>
        <str>2009-03-24T16:52:26Z</str>
        <str>Revision-Number</str>
        <str>91</str>
        <str>Last-Printed</str>
        <str>2000-03-17T20:28:57Z</str>
        <str>Comments</str>
        <str>version 1.1</str>
        <str>Template</str>
        <str>
        </str>
        <str>custom:PaperSize</str>
        <str>US</str>
        <str>custom:DocID</str>
        <str>
        </str>
        <str>xmpTPg:NPages</str>
        <str>2</str>
        <str>custom:NotesPageLayout</str>
        <str>Lower</str>
        <str>custom:DocIDinSlide</str>
        <str>true</str>
        <str>Category</str>
        <str>POT - US</str>
        <str>custom:Universal Objects</str>
        <str>true</str>
        <str>custom:Final</str>
        <str>false</str>
        <str>custom:DocIDinTitle</str>
        <str>true</str>
        <str>Content-Type</str>
        <str>application/vnd.ms-powerpoint</str>
        <str>custom:Title</str>
        <str>test</str>
    </arr>
    <arr name="p">
        <str>slide-content</str>
        <str>slide-content</str>
    </arr>
    <arr name="revision_number">
        <str>91</str>
    </arr>
    <arr name="slide_count">
        <str>2</str>
    </arr>
    <arr name="stream_name">
        <str>100000.ppt</str>
    </arr>
    <arr name="stream_size">
        <str>181248</str>
    </arr>
    <arr name="stream_source_info">
        <str>file:/C:/temp/test/100000.ppt</str>
    </arr>
    <arr name="template">
        <str>
        </str>
    </arr>
    <!-- Content field -->
    <arr name="text">
        <str>test Test test test test tes t</str>
    </arr>
    <arr name="title">
        <str>test</str>
    </arr>
    <arr name="word_count">
        <str>120</str>
    </arr>
    <arr name="xmptpg_npages">
        <str>2</str>
    </arr>
</doc> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T16:50:20.850

我不再有我上面描述的问题。自从提出这个问题以来，我已经更新到 Solr 4.0 alpha 并从 4.0a 包附带的 Solr Cell 示例中重新创建了 schema.xml。我怀疑我的原始模式正在将元数据字段的内容复制到文本字段，所以这很可能是我自己的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T17:43:27.177

在定义请求处理程序的*solrconfig.xml*中，在下面添加此行

```
<str name="fmap.title">ignored_</str> 
```

这告诉 Tika 简单地忽略它发现嵌入在 PDF 中的标题属性（或您想要忽略的任何属性）。

# math - vectorial ODE in mathematica

> ID：10888796
> 
> 赞同：2
> 
> 时间：2012-06-04T21:43:47.833
> 
> 标签：math, wolfram-mathematica, maxima

I want to solve the following equation in mathematica :

```
DSolve[{X'[t] == A.X[t], X[0] == ( {{0},{0}} )}, X[t], t] 
```

It is a system of 2 ODEs coupled by the matrix `A`, that I don't want to put in the form `{{a,b},{c,d}}` in order to have the output as a function of matrix exponential.

Mathematica understands that but gives a solution strangely expresed as :

```
 {{X[t] -> 
     InverseFunction[Dot, 2, 2][A, 
         E^(t A.1)
         InverseFunction[InverseFunction[Dot, 2, 2], 2, 2][A, 0]]}} 
```

Where it indeed uses a matrix exponential, but also relies on a strange notation InverseFunction [...]

My question is how to get rid of this InverseFunction notation to have a more readable expression. Do I for example have a manner to postulate that `A` is a `(2,2)` matrix, invertible, with inverse `B`?

If I can hope a better result with maxima, please advise. Thanks a lot for help

# php - How to use mysql to find a field name of a record?

> ID：10888797
> 
> 赞同：1
> 
> 时间：2012-06-04T21:43:48.870
> 
> 标签：php, mysql, pdo

PDO sql codes :

```
while($r = $q->fetch(PDO::FETCH_ASSOC)){
    $gg = join('</td><td>', $r);
    echo "<tr><td>" . $no_count . "</td><td>" . $gg . "</td></tr>";
    $no_count = $no_count + 1;      
} 
```

variable `$r` is the record, how can I echo the field name of `$r`?

Let's say `$r` carry records from 2 different fields "product" and "price". The value of `$r` is "apple", "130". How can I add "usd" into "130"?

I need something like.... `if $field_name == "$r['price']" { $r = join('usd', $r); };`

Thanks to Mike B, I almost there :

```
while($r = $q->fetch(PDO::FETCH_ASSOC)){
            foreach ($r as $name => $value) {
                if ($name == "price"){
                     $r = "usd" . $value; // this line got problem, how to change the value in an array variable $r?
                }
            }

            $gg = join('</td><td>', $r);
            echo "<tr><td>" . $no_count . "</td><td>" . $gg . "</td></tr>";
            $no_count = $no_count + 1;              
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:47:51.380

`array_keys($r)`由于您正在获取关联数组，因此将为您提供表中的字段列表。

您还可以循环遍历`$r`：

```
foreach ($r as $name => $value) {
  print "$name: " . $value;
} 
```

## 更新

// 这行有问题，如何改变数组变量 $r 中的值？

```
$r[$name] = 'usd' . $value; 
```

对原始名称进行编辑。由于您在`$name`foreach 循环中的变量中有键，因此您可以直接设置它。

# dsl - StringTemplate and Xtext

> ID：10888799
> 
> 赞同：0
> 
> 时间：2012-06-04T21:43:51.757
> 
> 标签：dsl, antlr3, xtext, stringtemplate-4

In my current work, I have written code generator using String Template without thinking about Parser ( I am instantiating Template files using direct Java Object). and code generator generator generates nice Java code.

Now, I have started to write Parser. B'coz of some nice editor features of xText, I am thinking to write parser in Xtext.

My question is "Is it possible to use code generator ( written using StringTemplate ) and Parse (written in Xtext) in same project?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T07:55:58.790

是的，这是可能的。Xtext 为解析的文件提供了一个类型化的 AST，您可以轻松地将它们传递给您的代码生成器（直接，如果它们满足相同的合同/接口，或者通过将它们转换为预期的结构来间接传递）。Xtext 不会对您希望如何使用解析的信息施加任何限制。

# c# - C# .Contains() to check if it is a URL

> ID：10888807
> 
> 赞同：4
> 
> 时间：2012-06-04T21:44:42.583
> 
> 标签：c#, string

I don't like to post such a general question, but I am not seeing a lot on the topic, so I was wondering if anyone has done something like this, and whether or not this is a good implementation to go with.

**EDIT Added whole method**

Here is the code

```
 protected void gridViewAttachments_HtmlDataCellPrepared(object sender, DevExpress.Web.ASPxGridView.ASPxGridViewTableDataCellEventArgs e)
    {
        //if (e.DataColumn.FieldName == "AttachmentName" && e.CellValue.ToString().ToLower().Contains("://"))
        //    attachmentUrl = e.CellValue.ToString();
        //if (e.DataColumn.FieldName == "AttachmentName" && !e.CellValue.ToString().ToLower().Contains("://"))
        //    attachmentUrl = "http://" + e.CellValue;
        Uri targetUri;
        if (Uri.TryCreate("http://" + e.CellValue, UriKind.RelativeOrAbsolute, out targetUri))
        {
            attachmentUrl = new Uri("http://" + e.CellValue);
        }

        if (e.DataColumn is DevExpress.Web.ASPxGridView.GridViewDataHyperLinkColumn)
        {
            if (attachmentUrl.ToString() == "")
            {
                DevExpress.Web.ASPxEditors.Internal.HyperLinkDisplayControl hyperlink =
                    (e.Cell.Controls[0] as DevExpress.Web.ASPxEditors.Internal.HyperLinkDisplayControl);
                hyperlink.Target = "_blank";
                hyperlink.NavigateUrl = ApplicationUrl + "/Attachment.ashx?key=" + hyperlink.Text;
                hyperlink.Text = GetWords("GENERAL.VIEW_ATTACHMENT");
            }
            else
            {
                DevExpress.Web.ASPxEditors.Internal.HyperLinkDisplayControl hyperlink = (e.Cell.Controls[0] as DevExpress.Web.ASPxEditors.Internal.HyperLinkDisplayControl);
                hyperlink.Target = "_blank";

                hyperlink.NavigateUrl = attachmentUrl.ToString();
                hyperlink.Text = "Go to URL";
            }
        }
    } 
```

Pretty basic, and it works. My question is this: Is checking if the string contains :// enough to check whether or not it is a url? The reason I have to check is it is pulling the data from table and some of the fields in the table are filenames (mydoc.docx) in which case I will do something else with them. Is there another more robust check I can do in C#?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-04T21:45:59.453

You could use [`Uri.TryCreate`](http://msdn.microsoft.com/en-us/library/ms131572.aspx) instead to see if creation of the URL is successful:

```
Uri targetUri;
if (Uri.TryCreate("http://" + e.CellValue, UriKind.RelativeOrAbsolute, out targetUri))
{
    //success
    attachmentUrl = "http://" + e.CellValue;
} 
```

# .net - Linq to SQL in ASP.NET - keep DB connections open

> ID：10888808
> 
> 赞同：1
> 
> 时间：2012-06-04T21:44:51.467
> 
> 标签：.net, linq-to-sql, sqlconnection

I know that it's not a good practice to keep a DataContext alive and re-use it, so I wrapped it in a Using statement.

Also, as far as I know, DataContext opens a connection when it's being initialized, and closes the connection when it's disposed.

What I'm looking to accomplish here, is keeping a separate connection open for each currently logged in user (and close the connection manually when the user logs out).

Multithreading is not an issue, because I'm using locks.

I keep SQLConnections and pass them to the DataContext constructor. This sort of works. But the problem is that DataContext automatically closes the connection when it's disposed.

Is it somehow possible to force the DataContext to not close the connection it uses?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:10:04.537

一般来说，如果您尝试在记录中执行某种循环，并且`DataContext`每次都创建一个（并且，通过扩展，一个 SQL 连接），您的痛点就会出现。只要你不这样做，你就不应该有任何重大的性能问题。

在我看来，保持 SQL 连接打开以便您可以将其传递给 DataContext 的概念是过早的优化。SQL 连接并没有*那么*昂贵，`DataContext`对象也没有。

通常，`DataContext`对象的生命周期应该与关联的 Repository 对象的生命周期相同。

**例子**

```
public class CustomerRepository
{
    private MyDatabaseDataContext dataContext;

    public CustomerRepository()
    {
        dataContext = new MyDatabaseDataContext();
    }

    public Customer GetCustomer(int id)
    {
        return dataContext.Customers.FirstOrDefault(x => x.id == id);
    }

    public IQueryable<Customer> CustomersByRep(int repID)
    {
        return dataContext.Customers.Where(x => x.repID == repID);
    }
} 
```

**另请参阅**
[ASP.NET MVC 技巧 #34 – 处理您的 DataContext（或不处理）](http://stephenwalther.com/blog/archive/2008/08/20/asp-net-mvc-tip-34-dispose-of-your-datacontext-or-don-t.aspx)

# python - Cannot connect to port 8080 when using the python module for Stanford NER

> ID：10888809
> 
> 赞同：0
> 
> 时间：2012-06-04T21:44:52.763
> 
> 标签：python

I am a complete rookie at this (this might be the reason why I'm stuck), but I have spent 2 days trying to find an answer for my problem with no luck whatsoever. Here's the deal: I have downloaded the python module for Stanford NER, because I need to extract entities from text. In the readme file there was a suggestion on how it should be used, which was the following:

```
import ner

tagger = ner.HttpNER(host = 'localhost', port = 8080)
tagger.get_entities("University of California is located in California, United States") 
```

The problem is that I have little (almost zero) experience with python and when executing it i get the following error message:
[Errno 10061] No connection could be made because the target machine actively refused it

I don't know why I get this message, since port 8080 is not used or blocked. I have even tried to disable the firewall and the antivirus, but nothing changed.

I assume my question is kind of a newbie question, but I have searched for almost two days to figure out what is wrong.

Thank you in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:46:30.330

It means nothing is listening on port 8080 on localhost.

# codeigniter - Invalid image when using force download in codeigniter

> ID：10888810
> 
> 赞同：-1
> 
> 时间：2012-06-04T21:44:53.013
> 
> 标签：codeigniter

I use download helper in codeigneter,, when i download file jpeg and open it,, it becomes invalid...

What should i do..

Thank you...

Controller

```
function downloadSuratElektronik($file)
{
    $this->load->helper('download');
    $file_data = file_get_contents(base_url()."data/".$file);
    $file_name = $file;
    force_download($file_name, $file_data);
} 
```

Model

```
 function getSuratKeluar(){
    $data = $this->db->get('surat_keluar');
    if ($data->num_rows() > 0){
        foreach ($data->result() as $row){
            $hasil[]=$row;
        }
        return $hasil;
    } 
```

}

View

```
 <table>
    <tr>
    <td>File Upload</td>
    </tr>
    <?php
    foreach ($hasil as $data) :
    ?>
    <tr>
    <td><a href="<?=base_url();?>main/downloadSuratElektronik/<?=$data->link_upload?>">/<?=$data->link_upload?></a></td>
    </tr>
    <?php endforeach; ?>
    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T21:37:55.567

我遇到了同样的问题，我用其他方法修复了它......如果你仍然想要它

```
$file_name = "picture.jpg" 
$file_path = "your path" 
header('Content-Type: application/octet-stream'); 
header("Content-Disposition: attachment; filename=$file_name");
ob_clean(); flush(); 
readfile($file_path); 
```

# regex - Regex doesn't recognize underscore as special character

> ID：10888814
> 
> 赞同：5
> 
> 时间：2012-06-04T21:45:09.470
> 
> 标签：regex

```
/(?=^.{8,}$)(?=.*[_!@#$%^&*-])(?=.*\d)(?=.*\W+)(?![.\n])(?=.*[a-z])(?=.*[A-Z]).*$/ 
```

I'm trying to make a regex for password validation such that the password must be at least 8 chars and include one uppercase, one lowercase, one number, and one special char. It works fine except it won't recognize the underscore (_) as a special character. I.e., Pa$$w0rd matches, but Pass_w0rd doesn't. Thoughts?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:47:49.617

这部分正则表达式似乎正在寻找特殊字符：

```
(?=.*[!@#$%^&*-]) 
```

请注意，字符类不包含下划线，请尝试将其更改为以下内容：

```
(?=.*[_!@#$%^&*-]) 
```

您还需要修改或删除这部分正则表达式：

```
(?=.*\W+) 
```

`\W`等同于`[^a-zA-Z0-9_]`，因此如果下划线是您唯一的特殊字符，则这部分正则表达式将导致它失败。相反，将其更改为以下内容（或删除它，这是多余的，因为您之前已经检查过特殊字符）：

```
(?=.*[^\w_]) 
```

完整的正则表达式：

```
/(?=^.{8,}$)(?=.*[_!@#$%^&*-])(?=.*\d)(?=.*[^\w_])(?![.\n])(?=.*[a-z])(?=.*[A-Z]).*$/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-01T09:46:25.700

这个在这里也有效。它通过排除字母数字字符和空格来定义特殊字符，因此它包括下划线：

```
(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[\d])(?=.*?[^\sa-zA-Z0-9]).{8,} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T21:50:57.823

`\W`问题是，根据定义，唯一可能满足 的东西是 以外的东西`[a-zA-Z0-9_]`。下划线与 , 不匹配`\W`，在 中`Pass_w0rd`，也没有其他匹配项。

我怀疑同时拥有您的特殊字符的特定列表和*是*`\W`矫枉过正。选择一个，你可能会更快乐。我还建议将整个事情分成几个单独的测试，以获得更好的可维护性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T21:52:39.950

一个更简单的适合您的正则表达式是：

```
/(?=.*[_!@#$%^&*-])(?=.*\d)(?!.*[.\n])(?=.*[a-z])(?=.*[A-Z])^.{8,}$/ 
```

您的原始正则表达式中几乎没有错误，例如：

*   您不需要使用前瞻来确保输入中有 8 个字符
*   `[.\n]`缺少负前瞻`.*`
*   `(?=.*\W+)`是多余的，可能没有任何目的

# javascript - 如何禁用输入字段的默认最大长度？

> ID：10888817
> 
> 赞同：2
> 
> 时间：2012-06-04T21:45:17.880
> 
> 标签：javascript, html, google-chrome

我刚刚发现 Chrome 似乎对 html 中的输入字段有一个默认的 maxlength 设置。我只能插入一个长度为 8649 的字符串。

有没有办法增加这个最大长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T03:37:38.963

根据我的测试，Chrome 没有默认值`maxlength`，我可以在一个字段中输入 10,000 个字符`input`（在 Chrome 20 beta 上，Win 7 上）。您可能已经使用 GET 方法对实际的表单提交进行了测试，在这种情况下，表单数据的总长度可能存在依赖于浏览器和服务器的限制。

在 Chrome 上检查 DOM，一个`input`元素没有默认值`maxlength`，但它有`maxLength`，值为 524288。

# c# - Initializing a Nullable Type with Initobj Opcode in IL

> ID：10888820
> 
> 赞同：4
> 
> 时间：2012-06-04T21:45:48.177
> 
> 标签：c#, .net, struct, nullable, il

Why doesn't C# compiler simply call default implicit parameterless `.ctor` instead of `intobj` for `null` assigned nullable value types?

Lets say we have such as code:

```
Nullable<int> ex1 = new Nullable<int>();
Nullable<int> ex2 = null;
Nullable<int> ex3 = new Nullable<int>(10); 
```

The IL output for these two lines look like this:

![enter image description here](../Images/42387b2121c603fd4cc726e85b542816.png)

It only call `.ctor` for last statement and why cannot we have the an instance for two first statements with zeroed fields?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T01:51:40.937

> 为什么 C# 编译器不简单地调用默认的隐式无参数`.ctor`而不是`intobj`为 null 分配的可为空值类型？

因为`Nullable<T>`（或任何其他值类型）实际上没有无参数构造函数。您可以通过在反编译器中查看它或使用反射（例如`typeof(Nullable<>).GetConstructors()`）来验证它。

如果您在 C# 中`new T()`为某个值类型编写`T`代码，它看起来会调用无参数构造函数（C# 规范也将其称为构造函数），但实际情况并非如此，因为`.ctor`值类型上没有无参数方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:03:41.990

> 为什么 C# 编译器不简单地调用默认的隐式无参数`.ctor`

因为像这样的[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)[`System.Nullable<T>`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)不能包含显式的无参数构造函数；这是定义值类型的要求。因为值类型不能具有显式的无参数构造函数，`initobj`所以它是 CIL 中默认构造值类型的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:04:38.593

因为根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.initobj.aspx)`initobj`，该指令初始化了一个值类型并将其字段清零或清零。在此之上调用默认构造函数*方法不会提供额外的价值。*您的最后一个示例传入一个值，因此称为一个非常具体的构造函数。

# haskell - 反应性香蕉节流事件

> ID：10888826
> 
> 赞同：7
> 
> 时间：2012-06-04T21:46:13.600
> 
> 标签：haskell, reactive-programming, frp

我想在反应香蕉中实现某种类型的事件限制。它应该这样工作，如果从最后一个通过的事件到达的时间少于 delta 秒，则不会让事件通过。如果它没有通过，那么它会被存储并在最后一次触发事件的 delta 秒后触发。

下面是一个为时间戳数字列表实现此功能的程序。有没有可能把它翻译成 reactive-banana ？

另外，在反应香蕉中，我如何在其他事件出现后 x 秒触发一个事件？

```
模块主要在哪里

导入数据列表

-- 1 秒节流
-- 逻辑是在输出最后一个值后 1 秒之前永远不会输出一个值。

主要 :: IO()
主要 = 打印 $ 测试 [ (0.0, 1.0), (1.1, 2.0), (1.5,3.0), (1.7,4.0), (2.2, 5.0) ]
--应该输出 [ (0.0, 1.0), (1.1, 2.0), (2.1,4.0), (3.1, 5.0) ]

测试 :: [(Double,Double)] -> [(Double,Double)]
测试列表 = gv (concat xs)
       在哪里
               (v, xs) = mapAccumL f (-50,Nothing) 列表
               g (t, Just x) ys = ys ++ [ (t+1,x) ]
               g _ ys = ys
               f (lasttime, Just holdvalue) (t,x) = if t > (lasttime+1) then
                               如果 t > (lasttime + 2) 那么
                                       ( (t, Nothing), [ (lasttime+1,holdvalue), (t,x)] )
                               else ( (lasttime+1, Just x) , [ (lasttime+1,holdvalue) ] )
                       别的        
                               （（上次，只是 x），[]）
               f (lasttime, Nothing) (t,x) = 如果 t > (lasttime+1) 那么
                        ( (t,Nothing) , [ (t, x ) ] )
                        else ( (lasttime, Just x), [] )

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:35:48.817

从 reactive-banana-0.6 开始，绝对可以实现您想要的功能，但它有点复杂。

基本上，您已经使用 wxHaskell 之类的外部框架来创建一个计时器，然后您可以使用它来安排事件。Wave.hs示例演示了如何做到这一点[。](https://github.com/HeinrichApfelmus/reactive-banana/blob/master/reactive-banana-wx/src/Wave.hs)

目前，我选择不在响应式香蕉库本身中包含时间概念。原因很简单，不同的外部框架具有不同分辨率或质量的计时器，没有一种尺寸适合所有情况。

我确实打算向库本身添加处理时间和计时器的通用帮助函数，但我仍然需要找到一种好方法让它在不同的计时器上通用，并弄清楚我可以提供哪些保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:28:22.497

好的，我设法实现了我在问题中描述的内容。我不太高兴需要 IO 来通过反应控制计时器。我想知道是否可以使用带有签名的节流阀：：Event ta -> Int -> Event ta ...

ps：我是 Haskell 的新手，所以代码可能会更紧凑或更优雅。

```
{-----------------------------------------------------------------------------

------------------------------------------------------------------------------}
{-# LANGUAGE ScopedTypeVariables #-} -- allows "forall t. NetworkDescription t"

import Graphics.UI.WX hiding (Event)
import Reactive.Banana
import Reactive.Banana.WX
import Data.Time

{-----------------------------------------------------------------------------
    Main
------------------------------------------------------------------------------}

data ThrottledValue a = FireStoredValue a | FireNowAndStartTimer a| HoldIt a | Stopped deriving Show
data ThrottledEvent a = TimerEvent | RealEvent a deriving Show

main = start $ do
    f   <- frame [text := "Countercesss"]
    sl1  <- hslider f False 0 100 []
    sl2  <- hslider f False 0 100 []
    set f [ layout := column 0 [widget sl1, widget sl2] ]
    t <- timer f []
    set t [ enabled := False ] 
    let networkDescription :: forall t. NetworkDescription t ()
        networkDescription = do
        slEv <- event0 sl1 command
        tick <- event0 t command 
        slB <- behavior sl1 selection
        let (throttledEv, reactimates) = throttle (slB <@ slEv) tick t 100
        reactimates
        reactimate $ fmap (\x ->  set sl2 [selection := x]) throttledEv       
    net <- compile networkDescription
    actuate net            

throttle::Event t a -> Event t () -> Timer -> Int -> (Event t a, NetworkDescription t () )    
throttle ev tick timer dt = (throttledEv, reactimates)
        where   
                all = union (fmap (\x-> RealEvent x) ev) (fmap (\x -> TimerEvent) tick)
                result = accumE Stopped $ fmap h all
                        where
                        h (RealEvent x) Stopped = FireNowAndStartTimer x
                        h TimerEvent Stopped = Stopped
                        h (RealEvent x) (FireNowAndStartTimer _) = HoldIt x
                        h TimerEvent (FireNowAndStartTimer _) = Stopped
                        h (RealEvent x) (HoldIt _) = HoldIt x
                        h (TimerEvent) (HoldIt y) = FireStoredValue y
                        h (RealEvent x) (FireStoredValue _) = HoldIt x
                        h (TimerEvent) (FireStoredValue _) = Stopped          
                start (FireStoredValue a) = Just $ resetTimer timer dt
                start (FireNowAndStartTimer a) = Just $ resetTimer timer dt
                start _ = Nothing  
                stop Stopped = Just $ stopTimer timer
                stop _ = Nothing  
                reactimates = do
                        reactimate $ filterJust $ fmap stop result   
                        reactimate $ filterJust $ fmap start result
                filterFired (FireStoredValue a) = Just a
                filterFired (FireNowAndStartTimer a) = Just a
                filterFired _ = Nothing
                throttledEv = filterJust $ fmap filterFired result                 

startTimer t dt = set t [ enabled := True, interval := dt ]
stopTimer t = set t [ enabled := False ]
resetTimer t dt = stopTimer t >> startTimer t dt 
```

# javascript - 通过 CAS 登录保留 URL 片段

> ID：10888827
> 
> 赞同：1
> 
> 时间：2012-06-04T21:46:30.367
> 
> 标签：javascript, cas, yui2

我维护一个单页应用程序，它使用 YUI 2.8 历史模块在 URL 片段中保留本地选项。我最近将其置于 CAS 身份验证之后，我发现该片段在 CAS 身份验证期间丢失了。它保留在登录 URL 中，但在重定向回应用程序页面时不保留。会话超时后也是如此，因此用户在重新身份验证后会回到默认选项。

通过 CAS 往返保留片段（或底层 javascript 状态）的任何建议策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T16:34:51.060

您可以将其存储在 cookie 中`sessionStorage`，或者仅作为 的值（`window.name`如果没有安全隐患）：

```
//Cookie
document.cookie = "fragID=" + window.location.hash + ";path=/";
//Session Storage
window.sessionStorage.setItem("fragID",window.location.hash);
//Window
window.name = window.location.hash 
```

**参考**

*   [URL 片段和重定向 – IEInternals](https://blogs.msdn.microsoft.com/ieinternals/2011/05/16/url-fragments-and-redirects/)

# firefox - How to show a menu after clicking on the widget icon?

> ID：10888829
> 
> 赞同：3
> 
> 时间：2012-06-04T21:46:31.653
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

I am using firefox addon builder (Addon kit 1.7) and I wonder to know if it's possible to show a simple menu like the context menu of firefox just after clicking on the widget icon. I need few hints. Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T18:42:27.210

我设法使用 Yaelle Borghini 的 MenuPopup 包使其工作，并在 Addon Builder 网站上上传了一个[简单的示例。](https://builder.addons.mozilla.org/addon/1059945/latest)

您将不得不扩展 Yaelle 的代码以支持对菜单项的动态修改，因为它目前还没有完全内置（尽管添加它应该不会太难）。

这是Mozilla 论坛上关于如何使用 Addon SDK 显示菜单的讨论，这让我开始了[。](https://forums.mozilla.org/addons/viewtopic.php?p=17129&sid=5aa25f0466f27d8fd2ce0fe6c8b0ff4c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:33:14.103

现在唯一的选择是将面板连接到小部件并使用 html 将菜单项添加到面板。

# python - 校正图像上的颜色

> ID：10888836
> 
> 赞同：0
> 
> 时间：2012-06-04T21:47:01.007
> 
> 标签：python, image-processing, colors, python-imaging-library

我有一张拍摄的图像并应用了拜耳滤镜。我正在尝试校正颜色，因为根据我们应用的过滤器（例如 BG 2 RGB），它会出现色调，无论是黄色、蓝色、绿色、粉红色等......我正在使用 python 图像库尝试并修复图像。

我已经拍摄了可见光谱的图像，并且可以通过乘以正确的像素权重来使一种或两种颜色正确，然后其他颜色消失。例如，我可以让白色看起来很棒，然后蓝色变成粉红色。

除了修改拜耳过滤器之外，还有什么办法可以处理这个图像，希望在 python 中使用 PIL 来修复这种颜色不平衡。

谢谢！

# python - 在 django 中使用 dict_cursor

> ID：10888844
> 
> 赞同：22
> 
> 时间：2012-06-04T21:47:51.753
> 
> 标签：python, django

要在 django 中获取光标，我会这样做：

```
from django.db import connection
cursor = connection.cursor() 
```

我如何在 django 中获得一个 dict 光标，相当于 -

```
import MySQLdb
connection = (establish connection)
dict_cursor = connection.cursor(MySQLdb.cursors.DictCursor) 
```

有没有办法在 django 中做到这一点？当我尝试时，`cursor = connection.cursor(MySQLdb.cursors.DictCursor)`我得到了一个`Exception Value: cursor() takes exactly 1 argument (2 given)`. 还是我需要直接连接python-mysql驱动？

django 文档建议使用`dictfetchall`：

```
def dictfetchall(cursor):
    "Returns all rows from a cursor as a dict"
    desc = cursor.description
    return [
        dict(zip([col[0] for col in desc], row))
        for row in cursor.fetchall()
    ] 
```

使用它和创建 dict_cursor 之间有性能差异吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-12T14:35:14.240

不，Django 中没有这样的支持`DictCursor`。但是你可以为你写一个小函数。请参阅文档：[直接执行自定义 SQL](https://docs.djangoproject.com/en/3.0/topics/db/sql/#executing-custom-sql-directly)：

```
def dictfetchall(cursor): 
    "Returns all rows from a cursor as a dict" 
    desc = cursor.description 
    return [
            dict(zip([col[0] for col in desc], row)) 
            for row in cursor.fetchall() 
    ]

>>> cursor.execute("SELECT id, parent_id from test LIMIT 2");
>>> dictfetchall(cursor)
[{'parent_id': None, 'id': 54360982L}, {'parent_id': None, 'id': 54360880L}] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-02-17T18:13:30.407

至少用 Postgres 轻松完成，我确信 mysql 有类似的（Django 1.11）

```
from django.db import connections
from psycopg2.extras import NamedTupleCursor

def scan_tables(app):
    conn = connections['default']
    conn.ensure_connection()
    with conn.connection.cursor(cursor_factory=NamedTupleCursor) as cursor:
        cursor.execute("SELECT table_name, column_name "
                       "FROM information_schema.columns AS c "
                       "WHERE table_name LIKE '{}_%'".format(app))
        columns = cursor.fetchall()
        for column in columns:
            print(column.table_name, column.column_name)

scan_tables('django') 
```

显然可以随意使用 DictCursor、RealDictCursor、LoggingCursor 等

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-21T14:35:35.690

以下代码将结果集转换为字典。

```
from django.db import connections
cursor = connections['default'].cursor()

columns = (x.name for x in cursor.description)
result = cursor.fetchone()
result = dict(zip(columns, result)) 
```

如果结果集有多行，则改为遍历游标。

```
columns = [x.name for x in cursor.description]
for row in cursor:
    row = dict(zip(columns, row)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-14T07:31:16.173

使用 RealDictCursor 的主要目的是获取字典格式列表中的数据。

不使用 django ORM 的恰当解决方案就是这个和那个

def 乐趣（请求）：

```
from django.db import connections

import json

from psycopg2.extras import  RealDictCursor

con = connections['default']
con.ensure_connection()
cursor= con.connection.cursor(cursor_factory=RealDictCursor)
cursor.execute("select * from Customer")
columns=cursor.fetchall()
columns=json.dumps(columns) 
```

输出：

[{...},{...},{......}]

# python - Python 子进程模块比命令慢得多（已弃用）

> ID：10888846
> 
> 赞同：17
> 
> 时间：2012-06-04T21:48:12.897
> 
> 标签：python, performance, command, subprocess

所以我写了一个脚本，在命令行上使用 nc 访问一堆服务器，最初我使用 Python 的 commands 模块并调用 commands.getoutput() 并且脚本运行了大约 45 秒。由于不推荐使用命令，因此我想将所有内容更改为使用 subprocess 模块，但现在脚本需要 2m45s 才能运行。任何人都知道为什么会这样？

我之前拥有的：

```
output = commands.getoutput("echo get file.ext | nc -w 1 server.com port_num") 
```

我现在有

```
p = Popen('echo get file.ext | nc -w 1 server.com port_num', shell=True, stdout=PIPE)
output = p.communicate()[0] 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-04T22:17:26.257

我预计`subprocess`会比`command`. 无意暗示这是您的脚本运行缓慢的*唯一*原因，您应该查看[`commands`](http://hg.python.org/cpython/file/477508efe4ab/Lib/commands.py)源代码。不到 100 行，大部分工作都委托给 from 的函数`os`，其中许多直接取自 c posix 库（至少在 posix 系统中）。请注意，这`commands`仅适用于 unix，因此无需进行任何额外工作即可确保跨平台兼容性。

现在来看看[`subprocess`](http://hg.python.org/cpython/file/477508efe4ab/Lib/subprocess.py)。有 1500 多行，全部是纯 Python，做各种检查以确保一致的跨平台行为。基于此，我希望`subprocess`运行速度比`commands`.

我对这两个模块进行了计时，在一些非常基本的东西上，`subprocess`它的速度几乎是`commands`.

```
>>> %timeit commands.getoutput('echo "foo" | cat')
100 loops, best of 3: 3.02 ms per loop
>>> %timeit subprocess.check_output('echo "foo" | cat', shell=True)
100 loops, best of 3: 5.76 ms per loop 
```

[Swiss](https://stackoverflow.com/a/10889406/577088)提出了一些有助于提高脚本性能的良好改进。*但即使在*应用它们之后，请注意`subprocess`仍然较慢。

 *```
>>> %timeit commands.getoutput('echo "foo" | cat')
100 loops, best of 3: 2.97 ms per loop
>>> %timeit Popen('cat', stdin=PIPE, stdout=PIPE).communicate('foo')[0]
100 loops, best of 3: 4.15 ms per loop 
```

假设您连续多次执行上述命令，这将加起来，并至少解释一些性能差异。

无论如何，我将您的问题解释为关于 and 的相对性能`subprocess`，`command`而不是关于如何加快脚本的速度。对于后一个问题，Swiss 的回答更好。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-04T22:42:37.110

这里似乎至少有两个不同的问题。

首先，您不正确地使用 Popen。以下是我看到的问题：

1.  使用一个 Popen 生成多个进程。
2.  将一个字符串作为 args 传递，而不是拆分 args。
3.  使用 shell 将文本传递给进程而不是内置的通信方法。
4.  使用 shell 而不是直接生成进程。

这是您的代码的更正版本

```
from subprocess import PIPE

args = ['nc', '-w', '1', 'server.com', 'port_num']
p = subprocess.Popen(args, stdin=PIPE, stdout=PIPE)
output = p.communicate("get file.ext")
print output[0] 
```

其次，您建议手动运行时它比通过子进程运行时结束得更快的事实表明这里的问题是您没有将正确的字符串传递给`nc`. 可能发生的是服务器正在等待终止字符串来结束连接。如果您没有通过它，那么连接可能会保持打开状态，直到超时。

手动运行`nc`，找出终止字符串是什么，然后更新传递给`communicate`. 通过这些更改，它应该运行得更快。*

# c - 找出为什么我从遍历链表中得到分段错误的最佳方法是什么？

> ID：10888847
> 
> 赞同：0
> 
> 时间：2012-06-04T21:48:13.867
> 
> 标签：c, list

我试图找出并需要帮助来确定为什么我的程序在我的主程序中出现分段错误：

```
int main (void){
  lista_conti *p = createlist();
  Conto c = malloc(sizeof(Conto));
  c->nome="uno";
  c->predecessore=NULL;
  c->costo=0;
  c->visited=0;
  insert(p,c);
  printf("\n%d\n", isEmpty(p));
  Conto con =p->conto;
  char *nome = con->nome;    /*SEGMENTATION FAULT*/
} 
```

这是我的程序的完整列表，包括上面提到的主要内容。

/*我的结构*/

```
typedef struct lista_conti{

void* conto;
struct lista_conti *succ, *prec;
}lista_conti;

typedef struct{
  char *nome;
  lista_conti *predecessore;   /*valore hash(nome) del predecessore*/
  int costo;
  int visited; /*0 FALSE 1 TRUE*/
}*Conto;

lista_conti *createlist (void){

lista_conti *q = malloc(sizeof(lista_conti));

    if(!q) {
        fprintf(stderr,"Errore di allocazione nella creazione della lista\n");
        exit(-1);
    };
    q->succ = q->prec = q;
    return q;
}

/*Gli passo il puntatore alla testa della lista*/

int isEmpty(lista_conti *p){
  if(p == NULL)
    return 1;
  else
     return 0;
} 
```

/*打印完整列表*/

```
void printList(lista_conti *p){
    lista_conti *r;
     r=p;
     if(r==NULL)
    {
       printf("NO ELEMENT IN THE LIST :");
     return;
     }
   /* traverse the entire linked list */
    while(r!=NULL)
  {   
    Conto cnt = r->conto;     
    printf(" -> %s ",cnt->nome);
    r=r->succ;

  }
   printf("\n");
} 
```

/* 在头部插入一个元素 */

```
void insert(lista_conti *p, void* c){ 
   printf("nella funzione insert");
   if(isEmpty(p) == 1){
      printf("\nLISTA VUOTA\n");
      p->conto = c;
      p->succ=NULL;
   }

lista_conti *q = malloc(sizeof(lista_conti));
if(!q) {
    fprintf(stderr,"Errore nell'allocazione del nuovo elemento\n");
    exit(-1);   
};
q->conto = c;
q->succ = p->succ;
p->succ->prec = q;
p->succ = q;
q->prec = p;
} 
```

/* 在尾部插入一个元素。*/

```
void insertatend(lista_conti *p, Conto c){

lista_conti *q = malloc(sizeof(lista_conti));

if(!q) {
    fprintf(stderr,"Errore nell'allocazione del nuovo elemento\n");
    exit(-1);   
};
q->conto = c;
q->prec = p->prec;
p->prec->succ = q;
p->prec = q;
q->succ = p;
}

int main (void){
  lista_conti *p = createlist();
  Conto c = malloc(sizeof(Conto));
  c->nome="uno";
  c->predecessore=NULL;
  c->costo=0;
  c->visited=0;
  insert(p,c);
  printf("\n%d\n", isEmpty(p));
  Conto con =p->conto;
  char *nome = con->nome;    /*SEGMENTATION FAULT*/
} 
```

插入后，当我尝试访问 con->nome 时，程序返回我分段错误。我不知道为什么。我创建列表时有问题吗？当我插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:29:50.160

初始化列表后，您将创建第一个具有未初始化`conto`字段的节点。

插入新节点后，原始的第一个节点保持不变，因此当您尝试取消引用`p->conto`时，它将导致分段错误。

创建双向链表的正确方法是使用另一个包含头部和尾部的结构（如果您愿意，也可以添加计数）；它们都被初始化为NULL。

插入更新头部，追加更新尾部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T22:14:48.697

您应该使用调试器。假设您在使用 GDB 和 GCC 的平台上，您需要执行以下操作来查找发生段错误的位置：

1- 使用 -ggdb 编译代码。所以你完成编译命令可能是 gcc -ggdb list.c -o list
2- 然后运行 ​​gdb list
3- 在 gdb 中输入以下命令：

*   跑
*   当您遇到段错误时，您应该能够使用 GDB`list`命令查看源代码
*   然后要查看代码到达段错误的路径，您可以使用 backtrace 命令。

请参阅此链接显示[如何使用 GDB](http://yolinux.com/TUTORIALS/GDB-Commands.html)

`

# mercurial - 用于调整 RCS/CVS ,v 文件中的历史记录的脚本

> ID：10888848
> 
> 赞同：1
> 
> 时间：2012-06-04T21:48:18.987
> 
> 标签：mercurial, cvs, rcs

在准备迁移到 Mercurial 时，我想对数千个 .v 文件进行一些系统更改。（我将编辑原件的副本，我赶紧补充。）

我所追求的各种变化的例子：

1.  对于消息以某些文本开头的每个修订版，该文本指示已知用户名（例如`[Fred Bloggs]`），如果注释中的用户名与 ,v 文件中的作者匹配，则从提交消息中删除不必要的用户名文本
2.  如果 ,v 包含有用的描述，请将其附加到修订版 1.1 的提交消息中（cvs2hg 忽略描述 - 但我们的许多 CVS 文件实际上来自 RCS，在 RCS 中很容易将初始提交消息放入描述字段中错误）
3.  对于从某些共享用户帐户进行的编辑，请根据提交消息的内容调整作者。

我考虑过的事情：

1.  在每个单独的 .v 文件上运行 'cvs log' - 解析输出，并使用`rcs -m`它来更改此历史记录。这方面的问题包括：
    *   似乎没有办法将文本文件传递给`rcs -m`- 因此，如果修订消息包含单引号和/或双引号，或者跨越多行，那么在脚本中正确引用它将是一个很大的挑战
    *   我看不到 rcs 或 cvs 工具来更改与修订关联的作者姓名
    *   不太重要的是，它可能会启动大量进程——我认为这可能会变慢
2.  编写 Python 解析[.v 文件](http://durak.org/sean/pubs/software/cvsbook/RCS-Format.html)，并调整内容。这方面的问题包括：
    *   我们的 ,v 文件中混合了行尾 - 包括一些应该是文本的二进制文件，反之亦然 - 所以需要非常小心不要损坏文件
    *   在任何提交消息中引用 @ 字符时需要小心，如果它落在多行注释中的行首
    *   在已提交文件的最后一行被更改并且没有换行符的修订中也需要注意 - 这意味着 ,v 在一行的末尾有一个 @，而不是前面`\n`
3.  克隆我们正在使用的[cvs2hg](http://hg.gerg.ca/cvs2svn/file/19b322d42b1f/)版本，并尝试调整其代码以就地进行所需的编辑

是否有任何其他方法可以减少工作量，或者是否有任何现有的代码可以实现这种功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T05:01:13.710

您的第一种方法可能是最好的方法。我知道在 Perl 中，处理引号和多行不会有问题。例如：

```
my $revision = ...;
my $log_message = ...;
system('rcs', "-m$revision:$log_message", $filename); 
```

where`$log_message`可以包含任意文本。由于字符串不通过 shell，因此不会重新解释换行符和其他元字符。我相信你可以在 Python 中做同样的事情。

（至于您的第二种方法，我不认为行尾会成为问题。如果您有 Unix 风格的`\n`结尾和 Windows 风格的`\r\n`结尾，您可以将尾随`\r`视为行的一部分，并且一切都应该保持一致。我在这里对`,v`文件的布局做了一些假设。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-09T18:58:01.787

我编写了一个 Python 库[EditRCS](https://github.com/ben-cohen/editrcs) ( [PyPi](https://pypi.python.org/pypi/editrcs) )，它实现了[RCS 格式](https://linux.die.net/man/5/rcsfile)，因此用户可以将 RCS 文件加载为 Python 对象树，以编程方式对其进行修改并保存到新的 RCS 文件中。

您可以使用 mapDeltas() 将函数应用于每个修订版，例如[更改作者姓名](https://github.com/ben-cohen/editrcs/blob/master/examples/rename_user)；或者使用 getNext() 遍历树来处理更复杂的事情，例如将[两个文件历史](https://github.com/ben-cohen/editrcs/blob/master/examples/rcs_join)连接在一起。

# java - 如何将 GlassFish 添加到我的 Netbeans Maven Java 应用程序项目中？

> ID：10888850
> 
> 赞同：0
> 
> 时间：2012-06-04T21:48:30.910
> 
> 标签：java, maven, netbeans, glassfish, glassfish-3

我想`org.glassfish.api.embedded`在我的 Java 应用程序中使用，以便可以向其添加 Web 界面。我正在使用 Netbeans，并且已经建立了一个*Maven Java 应用程序*项目。

我对Java很陌生。我不知道如何将 GlassFish 添加到我的项目中。我尝试添加各种依赖项，但其中没有一个`org.glassfish.api.embedded`。

如何`org.glassfish.api.embedded`在 Netbeans 中添加到我的 Java 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:08:56.293

来自： http: [//glassfish.java.net/downloads/3.1.2-final.html](http://glassfish.java.net/downloads/3.1.2-final.html)

```
<dependency>
    <groupdId>org.glassfish.main.extras</groupdId>
    <artifactId>glassfish-embedded-all</artifactId>
    <version>3.1.2</version>
</dependency> 
```

> GlassFish Server 3.1.2 在单个 JAR 中，适用于嵌入式使用。包含完整的平台实现 (67 MB)。

或者：

```
<dependency>
    <groupdId>org.glassfish.main.extras</groupdId>
    <artifactId>glassfish-embedded-web</artifactId>
    <version>3.1.2</version>
</dependency> 
```

> GlassFish Server 3.1.2 在单个 JAR 中，适用于嵌入式使用。包含 Web 配置文件实现 (40 MB)。

它应该可以通过 Maven Central 获得，因此您不必配置任何存储库。

唯一的缺点：罐子很大（40MB 和 67MB）。

# java - java线程结束时可运行类是否超出范围？

> ID：10888851
> 
> 赞同：1
> 
> 时间：2012-06-04T21:48:31.617
> 
> 标签：java, multithreading

如果我创建一个实现 Runnable 的对象，并用它启动一个线程......

```
ArrayList<Thread> threadlist = new ArrayList<Thread>();
{
  MergeThread mmt = new MergeThread();
  Thread t = new Thread(mmt);
  threadlist.add(mmt);
  t.start();
}

t.join();
Thread t = threadlist.get(0); 
```

此时 mmt 保证存在，或者如果垃圾收集得到它，它可能已经消失。

我要问的是 Thread 对象在线程结束后是否保留 Runnable 类。

编辑：上面有一个错误应该说 threadlist.add(t);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:54:49.410

从[课程的](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Thread.java#Thread.exit%28%29)[来源`Thread`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Thread.java#Thread.exit%28%29)：

```
/**
 * This method is called by the system to give a Thread
 * a chance to clean up before it actually exits.
 */
private void exit() {
if (group != null) {
    group.remove(this);
    group = null;
}
/* Aggressively null out all reference fields: see bug 4006245 */
target = null;
/* Speed the release of some of these resources */
    threadLocals = null;
    inheritableThreadLocals = null;
    inheritedAccessControlContext = null;
    blocker = null;
    uncaughtExceptionHandler = null;
} 
```

因此，系统调用`Thread#exit()`和对`target`（线程正在运行的可运行对象）的引用被释放。

bugs.sun.com 上还有一个[错误报告 #4006245，](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4006245)它指的是清除`target`参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T21:54:05.607

`mmt`被添加到，`threadList`所以只要它`threadList`本身是可访问的并且仍然持有它，它就不会被垃圾收集，在代码示例的最后一行仍然是这种情况，无论您的第一个`t`（在中间块中）是否仍然持有对它的引用或不。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T21:53:51.713

您发布的代码对我来说并不是很清楚。然而，关于

> ***此时 mmt 保证存在，或者如果垃圾收集得到它，它可能已经消失。***

我可以这么说：如果*你*仍然可以得到它，垃圾收集器不会回收这个对象（如果你不能得到它，那么担心这个对象是否已经被 GC 或不是）。

# php - 控制器/JToolBar 在 Joomla 2.5 中不起作用

> ID：10888858
> 
> 赞同：0
> 
> 时间：2012-06-04T21:49:11.527
> 
> 标签：php, model-view-controller, joomla, joomla2.5

相关代码：

```
JToolBarHelper::custom('saveCategories', 'save', '', 'Save', false, false);
...
<input type="hidden" name="controller" value="EasyBlogController"> 
```

根据我可以从[文档](http://docs.joomla.org/JToolBarHelper/custom)和我自己[以前的问题中挖掘出来的内容，](https://stackoverflow.com/questions/10799936/jtoolbarhelpercustom-syntax)这应该调用`saveCategories()`. `EasyBlogController`我尝试将值设置为`easyblog`, `easyblog.php`（文件名）以及当前的`EasyBlogController`（类名）。

单击“保存”按钮只会刷新页面。它不会重定向，也不会重定向`echo`我在函数 `var_dump`中放入的任何测试代码。ing并返回正确的值。创建一个控制器对象，然后使用作品。`saveCategories()``var_dump``JRequest::getVar('controller')``'task'``$controller->execute('task');`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T02:59:30.087

您要获取的值显然取决于您尝试调用的控制器的位置，您在这里有几个选项。通常，组件的基本文件夹（可能是 components/com_easyblog）中有一个控制器，它位于一个名为 controller.php 的文件中，其中的类名是 EasyBlogController。

也可能有一个控制器文件夹（components/com_easyblog/controllers），其中包含特定视图的控制器。通常在这种情况下，您将有一个名为“something.php”的文件，并且该类将是“EasyBlogControllerSomething”。对于此选项，您将使用以下命令调用此控制器的 saveCategories 函数：

```
JToolBarHelper::custom('Something.saveCategories', 'save', '', 'Save', false, false); 
```

Otherwise, if you just want the base controller, just don't specify the controller, since the system will default to the controller.php file. Such as the following:

```
JToolBarHelper::custom('saveCategories', 'save', '', 'Save', false, false); //no hidden input after this 
```

If you want to set a controller other than the default, add this html to your view:

```
<input type="hidden" name="controller" value="controllerNameHere"/> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T14:06:00.053

尝试：

```
JToolBarHelper::custom('EasyBlogController.saveCategories', 'save', '', 'Save', false, false); 
```

但请确保您的控制器名为 EasyBlogController.php 并有一个名为 saveCategories() 的函数

# html - 在全屏模式下如何在 IE8 中显示滚动条？

> ID：10888859
> 
> 赞同：0
> 
> 时间：2012-06-04T21:49:18.193
> 
> 标签：html, css, internet-explorer-8

每当我按 f11 将浏览器转为全屏模式时，右侧的垂直滚动条就会消失，因此我无法向下滚动页面。无论如何我可以在全屏模式下显示滚动条吗？我的身体溢出：可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:53:19.210

```
overflow: auto; overflow-y: auto; 
```

# java - 使用 MyBatis 和 Spring 进行请求范围的事务

> ID：10888861
> 
> 赞同：2
> 
> 时间：2012-06-04T21:49:35.240
> 
> 标签：java, spring, mybatis

有没有办法用 SpringMVC 设置 MyBatis 来为整个 http 请求设置一个事务？通常`OpenSessionInViewFilter`在 MyBatis 中是否有类似 Hibernate 的东西，或者我应该编写自己的过滤器来实现这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T10:23:23.820

您对“会话”和“交易”的概念感到困惑。OSIV 打开会话，在一个会话中，多个事务可能共存。通常，您应该`@Transactional`根据您的业务需求为控制器使用的服务添加属性。

此外，对所有事物的一项大交易是一种反模式。理想情况下是对用户的操作进行读写事务，然后另一个只读事务是为用户构建响应。它节省了资源，因为用于插入/更新的数据库锁被提前释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:12:08.133

你可以让 Spring 来处理你的事务。

看看文档。我很容易。您只需要在需要它的方法中配置和添加@Transactional 注释。

[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T04:01:17.083

如果您确实需要将单个事务绑定到特定请求，您可以考虑`TransactionTemplate`在您的`Filter`. 我不认为你可以使用`@Transactional`on`Filter`除非它是由 Spring 管理的（例如：`FilterChain`像 Spring Security's Filters.

这是你可以做的`TransactionTemplate`

```
public class TransactionalFilter implements Filter {
    private TransactionTemplate transactionTemplate;

    public void destroy() {
    }

    public void doFilter(final ServletRequest req, final ServletResponse resp, final FilterChain chain) throws ServletException, IOException {

        transactionTemplate.execute(new TransactionCallback<Object>() {
            @Override
            public Object doInTransaction(TransactionStatus status) {
                try {
                    chain.doFilter(req, resp);
                } catch (IOException e) {
                    e.printStackTrace();
                } catch (ServletException e) {
                    e.printStackTrace();
                }
                return null;
            }
        });
    }

    public void init(FilterConfig config) throws ServletException {
        transactionTemplate = new TransactionTemplate(WebApplicationContextUtils.getRequiredWebApplicationContext(config.getServletContext()).getBean(PlatformTransactionManager.class));
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T17:37:17.540

我的建议是阅读以下帮助文档： [http ://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/transaction.html](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/transaction.html)

由于您没有完全控制 spring-mvc 框架的每个部分，我建议在 spring-mvc 的基类上使用 aop 切入点来启动事务（在每个请求上执行的方法。）你可以找到这个10.5.2 节中的方法。只要确保你切入点的类是由spring初始化的，否则它将不起作用。

# c - C 代码错误：free()：下一个大小无效（快速）：

> ID：10888865
> 
> 赞同：0
> 
> 时间：2012-06-04T21:49:48.643
> 
> 标签：c, arrays, glibc

我的代码出现错误，但我不确定在哪里修复它。

这是我的代码的作用的解释：

我正在编写一些代码来读取输入文件并将每一行作为对象（char 类型）存储在数组中。输入文件的第一行是一个数字。这个数字告诉我应该读取多少行并将其存储在数组中。这是我的代码：

```
int main(int argc, char *argv[]){
    FILE *fp; 
    char **path;
    int num, i;
    ...
    /*after reading the first line and store the number value in num*/
    path = malloc(num *sizeof(char));
    ...
    free(path);
} 
```

运行代码后，我得到了这个

```
*** glibc detected *** free(): invalid next size (fast): 
```

我四处搜索并知道这是 malloc/free 错误，但我不完全知道要修复它。任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T21:51:50.423

```
path = malloc(num *sizeof(char)); 
```

这是错误的。 `path`是一个指向 char 的指针，所以你需要 allocate `num * sizeof(char*)`， not `sizeof(char)`，它总是 1 （但指针几乎肯定不是 1 字节）。

要动态初始化指针，请始终分配所需的元素数量乘以*指针指向的类型的大小*。该指针指向 a `char*`，而不是 a `char`。它指向的指针指向`char`s（说起来很有趣……）

简化：

```
some_ptr *p = malloc(num_elems * sizeof *p); 
```

编译器知道如何`sizeof(*p)`正确处理，您实际上并没有取消引用指针（否则会调用 UB，因为指针可能未初始化）。

# ios5 - 从第一个 ViewController 滑动到第二个 ViewController，然后回到第一个，在 iOS 5 中的第一个中将加载的图像卸载为空白

> ID：10888866
> 
> 赞同：0
> 
> 时间：2012-06-04T21:49:51.063
> 
> 标签：ios5, uiviewcontroller, xcode4.3

我刚开始开发 iOS 应用程序，所以如果这个问题看起来很愚蠢，请多多包涵。我正在创建一个示例应用程序，其中有 2 个视图控制器。第一个具有全屏图像，带有导航栏和相机滚动按钮，当应用程序启动时，我使用它从厨房中选择图像。然后我滑动到第二个视图控制器，我在其中输入一些数据，例如谁点击了它，在文本框中使用了什么相机等。第二个视图控制器有一个导航栏和导航栏中的一个按钮项目，我将其命名为返回到带有图像的第一个视图控制器。我已通过 segue 将此按钮链接到第一个视图控制器。现在使用此设置一切正常，但唯一的问题是当我从图库加载图像并滑动到第二个视图进行写入数据，

那么，当我从第二个视图控制器滑回第一个视图控制器时，如何确保不会丢失加载的图像？

感谢任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:44:24.017

问题是您可能控制将第二个视图的按钮拖到第一个视图对吗？这不会“移动”到该视图控制器，而是“创建”第一种类型的新视图控制器，这就是它为空的原因。如果要返回到第一个视图控制器，则必须为按钮添加操作。如果第二个中的数据消失，您可以简单地“dismissViewController”。或者从控制器 1 到控制器 2 制作一个强指针，以便您可以关闭，但如果您希望信息不消失，则再次显示它。（没有强指针，当你关闭它时，VC 会被卸载）

# c# - TaskWrapper - 线程和委托混淆

> ID：10888869
> 
> 赞同：0
> 
> 时间：2012-06-04T21:50:02.283
> 
> 标签：c#, .net, multithreading, .net-3.5

有人可以向我解释一下这段代码，以便我更清楚地了解其中发生了什么吗？

```
taskWrapper = XTThreadPool.DEFAULT_POOL.Run((System.Threading.ThreadStart)delegate()
{
    //Remote procedure execution and result processing code.
    //Some vars set in here are used after the Join() below.
}, true, true);

while (taskWrapper.Status == XTThreadPool.Task.STATUS.None)
{
    System.Threading.Thread.Sleep(10);
}

...

taskWrapper.Join(); 
```

在我看来，正在创建一个单独的线程，并且在其中使用了远程过程调用。不过，我对委托的使用或 taskWrapper 对象创建的语法有点模糊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:24:22.113

好吧，在不知道 XTThreadPool 类中有什么的情况下，这有点棘手，但你可以猜到......

机会是，这第一点...

```
taskWrapper = XTThreadPool.DEFAULT_POOL.Run((System.Threading.ThreadStart)delegate()
{
    //Remote procedure execution and result processing code.
    //Some vars set in here are used after the Join() below.
}, true, true); 
```

...启动一个异步运行的线程并传递在您放置注释的部分中指定的方法。这可能是通过创建一个[Thread](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)的实例来实现的，将方法作为委托传递给它的构造函数，然后调用`newThread.Start()`，它开始在应用程序线程池中的新线程上执行。然后可以使用线程引用来检查该线程的状态并查看它是否已完成，这可能是本节所做的：

```
while (taskWrapper.Status == XTThreadPool.Task.STATUS.None)
{
    System.Threading.Thread.Sleep(10);
} 
```

这对我来说似乎有点奇怪。`System.Threading.Thread`访问的是**当前线程**，而不是线程池启动的线程，Sleep 方法只是表示“什么都不做”。所以当前线程正在等待taskWrapper实例启动的线程进入None以外的状态。现在这是变得困难的地方，因为我们真的不知道 taskWrapper 在做什么。

实际上它可能只是在等待线程完成执行，但是没有单独的线程是没有意义的，因为这项工作也可以代替上面的 while 循环来完成。

然后这个：

```
taskWrapper.Join(); 
```

上面的行真的可以做任何事情，就像我说的那样，它取决于 taskWrapper 的实现。但根据名称，我猜它使用[Thread.Join](http://msdn.microsoft.com/en-us/library/system.threading.thread.join.aspx)方法，该方法基本上会导致调用线程（此线程）等待它调用的线程（taskWrapper）完成。然而 taskWrapper 本身实际上并不是一个线程（基于对上述 Status 属性值的检查），更有可能它只是线程的一个包装器。

老实说，我已经完全猜到了，它真的可以做任何事情。如果没有看到 XTThreadPool 类的代码以及任何 DEFAULT_POOL 是它的实例，就不可能确定发生了什么。

在第一次检查时，**如果**代码正在执行我在上面猜到的操作，那么没有另一个线程来完成工作，也没有必要使用 while 循环！整个事情可以替换为调用 Run 中方法中的任何内容。

# c# - Linq平均值，参数函数

> ID：10888876
> 
> 赞同：0
> 
> 时间：2012-06-04T21:50:24.870
> 
> 标签：c#, asp.net, asp.net-mvc-3, linq, razor

```
@foreach (var item in Model) {  
    @Html.ActionLink(item.RATES.Average(item => item.rate)), "ShowRates", "Track", new { track_nr = @item.TRACK_NR, album_id=@item.ALBUM_ID}, null)
 <br>
} 
```

我试图显示 RATES 的平均值，RATES 是我数据库中的一个表，由列中的整数组成。Visual Studio 告诉我，我必须提供一个函数作为参数。但我不知道如何创建该功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:58:57.380

将这些函数添加到视图会使其看起来很难看，我宁愿将其添加为我的模型的属性并在我的控制器中进行此计算，然后再将这些数据发送到视图。

```
public class AlbumViewModel
{
  public int ALBUM_ID { set;get;}
  public string TRACK_NR { set;get;}
  public decimal AVERAGE_RATE{ set;get;}

} 
```

你的行动方法

```
public ActionResult GetAlbums()
{
   var albums=rep.GetAlbmums();
   foreach(var album in albums)
   {
       album.AVERAGE_RATE=album.Rates.Average();
   }
   return View(albums);    
} 
```

在我的**干净视图中，**

```
@foreach (var item in Model)
{  
   @Html.ActionLink(item.AVERAGE_RATE, "ShowRates", "Track", new { track_nr = @item.TRACK_NR, album_id=@item.ALBUM_ID}, null)    
} 
```

# weka - Weka 中名义属性的取值范围

> ID：10888880
> 
> 赞同：1
> 
> 时间：2012-06-04T21:51:00.013
> 
> 标签：weka, arff

我有一个名义属性可用于使用 Weka 进行数值预测。但是这个**名义属性**恰好有**957 个可能的值（1-957）**。有没有办法在**ARFF 输入文件**中指定它。一种明显的方法是编写一个脚本来生成**1-957**逗号分隔的条目。

但我只是想知道 WEKA 是否提供了任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:03:23.437

据我所知，这是不可能的。您可以使用以下 shell 命令生成所有值。

```
seq -s, 1 957 
```

# apache-flex - Flex/AIR SQLite：多次插入，1 个 SQL 语句中的行数未知

> ID：10888883
> 
> 赞同：0
> 
> 时间：2012-06-04T21:51:14.260
> 
> 标签：apache-flex, sqlite, air, flash-builder

我正在 Flex/Adobe AIR 中创建一个移动应用程序。我正在使用 SQLite 来存储和检索数据。我有一种情况，我需要在表中插入未知数量的行。有没有办法用 SQLite 中的一条语句来做到这一点？我知道可以使用 AS3 中的循环来完成，但想看看是否可以使用单个 SQL 语句。我找到了使用 UNIONS 和 SELECT 的参考资料，但是，这些示例并不完全清楚，我也不确定它们是否适用于我的情况。任何例子都值得赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:12:51.103

您应该能够执行以下操作：

```
INSERT INTO SomeTable 
VALUES
('Column 1 Row 1', 'Column 2 Row 1'),
('Column 1 Row 2', 'Column 2 Row 2'),
('Column 1 Row 3', 'Column 2 Row 3'); 
```

不过，您仍然需要在 AS 中循环来构建 SQL 语句。

请注意， SQLLite 是否支持这种语法似乎[有些混乱。](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)

# powershell - PowerShell 中的特殊字符

> ID：10888889
> 
> 赞同：2
> 
> 时间：2012-06-04T21:51:41.497
> 
> 标签：powershell, scripting, special-characters, powershell-2.0

我正在尝试使用 PowerShell 并将版权字符输出到 Microsoft Word 文档中。例如，下面列出的代码是我正在尝试使用的代码，但它不起作用。

```
$SummaryPara.Range.Text = "© "
$SummaryPara.Range.Text = "Get-Date -Format yyyy"
$SummaryPara.Range.Text = " - Name of Org Here "
$SummaryPara.Range.InsertParagraphAfter() 
```

我需要以某种方式使用`Alt`+`0169`序列吗？

我不确定我做错了什么，因为以下代码似乎有效：

```
$selection.TypeParagraph()
$selection.TypeText("© ")
$selection.TypeText((Get-Date -Format yyyy))
$selection.TypeText(" - Name of Org Here ")
$selection.TypeParagraph() 
```

我怎样才能使版权字符和其他类似的特殊字符都起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T00:35:58.180

这里有几个问题。我将列出这些并解决每个问题：

1.  您可以通过将 Unicode 表示形式转换为`char`. 在这种情况下

    ```
    [char]0x00A9 
    ```

2.  您将新值分配给`$SummaryPara.Range.Text`3 次。因此，您每次都覆盖以前的值，而不是连接（'+' 运算符），我认为这是您想要做的。

3.  您正在尝试使用 cmdlet [Get-Date](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Utility/Get-Date)，但由于您已引用它，您最终将得到文字字符串“Get-Date -Format yyyy”，而不是 cmdlet 的结果。

把它们放在一起，我想你想要这样的东西：

```
$word = New-Object -ComObject Word.Application
$doc = $word.Documents.Add()
$SummaryPara = $doc.Content.Paragraphs.Add()
$SummaryPara.Range.Text = [char]0x00A9 + ($date = Get-Date -Format yyyy) + " - Name of Org Here "
$word.Visible = $true 
```

# apache - Apache从根文件夹重写，强制https

> ID：10888890
> 
> 赞同：2
> 
> 时间：2012-06-04T21:51:41.887
> 
> 标签：apache, rewrite

我想将流量从 mysite.com 重定向到 mysite.com/folder，但还要在所有页面上强制执行 SSL。

目前我们在 httpd.conf 中有这个我们从某个地方的样本中找到的，但我不认为它一直都在正常工作。

```
RewriteEngine on 
RewriteRule ^/$ https://www.mysite.com/folder/ [R] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:56:24.467

如果请求是针对的`^/$`唯一匹配`/`项，即站点的根目录。其他任何东西都不匹配。试试`.*`吧。

注意：如果这个重写规则对 HTTP 和 HTTPS 版本都有效，那会让你进入一个无限的重定向循环。在这种情况下，您可能还需要某种 RewriteCond 测试。

# layout - 玉 / 快递 - 何时使用或不使用布局

> ID：10888893
> 
> 赞同：0
> 
> 时间：2012-06-04T21:51:54.830
> 
> 标签：layout, express, block, partial, pug

我刚刚开始在 express 方面进行开发，并且对 Jade 也很陌生。

我无法决定何时适合使用布局以及何时不适合。我也很难决定何时适合使用块与部分之类的东西。

对此的任何帮助都非常感谢。我有点失落。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:20:58.483

It's mostly a matter of preference. If you are used to something like Wordpress where you have a concept of a header and footer that you include into pages than you might not like layouts. I personally only use layouts with content blocks because the non-layout way tends to cause more repetition.

As for partials vs blocks. You use a partial for items that you want to reuse on different pages. While a block is a chunk of html that will be replaced by child templates.

An example of a partial can be the html for a product. So you have a thumbnail, the title and a description of a product. You might use this partial while listing the products in a category. But you might also use this partial for rendering a list of search results.

An example of a partial can be a main layout that contains you header and your navigation and a content area. If you want to reuse this main layout on multiple pages you will extend this it and overwrite the block in the child templates.

# jquery - jQuery 进度条（画布加载时间）

> ID：10888902
> 
> 赞同：0
> 
> 时间：2012-06-04T21:52:26.047
> 
> 标签：jquery, css, html5-canvas

所以我正在使用这个 jQuery 插件：

[http://p.ar2oor.pl/cprogress/](http://p.ar2oor.pl/cprogress/)

我不会发布任何代码，因为有很多方法。基本上，如果您访问该站点，您会看到他们的进度条加载速度有多快。我已经以完全相同的方式设置了我的工作方式，但只是使用了不同的图像。它延迟半秒然后出现。为什么要这样做，我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:19:10.820

您的滑块显示速度较慢，因为您的图像加载缓慢。

**你是从不同的服务器拉图像吗？**- 将图像放到您的服务器上。

**您的滑块在页面加载时是否可见，或者在某些操作后会显示？**在这种情况下，请在文档/页面加载后立即预加载图像。因此，当显示滑块时，图像已经在浏览器缓存中。

总而言之，您面临优化问题，没有完整的代码，我们无法帮助您。由于必须有多种因素，它们正在减慢负载。

# python - 从 web.py 中的子应用提供静态文件

> ID：10888904
> 
> 赞同：2
> 
> 时间：2012-06-04T21:52:35.687
> 
> 标签：python, cherrypy, web.py, static-files, subapplication

我正在 web.py （重写/扩展[mongs](http://www.whit537.org/mongs/)）中编写一个网络应用程序，我希望它既可以用作独立应用程序，也可以用作可以将请求转发到的子应用程序。我遇到的问题是，当它用作子应用程序时，不能轻易地从它自己的静态目录中提供静态文件。由于我打算分发它（并且不要求用户将文件组合到他们项目的静态目录中），我希望目录结构为：

```
app_that_is_using_mongs (not mine)
    static (which holds the app's static files - also not mine)
    mongs (my subapp)
        main.py (the code for mongs)
        view (holds templates)
        static (the static folder for mongs)
    main.py (the code for the app that is using mongs) 
```

...以便整个 mongs 目录与使用它的任何应用程序分开。

我考虑了一些使它起作用的可能性：

*   使用从静态目录读取和输出文件的请求处理程序，例如：

    ```
    cwd = os.path.dirname(__file__) + '/'  # get current working directory

    class Static:
        def GET(self, filename):
            """searches for and returns a requested static file or 404s out"""
            try:
                return open(cwd + 'static/' + filename, 'r').read()
            except:
                web.application.notfound(app)  # file not found 
    ```

我不确定这个解决方案对于大文件的性能，看起来这应该是 web.py 可以自己做的事情。

*   通过 web.py 访问cherry.py staticdir 工具添加另一个静态目录...我不知道如何做这样的事情（直接与运行 web.py 的服务器交互），我不知道认为如果我切换到 Gunicorn 服务器（或除了cherry.py 之外的任何服务器）它仍然可以工作。

*   修复 web.py 处理静态文件的方式以使其更具可扩展性......如果没有其他方法，那么重写 web.py 的这一部分并将其推送到主 repo 可能是最好的方法。

那么，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T03:12:51.253

在 web.py 中，静态资产不通过应用程序路由器提供服务。相反，http 服务器有一个检查天气，请求 url 以`/static`. 这意味着无论您是否有子应用程序，都`/static/...`直接映射到`static`根应用程序中的目录。

您构建静态类的第一个想法肯定会奏效，但您是对的，它对性能有一定的影响——不过，您必须对其进行基准测试才能真正了解它有多糟糕。

另一个选项，操作上更糟糕，但临时修复是创建从父应用程序的静态目录到子应用程序的静态目录的软链接。IE

```
parent_app/
    static/
        sub_app/ -> parent_app/sub_app/static/sub_app
        ...
    sub_app/
        static/
            sub_app/
                ... 
```

然后，当您想从 访问静态资产时`sub_app`，您会点击如下网址：`/static/sub_app/asset`。由于此 url 以 开头`/static`，它将被 http 服务器捕获并重定向到`static`目录，跟随软链接，并解析为实际资产。由于`sub_app`目录的原因，直接运行 sub_app 或运行 parent_app 时，此解决方案将起作用。您必须在部署到的每台服务器上以及为每个开发环境设置此软链接，这使得这不太理想。

# jquery - 捕获页面上的所有滚动事件

> ID：10888908
> 
> 赞同：2
> 
> 时间：2012-06-04T21:53:11.657
> 
> 标签：jquery, scroll

我需要一点帮助。我为右键单击创建了自己的上下文菜单，我希望它的行为像经典菜单一样 - 滚动后消失。但问题是我的布局中有更多的滚动条，所以问题是，如何捕捉页面上的所有滚动事件？我已经尝试过，`$(document).scroll()`但它仅适用于主滚动条，我也尝试过`.on("scroll", function(){});`在主容器上使用，但这根本不起作用:(

那么有什么想法吗？

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:56:13.543

我建议向您的可滚动元素添加类，例如 class="scrollable"，然后在该类上执行选择器。添加类时需要一些繁琐的工作，但它会有效地完成工作。

```
$(document).add('.scrollable').on('scroll', function() {
    alert("Action here");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:58:23.560

您必须手动添加它们：

```
$("html, body, #yourMainDiv, .scrolling, #whatever").on("scroll", function(){...}); 
```

# c# - JsonConvert 序列化返回“{}”

> ID：10888909
> 
> 赞同：2
> 
> 时间：2012-06-04T21:53:12.550
> 
> 标签：c#, json, serialization, json.net

我遇到了一个问题，其中以下 ToJson() 方法返回一个只有“{}”的字符串

```
public class GenericRequest
            {
                public enum SupportedCommands
                {
                    REGISTER, LOGIN, LOGOUT
                }

                private SupportedCommands command;
                private String authentication;
                private String password;
                private String email;

                public GenericRequest(SupportedCommands comm, string aut, string pass, string mail)
                {
                    command = comm;
                    authentication = aut;
                    password = pass;
                    email = mail;
                }

                virtual public string ToJson()
                {
                    return JsonConvert.SerializeObject(this);
                }
    } 
```

知道为什么序列化命令不序列化类的成员吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T21:54:22.143

这些字段是私有的；尝试改用公共属性（或将字段包装在公共属性中）。

# performance - 为什么 Seq 模块中的某些功能得到了优化，而其他功能却没有在 F# 中进行优化？

> ID：10888912
> 
> 赞同：8
> 
> 时间：2012-06-04T21:53:32.727
> 
> 标签：performance, collections, f#

[这是我之前关于](https://stackoverflow.com/questions/10874557/why-is-seq-iter-and-seq-map-so-much-slower)`Seq`模块`iter`和`map`功能比`Array`和`List`模块等价物慢得多的问题的后续。

查看源代码，我可以看到一些函数，例如`isEmpty`和`length`执行一个非常简单的类型检查，以优化数组和列表，然后再使用`IEnumerator`.

```
[<CompiledName("IsEmpty")>]
let isEmpty (source : seq<'T>)  = 
    checkNonNull "source" source
    match source with 
    | :? ('T[]) as a -> a.Length = 0
    | :? list<'T> as a -> a.IsEmpty
    | :? ICollection<'T> as a -> a.Count = 0
    | _ -> 
        use ie = source.GetEnumerator()
        not (ie.MoveNext())

[<CompiledName("Length")>]
let length (source : seq<'T>)    = 
    checkNonNull "source" source
    match source with 
    | :? ('T[]) as a -> a.Length
    | :? ('T list) as a -> a.Length
    | :? ICollection<'T> as a -> a.Count
    | _ -> 
        use e = source.GetEnumerator() 
        let mutable state = 0 
        while e.MoveNext() do
            state <-  state + 1;
        state 
```

在`iter`相同的方法可以大大提高其性能的情况下，当我[隐藏](https://gist.github.com/2869351)该`iter`功能时，它比内置版本提供了显着的收益：

```
[<CompiledName("Iterate")>]
let iter f (source : seq<'T>) = 
    checkNonNull "source" source
    use e = source.GetEnumerator()
    while e.MoveNext() do
        f e.Current; 
```

我的问题是，鉴于`Seq`模块中的某些函数已针对特定集合类型（数组、list<T> 等）进行了优化，那么其他函数（例如`iter`和`nth`未以类似方式优化）怎么来？

此外，在`map`函数的情况下，正如@mausch 指出的那样，是否不可能采用类似的方法`Enumerable.Select`（见下文）并为不同的集合类型构建专门的迭代器？

```
public static IEnumerable<TResult> Select<TSource, TResult>(this IEnumerable<TSource> source, Func<TSource, TResult> selector)
    {
      if (source == null)
        throw Error.ArgumentNull("source");
      if (selector == null)
        throw Error.ArgumentNull("selector");
      if (source is Enumerable.Iterator<TSource>)
        return ((Enumerable.Iterator<TSource>) source).Select<TResult>(selector);
      if (source is TSource[])
        return (IEnumerable<TResult>) new Enumerable.WhereSelectArrayIterator<TSource, TResult>((TSource[]) source, (Func<TSource, bool>) null, selector);
      if (source is List<TSource>)
        return (IEnumerable<TResult>) new Enumerable.WhereSelectListIterator<TSource, TResult>((List<TSource>) source, (Func<TSource, bool>) null, selector);
      else
        return (IEnumerable<TResult>) new Enumerable.WhereSelectEnumerableIterator<TSource, TResult>(source, (Func<TSource, bool>) null, selector);
    } 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:39:28.163

> 在 iter 的情况下，可以采用相同的方法来极大地提高其性能

我认为这就是您问题的答案所在。您的测试是人为的，实际上并没有测试这些方法的任何真实示例。您测试了这些方法的 10,000,000 次迭代，以便在`ms`.

转换回每件商品的成本，它们是：

```
 Array   List
Seq.iter   4 ns    7 ns
Seq.map   20 ns   91 ns 
```

这些方法通常在每个集合中使用一次，这意味着此成本是算法性能的额外线性因素。在最坏的情况下，您损失的数量少于`100 ns`列表中的每个项目（如果您非常关心性能，则不应该使用它）。

`length`将此与在一般情况下始终是线性的情况进行对比。通过添加此优化，您可以为忘记手动缓存长度但幸运的是总是得到一个列表的人提供巨大的好处。

同样，您可能会`isEmpty`多次调用，如果您可以直接询问，添加另一个对象创建是愚蠢的。（这不是一个强有力的论点）

要记住的另一件事是，这些方法实际上都不会查看多个输出元素。您希望以下代码做什么（不包括语法错误或缺少方法）

```
type Custom() =
  interface IEnumerable with
    member x.GetEnumerator() =
      return seq {
        yield 1
        yield 2
      }
  interface IList with
    member x.Item with
      get(index) = index
    member x.Count = 12

 let a = Custom()
 a |> Seq.iter (v -> printfn (v.ToString())) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:11:08.327

`Seq.length`从表面上看， /的类型检查`isEmpty`似乎是错误的。我假设大多数`Seq`函数不会对正交性执行此类检查：`List`/`Array`模块中已经存在特定于类型的版本。为什么要复制它们？

这些检查在 LINQ 中更有意义，因为它只`IEnumerable`直接使用。

# c# - Label.property 参考

> ID：10888913
> 
> 赞同：0
> 
> 时间：2012-06-04T21:53:33.397
> 
> 标签：c#, sql-server-2008

我在“表格单元格”中插入了一个标签（称为Label1），该单元格又​​插入到数据列表中。

为什么在这种情况下，我不能在 Page_Load 方法中使用例如 Label1.Text，**但是当我在数据列表****之外**插入标签时，对 Label1 的任何引用都可以正常工作？

是否有解决方法，因为我需要所述表格单元格中的标签，并且还能够从代码隐藏文件修改其标题（.Text 属性），我计划在其中为其分配存储的值程序。您好，非常感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:02:15.820

`Label`控件是为 a 拥有的**每一**行创建的`DataList`，并且它的`ID`前缀是它所在的每个容器（因此它不再称为 Label1） - 您需要处理`OnItemCreated`或`OnItemDataBound`事件，然后找到并将其转换为`Label Label1 = (Label)e.Item.FindControl("Label1")`，只有在那之后您才能访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T21:58:28.800

如果控件位于数据列表中，则它将针对列表中的每个项目重复。因此，引用数据列表之外的控件是没有意义的，因为 ASP.NET 不知道要引用哪个实例 - 如果没有数据，甚至不会有任何实例！

您可以访问给定数据列表中的项目的标签，但是：

```
DataListItem item = dataList.Items[0]; // or whichever item you want
Label label1 = (Label)item.FindControl("Label1"); 
```

# fluent-nhibernate - Fluent NHibernate 自动映射类约定未应用于整个类层次结构

> ID：10888915
> 
> 赞同：2
> 
> 时间：2012-06-04T21:53:39.893
> 
> 标签：fluent-nhibernate, automapping, convention-over-configur, table-per-subclass

我正在尝试使用 Fluent Nhibernate 自动映射一个简单的继承层次结构，并且我需要为每个表使用与其类稍有不同的名称（下划线而不是 Pascal 大小写）。这似乎是一个使用约定的明显地方。我也想使用 table-per-subclass 策略，但这种组合似乎给我带来了一个问题：该约定仅适用于层次结构的基类。

这是我的自动映射：

```
AutoMap
    .AssemblyOf<BaseRule>()
    .IncludeBase<BaseRule>() // "BaseRule" is an abstract class
    .Conventions.Add( DefaultCascade.All() )
    .Conventions.Add<OracleTableNameConvention>() 
```

我希望我的类如何映射（类名-> 表名）：

```
 abstract class BaseRule -> Base_Rule
  class NumberRule : BaseRule -> Number_Rule
  class PatternStringRule : BaseRule -> Pattern_String_Rule 
```

我实际得到的是：

```
 BaseRule -> Base_Rule
  NumberRule -> NumberRule
  PatternStringRule -> PatternStringRule 
```

如您所见，实际上只更改了基类。这是我现有的约定，以便您可以看到我是如何定义它的：

```
public class OracleTableNameConvention : IClassConvention
{
    public void Apply(IClassInstance instance)
    {
        string fixedName = instance.EntityType.Name.ToUnderscoredNaming();
        instance.Table(fixedName);
    }
} 
```

我还查看了`ISubclassConvention`界面，并且看不到那里可以调整表的名称（这很有意义，子类并不总是在它们自己的表中）。

如果我从我的自动映射中删除该`IncludeBase`行，名称就会变成我想要的，除了它变成每个具体类的表。我想使用每个*子类*的表，将所有公共数据留在一个共享基表中。

我可以为每个名称添加覆盖，如果必须，我会添加，但我宁愿不这样做。

**看起来**这应该是一个明显受支持的行为。如何将命名约定应用于层次结构中的每个表，而无需逐个具体类进行表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T22:00:01.283

当我发布这个问题时，我想通了。

`IJoinedSubclassConvention`是我需要实现的接口。

```
public class OracleSubClassConvention : IJoinedSubclassConvention
{
    public void Apply(IJoinedSubclassInstance instance)
    {
        string fixedName = instance.EntityType.Name.ToUnderscoredNaming();
        instance.Table(fixedName);
    }
} 
```

我通过寻找任何有方法的东西找到了它`Table(string)`。

# java - 为什么我的文件没有上传到我的 java servlet？

> ID：10888919
> 
> 赞同：0
> 
> 时间：2012-06-04T21:54:06.143
> 
> 标签：java, servlets, file-upload, upload, webpage

好吧，我正在尝试从 Web 界面将文件上传到我的 servlet。我一直在按照教程使用 Apache Commons FileUpload 并将其集成到我的 servlet 中。不知何故，我无法设法上传文件。

这是我在网页中的表格：

```
<form class="well" action="GenTreeUploader" method="post" enctype="multipart/form-data">
        <label>Choose your file:</label>
        <center><input type="file" class="input-xlarge" name="wordfile"></center><br>
        <center><span class="help-block">Note: after clicking "Upload file!" all of the data contained in the file will be uploaded to the database</span></center><br>
        <center><input class="btn btn-primary" type="submit" value="Upload file!"></center>  
        <input type="text" name="tester" value="xoxoxo" />
        <input type="hidden" name="action" value="startUpload" />
    </form> 
```

然后这是我的 servlet 代码部分，它应该处理来自请求的文件上传：

```
public void artiUpload(HttpServletRequest request, HttpServletResponse response, HtmlWriter writer) throws ServletException, IOException {
    System.out.println("I'm in upload");
    PrintWriter out = response.getWriter();
    // Check that we have a file upload request
    boolean isMultipart = ServletFileUpload.isMultipartContent(request);
    // Create a factory for disk-based file items

    // Create a factory for disk-based file items
    DiskFileItemFactory factory = new DiskFileItemFactory();

    // Set factory constraints
    factory.setSizeThreshold(maxMemSize);
    factory.setRepository(new File(htmlPath.toString()));
    System.out.println("File path: " + htmlPath.toString());

    // Create a new file upload handler
    ServletFileUpload upload = new ServletFileUpload(factory);

    // Set overall request size constraint
    upload.setSizeMax(maxFileSize);
    System.out.println("Max file size: " + maxFileSize);
    System.out.println("Max file size in memory: " + maxMemSize);
    List items = null;
    try {
        // Parse the request
        items = upload.parseRequest(request);
        System.out.println("Items found: " + items.size());
        out.write(writer.printCenter("File uploading done"));
    } catch (FileUploadException ex) {
        Logger.getLogger(GenTreeUploader.class.getName()).log(Level.SEVERE, null, ex);
        out.write(writer.printCenter("File uploading failed"));
    }
} 
```

这是我从这个 servlet 方法得到的 Tomcat 服务器日志：

```
I'm in upload
File path: D:\Dropbox\StudiesNew\NetbeansProjects\GenTreeUploader\build\web\WEB-INF\classes\Html
Max file size: 10485760
Max file size in memory: 2097152
Items found: 0 
```

好吧，我还通过使用从请求中获取了一些参数： action = request.getParameter(actionText);

正常参数下工作正常，但文件没有上传。我相信在这种情况下解析列表后应该有一个项目，它显示 0 ...

任何人都可以帮忙吗？谢谢。

完整的日志是这个？

```
 Using CATALINA_BASE:   "C:\Users\Arturas\.netbeans\7.1.2\apache-tomcat-7.0.22.0_base"
Using CATALINA_HOME:   "C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.22"
Using CATALINA_TMPDIR: "C:\Users\Arturas\.netbeans\7.1.2\apache-tomcat-7.0.22.0_base\temp"
Using JRE_HOME:        "C:\Program Files\Java\jdk1.7.0_03"
Using CLASSPATH:       "C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.22\bin\bootstrap.jar;C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.22\bin\tomcat-juli.jar"
Bir 05, 2012 2:45:06 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.7.0_03\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\;C:\Program Files\Microsoft SQL Server\110\DTS\Binn\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\;C:\Program Files (x86)\Microsoft SQL Server\110\DTS\Binn\;C:\Program Files\MATLAB\R2010b\runtime\win64;C:\Program Files\MATLAB\R2010b\bin;.
Bir 05, 2012 2:45:07 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8084"]
Bir 05, 2012 2:45:07 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Bir 05, 2012 2:45:07 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 865 ms
Bir 05, 2012 2:45:07 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Bir 05, 2012 2:45:07 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.22
Bir 05, 2012 2:45:07 AM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor GenTreeUploader.xml from C:\Users\Arturas\.netbeans\7.1.2\apache-tomcat-7.0.22.0_base\conf\Catalina\localhost
Bir 05, 2012 2:45:08 AM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor manager.xml from C:\Users\Arturas\.netbeans\7.1.2\apache-tomcat-7.0.22.0_base\conf\Catalina\localhost
Bir 05, 2012 2:45:08 AM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor mrweb.xml from C:\Users\Arturas\.netbeans\7.1.2\apache-tomcat-7.0.22.0_base\conf\Catalina\localhost
Bir 05, 2012 2:45:08 AM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor ROOT.xml from C:\Users\Arturas\.netbeans\7.1.2\apache-tomcat-7.0.22.0_base\conf\Catalina\localhost
Bir 05, 2012 2:45:08 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8084"]
Bir 05, 2012 2:45:08 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Bir 05, 2012 2:45:08 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1396 ms
I'm in upload
File path: D:\Dropbox\StudiesNew\NetbeansProjects\GenTreeUploader\build\web\WEB-INF\classes\Html
Max file size: 10485760
Max file size in memory: 2097152
Items found: 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T23:28:49.030

当请求正文已经通过调用`getParameter()`,`getReader()`或`getInputStream()`在同一个 servlet 的方法内部或也在同一请求上运行的 servlet 过滤器之一的方法`request`内部的方法预先解析时，它将以这种方式失败。另一个可能的原因是您嵌套了 HTML元素，但行为取决于浏览器。`doPost()``doFilter()``<form>`

顺便说一句，HTML`<center>`元素自 1998 年以来已被*弃用*。摆脱它并改用 CSS。

* * *

**更新**：您的更新确认您正在调用`getParameter()`. 当它是一个请求时，`request`你不应该**这样做。**`multipart/form-data`您应该改为使用相同的 Apache Commons FileUpload API 来收集普通表单字段。另请参阅[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet/2424824#2424824)

# css - 3 Column Fluid Div 显示故障：“悬挂”单个 Div

> ID：10888920
> 
> 赞同：0
> 
> 时间：2012-06-04T21:54:09.020
> 
> 标签：css, html, responsive-design, fluid-layout, portfolio

我有一个包含 3 列的响应式流体设计组合。我无法准确定位的 CSS 有问题。

如果我一排正好有 3 个项目，它看起来很好。但是，如果最后一项以只有 1 或 2 列的行结束，则整个格式会失真。这可以通过调整浏览器的大小来看到。

如果您能帮我查明对此的 CSS 修复，我将不胜感激。

示例页面在这里：[http ://bit.ly/KzfN2g](http://bit.ly/KzfN2g)

我相信这是导致问题的主要 CSS 样式，但我可能是错的：

```
 .mosaic-block-three {
    margin-right:3%;
    width:29.3%;
    background:url("../img/progress.gif") no-repeat scroll center center #F5F5F5;
    border:1px solid #FFFFFF;
    box-shadow:0 0 4px 0 #888888;
    float:left;
    margin:10px 40px 30px 0;
    overflow:hidden;
    position:relative;
    width:291px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T23:56:43.177

哇，神圣的注册商标蝙蝠侠！我会放一个

```
<sup>&reg;</sup> 
```

如果我是你:) 但对于手头的问题......

为什么你有这么多只有一个项目的列表？你还有一些没有定义的样式，但我认为你最大的问题是你里面有物品

```
<li> 
```

浮动，而包含的元素不浮动。

尝试浮动 .portfolio-three-item 然后清除其中的内容。在非浮动元素中包含浮动元素（不使用清除类或

```
<br clear="all" /> 
```

使浏览器感到困惑，并且看起来好像没有任何内容需要浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:18:18.273

我能够使用简单的 jQuery 来完成此操作，以在页面加载时获取图像的高度并在 css 中声明高度，然后在窗口调整大小时获取图像的高度并在 css 中重新声明它

$j(文档).ready(函数() {

```
// Set portfolio image item height after images load, 

        $j(".mosaic-backdrop img").load(function(){
         var portfolioItemHeight =  $j(".mosaic-backdrop img").height();
         $j(".portfolio-three-item").css("height", portfolioItemHeight);
        });
// reset portfolio image item height each time window is maximized

        if(screen.width > 1200) {
            $j(".mosaic-backdrop img").load(function(){
             var portfolioItemHeight =  $j(".mosaic-backdrop img").height();
             $j(".portfolio-three-item").css("height", portfolioItemHeight);
            });

        }
// reset portfolio image item height each time window is resized

        $j(window).resize(function() {
         var portfolioItemHeightReized =    $j(".mosaic-backdrop img").height();
         $j(".portfolio-three-item").css("height", portfolioItemHeightReized);
     });

     }); 
```

谢谢@kristina childs，感谢您帮助我意识到高度设置不正确！

# objective-c - UIPickerView 旋转混乱

> ID：10888924
> 
> 赞同：0
> 
> 时间：2012-06-04T21:54:32.290
> 
> 标签：objective-c, ios, ios5, uipickerview

我有一个我目前正在制作的应用程序，它有一个 PickerView 和一个 UIButton。我希望用户点击按钮并使选择器视图显示随机选择。我一直在环顾四周，似乎无法提出任何建议。我想它会类似于 Urbanspoon 应用程序。我知道这只是一段代码，但我想不出它可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:06:14.687

您正在寻找[– selectRow:inComponent:animated:](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPickerView_Class/Reference/UIPickerView.html)

所以做这样的事情：

```
[thePickerView selectRow:(arc4random() % numRows) inComponent:0 animated:YES]; 
```

其中 numRows 是行数。例如，如果行与数组名称相关联，`rowArray`它将是：

```
[thePickerView selectRow:(arc4random() % [rowArray count]) inComponent:0 animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:00:24.223

因此，按下按钮后，您将从 PickerView 的数据源中随机选择一个项目，然后在 PickerView 上调用 - selectRow:inComponent:animated:。

# javascript - 如何使用 jQuery 构造一个完整的 HTML 表格？

> ID：10888925
> 
> 赞同：0
> 
> 时间：2012-06-04T21:54:38.250
> 
> 标签：javascript, jquery

我希望使用 jQuery 构建一个完整的表。

我尝试从这个问题中学习或模仿

[使用 jQuery 创建表 - 追加](https://stackoverflow.com/questions/8749236/create-table-with-jquery-append)

但没有运气。

我想要创建的是

```
<table>
   <thead>
      <tr>                                  
         <th>Problem 5</th>
         <th>Problem 6</th>
      </tr>
   </thead>
   <tbody>
      <tr>
         <td>1</td>
         <td>2</td>
      </tr>
   </tbody>
</table> 
```

我创建的 jQuery 代码是

```
var $table = $('<table/>');

var $thead = $('<thead/>');
$thead.append('<tr>' + '<th>Problem 5</th>' + '<th>Problem 6</th>' + '</tr>';
$table.append(thead);

var $tbody = $('<tbody/>');
$tbody.append( '<tr><td>1</td><td>2</td></tr>' );
$table.append(tbody);

$('#GroupTable').append($table); 
```

但它运行失败。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:59:02.897

您在`$thead`声明中缺少正确的括号：

```
$thead.append('<tr>' + '<th>Problem 5</th>' + '<th>Problem 6</th>' + '</tr>'); 
                                                                            ^ 
```

并且您没有正确附加变量：

```
$table.append($thead);
              ^

$table.append($tbody);
              ^ 
```

这是一个[工作小提琴](http://jsfiddle.net/edelman/eYS4v/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:02:41.537

头，tbody 未定义？$头，$tbody？

```
$table.append(thead); 
```

和

```
$table.append(tbody); 
```

# html - HTML 元字符集应该是小写还是大写？

> ID：10888929
> 
> 赞同：56
> 
> 时间：2012-06-04T21:54:49.217
> 
> 标签：html

通常`UTF`应该大写，因为它是一个缩写。但是，HTML 中的属性通常是小写的。

那么，应该是：`<meta charset="UTF-8"/>`还是`<meta charset="utf-8"/>`？
我知道两者都有效。

谢谢你。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-04T21:58:23.700

charset 的值不区分大小写。

**来自 spec.whatwg.org**

> charset 属性指定文档使用的字符编码。这是一个字符编码声明。如果该属性存在，则其值必须是字符串“utf-8”的不区分大小写的 ASCII 匹配项。

链接到完整文档：[https ://html.spec.whatwg.org/multipage/semantics.html#attr-meta-charset](https://html.spec.whatwg.org/multipage/semantics.html#attr-meta-charset)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-09-30T12:01:40.667

**根据[W3C](http://www.w3.org/TR/html-markup/meta.charset.html)**：

> 对IANA [[字符集]](https://www.iana.org/assignments/character-sets/character-sets.xhtml)注册具有标记为“首选 MIME 名称”的*名称*或*别名字段的任何字符集名称进行*[不区分大小写的匹配；](http://www.w3.org/TR/html-markup/terminology.html#case-insensitive)或者，如果没有任何*别名*字段被如此标记，则注册表中的*名称字段*[不区分大小写匹配。](http://www.w3.org/TR/html-markup/terminology.html#case-insensitive)

 ***该规范没有专门提供*规范*案例。以前，我会建议您只使用`UTF-8`（来自[注册表](https://www.iana.org/assignments/character-sets/character-sets.xhtml)），但是世界正在转向小写，我现在更喜欢它，因为它与[您的所有其他 HTML](https://stackoverflow.com/questions/19808514/is-it-bad-to-use-uppercase-letters-for-html-tags)`utf-8`更好地对齐。***

# glassfish-3 - Glassfish 捆绑包处于意外状态异常

> ID：10888931
> 
> 赞同：3
> 
> 时间：2012-06-04T21:55:07.523
> 
> 标签：glassfish-3, redhat, java-6

所以，基本上：

在 RHEL 6.2 和 Java 6 上有一个独立（无集群）新安装的 Glassfish 3.1.2，没有任何部署的应用程序（真正的新安装）。

我第一次在服务器上启动了默认域 domain1 并在启动/停止之间没有做任何事情就停止了它。

当我再次启动域时，出现以下错误：

```
 Waiting for domain1 to start ...Error starting domain domain1.
The server exited prematurely with exit code 1.
Before it died, it produced the following output:

Launching GlassFish on Felix platform
04.06.2011 18:27:47 BundleProvisioner update
INFO: Updated bundle 1 from /home/glassfisfusr/glassfish3/glassfish/modules/endorsed/jaxb-api-osgi.jar
04.06.2011 18:27:47 BundleProvisioner update
INFO: Updated bundle 2 from /home/glassfisfusr/glassfish3/glassfish/modules/endorsed/javax.annotation.jar
04.06.2011 18:27:47 BundleProvisioner update
INFO: Updated bundle 3 from /home/glassfisfusr/glassfish3/glassfish/modules/endorsed/webservices-api-osgi.jar
04.06.2011 18:27:47 BundleProvisioner update

skipped 

04.06.2011 18:27:49 BundleProvisioner update
INFO: Updated bundle 319 from /home/glassfisfusr/glassfish3/glassfish/modules/autostart/osgi-ee-resources.jar
04.06.2011 18:27:49 OSGiFrameworkLauncher launchOSGiFrameWork
INFO: Updating system bundle
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.sun.enterprise.glassfish.bootstrap.GlassFishMain.main(GlassFishMain.java:97)
        at com.sun.enterprise.glassfish.bootstrap.ASMain.main(ASMain.java:55)
Caused by: org.glassfish.embeddable.GlassFishException: java.lang.IllegalStateException: Bundle in unexpected state.
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiGlassFishRuntimeBuilder.build(OSGiGlassFishRuntimeBuilder.java:164)
        at org.glassfish.embeddable.GlassFishRuntime._bootstrap(GlassFishRuntime.java:157)
        at org.glassfish.embeddable.GlassFishRuntime.bootstrap(GlassFishRuntime.java:110)
        at com.sun.enterprise.glassfish.bootstrap.GlassFishMain$Launcher.launch(GlassFishMain.java:112)
        ... 6 more
Caused by: java.lang.IllegalStateException: Bundle in unexpected state.
        at org.apache.felix.framework.Felix.acquireBundleLock(Felix.java:4856)
        at org.apache.felix.framework.Felix.start(Felix.java:809)
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiGlassFishRuntimeBuilder.build(OSGiGlassFishRuntimeBuilder.java:157)
        ... 9 more
Error stopping framework: java.lang.NullPointerException
java.lang.NullPointerException
        at com.sun.enterprise.glassfish.bootstrap.GlassFishMain$Launcher$1.run(GlassFishMain.java:203) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T23:07:36.650

看看这个错误报告：http://java.net/jira/browse/WSIT-1642?page=com.atlassian.streams.streams-jira-plugin%3Aactivity-stream-issue- [tab](http://java.net/jira/browse/WSIT-1642?page=com.atlassian.streams.streams-jira-plugin%3Aactivity-stream-issue-tab)

以下确实有帮助：

```
rm -rf $GF_HOME/glassfish/domains/domain1/osgi-cache/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T13:15:44.017

删除缓存不是一个好主意。您遇到的问题来自您的系统时间。如果您使用的是基于 Linux 的操作系统，则必须在启动 glassfish 之前将您的系统与 NTP 服务器同步。跑

```
service ntpd stop
ntpdate pool.ntp.org
service ntpd start 
```

如果这没有帮助，请创建文件 /var/lib/ntp/ntp.drift 并将其粘贴到该文件中：

```
server 0.pool.ntp.org
server 1.pool.ntp.org
server 2.pool.ntp.org
server 3.pool.ntp.org 
```

跑 `service ntpd restart`

你就完成了。你现在可以开始 glassfish..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T19:43:22.173

偶尔我们也会得到 (ubuntu 12.04, glassfish 3.0.1, Java(TM) SE Runtime Environment (build 1.6.0_26-b03)

```
[#|2012-06-13T19:17:02.763+0000|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=11;_ThreadName=Thread-1;|ERROR: Error locking file:/opt/glassfish/glassfish/modules/org.eclipse.persistence.jpa.modelgen.jar (java.lang.IllegalStateException: Bundle in unexpected state.)|#]

[#|2012-06-13T19:17:02.764+0000|SEVERE|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=11;_ThreadName=Thread-1;|java.lang.IllegalStateException: Bundle in unexpected state.
    at org.apache.felix.framework.Felix.acquireBundleLock(Felix.java:4474)
    at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1049)
    at org.apache.felix.framework.StartLevelImpl.run(StartLevelImpl.java:264)
    at java.lang.Thread.run(Thread.java:662) 
```

|#]

没有找到任何解决方案，除了有时完全删除 (mv /installationpath/glassfish /tmp/.) 并重新安装 glassfish 工作。您可能还想从 glassfish 运行时用户主目录中删除/移动 .updatetool。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-18T02:41:41.240

使用管理员 asadmin start-domain 运行 cmd

# delphi - 添加 IFileDialogCustomize PushButton 事件

> ID：10888934
> 
> 赞同：3
> 
> 时间：2012-06-04T21:55:28.913
> 
> 标签：delphi

我可以使用 FileSaveDialog1.Dialog.QueryInterface 创建一个按钮，如下所示。您如何设置和处理 OnPushButton 单击事件，以便我可以响应按钮单击？

```
procedure TForm1.FileSaveDialog1Execute(Sender: TObject);
const
  dwVisualGroup1ID: DWORD = 1900;
var
  c: IFileDialogCustomize;
  d: IFileDialogControlEvents;
begin
  if FileSaveDialog1.Dialog.QueryInterface(IFileDialogCustomize, c) = S_OK then
  begin
    // Add a Advanced Button
    c.AddPushButton(dwVisualGroup1ID, 'Advanced');
    c.MakeProminent(dwVisualGroup1ID);
    // Setup the PushButton Click event?

  end; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-04T23:09:48.340

以下在 XE2 中对我来说很好用：

```
type
  TMyFileDialogEvents = class(TInterfacedObject, IFileDialogEvents, IFileDialogControlEvents)
  public
    { IFileDialogEvents }
    function OnFileOk(const pfd: IFileDialog): HResult; stdcall;
    function OnFolderChanging(const pfd: IFileDialog;
      const psiFolder: IShellItem): HResult; stdcall;
    function OnFolderChange(const pfd: IFileDialog): HResult; stdcall;
    function OnSelectionChange(const pfd: IFileDialog): HResult; stdcall;
    function OnShareViolation(const pfd: IFileDialog; const psi: IShellItem;
      out pResponse: DWORD): HResult; stdcall;
    function OnTypeChange(const pfd: IFileDialog): HResult; stdcall;
    function OnOverwrite(const pfd: IFileDialog; const psi: IShellItem;
      out pResponse: DWORD): HResult; stdcall;
    { IFileDialogControlEvents }
    function OnItemSelected(const pfdc: IFileDialogCustomize; dwIDCtl: DWORD;
      dwIDItem: DWORD): HResult; stdcall;
    function OnButtonClicked(const pfdc: IFileDialogCustomize;
      dwIDCtl: DWORD): HResult; stdcall;
    function OnCheckButtonToggled(const pfdc: IFileDialogCustomize;
      dwIDCtl: DWORD; bChecked: BOOL): HResult; stdcall;
    function OnControlActivating(const pfdc: IFileDialogCustomize;
      dwIDCtl: DWORD): HResult; stdcall;
  end;

const 
  dwVisualGroup1ID: DWORD = 1900; 

function TMyFileDialogEvents.OnFileOk(const pfd: IFileDialog): HResult;
begin
  Result := E_NOTIMPL;
end;

function TMyFileDialogEvents.OnFolderChange(const pfd: IFileDialog): HResult;
begin
  Result := E_NOTIMPL;
end;

function TMyFileDialogEvents.OnFolderChanging(const pfd: IFileDialog;
  const psiFolder: IShellItem): HResult;
begin
  Result := E_NOTIMPL;
end;

function TMyFileDialogEvents.OnOverwrite(const pfd: IFileDialog;
  const psi: IShellItem; out pResponse: DWORD): HResult;
begin
  Result := E_NOTIMPL;
end;

function TMyFileDialogEvents.OnSelectionChange(const pfd: IFileDialog): HResult;
begin
  Result := E_NOTIMPL;
end;

function TMyFileDialogEvents.OnShareViolation(const pfd: IFileDialog;
  const psi: IShellItem; out pResponse: DWORD): HResult;
begin
  Result := E_NOTIMPL;
end;

function TMyFileDialogEvents.OnTypeChange(const pfd: IFileDialog): HResult;
begin
  Result := E_NOTIMPL;
end;

function TMyFileDialogEvents.OnItemSelected(const pfdc: IFileDialogCustomize; dwIDCtl: DWORD; dwIDItem: DWORD): HResult;
begin
  Result := E_NOTIMPL;
end;

function TMyFileDialogEvents.OnButtonClicked(const pfdc: IFileDialogCustomize; dwIDCtl: DWORD): HResult;
begin
  if dwIDCtl = dwVisualGroup1ID then begin
    // ...
    Result := S_OK;
  end else begin
    Result := E_NOTIMPL;
  end;
end;

function TMyFileDialogEvents.OnCheckButtonToggled(const pfdc: IFileDialogCustomize; dwIDCtl: DWORD; bChecked: BOOL): HResult;
begin
  Result := E_NOTIMPL;
end;

function TMyFileDialogEvents.OnControlActivating(const pfdc: IFileDialogCustomize; dwIDCtl: DWORD): HResult;
begin
  Result := E_NOTIMPL;
end; 
```

.

```
var
  FileDialog: IFileDialog = nil;
  MyEvents: IFileDialogEvents = nil; 
  MyEventsCookie: DWORD = 0;

procedure TForm1.FileSaveDialog1Execute(Sender: TObject); 
var 
  c: IFileDialogCustomize; 
  d: IFileDialogEvents; 
  cookie: DWORD;
begin 
  if Supports(FileSaveDialog1.Dialog, IFileDialogCustomize, c) then 
  begin 
    // Add a Advanced Button 
    c.AddPushButton(dwVisualGroup1ID, 'Advanced'); 
    c.MakeProminent(dwVisualGroup1ID); 

    // Setup the PushButton Click event 
    d := TMyFileDialogEvents.Create; 
    if Succeeded(FileSaveDialog1.Dialog.Advise(d, cookie)) then
    begin
      FileDialog := FileSaveDialog1.Dialog
      MyEvents := d;
      MyEventsCookie := cookie;
    end;
  end; 
end;

procedure TForm1.Button1Click(Sender: TObject); 
var
  Ok: Boolean;
begin
  FileDialog := nil;
  MyEvents := nil; 
  MyEventsCookie := 0;

  try
    Ok := FileSaveDialog1.Execute;
  finally
    if (FileDialog <> nil) and (MyEventsCookie <> 0) then
      FileDialog.Unadvise(MyEventsCookie);
    FileDialog := nil;
    MyEvents := nil; 
    MyEventsCookie := 0;
  end;

  if Ok then ...
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T22:06:02.243

您需要实现 IFileDialogControlEvents。然后调用 IFileDialog.Advise 传递您的 IFileDialogControlEvents 接口。单击按钮时将调用您的 IFileDialogControlEvents.OnButtonClicked 方法。

# javascript - II 如何创建一个简单的 javascript 页面，允许用户输入文本并显示它？

> ID：10888935
> 
> 赞同：0
> 
> 时间：2012-06-04T21:55:47.837
> 
> 标签：javascript, html

不久前我参加了网络编程课程，但我基本上是从头开始重新学习所有内容。

我只想使用 html/javascript 构建一个非常简单的页面，该页面有一个框供用户输入问题或短语以及一个提交按钮。

当用户按下提交按钮时，问题/短语会立即显示在下方的气泡中。每个问题/短语必须显示在单独的气泡中，您可以输入多个问题/短语。

我正在寻找有关使用 javascript 完成此任务的方法的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:43:23.513

我建议使用 jQuery，这是一个很棒的 javascript 库，可以让事情变得更简单。

[http://jquery.com/](http://jquery.com/)

他们在[http://docs.jquery.com/Tutorials上有很棒的教程](http://docs.jquery.com/Tutorials)

在[http://docs.jquery.com/Tutorials:Safer_Contact_Forms_Without_CAPTCHAs#Simple_Contact_Form 使用 ajax 和表单：](http://docs.jquery.com/Tutorials:Safer_Contact_Forms_Without_CAPTCHAs#Simple_Contact_Form:)

# javascript - 并非所有循环都已处理，13200 个中只有 5655 个

> ID：10888939
> 
> 赞同：0
> 
> 时间：2012-06-04T21:56:08.817
> 
> 标签：javascript, jquery, mysql, ajax

我有 2 个 javascript 循环，一个嵌套在另一个循环中，它对服务器端进行 AJAX 调用。循环生成一对数字（纬度坐标），然后通过`.getJSON()`将其插入 MySQL 表的位置传递给服务器。

**问题：**脚本运行了大约 6 分钟，总共有 13200 次 AJAX 调用。在 chrome 的 webdeveloper 工具中，它说`5656/13646 requests 536.20KB/2.15MB`. 当我检查表中插入的条目时，我只看到 5655 行！剩下的怎么了？

**JS代码**

```
for(var i = 0; i < 110; i++) {
    var lat_current = lat_start + lat_increment * i;

    for(var j = 0; j < 120; j++) {

        // Do some calculations
        // More code here...

        // Insert LatLng into database
        $.getJSON(base_url + 'insert_latlng_to_crawl', 
            {
                lat: lat_current,
                lng: lng_current
            }, 
            function(json){
            });

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:01:52.170

它可能正在计算返回值。

5655/13200

5655 是您发送的内容，/ 之后的数字是总数（包括返回值，即您的第一个数字的 2 倍）。发送和接收 json 值。我假设某种成功状态？

另外问题是有多少重复值被插入到您的表中？你的桌子上有唯一的钥匙吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:17:37.740

您应该创建一个 javascript 对象，然后将其传递给服务器并在服务器端处理它

```
 var coords=Array();//Create an array to store the calculations
 for(var i = 0; i < 110; i++) {
    var lat_current = lat_start + lat_increment * i;

    for(var j = 0; j < 120; j++) {

    // Do some calculations
    // More code here...

    // append the results to the array
    coords.push({lat: lat_current, lng: lng_current});

}

//Make the ajax call to the server, sending the completed Array JSON encoded
coords= JSON.stringify(coords);
$.ajax({
  type: 'POST',//you should send big chunks of data via POST
  url: url,
  data: coords,
  success: success,
  dataType: JSON
}); 
```

# testing - Netty SSL 处理程序单元测试

> ID：10888940
> 
> 赞同：5
> 
> 时间：2012-06-04T21:56:12.837
> 
> 标签：testing, ssl, handler, netty

我即将着手为我们的服务器配置 ssl 处理程序。我已经看过几次安全聊天示例。我只是想制定如何使用嵌入测试类编写单元测试。

有人有 ssl 处理程序设置的 netty 单元测试示例吗？我想知道是否有人愿意分享他们在这方面的努力。我仍然不确定如何开始。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T23:53:44.647

我必须对包含 StartTLS 和压缩的 Netty 处理程序管道进行单元测试。我发现使用环回套接字比尝试连接编码器/解码器嵌入器更容易。

我确实将嵌入器用于更独立的测试，专门处理单独的编码和解码处理程序，但是在测试完整的管道时，我认为环回套接字是要走的路。

# objective-c - 在 iOS 中创建 PDF 注释

> ID：10888950
> 
> 赞同：15
> 
> 时间：2012-06-04T21:56:56.447
> 
> 标签：objective-c, ios, pdf, annotations, quartz-2d

我一直在开发支持注释的 pdf 查看器，我需要能够保存用户创建的新注释。我已经看过很多关于如何绘制文本/线条/图像的示例，但这只是扁平化的内容，我需要创建实际的注释对象

我没有找到关于它的文档或示例，所以如果有人能指出我正确的方向，我将非常感激

干杯!

编辑：经过几个月的工作，我们可以发布 v1。我们最终使用了一个开源的 c++ 库，并且经历了巨大的痛苦来使它能够为 iOS 编译。负责那件事的人不再在公司工作，所以我们不能公布我们是如何做到的

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T12:27:39.623

好吧，有几个付费/免费源代码可用，包括 pspdfkit、fastpdfkit 等。找到下面的链接：

**良好的维护、支持和功能，但非常昂贵：**

[http://pspdfkit.com/](http://pspdfkit.com/)

**看起来不错，但不维护/支持：**

[http://fastpdfkit.com/](http://fastpdfkit.com/)

[https://github.com/vfr/Reader/](https://github.com/vfr/Reader/)

**其他 StackOverflow 线程：**

[为pdf添加注释](https://stackoverflow.com/questions/6914906/add-annotation-to-pdf)

[在 pdf 上添加注释](https://stackoverflow.com/questions/10373982/add-an-annotation-on-a-pdf)

[在 ios 中使用 Quartz 2d 进行注释（注释、评论）](https://stackoverflow.com/questions/11505782/annotation-notes-comments-using-quartz-2d-in-ios)

**博客：**

[http://codecanyon.net/item/html-pdf-viewer-ios-xcode-project/154673](http://codecanyon.net/item/html-pdf-viewer-ios-xcode-project/154673)

[http://www.binpress.com/app/pdftouch-sdk-for-ios/859](http://www.binpress.com/app/pdftouch-sdk-for-ios/859)

**对于免费/开源应用程序，您可以查看**

[http://poppler.freedesktop.org/](http://poppler.freedesktop.org/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-26T02:42:57.447

**请在使用此框架之前阅读[问题](https://github.com/lazyprogram/LazyPDFKit/issues)，此开发人员不再维护，并且存在一些严重问题。**

* * *

我在 GitHub 的 IOS 中创建了一个用于 PDF 注释的开源框架。它同时支持 iPhone 和 iPad。请在[这里查看](https://github.com/lazyprogram/LazyPDFKit)。

# javascript - 使用 Google Map API v3 的国家边界

> ID：10888958
> 
> 赞同：11
> 
> 时间：2012-06-04T21:58:01.243
> 
> 标签：javascript, google-maps

无论如何，我可以使用谷歌地图 API 获得多边形坐标值中的国家边界。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T01:24:28.903

看到这个类似的问题： [Google Maps V3: Draw German State Polygons?](https://stackoverflow.com/questions/10874686/google-maps-v3-draw-german-state-polygons)

FusionTables 中的自然地球数据集中有可用的国家多边形。您可以随意设置它们的样式。

我用它来创建这个例子： [http ://www.geocodezip.com/v3_FusionTablesLayer_worldmap_linkto.html](http://www.geocodezip.com/v3_FusionTablesLayer_worldmap_linkto.html)

这是一个使用 KmlLayer 的示例： [http ://www.geocodezip.com/v3_GoogleEx_layer-kml_world_countries_simple.html](http://www.geocodezip.com/v3_GoogleEx_layer-kml_world_countries_simple.html)

**代码片段：**

```
var kmlLayer = null;
var map = null;

function openIW(layerEvt) {
  if (layerEvt.row) {
    var content = layerEvt.row['admin'].value;
  } else if (layerEvt.featureData) {
    var content = layerEvt.featureData.name;
  }
  document.getElementById('info').innerHTML = "you clicked on:<br>" + content;
}

function initialize() {
  var chicago = new google.maps.LatLng(36.4278, -15.9);
  var myOptions = {
    zoom: 0,
    center: chicago,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }

  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  google.maps.event.addListener(map, "click", function() {
    document.getElementById('info').innerHTML = "";
  });

  kmlLayer = new google.maps.KmlLayer('http://www.geocodezip.com/geoxml3_test/world_countries_kml.xml', {
    preserveViewport: true,
    suppressInfoWindows: true
  });
  kmlLayer.setMap(map);

  google.maps.event.addListener(kmlLayer, 'click', openIW);
}
google.maps.event.addDomListener(window, 'load', initialize);
```

```
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<table>
  <tr>
    <td>
      <div id="map_canvas" style="height:200px; width:300px;"></div>
    </td>
    <td>
      <div id="info"></div>
    </td>
  </tr>
</table>
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-07T18:34:59.453

如果您想更好地控制显示的边界，我建议使用`google.maps.Data`图层而不是 Fusion Tables。融合表和融合层有其局限性，例如在 geocodezip 示例中的世界地图上，您可以看到，如果您缩小地图，边界将折叠为点。使用[数据层](https://developers.google.com/maps/documentation/javascript/datalayer)，您可以设置特定边界的样式，或隐藏它们。`Fusion Layer`只允许有条件的样式更改。您还可以添加自己的`click`、、、`mouseover`侦听`mouseout`器，可以动态更改边界层等等。当然，有时`Fusion Layer`是更好的选择，例如，如果您的数据包含在 Fusion Tables 中，但如果您想要更多的控制权，那就`Data Layer`更值得选择了。

在我的下一个工作示例中，我展示了使用示例渲染的世界国家和美国国家边界`Data Layer`。您当然可以使用自己的边界文件。如果您没有可用的 GeoJson 版本（只有 Shapefile 或 KML 文件），您可以使用 mapshaper 等实用程序将它们转换为[GeoJson](https://github.com/mbloch/mapshaper)（只需运行`mapshaper -i myshp.shp -o format=geojson out.geo.json`：）

```
var map = null;
  var my_boundaries = {};
  var data_layer;
  var info_window;

  //initialize map on document ready
  $(document).ready(function(){
  	var latlng = new google.maps.LatLng(40.723080, -73.984340); //you can use any location as center on map startup
  	var myOptions = {
  		zoom: 2,
  		center: latlng,
  		mapTypeControl: true,
  		mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
  		navigationControl: true,
  		mapTypeId: google.maps.MapTypeId.ROADMAP
  	};
  	map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  	google.maps.event.addListener(map, 'click', function(){
  		if(info_window){
  			info_window.setMap(null);
  			info_window = null;
  		}
  	});

	$('#boundary_load_select').change(function(){
		if($(this).val()==1){
			loadBoundariesFromGeoJson("https://raw.githubusercontent.com/matej-pavla/Google-Maps-Examples/master/BoundariesExample/geojsons/world.countries.geo.json");
		}else{
			loadBoundariesFromGeoJson("https://raw.githubusercontent.com/matej-pavla/Google-Maps-Examples/master/BoundariesExample/geojsons/us.states.geo.json");
		}
	});
	loadBoundariesFromGeoJson("https://raw.githubusercontent.com/matej-pavla/Google-Maps-Examples/master/BoundariesExample/geojsons/world.countries.geo.json");
  });

  function initializeDataLayer(){
	if(data_layer){
		data_layer.forEach(function(feature) {
		    data_layer.remove(feature);
		});
		data_layer = null;
	}
	data_layer = new google.maps.Data({map: map}); //initialize data layer which contains the boundaries. It's possible to have multiple data layers on one map
  	data_layer.setStyle({ //using set style we can set styles for all boundaries at once
  		fillColor: 'white',
  		strokeWeight: 1,
  		fillOpacity: 0.1
  	});

  	data_layer.addListener('click', function(e) { //we can listen for a boundary click and identify boundary based on e.feature.getProperty('boundary_id'); we set when adding boundary to data layer
  		var boundary_id = e.feature.getProperty('boundary_id');
  		var boundary_name = "NOT SET";
  		if(boundary_id && my_boundaries[boundary_id] && my_boundaries[boundary_id].name) boundary_name = my_boundaries[boundary_id].name;
  		if(info_window){
  			info_window.setMap(null);
  			info_window = null;
  		}
  		info_window = new google.maps.InfoWindow({
  			content: '<div>You have clicked a boundary: <span style="color:red;">' + boundary_name + '</span></div>',
  			size: new google.maps.Size(150,50),
  			position: e.latLng, map: map
  		});
  	});

	data_layer.addListener('mouseover', function(e) {
		data_layer.overrideStyle(e.feature, {
			strokeWeight: 3,
			strokeColor: '#ff0000'
		});
	});

	data_layer.addListener('mouseout', function(e) {
		data_layer.overrideStyle(e.feature, {
			strokeWeight: 1,
			strokeColor: ''
		});
	});
  }

  function loadBoundariesFromGeoJson(geo_json_url){
	initializeDataLayer();
  	$.getJSON(geo_json_url, function(data){
  		if(data.type == "FeatureCollection"){ //we have a collection of boundaries in geojson format
  			if(data.features){
  				for(var i = 0; i < data.features.length; i++){
					var boundary_id = i + 1;
  					var new_boundary = {};
  					if(!data.features[i].properties) data.features[i].properties = {}; 
					data.features[i].properties.boundary_id = boundary_id; //we will use this id to identify boundary later when clicking on it
  					data_layer.addGeoJson(data.features[i], {idPropertyName: 'boundary_id'});
					new_boundary.feature = data_layer.getFeatureById(boundary_id);
  					if(data.features[i].properties.name) new_boundary.name = data.features[i].properties.name;
					if(data.features[i].properties.NAME) new_boundary.name = data.features[i].properties.NAME;
  					my_boundaries[boundary_id] = new_boundary;
  				}
  			}
			if(my_boundaries[24]){ //just an example, that you can change styles of individual boundary
				data_layer.overrideStyle(my_boundaries[24].feature, {
					fillColor: '#0000FF',
					fillOpacity: 0.9
				});
			}
  		}
  	});
  }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load("maps", "3",{other_params:"sensor=false"});
</script>
<body style="margin:0px; padding:0px;" >
	<select id="boundary_load_select">
		<option value="1">Load World Boundaries</option>
		<option value="2">Load US States Boundaries</option>
	</select>
	<div id="map_canvas" style="height:400px; width:500px;"></div>
</body>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:09:42.500

我想通过获得边界，你想在它们的边界上绘制多边形。为此，您必须知道有助于绘制多边形的坐标。我只为美国做过这件事。我有所有州的所有坐标。我在每个州都画了多边形。这使美国突出。

你可以看到我这个[问题](https://stackoverflow.com/questions/6388590/highlighting-borders-of-state-and-cities-of-us-in-google-map-api-3)的美国解决方案。但是对于其他国家/地区，您必须需要知道坐标。

# java - Eclipse 部署程序集：找不到条目错误

> ID：10888960
> 
> 赞同：2
> 
> 时间：2012-06-04T21:58:03.530
> 
> 标签：java, eclipse, jakarta-ee

我有一个正在使用 Eclipse Indigo 开发的 Web 应用程序。我今天遇到了一个错误，我在 Deployment Assembly 下添加的项目显示错误“找不到条目：SystemsLib”，但我可以很好地删除和读取项目（但错误仍然存​​在）。

有谁知道是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-10T18:19:15.703

在我的情况下，我必须通过选中“强制更新快照/发布”来“更新 Maven 项目”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T23:26:14.477

好的，所以我不确定为什么会发生这种情况，但我的一个同事设法解决了它。

这些库中的某些内容发生了变化，这就是造成这种情况的原因。删除它们并将它们从 SVN 拉回来修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-27T21:04:13.490

将以下内容添加到 xpath 位置 /projectDescription/natures 的 .project 文件中。

```
<nature>org.eclipse.wst.common.modulecore.ModuleCoreNature</nature> 
```

然后重启eclipse。

对于我自己，我在多项目设置中添加到我的 build.gradle 文件后遇到了这个错误`apply plugin: 'eclipse'`，然后运行：

```
.\gradlew cleanEclipse
.\gradlew eclipse 
```

我切换到`apply plugin: 'eclipse-wtp'`它并自动添加了日食性质（和其他几个）。

使用 4.8.1 年级

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-11T13:29:31.930

Eclipse 使您能够通过资源过滤器排除某些文件或目录。您可能希望对包含大量运行项目不需要的文件的目录执行此操作。

为了解决类似的问题（Eclipse 找不到我的 WebContent 文件夹），我必须右键单击我的项目并转到 Preferences -> Resource -> Resource Filters。由于某种原因，我的 WebContent 文件夹被排除在外。尝试删除排除项，您应该会再次看到您的目录。

如果您想在 .project 文件中查看它，Eclipse 会将此设置保存在该文件中。

# c# - Kinect 初始化错误（在本机 DLL 中失败。HRESULT=0x8004022b。）

> ID：10888962
> 
> 赞同：1
> 
> 时间：2012-06-04T21:58:07.100
> 
> 标签：c#, dll, initialization, kinect, hresult

我一直在用 kinect XBOX 360 开发一段时间。今天，在连接不同的 kinect 设备（XBOX 360）后，我开始在初始化行出现错误：

```
 kinect.Initialize(RuntimeOptions.UseSkeletalTracking | RuntimeOptions.UseDepthAndPlayerIndex | RuntimeOptions.UseColor); 
```

我得到的错误：

> 本机 DLL 失败。HRESULT=0x8004022b。

堆栈跟踪显示：

> 在 Microsoft.Research.Kinect.Nui.SkeletonEngine..ctor（运行时 mainNui，CINuiInstanceHelper nuiInstance）

我已经尝试过：

1.  重新安装所有与 kinect 相关的驱动程序并重新启动。
2.  切换回我正在使用的旧 kinect 传感器。
3.  重新安装kinect sdk（我使用的版本是：Microsoft Kinect 1.0 Beta2 SDK v.1.0.0.45
4.  以下链接 - [http://social.msdn.microsoft.com/Forums/en-US/kinectsdk/thread/5b9ffac3-86c0-4147-a6c7-f8e4bbc73c56](http://social.msdn.microsoft.com/Forums/en-US/kinectsdk/thread/5b9ffac3-86c0-4147-a6c7-f8e4bbc73c56) - 谈论查找注册表项，但我不明白如何做。
5.  根据此链接 - [http://msdn.microsoft.com/en-us/library/ms919477.aspx](http://msdn.microsoft.com/en-us/library/ms919477.aspx)这是一个错误代码：

    > VFW_E_SAMPLE_REJECTED 此样本无法呈现。0x8004022B 555

有没有办法可以用它来解决问题？

我正在运行win7 64位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:21:01.233

尝试使用[Kinect for Windows SDK **1.5**](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)。现在已经有几个星期了。

API 应该与 1.0 beta 中的大部分相同，但是当`using`它们出现时，您将不得不更改某些命名空间的名称。

此外，您仍然可以将 Kinect for Xbox360 用于开发目的，除非您想使用近距离模式进行深度采集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T02:11:15.660

就像 Chris Ortner 所说，您应该切换到完整版，因为它更有效。你可以在[这里](http://kinectforwindows.com)找到它。如果您担心必须转换所有代码，请查看[此处](http://robrelyea.wordpress.com/2012/02/01/k4w-details-of-api-changes-from-beta2-to-v1-managed/)和[此处](http://robrelyea.wordpress.com/2012/02/01/k4w-code-migration-from-beta2-to-v1-0-managed/)。如果您担心转换类似的代码`getDisplayPosition`，请参阅[将 Kinect 方法从 Beta 2 转换为版本 1](https://stackoverflow.com/questions/10367582/converting-kinect-methods-from-beta-2-to-version-1)。如果您需要更多转换帮助，请询问！希望这可以帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T16:53:24.903

我有这个错误。这与驱动程序或版本无关。

Kinect 传感器使用大量 USB 带宽，因此必须将其安装在自己的 USB 控制器上。尝试不同的 USB 端口，直到它正常工作。您可以使用设备管理器查看哪些设备位于哪些控制器上：查看 > 按连接的设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T23:19:24.400

非常感谢你的帮助。

我不希望将 Windows 的 kinect 更改为时间轴。[由于这个链接](http://social.msdn.microsoft.com/Forums/en-US/kinectsdk/thread/1edc452e-2f86-4426-97d5-2161ba932e69)就像一个魅力，我能够解决这个问题。解决此问题的步骤是： 1.从所有 USB 端口卸载所有 kinect 驱动程序。2.卸载kinect sdk。3.重新安装 Kinect SDK。4.禁用网络适配器。5.插入kinect传感器。

**这个想法是重新安装所有驱动程序并阻止它从 Windows 更新获取驱动程序。**

我感谢您的帮助。

谢谢，奥德

# ruby - 尝试获取活动的 Google Plus 评论

> ID：10888964
> 
> 赞同：2
> 
> 时间：2012-06-04T21:58:22.733
> 
> 标签：ruby, rest, google-plus

我一直在尝试使用 Google Plus API（他们是如何做到这一点的，这超出了我的理解），并且我正在尝试获取所有用户的评论（或者至少是最近的评论）。

不幸的是，谷歌决定通过一个电话使这个无法访问，所以我一直在尝试访问用户的所有活动，以及每个用户的评论列表。为此，我一直在使用[google_plus](https://github.com/seejohnrun/google_plus/) gem。

我可以拉一个用户，没问题。但是，对于我拉起的每个用户，他们的活动似乎都是`nil`. 此外，如果我尝试通过 id 获取活动，也会返回`nil`. 例如，我尝试使用 107200121064812799857 的 id来点击[此活动，但我什么也没得到。](https://plus.google.com/107200121064812799857/posts/GkyGQPLi6KD)

我什至尝试过使用[Google 的 API 测试工具来尝试](https://developers.google.com/+/api/latest/comments/list)点击此活动（使用上述 ID），*但它*甚至似乎都找不到它。

有人可以解释这里发生了什么吗？也许我没有使用正确的 ID，或者其他什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:46:42.377

> 我什至尝试使用 Google 的 API 测试工具来尝试点击此活动（使用上述 ID） comments.list API 需要活动 ID，但您传递的是 Google+ 个人资料 ID。

使用 comments.list api 时，您需要传递有效的活动 ID。

对于 Google+ 上的这篇文章：https: [//plus.google.com/107200121064812799857/posts/GkyGQPLi6KD](https://plus.google.com/107200121064812799857/posts/GkyGQPLi6KD)

*   用户ID为：107200121064812799857
*   活动 ID（由 API 使用）为：z13qd5zouuebcpauy23tuftwdsylxflvs

以下是列出该活动 ID 的评论的方法： [https ://developers.google.com/apis-explorer/#p/plus/v1/plus.comments.list?activityId=z13qd5zouuebcpauy23tuftwdsylxflvs&alt=json](https://developers.google.com/apis-explorer/#p/plus/v1/plus.comments.list?activityId=z13qd5zouuebcpauy23tuftwdsylxflvs&alt=json)

# php - 如何在php中获取mssql中下一个增量的数量？

> ID：10888965
> 
> 赞同：3
> 
> 时间：2012-06-04T21:58:23.083
> 
> 标签：php, mysql, sql-server

> **可能重复：**
> [如何在 PHP 中的 MSSQL 中获取插入 ID？](https://stackoverflow.com/questions/574851/how-to-get-insert-id-in-mssql-in-php)

我会做 MYSQL

```
SHOW TABLE STATUS LIKE 'image' 
```

在mssql中，叹息，我不知道该怎么做......

请指教.. ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T22:13:35.250

你可以试试这个来获得下一个身份。

`SELECT IDENT_CURRENT('image') + IDENT_INCR('image')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:13:42.583

你可以使用这个：

```
SELECT IDENT_CURRENT ('image') 
```

然后加1得到下一个。

它比使用 max(id)+1 更好，因为最新的 id 可能已被删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T22:09:17.277

您可以使用最大值 +1。就像是

```
Select max(id)+1 from image; 
```

# asp.net-mvc-3 - 如何完成剃须刀部分？

> ID：10888966
> 
> 赞同：1
> 
> 时间：2012-06-04T21:58:23.483
> 
> 标签：asp.net-mvc-3, html, razor

我认为这是：

```
 <input id="@Html.TextBoxFor(m => m.UserName)"  type="text" placeholder="Username" autofocus required>
    <input id="(@Html.PasswordFor(m => m.Password))"  type="password" placeholder="Password" required> 
```

它的工作，但我的结果是 ![在此处输入图像描述](../Images/b7f1be848bedf7b6bd6d6b89fd81afe5.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T22:04:42.403

要么你想把 HTML 作为标签：

```
<input id="UserName"  type="text" placeholder="Username" value="@Model.UserName" autofocus required />
<input id="Password"  type="password" placeholder="Password" value="@Model.Password" required /> 
```

或者让 Razor 为你做这件事：

```
@Html.TextBoxFor(m => m.UserName);
@Html.PasswordFor(m => m.Password); 
```

你把它混合在一起。您的示例从纯 HTML 开始，然后在纯 HTML 中找到呈现另一个输入标签的 Razor 命令。当您需要返回模型类型时，首选 Razor 代码。

# python - 在openpyxl中插入图像

> ID：10888969
> 
> 赞同：27
> 
> 时间：2012-06-04T21:58:28.240
> 
> 标签：python, xlsx, openpyxl

是否可以使用 openpyxl 插入图像（jpeg、png 等）？

基本上我想在它下面放置一个带有图表的生成图像。

我在文档中没有看到任何内容，与代码的成熟度相比，这似乎有点缺乏。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-18T18:07:08.073

下面在单元格 A1 中插入图像。根据您的需要调整图像位置或自己处理 PIL 图像的创建并将其交给`Image()`

```
import openpyxl

wb = openpyxl.Workbook()
ws = wb.worksheets[0]
img = openpyxl.drawing.image.Image('test.jpg')
img.anchor = 'A1'
ws.add_image(img)
wb.save('out.xlsx') 
```

在旧版本的 openpyxl 中，以下工作：

```
import openpyxl

wb = openpyxl.Workbook()
ws = wb.worksheets[0]
img = openpyxl.drawing.Image('test.jpg')
img.anchor(ws.cell('A1'))
ws.add_image(img)
wb.save('out.xlsx') 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-03-14T08:12:34.043

在当前版本的 openpyxl（至少到 2.4.5）中，您必须像这样调用 Image：

`img = openpyxl.drawing.image.Image('test.jpg')`

使用 Anthon 的示例：

```
import openpyxl

wb = openpyxl.Workbook()
ws = wb.worksheets[0]
img = openpyxl.drawing.image.Image('test.jpg')
img.anchor(ws.cell('A1'))
ws.add_image(img)
wb.save('out.xlsx') 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-07-27T20:40:55.290

提供有关如何执行此操作的完整更新。此解决方案使用 openpyxl 版本 2.4.5。

我将图像下载到本地目录，打开现有工作簿并与插入的图像一起保存。

```
import openpyxl
from openpyxl import load_workbook
from openpyxl import Workbook
from openpyxl.drawing.image import Image
from openpyxl.utils import coordinate_from_string

openpyxl_version = openpyxl.__version__
print(openpyxl_version)  #to see what version I'm running

# downloaded a .png to local directory manually from
# "https://www.python.org/static/opengraph-icon-200x200.png"

#change to the location and name of your image
png_loc = r'c:\users\me\opengraph-icon-200x200.png'

# test.xlsx already exists in my current directory 

wb = load_workbook('test.xlsx')
ws = wb.active
my_png = openpyxl.drawing.image.Image(png_loc)
ws.add_image(my_png, 'B3')
wb.save('test.xlsx') 
```

结果：

[![在此处输入图像描述](../Images/0d1df0fdd86914e1123c0eb3fe76426a.png)](https://i.stack.imgur.com/cJKIk.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-16T05:34:26.393

这段代码对我有用：

```
import openpyxl

wb = openpyxl.Workbook()
ws = wb.worksheets[0]
ws.merge_cells('A1:A3')
img = openpyxl.drawing.image.Image('image.jpg')
row_number = 1
col_idx = 1
cell = ws.cell(row=row_number, column=col_idx)
ws.add_image(img)
wb.save('output.xlsx') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-05T10:38:12.307

补充一下，我一直在使用 openpyxl==2.5.6 （使用 Python3.65），我不得不使用`img.anchor('A1')`而不是`img.anchor(ws.cell('A1'))`.

```
import openpyxl

wb = openpyxl.Workbook()
ws = wb.worksheets[0]
img = openpyxl.drawing.Image('test.jpg')
img.anchor('A1')
ws.add_image(img)
wb.save('out.xlsx') 
```

# html - 尝试居中对齐 UL，但宽度默认为 100%

> ID：10888970
> 
> 赞同：1
> 
> 时间：2012-06-04T21:58:28.300
> 
> 标签：html, css, html-lists

[http://anaya.sonikastudios.com/](http://anaya.sonikastudios.com/)

的HTML：

```
<div id="menubar" class="grid_12 alpha omega">
    <ul id="menu">
        <li><a href="#" title="Diamond Engagement Ring Sets">Engagement Sets</a></li>
        <li><a href="#" title="Diamond Solitaires">Solitaires</a></li>
        <li><a href="#" title="Diamond Three Stone Rings">Three Stone Rings</a></li>
        <li><a href="#" title="Diamond Anniversary Rings">Anniversary Rings</a></li>
        <li><a href="#" title="Diamond Gentleman's Rings">Gent's Rings</a></li>
        <li><a href="#" title="Diamond Earrings">Earrings</a></li>
        <li><a href="#" title="Diamond Pendants">Pendants</a></li>
        <li><a href="#" title="Diamond Bracelets">Bracelets</a></li>
    </ul>
</div> 
```

很简单，真的。

然后我们有CSS：

```
#menubar {
    height: 22px;
    border-top: 1px solid #fff;
    border-bottom: 1px solid #fff;
    background-image: url('/images/menubar_bg.png');
    background-repeat: repeat-y;
    text-align: center;
}

#menu {
    padding:0px;
    height: 20px;
    list-style:none;
    white-space: nowrap;
    position: relative;
    margin: 1px auto;
}

#menu li {
    display:inline;
    padding: 0px 11px 0px 10px;
    margin: 5px 0px;
    list-style:none;
    position: relative !important;
    background-image: url('/images/menu_item_tick.png');
    background-position: right center;
    background-repeat: no-repeat;
    text-align: center;
    float: left;
} 
```

我试着把宽度：自动；在 UL 元素（#menu）上，但没有用...我希望 UL 元素不居中，而不是自动 100% 的宽度 - 它应该适应内容，以及其中的 LI 元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T22:09:02.050

`float: left`从你的`<li>`元素中移除 并且意志`<ul>`居中。

如果您出于某种原因必须使`<li>`元素浮动，请查找有关水平居中浮动列表的信息，例如此处解释的示例： http: [//matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-完全跨浏览器支持](http://matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-full-cross-browser-support)。

# c# - 如何使用百分比设置gridview的大小？

> ID：10888974
> 
> 赞同：0
> 
> 时间：2012-06-04T21:58:37.630
> 
> 标签：c#, gridview, size, pixels

如何在 C# 中按百分比设置 gridview 的大小？我希望它适用于所有屏幕尺寸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T21:59:52.910

使用锚点

您可以使用 Dock，或者使用 Anchor 属性进行更精确的控制。通过将 Anchor 设置为 Left、Right、Top、Bottom，控件将随窗口缩放。通过将 Anchor 设置为 Right，控件将沿右边框移动。通过将 Anchor 设置为 Top 和 Bottom，控件将垂直缩放，但具有固定的宽度。

```
myGridView.Anchor = AnchorStyles.Top | AnchorStyles.Bottom | AnchorStyles.Left | AnchorStyles.Right; 
```

可选对接

```
myGridView.Dock = DockStyle.Fill; 
```

# php - 获取最后输入行的 AUTO_INCREMENT

> ID：10888975
> 
> 赞同：0
> 
> 时间：2012-06-04T21:58:43.933
> 
> 标签：php, mysql, auto-increment

我有一个简单的问题。

我正在使用 PHP 将信息放入 MySQL 中，并且我有一个 auto_increment 字段，我将独自离开。

如何获取刚刚输入的行中的 auto_increment 字段的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:00:40.930

干得好：

mysql_insert_id()

[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T22:01:15.867

来自[php.net/mysql_insert_id](http://php.net/mysql_insert_id)

```
mysql_query("INSERT INTO mytable (product) values ('kossu')");
printf("Last inserted record has id %d\n", mysql_insert_id()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T22:02:00.857

这是三种不同的方法，来自三个可以与 MySQL 交互的常用库（mysql、mysqli、pdo）

[`mysql_insert_id(...)`](http://php.net/manual/en/function.mysql-insert-id.php)【程序功能】

[`mysqli::$insert_id`](http://www.php.net/manual/en/mysqli.insert-id.php)[OOP 属性]

[`PDO::lastInsertId(...)`](http://www.php.net/manual/en/pdo.lastinsertid.php)[OOP方法]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T22:15:22.227

PDO::lastInsertId — 返回最后插入的行或序列值的 ID

[`PDO::lastInsertId()`](http://www.php.net/manual/en/pdo.lastinsertid.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-04T22:01:53.353

```
SELECT MAX(that_field) AS last_auto_increment_value FROM that_table; 
```

或者

```
SELECT auto_increment -1 AS last_auto_increment_value
FROM information_schema.tables 
WHERE table_name='that_table'
AND table_schema = 'that_database'; 
```

或者

```
mysql_insert_id() //in PHP 
```

# java - 运行时切换运行配置

> ID：10888977
> 
> 赞同：1
> 
> 时间：2012-06-04T21:58:58.700
> 
> 标签：java, eclipse, debugging, hotswap

在 Eclipse 中，是否可以将`Run`ning ( `Ctrl`+ ) 模式的应用程序切换`F11`到`Debug`( `F11`) 模式？

我知道当程序在调试模式下运行时，可以在不停止它的情况下更改代码（热代码替换）。我希望运行配置有类似的东西。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:06:02.370

不是真的，除非你从一些命令行开关开始，这意味着你基本上是在调试模式下开始的，但在启动时没有连接到客户端，但允许稍后附加调试客户端（可能是远程的）。

为什么不总是在调试中启动它？

热代码替换是调试接口 (JPDA) 的一部分（从 java 1.4 开始），因此在正常运行模式下不可行。

热代码替换介绍：

[http://docs.oracle.com/javase/1.4.2/docs/guide/jpda/enhancements.html#hotswap](http://docs.oracle.com/javase/1.4.2/docs/guide/jpda/enhancements.html#hotswap)

# javascript - underscore.js 模板，迭代“this”

> ID：10888984
> 
> 赞同：0
> 
> 时间：2012-06-04T21:59:32.903
> 
> 标签：javascript, templates, backbone.js, underscore.js

如何使用 underscore.js 模板迭代“this”（或传递给模板的数据对象）？例如，如果我将这样的数据对象传递给模板：

```
obj = {name: "ben", description: "funny looking"}

var template = _.template("<ul> <% _.each(this, function(x, y){ print('<li>'+x+'<li>')}) %> </ul>"); 

var compiled = template(obj); 
```

我希望迭代器中的“this”循环遍历数据对象（就像在 Handlebars 中一样），但它不起作用。通常我会直接在模板中输入 <%= name %>，但在这种情况下，对象键是动态确定的。

关于如何做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:15:36.063

这是一个简单的解决方案：

```
var compiled = template({data:obj}); 
```

然后只是迭代“数据”

# c - 如何使用 VS11 在 C 程序中嵌入和使用资源文件？

> ID：10888988
> 
> 赞同：2
> 
> 时间：2012-06-04T22:00:03.870
> 
> 标签：c, visual-studio, embedded-resource

这是我第一次尝试使用资源文件。我已经看到很多适用于 C# 但不适用于 C 的答案。有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T22:30:01.697

假设您的意思是 Sysinternals 和其他人用来在程序的资源部分（例如 Sysinternals 的 Process Explorer）中携带驱动程序或所需 DLL（甚至程序本身的 x64 版本）的方法，您可以使用 Microsoft Visual C这段代码：

```
BOOL ExtractResTo(HINSTANCE Instance, LPCTSTR BinResName, LPCTSTR NewPath, LPCTSTR ResType)
{
    BOOL bResult = FALSE;
    HRSRC hRsrc;
    if(hRsrc = FindResource(HMODULE(Instance), BinResName, ResType))
    {
        HGLOBAL hGlob
        if(HGLOBAL hGlob = LoadResource(Instance, hRsrc))
        {
            DWORD dwResSize = SizeofResource(Instance, hRsrc);
            HANDLE hFileWrite = CreateFile(NewPath, GENERIC_READ | GENERIC_WRITE, FILE_SHARE_READ | FILE_SHARE_WRITE, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_ARCHIVE, 0);
            if(hFileWrite != INVALID_HANDLE_VALUE)
            __try
            {
                DWORD dwSizeWritten = 0;
                bResult = (WriteFile(hFileWrite, LockResource(hGlob), dwResSize, &dwSizeWritten, NULL) && (dwSizeWritten == dwResSize));
            }
            __finally
            {
                CloseHandle(hFileWrite);
            }
        }
    }
    return bResult;
} 
```

这会将`BinResName`资源类型 ( ) 的给定资源 ( `ResType`) 从模块（例如 DLL）保存`Instance`到文件`NewPath`。显然，如果您的 C 不理解`__try`，`__finally`您将不得不相应地调整代码。

取自[这里](http://blog.assarbad.net/20061105/redpill-getting-colorless/)(in `SIDT.rar`) 并针对 C 进行了调整。根据网站，代码在自由 BSD 许可下。

现在，如果您想获取指向数据 ( `ppRes`) 及其大小 ( `pwdResSize`) 的指针：

```
BOOL GetResourcePointer(HINSTANCE Instance, LPCTSTR ResName, LPCTSTR ResType, LPVOID* ppRes, DWORD* pdwResSize)
{
    // Check the pointers to which we want to write
    if(ppRes && pdwResSize)
    {
        HRSRC hRsrc;
        // Find the resource ResName of type ResType in the DLL/EXE described by Instance
        if(hRsrc = FindResource((HMODULE)Instance, ResName, ResType))
        {
            HGLOBAL hGlob;
            // Make sure it's in memory ...
            if(hGlob = LoadResource(Instance, hRsrc))
            {
                // Now lock it to get a pointer
                *ppRes = LockResource(hGlob);
                // Also retrieve the size of the resource
                *pdwResSize = SizeofResource(Instance, hRsrc);
                // Return TRUE only if both succeeded
                return (*ppRes && *pdwResSize);
            }
        }
    }
    // Failure means don't use the values in *ppRes and *pdwResSize
    return FALSE;
} 
```

像这样调用：

```
LPVOID pResource;
DWORD pResourceSize;
if(GetResourcePointer(hInstance, _T("somename"), _T("sometype"), &pResource, &pResourceSize))
{
    // use pResource and pResourceSize
    // e.g. store into a string buffer or whatever you want to do with it ...
} 
```

请注意，这也适用于具有整数 ID 的资源。您可以使用宏来检测这些`IS_INTRESOURCE`。

资源脚本，例如 myresources.rc，本身很简单：

```
#include <winnt.rh>
"somename" "sometype" "path\to\file\to\embed" 
```

`RCDATA`而不是 sometype 是一个合理的选择

```
#include <winnt.rh> // for RCDATA to be known to rc.exe
"somename" RCDATA "path\to\file\to\embed" 
```

...在这种情况下，您可以将上述调用调整为：

```
GetResourcePointer(hInstance, _T("somename"), RT_RCDATA, &pResource, &pResourceSize) 
```

* * *

`GetResourcePointer`使用上面的完整示例。假设您有一个指针变量`char* buf`，并且您知道您的资源是实际文本，那么您需要确保它在用作字符串时以零结尾，仅此而已。

资源脚本：

```
#include <winnt.rh>

"test" RCDATA "Test.txt" 
```

访问它的代码

```
char* buf = NULL;
LPVOID pResource;
DWORD pResourceSize;
if(GetResourcePointer(hInstance, _T("test"), RT_RCDATA, &pResource, &pResourceSize))
{
    if(buf = calloc(pResourceSize+1, sizeof(char)))
    {
        memcpy(buf, pResource, pResourceSize);
        // Now use buf
        free(buf);
    }
} 
```

* * *

当然，除非您打算简单地链接一个`.res`通过将其传递给链接器命令行来工作的文件。

# gwt - 在项目源或资源中找不到 GWT 模块 XXX

> ID：10888989
> 
> 赞同：2
> 
> 时间：2012-06-04T22:00:03.917
> 
> 标签：gwt, maven, compilation, vaadin

我有使用 Maven 目标编译的小部件集：vaadin:update-widgetset gwt:compile。所以 pom.xml 和 web.xml 文件配置应该没问题。

我是 Maven 新手，这是我的第一个 Maven 项目。

编译后的编译代码显示在 src/main/webapp/VAADIN/widgetsets 文件夹中。当我尝试运行安装目标时，错误显示：

无法在项目 Validation-Manager-Web 上执行目标 org.codehaus.mojo:gwt-maven-plugin:2.2.0:resources（默认）：在项目源或资源中找不到 GWT 模块 com.pantar.widget.graph.GraphWidget .

以防万一这里是相关文件：

**聚甲醛：**

```
 <plugins>
            <!-- Compiles your custom GWT components with the GWT compiler -->
            <!-- A hosted mode browser for client-side widget debugging can be run with the goal gwt:run after uncommenting the 
            correct line below. A remote debugger can then be connected to port 8998\. Note that e.g. a Jetty server should be running 
            with the server side parts - use the goal jetty:run . -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>${gwt.plugin.version}</version>
                <configuration>
                    <!-- if you don't specify any modules, the plugin will find them -->
                    <modules> 
                        <module>com.pantar.widget.graph.GraphWidget</module> 
                    </modules>
                    <webappDirectory>src/main/webapp/VAADIN/widgetsets</webappDirectory>
                    <!-- On Mac running Snow Leopard, add "-d32" -->
                    <!-- This causes error messages (but build works) in phase "package": two processes would use the same debug 
                    port -->
                    <!--extraJvmArgs>-Xmx512M -Xss1024k -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8998</extraJvmArgs -->
                    <extraJvmArgs>-Xmx512M -Xss1024k</extraJvmArgs>
                    <runTarget>Validation-Manager-Web</runTarget>
                    <hostedWebapp>${project.build.directory}/${project.build.finalName}</hostedWebapp>
                    <noServer>true</noServer>
                    <port>8084</port>
                    <compileReport>false</compileReport>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>resources</goal>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>com.google.gwt</groupId>
                        <artifactId>gwt-dev</artifactId>
                        <version>${gwt.version}</version>
                    </dependency>
                    <dependency>
                        <groupId>com.google.gwt</groupId>
                        <artifactId>gwt-user</artifactId>
                        <version>${gwt.version}</version>
                    </dependency>
                </dependencies>
            </plugin>
            <plugin>
                <groupId>com.vaadin</groupId>
                <artifactId>vaadin-maven-plugin</artifactId>
                <version>1.0.2</version>
                <executions>
                    <execution>
                        <configuration>
                            <modules> 
                                <module>com.pantar.widget.graph.GraphWidget</module> 
                            </modules>
                        </configuration>
                        <goals>
                            <goal>update-widgetset</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin> 
```

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:48:51.237

通过添加具有以下内容的空 gwt.xml 文件来修复它：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 1.7.0//EN" "http://google-web-toolkit.googlecode.com/svn/tags/1.7.0/distro-source/core/src/gwt-module.dtd">
<module>
    <inherits name="com.vaadin.terminal.gwt.DefaultWidgetSet" />

    <inherits name="<module>" />
</module> 
```

# php - 正则表达式来解析具有已知字符串分隔符的字符串

> ID：10888992
> 
> 赞同：1
> 
> 时间：2012-06-04T22:00:25.837
> 
> 标签：php, regex

我正在尝试拆分 key1value1key2value2 的串联字符串问题是我不知道它们的顺序

```
$k = preg_split("/(name|age|sex)/", "nameJohnage27sexM");
var_dump($k);
$k = preg_split("/(sex|name|age)/", "age27sexM");
var_dump($k); 
```

所以我不知道年龄或名字是$k的第一个还是第二个索引，甚至不知道“name”键是否在字符串中，可以有一组有限的键

怎么做？

**编辑**：像这样解决，tx mario

```
for ($i=1, $n=count($k)-1; $i<$n; $i+=2) {
    $s[$k[$i]] = $k[$i+1];
}
var_dump($s); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:31:42.600

这个有点笨拙的模式将返回一个键值列表：

```
/(?:(name|age|sex)(.+?(?=(?:name|age|sex|\z))))/g 
```

因此 preg_match 使用上面的“nameJohnage27sexM”应该返回数组

```
["name", "John", "age", "27", "sex", "MAN"] 
```

这使得通过迭代上面的元素来创建数组 ["name" => "John", ...] 成为可能。

# asp.net-mvc - Url.Action 传递片段

> ID：10888993
> 
> 赞同：2
> 
> 时间：2012-06-04T22:00:29.737
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

如何在 ASP.NET MVC 中使用 UrlHelper 传递内联锚？

例如，如果我有一个 URL：

```
/Foo/Bar/Information/FAQ#toc 
```

我正在使用以下 Url.Action 来获取除#toc 片段之外的所有内容

```
<a class="next" href='@Url.Action("Bar", "Foo", new { subPath = "Information/FAQ" } )'>My Link Text</a> 
```

**我的问题：** Url.Action 是否有重载传递**#toc**片段？我宁愿不使用一些硬编码的连接或@Url.Content（诚然，我大部分时间都在作弊）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-15T11:49:33.623

```
@Url.Action("view", "application", new { id = item.ApplicationId }, null, null, "Optt01") 
```

会带你去`/application/view/fc0fc182-d4e4-4b65-9d03-10be74c20212#Optt01`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-21T04:03:42.343

使用 LinkExtensions 中的 Html.ActionLink 将“toc”传递给片段参数：

[https://msdn.microsoft.com/en-us/library/dd460522.aspx](https://msdn.microsoft.com/en-us/library/dd460522.aspx)

# .net - 如何在 .EXE 中放置资源？

> ID：10888999
> 
> 赞同：0
> 
> 时间：2012-06-04T22:00:52.140
> 
> 标签：.net, localization

在 .NET 中拥有特定于语言的资源的“标准”方式是在 .EXE 下为每种语言创建一个文件夹，然后在该文件夹中创建一个文件 filename.resources.dll。这导致每个目录下都有很多文件夹，我们有一个已本地化的 .EXE。

有没有办法将这些资源放在 .EXE 中？

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:28:45.027

我假设你对你的应用程序是单语的不满意（在这种情况下你可以在你的程序集中嵌入资源）。

.NET Framework 提供的本地化模型取决于您描述的文件结构。所以要回答你的问题，你不能。当然，您可以将所有程序集保存在一个文件夹中，这意味着每种语言只有一个语言子文件夹。

您可以尝试构建一个自定义资源管理器并使用嵌入在您的程序集中的资源，但我认为这会使您的过程复杂化很多（例如，如果您添加一种语言或更改一种翻译，您必须重建和重新部署所有内容，如果所有内容都合并在一起，管理翻译将是一个真正的痛苦）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T22:03:58.167

您可以从项目*属性*中添加资源。只需右键单击项目并选择*属性*。然后选择*资源*选项并添加您需要嵌入到程序集中的资源。

[MSDN 更多...](http://msdn.microsoft.com/en-us/library/7k989cfy%28v=vs.80%29.aspx)