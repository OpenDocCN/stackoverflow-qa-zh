# StackOverflow 问答 10733000-10733999

# c# - 调用线程必须是 STA，因为很多 UI 组件都需要这个 WPF

> ID：10733000
> 
> 赞同：0
> 
> 时间：2012-05-24T07:27:28.570
> 
> 标签：c#, wpf, sta, apartment-state

我正在使用[WPF Toolkit](http://wpftoolkit.codeplex.com/wikipage?title=MessageBox)提供的 MessageBox 。我得到了错误

**调用线程必须是 STA，因为很多 UI 组件都需要这个**

```
new Thread(new ThreadStart(delegate
{
    MessageBox.Show("Opeartion could not be completed. Please try again.","Error",MessageBoxButton.OK,MessageBoxImage.Error);
})).Start(); 
```

在这种情况下如何设置 ApartmentState

编辑：我正在尝试使用 WPF Toolkit 的 MessageBox 控件显示无模式的 MessageBox。到目前为止，我拥有的代码如下：

```
void SomeFunction()
{
// calls to some UI, and processing and then

var th = new Thread(new ThreadStart(delegate
                                        {
                                           MessageBox.Show("Opeartion could not be completed. Please try again.",
                                                "Error", MessageBoxButton.OK, MessageBoxImage.Error);
                                        }));

                                        th.SetApartmentState(ApartmentState.STA);
                                        th.Start();
                                    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-12T03:43:43.603

```
// enable unit test to mock a dispatcher
var dispatcher = Dispatcher.CurrentDispatcher;
if (Application.Current != null)
{
    // use the application dispatcher if running from the software
    dispatcher = Application.Current.Dispatcher;
}

if (dispatcher != null)
{
    // delegate the operation to UI thread.
    dispatcher.Invoke(
        delegate
        {
            MessageBox.Show("Opeartion could not be completed. Please try again.","Error",MessageBoxButton.OK,MessageBoxImage.Error);
        });
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T07:39:40.937

**已编辑**

**根据[MSDN](http://msdn.microsoft.com/en-us/library/aa969773%28v=vs.85%29.aspx) WPF 中存在内置模式 MessageBox 但如果你想使用无模式 MessageBox 那么你必须创建自定义窗口然后显示它。从自定义的无模式 MessageBox 创建、显示和返回值并不是很困难。** 你可以看到[这个](http://msdn.microsoft.com/en-us/library/aa969773%28v=vs.85%29.aspx)链接

仅对消息框使用不同的线程是不明智的。无论如何，您可以通过以下方式设置单身公寓状态...

```
 Thread th = new Thread(new ThreadStart(delegate
  {
    MessageBox.Show("Opeartion could not be completed. Please try again.", "Error",MessageBoxButtons.OK,MessageBoxImage.Error);
  }));

  th.ApartmentState = ApartmentState.STA;
  th.Start(); 
```

# c# - 为什么在后面的代码中创建的对象在 aspx 页面中不可用？

> ID：10733002
> 
> 赞同：0
> 
> 时间：2012-05-24T07:27:31.537
> 
> 标签：c#, asp.net

我有一个简单的问题。当我们在后面的代码（“.aspx.cs”）中创建对象时，为什么在aspx页面中不可用。

例如，如果我有一个类（存在于另一个 .cs 文件中，而不是在后面的代码中）并且在该类中我声明了一个属性，让我们说“名称”。

```
namespace BLL.SO
{
    public class SOPriceList
    {
        private string _name;
        public string Name
        {
            get { return _name;}
            set { _name = value; }
        }
    }
} 
```

现在，当我创建一个对象时，让我们在后面的代码中说“obj”（“.aspx.cs”），范围在部分类中。

```
namespace Modules.SO
{    
    public partial class PriceListRecordView : PageBase
    {
        SOPriceList obj = new SOPriceList();

        protected void Page_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

使用这个对象“obj”我可以访问该属性。那为什么我不能用同一个对象“obj”这样的方式来获取aspx页面中的属性，

```
<%= obj.Name%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:29:40.320

> 现在，当我创建一个对象时，让我们在后面的代码中说“obj”（“.aspx.cs”），使用这个对象“obj”我可以访问该属性

目前尚不清楚您究竟是如何创建此`obj`实例的。如果它是后面代码中方法内部的某个局部变量，那么很明显这个变量的范围就是方法本身，因此您无法在 ASPX 页面中访问它。

在 ASPX 页面中，您只能访问在后面的代码中定义的当前 WebForm 的成员。所以这`obj`必须在某个地方实例化。例如，您可以在后面的代码中有一个属性：

```
protected SomeType MyObj
{
    get 
    {
        return ... some instance
    }
} 
```

然后在 ASPX 页面中您可以访问它：

```
<%= MyObj.Name %> 
```

让我们再举一个例子，它允许您在`Page_Load`事件中初始化属性：

```
protected SomeType MyObj { get; private set; }

protected void Page_Load(object sender, EventArgs e)
{
    MyObj = new SomeType();
} 
```

# ios - Tableview 样式单元格取决于字典中的值

> ID：10733004
> 
> 赞同：0
> 
> 时间：2012-05-24T07:27:34.093
> 
> 标签：ios, uitableview

我拼命想弄清楚如何根据字典中的值设置 Tableview 样式单元格。字典是一个 SQLite 行，我设置了一个列来设置要使用的单元格（类型列）这应该告诉 cellForRowAtIndexPath 使用哪种单元格样式。在我看来，这段代码应该没有问题，但我不断收到以下错误：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“UITableView 数据源必须从 tableView 返回一个单元格：cellForRowAtIndexPath：”

任何帮助都会很棒！非常感谢，安德鲁

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";
dictionary = [tableDataSource objectAtIndex:indexPath.row];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    if ([dictionary objectForKey:@"Type"] == @"1") {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
        cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
        cell.textLabel.numberOfLines = 0;
        cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:17.0];
        cell.detailTextLabel.lineBreakMode = UILineBreakModeWordWrap;
        cell.detailTextLabel.numberOfLines = 0;
        cell.detailTextLabel.font = [UIFont fontWithName:@"Helvetica" size:17.0];
    }
    else if ([dictionary objectForKey:@"Type"] == @"0") {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
        cell.textLabel.numberOfLines = 0;
        cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:12.0];
    }

}
// Configure the cell...
cell.textLabel.text = [dictionary objectForKey:@"Title"];
cell.detailTextLabel.text = [dictionary objectForKey:@"Right_Info"];
return cell; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:32:06.830

为了比较两个`NSString`对象，您应该使用该`isEqualToString:`方法。使用`==`运算符，您可以比较两个指针。

此外，`dequeueReusableCellWithIdentifier:`已经返回了一个实例，`UITableViewCell`因此您不应该再次尝试分配一个。

如果您愿意，请查看[Table View Programming guide](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)。它不会受伤。

# iphone - UISegmentedButton 使用图案设置色调颜色

> ID：10733008
> 
> 赞同：0
> 
> 时间：2012-05-24T07:27:44.327
> 
> 标签：iphone, objective-c, ios, ipad

所以我有以下代码：

```
 UISegmentedControl * segmentedCtrl = [[UISegmentedControl alloc] initWithFrame:CGRectMake(0, 0, 150, 35)];
    [segmentedCtrl setTintColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"duck.png"]]];

 [segmentedCtrl setSegmentedControlStyle:UISegmentedControlStyleBar]; 
```

这是我正在尝试使用的鸭子图像：

![在此处输入图像描述](../Images/b542bf0a9163752a4e9039075707eafc.png)

有人愿意告诉我为什么它不起作用。我尝试了任何类型的图像，但它不起作用。仅供参考，我不想在我的分段控制中使用鸭子背景。这只是为了说明使用 colorWithPatternImage 的 setTint 不适用于任何类型的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:13:16.157

UISegmentedControl 上的 tintColor 仅用作计算控件中使用的渐变的基础。你不能很好地拥有渐变图像，所以它只是使用它的一部分。听起来您需要的是 UISegmentedControl 的自定义子类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:34:25.777

你试过 1px 宽度的图片吗？您使用的图像太大，无法创建图案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T11:29:17.697

```
 UISegmentedControl *segmentedControl = [[UISegmentedControl alloc] initWithItems:nil];
    [segmentedControl insertSegmentWithImage:[UIImage imageNamed:@"up_button.png"] atIndex:0 animated:YES];
    [segmentedControl insertSegmentWithImage:[UIImage imageNamed:@"down_button.png"] atIndex:1 animated:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T10:21:08.960

`UISegmentedControl`（我认为，与所有其他 UIKit 控件一样）不支持将图案颜色作为色调颜色。色调颜色基本上用于创建有光泽的渐变，并且对于任意图案必须以非常不同的方式完成。

要自定义背景的外观，请使用`setBackgroundImage:forState:barMetrics:`and`setDividerImage:forLeftSegmentState:rightSegmentState:barMetrics:`代替（当然，对于适当的图像，图案并不适合这些）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-24T08:14:01.593

首先通过在 Photochop 中打开图像来获取颜色的 RGB 值，然后使用该值。

[段控制背景颜色](https://stackoverflow.com/questions/9743404/segment-control-background-color)

# sql - 如何将 union all 与手动值一起使用（而不是来自另一个表）？

> ID：10733010
> 
> 赞同：7
> 
> 时间：2012-05-24T07:27:51.473
> 
> 标签：sql, sql-server, union, union-all

我想将 union all 与手动值一起使用，而不是来自另一个表。值是：

```
|cSatuan1|cSatuan2|nkonversi|
=============================
|   LTR  |   PCS  |    1    |
|   PCS  |   LTR  |    1    | 
```

我用自己的方式进行了查询，但它得到了错误。这是查询：

```
SELECT csatuan2, csatuan1, nkonversi
FROM ms_metriks union all select 'LTR','PCS','1','PCS','LTR','1' 
```

你能告诉我我的查询有什么问题吗，什么是正确的查询？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T07:30:44.600

试试这个：

```
SELECT csatuan2,csatuan1,nkonversi FROM ms_metriks 
UNION ALL SELECT 'LTR','PCS','1'
UNION ALL SELECT 'PCS','LTR','1' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:35:14.653

这是您可以做到的一种方法：

```
SELECT 'LTR' as csatuan1,'PCS' as csatuan2,'1' as nkonversi
UNION
SELECT 'PCS','LTR','1'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-31T09:35:51.900

我敢于补充我在 Oracle 方面的经验。我遇到了非常相似的问题，如何从表中选择用户名并添加到结果值'admin'：

这个查询有一个问题：

```
select
  username      
from users
union 
  select 'admin' 
```

返回错误：

```
Error at Command Line : 5 Column : 17
Error report -
SQL Error: "FROM keyword not found where expected" 
```

作为解决方案，我从同一张表的部分添加了“虚拟”：

```
select
  username     
from users
union 
  select 'admin' 
  from users 
```

它有效。

J。

# jquery - 附加脚本在 IE 中不起作用

> ID：10733011
> 
> 赞同：1
> 
> 时间：2012-05-24T07:27:52.023
> 
> 标签：jquery, internet-explorer, append, appendchild

我正在使用这个脚本来动态添加在我的[页面](http://www.s-maof.com/shorts/shorts_table.php)中加载图形的脚本。此代码在 chrome、Safari 和 FF 中运行良好，但在 IE(!!) 中运行良好。

```
$.post("shorts.server.php", $.param({

    S_number: stocknumber,

}), function(response) {

    script = document.createElement('script');
    //dynamic_graph.js changes it's content by the current selected stock
    script.src = 'jQuery/head/dynamic_graph.js';
    $("#graphMain" + id).append(script);

    var head = document.getElementsByTagName('body')[0];
    script = document.createElement('script');

    script.src = 'jQuery/head/dynamic_info.js';

    head.appendChild(script);
});​ 
```

1.  您可以看到我尝试了两种技术来动态附加脚本。
2.  它们都不能在 IE 中工作。你能建议一个更好的方法来附加脚本吗？1个不太重要但相关的问题：
    1.  在stackoverflow中发布脚本的正确方法是什么？，因为有时它是彩色的，有时它是灰色的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:40:34.883

不久前，当我尝试在 IE 中将动态元素附加到 DOM 时，我发现我需要以相反的方式进行操作才能使其正常工作。所以而不是

```
$("#graphMain" + id).append(script); 
```

尝试

```
$(script).appendTo($("#graphMain" + id)); 
```

# vb.net - 如何在桌面应用程序中启用 HTML iFrame

> ID：10733018
> 
> 赞同：0
> 
> 时间：2012-05-24T07:28:17.157
> 
> 标签：vb.net, iframe, web, desktop-application

我正在使用 vb.net 编写桌面应用程序。在该应用程序中，一个屏幕需要网络信息。

我们需要从网页获取信息 - 显示在网络上。每当页面刷新或更改也应反映在桌面应用程序上的内容时。

我是桌面应用程序的新手。这就是为什么我没有得到哪种方式更好地在桌面应用程序上显示网页的原因。

我想我们可以使用 iframe 来映射和放置在另一个网站上。这样我们也可以在桌面应用程序中做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:31:19.710

您可以使用 WebBrowser() 控件并在 WinForm 应用程序中呈现完整的 HTML 内容。更多细节在这里-->http://frazzleddad.blogspot.in/2007/07/working-with-webbrowser-control-in.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T17:45:36.287

如果您不想显示页面，而是读取其内容并将其显示在应用程序中，则可以使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)解析页面，然后将内容放入您的 winforms 控件中。

# android - 在 sqlite3 数据库中插入 1000000 行

> ID：10733023
> 
> 赞同：3
> 
> 时间：2012-05-24T07:28:38.187
> 
> 标签：android, sqlite

我想在数据库中插入 10,00,000 行，但是插入需要很长时间。

例如，现在我正在尝试使用 2055 行，将这些数据上传到数据库需要 3 分钟。对于 2055 个条目来说，这个时间太多了。

以下是我将数据插入数据库的方法：

```
 public void insert_database(Context context,String field1,String field2,String field3,String field4,String field5,String field6 ,String field7,String field8,String field9,String field10)
{

    try
    {
        //RayAllen_Database.beginTransaction();
        RayAllen_Database.execSQL(" insert or replace into "+ TableName_csv+" values( '"+field1+"' ,'"+field2+"','"+field3+"','"+field4+"','"+field5+"','"+field6+"','"+field7+"','"+field8+"','"+field9+"','"+field10+"');");

    }
    catch(Exception e)
    {
        //Log.i("Database Exception", "Exception");
        e.printStackTrace();
    }

} 
```

在另一个名为： Parsing Data: 的类中，我正在解析 csv 文件并在解析时：

尝试 {

```
CSVReader reader=new CSVReader(new FileReader(filename));
String [] nextLine;

//create database
obj.create_database(context);
obj.OpenDatabase(context);
//reader.readNext();

while ((nextLine=reader.readNext())!=null)
{
          //here I am calling the insert_database function
    }
 } 
```

所以这里是逐行解析并调用insert方法将条目插入数据库..

但这太花时间了..我怎样才能提高这个性能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T08:32:34.540

快速示例时间为什么您应该做正确的事情而不是“错误”。这是在 ICS 4.0.4 上运行的测试，它具有可怕的 INSERT 性能。

首先，一个简单的方法`SQLiteOpenHelper`是创建一个`UNIQUE`对列有约束的表，以导致不时发生冲突。

```
class SimpleHelper extends SQLiteOpenHelper {
    // InsertHelpers are a really good idea - they format a prepared statement
    // for you automatically.
    InsertHelper mInsert;
    public SimpleHelper(Context context) {
        super(context, "tanika.db", null, 1);
    }
    @Override
    public void onOpen(SQLiteDatabase db) {
        super.onOpen(db);
        mInsert = new InsertHelper(db, "target");
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE target (\n" +
                "_id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,\n" +
                "val1 TEXT NOT NULL,\n" +
                "val2 TEXT NOT NULL,\n" +
                "val3 TEXT NOT NULL,\n" +
                // Let's make one unique so we can get some juicy conflicts
                "val4 TEXT NOT NULL UNIQUE\n" +
                ")");
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    }
} 
```

捆绑在任何旧的`Activity`我们添加以下简单的测试方法：

```
long test(final int n) {
    long started = System.currentTimeMillis();
    ContentValues values = new ContentValues();

    for (int i = 0; i < n; i++) {
        values.clear();
        // Every 20th insert, generate a conflict in val4
        String val4 = String.valueOf(started + i);
        if (i % 20 == 0) {
            val4 = "conflict";
        }
        values.put("val1", "Value1");
        values.put("val2", "Value2");
        values.put("val3", "Value3");
        values.put("val4", val4);
        mHelper.mInsert.replace(values);
    }
    return System.currentTimeMillis() - started;
} 
```

如您所见，这将导致每 20 次`INSERT`左右发生一次冲突。调用`InsertHelper#replace(..)`会导致助手使用 a `INSERT OR REPLACE`on 冲突。

现在，让我们在没有围绕它的事务的情况下运行带有 & 的测试代码。

```
class Test1 extends AsyncTask<Integer, Void, Long> {
    @Override
    protected Long doInBackground(Integer... params) {
        return test(params[0]);
    }
    @Override
    protected void onPostExecute(Long result) {
        System.out.println(getClass().getSimpleName() + " finished in " + result + "ms");
    }
}

class Test2 extends AsyncTask<Integer, Void, Long> {
    protected Long doInBackground(Integer... params) {
        SQLiteDatabase db = mHelper.getWritableDatabase();
        db.beginTransaction();
        long started = System.currentTimeMillis();
        try {
            test(params[0]);
            db.setTransactionSuccessful();
        } finally {
            db.endTransaction();
        }
        return System.currentTimeMillis() - started;
    }
    @Override
    protected void onPostExecute(Long result) {
        System.out.println(getClass().getSimpleName() + " finished in " + result + "ms");
    }
} 
```

一切都是这样开始的：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mHelper = new SimpleHelper(this);
    mHelper.getWritableDatabase(); // Forces the helper to initialize.
    new Test1().execute(2055);
    new Test2().execute(2055);
} 
```

结果呢？如果没有事务，则`INSERT`s 需要**41072ms**。对于事务，它们需要**940ms**。总之，FFS，开始使用`InsertHelper`s和事务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T08:21:04.810

您可以使用离线工具填充数据库，然后在安装包时将其导入。您可以将数据库存储在外部 sd 卡或应用程序的资产文件夹中。

我就是这样做的：

1.  使用 Android Debuger Bridge (adb) 将应用程序数据库复制到本地文件夹，如下所示`adb pull /data/data/<your application provider>/databases/yourdatbase.db C:/users/databases/yourdatbase.db`：

2.  使用您最喜欢的 GUI/CLI 工具连接到 SQLites 数据库`C:/users/databases/yourdatbase.db`并完成 1 000 000 条记录的填充。

3.  将填充的数据库复制到 Android 开发环境`asset`文件夹。

4.  现在从设备上卸载您的应用程序，以确保在您第一次安装时没有创建数据库。

5.  修改您的 SQLiteHepler 类，使其检查数据库是否存在，如果存在则使用该数据库。如果不存在数据库，Helper 会从您的资产文件夹中复制该数据库以及您的 1 000 000 条记录。这就是我的做法：

    ```
    public class MyDatabaseHelper extends SQLiteOpenHelper {

        /*
            Other SQLiteOpenHelper declarations here ...
        */

        private static final String DATABASE_NAME   = "application.db";
        private static final String DB_PATH         = "/data/data/" + context.getPackageName() + "/databases/";

        /*
            Your SQLiteOpenHelper functions/procedures here ...
        */

        public boolean isDataBaseExist() {

            File dbFile     = new File(DB_PATH + DATABASE_NAME);
            return dbFile.exists();
        }

        public void copyDataBase(Context context) throws IOException {

            this.getReadableDatabase();

            InputStream inFile      = context.getResources().getAssets().open(DATABASE_NAME);

            // Path to the just created empty db
            String outFileName      = DB_PATH + DATABASE_NAME;
            OutputStream outFile    = new FileOutputStream(outFileName);

            // transfer bytes from the inputfile to the outputfile
            byte[] buffer = new byte[1024];

            int length;

            while ((length = inFile.read(buffer)) > 0) {

                outFile.write(buffer, 0, length);

            }

            // Close the streams
            outFile.flush();
            outFile.close();
            inFile.close();
        } 
    ```

该数据库将与您的应用程序一起编译，并且在首次启动时所有数据都将在那里。可能有一个更简单的方法，但我希望这对某人有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T08:18:08.817

[加速 sqlite 插入操作](http://tech.vg.no/2011/04/04/speeding-up-sqlite-insert-operations/)经历了一个类似的案例，并展示了如何使用事务来优化插入。

# java - 如何在 Eclipse 中运行和调试客户端-服务器项目？

> ID：10733027
> 
> 赞同：2
> 
> 时间：2012-05-24T07:29:04.203
> 
> 标签：java, eclipse

共有三个类：Server、Client、Test。我需要运行等待客户端并处理它的命令的服务器。在尝试在 Test 中运行两个类时，它会在服务器的 while 中结束（等待套接字上客户端连接的周期）：

```
class Test{
    new Server();
    new Client();
} 
```

如何运行和调试这种应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:35:58.570

您可以在 Eclipse 中同时运行两个进程。在“debug”中运行Server，在“debug”中运行Test，每个进程都会在指定的断点处停止。据我了解，测试调用客户端命令，对吗？
您无需在同一进程中同时运行两者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T07:39:19.673

您可以`Threads`像这样创建两个：

```
Thread serverThread = new Thread(new Runnable() {
  @Override
  public void run() {
    new Server();
  }
});
Thread clientThread = new Thread(new Runnable() {
  @Override
  public void run() {
    new Client();
  }
});
serverThread.start();
clientThread.start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T07:36:09.083

您需要为您的服务器循环启动另一个线程，这通常在测试的设置阶段完成。

假设您使用的是 JUnit 4。

```
class Test {
    @BeforeClass
    public static void setup() {
        new Thread() {
            public void run() {
                new Server();
            }
        }.start();
    }
    @AfterClass
    public static void teardown() {
        // stop the server (somehow)
    }

    @Test
    public void test() {
        new Client();
    }
} 
```

# sql - 在分区视图中搜索

> ID：10733030
> 
> 赞同：0
> 
> 时间：2012-05-24T07:29:25.880
> 
> 标签：sql, sql-server-2008

我们有一个分区视图，`scheduletest`它是表的并集`scheduletest20120522`，，，，`scheduletest20120523`就像从 -7 到 +7 天。`scheduletest20120524``scheduletest20120525`

列是`date`，`starttime`并且检查约束是 on `starttime`。

当我搜索`scheduletest`with 语句时

```
select top 10 * from scheduletest where starttime>'2012-05-24 12:00:00' 
```

它正在从`scheduletest20120524`, `scheduletest20120525`,的表中搜索`scheduletest20120526`。

使用语句时

```
select top 10 * from  scheduletest where starttime>getdate() 
```

它正在从 -7 到 +7 天的所有表格中搜索 `scheduletest20120522`，`scheduletest20120523`等等。

我试过用`sp_executesql`它比这花费更多的时间。

请提供建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:59:26.123

您正在使用该`Top`子句，但您没有对所选数据进行排序。因此，您的请求是不确定的，并且可以在每次执行时为您提供不同的结果。

尝试`order by`在您的选择中添加一个。

# vba - Excel 自定义函数错误更新

> ID：10733037
> 
> 赞同：0
> 
> 时间：2012-05-24T07:30:10.473
> 
> 标签：vba, excel, excel-2007, user-defined-functions

我正在尝试编写（我的第一个）自定义函数，该函数本质上将循环通过报告来总结未来 1、3、6 个月（等）的机器成本

该函数返回值，但是，这些值是不正确的，并且在包含自定义函数的单元格上更成问题会更改使用自定义函数的周围单元格的值。

我处理的代码在这里：

```
Option Explicit

Dim months As Integer 'a month is considered as 30 days
Dim cost As Long
Dim FleetData As Range
Dim rowCounter As Long
Dim lastRow As Long
Dim firstRow As Long
Dim component As Range
Dim dateOfAction As Range
Dim totalApprox As Range
Dim dateHorizon As Date 'Date to which the user wants to total the maintenance cost for

Private Function totalCosts(xMonths As Range)
'Dim totalCosts As Long
Application.Volatile

dateHorizon = Date + (30 * months)

firstRow = [A10].Row
rowCounter = firstRow
lastRow = Range("A65000").End(xlUp).Row
Set FleetData = [A10:S14]

If IsNumeric(xMonths.Value) Then months = xMonths.Value Else
If IsDate(xMonths.Value) Then months = (xMonths.Value - Date) / 30
cost = 0
    Do While rowCounter < lastRow
        Set component = Range(Cells(rowCounter, 1), Cells(rowCounter, 19))
        Set dateOfAction = Cells(rowCounter, 7)
        Set totalApprox = Cells(rowCounter, 12)
        If dateOfAction <= dateHorizon Then
            cost = cost + totalApprox
        End If
        totalCosts = cost
        rowCounter = rowCounter + 1
    Loop

End Function 
```

我使用的数据是：

```
DateOfAction totalApprox 
5/07/2014    $30,068.62 
24/05/2005   $6,300.00 
5/07/2012    $29,742.00
5/07/2012    $4,360.28
27/12/2012   $5,555.89 
```

单击单元格似乎会改变值，但没有可识别的顺序。

已经用谷歌搜索并查看[了这里](http://www.decisionmodels.com/calcsecretsj.htm)，但到目前为止似乎没有任何问题可以解决问题。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:44:53.857

一些提示和检查事项：

1.  不要使用模块范围的变量（除非您需要与其他模块共享这些变量。即使那样，通常也有更好的方法）
2.  除非你真的需要，否则不要使用 Volatile（我认为你在这种情况下不会这样做）
3.  将所有范围作为参数传递给函数
4.  如果您必须使用直接范围引用，请记住非限定引用，例如`Range(...`和引用*活动工作表*`Cell(...`上的范围。如果您的数据表未激活，此 UDF 将返回意外结果。改用类似的东西。但我再说一遍，将范围引用作为参数传递给函数*要*好得多。*`Worksheets("Sheet1").Range(...`*
***   您的代码在设置变量`months`之前引用它。*   如果您*从单元格中调用公式中*的 UDF ，则尝试设置单元格值（如 中`totalCosts = cost`）*将不起作用*。这在您提供的链接中明确说明（*您不能直接制作 VBA UDF 的第一点：*列表）。另一方面，如果您从 a 调用 UDF`Sub`并将该 Sub 作为宏运行，*它将*起作用。**

 **如果您提供数据布局的完整详细信息以及您希望如何使用 UDF，我可以提供更具体的建议。**

# javascript - 在哈希数组中保存对 jquery 元素的引用

> ID：10733042
> 
> 赞同：0
> 
> 时间：2012-05-24T07:30:35.763
> 
> 标签：javascript, jquery, object, namespaces

为了性能，我经常会在 var 中保存对 dom 元素的引用，例如：

```
var $header = $("#header"); 
```

如果我有多个元素，我希望能够执行以下操作：

```
var someNamespace = {
  $header : $("#header"),
  $footer : $("#footer")
} 
```

后者似乎抛出了一个错误。你如何在不创建大量变量的情况下处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:31:58.167

**你的代码：**

```
var someNamespace = {
    $header = $("#header"),
    $footer = $("#footer")
};​ 
```

**替换`=`为`:`**

```
var someNamespace = {
    $header: $("#header"),
    $footer: $("#footer")
};​ 
```

这是`object literals`声明的语法。

[**在MDN**](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)中阅读更多内容[](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)

# java - Jsoup不能选择p元素作为父元素

> ID：10733048
> 
> 赞同：2
> 
> 时间：2012-05-24T07:30:45.723
> 
> 标签：java, html, dom, jsoup

使用 Jsoup 我试图找到错误的 html 结构，例如：

```
<body><p><h1>some text</h1></p></body> 
```

我首先选择标题标签，然后使用`headingElement.parent()`来获取此`h1`标签的父级。但我得到的不是`p`它的父母`body`。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:42:28.827

JSoup 在解析 HTML 时，就像任何好的 HTML 解析器一样，已经应用了`<h1>`标签自动关闭任何打开`<p>`元素的规则，因此`<p>`和`<h1>`已经`<body>`是 DOM 中元素的兄弟子级。

# shopping-cart - 购物车产品在刷新页面 Prestashop 上消失

> ID：10733051
> 
> 赞同：1
> 
> 时间：2012-05-24T07:31:01.130
> 
> 标签：shopping-cart, cart, prestashop, product

几个星期以来，我的 Prestashop 1.4.0.12 出现问题

当我将产品添加到购物车时，ajax 可以正常工作并且可以很好地添加产品。

但是，如果我更改页面，或者有时添加产品，购物车会在刷新新页面时删除所有产品。

有时我可以在某些页面内移动，但会消失购物车的产品，然后如果我有新购物车返回旧购物车。

有人知道吗？我认为问题出在 id_guest 但我需要知道是否有人有解决方案

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:29:19.957

问题出在域名上，该站点有 3 个域，并且我评论的工具类上有一个函数，因为它保存了一些数据，当您在“.org”站点上时，这些数据有时会显示“.com”链接。

例如：

您进入您的网站 www.blablabla.com，smarty 捕获所有数据并保存到服务器中。但是这个网站也有 www.blablabla.org，如果您进入，您可以将产品放入购物车并访问页面（域名为 .org）但是当您进入产品类别时，smarty 会链接到“.com”站点，并且您拥有产品购物车信息的 Cookie 消失了，因为重新生成了一个新的 cookie。

对不起我的英语不好......我希望你能理解：P

# python - 访问 request.POST 时出现 KeyError

> ID：10733057
> 
> 赞同：-1
> 
> 时间：2012-05-24T07:31:26.437
> 
> 标签：python, django, django-forms

我在 python 中遇到了关键错误。

像这样的错误............

```
KeyError at /python_tutor/
'user_script' 
```

这个代码是

```
import web_exec
def tutor(request):
    print "Inisde tutor", request.method
    print "POST =", request.POST
    if request.method == "POST" :
        print "Inside Post"
        print "My Script =", request.POST["user_script"]
        mycode = request.POST["user_script"]
        exec mycode 
    web_exec('mycode') 
```

请给我解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:16:17.513

`mycode = request.POST.get('user_script', None)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:37:42.873

这意味着`user_script`字典（ ）中不存在键（ `request.POST`）；这表明它没有被提交。尝试：

```
if 'user_script' in request.POST:
    print "My Script =", request.POST["user_script"]
    mycode = request.POST["user_script"] 
```

# c# - 从代码隐藏调用 jquery 函数，切换查询字符串

> ID：10733064
> 
> 赞同：0
> 
> 时间：2012-05-24T07:32:04.140
> 
> 标签：c#, javascript, jquery, asp.net, .net

我有一个正在使用 jquery 的垂直菜单。HTML和Jquery如下：

HTML：

```
<div id="menu">
            <ul class="navmenu">
                <li>
                    <div class="menutop menusingle">
                        <a id="A1" runat="server"  href="~/View.aspx?pg=aboutus" >About Us </a></div>
                </li>
                <li>
                    <div class="menutop">
                        <a href="#">Courses</a><div class="toggle">
                            +</div>
                    </div>
                    <ul class="submenu">
                        <li><a id="A6" runat="server"  href="~/View.aspx?pg=SoftwareIT">Software /IT</a></li>
                        <li><a id="A7" runat="server"  href="~/View.aspx?pg=Telecommunication">Telecommunication</a></li>
                        <li><a id="A8" runat="server"  href="~/View.aspx?pg=Hardware">Hardware & Networking</a></li>
                        <li><a id="A9" runat="server"  href="~/View.aspx?pg=Sales">Sales & Marketing</a></li>
                        <li><a id="A10" runat="server"  href="~/View.aspx?pg=BPO">BPO & Soft Skills</a></li>
                    </ul>
                </li>
                <li>
                    <div class="menutop">
                        <a href="#">Services</a><div class="toggle">
                            +</div>
                    </div>
                    <ul class="submenu">
                        <li><a id="A2" runat="server"  href="~/View.aspx?pg=IndividualTraining">Individual Training </a></li>
                        <li><a id="A3" runat="server"  href="~/View.aspx?pg=OncampusTraining ">On Campus Training </a></li>
                        <li><a id="A4" runat="server"  href="~/View.aspx?pg=CorporateTraining">Corporate Training </a></li>
                        <li><a id="A5" runat="server"  href="~/View.aspx?pg=Placement">Placement </a></li>
                    </ul>
                </li>
                <li>
                    <div class="menutop">
                        <a href="#">Trainings</a><div class="toggle">
                            +</div>
                    </div>
                    <ul class="submenu">
                        <li><a id="A11" runat="server"  href="~/View.aspx?pg=FastTrack">FastTrack Training</a></li>
                        <li><a id="A12" runat="server"  href="~/View.aspx?pg=Summer">Summer/Industrial</a></li>
                        <li><a id="A13" runat="server"  href="~/View.aspx?pg=Weekend">Weekend Training</a></li>
                    </ul>
                </li>
            </ul>
        </div> 
```

单击 + 号会打开子菜单的抽屉。手动非常好。现在我想根据要求自动化它。我们在培训、课程和服务中进行了切换，因此如果当前 url 是服务的，那么服务菜单将自动打开。因为我们也有顶部导航和页脚导航。以上是左侧导航。

相同的 Jquery：

```
<script type="text/javascript">
    $(document).ready(function() {

        $('.toggle:not(.toggle-open)').addClass('toggle-closed').parents('li').children('ul').hide();

        if ($.browser.msie) {
            $('#menu ul.navmenu li:last-child .menutop').css('border-bottom', '1px solid #CCC');
        }

        $('.toggle').click(function() {
            if ($(this).hasClass('toggle-open')) {
                $(this).removeClass('toggle-open').addClass('toggle-closed').empty('').append('+').parents('li').children('ul').slideUp(250);
                $(this).parent('.menutop').removeClass('menutop-open').addClass('menutop-closed');
            } else {
                $(this).parent('.menutop').removeClass('menutop-closed').addClass('menutop-open');
                $(this).removeClass('toggle-closed').addClass('toggle-open').empty('').append('&ndash;').parents('li').children('ul').slideDown(250);
            }

        });
    })
</script> 
```

所以我需要一种 `$('.toggle').click(function()`基于查询字符串调用 from cs 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:49:59.077

从后面的代码中，准备您的 JS 代码以展开所需的子菜单并使用[RegisterStartupScript](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerstartupscript.aspx)方法来强制展开菜单。确保 scriptmanager 包含在页面/母版页中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:51:19.230

从 key 获取查询字符串值。并根据您的情况，它会调用点击。

```
Request.QueryString[key].ToString() 
```

我假设您的 js 代码是内联的。

# javascript - 使用 Facebook API 设置要返回的评论数

> ID：10733065
> 
> 赞同：0
> 
> 时间：2012-05-24T07:32:06.503
> 
> 标签：javascript, facebook, facebook-graph-api

使用 Facebook Javascript API，我请求某个 Facebook 相册中的所有照片：

```
FB.api('/'+albumid+'/photos?fields=id,picture,name,comments&limit=1000', function(photos) 
{
    //do something
}) 
```

这里，limit 参数是指要返回的照片数量。还有一种方法可以设置每张照片返回的评论数量吗？还是我需要为每张照片本身查询/评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:49:15.833

无法为来自连接之一的嵌套数据指定结果限制（就像`comments`在那种情况下一样）。

对于评论，每张照片（如果有）只会返回少量的最后评论。要获取照片的所有评论，您需要从 中检索它们`/PHOTO_ID/comments`。

# haskell - Haskell 的沙盒版本

> ID：10733067
> 
> 赞同：5
> 
> 时间：2012-05-24T07:32:09.787
> 
> 标签：haskell, sandbox

是否有沙盒版本的 Haskell 可以防止运行危险代码？我偶然发现了[mueval](http://hackage.haskell.org/package/mueval-0.4.6)和[Safe Haskell](http://hackage.haskell.org/trac/ghc/wiki/SafeHaskell/) ...mueval 只接受表达式，而 Safe Haskell 尚未实现。沙盒 Haskell 脚本还有其他替代方法吗？似乎防止 IO 就足够了。有没有一种简单的方法可以防止 Haskell 脚本中的所有 IO？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T11:43:38.903

[Safe Haskell](http://haskell.org/ghc/docs/7.4.1/html/users_guide/safe-haskell.html)是 Haskell 可信核心的最新版本，可在 Haskell 平台中使用。

它的存在是为了促进不受信任的代码的执行。

# java - java - 如何将属性文件的所有属性作为Java程序中的初始化变量？

> ID：10733068
> 
> 赞同：2
> 
> 时间：2012-05-24T07:32:15.543
> 
> 标签：java, properties, getproperties

我在我的 java 程序中使用属性文件。

目前，每当我需要属性文件中的某些属性时，我都会使用`propertyFile.getProperty(propertyKeyName);`并将其放入某个变量中：`String propertyName1 = propertyFile.getProperty(propertyKeyName);`

有没有什么方法可以在没有显式定义变量 ( `propertyName1`) 并使用它初始化的情况下`getProperty()`，我可以将属性文件的所有 Key=Value 作为字符串变量获取，该变量已在我的程序中初始化为“String Key=Value”吗？

谢谢，钱德拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:34:10.660

不，变量是在编译时声明的——它们的名称（至少是实例/静态变量）和类型被烘焙到类文件中。*当名称仅在执行*时才知道时，这怎么可能起作用？

如果编写一个表达式，由于属性文件的内容，该表达式在执行时引用了一个“不存在”的变量，您会期望发生什么？

现在你*可以*做的是编写一个类来通过反射初始化一个类的实例 - 你可以编写你的类：

```
public class Person
{
    private String firstName;
    private String lastName;
    private String jobTitle;
    // Whatever... accessors etc
} 
```

然后使用反射创建一个实例，`Person`其中包含从属性文件填充的值。如果缺少某些属性（如果您想要的话），该机制可能会在加载时失败。

# javascript - 关于下划线.map

> ID：10733070
> 
> 赞同：5
> 
> 时间：2012-05-24T07:32:21.253
> 
> 标签：javascript, underscore.js

我有以下对象

```
{one : 1, two : 2, three : 3} 
```

我想

```
[1,2] 
```

这是我的代码

```
_.map({one : 1, two : 2, three : 3}, function(num, key){ 
         if (key==='one' || key==='two') {
             return num;
         } 
}); // [1, 2, undefined] 
```

其实我很想`[1,2]`

如何改进我的代码？
谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T07:42:14.573

您实际上想使用[`_.pick`](http://underscorejs.org/#pick)and [`_.values`](http://underscorejs.org/#values)：

```
_.values( _.pick( obj, "one", "two" ) ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T07:38:29.283

我不认为有内置的可能性（例如，在[scala](/questions/tagged/scala "显示标记为“scala”的问题")中你可以使用`flatMap`它）。在[backbone.js](/questions/tagged/backbone.js "显示标记为“backbone.js”的问题")中考虑链式`map`和`filter`：

```
_({one : 1, two : 2, three : 3}).
  chain().
  map(function(num, key){ 
    if (key==='one' || key==='two') {
      return num;
    }
  }).
  filter(function(num) {
    return num !== undefined
  }).
  value(); 
```

更新（根据*@ZacharyK*评论）：或使用`reject`补充`filter`：

```
reject(function(num) {
  return num === undefined
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-13T22:31:34.027

其他答案将涉及（至少）两个循环通过对象的长度。你真正想要的是`_.reduce`：

```
_.reduce({ one : 1, two : 2, three : 3 }, function ( out, num, key ) { 
    if ( key === 'one' || key === 'two' ) {
        out.push( num );
    }
    return out;
}, []);
// [1, 2] 
```

这会给你你的答案，就像你喜欢的那样压缩，只需要一个循环通过你的对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-03T22:38:31.877

Another option to do this in two steps, first `map` then [`compact`](http://underscorejs.org/#compact)

Example:

```
myArray = _.map({one : 1, two : 2, three : 3}, function(num, key){ 
         if (key==='one' || key==='two') {
             return num;
         } 
    });

myArray = _.compact(myArray) 
```

This solution works better for arrays than objects.

_.compact(array):

> Returns a copy of the array with all falsy values removed. In JavaScript, false, null, 0, "", undefined and NaN are all falsy.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T07:39:22.247

把它分成两个步骤。首先使用过滤器选择您想要的值，然后使用地图获取值

```
_({..}).chain()
       .filter(function(num, key){
            return key ==='one'||key==='two';
        })
       map(function (num,key){
            return num;
       }).values() 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-24T07:39:59.440

你为什么不使用：

```
_.map(['one','two'], function(key) { return obj[key]; }); 
```

评估为`[1, 2]`

请参阅（尽管由于节点 repl 我必须将下划线别名为`__`）：

```
> var __ = require('underscore');
> var obj = {one : 1, two : 2, three : 3};
> __.map(['one','two'], function(key) { return obj[key]; });
[ 1, 2 ] 
```

# java - VisualVM 堆转储与分析器不一致

> ID：10733073
> 
> 赞同：0
> 
> 时间：2012-05-24T07:32:37.760
> 
> 标签：java, memory-leaks, profiler, visualvm

我正在使用 VisualVM（内置于 JDK1.6）来分析我的 Java 应用程序以查找内存泄漏。我正在使用堆转储和探查器（内存监视器）这两个 VisualVM 功能......有一些我无法理解的不一致，在转储堆时我可以看到有一个类，我用大约 8000 个实例编写，当查看探查器类和实例我找不到相关的类。在经过一段时间的堆转储之后，我可以看到该类的实例数量正在增加，但探查器中的实例仍然消失了。

我想知道这个类是否泄漏，为什么我在分析器监视器上看不到？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:43:34.787

在 VisualVM 中，监视器相当于堆转储。Profiler 显示从分析会话开始时创建的实例。

但是，如果您告诉实例数量增加，它们应该转到分析器结果。奇怪的。这对我有用。尝试其他分析器。我更喜欢YourKit。

# android - 如何在 Android 中制作可滚动矩阵？

> ID：10733078
> 
> 赞同：1
> 
> 时间：2012-05-24T07:32:57.663
> 
> 标签：android, android-layout, android-relativelayout

我正在尝试构建一个简单的应用程序，该应用程序将显示一个二维、可滚动的方形瓷砖矩阵。想象一个 2D 魔方，您可以在其中选择滚动单行或单列，就好像它是一个环一样。

我`RelativeLayout`在主视图中放置了一个，并通过组件的自定义实现将矩阵的所有图块放置在其中`ImageView`。我设置了操纵其`RelativeLayout.LayoutParams`值的单个图块的确切位置：

```
RelativeLayout rl = ...;
TileView tile = ...;
RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(size, size);
rlp.setMargins(left, top, 0, 0);
rl.addView(tile, rlp); 
```

我真的不喜欢这种方法，因为我想更改磁贴的顶部和左侧参数而不是边距，但这是我能做到的最好的。

我为每个图块附加了一个侦听器来处理相关行或列的拖动，具体取决于拖动事件的方向。一切似乎都很好，除了一些问题：

1.  当我向右滚动一行时，右边距上的最后一个图块会逐渐缩小，就好像它试图填充剩余空间一样，最终会消失。
2.  然后当我向左滚动时，消失的图块将不会重新出现。

此外，我仍然需要弄清楚给用户带来无限行/列错觉的最佳方式是什么。我认为我应该复制每行/列两侧的所有图块，可能仅在滚动该行/列时。

我向您寻求帮助只是为了了解您认为实现此界面的最佳方式，因为我认为我弄乱了代码。如果您需要更多详细信息，请问我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:44:31.513

如果我这样做，我的倾向是在比你更低的水平上进行。我会使用[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)作为主视图并使用[Canvas.drawBitmap()](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20android.graphics.Rect,%20android.graphics.Rect,%20android.graphics.Paint%29)渲染图块。这可能听起来像是更多的工作，但我认为这是做你想做的事情的正确方法，最终你会对结果更满意。

解决你的两个问题：

1.  `drawBitmap()`I 链接到的版本允许您指定要绘制的位图子集，因此您可以剪切图块而不是在它离开屏幕时缩小它。
2.  您将负责确定去哪里（并将其绘制到那里），因此表示图块矩阵的数据结构也需要表示屏幕外图块。

# css - '位置：绝对；底部：当父位置是相对位置时，0' 不起作用

> ID：10733080
> 
> 赞同：20
> 
> 时间：2012-05-24T07:33:20.240
> 
> 标签：css, position

我有一个CSS代码。

为什么`bottom: 0`不工作的时候`position: relative;`？

如果我放弃了，`position: relative;`作品`bottom`却又不在。`float: left``float: right``width: 930px;`

对不起我的英语不好

```
#main {
  position: relative;
  width: 930px;
  padding: 10px;
  margin: 0 auto;
}

#left {
  position: absolute;
  left: 0;
}

#right {
  position: absolute;
  right: 0;
}

#bottom {
  position: absolute;
  bottom: 0;
}
```

```
<div id="main">
  <div id="left">
    Left
  </div>
  <div id="right">
    Right
  </div>
  <div id="bottom">
    Bottom
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-24T07:35:35.930

那是因为当你设置`position:relative`在 main 上时，那么`position:absolute`将是*相*对于父级的。并且您的`#main`div 没有高度，这导致 div`#bottom`不在页面底部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:39:31.280

这不是要走的路，`float`用于这种类型的布局。

回到你的问题，

`bottom:0`工作正常，但由于你的主没有高度，你没有看到它，

这样做是`#main`为了

```
 #main
    {
        position: relative;
        width: 930px;
        padding:10px;
        margin:0 auto; 
        height:200px;
    } 
```

**编辑**：

您可以使用，

```
#main {
    position: relative;
    width: 930px;
    padding:10px;
    margin:0 auto; 
}

#left {
    position:absolute;
    left:0;
    top:0;
}

#right {
 position:absolute;
 right:0;
 top:0;
}

#bottom {
    left:0;
    position: absolute;
    bottom:-20px;
} 
```

但我不会推荐这个（我之前说过这个布局不应该被处理`float`） `absolute`不考虑`position`其他元素，所以如果`#left`有更多的高度，这个代码会中断。

如果我是你，我会用这个，

```
#main {
    position: relative;
    width: 930px;
    padding:10px;
    margin:0 auto; 
}

#left {
    float:left;
}

#right {
  float:right;
}

#bottom {
    clear:both;
} 
```

# animation - Blender：导出多个对象的 md2 动画（单独的时间轴）

> ID：10733083
> 
> 赞同：1
> 
> 时间：2012-05-24T07:33:26.383
> 
> 标签：animation, export, blender

我在 Blender 中有 2 个立方体，时间线必须并行运行。

我正在使用 min3d 导入 Android。但我想问题只出在导出部分，所以这应该不重要。

好的，我正在使用 Blender 2.49 来导出到 md2，因为无法使用该脚本运行更新的版本。

为什么是 md2，因为它是 min3d 唯一可以处理的动画格式。

问题：

md2 只需要 1 个对象，它似乎无法导出多个对象。

所以我加入了（ctrl + j）我的立方体。但是后来动画就搞砸了。时间线似乎也被合并了，两个对象以相同的方式一起移动。

有任何想法吗...？

如果在我的 Android 项目中有完全不同的方式来获取这些动画，请告诉我。但是我没有时间编写自己的导出器/解析器，所以请不要建议我这样做。

根据我目前的知识，我能想到的唯一选择是将每个对象部分（每个部分都有自己的时间线）导出为一个单独的对象，并在 opengl 中重建“场景”（我的对象）。

或者导出一个静态网格并使用 OpenGL 动态制作动画（我可能会这样做）。更多的工作编码，但可能是最简单的解决方案，对于这种情况（非常简单的旋转+平移）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T19:50:52.407

如果您的动画非常基本（平移/缩放/旋转），为什么要合并它们？您可以轻松地单独加载它们，然后在没有 OpenGL API 的情况下使用 Java 中的 min3D 为它们制作动画。

更不用说，min3D 有点旧，不再受支持。你可以试试[jPCT-AE](http://www.jpct.net/jpct-ae/)，它非常易于使用并且非常方便地为对象设置动画以进行简单动画。它能够加载 MD2、3Ds、OBJ 和 ASC 模型。与 mid3D（经验丰富）相比，jPCT 具有更好的性能。

对于创建包含多个网格的复杂 MD2 模型，我对 3Ds max的[Qtip插件有最好的体验。](http://qtipplugin.com/)它就像一个魅力。

# javascript - CRM 2011：使用 javascript 将值传递给 IFRAME/Web 资源

> ID：10733086
> 
> 赞同：0
> 
> 时间：2012-05-24T07:33:32.750
> 
> 标签：javascript, dynamics-crm-2011

我看过几篇不同的文章，它们似乎都暗示了同样的事情：

“使用所需的查询参数创建一个 url，并使用这个新的 Url 设置目标 iFrame，并让这个新页面读取请求”

我想知道是否有一种方法可以在不使用自定义 ASPX 页面的情况下做到这一点？

本质上，我想根据表单上的某些值在 iFrame 或 html Web 资源中动态显示一些文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:31:02.030

SDK 中没有任何内容要求使用 ASPX。事实上，在 CRM 2011 中不鼓励这样做，因为您需要找到一些地方来托管您的 ASP.Net 页面。

使用基本 HTML 页面（在 CRM 中创建为 Web 资源），您可以在 HTML 文档的 HEAD 中声明一些 JScript（或者更好的是，引用 JScript Web 资源）。该 JScript 可以读取通过 iFrame 发送的查询字符串参数并从那里执行所需的任何操作。

[请注意，SDK 声明](http://msdn.microsoft.com/en-us/library/gg327945.aspx)任何自定义查询字符串参数本身必须经过编码并通过`data`参数发送。

```
<HTML xmlns="http://www.w3.org/1999/xhtml"><HEAD><TITLE>Example page</TITLE>
<META charset=utf-8></HEAD>
<BODY style="BACKGROUND-COLOR: #f6f8fa; MARGIN: 0px; FONT-FAMILY: Segoe UI" contentEditable=true onload="doStuff">
<SCRIPT type=text/jscript>

function doStuff(){
    getQueryStrings();
    alertOrganisationName();
}

function alertOrganisationName(){
    alert(window.parent.Xrm.Page.context.getOrgUniqueName());
}

function getQueryStrings() {
    var message = document.getElementById("myOutputArea");
    var dataParameterString, querystring;
    // get data from querystring
    if (window.location.search != "") {
        querystring = window.location.search.substr(1).split("&");
        for (var i in querystring) {
            querystring[i] = querystring[i].replace(/\+/g, " ").split("=");
        }
        //look for the parameter named 'data'
        for (var i in querystring) {
            if (querystring[i][0].toLowerCase() == "data") {
                dataParameterString = querystring[i][1];
                break;
            }
        }

        message.innerText += dataParameterString;

    } else {
        message.innerText = "No details were specified in the querystring.";
        alert("ERROR: " + message.innerText);
    }
}       
 </SCRIPT>
 <DIV id="myOutputArea"></DIV>
</BODY></HTML> 
```

# .net - 如何在 C# 中检查机器上是否有 Oracle Oledb 提供程序？

> ID：10733088
> 
> 赞同：0
> 
> 时间：2012-05-24T07:33:40.997
> 
> 标签：.net, oracle, oledb

如果 Oracle 提供程序已安装且可用，我希望能够在我的应用程序启动时检测到。
在 C# 中是否有任何明显的简单方法可以实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T09:14:51.370

根据 Oracle 文档：[http](http://docs.oracle.com/cd/E11882_01/win.112/e23174/InstallODP.htm) ://docs.oracle.com/cd/E11882_01/win.112/e23174/InstallODP.htm Oracle.DataAccess.dll 程序集安装到以下位置：

.NET Framework 2.0：**ORACLE_BASE\ORACLE_HOME\odp.net\bin\2.x 目录**

.NET Framework 4：**ORACLE_BASE\ORACLE_HOME\odp.net\bin\4 目录**

如果您测试是否存在此程序集，则应指示是否安装了提供程序。

# linux - GNU Makefile 是否支持像“path/{a, b}”这样的 shell 参数扩展？

> ID：10733089
> 
> 赞同：1
> 
> 时间：2012-05-24T07:33:40.910
> 
> 标签：linux, makefile

我正在编写 Makefile dist 并安装目标。有很多文件要复制。所以我想知道gnu是否支持像shell'这样的参数。

**在 makefile**中，我想在下面实现这一点。

```
cp src/server/{IPinfo_server, IPinfo_server.conf} IPinfo/server 
```

现在我**在 makefile 中**这样写。

```
cp src/server/IPinfo_server IPinfo/server
cp src/server/IPinfo_server.conf IPinfo/server 
```

或者我应该用shell脚本编写它？

PS：我试着用谷歌搜索它。但我不知道如何描述这个问题。:-(

**PS1：问题是“IPinfo_server，IPinfo_server.conf”中不应该有空格**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:51:01.600

是的，它确实。

很容易测试出来。

```
$ cat GNUmakefile

all: 
    @echo foo{1,2}

$ gmake
foo1 foo2

$ echo $SHELL
/bin/bash 
```

如果它对您不起作用，请尝试显式添加`SHELL = /bin/bash`到您的 GNUMakefile。

# c# - ASP.NET MVC SSL 重定向过多

> ID：10733090
> 
> 赞同：0
> 
> 时间：2012-05-24T07:33:44.740
> 
> 标签：c#, asp.net-mvc, ssl, https, web-config

我的网站有问题。当我尝试用“www”打开它时。在地址的开头，我收到 TOO MANY REDIRECTS 310 错误。当我在我的服务器上安装 SSL 证书并添加`[RequireHttps]`到我的 Home Controller 顶部时，问题就开始了（我必须在这里使用它，因为登录表单在母版页中）。当我在没有“www”的情况下访问我的网站时。一切都好。我拥有的所有浏览器（FF、Chrome、IE、Opera）都会出现此问题。在 Opera 中，我可以看到重定向是如何进行的：它从 http 切换到 https，但我不知道为什么它会从 https 回到 http。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:22:18.623

问题是我们的托管服务提供商的服务器配置。

# actionscript-3 - 循环多个音轨（混音器）Flash AS3

> ID：10733091
> 
> 赞同：0
> 
> 时间：2012-05-24T07:33:51.253
> 
> 标签：actionscript-3, flash, audio

我正在尝试使用 Action Script 3 在 Flash 中创建一个混音器应用程序。该应用程序有 9 个按钮，当单击一个按钮时，声音将从外部 mp3 循环播放。单击按钮时，我可以播放声音（不循环播放），但不知道如何在单击多个按钮时一次播放多个声音。

这是我播放声音的代码：

```
var req:URLRequest = new URLRequest("Sound/Melody1.mp3");

var sound:Sound = new Sound();
var controller:SoundChannel;

function soundLoaded(event:Event):void

{

controller = sound.play();

controller.stop();

Btn_Melody1.addEventListener(MouseEvent.CLICK, playSound);

}

function playSound(event:MouseEvent):void

{

controller = sound.play();

}

sound.addEventListener(Event.COMPLETE, soundLoaded);

sound.load(req); 
```

.

这是第一阶段，接下来我将尝试添加音量滑块、静音、重置。

任何和所有的帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:44:26.223

由于您的两个声音都加载了相同的变量，因此它们不能一起播放。使用不同的实例变量来保存不同的声音。如需更多帮助，请访问[http://www.kennybellew.com/tutorial/](http://www.kennybellew.com/tutorial/)

# c# - 使用统一配置预加载对象

> ID：10733097
> 
> 赞同：0
> 
> 时间：2012-05-24T07:34:16.697
> 
> 标签：c#, wcf, unity-container

我如何需要配置统一来预加载所有注册的类型？我的意思是我有一个统一的配置，它看起来像这样

```
<alias alias="IMyObject" type="...">
<alias alias="MyObject" type="...">
<container>
    <register type="IMyObject" mapTo="MyObject">
        <constructor />
    </register>
</container> 
```

然后在我尝试从统一容器中解析时在代码中

```
 var newObject = container.Resolve<IMyObject>(); 
```

我收到了这个错误

*“无法解析类型名称或别名 MyObject。请检查您的配置文件并验证此类型名称。”*

但是，在 Resolving 之前，我在代码中的某处引用 MyObject 时，一切都很好。所以我的问题是，我怎样才能使用统一配置来防止这个错误？

**编辑**

看起来 MyObject 的程序集没有加载，因为我没有在整个项目中使用 MyObject。我只在 unity.config 中注册了它。

# c# - 从 CHANGGETABLE 中删除

> ID：10733098
> 
> 赞同：0
> 
> 时间：2012-05-24T07:34:22.687
> 
> 标签：c#, sql, sql-server-2008

我刚刚在我的数据库中启用了更改跟踪。我使用这些更改每隔几分钟更新一次索引。`changetable`该程序正在简单地使用正确地获取信息

`SELECT FROM CHANGETABLE(CHANGES dbo.table,0)`

我现在需要清除表和`delete`任何现有记录。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:34:15.027

禁用 tanbe (dbo.table) 的更改跟踪，然后重新启用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:46:22.853

创建记录大于0时删除的作业

从“表名”中删除，其中记录 > 0

或者

DELETE * FROM "tablename" WHERE RECORDS > 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T22:04:40.623

您不会从 CHANGETABLE 中清除记录，它是由每个数据库的 SQL 管理的，当它打开时使用`CHANGE_RETENTION`and选项。[您可以在这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/bb964713.aspx)`AUTO_CLEANUP`中了解这些选项。

在您对 CHANGETABLE 的调用中，您应该将第二个参数（“0”）更改为`SYS_CHANGE_VERSION`您收到的最后一个参数，然后您将只收到经过该版本修改的记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-26T08:54:39.970

您可以通过禁用和启用特定表的更改跟踪来清除更改跟踪表：

```
ALTER TABLE Attributes DISABLE CHANGE_TRACKING
ALTER TABLE Attributes ENABLE CHANGE_TRACKING WITH (TRACK_COLUMNS_UPDATED = OFF) 
```

# java - 如何在 LINUX 中以静默模式在 install4j 中安装 MySql db 包。？

> ID：10733099
> 
> 赞同：0
> 
> 时间：2012-05-24T07:34:26.073
> 
> 标签：java, mysql, installation, install4j

如何在 LINUX 中以静默模式在 install4j 中安装 MySql db 包？

为了安装 MySql db，我拥有所有必需的包

```
1) MySQL-client-community-5.1.57-1.rhel4.i386.rpm
2) MySQL-devel-community-5.1.57-1.rhel4.i386.rpm
3) MySQL-server-community-5.1.57-1.rhel4.i386.rpm 
```

要在 Linux 中安装这些软件包，我们只需几个步骤，例如 ::

```
1) rpm -qa | grep -i mysql
2) rpm -e mysql –nodeps
3) rpm -e mysql-server-5.0.22-2.1
4) rpm -ivh MySQL-server-community-5.1.57-1.rhel4.i386.rpm 
5) rpm -ivh MySQL-client-community-5.1.57-1.rhel4.i386.rpm 
6) rpm -ivh MySQL-devel-community-5.1.57-1.rhel4.i386.rpm 
7) /usr/bin/mysqladmin -u root password 'password'
8) mysql -V
9) mysql -u root -p 
```

我希望所有这些步骤都由 install4j 处理。

如何在 install4j 中完成所有这些工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:20:40.850

您只需将所有 RPM 文件添加到 install4j 中的分发树中。那么这取决于您的媒体文件是安装程序还是只是 RPM 存档。

*   对于安装程序媒体文件，您将带有上述命令的 shell 脚本添加到您使用“运行可执行文件”操作调用的分发树中。

*   对于 RPM 媒体文件，将上述命令添加到可以在媒体向导中配置的“安装后脚本”中。

# javascript - iOS 应用程序（iPhone 和 iPad）中的阿拉伯字体

> ID：10733101
> 
> 赞同：0
> 
> 时间：2012-05-24T07:34:30.920
> 
> 标签：javascript, iphone, html, objective-c, xcode

有没有办法使用javascript命令或函数从html文件更改UIWebView中的阿拉伯字体

英文字体示例：

```
<script language="JavaScript">
var fontType = new Array();
fontType[0] = 'Arial';
fontType[1] = 'Verdana';
fontType[2] = 'Tahoma'; 
```

或类似的东西

任何想法 ？？

甚至不使用 javascript 或 html

纯客观 c

请帮忙？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:06:29.570

我找到了它，通过使用 CSS 并将其与`UIWebview`

# vim - 如何列出 VIM NERDTree 中的所有书签？

> ID：10733103
> 
> 赞同：8
> 
> 时间：2012-05-24T07:34:38.287
> 
> 标签：vim, nerdtree

我想看看我的 NERDTree 中有多少个书签，并且我想列出所有这些书签，购买 NERDTree 或 vim 中是否有任何命令可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T07:42:01.827

只需按下`B`（当 NERDTree 处于活动状态时），即可在文件树上方查看您的书签。如果您希望它们在单独的缓冲区中，只需`:e $HOME/.NERDTreeBookmarks`（如果您没有更改`NERDTreeBookmarksFile`选项）。

# iphone - 随意混搭

> ID：10733108
> 
> 赞同：1
> 
> 时间：2012-05-24T07:35:01.747
> 
> 标签：iphone, ios, xcode

所以在我的轮播中我实现了这个：

```
- (UIView *)carousel:(iCarousel *)_carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{   
   // int randomforIndex = arc4random()%[images count]+1;
        UIImageView *imageView  = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[images objectAtIndex:index]]];
        return imageView;

} 
```

我将我的图像分配给`NSString`. 每当带有图像的轮播在特定位置停止时，`[images objectAtIndex:index]`它都会执行相应的操作。但是当我使用这个`randomforIndex`零件时`index`，一切都变得混乱了。所以我的问题是如何在不随机化它们的值的情况下随机化图像。

这就是我使用 NSString 添加图像的方式：

```
for (int x=1; x<76;x++) {
        // add as NSString
        [images addObject:[NSString stringWithFormat:@"%d", x]];
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:57:14.530

您将不得不单独存储随机列表。制作另一个数组并将随机序列放入该数组中。然后，您可以将其用作数据源，并保持数字和图像之间的链接完好无损。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:40:32.267

你可以试试这个：首先你`images`用你的代码填充你的数组。然后你**打乱**这个有序数组。这里有一个很好的 NSArray shuffle 类别：[Shuffling an NSArray](http://www.cocoanetics.com/2009/04/shuffling-an-nsarray/)。

请注意，您应该删除空的#import 行`NSArray+Helpers.h`

```
images = [[NSMutableArray alloc] init];
for (int x=1; x<76;x++)
{
    [images addObject:[NSString stringWithFormat:@"%d.png", x]];
}
images = (NSMutableArray *)[images shuffled]; 
```

这部分代码已经过测试并且可以正常工作。

从这一点开始，您应该可以使用简单的 viewForItemAtIndex 而不进行任何随机化，因为文件名已经被改组了。

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{   
    if (view == nil)
    {
        view = [[UIImageView alloc] init];
    }

    UIImage* nimage = [UIImage imageNamed:[images objectAtIndex:index]];
    view.image = nimage;
    view.frame = CGRectMake(0.0,0.0,nimage.size.width,nimage.size.height);  

    return view;
} 
```

# html - 将图像与文本配对并在父对象内居中

> ID：10733114
> 
> 赞同：1
> 
> 时间：2012-05-24T07:35:35.683
> 
> 标签：html, css

我正在尝试复制此构造： http: [//kaitnieks.com/images/divme.png](http://kaitnieks.com/images/divme.png)

问题由两部分组成：

1）如何创建中间框，扩展为包含红色图像和蓝色文本所需的大小；

2）如何在绿色盒子内将所述盒子水平和垂直居中；

附加要求：解决方案必须在 IE7 上运行良好，并且应该在 IE6 上运行（可能不完美，但元素至少应该是可见的）。

我可能可以使用网络上描述的一种技术来完成 #2，但我对 #1 不太确定，尽管直觉上它似乎应该是简单的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:56:29.090

[这是＃1的一个](http://jsfiddle.net/TgBXE/)

第一：我使用内联元素，因为在 IE7 中`display: inline-block`只适用于自然内联的元素（虽然它不漂亮，你可以将块级元素放入其中，我决定不这样做）。我设置了小盒子的大小，在它上面设置了一个`-height/2`上边距，并将它定位到一半。

至于#2，如果你有一个固定的绿色高度，因为整个东西是一个内联块，你可以[像这样](http://jsfiddle.net/TgBXE/3/)更新它。它将 设置为`line-height`元素的高度，并将黑色垂直居中。如果你需要，你也可以设置一个`text-align: center`。`.green`

我忘了 IE7 不支持最小高度。我在容器中添加了一个高度为绿色的填充，在文本块中添加了一个负边距，所以它不会显示在上面。

[固定最小高度的最终小提琴](http://jsfiddle.net/TgBXE/4/)（忘记IE7不支持，您也可以通过单击更改文本的长度`blue`）。

你必须添加一个`&nbsp;`，`.container`否则它不会居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:55:47.060

1) An element will automatically adjust its size to its content if you don't set width nor height it

2) Centering the box horizontally should be possible is my feeling; however you'll need some javascript to center it vertically if the height is variable. So you might as well do the positioning of the whole box using javascript.

Centering vertically with variable height is a bitch. If you insist in trying it with just css, [this](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html) link is a good read.

# php - 令人困惑的语法错误？

> ID：10733119
> 
> 赞同：-2
> 
> 时间：2012-05-24T07:35:42.517
> 
> 标签：php, mysql, syntax

我在这里收到此错误

```
Parse error: syntax error, unexpected ',' in /home/u423419659/public_html/install/install.php on line 44 
```

我很确定我遵循了所有正确的程序，为什么会出现这个错误？

```
 public function SozcuguSifrele( $NEYI )
    {
        $result = "";
        $i = 0;
        while ( $i < ( $NEYI ) )
        {
            $char = ( $NEYI, $i, 1 );
            $keychar = ( $this->AnahtarKelime, $i % ( $this->AnahtarKelime ) - 1, 1 );
            $char = ( ( $char ) + ( $keychar ) );
            $result .= $char;
            ++$i;
        }
        return ( ( $result ) ); 
```

第 44 行将是这部分

```
$char = ( $NEYI, $i, 1 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:48:03.370

这是我最好的猜测。

这看起来是一次性加密算法的一种相当奇怪的实现。您的代码崩溃的原因是您以某种方式丢失了该特定行的函数名称。

```
 $char = ( $NEYI, $i, 1 ); 
```

应该是

```
 $char = substr( $NEYI, $i, 1 ); 
```

这也可以解释为什么似乎有很多额外的括号。您可能缺少其他代码行中的功能：

```
 $keychar = ( $this->AnahtarKelime, $i % ( $this->AnahtarKelime ) - 1, 1 ); 
```

应该是：

```
 $keychar = substr( $this->AnahtarKelime, $i % strlen( $this->AnahtarKelime ) - 1, 1 ); 
```

我建议尝试找到一个未修改的源，但是既然您知道自己在做什么，那么重新实现应该不会非常困难。

# android - 当 wifi 或 3g 网络状态改变时的 BroadcastReceiver

> ID：10733121
> 
> 赞同：34
> 
> 时间：2012-05-24T07:35:46.193
> 
> 标签：android, android-service

我有一个应用程序，只要手机连接到 WiFi，它就会更新数据库。我已经实现了一个`Service`并且`BroadcastReceiver`它将运行`Service`（它会告诉我正在使用哪个网络），但问题是我不知道当网络状态发生变化或连接到某种类型时要在`manifest`文件中添加什么来启动`BroadcastReceiver`网络的

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-24T07:40:39.237

你需要

```
<intent-filter>
<action android:name="android.net.wifi.WIFI_STATE_CHANGED"/>
<action android:name="android.net.wifi.STATE_CHANGE"/>
</intent-filter> 
```

在你的`receiver`标签中。

或者，如果您想对其进行更多控制，请在注册之前进行`BroadcastReceiver`设置：

```
final IntentFilter filters = new IntentFilter();
filters.addAction("android.net.wifi.WIFI_STATE_CHANGED");
filters.addAction("android.net.wifi.STATE_CHANGE");
super.registerReceiver(yourReceiver, filters); 
```

**WIFI_STATE_CHANGED**

广播`<intent-action>`指示 Wi-Fi 已启用、禁用、启用、禁用或未知。一个额外的提供这种状态作为一个 int。如果可用，另一个额外提供先前的状态。

**STATE_CHANGE**

广播`<intent-action>`指示 Wi-Fi 连接状态已更改。一个额外的以 NetworkInfo 对象的形式提供了新的状态。如果新状态为 CONNECTED，则额外的附加信息可能会提供接入点的 BSSID 和 WifiInfo。作为字符串

此外，您需要在`manifest`标签内指定正确的权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

要检查连接，您可以使用`ConnectivityManager`它告诉您可用的连接类型。

```
ConnectivityManager conMngr = (ConnectivityManager)this.getSystemService(this.CONNECTIVITY_SERVICE);
android.net.NetworkInfo wifi = conMngr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
android.net.NetworkInfo mobile = conMngr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-21T11:53:30.040

这是我在连接更改时收到通知的方法。您定义一个`BroadCastReceiver`来接收广播。

```
public class NetworkChangeReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        ConnectivityManager connMgr = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo wifi = connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        NetworkInfo mobile = connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

        boolean isConnected = wifi != null && wifi.isConnectedOrConnecting() ||
            mobile != null && mobile.isConnectedOrConnecting();
        if (isConnected) {
            Log.d("Network Available ", "YES");
        } else {
            Log.d("Network Available ", "NO");
        }
    }
} 
```

您还必须`BroadcastReceiver`在清单文件中定义它并按`ConnectivityChange`.

```
<receiver android:name=".NetworkChangeReceiver" >
        <intent-filter>
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
        </intent-filter>
</receiver> 
```

来源[在这里](http://programmingtutorialz.blogspot.com.es/2013/07/android-broadcastreceiver-when-wifi-or.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-21T16:16:24.060

补充@Dantalian的回答。从 Android Nougat 开始，您不应在 Manifest 上声明您的接收器，因为它不会接收`CONNECTIVITY_ACTION`广播。您应该使用该`Context.registerReceiver(Receiver, Intent)`方法注册您的接收器。

链接到[这里的源代码](https://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T07:53:34.980

You should make an `BroadcastReceiver` that will be triggered when the connectivity status has changed :

Here Same question [How to check the Internet Connection periodically in whole application?](https://stackoverflow.com/questions/10350449/how-to-check-the-internet-connection-periodically-in-whole-application/10350511#10350511)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-30T14:04:43.633

声明要传递给广播接收器的意图过滤器

```
IntentFilter filter = new IntentFilter(WifiManager.WIFI_STATE_CHANGED_ACTION);
registerReceiver(mReceiver, filter); 
```

在广播接收器中，检查 EXTRA_WIFI_STATE；

```
private BroadcastReceiver mReceiver = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        switch (action)
        {
            case WifiManager.WIFI_STATE_CHANGED_ACTION:
                int extra = intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE,0);
                if(extra==WifiManager.WIFI_STATE_ENABLED)
                {

                }//...else WIFI_STATE_DISABLED, WIFI_STATE_DISABLING, WIFI_STATE_ENABLING
                break;
        }

    }
}; 
```

# c# - 如何通过扩展方法降序排序？

> ID：10733128
> 
> 赞同：-1
> 
> 时间：2012-05-24T07:36:05.587
> 
> 标签：c#, linq

```
mylist.OrderBy(p => p.Description); 
```

可能上升 - 那么下降呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T07:36:40.047

只需使用`OrderByDescending`/`ThenByDescending`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:37:42.760

**为什么要在可用时创建扩展方法！**

```
mylist.OrderByDescending(p => p.Description); 
```

您正在使用的内容将按升序排列。要按降序排列，请使用`OrderByDescending`.

# oracle - 找到子记录时引发异常

> ID：10733129
> 
> 赞同：1
> 
> 时间：2012-05-24T07:36:07.330
> 
> 标签：oracle, stored-procedures, plsql

我有一个 plsql 过程来从子表和父表中删除记录。

我想在找到子记录时提出异常。

我怎样才能做到这一点？

```
CREATE OR REPLACE PROCEDURE myproc(
    p_id       number,
    p_id2      number,
    p_par3      number)
AS
BEGIN
 DELETE FROM   child_table
            WHERE   id1 = p_id and par=p_par3;

    DELETE FROM   parent_table
            WHERE   no = p_id2;
COMMIT;

EXCEPTION   
    WHEN OTHERS
    THEN
        --raise
END myproc;
/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T07:48:38.377

如果您不想捕获异常，请删除异常块！

```
CREATE OR REPLACE PROCEDURE myproc(p_id NUMBER, p_id2 NUMBER, p_par3 NUMBER) AS
BEGIN
   DELETE FROM child_table
    WHERE id1 = p_id
      AND par = p_par3;

   DELETE FROM parent_table WHERE no = p_id2;
   COMMIT; /* do you really want to commit in a procedure? */
END myproc; 
```

您不必全部捕获它们（[例外不是口袋妖怪](http://www.dodgycoder.net/2011/11/yoda-conditions-pokemon-exception.html)）。如果你真的坚持追赶和重新加注，你可以使用[RAISE](http://docs.oracle.com/cd/E11882_01/timesten.112/e21639/exceptions.htm#TTPLS200)或[RAISE_APPLICATION_ERROR](http://docs.oracle.com/cd/E11882_01/timesten.112/e21639/exceptions.htm#TTPLS202)：

```
EXCEPTION
   WHEN OTHERS THEN
      raise_application_error(-20001 /* user-defined exception number 
                                        between -20999 and -20000 */,
                              'your user-defined exception message',
                              TRUE /* this will preserve the error stack */
                              );
END; 
```

如果您想更具体并仅捕获子异常，则必须[定义异常](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/errors.htm#i3329)编号，因为PL/SQL 中没有针对此错误的[预定义异常：](http://docs.oracle.com/cd/E11882_01/timesten.112/e21639/exceptions.htm#TTPLS196)

```
CREATE OR REPLACE PROCEDURE myproc(p_id NUMBER, p_id2 NUMBER, p_par3 NUMBER) AS
   child_exists EXCEPTION;
   PRAGMA EXCEPTION_INIT(child_exists, -2292); /* raises ORA-02292 */
BEGIN
   DELETE FROM child_table
    WHERE id1 = p_id
      AND par = p_par3;

   DELETE FROM parent_table WHERE no = p_id2;
   COMMIT; /* do you really want to commit in a procedure? */

EXCEPTION
   WHEN child_exists THEN
      -- do something
      RAISE;
END myproc; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:02:48.573

> 发现子记录时我想提出异常

```
create or replace procedure myproc(p_id number, p_id2 number, p_par3 number)
as
begin

   delete from child_table
    where id1 = p_id
      and par = p_par3;

   if sql%rowcount > 0 then
      raise_application_error(-20001, 'Child record(s) found!');
   end if;

   delete from parent_table where no = p_id2;

end myproc; 
```

HTH。

亚历山德罗

PS：修改了我对阅读理解不足的回答，我以为你想要的，当没有找到孩子记录时会出现异常。

# php - 用于处理来自 MySql Server 的大数据的架构问题

> ID：10733134
> 
> 赞同：0
> 
> 时间：2012-05-24T07:36:27.037
> 
> 标签：php, mysql, xml, json

我有 5 个包含数百万行的表。问题是我需要创建一个菜单，甚至将来可能会扩展更多。对此表的选择查询是我网站的核心。任何访问我的网站的人都会对服务器进行十几个选择查询。在这种情况下可以实现的最佳架构设计是什么？

1.  使用索引和缓存。
2.  生成所有用户都可以使用的 XML 或 JSON，而无需每次都查询数据库。[可以通过 cron 作业生成 XML 或 JSON，我的行不会每 5 分钟更改一次]。

或者还有其他好的解决方案吗？即使批评我上面提到的方式也是一个有效的答案。

PS：如果解决方案可以在于更好的软件架构，我很乐意不投资更多的服务器功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:50:48.513

我建议使用 APC 用户缓存来存储经常使用的数据，但如果您的查询是按用户定制的，那可能不是可行的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:57:20.337

您要做的第一件事是正确索引您的表，使用类型字段`int`来连接您的表，将[query_cache_size](http://dev.mysql.com/doc/refman/5.0/en/query-cache-configuration.html)设置为 512 MB（可能更多，但这已经足够了），使用 APC 用户缓存。如果您使用`for`循环而不是

```
for ($i = 0; $i < count($arr); $i++) 
```

做类似的事情：

```
$count = count($arr);

for ($i = 0; $i < $count; $i++) 
```

这不是一个完整的指南，但它是基础知识。

# sql-server - 事务复制后的 PK 冲突

> ID：10733138
> 
> 赞同：1
> 
> 时间：2012-05-24T07:36:40.843
> 
> 标签：sql-server, sql-server-2008, database-replication

我有一个应用程序设置，事务复制被推送到备用机器，用于紧急故障转移。复制似乎正在工作，对服务器 1 所做的任何插入都将自动出现在服务器 2 上。

但是，我不能完全让故障转移工作。在服务器 1 变得不可用的情况下（这是唯一会使用服务器 2 的情况，因此复制是单向的），这个想法是工作应该在服务器 2 上继续，并且过渡应该是无缝的因为所有数据都已被复制。

但是当移动到服务器 2 时，在确保服务器 1 上的所有更新都已传输后，对于某些表，我不断收到主键违规异常。

> 违反主键约束“PK_TableA”。无法在对象“dbo.TableA”中插入重复键。

一个简单的查询，例如

```
INSERT INTO TableA (Field1, Field2, TableB_ID) VALUES ('a','b', 6) 
```

将产生上述错误。似乎当我指示表分配它自己的标识时，通过从查询中省略它（`TableA`有一个`ID int identity(1,1)`字段），SQL Server 将自动分配一个违反 PK 约束的 ID。为什么会这样？

* * *

`TableA`有一个触发器`INSERT`，`DELETE`它做一个简单的非规范化工作

```
UPDATE TableB
SET Count = (SELECT COUNT(1) FROM TableA WHERE TableB.ID = TableA.TableB_ID)
WHERE ID IN(
    -- Fetch affected ID's from deleted or inserted rows
    SELECT DISTINCT TableB_ID FROM deleted
    UNION
    SELECT DISTINCT TableB_ID FROM inserted
) 
```

在复制时，这意外地不是 Server 2 数据库的一部分，后来我插入了它。现场的一致性`TableB.Count`对于手头的任务并不重要。PK 冲突发生在服务器 2 中存在触发器之前以及创建它之后。

* * *

At both Publisher and Subscriber, the ID field that is yielding the violations has the following definition:

```
[ID] [int] IDENTITY(1,1) NOT FOR REPLICATION NOT NULL 
```

I suppose the `NOT FOR REPLICATION` part is redundant on the Publisher, as no replication job will ever write to it, but I can't see that it should be the cause of the problem, either.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:09:13.050

IDENTITY ranges must be managed explicitly in a replication scenario.

*   [http://msdn.microsoft.com/en-us/library/ms152543.aspx](http://msdn.microsoft.com/en-us/library/ms152543.aspx)
*   [http://msdn.microsoft.com/en-us/library/ms151736.aspx](http://msdn.microsoft.com/en-us/library/ms151736.aspx)

In your case you need to find, for each IDENTITY, a value larger than all current values.

Then you can configure one server to assign only odd numbers and the other only even numbers. JUst change the definition to IDENTITY(MAXPLUS1,2) on the publisher and IDENTITY(MAXPLUS2,2) on the subscriber.

Obviously you can extend this scheme to support any number of susbcribers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-16T18:22:16.553

I ran into the same problem - the CheckIdent method is also what saved me, here's a quick and dirty script that got me going.

If you send the output of this query to text (not grid results, it's a button in the SSMS toolbar) you can copy/paste it into a new query window and get another set of output that has all the checkIdent commands for every table in the database with the right seed value (assuming you always increment by one on every table that has an identity). You can then take those results (if you see some nulls in the second query window you may need to omit those manually) and copy/paste into a third query window and execute it.

Not a glamorous solution, but you can get a DB back up and running really quickly if you're in a bind (your main DB server went away and you need a replica (maybe the only replica?) to become the primary server.

```
SELECT 'select ''[' + s.name + '].[' + t.name + ']'' as TableName, ''DBCC CHECKIDENT(''''[' + s.name + '].[' + t.name + ']'''', ''''RESEED'''','' + cast(max ([' + s.name + '].[' + t.name + '].[' + i.name + '])' + '+1 AS varchar(50)) + '')'' as reseed from [' + s.name + '].[' + t.name + ']'
+ char(13) + char (10) + 'union all' 
FROM sys.schemas AS s
INNER JOIN sys.tables AS t
ON s.[schema_id] = t.[schema_id]
INNER JOIN sys.identity_columns i
on i.[object_id] = t.[object_id]
order by t.name 
```

# sql - SQL Server，如何转置列的数据

> ID：10733141
> 
> 赞同：8
> 
> 时间：2012-05-24T07:37:31.407
> 
> 标签：sql, sql-server, tsql

> **可能重复：**
> [将多行连接成一个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

我有一个查询

```
SELECT city FROM cityTable 
```

它返回

```
delhi
faridabad
haryana
mathura
kerla 
```

我只想以转置方式产生类似的结果

```
delhi | faridabad | haryana | mathura | kera 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:44:49.207

```
SELECT STUFF (
 (SELECT N', ' + city FROM CityTable FOR XML PATH(''),TYPE)
  .value('text()[1]','nvarchar(max)'),1,2,N'') 
```

[将多行连接成一个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:35:03.493

```
declare @city nvarchar(max)
SELECT @city = coalesce(@city+' | ', '')+city FROM cityTable 
```

编辑：

为了显示结果

```
SELECT @city 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T08:18:17.713

您可以使用`PIVOT`and`UNPIVOT`作为此处发布的示例

[TSQL – 使用 PIVOT 和 UNPIVOT 转置数据](http://sqlandme.com/2011/04/20/tsql-transpose-data-using-using-pivot-and-unpivot/)

注意：您可以在 SQL 的 BOL（在线书籍）上找到语法

# php - 在非对象 i 上调用成员函数 getPageTitle()

> ID：10733146
> 
> 赞同：1
> 
> 时间：2012-05-24T07:37:53.823
> 
> 标签：php

我有这个功能：

```
 function getTitle(){
    $crawler = new DOM_Crawler($this->url);
            try{
            if ( $title = $crawler->getPage()->getPageTitle()) {
                $this->debug_element("title", $title);
                unset($crawler);
                return $title;
            } else {
                unset($crawler);
                return self::TITLE_FETCH_WARN;
            }
            }
            catch(Exception $e){
                return self::TITLE_FETCH_WARN;
            }
} 
```

我试图阻止爬虫..成为非对象并防止抛出该错误..尝试捕获..那么我怎样才能捕获异常？

> 致命错误：在第 163 行的 C:\Program Files (x86)\Zend\Apache2\htdocs\backlinks\cron\Backlinks.php 中的非对象上调用成员函数 getPageTitle()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:48:34.083

尝试

```
$page = $crawler->getPage();
if ($page && ($title = $page->getPageTitle())) { 
```

# c# - 如何在没有空格的情况下拆分字符串？

> ID：10733152
> 
> 赞同：0
> 
> 时间：2012-05-24T07:38:26.473
> 
> 标签：c#, string, split, character

我有一个关于 C# 的简单问题，基本上我想根据大写字符将字符串（没有空格）拆分为单词。

假设我有一个字符串“MenInBlack”，我想将其拆分为：“Men”、“In”和“Black”

我已经尝试过`Regex.Split`，但不是按照我的目标，代码示例如下：

```
string[] word = Regex.Split(a, @"[A-Z]",RegexOptions.Compiled); 
```

似乎拆分方法将排除拆分条件，我只得到“en”、“n”和“lack”。

知道如何解决上述问题吗？

提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:39:42.980

不要分裂，搜索。拆分意味着您有一个分隔符，即不是令牌的一部分，将令牌彼此分开。

只需搜索`[A-Z][a-z]+`

```
var regex = new Regex(@"([A-Z][a-z]*)");
var matches = regex.Matches(searchString); 
```

# asp.net - 隐藏源代码

> ID：10733154
> 
> 赞同：0
> 
> 时间：2012-05-24T07:38:29.830
> 
> 标签：asp.net

我的网站有问题。我需要在所有网页的浏览器菜单中禁用右键单击和查看源代码选项。可能还有其他一些获取源代码的方法，没关系。我已经禁用了右键单击。所以如果有任何方法可以抑制浏览器查看源选项，请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T07:49:07.313

隐藏 html 源代码的最佳方法是根本不将其发送给您的客户。问题是客户将无法看到您的网站。如果您确实希望他看到您的网站，则必须向他发送他可以呈现的内容。如果你发送一些东西，任何人都可以阅读你的来源。没有神奇的方式来显示不存在的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T15:43:41.950

从尖刻的评论中退后一步，包括我自己的那些我道歉的过于严厉的评论，我突然想到这是一个解释*为什么*你所寻求的东西是徒劳的机会。

当服务器向浏览器发送响应时，它不会发送已编译的应用程序。相反，它发送的***指令***与数据混合在一起。您要求的是能够在收件人不看到说明的情况下发送说明。一个类比是：

> 我想在收件人没有看到说明的情况下向奶奶家提供说明。

此外，接收者可以自由地忽略任何或所有这些指示。使用我们的类比，就好像指令中的最后一行是`Don't read this`. 正如同行所建议的那样，避免某人阅读指令的唯一方法是不提供它。

请注意，您只是向用户的浏览器发送有关如何格式化数据的说明；不能控制他们的机器。就像抢夺用户的注意力一样，如果你试图发送改变用户本地浏览器功能的指令，这被认为是***非常粗鲁***的，只会惹恼用户，他们很容易忽略这些指令。还要考虑到所有浏览器都有本机开发人员工具，可以让您查看标记、JavaScript 和 CSS，并且无法禁用这些。

总之，不可能禁用查看源选项，也不可能以任何方式阻止用户查看您发送到浏览器的源。此外，还有许多工具可以禁用您的右键 nerf。因此，鉴于不可能阻止用户查看源代码，应该向您的团队提出的更好的问题是*为什么*. 你为什么一开始就试图隐瞒消息来源？

# iphone - NavigationBar 后退按钮消失

> ID：10733156
> 
> 赞同：1
> 
> 时间：2012-05-24T07:38:33.170
> 
> 标签：iphone

我使用下面的代码在导航栏上显示 uiimage

```
-(void)hideTopBanner:(bool)b;
{
    if(b)
    {

        [UIView animateWithDuration:0.35 animations:^{

         UIView *bannerView =[self.navigationController.navigationBar viewWithTag:999];
            [bannerView setFrame:CGRectMake(-320, 8, 144, 30)];

        }];
    }
    else {

        [UIView animateWithDuration:0.35 animations:^{

            UIView *bannerView =[self.navigationController.navigationBar viewWithTag:999];
            [bannerView setFrame:CGRectMake(88 , 8, 144, 30)];

        }];
    }
} 
```

//---------------

```
UIImageView *bgImageView =  [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"topbg1.png"]] ;
[bgImageView setFrame:CGRectMake(0, 0, 320, 46)];
[self.navigationController.navigationBar addSubview:bgImageView];
bgImageView.tag=999;
[bgImageView release]; 
```

我尝试使用

```
 UIBarButtonItem *myBarButtonItem = [[UIBarButtonItem alloc] init];
   myBarButtonItem.title = @back"; // or whatever text you want
    self.navigationItem.backBarButtonItem = myBarButtonItem;
    [myBarButtonItem release]; 
```

显示后退按钮，但没有显示

但是当它导航到另一个视图控制器时。导航栏上的后退按钮消失。

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:53:24.763

If everything fails (setting title etc), use this:

```
UIBarButtonItem *myBarButtonItem = [[UIBarButtonItem alloc] init];
[myBarButtonItem addTarget:self action:@selector(myBarButtonItemPressed) forControlEvents:UIControlEventTouchUpInside];
myBarButtonItem.title = @"back"; // or whatever text you want
self.navigationItem.leftBarButtonItem = myBarButtonItem;
[myBarButtonItem release];

- (void)myBarButtonItemPressed
{
    // Do your stuff, like pop view controller
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:41:05.303

确保您的新视图控制器（您要导航到的那个）有一个标题。当我的视图没有设置标题时，我遇到了这个问题。

# c# - EF CodeFirst: DropCreateDatabaseIfModelChanges 除了一个表

> ID：10733157
> 
> 赞同：0
> 
> 时间：2012-05-24T07:38:36.663
> 
> 标签：c#, entity-framework, .net-4.0, entity-framework-4.1, ef-code-first

所以我使用这个角色：

```
DropCreateDatabaseIfModelChanges 
```

但是我有一个表来保存它的数据。那么有没有办法排除一个表或保留一个表数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:44:44.207

不是通过删除整个数据库（这些角色就是这样做的）。我可以想象您可以创建自己的角色，为所有表显式执行 DROP 查询，除了您要保留的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:44:56.320

不，没有办法排除表，因为顾名思义，它将删除整个数据库。

但是，您可以从初始化程序继承并覆盖种子方法以重新插入数据：

```
public class MyInitializer : DropCreateDatabaseIfModelChanges<MyContext>
{
    protected override void Seed(MyContext context)
    {
        //insert data to tables through context
    }
} 
```

如果你想要更复杂的东西，你需要`IDatabaseInitializer<TContext>`直接实现，比如：

```
public class MyComplexInitializer : IDatabaseInitializer<MyContext>
{ 
    public void InitializeDatabase(MyContext context)
    {
        if (context.Database.Exists())
        {
             if (context.Database.CompatibleWithModel(true))
                 return;
             //do something bofore delete
             context.Database.Delete();
        }
        context.Database.Create();
        //add some data to context
        context.SaveChanges();                 
    }
} 
```

# delphi - 如何将参数传递给 OLE 自动化对象，例如 MS Word

> ID：10733158
> 
> 赞同：4
> 
> 时间：2012-05-24T07:38:38.193
> 
> 标签：delphi, ms-word, ole-automation

这主要是一个与 Delphi 语法相关的问题。调用 OLE 对象的方法时，我需要将参数设置为 True。

我需要在 Word Automation 中设置（来自[Word Reference](http://support.microsoft.com/kb/285885/en-us)）：

```
wdApp.Quit SaveChanges:=wdDoNotSaveChanges 
```

作为示例，我想执行此操作的虚拟程序如下（请注意 WordApp.Quit！）：

```
Procedure GetWordVersion;
    var
      WordApp: OLEVariant;
    begin
      { Create the OLE Object }
      Try
          WordApp := CreateOLEObject('Word.Application');
          WordVersion := WordApp.version;
           WordApp.Quit; // >-- HERE!!!!
      except
        on E: Exception do
        begin
          WordVersion := -1;
        end;
      End;
end; 
```

[在这里](https://stackoverflow.com/questions/5484721/delphi-convert-doc-to-pdf-using-word-activex)（检查接受的答案）似乎做了同样的事情，但如果我尝试它：不编译。我在这里只复制相关部分：

```
Const wdDoNotSaveChanges = 0
[...]

  wdo.Quit wdDoNotSaveChanges 

[...]

End Function 
```

重要提示：而不是使用

```
// this is from Word Reference    
wdApp.Quit SaveChanges:=wdDoNotSaveChanges 
```

可以使用

```
// from Word Reference
wdApp.NormalTemplate.Saved = True 
```

任何人都可以修改我上面的 GetWordVersion 程序，以便使用上述两种方法中的任何一种吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T07:56:06.683

你可以写：

Wordapp.Quit(SaveChanges:=wdDoNotSaveChanges);

或者使用这个：

```
word := CreateOleObject('Word.Application'); 

.... 
word.DisplayAlerts := false;
word.Quit; 
```

# php - 假模板问题

> ID：10733160
> 
> 赞同：0
> 
> 时间：2012-05-24T07:38:55.993
> 
> 标签：php

我在将站点部分划分为不同文件时遇到问题，因此编辑起来更容易，但我遇到了一些问题..该站点无法正常工作..

这是有效的原始部分：

```
<?php if($_SERVER["HTTP_X_PJAX"]): ?>
<div id="main">first change</div>
<?php else: ?>
<html>
<head>
<script src="http://pjax.heroku.com/jquery.js"></script>
<script src="http://pjax.heroku.com/jquery.cookie.js"></script>
<script src="http://pjax.heroku.com/jquery.pjax.js"></script>
<script type="text/javascript">
$(function() { $('a').pjax('#main');
$('#main').bind('pjax:start', function(){$('#main').animate({ height: 'hide', opacity:                    'hide' }, 'fast')})
.bind('pjax:end', function(){$('#main').animate({ height: 'show', opacity: 'show' },   'slow')}); });
</script>
</head>
<body>
<?php
$header = "this is first part
<br/> <a href='test2.php' data-pjax='main'>GO</a>";
$date = date("Y-m-d H:i:s");
$footer = "this is first part";
echo "$header<br/>$date<br /><div id='main'>first page</div><br />$footer";
?>
</body>
</html>
<?php endif; ?> 
```

这是我现在拥有的，但它不起作用：

```
<?php $body = "<div id='main'>first page</div><br /><a href='pjax2.php' data-pjax='main'>GO BACK</a>"; ?>

<?php if($_SERVER["HTTP_X_PJAX"]): ?>
<?php echo "$body";?>
<?php else: ?><?php include "header.php";?>
<?php echo "$body"; ?><?php include "footer.php" ;>
<?php endif; ?> 
```

Header.php 是这样的：

```
<html>
<head>
<script src="http://pjax.heroku.com/jquery.js"></script>
<script src="http://pjax.heroku.com/jquery.cookie.js"></script>
<script src="http://pjax.heroku.com/jquery.pjax.js"></script>
<script type="text/javascript">
$(function() { $('a').pjax('#main');
$('#main').bind('pjax:start', function(){$('#main').animate({ height: 'hide', opacity:     'hide' }, 'fast')})
.bind('pjax:end', function(){$('#main').animate({ height: 'show', opacity: 'show' },     'slow')}); });
</script>
</head>
<body> 
```

Footer.php 是这样的：

```
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:59:00.430

尝试通过以下方式替换您的代码：
- 删除未使用的 php 标记
- 确保`header.php`和`footer.php`与当前文件位于同一目录中。

```
<?php 
$body = "<div id='main'>first page</div><br /><a href='pjax2.php' data-pjax='main'>GO BACK</a>"; 

if($_SERVER["HTTP_X_PJAX"]) {
    echo $body;
} else {
    include("header.php");
    echo $body; 
    include("footer.php");
}
?> 
```

# mysql - 试图通过 rails 中的控制器获取 created_at 日期

> ID：10733164
> 
> 赞同：0
> 
> 时间：2012-05-24T07:39:04.073
> 
> 标签：mysql, ruby-on-rails, ruby

在我的**pages_controller.rb 中**：

```
def home
   @date = Lesson.find(params[:created_at])
end 
```

在这一点上，我只是想在我操作任何东西之前拉日期来尝试和可视化，但是当我尝试调用该`@date`实例变量时`home.html.erb`

我得到的错误是，`Couldn't find Lesson without an ID`但我不知道为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:45:55.283

有几个助手包括简单的查询并返回一个数组，其中包含由 created_at 日期时间排序的课程记录。

在您的索引操作中，您可能希望使用：

```
@date = Lesson.find(:all, :order => 'created_at DESC') 
```

当您在索引模板中时，您可能希望使用每个 sytnax 列出它们，因此将它们路由到它们的显示页面，您可以访问它们的属性。

模型范围也是“最干净”的解决方案

只记得拿着瘦控制器和胖模型

格雷茨

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:56:21.253

此类问题的最佳解决方案 - 使用范围

在您的课程模型中添加：

```
scope :by_date, order("created_at DESC") 
```

还有**default_scope**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:58:03.707

`find`只接受一个id。你试图给它一个日期时间。也许这就是你想要的？

```
@date = Lesson.find( params[:id] ).
               select( :created_at ).
               created_at 
```

# c# - 如何在第二台显示器上打开form2？

> ID：10733165
> 
> 赞同：3
> 
> 时间：2012-05-24T07:39:07.053
> 
> 标签：c#

我从 Form1 创建 Form2。我希望 Form2 在第二台显示器上打开。我怎么能做到这一点？我使用这段代码：

```
private void button1_Click(object sender, EventArgs e)
{
    Form2 dlg = new Form2();
    dlg.Show();
} 
```

如何为此更改此代码？谢谢大家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T07:44:47.647

使用此代码

```
Form2 dlg = new Form2();
Screen[] screens = Screen.AllScreens;
Rectangle bounds = screen[1].Bounds;
dlg.SetBounds(bounds.X, bounds.Y, bounds.Width, bounds.Height);
dlg.StartPosition = FormStartPosition.Manual;
dlg.Show(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T07:46:32.380

尝试这样的事情

```
Screen[] sc; 
sc = Screen.AllScreens; 
//get all the screen width and heights 
Form2 f = new Form2(); 
f.FormBorderStyle = FormBorderStyle.None; 
f.Left = sc[neededmonitor].Bounds.Width; 
f.Top = sc[neededmonitor].Bounds.Height; 
f.StartPosition = FormStartPosition.Manual; 
f.Show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-01T07:52:21.137

您可以像这样检测辅助监视器（使用 System.Linq）：

```
var screen = Screen.AllScreens.FirstOrDefault(s => !s.Primary && s.DeviceName.Contains("DISPLAY2")); 
```

# java - Vaadin 应用程序：处理应用程序关闭事件

> ID：10733166
> 
> 赞同：0
> 
> 时间：2012-05-24T07:39:08.067
> 
> 标签：java, portlet, vaadin

我有一个包含不同可用 portlet 的门户。我的`Activity`Portlet有一些背景线程，当Portlet被卸载时必须停止（例如，选择另一个Portlet时）。Activity portlet 属于 class `GenericPortletApplication`，它实现了以下接口：

```
import com.vaadin.Application;
import com.vaadin.terminal.gwt.server.PortletApplicationContext2;

public abstract class GenericPortletApplication extends Application implements PortletApplicationContext2.PortletListener {
...
} 
```

我想知道我可以重载哪种方法以确保我能正确处理应用程序的关闭。我已经尝试过`destroy`，但这没有实现。

[接口在此处](https://vaadin.com/api/com/vaadin/Application.html)和[此处](https://vaadin.com/api/com/vaadin/terminal/gwt/server/PortletApplicationContext2.html)定义，但我找不到卸载应用程序时将调用的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-13T14:34:00.583

我已经设法实现了我认为您正在尝试做的事情。这是我使用的代码：

```
JavaScript.getCurrent().addFunction("closeMyApplication", new JavaScriptFunction() {
                     @Override
                     public void call(JSONArray arguments)
                             throws JSONException {
                         // call close method
                         close();                        
                     }

              });

        Page.getCurrent().getJavaScript().execute("window.onbeforeunload = function (e) { var e = e || window.event; closeMyApplication(); return; };"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-02T14:08:17.680

请注意，Google Chrome 和 Opera 会触发 onbeforeunload，但不会在按下 mailto 链接时触发 onunload。因此，我们在之前进行浏览器检查：

```
 final com.vaadin.server.WebBrowser webBrowser = Page.getCurrent().getWebBrowser();
if (webBrowser.isChrome() || webBrowser.isOpera()) {
    javascript.execute("window.onunload = function (e) { var e = e || window.event; closeMyApplication(); return; };");
} else {
    javascript.execute("window.onbeforeunload = function (e) { var e = e || window.event; closeMyApplication(); return; };");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T09:26:50.060

在 Vaadin 中，Application.close() 是在应用程序会话关闭时调用的方法。请记住，它绑定到会话，而不是整个应用程序。

# php - 如何保护 PHP 中的数据库密码配置文件？

> ID：10733175
> 
> 赞同：2
> 
> 时间：2012-05-24T07:39:43.713
> 
> 标签：php, security, permissions

如何保护 PHP 中包含数据库密码的配置文件？另外我需要详细信息如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:41:46.583

将配置文件（包含的`.php`模块）放在网络服务器无法读取的目录中。例如：

配置.php：

```
<?php
   $db_host = "localhost";
   $db_user = "username";
   $db_password = "the literal password";
   $db_database = "default_db";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:30:46.210

这取决于您想从谁那里确保它的安全？1）来自一些黑客？2) 来自您的客户，谁可以访问您的源代码？或 3) 你的员工？

在任何情况下，您都可以使用代码混淆来加密您的代码。（[http://en.wikipedia.org/wiki/Obfuscation_%28software%29](http://en.wikipedia.org/wiki/Obfuscation_%28software%29)）

其中一些可以使用的是：ioncube（商业）zend guard（商业） [http://www.intricks.com/projects/PhpCodeBuster/](http://www.intricks.com/projects/PhpCodeBuster/)（免费）如果需要，您可以搜索更多内容。

有用的帖子： [PHP 有代码混淆器吗？](https://stackoverflow.com/questions/232736/code-obfuscator-for-php)

我正在使用 ioncube 并且在所有平台上都适用于我（windoes+linux）

# sql-server-2008 - SSRS如何添加评论

> ID：10733178
> 
> 赞同：1
> 
> 时间：2012-05-24T07:40:03.713
> 
> 标签：sql-server-2008, reporting-services

我想知道如何在查看报告后对 SSRS 报告添加评论，请不要我在本机模式下使用 SSRS，而不是在 Sharepoint 集成模式下，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T22:01:35.670

SSRS 允许在已部署的报告上使用描述字段，这可能会对您有所帮助。但除此之外，SSRS 不直接支持您所描述的内容。

SSRS 不直接支持除用户参数之外的文本用户输入方法。因此，找到一种输入评论的方法可能是围绕 SSRS 构建自己的解决方案的最大挑战。但是您可以运行任意 SQL 来存储该评论，然后它可以显示在未来的报告中。

# html - 内联 img 标签背景隐藏其他所有内容

> ID：10733180
> 
> 赞同：0
> 
> 时间：2012-05-24T07:40:08.503
> 
> 标签：html, css, background

我已经按照在线 tut 使用内联图像标签获得全尺寸背景。除了所有其他元素都隐藏在它后面之外，它运行良好。我确定这是基本的，但我无法理解它。

```
<style>
body {

}

#bg {
min-height: 800px;
min-width: 1024px;

/* Set up proportionate scaling */
width: 100%;
height: 100%;

/* Set up positioning */
position: fixed;
top: 0;
left: 0;
}

</style>

</head>

<body>

<nav>
</nav>

<div>
<p>A line</p>
<p>A line</p>
<p>A line</p>
</div>

<img id="bg" src="images/flowers.jpg" alt="flowers" />

</body>
</html> 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:46:37.367

设置`z-index to -1`，

```
#bg {
min-height: 800px;
min-width: 1024px;

/* Set up proportionate scaling */
width: 100%;
height: 100%;

/* Set up positioning */
position: fixed;
top: 0;
left: 0;
z-index: -1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T07:46:53.337

我相信您正在寻找的是`z-index`css 属性。

尝试

```
#bg {
    z-index: -1000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:47:33.023

我不太清楚你所说的“内联”背景是什么意思，但我确定你知道当你把背景作为一个单独的 div 而不是把它放在你的 CSS* 的“body”部分时你在做什么。尝试将此添加到您的#bg 部分：

```
z-index: -100; 
```

关于[z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp)。

*在我看来，这对你有用：

```
body {
background: url('background.jpg') no-repeat fixed center; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T07:47:40.320

为此，您将需要使用**z-index**。

给你的#bg div 一个 -1 的 z-index 来纠正这个问题:)

```
#bg {
min-height: 800px;
min-width: 1024px;

/* Set up proportionate scaling */
width: 100%;
height: 100%;

/* Set up positioning */
position: fixed;
top: 0;
left: 0;
z-index: -1;
} 
```

这是一个 jsfiddle 示例 - [http://jsfiddle.net/KN8na/](http://jsfiddle.net/KN8na/)

进一步阅读：

[http://reference.sitepoint.com/css/z-index](http://reference.sitepoint.com/css/z-index)

[http://coding.smashingmagazine.com/2009/09/15/the-z-index-css-property-a-comprehensive-look/](http://coding.smashingmagazine.com/2009/09/15/the-z-index-css-property-a-comprehensive-look/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T08:02:07.260

您可以将图像向上移动...然后您不需要任何额外的CSS。

```
<img id="bg" src="images/flowers.jpg" alt="flowers" />

<div>
<p>A line</p>
<p>A line</p>
<p>A line</p>
</div> 
```

但是任何其他解决方案，例如将`z-index`图像设置为负值，或将图像设置为主体元素的背景也可以。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T07:48:19.170

```
body {

}

#bg {
z-index: -1000;
background: #ff0;
min-height: 800px;
min-width: 1024px;

/* Set up proportionate scaling */
width: 100%;
height: 100%;

/* Set up positioning */
position: fixed;
top: 0;
left: 0;
} 
```

[在 jsfiddle 上](http://jsfiddle.net/kjZHk/1/)查看解决方案演示。

# javascript - Javascript 变量限制为 4096 个字符。如何显示 XML 节点的内容以使其不被截断？

> ID：10733184
> 
> 赞同：2
> 
> 时间：2012-05-24T07:40:12.920
> 
> 标签：javascript, xml, innerhtml, nodevalue

我在 Javascript 中显示 XML 记录的内容时遇到问题。总体而言，获取具有我想要查看 div 元素中的内容的值的节点

```
var data = xDoc.getElementsByTagName("baza")[0]; // node tree  
for (i = 0; i < data.childNodes.length; i++)  // use only 1st level element nodes
  if (data.childNodes[i].nodeType == 1) {
    oneXMLRecord = data.childNodes[i]; // one final match record 
```

...

```
var div3 = document.createElement('div');
var str = oneXMLRecord.childNodes[0].nodeValue; //putting content into variable
div3.innerHTML = str;

td.appendChild(div3); 
```

问题是当元素超过 4096 个字符时，输出的内容会被截断为前 4096 个字符。

我谷歌了一下，但我发现据说有助于 textContent 方法，它可能是错误的，但对我来说没有帮助。

有谁知道如何处理这个问题？如何省略限制？

# ruby-on-rails - nested_form 重新排序

> ID：10733193
> 
> 赞同：2
> 
> 时间：2012-05-24T07:40:50.500
> 
> 标签：ruby-on-rails, nested-forms, ruby-on-rails-3.2

我有一个带有动态字段（has_many 关联模型）的表单，可以在nested_form gem 的帮助下添加/删除它（谢谢你，Ryan Bates！）。

现在，我想让用户重新排序这些字段。

假设嵌套模型具有“order_nr”整数字段，可用于对它们进行排序。所以，基本上，交换这些相邻元素的数量会改变它们的顺序。

我可以编写一些 javascript 来用这些数字交换表单元素及其隐藏字段，用某种 ajax 请求填充新创建的元素的订单号，但我有一种强烈的感觉，应该已经有一些通用的解决方案来完成这项任务.

所以，问题是：解决这个任务有什么好的/常见的/准备好的/合理的方法？

# c++ - C ++中的二维对象数组

> ID：10733197
> 
> 赞同：1
> 
> 时间：2012-05-24T07:41:30.343
> 
> 标签：c++, arrays, object, pointers

我正在将科学代码从 Java 迁移到 C++。请告诉我：

a) 这两个函数有什么问题？
b) 我该如何解决这个问题？我可以使用`int**`类似二维数组，但不能使用`Agent**`.

我收到此错误：*“没有运算符 = 匹配此操作数”*。

在普通的 C 语言中，我们可以将 NULL 分配给指针。我们也可以使用`type**`类似二维数组（即`a[i][j]`）（二维空间用于`objectSpace`和`agentSpace`分配到其他地方）。

```
 int** objectSpace;
    Agent** agentSpace;

    void Space::removeAgentAt(Point p)
    {
        agentSpace[p.x][p.y] = NULL;
    }

    void Space::putAgentTo(Agent agent, Point p)
    {
        agentSpace[p.x][p.y] = agent;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:43:37.910

`agentSpace`是指针，`agentSpace[p.x]`是指针，但`agentSpace[p.x][p.y]`不是指针。

C++ 与 Java 不同；对象（通常）由值引用，而不是通过引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:46:04.693

在 C++ 中，`NULL`只是`0`. 除非您已编码从整数到`Agent`对象的转换，否则您不能分配`NULL`给`Agent`.

一种解决方案是制作一个虚拟`Agent`对象，喜欢`Agent AgentNone;`并使用它而不是`NULL`. 如果要检查`Agent`对象是否等于 ，则可能必须实现比较运算符`AgentNone`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T08:03:47.900

像这样看它，因为`Agent** agentSpace`，第一个`*`让您可以访问数组的第一个维度，第二个`*`让您可以访问第二个维度。

`Agent**`是指向指针的指针 - 或者在您的情况下是指针数组。当您尝试这样做时`agentSpace[p.x][p.y] = NULL`，您试图将`NULL`编译器认为是类型的完整对象分配给`Agent`您需要另一个级别的间接：

```
Agent*** agentSpace = 
    {
         { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 },
         { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 },
         { 0, 0, 0 }, { 0, 0, 0 }, { 0, 0, 0 }
    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T07:44:49.887

你猜你需要为你的 Agent 类定义一个赋值运算符吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T07:49:58.763

为了使代码更容易与原始代码匹配，请提供数组维度：

```
int   objectSpace[100][200];   // but use the actual dimensions
Agent agentSpace[250][300];    // todo:  fix dimensions 
```

更好的是使用定义的常量：

```
int   objectSpace[OS_X_MAX][OS_Y_MAX];
Agent agentSpace[AS_X_MAX][AS_Y_MAX]; 
```

如果这是在所有模块都看到的头文件中，那么您拥有的代码将正常工作。如果有任何地方将这些数组之一作为参数传递，那么函数原型和实现可能必须重写。

# mongodb - Mongodb 没有在 ubuntu 中启动

> ID：10733201
> 
> 赞同：6
> 
> 时间：2012-05-24T07:41:45.663
> 
> 标签：mongodb

安装后我遇到了一个奇怪的 mongodb 问题，它以一条消息结尾

```
invoke-rc.d: unknown initscript, /etc/init.d/mongodb not found.
dpkg: error processing mongodb-10gen (--configure): 
```

这里有什么问题我按照这里给出的步骤操作：[http ://www.mongodb.org/display/DOCS/Ubuntu+and+Debian+packages](http://www.mongodb.org/display/DOCS/Ubuntu+and+Debian+packages)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-15T21:11:40.337

问题是您正在尝试安装为 Upstart 初始化服务打包的版本，但 Debian Squeeze 默认仍使用 SysV init。

安装文档中有关于此的注释：http: [//docs.mongodb.org/manual/tutorial/install-mongodb-on-debian-or-ubuntu-linux/#installing-mongodb](http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian-or-ubuntu-linux/#installing-mongodb)

如果您使用的是使用 SysV 风格的 init 进程的 Debian 或 Ubuntu，请使用以下行：

```
deb http://downloads-distro.mongodb.org/repo/debian-sysvinit dist 10gen 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T07:48:58.583

这意味着您需要在 /etc/init.d/ 中创建 mongodb 启动脚本

试试这个[脚本](http://ewanleith.com/downloads/mongodb.txt)

```
#!/bin/bash
#
# mongodb     Startup script for the mongodb server
#
# chkconfig: - 64 36
# description: MongoDB Database Server
#
# processname: mongodb
#

# Source function library
. /lib/lsb/init-functions 

if [ -f /etc/sysconfig/mongodb ]; then
    . /etc/sysconfig/mongodb
fi

prog="mongod"
mongod="/usr/local/mongodb/bin/mongod"
RETVAL=0

start() {
    echo -n $"Starting $prog: "
    daemon $mongod "--fork --logpath /var/log/mongodb.log --logappend 2>&1 >>/var/log/mongodb.log"
    RETVAL=$?
    echo
    [ $RETVAL -eq 0 ] && touch /var/lock/subsys/$prog
    return $RETVAL
}

stop() {
    echo -n $"Stopping $prog: "
    killproc $prog
    RETVAL=$?
    echo
    [ $RETVAL -eq 0 ] && rm -f /var/lock/subsys/$prog
    return $RETVAL
}

reload() {
    echo -n $"Reloading $prog: "
    killproc $prog -HUP
    RETVAL=$?
    echo
    return $RETVAL
}

case "$1" in
    start)
        start
        ;;
    stop)
        stop
        ;;
    restart)
        stop
        start
        ;;
    condrestart)
        if [ -f /var/lock/subsys/$prog ]; then
            stop
            start
        fi
        ;;
    reload)
        reload
        ;;
    status)
        status $mongod
        RETVAL=$?
        ;;
    *)
        echo $"Usage: $0 {start|stop|restart|condrestart|reload|status}"
        RETVAL=1
esac

exit $RETVAL 
```

在终端输入后：

```
sudo chmod +x /etc/init.d/mongodb
sudo /etc/init.d/mongodb start
ps -A | grep mongod 
```

# javascript - 悬停时如何显示id div

> ID：10733204
> 
> 赞同：0
> 
> 时间：2012-05-24T07:41:58.830
> 
> 标签：javascript, jquery

我有几个 div，当我将鼠标悬停在其中一个上时，我想在 div 上显示 id

```
<div id="display_id_div" >hover me</div> 
```

谢谢。我的 html

```
<div id="display_id_div" >hover me</div>
<div id="div1" >hover me</div>
<div id="div2" >hover me</div>
<div id="div3" >hover me</div> 
```

. jQuery代码：

```
$(div).hover(function(){
    $("#display_id_div") =  $(this.id);
})​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:47:40.253

你混淆了函数和赋值，你不能给函数调用赋值。

您的代码中有几个错误：

`$(div).hover(function(){`

是什么`div`？变量还是？如果您的意思是在您的 html 中选择`div`s，您需要执行以下操作：

`$('div[id^=div]')`

该`[id^=div]`部分是选择`div`以 id 开头的 s`div`

所以现在你的代码看起来像

```
$('div[id^=div]').hover(function() {
   $("#display_id_div") =  $(this.id);
}); 
```

你需要修改`innerHTML`of `#display_id_div`，所以你使用

```
$('#display_id_div').html(this.id); 
```

如果您注意到，有两种使用方法`.html()`，作为 setter 和 getter。在给定参数的情况下，它在这里充当设置器。如果在没有参数的情况下调用，它是一个 getter

最终代码：

```
$('div[id^=div]').hover(function() {
    $('#display_id_div').html(this.id);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:43:47.097

**演示** [http://jsfiddle.net/jJRJT/4/](http://jsfiddle.net/jJRJT/4/)​​ 或[http://jsfiddle.net/jJRJT/5/](http://jsfiddle.net/jJRJT/5/)

**代码**

```
$("div").hover(function(){
      alert(this.id);
})​; 
```

**或者**

把它放在html中

`$("#display_id_div").html(this.id);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T07:45:24.697

```
$('div').hover(function(){ // attach hover callback to all divs.
    $('#display_id_div').html(this.id); // change display_id_div innerHTML value
                                        // to the hovered id.
})​; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T07:43:47.317

只需编写您需要使用`.html()`函数jquery的这行代码

```
$("#display_id_div").html( $(this).attr('id')); 
```

你最终的代码将是

```
 $("div").hover(function()
  { 
    $("#display_id_div").html(  $(this).attr('id'));
  });​ 
```

# cuda - 当一个 warp 的所有线程读取相同的全局内存时会发生什么？

> ID：10733205
> 
> 赞同：4
> 
> 时间：2012-05-24T07:42:01.827
> 
> 标签：cuda, gpgpu, gpu

我想知道当所有线程都读取全局内存的相同 32 位地址时会发生什么。有多少内存请求？有没有序列化。GPU为费米卡，编程环境为CUDA 4.0。

此外，任何人都可以解释公共汽车利用的概念吗？缓存加载和非缓存加载有什么区别？[我在http://theinf2.informatik.uni-jena.de/theinf2_multimedia/Website_downloads/NVIDIA_Fermi_Perf_Jena_2011.pdf](http://theinf2.informatik.uni-jena.de/theinf2_multimedia/Website_downloads/NVIDIA_Fermi_Perf_Jena_2011.pdf)看到了这个概念。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T05:39:25.367

## 经线中的所有线程访问全局内存中的相同地址

我可以回答你关于 AMD GPU 的问题。对于英伟达来说，谷歌搜索很快就能找到答案。

> 我想知道当所有线程都读取全局内存的相同 32 位地址时会发生什么。有多少内存请求？有没有序列化。GPU为费米卡，编程环境为CUDA 4.0。

[http://developer.download.nvidia.com/CUDA/training/NVIDIA_GPU_Computing_Webinars_Best_Practises_For_OpenCL_Programming.pdf](http://developer.download.nvidia.com/CUDA/training/NVIDIA_GPU_Computing_Webinars_Best_Practises_For_OpenCL_Programming.pdf)，日期为 2009 年，说：

> 合并：
> 
> 全局内存延迟：400-600 个周期。最重要的性能考虑！
> 
> 对于大小为 8 位、16 位、32 位、64 位的字，半扭曲线程的全局内存访问可以合并到一个事务，或者对于 128 位，可以合并到两个事务。
> 
> 全局内存可以看作是由 16 和 32 个字的对齐段组成。
> 
> 计算能力 1.0 和 1.1 中的合并：
> 
> half warp中的第k个线程必须访问段中的第k个单词；但是，并非所有线程都需要参与
> 
> 计算能力1.2 和 1.3中的合并：
> 
> 合并适合段大小的任何访问模式

因此，在任何 >= Compute Capability 1.2 的情况下，听起来好像让 warp 的所有线程访问相同的 32 位全局内存地址都可以正常工作。但不适用于 1.0 和 1.1。

你的卡没问题。

我必须承认我没有为 Nvidia 测试过这个。我已经针对 AMD 进行了测试。

* * *

## 缓存和非缓存加载之间的区别

首先，请查看您所指的演示文稿的幻灯片 4，[http](http://theinf2.informatik.uni-jena.de/theinf2_multimedia/Website_downloads/NVIDIA_Fermi_Perf_Jena_2011.pdf) ://theinf2.informatik.uni-jena.de/theinf2_multimedia/Website_downloads/NVIDIA_Fermi_Perf_Jena_2011.pdf 。

即标题为“CPU 和 GPU 之间的差异”的幻灯片——它说 CPU 有巨大的缓存，而 GPU 没有。

几年前，这样一张幻灯片可能会说 GPU 根本没有任何缓存。然而，GPU 已经开始添加越来越多的缓存，和/或越来越多地切换到本地缓存。

我不确定您是否了解计算机体系结构中的“缓存”是什么。这是一个很大的话题，所以我只提供一个简短的答案。

基本上，缓存就像本地内存。缓存和本地内存 - 比 DRAM、主内存更接近处理器或 GPU - 无论是 GPU 的私有 DRAM 还是 CPU 的系统内存。DRAM 主存储器被 Nvidia Global Memory 称为。幻灯片 9 说明了这一点。

缓存和本地内存都比 DRAM 全局内存更接近 GPU：在幻灯片 9 上，它们被描绘为与 GPU 位于同一芯片内，而 DRAM 是独立的芯片。这可以对延迟、吞吐量、功率以及，是的，总线利用率（与带宽相关）产生几个很好的影响。

延迟：全局内存在 400-800 个周期之外。这意味着如果您的应用程序中只有一个 warp，那么它每 400-800 个周期只会执行一次内存操作。这意味着，为了不减慢速度，您需要许多线程/warp 产生可以并行运行的内存请求，即具有高 MLP（内存级别并行度）。幸运的是，图形通常会这样做。缓存更接近，因此延迟更低。你的幻灯片没有说它是什么，但其他地方说 50-200 个周期，比全局内存快 4-8 倍。这意味着需要更少的线程和扭曲以避免减速。

吞吐量/带宽：本地内存和/或缓存的带宽通常比 DRAM 全局内存大。您的幻灯片说 1+ TB/s 与 177 GB/s - 即缓存和本地内存快 5 倍以上。这种更高的带宽可以转化为显着更高的帧速率。

电源：您可以节省大量用于缓存或本地内存而不是 DRAM 全局内存的电量。这对于台式游戏 PC 可能无关紧要，但对于笔记本电脑或平板电脑却很重要。实际上，它甚至对台式游戏 PC 也很重要，因为更少的功率意味着它可以更快地（超）频。

好的，那么上面的本地和缓存内存是相似的吗？有什么不同？

基本上，缓存比本地内存更容易编程。非常好，专家，nionja 程序员需要正确管理本地内存，根据需要从全局内存中复制内容，并将其刷新。而缓存内存更容易管理，因为您只需进行缓存加载，并且内存会自动放入缓存中，下次访问速度会更快。

但是缓存也有缺点。

首先，它们实际上比本地内存消耗更多的能量——或者如果实际上有单独的本地和全局内存，它们会消耗更多的能量。然而，在 Fermi 中，本地内存可以配置为缓存，反之亦然。（多年来，GPU 人员一直说“我们不需要糟糕的缓存——缓存标签和其他开销只是浪费。）

更重要的是，缓存倾向于在缓存行上运行——但并非所有程序都这样做。这导致您提到的总线利用率问题。如果 warp 访问缓存行中的所有单词，那就太好了。但是如果一个warp 只访问高速缓存行中的1 个字，即1 个4 字节字然后跳过124 个字节，那么128 个字节的数据通过总线传输，但只使用了4 个字节。即 >96% 的总线带宽被浪费了。这是低总线利用率。

而下一张幻灯片显示，非缓存加载（例如用于将数据加载到本地内存中）将仅传输 32 个字节，因此“仅”32 个字节中的 28 个字节被浪费。换句话说，非缓存加载可能比缓存加载效率高 4 倍，速度快 4 倍。

那么为什么不到处使用非缓存加载呢？因为它们更难编程——它需要专业的忍者程序员。并且缓存在很多时候都工作得很好。

因此，与其花钱请专业忍者程序员花大量时间优化所有代码以使用非缓存加载和手动管理的本地内存，不如使用缓存加载来做简单的事情，让高薪专家忍者程序员专注于缓存不能很好地工作的东西。

此外：没有人喜欢承认这一点，但缓存通常比专家忍者程序员做得更好。

希望这可以帮助。吞吐量、功率和总线利用率：除了降低

# android - Android：如何配置“tinymix”以使用“tinycap”录制系统音频

> ID：10733214
> 
> 赞同：6
> 
> 时间：2012-05-24T07:42:30.610
> 
> 标签：android, record, capture, alsa, mixer

在 Android 中，目前无法使用 Android-SDK 录制系统音频。

因此，我使用了 TinyALSA（从 Android 4 开始）玩了一下，希望我可以重新路由音频输出以便录制它。

当我在我的设备上调用“tinymix”时，我得到以下配置：

```
ctl     type    num     name                                     value
0       ENUM    1       DL1 Equalizer                            Flat response
1       ENUM    1       DL2 Left Equalizer                       450Hz High-pass
2       ENUM    1       DL2 Right Equalizer                      450Hz High-pass
3       ENUM    1       Sidetone Equalizer                       Flat response
4       ENUM    1       AMIC Equalizer                           High-pass 0dB
5       ENUM    1       DMIC Equalizer                           High-pass 0dB
6       INT     1       DL1 Media Playback Volume                120
7       INT     1       DL1 Tones Playback Volume                0
8       INT     1       DL1 Voice Playback Volume                120
9       INT     1       DL1 Capture Playback Volume              0
10      INT     1       DL2 Media Playback Volume                120
11      INT     1       DL2 Tones Playback Volume                0
12      INT     1       DL2 Voice Playback Volume                120
13      INT     1       DL2 Capture Playback Volume              0
14      INT     1       VXREC Media Volume                       0
15      INT     1       VXREC Tones Volume                       0
16      INT     1       VXREC Voice DL Volume                    0
17      INT     1       VXREC Voice UL Volume                    0
18      INT     1       AUDUL Media Volume                       0
19      INT     1       AUDUL Tones Volume                       0
20      INT     1       AUDUL Voice UL Volume                    120
21      INT     1       AUDUL Voice DL Volume                    0
22      INT     1       SDT UL Volume                            103
23      INT     1       SDT DL Volume                            120
24      INT     2       DMIC1 UL Volume                          120 120
25      INT     2       DMIC2 UL Volume                          120 120
26      INT     2       DMIC3 UL Volume                          120 120
27      INT     2       AMIC UL Volume                           120 120
28      INT     2       BT UL Volume                             120 120
29      BOOL    1       DL1 Mono Mixer                           Off
30      BOOL    1       DL2 Mono Mixer                           On
31      BOOL    1       AUDUL Mono Mixer                         Off
32      BOOL    1       DL1 MM_EXT Switch                        Off
33      BOOL    1       DL1 BT_VX Switch                         Off
34      BOOL    1       DL1 PDM Switch                           Off
35      BOOL    1       Sidetone Mixer Capture                   Off
36      BOOL    1       Sidetone Mixer Playback                  On
37      BOOL    1       Capture Mixer Tones                      Off
38      BOOL    1       Capture Mixer Voice Playback             Off
39      BOOL    1       Capture Mixer Voice Capture              Off
40      BOOL    1       Capture Mixer Media Playback             Off
41      BOOL    1       Voice Capture Mixer Tones Playback       Off
42      BOOL    1       Voice Capture Mixer Media Playback       Off
43      BOOL    1       Voice Capture Mixer Capture              Off
44      BOOL    1       DL2 Mixer Tones                          Off
45      BOOL    1       DL2 Mixer Voice                          Off
46      BOOL    1       DL2 Mixer Capture                        Off
47      BOOL    1       DL2 Mixer Multimedia                     On
48      BOOL    1       DL1 Mixer Tones                          Off
49      BOOL    1       DL1 Mixer Voice                          Off
50      BOOL    1       DL1 Mixer Capture                        Off
51      BOOL    1       DL1 Mixer Multimedia                     Off
52      ENUM    1       MUX_VX1                                  None
53      ENUM    1       MUX_VX0                                  None
54      ENUM    1       MUX_UL11                                 None
55      ENUM    1       MUX_UL10                                 None
56      ENUM    1       MUX_UL07                                 None
57      ENUM    1       MUX_UL06                                 None
58      ENUM    1       MUX_UL05                                 None
59      ENUM    1       MUX_UL04                                 None
60      ENUM    1       MUX_UL03                                 None
61      ENUM    1       MUX_UL02                                 None
62      ENUM    1       MUX_UL01                                 None
63      ENUM    1       MUX_UL00                                 None
64      INT     2       Capture Preamplifier Volume              1 1
65      INT     2       Capture Volume                           4 4
66      INT     2       Aux FM Volume                            3 3
67      INT     2       Headset Playback Volume                  9 9
68      INT     2       Handsfree Playback Volume                27 27
69      INT     1       Earphone Playback Volume                 11
70      ENUM    1       Headset Power Mode                       High-Performance
71      BOOL    1       Earphone Enable Switch                   Off
72      ENUM    1       HS Right Playback                        Off
73      ENUM    1       HS Left Playback                         Off
74      ENUM    1       HF Right Playback                        Off
75      ENUM    1       HF Left Playback                         Off
76      ENUM    1       Analog Right Capture Route               Off
77      ENUM    1       Analog Left Capture Route                Off
78      ENUM    1       TWL6040 Power Mode                       Low-Power 
```

有人知道我必须设置哪些参数才能使用“tinycap”捕获播放（例如“多媒体”）吗？

遗憾的是没有可用的文档。

亲切的问候，马丁 M。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T11:41:02.620

能否捕获播放数据取决于您拥有的硬件。

您的设备似乎具有 TWL6040 编解码器。
看看这个芯片的文档，看看它的混音器路由是如何工作的；我猜你必须启用一些“Capture Mixer”，可能设置一些“MUX_UL”，并且可能设置“Analog Capture Route”。

# javascript - Google Maps API V3，信息窗口未打开

> ID：10733215
> 
> 赞同：0
> 
> 时间：2012-05-24T07:42:34.480
> 
> 标签：javascript, google-maps

好的，所以我的地图代码工作正常，这是一个定位器类型的地图，所以用户可以从另一个页面进入他们的郊区，他们将登陆地图页面。需要发生的是最接近他们位置的地图标记被突出显示（不同的图标），并且它的信息窗口应该弹出。现在，在信息窗口之前一切都很好，我只是无法打开它。这是相关代码

```
 if(nearest)
    {
        geocoder.geocode( {'address': nearest}, function(results, status)
        {
            if (status == google.maps.GeocoderStatus.OK)
            {

                var closest = get_closest_marker(results[0]);

                map.setCenter(closest.getPosition());

                closest.setIcon('https://chart.googleapis.com/chart?chst=d_map_pin_letter_withshadow&chld=A|57b664|FFFFFF');

                console.log(closest);

                infowindow.open(map,closest);
            }
            else
            {
                alert("Geocode was not successful for the following reason: " + status);
            }
        });

    } 
```

好的，所以最近的日志很好，它是一个标记，它是最接近用户输入的地址的标记。但是，信息窗口不会打开。它在点击时打开很好（在上面写了那个函数），但我似乎无法以这种方式打开它。有什么建议吗？

# asp.net - Linq to Entity Attach 方法问题

> ID：10733218
> 
> 赞同：1
> 
> 时间：2012-05-24T07:42:52.950
> 
> 标签：asp.net, linq, linq-to-entities

我使用 Attach 方法来更新我的数据库

```
 name=New Name;
     checkBox1=false;
     Entity entity= new Entity();
        entity.ID= collection.ID;
        db.entities.Attach(entity);
        entity.name=name;
        entity.checkBox1=checkBox1;
        db.SaveChanges(); 
```

此查询仅更新了所需表的名称列，但使用 checkBox1 值它什么也没做......
为什么我做错了什么或者这是一个错误？
使用以下查询语法解决了问题。

```
 var entity= db.entities.Find(ID);
    entity.name=name;
    entity.checkBox1=checkBox1;
    db.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:01:58.650

如果您已关闭 AutoDetectChanges，则可能会出现此问题，这是我写的关于 AutoDetectChanges 功能的帖子：http: [//blog.staticvoid.co.nz/2012/05/entityframework-performance-and.html](http://blog.staticvoid.co.nz/2012/05/entityframework-performance-and.html)

如果您关闭此选项并附加实体，则快照引擎可能无法找到属性更改。在保存之前尝试手动调用检测更改。您可以使用以下内容：

```
db.ChangeTracker.DetectChanges(); 
```

另一个可能的问题是快照引擎认为 checkbox1 属性的初始状态为 false，这意味着当您将值设置为 false 时它不会注册更改。要解决此问题，请将 checkbox1 的初始值设置为 true，然后在附加后将其设置为 false。这将确保值发生变化，因此可以通过快照检测到。

例如使用：

```
name=new Name();
 checkBox1=false;
 Entity entity= new Entity();
    entity.ID= collection.ID;
    entity.checkBox1=!checkBox1;
    db.entities.Attach(entity);
    entity.name=name;
    entity.checkBox1=checkBox1;
    db.SaveChanges(); 
```

# objective-c - 本机 OSX Lion 为自定义 NSWindow 或 NSView 调整光标大小

> ID：10733228
> 
> 赞同：8
> 
> 时间：2012-05-24T07:43:50.247
> 
> 标签：objective-c, macos, cocoa, osx-lion, nscursor

如果我们`NSTrackingArea`用于某些指定区域，那么我们可以实现这样的方法来更改默认光标：

```
-(void)cursorUpdate:(NSEvent *)theEvent {
    [[NSCursor resizeLeftCursor] set];
} 
```

我为 实现自定义调整大小`NSWindow`，它使用`NSBorderlessWindowMask`. 并且想使用原生 Lion 的两个箭头游标。[但是NSCursor API](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nscursor_Class/Reference/Reference.html)中不存在这种类型的游标。

我可以从代码中以某种方式获得这样的本机游标吗？
或者也许我必须手动重新绘制它们（不是一个好主意）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T09:06:47.847

不幸的是，WebKit 中存在的那些在视网膜分辨率中不可用，查看

```
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/Resources/cursors 
```

你会发现调整光标大小的 pdf 版本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-14T18:27:27.993

下面是一些示例代码，用于从 HIServices.framework 加载基于矢量（因此支持视网膜）的游标：

```
NSString *cursorName = @"resizenortheastsouthwest";
NSString *cursorPath = [@"/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/Resources/cursors" stringByAppendingPathComponent:cursorName];
NSImage *image = [[NSImage alloc] initByReferencingFile:[cursorPath stringByAppendingPathComponent:@"cursor.pdf"]];
NSDictionary *info = [NSDictionary dictionaryWithContentsOfFile:[cursorPath stringByAppendingPathComponent:@"info.plist"]];
NSCursor *cursor = [[NSCursor alloc] initWithImage:image hotSpot:NSMakePoint([[info valueForKey:@"hotx"] doubleValue], [[info valueForKey:@"hoty"] doubleValue])]; 
```

注意我不知道这是否适用于沙盒应用程序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-08T19:51:55.500

有创建此类游标的未记录方法。这是一个例子：

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wundeclared-selector"
    if ([NSCursor respondsToSelector:@selector(_windowResizeNorthSouthCursor)])
    {
        self.resizeUpDownCursor = [NSCursor performSelector:@selector(_windowResizeNorthSouthCursor)];
    }
    else
    {
        self.resizeUpDownCursor = [NSCursor resizeUpDownCursor];
    }
#pragma clang diagnostic pop 
```

以下是 macOS Sierra 中未记录光标的完整列表：

```
[NSCursor _windowResizeEastCursor]
[NSCursor _windowResizeWestCursor]
[NSCursor _windowResizeEastWestCursor]
[NSCursor _windowResizeNorthCursor]
[NSCursor _windowResizeSouthCursor]
[NSCursor _windowResizeNorthSouthCursor]
[NSCursor _windowResizeNorthEastCursor]
[NSCursor _windowResizeNorthWestCursor]
[NSCursor _windowResizeSouthEastCursor]
[NSCursor _windowResizeSouthWestCursor]
[NSCursor _windowResizeNorthEastSouthWestCursor]
[NSCursor _windowResizeNorthWestSouthEastCursor]
[NSCursor _zoomInCursor]
[NSCursor _zoomOutCursor]
[NSCursor _helpCursor]
[NSCursor _copyDragCursor]
[NSCursor _genericDragCursor]
[NSCursor _handCursor]
[NSCursor _closedHandCursor]
[NSCursor _moveCursor]
[NSCursor _waitCursor]
[NSCursor _crosshairCursor]
[NSCursor _horizontalResizeCursor]
[NSCursor _verticalResizeCursor]
[NSCursor _bottomLeftResizeCursor]
[NSCursor _topLeftResizeCursor]
[NSCursor _bottomRightResizeCursor]
[NSCursor _topRightResizeCursor]
[NSCursor _resizeLeftCursor]
[NSCursor _resizeRightCursor]
[NSCursor _resizeLeftRightCursor] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T07:53:34.203

WebKit 包含看起来与系统使用的光标完全相同的图像，位于以下目录中：

```
/System/Library/Frameworks/WebKit.framework/Versions/Current/Frameworks/WebCore.framework/Resources/ 
```

...例如，文件“northWestSouthEastResizeCursor.png”。

# icalendar - 空日历上的 iCal4j 验证异常

> ID：10733229
> 
> 赞同：0
> 
> 时间：2012-05-24T07:43:49.923
> 
> 标签：icalendar, ical4j

我正在使用 iCal4j 库来生成 iCalendar 提要。

如果没有事件被添加到日历中（仅仅是因为碰巧没有任何即将发生的事件要添加），当将 iCalendar 数据写入输出流时，iCal4j 会引发验证异常：

```
net.fortuna.ical4j.model.ValidationException: Calendar must contain at least one component
    at net.fortuna.ical4j.model.Calendar.validate(Calendar.java:287)
    at net.fortuna.ical4j.model.Calendar.validate(Calendar.java:257)
    at net.fortuna.ical4j.data.CalendarOutputter.output(CalendarOutputter.java:96)
    at net.fortuna.ical4j.data.CalendarOutputter.output(CalendarOutputter.java:83) 
```

那么根据 iCalendar 标准，没有事件的日历实际上是无效的，还是这只是 iCal4j 的验证过于严格？（如果后者适用，有没有办法放松验证？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:06:06.883

从技术上讲，iCalendar 至少需要一个组件，如第 3.6 节所述：

[https://www.rfc-editor.org/rfc/rfc5545#section-3.6](https://www.rfc-editor.org/rfc/rfc5545#section-3.6)

```
 icalbody   = calprops component

   [snip..]

   component  = 1*(eventc / todoc / journalc / freebusyc /
                timezonec / iana-comp / x-comp) 
```

您可以使用非验证 CalendarOutputter 来避免此异常，但目前无法在 iCal4j 中选择性地禁用空日历验证。

# c# - 从 C# 中的列表中检索最大元素索引的优雅方法

> ID：10733230
> 
> 赞同：2
> 
> 时间：2012-05-24T07:43:50.590
> 
> 标签：c#, collections

我正在发现`C#`用于处理集合的工具。

假设我有一个**元素列表**，并且我想检索最满足某个属性的元素。基本上是一个`elements.Max(predicate)`，除了我对**最佳元素的索引**感兴趣。我想要索引而不是元素本身的原因是可能没有这样的元素，并且类型不可为空。

编写一个这样做的函数是微不足道的，但我有兴趣使用 C# 提供的工具的表现力来获得一个*简洁*、*清晰*和*最优*( *O(n)* ) 的解决方案。

在这一点上，我有以下代码，它看起来仍然很混乱，并且对属性进行了两次评估。

```
List<foo> elements;
private int getBest(object x)
{
  var indices = Enumerable.Range(0, elements.Count);
  return indices.Aggregate(-1, (best, next) =>
    (-1 == best || eval(x, elements[next]) > eval(x, elements[best])) ? next : best);
} 
```

我怎样才能使这段代码更好？

* * *

**附录：**为了清楚起见，我没有把它放在代码中，但是如果`eval()`低于某个阈值，则丢弃该元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:06:50.690

使用 LINQ 很有趣，但不使用 LINQ 会更直观：

```
int bestIndex = -1;
int bestResult = -1;
for(int i = 0; i < elements.Count; ++i)
{
    int currentResult = eval(x, elements[i]);
    if (currentResult > bestResult)
    {
        bestResult = currentResult;
        bestIndex = i;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:09:39.643

我建议将LINQ 扩展方法`Select`与`Aggregate`LINQ 扩展方法结合使用。使用该`Select`方法，您可以创建一个匿名类型，其中包含集合中每个项目的`index`和。`value`然后使用 LINQ`Aggregate`方法，您可以缩小具有最大价值的项目。我认为这样的一些应该有效：

```
private int GetIndexOfHighestValue(IEnumerable<int> list)
{
    return list.Select((i, v) => new { Index = i, Value = v })
        .Aggregate((a, b) => (a.Value > b.Value) ? a : b)
        .Index;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:54:22.540

像~~这样的东西可以工作~~：

```
// OOPS: This won't work because Max is defined the way it is. Always bugged me...
var result = elements.Select((e, i) => new {Element = e, Index = i}).Max(x => x.Element).Select(x => x.Index); 
```

哦老鼠。对。这行不通。所以：让我们拿出我们的全能者：[`Aggregate`](http://msdn.microsoft.com/en-us/library/bb548744). 开始了：

```
var elements = new List<int>{1, 7, 2, 5};
var result = elements.Select((e, i) => new {Element = e, Index = i})
    .Aggregate(
        new { Element = elements.First(), Index = -1}, // gotta start somewhere and Element is non-nullable according to OP
        (max, next) => (max.Element > next.Element) && max.Index >= 0 ? max : next,
        max => max.Index); 
```

这导致`1`. 那有帮助吗？

# php - Zend Autoloader 无法找到现有文件

> ID：10733232
> 
> 赞同：0
> 
> 时间：2012-05-24T07:44:01.933
> 
> 标签：php, zend-framework, zend-autoloader

我的 Zend 网站出现异常的自动加载问题。到目前为止，自动加载一直是一种享受。不过现在，我在项目中添加了一个新文件，但自动加载却找不到它。我已将问题简化为最小的测试用例，并想知道是否有人可以帮助我。

在我的网站中，我有一个通常的目录结构，如下所示：

```
site/
  application/...
  library/
    Zend/...
    PHPUnit/...
    Ext/
      Extras/
        Test.php
      Service/
        Test.php 
```

我已经正确设置了自动加载（根据 StackOverflow 上的其他有用评论）并注册了 Ext_ 命名空间，这可以通过正确实例化 Ext_Extras_Test 来证明。

当我尝试实例化 Ext_Service_Test 时，问题就来了。自动加载“无法打开流”。我检查了正确的拼写，使用`find`,`ls`和文件资源管理器列出了目录内容，以确保文件存在于正确的位置。

我就是无法让它 &^%%£* 找到文件！有没有人有任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:58:13.693

发现它你正在尝试覆盖资源自动加载器，即使它没有指定我很确定这会影响所有命名空间：

> 42.3.2\. 模块资源自动加载器 Zend 框架附带了 Zend_Loader_Autoloader_Resource 的具体实现，其中包含资源类型映射，涵盖了 Zend Framework MVC 应用程序的默认推荐目录结构。这个加载器 Zend_Application_Module_Autoloader 带有以下映射：

```
forms/       => Form
models/      => Model
    DbTable/ => Model_DbTable
    mappers/ => Model_Mapper
plugins/     => Plugin
services/    => Service
views/
    helpers  => View_Helper
    filters  => View_Filter 
```

> 例如，如果您有一个前缀为“Blog_”的模块，并尝试实例化类“Blog_Form_Entry”，它将在资源目录的“forms/”子目录中查找名为“Entry.php”的文件。
> 
> 当使用 Zend_Application 的模块引导时，默认情况下会为每个离散模块创建一个 Zend_Application_Module_Autoloader 实例，允许您自动加载模块资源。

# android - 如何实现可靠的推送消息服务？

> ID：10733233
> 
> 赞同：17
> 
> 时间：2012-05-24T07:44:24.087
> 
> 标签：android, ios, push-notification

由于我想在移动应用程序中建立可靠的通信，我是否可以从第三方推送服务（C2DM、APN、城市飞艇）获得推送失败报告（可能设备离线）？还是我们需要自己建造？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:44:36.470

[Android C2DM](https://developers.google.com/android/c2dm/)的预期目的是作为一种省电方式，让您的服务器应用程序向移动设备发出它想要开始可靠通信的信号。

您可以构造您的消息，以便每个新的 C2DM 包含自与服务器的最后一次双向交互以来发生的所有事情（即，“来拿我所拥有的一切”）。您的交付失败报告隐含在移动设备未及时响应中（您可以这样做，因为您知道 C2DM 使用 Intent 激活您的应用程序）。

这真的比在有损介质中保证每条消息的传递更糟糕吗？好吧，更糟糕的是你还必须实现一种主要的通信方法。但无论如何您都必须这样做，因为 C2DM 仅限入站，对吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T22:32:22.123

正如 Vinay 所说，MQTT 可能会为您提供您想要的功能。当客户端连接到服务器时，它可以向服务器注册“遗嘱”消息。如果客户端意外断开连接，服务器会将此消息发送到它被指示执行的主题。

在此方案中，您的客户端可以将消息“在线”发送到客户端//状态之类的内容，并将消息“离线”注册为同一主题的 LWT。然后，您可以拥有一个服务器本地客户端，它侦听主题 client/+/status，它会知道哪些客户端在线，哪些客户端离线。

我建议tokudu 演示不是最好的查看位置。Dale Lane 的这篇博客文章深入了解了在 Android 上使用 MQTT：[http ://dalelane.co.uk/blog/?p=1599 并且在](http://dalelane.co.uk/blog/?p=1599)[http://stephendnicholas](http://stephendnicholas.com/archives/219)上有一篇关于 MQTT 电源使用情况的评论（同样在 Android 上）[.com/archives/219](http://stephendnicholas.com/archives/219)

有适合 IOS 和 Android 的客户端实现，请参阅[http://mqtt.org/software](http://mqtt.org/software)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T16:49:17.623

没有一项服务不提供有关失败推送的报告。

**失败的推送报告对 APN/C2DM/Helium 毫无意义**

所有服务都旨在在任何情况下传递推送消息。如果设备现在离线，则在设备在线时推送。

此外，对于 iOS，推送消息只是给用户的通知，而不是给应用程序！

一个简单的案例来说明：假设关闭应用时收到推送。在这种情况下，将通知用户。但是，只有当用户点击该通知时，应用程序才会从推送中接收数据！如果用户点击应用程序的图标，则不会收到数据。

所以从技术上讲，推送被传递到 iOS 设备并启动应用程序，但没有传递数据。

**UrbanAirhip 与 APN 和氦气**

您可以考虑实现自己的推送传输。MQTT 似乎是一个不错的选择。但在这种情况下，您必须处理保活、设备休眠和电池优化。苹果、谷歌和 UrbanAirship 的工程师已经完成了所有这些艰苦的工作。

根据您的业务需求，可以更轻松地针对现有解决方案调整您的架构，然后再次重新实现推送服务。

仔细看看 UrbanAirship。事实上，C2DM 有一些限制，有时推送消息的传递时间过长。因为 UA 已经实现了他们自己的传输 - Helium，它工作得很好。Helium 是一项付费服务​​，但 UA 提供了良好的 SLA。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T10:39:57.947

我建议推送通知 IBM MQTT 协议。这对于推送通知来说已经足够好了。[从https://github.com/tokudu/AndroidPushNotificationsDemo](https://github.com/tokudu/AndroidPushNotificationsDemo)查看演示

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T00:59:11.797

我做了类似的事情，我有一个数据库跟踪已知订阅者的推送队列，并在失败时进行报告。这很简单，就像这样......

```
The schema was like so:

pushMessages
  messageID  , GUID, PK
  message , nvarchar (256),
  expires , datetime

messageQueues
  subscriberID , GUID, PK
  messageID , GUID PK

failedPushMessages
  subscriberID, GUID, PK
  messageID , GUID PK

(subscriber table omitted) 
```

一旦客户端成功接收到消息，客户端将 ping 回推送服务器，并通过它在推送通知中收到的唯一 queueItems ID 通知它。还会有一个每日数据库进程来检查过期的推送消息。找到后，它将在与 messageID 匹配的 queueMessages 上进行连接，然后将它们从 messagesQueues 表中删除并将它们复制到 failedPushMessages 表中。

这很容易理解和维护，但我没有其他方式的经验。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-04T03:46:03.760

推送服务是一种有效且可靠的方式来提醒您的用户。它们甚至允许后台应用程序实时通知用户新信息。推送服务广泛应用于移动应用中的各个领域，例如天气更新、消息服务、邮件通知、优惠券服务等。推送服务不再是可选的，而是变得必不可少。

# bison - 安装 Bison 后出现“make:yacc:Command not found”

> ID：10733238
> 
> 赞同：21
> 
> 时间：2012-05-24T07:44:44.087
> 
> 标签：bison, yacc

在 gcc 4.1.2 (linux 5) 中运行 makefile 时，出现以下错误

```
make: yacc: Command not found 
```

通过谷歌搜索，我知道可以通过安装 Bison-GNU 解析器生成器来纠正这个错误。但即使在安装 Bison 之后，我也会遇到同样的错误。

如何解决此错误？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-10-06T17:45:03.740

在终端上运行以下命令来安装 bison、 **yacc**可执行文件和配置。**yacc**与野牛一起出现

您还需要**byacc**来获得功能齐全的**yacc**

```
sudo apt-get install bison -y
sudo apt-get install byacc -y 
```

它对我有用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-24T07:55:10.557

From the looks of things, your makefile is expecting a `yacc` executable to be available and either it's not, or it's not on your path.

Since `bison` is supposed to be compatible with `yacc` so the first thing I would try would be:

```
alias yacc="bison" 
```

and try again. On my setup, `/usr/bin/yacc` is simply a script containing:

```
#! /bin/sh
exec '/usr/bin/bison' -y "$@" 
```

You can try to locate the `yacc` or `bison` executables with the command (substituting bison for yacc if need be):

```
which yacc 
```

But they're probably in one of the standard places like `/bin` or `/usr/bin`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-06T16:18:53.993

我在 RHEL7 上遇到了类似的问题。

查找野牛在哪里：

```
$:which bison

*/bin/bison* 
```

从 yacc 创建到 bison 的符号链接：

```
sudo ln -s /bin/bison /bin/yacc 
```

这应该可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-20T19:36:15.497

我在我的 Ubuntu 16 系统上创建了别名文件，然后在测试时我发现 bison 丢失了，所以我安装了 bison，这给了我一个关于我为 /usr/bin/yacc 创建的链接的错误，所以 bison 安装创建了lnk 文件本身用于 Ubuntu 16 上的 yacc。

# performance - 顶点缓冲对象和 glutsolidsphere

> ID：10733242
> 
> 赞同：2
> 
> 时间：2012-05-24T07:44:50.717
> 
> 标签：performance, opengl, glut, vertex-buffer

我必须在类似“弹簧质量”的系统的 3D 物理模拟中绘制大量球体。

我想知道一种绘制球体的有效方法，而不必在模拟的每一步都编译显示列表（每一步可能从毫秒到秒不等，具体取决于计算中涉及的物体数量）。

我读过顶点缓冲区对象是绘制对象的一种有效方法，这些对象有时也需要更新。

有什么方法可以比 glutSolidSphere 更快地绘制 OpenGL 球体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:23:26.770

> 我想知道一种绘制球体的有效方法，而不必在模拟的每一步都编译显示列表（每一步可能从毫秒到秒不等，具体取决于计算中涉及的物体数量）。

如果您放入的几何图形是动态的，您为什么要生成显示列表。显示列表适用于从不或很少更改的静态几何图形。

> 我读过顶点缓冲区对象是绘制对象的一种有效方法，这些对象有时也需要更新。

实际上，VBO 对静态几何也是最有效的。通常，您希望将实际几何更新的数量保持在尽可能低的水平。在您的情况下，唯一更新的是球体的位置（可能还有大小）。这是实例绘图的主要示例。然而，这也很有效，只更新一个统一或变换矩阵并调用绘制一个球体。

顶点数组和 VBO 的想法是，您只需一次调用即可绘制一整批几何图形。一个球体就是这样一批。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T13:34:43.160

球体是自相似的；每个球体只是任何其他球体的缩放版本。我认为没有必要重新生成任何几何图形。事实上，我认为根本没有必要拥有一个以上的*球体*。

只需提供适当的缩放矩阵即可。我建议为您的显示列表或缓冲区对象网格设置一个以原点为中心的半径为 1 的球体。然后你可以将它转换到不同的位置，使用比例来设置新的半径。

# amazon-ec2 - AWS EC2实例本地ip变更解决方案

> ID：10733244
> 
> 赞同：25
> 
> 时间：2012-05-24T07:44:59.480
> 
> 标签：amazon-ec2, amazon-web-services

亚马逊只给你一定数量的静态 IP 地址，每个 EC2 实例的本地（私有）IP 可以在机器重启时改变。据我所知，这使得创建一个 EC2 实例相互依赖的稳定平台非常难以使用。

我在网上搜索了很多关于各种解决方案的信息，到目前为止，除了在 EC2 上分配弹性 IP 地址之外，没有任何合理的发现，即使它不是面向公众的。有没有人有任何其他实际上很容易执行的好主意？

谢谢！

请参阅 AWS 团队对问题[Static local IP](https://forums.aws.amazon.com/thread.jspa?messageID=207526)的回复：

> EC2 实例的内部 IP 地址是通过 DHCP 分配的。在实例关闭或 DHCP 租约到期时，IP 地址将返回到可用于其他实例的通用 EC2 DHCP 地址池。
> 
> 无法保证您将在重新启动后获得相同的 DHCP 地址。

**编辑：**答案是使用 Amazon VPC。除了微不足道的额外设置外，没有任何缺点，因为现在您可以控制路由器。这是一个不同于 AWS 上普通旧 EC2 实例的世界。事实上，VPC 将默认为所有未来的 AWS 设置启用，这是非常必要的。有关更多信息，请参阅此帖子：[http ://www.reddit.com/r/aws/comments/1a3n0r/ec2_update_virtual_private_clouds_for_everyone/](http://www.reddit.com/r/aws/comments/1a3n0r/ec2_update_virtual_private_clouds_for_everyone/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-24T22:49:56.667

股票答案是：

1.  使用[AWS VPC](http://aws.amazon.com/vpc/)，您可以完全控制实例寻址
2.  使用弹性 IP，当用于 EC2 实例之间的通信时，它将解析为实例的*本地地址（不是您所期望的公共地址）*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-22T07:03:55.727

我偶然发现了第三种选择。Instragram 的人有[ec2-ssh 。](https://github.com/Instagram/ec2-ssh)它是一个全局安装的 python shell 脚本，它可以让你通过标签名称查询你的 ec2 实例的公共 dns，也可以`ssh`通过标签名称查询。

它的文档几乎不存在。我在下面写下了安装步骤：

要安装 ec2-ssh：

1.  `sudo yum install python-boto`（ec2 api 的 python 包装器）
2.  git 克隆[https://github.com/Instagram/ec2-ssh](https://github.com/Instagram/ec2-ssh)
3.  在您的 ~/.bash_profile 中设置您的 AWS 访问密钥和秘密，如下所示：

    导出 AWS_ACCESS_KEY_ID=XYZ123

    导出 AWS_SECRET_ACCESS_KEY=XYZ123

4.  `cd`进入`bin`repo的文件夹，会有两个文件：

    `ec2-host`和`ec2-ssh`

将它们复制到您的`/usr/bin`或`/usr/local/bin`.

现在你可以做一些很棒的事情，比如：

```
$ ec2-host ZenWorker
ec2-999-xy-999-99.compute-1.amazonaws.com 
```

和

```
$ ec2-ssh ZenWorker
Connecting to ec2-999-xy-999-99.compute-1.amazonaws.com. 
```

请注意，在您的常规 shell 脚本中，您可以使用反引号来调用这些全局工具。我已经对这些调用进行了计时，使用 EC2 实例它们需要 0.25 到 0.5 秒，所以这确实是唯一的缺点。也许您可以忍受延迟，或者使用公共 DNS 仅在重新启动时更改实例的事实来制定解决方案。

请注意，这两个程序是命令行脚本，您不需要任何 Python 知识即可使用它们。对于 PHP 爱好者，或者那些想要在`scp`不知道更改的公共 DNS 的情况下轻松获取文件的人，您可以[查看 ec2dns](https://github.com/fruux/ec2dns)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:57:04.430

我曾经处于同样的境地。我仍然没有专业知识来正确解决它。我丑陋的解决方案是使用 elb 不是真正用于负载平衡，而只是用于端点。

[但我认为使用aws vpc](http://aws.amazon.com/vpc/)可以获得一个很好的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-18T23:42:56.530

[这是另一个用于从 AWS 上的实例更新 Route 53 DNS](https://gist.github.com/kixorz/5146008)的 Ruby 解决方案。您不应在应用程序或服务器配置中引用原始的第 3 方系统 IP 地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-12T08:12:14.983

**您可以使用弹性 IP 更改 IP 地址：您可以使用 C# 代码进行操作：**

```
 var associateRequest = new AssociateAddressRequest
            {
                 PublicIp = your Elastic Ip,
                 InstanceId = Your Instance Id Which You Assign
            };    
        amazonEc2Client.AssociateAddress(associateRequest); 
```

**在那之后取消关联它。**

```
 var disAssociateRequest = new isassociateAddressRequest(publicIp.ElasticIpAddress1);
  AmazonEc2Client.DisassociateAddress(your Elastic Ip); 
```

**您的公共 IP 将改变**

# java - AspectJ - 在运行时使用自定义 ClassLoader 进行编织

> ID：10733247
> 
> 赞同：5
> 
> 时间：2012-05-24T07:45:27.597
> 
> 标签：java, classloader, aspectj

我正在尝试在运行时加载类，并在此时将它们与一些 AspectJ 方面结合起来。我启用了加载时编织，当我更常规地使用它时它可以工作。

我的@Aspect 课程中有以下内容：

```
@Before("call(* mypackage.MyInterface.*())")
public void myInterfaceExecuteCall(JoinPoint thisJoinPoint,
        JoinPoint.StaticPart thisJoinPointStaticPart,
        JoinPoint.EnclosingStaticPart thisEnclosingJoinPointStaticPart) {
    System.out.println(thisJoinPoint.getSignature().getDeclaringType());
    System.out.println(thisJoinPoint.getSignature().getName());
} 
```

然后我正在扫描罐子并找到实现的类`MyInterface`：

```
URLClassLoader classLoader = new URLClassLoader(new URL[] { urlOfJar },
        ClassLoader.getSystemClassLoader());
WeavingURLClassLoader weaver = new WeavingURLClassLoader(
        classLoader);
HashSet<Class<?>> executableClasses = new HashSet<Class<?>>();
for (String name : classNamesInJar) {
    try {
        Class<?> myImplementation = weaver.loadClass(name);
        if (MyInterface.class.isAssignableFrom(myImplementation)) {
            executableClasses.add(myImplementation);
        }
    } catch (Exception e) {
        e.printStackTrace();
    } catch (NoClassDefFoundError e) {
        e.printStackTrace();
    }
} 
```

...然后我在某个时刻在加载的类中执行特定方法：

```
try {
    Method execute = myImplementation.getMethod("execute");
    execute.invoke(myImplementation.newInstance());
} catch (Exception e) {
    e.printStackTrace();
} 
```

但是，我上面给你的@Before 方法在我调用时永远不会执行`execute.invoke(...)`（尽管该`execute`方法本身显然已执行，因为我看到了它的输出）。

有人知道我做错了什么吗？在`myInterfaceExecuteCall`调用加载的类的方法之前调用 get 的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T16:18:47.960

好的，我发现了它是什么，它并没有按照我的预期工作，但这里有一个解决方法：

只是做一个`@Before("execution(* mypackage.MyInterface.*())")`而不是`call`。即使该类是由自定义类加载器在运行时手动加载的，这仍然有效。这是因为 AspectJ 不关心使用 using 完成的调用`Method.invoke(...)`。我希望其他人可以使用此解决方法。

这是包含令人难忘信息的文档的链接：

> 例如，调用切入点不会挑选出对 java.lang.reflect.Method.invoke(Object, Object[]) 中实现的方法的反射调用。

[http://www.eclipse.org/aspectj/doc/released/progguide/implementation.html](http://www.eclipse.org/aspectj/doc/released/progguide/implementation.html)

如果您有不同的解决方案，请不要犹豫回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T14:45:18.477

如果我没记错的话，AspectJ 不能编织 JDK 类。这可以解释这一点：

> 例如，调用切入点不会挑选出对 java.lang.reflect.Method.invoke(Object, Object[]) 中实现的方法的反射调用。

# jquery - 弹出 jquery 中 playframework 2.0 中的服务器端验证

> ID：10733248
> 
> 赞同：0
> 
> 时间：2012-05-24T07:45:29.840
> 
> 标签：jquery, playframework-2.0

我正在使用播放框架 2.0.1。我在 jquery 弹出窗口中有一个表单，我必须在服务器端进行验证并在不关闭弹出窗口的情况下显示验证消息。

我尝试使用 zen 任务示例中给出的 java 脚本路由，但我认为没有示例可以从客户端进行 ajax 调用。

我找不到在 play framework 2.0 中使用 ajax 的任何其他示例。

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:01:49.527

**在客户端**，您可以调用自己的 javascript 函数，该函数将收集您的所有表单输入：

```
$("#myForm").submit(function(evt) {
    evt.preventDefault();
    $.ajax({
        type: "POST",
        url: "@routes.MyController.myMethod()",
        data: { username: $("#myForm #username").val(), age: $("#myForm #age").val() },
        dataType: "json",
        success: function(data, textStatus, jqXHR) {
            console.log("Success of call");
            //Do what you want here
            //For example close the jquery opened panel
        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.log("Failure of call");
        }
    }
    return false;
}); 
```

**在服务器端**，您会将传入请求视为任何其他请求（这是一个 scala 示例，适用于 java）：

```
def connectWithFB = Action { implicit request =>
    Form(tuple("username" -> nonEmptyText, "age" -> nonEmptyText)).bindFromRequest.fold(
        errors =>  {
            BadRequest(toJson(Map("status" -> "0", "error" -> "Missing fields or wrong field")))
        },
        success => {
            Ok(toJson(Map("status" -> "1")))
        }
    )
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T07:30:06.410

使用 bootstrap 可以很容易地进行验证，例如：

```
<div class="form-group" style="position:relative;left:20px;">
   <label class="sr-only" for="exampleInputEmail2"><strong>  Genre</strong>
            </label>
     <input type="text" name="genre" required />

     </div> 
```

你所要做的就是说它需要这样

```
<input type="text" name="genre" required /> 
```

干杯

# c# - 动态添加菜单项在 ASP .net 中随机消失

> ID：10733254
> 
> 赞同：0
> 
> 时间：2012-05-24T07:45:46.550
> 
> 标签：c#, asp.net, c#-4.0

我有一个标题控件，它包含在每个页面中。我根据提供的用户权限和模块在 Header 控件中创建动态菜单。

菜单以以下字符串格式创建。

**代码背后**

`

```
string dynamicMenu =
<ul>
    <li>
        <a href='/User/HomePage' runat='server' id='HOME'>Home</a>
    </li>
    <li>
        <a href='/User/Files' runat='server' id='MyFiles'>My Files</a>
    </li>
</ul>;
divMenu.InnerHtml = dynamicMenu; 
```

`

**ASPX**

`<div id="divMenu" runat="server"></div>`

问题是，有时菜单消失并且呈现的菜单 div 只有`<ul/>`标签，而 l 看起来像

`<div id="divMenu" runat="server"> <ul/> </div>`

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:16:18.770

替换`<div id="divMenu" runat="server"></div>`为您的 aspx 中的面板

在后面的代码中

```
string dynamicMenu = "<ul><li><a href='/User/HomePage' runat='server' id='HOME'>Home</a></li><li><a href='/User/Files' runat='server' id='MyFiles'>My Files</a></li></ul>";
Panel1.Controls.Add(new LiteralControl(dynamicMenu)); 
```

# package - 带有介绍包typo3的网格元素插件

> ID：10733257
> 
> 赞同：0
> 
> 时间：2012-05-24T07:45:59.293
> 
> 标签：package, typo3

我是一个typo3新手。我用介绍包安装了typo3 4.5。在我搜索了整个谷歌之后，询问了写教程的人关于我遇到问题的插件 - 我仍然找不到解决方案。我真的希望有人可以在这里帮助我。

插件：网格元素

1.  我成功安装了插件。我编辑了介绍包的主模板，并在其中包含了静态模板
2.  我使用我需要的网格元素布局在我的根页面中创建了一个 ne 记录。我的元素的 ID 是：3，我只有 2 列 ID 为 20 和 21
3.  然后我在子页面上添加了内容元素，将我的内容插入到我的列中。它们成功出现在前端 - 尽管使用标准 html **-->[查看代码](http://content.screencast.com/users/BOEHMCKER/folders/Jing/media/cb1f4bff-79fd-4e36-b41a-295a61129bc7/wrong-html.png)**

4.  我还将我的 TypoScript 放入我的“主页”根页面的页面 TSConfig 中。--> 见下图

更多图片可帮助您理解： **[查看](http://content.screencast.com/users/BOEHMCKER/folders/Jing/media/2a69575c-8cde-456f-85b1-25e6526ef1eb/2012-05-24_0941.png)**

对不起..还不允许发布图片^^

请告诉我我做错了什么:)!! 为什么我的 TypoScript 不工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T16:46:48.633

发现问题...安装导入包时，需要创建一个新的模板元素并在此处包含静态模板。还应在此处输入 TS 以在前端显示正确的结构

# google-docs - 谷歌文档上的语言

> ID：10733262
> 
> 赞同：1
> 
> 时间：2012-05-24T07:46:24.590
> 
> 标签：google-docs

我正在使用 Google Doc viewer 显示在线 PDF 网址，如下所示：[https ://docs.google.com/viewer?url=www.education.gov.yk.ca/pdf/pdf-test.pdf](https://docs.google.com/viewer?url=www.education.gov.yk.ca/pdf/pdf-test.pdf) ://docs.google.com/viewer?url=www.education.gov.yk.ca/pdf/pdf-test.pdf我正在使用这个使用 javascript 打开窗口操作的 URL，如下所示： window.open(url,target='_blank','width=800,height=600,scrollbars=1');

其中 URL 是[https://docs.google.com/viewer?url=www.education.gov.yk.ca/pdf/pdf-test.pdf](https://docs.google.com/viewer?url=www.education.gov.yk.ca/pdf/pdf-test.pdf)

我的问题是：谷歌文档查看器默认将语言作为英语。我可以以某种方式更改此语言，以便屏幕上的下一个/上一个按钮以荷兰语而不是英语显示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:32:06.967

您可以添加`hl`查询参数以使用 ISO 语言代码指定不同的语言环境。例如，要使用荷兰语，您应该`&hl=nl`在以下链接中添加：

[https://docs.google.com/a/google.com/viewer?url=www.education.gov.yk.ca/pdf/pdf-test.pdf&hl=nl](https://docs.google.com/a/google.com/viewer?url=www.education.gov.yk.ca/pdf/pdf-test.pdf&hl=nl)

# jquery - 任何滑块 jQuery 导航

> ID：10733264
> 
> 赞同：1
> 
> 时间：2012-05-24T07:46:32.120
> 
> 标签：jquery, navigation, anythingslider

我试图阻止点击`.thumbNav li`导航使用这个

```
$('.anythingSlider').delegate('.thumbNav li','click', function(){
   return false;
}); 
```

但它就是行不通？？

我怀疑脚本中有一个绑定点击事件的函数，也许这是我的问题？

也许有一种方法可以覆盖该功能？

**编辑**`"onInitialized"`：我在回调上运行这个函数

这是 HTML：

```
<ul class="thumbNav" style="">
  <li class="first">
    <a class="panel1 cur" href="#">
        <span>0</span>
    </a>
  </li>
  <li>
    <a class="panel2 disabled" href="#">
        <span>1</span>
    </a>
  </li>
  <li>
    <a class="panel3 disabled" href="#">
        <span>2</span>
    </a>
  </li>
  <li>
    <a class="panel4 disabled" href="#">
        <span>3</span>
    </a>
  </li>
  <li class="last">
    <a class="panel5 disabled" href="#">
        <span>4</span>
    </a>
  </li>
</ul>​ 
```

嗯..实际上这适用于 crome（但不适用于 ff 或 ie）：

```
$('.thumbNav li a').bind('click', function(){ 
   return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:17:13.807

只需将`enableNavigation`选项设置为`false`（[演示](http://jsfiddle.net/Mottie/aTKzP/1073/)）

```
$('#slider').anythingSlider({
    // if false, navigation links will still be visible, but not clickable.
    enableNavigation: false,
});​ 
```

或者，您可以将`clickControls`选项设置为空字符串：

```
$('#slider').anythingSlider({
    // Events used to activate navigation control functionality
    clickControls: "" // default is "click focusin"
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:02:04.530

尝试

```
$('.anythingSlider').delegate('.thumbNav li a','click', function(){
return false;
}); 
```

希望这会奏效......

# airbrake - 如何在空气制动参数中为 JS 错误添加一些额外的参数

> ID：10733269
> 
> 赞同：2
> 
> 时间：2012-05-24T07:46:53.557
> 
> 标签：airbrake

当我们将 airbrake 错误发送到 airbrake 服务器时，默认情况下它包括控制器名称和操作名称。

但问题是我想添加一些额外的参数`username`，比如`email`当前用户的 , 。如果有人有任何想法，请建议如何做到这一点？

在我的布局 application.html 中：

```
- if ['development'].include?(Rails.env)
  = airbrake_javascript_notifier
  = render :partial => 'layouts/airbrake_notifier' 
```

在我写的部分中：

```
 Airbrake.errorDefaults['name'] = "#{current_user.name}";<br/>
   Airbrake.errorDefaults['email'] = "#{current_user.email}";<br/>
   Airbrake.errorDefaults['phone'] = "#{current_user.phone}";<br/>
   Airbrake.errorDefaults['title'] = "#{current_user.title;<br/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:46:23.747

我们刚刚添加了让当前用户进入 Airbrake Gem 的功能。 [https://github.com/airbrake/airbrake/wiki/Sending-current-user-information](https://github.com/airbrake/airbrake/wiki/Sending-current-user-information)

在即将进行的 UI 重新设计中，您很快就能按当前用户进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T16:33:28.883

这不是一个很好的解决方案，但[Airbrake 知识库](http://help.airbrake.io/kb)建议基本上[修补 lib/airbrake/notice.rb 文件的 airbrake gem 源](http://help.airbrake.io/kb/customizations/add-extra-parameters-to-every-error)。

```
def initialize(args)
  ...
  self.parameters          = args[:parameters] ||
                               action_dispatch_params ||
                               rack_env(:params) ||
                               {'username' => current_user.name} 
```

在不修补源的情况下配置它肯定会更好。

我所做的只是向会话中添加一些数据（主要是 current_user.name），因为会话数据是随请求一起发送的。我不会为超过几条数据做这件事。

# c# - 流利的 NHibernate 子类映射与外键

> ID：10733273
> 
> 赞同：2
> 
> 时间：2012-05-24T07:47:22.537
> 
> 标签：c#, .net, fluent-nhibernate, fluent-nhibernate-mapping

我有这个对象：

```
class Person { Int32 id; String name; /*..*/ Adress adress; }
class Employee : Person { String e_g_Tax; /*..*/ Guid relationshipToManagmentId; } 
```

以及以下映射前提：
(a) “relationshipToManagmentId”应该是外键。
(b) 表“RelationshipToManagment”是非映射表，（应用程序的旧部分）
(c) 映射策略是 TPT。（至少对于新对象:-)

映射，直到现在：

```
public class PersonMap : ClassMap<Person> {
  public PersonMap(){
    Id(x => x.id);
    Map (x => x.Nachname).Length(255).Not.Nullable();
    /*..*/
    References(x => x.Adresse).Class(typeof(Adresse)).Not.Nullable();
  }
}
public class EmployeeMap : SubclassMap<Employee>
    {
        public EmployeeMap()
        {
            Map(x => x.e_g_Tax, "enjoytax")
                .Not.Nullable();
            /*..*/
            Join("RelationshipToManagment", xJoin =>
            {
                //xJoin.Table("RelationshipToManagment");
                xJoin.Fetch.Join();
                xJoin.KeyColumn("ID");
                xJoin.Map(x => x.relationshipToManagmentId)
                    .Not.Nullable() ;
            }); // --> exception!! 
```

我怎么写这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:48:30.697

`Join()`只能在主键（属性 ID）上连接到另一个表，但您需要在外键列上连接。一个普通的参考做你想要的

```
class Employee : Person
{
    Management Management;
}

public EmployeeMap()
{
    References(x => x.Management).Column("relationshipToManagmentId");
} 
```

更新：如果您需要表格中的只读信息，`RelationshipToManagment`您可以使用公式属性

```
public EmployeeMap()
{
    Map(x => x.RelationshipToManagment).Formula("(SELECT m.Title FROM RelationshipToManagment m WHERE m.Id = relationshipToManagmentId)");
} 
```

# ios5 - 重新加载并显示一个 tableView whitch 基于 MainStoryboard 中的一个视图

> ID：10733276
> 
> 赞同：1
> 
> 时间：2012-05-24T07:47:36.773
> 
> 标签：ios5, tableview, uistoryboard, reloaddata, setneedsdisplay

从上周开始我一直在寻找鞋面的解决方案，但我在互联网上没有找到解决方案。所以我想我会在这里得到帮助。

现在可能会提出问题：我有一个 MainStoryboard，其中有一个带有 View 的 ViewController。在那个视图上，我放了一个 tableView。视图控制器.h

```
IBOutlet UITableView *tableView
//on bottom
@property (nonatomic, retain) UITableView *tableView; 
```

ViewController.m 我已经合成了它，现在我想在显示视图时重新加载并显示它。我测试了以下没有结果的东西：`[tableView reloadData]; [self.tableView reloadData]; [self.tableView setNeedsDisplay];` 如果我使用了，则会`[self.view setNeedsDisplay];`出现以下错误：

> 由于未捕获的异常“NSInternatlInconsistencyExeption”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle <...>（已加载）”，名称为“ViewController” ***第一次调用堆栈：（...）终止调用抛出异常（lldb）

没错，没有NIB文件，因为我用过Storyboard。那么有人有想法吗？

我发现的唯一一件事是，如果我通过 Storyboard 中视图上的按钮重新加载视图，tableView 会重新加载 - 完全重新加载 - 但这不是解决方案。

我可以为此做点什么`-(void)prepareForSegue:(UIStoryboard *)segue sender:(id)sender`吗？到目前为止，我仅将这种方法用于弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:57:42.223

您是否真的在 Interface Builder 中连接了 IBOutlet？

Xcode 应该告诉你它是否连接：它会在你的头文件的边缘显示一个小圆圈，如果那个圆圈里面有一个点，它就是连接的，如果没有，那么它不是。

![点](../Images/21358bf6c32344747a87ec4ba49a6dac.png)

要在 Interface Builder 中连接插座，请从带有插座的事物（即您的视图控制器）右键拖动到您想要将其连接到的事物（您的表），当您松开它时，它会为您提供一个可能的插座菜单从中选择。

# spring - 无法从复选框中获取多个值

> ID：10733281
> 
> 赞同：0
> 
> 时间：2012-05-24T07:47:56.660
> 
> 标签：spring, jsp, checkbox

我正在尝试从 jsp 页面访问多个复选框值..但我最终得到了错误的绑定..

jsp页面：

```
<c:forEach items="${employees}" var="employee">
                    <tr>
                         <td><spring:checkbox path="selectedMails" value="<c:out value='${employee.emailid}'/>"/> </td> 
                        <td><spring:label path="employeeId">${employee.employeeId}</spring:label></td>
                        <td><spring:label path="employeeName">${employee.employeeName}</spring:label></td>
                        <td><spring:label path="emailid" >${employee.emailid}</spring:label></td>
                        <td><spring:label path="reportmanager">${employee.reportmanager}</spring:label></td>

                    </tr>
                </c:forEach> 
```

页面

```
//Invitation Beans
    private String [] selectedMails;

    public String [] getSelectedMails() {
        return selectedMails;
    }
    public void setSelectedMails(String [] selectedMails) {
        this.selectedMails = selectedMails;
    } 
```

我可以`${employee.emailid}`在jsp页面上打印..但我无法返回，我需要保存多个值..请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:47:14.520

要获得多个值，您应该有多个具有相同名称的复选框。在这种情况下，它将作为数组放入请求中，您可以将此值作为数组获取。

如果您有单个复选框 - 您将获得单个值。或者如果未选中复选框，则根本没有价值。如果未选中复选框，它不会请求任何值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:19:05.997

您应该在路径属性中为您创建的每个复选框提供数组索引。

您需要在 jsp 代码中进行以下更改。

```
<c:forEach items="${employees}" var="employee" varStatus="cnt">
    <tr> 
        <td><spring:checkbox path="selectedMails[${cnt.index}]" value="<c:out value='${employee.emailid}'/>"/> </td>  
        <td><spring:label path="employeeId">${employee.employeeId}</spring:label></td> 
        <td><spring:label path="employeeName">${employee.employeeName}</spring:label></td> 
        <td><spring:label path="emailid" >${employee.emailid}</spring:label></td> 
        <td><spring:label path="reportmanager">${employee.reportmanager}</spring:label></td> 
    </tr> 
</c:forEach> 
```

我认为这应该对你有用。

希望这对您有所帮助。

干杯。

# c++ - dll依赖版本冲突

> ID：10733287
> 
> 赞同：1
> 
> 时间：2012-05-24T07:48:11.413
> 
> 标签：c++, windows, dll, dependencies

我在 Visual Studio 2008 Express 中使用 C++。

我们正在向客户端提供仅二进制的 Windows 库，该客户端本身使用许多其他库。因此，我们发布了我们的 dll 文件以及我们使用的 dll 文件。现在的问题是我们的客户使用了我们也使用的一些库，但是在另一个版本中。因此他不能使用我们的库，因为我们都依赖的库是不兼容的。

从技术上讲，我认为应该有可能将两个依赖版本都加载到进程空间中。但是，我不确定如何执行此操作，因为它们的应用程序以及我们的 dll 都在寻找相同的依赖 dll 文件名。谁能告诉我处理这个问题的最好/最干净的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:15:08.620

一般来说，它不会起作用。这是因为第三方 DLL 版本在加载到内存时可能会相互干扰。一个例子可能是如果有一个独占资源，例如特定目录中的文件。或特定设备。问题是，没有人知道甚至可能连第 3 方 DLL 的制造商都不知道——因此需要进行广泛的测试。

但也许你很幸运，它仍然有效。我的食谱：

1.  将您的 DLL“DTAG.DLL”和所有需要的 DLL 放在具有固定名称（例如“DTAG_LIB”）的应用程序目录的子目录中。
2.  手动编写一个导入库（使用 DELAYLOAD 还有其他可能性）。在该库中，使用 LoadLibraryEx 加载您的 DLL。提供以“DTAG_LIB\DTAG.DLL”和标志 LOAD_WITH_ALTERED_SEARCH_PATH 结尾的**绝对路径。**然后，Windows 将从该目录加载您的 DTAG.DLL，并从该目录加载所有需要的 DLL。不要将 PATH 设置为“DTAG_LIB”！
3.  您的客户必须链接到您的手动导入库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T12:57:46.647

您可以使用您将交付的（新）附加 DLL 来解决此类问题，该 DLL 将负责处理版本冲突（在运行时） - 作为您的应用程序及其依赖项之间的一种代理。

另一种方法是使用 Windows[转发库机制](http://blogs.msdn.com/b/oldnewthing/archive/2006/07/19/671238.aspx)。

> 转发器是一种方便的方式来适应从一个 DLL 移动到另一个 DLL 的功能

您可以使用多种方式声明转发器，例如模块定义 ( `.def`) 文件和`#pragma`:

```
#pragma comment(linker, "/export:function=otherdll.function") 
```

# windows-7 - 如何隐藏 Windows 7 开始按钮

> ID：10733288
> 
> 赞同：0
> 
> 时间：2012-05-24T07:48:12.773
> 
> 标签：windows-7

是否可以隐藏 Windows 7 开始按钮？

我可以隐藏整个任务栏，但开始按钮仍然可见。

其exe的名称是任务管理器中的winlogon.exe。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:53:34.787

You might find how to disable Start menu [here](http://www.techsupportforum.com/forums/f217/completely-disable-start-menu-376790.html)

# android - CSipSimple 实现错误

> ID：10733294
> 
> 赞同：0
> 
> 时间：2012-05-24T07:48:50.497
> 
> 标签：android, android-ndk

我正在尝试使用 ndk-build 编译 CSipSimple 示例项目。但是构建失败并出现以下错误日志。

```
D:\Android\android-ndk-r8-windows\android-ndk-r8>ndk-build.cmd
Android NDK: No local settings... build all in release mode !
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:34: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//system_wrappers/s
ource/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:35: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/audio_pro
cessing/utility/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:36: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//common_audio/sign
al_processing/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:37: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//common_audio/vad/
Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:38: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//common_audio/resa
mpler/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:41: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/audio_pro
cessing/aecm/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:42: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/audio_pro
cessing/aec/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:46: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/audio_cod
ing/main/source/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:47: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/audio_cod
ing/neteq/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:48: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/audio_cod
ing/codecs/cng/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:49: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/audio_cod
ing/codecs/g711/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:50: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/audio_cod
i    ng/codecs/ilbc/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:52: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/audio_cod
ing/codecs/iSAC/fix/source/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:53: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/audio_cod
ing/codecs/iSAC/main/source/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:56: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/audio_pro
cessing/ns/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:64: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//common_video/liby
uv/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:65: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/video_ren
der/main/source/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//webrtc/
android_toolchain/Android.mk:66: D:\Android\android-ndk-r8-windows\android-ndk-r
8\samples\CSipSimple/jni//webrtc/android_toolchain/../sources//modules/video_cap
ture/main/source/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//opus/an
droid_toolchain/Android.mk:22: D:\Android\android-ndk-r8-windows\android-ndk-r8\
samples\CSipSimple/jni//opus/android_toolchain/../sources//silk_sources.mk: No s
uch file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//opus/an
droid_toolchain/Android.mk:32: D:\Android\android-ndk-r8-windows\android-ndk-r8\
samples\CSipSimple/jni//opus/android_toolchain/../sources//celt_sources.mk: No s
uch file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//opus/an
droid_toolchain/Android.mk:34: D:\Android\android-ndk-r8-windows\android-ndk-r8\
samples\CSipSimple/jni//opus/android_toolchain/../sources//opus_sources.mk: No s
uch file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni/Android.
mk:24: D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//
openssl/sources/Android.mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//openssl
/android_toolchain/Android.mk:41: D:\Android\android-ndk-r8-windows\android-ndk-
r8\samples\CSipSimple/jni//openssl/android_toolchain/../sources//android-config.
mk: No such file or directory
D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSipSimple/jni//openssl
/android_toolchain/Android.mk:59: D:\Android\android-ndk-r8-windows\android-ndk-
r8\samples\CSipSimple/jni//openssl/android_toolchain/../sources//android-config.
mk: No such file or directory
Android NDK: ERROR:D:\Android\android-ndk-r8-windows\android-ndk-r8\samples\CSip
Simple/jni//csipsimple-wrapper/android_toolchain/Android.mk:gcc: LOCAL_SRC_FILES
 points to a missing file
Android NDK: Check that //D:/Android/android-ndk-r8-windows/android-ndk-r8/toolc
hains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/../lib/gcc/arm-linux-andr
oideabi/4.4.3/libgcc.a exists  or that its path is correct
D:/Android/android-ndk-r8-windows/android-ndk-r8/build/core/prebuilt-library.mk:
43: *** Android NDK: Aborting    .  Stop. 
```

没有得到错误。如果有人已经实施，请帮助解决错误。我已经从这个 URL [http://code.google.com/p/csipsimple/source/checkout](http://code.google.com/p/csipsimple/source/checkout)下载了这个项目。请让我知道我在哪里做错了。

提前致谢。问候， 阿什维尼·谢尔克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T22:17:27.560

这绝对不是 CSipSimple 实现错误。

问题是您没有阅读文档！！！！！！！

**请阅读：[http ://code.google.com/p/csipsimple/wiki/HowToBuild](http://code.google.com/p/csipsimple/wiki/HowToBuild)**

另外，我建议您离开 Windows 并切换到实际的开发人员环境（基于 gnu/linux）。否则，您可能对自己所做的一无所知，并花费大量时间尝试了解 GNU 工具链的工作原理，而对于使用 gnu/linux env 的开发人员来说，这是显而易见的。

CSipSimple 比一个非常简单的 ndk 应用程序复杂得多，并且涉及许多其他项目。因此构建它的工具链涉及使用 svn:externals、git、zip、quilt 获取远程项目的步骤。它还使用 swig 工具生成 jni 接口。

还要注意项目的许可证。

对于其他问题，您还可以加入 CSipSimple 开发人员 google 组（链接在 HowToBuild wiki 页面中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T16:21:35.637

首先，您需要将 pjsip 生成的代码复制到 D:\CSipSimple-trunk\CSipSimple\src\org\pjsip 目录中。然后清理项目并构建它。

# javascript - 将 div 添加到具有绝对位置的父级

> ID：10733301
> 
> 赞同：0
> 
> 时间：2012-05-24T07:49:27.217
> 
> 标签：javascript, jquery

我有一个具有相对样式位置的父 div，并且在该 div 内有几个具有绝对样式的 div

```
<div id="container" style="position:relative;width=400px;height=400px;">
<div style="top:20px;left:20px;width:20px;height:20px;"></div>
<div style="top:40px;left:40px;width:20px;height:20px;"></div>
<div style="top:60px;left:60px;width:20px;height:20px;"></div>
</div> 
```

如何使用`id="container"`with将新 div 添加到 div `top="0px" left="0px"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:51:53.787

```
$('#container').append(
    $('<div/>').css({top:'0px',left:'0px'})
); 
```

这是一个活生生的例子：http: [//jsfiddle.net/AWYbD/](http://jsfiddle.net/AWYbD/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T07:52:37.483

首先，小心将“位置：绝对”设置为您的内部 div。在使用 top、left 等声明时，这不是隐式设置的。

添加一个新的 div（我假设使用 jquery），

做就是了

```
$('#container').append('<div style="position:asbolute; top: 0px; left: 0px;"></div>'); 
```

# xsl-fo - MathML in XSL:FO :want to add equations to pdf file generated using xsl:FO

> ID：10733304
> 
> 赞同：0
> 
> 时间：2012-05-24T07:49:31.477
> 
> 标签：xsl-fo, mathml

I have a MathML code and i want to use it in my XSL-FO to display equations in my pdf file.

I am able to display text as well as images but dont understand how can I display equations.

Any inputs or ideas??

MathML code:

```
<Form1>
<mrow xmlns="http://www.w3.org/1998/Math/MathML">
     <mrow>
       <mn>a</mn>
       <msup>
         <mi>x</mi>
         <mn>2</mn>
       </msup>
       <mo>+</mo>
       <mrow>
         <mn>b</mn>
         <mi>x</mi>
       </mrow>
       <mo>+</mo>
       <mn>c</mn>
     </mrow>
     <mo>=</mo>
     <mn>0</mn>
   </mrow>
   </Form1> 
```

# php - Provide link to lightbox image

> ID：10733305
> 
> 赞同：0
> 
> 时间：2012-05-24T07:49:33.757
> 
> 标签：php, jquery

I'm using a light box(jquery.lightbox-0.5.js) for my gallery page. And my code for display the image is

```
<ul>
  <div class="gallery" id="gallery1">
    <li> <a style="display: inline;" href="sample.jpg" target="_blank"> <img src="sample_thumb.jpg" alt=""  /> </a> </li>
  </div>
</ul> 
```

It's working fine.

But now i want to provide the link to the Lightbox image. i.e., On clicking the Image within the Lightbox, i want to redirect the user to some other page.

But i dont know how to achieve this? Does anyone have any idea about this? Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:06:54.763

在您的 html 中设置“a”标签的标题并将其设置为您想要的链接。单击图像时，在放大图像的底部，您将看到一个链接，您可以在其中单击和导航。

```
<ul>
  <div class="gallery" id="gallery1">
    <li> <a style="display: inline;" href="sample.jpg" target="_blank" title="&lt;a href='http://google.com'&gt;My Link. Click Me&lt;/a&gt;"> <img src="sample_thumb.jpg" alt=""  /> </a> </li>
  </div>
</ul> 
```

# iphone - Setting image views for particular table cells

> ID：10733306
> 
> 赞同：0
> 
> 时间：2012-05-24T07:49:41.277
> 
> 标签：iphone, ios, ios4

Here is some interesting question .I am developing an app with tableview. Initially tableview is having 4 rows and all the 4 rows having same images in image views. When i click first row i manually added some sub rows under first row and reloaded the table view. When i second click on same row that i previously clicked i removed the objects that i added manually and reloading tableview. I want to change image for 1 st. row when 1 st. row is clicked and second click on 1 st. row then showing previous image same for all the four rows ..please tell me how to do this.

```
a=b=c=FALSE

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

{

    ///////11111

if(a==FALSE && indexPath.row==0)

{

 [array insertObject:@"a" atIndex:1];

  [array insertObject:@"b" atIndex:2];

 [array insertObject:@"c" atIndex:3];

a=TRUE;

}

   else if(indexPath.row==0 && a==TRUE)

 {

 [array removeObject:@"a"];

  [array removeObject:@"b"];

  [array removeObject:@"c"];

        a=FALSE;
    }

 else if(a==FALSE && b==FALSE && indexPath.row==1)

    {
        [array insertObject:@"d" atIndex:2];
          [array insertObject:@"e" atIndex:3];
          [array insertObject:@"f" atIndex:4];
        b=TRUE;
    }
    else if(a==TRUE && b==FALSE && indexPath.row==4)
    {
        [array insertObject:@"d" atIndex:5];
        [array insertObject:@"e" atIndex:6];
        [array insertObject:@"f" atIndex:7];
        b=TRUE;
    }
    else if(a==FALSE && b==TRUE && indexPath.row==1)
    {
        [array removeObject:@"d"];
        [array removeObject:@"e"];
        [array removeObject:@"f"];
        b=FALSE;
    }
    else if(a==TRUE && b==TRUE && indexPath.row==4)
    {
        [array removeObject:@"d"];
        [array removeObject:@"e"];
        [array removeObject:@"f"];
        b=FALSE;
    }

    /////////3333333333

    else if(a==FALSE && b==FALSE && c==FALSE && indexPath.row==2)
    {
        [array insertObject:@"m" atIndex:3];
        [array insertObject:@"n" atIndex:4];
        [array insertObject:@"p" atIndex:5];
        c=TRUE;
    }
    else if(a==FALSE && b==TRUE && c==FALSE && indexPath.row==5)
    {
        [array insertObject:@"m" atIndex:6];
        [array insertObject:@"n" atIndex:7];
        [array insertObject:@"p" atIndex:8];
        c=TRUE;
    }
    else if(a==TRUE && b==FALSE && c==FALSE && indexPath.row==5)
    {
        [array insertObject:@"m" atIndex:6];
        [array insertObject:@"n" atIndex:7];
        [array insertObject:@"p" atIndex:8];
        c=TRUE;
    }
    else if(a==TRUE && b==TRUE && c==FALSE && indexPath.row==8)
    {
        [array insertObject:@"m" atIndex:9];
        [array insertObject:@"n" atIndex:10];
        [array insertObject:@"p" atIndex:11];
        c=TRUE;
    }

        else if(a==TRUE && b==TRUE && c==TRUE && indexPath.row==8)
        {
            [array removeObject:@"m"];
             [array removeObject:@"n"];
             [array removeObject:@"p"];
            c=FALSE;
        }
        else if(a==TRUE && b==FALSE && c==TRUE && indexPath.row==5)
        {
            [array removeObject:@"m"];
            [array removeObject:@"n"];
            [array removeObject:@"p"];
            c=FALSE;
        }
        else if(a==FALSE && b==TRUE && c==TRUE && indexPath.row==5)
        {
            [array removeObject:@"m"];
            [array removeObject:@"n"];
            [array removeObject:@"p"];
            c=FALSE;
        }
    else if(a==FALSE && b==FALSE && c==TRUE && indexPath.row==2)
    {
        [array removeObject:@"m"];
        [array removeObject:@"n"];
        [array removeObject:@"p"];
        c=FALSE;
    }

    //////4444444444
    if(indexPath.row==[array count]-1)
    {
      ---
    }

    [tableview reloadData];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:59:36.060

我假设您正在使用包含字典的数组填充表格视图。您可以在字典中设置一个标志（类似于“扩展”或“折叠”），然后在 cellForRowAtIndexPath 中检查该标志是否为真/假，以便您可以根据该标志设置图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:18:57.907

创建具有类型单元格的类，该类具有单元格上的数据成员和另一个类型为 NSString *parentElement 的数据成员。对于主要的四个标签，父元素将为空。但对于单元格内的子单元格，所有者单元格将是其父元素。所以现在检查父元素的条件并设置您想要的图像。它对我来说很好。希望它也对你有用。

# silverlight - 获取自定义依赖属性

> ID：10733312
> 
> 赞同：1
> 
> 时间：2012-05-24T07:50:25.987
> 
> 标签：silverlight, reflection, dependency-properties

我有一个包含我的自定义依赖属性的控件，如下所示：

```
 public static readonly DependencyProperty MouseEnterColorProperty =
            DependencyProperty.Register("MouseEnterColor", typeof (Color), typeof (SCADAPolyline), new PropertyMetadata(default(Color)));

        public Color MouseEnterColor
        {
            get { return (Color) GetValue(MouseEnterColorProperty); }
            set { SetValue(MouseEnterColorProperty, value); }
        } 
```

它的奇怪问题。我正在使用反射来获取我的属性以设置新值。但是无法获取我的属性。我尝试了 type.GetFields() 的所有可能性

```
 FieldInfo fieldInfo = type.GetField(name, BindingFlags.FlattenHierarchy | BindingFlags.Public | BindingFlags.Static);

or 

 fieldInfo = type.GetFields(BindingFlags.Static | BindingFlags.Public)
                                          .Where(p => p.FieldType.Equals(typeof(DependencyProperty)) && p.Name==name).FirstOrDefault(); 
```

听起来我的财产不见了。我无法访问，这个问题让我很生气。我怎样才能解决这个问题的任何想法？我正在使用 Silverlight 5.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:08:10.007

依赖属性不是字段。它不是通常意义上的类定义的一部分。

在幕后，它存储在依赖属性的集合中。

[从这里](http://social.msdn.microsoft.com/Forums/en/wpf/thread/580234cb-e870-4af1-9a91-3e3ba118c89c)尝试这个示例作为如何访问它们的指南：

```
 public static class DependencyObjectHelper
    {
        public static List<DependencyProperty> GetDependencyProperties(Object element)
        {
            List<DependencyProperty> properties = new List<DependencyProperty>();
            MarkupObject markupObject = MarkupWriter.GetMarkupObjectFor(element);
            if (markupObject != null)
            {
                foreach (MarkupProperty mp in markupObject.Properties)
                {
                    if (mp.DependencyProperty != null)
                    {
                        properties.Add(mp.DependencyProperty);
                    }
                }
            }

            return properties;
        } 
```

# c# - UniformGrid 在 C# 上添加按钮

> ID：10733314
> 
> 赞同：1
> 
> 时间：2012-05-24T07:50:38.903
> 
> 标签：c#, wpf, uniformgrid

我的 WPF 中有一个 UniformGrid

```
<UniformGrid Height="144" HorizontalAlignment="Left" Margin="0,136,0,0" VerticalAlignment="Top" Width="213" MaxHeight="144" MaxWidth="213" MinHeight="144" MinWidth="213" x:Name="PATH_DataGrid" Columns="7" Rows="6">
</UniformGrid> 
```

我将在 C# cod 上添加一些 autogeneretet 按钮

```
Button b = new Button();
            b.Content = "22";
            b.Width = 100;
            b.Height = 100; 
```

我可以将按钮添加到 UniformGrid 吗？

```
 PATH_DataGrid`??? 
```

THX 为您提供帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T07:53:14.893

```
PATH_DataGrid.Children.Add(b) 
```

这会将按钮添加到面板中。

# php - PHP parse_url 转换 & 字符，为什么？

> ID：10733315
> 
> 赞同：0
> 
> 时间：2012-05-24T07:50:46.217
> 
> 标签：php, parsing, url, standards

我的一位客户遇到了这种奇怪的情况。显然他们的网站使用这样的 URL：

```
http://example.com/msweb.nsf/pages/Books!OpenDocument&vw=Class&f1=books 
```

如果我将此发送到 PHP 中的 parse_url() 调用，那么它将 & 字符转换`&amp;`为返回的数组关键字“路径”。它不会对“查询”部分执行此操作，如果存在，则仅对“路径”执行此操作。

它这样做是因为它将整个部分视为路径（因为他们使用 ! 而不是 ? 作为查询分隔符）。是否有理由对路径进行这种转换（我认为`&amp;`单独的路径对 & 无效），是否有一个标准可以让客户参考，以便他们解决问题？

目前的情况是我们创建了 URL 缩短器并使用 parse_url() 作为方法来收集有关 URL 的详细信息，但由于与符号转换，目前它与该特定客户端中断。

我试图在 parse_url() 文档中搜索这个，但没有找到任何提及`&amp;`

# bash - 什么是 bash 中的空字符串

> ID：10733317
> 
> 赞同：4
> 
> 时间：2012-05-24T07:50:50.033
> 
> 标签：bash

我刚刚在 bash 手册中找到了这个片段：

```
A variable may be assigned to by a statement of the form

  name=[value]

If value is not given, the variable is assigned the null string. 
```

究竟是什么意思`null string`？是例如

```
local empty 
```

相当于

```
local empty="" 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T08:03:20.440

“空字符串”是长度为零的字符串。在您的示例中，两者都是相同的。

一个简单的测试：

```
#!/bin/bash
go(){
   local empty
   local empty2=""
   [[ -z $empty ]] && echo "empty is null"
   [[ -z $empty2 ]] && echo "empty2 is null"
   [[ $empty == $empty2 ]] && echo "They are the same"
}

go 
```

印刷：

```
empty is null
empty2 is null
They are the same 
```

# iphone - 如何在表格视图中显示来自 NSMutablearray 的数据

> ID：10733321
> 
> 赞同：0
> 
> 时间：2012-05-24T07:51:06.487
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试使用存储在 NSMutableArray 中的每个用户的图像、姓名和姓氏来初始化 tableview。在这个可变数组中，我保存了一个我创建的用于存储用户数据的类，它的模式如下：

```
ResultSearchController{
  NSInteger *userID;
  NSString *userName;
  NSString *userSurname;
  NSString *userThumb;
} 
```

我已经阅读了 TableView 的文档，但我仍然对在 TableView 中显示数据有疑问和问题（使用此类对象似乎相当复杂）。你能帮我开始吗？谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T07:57:14.967

我猜你有一个自定义 UITableViewCell 。

只需在`cellForRowAtIndexPath`UITableView 的委托中使用（设置图像）：-

```
yourCustomCellObject.yourImageViewINCustCell.image=[UIImage imageNamed:[(yourClassToStoreData *)[yourNSMutableArray objectAtIndex:indexPath.row] userThumb]]; 
```

同样你可以用同样的方式来设置其他控制元素。

这只是你如何做的一个例子。我假设你已经将数据存储在一些类对象上并将其添加到 NSMtableArray 中。

# javascript - 使用多个值调用时，某些 mixin 参数保持不变

> ID：10733323
> 
> 赞同：0
> 
> 时间：2012-05-24T07:51:26.813
> 
> 标签：javascript, css, less

我有一个`.less`样式表，其中包含用于自定义渐变的 mixin。当我用它创建几个渐变时，所有其他浏览器的规则都很好，但`filter`旧 IE 浏览器的规则在第一次调用后不会改变。

这是一个简化的示例，我设法复制了我的问题：

```
.myGradient(@bg: rbg(255,255,255), @start: #FFFFFF, @end: #E6E6E6) {
        background: @start;
        background: -webkit-linear-gradient(top, @start 0%,@end 100%);
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=@start, endColorstr=@end,GradientType=0 );
}

.one {
        .myGradient(#ffa201,#ffa201,#ff7301);
}

.two {
        .myGradient(#aaaaaa,#aaaaaa,#cccccc);
}

.three {
        .myGradient(#ffffff,#ffffff,#000000);
} 
```

下面是生成的 CSS `lessc 1.3.0`：

```
.one {
  background: #ffa201;
  background: -webkit-linear-gradient(top, #ffa201 0%, #ff7301 100%);
  filter: progid:dximagetransform.microsoft.gradient(startColorstr=#ffa201, endColorstr=#ff7301, GradientType=0);
}
.two {
  background: #aaaaaa;
  background: -webkit-linear-gradient(top, #aaaaaa 0%, #cccccc 100%);
  filter: progid:dximagetransform.microsoft.gradient(startColorstr=#ffa201, endColorstr=#ff7301, GradientType=0);
}
.three {
  background: #ffffff;
  background: -webkit-linear-gradient(top, #ffffff 0%, #000000 100%);
  filter: progid:dximagetransform.microsoft.gradient(startColorstr=#ffa201, endColorstr=#ff7301, GradientType=0);
} 
```

如您所见，webkit 渐变效果如预期，但 IE 始终保持橙色。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T07:54:04.907

Try with:

```
filter: e(%("progid:DXImageTransform.Microsoft.Gradient(StartColorStr='%d', EndColorStr='%d', GradientType=0)",@start,@end)); 
```

# html - HTML 5 和 XHTML 1.1

> ID：10733324
> 
> 赞同：4
> 
> 时间：2012-05-24T07:51:33.007
> 
> 标签：html, xhtml

我正在学习 HTML 5 并且有一个问题：可以在 XHTML 1.1 文档中使用 HTML 5 吗？如果是，那么有人可以举个例子吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T07:53:37.273

Do not confuse XHTML and HTML.

XHTML is HTML ruled to be a valid XML document. Actually the XHTML 1.1 standard does not apply to HTML 5 but to HTML 4.01.

What does it mean? You can pick a valid XHTML 1.1 document and it'll be a valid HTML 5 document but the counter-part is not always true. For example:

```
<button disabled></button> 
```

It's valid HTML code (it doesn't matter which version) but it's not a valid XML statement (then it's not a valid XHTML document) because of the empty attribute. World is full of these examples (just Google), HTML is very relaxed about syntax (and HTML 5 didn't change this direction) and there are some other differences too ([here](https://stackoverflow.com/questions/2158303/in-xhtml-1-1-element-input-cannot-be-nested-within-element-form-why), for an example). Moreover the HTML 5 standard introduced new tags that aren't part of XHTML 1.1 standard so a *fully featured* HTML 5 document (despite the syntax) won't be a valid XHTML 1.1 document.

**References**
Here a short list of good reference about this topic, selected from SO answers:

*   [HTML/XHTML and MIME type](https://stackoverflow.com/questions/1076897/html5-syntax-html-vs-xhtml): a short answer about content type and markup syntax.
*   [All-in-one about HTML and XHTML](https://stackoverflow.com/questions/2662508/html-4-html-5-xhtml-mime-types-the-definitive-resource): a long list of QA that covers different aspects of HTML/XHTML compatibility.
*   [What to use](https://stackoverflow.com/questions/3708127/use-html-or-xhtml): a question about *what is better to use* between HTML and XHTML (of course the answer is *it depends* but the answer itself is good).
*   [XHTML/HTML for mobiles](https://stackoverflow.com/questions/1455796/mobile-html5-vs-xhtml): some nice tips about HTML5/XHTML with Apple's devices.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T07:58:30.507

理论上不会，因为xhtml和html的标准集是不同的。但是，它是否工作完全取决于您使用的浏览器，大多数现代浏览器将显示另一组标签以及您定义的标准。

# android - 视频无法从 SD 卡播放

> ID：10733325
> 
> 赞同：1
> 
> 时间：2012-05-24T07:51:33.910
> 
> 标签：android, video

我尝试从 SD 卡播放视频。这就是我尝试此代码的原因

```
public class VideoPlayActivity extends Activity {
private VideoView video;
private MediaController ctlr;

@Override
public void onCreate(Bundle icicle) {
super.onCreate(icicle);
getWindow().setFormat(PixelFormat.TRANSLUCENT);
setContentView(R.layout.main);

File clip=new File(Environment.getExternalStorageDirectory(),
                   "haha.mp4");

if (clip.exists()) {
  video=(VideoView)findViewById(R.id.video);
  video.setVideoPath(clip.getAbsolutePath());

  ctlr=new MediaController(this);
  ctlr.setMediaPlayer(video);
  video.setMediaController(ctlr);
  video.requestFocus();
  video.start();
}
}
} 
```

当我在 android 设备中运行此代码时，视频不只显示黑屏。当我断开手机并打开此项目时，视频播放。代码中的实际问题是什么？

# php - 使用mysql在某些条件下删除一行

> ID：10733326
> 
> 赞同：0
> 
> 时间：2012-05-24T07:51:42.303
> 
> 标签：php, mysql, sql

如果满足某些条件，我想在表（如下所示）获得新插入时自动删除行。

什么时候：

*   有行引用具有相同“user_id”的相同“字段”
*   它们的“字段”、“显示”和“搜索”列是相同的

简单地说，当行重复时（“group_id”列除外），非空“group_id”应该被删除，否则应该更新或插入一行。

有没有办法在 mysql 中设置它（本着“ON DUPLICATE *do stuff* ”结合唯一键等的精神），还是我必须在 php 中明确检查它（有多个查询）？

附加信息：对于每个可能的“字段”，应该总是有一行带有 NULL 的“group_id”（有一个有限的集合，在别处定义）。另一方面，可能没有一个非空“group_id”。

```
CREATE TABLE `Views` (
`user_id` SMALLINT(5) UNSIGNED NOT NULL,
`db` ENUM('db_a','db_b') NOT NULL COLLATE 'utf8_swedish_ci',
`field` VARCHAR(40) NOT NULL COLLATE 'utf8_swedish_ci',
`display` TINYINT(1) UNSIGNED NOT NULL,
`search` TINYINT(1) UNSIGNED NOT NULL,
`group_id` SMALLINT(6) UNSIGNED NULL DEFAULT NULL,
UNIQUE INDEX `user_id` (`field`, `db`, `user_id`),
INDEX `Views_ibfk_1` (`user_id`),
INDEX `group_id` (`group_id`),
CONSTRAINT `Views_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `User` (`id`) ON
UPDATE CASCADE ON DELETE CASCADE
)
COLLATE='utf8_swedish_ci'
ENGINE=InnoDB; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:11:49.900

我认为你需要修改你的逻辑。插入一行只是为了删除另一行是没有意义的。为什么不`Group_ID`将重复行中的字段更新为正在插入的内容？下面是我将如何去做的一个粗略的想法。

*注意，我没有对 MySQL 做太多工作，无法在[SQLFiddle](http://sqlfiddle.com/#!2/323ba/19)上运行以下内容，但根据[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/if-statement.html)，我无法弄清楚原因。也许更精通MySQL的人可以纠正我？*

```
SET @User_ID = 1;
SET @db = 'db_a';
SET @Field = 'Field';
SET @Display = 1;
SET @Search = 1;
SET @Group_ID = 1;

IF EXISTS
    (   SELECT  1
        FROM    Views
        WHERE   User_ID = @User_ID
        AND     DB = @DB
        AND     Field = @Field
        AND     Group_ID IS NOT NULL
    ) 
    THEN
        UPDATE  Views
        SET     Group_ID = @Group_ID,
                Display = @Display,
                Search = @Search
        WHERE   User_ID = @User_ID
        AND     DB = @DB
        AND     Field = @Field
        AND     Group_ID IS NOT NULL
ELSE
        INSERT INTO Views (User_ID, DB, Field, Display, Search, Group_ID)
        VALUES (@User_ID, @DB, @Field, @Display, @Search, @Group_ID)
END IF; 
```

或者（和我的首选解决方案），将 Timestamp 字段添加到您的表并创建一个视图，如下所示：

```
SELECT  v.User_ID, v.DB, v.Field, v.Display, v.Search, v.Group_ID
FROM    Views v
        INNER JOIN
        (   SELECT  User_ID, DB, Field, MAX(CreatedDate) AS CreatedDate
            FROM    Views
            WHERE   Group_ID IS NOT NULL
            GROUP BY User_ID, DB, Field
        ) MaxView
            ON MaxView.User_ID = v.User_ID
            AND MaxView.DB = v.DB
            AND MaxView.Field = v.Field
            AND MaxView.CreatedDate = v.CreatedDate
WHERE    v.Group_ID IS NOT NULL
UNION ALL
SELECT  v.User_ID, v.DB, v.Field, v.Display, v.Search, v.Group_ID
FROM    Views v
WHERE   v.Group_ID IS NULL 
```

这将允许您正确跟踪对数据的更改，而不会影响查看唯一记录的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:05:46.867

你的问题不是很好理解，所以我不确定这是你想要的：

```
DELETE FROM Views WHERE # delete from the table views
  group_id IS NOT NULL AND  # first condition delete only rows with not null group_id
  (SELECT count(*) as tot FROM Views GROUP BY group_id) = 1 # second condition count the difference in group id 
```

如果这不是您想要的，请用更多详细信息更新您的问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:58:35.157

从 group_id != 'NUll' 的视图中删除 group_id

# zend-framework - 在 zend 框架查询中使用连接

> ID：10733327
> 
> 赞同：0
> 
> 时间：2012-05-24T07:51:50.287
> 
> 标签：zend-framework, join

我想在zend中使用连接。以下是我的查询

```
 $select = $this->_db->select()
 ->from(array('evaluationcriteria' => 'procurement_tbltenderevaluationcriteria'),
 array('ScoringCriteriaID','ScoringCriteriaWeight'))
 ->join(array('scoringcriteria' => 'procurement_tbltenderscoringcriteria'),
                               'scoringcriteria.    TenderId=evaluationcriteria.TenderId')
 ->join(array('tenderapplications' => 'procurement_tbltenderapplications','tendersupplier' => 'tblsupplier'),
                               'tenderapplications. TenderInvitationContractorID=tendersupplier.UserID'); 
```

我在招标供应商表中有用户 ID。但它给出以下错误： -

未找到列：1054 'on 子句中的未知列'tendersupplier.UserID'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:43:26.377

where 条件不是按照您的方式编写的。

我不认为 tblsupplier 是一个表，那么它应该在一个数组中

此代码未经测试！

```
 $select = $this->_db->select()
   ->from(array('evaluationcriteria' => 'procurement_tbltenderevaluationcriteria'),
    array('ScoringCriteriaID','ScoringCriteriaWeight'))
   ->join(array('scoringcriteria' => 'procurement_tbltenderscoringcriteria'),
                           'scoringcriteria.    TenderId=evaluationcriteria.TenderId')
    ->join(array('tenderapplications' =>  'procurement_tbltenderapplications'), array('tendersupplier' => 'tblsupplier'))
    ->where('tenderapplications. TenderInvitationContractorID=tendersupplier.UserID'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:52:23.480

> 我认为在同一个连接数组中包含多个故事不是正确的方法。试试这样的代码..

```
->from(array('evaluationcriteria' => 'procurement_tbltenderevaluationcriteria'),
       array('ScoringCriteriaID','ScoringCriteriaWeight'))
->join(array('scoringcriteria' => 'procurement_tbltenderscoringcriteria'),
      'scoringcriteria.    TenderId=evaluationcriteria.TenderId')
      'scoringcriteria.    TenderId=evaluationcriteria.TenderId')
->join(array('tenderapplications' => 'procurement_tbltenderapplications'),
      'tenderapplications.TenderInvitationContractorID=tblsupplier.UserID'); 
```

> 我不确定您是否也打算加入 tblsupplier 表中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:01:53.750

看起来您正在尝试将 2 个表合二为一-> 加入，我认为您不能这样做。

从 Zend_Db_Select() 加入代码

```
/**
     * Adds a JOIN table and columns to the query.
     *
     * The $name and $cols parameters follow the same logic
     * as described in the from() method.
     *
     * @param  array|string|Zend_Db_Expr $name The table name.
     * @param  string $cond Join on this condition.
     * @param  array|string $cols The columns to select from the joined table.
     * @param  string $schema The database name to specify, if any.
     * @return Zend_Db_Select This Zend_Db_Select object.
     */
    public function join($name, $cond, $cols = self::SQL_WILDCARD, $schema = null)
    {
        return $this->joinInner($name, $cond, $cols, $schema);
    } 
```

这是 from() 的注释块

```
/**
     * Adds a FROM table and optional columns to the query.
     *
     * The first parameter $name can be a simple string, in which case the
     * correlation name is generated automatically.  If you want to specify
     * the correlation name, the first parameter must be an associative
     * array in which the key is the correlation name, and the value is
     * the physical table name.  For example, array('alias' => 'table').
     * The correlation name is prepended to all columns fetched for this
     * table.
     *
     * The second parameter can be a single string or Zend_Db_Expr object,
     * or else an array of strings or Zend_Db_Expr objects.
     *
     * The first parameter can be null or an empty string, in which case
     * no correlation name is generated or prepended to the columns named
     * in the second parameter.
     *
     * @param  array|string|Zend_Db_Expr $name The table name or an associative array
     *                                         relating correlation name to table name.
     * @param  array|string|Zend_Db_Expr $cols The columns to select from this table.
     * @param  string $schema The schema name to specify, if any.
     * @return Zend_Db_Select This Zend_Db_Select object.
     */ 
```

也许尝试这样的事情：

```
 $select = $this->_db->select()
 //FROM table procurement_tbltenderevaluationcriteria AS evaluationcriteria, SELECT FROM
 //COLUMNS ScoringCriteriaID and ScoringCriteriaWeight
 ->from(array('evaluationcriteria' => 'procurement_tbltenderevaluationcriteria'),
 array('ScoringCriteriaID','ScoringCriteriaWeight'))
 //JOIN TABLE procurement_tbltenderscoringcriteria AS scoringcriteria WHERE 
 //TenderId FROM TABLE scoringcriteria == TenderId FROM TABLE evaluationcriteria
 ->join(array('scoringcriteria' => 'procurement_tbltenderscoringcriteria'),
                 'scoringcriteria.TenderId=evaluationcriteria.TenderId')
 //JOIN TABLE procurement_tbltenderapplications AS tenderapplications
 ->join(array('tenderapplications' => 'procurement_tbltenderapplications'))
 //JOIN TABLE tblsupplier AS tendersupplier WHERE TenderInvitationContractorID FROM TABLE 
 // tenderapplications == UserID FROM TABLE tendersupplier
 ->join(array('tendersupplier' => 'tblsupplier'),
   'tenderapplications.TenderInvitationContractorID=tendersupplier.UserID'); 
```

[您可能还需要更改您的 select() 定义以允许连接](http://framework.zend.com/manual/en/zend.db.table.html#zend.db.table.advanced.usage)：

```
//this will lock the tables to prevent data corruption
$this->_db->select(Zend_Db_Table::SELECT_WITHOUT_FROM_PART)->setIntegrityCheck(FALSE); 
```

我希望我正确地阅读了您的意图，如果不是一直到那里，这应该会让您更接近。（一个提示，使用较短的别名......）

# iphone - UIpickerview 没有从 UItabbarcontroller 动画

> ID：10733336
> 
> 赞同：0
> 
> 时间：2012-05-24T07:52:23.280
> 
> 标签：iphone, objective-c, uitabbarcontroller, uipickerview

我在标签栏控制器中添加了一些视图控制器，并在视图控制器中添加了 1 个文本字段，因此当我单击文本字段时，我调用 UIactionsheet。操作表包含 2 个子部分（1\. UIpickerview 2\. UItoolbar）...我遇到了一些问题，例如当我加载 UIactionsheet 时它工作正常，但我无法选择任何行.. 或者不单击完成按钮以关闭操作表。我在这里放了一些代码..

在 tabbarcontroller.m

```
-(void)LoadActionSheet
{
    actionsheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
    actionsheet.actionSheetStyle = UIActionSheetStyleDefault;
    actionsheet.delegate = self;

}

in viewcontroller.m

-(void) Comboaction:(NSMutableArray *)DataArray     
{

  EditTabController *obj_tab = [[EditTabController alloc] init];
  [obj_tab LoadActionSheet];

  UIToolbar *Toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(100, obj_tab.actionsheet.frame.origin.y-15, 200, 44)];
  Toolbar.barStyle = UIBarStyleBlack;
  [Toolbar sizeToFit];
  [Toolbar bringSubviewToFront:obj_tab.actionsheet];

  NSMutableArray *barItems = [[NSMutableArray alloc] init];

  UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
  [barItems addObject:flexSpace];

  UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(DissmissPickerview)];
  [barItems addObject:doneBtn];
  [Toolbar setItems:barItems animated:YES];

  [obj_tab.actionsheet setBounds:CGRectMake(0, obj_tab.tbar.frame.origin.y-100, 325,40)];

  picker = [[UIPickerView alloc] init];
  [picker setFrame:CGRectZero];
  picker.tag = 101;
  picker.delegate = self;
  picker.dataSource = self;
  picker.showsSelection

  Indicator = YES;
    [picker setShowsSelectionIndicator:YES];
    [picker setBackgroundColor:[UIColor blackColor]];
   // [picker setFrame:CGRectMake(0,Toolbar.frame.size.height+1, 320, 360)]; 

    [picker bringSubviewToFront:obj_tab.actionsheet];  
    [obj_tab.actionsheet setDelegate:self];
    [obj_tab.actionsheet addSubview:Toolbar];

   [obj_tab.actionsheet addSubview:picker];
   [obj_tab.actionsheet setBounds:CGRectMake(0, 0, 320, 50)];

   [obj_tab.actionsheet showInView:[UIApplication sharedApplication].keyWindow];

} 
```

和所有pickerview委托方法..它在简单的视图控制器中工作正常。但在 tabbarcontroller 中无法正常工作..

# html - 不要记住浏览器中的密码

> ID：10733338
> 
> 赞同：-1
> 
> 时间：2012-05-24T07:52:42.657
> 
> 标签：html, autocomplete, passwords

> **可能重复：**
> [禁用浏览器“保存密码”功能](https://stackoverflow.com/questions/32369/disable-browser-save-password-functionality)

许多用户将使用共享计算机登录我的网络应用程序。现在，我非常支持让浏览者控制他们如何使用我的应用程序，但在这种情况下，我发现用户没有机会保存密码很重要。这些人不精通技术，他们保存密码的机会很大，甚至可以在他们不知情的情况下访问他们的帐户。

我知道一个配置得当的公共机器不应该允许保存用户名或密码，但这不在我的控制之下。我也知道`<input autocomplete="off" />`，但这仅适用于某些浏览器（例如，不是 firefox）。

有没有办法在大多数（如果不是全部）浏览器中启用“记住密码”功能？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-24T08:02:57.260

输入语句的自动完成是我知道的唯一选项。您可以做的是编写一个 Javascript 函数，该函数将检索所有输入语句并添加属性 autocomplete off。

jQuery是：

```
$('input').attr('autocomplete','off'); 
```

# java - 条形图工具提示

> ID：10733339
> 
> 赞同：0
> 
> 时间：2012-05-24T07:52:51.057
> 
> 标签：java, spring-mvc, jfreechart

我使用 Jfreechart 1.0.13 使用 spring mvc 生成条形图。我在用

```
ChartUtilities.writeChartAsJPEG(response.getOutputStream(), jfreechart1, 400, 400); 
```

在浏览器中显示图像。我在哪里可以设置工具提示？

我尝试了以下方法，但它不起作用：

```
 CategoryPlot categoryplot = (CategoryPlot) jfreechart.getPlot();
 BarRenderer barrenderer = (BarRenderer) categoryplot.getRenderer();
 barrenderer.setBaseToolTipGenerator(new StandardCategoryToolTipGenerator());
 final ChartRenderingInfo info = new ChartRenderingInfo(new StandardEntityCollection()); 
```

我正在使用 jsp 将图表呈现为图像。当我使用图表框架显示图形时会显示工具提示，但不是 Web 应用程序。谁能建议我如何解决这个问题？

# c# - 通过 System.Linq 获取 C# 中元素的属性名称和值

> ID：10733342
> 
> 赞同：8
> 
> 时间：2012-05-24T07:53:14.723
> 
> 标签：c#, xml, linq, linq-to-xml

我有一个自定义配置文件。

```
<Students>
 <student>
   <Detail Name="abc" Class="1st Year">
       <add key="Main" value="web"/>
       <add key="Optional" value="database"/>
   </Detail>
 </student>
</Students> 
```

我通过 IConfigurationHandler 接口实现读取了这个文件。当我阅读 Detail 元素的 childNode 属性时。它将下面的结果返回到 IDE 的即时窗口中。

```
elem.Attributes.ToObjectArray()

{object[2]}
    [0]: {Attribute, Name="key", Value="Main"}
    [1]: {Attribute, Name="value", Value="web"} 
```

当我尝试在控制台上写

```
 Console.WriteLine("Value '{0}'",elem.Attributes.ToObjectArray()); 
```

它确实返回了我

```
Value : 'System.Configuration.ConfigXmlAttribute' 
```

`elem.Attributes.Item(1)`方法给了我名称和值的详细信息，但在这里我需要传递我目前不知道的属性的索引值。

我想通过**LINQ 查询**获取属性的名称和值，并在控制台上为每个 childNode 属性单独显示如下：

```
Value : Name="Key" and Value="Main"
        Name="value", Value="web" 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:06:49.370

您可以使用 Linq *Select*和*string.Join*来获得所需的输出。

```
string.Join(Environment.NewLine, 
    elem.Attributes.ToObjectArray()
        .Select(a => "Name=" + a.Name + ", Value=" + a.Value)
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T20:38:29.377

如果您想使用这个[Xml 库](https://github.com/ChuckSavage/XmlLib/)，您可以使用以下代码获取所有学生及其详细信息：

```
XElement root = XElement.Load(file); // or .Parse(string)
var students = root.Elements("student").Select(s => new
{
    Name = s.Get("Detail/Name", string.Empty),
    Class = s.Get("Detail/Class", string.Empty),
    Items = s.GetElements("Detail/add").Select(add => new
    {
        Key = add.Get("key", string.Empty),
        Value = add.Get("value", string.Empty)
    }).ToArray()
}).ToArray(); 
```

然后迭代它们使用：

```
foreach(var student in students)
{
    Console.WriteLine(string.Format("{0}: {1}", student.Name, student.Class));
    foreach(var item in student.Items)
        Console.WriteLine(string.Format("  Key: {0}, Value: {1}", item.Key, item.Value));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T02:06:31.370

正如您在问题中所述，这将获得 Detail 元素的子元素的所有属性。

```
XDocument x = XDocument.Parse("<Students> <student> <Detail Name=\"abc\" Class=\"1st Year\"> <add key=\"Main\" value=\"web\"/> <add key=\"Optional\" value=\"database\"/> </Detail> </student> </Students>");

var attributes = x.Descendants("Detail")
                  .Elements()
                  .Attributes()
                  .Select(d => new { Name = d.Name, Value = d.Value }).ToArray();

foreach (var attribute in attributes)
{
     Console.WriteLine(string.Format("Name={0}, Value={1}", attribute.Name, attribute.Value));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T12:22:20.263

如果你在写的时候有**属性**`object[]`，可以通过

```
var Attributes = new object[]{
    new {Name="key", Value="Main"},
    new {Name="value", Value="web"}
}; 
```

那么问题是您有**匿名类型**，其名称无法轻松提取。

看一下这段代码（你可以将它粘贴到 LinqPad 编辑器窗口的 main() 方法中来执行它）：

```
var linq=from a in Attributes
let s = string.Join(",",a).TrimStart('{').TrimEnd('}').Split(',')
select new 
{
    Value = s[0].Split('=')[1].Trim(),
    Name = s[1].Split('=')[1].Trim()
};
//linq.Dump(); 
```

由于您无法访问**object[]**数组中的变量**Attributes**的 Name 和 Value 属性，因为编译器对您隐藏了它们，因此这里的诀窍是使用**Join(",", a)**方法来绕过这个限制。

 ****之后您需要做的就是**修剪**和**拆分**生成的字符串，最后创建一个具有**Value**和**Name**属性的新对象。**如果您取消注释linq.Dump();，**您可以尝试一下。LinqPad 中的行 - 它返回您想要的内容，并且可以通过 Linq 语句查询。****

# ruby-on-rails - Inserting line break between visualized database entries when printed in index

> ID：10733346
> 
> 赞同：1
> 
> 时间：2012-05-24T07:53:27.837
> 
> 标签：ruby-on-rails, ruby

I'm building a small app where a user can make entries into a text box, press enter and then the string they entered will be recorded in a section below the text box.

The things the person enters, called `Lessons` are displayed in the bottom of the page with the following code.

```
<% @allLessons.each do |lesson| %> 
    <tr>
        <td class="my-lessons">
            <b><%= lesson.content %></b> – <%= lesson.created_at.strftime("%b %d, %Y") %>
            <br />
        </td>
    </tr>
    <% end %> 
```

I'm trying to write something that looks at the date of each lesson and if that date is greater than the previous day's date, it inserts a line break between the outputted entries.

I'm very puzzled on how to do this. Would it be best to do all embedded Ruby in `home.html.erb` or use the `pages controller` to help out here as well?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:30:30.970

为了扩展前面的答案，假设和都是正确的 Time 对象，类似的东西`lesson.created_at.strftime("%Y%m%d").to_i > previous_lesson_date.strftime("%Y%m%d).to_i`可以解决上述问题。`lesson.created_at``previous_lesson_date`

可能有一个更直接的解决方案可以更好地利用 Time 对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T14:13:17.910

就像是：

```
<% @allLessons.each do |lesson| %>
  <% previous_lesson_date = lesson.created_at %>
    <tr>
        <td class="my-lessons">
            <b><%= lesson.content %></b> – <%= lesson.created_at.strftime("%b %d, %Y") %>
            <% if lesson.created_at > previous_lesson_date %>
              <br />
            <% end %>
        </td>
    </tr>
<% end %> 
```

是字面上的答案。由于当前课程几乎总是有一个更大的日期（因为它将在几秒钟后创建）。我认为你可能需要使用 Rails 日期函数来获得你真正想要的东西。

# android - How can I get screenshot real device in Intellj?

> ID：10733356
> 
> 赞同：2
> 
> 时间：2012-05-24T07:54:09.450
> 
> 标签：android, intellij-idea

Is somebody using intellj in android projects here? I want to get screenshot realdevice in debug mode my android projects.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T07:59:44.237

从终端或命令行启动 DDMS。选择设备并转到设备 -> 屏幕截图

DDMS 位于 Android SDK 安装路径的 tools 目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:05:11.883

我不知道在 IntelliJ 中，但在 Eclipse 之外你仍然可以截屏。使用 SDK。

```
 /path/to/android-sdk/tools/ 
```

并打开

```
 ddms 
```

小路：

![在此处输入图像描述](../Images/46fe9d09a705363c927eb5dd4c344448.png)

然后，您可以截屏：

![使用 DDMS 的屏幕截图](../Images/a03267953155958cb1bbc00abb0bc158.png)

参考：

[http://developer.android.com/guide/developing/debugging/index.html#tips](http://developer.android.com/guide/developing/debugging/index.html#tips)

# node.js - Node.js and protocol buffers - How to parse a PB from a post

> ID：10733359
> 
> 赞同：2
> 
> 时间：2012-05-24T07:54:53.177
> 
> 标签：node.js, protocol-buffers

I load by PB schema as follows:

```
var Schema = require('protobuf').Schema;
var schema = new Schema(fs.readFileSync('/home/ubuntu/workspace/test.desc')); 
```

Then for a post I expect a pb, I have the following.

```
 app.post('/mypost', function(req, res){

        var Feed = schema['MyRequest'];
        var aFeed = Feed.parse(req.body);
        var serialized = Feed.serialize(aFeed);

   }); 
```

I am rather new to node.js and also getting post data. is the req.body the buffer from the post data?

```
TypeError: Argument should be a buffer
    at Function.parse (unknown source)
    at /home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/bidder.js:71:22
    at callbacks (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/lib/router/index.js:272:11)
    at param (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/lib/router/index.js:246:11)
    at pass (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/lib/router/index.js:253:5)
    at Router._dispatch (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/lib/router/index.js:280:4)
    at Object.handle (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/lib/router/index.js:45:10)
    at next (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/node_modules/connect/lib/http.js:204:15)
    at Object.methodOverride [as handle] (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/node_modules/connect/lib/middleware/methodOverride.js:35:5)
    at next (/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbNodejsServer/node_modules/express/node_modules/connect/lib/http.js:204:15) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T10:59:15.513

使用 nodejs 在 http 中寻找简单请求响应处理的具体示例。这应该可以帮助您进入解析步骤。 [http://nodejs.org/api/all.html#all_class_http_serverrequest](http://nodejs.org/api/all.html#all_class_http_serverrequest) [http://nodejs.org/api/http.html#http_event_data](http://nodejs.org/api/http.html#http_event_data)

例子：

```
var options = {
  host: 'www.google.com',
  port: 80,
  path: '/upload',
  method: 'POST'
};

var req = http.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

// write data to request body
req.write('data\n');
req.write('data\n');
req.end(); 
```

示例请参阅此答案中对请求和响应的解释 [https://stackoverflow.com/a/4696338/51700](https://stackoverflow.com/a/4696338/51700)

另一个带有 cookie 的示例 [https://stackoverflow.com/a/4581610/51700](https://stackoverflow.com/a/4581610/51700)

# ruby-on-rails-3 - Rails autoload has_one relation

> ID：10733365
> 
> 赞同：1
> 
> 时间：2012-05-24T07:55:49.643
> 
> 标签：ruby-on-rails-3

I have models Order and OrderItem. I'd like to autoload the Items once an order is loaded. Something like this:

```
class Order < ActiveRecord::Base
  has_many :order_items, :include => true
end 
```

or

```
class Order < ActiveRecord::Base
  include :order_items
  has_many: order_items
end 
```

I'm sure that I have seen something like that but I can't find it anymore.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:54:46.813

您可以像这样使用 default_scope：

```
class Order < ActiveRecord::Base
  has_many :order_items

  default_scope includes(:order_items)
end 
```

`:include`定义中`has_many :order_items`用于预先加载二阶关联，即定义在`OrderItems`.

# javascript - 如何全局处理fancybox的onClose事件？

> ID：10733373
> 
> 赞同：7
> 
> 时间：2012-05-24T07:56:39.877
> 
> 标签：javascript, jquery, fancybox

我在我的应用程序中使用 Fancybox。现在要处理关闭事件，我们编写如下内容：

```
$(".fancybox").fancybox({onClose:function(){alert('blah');}} 
```

如本文档页面所示：

[http://fancyapps.com/fancybox/#docs](http://fancyapps.com/fancybox/#docs)

但是，我想为所有花式盒编写一些通用和全局的东西，每次都可以为任何花式盒运行。我怎么做？简而言之，我不想在每个fancybox 上编写onClose 的代码，也不希望它依赖于class,id（例如`.fancybox`在这种情况下）。我怎么做？我试着写：

```
$.fancybox({onClose:function(){alert('blah');}} 
```

但它不起作用，从文档看来这是以编程方式打开的功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T08:05:56.917

我不确定这是否是最好的解决方案，但我会选择 pub/sub 模式，所以在你的幻想箱中你应该做类似的事情。

```
$( ".fancybox" ).fancybox( {
    onClose: function () {
        $( window ).trigger( 'fancyboxClosed' );
    }
} ); 
```

然后，在您的代码中的某处：

```
$( window ).on( 'fancyboxClosed', function () {
    // Your global function for fancybox closed
} ); 
```

我不太了解您的目的，但请记住，您始终可以传递命名函数而不是匿名函数，因此您始终会触发相同的函数。

如果你想根据每个fancybox制作不同的东西，上面的例子应该是要走的路。

此外，您可以将事件附加到您想要的任何对象。只是为了方便而使用了窗口。

**编辑**

你也可以编辑你的fancybox源来做到这一点（编辑1.3.4）只需添加`$(window).trigger('fancyboxClosed');`到953行左右。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T07:50:35.877

尝试使用方法

> beforeClose 或 afterClose

此代码工作正常

```
$(".fancybox").fancybox({beforeClose:function(){alert('blah');}} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T08:07:25.000

据我所知，Fancybox 没有为此提供任何 API。您可以改为使用 hack。灯箱在以下情况下关闭：

1.  单击关闭按钮（带有“fancybox-close”类的 div）
2.  单击黑色背景（带有“fancybox-overlay”类的 div）
3.  按下退出按钮（e.which = 27）

因此，您可以向 body 添加一个点击处理程序来检查 event.target 是 .fancybox-close 还是 .fancybox-overlay。还要在文档中添加一个 keydown 处理程序以侦听是否按下了转义键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T06:45:02.467

这是 1.3.4 的一个不错的解决方案

```
$(document).delegate('#fancybox-close,#fancybox-overlay','click',function(){
    FancyBoxClosed(); 
});
$(document).keyup(function(e){
    if(e.keyCode == 27){
        if($('#fancybox-overlay').css('display') != 'none')
            FancyBoxClosed();
    }
});

function FancyBoxClosed()
{
    //global callback for fancybox closed
} 
```

对于 1.3.4 以外的版本，请使用蜻蜓、萤火虫或其他方式仔细检查 fancybox 元素选择器的覆盖和关闭按钮。

# c# - Dispatch.BeginInvoke 我做错了什么？

> ID：10733377
> 
> 赞同：0
> 
> 时间：2012-05-24T07:57:13.643
> 
> 标签：c#, wpf, asynchronous, delegates, dispatcher

我有一个包含 QueryData 方法的 ViewModel：

```
void QueryData() {
    _dataService.GetData((item, error) =>
    {
        if(error != null)
            return;
        Dispatcher.CurrentDispatcher.BeginInvoke(new Action(() =>
        {
            foreach(TimeData d in ((LineDetailData)item).Piecesproduced) {
                Produced.Add(d);
            }
        }), DispatcherPriority.Send);
    });
} 
```

此方法每 10 秒从 timer_Tick 事件处理程序中调用一次。然后异步查询数据，然后执行回调。在那里，查询的数据应该被插入到一个可观察的集合中（不是 STA 线程 -> 开始调用）。它正确地进入了回调，但是 Dispatcher.CurrentDispatcher.BeginInvoke 里面的代码没有被执行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T20:24:51.707

这不起作用，因为您正在调用`Dispatcher.CurrentDispatcher`在不同线程上运行的方法内。这不是`Dispatcher`你要找的。

相反，您应该在调用方法之前将局部变量设置为当前变量`Dispatcher`，然后它将为您提升到您的 lambda 中：

```
void QueryData() 
{
    var dispatcher = Dispatcher.CurrentDispatcher;
    _dataService.GetData((item, error) =>
    {
        if(error != null)
            return;
        dispatcher.BeginInvoke(new Action(() =>
        {
            foreach(TimeData d in ((LineDetailData)item).Piecesproduced) {
                Produced.Add(d);
            }
        }), DispatcherPriority.Send);
    });
} 
```

# mongoid - mongoid 包含软删除的文档

> ID：10733386
> 
> 赞同：2
> 
> 时间：2012-05-24T07:57:36.750
> 
> 标签：mongoid, document, soft-delete

Mongoid 支持软删除

```
include Mongoid::Paranoia 
```

假设我已经从其中一个集合中软删除了一个文档。

现在我需要一个包含该集合中软删除文档的查询。

我怎样才能做到这一点？

我需要为此制定一个单独的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-24T11:31:21.617

您可以通过查询找到所有已删除的文档

```
 Model.deleted 
```

如果您想查找具有特定条件的已删除文档，那么

```
 Model.deleted.where(:field => value) 
```

# spotify - 播放列表空值返回

> ID：10733390
> 
> 赞同：2
> 
> 时间：2012-05-24T07:57:51.240
> 
> 标签：spotify

我仍在开发 Spotify 应用程序，但我认为 API 中存在一些错误，他们将其报告为我的错误。

然后我使用“从播放列表 URL 获取歌曲”功能使用教程应用程序进行测试，它们在教程中也使用这样的回调函数

```
var pl = models.Playlist.fromURI(playlist_url, function(playlist) 
```

但即使在第一次加载时使用回调函数，也会有一些空值。

使用我自己的播放列表时，我没有问题，但使用其他用户的播放列表时，我遇到了问题。

![截屏](../Images/b62a07da2e201dfb33a446ade3371ad0.png)

有没有其他人得到这个问题？有没有办法报告 API 错误？

对于那些想要测试我的播放列表的人：http: [//open.spotify.com/user/gpsnail/playlist/6qhk1FhYKwyanNAu91GftW](http://open.spotify.com/user/gpsnail/playlist/6qhk1FhYKwyanNAu91GftW)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T20:03:48.957

不再支持 Spotify Apps API 0.X。可能存在错误并且数据在实际获取之前就已被渲染。我建议您使用更新版本的 API，您可以在其中获取播放列表的内容：

```
 require(['$api/models'], function(models) {

      var playlistURI = 'spotify:user:gpsnail:playlist:6qhk1FhYKwyanNAu91GftW';

      models.Playlist.fromURI(playlistURI)
        .load('tracks')
        .done(function(p) {
            p.tracks.snapshot()
            .done(
                function(snapshot) {
                    for (var i = 0, l = snapshot.length; i < l; i++) {
                       var track = snapshot.get(i);

                       // we print out some basic data from the track       
                       console.log(track.uri, track.name);
                    }
                })
            .fail(
                function(){
                    console.error('Error retrieving snapshot');
                });
        })
        .fail(function(){
            console.error('Error retrieving playlist information');
        });
    }); 
```

有更多关于如何升级到[升级指南](https://developer.spotify.com/technologies/apps/upgrade-guide/1.0.0)的信息。

# ruby - 如何在 ruby 中获得 2 个日期周期的中间周期？

> ID：10733391
> 
> 赞同：0
> 
> 时间：2012-05-24T07:57:53.877
> 
> 标签：ruby

c 应该是 2 个周期的内部周期。如何以最优雅的方式获得它？

```
a1=Date.current
a2=Date.current + 2.months

b1=Date.current + 1.month
b2=Date.current + 3.months

c=???

c.should_be [Date.current + 1.month, Date.current + 2.months] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:14:18.053

赶紧实施：

```
xs = (a1..a2).to_a & (b1..b2).to_a
(xs.first..xs.last)
# => Sun, 24 Jun 2012..Tue, 24 Jul 2012 
```

日期范围没有什么特别之处。因此，搜索“范围交点”以更有效地执行此操作（例如[此处](https://stackoverflow.com/questions/8414547/ruby-intersection-between-two-ranges)）。现在你可以写：

```
(a1..a2) & (b1..b2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:23:58.287

```
d= [a1, a2, b1, b2]
[*1..d.length/ 2].map do |dt| 
    d.shift(2) 
end.map do |dx| 
    Date.current+ (dx[1]- dx[0]) 
end 
```

[2012 年 6 月 24 日星期日，2012 年 7 月 24 日星期二]

# oauth - 如何在 scribe 中使用访问令牌获取刷新令牌

> ID：10733393
> 
> 赞同：0
> 
> 时间：2012-05-24T07:57:56.137
> 
> 标签：oauth, scribe

我现在有了访问令牌，我想拥有刷新令牌，以便我可以在需要时刷新我的访问令牌。我使用了休闲代码，但它返回了错误响应

```
 **OAuthRequest request = new OAuthRequest(Verb.POST, "https://accounts.google.com/o/oauth2/token");
    request.addBodyParameter("grant_type", "refresh_token");
    request.addBodyParameter("refresh_token", "accesstoken string"); 

    request.send();** 
```

任何想法如何获得刷新令牌？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-24T12:34:36.857

您可以使用以下代码执行此操作

```
OAuthRequest request = new OAuthRequest(Verb.POST, "https://accounts.google.com/o/oauth2/token");
    request.addBodyParameter("grant_type", "refresh_token");
    request.addBodyParameter("refresh_token", accessToken.getToken()); // were accessToken is the Token object you want to refresh.
    request.addBodyParameter("client_id", your clientID);
    request.addBodyParameter("client_secret", your clientSecret);
    Response response = request.send(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:27:54.580

[如https://developers.google.com/accounts/docs/OAuth2WebServer#offline](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)中所述，在离线场景中获取刷新令牌 确保 access_type 为“离线”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-17T06:29:19.597

实际上，Scribe 不会让您获得刷新令牌。我必须对其进行自定义以使其成为可能，我这样做是因为我别无选择，即使该库的所有者（Jerome Leleu）也没有进行维护，他正在使用一个名为 Pac4j 的新版本。

# jquery-selectors - 如何使用 jquery 选择器来选择这样的元素？

> ID：10733395
> 
> 赞同：0
> 
> 时间：2012-05-24T07:58:06.733
> 
> 标签：jquery-selectors, parent

假设我有一个这样的 html 标记：

```
<div>
    <p>
       this is the parent
       <p>
          this the child
       </p>
    </p>
    <p>
       this is the parent
       <p>
          this the child
          <p>this is third child</p>
       </p>
    </p>
</div> 
```

在 div 我有五个`<p>`标签，但我只想使用 jquery 选择器来选择没有类和 id 名称的两个顶级父 p 标签

有可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:00:24.530

当然，只是做

```
$('div').children('p) 
```

children 只选择元素的直接子元素。不要忘记为您的 div 设置一个 id ......

# c# - 泛型类型参数，泛型枚举返回类型

> ID：10733396
> 
> 赞同：1
> 
> 时间：2012-05-24T07:58:13.813
> 
> 标签：c#, generics

我有一个具有通用返回类型的函数。如果 value 参数是有效的枚举值，则该方法返回相关的枚举值。

如何返回相关的枚举值？编译器错误：无法转换类型“int？” 到“T”

```
public static T? GetEnumValue<T>(int? value)
{
    if (value == null)
    {
        return null;
    }

    try
    {
        var enumValues = Enum.GetValues(typeof(T));

        foreach (object enumValue in enumValues)
        {
            if (Convert.ToInt32(enumValue).Equals(value))
            {
                // ERROR: Cannot convert type 'int?' to 'T'
                return (T)value;
            }
        }
    }
    catch (ArgumentNullException)
    {
    }
    catch (ArgumentException)
    {
    }
    catch
    {
    }

    return null;
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:07:33.610

使用[Enum.ToObject](http://msdn.microsoft.com/en-us/library/ksbe1e7h)方法而不是使用`Convert`类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:25:16.927

三个变化使它对我有用。将返回类型更改为 Nullabel 并添加 where T : struct （摘自[https://stackoverflow.com/a/209219/455904](https://stackoverflow.com/a/209219/455904)）并将中间的返回更改为返回 enumValue。

```
 public static Nullable<T> GetEnumValue<T>(int? value) 
        where T : struct
    {
        if (value == null)
        {
            return null;
        }

        try
        {
            var enumValues = Enum.GetValues(typeof(T));

            foreach (object enumValue in enumValues)
            {
                if (Convert.ToInt32(enumValue).Equals(value))
                {
                    return (T)enumValue;
                }
            }
        }
        catch (ArgumentNullException)
        {
        }
        catch (ArgumentException)
        {
        }
        catch
        {
        }

        return null;
    } 
```

# sql - 从 SQL 中选择数据而不返回列标题

> ID：10733398
> 
> 赞同：0
> 
> 时间：2012-05-24T07:58:33.453
> 
> 标签：sql, sql-server, vba

我正在使用 vba 从 excel 查询一个 SQL db，一切正常，但它也返回并在 excel 表中显示 SQL 列标题。像这样：

```
AssetTag    Machine Name    UserName    Current Site    Run Count   Defered
AssetTag    MachineName     UserName    CurrentSite     RunCount    DeferCount
B33CWM1     QRLXPB33CWM1    admin-03         QR           255          3 
```

有没有办法让 VBA 不显示 SQL 列标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:29:17.897

如果使用 ADO 创建记录集，则可以在 Excel 中使用 CopyFromRecordset。这不包括标题。

```
Worksheets("Sheet3").Cells(2, 1).CopyFromRecordset rs 
```

# blackberry - 在从中删除记录时刷新表模型适配器：黑莓

> ID：10733403
> 
> 赞同：0
> 
> 时间：2012-05-24T07:58:49.837
> 
> 标签：blackberry, blackberry-eclipse-plugin

我正在黑莓中创建一个表模型适配器。（*******这是我正在做的一个示例*****）我添加了按钮字段和两个字符串。我将数据从向量中放入字符串中。现在点击按钮我想删除对按钮的行。单击按钮时，数据已从数据库中删除，但未从屏幕视图中删除。当我调用 Retrieve() 函数来调用更新的数据库并再次绘制表模型适配器时......它正在添加新表低于旧表....不刷新它。是否有任何解决方案可以在同一个表中显示刷新的数据。

```
 package mypackage;

   import java.util.Vector;
   import net.rim.device.api.system.Display;
   import net.rim.device.api.ui.Color;
   import net.rim.device.api.ui.Field;
   import net.rim.device.api.ui.FieldChangeListener;
   import net.rim.device.api.ui.Manager;
   import net.rim.device.api.ui.XYRect;
   import net.rim.device.api.ui.component.ButtonField;
   import net.rim.device.api.ui.component.LabelField;
   import net.rim.device.api.ui.component.table.DataTemplate;
   import net.rim.device.api.ui.component.table.TableController;
   import net.rim.device.api.ui.component.table.TableModelAdapter;
   import net.rim.device.api.ui.component.table.TableView;
   import net.rim.device.api.ui.component.table.TemplateColumnProperties;
   import net.rim.device.api.ui.component.table.TemplateRowProperties;
   import net.rim.device.api.ui.container.MainScreen;
   import net.rim.device.api.ui.decor.BackgroundFactory;

  public final class MyScreen extends MainScreen implements FieldChangeListener 
 {
private DeviceTableModelAdapter _tableModel;
private Vector _cities;
private static final int NUM_ROWS = 1;
    private static final int ROW_HEIGHT = 50;
    private static final int NUM_COLUMNS = 3;
    public ButtonField btn;

   public MyScreen(){
    super(Manager.NO_VERTICAL_SCROLL);

    _cities = new Vector();
    _tableModel = new DeviceTableModelAdapter();

    Vector sample =new Vector();
    sample.addElement("Newyork");
    sample.addElement("NewDelhi");
    sample.addElement("NewOrleans");
    int ik = 0;
       while(ik < sample.size())
       {
           String modelNumber = sample.elementAt(ik).toString();
           String modelName = "-Earth-";
           String ne = String.valueOf(ik);
           Object[] row = {modelName, modelNumber, ne};
           _tableModel.addRow(row);
           ik++;
       }

     TableView tableView = new TableView(_tableModel);
         tableView.setDataTemplateFocus(BackgroundFactory.createLinearGradientBackground(Color.WHITE, Color.WHITE, Color.BLUEVIOLET, Color.BLUEVIOLET));
     TableController tableController = new TableController(_tableModel, tableView);
     tableController.setFocusPolicy(TableController.ROW_FOCUS);
     tableView.setController(tableController);

     // Specify a simple data template for displaying 3 columns
     DataTemplate dataTemplate = new DataTemplate(tableView, NUM_ROWS, NUM_COLUMNS)
     {
         public Field[] getDataFields(int modelRowIndex)
         {
             Object[] data = (Object[]) (_tableModel.getRow(modelRowIndex));
             Field[] fields = {getButtonFieldObject((String)data[0]), new LabelField((String) data[1]), new LabelField((String) data[2])};
             return fields;
         }
     };

     dataTemplate.useFixedHeight(true);
     // Define regions and row height
     dataTemplate.setRowProperties(0, new TemplateRowProperties(ROW_HEIGHT));

     for(int i = 0; i < NUM_COLUMNS; i++)
     {
         dataTemplate.createRegion(new XYRect(i, 0, 1, 1));
         dataTemplate.setColumnProperties(i, new TemplateColumnProperties(Display.getWidth() / NUM_COLUMNS));
     }
     // Apply the template to the view

     tableView.setDataTemplate(dataTemplate);

     add(tableView);
}
public void fieldChanged(Field arg0, int arg1) {

/***    tableView.DeleteAll();  ****/

   /**** calling Class again to draw the table Modal Adapter again with updated value *******/

}
private final static class City
{
    private String _name;
    private String _region;
    private String _image;
    City(String name, String region, String image)
    {
        _name = name;
        _region = region;
        _image = image;
    }

    public String getName()
    {
        return _name;
    }
    public String getRegion()
    {
        return _region;
    }
    public String getImage()
    {
        return _image;
    }
}

 private class DeviceTableModelAdapter extends TableModelAdapter
    {
        public int getNumberOfRows()
        {
            return _cities.size();
        }
        public int getNumberOfColumns()
        {
            return NUM_COLUMNS;
        }
        protected boolean doAddRow(Object row)
        {
            Object[] arrayRow = (Object[]) row;
            _cities.addElement(new City((String) arrayRow[0], (String) arrayRow[1], (String) arrayRow[2]));
            return true;
        }
        protected Object doGetRow(int index)
        {
            City city = (City) _cities.elementAt(index);

            Object[] row = {city.getImage(), city.getRegion(), city.getName()};

            return row;

        }

    }
 public ButtonField getButtonFieldObject(String arg){

     btn = new ButtonField(arg,ButtonField.CONSUME_CLICK);
     btn.setChangeListener(this);
     return btn;
 }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:48:38.720

您需要考虑的是 Blackberry 表格 UI 遵循 MVC 设计模式这一事实。所以这意味着数据在模型中被更新。

例如：

```
Object yes = (Object)"Yes";
// gets the Model attached to this View
TableModel tm = (TableModel)view.getModel();
// updates the data attached to the row 
tm.setElement(rowIndex, columnIndex, yes); 
tm.modelReset(); 
```

# android - 如何删除 sqlite 中显示 sqlite 返回的错误：错误代码 = 1，msg = 没有这样的表：DetailsCustomer，

> ID：10733404
> 
> 赞同：-1
> 
> 时间：2012-05-24T07:58:50.857
> 
> 标签：android, sqlite

我正在使用 DBAdapter 插入数据库，但是当我执行时它给了我一个错误。请帮助我这里是我的代码如下：

公共类 DBAdapter {

```
 public static final String COLUMN_ID = "ID";
    public static final String COLUMN_NAME = "NAME";
    public static final String COLUMN_SURNAME = "SURNAME";
    public static final String COLUMN_DATE_OF_BIRTH = "DateOfBirth";
    public static final String COLUMN_ADDRESS = "HomeAddress";
    public static final String COLUMN_EMAIL = "EmailNO";
    public static final String COLUMN_PHONE_NUMBER = "PhoneNumber";
    public static final String COLUMN_CITY = "City";
    public static final String COLUMN_PTYE_PAYMENT = "TypePayment";
    public static final String COLUMN_SHIPPING_TYPE = "ShippingType";
    public static final String COLUMN_CARD_NUMBER = "CardNumber";
    public static final String COLUMN_Password = "Passwords";       
    public static final String TAG = "DBAdapter";

 static final String DATABASE_NAME = "SuperComputers.db";
    static final String USERS_TABLE = "DetailsCustomer";
    static final int DATABASE_VERSION = 3;

private final Context context;

private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter (Context ctx) 
{
    this.context=ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper

{
    DatabaseHelper(Context context) {

super (context,DATABASE_NAME,null,DATABASE_VERSION);

    }

@Override
 public void onCreate(SQLiteDatabase db)
{
    try {
          //db.execSQL(DATABASE_CREATE);        
         db.execSQL("CREATE TABLE "+ USERS_TABLE  + 

 "("+ COLUMN_ID  + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    COLUMN_NAME  + " TEXT, " + COLUMN_SURNAME  +" TEXT, " +COLUMN_DATE_OF_BIRTH+
                       " TEXT NOT NULL, " + COLUMN_ADDRESS  + " TEXT, "  + COLUMN_EMAIL  + " TEXT, " + 

                   COLUMN_PHONE_NUMBER + " TEXT, " + COLUMN_CITY + " TEXT, " +  COLUMN_PTYE_PAYMENT  + " TEXT, "  +  COLUMN_CARD_NUMBER  + " TEXT, " + COLUMN_Password +" TEXT)");

} 
```

catch (SQLException e) { e.printStackTrace();

```
 }
}
@Override
 public void onUpgrade(SQLiteDatabase db, int oldVersion , int newVesion) {

    Log.w(TAG, "Upgrading database from version " + oldVersion + "to"
            + newVesion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS USERS_TABLE ");
    onCreate(db);

   } 
 } 
```

我需要将信息插入数据库，但由于错误而无法插入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:06:43.567

您的常量`USERS_TABLE`需要在双引号之外，否则它会被视为您的字符串参数的一部分。所以应该是：

```
db.execSQL("DROP TABLE IF EXISTS " + USERS_TABLE); 
```

# openjpa - 如何配置 OpenJPA SQL 日志记录？

> ID：10733408
> 
> 赞同：12
> 
> 时间：2012-05-24T07:59:05.483
> 
> 标签：openjpa

查看在数据库中执行的 SQL 查询的 OpenJPA 配置是什么？我想查看在日志或控制台中执行的所有参数的查询，而不是查看 JPQL 查询

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-24T12:38:18.917

```
<property name="openjpa.Log" value="SQL=Trace" /> 
```

启用所有 SQL 语句的日志记录，减去参数值。

```
<property name="openjpa.ConnectionFactoryProperties" value="PrintParameters=true" /> 
```

启用 SQL 参数的日志记录。

[记录文档](http://openjpa.apache.org/builds/latest/docs/docbook/manual.html#ref_guide_logging)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T17:06:53.813

如果您使用的是 log4j，您可以按如下方式设置 log4j.properties 文件，该文件将显示本机 SQL 查询和任何参数：

```
log4j.rootLogger=WARN, CONSOLE

log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=%-5p %t %d{ISO8601} %l - %m%n

log4j.category.openjpa.jdbc.SQL=TRACE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T06:06:10.403

要为 Log4J 配置 Open JPA，需要在持久化 xml 中执行以下操作

打开 JPA 配置 {'property name=”openJpa.Log” value=”log4j”'}

Open JPA 配置的 Log4j 属性

log4j.logger.openjpa.Query=TRACE log4j.logger.openjpa.jdbc.SQL=TRACE

[http://openjpa.apache.org/builds/1.0.1/apache-openjpa-1.0.1/docs/manual/ref_guide_logging_log4j.html](http://openjpa.apache.org/builds/1.0.1/apache-openjpa-1.0.1/docs/manual/ref_guide_logging_log4j.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-11T10:41:31.603

除了 Rick 的回答之外，还有用于非托管连接的连接工厂的“openjpa.ConnectionFactory2Properties”属性。（更多细节在这里：[https](https://openjpa.apache.org/builds/1.2.3/apache-openjpa/docs/ref_guide_conf_openjpa.html#openjpa.ConnectionFactory2Properties) ://openjpa.apache.org/builds/1.2.3/apache-openjpa/docs/ref_guide_conf_openjpa.html#openjpa.ConnectionFactory2Properties ）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-18T10:53:36.307

您好我想添加正在运行的persistance.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="EHS_PU">
        <jta-data-source>mysqlDataSource</jta-data-source>
        <class>com.ap.entity.EHSDo</class>
        <class>com.ap.entity.EventDo</class>
        <properties>
            <property name="openjpa.Log" value="log4j" />
            <property name="openjpa.ConnectionFactoryProperties" value="PrintParameters=true" />
        </properties>
    </persistence-unit>
</persistence> 
```

# java - 如何通过 EclipseLink Annotations 指定 SQL 注释？

> ID：10733412
> 
> 赞同：3
> 
> 时间：2012-05-24T07:59:27.493
> 
> 标签：java, documentation, persistence, eclipselink

有没有办法通过 EclipseLink 特定的注解来指定 SQL 注释？

表和列的注释。

根据[如何通过 JPA 注释指定 SQL 注释？](https://stackoverflow.com/questions/3807676/how-to-specify-sql-comments-through-jpa-annotations)没有办法通过 JPA 做到这一点。但也许有一个 EclipseLink 特定的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:13:34.613

[根据 EclipseLink 开发人员的说法](http://dev.eclipse.org/mhonarc/lists/eclipselink-users/msg05529.html)，目前没有办法将其存档，即使不是使用专有方法也是如此。

# c# - 在应用程序退出时保存 MdiChildren

> ID：10733413
> 
> 赞同：0
> 
> 时间：2012-05-24T07:59:32.393
> 
> 标签：c#, winforms, mdi, mdichild

我想存储一些关于打开 MdiChildren 的数据，以便在应用程序重新启动时恢复它们。

但是 MdiChildren 属性似乎在 ApplicationExit 事件上为空。

当用户关闭主窗口时，我应该听哪个事件才能获得打开的 MdiChildren 列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:14:17.497

尝试以下代码。这个对我有用。您可以在 If 中添加额外的 loginc 以检查是否有任何子窗口可见，如果不可见，则不要问任何问题。

```
private void MDIParent1_FormClosing(object sender,
FormClosingEventArgs e)
{
if (MessageBox.Show("Close?",
AppDomain.CurrentDomain.ToString(), MessageBoxButtons.YesNo) ==
DialogResult.No)
{
e.Cancel = true;
}
} 
```

# python - python为windows启用gdb

> ID：10733418
> 
> 赞同：10
> 
> 时间：2012-05-24T07:59:45.013
> 
> 标签：python, gdb

我在 Windows 7 机器上使用 gdb 7.4 当我尝试执行 python 脚本时，我得到“此版本的 GDB 不支持 Python 脚本”

我以为它在 7.4 中受支持？我在哪里可以获得为 Windows 启用了 python 的 gdb 版本？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-17T05:07:29.603

**您需要一个启用 python**构建的 GDB （GDB.exe 需要链接到 python 库，例如 python2.7.x 的 python27.dll） [MinGW](http://www.mingw.org/)提供启用 python 的 GDB，[MinGW-W64](http://mingw-w64.sourceforge.net/)站点也提供启用 python 的 GDB[我的非官方构建 GDB](http://forums.codeblocks.org/index.php?topic=11301.0)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-26T12:29:38.570

在 mingw 安装程序中，您需要安装一个名为 mingw32-gdb-python 的特殊包。哪个是启用python编译的gdb

# security - 如何判断网站是否使用 SSL

> ID：10733419
> 
> 赞同：0
> 
> 时间：2012-05-24T07:59:46.823
> 
> 标签：security, ssl, xulrunner

我开发了一个独立的 XULRunner 应用程序，用作浏览器。我没有在应用程序中显示 URL。但我想知道访问的站点是否使用 SSL（即 URL 以 开头`https://`）。如果他们所在的网站部分是否安全，我想向用户显示一条消息。而且，我想这样做的方法是检查 URL 是否使用 SSL。我已经进行了一些搜索，但到目前为止没有成功，但我没有放弃。任何建议将不胜感激。

我做了一些更改，现在我的`onSecurityChange()`方法如下所示。

```
onSecurityChange: function(aWebProgress, aRequest, aState) { 
  if((aState & Components.interfaces.nsIWebProgress.STATE_IS_SECURE) == 0) {
    document.getElementById("lblConnectionStatus").setAttribute("value", "Insecure Connection");
  } else {
    document.getElementById("lblConnectionStatus").setAttribute("value", "Secure Connection");
  } 
  return 0; 
```

}

但是，当我从不安全页面过渡到安全页面时，它似乎没有改变。我已经用 Yahoo 和 Hotmail 尝试过，看看问题是否出在我正在访问的应用程序上，但在那里，它的行为也是一样的。

关于我可能做错了什么的任何指针？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:14:09.860

它比这更复杂一些——即使页面本身是通过 SSL 加载的，它也可以嵌入通过纯 HTTP 加载的脚本。这意味着整个页面*不安全*，因为不安全的脚本可能会危及其他所有内容。所以你应该依赖现有的机制，即[`browser.securityUI`属性](https://developer.mozilla.org/en/XUL/browser#p-securityUI)（也可用`tabbrowser`）。[此处](https://stackoverflow.com/a/8253991/785541)的答案解释了如何检查页面的 SSL 状态。

但是，您可能想了解 SSL 状态何时发生变化。您将为此[使用进度侦听](https://developer.mozilla.org/en/Code_snippets/Progress_Listeners)器。所有相关更改都会调用该方法`onSecurityChange()`，您需要检查参数（只有在为您提供非零值`aState`时连接才是安全的）。`aState & Components.interfaces.nsIWebProgress.STATE_IS_SECURE`

# php - 如何使用类表继承实现身份映射？

> ID：10733420
> 
> 赞同：2
> 
> 时间：2012-05-24T07:59:46.467
> 
> 标签：php, design-patterns, datamapper

我正在用 PHP 编写数据映射器，并试图弄清楚当我的域对象遵循类表继承时如何实现标识映射。

正如我所看到的，问题在于身份映射不能保证数据在内存模型中只显示一次，因为分层对象依赖于分层数据。

例如，在我的数据库中，我有一个 Parent 表和一个 Child 表。在我的域模型中，我有一个 Parent 类，并从它扩展了一个 Child 类。我可以同时实例化父对象和子对象，并将它们的身份记录在身份映射中，没有问题。如果客户端代码请求相同的父或子，我可以从我的缓存中返回它，而不是从数据库中返回，没有问题。

但是，如果 Parent 和 Child 都与同一个父记录相关，会发生什么？即父表中的相同数据？我现在有两次在内存中表示该数据，如果它在一个（或两个实例）中被修改，我可能会覆盖更改。

在我看来，身份映射需要遵循类似于域对象和映射器本身的层次结构，但是在这一点上它变得有点复杂。此外，我也有很多依赖映射需要考虑。

非常感谢任何想法/建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:17:12.810

如果你发现你有很多重复/重复的数据，那么设计是错误的......

即，如果您的父母说了一个由孩子共享的地址，您应该有一个地址表，并且这些记录中的每一个都将指向地址表中的单个条目等。

那么你的应用程序有一个案例有相关规则，即如果孩子帐户中的地址发生了变化......你会怎么做？更新（这意味着父母也将有新地址）或插入一个新地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T01:51:05.467

我定义了一个接口 iQueueable，并且只有实现该接口的对象才可以排队以将其更改写入数据库。

子对象具有完整的对象属性，因此它们实现了 iQueueable。父对象不能排队。

这仍然允许父对象和子对象不同步，但现在只有一个数据库更改来源。

# linq - EF查询中的日期比较

> ID：10733421
> 
> 赞同：0
> 
> 时间：2012-05-24T07:59:47.947
> 
> 标签：linq, entity-framework-4

我有一个使用 lambda 表达式的 EF 查询，当我尝试获取两个日期之间的差异时，它会抛出异常

LINQ to Entities 不支持指定的类型成员“日期”。仅支持初始化程序、实体成员和实体导航属性。

我的查询是

```
var unApprovedLeaves = db.Leaves.Where(l => l.Status.Id == 1 && ((System.DateTime.Now.Date - l.ToDate.Date).TotalDays)==0)
    .Include("Employee")
    .Include("Employee.Manager")
    .ToList(); 
```

谁能告诉我如何正确处理这件事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T08:25:56.930

您必须使用`SqlFunctions`来自`System.Data.Objects.SqlClient`. 试试这个：

```
var today = DateTime.Now.Date;
var unApprovedLeaves = db.Leaves.Where(l => l.Status.Id == 1 && 
                                      (SqlFunctions.DateDiff("day", today, l.ToDate))==0)
    .Include("Employee")
    .Include("Employee.Manager")
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-24T14:19:26.957

在实体框架中，建议使用`DbFunctions`helper from`System.Data.Entity`

试试这个：

```
var today = DateTime.Now.Date;
var unApprovedLeaves = db.Leaves.Where(l => l.Status.Id == 1 && 
                                      (DbFUnction.DiffDays(today, l.ToDate))==0)
    .Include("Employee")
    .Include("Employee.Manager")
    .ToList(); 
```

# android - 用安卓相机捕捉 ISBN 号

> ID：10733422
> 
> 赞同：1
> 
> 时间：2012-05-24T07:59:49.100
> 
> 标签：android, android-intent, isbn

我的应用程序目的只是简单地捕获一个 ISBN 编号，然后将 ISBN 转换为一个字符串。我知道 zxing 项目，但是在浏览了他们的代码和研究之后，我找不到在不使用 Intent 的情况下使用他们的代码的方法。

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
intent.putExtra("SCAN_MODE", "ISBN");
startActivityForResult(intent, 0); 
```

如何避免此步骤以使我的应用程序独立于 Barcode Scanner 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:11:44.297

您的问题似乎是对用户设备上存在的 Zxing Barcode Scanner 的依赖。正如 Gene 在他的评论中提到的，Zxing 为这个用例提供了一个“IntentIntegrator”库。它是一个小型 Java 库，您可以将其与您的应用程序捆绑在一起，并为您处理未在手机上安装 Zxing 的情况等。

它在[http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)中有描述。另请参阅[http://code.google.com/p/zxing/source/browse/trunk#trunk%2Fandroid-integration%2Fsrc%2Fcom%2Fgoogle%2Fzxing%2Fintegration%2Fandroid](http://code.google.com/p/zxing/source/browse/trunk#trunk%2Fandroid-integration%2Fsrc%2Fcom%2Fgoogle%2Fzxing%2Fintegration%2Fandroid)了解详细信息（此库的来源）。

# django - 如何在 Django 的模板标签中传递请求？

> ID：10733423
> 
> 赞同：0
> 
> 时间：2012-05-24T07:59:56.623
> 
> 标签：django, django-views, django-templates

我正在 Django 中开发基于 Web 的应用程序。我的应用程序充满了小部件（不是 Django 小部件），用于使用 Ajax 加载不同类型的数据。例如，“学生”名称小部件正在加载用户列表，“教师”名称小部件正在加载学校所有教师的列表。为此，我想到了以下一些疑问：

*   我正在使用模板标签（查看代码[http://codepad.org/2Ug9Ct3n](http://codepad.org/2Ug9Ct3n)）。在这段代码中，当我这样做时，我`if request and request.is_ajax():`会看到一个错误`None object has no attribute ajax`。问题是我无法正确包含请求。我已经对我的`setting.py`ie进行了更改

    ```
     TEMPLATE_CONTEXT_PROCESSORS = (
     'django.contrib.auth.context_processors.auth',
     'django.core.context_processors.static',
     'django.core.context_processors.request',
     'django.core.context_processors.media',
     ) 
    ```

    *   如果那个东西没有解决方案，那么我可以在views.py中编写整个模板标签部分吗？如何？如果有任何可能，请将它们作为答案发布！

任何帮助都将是可观的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:34:35.323

确保您的视图（您尚未发布）正在使用`RequestContext`. 如果您使用基于类的视图或`render`快捷方式，这会自动为您发生。

但是，如果您使用`render_to_response`的是 ，则需要执行以下操作：

```
from django.template import RequestContext
from django.shortcuts import render_to_response
def some_view(request):
    # ...
    return render_to_response('my_template.html',
                              my_data_dictionary,
                              context_instance=RequestContext(request)) 
```

# objective-c - 两个 NSDate 之间的日期比较

> ID：10733426
> 
> 赞同：1
> 
> 时间：2012-05-24T08:00:14.047
> 
> 标签：objective-c, ios, date, nsdate

这是我第一次在 Objective-C 中比较日期。我已经在网上搜索了一段时间，我发现的所有示例都涉及从字符串构建 NSDate 所以我决定在这里提出一个新问题......我的问题如下：

我需要知道两个 NSDate 是否在同一天，忽略时间。我得到了两个`NSArray`包含一组日期的日期，我需要一个一个地确定第一个中的哪一个与`NSArray`第二个数组在同一天。

```
- (void)setActiveDaysColor:(UIColor *)activeDaysColor
{
    for (DayView *actualDay in _days)
    {
        NSDate *actualDayDate = [actualDay date];

        for (NSDate *activeDayDate in self.dates)
        {
            // Comparison code
            // If both dates are the same, tint actualDay with a different color
        }
    }
} 
```

提前感谢您，祝您有美好的一天。

亚历克斯。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T08:07:22.017

通过省略时间组件来创建新日期。并使用其中一种比较方法

*   [较早日期：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/doc/uid/20000188-earlierDate_)
*   [后来日期：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/doc/uid/20000188-laterDate_)
*   [相比：](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/doc/uid/20000188-compare_)
*   [isEqualToDate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)

例子

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSInteger components = (NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit);

NSDateComponents *firstComponents = [calendar components:components fromDate:firstDate];
NSDateComponents *secondComponents = [calendar components:components fromDate:secondDate];

NSDate *date1 = [calendar dateFromComponents:firstComponents];
NSDate *date2 = [calendar dateFromComponents:secondComponents];

NSComparisonResult result = [date1 compare:date2];
if (result == NSOrderedAscending) {
} else if (result == NSOrderedDescending) {
}  else {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T06:24:06.423

```
-(BOOL)isSameDay:(NSDate*)date1 otherDay:(NSDate*)date2 {
NSCalendar* calendar = [NSCalendar currentCalendar];

unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit;
NSDateComponents* comp1 = [calendar components:unitFlags fromDate:date1];
NSDateComponents* comp2 = [calendar components:unitFlags fromDate:date2];

return [comp1 day]   == [comp2 day] &&
[comp1 month] == [comp2 month] &&
[comp1 year]  == [comp2 year];} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T08:36:08.850

感谢您的所有回答。我在一篇完全不相关的帖子中找到了对我的问题的更清晰的答案，但实际上效果很好。

```
if ((unsigned int)[actualDayDate timeIntervalSinceDate:activeDayDate] / 60 / 60 / 24 == 0)
{
     // do Stuff
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T08:07:39.303

查看 NSDate 文档，这些是比较日期的方法

*   isEqualToDate
*   较早日期
*   稍后日期
*   相比

在你的情况下

```
if([actualDayDate isEqualToDate:activeDayDate])
{

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-24T09:37:19.227

您可以使用谓词来过滤掉当前存在的所有对象，而不是代码中的循环。通过将其与今天的开始和今天的结束进行比较来过滤出今天的日期。

您可以像这样将任何 NSDate 设置为该日期的开头（请参阅[此答案](https://stackoverflow.com/a/1857392/608157)）

```
NSDate *beginDate = [NSDate date];
[[NSCalendar currentCalendar] rangeOfUnit:NSDayCalendarUnit startDate:&beginDate interval:NULL forDate:beginDate]; 
```

然后要获得结束日期，您只需添加一天即可。**不要**通过计算秒数来添加天数。这不适用于夏令时！这样做（另见[这个答案](https://stackoverflow.com/a/5067868/608157)）：

```
NSDateComponents *oneDay = [[NSDateComponents alloc] init];
[oneDay setDay:1];
// one day after begin date
NSDate *endDate = [[NSCalendar currentCalendar] dateByAddingComponents:oneDay toDate:beginDate options:0]; 
```

现在您有了定义今天范围的两个日期，您可以使用 NSPredicate 过滤所有 DayViews，以获取今天是今天的所有 DayViews 的新数组，如下所示（请参阅[此答案](https://stackoverflow.com/a/1965564/608157)）：

```
// filter DayViews to only include those where the day is today
NSArray *daysThatAreToday = [_days filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(date >= %@) AND (date <= %@)", beginDate, endDate]]; 
```

现在您可以通过枚举新数组（包含今天的 DayViews）将色调颜色应用于所有 DayViews

```
[daysThatAreToday enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    // Set the tint color here...
}]; 
```

* * *

在我看来，这是一种干净*但更重要的是解决问题的**正确***方法。它可以清楚地阅读并处理夏令时和其他日历，然后是公历。如果您想为某一周（或任何其他时间段）的所有 DayView 着色，它也可以很容易地重复使用。

# c# - 尝试使用标记接口失败并出现 IEnumerable<>

> ID：10733435
> 
> 赞同：1
> 
> 时间：2012-05-24T08:00:54.250
> 
> 标签：c#, inversion-of-control, unity-container, ioc-container, auto-registration

我正在尝试使用统一在我自己的应用程序中模仿 Orchard CMS 中的一些东西。

好吧，所以我想做的是这个......

假设我有一个名为 IDependency 的标记接口。

```
public interface IDependency{ } 
```

然后我有几个接口挂在这个...

```
public interface ICustomerService : IDependency { }

public interface ICustomerRepository : IDependency { } 
```

然后也上一些课...

```
public class CustomerService : ICustomerService {
     public CustomerService(ICustomerRepository customerRepo){ }
}

public class SomOtherCustomerService : ICustomerService {
     public CustomerService(ICustomerRepository customerRepo){ }
}

public class NicksController : Controller {
     public NicksController(IEnumerable<ICustomerService> customerServices) { }
}

 public class NicksSecondController : Controller {
     public NicksSecondController(IEnumerable<ICustomerService> customerServices) { }
} 
```

到目前为止我所拥有的..

```
var container = new UnityContainer();

container
    .ConfigureAutoRegistration()
    .ExcludeSystemAssemblies()
    //.Include(If.Implements<IDependency>, Then.Register()
    //.As<IDependency>().UsingLifetime<PerResolveLifetimeManager>())
    .Include(t =>
        typeof(IDependency).IsAssignableFrom(t), (type, builder) =>
            {
                builder.RegisterType(type);

                foreach (var interfaceType in type.GetInterfaces()
                .Where(itf => typeof(IDependency).IsAssignableFrom(itf))) {
                    builder = builder.RegisterType(interfaceType, type);
                }
            })
    .ApplyAutoRegistration(); 
```

我在向我的 NicksSecondController 中注入 IEnumerable 时跌倒了……有什么想法吗？

干杯，尼克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:12:57.793

开箱即用的 Unity 只知道如何解析数组。[查看codeplex](http://tecx.codeplex.com)上的TecX 项目。它包含一个自定义扩展，该扩展教会容器处理`IEnumerable<T>`，`IList<T>`以及`ICollection<T>`。该代码可以在*TecX.Unity*（文件夹*Collections*）中找到。

# asp.net-mvc-3 - 刷新页面的一部分

> ID：10733437
> 
> 赞同：0
> 
> 时间：2012-05-24T08:01:04.897
> 
> 标签：asp.net-mvc-3, jquery, jquery-dialog

我有一个包含 3 个部门的页面，例如常规、与会者信息和自定义问题（部分视图）。自定义问题将显示问题列表（文本框）以及答案（下拉列表），其中包含一个编辑按钮，用于修改下拉列表中的答案字段。现在，当单击编辑按钮时，将出现一个弹出窗口来修改答案字段，一旦用户单击保存按钮，修改后的答案应反映在下拉列表中。我已经为自定义问题创建了部分视图，但答案值仍然没有反映下拉列表中的更改。任何示例代码或想法？

**控制器**

```
[HttpPost]
       public ActionResult UpdateAnswers(string answers, string question, string controlid, int eventid)
       {
           var replacetext=string.Empty;
           if (answers.Length>0) 
             replacetext = answers.Replace("\n", ",");
           _service.UpdateAnswers(eventid, replacetext, controlid);
           var eventdetails = _service.GeteventByID(eventid);
           return PartialView( "CustomizedQuestions", eventdetails);
       } 
```

**局部视图**

```
@using EM.Website.Helpers
@model EM.Model.tbl_SBAem_Event
@{
    var dropdownList = new List<KeyValuePair<int, string>> {new KeyValuePair<int, string>(0, "Required"), new KeyValuePair<int, string>(1, "Optional"), new KeyValuePair<int, string>(2, "Hidden")};
    var selectList = new SelectList(dropdownList, "key", "value", 0);
}

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
        <table class="table-customized-question">
                <tr>
                    <th class="td-customized-question-row"></th>
                    <th class="td-customized-question-row">Question Label</th>
                    <th class="td-customized-question-row">Display Mode</th>
                    <th class="td-customized-question-row">Answer Field</th>
                    <th class="td-customized-question-row">Edit Choices</th>
                </tr>
                <tr>
                    <td class="td-customized-question-firstrow">#1</td>
                    <td class="td-customized-question-row">@Html.EditorFor(model => model.EM_opt1Name)</td>
                    <td class="td-customized-question-row">@Html.DropDownListFor(model => model.EM_reqOpt1, selectList)</td>
                    <td class="td-customized-question-row">@Html.DropDownListFor(model => model.EM_opt1Values, @Html.SplitText(Model.EM_opt1Values, ','), new { @class = "dropdownlist-width" })</td>
                    <td>@Html.ActionImage("CustomizedQuestion", new { eventID = Model.EventMngID, question = Model.EM_opt1Name }, "~/Content/Images/edit.jpg", "Edit", new { @class = "editButton", title = Model.EM_opt1Name, answers = Model.EM_opt1Values, id = "EM_opt1Values", eventID = Model.EventMngID })</td>
                </tr>
                <tr>
                    <td class="td-customized-question-firstrow">#2</td>
                    <td class="td-customized-question-row">@Html.EditorFor(model => model.EM_opt2Name)</td>
                    <td class="td-customized-question-row">@Html.DropDownListFor(model => model.EM_reqOpt2, selectList)</td>

                    <td>@Html.ActionImage("CustomizedQuestion", new { eventID = Model.EventMngID, question = Model.EM_opt2Name }, "~/Content/Images/edit.jpg", "Edit", new { @class = "editButton", title = Model.EM_opt2Name, answers = Model.EM_opt2Values, id = "EM_opt2Values", eventID = Model.EventMngID })</td>
                </tr>
                <tr>
                    <td class="td-customized-question-firstrow">#3</td>
                    <td class="td-customized-question-row">@Html.EditorFor(model => model.EM_opt3Name)</td>
                    <td class="td-customized-question-row">@Html.DropDownListFor(model => model.EM_reqOpt3, selectList)</td>
                    <td class="td-customized-question-row">@Html.DropDownListFor(model => model.EM_opt3Values, @Html.SplitText(Model.EM_opt3Values, ','), new { @class = "dropdownlist-width" })</td>
                    <td>@Html.ActionImage("CustomizedQuestion", new { eventID = Model.EventMngID, question = Model.EM_opt3Name }, "~/Content/Images/edit.jpg", "Edit", new { @class = "editButton", title = Model.EM_opt3Name, answers = Model.EM_opt3Values, id = "EM_opt3Values", eventID = Model.EventMngID })</td>
                </tr>
                <tr>
                    <td class="td-customized-question-firstrow">#4</td>
                    <td class="td-customized-question-row">@Html.EditorFor(model => model.EM_opt4Name)</td>
                    <td class="td-customized-question-row">@Html.DropDownListFor(model => model.EM_reqOpt4, selectList)</td>
                    <td class="td-customized-question-row">@Html.DropDownListFor(model => model.EM_opt4Values, @Html.SplitText(Model.EM_opt4Values, ','), new { @class = "dropdownlist-width" })</td>
                    <td>@Html.ActionImage("CustomizedQuestion", new { eventID = Model.EventMngID, question = Model.EM_opt4Name }, "~/Content/Images/edit.jpg", "Edit", new { @class = "editButton", title = Model.EM_opt4Name, answers = Model.EM_opt4Values, id = "EM_opt4Values", eventID = Model.EventMngID })</td>
                </tr>
                <tr>
                    <td class="td-customized-question-firstrow">#5</td>
                    <td class="td-customized-question-row">@Html.EditorFor(model => model.EM_opt5Name)</td>
                    <td class="td-customized-question-row">@Html.DropDownListFor(model => model.EM_reqOpt5, selectList)</td>
                    <td class="td-customized-question-row">@Html.DropDownListFor(model => model.EM_opt5Values, @Html.SplitText(Model.EM_opt5Values, ','), new { @class = "dropdownlist-width" })</td>
                    <td>@Html.ActionImage("CustomizedQuestion", new { eventID = Model.EventMngID, question = Model.EM_opt5Name }, "~/Content/Images/edit.jpg", "Edit", new { @class = "editButton", title = Model.EM_opt5Name, answers = Model.EM_opt5Values, id = "EM_opt5Values", eventID = Model.EventMngID })</td>
                </tr>
                <tr>
                    <td class="td-customized-question-firstrow">#6</td>
                    <td class="td-customized-question-row">@Html.EditorFor(model => model.EM_opt6Name)</td>
                    <td class="td-customized-question-row">@Html.DropDownListFor(model => model.EM_reqOpt6, selectList)</td>
                    <td class="td-customized-question-row">@Html.DropDownListFor(model => model.EM_opt6Values, @Html.SplitText(Model.EM_opt6Values, ','), new { @class = "dropdownlist-width" })</td>
                    <td>@Html.ActionImage("CustomizedQuestion", new { eventID = Model.EventMngID, question = Model.EM_opt6Name }, "~/Content/Images/edit.jpg", "Edit", new { @class = "editButton", title = Model.EM_opt6Name, answers = Model.EM_opt6Values, id = "EM_opt6Values", eventID = Model.EventMngID })</td>
                </tr>
            </table>

} 
```

**jQuery-Ajax**

```
$(".editButton").live("click", function (e) {
                e.preventDefault();
                var $title = $(this).attr("title");
                var $answers = $(this).attr("answers");
                var $controlid = $(this).attr("id");
                var $eventId = $(this).attr("eventID");
                dropdownlist($controlid, $title, $answers, $eventId);
            });

 function dropdownlist(controlid, title, answer, eventid) {
            var $answersreplaced = answer.replace(/\,/g, "&nbsp;\r");
            var $deleteDialog = $('<div><textarea id="answerlist"  rows="10" cols="50">' + $answersreplaced + '</textarea><div><div style="font-size:9px">(To change back to an open answer field, delete all choices above and save)</div>');
            $deleteDialog.dialog({
                resizable: false,
                height: 280,
                width: 350,
                title: title + " - Edit Choices",
                modal: true,
                buttons: {
                    "Save": function () {
                        $.ajax({
                            url: '@Url.Action("UpdateAnswers")',
                            type: 'POST',
                            dataType: 'html',
                            context: $(this),
                            data: {
                                answers: $("#answerlist").val(),
                                question: title,
                                controlid: controlid,
                                eventid: eventid
                            },
                            success: function (result) {
                                $(this).dialog("close");
                                alert(result);
                                $("#"+controlid+"").html(data); 
                            },
                            error: function () {
                                //xhr, ajaxOptions, thrownError
                                alert('there was a problem saving the new answers, please try again');
                            }
                        });
                    },
                    Cancel: function () {
                        $(this).dialog("close");
                    }
                }
            });
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:45:56.897

> 我的方法正确吗？

是的，你的方法是正确的。例如，您可以使用[jQuery UI 对话框](http://jqueryui.com/demos/dialog/)来实现弹出和编辑部分。这个想法是使用 AJAX 以避免刷新整个页面，而只刷新您感兴趣的部分。因此，将显示在模式对话框中的部分将包含一个表单，该表单将使用 AJAX 和服务器将返回包含有关问题的新信息的部分视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:53:40.530

你必须使用

```
 $.ajax({
            type: "POST",
            url: '@Url.Action("action", "controller")',

            data: "{... parameterd}",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                      .. $("#yourDivID").html(data);
            }
        }); 
```

@using (Ajax.BeginForm("action", "controller", ajaxOptions)) ，不是

@using (Html.BeginForm())

# c# - C# windows 应用程序设置在不同的机器上，并且都在一个 SQL Server 2008 数据库上工作

> ID：10733438
> 
> 赞同：0
> 
> 时间：2012-05-24T08:01:05.793
> 
> 标签：c#

我创建了一个使用 SQL Server 2008 作为后端的桌面应用程序。我想从安装在多台机器上的应用程序中使用这个数据库。

该应用程序连接到集中式数据库的要求是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:08:42.797

这很简单，如果服务器有数据库，您希望架构为客户端 - 服务器模型。因此您需要拥有 MS SQLserver 2005 或更高版本并创建数据库将其连接到 sqlserver。授予客户端访问数据库的权限。

从 Visual Studio 端：将上面创建的 .mdf（数据库文件）添加为新的数据源。Data-->Add new Data Source ，然后按照向导中的步骤[ps，连接类型必须是 sql sever 类型]，同时，VS 将创建一个连接字符串。使用连接字符串从客户端访问。

这个链接会很有用：http: [//msdn.microsoft.com/en-us/library/sxds9ett (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/sxds9ett(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:02:35.607

当然，要将连接字符串保留在其资源中。

资源是：

1.  双击项目的**属性**（在解决方案资源管理器中）。
2.  然后**设置**选项卡。
3.  如果没有默认设置文件，请单击长链接标签创建它。
4.  添加一个像“ `ConnectionString`”这样的设置，其值像“Data Source = ...”等等。

然后你可以运行你的 sql 脚本，比如：

```
SqlConnection conn =
    new SqlConnection(Properties.Settings.Default.ConnectionString); 
```

继续。

# javascript - 在 JavaScript 中通过字符串调用函数

> ID：10733439
> 
> 赞同：0
> 
> 时间：2012-05-24T08:01:08.663
> 
> 标签：javascript, oop, function

多次阅读此问题及其接受的答案[后，当我将其名称作为字符串时如何执行 JavaScript 函数](https://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string)

我试着自己做。但我认为我今天不走运的一天是我尝试过的没有奏效。我已经为我的测试创建了一个小提琴

```
//the function I want to invoke by String
function CheckMe() {
    return "haha";
}

//the function that will search for the function and invoke it
function InvokeChecking(func2check) {
    var fn = func2check;
    if (typeof fn === 'function') {
        return = fn(); //invoke the function
    }
}

//the event listener  ( ´ ▽ ` )ﾉ
$("#checker").click(function () {
    alert("event is working");
    alert(InvokeChecking("CheckMe"));
});​ 
```

[http://jsfiddle.net/laupkram/qKHpu/2/](http://jsfiddle.net/laupkram/qKHpu/2/)

我想做的是调用我使用字符串声明的函数并获取它的返回值。`(fn==='function')`因此，我使用该参数遵循了我在 SO 中看到的内容。但它似乎对我不起作用。

我哪里出错了？

**注意**：我已经在 firebug 中检查了它并且我的函数存在......我是否陷入了范围界定问题？或者其他的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:04:55.970

正如您提到的相关答案所说，按名称命名的函数由以下方式调用：

```
var function_name = 'alert';
window[function_name]('hello world'); 
```

另见：http: [//jsfiddle.net/qKHpu/4/](http://jsfiddle.net/qKHpu/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:05:19.010

[http://jsfiddle.net/qKHpu/8/](http://jsfiddle.net/qKHpu/8/)

需要传入函数的文字名称，不带引号（`"`），否则将被视为文字字符串，这是没有意义的

```
alert(InvokeChecking(CheckMe)); // instead of alert(InvokeChecking("CheckMe")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:31:30.983

[http://jsfiddle.net/qKHpu/27/](http://jsfiddle.net/qKHpu/27/)

检查它工作一些..

# c - 等待子进程

> ID：10733442
> 
> 赞同：1
> 
> 时间：2012-05-24T08:01:42.410
> 
> 标签：c, process, fork, waitpid

这是我正在运行的程序的一个片段，但纠正它的机器会尝试这样做：

```
strace ./watcher echo 2>&1 > /dev/null | grep wait | cut -c1-4 
```

预期的输出是：

```
wait 
```

但是我的程序会打印随机数量的等待（像这样）：

```
wait
wait
wait
wait
wait
wait 
```

这是代码：

```
 // creates a child process
    pid_t process_id;
    int status;
    process_id = fork();
    switch(process_id)
    {
        case -1: // Error while making the forkFork failed
            fprintf(stderr, "Fork failed.\n");
            break;

        case 0: // Child process.
            execvp(command[0], command); // command here is char**

            // execvp only returns when error.
            Error(argv[0], 1); // Error just prints the error
            exit(1);
            break;

        default: // Parent process.
            while(!waitpid(process_id, &status, WNOHANG));
            finished(status); // It prints how the process has finished.
    } 
```

我认为问题在于内部有waitpid，这会产生很多等待。但是，如果我删除它并单独留下 waitpid，我会收到以下输出：

```
standard input: Input/output error 
```

有没有办法只打一个等待电话而不会出现该错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:54:26.873

您可能会尝试**不**设置`WNOHANG`对`waitpid()`.

这将`waitpid()`阻塞直到孩子终止。

# c# - 从 winforms 应用程序创建 word 文档

> ID：10733443
> 
> 赞同：1
> 
> 时间：2012-05-24T08:01:43.143
> 
> 标签：c#, winforms, ms-word

我有一个带有 sql server 后端的 C# winforms 应用程序，并且希望能够从我的应用程序中创建 word 文档，并用地址、参考等基本信息填充它们。我一直在网上浏览想法，但正在努力入门这个主题。

有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:15:33.630

作为起点，请访问此链接[Office Development With Visual Studio](http://msdn.microsoft.com/en-us/office/hh133430.aspx) ，然后[下载](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=20479)并安装请求的库。

这个问题非常广泛，无法用精确的细节来回答。
但是，正如您所要求的，这是一个方向：

*   创建一个 DOT 文档并用 MergeFields 填充它，来自 SqlServer 的数据将被写入其中。
*   在项目中添加对 Office Interop Word 库的引用
*   声明所需的 Application 和 Document 实例变量
*   从数据库中读取数据并使用 Office Word 库打开 DOT 文件
*   在 DOT 文件中搜索相关的 MergeField 并更新其文本
*   将 DOT 文件另存为文件夹中的文档。

如您所见，这些步骤中的每一个都值得提出问题。所以你有很多工作要做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:18:39.673

您需要寻找的是报表设计器，您可以在其中从代码编辑它们并以多种格式导出，包括 word、pdf 等。您可以寻找 Crystal Reports、Devexpress XtraReports 以及许多免费的。

# sql-server - mssql 脚本数据插入或更新

> ID：10733445
> 
> 赞同：1
> 
> 时间：2012-05-24T08:01:53.517
> 
> 标签：sql-server

如何生成脚本而不是手动编写

```
if exists (select ... where id = 1)
insert ...
else
update ... 
```

用很多记录来做这件事很无聊！

使用管理工作室生成脚本“仅数据”仅生成插入。因此，针对现有数据库运行它会在主键上产生错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:04:58.040

对于 SQL 2008 及更高版本，您可以开始使用[`Merge`](http://technet.microsoft.com/en-us/library/bb510625.aspx)语句以及[`CTE`](http://msdn.microsoft.com/en-us/library/ms175972.aspx)

典型 id/description 查找表的简单示例

```
WITH stuffToPopulate(Id, Description)
AS
(
   SELECT 1, 'Foo'
   UNION SELECT 2, 'Bar'
   UNION SELECT 3, 'Baz'
)
MERGE Your.TableName AS target
USING stuffToPopulate as source
ON (target.Id = source.Id)
WHEN MATCHED THEN 
    UPDATE SET Description=source.Description

WHEN NOT MATCHED THEN
    INSERT (Id, Description)
    VALUES (source.Id, source.Description); 
```

合并语句还有许多其他有用的功能（例如`NOT MATCHED BY DESTINATION`, `NOT MATCHED BY SOURCE`）。文档（上面链接）将为您提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-02T11:44:43.413

MERGE 是最有效的方法之一。
但是，一开始编写 Merge 语句不是很直观，为多行或多表生成行是一个耗时的过程。
我建议使用其中一种工具来简化这一挑战：

*   [数据脚本编写](https://github.com/SQLPlayer/DataScriptWriter/)器（Windows 桌面应用程序）
*   [生成 SQL 合并](https://github.com/readyroll/generate-sql-merge)（T-SQL 存储过程）

我最近写了一篇关于这些工具的博客文章，以及利用 SSDT 部署数据数据库的方法。了解更多：
[为 SSDT 项目中的数据库编写和部署数据脚本](https://sqlplayer.net/2019/10/script-deploy-the-data-for-database-from-ssdt-project/)

我希望这会有所帮助。

# javascript - facebook javascript sdk 通过omniauth-facebook 获得额外权限

> ID：10733447
> 
> 赞同：3
> 
> 时间：2012-05-24T08:02:01.660
> 
> 标签：javascript, facebook, permissions, facebook-javascript-sdk, omniauth

我正在使用 fb js sdk 开发omniauth-facebook。它现在工作得很好，但是我不知道为什么它不能请求额外的权限。我已经在我的 omniauth.rb 中设置了：omniauth-facebook 的范围，但是当我点击登录时，我没有获得任何我想从用户那里请求的额外权限。我在互联网上寻找，发现我必须这样做：

```
FB.login(function(response) {
// handle the response
}, {scope: 'email,user_likes'}); 
```

但就我而言，我跟随客户端并得出这个：

```
 (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

  // Init the SDK upon load
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'app_id', // App ID
      channelUrl : '//'+window.location.hostname+'/channel', // Path to your Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
  oauth      :true, //enable Oauth 2.0
      xfbml      : true  // parse XFBML
    });

    // listen for and handle auth.statusChange events
//
FB.Event.subscribe('auth.login', function(response) {
  if (response.authResponse) {
    window.location = '/auth/facebook/callback';
  }
}, {scope: 'email,user_likes'});  //i tried but its not working

    FB.Event.subscribe('auth.statusChange', function(response) {
      if (response.authResponse) {
        // user has auth'd your app and is logged into Facebook
        FB.api('/me', function(me){
          if (me.name) {
            document.getElementById('auth-displayname').innerHTML = me.name;
          }
        })
        document.getElementById('auth-loggedout').style.display = 'none';
        document.getElementById('auth-loggedin').style.display = 'block';
      } else {
        // user has not auth'd your app, or is not logged into Facebook
        document.getElementById('auth-loggedout').style.display = 'block';
        document.getElementById('auth-loggedin').style.display = 'none';
      }
    });

    // respond to clicks on the login and logout links
    document.getElementById('auth-loginlink').addEventListener('click', function(){
      FB.login();
    });

    document.getElementById('auth-logoutlink').addEventListener('click', function(){
      FB.logout();
    }); 
  } 
```

如果我使用 facebook 社交按钮并在 html 中添加范围，它可以工作，但这不是我想要的。这里有人有教程或提示让我继续吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:38:54.953

What about this:

```
jQuery ->
  $('body').prepend('<div id="fb-root"></div>')

  $.ajax
    url: "#{window.location.protocol}//connect.facebook.net/en_US/all.js"
    dataType: 'script'
    cache: true

window.fbAsyncInit = ->
  FB.init(appId: '<%= ENV["FACEBOOK_KEY"] %>', cookie: true)

  $('#sign_in').click (e) ->
    e.preventDefault()
    FB.login (response) ->
      window.location = '/auth/facebook/callback' if response.authResponse
  , scope: "email, publish_stream"    

  $('#sign_out').click (e) ->
    FB.getLoginStatus (response) ->
      FB.logout() if response.authResponse
    true 
```

# java - java：如何将双精度数字转换为十进制

> ID：10733459
> 
> 赞同：0
> 
> 时间：2012-05-24T08:03:17.543
> 
> 标签：java, matlab, decimal, double-precision

我想将双精度数字转换为十进制。

例如，我有 23.43，双精度值将是（使用 matlab）：174 71 255 122 20 110 55 64 现在有了这个，我该如何编写一个给我 23.43 的 java 程序？

这是matlab中双精度的计算：

MATLAB 根据 IEEE 标准 754 为双精度构造双精度数据类型。任何存储为双精度值的值都需要 64 位，格式如下表所示：

位使用

63 符号（0 = 正，1 = 负）

62 到 52 指数，偏差 1023

51 到 0 数字 1.f 的分数 f

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T08:10:20.567

```
long l = Double.doubleToLongBits(double);
double d = Double.longBitsToDouble(long); 
```

# installshield - 如果在安装过程中未安装 .net framework 3.5，请打开 microsoft 网站

> ID：10733460
> 
> 赞同：0
> 
> 时间：2012-05-24T08:03:19.007
> 
> 标签：installshield, installscript, .net-framework-version

我正在创建 Installshield 安装程序来安装我的软件，我的软件首先检查是否安装了 .net framework 3.5？

```
#define EXAMPLE_DIR "D:\\"

if(!Is(DOTNETFRAMEWORKINSTALLED,REGDB_KEYPATH_DOTNET_35)) then
     return1=AskYesNo("Target system does not have .net 3.5 framework,Do you want to install?",YES);
        if(return1==YES) then
            LaunchApp(EXAMPLE_DIR^"website.bat","");
        else
            abort;
        endif;
   endif; 
```

它完美地检查了框架，但现在我希望如果用户单击“是”按钮，微软的网站应该打开吗？

任何一个想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:36:15.770

我只会使用先决条件支持。对于最后几个版本，基于 MSI 和 InstallScript 的项目都提供了先决条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:37:33.263

应该是这样的…………

```
//#define EXAMPLE_DIR "D:\\"

if(!Is(DOTNETFRAMEWORKINSTALLED,REGDB_KEYPATH_DOTNET_35)) then
     return1=AskYesNo("Target system does not have .net 3.5 framework,Do you want to install?",YES);
        if(return1==YES) then
            LaunchApp(SUPPORTDIR^"website.bat","");
        else
            abort;
        endif;
   endif; 
```

# javascript - 如果新元素（克隆对象）附加在内部 html 中，我想刷新 dom

> ID：10733464
> 
> 赞同：0
> 
> 时间：2012-05-24T08:03:40.783
> 
> 标签：javascript, jquery

`DOM`如果我将元素附加到并且元素是克隆对象，我想自动绑定元素的事件。这是代码片段：

HTML：

```
<input type="button" class="clickme" value="Click Me" />​ 
```

Javascript：

```
$(document).ready(function(){
    $(".clickme").click(function(){
        alert("Clicked");
        var cloneElem = $(this).clone();
        //cloneElem.bind("click");
        cloneElem.attr("value", "Click Me" + $("input").length.toString());
        $(this).parent().append(cloneElem);
    });
});​ 
```

结果：

![在此处输入图像描述](../Images/c1608597486cff816d0fdd9c3138b7a9.png)

如果我点击，`Click Me1`那么它也应该触发一个类似于`Click Me`

注意：我不想使用`Live function`JQuery 来触发事件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T08:05:26.573

[`.clone`](http://api.jquery.com/clone/)接受是否也克隆事件的参数：

```
$(this).clone(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:06:44.653

```
$(document).ready(function(){
    function do_logic() {
        alert("Clicked");
        var cloneElem = $(this).clone();
        cloneElem.click(do_logic);
        cloneElem.attr("value", "Click Me" + $("input").length.toString());
        $(this).parent().append(cloneElem);
    }

    $(".clickme").click(do_logic);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T08:11:16.730

如果您不希望克隆每个处理程序，则此示例应该可以工作。

```
$(document).ready(function(){
    $(".clickme").click(function(){
        alert("Clicked");
        var cloneElem = $(this).clone();
        cloneElem.click(function(){
           // code to be executed when you click cloned element.
        })

        //cloneElem.bind("click");
        cloneElem.attr("value", "Click Me" + $("input").length.toString());
        $(this).parent().append(cloneElem);
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T08:10:10.377

您还必须将点击事件添加到克隆元素。

一种方法来做到这一点..

```
$(".clickme").click(AddClone());

function AddClone() {
    alert("Clicked");
    var cloneElem = $(this).clone().click(AddClone());
    //cloneElem.bind("click");
    cloneElem.attr("value", "Click Me" + $("input").length.toString());
    $(this).parent().append(cloneElem);
} 
```

# android - Android 上的 MediaRecorder 干扰其他媒体应用程序

> ID：10733471
> 
> 赞同：1
> 
> 时间：2012-05-24T08:04:06.063
> 
> 标签：android, audio-recording, mediarecorder, decibel

我在我的应用程序中使用 MediaRecorder 来测量分贝。为此，每 10 秒创建一次新的 MediaRecorder-Object，它运行一秒，在此期间调用 getMaxAmplitude() 10 次并计算平均值。在此之后，MediaRecorder 对象被停止并删除。

启动 Recorder 的方法如下所示

```
public boolean start()
{
   mRecorder = new MediaRecorder();
     mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
     mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
     mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
     mRecorder.setOutputFile("/dev/null");
     try 
     {
        mRecorder.prepare();
     } 
     catch (IllegalStateException e) 
     {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return false;
     } 
     catch (IOException e) 
     {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return false;
     }
     catch(Exception e)
     {
        e.printStackTrace();
        return false;
     }
     mRecorder.start();
     mRecorder.getMaxAmplitude();
     return true;

} 
```

停止的方法看起来像这样

```
public void stop() 
{
    //Log.d("SPLService", "stop()");
    mRecorder.stop();
    mRecorder.reset();
    mRecorder.release();
    mRecorder=null;

} 
```

这几乎就是 Android 网站上的教程所指示的方式。

当我将此应用程序与其他使用媒体的应用程序（例如 Android 上的 Mediaplayer）并行使用时，就会出现问题。每当使用我的应用程序进行声音测量时，其他媒体应用程序都会停止甚至崩溃，即使它们的对象应该独立于我的。

我曾尝试使用 AudioRecord 而不是 MediaRecorder，但与其他应用程序的干扰是相同的。

我想我的问题是：我怎样才能避免这种干扰？

# python - 如何从字符串“DD Month YYY”获取日期时间对象，其中月份为全名 ex。一月

> ID：10733472
> 
> 赞同：-1
> 
> 时间：2012-05-24T08:04:07.710
> 
> 标签：python, datetime

我有一个字符串，例如“2012 年 7 月 3 日”，我想要一个日期时间对象。我正在寻找最好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:10:28.137

你读过[文档](http://docs.python.org/library/datetime.html#strftime-strptime-behavior)吗？

```
>>> import datetime
>>> datetime.datetime.strptime('03 July 2012', '%d %B %Y')
datetime.datetime(2012, 7, 3, 0, 0) 
```

`%d`停留天 (03)、`%B`整月天 (7 月) 和`%Y`年 (2012)。

# jquery - 使用 jquery 在选择框中使用背景图像

> ID：10733474
> 
> 赞同：0
> 
> 时间：2012-05-24T08:04:18.100
> 
> 标签：jquery

你好朋友我想在这样的选择框中使用**[图像](http://www.whitespace-creative.com/jquery/jNice/)**。我可以使用简单的代码（例如使用 jQuery 的手动代码）来做同样的事情吗？我只是想美化我的表格

请帮忙

任何帮助，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:08:47.023

你可以使用统一插件： [http ://uniformjs.com/](http://uniformjs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:13:33.120

![图片组合框 v2.38](../Images/c840f4ef64eea2f4dabbfd66081b5c04.png)你可以用这个

[JavaScript 图片组合框 v2.38](http://www.marghoobsuleman.com/jquery-image-dropdown)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:13:39.680

**[长丝集团的选择菜单](http://filamentgroup.com/lab/jquery_ui_selectmenu_an_aria_accessible_plugin_for_styling_a_html_select/)是业务。**

# c# - 在托管和非托管代码之间共享图形对象时丢失抗锯齿

> ID：10733475
> 
> 赞同：6
> 
> 时间：2012-05-24T08:04:21.050
> 
> 标签：c#, graphics, c++-cli, gdi+, mixed-mode

**在原生 C++ 和 C# 之间传递 Graphics 对象**

我目前正在开发一个类似于 Paint .NET 的应用程序。我有多种类型的层，它们是用 C# 实现的。这些图层被绘制到由 WinForms 用户控件提供的 .NET Graphics 对象中 - 它类似于 WPF 画布控件。layer 基类有一个 Draw 方法，实现如下：

```
public void Draw(IntPtr hdc)
{
    using (var graphics = Graphics.FromInternalHDC(hdc)
    {
         // First: Setup rendering settings like SmoothingMode, TextRenderingHint, ...
         // Layer specific drawing code goes here...
    }
} 
```

对于性能和反编译问题，我正在混合模式程序集中进行图层组合，因为我还应用了斜角或阴影等效果。包装器，当然是用 C++/CLI 编写的，直接从画布控件调用，并将每个层的元数据和目标图形对象（来自我的 C# 编写的画布用户控件的图形对象）转发到本机 C++ 类。

C++/CLI 包装器：

```
public ref class RendererWrapper
{
   public:
        void Render(IEnumerable<Layer^>^ layersToDraw, Graphics^ targetGraphics)
        {
            // 1) For each layer get metadata (position, size AND Draw delegate)
            // 2) Send layer metadata to native renderer
            // 3) Call native renderer Render(targetGraphics.GetHDC()) method
            // 4) Release targetGraphics HDC
         };
} 
```

本机 C++ 渲染器：

```
class NativeRenderer
{
  void NativeRenderer::Render(vector<LayerMetaData> metaDataVector, HDC targetGraphicsHDC)
  {
     Graphics graphics(targetGraphicsHDC);
     // Setup rendering settings (SmoothingMode, TextRenderingHint, ...)

     for each metaData in metaDataVector
     {
        // Create bitmap and graphics for current layer
        Bitmap* layerBitmap = new Bitmap(metaData.Width, metaData.Height, Format32bppArgb);
        Graphics* layerGraphics = new Graphics(layerBitmap);

        // Now the interesting interop part
        // Get HDC from layerGraphics
        HDC lgHDC = layerGraphics->GetHDC();

        // Call metaData.Delegate and pass the layerGraphics HDC to C#
        // By this call we are ending up in the Draw method of the C# Layer object
        metaData.layerDrawDelegate(lgHDC);     

        // Releasing HDC - leaving interop...
        layerGraphics->ReleaseHDC(lgHDC);

        // Apply bevel/shadow effects
        // Do some other fancy stuff

        graphics.DrawImage(layerBitmap, metaData.X, metaData.Y, metaData.Width, metaData.Height);        
     }
  }
} 
```

到现在为止还挺好。上面的代码几乎可以按预期工作，但是......

**问题**

唯一的问题是，例如，在渲染带有阴影的 PNG 时，我当前的实现缺乏抗锯齿和半透明。所以我只有 2 个 Alpha 通道的值：255 的透明或完全可见的颜色。这种副作用使得使用 Alpha 通道和字体绘制 PNG 看起来非常难看。当我使用纯 C# 代码时，我无法再像以前那样获得同样平滑和漂亮的半透明抗锯齿。

但是：直接在原生 Graphics 对象中绘制字符串时，

```
 layerGraphics->DrawString(...); 
```

抗锯齿和半透明功能回归了。所以这个问题只有在将 Graphics HDC 传递给 .NET 时才很明显。

**问题**

这个问题有什么解决方案/解决方法吗？我尝试直接在 C# Layer 类中创建位图，并将 HBITMAP 的 IntPtr 返回到本机代码。这种方法是有效的，但在这种情况下，我遇到了另一个问题，因为我找不到将 HBITMAP 转换为具有 alpha 通道的 GDI+ 位图的完美解决方案（绘制字体时，边缘周围有白色像素噪声）。

感谢您的输入！:)

**演示解决方案**

附上你会在这里找到一个演示解决方案：[Sources](http://dl.dropbox.com/u/2087121/MixedModeBitmap.zip)

在这个演示解决方案中，我测试了 3 种不同的渲染方法（全部在 NativeRenderer.cpp 中实现），而第一个显示了所描述的问题：

![演示输出](../Images/b5441b10f24c39adaf208858d444a531.png)

1) **RenderViaBitmapFromCSharp()** - *a)*在 C++ 中创建一个新的位图，在 C++ 中创建一个新的 Graphics 对象，通过传递 C++ Graphics 对象调用 C# 绘图代码 HDC -**失败**

**但是：** *b)*直接从 C++ 绘图也可以通过创建的位图工作

2) **RenderDirectlyFromCSharp()** - 从 C++ 中的 C# Graphics 句柄创建一个新的 Graphics 对象，通过传递 C++ Graphics 对象 HDC 调用 C# 绘图代码 -**工程**

3) **RenderDirectlyFromCPP()** - 从 C++ 中的 C# 图形句柄创建一个新的图形对象，直接在 C++ 中绘制文本 -**工作**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:20:43.373

```
 Graphics graphics(targetGraphicsHDC); 
```

您正在创建一个*新*的Graphics 对象。所以它不会像原来那样设置属性。像 TextRenderingHint 这样的属性不是 GDI 设备上下文的属性，它们是特定于图形的。

相当丑陋的问题，您需要按照调用代码中的方式重新初始化 Graphics 对象。那是两个相距甚远的代码块。避免转换到 HDC 并返回是回避问题的唯一真正体面的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:35:42.510

我最终在 C# 中创建了位图并将对象传递给 C++/CLI。正如 Hans 和 Vincent 已经提到的，您必须避免使用 GetHDC。所以我的解决方法是在伪代码中读取如下：

**层.cs C#：**

```
public Bitmap Draw()
{
     var bitmap = new Bitmap(Width, Height, PixelFormat.Format32bppArgb);
     using (var graphics = Graphics.FromBitmap(bitmap)
     {
          // First: Setup rendering settings like SmoothingMode, TextRenderingHint, ...
          // Layer specific drawing code goes here...
     }
     return bitmap;
} 
```

**NativeRenderer.cs C++：**

```
void NativeRenderer::RenderFromBitmapCSharp(System::Drawing::Bitmap^ bitmap)
{
    // Create and lock empty native bitmap
    Bitmap *gdiBitmap = new Bitmap(bitmap->Width, bitmap->Height, PixelFormat32bppARGB);
    Rect rect(0, 0, bitmap->Width, bitmap->Height);
    BitmapData bitmapData;
    gdiBitmap->LockBits(&rect, Gdiplus::ImageLockModeRead | Gdiplus::ImageLockModeWrite, PixelFormat32bppARGB, &bitmapData);

    // Lock managed bitmap
    System::Drawing::Rectangle rectangle(0, 0, bitmap->Width, bitmap->Height);
    System::Drawing::Imaging::BitmapData^ pBitmapData = bitmap->LockBits(rectangle, System::Drawing::Imaging::ImageLockMode::ReadOnly, System::Drawing::Imaging::PixelFormat::Format32bppArgb);

    // Copy from managed to unmanaged bitmap
    ::memcpy(bitmapData.Scan0, pBitmapData->Scan0.ToPointer(), bitmap->Width * bitmap->Height * 4);
    bitmap->UnlockBits(pBitmapData);
    gdiBitmap->UnlockBits(&bitmapData);

    // Draw it
    _graphics->DrawImage(gdiBitmap, 0, 0, bitmap->Width, bitmap->Height);
} 
```

希望这对其他人有帮助 - 在网络上没有找到任何实际上将托管转换为非托管 GDI+ 位图的代码片段。

谢谢大家的意见。

干杯，P

# osgi - OSGi：servicereference.getBundle().getVersion() - 没有这样的方法错误

> ID：10733483
> 
> 赞同：0
> 
> 时间：2012-05-24T08:04:45.293
> 
> 标签：osgi, bundle

我在我的 OSGi 应用程序中观察到奇怪的行为。我基本上有几个包提供了一个服务接口的实现。消费包应该使用与特定版本匹配的这些包之一的实现。

我一直在尝试通过首先使用服务跟踪器上的过滤器检索所有服务来实现这一点，如下所示：

```
serviceTaskTracker = new ServiceTracker(bundleContext, 
bundleContext.createFilter("(objectClass=*ServiceTasks)"), null);
ServiceReference[] serviceReferences = serviceTaskTracker.getServiceReferences(); 
```

随后，我正在迭代结果集

```
for (ServiceReference serviceReference : serviceReferences) {
        Bundle currentBundle = serviceReference.getBundle();

        try {
            Version currentVersion = currentBundle.getVersion();
        } catch (Throwable e) {
            System.out.println(e);
            e.printStackTrace();
        }

        if (currentVersion.equals(specifiedVersion)) {
            service = (ServiceTasks) bundleContext.getService(serviceReference);
        }
} 
```

现在它在调用 currentBundle.getVersion() 报告“无此类方法错误”时崩溃。这对我来说特别奇怪，因为我可以在 Eclipse 的调试模式下进入该行，突出显示“currentBundle.getVersion()”，按 CTRL + Shift + D 执行它并获取提供包的预期版本。按 F6 再次步进，它崩溃了。

currentBundle.getClass() 在我调用 getVersion() 之前返回“(org.eclipse.osgi.framework.internal.core.BundleHost)”。

堆栈跟踪如下所示：

> java.lang.NoSuchMethodError: org.osgi.framework.Bundle.getVersion()Lorg/osgi/framework/Version; java.lang.NoSuchMethodError: org.osgi.framework.Bundle.getVersion()Lorg/osgi/framework/Version; 在 de.paas.engine.adapter.activiti.PaasServiceTask.getServiceTaskService(PaasServiceTask.java:69) 在 de.paas.servicetasks.exampleprocess.SendMailTask​​.paasExecute(SendMailTask​​.java:58) 在 de.paas.engine.adapter.activiti .PaasServiceTask.execute(PaasServiceTask.java:119) 在 org.activiti.engine.impl.bpmn.helper.ClassDelegate.execute(ClassDelegate.java:115) 在 org.activiti.engine.impl.pvm.runtime.AtomicOperationActivityExecute.execute (AtomicOperationActivityExecute.java:44) 在 org.activiti.engine.impl.interceptor.CommandContext.performOperation(CommandContext.java:77) 在 org.activiti.engine.impl.persistence.entity。

我只能猜测这是由后台的 OSGi 魔法引起的？！非常感谢任何帮助。谢谢！！约翰内斯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T09:24:36.867

该`getVersion()`方法被添加到`Bundle`包的 1.5 版本中`org.osgi.framework`，即 OSGi 版本 4.2。看起来您已经针对 OSGi R4.2 进行了编译，但实际上运行的是更低的版本。

`Import-Package`通过在语句中使用版本范围可以轻松避免此类问题。在此示例中，您应该将`org.osgi.framework`包作为版本范围导入`[1.5,2.0)`......这将阻止您的包在早期版本的 OSGi 框架上解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:22:05.547

在这里工作的预感：我认为您的代码和平台代码对`org.osgi.framework`包的来源有不同的想法。当从不同的包加载 OSGi API 时会发生这种情况，导致类具有相同的名称但*不*兼容。

您可以尝试使用控制台查看捆绑包是如何连接到`org.osgi.framework`包的，并查看生成`Bundle`您检查的捆绑包的连接方式。我最好的猜测是您在应用程序中嵌入了太多内容，这可能在 Eclipse 中调试时可以正常工作，但在 Tomcat 中运行时连接不正确（取决于您部署项目的确切方式）。

# html - 具有自定义形状的 Html 图像地图生成器

> ID：10733489
> 
> 赞同：0
> 
> 时间：2012-05-24T08:05:19.650
> 
> 标签：html, image, map, generator

我正在寻找一种可以帮助我处理 html 地图标签的工具。我知道我可以用 Photoshop 和记事本自己完成，但是非常费力。我调查了 image-maps.com，但它放大了我的图像，所以我放置的坐标不适合我的网站。你知道替代工具吗？

问候，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:08:06.540

试试织梦者。 [http://www.adobe.com/products/dreamweaver.html](http://www.adobe.com/products/dreamweaver.html)

# facebook - Facebook 自定义时间线提要

> ID：10733490
> 
> 赞同：2
> 
> 时间：2012-05-24T08:05:22.063
> 
> 标签：facebook, customization, feed, facebook-timeline

我已经把头撞在墙上几个小时了，但是配置故事附件 - > 标题在哪里使用？它不会出现在我发布的提要项目中的任何地方，我正在努力找出它适合的位置。

还有一个后续问题，是否可以自定义提要标题？

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:57:01.243

我有同样的问题。未使用故事附件布局，并且在发布我的自定义操作后，我的标题在时间线中无处可寻。我在 Stack Overflow 上找到了答案：

[时间线动作布局 - 不显示附件](https://stackoverflow.com/questions/8823118/timeline-action-layout-no-attachment-displayed)

看起来 Facebook 是故意这样做的。如果这是真的，他们似乎应该在“配置故事附件”部分中警告您。

# c - 如何在 UNIX 的 makefile 中链接 C 程序的库文件？

> ID：10733493
> 
> 赞同：2
> 
> 时间：2012-05-24T08:05:35.750
> 
> 标签：c, unix, makefile, openssl

我已经使用我在独立程序中测试过的 openssl 编写了一个解密函数，它运行良好。但是这个功能是一个巨大项目的一部分，所以它必须包含在那个程序中。为了执行我的独立程序，我使用了以下运行良好的命令：

```
cc -c aaa.c -I/usr/local/ssl/include
gcc -o aaa aaa.o -I/usr/local/ssl/include -L/usr/local/ssl/lib -lcrypto -lm
./aaa 
```

我为我的主程序制作了一个makefile，在里面这个函数将被调用。

这两个程序都可以单独运行，但是当我在程序中插入函数的定义时，它给了我那些位于 openssl 头文件（即 des.h）之一中的变量的错误。我使用了一些 DES_cblock 类型的变量：

```
typedef unsigned char DES_cblock[8]; 
```

还有另一种结构，其定义如下：

```
typedef struct DES_ks
{
    union
    {
        DES_cblock cblock;
        DES_LONG deslong[2];
    }ks[16];
} DES_key_schedule; 
```

我在我的程序中像这样使用了这个结构

```
DES_key_schedule keysched1,keysched2,keysched3; 
```

但它没有认识到这些变量。而且由于在执行独立程序时没有这样的错误，这意味着我无法在主程序中正确链接库文件。我如何使这项工作。这些是我得到的错误：

```
Syntax error at line 1399, column 16,file/export/home/jayesho/src/custom/FRB/tgl_frbsenddata.ec:
    Error at line 1399, column 16 in file /export/home/jayesho/src/custom/FRB/tgl_fr
bsenddata.ec
    DES_cblock hex_key1,hex_key2,hex_key3,hex_ivec,iv;
...............1
PCC-S-02201, Encountered the symbol "hex_key1" when expecting one of the followi
ng:
   ; , = : ( [ * ? | & < > + - / % . ^ *= /= %= += -= <<= >>=
   &&= ||= ^= | & == != <= >= << >> ++ -- ->
The symbol ";" was substituted for "hex_key1" to continue.
Syntax error at line 1402, column 22, file /export/home/jayesho/src/custom/FRB/tgl_frbsenddata.ec:
Error at line 1402, column 22 in file /export/home/jayesho/src/custom/FRB/tgl_fr
bsenddata.ec
    DES_key_schedule keysched1,keysched2,keysched3;
.....................1
PCC-S-02201, Encountered the symbol "keysched1" when expecting one of the follow
ing:
   ; , = : ( [ * ? | & < > + - / % . ^ *= /= %= += -= <<= >>=
   &&= ||= ^= | & == != <= >= << >> ++ -- ->
The symbol ";" was substituted for "keysched1" to continue.
Syntax error at line 1436, column 38, file /export/home/jayesho/src/custom/FRB/tgl_frbsenddata.ec:
Error at line 1436, column 38 in file /export/home/jayesho/src/custom/FRB/tgl_fr
bsenddata.ec
   if (DES_set_key_checked((C_Block *)hex_key1, &keysched1)) 
```

现在我只需要在我的程序中正确链接库文件以使整个程序运行。前面提到的头文件是 des.h，它是 openssl 的一部分。*我也尝试通过-lcrypto*包含加密库 以前这个 des.h 没有被正确包含，但现在我成功地包含了 des.h 而没有错误。也有人提出仅仅包含头文件是不够的，它的实现文件也需要[链接](https://stackoverflow.com/questions/10715572/how-to-include-the-basic-header-files-which-are-available-with-c-in-unix/10715653#comment13939873_10715653)，所以我现在想知道如何包含和链接什么？如何找出需要链接的链接的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:29:21.103

通常，您使用 LDFLAGS`-l`为链接器定义选项，并`-L`使用 LDFLAGS 定义标志。编辑 Makefile 并添加适当的选项。

```
CPPFLAGS += -I/usr/local/ssl/include 
LDFLAGS += -L/usr/local/ssl/lib 
LDLIBS += -lcrypto -lm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:27:44.893

这些是编译器错误，您还没有进入链接阶段。

我猜想，在编译 tgl_frbsenddata.ec 时，编译器不知道 DES_cblock 或 DES_key_schedule 是什么。在编译器遇到错误的那一刻，我怀疑 des.h 尚未包含任何您可能相信的内容。

您的编译器可能包含一个仅进行预处理的选项（在 gcc 和 clang 中，它是`-E`）。我建议您在源文件上使用该选项运行它，以查看 typedef 是否出现。

# iphone - MKMapKit。中心图显示所有 MKAnnotation

> ID：10733496
> 
> 赞同：1
> 
> 时间：2012-05-24T08:05:44.890
> 
> 标签：iphone, objective-c, ios, mkmapview, mapkit

我在地图上有 2-10 个注释图钉。当我单击一个按钮时，我希望地图缩小并居中，以便用户可以看到所有图钉。我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T08:18:54.817

假设您有一个包含所有注释的数组，您可以执行以下操作：

```
CLLocationCoordinate2D leftTop = CLLocationCoordinate2DMake(-90,180);
CLLocationCoordinate2D rightBottom = CLLocationCoordinate2DMake(90, -180);

for (int i=0; i < [annotations count]; i++) {
    id<MKAnnotation> annotation = (id<MKAnnotation>)[annotation objectAtIndex:i];
    CLLocationCoordinate2D coord = annotation.coordinate;
    if (coord.latitude > leftTop.latitude) {
        leftTop.latitude = coord.latitude;
    }
    if (coord.longitude < leftTop.longitude) {
        leftTop.longitude = coord.longitude;
    }
    if (coord.latitude < rightBottom.latitude) {
        rightBottom.latitude = coord.latitude;
    }
    if (coord.longitude > rightBottom.longitude) {
        rightBottom.longitude = coord.longitude;
    }
}

MKCoordinateSpan regSpan = MKCoordinateSpanMake(leftTop.latitude-rightBottom.latitude, rightBottom.longitude-leftTop.longitude);
CLLocationCoordinate2D center = CLLocationCoordinate2DMake(leftTop.latitude-regSpan.latitudeDelta/2, leftTop.longitude+regSpan.longitudeDelta/2);
regSpan.latitudeDelta = MAX(regSpan.latitudeDelta, 0.01);
regSpan.longitudeDelta = MAX(regSpan.longitudeDelta, 0.01);
MKCoordinateRegion reg = MKCoordinateRegionMake(center, regSpan);
if (CLLocationCoordinate2DIsValid(center)) {
    [_mapView setRegion:reg animated:YES];
} 
```

# java - 终止应用程序和 ScheduledExecutorService；线

> ID：10733500
> 
> 赞同：1
> 
> 时间：2012-05-24T08:05:55.433
> 
> 标签：java, multithreading, scheduled-tasks

我有以下逻辑（简化）：

```
public class Application {

    public static volatile boolean stopServer;
    private static ScheduledExecutorService taskScheduler;

    private static Thread listenerThread;

    public static synchronized void switchStopServer() {
        stopServer = true;

        listenerThread.interrupt();
        taskScheduler.shutdownNow();
    }

    public static void main(String[] args) {
            int threadPoolSize = 4;
            taskScheduler = Executors.newScheduledThreadPool(threadPoolSize);

            listenerThread = new ListenerThread();
            taskScheduler.schedule(listenerThread, 0, TimeUnit.NANOSECONDS);
    }

}

public class ListenerThread extends Thread {

    private static ServerSocket serverSocket;
    private Socket socketConnection;

    @Override
    public void run() {
         while (!Application.stopServer) {
              try {
                   socketConnection = serverSocket.accept();
                   new CommunicatorThread(socketConnection).start();
              } catch (SocketException e) {
              } catch (Exception e) {
              }
         }  
    }

    private static void closeServerSocket() {
         try {
              if (serverSocket != null && !serverSocket.isClosed()) serverSocket.close();
         } catch (Exception e) { }
    }

    @Override
    public void interrupt() {
         closeServerSocket();
         super.interrupt();
    }

} 
```

我想要实现`Thread`的是以正确的方式终止 s 。首先，这 ( `switchStopServer()`) 是正确的方法，还是有更好的解决方案？

我对 s 有点困惑[`ScheduledExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)，因为`shutdownNow()`不会打断`Thread`s，也不会[`ScheduledFuture.cancel(true)`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#cancel%28boolean%29)（至少对我来说没有），所以我不能打断`ServerSocket.accept()`。我知道，在我的示例中不需要`ScheduledExecutorService`，但在我的实际应用程序中需要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T08:08:56.277

我相信你的问题是你很困惑`Thread`并且`Runnable`. 即使`ListenerThread`extends `Thread`，它实际上*也不*是它自己的线程。该线程由`ExecutorService`仅调用您的`run()`方法的线程池管理。这只是[某种]工作，因为`Thread`也实现了`Runnable`. 当您调用`ListenerThread.interrupt()`时，尽管您正在调用您的方法，但您并没有中断线程池中的线程，`interrupt()`而只是直接在调用线程中。这应该关闭套接字，因为它`closeServerSocket()`从外部调用。

当您调用`ScheduledFuture.cancel(true)`or`shutdownNow()`时，*池*线程应该被中断，但这*不会*在那里调用您的`interrupt()`方法。您可以通过`Thread.currentThread().isInterrupted()`在您的`run()`方法中使用来测试中断。

您应该`ListenerThread`从扩展进行更改`Thread`，而只是实现它`Runnable`（**请参阅下面的编辑**）。您将希望在您的`run()`方法中执行类似以下循环的操作：

```
while (!Application.stopServer && !Thread.currentThread().isInterrupted()) { 
```

要中断该`accept()`方法，您将不得不关闭`serverSocket`另一个线程。这很可能由正在调用`interrupt()`. 它应该关闭套接字`shutdownNow()`或`cancel()`线程池，然后它可以等待池终止。

**编辑：**

实际上，我想知道您为什么要为您的池使用一个池，`ListenerThread`因为它们中只有一个，它会立即被安排，并且它只是直接在任何连接上启动一个新线程。我会`taskScheduler`完全移除你的游泳池，继续`ListenerThread`扩展`Thread`，然后打电话`new ListenerThread().start();`。

外螺纹仍然会关闭`serverSocket`以停止`ListenerThread`. 如果您还需要关闭所有连接，则`ListenerThread`需要保留`socketConnection`周围的集合，以便`close()`在`accept()`抛出`IOException`.

此外，目前你有`private Socket socketConnection;`这具有误导性，因为它会在每次调用`accept()`. 我将其重写为：

```
 Socket socketConnection = serverSocket.accept();
 new CommunicatorThread(socketConnection).start(); 
```

# ruby-on-rails - 检查更新值是否与数据库存储的值不同

> ID：10733505
> 
> 赞同：1
> 
> 时间：2012-05-24T08:06:15.603
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我正在开发一个活动日历，其中每个小时都是一个时间段，允许用户签署一个约会。

由于有一项功能允许用户更新插槽（以及更改日期/时间），我想在更新值之前执行一些检查，确保插槽是空闲的。所以我最终得到了这样的方法：

```
if Event.find(:all, :conditions => ["start_at = ? AND event_calendar_id = ?", self.start_at, self.id])
  errors.add :base, "You cannot save this appointment in that slot."
  return false
end 
```

顺便说一句，它在不更改日期时间字段的情况下更新其他字段时会产生问题，因为它会发现自己并引发异常，从而无法更新它。

有没有一种方法可以访问数据库数据，例如当前 id，以便我可以从值中过滤掉自己，或者检查提交的日期时间字段是否等于数据库字段（所以我可以跳过此检查）。

最好的方法是什么？谢谢。

PS我正在使用rails 3.2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:26:49.377

要从结果中排除`self`，只需将条件添加到您的`where`排除其 ID 中。还可以通过调用节省一些内存和处理器时间，它只`exists?`返回 true 或 false，而不是获取整行并构建新对象：

```
Event.where( :start_at => start_at,
             :event_calendar_id => event_calendar.id ).
      where( "id <> ?", id ).
      exists? 
```

# android - getpixel() 显示错误

> ID：10733514
> 
> 赞同：1
> 
> 时间：2012-05-24T08:06:56.960
> 
> 标签：android, getpixel

我正在使用一个图像视图，我想在其中知道像素颜色，所以我使用 getpixel()... 方法，但它向我显示一个错误 .... 这就是我使用 get pixel 方法的方式..

```
image  = BitmapFactory.decodeResource(getResources(), rid);
                pixel = image.getPixel((int)x,(int)y);
                k.setText(Integer.toString(pixel)); 
```

它向我显示一个错误.......

```
05-24 13:29:38.101: E/AndroidRuntime(21987): FATAL EXCEPTION: main
05-24 13:29:38.101: E/AndroidRuntime(21987): java.lang.NullPointerException
05-24 13:29:38.101: E/AndroidRuntime(21987):    at com.example.nam.FirstImage.pageinfo(FirstImage.java:100)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at com.example.nam.FirstImage.onTouch(FirstImage.java:63)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.view.View.dispatchTouchEvent(View.java:3881)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:869)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1769)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1135)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1753)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2227)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1886)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.os.Looper.loop(Looper.java:130)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at android.app.ActivityThread.main(ActivityThread.java:3687)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at java.lang.reflect.Method.invokeNative(Native Method)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at java.lang.reflect.Method.invoke(Method.java:507)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-24 13:29:38.101: E/AndroidRuntime(21987):    at dalvik.system.NativeStart.main(Native Method) 
```

**编辑 ：：：：**

```
public class FirstImage extends ImageView implements OnTouchListener {

    MotionEvent event;
    TextView k;
    int rid;
    int pixel;
    Bitmap image;
    String huma ="human";
    String info = "human";
     float x = 0; //init value 
     float y = 0; //init value
     Animation animationFadeIn;
    int t=0;
    int i=1;

    public FirstImage(Context context) { 
        super(context); 
        k=(TextView)findViewById(R.id.textView1);

        } 
    public FirstImage(Context context, AttributeSet attrs) { 
        super(context, attrs);
        k=(TextView)findViewById(R.id.textView1);
        } 

    public void changeImage(int id){

                    this.setImageResource(id);
                rid=id;
                    final Animation animationFadeout=AnimationUtils.loadAnimation(getContext(), R.anim.zoomin);
                    this.startAnimation(animationFadeout);
                    this.setOnTouchListener(this);

    }
    @Override
    public boolean onTouch(View arg0, MotionEvent me) {

        switch(me.getAction()){
        case MotionEvent.ACTION_DOWN:
            x=me.getX();
            y= me.getY();
            pageinfo(x,y);
            break;
        case MotionEvent.ACTION_MOVE:
            x=me.getX();
            y= me.getY();
            pageinfo(x,y);
            break;
        case MotionEvent.ACTION_UP:
            x=me.getX();
            y= me.getY();
            pageinfo(x,y);
            break;
        case MotionEvent.ACTION_OUTSIDE:
            x=me.getX();
            y= me.getY();
            pageinfo(x,y);
            break;
        default: return true;
        }
        return false;
    }
    public void pageinfo(float x, float y) {
        // TODO Auto-generated method stub

         if(rid==R.drawable.cell){
                image  = BitmapFactory.decodeResource(getResources(), rid);
                pixel = image.getPixel((int)x,(int)y);
                k.setText(Integer.toString(pixel));

                }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:59:23.397

你得到一个`NullPointerException`，因为你的`k`会员是`null`；

它被声明并使用一个扩展，并使用which 返回 back`ImageView`进行初始化。在父级中使用相同的代码 ( )会返回所需的实例。`findViewById``null``findViewById``Activity``TextView`

你应该`k`从你的类中删除该成员`FirstImage`，当你`pixel`在一个事件中获得值时`onTouch`，将它传递给`Activity`: 让它处理其他 gui 的东西：

所以改变你`FirstImage`的：

```
pixel = image.getPixel((int)x,(int)y);
((AshActivity) getContext()).writePixelIntoK(pixel); 
```

并在您的主要活动中实现该`writePixelIntoK`方法，例如：

```
public void writePixelIntoK(int pixel)
{
    k.setText("pixel touched: " + pixel);
} 
```

# math - 什么数学领域可以推导出手绘形状的方程式？

> ID：10733520
> 
> 赞同：0
> 
> 时间：2012-05-24T08:07:28.307
> 
> 标签：math, graph, autocad, adobe-illustrator

假设我有一个用 Thuluth 字体手绘的阿拉伯字符，如： [http ://arabicletters.info/wp-content/uploads/1.jpg](http://arabicletters.info/wp-content/uploads/1.jpg)

我在想一种方法，我可以重新创建相同的形状，但高度要大得多，同时保持其他特征完好无损（笔画宽度、厚度、弯曲开始发生的位置与高度的关系），这让我很好奇一种找到它的数学表示并玩弄它的方法，直到我能得到我想要的或任何其他形状。是否有数学子专业可以帮助解决这个问题？对于这个特殊问题，是否可以使用 Adob​​e Illustrator 或 AutoCAD 等程序来解决？

原谅菜鸟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:20:32.193

我不认为演绎是正确的词。

如果添加足够的点并进行贝塞尔样条拟合以匹配字母，则可以获得所需的内容。

可能有一种方法可以使添加点的过程自动化，但“足够”的标准很棘手。然后你必须告诉如何用样条连接点。

听起来您正在尝试用阿拉伯语重现光学字符识别。

# c# - 在 DB 中使用“newsequentialid”时的休眠身份映射

> ID：10733529
> 
> 赞同：0
> 
> 时间：2012-05-24T08:08:12.217
> 
> 标签：c#, sql, sql-server, nhibernate, hbm

我正在使用 NHibernate 将我的对象映射到数据库。其中一个对象称为“附件”。它的 ID 是使用 MS SQL server 2008 中的“newsequentialid”（作为默认值或绑定）生成的，用于为 id 列创建 Guid。

现在我想要的是，当插入新的附件时，NHibernate 将允许 SQL Server 使用 newsequentialid 创建 Guid。事情是我在尝试保存未设置 id 的新附件时不断收到异常“空标识符”（Guid.Empty）

这是我的 HBM 文件：

```
<class name="DataObjects.Services.NHAttachment, DataObjects, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" mutable="false" table="Attachments">
    <id name="Id" column="Guid" type="Guid" >
      <generator class="native"  />
    </id>..... 
```

如您所见，ID 使用生成器类设置为本机。

感谢您提前提供的所有帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T05:28:12.967

截至 2013 年 6 月 12 日，NHibernate 3.3 似乎不正确支持 NEWSEQUENTIALID，因为我尝试过但失败了。

例如有

```
 sec_UserRole
   (UserRoleId UNIQUEIDENTIFIER DEFAULT NewSequentialId(), 
    UserId, 
    RoleId, 
    CreationDate, 
    CreatedBy) 
```

有映射

```
 public SecUserRoleMapping()
    {
        Table("sec_UserRole");
        Id(x => x.UserRoleId, m => m.Generator(Generators.Native); 
```

我得到以下 SQL：

```
declare @p0 uniqueidentifier
declare @p1 uniqueidentifier
declare @p2 datetime2
declare @p3 uniqueidentifier
    set @p0 = '00000000-0000-0000-0000-000000000001'
    set @p1 = '383b75fd-6829-41b5-b8a6-63f1dc1acef0'
    set @p2 = '12/6/2013 5:09:56 AM'
    set @p3 = '00000000-0000-0000-0000-000000000001'

INSERT 
    INTO
        sec_UserRole
        (UserId, RoleId, CreationDate, CreatedBy) 
    VALUES
        (@p0, @p1, @p2, @p3);
    **select
        SCOPE_IDENTITY();** 
```

注意 ** 突出显示的部分。它试图获得最后一个身份！何时应该使用 OUTPUT 子句并使用输出参数获取它。 [http://jwwishart.wordpress.com/2009/08/05/returning-the-newsequentialid-after-insert-using-the-output-clause/](http://jwwishart.wordpress.com/2009/08/05/returning-the-newsequentialid-after-insert-using-the-output-clause/)

所以我的下一步是尝试创建一个新的自定义生成器。 [http://nhibernate.info/doc/howto/various/creating-a-custom-id-generator-for-nhibernate.html](http://nhibernate.info/doc/howto/various/creating-a-custom-id-generator-for-nhibernate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:10:07.790

如果你想告诉 NHibernate 在数据库模式中创建一个 GUID，那么我认为以下应该可以工作：

```
<id name="Id" column="Guid" type="Guid">
  <generator class="guid" />
</id> 
```

# .net - 具有多个数据库的 Wcf 数据服务

> ID：10733533
> 
> 赞同：0
> 
> 时间：2012-05-24T08:08:40.283
> 
> 标签：.net, wcf, wcf-data-services

我想构建一个 Wcf 数据服务，它的模型可以与多个数据库一起使用。我有 3 个相同的数据库，我想在每次查询时都告诉每个服务。

提前致谢 ...

# spring - 无法使用来自 activeMQ 的消息

> ID：10733538
> 
> 赞同：0
> 
> 时间：2012-05-24T08:08:47.430
> 
> 标签：spring, apache, activemq

我一直在尝试为活动 MQ 编写消费者客户端。但我一直无法消费消息。即使我设置了错误的用户名和密码，我仍然没有得到任何异常。有人可以检查我的配置：

```
 <beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:amq="http://activemq.apache.org/schema/core"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
  http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd">

<bean id="jmsFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
        <property name="brokerURL">
            <value>nio://localhost:61616</value> 
        </property>
        <property name="userName"><value>saffsd</value></property>
        <property name="password"><value>asdfa</value></property>
    </bean>
<bean id="pooledJmsFactory" class="org.apache.activemq.pool.PooledConnectionFactory" destroy-method="stop">
    <property name="connectionFactory">
        <ref local="jmsFactory"/>
    </property>
</bean>

<bean id="LV_TOPIC" class="org.apache.activemq.command.ActiveMQTopic" autowire="constructor">
    <constructor-arg value="TOPIC.LV_REPORTING" />
  </bean>

 <bean id="LV_QUEUE" class="org.apache.activemq.command.ActiveMQQueue" autowire="constructor">
    <constructor-arg value="QUEUE.LV_REPORTING" />
  </bean> 

<bean id="portfolioListener" class="com.oneinterface.enterprise.tradinggateway.listeners.Listener">
  </bean>

<bean id="javaConsumer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="pooledJmsFactory"/>
    <property name="destination" ref="LV_TOPIC" />
    <property name="messageListener" ref="portfolioListener" />
  </bean>

<bean id="ionaConsumer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="pooledJmsFactory"/>
    <property name="destination" ref="LV_QUEUE" />
    <property name="messageListener" ref="portfolioListener" />
  </bean>

</beans> 
```

我的Java代码是：

```
public static void main(String[] args) {
    FileSystemXmlApplicationContext context = new FileSystemXmlApplicationContext("config/LVConsumer.xml");
    DefaultMessageListenerContainer defaultListen = (DefaultMessageListenerContainer) context.getBean("javaConsumer");
    defaultListen.start();
    System.err.println("Consuming message from Topic >>" + defaultListen.getDestination().toString());

    DefaultMessageListenerContainer queueListen = (DefaultMessageListenerContainer) context.getBean("ionaConsumer");
    queueListen.start();
    System.err.println("Consuming message from Queue >>" + queueListen.getDestination().toString());

} 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:03:44.313

尝试像这样将 jmsFactory 包装在 org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter 中

```
<bean id="userCredentialsConnectionFactory"
        class="org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter">
        <property name="targetConnectionFactory">
            <ref bean="jmsFactory" />
        </property>
        <property name="username">
            <value>user</value>
        </property>
        <property name="password">
            <value>password</value>
        </property>
    </bean> 
```

并使用 userCredentialsConnectionFactory 代替 jmsFactory

# c# - 如何使用 C# 在运行时更改 Log4net 中的日志文件名

> ID：10733539
> 
> 赞同：1
> 
> 时间：2012-05-24T08:08:51.407
> 
> 标签：c#, web-config, log4net

我正在使用 Log4Net 在日志文件中写入日志并将其存储在本地临时文件夹位置 (C:\temp..)。现在我想在运行时更改文本（日志）文件名，所以我对我的配置文件以及我的应用程序做了一些代码更改。但是无法在本地临时文件夹上更改文件名，并且日志也没有写入文本文件。

你能请任何人告诉我这个问题的解决方案或告诉我一些其他的例子来解决这个问题吗？

这里我的代码是：

**我的配置文件（Web.Config）设置：**

```
<appender name="RollingPatternFileAppender"  type="log4net.Appender.RollingFileAppender">
    <file type="log4net.Util.PatternString" value="%property{LogFileName}.log" />
    <appendToFile value="true" />
    <rollingStyle value="Size" />
    <maxSizeRollBackups value="10" />
    <maximumFileSize value="100MB" />
    <staticLogFileName value="false" />
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date{yyyy-MM-dd HH:mm:ss} %-5level : [%logger] - %message %newline" />
    </layout>
</appender>
<logger name="SPM.SERVER">
    <level value="DEBUG" />
    <appender-ref ref="RollingPatternFileAppender" />
</logger> 
```

**我的申请代码是：**

```
ILog logger = LogManager.GetLogger("SPM.SERVER");
log4net.ThreadContext.Properties["LogFileName"] = "MyLog";
logger.Debug("Load Data",ex);
XmlConfigurator.Configure(); 
```

此代码没有在文件中写入日志，也没有更改文件名。任何人都请纠正我在这段代码中做错了什么，或者告诉我一些其他的例子来实现这个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:04:48.093

log4net 允许您拥有多个附加程序。您可以将每个配置为仅收听一组特定的消息。

看看这个非常好的[文档](http://logging.apache.org/log4net/release/manual/configuration.html)集。它有很多关于如何做事的例子。

这是一个相当粗略的例子：

```
<log4net>
  <appender name="A1" type="log4net.Appender.RollingFileAppender">
    <file value="Errors" />
    <appendToFile value="true" />
    <rollingStyle value="Date" />
    <staticLogFileName value="false" />
    <param name="DatePattern" value="dd.MM.yyyy'.txt'" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
    </layout>
  </appender>
  <appender name="A2" type="log4net.Appender.RollingFileAppender">
    <evaluator type="log4net.Core.LevelEvaluator">
      <threshold value="DEBUG"/>
    </evaluator>
    <filter type="log4net.Filter.StringMatchFilter">
      <stringToMatch value="Some special message" />
      <acceptOnMatch value="true" />
    </filter>
    <filter type="log4net.Filter.DenyAllFilter" />
    <file value="Debug" />
    <appendToFile value="true" />
    <rollingStyle value="Date" />
    <staticLogFileName value="false" />
    <param name="DatePattern" value="dd.MM.yyyy'.txt'" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
    </layout>
  </appender>
  <root>
    <appender-ref ref="A1" />
    <appender-ref ref="A2" />
  </root>
</log4net> 
```

# .net - 如何使用 libvlc 从我的 c# 应用程序流式传输视频？

> ID：10733543
> 
> 赞同：2
> 
> 时间：2012-05-24T08:09:07.960
> 
> 标签：.net, video, streaming, libvlc

我正在尝试用 c# 编写一个客户端-服务器视频流应用程序，并且我正在使用 libvlc。客户端工作正常，但我不确定我该如何做服务器。就像客户端一样，修改了媒体的 AddOptions 方法？然后播放媒体？

更新：我试过这个：

```
 private void button1_Click(object sender, EventArgs e)
    {
        //MyLibVlc vlc = new MyLibVlc();
        string[] args = new string[] { "-I", "dummy", "--ignore-config","" };
        instance = new VlcInstance(args);
        //:sout=#rtp{dst=79.114.124.180,port=5004,mux=ts,ttl=1} :sout-keep
        player = null;
        string source = "D:\\CM.mp4" ;
        VlcMedia media = new VlcMedia(instance, source);
        string[] options=new string[]{":sout=#rtp{dst=79.114.124.180,port=5004,mux=ts,ttl=1} :sout-keep"};
        media.AddOptions(options);
        if (player == null)
        {
            player = new VlcMediaPlayer(media);
        }
        else
        {
            player.Media = media;
        }
        player.Play();

    } 
```

我查看了日志文件。无法打开文件...我以错误的方式传递了 arg，或者缺少某些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-03-10T02:33:48.163

我知道这是一个很久以前的问题，但它仍然有超过 1k 的浏览量，所以也许有人会像我一样在查看和测试几个小时后需要它。

> “就好像客户端，修改媒体的AddOptions方法？然后播放媒体？”

是的。您只需要修改媒体 AddOptions。

> “我查看了日志文件。无法打开文件......我以错误的方式传递了 arg，或者缺少某些东西。”

这是我成功测试的示例选项。请注意，对于您的情况，某些选项可能会很丰富。

```
media.AddOption(":sout=#transcode{vcodec=h264,vb=0,scale=0,acodec=mp4a,ab=128,channels=2,samplerate=44100}:rtp{mux=ts,sdp=rtsp://192.168.1.123:554/stream.sdp}");

media.AddOption(":sout-keep"); 
```

在创建媒体时，我还需要提供确切的 FromType 参数。

```
var media = new Media(libVlc, "C:\\foo.avi", FromType.FromPath); 
```

如果您想从其他来源（例如另一个 RTSP 来源）进行流式传输，那么它将是：

```
var media = new Media(libVlc, "rtsp://192.168.1.234:555/live/0/MAIN", FromType.FromLocation); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-19T09:53:11.177

这是一个完整的示例，演示如何使用 LibVLCSharp 流式传输视频：

```
using System;
using LibVLCSharp.Shared;

namespace VlcStreaming
{
    class Program
    {
        static void Main(string[] args)
        {
            var serverIpAddress = "192.168.1.101";
            var streamUrl = $"rtsp://{serverIpAddress}:554/stream.sdp";

            LibVLCSharp.Shared.Core.Initialize();

            var libVlc = new LibVLC();
            var media = new Media(libVlc, "fe48f269-4f89-4c58-afd4-04c2e2e3f10f.MP4");

            media.AddOption(
                $":sout=#transcode{{vcodec=h264,vb=0,scale=0,acodec=mp4a,ab=128,channels=2,samplerate=44100}}:rtp{{mux=ts,sdp={streamUrl}}}");
            media.AddOption(":sout-keep");

            var player = new MediaPlayer(media);

            player.Play();

            Console.ReadLine();
        }
    }
} 
```

您需要为您的平台安装**LibVLCSharp**库以及 LibVlc 库（在我的情况下为**VideoLAN.LibVlc.Windows**）。

然后，您可以从 VLC 播放器连接到流 URL（如果从另一台机器等连接，则需要打开端口 554）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-03T13:27:57.240

关于 AddOption / Options.. 请注意，您必须分开每个选项，并且不要使用 Vlc-Media-Mplayer 给定的格式（可能会令人困惑！），收到的错误不会帮助您弄清楚！

所以，如果 Vlc-ML 选项是，

例如

```
":sout=#rtp{dst=127.0.0.1,port=12345,mux=ts} :no-sout-all :sout-keep" 
```

他们必须分开：

```
 media = new Media(m_libVlc, p_fileInfo.FullName, FromType.FromPath, 
                @":sout=#rtp{dst=127.0.0.1,port=12345,mux=ts}",
                @":no-sout-all", 
                @":sout-keep"); 
```

希望这对其他人有所帮助（在#cube45 的帮助下，我花了很长时间才弄清楚 :)

# c# - 当检测到 USB 时执行一些操作 c#

> ID：10733549
> 
> 赞同：1
> 
> 时间：2012-05-24T08:09:32.933
> 
> 标签：c#

我一直在开发一个应用程序，现在我已经完成了检测 USB 设备（MASS STORAGE），但我需要做的是捕获该消息并且不要将其传递给 Windows。我想问一个密码，如果没问题，那么我想将消息传递给 Windows，否则丢弃它，，，我怎么能做到这一点，，，>

```
protected override void WndProc(ref Message m)
{
switch(m.Msg)
{
case Win32.WM_DEVICECHANGE: OnDeviceChange(ref m); break;
}
base.WndProc (ref m);
}

void OnDeviceChange(ref Message msg)
{
int wParam = (int)msg.WParam;
if (wParam == Win32.DBT_DEVICEARRIVAL)
{
    label1.Text = "Arrival";
    //MessageBox.Show("" + wParam);
    //msg = Message.Create(new IntPtr(),1,new IntPtr(),new IntPtr());
}
else if (wParam == Win32.DBT_DEVICEREMOVECOMPLETE) label1.Text =
 "Remove";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:12:56.230

您无法阻止 Windows 检测硬件，除非您的软件作为低级应用程序在**环 0 （或 1，不记得）保护级别下运行。**

这只能通过低级编程（C、ASM）而不是 C# 来实现。IL 语言永远无法做你想做的事情。

无论如何，您所做的只是将消息跳过到 Form 的基类，而不是更多。不管你是否愿意，系统都会继续向其他应用程序发送这样的消息。

# r - 如何删除一列中与第二列不匹配的行？

> ID：10733551
> 
> 赞同：-1
> 
> 时间：2012-05-24T08:09:42.407
> 
> 标签：r, loops, if-statement

我有以下问题，我不知道在 R 中从哪里开始：我有两列具有相同的信息，但一列包含一些附加信息。我希望两列完全相同。这是一个例子：

```
1   1
1   1
2   1
2   2
3   2
3   2
4   2
4   3
5   3
5   3
    4
    4
    4
    5
    5
    5
    5
    5 
```

因此，必须删除第二列中的一些数字，以便两列具有相同的长度并且在每一行中具有相同的数字。我想有可能构造一个循环并告诉 R 删除第二列中的数字，直到`column1 = column2`. 但我不知道从哪里开始。如果两行不匹配，R是否有可能自动读取两列并删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:31:33.607

从表面上看你的问题，这将只返回第 1 列 == 第 2 列的行和带有 NA 的行也被删除。如果这不是您期望的输出，请进一步澄清您的问题，最好使用可[重现](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)的示例。

```
> dat <- read.table(text = "1   1
+ 1   1
+ 2   1
+ 2   2
+ 3   2
+ 3   2
+ 4   2
+ 4   3
+ 5   3
+ 5   3
+ NA    4
+ NA    4
+ NA    4
+ NA    5
+ NA    5
+ NA    5
+ NA    5
+ NA    5", header = FALSE)

> dat[dat$V1 == dat$V2 & complete.cases(dat),]
  V1 V2
1  1  1
2  1  1
4  2  2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:33:20.533

首先，让我们制作一些 R 对象来说明您的问题：

```
a <- c(1,1,2,2,3,3,4,4,5,5)
b <- c(1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,5) 
```

从问题来看，听起来您将它们放在同一个对象中：

```
c <- cbind(a,b)
  Warning message:
In cbind(a, b) :
  number of rows of result is not a multiple of vector length (arg 1) 
```

但这实际上将第一个`length(b) - length(a)`元素添加`a`到末尾，使其与`b`.

您可以只填写 first 的缺失值`a`：

```
 a2 <- append(a, rep(NA, 6) 
```

现在您可以将它们绑定在一起：

```
 c <- cbind(a2, b) 
```

但现在听起来你想从 b 中删除与 a 不匹配的元素。您提出了一个 for 循环。但这会变得混乱，并且很快就会证明手头的任务定义不明确。`while`可能更合适，但同样，正如@user1407656 在评论中提到的那样，您可以通过将两列绑定`a`在一起来获得所需的结果：

```
 d <- cbind(a,a) 
```

# mysql - 使用 LONGTEXT 作为变量来创建 SELECT 字符串会导致问题

> ID：10733559
> 
> 赞同：0
> 
> 时间：2012-05-24T08:10:22.810
> 
> 标签：mysql

我有一个存储过程中超过 540 个字符的 sql select 语句

我已将其放入名为`l_final_query`type的变量中`LONGTEXT`

现在，当我执行此查询时：

```
PREPARE stmt7 FROM @l_final_query;
EXECUTE stmt7; 
```

它失败。但是，当我开始删除 sql 的最后一个 order by 子句时，它可以工作。我过去曾遇到过用于执行的变量大小和变通方法的问题。但现在我没有解决方法。我试图将该`order by` 子句放在另一个变量`l_final_query2`中，并将其与大选择连接起来，但这也不起作用。

这是附加到变量并被执行的 sql。我已经包含了 order by 子句：

```
set @l_final_query = concat("SELECT a.project_code as projectCode, a.project_name as  projectName, a.project_creation_date as projectCreationDate, a.project_end_date as projectEndDate, a.project_status as projectStatus, count(c.project_code) as num from projects a inner join ", l_table_name, " b on a.project_name like concat(\"%\",b.expertise_desc,\"%\") OR a.project_description like concat(\"%\",b.expertise_desc,\"%\") left join project_ids c on c.project_code = a.project_code group by a.project_code order by a.project_status, a.project_creation_date desc"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:24:51.120

根据手册， MySQL`varchar`数据类型在 5.0.3 及更高版本中可以取 0 到 65,535。不要认为 longtext 是必需的。你可以尝试只使用varchar吗？

此外，请显示 SQL 命令和您尝试过的连接等尝试，以供人们查看并指出任何其他问题。

# wpf - mediaelement.source 无法播放视频

> ID：10733560
> 
> 赞同：0
> 
> 时间：2012-05-24T08:10:23.950
> 
> 标签：wpf, mediaelement

在我的 window_loaded 上，我放了这个：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            mediaElement1.Source = new Uri("/WpfTest;component/Videos/acar_ikan_masin.mp4", UriKind.Relative);
        } 
```

并且文件 acar_ikan_masin.mp4 已经在我的项目中（我使用 Add>Existing Item> 将它添加到我创建的新文件夹 Videos）。但似乎vs找不到视频。mediaelement 工作正常，因为我可以将任何视频文件拖放到 mediaelement 上，它就会播放。对于已经添加到项目中的文件，设置源的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:45:29.663

看来我只需要更改路径

```
mediaElement1.Source = new Uri(@"Videos/acar_ikan_masin.mp4", UriKind.Relative); 
```

并将文件复制到输出目录设置为“始终复制”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:47:48.607

MediaElement 在后台使用窗口媒体播放器，以便使用它。

确保您的系统中有最新的 WMP。并且 WMP 还支持 mp4 类型的编解码器。如果不是安装 wmp 编解码器包。

尝试使用 wmv 它会工作。

```
 OpenFileDialog ofd = new OpenFileDialog();
            ofd.Filter = "Media Files (*.wmv)|*.wmv";
            ofd.ShowDialog();
            mediaplayer1.source = new  Uri(ofd.FileName); 
```

# c++ - 从 C++ 文件中读取二维字符数组

> ID：10733561
> 
> 赞同：1
> 
> 时间：2012-05-24T08:10:24.107
> 
> 标签：c++, arrays, char, 2d, fstream

首先，我对 C++ 的了解非常有限，这是我的第一堂课，所以这可能看起来很愚蠢，但请耐心等待，我会要求您保持简单或解释清楚，提前谢谢。

好的，目标是我想用里面的规则创建这个文件，这样我就可以在一个单独的函数中读取它。但是，当我运行它时，我没有收到任何错误，但它首先出现时根本没有空格，最后我得到了一些随机的 ascii。

这是运行代码的结果 Welcometothetypinggame1.Typetheentiresentenceinoneline2.IstimedandwillaffectthescoreØ-™wîú{ Dx&a¼ Ë' ©ÉaDx&a®pa

```
#include <cstdlib>
#include <fstream>
#include <iostream>

int main(int argc, char** argv) {
//set the sentences i want the file to print
char o[3][40]={"Welcome to the typing game             ",
            "1\. Type the entire sentence in one line",
            "2\. Is timed and will affect the score  "};

//creating the file to read in
ofstream out;
out.open("rules.txt");
for(int i=0;i<3;i++){
    for(int x=0; x<39; x++){
        out<<o[i][x];
    }
    out<<"\n";
}
out.close();

//creating a new array to read the data that was stored above
char a[3][40];
ifstream in;
in.open("rules.txt");
for(int i=0;i<3;i++){
    for(int x=0; x<40; x++){
        in>>a[i][x];
    }
}
in.close();

//and just printing out the array to see the results
for(int i=0;i<3;i++){
    for(int x=0; x<40; x++){
        cout<<a[i][x];
    }
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T08:27:28.807

问题出在这里：

```
in>>a[i][x]; 
```

提取运算符`>>`提取格式化数据。格式化数据是指由空格（如空格）分隔的字符块。在提取过程中，所有空白字符都将被忽略。所以你不能使用`>>`运算符读取空白字符。

您需要做的是读取为未格式化的数据：

```
in.get(a[i][x]); 
```

[在此处](http://www.cplusplus.com/reference/iostream/istream/operator%3E%3E/)和[此处](http://www.cplusplus.com/reference/iostream/istream/get/)阅读更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:31:29.843

在此特定示例中不要使用 >>。它从您的文件中读取格式化数据。要么使用

```
in.get(a[i][x]); 
```

或者更好的是，删除你的 char 数组并将它们声明为字符串并将它们放入动态容器中，比如 vector。

```
ifstream in("rules.txt");
vector<string> myLines;
while (!in.eof()) {
    string temp;
    getline(in,temp);
    myLines.push_back(temp);
} 
```

现在，您将所有规则都存储在向量中的单独字符串中。将它们写入文件也很容易。当您使用 for 循环从 0 到 40 进行迭代，并且字符串不是 40 个字符长时，您会得到“随机 ascii”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:24:15.147

默认情况下，提取运算符 >> 将忽略空格。您可以按照其他答案中的建议读取未格式化的数据，也可以像这样更改默认行为：

```
in.open("rules.txt");
in >> noskipws;
for(int i=0;i<3;i++){
    for(int x=0; x<40; x++){
        in>>a[i][x];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T08:47:27.687

**第1部分**

> 它首先出现，没有空格

问题就在这里

```
for(int x=0; x<39; x++){
   out<<o[i][x];
} 
```

你只写数据，你不格式化你的输出。

您有两种可能的解决方案：

1.  使用`<iomanip>`和使用`setw`和`setfill`
2.  在每个条目之后（或之前）添加一个空格。

第二个选项的示例：

```
for(int x=0; x<39; x++) {
    out << o[i][x] <<" ";
} 
```

显然，这也会在最后一个条目之后（或在第一个条目之前）放置空格。如果您不希望这样做，则需要附加代码。

**第2部分**

> 最后我得到了一些随机的ASCII

问题（如其他人所述）出在此处：

```
for(int i=0;i<3;i++){
    for(int x=0; x<39; x++) 
```

您可以任意限制/增加您的输出，而不考虑您必须写入/读取的变量的实际大小。

对于写入（屏幕或文件相同），您应该执行类似的操作（请注意，如果`o`是向量的向量，而不是 char 数组，这是一个解决方案。我不喜欢使用数组。）

```
for(int i=0;i<o.size();i++){
    for(int x=0; x<o[0].size(); x++) 
```

相反，对于阅读，您需要检查是否正在更改行和/或是否已到达文件末尾。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T15:03:25.673

如果我没记错的话，每行末尾缺少 /n 会阻止“自动换行”，它会全部出现在一行上。

# iphone - 在地图视图上拖动注释图钉

> ID：10733564
> 
> 赞同：13
> 
> 时间：2012-05-24T08:11:05.343
> 
> 标签：iphone, ios, draggable, mkannotation

注释图钉是可拖动的，但我无法将其拖放到目标位置。问题是我怎样才能得到目标位置的坐标，我把注释销放在哪里？有什么方法存在吗？

**编辑1：**

注释别针的中心似乎从未改变过我放下别针的地方。

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)annotationView didChangeDragState:(MKAnnotationViewDragState)newState 
fromOldState:(MKAnnotationViewDragState)oldState 
{
if (newState == MKAnnotationViewDragStateEnding)
{
    NSLog(@"x is %f", annotationView.center.x);
    NSLog(@"y is %f", annotationView.center.y);

    CGPoint dropPoint = CGPointMake(annotationView.center.x, annotationView.center.y);
    CLLocationCoordinate2D newCoordinate = [self.mapView convertPoint:dropPoint toCoordinateFromView:annotationView.superview];
    [annotationView.annotation setCoordinate:newCoordinate];

}
} 
```

**编辑2：**

注释.h

```
@property (nonatomic,readwrite,assign) CLLocationCoordinate2D coordinate; 
```

注释.m

```
- (void)setCoordinate:(CLLocationCoordinate2D)newCoordinate {
coordinate = newCoordinate; 
} 
```

**编辑 3：** 无论我在哪里拖动图钉，dropAt 的 NSLog 输出总是相同的。

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)annotationView didChangeDragState:(MKAnnotationViewDragState)newState 
fromOldState:(MKAnnotationViewDragState)oldState 
{
if (newState == MKAnnotationViewDragStateEnding)
{
    CLLocationCoordinate2D droppedAt = annotationView.annotation.coordinate;
    NSLog(@"Pin dropped at %f,%f", droppedAt.latitude, droppedAt.longitude);
}
} 
```

**编辑4：**

Annotaion.m @dynamic startAddr;

```
- (CLLocationCoordinate2D)coordinate
{
coordinate.latitude = [self.startAddr.latitude doubleValue];
coordinate.longitude = [self.startAddr.longitude doubleValue];    
return coordinate;
}

- (void)setCoordinate:(CLLocationCoordinate2D)newCoordinate {
//I need to update the self.startAddr.latitude and longitude here. Problem solved.
self.startAddr.latitude = [NSNumber numberWithDouble:newCoordinate.latitude];
self.startAddr.longitude = [NSNumber numberWithDouble:newCoordinate.longitude];

coordinate = newCoordinate; 
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-24T09:25:19.383

首先，您必须像这样创建一个自定义注释：

**MyAnnotation.h**

```
#import <MapKit/MapKit.h>

@interface MyAnnotation : NSObject <MKAnnotation>{

    CLLocationCoordinate2D coordinate;

}
- (id)initWithCoordinate:(CLLocationCoordinate2D)coord;
- (void)setCoordinate:(CLLocationCoordinate2D)newCoordinate;
@end 
```

**我的注释.m**

```
#import "MyAnnotation.h"

@implementation MyAnnotation
@synthesize coordinate;

- (NSString *)subtitle{
    return nil;
}

- (NSString *)title{
    return nil;
}

-(id)initWithCoordinate:(CLLocationCoordinate2D)coord {
    coordinate=coord;
    return self;
}

-(CLLocationCoordinate2D)coord
{
    return coordinate;
}

- (void)setCoordinate:(CLLocationCoordinate2D)newCoordinate {
    coordinate = newCoordinate; 
}

@end 
```

之后，您只需要像这样使用您的注释：

```
// Assuming you have imported MyAnnotation.h and you have a self.map property pointing to a MKMapView
MyAnnotation *myPin = [[MyAnnotation alloc] initWithCoordinate:self.map.centerCoordinate]; // Or whatever coordinates...
[self.map addAnnotation:myPin]; 
```

此外，您必须为您的注释返回一个视图。你可以这样做：

```
- (MKAnnotationView *) mapView: (MKMapView *) mapView viewForAnnotation: (id<MKAnnotation>) annotation {
    MKPinAnnotationView *pin = (MKPinAnnotationView *) [self.map dequeueReusableAnnotationViewWithIdentifier: @"myPin"];
    if (pin == nil) {
        pin = [[[MKPinAnnotationView alloc] initWithAnnotation: annotation reuseIdentifier: @"myPin"] autorelease]; // If you use ARC, take out 'autorelease'
    } else {
        pin.annotation = annotation;
    }
    pin.animatesDrop = YES;
    pin.draggable = YES;

    return pin;
} 
```

然后，一旦您`MKMapViewDelegate`在控制器中采用了该协议，您就可以在拖动它后抓取一个图钉的坐标，如下所示：

```
- (void)mapView:(MKMapView *)mapView 
 annotationView:(MKAnnotationView *)annotationView 
didChangeDragState:(MKAnnotationViewDragState)newState 
   fromOldState:(MKAnnotationViewDragState)oldState 
{
    if (newState == MKAnnotationViewDragStateEnding)
    {
        CLLocationCoordinate2D droppedAt = annotationView.annotation.coordinate;
        NSLog(@"Pin dropped at %f,%f", droppedAt.latitude, droppedAt.longitude);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:34:36.960

出乎意料的是，实现注释的 setCoordinates 方法，并在注释坐标发生变化时进行回调

编辑：当你的注解移动时要小心它的 dragState 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T10:11:04.003

难道你不想这样做：

设置注释委托，然后

```
- (void)setCoordinate:(CLLocationCoordinate2D)newCoordinate {
   coordinate = newCoordinate; 
   if (self.delegate respondsToSelector:@selector(mapAnnotationCoordinateHaveChanged))
    [self.delegate performSelector(@selector(mapAnnotationCoordinateHaveChanged))];
} 
```

在您的委托中：

```
- (void) mapAnnotationCoordinateHaveChanged{
 //some coordinates update code
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T12:54:56.660

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation
{
    MKAnnotationView *a = [ [ MKAnnotationView alloc ] initWithAnnotation:annotation reuseIdentifier:@"currentloc"];
    //  a.title = @"test";
    if ( a == nil )
        a = [ [ MKAnnotationView alloc ] initWithAnnotation:annotation reuseIdentifier: @"currentloc" ];

    NSLog(@"%f",a.annotation.coordinate.latitude);
    NSLog(@"%f",a.annotation.coordinate.longitude);

    CLLocation* currentLocationMap = [[[CLLocation alloc] initWithLatitude:a.annotation.coordinate.latitude longitude:a.annotation.coordinate.longitude] autorelease];
    [self coordinatesToDMS:currentLocationMap];

    MKPinAnnotationView *annView=[[MKPinAnnotationView alloc] initWithAnnotation:a reuseIdentifier:@"currentloc"];
    if(a.annotation.coordinate.longitude == mapView.userLocation.coordinate.longitude ||  a.annotation.coordinate.latitude == mapView.userLocation.coordinate.latitude  )
    {
        if ([annotation isKindOfClass:MKUserLocation.class])
        {
            //user location view is being requested,
            //return nil so it uses the default which is a blue dot...
            return nil;
        }       
        //a.image = [UIImage imageNamed:@"userlocation.png"];
        //a.pinColor=[UIColor redColor];
    }
    else 
    {

        // annView.image =[UIImage imageNamed:@"map-pin.png"];
        //PinFirst=FALSE;
        //annView.pinColor = [UIColor redColor];
        // annView.annotation=annotation;
    }

    annView.animatesDrop = YES;
    annView.draggable = YES;

    annView.canShowCallout = YES;

    return annView;
}

- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{
    NSLog(@"map Drag");
}

- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view didChangeDragState:(MKAnnotationViewDragState)newState
fromOldState:(MKAnnotationViewDragState)oldState;
{
    NSLog(@"pin Drag");

    if (newState == MKAnnotationViewDragStateEnding)
    {
        CLLocationCoordinate2D droppedAt = view.annotation.coordinate;
        NSLog(@"Pin dropped at %f,%f", droppedAt.latitude, droppedAt.longitude);

        CLLocation* draglocation = [[[CLLocation alloc] initWithLatitude:droppedAt.latitude longitude:droppedAt.longitude] autorelease];

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-08T22:45:44.027

Swift 2.2、Xcode 7.3.1 的示例：

*   创建采用 MKAnnotation 协议的自定义类

    （注意：Swift 没有针对 KVO 兼容属性的自动通知，所以我添加了自己的 - 这不是必需的）：

    ```
    import MapKit

    class MyAnnotation: NSObject, MKAnnotation {

        // MARK: - Required KVO-compliant Property
        var coordinate: CLLocationCoordinate2D {
            willSet(newCoordinate) {
                let notification = NSNotification(name: "VTAnnotationWillSet", object: nil)
                NSNotificationCenter.defaultCenter().postNotification(notification)
            }

            didSet {
                let notification = NSNotification(name: "VTAnnotationDidSet", object: nil)
                NSNotificationCenter.defaultCenter().postNotification(notification)
            }
        }

        // MARK: - Required Initializer
        init(coordinate: CLLocationCoordinate2D) {
            self.coordinate = coordinate
        }
    } 
    ```

*   将 pin 视图声明为可拖动的：

    ```
    // MARK: - MKMapViewDelegate Actions
    func mapView(mapView: MKMapView, viewForAnnotation annotation: MKAnnotation) -> MKAnnotationView? {

        let pinView = MKPinAnnotationView(annotation: annotation, reuseIdentifier: pinViewReuseIdentifier)
        pinView.draggable = true

        return pinView
    } 
    ```

* * *

现在，当引脚被拖动时，它会调用委托方法：

```
func mapView(mapView: MKMapView, didSelectAnnotationView view: MKAnnotationView) 
```

在这里，您可以检索新的结束坐标。

* * *

`userInfo`或者，您可以为自定义注释的`coordinate`属性通知创建字典。然后观察者可以在收到通知后检索这些值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-13T22:18:28.090

在 Swift 中，我的问题是`coordinate`属性是`let`我的子类中的 a 而`var`不是`MKAnnotation`.

```
class MyAnnotation  : NSObject, MKAnnotation {

    let title       : String?
    let subtitle    : String?
    var coordinate  : CLLocationCoordinate2D

    init(title: String, subtitle: String, coordinate: CLLocationCoordinate2D) {
        self.title = title
        self.subtitle = subtitle
        self.coordinate = coordinate
        super.init()
    }
} 
```

# actionscript-3 - 如何捕获在 actionscript 和 flex 中动态创建的 textinput 值？

> ID：10733568
> 
> 赞同：0
> 
> 时间：2012-05-24T08:11:31.950
> 
> 标签：actionscript-3, apache-flex

我已经使用 actionscript 动态创建了 textinput，但是当我从前端输入输入值并将其保存到 db（文件）中时，它只显示在 db 中输入的最后一个值。请帮助

```
 for(var i:int=0;i<5;i++){
        var txt1:TextInput=new TextInput();
    txt1.width=88;
    createtxtinput(txt1);
    txt1.addEventListener(Event.CHANGE,test123(i,txt1))

var txt2:TextInput=new TextInput();
    txt2.width=88;
    createtxtinput(txt2);
    txt2.addEventListener(Event.CHANGE,test123(i,txt2))
  }

public function test123(x:int,txtmaterial:TextInput){
    return function(event){
    //  
        setValuestable2multi(x,txtmaterial.text);
//  Alert.show(x.toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:33:19.380

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               creationComplete="_creationCompleteHandler(event)">

    <s:layout>
        <s:VerticalLayout />
    </s:layout>

    <fx:Script>
        <![CDATA[
        import flash.events.FocusEvent;
        import mx.events.FlexEvent;
        import spark.components.TextInput;
        import spark.events.TextOperationEvent;

        //---------------------------------------------------------------------
        //
        //  constants
        //
        //---------------------------------------------------------------------
        /**
         * @private
         * TextInput instances id prefix
         */
        private const TEXT_INPUT_ID_PREFIX:String = "textInput";

        //---------------------------------------------------------------------
        //
        //  private methods
        //
        //---------------------------------------------------------------------
        /**
         * @private
         * 
         * Create TextInput instances
         */
        private function _createTextInputs():void
        {
            var count:uint = 5;
            var textInput:TextInput;
            for (var i:uint; i < count; i++)
            {
                textInput = new TextInput();
                textInput.id = TEXT_INPUT_ID_PREFIX + i.toString();

                // listen TextOperationEvent.CHANGE event
                textInput.addEventListener(TextOperationEvent.CHANGE, _textInput_changeHandler);

                // or listen FocusEvent.FOCUS_OUT

                //textInput.addEventListener(FocusEvent.FOCUS_OUT, _textInput_focusOutHandler);
                addElement(textInput);
            }
        }

        /**
         * @private
         * 
         * Get TextInput instance index and value and pass in this values to "saving to database" method
         * 
         * @param   textInput TextInput instance
         */
        private function _handleChangesInTextInput(textInput:TextInput):void
        {
            var textInputIndex:int = parseInt(textInput.id.replace(TEXT_INPUT_ID_PREFIX, ""), 10);
            var textInputValue:String = textInput.text;

            _saveTextInputDataToDatabase(textInputIndex, textInputValue);
        }

        /**
         * @private
         * 
         * Mockup method for saving to database
         * 
         * @param   textInputIndex TextInput instance index
         * @param   textInputValue TextInput instace value
         */
        private function _saveTextInputDataToDatabase(textInputIndex:int, textInputValue:String):void
        {
            //TODO save data to database
        }

        //---------------------------------------------------------------------
        //
        //  handlers
        //
        //---------------------------------------------------------------------
        /**
         * @private
         * 
         * Application FlexEvent.CREATION_COMPLETE handler
         * 
         * @param   event
         */
        private function _creationCompleteHandler(event:FlexEvent):void
        {
            _createTextInputs();
        }

        /**
         * @private
         * 
         * TextInput instances TextOperationEvent.CHANGE handler
         * 
         * @param   event
         */
        private function _textInput_changeHandler(event:TextOperationEvent):void
        {
            _handleChangesInTextInput(TextInput(event.target));
        }

        /**
         * @private
         * 
         * TextInput instances FocusEvent.FOCUS_OUT handler
         * 
         * @param   event
         */
        private function _textInput_focusOutHandler(event:FocusEvent):void
        {
            _handleChangesInTextInput(TextInput(event.currentTarget));
        }
        ]]>
    </fx:Script>    
</s:Application> 
```

如果您要监听`TextOperationEvent.CHANGE`事件，那么任何按键（当 TextInput 具有输入焦点时）都会导致该`_handleChangesInTextInput`方法被调用。

如果您要监听`FocusEvent.FOCUS_OUT`事件，则`_handleChangesInTextInput`在某些 TextInput 失去输入焦点后将调用方法。

# silverlight - Telerik RadGridView 数据与单元格格式的比较

> ID：10733570
> 
> 赞同：0
> 
> 时间：2012-05-24T08:12:00.003
> 
> 标签：silverlight, formatting, comparison, telerik-grid, radgridview

我的应用程序中有两个 RadGridView。两个网格从两个不同的来源提取信息。该信息绑定到网格视图。

两个来源都是相同的 Type `List<MyComplexObject>`。现在我想比较这两个网格，并将第二个网格中具有不同值的单元格（红色）着色。

我们如何使用 Silverlight、C# 和 Telerik RadGridView 实现此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:09:03.590

您可以为要以不同方式着色的网格使用样式选择器。您需要准备一个正常的单元格样式和一个“红色”单元格样式，如[本](http://www.telerik.com/help/silverlight/gridview-cell-style-selector.html)例所示。本文介绍了单元格样式选择器的完整解决方案，因此您将全面了解其工作原理。您需要额外做的是向`DependencyProperty`样式选择器添加一个属性 ( )，您可以将数据集合绑定到您检查单元格值有效性的数据集合上。

# c# - C# 浏览器组件

> ID：10733578
> 
> 赞同：3
> 
> 时间：2012-05-24T08:12:38.577
> 
> 标签：c#, html, css, webbrowser-control

这里有谁知道支持最新 HTML5/CSS3 功能的可用 webBrowser 组件是什么？特别是像 webkit-gradient-radial 或 gradient-radial 这样的新语法？

我试过“Awesomemium”、“Open Webkit Sharp”、“Webkit.Net”，但这些都没有实现。

# c# - 拖放时滚动（WPF）

> ID：10733581
> 
> 赞同：13
> 
> 时间：2012-05-24T08:13:02.473
> 
> 标签：c#, wpf, drag-and-drop, treeview, scroll

好的，伙计们，我一直在为这个问题抓狂，花了好几个小时试图研究它是如何工作的，但我还没有找到答案，如果你想看看我的任何 SRC，请随时询问它，我会看看我是否可以提供帮助。

基本上我遇到的问题是`TreeView`我的应用程序中有一个文件夹，即：

```
Catalog

  Brands
    Nike
    Adidas
    Lactose

  Styles
    Sandles
    Trainers
    Boots 
```

我要解决的问题是，当我拖动文件夹时（这是在我的`DragDropManager`课堂上处理的），我无法向上或向下滚动（只是显示一个可爱的停止标志）。我实际上也无法在树视图中找到滚动条，所以我不确定它是如何生成的（这不是我自己的软件，我最近开始为一家公司工作，所以我不熟悉代码，也没有其他人好像知道。）

如果我想将某些东西从最顶部移动到最底部，这是一个问题。

滚动无需拖动即可自行正常工作。

如果有人希望看到我的代码的任何部分，请随时询问，因为我不确定要向你们展示什么。

我已经阅读了好几篇文章，只是摸不着头脑。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-29T09:07:20.787

我已经创建了一个附加属性来实现这种行为，看看我的帖子在这里 -

[执行拖放时自动滚动容器的附加行为](http://weblogs.asp.net/akjoshi/archive/2012/05/28/Attached-behavior-for-auto-scrolling-containers-while-doing-drag-amp-drop.aspx)

主要逻辑是这样的 -

```
private static void OnContainerPreviewDragOver(object sender, DragEventArgs e)
{
    FrameworkElement container = sender as FrameworkElement;

    if (container == null) { return; }

    ScrollViewer scrollViewer = GetFirstVisualChild<ScrollViewer>(container);

    if (scrollViewer == null) { return; }

    double tolerance = 60;
    double verticalPos = e.GetPosition(container).Y;
    double offset = 20;

    if (verticalPos < tolerance) // Top of visible list? 
    {
        //Scroll up
        scrollViewer.ScrollToVerticalOffset(scrollViewer.VerticalOffset - offset);
    }
    else if (verticalPos > container.ActualHeight - tolerance) //Bottom of visible list? 
    {
        //Scroll down
        scrollViewer.ScrollToVerticalOffset(scrollViewer.VerticalOffset + offset);     
    }
} 
```

关于 SO 的类似问题（尽管它们主要用于`ListBox`/`ListView`但也应该适用`TreeView`）-

[WPF列表框在拖动时自动滚动](https://stackoverflow.com/questions/1316251/wpf-listbox-auto-scroll-while-dragging)

[WPF ListView 数据绑定拖放自动滚动](https://stackoverflow.com/questions/559606/wpf-listview-databound-drag-drop-auto-scroll)

[WPF 拖动滚动无法正常工作](https://stackoverflow.com/questions/938989/wpf-drag-to-scroll-doesnt-work-correctly)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-03T14:33:27.423

我知道这个问题真的很老，但这是作为附加属性的 MVVM 方式：

```
 using System.Windows;
    using System.Windows.Controls;

    namespace AndroidCtrlUI.XTools.Behaviors
    {
        ///<summary>
        /// TreeItemAttach 
        ///<para/> TreeViewItem
        ///</summary>
        public sealed class TreeItemAttach
        {
            #region BringIntoView

            ///<summary>
            /// DependencyProperty
            ///</summary>
            public static readonly DependencyProperty BringIntoViewProperty = DependencyProperty.RegisterAttached("BringIntoView", typeof(bool), typeof(TreeItemAttach), new UIPropertyMetadata(false, (s, e) =>
            {
                if ((bool)e.NewValue != (bool)e.OldValue && s is TreeViewItem t)
                {
                    if ((bool)e.NewValue)
                    {
                        t.Selected += BringIntoView;
                    }
                    else
                    {
                        t.Selected -= BringIntoView;
                    }
                }
            }));

            ///<summary>
            /// Get
            ///</summary>
            ///<param name="target">DependencyObject</param>
            ///<returns>ICommand</returns>
            public static bool GetBringIntoView(DependencyObject target)
            {
                return (bool)target.GetValue(BringIntoViewProperty);
            }

            ///<summary>
            /// Set
            ///</summary>
            ///<param name="target">DependencyObject</param>
            ///<param name="value">ICommand</param>
            public static void SetBringIntoView(DependencyObject target, bool value)
            {
                target.SetValue(BringIntoViewProperty, value);
            }

            private static void BringIntoView(object sender, RoutedEventArgs e)
            {
                if (e.Source is TreeViewItem s)
                {
                    double h = s.ActualHeight;
                    if (s.IsExpanded && s.Items.Count > 0)
                    {
                        h = s.ActualHeight / TreeWalker(s);
                    }
                    s.BringIntoView(new Rect(0, h * -1, s.ActualWidth, h * 2.5));
                }
            }

            private static long TreeWalker(TreeViewItem item)
            {
                long c = item.Items.Count;
                foreach (object i in item.Items)
                {
                    if (i != null && item.ItemContainerGenerator.ContainerFromItem(i) is TreeViewItem t && t.IsExpanded && t.Items.Count > 0)
                    {
                        c += TreeWalker(t);
                    }
                }
                return c;
            }
            #endregion
        }
    } 
```

它可以像这样使用：

```
<Style x:Key="TreeViewItemStyle" TargetType="{x:Type TreeViewItem}">
    <Setter Property="tool:TreeItemAttach.BringIntoView" Value="True"/>
</Style> 
```

# eclipse-plugin - 在 Eclipse-RCP 中显示但禁用视图

> ID：10733586
> 
> 赞同：0
> 
> 时间：2012-05-24T08:13:36.603
> 
> 标签：eclipse-plugin, eclipse-rcp

我的 RCP 应用程序中有两个视图，其中我正在执行任务（后台操作），操作状态显示在 view1 中。我想要实现的是，在执行任务期间，用户不应该能够移动/遍历到其他视图。它们（其他视图）应该被禁用。

作为一种解决方法，我尝试使用 IWorkbenchPage 的 showView 方法。

```
activePage.showView(view.ID,null,IWorkbenchPage.VIEW_VISIBLE); 
```

我使用了三个常量 VIEW_VISIBLE、VIEW_ACTIVATE、VIEW_CREATE。不过，在我的情况下没有一个工作。顺便说一下，在 showView 方法签名中，我无法弄清楚什么是辅助 id。

下面是我的问题的模拟演示 ![在此处输入图像描述](../Images/ced1655d34d6df426b844cfd7916108c.png)

这里用户可以遍历查看Demo，运行过程中，其实不应该。我该如何解决这个问题，请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:20:49.543

您不能真正禁用视图（没有“禁用视图”的概念）。你唯一能做的就是隐藏它。使用 hideView() 方法来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:33:37.487

另一种方法是在操作进行时使用`ProgressService`来显示模态进度对话框。这样，用户必须等到操作完成才能与 UI 交互。

```
PlatformUI.getWorkbench().getProgressService().run(true, false, runnable); 
```

请参阅[http://wiki.eclipse.org/FAQ_Why_should_I_use_the_new_progress_service%3F](http://wiki.eclipse.org/FAQ_Why_should_I_use_the_new_progress_service%3F)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T08:59:32.027

您可以像禁用任何其他 SWT 控件一样禁用视图：通过设置`setEnabled(false)`top `Composite`。通常通过覆盖来完成`ViewPart.showBusy(...)`...

# asp.net - 文档模板/内容——如何存储？

> ID：10733587
> 
> 赞同：0
> 
> 时间：2012-05-24T08:13:39.180
> 
> 标签：asp.net, database-design, azure, azure-web-roles

如果可能 - 我想使用 ASP.NET / Azure / Local SQL Server 进行缓存

应该可以在没有大量编码工作的情况下创建表单（如果开发人员团队可以这样做，那就可以了），因为客户将有不同的表单（避免使用傲慢的行）。表单非常基本（字符串/数值的文本框，单选框/复选框/组合框，从中检索一些数据并显示它们）。更复杂的部件被打包到组件/控件中

*   有没有一种简单的方法可以实现这一目标？
*   在哪里以及如何存储这些信息？文档存储？关系型数据库？（这是我最重要的问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T17:00:10.477

出于性能原因，将数据和访问该数据的代码保存在同一位置是个好主意，因此，如果您要在云中运行 ASP.NET 网站，那么我建议您也将数据放在云。

在 Windows Azure 中安全、持久地存储数据有三个基本选择：

1.  SQL Azure 数据库。与具有相同编程模型的 SQL Server 非常相似。
2.  Windows Azure Blob 存储。Blob 类似于文件；您自然会存储在文件中的任何内容都适合 Blob 存储。
3.  Windows Azure 表存储。低成本数据表，但没有关系数据库功能。

您可以在 Azure.com 的“开发人员”部分找到有关这些存储选项的更多信息。

# css - Grid960 SharePoint 页面布局

> ID：10733589
> 
> 赞同：0
> 
> 时间：2012-05-24T08:13:40.073
> 
> 标签：css, sharepoint, page-layout

我的母版页使用 Grid960 CSS 框架。但我不确定我的页面布局是否正确使用了 CSS 框架。

我得到了令人讨厌的垂直和水平滚动条。如何摆脱讨厌的垂直和水平滚动条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:21:25.210

您可以使用[css 属性`overflow: hidden;`](http://reference.sitepoint.com/css/overflow)来删除两个滚动条

或者您可以专门针对每个：

*   `overlow-x: hidden;`
*   `overflow-y: hidden;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:36:39.247

以下是我的建议：

1.  我建议使用 IEDeveloperToolBar 或 Fiddler 并确保所有引用的 css 都正确链接并且不显示 404。
2.  首先引用 shraepoint 相关的 css，然后按照它们在示例 html 中引用的确切顺序引用 960 网格 css。

如果您需要更多帮助，请发布一些示例网址，以便对其进行审核。

# c# - 游戏开发 - 避免闪烁

> ID：10733590
> 
> 赞同：4
> 
> 时间：2012-05-24T08:13:43.960
> 
> 标签：c#, .net, winforms, graphics

我正在用 winforms（C# 和 .netframework 2.0）开发一个类似俄罗斯方块的游戏。winform 有一个背景图像和一个图片框，它们以 500 毫秒的间隔向下移动（分配了新的位置）。

问题是当图片框向下移动时，表单的背景图像会在图片框之前所在的位置闪烁。如果我不使用任何背景图像，则没有闪烁。

是否有任何图形加速器或任何类型的解决方案可以解决闪烁问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:16:43.007

设置`DoubleBuffered = true`在您的控件上。这应该有助于防止闪烁。

有关该`DoubleBuffered`属性的文档，请参见此处：http:
[//msdn.microsoft.com/en-us/library/system.windows.forms.control.doublebuffered.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.doublebuffered.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T08:18:18.943

用于此的术语是`Double Buffering`。这个想法很简单 - 从 2 个窗格开始，但只显示一个。绘制到隐藏窗格，并快速交换隐藏和可见窗格。冲洗并重复每个过渡（动画）。

幸运的是，您不必在 .NET 中处理这些细节，控件会为您完成。这个 SO 问题将对您有所帮助：[如何在表单上加倍缓冲 .NET 控件？](https://stackoverflow.com/questions/76993/how-to-double-buffer-net-controls-on-a-form)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T09:52:32.670

如果你在 Windows 窗体中开发游戏，你真的应该重写 OnPaint 并在每一帧上实现精灵的绘制，而不是移动重量级的 PictureBox 控件。

如果您使用您提到的方法，您会发现无论 DoubleBuffer 是什么，您都可能会得到闪烁。然而，在 OnPaint 中完成所有绘图后，DoubleBuffer 开始工作。

我进行了快速搜索，发现这篇关于使用 OnPaint 覆盖[在 Windows 窗体中创建游戏循环的有趣文章。](http://www.stevenmarkford.com/how-to-create-game-loop-windows-forms-net/)特别是看看`GameStateDrawer`哪个直接渲染到图形上下文。

# actionscript-3 - 绑定问题，无法绑定到类 * 上的属性 *

> ID：10733597
> 
> 赞同：0
> 
> 时间：2012-05-24T08:14:10.943
> 
> 标签：actionscript-3, apache-flex, flex4, mxml

我有一个名为 Student 的类，它具有多个属性以及属性`"isSelected:Boolean"`，并且该类被定义为 Bindable。

```
[Bindable]
[RemoteClass(alias="portal::Student")]
public class Student 
```

在一个 mxml 应用程序中，我有一个数据网格，其中它的数据提供者已设置为学生的 ArrayCollection。我有一列用于数据网格的复选框以及一个应该选择所有学生的 headerItemRenderer 复选框（应该选择或取消选择行中的所有复选框）。

我已经为标题中复选框的单击事件定义了一个处理程序，它将 dataProvider 中每个 Student 对象的 isSelected 属性设置为 false 或 true。但是单击标题中的此复选框时，我收到警告：无法绑定到“学生”类的属性“isSelected”，因此行中的复选框不会更新。

我不明白为什么绑定在这里不起作用，也不知道如何解决这个问题。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:00:02.083

让您的 actionscript 类扩展 EventDispatcher（绑定基于事件调度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:19:02.543

这取决于，我猜你在代码中的某个地方引用了你想要绑定的学生实例。该引用也必须声明为 [Bindable]，以使绑定链正常工作。

此外，当您不依赖 ActionScript 来使绑定工作时，您不必扩展 EventDispatcher，因为 MXML 将为您生成该代码（关于 Cosma 的评论）。

你定义一个内联渲染器吗？在我看来，这不是最佳选择，因为生成了一个组件并且调试变得模糊，因为您可能会遇到范围问题。我建议实现一个新组件，实现 IDataRenderer 并通过生命周期将数据传播给孩子，或者在 MXML 中实现该组件。为什么选择 IDataRenderer？这个接口是必须的。

另外，我不确定那个，但不应该是

```
 [Bindable]
    [RemoteClass(alias="portal.Student")]
    public class Student {} 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T17:29:04.870

您需要确保您的 ItemRenderer 将传入数据保存在标记为 [Bindable] 的属性中。你会想要传递整个学生，而不仅仅是“isSelected”......

# android - 将自定义 CheckBox 添加到 ListView

> ID：10733601
> 
> 赞同：0
> 
> 时间：2012-05-24T08:14:18.670
> 
> 标签：android, checkbox, adapter

我在 getView() （PlanAdapter 类）中添加了新的 CheckBox

```
public View getView(int position, View convertView, ViewGroup viewGroup) {
        Plan entry = listPlan.get(position);

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.walkRow, null, false);

        }
        LinearLayout d = (LinearLayout)convertView.findViewById(R.id.checkBoxPlace);

        TextView distance = (TextView) convertView.findViewById(R.id.distance);
        distance.setText(" " + entry.getexerciseNumber());

        TextView time = (TextView) convertView.findViewById(R.id.time);
        time.setText(" " + entry.getwholeTime());

        CheckBox chckStart = new CheckBox(context);
        chckStart = entry.getCheckBox();
        chckStart.setFocusable(false);
        d.addView(chckStart); //here i get force close
        return convertView;
    } 
```

当我向下滚动时它看起来很好，但是当我返回并向上滚动时它会崩溃。

计划类中的getter，setter

```
public CheckBox getCheckBox(){
        return checkBox;
    }

    public void setCheckBox(CheckBox checkBox){
        this.checkBox = checkBox;
    } 
```

和我在主类中的复选框

```
 for (byte i = 0; i < db.planView.size(); i++) {
        chcBox = new CheckBox(this);
        chcBox.setId(i);
        checkboxList.add(chcBox);

        listOfPlan.add(new Plan(db.planView.get(i).getText().toString(), db
                .count(db.planView.get(i).getText().toString(),
                        getApplicationContext()), chcBox));

    } 
```

日志：`http://wklej.to/RpBvr/html`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:26:58.437

您正在尝试将每个复选框添加到多个父视图，这是您无法做到的......

然而 ListView 已经有很多特性来实现复选框，这里有一种方法：

```
public class Example extends Activity implements OnItemClickListener {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String[] array = {"one", "two", "three"};
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, array);

        ListView listView = (ListView) findViewById(R.id.list);
        listView.setAdapter(adapter);
        listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        listView.setOnItemClickListener(this);
    }

    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        Log.v("Example", "ItemClick: " + ((ListView) parent).getCheckedItemPosition());
    }
} 
```

您可以简单地通过传递您自己的 XML 文件来自定义布局。

**添加**

每次显示一行时，您都会刷新`entry`数据并尝试添加复选框，这就是您可以向下滚动但不能向上滚动的原因。如果您想保留您的自定义适配器，只需在尝试再次添加相同的值之前检查该行是否已经初始化。

# scala - 集成客户端验证

> ID：10733602
> 
> 赞同：5
> 
> 时间：2012-05-24T08:14:18.623
> 
> 标签：scala, playframework, playframework-2.0, client-side-validation

**EDIT**
联系了 play-js-validation 的作者。出血边缘的东西；Play 必须针对即将发布的 2.10 上的虚拟化 scala 进行编译，并且尚不支持嵌套案例类。真正令人印象深刻的项目，我希望它能够实现，因为原型几乎完全符合我的期望......

发现这个： [https ://github.com/namin/play-js-validation](https://github.com/namin/play-js-validation)

有人知道 Play 2.0 中是否有内置客户端验证的计划吗？

我目前正在基于现有的 DB 模式生成控制器、模型（带有表单验证）和 dao scala 文件；希望将客户端验证作为该过程的一部分！

感谢提供线索，内幕知识等。

ps Play 用户组至少可以说是忙碌的；大多数帖子似乎都被完全忽略了（当然，许多与 Stackoverflow Play 相关的问题也没有得到解答，所以这个帖子可能是 DOA ......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T11:33:39.050

恐怕没有这样的计划，至少没有听说过（注意：我不是开发团队成员，只是玩家）

[在 Play's Lighthouse 上](https://play.lighthouseapp.com/projects/82401-play-20/overview)查看门票

另一方面，我怀疑这是否完全符合 Play 的假设。客户端验证是通过一些不应该由框架决定的外部JS解决方案完成的，没有人说它应该使用ie。默认情况下是 jQuery。

最后，使用客户端验证的唯一方法就是包含 JS 库并向表单字段添加适当的属性，即它将创建您可以使用[jQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)验证的标签：

```
@inputText(entrantForm("identitynumber"),
    '_label->"Identity number",
    'class -> "required",
    'minlength -> "11",
    'maxlength -> "11") 
```

# windows-phone-7 - WP7 - 监控传出消息

> ID：10733607
> 
> 赞同：1
> 
> 时间：2012-05-24T08:14:32.500
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

我正在尝试创建一个应用程序来计算用户从他/她的 Windows Phone 7 设备发送的短信数量。

我假设要做到这一点，我需要在后台运行一个应用程序，我现在相信 SDK v7.1 可以做到这一点。

但是，我似乎无法弄清楚如何让我的应用程序对传出的消息做出反应。即发送消息时如何增加计数器？是否有触发的特定事件可以设置处理程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T08:26:54.113

没有办法通知已发送外发短信 - Windows Phone 比（比如说）Android 更加锁定。

# jquery - prependTo 许多具有相同类的元素到它们的父 div？

> ID：10733608
> 
> 赞同：1
> 
> 时间：2012-05-24T08:14:38.267
> 
> 标签：jquery

我正在尝试这个：

```
$(document).ready(function () {
    $(".qa-a-count").appendTo(".qa-q-item-main");
}); 
```

但是有很多`.qa-a-count`div `.qa-q-item-main`。他们最终相互依附。我该怎么做才能让它们只附加到它们的父 div（`.qa-q-item-main div`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:17:09.313

```
$('.qa-a-count').each(function() {
   // .parent() if this is a direct child of `qa-q-item-main`
   $(this).appendTo($(this).closest('.qa-q-item-main')); 
}); 
```

这将遍历每个`.qa-a-count`并附加到其祖先。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:17:30.553

```
$(".qa-a-count").each(function (){
    // append this- (the current ".qa-a-count") 
    // to it's closest ".qa-q-item-main" element.
    $(this).appendTo($(this).closest(".qa-q-item-main"));
}); 
```

或缓存`$(this)`：

```
$(".qa-a-count").each(function (){
    var $this = $(this);
    $this.appendTo($this.closest(".qa-q-item-main"));
}); 
```

但是，如果您要迭代大量元素，则性能提升并没有那么大。
['$(this)' 的成本是多少？](https://stackoverflow.com/q/10433014/601179)

# php - 查询以检查单词是否存在 php MySQL？例如：像拼字游戏这样的游戏

> ID：10733610
> 
> 赞同：2
> 
> 时间：2012-05-24T08:15:29.007
> 
> 标签：php, mysql

您好，我正在寻找一些工作来创建一些像拼字游戏这样的游戏，它将获取用户输入的字符串并检查字母是否构成一个真实的单词。假设您有一个包含所有英语单词的列表，大约有一百万个条目，是否需要很长时间来检查“zoo”是否存在？如果需要很长时间，这样的游戏会做什么？

这个问题假设您使用的是 php 和 MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:20:50.777

如果您有一个带有 1 个主键“单词”的单词数据库表，那么即使您有一百万个条目也不应该花很长时间......

```
SELECT COUNT(*) FROM words WHERE word = 'zoo'
// returns 1 or 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:24:56.953

你可以查询像`select ( COUNT(*) or whatever field you like,i.e word) from yourtable where word = 'user_inputted string'`

而且您还必须索引该列，这样您的查询将运行得很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:40:01.877

如果您在 word 列上有索引，则包含单词的 100 万个条目应该不会很慢。这是因为单词会很短，但有足够的熵（统计分散）来利用密钥。

如果这是 100 万个短语，则比较这些短语可能需要更长的时间，并且为了优化，您可以将短语分解为前 3 个单词（在不同的列中）和一个包含 4 个短语的其余部分的列列索引。

像这样测试速度：

```
set_time_limit(60*60);
$pdo = new PDO('mysql:host=localhost;dbname=db', 'user', 'pass');

$x = microtime(TRUE);
for($i = 0; $i < 1000000; $i++) {
    $word = '';
    for($j = 0; $j < mt_rand(0,40); $j++) {
        $word .= chr(97+mt_rand(0,25));
    }
    if($_GET['select'])
        $pdo->query("SELECT FROM words WHERE word = '$word';");
    else if($_GET['insert'])
        $pdo->exec("INSERT IGNORE INTO words (word) VALUES ('$word');");
}
$x = microtime(TRUE)-$x;
var_dump($x);

CREATE TABLE IF NOT EXISTS `words` (
  `word` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  UNIQUE KEY `word` (`word`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

我在笔记本电脑上的时钟速度最初是 80.765522003174 秒，我已经进行了 10 次测试，平均为**93.478111839294**秒，对于 100 万条选择语句，意味着每个选择的十分之一毫秒。

考虑到我是用 PHP 计时的，这意味着实际的 SQL 执行速度要高得多，93.5 秒包括 PHP 通过 TPC 与 MySQL 通信。

我在表中插入了额外的 900 万个值，并针对 1000 万个值测试了运行 100 万个选择语句的相同脚本。总时长约为 52 秒。

# ios - ios：在后台排队阻塞并在网络可用时执行

> ID：10733614
> 
> 赞同：14
> 
> 时间：2012-05-24T08:15:43.980
> 
> 标签：ios, queue, grand-central-dispatch, reachability, parse-platform

我正在使用 parse.com API（提供 API 以将数据保存在其服务器上的托管后端）开发一个应用程序。我希望能够在线和离线无缝地使用该应用程序。为此，我需要使用一个队列，我可以在其中放置需要网络访问的块。当网络确实可用时，应该串行执行块，当网络离线时，应该暂停队列处理。

当网络变得可用/不可用时，我正在考虑将 GCD 与挂起/恢复一起使用。我想知道是否有更好的选择？如果将应用程序放在后台，这会起作用吗？这里的一个典型例子是，当网络不可用（排队）时，用户会保存一些数据，然后将应用程序置于后台。现在当网络可用时，是否可以在后台自动进行保存？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T15:46:33.233

我完全按照您使用`NSOperationQueue`. 首先，创建一个串行队列并默认挂起它：

```
self.operationQueue = [[[NSOperationQueue alloc] init] autorelease];
self.operationQueue.maxConcurrentOperationCount = 1;
[self.operationQueue setSuspended:YES]; 
```

然后，创建一个 Reachability 实例并注册`kReachabilityChangedNotification`：

```
[[NSNotificationCenter defaultCenter] addObserver:manager
                                         selector:@selector(handleNetworkChange:) 
                                             name:kReachabilityChangedNotification 
                                           object:nil];

[self setReachability:[Reachability reachabilityWithHostName:@"your.host.com"]];
[self.reachability startNotifier]; 
```

现在，当网络状态发生变化时启动和停止队列：

```
-(void)handleNetworkChange:(NSNotification *)sender {
    NetworkStatus remoteHostStatus = [self.reachability currentReachabilityStatus];

    if (remoteHostStatus == NotReachable) {
        [self.operationQueue setSuspended:YES];
    }
    else {
        [self.operationQueue setSuspended:NO];
    }
} 
```

您可以使用以下命令对块进行排队：

```
[self.operationQueue addOperationWithBlock:^{
    // do something requiring network access
}]; 
```

暂停队列只会阻止操作启动——它不会暂停正在进行的操作。在执行操作时，您总是有可能会丢失网络，因此您应该在操作中考虑到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T01:01:33.587

查看[-[PFObject saveEventually]](https://parse.com/docs/ios/api/Classes/PFObject.html#//api/name/saveEventually)。这应该会自动执行您尝试执行的操作，并具有抵御应用程序终止的额外好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T17:26:19.470

你看过使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)库吗？我相信它与 Reachabiltiy 挂钩，并且可以完全按照您的意愿行事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T08:27:07.833

我是 GCD 和 Blocks 的忠实粉丝，但为此我会使用`NSOperationQueue`. 我认为 GCD 更适合低级的东西。`NSOperationQueue`您可以取消某些操作。您还可以表达对其他操作的依赖关系（如果您的应用程序需要这样做）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-27T18:54:55.913

我们在内部项目中遇到了类似的问题，所以我编写了一个名为 OfflineRequestManager 的 pod，它包装了任何网络请求，并允许无论连接如何都可以将其加入队列。如果您将 Parse 请求（或其他）包装在符合 OfflineRequest 的对象中，则管理器会将其排入队列并确保在连接允许时它会发出。

最简单的用例看起来像

```
import OfflineRequestManager

class SimpleRequest: OfflineRequest {
    func perform(completion: @escaping (Error?) -> Void) {
        doMyParseThing(withCompletion: { response, error in
            handleResponse(response)
            completion(error)
        })
    }
}
///////
OfflineRequestManager.defaultManager(queueRequest: SimpleRequest()) 
```

# php - 某些浏览器的 ajax 头文件 php

> ID：10733615
> 
> 赞同：2
> 
> 时间：2012-05-24T08:16:03.013
> 
> 标签：php, jquery, ajax, browser, header

使用 AJAX 查询服务器 apache (php5)，我看到了浏览器的差异解释。

我必须将集合重写为路径 /ajax/get_category/1 而没有 .txt .json .php 等。

什么是所有浏览器的通用解决方案：IE7、8、9、Safari、Chrome、FF 等？

寻找 json 和数据的解决方案。

* * *

你能举例说明现成的数据 $('#content').html(data).

header("内容类型：文本/纯文本；字符集：UTF-8"); ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:17:45.443

这将强制浏览器不缓存被请求的数据，它会告诉浏览器正在发送 json 数据，

```
 header('Content-Type: application/json');
    header("Cache-Control: no-cache, must-revalidate");
    // HTTP/1.1
    header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");
    // Date in the past 
```

# c# - 以下 PLINQ 代码没有改进

> ID：10733616
> 
> 赞同：3
> 
> 时间：2012-05-24T08:16:12.567
> 
> 标签：c#, linq, sorting, plinq

我没有看到使用以下代码对处理速度的任何改进：

```
IEnumerable<Quote> sortedQuotes = (from x in unsortedQuotes.AsParallel()
                                           orderby (x.DateTimeTicks)
                                           select x); 
```

在顺序版本上：

```
IEnumerable<Quote> sortedQuotes = (from x in unsortedQuotes
                                           orderby (x.DateTimeTicks)
                                           select x); 
```

我在这里错过了什么吗？我将源集合中的项目数量从几千到几千万不等，没有大小显示并行版本领先。

任何提示表示赞赏。顺便说一句，如果有人知道更有效地排序的更快方法（给定我指定的项目变量类型（包含一个长 DateTimeTicks 项目在集合中排序），那也将不胜感激。

编辑：“高效排序”-> 尽可能快。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T08:29:11.527

根据[这个页面](http://msdn.microsoft.com/en-us/magazine/cc163329.aspx)，

> 如果您的查询中有排序，则将使用 stop-and-go 代替，因为流水线化排序的输出是浪费的。排序表现出极高的延迟 [...]，因此 PLINQ 更愿意将所有处理能力用于尽快完成排序。

您的查询*仅*包含排序，选择不计算在内。因此 PLINQ 引擎将按顺序执行它。

当排序是更大查询的一部分时，您只能期待一些改进。

# c# - writeableImage bgr101010 不以 32bpp 保存，而是以 48bpp 保存

> ID：10733620
> 
> 赞同：0
> 
> 时间：2012-05-24T08:16:31.760
> 
> 标签：c#, wpf, file, save, tiff

有人可以建议如何以`.tiff`32bpp 保存 bgr101010 格式文件吗？我的代码以 48bpp 保存？基本上我想用 10 位颜色深度保存 tiff 文件。

```
private void Bgr()
{
BitmapImage myBitmapImage = new BitmapImage();
BitmapSource bs = new BitmapImage(new Uri(@"img\android1.png", UriKind.Relative));

int stride = bs.PixelWidth * (bs.Format.BitsPerPixel / 8);

byte[] data = new byte[stride * bs.PixelHeight];
bs.CopyPixels(data, stride, 0);

WriteableBitmap w2Bmp = new WriteableBitmap(bs.PixelWidth, bs.PixelWidth, 96.0,  96.0,PixelFormats.Bgr101010, null);

 w2Bmp.WritePixels(
  new Int32Rect(0, 0, bs.PixelWidth, bs.PixelHeight),
  data, stride, 0);

image1.Source = w2Bmp;
var encoder = new TiffBitmapEncoder();
BitmapFrame frame = BitmapFrame.Create(w2Bmp);
encoder.Frames.Add(frame);

using (var stream = File.Create("XXX3.tiff"))
{
encoder.Save(stream);
}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:15:18.280

粗略地看一下 TiffBitmapEncoder 的反编译源，就会发现它调用了一个本地方法来实际写入 TIFF。如果即使在明确传递 PixelFormat 以写入它时选择写入其他内容，这也可能是底层 TIFF 编码器的限制。

您是否尝试过使用[ImageMagick](http://imagemagick.codeplex.com/)或类似的支持 TIFF 的东西？

# actionscript-3 - 从 sharedObject 中删除数组

> ID：10733625
> 
> 赞同：0
> 
> 时间：2012-05-24T08:16:43.800
> 
> 标签：actionscript-3

我有一个包含多个数组的 sharedObject：

共享上传对象：

```
[[4453] , [4454] , [4842] , [4999]]; 
```

如何从 sharedObject 中删除数组之一？

假设我从对象中删除数组 [4453]。所以我最终得到：

```
[[4454] , [4842] , [4999]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:29:23.033

首先从共享对象中读取旧值并在您的代码中修改它（作为局部变量）并修改新值只是更新共享对象。您将在共享对象中找到新值。

请提供您的属性名称和共享对象或给我您的代码快照。我会给你相同的代码......

请参考以下链接

[点击这里了解详情](http://www.republicofcode.com/tutorials/flash/as3sharedobject/)

在您的应用程序中获取数据并声明 shredobject，然后再次将您的新数据放入共享对象......

# button - 如何在 Ext.MessageBox Sencha Touch 2.0 的右上角嵌入自定义关闭按钮

> ID：10733626
> 
> 赞同：2
> 
> 时间：2012-05-24T08:16:46.470
> 
> 标签：button, sencha-touch, sencha-touch-2, messagebox

我正在尝试在 Sencha Touch 2.0 的 Ext.MessageBox 的右上角找到一种关闭（X 按钮）的方法，以便当您单击该按钮时它会关闭 MessageBox。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:35:35.570

您可能想看看这个不错的教程： [向浮动煎茶触摸面板添加操作按钮](http://www.swarmonline.com/2011/01/ext-ux-panelaction-add-action-buttons-to-floating-sencha-touch-panels/)

该解释适用于 ST1，但它可能会帮助您了解如何在 ST2 中实现这一目标。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:38:12.767

没有满足您需要的内置配置，因此您必须手动进行。

请注意，这`Ext.MessageBox`只是一个`float`and `modal` `Ext.Container`，因此您可以像普通容器一样对其进行自定义。

让我们尝试这样的事情（您可以在此处通过 Sencha Touch 2 文档实时编辑此代码：

[http://docs.sencha.com/touch/2-0/#!/api/Ext.MessageBox](http://docs.sencha.com/touch/2-0/#!/api/Ext.MessageBox)

```
var box = Ext.create('Ext.MessageBox',
                         {
                             id: 'message-box',
                             title: 'title', 
                             message: 'message', 
                             items: [
                                 {
                                 xtype: 'toolbar',
                                 height: '40px',
                                 docked: 'top',
                                 items: [
                                     {xtype: 'spacer'},
                                     {xtype: 'button', 
                                      text: 'X', 
                                      ui: 'plain',
                                      style: {padding: '5px'},
                                      handler: function(){Ext.getCmp('message-box').hide();}
                                     },
                                 ],
                                 }
                             ]
                        });
    box.show(); 
```

希望能帮助到你。

# ios - ios - 故事板自定义segue if/else？

> ID：10733628
> 
> 赞同：0
> 
> 时间：2012-05-24T08:16:54.627
> 
> 标签：ios, custom-controls, storyboard, uistoryboardsegue

.

你好，

我正在尝试为我的故事板制作自定义 Segue。现在我注意到，segue 似乎只能走一条路。

真的吗？或者我可以在那里设置一个 if/else 语句吗？

我已经尝试过了，但是在初始选项卡/单击按钮后变得无用。

我错过了什么吗？

我有点想到这个。在评论区我有代码，但我遵循这个想法的原则。

```
- (void) perform{
CGFloat ledge = 25;
CGSize screenSize = UIScreen.mainScreen.bounds.size;
BOOL left = TRUE;

MainViewController *src = (MainViewController *) self.sourceViewController;
SideMenuVC *dst = (SideMenuVC *) self.destinationViewController;

// [src presentViewController:dst animated:YES completion:nil];
[src.navigationController pushViewController:dst animated:YES];    

if(left){

   //Do the first thing, but the view is still partly in the screen

}else {    

    //Return to original place

}
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:23:21.737

不幸的是，UISegues 只是一种方式。您必须手动关闭模态 UIViewControllers 或使用 popViewControllerAnimated: 作为 UINavigationController。

# java - Wicket - 表单提交后的返回按钮

> ID：10733632
> 
> 赞同：0
> 
> 时间：2012-05-24T08:17:10.423
> 
> 标签：java, forms, wicket

我有一个表单和返回按钮的新问题。

采取这种形式：

```
public SearchSomethingForm() {
super(ORSAWebConstants.FORM);
setModel(new CompoundPropertyModel<Void>(this));

add(section01Panel);
add(section02Panel);
add(section03Panel);
add(new SubmitButton()); 
```

}

如您所见，我没有基于单个对象的属性模型。

在表单中，我只添加了一些面板，里面有一些 INPUT。例如：

```
private String name;
protected void onInitialize() {
 super.onInitialize();
 final TextField<String> foo = new TextField<String> ("name",new PropertyModel<String>(this,"name"));
 add (foo);
} 
```

每个面板代码都有类似的东西。一些带有 BIND 的输入到本地属性。

然后在 FORM SUBMIT 中，我可以读取值

```
section01Panel.getName(); 
```

**问题**

表单提交后，我打开一个带有结果的新页面。我想要一个返回按钮到表单的页面，每个预先输入的字段都已经编译，因此用户只需更改表单的一部分即可进行新的搜索。

如果没有特定的 PropertyModel，我就无法编译对象，并将其属性映射到表单字段上。表单不知道将添加哪种 FIELD。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:50:09.173

经过一些测试，我发现 Wicket 可以从页面传递整个页面，所以当我调用新页面时，我传递了表单页面：

```
SheetPage page = new SheetPage("SheetPage", idPojo,FormPage.this);
setResponsePage(page); 
```

在 SheetPage 中，我将有一个指向上一页的链接：

```
public SheetPage(String title, String idPojo, final FormPage fPage) {
    Link back = new Link("back"){
       private static final long serialVersionUID = 1L;

       public void onClick() {
         setResponsePage(fPage);
      };
    };
} 
```

当我返回 FormPage 时，我会发现该页面与打开表单页面之前完全一样，并且表单已完全预编译。惊人的！

# javascript - 如何在 Firefox Addon XUL 树中添加和删除行

> ID：10733638
> 
> 赞同：3
> 
> 时间：2012-05-24T08:17:29.600
> 
> 标签：javascript, tree, firefox-addon, xul

在我的 Firefox 扩展中，我有一个简单的树，它有两列。我正在尝试以编程方式：

*   添加一行
*   删除所有行

我的 XUL 树：

```
<tree flex="1" id="mytree" hidecolumnpicker="true">

  <treecols>
    <treecol id="sender" label="Sender" flex="1"/>
    <treecol id="subject" label="Subject" flex="2"/>
  </treecols>

  <treechildren>

  </treechildren>

</tree> 
```

Javascript 我尝试添加行：

```
// trying to add rows
var data = {
    {'sender' : 'John', 'subject' : 'something'},
    {'sender' : 'Adam', 'subject' : 'something else'},
    {'sender' : 'Bob', 'subject' : 'something else again'}
};

document.getElementById("mytree").view.data = data; 
```

这没有错误，树只是没有添加行。我知道代码运行，因为如果我添加`alert()`它会触发。

Javascript 我试图删除所有行：

```
var tree = document.getElementById("mytree");

tree.view.data = {};
tree.view.treeBox.rowCountChanged(0, -1); 
```

这会产生一个错误：

> document.getElementById("mytree").view.treeBox 未定义

**编辑：**

在 Wladimir 建议直接添加 XUL 元素之后，这将添加一行：

```
var treeChildren = document.getElementById("my_tree_children");

var treeitem = document.createElement('treeitem');
var treerow = document.createElement('treerow');

var treecell_1 = document.createElement('treecell');
var treecell_2 = document.createElement('treecell');

treecell_1.setAttribute('label', 'John');
treecell_2.setAttribute('label', 'something');

treerow.appendChild(treecell_1);
treerow.appendChild(treecell_2);

treeitem.appendChild(treerow);

treeChildren.appendChild(treeitem); 
```

尽管在此示例中进行了硬编码，但单元格（标签属性）的值将来自用户输入。将用户输入直接放入 XUL 元素的属性时，我应该使用什么编码/转义方法来防止 XSS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:15:09.560

让我这样问：为什么它*应该*起作用？文档告诉我们这[`tree.view`](https://developer.mozilla.org/en/XUL/tree#p-view)是一个[`nsITreeView`](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsITreeView)实例。并且`nsITreeView`没有名为 的属性`data`。仅仅因为你可以设置这个属性并不意味着它会做任何事情。

现在您将如何实际将数据放入`tree`小部件中？[文档](https://developer.mozilla.org/en/XUL/tree)解释说有几种树类型，根据类型，数据可能来自不同的地方。您可能想要使用默认选项 - 内容树。这意味着您需要为`treeitem`数据中的每一行创建元素并将这些元素添加到`treechildren`元素中——如示例中[所示](https://developer.mozilla.org/en/XUL/tree#A_tree_with_several_columns)。您可以使用常用的 DOM 方法动态生成这些元素。

小`tree`部件还可以从 RDF 或 XML 数据源自动生成其内容。但是，如果您将数据保存在 JavaScript 对象中，则唯一的选择是创建自定义`nsITreeView`实现并将其分配给`tree.view`. 但这并不是微不足道的，而且通常是矫枉过正。

# google-chrome - 什么是 .pem 文件以及如何使用它？

> ID：10733641
> 
> 赞同：20
> 
> 时间：2012-05-24T08:17:44.503
> 
> 标签：google-chrome, google-chrome-extension, pem

我正在设计一个新的 chrome 扩展，当我打包它时，我得到 2 个文件：一个**.crx**文件和一个**.pem**文件。

我想在我的服务器（共享）和 Chrome 网上商店上分发我的扩展程序。

你能告诉我什么是pem文件以及如何使用它吗？

我找不到有关它的文档。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-24T08:26:16.397

**打包程序创建两个文件：**

*   .crx文件，这是可以安装的实际扩展名**。**
*   一个**.pem**文件，其中包含私钥。

**如果您想，稍后将需要 .pem：**

*   更新扩展
*   将之前打包的扩展上传到 Chrome 网上应用店（确保文件名为**key.pem**（[更多信息](https://groups.google.com/forum/?fromgroups=#!topic/chromium-extensions/3vvygtEajMQ)））

所以，不要丢失您的私钥 ( **.pem** )！

# mysql - 在表复制操作中更新现有行和插入不存在行的最有效方法是什么？

> ID：10733644
> 
> 赞同：0
> 
> 时间：2012-05-24T08:17:47.207
> 
> 标签：mysql, sql

我有 2 张桌子：

```
stock:

pid name qty
--- ---- ---
1   aaaa   2
2   bbbb   3
1   aaaa   5
3   cccc   1
2   bbbb   2

stock_total:

pid name total_qty
--- ---- --------- 
```

我可以使用此查询从`stock`表中插入总数量的行`stock_total`

```
INSERT INTO stock_total (pid, name, total_qty)
SELECT pid, name, SUM(qty) 
FROM stock
GROUP BY pid, name 
```

问题是，我将通过 cron 作业运行上面的 SQL。所以在下一次执行时，SQL 应该更新现有产品并插入不存在的产品。

如果我遍历 SELECT 结果，检查每一行是否存在`stock_total`并执行 INSERT 或 UPDATE，这将是非常低效的。

有没有更简单的方法来实现这一点？也许通过修改上面的SQL。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:22:02.080

使用`DUPLICATE KEY UPDATE`：

```
INSERT INTO TABLENAME(col1, col2)
VALUES (@value, ‘yyy’)
ON DUPLICATE KEY UPDATE col1 = @value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:23:33.110

这是为了更新：

```
UPDATE stock_total
SET total_qty = SUM(s.qty)
FROM stock_total st
INNER JOIN stock s
ON st.pid = s.pid
AND st.name = s.name
WHERE s.pid = st.pid
GROUP BY s.pid 
```

这对于插入：

```
INSERT INTO stock_total
SELECT s.pid, s.name, SUM(s.qty)
FROM stock s
WHERE s.pid NOT IN (SELECT pid FROM stock_total)
GROUP BY s.pid, s.name 
```

应该没问题，试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:24:08.977

为什么不从工作中调用存储过程？

在块中的 SP 中捕获`DUPLICATE KEY`异常并`UPDATE`. 如果没有`EXCEPTION`抛出它会`INSERT`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T08:25:20.577

`merge`是你正在寻找的东西。按如下方式使用它 -

```
merge into stock_total s " +
                        "using (select ? pid, ? name, ? total_qty from dual) d " +
                        "on (s.pid = d.pid and s.name = d.name and s.total_qty = d.total_qty) " +
                        "when matched then " +
                        "update set s.pid= d.pid, s.name = d.name, s.total_qty = d.total_qty" +
                        "when not matched then " +
                        "insert (pid, name, total_qty) " + 
                        "values(d.pid, d.name, d.total_qty)" ; 
```

**编辑**（对于 mySQL）：

```
MERGE INTO table_name WITH (HOLDLOCK) USING table_name ON (condition)
WHEN MATCHED THEN UPDATE SET column1 = value1 [, column2 = value2 ...]
WHEN NOT MATCHED THEN INSERT (column1 [, column2 ...]) VALUES (value1 [, value2 ...]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T12:16:02.050

经过一番谷歌搜索并尝试了这里的答案，我想出了这个解决方案。事实证明，MySQL 支持`REPLACE INTO...`和`...ON DUPLICATE KEY UPDATE`. 所以我的查询是这样的：

```
REPLACE INTO stock_total
SELECT pid, name, SUM(qty)
FROM stock
GROUP by pid, name 
```

或者，

```
INSERT INTO stock_total
SELECT pid, name, SUM(qty)
FROM stock
GROUP by pid, name
ON DUPLICATE KEY UPDATE total_qty=VALUES(total_qty) 
```

如果在 上存在一行`stock_total`，第一个查询将 DELETE 然后 INSERT 新行，第二个查询将 UPDATE 现有行。

只有当表具有主键或唯一索引时，这两个查询才会起作用：

```
CREATE TABLE stock_total (
    pid         INT         NOT NULL,
    name        VARCHAR(20) NOT NULL,
    total_qty   INT         NOT NULL,

    UNIQUE (pid, name)
); 
```

文档：

*   [替换语法](http://dev.mysql.com/doc/refman/5.0/en/replace.html)
*   [INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# c# - 如何循环通过 var 填充 DropDown？

> ID：10733656
> 
> 赞同：0
> 
> 时间：2012-05-24T08:18:47.890
> 
> 标签：c#, asp.net, c#-4.0, petapoco

我正在使用 ASP.NET/C# 4.0 和 PetaPoco Micro ORM。

PetaPoco 代码检索**var**中的年份列表。现在我想用这个**var**中的项目填充一个 ASP.NET DropDown 控件。

PetaPoco 是否以更少的代码提供了一些东西来做到这一点？或者，我如何遍历**var**并在 DropDown 中添加项目？

```
 var db = new PetaPoco.Database("myConnection");
    var fy = new fy_master();

    string Query = "SELECT fyperiod FROM fy_master ORDER BY fy_id desc";
    var result = db.Execute(Query); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:45:06.307

根据[Petapoco 文档](http://www.toptensoftware.com/petapoco/) ，如果要选择项目，则不能使用`Execute`类似的文档。`ExecuteNonQuery`您必须使用`Fetch`命令返回 POCO 列表。

这是[关于填充组合框的讨论](http://forums.asp.net/t/1778710.aspx/1?How%20to%20populate%20Obout%20ComboBox%20using%20PetaPoco%20Query%20)。您应该可以按照类似的方法来填写 ASP.NET DropDownList

# crystal-reports - 详情部分继续数据下一栏水晶报表

> ID：10733657
> 
> 赞同：0
> 
> 时间：2012-05-24T08:18:52.333
> 
> 标签：crystal-reports, crystal-reports-2008

我有以下类型的表

```
Name        Id        Desig
Srikanth    1         SSE
Sridhar     2         SE
Srinath     3         SE   
Srikanth    1         SSE
Sridhar     2         SE
Srinath     3         SE   
Srikanth    1         SSE
Sridhar     2         SE
Srinath     3         SE   
Srikanth    1         SSE
Sridhar     2         SE
Srinath     3         SE   
Srikanth    1         SSE
Sridhar     2         SE
Srinath     3         SE   
Srikanth    1         SSE
Sridhar     2         SE
Srinath     3         SE   
Srikanth    1         SSE
Sridhar     2         SE
Srinath     3         SE 
```

我想以这样的方式格式化上面的表格数据，在第 6 条记录之后，数据必须继续显示在下一列中，如下所示

```
Name        ID       Desig        Name        ID       Desig        Here Next tables rows
Srikanth    1         SSE          Sridhar     2         SE
Srinath     3         SE           Srikanth    1         SSE
Sridhar     2         SE           Srinath     3         SE   
Srikanth    1         SSE          Sridhar     2         SE
Srinath     3         SE           Srikanth    1         SSE
Sridhar     2         SE           Srinath     3         SE 
```

Crystal 报表中的任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:48:34.710

您将需要格式化您的报告以显示多列。一个“列”的大小将显示您的 3 个字段。有关说明，请参阅我对 Crystal Reports 的回复，[将组放在不同的列](https://stackoverflow.com/questions/9997617/crystal-reports-putting-a-group-in-different-columns)中。

在第 N 行之后让格式化工作将是一个挑战。我会研究一下并发布更新。

** 编辑 **

不幸的是，除了更改页面大小之外，似乎没有任何方法可以强制 CR 创建新列（在多列报表中）。在文件中 | 页面设置...，我将 Vertical 属性设置为 1.6"——您的设置可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:18:50.330

您可以在子报表中排列数据，限制为您想要的高度，并为多列配置。

# objective-c - 分发时未收到推送通知

> ID：10733660
> 
> 赞同：0
> 
> 时间：2012-05-24T08:19:05.973
> 
> 标签：objective-c, ios, xcode

我已经成功地为开发者证书实现了推送通知，但似乎无法让它与朋友一起进行临时测试。除了现在我选择“生产推送 SSL 证书”而不是“开发推送 SSL 证书”之外，我创建推送通知密钥/证书的过程相同。我相信这是正确的，因为我找不到任何教程来展示如何在生产环境中进行操作……所有这些都是用于开发的。

这个快速过程可以从 ray wenderlich 的博客中找到：[http ://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

这是我的猜测可能出了问题，因为可能有不同的方式来进行生产推送。我将我的 php 代码保留在我的服务器上，就像我之前为开发推送所拥有的一样（复制到新的 ck.pem 上）。这没问题还是我需要做出改变？如果有人认为它是代码，我可以发布代码，但正如我所说.. php 服务器代码以前工作过。

有人可以帮我吗？提前致谢！

**我无法回答我的问题，因为我没有足够的代表。正确答案在这里**

对于我的发展，我有：

```
gateway.push.apple.com:2195 
```

但对于生产它需要：

```
gateway.apple.com:2195 
```

希望这对将来的某人有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:29:18.573

[已编辑]

您也可以尝试检查您的令牌设置是否正确，您的设备是否可以接收通知。

如果你做了很多测试，你也可能被暂时禁止访问APNS服务器，千万不要在小时间范围内对APNS服务器进行过多调用。

另请注意，从您将通知发送到 APNS 服务器的时间到 APNS 服务器将通知发送到您的设备的时间可能会有一些延迟。

最后但同样重要的是，确保您的设备具有正确的 Internet / SSL 免费访问权限，某些代理或防火墙可能会阻止通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:39:44.857

您是否动态获取设备令牌？因为当应用程序处于临时分发时，它会在处于调试（又名开发人员）模式时为推送通知表单生成不同的设备令牌

# asp.net - WebForm 应用程序中的 MVC 应用程序

> ID：10733662
> 
> 赞同：1
> 
> 时间：2012-05-24T08:19:22.247
> 
> 标签：asp.net, asp.net-mvc

我有一个用 .net 3.5 构建的 ASP.Net 网站。单击其中一个 aspx 页面时，我想在该页面内打开一个 MVC 应用程序。MVC 应用程序是由另一家公司开发的。最好的方法是什么？

我猜Scott Hanselman 的[文章](http://www.hanselman.com/blog/PlugInHybridsASPNETWebFormsAndASPMVCAndASPNETDynamicDataSideBySide.aspx)不包括这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:21:37.613

这取决于您期望您的应用程序与外部开发的应用程序之间的交互类型。如果 UI 不会在它们之间进行交互，那么 iframe 可能就是您要寻找的。如果它要交互，那么您可以在它们之间使用公开的 API 或 Web 服务进行交互。

# asp.net-mvc-4 - 为什么在使用 WebClient 调用另一个控制器时返回 500 错误？

> ID：10733665
> 
> 赞同：0
> 
> 时间：2012-05-24T08:19:35.903
> 
> 标签：asp.net-mvc-4, webclient, dotnet-httpclient

我正在测试此链接上的示例：http: [//msdn.microsoft.com/en-us/vs11trainingcourse_aspnetmvc4_topic5#_Toc319061802](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetmvc4_topic5#_Toc319061802)但使用 WebClient 调用另一个控制器时出现 500 错误。

当我直接访问“http://localhost:2323/photo/gallery 正在运行，但我尝试使用 WebClient 从操作中返回 500 错误？为什么？”

```
 public ActionResult Index()
    {
        WebClient client = new WebClient();
        var response = client.DownloadString(Url.Action("gallery", "photo", null, Request.Url.Scheme));

        var jss = new JavaScriptSerializer();
        var result = jss.Deserialize<List<Photo>>(response);

        return View(result);
    } 
```

由以下异常创建的 500 错误：

```
[ArgumentNullException: Value cannot be null.
Parameter name: input]
   System.Text.RegularExpressions.Regex.Match(String input) +6411438
   Microsoft.VisualStudio.Web.Runtime.Tracing.UserAgentUtilities.GetEurekaVersion(String userAgent) +79
   Microsoft.VisualStudio.Web.Runtime.Tracing.UserAgentUtilities.IsRequestFromEureka(String userAgent) +36
   Microsoft.VisualStudio.Web.Runtime.Tracing.SelectionMappingExecutionListenerModule.OnBeginRequest(Object sender, EventArgs e) +181
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +136
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +69 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T09:07:02.410

很难说。也许您正在调用的控制器操作需要授权？还是使用会话？当您发送 WebClient 请求时，它不会将客户端发送的任何客户端 cookie 委托给 Index 操作。

以下是调试代码并查看服务器返回的确切响应的方法：

```
WebClient client = new WebClient();
try
{
    var response = client.DownloadString(Url.Action("gallery", "photo", null, Request.Url.Scheme));
}
catch (WebException ex)
{
    using (var reader = new StreamReader(ex.Response.GetResponseStream()))
    {
        string responseText = reader.ReadToEnd(); // <-- Look here to get more details about the error
    }
} 
```

如果事实证明问题与您的目标控制器操作所依赖的 ASP.NET 会话有关，那么您可以通过以下方式将请求委托给客户端 cookie：

```
WebClient client = new WebClient();
client.Headers[HttpRequestHeader.Cookie] = Request.Headers["Cookie"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:01:58.497

由于 User-Agent 标头而发生错误

分辨率为：

```
public ActionResult Index()
    {
        WebClient client = new WebClient();
        client.Headers[HttpRequestHeader.UserAgent] = Request.Headers["User-Agent"];
        var response = client.DownloadString(Url.Action("gallery", "photo", null, Request.Url.Scheme));

        var jss = new JavaScriptSerializer();
        var result = jss.Deserialize<List<Photo>>(response);

        return View(result);
    } 
```

# if-statement - 下面的 tcl 代码会做什么？

> ID：10733666
> 
> 赞同：2
> 
> 时间：2012-05-24T08:20:05.780
> 
> 标签：if-statement, try-catch, tcl

我有以下行：

```
if {[catch {exec fgrep E- $log_file} errors]} {
    set errors ""
} 
```

这是做什么的？

*   该命令是否将在日志文件中`catch`找到的所有行放入？`fgrep``errors`
*   它是否只会放在那里抛出的错误`fgrep`，例如如果文件不存在？
*   什么时候`if`拿，什么时候不拿？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T09:37:07.577

让我们从内到外解构您的代码。

```
exec fgrep E- $log_file 
```

这将`fgrep E-`针对名称存储在变量中的文件运行`log_file`。如果存在语法问题`exec`（谢天谢地没有）、`fgrep`程序语法问题（对我来说看起来不错）、`$log_file`不存在或没有匹配项，则会产生 Tcl 错误。如果没有错误，它会返回 grepping、warts 和所有的输出。

```
catch {exec fgrep E- $log_file} errors 
```

这会在捕获错误的环境中运行上面的代码，并返回是否发生错误（正式地，它在没有错误时返回 0，当有错误时返回 1，以及其他不太常见的异常返回类型的其他代码在这种情况下不会发生）。如果没有发生错误，则将正常结果`exec`存储在变量中，如果`errors`发生错误，则将错误消息存储在变量*中*。请注意，可以通过全局变量区分错误的类型，但您不这样做（而且通常没有必要）。`errors`*`errorCode`*

 *```
if {[catch {exec fgrep E- $log_file} errors]} {
    set errors ""
} 
```

这将`catch`上面的结果用作布尔值：如果发生错误，它会评估主体（将`errors`变量设置为空字符串），否则它什么都不做。

## 概括

*总体而言*，您的代码设置`errors`为在文件中找到的以换行符分隔的行`log_file`，否则设置`errors`为空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:44:11.650

你是对的。如果命令`exec fgrep E- $log_file`返回任何错误，它们将被捕获并且变量`errors`将被分配错误消息。在这种情况下，`exec`捕获的是命令的结果。查看[手册](http://www.tcl.tk/man/tcl8.5/TclCmd/exec.htm)，您可以看到 exec 如何返回错误的特殊性。您的代码示例会立即覆盖该`errors`变量。我应该补充一点`errors`，变量名称的选择有点误导 -`results`会更好，因为无论是否发生错误都会设置变量。

因此，如果发现错误，`if`将采取。`catch`我无法评论有关 fgrep 找不到文件的问题。我不清楚这是错误还是正常情况。*

# blackberry - 黑莓中的AES算法

> ID：10733667
> 
> 赞同：0
> 
> 时间：2012-05-24T08:20:13.110
> 
> 标签：blackberry, encryption, java-me, aes

我正在黑莓中申请。在该应用程序中，我想使用 AES 算法加密字符串。是否可以在黑莓中使用 AES 算法？有任何API吗？提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:23:15.307

尝试这个 -

```
useremail= CryptAes.AESEncryption(username_.getBytes()); 
```

CryptAes 类如下 -

```
public class CryptAes {
// First create the AES key based on the bytes in secretKey using  keyLength bits as the length
static AESKey keydec = new AESKey("A3$1E*81234567891111111111111111".getBytes() );
static AESKey keyenc = new AESKey("A3$1E*81234567891111111111111111".getBytes() );
static AESKey keyenc128 = new AESKey("A3Q1EF8123456789".getBytes());
static AESKey keydec128 = new AESKey("A3Q1EF8123456789".getBytes());

private static byte[] iv = { 0x0a, 0x01, 0x02, 0x03, 0x04, 0x0b, 0x0c,
    0x0d, 0x0a, 0x01, 0x02, 0x03, 0x04, 0x0b, 0x0c, 0x0d };

public static byte[] plainText= new byte[10000];

public static String AESEncryption(byte[] plainText) throws CryptoException, IOException {
      AESEncryptorEngine engine = new AESEncryptorEngine( keyenc128 );
      CBCEncryptorEngine cengine=new CBCEncryptorEngine(engine, new InitializationVector(iv));
      PKCS5FormatterEngine fengine = new PKCS5FormatterEngine( engine );
      ByteArrayOutputStream output = new ByteArrayOutputStream();
      BlockEncryptor encryptor = new BlockEncryptor( fengine, output );

      encryptor.write(plainText);
      encryptor.close();
      byte[] encryptedData = output.toByteArray(); output.close();
      String st=new String(encryptedData);

      byte[] base64 = Base64OutputStream.encode(encryptedData, 0, encryptedData.length, false, false);

        //Base64Coder.encodeString(Byte.toString(plainText));
        String str = new String(base64);

   return str;
}

// sampleAESDecryption
public static String AESDecryption(byte[] cipherText, int dataLength ) throws CryptoException, IOException {

    // Create the input stream based on the ciphertext
    ByteArrayInputStream in = new ByteArrayInputStream( cipherText, 0, dataLength );

    // Now create the block decryptor and pass in a new instance
    // of an AES decryptor engine with the specified block length
    BlockDecryptor cryptoStream = new BlockDecryptor(new AESDecryptorEngine( keydec128 ), in );

    byte[] T= new byte[dataLength];
    // Read the decrypted text from the AES decryptor stream and
    // return the actual length read

    int length= cryptoStream.read( T );
  String str= new String(T);

  int i=str.indexOf("</msg>");
  str=str.substring(0,i+6);
  return str;
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:22:39.620

查看[AESEncryptorEngine](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/crypto/AESEncryptorEngine.html)和[AESDecryptorEngine](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/crypto/AESDecryptorEngine.html)（在 Google 的帮助下）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T14:25:11.283

或者，您可以考虑为 j2me 使用充气城堡，如此处所建议[的](https://stackoverflow.com/questions/10529390/blackberry-aes-encryption-error/10532084#10532084)。

# delphi - delphi 2009 ClientDataSet.ApplyUpdates(-1) 在 10 行处理上返回 3457496

> ID：10733668
> 
> 赞同：1
> 
> 时间：2012-05-24T08:20:30.213
> 
> 标签：delphi, error-handling, delphi-2009, tclientdataset

在事务下运行代码，然后调用 applayUpdates，并缓存错误以修复它们。但是在delphi 7中工作的reconsile代码在delphi 2009上进入无限循环。

```
table1.Connection.BeginTrans;
//some code
repeat
  try
    numberOfErrors := table2.ApplyUpdates(-1); // here the returned value in delphi 2009 is 3457496 why?
    if (numberOfErrors > 0) then
      fixValuesTable2;
  Except
    fixValuesTable2;
  end;
until numberOfErrors=0;

table1.Connection.CommitTrans; 
```

table1 和 table2 共享连接。

从 delphi 7 到 delphi 2009 的使用过程中，ClientDataSet 是否发生了变化？

提供者是 TDataSetProvider，它连接到 ado 组件到 mssql 数据库

# css - 如何对 Microsoft 的 css `filter` ActiveX 控件进行功能检测？

> ID：10733671
> 
> 赞同：0
> 
> 时间：2012-05-24T08:20:39.747
> 
> 标签：css, internet-explorer, activex

是否可以查看是否应用了 MSIE`filter`规则？

注意：我知道 IE 条件注释等，但严格来说，如果不是彻底的浏览器嗅探，这些都是 UA 检测，我更喜欢特征检测（作为标准的最佳实践，尤其是在这种情况下）。

（也请不要浪费时间告诉我这些属性不是标准 CSS 等。我知道。相信我，这是为了更好地支持我们的 IE 用户而采取的务实举措。）

# uml - 比企业架构师更简单的软件工具？

> ID：10733672
> 
> 赞同：0
> 
> 时间：2012-05-24T08:20:43.723
> 
> 标签：uml, requirements, use-case, rational-unified-process

我正在寻找我们的（中型）项目一些合适的软件工具来创建和维护软件需求规范。我们需要使用两种模型——需求模型和用例模型。我知道 EA，但这个工具对于我们的目的来说太复杂了。你能给我推荐一些适合工具的技巧吗？你用什么？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T14:08:33.383

你使用 Visual Studio 吗？看起来微软终于决定（部分！）遵守 UML 标准。VS2010 中有一些 UML 功能，虽然不如 EA 或 Magic Draw 丰富或兼容。

哦，是的，正如我所提到的，看看 Magic Draw——它吹嘘它是市场上唯一完全符合 UML 2 的工具——我无法告诉你这是否属实。我用过它，它是一个很好的 UML 工具——比 VS2010 所能提供的任何东西都要好。

# javascript - 如何在用于 foreach 循环之前反转存储在变量中的项目？

> ID：10733673
> 
> 赞同：1
> 
> 时间：2012-05-24T08:20:45.627
> 
> 标签：javascript, asp.net

我有一个网页，其中包含一些 ASP.NET 面板和 JavaScript，当用户单击按钮以展开和折叠面板时执行。我需要以相反的顺序打开面板，但使用 JavaScript reverse() 似乎不会反转存储在组件中的项目的顺序（面板变量）。

我有以下 JavaScript：

```
function expandCollapsePanels() 
{
    var collapse = $('#<%= lbltogglePanels.ClientID %>').html() == "Collapse all panels";
    var panels = Sys.Application.getComponents(); //adding .reverse() does not work

    for (var i in panels) 
    {
        panels[i].set_Collapsed(collapse);
    }
} 
```

如何修改上面的代码来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:35:15.730

您可以简单地朝相反的方向循环：

```
for (var i = panels.length-1; i>=0; i--) 
{
  panels[i].set_Collapsed(collapse);
} 
```

演示：http: [//jsfiddle.net/de6NF/1/](http://jsfiddle.net/de6NF/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:34:46.117

一种简单但可能不是最好的方法是将“面板”推送到 for..in 中的数组中，然后使用该数组在 for 循环中调用“set_Collapsed”。

# asp.net-mvc-3 - signalR 超时

> ID：10733676
> 
> 赞同：0
> 
> 时间：2012-05-24T08:20:53.773
> 
> 标签：asp.net-mvc-3, signalr

我正在将 signalR 用于 1-1 聊天应用程序。换句话说，一次只有一个用户可以聊天。

signalR 正确启动，但后来超时。

此行为与我的公共服务器上的防火墙这一事实之间是否存在关系？防火墙是否有可能认为服务正在向它发出请求？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:43:27.153

老实说，我不确定防火墙，但是您是否尝试过在 global.asax 文件的 application_start 方法中的配置上设置 keepalive，例如

```
GlobalHost.Configuration.KeepAlive = TimeSpan.FromSeconds(60); 
```

# javascript - 将摄氏度转换为华氏度时出错

> ID：10733679
> 
> 赞同：0
> 
> 时间：2012-05-24T08:21:07.137
> 
> 标签：javascript, converter

所以我正在尝试创建一个将摄氏温度转换为华氏温度的脚本。当我运行它时，我在第 1 行遇到错误。请帮帮我......我不需要新代码，我只需要修复这个：/

```
window.addEventListener("load", init, false);

function init() {
    var celcius = document.getElementById("celcius");
    var fahrenheit = document.getElementById("fahrenheit");
    var button = document.getElementById("button");

    celcius.value = "";
    fahrenheit.value = "";
    button.addEventListener("click", controle, false);
}

function controle() {
    var celcius = document.getElementsById("celcius");
    var fahrenheit = document.getElementsById("fahrenheit");

    if ((celcius.value != "") && fahrenheit.value != "") {
        document.getElementsById("note").innherHTML = "Please only enter information in one field."
    } else {
        calculate();
    }
}

function calculate() {
    var celcius = document.getElementsById("celcius");
    var fahrenheit = document.getElementsById("fahrenheit");
    if (celcius.value != "") {
        fahrenheit.value = (parseFloat(celcius.value) * 1.8) + 32;
    } else {
        celcius.value = (parseFloat(fahrenheit.value) - 32) / 1.8;
    }
    document.getElementsById("note").innerHTML = "Het omrekenen is damn voltooid.";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:26:34.710

不知道这是否能解决问题，但是

```
document.getElementsById("note").innherHTML 
```

应该

```
document.getElementById("note").innerHTML 
```

错字：innherHTML -> innerHTML 和 getElementsById -> getElementById

更新：我试图通过删除代码中的错误来让它工作，看看这个 jsfiddle [http://jsfiddle.net/5bzAK/1/](http://jsfiddle.net/5bzAK/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:35:56.863

这个问题似乎是一个额外的问题`s`-`getElementById`你称之为 getElement **s** ById

请参阅此工作示例：http: [//jsfiddle.net/wZ5BF/](http://jsfiddle.net/wZ5BF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:36:18.193

`window.addEventListener("load", init, false);`应该低于初始化定义。

最好在脚本的末尾。

# java - 如何更改 JCS cache.ccf 文件的路径？

> ID：10733681
> 
> 赞同：8
> 
> 时间：2012-05-24T08:21:07.713
> 
> 标签：java, caching, jcs

我正在尝试更改 cache.ccf 文件的路径大约一个小时......
当我打电话时`JCS.getInstance("myRegion");`，我收到了这个错误：

```
Exception in thread "main" java.lang.IllegalStateException: Failed to load properties for name [/cache.ccf] 
```

我试图将 cache.ccf 放入 src 文件夹。在这种情况下，一切正常。但我希望它在`./config/`目录中，而不是在`./src`. 我试图更改配置文件名：

```
JCS.setConfigFilename("../config/cache.ccf"); 
```

但它不工作，我得到同样的错误：

```
Exception in thread "main" java.lang.IllegalStateException: Failed to load properties for name [../config/cache.ccf] 
```

JCS 试图找到`"../config/cache.ccf"`在 src 目录中命名的文件。
[在这里](http://commons.apache.org/jcs/LocalCacheConfig.html)我找到了这句话：
类路径应该包括这个文件所在的目录或者文件应该放在类路径的根目录下，因为它是自动发现的。

但是即使 cache.ccf 文件位于项目的根目录中，我的应用程序也不起作用。
如何更改 cache.ccf 文件的路径？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T11:21:30.140

我遇到了这个问题——而且因为我的项目中有多个类加载器（axis2、tomcat），所以很难弄清楚将 cache.ccf 文件放在哪里。我最终没有使用 .properties 文件并直接配置它 - 这就是我的做法......

```
CompositeCacheManager ccm = CompositeCacheManager.getUnconfiguredInstance();
Properties props = new Properties();

props.put("jcs.default","DC");
props.put("jcs.default.cacheattributes",
          "org.apache.jcs.engine.CompositeCacheAttributes");
// lots more props.put - this is basically the contents of cache.ccf

ccm.configure(props);
JCS sessionCache = JCS.getInstance("bbSessionCache"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-21T21:07:28.000

扩展上面乔恩的答案。从文件加载配置的自定义代码。将它放在实例化 JCS 之前。

```
 final String configFilename = System.getProperty("jcs.configurationFile");

    if (configFilename != null)
    {
        try (FileReader f = new FileReader(configFilename))
        {
            Properties props = new Properties();
            props.load(f);
            CompositeCacheManager ccm = CompositeCacheManager.getUnconfiguredInstance();
            ccm.configure(props);       
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T02:59:46.357

您可能需要检查您的类路径。似乎只有 src 在类路径中而不是 config 文件夹中。对我来说，我将我的 *.ccf 文件放在我的类路径中的 config 目录中，我只需要将 ccf 文件的路径指定为 /client_cache.ccf 以便 JCS 获取它。

它还取决于您的部署环境。但是，如果您的类路径中列出了 /config，它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-29T06:38:59.930

我找到了这个相关信息

[https://commons.apache.org/proper/commons-jcs/faq.html#configuration-file](https://commons.apache.org/proper/commons-jcs/faq.html#configuration-file)

```
CompositeCacheManager ccm = CompositeCacheManager.getUnconfiguredInstance(); 
Properties props = new Properties(); 
props.load(/* load properties from some location defined by your app */); 
ccm.configure(props); 
```

# android - 使特定代码在后台运行

> ID：10733682
> 
> 赞同：3
> 
> 时间：2012-05-24T08:21:12.493
> 
> 标签：android, background

我想让这段代码在后台运行。正如大多数人所指出的那样，我无法弄清楚如何创建服务或 Asynstask，因为它只需要是这段代码，而不是其他所有内容。

```
void StartTimer()
{
    int minsTicks=CountM*60*1000;
    int hoursTicks=CountT*60*60*1000;
    int totalTicks=hoursTicks+minsTicks;
    mTextField = (TextView) findViewById(R.id.TimerTextView);

    CountDownTimer aCounter = new CountDownTimer(totalTicks, 1000)
    {
         public void onTick(long millisUntilFinished) 
         {
             mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
         }
         public void onFinish() 
         {
            try 
            {
            mTextField.setText("Kaffe Maskinen er igang");
            mmOutputStream.write('2');
            Thread.sleep(900000);
            mmOutputStream.write('0');
            mTextField.setText("Kaffe Maskinen er slukket");
            } 
            catch (IOException e) {} catch (InterruptedException e) {}
         }
    };
     aCounter.start();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T09:11:41.573

这是代码片段`AsyncTask`

```
private class AsyncTaskEx extends AsyncTask<Void, Void, Void> {

    /** The system calls this to perform work in a worker thread and
    * delivers it the parameters given to AsyncTask.execute() */
    @Override
    protected Void doInBackground(Void... arg0) {
        StartTimer();//call your method here it will run in background
        return null;
    }

    /** The system calls this to perform work in the UI thread and delivers
    * the result from doInBackground() */
    @Override
    protected void onPostExecute(Void result) {
        //Write some code you want to execute on UI after doInBackground() completes
        return ;
    }

    @Override
    protected void onPreExecute() {
        //Write some code you want to execute on UI before doInBackground() starts
        return ;
    }
} 
```

在你的内部编写这个类`Activity`并调用你想要执行你的方法的地方

```
new AsyncTaskEx().execute(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:18:09.127

您可以像这样在后台执行代码：

```
private class GetLoginResponse extends AsyncTask<Void, Void, Boolean> {

    @Override
    protected void onPreExecute() {
        // whatever code u want to execute before background code
        // starts executing
    }

    @Override
    protected Boolean doInBackground(Void... params) {

        int minsTicks=CountM*60*1000;
        int hoursTicks=CountT*60*60*1000;
        int totalTicks=hoursTicks+minsTicks;
        mTextField = (TextView) findViewById(R.id.TimerTextView);

        CountDownTimer aCounter = new CountDownTimer(totalTicks, 1000) {

            public void onTick(long millisUntilFinished) {
                mTextField.setText("seconds remaining: "
                            + millisUntilFinished / 1000);
            }

            public void onFinish() {
                try {
                    mTextField.setText("Kaffe Maskinen er igang");
                    mmOutputStream.write('2');
                    Thread.sleep(900000);
                    mmOutputStream.write('0');
                    mTextField.setText("Kaffe Maskinen er slukket");
                } catch (IOException e) {
                } catch (InterruptedException e) {
                }
            }
        };

        aCounter.start();
    }

    @Override
    protected void onPostExecute(Boolean data) {
        // Here you can execute what you want to execute
        // after the background task completes
    }
}// end AsyncTask

new GetLoginResponse.execute(); 
```

# javascript - for循环中的settimeout不起作用

> ID：10733685
> 
> 赞同：2
> 
> 时间：2012-05-24T08:21:24.407
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 for 循环中设置超时并将 i 作为值传递](https://stackoverflow.com/questions/5226285/settimeout-in-a-for-loop-and-pass-i-as-value)

我正在尝试生成动态数组并将此数组用作循环..但在循环中 settime out 不起作用或函数不起作用。这是我的代码

```
jQuery(document).ready(function () {
    temp = new Array();
    generateArray(temp);

    function generateArray(temp) {
        if (temp.length < 10) {
            res = randomXToY(1, 10, 0);
            for (var k = 0; k < temp.length; k++) {
                if (temp[k] == res) {
                    var test = 1;
                }
            }
            if (test != 1) {
                temp.push(res);
                //abc(temp);
            }
            generateArray(temp);
        } else {
            for (var z = 0; z < 10; z++) {
                tnest(temp[z]);
                setTimeout(function () {
                    removeClassImg(temp[z])
                }, 3000);
            }
            temp = new Array();
            generateArray(temp);
        }
    }

    function removeClassImg(result1) {
        alert(result1);
        $('#img' + result1).fadeTo(12000, 0.1);
        return true;
    }

    function tnest(result) {
        alert(result);
        $('#img' + result).fadeTo(12000, 1);
        return true;
    }

    function randomXToY(minVal, maxVal, floatVal) {
        var randVal = minVal + (Math.random() * (maxVal - minVal));
        return typeof floatVal == 'undefined' ? Math.round(randVal) : randVal.toFixed(floatVal);
    }
}); 
```

函数 removeClassImg 中的警报不起作用..我在 for 循环中使用 settimeout 这不能正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T08:27:29.213

它与超时和循环有关。您需要将其包装在一个闭包中，以便您的超时回调绑定到`z`“当时”的值。

我在循环之后也注意到了这一点：

```
temp = new Array();
generateArray(temp); 
```

当您想要操作延迟操作时，您的数组不再包含您需要的值。你已经清除了它们。

尝试这个：

```
for (var z = 0; z < 10; z++) {
    (function (tz) {                  //"localize" temp[z] by creating a scope
        tnest(tz);                    //that makes temp[z] local. this is done
        setTimeout(function () {      //by creating an immediate function
            removeClassImg(tz)        //passing temp[z] into it. that way, the 
        }, 3000);                     //timeout receives a local temp[z] which
    }(temp[z]));                      //has the value of temp[z] "at that time"
} 
```

这是[一个带封闭](http://jsfiddle.net/ZL78q/)的样本和[一个没有](http://jsfiddle.net/ZL78q/1/)封闭的样本。3 秒后，您会看到没有它的那个会记录所有 10，而不是 0-10。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:29:31.967

那是因为您正在访问您`z`在 中设置的函数中的变量`setTimeout`，创建一个闭包，并`z`在循环中使用。这意味着，当调用函数时，您可能最终会得到`z`equals 。`10``setTimeout`

我已经在这里讨论过这个问题和可能的解决方案：[How to pass a variable into a setTimeout function?](https://stackoverflow.com/questions/10217536/how-to-pass-a-variable-into-a-settimeout-function/10217782#10217782) 我想它会帮助你！

# android - Android：百分比宽度而不改变高度

> ID：10733689
> 
> 赞同：2
> 
> 时间：2012-05-24T08:21:38.067
> 
> 标签：android, android-layout

我需要创建占布局宽度 70% 的文本字段（在线性布局中）。我使用这段代码：

```
<EditText
    android:id="@+id/phone"
    android:layout_width="fill_parent"
    android:layout_weight=".7"
    android:layout_height="wrap_content"
    android:inputType="phone" > 
```

问题是，在这种情况下，高度也占布局高度的 70%——但我不需要更改它，只希望它是“wrap_content”。有什么好的解决办法吗？

**UPD：** 如果我创建一个新的水平方向的线性布局并将我的文本字段放在其中，这会是一个好的解决方案吗？或者更优雅的东西？

**UPD(2)：** 我希望它如下所示，但不使用 marginLeft 和 marginRgiht，这会在不同的屏幕分辨率上给出不同的百分比

![在此处输入图像描述](../Images/70ca159fc6c2b3f5aafea9db71bc50d4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T08:31:44.930

`weightSum`如果您打算使用权重，则需要在控件的父级上进行设置。所以，是的，把它放在一个 LinearLayout 中，并为布局提供适当的参数。另外，请记住，权重只影响额外空间，因此您要将宽度设置为 0dp，因此整个可用空间都被视为“额外”空间。最后，我认为使用整数表示重量可能会更快，但我不确定。

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:weightSum="4">

    <EditText
        android:id="@+id/phone"
        android:layout_width="0dp"
        android:layout_weight="3"
        android:layout_height="wrap_content"
        android:inputType="phone" />

</LinearLayout> 
```

**更新：** 如果您也希望它居中，则在左侧和右侧包括一些间隔视图，并具有适当的权重：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:weightSum="1" >

    <View
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".15" />

    <EditText
        android:id="@+id/phone"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".7"
        android:inputType="phone" />

    <View
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".15" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:06:32.407

![在此处输入图像描述](../Images/58b1f648b2531e13ae933800f35608c4.png) 嗨根据您的代码，如果您要设置权重意味着通常我们不应该设置布局宽度来包装内容或填充父级。它应该为零。所以应该是这样的。

```
<EditText
    android:id="@+id/phone"
    android:layout_width="0dip"
    android:layout_weight=".7"
    android:layout_height="wrap_content"
    android:inputType="phone" > 
```

否则，如果您尝试使用以下代码，则意味着您将得到它像图像一样

```
<LinearLayout
    android:layout_width="fill_parent"
    android:orientation="vertical"
    android:layout_margin="30dip"
    android:layout_height="wrap_content">

    <EditText
        android:id="@+id/phone"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="phone" />

    <EditText
        android:id="@+id/phone"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="phone" />

</LinearLayout> 
```

如上图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:27:42.083

为 Editext提供**Margin Layout_left/Right**填充。

```
<EditText
android:id="@+id/phone"
android:layout_width="fill_parent"
android:layout_weight=".7"
android:layout_height="wrap_content"
android:layout_marginLeft="25dp"
android:inputType="phone" > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-06T08:18:57.740

虽然可以使用 LinearLayout 权重来解决，但也可以使用[ConstraintLayout 指南](https://medium.com/google-developers/building-interfaces-with-constraintlayout-3958fa38a9f7#4511)来实现。只需添加两个具有 15% 和 85% 位置值的垂直准线，并将 EditText 宽度约束到这些准线：

[![布局编辑器](../Images/5bcf17a2aa6924adbf8aa1805fdea2a2.png)](https://i.stack.imgur.com/7zelU.png)

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <EditText
        android:id="@+id/editText"
        style="@android:style/Widget.Holo.Light.EditText"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:text="1st EditText"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="@+id/startGuideline"
        app:layout_constraintEnd_toStartOf="@+id/endGuideline" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:text="2nd EditText"
        app:layout_constraintTop_toBottomOf="@+id/editText"
        app:layout_constraintStart_toStartOf="@+id/startGuideline"
        app:layout_constraintEnd_toStartOf="@+id/endGuideline" />

    <android.support.constraint.Guideline
        android:id="@+id/startGuideline"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.15" />

    <android.support.constraint.Guideline
        android:id="@+id/endGuideline"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.85" />

</android.support.constraint.ConstraintLayout> 
```

# php - 如何在 Windows azure 上部署现有的 wordpress 项目

> ID：10733692
> 
> 赞同：5
> 
> 时间：2012-05-24T08:22:10.207
> 
> 标签：php, wordpress, deployment, azure

我的团队现在正在为我们公司开发一个名为“trdocs”的 wordpress 项目，我们在本地安装了 wordpress 并安装了许多插件，我们有自己的数据库等。现在我们想把这个现有的 wordpress 项目放在 Windows Azure 上。我们不仅要迁移项目，还要迁移 SQL azure 上的数据库。就个人而言，我关注[了如何使用 Windows Azure SDK for PHP WordPress 脚手架部署 WordPress](http://azurephp.interoperabilitybridges.com/articles/how-to-deploy-wordpress-using-the-windows-azure-sdk-for-php-wordpress-scaffold#h2Section0) ，这是一篇好文章，但它是在 Azure 上部署一个全新的 wordpress。有没有人有任何想法？

期待答案...

问候， 莱昂娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:51:59.747

看看下面的文章[http://ben.lobaugh.net/blog/20600/wordpress-how-to-migrate-from-local-development-to-windows-azure](http://ben.lobaugh.net/blog/20600/wordpress-how-to-migrate-from-local-development-to-windows-azure)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T15:56:35.547

实际上，上面的相同[链接](http://azurephp.interoperabilitybridges.com/articles/how-to-deploy-wordpress-using-the-windows-azure-sdk-for-php-wordpress-scaffold)有一个部分解释了如何在新创建的项目中导入现有的 PHP-Wordpress 代码库，如下所示：

[**使用现有的 WordPress 代码库**](http://azurephp.interoperabilitybridges.com/articles/how-to-deploy-wordpress-using-the-windows-azure-sdk-for-php-wordpress-scaffold#h2Section6)：

如果您已经有一个现有的 WordPress 代码库并且想将您的文件移动到 WordPress 脚手架中，那么有一个新的命令行参数可以让您导入现有的源代码而不是下载新的副本。要使用它，请添加 -source 参数，该参数类似于以下内容

```
-source path/to/WordPress 
```

注意：我遵循完全相同的路径，我添加了指向我现有 wordpress 文件夹的“-source”参数，当创建新项目时，我的所有文件都被导入到新项目中。这非常简单，因为我可以在运行 WordPress 脚手架之前立即使用在 ServiceConfiguration.cscfg 中设置的 SQL Azure。

# vb.net - 当预期为 true 时，InvokeRequired 不断返回 false

> ID：10733693
> 
> 赞同：2
> 
> 时间：2012-05-24T08:22:15.030
> 
> 标签：vb.net, multithreading, invokerequired

我有以下测试代码。它没有任何用处，但我可以理解 VB：

```
Imports System
Imports System.IO
Imports System.Diagnostics
Imports Microsoft.VisualBasic
Imports System.Threading

Public Class Sandbox
    Public Shared num As NumericUpDown

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim objWrk As Worker
        objWrk = New Worker
        objWrk.Show()
    End Sub
End Class

Public Class Worker
    Public Sub Show()
        Dim runThread As New System.Threading.Thread(AddressOf Run)      ' Call the runner in a seperate thread
        runThread.Start()
    End Sub

    Public Sub Run()
        runToggle(1000)
    End Sub

    Public Delegate Sub runToggleInvoker(ByVal value As Integer)
    Public Sub runToggle(ByVal value As Integer)
        If Sandbox.Label1.InvokeRequired = True Then
            Sandbox.Label1.Invoke(New runToggleInvoker(AddressOf runToggle), value)
        Else
            Sandbox.Label1.Text = value
        End If
    End Sub
End Class 
```

表格由 a`Button`和 a组成`Label`。

仅出于学习目的，我已将更改标签中文本的方法放在另一个线程中。然而，`InvokeRequired`价值不断返回`False`。这怎么可能？它`Label1`是在主线程中创建的，并且正在 runThread 中进行调整，因此`InvokeRequired`应该给出 True。

[在这里](https://stackoverflow.com/questions/4013954/invokerequired-of-form-false-and-invokerequired-of-contained-control-true)，我读到当尚未创建表单句柄时会发生这种情况，因此我更改了`Run`方法：

```
Public Sub Run()
            Sandbox.Show()
            runToggle(1000)
        End Sub 
```

这并不能解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:38:59.507

根据[Control.InvokeRequired 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invokerequired.aspx)

如果控件的句柄尚不存在，InvokeRequired 将向上搜索控件的父链，直到找到具有窗口句柄的控件或窗体。如果找不到合适的句柄，则 InvokeRequired 方法返回**false**。

# android - 为 GridView android 创建 BaseAdapter

> ID：10733696
> 
> 赞同：0
> 
> 时间：2012-05-24T08:22:26.373
> 
> 标签：android

基本上我需要创建：左侧的复选框和右侧的图像视图。像这样的东西：

![在此处输入图像描述](../Images/83bf8a3c8a81bc41679253ab2b8a32d4.png)

这些纵向组合应该是 3xN，N 是行数的整数。为此，我认为使用网格视图会很好，但我对网格没有太多经验。所以我开始写适配器：

我得到了这个方法：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    CheckBox check = null;
    ImageView pic = null;

    LinearLayout view = new LinearLayout(mContext);
    view.setOrientation(LinearLayout.VERTICAL);

        check = new CheckBox(mContext);
        check.setTag(position);

        view.addView(check); 

        pic = new ImageView(mContext);
        pic.setImageResource(R.drawable.btn_star);

        view.addView(pic); 

    return view;
} 
```

也许我应该在那里创建一个复选框视图和图像视图。这有效，但图像低于复选框，如何将它们放在一行中？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:49:30.617

为 griview 内容创建单独的布局

例如：`gridview_custom.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" android:gravity="center">

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" android:layout_marginLeft="10dip"/>

</LinearLayout> 
```

现在为您创建自定义适配器`GridView`并覆盖`getView()`

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    View v = convertView; 
     CheckBox check = null;
             ImageView pic = null;

    if (convertView == null) { // if it's not recycled, initialize some
                                // attributes
    LayoutInflater vi = 
            (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.gridview_custom, null);
     } 

    pic = (ImageView)v.findViewById(R.id.imageView1);
    check = (CheckBox) v.findViewById(R.id.checkBox1);
    return v;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:36:51.527

由于布局是固定的，因此在 XML 文件中指定布局并使用它来创建视图会更容易。不过，您应该使用`HORIZONTAL`方向。并且还要注意重用视图（一个可重用的实例在`convertView`参数中传递给您。如果不是，请使用它`null`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:50:35.460

不要动态添加复选框和图像。相反，您可以做的是创建一个 XML 文件，该文件将包含一个复选框和一个您需要的水平方向的 ImageView，getView 函数将如下所示：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

if (CONTEXT != null) {

        final LayoutInflater lInflater = (LayoutInflater) CONTEXT
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        final View view = lInflater.inflate(R.layout.your_xml, null);
        final CheckBox checkBox = (CheckBox) view
                .findViewById(R.id.checkbox);

        final ImageView ivIcon = (ImageView) view.findViewById(R.id.icon_image);
        ivIcon.setImageResource(A.this.getResources().getDrawables(R.id.image));
        return view;
        }
        else {
        return null;
        }
} 
```

谢谢 ：）

# objective-c - 在 ARC 的类方法中初始化的静态对象

> ID：10733698
> 
> 赞同：2
> 
> 时间：2012-05-24T08:22:40.223
> 
> 标签：objective-c, static, initialization, automatic-ref-counting

我使用类初始化器来初始化我稍后在代码中使用的一些静态变量。

```
 __strong static NSCharacterSet* _unwantedChars;

@implementation TMGeocoderModel

+(void)initialize{
    NSMutableCharacterSet *_alnum = [NSMutableCharacterSet characterSetWithCharactersInString:@","];
    [_alnum formUnionWithCharacterSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    _unwantedChars = _alnum;
}

-(id)initWithSearchString:(NSString *)searchString{
    self = [super init];
    if(self){
        NSString* temp = [searchString stringByTrimmingCharactersInSet:_unwantedChars];

    }
    return self;
} 
```

当我到达下一行代码时

```
NSString* temp = [searchString stringByTrimmingCharactersInSet:_unwantedChars]; 
```

`_unwantedChars`已经发布了。在我切换到 ARC 模式之前一切正常，但在 ARC 中失败并显示以下消息： **-[CFCharacterSet characterIsMember:]: message sent to deallocated instance 0x11247330**

有没有办法在类方法中初始化对象，这样它们就不会被释放？

**更新：** 这完全是我的错误，解决方案相当简单。

在**Build Settings** -> **Objective-C Automatic Reference Counting**中，只有**DEBUG**配置设置为 YES，而其他配置设置为 NO。

全部改为YES，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:27:11.800

的范围`NSMutableCharacterSet *_alnum`仅在您的初始化方法中。全局声明。

# c# - 在 pdf (C#) 中跨多列平衡文本和图像

> ID：10733700
> 
> 赞同：0
> 
> 时间：2012-05-24T08:22:53.433
> 
> 标签：c#, pdf, itextsharp, text-alignment

我需要在 C# 中创建一个 PDF 文件。此 PDF 文件很像报纸，其中嵌入了窄列的文本和图像。我知道我可以使用 iTextSharp 等第三方库创建 PDF 文件。我只是不知道如何在多个列和页面之间平衡文本和图像，以便它们优雅地适合每个页面。有没有已知的算法可以做到这一点？iTextSharp 库是否能够为我自动对齐文本？是否有任何其他库可能有助于 PDF 文件中的文本和图像对齐？任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-26T02:38:38.560

是的，有一个库可以自动对齐列中的文本和图像。它被称为[PDFFlow](https://go.pdfflow.io/PdfAutomateLib)。它将根据您为每个图像设置的缩放模式缩放图像。并根据您设置的文本溢出操作模式分配文本。它还具有可用于您的案例的内嵌图像，因此您可以将它们放在段落中的任何位置。您还可以使库自动计算表格是否适合页面（如果您已设置列宽），并在必要时在下一页或多页上继续表格。为此，请使用 SetAutomaticMultipageSpreadMode 方法启用自动多页展开模式。

以下是使用此库生成的真实 PDF 业务文档的 C# 源代码示例：[示例](https://go.pdfflow.io/PdfAutomateExamples)。希望，这会有所帮助。

# python - Python 生成器行为

> ID：10733701
> 
> 赞同：2
> 
> 时间：2012-05-24T08:23:00.803
> 
> 标签：python, iterator, generator

```
import itertools
ws=[]
subs=[]
set_subs=[]
for i in xrange(int(raw_input())):
    S=raw_input()
    l=len(S)
    subs.append(S[i:j+1] for i in xrange(l) for j in xrange(i,l)) 
```

输入：

```
2
aab
aac 
```

现在两者`subs[0]`都给`subs[1]`我相同的结果。

```
print list(subs[0])
>>>['a','aa','aac','a','ac','c']
print list(subs[1])
>>>['a','aa','aac','a','ac','c'] 
```

而`list(subs[0])`应该是`['a','aa','aab','a','ab','b']`

我隐约明白为什么会这样。我该怎么做才能做出`subs[0]`真正`subs[1]`的不同。

**注意**：换行

```
subs.append(S[i:j+1] for i in xrange(l) for j in xrange(i,l)) 
```

和

```
subs.append([S[i:j+1] for i in xrange(l) for j in xrange(i,l)]) 
```

不是一种选择

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T08:36:17.503

[http://docs.python.org/reference/expressions.html#generator-expressions](http://docs.python.org/reference/expressions.html#generator-expressions)

> 当为生成器对象调用该方法时，生成器表达式中使用的变量会被延迟计算`__next__()`（以与普通生成器相同的方式）。但是，最左边的 for 子句会立即被求值，因此可以在处理生成器表达式的代码中的任何其他可能错误之前看到由它产生的错误。不能立即评估后续的 for 子句，因为它们可能依赖于前一个 for 循环。

`S[i:j+1]`在您执行生成器时进行评估，并且此时`S`具有最新值。

您可以改用普通的生成器。现在`ss`是本地的`subgen`：

```
import itertools

def subgen(ss):
    l=len(ss)
    for i in xrange(l):
        for j in xrange(i,l):
            yield ss[i:j+1]

subs=[]
for i in xrange(int(raw_input())):
    S=raw_input()
    subs.append(subgen(S)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T08:36:29.693

嗯，这是生成器表达式的奇怪特征之一。看看[这个](http://www.python.org/dev/peps/pep-0289/#early-binding-versus-late-binding) 在你的情况下，它使用后期绑定，这就是为什么你会得到两个相同的结果。

# c++ - 在具有多线程的 Qt 应用程序中处理升压信号

> ID：10733702
> 
> 赞同：3
> 
> 时间：2012-05-24T08:23:01.553
> 
> 标签：c++, multithreading, qt, boost-signals2

我有以下问题：我们的主应用程序使用 Qt 工具包来显示窗口和用户交互。然而，我们应用程序的很大一部分对 GUI 部分一无所知。我现在创建了以下设计：

*   有一个单例类可以请求渲染给定对象（OpenSceneGraph 节点；但这与问题无关）
*   渲染请求导致单例发出信号
*   主窗口类（使用 Qt）中有一个插槽来处理对象的渲染
*   目前，该插槽仅创建一个新的文本编辑小部件并将其放置在`QMdiArea`主窗口中

但是，当我尝试创建新小部件时，应用程序不可避免地会**崩溃。**错误消息区域：

```
QObject::setParent: Cannot set parent, new parent is in a different thread
[xcb] Unknown request in queue while dequeuing
[xcb] Most likely this is a multi-threaded client and XInitThreads has not been called
[xcb] Aborting, sorry about that.
myApplication: ../../src/xcb_io.c:178: dequeue_pending_request: Assertion `!xcb_xlib_unknown_req_in_deq' failed.
Aborted 
```

在仔细阅读 stackoverflow 之后，我发现了类似的问题（这些问题并不适用于这种情况）。显然，当我从另一个线程更改主窗口中的某些内容时，Qt 不喜欢它。但是，我并没有*有意识地*创建新线程，我认为单例（在调用后立即在 main 函数中创建`QApplication()`）*应该*与 Qt在**同一个线程中。**显然，我错了。

这是一个显示我正在做的事情的最小示例（我已经提取了代码的相关部分，因此该示例并不完全有效）：

```
class Object
{
public:
};

class Singleton
{
public:
  typedef boost::signals2::signal<void (Object*)> signalShowObject;
  signalShowObject _showObject;
};

class MainWindow : public QMainWindow
{
public:
  MainWindow()
  {
    Singleton::getInstance()->_showObject.connect( boost::bind(&MainWindow::showObject, this, _1) );

    // Set up MDI area etc.
  }

private:
  QMdiArea* _mdiArea;

  void showObject(Object* object)
  {
    // Creating a new subwindow here causes the crash. The `object` pointer is
    // not used and has just been included because it models my real problem
    // better.
    _mdiArea->addSubWindow( new QTextEdit() )->show();
  }
}; 
```

我解决这个问题的尝试非常笨拙：

*   我在类中创建了一个新的*Qt*信号，其`MainWindow`签名与 Boost 信号相同
*   在处理 Boost 信号的插槽中，我发出新`Qt`信号，将指针传递过去
*   我现在创建了一个接收指针的新*Qt插槽*

当我在新插槽中打开一个新窗口时，一切正常。然而，这让我觉得非常笨拙。我是否必须像这样*级联* **所有**Boost 信号还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:23:39.127

我认为令人困惑的是，从渲染请求对单例的调用是从生成请求的任何线程进行的。单例将返回一个唯一的对象，但它发送给它的信号仍然在请求线程的上下文中。必须做一些事情来显式地导致或允许线程上下文切换到主 UI 线程，以便实际处理此信号并在主线程中创建 UI 对象。

您正在按照您描述的顺序隐含地执行此操作：

> •我在MainWindow 类中创建了一个与Boost 信号具有相同签名的新Qt 信号
> 
> • 在处理 Boost 信号的槽中，我发出新的 Qt 信号，将指针传递过去
> 
> •我现在创建了一个接收指针的新 Qt 插槽

Qt 信号和槽自动对跨线程信号进行排队（注 1）。所以处理 Boost 信号的槽还在请求线程中。然后它发出 Qt 信号。Qt 检测到信号的接收者在主线程中（注 2），但发送者在请求者线程中，并将信号排队。当主线程中的主 Qt 事件循环将这个排队的事件从事件列表中拉出时，它会自动重新发出信号，但现在它在主线程上下文中并且允许 UI 操作。

注意 1 - 除非在 connect() 调用中明确覆盖此行为 - 请参阅**Qt::ConnectionType**的文档。

注意 2 - 实际上，接收者的 QObject 归主线程所有。每个 QObject 都保留了创建它的线程上下文的线程 ID。

我希望这有助于解释线程发生了什么。您的解决方案很好，但正如@tmpearce 建议的那样，将东西包装在适配器中可能会很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:26:59.683

将 showObject 定义为 slot 并在其主体中添加一点公式：

```
if( QThread::currentThread() != thread() )
{
     bool ok = QMetaObject::invokeMethod(this, "showObject", Qt::QueuedConnection, Q_ARG(QObject *, object));

     if( ! ok )
         qDebug() << "Couldn't invoke method";

     return;
} 
```

保持方法体的其余部分不变。

# matlab - 如何以高效的方式清除部分矢量？

> ID：10733703
> 
> 赞同：1
> 
> 时间：2012-05-24T08:23:10.090
> 
> 标签：matlab, octave

如何以时间有效的方式获取向量的一部分并用零填充其他部分？

我有一个向量；

```
 A  |  |                               A  | 0 |               
    |  |                                  | 0 |
    |  |                                  | 0 |
    |  | <-------- x         -----------> |   |  <--|
    |  |                                  |   |     |
    |  |                                  |   |     |     data in this region
    |  |                    after         |   |     |      is not changed
    |  |                                  |   |     |     
    |  |                  operation       |   |     |
    |  |                                  |   |     |
    |  |                                  |   |  <--|
    |  | <--------- y        -----------> |   |
    |  |                                  | 0 |
    |  |                                  | 0 |
    |  |                                  | 0 | 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T08:25:20.020

```
u = 1:10;
v = [1:3, 8:10];

u(v) = 0; 
```

将第一个和最后 3 个元素设置为零。为了使其与您对问题的表述方式更相似：

```
x = 3;
y = 8;
u = 2:2:20;
v = x:y;
w = 1:length(u);

u(setdiff(w, v)) = 0; 
```

尽管您可能更愿意这样做：

```
u(1:x-1) = 0;
u(y+1:end) = 0; 
```

（仅当您想要包含范围时，+/-1 才适用。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T08:31:34.400

或者，您可以使用[逻辑索引](http://blogs.mathworks.com/steve/2008/01/28/logical-indexing/)。

```
n = 20;
x = rand(n,1); %# sample content
i = 1:n; %# indices
x(~(i>3 & i<n-2)) = 0;
x

x =

         0
         0
         0
    0.2435
    0.9293
    0.3500
    0.1966
    0.2511
    0.6160
    0.4733
    0.3517
    0.8308
    0.5853
    0.5497
    0.9172
    0.2858
    0.7572
         0
         0
         0 
```

# css - MVC3 CSS 文本框样式

> ID：10733704
> 
> 赞同：1
> 
> 时间：2012-05-24T08:23:12.120
> 
> 标签：css, asp.net-mvc-3, razor

我知道这篇文章可能与许多其他文章相同（例如[如何在使用 Html.TextBoxFor 时设置文本框的宽度](https://stackoverflow.com/questions/2517384/how-to-set-the-width-of-the-text-box-when-using-html-textboxfor)），但我在将 CSS 类分配给文本框时遇到了真正的麻烦。

我的 CSS 很简单：

```
.myInput {
         width: 12em;
        border-color: red;   
    } 
```

我的文本框是使用声明的：

```
@Html.TextBoxFor(model => model.DepostAmount, new {@class= "myInput"}) 
```

但是，文本框的样式没有任何不同。查看页面的源代码，我可以看到该类确实包含在对象标记中：

```
<input class="myInput" id="DepostAmount" name="DepostAmount" type="text" value="" /> 
```

我还可以看到 .myInput 的 CSS 也正在呈现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:26:39.547

我想到了。在 Visual Studio 生成的示例应用程序中，有一个选择器选择了覆盖我自己的 css 类的所有输入。

```
input[type="text"], 
input[type="password"] {
    border: 1px solid #ccc;
    padding: 2px;
    font-size: 1.2em;
    color: #444;
    width: 200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:36:23.153

无论您在cshtml页面中写入什么最终输出都是纯html，因此向您的元素（输入类型，div等）添加类并为其编写编写css类..如果您不希望由vs生成css然后根据修改它您的需求。谢谢，祝你有美好的一天。。

# ruby-on-rails - Ruby On Rails 的扩展？

> ID：10733706
> 
> 赞同：-6
> 
> 时间：2012-05-24T08:23:17.467
> 
> 标签：ruby-on-rails, ruby

php 有.php 扩展名 asp 有.asp asp.net 有aspx html 有.html xml 有.xml 每种语言都有其扩展名，那么Ruby On Rails 语言的扩展名是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:25:42.553

首先是谷歌，顺便说一句，Ruby 是一种语言，它具有**.rb**扩展名，而 rails 是 ruby​​ 之上的框架。

# xml - XSLT 文件的控制流程和处理？

> ID：10733709
> 
> 赞同：0
> 
> 时间：2012-05-24T08:23:23.523
> 
> 标签：xml, xslt

我知道 XSLT 是一种声明性语言，并不描述控制流。但是处理器如何使用 XSLT 文件确定或转换 XML 文件？他们是否使用不同的计算过程进行转换？foreach 循环或排序或 if 语句等循环如何在没有控制流的情况下工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T11:39:03.990

**获得这三个问题的答案的最好方法是认真阅读**。

此资源列表可能会对您有所帮助：

[https://stackoverflow.com/a/341589/36305](https://stackoverflow.com/a/341589/36305)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T08:50:04.237

这就像问“编程是如何工作的？”。这个问题太宽泛了，一个公平的答案不能用几段来概括。

*   如果您想要一个快速但极其精简的概述，请在 wikipedia 中查找 XSLT。
*   如果您想要一个快速但更详细的概述，请尝试 w3c 学校教程网站。
*   如果你是认真的，买一本书。只需在您最喜欢的书店中搜索即可。我推荐这个：“XSLT 2.0 and XPath 2.0 Programmer's Reference (Programmer to Programmer)” [http://www.amazon.com/XSLT-XPath-Programmers-Reference-Programmer/dp/0470192747/ref=sr_1_4?ie=UTF8&qid =1337849053&sr=8-4](https://rads.stackoverflow.com/amzn/click/com/0470192747)

一些杰出人士可能会给您几段关于 XSLT 作品的解释，但这种解释与您自己在 wikipedia 上可以找到的解释几乎相同。

# ruby - 初始化红宝石单例

> ID：10733717
> 
> 赞同：6
> 
> 时间：2012-05-24T08:24:13.827
> 
> 标签：ruby, singleton, initialization, rubymotion

我正在尝试在 ruby​​ 中初始化一个单例。这是一些代码：

```
class MyClass
  attr_accessor :var_i_want_to_init

  # singleton
  @@instance = MyClass.new
  def self.instance
    @@instance
  end

  def initialize # tried 1\. initialize, 2\. new, 3\. self.initialize, 4\. self.new
    puts "I'm being initialized!"
    @var_i_want_to_init = 2
  end
end 
```

问题是初始化从未被调用，因此单例从未被初始化。我尝试将init方法命名为initialize、self.initialize、new和self.new。没有任何效果。“我正在初始化”从未打印过，并且在我实例化时变量从未初始化

```
my_var = MyClass.instance 
```

如何设置单例以使其初始化？帮助表示赞赏，

帕春

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-24T08:28:49.133

有一个[用于单例的标准库](http://www.rubydoc.info/stdlib/singleton/Singleton)：

```
require 'singleton'

class MyClass
  include Singleton
end 
```

要修复您的代码，您可以使用以下内容：

```
class MyClass
  attr_accessor :var_i_want_to_init

  def self.instance
    @@instance ||= new
  end

  def initialize # tried 1\. initialize, 2\. new, 3\. self.initialize, 4\. self.new
    puts "I'm being initialized!"
    @var_i_want_to_init = 2
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T21:53:59.647

Rubymotion (1.24+) 现在似乎支持[使用 GCD 创建单例](http://blog.rubymotion.com/post/31917526853/rubymotion-gets-ios-6-iphone-5-debugger)

```
class MyClass
  def self.instance
    Dispatch.once { @instance ||= new }
    @instance
  end
end 
```

# powershell - 有没有办法捕捉 ctrl-c 并要求用户确认？

> ID：10733718
> 
> 赞同：8
> 
> 时间：2012-05-24T08:24:16.020
> 
> 标签：powershell, copy-paste

用户按 ctrl-c 可以轻松终止 Powershell 脚本。有没有办法让 Powershell 脚本捕获 ctrl-c 并要求用户确认他是否真的想终止脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-06T23:26:49.743

在 MSDN 论坛上查看[此帖子](http://social.technet.microsoft.com/Forums/en-US/winserverpowershell/thread/fb409048-a607-4895-8ab3-08c2ec656c7a)。

```
[console]::TreatControlCAsInput = $true
while ($true)
{
    write-host "Processing..."
    if ([console]::KeyAvailable)
    {
        $key = [system.console]::readkey($true)
        if (($key.modifiers -band [consolemodifiers]"control") -and ($key.key -eq "C"))
        {
            Add-Type -AssemblyName System.Windows.Forms
            if ([System.Windows.Forms.MessageBox]::Show("Are you sure you want to exit?", "Exit Script?", [System.Windows.Forms.MessageBoxButtons]::YesNo) -eq "Yes")
            {
                "Terminating..."
                break
            }
        }
    }
} 
```

如果您不想使用 GUI MessageBox 进行确认，则可以改用 Read-Host 或 $Host.UI.RawUI.ReadKey() 正如大卫在他的回答中所展示的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T08:56:10.647

```
while ($true)
{
    Write-Host "Do this, do that..."

    if ($Host.UI.RawUI.KeyAvailable -and (3 -eq [int]$Host.UI.RawUI.ReadKey("AllowCtrlC,IncludeKeyUp,NoEcho").Character))
    {
            Write-Host "You pressed CTRL-C. Do you want to continue doing this and that?" 
            $key = $Host.UI.RawUI.ReadKey("NoEcho, IncludeKeyDown")
            if ($key.Character -eq "N") { break; }
    }
} 
```

# maven-2 - 如何跳过 Maven 子模块构建

> ID：10733720
> 
> 赞同：0
> 
> 时间：2012-05-24T08:24:21.540
> 
> 标签：maven-2, exec-maven-plugin

我有类似的项目

```
module1
module2
module3
 submodule1
    src
      main
        java
        resources
    child1
    child2
module4 
```

当我在项目上运行 mvn clean install 时，所有顶部和子模块都会构建。但是我希望maven不要执行child1，child2。我怎么能做到这一点。我发现使用配置文件我可以做到这一点。但是怎么做？我可以在 submodule1 pom 中做一些事情，以便 child1, child2 从 maven 阶段中排除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:35:55.497

是的，这很容易。在`submodule1`的 pom 中，默认只包含 src：

```
<modules>
    <module>src</module>
</modules> 
```

然后在默认情况下禁用的特殊配置文件中，您构建所有这些配置文件

```
<profiles>
    <profile>
        <id>src-extra</id>
        <modules>
            <module>src</module>
            <module>child1</module>
            <module>child1</module>
        </modules>
    </profile>
</profiles> 
```

但是，您还应该研究`--also-make`and`--also-make-depends`选项，这可能允许您在没有任何 POM 更改或额外配置文件的情况下做您想做的事情。

# hibernate - JPA2 / Hibernate查询：使用日期作为查询参数忽略“时间”部分

> ID：10733721
> 
> 赞同：1
> 
> 时间：2012-05-24T08:24:38.907
> 
> 标签：hibernate, date, jpa, criteria

我想根据日期字段选择条件查询的一些记录：

```
CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
CriteriaQuery cq = cb.createQuery();
Root<Macchinario> from = cq.from(Macchinario.class);
cq.select(from);

cq.where(
                    cb.and(
                        cb.like(from.<String>get("marca"), "%"+ricerca.getMarca()+"%"),
                        cb.like(from.<String>get("modello"), "%"+ricerca.getModello()+"%"),
                        cb.like(from.<String>get("matricola"), "%"+ricerca.getMatricola()+"%"),

                        cb.equal(from.get("dataInserimento"), ricerca.getDataInserimento())
                    )
                ); 
```

dataInserimento 是一个 java.util.Date

我正在寻找的“Macchinario”在数据库中有“2012-05-23 10:16:00”。

ricerca.getDataInserimento() 返回“2012-05-23 00:00:00”。

如何传递该参数，告诉 jpa 忽略日期的“时间部分”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T08:55:39.757

~~您可以编写一个实用程序并使用它来截断日期中的时间部分：~~

**DateHelper.java**

```
public static Date getDateWithoutTime(Date date) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    cal.set(Calendar.HOUR_OF_DAY, 0);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);
    return cal.getTime();
} 
```

然后改变

```
cb.equal(from.get("dataInserimento"), ricerca.getDataInserimento()) 
```

至

```
cb.equal(from.get("dataInserimento"), 
         DateHelper.getDateWithoutTime(ricerca.getDataInserimento())) 
```

 ~~# 更新

从我们从 db 获得的值中截断时间部分似乎不可能使用 JPA 或 Hibernate 提供的开箱即用功能。Hibernate 提供了从日期列中提取年、月和日值的功能，我们将使用它。

```
Calendar dateCalendar = Calendar.getInstance();
dateCalendar.setTime(ricerca.getDataInserimento());

Path<Date> dataInserimento = from.get("dataInserimento");
Predicate timelessPredicate = cb.and(
        cb.equal(cb.function("year", Integer.class, dataInserimento), dateCalendar.get(Calendar.YEAR)),
        cb.equal(cb.function("month", Integer.class, dataInserimento), dateCalendar.get(Calendar.MONTH) + 1),
        cb.equal(cb.function("day", Integer.class, dataInserimento), dateCalendar.get(Calendar.DATE)));

cq.where(..., timelessPredicate); 
```

我们在这里所做的是，借助休眠功能和日历功能，我们将数据库中的年、月和日值与提供的输入日期分别进行比较。

这会成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:47:15.373

您可以尝试使用适当的模式格式化日期以忽略时间部分。

```
public String getDate(java.util.Date date){

    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
    return sdf.format(date);
} 
```

现在，您可以将日期作为正确格式的字符串，然后比较它们是否相等。

```
cb.equal(getDate(from.<java.util.Date>get("dataInserimento")), getDate(ricerca.getDataInserimento())) 
```~~

# android - 在 Android 中屏幕锁定时启动 NFC

> ID：10733723
> 
> 赞同：19
> 
> 时间：2012-05-24T08:24:47.677
> 
> 标签：android, nfc, power-management

当我们点击 NFC 标签时，我想启动我的应用程序，即使**电话被锁定**，就像在**谷歌钱包应用程序**中所做的一样。

我尝试了以下方式：

1）按电源按钮后点击 NFC 标签启动我的应用程序 -**错误**：

```
05-23 22:00:22.949: D/NfcService(32443): EnableDisableDiscoveryTask: enable = false

05-23 22:00:22.964: D/NfcService(32443): NFC-C polling OFF

05-23 22:00:22.996: D/PhoneStatusBar(273): disable: < EXPAND icons alerts TICKER 
system_info BACK* HOME* RECENT CLOCK* >

05-23 22:00:23.988: D/NfcService(32443): NFC-EE routing OFF
[10:33:22 AM IST] 
```

2）按电源按钮后点击 NFC 标签，现在我可以看到锁定/解锁屏幕 -**错误**：

```
05-23 22:03:59.714: D/NfcService(32443): EnableDisableDiscoveryTask: enable = true

05-23 22:03:59.730: D/NfcService(32443): NFC-EE routing OFF

05-23 22:04:03.238: D/NfcService(32443): NFC-C polling ON 
```

**如果我解锁屏幕并点击 NFC 标签，一切正常**

如何处理电源按钮和锁定/解锁屏幕以便在手机锁定时启动我的应用程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T08:47:28.803

这是不支持的。我认为即使是 Google 电子钱包也不会以这种方式工作，你确定吗？它实际上是一项安全功能——您不希望有人偷了您的手机后无法解锁就可以使用它进行支付。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T09:20:58.160

据谷歌称，必须解锁 Android 设备才能扫描 NFC 标签 [1]。此外，谷歌钱包涉及隐私和安全，并且仅在解锁状态下工作 [2]。

[1] [http://developer.android.com/guide/topics/connectivity/nfc/nfc.html](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html)

[2] [http://www.google.com/wallet/faq.html](http://www.google.com/wallet/faq.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-21T12:39:30.827

我希望在我的一个应用程序上实现相同的功能。经过一番搜索，我发现了这些链接：

[http://www.xda-developers.com/android/use-nfc-with-screen-off-or-in-lock-screen-on-galaxy-nexus/](http://www.xda-developers.com/android/use-nfc-with-screen-off-or-in-lock-screen-on-galaxy-nexus/)

另请注意，新的 Moto X 是一个名为“Skip”的功能，允许相同的行为。您可以在此视频中看到演示：

[https://www.youtube.com/watch?v=-JUgspIGxcE](https://www.youtube.com/watch?v=-JUgspIGxcE)

希望它可以帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T06:02:17.300

同意**Nikolay Elenkov**的观点，因为您无法按[**此处**](https://stackoverflow.com/questions/10077905/override-power-button-just-like-home-button)*讨论的方式按住电源*按钮，因此您在启动应用程序时无法解锁手机以启动应用程序。[](https://stackoverflow.com/questions/10077905/override-power-button-just-like-home-button)

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-05T11:16:06.397

如果你使用它可能会起作用：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED); 
```

[http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SHOW_WHEN_LOCKED](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SHOW_WHEN_LOCKED)**

# java - 使用 POI 读取 .xlsm 和 .xlsx 时出现异常

> ID：10733724
> 
> 赞同：0
> 
> 时间：2012-05-24T08:24:48.187
> 
> 标签：java, apache-poi

我正在尝试阅读 .xls、.xlsm 和 .xlsx 表。如果尝试读取 .xls 表，代码可以正常工作，但如果尝试读取 .xlsm 和 .xlsx 表则显示异常。我已经在我的类路径中配置了必要的 jars 文件-

```
poi-3.8-20120326.jar,
poi-examples-3.8-20120326.jar,
poi-excelant-3.8-20120326.jar,
poi-ooxml-3.8-20120326.jar,
poi-ooxml-schemas-3.8-20120326.jar,
poi-scratchpad-3.8-20120326.jar,
ooxml-schemas-1.0.jar,
xmlbeans-2.3.0.jar,
dom4j-1.6.1.jar,
geronimo-stax-api_1.0_spec-1.0.1.jar 
```

但后来我也得到了错误-

```
Exception in thread "main" org.apache.poi.POIXMLException: java.lang.reflect.InvocationTargetException
at org.apache.poi.xssf.usermodel.XSSFFactory.createDocumentPart(XSSFFactory.java:62)
at org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:403)
at org.apache.poi.POIXMLDocumentPart.read(POIXMLDocumentPart.java:408)
at org.apache.poi.POIXMLDocument.load(POIXMLDocument.java:155)
at org.apache.poi.xssf.usermodel.XSSFWorkbook.<init>(XSSFWorkbook.java:183)
at screens.LireEcrire.main(LireEcrire.java:26)
Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at org.apache.poi.xssf.usermodel.XSSFFactory.createDocumentPart(XSSFFactory.java:60)
... 5 more
Caused by: org.apache.xmlbeans.XmlException: error: duplicate attribute 'o:relid'
at org.apache.xmlbeans.impl.store.Locale$SaxLoader.load(Locale.java:3471)
at org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:1270)
at org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:1257)
at   org.apache.xmlbeans.impl.schema.SchemaTypeLoaderBase.parse(SchemaTypeLoaderBase.java:345)
at org.apache.xmlbeans.XmlObject$Factory.parse(XmlObject.java:663)
at org.apache.poi.xssf.usermodel.XSSFVMLDrawing.read(XSSFVMLDrawing.java:107)
at org.apache.poi.xssf.usermodel.XSSFVMLDrawing.<init>(XSSFVMLDrawing.java:102)
... 10 more
Caused by: org.xml.sax.SAXParseException: duplicate attribute 'o:relid'
at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.reportFatalError(Piccolo.java:1038)
at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.parse(Piccolo.java:723)
at org.apache.xmlbeans.impl.store.Locale$SaxLoader.load(Locale.java:3439)
... 16 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-30T20:10:35.207

Excel 生成错误的 xml。可能是特别的。

阅读：[https ://bz.apache.org/bugzilla/show_bug.cgi?id=53819](https://bz.apache.org/bugzilla/show_bug.cgi?id=53819)

它是由错误的 xml 引起的。

这可以通过手动删除属性的重复定义来解决。

> 堆栈跟踪告诉该文件包含无效的 xml。我检查了附件，确实如此： /xl/drawings/vmlDrawing1.vml 包含不允许的重复属性，请查看以下片段：

```
 <v:fill o:relid="rId1" o:relid="rId1" o:relid="rId1" o:relid="rId1" o:relid="rId1"
   o:relid="rId1" o:relid="rId1" o:relid="rId1" o:relid="rId1" o:relid="rId1"
   o:relid="rId1" o:relid="rId1" o:relid="rId1" o:relid="rId1" o:relid="rId1"
   o:relid="rId1" o:relid="rId1" o:relid="rId1" o:relid="rId1" o:relid="rId1"
   o:relid="rId1" o:relid="rId1" o:relid="rId1" o:relid="rId1" o:relid="rId1" 
```

您可以将 xslx 作为 zip 存档打开，找到此文件并修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:25:52.280

您可能需要[POI-XSSF](http://poi.apache.org/spreadsheet/index.html)来读取新格式的 XLS 文件（亲切地命名为 .XLSX）。

# firefox - 为什么 From Dust 3D 游戏只能在 Chrome 上运行？

> ID：10733728
> 
> 赞同：0
> 
> 时间：2012-05-24T08:25:06.680
> 
> 标签：firefox, google-chrome, safari, webgl

有一个名为**[FROM DUST](http://from-dust.ubisoft.com/)****的新的基于网络的 3D 游戏**。它适用于**网络浏览器 Google Chrome**，但我想知道为什么这款游戏也不适用于 Firefox、Opera 和 Safari。所有这些浏览器都**支持 WebGL 3D**，那么问题出在哪里？

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:17:07.000

AFAIK 它不是基于 WebGL，而是基于 OpenGL 和 Native Client (NaCl)****

# c# - XmlSerializer。保留空字符串属性？

> ID：10733731
> 
> 赞同：7
> 
> 时间：2012-05-24T08:25:12.027
> 
> 标签：c#, .net, xml, serialization

> **可能重复：**
> [XML 序列化和空值 - C#](https://stackoverflow.com/questions/711723/xml-serialization-and-null-value-c-sharp)
> [更改 XmlSerializer 序列化空元素的方式](https://stackoverflow.com/questions/3935582/change-how-xmlserializer-serializes-empty-elements)

如何使 XmlSerializer 为具有空值的字符串属性存储空标签，而不是跳过此属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T09:50:20.887

你的意思是你想要这个：

```
<parent>
    <child1>Hello World</child1>
    <child2 />
</parent> 
```

代替

```
<parent>
    <child1>Hello World</child1>
</parent> 
```

您的类应如下所示： 序列化`ShouldSerializePropertyName`程序根据定义（如果存在）调用方法以确定是否应序列化属性（如 Windows 窗体设计器）。

```
public class Parent
{
    [XmlElement("Child1")]
    public string Child1 { get; set; }

    [XmlElement("Child2")]
    public string Child2 { get; set; }

    public bool ShouldSerializeChild2() { return true; }

} 
```

# php - Memcached 和大量 tcpip 重置（如 netstat 和 tcpdump 所示） - 有什么想法吗？

> ID：10733735
> 
> 赞同：2
> 
> 时间：2012-05-24T08:25:22.813
> 
> 标签：php, memcached, pecl, tcpdump, netstat

我们使用 pecl 的 memcached（注意 D，有 2 个，memcache 和 memcached）扩展连接到 memcached 1.4.13 盒子的集群。

我们注意到发生了大量的 tcpip 重置：

```
[root@box ~]# netstat -s | grep unexpected
2078913548 connections reset due to unexpected data

[root@box ~]# tcpdump -n -v 'tcp[tcpflags] & (tcp-rst) != 0' -nn
13:30:45.786577 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto TCP (6), length 40)
LANSUBNET.1.19093 > LANSUBNET.4.999: Flags [R], cksum 0xfad9 (correct), seq 1996582451, win 0, length 0
13:30:45.786697 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto TCP (6), length 40)
LANSUBNET.1.11540 > LANSUBNET.100.999: Flags [R], cksum 0x904c (correct), seq 2003170685, win 0, length 0
13:30:45.793199 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto TCP (6), length 40)
LANSUBNET.1.55125 > LANSUBNET.3.999: Flags [R], cksum 0x42c3 (correct), seq 1998297456, win 0, length 0
13:30:45.793389 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto TCP (6), length 40)
LANSUBNET.1.19112 > LANSUBNET.4.999: Flags [R], cksum 0xa2b5 (correct), seq 1993131641, win 0, length 0
13:30:45.793547 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto TCP (6), length 40)
LANSUBNET.1.11564 > LANSUBNET.100.999: Flags [R], cksum 0x447c (correct), seq 2003255604, win 0, length 0
13:30:45.817874 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto TCP (6), length 40)
LANSUBNET.1.55135 > LANSUBNET.3.999: Flags [R], cksum 0x841c (correct), seq 1995200572, win 0, length 0
13:30:45.818549 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto TCP (6), length 40)
LANSUBNET.1.55141 > LANSUBNET.3.999: Flags [R], cksum 0x385d (correct), seq 1997841357, win 0, length 0 
```

Memcached 绑定在我们所有的 memcached 盒子的 999 端口上。

我们是否错误地诊断了这一点？

这可能是什么原因造成的？

我们肯定知道：

A）这与 mecached pecl 扩展无关（注意 d，有 2 个扩展...memcache 和 memcached）。我们尝试切换到另一个 memcache 扩展，但出现了同样的问题。

B) 这实际上 100% 是由 memcache 连接引起的。我们禁用了 php -> memcached 会话，并且由于 netstat 中的意外数据而重置的连接立即停止增长。

C）我们在 2 个盒子上出现了这个问题，所以我不认为它是特定于服务器的问题。当我说 2 个盒子时，我的意思是 2 个不同的服务器，它们与我们的 memcached 集群建立 OUTBOUND 连接。他们都坐在同一个局域网上。

注意：为了安全起见，我们将上面的 LAN 子网更改为“LANSUBNET”...这是在此处发布消息之前完成的；）

任何帮助，将不胜感激！

谢谢。

* * *

**更多数据：**

```
[root@box ~]# netstat -s | grep unexpected ; sleep 1 ; netstat -s | grep unexpected ;
2089258664 connections reset due to unexpected data
2089258858 connections reset due to unexpected data 
```

所以看起来，在“不太忙”的时间里，重置以大约 200 / 秒的速度发生。哎哟!

**另外，非常值得一提：**

我们执行了以下操作：

```
tcpdump -nn -v 'tcp[tcpflags] & (tcp-rst) != 0' and tcp port not 999 
```

因此过滤端口 999（我们的 memcached 守护进程所在的位置）......并且 tcp 重置缓慢到微小的涓涓细流......几分钟，我认为这在相当繁忙的服务上是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T14:58:02.387

我们已经找到了这个问题的完整解决方案。

这是由 memcached pecl 扩展“Memcached::OPT_BUFFER_WRITES”常量设置为 true 引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:17:08.723

我找到了解决方案。

我怀疑推特上的任何人都不会读到这个，但如果你是，谢谢你：

twitter 最近（我相信是 2012 年 2 月）开源了他们的 memcached 代理。

[https://dev.twitter.com/blog/twemproxy](https://dev.twitter.com/blog/twemproxy)

本质上，这一切都是基于 ip:port 或 socket 的 memcached 协议代理。

您可以将其绑定到 ip:port 或套接字。我们选择了套接字路由。

所以我们剩下的是一个本地托管的套接字，我们可以从中访问我们的 memcached 服务器池。

pecl 扩展 memcached 2.0.0b1+ 支持基于套接字的连接。

所以现在一步一步如下：

php -> memcached 2.0.2 pecl extension -[LOCALLY HOSTED SOCKET]-> twitters awesome memcached proxy -[TRULY PERSISTENT CONNECTIONS]-> memcached 服务器池

tcp 重置已停止。

* * *

**值得一提：**

我们最初尝试绑定 twitter memcached 代理 127.0.0.1 ......即使我们让 pecl memcached 与 twitter 代理通信，我们看到 tcp 重置......奇怪！

我想这不是一个“修复”……但它解决了我们的问题。

请享用！

# ios - MonoTouch校验量数据消耗

> ID：10733738
> 
> 赞同：2
> 
> 时间：2012-05-24T08:25:32.880
> 
> 标签：ios, xamarin.ios

我为 iPhone 制作了一个 MonoTouch 应用程序，其中的数据由多个 Web 服务访问。因为客户订阅了电话公司，所以他们有一个最大值。每月消耗的数据量。

现在我的问题是，如何检查在 iPhone 上运行应用程序期间消耗的数据量？

格兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:17:32.133

尝试使用[Fiddler](http://www.fiddler2.com/fiddler2/)。

您可以通过将代理设置为运行 Fiddler 的机器来连接 iOS 设备。

除了能够查看每个请求的大小之外，您还可以检查流量。很棒的工具。

# function - 如何在离散时间系统中使用 tf2ss()？

> ID：10733741
> 
> 赞同：1
> 
> 时间：2012-05-24T08:25:38.323
> 
> 标签：function, matlab, transfer, state-space

A 具有离散时间传递函数，

> H(z ^(-1) ) = B(z ^(-1) ) / A(z ^(-1) ) = (b [0] + b [1] z ^(-1) ) / (a [0] + a [1] z ^(-1) + a [2] z ^(-2) )。

其分子和分母在代码中表示为：

> 数 = [b [0] , b [1] ];
> den = [a [0] , a [1] , a [2] ];
> Ts = 0.01 [；]% 采样周期`

如何使用`tf2ss()`获取`A`、`B`和`C`状态`D`空间矩阵？
我是否`tf2ss()`像在连续时间系统中那样直接调用？
或者是否有任何其他内置的 Matlab 函数用于此目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T18:30:09.087

在连续和离散模型中，状态空间转换的传递函数是相等的。但是，如果你想离散地表示系统中的矩阵，你可能想做这样的事情

S = ss(tf(Num,Den,T))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:14:24.273

也许我在你的问题中遗漏了一些东西，但你可以像这样简单地使用它：

```
[A, B, C, D] = tf2ss(Den, Num); 
```

您也可以参考[官方`tf2ss`文档](http://www.mathworks.com/help/toolbox/signal/ref/tf2ss.html)来确认这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-23T12:48:31.423

首先，您应该使用以下方法构建连续状态空间模型： **sys_state_space = tf2ss(a,b)** 之后您应该使用以下方法： **sys_ss_discrete = c2d(sys_state_space,T*-sampling*,'zoh')**

那么你就有了系统的状态空间离散模型。

# javascript - 分配 SVG 根元素的 currentScale 时出错

> ID：10733745
> 
> 赞同：0
> 
> 时间：2012-05-24T08:25:44.637
> 
> 标签：javascript, svg, jquery-svg

我对 SVG 和 JavaScript 有疑问：

此代码按预期运行：

```
function initSvg(width) {
    SVGRoot = document.getElementsByTagName('svg')[0];
    console.log(SVGRoot.currentScale);    // Displays '1' which is OK 
```

但是当我尝试像这样重新分配 currentScale 参数时：

```
function initSvg(width) {
    SVGRoot = document.getElementsByTagName('svg')[0];
    SVGRoot.currentScale = parseFloat(width)/400;   
    console.log(SVGRoot.currentScale);    // Should display some floating point number 
```

我得到错误

```
Component returned failure code: 0x80070057 (NS_ERROR_ILLEGAL_VALUE) nsIDOMSVGSVGElement.currentScale] 
```

并且不执行警报。我对 SVGRoot.currentScale 的分配有什么问题？

更新：

使用时错误消失

```
SVGRoot.setAttribute('currentScale', parseFloat(width)/400); 
```

或者

```
SVGRoot.setAttributeNS(null, 'currentScale', parseFloat(width)/400); 
```

但 currentScale 的实际值不会改变。无论传递给 setAttribute 什么，它都保持为 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:05:40.157

setAttribute(NS) 方式不正确，SVG 中没有“currentScale”属性。

'currentScale' 是[SVGSVGElement 接口](http://www.w3.org/TR/SVG11/struct.html#InterfaceSVGSVGElement)中的一个属性，只要数量合理（例如，不是 Inf 或 NaN），您应该能够像您一样获取和设置它。但是请注意，SVG 1.1 规范仅定义了最外层 svg 元素上[currentScale的行为。](http://www.w3.org/TR/SVG11/struct.html#__svg__SVGSVGElement__currentScale)

# php - 如何显示表格中的所有数据？

> ID：10733746
> 
> 赞同：2
> 
> 时间：2012-05-24T08:25:48.533
> 
> 标签：php, loops, html-table

如何使用循环显示表格标签内的表格中的所有数据？这是我的代码：

```
 <table width="380px">
              <tr>
                     <td><?php echo $left_bread['recipe'];?></td>
                     <td><?php echo $left_bread['name'];?></td>
                     <td><?php echo $left_bread['scale_date'];?></td>
               </tr>
      </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:33:48.673

我认为您的代码缺少..据我所知，它缺少 foreach()。也许你应该试试这个，

```
<?php foreach($your_variable as $your_alias):?>
<table width="380px">
<tr>
    <td><?php echo $your_alias['recipe'];?></td>
    <td><?php echo $your_alias['name'];?></td>
    <td><?php echo $your_alias['scale_date'];?></td>
</tr>
</table>
<?php endforeach;?> 
```

我想就是这样，如果你想要的是从查询中动态显示数据，那么这会做，知道 $your_variable 包含一个将获取配方、名称和 scale_date 的查询。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:48:31.047

您需要使用 foreach 来访问您的数据..

```
//$data for example contains your fetched results from the database 

// this will lopp until it contains results
<?php
foreach( $data as $left_bread ) {

<table width="380px">
<tr>
 <td><?php echo $left_bread['recipe'];?></td>
<td><?php echo $left_bread['name'];?></td>
<td><?php echo $left_bread['scale_date'];?></td>
</tr>
</table>

}

  ?> 
```

# php - 在 Foreach 循环中对 XPath 结果运行 XPath

> ID：10733754
> 
> 赞同：0
> 
> 时间：2012-05-24T08:26:37.717
> 
> 标签：php, xml, xpath

我正在开发一个读取如下数据源的项目：

```
<?xml version="1.0" encoding="UTF-8"?>
<producten>
  <product>
    <sku><![CDATA[75100192B]]></sku>
    <price><![CDATA[349.00]]></price>
    <old_price><![CDATA[499.00]]></old_price>
    <in_stock><![CDATA[1]]></in_stock>
    <delivery_time><![CDATA[1 - 2 werkdagen]]></delivery_time>
    <manufacturer><![CDATA[Kids River]]></manufacturer>
    <name><![CDATA[Kids River Urban Stroller 3 in 1 Black / Grey  Black Frame]]></name>
    <description><![CDATA[KidsRiver Urban Stroller]]></description>
    <url><![CDATA[http://www.url.com/]]></url>
    <categorie><![CDATA[Kinderwagens]]></categorie>
    <subcategorie><![CDATA[Kinderwagen]]></subcategorie>
    <model><![CDATA[Kids River Urban]]></model>
    <collectiejaar><![CDATA[2011]]></collectiejaar>
    <shipping_price><![CDATA[0.00]]></shipping_price>
    <image><![CDATA[http://www.url.com/image.jpg]]></image>
  </product>
  <product>
    <sku><![CDATA[Joolz Day Silver / Black - 2012]]></sku>
    <price><![CDATA[849.00]]></price>
    <old_price><![CDATA[879.00]]></old_price>
    <in_stock><![CDATA[1]]></in_stock>
    <delivery_time><![CDATA[1 - 2 werkdagen]]></delivery_time>
    <manufacturer><![CDATA[Joolz]]></manufacturer>
    <name><![CDATA[Joolz Day Silver / Black]]></name>
    <description><![CDATA[Joolz Day Compleet.]]></description>
    <url><![CDATA[http://www.url.com/]]></url>
    <categorie><![CDATA[Kinderwagens]]></categorie>
    <subcategorie><![CDATA[Kinderwagen]]></subcategorie>
    <model><![CDATA[Joolz Day]]></model>
    <collectiejaar><![CDATA[2012]]></collectiejaar>
    <shipping_price><![CDATA[0.00]]></shipping_price>
    <image><![CDATA[http://www.url.com/image.jpg]]></image>
  </product>
</producten> 
```

我想做一个循环，可以从这个提要中读取单个产品，所以我做了这样的事情：

```
// Spin up the SimpleXML parser
$xml_feed = new SimpleXMLElement($feed_data);

$products = $xml_feed->xpath('//producten/product');

foreach ($products as $product)
{
    $name = $product->xpath('./name');
    $price = $product->xpath('price');
    $old_price = $product->xpath('old_price');
    $in_stock = $product->xpath('in_stock');
    $manufacturer = $product->xpath('manufacturer');

    echo print_r( $name);
    echo var_dump((string) $price[0]);
    echo var_dump((string) $old_price[0]);
    echo var_dump((string) $in_stock[0]);
    echo var_dump((string) $manufacturer[0]);
    echo "\r\n";
} 
```

我想知道在使用 XPath 2 次时是否有更好的方法来读取 xml。循环之前的一个和循环内的另一个 XPath。我这样做是因为我希望能够解析各种提要。

我有点担心字段后面的 [0]：$price[0]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:32:40.207

> *“我想知道在使用 XPath 2 次时是否有更好的方法来读取 xml。一个在循环之前，另一个 XPath 在循环内。”*

为什么？我看不出有什么问题。

> *“我有点担心`[0]`场后：`$price[0]`。”*

`xpath()`总是返回一个节点列表，即使只有一个节点可供选择。`[0]`是正确的。

* * *

无论如何，由于您使用的是 SimpleXML，您可以编写：

```
$producten = new SimpleXMLElement($feed_data);

foreach ($producten->product as $product) 
{
  echo $product->price . "\n";
  echo $product->old_price . "\n";
  echo $product->in_stock . "\n";
  echo $product->manufacturer . "\n";
} 
```

[http://codepad.org/SDDPBFhn](http://codepad.org/SDDPBFhn)

# bit - 位、字节和字节序

> ID：10733767
> 
> 赞同：1
> 
> 时间：2012-05-24T08:27:27.307
> 
> 标签：bit

我一直在读一些关于字节序的东西，它适用于字节而不是位，但最终不是所有的东西都是一组位吗？

现在我还读到我们指的是字节而不是位，因为计算机是字节可寻址的，并且一次可以获取一个字节的数据，并且字节序将指的是最低有效“字节”的位置，同意。

但是，这些位是如何存储在这些单独的字节中的？我的意思是我的最低有效位在哪里不重要吗？我一直对右边的最低有效位感到满意，所以在硬件级别也是？

如果我想访问字节中的特定位，寻址将如何处理位？，这是我的问题

为了更清楚，最低地址将用于最高有效“位”或最低有效“位”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:48:18.567

访问位通常通过掩码和移位来完成。对于掩码本身，您不需要考虑最高/最低有效位的位置。第 1 位有掩码 1，第 2 位有掩码 2，第 3 位有掩码 4，以此类推。

如果您希望位`n`在任意硬件和任意位/字节设置上的最低/最高有效位的位置，那么只有一种算法：

```
/* set bit N */
extr <- 2^N
do
  extr <- rot_right(extr)
until (extr & 1) 
```

如果最低有效位在内部存储在最左侧，该算法也可以工作，但它需要位循环操作。然后，您可以使用计数器确定 LSB 是最左边还是最右边。

一般来说（这些天）可以安全地假设，最低有效位是字节中的最右边。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-28T22:32:34.313

令牌环和以太网的 MAC 地址具有不同的位字节序表示。

令牌环的 MAC 寻址字节 (0x34) = 以太网的 MAC 寻址字节 (0x2C)。字节的地址顺序仍然是大端，但一个字节内的位具有不同的位端。当使用具有两种类型接口的系统进行网络流量时，这会产生兼容性问题。

# python - Python json导入“模块”对象没有属性“加载”

> ID：10733768
> 
> 赞同：4
> 
> 时间：2012-05-24T08:27:27.583
> 
> 标签：python, json, pyscripter

我在带有 Python 2.7.3 的 Windows 上使用 PyScripter，我正在尝试导入 json。如果我直接使用解释器似乎可以工作，但是当保存在文件中并运行时，我得到“模块”对象没有属性“加载”。

```
import json

j = '{"one": 1, "numbers": [1, 2, 3.5]}'

x = json.loads(j) 
```

x 返回的解释器，`{u'numbers': [1, 2, 3.5], u'one': 1}`

我对 Python 还很陌生，所以如果这是一个愚蠢的问题，我很抱歉。非常感谢

# html - 当父级有文本装饰时摆脱嵌套的 li 文本装饰

> ID：10733771
> 
> 赞同：0
> 
> 时间：2012-05-24T08:27:33.043
> 
> 标签：html, css

[http://jsfiddle.net/Lqvcr/53/](http://jsfiddle.net/Lqvcr/53/)

这是非常基本的，我不知道如何使它工作。

当下拉列表锚没有下划线时，如何保持 .selected 类下划线？

的HTML：

```
<ul id="nav">
    <li>
        <a href="about.html">about</a>
    </li>
    <li>
        <a href="about.html">about</a>
    </li>
    <li class="selected">
        <a href="work.html">Work</a>
        <ul id="second" class="vis">
            <li>
                <a href="graphicdesign.html">Graphic Design</a>
            </li>
            <li>
                <a href="illustrations.html">Illustrations</a>
            </li>
        </ul>
    </li>
    <!-- etcetera --> 
```

​CSS：

```
ul#nav {
    position: relative;
    margin-left: 0;
    padding-left: 0;
    display: inline;
}
ul#nav li {
    margin-left: 0;
    padding: 3px 15px;
    list-style: none;
    display: inline;
}
ul#nav li.first {
    margin-left: 0;
    border-left: none;
    list-style: none;
    display: inline;
}
ul#second {
    position: absolute;
    right: -57px;
    display: none;
}
.selected {
    text-decoration: underline;
}
.selected:hover ul#second {
    display: block;
}
.selected:hover ul#second li a {
    display: block;
}
a {
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:53:57.387

只需更改此行：

```
.selected a{text-decoration:underline;} 
```

对于这个：

```
.selected > a{text-decoration:underline;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:31:50.080

如果您更具体地使用为所需链接加下划线的选择器，则可以更轻松地选择其中不希望加下划线的其他项目。我变了

```
.selected {text-decoration:underline;} 
```

至：

```
.selected a {text-decoration:underline;} 
```

另外，`text-decoration: none;`像这样添加：

```
.selected:hover ul#second li a {display:block; text-decoration: none;} 
```

看到它在[jsfiddle上工作](http://jsfiddle.net/cchana/Lqvcr/54/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:35:12.430

您必须为`.selected`选择器声明一个规则，并为较低级别的元素覆盖它。

由于`.selected`( `text-decoration: underlined;`) 所需的样式是用户代理的默认样式，因此我省略了一些`text-decoration`声明。剩下要做的就是为低级元素添加规则，以高特异性定义：

```
.selected:hover ul li a {
    text-decoration: none;
} 
```

​这里是[更新的 jsFiddle](http://jsfiddle.net/Lqvcr/57/)，用于演示。

# php - 从变量更改 PHP 日期格式

> ID：10733773
> 
> 赞同：1
> 
> 时间：2012-05-24T08:27:44.160
> 
> 标签：php, datetime

我从另一个函数获取 php 输出函数，它总是以类似的格式返回日期：

```
2012-05-24 09:05:20 
```

所以我的问题是如何从我需要的变量 $p_re["last_login"] 格式中获取？我需要像这样

```
24.5.2012 09:05:20 
```

谢谢大家，我在任何部分都没有找到它 - 从数据库中更改，但我需要从已经输出的变量“重写”格式。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T08:33:28.723

在页面上显示日期之前尝试此代码

```
$p_re["last_login"]  = date('d.m.Y H:i:s', strtotime($p_re["last_login"])); 
```

更多信息

'dmY' 将返回 24.05.2012

'dnY' 将返回 24.5.2012

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:34:14.180

自定义时间格式的一般答案（需要调整）：

```
$output = "2012-05-24 09:05:20";

$converted = date("d.m.Y H:i:s", mktime(substr($output,11,2), substr($output,14,2), substr($output,17,2), substr($output,5,2), substr($output,8,2), substr($output,0,4))); 
```

由于您的输出是标准 MySQL 复合格式，您可以使用

```
$output = "2012-05-24 09:05:20";

$converted = date("d.m.Y H:i:s", strtotime($output)); 
```

*如果你愿意，你可以使用而不是`d.m.Y`你可以使用（注意月份中的前导零）。`d.n.Y``24.5.2012``24.05.2012`*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:33:44.823

```
$date_str = '2012-05-24 09:05:20'; 
```

您可以使用以下语句根据您的需要格式化您的日期。

```
$formatted_date = date('Y.m.d H:i:s', strtotime($date_str)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T08:34:46.277

一种更可定制的方法是使用 DateTime 对象。

首先使用[DateTime::createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php)创建一个 DateTime 对象，然后使用[DateTime::format](http://www.php.net/manual/en/datetime.format.php)输出该对象。

# android - Android在多行pdf中添加图像作为文本背景

> ID：10733776
> 
> 赞同：1
> 
> 时间：2012-05-24T08:27:50.033
> 
> 标签：android, pdf, pdf-generation

我必须根据来自网络服务的数据在 pdf 中并行显示问题和答案。所有动态数据都包含动态长度。如果问题和答案都很长，那么我必须比较两者的长度并相应地绘制背景图像并在下一行显示数据。我的问题是如何在多行问答中绘制背景？需要在替代问题上绘制背景。

# mysql - 如何在 Symfony2 登录时设置 MySQL 会话变量

> ID：10733777
> 
> 赞同：0
> 
> 时间：2012-05-24T08:27:53.257
> 
> 标签：mysql, login, symfony, session-variables

我需要对将使用 Symfony2 应用程序访问的 MySQL 数据库进行一些全面的审计。

据我所知，标准做法是将内置 MySQL 函数 USER() 返回的值插入到审计表中，以记录谁对记录进行了更改。由于对数据库的所有更改都将通过 Symfony2 前端使用 parameters.ini 文件中指定的数据库连接参数执行，因此 USER() 将始终返回相同的值。为了解决这个问题，我使用了一个 MySQL 会话变量 @sf_user。我可以从 Symfony 会话对象中获取用户名，并使用它在我的控制器中设置 @sf_user 的值，例如

```
$em = $this->getDoctrine()->getEntityManager();
// set @sf_user session variable in the database
// so trigger can insert this in audit table after delete
$conn = $em->getConnection();
$username = $this->get('security.context')->getToken()->getUser()->getUsername();
$sql = 'SET @sf_user = \''.$username.'\'';
$stmt = $conn->prepare($sql);
$stmt->execute(); 
```

这很好，但是由于我正在审核我的所有表并且无法预测用户将首先执行哪个操作，我需要在每个控制器中重复此代码以确保在会话开始时设置 @sf_user。

我真正想做的是在用户登录时设置这个变量。我已经按照[The Book](http://symfony.com/doc/current/book/security.html)中的描述设置了我的登录页面。问题是，我的 SecurityController 只处理显示登录表单，而“安全系统本身负责检查提交的用户名和密码并验证用户”。

所以，我的问题是，在用户成功登录后，我在哪里可以插入上述代码，以便它始终在会话开始时执行？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:38:13.580

您可以创建一个`kernel.request`事件侦听器并在那里执行您的查询。除此之外，您可以查看自动插入当前作者姓名的[EntityAudit包。](https://github.com/simplethings/EntityAudit#entityaudit-extension-for-doctrine2)虽然它有一些[限制](https://github.com/simplethings/EntityAudit#todos)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:08:31.190

感谢所有建议，我刚刚回到在每个 deleteAction 控制器中设置变量 @sf_user 。它不漂亮，但它有效。

# javascript - OpenTok：归档和归档流元数据

> ID：10733778
> 
> 赞同：0
> 
> 时间：2012-05-24T08:27:56.310
> 
> 标签：javascript, video-streaming, opentk

我一直在使用 OpenTok (http://www.tokbox.com/opentok/api) 记录网络聊天并将它们保存在 OpenTok 服务器上一切正常，但现在我想保存其他元数据（用户名、名字姓氏等）录制开始时的每个流。

尝试使用OpenTok Stream 对象`stream.name`的`stream.data`属性，但似乎没有任何效果，并且分配的值未与记录的流一起保存。可能是我以错误的方式使用某些东西。

创建 OpenTok 流时如何保存/分配附加数据？

谢谢，

苏丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:02:23.927

我们目前正在让您这样做。我们知道这是合作伙伴想要的，但尚未实施。

我会回来，并在可用时回复相应内容的链接。

# excel - 如何在 Excel 中获取某个单词的 Google 搜索结果

> ID：10733781
> 
> 赞同：1
> 
> 时间：2012-05-24T08:28:11.597
> 
> 标签：excel, search-engine, vba

> **可能重复：**
> [来自 Excel 的 Google 结果数](https://stackoverflow.com/questions/4763140/number-of-google-results-from-excel)

我有以下情况，我想在Excel中收集某个单词的搜索结果数。我将用一个例子更好地解释它：

我在 Excel 文件中有几个单词如下：

姓名----------------Google 中的结果

鞋

衬衫

书

移动的

...

我想获得以下

姓名----------------Google 中的结果

鞋子 123.234 结果 aprox

衬衫 53.334 结果 aprox

书 243.234 结果 aprox

移动 1.234 结果 aprox

...

我不确定如何使用谷歌在 Excel 中收集任何特定单词（也带有“”）的结果。

有什么建议吗？

此致

# xamarin.ios - 用于绘图的 CGBitmapContext 选项

> ID：10733785
> 
> 赞同：0
> 
> 时间：2012-05-24T08:28:31.750
> 
> 标签：xamarin.ios, quartz-graphics, cgbitmapcontext

CGBitmapContext 或 Quartz 2D 有选项吗？我想用它在单点触控的 UIImage 上绘图。

谢谢亚历克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:39:16.373

绘图始终在`CGContext`. 如果要在现有图像上绘图，`CGBitmapContext`逻辑上是要使用的上下文。

# .net - Umbraco 中的数据库连接初始化失败

> ID：10733792
> 
> 赞同：3
> 
> 时间：2012-05-24T08:29:02.867
> 
> 标签：.net, sql-server, sql-server-2008, umbraco

我不断收到此问题是否有任何错误日志我可以查看以了解发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:28:22.493

您使用的是 SQL Express 吗？如果是这样，数据库可能处于自动关闭模式。您应该在应用程序日志中找到任何错误。umbraco 的应用程序池是否允许连接到数据库？此错误通常与安全性相关，因此给出“您需要启用某某”对黑客有很大帮助。检查应用程序池帐户的权限。检查您是否安装了 Mcaffee - 它有拒绝访问的习惯。尝试使用 SQL 身份验证进行连接，看看它是否是一个角色。将您的连接字符串从 SSMS 连接对话框复制并粘贴到应用程序 Web 配置。Typoz 是给定的。至少您现在知道为什么该消息无用了！PS有一篇关于umbraco IIS安装屏幕截图的文章，它可以作为交叉参考[http://www.ava.co.uk/support/faq/umbraco/install-umbraco-4042-windows-server-2008-iis-6-sql-2008-r2.aspx](http://www.ava.co.uk/support/faq/umbraco/install-umbraco-4042-windows-server-2008-iis-6-sql-2008-r2.aspx)

# passwords - 我应该将盐值发送到网络浏览器以保护密码吗

> ID：10733793
> 
> 赞同：0
> 
> 时间：2012-05-24T08:29:06.337
> 
> 标签：passwords, password-protection, saltedhash

我已经阅读了关于保护密码免受某些攻击的加盐哈希密码技术。[https://www.owasp.org/index.php/Hashing_Java#Why_add_salt_.3F](https://www.owasp.org/index.php/Hashing_Java#Why_add_salt_.3F)

但是我有些困惑，我应该发送一个盐值（所有使用尝试登录）然后使用 Javascript 计算该盐的哈希值吗？

我认为这有助于提高安全性。但我不确定，我没有看到有人使用这种方式。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:54:01.823

一个攻击案例：您的服务器被入侵，攻击者读取数据库并获取哈希，攻击者制作 HTTP 请求并将哈希直接发送到您的服务器并登录用户帐户。在这种情况下，安全性会进一步降低。

salt用于防止相同的密码出现在攻击者面前，从而可以防御攻击者入侵您的服务器并获取用户名和哈希以进行离线密码破解的情况。

# html - HTML - 防止自动填充或自动完成字段（FF、IE、iPad）

> ID：10733795
> 
> 赞同：2
> 
> 时间：2012-05-24T08:29:16.883
> 
> 标签：html, ipad, security, internet-explorer, firefox

在 Firefox 首选项中，您可以选择是否应存储密码以及是否应自动填充字段。如果我访问我的银行网站，我想知道如何处理我不会被询问是否要存储密码或用户名！？

哪些标记是防止网络表单中的自动填充或自动完成所必需的？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T08:30:52.510

```
<form autocomplete="off"> 
```

据我所知，在ff3上不起作用

[https://developer.mozilla.org/en/How_to_Turn_Off_Form_Autocompletion](https://developer.mozilla.org/en/How_to_Turn_Off_Form_Autocompletion)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T21:23:49.157

为了不同的观点，我添加了这一点。为什么不使用蜜罐来阻止 chrome 对您的字段进行攻击。它似乎对我来说可以跨浏览器工作。值得一试。

[http://benjaminjshore.info/2014/05/chrome-auto-fill-honey-pot-hack.html](http://benjaminjshore.info/2014/05/chrome-auto-fill-honey-pot-hack.html)

# objective-c - 用图像和类制作对象

> ID：10733800
> 
> 赞同：0
> 
> 时间：2012-05-24T08:29:32.853
> 
> 标签：objective-c, ios, xcode, object

我目前正在制作一个简单的目标游戏。目前它工作得很好。但我只有一个目标。已分配类和计时器的图像。我通过这个来操纵它：

```
CGRect player = target.frame; 
```

现在我想要更多的目标，但我不想添加新的类和图像。我只想克隆这个并将其分配给不同的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:44:02.267

我基本上不明白您通过具有相同的目标（具有相同的类和对象）来实现什么。无论如何，您可以通过转到项目中表示标题“目标”的蓝色面板来简单地添加目标，在那里您可以右键单击并选择“复制目标”。您必须构建您的应用程序。还在“其他 c 标志”下添加一个属性，您可以访问它知道哪个目标正在运行。

# android - 上下文菜单需要的建议

> ID：10733802
> 
> 赞同：0
> 
> 时间：2012-05-24T08:29:48.007
> 
> 标签：android, android-listview

我有一个 XML 布局，它有两个编辑文本字段，一个用于“标题”，另一个用于“故事”。当用户在这些文本字段中输入他的数据并按下后退按钮时，该条目将作为标题集保存在列表视图中。列表视图出现在一个活动中，比如 A1。现在 A1 扩展了 Activity。

每当“长按”列表中的项目时，就会出现带有编辑、删除和阅读按钮的上下文菜单。如果按下编辑按钮，我需要打开另一个活动，该活动可以编辑在与单击的项目相对应的文本字段中输入的数据。此外，我需要在列表中单击的项目的 ID 和位置。

我正在使用 ListView 类型的列表变量来添加我的适配器。我还在`public boolean onContextItemSelected(MenuItem item)' 方法中检查上下文菜单的编辑、删除和读取选项。

如何从此处获取单击的项目的 ID 和位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:57:09.967

在适配器中，您可以为您的项目创建一个 getter 和 setter。当长按监听器时，把你的项目放在那里。

您应该将“标题”和“故事”存储在数据库中，您可以在新活动中从数据库中获取它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:56:06.467

我认为最好的方法是为列表视图创建一个实例变量（在类定义之后和 onCreate 之前声明），并将列表视图分配给`onCreate()`. 然后您将能够从您的 onContextItemSelected() 方法访问列表视图并将它们传递给您的新活动

如果您可以发布一些代码，我们应该能够提供更多帮助。

我支持 Th0rndike 上面的评论。如果问题是可读的并且很有可能答案会被接受，那么帮助某人会容易得多。

# lucene - 生成 Lucene.NET 同义词列表 XML 的最简单方法是什么？

> ID：10733805
> 
> 赞同：0
> 
> 时间：2012-05-24T08:30:11.073
> 
> 标签：lucene, lucene.net

生成用于 Lucene.NET 的同义词列表 XML 的最简单方法是什么？根据我的阅读，Lucene.NET 将加载一个 XML 文档，例如这种格式：

```
<?xml version="1.0" encoding="utf-8" ?>
<synonyms>
<group>
    <syn>fast</syn>
    <syn>quick</syn>
    <syn>rapid</syn>
</group>

<group>
    <syn>slow</syn>
    <syn>decrease</syn>
</group>

<group>
    <syn>google</syn>
    <syn>search</syn>
</group>

<group>
    <syn>check</syn>
    <syn>lookup</syn>
    <syn>look</syn>
</group>
</synonyms> 
```

我已经尝试搜索一种工具，它可以使用 CSV 并以正确的格式输出 XML 文档。然而，我惊讶地没有发现任何东西。所以要么我的理解不正确，并且像上面这样的 XML 文档不是在 Lucene.net 中加载同义词的方法，要么我没有正确搜索。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:25:03.367

您的 xml 来自 CodeProject 文章[Lucene.Net - Custom Synonym Analyzer](http://www.codeproject.com/Articles/32201/Lucene-Net-Custom-Synonym-Analyzer)，其中还包括`XmlSynonymEngine`解析您的 xml。您可以构建一个自定义`ISynonymEngine`来直接解析您的 csv 数据，而无需将您的输入转换为 xml。

# php - jQuery 试图加载一个不存在的 ajax-loader.gif mod-rewrite 不起作用

> ID：10733808
> 
> 赞同：2
> 
> 时间：2012-05-24T08:30:26.020
> 
> 标签：php, jquery, ajax, mod-rewrite, http-status-code-404

如果您在 Chrome 中访问此页面： [http ://www.immigrationconsult.org/contact.php](http://www.immigrationconsult.org/contact.php)

然后在页面上检查元素，转到控制台你会看到这个错误：

`GET htt...cms/contact/images/ajax-loader.gif 404 (Not Found) jquery.min.js:4`

我按照这里的说明创建了一个： [http ://css-tricks.com/weird-file-requests-and-easing-server-stress-with-htaccess/](http://css-tricks.com/weird-file-requests-and-easing-server-stress-with-htaccess/)

我进行了测试以确保它可以正常工作，并且确实可以，但不是针对此特定要求。jquery.min.js 是从制造商那里缩小的 jQuery，我根本没有改变它。我使用特工 Ransack 在我的任何文件中深入搜索此内容的任何引用，搜索没有产生任何结果。

我不知道该怎么做或如何防止这个问题发生，这似乎是一个小问题，但我无法找到问题的原因！请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T05:54:17.273

所以，这确实是 Chrome 的误导。出错的插件是 jQuery Coda-Slider。因为是 JS 压缩的，所以 Ransack 特工找不到字符串……吸取教训……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:37:00.717

您显然没有正确目录中的 ajax-loader.gif 文件，或者至少您的 ajax 脚本找错了地方。

您可以修改 java 脚本以指向正确的位置，也可以将文件放在正确的位置，我会选择后者。

我自己在使用 JQuery 时遇到了这些错误，其中一些图标没有被加载，只需将它们放在正确的文件夹中就可以了。

但是，如果您使用 googles jquery 库，所有资源也应该自动加载。像这样...

```
<script type="text/javascript" 
        src="http://www.google.com/jsapi">
</script>
<script type="text/javascript">
  google.load("jquery", "1.7.2");
  google.load(etc..);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T03:04:00.547

您需要从他们的网站下载整个 zip 文件：http: [//jquerymobile.com/download/](http://jquerymobile.com/download/)。解压后，你会发现 js 文件、CSS 和一个名为“images”的文件夹，所有这些都需要在本地存在。

# java - 查找带有模式的文件

> ID：10733809
> 
> 赞同：3
> 
> 时间：2012-05-24T08:30:40.967
> 
> 标签：java, regex

我尝试使用如下名称搜索文件：ENV20120517 每一件事你做什么并由 .DAT 完成

所以我将模式设置为：“ENV20120517*.*DAT”。

```
 public boolean accept(File dir, String name) {
    if (pattern != null) {
        return name.matches(pattern);
    }
    return false;
 } 
```

为什么对于前面的模式，我得到了正确的：name = "ENV20120516053518.DAT" ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T08:33:52.280

[`String.matches()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)采用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)，而不是[glob 模式](http://en.wikipedia.org/wiki/Glob_%28programming%29)。

碰巧这`ENV20120517*.*DAT`是一个有效的正则表达式。但是，它确实与您所期望的含义不同：它匹配任何以开头`ENV2012051`和结尾的字符串`DAT`（`.*`匹配任何内容，并且`7*`实际上是无操作）。

以下正则表达式等同于您问题中的模式`ENV20120517.*[.].*DAT`

有关如何在 Java 中进行 glob 匹配的一些想法，请参阅[Is there an equivalent of java.util.regex for "glob" type patterns?](https://stackoverflow.com/questions/1247772/is-there-an-equivalent-of-java-util-regex-for-glob-type-patterns)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:45:29.450

尝试

```
pattern = "ENV20120517.*\\.DAT" 
```

或者更严格地说：

```
pattern = "^ENV20120517.*\\.DAT$" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:40:24.327

部分应该是`"ENV20120517.*DAT"`，因为`"ENV20120517*.*DAT"`，第一个`*`匹配 0 个或更多 7 个字符，所以`"ENV20120516053518.DAT".matches("ENV20120517*.*DAT")`是真的。

# visual-studio-2010 - 在 vb2010 中插入查询不起作用

> ID：10733811
> 
> 赞同：0
> 
> 时间：2012-05-24T08:30:50.640
> 
> 标签：visual-studio-2010, sqlite, insert

我有这个查询可以很好地在 aaccess db 中插入数据，但现在我试图在 sqllite3 db 上插入，但我无法使用相同的查询

```
Imports System.Data.Odbc

Public Class Form1
Public con As New OdbcConnection("Dsn=SQLite3 Datasource;database=C:\Users\pcampos\Desktop\spiceworks_prod.db;stepapi=0;syncpragma=NORMAL;notxn=0;timeout=100000;shortnames=0;longnames=0;nocreat=0;nowchar=0;fksupport=0;oemcp=0;bigint=0")

 Dim query As String = "INSERT INTO INSERT INTO tickets(id, summary, status)  VALUES(@id,@summary,@status )"

            con.Close()
            con.Open()
            Using cmd As New OdbcCommand(query, con)

                cmd.Parameters.AddWithValue("@id", OdbcType.VarChar).Value = test
                cmd.Parameters.AddWithValue("@sumamry", OdbcType.VarChar).Value = "ola ola ola"
                cmd.Parameters.AddWithValue("@staus", OdbcType.VarChar).Value = "close"

                Dim x As Integer = cmd.ExecuteNonQuery()
                MsgBox(x)

                If x < 1 Then
                    MessageBox.Show("Erro ao inserir", My.Application.Info.Title, MessageBoxButtons.OK, MessageBoxIcon.Error)
                Else
                    MessageBox.Show("Registo1 inserido com sucesso!", My.Application.Info.Title, MessageBoxButtons.OK, MessageBoxIcon.Information)

                End If
            End Using

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T23:35:15.943

该查询不是有效的 SQL。它应该是这样的：

```
 Dim query As String = "INSERT INTO tickets (id, summary, status) VALUES( @id, @summary, @status )" 
```

请参阅[SQLite 插入查询手册](http://www.sqlite.org/lang_insert.html)以获取详细说明 SQL 插入语句中关键字顺序的图表。SQL 在其他基于 SQL 的系统上会出错，而不仅仅是 SQLite。只是想我会链接到该手册页，因为它非常有用。

# vbscript - 引入延迟以允许完成 word doc 的打印

> ID：10733812
> 
> 赞同：0
> 
> 时间：2012-05-24T08:30:51.527
> 
> 标签：vbscript

我有以下代码可以从 vbscript 打印 word 文档

```
Set objWord = CreateObject("Word.Application")
objWord.Caption = "Test"
objWord.Visible = False

Set objDoc = objWord.Documents.Open("c:\test.doc")

'now print to default printer
objDoc.PrintOut()

MsgBox("Finished!")

'close word application
objWord.Quit 0 
```

我想删除消息框并让脚本静默运行并完成，但是当消息框的延迟被删除时，脚本在打印文档之前完成。

有没有办法做到这一点？

非常感谢

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:25:24.180

将其替换为 sleep 命令，如下所示。1000 是一秒，所以根据需要进行调整。200 可能适用于您的脚本。

```
WScript.Sleep 1000 
```

# c# - MVC3 & Ninject / Unity：注入分层服务容器

> ID：10733814
> 
> 赞同：2
> 
> 时间：2012-05-24T08:30:52.747
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, ninject, unity-container

我使用 Ninject 已经有一段时间了，但只用于简单的 DI。我有一个稍微复杂的场景，我想迎合。

我正在使用带有控制器注入的 Ninject.Web.MVC 插件，该插件在我的基本控制器上强制执行，并传递给所有继承控制器。这是我的基本模式：

```
using System;
using System.Web;
using System.Web.Mvc;

using Business;

using Microsoft.Web.Infrastructure.DynamicModuleHelper;

using Ninject;
using Ninject.Web.Common;

namespace Web {

    #region Controller

    public class MyController : MyBaseController {
        public MyController(IMyService1 myService1, IMyService2 myService2)
            : base(myService1, myService2) {
        }
        public ActionResult MyAction() {
            MyServiceProp1.DoSomething();
            MyServiceProp2.DoSomethingElse();
            return View();
        }
    }

    public class MyBaseController : Controller {
        protected IMyService1 MyServiceProp1 { get; set; }
        protected IMyService2 MyServiceProp2 { get; set; }

        public MyBaseController(IMyService1 myService1, IMyService2 myService2) {
            MyServiceProp1 = myService1;
            MyServiceProp2 = myService2;
        }
    }

    #endregion
}

namespace Business {

    #region Services

    public interface IMyService1 {
        void DoSomething();
    }

    public interface IMyService2 {
        void DoSomethingElse();
    }

    public class MyService1 : IMyService1 {
        public void DoSomething() {
        }
    }

    public class MyService2 : IMyService2 {
        public void DoSomethingElse() {
        }
    }

    #endregion
}

#region Ninject stuff

namespace Web.App_Start {
    public static class NinjectWebCommon {
        private static readonly Bootstrapper bootstrapper = new Bootstrapper();

        /// <summary>
        /// Starts the application
        /// </summary>
        public static void Start() {
            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
            DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
            bootstrapper.Initialize(CreateKernel);
        }

        /// <summary>
        /// Stops the application.
        /// </summary>
        public static void Stop() {
            bootstrapper.ShutDown();
        }

        /// <summary>
        /// Creates a kernel that will manage the application.
        /// </summary>
        /// <returns>The created kernel.</returns>
        private static IKernel CreateKernel() {
            var kernel = new StandardKernel();
            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

            RegisterServices(kernel);
            return kernel;
        }

        /// <summary>
        /// Loads modules and services
        /// </summary>
        /// <param name="kernel">The kernel.</param>
        private static void RegisterServices(IKernel kernel) {
            kernel.Bind<IMyService1>().To<MyService1>();
            kernel.Bind<IMyService2>().To<MyService2>();
        }
    }
}

#endregion 
```

如您所见，我有多种服务。如果我想添加 MyService3，我将不得不修改实现基本控制器的每个控制器。虽然这不是一项艰巨的工作，但当项目更大时......

我想做的是实现某种服务容器，我将把它注入基本控制器，因此所有实现控制器（以及任何后续类）：

```
namespace Web {

    #region Controller

    public class MyController : MyBaseController {
        public MyController(IMyServiceContainer container)
            : base(container) {
        }
        public ActionResult MyAction() {
            MyServiceProp1.DoSomething();
            MyServiceProp2.DoSomethingElse();
            return View();
        }
    }

    public interface IMyServiceContainer {
        IMyService1 MyServiceProp1 { get; set; }
        IMyService2 MyServiceProp2 { get; set; }
    }

    public class MyBaseController : Controller, IMyServiceContainer {
        public MyBaseController(IMyServiceContainer container) {
            MyServiceProp1 = container.MyServiceProp1;
            MyServiceProp2 = container.MyServiceProp2;
        }

        #region Implementation of IMyServiceContainer

        public IMyService1 MyServiceProp1 { get; set; }
        public IMyService2 MyServiceProp2 { get; set; }

        #endregion
    }

    #endregion
} 
```

这样，如果我需要添加全局依赖项，我不必更改任何控制器，只需更改基本控制器，这更容易维护。

有没有办法用 Ninject（甚至 Unity，因为我很快就会把它改过来）实现这一点，并且模式/方法是否有一个我还没有听说过的特定名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:40:12.500

```
public interface IMyServiceContainer 
{
    IMyService1 MyService1 { get; }
    IMyService2 MyService2 { get; }
    IMyService3 MyService3 { get; }
}

public class MyServiceContainer 
{
    public IMyService1 MyService1 { get; private set; }
    public IMyService2 MyService2 { get; private set; }
    public IMyService3 MyService3 { get; private set; }

    public MyServiceContainer(IMyService1 myService1, IMyService2 myService2, IMyService3 myService3)
    {
        MyService1 = myService1;
        MyService2 = myService2;
        MyService3 = myService3;
    }
} 
```

然后是您的基本控制器：

```
public class MyBaseController : Controller 
{
    public MyBaseController(IMyServiceContainer container) 
    {
        Container = container;
    }

    protected IMyServiceContainer Container { get; private set; }
} 
```

然后是派生的控制器：

```
public class MyController : MyBaseController 
{
    public MyController(IMyServiceContainer container) : base(container) 
    {
    }

    public ActionResult MyAction() 
    {
        Container.MyService1.DoSomething();
        Container.MyService2.DoSomethingElse();
        return View();
    }
} 
```

现在剩下的就是配置 NInject：

```
private static void RegisterServices(IKernel kernel) 
{
    kernel.Bind<IMyService1>().To<MyService1>();
    kernel.Bind<IMyService2>().To<MyService2>();
    kernel.Bind<IMyService3>().To<MyService3>();

    kernel.Bind<IMyServiceContainer>().To<MyServiceContainer>();
} 
```

# c - 通过/dev/mem读写进程内存，text段可以，但是data段不行，为什么？

> ID：10733816
> 
> 赞同：4
> 
> 时间：2012-05-24T08:30:57.413
> 
> 标签：c, linux, mmap, itanium

我想通过`/dev/mem`.

**首先**，我通过自己编写的一个linux内核模块得到进程的内存映射，输出是这样的：

```
start_code_segment      4000000000000000
end_code_segment        4000000000019c38
start_data_segment      6000000000009c38
end_data_segment        600000000000b21d
start_brk               6000000000010000
brk                     6000000000034000
start_stack             60000fffffde7b00 
```

**其次**，我可以通过linux内核模块将虚拟地址（VA）转换为PA，例如，我可以转换`VA:0x4000000000000008`为`PA:0x100100c49f8008`

**第三**，函数`read_phy_mem`可以获取内存中的数据`PA:0x100100c49f8008`，代码在最后。

**问题**：我的问题是当我读取`text segment`PA 内存时，一切正常，但是如果我读取`data segment`PA 内存，`*((long *)mapAddr)`在第 243 行会导致系统宕机。另外，我试过

```
memcpy( &data, (void *)mapAddr, sizeof(long) ) 
```

但它仍然使系统崩溃。

**其他信息**：我的电脑是 IA64，操作系统是 Linux 2.6.18，当系统关闭时，我可以像这样从控制台获取输出信息，然后系统将重新启动。

```
Entered OS MCA handler. PSP=20010000fff21320 cpu=0 monarch=1
cpu 0, MCA occurred in user space, original stack not modified
All OS MCA slaves have reached rendezvous
MCA: global MCA
mlogbuf_finish: printing switched to urgent mode, MCA/INIT might be dodgy or fail.
Delaying for 5 seconds... 
```

**功能代码`read_phy_mem`**

```
 /*
     * pa:   physical address
     * data: memory data in pa
     *
     * return int: success or failed
    */
188 int read_phy_mem(unsigned long pa,long *data)
189 {
190     int memfd;
191     int pageSize;
192     int shift;
193     int do_mlock;
194     void volatile *mapStart;
195     void volatile *mapAddr;
196     unsigned long pa_base;
197     unsigned long pa_offset;
198 
199     memfd = open("/dev/mem", O_RDWR | O_SYNC);
200     if(memfd == -1)
201     {
202         perror("Failed to open /dev/mem");
203         return FAIL;
204     }
205 
206     shift = 0;
207     pageSize = PAGE_SIZE; //#define PAGE_SIZE 16384
208     while(pageSize > 0)
209     {
210         pageSize = pageSize >> 1;
211         shift ++;
212     }
213     shift --;
214     pa_base = (pa >> shift) << shift;
215     pa_offset = pa - pa_base;
224     mapStart = (void volatile *)mmap(0, PAGE_SIZE, PROT_READ | PROT_WRITE,MAP_SHARED | MAP_LOCKED, memfd, pa_base);
226     if(mapStart == MAP_FAILED)
227     {
228         perror("Failed to mmap /dev/mem");
229         close(memfd);
230         return FAIL;
231     }
232     if(mlock((void *)mapStart, PAGE_SIZE) == -1)
233     {
234         perror("Failed to mlock mmaped space");
235         do_mlock = 0;
236     }
237     do_mlock = 1;
238 
239     mapAddr = (void volatile *)((unsigned long)mapStart + pa_offset);
243     printf("mapAddr %p %d\n", mapAddr, *((long *)mapAddr));
256     if(munmap((void *)mapStart, PAGE_SIZE) != 0)
257     {
258         perror("Failed to munmap /dev/mem");
259     }
260     close(memfd);
269     return OK;
270 } 
```

谁能理解为什么文本段运行良好但数据段不行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:21:25.360

我想，它的发生是因为代码部分在进程执行时保留在内存中（如果不是 DLL 代码），而数据部分则不断地进出。
尝试使用堆栈段。并检查它是否工作？
编写您自己的测试程序并以 KB 为单位动态分配内存，并在循环中保持该内存的使用。比用你的代码尝试读取测试程序的内存段。我认为它会起作用。
我在 Windows 中做了类似的工作来替换 IVT 的 BIOS 地址。
应该是root用户。

# objective-c - Xcode - 带有文件模板资产的库项目

> ID：10733818
> 
> 赞同：1
> 
> 时间：2012-05-24T08:31:04.820
> 
> 标签：objective-c, xcode

我正在 xcode 中创建一个库项目。该库将严重依赖于我为其创建了文件模板的特定模式。当我将模板目录复制到“文件模板”目录时，这工作正常。

**问题是：** 我可以将此模板添加到我的库项目中吗？当用户将我的库项目拖到他/她的项目中时，我想象文件模板会自动添加到 xcode 中。

# objective-c - 将 youtube 添加到 CCScene？

> ID：10733820
> 
> 赞同：0
> 
> 时间：2012-05-24T08:31:06.130
> 
> 标签：objective-c, cocos2d-iphone

我知道如何将 youtube 添加到视图中。但我们使用的是 CCScene（cocos2d），我需要从一个场景中打开一个 youtube 并播放它。

我该怎么做？

我知道如何通过添加子视图来做到这一点：

```
- (void)embedYouTube:(NSString*)url frame:(CGRect)frame {  
    NSString* embedHTML = @"\ 
    <html><head>\ 
    <style type=\"text/css\">\ 
    body {\ 
        background-color: transparent;\ 
    color: white;\ 
    }\ 
    </style>\ 
    </head><body style=\"margin:0\">\ 
    <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \ 
    width=\"%0.0f\" height=\"%0.0f\"></embed>\ 
    </body></html>";  
    NSString* html = [NSString stringWithFormat:embedHTML, url, frame.size.width, frame.size.height];  

    if(videoView == nil) {  
        videoView = [[UIWebView alloc] initWithFrame:frame];  
        [self.view addSubview:videoView];  
    }  
    [videoView loadHTMLString:html baseURL:nil];  
} 
```

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:33:56.093

```
[[CCDirector sharedDirector].openGLView addSubview:videoView]; 
```

如果您使用的是 cocos2d 2.0，则该`openGLView`属性仅称为`view`.

# jquery - .keyup() Safari 中的上下箭头

> ID：10733821
> 
> 赞同：1
> 
> 时间：2012-05-24T08:31:08.237
> 
> 标签：jquery, safari

我正在尝试将 a 附加`.keyup(e)`到向上和向下箭头。它在 Firefox 中运行良好，但在 Safari 中却不行。所有其他箭头在 Safari 中都可以正常工作。

```
$(document.documentElement).keyup(function (event) {

        if (event.keyCode == 37) 
        {
        // go left
            $('.left').click();
        } 
        else if (event.keyCode == 39) 
        {
        // go right
            $('.right').click();
        }
        else if (event.keyCode == 38) 
        {
        // next project
            $('a.up div.arrow').click();
        }
        else if (event.keyCode == 40) 
        {
        // previous project
            $('a.down div.arrow').click();
        }
        else if (event.keyCode == 32) 
        {
        // info
            $('aside').click();
        }
    }); 
```

编辑：我的网站的工作演示链接 - [http://www.ryan-neil.com](http://www.ryan-neil.com)

应该早点补充...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:41:49.263

**工作演示**请在这里尝试我在 OSX lion safari 上，它可以工作：http: [//jsfiddle.net/DRgRv/1/](http://jsfiddle.net/DRgRv/1/)

因此，单击灰色框，然后使用向上和向下箭头键进行导航：

如果这有帮助，别忘了投票并接受。

**代码**

```
$(document).keyup(function(e) {
    switch (e.which) {
    case 37:
        $('div').stop().animate({
            left: '-=10'
        }); //left arrow key
        break;
    case 38:
        $('div').stop().animate({
            top: '-=10'
        }); //up arrow key
        break;
    case 39:
        $('div').stop().animate({
            left: '+=10'
        }); //right arrow key
        break;
    case 40:
        $('div').stop().animate({
            top: '+=10'
        }); //bottom arrow key
        break;
    }
})​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:35:53.593

您使用的是哪个版本的 Safari

[jquery 支持](http://docs.jquery.com/Browser_Compatibility)关于浏览器兼容性

jQuery 积极支持这些浏览器：

```
Firefox Current - 1 version
Internet Explorer 6+
Safari Current - 1 version
Opera Current - 1 version
Chrome Current - 1 version 
```

它们的任何问题都应该被视为 jQuery 中的错误并报告。

存在以下已知问题：

```
Mozilla Firefox 1.0.x
Internet Explorer 1.0-5.x
Safari 1.0-2.0.1
Opera 1.0-9.x
Konqueror 
```

jQuery 通常与 Konqueror 和 Firefox 1.0.x 一起使用，但由于我们没有定期测试它们，因此可能会有一些意想不到的错误。

你可以测试关键事件

[在这里尝试测试](http://www.ryancooper.com/resources/keycode.asp)

[或在这里](http://asquare.net/javascript/tests/KeyCode.html)

你仍然可以尝试像这样从stackoverflow中的另一篇文章中破解它

按键是一个令人困惑的事件。虽然 keydown 和 keyup 会告诉您键盘上的哪个特定键已按下或刚刚恢复，但 keypress 事件应该告诉您屏幕上会出现什么字符，这就是您引用的 jquery 文档说的原因：

```
For example, a lowercase "a" will be reported as 65 by keydown and keyup, but as 97 by keypress. 
```

更糟糕的是，对于没有在屏幕上写入内容的内容，Safari 不会触发按键事件——这就是箭头键不起作用的原因。然而，Firefox 确实会触发箭头键的按键事件。两者都是规范的合理实现，所以不要期望任何一个都会改变。这就是为什么有人建议坚持使用 keydown 或 keyup。

但是，看起来您想利用按键事件在按住键时重复（在 Firefox 中）的方式，并且您希望使用箭头键来执行此操作。如果是这种情况，您需要编写一个同时查看 keydown 和 keypress 的处理程序。以下是浏览器对按住箭头键的两种不同反应方式：

***Firefox**注册一个 keydown 事件并重复 keypress 事件（注意：只需按一次键将注册一个 keydown 和一个 keypress 事件）

***Safari**注册一个 keydown 事件并重复 keydown 事件 一个快速破解，使箭头键工作得相当好，并让键重复工作是：

```
function moveItem(evt) {
    // do something with `this` and evt.keyCode here...
}

$(document.documentElement)
    .keypress(function(evt) {
        if ($.data(this, '_lastKeyEvent') != 'keydown') {
            // since firefox will do both a keydown and a keypress for the first
            // keydown, we ignore the very first keypress
            moveItem.call(this, evt);
        }
        $.data(this, '_lastKeyEvent', 'keypress');
    })
    .keydown(function(evt) {
        moveItem.call(this, evt);
        $.data(this, '_lastKeyEvent', 'keydown');
    }); 
```

# php - 在 onchange 中打印数据

> ID：10733822
> 
> 赞同：0
> 
> 时间：2012-05-24T08:31:08.517
> 
> 标签：php, jquery

当改变 select 语句的值时，我想打印 DB 的一行数据。

这是表格

```
<div id=\"sendric\">
    <form name=\"form_sendrich\" id=\"form_sendric\" method=\"post\" action=\"inc/assegna_cs.inc.php\">
    <fieldset>
    <legend><i>&nbsp;Assegnazione squadra intervento</i></legend>

     <b><br/>
       <span>&nbsp;&nbsp;Scegli la squadra pi&ugrave; vicina al luogo dell'intervento. Vedi mappa</span>
        <br/><br/>
        Squadra <select id=\"sel_cs\">");
                $i=0;
                while($i<$contcs){
                    print("<option name=\"id_cs\" value=\"".$tabcaposquadra[$i]['id']."\">".$tabcaposquadra[$i]['sede']."</option>");
                    $i++;
                }
        print("</select>
        <div id=\"datisquadra\"></div>   
        <input type=\"hidden\" value=\"".$idrich."\">
        <input type=\"submit\" />
        </fieldset>
    </form> 
```

这是带有Jquery的JS，由select的值产生并发送到php页面

```
 // Visualizzazione dati sull'onchange della select (delle squadre presenti)
$("#sel_cs").onchange(function(){
     var valueID=$("#sel_cs").val();
     $.ajax({
        type: "POST",
        url: "inc/vedisquadra.inc.php",
        data: "id_cs="+valueID,
        success: function(msg){
                     $("#datisquadra").html(msg);
             },
        error: function(msg){
                 $("#datisquadra").html(msg);
             },
        beforeSend:function(){
                     $("#datisquadra").html("<img hspace='84' src='images/loading.gif' alt='Loading...'  width='32' height='32'>");
             }
     });
}); 
```

这是在 asincrono 中打印数据的脚本 php，我认为此页面没有问题

```
$id_ut=$_POST['id_cs'];

    $sql = "SELECT * FROM `utenti` WHERE `id`=".$id_ut;//query nel db 
 $dati=mysql_query($sql);
 if (!$dati) {
    echo "Query non eseguita correttamente sul DB($sql): ".mysql_error();
    exit;
 }
  $row=mysql_fetch_array($dati, MYSQL_ASSOC);
 $cs_nome=$row['nome'];
 $cs_cognome=$row['cognome'];
 $cs_mail=$row['mail'];
 $cs_sede=$row['sede'];
 $cs_tool=$row['attrezzature'];

$msg="<br/>
    <b>Caposquadra: </b>".$cs_nome." ".$cs_cognome."<br/>
    <b>E-mail: </b>".$cs_mail."<br/>
    <b>Sede: </b>.".$cs_sede."</br>
    <b>Attrezzatura: </b>".$cs_tool;

echo $msg; 
```

# api - 他们在哪里隐藏了 DotNetOpenAuth API 文档？

> ID：10733823
> 
> 赞同：2
> 
> 时间：2012-05-24T08:31:09.890
> 
> 标签：api, documentation, dotnetopenauth

我很确定我查看了最常见的地方，但似乎找不到 DotNetOpenAuth API 的文档。几乎每个链接都转发到似乎不存在的 docs.dotnetopenauth.net。

有谁知道他们将文档隐藏在哪里？非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:18:07.973

这是文档的副本。不知道它是否是最新的，但包含比 Google 缓存更好的标记信息；） [点击](http://dopehacker.appspot.com/www.dotnetopenauth.net/documentation/)

**编辑：网站现已上线**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T05:28:44.730

根据您使用的版本：

*   [http://docs.dotnetopenauth.net/v4.0/](http://docs.dotnetopenauth.net/v4.0/)
*   [http://docs.dotnetopenauth.net/v3.4/](http://docs.dotnetopenauth.net/v3.4/)
*   [http://docs.dotnetopenauth.net/master/](http://docs.dotnetopenauth.net/master/)

该网站关闭了一天左右。但现在又恢复了。

# iphone - iPhone应用因数据存储问题被拒绝

> ID：10733826
> 
> 赞同：0
> 
> 时间：2012-05-24T08:31:19.907
> 
> 标签：iphone, appstore-approval

由于数据存储问题，我的应用程序被拒绝。谷歌搜索后，我得到了这些想法。请确认我的假设是否正确。

1.  将 SQLite 数据库存储在缓存文件夹中并设置“donotbackup”标志，这将阻止缓存清理系统删除文件。

但是如果我将应用程序更新到较新的版本，数据库会发生什么？有机会丢失数据库吗？

1.  将图像等缓存文件保存在 Caches 文件夹中。

我们是否需要使用我们的代码清除缓存，否则设备会自动清除它？

然后我将所有数据（包括图像）存储在应用程序的 Sqlite db 文件中。那么我应该在我的应用程序中实现 iCloud 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:40:03.587

您必须对要保留的文件使用“不备份”属性，其他文件放置在缓存文件夹中。应用程序终止时，缓存文件夹将被自动删除。

检查这篇文章

[开发者论坛](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)

[苹果文档](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/PerformanceTuning/PerformanceTuning.html#//apple_ref/doc/uid/TP40007072-CH8-SW9)

# .htaccess - .htaccess 重写到 wwwroot 之外的路径

> ID：10733841
> 
> 赞同：1
> 
> 时间：2012-05-24T08:32:08.007
> 
> 标签：.htaccess

我想更改我的 web 文件夹的文档根目录。我无权访问 httpd.conf 或虚拟主机定义，因此无法在此处更改。

我看到了这个问题：[Using htaccess to change document root](https://stackoverflow.com/questions/8118941/using-htaccess-to-change-document-root) and know you can use to rewrite the incoming URL to a new path。

文档根在此路径上：`/httpdocs/*` 我希望它重写所有内容`/subdomains/new/httpdocs/*`

如果我查看“正常”重写规则，它会重写为相对路径：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain-name.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.domain-name.com$

RewriteRule (.*) /folder/$1 [L] 
```

怎么可能在 wwwroot 之外重写？

# tabs - TextMate 中的标签行设置

> ID：10733847
> 
> 赞同：2
> 
> 时间：2012-05-24T08:32:58.147
> 
> 标签：tabs, settings, textmate

当 textmate 中的选项卡行过长时，它会显示如下：

![在此处输入图像描述](../Images/3bc1c86e1b9c0d2b82483a1268823dad.png)

我想要这样：

![在此处输入图像描述](../Images/9ce0edb19446f3fba907c3ae356f8052.png)

textmate中是否有设置，所以我可以更改它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:09:55.803

Textmate 的票务系统中有一个针对此行为的六年前的[功能请求，该请求](http://ticket.macromates.com/show?ticket_id=4EFB31A8)得到了定期的“我也是”评论，但没有迹象表明很快就会完成。

结果，不要屏住呼吸。

# redirect - Apache 将 www.domain.com 重定向到 domain.com/domain

> ID：10733851
> 
> 赞同：0
> 
> 时间：2012-05-24T08:33:27.643
> 
> 标签：redirect, web, apache2, subdomain, virtualhost

我正在准备我在 Amazon AWS 中的 ubuntu 服务器来托管一个新网站。它使用 Apache2。我以前这样做过，没有任何问题，例如，为了欺骗我欺骗 google.com 和 www.google.com 的朋友（编辑他的主机文件），无论有没有“www.”，一切都很好。

现在我用 1&1 购买了一个域名 'domain.com'，我已经配置了一个子域 'www.domain.com' 并将它指向我的服务器。dns记录很好，我检查了。我还编辑了启用站点的默认文件并添加了以下条目：

```
<VirtualHost *:80 >
    ServerName www.domain.com
    DocumentRoot /var/www/domain
</VirtualHost>

<VirtualHost *:80 >
    ServerName domain.com
    DocumentRoot /var/www/domain
</VirtualHost> 
```

当我在浏览器中访问 domain.com 时，它工作正常，但是当我访问 www.domain.com 时，我得到**domain.com/domain/**并且显然是 404。

我使用 telnet 发现当你请求主机的根页面时服务器会发送 301：www.domain.com

我不知道为什么会这样，我对上面的配置进行了很多修改，例如：

```
<VirtualHost *:80 >
    ServerAlias www.domain.com
    DocumentRoot /var/www/domain
</VirtualHost>

<VirtualHost *:80 >
    ServerAlias domain.com
    DocumentRoot /var/www/domain
</VirtualHost> 
```

.

```
<VirtualHost *:80 >
    ServerName domain.com
    DocumentRoot /var/www/domain
</VirtualHost>

<VirtualHost *:80 >
    ServerName www.domain.com
    DocumentRoot /var/www/domain
</VirtualHost> 
```

.

```
<VirtualHost *:80 >
    ServerName domain.com
    Server Alias www.domain.com
    DocumentRoot /var/www/domain
</VirtualHost> 
```

但它一直在发生。

作为记录，这就是我用来恶搞的东西，它仍然可以正常工作

```
<VirtualHost *:80 >
    ServerName google.com
    DocumentRoot /var/www/google
</VirtualHost>

<VirtualHost *:80 >
    ServerName www.google.com
    DocumentRoot /var/www/google
</VirtualHost> 
```

我现在已经搜索了两天，但我发现的只是我正在使用的相同配置，并且没有解释为什么这不起作用。

谢谢你的帮助！

PS：此目录或任何父目录中都没有 .htaccess 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:05:02.933

最好放

```
<VirtualHost *:80 >
    ServerName domain.com
    ServerAlias www.domain.com
    DocumentRoot /var/www/domain
</VirtualHost> 
```

您不能在 Server 和 Alias 之间放置空格，所以我改为向您展示

希望它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T19:45:38.543

万一有人输入这个问题。

我仍然不知道出了什么问题，但是在将这些配置移动到文件中之后，它们神奇地开始正常工作。

感谢所有花时间阅读问题的人。

# sql - 从视图中删除重复记录

> ID：10733854
> 
> 赞同：8
> 
> 时间：2012-05-24T08:33:32.967
> 
> 标签：sql, sql-server, sql-server-2008

我有一个看法。我怎样才能只显示不同的记录。有 19 列。我想以单一方式显示所有内容而没有任何重复，并且我不想删除重复项。我要求它仅用于查看目的。

```
 SELECT DISTINCT([Complaint Number]),[Complaint_For],[Total_Complaint_Qty]
        ,[Defects],[Customer Code ],[Location],[CutomerName],[KUNUM],[QMNUM]
        ,[Responsible_KAM] 
        FROM [CCCMPREPOSITORY].[dbo].[VW_Final_] 
```

如果我使用前面的查询，它会返回 1000 条记录。但是，如果我使用以下查询，它会返回没有重复的准确记录。但我希望显示所有列。

```
 SELECT DISTINCT([Complaint Number])
        FROM [CCCMPREPOSITORY].[dbo].[VW_Final_] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T08:48:28.457

您必须有部分/所有投诉编号的重复记录，因此`DISTINCT`无法使用。考虑一个简单的表，例如

```
Column1    |    Column2
-----------+------------
A          |    X
A          |    Y 
```

如果您只需要 Column1 = A 的一条记录，SQL 无法知道是将 X 还是 Y 放入 Column2。这与您遇到的问题相同，但有 19 列，而不是 2 列。您需要实施某种逻辑来确定每个投诉编号将显示哪一行。因此，对于上表，如果我希望 X 在 Column2 中显示，我将使用以下查询：

```
SELECT  Column1,
        Column2
FROM    (   SELECT  Column1,
                    Column2,
                    ROW_NUMBER() OVER(PARTITION BY Column1 ORDER BY Column2 ASC) [RowNumber]
            FROM    MyTable
        ) t
WHERE   RowNumber = 1 
```

在这里，我使用该`ROW_NUMBER()`功能对每一行进行优先级排序，然后仅显示具有最高优先级的行。如果我不在乎它们以什么顺序出现，我可能会使用这样的东西来随机选择一行。

```
ROW_NUMBER() OVER(PARTITION BY Column1 ORDER BY NEWID()) [RowNumber] 
```

由于我不知道将什么逻辑应用于您的查询，我无法准确发布您需要的内容，但我可以尝试让您开始：

```
SELECT  [Complaint Number],
        [Complaint_For],
        [Total_Complaint_Qty],
        [Defects],
        [Customer Code ],
        [Location],
        [CutomerName],
        [KUNUM],
        [QMNUM],
        [Responsible_KAM]
FROM    (   SELECT  [Complaint Number],
                    [Complaint_For],
                    [Total_Complaint_Qty],
                    [Defects],
                    [Customer Code ],
                    [Location],
                    [CutomerName],
                    [KUNUM],
                    [QMNUM],
                    [Responsible_KAM],
                    ROW_NUMBER() OVER(PARTITION BY [Complaint Number] ORDER BY Complaint_For, Defects) AS RowNumber
            FROM    [CCCMPREPOSITORY].[dbo].[VW_Final_]
        ) data
WHERE   RowNumber = 1 
```

您只需要摆弄函数`ORDER BY`内部`ROW_NUMBER`即可满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:47:05.367

尝试：

```
SELECT [Complaint Number], MAX([Complaint_For]), MAX([Total_Complaint_Qty]), ...
FROM [CCCMPREPOSITORY].[dbo].[VW_Final_]
GROUP BY Complaint Number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:36:39.753

不要`()`用于`distinct`. 只需使用：

```
select distinct col1, col2 .. from your_table 
```

# java - 用Java（例如Android）创建字符串资源是个好主意吗？

> ID：10733855
> 
> 赞同：0
> 
> 时间：2012-05-24T08:33:35.993
> 
> 标签：java, oop

我目前正在开发一个桌面 Java 应用程序以及一个不相关的 Android 项目，我开始意识到将所有 String 资源放在一个地方是多么方便。创建一个静态 String 常量类并在整个应用程序中引用这些值而不是全部硬编码是个好主意吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T08:36:09.973

通常推荐这种方法。[您还可以使用此处](http://www.mkyong.com/java/java-properties-file-examples/)所示的属性文件。

# android - Android 没有 R.java 的扩展操作码

> ID：10733862
> 
> 赞同：0
> 
> 时间：2012-05-24T08:34:02.590
> 
> 标签：android, dex, opcode

我在编译 Android 应用程序时遇到了一个重要问题。

使用Windev Mobile，它生成java代码，编译并创建apk，但是，当apk创建时，发生错误：

命令行：`"myjavapath\java.exe" -Xmx1024m -Djava.ext.dirs=.\platform-tools\lib -jar .\platform-tools\lib\dx.jar --dex --output "path\classes.dex" "path\classes" "path\libs"`

返回错误：无法写入输出：`No expanded opcode for 0004368d R.java:11@0001: invoke-direct v0:NffffLmynamespace/R$attr;, java.lang.Object.<init>:()v`

此外，R.java 中的 R$attr 不包含任何内容：

```
public static final class attr {
} 
```

我假设有 64k 的硬限制。但：

*   R.java 文件只包含 364 行，如果这些行是字段/方法引用，我离 64k 硬限制很远。
*   当我在 Windev Mobile 项目中添加特定窗口时发生此错误。我在另一个项目中使用的窗口没有错误。

那么，你认为它来自哪里？如果您需要任何信息或文件，没问题。

提前致谢。

PS：可能我的英文不太好，抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T17:43:47.730

dex 文件格式有各种限制。看起来您遇到的方法引用不能超过 64k。此限制适用于 dex 文件中的所有类，而不仅仅是单个类。

该类发生错误的事实与该类本身无关，这只是它碰巧达到极限的地方。

目前唯一的解决方案是减少代码的大小，或者将一些类拆分成一个单独的 dex 文件，您可以动态加载。

# php - Yii 非常奇怪的 save() 行为

> ID：10733865
> 
> 赞同：1
> 
> 时间：2012-05-24T08:34:24.823
> 
> 标签：php, mysql, database, yii

我遇到了非常非常奇怪的事情。在 VirtualBox、Ubuntu、Apache2、PHP、MySQL 中工作，我从一个特定模型中得到了一些非常奇怪的行为。

我想添加输入同一字符串的多种语言版本的功能，比如产品名称。我使用 jQuery 用语言制作了漂亮的标签，并创建了临时数组来存储所有信息，使用 CActiveForm 小部件来收集和呈现数据。

```
<?php foreach($languages as $language): ?>
  <div id="tab_<?=$language->code?>">
    <div class="row">
      <?php echo $form->labelEx($model,'name'); ?>
      <?php echo $form->textField($model,"translations[$language->code][name]",array('size'=>60,'maxlength'=>128)); ?>
      <?php echo $form->error($model,"translations[$language->code][name]"); ?>
        </div>
    </div>
 [...] 
```

这就是我将数据收集到 $translations 数组中的方式。这是我的 $translations 数组：

```
$translations = array(
  'name' => 'NewName',
  'sub_name' => 'Subname'
); 
```

然后我显然将它分配给 Controler 操作中的适当模型：

```
[...]
foreach ($translations as $key => $value){
  $x = new Translations();
  $x->language = $key;
  $x->id = $product->id;
  $x->name = $value['name'];
  $x->sub_name = $value['sub_name']
  $x->save();
}
[...] 
```

现在还有其他字段，每个产品只有一个：

```
[...]
<div class="row">
  <?php echo $form->labelEx($model,'something'); ?>
  <?php echo $form->textField($model,'something',array('size'=>60,'maxlength'=>128)); ?>
  <?php echo $form->error($model,"something"); ?>
    </div>
</div> 
```

而那些只是由

```
$product->save(); 
```

一切都在一个整洁的交易中。

然而....

我得到的结果是这样的（加入翻译和产品表）：

```
id       name        subname        something
1        NewN
2        NewName     S
3        NewName     Subname        Som
4        NewName     Subname        Something 
```

4 条记录，当我只添加 ONE.... 并且我输入更多文本时，会创建更多记录。按随机数量的字符分割，有时少到 4，有时多到 12。这是可重复的，但并非总是如此......我对这种行为完全目瞪口呆。

任何人都见过这样的事情并且可以阐明它吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:44:04.443

问题可能出现在多个阶段：

*   表格
*   控制器
*   将表单中的数据绑定到模型
*   模型保存（ActiveRecord）
*   甚至是数据库

所以“分而治之”你的问题。

**MySQL**

打开“general mysql log”以查看发送到 MySQL 的查询。如果它们看起来像您在上面看到的奇怪形式，那么它不是数据库。在这个阶段你不太可能有任何问题，但最好排除它。

**活动记录**

然后将您的值硬编码到模型中。在您的控制器中，只需创建模型的一个实例并保存它。这是否复制了您遇到的问题？如果是这样，那是您的 ActiveRecord 实现存在问题。尝试删除关系并继续努力。

**控制器**

您的控制器中可能有一些奇怪的东西。同样，在创建实例时硬编码要传递给模型的数据。

**捆绑**

您如何将数据从表单绑定到模型可能存在问题。手动设置表单的值，然后像往常一样将该数据绑定到模型。

这是后端测试可以真正帮助您的地方，因为您可以将有效的与无效的隔离开来。查看 Behat 和 PHPUnit 等工具。

# javascript - 在 Highcharts 散点图中更改制造商填充颜色

> ID：10733867
> 
> 赞同：0
> 
> 时间：2012-05-24T08:34:28.927
> 
> 标签：javascript, jquery, highcharts

是否可以在加载事件中更改 Highcharts 散点图中标记的填充颜色。我已经研究过，似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:34:14.063

弄乱这些选项...

```
marker: {
    radius: 4,
    lineColor: '#d40000',
    lineWidth: 10
} 
```

# mysql - MySQL 性能

> ID：10733869
> 
> 赞同：0
> 
> 时间：2012-05-24T08:34:35.320
> 
> 标签：mysql

我正在制作一个 Web 应用程序，并且我使用 MySQL 作为我的数据库后端。我的数据库最终会更大，比如某些表中的行数超过 1 亿行。我只是想确认关于这么大桌子的一件事。

选项 1。假设这些表有 Primary Keys 并使用 Primary Key 进行查询，但我需要运行 mysql 查询，例如每个用户登录 100 个查询。

```
USERID  KEYS

1       {1,2,3,4} 
```

我将为用户获取 KEYS，然后进行主键查询以获取每个值

```
PRI.KEY  Value

1        google

2        yahoo

3        aol

4        windows 
```

例如，如果用户登录，我需要获取他的书签站点。所以我会做两个查询 Select KEYS from TB_KEYS where USERID=1; 然后我解析 KEYS 并为每个键，从 TB_VALUES 中选择值，其中 PRI.KEY=（KEY - 我获得，从第一个查询中解析）；

选项 2。我没有使用 Primary Keys 进行查询，但我需要为用户登录运行一些查询。

OPT_TABLE_2

```
USERID  KEY         Value

1       1           google

1       2           yahoo

1       3           aol

1       4           windows 
```

从 USERID =1 的 OPT_TABLE_2 中选择值；

哪个选项会更好..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:40:37.150

使用关系数据库，可能是第一个。使用适当的索引，对第二个进行过滤应该很快，但第一个应该有更小的表，这通常更好。

实际上拥有三个表可能会更好：用户、用户密钥对，然后是密钥。

但是，如果您正在运行这么多查询，您可能真的想找出原因并减少运行次数。

与任何重要的性能问题一样：对其进行基准测试。生成 10K 测试用户及其数据，看看在每种方法下运行时会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:52:32.443

> 但我需要运行 mysql 查询，比如每个用户登录 100 个查询。

那么由于这个原因，这种方法是错误的。您尚未应用[关系数据库规范化规则](http://en.wikipedia.org/wiki/Database_normalization)。

> 但我需要为用户登录运行一些查询

那么它可能仍然是错误的。您应该只需要运行一个查询即可从此结构中获取与用户相关的数据 - 或者您正在尝试获取这些建议的结构未表示的信息。

减少查询数量将对性能产生**巨大**影响。

自己测试是微不足道的。

# ruby-on-rails-3 - 查找具有（某些）多个标签的条目

> ID：10733878
> 
> 赞同：1
> 
> 时间：2012-05-24T08:34:58.583
> 
> 标签：ruby-on-rails-3, has-many

我有这个查询：

```
books = Book.includes(:tags).where(tags:{ id: [1, 2] }) 
```

结果包含标签为**1 OR 2**的所有书籍。如何更改它以仅获取具有*两个*标签（**1 和 2**）的书籍？

我的方法是：

```
books = Book.includes(:tags).where(tags:{ id: 1 }).where(tags:{ id: 2 }) 
```

这出错了，因为第二个覆盖了第一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:23:10.773

未测试

```
books = Book.includes(:tags).where("tags:{ id: ? } AND tags:{ id: ?}", 1, 2) 
```

# smooks - 如何在 servicemix 中部署 OSGI 的 smooks 包？

> ID：10733880
> 
> 赞同：0
> 
> 时间：2012-05-24T08:35:03.123
> 
> 标签：smooks

当我创建简单的 maven 项目并在 eclipse 中运行 smooks 时，它工作正常，但是当我为此创建 osgi 包并将其部署在 servicemix 中时，它显示以下错误...

我把我的smook配置文件放在servicemix_home/ConfigurationFiles/smook/......

例如：org.milyn.SmooksException：无法将处理单元 [org.milyn.javabean.ext.PropertyChecker] 应用到 [org:milyn:smooks:unknowndoc:/smooks-resource-list/jb:bean/jb:wiring]。org.milyn.SmooksException：无法将处理单元 [org.milyn.javabean.ext.PropertyChecker] 应用于 [org:milyn:smooks:unknowndoc:/smooks-resource-list/jb:bean/jb:wiring]。在 org.milyn.delivery.dom.SmooksDOMFilter.processVisitorException(SmooksDOMFilter.java:823) 在 org.milyn.delivery.dom.SmooksDOMFilter.access$700(SmooksDOMFilter.java:134) ... 引起：org.milyn.cdr .SmooksConfigurationException：Bean 类 'com.test.pojo.Order' 在类路径中不可用。在 org.milyn.javabean.ext.PropertyChecker.getBeanClass(PropertyChecker.java:97) 在 org.milyn.javabean.ext.PropertyChecker.getBeanType(PropertyChecker.java:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:30:58.813

更改类加载器获取当前类加载器`getClass().getClassLoader()`并设置

```
Thread.currentThread().setContextClassLoader(classLoader); 
```

和

```
smooks.setClassLoader(classLoader); 
```

# android - Android 中的 Canvas.rotate() 问题。它究竟是如何工作的？

> ID：10733883
> 
> 赞同：0
> 
> 时间：2012-05-24T08:35:09.100
> 
> 标签：android, graphics, canvas, 2d

请在下面找到我的 onDraw 方法的代码（。我正在尝试在绘制圆弧后将画布（//Rotate call -b）旋转 25 度。但我发现圆弧仍然是从 0 到 50 度绘制的。我原以为它会再移动 25 度。

```
public class CustomView extends View {

    public CustomView(Context context) {
        super(context);

    }

    public CustomView(Context context, AttributeSet attrs) {
        super(context, attrs);

    }
    protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);

            Paint paint = new Paint();
            paint.setColor(Color.RED);
            int px = getMeasuredWidth() / 2;
            int py = getMeasuredHeight() / 2;

            // radius - min 
            int radius = 130;

            // Defining bounds for the oval for the arc to be drawn
            int left = px - radius;
            int top = py - radius;
            int right = left + (radius * 2);
            int bottom = top + (radius * 2);

            RectF rectF = new RectF(left, top, right, bottom);
            paint.setColor(Color.RED);
            paint.setStyle(Style.FILL);

                //canvas.rotate(25,px,py);//Rotate call -a

        canvas.drawArc(rectF, 0, 50, true, paint);

            canvas.rotate(25,px,py);//Rotate call  -b

        }
} 
```

但是，如果我在绘制圆弧之前放置旋转调用（//Rotate call -a），我会看到绘制的圆弧移动了 25 度以上。这里到底发生了什么？有人可以向我解释吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T08:54:24.017

`Canvas`维护一个`Matrix`负责所有转换的。即使是轮换。正如您在[文档](http://developer.android.com/reference/android/graphics/Canvas.html#rotate%28float,%20float,%20float%29)中看到的那样，该`rotate`方法说：

`Preconcat the current matrix with the specified rotation.`

所有转换都在 上完成`Canvas` `Matrix`，因此，在 上`Canvas`。您绘制的弧线未旋转。您首先旋转`Canvas`然后在其上绘制。

因此，在您的代码中，`call -a`有效，而不是`call -b`.

编辑：对于 postrotate 和 prerotate 等问题，请检查[Matrix](http://developer.android.com/reference/android/graphics/Matrix.html)类（`postRotate`和`preRotate`方法）。

几个例子：[this](http://www.helloandroid.com/tutorials/how-use-canvas-your-android-apps-part-2)和[this](http://eleanordarephdjournal.blogspot.in/2011/03/another-good-android-example-with.html)。

还有一些你可能想读的东西：[这个](https://stackoverflow.com/questions/8712652/rotating-image-on-a-canvas-in-android)和[这个](https://stackoverflow.com/questions/3855578/android-matrix-what-is-the-different-between-preconcat-and-postconcat)。

# c# - 使用 C# 通过 attributes.add 创建多个 HTML 属性的语法

> ID：10733884
> 
> 赞同：1
> 
> 时间：2012-05-24T08:35:11.840
> 
> 标签：c#, dotnetnuke, html

这是冗长的，但对于你们中的一个知识渊博的小伙子来说应该很容易锻炼。

我有一个带有动态登录链接的 DotNetNuke 网页。如果您未登录，则链接将是“登录”，并具有登录弹出窗口的相应 URL。如果您已登录，则链接将是“注销”，并且同样具有指向处理注销的网页的适当 URL。

当页面确定您是否已登录时，将使用以下属性构建 HTML 链接：onclick="return dnnModal.show('http://blahblah.com....')。

执行此操作的代码：

```
 loginLink.Attributes.Add(" onclick", "return " + UrlUtils.PopUpUrl(loginLink.NavigateUrl, this, PortalSettings, true, false, 200, 550)); 
```

不管链接是什么，ID 和 Class 始终保持不变。我的问题是我想用图像替换登录文本，实际上是用于登录和注销的不同图像。这里的问题是，因为 ID 和 Class 保持不变，所以我不能像往常一样通过 CSS 来实现，但我已经能够根据类的属性设置类的样式。我通过找出创建 HTML 链接的输出并根据“href”属性设置类的样式来测试这一点，例如：

```
a #dnn_dnnLogin_loginLink .LoginLink [href="http://some very very long dynamically created URL.aspx"]{ styles here } 
```

问题在于登录/注销链接会根据您当前所在的页面而变化。

我确实知道这两个渲染选项中的每一个都有一个我可以设置样式的唯一属性，这就是它们的“文本”属性。所以很简单，我如何添加这个属性以在 HTML 中呈现，以便我可以使用 CSS 设置它的样式？

我尝试了几种变体，例如：

```
loginLink.Attributes.Add(" onclick", "return " + UrlUtils.PopUpUrl(loginLink.NavigateUrl, this, PortalSettings, true, false, 200, 550) " Text", + loginLink.Text); 
```

希望呈现的内容类似于：

```
onclick="return dnnModal.show('http://localhost/CPD/tabid/87/ctl/Login/Default.aspx?returnurl=%2fCPD.aspx&popUp=true',/*showReturn*/true,200,550,true,'')" Text="Login" 
```

所以我可以风格：

```
a #dnn_dnnLogin_loginLink .LoginLink [Text="Login"]{styles here}
a #dnn_dnnLogin_loginLink .LoginLink [Text="Logout"]{styles here} 
```

但相反，我得到一个通用错误。我尝试了各种方法来写这行但没有成功，我只是不知道语法。

有人能指出我正确的方向吗？我非常希望我不会叫错树，因为这将是我最初问题的一个非常简单的解决方案。

谢谢，

编辑 - 整个页面的代码是否有帮助？

```
 using System;
using System.Web;
using System.Web.UI;
using DotNetNuke.Common;
using DotNetNuke.Common.Utilities;
using DotNetNuke.Services.Exceptions;
using DotNetNuke.Services.Localization;
using DotNetNuke.UI.Modules;

namespace DotNetNuke.UI.Skins.Controls
{
public partial class Login : SkinObjectBase
{

    private const string MyFileName = "Login.ascx";

    public string Text { get; set; }

    public string CssClass { get; set; }

    public string LogoffText { get; set; }

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        try
        {
            if (!String.IsNullOrEmpty(CssClass))
            {
                loginLink.CssClass = CssClass;
            }

            if (Request.IsAuthenticated)
            {
                if (!String.IsNullOrEmpty(LogoffText))
                {
                    if (LogoffText.IndexOf("src=") != -1)
                    {
                        LogoffText = LogoffText.Replace("src=\"", "src=\"" + PortalSettings.ActiveTab.SkinPath);
                    }
                    loginLink.Text = LogoffText;
                }
                else
                {
                    loginLink.Text = Localization.GetString("Logout", Localization.GetResourceFile(this, MyFileName));
                }
                loginLink.NavigateUrl = Globals.NavigateURL(PortalSettings.ActiveTab.TabID, "Logoff");
            }
            else
            {
                if (!String.IsNullOrEmpty(Text))
                {
                    if (Text.IndexOf("src=") != -1)
                    {
                        Text = Text.Replace("src=\"", "src=\"" + PortalSettings.ActiveTab.SkinPath);
                    }
                    loginLink.Text = Text;
                }
                else
                {
                    loginLink.Text = Localization.GetString("Login", Localization.GetResourceFile(this, MyFileName));
                }

                string returnUrl = HttpContext.Current.Request.RawUrl;
                if (returnUrl.IndexOf("?returnurl=") != -1)
                {
                    returnUrl = returnUrl.Substring(0, returnUrl.IndexOf("?returnurl="));
                }
                returnUrl = HttpUtility.UrlEncode(returnUrl);

                loginLink.NavigateUrl = Globals.LoginURL(returnUrl, (Request.QueryString["override"] != null));

                if (PortalSettings.EnablePopUps && PortalSettings.LoginTabId == Null.NullInteger)
                {
                    loginLink.Attributes.Add(" onclick", "return " + UrlUtils.PopUpUrl(loginLink.NavigateUrl, this, PortalSettings, true, false, 200, 550));
                }
            }
        }
        catch (Exception exc)
        {
            Exceptions.ProcessModuleLoadException(this, exc);
        }
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:21:56.687

CSS 类就是为此目的而设计的，所有使用 CSS 样式的浏览器（甚至是非常古老的浏览器）都支持它们。您不必与引用某些可能会再次改变和破坏您的样式的链接的晦涩选择器进行斗争。

由于您说您已经为这些标签分配了一个类，因此您只想指定一个额外的类。您可以将多个类分配给一个标签。有关更多信息，请参阅[W3C css 类页面](http://www.w3schools.com/tags/att_standard_class.asp)，在“属性值”部分：

> 为元素指定一个或多个类名。要指定多个类，请用空格分隔类名，例如 . 这允许您为一个 HTML 元素组合多个 CSS 类。

您可以简单地通过将第二个类附加到[`WebControl.CssClass`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)字符串中来设置第二个类，用空格分隔：

```
loginLink.CssClass = loginLink.CssClass + " login"; 
```

或者

```
loginLink.CssClass = loginLink.CssClass + " logout"; 
```

这样，您可以通过 CSS 样式表中的单个类选择器甚至多类选择器（仅选择那些同时分配了两个类的标签）来访问它：

```
.LoginLink.login { /* styles here */ }
.LoginLink.logout { /* styles here */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:23:06.553

登录/注销按钮上的文本不存储在 Text="" 属性中，而是存储在 InnerHTML 节点中。因此，您的 CSS 选择器将不适用。（我也认为选择器中的间距是错误的，并且该解决方案不支持多语言按钮等）

通常这种类型的样式将在皮肤编辑器（Admin/Skins/向下滚动到皮肤设计器部分）中实现，您可以在其中选择皮肤或容器、文件、令牌=LOGIN、设置=文本和注销文本，并添加一个值 src =路径/到/a.gif。但是，皮肤设计器似乎在 6.1.x 中被破坏（[错误报告](http://support.dotnetnuke.com/issue/ViewIssue.aspx?ID=20038&PROJID=2)）

您仍然可以尝试查看 DNN 安装的 admin\Skins 目录中的 login.ascx 和 login.ascx.cs 文件。编辑代码以根据 Request.IsAuthenticated 分配 loginLink.ImageUrl。

# sql - PLSQL 'IN' 运算符

> ID：10733892
> 
> 赞同：2
> 
> 时间：2012-05-24T08:35:52.950
> 
> 标签：sql, oracle, plsql

我正在尝试根据以下 PLSQL 查询确定的“日期”范围来选择行，该查询当前提供了我需要的结果 - 是脚本时一周中最后 10 周的“日期”对象正在运行。例如。在 5 月 22 日运行它会产生 5 月 15 日、5 月 8 日等等。

```
SELECT SYSDATE-(level*7) as DateRange
FROM DUAL
CONNECT BY LEVEL <=10 
```

这会生成日期列表。然后我尝试将其与父选择语句结合起来，以获取上面输出的日期在“DAY”（Oracle 类型的 DATE）列中的行。

```
SELECT * FROM NEM_RM16
WHERE NEM_RM16.DAY IN (
  SELECT SYSDATE-(level*7) as DateRange
  FROM DUAL
  CONNECT BY LEVEL <=10); 
```

尽管知道有些行具有上述生成的日期，但它没有给出任何结果。

我已经读过，在使用“IN”运算符时，值必须用单引号引起来，但我不确定如何使用上面的查询来执行此操作。

我是通过使用 IN 运算符以正确的方式解决这个问题，还是应该执行不同类型的嵌套查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:43:13.450

用于`trunc`从`sysdate`

```
SELECT * FROM NEM_RM16
WHERE NEM_RM16.DAY IN (
  SELECT trunc(SYSDATE)-(level*7) as DateRange
  FROM DUAL
  CONNECT BY LEVEL <=10); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-24T09:24:44.243

可能嵌套查询返回的日期格式与NEM_RM16.DAY列的日期格式不匹配 可能，如果将日期设置为相同格式后进行比较，它们将正确匹配

像这样

```
 SELECT *
  FROM NEM_RM16
 WHERE TO_DATE(TO_CHAR(NEM_RM16.DAY, 'DD/MM/YYYY'), 'DD/MM/YYYY') IN
       (SELECT TO_DATE(TO_CHAR(SYSDATE - (level * 7), 'DD/MM/YYYY'),
                       'DD/MM/YYYY') as DateRange
          FROM DUAL
        CONNECT BY LEVEL <= 10); 
```

希望能帮助到你

# objective-c - 将带有叠加视图的图像转换为 UIImage

> ID：10733893
> 
> 赞同：0
> 
> 时间：2012-05-24T08:35:53.557
> 
> 标签：objective-c, cocoa-touch, uiimage, save, overlay

在我的应用程序中，我有一个向用户显示的图像和由 CoreGraphics 自定义绘图的覆盖视图。我想将带有叠加层的图像保存到 CameraRoll 中。那么我应该如何从现有的 UIImage 和自定义覆盖视图中创建一个新的 UIImage 呢？

我试图通过创建 CGContextRef，将 UIImage 绘制到其中，然后将覆盖视图的 CALayer 绘制到相同的上下文中来做到这一点。但是我从这个上下文中得到的 UIImage 只是白色背景上的覆盖视图。它似乎并没有保持透明度，只是用白色填充所有东西。

如何修复？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T09:12:50.763

如果我理解你的问题是正确的。你有两种观点

1.  向用户显示的图像（即 viewA）
2.  带有自定义绘图的覆盖视图（即 viewB）

如果您在 viewC 上创建另一个视图（即 viewC）addSubview viewA 和 viewB。

> [viewC addSubview:viewA]
> 
> [viewC addSubview:viewB]

现在在 viewC 上尝试**CGContextRef**

```
UIImage *outputImage = [self convertViewToImage:viewC :1]; 
```

convertViewToImage 方法：

```
+(UIImage*)convertViewToImage:(UIView*)view:(float)ratio{
UIGraphicsBeginImageContext(view.bounds.size);
//UIGraphicsBeginImageContext(view.frame.size);

[view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

CGImageRef imageRef = CGImageCreateWithImageInRect([viewImage CGImage], CGRectMake(0, 0, view.bounds.size.width*ratio, view.bounds.size.height*ratio));
UIImage *targetImage = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);

return targetImage;
} 
```

我相信它会做到的。

# javascript - 将字符串转换为 javascript 对象

> ID：10733898
> 
> 赞同：7
> 
> 时间：2012-05-24T08:36:04.307
> 
> 标签：javascript, jquery

我有以下字符串

```
":All;true:Yes;false:&nbsp" 
```

我要转换为如下对象：

```
var listItems = 
[
{itemValue: "", itemText: "All"},
{itemValue: true, itemText: "Yes"},
{itemValue: false, itemText: "&nbsp"}
]; 
```

任何优雅的方式来做到这一点都值得赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T08:39:26.510

`true/false`布尔支持：

```
var listItems = [];
var yourString = ":All;true:Yes;false:&nbsp";

var arr = yourString.split(";");
for (var i = 0; i < arr.length; i++) {
    var arr2 = arr[i].split(":");
    var value = arr2[0] || "";
    if (value == "true" || value == "false")
        value = (value === "true");
    listItems.push({
        itemValue : value,
        itemText : arr2[1] || ""
    });
}

console.log(listItems); 
```

**演示：http:** [//jsfiddle.net/MZKFU/1/](http://jsfiddle.net/MZKFU/1/)

* * *

**更新。**对于通用值解析，您可以使用`JSON.parse`带有`try/catch`块的方法，如[Esailija 的回答](https://stackoverflow.com/a/10734055/1249581)中所述。

**演示：http:** [//jsfiddle.net/MZKFU/2/](http://jsfiddle.net/MZKFU/2/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T08:46:25.317

```
var str = ":All;true:Yes;false:&nbsp";
var listItems = str.split(/[;:]/g).map( function(v, i, arr){
    var itemValue;
    if( i % 2 ) {
        return;
    }

    try {
        itemValue = JSON.parse(v);
    }
    catch(e) {
        itemValue = v;
    }

    return {
        itemValue: itemValue,
        itemText: arr[i + 1]
    };
}).filter( Boolean ); 
```

结果：

```
[
Object
itemText: "All"
itemValue: ""
__proto__: Object
, 
Object
itemText: "Yes"
itemValue: true
__proto__: Object
, 
Object
itemText: "&nbsp"
itemValue: false
__proto__: Object
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T08:48:51.410

```
var string = ":All;true:Yes;false:&nbsp";
var array = string.split(/:|;/);

var listItems = [];

for (var i = 0; i < array.length; i += 2 ) {
    listItems.push({itemValue: array[i], itemText: array[i + 1]})
} 
```

请注意，这会将“false”和“true”设置为字符串。如果你有数字，也一样。如果要使用正确的类型保存它们，则必须添加手动转换。就像是：

```
function value(val) {
    if (!isNaN(val))
        return +val;

    if (val === "true")
        return true;

    if (val === "false")
        return false;

    return val;
} 
```

因此，将对象推送到数组的行将更改如下：

```
 listItems.push({itemValue: value(array[i]), itemText: array[i + 1]}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T09:44:38.697

```
var myString = ":All;true:Yes;false:&nbsp"; 
var myArray = myString.split(';');
var literal = [];
for(var i = 0; i<myArray.length; i++){
  var mixed_string = myArray[i];
  var changed_array = mixed_string.split(":");
  var key = changed_array[0];
  var value = changed_array[1];
  literal.push({key:value});
}
console.log(literal); 
```

​</p>

# google-fusion-tables - 将 Google Fusion Tables 标记与 Google 地方信息结合使用

> ID：10733900
> 
> 赞同：-1
> 
> 时间：2012-05-24T08:36:07.660
> 
> 标签：google-fusion-tables

我正在寻找一种将 Google Fusion Table Data 与 Google Places 合并的方法。本质上，如果我想找出特定位置周围的兴趣点（来自 Google Fusion Table），有没有办法做到这一点？

我认为这与两个 API（Google Fusion API 和 Google Places API）的半径有关，但我不确定这是否可能。

有人可以帮我弄这个吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:43:59.040

当用户单击其中一个 Fusion Tables 标记时，您可以通过向图层添加单击侦听器来捕获标记的纬度/经度坐标：

[https://developers.google.com/maps/documentation/javascript/reference#FusionTablesMouseEvent](https://developers.google.com/maps/documentation/javascript/reference#FusionTablesMouseEvent)

然后，您可以使用 lat/lon 对象发出 Places API 搜索：

[https://developers.google.com/maps/documentation/javascript/places#place_searches](https://developers.google.com/maps/documentation/javascript/places#place_searches)

# python - PyAudio 输入溢出

> ID：10733903
> 
> 赞同：37
> 
> 时间：2012-05-24T08:36:11.903
> 
> 标签：python, audio, pyaudio

我正在尝试在 python 中制作实时绘图声音。我需要从我的麦克风中获取块。

使用 PyAudio，尝试使用

```
import pyaudio
import wave
import sys

chunk = 1024
FORMAT = pyaudio.paInt16
CHANNELS = 1
RATE = 44100
RECORD_SECONDS = 5
WAVE_OUTPUT_FILENAME = "output.wav"

p = pyaudio.PyAudio()

stream = p.open(format = FORMAT,
                channels = CHANNELS,
                rate = RATE,
                input = True,
                frames_per_buffer = chunk)

print "* recording"
all = []
for i in range(0, RATE / chunk * RECORD_SECONDS):
    data = stream.read(chunk)
    all.append(data)
print "* done recording"

stream.close()
p.terminate() 
```

之后，我收到以下错误：

```
* recording
Traceback (most recent call last):
  File "gg.py", line 23, in <module>
    data = stream.read(chunk)
  File "/usr/lib64/python2.7/site-packages/pyaudio.py", line 564, in read
    return pa.read_stream(self._stream, num_frames)
IOError: [Errno Input overflowed] -9981 
```

我无法理解这个缓冲区。我想使用阻塞 IO 模式，所以如果块不可用，我想等待这些块。但是当我创建除段或睡眠（0.1）之外的尝试时，我听到咔嗒声，所以这不是我想要的。

请为我的问题提出最佳解决方案？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-02-16T20:38:55.417

`pyaudio.Stream.read()`有一个关键字参数`exception_on_overflow`，将其设置为 False。

对于您的示例代码，如下所示：

```
import pyaudio
import wave
import sys

chunk = 1024
FORMAT = pyaudio.paInt16
CHANNELS = 1
RATE = 44100
RECORD_SECONDS = 5
WAVE_OUTPUT_FILENAME = "output.wav"

p = pyaudio.PyAudio()

stream = p.open(format = FORMAT,
                channels = CHANNELS,
                rate = RATE,
                input = True,
                frames_per_buffer = chunk)

print "* recording"
all = []
for i in range(0, RATE / chunk * RECORD_SECONDS):
    data = stream.read(chunk, exception_on_overflow = False)
    all.append(data)
print "* done recording"

stream.close()
p.terminate() 
```

有关更多详细信息，请参阅[PyAudio 文档](https://people.csail.mit.edu/hubert/pyaudio/docs/#pyaudio.Stream.read)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-02-18T01:41:31.557

好像很多人都遇到过这个问题。我对其进行了一些研究，我认为这意味着在上一次调用`stream.read()`和当前调用之间，流中的数据丢失了（即缓冲区填满的速度比你清除它的速度快）。

来自（最终调用`Pa_ReadStream()`的 PortAudio 函数）的文档：`stream.read()`

```
@return On success PaNoError will be returned, or PaInputOverflowed if
input data was discarded by PortAudio after the previous call and
before this call. 
```

（`PaInputOverflowed`然后导致`IOError`pyaudio 包装器中的一个）。

如果您可以不捕获每一帧，那么您可以忽略此错误。如果拥有每一帧对您来说绝对至关重要，那么您需要找到一种方法来提高应用程序的优先级。我对 Python 不够熟悉，不知道用 Python 的方式来做这件事，但值得尝试一个简单的`nice`命令，或者将调度策略更改为 SCHED_DEADLINE。

编辑：

现在的一个问题是，当抛出 IOError 时，您会丢失该调用中收集的所有帧。要忽略溢出并只返回我们拥有的内容，您可以应用下面的补丁，这将导致 stream.read() 忽略来自 PortAudio 的输出欠载和输入溢出错误（但如果发生不同的错误仍然会抛出一些东西）。更好的方法是根据您的需要使这种行为（投掷/不投掷）可定制。

```
diff --git a/src/_portaudiomodule.c b/src/_portaudiomodule.c
index a8f053d..0878e74 100644
--- a/src/_portaudiomodule.c
+++ b/src/_portaudiomodule.c
@@ -2484,15 +2484,15 @@ pa_read_stream(PyObject *self, PyObject *args)
     } else {
       /* clean up */
       _cleanup_Stream_object(streamObject);
+
+      /* free the string buffer */
+      Py_XDECREF(rv);
+
+      PyErr_SetObject(PyExc_IOError,
+                       Py_BuildValue("(s,i)",
+                                     Pa_GetErrorText(err), err));
+      return NULL;
     }
-
-    /* free the string buffer */
-    Py_XDECREF(rv);
-
-    PyErr_SetObject(PyExc_IOError,
-                   Py_BuildValue("(s,i)",
-                                 Pa_GetErrorText(err), err));
-    return NULL;
   }

   return rv; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-08T05:10:12.750

当我运行你的代码时，我得到了同样的错误。我查看了我的默认音频设备的默认采样率，我的 macbook 的内置麦克风，它是 48000Hz 而不是 44100Hz。

```
p.get_device_info_by_index(0)['defaultSampleRate']
Out[12]: 48000.0 
```

当我将 RATE 更改为此值时，它起作用了。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-10-02T05:59:20.647

我在 OS X 10.10 上工作，尝试从 SYBA USB 卡（C 媒体芯片组）中的麦克风获取音频时遇到相同的错误，并使用 fft 等实时处理它：

```
IOError: [Errno Input overflowed] -9981 
```

当使用回调模式而不是阻塞模式时，溢出完全解决了，如 libbkmz 所写。（[https://www.python.org/dev/peps/pep-0263/](https://www.python.org/dev/peps/pep-0263/)）

基于此，工作代码的一部分如下所示：

```
"""
Creating the audio stream from our mic
"""
rate=48000
self.chunk=2**12
width = 2

p = pyaudio.PyAudio()

# callback function to stream audio, another thread.
def callback(in_data,frame_count, time_info, status):
    self.audio = numpy.fromstring(in_data,dtype=numpy.int16)
    return (self.audio, pyaudio.paContinue)

#create a pyaudio object
self.inStream = p.open(format = p.get_format_from_width(width, unsigned=False),
                       channels=1,
                       rate=rate,
                       input=True,
                       frames_per_buffer=self.chunk,
                       stream_callback = callback)

"""
Setting up the array that will handle the timeseries of audio data from our input
"""
self.audio = numpy.empty((self.buffersize),dtype="int16")

    self.inStream.start_stream()

while True:
  try:
    self.ANY_FUNCTION() #any function to run parallel to the audio thread, running forever, until ctrl+C is pressed. 

  except KeyboardInterrupt:

    self.inStream.stop_stream()
    self.inStream.close()
    p.terminate()
    print("* Killed Process")
    quit() 
```

此代码将创建一个回调函数，然后创建一个流对象，启动它，然后在任何函数中循环。一个单独的线程流式传输音频，并且当主循环停止时该流关闭。self.audio 用于任何功能。如果没有终止，我也遇到了线程永远运行的问题。

由于 Pyaudio 在单独的线程中运行此流，这使音频流稳定，因此阻塞模式可能已经饱和，具体取决于脚本中其余进程的速度或时间。

请注意，块大小为 2^12，但较小的块也可以。我考虑并使用了其他参数以确保它们都有意义：

*   块大小更大或更小（无影响）
*   缓冲区中字的位数和格式，在本例中为有符号 16 位。
*   变量的符号性（尝试使用无符号并获得饱和模式）
*   麦克风输入的性质，系统默认选择，增益等。

希望对某人有用！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-01-14T18:13:38.117

我的[另一个答案](https://stackoverflow.com/a/34789354/5664271)在大多数情况下解决了这个问题。但是，有时错误仍然会发生。

这就是我放弃 pyaudio 并改用 pyalsaaudio 的原因。我的 Raspy 现在可以流畅地录制任何声音。

```
import alsaaudio   
import numpy as np
import array

# constants
CHANNELS    = 1
INFORMAT    = alsaaudio.PCM_FORMAT_FLOAT_LE
RATE        = 44100
FRAMESIZE   = 1024

# set up audio input
recorder=alsaaudio.PCM(type=alsaaudio.PCM_CAPTURE)
recorder.setchannels(CHANNELS)
recorder.setrate(RATE)
recorder.setformat(INFORMAT)
recorder.setperiodsize(FRAMESIZE)

buffer = array.array('f')
while <some condition>:
    buffer.fromstring(recorder.read()[1])

data = np.array(buffer, dtype='f') 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-15T15:48:02.580

```
FORMAT = pyaudio.paInt16 
```

确保设置正确的格式，我的内置麦克风设置为 24 位（请参阅 Audio-Midi-Setup 应用程序）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-14T12:13:51.913

我在非常慢的树莓派上遇到了同样的问题，但我能够（*在大多数情况下*）通过使用更快的`array`模块来存储数据来解决它。

```
import array
import pyaudio 

FORMAT = pyaudio.paInt16
CHANNELS = 1
INPUT_CHANNEL=2
RATE = 48000
CHUNK = 512

p = pyaudio.PyAudio()
stream = p.open(format=FORMAT,
                channels=CHANNELS,
                rate=RATE,
                input=INPUT_CHANNEL,
                frames_per_buffer =CHUNK)

print("* recording")

try:
    data = array.array('h')
    for i in range(0, int(RATE / CHUNK * RECORD_SECONDS)):
        data.fromstring(stream.read(CHUNK))
finally:
    stream.stop_stream()
    stream.close()
    p.terminate()

print("* done recording") 
```

之后的内容`data`是相当二进制的。但是您可以使用它`numpy.array(data, dtype='i')`来获取一个 numpy 整数数组。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-17T10:38:21.270

对我来说，这有帮助：[https ://stackoverflow.com/a/46787874/5047984](https://stackoverflow.com/a/46787874/5047984)

我使用多处理来并行写入文件以录制音频。这是我的代码：

**记录AudioSamples.py**

```
import pyaudio
import wave
import datetime
import signal
import ftplib
import sys
import os

# configuration for assos_listen
import config

# run the audio capture and send sound sample processes
# in parallel
from multiprocessing import Process

# CONFIG
CHUNK = config.chunkSize
FORMAT = pyaudio.paInt16
CHANNELS = 1
RATE = config.samplingRate
RECORD_SECONDS = config.sampleLength

# HELPER FUNCTIONS

# write to ftp
def uploadFile(filename):

    print("start uploading file: " + filename)
    # connect to container
    ftp = ftplib.FTP(config.ftp_server_ip, config.username, config.password)

    # write file
    ftp.storbinary('STOR '+filename, open(filename, 'rb'))
    # close connection
    ftp.quit()
    print("finished uploading: " +filename)

# write to sd-card
def storeFile(filename,frames):

    print("start writing file: " + filename)
    wf = wave.open(filename, 'wb')
    wf.setnchannels(CHANNELS)
    wf.setsampwidth(p.get_sample_size(FORMAT))
    wf.setframerate(RATE)
    wf.writeframes(b''.join(frames))
    wf.close()
    print(filename + " written")

# abort the sampling process
def signal_handler(signal, frame):
    print('You pressed Ctrl+C!')

    # close stream and pyAudio
    stream.stop_stream()
    stream.close()
    p.terminate()

    sys.exit(0)

# MAIN FUNCTION
def recordAudio(p, stream):

    sampleNumber = 0
    while (True):
        print("*  recording")
        sampleNumber = sampleNumber +1

        frames = []
        startDateTimeStr = datetime.datetime.now().strftime("%Y_%m_%d_%I_%M_%S_%f")
        for i in range(0, int(RATE / CHUNK * RECORD_SECONDS)):
            data = stream.read(CHUNK)
            frames.append(data)

        fileName =  str(config.sensorID) + "_" + startDateTimeStr + ".wav"

        # create a store process to write the file in parallel
        storeProcess = Process(target=storeFile, args=(fileName,frames))
        storeProcess.start()

        if (config.upload == True):
            # since waiting for the upload to finish will take some time
            # and we do not want to have gaps in our sample
            # we start the upload process in parallel
            print("start uploading...")
            uploadProcess = Process(target=uploadFile, args=(fileName,))
            uploadProcess.start()

# ENTRYPOINT FROM CONSOLE
if __name__ == '__main__':

    p = pyaudio.PyAudio()
    stream = p.open(format=FORMAT,
                    channels=CHANNELS,
                    rate=RATE,
                    input=True,
                    frames_per_buffer=CHUNK)

    # directory to write and read files from
    os.chdir(config.storagePath)

    # abort by pressing C
    signal.signal(signal.SIGINT, signal_handler)
    print('\n\n--------------------------\npress Ctrl+C to stop the recording')

    # start recording
    recordAudio(p, stream) 
```

**配置文件**

```
### configuration file for assos_listen
# upload
upload = False

# config for this sensor
sensorID = "al_01"

# sampling rate & chunk size
chunkSize = 8192
samplingRate = 44100 # 44100 needed for Aves sampling
# choices=[4000, 8000, 16000, 32000, 44100] :: default 16000

# sample length in seconds
sampleLength = 10

# configuration for assos_store container
ftp_server_ip = "192.168.0.157"
username = "sensor"
password = "sensor"

# storage on assos_listen device
storagePath = "/home/pi/assos_listen_pi/storage/" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-21T12:34:26.950

这对我很有帮助：

```
input_ = stream.read(chunk, exception_on_overflow=False)
exception_on_overflow = False 
```

# cocoa - 如何使组标题与 NSOutlineView 中的表条目不同

> ID：10733908
> 
> 赞同：0
> 
> 时间：2012-05-24T08:36:21.437
> 
> 标签：cocoa, nsoutlineview

有没有办法为组*中*的第一列使用不同的列？默认情况下，它使用与“组标题”相同的名称（带有“展开”三角形的那个）。例如，我想将“Group”行绑定到departmentTitle，并且组中项目的第一列应该有employeeTitle。

像这样：

```
-> departmentTitle
-->employeeTitle
-->employeeTitle
-->employeeTitle
-->employeeTitle 
```

默认情况下，它们使用相同的列，如下所示：

```
-> departmentTitle
-->departmentTitle
-->departmentTitle
-->departmentTitle
-->departmentTitle 
```

我怎样才能改变他们使用同一列？我可以将其设置为“标题”并创建一个`return self.employeeTitle`方法，但随后我必须使该 KVO 兼容并用变通方法弄乱我的模型。我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:44:37.637

我可能会迟到回答这个问题，但这就是我所做的（这不是最优雅的方式，我敢肯定）

您可以拥有一个名为“title”的属性并将列绑定到它。此外，定义一个属性“departmentTitle”和“employeeTitle”，您将根据对象是组对象还是子对象来初始化它们。然后根据您的需要定义“title”属性的 getter 以返回“departmentTitle”或“employeeTitle”。它看起来像这样：

```
- (NSString) title {
if (isLeaf) {
return self.employeeTitle;
}
else {
return self.departmentTitle;
}
} 
```

正如我所说，这不是一个优雅的解决方案，但它对我来说就像一个魅力。

# c - 如何从 Check Point 设备中提取 Check Point 日志

> ID：10733913
> 
> 赞同：0
> 
> 时间：2012-05-24T08:36:36.723
> 
> 标签：c, client, checkpoint

我需要做的是，

我需要从**Check Point 设备**中**提取****Check Point 日志**。

 **我已经读到，为了实现这一点，我们有以下事情，

**OPSEC LEA**（日志导出 API）提供从基于**OPSEC SDK**的 Check Point 设备提取日志的能力。OPSEC LEA 侦听将包含您的日志的设备（ **OPSEC LEA 服务器**）上的端口 tcp/18184 。然后，您的 OPSEC LEA 客户端将连接到 18184 并提取日志。

因此，为了运行 LEA 服务器，我在 VirtualBox 上安装了**Check Point R75.20**。**我不知道如何**在 Check Point R75.20 平台上运行 OPSEC LEA 服务器。我也阅读了 R75.20 的文档，但无法获得有关运行服务器的提示。

现在，在我运行 lea-server 之后，**它不是我将用来编写 OPSEC LEA CLient 的 OPSEC SDK**吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:53:19.600

是的，您想要在[此处找到 Opsec SDK](http://www.opsec.com/cp_products/90.htm#sdk)。

您还可以使用[fw1-loggrabber](http://sourceforge.net/projects/fw1-loggrabber/)，这可能更容易。**

# java - 使用 Jackson 配置 Spring MVC 和 JSON

> ID：10733916
> 
> 赞同：1
> 
> 时间：2012-05-24T08:36:52.950
> 
> 标签：java, spring, spring-mvc, jackson

我正在将 Spring MVC 与 Jackson 一起使用。它需要`<mvc:annotation-driven />`. 它适用于它，但它带来了其他问题。例如，添加后`<mvc:annotation-driven />`，Locale Change 拦截器不起作用：

```
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
    <property name="interceptors">
        <list>
            <ref bean="localeChangeInterceptor" />
        </list>
    </property>
</bean> 
```

除了杰克逊，我不需要它，没有它可以使用`<mvc:annotation-driven />`吗？如果是这样，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:42:28.810

尝试使用 mvc 命名空间来声明你的拦截器

```
<mvc:interceptors>
    <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor" />
</mvc:interceptors> 
```

# android - 谷歌图表在android webview中不起作用

> ID：10733917
> 
> 赞同：0
> 
> 时间：2012-05-24T08:36:56.867
> 
> 标签：android, webview, google-visualization

我在安卓上使用谷歌图表。我能够在基于桌面的 Web 浏览器上获得所需的输出，但是当我使用 android webview 执行相同的操作时并没有显示任何内容。这是我的 html 和 android webview 代码，我错过了什么吗？

```
WebView webview = (WebView) this.findViewById(R.id.webView1);

        WebSettings webSettings = webview.getSettings();

        webSettings.setJavaScriptEnabled(true);

        webSettings.setBuiltInZoomControls(true);

        webview.requestFocusFromTouch();

        webview.setWebViewClient(new WebViewClient());

        webview.setWebChromeClient(new WebChromeClient());

        // Load the URL

        webview.loadUrl("file:///android_asset/www/rG.html");

?///////////////////////////////////////////////////////////////////
for html

<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work',     11],
          ['Eat',      2],
          ['Commute',  2],
          ['Watch TV', 2],
          ['Sleep',    7]
        ]);

        var options = {
          title: 'My Daily Activities'
        };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:28:48.680

您应该从本地加载 css 和 javascript。IE`"<html><head><link type=\"text/css\" rel=\"stylesheet\" href=\"file:///android_asset/styles.css\"><script type=\"text/javascript\" src=\"file:///android_asset/script.js\"></script></head><body>";`

# python - 超时后在Python中杀死子进程

> ID：10733919
> 
> 赞同：2
> 
> 时间：2012-05-24T08:37:04.560
> 
> 标签：python, multithreading, subprocess

我在互联网上搜索并学习了其他实现它的方法，现在我发现了这个问题。如果我在 subprocess.Popen 中写入 stdout=subprocess.PIPE，我的执行时间总是会超过超时时间。如果我要删除它，那么它需要正常的执行时间

```
import subprocess, datetime, os, time, signal
//setting time for timeout
timeout=3
start = datetime.datetime.now()
process = subprocess.Popen(["python", "/home/bourne/untitled.py"],shell=False, stdout=subprocess.PIPE,stderr=subprocess.PIPE)
while process.poll() is None:
        time.sleep(0.1)
        now = datetime.datetime.now()
        if (now - start).seconds > timeout:
            os.kill(process.pid, signal.SIGKILL)
            os.waitpid(-1, os.WNOHANG)
            print "error"       
            print (now - start).seconds
            break
        print (now - start).seconds 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T09:01:20.697

您不应该仅仅因为它在 5 秒内超时而产生一个新线程，然后将它的`isAlive`状态用作忙等待的中断条件。你不需要额外的线程，你可以在第一个线程中弄乱时间。

与其尽可能频繁地轮询线程，不如使用延迟 ( `time.sleep`) 来让处理器做一些实际的工作。

而且您应该知道，如果您的进程正在生成大量输出，如果您在进程执行时不读取它，它将阻塞并让它填满管道的缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T09:14:02.563

线程可以在 python VM 中处理，但不能处理。所以你必须使用 OS api 来杀死你的进程/子进程，例如（在 linux 中）：

```
os.system("kill -9 %s"%(proc.pid)) 
```

而且，使用线程进行计时是一个坏主意。怎么样：

```
start_t = time.time()
TIME_END, TIME_SLEEP = 5, 1
while time.time() - start_t < TIME_END:
    if proc.poll():
        break
    time.sleep(TIME_SLEEP) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T06:43:20.583

```
I have successfully solved the problem. the solution is 

import subprocess, signal, os, threading, errno
from contextlib import contextmanager

class TimeoutThread(object):
    def __init__(self, seconds):
        self.seconds = seconds
        self.cond = threading.Condition()
        self.cancelled = False
        self.thread = threading.Thread(target=self._wait)

    def run(self):
        """Begin the timeout."""
        self.thread.start()

    def _wait(self):
        with self.cond:
            self.cond.wait(self.seconds)

            if not self.cancelled:
                self.timed_out()

    def cancel(self):
        """Cancel the timeout, if it hasn't yet occured."""
        with self.cond:
            self.cancelled = True
            self.cond.notify()
        self.thread.join()

    def timed_out(self):
        """The timeout has expired."""
        raise NotImplementedError

class KillProcessThread(TimeoutThread):
    def __init__(self, seconds, pid):
        super(KillProcessThread, self).__init__(seconds)
        self.pid = pid

    def timed_out(self):
        try:
            os.kill(self.pid, signal.SIGKILL) // this is for linux you need to change it for windows
        except OSError,e:
            # If the process is already gone, ignore the error.
            if e.errno not in (errno.EPERM, errno. ESRCH):
                raise e

@contextmanager
def processTimeout(seconds, pid):
    timeout = KillProcessThread(seconds, pid)
    timeout.run()
    try:
        yield
    finally:
        timeout.cancel()

def example(cmd):
    proc = subprocess.Popen(cmd, stderr=subprocess.PIPE, stdout=subprocess.PIPE)
    //setting the timeout to be 1 sec
    with processTimeout(1, proc.pid):
        stdout,stderr=proc.communicate()       

    resultcode = proc.wait()
    if resultcode &lt; 0:
        #print "error: %i" % resultcode
        return resultcode,0
    else:
        return stdout,stderr

//This is used to create new subprocess and it will return output as well as error
output,err=example(["python",filepath,"5"]) 
```

# javascript - 使用触摸 api 的 Windows 8 单页导航

> ID：10733920
> 
> 赞同：0
> 
> 时间：2012-05-24T08:37:15.977
> 
> 标签：javascript, touch, windows-8

我希望有人能给我们一个关于如何在 Windows 8 javascript 的单页导航中应用触摸功能的指南。

我在搜索引擎上花了几个小时，但我看到的都是基于 javascript 的游戏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:27:17.057

在“Windows 8 Dev Camp in a Box”中有一个令人难以置信的 JavaScript 触控动手实验室。

[http://www.microsoft.com/en-us/download/details.aspx?id=29854](http://www.microsoft.com/en-us/download/details.aspx?id=29854)

如果没有关于您要完成的工作的更多解释，我不确定我是否可以提供更多帮助，但请查看这些实验室。触摸输入是最后一部分。你不会后悔的。

# jquery - 循环创建更多项目？

> ID：10733921
> 
> 赞同：0
> 
> 时间：2012-05-24T08:37:18.640
> 
> 标签：jquery, animation

我有一个名为“Predatorlist”的数组存储

```
 <div id="Predator1"><img src='jef-frog.gif' width='50'></div> 
```

我声明了一个 var 来存储“Predator”并附加了 ID。

```
var speciesType = 'Predator' + document.getElementById('amount').value; 
```

我有一个输入按钮::

```
 <INPUT type="button" value="Play" onClick="javascript:runItem('Predator') ;"> 
```

我可以知道我应该为以下功能传递什么项目来捕获和生成输入按钮中需要的内容。“Javascript:runItem('Predator');?

```
function runItem(Predatorlist) {
     var item1 = $("#"+speciesType),cycle1;
     /* Set a the starting position to be random by editing the css */
     $(item1).css("left", startItem1X+"px");
     $(item1).css("top", startItem1Y+"px");

     //$("<img src='jef-frog.gif' width='50'>").appendTo("div#Predator");

     /* Cycle1 and Cycle2 variables allow infinite loop */ 
     (cycle1 = function() {
      var m = randomRange(50,100);
      var n = randomRange(75,150);
      item1.animate({left:'+='+n},2000);
      item1.animate({left:'+='+m, top:'+='+m}, 2000)
      item1.animate({left:'-='+m, top:'+='+m}, 2000)
      item1.animate({left:'-='+n},2000);
      item1.animate({top:'-='+n},2000,cycle1)
          })();

         alert(speciesType);
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:50:57.723

可能是这样的？

PredatorAnimation.js

```
$(document).ready(function() {
    initPredatorList();
}

function initPredatorList() {

    var predatorList = $('.predator');
    $.each(predatorList, function(i, predator) {
        initPredator(predator);
    });

}

function initPredator(predator) {

    predator.css("left", RandomX+"px");
    predator.css("top", RandomY+"px");
    animatePredator(true, predator);

}

function animatePredator(run, predator) {

    while(run) {
        var m = randomRange(50,100);
        var n = randomRange(75,150);
        predator.animate({left:'+='+n},2000);
        predator.animate({left:'+='+m, top:'+='+m}, 2000)
        predator.animate({left:'-='+m, top:'+='+m}, 2000)
        predator.animate({left:'-='+n},2000);
        predator.animate({top:'-='+n},2000,cycle1)
    }

} 
```

然后在你的html文件中使用。

希望它有所帮助:) 我可能会补充说，你必须使用 jquery 来使用这种语法，不完全确定这是否是你正在寻找的......

看看上面的答案，imo这是一个更清晰的答案。

```
$.each(predatorList, function(i, item) {
    $('#container').append(createAndReturnPredatorDiv('predator' + i));
});

function createAndReturnPredatorDiv(predatorId) {
    var predator = $('<div></div>');
    predator.attr('id', predatorId);
    predator.attr('src', 'img/predator.jpg');
    return predator;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:59:12.460

```
var item1 = $("#"+speciesType)
$(item1). //something... 
```

这看起来不对，你应该只给一个 jQuery 对象中的字符串，它使代码比在那里传递 enire 对象更具可读性。所以，上面的行应该变成

```
var item1 = "#"+speciesType
$(item1). //something... 
```

或者

```
var item1 = $("#"+speciesType)
item1\. //something... 
```

* * *

接下来，我将使用`setInterval`for 动画循环，因为您无法像现在这样停止它，并且它使代码更清晰。

* * *

最后，对于你的掠夺者：你需要像下面这样的东西，将代码附加到`body`文档的后面吗？

```
for(var i in predatorList) {
  $('body').append('<div id="'+predatorList[i]+'"><img src="img/pred.png"></div>');
} 
```

更多问题，请评论，我发现这个问题很难理解，所以我的回答可能不是你的意思。

* * *

**编辑2：**

查看代码（工作）：http: [//jsfiddle.net/sREEw/3/](http://jsfiddle.net/sREEw/3/)

*我在做什么？*

在添加捕食者时：

*   将 div 添加到正文
*   给 div 一个当前掠食者数量的 id
*   设置一个动画循环，但如果它已经在运行，则首先取消第一个。在循环中，我们更新每一个捕食者
*   增加`num`，所以下一个捕食者会有一个新的 ID

在移除捕食者时：

*   减少`num`1 以便于计算
*   将捕食者从身体中移除
*   如果需要，停止间隔

如您所见，我在变量中保存的只是当前捕食者的数量和间隔 ID，因此我可以在需要时停止循环。

# jquery - 如何在下拉菜单中显示 TreeView

> ID：10733926
> 
> 赞同：6
> 
> 时间：2012-05-24T08:37:30.020
> 
> 标签：jquery, ajax, cakephp, drop-down-menu

我正在尝试在 cakephp 1.3 中构建应用程序。我的视图中有一个树视图菜单。我为此使用了 jquery dynatree。这棵树使用 ajax 工作。我将数据从控制器发送到 json 格式的视图。

现在我的要求是我想在下拉列表中显示这个树视图。如果有任何机构可以向我推荐任何 jquery api 或任何其他好的解决方案。

要更清楚，请访问此链接 [jQuery TreeView Menu (v1.4)](http://www.dynamicdrive.com/dynamicindex1/treeview/index.htm.)

我想在我的下拉菜单中演示三。

等待您的专家建议。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T06:22:26.720

这将很有帮助[Basic ComboTree](http://www.jeasyui.com/demo/main/index.php?plugin=ComboTree&theme=default&dir=ltr&pitem=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T15:25:15.110

查看[mcDropdown jQuery 插件 v1.3.2](http://www.givainc.com/labs/mcdropdown_jquery_plugin.htm)

# android - 分辨率越高屏幕越小

> ID：10733927
> 
> 赞同：-1
> 
> 时间：2012-05-24T08:37:31.190
> 
> 标签：android, android-layout, screen

我有一个奇怪的屏幕问题。当我从手机加载项目时，它看起来很小，当我单击一个按钮时，它变得越来越小。该项目在 3.7 英寸屏幕上运行良好。3.7 及更高版本如下所示：

屏幕1：![在此处输入图像描述](../Images/f18621938ae5219646f56a5bae82d12b.png)

屏幕2：![在此处输入图像描述](../Images/0d82afd5412b7d95800162af231881c4.png)

屏幕 3：![在此处输入图像描述](../Images/5737b9d0740c65fe2716e2aec85241ec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:40:17.320

把它放在标签下的 mainfest.xml 文件中：

```
<supports-screens android:anyDensity="true" /> 
```

您的活动周围的黑色空间可能会显示密度问题，但不知道为什么屏幕会随着活动的变化而变小，但试试这个可能会对您有所帮助。

# iphone - 选定的文本/字符串未触发

> ID：10733931
> 
> 赞同：0
> 
> 时间：2012-05-24T08:38:16.573
> 
> 标签：iphone, ios, string, menuitem

用于`UIMenuController`显示维基百科、字典和突出显示文本。我做了以下，

```
- (void)viewDidLoad
{
  UILongPressGestureRecognizer *longPressGestureRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress)];
longPressGestureRecognizer.minimumPressDuration =0.4;
longPressGestureRecognizer.delegate=self;
[webView addGestureRecognizer:longPressGestureRecognizer];
[longPressGestureRecognizer release];
}

- (void)handleLongPress//:(id)sender 
{
//location = [recognizer locationInView:self.view];
//  
//  NSLog(@"location :%d",location);

UIMenuController *menuController = [UIMenuController sharedMenuController];

[self becomeFirstResponder];

UIMenuItem *item = [[[UIMenuItem alloc] initWithTitle: @"Wikipedia"
                                               action: @selector(wiki:)] autorelease];
UIMenuItem *item1 = [[[UIMenuItem alloc] initWithTitle: @"Dictionary"
                                                action: @selector(dict:)] autorelease];
UIMenuItem *item2 = [[[UIMenuItem alloc] initWithTitle: @"Highlight"
                                                action: @selector(highlighting:)] autorelease];

[menuController setTargetRect:CGRectMake(100, 100, 320, 100) inView:webView];
[menuController setMenuVisible:YES animated:YES];
[menuController setMenuItems: [NSArray arrayWithObjects: item,item1,item2,nil]];
}

-(BOOL)canBecomeFirstResponder
{
return YES;

}

- (BOOL) canPerformAction:(SEL)action withSender:(id)sender
{
   if (action == @selector( wiki:))
   {
    return YES; // logic here for context menu show/hide
   }

   if (action == @selector( dict:))
   {
    return YES;  // logic here for context menu show/hide
   }

  if (action == @selector(highlighting:))
  {
    // turn off copy: if you like:
    return YES;
  }
  return [super canPerformAction: action withSender: sender];
}

- (void)wiki: (id) sender
{ 
NSString *shareUrlString = [NSString stringWithFormat:@"http://en.wikipedia.org/wiki/%@",[self selectedText]];

NSLog(@"selectedText Wiki: %@",[self selectedText]);

//Create the URL string which will tell Facebook you want to share that specific page 

NSURL *url = [ [ NSURL alloc ] initWithString:shareUrlString ];
//Create the URL object 

[[UIApplication sharedApplication] openURL:url];
//Launch Safari with the URL you created
[url release];

}
- (NSString *)selectedText 
 {

  return [webView stringByEvaluatingJavaScriptFromString:@"window.getSelection().toString()"];

} 
```

我能够获得维基百科网站，但不能使用选定的文本/单词。上面的代码有什么问题？提前致谢。

# c - 从二维数组中的字符串中删除最后一个字符

> ID：10733933
> 
> 赞同：2
> 
> 时间：2012-05-24T08:38:30.487
> 
> 标签：c

如何从此数组中的每个字符串中删除 '\n'？

我知道我可以为一个简单的 C-String 做这样的事情，但在这种情况下我没有使用它

```
cmd[strcspn(cmd, "\n")] = '\0'; 
```

我也不确定这是否是正确的方式。

字符串不会在中间包含任何空格或 \n。它们也具有静态长度 (6)。

```
#include <stdlib.h>

unsigned char cmd[][6] = { 
    {"r123\n"},
    {"r999\n"},
    {"l092\n"},
    {"l420\n"}};

void main(void) {
    int i;

    for(i = 0; i < (sizeof(cmd) / sizeof(cmd[0])); i++) {
        printf("%s\n", cmd[i]);
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:50:03.920

只需手动操作，很简单！

如果保证它只是每个单词中的最后一个字符，并且保证在那里，那么就像这样：

```
for (i = 0; i < elem_number; ++i){
    cmd[i][strlen(cmd[i])-1] = 0;
} 
```

另一方面，如果您不确定最后会有多少个空白字符，但您知道它们只会在最后出现（在这种情况下可能是 0！）比这：

```
for (i = 0; i < elem_number; ++i){
    for (j = 0; cmd[i][j] != 0; ++j){
        if (isspace(cmd[i][j]))
             cmd[i][j] = 0;
     }
} 
```

瞧！

如果中间有空格，那么您必须定义所需的行为：只剪掉尾随空格，将字符串剪成许多小空格，或者完全不同的东西。

哦，还有另一个*旁注*：其他人似乎都在使用`char = '\0'`. 在`C`,`'\0' and 0`中是等价的，即`if ('\0' == 0) { ... }`计算结果为真。

*旁注2*：我使用`elem_number`是因为我不知道元素的数量是参数还是硬编码/提前知道。用合适的代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:41:40.060

将 char 数组中的字符设置为`\0`将截断该字符处的字符串。因此，在您的示例中，设置第 5 个字符将完成这项工作。

```
cmd[i][4] = '\0'; 
```

如果预期的字符串长度小于 4，则不要硬编码为 4，而是`strlen(cmd[i])-1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:43:37.110

也许你可以使用[`strrchr`](http://linux.die.net/man/3/strrchr)？如果字符串可能包含多个换行符，则在循环中使用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-24T08:57:09.613

```
 for(i = 0; i< sizeof(cmd)/sizeof(unsigned char[6]);i++)
        *strchr(cmd[i], '\n') = '\0'; 
```

# io - 在 BufferedInputStream 和 BufferedOutputStream 类中，为什么在写之前，读不好.......？

> ID：10733934
> 
> 赞同：1
> 
> 时间：2012-05-24T08:38:30.717
> 
> 标签：io

```
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
public class BufferedInputOutputStreamExample
{
    public static void main(String[] args) {
        try{
        BufferedInputStreamExample bisx=new BufferedInputStreamExample();
        BufferedInputStream bis=bisx.inputMethod();

        BufferedOutputStreamExample bosx=new BufferedOutputStreamExample();
        bosx.outputMethod(bis);
        }
        catch(FileNotFoundException fnf)
        {
            System.out.println("Sorry--------File not exists");
        }
        catch(IOException io)
        {
            System.out.println("IOException   ---:"+io.getMessage());
        }

    }
}
class BufferedInputStreamExample
{
    BufferedInputStream bis=null;
    BufferedInputStream  inputMethod()throws FileNotFoundException,IOException
    {
            FileInputStream fin=new FileInputStream("C:/e-SDK-4.1-win32-x86_64 (1)/RahulExample/src/Test.java");
            bis=new BufferedInputStream(fin); 
            int c;
            while((c=bis.read())!=-1)
                System.out.print((char)c);
            System.out.println();

        return bis;
    }
}
class BufferedOutputStreamExample
{
    BufferedOutputStream bos=null;
    int outputMethod(BufferedInputStream bis)throws IOException,FileNotFoundException
    {
        bos=new BufferedOutputStream(new FileOutputStream("C:/varun.txt"));

        int c;

        while((c=bis.read())!=-1){
            bos.write(c);
        }
        bis.close();
        bos.close();
        System.out.println("File created.............");
        return 1;
    }
} 
```

在这个程序中，我们使用 bufferedinputstream 从文件中读取内容，当我想使用 bufferedoutputstream 将 Test.java 文件的内容写入 varun.txt 文件时，它会创建文件但不在 varun.txt 中写入任何内容。如果我们将 Test.java 中的内容写入 varun.txt 而不读取它，创建文件并写入两者。为什么这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:47:29.010

当您调用 时`bisx.inputMethod()`，您正在读取流以打印其内容。问题是，*你现在还不想这样做*。读取流会消耗它，因此您返回的流已经结束，没有什么可读取的了。

如果要打印出文件的所有内容，然后将其全部写入另一个文件，这是两个独立的操作。根据文件的大小，它需要读取文件两次——使用两个不同的输入流——或者将整个文件缓冲在内存中。

相反，如果您只想在复制文件时显示文件的内容（这看起来像这里的真正目标），那么您有几个有价值的选择......

*   您可以**在`outputMethod`**数据写入输出文件时**打印数据。**在短期内，这可能是最简单的解决方法。当然，您还需要删除`inputMethod`读取流的代码。

*   您可以**子类化`FilterInputStream`或`FilterOutputStream`**定义一个流，每当它（分别）读取或写入数据时，它也会用它做其他事情。例如，它可以...

    *   **将数据打印到`System.out`.** 非常简单，但很僵硬。我越是考虑它......嗯。

    *   **将数据复制到另一个*任意*输出流。** 这将更加灵活；例如，您可以发送到日志文件或其他内容。而且它只需要很少的额外代码`System.out.print`，它通常会在物有所值的部门中获胜。

    *   **触发**其他对象可以订阅的事件。这可以为您提供几乎无限的灵活性（因为订阅者不再被迫关心流），但也可能更加复杂。（您基本上需要添加一个事件/订阅 API。）对于像这样的小型项目来说，这通常是矫枉过正的。

    请注意，如果您走这条路，您应该考虑重构事物，以便对象的构造函数采用流而不是创建流。这样，`main`可以决定输出是否发生以及输出到哪里，其他对象甚至不必关心。他们可以做他们的工作，将流视为常规的旧 InputStreams 和 OutputStreams，而您传入​​的流决定了还会发生什么。

（顺便说一句：为了专注于主要问题，我半忽略了您通过转换为“解码”的事实`char`。这可能无法忠实地再现文件的内容，除非您知道事实内容是ASCII字符。我假设输出是调试的东西，所以这不值得长篇大论......但知道在一般情况下，它可能会导致问题。）

# jquery - 在等待图像从动作显示时显示微调器

> ID：10733939
> 
> 赞同：2
> 
> 时间：2012-05-24T08:38:52.433
> 
> 标签：jquery, ajax, asp.net-mvc

我的 MVC 3 项目中有一个页面，该页面从报告服务中提取报告，其结果显示在：

```
<img src="@Url.Action("ActionName", "Controller",...etc 
```

此图像呈现在页面底部。Action 返回一个 FileContentResult 并且可能需要几秒钟才能显示出来。

我想要做的是在返回图像时显示一个微调器。我遇到的问题（我已经搜索了很多）是它不是 ajax，不使用 JQuery，它实际上只是浏览器用来检索图像的普通旧 URL。

所以问题是，如何在等待时显示微调器？这甚至可能吗？还是我必须使用 JQuery/Ajax 将图像加载到其他地方然后显示它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T08:43:50.653

我就是这样做的。我通常将它添加到我的 _layout 页面，以便在我的项目的每个页面上加载这个脚本和 div。这将导致 Spinner 在任何时候显示 ajaxSend 并隐藏在 ajaxStop 或 ajaxError 上。

```
<script type="text/javascript">
        $(document).ready(function () {
            BindSpinner();
        });

        function BindSpinner() {
            $("#spinner").bind("ajaxSend", function () {
                $(this).show();
            }).bind("ajaxStop", function () {
                $(this).hide();
            }).bind("ajaxError", function () {
                $(this).hide();
            });
        };
    </script>

  <div id="spinner" class="spinner" style="display: none;">
       <img id="img-spinner" src="@Url.Content("~/Content/Images/ajax-loader.gif")" alt="Loading..." />
  </div> 
```

现在，只要 ajax 导致 UI 等待，就会显示微调器。

可以在[此处找到使用 ajax 调用操作的指南。](http://blog.bobcravens.com/2009/11/ajax-calls-to-asp-net-mvc-action-methods-using-jquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T06:16:31.680

前段时间我遇到了类似的问题，我写了一个 jQuery 插件来处理自动显示微调器[http://denysonique.github.com/imgPreload/](http://denysonique.github.com/imgPreload/)

# c# - 以编程方式列出 SQL Server 的实例

> ID：10733940
> 
> 赞同：0
> 
> 时间：2012-05-24T08:38:53.310
> 
> 标签：c#, sql-server

我有代码来查找 sqlserver 列表

```
 public static string[] GetSQLServerList()
        {
            SqlDataSourceEnumerator dse = SqlDataSourceEnumerator.Instance;
            DataTable dt = dse.GetDataSources();
            if (dt.Rows.Count == 0)
            {
                return null;
            }

            string[] SQLServers = new string[dt.Rows.Count];
            int f = -1;
            foreach (DataRow r in dt.Rows)
            {
                string SQLServer = r["ServerName"].ToString();
                string Instance = r["InstanceName"].ToString();
                if (Instance != null && !string.IsNullOrEmpty(Instance))
                {
                    SQLServer += "\\" + Instance;
                }
                SQLServers[System.Math.Max(System.Threading.Interlocked.Increment(ref f), f - 1)] = SQLServer;
            }
            Array.Sort(SQLServers);
            return SQLServers;
        } 
```

它工作正常（如果找到 SQL Server），但不幸的是它找不到 sql Express。

有人有想法吗？

提前谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T08:46:54.493

您需要启用 SQL Browser 服务才能使 SQL Server 实例可浏览。

默认情况下，SQL Express 没有启用此功能。

参考：

[枚举 SQL Server (ADO.NET) 的实例](http://msdn.microsoft.com/en-us/library/a6t1z9x2.aspx)

> SQL Server 2000 在内部为 SqlDataSourceEnumerator 提供信息。但是，SQL Server 2005 通过使用名为 SQL Browser 的外部 Windows 服务来提供信息。此服务默认启用，但管理员可以将其关闭或禁用，使服务器实例对此类不可见。此服务仅适用于 SQL Server 2005，对 SQL Server 2000 的行为没有影响。

[使用 SQL Server 浏览器](http://msdn.microsoft.com/en-us/library/ms165724%28v=sql.90%29.aspx)

> 默认情况下，没有为 SQL Server Express 启用 SQL Server Browser 服务。SQL Server Browser 最初可以使用外围应用配置工具进行配置，并使用 SQL Server 配置管理器进行管理。

# c# - 线程和事件

> ID：10733942
> 
> 赞同：0
> 
> 时间：2012-05-24T08:39:01.190
> 
> 标签：c#, .net, wpf, multithreading, events

> **可能重复：**
> [跨线程操作无效：控件从线程访问，而不是它在](https://stackoverflow.com/questions/142003/cross-thread-operation-not-valid-control-accessed-from-a-thread-other-than-the)
> [WPF 上创建的线程从其他线程访问 GUI](https://stackoverflow.com/questions/2363920/wpf-access-gui-from-other-thread)

美好的一天，我写课

```
 public class Metric1
 {
        public event MetricUnitEventHandler OnUnitRead;

       public void ReiseEventOnUnitRead(string MetricUnitKey)
       {
            if (OnUnitRead!=null)
             OnUnitRead(this,new MetricUnitEventArgs(MetricUnitKey));
        }   
 .....
 }    

 Metric1 m1 = new Metric1();
 m1.OnUnitRead += new MetricUnitEventHandler(m1_OnUnitRead);

 void m1_OnUnitRead(object sender, MetricUnitEventArgs e)
 {
        MetricUnits.Add(((Metric1)sender));
        lstMetricUnit.ItemsSource = null;
        lstMetricUnit.ItemsSource = MetricUnits;    
 } 
```

然后我开始每分钟调用 m1 的 ReiseEventOnUnitRead 方法的新线程。

在行 `lstMetricUnit.ItemsSource = null`; 抛出异常 - **“调用线程无法访问此对象，因为不同的线程拥有它。”** 为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:43:17.250

您不能从不是 GUI 线程的另一个线程更改 GUI 项目，

如果您正在使用 WinForms，请使用 Invoke 和 InvokeRequired。

```
if (lstMetricUnit.InvokeRequired)
{        
    // Execute the specified delegate on the thread that owns
    // 'lstMetricUnit' control's underlying window handle.
    lstMetricUnit.Invoke(lstMetricUnit.myDelegate);        
}
else
{
    lstMetricUnit.ItemsSource = null;
    lstMetricUnit.ItemsSource = MetricUnits;
} 
```

如果您正在使用 WPF，请使用 Dispatcher。

```
lstMetricUnit.Dispatcher.Invoke(
          System.Windows.Threading.DispatcherPriority.Normal,
          new Action(
            delegate()
            {
              lstMetricUnit.ItemsSource = null;
              lstMetricUnit.ItemsSource = MetricUnits;   
            }
        )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:45:27.863

您应该使用调度程序。例子：

```
Dispatcher.CurrentDispatcher.Invoke(DispatcherPriority.Normal, (Action)(() => {  
        lstMetricUnit.ItemsSource = null;
        lstMetricUnit.ItemsSource = MetricUnits;    
}))); 
```

在 WPF 和 Forms -> 你不能从不同的线程修改 UI 控件。

# lwuit - BoxLayout（或任何其他布局）LWUIT 中元素之间的空间

> ID：10733947
> 
> 赞同：0
> 
> 时间：2012-05-24T08:39:22.093
> 
> 标签：lwuit

我在删除 LWUIT 中 BoxLayout 中放置的元素之间的所有空格和间隙时遇到问题，我试过了

```
 Container toolbar = new Container(new BoxLayout(BoxLayout.X_AXIS)); 
    toolbar.getStyle().setPadding(0, 0, 0, 0);
    toolbar.getStyle().setMargin(0, 0, 0, 0); 
```

没有运气，放置的元素之间总是存在小的间隙。我怎样才能做到这一点？

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T19:03:48.533

您需要将元素本身的边距归零。

您还应该将所有样式（未选中、选中、按下、禁用）的边距归零，而不仅仅是当前样式。

# ruby-on-rails-3 - simple_form typeahead 和 pre-pend bootstrap 错误的对齐

> ID：10733948
> 
> 赞同：2
> 
> 时间：2012-05-24T08:39:24.467
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, simple-form

正如您在附件中看到的那样，如果我将“typeahed”类赋予我的输入字段，则输入字段与前置未对齐。

![在此处输入图像描述](../Images/5846cd2f576d3981dfa3b0f86d71c0f7.png)

![在此处输入图像描述](../Images/797973d3ddf53ae26046919701a6518c.png)

这是要输出的代码：

```
<%= f.input :notary_name,:label => 'Notary', :input_html => {:class => "span4"}, :wrapper => :prepend do %>
  <span class="add-on"><i class="icon-search"></i></span><%= f.input_field :notary_name, :class => "span4 typeahead" %>
<%end%> 
```

如果我更改某些文本的图标，问题是一样的。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:08:26.490

解决了，这是一个愚蠢的错误，后面有一个额外的空间`<%=`

错误代码 `<%= f.input_field :notary_name, :class => "span4 typeahead" %>`

正确的 `<%=f.input_field :notary_name, :class => "span4 typeahead" %>`

# c# - 使用单个扩展方法浪费开销？

> ID：10733950
> 
> 赞同：0
> 
> 时间：2012-05-24T08:39:36.387
> 
> 标签：c#, optimization, extension-methods, using

如果我有一个包含许多扩展方法的类，如果我只使用其中一种扩展方法，我是否应该担心“使用”它的开销？
如果是这种情况，我是否应该将所有扩展方法放在它们自己的类中？或者也许有一种方法可以“使用”单个扩展方法？（例如，类似：`using StringMethods.RecursiveJoin;`？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:41:15.480

*它可能会非常非常*轻微地增加编译时间。而且根本没有运行时开销。因此，从性能的角度来看，没有理由担心。

我唯一担心的是设计是否好。所有这些方法是否真的应该是扩展方法，或者它们中的一些更适合作为普通的静态方法甚至实例方法？但是如果不知道您的扩展方法做了什么，就无法回答这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T08:43:22.270

不太确定“开销”的*确切*点是什么，但是如果您正在考虑“导入”单个方法，那是不可能的。您*可以*做的是将该方法移动/复制到另一个仅使用您的类中，如果它会给代码更多“本地化”的感觉（如果不查看所有项目就很难删除）。

这将是代码布局架构的改进，但不是内存或性能。

# mysql - 为什么 SELECT 找到查询但 UPDATE 在同一个 WHERE 上没有更新？

> ID：10733951
> 
> 赞同：0
> 
> 时间：2012-05-24T08:39:37.470
> 
> 标签：mysql, null

我有一个最奇怪的问题 - 当我运行时：

```
SELECT * FROM `words` WHERE `translation` = '' 
```

我得到：`Showing rows 0 - 29 (6,925 total, Query took 0.0008 sec)`

但是当我运行时：

```
UPDATE `words` SET `translation`= NULL WHERE `translation`= '' 
```

我得到：`0 row(s) affected. ( Query took 0.2200 sec )`

为什么它不想更新行？它是相同的 WHERE 子句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:48:56.467

被`translation`声明为`not null`，具有默认值`''`？如果是这样，将其设置为`NULL`an`UPDATE`无效，并且 MySQL 正确报告没有更改任何行。也就是说，你正在做相当于`UPDATE words SET translation = 'a' WHERE translation = 'a'`.

不过，您应该收到警告。MySQL 命令行客户端报告如下警告：

```
mysql> UPDATE words SET translation=NULL WHERE translation = '';
Query OK, 0 rows affected, 2 warnings (0.00 sec)
Rows matched: 2  Changed: 0  Warnings: 2 
```

要查看警告，请使用以下命令`show warnings;`：

```
mysql> show warnings;
+---------+------+-------------------------------------+
| Level   | Code | Message                             |
+---------+------+-------------------------------------+
| Warning | 1048 | Column 'translation' cannot be null |
| Warning | 1048 | Column 'translation' cannot be null |
+---------+------+-------------------------------------+ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T08:50:02.287

好的，试试这个：

```
UPDATE words SET translation='$$$' WHERE translation = '';
UPDATE words SET translation=NULL WHERE translation = '$$$'; 
```

其次; 也许列定义不允许 NULL 值？检查表设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:52:45.203

我敢打赌你不允许`translation`column 是`NULL`. 是否返回

```
Error Code: 1048
Column 'translation` cannot be null 
```

当你执行语句？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T09:10:40.583

我认为翻译允许null，如果是操作系统试试这个

```
 UPDATE `words` SET `translation`= NULL WHERE `translation IS NULL. 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-24T08:45:15.887

尝试使用其他列，例如 ID 或其他内容

```
update 'words' set 'translation'=null where id in (select id from 'words' where 'translation'='' 
```

不知道为什么会这样。

# openssl - 签名证书和私钥不匹配或不包含有效信息

> ID：10733959
> 
> 赞同：0
> 
> 时间：2012-05-24T08:40:07.353
> 
> 标签：openssl, installation, setup-deployment, sign, signtool

我正在做一个安装项目，我想签署我的“setup.exe”文件。

对于这个问题，我有；

*   “setup.exe”文件
*   一个“aaa.pfx”文件（我也使用这个 pfx 文件作为我的站点 ssl 证书。）

首先，

我将 pfx 文件转换为 crt 和 pvk 以上命令。

*   导出私钥：`openssl pkcs12 -in filename.pfx -nocerts -out key.pvk`
*   出口证明：`openssl pkcs12 -in filename.pfx -clcerts -nokeys -out cert.crt`

我正在使用 windows signwizard 工具进行签名，

脚步：

*   我选择了我的“setup.exe”文件
*   我选择了我的“cert.crt”
*   我选择了“key.pvk”这会得到一个像图片一样的错误；

![在此处输入图像描述](../Images/8d7a2ddea0462139811bb2264667334e.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:54:07.503

您说您对 SSL 站点证书使用相同`PFX`（`PKCS#12`等效）。

这就是问题所在：您不能使用这种类型的证书`TLS Web Server Authentication, TLS Web Client Authentication`来签署代码，例如`setup.exe`

读取导出的证书时

```
openssl x509 -in cert.crt -text 
```

你必须寻找`X509v3 Extended Key Usage:`线。

要签署代码，必须是：`Code Signing, Microsoft Commercial Code Signing`对于证书颁发机构提供商来说，这是一项不同的服务和不同的价格！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T16:56:30.997

您是否尝试过类似的方法：

```
1.
openssl sha256 -out digest.txt setup.exe
2.
openssl dgst -sha256 -sign key.pvk -out signed_setup.exe digest.txt 
```

# ios - Grand Central Dispatch 和单元测试

> ID：10733978
> 
> 赞同：1
> 
> 时间：2012-05-24T08:41:54.897
> 
> 标签：ios, objective-c, unit-testing, objective-c-blocks, grand-central-dispatch

[我编写了一个遵循 Apple文档](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/dispatch_semaphore_signal.3.html)的简单测试用例，但我没有看到我期望的结果。

这是代码：

```
- (void)testExample2
{
    NSLog(@"1");

    dispatch_semaphore_t semaphore = dispatch_semaphore_create(0); 

    dispatch_async(dispatch_get_main_queue(), ^{
        NSLog(@"3");
             dispatch_semaphore_signal(semaphore);
        });

    NSLog(@"2");
    dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);

    NSLog(@"4");    
    dispatch_release(semaphore);    
} 
```

我希望阅读：1、2、3、4，但我的控制台只显示 1、3。

我已经能够`DISPATCH_TIME_NOW`在while循环中与NSLoop hack一起使用来解决这个问题，但是上面的代码应该可以工作......对吗？

干杯...

**更新**

我刚刚意识到我应该使用单独的队列而不是`dispatch_main_queue()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:09:48.203

最终在我的`tearDown`.

```
while (dispatch_semaphore_wait(semaphore, DISPATCH_TIME_NOW)) {
    NSLog(@"...Tearing Down Tests..");
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode
                             beforeDate:[NSDate dateWithTimeIntervalSinceNow:10]];
}
dispatch_release(semaphore); 
```

并将信号量创建推入`setUp`.

# jquery - 多个元素上的jQuery可变高度不起作用

> ID：10733979
> 
> 赞同：2
> 
> 时间：2012-05-24T08:42:00.847
> 
> 标签：jquery, variables, height, jquery-animate

我正在做一个小的 jQuery 东西，我已经完成了大约 90%（我自己可能会添加）。但是现在我碰壁了，因为我的代码变得更大了，而且我似乎找不到我的最后一个问题。

[http://jsfiddle.net/7TRqh/](http://jsfiddle.net/7TRqh/) 在这个 jsFiddle 你可以看到我的项目。

我有 3 个（或更多/更少）不同的 div，它们的高度都是可变的。“meer”和“minder”按钮使元素向上/向下滑动，这一切正常（尽管代码可能有点混乱）。

但问题是它只抓取第一个元素的可变高度。192px 并将其用于所有元素，尽管它们要高得多。所以变量有问题

```
 var currentHeight = $('.book').css('height');
            $('.book').css('height','auto');
        var animateHeight = $('.book').css('height');
            $('.book').css('height', currentHeight); 
```

但我似乎无法真正找到错误，我希望这里有人能帮助我解决最后一个小问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:47:31.317

如果你打电话给`$('.book')`你用 class 调用所有元素`book`，你只会收到第一个元素的高度（因为你要求一个值：高度。它不能返回一个数组。

您可能需要做的是给每个不同`.book`的元素一个不同的 id，`book1`例如`book2`和`book3`。您现在可以获得每个不同`book`s 的高度。

* * *

编辑：

```
$('#myID').click (function () {
  // do some expanding
  // let's get the height!
  $(this).css('height'); // this is the height of the current clicked item. 
  $(this).parent.css('height'); // this is the height of the parent of the clicked item.
} 
```

您也可以在一组元素上调用此函数，例如`$('.book .meerButton').click(function(){});`

该`$(this)`变量非常好，如果您以前从未见过它，请在 jQuery 文档中阅读有关它的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:02:02.757

$('.book') 返回具有 book 类的所有元素，并且 height 仅对一个元素进行操作。Toi 解决此问题，您可以使用 each 函数：

```
$('.book').each(function(){
  var $this = $(this);
  var currentHeight = $this.css('height');
  $this.css('height','auto');
  ...
}); 
```

# node.js - 使用 npm 管理客户端脚本

> ID：10733982
> 
> 赞同：5
> 
> 时间：2012-05-24T08:42:03.960
> 
> 标签：node.js, express, npm

NPM 是否可以管理后端和客户端脚本的相同依赖项？我正在用 express 构建一个 node.js 应用程序。安装所有依赖项时，这些脚本将安装到 node_modules 文件夹中。是否有可能以某种方式告诉 express 它应该在那些文件夹中查找客户端的 javascript 文件？例如，当客户端请求文件 underscore.js 时，它应该从已安装的模块返回文件。或者是否可以挂钩到 npm 安装过程，以便可以将某些文件自动复制到应用程序的公用文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:56:37.237

在安装应用程序所需的包后，您可以使用`postinstall`package.json 中的 scripts 字段连接到 NPM：

*   install, postinstall：安装包后运行。

更多信息请阅读：http: [//npmjs.org/doc/scripts.html](http://npmjs.org/doc/scripts.html)

# algorithm - 从日志文件中获取前 100 个 URL

> ID：10733983
> 
> 赞同：6
> 
> 时间：2012-05-24T08:42:12.420
> 
> 标签：algorithm, data-structures

我的一位朋友在一次采访中被问到以下问题。谁能告诉我如何解决它？

我们有一个相当大的日志文件，大约 5GB。日志文件的每一行都包含一个用户在我们网站上访问过的 url。我们想弄清楚我们的用户访问的最受欢迎的 100 个网址是什么。怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T08:50:37.760

如果我们有超过 10GB 的 RAM，只需使用 hashmap 直接进行即可。

否则，使用散列函数将其分成几个文件。然后处理每个文件并获得前 5 名。每个文件都有“前 5 名”，很容易获得整体前 5 名。

另一种解决方案可以使用任何外部排序方法对其进行排序。然后扫描文件一次以计算每次出现的次数。在此过程中，您不必跟踪计数。你可以安全地扔掉任何没有进入top5的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:22:40.263

只需根据 URL 对日志文件进行排序（如果您选择堆排序或快速排序等算法，则需要恒定空间），然后计算每个 URL 出现的次数（很简单，具有相同 URL 的行彼此相邻）。

总体复杂度为 O(n*Log(n))。

为什么拆分多个文件并为每个文件只保留前 3 个（或前 5 个或前 N 个）是错误的：

```
 File1 File2 File3
url1   5     0     5
url2   0     5     5
url3   5     5     0
url4   5     0     0
url5   0     5     0
url6   0     0     5
url7   4     4     4 
```

url7 从未进入单个文件的前 3 名，但总体上是最好的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T09:47:33.740

因为日志文件相当大，您应该使用流式阅读器读取日志文件。不要在记忆中全部阅读。我希望在我们处理日志文件时在内存中拥有可能的不同链接的数量是可行的。

```
// Pseudo
Hashmap map<url,count>
while(log file has nextline){
    url = nextline in logfile
    add url to map and update count
}

List list 
foreach(m in map){
    add m to list         
}

sort the list by count value
take top n from the list 
```

运行时间为 O(n) + O(m*log(m))，其中 n 是日志文件的行数，m 是找到的不同链接的数量。

这是伪代码的 C# 实现。没有提供实际的文件阅读器和日志文件。而是提供了使用内存中的列表读取日志文件的简单模拟。

该算法使用哈希图来存储找到的链接。排序算法随后找到前 100 个链接。排序算法使用简单的数据容器数据结构。

内存复杂度取决于预期的不同链接。hashmap 必须能够包含找到的不同链接，否则此算法将不起作用。

```
// Implementation
using System;
using System.Collections.Generic;
using System.Linq;

public class Program
{
    public static void Main(string[] args)
    {
        RunLinkCount();
        Console.WriteLine("press a key to exit"); 
        Console.ReadKey();
    }

    class LinkData : IComparable
    {
        public string Url { get; set; }
        public int Count { get; set; }
        public int CompareTo(object obj)
        {
            var other = obj as LinkData;
            int i = other == null ? 0 : other.Count;
            return i.CompareTo(this.Count);
        }
    }

    static void RunLinkCount()
    {
        // Data setup
        var urls = new List<string>();
        var rand = new Random();
        const int loglength = 500000;
        // Emulate the log-file
        for (int i = 0; i < loglength; i++)
        {
            urls.Add(string.Format("http://{0}.com", rand.Next(1000)
                 .ToString("x")));
        }

        // Hashmap memory must be allocated 
        // to contain distinct number of urls
        var lookup = new Dictionary<string, int>();

        var stopwatch = new System.Diagnostics.Stopwatch();
        stopwatch.Start();

        // Algo-time
        // O(n) where n is log line count
        foreach (var url in urls) // Emulate stream reader, readline
        {
            if (lookup.ContainsKey(url))
            {
                int i = lookup[url];
                lookup[url] = i + 1;
            }
            else
            {
                lookup.Add(url, 1);
            }
        }

        // O(m) where m is number of distinct urls
        var list = lookup.Select(i => new LinkData 
             { Url = i.Key, Count = i.Value }).ToList();
        // O(mlogm)
        list.Sort();
        // O(m)
        var top = list.Take(100).ToList(); // top urls

        stopwatch.Stop();
        // End Algo-time

        // Show result
        // O(1)
        foreach (var i in top)
        {
            Console.WriteLine("Url: {0}, Count: {1}", i.Url, i.Count);
        }

        Console.WriteLine(string.Format("Time elapsed msec: {0}",
           stopwatch.ElapsedMilliseconds));
    }
} 
```

**编辑：**此答案已根据评论更新

*   补充：运行时间和内存复杂度分析
*   补充：伪代码
*   补充：解释我们如何管理一个相当大的日志文件

# .net - ClickOnce 和自定义更新 URL

> ID：10733985
> 
> 赞同：3
> 
> 时间：2012-05-24T08:42:16.510
> 
> 标签：.net, deployment, clickonce

我正在开发的应用程序（.NET C#）部署在我们客户自己的服务器上，在他们的 IIS 上，所以我们可以使用 ClickOnce 在客户的工作计算机上安装应用程序。由于它是客户自己的服务器，因此 IP 永远不会相同。这是标准 ClickOnce 更新机制的问题。这是我想要结束的场景：

*   从项目中删除“应用程序应检查更新”。
*   启动后，应用程序从服务器获取应用程序设置（这已经实现），并在这些设置中提供更新 URL。
*   使用更新 URL，应用程序使用 ClickOnce 来检查更新。
*   应用程序已更新并重新启动。

这可能吗？如何？

我已阅读[如何移动 ClickOnce 部署包](https://stackoverflow.com/questions/174764/how-to-move-a-clickonce-deployment-package)，这可能有效，但有时客户决定更改服务器 IP。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T05:25:16.027

您可以发布 ClickOnce 应用程序并让他们将其放在他们的服务器上（相同的文件夹结构），用户可以从任何位置安装它，而无需使用特定的 URL。为此，请打开项目属性，转到“发布”选项卡，然后打开“选项”对话框。

在该对话框中，转到“清单”选项卡并选中“排除部署提供程序 URL”。

当用户安装它时，ClickOnce 会将部署提供程序的 URL 设置为安装位置，并从那里查找该位置的更新。

如果您的客户随后想要将部署移动到另一个 URL，他们必须让每个人都将其卸载并重新安装。或者他们可以尝试使用[这种方法](http://robindotnet.wordpress.com/2010/01/17/how-to-move-a-clickonce-deployment/)来移动它，但要移动它，他们必须在部署清单中设置新的 URL，并且在他们要移动它的版本上取消选中该框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T11:29:02.023

在项目属性发布选项卡中单击更新按钮。取消选择“应用程序应检查更新”选项。（项目符号 1）。

其余的项目符号检查此博客[http://bloggingabout.net/blogs/dennis/archive/2007/11/05/manual-check-for-updates-with-clickonce.aspx](http://bloggingabout.net/blogs/dennis/archive/2007/11/05/manual-check-for-updates-with-clickonce.aspx)

# c# - 如何在c#中定义正则表达式

> ID：10733989
> 
> 赞同：0
> 
> 时间：2012-05-24T08:42:34.943
> 
> 标签：c#, regex, migration, migrate

我需要使用正则表达式替换源代码文档中的所有字符串，如下
`strcpy(x,"string is string")`所示`_tcscpy(x,_T("string is string"));`：
实际上，我需要用 T_marco 包围函数中的所有字符串
如何在 c# 中定义正则表达式模式来做到这一点？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T08:46:43.983

如果您需要这样做，您可以简单地从编辑菜单运行替换，使用`strcpy(x,"string is string")`被替换并`_tcscpy(x,_T("string is string"));`作为替换，设置“整个项目”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T09:19:13.067

First, you import API of regular expression in your class for use it:

```
using System.Text.RegularExpressions; 
```

Second in your method, instantiate new Regex:

```
Regex regexName = new Regex(@"string of regexExpression", RegexOptions.IgnoreCase); 
```

Third, you analize your string or for extract your prefered part of string:

```
MatchCollection nameOfResult = regexName.Matches(this.yourString);
foreach (Match result in nomeOfResult)
        {
            System.out.println(result.ToString());
        } 
```

Third-one, if you replace part of string corresponding your regex:

```
Regex.Replace(yourString, regexName); 
```

Try by this pattern : strcpy.*x,.*string.*is.*string.* For pattern or for test pattern use this: [http://rubular.com/](http://rubular.com/) or this: [http://myregexp.com/](http://myregexp.com/)

# c# - 如何修复“System.ServiceModel.ExceptionDetail”未标记为可序列化

> ID：10733990
> 
> 赞同：0
> 
> 时间：2012-05-24T08:42:36.650
> 
> 标签：c#, asp.net, wcf

我有一个由 ASP .Net 网站调用的 WCF Web 服务。在我的 web 方法中，我故意不捕获异常，因为我希望它们由客户端网站处理。Web 服务纯粹是一个内部应用程序，我希望它表现得像一个标准库，期望调用者处理异常。我在服务 web.config 中有 includeExceptionDetailInFaults="true"。当我的服务引发异常时，我收到此错误：

```
Log Name:      Application
Source:        ASP.NET 2.0.50727.0
Date:          24/05/2012 09:13:52
Event ID:      1334
Task Category: None
Level:         Error
Keywords:      Classic
User:          N/A
Description:
An unhandled exception occurred and the process was terminated.

Application ID: DefaultDomain

Process ID: 2628

Exception: System.Runtime.Serialization.SerializationException

Message: Type 'System.ServiceModel.ExceptionDetail' in Assembly 'System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' is not marked as serializable.

StackTrace:    at System.Runtime.Serialization.FormatterServices.InternalGetSerializableMembers(RuntimeType type)
   at System.Runtime.Serialization.FormatterServices.GetSerializableMembers(Type type, StreamingContext context)
   at System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitMemberInfo()
   at System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitSerialize(Object obj, ISurrogateSelector surrogateSelector, StreamingContext context, SerObjectInfoInit serObjectInfoInit, IFormatterConverter converter, ObjectWriter objectWriter)
   at System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.Serialize(Object obj, ISurrogateSelector surrogateSelector, StreamingContext context, SerObjectInfoInit serObjectInfoInit, IFormatterConverter converter, ObjectWriter objectWriter)
   at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Write(WriteObjectInfo objectInfo, NameInfo memberNameInfo, NameInfo typeNameInfo)
   at System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Serialize(Object graph, Header[] inHeaders, __BinaryWriter serWriter, Boolean fCheck)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize(Stream serializationStream, Object graph, Header[] headers, Boolean fCheck)
   at System.Runtime.Remoting.Channels.CrossAppDomainSerializer.SerializeObject(Object obj, MemoryStream stm)
   at System.AppDomain.Serialize(Object o)
   at System.AppDomain.MarshalObject(Object o) 
```

如何解决这个问题，以便我的客户能够捕获服务抛出的异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:23:33.930

我找到了问题的原因 - 在我的 Web 服务中的工作线程 (System.Threading.ThreadPool.QueueUserWorkItem) 中引发了异常，因此当然没有得到处理。通过添加异常处理程序并将日志记录到工作线程来修复。

# android - AsyncTask 示例和谷歌地图

> ID：10733992
> 
> 赞同：0
> 
> 时间：2012-05-24T08:42:44.577
> 
> 标签：android, google-maps, android-asynctask

android 应用程序中与地图或位置相关的所有内容都应该通过 AsyncTask 还是单独的线程来处理？如果我不使用 AsyncTask（或后台线程）来访问一个人的当前位置并在地图上标记它，甚至从数据库中获取不同的纬度/经度并在地图上标记它，会有什么问题？
您能否举一些使用 AsyncTask 的情况（特别是与地图和位置相关）的示例？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T08:47:49.197

asyncTask 是一个不同的/后台线程。它是一种简单的使用方法。

如果您在地图上显示一个位置，则不需要在不同的线程中处理它。您只需调用此方法

```
MyLocationOverlay myLocationOverlay = new MyLocationOverlay(this, mapView);
myLocationOverlay.enableMyLocation(); 
```

但是，如果您从数据库中提取坐标，那么您将需要一个后台线程来访问数据库并将数据更改为所需的状态。

任何需要花费最少时间且不访问 UI 的任务都应该在后台完成。这是一个很好的资源。[http://android-developers.blogspot.de/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.de/2010/07/multithreading-for-performance.html)

那里有一些例子

# jquery - 正确的 jQuery 语法

> ID：10733998
> 
> 赞同：0
> 
> 时间：2012-05-24T08:43:04.457
> 
> 标签：jquery, css, syntax

```
<script type="text/javascript">
    $(document).ready( function () { 
        $('#cell').css('height',$(window).height()+'px');
    });
</script> 
```

如您所见，我有这个脚本将#cell 的高度定义为页面的高度。但在这个 div 之外，我得到了另一个 div，它把它放在 `top=50%`屏幕`margin-top=-218px`中间。因此，页面高度的高度应该更大。

我试图做这样的事情，但我找不到正确的语法 -

```
<script type="text/javascript">
    $(document).ready( function () { 
        var p = $("mainWrap");
        var position = p.position();
        heightPage = $(window).height()
        heightTop = position.top;
        heightFixed = heightPage - heightTop + "px";
        $('#cell').css('height', heightFixed);
    });
</script> 
```

编辑：我能够这样做

```
<script type="text/javascript">
 $(document).ready( function () { 
  var s = document.getElementById('cell');
  var fixedHeight = $(window).height() - s.offsetTop;
  fixedHeight = fixedHeight + "px";
  $('#cell').css('height',fixedHeight);
}); 
```

感谢您的意见。

对于那个评论说我想要做什么的人：我通过用一个 DIV 包裹它来使我的内容居中，将它推到中间 'top:50%' 并将它的边缘移回顶部，这样它就会在'margin-top:208px' 的中间（它的内容的高度）。除此之外，我有一个隐藏在滚动屏幕下方的页脚（无论屏幕的分辨率是多少），并且由于居中的东西，页脚滚动太多.. top:50% 将页脚向下推我必须找到一种方法将其推回..这就是 jquery 部分的用武之地。我知道有很多方法可以将页脚保持在屏幕下方或下方，但我正在使用 cms patform 并且有很多错误和继承的css，所以它太复杂了。

无论如何，现在一切都很好并且可以正常工作，希望有一天它对某人有用。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T08:49:31.490

```
var p = $("mainWrap"); 
```

`#`如果它是一个 ID ( ) 或一个类 ( ) ，则需要一些指示符`.`。对于一个 ID，它应该看起来像

```
var p = $("#mainWrap"); 
```

编辑：正如 Ash 指出的那样，`p`很可能是`undefined`，因此下一行将引发错误，因为`undefined`has no property `position`。

# java - 我第二次解析 XML 文件时出现 XStream ConversionException

> ID：10733999
> 
> 赞同：0
> 
> 时间：2012-05-24T08:43:11.347
> 
> 标签：java, android, xml, exception, xstream

我正在尝试在我的 Android 应用程序中使用 XStream（我之前也使用 XStream 创建过 XML 文件）从 XML 文件中读取 TreeMap。

我只是在一个类的静态方法中做到这一点

```
File f = new File(Environment.getExternalStorageDirectory(), "map.xml");

XStream xStream = new XStream(new DomDriver());

@SuppressWarnings("unchecked")      
TreeMap<String,Object> map = (TreeMap<String,Object>) xStream.fromXML(f); 
```

然后我第一次毫无问题地使用 TreeMap 中的值。

问题是，如果我第二次调用该方法，无论我是在第一次执行之后还是在一段时间之后执行它都没有关系，我得到这个：

```
05-24 08:33:53.404: E/AndroidRuntime(15543): FATAL EXCEPTION: main
05-24 08:33:53.404: E/AndroidRuntime(15543): com.thoughtworks.xstream.converters.ConversionException: null : null
05-24 08:33:53.404: E/AndroidRuntime(15543): ---- Debugging information ----
05-24 08:33:53.404: E/AndroidRuntime(15543): cause-exception     : java.lang.NullPointerException
05-24 08:33:53.404: E/AndroidRuntime(15543): cause-message       : null
05-24 08:33:53.404: E/AndroidRuntime(15543): class               : java.util.TreeMap
05-24 08:33:53.404: E/AndroidRuntime(15543): required-type       : java.util.TreeMap
05-24 08:33:53.404: E/AndroidRuntime(15543): converter-type      : com.thoughtworks.xstream.converters.collections.TreeMapConverter
05-24 08:33:53.404: E/AndroidRuntime(15543): path                : /tree-map
05-24 08:33:53.404: E/AndroidRuntime(15543): version             : 0.0
05-24 08:33:53.404: E/AndroidRuntime(15543): -------------------------------
05-24 08:33:53.404: E/AndroidRuntime(15543):    at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:79)
05-24 08:33:53.404: E/AndroidRuntime(15543):    at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
[...]
05-24 08:33:53.404: E/AndroidRuntime(15543): Caused by: java.lang.NullPointerException
05-24 08:33:53.404: E/AndroidRuntime(15543):    at java.util.TreeMap.find(TreeMap.java:277)
05-24 08:33:53.404: E/AndroidRuntime(15543):    at java.util.TreeMap.putInternal(TreeMap.java:240)
05-24 08:33:53.404: E/AndroidRuntime(15543):    at java.util.TreeMap.put(TreeMap.java:186)
05-24 08:33:53.404: E/AndroidRuntime(15543):    at java.util.AbstractMap.putAll(AbstractMap.java:381)
05-24 08:33:53.404: E/AndroidRuntime(15543):    at com.thoughtworks.xstream.converters.collections.TreeMapConverter.populateTreeMap(TreeMapConverter.java:150)
[...] 
```

使用相同的文件。事实上，如果我尝试读取文件，然后将其作为字符串传递给 XStream，我会得到相同的异常（但 XML 字符串创建正常）。

有谁知道可能是什么原因或遇到过同样的问题并知道如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:31:57.597

好的，这似乎是 TreeMap 和 Android 的问题......现在使用 HashMap，工作正常 :)