# StackOverflow 问答 10604000-10604999

# java - 如何在java中发送带有post参数的简单http post请求

> ID：10604001
> 
> 赞同：9
> 
> 时间：2012-05-15T15:29:01.117
> 
> 标签：java, http, post, request

我需要一个简单的代码示例，使用从表单输入中获得的 post 参数发送 http post 请求。我找到了 Apache HTTPClient，它具有非常广泛的 API 和许多复杂的示例，但是我找不到发送带有输入参数的 http post 请求并获取文本响应的简单示例。

**更新：**我对 Apache HTTPClient v.4.x 感兴趣，因为 3.x 已被弃用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T19:18:26.230

这是使用 Apache HTTPClient API 的 Http POST 的示例代码。

```
import java.io.InputStream;
import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.methods.PostMethod;

public class PostExample {
    public static void main(String[] args){
        String url = "http://www.google.com";
        InputStream in = null;

        try {
            HttpClient client = new HttpClient();
            PostMethod method = new PostMethod(url);

            //Add any parameter if u want to send it with Post req.
            method.addParameter("p", "apple");

            int statusCode = client.executeMethod(method);

            if (statusCode != -1) {
                in = method.getResponseBodyAsStream();
            }

            System.out.println(in);

        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T15:46:39.263

我从我在我的应用程序中使用的 Andrew Gertig 的一个 Android 项目中提取了这段代码。它允许你做一个 HTTPost。如果我有时间，我会创建一个 POJO 示例，但希望你可以剖析代码并找到你需要的东西。

阿尔沙克

[https://github.com/AndrewGertig/RubyDroid/blob/master/src/com/gertig/rubydroid/AddEventView.java](https://github.com/AndrewGertig/RubyDroid/blob/master/src/com/gertig/rubydroid/AddEventView.java)

```
private void postEvents()
{
    DefaultHttpClient client = new DefaultHttpClient();

    /** FOR LOCAL DEV   HttpPost post = new HttpPost("http://192.168.0.186:3000/events"); //works with and without "/create" on the end */
    HttpPost post = new HttpPost("http://cold-leaf-59.heroku.com/myevents");
    JSONObject holder = new JSONObject();
    JSONObject eventObj = new JSONObject();

    Double budgetVal = 99.9;
    budgetVal = Double.parseDouble(eventBudgetView.getText().toString());

    try {   
        eventObj.put("budget", budgetVal);
        eventObj.put("name", eventNameView.getText().toString());

        holder.put("myevent", eventObj);

        Log.e("Event JSON", "Event JSON = "+ holder.toString());

        StringEntity se = new StringEntity(holder.toString());
        post.setEntity(se);
        post.setHeader("Content-Type","application/json");

    } catch (UnsupportedEncodingException e) {
        Log.e("Error",""+e);
        e.printStackTrace();
    } catch (JSONException js) {
        js.printStackTrace();
    }

    HttpResponse response = null;

    try {
        response = client.execute(post);
    } catch (ClientProtocolException e) {
        e.printStackTrace();
        Log.e("ClientProtocol",""+e);
    } catch (IOException e) {
        e.printStackTrace();
        Log.e("IO",""+e);
    }

    HttpEntity entity = response.getEntity();

    if (entity != null) {
        try {
            entity.consumeContent();
        } catch (IOException e) {
            Log.e("IO E",""+e);
            e.printStackTrace();
        }
    }

    Toast.makeText(this, "Your post was successfully uploaded", Toast.LENGTH_LONG).show();

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-06T09:47:04.847

**使用 Apache HttpClient v.4.x**的 HTTP POST 请求示例

 **```
HttpClient httpClient = HttpClients.createDefault();
HttpPost httpPost = new HttpPost(url);
MultipartEntityBuilder builder = MultipartEntityBuilder.create();
builder.addTextBody("param1", param1Value, ContentType.TEXT_PLAIN);
builder.addTextBody("param2", param2Value, ContentType.TEXT_PLAIN);
HttpEntity multipart = builder.build();
httpPost.setEntity(multipart);
HttpResponse response = httpClient.execute(httpMethod); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T15:41:35.007

[http://httpunit.sourceforge.net/doc/cookbook.html](http://httpunit.sourceforge.net/doc/cookbook.html) 使用 PostMethodWebRequest 和 setParameter 方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T15:51:37.810

显示了一个非常简单的示例，您从 Html 页面发布，servlet 处理它并发送文本响应..

[http://java.sun.com/developer/onlineTraining/Programming/BasicJava1/servlet.html](http://java.sun.com/developer/onlineTraining/Programming/BasicJava1/servlet.html)**

# sql - Oracle 复杂排序 - 多个子级

> ID：10604002
> 
> 赞同：1
> 
> 时间：2012-05-15T15:29:07.337
> 
> 标签：sql, oracle10g

我有一张如下表：

```
BRAND_ID PRODUCT_ID PRODUCT_DESC PRODUCT_TYPE
100      1000       Tools        A
100      1500       Tools        A 
200      2000       Burgers      B
300      3000       Clothing     C
300      4000       Makeup       D
300      5000       Clothing     C 
```

所以一个品牌可以有多个产品，都是相同类型或混合类型。如果一个品牌的产品都是相同类型的，我首先需要它们，按产品类型排序，然后是具有不同产品类型的品牌。我可以以编程方式执行此操作，但我想看看是否有办法在查询中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:46:32.253

如何从计算出不同品牌数量的子选择中进行选择，然后按数量排序？

```
select t.BRAND_ID, 
       t.PRODUCT_ID, 
       t.PRODUCT_DESC, 
       t.PRODUCT_TYPE
  from (select t2.BRAND_ID, 
               t2.PRODUCT_ID, 
               count(distinct t2.PRODUCT_TYPE) cnt
          from YOURTABLE t2
         group by t2.BRAND_ID, t2.PRODUCT_ID) data
  join YOURTABLE t on t.BRAND_ID = data.BRAND_ID and t.PRODUCT_ID = data.PRODUCT_ID
 order by data.cnt, BRAND_ID, PRODUCT_ID, PRODUCT_TYPE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:36:41.920

我无权访问 Oracle，但我相信这些方面的东西应该可以工作......

```
WITH
  ranked_data
AS
(
  SELECT
    COUNT(DISTINCT product_type) OVER (PARTITION BY brand_id)  AS brand_rank,
    MIN(product_type)            OVER (PARTITION BY brand_id)  AS first_product_type,
    *
  FROM
    yourTable
)
SELECT
  *
FROM
  ranked_data
ORDER BY
  brand_rank,
  first_product_type,
  brand_id,
  product_type,
  product_description 
```

另一种方法是加入子查询以计算两个排序字段。

```
SELECT
  yourTable.*
FROM
  yourTable
INNER JOIN
(
  SELECT
    brand_id,
    COUNT(DISTINCT product_type) AS brand_rank,
    MIN(product_type)            AS first_product_type,
  FROM
    yourTable
  GROUP BY
    brand_id
)
  AS brand_summary
    ON yourTable.brand_id = brand_summary.brand_id
ORDER BY
  brand_summary.brand_rank,
  brand_summary.first_product_type,
  yourTable.brand_id,
  yourTable.product_type,
  yourTable.product_description 
```

# java - Maven：在不同的源代码级别上编译和测试

> ID：10604007
> 
> 赞同：13
> 
> 时间：2012-05-15T15:29:26.273
> 
> 标签：java, unit-testing, maven, mockito

我目前正在开发一个将在嵌入式设备上运行的项目。该设备运行 Java ME JRE（与 Java 1.4 相当）。

由于这个 Maven 配置为针对源和目标级别 1.4 进行编译。

是否可以在不同的源/目标级别上运行 Maven 测试阶段？因为这样我可以使用 Mockito 进行单元测试。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-15T16:40:56.367

[可以为maven 编译器插件的](http://maven.apache.org/plugins/maven-compiler-plugin/)[compile](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#source)和[testCompile](http://maven.apache.org/plugins/maven-compiler-plugin/testCompile-mojo.html#testSource)目标分别设置源版本和目标版本。您可以通过在 pom 中定义属性来更改设置：

```
<properties>
    <maven.compiler.source>1.4</maven.compiler.source>
    <maven.compiler.target>1.4</maven.compiler.target>
    <maven.compiler.testSource>1.5</maven.compiler.testSource>
    <maven.compiler.testTarget>1.5</maven.compiler.testTarget>
</properties> 
```

或者通过编译器插件的显式配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.4</version>
    <configuration>
        <source>1.4</source>
        <target>1.4</target>
        <testSource>1.5</testSource>
        <testTarget>1.5</testTarget>
    </configuration>
</plugin> 
```

# windows-phone-7 - Windows Phone 7 - ListBox 的动态项目

> ID：10604009
> 
> 赞同：0
> 
> 时间：2012-05-15T15:29:34.750
> 
> 标签：windows-phone-7, listbox

我想`ListBox`动态创建每个项目的内容 - 将其视为项目列表。或者考虑一个带有联系人的电话簿应用程序，每个联系人都有一个或多个显示在姓名下方的电话号码；名称是一个字段，电话号码是第二个字段。但是电话号码字段的内容显然取决于联系人拥有的电话号码。

喜欢：

```
Andrew Adams   <-- TextBlock for name
650-123-2222   <-- "Item" for numbers
490-222-3333

Benny Benjamin
650-123-3333 
```

我试图通过`ListBox`为主要项目中的数字项目创建第二个来解决这个问题`ListBox`。但我不知道如何`ListBox`用 C# 中的模型填充这一秒。

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <StackPanel Height="Auto" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >

            <ListBox Name="ContactResultsData" ItemsSource="{Binding Contacts}" Margin="24,0" Height="620">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Name="ContactName" Text="{Binding ContactName}" Style="{StaticResource PhoneTextLargeStyle}" />
                            <ListBox Name="NumbersList" ItemsSource="{Binding NumbersList}">
                                <TextBlock Name="Number" Text="{Binding Number}" Style="{StaticResource PhoneTextSmallStyle}" />
                            </ListBox>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>
    </Grid>
</Grid> 
```

问题是：如何`NumbersList`从 C# 设置 ItemsSource？或者我可以用其他更好的方法解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:12:40.093

您需要`ItemTemplate`为您的第二个`ListBox`. 它应该看起来像：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <StackPanel Height="Auto" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >

        <ListBox Name="ContactResultsData" ItemsSource="{Binding Contacts}" Margin="24,0" Height="620">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Name="ContactName" Text="{Binding ContactName}" Style="{StaticResource PhoneTextLargeStyle}" />
                        <ListBox Name="NumbersList" ItemsSource="{Binding NumbersList}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Name="Number" Text="{Binding Number}" Style="{StaticResource PhoneTextSmallStyle}" />
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </StackPanel>
</Grid> 
```

附带说明一下，除非您需要在代码中或从 xaml 中使用它们，否则不要给您的 UI 元素名称（名称或 x:Name）。对于 ItemTemplate 中的项目尤其如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:42:46.040

*   内部不能直接包含
*   如果 NumbersList 是 IList 或类似的，那么您不能绑定到“Number” - 只需使用 {Binding} 代替

# java - 线程池中的代码运行速度比非线程慢得多

> ID：10604010
> 
> 赞同：0
> 
> 时间：2012-05-15T15:29:35.473
> 
> 标签：java, multithreading, zip, threadpool

我有读取一组二进制文件的代码，这些文件基本上由许多序列化的 java 对象组成。我正在尝试通过读取线程池（`Executors.newFixedThreadPool`）中的文件来并行化代码

我所看到的是，当线程化时，读取的运行速度实际上比单线程慢 - 从 1.5 到 10 倍慢，具体取决于线程数。

在我的测试用例中，我实际上是从多个线程读取*同一个*文件（35mb），所以我不受 I/O 的任何约束。我运行的线程数不超过 CPU，并且池之间没有任何同步——即我只是独立处理一堆文件。

有谁知道线程时性能缓慢的可能原因是什么？我应该寻找什么？或者剖析问题的最佳方法是什么？我已经在类中查找了可以在线程之间共享的静态变量，但我没有看到任何变量。在线程中实例化时，其中一个`java.*`类的运行速度是否会明显变慢（例如`java.zip.deflate`我正在使用的类）？
感谢您的任何提示。

Upd：另一个有趣的提示是，当单个线程运行时，执行读取的函数的执行时间是恒定到高精度的，但是当运行多个线程时，我看到时间上有很大的变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:44:57.177

*在我看来，当您添加多个执行相同工作*的线程时，您期望`java.zip.deflate`35mb 的读取运行得更快。它不会。实际上，尽管您可能不受 IO 限制，但您添加的每个线程仍然会产生内核开销——缓冲区副本等。即使您完全读取内核缓冲区空间，也会产生 CPU 和处理开销。

 *也就是说，我很惊讶你会慢 1.5 到 10 倍。如果您的每个处理线程都在写入输出，那么显然不会缓存。

但是，我怀疑您可能会发生内存争用。如果您正在处理 Java 序列化对象流，则需要注意内存消耗，除非您经常重置它。序列化保留了大量对对象的引用，因此大的连续流可以生成大量的 GC 带宽。

我会使用 jconsole 连接到您的程序并密切关注内存选项卡。随着幸存者和旧代空间的填充，您*将*看到非线性 CPU 影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:51:12.603

问题是由 java.util.zip.Inflate 类引起的，该类实际上有很多同步方法（因为其中有几个使用本机代码），所以当多个线程运行时，同步方法相互竞争并制作代码非常接近顺序。

解决方案是用 GNU 类路径中的仅 java 版本替换 java.util.zip 类（例如，从这里[http://git.savannah.gnu.org/cgit/classpath.git/tree/java/util/zip](http://git.savannah.gnu.org/cgit/classpath.git/tree/java/util/zip)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:45:01.187

仅仅因为所有线程工作人员都在从同一个文件中读取并不意味着它肯定不受 IO 限制。有可能。可能不是。可以肯定的是，设置您的测试用例，以便所有线程工作人员都从内存中的文件而不是磁盘中读取。

您在上面提到您认为操作系统已经缓存了文件，但是您确定文件是否以只读/共享模式打开？如果没有，那么操作系统仍然可以锁定文件以确保一次只有一个线程可以访问。

潜在相关链接：

*   [使用多线程读取单个文件：应该加快速度吗？](https://stackoverflow.com/questions/8809894/reading-a-single-file-with-multiple-thread-should-speed-up)
*   [读取单个文件的 Java 多线程应用程序](https://stackoverflow.com/questions/8126277/java-multi-thread-application-that-reads-a-single-file)*

# java - Java如何获取计时器停止的时间？

> ID：10604013
> 
> 赞同：2
> 
> 时间：2012-05-15T15:29:41.220
> 
> 标签：java, swing, timer, awt

我目前正在参考此[链接](https://stackoverflow.com/questions/5745745/creating-a-count-up-timer-to-break-when-puzzle-is-solved-java)来为我的程序创建计时器。

但我不知道如何获得`timer`停止的时间。

我认为`System.getcurrentTimeMillis()`目前不能使用。

那么，如何通过`timer`上述方法获得停止的当前时间？

编辑 ：

我目前正在构建一个简单的 4X4 记忆游戏，并且我的程序中有计时器，使用此[链接](https://stackoverflow.com/questions/5745745/creating-a-count-up-timer-to-break-when-puzzle-is-solved-java)中的方法。

在游戏结束时，我将使用 a`showMessageDialog`来显示点击次数和使用时间。但是，我只能显示点击次数，这是最简单的部分。

根据[链接](https://stackoverflow.com/questions/5745745/creating-a-count-up-timer-to-break-when-puzzle-is-solved-java)中的方法，我想我可以使用一种简单的方法，例如

```
JOptionPane.showMessageDialog( null, "Congratulations. \n You have win the game with " + click + " click(s) in " + hour + "hour(s) " + minute + " minute(s) " + second + " second(s).", "Win", 1); 
```

有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:47:55.017

您可以使用

```
 Date d = new Date();
DateFormat df = new SimpleDateFormat("hh:mm:ss");
String dateStr = df.format(d); 
```

# json - 如何使用jsonresult asp.net mvc3返回多个变量

> ID：10604014
> 
> 赞同：18
> 
> 时间：2012-05-15T15:29:41.470
> 
> 标签：json, asp.net-mvc-3, razor

如何在 JsonResult 方法上返回多个变量

例如我想返回这两个变量：

```
string result = "Successed";
string ID = "32" 
```

我知道如何只返回一个字符串：

```
return Json("Inserted"); 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-15T15:38:38.257

```
 public ActionResult YourAction()
 {
   var result=new { Result="Successed", ID="32"};
   return Json(result, JsonRequestBehavior.AllowGet);
 } 
```

**编辑**：***根据评论***“如何在客户端获取此数据”

您可以使用`getJSON`from view 来获取这样的数据

```
$(function(){
   $.getJSON('YourController/YourAction', function(data) {
      alert(data.Result);
      alert(data.ID);
   });
}); 
```

确保您在视图中加载了 jQuery 以使此代码正常工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T15:31:26.507

返回一个匿名对象。

```
return Json( new { Result = result, Id = ID } ); 
```

我通常会这样做：

```
public enum NoticeTypes
{
    Default,
    UpdateComplete,
    ResponsePending,
    Notice,
    Error,
    Redirect,
    WaitAndRetryAttempt
}
public class AjaxJsonResponse
{
    public UserNotice Notice { get; set; }
    public object Data { get; set; }
    private AjaxJsonResponse() { }
    public static JsonResult Create(UserNotice Notice,object Data)
    {
        return new JsonResult()
        { 
            Data = new 
            { 
                Notice = Notice,
                Data = Data
            } 
        };
    }
} 
```

这样我就可以编写我的 javascript 以始终​​期望 ajax 调用以某种格式返回数据。

```
return AjaxResponse.Create(NoticeTypes.UpdateComplete, new 
{ 
    Result = result, 
    Id = ID 
}); 
```

现在，您可以执行诸如 Ajax Complete 全局处理程序之类的事情，该处理程序可以在普通处理程序获取它之前`Redirect`或`WaitAndRetry`之前拦截事情，并有一种标准方式来传达有关在您的应用程序中相同的返回数据的附加信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-18T11:47:14.693

在你的控制器上使用这样的东西：

```
var result = new { data= stuff, data2 = otherstuff };
return Json(result, JsonRequestBehavior.AllowGet); 
```

如果您在 JavaScript 上使用 .ajax() ，则可以像这样使用数据访问：

```
$.ajax(
            {
                url: '/Controller/Method/',
                type: 'POST',
                data: 'data=' + data,
                success: function (result) {
                    $('#id').html("");
                    $(result.data).appendTo('#id');
                    $('#id2').html("");
                    $(result.data2).appendTo('#id2');
                    $('#id').show();
                    $('#id2').show();
                }
            }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-18T20:07:59.323

**1.作为匿名类型内的集合返回** 这是java script/ajax调用和完整的html。

```
< script type = "text/javascript" >
  $(document).ready(function() {
    $("#ddlProduct").hide();
    $("#ddlRegion").change(function() {
      $("#ddlProduct").show();
      $("#ddlProduct").empty();
      $.ajax({
        type: "Post",
        url: "@Url.Action("
        GetProducts ")",
        dataType: "Json",
        data: {
          id: $("#ddlRegion").val()
        },
        success: function(jsonData) {
          console.log($(jsonData).length);
          if ($(jsonData.ProductList).length == 0) {
            $("#divProduct").hide();
          } else {
            $("#divProduct").show();
          }

          $.each(jsonData.ProductList, function(i, Product) {
            $("#ddlProduct").append('<option value=" ' + Product.Value + ' ">' + Product.Text + '</option>');
          });
          if ($(jsonData.FlavourList).length == 0) {
            $("#divFlavour").hide();
          } else {
            $("#divFlavour").show();
            $.each(jsonData.FlavourList, function(i, flavour) {
              $("#ddlFlavour").append('<option value=" ' + flavour.Value + ' ">' + flavour.Text + '</option>');
            });
          }
        },
        error: function(ex) {
          alert("Failed to return Products <br/>");
        }
      });
      return false;
    })
  }); //Document Ready Ends
< /script>
```

```
@{ ViewBag.Title = "Products Drop Down Demo"; }

<h2>Products Drop Down Demo</h2>
@using (Html.BeginForm()) {
<div>@Html.Label("Select Region:")</div>
<div class="editor-field">
  @if (ViewData.ContainsKey("Region")) { @Html.DropDownList("ddlRegion", ViewData["Region"] as List
  <SelectListItem>) }
</div>
<div id="divProduct" hidden="hidden">
  <br />
  <div>
    Select a Product:
  </div>
  <div>
    @Html.DropDownList("ddlProduct", new SelectList(string.Empty, "Value", "Text"), "Please select a Product", new { style = "width:250px", @class = "dropdown1" })
  </div>
</div>
<div id="divFlavour" hidden="hidden">
  <div>
    <br />Select a Flavour:
  </div>
  <div>
    @Html.DropDownList("ddlFlavour", new SelectList(string.Empty, "Value", "Text"), "Please select a Flavour", new { style = "width:250px", @class = "dropdown1" })
  </div>
</div>
}
```

* * *

**这是返回** 我测试的数据的控制器操作，它正在工作。

```
 public ActionResult LoadRegion()
    {
        List<SelectListItem> Regions = new List<SelectListItem>();
        Regions.Add(new SelectListItem { Text = "Select A Region", Value = "0" });
        Regions.Add(new SelectListItem { Text = "Asea", Value = "1" });
        Regions.Add(new SelectListItem { Text = "Australia", Value = "4" });
        Regions.Add(new SelectListItem { Text = "America", Value = "5" });
        Regions.Add(new SelectListItem { Text = "Europe", Value = "6" });
        ViewData["Region"] = Regions;
        return View();
    } 
```

public JsonResult GetProducts(string id) { List products = new List(); 列表风味 = 新列表（）；

```
 products.Add(new SelectListItem { Text = "Select Product", Value = "0" });
        products.Add(new SelectListItem { Text = "Cheese", Value = "1" });
        products.Add(new SelectListItem { Text = "Sause", Value = "2" });
        products.Add(new SelectListItem { Text = "Veberage", Value = "3" });
        products.Add(new SelectListItem { Text = "Snacks", Value = "4" });

        flavours.Add(new SelectListItem { Text = "Select Flavour", Value = "0", Selected = true });
        flavours.Add(new SelectListItem { Text = "Sweet", Value = "1" });
        flavours.Add(new SelectListItem { Text = "Sour", Value = "2" });
        flavours.Add(new SelectListItem { Text = "Spicy", Value = "3" });

        var myResult = new
        {
            ProductList = products,
            FlavourList = flavours
        };
        return Json(myResult, JsonRequestBehavior.AllowGet); 
```

## }

如果您在运行此代码时遇到任何问题，请告诉我。感谢 Premjeet

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T15:31:18.647

您应该返回一个具有多个属性的对象：

```
return Json(new {
    result, 
    ID
}); 
```

JSON 序列化程序会将 C# 匿名类型转换为 JSON 对象字面量。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-01T07:20:34.277

在行动方法：

使用新键

```
var genericResult = new { homeworkData = homework, attachmentData = homeworkAttachment };
var result = this.Json(genericResult, JsonRequestBehavior.AllowGet);
return result; 
```

在 jquery 方面：

```
function getHomewrokDetailResponse(dataSent, result) {
if (result && result.homeworkData) {
    homeworkId = result.homeworkData.DASH_EMPLOYEE_HOMEWORK_ID;

    ....
} 
```

# android - 如何在Android上绘制未填充的数字？

> ID：10604018
> 
> 赞同：72
> 
> 时间：2012-05-15T15:29:45.137
> 
> 标签：android, drawing, fill

是否可以在 Android 上绘制未填充的数字？默认情况下，圆形和矩形被填充。

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-05-15T15:31:31.787

`Paint`如果您只想要一个没有填充的轮廓，则需要将样式更改为描边：

```
Paint p = new Paint();
p.setStyle(Paint.Style.STROKE); 
```

# intellij-idea - 如何将 IntelliJ 中的多个运行配置组合在一起？

> ID：10604019
> 
> 赞同：57
> 
> 时间：2012-05-15T15:29:47.487
> 
> 标签：intellij-idea

我有一个包含多个模块的 IntelliJ 项目。一些模块应该作为服务器运行。对于每个服务器（模块），我都有一个运行配置。

我可以将这些运行配置捆绑在一起，这样我就不需要点击运行或停止五次了吗？

如果重要，该项目已完全成熟。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2016-07-12T18:18:12.690

先前接受的答案不适用于运行多个服务器或任何不终止的脚本。

好消息是，现在您可以使用本`Compound`机构建到程序中的运行配置来同时执行多个不会终止的服务器。

事实上，即使 MultiRun 插件在他们的[GitHub 页面上](https://github.com/rkhmelyuk/multirun)也声明他们建议`Compound`在他们的插件上使用运行配置。

[IntelliJ IDEA 官方文档](https://www.jetbrains.com/help/idea/2016.1/run-debug-configuration-compound.html)

选项如下所示：

[![设置外观的屏幕截图](../Images/94714bff879c6fe175994eeb12326b05.png)](https://i.stack.imgur.com/wgsts.png)

**使其工作的步骤：**

1.  首先创建您的个人运行配置
2.  然后创建一个新的复合配置
3.  现在选择您之前设置的单个运行配置。
4.  最后只需运行您的新`Compound`配置。

所有单独的配置将同时运行。非常适合不退出的服务器和其他线程！

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-05-28T18:00:20.227

# 更新

这现在是可能的（尽管@CrazyCoder 链接到的问题截至该日期仍处于打开状态）。在 Intellij 12 中，当您处于“编辑配置”时，您可以在启动前“运行另一个配置”。这是一个屏幕截图：

![运行另一个配置](../Images/e81ae4ef62352955727237c06d031c17.png)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-06-26T18:00:31.517

看看这个[Multirun 插件](http://plugins.jetbrains.com/plugin/7248?pr=idea)。

是的，我在 CrazyCoder 的链接之后找到了它，所以再次向他提供道具！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-06-08T19:46:32.203

我发现“复合”按字母顺序对所有模块进行排序并按该顺序启动它们。如果存在具有依赖关系的模块，这可能是一个问题。如果有办法覆盖该排序，我找不到它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-16T06:42:35.773

我正在使用 IntelliJ 2020.2 的付费版本

我想要一件简单的事情——启动我的 Spring Boot 应用程序，然后启动我的 Angular 应用程序。我尝试了“运行另一个配置”的方式，但它不起作用。我遇到了与@AxelFontaine 相同的问题。

Multirun 插件解决了我的问题。我确实必须重新启动 IDE 两次——一次是在安装插件后更新它，第二次是因为保存一些配置时出错。但从那时起，它的工作就像预期的那样。这非常有用，因为我可以在 UI 上工作并立即查看更改，类似地，Spring 开发工具允许我更改代码并立即重新加载。这个插件非常非常有用。

# android - 如何从 CookieManager android 获取所有 cookie？

> ID：10604021
> 
> 赞同：17
> 
> 时间：2012-05-15T15:29:49.523
> 
> 标签：android, cookies

对于`Android CookieManager` 类，有一个方法 -- `getCookie(String url)`。
为此，我们需要知道正确的 url。
有没有办法让所有 cookie 进入`CookieManager`并获取 urls 。类似的东西`getCookies`？？这只是为了仔细检查我`url`的`getCookie(String url)`电话是否有任何错误。当我调用它时，我没有得到 cookie。
我在`IP address`这里通过完整的 url。像这样的东西：`"xx.x.x.x"`

谢谢米娅
_

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-29T12:46:05.370

我在我的 Android 应用程序中使用了带有 java.net 包的 CookieManager，它就像一个魅力。这是一个代码片段：

```
import java.net.CookieHandler;
import java.net.CookieManager;
import java.net.CookiePolicy;
import java.net.HttpCookie;
import java.util.List;

private class MyCookieManager
{       
    private CookieManager mCookieManager = null;

    MyCookieManager() {
        mCookieManager = new CookieManager();
        mCookieManager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);
        CookieHandler.setDefault(mCookieManager);
    }

    private List<HttpCookie> getCookies() {
        if(mCookieManager == null)
            return null;
        else
            return mCookieManager.getCookieStore().getCookies();
    }

    public void clearCookies() {
        if(mCookieManager != null)
            mCookieManager.getCookieStore().removeAll();
    } 

    public boolean isCookieManagerEmpty() {
        if(mCookieManager == null)
            return true;
        else 
            return mCookieManager.getCookieStore().getCookies().isEmpty();
    }

    public String getCookieValue() {
        String cookieValue = new String();

        if(!isCookieManagerEmpty()) {
            for (HttpCookie eachCookie : getCookies())
                cookieValue = cookieValue + String.format("%s=%s; ", eachCookie.getName(), eachCookie.getValue());
        }

        return cookieValue;
    }

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T18:51:38.670

您可以[使用反射](http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html#fields)来查看 cookie 映射。它在 4.0.3 中称为 mCookieMap（可能在早期版本中也是如此）。类型为地图>。

这不是一个很好的方法，因为如果它们不使用 mCookieMap，您将面临在不同设备或操作系统版本上中断的风险，但 CookieManager 不提供知道访问了哪些 URL 的公共方式。

# asp.net - ASP.NET webservices 路由请求是如何做 WebMethods 的？

> ID：10604023
> 
> 赞同：0
> 
> 时间：2012-05-15T15:29:55.017
> 
> 标签：asp.net, web-services, ipc

由于我们的系统严重依赖于编写不佳的第三方库，我遇到了问题。这个库不是线程安全的（因为一些错误和静态变量），我需要在一个 ASP.NET 网络服务中使用它，它在一个单独的线程中处理每个用户请求。

我已经为这个问题尝试了很多解决方案。在我看来，目前最好的解决方案是让子流程处理请求。一个子进程将侦听和处理一个用户的请求，因此我可以以每个用户的方式同步对库代码的访问，这比我在请求之间共享静态变量时所能做的要好得多。

如何在不重新发明轮子的情况下将通过 IPC 通信接收到的请求路由到适当的 WebMethods？如果可能的话，我想使用 .Net 中的类在普通的 ASP.NET Web 服务中处理这个问题，但是我很难找到它们的名字。

**TL;DR**：我有一个 MyWebService 类（继承自 System.Web.Services.WebService），其中一些方法用 WebMethodAttribute 标记，我想将一个虚构的 HttpRequest（或 HttpContext）传递给它并告诉它“像处理它一样尽管当前进程是控制台应用程序，但您是从真正的 HTTP 服务器接收到的”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:06:45.987

首先，您可能需要考虑使用 WCF 而不是 ASMX，这是一项遗留技术，仅为了向后兼容而保留。

其次，您还有另一个选择：确保一次只有一个线程使用第三方库。`lock`在对第三方库的所有访问权限周围放置块可能会解决问题。

# ios - 如何将 GANTracker 用于长时间运行的 iOS 应用程序，包括背景音频

> ID：10604028
> 
> 赞同：0
> 
> 时间：2012-05-15T15:30:06.320
> 
> 标签：ios, google-analytics

我的应用程序通常作为婴儿监视器在夜间运行，或者作为前台应用程序，或者在运行背景音频的情况下运行。

目标：

1.  跟踪应用程序启动总数，即。活跃用户数。
2.  跟踪前台与后台的总使用时间和总会话时间。
3.  如果浏览设置屏幕，则跟踪各种页面视图。

按照建议，我在 中启动跟踪器`didFinishLaunchingWithOptions`，并将我的第一个跟踪器`ViewController`作为我的第一个“页面查看”。我的应用程序可能会在接下来的 8 小时内停留在此页面上......

然后出现几个问题：

1.  我什么时候打电话`stopTracker`，它有什么作用？我希望它终止跟踪会话。但是由于 google 好心地将他们的代码隐藏在一个静态库中，我不知道幕后发生了什么，而且 .h 并没有说太多。但是，如果用户决定启用背景音频，我的第一反应是我`stopTracker`的应用程序仍在运行...`applicationWillResignActive`

2.  接下来，我读到会话可能会在 30 分钟后超时而没有新的综合浏览量，或者在午夜时分。我可以设置一个重复计时器，每 20 分钟发送一次相同的页面浏览量，这应该让我的会话保持活跃，至少到午夜，但是我的页面浏览量会更大吗？除非它足够聪明，知道我每次通话都在同一页面上。 [谷歌分析博客](http://analytics.blogspot.com/2011/08/update-to-sessions-in-google-analytics.html)

[更新：每次调用似乎都算作一个新的综合浏览量，因此数字是倾斜的，所以如何处理仍然是一个问题]

1.  如果我上面的计时器运行超过午夜并且会话已过期，我将结束一个新会话并将实际活跃用户数加倍？

2.  如果我确实打电话`stopTracker`，`applicationWillResignActive`下一次跟踪页面视图的电话会重新启动跟踪器吗？还是我需要再打电话`startTrackerWithAccountID`？

3.  相反，如果我在 中启动跟踪器`applicationDidBecomeActive`，则会丢失可能在后台运行的会话。

[更新：这似乎是迄今为止最好的方法，但由于分析报告的时间滞后，测试非常缓慢，我会尽快报告]

PS EasyTracker 似乎并没有更好地处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:50:18.587

我通过使用名为“Backgrounded”的网页浏览来完成这项工作，当用户没有选择背景功能时，应用程序正在调用 stopTracker。我看到多次点击，平均会话时间为 20 分钟，但我可以按时间进行多次网页浏览，以查看目标 2 的总时间。我为目标 1 找到了两种解决方案，事件（未在简易跟踪器中公开），以及在我的applicationDidBecomeActive（如果它不是后台应用程序的恢复）然后我跟踪 AppStarted 的网页浏览量。我最终将整个东西包装在一个实用程序类中，并将其整合到我的几个应用程序中，所以看到结果也会很有趣。如果其他人尝试这样做，您可能也想考虑使用自定义变量。我在其中添加了我的应用程序版本，因此我还可以监控有多少用户正在迁移到最新的应用程序版本。

# ios - iPad Safari 不断刷新主页

> ID：10604036
> 
> 赞同：1
> 
> 时间：2012-05-15T15:30:39.060
> 
> 标签：ios, http, networking

我们的 Webapp 网站有一个奇怪的问题，我们偶尔会从 Apple iPad Safari 中重新加载大量页面。

发生的情况是 Safari 打开与我们服务器的保持活动 HTTP 1.1 连接并向其发出 GET 流。这些请求彼此之间只能相距几十毫秒，而且 Safari 似乎在收到对先前请求的响应后立即重新加载页面。发送 4-5 个请求后，Safari 关闭套接字，打开新的，同样的事情重复几分钟，直到它突然停止。

检查的东西

*   仅发生在主页根 url /
*   页面在加载时没有 window.location.reload 调用可能会导致此问题
*   通过 tcpdump 和 wireshark 确认问题是真实存在的，并且发生在 iPad 设备和我们的服务器之间。（即 haproxy、我们的服务器或错误的日志记录没有问题）
*   问题似乎主要出在 iOS 4.3.3
*   我不能问用户，我们没有在本地用测试设备重复这个
*   所有问题请求都来自看似学校 VPN 网关的单个 IP，但来自不同的随机用户（基于 cookie，相同的用户可能会成功使用 webapp 天，直到问题重复出现）

有谁知道这里可能会发生什么？

*   代理损坏？
*   iOS HomeScreen webapp 书签出了问题？
*   DoS 尝试，虽然是蹩脚的
*   人们在使用我们的 web 应用程序时会变成僵尸，而不是 Brainsss 他们渴望 Reloadss？

# java - Java 面向对象设计

> ID：10604038
> 
> 赞同：0
> 
> 时间：2012-05-15T15:30:54.880
> 
> 标签：java

我刚开始学习，书上说我可以使用“预编码”的类和对象。如何在程序开始时调用这些类/对象？我基本上了解它们是什么，以及我可以使用这些类/对象来代替每次编写新代码的想法，但我似乎无法弄清楚我在哪里找到这些东西以及如何实现它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:35:07.917

您肯定会谈到 JRE/JDK 中的 Java 类。通过在类路径中包含 jar 并提供“默认”java 类来使用这些。和包装一样`String`。`java.util`

如果您想查看它们，可以在 JDK 中找到这些类的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:35:26.400

[“预编码”或预先编写的 Java 类与Java API](http://docs.oracle.com/javase/7/docs/api/)的概念几乎相同——有人为您编写了代码，并且非常友好地记录了您如何使用代码，并且您可以创建实例（根据需要）通过规定的方式。

比如说，我想要一个包含字符串的 ArrayList。然后我会编码`ArrayList<String> words = new ArrayList<String>()`。您不必经历编写动态自扩展向量的过程。

# django - 与 django 应用程序一起连续运行任务

> ID：10604039
> 
> 赞同：1
> 
> 时间：2012-05-15T15:30:54.980
> 
> 标签：django, rabbitmq, django-celery

我正在构建一个 django 应用程序，它列出了热门（根据特定算法）推特趋势主题。

我想无限期地运行一些进程来进行 twitter API 调用并使用新信息更新数据库（postgre）。这样，热门话题列表就会异步更新。

起初在我看来 celery+rabbitmq 是我的问题的解决方案，但据我了解，它们在 django 中用于启动计划或用户触发的任务，而不是无限期运行的任务。

我想到的解决方案是编写一个 .py 文件以不断地将趋势主题放入队列中，并编写独立的 .py 文件不断运行，发出获取队列请求并将数据保存在 django 使用原始 SQL 或 SQLAlchemy 的数据库中。我认为这可行，但我很确定有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:40:59.580

如果您只需要保持某些进程持续运行，[supervisor](http://supervisord.org/)是一个不错的解决方案。

您可以将它与您喜欢的任何排队技术相结合，将事物推送到您的队列中。

# yii - YII中的一对多数据库字段唯一性规则

> ID：10604043
> 
> 赞同：0
> 
> 时间：2012-05-15T15:31:09.337
> 
> 标签：yii

我有一张桌子。假设我们有一个 23 的用户 ID，它对应于用户可能拥有的各种角色：科学家、研究人员和开发人员。ID 分别为：2,8,9。

![在此处输入图像描述](../Images/b1004185da6c2b1ab46ae8155a02d8f3.png)

因此，用户 ID 可以重复，但与用户 ID 相关的角色 ID 是唯一的。请注意，如果有超过 1 个用户我想要它，以便可以复制角色（对用户唯一，在不同用户之间复制），例如： ![在此处输入图像描述](../Images/9f0d78d9f7457744969cc7f6b0e1597d.png)

在 Yii 中，在模型的规则下你可以创建一个规则来做唯一性。我希望 RoleID 字段对于该用户是唯一的。因此，如果用户 x 具有角色 y，它将不会再次添加角色 y（创建重复项）。

这是架构：

![在此处输入图像描述](../Images/4e7b74dc66c1263f3ce8022819a29808.png)

# java - 为 OpenGL ES 设置 ViewPort - Android

> ID：10604047
> 
> 赞同：2
> 
> 时间：2012-05-15T15:31:15.447
> 
> 标签：java, android, opengl-es, viewport

我有一个我正在尝试绘制的 OpenGL ES 对象。该对象具有相当大的顶点值，x 和 y 坐标介于 -30,000 和 +30,000 之间。z 值介于 2000 和 -2000 之间。

谁能告诉我应该如何设置我的视口？我正在使用以下代码：

```
public void onSurfaceChanged(GL10 gl, int width, int height) {
    //Define the view frustrum
    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    float ratio = (float)width/height;
    GLU.gluPerspective(gl, 45.0f, ratio, 1, 100f);
}

public void onDrawFrame (GL10 gl) {
    // Clear the screen to black.
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    //Position the model.
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    gl.glTranslatef(0.0f, 0.0f, 0.0f);
    //gl.glScalef(0.000015f,0.000015f,0.000015f); 
```

这可以编译，但我根本看不到我的对象。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:06:44.230

您可能看不到它，因为您的相机在物体内部。也许首先尝试将其缩放 0.001 以将其缩小到大约 60 个单位，在 z 方向将其平移 -50（使其到达 z 范围的中间），然后查看它是否显示出来。

或者，您可以将 z 范围扩大很多，并在 z 方向将其平移大约 -50,000 个单位，以将对象从相机移回。您必须将 znear/zfar 调整为更大。

# python - 修复损坏的xml的Pythonic方法

> ID：10604048
> 
> 赞同：2
> 
> 时间：2012-05-15T15:31:16.150
> 
> 标签：python, xml, xml-parsing

我正在使用损坏的 XML-RPC 服务器，虽然我已提交支持请求以修复它，但存在一个错误，它将 utf-8 响应的字节长度报告为字符数，导致截断我收到的 XML。

我希望这个问题很快就会得到解决，但是我目前正在将其作为一组工具的一部分进行调查，并且确实需要让它工作。目前我有猴子补丁 xmlrpclib 来反转异常解析并允许我手动向解析器提供响应的更正版本，但考虑到 XML 的性质，必须有一种方法可以以编程方式执行此操作，因此允许我使用XML-RPC 服务器好像没有这个 bug。

截断的数量只是结束标签的一部分，所以如果有一种内置的方法来获取损坏的 xml 树，在关闭所有标签的情况下转储它，然后改为解析它，它可以让我继续我的工作- 我目前正在考虑自己滚动，但任何帮助将不胜感激，我无法想象我是第一个想要对 xml 执行纠错的人，但如果我找不到解决方案预制我会把我的推到 git 并从这里链接它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:04:09.577

这是一个快速的片段 - 关键是 sax 解析器会在它们通过时生成事件，因此它们允许您处理内容直到它中断的点。

```
#!/usr/bin/env python

import sys
from xml.sax import handler, make_parser

class TagHandler(handler.ContentHandler):
    def __init__(self):
        handler.ContentHandler.__init__(self)

        self.stack = []

    def startElement(self, name, attrs):
        self.stack.append(name)

    def endElement(self, name):
        # TODO: might want to just confirm that the element matches the top of the stack here
        self.stack.pop()

    def finish_document(self):
        return "\n".join(["</%s>" % tag for tag in reversed(self.stack)])

parser = make_parser()
handler = TagHandler()
parser.setContentHandler(handler)

try:
    parser.parse(sys.argv[1])

except:
    # TODO: something more intelligent than just printing out the
    # constructed end of the document. Like appending it to the source
    # and repeating whatever you did to make this processing necessary.
    print handler.finish_document() 
```

# bash - Bash初学者：在创建子目录时尝试复制目录本身时出错

> ID：10604052
> 
> 赞同：1
> 
> 时间：2012-05-15T15:31:26.623
> 
> 标签：bash, subdirectory, copying

*   我有一个目录，里面有 4 个目录。
*   我想创建第 5 个目录（cx1_date）并创建 4 个与原始目录同名的空目录
*   然后我想将两个文件从每个原始目录复制到具有各自名称的新子目录
*   我认为我收到了一个错误，因为它试图复制 PWD 本身（因为这显示为 find 调用的结果），所以我尝试包含一个 if 语句，但我认为它不起作用

    ```
    now=$(date +"%m_%d_%Y")

    PWD="/nmr/charlie"

    mkdir $PWD/cx1_$now

    for name in $(find $PWD -maxdepth 1 -type d); do
    if [[ "$name" = "$PWD" && "$PWD" = "$name" ]];
    then 
        :
    else 
        cd $PWD/cx1_$now
        mkdir $PWD/$name
        cd $PWD/$name 
        cp file1.ext $PWD/cx1_$now/$name
        cp file2.ext $PWD/cx1_$now/$name
    fi 
    done 
    ```

错误的第一行

mkdir：无法创建目录`/nmr/charlie/cx1_05_15_2012//nmr/charlie/cx1_05_15_2012'：没有这样的文件或目录

提前感谢您提供的任何帮助！

查理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:43:57.567

第二个`mkdir`不想要`$PWD`：

```
now=$(date +"%m_%d_%Y")

DIR="/nmr/charlie"

mkdir $DIR/cx1_$now

for name in $(find $DIR -maxdepth 1 -type d)
do
    if [[ "$name" != "$DIR" ]]
    then 
        (cd $DIR/cx1_$now; mkdir $name)
        (cd $DIR/$name 
         cp file1.ext $DIR/cx1_$now/$name
         cp file2.ext $DIR/cx1_$now/$name
        )
    fi
done 
```

另外，PWD 是一个内置变量；你不应该设置它（通过`cd`命令除外）。

您不需要`if`;中的对称测试 您可以使用`!=`而不是`=`避免空`then`子句（好的，它包含一个很好的止痛`:`命令；如果您反转测试，则不需要它）。

我通常将`cd`操作放入子外壳中；这样，我就不会那么困惑了。第二行的替代方法`mkdir`是这样，它不需要`cd`or 子shell：

```
mkdir -p $DIR/cx1_$now/$name 
```

我建议对日期使用 ISO 8601 格式，例如：

```
now=$(date +"%Y_%m_%d") 
```

这样，目录将自动按日期顺序排序。

* * *

> 我仍然收到错误：
> 
> ```
> mkdir: cannot create directory `/nmr/charlie/directory_name_1': File exists
> /home/charlie/Desktop/scripts/test.sh: line 16: cd: /nmr/charlie//nmr/charlie/directory_name_1: No such file or directory 
> ```

问题可能意味着我们还没有正确过滤。例如，每次创建备份目录时，都会将之前的备份目录全部备份到新的目录中，这就有点过分了。所以，练习的另一部分是过滤`find`更好的输出。

...我们应该使用目录的基本名称，我们也可以避免所有`cd`操作：

```
now=$(date +"%m_%d_%Y")

DIR="/nmr/charlie"

mkdir $DIR/cx1_$now

for name in $(find $DIR -maxdepth 1 -type d | grep -v '/cx1_[^/]*$')
do
    if [[ "$name" != "$DIR" ]]
    then
        targetdir=$DIR/cx1_$now/$(basename $name)
        mkdir -p $targetdir
        cp $name/file1.ext $name/file2.ext $targetdir
    fi
done 
```

您确实知道使用“sh -x script.sh”或“bash -x script.sh”来运行脚本并查看它在做什么。我什至不确定我们是否需要从列表中过滤掉任何看起来像备份目录的`if`条件。`grep`

我注意到这仅在目录路径健全且不包含空格的情况下才有效。如果您使用不可移植的文件名（仅使用可移植的名称），事情就会很快出错`[-_.A-Za-z0-9]`。换行符和空格真的很乱。

请注意，如果您在目录下或除其本身`/nmr/backup/charlie`以外的任何地方进行备份，这会更简单。`/nmr/charlie`然而，小心，它可以根据要求在原地完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:47:10.467

您正在使用 $PWD，就好像它意味着“/nmr/charlie”和“/nmr/charlie/cx1_date”。它只意味着第一个。

此外，当您遍历 $PWD 中的文件夹时，它也会包含 cx1_date，因为您已经创建了它，因此您应该检查它。

而且我不建议使用 PWD 作为变量名，因为它可以用于其他用途。

[编辑] 另外， $name 获取目录的完整路径，因此您需要使用 basename 仅获取目录的名称而不获取完整路径。另外，我在 if 行中犯了一个错误，并且在第二次比较中它应该是 != 而不是 = 。对不起，我当时没有外壳来测试。下面的代码现在可以工作了，我已经测试过了。

这应该有效：

```
now=$(date +"%m_%d_%Y")

DIR="/nmr/charlie"

mkdir $DIR/cx1_$now

for name in $(find $DIR -maxdepth 1 -type d)
do
    if [[ "$name" != "$DIR" && "$name" != "$DIR/cx1_$now" ]];
    then 
        targetdir=$(basename $name)
        cd $DIR/cx1_$now
        mkdir $DIR/cx1_$now/$targetdir
        cd $DIR/$targetdir
        cp file1.ext $DIR/cx1_$now/$targetdir
        cp file2.ext $DIR/cx1_$now/$targetdir
    fi 
done 
```

# java - 如果从另一个 JFrame 类调用该类，则无法打开 JFrame

> ID：10604055
> 
> 赞同：1
> 
> 时间：2012-05-15T15:31:34.263
> 
> 标签：java, swing, user-interface, jframe

我正在制作一个`Talisman Game`，到目前为止，我有方法来创建一个`Random Characters`和一个`WIP Main Menu`。现在，如果我从主类调用新游戏（创建角色）方法，一切都很好，但如果我从主手册中调用它，则`JFrame`变得透明并复制它们的背景（比如当窗口卡住时）

新的游戏方法是：

```
public Game(int playerNum) {

    for (int i = 0; i < chars.length; i++)
    chars[i] = false;

    this.playerNum=playerNum;

    players = new Player[playerNum];
    guiChars = new Gui_Chars[playerNum];

    Card.createCards();
    Game.randomChar();
    for (int j = 0; j < playerNum; j++)
        guiChars[j].update();
} 
```

现在，Game,randomChar() 创建角色：

```
public static void randomChar() {
    for (int i = 0; i < playerNum; i++) {
        do {
            chooseChar = rnd.nextInt(14);
        } while (chars[chooseChar]);
        switch (chooseChar) {
            case 0: {
                players[i] = new Char_ASSASIN();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                                + "Assasin", players[i], "Images/assassin.jpg");
                System.out.println("Player " + (i + 1) + " is an Assasin");
                chars[0] = true;
                break;
            }
            case 1: {
                players[i] = new Char_DRUID();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                                    + "Druid", players[i], "Images/druid.jpg");
                System.out.println("Player " + (i + 1) + " is a Druid");
                chars[1] = true;
                break;
            }
            case 2: {
                players[i] = new Char_DWARF();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                                   + "Dwarf", players[i], "Images/dwarf.jpg");
                System.out.println("Player " + (i + 1) + " is a Dwarf");
                chars[2] = true;
                break;
            }
            case 3: {
                players[i] = new Char_ELF();
                guiChars[i] = new Gui_Chars(
                         "Player " + (i + 1) + " - " + "Elf", players[i],
                                                           "Images/elf.jpg");
                System.out.println("Player " + (i + 1) + " is an Elf");
                chars[3] = true;
                break;
            }
            case 4: {
                players[i] = new Char_GHOUL();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                                  + "Ghoul", players[i], "Images/ghoul.jpg");
                System.out.println("Player " + (i + 1) + " is a Ghoul");
                chars[4] = true;
                break;
            }
            case 5: {
                players[i] = new Char_MINSTREL();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                            + "Minesrel", players[i], "Images/minstrel.jpg");
                System.out.println("Player " + (i + 1) + " is a Minstrel");
                chars[5] = true;
                break;
            }
            case 6: {
                players[i] = new Char_MONK();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                                    + "Monk", players[i], "Images/monk.jpg");
                System.out.println("Player " + (i + 1) + " is a Monk");
                chars[6] = true;
                break;
            }
            case 7: {
                players[i] = new Char_PRIEST();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                                + "Priest", players[i], "Images/priest.jpg");
                System.out.println("Player " + (i + 1) + " is a Priest");
                chars[7] = true;
                break;
            }
            case 8: {
                players[i] = new Char_PROPHETESS();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                        + "Prophetess", players[i], "Images/prophetess.jpg");
                System.out.println("Player " + (i + 1) + " is a Prophetess");
                chars[8] = true;
                break;
            }
            case 9: {
                players[i] = new Char_SORCERESS();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                          + "Sorceress", players[i], "Images/sorceress.jpg");
                System.out.println("Player " + (i + 1) + " is a Sorceress");
                chars[9] = true;
                break;
            }
            case 10: {
                players[i] = new Char_THIEF();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                                  + "Thief", players[i], "Images/thief.jpg");
                System.out.println("Player " + (i + 1) + " is a Thief");
                chars[10] = true;
                break;
            }
            case 11: {
                players[i] = new Char_TROLL();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                                  + "Troll", players[i], "Images/troll.jpg");
                System.out.println("Player " + (i + 1) + " is a Troll");
                chars[11] = true;
                break;
            }
            case 12: {
                players[i] = new Char_WARRIOR();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                              + "Warrior", players[i], "Images/warrior.jpg");
                System.out.println("Player " + (i + 1) + " is a Warrior");
                chars[12] = true;
                break;
            }
            case 13: {
                players[i] = new Char_WIZARD();
                guiChars[i] = new Gui_Chars("Player " + (i + 1) + " - "
                                + "Wizard", players[i], "Images/wizard.jpg");
                System.out.println("Player " + (i + 1) + " is a Wizard");
                chars[13] = true;
                break;
            }
        }
    }
} 
```

Characters 调用 GUI（从`Characters`类中接收信息，但那肯定不是问题）：

```
public Gui_Chars(String character,Player player,String path) {

    super(character);
    setVisible(true);
    setSize(430, 420);

    setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
    revalidate();
} 
```

我删除了代码的不重要部分，没有它也会发生问题......最后，这是`MainMenu`：

```
public class MainMenu extends JFrame implements ActionListener {

    private static final long serialVersionUID = 1L;
    JLabel num;
    JButton add, sub, start;
    private int i = 2;
    JFrame j ;
    Game game;

    JLayeredPane jp1,jp2,jp3;

    public MainMenu() {

        j= new JFrame("Talisman");
        j.setVisible(true);
        j.setSize(300, 300);
        j.setDefaultCloseOperation(EXIT_ON_CLOSE);

        jp1 = new JLayeredPane();
        jp2 = new JLayeredPane();
        jp3 = new JLayeredPane();   

        JPanel playerNum = new JPanel(new GridBagLayout());
        JPanel startPanel = new JPanel(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.insets = new Insets(30, 30, 30, 30);

        add = new JButton("+1");
        sub = new JButton("-1");
        start = new JButton("Start");

        start.setPreferredSize(new Dimension(100, 100));

        num = new JLabel("" + i);
        num.setFont(new Font("Serif", Font.BOLD, 40));

        gbc.gridy = 0;
        playerNum.add(add, gbc);
        add.addActionListener(this);
        add.setActionCommand("add");

        gbc.gridy = 1;
        playerNum.add(num, gbc);

        gbc.gridy = 2;
        playerNum.add(sub, gbc);
        sub.addActionListener(this);
        sub.setActionCommand("sub");

        startPanel.add(start, gbc);
        start.addActionListener(this);
        start.setActionCommand("start");

        jp1.add(new ContentPanel());
        jp2.add(playerNum);
        jp3.add(startPanel);

        jp1.setLayer(new ContentPanel(), 1);
        jp2.setLayer(playerNum, 2);
        jp3.setLayer(startPanel, 2);

        j.add(playerNum, BorderLayout.WEST);
        j.add(startPanel, BorderLayout.EAST);

    }

    @Override
    public void actionPerformed(ActionEvent e) {
        String act = e.getActionCommand();

        if (act.equals("start")) {
            j.setVisible(false);
            j.dispose();
            game = new Game(i);
            game.startGame();

            //JFrame j = new JFrame();
            //j.setVisible(true);
            //j.setSize(300, 300);
        }
    }
} 
```

对于长代码，我感到非常抱歉，但我试图在调试中坐在上面几个小时，却找不到问题。如果有人能帮助我了解正在发生的事情，我将非常感激......再次感谢，并对长代码感到抱歉......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:20:15.487

通过查看您的代码，它向我表明您不了解 Swings 绘制子系统。

最重要的一点是，永远不要在 Swing 的事件调度事件 (ETD) 中执行任何长的或阻塞的操作。

当您在 Main 中调用它时它起作用的原因实际上是侥幸。Java 不保证哪个线程将执行 Main 方法。你很幸运，这不是 ETD。启动 Swing 应用程序时，您必须始终执行以下操作

```
EventQueue.invokeLater(new Runnable() {
    public void run() {
        // Your launch code here
    }
} 
```

显然，只在其中包含与 UI 相关的代码。

它现在不起作用的原因是您正在从您的动作侦听器中执行一段阻塞代码，这会阻止 ETD 更新屏幕。

```
for (int i = 0; i < chars.length; i++)
    chars[i] = false;

.
.
.

public static void randomChar() {
    for (int i = 0; i < playerNum; i++) {
        do {
            chooseChar = rnd.nextInt(14);
        } while (chars[chooseChar]); // This is never true... 
```

哪个被称为

```
game = new Game(i); 
```

您将希望更改您的游戏模型以允许从除 ETD 之外的线程上下文调用“randomChar”方法。我建议（为方便起见），像 SwingWoker （[http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)）

从您的代码示例中，我看不到“chars [x]”在哪里设置为真......

事实上，您可能想阅读整个[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程......

# c# - 用于处理 HyperTable 的 C# 库

> ID：10604058
> 
> 赞同：1
> 
> 时间：2012-05-15T15:31:49.820
> 
> 标签：c#, asp.net, database, nosql, hypertable

我正在寻找允许我连接到 Hypertable DB 的连接器/库。我已经在我的 Windows 机器上安装了 Hypertable，但我不知道如何连接到它。我在 Visual Studio 中使用 ASP.NET 4.5 C#。

我试过这个： [http ://ht4n.softdev.ch/index.php/getting-started-in-5min](http://ht4n.softdev.ch/index.php/getting-started-in-5min)

但我不知道如何使用它。将 ht4d.dll 导入到“bin”文件夹，但不知道我还能做什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-27T10:30:50.633

ht4n这里
的死灵很烦人。

首先，它属于 GNU 通用公共许可证 v3（不是 LGPL）和商业闭源许可证。基本上，仅此而已。

然后它是用 C++.NET 编写的，它虽然比 Thrift 快，但在 Windows 上创建了平台依赖（mono 不支持 C++.NET）。
而且因为它是用 C++.NET 编写的，所以它带有那些独立的 32/64 位 dll 版本，这些版本只能在 Windows 上的 x86 (32/64) 处理器上运行。
如果你想要一个而不是另一个，你必须重新编译......
这两个问题结合在一起，这不仅是愚蠢的商业许可证围攻，它还破坏了像 .NET 这样的 VM 语言的想法。

由于我的 Chrubuntu Chromebook 使用 Linux（带有 ARM 处理器）并且 C++.NET 在那里无法工作，因此我将 Java Thrift-Client 移植到了 C#。

你可以找到它>[这里](https://github.com/ststeiger/HyperTableSharp/tree/master)<。
附带一个很好的示例程序顺便说一句。

基本上

```
ThriftClient client = null;
long ns = -1;

try
{
    client = ThriftClient.create("localhost", 38080);

    if (!client.namespace_exists("test"))
    {
        System.Console.WriteLine("Namespace test does not exist");
        client.create_namespace("test");
    }

    ns = client.namespace_open("test");

    System.Console.WriteLine(client.hql_query(ns, "show tables").ToString());

    client.namespace_close(ns);
} // End Try
catch (System.Exception e)
{
    System.Console.WriteLine (e.Message);
    System.Console.Error.WriteLine (e.StackTrace);

    try
    {
        if (client != null && ns != -1)
            client.namespace_close(ns);
    } 
    catch (System.Exception ex)
    {
        System.Console.WriteLine (ex.Message);
        System.Console.Error.WriteLine("Problem closing namespace \"test\" - " + e.Message);
    }
    System.Environment.Exit(1);
} // End Catch 
```

Thrift-Client 可以在任何地方工作，具有任意数量的位。
而且 - 最重要的是 - 从现在开始，您可以使用所有 Java Thrift-samples/tutorials 并进行最少的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T20:02:07.697

首先确保安装成功。确保您有一个 PATH 系统环境变量指向我系统上的超表安装文件夹位于：

```
 C:\Program Files\Hypertable 
```

之后从 cmd 尝试命令“hypertable”，您需要获得一个超表欢迎消息。

我还下载了 ht4n 连接器并创建了一个控制台应用程序进行测试我创建了对 ht4n.dll 的引用

这是我使用的代码，它已成功连接：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Hypertable;

namespace HypertableTest1
{
class Program
{
    static void Main(string[] args)
    {

        //Hyper net.tcp://host[:port]   Native Hypertable client protocol
        //Thrift    net.tcp://host[:port]   Hypertable Thrift API
        //SQLite    file://[drive][/path]/filename  Embedded key-value store, based on SQLite
        //Hamster   file://[drive][/path]/filename  Embedded key-value store, based on hamsterdb

        var connectionString = "Provider=Hyper;Uri=net.tcp://localhost";

        using (var context = Context.Create(connectionString))
        using (var client = context.CreateClient())
        {
            // use the client
            //client.CreateNamespace("CSharp");

            if (!client.NamespaceExists("/CSharp"))
                client.CreateNamespace("/CSharp");

            INamespace csNamespace = client.OpenNamespace("CSharp");    
            csNamespace.CreateTable("MyFirstTable", "");
            IList<Cell> c = csNamespace.Query("");
        }

        Console.ReadLine();
    }
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T19:37:40.923

Hypertable exposes the high-level API through an Apache Thrift service stack, therefore client libaries can be generated for many different languages - including C#:

*   Download Apache Thrift, including the thrift compiler
*   Download the Hypertable IDL files *Client.thrift* and *Hql.thrift* from [here](https://github.com/andysoftdev/ht4w/tree/windows/src/cc/ThriftBroker)
*   Run the thrift compiler *thrift-0.9.2 --gen csharp Client.thrift Hql.thrift*
*   Pack all together

For the Hypertable *serialized* API you'll need a SerializedCellReader/SerializedCellWriter, everything together is available for download [here](http://ht4w.softdev.ch/index.php/downloads).

# c# - 如何通过代码滚动面板？

> ID：10604061
> 
> 赞同：1
> 
> 时间：2012-05-15T15:32:13.527
> 
> 标签：c#, winforms, visual-studio-2008

我有一个面板，我希望在代码中水平滚动，问题是它似乎只在每第二次执行代码行时滚动一次。这就是我使用的

```
 private void MyScrollButton_Click(object sender, EventArgs e)
 {
    MainPanel.HorizontalScroll.Value += 64;
 } 
```

每次都是这样，

```
1st Click: Panel Scrolls and ScrollBar Remains Still
2nd Click: Panel remains still and ScrollBar scrolls
3rd Click: Same as 1st
4th Click: Same as 2nd 
```

.... ... 重复

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:39:31.470

尝试使用`AutoScrollPosition`代替（并且您需要反转该值）：

```
private void MyScrollButton_Click(object sender, EventArgs e) {
  MainPanel.AutoScrollPosition = new Point(-MainPanel.AutoScrollPosition.X + 64,
                                           -MainPanel.AutoScrollPosition.Y);
} 
```

# hyper-v - hyper-v ，虚拟机无法访问互联网

> ID：10604062
> 
> 赞同：4
> 
> 时间：2012-05-15T15:32:14.760
> 
> 标签：hyper-v

我有一个带有 2 个 NIC 但只有一个 IP 地址的 Windows Server 2008 R2，我已经安装了 Hyper-V。在 Hyper-V 内部，我创建了 2 个虚拟机。

我设置了一个外部虚拟网络并选择了绑定到 IP 地址的 NIC。我还选中了允许它共享该端口以进行 Internet 访问的框。

物理服务器运行良好，可以访问互联网等。但是，两个虚拟机都无法访问互联网。

我还缺少其他设置吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-06T05:29:46.477

Windows Server 2012 R2 作为您的 Hyper-V 主计算机会询问您是否要绑定到以太网，它运行良好。

Windows 10 ，您转到“虚拟交换机管理器”，单击左侧的机器名称，然后“大多数”人说要添加“外部”虚拟交换机，（创建虚拟交换机）但我看到有人说要使用内部的。

个人使用 Windows 8 年前我没有任何问题，最近我失去了我的主机互联网，取消选中/选中

```
Allow Management operating system to share this network adapter 
```

总的来说，你应该没有太大的问题。然后，您将要在虚拟机设置中使用适配器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T20:32:48.653

每个虚拟机都需要有一个连接到外部虚拟网络的虚拟网络适配器。对于每个 VM，检查`Settings > Hardware > Network Adapter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-25T21:59:52.050

`Network Reset`我在 Windows 10 中修复了我的 VM 连接问题。

参考：[https ://kb.wisc.edu/helpdesk/page.php?id=70821](https://kb.wisc.edu/helpdesk/page.php?id=70821)

# excel - 使用 Excel VBA 复制部分行

> ID：10604063
> 
> 赞同：0
> 
> 时间：2012-05-15T15:32:17.510
> 
> 标签：excel, vba

我有一些从其他地方导入的数据。如您所见，工作表可以主要通过将 F 和 G 中的数据向上移动一行来解决，问题出现在我需要在第 10 到 13 行的地方，这将是在数据向上移动之后，一个将是 10 到 12 .我需要将9到单元格A到D上的数据复制到F行的末尾。然后继续向下并执行相同的操作，如果任何其他行有相同的“问题”...

我希望我很清楚，如果不是请问，但是有人可以在这里帮助我吗？我考虑过使用直到最后副本的概念，但我可以看到它不起作用，因为并非所有单元都需要它......它只需要在机会出现时发生。

附上表格的链接，希望能澄清问题。

[在此处链接到工作簿](http://dl.dropbox.com/u/3327208/Excel/Imported.xlsx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:10:54.353

我刚刚用您提供的数据测试了这段代码。根据工作表中的数据，应该很好。当然，如果数据范围发生变化，可能需要稍作调整。

```
Sub clean_data()

Dim wks As Worksheet
Dim cel As Range

Set wks = ThisWorkbook.Sheets("Imported Data")

With wks

    'first bring columns F:G up to match their line
    For Each cel In Intersect(.UsedRange, .UsedRange.Offset(1), .Columns(6))

        If cel = vbNullString And cel.Offset(, -2) <> vbNullString Then
            .Range(cel.Offset(1), cel.Offset(1, 1)).Copy cel
            cel.Offset(1).EntireRow.Delete
        End If

    Next

    'now fil columns A:D to match PO Date and PO#
    For Each cel In Intersect(.UsedRange, .UsedRange.Offset(1), .Columns(1))

        If cel = vbNullString And cel.Offset(, 5) <> vbNullString Then
            .Range(cel.Offset(-1), cel.Offset(-1, 3)).Copy cel
        End If

    Next

End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:12:59.617

我认为这会做你想要的：

```
Sub CleanUpImport()
    Dim LastCleanUpRow as Long
    Dim FirstSORow as Long
    Dim LastSORow
    Dim TitleRow As Long
    Dim ws As Worksheet

    Set ws = ThisWorkbook.Sheets(ActiveSheet.Name)
    LastCleanUpRow = ws.Range("F" & ws.Rows.Count).End(xlUp).Row
    TitleRow = 1
    If Range("A1").Value = "" Then
        TitleRow = Range("A1").End(xlDown).Row
    End If

    ' Delete cells to line up columns F and G
    If Range("F3").Value = "" And Range("G3").Value = "" Then
        Range("F3:G3").Delete Shift:=xlUp
    End If

    ' Set rows for first SO
    LastSORow = LastCleanUpRow
    FirstSORow = LastSORow
    If Range("F" & LastSORow).Offset(-1).Value <> "" Then
        FirstSORow = Range("F" & LastCleanUpRow).End(xlUp).Row
    End If

    ' Copy SO header to any SOs that have multiple POs
    Do Until FirstSORow = TitleRow

        Range("A" & FirstSORow & ":D" & FirstSORow).Copy Range("A" & FirstSORow & ":D" & LastSORow)
        LastSORow = Range("F" & FirstSORow).End(xlUp).Row
        FirstSORow = LastSORow
        If Range("F" & LastSORow).Offset(-1).Value <> "" Then
            FirstSORow = Range("F" & LastSORow).End(xlUp).Row
            If FirstSORow = TitleRow Then FirstSORow = FirstSORow + 1
        End If
    Loop

End Sub 
```

# javascript - 如何在 JavaScript 中替换字符串中的多个 '+' 实例？

> ID：10604065
> 
> 赞同：2
> 
> 时间：2012-05-15T15:32:19.123
> 
> 标签：javascript, regex, string, replace

我有一个需要操作的 URL。我似乎无法用空格替换查询字符串中的所有“+”。

```
var url = window.location.replace(/+/g, ' '); 
```

我在这里做错了什么？

或者有没有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:34:36.450

[`replace()`是一种方法`window.location`](https://developer.mozilla.org/en/DOM/window.location#Methods)，但它不是[你想的那种](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)。你想打电话`replace()`。[`location.href`](https://developer.mozilla.org/en/DOM/window.location#Properties)

```
var url = window.location.href.replace(/\+/g, ' '); 
```

正如[Vega 回答](https://stackoverflow.com/a/10604092/139010)`+`的那样，请注意，由于它[作为量词的特殊含义](http://www.regular-expressions.info/reference.html)，您还需要转义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T15:33:38.537

你需要逃避`+`. `+`在正则表达式中有特殊含义。

```
var url = window.location.href.replace(/\+/g, ' '); 
```

**编辑：**更改为`.href`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:18:15.690

如果您不需要运行它数千次，还有另一种选择。

```
var url = window.location.href.split('+').join(' '); 
```

我提到它运行频率的原因是这将比 Firefox 中的正则表达式慢一点，根据这里的测试，在 chrome 中会慢一点，在 Opera 中会更快：http: [//jsperf.com/regex-vs -拆分加入](http://jsperf.com/regex-vs-split-join)

因此，对于简单的 URL 更改，使用该语法应该没问题。

# python - python isdigit() 函数对非数字字符 u'\u2466' 返回 true

> ID：10604074
> 
> 赞同：10
> 
> 时间：2012-05-15T15:32:38.960
> 
> 标签：python, unicode, digit

我遇到了一个处理 python isdigit 函数的奇怪问题。

例如：

```
>>> a = u'\u2466'
>>> a.isdigit()
Out[1]: True
>>> a.isnumeric()
Out[2]: True 
```

为什么这个字符是数字？

有什么方法可以让这个返回 False，谢谢？

* * *

编辑，如果我不想将其视为数字，那么如何将其过滤掉？

例如，当我尝试将其转换为 int 时：

```
>>> int(u'\u2466') 
```

然后`UnicodeEncodeError`发生了。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-15T15:33:56.247

U+2466 是带圆圈的[数字七](http://www.fileformat.info/info/unicode/char/2466/index.htm)(⑦)，所以是的，它是一个数字。

如果您对数字的定义与[Unicode Consortium](http://unicode.org/)的定义不同，您可能必须编写自己的`isdigit()`方法。

> 编辑，如果我不想将其视为数字，那么如何将其过滤掉？

如果您只对 ASCII 数字`0`...感兴趣`9`，您可以执行以下操作：

```
In [4]: s = u'abc 12434 \u2466 5 def'

In [5]: u''.join(c for c in s if '0' <= c <= '9')
Out[5]: u'124345' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-15T15:41:49.560

如果您要将某些内容转换为`int`您需要的内容[`isdecimal`](http://docs.python.org/library/stdtypes.html#unicode.isdecimal)，而不是`isdigit`.

请注意，“十进制”不仅仅是 0、1、2、... 9，还有[许多字符](http://www.fileformat.info/info/unicode/category/Nd/list.htm)可以解释为十进制数字并转换为整数。例子：

```
#coding=utf8

s = u"1٢٣٤5"
print s.isdecimal() # True
print int(s) # 12345 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T15:34:42.953

字符是`CIRCLED DIGIT SEVEN`，它是数字和数字。

如果要将数字限制为通常的 0-9，请使用正则表达式：

```
import re

def myIsDigit(s):
  return re.search("[^0-9]", s) is None 
```

# jquery - 访问文本 标签

> ID：10604075
> 
> 赞同：1
> 
> 时间：2012-05-15T15:32:40.883
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我有一个`<li>`使用 jQuerys 拖放来拖动的项目列表。我想在`<li>`删除项目时抓取标签中的文本，将文本附加到全局变量，以便可以将选定的值提交给 servlet。

要在删除项目时处理功能，我可以使用下面的 jQuery 回调：

```
stop: function(event, ui) { 
    //update variable here
} 
```

如何获取`<li>`标签中的文本值并将其附加到全局变量？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:36:08.837

您可以`ui.draggable.text()`在`drop`droppable 的情况下使用。

```
drop: function(event, ui) { 
    myVar += ui.draggable.text();
} 
```

或者`ui.helper.text()`在`stop`可拖动的情况下。

```
stop: function(event, ui) { 
    myVar += ui.helper.text();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:39:22.260

您可以从`ui.helper`代表拖动对象中获取文本：

```
$( "#draggable" ).draggable({
  stop: function( event, ui ){
    globalVar =  ui.helper.text(); 
  }
}); 
```

`ui.helper`也可以使用`droppable`。

# android - 使用 PhoneGap 插件：子浏览器

> ID：10604078
> 
> 赞同：1
> 
> 时间：2012-05-15T15:32:54.750
> 
> 标签：android, cordova, plugins, phonegap-plugins, childbrowser

我正在尝试使用 Phonegap 插件，但遇到了麻烦。这是我第一次使用带有 Phonegap 的插件。

我使用的插件是[ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser) for Android。

我已经在标题中链接了 Javascript 文件。

```
<script src="cordova-1.7.0.js" type="text/javascript"></script>
<script src="childbrowser.js" type="text/javascript"></script> 
```

[还遵循了Github 页面](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)上列出的步骤 2、3 和 4 。

我尝试在链接中使用 ChildBrowser 插件：

```
<a href="#" onClick="window.plugins.childBrowser.openExternal("http://www.google.com");">Test</a> 
```

单击链接时，没有任何反应。

有什么我想念的吗？我是否必须在标题中添加一些代码来初始化子浏览器插件？

***[应用程序压缩文件。](http://dl.dropbox.com/u/32351813/app.zip)***

*Logcat 返回*

```
D/CordovaLog(  885): Error: Status=2 Message=Class not found
D/CordovaLog(  885): file:///android_asset/www/cordova-1.7.0.js: Line 958 : Error: Status=2 Message=Class not found
I/Web Console(  885): Error: Status=2 Message=Class not found at file:///android_asset/www/cordova-1.7.0.js:958 
```

* * *

*编辑：根据我对网络的研究，当插件没有从 plugins.XML 文件中正确引用时，我得到的错误最常触发。我已经仔细检查并确保它是正确的。

我想知道 src 文件夹位置是否不正确。我的项目根目录中有 src 文件夹，其中还包含我的 index.html、css 和 javascript。我注意到一些构建 Phonegap 应用程序的人有一个名为的文件夹`www`，其中包含 index.html，而不是仅将其包含在项目的根目录中。*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-26T09:59:07.533

在 PhoneGap 2.0 版中，您必须将以下行添加到 res/xml/config.xml 而不是 res/xml/plugins.xml：

```
<plugin name="ChildBrowser" value="com.phonegap.plugins.childBrowser.ChildBrowser"/> 
```

不确定这是否适用于 PhoneGap 1.7 版。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:42:56.040

看起来 onClick 属性的值格式不正确，您不能将“”用于另一个“””中的字符串，即它应该如下所示：

```
<a href="#" onClick="window.plugins.childBrowser.openExternal('http://www.google.com');">Test</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T08:13:52.053

不知道你有没有解决问题。我遇到了同样的问题，经过一番研究，我发现我必须在`AndroidManifest.xml`文件中添加这些行：

```
<activity android:name="com.phonegap.plugins.childBrowser.ChildBrowser" android:label="@string/app_name">
   <intent-filter>
   </intent-filter>
</activity> 
```

虽然这在自述文件中没有提到......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T17:26:17.667

看起来您使用的是旧版本的 ChildBrowser。您应该从 github 获取最新的 ChildBrowser 代码，因为它会使用 cordova 更新对 PhoneGap 的引用。

除此之外，当您单击链接时，您在“adb logcat”中看到了什么？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-24T03:51:45.693

我认为您的文件夹结构错误。您使用的是哪个版本的 Phonegap？结构应该是：

```
Main Folder
  - assets
    - www
     - index.html
     - childbrowser.js
     - etc
    - libs
    - res
    - src
      - com
        - phonegap
          - plugin(s)
            - childbrowser 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T04:54:41.897

在子 browser.js 文件中，在函数 childbrowser() 上方添加以下代码

（功能（） {

var cordovaRef = window.PhoneGap || 窗口.Cordova || window.cordova; 最后关闭该功能。

# android - 同时显示两个活动（一个较小），较大的不听手指事件

> ID：10604080
> 
> 赞同：1
> 
> 时间：2012-05-15T15:32:59.833
> 
> 标签：android, android-activity

我正在展示两项活动，一项活动比另一项活动大。我正在这样做：http: [//iserveandroid.blogspot.com.es/2010/10/how-to-set-heightwidth-for-activity-or.html](http://iserveandroid.blogspot.com.es/2010/10/how-to-set-heightwidth-for-activity-or.html)

**我没有使用片段，我没有使用标签。**

较大的活动有一些按钮，较小的活动也有一些按钮。

较大的活动启动较小的活动，然后，较大的活动停止侦听手指事件（触摸屏幕）。

有可能解决这个问题吗？

我需要这两个活动可以监听触摸事件。

谢谢

编辑：也许这可以用splitTouch标志解决，但它只兼容Android 3.0，我至少需要在android 2.2上做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:55:12.100

解决了 ：）

我可以将此代码添加到活动中

```
this.getWindow().addFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL); 
```

并将此代码放入清单上的活动声明中：

```
android:theme="@android:style/Theme.Translucent.NoTitleBar" 
```

非常简单但很难找到且未记录的解决方案

啊，从 API 1 开始就兼容了！！

# php - mysql数据库中的数据通过php输入到文本字段？

> ID：10604082
> 
> 赞同：0
> 
> 时间：2012-05-15T15:33:02.960
> 
> 标签：php, mysql

我创建了一个数据库，其中包含一个名为**pages**的表。

在该表中，有名为**pages_id**、**pagename**、**pagedesc**、**pagekey**和**pagecont**的字段。

如何将数据库中这些字段的数据提取到可编辑的文本字段中？我在下面尝试过，但我的代码不起作用:(

```
<?php
// Make a MySQL Connection
mysql_connect("####", "####", "####") or die(mysql_error());
mysql_select_db("####") or die(mysql_error());

// Get all the data from the "example" table
$result = mysql_query("SELECT * FROM pages") 
or die(mysql_error());  

?>
<p>Page title</p><br />
<?php echo"<input name=\"pagename\" type=\"text\" id=\"pagename\" value=\"" .$pagename. "\">"; ?>

<p>Keywords</p><br />
  <?php echo"<input name=\"pagekey\" type=\"text\" id=\"pagekey\" value=\"" .$pagekey. "\">"; ?>

<p>Description</p><br />
<?php echo"<input name=\"pagedesc\" type=\"text\" id=\"pagedesc\" value=\"" .$pagedesc. "\">"; ?>

<p>Content</p><br />
<?php echo "<textarea name=\"pagecont\" cols=\"120\" rows=\"20\" id=\"pagecont\" >".$pagecont."</textarea>";?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:43:10.330

您尚未从查询结果中提取一行，并且正在输出未定义的变量。正确的顺序应该是：

```
$result = mysql_query($sql) or die(mysql_error()); // run the query
$row = mysql_fetch_assoc($row); // fetch a result row

echo $row['name_of_field']; // output one of the result row's data fields. 
```

另请注意，当您按原样将数据输出到 HTML 表单中时，您必须确保您输出的数据中的任何内容都不会“破坏”表单。例如，如果输出文本包含 a `"`，并且您在表单字段的属性周围使用了这些引号，那么您将“破坏”html。输出到 html 的最佳做法是使用：

```
<input type="text" name="somefield" value="<?php echo htmlspecialchars($row['name_of_field']) ?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:39:32.937

希望您知道如何连接到 MySQL。我包括一个虚拟连接仅供参考。

```
<?php   
    //Open connection

    $qry="SELECT * FROM <table>";
    $result=mysql_query($qry);

    while($row = mysql_fetch_array($result))
    {
       $variable = $row["column_name"];
    }
?> 
```

的HTML：

```
<input type="text" id="test" value="<?=$variable?>"> 
```

如果您试图获得特定结果，请考虑`WHERE`在 SQL 语句中使用子句。有关更多信息，请参见此处：[W3Schools](http://w3schools.com/sql/sql_where.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:39:45.760

```
<?php
// Make a MySQL Connection
mysql_connect("####", "####", "####") or die(mysql_error());
mysql_select_db("####") or die(mysql_error());

// Get all the data from the "example" table
$result = mysql_query("SELECT * FROM pages") or die(mysql_error());

$result = mysql_fetch_array($result, MYSQL_ASSOC);

foreach($result as $page): ?>

    <p>Page title</p><br />
    <input name="pagename" type="text" id="pagename" value="<?= $page['pagename']; ?>">

    <p>Keywords</p><br />
    <input name="pagekey" type="text" id="pagekey" value="<?= $page['pagekey']; ?>">

    <p>Description</p><br />
    <input name="pagedesc" type="text" id="pagedesc" value="<?= $page['pagedesc']; ?>">

    <p>Content</p><br />
    <textarea name="pagecont" cols="120" rows="20" id="pagecont" ><?= $page['pagecont']; ?></textarea>
    <hr />

<?php endforeach; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T15:40:38.237

您正在运行查询，但没有从中获取结果。试试这个：

```
$fields = mysql_fetch_assoc($result); 
```

然后你可以参考查询的结果`$fields['pagename']`等等。

[文档在这里](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)。一般来说，您可能想查看 mysql 模块的文档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T15:49:08.313

使用您拥有的表单，您可以一次编辑一 (1) 行。因此，您需要 2 页。第 1 页列出表中的所有页面，其中包含指向编辑页面的超链接，将 pagekey 作为 GET 参数传递，第 2 页是您的编辑页面，它接收页面 ID 作为 GET 参数。

第 2 页 URL 可以是：

> [http://domain.com/editpage.php?pagekey=abc](http://domain.com/editpage.php?pagekey=abc)

它的代码如下：

```
<?php
// Make a MySQL Connection
mysql_connect("####", "####", "####") or die(mysql_error());
mysql_select_db("####") or die(mysql_error());

$key = $_GET['pagekey'];

// Get all the data from the "example" table
$result = mysql_query("SELECT * FROM pages where pagekey = $key")
    or die(mysql_error());  

$row = mysql_fetch_assoc($result);

?>
<p>Page title</p><br />
<?php echo"<input name=\"pagename\" type=\"text\" id=\"pagename\" value=\"" .$row['pagename']. "\">"; ?>

<p>Keywords</p><br />
  <?php echo"<input name=\"pagekey\" type=\"text\" id=\"pagekey\" value=\"" .$row['pagekey']. "\">"; ?>

<p>Description</p><br />
<?php echo"<input name=\"pagedesc\" type=\"text\" id=\"pagedesc\" value=\"" .$row['pagedesc']. "\">"; ?>

<p>Content</p><br />
<?php echo "<textarea name=\"pagecont\" cols=\"120\" rows=\"20\" id=\"pagecont\" >".$row['pagecont']."</textarea>";?> 
```

上面的代码是非常基本的，但可以满足您目前在可编辑输入框中显示行内容的要求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T15:51:33.160

我创建了这个函数，它将用于从列中检索所有数据：

```
 function page_data($fieldname){

              $result = mysql_query("SELECT ".$fieldname." FROM pages");

              while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
                  $arrdata[] =  $row[$fieldname];
              }

              return $arrdata;   
          } 
```

从列为“pagename”的 pages 表中检索所有数据

```
 $pagename=array();
    $pagename=page_data('pagename');
    $numpages=count($pagename)-1; 
```

对于 pagename 中的每个值，将值回显到文本框中

```
 for($i=0; $i <= $numpages; $i++){
    echo '<input name="pagename" type="text" value=".$pagename[$i]."/>';
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-25T05:53:15.153

```
<?php
  // Make a MySQL Connection
  mysql_connect("####", "####", "####") or die(mysql_error());
  mysql_select_db("####") or die(mysql_error());

  // Get all the data from the "example" table
  $result = mysql_query("SELECT * FROM pages") or die(mysql_error());
  while($row = mysql_fetch_array($result))
  {
?>

  <p>Page title</p><br />
  <input name="pagename" type="text" id="pagename" value="<?php echo $row['pagename']; ?>">
  <p>Keywords</p><br />
  <input name="pagekey" type="text" id="pagekey" value="<?php echo $row['pagekey']; ?>">
  <p>Description</p><br />
  <input name="pagedesc" type="text" id="pagedesc" value="<?php echo $row['pagedesc']; ?>">
  <p>Content</p><br />
  <textarea name="pagecont" cols="120" rows="20" id="pagecont"><?php echo $row['pagecont']; ?></textarea>

<?php
  }
?> 
```

# c# - 阻止直接访问但允许从页面内下载文件

> ID：10604083
> 
> 赞同：3
> 
> 时间：2012-05-15T15:33:04.760
> 
> 标签：c#, asp.net, iis, permissions, download

我正在开发一个网站，上面有一些文件，如果用户按照我的条件有足够的访问权限，我只想下载这些文件。

基本上，我的页面上有一个下载链接，但只有当用户具有正确的角色并且与我的数据库中的正确属性相关联时，才会显示和激活下载链接。

我面临的问题是我不希望用户能够直接访问该文件，例如，如果他们访问 www.mysite.com/downloads/myfile.pdf - 我不希望他们能够获取文件，尽管我确实希望他们能够在他们登录后下载它，并且我已经检查过他们是否符合我的自定义规则和规定。

我打算这样做，但我相信禁用权限后我将无法这样做。

```
System.IO.FileInfo file = new System.IO.FileInfo(path);
Response.Clear();
Response.AddHeader("Content-Disposition", "attachment; filename=" + file.Name);
Response.AddHeader("Content-Length", file.Length.ToString());
Response.ContentType = "application/octet-stream";
Response.WriteFile(file.FullName);
Response.End(); 
```

有可能实现我的目标吗？希望我已经充分解释了自己。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:38:48.533

我相信你在正确的方式。

这是一个简单的例子：

```
Response.ContentType = "text/txt";
Response.AppendHeader("Content-Disposition", "attachment; filename=" + "file.txt");
Response.Write(file.ToString());
Response.End(); 
```

---- EDIT ---- 还有其他很好的示例：

[http://www.dotnetscraps.com/dotnetscraps/post/4-ways-to-send-a-PDF-file-to-the-IE-Client-in-ASPNET-20.aspx](http://www.dotnetscraps.com/dotnetscraps/post/4-ways-to-send-a-PDF-file-to-the-IE-Client-in-ASPNET-20.aspx)

```
<%@ Page Language="C#" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<script runat="server">
    protected void Button1_Click(object sender, EventArgs e)
    {
        Response.ContentType = "application/pdf";
        Response.Clear();
        Response.TransmitFile("UML.pdf");
        Response.End();
    }
</script>
<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1" runat="server">
    <title>Way 1</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Send PDF" /><br />
        <br />
        This page will refresh itself with a PDF file opened in the same instance of IE itself. 
        Users will not get prompted to Save/Open/Cancel the PDF file.</div>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:39:01.123

是的——我在一个大型应用程序中使用 HTTP 模块做了同样的事情。看

*   [http://msdn.microsoft.com/en-us/magazine/cc301362.aspx](http://msdn.microsoft.com/en-us/magazine/cc301362.aspx)
*   [http://www.codeproject.com/Articles/18887/Role-of-HTTP-Modules-in-NET-Security](http://www.codeproject.com/Articles/18887/Role-of-HTTP-Modules-in-NET-Security)

它通过将下载文件放入一个单独的目录（在您的示例中为“下载”目录）来工作，该目录可以作为具有自己的 web.config 的应用程序运行。注册一个 HTTP 模块以在该目录上运行将导致所有传入请求通过一些代码模块，您可以在其中检查适当的权限并防止未经授权的访问。该模块充当守门人机制，即使它们绕过您的 Web 应用程序，也可以强制执行您的安全性。

来自微软的一篇文章：

> “HTTP 模块的典型用途包括：安全性。因为您可以检查传入的请求，所以您的 HTTP 模块可以在调用请求的页面、XML Web 服务或处理程序之前执行自定义身份验证或其他安全检查。”

这种方法的好处是您可以完全控制。您可以将未经授权的请求重定向到某个网页以优雅地处理事情，您可以对尝试进行自定义日志记录并执行各种其他操作。所以这是一个非常灵活、可定制的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:50:21.380

如果您允许匿名用户是访客并且 ASP.NET 在它自己的权限下运行。此页面标识最低权限。因此 ASP.NET 可以访问该文件并将其服务器化。我所做的是有一个页面通过文件 ID 并返回文件。但我用

```
Response.TransmitFile(filePath); 
```

[ASP权限](http://support.microsoft.com/kb/815153)

# ios - iOS 动画视图，包括子视图

> ID：10604085
> 
> 赞同：6
> 
> 时间：2012-05-15T15:33:12.780
> 
> 标签：ios, xcode, animation, uiview

我正在尝试制作一个动画来折叠包含一些子视图的视图。

```
[UIView beginAnimations:@"advancedAnimations" context:nil];
[UIView setAnimationDuration:3.0];

CGRect aFrame = aView.frame;
aView.size.height = 0;
aView.frame = aFrame;

[UIView commitAnimations]; 
```

此动画效果很好，但仅适用于 aView。子视图没有按预期折叠。如何使子视图也折叠？此外，有没有办法在折叠后重新计算原始大小？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:06:38.577

您可能忘记对子视图应用一些自动调整大小的掩码。如果你这样做

```
for (UIView *subview in aView.subviews) {
    subview.autoresizingMask = (UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleTopMargin);
} 
```

它应该工作。

但是，正如lamelas所说，我个人会使用

```
aView.transform = CGAffineTransformMakeScale(1.0,0.0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T15:40:12.190

尝试使用它来制作动画：

```
aView.transform = CGAffineTransformMakeScale(1.0,0.0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:42:13.840

有根据的猜测：

```
[UIView beginAnimations:@"advancedAnimations" context:nil];
[UIView setAnimationDuration:3.0];

CGRect aFrame = aView.frame;
aView.size.height = 0;
aView.frame = aFrame;

for (UIView *subview in aView.subviews) {
    CGRect frame = subview.frame;
    frame.size.height = 0;
    subview.frame = frame;
}

[UIView commitAnimations]; 
```

> 此外，有没有办法在折叠后重新计算原始大小？

您可能只想在折叠之前保存高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-10T03:21:54.913

设置的 Swift 语法`autoresizingMask`与 ObjC 略有不同：

```
for subview in view.subviews {
    subview.autoresizingMask = [.flexibleWidth, .flexibleLeftMargin, .flexibleRightMargin]
} 
```

# c++ - 配置文件应该放在哪里？

> ID：10604090
> 
> 赞同：3
> 
> 时间：2012-05-15T15:33:34.577
> 
> 标签：c++, visual-studio-2010, opencv, camera-calibration, 3d-reconstruction

以下代码是 OpenCV 中相机校准程序的一部分。但是当我运行程序时出现错误：它说

> 无法打开配置文件

我把配置文件放在了，`c:/Nn/default.xml`但我仍然得到这个错误

你能帮我看看代码有什么问题吗？我是否将文件放在错误的路径中？

```
int main(int argc, char* argv[])
{
help();
Settings s; 
const string inputSettingsFile = argc > 1 ? argv[1] : "c:/Nn/default.xml";
FileStorage fs(inputSettingsFile, FileStorage::READ); // Read the settings
if (!fs.isOpened())
{
    cout << "Could not open the configuration file: \"" << inputSettingsFile << "\"" <<            endl; 
    return -1;
}
fs["Settings"] >> s; 
fs.release();                                         // close Settings file

if (!s.goodInput)
{
    cout << "Invalid input detected. Application stopping. " << endl;
    return -1;
}

vector<vector<Point2f> > imagePoints;
Mat cameraMatrix, distCoeffs;
Size imageSize;
int mode = s.inputType == Settings::IMAGE_LIST ? CAPTURING : DETECTION;
clock_t prevTimestamp = 0;
const Scalar RED(0,0,255), GREEN(0,255,0);
const char ESC_KEY = 27; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T04:18:07.350

我同意 Ujjwal 的观点，我遇到了同样的问题，因为我在 \opencv\build\x86\vc10\lib 文件夹下的链接器中包含了 *.lib 和 *d.lib 文件。

如果您在调试模式下在 VS2010 中编译，则仅在链接器中的 'opencv\build\x86\vc10\lib' 下包含以 d 结尾的文件，它应该可以解决问题。如果您在发布模式下编译，则仅包含不以 d 结尾的 .lib 文件。

此外，由于您使用的是“windoze”，我建议您将输入文件从“c:/Nn/default.xml”更改为“c:\\Nn\\default.xml”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-27T11:15:27.993

我面临同样的问题。但我得到了它的工作`F:\default.xml`

试试看。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T16:10:44.673

没有标准的解决方案。首先，有两种类型的配置文件：用户提供的用于按照他喜欢的方式（颜色等）配置程序的配置文件，以及您在内部使用的配置文件，以避免在任何时候重新编译和重新交付新的二进制文件。外部因素变化小。第一个传统上是`$HOME`在 Unix 下，在单个文件或名称以`.`;开头的目录中。在 Windows 下，我认为它们通常在 . 对于内部配置数据，在 Unix 下，I 是一个一般约定，即用户设置一个指定根的环境变量；您的可执行文件位于此目录下，任何配置数据位于`c:\Documents and Settings\*username*\ApplicationData\*appliname*``bin``etc`目录。（在 Unix 下没有可靠的方法知道你从哪里加载。）在 Windows 下，配置数据与可执行文件位于同一目录中，程序使用它`GetModuleFileName`来找到它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-08T10:11:32.840

只需检查您是否在链接器输入部分指定了正确的 .lib 文件（假设您使用的是 Visual Studio 2010）。对于调试模式使用 ----d.lib 文件，对于发布模式使用 ----.lib 文件。我遇到了同样的问题，这就是我解决它的方法。

# django - Django 模型 - 规范化

> ID：10604093
> 
> 赞同：1
> 
> 时间：2012-05-15T15:33:42.683
> 
> 标签：django, django-models, django-queryset

假设我有一个**房产**，它可以**出售**和/或**出租**（每个都有相关的价格），我应该如何构建我的模型？

**A：**

```
class Property(models.Model):
    name = models.CharField()
    sale_price = models.DecimalField(max_digits=14, decimal_places=2)
    rent_price = models.DecimalField(max_digits=14, decimal_places=2) 
```

**乙：**

```
class Property(models.Model):
    name = models.CharField()

CATEGORY_CHOICES = (
    (u'sale', u'Sale'),
    (u'rent', u'Rent'),
)

class Category(models.Model):
    property = models.ForeignKey('Property')
    name = models.CharField(max_length=25, choices=CATEGORY_CHOICES)
    price = models.DecimalField(max_digits=14, decimal_places=2) 
```

**C：**

```
class Property(models.Model):
    name = models.CharField()

class Sale(models.Model):
    property = models.ForeignKey('Property')
    price = models.DecimalField(max_digits=14, decimal_places=2)

class Rent(models.Model):
    property = models.ForeignKey('Property')
    price = models.DecimalField(max_digits=14, decimal_places=2) 
```

如果我想添加销售/租赁特定字段，我认为 C 会给我更大的灵活性。结构 B 似乎更适合查询，但我不确定。

假设我选择了 C，例如，如何查询正在出售的房产？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:52:14.350

如果你能过得去，A实际上是最好的。除此之外，像B这样的东西就可以了。C一点都不好。

`Sale`并且`Rent`不是对象，它们是对象的属性。将它们作为模型是可怕的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:48:04.257

如果你选择 C，你可以像这样查询出售的房产

```
properties = Property.objects.filter(sale__isnull=False) 
```

这应该像在 Django 文档中一样工作： [跨越关系的查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)

请记住，使用此模式，您可能只有一个房产有多个租金或销售价格，这可能不是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-22T04:41:46.170

更好的选择可能是使用 Django 的[多表继承](https://docs.djangoproject.com/en/2.0/topics/db/models/#multi-table-inheritance)，它看起来像这样：

```
class Property (models.Model):
  name = models.CharField()

class SaleProperty (Property):
  price = models.DecimalField(max_digits=14, decimal_places=2)

class RentProperty (Property):
  price = models.DecimalField(max_digits=14, decimal_places=2) 
```

这会导致创建三个表，但子分类模型的表不会复制来自`Property`. 相反，它们有一个不可见的外键，Django 使用它来处理父模型中的字段，就好像它们存在于子模型中一样。然后，您可以查询`SaleProperty`您何时只对具有销售价格的房产、`RentProperty`具有租赁价格的房产或`Property`两者**都**感兴趣。

# wordpress - Wordpress 站点从其他 Wordpress 站点继承主导航

> ID：10604098
> 
> 赞同：0
> 
> 时间：2012-05-15T15:34:13.767
> 
> 标签：wordpress

我有 2 个站点。两者都使用相同的主题。在“站点 A”中，我建立了导航。在“站点 B”中，我想在 header.php 文件中调用以继承“站点 A”导航。

我试过把它放在“站点 B”header.php 中，它会加载标题，但它会呈现“站点 B”的导航。

```
define('WP_USE_THEMES', false);
require('/server/path/to/my/wordpress/site/siteA/header.php'); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:20:37.320

谢谢佩德罗！我没有经常使用 Curl，结果证明这是最简单的解决方案。

这就是我所做的。

创建了一个 getnav.php 文件并包含以下内容：

```
$root = realpath($_SERVER["DOCUMENT_ROOT"]);

define('WP_USE_THEMES', false);
require_once($root . "/path/to/siteA/wp-load.php");

  //RENDER PRIMARY NAV

  $defaults = array(
  'theme_location'  => '',
  'menu'            => 'Primary Menu', 
  'container'       => 'div', 
  'container_class' => 'menu-container', 
  'container_id'    => '',
  'menu_class'      => 'menu', 
  'menu_id'         => '',
  'echo'            => true,
  'fallback_cb'     => 'wp_page_menu',
  'before'          => '',
  'after'           => '',
  'link_before'     => '',
  'link_after'      => '',
  'items_wrap'      => '<ul id=%1$s class=%2$s>%3$s</ul>',
  'depth'           => 0,
  'show_home'   => 0,
  'walker'          => '');

   wp_nav_menu( $defaults ); 
```

然后在“站点 B”header.php 文件中进行 Curl 调用：

```
$ch = curl_init("path/to/getnav.php");
curl_setopt($ch,CURLOPT_HEADER,0);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);

$nav = curl_exec($ch);

curl_close($ch);

echo $nav; 
```

站点 A 导航现在呈现在站点 B 的标题中。完美的！

# linux - 在 Linux 上将图像嵌入到视频中

> ID：10604102
> 
> 赞同：0
> 
> 时间：2012-05-15T15:34:28.570
> 
> 标签：linux, video

我希望能够拍摄视频，并将图像逐帧嵌入到该视频中，但无法找到从哪里开始。是否有任何开源（或付费）库可以让我在 Linux 中以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:36:49.113

我建议使用 gstreamer。它是一个非常强大的工具（[Gstreamer 画中画示例](http://www.oz9aec.net/index.php/gstreamer/347-more-gstreamer-tips-picture-in-picture-compositing)）。

# objective-c - 使用 Cocoa Bindings，以编程方式更改 NSTextField 的值不会更新模型

> ID：10604104
> 
> 赞同：5
> 
> 时间：2012-05-15T15:34:36.670
> 
> 标签：objective-c, xcode, cocoa, cocoa-bindings, nstextfield

我有一个 NSTextField 绑定到我的模型。如果我以编程方式更改文本字段的内容，则模型不会更新。我知道您应该[更新模型](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaBindings/Concepts/Troubleshooting.html#//apple_ref/doc/uid/TP40002148-182809)。

但是我正在尝试实现一个 NSTextField 子类，该子类在鼠标悬停在滚动条上以更改其数值时识别滚动条。显然我无法从这个子类访问模型。所以你有什么建议我怎么能做到这一点？

**解决方案**（感谢 noa）：

```
- (void)scrollWheel:(NSEvent *)theEvent {
    [self setFloatValue:[self floatValue] - [theEvent deltaY]];
    NSDictionary *bindingInfo = [self infoForBinding: NSValueBinding];
    NSObject *boundObject = [bindingInfo valueForKey:NSObservedObjectKey];
    NSString *keyPath = [bindingInfo valueForKey:NSObservedKeyPathKey];
    [boundObject setValue:[NSNumber numberWithFloat:[self floatValue]]
               forKeyPath:keyPath];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T17:07:03.073

您可以使用 target-action 或 Cocoa Bindings：

1.  目标-动作：将文本字段的动作选择器连接到控制器的某个 updateValue 动作。然后，在文本字段中，更改文本字段的值后调用选择器。该操作应获取文本字段的值并将其传播到模型。

2.  Cocoa 绑定：将文本字段的值绑定设置为模型对象的 KVO 兼容属性。然后您可以更新单元格的值，并且活页夹将为您更新模型对象。

这些特定设计的优点是文本字段和模型属性之间的耦合可以通过绑定或目标来处理。如果您想为不同的属性使用文本字段，您可以只使用不同的操作或不同的绑定，而无需修改自定义文本字段代码。

我自己可能会使用绑定，我认为它的工作量较少，但目标-动作也非常好，而且更简单一些。

* * *

确实，您确实说过“绑定”。我认为对文本字段的编程更改触发了更新，但由于情况并非如此，您可以自己更新绑定值。您可以尝试以下代码：

```
NSDictionary *bindingInfo = [self infoForBinding:NSValueBinding];
[[bindingInfo valueForKey:NSObservedObjectKey] setValue:self.integerValue
                                             forKeyPath:[bindingInfo valueForKey:NSObservedKeyPathKey]]; 
```

# javascript - js toFixed问题？

> ID：10604105
> 
> 赞同：2
> 
> 时间：2012-05-15T15:34:39.113
> 
> 标签：javascript, tofixed

```
Number(123.456).toFixed(20) 
```

发出

```
"123.45600000000000306954" 
```

从哪里来`306954`？我知道以二进制表示的数字不能准确。但是我在文档中没有发现任何提及调用号码（/.../）会导致精度损失的内容。

[mdn](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toFixed)说

> 数字的字符串表示形式，不使用指数表示法，并且在小数点后具有精确的数字。必要时对数字进行四舍五入，必要时用零填充小数部分，使其具有指定的长度。如果 number 大于 1e+21，此方法只需调用 Number.toString() 并以指数表示法返回一个字符串

## 编辑

toFixed 返回定点而不是浮点... ![在此处输入图像描述](../Images/be5b4818a22624a2d1913df87424da39.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:38:45.903

这完全与十进制数的浮点表示有关。

计算机无法`123.456`准确表示，因此使用最接近的二进制数。

请参阅[浮点指南](http://floating-point-gui.de/basic/)，或了解更多详细信息[，每位计算机科学家都应该了解浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

根据第一个链接，Javascript 中没有内置解决方案（即十进制类型）。`BigDecimal`如果这对您来说是一个真正的问题而不是好奇的话，那么有一个 Java 类的端口可用。

*回复编辑*：这不是问题`Number`。在您的工作示例中，您声明了一个整数文字 ( `123`) - 这些可以精确表示。在您失败的示例中，您使用浮点文字`123.456`，在运行时处理它的那一刻，它将由不*完全* `123.456`的二进制数字序列表示。

问题在于浮点文字，而不是`Number`它本身。

# eclipse - 如何使用 Eclipse 设置 JBoss-EAP 并进行调试；使用“最小”服务器配置

> ID：10604108
> 
> 赞同：2
> 
> 时间：2012-05-15T15:34:48.257
> 
> 标签：eclipse, debugging, jboss5.x

如何设置 Eclipse 以使用 JBoss-EAP 进行调试和最小配置文件。

有人可以给我们详细说明如何做到这一点！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:50:05.257

请看这篇文章；

[http://ist.berkeley.edu/as-ag/tools/howto/jboss-eclipse.html](http://ist.berkeley.edu/as-ag/tools/howto/jboss-eclipse.html)

*   您希望运行的“服务器配置”，即默认、最小等；可以指定它，并且教程确实指定了它。再读一遍，仔细。

*   调试：在 Eclipse 中配置服务器后；指定断点，然后右键单击您的项目并选择 Debug As -> Debug on Server。

如果需要远程调试；[Eclipse 中的 JBoss 调试](https://stackoverflow.com/questions/516196/jboss-debugging-in-eclipse)

# java - java和javascript中的正则表达式

> ID：10604109
> 
> 赞同：0
> 
> 时间：2012-05-15T15:34:48.877
> 
> 标签：java, javascript, regex

我有一个用 Java 构建的正则表达式。

```
String expr = "<a.*?id=\"(pres.*?)\".*?>Discharge.*?Medications:</a>"; 
```

我想在 Javascript 中使用相同的正则表达式。它会不同还是相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T15:51:09.157

我建议你不要这样做。

为什么？我只会指出 StackOverflow 上最受好评的答案之一：[https ://stackoverflow.com/a/1732454/851498](https://stackoverflow.com/a/1732454/851498)

在 javascript 中，您最好使用 DOM 而不是正则表达式来解析 HTML。

例子：

```
var a = document.querySelectorAll('a');
for ( var i = 0, len = a.length; i < len; i++ ) {
    // If the id starts with "pres"
    if ( a[ i ].id.substr( 0, 3 ) === 'pres' ) {
        // check a[ i ].textContent
    }
} 
```

或者，如果您使用的是 jQuery：

```
$('a').each( function() {
    if ( this.id.substr( 0, 3 ) === 'pres' ) {
        // check $( this ).text()
    }
} ); 
```

我没有编码最后一部分，但你明白了。使用正则表达式`$( this ).text()`就可以了，它不是 HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:35:53.963

没有太大的不同。JavaScript 中的正则表达式介于`/`'s 之间。所以它看起来像这样：

```
var expr = /<a.*?id=\"(pres.*?)\".*?>Discharge.*?Medications:</a>/; 
```

编辑，错误的斜线。哎呀。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T15:37:32.330

或者，您可以执行以下操作：

```
var expr = new RegExp("<a.*?id=\"(pres.*?)\".*?>Discharge.*?Medications:</a>"); 
```

有关 JavaScript 中 RegExp 的更多详细信息，请参阅 MDN 文档： [https ://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T15:36:19.110

它会是一样的。所有主流的正则表达式引擎都支持相同的正则表达式基本语法。有些人在顶部添加了自己的功能，但您的示例并没有做任何古怪的事情。

# ms-access - MS Access - 使用相同的记录 ID 转到另一个子表单

> ID：10604112
> 
> 赞同：2
> 
> 时间：2012-05-15T15:34:59.007
> 
> 标签：ms-access, vba

我有一个带有选项卡控件的主窗体，每个选项卡都有不同的子窗体。其中两个子表单具有相同的基础查询（项目列表）。我有一个按钮，我想将用户从第一个选项卡带到第二个选项卡，但我希望第二个选项卡上的记录与第一个选项卡上的记录相同。

例如，如果这是结构（但在 frmMaster 和子窗体之间是一个选项卡控件，但我认为这不会影响我想要做的事情）：

```
frmMaster
- frm_Sub1 (on the first tab)
- frm_Sub2 (on the second tab) 
```

并且用户在 frm_Sub1 上导航某个项目，我希望他们能够点击一个按钮，他们将被带到 frm_Sub2 上的同一项目记录。我可以将焦点设置在第二个选项卡上（使用 Forms!frmMaster.form!TabCtl0.Pages(1).SetFocus），但我无法让该选项卡上的子表单跳转到正确的记录。我认为这只是我如何尝试引用子表单的问题——有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:54:51.630

假设我在主窗体上有一个命令按钮：

```
Private Sub ACommand_Click()
  Me.SubformControlOnPage2Name.SetFocus
  With Me.SubformControlOnPage2Name.Form.Recordset
      .FindFirst "AKeyID=" & Me.SubformControlOnPage1Name.Form.ASimilarKey
  End With
End Sub 
```

您无需引用页面即可引用该页面上的控件。控件对于表单是唯一的。小心使用子窗体控件的名称，而不是包含的窗体的名称。

编辑重新评论

假设我在第一个子窗体上有一个命令按钮：

```
Private Sub ACommand_Click()
  Me.Parent.SubformControlOnPage2Name.SetFocus
  With Me.Parent.SubformControlOnPage2Name.Form.Recordset
      .FindFirst "AKey=" & Me.AKey
  End With
End Sub 
```

# windows-phone-7 - 在 Silverlight 和 Web 中编码

> ID：10604113
> 
> 赞同：0
> 
> 时间：2012-05-15T15:35:02.637
> 
> 标签：windows-phone-7

当我研究关于windows phone的SearchTask时，从文本框中得到的关键字，当转移到searchtask的实例时，会以不同的编码显示，我该如何解决这个问题，我尝试过类似的方法`byte[] bytes=Encoding.UTF8.GetBytes(textBox1.Text);searcher.SearchQuery = Encoding.UTF8.GetString(bytes, 0, bytes.Length);`，但似乎无用

# ruby - 动态定义的类错误地共享数据 - 错误或编码错误？

> ID：10604116
> 
> 赞同：5
> 
> 时间：2012-05-15T15:35:17.940
> 
> 标签：ruby, metaprogramming

我一直在尝试建立一个系统，借此我可以生成一系列类似的 Ruby 类，这些类由一个整数参数区分，我将其保存到相关类的类变量中——类似于 C++ 模板。

但是，引用（因此，创建）模板类的新版本会覆盖以前版本中保存的参数，我不知道为什么。

这是一个最小的例子

```
class Object
  def self.const_missing(name)
    if name =~ /^Templ(\d+)$/
      return make_templ $1.to_i
    else
      raise NameError.new("uninitialised constant #{name}")
    end
  end

private
  def make_templ(base)
    # Make sure we don't define twice
    if Object.const_defined? "Templ#{base}"
      return Object.const_get "Templ#{base}"
    else
      # Define a stub class
      Object.class_eval "class Templ#{base}; end"

      # Open the class and define the actual things we need.
      Object.const_get("Templ#{base}").class_exec(base) do |in_base|        
        @@base = in_base

        def initialize
          puts "Inited with base == #{@@base}"
        end
      end

      Object.const_get("Templ#{base}")
    end
  end
end

irb(main):002:0> Templ1.new
Inited with base == 1
=> #<Templ1:0x26c11c8>
irb(main):003:0> Templ2.new
Inited with base == 2
=> #<Templ2:0x20a8370>
irb(main):004:0> Templ1.new
Inited with base == 2
=> #<Templ1:0x261d908> 
```

我是否在我的 Ruby 中发现了一个错误（ruby 1.9.2p290 (2011-07-09) [i386-mingw32]），还是我只是编码错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:53:23.680

@Casper 的评论有助于指出您的代码无法正常工作的原因。要解决此问题，请考虑使用类实例变量而不是类变量。这应该可以帮助您避免`eval`使用类变量的常见陷阱：

* * *

**编辑：**从@dbenhur 添加重构，将类变量切换到类实例变量。

```
class Object
  def self.const_missing(name)
    name =~ /^Templ(\d+)$/ ? make_templ($1.to_i) : super
  end

private
  def self.make_templ(base)
    klass_name = "Templ#{base}"
    if const_defined? klass_name
      const_get klass_name
    else
      klass = Class.new(Object) do
        class << self
          attr_accessor :base
        end
        self.base = base
        def initialize
          puts "Inited with base == #{self.class.base}"
        end
      end
      const_set klass_name, klass    
    end
  end
end

puts Templ1.new.class.base
# => Inited with base == 1
# => 1
puts Templ2.new.class.base
# => Inited with base == 2
# => 2
puts Templ1.new.class.base
# => Inited with base == 1
# => 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T18:04:17.683

因为您首先在类 Object 的上下文中进行语法引用`@@base`，所以它是 Object 的类变量，并且 object 的所有 TemplX 子类都引用超类的类 var。您可以更改代码以使用[Module#class_variable_set](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-class_variable_set)并`class_variable_get`避免超类中的绑定。

您的代码的其他一些问题：我注意到您没有使`make_templ`类方法对等`self.const_missing`，尽管它成功调度，因为 Object 是 Class 的祖先。当存在其他方法时，最好避免使用所有形式的 eval(string)。如果您不处理 const_missing，则不应引发 NameError，而是分派给 super，因为其他人可能在链中并想要做一些事情来解决常量。

```
class Object
  def self.const_missing(name)
    if name =~ /^Templ(\d+)$/
      return make_templ $1.to_i
    end
    super
  end

private
  def self.make_templ(base)
    klass_name = "Templ#{base}"
    unless const_defined? klass_name
      klass = Class.new(Object) do
        class_variable_set :@@base, base
        def initialize
          puts "Inited with base == #{self.class.class_variable_get(:@@base)}"
        end
      end
      const_set klass_name, klass    
    end

    const_get klass_name
  end
end 
```

类变量通过继承具有有趣且通常不受欢迎的信息混合属性。你遇到了其中一个问题。我不知道您还需要什么其他属性`@@base`，但看起来您可能会使用类实例变量获得更好的隔离和更少令人惊讶的结果。更多解释：[Fowler](http://martinfowler.com/bliki/ClassInstanceVariable.html)，[RailsTips](http://railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)

# javascript - ASP.NET：是否可以在我的 Web 应用程序的每个页面中注入 CSS 或 Javascript？

> ID：10604119
> 
> 赞同：1
> 
> 时间：2012-05-15T15:35:32.453
> 
> 标签：javascript, asp.net, css, frameset, inject

我正在开发一个使用框架集而不是母版页的 Web 应用程序。我想设置应用程序，以便每当我在本地使用生产连接字符串进行调试时，所有页面的背景颜色都是浅红色。

我在 StackOverflow 上遇到了一个问题，有人建议创建一个基本页面，所有页面都从该页面继承，但我需要一种动态方法，无需编辑应用程序中的每个页面类即可工作。此时切换到使用母版页不是一种选择。

有没有办法使用 global.asax 或其他方式将样式或脚本标记注入每个加载的文档的头部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:52:31.340

呜呜呜！

```
Private Sub Global_asax_PreRequestHandlerExecute(sender As Object, e As System.EventArgs) Handles Me.PreRequestHandlerExecute

    Dim p As Page = TryCast(System.Web.HttpContext.Current.Handler, Page)

    If Not p Is Nothing Then p.ClientScript.RegisterStartupScript(p.GetType, Guid.NewGuid.ToString("n"), "document.body.style.backgroundColor = 'red';", True)

End Sub 
```

关键是抓取页面引用，然后为其分配一个启动脚本，以向 body 元素添加样式。基本上，一旦您知道如何获取对页面对象的引用，就没有限制了。当然，母版页总是推荐用于基础开发，但是如果你需要的话，这应该会为你提供一些快速而肮脏的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:40:03.310

不久前我发布了一个问题，询问如何强制所有页面从特定的基本页面继承。答案对我来说来得太晚了，所以我从未尝试过，但看看[这篇](https://stackoverflow.com/questions/4689684/asp-net-can-i-force-every-page-to-inherit-from-a-base-page-also-should-some-of)文章，有人说它应该可以工作。

它指向的页面是：[http ://ryanfarley.com/blog/archive/2004/06/08/766.aspx](http://ryanfarley.com/blog/archive/2004/06/08/766.aspx)

# c# - 如何初始化 HtmlDiv

> ID：10604121
> 
> 赞同：0
> 
> 时间：2012-05-15T15:35:43.667
> 
> 标签：c#, initialization, coded-ui-tests

我试图`Microsoft.VisualStudio.TestTools.UITesting.HtmlControls.HtmlDiv`作为一个参数传递，所以我需要初始化并在一行中找到我正在寻找的特定控件（如果可能的话），但我正在努力解决这个问题。正常初始化是这样完成的......

```
HtmlDiv htmlDiv = new HtmlDiv(htmlDocument) // where htmlDocument is of Microsoft.VisualStudio.TestTools.UITesting.UITestControl
htmlDiv.SearchProperties[HtmlDiv.PropertyNames.Id] = "header"; 
```

我正在尝试做这样的事情......

```
myFunction(new HtmlDiv(htmlDocument) {
    SearchProperties[HtmlDiv.PropertyNames.Id] = "header"
}); 
```

我收到错误`cannot resolve symbol 'SearchProperties'`和`Cannot initialize type 'Microsoft.VisualStudio.TestTools.UITesting.HtmlControls.HtmlDiv' with a collection initializer because it does not implement 'System.Collections.IEnumerable'`.

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:11:32.367

我想不出办法来做到这一点，所以我在我的 HtmlDocument 包装类中创建了一个方法，该方法将返回找到的 UITestControl。

```
public class UiHtmlDocument : HtmlDocument {
    public UiHtmlDocument(UITestControl searchLimitContainer) : base(searchLimitContainer) {}

    public T searchHtmlElementByAttributeValues<T>(Dictionary<string,string> propertyExpressions) where T : UITestControl, new() {
        var uiTestControl = Activator.CreateInstance(typeof(T), this);
        foreach (var propertyExpression in propertyExpressions) {
            ((T)uiTestControl).SearchProperties[propertyExpression.Key] = propertyExpression.Value;
        }
        return (T)uiTestControl;
    }
} 
```

并像这样使用...

```
myFunction(
    browserWindow.htmlDocument.searchHtmlElementByAttributeValues<HtmlDiv>(
        new Dictionary<string, string> { 
            { HtmlDiv.PropertyNames.Class, "footer" } 
        }
    )
); 
```

# java - 如何清除 Java 中的扫描仪缓冲区？

> ID：10604125
> 
> 赞同：43
> 
> 时间：2012-05-15T15:36:00.327
> 
> 标签：java, io

我有这样的事情：

```
 Scanner in=new Scanner(System.in);
    int rounds = 0;
    while (rounds < 1 || rounds > 3) {
        System.out.print("How many rounds? ");
        if (in.hasNextInt()) {
            rounds = in.nextInt();
        } else {
            System.out.println("Invalid input. Please try again.");
            System.out.println();
        }
        // Clear buffer
    }
    System.out.print(rounds+" rounds."); 
```

如何清除缓冲区？

编辑：我尝试了以下方法，但由于某种原因它不起作用：

```
while(in.hasNext())
    in.next(); 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-15T15:38:16.807

尝试这个：

```
in.nextLine(); 
```

这会将扫描仪推进到下一行。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-15T15:39:36.957

您不能明确清除扫描仪的缓冲区。在内部，它可能会在读取令牌后清除缓冲区，但这是程序员无法触及的实现细节。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-08-28T07:35:50.297

使用以下命令：

```
in.nextLine(); 
```

紧接着

```
System.out.println("Invalid input. Please Try Again.");
System.out.println(); 
```

或在以下大括号之后（您对此的评论是）。

此命令将扫描仪前进到下一行（从文件或字符串读取时，这只是读取下一行），因此在这种情况下基本上是刷新它。它清除缓冲区并使扫描仪准备好接受新的输入。当用户输入无效输入（例如当要求输入数字时的字母）时，它可以最好地用于清除当前缓冲区。

该方法的文档可以在这里找到：http: [//docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine())

希望这可以帮助！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-05-06T06:47:20.280

这应该解决它...

```
Scanner in=new Scanner(System.in);
    int rounds = 0;
    while (rounds < 1 || rounds > 3) {
        System.out.print("How many rounds? ");
        if (in.hasNextInt()) {
            rounds = in.nextInt();
        } else {
            System.out.println("Invalid input. Please try again.");
            in.next(); // -->important
            System.out.println();
        }
        // Clear buffer
    }
    System.out.print(rounds+" rounds."); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-05-07T23:02:46.920

其他人建议使用`in.nextLine()`清除缓冲区，这适用于单行输入。然而，正如评论指出的那样，有时 System.in 输入可以是多行的。

如果您使用的是 System.in 而不是其他 InputStream，您可以创建一个新的 Scanner 对象来清除缓冲区。

`in = new Scanner(System.in);`

如果你这样做，**不要**先打电话`in.close()`。这样做将关闭 System.in，因此您将在随后调用`in.nextInt();`System.in 时获得 NoSuchElementExceptions，可能不应该在您的程序期间关闭。

（上述方法特定于 System.in。它可能不适用于其他输入流。）

如果您确实需要在创建新对象之前关闭 Scanner 对象，[则此 StackOverflow 答案](https://stackoverflow.com/questions/27286690/in-java-is-it-possible-to-re-open-system-in-after-closing-it)建议为 System.in 创建一个 InputStream 包装器，该包装器具有自己的 close() 方法，不会关闭包装的 System.in 流。不过，这对于简单的程序来说是多余的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-11T09:04:11.037

```
scan.nextLine(); 
```

在读取字符串输入之前放置上面的行

# java - 如何在 Jython 中搜索字符串以查找 ASCII 字符？

> ID：10604129
> 
> 赞同：-1
> 
> 时间：2012-05-15T15:36:12.573
> 
> 标签：java, python, jython, uniobjects

我正在从使用 ASCII 字符 254 作为分隔符的数据库中提取数据。我很困惑如何搜索为 254 返回的字符串，然后根据它创建字典？

我的蟒蛇课

```
import sys
sys.path.append('C:\\IBM\\UniDK\\uojsdk\\lib\\asjava.jar')
import os.path

from asjava.uniclientlibs import UniDynArray, UniDataSet
from asjava.uniobjects import UniSession, UniFile
from asjava.uniobjects import UniSubroutineException
from asjava.uniobjects.UniObjectsTokens import AT_FM

class u2py :

        def __init__ (self):
            self.conn = UniSession()

        def get_db(self):
            """ establish a connection to Unidata """
            username = 'dbuser'
            password = 'SuperSecretPassword'
            return  self.conn.connect("host", username, password, "ACCOUNT")

        def close_db(self):
            """ drop connection to Unidata """
            if self.conn.isActive():
                self.conn.disconnect()

        def open_file(self,file_name,rec):
            """ open a U2 file read a record and return it """
            uvfile = self.conn.open(file_name)
            uvrec = uvfile.read(rec)
            dataset = uvrec
            uvfile.close()
            return dataset

        def open_field(self,file_name,rec,field):
                    """ open a U2 file read a record and return it """
                    uvfile = self.conn.open(file_name)
                    uvrec = uvfile.readField(rec,field)
                    dataset = uvrec
                    uvfile.close()
                    return dataset 
```

这是我在控制台中的代码：

```
from u2py import *

u2 = u2py()
c = u2.get_db() #creates the connection to the DB
c #actually makes the connection
rec = u2.open_file('SOFILE','SO133700')
print rec 
```

然后将其打印到屏幕上：

```
ZZZAA■XN3■CEL■931819501■20020215■BWI/PP■■ 
```

“■”实际上是字段标记 chr(254)

编辑：

当我使用这个时：

```
 >>>rec = u2.open_file('SOFILE','SO133699').split(chr(254)) 
```

我收到这个错误

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'asjava.uniclientlibs.UniString' object has no attribute 'split' 
```

编辑和最终答案：

使用 UniObjects Java

```
rec.toString().split(chr(254)) 
```

成功！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T15:39:17.540

`your_string.split(chr(254))`，例如

```
>>> "foo\xFEbar\xFEbaz".split(chr(254))
['foo', 'bar', 'baz'] 
```

这将返回一个列表。如何从中构建字典我将留给你，因为我不知道你想要什么键和值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:40:51.097

要在字符串中搜索 ASCII 254 字符，您可以执行以下操作：

```
if '\xFE' in db_string:
    # 254 char was in the string 
```

或者，找到

```
delimiter_pos = db_string.find('\xFE')  # will be -1 if delimiter not found 
```

不过，您必须更详细地解释“基于此创建字典”的含义。你的意思是列名和值的字典吗？来自数据库的响应字符串的示例是什么？

# google-bigquery - Google BigQuery 删除行？

> ID：10604135
> 
> 赞同：30
> 
> 时间：2012-05-15T15:36:23.247
> 
> 标签：google-bigquery, sql-delete, delete-row

任何人都知道任何计划添加对从 Google Bigquery 中的表中删除部分数据的支持？我们现在遇到的问题是我们正在使用它来分析我们随着时间的推移收集的数据点。我们希望对过去 X 天的数据运行查询，但是在过去 X 天的数据之后，我们不再需要将数据存储在 BigQuery 中。

目前我们能想到的删除数据的唯一方法是删除整个数据表，然后重新创建它并用 X 天的数据加载它。不过，这也需要我们将数据存储在每日 CSV 文件中，这不是最佳选择。

关于如何处理此问题或近期是否有删除行查询的任何建议？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-15T15:48:37.980

2016 年更新：BigQuery 现在可以删除和更新行——Fh

[https://cloud.google.com/bigquery/docs/reference/standard-sql/dml-syntax](https://cloud.google.com/bigquery/docs/reference/standard-sql/dml-syntax)

* * *

感谢您描述您的用例。BigQuery 在设计上是仅附加的。我们目前不支持从现有数据集中删除单行或一批行。

目前，要实现“循环”日志系统，您必须： 1\. 每天创建一个新表（如有必要，删除旧表） 2\. 将数据附加到表并按时间/日期查询

我实际上建议每天创建一个新表。由于 BigQuery 按查询的数据量收费，这对您来说是最经济的，而不必每次都查询整个海量数据集。

顺便说一句 - 您目前如何收集数据？

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-03-16T10:51:16.147

要删除大查询中的记录，您必须首先启用标准sql。

启用标准 sql 的步骤

1.  打开 BigQuery 网页界面。
2.  单击编写查询。
3.  单击显示选项。
4.  取消选中使用旧版 SQL 复选框。

这将使 BigQuery 数据操作语言 (DML) 能够更新、插入和删除 BigQuery 表中的数据

现在，您可以编写普通 SQL 查询来删除记录

```
DELETE [FROM] target_name [alias] WHERE condition 
```

您可以参考： [https ://cloud.google.com/bigquery/docs/reference/standard-sql/dml-syntax#delete_statement](https://cloud.google.com/bigquery/docs/reference/standard-sql/dml-syntax#delete_statement)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-07-29T14:21:49.883

#standardSQL 如果要删除所有行，请使用以下代码

```
delete from `project-id.data_set.table_name` where 1=1; 
```

如果要删除特定行，请使用以下代码。

```
delete from `project-id.data_set.table_name` where (your condition) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-15T13:57:27.930

此外，如果适用，您可以尝试 BigQuery 的 OMIT RECORD IF，返回除您要删除的项目之外的所有项目。然后，根据该查询结果创建一个新表。

*（示例取自 Google 参考文档）*

```
SELECT * FROM
  publicdata:samples.github_nested

OMIT RECORD IF
  COUNT(payload.pages.page_name) <= 80; 
```

**来源：[https ://cloud.google.com/bigquery/query-reference](https://cloud.google.com/bigquery/query-reference)**

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-23T22:31:20.420

如果要删除表中的所有行，则：

DELETE FROM {dataset}.{table} WHERE TRUE

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-04-27T19:24:49.493

什么对我有用：

```
TRUNCATE TABLE `project_id.dataset.table_name` 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-27T16:33:33.710

这仅在使用 Legacy SQL 时才相关。

您可以尝试以下方法：

```
DELETE FROM {dataset}.{table} WHERE {constraint} 
```

# c# - 将变量分配给另一个变量，并在一个变量中反映另一个变量

> ID：10604136
> 
> 赞同：9
> 
> 时间：2012-05-15T15:36:30.133
> 
> 标签：c#

是否可以将一个变量分配给另一个变量，并且当您更改第二个变量时，更改会下降到第一个变量？

像这样。

```
int a = 0;
int b = a;
b = 1; 
```

现在 b 和 a 都将 = 1。

我问这个的原因是因为我有 4 个我正在跟踪的对象，并且我使用名为 currentObject 的第 5 个对象来跟踪每个对象，该对象等于用户正在使用的 4 个对象中的任何一个。但是，我只想对 currentObject 进行更改，然后让它瀑布到它来自的变量。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-15T15:38:22.847

您需要区分*对象*、*引用*和*变量*。如果您有两个不同的变量（它们不是通过方法中的 ref/out 别名等），那么它们将是独立的。

但是，如果两个变量引用同一个*对象*（即它们的类型是一个类，并且它们的**值**是相等的引用），那么对该对象的任何更改都将通过任一变量可见。听起来这就是您想要实现的目标。例如：

```
public class SomeMutableClass
{
    public string Name { get; set; }
}

// Two independent variables which have the same value
SomeMutableClass x1 = new SomeMutableClass();
SomeMutableClass x2 = x1;

// This doesn't change the value of x1; it changes the
// Name property of the object that x1's value refers to
x1.Name = "Fred";
// The change is visible *via* x2's value.
Console.WriteLine(x2.Name); // Fred 
```

如果您对引用类型和对象的工作方式并不完全满意，您可能希望阅读我[关于它们的文章](http://pobox.com/~skeet/csharp/references.html)。

编辑：我经常使用的一个类比是房子。假设我们有两张纸（变量）。两张纸上都写了相同的房子地址（这是每个变量的*值，* *reference*）。只有一所房子。如果有人用第一张纸到房子，然后把门漆成红色，他们并没有改变他们的纸——他们改变了*房子*的一些东西。然后如果有人用*第二*张纸到房子，他们会看到前门也是红色的。只有一所房子，但很多纸上都写着它的地址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T15:38:14.043

使用结构/值类型 --------**否**

比如 int、boolean、double 等。

有引用类型-------- **YES**

比如类，对象等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-13T04:46:42.023

首先，您应该了解您在以前的代码中所做的事情

1.  在内存中创建一个名为“a”的 4 字节大小的变量，然后将其值设为 0
2.  在内存中创建一个名为“b”的 4 字节大小的变量，然后给它一个 (a) 的值 [当前为 0]
3.  将变量“b”的值更改为 1

但这不是你想要的，你想要的是更像这样的东西

1.  在内存中创建一个名为“a”的 4 字节大小的变量，然后将其值设为 0
2.  在内存中创建一个名为“b”的 4 字节大小的变量，然后更改变量“b”的地址，使其不再引用这 4 个字节，而是引用 (a) 的 4 个字节

你所要求的既是坏的，也是不可能的

*   不好：您刚刚创建了一个完全没有用的 4 个字节的空白空间，并且完全忽略了它们
*   不可能：因为您不能更改值类型的地址（因此它们被称为“值”类型而不是“引用”类型）

但是你“应该”要求的是这个

1.  在内存中创建一个名为“a”的 4 字节大小的变量，然后将其值设为 0
2.  创建一个引用变量 a 的地址
3.  通过这个地址改变a的值

而这种方式其实完全没问题，它使用了[指针](https://msdn.microsoft.com/en-us/library/y31yhkeb.aspx)，指针只是内存中的地址。

注意：要使用指针，您必须在 Project > Build 中允许不安全代码

在代码中是如何做到这一点：

```
int a = 5;
unsafe //use unsafe around the areas where pointers exist
{
    int* b = &a; //create an address named b that refers to a
    *b = 1; //change the value of the variable that exists at the address b to 1

    //now a = 1
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T15:52:14.180

您正在寻找的是一种通常称为观察者的设计模式。对象 B 将监视对象 A（或 4 个对象，因为这是您需要的），当 A 被修改时，B 会收到通知并相应地更新其状态。

对于 C#，我会使用事件。例如，在 A 上定义事件 ValueChanged。B 将侦听此事件并更新其值。

```
public delegate void ChangedEventHandler(object sender, EventArgs e);

Class A
{
   public event ChangedEventHandler Changed;
   int val = 0;
   int Val
   {
      get { return val;}
      set { 
          if ( val != value ) val = value
          {
              val = value;
              if (Changed != null) Changed(this, new EventArgs());
          }

   }
}

class B
{
    A obj1, obj2, obj3, obj4;
    int Val {get;set;}
    A CurrentlyWatched {get;set;}

    public B()
    {
       obj1 = new A();
       obj1.Changed += new ChangedEventHandler(ElementChanged);
       obj2 = new A(); 
       ...
    }

    private void ElementChanged(object sender, EventArgs e) 
      {
         this.CurrentlyWatched = sender as A;
         this.Val = CurrentlyWatched.Val;
      }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-27T18:23:38.050

我知道这是一篇旧帖子，但有几种方法可以处理这种情况。

首先，您可以创建私有变量，然后让公共 getter/setter 根据需要修改私有值：

```
private int firstVar = 10;
private int secondVar = 20;

public int FirstVar
{
    get
    {
        return firstVar;
    }
    set
    {
        firstVar = secondVar = value;
    }
}
public int SecondVar
{
    get
    {
        return secondVar;
    }
    set
    {
        firstVar = secondVar = value;
    }
}

public void SomeFunction()
{
    Console.WriteLine("FirstVar=" + FirstVar); // Output: "FirstVar=10"
    Console.WriteLine("SecondVar=" + SecondVar); // Output: "SecondVar=20"

    FirstVar = 30;
    Console.WriteLine("FirstVar=" + FirstVar); // Output: "FirstVar=30"
    Console.WriteLine("SecondVar=" + SecondVar); // Output: "SecondVar=30"
} 
```

另一种方法是创建一个可以做同样事情的自定义类：

```
 public class MyVariable
    {
        protected static List<MyVariable> _instances;

        public int Value { get; set; }

        public MyVariable() 
        {
            if (_instances == null) _instances = new List<MyVariable>();
            _instances.Add(this);
        }
        public MyVariable(int value) : base() { Value = value; }

        public void SetAll(int value) { foreach (MyVariable myVar in _instances) myVar.Value = value; }
        public override string ToString() { return Value.ToString(); }
    }

    public void SomeOtherFunction()
    {
        MyVariable var1 = new MyVariable(30);
        MyVariable var2 = new MyVariable(50);

        Console.WriteLine("var1=" + var1.ToString()); // Output: "var1=30"
        Console.WriteLine("var2=" + var2.ToString()); // Output: "var2=50"

        var1.SetAll(100);
        Console.WriteLine("var1=" + var1.ToString()); // Output: "var1=100"
        Console.WriteLine("var2=" + var2.ToString()); // Output: "var2=100"
    } 
```

干杯!

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-15T15:42:28.617

在这里，您可以更改 get 和 set 函数中的代码来做几乎任何事情。但是，您不能在函数中声明它。

```
 int a;
    int b
    {
        get
        {
            return a;
        }
        set
        {
            a = value;
        }
    } 
```

# jquery - jquery colorbox显示位置

> ID：10604141
> 
> 赞同：0
> 
> 时间：2012-05-15T15:36:46.803
> 
> 标签：jquery, colorbox

我正在使用颜色框来显示 html 内容错误。

我需要在链接点击的位置显示它。有没有办法将它的位置设置为与该链接的附近相同？

* * *

`CODE`

```
<script type="text/javascript">
  $(document).ready(function(){
        setColorbox();
  });

  //This will set colorbox ids.
  function setColorbox(){
        var a = $('#requestText').val();

        if($("#request").length){
             $("#request").colorbox({html:a, maxHeight:"65%",opacity:0.5});
        }

  } 
```

和

```
 <div><b>Request Text :</b></div>
    <h:panelGroup style="dispaly:block" rendered="#{refillRenewalRequestBackingBean.str2!=''}">
    <a href="#" id="request">View-Text</a>
    <input type="hidden" id="requestText" value="<h:outputText value="#{refillRenewalRequestBackingBean.str2}"/>" /> 
```

我正在使用这种脚本。现在我需要在点击的同一个地方显示颜色框`href` `view-Text`。 **可能吗？**

# .net - WinRT .net 类是托管代码吗？

> ID：10604145
> 
> 赞同：0
> 
> 时间：2012-05-15T15:37:02.017
> 
> 标签：.net, windows-runtime, .net-4.5

在 .Net4.5 中，命名空间以“system”开头，“WinRT & Metro style API”命名空间以“windows”开头。

我的问题是，属于“WinRT/Metro API”（Windows 命名空间中的类）托管代码中的类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:30:26.373

好吧，我想现在我有答案了，

Metro 风格 API 是 CLR 的子集，因此它是受管理的。WinRT API 处于操作系统级别（基于 COM 的种类），因此它们是非托管的。

但是，两者都以相同的命名空间“windows.xxxxx.xx”开头

# asp.net - ASP.NET MVC3 需要更改 Web 应用程序的默认字段

> ID：10604150
> 
> 赞同：0
> 
> 时间：2012-05-15T15:37:23.687
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework

我有一个带有实体框架 4.1 的简​​单 asp.net mvc3 项目。我问了一个先前的问题，答案很好 -[如何正确覆盖 EF 4.1 中的 SaveChanges 函数](https://stackoverflow.com/questions/10300330/how-to-correctly-override-the-savechanges-function-in-ef-4-1) date 和 loggedby 的值是在类构造函数中设置的。这对于 Create 操作很好，但是当我使用 Edit 操作时，我看到日期和 LoggedBy 字段已更改，这是我不想要的。我还看到 Delete 不起作用 - 我猜这是因为构造函数。如何解决此问题，以便为 Create 设置 Date 和 LoggedBy 值，但在 Edit 期间不更改？B.

```
using System;
using System.Collections.Generic;
using System.Web;

public partial class tblDefectDetail
{
    public tblDefectDetail()
    {
        DateLogged = DateTime.Now;
        LoggedBy = HttpContext.Current.User.Identity.Name;
    }

    public int ID { get; set; }
    public int Project { get; set; }
    public string LoggedBy { get; set; }
    public System.DateTime DateLogged { get; set; }
    public string Issue { get; set; } 
```

我的动作如下所示：

```
public ActionResult Create()
        {
            ViewBag.BugLocation = new SelectList(db.tblBugLocations, "ID", "BugLocation");
            ViewBag.BugType = new SelectList(db.tblBugTypes, "ID", "BugType");
            ViewBag.BusinessUnit = new SelectList(db.tblBusinessUnits, "ID", "BU_Name");
            ViewBag.BugFoundMethod = new SelectList(db.tblDefectDiscoveryMethods, "ID", "DiscoveryMethod");
            ViewBag.Project = new SelectList(db.tblProjects, "ID", "ProjectName");
            ViewBag.Language = new SelectList(db.tblLanguages, "ID", "Language");
            return View();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:06:24.580

不要在构造函数中设置值，而是在 Action 方法中设置它们。因此，在将模型传递给视图之前，请在 Create 操作方法中设置所需的值。

```
public ActionResult Create() {
    var model = new tblDefectDetail() { LoggedBy = User.Identity.Name, DateLogged = DateTime.Now }

    return View(model);
} 
```

# java - 在另一个数组中实例化和设置数组

> ID：10604153
> 
> 赞同：-2
> 
> 时间：2012-05-15T15:37:46.870
> 
> 标签：java, arrays

我拥有城市，国家和世界类，国家和世界类是数组，因为显然我需要在其中添加几个不同的国家和城市，并且我想将国家添加到我已经实例化的世界中，并将城市添加到国家中我创建的，但我不确定我应该使用什么 java 代码来执行此操作，这是我尝试编写的代码，但它无法运行：

```
private static void AddCountriesToWorld(World[] aWorld){

        System.out.println("Entering the countries in your world");
Country[] aCountry = new Country[9];
    aWorld[0]=aCountry.setName("Usa");
    aWorld[1]=aCountry.setName("Europe");
    aWorld[2]=aCountry.setName("Russia");

    } 
```

.

```
public static void main(String[] args) {

    World[] aWorld = new World[15];
    AddCountriesToWorld(aWorld);
       } 
```

对此的任何见解将不胜感激！谢谢！

[编辑：代码甚至不正确，我根本无法运行程序，问题是我不知道执行我描述的功能的代码，所以我没有开始。]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:39:52.330

你已经正确地实例化了数组，但你从来没有设置`aWorld[0]`任何东西。

此外，`aCountry`是一个 的数组`Country`，但您正试图在其上调用方法，就好像它是 的一个实例一样`Country`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:07:49.283

我认为你需要一些关于 Java 数组的练习，你可以[在这里学习](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)。

要将国家/地区列表从国家/地区数组传输到世界数组，您需要编写如下代码。

```
public void addCountries(Contry[] contry){
        World[] worlds=new World[contry.length];
        World world=null;
        for (int i=0;i<contry.length;i++) {
            world=new World();
            world.setCountry(contry[i].getCountry());
            worlds[i]=world;
        }

    } 
```

您尝试编写的其余代码是家庭作业，我将离开那部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:44:18.970

你能创建泛型对象，比如这个 ArrayList 并使用 ArrayList 类的方法，比如 add(obj) 或 addAll(obj) 等等。我希望能帮助你。

# android - GLSurfaceView 会比 SurfaceView 更快地渲染位图吗？

> ID：10604155
> 
> 赞同：2
> 
> 时间：2012-05-15T15:37:50.207
> 
> 标签：android, opengl-es, bitmap

我正在将来自某些外部源的视频作为一系列位图渲染到`SurfaceView`. 有时渲染速度不够快。

我正在考虑用 GLSurfaceView 替换 SurfaceView 以进行位图渲染，但是由于这些是位图，并且没有像 Open GL 向量这样的东西，我认为渲染不会变得更快。

我应该期望它变得更快吗？更改将需要我复习一些 OpenGL 知识，所以我想我最好先在这里问一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:51:56.880

你的surfaceview硬件加速了吗（我认为3.0之前没有）？如果是这样，那么它可能不会有太大的不同。如果它不是硬件加速的，它可能会产生巨大的差异。

如果您确实使用 OpenGL，请尝试 DrawTexfOES 函数，我相信这是根据 Google IO 演示呈现纹理四边形的最快方法。

# mysql - 如何允许在单个数据库事务中截断数据？

> ID：10604159
> 
> 赞同：1
> 
> 时间：2012-05-15T15:38:11.683
> 
> 标签：mysql, jpa, playframework, playframework-1.x

当插入的数据大于目标列时，mysql会抛出错误。总而言之，这似乎是一种积极的行为。

但是，我想在一个特定事务的持续时间内取消此行为 - 在此 tx 中，如果数据太大，我希望发生截断。

有没有办法禁用这种行为，但仅限于一个事务？以下是有关如何在 JDBC 级别执行此操作[的文档：](http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-type-conversions.html)

> 从 Connector/J 3.1.0 开始，JDBC 驱动程序会按照 JDBC 规范的要求发出警告或抛出 DataTruncation 异常，除非通过使用属性 jdbcCompliantTruncation 并将其设置为 false 将连接配置为不这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:45:23.167

行为取决于 MySQL 会话变量`sql_mode`。您可以在连接期间更改变量，稍后将其重置为原始值。在我的系统上，默认值为`sql_mode`：

```
SELECT @@sql_mode;
-- REAL_AS_FLOAT,PIPES_AS_CONCAT,ANSI_QUOTES,IGNORE_SPACE,ONLY_FULL_GROUP_BY,ANSI,NO_AUTO_VALUE_ON_ZERO,STRICT_ALL_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION,PAD_CHAR_TO_FULL_LENGTH 
```

您可以在程序中解析此结果，删除 item `STRICT_ALL_TABLES`，使用 更新值`SET SESSION sql_mode='...'`，执行语句并在事务结束时重置变量。

**@ripper234 编辑：**

这是我本着这个答案的精神编写的代码：

```
private static final disableMysqlStrictMode = 
    ((String)Play.configuration.get("db.url")).contains("mysql://");

...

String originalSqlMode = null;
try {
    if (disableMysqlStrictMode) {
        // Strip away mysql's "strict mode" for this transaction - in case one of the columns is truncated, we don't want the entire tx to fail
        // http://stackoverflow.com/a/10606085/11236
        Query query = JPA.em().createNativeQuery("SELECT @@sql_mode;");
        originalSqlMode = (String)query.getSingleResult();
        String newSqlMode = originalSqlMode
            .replace("STRICT_ALL_TABLES", "")
            .replace("STRICT_TRANS_TABLES", "")
            .replace(",,", ",");
        JPA.em().createNativeQuery("SET SESSION sql_mode=?").setParameter(1, newSqlMode).executeUpdate();
    }

    // Save my entity here
    obj.save();

} finally {
    if (originalSqlMode != null) {
        // Restore original sql_mode
        JPA.em().createNativeQuery("SET SESSION sql_mode=?").setParameter(1, originalSqlMode).executeUpdate();
    }
} 
```

如果有人愿意，它可以包装成更漂亮的形式。

# google-app-engine - 用于多个 URL 处理程序的 GAE 多个 WSGI 文件

> ID：10604163
> 
> 赞同：2
> 
> 时间：2012-05-15T15:38:17.320
> 
> 标签：google-app-engine, python-2.7, wsgi

我无法理解如何使用 Google App Engine URL 处理程序映射将 URL 映射到各种文件。这是我目前拥有的代码：

**应用程序.yaml**

```
handlers:
- url: /
script: main.app
- url: /blog/*
  script: blog.app 
```

**main.py 的结尾**（MainPage 处理程序确实存在于顶部）

```
app = webapp2.WSGIApplication([('/', MainPage)], debug=True) 
```

**blog.py 结尾**（BlogPage 和 New Post 存在于顶部）

```
app = webapp2.WSGIApplication([('/blog', BlogPage), ('/blog/newpost', NewPost)], debug=True) 
```

所以现在，如果我去`http://127.0.0.1/`我的 MainPage 处理程序会像它应该的那样把它捡起来。但是，如果我去那里，`http://127.0.0.1/blog/`我最终会得到一个 404。我不知道是我的 blog.py 文件中的处理程序搞砸了，还是我需要改变 app.yaml 中定义的处理程序。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:46:38.217

您请求的 URI 不匹配，即 /blob/。请注意，末尾有额外的“/”。如果您希望由 BlogPage 处理，您可以使用以下...

```
app = webapp2.WSGIApplication([('/blog/?', BlogPage), ('/blog/newpost', NewPost)], debug=True) 
```

/博客/？将匹配 /blog 或 /blog/。

希望有帮助。

# coldfusion - 如何在 CF10 中确定闭包变量的范围？

> ID：10604166
> 
> 赞同：11
> 
> 时间：2012-05-15T15:38:23.280
> 
> 标签：coldfusion, scope, closures, coldfusion-10

引自[Adob​​e ColdFusion 10：使用闭包文档](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d31851842acbba1353e848b35-8000.html)：

> ```
> function helloTranslator(String helloWord) 
> { 
>     return function(String name) 
>     { 
>         return "#helloWord#, #name#"; 
>     }; 
> } 
> ```

如何范围`helloWord`和`name`正确地在返回线上？它们都在`Arguments`范围内吗？如果是这样，它们必须是唯一的吗？

[闭包和函数](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d31851842acbba1353e848b35-7ffa.html#community)部分还提到在已经很长的范围搜索之上还有 4 个范围：

> 最后，以下是搜索无作用域变量的顺序：
> 
> 1.  闭包的`local`范围
> 2.  闭包的`arguments`范围
> 3.  外部函数的`local`范围（如果可用）
> 4.  所有者功能的`local`范围（如果可用）
> 5.  ColdFusion 内置范围

如果我将某些内容限定为`'local.'`，它会仅搜索 1 还是 1,3 和 4？

顺便说一句，我了解 Closure & Outer。*所有者*是谁？

谢谢

* * *

**更新：**提交的增强请求：[ColdFusion 10.0 - 功能 3191742](https://bugbase.adobe.com/index.cfm?event=bug&id=3191742)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T11:02:04.743

```
 function helloTranslator(String helloWord) 
    { 
      return function(String name) 
      { 
        return "#helloWord#, #name#"; 
      }; 
    } 
```

在这里`helloWord`，`name`不能限定范围。有一个`Owner`“函数内定义的闭包”的隐式作用域，它是声明（父）函数的局部作用域，其中存在这些变量。所以这些变量必须是唯一的（在函数内）才能从闭包中访问。

最后，搜索一个未作用域的变量：

1.  闭包的局部范围
2.  闭包的参数范围
3.  外部/所有者函数的本地范围（如果可用）
4.  外部/所有者函数的参数范围（如果可用）
5.  变量范围（在创建闭包时可用）
6.  ColdFusion 内置范围

如果某些东西的范围为`Local`, 在闭包中，它只会在 1 中搜索。AFN没有办法直接把范围换成3，4。

ps 如前所述，`Owner`作用域只不过是一个隐式作用域，它在创建闭包时指向父/外部函数本地作用域的缓存副本。

ps 您可以[使用 ColdFusion 记录增强功能以](https://bugbase.adobe.com/)​​明确此范围。

不同范围的示例如下。运行它，您将了解闭包如何使用不同的范围。

```
any function exampleClosureForm(arg1){

    function x(innerArg1,innerArg2){
        //var arg1= 50;// will hide parent's arg1 if declared
        writedump(arguments);// would dump closure's
        writedump(local);// would dump closure's
        writedump(session.a); // would be same session shared across
        writedump(arg1); // would dump parents argument arg1
        return session.a-- + innerArg1+innerArg2+arg1--;// decrementing to see its behavior for successive call
    };  
    writeoutput(x(1,2));
    writedump(arguments,"browser","html",false,"function");// would dump parent's
    writedump(local,"browser","html",false,"function");// would dump parent's
    arg1 = -100; // since closure is sharing the parent's variable, this change should get reflected
    return x;
}
session.a = 10;
a = exampleClosureForm(10);
writeoutput("now the calls <br>"); 
writeoutput(a(innerArg1=5,innerArg2=5)); 
writeoutput("<br>");
// with argumentcollection
argsColl = structNew();
argsColl.innerArg1= 1;
argsColl.innerArg2= 3;
writeoutput(a(argumentCollection = argsColl)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T07:55:44.980

是的，据我所知，不能为父函数的参数指定范围，因此您的闭包参数需要具有不同的名称。您需要做的是在父函数中有一个中间变量，具有不同的名称：

```
function helloTranslator(String s){
    var otherS = arguments.s;
    return function(String s){ 
        return "#otherS#, #s#"; 
    }; 
} 
```

这不太理想：*应该*能够以范围的方式引用父级的参数范围，而不是简单地要求 CF 到处寻找匹配项。

如果我是你，我会[向 Adob​​e 提出一个错误。](https://bugbase.adobe.com/)

# php - 如何计算php关联数组中的项目数

> ID：10604173
> 
> 赞同：6
> 
> 时间：2012-05-15T15:38:42.387
> 
> 标签：php, multidimensional-array

我有一个数组如下。

```
Array
(
[0] => Array
    (
        [item] => Banana Cream Cheesecake
        [item_id] => 3
        [product] => Desserts
    )

[1] => Array
    (
        [item] => Banana Cream Cheesecake
        [item_id] => 3
        [product] => Desserts
    )

[2] => Array
    (
        [item] => Banana Cream Cheesecake
        [item_id] => 3
        [product] => Desserts
    )

[3] => Array
    (
        [item] => Banana Cream Cheesecake
        [item_id] => 3
        [product] => Desserts
    )

[4] => Array
    (
        [item] => Milk
        [item_id] => 2
        [product] => Soda
    )

[5] => Array
    (
        [item] => Banana Cream Cheesecake
        [item_id] => 3
        [product] => Desserts
    )
) 
```

我想打印：-

```
Banana Cream Cheesecake = 5 
```

怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T15:41:13.857

```
$count = 0;
foreach ($array as $key=>$value) {
    if ($value ['item'] == 'Banana Cream Cheesecake') {
        $count++;
    }
}
echo $count; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T15:49:04.553

```
array_count_values(array_map(function($foo){return $foo['item'];}, $arr)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T15:59:41.273

给定一个这样的数组：

```
$arr = array(array('item' => 'Banana Cream Cheesecake',
                   'item_id' => 3,
                   'product' => 'Desserts'),
             array('item' => 'Banana Cream Cheesecake',
                   'item_id' => 3,
                   'product' => 'Desserts'),
             array('item' => 'Banana Cream Cheesecake',
                   'item_id' => 3,
                   'product' => 'Desserts'),
             array('item' => 'Banana Cream Cheesecake',
                   'item_id' => 3,
                   'product' => 'Desserts'),
             array('item' => 'Milk',
                   'item_id' => 2,
                   'product' => 'Soda'),
             array('item' => 'Banana Cream Cheesecake',
                   'item_id' => 3,
                   'product' => 'Desserts')); 
```

您可以使用[array_count_values](http://www.php.net/manual/en/function.array-count-values.php)并通过其名称获取计数

```
$counted = array_count_values(array_map(function($value){return $value['item'];}, $arr));
echo $counted['Banana Cream Cheesecake']; 
```

或者修改函数以使用项目的 id：

```
$counted = array_count_values(array_map(function($value){return $value['item_id'];}, $arr));
// The item_id
echo $counted['3']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T15:42:08.660

print_r 数组并计算你的芝士蛋糕出现的次数。

不，说真的，没有更多信息，这是一个解决方案；）

```
$iCount = substr_count(print_r($array, true), "cheese cake"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-11T13:18:13.957

扩展@steve 的[回答](https://stackoverflow.com/a/10604365/2093734)

```
$counted = array_count_values(array_map(function($foo){return $foo['item'];}, $arr)); 
```

这为您提供了一个数组，其中包含键的每个值的总数`['item']`。

例如，这是您的示例将返回的数组：

```
$counted = Array
(
    ['Banana Cream Cheesecake'] => 5
    ['Milk'] => 1
) 
```

然后，打印它只是一个回显该变量的问题：

```
echo 'Banana Cream Cheesecake = ' . $counted['Banana Cream Cheesecake'];
//prints "Banana Cream Cheesecake = 5" 
```

这里的优点是您不需要为需要计算的每个值运行 for 循环 - 相反，您有一个数组，其中包含该特定键的所有值的总计。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T18:53:00.367

在处理数字而不是字符串时遇到问题，因为 substr_count 也需要键，所以我只使用普通计数而不是`substr_count`并且工作正常。

```
$icount=count(print_r($_SESSION['id_bra'], true), $bran); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-10T16:04:01.110

今天更容易做到这一点。

这是你的数组：

```
$products = array (
  0 => array (
    'item' => 'Banana Cream Cheesecake',
    'item_id' => 3,
    'product' => 'Desserts'
  ),
  1 => array (
    'item' => 'Banana Cream Cheesecake',
    'item_id' => 3,
    'product' => 'Desserts'
  ),
  2 => array (
    'item' => 'Banana Cream Cheesecake',
    'item_id' => 3,
    'product' => 'Desserts'
  ),
  3 => array (
    'item' => 'Banana Cream Cheesecake',
    'item_id' => 3,
    'product' => 'Desserts'
  ),
  4 => array (
    'item' => 'Milk',
    'item_id' => 2,
    'product' => 'Soda'
  )
); 
```

计数项目：

```
$counts = array_count_values(array_column($products, 'item'));

var_dump($counts); 
```

[在这里演示](http://sandbox.onlinephpfunctions.com/code/db679037663055c8fe20a4f833ede38fa3bcda12)

干杯! :)

# excel - 在 Excel 2010 中测试应用程序级别对话框

> ID：10604175
> 
> 赞同：2
> 
> 时间：2012-05-15T15:38:46.363
> 
> 标签：excel, vba, dialog, excel-2007, email-attachments

Excel 2010 有一个烦人的功能，您可以单击几个按钮并让 Excel 通过电子邮件发送您正在处理的当前文件。据我所知，这种情况不会触发任何类型的保存（因为我有在 On Save 事件触发时启动的代码）。这很烦人，因为我故意设置了我的 Excel 应用程序以防止以 PDF 格式以外的任何格式保存文件，而 Microsoft 提供的这一特定功能完全消除了我的控制。

当我录制宏并访问此功能时（通过文件|保存并发送|作为附件发送），宏录制器显示点击此序列会导致以下代码触发：

```
Application.Dialogs(xlDialogSendMail).Open 
```

据我所知，这是唯一触发的代码。

我的问题是：有什么方法可以测试这个事件，以便我可以将它停止在它的轨道上，或者至少弹出某种对话框来提醒用户不应该这样做？理想情况下，我需要知道如何在 Excel 2010 和 Excel 2007 中执行此操作，因为我的公司两者都使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:18:05.183

AFAIK 没有办法在 Excel VBA 中捕获它。

话虽如此，这是实现您想要的**替代方案；）**

这将使整个`Save and Send`选项仅对您的工作簿**不可用。**

首先从这里下载自定义 UI 编辑器。

[http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/08/07/7293.aspx](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2009/08/07/7293.aspx)

安装自定义 UI 编辑器后，启动它并按照下面快照中给出的说明进行操作。

![在此处输入图像描述](../Images/1a5c4d1fd9b20679a6baa8f767a38d6f.png)

现在，当您打开文件时，您可以看到它`Save And Send`不可用。

![在此处输入图像描述](../Images/caa3d378992d3dc0b05fe0d6ccfd437b.png)

**EXCEL 2010 代码**

```
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui">
    <backstage>

        <tab idMso="TabShare" visible="false"/>

    </backstage>
</customUI> 
```

**EXCEL 2007 代码**

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui">
  <ribbon startFromScratch="false">
    <officeMenu>
      <menu enabled="false" idMso="FileSendMenu" showImage="true" showLabel="true" />
    </officeMenu>
  </ribbon>
</customUI> 
```

高温高压

**跟进**

> Siddarth - 我如何让 Excel 2007 和 Excel 2010 都能正常工作？这是否意味着每个版本的 Excel 都需要我的文件版本？– Jay 11 分钟前

***久经考验***

如果您希望您的文件同时适用于 2007 和 2010，请插入“ **Office 2007 自定义 UI 部件**”和“ **Office 2010 自定义 UI 部件**”这两个部分

![在此处输入图像描述](../Images/6837925c554a9c6bf07aa70f6d0ba7ed.png)

更多快照

![在此处输入图像描述](../Images/318010729cc677f5cfd6ba1141f4484c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:53:56.627

我对工作场所的 Microsoft Office 应用程序没有太多经验，我只是通过学习获得了使用它的经验。难道您不能不将电子邮件与 Excel 关联，因此不会自动发送文件吗？

# objective-c - JSON文件读取和数据处理

> ID：10604176
> 
> 赞同：1
> 
> 时间：2012-05-15T15:38:47.273
> 
> 标签：objective-c, xcode

我正在阅读这种 JSON 文件：

```
{"message":["Untitled1a","Untitled2a","Untitled3a","Untitled4a"],"name":["Untitled1b","Untitled2b","Untitled3b","Untitled4b"]} 
```

每三十秒自动重新加载通过删除所有内容然后为上述数据分配所有对象来重新加载所有数据。有没有办法只重新加载新数据？例如，如果一切都保持不变，则不会加载或删除新数据，而如果添加了 UNtitle 5，则只需加载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:30:00.293

您可以在 JSON 中使用一些变量或标记来表示这是之前解析的相同 JSON，还是具有一些修改值或添加了一些新值的新 JSON。

如果要下载大量新数据，可以使用分页的概念。在分页中，您可以分部分下载数据。

# asp.net - ldap 身份验证后返回用户详细信息（asp.net vb）

> ID：10604184
> 
> 赞同：2
> 
> 时间：2012-05-15T15:39:04.790
> 
> 标签：asp.net, vb.net, active-directory, ldap

整个下午！我目前正在尝试为我的客户建立一个新的内部系统，他们坚持将登录与 AD 集成，这是有道理的，我已经成功地做到了这一点。

但是，在身份验证之后，我还想做的是将一些用户详细信息/属性存储为会话变量。

我有以下代码来验证用户：

```
'this function authenticates against AD - very simple and works nicely.
Function AuthenticateUser(path As String, user As String, pass As String) As Boolean
    Dim de As New DirectoryEntry(path, user, pass, AuthenticationTypes.Secure)
    Try
        'run a search using those credentials.  
        'If it returns anything, then you're authenticated
        Dim ds As DirectorySearcher = New DirectorySearcher(de)
        ds.FindOne()

        Return True
    Catch
        'otherwise, it will crash out so return false
        Return False
    End Try
End Function 
```

效果很好，一旦函数返回 True，我将 Session("LoggedIn") 设置为 True。

我需要做的是（希望在上述函数中）保存用户名，以及来自用户的 AD 配置文件中的其他 2 个自定义属性。

我将如何访问这些（假设）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:10:19.883

使用`DirectorySearcher`支持检索属性的构造函数。将 LDAP 客户端所需的属性添加到构造函数。

### 也可以看看

*   [目录搜索器](http://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher.aspx)

# c++ - Qt中的长线

> ID：10604191
> 
> 赞同：0
> 
> 时间：2012-05-15T15:39:27.163
> 
> 标签：c++, qt, long-lines

我以前读过 C++ 源代码文件中的行长度是有限的，这意味着长度超过无法编译的大小。是吗？正如您在 Qt creator 中所知道的那样，由于使用 Qt 功能，许多行变得很长，例如在标签中写入字符串可能会很长。所以如果我们的队伍变得这么长会发生什么。没关系还是应该做一些技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:28:48.023

正如 tinman 所说，还有[一个问题](https://stackoverflow.com/questions/10519738/source-line-length-limit)可能会给你一些信息。

但是考虑一下：

*   到目前为止，Qt 已经在许多代码行中使用（并且还在增加）。因此，除非您有**非常**特殊的情况，否则您不必担心这个问题。如果您指的是“长 QLabel”，您仍然可以使用换行符编写代码并使用“+”运算符。

*   此外，如果您的代码以这样的方式编写，即使编译器也会窒息，我不想阅读或维护您的代码；）

# c - 如何使用openmp生成线程一次

> ID：10604194
> 
> 赞同：1
> 
> 时间：2012-05-15T15:39:32.937
> 
> 标签：c, linux, gcc, openmp

我在我的程序中使用 openmp，但它并没有加快速度，而是减慢了速度。我的猜测是因为它每次在循环中使用 openmp 时都会产生线程。有没有办法在程序中产生一次线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:53:45.737

根据其他评论，您绝对应该提供代码。

通常，openMP 应用程序设计为运行的线程数是处理器数量的 1-4 倍。

对于任何有兴趣控制产生的线程数量的人，来自：[https ://computing.llnl.gov/tutorials/openMP/](https://computing.llnl.gov/tutorials/openMP/)

> 有多少线程？
> 
> 并行区域中的线程数由以下因素决定，按优先顺序排列：
> 
> *   IF 条款的评估
> *   NUM_THREADS 子句的设置
> *   omp_set_num_threads() 库函数的使用
> *   OMP_NUM_THREADS 环境变量的设置
> *   实现默认值 - 通常是节点上的 CPU 数量，尽管它可能是动态的（参见下一个项目符号）。
> 
> 线程编号从 0（主线程）到 N-1

如何设置线程数环境变量的示例：

```
export OMP_NUM_THREADS=8 
```

希望能帮助到你。

# django - 自定义上下文处理器中的 Django 缓存

> ID：10604196
> 
> 赞同：0
> 
> 时间：2012-05-15T15:39:36.900
> 
> 标签：django, caching

我有一个自定义上下文处理器，用于在站点范围内生成动态菜单和当前应用程序列表：

```
from portal.models import *

def base_items(request):
    return { 
        ...
        'app_items': App.objects.filter(isonline=True), 
        'menu_items': MainMenu.objects.all().order_by('position'),
    } 
```

编辑：

我的模板（请注意，这些 url 中的许多都在 Django 框架之外，并且因语言而异。因此需要将它们硬编码到 db 字段中：

```
<ul class="menu">
            {% for item in menu_items %}
                {% if LANGUAGE_CODE = "en-us" %}
                <li><a title="{{ item.title_en }}" href="{{ item.url_en }}">{{ item.title_en }}</a>
                    <ul>
                    {% for subitem in item.submenu_set.all %}
                        <li><a title="{{ subitem.title_en }}" href="{{ subitem.url_en }}">{{ subitem.title_en }}</a></li>
                    {% endfor %}        
                    </ul>
                </li>
                    {% else %}
                <li><a title="{{ item.title_es }}" href="{{ item.url_es }}">{{ item.title_es }}</a>
                    <ul>
                    {% for subitem in item.submenu_set.all %}
                <li><a title="{{ subitem.title_es }}" href="{{ subitem.url_es }}">{{ subitem.title_es }}</a></li>
                    {% endfor %}        
                    </ul>
                </li>
                {% endif %}
            {% endfor %}    
            </ul> 
```

我的问题是 - 我如何缓存这些不经常更改的结果？

我已经尝试过 @cache_page 装饰器，但我可以看到我的页面仍在访问菜单项对象的数据库。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:42:52.343

您可以使用 django[低级缓存 API](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#the-low-level-cache-api)。请注意，您可能必须[将查询集强制转换为 list](http://www.indirecthit.com/2008/04/28/django-caching-querysets/)。

**或者**，您可以[缓存使用这些查询集的模板片段](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#template-fragment-caching)，因为[查询集是惰性的](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:51:09.760

尝试将 lamdas 表达式返回到您的模板：

```
 'app_items': lambda: App.objects.filter(isonline=True), 
```

这样它就不会被编译/缓存并动态工作。

# java - 只有最后一次调用 TextField 会更新它

> ID：10604199
> 
> 赞同：0
> 
> 时间：2012-05-15T15:39:43.717
> 
> 标签：java, swing, textfield

我想在 JTextField 中以注释的形式向用户显示程序流。仅显示最后一条消息（“完成”）。我怎样才能让我打电话时出现每条消息`setText()`？

```
private class CalculateButtonHandler implements ActionListener {
    public void actionPerformed(ActionEvent e) {            
        String keyValue = keywordTF.getText();
        currentTF.setText("calling 1");
        methodCall1();
        currentTF.setText("calling 2");
        methodCall2();
        currentTF.setText("calling 3");
        methodCall3();
        currentTF.setText("complete");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:48:30.700

原因是 EDT 没有时间重新绘制文本字段，因为您的`methodCall*`方法正在 EDT 上运行。

如果您想显示繁重任务的进度，您应该在工作线程上执行繁重的工作并更新 EDT 上的 UI。通常这是通过使用工作线程中的`SwingWorker`或使用来实现的。`SwingUtilities#invokeLater`

' [Concurrency in Swing'](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)教程包含更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:43:07.377

尝试：

```
String keyValue = keywordTF.getText();

currentTF.setText("calling 1");
methodCall1();
currentTF.setText(currentTF.getText()+"\ncalling 2");
methodCall2();
currentTF.setText(currentTF.getText()+"\ncalling 3");
methodCall3();
currentTF.setText(currentTF.getText()+"\ncomplete"); 
```

效率不是很高，但它会完成工作。

**还**

使用`JTextArea`. `JTextField`主要用于显示一行文本，但听起来您想保留更多日志...也许？如果您仍想使用 a `JTextField`，则将调用中的“\n”字符替换为`setText()`其他适当的分隔符。

# c# - 将值分配给页面 ClientScript 中的注册隐藏字段

> ID：10604203
> 
> 赞同：1
> 
> 时间：2012-05-15T15:39:49.583
> 
> 标签：c#, javascript, asp.net, ajax, vb.net

我在 ASP.net 应用程序中使用 Page.ClientScript.RegisterHiddenField("hf_Name",value)，如何在后面的代码中为相同的隐藏字段“hf_Name”覆盖或分配新值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:48:02.037

`RegisterHiddenField`不创建服务器端控件，它只是创建一个普通的旧控件`<input type="hidden" name="myhiddenField">`

`Page.FindControl("myhiddenField")`永远不会在服务器端找到任何东西，甚至`document.getElementById("myhiddenField")`不会在客户端返回任何内容，因为只分配了名称而不是 id。

因此，如果您需要在服务器端访问它，您应该使用[`HiddenField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hiddenfield.aspx)服务器控件或至少使用`html-input` `type=hidden`with `runat="server"`。

# c# - 从应用程序字符串中获取用户名

> ID：10604208
> 
> 赞同：0
> 
> 时间：2012-05-15T15:40:08.790
> 
> 标签：c#, string, silverlight

我创建了一个 Silverlight 业务应用程序，需要用户登录，一旦他们登录，他们的用户名就会显示在登录状态中。

位于 ApplicationStrings.resx 中的是以下内容 -

```
<data name="WelcomeMessage" xml:space="preserve">
  <value>Welcome {0}</value>
  <comment>{0} = User.DisplayName property</comment>
</data> 
```

我正在尝试获取从此登录的用户的用户名，我尝试过-

```
string userName = System.Convert.ToString(ApplicationStrings.WelcomeMessage); 
```

但是，这会使字符串返回为`Welcome {0}`.

而我真正需要的是`User.DisplayName property`.

我怎样才能达到这个价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:43:39.330

您需要在检索欢迎消息的地方使用 string.Format 。

```
string userName = string.Format(ApplicationStrings.WelcomeMessage, WebContext.Current.User.DisplayName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T15:49:24.360

我是这样做的——

```
string userName = WebContext.Current.User.DisplayName; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:46:39.140

尝试`string.Format`用于`{0}`识别。

# c# - 跳过已在使用的锁定部分

> ID：10604210
> 
> 赞同：1
> 
> 时间：2012-05-15T15:40:21.887
> 
> 标签：c#, multithreading

我有一个关键部分，它只执行一次，但被许多场景调用。如何执行此线程过程并跳过所有其余调用？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T15:43:41.110

```
// Assuming this uses calls from multiple threads, I used volatile.
volatile bool executed = false;
object lockExcecuted = new object();

void DoSomething()
{
    lock (lockExecuted)
    {
        if (executed) return;
        executed = true;
    }
    // do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:46:53.833

```
public static bool hasExecuted = false;

static readonly object lockObject = new object();

static void Method()
{
    lock(lockObject)
    {
        if(!hasExecuted)
        {
            // run code
            hasExecuted = true;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:43:20.590

锁定是首选方法；除非你有更详细的要求。

编辑：添加“仅一次”意味着锁定不足。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T15:44:11.233

用于`lock`仅允许一个线程访问关键部分，并在完成时设置一个标志，表示已完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T15:46:58.363

取决于你的场景。如果此部分返回一个值，您可以使用 .Net 4.0 的新功能 - [Lazy(T)](http://msdn.microsoft.com/en-us/library/ee808725.aspx)

当然，您总是可以在您的关键部分中设置一个标志，并在执行之前检查它的值（这有时在使用单例模式时完成）

# xamarin.ios - Monotouch UIDatePicker SetDate 总是 1 小时 5 分钟

> ID：10604214
> 
> 赞同：1
> 
> 时间：2012-05-15T15:40:42.633
> 
> 标签：xamarin.ios, uidatepicker

我试图在 Monotouch 的 UIDatePicker 上设置初始日期。DatePicker 在 UIDatePickerMode.Time 中始终显示 1:05。如果我什么都不做，它会正确显示当前时间。

任何人都可以帮助我如何在 Monotouch 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T21:19:42.650

您是否正确设置了 NSDate corre？ [这个答案](https://stackoverflow.com/questions/2148906/create-nsdate-monotouch)显示了两种创建 NSDate 的方法。

```
pick = new UIDatePicker (new RectangleF (0, 20, this.View.Bounds.Width, 10));   

// Set NSDate:
DateTime date = DateTime.Parse("1981-07-01 22:21:00");
NSDate nsDate = DateTime.SpecifyKind(date, DateTimeKind.Utc);

// Get DateTime from NSDate:
date = DateTime.SpecifyKind(nsDate, DateTimeKind.Unspecified);
pick.Date = date;
pick.Mode = UIDatePickerMode.Time; 
```

# cobol - 远离安腾

> ID：10604215
> 
> 赞同：6
> 
> 时间：2012-05-15T15:40:43.710
> 
> 标签：cobol, openvms, itanium

我们目前有一个用 COBOL 编写的大型关键业务应用程序，在 OpenVMS（Integrity/Itanium）上运行。

几个月过去了，关于安腾架构寿命的猜测越来越多。当然，没有什么是公开的，但是像[这样](http://www.crn.com/news/data-center/232500251/oracle-hp-lawsuits-intel-declines-to-provide-itanium-documents-to-oracle.htm)和[这样](http://www.crn.com/news/data-center/232500251/oracle-hp-lawsuits-intel-declines-to-provide-itanium-documents-to-oracle.htm)的文章描绘了一幅令人担忧的画面。虽然我找不到任何官方支持这一点，但在我们公司的走廊里，甚至还有 HP 抛弃 OpenVMS 和 HP COBOL 随之而来的抱怨。

我无法相信我们是孤独的。

在我看来，有几个选择：

1.  [使用CHARON-VAX](http://www.stromasys.ch/virtualization-solutions/virtual-vax-on-windows/)或[CHARON-AXP](http://www.stromasys.ch/virtualization-solutions/charon-axp-on-linux/)等产品模拟一些旧硬件并在其上运行应用程序。在我看来，优点是该过程应该相对轻松，尤其是在使用 64 位 (AXP) 选项的情况下。潜在的缺点是性能下降（尽管这应该被越来越快的硬件所抵消）；
2.  将基于 HP COBOL 的应用程序移植到更现代的 COBOL 方言，例如[Visual COBOL](http://www.microfocus.com/products/micro-focus-developer/visual_cobol/index.aspx)。那么，优点在于移植工作量相对较低（仍然是 COBOL）以及可以在 Unix 或 Windows 平台上运行应用程序这一事实。缺点是虽然您正在移植 COBOL，但移植到不同操作系统的事实可能会使事情变得棘手（尤其是如果存在特定于 OpenVMS 的依赖项）；
3.  自动将 COBOL 翻译成更现代的语言，如 Java。这有一个明显的好处，即一举将一个人从所有遗留问题中解放出来：硬件支持、操作系统支持，尤其是寻找管理员和程序员。除了这是一项艰巨的工作之外，一个明显的缺点是最终会使用非惯用的 Java（或最终选择的任何目标语言）。可以说，随着时间的推移，这是可以改善的。
4.  从头开始重写（当然，使用现代技术）。做过这件事的人都知道这是多么昂贵和耗时。我只是将它包括在内以使列表完整:)

请注意，不依赖于专有 DBMS；该数据库是基于 ISAM 文件的。

所以......我的问题是：

**当他们选择的平台是 OpenVMS 和 COBOL 时，其他面临安腾即将过时的人如何保持业务连续性？**

更新：

*我们已经从当地惠普代表那里得到官方保证，至少*在 2022 年之前将支持 Integrity/Itanium/OpenVMS 。我想这意味着整个问题与平台无关，而与语言（COBOL）有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:13:37.657

这项工作的主要问题将是特定于 OpenVMS 的代码部分。在 OpenVMS 上开发的大多数应用程序通常使用不容易移植到另一个平台的例程和过程。与其担心特定的语言兼容性，我最初会关注应用程序使用的运行时例程和命令过程。

另一种方法可能是继续使用当前应用程序，同时开发新应用程序或修改商业应用程序以满足您的需求。虽然 Itanium 的长期地位存在问题，但历史表明 OpenVMS 将在未来一段时间内保持可行。今天仍然有 VAX 机器用于关键业务应用程序。OpenVMS 及其硬件稳定的事实是其长寿的主要原因。

担

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:57:08.403

看起来 COBOL 是让您担心的主要依赖项。我不明白这张图片中的 Itanium+OpenVMS 只是一个平台。

你绝对不是一个人在 OpenVMS 上运行关键任务的东西。HP 站点有 OpenVMS 路线图（Alpha 和 Integrity），目前支持到 2015 年。Oracle 最近似乎试图在不同领域利用它的 SUN 资产。

在任何情况下，如果您的担忧很大（当然我们都担心 COMPAQ，然后是 HP，vax>>alpha>>Itanium 过去的过渡），是时候解开对 COBOL 的依赖了。

所以我现在会考虑绘制从 COBOL 迁移到更便携的语言选择的迁移路径（例如，没有平台扩展的 C/C++ ANSII）。考虑到甲骨文的活动，Java 可能不是最友好的选择。重写，多么不愉快，将更加进步，并且可能会简化整个过程。越早开始，越早完成。

此外，除了模拟器之外，还有很多二手硬件。具有讽刺意味的是，我刚刚认识的一家公司正在逐步采用 Integrity 平台来取代关键任务的 Alpha——我猜，这是“企业测试要求”……

什么都不做也是一种选择，尽管显然风险更大：OpenVMS 平台已被证明是可靠的，因此，另一种选择是，寻找可靠的第三方支持公司可能会延长您未来的硬件应急能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T04:29:15.207

今年夏天的滚动路线图让移植 OpenVMS 看起来像是一个绝妙的主意。

鉴于世界上有多少 COBOL，在可预见的未来，找到支持 COBOL 的人将不是问题。如上所述，其他平台上有 COBOL 编译器。问题在于您的应用程序使用的 OpenVMS 系统服务调用和 DEC 语言扩展。您没有提及数据的存储位置，因此最坏的情况是您的 COBOL 使用 RMS。有一家公司在 Linux 和 Unix 上提供许多 OpenVMS 系统服务的实现。在移植到另一个操作系统时不需要替换这些服务可以降低复杂性。查看 Sector7.com。

# php - 是否可以取消引用 PHP 中的引用？

> ID：10604219
> 
> 赞同：15
> 
> 时间：2012-05-15T15:40:59.437
> 
> 标签：php

我有一个数组用作堆栈来存储通过树的路径。每个元素都指向树中的一个节点，我想弹出最后一个元素，然后将该元素引用的对象设置为 null。

基本上：

```
$node = array_pop($path);
*$node = null; 
```

假设 PHP 像 C-ish 语言一样有一个 '*' 运算符。现在我有一个丑陋的解决方案，从父节点开始并记住我带了哪个孩子，然后将其设置为 null，如下所示：

```
if($goLeft) {
    $parent->left = null;
} else {
    $parent->right = null;
} 
```

我说这很难看，因为包含路径的数组是由我的树类中的公共函数创建的。我想公开直接在通过树的路径中的节点上工作的能力，而不公开解决 PHP 中的特质（功能？）的实现细节。ATM 我需要在返回值中包含一个布尔值（在本例中为 $goLeft），这样我就可以解决无法取消引用引用的问题。

这是我第二次遇到这个问题，所以如果有人知道我可以做类似于第一块代码的方法，请分享！

（编辑）

在尝试了 & 和数组的许多排列之后，事实证明，基本问题是我误解了我得到错误的原因。

我试过

```
$a = ($x > $y) ? &$foo[$bar] : $blah; 
```

并得到“语法错误，意外'&'”。我将此解释为问题出在`$foo[$bar]`. 实际上，罪魁祸首是 ? 运算符，因为

```
if($x > $y) {
    $a = &$foo[$bar];
} else {
    $a = null;
} 
```

工作得很好。因此，我进行了一次疯狂的追逐，为不存在的问题寻找解决方法。只要不打断&的链，PHP就做我想做的事，就是对变量引用的对象（不是变量本身）进行操作。例子

```
$a1 = new SomeClass;
$a2 = &$a1;
$a3 = &$a2;
$a4 = &$a3;

$a4 = 42;    // This actually sets $a1 to 42
var_dump($a1); // Emits 42 
```

让我感到困惑的是，我认为对象无论如何都是通过引用传递的（这是错误的），所以如果表达式解析为对象，我认为 & 是不必要的。我是说：

```
class A {
    public $b;
}

class B {}

$a = new A;
$a->b = new B; 

$c1 = $a->b; 
$c2 = &$a->b;

$c1 = 42; // Merely assigns 42 to $c1
$c2 = 42; // Assigns 42 to $a->b 
```

事实证明，这个确切的问题在[http://www.php.net/manual/en/language.oop5.references.php](http://www.php.net/manual/en/language.oop5.references.php)得到了解决。希望在我第一次阅读时就沉没了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T16:47:43.667

非常有趣的问题！我可能找到了一种解决方法：如果您使用对象引用填充数组，使用`&`运算符，您可以通过将该数组值设置为来销毁原始对象`NULL`。您必须直接对数组进行操作，而不是使用`array_pop`. 之后，您可以弹出数组以释放该位置（然后将包含一个`NULL`值）。

这就是我的意思（基于 Rocket 的代码）：

```
$a=(object)'a';
$b=array(&$a);
$b[0] = NULL;
// array still contains an element
array_pop($b);
// now array is empty
var_dump($a); // NULL 
```

[http://codepad.org/3D7Lphde](http://codepad.org/3D7Lphde)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:31:53.670

我希望我能记住我在哪里读到的，但是 PHP 通过维护一个给定对象的引用计数器来工作。您有一些对象（例如 a `Tree`）引用了某些节点。使用 时`array_pop`，会返回对节点对象的引用（即创建附加引用），但原始引用仍然存在。当您`unset`弹出引用时，该引用已被破坏，但原始对象并未被破坏，因为`Tree`仍然具有该引用。释放该对象内存的唯一方法是`Tree`亲自销毁它（这似乎是您在第二个代码块中所做的事情）。

PHP 似乎没有任何强制内存释放或垃圾回收的方法，所以除非你仔细处理你的引用，否则你会被卡住。

**这是不可能的**

PS我仍然对你想要做什么感到困惑。Rocket 的解释很有帮助，但什么是`$path`，以及它与第二块有何关系？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:27:31.333

只是不要分配`array_pop()`返回值。

```
php > $test = array(1, 2, 3);
php > $test2 = array(0 => &$test[0], 1 => &$test[1], 2 => &$test[2]);
php > array_pop($test2);
php > var_dump($test);
array(3) {
  [0]=>
  &int(1)
  [1]=>
  &int(2)
  [2]=>
  int(3)
}
php > var_dump($test2);
array(2) {
  [0]=>
  &int(1)
  [1]=>
  &int(2)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T17:03:15.823

```
$one = 1;
$two = 2;
$array = array(&$one, &$two);

// magic
end($array);
$array[key($array)] = NULL;

var_dump($two);
// NULL 
```

php 中的引用允许您更改对象。

# ruby-on-rails - attributes_table 有什么作用？

> ID：10604220
> 
> 赞同：1
> 
> 时间：2012-05-15T15:41:03.483
> 
> 标签：ruby-on-rails, activeadmin

有点铁路新手......这真的是一个两部分的问题。第一部分是：以下示例中的 attributes_table 是什么：

```
 show :title => :name do
    attributes_table do
      row :id
      row :name
      row :username
      row :email
      row 'password reset?' do
        resource.reset_password_sent_at || 'no'
      end
      row :last_sign_in_at
      row :created_at
    end
  end 
```

我试着把`attributes_table.inspect`它显示给我一堆 HTML，但我假设它是一个带有方法的对象（也许是一个 to_string 方法或类似的东西？）。

我的下一个问题是：为什么 show 方法不对其中的 attributes_table 块做任何其他事情？例如，如果我在之前添加这一行`attributes_table do`：

```
render 'test' 
```

它似乎被忽略了。如果我删除该`attributes_table`块，那么它会显示 HTML。我的最终目标是在活动管理员中显示一些不直接相关的数据以及此记录——但我不知道如何显示除了 activeadmin 是为了让我显示的内容之外的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:07:34.353

这不是一个完整的答案，但我看到了一些我想解决的困惑。attributes_table 是一个方法调用。

Ruby 有一堆 DSL，因为括号在 ruby​​ 中是可选的，所以看起来与 ruby​​ 代码不同，但实际上是。使用括号，代码将如下所示：

```
show(:title => :name) do
  attributes_table() do
    row(:id)
    row(:name)
    row(:username)
    row(:email)
    row('password reset?') do
      resource.reset_password_sent_at() || 'no'
    end
    row(:last_sign_in_at)
    row(:created_at)
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:01:34.810

> 1) 以下示例中的 attributes_table 是什么？

attributes_table 用于从表中显式列出所需的属性\列以进行显示操作

> 2) 为什么 show 方法不对其中的 attributes_table 块做任何其他事情？
> 
> 诀窍是不要尝试在控制器中使用 Arbre 并渲染一些额外的东西，因为它会变得很混乱。

阅读[https://github.com/gregbell/active_admin/blob/master/docs/6-show-screens.md](https://github.com/gregbell/active_admin/blob/master/docs/6-show-screens.md)

然后[https://github.com/gregbell/active_admin/issues/725](https://github.com/gregbell/active_admin/issues/725)

还有[http://activeadmin.info/documentation.html](http://activeadmin.info/documentation.html)

# mysql - Mysql：当在主服务器上的二进制日志中准确记录事件时

> ID：10604221
> 
> 赞同：2
> 
> 时间：2012-05-15T15:41:03.420
> 
> 标签：mysql, replication, binlog

何时在二进制日志中记录了主服务器上的事件（更新/插入/更改）？

1.  当它在主服务器上启动时，它会被写入 bin 日志
2.  当它在 master 上启动并完成时，将被记录

具体来说，我想知道在 ALTER 情况下的行为如果答案是 1，则在正常情况下，主从之间不会存在延迟，因为只有在主控上启动了 ALTER。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:11:01.237

非事务性语句会立即写入二进制日志。对于[MySQL 5+](http://dev.mysql.com/doc/refman/5.0/en/replication-features-transactions.html)，这意味着任何针对不支持事务的存储引擎的语句都会立即写入。

不过，您不应该对事务中的非事务表执行语句。

事务提交时，事务语句将写入二进制日志。对于 MySQL 5+，这意味着针对事务表的任何语句。

目前， ALTER TABLE 强制隐式提交，因此这将立即写入二进制日志。根据 MySQL[文档](http://dev.mysql.com/doc/refman/5.0/en/binary-log.html)：

> 在语句完成后但在任何锁被释放或任何提交完成之前立即完成二进制日志记录。这可确保日志按执行顺序记录。

# asp.net-mvc - 如何在到达控制器之前更改动作（路线）

> ID：10604222
> 
> 赞同：1
> 
> 时间：2012-05-15T15:41:13.110
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

任何人都知道如何在 Application_BeginRequest 方法中更改路由/动作（只是动作，无需更改控制器），或者在它到达控制器之前的任何其他东西

这是我目前的解决方案：

```
public class MyFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.HttpContext.Request.ContentType == "application/x-amf")
        {
            //... some stuff
            filterContext.ActionParameters["target"] = body.Target;
            //...
            base.OnActionExecuting(filterContext);
        }
    }
} 
```

我在所有行动中得到了目标

```
 [MyFilter]
 public ActionResult(string target)
 {
      return RedirectToAction(target);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:18:17.517

两种方法浮现在脑海中 CreateActionInvoker 和 HandleUnknownAction 都可以做你正在寻找的事情，这取决于你做它的方式和原因。

```
public class MyController
{
        protected override IActionInvoker CreateActionInvoker()
        {
            return base.CreateActionInvoker();
        }
        protected override void HandleUnknownAction(string actionName)
        {
            base.HandleUnknownAction(actionName);
        }
} 
```

**编辑**添加动作调用者的例子

```
public class MyController : Controller
{
    protected override IActionInvoker CreateActionInvoker()
    {
        if (this.Request.ContentType == "application/x-amf")
        {
            return new XAMFActionInvoker();
        }
        return base.CreateActionInvoker();
    }

    public class XAMFActionInvoker : IActionInvoker
    {
        public bool InvokeAction(ControllerContext controllerContext, string actionName)
        {
            // find the action you want to invoke
            var method = controllerContext.Controller.GetType().GetMethod("xamfAction");
            var result = (ActionResult)method.Invoke(controllerContext.Controller,... your actionName parameters...);
            result.ExecuteResult(controllerContext);
        }
    }
} 
```

**编辑 2** 另一个选项，如果您要覆盖的不仅仅是操作，而且控制器也在更改默认的 ControllerFactory。在您的 Application_Start 中，将新的控制器工厂设置为您为此场合构建的自定义。但是，这相当复杂，因此除非您需要大量控制，否则我不推荐它。

```
 ControllerBuilder.Current.SetControllerFactory(IController factory) 
```

**编辑 3** 最后一个示例是不添加任何操作，而只是覆盖 HandleUnknownAction。这将允许您自定义将您的操作路由到您喜欢的任何方法。

# reporting-services - 具有 SSRS 向下钻取的 SSAS

> ID：10604227
> 
> 赞同：1
> 
> 时间：2012-05-15T15:41:28.587
> 
> 标签：reporting-services

我有一份 SSRS 报告，显示每位临床医生过去 10 周每个周末的总数。该报告以列组为周结束，以行组为临床医生。但是我的第二个报告是关于周末的详细信息钻取报告应该显示该周的所有日期并显示数据。

```
临床医生 第 1 周 第 2 周 第 3 周
--------------------------------------
临床医生 1 10 25 35
临床医生2 23 40 112
......
......
......

```

在上述示例中，第 1 周、第 2 周或第 3 周下的每个总计都是明细报表的下钻。这种向下钻取有效，但是当我需要显示所有工作日时，即使没有该临床医生的数据。现在我只能显示特定一周内有数据的那些日子。请任何帮助将不胜感激。

谢谢

**编辑：**

```
SELECT { [Measures].[Count of ID] } ON COLUMNS, { ([Data].[ClinicianName].[ClinicianName].ALLMEMBERS * [Data].[FacilityName].[FacilityName].ALLMEMBERS * [Data].[FacilityID].[FacilityID].ALLMEMBERS * [Data].[WeekEnd].[WeekEnd].ALLMEMBERS * [Data].[FullWeekName].[FullWeekName].ALLMEMBERS * [Data].[DateNumber].[DateNumber].ALLMEMBERS ) } DIMENSION PROPERTIES MEMBER_CAPTION, MEMBER_UNIQUE_NAME ON ROWS FROM ( SELECT ( STRTOSET(@DataFacilityID, CONSTRAINED) ) ON COLUMNS FROM ( SELECT ( STRTOSET(@DataClinicianID, CONSTRAINED) ) ON COLUMNS FROM ( SELECT ( STRTOSET(@DataWeekEnd, CONSTRAINED) ) ON COLUMNS FROM [Model]))) WHERE ( IIF( STRTOSET(@DataClinicianID, CONSTRAINED).Count = 1, STRTOSET(@DataClinicianID, CONSTRAINED), [Data].[ClinicianID].currentmember ) ) CELL PROPERTIES VALUE, BACK_COLOR, FORE_COLOR, FORMATTED_VALUE, FORMAT_STRING, FONT_NAME, FONT_SIZE, FONT_FLAGS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:10:10.583

如果您在 SSRS 中使用 MDX 查询生成器，则有一个“显示空单元格”按钮... ![在此处输入图像描述](../Images/0d0866a8150a9e8c5e5b4e71160e86c6.png)

...或者如果您手动构建 MDX，只需删除 NonEmpty 函数...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:30:41.097

我实际上最终使用了带有存储过程的链接服务器，它就像一个魅力，性能很好，因为我基本上从多维数据集过滤数据。

# jquery - 版本更改jquery错误

> ID：10604228
> 
> 赞同：2
> 
> 时间：2012-05-15T15:41:29.250
> 
> 标签：jquery, asp-classic, version

大家好，我已经使用 asp 构建了一个 web 应用程序，其中包括来自 bootstap (boorstrap-dropdown.js) 的一些 jquery。

对于其他一些比我开发的项目版本低的项目，我将版本从 4 更改为 3.5。

现在我收到一个错误

> “Microsoft JScript 运行时错误：无法获取属性‘fn’的值：对象为空或未定义”
> 
> “Microsoft JScript 运行时错误：预期对象”
> 
> “Microsoft JScript 运行时错误：对象不支持属性或方法‘折叠’”

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:44:36.570

看来您在 jquery 和其他 js 库之间存在冲突。查看[noConflict](http://api.jquery.com/jQuery.noConflict/)指令，看看这是否为您解决了问题。

# c++ - 对 r 值引用的困惑

> ID：10604237
> 
> 赞同：4
> 
> 时间：2012-05-15T15:41:52.337
> 
> 标签：c++, c++11, rvalue-reference

```
#include <iostream>

class Foo { };

Foo createFoo() { return Foo(); }

void bar(Foo &&) { std::cout << "in bar(Foo &&)\n"; }

void bar(Foo const &) { std::cout << "in bar(Foo const &)\n"; }

void baz(Foo &&f) {
    std::cout << "in baz, ";
    bar(f);
    // bar(std::move(f));
}

int main()
{
    baz(createFoo());
    return 0;
} 
```

我的预期输出是：`in baz, in bar(Foo &&)`，但我得到：`in baz, in bar(Foo const &)`。如果我将调用切换到`bar`（参见评论），我会得到预期的输出，但这对我来说似乎是错误的。`bar(Foo &&)`如果没有我将 a 转换`Foo&&`为 a ，编译器是否无法调用`Foo&&`？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T15:52:17.437

里面`baz(Foo&& f)`，`f`是一个**左值**。因此，要将其`bar`作为右值引用传递，您必须将其转换为右值。您可以使用`static_cast<Foo&&>(f)`或执行此操作`std::move(f)`。

这是为了避免在同一个函数中多次意外移动内容，例如多次调用`bar(f)`inside `baz`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T15:56:25.707

简而言之，规则是命名的右值引用是一个左值。这是为了防止自动移出稍后需要使用的命名变量。相反，未命名的临时对象永远不能再次使用，因此可以自动移出。

我发现这个系列[http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)非常有用，尽管它有点旧。

# matlab - matlab以编程方式为图形分配“导出设置”->“加载设置”

> ID：10604239
> 
> 赞同：6
> 
> 时间：2012-05-15T15:42:07.500
> 
> 标签：matlab

我有一些图形样式保存在文件->“导出设置”下访问的“导出设置”对话框中。

有没有办法以编程方式加载我的一种样式？IE。我目前需要多次点击鼠标来加载我想要的样式，然后将其应用于图形，然后告诉它导出并为文件命名。我觉得这一切都应该通过几个命令来完成，但我找不到正确的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T16:34:17.803

[我在这个线程](http://www.mathworks.com/matlabcentral/newsreader/view_thread/152026)的底部找到了这个解决方案：

```
 % create an example fig that we want to format with style file 'foo'
 plot(rand(14,10));

 % get style sheet info
 snam='foo'; % The name of your style file (NO extension)
 s=hgexport('readstyle',snam);

 %apply style sheet info
 fnam='myfig.jpeg'; % your file name
 s.Format = 'jpeg'; %I needed this to make it work but maybe you wont.
 hgexport(gcf,fnam,s); 
```

在您当前的文件夹中应该有一个名为“myfig.jpeg”的文件，它是您在“foo”中进行的导出设置的图形。如果要查看样式文件选项，请`s`在命令行中键入。它应该是这样的结构，其中包含所有导出设置。

```
s = 

            Version: '1'
             Format: 'jpeg'
            Preview: 'none'
              Width: 'auto'
             Height: 'auto'
              Units: 'points'
              Color: 'rgb'
         Background: 'w'
      FixedFontSize: '10'
     ScaledFontSize: 'auto'
           FontMode: 'scaled'
        FontSizeMin: '8'
     FixedLineWidth: '1'
    ScaledLineWidth: 'auto'
           LineMode: 'scaled'
       LineWidthMin: '2'
           FontName: 'Wingdings'
         FontWeight: 'auto'
          FontAngle: 'auto'
       FontEncoding: 'latin1'
            PSLevel: '2'
           Renderer: 'auto'
         Resolution: 'auto'
       LineStyleMap: 'none'
         ApplyStyle: '0'
             Bounds: 'loose'
           LockAxes: 'on'
             ShowUI: 'on'
       SeparateText: 'off' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T14:13:00.780

使用 MATLAB 中心的以下“SDF”包。这只是一行命令。将此 sdf.m 文件放在您的路径中。这是一个例子。

```
figure;
hold on;
plot(rand(1,100));
plot(rand(1,100), 'r');
grid on;
box on;
sdf('mystyle');          %"mystyle" is the name of export style 
```

[http://www.mathworks.com/matlabcentral/fileexchange/24807-sdf-set-the-figure](http://www.mathworks.com/matlabcentral/fileexchange/24807-sdf-set-the-figure)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:14:22.593

不容易。

当您从“导出设置”对话框保存样式时，相关信息会保存到 MATLAB 首选项目录中的文本文件中。如果您键入`cd(fullfile(prefdir, 'ExportSetup'))`，您可以看到它们。“导出设置”对话框执行了许多您在创建、应用和保存新样式时无法通过这些文件轻松访问的内容。

从理论上讲，您可以自己阅读和解析这些文件并以编程方式应用该样式，但我不知道您是否会发现它值得付出努力。

您可能会发现创建绘图、应用所需的任何更改和格式，然后自动生成新命令（`File->Generate Code`从“图形”菜单中）更容易。然后，您可以只调用该命令而不是常规绘图命令，并将您的图形设置为您的要求。

希望有帮助。

# c++ - win32 vs2010 null 取消引用中的调用堆栈损坏，但在 x64 中没有

> ID：10604243
> 
> 赞同：0
> 
> 时间：2012-05-15T15:42:18.223
> 
> 标签：c++, c, visual-studio-2010, 64-bit

我用 vs2010 创建了一个简单的 win32 控制台程序并创建了一个空解引用：

```
int _tmain(int argc, _TCHAR* argv[])
{
    if (*(int*)(NULL) == 5) {
        printf("foo");
    }
    return 0;
} 
```

当我使用`x64`配置运行它时，我在调试器中得到一个“未处理的异常”和有效的调用堆栈。当我切换到 时`win32`，我仍然得到一个“未处理的异常”，但是，堆栈是无效的。我得到以下信息：

```
ntdll.dll!770a15de()    
[Frames below may be incorrect and/or missing, no symbols loaded for ntdll.dll] 
ntdll.dll!770a15de()    
ntdll.dll!7709014e()    
>msvcr100d.dll!_heap_alloc_dbg_impl(...)
ffffffff() 
```

任何想法这里发生了什么以及我如何纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T16:07:02.487

问题是某些 Windows 库缺少符号；这可能使其在 32 位运行中错误解析堆栈。打开工具\选项>调试>本机：'加载DLL导出'。加载 ntdll.dll 的符号可能也很有用（在“模块”窗口中右键单击它）。在那之后，引发异常的帧有时仍然丢失，但至少你看到了调用堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T22:15:49.357

我用默认的“Win32 Debug”尝试了你的代码，我得到了一个有效的调用堆栈。我正在使用 Windows SDK 7.1。您应该检查您的项目设置。

```
#include <stdio.h>
#include <tchar.h>

int _tmain(int argc, _TCHAR* argv[])
{
    if (*(int*)(NULL) == 5) {
        printf("foo");
    }
    return 0;
}

test.exe!wmain(int argc, wchar_t**argv) Line 6
test.exe!__tmainCRTStartup() Line552 + 0x19 bytes
...

First-chance exception at 0x0003139e in test.exe: 0xC0000005: Access violation reading location 0x00000000.
Unhandled exception at 0x0003139e in test.exe: 0xC0000005: Access violation reading location 0x00000000. 
```

# visual-studio-2010 - 从文件中读取 xml 时出现内存不足异常

> ID：10604244
> 
> 赞同：0
> 
> 时间：2012-05-15T15:42:20.003
> 
> 标签：visual-studio-2010, out-of-memory

我正在使用 twitter api 数据，在将流结果存储在文本文件中之后，我将数据输入到解析器应用程序中。我计划的是大型数据文件，所以我阅读内容时使用分隔符]} 分隔各个帖子以避免潜在的错误？备份功能是使用缓冲区读取数据，然后剪切到各个帖子中。但问题是，在某些情况下，对于单个帖子，会出现内存异常。现在，当我查看单个帖子时，它似乎不一定很大，但文本将包含外来字符或某些编码，我猜这会导致内存异常。我还没有弄清楚是否正是这样，但我想我会从这里得到一些意见或建议......

```
 myreader.TextFieldType = FileIO.FieldType.Delimited
        myreader.SetDelimiters("]}}")
        Dim currentRow As String()

        Try

            While Not myreader.EndOfData
                Try
                    currentRow = myreader.ReadFields()
                    Dim currentField As String

                    For Each currentField In currentRow
                        data = data + currentField
                        counter += 1
                        If counter = 1000 Then
                            Dim pt As New parsingUtilities
                            If Not data = "" Then
                                pt.getNodes(data)
                                counter = 0
                            End If
                        End If
                    Next
                Catch ex As Exception
                    If ex.Message.Contains("MemoryException") Then
                        fileBKup()
                    End If
                End Try 
```

另一次发生内存异常时，我尝试拆分为不同的帖子：

```
 Dim sampleResults() As String
    Dim stringSplitter() As String = {"}}"}

    ' split the file content based on the closing entry tag
    sampleResults = Nothing
    Try
        sampleResults = post.Split(stringSplitter, StringSplitOptions.RemoveEmptyEntries)

    Catch ex As Exception
        appLogs.constructLog(ex.Message.ToString, True, True)
        moveErrorFiles(form1.infile)
        Exit Sub
    End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:56:39.997

我预计问题是字符串。

字符串是不可变的，这意味着每次您认为您正在通过这样做来更改字符串

```
data = data + currentField 
```

您实际上是在内存中创建另一个新字符串。因此，如果您这样做数千次，它可能会导致问题，因为它们会安装并且您会收到 OutOfMemoryException。

如果您正在构建字符串，则应该使用 StringBuilder 。

# c - 在普通文件中搜索字符串

> ID：10604248
> 
> 赞同：0
> 
> 时间：2012-05-15T15:42:41.830
> 
> 标签：c, linux

在 C 程序中，我需要在普通文件中搜索确切的字符串（我使用 Linux）。我该怎么做才能搜索？

我的第一个假设包括将文件的每一行移动到 RAM（通过*fgets()*），并且在每次移动之后，检查该行是否是正确的字符串。如果不是，循环将重新调用*fgets()*并检查字符串直到 EOF。

但是一个有 1.5 亿行的文件会发生什么呢？碰巧这种顺序搜索似乎根本无效。

但是，我正在考虑一种二进制搜索，使用插入排序来对我的程序添加到文件中的行进行排序（它每 3 秒左右添加一行，在检查该行没有出现在字符串文件）。但后来我放弃了，因为我首先需要将行移动到 RAM，使用与顺序搜索相同的时间。因此我选择了顺序搜索。

这个假设正确吗？或者，还有更好的方法？我真的希望如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:00:39.747

您可以使用`mmap`将整个文件映射到内存中，然后进行`strnstr`搜索：

```
#include <sys/mman.h>

const char *fileName = "~/test.txt";
long fileLength;

// open file and get it's length
FILE *fptr = fopen(fileName, "r");

if (fptr == NULL || ferror(fptr))
{
    perror("could not open file");
    fclose(fptr);
    return 0;
}

fseek(fptr, 0, SEEK_END);
fileLength = ftell(fptr);
// return to the start of the file
fseek(fptr, 0, SEEK_SET);

// map the file
char *fileData = mmap(NULL, fileLength, PROT_READ, MAP_FILE | MAP_SHARED, fileno(fptr), 0);

if (fileData == MAP_FAILED)
    perror("could not map file");

// scan the file
char stringToSearchFor[] = "this is my string!";
if (strnstr(fileData, stringToSearchFor, fileLength) != NULL)
{
    printf("file contains the string!");
}
else {
    printf("file doesn't contain the string");
}

// clean up our code
munmap(fileData, fileLength);
fclose(fptr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:56:40.973

你能提供更多信息吗？普通文件是什么意思？您需要进行的最大文件大小是多少？

如果它是大文件并且您需要执行快速搜索，请遵循下一个算法原型：

*   为您的文件创建索引
*   在索引中执行搜索
*   在文件中添加新信息后启动索引过程。（将创建增量索引）
*   使用当前索引添加增量索引 注意：您需要缓存新信息以提供更好的性能。

您的搜索算法将取决于您将使用的索引类型。（可能是锥树、二叉树等）

有关更多信息，您需要阅读有关索引、在索引中搜索、存在的开源搜索系统，例如：apache lucene 和 sphinx。

**UPD：这将是有用的链接：** [实现文本文件内容的索引](https://stackoverflow.com/questions/4588085/implementing-a-index-for-text-file-content)

[https://superuser.com/questions/233665/efficient-way-to-index-text-files](https://superuser.com/questions/233665/efficient-way-to-index-text-files)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:00:47.623

在尝试匹配大数据上的字符串时，加快过程的一个技巧可能是创建*快捷过滤器*。Firefox 扩展 AdBlock Plus 实际上使用了这种技术来检查传入的页面请求并将这些请求与大量过滤器进行匹配。然后它会阻止匹配的过滤器（广告）。但我离题了。

当您将字符串与 n 字面值匹配时，从算法上讲，在[最佳情况下](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)需要 O(n) 时间 减少匹配字符串时间消耗的技巧是减小大小*n*。快捷过滤器的概念是您创建包含在相关字符串中的短模式。这样，您就可以减少检查每个字符串的正确性的时间。如果过滤器与字符串匹配，则检查完整的字符串。

基本上可以说我有 3 个字符串：

1) ABCDABCD 2) DCBABCDA 3) ABDEFGHI

假设我有一个模式“ABC”。迭代时，第一个和第二个字符串将返回匹配项。第三个字符串被拒绝。然后，您只检查那些与模式匹配的字符串是否有正确的字符串。另一方面。模式“EFG”拒绝 1 和 2（在更短的时间内）并匹配 3。

通过使用哈希表可以进一步改进子串的匹配。在这里，您可以像上面一样固定子字符串的大小，比如 3。然后，对于每个字符串，您计算所有长度为 3 的子字符串的哈希值。这样，您可以快速确定（在 O(1) 时间内）哪些模式与字符串匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T15:46:07.130

用于[`mmap`](http://linux.die.net/man/3/mmap)将文件映射到内存，然后[`memmem`](http://linux.die.net/man/3/memmem)对其进行标准搜索。您的操作系统将根据需要负责读取文件。

# jquery - 调用 $(this) 中的元素？

> ID：10604251
> 
> 赞同：3
> 
> 时间：2012-05-15T15:42:47.837
> 
> 标签：jquery

> **可能重复：**
> [如何在元素中查找元素](https://stackoverflow.com/questions/7386100/how-to-find-an-element-within-an-element)

我正在运行一个循环来遍历每个表格行。我想访问每个表格行中的元素。我该怎么做呢？

**桌子：**

```
<table>
<tr> <td class="a">x</td> <td class="b">x</td> <td class="c">x</td> </tr>
<tr> <td class="a">x</td> <td class="b">x</td> <td class="c">x</td> </tr>
<tr> <td class="a">x</td> <td class="b">x</td> <td class="c">x</td> </tr>
<tr> <td class="a">x</td> <td class="b">x</td> <td class="c">x</td> </tr>
</table> 
```

**代码不起作用：**

```
$("tr").each(function(index) {

    // get class a text
    $(this + " td.a").text();

    // get class b text
    $(this + " td.b").text();

    // get class c text
    $(this + " td.c").text();

}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T15:43:49.627

您可以使用[`children`](http://api.jquery.com/children/)方法：

```
$("tr").each(function(index) {

    // get class a text
    var text1 = $(this).children("td.a").text();

    // get class b text
    var text2 = $(this).children("td.b").text();

    // get class c text
    var text2 = $(this).children("td.c").text();

}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T15:44:57.627

jQuery 函数的第二个参数是*context*：

```
$("td.a", this).text(); 
```

这将找到所有`td.a`属于`this`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T15:44:29.860

如果您“正常”访问它（即不使用 jQuery），您可以获取该`cells`属性。

```
var trs = document.getElementsByTagName('tr'), l = trs.length, i, tds;
for( i=0; i<l; i++) {
    tds = trs[i].cells;
    // do stuff with tds
] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-15T15:45:15.177

如果您需要`$(this)`多次调用，则应将其分配给局部变量以提高性能。有关更多信息，请参阅此帖子：

[jQuery 中的 $this 与 $(this)](https://stackoverflow.com/questions/7389944/this-vs-this-in-jquery)

最后，您可以使用`.find()`您想要实现的目标：

```
$("tr").each(function(index) {

    var $this = $(this);

    // get class a text
    $this.find("td.a").text();

    // get class b text
    $this.find("td.b").text();

    // get class c text
    $this.find("td.c").text();

}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T15:46:35.767

```
$("tr").each(function(index) {

    // get class a text
    $("td.a", this).text();

    // get class b text
    $("td.b", this).text();

    // get class c text
    $("td.c", this).text();

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T15:45:07.113

```
$("tr").each(function() {
    var $this = $(this),
        aText = $this.find('.a').text(),
        bText = $this.find('.b').text(),
        cText = $this.find('.c').text();
}); 
```

# c++ - 构建 ATL 项目

> ID：10604256
> 
> 赞同：1
> 
> 时间：2012-05-15T15:43:03.310
> 
> 标签：c++, atl

我正在尝试在构建服务器上构建基于 ATL 的项目。为此，我安装了最新的 Windows SDK，但出现错误：

“无法打开包含文件：'atlbase.h'：没有这样的文件或目录”。

我已经检查过了，令我惊讶的是 SDK 不再包含 ATL。我既不能在这个阶段重构 ATL，也不能在构建服务器上安装 VS。构建 ATL 的额外设置是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:46:49.297

ATL / MFC 由 VS 安装，因此，如果您无法安装 VS，也许您可​​以将其安装在某个地方，然后获取头文件、库和 DLL 并在您的构建服务器上手动安装它们。有点乱，但它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T20:12:06.733

我最近遇到了同样的问题。如果您使用的是 Microsoft Visual Studio 的 Express 版本，则不能使用 ATL。我知道这听起来不合逻辑，但我想没有办法做到这一点。一些 MSDN 人员告诉我，在 Microsoft Visual Studio Express Editions 的许可证文件中，有一行关于此的内容。ATL 不是免费的，因此您必须购买它，或者使用 Microsoft Visual Studio 的专业版。

在 Microsoft Driver Dev Kit 中，有 ATL 类，但它们给出了奇怪的链接错误。所以，我猜你必须使用 Microsoft Visual Studio 2008 Professional 或 2010 Professional。

如果我想在设置 ATL 时遇到更多错误/问题，我可以为您提供更多帮助。

小心。

# regex - 如果条件不成立，则在 .htaccess 中重定向

> ID：10604260
> 
> 赞同：1
> 
> 时间：2012-05-15T15:43:24.500
> 
> 标签：regex, apache, .htaccess, magento

我正在尝试从以下位置重定向我的客户：
`/media/pdf/pds/.../file.pdf` ***->*** `/media/pdf/pds/English/.../file.pdf`

~~我目前的方法，女巫失败了：~~

```
RewriteCond %{REQUEST_URI} !^/media/pdf/pds/English/(.*)$
RedirectMatch 301 ^/media/pdf/pds/(.*)$ /media/pdf/pds/English/$1 
```

我目前的方法，女巫也失败了：***<-（已编辑）***

```
RewriteCond %{REQUEST_URI} !^/media/pdf/pds/English/ [NC]
RewriteRule ^media/pdf/pds/(.*)$ media/pdf/pds/English/$1 [NC,L,R=301] 
```

我也试过：

```
RewriteCond %{REQUEST_URI} (?!English)
RedirectMatch 301 ^/media/pdf/pds/(.*)$ /media/pdf/pds/English/$1 
```

上面的例子来自不同的教程，我试图寻找答案，但感觉失败了，我现在把希望留给 Stack Overflow 的英雄们。

**让我自豪！** `;^)`

* * *

## 编辑 - 添加附加信息

这是一个 Magento 安装，所以 htaccess 文件非常大。但也许有别的东西以某种方式打断了这种情况。
我只编辑了文件的顶部和底部。

```
RedirectMatch 301 ^/pdf/(.*)$ /media/pdf/$1

############################################
## uncomment these lines for CGI mode
## make sure to specify the correct cgi php binary file name
## it might be /cgi-bin/php-cgi

#    Action php5-cgi /cgi-bin/php5-cgi
#    AddHandler php5-cgi .php

############################################
## GoDaddy specific options

#   Options -MultiViews

## you might also need to add this line to php.ini
##     cgi.fix_pathinfo = 1
## if it still doesn't work, rename php.ini to php5.ini

############################################
## this line is specific for 1and1 hosting

#AddType x-mapp-php5 .php
#AddHandler x-mapp-php5 .php

############################################
## default index file

DirectoryIndex index.php

<IfModule mod_php5.c>

############################################
## adjust memory limit

#    php_value memory_limit 64M
php_value memory_limit 256M
php_value max_execution_time 18000

############################################
## disable magic quotes for php request vars

php_flag magic_quotes_gpc off

############################################
## disable automatic session start
## before autoload was initialized

php_flag session.auto_start off

############################################
## enable resulting html compression

#php_flag zlib.output_compression on

###########################################
# disable user agent verification to not break multiple image upload

php_flag suhosin.session.cryptua off

###########################################
# turn off compatibility with PHP4 when dealing with objects

php_flag zend.ze1_compatibility_mode Off

</IfModule>

<IfModule mod_security.c>
###########################################
# disable POST processing to not break multiple image upload

SecFilterEngine Off
SecFilterScanPOST Off
</IfModule>

<IfModule mod_deflate.c>

############################################
## enable apache served files compression
## http://developer.yahoo.com/performance/rules.html#gzip

# Insert filter on all content
###SetOutputFilter DEFLATE
# Insert filter on selected content types only
#AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript

# Netscape 4.x has some problems...
#BrowserMatch ^Mozilla/4 gzip-only-text/html

# Netscape 4.06-4.08 have some more problems
#BrowserMatch ^Mozilla/4\.0[678] no-gzip

# MSIE masquerades as Netscape, but it is fine
#BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

# Don't compress images
#SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary

# Make sure proxies don't deliver the wrong content
#Header append Vary User-Agent env=!dont-vary

</IfModule>

<IfModule mod_ssl.c>

############################################
## make HTTPS env vars available for CGI mode

SSLOptions StdEnvVars

</IfModule>

<IfModule mod_rewrite.c>

############################################
## enable rewrites

Options +FollowSymLinks
RewriteEngine on

############################################
## you can put here your magento root folder
## path relative to web root

#RewriteBase /magento/

############################################
## workaround for HTTP authorization
## in CGI environment

RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

############################################
## always send 404 on missing files in these folders

RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

############################################
## never rewrite for existing files, directories and links

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

############################################
## rewrite everything else to index.php

RewriteRule .* index.php [L]

</IfModule>

############################################
## Prevent character encoding issues from server overrides
## If you still have problems, use the second line instead

AddDefaultCharset Off
#AddDefaultCharset UTF-8

<IfModule mod_expires.c>

############################################
## Add default Expires header
## http://developer.yahoo.com/performance/rules.html#expires

ExpiresDefault "access plus 1 year"

</IfModule>

############################################
## By default allow all access

Order allow,deny
Allow from all

###########################################
## Deny access to release notes to prevent disclosure of the installed Magento version

<Files RELEASE_NOTES.txt>
    order allow,deny
    deny from all
</Files>

############################################
## If running in cluster environment, uncomment this
## http://developer.yahoo.com/performance/rules.html#etags

#FileETag none

SetEnvIf Request_URI "\.(?i:pdf)$" requested_pdf=pdf
Header add Content-Disposition "attachment" env=requested_pdf 
```

## 再次编辑 - 添加更多附加信息

似乎我们在媒体文件夹中也有一个 htaccess 文件，如下所示：

```
Options All -Indexes
<IfModule mod_php5.c>
php_flag engine 0
</IfModule>

AddHandler cgi-script .php .pl .py .jsp .asp .htm .shtml .sh .cgi
Options -ExecCGI

<IfModule mod_rewrite.c>

############################################
## enable rewrites

    Options +FollowSymLinks
    RewriteEngine on

############################################
## never rewrite for existing files
    RewriteCond %{REQUEST_FILENAME} !-f

############################################
## rewrite everything else to index.php

    RewriteRule .* ../get.php [L]
</IfModule> 
```

### 我还在 media/pdf 文件夹中添加了一个新的 htaccess 文件：

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{REQUEST_URI} !^/media/pdf/pds/English/ [NC]
RewriteRule ^media/pdf/pds/(.*)$ media/pdf/pds/English/$1 [NC,L,R=301] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:55:43.970

您的方法将不起作用-`RewriteCond`指令来自一个模块（mod_rewrite）而`RedirectMatch`来自另一个模块（mod_alias）。

您唯一的选择是仅使用 mod_rewrite 指令：

```
RewriteEngine On
RewriteBase /

Options +FollowSymLinks +SymLinksIfOwnerMatch

RewriteCond %{REQUEST_URI} !^/media/pdf/pds/English/ [NC]
RewriteRule ^media/pdf/pds/(.+)$ /media/pdf/pds/English/$1 [NC,L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:49:45.487

我不相信`RedirectMatch`能够遵循`RewriteCond`. 改为使用`RerwiteRule`。

```
# Matches the pdf path
RewriteCond ${REQUEST_URI} /media/pdf/pds
# But not English
RewriteCond %{REQUEST_URI} !^/media/pdf/pds/English
# Rewrite with a 301
RewriteRule ^media/pdf/pds/(.*)$ media/pdf/pds/English/$1 [L,R=301] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T21:58:43.670

在`$DOCUMENT_ROOT/media`目录下的 .htaccess 中，您的 .htaccess 如下所示：

```
Options All -Indexes
<IfModule mod_php5.c>
php_flag engine 0
</IfModule>

<IfModule mod_rewrite.c>
  ## enable rewrites  
    Options +FollowSymLinks
    RewriteEngine on
    RewriteBase /media/

    # your redirect rule
    RewriteRule ^(pdf/pds)/((?!English/).*)$ $1/English/$2 [NC,L,R=302]

############################################
## never rewrite for existing files
    RewriteCond %{REQUEST_FILENAME} !-f
## rewrite everything else to index.php
    RewriteRule .* ../get.php [L]
</IfModule> 
```

*   删除目录下的 .htaccess `$DOCUMENT_ROOT/media/pdf/`。
*   清除浏览器缓存并重新启动浏览器。
*   只有在您验证上述代码工作更改`R=302`为`R=301`.

# asp.net-mvc-3 - MVC3 Razor @if 中是否存在错误

> ID：10604261
> 
> 赞同：0
> 
> 时间：2012-05-15T15:43:31.457
> 
> 标签：asp.net-mvc-3, syntax, razor

我有几个可能需要或可能不需要显示的表单字段，具体取决于为其加载表单的实体。所以在我的模型中，我相应地分配了布尔属性。

表单中的每个字段都有一个对应的“标签”（不是 html 标签）。以下代码隐藏了 html 输入元素，但没有隐藏标签！？！？

```
<!-- DBA: _________________ -->
<tr>
    <td>
        @if (Model.DisplayDBAField)
        {
            @Html.Raw("DBA:")
        }
    </td>
    <td>
        @Html.TextBox("DoingBusinessAs", Model.DoingBusinessAs, new { style = string.Format("visibility: {0};", Model.DisplayDBAField ? "visible" : "hidden") })
    </td>
</tr> 
```

为了获得所需的显示，即标签和输入都不显示，我不得不将上面的内容重写如下：

```
<!-- DBA: _________________ -->
<tr>
    <td>
        @Html.Raw(Model.DisplayDBAField ? "DBA:" : "")
    </td>
    <td>
        @Html.TextBox("DoingBusinessAs", Model.DoingBusinessAs, new { style = string.Format("visibility: {0};", Model.DisplayDBAField ? "visible" : "hidden") })
    </td>
</tr> 
```

出于某种原因，代码块 [@if (Model.DisplayDBAField){}] 永远不会计算为 true。这是 Razor 错误吗？Visual Studio 错误？Asp.Net 错误？

根据 MilkyWayJoe 的要求：这是控制器中的代码：

```
if (!string.IsNullOrEmpty(hiddenFields))
{
    profile.DisplayDBAField = !hiddenFields.Contains("DBA");
    profile.DisplayVendorIDField = !hiddenFields.Contains("VendorID");
    profile.DisplayContactNameFields = !hiddenFields.Contains("ContactName");
} 
```

上面的代码工作正常，我单步执行，字段设置/取消设置正确。这是模型：

```
public class ProfileModel
{
    public EntityProfile Entity { get; set; }
    public bool DisplayDBAField { get; set; }
    public bool DisplayVendorIDField { get; set; }
    public bool DisplayContactNameFields { get; set; }
    public bool DisplayDistributionMethodField { get; set; }
    public bool DisplayCardPurposeField { get; set; }

    public ProfileModel()
    {
        DisplayDBAField = true;
        DisplayVendorIDField = true;
        DisplayContactNameFields = true;
        DisplayDistributionMethodField = true;
        DisplayCardPurposeField = true;
    }
} 
```

所以默认构造函数将标志设置为真，控制器在适当时修改标志。我还在视图中尝试了以下操作：

```
 <td>
        @if (!Model.DisplayDBAField)
        {
            @Html.Raw("DBA:")
        }
    </td> 
```

并发现无论 Model.DisplayDBAField 中的值如何，无论是真还是假，“DBA：”都不会呈现！因此，无论我使用 @if (Model.DisplayDBAField){} 还是 @if (!Model.DisplayDBAField){}，似乎代码本身在运行时都被完全忽略了。

# concurrency - Rete 算法的并行版本是否有任何实现？

> ID：10604274
> 
> 赞同：0
> 
> 时间：2012-05-15T15:43:58.440
> 
> 标签：concurrency, rule-engine, rete

我对 Rete 算法进行了一些研究，发现了几篇关于使其并行化（匹配和规则触发）的论文，其中最早的论文来自 80 年代中期。但是，我在当今市场上的任何规则引擎中都找不到有关任何并行实现的任何信息。我知道并行规则触发是有问题的，但是有几个建议的解决方案。是否有任何规则引擎实现任何并行版本的 Rete？如果是这样，是哪个？如果不是，为什么不呢？实现任何显着的性能提升是否太难了，还是有其他原因？任何指向更多信息的链接表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:47:32.600

我相信 ReteNT 会。

今年夏天我们正在为 Drools 项目做一些事情，我希望我们能在今年年底之前做出原型。我们从两个角度来讨论它。1) Merge Rete 和 Leaps 算法，提供惰性 beta 传播和评估是在规则游标的基础上完成的（允许更容易的并行规则评估）。2）从基于元组的传播集合传播中移动​​。这将允许将节点安排为任务。具有大量对象的其他节点可以在本地“减少映射”，以进一步并行化将从节点传播的集合的创建。

如果您想更多地聊天，请加入我们的 irc :) [http://www.jboss.org/drools/irc](http://www.jboss.org/drools/irc)

# sql - Where 子句 (T-SQL) 中的财政年度迄今为止

> ID：10604275
> 
> 赞同：1
> 
> 时间：2012-05-15T15:44:01.327
> 
> 标签：sql, sql-server, tsql

公司会计年度：7 月 1 日 - 6 月 30 日

我有一个查询，我正在尝试按产品和成本中心捕获本财年迄今为止的总单位数和收入美元。它将在每月 1 日运行，并查看上个月的最后一天。会计年度不会出现在报告中 - 这是标准。

```
 Mix of pseudocode and SQL:
    Where
      If datepart(mm,getdate()) - 1 < 7
        THEN 
           transaction_post_date BETWEEN 7/1/ previous year AND dateadd(day,-(day(getdate()),getdate())          
        Else 
           transaction_post_date BETWEEN 7/1/current year AND dateadd(day,-(day(getdate()),getdate()) 
```

我在写轨道上吗？如何为取决于 SQL 的年份的特定日期编写 SQL - 7/1/当年？

我使用变量很弱，甚至不知道我是否有权在 SQL Server DB 上创建它们，这相当锁定。绝对不能创建函数。（我是一名业务分析师。）

更新，财政年度向前发展，所以 2010 年 7 月 1 日是 2011 财政年度。

我认为这有效：

```
 Year(dateadd(month,6,htx.tx_post_date)) = Year(DateAdd(Month, 5, GetDate())) 
```

回馈？

现在我被要求将数量和收入的财政年初至今字段添加到以下查询中，这给了我总计

```
 Select 
      inv.ITEM_CODE 
    , inventory.ITEM_NAME 
    , cc.COST_CENTER_CODE 
    , tx.REV_CODE_ID 
    , tx.PRICE 
    , tx.ITEM_SALE_ID
    , sum(tx.quantity)
    , sum(tx.amount)

    from
    transactions tx
    inner join inventory inv on inv.item_id = tx.item_id
    left outer join cost_center cc on cc.cost_center_id = tx.cost_center_id

    where 
    DATEPART(mm, tx.tx_date) = DATEPART(mm,dateadd(m,-1,getdate()))
and DATEPART(yyyy, tx.tx_date) = DATEPART(yyyy,dateadd(m,-1,getdate()))

    group by 
      inv.ITEM_CODE 
    , inventory.ITEM_NAME 
    , cc.COST_CENTER_CODE 
    , tx.REV_CODE_ID 
    , tx.PRICE 
    , tx.ITEM_SALE_ID 
```

我需要在此报告中添加财政年度迄今为止的数量和金额列。顺便说一下相关子查询吗？连接会很棘手吗？我从未将子查询与聚合/分组查询一起使用。

感谢您之前的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:51:09.667

如果我需要按会计年度分组，我会这样做：

```
Group by Year(DateAdd(Month, -6, TransactionDate)) 
```

可能不完全是这样，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:01:18.370

我会在您的表中添加一个名为 FiscalYear 的计算列（使用正确的计算）并根据该列进行选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T21:10:40.587

我相信最简单的方法是分两步完成。使用 WHERE 子句过滤您的 YTD，然后使用 GROUP BY 按 FY 分组。由于您的 FY 从 7 月 (7) 开始，如果月份大于 June(6)，则增加 FY。

条款：

```
WHERE
DATEDIFF(DAY, transaction_post_date,  Cast(Month(GetDate()) as varchar) +
'/' + Cast(Day(GetDate()) as varchar) + '/' + CAST(Case WHEN 
MONTH(transaction_post_date) > 6 then YEAR(transaction_post_date) + 1 else 
Year(transaction_post_date) end as varchar)) >=0 
```

按条款分组：

```
GROUP BY CASE WHEN MONTH(transaction_post_date) > 6 then 
Year(transaction_post_date) + 1 else YEAR(transaction_post_date) end 
```

# objective-c - Cocoa - 从 XML 加载数据期间应用程序冻结

> ID：10604278
> 
> 赞同：0
> 
> 时间：2012-05-15T15:44:22.377
> 
> 标签：objective-c, cocoa, nsprogressindicator

我正在从 XML 文件加载大量数据。该数据正在“冻结”应用程序。我想在加载数据时显示进度条。

我怎么知道大部分操作已经完成，以便我可以更改进度条显示的百分比？谢谢。[已回答]

编辑：主要问题是由于要解析的大量数据，应用程序在加载过程中冻结。有些人建议使用后台线程来加载和解析数据。这可行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:49:11.230

一次将文件读入内存@ 4k？显示加载字节与文件大小的过程？

另外找出总行数以及解析器所在的当前行。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html#//apple_ref/occ/instm/NSXMLParser/lineNumber](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html#//apple_ref/occ/instm/NSXMLParser/lineNumber)

假设您正在使用 NSXMLParser

“冻结”来自您在主线程上进行加载/解析。如果您可以让我们 GCD 尝试执行 dispatch_async ( ) 并在完成时将更新发送到您的主线程并更新进度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:25:35.763

如果您使用的是 NSXML 解析器，

```
NSUInteger count = [[rootElement nodesForXPath:@"//Video" error:&error] count];
//this will give you the number of elements
//then after parsing each element, calculate the percentage of elements parsed. 

//i.e. num_of_elements_parsed/total_no_elements*100;
//based on this value, use a del;egate method to update your NSProgressIndicator 
// in this method increment the  num_of_elements_parsed counter
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    if ([elementName isEqualToString:@"resident"]) {

        self.count += 1; 

    }
} 
```

# oracle - 使用 Oracle 对象类型消息连接到 Oracle 高级队列

> ID：10604281
> 
> 赞同：2
> 
> 时间：2012-05-15T15:44:32.550
> 
> 标签：oracle, mule

Mule 文档提供了一个[示例](http://www.mulesoft.org/documentation/display/MULE3EXAMPLES/Connecting+to+Oracle+AQ)，说明如何使用`queue_payload_type`设置为的队列表连接到 Oracle AQ `sys.aq$_jms_text_message`。

我如何让 Mule 使用`queue_payload_type`我自己的 Oracle 对象类型？

当我尝试运行流程时，我收到以下错误：`JMS-137: Payload factory must be specified for destinations with ADT payloads`. 根据[这个问题](https://stackoverflow.com/questions/4450925/spring-jms-and-oracle-aq)和[这个 Oracle 文档](http://docs.oracle.com/cd/B19306_01/server.102/b14257/jm_point.htm#CHDFGEGE)，我似乎需要创建自己的类来实现[ORADataFactory](http://docs.oracle.com/cd/E11882_01/appdev.112/e13995/oracle/sql/ORADataFactory.html)并使用我已经完成的 Oracle 对象类型，并在调用[createConsumer](http://docs.oracle.com/cd/B19306_01/server.102/b14291/oracle/jms/AQjmsSession.html#createConsumer_javax_jms_Destination__java_lang_String__java_lang_Object__java_lang_String__boolean_)时使用它，但我不知道如何将我的 ORADataFactory 传递给 createConsumer。

我是否必须创建自己的自定义 JMS 连接器才能使其正常工作，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:49:27.430

如果您使用 Spring，这就是您可以解决的方法：http: [//blog.javaforge.net/post/30858904340/oracle-advanced-queuing-spring-custom-types](http://blog.javaforge.net/post/30858904340/oracle-advanced-queuing-spring-custom-types)

在“无弹簧”环境中，只需创建您自己的消息消费者，如上文所述。

# orchardcms - OrchardCMS 下拉到视觉工作室

> ID：10604283
> 
> 赞同：5
> 
> 时间：2012-05-15T15:44:40.823
> 
> 标签：orchardcms

如果我通过托管服务提供商的 Microsoft Web App Gallery 在服务器上安装了 Orchard 版本，是否有一种好方法可以为本地 Visual Studio 开发拉下 orchard 实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T02:40:18.027

在进行 Visual Studio 开发时，**始终**使用Codeplex 的[完整源代码。](http://docs.orchardproject.net/Documentation/Setting-up-a-source-enlistment)**当您不想**执行任何编码时，WebPI 包旨在开箱即用。

不过，在您的情况下，这很棘手，但可行。最好的方法是

1.  [获取此处](http://docs.orchardproject.net/Documentation/Setting-up-a-source-enlistment)描述的完整来源，
2.  从您的服务器获取源
3.  将文件从 2\. 复制到 1\. 中的*src/Orchard.Web*子目录（覆盖任何现有内容）
4.  在 VS 中打开*/src/Orchard.sln*解决方案，并添加对服务器 (2.) 上不在 Orchard 核心 (1.) 中的任何自定义模块的引用。您将在*/src/Orchard.Web/Modules*子目录下找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:50:06.630

我会接受 Piotr 的回答，但如果您只需要进行一些调整，那么来自 WebPi 的代码应该可以与[WebMatrix](http://www.microsoft.com/web/webmatrix/)一起使用。

我不会将此解决方案用于模块开发，但如果您只想调整一个简单的主题或在本地运行该站点，那么它对我有用。

# c# - PowerPoint 加载项 - 从文档形状调用加载项功能

> ID：10604284
> 
> 赞同：0
> 
> 时间：2012-05-15T15:44:55.087
> 
> 标签：c#, com, ms-office, powerpoint, office-interop

简短版：在 PowerPoint 幻灯片中嵌入控件以将事件发送回应用程序级加载项的首选方法是什么？控件需要在幻灯片放映模式和设计模式下工作。

长版：

我最近参与了 PowerPoint 旧插件的开发，它（简而言之）从远程数据源中提取数据并在幻灯片上绘制相应的图表。加载项是托管代码 (C#)，但不是使用 VSTO 构建的 - 它使用自定义包装器和 COM 填充程序。

图表需要定期刷新，为此我们的插件在工具栏中有一个刷新按钮。如果图表在刷新之前根本无法呈现，我们还会在幻灯片本身上嵌入一个 MSForms.CommandButton（作为 OLE 对象）。我们在类似的 Excel 加载项中成功使用了这种方法。

不幸的是，它在 PowerPoint 中不起作用：按钮上的单击事件似乎没有到达我们的加载项。我在网上找到了一些支持这一观察的信息。我还使用 MSForms.ComboBox 而不是按钮对其进行了测试，并且效果很好——组合框的更改事件到达我们的加载项并且刷新成功。

所以看来我需要找到一种替代方法让按钮与我们的加载项进行通信。我可以想到一些方法，并想知道是否有最佳实践：

1.  让按钮（或类似形状）运行调用插件中代码的宏。我听说在设计模式下查看幻灯片时这可能不起作用，但尚未测试确认。
2.  在幻灯片中嵌入一个 MSForms 表单，以捕获单击事件并将其传递给我们的加载项。同样，这只是一个理论，尚未经过测试。
3.  完全使用其他东西 - 有些东西告诉我必须有一种“现代”的方式来做到这一点，我只是对 Office 开发不够熟悉，不知道那是什么。

我将补充一点，迁移到 VSTO 或类似技术（如 NetOffice）是一种选择，但如果可能，我们更愿意避免这种情况。谢谢！

# java - Spring：@Component 与 @Bean

> ID：10604298
> 
> 赞同：611
> 
> 时间：2012-05-15T15:45:46.293
> 
> 标签：java, spring, annotations, autowired

我知道`@Component`在 spring 2.5 中引入了注释，以便通过使用类路径扫描来摆脱 xml bean 定义。

`@Bean`在 spring 3.0 中引入，可以用于`@Configuration`完全摆脱 xml 文件并使用 java config 代替。

是否可以重复使用`@Component`注释而不是引入`@Bean`注释？我的理解是最终目标是在这两种情况下创建 bean。

* * *

## 回答 #1

> 赞同：540
> 
> 时间：2016-11-29T08:40:27.913

**@Component 首选** 用于组件扫描和自动布线。

*什么时候应该使用**@Bean**？*

有时自动配置不是一种选择。**什么时候？**假设您想从 3rd-party 库中连接组件（您没有源代码，因此无法使用 @Component 注释其类），因此无法进行自动配置。

@Bean**注解****返回一个对象**，spring 应该在应用程序上下文中注册为 bean。方法的**主体包含**负责创建实例的逻辑。

* * *

## 回答 #2

> 赞同：529
> 
> 时间：2012-05-15T15:59:09.537

`@Component`做`@Bean`两件完全不同的事情，不要混淆。

`@Component`(and `@Service`and `@Repository`) 用于使用类路径扫描自动检测和自动配置 bean。带注释的类和 bean 之间存在隐式的一对一映射（即每个类一个 bean）。这种方法对布线的控制非常有限，因为它纯粹是声明性的。

`@Bean`用于*显式*声明单个 bean，而不是像上面那样让 Spring 自动完成。它将 bean 的声明与类定义分离，并允许您完全按照您的选择创建和配置 bean。

要回答你的问题...

> 是否可以重新使用`@Component`注释而不是引入`@Bean`注释？

当然，可能；但他们选择不这样做，因为两者完全不同。春天已经足够混乱，没有进一步搅浑水。

* * *

## 回答 #3

> 赞同：218
> 
> 时间：2015-08-31T08:33:51.803

让我们考虑一下我想要根据某些动态状态的具体实现。 `@Bean`非常适合这种情况。

```
@Bean
@Scope("prototype")
public SomeService someService() {
    switch (state) {
    case 1:
        return new Impl1();
    case 2:
        return new Impl2();
    case 3:
        return new Impl3();
    default:
        return new Impl();
    }
} 
```

但是，没有办法做到这一点`@Component`。

* * *

## 回答 #4

> 赞同：200
> 
> 时间：2018-07-09T05:30:41.077

1.  @Component使用类路径扫描**自动检测**和配置 bean，而 @Bean**显式声明**单个 bean，而不是让 Spring 自动执行。
2.  @Component**不会将bean 的声明与类定义****分离**，而 @Bean将bean 的声明与类定义分离。
3.  @Component 是一个**类级别的注解**，而@Bean 是一个**方法级别的注解**，方法的名称作为 bean 的名称。
4.  @Component**不需要与 @Configuration**注释一起使用，因为 @Bean 注释必须在**使用 @Configuration 注释的类中使用**。
5.  如果类在 spring 容器之外，我们不能使用 @Component**创建一个**类的 bean，而我们**可以**使用 @Bean 创建一个类的 bean，即使该类存在**于 spring 容器之外**。
6.  @Component 具有**不同**的特化，例如 @Controller、@Repository 和 @Service，而 @Bean**没有**特化。

* * *

## 回答 #5

> 赞同：111
> 
> 时间：2017-05-06T20:57:02.300

这两种方法都旨在在 Spring 容器中注册目标类型。

区别在于`@Bean`适用于**方法**，而`@Component`适用于**类型**。

因此，当您使用`@Bean`注释时，您可以控制方法主体中的实例创建逻辑（参见[上面的示例](https://stackoverflow.com/a/32307013/1147388)）。使用`@Component`注释你不能。

* * *

## 回答 #6

> 赞同：49
> 
> 时间：2019-05-17T11:42:10.153

我看到了很多答案，几乎所有提到的地方`@Component`都是用于扫描组件的自动装配，并且`@Bean`正是声明该 bean 以不同的方式使用*。*让我展示一下它的不同之处。

*   @豆

首先，它是一个方法级别的注释。其次，您通常使用它在 Java 代码中配置 bean（如果您不使用 xml 配置），然后使用该 `ApplicationContext.getBean`方法从类中调用它。例子：

```
@Configuration
class MyConfiguration{
    @Bean
    public User getUser() {
        return new User();
    }
}

class User{
}    

// Getting Bean 
User user = applicationContext.getBean("getUser"); 
```

*   @零件

这是注释 bean 而非专用 bean 的一般方法。它是一个类级别的注释，用于通过 java 或 xml 配置避免所有配置内容。

我们得到这样的东西。

```
@Component
class User {
}

// to get Bean
@Autowired
User user; 
```

而已。刚刚引入它是为了避免实例化和使用该 bean 的所有配置步骤。

* * *

## 回答 #7

> 赞同：30
> 
> 时间：2019-07-05T07:56:26.707

您可以使用`@Bean`使现有的第三方类可用于您的 Spring 框架应用程序上下文。

```
@Bean
public ViewResolver viewResolver() {

    InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();

    viewResolver.setPrefix("/WEB-INF/view/");
    viewResolver.setSuffix(".jsp");

    return viewResolver;
} 
```

通过使用`@Bean`注解，您可以将第三方类（它可能没有也`@Component`可能不使用 Spring）包装为 Spring bean。然后一旦使用 包装它`@Bean`，它就会作为一个单例对象并在您的 Spring 框架应用程序上下文中可用。您现在可以使用依赖注入和`@Autowired`.

所以认为`@Bean`注解是第三方类的包装器/适配器。您想让第三方类可用于您的 Spring 框架应用程序上下文。

通过`@Bean`在上面的代码中使用，我显式声明了一个 bean，因为在方法内部，我使用`new`关键字显式创建了对象。我也在手动调用给定类的 setter 方法。所以我可以改变前缀字段的值。所以这个手工工作被称为显式创建。如果我将`@Component`用于同一个类，则在 Spring 容器中注册的 bean 将具有前缀字段的默认值。

另一方面，当我们用 注释一个类时`@Component`，我们不需要手动使用`new`关键字。它由 Spring 自动处理。

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2018-01-19T18:23:29.567

当您使用`@Component`标签时，它与拥有一个带有香草 bean 声明方法（用 注释`@Bean`）的 POJO（普通旧 Java 对象）相同。例如，下面的方法 1 和 2 将给出相同的结果。

**方法一**

```
@Component
public class SomeClass {

    private int number;

    public SomeClass(Integer theNumber){
        this.number = theNumber.intValue();
    }

    public int getNumber(){
        return this.number;
    }
} 
```

使用 'theNumber' 的 bean：

```
@Bean
Integer theNumber(){
    return new Integer(3456);
} 
```

**方法二**

```
//Note: no @Component tag
public class SomeClass {

    private int number;

    public SomeClass(Integer theNumber){
        this.number = theNumber.intValue();
    }

    public int getNumber(){
        return this.number;
    }
} 
```

两者都有豆子：

```
@Bean
Integer theNumber(){
    return new Integer(3456);
}

@Bean
SomeClass someClass(Integer theNumber){
    return new SomeClass(theNumber);
} 
```

方法 2 允许您将 bean 声明放在一起，它更灵活等。您甚至可能想要添加另一个非 vanilla SomeClass bean，如下所示：

```
@Bean
SomeClass strawberryClass(){
    return new SomeClass(new Integer(1));
} 
```

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2018-12-30T07:25:04.553

您有两种生成 bean 的方法。一种是创建一个带有注解的类`@Component`。另一种是创建一个方法并用`@Bean`. 对于那些包含方法 with 的类，`@Bean`应该用注解`@Configuration` 一旦你运行你的 spring 项目，带有`@ComponentScan`注解的类会扫描每个类`@Component`，并将这个类的实例恢复到 Ioc 容器。另一件事`@ComponentScan`是在其上运行方法`@Bean`并将返回对象作为 bean 恢复到 Ioc 容器。因此，当您需要根据当前状态决定要创建哪种 bean 时，您需要使用`@Bean`. 您可以编写逻辑并返回您想要的对象。另一件值得一提的是方法的名称，它`@Bean`是bean的默认名称。

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2020-04-30T05:52:30.990

Bean和组件的区别：

[![Bean和组件的区别](../Images/2592c4abcb10d65d118e47f74129bf56.png)](https://i.stack.imgur.com/e8RlG.png)

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2018-03-12T18:51:26.177

*   @component 及其特化（@Controller、@service、@repository）允许使用类路径扫描进行自动检测。如果我们看到像@Controller、@service、@repository 这样的组件类，Spring 框架会使用组件扫描自动扫描。
*   另一方面，@Bean 只能用于在配置类中显式声明单个 bean。
*   @Bean 用于显式声明单个 bean，而不是让 spring 自动执行。它从类定义中对 bean 进行分隔声明。
*   简而言之，@Controller、@service、@repository 用于自动检测，@Bean 用于从类中创建单独的 bean

```
    - @控制器
    公共类登录控制器
    {  - 代码 -  }

    - @配置
    公共类 AppConfig {
    @豆
    公共 SessionFactory sessionFactory()
    { - 代码 -  }

```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-04-27T19:54:28.850

创建 @Bean 是为了避免在编译时耦合 Spring 和您的业务规则。这意味着您可以在 PlayFramework 或 JEE 等其他框架中重用您的业务规则。

此外，您可以完全控制如何创建 bean，而默认 Spring 实例化是不够的。

我写了一篇文章谈论它。

[https://coderstower.com/2019/04/23/factory-methods-decoupling-ioc-container-abstraction/](https://coderstower.com/2019/04/23/factory-methods-decoupling-ioc-container-abstraction/)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-04-29T09:17:14.413

**以上答案的附加点**

假设我们有一个在多个应用程序中共享的模块，它包含一些服务。每个应用程序都不需要全部。

如果在这些服务类上使用 @Component 并在应用程序中扫描组件，

> 我们最终可能会检测到比必要更多的 bean

在这种情况下，您要么必须调整组件扫描的过滤，要么提供即使未使用的 bean 也可以运行的配置。否则，应用程序上下文将不会启动。

在这种情况下，最好使用 @Bean 注释并仅实例化那些 bean，

> 每个应用程序都需要这些

因此，本质上，使用 @Bean 将第三方类添加到上下文中。和 @Component 如果它只是在你的单个应用程序中。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2020-01-04T08:11:38.423

**1\. 关于@Component**
@Component 的作用类似于@Configuration。

它们都表明带注释的类有一个或多个 bean 需要注册到`Spring-IOC-Container`.

@Component 注解的类，我们称之为`Component of Spring`。这是一个包含多个 bean 的概念。

`Component class`需要由 Spring 自动扫描以注册`component class`.

**2.关于@Bean**
@Bean 是用来注解的方法`component-class`（如上所述）。表示注解方法返回的实例需要注册到`Spring-IOC-Container`.

**3\. 结论**
两者的区别比较明显，都用在`different circumstances`. 一般用法是：

```
 // @Configuration is implemented by @Component
    @Configuration
    public ComponentClass {

      @Bean
      public FirstBean FirstBeanMethod() {
        return new FirstBean();
      }

      @Bean
      public SecondBean SecondBeanMethod() {
        return new SecondBean();
      }
    } 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2021-11-07T07:38:54.090

Spring 支持@Component、@Service、@Repository 等多种类型注解。所有这些都可以在 org.springframework.stereotype 包下找到。

**@Bean 可以在 org.springframework.context.annotation 包下找到。**

当我们的应用程序中的类使用上述任何注释进行注释时，然后在项目启动期间 spring 扫描（使用 @ComponentScan）每个类并将类的实例注入 IOC 容器。@ComponentScan 会做的另一件事是运行带有 @Bean 的方法，并将返回对象作为 bean 恢复到 Ioc 容器。

## @零件

如果我们用 @Component 或其他 Stereotype 注释标记一个类，这些类将使用类路径扫描自动检测。只要这些类在我们的基础包下，或者 Spring 知道要扫描另一个包，就会为这些类中的每一个创建一个新的 bean。

```
package com.beanvscomponent.controller;

import org.springframework.stereotype.Controller;

@Controller
public class HomeController {

    public String home(){
       return "Hello, World!";
   }

 } 
```

带注释的类和 bean 之间存在隐式的一对一映射（即每个类一个 bean）。这种方法对布线的控制非常有限，因为它纯粹是声明性的。同样重要的是要注意构造型注释是类级别的注释。

## @豆

@Bean 用于显式声明单个 bean，而不是像我们使用 @Controller 那样让 Spring 自动完成。它将 bean 的声明与类定义分离，并允许您完全按照您的选择创建和配置 bean。使用@Bean，您不会将此注释放在类级别。如果你试图这样做，你会得到一个无效的类型错误。@Bean 文档将其定义为：

```
Indicates that a method produces a bean to be managed by the Spring container. 
```

通常，@Bean 方法在 @Configuration 类中声明。我们有一个用户类，我们需要实例化它，然后使用该实例创建一个 bean。这就是我之前所说的，我们对如何定义 bean 有更多的控制。

```
package com.beanvscomponent;

public class User {

private String first;
private String last;

public User(String first, String last) {
    this.first = first;
    this.last = last;
   }
} 
```

正如我之前提到的，@Bean 方法应该在 @Configuration 类中声明。

```
package com.beanvscomponent;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class ApplicationConfig {

@Bean
public User superUser() {
    return new User("Partho","Bappy");
   }

} 
```

方法的名称实际上就是我们的 bean 的名称。如果我们在执行器中拉起 /beans 端点，我们可以看到定义的 bean。

```
{
"beans": "superUser",
"aliases": [],
"scope": "singleton",
"type": "com.beanvscomponent.User",
"resource": "class path resource 
    [com/beanvscomponent/ApplicationConfig.class]",
"dependencies": []
} 
```

## @Component 与 @Bean

[![在此处输入图像描述](../Images/8a0cd9afd3aef95a06ca3fbeb76777bb.png)](https://i.stack.imgur.com/zJpux.png)

我希望澄清一些关于何时使用@Component 和何时使用@Bean 的问题。这可能有点令人困惑，但是当您开始编写更多应用程序时，它会变得非常自然。

# c# - 如何从 cname 中识别原始域名

> ID：10604301
> 
> 赞同：3
> 
> 时间：2012-05-15T15:45:59.960
> 
> 标签：c#, asp.net-mvc, iis, cname

我在配置了 iis 的通配符域中有一个 mvc 应用程序（多租户）。我想将每个子域配置为不同客户域的 cname 条目。

现在的问题是，当请求来自客户域时，我无法通过检查子域名来找出客户是谁。

所以，问题是：当请求来自cname时，是否仍然可以获得原始子域名？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:17:52.263

所有网站请求最终都只使用 IP 地址。一旦建立了客户端-服务器连接，客户端就会指定他们尝试联系的原始主机的名称。无论主机是否`CNAME`真正`A`进入其中，这都是从 HTTP 和浏览器本身抽象出来的所有 DNS 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:47:15.603

检查`Host`HTTP/1.1 所需的标头，其中包括客户端（浏览器）请求的主机名和端口。

```
Request.Headers["Host"] 
```

[RFC2616 第 14.23 节：主机](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.23)

# c++ - 拦截套接字函数（windows）

> ID：10604304
> 
> 赞同：2
> 
> 时间：2012-05-15T15:46:10.663
> 
> 标签：c++, windows, sockets, intercept

我有一个程序，它加载库 test.dll，这个库使用 ws2_32.dll 创建套接字和发送/接收数据包。我可以将我的 C++ 库注入到这个进程中，但不知道如何拦截函数“socket”、“accept”的 test.dll 调用。有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:06:48.893

您需要挂钩接受功能。您可以通过使用库来做到这一点，例如 MS Detours（早期版本是免费的，您可以使用 1.5 版，只需 google 即可）。称呼

```
DWORD a=DetourFindFunction("Ws2_32.dll","accept") 
```

它会给你指向接受函数的指针。然后你可以通过调用绕过它

```
DetourFunction(a,&Yourfunction) 
```

.

DetourFunction 将新指针返回到“accept”，因此请确保在“YourFunction”末尾调用它以确保程序不会崩溃。

或者，您可以使用 Inlineassembler 自己重定向函数。这当然要复杂得多。

# delphi - GetLocaleFormatSettings

> ID：10604306
> 
> 赞同：2
> 
> 时间：2012-05-15T15:46:18.640
> 
> 标签：delphi

我拥有 D6、D2009 和 D2010。D6 中不存在 GetLocaleFormatSettings。从网络搜索来看，GetLocaleFormatSettings 似乎从 D-XE2 开始已被弃用，取而代之的是 TFormatSettings.Create。我还从我的搜索中推断出必须在 D7 中引入 GetLocaleFormatSettings，但无法确认。谁能确认引入 GetLocaleFormatSettings 的版本以及不推荐使用之前的最后一个版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:55:41.350

我确认 Delphi 7：

摘自法语 D7 文档：

> 团结
> 
> 系统实用程序
> 
> 类别
> 
> 链条格式程序
> 
> 语法德尔福：
> 
> 过程 GetLocaleFormatSettings(LCID:Integer;var FormatSettings:TFormatSettings);
> 
> 语法 C++：
> 
> externPACKAGE void __ fastcallGetLocaleFormatSettings(intLCID;TFormatSettings&FormatSettings);

对于已弃用的，关于文档的版本：

这看起来像**XE**：

[2010：还没有](http://docwiki.embarcadero.com/VCL/2010/en/SysUtils.GetLocaleFormatSettings)

[XE：已弃用](http://docwiki.embarcadero.com/VCL/XE/en/SysUtils.GetLocaleFormatSettings)

# android - 从android平台发送UDP数据包

> ID：10604307
> 
> 赞同：0
> 
> 时间：2012-05-15T15:46:18.793
> 
> 标签：android, udp

我正在尝试在 Android 平板电脑上构建一个 UDP 客户端。该应用程序可以创建一个套接字就好了，但是当我尝试发送它时：

```
public void SendMessage( String message )
    {
        sendBuffer = message.getBytes();

        packet = new DatagramPacket( sendBuffer, sendBuffer.length, address, 4445 );
        //packet = new DatagramPacket( sendBuffer, sendBuffer.length, address, port );

        try 
        {
            socket.send( packet );
        } 
        catch (IOException ioe) 
        {
            Log.d( "NETWORK", "Failed to send UDP packet due to IOException: " + ioe.getMessage() );
            ioe.printStackTrace();
        }
        catch( Exception e )
        {
            Log.d( "NETWORK", "Failed to send UDP packet due to Exeption: " + e.getMessage() );
            e.printStackTrace();
        }
    } 
```

Eclipse 弹出一个新窗口，显示“找不到源”，我在 LogCat 中打印了这个：

```
android.os.NetworkOnMainThreadException
at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:175)
at ... 
```

我想知道我正在使用的端口是否被阻止或有什么东西阻止了我的 UDP 连接（因为我尝试了许多不同的端口，结果都一样）。我问这个是因为 LogCat (BlockGuardOS) 可能表明它阻止了一些输入/输出

这是实际的初始化在这里：

```
public ClientSocketThread( String address, int port )
    {       
        this.port = port;

        try 
        {
            this.address = InetAddress.getByName( address );
            Log.d( "NETWORK", "Address successfully resolved" );
        } 
        catch( UnknownHostException ue ) 
        {
            ue.printStackTrace();
            Log.d( "NETWORK", "Failed to resolve ip address due to UnknownException: " + ue.getMessage() );
        }

        try 
        {
            this.socket = new DatagramSocket();
            Log.d( "NETWORK", "UDP Socket successfully created" );
        } 
        catch( SocketException se ) 
        {
            Log.d( "NETWORK", "Failed to create socket due to SocketException: " + se.getMessage() );
            se.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T15:51:53.817

```
android.os.NetworkOnMainThreadException 
```

您不再被允许从主 (UI) 线程进行联网。你总是在文档中被警告过，但现在它被主动困住了。

该主题已在 SO 和其他来源中多次讨论。

# plugins - 我在哪里可以找到这个 LinkedIn 插件？

> ID：10604318
> 
> 赞同：0
> 
> 时间：2012-05-15T15:46:43.133
> 
> 标签：plugins, embed, social-networking, linkedin

最近，我有一个客户给我发了一张似乎是 LinkedIn 插件的屏幕截图。我问客户他们是从哪里得到的，但他们不记得了，但希望我在他们的新网站上复制它……我看了一遍，似乎找不到任何与此完全相似的东西。谈到LinkedIn，我不是很精通，所以答案可能就在我的眼皮底下。

有没有人知道我在哪里可以找到这个？

[http://i.stack.imgur.com/HCxUj.png](http://i.stack.imgur.com/HCxUj.png)

我浏览了[http://developer.linkedin.com/plugins](http://developer.linkedin.com/plugins)，但找不到任何具有“最新讨论”或“最受欢迎”的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:55:02.377

您附加的屏幕截图看起来像是一个自定义 API 集成，它模拟了在 LinkedIn.com 上的 LinkedIn 托管组中找到的小部件。目前没有可提供此功能的 LinkedIn 支持的插件。在论坛中，来自 LinkedIn 员工的帖子：

[https://developer.linkedin.com/comment/12044#comment-12044](https://developer.linkedin.com/comment/12044#comment-12044)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:53:05.233

[Agorava LinkedIn](https://github.com/agorava/agorava-linkedin)是 Agorava 的 LinkedIn 连接器。除了 Facebook 或 Twitter 等其他流行的社交网络服务之外，Agorava Socializer 还支持LinkedIn [。](http://agorava.org)

# install4j - 如何在使用 install4j 更新期间仅删除安装程序创建的文件

> ID：10604319
> 
> 赞同：0
> 
> 时间：2012-05-15T15:46:45.710
> 
> 标签：install4j

我有一个 install4j 项目并想做一个项目。

我的设置中有一个`libs`-folder，我所有的 jar 都在其中打包：

```
<install-dir>/libs/myA.jar
<install-dir>/libs/myB.jar
<install-dir>/libs/alien.jar 
```

Alien.jar 是一个附加文件，不是从我的设置中创建的。如果我使用包提供更新`libs`- 文件夹将`alien.jar`被删除，我不明白为什么。

`DeleteFilesAction`之前有一个`InstallFilesAction`，它有一个过滤器，所有我们都`alien.jar`不会被删除。如果我在我之后制作一个 MessageBox `DeleteFilesAction`，则

> 外星人.jar

还存在。

当 InstallFileAction 启动时，完整的`libs`-Folder 似乎已被删除。

我相信有配置标志，我不知道。

问题：如何删除完整的`libs`文件夹，期待`alien.jar`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:59:31.580

`DeleteFilesAndDirectory`我认为使用-Action 删除目录中的所有（未知）文件是不可能的。

我使用了`<install-dir>/libs`作为要删除的文件夹提供的操作。我为文件名提供了一个过滤器脚本（alien.jar 有一个返回值“false”，其余的应该被删除）。但是该操作也会删除 libs-dir。我认为它按设计工作，所以它不是错误。

对于所有有相同问题的人来说，一个workarround或soultion：

```
com.install4j.runtime.installer.helper.fileinst.FileInstaller fi = com.install4j.runtime.installer.helper.fileinst.FileInstaller.getInstance();

File directory = new File(context.getInstallationDirectory(), "/libs");

File[] filesInLib = directory.listFiles();

for(File file:filesInLib){
   boolean shouldDelete= true;

   if(file.getName().toLowerCase().contains("alien")){
       Util.logInfo(null,"dexchange detected: " + file.getName());
       shouldDelete= false;
   }

   Util.logInfo(null,"Delete " + file.getAbsolutePath() + ": " +reval);

   if(shouldDelete){
      if (file.exists()) {
          Util.logInfo( null, "delete file: " + file);
          fi.deleteFile(file);
      }
   }
}

return false; 
```

Ingo Kegel：感谢您的帮助，我不想开支持票，因为我很确定这不是您产品中的错误。但我认为另一个复选框“如果不为空则删除”在操作中会有很大帮助`DeleteFilesOrDirectory`。

# jquery - jQuery 的 val() 和 prop() 方法是否会转义值？

> ID：10604320
> 
> 赞同：26
> 
> 时间：2012-05-15T15:46:45.903
> 
> 标签：jquery, html, escaping

我在文档中找不到任何关于[`val()`](http://api.jquery.com/val/)和[`prop()`](http://api.jquery.com/prop/)转义的内容。

当用作设置器时，它们是否打算转义值？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-15T15:49:11.930

并不真地。`.val()`用于设置表单字段的`value`属性，因此在那里转义并不是真正必要的。您将通过 DOM 设置值，因此不像您通过字符串连接构造 HTML。 `.prop()`另一方面，它甚至根本不与属性交互 - 只是 DOM 属性，因此您不需要处理 HTML 转义它们。

* * *

编辑：为了澄清起见，我假设你问这个是因为你担心`.prop()`或`.val()`作为 XSS 攻击媒介（或者只是一个机会让自己在脚上开枪）？如果是这种情况，您需要记住，在通过 DOM 设置属性和属性时，您设置的值本质上是沙盒到您正在与之交互的属性或值。例如，给定以下内容：

```
<div id="foo"></div> 
```

并且您试图滥用属性值，例如：

```
$('#foo').attr('rel', '"></div><script>alert("bang");</script><div rel="'); 
```

您可能会担心这会导致以下结果：

```
<div id="foo" rel=""></div><script>alert("bang");</script><div rel=""></div> 
```

不过，这永远不会发生。您确实会有一个`rel`带有看起来很邪恶的字符串作为其值的属性，但不会创建新的标记或 DOM 节点。字符串本身没有被转义——它只是没有被解释为标记。它只是一个字符串，就是这样。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-15T15:48:28.683

他们期望字符串，而不是 HTML。你不需要逃避任何事情。

这些方法本身也不进行任何转义，它们使用的底层 DOM API 也处理字符串，而不是 HTML。

一旦你开始使用 JavaScript，你几乎不需要担心 HTML 语法，我能想到的唯一例外是在处理`innerHTML`显式处理（反）序列化 DOM 与 HTML 的属性时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-06T00:50:03.340

我只想补充一点，在属性中插入值时必须担心会导致代码执行的副作用。其中包括可用于 xss 的图像 src 属性。见：[https ://www.owasp.org/index.php/Scr​​ipt_in_IMG_tags](https://www.owasp.org/index.php/Script_in_IMG_tags)

# c# - 我可以在图片框中加载 tga 文件吗？

> ID：10604323
> 
> 赞同：0
> 
> 时间：2012-05-15T15:46:56.100
> 
> 标签：c#, .net-3.5

是否可以在图片框中加载 *.tga 文件？实际上我需要创建一个可以显示图片和视频剪辑的容器，但首先我正在寻找可以加载 TGA 文件的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T16:01:27.140

你当然可以！看看[TargaImage](http://www.codeproject.com/Articles/31702/NET-Targa-Image-Reader)。

或者，您可以查看[DevIL](http://www.mastropaolo.com/devildotnet/)，但根据您的情况，这可能有点矫枉过正。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T16:01:25.910

默认情况下，.NET 无法读取 TGA 文件，因为框架中没有内部 TGA 文件处理程序...

但是如果外部类库没问题，

您可以使用[`The .NET Targa Image Reader`](http://www.codeproject.com/Articles/31702/NET-Targa-Image-Reader)from`CodeProject`读取 PictureBox 中的 TGA 图像...

您将在链接页面上找到一些示例代码，以在普通 PictureBoxes 中加载 TGA 图像...

别忘了查看那里的评论，那里有一个[`Simple But Necessary Fix`](http://www.codeproject.com/Messages/4209395/Re-Great-work-Simple-fix-needed.aspx)提到...

# jquery - jQuery：如何用 .on 替换 .live？

> ID：10604328
> 
> 赞同：51
> 
> 时间：2012-05-15T15:47:14.880
> 
> 标签：jquery

> **可能重复：**
> [jQuery 1.7 - 将 live() 变成 on()](https://stackoverflow.com/questions/8021436/jquery-1-7-turning-live-into-on)

根据 jQuery API ( [http://api.jquery.com/on/](http://api.jquery.com/on/) ) 函数 'live' 已被弃用，建议使用 'on' 代替。但是，当我在代码中将 'live' 替换为 'on' 时，jQuery 再也找不到后来添加的元素了：

这有效（但已弃用）：

```
$('li.bibeintrag').live('click', function(){
alert('myattribute =' + $(this).attr('myattribute'));
}); 
```

这是 API 中“on”的一个示例：

```
$("#dataTable tbody tr").on("click", function(event){
    alert($(this).text());
}); 
```

当我将代码更改为此（“live”替换为“on”）时，它不再起作用（jQuery 将找不到以后添加的元素（例如，带有追加））：

```
$('li.bibeintrag').on('click', function(){
alert('myattribute =' + $(this).attr('myattribute'));
}); 
```

我究竟做错了什么？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-15T15:47:53.260

您应该将事件添加到`li.bibeintrag`.

```
$('ul').on('click', "li.bibeintrag", function(){
    alert('myattribute =' + $(this).attr('myattribute'));
}); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-15T15:50:55.500

jQuery 的 live，当通过`$.on`样式查看时，看起来像这样：

```
$(document).on("click", "li.bibeintrag", function(){

}); 
```

它将监听该`document`级别的点击事件，并确定它们的目标是否与 的第二个参数匹配`$.on`。我们鼓励您和我自己做这件事，但不是在文档级别监听，我们希望更接近元素本身（因此事件在处理之前不需要传播太远）。

由于您正在响应对 an 的点击，因此请`li`在该项目父级的级别上收听：

```
$("ul#myList").on("click", "li.bibeintrag", function(){
  /* Respond */
}); 
```

请记住，如果不提供 的第二个参数`$.on`，事件处理程序将绑定到元素本身，这意味着您不会获得`$.live`对动态添加的元素做出反应的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:51:25.490

这应该工作

```
$('ul').on('click','li.bibeintrag' function(){
  alert('myattribute =' + $(this).attr('myattribute'));
}); 
```

# asp.net-mvc-3 - 如何显示保存在我的数据库中的图像

> ID：10604329
> 
> 赞同：0
> 
> 时间：2012-05-15T15:47:16.707
> 
> 标签：asp.net-mvc-3, razor

我有一个保存图像的数据库

![在此处输入图像描述](../Images/407e6326410521d92bff0382009075c1.png)

如何显示图像？现在我这样显示

```
 <img alt="@album.Room_number" src="@album.ImageData" /> 
```

但我明白了：

![在此处输入图像描述](../Images/1da668ff75e8fc4dfaf25679ac9438d4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:54:03.907

如果您的客户端浏览器支持，您可以使用[Data URI 方案：](http://en.wikipedia.org/wiki/Data_URI_scheme)

```
<img alt="@album.Room_number" src="data:image/jpeg;base64,@Convert.ToBase64String(album.ImageData)" /> 
```

如果浏览器不支持它，您将必须创建一个控制器操作来查询数据库并将图像流式传输到响应：

```
public ActionResult Image(int id)
{
    byte[] imageData = ... go and fetch the corresponding image data from the database
    return File(imageData, "image/jpeg");
} 
```

进而：

```
<img alt="@album.Room_number" src="@Url.Action("Image", new { id = album.ImageId })" /> 
```

当然，在这种情况下，您不应该`ImageData`在初始请求中获取属性，以避免在视图中不再使用它时不必要地查询它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T15:51:08.357

您需要创建一个控制器操作，使用`return File(...)`.

然后你就可以写了`<img src="@Url.Action(...)" />`。

# jquery-mobile - JQuery mobile 中不显示进度条加载消息

> ID：10604331
> 
> 赞同：0
> 
> 时间：2012-05-15T15:47:29.290
> 
> 标签：jquery-mobile

JQuery Mobile 1.1.0 中的加载消息似乎不起作用。这是代码的[JSFiddle](http://jsfiddle.net/L2ktR/)。

当我使用 1.0b2 版本时，它按预期工作。这是 1.1.0 中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T06:42:07.973

这不是一个错误。最新的 Jquery 支持更多的配置选项。您可以定义laoding消息主题等。

[请参阅此处的文档](http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html)

示例代码

```
$(document).bind("mobileinit", function(){
    $.mobile.loadingMessageTheme = 'a';
    $.mobile.loadingMessageTextVisible = true;
}); 
```

将上述代码保存在 js 文件中（例如 config.js ）并在导入 jquerymobile 框架之前将其导入。

祝你好运。

# php - php 以二进制形式流式传输两个文件以显示下载提示

> ID：10604334
> 
> 赞同：0
> 
> 时间：2012-05-15T15:47:40.093
> 
> 标签：php, file, download, http-headers

我有一个包含以下来源的 download.php 文件：

```
<?php
$filename = $_GET['file'];
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header('Content-Description: File Transfer');
header("Content-type: text/csv");
header("Content-Disposition: attachment; filename={$filename}");
header("Expires: 0");
header("Pragma: public");
readfile($filename);
?> 
```

这只是为了演示。它可以流式传输文件并显示下载提示。但这仅适用于一个文件。如果我想流式传输两个或三个文件怎么办？有没有比继续重定向页面两三次直到所有文件都下载完更优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:50:28.497

不可能流式传输多个文件，在任何情况下都不能跨浏览器。

不过，您可以流式传输包含多个文件的 zip 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:00:15.917

您可以有一个包含多个 iframe 的 html 页面，每个 iframe 都指向一个下载 url。

# c# - ASP.NET 2.0 Gridview 位复选框

> ID：10604338
> 
> 赞同：0
> 
> 时间：2012-05-15T15:47:53.707
> 
> 标签：c#, asp.net-2.0

我的数据库中有一个列。该列从存储的过程进入我的网格视图，并将网格视图中的列设置为一个复选框，这没关系。对于我正在使用的所有其他列

```
 GridViewRow row = ((GridView)sender).SelectedRow;
    textbox.Text = row.Cells[x].Text.ToString(); 
```

我已经使用它从数据库中设置表单中的所有文本框。但我试图找到代码来访问gridview中的复选框。我试过了

```
 row.cells[bitColumn].Text.ToString 
```

但这不会返回 1 或 0。

所以我的问题是，当您在网格视图中有一个复选框时，您如何访问它？这样我就可以根据这个位在我的表单中设置一个复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:54:09.650

我不喜欢通过按数字索引来访问列——你永远不知道它们什么时候会改变。而是尝试按名称访问它们：

`CheckBox cb = (CheckBox)Row.FindControl("chkSelector");`

`chkSelector`ASP.net 复选框控件在哪里。然后你可以检查是否`cb.Checked`。这将返回一个布尔值作为真/假，然后您可以将其映射到您的位。如果`cb.Checked`是`true`赋值1，否则赋值0。

# c# - 如何隐藏 ac# 应用程序进行的 API 调用？

> ID：10604344
> 
> 赞同：2
> 
> 时间：2012-05-15T15:48:05.927
> 
> 标签：c#, api, winapi, apimonitor

我想从[API Monitor](http://www.rohitab.com/apimonitor)之类的程序中隐藏在我的 c# 程序中使用的 Api 调用。（Windows）加壳是否可以做到这一点？
我搜索了很多，但我找不到任何可以帮助的东西。
提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:50:35.937

可能唯一会隐藏这种事情的是混淆器......

# google-chrome-extension - 检测标签是否从 Google Chrome 扩展程序发布到

> ID：10604348
> 
> 赞同：1
> 
> 时间：2012-05-15T15:48:16.910
> 
> 标签：google-chrome-extension

有没有办法检测特定标签是否通过 Google Chrome 扩展程序发布到？我正在开发一个包含“撤消关闭选项卡”类型功能的扩展，并且希望处理与 GET 页面不同的 POST 选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T02:42:29.303

我相信通过“方法”返回参数在[chrome.webRequest.onBeforeRequest](http://code.google.com/chrome/extensions/webRequest.html#event-onBeforeRequest)中存在解决方案。一旦我有时间尝试这个，我会用一个工作代码示例报告。

# asp.net - ASP.NET 验证器仅进行日期比较检查是否有效的日期时间

> ID：10604354
> 
> 赞同：0
> 
> 时间：2012-05-15T15:48:36.630
> 
> 标签：asp.net, validation, datetime

所以目前我有这 3 个验证器

```
<asp:RegularExpressionValidator ID="dashboardFromDateDateCheck" runat="server" ValidationExpression="[0-9][0-9]/[0-9][0-9]/[0-9][0-9][0-9][0-9]" 
ControlToValidate="filterFromDate" ErrorMessage="Invalid From Date Format, (mm/dd/yyyy)" Text="*"></asp:RegularExpressionValidator> 

<asp:RegularExpressionValidator ID="dashboardToDateDateCheck" runat="server" ValidationExpression="[0-9][0-9]/[0-9][0-9]/[0-9][0-9][0-9][0-9]" 
ControlToValidate="filterToDate" ErrorMessage="Invalid To Date Format, (mm/dd/yyyy)" Text="*"></asp:RegularExpressionValidator> 

<asp:CompareValidator ID="checkDashboardFilterDateRange" runat="server" ControlToValidate="filterFromDate" ControlToCompare="filterToDate" Type="Date"
Operator="LessThanEqual" ErrorMessage="From Date must be before To Date" Text="*"/> 
```

但我只希望比较验证器在两个日期都有效并且两个日期都输入的情况下工作。因为在我的搜索中，他们可以将日期留空或只输入从或到日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:13:17.477

删除你的`CompareValidator`并添加一个`CustomValidator`. 有了 ，`CustomValidator`您将能够实现您想要的逻辑。

如果您愿意，您可以在技术上将其他两个验证器放入您的`CustomValidator`.，但我会将这两个分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:17:50.917

你的代码似乎对我有用。如果我将一个或两个字段留空，它会让我通过。否则验证有效。唔。

# delphi - 使用 Indy 下载文件时从一开始就分配完整大小

> ID：10604355
> 
> 赞同：3
> 
> 时间：2012-05-15T15:48:37.207
> 
> 标签：delphi, download, delphi-2010, indy, indy10

我有这个基本上下载文件的delphi代码（使用**Delphi 2010 + Indy 10.5.8 r4743**），一切正常，除了当我下载100Mb（例如）时，*似乎*Indy分配了完整大小（即a立即创建包含 100MB 虚拟内容 (*) 的文件），然后下载该文件。

最后 100MB 被**正确下载**，但由于下载过程是在后台使用隐藏的 EXEecutable 完成的，我的代码依赖于临时文件大小来**更新主 UI**

```
with IdHTTP do
begin
     if FileExists(LocalFile) then
        iLength     := FileSize2(LocalFile)
     else
         iLength    := 0;

     DoExit         := False;
     try
        try
           repeat
                 if ExitApp then
                    Exit;

                 if Not FileExists(LocalFile) then
                    AFileStream     := TFileStream.Create(LocalFile, fmCreate)
                 else
                 begin
                      // File already exist, resume download
                      AFileStream   := TFileStream.Create(LocalFile, fmOpenReadWrite);
                      DoExit        := (AFileStream.Size >= iLength);
                      if (Not DoExit) then
                         AFileStream.Seek(Max(0, AFileStream.Size - 4096), soFromBeginning);
                 end;

                 iRangeEnd          := AFileStream.Size + 50000;

                 if (iRangeEnd < iLength) then
                    Request.Range   := IntToStr(AFileStream.Position) + '-' + IntToStr(iRangeEnd)
                 else
                 begin
                      Request.Range := IntToStr(AFileStream.Position) + '-';
                      DoExit        := True;
                 end;

                 PostTime           := Now;
                 Get(TheURL, AFileStream);
                 IsError            := Not (ResponseCode in [200, 206]);
           until DoExit;

           Disconnect;
        except
              IsError               := True;
        end;    // try/except
     finally
            FreeAndNil(AFileStream);
     end;    // try/finally
end;    // with 
```

**我的问题是**有没有办法避免印地的这种行为？我知道我可以使用 OnWork 事件，但是我需要跟踪文件名。

理想情况下，我也想避免 IPC（有点矫枉过正+我不想使用它，比如说每秒进行多次下载，我非常喜欢使用文件大小作为下载进度的指示，因为它提供了更多的自由更新 UI 时）

(*) 我认为它是虚拟内容，因为我当前的互联网连接速度需要 60-100 秒才能真正获取文件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T17:08:27.523

是的，`TIdHTTP`如果它提前知道大小，则根据 HTTP 响应标头预先分配完整的文件大小。这是一种优化技术。预分配文件避免了写入较大文件时不必要的文件系统开销，因为文件不必随着时间的推移而不断增长，在 HDD 上寻找可用扇区，减慢写入过程。目前没有办法禁用预分配，这是 Indy 内部的硬编码行为。因此，依赖文件的实际大小作为进度指示器对您不起作用。您将不得不将实际进度信息从后台应用程序传达给主应用程序。

# c# - 如果我无法明确定义详细信息，如何添加到 linq2sql 实体集以获取主详细信息？

> ID：10604357
> 
> 赞同：0
> 
> 时间：2012-05-15T15:48:40.887
> 
> 标签：c#, linq, linq-to-sql, master-detail, entityset

也许我会以错误的方式解决这个问题......

我有一个 Order 表和一个 OrderItem 表。我使用 linq2sql 生成的类创建了一个新订单。

然后，我尝试使用针对各种表的查询从我的数据库中获取所有可订购的项目。

然后，我尝试从该查询中创建一个新的 OrderItem 列表，但是我无法显式创建该对象。

```
Explicit construction of entity type OrderItem in query is not allowed. 
```

这是查询：

```
return (from im in dc.MasterItems
                    join c in dc.Categories
                      on im.CATEGORY equals c.CATEGORY1                      
                    select new OrderItem()
                    {
                        OrderItemId = im.ItemId
                    }); 
```

这个想法是在创建新订单时使用所有可订购项目填充数据库，然后将它们显示在网格中以进行更新。我正在获取该查询的结果并尝试`AddRange`使用`Order.OrderItems`

是否有使用 linq2sql 完成此任务的适当策略？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T19:33:15.720

根据我对 L2S 的理解，我认为您不能在查询中使用显式构造（换句话说`new SomeObj() { ... }`），因为您还没有枚举结果。换句话说，查询刚刚构建，那么您应该如何执行此操作：

```
SELECT new OrderItem() FROM MasterItems im JOIN Categories c on c.CATEGORY1 = im.CATEGORY 
```

这就是你想要做的，它不起作用，因为你不能返回 POCO（除非你以某种方式加入 OrderItem 并在`OrderItem.*`某处做）。最终，您要做的只是首先在查询中枚举集合（在 foreach 循环中或通过调用 ToList()），然后构建您的 OrderItem 对象。

```
var query = (from im in dc.MasterItems
                    join c in dc.Categories
                      on im.CATEGORY equals c.CATEGORY1                      
                    select new { MasterItem = im, Category = c});
List<OrderItem> returnItems = new List<OrderItem>();
foreach(var item in query)
{
    returnItems.Add(new OrderItem() { OrderItemId = item.MasterItem.ItemId });
}
return returnItems; 
```

或者

```
return (from im in dc.MasterItems
                    join c in dc.Categories
                      on im.CATEGORY equals c.CATEGORY1                      
                    select new { MasterItem = im, Category = c})
    .ToList()
    .Select(tr => new OrderItem() { OrderItemId = tr.MasterItem.ItemId }); 
```

试试看，如果有帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T19:02:32.893

通过创建一个部分文件来扩展订单类，其中该类 OrderItem 现在具有适合业务逻辑需求的属性，但不需要保存到数据库中。

```
public partial class OrderItem 
{
   public int JoinedOrderItemId { get; set; }
   public bool HasBeenProcessed { get; set; }

} 
```

# c++ - WS_EX_COMPOSITED - 高 CPU

> ID：10604359
> 
> 赞同：1
> 
> 时间：2012-05-15T15:48:52.007
> 
> 标签：c++, windows, winapi, gdi, double-buffering

我在我的应用程序中使用 WS_EX_COMPOSITED 样式，但它运行 CPU 到 100%，有没有办法停止我的应用程序绘图一段时间并仅在我需要时恢复？有些人建议使用睡眠，但我究竟在 WndProc 中的哪个位置放置睡眠？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T19:04:33.557

不要使用`Sleep`. 这是几乎没有问题的解决方案。

确实`WS_EX_COMPOSITED`可以占用 CPU，但根据我的经验，主要是在 XP 上。Vista 及更高版本对性能的影响要小得多。但是，如果您的应用处于空闲状态，则不会重新绘制。如果您的 CPU 为 100% 并且应用程序处于空闲状态，那么您在处理时做错了`WM_PAINT`。你所描述的听起来像是一个无限循环的油漆循环。如果你做对了，那将不会发生，即使你使用`WS_EX_COMPOSITED`.

至于进行双缓冲的正确方法，[`BeginBufferedPaint`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773257.aspx)是在 Vista 及更高版本上执行此操作的现代方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:53:26.677

如果您休眠应用程序的线程，它将使应用程序 UI 无响应。在我看来，您需要在自己的线程中实现绘图代码。然后，您可以休眠该线程而不影响应用程序的其余部分，尽管我建议使用事件和 WaitForSingleObject/WaitForMultipleObjects 调用而不是休眠。

# drupal - 使用多个面板创建显示以与数据交互

> ID：10604374
> 
> 赞同：0
> 
> 时间：2012-05-15T15:49:34.210
> 
> 标签：drupal, drupal-7, drupal-panels

我想使用面板来驱动一大堆页面进行数据交互，但我不确定如何让面板相互“交互”。我认为最好的表达方式是举个例子。假设我有一个具有节点列表的面板（在视图中？），还有另一个面板，我想为我单击的任何节点显示一个编辑器。我有一个页面，其中第一个面板位于左侧的块中，第二个面板位于右侧的块中。所以我想在点击时，会有一些 AJAX 抓取将一些页面放在另一个面板中。现在，这是一个简单的例子，我将在多个面板之间完成许多不同的交互集，做各种各样的事情。但这是一个起点。目标是能够在可能与类似数据交互的多个页面中重用这些面板，

使用面板（可能还有补充模块？）可以完成多少？我需要在哪里编码才能将它们放在一起？我认为它可能需要面板页面中包含数据选择器面板、数据视图面板等内容的代码来“将它们链接在一起”。是否有任何关于如何做到这一点的好例子，因为对于任何类型的基于 Web 的数据交互来说，这似乎是一个相当基本的练习......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:40:38.863

最好也可能是最简单的方法可能是使用一些编码来完成，但如果您更喜欢使用模块，那么模块系列（如[Context](http://drupal.org/project/context)或[Rules](http://drupal.org/project/rules)）应该可以为您提供一些您所追求的功能。我还建议研究[AJAXification](http://drupal.org/node/173846)方法和模块。

# windows-phone-7 - 尝试根据用户输入实时更新列表框时出现 WPF 性能问题

> ID：10604375
> 
> 赞同：0
> 
> 时间：2012-05-15T15:49:39.310
> 
> 标签：windows-phone-7, listbox, windows-phone-7.1

我是 Windows Phone 开发的新手，我正在尝试开发一个字典应用程序。我有一个允许用户输入单词的文本框和一个实时显示与用户输入匹配的所有单词的列表框，所以我使用了 textchanged 事件，如下所示：

```
private void searchTextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
            wordNeedToDefine = searchTextBox.Text;
            if (!(wordNeedToDefine == null || wordNeedToDefine.Equals("")))
            {
                var items = (from words in wordAndIndexList where words[0].StartsWith(wordNeedToDefine) select words[0]);                    
            }
            this.Dispatcher.BeginInvoke(() =>
            {
                wordsListBox.ItemsSource = items;
            });
    } 
```

一切正常，但存在性能问题，当用户输入文本和列表框更新项目时，它会滞后。有人可以告诉我我需要做些什么来提高性能。我也在尝试 AutoCompleteBox 但它有同样的问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:35:17.000

如果您使用 a[`CollectionViewSource`](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource%28v=vs.95%29.aspx)进行过滤，您将获得更好的性能，并且您必须过滤的字符越多将使其更快。即只有在用户输入至少 3 个字符后才开始过滤。

# dependency-injection - 如何在 TYPO3 Extbase 扩展中包含或自动加载外部库？+ 依赖注入？

> ID：10604377
> 
> 赞同：4
> 
> 时间：2012-05-15T15:49:45.897
> 
> 标签：dependency-injection, typo3, autoload, extbase

我正在使用 Extbase 1.4 开发一个 TYPO3 4.6 扩展，并且我试图包含一个外部库。该库，在我的例子中是[facebook PHP SDK](https://github.com/facebook/facebook-php-sdk)，位于`$_EXTKEY/Resources/PHP/facebook-php-sdk/facebook.php`. 我希望库在我需要的地方自动加载并自动注入（Dependecy Injection）。

我在网上找到的一些评论建议应该包含带有 require_once() 的库：

[http://forge.typo3.org/issues/33142](http://forge.typo3.org/issues/33142)

> 1.  **如果它只是一个很小的帮助库，它的目的是存储在 {PackageRoot}/Resources/PHP/{libraryName} 中并通过 require 包含在内。**然而，这是否被问题所怀疑？
> 2.  如果 FLOW3 包主要代表外部库，就像 Imagine 或 Swift 包中的情况一样，则库代码直接放在 {PackageRoot}/Classes 之下。”

[http://lists.typo3.org/pipermail/typo3-project-typo3v4mvc/2011-July/009946.html](http://lists.typo3.org/pipermail/typo3-project-typo3v4mvc/2011-July/009946.html)

> “我会在特定操作中包含类（使用 require_once）来处理这个问题。这样您就可以访问这些函数，并且该类成为您的库。”

我试过了，它的工作原理是这样的：

```
<?php
require_once( t3lib_extMgm::extPath('extkey') . 'Resources/PHP/facebook-php-sdk/facebook.php');

class Tx_WsLogin_Domain_Repository_FacebookUserRepository extends Tx_WsLogin_Domain_Repository_UserRepository {

protected $facebook;

public function __construct() {
    $this->setFacebook(new Facebook(array(
        'appId' =>'',
        'secret' => '')
    ));
    parent::__construct();
}

public function setFacebook(Facebook $facebook) {
    $this->facebook = $facebook;
}

public function sampleFunction() {
    $userId = $this->facebook->getUser();
}

}
?> 
```

但是我怎样才能让它自动加载并使用 injectFacebook 函数自动注入库呢？

## 编辑：

就像[@alex_schnitzler](https://twitter.com/#!/alex_schnitzler)和[@sorenmalling](https://twitter.com/#!/sorenmalling)提到的自动加载一样：

> @PeterTheOne 将所有文件放在 ext_autoload.php 中，然后使用 DI 或对象管理器。
> 
> @PeterTheOne 将类定义放入扩展中的 ext_autoload.php 中？

我试过这样（文件：ext_autoload.php）：

```
<?php

$extPath = t3lib_extMgm::extPath('extKey');

return array(
    'facebook' => $extPath . 'Resources/PHP/facebook-php-sdk/facebook.php',
);

?> 
```

它似乎找到并包含正确的文件。但是当我尝试用户依赖注入（如[彼得回答](https://stackoverflow.com/questions/10604377/how-do-i-include-or-autoload-external-libraries-in-a-typo3-extbase-extension/10605102#10605102)）时，我收到一个错误：

> **没有传递正确的构造函数依赖信息数组！**
> 
> 在第 247 行的文件 /var/syscp/webs/web1/dev/typo3_src-4.5.15/typo3/sysext/extbase/Classes/Object/Container/Container.php 中引发了 InvalidArgumentException。

我认为这是因为 Facebook 类的构造函数有一个必需的 $config 参数。

## 编辑2：

我做了彼得在他的回答中所说的，在[@alex_schnitzler](https://twitter.com/#!/alex_schnitzler)和[@sorenmalling](https://twitter.com/#!/sorenmalling)的帮助下，他们将我指向 ObjectManager，我的 FacebookService 现在看起来像这样：

```
class Tx_Extkey_Service_FacebookService implements t3lib_Singleton {

/**
* @var Tx_Extbase_Object_ObjectManagerInterface
*/
protected $objectManager;

/**
 * Facebook from @link https://github.com/facebook/facebook-php-sdk facebook-php-sdk
 *
 * @var Facebook
 */
protected $facebook;

/**
* @param Tx_Extbase_Object_ObjectManagerInterface $objectManager
*/
public function injectObjectManager(Tx_Extbase_Object_ObjectManagerInterface $objectManager) {
    $this->objectManager = $objectManager;
}

/**
 * 
 */
public function initializeObject() {
    $this->facebook = $this->objectManager->create(
        'Facebook',
        array(
            'appId' =>'input appId here',
            'secret' => 'input app secret here'
        )
    );
}

/**
 * @return Facebook
 */
public function getFacebook() {
    return $this->facebook;
}

} 
```

如需更多帮助，请阅读： http: [//forge.typo3.org/projects/typo3v4-mvc/wiki/Dependency_Injection_(DI)](http://forge.typo3.org/projects/typo3v4-mvc/wiki/Dependency_Injection_%28DI%29)关于**initializeObject()**和**通过对象管理器创建原型对象的部分**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-26T12:55:32.070

首先在扩展根文件夹中创建 ext_autoload.php

并添加您的代码，它包含以键为类名（类名必须以扩展键为前缀）和值作为文件路径的单维数组。确保清除您的网站

```
<?php

    $extensionPath = \TYPO3\CMS\Core\Utility\ExtensionManagementUtility::extPath('rent_system');
    return array(   
        'rent_system_TCPDF' => $extensionPath.'Resources/Private/PHP/tcpdf/tcpdf.php',  
    );
?> 
```

在控制器文件中

```
$pdf = $this->objectManager->create('rent_system_TCPDF'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:32:38.740

Extbase 注入非常简单。[这是实际的实现。](http://doxygen.frozenkiwi.com/typo3/html/dc/d66/Container_8php_source.html#l00177)但是，不使用外部库。

一旦你弄清楚如何加载库，你是否尝试过注入它？像这样：

```
/**
 * @var Facebook
 */
protected $facebook;

/**
 * inject the facebook
 *
 * @param Facebook facebook
 * @return void
 */
public function injectFacebook(Facebook $facebook) {
    $this->facebook = $facebook;
} 
```

> > **注意：**您需要注释中的@param，并且您还需要在添加此代码后清除配置缓存。

我不了解 Facebook SDK API，但希望您可以使用默认构造函数实例化 Facebook 对象，然后稍后使用 setter 方法添加参数。您可能想要创建一个加载 Facebook PHP 并设置基本参数的 FacebookService 类（单例）。然后，您可以在需要时注入 FacebookService 以获取实际的 Facebook 对象。

# php - 我在哪里定义索引？

> ID：10604380
> 
> 赞同：4
> 
> 时间：2012-05-15T15:49:58.437
> 
> 标签：php

`index.php`包含这种风格的链接：

```
<a href="index.php?id=1">1</a>
<a href="index.php?id=2">2</a> 
```

然后是这种风格的 PHP 段落：

```
if ($_GET["id"] == "1") {}
elseif ($_GET["id"] == "2") {} 
```

因此，当单击链接时，将重新加载页面，并运行 if/elseif 块之一。

`index.php`但是，当我第一次加载时出现此错误：**未定义索引：id**

我想这意味着`$_GET["id"]`需要有一个默认值。但是我在哪里把这个默认值放在我的代码中呢？如果我给它，例如，`"0"`脚本开头的值，代码块将永远不会运行，因为每次重新加载时该值都会被重置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T15:51:47.547

您可以先检查是否已设置：

```
if (isset($_GET["id"])) {

    if ($_GET["id"] == "1") {

    } elseif ($_GET["id"] == "2") {

    }

} 
```

[isset](http://us.php.net/manual/en/function.isset.php)是一种语言结构，如果未设置变量，则不会发出任何错误。

[empty](http://us.php.net/manual/en/function.empty.php)也不会发出错误，但也会检查“非空”值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T16:01:37.290

首先，忽略建议您设置默认值的答案。这不是必需的，而且是残酷的设计。在检查之前检查该值是否存在。

我建议不要使用 else/elseif 链。随着链接的增加，代码的丑陋程度也会增加。使用开关：

```
if(isset($_GET['id'])){

  switch($_GET['id']){
    case 1:
      // code
      break;
    case 2:
      // code
      break;
  }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T15:52:09.373

一种解决方案是检查 $_GET['id'] 是否为空，如果是则设置为 0。

```
if(empty($_GET['id']))
{
    $_GET['id'] = 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T15:53:04.003

尝试：

`if (!isset($_GET["id"])) { $_GET["id"] = "0" }`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T15:54:06.560

第一次加载页面时，它不会有任何查询参数。

您应该将条件包装在另一个检查是否存在的条件中`id`：

```
if (isset($_GET['id'])) {
    // you can use switch or keep the ifelseif chain
    switch ($_GET['id']) {
        case 1:
            // do stuff with 1
            break;

        case 2:
            // do stuff with 2
            break;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T15:52:12.227

```
$id = (isset($_GET['id'])) ? $_GET['id'] : null;

if ($id == "1") {}
} elseif ($id == "2") {} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T16:25:30.617

代替

```
if ($_GET["id"] == "1") {} 
```

和

```
if (isset($_GET['id']) && $_GET['id']==1){} 
```

# c# - 迭代对象类型时如何添加到 ICollection 属性？

> ID：10604382
> 
> 赞同：0
> 
> 时间：2012-05-15T15:50:08.823
> 
> 标签：c#, ienumerable, icollection

我需要添加到`ICollection<string>`我拥有的类的属性中`IEnumerable`。这是一个说明问题的完整程序：

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace CollectionAddingTest
{
    public class OppDocumentServiceResult
    {
        public OppDocumentServiceResult()
        {
            this.Reasons = new List<string>();
        }

        public Document Document { get; set; }

        public bool CanBeCompleted
        {
            get
            {
                return !Reasons.Any();
            }
        }

        public ICollection<string> Reasons { get; private set; }
    }

    public class Document
    {
        public virtual string Name { get; set; }
    }

    public class Program
    {
        private static void Main(string[] args)
        {
            var docnames = new List<string>(new[] {"test", "test2"});

            var oppDocResult = docnames
                .Select(docName
                        => new OppDocumentServiceResult
                               {
                                   Document = new Document { Name = docName }
                               });

            foreach (var result in oppDocResult)
            {
                result.Document.Name = "works?";
                result.Reasons.Add("does not stick");
                result.Reasons.Add("still does not stick");
            }

            foreach (var result in oppDocResult)
            {
                // doesn't write "works?"
                Console.WriteLine(result.Document.Name);

                foreach (var reason in result.Reasons)
                {
                    // doesn't even get here
                    Console.WriteLine("\t{0}", reason);
                }
            }
        }
    }
} 
```

我希望每个 OppDocumentServiceResult 将其引用的`Document.Name` 属性设置为*有效？*每个 OppDocumentServiceResult 都应该添加两个原因。然而，两者都没有发生。

我无法向其添加内容的原因属性有什么特别之处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:39:54.173

问题是这`oppDocResult`是使用延迟执行的 LINQ 查询的结果。

换句话说，每次迭代它时，都会执行查询并创建*新* `OppDocumentServiceResult`对象。如果你把诊断放在`OppDocumentServiceResult`构造函数中，你会看到。

因此，`OppDocumentServiceResult`您最后迭代的对象与您添加原因的对象不同。

现在，如果您添加一个`ToList()`调用，那么它将*查询*具体化为一个“普通”集合（a `List<OppDocumentServiceResult>`）。每次迭代该列表时，它都会返回对相同对象的引用 - 因此，如果您在第一次迭代它们时添加原因，然后在再次迭代它们时打印出原因，您将得到结果'正在寻找。

有关更多详细信息，请参阅[此博客文章](http://blogs.msdn.com/b/charlie/archive/2007/12/09/deferred-execution.aspx)（在“LINQ 延迟执行”的许多搜索结果中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:34:06.603

问题是您最初`Select`正在实例化新`OppDocumentServiceResult`对象。添加一个`ToList`，你应该很高兴：

```
var oppDocResult = docnames
    .Select(docName
            => new OppDocumentServiceResult
                   {
                       Document = new Document { Name = docName }
                   }).ToList(); 
```

正如[Servy](https://stackoverflow.com/users/1159478/servy)指出的那样，我应该在我的答案中添加更多细节，但谢天谢地，他在[Tallmaris 的回答](https://stackoverflow.com/a/10605016/61654)中留下[的评论](https://stackoverflow.com/questions/10604382/how-do-i-add-to-an-icollection-property-when-iterating-object-type/10605123#comment13739263_10605016)解决了这一点。Jon Skeet 在他的回答中进一步扩展了原因，但归结为“oppDocResult 是使用延迟执行的 LINQ 查询的结果”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T15:54:34.733

`ForEach()`仅针对您定义，`List<T>`您将**无法**将其用于`ICollection<T>`.

你必须选择：

```
((List<string>) Reasons).ForEach(...) 
```

或者

```
Reasons.ToList().ForEach(...) 
```

* * *

然而，**我更喜欢的方法**

我会定义这个扩展，它可以帮助你在不浪费资源的情况下实现自动化：

```
public static class ICollectionExtensions
{
    public static void ForEach(this ICollection<T> collection, Action<T> action)
    {
        var list = collection as List<T>;
        if(list==null)
            collection.ToList().ForEach(action);
        else
            list.ForEach(action);
    }
} 
```

现在我可以使用`ForEach()`反对`ICollection<T>`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T16:26:23.710

像这样修复，转换为 List 而不是保留 IEnumerable：

```
var oppDocResult = docnames
        .Where(docName => !String.IsNullOrEmpty(docName))
        .Select(docName
            => new OppDocumentServiceResult
            {
                Document = docName
            }).ToList(); 
```

我只能猜测（这真的是在黑暗中拍摄！）这背后的原因是在 IEnumerable 中的元素就像真实元素的“代理”？基本上，由 Linq 查询定义的 Enumerable 就像是获取所有数据的“承诺”，所以每次迭代都会取回原始项目？这并不能解释为什么正常的属性仍然存在......

所以，修复就在那里，但我担心的解释不是……至少不是来自我:(

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T16:02:47.150

只需在课堂上更改代码

```
public List<string> Reasons { get; private set; } 
```

# javascript - 使用javascript打印自定义网址不起作用

> ID：10604386
> 
> 赞同：1
> 
> 时间：2012-05-15T15:50:30.793
> 
> 标签：javascript, printing, window

我正在尝试通过传递 window.open url 并使用 window.focus、window.print 来打印我的域上的另一个页面。但是，打印预览只显示一个空白页面。我猜我必须等到页面加载完毕，但我不确定该怎么做。这是代码：

```
var newWin=window.open('http://mydomain.com');
newWin.focus(); 
newWin.print(); 
newWin.close(); 
```

我试过像

```
newWin.onload() {
    newWin.print();
}); 
```

无济于事。

编辑1：

```
var newWin=window.open('http://localhost:76');
newWin.focus(); 
newWin.onload = newWin.print();
newWin.close(); 
```

同样的问题仍然存在

编辑2：

```
var newWin=window.open('http://localhost:76');
newWin.focus(); 
newWin.body.onload = newWin.print(); 
```

在此处添加 newWin.close() 会导致打印功能出错并仅打印
页面的标题。否则，使用此页面可以正确打印

编辑3：

```
function printWin(newWin) {
    newWin.print();
    newWin.close();
}

var newWin = window.open('http://localhost:76');
newWin.focus();
newWin.body.onload = printWin(newWin); 
```

这会导致打印像以前一样过早发生，预览空白页面。wtf :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:58:15.063

打开弹出窗口。然后检查弹出窗口是否准备好。准备好后，注入一个 javascript。

```
<script type="text/javascript">

    var popup = window.open("b.htm");
    var body;
    function check() {
        body = popup.document.getElementsByTagName("body");
        if (body[0] == null) {
            setTimeout(check, 50);
        } else {
            var n = popup.document.createElement("script");
            n.src = "printandclose.js";
            body.appendChild(n);
        }
    }
    check();

</script> 
```

printandclose.js

```
window.print();
window.open("", "_self");
window.close(); 
```

让我知道它是否有效。如果您不添加`window.open("", "_self");`警报，则会弹出一个警报，告诉用户该窗口即将关闭。

# css - 如何将 CSS3 过渡应用于除背景位置之外的所有属性？

> ID：10604389
> 
> 赞同：121
> 
> 时间：2012-05-15T15:50:42.527
> 
> 标签：css, css-transitions

我想将 CSS 过渡应用于除背景位置之外的所有属性。我试着这样做：

```
.csstransitions a {
    -webkit-transition: all 0.3s ease;                  
    -moz-transition: all 0.3s ease;                 
    -o-transition: all 0.3s ease;   
    -ms-transition: all 0.3s ease;          
    transition: all 0.3s ease;
}

.csstransitions a {
    -webkit-transition: background-position 0s ease 0s;                 
    -moz-transition: background-position 0s ease 0s;                
    -o-transition: background-position 0s ease 0s;  
    -ms-transition: background-position 0s ease 0s;         
    transition: background-position 0s ease 0s;
} 
```

首先，我将所有属性设置为过渡，然后尝试仅覆盖 background-position 属性的过渡。

然而，这似乎也重置了所有其他属性 - 所以基本上没有任何转换似乎不再发生。

有没有办法在不列出所有属性的情况下做到这一点？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2014-06-23T16:43:16.440

这是一个也适用于 Firefox 的解决方案：

```
transition: all 0.3s ease, background-position 1ms; 
```

我做了一个小演示：http: [//jsfiddle.net/aWzwh/](http://jsfiddle.net/aWzwh/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-28T14:50:51.527

希望不要迟到。仅使用一条线即可完成！

```
-webkit-transition: all 0.2s ease-in-out, width 0, height 0, top 0, left 0;
-moz-transition: all 0.2s ease-in-out, width 0, height 0, top 0, left 0;
-o-transition: all 0.2s ease-in-out, width 0, height 0, top 0, left 0;
transition: all 0.2s ease-in-out, width 0, height 0, top 0, left 0; 
```

这适用于 Chrome。您必须用逗号分隔 CSS 属性。

这是一个工作示例：http: [//jsfiddle.net/H2jet/](http://jsfiddle.net/H2jet/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-10T09:17:30.750

您可以尝试使用标准的 W3C 方式：

```
.transition { transition: all 0.2s, top 0s, left 0s, width 0s, height 0s; } 
```

[http://jsfiddle.net/H2jet/60/](http://jsfiddle.net/H2jet/60/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-27T05:53:32.183

试试这个...

```
* {
    transition: all .2s linear;
    -webkit-transition: all .2s linear;
    -moz-transition: all .2s linear;
    -o-transition: all .2s linear;
}
a {
    -webkit-transition: background-position 1ms linear;
    -moz-transition: background-position 1ms linear;
    -o-transition: background-position 1ms linear;
    transition: background-position 1ms linear;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-02T06:18:46.873

对于任何人都在寻找一种速记方式，为所有属性添加转换，**除了一个具有延迟的特定属性**，请注意即使是现代浏览器之间也存在**差异。**

下面的简单演示显示了差异。查看[完整代码](https://codepen.io/iplus26/pen/PaVXxG)

```
div:hover {
  width: 500px;
  height: 500px;
  border-radius: 0;
  transition: all 2s, border-radius 2s 4s;
} 
```

Chrome 将“组合”这两个动画（正如我所期望的那样），如下所示：

[![在此处输入图像描述](../Images/151ea5f7698109a8b717e2b4aadced85.png)](https://i.stack.imgur.com/iCu70.gif)

虽然 Safari “分离”了它（这可能不是预期的）：

[![在此处输入图像描述](../Images/836068646cc923444c1a1f1a3c9d19ef.png)](https://i.stack.imgur.com/cBEC9.gif)

一种更兼容的方式是，如果您对其中一个属性有延迟，则为特定属性分配特定的转换。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-18T20:00:27.380

尝试：

```
-webkit-transition: all .2s linear, background-position 0; 
```

这对我有用。

# .net - WPF 文本呈现问题 - 字母呈现为正方形

> ID：10604390
> 
> 赞同：0
> 
> 时间：2012-05-15T15:50:42.823
> 
> 标签：.net, wpf, text, rendering

英文文本显示为正方形。

在我们的一个用户框中，我们遇到了这种奇怪的行为。他使用的是 Windows 7 64 位 + 不错的显卡。他最近开始遇到这个问题。

我已经检查了盒子上的语言设置，它似乎没问题

请参阅下面的屏幕截图，以前从未见过。它不仅是我们的 WPF 表单，它是任何 WPF 表单（下面是带有英文标签/文本和按钮的简单窗口）。

![看截图](../Images/79c4708ea41f689ddb18b37df6be8095.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:03:39.677

确保您使用的字体安装在 Windows/Fonts 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T17:26:34.430

在我们的例子中，它是一个缺失的字体。我们从运行 wpf 应用程序的机器上抓取字体并将它们复制过来。瞧……问题解决了

干杯。

# linux - 如何将前 10 个最新文件从一个目录复制到另一个目录？

> ID：10604391
> 
> 赞同：12
> 
> 时间：2012-05-15T15:50:45.143
> 
> 标签：linux, awk, copy, ls

我的所有 html 文件都驻留在此处：

```
/home/thinkcode/myfiles/html/ 
```

我想将最新的 10 个文件移动到`/home/thinkcode/Test`

到目前为止我有这个。请纠正我。我正在寻找单线！

```
ls -lt *.htm | head -10 | awk '{print "cp "$1" "..\Test\$1}' | sh 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T15:59:53.750

```
ls -lt *.htm | head -10 | awk '{print "cp " $9 " ../Test/"$9}' | sh 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T16:43:32.523

这是一个不使用的版本`ls`。它应该不太容易受到文件名中奇怪字符的影响：

```
find . -maxdepth 1 -type f -name '*.html' -print0 
     \| xargs -0 stat --printf "%Y\t%n\n" 
     \| sort -n 
     \| tail  -n 10 
     \| cut -f 2 
     \| xargs cp -t ../Test/ 
```

我使用`find`有几个原因：

1) 如果目录中的文件太多，bash 将拒绝通配符扩展*。

2) 使用`-print0`参数来`find`解决 bash 将文件名中的空格扩展为多个标记的问题。

* 实际上，bash 为它的通配符扩展和它的环境变量共享一个内存缓冲区，所以它不是严格的文件名数量的函数，而是文件名和环境变量的总长度的函数。环境变量太多 => 没有通配符扩展。

编辑：合并了@glennjackman 的一些改进。保留最初的使用`find`以避免使用可能在大目录中失败的通配符扩展。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-02-27T17:11:28.837

`cp`似乎理解反引号的命令。因此，您可以使用这样的命令将 10 个最新文件复制到另一个文件夹，例如`/test`：

```
cp `ls -t *.htm | head -10` /test 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-15T15:55:57.790

```
ls -lt *.html | head -10 | awk '{print $NF}' | xargs -i cp {} DestDir 
```

在上面的示例`DestDir`中是副本的目标目录。

在 xargs 之后添加`-t`以查看执行时的命令。即， `xargs -i -t cp {} DestDir`。

有关更多信息，请查看[xargs 命令](http://unixhelp.ed.ac.uk/CGI/man-cgi?xargs)。

*编辑*：正如@DennisWilliamson 所指出的（并且还检查了当前的手册页）re the `-i`option `This option is deprecated; use -I instead.`。

此外，提出的两种解决方案都取决于问题中的文件名，不包含任何空格或制表符。

# javascript - 鼠标悬停时 Img 源更改，单击时在 IE 中焦点更改为红色 X

> ID：10604398
> 
> 赞同：0
> 
> 时间：2012-05-15T15:51:09.650
> 
> 标签：javascript, jquery, internet-explorer, superfish

我正在使用 superfish 菜单，并且 `<img src>`由于我被迫遵循的一些可访问性指南，我不得不将所有背景图像更改替换为更改。所以菜单完全由带有文本的图像组成。

在 IE 中，当您单击图像时，它会在点击链接之前短暂变为红色 X 图像，我需要以某种方式摆脱它，我被难住了。我以前从未经历过这种情况。

```
var thisImg = null,
    newImg = null,
    imgSrc = null;

$(".sf-menu li").bind('mouseenter focusin', function () {

    if ( $(this).hasClass('sf-breadcrumb') ) {
        return;
    }
    else {
        thisImg = $(this).find("img:first"),
        newImg = thisImg.attr("src").replace(/.png/, "-hover.png");

        if ( $(this).is(".sf-menu>li>ul>li") ) {
            thisImg.attr("src", newImg);
        }
        else {
            $(".sf-breadcrumb").find("img:first").attr("src", function(i,s){ return s.replace(/-hover.png/, ".png"); });
            thisImg.attr("src", newImg);
        }
    }
});

$(".sf-menu li").bind('mouseleave focusout', function () {  

    if ( $(this).hasClass('sf-breadcrumb') ) {
        return;
    }
    else {
        thisImg = $(this).find("img:first"),
        newImg = thisImg.attr("src").replace(/-hover.png/, '.png');

        if ( $(this).is(".sf-menu>li>ul>li") ) {
            thisImg.attr("src", newImg);
        }
        else {
            $(".sf-breadcrumb").find("img:first").attr("src", function(i,s){ return s.replace(/.png/, "-hover.png"); });
            thisImg.attr("src", newImg);
        }   
    }
}); 
```

编辑：我在 IE8 中测试。我认为“Red X”无处不在：在 IE 中，不是从 src 加载的图像。它在左上角显示带有红色 X 图像的黑色边框，并显示替代文本。似乎它正在执行 mouseenter focusin 事件处理程序，并在您单击时将另一个 -hover.png 添加到 src 中。因此，点击时 src 将更改为 imgName-hover-hover.png

另一个编辑！因此，单击时会触发 focusin 事件处理程序。

编辑：对于任何想知道的人，IE 和 FF 将单击作为焦点事件处理，因此这是在执行 mouseenter 处理程序和 focusin 处理程序。这是我的新代码：

```
var thisImg = null,
    newImg = null,
    thatImg = null;

$(".sf-menu li").on('mouseenter', function () {
    if ( $(this).hasClass('sf-breadcrumb') ) {
        return;
    }
    else {
        thisImg = $(this).find("img:first"),
        newImg = thisImg.attr("src").replace(/.png/, "-hover.png");

        if ( $(this).is(".sf-menu>li>ul>li") ) {
            thisImg.attr("src", newImg);
        }
        else {
            $(".sf-breadcrumb").find("img:first").attr("src", function(i,s){ return s.replace(/-hover.png/, ".png"); });
            thisImg.attr("src", newImg);
        }
    }
});

$(".sf-menu li").on('mouseleave', function () {  
    if ( $(this).hasClass('sf-breadcrumb') ) {
        return;
    }
    else {
        thisImg = $(this).find("img:first"),
        newImg = thisImg.attr("src").replace(/-hover.png/, '.png');

        if ( $(this).is(".sf-menu>li>ul>li") ) {
            thisImg.attr("src", newImg);
        }
        else {
            $(".sf-breadcrumb").find("img:first").attr("src", function(i,s){ return s.replace(/.png/, "-hover.png"); });
            thisImg.attr("src", newImg);
        }   
    }
});

$(".sf-menu a").focus( function() {
    thisImg = $(this).find("img:first"),
    newImg = thisImg.attr("src").replace(/.png/, "-hover.png");

    if (thisImg.attr("src") == thatImg.attr("src")) {
        return; 
    }
    else if ( $(this).parent("li").hasClass('sf-breadcrumb') ) {
        return;
    }
    else {
        if ( $(this).is(".sf-menu>li>ul>li") ) {
            thisImg.attr("src", newImg);
        }
        else {
            $(".sf-breadcrumb").find("img:first").attr("src", function(i,s){ return s.replace(/-hover.png/, ".png"); });
            thisImg.attr("src", newImg);
        }
        thatImg = thisImg;
    }
});

$(".sf-menu a").blur( function() {
    thisImg = $(this).find("img:first"),
    newImg = thisImg.attr("src").replace(/-hover.png/, '.png');

    if (thisImg.attr("src") == thatImg.attr("src")) {
        return; 
    }
    else if ( $(this).parent("li").hasClass('sf-breadcrumb') ) {
        return;
    }
    else {          
        if ( $(this).is(".sf-menu>li>ul>li") ) {
            thisImg.attr("src", newImg);
        }
        else {
            $(".sf-breadcrumb").find("img:first").attr("src", function(i,s){ return s.replace(/.png/, "-hover.png"); });
            thisImg.attr("src", newImg);
        }
        thatImg = thisImg;  
    }
}); 
```

我确信这可以通过某种方式进行清理，但至少它是有效的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:59:01.770

在您尝试将其替换为来自新来源的图像之前，我只想更改图像的显示或可见性。

换完之后再换回去。

所以像这样替换你的其他代码：

```
thisImg = $(this).find("img:first");
$(this).find("img:first").css('display', 'none');
newImg = thisImg.attr("src").replace(/-hover.png/, '.png'); 
```

......

```
if ( $(this).is(".sf-menu>li>ul>li") ) {
        thisImg.attr("src", newImg);
    }
    else {
        $(".sf-breadcrumb").find("img:first").attr("src", function(i,s){ return s.replace(/.png/, "-hover.png"); });
        thisImg.attr("src", newImg);
    }
$(this).find("img:first").css('display', 'block'); 
```

当然，如果您使用内联显示，您会这样做，并且您可能需要根据容器的设置方式在您的 css 中为容器设置默认大小值

# erlang - 处理 OTP 中的超时

> ID：10604400
> 
> 赞同：1
> 
> 时间：2012-05-15T15:51:17.893
> 
> 标签：erlang, timeout, erlang-otp

我已经定义了一个应用程序

```
{application, ps_barcode,
 [{description, "barcode image generator based on ps-barcode"},
  {vsn, "1.0"},
  {modules, [ps_barcode_app, ps_barcode_supervisor, barcode_data, wand, ps_bc]},
  {registered, [ps_bc, wand, ps_barcode_supervisor]},
  {applications, [kernel, stdlib]},
  {mod, {ps_barcode_app, []}},
  {start_phases, []}]}. 
```

主管`init`看起来像

```
init([]) ->
    {ok, {{one_for_one, 3, 10},
      [{tag1, 
        {wand, start, []},
        permanent,
        brutal_kill,
        worker,
        [wand]},
       {tag2,
        {ps_bc, start, []},
        permanent,
        10000,
        worker,
        [ps_bc]}]}}. 
```

它是一个条码生成器，使用 C 组件进行一些图像处理。如果被要求处理不存在的文件或权限不足，系统会出错并正确重新启动，但有一个特定错误会导致`wand`模块超时

```
GPL Ghostscript 9.04: Unrecoverable error, exit code 1
GPL Ghostscript 9.04: Unrecoverable error, exit code 1
wand.c barcode_to_png 65 Postscript delegate failed `/tmp/tmp.1337.95765.926102': No such file or directory @ error/ps.c/ReadPSImage/827

** exception exit: {timeout,{gen_server,call,
                    [wand,{process_barcode,"/tmp/tmp.1337.95765.926102"}]}}
     in function  gen_server:call/2 (gen_server.erl, line 180)
     in call from ps_bc:generate/3 (ps_bc.erl, line 19) 
```

（Imagemagick 错误在那里不准确；该文件存在，但它是一个带有错误的 Postscript 文件，因此不能被解释为正常；我认为这就是生成 Ghostscript 错误并导致程序挂起的原因，但我不确定为什么它根本无法返回）。

我遇到的问题是：即使此超时返回错误，该`wand`进程似乎已在后台挂起（我得出结论，因为任何进一步的调用`wand`都会返回另一个超时错误，包括`wand:stop`出于某种原因）。我不确定要发布多少代码，所以我尽量将其保留在`wand`模块本身中。如果我需要发布其他作品，请告诉我。

```
-module(wand).

-behaviour(gen_server).

-export([start/0, stop/0]).
-export([init/1, handle_call/3, handle_cast/2, handle_info/2,
     terminate/2, code_change/3]).

-export([process/1]).

process(Filename) -> gen_server:call(?MODULE, {process_barcode, Filename}).

handle_call({process_barcode, Filename}, _From, State) ->
    State ! {self(), {command, Filename}},
    receive
      {State, {data, Data}} ->
        {reply, decode(Data), State}
    end;
handle_call({'EXIT', _Port, Reason}, _From, _State) ->
    exit({port_terminated, Reason}).

decode([0]) -> {ok, 0};
decode([1]) -> {error, could_not_read};
decode([2]) -> {error, could_not_write}.

%%%%%%%%%%%%%%%%%%%% generic actions
start() -> gen_server:start_link({local, ?MODULE}, ?MODULE, [], []).
stop() -> gen_server:call(?MODULE, stop).

%%%%%%%%%%%%%%%%%%%% gen_server handlers
init([]) -> {ok, open_port({spawn, filename:absname("wand")}, [{packet, 2}])}.
handle_cast(_Msg, State) -> {noreply, State}.
handle_info(_Info, State) -> {noreply, State}.
terminate(_Reason, Port) -> Port ! {self(), close}, ok.
code_change(_OldVsn, State, _Extra) -> {ok, State}. 
```

* * *

**编辑：**忘了提，它可能是相关的；只有当我通过`application:load`/运行应用程序时才会出现挂起`application:start`。如果我自己测试这个组件

```
c(wand).
wand:start().
wand:process("/tmp/tmp.malformed-file.ps"). 
```

它仍然是错误的，但这个过程真的会死掉。也就是说，我可以

```
wand:start().
wand:process("/tmp/tmp.existing-well-formed-file.ps"). 
```

并得到预期的响应。当它通过主管启动时，它会挂起并表现出我之前描述的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:57:57.020

不是答案，而是在这种情况下我会怎么做。我将使用 gen_server:cast 并在 gen_server 中处理超时，在所有工作完成后，我将向请求者发送结果响应。因此，此更改也会影响请求方。

但我可能在各方面都错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T02:37:45.537

似乎在处理外部 C 程序时使用`receive..after`而不是普通程序会强制终止。`receive`我不确定为什么其他措施不起作用......

```
...
receive
  {State, {data, Data}} ->
    {reply, decode(Data), State}
after 3000 ->
  exit(wand_timeout)
end;
... 
```

此外，此时您必须希望合法操作的时间不会超过`3000`. 在这种特殊情况下这不是问题，但如果我向 C 程序添加更多输出可能会出现问题。

# iphone - 如何使用 Core Graphics 制作渐变效果？

> ID：10604401
> 
> 赞同：3
> 
> 时间：2012-05-15T15:51:25.350
> 
> 标签：iphone, objective-c, ios, core-graphics

我想制作一个类似于您在此处第一个单元格右侧看到的效果：

![在此处输入图像描述](../Images/f1fa573e2b669bda5a3a8523a9a9a8a9.png)

我猜它是某种带有渐变的叠加视图，但我只是无法弄清楚它是如何配置透明度的。我尝试使用渐变制作自己的叠加视图并将颜色的 alpha 设置为向下，但它只是显示为灰白色渐变。

```
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = UIGraphicsGetCurrentContext();

    UIColor *gradBegin = [UIColor colorWithWhite:1.0 alpha:0.8];
    UIColor *gradEnd = [UIColor colorWithWhite:1.0 alpha:0.6];
    NSArray* gradientColors = [NSArray arrayWithObjects: 
                               (id)gradBegin.CGColor, 
                               (id)gradEnd.CGColor, nil];
    CGFloat gradientLocations[] = {0, 1};

    CGGradientRef gradient = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef)gradientColors, gradientLocations);

    CGContextDrawLinearGradient(context, gradient, CGPointMake(rect.origin.x, rect.origin.y + rect.size.height/2.0), 
                                CGPointMake(rect.origin.x + rect.size.width, rect.origin.y + rect.size.height/2.0), 0); 
```

此屏幕截图中到底发生了什么，我该如何复制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:59:10.723

虽然这当然可以使用 Core Graphics 来完成，但将具有适当宽度和 1 像素高度的透明 PNG 添加到您的项目中，然后将 a`UIImageView`在表格单元格中的内容上放置以创建这种效果，会更加容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T18:21:39.723

我写了一个简单的 UIView 类，它会自己绘制褪色。它是一个基本的 UIView，覆盖了 drawRect：

```
- (void)drawRect:(CGRect)rect
{
    CGColorSpaceRef colourSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = UIGraphicsGetCurrentContext();

    UIColor* gradBegin = [UIColor colorWithWhite:1 alpha:0];
    UIColor* gradEnd = [UIColor colorWithWhite:1 alpha:1];
    NSArray* gradColours = [NSArray arrayWithObjects:
                                    (id)gradBegin.CGColor,
                                    (id)gradBegin.CGColor,
                                    (id)gradEnd.CGColor,
                                    (id)gradEnd.CGColor, nil];
    CGFloat gradLocs[] = { 0, 0.5, 0.9, 1 };
    CGGradientRef gradient = CGGradientCreateWithColors(colourSpace, (__bridge CFArrayRef)gradColours, gradLocs);
    CGContextDrawLinearGradient(context, gradient, CGPointMake(0, 0), CGPointMake(self.frame.size.width, 0), 0);
    CGGradientRelease(gradient);
    CGColorSpaceRelease(colourSpace);
} 
```

如果覆盖在您的视图上并且视图的背景是白色的，则此方法有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T17:05:13.270

您问题中的渐变绘制代码看起来不错，尽管我还没有测试过。我建议设置`gradBegin.alpha = 0`和`gradEnd.alpha = 1`. 此外，最后一行可以简化：

```
CGContextDrawLinearGradient(context, gradient, rect.origin,
    CGPointMake(CGRectGetMaxX(rect), rect.origin.y, 0); 
```

别忘了`CGGradientRelease(gradient)`。

无论如何，除此之外，您需要设置`overlayView.opaque = NO`.

# java - 为什么不能测试布尔值以外的任何东西？

> ID：10604403
> 
> 赞同：2
> 
> 时间：2012-05-15T15:51:28.013
> 
> 标签：java, boolean

> **可能重复：**
> [为什么 Java 中的布尔值只接受真或假？为什么不是 1 或 0 呢？](https://stackoverflow.com/questions/2015071/why-boolean-in-java-takes-only-true-or-false-why-not-1-or-0-also)

我今天想知道为什么 Java 不能测试除布尔值之外的任何其他类型。

在 C、C++ 和许多其他语言（实际上是大多数编程语言）中，以下是可能且有效的：

```
int a = 0;
if (a) // evaluates to false
  ; // do something nice

a = 6;
if (a) // evaluates to true
  ; // do something more 
```

这也适用于对象、数组的几乎所有地方；任何可以`0x00000000`在内存中具有价值的东西。

问题：为什么这在 Java 中是不可能的（你必须继续测试`== 0`or `== null`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:52:44.380

因为 James Gosling*等人*认为 Java 不会那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:52:57.200

我猜想这样做的原因是因为它简化了事情。

if 语句必须将值评估为两个可能条件之一。Java 所做的是要求您提供一个语句本身，该语句必须评估两个可能的条件（布尔值）而不是接受其他值并任意决定其评估结果为真还是假。

# sql - Oracle 11g 复合触发器的应用

> ID：10604406
> 
> 赞同：2
> 
> 时间：2012-05-15T15:51:37.623
> 
> 标签：sql, oracle, triggers, oracle11g

关于复合触发器的使用，我有一个非常简短的问题。

我对数据库/sql/oracle 非常陌生，并且有一个 uni 任务，我必须为以下内容创建触发器：

1.  销售人员创建订单时插入日志表
2.  订单准备好发货时更新订单表（加上插入日志）
3.  在星期五下午 5 点到星期一上午 9 点之后防止插入、更新、删除。

我已经成功实现了触发器，但刚刚意识到 11g 中的复合触发器。考虑将上述内容组合成一个复合触发器是否合适？这是他们的目的还是我错过了重点？

非常感谢您查看这个相当模糊的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:20:39.527

IMO 这不合适。复合触发器允许您为给定表上的给定操作捕获四个不同的触发点（语句前、操作前、操作后和语句后），但看起来像 A）您在多个表上触发，并且B）您不需要服务所有不同的触发点。（顺便说一句，我在这里使用的“动作”可能意味着不同的语句类型，例如，在插入之前，更新，删除......）。

复合触发器为解决不受欢迎的 ORA-04091 MUTATING TABLE 错误提供了一种很好、干净且紧凑的方法，但在大多数情况下，我认为它们作为通用的万能替代品没有必要或有用“正常”触发器。例如，请参阅我对[这个问题](https://stackoverflow.com/questions/10184631/creating-a-trigger-that-deletes-a-row-when-an-attribute-becomes-negative-oracle/10195691#10195691)的回答。

分享和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:13:57.510

哇 - 复合触发器 - 甚至不知道它们存在......

我迅速查阅了[文档](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/triggers.htm#CIHEFGFD)

使用复合触发器的主要原因解释如下：

> 复合触发器使您可以更轻松地对一种方法进行编程，在该方法中，您希望为各个时间点实施的操作以共享公共数据。要使用简单的触发器实现相同的效果，您必须使用辅助包对公共状态进行建模。当触发语句导致错误并且语句后触发器没有触发时，这种方法既编程繁琐，又容易发生内存泄漏。

因此，除非您需要包变量来实现您的功能，否则没有理由使用它们。而且您的代码将不再与 10g 兼容。

# python - Sublime Text 2 控制台输入

> ID：10604409
> 
> 赞同：57
> 
> 时间：2012-05-15T15:51:42.993
> 
> 标签：python, ruby, sublimetext2

我使用 Sublime Text 2，但当我的代码要求用户输入时，它不会让我输入任何值。（换句话说：`input()`在 Python 和`gets`Ruby 中无法正确提示我输入）。

Python 抛出一个`EOFError`错误（当用户没有输入任何内容时你会得到什么）。

简单的 USER INPUT 对我来说在 Sublime Text 2 中不起作用。

编辑：例如

```
try:
    text = input('Enter something: ')
    print text
except EOFError:
    print('\nEOFError')

=> Enter something: #cannot enter anything to var "text"
=> EOFError
=> [Finished] 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-15T16:30:59.043

崇高的文本不支持这一点。[但是你可以通过使用SublimeREPL](https://github.com/wuub/SublimeREPL)来绕过它（至少在 python 中），我用它来做所有事情，它工作得非常好。不过它有点古怪，因为该选项卡仍然可以像普通的 sublime 选项卡一样编辑（这是好是坏）......

它还允许您在多个选项卡中运行解释器，它基本上很棒。

要安装它，您需要`package control`这可以让您轻松安装插件。把它[放在这里](http://wbond.net/sublime_packages/package_control/installation)，并按照说明进行操作。一旦完成：

*   在 Sublime 中按`ctrl`+ `shift`+ `P`（`ST`用于“转到任何内容”的 linux 命令）。
*   输入“安装”，
*   点击“崇高的包控制：安装包”。
*   然后选择`SublimeREPL`。它会自动安装它。
*   要使用它，请`Tools>sublimerepl>python`从菜单中转到。

要制作默认的构建系统 SublimeREPL，您可以按照这些[说明](https://stackoverflow.com/questions/19732006/how-to-run-python-code-on-sublimerepl/23722631#23722631)进行操作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-09-08T04:24:30.043

因为，**Sublime**不直接支持输入控制台。因此，通过以下额外步骤很容易在 Sublime 中获得输入：

1.  确保你已经在 Sublime 中安装了 Package control。
    *   如果您没有安装包控件，请转到[此处](https://packagecontrol.io/)，单击**立即安装**按钮（右上角）复制这些代码并将其粘贴到您的**控制台**中（确保您已勾选**显示控制台**选项）并按 Enter。（之后重新启动崇高）
2.  转到 -> 命令面板（**Cltr + Shift + p**）单击“**包控制：安装包**”
3.  搜索：“ **SublimeRepl** ”并等待安装。
4.  安装完毕，**重启 Sublime**
    *   转到工具您将在底部看到“” **Sub​​limeRepl** “选项（这表明它已成功安装在您的sublime中）
5.  要运行 python 脚本：转到**Tools->SublimeRepl->Python-> *Python-RUNcurrentfile***选项，您的代码将在新的 Repl 选项卡中运行。

注意：**这适用于 sublimeText3 (windows)**

# c# - if then else 与 c# 中的三元运算符 (? :)

> ID：10604415
> 
> 赞同：4
> 
> 时间：2012-05-15T15:51:58.213
> 
> 标签：c#

`this.value1`并且`c.value1`都可以为空或非空。所以一共4个组合来测试。`value2`也可以为空或非空。

下面的 if-then-else 是否可以用更短的东西代替，比如使用三元运算符（ if then else 使用`? :`运算符） - 对于这种特定情况，这是否是一个不好的做法，因为我们正在测试`value1`and的 4 种组合`value2`？

```
 public override bool Equals(object obj)
     {
        bool value1_check = false;
        bool value2_check = false;
        var c = obj as ObjectType;

        if (this.value1 != null)
               value1_check = this.value1.Equals(c.value1);
        else if ((this.value1 == null) && (c.value1 == null))
               value1_check = true;
        else if ((this.value1 == null) && (c.value1 != null))
              value1_check = c.value1.Equals(this.value1);

        if (this.value2 != null)
               value2_check = this.value2.Equals(c.value2);
        else if ((this.value2 == null) && (c.value2 == null))
               value2_check = true;
        else if ((this.value2 == null) && (c.value2 != null))
              value2_check = c.value2.Equals(this.value2);

        return (value1_check && value2_check);
     } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T15:53:45.343

您可以调用`Object.Equals()`，它已经完成了所有这些。

```
return Equals(this.Value1, c.Value1)
    && Equals(this.Value2, c.Value2); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T15:57:43.453

实际上，您可能想要[?? 运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)。

```
var lhs= this.value1 ?? c.value1 ?? null;
var rhs = c.value1 ?? this.value1 ?? null;
var value1Check = lhs == rhs 
```

应该做和你一样的事情，但可读性几乎降低了 100%！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T17:14:00.527

如果您仍然想知道三元选项。

```
 value1_check= this.value1!=null? this.value1.Equals(c.value1):(c.value1!=null?c.value.Equals(this.value):value1_check=true); 
```

# google-chrome - 移动版 Google Chrome 是否支持浏览器扩展？

> ID：10604417
> 
> 赞同：89
> 
> 时间：2012-05-15T15:52:09.090
> 
> 标签：google-chrome, google-chrome-extension

我可以为 Google Chrome MOBILE（Android Google Chrome）创建插件或扩展程序吗？

如果没有，我可以为谷歌浏览器（桌面）创建一个扩展，它将在谷歌浏览器栏中添加一个按钮。此按钮将在另一个 Web 浏览器（在我自己的 Web 浏览器中）中打开页面，因此，此按钮应该启动我自己的 Web 浏览器。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-15T18:42:31.007

不支持扩展，请参阅：[https](https://developers.google.com/chrome/mobile/docs/faq) ://developers.google.com/chrome/mobile/docs/faq 。

具体来说：

> **Chrome for Android 现在是否支持混合原生/Web 应用程序的嵌入式 WebView？**
> 
> 基于 Chrome 的 WebView 包含在 Android 4.4 (KitKat) 及更高版本中。有关详细信息，请参阅[WebView 概述](https://developer.chrome.com/multidevice/webview/overview)。
> 
> **Android 版 Chrome 是否支持应用和扩展程序？**
> 
> Chrome for Android 目前不支持 Chrome 应用和扩展程序。我们目前没有宣布的计划。
> 
> **我可以在 Chrome for Android 上编写和部署网络应用吗？**
> 
> 尽管目前不支持 Chrome 应用程序，但我们希望看到可以通过 URL 访问的优秀交互式网站。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-10-16T14:02:16.907

您可以使用书签（书签中的 JavaScript 代码）——这也意味着它们可以跨设备同步。

我有负载 - 我在名称前加上 zzz，因此它们很容易在地址栏中输入并显示在下拉预测中。

要让它们在页面上操作，您需要转到该页面，然后在地址栏中键入小书签名称 - 这将导致小书签在页面的上下文中执行。

**编辑**

只是为了突出显示-为此，必须在显示要操作的页面时在地址栏中输入小书签名称-如果您以其他方式选择小书签，则页面上下文会丢失，并且小书签在一个新的空白页面上运行。

我使用 zzzpocket - 发送到口袋。zzztwitter 推特此页 zzzmail 电子邮件此页 zzzpressthis 将此页发送到 wordpress zzztrello 将此页发送到 trello 等等...

它可以在我当前登录的任何平台上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-28T18:04:35.810

某些扩展程序（例如 blocksite）使用无障碍服务 API 将扩展程序等功能部署到 Android 上的 Chrome。可能值得通过游戏商店看看。否则，Firefox 是您最好的选择，尽管由于某些原因，许多扩展程序无法在移动设备上运行。

[https://play.google.com/store/apps/details?id=co.blocksite&hl=en_US](https://play.google.com/store/apps/details?id=co.blocksite&hl=en_US)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-21T08:19:16.010

只需使用其他浏览器即可。请按照以下步骤在您的 Android 设备上安装 Chrome 扩展程序。

第 1 步：打开 Google Play 商店并下载 Yandex 浏览器。在手机上安装浏览器。

第 2 步：在新浏览器的 URL 框中，通过在 URL 地址中输入相同的内容打开“chrome.google.com/webstore”。

第 3 步：查找您想要的 Chrome 扩展程序，然后点击“添加到 Chrome”。

添加的 Chrome 扩展现在将自动添加到 Yandex 浏览器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T12:44:39.840

我想支持扩展的浏览器并不多。事实上，去年我一直对这个问题感兴趣，我只发现几天前宣布的[Dolphin](http://dolphin-browser.com/)支持附加组件和[其他很酷的功能。](http://dev.dolphin-browser.com/get-started/)我想尽快测试一下。

# .net - 使用 Metro UI for Windows XP/7 开发应用程序

> ID：10604421
> 
> 赞同：3
> 
> 时间：2012-05-15T15:52:12.883
> 
> 标签：.net, windows, visual-studio-2010, microsoft-metro, windows-runtime

如何继续使用 Metro UI 开发应用程序以便它们在 Windows XP/Vista/7 上运行？

[MetroBackUp](http://metrobackup.codeplex.com/)是应用程序的一个示例。

我在 Windows 7 上并安装了 Visual Studio 2010 和 11 Beta。

是否必须在 Windows 8 CP 中开发它们？他们会在其他操作系统中工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T07:28:30.393

如果您想在 Windows 7 上开发 Metro 风格的应用程序，那么您可以使用以下库：

*   [地铁工具包](http://metrotoolkit.codeplex.com/)
*   [MahApps.Metro](https://github.com/MahApps/MahApps.Metro)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T15:59:21.597

Metro 应用程序不能在操作系统 Windows 7 或更低版本上开发。Metro 应用程序需要Windows 8 及更高版本中的[WinRT](http://en.wikipedia.org/wiki/Windows_Runtime)

> > **重要提示：** Metro 风格的应用程序开发仅在 Windows 8 Consumer Preview 上受支持。您不能在 Windows 7 或 Windows Server 8 Beta 上开发 Metro 风格的应用程序。

从[链接](http://msdn.microsoft.com/en-us/library/windows/apps/br211386.aspx)

[我可以使用 Visual Studio 11 开发者预览版在 Win7 中开发和调试 Metro 应用程序吗？](http://social.msdn.microsoft.com/Forums/en/toolsforwinapps/thread/0155ffb8-b526-46f3-9286-3befd5563b32)

**编辑**

“Metro Style Apps” -> 在 Windows 运行时运行，使用 Windows 8 UI 功能（如沉浸式 UI、AppBar、Charm 等）。

Metro 风格应用程序 -> 普通 .net 应用程序，外观和感觉类似于 Metro 应用程序。（示例 -> MetroBackup

问题-> Metro 风格的应用程序会在 Win XP 上运行吗？

只要他们不使用任何 Windows 7 功能（如 TaskDialog、JumpList 等），他们就会

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T04:21:29.503

如果您想开发 Metro 风格应用程序，或在 Windows 运行时 (WinRT) 之上运行的应用程序 - 该应用程序将无法在 Windows 8 之前的 Windows 版本上运行。您可以共享大量代码可能还有大块的 UI 以及适用于旧版本 Windows 的应用程序版本，具体取决于您选择的堆栈 (DirectX/XAML/C++/C#/VB/HTML5+JS) 以及您如何构建代码。

另一种选择是开发一个不是“Metro 风格应用程序”的应用程序，而是简单地按照 Metro 设计语言指南进行设计。有用于 WPF 的库和可能具有模仿 Zune 软件等风格的其他框架的库。缺点是 - 您将无法在 Windows 商店中出售您的应用程序。

如果您计划使用 XAML 堆栈 - MVVM 模式允许在不同平台（WPF、Silverlight、Windows Phone、WinRT-XAML）之间重用大量代码。MVVM 也可以在 HTML5/JS/WinJS 堆栈中使用 Knockout JS 之类的库，因此您可能能够以一种适用于任何平台的方式开发您的应用程序 - 甚至是非 Windows 平台，尽管需要替换使用的 Windows 8 UI 功能（边缘 UI、应用程序栏、魅力栏）和替代解决方案。

# mysql - SQL 查询 - 连接两个表

> ID：10604427
> 
> 赞同：-1
> 
> 时间：2012-05-15T15:52:42.260
> 
> 标签：mysql, sql

我有 2 张表 temp1 和 temp2。我在 temp1 中有 5 列（a、b、c、d、e），在 temp2 中有 5 列（a、b、c、d、e）

我想要简单的加入

a) temp1 中而不是 temp2 中的值 b) temp2 中而不是 temp1 中的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:01:04.130

如果要比较两个表上的所有记录，则需要`JOIN`对所有列进行比较。如果您可以做除 a 之外的其他事情`JOIN`，那么我建议`EXCEPT`：

```
 a):

SELECT *
FROM temp1
EXCEPT
SELECT *
FROM temp2

 b):

SELECT *
FROM temp2
EXCEPT
SELECT *
FROM temp1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:01:48.857

试试这个..它可能对你有用：

```
select COLUMN1,COLUMN2,COLUMN3 from TABLE1 where COLUMN1 not in (select COLUMN1  from TABLE2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:10:57.827

那么取决于你的匹配标准是什么。这假设 A 是您可以使用的唯一 id，如果不添加更多到 on 子句。

```
Select 'In Temp1 but not temp2',temp1.*
From Temp1 
Outer Join Temp2 On temp1.A = temp2.A Where temp2.A is null
Union
Select 'In Temp2 but not temp1',temp2.*
From Temp2 
Outer Join Temp1 On temp2.A = temp1.A Where temp1.A is null 
```

# php - php无法将数据添加到数组

> ID：10604431
> 
> 赞同：1
> 
> 时间：2012-05-15T15:52:46.857
> 
> 标签：php, arrays

这里有一个问题：输入一些关于学生的数据后，我需要将它们打印在页面的顶部（表格一）。我已经设法为单个学生打印数据，但我无法将数据存储在 $studenti 数组中，以便为所有学生打印数据。这是我使用的代码（我忘了提，我需要为此使用会话）：

```
 <?php
session_start();

$_SESSION['aindex'] = $_POST['index'];
$_SESSION['aime']= $_POST['ime'];
$_SESSION['aprosek'] = $_POST['prosek'];

//if ($index != "" && $ime != "" && $prosek !="")
//{
// = $index;
 //= $ime;
 //=$prosek;

//}

//print ($_SESSION['aindex']);
function inicijalizacija()
{
    $studenti = array ();
    $ind = $_SESSION['aindex'];
    $im = $_SESSION['aime'];
    $pr = $_SESSION['aprosek'];

    $studenti[$ind]["ime"] = $im;
    $studenti[$ind]["prosek"] = $pr;

return $studenti;   
}

function dodaj($studenti)
{
$studenti[$_SESSION['aindex']]["ime"] = $_SESSION['aime'];
$studenti[$_SESSION['aindex']]["prosek"] = $_SESSION['aprosek'];

return $studenti;
}

function prikazi($studenti) //ovde u argumentu treba $studenti
{

print ("<h2> Lista Studenata: </h2>");
foreach ($studenti as $ind => $student)
{
if (empty($ind))
    continue;
$n = $student["ime"];
$p = $student["prosek"];
print ("Index: " . $ind . " " . "Ime: " . $n . " " .  "Prosek: " . $p );

}
print("<hr size ='1'>");

//Forma dodavanja

print (" <form action = 'index.php' method = 'post' >");
print ( " Indeks:&nbsp   <input type = 'text' name = 'index' />");
print(" </br>");
print ( " Ime:&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp   <input type = 'text' name = 'ime' >");
print(" </br>");
print ( " Prosek : <input type = 'text' name = 'prosek' />");
print(" </br>");
print (" <input type = 'submit' value = 'Dodaj' name = 'Dodaj' />");
}

$studenti = inicijalizacija();
?>

<html>
    <head> <title> pokusaj </title> </head>
    <body>
    <?php

    prikazi($studenti);
    dodaj($studenti);
    ?>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T09:41:06.617

看来您误解了 PHP 的工作方式。为了提高效率和安全性，脚本运行后所有变量都将被销毁，并且该用户使用的变量在被其他用户调用时对脚本不可见。

$_SESSION 是一个例外；$_SESSION 中的数据将一直保留到会话到期，但它仍然只对一个唯一用户可见（由 cookie 标识）。

如果要保存脚本的数据以供再次调用（使用另一个会话）时使用，则必须将数据写入文件或使用数据库。

PS，你的脚本看起来会引入[XSS](https://startpage.com/do/search?q=xss)和[CSRF](https://startpage.com/do/search?q=csrf)漏洞；确保你不会犯很多人之前犯过的错误。

# azure - 企业 Web 库 web.config 当前与 Azure 不兼容？

> ID：10604434
> 
> 赞同：3
> 
> 时间：2012-05-15T15:52:51.490
> 
> 标签：azure, web-config, enterprise-web-library

我正在尝试将 Enterprise Web Library 与 Windows Azure 一起使用。EWL 项目的 web.config 文件似乎在本地运行良好，但是当我部署到 Azure 时，应用程序无法初始化。登录并在 Azure 上本地查看站点后，EWL 需要的几个 web.config 元素似乎已锁定在 Azure 上。我必须编辑以下内容才能在 Azure 上初始化应用程序：

*   删除`<serverRuntime uploadReadAheadSize="8388608" />`.
*   删除嵌套在`modules`元素内的所有内容。

删除这些部分后，该应用程序似乎在 Azure 上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:10:22.767

您删除的 Web.config 元素对于确保 EWL 正常工作很重要：`uploadReadAheadSize`修复了客户端证书身份验证的问题，并且`<clear/>`在该`<modules>`部分中使用通过在管道中保持相同的模块集，使 EWL 应用程序的行为在不同服务器之间保持一致计算机上安装了哪些 IIS 功能。

必须有一种方法可以解锁 Azure Web 角色中的这些配置部分。假设它们被锁定在 Web 角色的 applicationHost.config 文件中，也许您可​​以使用此答案中所述的启动脚本修改此文件：[https](https://stackoverflow.com/a/10140024/35349) ://stackoverflow.com/a/10140024/35349 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:15:55.517

我对企业库不是很熟悉。如果 William 的建议没有帮助，请检查您的 web.config 以查看您是否缺少任何配置部分。在您的本地机器上，当您安装 Enterprise Library 时，它可能会修改 machine.config 以添加某些配置。但它们可能不存在于云中。因此，请搜索您的本地 machine.config 以查看是否有任何 Enterprise Library 特定部分，然后将它们添加到您的 web.config。

此致，

明旭。

# facebook - 通过代码 C#/PHP 检索用户令牌（在访问令牌工具中找到）

> ID：10604442
> 
> 赞同：0
> 
> 时间：2012-05-15T15:53:14.703
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk, facebook-php-sdk

我有一个 Facebook 应用程序，我可以通过调用来检索应用程序令牌

```
https://graph.facebook.com/oauth/access_token?
    client_id=YOUR_APP_ID
    &client_secret=YOUR_APP_SECRET
    &grant_type=client_credentials 
```

[如“作为应用程序身份验证”](https://developers.facebook.com/docs/authentication/applications/)页面上指定的那样。我看到此应用程序令牌也可以在[访问令牌工具](https://developers.facebook.com/tools/access_token/)页面中获得，以及该应用程序的用户令牌。我需要用户令牌才能对已通过 manage_pages 权限批准我的应用程序的用户执行 /USER_ID/accounts 。

基本上，我希望在用户向我的应用程序提交文章时发布到用户 Facebook 页面。有些用户位于 Facebook 被屏蔽的位置，因此我无法使用常规的 Javascript SDK。

**编辑 1**：我了解用户访问令牌的概念，并通过 SDK 使用 OAuth 重定向检索它们。我的问题是关于访问令牌工具页面中看到**的应用程序的用户令牌**，而不是用户访问令牌（需要客户端访问 Facebook）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T19:10:54.120

为了在不使用 javascript SDK 的情况下获取用户令牌，您需要使用[OAuth 对话框重定向](https://developers.facebook.com/docs/authentication/server-side/)对用户进行身份验证。从本质上讲，您提示用户从 Facebook 获取代码，您可以用该代码交换访问令牌。此时，您应该存储访问令牌并将其重新用于所有需要身份验证的请求。请记住，您需要检测令牌何时过期或失效，如果是，则需要重新发出身份验证重定向和令牌交换过程。

# ruby - Tire gem - 它是否支持文档提升？

> ID：10604443
> 
> 赞同：2
> 
> 时间：2012-05-15T15:53:19.837
> 
> 标签：ruby, tire

阅读 ElasticSearch 文档 (http://www.elasticsearch.org/guide/reference/mapping/boost-field.html) 它说您可以根据值提升文档，这种行为是否通过轮胎实现 - 我是如果是，则在语法上苦苦挣扎。

更新：

看起来像;

```
 mapping do                                                                                                             
  indexes :llt_code,            :index    => :not_analyze
  indexes :llt_name,            :analyzer => 'snowball'
  indexes :_boost,              :as => '_boost'
 end 
```

是我需要的，假设 _boost 列具有提升值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:22:17.220

总是值得检查什么`YourModel.mapping_to_hash`输出：这是轮胎在创建映射时将发送到 elasticsearch 的内容。实际上，您的代码是错误的- _boost 是顶级选项，而您发布的内容则将内容粘贴在映射的属性部分

```
mapping(:_boost => {:name => 'foo', :null_value => 1.0}) do
  indexes ...
end 
```

应该告诉`foo`elasticsearch 在正确的级别使用名为 _boost this 的字段。

# vb.net - 如何更改 ComboBox 的数据源？

> ID：10604446
> 
> 赞同：3
> 
> 时间：2012-05-15T15:53:33.423
> 
> 标签：vb.net, winforms, combobox

我有两个组合框。combobox1 的数据源是一个固定的字符串列表。Combobox2 的数据源将是一个字符串列表，该列表取决于对 combobox1 的选择。这与以下常见情况非常相似：首先输入您的国家，然后根据您的输入，第二个组合框将显示该国家/地区的大学列表。

```
'Change selection of first combobox
Private Sub cbxClient_SelectedIndexChanged(sender As Object, e As EventArgs) Handles cbxClient.SelectedIndexChanged
  Try
    If cbxClient.SelectedIndex <> -1 Then
      GetAccount()
    End If
  Catch
    Throw
  End Try
End Sub

'Based on selection of first combobox, update the data sorce of second combobox
Private Sub GetAccount()
  Try
    m_listAccount.Clear()

    Dim strClient As String = cbxClient.SelectedItem.ToString

    For i As Integer = 0 To m_listDS.Count - 1
      If m_listDS(i).Client.Tostring = strClient Then
        m_ds = m_listDS(i)
        Exit For
      End If
    Next

    If Not m_ds Is Nothing Then
      For Each row As DataRow In m_ds.Tables("Account").Rows
        m_listAccount.Add(row("account").ToString)
      Next
    End If

    cbxAccount.DataSource = m_listAccount

  Catch ex As Exception
  End Try
End Sub 
```

我的问题是，虽然 m_listAccount 更新（具有正确的信息），但 cbxAccount 中显示的选项并未根据 m_listAccount 更新（具有错误的信息）。我不明白为什么会这样。

注意：假设 m_listAccount 中的旧字符串为 {"old1"}（列表只有 1 个字符串），更新后 m_listAccount 中的字符串为 {"new"}。通过断点，我得到以下信息：

```
cbxAccount.DataSorce={"new"}
cbxAccount.SelectedItem={"old1"} 
```

在表单中，cbxAccount 显示“old1”字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:43:46.587

尝试这个，

```
cbxAccount.DataSource = Nothing
cbxAccount.DataSource = m_listAccount 
```

如果您只是更新同一个列表对象，则数据源可能不会自动更新，但如果指针更改为数据源，则应该自动更新。

或者你可以试试 m_listAccount.AcceptChanges()

如果`m_listAccount`是一个`DataTable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T15:58:43.203

看起来您实际上并没有调用数据绑定方法，即

```
cbxAccount.DataBind() 
```

尝试在设置数据源之后放置它。

# android - 同时按下多个按钮

> ID：10604452
> 
> 赞同：2
> 
> 时间：2012-05-15T15:53:59.150
> 
> 标签：android, multi-touch

我正在开发一个应用程序，它为用户提供四个按钮和一个计时器。然后，用户尽可能快地点击，每个用户都在自己的按钮上，最后点击次数最多的人获胜。

我不能在这里使用 onClick，因为它会锁定 UI 线程，直到按钮被释放，从而有效地阻止其他按钮按下。我搜索了一下，发现我可以使用 onTouch，但它并没有按照我想要的方式工作。如果用户已触摸并仍按住按钮，则对其他按钮的任何后续触摸都将表现得就像第一个按钮被按下一样。

有人建议在整个可见 UI 上使用透明且拉伸的图像。然后可以读取此图像视图上的任何触摸，并根据按下的坐标将触摸分配给特定按钮。（我想我会在四个按钮可见的情况下截取我的 UI 的屏幕截图，在绘图中打开它并记下每个按钮的边框坐标，然后在代码中使用这些坐标来确定用户正在尝试使用哪个按钮按。）

任何人都可以帮助我使用这种工作方法，给我一个简单的例子，或者链接到我可以学习如何做到这一点并在我的应用程序中实现它的地方吗？将不胜感激。

**TL;DR：如何在整个可见 UI 中使用透明且拉伸的图像并读取每次按下的坐标（即使一次按下多个）？**

# c# - MSLinqToSQLGenerator 警告

> ID：10604454
> 
> 赞同：6
> 
> 时间：2012-05-15T15:54:05.520
> 
> 标签：c#, asp.net, linq-to-sql

> 警告：
> 自定义工具“MSLinqToSQLGenerator”与文件“MyApp\Forms\MyData.dbml”相关联，但在项目中未找到自定义工具的输出。您可以尝试通过右键单击解决方案资源管理器中的文件并选择运行自定义工具来重新运行自定义工具。

我已经将我的代码上传到源代码管理，它编译得很好。我的同事下载了代码并收到了上述警告。他尝试右键单击并运行自定义工具，但这并没有解决警告。我们如何触发生成并清除警告？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2020-05-10T21:49:54.853

您需要在 Visual Studio 安装程序的“单个组件”选项卡中的“代码工具”类别下安装“LINQ to SQL 工具”项。

[![LINQ to SQL 工具](../Images/047f1708662d0227ac48a41b0f7a0321.png)](https://i.stack.imgur.com/j2gvP.png)

# mysql - 不幸的是 MySQL 慢查询日志不记录复制查询

> ID：10604456
> 
> 赞同：1
> 
> 时间：2012-05-15T15:54:09.357
> 
> 标签：mysql

标题中的陈述是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:13:33.757

MySQL 5.1.45 之前：**真**

从 MySQL 5.1.45 开始：**假**

> 默认情况下，复制从属不会将复制的查询写入慢查询日志。要更改此设置，请使用 --log-slow-slave-statements 服务器选项。

[MySQL 手册页](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)

# android - 如何检查本地可绘制对象，缺少一个，如何从远程资源制作一个？

> ID：10604458
> 
> 赞同：1
> 
> 时间：2012-05-15T15:54:14.397
> 
> 标签：android, sqlite, drawable, http-streaming

我需要从云数据库中获取给定的可绘制名称，并检查本地包中是否存在匹配的可绘制对象。如果没有，我需要创建图像的本地副本以供使用，这样我就不会经常访问远程资源。最好的方法是什么？我可以访问数据库，执行 SQL，所有这些东西。我只需要知道如何 A）检查本地包是否存在名为（例如）“图标”的 Drawable，如果它在本地不存在，我需要知道如何创建和存储本地副本（通过HTTPstream 也许？）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T16:09:48.173

1：像这样检查你的drawable：

```
int resID = getResources().getIdentifier("icon", "drawable", "your.package.namespace");
if (resId == 0){
    //drawable isn't there. You have to fetch it through Http or whatever
} else {
    //getDrawable like this
    Drawable d = getResources.getDrawable(resId);
} 
```

2：您不能将下载的drawable放入drawableFolder中。但您可以将其下载到 res/raw 或 sdcard。如果您已经下载了这个特定的可绘制对象，请注意检查该位置。

# excel - 在 VBA (Excel) 中访问全局变量

> ID：10604459
> 
> 赞同：1
> 
> 时间：2012-05-15T15:54:17.137
> 
> 标签：excel, vba, variables, global

我从未在 VBA 中使用过全局变量，但我知道全局变量是在函数/子声明之外实例化的？

我在模块顶部声明了一个全局（公共）变量，然后由同一模块内的子例程赋予其值 0。

```
Option Explicit
Public NumNodes As Integer

Sub Inst_Glob_Vars()
NumNodes = 0
End Sub 
```

每当打开工作簿时都会调用此子例程（在“ThisWorkbook”对象中调用 sub），它还将实例化全局变量并设置 0 值。

```
Option Explicit

Private Sub Workbook_Open()
Call Inst_Glob_Vars
End Sub 
```

我在 excel 表中有一个按钮，单击该按钮将增加此全局变量。此按钮的定义在 Sheet1 对象中。

```
Private Sub CommandButton2_Click()
'NumNodes = NumNodes + 1
Debug.Print "NumNodes = " & NumNodes 'Debug
End Sub 
```

我是否需要在使用该变量的每个模块/对象中声明全局/公共变量？每次单击按钮时，变量都不会增加，而是在调试时给出 Null/Blank 值。我肯定没有正确声明我的全局变量，但不确定我在哪里犯了错误。

更新：这是更新的命令按钮子。如果我注释掉第二个子调用（Node_Button_Duplication），一切正常。有可能是那个引起问题的潜艇......

```
Private Sub CommandButton2_Click()
Call Channel_Selection_Duplication
Call Node_Button_Duplication
NumNodes = NumNodes + 1
Debug.Print "NumNodes = " & NumNodes 'Debug
End Sub 
```

Channel_Selection_Duplication 和 Node_Button_Duplication 都定义在同一个单独的模块中：

```
Option Explicit

Public Sub Channel_Selection_Duplication()
'
' Description: Macro which duplicates the 'Channel Usage Selection' columns at a specific cell reference

    Range("Q8:S8").Select
    With Selection
        .HorizontalAlignment = xlCenter
        .VerticalAlignment = xlBottom
        .WrapText = False
        .Orientation = 0
        .AddIndent = False
        .IndentLevel = 0
        .ShrinkToFit = False
        .ReadingOrder = xlContext
        .MergeCells = False
    End With
    Selection.Merge
    Range("Q8:S8").Select
    ActiveCell.FormulaR1C1 = "Channel Usage Selection"
    Range("Q8:S52").Select
    Range("Q52").Activate
    Selection.Borders(xlDiagonalDown).LineStyle = xlNone
    Selection.Borders(xlDiagonalUp).LineStyle = xlNone
    With Selection.Borders(xlEdgeLeft)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    With Selection.Borders(xlEdgeTop)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    With Selection.Borders(xlEdgeBottom)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    With Selection.Borders(xlEdgeRight)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    With Selection.Borders(xlInsideVertical)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    With Selection.Borders(xlInsideHorizontal)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    Range("Q8:S8").Select
    Selection.Interior.ColorIndex = 36

'NumNodes = NumNodes + 1
'Debug.Print NumNodes
End Sub

Public Sub Node_Button_Duplication()

    ActiveSheet.Shapes("CommandButton1").Select
    Selection.Copy
    Range("Q5").Select
    ActiveSheet.Paste
    Selection.ShapeRange.IncrementTop -14.25
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:01:41.843

将其粘贴到模块中

```
Option Explicit

Public myVar As Long 
```

将此粘贴到 sheet1 中的命令按钮单击事件中

```
Option Explicit

Private Sub CommandButton1_Click()
    myVar = myVar + 1
    MsgBox myVar
End Sub 
```

现在试试看。

此外，您不需要在`Workbook_Open`事件中将值设置为 0 :) 当您打开工作簿时，默认情况下它采用值 0。

**跟进**

> > > 我感觉在电子表格中复制和粘贴控制元素会以某种方式重置变量。我目前正在尝试寻找解决方案... – user1373525 6 分钟前
> > > 
> > > 是的 :) 添加按钮会重新编译 VBA 代码，因此全局变量会被重置。使用临时表来保存变量。您还可以使用注册表来存储该信息 :) – Siddharth Rout 刚刚

仅当您单击按钮两次时才会观察到此行为，而在一次执行时不会观察到此行为。例如

```
Private Sub CommandButton2_Click()
    NumNodes = NumNodes + 1
    MsgBox NumNodes, vbInformation, "1"

    Node_Button_Duplication

    NumNodes = NumNodes + 1
    MsgBox NumNodes, vbInformation, "2"

    Node_Button_Duplication

    NumNodes = NumNodes + 1
    MsgBox NumNodes, vbInformation, "3"
End Sub 
```

在这种情况下，它总是会增加值。但是，下次单击该按钮时，您会注意到该变量已被重置。

# c++ - 从 c++/cli 实例化本机 c++ 代码结构的指针时出错

> ID：10604461
> 
> 赞同：0
> 
> 时间：2012-05-15T15:54:24.333
> 
> 标签：c++, interop, c++-cli, mixed-mode

下面提到的是我的 c++/cli "*.h" 文件

```
// rmsCInterfaceWrapper.h
#ifndef RMSCINTERFACE_H
#define RMSCINTERFACE_H
#ifndef RMSREQINFO_H
#define RMSREQINFO_H
#ifndef RMSCLIENTINFO_H
#define RMSCLIENTINFO_H
#ifndef RMSPHYSICIANINFO_H
#define RMSPHYSICIANINFO_H
#ifndef RMSREQPOLICYINFO_H
#define RMSREQPOLICYINFO_H

#pragma once
#include "D:\nbsource code\RMS\rmsCAPI\rmsCInterface.h"
#pragma comment(lib,"rmsCAPI.lib")
#include "D:\nbsource code\RMS\rmsDLL\rmsReqInfo.h"
#include "D:\nbsource code\RMS\rmsDLL\rmsClientInfo.h"
#include "D:\nbsource code\RMS\rmsDLL\rmsPhysicianInfo.h"
#include "D:\nbsource code\RMS\rmsDLL\rmsReqPolicyInfo.h"
#pragma comment(lib,"rmsDLL.lib")

using namespace System;

namespace rmsCInterfaceWrapper
{
public ref class rmsCInterface
{
    // TODO: Add your methods for this class here.
private:
    rmsReqInfoStruct *rmsReqInfo;
    rmsClientInfoStruct *rmsClientInfo;
    rmsPhysicianInfoStruct *rmsPhysicianInfo;
    rmsReqPolicyInfoStruct *rmsReqPolInfo;
    rmsAddlOrderInfoStruct *rmsAddOrderInfo;
public:
    rmsCInterface();
    ~rmsCInterface();
    long OrderReq();
};
}
#endif 
```

我已经为这些原生 c++ 结构 rmsReqInfoStruct、rmsClientInfoStruct、rmsPhysicianInfoStruct、rmsReqPolicyInfoStruct、rmsAddlOrderInfoStruct 声明了指针。当我编译这个时，我得到了下面提到的这些错误，我不知道为什么我会得到这些

```
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(30) : error C2143: syntax error : missing ';' before '*'
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(30) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(30) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(31) : error C2143: syntax error : missing ';' before '*'
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(31) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(31) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(32) : error C2143: syntax error : missing ';' before '*'
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(32) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(32) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(33) : error C2143: syntax error : missing ';' before '*'
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(33) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(33) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(34) : error C2143: syntax error : missing ';' before '*'
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(34) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>d:\vamsi\rmscinterfacewrapper\rmscinterfacewrapper\rmsCInterfaceWrapper.h(34) : error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

所有这些错误都出现在类私有声明本身的结构指针上，我无法弄清楚它们为什么会导致。任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:22:28.277

我能够解决这个问题。由于我创建了一个 clr---> 类库项目，它自动生成了 stdafx.h 和 stdafx.cpp 文件。当我使用 c++/cli 围绕我的本地 c++ 代码编写包装器时，我将自动生成的 c++/cli stdafx.h 文件与我的本地 stdafx.h 文件复制并从 .h 中删除了 #ifndef,#define,#pragma 语句我在上面提供的文件，所以做了所有这些工作，我能够生成我可以在我的 c# 程序中使用的 dll 文件作为参考......谢谢大家的帮助......

# php - 执行 .php 文件时，mysql_query 命令是否以顶部->底部方式执行？

> ID：10604462
> 
> 赞同：-1
> 
> 时间：2012-05-15T15:54:27.357
> 
> 标签：php, mysql, ajax

我正在尝试构建一个为长时间运行的页面加载的进度条（是的索引是明显的解决方案，但目前数据集/模式禁止分区/正确索引）所以我计划在查询注释中使用 GUID/uniqueID 来跟踪使用 SHOW_FULL_PROCESSLIST 的进度通过 ajax - 但关键在于顺序查询是否由 php 按顺序执行，有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:12:35.530

MySQL 作为数据库服务器使用多个线程来处理多个正在运行的查询。它在收到来自客户端的查询（即 PHP 连接或 ODBC 连接等）时分配一个线程。

但是，既然您提到了 mysql_query，我认为您可能会想到两件事：

1.  如果你多次调用 mysql_query() 来传递各种命令，那么 MySQL 将在前一个查询完全执行后传递每个查询并将结果返回给 PHP。因此，当然 MySQL 似乎会按顺序工作，尽管实际上是 PHP 正在等待向 MySQL 发送一个查询，直到一个查询完成。

2.  在 MySQL5 和 PHP5 中，有一个名为 ( [`mysqli_multi_query()`](http://www.php.net/manual/en/mysqli.multi-query.php)) 的函数，您可以使用它一次将多个查询传递给 MySQL，而无需 PHP 等待 1 个查询结束。该函数将在同一个结果对象中一次返回所有结果。MySQL 实际上将使用多个线程一次运行所有查询，并且在这种情况下等待时间大大减少，并且您还倾向于更好地使用可用的服务器资源，因为所有查询都将作为单独的线程运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T18:47:38.833

正如巴贝奇曾经说过的那样，“我无法正确理解会引发这样一个问题的那种混乱的想法。” 对 的调用`mysql_query`，与对任何其他函数的调用一样，按照它们在程序流中到达的顺序执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T19:20:25.327

文件中的顺序大多无关紧要。重要的是执行顺序。

```
<?php

    myCmdFour();
    myCmdTwo();
    myCmdThree();
    myCmdTwo();

    function myCmdTwo() {
        mysql_query(...);
    }

    function myCmdThree() {
        mysql_query(...);
    }

    function myCmdFour() {
        mysql_query(...);
    }

    myCmdFour();
    myCmdThree();
    myCmdTwo();
    myCmdTwo();
?> 
```

尽管任何拥有类似 PHP 文件的人都需要认真重新考虑。

# dynamics-ax-2009 - Dynamics AX Axapta XPO：将图像属性设置为相对路径而不是绝对路径？

> ID：10604467
> 
> 赞同：1
> 
> 时间：2012-05-15T15:54:52.117
> 
> 标签：dynamics-ax-2009, axapta

我是 AX 开发的新手，所以如果这是初级的，请原谅我。

我有一个案例，我在 AX 2012 中将命令按钮添加到表单的命令栏，并且我有一个 PNG 文件用作按钮的图标。

我通过使用“Text & Image Left”ButtonDisplay 属性和“NormalImage”属性来完美显示部署 AX 的框上的图像路径。

但是，如果我的第 3 方安装程序将图像文件安装到 AX 的 bin 目录中，我想在 XPO 中相对引用该图像文件的路径。我该怎么做呢？

我该怎么做呢？例如，这里是我为这个按钮输入的 XPO 条目示例：

```
CONTROL COMMANDBUTTON
    PROPERTIES
      Name                #myButton
      ElementPosition     #596523234
      HierarchyParent     #WorkerCustom
      Text                #Sample Text
      ButtonDisplay       #Text & Image left
      NormalImage         #C:\Program Files (x86)\Microsoft Dynamics AX\60\Client\Bin
    ENDPROPERTIES 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:30:37.293

这是一个非常奇怪的问题……但是如果文件在 bin 目录中，您只需执行以下操作：

```
 CONTROL COMMANDBUTTON
    PROPERTIES
      Name                #CommandButton
      ButtonDisplay       #Text & Image left
      NormalImage         #.\Roses.jpg
    ENDPROPERTIES 
```

所以“.\Your Image.jpg”就是你需要的。如果您愿意，也可以将其添加为 AOT 中的资源。

# c# - 在 MVC 视图中为 HTML DropDownList 创建标签和值

> ID：10604471
> 
> 赞同：1
> 
> 时间：2012-05-15T15:55:07.120
> 
> 标签：c#, html, asp.net-mvc, c#-4.0, razor

我有以下内容，将“IT”和“HR”作为模型中的值发布。我希望 IT 和 HR 作为标签，并将 0 和 1 作为控制器的值。

```
@Html.DropDownList("DepartmentId", new SelectList(new[] { "IT", "HR" })) 
```

当我获得视图时，如何在下拉列表中预先选择值与模型中部门 ID 中的匹配值。因此，如果一个项目的 ID 为 HR，下拉列表应该已经选择了 HR，然后一个人可以将其更改为 IT，并且可以保存该选项。

有什么帮助吗？？请注意我不想改变我的模型。

**回答** 非常感谢 **Terry Nederveld**给出这个答案：

```
 @Html.DropDownList("DepartmentId", new SelectList(new[] { new KeyValuePair<string, int>("IT", 1), new KeyValuePair<string, int>("HR", 2) }, "Value", "Key", (Model.ServiceItem.DepartmentId.Equals(1) ? 1 : 2))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:08:40.613

假设您使用的是 MVC3/4，最简单的方法是在模型中添加“部门”属性。然后您可以在您的视图中执行此操作：

```
@Html.DropDownListFor(m => m.Department.DepartmentId, Model.Departments) 
```

您的模型如下所示：

```
public class ViewModel
{
    public List<SelectListItem> Departments
    {
        get;
        private set;
    }

    public Department Department { get; set; }

    public ViewModel()
    {
        Departments = new List<SelectListItem>();
        //Assume you'll be getting the list from db here?
        Departments .Add(new SelectListItem { Text = "HR", Value = "IdValueHere" });
        Departments .Add(new SelectListItem { Text = "IT", Value = "IdValueHere" });
    }
} 
```

这负责选择正确的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:50:04.270

David Masters 方法是我通常使用的方法。但是由于您不想更改模型。这是一种可行的方法：

```
@Html.DropDownList("Departments", new SelectList(new [] { new KeyValuePair<string, int>( "IT", 0 ), new KeyValuePair<string, int>( "HR", 1 )},"Value", "Key")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:04:02.783

[在此处](https://stackoverflow.com/questions/301854/set-selected-value-in-selectlist-after-instantiation)查看来自 eudaimos 的回复（大约 50% 的回复）以获得解决方案

# java - Java：我希望 JLabel 有时只响应鼠标事件。有没有办法在需要之前隐藏鼠标侦听器？

> ID：10604473
> 
> 赞同：0
> 
> 时间：2012-05-15T15:55:10.730
> 
> 标签：java, swing, mouse, listener

我看到已经为添加和删除鼠标侦听器构建了一些方法，我想我可以根据需要添加和删除它们。我只是不确定是否有更好的方法。

让我的 JLabel 响应它上面的所有鼠标事件，但有时什么都不做并不是我想要的，如果我的标签仅在我需要时才具有鼠标侦听器，那就太好了。也许这整个想法只是一种奇怪的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:58:20.333

您一劳永逸地注册了侦听器；你不要把它关掉再打开。

您可以在内部编写逻辑代码，以便仅在您选择的某些条件下采取行动。只要您提供决策所需的信息，您的实施就应该没问题。

# javascript - Knockout JS：从其他相同的下拉列表中删除选定的值

> ID：10604477
> 
> 赞同：2
> 
> 时间：2012-05-15T15:55:25.217
> 
> 标签：javascript, drop-down-menu, knockout.js

我正在研究一个问题/答案模型，并且我有多个包含相同数据的下拉列表（如果您愿意，可以选择一组答案）。这里的业务逻辑是，一旦有人选择了一个问题的答案，该答案只能使用一次，并且不能用于其他问题。

因此，我找到了一种将所有下拉列表绑定到包含我的答案的单个 observableArray 的方法，以便下拉列表都包含相同的选项。我想做的是订阅一个下拉列表的当前值（在许多下拉列表中），并从与它们关联的所有其他下拉列表中删除选定的值。使用 Knockout，我已经能够订阅一个回调函数来响应我视图中不断变化的值。

在我的回调函数中，我发现使用 observableArray 的`remove`方法从我的 observableArray 中删除答案是可行的，但不幸的是它会从所有下拉列表中删除当前选择的答案 - 包括选定的答案！我试过用 push 命令把它放回去，但这也会导致问题。我似乎无法以我想要的方式隔离更新。

以前有没有人使用 Knockout 实现过类似的东西？任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:23:57.897

因为如果您从中删除一个项目，您将绑定到一个选项数组，那么选项绑定将正确反映这一点。您可以为每个要绑定的选择框使用计算来创建独立的虚拟列表。

```
var viewModel = function(data) {
   var self = this;
   this.values = ko.observableArray([ "option 1", "option 2", "option 3"]);
   this.selected = [
       new ko.observable(),
       new ko.observable(),
       new ko.observable()
   ]

   this.remaining = function (current) {
       var selected = ko.toJS(self.selected),
           currentValue = ko.utils.unwrapObservable(current);
       var result = ko.utils.arrayFilter(self.values(), function (option) {
           return option == currentValue || selected.indexOf(option) === -1;
       });
       return result;            
   };

   this.values1 = ko.computed(function () {
      return self.remaining(self.selected[0]);
   });
   this.values2 = ko.computed(function () {
      return self.remaining(self.selected[1]);
   });
   this.values3 = ko.computed(function () {
      return self.remaining(self.selected[2]);
   });
};

ko.applyBindings(new viewModel()); 
```

[http://jsfiddle.net/madcapnmckay/6uWEu/2/](http://jsfiddle.net/madcapnmckay/6uWEu/2/)

**编辑**

这是上述工作的方式。您需要将每个选择绑定到它自己的可观察对象，以便在您选择第一个值时可以更新其他值。如果您只是简单地绑定到同一个列表并在每次选择一个值时从中删除，那么您也将删除您刚刚选择的值，KO 会相应地更新选择元素，它将被完全破坏。

上面的代码通过依次过滤每个来解决这个问题。我将每个下拉菜单重定向到它自己的计算 observable。这些计算出的 observables 只是调用一个过滤器函数，该函数循环遍历 values 数组并过滤掉任何**不是**当前选定值的已选择值。

因此，如果我们从所有未选择的第一个选择开始，“选项 1”选择了 values1，计算的 values2 和 values3 将由 KO 自动重新计算。以 values1 为例，它将调用

```
self.remaining("option 1"); 
```

values2 * values3 也将调用剩余但未定义，因为它们尚未被选择。

```
self.remaining(null); 
```

values 数组被过滤为尚未选择且不是当前值的选项。因此，第一次调用剩余将导致`[ "option 1", "option 2", "option 3"]`. 对剩余的第二次和第三次调用将导致`[ "option 2", "option 3"]`.

如果取消选择第一个选择，则执行相同的操作并返回所有选项。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T19:47:33.413

当我不得不做类似的事情时，我`IsSet`在项目上有一个属性，以及两个计算的 observables，一个用于设置它的值，一个用于未设置它的值：

```
var ViewModel = function(data) {
    this.self = this;
    self.originalList = ko.observableArray(data.list);
    self.selectedItems = ko.computed(function() {
        return ko.utils.arrayFilter(function(item) { return item.IsSet(); });
    });
    self.unselectedItems = ko.computed(function() {
        return ko.utils.arrayFilter(function(item) { return !item.IsSet(); });
    });
}; 
```

# android - Adobe AIR 条码扫描器

> ID：10604478
> 
> 赞同：0
> 
> 时间：2012-05-15T15:55:35.830
> 
> 标签：android, mobile, air, camera, barcode

我正在开发一个 AIR 移动应用程序。我想在我的 Adob​​e AIR 移动应用程序中实现条码扫描器。

有样品吗？是否可以？

请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:05:51.660

ZXing (http://code.google.com/p/zxing/) 有一个动作脚本实现。

您需要注意，并非所有 Android 手机都原生支持自动对焦，包括一些现代手机，例如 S2（查看 Adob​​e 论坛了解更多信息）。

# linux - awk：循环并将不同的行保存到不同的文件？

> ID：10604480
> 
> 赞同：-1
> 
> 时间：2012-05-15T15:55:40.697
> 
> 标签：linux, bash, shell, awk

我正在使用 shell 脚本遍历一系列大文件：

```
i=0
while read line
do

    # get first char of line
    first=`echo "$line" | head -c 1`

    # make output filename
    name="$first"
    if [ "$first" = "," ]; then
        name='comma'
    fi
    if [ "$first" = "." ]; then
        name='period'
    fi

    # save line to new file
    echo "$line" >> "$2/$name.txt"

    # show live counter and inc
    echo -en "\rLines:\t$i"
    ((i++))

done <$file 
```

每行中的第一个字符要么是字母数字，要么是上面定义的字符之一（这就是为什么我要重命名它们以用于输出文件名）。

**实在是太慢了**

5,000 行需要 128 秒。

以这个速度，我有一个月的处理时间。

**awk 在这里会更快吗？**

如果是这样，我如何将逻辑融入 awk？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:31:49.117

这当然可以在 bash 中更有效地完成。

举个例子：`echo foo | head`调用`fork()`，创建子shell，设置管道，启动外部`head`程序......根本没有理由这样做。

如果您想要一行的第一个字符，而不需要对子流程进行任何低效的处理，就这么简单：

```
c=${line:0:1} 
```

我也会认真考虑对您的输入进行排序，因此您只能在看到新的第一个字符时重新打开输出文件，而不是每次都通过循环。

那就是 -- 使用 sort 进行预处理（如替换`<$file`为`< <(sort "$file")`）并在每次循环中执行以下操作，仅有条件地重新打开输出文件：

```
if [[ $name != "$current_name" ]] ; then
  current_name="$name"
  exec 4>>"$2/$name" # open the output file on FD 4
fi 
```

...然后附加到打开的文件描述符：

```
printf '%s\n' "$line" >&4 
```

（不使用 echo 因为如果您的线路是`-e`或，它的行为可能会不受欢迎`-n`）。

或者，如果可能的输出文件数量很少，您可以预先在不同的 FD 上打开它们（在我选择的地方替换其他更高的数字`4`），并有条件地输出到这些预先打开的文件之一。打开和关闭文件很昂贵——每个都`close()`强制刷新到磁盘——所以这应该是一个很大的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:31:55.997

```
#!/usr/bin/awk -f
BEGIN {
    punctlist = ", . ? ! - '"
    pnamelist = "comma period question_mark exclamation_mark hyphen apostrophe"
    pcount = split(punctlist, puncts)
    ncount = split(pnamelist, pnames)
    if (pcount != ncount) {print "error: counts don't match, pcount:", pcount, "ncount:", ncount; exit}
    for (i = 1; i <= pcount; i++) {
        punct_lookup[puncts[i]] = pnames[i]
    }
}
{
    print > punct_lookup[substr($0, 1, 1)] ".txt"
    printf "\r%6d", i++
}
END {
    printf "\n"
} 
```

该`BEGIN`块构建了一个关联数组，因此您可以执行`punct_lookup[","]`并获取“逗号”。

主块只是简单地查找文件名并将该行输出到文件中。在 AWK 中，`>`第一次截断文件并随后追加。如果您有不想截断的现有文件，请将其更改为`>>`（但不要使用`>>`其他方式）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T16:32:14.403

有几件事可以加快速度：

1.  不要使用 echo/head 来获取第一个字符。您每行至少产生两个额外的进程。相反，使用 bash 的参数扩展工具来获取第一个字符。

2.  使用 if-elif 避免`$first`每次都检查所有可能性。更好的是，如果您使用的是 bash 4.0 或更高版本，请使用关联数组来存储输出文件名，而不是检查 `$first`每一行的大 if 语句。

3.  如果您没有支持关联数组的 ba​​sh 版本，请将 if 语句替换为以下内容。

    ```
    if [[ "$first" = "," ]]; then
        name='comma'
    elif [[ "$first" = "." ]]; then
        name='period'
    else
        name="$first"
    fi 
    ```

但建议如下。如果没有给出名称，请注意使用`$REPLY`作为默认变量（仅供参考）。`read`

```
declare -A OUTPUT_FNAMES
output[","]=comma
output["."]=period
output["?"]=question_mark
output["!"]=exclamation_mark
output["-"]=hyphen
output["'"]=apostrophe
i=0
while read
do

    # get first char of line
    first=${REPLY:0:1}

    # make output filename
    name=${output[$first]:-$first}

    # save line to new file
    echo $REPLY >> "$name.txt"

    # show live counter and inc
    echo -en "\r$i"
    ((i++))

done <$file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T17:13:28.690

另一个采取：

```
declare -i i=0
declare -A names
while read line; do
    first=${line:0:1}
    if [[ -z ${names[$first]} ]]; then
        case $first in
            ,) names[$first]="$2/comma.txt" ;;
            .) names[$first]="$2/period.txt" ;;
            *) names[$first]="$2/$first.txt" ;;
        esac
    fi
    printf "%s\n" "$line" >> "${names[$first]}"
    printf "\rLine $((++i))"
done < "$file" 
```

和

```
awk -v dir="$2" '
    {
        first = substr($0,1,1)
        if (! (first in names)) {
            if (first == ",")      names[first] = dir "/comma.txt"
            else if (first == ".") names[first] = dir "/period.txt"
            else                   names[first] = dir "/" first ".txt"
        }
        print > names[first]
        printf("\rLine %d", NR)
    }
' 
```

# c# - 创建分层自定义控件模板 (WPF 4 / .net 4.0 / C#)

> ID：10604483
> 
> 赞同：0
> 
> 时间：2012-05-15T15:55:51.227
> 
> 标签：c#, wpf, .net-4.0, styling, controltemplate

我需要一些帮助来尝试重新创建以下样式：

![我的自定义风格](../Images/7ad062f7b355ab4b0a0f9cc4efebabfd.png)

***红海可以忽略***，因为它只是文本框所在的背景。

要创建文本框，我使用以下 xaml：

```
 <TextBox Name="tbSorageName"
                     Grid.Column="1"
                     Width="250"
                     Height="30"
                     Margin="0"
                     HorizontalAlignment="Left"
                     VerticalAlignment="Top"
                     IsReadOnly="True"
                     Style="{StaticResource MainTextBoxStyle}"
                     Text="{Binding SelectedStorage.Name,
                                    Mode=OneWay,
                                    UpdateSourceTrigger=PropertyChanged}" /> 
```

为了设置它的样式，我使用了以下样式：

```
<Style x:Key="MainTextBoxStyle" TargetType="TextBox">
    <Setter Property="FontSize" Value="16" />
    <Setter Property="Foreground" Value="Snow" />
    <Setter Property="FontFamily" Value="Calibri" />
    <Setter Property="TextAlignment" Value="Center" />
    <Setter Property="Background" Value="{DynamicResource MainTextBox_BGBrush}" />
    <Setter Property="BorderBrush" Value="{DynamicResource MainTextBox_BorderBrush}" />
    <Setter Property="BorderThickness" Value="2" />
    <Setter Property="TextAlignment" Value="Left" />
</Style> 
```

我使用的刷子是：

```
<SolidColorBrush x:Key="MainTextBox_BGBrush" Color="#3A3A3A" />
<SolidColorBrush x:Key="MainTextBox_BorderBrush" Color="#656565" /> 
```

这创建了我在应用程序中使用的基本文本框，但我想通过在文本框右侧浮动一些描述文本框内容的有意义的文本来进一步改进我的设计 - 所以它应该锚定在右侧边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:12:39.213

您可以通过 2 种方法轻松做到这一点。

1.创建一个由文本框和文本块组成的用户控件。UserControl 的 Xaml 类似于以下内容

```
<Grid Width="{Binding Path=Width, ElementName=tbSorageName}" Height="{Binding Path=Height, ElementName=tbSorageName}">
   <TextBox Name="tbSorageName"
                 Grid.Column="1"
                 Width="250"
                 Height="30"
                 Margin="0"
                 HorizontalAlignment="Left"
                 VerticalAlignment="Top"
                 IsReadOnly="True"
                 Style="{StaticResource MainTextBoxStyle}"
                 Text="hello" />
    <TextBlock HorizontalAlignment="Right" Margin="5" Foreground="Red" FontStyle="Italic">Name</TextBlock>
</Grid> 
```

2.在文本框上覆盖一个装饰器，并通过 OnRender [Override](http://msdn.microsoft.com/en-us/library/ms743737.aspx)自己在文本框上绘制描述。

我会使用 Usercontrol 方法，因为它更清洁且更易于维护。

# objective-c - 从 NSArray 中读取 NSobject 属性

> ID：10604487
> 
> 赞同：1
> 
> 时间：2012-05-15T15:56:01.540
> 
> 标签：objective-c, properties, nsarray, nsobject

我创建了这个类来存储关于 CD-rooms 的 Rss 提要：

CdObject.h

```
@interface CdObject : NSObject{

NSString *title,*artist,*country,*company,*price,*year;

}

@property(nonatomic,retain)NSString *title,*artist,*country,*company,*price,*year; 
```

光盘对象.m

```
#import "CdObject.h"

@implementation CdObject
@synthesize title,artist,country,company,price,year;

@end 
```

然后在解析 xml 时，我正在创建此类的新实例，填充它们的属性（标题、艺术家等）并将它们推入 NSMutableArray（cdListArray）

我如何从 cdListArray 中读取其中一个对象的属性？

```
Ex:NSLog(@"%@",[cdListArray objectAtIndex:0].title) ??? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:13:10.497

恕我直言，在所有这种情况下，最简单的方法是`valueForKey:`它的兄弟`valueForKeyPath:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T15:58:29.147

尝试`NSLog(@"%@",((CdObject*)[cdListArray objectAtIndex:0]).title)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:00:27.030

您只需将其转换为您想要的对象。如果您对这种方式的类型转换感到偏执，您还可以在转换之前检查对象的类。

前任：

```
NSObject *firstObject = [cdListArray objectAtIndex:0];
if ( [firstObject isKindOfClass:[CdObject class]] )
{
    CdObject* cdFirstObject = (CdObject*)firstObject;
    NSLog(@"%@", cdFirstObject.title;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T16:00:00.493

我认为你需要投：

```
NSLog(@"%@",[(CdObject *)[cdListArray objectAtIndex:0]] title); 
```

# d3.js - 如何更新立体主义/ d3中变化事件的轴比例

> ID：10604490
> 
> 赞同：0
> 
> 时间：2012-05-15T15:56:14.833
> 
> 标签：d3.js, cubism.js

我正在尝试使用立体主义进行演示。我创建了一个 custom `context.metric`，类似于`random()`立体主义主页上的功能。这会加载我的数据集并正确呈现，每秒显示一个新行。

我现在要做的是使用我的数据集中的日期列来更新轴比例域。出于演示的目的，我希望墙上时间的每一秒都对应于我的数据集中的一行，即每小时一次。我可以在创建上下文时设置比例域，但在获取新数据时无法更新它。

我试图侦听诸如`change`, 之类的上下文事件，并`beforechange`在那里手动更新域。它似乎不起作用，或者我做错了什么。任何建议将不胜感激。

感谢很棒的图书馆！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:08:05.137

上下文的时域由上下文步长和大小固定。例如，如果您有 10 秒的步长和 1,440 的大小，则域是最后四个小时。如果你使用 context.axis 来显示轴，它会在上下文触发更改事件时自动更新；你不必做任何事情。Cubism 专为实时仪表板而设计，因此它不支持每秒前进一小时。

# java - 方法能否知道调用它的 Object 的类型（即调用它的子类型）

> ID：10604495
> 
> 赞同：0
> 
> 时间：2012-05-15T15:56:29.740
> 
> 标签：java

这与 Java 语言有关。

假设我有一个超类 A 和子类 X 和 Y。我在 A 中有一个方法需要知道 X 和 Y 的类型（它是一个外部库）。

我在 A 上有一个名为`someMethod()`. 我的问题是：在`someMethod()`实现中是否有办法找出它是被 X 还是 Y 调用的？

如果不清楚，请告诉我。

编辑^2：

A类的具体情况是这样的。

```
public void delete() {
    Datastore ds = Dao.instance().getDatabase();
    ds.delete(this.getClass(),this.id);
} 
```

我希望能够做 X.delete() 和 Y.delete()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T15:58:11.477

是的：只需调用[`getClass()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#getClass%28%29). 例如：

```
class A {
  public void someMethod() {
    System.out.println(getClass().getSimpleName());
  }
} 
```

这将打印出来，`X`或者`Y`取决于调用它的对象的运行时类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T15:58:29.357

您可以使用以下命令轻松找出该方法是*在*X 还是 Y 上调用的[`getClass()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#getClass%28%29)：

```
public void someMethod() {
    System.out.println(getClass()); // Will display the execution-time type
} 
```

*但当然，*任何类（不仅仅是 X 或 Y）都可以调用该公共方法。如果您需要获取*该*信息，则需要获取堆栈跟踪 - 由于内联等原因，这可能并不总是可靠的。正确的操作过程将取决于您*为什么*需要此信息。

# java - 单击按钮时如何启用文本字段？

> ID：10604496
> 
> 赞同：0
> 
> 时间：2012-05-15T15:56:32.783
> 
> 标签：java, swing, jframe, field, jbutton

在开始之前，我是一个初学者程序员。

单击按钮时如何启用文本字段。

我有两个框架，一个具有 JFields，另一个具有异常。当异常发生时 > **setEditable(false)** 但是一旦用户单击确定按钮（我在异常中所做的），我应该做出什么声明来启用 JFields？

我尝试将静态布尔值添加到异常框架中，并且在此类执行的操作中，我将该布尔值初始化为**true**。

在另一个类中，我添加了一个 if 语句，如果该布尔值为 true，则 setEditable(true)

-========- 这个程序的要点是，当异常发生时，用户不能在字段中输入任何内容，直到他关闭异常窗口。

我希望你能帮助我。

怀着所有的爱，程序员。

**为异常窗口框架执行的操作代码（具有确定按钮。）**

```
 public void actionPerformed(ActionEvent e){
      {
      allow=true; //static boolean
        Container TheFrame = OKButton.getParent();
        do TheFrame = TheFrame.getParent(); 
                 while (!(TheFrame instanceof JFrame));

        ((JFrame) TheFrame).dispose();

     } 
```

**为主程序执行的操作代码（具有三个字段，一旦用户输入非数字就会发生异常）** 我添加了一些注释以澄清。

```
 public void actionPerformed(ActionEvent event) {

     try{
        r =Double.parseDouble(RField.getText());
        s=Double.parseDouble(SField.getText());
        h=Double.parseDouble(HField.getText());

        Cone C = new Cone(r,s,h);//class cone 
        if (event.getSource() instanceof JButton) {
           JButton clickedButton = (JButton) event.getSource();
           if (clickedButton == VolumeButton) {
              Result.append("VOLUME =  "+C.volume()+ "\n");
              ifV= true;//this's for clearing the fields for new entries.

           }
           if (clickedButton == AreaButton) {
              Result.append("SURFACE AREA =  "+C.surfaceArea()+ "\n");
              ifA= true;//this's for clearing the fields for new entries.

           }

           if(ifA&&ifV){ // clearing the fields for new entries.
              SField.setText(CLEAR);
              HField.setText(CLEAR);
              RField.setText(CLEAR); 
              ifV=false; ifA= false;}

        } 

        SList.addShape(C);

     }

        catch(NumberFormatException e){ 

        //Object of type "Exception__" already created 

           Ex.setVisible(true);//class "Exception__" is the one i've made for Exception window

           SField.setText(CLEAR);
           HField.setText(CLEAR);
           RField.setText(CLEAR);
           SField.setEditable(false);
           HField.setEditable(false);
           RField.setEditable(false);

        }/*here, if the user clicked on -that okay in Exception window- 
and variable allow initialized to "true" those statements should extend. I guess? 
- everything worked correctly except for this ?*/
     if(Ex.allow){    
        SField.setEditable(true);
        HField.setEditable(true);
        RField.setEditable(true);  } 

  } 
```

**谢谢你，这一切终于奏效了。**

我添加了

```
Ex.allow(SField,HField,RField); 
```

赶上。

并在 Exception__ 类中添加了这个方法：

```
 public void allow(JTextField js,JTextField jh,JTextField jr){

     HField =jh;
     SField =js;
     RField =jr;
  } 
```

最后，对于类 Exception__ 执行的操作：

```
 SField.setEditable(true);
           HField.setEditable(true);
           RField.setEditable(true); 
```

哇哦。感觉太棒了哈哈。谢谢大家。我应该删除我的问题还是将其留给可能面临与我相同问题的其他人？:P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:12:38.777

你的问题需要更多细节。但是，如果您只想显示“异常窗口”并仅在用户关闭此窗口后才允许用户执行其他任何操作，我认为您只需要一个 MessageDialog：请参阅[`JOptionPane`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html)

如果您需要显示更多详细信息，您可以创建自己的 modal [`JDialog`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JDialog.html)。

查看[如何制作对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:42:01.780

通过编写隐藏文本字段：

jTextfield.setVisible(fasle);

在表单代码的构造函数中。而不是使用按钮事件“Action -> Action Performed”并编写代码：

jTextfield.setVisible(true);

因此，只有在单击按钮后，您的文本字段才会可见。

# mysql - MySQL 优化 - 大表连接

> ID：10604501
> 
> 赞同：4
> 
> 时间：2012-05-15T15:57:07.620
> 
> 标签：mysql, query-optimization

从这里开始是所涉及表格的简化版本。

`tbl_map`大约有 4,000,000 行，`tbl_1`大约有 120 行，`tbl_2`包含大约 5,000,000 行。我知道数据不应该考虑那么大，因为 Google、Yahoo! 等使用更大的数据集。所以我只是假设我错过了一些东西。

```
 CREATE TABLE `tbl_map` (
      `id` bigint(20) NOT NULL AUTO_INCREMENT,
      `tbl_1_id` bigint(20) DEFAULT '-1',
      `tbl_2_id` bigint(20) DEFAULT '-1',
      `rating` decimal(3,3) DEFAULT NULL,
      PRIMARY KEY (`id`),
      KEY `tbl_1_id` (`tbl_1_id`),
      KEY `tbl_2_id` (`tbl_2_id`)
    ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

    CREATE TABLE `tbl_1` (
      `id` bigint(20) NOT NULL AUTO_INCREMENT,
      PRIMARY KEY (`id`)
   ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

    CREATE TABLE `tbl_2` (
      `id` bigint(20) NOT NULL AUTO_INCREMENT,
      `data` varchar(255) NOT NULL DEFAULT '',
      PRIMARY KEY (`id`),
    ) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

感兴趣的查询：也，而不是`ORDER BY RAND()`, `ORDERY BY t.id DESC`。查询耗时 5~10 秒，当用户查看此页面时会导致相当长的等待时间。

```
EXPLAIN SELECT t.data, t.id , tm.rating
FROM tbl_2 AS t
JOIN tbl_map AS tm 
ON t.id = tm.tbl_2_id
WHERE tm.tbl_1_id =94
AND tm.rating IS NOT NULL
ORDER BY t.id DESC
LIMIT 200 

1   SIMPLE  tm  ref     tbl_1_id, tbl_2_id  tbl_1_id    9   const   703438  Using where; Using temporary; Using filesort
1   SIMPLE  t   eq_ref  PRIMARY     PRIMARY     8   tm.tbl_2_id     1 
```

我只想加快查询速度，确保我有正确的索引等。我感谢 DB Gurus 的任何建议！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:07:54.843

## 建议：索引表如下：

```
ALTER TABLE tbl_map ADD INDEX (tbl_1_id,rating,tbl_2_id); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:31:39.727

按照 Rolando 的说法，是的，您肯定需要在地图表上建立一个索引，但我会扩展到还包括 tbl_2_id，它用于表 2 的 ID 的 ORDER BY 子句（它与地图在同一个表中，所以只需使用它此外，由于索引现在包含所有 3 个字段，并且基于键搜索的 ID 和评级为 null（或不为空）的条件，因此第三个元素已经为您的 ORDER BY 子句提供了它们。

索引（tbl_1_id，评级，tbl_2_id）；

然后，我将查询为

```
SELECT STRAIGHT_JOIN 
      t.data, 
      t.id , 
      tm.rating
   FROM 
      tbl_map tm
         join tbl_2 t
            on tm.tbl_2_id = t.id
   WHERE 
          tm.tbl_1_id = 94
      AND tm.rating IS NOT NULL
   ORDER BY 
      tm.tbl_2_id DESC
   LIMIT 200 
```

# objective-c - SBJSON 编码包含另一个对象数组的对象

> ID：10604502
> 
> 赞同：0
> 
> 时间：2012-05-15T15:57:07.750
> 
> 标签：objective-c, ios, json, sbjson

我有一点 json 编码问题：

我需要使用 SBJSON 对对象格式 JSON 进行编码，然后再将其发送到 php 服务器 目前此示例代码有效：

```
NSArray *arrayData = [NSArray arrayWithObjects:
                      user.id == nil ? [NSNumber numberWithInt:-1] : user.id,
                      ProfessionField.text, NameField.text, RPPSField.text, RPPSField.text,
                      NameField.text, SurnameField.text, StreetField.text,
                      TownField.text, CpField.text, MailField.text,
                      PhoneField.text, FaxField.text, MobileField.text,
                   //   [user.horaires JSONRepresentation],
                      nil];

NSArray *arrayKey = [NSArray arrayWithObjects:
                     @"id", @"spe", @"name", @"rpps", @"cip",
                     @"name", @"surname", @"rue",
                     @"ville", @"cp", @"mail", 
                     @"tel", @"fax", @"port", 
                    // @"horaires",
                     nil];

NSDictionary *dataBrut = [NSDictionary dictionaryWithObjects:arrayData forKeys:arrayKey];
NSDictionary *jsonDict = [NSDictionary dictionaryWithObject:dataBrut forKey:@"data"];
NSString *jsonRequest = [jsonDict JSONRepresentation]; 
```

问题是当我需要在该对象的 JSON 表示中发送“user.horaires”（此处为评论）应用程序崩溃时。

此对象是以下类的数组：

```
@interface Horaire : NSObject
{ 
    BOOL morning;
}

@property (nonatomic, strong) NSNumber  *id;
@property (nonatomic, strong) NSString  *open;
@property (nonatomic, strong) NSString  *close; 
```

有人知道如何成功编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:02:38.667

您不应该将 JSON 表示形式包含为 JSON 项。JSON 不能很好地“转义”字符串数据，因此嵌入的 JSON（除非您单独“转义”它）会导致解析阻塞。

相反，您应该将用于生成 JSON 表示的字典或数组（即“user.horaires”本身）放在显示正在生成和插入的表示的位置。然后整个结构将在一次操作中进行 JSON 编码。

IE：

```
NSArray *arrayData = [NSArray arrayWithObjects:
                  user.id == nil ? [NSNumber numberWithInt:-1] : user.id,
                  ProfessionField.text, NameField.text, RPPSField.text, RPPSField.text,
                  NameField.text, SurnameField.text, StreetField.text,
                  TownField.text, CpField.text, MailField.text,
                  PhoneField.text, FaxField.text, MobileField.text,
                  user.horaires,
                  nil]; 
```

# c# - ORM 的哪些选择允许在“轻按开关”之间更改 RDBMS...SQL Server/SQL Azure 和 PostgreSQL/“云”PostgreSQL

> ID：10604503
> 
> 赞同：3
> 
> 时间：2012-05-15T15:57:08.060
> 
> 标签：c#, asp.net, sql, postgresql, orm

鉴于以下约束：

*   我将开发一个全新的网站。
*   我将使用 C# 和 ASP.NET MVC
*   带有单声道的 Linux 会很好，但 windows 是一个可以接受的约束（如果是，请提及）。

**现在有趣的一点：**

*   我希望尽可能接近能够**“轻按开关”**以在 SQL Server/SQL Azure 和 PostgreSQL/基于云的 PostgreSQL 之间更改 RDBMS。

*   我想尽可能地利用 ORM（理想情况下，ORM 必须***只***需要更改设置以切换到这些替代数据库后端之一）。

*   这应该包括以与所有方式相同的方式调用存储过程。

为了许多人的利益，我正在从实践经验中寻找具有详细限制的选项。

*   请**不要**给出“不可能”或“不要打扰”之类的答案。
*   请不要**以**任何其他方式比较 ORM，它们执行上述操作的能力以及保留了多少功能。这不应该**变成**x ORM 比 y ORM 更好。
*   请**不要**讨论 SQL Azure 与专用托管的限制。
*   请**不要**讨论 SQL Server 或 PostgreSQL 的差异、优势/劣势、存储过程转换等。
*   请**不要**讨论什么应该在存储过程中，什么应该在服务层中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:04:28.613

看来[实体框架](http://msdn.microsoft.com/library/bb399567.aspx)支持您的要求。它绝对可以[连接到您的两个提供商](http://msdn.microsoft.com/en-us/data/dd363565.aspx)。看起来您也可以使用存储过程，但这有点模糊。

我相信你翻转的唯一“开关”是在`.config`文件中（没有重建）。

顺便说一句，新的 EF Code First + Migrations 位非常简洁。我一直在本地将它们与 SQL Server 一起用于开发，并在 SQL Server 云主机上用于生产。我对他们很满意。

# java - 使用泛型重构

> ID：10604504
> 
> 赞同：2
> 
> 时间：2012-05-15T15:57:13.750
> 
> 标签：java, generics

我习惯于在类型化集合中使用泛型，但我从未真正使用它们来开发某些东西。

我有几个这样的课程：

```
public class LogInfoWsClient extends GenericWsClient {
    public void sendLogInfo(List<LogInfo> logInfoList) {
        WebResource ws = super.getWebResource("/services/logInfo");
        try {
            String response = ws.accept(MediaType.TEXT_HTML).type(MediaType.APPLICATION_XML).put(String.class, new GenericEntity<List<LogInfo>>(logInfoList) {
            });     
    }
} 
```

在一个和另一个之间唯一改变的是服务字符串（“/services/info”）和列表的类型（在这种情况下是LogInfo）

我已经将几个方法重构为 GenericWsClient 类，但我的目标是拥有可以像这样使用的东西：

```
List<LogInfo> myList = database.getList();
SuperGenericClient<List<LogInfo>> superClient = new SuperGenericClient<List<LogInfo>>();
superClient.send(myList,"/services/logInfo"); 
```

但我不知道该怎么做，或者即使它可能。这有没有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:02:22.910

是的`java.util.collection`，例如，如果您查看包，您可能会发现所有类都是 parameterzid。

所以你的班级将是这样的

```
public SuperGenericClient<E> {       
    public E getSomething() {
         return E;
    }
} 
```

然后使用它，您将拥有

```
SuperGenericClient<String> myGenericClient = new SuperGenericClient<String>();
String something = myGenericClient.getSomething(); 
```

扩展您的示例本身，您的代码将如下所示：

```
public class SuperGenericClient<E> extends GenericWsClient {
    public void send(List<E> entityList, String service) {
        WebResource ws = super.getWebResource(service);
        try {
            String response = ws.accept(MediaType.TEXT_HTML).type(MediaType.APPLICATION_XML).put(String.class, new GenericEntity<E>(entityList) {
            });
        }            
    }
}

public class GenericEntity<E> {
    public GenericEntity(List<E> list){

    }
} 
```

您必须阅读[本文](http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf)才能很好地理解泛型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:03:06.557

您可以像下面这样编写您的课程 - 您可以将相同的想法应用于`GenericEntity`.

```
public class SuperGenericClient<T> extends GenericWsClient {

    public void send(List<T> list, String service) {
        WebResource ws = super.getWebResource(service);
        try {
            String response = ws.accept(MediaType.TEXT_HTML).type(MediaType.APPLICATION_XML).put(String.class, new GenericEntity<T>(list) {
            });
        }            
    }
} 
```

然后你可以这样称呼它：

```
List<LogInfo> myList = database.getList();
SuperGenericClient<LogInfo> superClient = new SuperGenericClient<LogInfo>();
superClient.send(myList,"/services/logInfo"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:03:58.137

像这样声明你的类：

```
public class LogThing<T> {
    public void sendLogInfo(List<T> list) {
        // do thing!
    }
} 
```

当你使用它时，这样做：

```
List<LogInfo> myList = db.getList();
LogThing<LogInfo> superClient = new LogThing<LogInfo>();
superClient.sendLogInfo(myList); 
```

# java - Java中的PCA实现

> ID：10604507
> 
> 赞同：12
> 
> 时间：2012-05-15T15:57:36.563
> 
> 标签：java, pca

我需要用 Java 实现 PCA。我有兴趣找到有据可查、实用且易于使用的东西。有什么建议吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-05-06T10:34:33.430

现在有许多用于 Java 的主成分分析实现。

1.  Apache Spark：[https ://spark.apache.org/docs/2.1.0/mllib-dimensionality-reduction.html#principal-component-analysis-pca](https://spark.apache.org/docs/2.1.0/mllib-dimensionality-reduction.html#principal-component-analysis-pca)

    ```
    SparkConf conf = new SparkConf().setAppName("PCAExample").setMaster("local");
    try (JavaSparkContext sc = new JavaSparkContext(conf)) {
        //Create points as Spark Vectors
        List<Vector> vectors = Arrays.asList(
                Vectors.dense( -1.0, -1.0 ),
                Vectors.dense( -1.0, 1.0 ),
                Vectors.dense( 1.0, 1.0 ));

        //Create Spark MLLib RDD
        JavaRDD<Vector> distData = sc.parallelize(vectors);
        RDD<Vector> vectorRDD = distData.rdd();

        //Execute PCA Projection to 2 dimensions
        PCA pca = new PCA(2); 
        PCAModel pcaModel = pca.fit(vectorRDD);
        Matrix matrix = pcaModel.pc();
    } 
    ```

2.  ND4J：[https ://deeplearning4j.org/api/latest/org/nd4j/linalg/dimensionalityreduction/PCA.html](https://deeplearning4j.org/api/latest/org/nd4j/linalg/dimensionalityreduction/PCA.html)

    ```
    //Create points as NDArray instances
    List<INDArray> ndArrays = Arrays.asList(
            new NDArray(new float [] {-1.0F, -1.0F}),
            new NDArray(new float [] {-1.0F, 1.0F}),
            new NDArray(new float [] {1.0F, 1.0F}));

    //Create matrix of points (rows are observations; columns are features)
    INDArray matrix = new NDArray(ndArrays, new int [] {3,2});

    //Execute PCA - again to 2 dimensions
    INDArray factors = PCA.pca_factor(matrix, 2, false); 
    ```

3.  Apache Commons Math（单线程；无框架）

    ```
    //create points in a double array
    double[][] pointsArray = new double[][] { 
        new double[] { -1.0, -1.0 }, 
        new double[] { -1.0, 1.0 },
        new double[] { 1.0, 1.0 } };

    //create real matrix
    RealMatrix realMatrix = MatrixUtils.createRealMatrix(pointsArray);

    //create covariance matrix of points, then find eigenvectors
    //see https://stats.stackexchange.com/questions/2691/making-sense-of-principal-component-analysis-eigenvectors-eigenvalues

    Covariance covariance = new Covariance(realMatrix);
    RealMatrix covarianceMatrix = covariance.getCovarianceMatrix();
    EigenDecomposition ed = new EigenDecomposition(covarianceMatrix); 
    ```

请注意，奇异值分解也可用于查找主成分，具有等效的实现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T16:04:42.970

这是一个：[PCA 类](http://www.ee.ucl.ac.uk/~mflanaga/java/PCA.html)。

> 此类包含使用 varimax 旋转进行基本主成分分析所需的方法。选项可用于使用协方差或相关矩阵进行分析。使用蒙特卡罗模拟进行并行分析。基于大于一、大于蒙特卡洛特征值百分位数或大于蒙特卡洛特征值均值的特征值的提取标准是可用的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-21T02:36:17.540

检查[http://weka.sourceforge.net/doc.stable/weka/attributeSelection/PrincipalComponents.html](http://weka.sourceforge.net/doc.stable/weka/attributeSelection/PrincipalComponents.html) weka 实际上有许多其他算法可以与 PCA 一起使用，而且 weka 不时添加更多算法。所以我的事情，如果你正在使用java然后切换到weka api。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-25T20:07:56.667

[Smile](http://haifengl.github.io/smile/)是一个成熟的 Java 机器学习库。你试试它的 PCA 实现。请看：[https ://haifengl.github.io/smile/api/java/smile/projection/PCA.html](https://haifengl.github.io/smile/api/java/smile/projection/PCA.html)

还有带有微笑的PCA[教程，但该教程使用了 Scala。](http://xyclade.github.io/MachineLearning/#using-unsupervised-learning-to-merge-features-pca)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-06-10T04:15:05.390

您可以在 DataMelt 项目中看到一些 PCA 的实现：

[https://jwork.org/dmelt/code/index.php?keyword=PCA](https://jwork.org/dmelt/code/index.php?keyword=PCA)

（它们在 Jython 中重写）。它们包括一些用于降维的图形示例。它们展示了几个 Java 包的用法，例如 JSAT、DatumBox 等。

# asp.net-mvc-3 - IIS在已经登录MVC3时强制登录

> ID：10604510
> 
> 赞同：0
> 
> 时间：2012-05-15T15:57:56.417
> 
> 标签：asp.net-mvc-3, iis-7

我有一个奇怪的问题，我在 SO 上找不到任何参考

我每天将我的应用程序部署到登台服务器并且它已停止正常运行

当我在浏览器中登录时，地址看起来像这样

[http://xxxx/(F(W24RTn2OAE25WANV8wtnrAEVS4VWP7InzD7rCS3narKQgB3F6eqHe04BLLdK2uv2RCzfrwzW5AMPbOGoN99C9aq5WMWP0_brrNTy1HD0EH1nU2G_be9gz_jXYwkZlaQDIjv4NPD-LVr9j2h2teipwjV0yPtr25wEeDrheFNaKcaHqblTFXnNZCjfTJkEJxIN0))/Controller/Action/25](http://x.x.x.x/(F(W24RTn2OAE25WANV8wtnrAEVS4VWP7InzD7rCS3narKQgB3F6eqHe04BLLdK2uv2RCzfrwzW5AMPbOGoN99C9aq5WMWP0_brrNTy1HD0EH1nU2G_be9gz_jXYwkZlaQDIjv4NPD-LVr9j2h2teipwjV0yPtr25wEeDrheFNaKcaHqblTFXnNZCjfTJkEJxIN0))/Controller/Action/25)

如果我手动删除那里的垃圾以便我可以导航到 /Controller/Action/25 我将被迫再次登录......这样做后我被重定向到正确的页面但所有垃圾又回来了

[http://xxxx/(F(W24RTn2OAE25WANV8wtnrAEVS4VWP7InzD7rCS3narKQgB3F6eqHe04BLLdK2uv2RCzfrwzW5AMPbOGoN99C9aq5WMWP0_brrNTy1HD0EH1nU2G_be9gz_jXYwkZlaQDIjv4NPD-LVr9j2h2teipwjV0yPtr25wEeDrheFNaKcaHqblTFXnNZCjfTJkEJxIN0))/Controller/Action/25](http://x.x.x.x/(F(W24RTn2OAE25WANV8wtnrAEVS4VWP7InzD7rCS3narKQgB3F6eqHe04BLLdK2uv2RCzfrwzW5AMPbOGoN99C9aq5WMWP0_brrNTy1HD0EH1nU2G_be9gz_jXYwkZlaQDIjv4NPD-LVr9j2h2teipwjV0yPtr25wEeDrheFNaKcaHqblTFXnNZCjfTJkEJxIN0))/Controller/Action/25)

此外，这似乎是一个相关问题，我的自动完成文本框不再工作......调用从未打到数据库。

在源代码的调试模式下，这两个功能在我的 IIS Express 上本地运行良好，所以我认为它是登台服务器 IIS ......但我不确定在哪里寻找解决这个问题......一个想法？

这是我的 web.config 对表单身份验证所做的唯一事情

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" 
         timeout="2880" />
</authentication> 
```

登录时，操作方法是默认的

```
FormsAuthentication.SetAuthCookie(model.Username, model.RememberMe); 
```

这发生在我的 VM 和本地计算机上的每个浏览器上，但不是在另一台 PC 上。我已经刷新了所有浏览器，从每个浏览器中删除了所有缓存

这似乎是一个 cookie 的事情。在 Chrome 中，当我在开发工具中以调试模式登录站点时，我可以看到 cookie。如果我登录到指向登台服务器的站点，则使用相同的浏览器没有设置 cookie。

如果我没有做任何事情来阻止 cookie 并删除了缓存等，为什么不会设置 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:02:36.907

表单身份验证是否配置为不使用 cookie？在这种情况下，它将这些信息嵌入到 URL 中。这可以解释为什么当你删除它时你必须重新登录。

# c# - 无法设置状态码

> ID：10604512
> 
> 赞同：1
> 
> 时间：2012-05-15T15:57:57.453
> 
> 标签：c#, javascript, ajax, httpresponse, http-status-codes

我正在使用基本`Response.StatusCode`设置将状态代码设置为 9999。此页面正在通过 AJAX 调用调用，检查状态代码`readyState = 4`并使用设置的消息在 9999 上弹出警报`Response.StatusDescription`。我得到的只是`readyState = 4`和`statusCode = 200`。如果需要，我可以提供代码，但它不是修剪，所以如果需要/请求代码，我会修剪它。任何帮助表示赞赏。用 C# ASP.NET 和 Javascript 编码。

**更新** *目的：*在将用户添加到 SQL 表时，我使用状态代码 9999 表示“用户已存在”错误。这是我能找到让 AJAX 调用知道何时发生此错误的唯一方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T16:00:19.010

你不能编造状态码。[这是有效的](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

我认为最好的选择是在 json 响应中发回您的状态和消息。

```
{
    status: 9999,
    message: "User already exists"
} 
```

这是一个 SO 帖子，其中包含一些链接，可能会教您如何执行此操作： [Returning JSON object from an ASP.NET page](https://stackoverflow.com/questions/2422983/returning-json-object-from-an-asp-net-page)

# javascript - 之后如何重新获得程序控制权 打开 PDF 文件？

> ID：10604514
> 
> 赞同：2
> 
> 时间：2012-05-15T15:58:08.497
> 
> 标签：javascript, coldfusion

这是一个 ColdFusion 8 问题。

我有一个 cfm 页面，该页面有一个按钮，onClick 调用位于页面标题中的以下 Javascript 函数：

```
function confirm_expiration_letters() {
    var resultOfConfirm = confirm("Would you like to send expiration and reminder letters?");
    if (resultOfConfirm == true) {
        document.body.style.cursor = "wait";
        window.location="_expiration_letters.cfm";
    }
} 
```

在被调用的页面上，会生成一系列电子邮件，然后使用以下两行生成并显示 PDF 报告文件：

```
<cfheader name="Content-disposition" value="attachment;filename=#fileName#">
<cfcontent type="application/pdf" file="#docPath#/#fileName#" deletefile="true"> 
```

请注意，在 JS 函数中，光标变为“等待”。但是在上面的 cfheader 调用之后程序控件似乎丢失了，所以我找不到可以将光标重置回的任何地方： document.body.style.cursor = "default";

你对我可以把它放在哪里来关闭光标动画有什么想法吗？我尝试了多个地方，但它不起作用。一旦 cfheader 和 cfcontent 调用发生，对前一个窗口和光标的控制就会丢失，它就会出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:33:31.667

如果我理解正确，您希望在准备 PDF 时有一个“等待”光标，然后返回标准光标。

当您等待请求的文档时，Web 浏览器不会自动执行此操作吗？IE：一旦你做你的window.location，当文档加载时，光标会自动变为“等待”，然后一旦提供了文档，就会返回到“自动”。

这就是我所看到的（在运行与您类似的代码时）。这*不是*你看到的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:09:21.217

您可以在 cfheader 上方尝试类似的操作。

```
<script>
document.body.style.cursor = "default";
</script>
<cfflush/> 
```

问题是这样做可能会（可能会）搞砸 cfheaders，因为 cfflush 旨在刷新部分结果并将包含标题。但这是我唯一能想到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T17:23:52.773

无需更改光标，而是使用 HTML/动画 gif 显示加载消息。当 PDF 加载时，它将取代加载屏幕。

我建议有一个包含加载消息的隐藏 div，然后在需要时使用 JavaScript 使其显示。

这是一些JavaScript。这就是使用 jQuery 的方式。

```
function confirm_expiration_letters() {
var resultOfConfirm = confirm("Would you like to send expiration and reminder letters?");
if (resultOfConfirm == true) {
    $('#Loading').fadeIn(); //SHOW THE LOADING INDICATOR
    $.post('PDFGenerator.cfm', function(returnData){  // AJAX POST, CALLBACK
        //RETURN THE FILENAME OR LOCATION OF THE PDF
        var FileName = $.trim(returnData); // TRIM THE RETURNED DATA
        window.open("path_to_file/" + FileName,"_blank"); // NEW WINDOW
        $('#Loading').fadeOut();  // HIDE THE LOADING INDICATOR
      });
} 
```

}

# winforms - 如何在 CellFormatting 事件中通过 e.CellStyle.BackColor 检测应用于 DataGridView 的样式？

> ID：10604517
> 
> 赞同：1
> 
> 时间：2012-05-15T15:58:15.487
> 
> 标签：winforms, datagridview, backcolor

如果我们`e.CellStyle.BackColor`通过 DataGridView 的 CellFormatting 事件将样式（比如说）应用于某些行，那么是否可以在稍后阶段检测到该样式？

例如，目前我们使用通用代码块来处理任何和所有 DataGridView 的打印和导出到 Excel。到目前为止，代码还没有满足任何样式。

所以我们想把它添加进去。

如果我们检查`.DefaultCellStyle`行或单元格的，那么我们的样式不会显示（它只是显示为 0 或黑色，这是完全错误的）。

我认为这是因为我们通过 CellFormatting 事件应用了样式，而不是将其嵌入到 DefaultCellStyle 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:21:51.027

不幸的是，我找不到您的问题的完整解决方案，只能解决。

[使用MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)中的示例对 CellFormatting 事件进行了一些实验，结果我看到了您所看到的确切内容 -`BackColor`显然已设置，但`CellStyle`并未反映这一点。¹

我发现的解决方法是不使用该`DataGridViewCellFormattingEventArgs` `CellStyle`属性，而是直接进入网格。这有一个缺点，您现在需要手动处理您不想格式化单元格的情况。

我在下面有一些代码显示了这一点 - 它再次只是修改了 MSDN 代码：

```
void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    // If the column is the Artist column, check the
    // value.
    if (this.dataGridView1.Columns[e.ColumnIndex].Name == "Artist")
    {
        if (e.Value != null)
        {
            // Check for the string "pink" in the cell.
            string stringValue = (string)e.Value;
            stringValue = stringValue.ToLower();
            if ((stringValue.IndexOf("pink") > -1))
            {
                // With the commented line below we cannot access the new style
                //e.CellStyle.BackColor = Color.Pink;                    

                // With this line we can!
                dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Style.BackColor = Color.Pink;
            }
            else
            {
                // With the original MSDN code the else block to reset the 
                // cell style was not needed.
                dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Style.BackColor = dataGridView1.DefaultCellStyle.BackColor;
            }

        }
    }
} 
```

* * *

^(1.)我的理论是，这类似于人们对该`.Refresh()`方法的困惑，其中`DataGridView`有两个非常不同的视图，一个是屏幕上绘制的矩形，另一个是基础数据。使用`.Refresh()`仅重绘矩形的方法，您不会刷新数据。我认为就是这样 - 该`CellFormatting`事件仅在绘画期间格式化，并且对网格样式本身没有任何作用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-24T12:48:29.100

一种可能的解决方案是向通用打印代码块**添加第二个处理程序**（就在实际打印之前）。此处理程序应附加到`CellFormatting`事件并仅将其保存`e.cellstyle`在临时存储中（例如单元格样式字典）。

在您的原始单元格格式化期间应用的所有单元格样式都可以在您的通用打印代码中读取，而无需调整已绑定到 datagridview 的特定单元格格式化事件。在打印结束时，您可以再次移除处理程序。

另请参阅[有没有办法强制 DataGridView 为所有单元格触发其 CellFormatting 事件？](https://stackoverflow.com/q/10651702/180430)

# php - 打开所需文件失败

> ID：10604519
> 
> 赞同：2
> 
> 时间：2012-05-15T15:58:19.650
> 
> 标签：php

运行代码时出现以下错误，

> 警告：require_once(product.php) [function.require-once]：无法打开流：第 2 行的 C:\xampp\htdocs\pro\application\modules\products\controllers\test1.php 中没有这样的文件或目录
> 
> 致命错误：require_once() [function.require]：在 C:\xampp\htdocs\pro\application\modules\ 中打开所需的 'product.php' (include_path='.;C:\xampp\php\PEAR') 失败products\controllers\test1.php 在第 2 行

代码很简单，

```
<?php 
require_once "product.php";

    $array = "I am Fahad and I am testing this code";     
    $start = 4;
    $limit = 9;
    $value =  limit($array, $start, $limit);
    echo $value;
?> 
```

该文件`product.php`与我正在运行的文件位于同一目录中。它仍然给出错误。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T16:03:38.070

实际的当前目录并不*总是*与您正在运行的脚本相同，尤其是在您现在似乎正在使用的*框架中。*

为确保这正常工作，请使用

`require_once dirname(__FILE__) . '/product.php';`

在 5.3 上，您甚至可以说：

`require_once __DIR__ . '/product.php';`

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:00:37.200

检查您的文件名，尤其是区分大小写（product.php != Product.php）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:01:48.213

错误很简单，它在当前查找的位置找不到文件“product.php”。

就个人而言，我永远不会相信脚本会自动知道在哪里查看，我总是会尝试给出绝对路径。例如：

```
require_once $_SERVER['DOCUMENT_ROOT'] . '/somedir/anotherdir/product.php'; 
```

# python - twisted 的 Deferred 是如何实现的？

> ID：10604523
> 
> 赞同：2
> 
> 时间：2012-05-15T15:58:27.773
> 
> 标签：python, asynchronous, twisted, twisted.web

它会在下面产生一个新线程吗？如果经典 Web 服务器生成一个线程来服务 HTTP 请求并且使用 Twisted web 我必须在每次我想查询 mysql 时生成一个 Deferred() - 增益在哪里？如果它产生了一个线程，看起来它没有意义，那么它是如何实现的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T18:54:45.607

正如其他人所说，a`Deferred`本身只是对价值的承诺，以及价值到达时（或获取价值失败时）要做的事情的列表。

它们的工作原理是这样的：某个函数看到它想要返回的值还没有准备好。因此，它准备了一个 Deferred，然后以某种方式安排该 Deferred 在准备好后以该值*被回调*（“解雇”）。第二部分可能会引起您的困惑；Deferred 本身无法控制何时或如何被解雇。这是创建 Deferred 的任何人的责任。

在整个 Twisted 应用程序的上下文中，几乎所有内容都是基于事件的，并且事件由反应器管理。说你的代码 used `twisted.web.client.getPage()`，所以它现在有一个 Deferred ，它将与 http fetch 的结果一起被触发。这意味着`getPage()`启动了与 http 服务器的 tcp 对话，并在反应器中安装了处理程序，说“如果您在此 tcp 连接上看到任何流量，请在此协议对象上调用一个方法”。一旦 Protocol 对象看到它收到了您请求的整个页面，它就会触发您的 Deferred，然后通过该 Deferred 的回调链调用您自己的代码。

所以一切都是回调和钩子，一路下来。这就是为什么你永远不应该在 Twisted 应用程序中使用阻塞代码，除非在单独的线程上——因为它也会阻止其他所有内容被处理。

这有帮助吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:45:36.250

Python 中的 A`Deferred`不做任何事情，它与线程或进程或其他任何东西都没有任何关系。

它是对未来数据交付以及数据如何映射到接收回调函数的*承诺的抽象。*

[这有很好的记录。](http://twistedmatrix.com/documents/current/core/howto/defer.html)

如何 Twisted 实现异步行为在 Twisted 文档和新闻组档案中有很好的记录，简单的 Google 搜索将找到您需要的内容。它与 Deferred 的实现无关。如果您仍然不明白，您需要在另一个问题中询问具体信息，而不是在对此答案的评论中。

也就是说，就并发性而言，Twisted 已经死了，它永远不会扩展到多核处理器以及像 Erlang 这样的东西，当 Twisted 为我退出扩展时，我从 Twisted 转移到了这种东西。

# c# - WP7 - 使用 RX，订阅只触发一次但 OnNext() 总是触发？

> ID：10604527
> 
> 赞同：0
> 
> 时间：2012-05-15T15:58:38.637
> 
> 标签：c#, windows-phone-7, system.reactive

好的，我正在使用响应式扩展进行另一场比赛，特别是 wp7。

我正在查看 GeoCoordinateWatcher 位置更改事件，如下所示

```
var subject = new BehaviorSubject<GeoCoordinate>(GeoCoordinate.Unknown);
var watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.Default) { MovementThreshold = 0 };

watcher.PositionChanged += (o, args) =>
{
   var newLocation = args.Position.Location;

   if ((DateTime.Now - args.Position.Timestamp.DateTime) < locationTimeout)
   {
        subject.OnNext(newLocation);
    }
}; 
```

我像这样订阅

```
MyLocation.StartGettingLocations()
 .Subscribe(pos =>
 {
       // Do something with the position
       PlotLine.Locations.Add(pos);
       bingMap.SetView(pos, 15);
 }); 
```

该应用程序运行，但问题是订阅侧的代码只发生一次，如果我在主题中放置一个断点。OnNext（newLocation），我看到它不断被触发。

我究竟做错了什么？

[编辑]

好的，我可以看到出了什么问题，代码（这不是我的，我只是从中学习），使用 DistinctUntilChanged()。我假设，通过简要阅读，这会阻止向订阅者输出相同的价值？所以就我使用它的目的而言，位置跟踪，如果手机在同一个位置并且地理坐标没有改变，那么将它发送给用户是没有意义的，所以它只是阻止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T21:04:33.360

我怀疑评论中已经回答了这个问题（即`DistinctUntilChanged`，如果您想要位置，即使用户没有移动，也可以删除）。然而，这个问题有些令人困扰——它使用的是 Rx，但不是特别有效。

首先，有一种更简单的方法可以将事件转换为可观察对象（这反过来又使它们更易于使用）：

```
var watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.Default) { MovementThreshold = 0 };  
var geo = Observable.FromEventPattern<GeoPositionChangedEventArgs<GeoCoordinate>>(
                               ev => watcher.PositionChanged += ev, 
                               ev => watcher.PositionChanged -= ev)
                    .Select(ev => ev.EventArgs.Position); 
```

然后，要进行更改，不需要那些命令式的代码。只需这样做：

```
var changes = geo.Where(pos => (DateTime.Now - pos.Timestamp.DateTime) < locationTimeout)
                 .Select(pos => pos.Location)
                 .DistinctUntilChanged(); 
```

（您当然可以删除`DistinctUntilChanged`不在您发布的代码中的内容）。

现在您可以`changes`直接使用：

```
changes.Subscribe(loc =>
{
   PlotLine.Locations.Add(pos);
   bingMap.SetView(pos, 15);
}); 
```

没有必要管理一个实际上只是隐藏一组事件的主题。只需将事件转换为 Observables。然后因为你一直在使用 Observables，你可以访问许多组合器，这些组合器可以让你做比现在更多的事情。

# php - 需要帮助定位大型 16MB JSON 文件中的语法错误

> ID：10604533
> 
> 赞同：0
> 
> 时间：2012-05-15T15:58:56.853
> 
> 标签：php, json

我有一个 16MB JSON 文件，PHP 的 json_last_error() 告诉我有一个 JSON 语法错误。不幸的是，我不知道语法错误在哪里。有很多在线验证器，但我的数据包含敏感信息，我不愿意将它们放到网上。是否有可用的 JSON 验证器可供我下载？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:00:44.207

只需使用 Firefox 中的 Firebug 扩展程序，或内置的 Chrome 开发人员工具。

获取一个裸露的本地 HTML 页面，其中包含 json2.js 中包含的[javascript 文件。](https://github.com/douglascrockford/JSON-js)在浏览器中加载文件资源，并启用调试工具。

[JsonValidator](http://jsonvalidator.googlecode.com/svn/trunk/%20jsonvalidator/jsonvalidator.js)与 Firebug 控制台一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:03:43.987

[https://github.com/zaach/jsonlint](https://github.com/zaach/jsonlint)

[这是支持http://jsonlint.com/](http://jsonlint.com/)的 JSON 验证器的源代码- 如果您查看页面的右上角，您会找到指向它的链接。

# ffmpeg - FFMPEG 忽略比特率

> ID：10604534
> 
> 赞同：10
> 
> 时间：2012-05-15T15:58:57.967
> 
> 标签：ffmpeg, bitrate

我是视频编码的新手，所以请耐心等待。

我正在使用 FFMPEG。我有一个 640 x 350 的 mp4 文件，平均比特率约为 2000kb（我认为），文件大小为 80Mb。我想将其转换为比特率低得多（128kb）但宽度和高度相同的 ogv 文件。我正在使用以下命令...

```
ffmpeg -i input.mp4 -b:v 128k output.ogv 
```

...但 FFMPEG 似乎忽略了我的比特率选项并输出比特率约为 600kb 且文件大小约为 3Mb 的文件。

我可以使用 FFMPEG2THEORA 使用以下命令执行此操作...

```
ffmpeg2theora -V 128 input.mp4 -o output.ogv 
```

...但我想知道是否可以使用 FFMPEG。

有任何想法吗？

# 编辑

mark4o 解决了我的问题。事实证明，默认的音频编解码器增加了文件大小。将其更改为 libvorbis 已大大减少了文件大小。最终命令看起来像

```
ffmpeg -i input.mp4 -b:v 128k -b:a 128k -codec:a libvorbis output128.ogv 
```

*   `-i`= 输入文件
*   `-b:v`= 视频流的比特率
*   `-b:a`= 音频流的比特率
*   `-codec:a`= 覆盖默认音频编解码器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T19:47:50.013

`-b:v`只影响视频比特率。出于某种原因`ffmpeg`，默认使用 flac 音频编解码器进行`.ogv`输出（至少在某些版本中）。在这种情况下，flac 音频将比您的视频更大。

假设您想要 vorbis 音频，请在输出文件名之前使用选项`-codec:a libvorbis`（或在某些版本中）来指定它。`-acodec libvorbis`您可能还想为音频指定比特率，例如`-b:a 32k`（或`-ba 32k`）。如果您希望*总*比特率为 128kbps，请指定总计为 128k 的音频和视频比特率（或者如果您想补偿 ogg 容器开销，则要少一些）。

# android - Android - MediaPlayer 冻结/surfaceview

> ID：10604541
> 
> 赞同：0
> 
> 时间：2012-05-15T15:59:11.290
> 
> 标签：android, media-player

我尝试使用 MediaPlayer (Android ICS) 循环播放 2 个视频并每次交换它们。

它工作得很好，但在随机时间后应用程序冻结并且我收到错误：

```
[SurfaceView] connect : already connected (cur=3, req=3)
setVideoSurfaceTexture failed : -22 
```

这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {

        ...
        mMediaPlayer = new MediaPlayer();

        try {

            mMediaPlayer.setDataSource( currentPath );

            mMediaPlayer.setDisplay(mPreview.getHolder());

            mMediaPlayer.setOnBufferingUpdateListener(this);
            mMediaPlayer.setOnCompletionListener(this);
            mMediaPlayer.setOnPreparedListener(this);
            mMediaPlayer.setOnVideoSizeChangedListener(this);
            mMediaPlayer.setOnErrorListener(this);

            mMediaPlayer.prepare();

        } catch (Exception e) {
    }

    public void onPrepared(MediaPlayer mp) {

       mp.start();
    }

    public void onCompletion(MediaPlayer mp) {

    try {
        mMediaPlayer.reset();

        if (mCurrentPath == mPath1)
         mCurrentPath = mPath2;
        else
         mCurrentPath = mPath1;

        mMediaPlayer.setDataSource( mCurrentPath );

        mMediaPlayer.prepare();

    } catch (Exception e) {
    }

} 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:11:48.477

该`stringA == stringB`测试不会引起任何问题，但它只会测试是否`stringA`与`stringB`.

至于这个`MediaPlayer`问题，我几乎肯定第二个，当`MediaPlayer`播放完视频时，它会破坏（但不会取消）它使用的视图。我不知道为什么会这样，这给我带来了一个大问题（因为我无法从我的游戏循环线程中替换视图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T14:09:49.143

我使用`mediaPlayer.release()`，但这确实意味着您必须重新设置所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T19:20:51.107

为避免此问题，请执行以下操作

在您的 mediaPlayer 上设置 setOnErrorListener 并在您的 onErorr 方法中执行以下操作

```
mediaPlayer.setDisplay(null);
mediaPlayer.reset(); 
```

在此之后再次设置surfaceholder，然后再启动媒体播放器

```
mediaPlayer.setDisplay(surfaceHolder1);
mediaPlayer.start();  in onPrepared 
```

# javascript - 树枝文件中的 javascript 不执行

> ID：10604543
> 
> 赞同：0
> 
> 时间：2012-05-15T15:59:24.060
> 
> 标签：javascript, symfony

当我尝试将一些脚本放入 twig 文件时，最后它们不执行，例如：

```
{% block myJavascript %}
<script type="text/javascript">
<!--
alert("test");
{% endblock %} 
```

在我的 index.html.twig 中，
我在生成 html 代码中看到了它，但它只是不执行。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:19:35.377

那看起来不对。

关于什么：

```
{% block myJavascript %}
<script type="text/javascript">
  alert("test");
</script>
{% endblock %} 
```

如果 js 没有运行，也可能意味着在此代码之前触发了错误，因此请务必检查浏览器的控制台。

例如，这里的第一个警报会起作用，但第二个不会：

```
<script>
  alert("this works");
  var = forced_error
  alert("this won't work");
</script> 
```

# php - 您如何使用正则表达式扫描来自 drop、truncate 等命令的查询？

> ID：10604544
> 
> 赞同：-1
> 
> 时间：2012-05-15T15:59:28.380
> 
> 标签：php, sql, regex

我在使用正则表达式时遇到问题。

我正在尝试在查询字符串上使用 preg_match 。我希望它排除任何*删除*或*截断*序列，无论大小写（？i）在*'*或*`*之间并且在序列和两个符号之间有任意数量的字符，但我想捕捉这两个词中的任何一个不在两个标志之间。

如果您还没有猜到，我想检测输入是否正在尝试 DROP | 截断任何内容，但是如果不从非恶意输入中排除这些单词，就没有简单的方法可以做到这一点。

例如

我希望这不会触发：

```
SELECT * FROM `drop`
SELECT * FROM 'drop_truncate' -- drop drop 
```

但这要触发：

```
DROP TABLE `users` 
```

编辑：所以我的问题是关于正则表达式的，我收到了关于数据库安全的答案，毫无疑问，这个问题让你这么想，抱歉误导！不，我不关心我已经处理过的数据库安全性，我想要在这里检查是否有任何使用 drop 或 truncate 的 INTENT 并将其记录在某处。*叹*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:15:33.353

您完全以错误的方式处理数据库的安全性。

此处的此声明*但没有简单的方法可以做到这一点*是错误的。您只是希望以一种极其狭隘的狭隘思维方式来“保护”这种输入。

**不要让用户通过输入用户定义的 SQL 来破坏您的查询！！**

请至少研究[准备好的陈述。](https://stackoverflow.com/questions/1457131/php-pdo-prepared-statements)[PHP.net](http://www.php.net/manual/en/intro.pdo.php)在解释其 PDO 库方面有一个很好的开端。虽然我强烈建议反对，但如果您真的认为这是您最好的行动方案`"use preg_match to prevent malicious query intent"`，请参阅[AD7six的回答。](https://stackoverflow.com/questions/10604544/how-do-you-use-regex-to-scan-a-query-from-commands-like-drop-truncate-etc/10604729#10604729)（提示：不是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:48:26.597

您似乎将在同一个登录名下运行应用程序查询和用户生成的查询。这会迫使您彻底检查用户定义的查询。

相信这里的众多答案和评论。你会失败的。无论你想出什么聪明的理智检查，总有人会找到一种方法偷偷摸摸危险的东西过去。

因此，假设他们确实通过了您的健全性检查。你怎么能保护自己？
- 限制数据库本身的权限。

不要通过同一个登录名运行所有查询，而是有一个单独的登录名专门用于用户生成的查询。

拒绝对该登录名的 CREATE、DROP 和 EXECUTE 其他权限。拒绝对您不希望他们选择的数据的 SELECT 权限。使用您的数据库允许您执行的任何操作来控制新登录可以和/或不能执行的操作。

通过*至少有*两个不同的登录，你得到...
- 应用程序的登录仍然可以做它需要做的一切
- user_generated_query 登录不能做任何你不希望它做的事情

# python - 按值将文件分成相等的部分

> ID：10604546
> 
> 赞同：4
> 
> 时间：2012-05-15T15:59:33.113
> 
> 标签：python, bash

使用 bash 或 python (2.4.x)

我有一个文件 - 文件中有大约 100 行左右，文件的结构是这样的。

```
aaaaa,  100
aaaab,  75
aaaac,  150
aaaad,  135
aaaae,  144
aaaaf,  12
aaaag,  5
aaaah,  34
aaaai,  11
aaaaj,  43
aaaak,  88
aaaal,  3
baaaa,  25
baaab,  33
baaac,  87
baaad,  111
baaae,  45
baaaf,  99
baaag,  71
baaah,  68
baaai,  168
baaaj,  21
baaak,  11
baaal,  47
caaaa,  59
caaab,  85
caaac,  77
caaad,  33
caaae,  44
caaaf,  16
caaag,  111
caaah,  141
caaai,  87
caaaj,  59
caaak,  89
caaal,  3 
```

我想要做的是将它分成 12 列，每列具有大致相同数量的传感器，并且每列的总和接近相同。

换句话说，如果我把上面的列表像这样拆分。

```
aaaaa   100     aaaab   75      baaab   33
aaaai   11      baaah   68      baaac   87
aaaak   88      caaaa   59      caaac   77
       199             202              197

aaaah   34      baaaf   99      caaad   33
baaad   111     baaal   47      aaaac   150
aaaaj   43      caaae   44      caaaf   16
       188             190              199

aaaag   5       aaaaf   12      baaaa   25
aaaad   135     caaai   87      caaag   111
caaaa   59      caaak   89      baaag   71
       199                 188          207

aaaae   144     baaaj   21      caaaj   59
aaaal   3       baaak   11      caaah   141
baaae   45      baaai   168     caaal   3
       192              200              203 
```

它使 12 列相等的项目并且非常接近偶数。

我可以手动完成，但我们最终需要这样做几次。我什至不确定从哪里开始，除了将它放入一个数组中，计算数组中的项目并进行随机拆分。尽管如此，仍然停留在价值平衡上。

任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:43:57.127

如果您想要一个最佳解决方案，这对于大量输入来说不会很有趣。您正在寻找与 CS 中一些非常著名的难题相符的东西——[背包](http://en.wikipedia.org/wiki/Knapsack_problem)、[装箱](http://en.wikipedia.org/wiki/Bin_packing_problem)等。一些更简单、不太完美的解决方案可能已经足够接近了。

这并不准确，但是，鉴于您的示例数据集，我设法通过一个非常简单的方法获得了 214、197、194、199、205、182、195、192、199、199、206、208 的大小。它可能适用于也可能不适用于真实数据。

方法是：

1.  按大小排序列表
2.  将列表分为 3 部分 - 高、中和低
3.  将 high 的每个成员放在一个集合中。
4.  反转中低列表。
5.  将它们（以相反的顺序）放入现有集合中

随着您越来越接近最佳分区，解决方案可能会变得更加复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:09:12.830

有趣的问题，我认为您在寻找最佳解决方案时遇到了相当耗时的过程。您可以计算每次拆分的项目数以及它们应具有的平均值。在整数上对项目进行排序并在值仍低于平均值时取最大的数字，然后重复此过程直到您只需要再添加一个项目，现在选择最小的并尝试尽可能接近平均值（超过或低于无关紧要）。

如果在除最新之外的任何步骤中遇到困难（例如值 > 平均值），请返回并选择下一个最大的步骤。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T18:34:59.230

我写了两个非常简单的实现。第一个使用双端队列从右侧和左侧弹出（列表排序后）以将低值与高值放置。第二个是@Sean McSomething 建议的。

这是代码（quick'n'dirty - 不幸的是很少有评论）：

```
import math
import itertools
import collections

def sum_column(data):
    return sum(zip(*data)[1], 0.0)

def split_groups(sensors):
    sensors.sort(key=lambda item: item[1], reverse=True)
    per_group = len(sensors) // 12
    average = sum_column(sensors) / len(sensors)
    data = collections.deque(sensors)
    groups = [[] for i in xrange(12)]
    cycle = itertools.cycle(groups)
    try:
        while True:
            current = cycle.next()
            if len(current) == per_group - 1:
                if sum_column(current) < average:
                    current.append(data.popleft())
                else:
                    current.append(data.pop())
                continue
            current.append(data.popleft())
            current.append(data.pop())
    except IndexError:
        return groups

def split_groups2(sensors):
    sensors.sort(key=lambda item: item[1], reverse=True)
    groups = [[] for i in xrange(12)]
    cycle = itertools.cycle(groups)
    per_group = int(math.ceil(len(sensors) / 3.))
    partitions = [sensors[i:i + per_group] for i in xrange(0, len(sensors)
                                                           per_group)]
    medium, low = map(reversed, partitions[1:])
    for sensor, value in itertools.chain(partitions[0], medium, low):
        cycle.next().append((sensor, value))
    return groups

def format_groups(result):
    ret = []
    for group in result:
        tmp = []
        tmp.append('\n'.join('{0}   {1}'.format(k, v) for k, v in group))
        tmp.append(' ' * 8 + str(int(sum_column(group))))
        ret.append('\n'.join(tmp))
    return '\n\n'.join(ret)

if __name__ == '__main__':
    import sys

    implementation = split_groups
    if '--second' in sys.argv:
        sys.argv.remove('--second')
        implementation = split_groups2

    with open(sys.argv[1]) as fobj:
        sensors = []
        for line in fobj:
            sensor, value = line.strip().split(',  ')
            sensors.append((sensor, int(value)))
        sys.stdout.write(format_groups(split_groups(sensors)))
        sys.stdout.write('\n') 
```

要点：
[https ://gist.github.com/2703965](https://gist.github.com/2703965)

我把简单的部分（格式化）留给你了。现在它只是垂直打印它们（而不是按照您的要求垂直打印）。应该不会太难。

这是它可以达到的最好效果（使用两种实现）：

```
(max(sums) - min(sums)) / 2\. = 16.0 
```

这与示例相去甚远，但这是一个开始。您可以使用文件名和可选的开关从命令行启动它`--second`（以使用第二个实现）。我可以使用命令行解析器，但我习惯于 argparse，这在 Python 2.4 中不存在。所以我只是去那个尴尬的黑客。

示例运行：

```
$ python2 groupit.py filename.txt
baaai   168
caaal   3
aaaaj   43
        214

aaaac   150
aaaal   3
caaae   44
        197

aaaae   144
aaaag   5
baaae   45
        194

caaah   141
baaak   11
baaal   47
        199

aaaad   135
aaaai   11
caaaj   59
        205

baaad   111
aaaaf   12
caaaa   59
        182

caaag   111
caaaf   16
baaah   68
        195

aaaaa   100
baaaj   21
baaag   71
        192

baaaf   99
baaaa   25
aaaab   75
        199

caaak   89
caaad   33
caaac   77
        199

aaaak   88
baaab   33
caaab   85
        206

baaac   87
aaaah   34
caaai   87
        208
$ python2 groupit.py --second filename.txt
baaai   168
caaal   3
aaaaj   43
        214

aaaac   150
aaaal   3
caaae   44
        197

aaaae   144
aaaag   5
baaae   45
        194

caaah   141
baaak   11
baaal   47
        199

aaaad   135
aaaai   11
caaaj   59
        205

baaad   111
aaaaf   12
caaaa   59
        182

caaag   111
caaaf   16
baaah   68
        195

aaaaa   100
baaaj   21
baaag   71
        192

baaaf   99
baaaa   25
aaaab   75
        199

caaak   89
caaad   33
caaac   77
        199

aaaak   88
baaab   33
caaab   85
        206

baaac   87
aaaah   34
caaai   87
        208 
```

对于问题中的示例，这两种算法给出了完全相同的答案。如果您可以提供更多测试用例，我会尝试改进它们。我在 Python 2.7 上测试了脚本，因为我没有安装 2.4。
对不起，答案很长。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T18:55:25.757

到目前为止，这是我想出的。我认为它非常接近，并且没有真正高价值的东西有点抵消 - 它很接近。

很高兴听到任何建议，使其更加 Pythonic。

文件：columnsplit.py

```
#!/usr/bin/python
import sys, operator

# usage
# columnsplit.py <filename> <#cols>
# columnsplit.py test.csv 12
#

#determine number of devices per column
def devicelisting(fulllist,percolumn):
  devicelist=[]
  fobj=open(fulllist,'r')
  for line in fobj:
    (key, val) = line.split(',')
    devicelist.append((key,int(val)))
  devicespercol=(len(devicelist)/int(percolumn))
  return(devicelist,devicespercol)

def devicesplit(fulllist,numcolumns,roundnum):
  if roundnum == 0:
    devices=sorted(fulllist, key=lambda device: device[1], reverse=True)
    devicestemp=devices
  else:
    devices=sorted(fulllist, key=lambda device: device[1])
    devicestemp=devices
  deviceslice=[]
  for idx, val in zip(range(numcolumns), devices):
    deviceslice.append(val)
    devicestemp.remove(val)
  return(deviceslice,devicestemp)

def makecolumns(roundnumber,percol):
  column=[]
  for i in range(percol):
    exec('tempslice=deviceslice%s' % i)
    column.append(tempslice[roundnumber])
  return(column)

# what this is going to do is generate how many devices will fill each of the intended
# number of columns.  What is left over will be run again against the lowest value of columns

if __name__ == '__main__':
  tempslice=[]
  devices,percol=devicelisting(sys.argv[1],sys.argv[2])
  # devices is the devices/value as tuples nested in a list
  # percol is going to be how many devices per column
  # you can len(devices) to count how many devices we have

  # prints out the device list in reverse.
  # print sorted(devices, key=lambda x: x[1], reverse=True)

  # what we will need to do here is split the device list into number of desired slices.  i.e. if we want 12 columns
  # and we have 108 devices there should be 9 slices of 12.
  # this will leave a remaining slice - of less than 9 which will be added to the 12 columns in order of smallest column first

  devicesleft=devices
  numcolumns=int(sys.argv[2])
  for i in range(percol):
    sendcol,devicesleft=devicesplit(devicesleft,numcolumns,i)
    exec('deviceslice%s=sendcol' % i)
# and finally create the columns
  for i in range(0,numcolumns):
    sendcol=makecolumns(i,percol)
    exec('column%s=sendcol' % i)

  # add the left over devices
  j=numcolumns
  # sort remaining reverse.
  devices=sorted(devicesleft, key=lambda device: device[1], reverse=True)
  for i in range(len(devices)):
    j-=1
    exec('column%s.append(devices[i])' % j)

  # prints out the resulting columns
  for i in range(0,numcolumns):
    exec('tempcol=column%s' % i)
    print tempcol
    print sum([pair[1] for pair in tempcol]) 
```

我跑过的测试文件。

文件：test44a.csv

```
SQCIEOEO,1272
HIKTXYZH,281
JZHRZXKX,5793
UBGTOLUX,147
WBVYFNBN,9
VMHTKHBU,32
GILGFWDA,1334
YKUMWOKT,2066
PFSVTUIP,51
GPJRWKMD,673
TYJZUNZS,27
XTFUHPNX,2102
VFSPABFG,65
ROYOZKRS,189
IARDNRVL,587
LBFSQTQL,973
ZJBZKGFB,21301
UEPUOHMW,20
HEAVWVGH,0
XMANFQZE,719
ZADKGIMB,82
NCVBJIYR,27
NYMJUSQR,20646
EQFKHEOH,2050
ERRLAENN,19
HIPRQNIE,12557
MVNHODYT,20
UEDBIRIN,14
JAZJEMXL,28
UMDLALPN,36
GCUUGTNA,0
XRCGIKTR,12
KSBPEYBZ,20657
LELLPAYW,43792
DTRKMFLK,73
WNQEXJWI,41
CYXHXYHI,10
CSUSTTOX,120
NFHZLSJH,23
FAMDKJLM,25
HIUEHBNJ,261
UIBNCQKP,40
WSPHKYOQ,30025
ZBUJKFWR,0
OQWVSKFM,49
SHZUXKKU,21
CZBMYQDX,45
RXGBCCTR,17
SPMLASXS,15
ZWNXGXRI,59
WTVUJZSB,22
WYDZBWQU,19100
MDFMVCFV,6133
ZSSGQJPM,25
CKHMJZOG,85
YRFZOWTB,28
AYNWBSRA,14
LJGBTVOW,13110
GWJPWXWU,16
PCUDYNEY,179
MSVNLMOX,62
WUYPPNMW,2285
KVLGTIBI,11
KWMIKQHW,11
JDKUPYRM,1851
DARXQYDY,68
UUPXIDEP,139
SKQZMTFY,4377
ZEPOWAEA,189
BWXRVAPP,167
VFMDIRTA,561
BKANEGMD,2122
LBRICWID,1775
TGVOGLDC,3650
QQGZHAAJ,81
KAXPHJSS,122
LKAOHISA,32
ONOVZSYQ,41
IEPQEPZP,62
QWEXGXQS,0
IQGPZYQO,15
MEJLXIBG,10
MRWRHWHX,10
TMVAJLSS,57
BYIAXYOJ,173
DYUAGWGT,248
ODLVZSST,21
EOTOZLHA,6476
KPBHOQQR,30
OLSVIYOW,539
CZSCSLVX,17
ZPMYBTZL,11
IATWRKOF,12507
WGBEFQBH,41
PUJIFEFE,382
TSDULCGU,9070
DARUKFAG,209
MBLRRNYH,250
IIQNNWSG,25
OWBZYIUC,1808
ILXTRXZD,2012
ZLVRZUYH,269
CPVPLOWZ,108
KYZJGTMO,635
EJHWGHZG,25
TUXTOWBR,11
LXGXLCWW,2313
AVFHPRWT,915
AEPHMPNF,32
KLZZHAQT,56
XWQJZNFA,611
JKHYCDSC,1455 
```

运行它的命令：python columnsplit.py test44a 12（12 是所需列的数量）。

示例输出列的值为第一列。：

```
1) 45577 [('LELLPAYW', 43792), ('HEAVWVGH', 0), ('XRCGIKTR', 12), ('ODLVZSST', 21), ('VMHTKHBU', 32), ('TMVAJLSS', 57), ('KAXPHJSS', 122), ('ZLVRZUYH', 269), ('SQCIEOEO', 1272)]

2) 31906 [('WSPHKYOQ', 30025), ('GCUUGTNA', 0), ('UEDBIRIN', 14), ('WTVUJZSB', 22), ('LKAOHISA', 32), ('ZWNXGXRI', 59), ('UUPXIDEP', 139), ('HIKTXYZH', 281), ('GILGFWDA', 1334)]

3) 23416 [('ZJBZKGFB', 21301), ('ZBUJKFWR', 0), ('AYNWBSRA', 14), ('NFHZLSJH', 23), ('AEPHMPNF', 32), ('MSVNLMOX', 62), ('UBGTOLUX', 147), ('PUJIFEFE', 382), ('JKHYCDSC', 1455)]

4) 23276 [('KSBPEYBZ', 20657), ('QWEXGXQS', 0), ('SPMLASXS', 15), ('FAMDKJLM', 25), ('UMDLALPN', 36), ('IEPQEPZP', 62), ('BWXRVAPP', 167), ('OLSVIYOW', 539), ('LBRICWID', 1775)]

5) 23342 [('NYMJUSQR', 20646), ('WBVYFNBN', 9), ('IQGPZYQO', 15), ('ZSSGQJPM', 25), ('UIBNCQKP', 40), ('VFSPABFG', 65), ('BYIAXYOJ', 173), ('VFMDIRTA', 561), ('OWBZYIUC', 1808)]

6) 21877 [('WYDZBWQU', 19100), ('CYXHXYHI', 10), ('GWJPWXWU', 16), ('IIQNNWSG', 25), ('WNQEXJWI', 41), ('DARXQYDY', 68), ('PCUDYNEY', 179), ('IARDNRVL', 587), ('JDKUPYRM', 1851)]

7) 16088 [('LJGBTVOW', 13110), ('MEJLXIBG', 10), ('RXGBCCTR', 17), ('EJHWGHZG', 25), ('ONOVZSYQ', 41), ('DTRKMFLK', 73), ('ROYOZKRS', 189), ('XWQJZNFA', 611), ('ILXTRXZD', 2012)]

8) 15607 [('HIPRQNIE', 12557), ('MRWRHWHX', 10), ('CZSCSLVX', 17), ('TYJZUNZS', 27), ('WGBEFQBH', 41), ('QQGZHAAJ', 81), ('ZEPOWAEA', 189), ('KYZJGTMO', 635), ('EQFKHEOH', 2050)]

9) 17952 [('IATWRKOF', 12507), ('KVLGTIBI', 11), ('ERRLAENN', 19), ('NCVBJIYR', 27), ('CZBMYQDX', 45), ('ZADKGIMB', 82), ('DARUKFAG', 209), ('GPJRWKMD', 673), ('YKUMWOKT', 2066), ('LXGXLCWW', 2313)]

10) 15982 [('TSDULCGU', 9070), ('KWMIKQHW', 11), ('UEPUOHMW', 20), ('JAZJEMXL', 28), ('OQWVSKFM', 49), ('CKHMJZOG', 85), ('DYUAGWGT', 248), ('XMANFQZE', 719), ('XTFUHPNX', 2102), ('TGVOGLDC', 3650)]

11) 14358 [('EOTOZLHA', 6476), ('ZPMYBTZL', 11), ('MVNHODYT', 20), ('YRFZOWTB', 28), ('PFSVTUIP', 51), ('CPVPLOWZ', 108), ('MBLRRNYH', 250), ('AVFHPRWT', 915), ('BKANEGMD', 2122), ('SKQZMTFY', 4377)]

12) 15683 [('MDFMVCFV', 6133), ('TUXTOWBR', 11), ('SHZUXKKU', 21), ('KPBHOQQR', 30), ('KLZZHAQT', 56), ('CSUSTTOX', 120), ('HIUEHBNJ', 261), ('LBFSQTQL', 973), ('WUYPPNMW', 2285), ('JZHRZXKX', 5793)] 
```

# c++ - c ++使基类在子类中使用覆盖的方法

> ID：10604547
> 
> 赞同：2
> 
> 时间：2012-05-15T15:59:35.407
> 
> 标签：c++, inheritance, polymorphism

我正在尝试覆盖基类中另一个方法使用的基类方法；但是，当派生类调用基类的 using 方法时，派生的 used-method 永远不会执行，而是调用基类的 used-method。这是一个例子：

```
#include <iostream>
using namespace std;
class Base {
public:
    Base() {}
    virtual ~Base() {}
    void printLeft() { cout << this->getLeft(); }
    int getLeft() { return 0; }
};

class Derived: public Base {
public:
    Derived() {}
    virtual ~Derived() {}
    int getLeft() { return 1; }
};
int main(int argc, char *argv[]) {
    Derived d = Derived();
    d.printLeft();
} 
```

运行`main()`prints `0`，表明使用了`Base`'s`getLeft()`方法而不是派生对象的方法。

**当从 Derived 的实例**`Derived::getLeft()`调用时，如何更改此代码？

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T16:02:33.503

你只需要使`getLeft`虚拟：

```
class Base {
public:
    Base() {}
    virtual ~Base() {}
    void printLeft() { cout << this->getLeft(); }
    virtual int getLeft() { return 0; }
}; 
```

默认情况下，在 C++ 中，成员函数不是虚拟的。也就是说，您不能在子类中覆盖它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:13:51.483

For non-virtual functions, the static type of the object is used to determine which class's method is called.

In your case, you are calling `getLeft()` from `Base::printLeft()`. The type of `this` is `Base*`, so the function called will be `Base::getLeft()`.

The way around this is to use the `virtual` keyword. In that case, the virtual function table will be used to determine which version of `getLeft()` to call, in this case `Derived.`

You can trigger this behavior by prepending `virtual` to the declarations of `printLeft` in both `Base` and `Derived`.**

# c - 初始化一个多维数组，然后在 C 中打印内容

> ID：10604552
> 
> 赞同：3
> 
> 时间：2012-05-15T15:59:45.560
> 
> 标签：c, arrays, multidimensional-array

```
#include <stdio.h>

int main (void)
{

    int weiners[3][2] = {
                       {5, 10, 8},
                       {8, 4, 7},
                       {3, 1, 2},
                       {0, 7, 9}
                     };
    int x,y;

    printf("Weiners:\n_______\n");

    for(x=0;x<=3;++x){
        for(y=0;y<=2;++y){
        printf("%i, ", weiners[x][y]);
        }
        printf("\n");
    }

    return 0;

} 
```

这只是为了简单地创建一个小的多维数组，然后使用循环打印内容。它的格式正确，前三列是正确的，后面的数字非常不正确。我不确定这里有什么问题。

[http://i.stack.imgur.com/TSX2M.png](http://i.stack.imgur.com/TSX2M.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:04:13.347

您正在定义 a`int[3][2]`并使用 4 x 3 项对其进行初始化，因此一旦循环到达第 6 个值之后，最后一项就未定义。

gcc 抱怨它：

```
array.c: In function `main':
array.c:7: warning: excess elements in array initializer
array.c:7: warning: (near initialization for `weiners[0]')
array.c:8: warning: excess elements in array initializer
array.c:8: warning: (near initialization for `weiners[1]')
array.c:9: warning: excess elements in array initializer
array.c:9: warning: (near initialization for `weiners[2]')
array.c:10: warning: excess elements in array initializer
array.c:10: warning: (near initialization for `weiners[3]')
array.c:10: warning: excess elements in array initializer
array.c:10: warning: (near initialization for `weiners') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:02:13.080

您的数组的声明不正确（它是 4x3 而不是 3x2）：

```
int weiners[4][3] = {
                   {5, 10, 8},
                   {8, 4, 7},
                   {3, 1, 2},
                   {0, 7, 9}
                 }; 
```

或者，您可以使用实际上是 3x2（而不是 4x3）的数组，然后修复您的 for 循环以使用匹配的索引：

```
for(x=0;x<3;++x) {
    for(y=0;y<2;++y) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:04:16.263

您的数组需要是 [4][3]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T16:06:35.993

你给出了错误的行数和列数，给出的格式是：-

```
int array[rows][colums] 
```

这里行=4，列=3；

相应地更改循环。

# javascript - 从 jQuery datepicker 获取两种日期格式？

> ID：10604554
> 
> 赞同：2
> 
> 时间：2012-05-15T15:59:56.790
> 
> 标签：javascript, jquery, user-interface, datepicker

我有一个简单的日期选择器文本字段：

```
<input type="text" name="book_on" id="book_on" value="<?php echo $today; ?>" 
```

jQuery如下：

```
$('#book_on').datepicker({
        dateFormat: 'mm/dd/y'
      }); 
```

This is all very straight-forward, but I also need to show the chosen date in a different format elsewhere on the page - specifically, when a date is chosen, I need to show which day of the week it is in a `<span>`on the page .

这将是`dateFormat: 'D'`但我找不到让日期选择器返回第二种日期格式的方法。我不需要编写整个代码，如果您可以使用上面的函数来提醒所选日期的星期几，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T17:34:12.800

聚会有点晚了，但我相信真正的解决方案是利用两个日期选择器属性

```
 altField: "#your-span",
    altFormat: "D", 
```

[设置这些选项](http://jqueryui.com/demos/datepicker/#option-altFormat)将自动`#your-span`以正确的格式填充元素。无需额外代码！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T16:07:40.953

您是否正在寻找类似**[jsFiddle 示例](http://jsfiddle.net/j08691/CbKey/)**的内容？

jQuery：

```
var days = new Array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');
$('#book_on').datepicker({
    dateFormat: 'mm/dd/y',
    onSelect: function(event, ui) {
        var dayOfWeek = $(this).datepicker('getDate').getUTCDay();
        $('#day').val(days[dayOfWeek]);
    }
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T16:09:05.840

您可以使用`onSelect`事件并这样做：

```
var weekday = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
$("#book_on").datepicker({
    onSelect: function(dateText, inst) {
        var day = new Date(dateText).getDay();
        $("span").text(weekday[day]);
    }
});​ 
```

**演示：http:** [//jsfiddle.net/LXCMD/](http://jsfiddle.net/LXCMD/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T16:12:25.583

> 这将是 dateFormat: 'D' 但我找不到让日期选择器返回第二种日期格式的方法。

Datepicker 插件有一个[实用功能](http://docs.jquery.com/UI/Datepicker/formatDate)，专门用于以您想要的任何格式输出日期，例如

```
var t = $('#picker').datepicker('getDate');
var myDate = $.datepicker.formatDate('D', t); 
```

因此：

```
$('#book_on').datepicker({
    dateFormat: 'mm/dd/y',
    onSelect: function(dateText, inst) {
        var date = $(this).datepicker('getDate');
        $('#span').text($.datepicker.formatDate('D', date));
    }
});​ 
```

# r - Windows 中的并行 for 循环

> ID：10604555
> 
> 赞同：6
> 
> 时间：2012-05-15T15:59:57.513
> 
> 标签：r

我对远处的行业实力数据库进行了许多 SQL 查询，但接收结果需要很长时间。当我的带有 R 的计算机几乎靠近数据库时，它的速度要快得多，这让我相信这是我的计算机和数据库之间的延迟是瓶颈，并且运行并行查询可能会加快速度。我们在不同的大陆。

这是一个不并行的工作版本：

```
doQueries <- function(filenameX, inp1, inp2) {
  print(paste("Starting:", inp1, inp2, ",saving to", filenameX, sep=" "))
  # Here should the query be (using RODBC)
  # save(queryresults, file="filenameX")
}

input.rows <- cbind(c("file1.rda","file2.rda","file3.rda"),c("A","B","C"),c(12,13,14))

for (i in 1:nrow(input.rows)) {
  doQueries(filenameX=input.rows[i,1], inp1=input.rows[i,2], inp2=input.rows[i,3])
} 
```

我已尝试使用以下代码，但 foreach-library 似乎不可用，正如我从阅读 CRAN 中了解到的那样，parallel 正在替换早期的并行包（“包'foreach'不可用（对于 R 版本 2.15\. 0)")。

```
library(parallel)
library(foreach)
foreach (i=1:nrow(input.rows)) %dopar% {
  doQueries(filenameX=input.rows[i,1], inp1=input.rows[i,2], inp2=input.rows[i,3])
} 
```

我应该怎么做呢？

感谢 Stackoverflow 上的所有贡献者！

/克里斯

更新：感谢 nograpes，我设法加载了库。以下代码似乎有效：

```
library(RODBC)
library(doParallel)
library(foreach)

# odbcCloseAll()
# my_conn <- odbcConnect("database", uid="xx", pwd="yy", case="nochange")

doQueries <- function(filenameX, inp1, inp2) {
  print(paste("Starting:", inp1, inp2, ",saving to", filenameX, sep=" "))
  # sql.test <- RODBC::sqlQuery(my_conn, "SELECT * FROM zzz LIMIT 100", rows_at_time=1024)
  # save(sql.test, file="filenameX")
}

input.rows <- cbind(c("file1.rda","file2.rda","file3.rda"),c("A","B","C"),c(12,13,14))

cl <- makeCluster(3)
registerDoParallel(cl)

foreach (i=1:nrow(input.rows)) %dopar% {
  doQueries(filenameX=input.rows[i,1], inp1=input.rows[i,2], inp2=input.rows[i,3])
}

stopCluster(cl) 
```

但是当我包含实际的 SQL 查询时，会出现此错误消息：{ 中的错误：任务 1 失败 - “第一个参数不是开放的 RODBC 通道”

难道这在概念上不起作用？RODBC 一次不能处理多个查询？

我真的很感谢所有的支持。

/克里斯

更新 2：非常感谢 nograpes 提供的非常好的和令人印象深刻的答案。很难判断数据传输本身是否更快（我认为总吞吐量快 20%），但我发现由于查询（大约 100 个）具有不同的响应时间，并且需要后处理（我将其包含在函数中在保存之前），我可以更好地利用链路和本地 CPU。即，当时只有一个查询，CPU 在数据传输过程中几乎没有使用，然后在 CPU 工作时链接将保持安静。通过并行查询，我看到数据到达并且 CPU 同时工作。总的来说，它变得更快了。非常感谢！

/克里斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T16:15:48.657

正如我在评论中提到的，这种技术可能不会更快。为了回答您的问题，该`foreach`软件包适用于您的 R 版本。也许您选择的存储库尚未更新。尝试这个：

```
install.packages('foreach', repos='http://cran.us.r-project.org') 
```

这应该安装软件包。如果这不起作用，请[在此处](http://cran.r-project.org/web/packages/foreach/index.html)获取您的操作系统的二进制文件，然后通过菜单安装它。

如果瓶颈是网络连接，那么你只能通过减少你放在网络上的东西来加快这个过程。一个想法是远程连接到数据库服务器，让它将查询转储到一个文件（在服务器上），压缩它，然后将它下载到您的计算机，然后让 R 解压缩并加载它。听起来很多，但您可能可以在 R 中完成整个过程。

跟进您的更新，您的陈述中似乎没有包含`.packages`论点`foreach`。这就是为什么你必须在`sqlQuery`函数前面加上`RODBC::`. 有必要指定循环需要哪些包，因为我认为它本质上为每个节点启动了一个新的 R 会话，并且每个会话都需要使用包进行初始化。同样，您无法访问`my_conn`，因为它在循环之外，您需要在循环内部创建，以便每个节点都有自己的副本。

```
library(RODBC)
library(foreach)
library(doParallel)
setwd('C:/Users/x/Desktop')

doQueries <- function(filenameX) {
  sql.text<-sqlQuery(my_conn, 'SELECT * FROM table;')
  save(sql.text, file=filenameX)
}

cl <- makeCluster(2)
registerDoParallel(cl)

foreach (i=1:2, .packages='RODBC') %dopar% {
  my_conn <- odbcConnect("db", uid="user", pwd="pass")
  doQueries(filenameX=paste('file_',i,sep=''))
} 
```

但是，就像我提到的那样，这可能不会更快。

# javascript - javascript getelementbyid 无法正常工作，因为 id 已更改

> ID：10604557
> 
> 赞同：1
> 
> 时间：2012-05-15T16:00:00.970
> 
> 标签：javascript, asp.net

好的，我想获取文本框的值，但是当我执行 javascript 代码 getElementByID() 时，文本框的 id 从原始值更改了我现在如何获取它？我什至尝试将 cliendIdMode="Static" 不起作用。

```
<script type="text/javascript" language="javascript">
    function uploadFileChange() {
        var tbox = document.getElementById('txtFileName').value;
        var fu = document.getElementById("FileUpload1").value;
        if (tbox != fu) {
            document.getElementById('txtFileName').value = document.getElementById("FileUpload1").value;
        }
        return false;
    }
</script> 
```

原始文本框是：

```
<asp:TextBox ID="txtFileName" CssClass="textbox" ClientIDMode="Static" runat="server"
                        Width="300px" ReadOnly="true" /> 
```

但后来变成了：

```
<input name="fuFileInfo$txtFileName" type="text" readonly="readonly" id="fuFileInfo_txtFileName" class="textbox" ClientIDMode="Static" onclick="fuFileInfo_FileUpload1.click();return false;" style="width:300px;" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:02:01.393

ASP.NET 以不同于服务器端标记的方式呈现 ID。

因此用于[`ClientID`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid%28v=vs.71%29.aspx)获取渲染的 ID：

```
var tbox = document.getElementById('<%=txtFileName.ClientID %>').value;
var fu = document.getElementById('<%=FileUpload1.ClientID %>').value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:41:12.767

如果你想使用 jquery 来获取你可以做的值

`var tbox = $("[id$='txtFileName']").val();`

这将做的是获取 id 以（因此`$`）您正在寻找的 id 结尾的元素。

# c# - Windows Azure：序列化 TableServiceEntity 继承的对象

> ID：10604563
> 
> 赞同：1
> 
> 时间：2012-05-15T16:00:33.863
> 
> 标签：c#, .net

我想让这个类序列化，所以我可以将它作为 httpresponsemessage 的主体发送：

```
 [DataContract]
public class Subscription : TableServiceEntity
{
    [DataMember]
    public string SubscriptionId { get; set; }
    [DataMember]
    public bool IsAdmin { get; set; }
} 
```

我想使用它的方式：

```
 IList<Subscription> subs = ... ;

        return new HttpResponseMessage<IList<Subscription>>(subs); 
```

它可以编译，但是当我运行这部分时，我收到一条错误消息，指出 IList 无法序列化，我必须将其添加到已知类型集合中。我猜 TableServiceEntity 的成员不可序列化，这就是为什么我不能序列化整个列表，但我不知道如何解决这个问题。

有任何想法吗？

真挚地，

佐利

**修改**

正如第一条评论中所说，我添加了一个新类，它看起来像这样：

```
 [DataServiceEntity]
[DataContract]
[KnownType(typeof(Subscription))]
public abstract class SerializableTableServiceEntity
{
    [DataMember]
    public string PartitionKey { get; set; }

    [DataMember]
    public string RowKey { get; set; }

    [DataMember]
    public DateTime Timestamp { get; set; }
}

[DataContract]
public class Subscription : SerializableTableServiceEntity
{
    [DataMember]
    public string SubscriptionId { get; set; }
    [DataMember]
    public bool IsAdmin { get; set; }
} 
```

我仍然收到错误消息说

> ```
> add type to known type collection and to use the serviceknowntypeattribute before the operations 
> ```

我使用的唯一操作是：

```
public class DBModelServiceContext : TableServiceContext
{
    public DBModelServiceContext(string baseAddress, StorageCredentials credentials)
        : base(baseAddress, credentials) {  }

    public IList<Subscription> Subscriptions
    {
        get
        {
            return this.CreateQuery<Subscription>("Subscriptions").ToArray();
        }
    }
} 
```

**修改 2**

我的界面如下所示：

```
 [OperationContract]
    [ServiceKnownType(typeof(IList<Subscription>))] 
    [WebGet(UriTemplate = "subscription/{value}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]
    HttpResponseMessage<IList<Subscription>> GetSubscription(string value); 
```

背后的实现是：

```
 public HttpResponseMessage<IList<Subscription>> GetSubscription(string value)
    {                        
        var account = CloudStorageAccount.FromConfigurationSetting("DataConnectionString");
        var context = new DBModelServiceContext(account.TableEndpoint.ToString(), account.Credentials);
        IList<Subscription> subs = context.Subscriptions;

        return new HttpResponseMessage<IList<Subscription>>(subs);} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:16:42.143

我设法找到了解决方案：

自制类（在我的例子中：订阅）必须从自定义 TableServiceEntity 类继承，该类具有 datacontract、datamember 和 knowntype 属性：

```
[DataContract]    
[KnownType(typeof(Subscription))]
public abstract class SerializableTableServiceEntity
{
    [DataMember]
    public string PartitionKey { get; set; }

    [DataMember]
    public string RowKey { get; set; }

    [DataMember]
    public DateTime Timestamp { get; set; }
}

 [DataContract]
    public class Subscription : SerializableTableServiceEntity
    {
        [DataMember]
        public string SubscriptionId { get; set; }
        [DataMember]
        public bool IsAdmin { get; set; }
    } 
```

关键是：**您不会将结果作为 HttpResponseMessage 发回，** 无论您的返回类型是什么，它都将始终是 HttpResponseMessage。如果您的返回类型是 IList，那么它将被序列化并自动放入响应的正文中。所以就按原样寄回去吧。如果要修改回复的状态码，可以这样完成：

```
WebOperationContext.Current.OutgoingResponse.StatusCode = HttpStatusCode.Forbidden; 
```

您可以从请求/响应正文/标头中获取/设置所有内容

WebOperationContext.Current

我希望它有帮助！

**添加：**

但请注意，如果您从 azure 数据库中获取 selfmadeclass（在我的情况下为订阅）类型的对象，您将无法删除它：

```
Subscription s = (from e in this.CreateQuery<Subscription>("Subscriptions")
                                       where e.SubscriptionId == subscriptionID
                                       select e).FirstOrDefault();
context.DeleteObject(s); //THIS WILL THROW AN EXCEPTION 
```

相反，返回类型必须是从 TableServiceEntity 继承的东西，您只能删除它。

请，如果我错了，请更新此帖子！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:19:49.437

您应该创建自己的类并告诉 azure 使用它，而不是从 TableServiceEntity 继承：

```
[DataServiceEntity]
[DataContract]
public class MyClass
{
    [DataMember]
    public string PartitionKey { get; set; }

    [DataMember]
    public string RowKey { get; set; }

    [DataMember]
    public DateTime Timestamp { get; set; }
} 
```

关键点是**DataServiceEntity**属性，它允许您将此类与 azure 一起使用。

# javascript - 如何将鼠标悬停在图像上但更改表格中的多个图像

> ID：10604564
> 
> 赞同：2
> 
> 时间：2012-05-15T16:00:36.090
> 
> 标签：javascript, jquery

我有一张桌子，里面有 50 张 (10x5) 的图片，所有图片都褪色了，当我将鼠标悬停在一张图片上时，它会变亮以脱颖而出。我正在努力解决的问题是将鼠标悬停在一张图片上，并且表格中的多张图片也很突出。（我想突出的相关图片在表中是随机的）。

到目前为止我的脚本是这样的；

```
<script type="text/javascript">
        $(function() {
            $('.imgOpa').each(function() {
                $(this).hover(
                    function() {
                        $(this).stop().animate({ opacity: 1.0 }, 800);
                    },
                   function() {
                       $(this).stop().animate({ opacity: 0.5 }, 800);
                   })
                });
        });
</script> 
```

如果我能得到任何建议，那就太好了，即使它告诉我这是不可能的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:03:11.187

试试这个，`$(this)`将悬停功能内的更改为一个类...然后具有相同类的所有图像都将被动画化

```
$('.imgOpa').each(function () {
    $(this).hover( function () {
        $('.class').stop().animate({opacity: 1.0}, 800);
    }, function () {
        $('.class').stop().animate({opacity: 0.5}, 800);
    })
}); 
```

或者为了更好地为相关图像设置动画，请使用`data`

```
<img src="blah.jpg" class="imgOpa someclass" data-assoc="someclass"/>
<img src="blah.jpg" class="imgOpa someclass"/>
<img src="blah.jpg" class="imgOpa someotherclass"/> 
```

然后

```
$('.imgOpa').each(function () {
    $(this).hover( function () {
        $('.' + $(this).data('assoc')).stop().animate({opacity: 1.0}, 800);
    }, function () {
        $('.' + $(this).data('assoc')).stop().animate({opacity: 0.5}, 800);
    })
}); 
```

当图像悬停时，这将为所有带有类的图像`someclass`（即第一张和第二张图像，但不是第三张）设置动画......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:04:07.023

你的意思是这样吗？

```
<script type="text/javascript">
    $(function() {
        $('.imgOpa').each(function() {
            $(this).hover(
                function() {
                    $(this).stop();
                    $('.imgOpa').animate({ opacity: 1.0 }, 800);
                },
               function() {
                   $(this).stop();
                   $('.imgOpa').animate({ opacity: 0.5 }, 800);
               })
            });
    });
</script> 
```

# joomla - 将模块放入模态框Joomla

> ID：10604569
> 
> 赞同：1
> 
> 时间：2012-05-15T16:00:41.587
> 
> 标签：joomla, modal-dialog

是否可以在模态框中显示 Joomla 模块？我尝试使用 loadposition 将模块放入文章中，并在我放入的另一篇文章中

```
<a class="modal" href="index.php?option=com_content&amp;view=article&amp;id=18" rel="{handler: 'iframe', size: {x: 640, y: 480}}">auto</a> 
```

但我不仅得到模块，而且得到所有页面。我尝试显示 Communicator Module 的订阅者表单 (http://extensions.joomla.org/extensions/content-sharing/newsletter/4600)。

也许我应该更改此模块中的某些内容以使用模式框以正确的方式显示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:53:04.060

您可以使用一些小技巧...您必须为模块 Div 的容器分配一个 id，并将此 id 添加到 url 中，以便 url 可以加载模块..

```
<div id='Modulecontainer'>
<module>
</div>

<a class="modal" href="index.php?option=com_content&amp;view=article&amp;id=18#Modulecontainer" rel="{handler: 'iframe', size: {x: 640, y: 480}}">auto</a> 
```

我在这里使用相同的方法来寻找在谷歌地图中显示搜索结果的土地页面。 [农场租赁连接.org/](http://farmleaseconnection.org/%27)

希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:10:48.007

Joomla 本身没有这个功能，如果你的模板没有内置它（就像许多 RocketTheme 模板一样），有一个名为[JQPopup](http://extensions.joomla.org/extensions/style-a-design/popups-a-iframes/16923)的扩展可以很好地处理它。

# c++ - 正确使用迭代器从列表中返回对象

> ID：10604571
> 
> 赞同：2
> 
> 时间：2012-05-15T16:00:45.203
> 
> 标签：c++

我有一个会议清单：

```
std::list<meeting*> meetings; 
```

我想迭代列表并返回对特定会议的引用：

```
meeting& day::findMeeting( float StartHour )
{
std::list<meeting*>::iterator it;
for(it = meetings.begin(); it != meetings.end(); it++)
{
    if (it->getStartHour() == StartHour)
    {
        return *it;
    }
}
throw no_such_meeting_error;
} 
```

我收到以下错误：

1.  `'getStartHour' : is not a member of 'std::_List_iterator<_Mylist>'`
2.  `'return' : cannot convert from 'meeting *' to 'meeting &'`
3.  `invalid return type 'meeting **' for overloaded 'operator ->'`

我仍在学习 C++，所以很高兴了解我做错了什么。还，

*   从函数返回对对象的引用是一种好习惯吗？有什么更好的办法吗？
*   由于列表中项目的更改，引用是否可能会因某些原因而失效？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T16:05:47.923

> 我有一份会议清单。

不，你没有。你有一个会议指针列表。从那个误解中，您所有的进一步错误都会流淌。

```
if (it->getStartHour() == StartHour) 
```

如果您有会议列表，则此代码将是正确的。如果你有一个会议指针列表，那就错了。尝试：

```
if ((*it)->getStartHour() == StartHour) 
```

下一个：

```
return *it; 
```

尝试：

```
return **it; 
```

* * *

或者，也许你真的想要一个“会议列表”。在这种情况下，您将这样声明您的列表：

```
std::list<meeting> meetings; 
```

我不知道你想要哪个——会议列表或会议指南列表。这与程序其余部分的设计有关。我几乎从不保留一个装满指针的容器。

您可能需要一个指针列表，例如，如果您需要多个列表条目来引用同一个会议。（“我在 10 点与 Abe 会面，在 11 点与 Bob 和 Chuck 会面，然后在 10 点与 Abe 再次会面”？）

如果复制 a`meeting`是不可能的或过于昂贵，您可能还需要一个指针列表。在这种情况下，我建议您使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer#shared_ptr_and_weak_ptr)而不是裸指针。

要回答您的另一个问题，是的，返回对对象的引用是一件好事。您确实需要了解该对象的生命周期；在对象被销毁后，永远不要通过其引用访问该对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T16:05:37.463

*当它是指向您的对象 meeting 的指针*时，您必须返回 **it 。返回一个参考很好，但要注意你以后用它做什么。指针的工作方式是，如果您编辑参考，列表中的项目也会更改，反之亦然。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-15T16:03:12.473

你有`std::list<meeting*>::iterator`，但你的函数承诺返回`meeting&`。

当您说`*it`这是要求迭代器给您它“指向”的内容时，在这种情况下将是`meeting*`静止的。因此，您还需要取消引用它以获得实际会议，例如：

```
return **it; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-15T16:13:03.853

综上所述，我建议您声明：

```
std::list<meeting> meetings; 
```

代替：

```
std::list<meeting*> meetings; 
```

（相应地将迭代器更改`it`为`std::list<meeting>::iterator;`），并让`std::list`容器为您完成所有与内存相关的工作，除非您出于某种原因特别想自己做。

关于返回参考，答案取决于您的需求。如果要将整个对象返回给调用函数，返回引用是个好主意。

`const meeting& day::findMeeting(float startHour)`此外，如果您希望返回的对象是只读的，*即*调用函数能够访问该对象但不能更改它，请考虑使用 const-reference, 。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T16:20:19.423

这与您的问题没有直接关系，但是在比较浮点数是否相等时应该小心。浮点数不准确，将它们与 == 进行比较是不安全的。

看看[http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-15T16:17:07.010

评论多于答案，但太大而无法发表评论。

如声明的那样，不能在给定`const day&`引用的情况下调用该函数。你可以考虑解决这个问题。

如果修改 a 的行为`Meeting`也是对 的修改，则`day`重载函数：

```
class day {
public:
  Meeting& findMeeting(float StartHour);
  const Meeting& findMeeting(float StartHour) const;
  //...
}; 
```

这两个定义看起来基本相同，除了第二个需要`const_iterator`. 现在`findMeeting`在 a 上调​​用时`const day&`将返回 a `const Meeting&`，或者如果在 a上调​​用`day&`仍将返回一个 modifiable `Meeting`。

或者 -

如果修改 a`Meeting`不修改`day`，则只允许以任何一种方式调用该函数并始终返回一个 modifiable `Meeting`：

```
class day {
public:
  Meeting& findMeeting(float StartHour) const;
  //...
}; 
```

或者 -

如果类的用户`day`根本不能修改它`Meetings`，做同样的事情但总是返回一个`const Meeting&`：

```
class day {
public:
  const Meeting& findMeeting(float StartHour) const;
  //...
}; 
```

现在只允许`class day`方法（和`friend`s）修改`Meeting`属于 a 的 s `day`。您可能还需要另一种`private`方法来查找可修改的会议，但在这种情况下，它应该具有不同的名称，而不是重载。

# html - 使用 CSS 布局浮动和清除的页面元素

> ID：10604586
> 
> 赞同：0
> 
> 时间：2012-05-15T16:01:26.750
> 
> 标签：html, css, layout, css-float

我在页面布局方面遇到了这个问题，我一直在努力争取太久，无法继续理智地看待。整个页面布局是标准的两列：一个主列，右侧有一个窄列（带有`float: right`），页面的其余部分是主要区域。

现在，在主区域内，我有一段内容需要沿着主区域的右边缘浮动——这很好。但是，我需要在主要区域的浮动部分下方放置一些内容，而不是在右大列下方 - 我只是不知道该怎么做。

这是我正在尝试做的 jsfiddle：http: [//jsfiddle.net/rx7Pd/](http://jsfiddle.net/rx7Pd/)

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:05:31.573

添加`overflow: auto`或`overflow: hidden`到主容器。

> **更新示例**：http: [//jsfiddle.net/TT8QF/](http://jsfiddle.net/TT8QF/)

这是与清除浮动 div 相关的常见修复。[**你可以在这里**](http://www.quirksmode.org/css/clearing.html)和[**这里**](http://www.positioniseverything.net/easyclearing.html)找到一些信息。

如果你也在父元素上使用这个修复，你可以摆脱 HTML 代码底部丑陋的清除 div。看看：

> **更新示例**：http: [//jsfiddle.net/bNS98/](http://jsfiddle.net/bNS98/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:29:27.420

你想要这样的东西吗？[（在线演示）](http://dabblet.com/gist/2702945)

![在此处输入图像描述](../Images/ca04b65039e43d2ab9197210b17f3d89.png)

主要内容的包装器和使用它`display: table-cell`是这个技巧的主要思想：

**html**

```
 /* full html markup is on my demo */
    …
    <div class="right-main">
            right-floating part of main area.
    </div>
    <div id="content">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget risus libero. Nunc ornare pretium quam, a blandit magna suscipit viverra. Sed eu metus ut justo viverra tempus id in magna. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aenean vitae eros nec mauris vestibulum dictum.
    </div>
    <div id="rest">
        I want this to be below the main
        right column but not below the
        overall right column
    </div>
    … 
```

**css**

```
/* full css code is on my demo */
…
#content {
    display: table-cell
}
… 
```

# android - 有没有办法指定设备应该使用哪个可绘制文件夹？

> ID：10604590
> 
> 赞同：2
> 
> 时间：2012-05-15T16:01:32.147
> 
> 标签：android, drawable

由于我没有同时获得 Xyboard（10 英寸和 8 英寸）的原因，忽略了我在 xhdpi 文件夹中的所有艺术作品，而是从 hdpi 文件夹中提取艺术作品。我显然可以用“_xhdpi”或类似的kluge重命名我的所有文件，但希望有一些我忽略的通用设置，我可以检测实际分辨率并指示设备从哪个文件夹获取其艺术作品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:21:04.757

您可以通过查看密度来了解您的设备认为的[`DisplayMetrics`密度](http://developer.android.com/reference/android/util/DisplayMetrics.html#density)。那是设备首先寻找资源的地方。

我现在找不到参考，但我很确定`density`该类中 mdpi 的值是 1.0，hdpi 是 1.5，xhdpi 是 2.0。

请记住，屏幕的尺寸也与密度无关。如果您试图仅通过艺术密度来考虑不同的屏幕尺寸，那您就错了。理想情况下，使用塑料尺在屏幕上测量时，`large-mdpi`图像和`large-hdpi`图像的大小大致相同，但由于`hdpi`像素更多，图像应该看起来更好。您可以拥有比“大屏幕”和“普通屏幕”[更精细的尺寸限定词。](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)这可能会做你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T20:21:52.023

安装此应用程序，以检查设备 dpi 和大小屏幕。

[屏幕信息](https://play.google.com/store/apps/details?id=com.jotabout.screeninfo&hl=en)

使用这些信息，您可以组织您的布局/可绘制对象。

例如 GalaxyTab 有：Large Screen/hdpi 和 Motorola Xoom Xlarge Screen/mdpi

# css - 有没有办法用 Selenium 测试响应式 CSS？

> ID：10604606
> 
> 赞同：20
> 
> 时间：2012-05-15T16:02:36.763
> 
> 标签：css, ruby, testing, responsive-design, selenium-webdriver

我公司的开发人员已经将我们的网站实现为 CSS 响应式，我很困惑如何利用 Selenium 来测试他们的工作。我一直在将 Selenium WebDriver (Selenium 2) 与 Ruby 一起用于其他方面。

在网上做了一些研究后，我遇到了多种工具，但没有一个值得自动化，因为它们 ..aaa... 只是手动检查不同屏幕尺寸的网络工具。

一些例子 -

1.  [响应 CSS 布局的设备测试（手动）](http://tools.hyperspatial.com/web/devices/#form-top)
2.  [负责人](http://www.responsinator.com/)
3.  [响应式](http://responsive.is)
4.  [Responsivepx](http://responsivepx.com/)（更好的控制）

但我可以使用 Selenium 以及使用 sel2/ruby 轻松实现上述目标

```
@driver.manage.window.resize_to(480, 725) #iphone potrait 
```

* * *

需要帮助

*   如何实际测试css是否**自动**“响应” ？
*   检查页面是否响应窗口大小调整的常用属性/方面有哪些？
*   有人用 Selenium 来 QA 响应式 CSS 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-24T11:05:13.003

现在有一个响应式设计自动化测试的解决方案——Galen Framework。我一直在研究一种工具，可以测试网页的响应式设计以及网站布局以实现跨浏览器兼容性。该工具可在此处获得[http://galenframework.com](http://galenframework.com)

它使用 Selenium 在浏览器中打开网页，将浏览器窗口重新调整为所需大小，然后获取页面上元素的位置。它具有用于描述不同设备（浏览器大小）上的页面外观的特殊语法

下面是一个测试基本网页骨架的小例子：

```
# Objects definition
=====================================
header                  id  header
menu                    css #menu
content                 id  content
side-panel              id  side-panel
footer                  id  footer
=====================================

@ all
-------------------------------
header
    inside: screen 0px top left right

menu
    centered horizontally inside: screen
    below: header 0px

content
    below: menu 0px
    inside:screen 0px left

@ desktop
--------------------------------
side-panel
    below: menu 0px
    inside: screen 0px right
    width: 300px
    near: content 0px right
    aligned horizontally top: content

@ mobile
--------------------------------
content, side-panel
    width: 100% of screen/width

side-panel
    below: content 0px 
```

稍后您可以在单个命令中运行测试，也可以创建一个单独的测试套件，您可以在其中执行更多操作（例如注入自定义 javascript，或使用 WebDriver 等）。要使用单个命令运行上面的示例，您可以这样做：

```
galen check homepage.spec --url "http://example.com" --size "400x600" --include "mobile,all" --htmlreport "reports" 
```

那只是基础知识。官网有更多例子。

还有一篇介绍文章解释了在设计网页时如何使用 TDD 方法（测试驱动开发）[http://mindengine.net/post/2013-11-16-tdd-for-responsive-design-or-how - 对不同设备的网站布局进行自动化测试/](http://mindengine.net/post/2013-11-16-tdd-for-responsive-design-or-how-to-automate-testing-of-website-layout-for-different-devices/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T16:35:37.970

我可以想到两种方法来做到这一点。

一 - 对于每个 web 元素，您可以检查其大小、位置、可见性等。每次调整大小后，您可以将这些参数与一些先前指定的值进行比较，以检查布局是否已更改。

第二 - 图像比较。每次调整大小后，您可以截取页面并将其与之前保存的模式进行比较。有各种图像比较库可以实现这一点。在我们公司，我们使用[ImageMagick](http://www.imagemagick.org/)。然而，图像比较不适用于正在开发的页面，也不适合内容不断变化的页面。您可以通过隐藏页面中易于使用 javascript 更改的部分来解决此问题（这可以通过 WebDriver 实现）。

我必须承认我从来没有机会手动或自动测试响应页面，所以以上只是我的想法。我确实使用图像比较来测试“正常”页面，我不确定它是否也适用于响应式页面。

**编辑**

不幸的是我不知道Ruby。下面是一个 Java 示例，希望您能理解它并以某种方式翻译成 Ruby。该代码仅打印列表中每个元素的大小和位置。

```
org.openqa.selenium.Point point;
org.openqa.selenium.Dimension dimension;

List<WebElement> elementsList = driver.findElements(By.xpath("//some/xpath"));

for (WebElement element : elementsList)
{
    point = element.getLocation();
    dimension = element.getSize();
    System.out.println("Element name: " + element.getTagName());
    System.out.println("Element size: " + dimension.height + "x" + dimension.width);
    System.out.println("Element location: " + point.x + ":" + point.y);
} 
```

请注意，每次调用 getLocation() 和 getSize() 都会导致 js 被执行（为了获取值）并且它会花费时间。这就是为什么你应该每个元素只调用一次，不要使用 element.getSize().height + "x" + element.getSize().width - 与上面的示例相比，它需要两倍的时间。

在 Ruby 中，上述方法称为 element.location 和 element.size

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-16T14:08:56.070

如果您的主要目标是测试 UI 的变化并且 selenium 不是绝对要求，您可以使用 BBC Wraith - [https://github.com/BBC-News/wraith](https://github.com/BBC-News/wraith)非常易于设置和使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T05:09:20.657

我们可以通过多种方式实现这一目标

**1\. 截图比较**：使用 selenium webdriver 转到给定的网站 url 并将浏览器更改为不同的大小并比较屏幕截图。如果两个屏幕截图相同，则给定网站没有响应。如果两个屏幕截图不同，则给定网站响应。这种方法不好，因为让我们假设如果在给定网站的屏幕截图中存在幻灯片，给定网站中存在的幻灯片图像可能会发生变化，我们会得到不同的屏幕截图，所以如果我们比较屏幕截图，我们会得到结果为两个屏幕截图都不同，我们可能会得到响应，因为给定的站点是响应式的

**2\. 文档宽度：**使用 selenium webdriver 转到给定的网站 url 并将浏览器更改为移动设备大小并执行 javascript 以获取文档宽度。如果宽度小于移动设备的最大宽度，我们可以假设给定的网站是响应式的

**3\. 屏幕截图宽度：**使用 selenium webdriver 转到给定的网站 url 并将浏览器更改为移动设备大小并截取屏幕截图并获取屏幕截图图像的宽度。如果宽度小于移动设备的最大宽度，我们可以假设给定的网站是响应式的。我用这种方法测试了多个站点并得到了预期的结果检查给定站点是否响应的步骤。

查看更多关于编码的信息：http: [//jagadeeshmanne.blogspot.in/2014/03/checking-website-is-responsive-or-not.html](http://jagadeeshmanne.blogspot.in/2014/03/checking-website-is-responsive-or-not.html)

# javascript - 使用 jquery 将 li 添加到 ul 只需一次

> ID：10604611
> 
> 赞同：0
> 
> 时间：2012-05-15T16:02:39.387
> 
> 标签：javascript, jquery

我有一个带有链接的页面，当按下链接时，我想使用 jQuery 将新的 LI 添加到 UL，我创建了我的 jQuery 函数，它只工作一次，我的意思是，jQuery 函数只适用于点击

# jQuery

```
$("#addRelation").ready(function (){
    $("#addRelation a").css("padding","6px");
    $("#addRelation .araNew").bind('click',function(){
        $("#addRelation .araNew").hide();
        $("#addRelation ul li:last").append('<li> \n\
<p>\n\
      <label>Source</label>\n\
      <select name="source[]" id="source">\n\
             <option>select source</option>\n\
      </select>\n\
</p>\n\
<p>\n\
      <label>Destination</label>\n\
      <select name="destination[]" id="destination">\n\
              <option>select destination</option>\n\
      </select>\n\
</p>\n\
 <p>\n\
       <a href="#" class="araNew">new</a> \n\
       <a href="#" class="araDel">delete</a> \n\
</p>\n\
</li>');
    }); 
```

# html

```
<div class="container" id="addRelation">
    <ul class="containerUL">
        <li class="containerLI">
            <label>Name</label>
            <input type="text" name="relationName" class="longInput1"/>
            <div id="arSuggestions"></div>
        </li>
        <li>
            <label>Related Concepts</label>
            <p>
                <label>Source</label>
                <select name="source[]" id="source">
                    <option>select source</option>
                </select>
            </p>
            <p>
                <label>Destination</label>
                <select name="destination[]" id="destination">
                    <option>select destination</option>
                </select>
            </p>
            <p>
                <a href="#" class="araNew">new</a>
                <a href="" class="araDel">delete</a>
            </p>
        </li>
    </ul>
</div> 
```

以及将 li 添加到 ul 与我的功能不同的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:05:56.107

问题是您正在向`a`DOM 添加一个新元素，但事件处理程序绑定到旧元素。您可以使用事件委托（使用 jQuery[`on`](http://api.jquery.com/on/)方法，或者[`delegate`](http://api.jquery.com/delegate/)如果您使用低于 1.7 的版本）来捕获 DOM 树更高的点击事件：

```
$("#addRelation").on("click", ".araNew", function() {
    //Do stuff...
}); 
```

这将在到达祖先`div`元素时捕获点击事件。它将检查事件目标是否匹配`.araNew`，如果匹配，它将执行事件处理程序。这样，无论`.araNew`您单击哪个匹配的元素，处理程序都会执行。

或者，您可以简单地将“新建”和“删除”链接移到 之外`ul`，而不是每次都创建新链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:05:46.867

那是因为您稍后会动态插入元素。用于`.on`附加单击事件处理程序，这将确保动态插入的元素也调用事件处理程序。

```
$("#addRelation").on('click', '.araNew', function(){
    // code here        
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T16:06:25.497

[像这样在$.on](http://api.jquery.com/on)语法中添加附加代码

```
$("#addRelation").on('click','.araNew',function(){
 // add li code

}); 
```

在此处检查工作[小提琴](http://jsfiddle.net/joycse06/4pVPx/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T16:07:49.657

您隐藏了旧的`araNew`并添加了一个新的，而没有将点击绑定到它。

# jquery - jquery插件scrollTo不起作用

> ID：10604615
> 
> 赞同：0
> 
> 时间：2012-05-15T16:03:04.073
> 
> 标签：jquery, scrollto

我正在尝试使用 Ariel Flesler 的 jquery scrollTo 插件进行水平滚动，但无法使滚动正常工作（插件和 jquery 包含在头部中）。这是相关的HTML：

```
<div id="main-content">
  <div id="quiz-wrapper">

    <div class="quiz" id="question-first">
      <h5 class="quiz-question">What is the capital of X?</h5>
      <div class="quiz-answer"><a
          title="$(...).scrollTo( '#share-first', 800 );" href="#">Answer</a>
      </div>
    </div>

    <div class="quiz" id="share-first">
      <div class="points-message"> 
         <h3>+75 for every Tweet and Like</h3>
      </div>                
    </div>
  </div>
</div> 
```

相关样式：

```
div#main-content {
  width: 570px;
}

div#quiz-wrapper {
  width: 3000px;
  overflow: hidden;
}

div.quiz {
  width: 520px;
  margin-left: 100px;
  float: left;
} 
```

这是插件的链接：http: [//flesler.blogspot.com/2007/10/jqueryscrollto.html](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)。知道 scrollTo 调用有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:14:53.377

您尝试将 javascripting 应用到`title`属性中。您可能打算将其应用于`onclick`属性。

# c# - 如何在我的 C# 程序中构建这个字符串？

> ID：10604620
> 
> 赞同：-3
> 
> 时间：2012-05-15T16:03:22.130
> 
> 标签：c#, string

> **可能重复：**
> [C# 字符串格式化和填充](https://stackoverflow.com/questions/2019241/c-sharp-string-formatting-and-padding)

在我的 C# 程序中，我有四个变量：

```
string checkNo = "1234";
string checkAmount = "25.60";
string checkCashedDate = "120413";
string filler = "   "; // three spaces 
```

我想构建一个如下所示的字符串（长 26 个位置）：

```
"00123400000002560120413   " 
```

我可以手动做，即检查每个字段的长度（删除小数），用适当数量的零填充，附加到最终字符串。但是，我希望有更快的方法。就像创建一个具有某种格式（全为零）的字符串，然后“插入”这些值。在 C# 中有这样的东西吗？感谢您的任何帮助和建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:12:03.140

您可以使用[String.PadLeft](http://msdn.microsoft.com/en-us/library/92h5dc07.aspx)适当地构建此字符串：

```
string result = checkNo.PadLeft(6, '0') + 
                checkAmount.Replace(".","").PadLeft(11, '0') +
                checkCashedDate.PadLeft(6, '0') + filler; 
```

话虽如此，我个人会将这些值存储为数值和 a`DateTime`而不是字符串值，并使用单个 String.Format 语句重新格式化结果。这在使用值时提供了更多的类型安全性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T16:09:18.753

用于[`string.PadLeft`](http://msdn.microsoft.com/en-us/library/system.string.padleft.aspx)确保较大字符串的每个部分的宽度，与[`string.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)和结合使用[`string.Replace`](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)。

```
checkNo.PadLeft(6, '0') + 
checkAmount.Replace(".", "").PadLeft(11, '0')  + 
checkCashedDate.PadLeft(6, '0') + filler 
```

或者：

```
string.Format("{0}{1}{2}{3}",
              checkNo.PadLeft(6, '0'),
              checkAmount.Replace(".", "").PadLeft(11, '0'),
              checkCashedDate.PadLeft(6, '0'),
              filler); 
```

或者，（使用[复合格式](http://msdn.microsoft.com/en-us/library/txafckwd.aspx)），如[Guffa](https://stackoverflow.com/users/69083/guffa) [发布](https://stackoverflow.com/a/10604822/1583)的：

```
string.Format(
  "{0,6}{1,11}{2,6}",
  checkNo,
  checkAmount.Replace(".", ""),
  checkCashedDate
).Replace(" ", "0") + filler 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T16:15:41.530

您可以使用`String.Format`空格填充，并用零替换这些空格：

```
String.Format(
  "{0,6}{1,11}{2,6}",
  checkNo,
  checkAmount.Replace(".", ""),
  checkCashedDate
).Replace(" ", "0") + filler 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T16:06:31.937

查看[String.Format()](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)方法。

此示例显示如何使用该`String.Format`方法生成数字字符串：

```
String.Format("{0,6}{1,11}{2,6}", checkNo, checkAmount, checkCashedDate).Replace(' ','0'); 
```

# python-3.x - 如果运行 Python 3，确保导入模块的“最佳”方法是什么？

> ID：10604624
> 
> 赞同：0
> 
> 时间：2012-05-15T16:03:36.570
> 
> 标签：python-3.x

我有一个专门用于 Python 3 的模块。确保如果有人尝试在 Python 2 中导入它会炸毁/引发某种异常的最佳方法是什么？

现在我有：

```
# all my imports that I need, ex:
import sys

# blow up if not python 3
if sys.version_info.major < 3:
    sys.exit("This is not Python 3") 
```

但我真的不喜欢额外的导入（如果我的模块不需要 sys 它必须导入它以进行版本检查），这并不完全“感觉正确”。有更好/更惯用的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:04:45.463

不要 sys.exit，它会让其他开发人员想要刺你的脸。

只需抛出您制造的一个`ImportError`或一些`Py3kCompatible`错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:06:48.570

ImportError 将完成这项工作，但如果您使用外部库，那么这将是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T00:52:51.057

if range(0)==[]: raise RuntimeError('此代码需要 Python 3')

可能是我能想到的最快的测试和最好的例外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T17:05:37.970

我唯一能想到的就是专门针对已更改的语言功能进行测试：

```
try:
    lambda: print()
except SyntaxError:
    raise ImportError('This code requires Python 3') 
```

（尽管有重新学习的所有麻烦`print`，我真的很喜欢新的函数语法允许它在 lambdas 中使用）

请注意，此代码实际上不会在 python3 中调用 print，它只是返回一个函数，如果您调用它，它将调用 print，但它只是被丢弃而不是被调用，因此您不会通过运行在 STDOUT 上得到一个草率的换行符这个测试。

# java - 如果我只有一个组件，在 JFrame 中使用 AWT 是否安全？

> ID：10604630
> 
> 赞同：3
> 
> 时间：2012-05-15T16:03:49.457
> 
> 标签：java, swing, awt

我听说过很多次不要混合`Swing`和`AWT`（重量级和轻量级）组件。

但是，如果我只想说，一次显示一个组件怎么办`JFrame`。到目前为止，我所看到的主要是`AWT`组件**始终**位于顶部，但正如我之前所说，如果我一次只有一个组件，`JFrame`那有什么关系呢？

**编辑**：我需要做的就是用`AWT` `Canvas`. 我正在将它用于游戏，所以我需要一个`BufferStrategy`.

所以我想我的问题是：即使你一次只显示一个组件，`AWT`是否还有一个令人信服的理由不混合组件？`Swing``JFrame`

**另外**，我已经用 a `Canvas`in a让它工作得很好`JFrame`，那么迁移到 Swing 有什么好处？

提前致谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:22:41.150

*   您必须使用 AWT 组件进行高性能绘画、多媒体或矢量化来自 OpenGL、CAD/CAM ei 的图形

*   仅当您有非常重要的原因时，您才能将 AWT 组件与 Swing JComponents 一起使用，例如来自 Swing 的 am 点或事件是 BugParade 中的错误或常规错误

*   我建议不要将 AWT 与 Swing 混合使用，反之亦然

*   AWT 组件的优势它们基于来自本机操作系统的资源

*   AWT 组件的缺点是它们的开发在上个世纪就结束了

*   Swing 基于或继承 AWT 组件及其方法

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T18:11:43.700

> ..`JPanel`是最好的 Swing 替代品`Canvas`吗？

是的，但覆盖`paintComponent(Graphics)`而不是`paint(Graphics)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T16:24:17.653

与大多数决定一样，这实际上取决于对您来说什么是重要的。混合 AWT 和 Swing 存在性能缺陷，如果您尝试使用主题，也会遇到问题。话虽如此，如果这是您需要的，没有理由不这样做。

Swing 构建在 AWT 之上，是的，它更新、更快、更好，但它仍然可以访问 AWT 的所有内容。

这里真正的问题应该是是否有一种方法可以在不使用 AWT 的情况下完成您需要做的事情？给我们一些关于您需要做什么的指示，也许有一种方法可以使用 Swing 来完成。

# linux - task_struct 存储在哪里？

> ID：10604632
> 
> 赞同：5
> 
> 时间：2012-05-15T16:03:55.613
> 
> 标签：linux, process, kernel, task

Task_struct 用于保存内核进程的必要信息。由于这种结构，内核可以暂停一个进程，并在一段时间后继续执行它。但我的问题是：这个 task_struct 存储在内存中的什么位置（我读过内核堆栈，是在虚拟地址空间的内核空间中的那个吗？）？内核在暂停进程后在哪里保存指向该结构和该结构的指针？

如果您对所描述的资源提供一些参考，我将不胜感激。

PS。我忘了说这个问题是关于 Linux 内核的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T17:11:17.473

Linux 内核通过 kmem_cache 工具分配一个 task_struct。例如在 fork.c 中有一段代码负责分配一个任务结构：

```
#define alloc_task_struct_node(node) \
             kmem_cache_alloc_node(task_struct_cachep, GFP_KERNEL, node)
static struct kmem_cache *task_struct_cachep; 
```

存储指向当前线程的指针的位置取决于体系结构。例如，这就是 x86 (arch/x86/include/asm/current.h) 的工作方式：

```
static __always_inline struct task_struct *get_current(void)
{
    return percpu_read_stable(current_task);
} 
```

在 PowerPC (arch/powerpc/include/asm/current.h) 中：

```
static inline struct task_struct *get_current(void)
{
    struct task_struct *task;

    __asm__ __volatile__("ld %0,%1(13)"
        : "=r" (task)
        : "i" (offsetof(struct paca_struct, __current)));

    return task;
} 
```

您可以使用[Elixir 交叉参考](https://elixir.bootlin.com/linux/latest/source)来轻松探索内核源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-02T14:44:15.660

task_struct 是在平板分配器的帮助下分配的。内核中的每个任务都有 8kb 或 4kb 的内核堆栈，它们永远不会增加或减少。

如果我们具体讨论 0x86 架构，那么在任务内核堆栈的末尾，我们有 thread_info 结构，它本质上存储/指向 task_struct 指针。task_struct 具有内核堆栈指针，可以减少 8kb 以获得线程信息结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-11T09:31:31.330

从虚拟内存系统的角度来看，task_struct 是由 Slab 分配器分配的，因此它位于**内核空间**中。更具体地说，slab 内存可以直接映射到缓存中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T16:10:59.053

处理线程和进程上下文的内核结构依赖于操作系统。通常，它们将从非分页池中分配，用于管理它们的指针集合也是如此。

# simperium - Simperium 登录屏幕取消/编辑

> ID：10604635
> 
> 赞同：1
> 
> 时间：2012-05-15T16:03:59.057
> 
> 标签：simperium

我正在使用 Simperium 数据同步框架，它运行良好。但是，我正在尝试编辑它附带的登录屏幕，以在其上添加一个取消按钮，该按钮只会关闭窗口。我看到了可以添加按钮的 .xib 文件，但我认为我们无法访问它背后的代码。如何在该屏幕上添加取消按钮？
谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:32:03.487

目前没有很好的方法来做到这一点。在短期内，我们将添加一个使界面可取消的选项，因为这是一个常见的用例。此后，我们将在您希望实现自定义行为的情况下对身份验证类进行子类化。

# java - 关于 ActionListener.image 编辑的问题

> ID：10604638
> 
> 赞同：1
> 
> 时间：2012-05-15T16:04:09.317
> 
> 标签：java, swing, imageicon

我得到了一个任务，我必须用 Java 编写一个程序，该程序需要一个图像。创建 3 个名为（左对齐、右对齐和居中对齐）的按钮。2 个文本字段宽度和高度，我可以在那里输入数字和一个按钮调整大小。4 个按钮（左对齐，右对齐，居中和调整大小）必须将图像位置更改为左对齐或居中，并根据分别给出的数字调整图像大小

![在此处输入图像描述](../Images/8af01d9bb482feefca205c2d72f7e023.png)

我已经编写了代码只是为了向左走，但我不知道该怎么做......我也不知道调整大小时该怎么做......有人可以帮助我吗？

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JPanel;

public class Destructor extends JFrame implements ActionListener {

    private JButton red, blue, white, resize;

    public Destructor(String title) {
        super(title);
        Container contentPane = this.getContentPane();
        this.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        red = new JButton("Align Left");
        //red.addActionListener(this);
        blue = new JButton("Align Center");
        blue.addActionListener(this);
        white = new JButton("Align Right");
        white.addActionListener(this);
        //read the Image
        // try {                
        // BufferedImage pic1 = ImageIO.read(new File("PewPew.jpg"));
        //JLabel picLabel = new JLabel(new ImageIcon( pic1 ));
        //add( picLabel );
        ImageIcon pic1 = new ImageIcon("PewPew.jpg");
        add(new JLabel(pic1));
        // } catch (IOException ex) {
        // handle exception...
        // }

        //Action LIsteners
        //add the buttons to the frame
        JPanel north = new JPanel();
        north.add(red);
        north.add(blue);
        north.add(white);
        contentPane.add(north, BorderLayout.NORTH);
        //THe Under Panel
        JPanel south = new JPanel();
        south.setLocation(250, 30);
        resize = new JButton("Resize");
        JLabel Width = new JLabel("Width :");
        JLabel Height = new JLabel("Height :");
        //The text field
        JTextField times = new JTextField();
        JTextField times2 = new JTextField();
        Width.setLabelFor(times);
        Height.setLabelFor(times2);
        Width.setLocation(120, 0);

        south.add(Width);
        south.add(times, BorderLayout.NORTH);
        south.add(Height);
        south.add(times2, BorderLayout.SOUTH);
        south.add(resize);
        contentPane.add(south, BorderLayout.SOUTH);
        GridLayout lay2 = new GridLayout(3, 2);
        south.setLayout(lay2);

        //create a menu bar and attach it to this JFrame
        JMenuBar menuBar = new JMenuBar();
        this.setJMenuBar(menuBar);

        JMenu fileMenu = new JMenu("Options");

        menuBar.add(fileMenu);

        JMenuItem redMenuItem = new JMenuItem("Reset");

        fileMenu.add(redMenuItem);

    }
//Trying to move the picture to the left
    public void actionPerformed(ActionEvent a) {
        contentPane.add(pic1, BorderLayout.NORTH);
    }

    public static void main(String[] args) {
        Destructor f = new Destructor("Image App");
        f.setSize(600, 600);
        f.setVisible(true);
    }
} 
```

**编辑：我制作了一个程序，在trashgod的帮助下更改了网站的徽标** 我还尝试通过更改URL图像加载我的图像来稍微改变它 `imageLabel = new JLabel(new ImageIcon("PewPew.jpg"));`，它也可以工作。调整大小将完成虽然我应该“链接”文本字段编号，但它的左对齐方式相同吗？我还需要创建一个 setPreferedSize 并以某种方式获取文本字段的宽度和高度？

```
import java.awt.*;
import java.awt.event.*;
import java.net.MalformedURLException;
import java.net.URL;
import javax.swing.*;

/** @see http://stackoverflow.com/a/10610126/230513 */
public class AlignImage extends JPanel {

    private JPanel controlPanel = new JPanel();
    private JLabel imageLabel;

    public AlignImage() {
        super(new GridLayout());
        try {
            imageLabel = new JLabel(new ImageIcon(new URL(
                "http://sstatic.net/stackoverflow/img/logo.png")));
        } catch (MalformedURLException ex) {
            ex.printStackTrace(System.err);
        }
        this.add(imageLabel);
        controlPanel.add(new JButton(new AbstractAction("Align Left") {

            @Override
            public void actionPerformed(ActionEvent e) {
                align(JLabel.LEFT);
            }
        }));
          controlPanel.add(new JButton(new AbstractAction("Align Center") {

            @Override
            public void actionPerformed(ActionEvent e) {
                align(JLabel.CENTER);
            }
        }));
        controlPanel.add(new JButton(new AbstractAction("Align Right") {

            @Override
            public void actionPerformed(ActionEvent e) {
                align(JLabel.RIGHT);
            }
        }));

    }

    @Override
    public Dimension getPreferredSize() {
        int w = 3 * imageLabel.getIcon().getIconWidth() / 2;
        int h = 3 * imageLabel.getIcon().getIconHeight() / 2;
        System.out.println(w + " " + h);
        return new Dimension(w, h);
    }

    private void align(int alignment) {
        imageLabel.setHorizontalAlignment(alignment);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame("Align Left");
                f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                AlignImage ai = new AlignImage();
                f.add(ai, BorderLayout.CENTER);
                f.add(ai.controlPanel, BorderLayout.NORTH);
                f.pack();
                f.setLocationRelativeTo(null);
                f.setVisible(true);
                JFrame f1 = new JFrame("Align Center");
                f1.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                 JFrame f2 = new JFrame("Align Right");
                f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

                f2.add(ai, BorderLayout.CENTER);
                f2.add(ai.controlPanel, BorderLayout.NORTH);
                f2.pack();
                f2.setLocationRelativeTo(null);
                f2.setVisible(true);
                f1.add(ai, BorderLayout.CENTER);
                f1.add(ai.controlPanel, BorderLayout.NORTH);
                f1.pack();
                f1.setLocationRelativeTo(null);
                f1.setVisible(true);
               ;

            }
        });

    }
} 
```

编辑2：我制作了一个更接近我需要做的程序。我尝试添加菜单也像原来的程序MenuBar menuBar = new JMenuBar();

```
this.setJMenuBar(menuBar);
   JMenu fileMenu = new JMenu("Options");
      menuBar.add(fileMenu);
     JMenuItem redMenuItem = new JMenuItem("Reset");
    fileMenu.add(redMenuItem); 
```

我收到一个无法识别 this.setJMenuBar 的错误。另外我尝试了很多方法，但我无法让 3 个按钮向北移动，调整大小和文本字段向南移动......我做错了什么？代码：

```
import java.awt.*;
import java.awt.event.*;
import java.net.MalformedURLException;
import java.net.URL;
import javax.swing.*;

/** @see http://stackoverflow.com/a/10610126/230513 */
public class AlignImage extends JPanel {

    private JPanel controlPanel = new JPanel();
    private JLabel imageLabel;

    public AlignImage() {
        super(new GridLayout());

            imageLabel = new JLabel(new ImageIcon("PewPew.jpg"));

        this.add(imageLabel);
        controlPanel.add(new JButton(new AbstractAction("Align Left") {

            @Override
            public void actionPerformed(ActionEvent e) {
                align(JLabel.LEFT);
            }
        }));
          controlPanel.add(new JButton(new AbstractAction("Align Center") {

            @Override
            public void actionPerformed(ActionEvent e) {
                align(JLabel.CENTER);
            }
        }));
        controlPanel.add(new JButton(new AbstractAction("Align Right") {

            @Override
            public void actionPerformed(ActionEvent e) {
                align(JLabel.RIGHT);
            }
        }));

        JPanel south= new JPanel();

    JButton resize=new JButton("Resize");
   JLabel Width = new JLabel("Width :");
   JLabel Height = new JLabel("Height :");
   //The text field
   JTextField times= new JTextField();
   JTextField times2= new JTextField();
   Width.setLabelFor(times);
   Height.setLabelFor(times2);

  south.add(Width);
  south.add(times, BorderLayout.NORTH);
  south.add(Height);
  south.add(times2, BorderLayout.SOUTH);
  south.add(resize);
   controlPanel.add(south, BorderLayout.SOUTH);
    GridLayout lay2 = new GridLayout(3,2); south.setLayout(lay2);
        JMenuBar menuBar = new JMenuBar();

    }

    @Override
    public Dimension getPreferredSize() {
        int w = 3 * imageLabel.getIcon().getIconWidth() / 2;
        int h = 3 * imageLabel.getIcon().getIconHeight() / 2;
        System.out.println(w + " " + h);
        return new Dimension(w, h);
    }

    private void align(int alignment) {
        imageLabel.setHorizontalAlignment(alignment);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame("Align Left");
                f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                AlignImage ai = new AlignImage();
                f.add(ai, BorderLayout.CENTER);
                f.add(ai.controlPanel, BorderLayout.NORTH);
                f.pack();
                f.setLocationRelativeTo(null);
                f.setVisible(true);
                JFrame f1 = new JFrame("Align Center");
                f1.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                 JFrame f2 = new JFrame("Align Right");
                f2.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

                f2.add(ai, BorderLayout.CENTER);
                f2.add(ai.controlPanel, BorderLayout.NORTH);
                f2.pack();
                f2.setLocationRelativeTo(null);
                f2.setVisible(true);
                f1.add(ai, BorderLayout.CENTER);
                f1.add(ai.controlPanel, BorderLayout.NORTH);
                f1.pack();
                f1.setLocationRelativeTo(null);
                f1.setVisible(true);
               JFrame f3 = new JFrame("Res");
                f3.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

                f3.add(ai, BorderLayout.CENTER);
                f3.add(ai.controlPanel, BorderLayout.SOUTH);
                f3.pack();
                f3.setLocationRelativeTo(null);
                f3.setVisible(true);

            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T23:19:49.773

常用的方法有两种：

*   给定一个合适的[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，使用其中一个常量`JLabel.LEFT`，`JLabel.CENTER`或者`JLabel.RIGHT`在你的调用中`setHorizontalAlignment()`；如果需要，请使用`validate()`和进行此操作。`repaint()`

*   覆盖`paintComponent()`并用于在所需坐标处`drawImage()`渲染。`Image`缩放是自动的。左对齐很容易：

    ```
    int w = Integer.valueOf(width.getText()); // formerly times
    int h = Integer.valueOf(height.getText()); // formerly times2
    g.drawImage(image, 0, 0, w, h, null); 
    ```

    中心、右侧和异常处理留作练习。

附录：下面的[sscce](http://sscce.org/)说明了单一对齐的第一种方法；尝试使用现有按钮作为指南添加其他两个按钮。

```
import java.awt.*;
import java.awt.event.*;
import java.net.MalformedURLException;
import java.net.URL;
import javax.swing.*;

/** @see http://stackoverflow.com/a/10610126/230513 */
public class AlignImage extends JPanel {

    private JPanel controlPanel = new JPanel();
    private JLabel imageLabel;

    public AlignImage() {
        super(new GridLayout());
        try {
            imageLabel = new JLabel(new ImageIcon(new URL(
                "http://sstatic.net/stackoverflow/img/logo.png")));
        } catch (MalformedURLException ex) {
            ex.printStackTrace(System.err);
        }
        this.add(imageLabel);
        controlPanel.add(new JButton(new AbstractAction("Align Left") {

            @Override
            public void actionPerformed(ActionEvent e) {
                align(JLabel.LEFT);
            }
        }));
    }

    @Override
    public Dimension getPreferredSize() {
        int w = 3 * imageLabel.getIcon().getIconWidth() / 2;
        int h = 3 * imageLabel.getIcon().getIconHeight() / 2;
        System.out.println(w + " " + h);
        return new Dimension(w, h);
    }

    private void align(int alignment) {
        imageLabel.setHorizontalAlignment(alignment);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame("Align Left");
                f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                AlignImage ai = new AlignImage();
                f.add(ai, BorderLayout.CENTER);
                f.add(ai.controlPanel, BorderLayout.SOUTH);
                f.pack();
                f.setLocationRelativeTo(null);
                f.setVisible(true);
            }
        });

    }
} 
```

# .htaccess - 仅将html扩展名添加到一个目录中的文件

> ID：10604643
> 
> 赞同：2
> 
> 时间：2012-05-15T16:04:17.033
> 
> 标签：.htaccess, mod-rewrite

尝试重写如下所示的链接：

```
/content/about-me 
```

...对此：

```
/content/about-me.html 
```

这对我正在做的事情是必要的。我不断收到此 htaccess 规则的内部服务器错误：

```
RewriteRule ^content/(.*) /content/$1.html [NC,L] 
```

知道我做错了什么吗？网络上的例子很多，但不能完全正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:13:53.867

您的重写规则（模式）太宽泛，会捕获已经重写的 URL。覆盖已经重写的 URL 将导致无限的重写循环，Apache 会智能地检测并以 500 错误中止此类请求。

[RewriteRule Last [L] 标志不起作用？](https://stackoverflow.com/questions/6797998/rewriterule-last-l-flag-not-working)

**例如：**

*   原始请求：`/hello/pink-kitten`
*   第一次（初始）重写：`/hello/pink-kitten.html`
*   第二个循环：重写为`/hello/pink-kitten.html.html`
*   第三个周期：重写为`/hello/pink-kitten.html.html.html`
*   ... 等等

更正确的方法（**少数可能的方法之一**） - 将在重写之前检查此类 html 文件是否存在：

```
# add .html file extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^content/(.+)$ /content/$1.html [L] 
```

# delphi - 如何克隆 TPopupMenu 的菜单项？

> ID：10604649
> 
> 赞同：3
> 
> 时间：2012-05-15T16:04:52.363
> 
> 标签：delphi, delphi-7

我想将整个 TMenuItem 及其子项克隆到另一个 TPopupMenu。这是一个[很好的代码](http://embarcadero.newsgroups.archived.at/public.delphi.vcl.components.using/200809/080907220.html)：

```
function CloneMenuItem(SourceItem: TMenuItem): TMenuItem;
var
  I: Integer;
Begin
  with SourceItem do
  Begin
    Result := NewItem(Caption, Shortcut, Checked, Enabled, OnClick, HelpContext, Name + 'Copy');
    for I := 0 To Count - 1 do
      Result.Add(CloneMenuItem(Items[I]));
  end;
end; 
```

以下工作正常（b1 是带有子菜单的 PopupMenu1.TMenuItem）：

```
PopupMenu2.Items.Add(CloneMenuItem(b1)); 
```

问题是如果 SourceItem 是根项目，我无法克隆*整个TPopupMenu。*例如：

```
PopupMenu2.Items.Add(CloneMenuItem(PopupMenu1.Items)); 
```

不会工作。我只能*看到*1 个项目，就好像它是一个分隔符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T17:02:06.840

你不能`TPopupMenu.Items`像那样克隆。即使`TPopupMenu.Items`是一个`TMenuItem`对象，它也不是一个实际的菜单项，它只是一个用于托管其他`TMenuItem`对象的容器。您将不得不遍历这些孩子并单独克隆它们，例如：

```
for I := 0 to PopupMenu1.Items.Count-1 do
  PopupMenu2.Items.Add(CloneMenuItem(PopupMenu1.Items[I])); 
```

# ruby-on-rails - Rails 3 - 相互验证模型的多个实例

> ID：10604651
> 
> 赞同：1
> 
> 时间：2012-05-15T16:04:57.880
> 
> 标签：ruby-on-rails, forms, validation, architecture, refactoring

我正在开发一个处理员工考勤卡的应用程序，并且我正在尝试创建一个表单，允许员工在给定的时间段内编辑他们所有的打卡。我使用[这个 RailsCast](http://railscasts.com/episodes/198-edit-multiple-individually)作为表单的基础，并且能够毫无问题地启动和运行：

```
class BlocksController < ApplicationController

def update
    @block = Block.find_by_id(params[:id])
    @punches = @block.punches

    keys = params[:punches].keys
    values = keys.map { |k| params[:punches][k] }
    @punches = Punch.update(keys, values).reject { |p| p.errors.empty? }
    if @punches.empty?
      flash[:notice] = "Punches updated"
      redirect_to employee_timecard_path(current_user, @block.timecard)
    else
      render :action => "edit"
    end
  end 
```

但是，问题是我需要能够验证用户没有以没有意义的方式编辑他们的打卡（例如，将他们的打卡打卡更改为晚于打卡打卡，或相反亦然）。

我尝试通过自定义模型验证来执行此操作，但是通过验证的各个模型不知道正在更新的其他值，因此批处理中的第一个操作是将其新值与其他值的更新前值进行比较。

我能想到的唯一其他方法是循环`params[:punches]`发送到控制器中的更新方法，但这似乎与“胖模型，瘦控制器”的约定背道而驰。

有什么办法可以让我的蛋糕也吃吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-10T23:09:20.727

我正在努力解决类似的问题：

1.  时间表有开始和结束日期
2.  时间表不应相互重叠

以下是我的结论：

这里有两种有效性：

1.  单个模型的有效性（例如是否存在开始日期？）
2.  模型集合的有效性（例如，任何一对实例是否重叠？）

我觉得只有第一种类型实际上是各个模型的责任。但第二种类型也不是控制器的责任。

在 OP 的情况下，我不确定是否最好在 Punch 类上定义一个验证器，或者创建一个负责验证整个出拳列表的新对象，但是一种或另一种方式应该有一些对象了解整个集合并可以决定它是否有效。

# c# - 正确显示 USB 摄像头输入到 winforms 图片框的问题

> ID：10604652
> 
> 赞同：0
> 
> 时间：2012-05-15T16:04:58.593
> 
> 标签：c#, winforms, webcam

我有一个 USB 摄像机，它会吐出 640x480 的图像数据帧，我想将其放入 winforms pictureBox 中。当我使用 SetPixel 将数据映射到图片框时，图像看起来很好，但是 SetPixel 速度非常慢，所以我尝试了这个：

```
 void CreateBitmap()
    {
        int width = bitmap.Width;
        int height = bitmap.Height;
        int n = 0;

        // copy normalized data into 1D array
        lock (imageDataLocker)
        {
            for (int i = 0; i < width; ++i)
            {
                for (int j = 0; j < height; ++j)
                {
                    Color c = Colorizer.GetColor(imageData[i, j]);
                    rgbValues[n] = c.R;
                    rgbValues[n + 1] = c.G;
                    rgbValues[n + 2] = c.B;
                    n += 3;
                }
            }
        }

        // Copy image data into the bitmap
        Rectangle rect = new Rectangle(0, 0, width, height);
        BitmapData bitmapData = bitmap.LockBits(rect, ImageLockMode.WriteOnly, bitmap.PixelFormat);
        IntPtr ptr = bitmapData.Scan0;
        int bytes = rgbValues.Length;
        System.Runtime.InteropServices.Marshal.Copy(rgbValues, 0, ptr, bytes);
        bitmap.UnlockBits(bitmapData);
    } 
```

其中 rgbValues 是一个 1D 字节数组，每个像素包含 3 个字节，imageData 是一个由相机提供的 2D int 数组，而 bitmap 具有 24bppRgb 格式。我对此没有任何错误，但是当我将位图分配给我的图片框的 BackgroundImage 时，会出现奇怪的条带效果：

![摄像头](../Images/ec95e1cb1efacd7f3e16b3347028d2ac.png)

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:45:38.613

首先，我认为你的外循环应该是 j=0; j

我用这个简单的模式测试了这个，它用左半边蓝色和右半边黑色制作位图。

```
 Bitmap bm = new Bitmap(16, 16, System.Drawing.Imaging.PixelFormat.Format24bppRgb);

        BitmapData bitmapData = bm.LockBits(new Rectangle(0,0,16,16), ImageLockMode.WriteOnly, bm.PixelFormat);
        IntPtr ptr = bitmapData.Scan0;

        byte[] rgbValues = new byte[16 * 16 * 3];

        int b = 0;

        for (int y = 0; y < bm.Height; y++)
        {
            for (int x = 0; x < bm.Width; x++)
            {
                if (x < 7)
                {
                    rgbValues[b++] = 255; // BLUE, not red!
                    rgbValues[b++] = 0; // g
                    rgbValues[b++] = 0; // r
                }
                else
                {
                    rgbValues[b++] = 0; // r
                    rgbValues[b++] = 0; // g
                    rgbValues[b++] = 0; // b

                }
            }
        }

        int bytes = rgbValues.Length;
        System.Runtime.InteropServices.Marshal.Copy(rgbValues, 0, ptr, bytes);
        bm.UnlockBits(bitmapData);
        pictureBox1.Image = bm;

    } 
```

另外，请注意，您写入的第一个字节应该是蓝色分量，然后是绿色，然后是红色。

# ios - 从属性列表添加注释 - 使用未声明的标识符

> ID：10604653
> 
> 赞同：0
> 
> 时间：2012-05-15T16:05:02.827
> 
> 标签：ios, xcode, annotations, property-list, undeclared-identifier

我正在尝试从属性列表中添加注释。我在这里找到了解决方案：

> [属性列表中的 Xcode 注释](https://stackoverflow.com/questions/10437578/xcode-annotation-from-property-list)

但它给了我一个错误“**使用未声明的标识符“racks”** ”和“**使用未声明的标识符“GetRacks”** ”：

```
 // Add annotations
    NSArray *bikePath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *bikeDocumentsDirectory = [bikePath objectAtIndex:0];
    NSString *path = [bikeDocumentsDirectory stringByAppendingPathComponent:@"data.plist"];

    NSDictionary* bikesDictionary = [[NSDictionary alloc] initWithContentsOfFile:path];
    GetRacks racks = [[GetRacks alloc] initWithDictionary:bikesDictionary];

    for(RackAnnotation *rackAnnotation in [racks getRacks])
    {
        [mapView addAnnotation:rackAnnotation];
    } 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:08:53.920

你没有初始化

```
GetRacks racks 
```

当 racks 不是指针时。

```
GetRacks * racks = [[GetRacks alloc] initWithDictionary:bikesDictionary]; 
```

会工作得很好！

编辑：改变这个：

```
GetRacks racks = [[GetRacks alloc] initWithDictionary:bikesDictionary]; 
```

对此：

```
GetRacks * racks = [[GetRacks alloc] initWithDictionary:bikesDictionary]; 
```

# javascript - 使用 HTML5 像素化视频流

> ID：10604662
> 
> 赞同：0
> 
> 时间：2012-05-15T16:05:34.833
> 
> 标签：javascript, html, html5-video

我正在玩弄一些 HTML5 的东西，并想将[Close Pixelate](https://github.com/desandro/close-pixelate)库与[getUserMedia API](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)结合起来。我想即时对流进行像素化（我得到的帧速率会非常低）。这是可能吗？我只想给 Close Pixelate 视频对象而不是图像。

[Rob Hawkes 的这段视频](http://vimeo.com/18096732)给了我这个想法。

解决方案：http: [//jsfiddle.net/N46QF/](http://jsfiddle.net/N46QF/)（您需要在 chrome://flags/ 中激活 MediaStream 的 Google Chrome Canary 才能使其工作）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:22:01.997

是的，我认为这是可能的。但是，为了在像素级别操作视频的帧，您需要先使用间隔将它们绘制到画布上（参见[fiddle](http://jsfiddle.net/H585z/1/)，在 firefox 和 chrome 中测试）。

由于 Close Pixelate 库需要一个图像作为输入（无论如何它都会立即将其绘制到画布上），因此您需要稍微修改代码以便可以直接传入画布。

我不知道该库是否可以承受间隔内的重复实例化，或者您的帧速率是否可以接受，但我认为它应该很容易测试。我肯定有兴趣看到结果！

如果一切顺利，可能值得考虑分叉 Close Pixelate 库并对其进行修改以允许图像或画布作为输入，因为这似乎是一个有用的扩展。

# ruby-on-rails-3 - Rails 3.2 和薄

> ID：10604664
> 
> 赞同：2
> 
> 时间：2012-05-15T16:05:36.567
> 
> 标签：ruby-on-rails-3, thin

我正在使用 Rails 3.2 和瘦服务器，但后者无法启动。嗯......它开始但立即停止

```
rails s
=> Booting Thin
=> Rails 3.2.3 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
>> Thin web server (v1.3.1 codename Triple Espresso)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:3000, CTRL+C to stop
Exiting 
```

Gem 'thin' 在 Gemfile 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T06:39:02.917

我有同样的问题。我正在使用 faye-rails 和薄宝石，并在文件中有一条 faye 的路线`config/routes.rb`。我选择了这条路线，并且没有退出就开始了。

# java - 类的包名更改后，Java 对象无法反序列化。我能做些什么呢？

> ID：10604672
> 
> 赞同：2
> 
> 时间：2012-05-15T16:05:51.683
> 
> 标签：java, serialization, deserialization

众所周知，当我反序列化一个序列化的 Java 对象树时，树中的所有类都必须在类路径中。因此，由于有人将一些类移动到另一个包中，反序列化会抛出 ClassNotFoundException。

我的问题是，有没有比实现我自己的序列化/反序列化更简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T10:44:31.897

好的，我意识到这个问题可能是重复的。[斯蒂芬对上一篇文章的回答](https://stackoverflow.com/a/5305751/176569)对我来说很好，我可以反序列化那些被移动到另一个包的类。为了记录，我把我使用的 ObjectInputStream 的子类放在这里。

```
public class ClassNameMappingObjectInputStream extends ObjectInputStream {

    public static Map<String, Class> classNameMapping = initclassNameMapping(); 

    private static Map<String, Class> initclassNameMapping(){
        Map<String, Class> res = new HashMap<String, Class>();
        res.put("com.lsy.nlm.report.filter.Filter", com.lsy.nlm.filter.Filter.class);
        res.put("com.lsy.nlm.report.filter.FilterSummary", com.lsy.nlm.filter.FilterSummary.class);
        res.put("com.lsy.nlm.report.filter.TopFilter", com.lsy.nlm.filter.TopFilter.class);
        return Collections.unmodifiableMap(res);
    }

    public ClassNameMappingObjectInputStream(InputStream in) throws IOException {
        super(in);
    }

    protected ClassNameMappingObjectInputStream() throws IOException, SecurityException {
        super();
    }

    @Override
    protected java.io.ObjectStreamClass readClassDescriptor() 
            throws IOException, ClassNotFoundException {
        ObjectStreamClass desc = super.readClassDescriptor();
        if (classNameMapping.containsKey(desc.getName())){
            return ObjectStreamClass.lookup(classNameMapping.get(desc.getName()));
        }
        return desc;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:24:28.870

我认为[Stephen C 上面提供的](https://stackoverflow.com/a/5305751/697630)关于更改类描述符的链接可能是最好的。我希望我在几个月前必须实施类似的事情时就知道这一点。

虽然我不确定它是否会起作用，因为在我的情况下，原始类已经发展得如此之多，以至于它们不再反映原始结构，因此它需要在幕后进行大量木工才能使其工作。

无论如何，最近我不得不解决一个类似的问题。就我而言，我创建了一个迁移器类。在其中，我使用 seconday 类加载器来加载我的类的旧版本（原始包中的那些），并用它们提取序列化对象中的信息，然后将其复制到它们的新版本中（新版本中的那些）包结构）。不幸的是，如果没有一定数量的 Java 反射，这种复制就无法完成，因为我正在使用两个单独的类加载器。

# animation - 在 iPad 应用程序中创建动画文本的最佳方式？

> ID：10604674
> 
> 赞同：1
> 
> 时间：2012-05-15T16:05:55.700
> 
> 标签：animation, ios5

有人对如何在类似于此 Ron Paul 视频的应用程序中创建动画文本效果有任何想法吗？ [http://www.youtube.com/watch?v=uhxBM8ebECO](http://www.youtube.com/watch?v=uhxBM8ebECo)

只是创建一个嵌入式视频？核心动画？

我知道这是一个相当抽象的问题，但是，只是好奇我应该从哪个方向开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:20:50.343

看着那个视频，我看到了两个独立的运动元素——各种动画文本元素和相机。每个都可以独立移动（即，当相机缩小、旋转和缩放另一部分时，文本元素就位）。根据您感兴趣的动画的复杂性，Core Animation 是一种选择，但对于视频之类的东西，我会在 OpenGLES 中实现它。您只需要一种机制来指定哪些元素在时间轴上移动（XML、API 等），进行一些计算以将时间轴的所有这些时刻放在一个整体中，并对动画进行补间。没有听起来那么难，真的。根据您的需要，您可以将贝塞尔曲线作为动画路径（文本元素或相机）包含在内，但这会使事情变得有些复杂。

嵌入视频也是一种选择，但您无法动态创建这些令人印象深刻的文本。

# android - 在基于视图的应用程序中测量帧速率

> ID：10604681
> 
> 赞同：0
> 
> 时间：2012-05-15T16:06:32.977
> 
> 标签：android

在标准的“基于视图”的 Android 应用程序中测量帧速率的最佳方法是什么？我没有任何自定义视图或使用 OpenGL 或类似的东西，只是在布局中存储 Android 视图。我对滚动 ListView 时测量帧速率特别感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:21:27.147

您需要扩展`ListView`并覆盖其`onDraw`方法和调用时间`super.onDraw`。

# git - 由于较早的还原，无法集成到主分支

> ID：10604689
> 
> 赞同：0
> 
> 时间：2012-05-15T16:07:00.060
> 
> 标签：git, git-merge, svn-reintegrate

我有一个主题分支，并将我的更改合并到主分支。由于一些错误，我不得不回滚我的更改。在我触摸它之前，我通过手动将代码更改回原来的方式来完成此回滚。

这是因为我们即将发布，因此立即解决问题很重要。

现在，我修复了这个错误，并试图再次将我的主题分支合并到主分支。由于相同的提交 ID，我遇到了问题。我收到以下错误消息：

`[code] Merge.warning: Merge commit already exists between origin/topic and master`

有没有办法解决这个问题？

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:19:53.263

您可以执行 a`git revert`来回滚您的更改，而不是手动执行。同样的方式，你`git revert`现在可以做一个回滚。

# c++ - 使用 vDSP_deq22（双二阶 IIR 滤波器）进行滤波器后的噪声/失真

> ID：10604690
> 
> 赞同：3
> 
> 时间：2012-05-15T16:07:08.423
> 
> 标签：c++, objective-c, signal-processing, accelerate-framework, vdsp

我正在为[Novocaine](http://alexbw.github.com/novocaine/)开发一个 DSP 类（obj-c++） ，但我的过滤器似乎只会对信号造成噪声/失真。

我在这里发布了我的完整代码和系数：[https](https://gist.github.com/2702844) ://gist.github.com/2702844 但它基本上归结为：

```
// Deinterleaving...
// DSP'ing one channel:
NVDSP *handleDSP = [[NVDSP alloc] init];
[handleDSP setSamplingRate:audioManager.samplingRate];
float cornerFrequency = 6000.0f;
float Q = 0.5f;
[handleDSP setHPF:cornerFrequency Q:Q];
[handleDSP applyFilter:audioData length:numFrames];

// DSP other channel in the same way
// Interleaving and sending to audio output (Novocaine block) 
```

有关完整代码/上下文，请参阅要点。

系数：

```
2012-05-15 17:54:18.858 nvdsp[700:16703] b0: 0.472029
2012-05-15 17:54:18.859 nvdsp[700:16703] b1: -0.944059
2012-05-15 17:54:18.860 nvdsp[700:16703] b2: 0.472029
2012-05-15 17:54:18.861 nvdsp[700:16703] a1: -0.748175
2012-05-15 17:54:18.861 nvdsp[700:16703] a2: 0.139942 
```

（全部除以`a0`）

由于我假设系数的顺序为：（`{ b0/a0, b1/a0, b2/a0, a1/a0, a2/a0 }`请参阅：[IIR 用于峰值 EQ 的系数，如何将它们传递给 vDSP_deq22？](https://stackoverflow.com/questions/10375359/iir-coefficients-for-peaking-eq-how-to-pass-them-to-vdsp-deq22)）

是什么导致失真/噪音（过滤器不起作用）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T20:43:41.637

**更新：**我建议大家使用我在 github 上发布的 DSP 类：[https](https://github.com/bartolsthoorn/NVDSP) ://github.com/bartolsthoorn/NVDSP它可能会为您节省很多工作。

搞定了，哇！日本人万岁：http: [//objective-audio.jp/2008/02/biquad-filter.html](http://objective-audio.jp/2008/02/biquad-filter.html)

applyFilter 方法必须是：

```
- (void) applyFilter: (float *)data frames:(NSUInteger)frames {
    /*
     The first two samples of data being passed to vDSP_deq22 have to be initialized from the previous call. So, you'd want to hold onto a float buffer and feed the tailing two samples after a vDSP_deq22 call back to the front of that array for the next time you call. (Alex Wiltschko)
     */

    // Thanks a lot to: http://objective-audio.jp/2008/02/biquad-filter.html

    // Provide buffer for processing
    float *tInputBuffer = (float*) malloc((frames + 2) * sizeof(float));
    float *tOutputBuffer = (float*) malloc((frames + 2) * sizeof(float));

    // Copy the data
    memcpy(tInputBuffer, gInputKeepBuffer, 2 * sizeof(float));
    memcpy(tOutputBuffer, gOutputKeepBuffer, 2 * sizeof(float));
    memcpy(&(tInputBuffer[2]), data, frames * sizeof(float));

    // Do the processing
    vDSP_deq22(tInputBuffer, 1, coefficients, tOutputBuffer, 1, frames);

    // Copy the data
    memcpy(data, tOutputBuffer, frames * sizeof(float));
    memcpy(gInputKeepBuffer, &(tInputBuffer[frames]), 2 * sizeof(float));
    memcpy(gOutputKeepBuffer, &(tOutputBuffer[frames]), 2 * sizeof(float));

    free(tInputBuffer);
    free(tOutputBuffer);
} 
```

全班：[https ://github.com/bartolsthoorn/NVDSP](https://github.com/bartolsthoorn/NVDSP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T11:49:07.347

复制数据：

```
memcpy(data, tOutputBuffer+2, frames * sizeof(float)); 
```

它会起作用

# algorithm - 最快的分拣技术

> ID：10604693
> 
> 赞同：4
> 
> 时间：2012-05-15T16:07:20.647
> 
> 标签：algorithm, sorting, optimization

过去几天我一直在尝试各种排序算法。从 1) 具有 O(n^2) 时间复杂度排序的算法 2) O(n log n) 时间复杂度与就地和非就地排序技术开始

我想知道是否有任何排序算法可以在线性时间或更短的时间内排序。我听说基数排序在最好的情况下接近线性时间排序，具有一定的空间复杂性。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:14:25.350

最快的通用排序是合并排序，它可以利用 map/reduce 模式（快速排序不能）

但是，如果您对数据有所了解，在某些情况下，数据集的排序甚至可以更快。

你不能比没有意义的 O(n) 更快地排序：你必须至少处理每个元素一次

针对您提到的基数排序：

（来自维基百科）

对于具有 k 位或更少位数的 n 个键，基数排序的效率为 O(k·n)。有时 k 表示为一个常数，这将使基数排序（对于足够大的 n）比最好的基于比较的排序算法更好，这些算法都是 O(n·log(n))。然而，一般来说，k 不能被认为是一个常数。特别是，在所有键都是不同的常见（但有时是隐含的）假设下，那么 k 必须至少是 log(n) 的数量级，这不会导致比其他类型更好的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T16:29:55.297

您永远无法排序小于 O(N)，因为您必须查看所有 N 个元素以确定列表是否已排序 - 所以那里就是 O(N)。如果您通过与列表中的其他元素进行比较来进行排序，那么您也无法比 O(NlogN) 更快地排序 - 但如果您对数据有所了解，则可以。例如，如果您知道您的数据是英文字符串，那么您可以在排序之前将它们放入存储桶中。例如，将所有以 A 开头的字符串放入一个桶中，将 B 放入另一个桶中，依此类推。这会很快。不过，您可能需要使每个存储桶相当大 - 可能足以容纳 1000 个字符串，因为并非所有存储桶都包含相同数量的字符串。

然后对各个桶进行排序，这将很快。

对于数据的均匀分布（即以每个字母开头的 400 个字符串，当然你不会有），我猜测这将是 O(N) + O(Nlog N/M)，其中 M 是数字桶。

您显然可以为第二个字母嵌套存储桶，但是您拥有的存储桶越多，您的空间需求就越大，因为必须动态扩展存储桶会花费您的执行时间，因此您希望它们足够大以开始使用。这意味着它们中的许多将比它们需要的大得多，因为您并不了解有关数据分布的所有信息。

图书馆排序可能也值得一看。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T16:17:47.037

一些以线性时间运行的排序算法是计数排序、基数排序和桶排序。这些算法的问题是它们需要对输入进行假设。计数排序和基数排序假设输入由小范围内的整数组成。桶排序假设输入是由一个随机过程生成的，该过程将元素均匀地分布在一个区间上。[第 3-6 页](http://cs.wellesley.edu/~cs231/fall01/linear-sorting.pdf)，很好地概述了上述算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-31T04:55:51.963

如果您想了解整数值的最快排序技术，那么我建议您参考以下链接： [https ://github.com/fenilgmehta/Fastest-Integer-Sort](https://github.com/fenilgmehta/Fastest-Integer-Sort)

它对大数组使用基数排序和计数排序，对小数组使用合并排序和插入排序。据统计，这种排序算法比 C++ std::sort 处理整数值要快得多。

`std::sort`对于“int64_t array[10000000]” ，它比 C++ STL 快 6 倍。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-15T16:09:56.240

（编辑我之前的坏帖子，对不起大家）

提高排序算法性能的一种方法是并行处理：

[并行排序算法](https://stackoverflow.com/questions/1897458/parallel-sort-algorithm)

在这篇文章中，使用整数列表比较了顺序和并行快速排序算法的性能。双核机器的性能显着增强。根据这篇文章，QuickSort 甚至可以在具有 n 个处理器的系统上以 O(log n) 执行：

[http://en.wikipedia.org/wiki/Merge_sort#Parallel_processing](http://en.wikipedia.org/wiki/Merge_sort#Parallel_processing)

拥有这么多可用的内核可能听起来不现实，但对于基础设施即服务（亚马逊云、Azure ......），它可以成为关键任务实施的可用选项。

# networking - 使用 iText 将 JUNG 可视化输出到 PDF

> ID：10604695
> 
> 赞同：0
> 
> 时间：2012-05-15T16:07:29.380
> 
> 标签：networking, pdf, visualization, itext, jung

我正在尝试使用 iText 库将 JUNG 网络输出到 PDF。

许多解决方案似乎在使用库捕获屏幕并将其输出为某种格式（例如 EPS）之前在框架中显示图形。但是，我的应用程序会自动构建许多网络并输出它们，因此在保存到文件之前在屏幕上显示每个网络并不是一个很好的解决方案。

我已经进行了一些搜索，但并没有完全找到我在做什么。将图形输出到 PNG 似乎很简单（请参阅[此处](https://stackoverflow.com/questions/10420779/jung-save-whole-graph-not-only-visible-part-as-image/10426669#10426669)），但 PNG 的质量不适合我的需要。

我当前的代码如下，基于将图表从 JFreeChart 写入 PDF（参见[此处](http://viralpatel.net/blogs/2010/02/generate-pie-chart-bar-graph-in-pdf-using-itext-jfreechart.html)）。我正在尝试获取一个 Graphics2D 对象，我可以将图形“绘制”到该对象上，然后输出到 PDF。此代码生成空指针异常，因为从 visualise.getGraphics() 返回的图形对象为空。

任何建议、代码片段或在线示例将不胜感激。

```
public void write() throws IOException, DocumentException {

    // Open the PDF file for writing
    this.document = new Document();
    this.writer = PdfWriter.getInstance(this.document, new FileOutputStream(this.fileName));
    document.open();
    PdfContentByte contentByte = writer.getDirectContent();
    PdfTemplate template = contentByte.createTemplate(WIDTH, HEIGHT);
    //Graphics2D graphics2d = template.createGraphics(WIDTH, HEIGHT, new DefaultFontMapper());

    // Apply a layout to the graph
    Layout<Vertex, Edge> layout = new CircleLayout<Vertex, Edge>(this.network);
    layout.setSize(new Dimension(WIDTH, HEIGHT));

    // Draw on the graphics 2D object
    VisualizationImageServer<Vertex, Edge> visualise = new VisualizationImageServer<Vertex, Edge>(layout, new Dimension(WIDTH, HEIGHT));
    visualise.setPreferredSize(new Dimension(WIDTH + 50, HEIGHT + 50));
    visualise.setDoubleBuffered(false);
    Graphics2D graphics2d = (Graphics2D) visualise.getGraphics();
    visualise.paintComponents(graphics2d);

    graphics2d.dispose();
    contentByte.addTemplate(template, 0, 0);

    this.document.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:58:46.880

约书亚提供的答案是正确的。我想我永远不会搜索无头的！

我不得不稍微修改[http://sourceforge.net/projects/jung/forums/forum/252062/topic/1407188](http://sourceforge.net/projects/jung/forums/forum/252062/topic/1407188)的代码，因为我发现从 BufferedImage 创建 Graphics2D 对象是不合适的。相反，Graphics2D 应该由 PDFTemplate 制成。为了将来参考，我已经发布了我的工作代码。

```
public void write() throws IOException, DocumentException {

    // Open the PDF file for writing - and create a Graphics2D object
    this.document = new Document();
    this.writer = PdfWriter.getInstance(this.document, new FileOutputStream(this.fileName));
    document.open();
    PdfContentByte contentByte = writer.getDirectContent();
    PdfTemplate template = contentByte.createTemplate(WIDTH, HEIGHT);
    Graphics2D graphics2d = template.createGraphics(WIDTH, HEIGHT, new DefaultFontMapper());

    // Apply a layout to the graph
    Layout<Vertex, Edge> layout = new CircleLayout<Vertex, Edge>(this.network);
    layout.setSize(new Dimension(WIDTH / 2, HEIGHT / 2));

    // Create a visualisation object - set background color etc
    VisualizationViewer<Vertex, Edge> visualise = new VisualizationViewer<Vertex, Edge>(layout, new Dimension(WIDTH, HEIGHT));
    visualise.setSize(WIDTH, HEIGHT);
    visualise.setBackground(Color.WHITE);

    // Create a container to hold the visualisation
    Container container = new Container();
    container.addNotify();
    container.add(visualise);
    container.setVisible(true);
    container.paintComponents(graphics2d);

    // Dispose of the graphics and close the document
    graphics2d.dispose();
    contentByte.addTemplate(template, 0, 0);
    this.document.close();

} 
```

# sencha-touch-2 - 如何在 Sencha Touch2 中通过 REST 代理执行 RESTful 请求

> ID：10604704
> 
> 赞同：1
> 
> 时间：2012-05-15T16:07:58.633
> 
> 标签：sencha-touch-2

我想执行一个 RESTful 获取请求，例如

```
"/commments/123" <br/> 
```

但它总是要求像这样的附加参数

```
:<br/>
" _dc=1337095865783&page=1&start=0&limit=25" <br/> 
```

请告诉我如何将附加参数转换为 RESTful 请求

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:51:26.733

您可以通过在代理对象（limitParam、enablePagingParams、startParam 等）上将任何 xxxParam 选项设置为 false 来自动删除 Sencha 添加的额外参数，还可以使用 noCache 禁用 _dc 缓存查询字符串：

```
proxy: {
    type: 'rest',
    url: '/comments',
    noCache: false,
    limitParam: false,
    enablePagingParams: false,
    startParam: false
} 
```

如果您遵循 Sencha 的模型/商店结构，那么您可以为您的商店创建一个休息代理并告诉它包含 id（默认情况下）：

```
new Ext.data.Store({
    model: "comments",
    autoLoad: false,
    proxy: {
        type: 'rest',
        url: '/comments',
        appendId: true, //default
        noCache: false,
        limitParam: false,
        enablePagingParams: false,
        startParam: false
    }
});

// Collection url: /comments
// Instance url  : /comments/123 
```

最后，您可以使用代理上的 buildUrl 方法为请求创建自定义 Url 格式。

参考[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.Rest](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.Rest)了解更多详情。

# c# - 将类从 asp.net 4 转换为 asp.net 3.5 (Massive Lib)

> ID：10604707
> 
> 赞同：0
> 
> 时间：2012-05-15T16:08:19.203
> 
> 标签：c#, asp.net, .net-4.0, .net-3.5, dynamic-data

我一直在使用大量的[Massive Lib (github)](https://github.com/robconery/massive)

对于 asp.net 4 项目。

我现在从以前的开发人员那里继承了一个项目，它在 asp.net 3.5 中。

大多数“大量”我仍然可以使用，但是由于 asp.net 4 特性，有 2 个类无法使用。我的计划是创建 2 个具有相同名称的新类来修补相同的功能。

这两个类是“DynamicObject”和“ExpandoObject”

我需要一些如何创建两个类来修补 asp.net 4 功能。

唯一的问题是我不知道如何去做（我已经在谷歌上狠狠地打了一遍，除了需要使用 Dictionary 的想法之外什么都没有）

任何人有任何想法或可以指出我正确的方向吗？

（这两个类是asp.net内置的）

谢谢

编辑：

我知道 4.0 不能在 3.5 上运行，而且 4.0 只是“更好”但是升级不在我的掌控之中，我知道大规模使用 4.0，但是我想模仿的类不是大规模的，而是4.0 框架。

我希望有一种方法可以重新创建这两个类并以某种方式模仿那里的功能，但我想不是

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:11:09.750

你不能。动态是 .Net 4 支持的新功能之一，特别是 3.5 中没有的新增功能

最好的办法是将应用程序托管在 4.0 环境中，以便您可以使用 DLL。

# architecture - 架构/设计新程序

> ID：10604708
> 
> 赞同：3
> 
> 时间：2012-05-15T16:08:24.350
> 
> 标签：architecture, methodology

可以说，我在本科时有一个不足的程序设计/体系结构课程，因此我真的在努力解决如何设计有问题的程序*。我想知道是否有一组资源（书籍、网站等）或问题（有点像 projecteuler.net）** 或路径来帮助我解决这个缺陷。

我正在寻找资源/问题/等，以更好地学习编程中的设计/架构模式。

一个很好的例子：对于我的工作，我用 PHP 实现了一个 MVC 框架（自定义，因为我想学习）。我需要将用户管理融入这个框架，并且只是在努力实现（我知道使用 $_SESSION var，我只想让用户管理像其他人一样模块化和灵活）。 **这篇文章不是为了解决我的用户管理问题**。 *我知道解决设计问题自然会解决这个问题。*

我环顾了这些论坛，并没有看到任何可以利用的资源列表。如果有人有任何事情或将我指向我错过的帖子，请随时向我指出。我非常感谢可能向我指出的任何见解/帮助/资源/等。

*我熟悉并且可以使用 OOP/MVC 框架，虽然不完全精通，但我可以做到 **ProjectEuler，我在其中往往比其他任何东西都更实用。我正在慢慢努力集成 OOP 等。但是我在编程方面的架构技能很糟糕。

* * *

**tl; dr：** 我正在寻找资源/问题/等，以更好地学习编程中的设计/架构模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:44:26.013

我不太确定问题是什么，但如果您只是在寻找一些资源，有一本很好的架构书籍 - [Martin Fowler 的企业应用程序架构模式](http://www.martinfowler.com/books.html#eaa)，其中一些部分可[在线获得。](http://martinfowler.com/eaaCatalog/)

比Gamma 总结的[GoF 模式还要多。](https://rads.stackoverflow.com/amzn/click/com/0201633612)

[实践中的软件架构](http://books.google.cz/books?id=mdiIu8Kk1WMC&lpg=PP1&dq=software%20architectur%20in%20practice&pg=PR4#v=onepage&q&f=false)也很有用。

一些基本的架构介绍在[这篇论文](http://www.cs.cmu.edu/afs/cs/project/vit/ftp/pdf/intro_softarch.pdf)中，它有点旧，但仍然有效......

基本上，GoF 模式、企业模式和[GRASP](http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29)是您应该了解的模式......

这个有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:32:35.950

我将从[Head First Design Patterns和](https://rads.stackoverflow.com/amzn/click/com/0596007124)[Steve McConnell](https://rads.stackoverflow.com/amzn/click/com/0735619670)的 Code Complete 的架构部分开始。我认为这两个是对概念的最佳介绍，然后再进入其他内容。

# java - Regex 适用于 Regexpal 但不适用于 Java

> ID：10604709
> 
> 赞同：0
> 
> 时间：2012-05-15T16:08:26.167
> 
> 标签：java, regex, vb6

**注意：我刚学过正则表达式，所以它可能是一个糟糕的模式**

我破解了这个正则表达式

```
Begin VB\.Label\s+([^\s]+)\s+.+\s+Caption\s+=\s*("([^"]+)")\s+.+\s+Index\s+=\s*([0-9]+) 
```

匹配 VB6 .frm 文件中的这些表单控件

```
 Begin VB.Label lblError 
        AutoSize        =   -1  'True
        Caption         =   "Blah blah"
        Height          =   195
        Index           =   49
        Left            =   105
        TabIndex        =   31
        Top             =   3135
        Width           =   4455
     End 
```

当我在 Regexpal 上测试它时，它运行良好 ![正则表达式](../Images/1fec49dfd435d892b219c65298cd0292.png)

但`matcher.find()`只找到完全垃圾字符串

```
Error [&About] - "&About" 
```

这是我逃脱的 Java 匹配器

```
Pattern pat = Pattern.compile("Begin VB\\.Label\\s+([^\\s]+)\\s+.+\\s+Caption\\s+=\\s+(\"([^\"]+)\")\\s+.+\\s+Index\\s+=\\s+([0-9]+)"); 
```

编辑：这是实际匹配的：

```
 Begin VB.Menu mnuHelp 
     Caption         =   "&About"
     Index           =   5
  End 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:55:21.000

我的猜测是它与`.+`您的 RegEx 中的有关。尝试：

`Begin VB\.Label lblError[0-9A-Za-z\-\'\s\=\"\&]+\sIndex\s+=\s+[0-9]+`

我测试了它并且它有效。[在这里演示](http://regexr.com?30v8v)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:25:21.567

我建议您使用正则表达式朝不同的方向发展。您正在尝试解析输入中的特定标签，然后从该标签中提取某些值。

尝试在一个主正则表达式中完成所有操作很诱人，但这类正则表达式可能难以解析且非常不灵活。

我建议分两部分进行：

1.  拉出标签内容。
2.  从单个标签中拉出特定属性。

这将意味着类似以下内容：

```
/* A pattern to grab the entire label -- Everything from Begin to End */
Pattern pEntireLabel = Pattern.compile("Begin VB\.Label.*?End", Pattern.MULTILINE);

/* Patterns for each specific value you want. */
Pattern pCaption = Pattern.compile("Caption\s*=\s*(\S*)");
/* . . . etc. for each value you want.  . . . */

Matcher mEntireLabel = pEntireLabel.matcher(...);
while (mEntireLabel.find()) {
  String label = mEntireLabel.group(0);

  /* Now find the specific parameters inside the label */
  Matcher mCaption = pCaption.matcher(label);
  if (mCaption.find()) {
       caption = mCaption.group(1);
  }

  /* Reapply this same logic for each property you want. */

} 
```

这里的优点是适应性更强——如果您需要获取一个新参数，只需添加它很容易。如果您不再需要一个，则将其取出。如果标签中的格式可能缺少部分值，那么您将不会获得该参数，但您将获得其余参数，而不是整个正则表达式失败。等等等等。

# ruby-on-rails - 在 Rails 应用程序上使用 OAuth 2.0 访问 Fusion Tables API 的推荐 gem

> ID：10604713
> 
> 赞同：1
> 
> 时间：2012-05-15T16:08:34.660
> 
> 标签：ruby-on-rails, oauth, google-api, oauth-2.0, google-fusion-tables

我有一个 Rails 3 应用程序，我需要使用 OAuth 2.0 访问用户的 Fusion Table。我没有在应用程序中使用 OAuth 进行用户身份验证，我们有自己的用户数据库通过设计进行管理。

我环顾四周，似乎只有一个[用于处理 Fusion Tables API 的库](https://github.com/tokumine/fusion_tables)。但是，此库仅支持 Authlogic 和用户/密码登录，而不是 OAuth，因为它继承自[GData gem](https://github.com/tokumine/GData)。

有一个[用于处理 OAuth 的 Ruby 谷歌库](http://code.google.com/p/google-api-ruby-client/wiki/OAuth2)，但它不抽象 Fusion Tables 行为。

我还发现了一个特定于 Rails 的 gem [，它也可以处理 OAuth](https://github.com/pelle/oauth-plugin)，以及[google oauth2 的全域认证策略](https://github.com/zquestz/omniauth-google-oauth2)。

我的问题是：有没有人对这些库有任何经验？你会推荐哪些？

谢谢！

# django - 如何将更多对象附加到 json 文件？

> ID：10604717
> 
> 赞同：0
> 
> 时间：2012-05-15T16:08:49.050
> 
> 标签：django, json, django-managers

我正在尝试为 Django 项目创建测试装置。

我有一个**Question 子对象**和一个**Node 父对象**。

由于某些自定义管理器，无法使用**manage.py dumpdata**捕获父对象 Node 。

我正在尝试创建自己的夹具转储管理命令来捕获父对象和子对象。

如何将更多对象附加到 json 夹具文件？

```
import json
from django.core import serializers
try:
    original_dump = open(dump_file.name)

    data_list = []
    for object in serializers.deserialize('json', original_dump):
        data_list.append(object)

except IOError:
    print "I can't open your file"

from forum.models import Node
for node in Node.objects.all():
    data_list.append(node)

serialized_list = serializers.serialize('json', data_list)

write_file = open(dump_file.name, "w")
write_file.write(serialized_list)
write_file.close() 
```

这是节点管理器代码：

```
class NodeManager(CachedManager):
    use_for_related_fields = True

    def get_query_set(self):
        qs = NodeQuerySet(self.model)

        # If the node is an answer, question or comment we filter the Node model by type
        if self.model is not Node:
            qs = qs.filter(node_type=self.model.get_type())

        return qs

    def get_for_types(self, types, *args, **kwargs):
        kwargs['node_type__in'] = [t.get_type() for t in types]
        return self.get(*args, **kwargs)

    def filter_state(self, **kwargs):
        return self.all().filter_state(**kwargs) 
```

为什么父对象节点没有被写入serialized_list？

# tridion - SDL Tridion UI 使用 .Net 母版页

> ID：10604720
> 
> 赞同：5
> 
> 时间：2012-05-15T16:09:02.637
> 
> 标签：tridion

我有一个关于在使用母版页构建的 .net 网站中实现新 UI 的问题。

我们的解决方案使用 .NET 母版页。一切都按照[此处](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=UIU4SDLT2011SP1&lang=en-US#addHistory=true&filename=SE_LoadingDefaultTBBs.xml&docid=task_SE985885JFJFJJ995954FKKDFKF2CBB&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDoctask_SE985885JFJFJJ995954FKKDFKF2CBB&url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&pub=UIU4SDLT2011SP1&lang)记录的方式进行配置），因为我们的母版页使用文件末尾的 <--INIT_SITE_EDIT--> 代码来确保正确嵌入 siteedit /i 代码。当我们浏览网站并切换到 UI 界面时，实际上打开了母版页（即使拉入了正确的内容组件进行编辑）……但这使得用户无法在新的用户界面。

有没有一种简单的方法来解决我缺少的这个问题？我担心我将不得不对默认 UI/siteedit 代码块输出的代码进行一些操作，以放入正确的页面 tcm-id。

提前致谢，

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T16:46:19.733

为解决此问题，采取了以下步骤：

1.  从母版页模板中删除 SiteEdit/UI 模板构建块“为页面启用内联编辑”。
2.  在内容页面的 DWT 中（布局只是`<contentplaceholder>`标签，`<!--SITE_EDIT_INIT-->`在最后一个页面中添加值。
3.  重新发布所有内容。

希望这可以帮助。

# debugging - 预期的行为？MATLAB 忽略反序列化错误，调试模式除外

> ID：10604721
> 
> 赞同：0
> 
> 时间：2012-05-15T16:09:03.510
> 
> 标签：debugging, matlab, error-handling, deserialization

在下面的示例中，我不理解 Matlab 的行为。在反序列化时，它设置对象的属性。这导致`set.name`被执行。出于示例的目的，我构建了一个在此方法中引发错误的案例。在第一次反序列化中，错误被忽略且未处理；该函数只是在错误处停止执行，错误后的代码不执行。在第二次反序列化时，我设置`dbstop if error`了 ，现在按我的预期触发*了错误。*问题在示例下方。

```
>> clear all;
>> dbstatus;
>> type Tester.m;

classdef Tester < handle
    properties
        name;
    end

    methods
        function self = Tester()
            disp('Creating Tester object');
        end

        function set.name(self, val)
            global allnames
            if isequal(allnames, [])
                allnames = {};
            end
            if any(strcmp(allnames, val))
                fprintf(1, 'Name already exists. Will issue error.\n');
                error('Error: duplicate name %s', val);
                fprintf(1, 'Still here?\n');
            else
                self.name = val;
                allnames = [allnames self.name];
            end
        end
    end
end

>> t = Tester();
Creating Tester object
>> t.name = 'abc';
>> save('/tmp/fubar.mat', 't');
>> load('/tmp/fubar.mat')
Name already exists. Will issue error.
>> dbstop if error
>> load('/tmp/fubar.mat')
Name already exists. Will issue error.
Error using Tester/set.name (line 18)
Error: duplicate name abc

18                  error('Error: duplicate name %s', val);
K>> dbquit 
```

*   我应该对这种行为感到惊讶吗？
*   这个 MATLAB™ 是不是很奇怪，还是其他编程语言会出现类似的行为？
*   这样做有充分的理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:26:38.260

反序列化代码可能使用了`try-catch`不会重新引发错误的构造。我可以看到它的一些用途，因为加载代码中的错误至少会让您部分访问您的数据。另一方面，它应该在执行此类操作时向您发出警告。

当它真的无法加载数据时（例如，当您的`classdef`文件不在路径中时），它会显示一个通知。

所以恕我直言，你应该既高兴又悲伤：一个错误至少会给你部分结果，另一方面，MATLAB 至少应该发出警告，表明发生了这样的事情。

关于您的特定代码：我认为该`global`变量不是最好的方法，因为全局变量独立于您的对象存储。如果可能的话，我会选择一个类变量（即`static`）。因为现在您依赖于`names`工作区中的全局变量，据我所知，该变量并未保存在 MAT 文件中。

# transactions - cakephp 1.3 中的交易

> ID：10604730
> 
> 赞同：3
> 
> 时间：2012-05-15T16:09:39.083
> 
> 标签：transactions, cakephp-1.3

我的控制器中有：

```
$dataSource = $this->getDataSource(); // line 141
$dataSource->begin($this);
if(...){
   $dataSource->commit($this);
}else{
   $dataSource->rollback($this);
} 
```

但不起作用，我收到以下错误：

致命错误：在第 141 行调用 C:...\app\controllers\appusuarios_controller.php 中未定义的方法 AppusuariosController::getDataSource()

我必须导入 getDataSource() 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:40:41.523

我找到了一个解决方案，我希望它在未来对某人有所帮助[http://www.amitrawat.com/2011/08/30/transaction-cakephp/](http://www.amitrawat.com/2011/08/30/transaction-cakephp/)

# c# - xna4中的人链

> ID：10604733
> 
> 赞同：0
> 
> 时间：2012-05-15T16:09:54.763
> 
> 标签：c#, model, 3d, xna-4.0, chain

我有一个人模型，我想创建一个通过他们的手相互连接的人链。让我们暂时忽略物理学。管理模型链的最佳方法是什么？我怎样才能创建这个链条，以便人们可以从他们的朋友以任何角度站立（例如人链形成一个圆圈）？

# javascript - 修剪函数结果

> ID：10604736
> 
> 赞同：3
> 
> 时间：2012-05-15T16:10:29.297
> 
> 标签：javascript, jquery, ajax

我有一个从数据库返回值的函数。我的问题：该函数在返回值上添加了“”。我需要先修剪这些值，然后再将它们显示在用户屏幕上。

这是我的功能

```
 <script language="JavaScript" type="text/javascript">
    function handleProcedureChange(procedureid)
    {
        procedureid= document.form1.procedure.value;
        //alert(procedureid);
        var url ="some URL goes here"; 
        url=url+"ProcedureID="+procedureid;

        $.get(url, function(procedureResult) {
            $("#procedureDescription").text(procedureResult);
        });
    }
   </script> 
```

这`prcedureResult`是返回的值，也是我在显示它之前需要从引号中删除的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:13:29.197

使用它来删除引号：

```
$.get(url, function(procedureResult) {
     procedureResult = procedureResult.replace(/^"+|"+$/g, "");
     $("#procedureDescription").text(procedureResult);
}); 
```

这将从字符串`"`的开头 ( `^`) 和结尾 ( ) 替换为空 ( )`$``""`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T16:15:02.840

尝试以下函数，它将从字符串值中删除所有前导和尾随引号

```
function stripQuotes(str) {
  str = str.replace(/^\"*/, '');
  str = str.replace(/\"*$/, '');
  return str;
} 
```

可以这样使用

```
$.get(url, function(procedureResult) {
  procedureResult = stripQuotes(procedureResult);
  $("#procedureDescription").text(procedureResult);
}); 
```

# php - PHP页面加载失败

> ID：10604739
> 
> 赞同：0
> 
> 时间：2012-05-15T16:10:36.800
> 
> 标签：php

我的文件有问题。我必须多次刷新页面才能加载它。Chrome 调试工具通常会以红色显示文件。每个页面都会发生这种情况。

有没有办法跟踪问题所在？我的 Apache 的 error_log 什么也没说。奇怪的是，包含的 JS/CSS 文件位于失败的文件中。

![在此处输入图像描述](../Images/8388a1e8507b6e6316e8f7b1ea7364d0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:20:14.197

apache 的 access.log 是怎么说的？状态 200？

一般来说，解决此类问题的方法不是最简单的，但相当可靠的一种方法是侦听实际来自网络服务器的网络流量。您可以为此使用[wireshark](http://www.wireshark.org/)。然后看一下带主HTML页面的连接（解码TCP流）并思考。

总的来说，对我来说，这看起来像是网络服务器设置或互联网连接问题。或者可能是您的机器（运行 Web 浏览器）有问题：RAM 坏或其他问题。你可以在另一台电脑上试试吗？Chrome 也可以开玩笑：尝试重新启动它以防万一。

# iphone - 声音播放完毕后执行代码的最佳方式

> ID：10604740
> 
> 赞同：0
> 
> 时间：2012-05-15T16:10:39.670
> 
> 标签：iphone, objective-c, ios, audio

我希望在声音播放完毕后执行一些代码，但不知道最好的方法是什么。我看过`performSelectorOnMainThread....`但并不完全理解它——即使那样，我也不确定这是否是解决问题的最佳方法。我想在播放完声音后更改标签的文本颜色。我会很感激一些帮助。我的代码如下：

```
-(void) playWordSound:(UILabel *)label
{
    NSString *path;
    SystemSoundID soundId;
    switch (label.tag)
    {
        case 1:
            path = [[NSBundle mainBundle] pathForResource:@"humpty" ofType:@"wav"];
            break;
        case 2:
            path = [[NSBundle mainBundle] pathForResource:@"dumpty" ofType:@"wav"];
            break;
        case 3:
            path = [[NSBundle mainBundle] pathForResource:@"saty" ofType:@"wav"];
            break;
        case 4:
            path = [[NSBundle mainBundle] pathForResource:@"on 2" ofType:@"wav"];
            break;
        case 5:
            path = [[NSBundle mainBundle] pathForResource:@"a 3" ofType:@"wav"];
            break;
        case 6:
            path = [[NSBundle mainBundle] pathForResource:@"wall" ofType:@"wav"];
            break;
    }
        NSURL *url = [NSURL fileURLWithPath:path];
        AudioServicesCreateSystemSoundID( (CFURLRef)objc_unretainedPointer(url), &soundId);
    AudioServicesPlaySystemSound(soundId); 
    //this is where i want to change the color of the label
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:18:05.850

使用 AVPlayerItem 并为事件 AVPlayerItemDidPlayToEndTimeNotification 添加观察者。

例如

...

```
AVPlayerItem* playerItem = [AVPlayerItem playerItemWithAsset:asset];
[playerItem addObserver:self forKeyPath:@"status" options:0 context:&ItemStatusContext];
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(playerItemDidReachEnd:)
                                             name:AVPlayerItemDidPlayToEndTimeNotification
                                             object:playerItem];
player = [AVQueuePlayer playerWithPlayerItem:playerItem];
[player play]; 
```

...

```
- (void)playerItemDidReachEnd:(NSNotification *)notification {
    // Do stuff here
} 
```

……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:15:02.200

此方法可以帮助您：

```
OSStatus AudioServicesAddSystemSoundCompletion (
   SystemSoundID                           inSystemSoundID,
   CFRunLoopRef                            inRunLoop,
   CFStringRef                             inRunLoopMode,
   AudioServicesSystemSoundCompletionProc  inCompletionRoutine,
   void                                    *inClientData
); 
```

# c# - Linq to XML杀婴 - 有没有一种简单的权宜之计来促进孙子代替孩子？

> ID：10604744
> 
> 赞同：4
> 
> 时间：2012-05-15T16:10:54.653
> 
> 标签：c#, linq-to-xml

考虑以下代码段

```
using System;
using System.Xml.Linq;

class Program
{
    static void Main()
    {
        var family = XDocument.Parse("<p><c><g/></c></p>");

        var usurper = family.Root.Descendants("g");
        family.Root.Element("c").Remove();
        family.Root.Add(usurper);

        Console.WriteLine(family.ToString());
        Console.ReadKey();
    }
} 
```

我得到的输出是`@"<p />"`，但我想要`@"<p><g/></p>"`. 我可以理解它为什么会发生，并且它是正义的，但它不是我需要的输出。

如果我将行的顺序更改为

```
 var usurper = family.Root.Descendants("g");
        family.Root.Add(usurper);
        family.Root.Element("c").Remove(); 
```

建立了循环关系，并且 remove 最终会导致[OutOfMemoryException](http://msdn.microsoft.com/en-us/library/system.outofmemoryexception.aspx)。

有没有一种简单、方便的方法来完成这项工作？

**编辑**

我实际实施的修复是

```
 var usurper = family.Root.Descendants("g").Single();
        family.Root.Element("c").Remove();
        family.Root.Add(usurper); 
```

原谅我的脸红。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:16:11.810

尝试这样做

```
var usurper = family.Root.Descendants("g").ToList(); 
```

由于延迟评估，您必须强制枚举产生结果，否则您会得到一个空结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:21:19.683

我相信您需要`usurper.Remove()`在将其添加到 Root 元素之前调用。如果没有这一步，篡位者将始终是“c”元素的后代，因此当“c”被删除时，篡位者也将如此。

# actionscript-3 - 如何在 Flash 中测量事件的时间？

> ID：10604752
> 
> 赞同：0
> 
> 时间：2012-05-15T16:11:10.733
> 
> 标签：actionscript-3, flash, flash-cs5

如果任何按钮上有一些事件，例如鼠标翻转事件，如何测量翻转事件发生了多少时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:16:40.370

您可以计算 MOUSE_OVER 和 MOUSE_OUT 之间的差异。

```
var myButton:Button = new Button();
var diff:Number = 0;
var startDate:Date;

myButton.addEventListener(MouseEvent.MOUSE_OVER, function(evt:MouseEvent):void {
    startDate = new Date();
});

myButton.addEventListener(MouseEvent.MOUSE_OUT, function(evt:MouseEvent):void {
    diff = (new Date()).time - startDate.time;
    if (diff >= 5000)
         // do something
}); 
```

我没有启动 Flash Builder，但这应该是一个好的开始。查看这些文档以获取更多信息：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/MouseEvent.html)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Date.html#time](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Date.html#time)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:11:08.863

好吧，除非您滚出然后重新启动，否则只会触发一次翻转。

所以这就是我要做的：

```
private var timeoutId:uint=-1;
private function onRollover(e:MouseEvent):void {
    timeoutId=setTimeout(play, 5000);
}

private function onRollout(e:MouseEvent):void {
    if(timeoutId != -1) clearTimeout(timeoutId);
}

private function play():void {
    //code to play music
} 
```

当然，onRollover 和 onRollout 处理各自的事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T23:35:44.490

也许你应该看看**[Timer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Timer.html)**类。这是一个简单的示例，说明您可以使用它做什么：

```
var timer:Timer = new Timer(5000,1);

timer.addEventListener(TimerEvent.TIMER, playVideo);

btnInstance.addEventListener(MouseEvent.MOUSE_OVER, 
                             function(evt:MouseEvent):void {
                                timer.start();
                             });

btnInstance.addEventListener(MouseEvent.MOUSE_OUT, 
                             function(evt:MouseEvent):void {
                                timer.stop(); 
                             });

function playVideo(evt:TimerEvent):void {
    // play video
} 
```

希望能帮助到你。

# dotcloud - 点云 uWSGI 错误

> ID：10604754
> 
> 赞同：1
> 
> 时间：2012-05-15T16:11:27.810
> 
> 标签：dotcloud

我正在尝试在 dotcloud 上部署我的一个应用程序。但是，我不断得到：

```
uWSGI Error

wsgi application not found 
```

有人可以暗示一些讨论这个问题的有用文档？我的申请在这里：

```
https://github.com/kfk/datacrowd 
```

我确实认为一切都是由教程完成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:58:56.640

不确定您是否查看过此页面，但它是在 dotCloud 上部署烧瓶应用程序的好资源。[http://flask.pocoo.org/snippets/48/](http://flask.pocoo.org/snippets/48/)

查看您的应用程序，看起来大多数东西都设置正确，唯一看起来有点奇怪的是您的`wsgi.py`文件。

您是否尝试过更改`wsgi.py`文件以使其看起来像这样。

```
import sys
sys.path.append('/home/dotcloud/current')
from datacrowd.app import app as application

application.config.update(DEBUG=True) 
```

基本上我删除了`if`最后的声明。试试看它是否有帮助。

如果没有，请尝试注释掉该`application.config.update(DEBUG=True)`行，看看是否也有帮助。

哦是的还有一件事，看起来你有一个`static`文件而不是一个`static`目录，不确定你是否故意这样做，但通常静态是你放置静态媒体的目录，所以很可能假设是符号链接到`datacrowd/static`

**更新：**

既然你有同样的错误，那么很可能是你的应用程序有问题。

SSH 进入您的服务。

```
$ dotcloud ssh <app.service> 
```

然后查看你的日志`/var/log/supervisor/uwsgi.log`，你很可能会看到一个语法错误和一个堆栈跟踪，告诉你错误在哪里。

常见问题通常是

*   未安装依赖项
*   使用新版本 python 的特性。(python 2.7, 3.x, features) 当dotCloud上的python版本只有2.6.x时。
*   语法错别字（缩进问题等）

# installation - CouchDB 安装错误

> ID：10604756
> 
> 赞同：1
> 
> 时间：2012-05-15T16:11:34.127
> 
> 标签：installation, couchdb

我尝试这样安装：

```
./configure --with-erlang=/home/cgenesis/erlang/usr/local/lib/erlang/usr/include --disable-dependency-tracking
make 
```

但这就是我得到的全部：

```
./couch_key_tree.erl:78: type boolean() undefined
./couch_key_tree.erl:79: type boolean() undefined
./couch_key_tree.erl:93: type boolean() undefined
./couch_key_tree.erl:136: type boolean() undefined 
```

# ruby - 在Ruby中将数组元素（字符串）设置为变量名

> ID：10604759
> 
> 赞同：1
> 
> 时间：2012-05-15T16:11:44.023
> 
> 标签：ruby, arrays, string, variables

我有以下数组，稍后我用它在 Excel 文件上写入标题。

```
fields = ["fileName", "type", "id"] 
```

然后我有以下代码从 XML 中读取值：

```
filename = xml.xpath('//path/filename').text
type = xml.xpath('//path/type').text
id = xml.xpath('//path/id').text 
```

我迭代初始数组（字段）以将 Excel 单元格设置为上一步中提取的值：

```
row = 2
c = 1
fields.each do |content|
  ws.Cells(row,c).Value = content
  c = c + 1 
```

我试图将数组的 ( `fields`) 内容变为变量名而不是字符串，以便能够重用头字段。

任何人都可以推荐一种使其成为可能的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:24:44.470

这听起来像您需要使用[Hash](http://www.ruby-doc.org/core-1.9.3/Hash.html)将字段名称与您提取的值相关联：

```
fields = {
  "fileName" => xml.xpath('//path/filename').text,
  "type" => xml.xpath('//path/type').text,
  "id" => xml.xpath('//path/id').text
}

row=2
c=1
fields.each do |key,value|
  ws.Cells(row,c).Value = value
  c=c+1
end 
```

# javascript - 这个属性可以控制吗？

> ID：10604765
> 
> 赞同：0
> 
> 时间：2012-05-15T16:12:16.223
> 
> 标签：javascript, jquery, asp.net, html, vb.net

是否可以控制选择下拉框中显示的项目的高度/数量？还是我需要编写自定义小部件？这可能吗？

忘了提我正在使用以下代码：

```
<asp:DropDownList runat="server" Width="288px" CssClass="Select"></asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:16:47.080

您可以使用属性限制*可见的项目数量：*`size`

```
<select size="3">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option> 
</select> 
```

但是 DropDown 本身中的项目数量取决于您放在那里的数量！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:33:17.417

size 属性不会自动将 SELECT 从下拉列表框更改为列表框吗？

在“下拉”模式下，我相信 SELECT 的大小（选项数量）是由浏览器默认设置的。在添加垂直滚动条之前，每个浏览器都会显示最大数量的选项。在 Chrome 和 Firefox 中为 20。在 IE 中为 30。

# coldfusion - CF10中websocket认证的密码是如何发送的？

> ID：10604769
> 
> 赞同：1
> 
> 时间：2012-05-15T16:12:25.850
> 
> 标签：coldfusion, websocket, coldfusion-10, cfwebsocket

在文档[Specifying WebSocket authentication details](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe61e35da8d318518767eb3aa135858633ee-7ff5.html)中，它没有提到密码是如何从客户端的`authenticate()`JS 函数发送到服务器的`onWSAuthenticate`. 它们是通过安全渠道发送的吗？还是纯文本？

附带问题：可以使用什么工具/浏览器/浏览器的插件来嗅探 websocket 的流量？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T10:30:47.457

通过 authenticate() 函数发送的用户名/密码是明文形式。您实际上可以在 cfwebsocket.js 中看到它（它已缩小，因此搜索身份验证）。在服务器上，如果调用是为了进行身份验证，它将调用 application.cfc 中的 onWSAuthenticate() 并传递给函数的任何用户名或密码。所以加密/解密/验证的逻辑在于开发者。

任何 TCP 监视器都可用于嗅探 websocket 的流量，如[wireshark](https://stackoverflow.com/questions/3925118/how-to-debug-websockets/3933996#3933996)、TCPMon 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T13:55:40.103

主要只是回答以进一步我自己对它的工作原理的理解。从[websocket.org](http://www.websocket.org/aboutwebsocket.html)网站：

> 通过向代理服务器发出 HTTP CONNECT 语句来建立隧道，该语句请求代理服务器打开到特定主机和端口的 TCP/IP 连接。一旦建立了隧道，通信就可以畅通无阻地通过代理。由于 HTTP/S 以类似的方式工作，因此 SSL 上的安全 WebSockets 可以利用相同的 HTTP CONNECT 技术。

因此，如果这是您要问的，似乎就像使用 http/https 一样，由开发人员来实施 SSL 加密，这是有道理的。

Sagar Ganatra 还有一篇关于使用 CF 进行 Websocket 身份验证基础知识的[博客文章。](http://www.sagarganatra.com/2012/03/websocket-authentication-in-coldfusion.html)

# c# - dataStream.Length 和 .Position 引发了“System.NotSupportedException”类型的异常

> ID：10604774
> 
> 赞同：7
> 
> 时间：2012-05-15T16:12:39.240
> 
> 标签：c#, asp.net, post

我正在尝试使用 http post 将一些数据从 asp.net 发布到 web 服务。

这样做时，我收到了附带的错误。我检查了很多帖子，但没有什么能真正帮助我。对此的任何帮助将不胜感激。

Length = 'dataStream.Length' 引发了“System.NotSupportedException”类型的异常

Position = 'dataStream.Position' 引发了“System.NotSupportedException”类型的异常

请附上我的代码：

```
public XmlDocument SendRequest(string command, string request)
{
    XmlDocument result = null;

    if (IsInitialized())
    {
        result = new XmlDocument();

        HttpWebRequest webRequest = null;
        HttpWebResponse webResponse = null;

        try
        {
            string prefix = (m_SecureMode) ? "https://" : "http://";
            string url = string.Concat(prefix, m_Url, command);

            webRequest = (HttpWebRequest)WebRequest.Create(url);
            webRequest.Method = "POST";
            webRequest.ContentType = "text/xml";
            webRequest.ServicePoint.Expect100Continue = false;

            string UsernameAndPassword = string.Concat(m_Username, ":", m_Password);
            string EncryptedDetails = Convert.ToBase64String(Encoding.ASCII.GetBytes(UsernameAndPassword));

            webRequest.Headers.Add("Authorization", "Basic " + EncryptedDetails);

            using (StreamWriter sw = new StreamWriter(webRequest.GetRequestStream()))
            {
                sw.WriteLine(request);
            }

            // Assign the response object of 'WebRequest' to a 'WebResponse' variable.
            webResponse = (HttpWebResponse)webRequest.GetResponse();

            using (StreamReader sr = new StreamReader(webResponse.GetResponseStream()))
            {
                result.Load(sr.BaseStream);
                sr.Close();
            }
        }

        catch (Exception ex)
        {
            string ErrorXml = string.Format("<error>{0}</error>", ex.ToString());
            result.LoadXml(ErrorXml);
        }
        finally
        {
            if (webRequest != null)
                webRequest.GetRequestStream().Close();

            if (webResponse != null)
                webResponse.GetResponseStream().Close();
        }
    }

    return result;
} 
```

提前致谢 ！！

拉蒂卡

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T18:41:53.063

当您调用 时[`HttpWebResponse.GetResponseStream`](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.getresponsestream.aspx)，它会返回一个没有任何召回能力的[`Stream`实现；](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)换句话说，从 HTTP 服务器发送的字节被直接发送到该流以供使用。

这与一个[`FileStream`实例](http://msdn.microsoft.com/en-us/library/system.io.filestream.aspx)不同，如果你想读取你已经通过流使用的文件的一部分，磁盘头总是可以移回读取文件的位置（很可能，它被缓冲在内存中，但你明白了）。

对于 HTTP 响应，您实际上必须*重新*向服务器发出请求才能再次获得响应。因为不能保证该响应是相同的，所以传递回给您的实现上的大多数与位置相关的方法和属性（例如, ）[`Length`](http://msdn.microsoft.com/en-us/library/system.io.stream.length.aspx)都会抛出.[`Position`](http://msdn.microsoft.com/en-us/library/system.io.stream.position)[`Seek`](http://msdn.microsoft.com/en-us/library/system.io.stream.seek)`Stream`[`NotSupportedException`](http://msdn.microsoft.com/en-us/library/system.notsupportedexception.aspx)

如果您需要在 中向后移动`Stream`，那么您应该创建一个[`MemoryStream`实例](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)并通过[方法](http://msdn.microsoft.com/en-us/library/dd782932.aspx)将响应复制`Stream`到 中，如下所示：`MemoryStream`[`CopyTo`](http://msdn.microsoft.com/en-us/library/dd782932.aspx)

```
using (var ms = new MemoryStream())
{
    // Copy the response stream to the memory stream.
    webRequest.GetRequestStream().CopyTo(ms);

    // Use the memory stream.
} 
```

请注意，如果您没有使用 .NET 4.0 或更高版本（在此引入`CopyTo`了`Stream`该类），那么您可以[手动复制流](https://stackoverflow.com/a/230141/50776)。

# python - 加速大numpy数组的切片

> ID：10604780
> 
> 赞同：2
> 
> 时间：2012-05-15T16:12:57.257
> 
> 标签：python, numpy, slice, pytables

我有一个存储在 pyTables 文件中的大数组（ 1000x500000x6 ）。我正在对其进行一些在速度方面进行了相当优化的计算，但是花费最多时间的是数组的切片。

在脚本的开头，我需要获取行的子集：reduce_data = data[row_indices, :, :] 然后，对于这个简化的数据集，我需要访问：

*   列一一：reduced_data[:,clm_indice,:]
*   列的子集：reduce_data[:,clm_indices,:]

获取这些数组需要很长时间。有什么办法可以加快速度吗？例如以不同方式存储数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T12:58:59.330

您可以尝试`chunkshape`明智地选择数组，请参阅： http: [//pytables.github.com/usersguide/libref.html#tables.File.createCArray](http://pytables.github.com/usersguide/libref.html#tables.File.createCArray) 此选项控制数据物理存储在文件中的顺序，因此它可能有助于加快访问速度。

运气好的话，对于您的数据访问模式，类似的东西`chunkshape=(1000, 1, 6)`可能会起作用。

# c# - ListViewCollection Move* 方法不会触发 Changed 事件

> ID：10604787
> 
> 赞同：0
> 
> 时间：2012-05-15T16:13:08.100
> 
> 标签：c#, wpf

我在 dataGrid 中使用 ListViewCollection 类。底层集合是一个可观察的集合。

每当我调用集合中的 Move 方法（在 ViewModel 中）时，CurrentChanged 事件都不会触发。

但是，当 UI 在其上调用相同的方法时（我可以在调用堆栈中看到它），该事件会触发。

```
 this.EmailTemplates = new ListCollectionView(templateVmList);
  this.EmailTemplates.CurrentChanging += (o, e) => EmailTemplates_CurrentChanging(o, e);
  this.EmailTemplates.CurrentChanged += (o, e) => { this.SelectedEmailTemplate = (EmailTemplateViewModel)this.EmailTemplates.CurrentItem; };
  if (this.EmailTemplates.Count > 0)
  {
       if (!this.EmailTemplates.MoveCurrentToFirst())
            throw new ArgumentException("Element not found in collection");             
  } 
```

无论谁在更改集合，我应该在代码中做什么以确保事件触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:53:14.457

尝试使用`CollectionViewSource.GetDefaultView`而不是创建一个新的`ListCollectionView`.

这个测试代码对我来说很好

```
public class LcViewModel : BaseItemsViewModel
{
    public LcViewModel()
    {
        MoveCommand = new RelayCommand(Move);

        var view = CollectionViewSource.GetDefaultView(Items);
        view.CurrentChanged += (sender, args) => Debug.WriteLine("CurrentChanged");
        view.CurrentChanging += (sender, args) => Debug.WriteLine("CurrentChanging");
    }

    public ICommand MoveCommand { get; private set; }

    private void Move()
    {
        var view = CollectionViewSource.GetDefaultView(Items);
        view.MoveCurrentToFirst();
    }
} 
```

# jquery - jquery droppable，当容器设置为溢出时丢弃不可见的项目：auto

> ID：10604789
> 
> 赞同：0
> 
> 时间：2012-05-15T16:13:12.730
> 
> 标签：jquery, drag-and-drop

我有一个固定大小和溢出的 div：auto。

如果我放在 droppableDiv 附近的某个地方，该项目会被放到 droppableDiv 的不可见区域中（如果没有任何滚动条，那应该是 droppable 所在的位置）我尝试使用 z-index 属性解决这个问题，所以该 div 远远落后于任何其他 div。它不起作用。

如何防止由于溢出而掉落在不可见的droppables上？谢谢

这是一个例子：http: [//jsfiddle.net/Etx4t/3/](http://jsfiddle.net/Etx4t/3/) 尝试放到droppable容器下面，你会看到检测到droppable。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:47:16.343

我无法重现您的问题。看：

[http://jsfiddle.net/Etx4t/1/](http://jsfiddle.net/Etx4t/1/)

这意味着你的问题不是你想的那样。

根据您更新的小提琴，这里有一个解决您问题的技巧：

[http://jsfiddle.net/Etx4t/4/](http://jsfiddle.net/Etx4t/4/)

我想不出更好的方法来做到这一点

# c++ - Convert std::tuple to std::array C++11

> ID：10604794
> 
> 赞同：21
> 
> 时间：2012-05-15T16:13:26.200
> 
> 标签：c++, arrays, c++11, tuples

If I have `std::tuple<double, double, double>` (where the type is homogeneous), is there a stock function or constructor to convert to `std::array<double>`?

**Edit:**: I was able to get it working with recursive template code (my draft answer posted below). Is this the best way to handle this? It seems like there would be a stock function for this... Or if you have improvements to my answer, I'd appreciate it. I'll leave the question unanswered (after all, I want a *good* way, not just a workable way), and would prefer to select someone else's [hopefully better] answer.

Thanks for your advice.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-16T08:55:51.223

Converting a tuple to an array without making use of recursion, including use of perfect-forwarding (useful for move-only types):

```
#include <iostream>
#include <tuple>
#include <array>

template<int... Indices>
struct indices {
    using next = indices<Indices..., sizeof...(Indices)>;
};

template<int Size>
struct build_indices {
    using type = typename build_indices<Size - 1>::type::next;
};

template<>
struct build_indices<0> {
    using type = indices<>;
};

template<typename T>
using Bare = typename std::remove_cv<typename std::remove_reference<T>::type>::type;

template<typename Tuple>
constexpr
typename build_indices<std::tuple_size<Bare<Tuple>>::value>::type
make_indices()
{ return {}; }

template<typename Tuple, int... Indices>
std::array<
  typename std::tuple_element<0, Bare<Tuple>>::type,
    std::tuple_size<Bare<Tuple>>::value
>
to_array(Tuple&& tuple, indices<Indices...>)
{
    using std::get;
    return {{ get<Indices>(std::forward<Tuple>(tuple))... }};
}

template<typename Tuple>
auto to_array(Tuple&& tuple)
-> decltype( to_array(std::declval<Tuple>(), make_indices<Tuple>()) )
{
    return to_array(std::forward<Tuple>(tuple), make_indices<Tuple>());
}

int main() {
  std::tuple<double, double, double> tup(1.5, 2.5, 4.5);
  auto arr = to_array(tup);
  for (double x : arr)
    std::cout << x << " ";
  std::cout << std::endl;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-02-01T20:54:43.317

The C++17 solution is a short one:

```
template<typename tuple_t>
constexpr auto get_array_from_tuple(tuple_t&& tuple)
{
    constexpr auto get_array = [](auto&& ... x){ return std::array{std::forward<decltype(x)>(x) ... }; };
    return std::apply(get_array, std::forward<tuple_t>(tuple));
} 
```

Use it as

```
auto tup = std::make_tuple(1.0,2.0,3.0);
auto arr = get_array_from_tuple(tup); 
```

EDIT: forgot to sprinkle `constexpr` anywhere :-)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-16T15:00:08.987

You can do it non-recursively:

```
#include <array>
#include <tuple>
#include <redi/index_tuple.h>  // see below

template<typename T, typename... U>
  using Array = std::array<T, 1+sizeof...(U)>;

template<typename T, typename... U, unsigned... I>
  inline Array<T, U...>
  tuple_to_array2(const std::tuple<T, U...>& t, redi::index_tuple<I...>)
  {
    return Array<T, U...>{ std::get<I>(t)... };
  }

template<typename T, typename... U>
  inline Array<T, U...>
  tuple_to_array(const std::tuple<T, U...>& t)
  {
    using IndexTuple = typename redi::make_index_tuple<1+sizeof...(U)>::type;
    return tuple_to_array2(t, IndexTuple());
  } 
```

See [https://gitlab.com/redistd/redistd/blob/master/include/redi/index_tuple.h](https://gitlab.com/redistd/redistd/blob/master/include/redi/index_tuple.h) for my implementation of index_tuple, something like that is useful for working with tuples and similar variadic templates. A similar utility was standardised as `std::index_sequence` in C++14 (see [index_seq.h](https://gitlab.com/redistd/redistd/blob/master/include/redi/index_seq.h) for a standalone C++11 implementation).

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-15T20:52:55.990

I would return the array instead of populating it by reference, so that `auto` can be used to make the callsite cleaner:

```
template<typename First, typename... Rem>
std::array<First, 1+sizeof...(Rem)>
fill_array_from_tuple(const std::tuple<First, Rem...>& t) {
  std::array<First, 1+sizeof...(Rem)> arr;
  ArrayFiller<First, decltype(t), 1+sizeof...(Rem)>::fill_array_from_tuple(t, arr);
  return arr;
}

// ...

std::tuple<double, double, double> tup(0.1, 0.2, 0.3);
auto arr = fill_array_from_tuple(tup); 
```

Realistically, NRVO will eliminate most performance concerns.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-15T17:53:03.960

```
#include <iostream>
#include <tuple>
#include <array>

template<class First, class Tuple, std::size_t N, std::size_t K = N>
struct ArrayFiller {
  static void fill_array_from_tuple(const Tuple& t, std::array<First, N> & arr) {
    ArrayFiller<First, Tuple, N, K-1>::fill_array_from_tuple(t, arr);
    arr[K-1] = std::get<K-1>(t);
  }
};

template<class First, class Tuple, std::size_t N>
struct ArrayFiller<First, Tuple, N, 1> {
  static void fill_array_from_tuple( const Tuple& t, std::array<First, N> & arr) {
    arr[0] = std::get<0>(t);
  }
};

template<typename First, typename... Rem>
void fill_array_from_tuple(const std::tuple<First, Rem...>& t, std::array<First, 1+sizeof...(Rem)> & arr) {
  ArrayFiller<First, decltype(t), 1+sizeof...(Rem)>::fill_array_from_tuple(t, arr);
}

int main() {
  std::tuple<double, double, double> tup(0.1, 0.2, 0.3);
  std::array<double, 3> arr;
  fill_array_from_tuple(tup, arr);

  for (double x : arr)
    std::cout << x << " ";
  return 0;
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-01-11T10:29:14.343

Even if title says C++11 I think C++14 solution is worth sharing (since everyone searching for problem will come up here anyway). This one can be used in compile time (`constexpr` proper) and much shorter than other solutions.

```
#include <array>
#include <tuple>
#include <utility>
#include <iostream>

// Convert tuple into a array implementation
template<typename T, std::size_t N, typename Tuple,  std::size_t... I>
constexpr decltype(auto) t2a_impl(const Tuple& a, std::index_sequence<I...>)
{
        return std::array<T,N>{std::get<I>(a)...};
}

// Convert tuple into a array
template<typename Head, typename... T>
constexpr decltype(auto) t2a(const std::tuple<Head, T...>& a)
{
        using Tuple = std::tuple<Head, T...>;
        constexpr auto N = sizeof...(T) + 1;
        return t2a_impl<Head, N, Tuple>(a, std::make_index_sequence<N>());
}

int main()
{
    constexpr auto tuple = std::make_tuple(-1.3,2.1,3.5);
    constexpr auto array = t2a(tuple);

    static_assert(array.size() == 3, "err");

    for(auto k : array)
        std::cout << k << ' ';
    return 0;
} 
```

[Example](http://coliru.stacked-crooked.com/a/bc9bcd43816ea0a5)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-22T07:51:26.490

In C++14 you can do this to generate an array:

```
auto arr = apply([](auto... n){return std::array<double, sizeof...(n)>{n...};}, tup); 
```

Full code:

```
#include<experimental/tuple> // apply
#include<cassert>

//using std::experimental::apply; c++14 + experimental
using std::apply; // c++17

template<class T, class Tuple>
auto to_array(Tuple&& t){
    return apply([](auto... n){return std::array<T, sizeof...(n)>{n...};}, t); // c++14 + exp
}

int main(){
    std::tuple<int, int, int> t{2, 3, 4};

    auto a = apply([](auto... n){return std::array<int, 3>{n...};}, t); // c++14 + exp
    assert( a[1] == 3 );

    auto a2 = apply([](auto... n){return std::array<int, sizeof...(n)>{n...};}, t); // c++14 + exp
    assert( a2[1] == 3 );

    auto a3 = apply([](auto... n){return std::array{n...};}, t); // c++17
    assert( a3[1] == 3 );

    auto a4 = to_array<int>(t);
    assert( a4[1] == 3 );

} 
```

* * *

Note that the subtle problem is what to do when all types in the source tuple are not the same, should it fail to compile? use implicit conversion rules? use explicit conversion rules?

# java - 致命例外：主要的 Android Eclipse

> ID：10604795
> 
> 赞同：2
> 
> 时间：2012-05-15T16:13:28.863
> 
> 标签：java, android, eclipse, android-layout

这是我的代码并向我发送错误（致命例外：主要），我想帮助我非常感谢

这是我来自 Activity.java 的代码

```
package hola.mundo;

import android.app.Activity;
import android.os.Bundle;

public class HolaActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

这是我来自 main.xml 的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:hint="@string/edit_message" />

    <Button android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send"/>

</LinearLayout> 
```

和strings.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">Hola</string>
    <string name="edit_message">Enter a Message</string>
    <string name="button_send">Send</string>

</resources> 
```

请任何人都可以帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T16:16:58.813

您没有 `layout_height`定义 for `edit_message`（相反，您有：）`layout_weight`。此外，您的布局可能看起来不像您预期​​的那样，但这是另一个问题（这取决于我现在忽略的您的要求）。

# jquery - 如何使用 JSONP 和 .NET 2.0 从 aspx 获取 XML 类型数据

> ID：10604800
> 
> 赞同：0
> 
> 时间：2012-05-15T16:13:46.650
> 
> 标签：jquery, xml, c#-2.0

我正在使用 JSONP，因为我的命中是一个跨域，我的 js 中有以下 jquery jsonp 代码。

**jQuery代码：**

```
<script type="text/javascript">
$(document).ready(function() {
    $('#btnSearch').click(function() 
    {           
        var serviceReq = "http://staging.aero/airportxml.aspx";
        $.ajax
        ({
            url: serviceReq,
            contentType: "application/json; charset=utf-8",
            dataType: "jsonp",
            jsonpCallback: "processJsonpData",
            success: function(data, textStatus, jqXHR) 
            {
               //here I need my whole xml data which is returned back from my airportxml.aspx 
            },
            error: function(jqXHR, textStatus, errorThrown) 
            {
                alert(textStatus + "---" + errorThrown);
            }
        });
    });       
});
</script> 
```

下面是从我的 airportxml.aspx 返回的 XML

**XML 数据：**

```
<airports>
    <a v="AAL" m="|Aalborg Airport (AAL)|Aalborg (AAL)|Denmark (DK)|Europe|" d="Aalborg Airport <span>(AAL)</span>, Aalborg, Denmark" n="Aalborg"/>
    <a v="AES" m="|Alesund Airport (AES)|Aalesund (AES)|Norway (NO)|Europe|" d="Alesund Airport <span>(AES)</span>, Aalesund, Norway" n="Aalesund"/>
    <a v="AAR" m="|Aarhus Airport (AAR)|Aarhus (AAR)|Denmark (DK)|Europe|" d="Aarhus Airport <span>(AAR)</span>, Aarhus, Denmark" n="Aarhus"/>
    <a v="ABZ" m="|Aberdeen Airport (ABZ)|Aberdeen (ABZ)|United Kingdom (GB)|Europe|" d="Aberdeen Airport <span>(ABZ)</span>, Aberdeen, United Kingdom" n="Aberdeen"/>
</airports> 
```

我可以轻松地从我的代码中获取 HTML 数据，当返回 XML 类型的数据时，我很难获取数据。

请推荐！！编辑：

我们可以使用数据类型获取 xml：“jsonp text xml”，请就此提出建议

谢谢。

# jenkins - 如何以编程方式获取 Jenkins 用户 ID？

> ID：10604802
> 
> 赞同：2
> 
> 时间：2012-05-15T16:13:51.427
> 
> 标签：jenkins

我想将启动 Jenkins 工作的人的用户 ID 传递给脚本。'env' 的输出表明没有设置环境变量，'ant -v' 的输出表明没有设置任何属性。如何访问开始工作的人的用户 ID？（我知道触发器可以启动工作，但对于这项工作，它永远是一个人）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T17:29:59.583

获取作业执行者：

```
curl -s "${BUILD_URL}/api/json" | \
python -c '\
    import json; \
    import sys; \
    obj = json.loads(sys.stdin.read()); \
    print [ \
        cause["userId"] \
        for action in obj["actions"] \
        if "causes" in action \
        for cause in action["causes"] \
        if "userId" in cause][0];' 
```

另请参阅[如何在 Jenkins 中设置环境变量？](https://stackoverflow.com/questions/10625259/how-to-set-environment-variables-in-jenkins)它解释了如何将它传递到脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:52:08.020

```
BUILD_START_USER=`curl ${JOB_URL}'lastBuild/api/json' | python -c 'import json,sys;obj=json.loads(sys.stdin.read());print obj["'"actions"'"][1]["'"causes"'"][0]["'"userId"'"]'` 
```

# json - 容错 JSON 解析

> ID：10604808
> 
> 赞同：12
> 
> 时间：2012-05-15T16:14:16.627
> 
> 标签：json, haskell, aeson

我正在使用 Data.Aeson 将一些 JSON 解析为 Record 类型。不时将数据添加到 JSON 中，这会破坏我的代码，因为 Aeson 会抱怨以下内容：

> 预期对象有 21 个名称/值对，但得到 23 个名称/值

我真的更喜欢以容错的方式解析 JSON——我不在乎以后是否有更多的字段被添加到 JSON，只要解析任何你能做的！有没有办法实现这种容错？这是我的代码：

```
myRecordFromJSONString :: BS.ByteString -> Maybe MyRecord
myRecordFromJSONString s = case Data.Attoparsec.parse json s of
  Done _rest res -> Data.Aeson.Types.parseMaybe parseJSON res
  _              -> Nothing 
```

我应该补充一点，我正在使用来自 Data.Aeson.TH 的 derivedJSON 来生成解析代码。如果我手动编写 FromJSON 代码，它是容错的，但我不想这样做......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T20:59:15.780

如果您使用的是 GHC 7.2 或 7.4，则新的泛型支持`aeson`不会检查额外的字段。我不确定这是否是设计使然，但我们出于同样的原因使用它。

```
{-# LANGUAGE DeriveGeneric #-}
{-# LANGUAGE OverloadedStrings #-}

import Data.Aeson
import qualified Data.Aeson.Types
import Data.Attoparsec
import qualified Data.ByteString as BS
import Data.ByteString.Char8 ()
import GHC.Generics

data MyRecord = MyRecord
  { field1 :: Int
  } deriving (Generic, Show)

instance FromJSON MyRecord

myRecordFromJSONString :: BS.ByteString -> Maybe MyRecord
myRecordFromJSONString s = case Data.Attoparsec.parse json s of
  Done _rest res -> Data.Aeson.Types.parseMaybe parseJSON res
  _              -> Nothing

main :: IO ()
main = do
  let parsed = myRecordFromJSONString "{ \"field1\": 1, \"field2\": 2 }"
  print parsed 
```

由于记录中不存在“field2”，因此运行此操作会因 TH 派生实例而失败。该`Generic`实例返回所需的结果：

```
Just (MyRecord {field1 = 1}) 
```

# iphone - 哪个文件包含 iPhone Xcode 项目中的本地化信息？

> ID：10604811
> 
> 赞同：0
> 
> 时间：2012-05-15T16:14:22.437
> 
> 标签：iphone, xcode, localization

我正在开发一个 iPhone 应用程序并尝试添加德语本地化。我们正在使用 TFS 进行版本控制。

我已经添加了德语字符串文件，但是每次我重新启动 Xcode 时，Localizable.strings(German) 都消失了。该文件仍然存在于磁盘上，只是没有包含在项目中。我相信这是因为某些控制文件是只读的。我必须找到这个文件并明确地检查出来。我无法签出/签入整个项目，因为集成代码的人会发疯的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:43:46.870

它是 xxxxx.xcodeproj 文件夹。

# javascript - jQuery.ajax 为什么不从 php json_encode 访问项目？

> ID：10604819
> 
> 赞同：3
> 
> 时间：2012-05-15T16:15:02.640
> 
> 标签：javascript, php, jquery, json

我不明白，因为当数据输入登录正确并且我进行了比较**response.success == "success"**什么也没发生，我用萤火虫检查，结果是这样的：

**回复**

```
[{"ncontrol":"09680040","nombre":"Edgardo","apellidop":"Ramirez","apellidom":"Leon","tUser":"Admin","status":"success"}] 
```

jQuery.ajax 脚本发送数据

```
 // jQuery.ajax script to send json data to php script

    var action = $("#formLogin").attr('action');
    var login_data = {
        ncontrol: $("#ncontrolLogin").val(),
        password: $("#passwdLogin").val(),
        is_ajax: 1
    };  

    $.ajax({
        type: "POST",
        url: action,
        data: login_data,
        dataType: "json",
        success: function(response)
        {   
            **if(response.status == "success")** {
                $("#status_msg").html("(+) Correct Login");

            }
            else {
                $("#status_msg").html("(X) Error Login!");
            }
        }
    }); 
    return false; 
```

并且是用于处理来自 jQuery.ajax 的变量的 PHP 脚本

```
$ncontrolForm = $_REQUEST['ncontrol'];
$passForm = $_REQUEST['password'];
$jsonResult = array();
    $query = "SELECT * FROM users WHERE ncontrol = '$ncontrolForm' AND cve_user = SHA('$passForm')";
    $result = mysqli_query($con, $query) or die (mysqli_error());
    $num_row = mysqli_num_rows($result);
    $row = mysqli_fetch_array($result);
    if( $num_row >= 1 ) {       

        $_SESSION['n_control'] = $row['ncontrol'];
        $_SESSION['t_user'] = $row['tUser'];

        $jsonResult[] = array (
            'ncontrol' => $row['ncontrol'],
            'nombre' => $row['nombre'],
            'apellidop' => $row['apellidop'],
            'apellidom' => $row['apellidom'],               
            'tUser' => $row['tUser'],
            'status' => 'success',

        );
        header('Content-Type: application/json');
        echo json_encode($jsonResult);

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T16:17:10.137

你有一个数组，所以这样做：

```
if(response[0].status == "success") { 
```

该对象是数组中的第一项。

编辑：

更仔细地查看您的 PHP，看起来您可能打算遍历查询响应中的几行并将它们添加到您的`$jsonResult`. 我看对了吗？

# java - 从精灵表 Java 中读取图像

> ID：10604824
> 
> 赞同：0
> 
> 时间：2012-05-15T16:15:43.163
> 
> 标签：java, lwjgl

我想在我的游戏中使用精灵表，并且通过我所做的研究发现了这段代码。

```
 BufferedImage bigImg = ImageIO.read(new File("sheet.png")); 
// The above line throws an checked IOException which must be caught. 

final int width = 10; 
final int height = 10; 
final int rows = 5; 
final int cols = 5; 
BufferedImage[] sprites = new BufferedImage[rows * cols]; 

for (int i = 0; i < rows; i++) 
{ 
    for (int j = 0; j < cols; j++) 
    { 
        sprites[(i * cols) + j] = bigImg.getSubimage( 
            i * width, 
            j * height, 
            width, 
            height 
        ); 
    } 
} 
```

我了解此代码段如何将精灵表转换为数组，但是如何访问该数组。只是`sprites[i];` 吗？

也可以将加载的精灵绑定到OpenGL纹理中

```
int spritename = glgentextures;
{
sprites[i];
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:27:25.970

要访问 sheet.png 中的某个图像，您可以使用 sprite[rowNum*cols + colNum]。

# spring - @InitBinder 在属性编辑器中使用命令对象...

> ID：10604828
> 
> 赞同：1
> 
> 时间：2012-05-15T16:15:49.707
> 
> 标签：spring, spring-3

我正在将应用程序从 Spring 2.0.7 迁移到 3.1.1，但遇到了 initBinder 问题。我们曾经有看起来像的方法

```
protected void initBinder(HttpServletRequest request, ServletRequestDataBinder binder) throws Exception {
    MyCommand command = (MyCommand)binder.getTarget();
    binder.registerCustomEditor(CustomerCard.class, createEditorFromCommand(command));
} 
```

目标由 PropertyEditor 使用。当我将其设置为带注释的控制器时，不再调用此方法，因此我添加了`@InitBinder`注释：

```
@InitBinder
protected void initBinder(HttpServletRequest request, ServletRequestDataBinder binder) throws Exception {
    MyCommand command = (MyCommand)binder.getTarget();
    binder.registerCustomEditor(CustomerCard.class, createEditorFromCommand(command));
} 
```

不幸的`binder.getTarget()`是，这只是一些默认对象。@InitBinder 的文档还指出，我也无法将命令作为参数获取：

> 此类 init-binder 方法支持 {@link RequestMapping} 支持的所有参数，除了命令/表单对象和相应的验证结果对象。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T23:19:27.607

```
@RequestMapping
// binder will return MyCommand on getTarget()
public void handleMyCommand(MyCommand c) {  
 ...
}

// initialize command before handleMyCommand method call
@ModelAttribute
public MyCommand initializeMyCommand() {
   // perform initialization.
}

@InitBinder
protected void initBinder(WebDataBinder binder) {
   MyCommand c  = (MyCommand) binder.getTarget();
   binder.registerCustomEditor(CustomerCard.class, createEditorFromCommand(c));
} 
```

但是，由于命令被统一化了¿你为什么不`createEditorFromCommand(new MyCommand())`直接调用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:29:32.363

```
@InitBinder
protected void initBinder(WebDataBinder binder) {
  MyCommand command = (MyCommand)binder.getTarget();
  binder.registerCustomEditor(CustomerCard.class, createEditorFromCommand(command));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T23:17:40.900

派对可能有点晚了，但仍然 - 这是一种在 @InitBinder 方法中引用模型（命令）对象的方法：

```
@InitBinder("commandName")
public void initBinder(WebDataBinder binder) throws Exception {
   CommandClass command = (CommandClass) binder.getTarget();
   binder.registerCustomEditor(Some.class, new SomeEditor(command.getOptions());
}

@ModelAttribute("commandName")
public OrderItem createCommand(HttpServletRequest request) {
   return new CommandClass();
} 
```

放置@InitBinder("something") 而不仅仅是@InitBinder 可能是个好主意。这样@InitBinder 不会被多次调用，而只会在遇到配置的对象时调用。

# php - 使用 PHP 或 JS 检查域扩展

> ID：10604829
> 
> 赞同：1
> 
> 时间：2012-05-15T16:15:51.297
> 
> 标签：php, javascript, tld

首先，我是一个 php 初学者，所以请尽可能具体。基本上我想要一个执行以下操作的 php/javascript：

如果域具有 .de 扩展名，则添加文本“这是一个德国站点”，否则添加文本“这不是一个德国站点”

如果您使用 lang="de-DE" 而不是域扩展名也可以。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T16:18:46.973

要获取域扩展名，请使用 php 的[pathinfo](http://php.net/manual/en/function.pathinfo.php)

```
$extension = pathinfo($_SERVER['SERVER_NAME'], PATHINFO_EXTENSION);

if($extension == "de")
{
echo "this is a german site";
} 
```

另请参阅：[$_SERVER](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:24:06.990

在 PHP 中，尝试这样的事情：

```
<?php
//~ $domain = $_SERVER['HTTP_HOST'];
$domain = "domain.de";

if (preg_match('/(.*?)\.de$/', $domain)) {
    echo "is german";
} else {
    echo "is not german";
};
?> 
```

伟大的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:19:24.847

```
var isDE="";
var extension=location.hostname.split(".");
extension=extension[extension.length-1];
if (extension=="de") isDE="this is a german site".
//do whatever you need with isDE, e.g. document.write(isDE); 
```

# c# - 快速检索文件夹和所有子文件夹中的文件名列表

> ID：10604830
> 
> 赞同：2
> 
> 时间：2012-05-15T16:15:52.933
> 
> 标签：c#, winforms

我需要获取所有 Word 文档的列表。*.doc 和 *.docx 存储在基于 Windows 的文件夹中，包含许多子文件夹和子子文件夹等...

[用 C# 搜索文件](https://stackoverflow.com/questions/3102786/searching-for-a-file-with-c-sharp)有一个可行的答案，它有 2 年历史，搜索 1500 个文件需要 10 秒，（将来可能有 10,000 个或更多）。我将发布我的代码，该代码基本上是上述链接的副本。有没有人有更好的解决方案？

```
DateTime dt = DateTime.Now;
DirectoryInfo dir = new DirectoryInfo(MainFolder);
List<FileInfo> matches = 
          new List<FileInfo>(dir.GetFiles("*.doc*",SearchOption.AllDirectories));
TimeSpan ts = DateTime.Now-dt;
MessageBox.Show(matches.Count + " matches in " + ts.TotalSeconds + " seconds"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T16:25:11.790

您可以使用[Directory.EnumerateFiles](http://msdn.microsoft.com/en-us/library/dd383571.aspx)而不是`GetFiles`. 这样做的好处是将文件作为 . 返回`IEnumerable<T>`，这使您可以立即开始处理结果集（而不是等待返回整个列表）。

如果您只是计算文件数量或列出所有文件，它可能无济于事。但是，如果您可以对结果进行处理和/或过滤，特别是如果您可以在其他线程中执行任何操作，则速度会明显加快。

从文档中：

> EnumerateFiles 和 GetFiles 方法的区别如下： 使用 EnumerateFiles 时，可以在返回整个集合之前开始枚举名称集合；当您使用 GetFiles 时，您必须等待返回整个名称数组，然后才能访问该数组。因此，当您处理许多文件和目录时，EnumerateFiles 会更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:29:27.043

怀疑你可以做很多事情，

`dir.GetFiles("*.doc|*.docx", SearchOptions.AllDirectories)`可能会产生影响，因为它是更具限制性的模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:35:55.260

第一次我建议您使用 StopWatch 而不是 DateTime 来获取经过的时间。
第二次为了使您的搜索更快，您不应该将 GetFiles 的结果存储在 List 中，而是直接存储到数组中。
最后，您应该优化您的搜索模式：您想要每个 doc 和 docx 文件，尝试“*.doc？”
这是我的建议：

```
var sw = new Stopwatch();
sw.Start();

var matches = Directory.GetFiles(MainFolder, "*.doc?", SearchOption.AllDirectories);

sw.Stop();
MessageBox.Show(matches.Length + " matches in " + sw.Elapsed.TotalSeconds + " seconds"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T16:27:34.890

如果您想要完整列表，除了[确保在目标文件夹上启用了 Windows 索引服务](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/snap_idx_srv_mgmt.mspx?mfr=true)之外，不是真的。您的主要延迟将从硬盘驱动器读取，并且没有优化您的 C# 代码将使该过程更快。您可以创建自己的简单索引服务，也许使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)，无论添加多少文档，它都会为您提供亚秒级的响应时间。

# javascript - 如何检查某个类是否有背景颜色，如果有则更改背景颜色

> ID：10604831
> 
> 赞同：1
> 
> 时间：2012-05-15T16:15:59.390
> 
> 标签：javascript, jquery

我有这样的课

```
 <div class="Ratsheet-destination-detail"></div>
    $(".Ratsheet-destination-detail").css("backgroundColor", #5B815B); 
```

现在“Ratsheet-destination-detail”具有红色背景色。

我如何检查它是否有背景颜色，如果它有然后将其背景颜色更改为“#616161”

谢谢.......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:21:33.417

您的颜色将作为 rgb 值返回。所以检查背景颜色的rgb值。如果是红色`rgb(255, 0, 0)`，则将其更改为绿色。

```
var el = $('.Ratsheet-destination-detail');

if(el.css('background-color') == 'rgb(255, 0, 0)'){
    el.css('background-color','green');
}​ 
```

**[现场演示](http://jsfiddle.net/loktar/nQCme/)**

如果我理解正确，通过操作的编辑这*应该可以工作。*如果背景为红色或灰色，这会将其更改为绿色。

```
var el = $('.Ratsheet-destination-detail');

if(el.css('background-color') == 'rgb(97, 97, 97)' || el.css('background-color') == 'rgb(255, 0, 0)'){
    el.css('background-color','green');
}​ 
```

**[现场演示 2](http://jsfiddle.net/loktar/nQCme/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:21:50.650

该`$.css`方法将告诉您匿名函数中的旧颜色是什么：

```
$(".Ratsheet-destination-detail").css("background-color", function( index, old ){
  // If current is red, set to green, else set to red
  return $.Color(old).is("red") ? "green" : "red" ;
}); 
```

在这里，我使用[jQuery Color 插件](https://github.com/jquery/jquery-color)来`$.Color()`帮助处理颜色。如果没有它，您将不得不处理 RGB（或可能的 RGBA）格式的颜色，例如`rgb(255, 0, 0)`，这有时可能会有点混乱。

演示：http: [//jsbin.com/egemaf/2/edit](http://jsbin.com/egemaf/2/edit)

为了使用 jQuery Color 插件，您需要从项目中下载并引用源代码，就像使用 jQuery 一样（假设您没有使用 CDN）：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Swapping Background Colors with jQuery and jQuery Color</title>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
    <script src="https://raw.github.com/jquery/jquery-color/master/jquery.color.js"></script>
  </head>
  <body>
    <div class="Ratsheet-destination-detail">
      <p>Hello, World.</p>
    </div>
    <script>
    $(function(){
      $(".Ratsheet-destination-detail").css("background-color", function(i, old){
        // If current is red, set to green, else set to red
        return $.Color(old).is("red") ? "green" : "red" ;
      });
    });
    </script>
  </body>
</html> 
```

# android - 用于 IME 关闭的事件侦听器

> ID：10604832
> 
> 赞同：1
> 
> 时间：2012-05-15T16:16:02.450
> 
> 标签：android, ime

伙计们......有谁知道当 IME 关闭或关闭/崩溃时是否有我可以监听的事件？如果是这样，你能指点我一些示例代码吗？

我有一个带有几个 EditText 小部件的 Activity，并且想在 IME 被关闭时调用一个方法。

非常感谢！

# python - python美汤ascii错误

> ID：10604833
> 
> 赞同：1
> 
> 时间：2012-05-15T16:16:04.043
> 
> 标签：python, ascii, beautifulsoup

当我下载英文圣经时，我的脚本有效。但是当我下载外国圣经时给我一个 ascii 错误。

Python

```
from BeautifulSoup import BeautifulSoup, Tag, NavigableString
import lxml.html as html
import urlparse
import os, sys
import urllib2
import re
print ("downloading and converting Bibles to Aurora...")
root = html.parse(open('links.html'))
for link in root.findall('//a'):
  url = link.get('href')
  name = urlparse.urlparse(url).path.split('/')[-1]
  namesave = '%s.html' % '.'.join(name.split('.')[:-1])
  chnum = name.split('.')[-2]
  dirname = urlparse.urlparse(url).path.split('.')[-1]
  try:
      f = urllib2.urlopen(url)
  except urllib2.URLError:
      print "Bad URL or timeout"
      continue
  s = f.read()
  if (os.path.isdir(dirname) == 0): 
    os.mkdir(dirname)
  soup = BeautifulSoup(s)
  thearticle = soup.html.body.article
  bookname = thearticle['data-book-human']
  soup.html.replaceWith('<html>'+str(bookname)+'</html>')
  converted = str(soup)
  full_path = os.path.join(dirname, namesave)
  open(full_path, 'wb').write(converted)
  print(name)
print("DOWNLOADS AND CONVERSIONS COMPLETE!") 
```

有效的links.html

```
<a href="http://www.youversion.com/bible/john.6.ceb">http://www.youversion.com/bible/john.6.ceb</a> 
```

给出错误的links.html

```
<a href="http://www.youversion.com/bible/john.6.nav">http://www.youversion.com/bible/john.6.nav</a> 
```

错误

```
 File "test.py", line 32, in <module>
    soup.html.replaceWith('<html>'+str(bookname)+'</html>')
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-4: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:22:37.270

我以前见过类似的错误，甚至可能是一样的。具体记不清了。

尝试：

```
BeautifulSoup(s, convertEntities=BeautifulSoup.HTML_ENTITIES) 
```

或者尝试强制使用 unicode：

```
soup.html.replaceWith(u'<html>'+unicode(bookname)+u'</html>') 
```

# ios - 最轻的 UI 元素

> ID：10604839
> 
> 赞同：0
> 
> 时间：2012-05-15T16:16:24.587
> 
> 标签：ios, element, calayer, light

当我设置的只是背景颜色或图像时，我试图找出在降低应用程序性能方面最不重要的 UI 元素。我不需要元素的任何用户交互。我只需要元素的内容显示在屏幕上。

从我目前了解到的情况来看，CALayers 非常轻巧，我使用起来很舒服，但它们是我可以用于简单显示用例的最轻量级 UI 元素吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:15:18.627

从本质上讲，我发现 CALayers 在性能方面是完成工作的最轻量级，但 UIView 一点也不重，但它具有更多的功能。

至于 UIImageViews，它们要重得多，但它们有很多内置方法可以使图像操作变得容易。

我希望这可以帮助某人！

# actionscript-3 - 在空中为 iPad 3 开发应用程序/游戏

> ID：10604841
> 
> 赞同：1
> 
> 时间：2012-05-15T16:16:39.550
> 
> 标签：actionscript-3, air, ipad-3

我有一个简单的游戏，我正在使用 Flash 开发在 as3/air 中构建，我希望能够将它放到 iPad 3 上。

我的问题是，如果我以 1024 x 768 的分辨率开发应用程序，它在部署到 iPad 3 上时会有效扩展吗？

所有资产都将是矢量艺术，因此因缩放而损失质量不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T00:47:03.587

if you publish it out to with the param `fullscreen = true` then it will automatically scale up. Though just be sure to optimize everything to the fullest extent as vectors are pretty processing intensive.

But it also depends on the version the SDK you're using, the newer air 3.3 sdk i believe supports it.

# asp.net - Ajax-TabPanel 错误：确保 AjaxToolkit.Properties.Resources.NET4.resources 正确嵌入或链接到程序集

> ID：10604842
> 
> 赞同：1
> 
> 时间：2012-05-15T16:16:40.313
> 
> 标签：asp.net

使用 ajaxToolkit:TabPanel 时，在 asp.net 的设计窗口中出现错误。它在容器内。错误消息说：

> “......确保 AjaxToolkit.Properties.Resources.NET4.resources 正确嵌入或链接到程序集......”

我的 aspx 标记：

```
<asp:TableRow>
  <asp:TableCell runat="server" Width="100%">
    <ajaxToolkit:TabContainer ID="TabContainer1" runat="server" 
        Font-Bold="True" Font-Size="Small" ForeColor="#336699" 
        Font-Names="Arial" Height="150" Width="100%">
        <ajaxToolkit:TabPanel BackColor="#CCCCCC" BorderColor="Gray" BorderStyle="Inset" 
              BorderWidth="2" Font-Bold="True" Font-Names="Arial" Font-Size="Small" 
              ForeColor="#336699" HeaderText="Metric1" Height="150px" runat="server" Width="100%">
        </ajaxToolkit:TabPanel>
    </ajaxToolkit:TabContainer>
  </asp:TableCell>
</asp:TableRow> 
```

我已经尝试了几件事：AjaxtToolKit.ScriptManager，添加了对 的引用`AjaxToolKit.dll`，并在 aspx 页面顶部注册了 AjaxToolKit。

我只是想在我正在处理的网页中插入一个选项卡工具。

任何帮助将不胜感激。

# c# - 如何验证Services.msc中是否存在服务

> ID：10604844
> 
> 赞同：0
> 
> 时间：2012-05-15T16:16:42.557
> 
> 标签：c#, wmi

我正在使用以下代码来获取服务的路径...

```
 string ServicePath = string.Format("Win32_Service.Name=\"{0}\"", "MyService");
 var WMiObject = new ManagementObject(ServicePath);
 string PathName = (string)WMiObject.GetPropertyValue("PathName"); 
```

现在，如果服务不可用，则调用 wmiObject.getPropertyValue("PathName") 将抛出 ManagementException..

在我的情况下，如果服务不可用，我需要分配 HardCoded 路径。如何实现？请指导...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:45:29.770

```
string Name = "MyService";
ServiceController service = ServiceController
                        .GetServices()
                        .Where(s => s.ServiceName == Name).FirstOrDefault();

if(null != service)
{
    // service exists
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:33:08.507

您可以在 WMiObject.GetPropertyValue 调用周围使用 try 块，并在 catch 块中分配常量值。

```
string PathName;
try
{
    PathName = (string)WMiObject.GetPropertyValue("PathName");
}
catch (ManagementException)
{
    PathName = "my constant path value";
} 
```

# python - 新的主管 - 如何制作一个有效的守护进程

> ID：10604847
> 
> 赞同：0
> 
> 时间：2012-05-15T16:16:50.947
> 
> 标签：python, ubuntu, supervisord

我是新来的主管。下面是我的主管配置文件。

```
# -*- conf -*-
[include]
files = *.supervisor

[supervisord]
pidfile = /var/run/supervisord.pid

[supervisorctl]
serverurl = unix://supervisord.sock

[unix_http_server]
file = /var/run/supervisord.sock

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[program:main]
process_name = main-%(process_num)s
command = /usr/bin/python /home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbTornadoServer/tornadoServer.py --tport %(process_num)s
--port=%(process_num)s
--log_file_prefix=%(here)s/logs/%(program_name)s-%(process_num)s.log
numprocs = 4
numprocs_start = 8050 
```

现在，我需要妖魔化以下进程：1）我可以停止父进程和所有子进程 2）启动 3）重新加载所有子进程 4）如果子进程失败则自动重新启动。
5）这里是启动的命令行

```
supervisord -c /home/ubuntu/workspace/rtbopsConfig/rtb_supervisor/tornadoSupervisor.conf 
```

所以......我使用runit吗？暴发户？

到目前为止，我已经杀死了 -9 所有的父母和孩子，如果我这样做了，他们就不会重生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:01:36.620

看一下`supervisorctl`，它允许您启动/重新启动/自动启动/停止进程。如果这不符合您的需要，您还可以`supervisor`通过 XML-RPC 进行通信。

# c - Lua C API：pcall错误后堆栈为空

> ID：10604849
> 
> 赞同：2
> 
> 时间：2012-05-15T16:16:58.347
> 
> 标签：c, lua

我在使用 Lua C API 时遇到问题。当 pcall（C API 函数）失败时，错误被压入堆栈。 `lua_tostring`在堆栈上显示错误，但`lua_gettop`显示堆栈为空。

```
#include <lua5.2/lauxlib.h>
#include <lua5.2/lua.h>
#include <lua5.2/lualib.h>

int main()
{
    lua_State *L = luaL_newstate();
    lua_pcall(L, 0, 0, 0);
    printf("%d\n", lua_gettop(L)); // outputs 0, indicating empty stack
    printf("%s\n", lua_tostring(L, -1)); // outputs "attempt to call a nil value", indicating non-empty stack
} 
```

编译： gcc main.c `pkg-config --cflags lua5.2` `pkg-config --libs lua5.2`

此程序显示：0 尝试调用一个 nil 值

lua_gettop(L) 返回栈大小。在这里我得到 0。如何从空堆栈中获取字符串？

行为与 5.1 版本相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T18:36:36.857

这已在 Lua 邮件列表中得到解答。行为是正确的：您需要将一个函数压入堆栈才能调用它。后面的栈`luaL_newstate`是空的。

*编辑：* OP 说“我怎样才能从空堆栈中获取字符串？”。我的回答是：为什么你想从一个空堆栈中获取一些东西，当你*知道*它是空的，因为`lua_gettop`返回了 0？

底线：

*   调用前堆栈为空`lua_pcall`。这是一个错误。Lua 恢复了，但你不能指望它。
*   之后堆栈为空`lua_pcall`。Lua 这么认为，并通过`lua_gettop`.
*   您不应该尝试从空堆栈中获取值。打印的字符串只是 留下的垃圾`lua_pcall`，但你不能指望它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T18:11:59.797

据我所知， lua_pcall 不会推送错误字符串。相反，它会覆盖堆栈顶部的值（因为那里应该总是**至少**有一个函数；p）。因此，lua_pcall（或者，更准确地说，debug.traceback，我相信）盲目地覆盖堆栈的顶部，而不是修改堆栈指针。

因此，当 lua_pcall 返回时，该值位于栈顶，但栈指针表示栈为空（就像调用 lua_pcall 时一样）。

我认为这是一种避免更严重错误的措施（例如，如果存在内存损坏或内存不足错误，我们不希望为错误消息分配更多的堆栈空间吗？）。

# c# - C#（Windows 窗体）输入输出键盘和鼠标状态

> ID：10604853
> 
> 赞同：1
> 
> 时间：2012-05-15T16:17:08.410
> 
> 标签：c#, input, keyboard, mouse

如何获取键盘和鼠标输入（当前按下了哪些按钮）&& 以及如何发送输出（使鼠标单击另一个程序中的特定位置）。如果您还可以添加有关不同事物的作用以及使用它们的原因的评论，那就太棒了：D 干杯！//丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:24:40.107

[http://www.codeproject.com/Articles/28064/Global-Mouse-and-Keyboard-Library](http://www.codeproject.com/Articles/28064/Global-Mouse-and-Keyboard-Library)

这篇文章很有帮助。它甚至包括一个很酷的宏记录器的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T18:30:06.483

这可能不是一个很好的解决方案，但就像我一样糟糕（不明白如何使用建议的其他解决方案）我选择了简单的出路......我`using Microsoft.Xna.Framework.Input;`在获得 xna 框架参考后使用，然后我只是继续前进做了`keyboardstate currentkeyboard = keyboard.getstate`:) 和鼠标一样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:43:05.217

.NET 仅内置了基于 .NET 控件（表单、按钮等）的鼠标/键盘挂钩，因此要以编程方式响应 .NET 控件之外的这些事件，您需要一个全局事件挂钩，该挂钩可以拦截来自任何地方的鼠标和键盘活动视窗。

如何使用一个键盘/鼠标挂钩 dll 来执行您请求的功能（以编程方式全局响应鼠标/键盘事件的能力）：

从以下位置下载“Gma.UserActivityMonitor.dll”：[c# 中的全局鼠标/键盘kooks](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)

将此 dll 放在 C:\Windows\System32

在您的项目中，包括一个参考（从 VS，添加...参考并浏览到 dll）

在您的项目代码中，添加“使用 Gma.UserActivityMonitor;”

在您的代码中，声明这些事件使用者：

```
HookManager.MouseMove += HookManager_MouseMove;
HookManager.KeyPress += new KeyPressEventHandler(HookManager_KeyPress); 
```

以下是鼠标/键盘事件发生时可以引发的一些方法存根：

```
private void HookManager_MouseMove(object sender, EventArgs e)
{   
}
private void HookManager_KeyPress(object sender, EventArgs e)
{   
} 
```

希望这会有所帮助，当我需要在代码中使用全局鼠标和键盘事件时，我就是这样做的。

# javascript - PhoneGap：从外部源加载数据

> ID：10604854
> 
> 赞同：0
> 
> 时间：2012-05-15T16:17:08.233
> 
> 标签：javascript, android, cordova

我想创建一个带有 phonegap 的网络应用程序（我正在尝试使用 Android 模拟器），但我对“相同域策略”有疑问：有什么方法可以禁用此限制。我需要从外部服务器加载 html/json 数据（不是我自己的，所以我不能修改它），但是当我尝试获取数据时，JQuery 返回一个未定义的对象。这是我的代码：

**索引.html**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="ISO-8859-1">
        <title>Title</title>
        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script type="text/javascript">
            $.ajaxSetup ({
                cache: false
            });
            var ajax_load = "<img src='img/load.gif' alt='loading...' />";
            var jsonUrl = "external url";
                $("#result").html(ajax_load);
                $.getJSON(jsonUrl, function(json) {
                    var result = json.responseData;
                    $("#data").html("Result: " + result);
                });
        </script>
    </head>
    <body>
        <div id="data"></div>
    </body>
</html> 
```

**电话间隙测试活动**

```
public class PhoneGapTestActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

网上搜索，看了其他问题，尝试在文件**phonegap.xml中设置白名单**

```
<?xml version="1.0" encoding="UTF-8"?>
<phonegap>
    <access origin="*" subdomains="true" />
</phonegap> 
```

但我得到的是：“结果：未定义”。非常感谢！

编辑：经过多次尝试，我注意到请求有效（我收到了数据），但是在访问 json 数据内容时出现了一些问题，但现在它可以工作了！感谢所有的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:19:08.937

没有理由不应该工作。我不是 jQuery 的大用户，但您可以设置一些东西来启用 CORS。

[CORS POST 请求可以使用纯 JavaScript，但为什么不能使用 jQuery？](https://stackoverflow.com/questions/5584923/a-cors-post-request-works-from-plain-javascript-but-why-not-with-jquery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:14:13.487

试试这个..我不知道它在这种情况下是否有效，但它对我有用。

`<?xml version="1.0" encoding="utf-8"?>`
`<phonegap>`
`<access origin="http://127.0.0.1*"/>`
`<log level="DEBUG"/>`
`</phonegap>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T19:19:57.370

经过多次尝试，我注意到请求有效（我收到了数据），但是在访问 json 数据内容时出现了一些问题。

# java - Android如何重用Socket？

> ID：10604855
> 
> 赞同：1
> 
> 时间：2012-05-15T16:17:08.500
> 
> 标签：java, android, sockets, http-protocols

如何重用 TCP Socket 连接（可能的 setReuseAddress（true），但对我不起作用）在连接时从服务器（Apache，HTTPD）下载多个文件而不断开连接（并再次连接）。

我的代码如下..

```
public class ClientThread implements Runnable {
        public void run() {
            try {

                Log.d("ClientActivity", "C: Connecting...");
                SocketAddress sockaddr = new InetSocketAddress(serverIpAddress, SERVERPORT);
                socket = new Socket();

                socket.setReuseAddress(true);
                socket.setKeepAlive(true);
                socket.setSoLinger(true, 3000);
                socket.connect(sockaddr);

                if (socket.isConnected()) {
                    DataInputStream input = new DataInputStream(socket.getInputStream());
                    PrintWriter output = new PrintWriter(new OutputStreamWriter(socket.getOutputStream()));

                    output.println("GET /way/images/profile/1231 HTTP/1.1");
                    output.println("Host: 192.168.1.2");
                    output.println("User-Agent: Java");
                    output.println("Accept: */*");
                    output.println("Connection: Keep-Alive");
                    output.println("");
                    output.flush();

                    String line;
                    File file = new File("/sdcard/aaa.png");
                    if (!file.exists()) {
                        file.createNewFile();
                    }
                    FileOutputStream fileOut = new FileOutputStream(file);
                    System.out.println("Getting first file");
                    while ( (line = input.readLine()) != null ) {
                        System.out.println(line);
                        fileOut.write(line.getBytes());
                    }
                    System.out.println("First file finished");
                    fileOut.flush();
                    fileOut.close();

                    output.println("GET /way/images/profile/1231 HTTP/1.1");
                    output.println("Host: 192.168.1.2");
                    output.println("User-Agent: Java");
                    output.println("Accept: */*");
                    output.println("Connection: Keep-Alive");
                    output.println("");
                    output.flush();

                    file = new File("/sdcard/aaa1.png");
                    if (!file.exists()) {
                        file.createNewFile();
                    }
                    fileOut = new FileOutputStream(file);
                    System.out.println("Getting second file");
                    while ( (line = input.readLine()) != null ) {
                        System.out.println(line);
                        fileOut.write(line.getBytes());
                    }
                    System.out.println("Second file finished");

                    fileOut.flush();
                    fileOut.close();
                    input.close();
                    output.close();

                }
                Log.d("ClientActivity", "C: Closed.");
            } catch (Exception e) {
                Log.e("ClientActivity", "C: Error", e);
                connected = false;
            }

            finally {
                try {
                    Log.d("ClientActivity", "Socket: Closed.");
                    socket.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    } 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-15T12:50:29.380

绑定套接字之前的 setReuseAddress(true) 允许绑定套接字，即使先前的连接处于超时状态。

[setReuseAddress 的文档](https://docs.oracle.com/javase/6/docs/api/java/net/ServerSocket.html#setReuseAddress%28boolean%29)

我认为直接使用套接字进行 HTTP 通信没有意义。我使用 HttpURLConnection。在大多数情况下都可以正常工作。

# xslt - 如何从 JBoss Actions Pipeline 向 XSLT 传递参数

> ID：10604860
> 
> 赞同：0
> 
> 时间：2012-05-15T16:17:15.103
> 
> 标签：xslt, jboss, jboss-esb

假设我有一个给定的动作：

```
<service category="MyService" name="MyFirstService">
<actions mep="RequestResponse">
    <action class="actions.CXFListenerAction" name="CXFServiceListener"/>
    <action class="org.jboss.soa.esb.actions.transformation.xslt.XsltAction" name="Transform XML">
        <property name="templateFile" value="/stylesheets/transform_response.xslt"/>
        <property name="failOnWarning" value="true"/>
    </action>
</actions> 
```

我试图弄清楚如何添加我可以从 XSLT 中访问的属性名称或参数。我尝试添加其他属性名称，

```
<property name="param1" value="Hey!"/> 
```

但我不能 100% 确定这对于添加 XSLT 可访问的参数是否正确。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:10:54.693

为 XsltAction 类定义的属性是特定于该操作类的属性，与模板文件中的参数无关。

所以简而言之，不可能从 JBoss ESB 操作管道将参数传递给 xslt。但是，可以创建一个自定义操作，用您在 jboss-esb.xml 文件中定义为属性的数据来​​装饰您的 ESB 消息，并将其插入到 XsltAction 之前。这可能就是你要找的。

# html - 使用 Display:Inherit 时谷歌地图被裁剪；

> ID：10604861
> 
> 赞同：2
> 
> 时间：2012-05-15T16:17:15.273
> 
> 标签：html, css, google-maps

我试图通过在`display:none;`和之间切换来隐藏/显示谷歌地图`display:inherit;`。当我申请`display:inherit`谷歌地图时，地图的一部分被裁剪了，我不确定为什么。在使用的同时如何解决这个问题`display:none;`？

[链接到示例](http://www.sfu.ca/~jca41/stuph/test.html)

```
//HTML
<button id="toggleMap">Toggle Google Map</button>
<button id="toggleImage">Toggle Image</button>

<div id="image">
  <img src="http://jdm-digital.com/wp-content/uploads/2012/04/google-jquery-opt-465x346.jpg">
</div>

<div id="map" style="width:500px; height:500px; display:none;">
  <div id="map_canvas" style="height:100%;"></div>
</div>

//JavaScript
$('#toggleImage').click(function() {
  $('#image').css('display', 'inherit');
  $('#map').css('display', 'none');
});

$('#toggleMap').click(function() {
  $('#image').css('display', 'none');
  $('#map').css('display', 'inherit');
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T18:27:21.910

如果您在隐藏地图时创建地图，API 不知道它应该有多大，因为浏览器报告它的大小为零。API 只为零大小的地图加载足够的图块，并将中心定位在 (0,0) - 左上角。

当您取消隐藏地图时，通过触发 resize 事件告诉 API 获取新尺寸：

```
google.maps.event.trigger(map,'resize') 
```

[文档](https://developers.google.com/maps/documentation/javascript/reference#Map)— 向下滚动到事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T16:19:16.223

如果我理解正确，你可以给`display:block`而不是`display:inherit`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:20:51.690

我的解决方案是在点击`$('#map').append(mapHTML);`时使用`#toggleMap`。这种方式允许在`#map`可见时创建地图。

我觉得这种方法有点骇人听闻。如果有人有替代解决方案，我肯定想知道它。

```
//HTML
<div id="map" style="width:500px; height:500px; display:none;"></div>

//JavaScript
$('#toggleMap').click(function() {
  $('#image').css('display', 'none');
  $('#map').css('display', 'inherit');

  var mapHTML = "<div id=\"map_canvas\" style=\"height:100%;\"></div>";
  $('#map').append(mapHTML);
  googleMap();  //Google Map's initialize() that would create the map
}); 
```

# java - 映射 FunctionalJava 选项 与休眠

> ID：10604865
> 
> 赞同：6
> 
> 时间：2012-05-15T16:17:37.893
> 
> 标签：java, hibernate, functional-programming, option, functional-java

我有一个休眠映射的 Java 对象，`JKL`它充满了一堆普通的休眠映射字段（如字符串和整数）。

我添加了一个新的嵌入字段（它位于同一个表中——不是映射）`asdf`，它是一个`fj.data.Option<ASDF>`. 我已将其作为一个选项，以明确该字段实际上可能不包含任何内容（而不是`null`每次访问时都必须处理）。

如何在我的`JKL.hbm.xml`文件中设置映射？我希望hibernate在它检索对象时自动将`null`数据库中的a`none`转换为a。`fj.data.Option<ASDF>`它还应该将一个非空实例转换为`ASDF`一个`some`。`fj.data.Option<ASDF>`我还需要做什么其他的诡计吗？谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T16:34:45.887

我建议`Option`在访问器（getter 和 setter）中引入 FunctionalJava，同时让 Hibernate 处理一个简单的 java 字段，该字段允许`null`.

例如，对于可选`Integer`字段：

```
// SQL
CREATE TABLE `JKL` (
    `JKL_ID` INTEGER PRIMARY KEY,
    `MY_FIELD` INTEGER DEFAULT NULL
) 
```

您可以直接映射 Hibernate 私有字段：

```
// Java
@Column(nullable = true)
private Integer myField; 
```

然后，您可以`Option`在访问器边界处引入：

```
// Java
public fj.data.Option<Integer> getMyField() {
    return fj.data.Option.fromNull(myField);
}

public void setMyField(fj.data.Option<Integer> value) {
    myField = value.toNull();
} 
```

这对您的需求有用吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T17:29:23.627

您可以使用 Hibernate 的自定义映射类型。文档在[这里](http://docs.jboss.org/hibernate/orm/4.0/manual/en-US/html/mapping.html#mapping-types-custom)。[这是一个将 Scala 的 Option](http://dzone.com/snippets/mapping-scalas-option)映射到 Hibernate 映射的类似示例。

简而言之，您需要扩展`org.hibernate.UserType`接口。您还可以创建具有`JKL`-typed 子类型的泛型类型基类，类似于您在 Scala 示例中看到的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T13:18:59.930

我认为使用`getter/setter`更简单，但这是我为使其工作所做的一个示例：

（它适用于数字和字符串，但不适用于日期（`@Temporal`注释错误））。

```
import com.cestpasdur.helpers.PredicateHelper;
import com.google.common.annotations.VisibleForTesting;
import com.google.common.base.Optional;
import org.apache.commons.lang.ObjectUtils;
import org.apache.commons.lang.StringUtils;
import org.hibernate.HibernateException;
import org.hibernate.usertype.UserType;
import org.joda.time.DateTime;

import java.io.Serializable;
import java.sql.*;

public class OptionUserType implements UserType {

@Override
public int[] sqlTypes() {
    return new int[]{
            Types.NULL
    };
}

@Override
public Class returnedClass() {
    return Optional.class;
}

@Override
public boolean equals(Object o, Object o2) throws HibernateException {
    return ObjectUtils.equals(o, o2);

}

@Override
public int hashCode(Object o) throws HibernateException {
    assert (o != null);
    return o.hashCode();
}

@Override
public Optional<? extends Object> nullSafeGet(ResultSet rs, String[] names, Object owner) throws HibernateException, SQLException {
    return Optional.fromNullable(rs.getObject(names[0]));
}

@VisibleForTesting
void handleDate(PreparedStatement st, Date value, int index) throws SQLException {
    st.setDate(index, value);
}

@VisibleForTesting
void handleNumber(PreparedStatement st, String stringValue, int index) throws SQLException {
    Double doubleValue = Double.valueOf(stringValue);
    st.setDouble(index, doubleValue);
}

@Override
public void nullSafeSet(PreparedStatement st, Object value, int index) throws SQLException {

    if (value != null) {
        if (value instanceof Optional) {
            Optional optionalValue = (Optional) value;
            if (optionalValue.isPresent()) {
                String stringValue = String.valueOf(optionalValue.get());

                if (StringUtils.isNotBlank(stringValue)) {

                    if (PredicateHelper.IS_DATE_PREDICATE.apply(stringValue)) {
                        handleDate(st, new Date(DateTime.parse(stringValue).getMillis()), index);
                    } else if (StringUtils.isNumeric(stringValue)) {
                        handleNumber(st, stringValue, index);
                    } else {
                        st.setString(index, optionalValue.get().toString());
                    }
                } else {
                    st.setString(index, null);
                }

            } else {
                System.out.println("else Some");
            }

        } else {
            //TODO replace with Preconditions guava
            throw new IllegalArgumentException(value + " is not implemented");

        }
    } else {
        st.setString(index, null);

    }

}

@Override
public Object deepCopy(Object o) throws HibernateException {
    return o;
}

@Override
public boolean isMutable() {
    return false;
}

@Override
public Serializable disassemble(Object o) throws HibernateException {
    return (Serializable) o;
}

@Override
public Object assemble(Serializable serializable, Object o) throws HibernateException {
    return serializable;
}

@Override
public Object replace(Object original, Object target, Object owner) throws HibernateException {
    return original;
}
} 
```

# iphone - 使用覆盖视图从 iPhone 摄像头捕获视频

> ID：10604867
> 
> 赞同：0
> 
> 时间：2012-05-15T16:17:42.717
> 
> 标签：iphone, objective-c, ios, xcode, cocos3d

我正在创建一个增强现实应用程序，它使用 cocos3d 在 iPhone 的摄像机视图上覆盖一个 3D 徽标。

我需要录制带有徽标覆盖的视频并将其写入文件。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:32:51.943

尝试从苹果修改这个项目：[这里](http://developer.apple.com/library/ios/#samplecode/AVCam/Listings/Classes_AVCamViewController_m.html)。在 AVCamViewController 的 viewDidLoad 方法中添加您的 logoimage。您需要从除视图之外的所有内容中清除 XIB。

# macros - 为什么在此 Clojure 宏上执行 macroexpand-1 时会出现 NullPointerException？

> ID：10604875
> 
> 赞同：2
> 
> 时间：2012-05-15T16:18:00.577
> 
> 标签：macros, clojure

我正在学习 Clojure 宏，并且在尝试在此宏上使用 macroexpand-1 时遇到 NullPointerException：

```
(def config {:ns 'bulbs.neo4jserver.client, 
             :root-uri "http://localhost:7474/db/data/"})
(def data {:name "James"})

(defmacro create
  [config data]
  `(~(ns-resolve (:ns config) 'create-vertex) config data))

(macroexpand-1 '(create config data)) 
```

试图编译这个返回：

```
 Unknown location:
   error: java.lang.NullPointerException

 Compilation failed. 
```

但是评估宏的主体...

```
`(~(ns-resolve (:ns config) 'create-vertex) config data) 
```

...返回这个...

```
(#'bulbs.neo4jserver.client/create-vertex bulbs.vertices/config bulbs.vertices/data) 
```

...这就是我想我想要的。

更新：如果我手动替换`(:ns config)`，`'bulbs.neo4jserver.client`那么错误就会消失——你如何让`(:ns config)`游戏变得更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:46:36.883

您正在尝试混合使用宏扩展时间和运行时信息。本地“config”不包含#'config var 的内容，而是符号'config。

如果您查看完整的堆栈跟踪，而不仅仅是错误消息，您会看到 ns-resolve 被传递了一个 nil：

```
user=> (pst)
NullPointerException 
        java.util.concurrent.ConcurrentHashMap.get (ConcurrentHashMap.java:796)
        clojure.lang.Namespace.find (Namespace.java:188)
        clojure.core/find-ns (core.clj:3657)
        clojure.core/the-ns (core.clj:3689)
        clojure.core/ns-resolve (core.clj:3879)
        clojure.core/ns-resolve (core.clj:3876)
        clj.core/create (NO_SOURCE_FILE:7) 
```

了解以下内容后，您将了解您的原始问题：

```
user=> (def bar [1 2 3])
user=> (defmacro foo [x] [(class x) (pr-str x)])
user=> (foo (get bar 2))
[clojure.lang.PersistentList "(get bar 2)"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:47:13.183

为什么这是一个宏？在这种情况下，似乎可以使用正常功能。

请记住，`config`它绑定到您输入的文字值，所以如果您这样做

```
(def c {:ns 'foo})  
(create c 1) 
```

`config`将是 just ，而不是运行时`'c`引用的地图。`c`

# javascript - 使用 JavaScript 的 CSS 过渡

> ID：10604877
> 
> 赞同：1
> 
> 时间：2012-05-15T16:18:05.633
> 
> 标签：javascript, html, css, dom, css-transitions

当单击 div 对象时，我正在尝试通过 DOM 使用 Javascript 激活 CSS 转换。我避免使用 jQuery 并故意使用 JS 来学习 DOM（这实际上是我第一次尝试它）。我实现了一个标准解决方案：从 HTML 文档中获取元素的 ListNode，然后更改所需对象的 className。然而，它似乎不能正常工作（我显然使用的是 Firefox）。

先感谢您。

这是文件。

```
<!doctype html>
<html>
<head>
<link rel = stylesheet href = "style.css" type = "text/css" media = screen>
<script src = "script.js" type = "text/javascript"></script>
</head>

<body>
<div class = "image"  onclick = "foo()"></div>
</body>
</html> 
```

> **样式.css**

```
.transition {
    -moz-transition: 2s width;
    width: 150px;
    height: 100px;

}

.image {
    -moz-transition: 2s width;
    width: 100px;
    height: 100px;
    background-color: black;
} 
```

> **脚本.js**

```
function foo() {
    var k = document.getElementsByClassName("image"); 
    k[0].className = "transition";
} 
```

**编辑：**编辑代码以使工作解决方案立即可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:22:27.357

您正在使用`getElementsByName`，但没有名称为 的元素`image`，而是有一个类为 的元素`image`。您可能打算使用`document.getElementsByClassName('image')`. 附带说明一下，您的 html 页面的结构不完整，您需要一个`<head>`和`<body>`部分，而且您的`<html>`开始标签位于错误的位置。

```
<!doctype html>
<html> 
<head> 
<link rel = stylesheet href = "style.css" type = "text/css" media = screen>
<script src = "script.js" type = "text/javascript"></script>
</head> 
<body> 
    <div class = "image"  onclick = "foo()"></div>
</body> 
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:35:13.420

正如 Stencil 提到的，一切都应该在 HTML 标记中。使用 jQUery 可以轻松实现类似的宽度动画

```
$('.image').animate({width: 250}, 500 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T16:28:27.390

在你的 javascript 逻辑中试试这个：

```
function foo() {
    var k = document.getElementsByClassName("image"); 
    k[0].className = "transition";
}​ 
```

# javascript - 高效的 JavaScript 事件跟踪

> ID：10604879
> 
> 赞同：0
> 
> 时间：2012-05-15T16:18:10.550
> 
> 标签：javascript, events, matomo

我在每次用户展开树时跟踪的可折叠树上有一些事件跟踪：

```
jQuery('ul.child-pages div.hitarea').click(function() {
    piwikTracker.trackGoal(1); // Track TreeView Clicks in Piwik when a user clicks on hitarea
}); 
```

如果我在每次点击时将数据发送到我的服务器，我担心这会影响性能。有没有更有效的方法来完成同样的事情？或者我是偏执狂，向服务器发送一个小请求并不是什么大不了的事（尽管 Piwik 是数据库驱动的，所以我实际上是在每次点击时都在 MySQL 中的某个地方编写代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:27:08.670

如果您发现这是一个真正的问题（如果您不确定这是一个问题，请不要浪费时间），只需批处理请求并在一段时间不活动后将它们发送出去

# ios - 您能否仅将较大的磁盘映像的较小矩形部分加载到内存中？

> ID：10604883
> 
> 赞同：0
> 
> 时间：2012-05-15T16:18:27.800
> 
> 标签：ios, uiview, core-graphics

在 iOS 和大多数移动设备上，由于内存限制，您可以加载的图像大小受到限制。是否可以在磁盘上有一个大图像（比如 5,000 像素 x 5,000 像素）但只将该图像中的一个较小的矩形（比如 100x100）读取到内存中进行显示？

换句话说，如果您只想查看其中的一小部分，是否需要将整个图像加载到内存中？如果可以只加载较小的部分，我们该怎么做？

这样一来，就可以像 spritesheets 那样为重复的内容节省大量空间。请务必注意，总体目标是最小化文件大小，因此应使用 jpeg 或 png 或其他某种压缩方式压缩大图像。我怀疑视频格式是这样的，因为您永远不会将整个视频加载到内存中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:38:52.390

虽然我没有使用这些技术，但您可能会发现以下 Apple 示例很有用：

[LargeImageDownizing 示例](http://developer.apple.com/library/ios/#samplecode/LargeImageDownsizing/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011173)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:33:06.480

你可以用这样的映射做一些事情`NSData`：

```
UIImage *pixelDataForRect(NSString *fileName, const CGRect pixelRect)
{
    // get the pixels from that image
    uint32_t width = pixelRect.size.width;
    uint32_t height = pixelRect.size.height;

    // create the context
    UIGraphicsBeginImageContext(CGSizeMake(width, height));
    CGContextRef bitMapContext = UIGraphicsGetCurrentContext();

    CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, height);
    CGContextConcatCTM(bitMapContext, flipVertical);

    // render the image (assume PNG compression)
    CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef) [NSData dataWithContentsOfMappedFile:fileName]);
    CGImageRef image = CGImageCreateWithPNGDataProvider(provider, NULL, YES, kCGRenderingIntentDefault);
    CGDataProviderRelease(provider);

    uint32_t imageWidth = CGImageGetWidth(image);
    uint32_t imageHeight = CGImageGetHeight(image);

    CGRect drawRect = CGRectMake(-pixelRect.origin.x, -((imageHeight - pixelRect.origin.y) - height), imageWidth, imageHeight);
    CGContextDrawImage(bitMapContext, drawRect, image);

    CGImageRelease(image);

    UIImage *retImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return retImage;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T00:15:03.567

你最好的选择是使用 UIScrollView 和 CATiledLayer。

查看 WWDC 2010 的“使用滚动视图设计应用程序”演示文稿，了解如何执行此操作：

[https://developer.apple.com/videos/wwdc/2010/](https://developer.apple.com/videos/wwdc/2010/)

这个想法是把你的大图像切成小块，然后使用 UIScrollView 为你的用户提供图像的可滚动视图，仅根据滚动视图的位置加载那些必要的图像部分。这是使用 CATiledLayer 完成的。

# java - 如何在 j2me 中创建文本区域

> ID：10604884
> 
> 赞同：1
> 
> 时间：2012-05-15T16:18:33.570
> 
> 标签：java, java-me, midp, lcdui

下面的代码只显示了文本字段，但我想包括文本字段和文本区域。需要帮忙

```
form1 = new Form("Mobile"); 
tb2 = new TextField("To: ", "", 30, TextField.ANY);
            TextBox tb3 = new TextBox("Message: ", "", 256, TextField.ANY);
            form1.append(tb2);
           // form1.append(tb3);
            form1.addCommand(submitCommand);
            display.setCurrent(tb3);
            display.setCurrent(form1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:57:13.410

你所说的*textarea*是一个 lcdui 对象`TextBox`；它不能与 TextField 显示在同一屏幕上。

如果您有兴趣，请参阅[“lcdui”标签信息](https://stackoverflow.com/tags/lcdui/info)以了解有关原因的更多详细信息（有指向 API 参考、教程、流行库等的链接）。

对于您发布的代码片段，首先想到的是将 TextBox 替换为 TextField，例如

```
 // ...initialization of Form and tb2
        TextField tb3 = new TextField("Message: ", "", 256, TextField.ANY);
        // above, TextBox has been replaced with TextField
        form1.append(tb3); // show "Message" textfield above "Mobile"
        form1.append(tb2);
        form1.addCommand(submitCommand);
        display.setCurrent(form1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:07:03.563

J2ME 中没有 TextArea 之类的东西。您可以使用 TextField[s] 或 TextBox 显示 Form，因为 TextBox 是可显示的。您一次只能显示一个 Displayable。

# asp.net-mvc - 从/使用 ASP MVC3 路由进行重定向的最佳方法是什么？

> ID：10604893
> 
> 赞同：0
> 
> 时间：2012-05-15T16:19:15.987
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我目前设置了以下路线：

```
 context.MapRoute("Root", "", new
    {
        controller = "Server",
        action = "FavoritesList",
        id = "00C"
    }
    ); 
```

但是我想改变它，所以默认值如下：

```
/F00C/Home-About#/C01C/Overview 
```

我意识到这不会映射到控制器和动作，但有没有办法可以使用 MapRoute 进行**内部重定向**到另一个 href。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:47:49.607

如果您的意思是您希望您的默认页面是这样的意思，即如果有人点击您的根 / 您希望他们被重定向到 /F00C/Home-About#/C01C/Overview，那么只需假设您在全局中有这些路由。 asax.cs

```
 routes.MapRoute(
    "DefaultRedirect", // Route name
    string.Empty, // URL with parameters
    new { controller = "Home", action = "Redirect" });

routes.MapRoute(
    "Homepage",
    "F00C/Home-About",
    new { controller = "Home", action = "Index" }); 
```

您可以在 HomeController 中执行此操作：

```
 public ActionResult Redirect()
{
    return Redirect("~/F00C/Home-About#/C01C/Overview");
}

public ActionResult Index()
{
    ViewBag.Message = "Welcome to ASP.NET MVC!";

    return View();
} 
```

编辑：忘了说

如果这更符合您的喜好，您也可以只在 IIS 本身中配置重定向，但这样它就是应用程序的一部分。

# c++ - QMovie 动画 gif 功能不适用于 Windows 系统

> ID：10604894
> 
> 赞同：0
> 
> 时间：2012-05-15T16:19:18.187
> 
> 标签：c++, qt

我正在`QMovie`使用`SystemTrayIcon`. 即，旋转 .gif 文件顶部的 gif 文件`TrayIcon`。

如果我在 Qt 4.7.0/Windows 版本上编译源代码，这可以正常工作。但是相同的代码不适用于部署在客户端机器上的 Qt 4.6.3 构建版本。似乎**缺少一些插件**。

我使用`QMovie::start()`和`QMovie::stop()`插槽。

我尝试将 Qt 4.7 DLL ( `QtCore4.dll`) 复制到 Qt 4.6.3 构建的二进制文件中。但这没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:40:09.997

QMovie 中的很多东西在 4.7 版本中发生了变化，修复了很多错误并弹出了一些新内容。

如果您需要此功能，则需要升级到 4.7 或更高版本。

# c# - 缺少文件的最后一个字节

> ID：10604898
> 
> 赞同：0
> 
> 时间：2012-05-15T16:19:26.710
> 
> 标签：c#, file, upload, download, share

我是编程新手，我有一个无法解决的问题。我创建了一个共享文件的程序，例如 Dropbox。我有一台运行良好的服务器和一个客户端。问题是，当我尝试从服务器下载文件时，流中似乎缺少一些字节。

```
clientSocket = new TcpClient(Program.host, Program.port);
NetworkStream networkStream = clientSocket.GetStream();
StreamWriter write = new StreamWriter(networkStream);
write.WriteLine(need);
write.Flush();
write.WriteLine(loca);
write.Flush();
StreamReader read = new StreamReader(networkStream);
Int64 size = Convert.ToInt64(read.ReadLine());
long blocks = size / 1024;
long blocksDown = 0;
try
{
    string fileName = string.Empty;
    int qtd = 0;
    int blockSize = 1024;
    double progress = 0;
    Int64 qtdDown = 0;
    Byte[] dataByte = new Byte[blockSize];
    bool download = true;
    lock (this)
    {
        networkStream.Read(dataByte, 0, dataByte.Length);
        int fileNameLen = BitConverter.ToInt32(dataByte, 0);
        fileName = Encoding.ASCII.GetString(dataByte, 4, fileNameLen);
        if (File.Exists(Program.loc + fileName))
            switch (MessageBox.Show("Ficheiro já existente!\r\nDeseja Substituir?", "Aviso", MessageBoxButtons.YesNo,
                MessageBoxIcon.Warning))
            {
                case DialogResult.Yes:
                    File.Delete(Program.loc + fileName);
                    download = true;
                    break;
                case DialogResult.No:
                    download = false;
                    break;
            }
        if (download)
        {
            Stream fileStream = File.OpenWrite(Program.loc + fileName);
            fileStream.Write(dataByte, 4 + fileNameLen, (1024 - (4 + fileNameLen)));
            bool progChanged = false;
            backWork.WorkerReportsProgress = true;
            double progAnt = 0;
            while (true)
            {
                qtd = networkStream.Read(dataByte, 0, blockSize);
                qtdDown += qtd;
                progress = (double)qtdDown * (double)100 / (double)size;
                if (Math.Round(progress) > Math.Round(progAnt))
                {
                    progChanged = true;
                    progAnt = progress;
                }
                if (Math.Round(progress) > 0 && progChanged)
                {
                    backWork.ReportProgress(((int)Math.Round(progress)));
                    progChanged = false;
                }
                fileStream.Write(dataByte, 0, qtd);
                fileStream.Flush();
                blocksDown++;
                if (qtd == 0)
                {
                    backWork.ReportProgress(100);
                    qtd = networkStream.Read(dataByte, 0, blockSize);
                    networkStream.Close();
                    fileStream.Close();
                    break;
                }
            }
            MessageBox.Show("O ficheiro " + fileName + " foi guardado em " + Program.loc + ".", "Download",
                MessageBoxButtons.OK, MessageBoxIcon.Information);
        }
    }
} 
```

这就是我正在做的事情。我正在后台工作人员上进行下载。首先我在流上写下我正在做的事情，然后我打开文件的流，然后开始读取流并写入文件。

* * *

@Ňuf我试过你说的还是不行代码看起来像这样，来自*qtdDown*的字节和*大小*不相等。抱歉，如果有些部分是葡萄牙语，我的母语是葡萄牙语。

```
 btnAct.Enabled = false;
    btnBro.Enabled = false;
    btnDown.Enabled = false;
    btnSend.Enabled = false;
    menuStrip1.Enabled = false;
    pBar.Value = 0;
    clientSocket = new TcpClient(Program.host, Program.port);
    NetworkStream networkStream = clientSocket.GetStream();
    StreamWriter write = new StreamWriter(networkStream);
    write.WriteLine(need);
    write.Flush();
    write.WriteLine(loca);
    write.Flush();
    int blockSize = 1024;
    byte[] fileSizeBytes = new byte[blockSize];
    networkStream.Read(fileSizeBytes, 0, blockSize);
    string fileSizeString = Encoding.ASCII.GetString(fileSizeBytes, 0, fileSizeBytes.Length);
    fileSize = Convert.ToInt64(fileSizeString);
    qtdDown = 0;
    try
    {
        string fileName = string.Empty;
        int qtd = 0;
        double progress = 0;
        Byte[] dataByte = new Byte[blockSize];
        bool download = true;
        lock (this)
        {
            networkStream.Read(dataByte, 0, dataByte.Length);
            int fileNameLen = BitConverter.ToInt32(dataByte, 0);
            fileName = Encoding.ASCII.GetString(dataByte, 4, fileNameLen);
            if (File.Exists(Program.loc + fileName))
                switch (MessageBox.Show("Ficheiro já existente!\r\nDeseja Substituir?", "Aviso", MessageBoxButtons.YesNo,
                    MessageBoxIcon.Warning))
                {
                    case DialogResult.Yes:
                        File.Delete(Program.loc + fileName);
                        download = true;
                        break;
                    case DialogResult.No:
                        download = false;
                        break;
                }
            if (download)
            {
                Stream fileStream = File.OpenWrite(Program.loc + fileName);
                fileStream.Write(dataByte, 4 + fileNameLen, (1024 - (4 + fileNameLen)));
                networkStream.ReadTimeout = 60;
                backWork.WorkerReportsProgress = true;
                double progAnt = 0;
                while (true)
                {
                    qtd = networkStream.Read(dataByte, 0, blockSize);
                    qtdDown += qtd;
                    progress = (double)qtdDown * (double)100 / (double)fileSize;
                    if (Math.Round(progress) > Math.Round(progAnt))
                    {
                        progAnt = progress;
                        backWork.ReportProgress(((int)Math.Round(progress)));
                    }
                    fileStream.Write(dataByte, 0, qtd);
                    if (qtdDown == fileSize)
                    {
                        backWork.ReportProgress(100);
                        fileStream.Close();
                        networkStream.Close();
                        break;
                    }
                }
                MessageBox.Show("O ficheiro " + fileName + " foi guardado em " + Program.loc + ".", "Download",
                    MessageBoxButtons.OK, MessageBoxIcon.Information);
            }
        }
    }

    catch (Exception ex)
    {
        menuStrip1.Enabled = true;
        btnAct.Enabled = true;
        btnBro.Enabled = true;
        btnDown.Enabled = true;
        btnSend.Enabled = true;
        MessageBox.Show("Ocorreu um erro!" + "\r\nBytes Downloaded: "
            + qtdDown.ToString() + "\\" + fileSize.ToString() + "\r\nDetalhes do Erro: " + ex.Message, "Download",
            MessageBoxButtons.OK, MessageBoxIcon.Error);
    }

    menuStrip1.Enabled = true;
    btnAct.Enabled = true;
    btnBro.Enabled = true;
    btnDown.Enabled = true;
    btnSend.Enabled = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:50:06.107

您通过调用 read.ReadLine() 正在丢失字节。尽管此函数仅返回一行的数据，但它在内部从网络流中读取更多数据到内部缓冲区并保留剩余数据以供后续 read.Read() 调用，这在您的代码中永远不会发生。

使用 StreamReader 读取数据或直接从 NetworkStrem 读取数据，但不要将两者的读数混合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:04:35.343

*我在最后一个if*中添加了这一行，* || (fileSize - qtdDown) < 1024* 并且文件现在可以工作，我不知道最后一个字节是否重要，但文件现在可以工作。

# xmpp - 带有 Openfire 的 Candy webclient，无法正常工作

> ID：10604906
> 
> 赞同：1
> 
> 时间：2012-05-15T16:19:49.517
> 
> 标签：xmpp, openfire, livechat, chatroom, candy

我已经设置了 Openfire xmpp 服务器，它从客户端运行良好，但我想用它来创建一个聊天室（muc），我在 openfire 工作中的设置，所以有一个 Conference.blabla.nl，那个会议服务器我可以与 Pandion 和 Tkabber 连接，我登录并询问那里有哪些房间，或者我是否想自己创建一个，一切顺利。

当我与糖果连接时，它仅在我使用正确的登录名并通过时才连接，但我希望它加入或在 muc 上创建聊天室。当我使用正确的用户名登录并通过我的屏幕时，我的屏幕变灰了，但是当我向登录 candy 的用户输入一些内容时，会出现一些消息，但只有这样，我才能在 candy 中阅读它们......

所以简而言之，我已经启动并运行了糖果，但仅在有人发送内容时显示信息。

任何人都知道它或有一些有用的提示。我只想要一个人们可以使用自己选择的名称（例如“guest”或其他名称）的网络客户端，然后登录到聊天室。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:54:21.580

有三种可能的选择：

1.  在 Candy 初始化时，使用“true”指定自动加入，并在 openfire 服务器中指定自动加入书签。
2.  在 Candy 初始化时，使用要自动加入的房间数组指定自动加入
3.  使用[roomPanel 插件](https://github.com/candy-chat/candy-plugins/tree/master/roomPanel "roomPanel 插件")来发现现有的房间并能够加入它们。

顺便提一句。我们也有一个[支持邮件列表](http://groups.google.com/group/candy-chat "支持邮件列表")

# android - 如何获取“此应用与您的所有设备不兼容”的原因。

> ID：10604913
> 
> 赞同：4
> 
> 时间：2012-05-15T16:20:08.093
> 
> 标签：android, google-play

我已经构建了一个已在 Android Market 上发布的应用程序。我收到`This app is incompatible with all of your devices.`消息并想知道是否以及如何知道不支持此功能的原因。我知道这可能是屏幕问题，但了解每台设备的原因会非常有用。可能吗？

# php - 如何通过 fql 获取朋友事件（或基本上不是我创建的任何事件）的正确 UTC 开始日期

> ID：10604915
> 
> 赞同：0
> 
> 时间：2012-05-15T16:20:09.683
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在尝试获取不是由我创建的事件的正确开始日期。我了解 facebook 如何保存事件的开始和结束日期（[有人可以解释一下 facebook 如何存储事件的开始和结束时间吗？](http://facebook.stackoverflow.com/questions/10600464/can-someone-expalin-me-how-facebook-stores-the-start-and-end-time-of-events)）并且我知道我需要知道我的时区才能获得正确的 UTC 开始日期，但是其他的呢事件？如何获取使用 fql 或图形 api 创建事件的用户的时区？有没有办法？我正在使用 php SDK。
这是我用来获取事件的代码

```
 $fql = "SELECT 
                        eid,
                        name,
                        description,
                        start_time,
                        end_time,
                        venue,
                        location,
                        update_time
                    FROM
                        event
                    WHERE 
                        eid IN (SELECT eid FROM event_member WHERE uid = $id)" ;
            $events = $facebook->api( array(
                'method' => 'fql.query',
                'query' => $fql,
            ) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T18:16:04.607

时区似乎仅限于当前用户。

但是，您应该能够获取事件的所有者-> id。如果所有者是用户（人），那么您可以获得位置-> id，这可能会从该地点或位置-> 名称中产生纬度\经度。在任何一种情况下，您仍然需要查找位置以将其与时区匹配。

此外，除非您的访问令牌具有 friends_location 权限，否则位置信息可能不可用。

# php - 带有验证类的php循环

> ID：10604916
> 
> 赞同：0
> 
> 时间：2012-05-15T16:20:13.043
> 
> 标签：php, class, loops

我有这个用于酒店网站的表格。我需要验证房间里的人数。用户选择房间数量和每个房间的人数。我正在遍历房间并确认每个房间不超过 4 人，包括成人和儿童。

我已经完成了一切，但我正在使用的课程似乎没有在循环中工作。这就是发生的事情；如果列表上的最后一个房间与人数相符，班级将允许其将数据记录在数据库中并继续下一步。但是，它仍然会显示房间内不允许超过 4 人的错误消息。它应该做的是返回上一个表单并显示错误，让用户再次选择房间。

这是代码，因此您可以帮助我：

```
foreach ($_POST['adt'] as $key => $adt){
  $chd = $_POST['chd'][$key];

  $v = new validacao;
  echo $v->validarApt($chd, $adt);
  echo $v->validarQpt($qpl);
  echo $v->validarTpl($tpl);
  echo $v->validarChd($chdroom);
  echo $v->validarAdt($adt);

}

if ($v->verifica()) { 
```

在此之后，如果经过验证，它应该记录在数据库中并继续执行代码。

这是课程：

```
<?

class validacao {
    var $campo;
    var $valor;
    var $msg = array();

    function mensagens($num, $campo, $max, $min) {
      $this->msg[0] = "<img src='imagens/x.jpg' /> Os apartamentos neste hotel permitem a acomodação de no máximo 4 passageiros, incluindo adultos e crianças <br />"; // apartamentos  
      $this->msg[1] = "<img src='imagens/x.jpg' /> Este hotel não possui apartamentos quádruplos, por favor selecione 2 apartamentos duplos <br />"; // apartamentos    
      $this->msg[2] = "<img src='imagens/x.jpg' /> Este hotel não possui apartamentos triplos, por favor selecione 2 apartamentos, 1 duplo e 1 single ou faça nova busca e procure por hotéis com apartamentos triplos que tenham preços divulgados em nossa tabela <br />"; // apartamentos    
      $this->msg[3] = "<img src='imagens/x.jpg' /> Este roteiro não dispõe de preços diferenciados para crianças, por favor inclua a criança como adulto <br />"; // apartamentos   
      $this->msg[4] = "<img src='imagens/x.jpg' /> Você deve incluir pelo menos 1 adulto no apartamento <br />"; // apartamentos

      return $this->msg[$num];
    }

    function validarApt($adt,$chd) {
      if ($chd + $adt >= 5) {
        return $this->mensagens(0, null, null, null);
      }
    }   

    function validarQpt($qpl) {
      if ($qpl == 0) {
        return $this->mensagens(1, null, null, null);
      }
    }   

    function validarTpl($tpl) {
      if ($tpl == 0) {
        return $this->mensagens(2, null, null, null);
      }
    }   

    function validarChd($chdroom) {
      if ($chdroom == 0) {
        return $this->mensagens(3, null, null, null);
      }
    }   

    function validarAdt($adt) {
      if ($adt == 0) { 
        return $this->mensagens(4, null, null, null);
      }
    }

    function verifica() {
      if (sizeof($this->msg) == 0) {
        return true;
      } else {
        return false;
      }
    }
  }
?> 
```

我感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:35:40.487

这应该会有所帮助。如果任何通过循环失败，您需要添加一个标志，该标志将是错误的，并在完成后检查。您只是在检查最后一次通过是否失败。

```
$verified = true;
foreach ($_POST['adt'] as $key => $adt){
  $chd = $_POST['chd'][$key];

  $v = new validacao;
  echo $v->validarApt($chd, $adt);
  echo $v->validarQpt($qpl);
  echo $v->validarTpl($tpl);
  echo $v->validarChd($chdroom);
  echo $v->validarAdt($adt);

  if(!$v->verifica()){ $verified = false; }
}

if ($verified) {
  ... //proceed with rest of code
} 
```

您在这里也有问题：（为清楚起见，我省略了一些细节）

```
class validacao {
  ...
  var $msg = array();

  function mensagens($num, $campo, $max, $min) {
    $this->msg[0] = "<img src='imagens/x.jpg' /> Os apartamentos neste hotel permitem a acomodação de no máximo 4 passageiros, incluindo adultos e crianças <br />"; // apartamentos 
    $this->msg[1] = "<img src='imagens/x.jpg' /> Este hotel não possui apartamentos quádruplos, por favor selecione 2 apartamentos duplos <br />"; // apartamentos  
    ...

    return $this->msg[$num];
  }

  ...

  function verifica() {
    if (sizeof($this->msg) == 0) {
      return true;
    } else {
      return false;
    }
  }
} 
```

后一个函数总是返回 false，因为前一个函数设置了一堆错误消息。您的每个验证函数都返回函数的结果，该结果`mensagens`始终是返回类的成员变量。您可能应该阅读静态函数并考虑这里的哪些函数应该是静态的，哪些是动态的，以及如何存储要返回的消息，以及这与实际失败的验证有何不同。

# jsf - 如何从链接调用 JSF bean 操作？

> ID：10604917
> 
> 赞同：3
> 
> 时间：2012-05-15T16:20:14.183
> 
> 标签：jsf, hyperlink, window, managed-bean

我们的项目中有以下要求。

点击一个链接，

1.  应该调用一个 JSF 托管 bean 方法，它将返回一个文档的 URL。
2.  此文档应在新窗口中打开。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T18:46:15.820

`<h:commandLink/>`带有`target="_blank"`属性的 a怎么样：

```
<h:commandLink action="#{bean.action}" target="_blank" value="Open document"/> 
```

在你的 bean 中：

```
public void action() {
   try {
       FacesContext.getCurrentInstance().getExternalContext()
            .redirect("page2.xhtml");
   } catch (IOException ex) {
       // do something here
   }
} 
```

替换`page2.xhtml`为您的目标网址。

# python - 如何在 Django 中打开后台进程的 url？

> ID：10604926
> 
> 赞同：0
> 
> 时间：2012-05-15T16:20:56.563
> 
> 标签：python, django

我正在学习有关 python 和 Django 的方法，但似乎找不到明确的文档来启动后台进程或线程以执行一些数据处理（包括从外部网站/url 提取信息）。

在哪里可以了解有关 Django 中后台进程/线程的更多信息？

我对演示跨多个站点/服务器/协议拉取和推送数据的教程特别感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:26:48.920

使用[Celery](http://www.celeryproject.org/)，一个与 Django 配合得很好的任务队列。在您的视图中添加延迟任务，Celery 将在单独的进程中处理它。教程可在 Celery 主页上找到。

一旦您了解了如何创建任务并将任务添加到队列中，您就可以使用标准 Python 模块（如 urllib2）打开 URL，或使用其他专用模块来使用 REST API。

在任何情况下，您都不应尝试在视图函数中创建新线程或启动子进程。始终使用延迟任务管理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T16:24:08.890

您可以使用 Python 子进程（http://docs.python.org/library/subprocess.html：

```
 subprocess.call(["ls", "-l"]) 
```

# c++ - 基类中虚函数的C++面向对象返回值

> ID：10604934
> 
> 赞同：1
> 
> 时间：2012-05-15T16:21:18.357
> 
> 标签：c++

我正在创建一个继承另一个类并且必须返回基类中函数的值的类......这很令人困惑，所以我会让代码自己说话......

```
class ParentClass {
public:
    virtual bool getMyVal();
};

bool ParentClass::getMyVal() {
    return true;   // in my program there is a bit more to it
}

class ChildClass : public ParentClass {
public:
    bool getMyVal();
};

bool ChildClass::getMyVal() {
    CalculateMassOfSun();

    return parent::getMyVal();    // Please make sure you read below...
} 
```

所以这只是我想要做的一个例子，而不是实际的代码。如您所见，在 ChildClass::getMyVal() 中，基本上需要进行一些预计算，然后在父类中运行相同的函数并返回其值。我知道它是父级中的一个虚函数，并且我没有以正确的方式在父级中调用该函数 - 这是它在 PHP 中的完成方式，我能想到的唯一方法对我来说是有意义的并希望目前其他人。

那么我该怎么做呢？目前，我发现了一些类似的东西：

```
bool ChildClass::getMyVal() : /*ParentClass::*/getMyVal() { ... } 
```

但是它不在这里返回值。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T16:24:01.713

要调用基本定义，`getMyVal`只需在调用前加上基本类型名称

```
return ParentClass::getMyVal(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:28:00.473

如果您想调用`ParentClass`版本，`getMyVal()`请执行以下操作：

```
bool ChildClass::getMyVal() {
    CalculateMassOfSun();

    return ParentClass::getMyVal(); // this will call parent version
} 
```

# ruby-on-rails-3 - MiniTest 行为异常，直接跳过集成测试文件夹

> ID：10604939
> 
> 赞同：0
> 
> 时间：2012-05-15T16:21:39.047
> 
> 标签：ruby-on-rails-3, bdd, minitest

学习如何测试很难！我只是想让 MiniTest 运行，伙计，这是一场斗争。我看过 Ryan 的 RailsCasts 并阅读了我能找到的关于这个主题的所有文档。

我只是在做（或试图做）助手、模型和请求的测试。现在，我的模型和辅助测试只是失败了。

但是，我编写了真正的身份验证集成测试，它们甚至都没有运行！！！看这个：

```
➜  myapp git:(master) rake
==============================================================================
SUITE test/factories,test/helpers,test,test/models,test/requests (SEED 41025)
==============================================================================
User
     0001 must be a real test                                  0:00:00.005 FAIL
 0:00:00.005 ERROR
==============================================================================
SUITE test/factories,test/helpers,test,test/models,test/requests (SEED 12794)
==============================================================================
SessionsHelper
     0001 must be a real test                                  0:00:00.006 FAIL
 0:00:00.006 ERROR
Errors running models, helpers! 
```

嗯，这真是太棒了，它在那些应该做的事情上失败了。现在为什么不运行“test/requests”目录中的东西！

```
require 'minitest_helper'

describe "Login Integration" do

  it "authenticates a user with a password" do
    login_user
    assert page.has_content?('Logged in')
  end

  it "fails to authenticate a user with a mismatched password" do
    user = FactoryGirl.create(:user)
    visit login_path
    fill_in "Email", :with => user.email
    fill_in "Password", :with => "bad password"
    click_button "Log In"
    assert page.has_content?('Invalid email or password')
  end

  it "logs out a user" do
    login_user
    click_link "Log Out"
    assert page.has_content?('Logged out')
  end

end 
```

我可以在文件中间键入“Joe Blow”，我什至没有收到语法错误。该文件不被拾取的任何理由都是零。看到名称“登录集成”了吗？好吧，它像这样绑定在我的 minitest_helper.rb 中：

```
class IntegrationTest < MiniTest::Spec
  include Rails.application.routes.url_helpers
  include Capybara::DSL
  register_spec_type(/integration$/i, self)
end 
```

如果这是我们正在使用的地方，那么将这些东西包含在 Rails 4 代码库中肯定看起来有点早。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:54:48.907

我很幸运我明白了这一点。在 2 次失败的测试后停止测试。我没有找到任何关于此的文档。

因此，如果您将测试存根，请这样做：

```
describe User do

  it "needs a real test"

end 
```

这将导致它“跳过”测试，然后继续。

不要这样做：

```
describe User do

  it "must have a real test" do

    flunk "needs a real test"

  end

end 
```

因为如果你这样做了，测试会神秘地停止，并且没有任何东西可以告诉你为什么。

我喜欢将我的模型和辅助测试排除在外。然后我构建我的集成测试，并在此过程中补充我需要的任何单元测试。我仍然可以用 MiniTest 做到这一点，它只是在 2 个错误后停止。我还没有阅读代码，也许有一些方法可以配置该阈值。

# linq - NHibernate linq 提供者 datediff

> ID：10604941
> 
> 赞同：5
> 
> 时间：2012-05-15T16:21:46.987
> 
> 标签：linq, nhibernate

是在哪里写这样的东西：

```
public class Item
{
    public DateTime Start { get; set; }
    public DateTime Finish{ get; set; }
}

Sessin.Query<Item>.Where( x => x.Start.AddHours( 3 ) > x.Finish ); 
```

现在我得到一个例外

> [NotSupportedException: System.DateTime AddHours(Double)]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T20:39:35.453

没有简单的方法可以使您的 LINQ 查询正常工作。您的方案的问题是 NHibernate 不知道如何翻译`DateTime.AddHours(double hours)`方法。但是你能用 HQL 写一个类似的查询吗？显然不是。没有标准的 HQL AddHours 函数。因此，您必须注册此新功能。NHibernate 使用方言在 hql 和特定于供应商的 SQL 语法之间进行转换。为此，您必须创建一个派生自现有方言类的新方言类并覆盖 RegisterFunctions 方法。但这仅解决了问题的前半部分。接下来你必须向 NHibernate 展示如何在 LINQ 中使用这个函数。`DateTime.AddHours(double hours)`您必须在方法和先前注册的自定义 hql 函数之间“映射” 。NHibernate 为此目的使用了一个注册表。您将不得不扩展默认的 linq-to-hql 注册表。

我将展示一个使用 NHibernate 3.3 的示例

创建一个新的方言类（我的示例使用预定义的 MsSql2008Dialect）

```
    公共类 EnhancedMsSql2008Dialect : MsSql2008Dialect
    {
        受保护的覆盖无效 RegisterFunctions() {
            base.RegisterFunctions();
            RegisterFunction("add_hours", new SQLFunctionTemplate(NHibernateUtil.DateTime, "dateadd(hour, ?1, ?2)"));
        }
    }

```

创建一个知道如何翻译 AddHours 方法的新 LINQ-to-HQL 生成器类

```
    使用 NHibernate.Linq.Functions；
    使用 NHibernate.Linq；
    使用 NHibernate.Hql.Ast；

    公共类 DateTimeMethodsHqlGenerator : BaseHqlGeneratorForMethod
    {
        公共 DateTimeMethodsHqlGenerator() {
            SupportedMethods = new[] {
                ReflectionHelper.GetMethodDefinition((DateTime x) => x.AddHours(1))
            };
        }

        公共覆盖 HqlTreeNode BuildHql（System.Reflection.MethodInfo 方法，System.Linq.Expressions.Expression targetObject，System.Collections.ObjectModel.ReadOnlyCollection 参数，HqlTreeBuilder treeBuilder，NHibernate.Linq.Visitors.IHqlExpressionVisitor 访问者）{
            return treeBuilder.MethodCall("add_hours", visitor.Visit(arguments[0]).AsExpression(), visitor.Visit(targetObject).AsExpression());
        }
    }

```

扩展默认的 LINQ-to-HQL 注册表类

```
    公共类 EnhancedLinqToHqlGeneratorsRegistry : DefaultLinqToHqlGeneratorsRegistry
    {
        公共 EnhancedLinqToHqlGeneratorsRegistry() : base() {
            //
            RegisterGenerator(ReflectionHelper.GetMethodDefinition((DateTime x) => x.AddHours(1)), new DateTimeMethodsHqlGenerator());
        }
    }

```

配置

```
    cfg.DataBaseIntegration(c => {
        c.Dialect<EnhancedMsSql2008Dialect>();
    });
    cfg.LinqToHqlGeneratorsRegistry<EnhancedLinqToHqlGeneratorsRegistry>();

```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T20:33:57.750

如果您使用的是 NH 3.3 和 Loquacious 配置，那么您可以执行以下操作。

添加`LinqToHqlGeneratorsRegistry`到配置： -

```
 var configure = new Configuration()
            .DataBaseIntegration(x => {
                x.Dialect<CustomDialect>();
                x.ConnectionStringName = "db";
             })
            .LinqToHqlGeneratorsRegistry<MyLinqtoHqlGeneratorsRegistry()
            .CurrentSessionContext<WebSessionContext>(); 
```

并添加以下三个类：-

```
public class MyLinqtoHqlGeneratorsRegistry : DefaultLinqToHqlGeneratorsRegistry
{
    public MyLinqtoHqlGeneratorsRegistry()
    {
        this.Merge(new AddHoursGenerator());
    }
}

public class AddHoursGenerator : BaseHqlGeneratorForMethod
{
    public AddHoursGenerator()
    {
        SupportedMethods = new[] {
        ReflectionHelper.GetMethodDefinition<DateTime?>(d =>      
                d.Value.AddHours((double)0))
          };
    }

    public override HqlTreeNode BuildHql(MethodInfo method,
        System.Linq.Expressions.Expression targetObject,
        ReadOnlyCollection<System.Linq.Expressions.Expression> arguments,
        HqlTreeBuilder treeBuilder, IHqlExpressionVisitor visitor)
    {
        return treeBuilder.MethodCall("AddHours",
                visitor.Visit(targetObject).AsExpression(),
                visitor.Visit(arguments[0]).AsExpression()
            );
    }
}

public class CustomDialect : MsSql2008Dialect
{
    public CustomDialect()
    {
        RegisterFunction(
             "AddHours",
             new SQLFunctionTemplate(
                  NHibernateUtil.DateTime,
                  "dateadd(hh,?2,?1)"
                  )
             );
    }
} 
```

我是根据fabio的这篇[博文得出的。](http://fabiomaulo.blogspot.co.uk/2010/07/nhibernate-linq-provider-extension.html)

您现在可以按原样使用您的代码：-

```
Session.Query<Item>.Where( x => x.Start.AddHours( 3 ) > x.Finish ); 
```

这在 3.2 中也是可能的，但`public override HqlTreeNode BuildHql(..)`参数略有不同......

# matlab - 如何找到散点数据与理论公式MATLAB的相关性？

> ID：10604944
> 
> 赞同：0
> 
> 时间：2012-05-15T16:21:51.400
> 
> 标签：matlab, math, correlation, scatter-plot

我正在做关于金融数学的论文项目。我遇到的一个问题是我想知道理论曲线和散点数据之间是否存在某种相关性。

[这](http://dl.dropbox.com/u/709705/Conditional%20probability%20of%20an%20upward%20move%20DATA2.png)是我拥有的散点数据和理论曲线。

有没有一些简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T20:35:01.600

双变量相关性（通常是 Pearson 相关性）是衡量两组数据之间线性相关性的统计量。[您的链接](http://dl.dropbox.com/u/709705/Conditional%20probability%20of%20an%20upward%20move%20DATA2.png)的理论曲线似乎不包含离散数据点，因此无法计算它与某些数据集之间的相关性。

根据您的模型和研究问题，您可能有兴趣使用多元回归分析或广义[化]线性模型分析数据与模型的拟合度。这些 MATLAB 命令可能很有用：（`regress`多元[线性回归](http://www.mathworks.com/help/toolbox/stats/regress.html)）、`regstats`（[回归诊断](http://www.mathworks.com/help/toolbox/stats/regstats.html)）、`glmfit`（[广义线性模型回归](http://www.mathworks.com/help/toolbox/stats/glmfit.html)）和`glmval`（[广义线性模型值](http://www.mathworks.com/help/toolbox/stats/glmval.html)）。

# button - 比 G+ 和 Facebook 更大或更小的 Twitter 分享按钮

> ID：10604947
> 
> 赞同：0
> 
> 时间：2012-05-15T16:22:11.137
> 
> 标签：button, twitter, facebook-like, share

这个问题一直困扰着我好几个月。我们有（非常有效的）Facebook 和 G+ 按钮在几个页面上水平对齐，但我们不得不离开 Twitter，因为 Twitter 按钮的高度（在其按钮构建器中为您提供两个大小选项）大于或小于另外两个按钮，都是 24px 高。看起来 Twitter 的按钮是 20 像素或 26 像素。我附上了一个截图作为例子。

如果我们使用小号 twitter，它显然比其他两个按钮小很多，而且看起来很俗气（大号也是一样）。我到处搜索这个问题的答案。我希望使用 Twitter 已有的功能，但我应该只自定义一个按钮吗？如果是这样，是否有任何简单的方法可以让计数仍然存在？

我找不到解决此问题的任何好方法（我已阅读[https://dev.twitter.com/docs/tweet-button](https://dev.twitter.com/docs/tweet-button)上的文档）而且我似乎找不到其他人使用它，而不是所以不是任何地方，所以我想知道我是否只是错过了一些非常明显的东西，而有人最终得到了一个公认的答案，告诉我我是个白痴……

**屏幕截图** [http://sphotos.xx.fbcdn.net/hphotos-ash3/553477_10150822852373097_614203096_9759982_910737829_n.jpg](http://sphotos.xx.fbcdn.net/hphotos-ash3/553477_10150822852373097_614203096_9759982_910737829_n.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T20:15:13.467

Twitter 不提供高度为 24 像素的按钮，但是您可以让所有三个提供程序的高度均为 20 像素。

Facebook：[https](https://developers.facebook.com/docs/reference/plugins/like/) ://developers.facebook.com/docs/reference/plugins/like/ （使用“button_count”样式）。Twitter：[https](https://twitter.com/about/resources/buttons#tweet) ://twitter.com/about/resources/buttons#tweet （不要使用“大”复选框）。G+：[https](https://developers.google.com/+/plugins/+1button/) ://developers.google.com/+/plugins/+1button/ （“中等”大小）

所有 3 个提供程序也都有“高”格式，如果您为每个提供程序启用计数选项，则它们之间的格式相似。

# actionscript-3 - 如何在 AIR 中实现事件通知机制

> ID：10604951
> 
> 赞同：0
> 
> 时间：2012-05-15T16:22:18.450
> 
> 标签：actionscript-3, air, event-handling

你知道如何在 AIR 中实现事件通知机制吗？为简单起见，考虑一个示例：

我想构建两个应用程序：“电视”和“远程”。其中，电视是使用AIR实现的。对于“电视”，我想用我的*遥控器*向*电视*发送消息。

我必须如何以这样的方式实现“电视”，它在等待模式下运行，每当它收到来自“远程”的消息时，它都会处理消息并采取适当的行动（即改变频道，增加音量...... ）。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:35:57.950

如果远程不是基于 Flash 技术的应用程序，使用 UDP 消息交换，Web 服务将需要无休止的轮询。

# javascript - 如何修改highcharts图例项点击事件？

> ID：10604952
> 
> 赞同：53
> 
> 时间：2012-05-15T16:22:23.373
> 
> 标签：javascript, jquery, highcharts

我需要修改 highcharts 图例项目的点击事件。Highcharts 演示 [http://www.highcharts.com/demo/line-basic](http://www.highcharts.com/demo/line-basic)。我想要例如：第一个动作将是一些警报，第二个动作将是默认动作（从图表中清除东京线）。谢谢。对不起，如果问题不干净。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-15T16:39:11.457

您必须`legendItemClick` 像下面的代码一样使用回调

```
plotOptions: {
        line: {

           events: {
                legendItemClick: function () {
                   alert('I am an alert');
                   //return false; 
                   // <== returning false will cancel the default action
                    }
                }
            ,
            showInLegend: true
        }
    } 
```

这是[工作小提琴](http://jsfiddle.net/joycse06/LDMAQ/)，当您单击东京之类的图例然后隐藏东京线时，它会显示警报。

另请参阅相关事件的[plotOptions 文档](http://api.highcharts.com/highcharts#plotOptions.line.events.legendItemClick)。根据您使用的图表类型，您需要放置的位置可能会有所不同。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-29T00:00:08.323

对我来说，legendItemClick 事件必须是针对系列的，而不是针对线的。例如：

```
plotOptions: {
        series: {
            events: {
                legendItemClick: function(event) {
                    var visibility = this.visible ? 'visible' : 'hidden';
                    if (!confirm('The series is currently '+ 
                                 visibility +'. Do you want to change that?')) {
                        return false;
                    }
                }
            }
        }
    }, 
```

来自 Highcharts 的示例：http: [//jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-events-legenditemclick/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-events-legenditemclick/)

# python - 运行并从后台进程获取输出

> ID：10604958
> 
> 赞同：3
> 
> 时间：2012-05-15T16:22:42.263
> 
> 标签：python, subprocess

我已经知道有几个针对这个主题的问题，但没有一个能解决我的具体问题。或者至少我找不到它。

我需要在后台执行一些程序，等待输出并对其进行操作。**但是后台程序必须一直执行**。

我需要的后台程序的信息准确地位于其输出的第二行。如果这个程序阻止我的代码直到到达这一行，就没有问题。但它必须在该行之后解锁，以便我可以执行与后台程序完全无关的其他任务。

不过，我无法弄清楚如何做到这一点。我已经阅读了很多`subprocess`模块的文档，特别是`subprocess.Popen`.

实用：为什么[此代码](https://stackoverflow.com/a/4417735/563154)不适用于`['localtunnel', '8000']`参数？它什么也不输出...

我知道我不需要 root 权限来执行此操作。

* * *

**在 jadkik94 和 fest 回答后进行编辑**

不幸的是，这两个答案都不适合我。也许我做错了什么......

首先。“健全性检查”：

```
import subprocess, threading, time
can_break = False

def run():
    args = ["ping", "google.com"]
    popen = subprocess.Popen(args, shell=False, stdout=subprocess.PIPE)
    while not can_break:
        print popen.stdout.readline()

t = threading.Thread(target=run)

try:
    t.start()
    while True:
        print 'Main thread...'
        time.sleep(1)
except KeyboardInterrupt:
    can_break = True 
```

上面的代码可以正常工作，输出类似于：

```
Main thread...
PING google.com (74.125.234.160) 56(84) bytes of data.
64 bytes from plusone.google.com (74.125.234.160): icmp_req=1 ttl=54 time=82.5 ms
Main thread...
64 bytes from plusone.google.com (74.125.234.160): icmp_req=2 ttl=54 time=82.7 ms
[...] 
```

但是当我将它与`args`我想要的 ( `args = ['localtunnel', 8000]`) 一起使用时，唯一的输出是`Main thread...`.

当我调用`localtunnel`主线程（阻塞）时，它返回所需的输出：

```
In [x]: popen = subprocess.Popen(['localtunnel', '8000'])
  This localtunnel service is brought to you by Twilio.
  Port 8000 is now publicly accessible from http://????.localtunnel.com ... 
```

这种方法基于 jadkik94 的回答。但费斯特的回答也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:14:19.070

您可以在一个线程中运行它（这样它就不会阻止您的代码运行），并在获得第二行之前获取输出，然后等待它终止。这是一个示例，它将读取`dir /s`Windows 上命令的输出以获取所有目录列表。

```
import subprocess, thread, time

def run():
    global can_break

    args = ["dir", "/s"]
    shell = True

    count = 0
    popen = subprocess.Popen(args, shell=shell, stdout=subprocess.PIPE)
    while True:
        line = popen.stdout.readline()
        if line == "": continue
        count += 1
        if count == 2:
            do_something_with(line)
            break

    print "We got our line, we are waiting now"
    popen.wait()
    print "Done."
    can_break = True

def do_something_with(line):
    print '>>> This is it:', line

thread.start_new_thread(run, tuple())

can_break = False
while not can_break:
    print 'Wait'
    time.sleep(1)

print 'Okay!' 
```

输出将如下所示：

```
等待
>>> 这是它：卷序列号是 XXXX-XXXX

我们得到了我们的线路，我们现在正在等待
等待
等待
等待
.
.
.
完毕。
等待
好的！

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:44:33.180

要以非阻塞方式启动程序但仍能看到程序的输出，程序必须在单独的线程或进程中启动。Ryan 在这里发布了一个不错的代码示例：[Python Subprocess.Popen from a thread](https://stackoverflow.com/questions/984941/python-subprocess-popen-from-a-thread)

请记住，最后一行`print myclass.stdout`将打印输出当时的显示*方式*。如果程序刚刚启动，它可能根本没有输出任何东西，所以你的代码可能应该读取，`myclass.stdout`直到它收到你需要的行。

# iis - 在脚本中删除 IIS7 中的模块

> ID：10604959
> 
> 赞同：0
> 
> 时间：2012-05-15T16:22:45.600
> 
> 标签：iis, powershell, iis-7, appcmd

我有一个安装了 WSUS 的 Windows 2008 x64 服务器，因此使用 32 位应用程序池的网站损坏了。此问题是由于在 IIS 的 applicationHost.config 文件中定义了压缩方案。我们现在通过复制 suscomp.dll 的 32 位版本以一种相当肮脏的方式解决了这个问题，但我相信一定有更好的方法！

我可以在 IIS7 GUI 中以另一种方式解决它，如下所示：

*   在 Web 服务器级别，解锁“模块”下的 StaticCompressionModule 和 DynamicCompressionModule 条目。
*   在我的网站级别，删除这些模块。

很简单——只有两个步骤，肯定是可编写脚本的？？我可以使用 appcmd 执行第二部分，如下所示：

```
appcmd delete module "DynamicCompressionModule" /app.name:"Default Web Site/mysite" 
```

但是，如果我在没有步骤 1 的情况下尝试这样做，那只会给我一个锁冲突。问题是，我一生都无法弄清楚如何使用 Powershell 或 appcmd 在 Web 服务器级别解锁单个模块。这肯定是可能的吗？

其他人遇到这个并且有任何掘金要分享吗？

谢谢，艾尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T00:42:56.430

我认为最初的问题已经解决了，但是由于我在尝试通过搜索解决类似问题时遇到了这个问题，所以这个答案可能会对其他人有所帮助。基本上问题是，即使您解锁该`modules`部分并将其复制到`<location>`允许覆盖的位置，所有本机模块（至少在 IIS 8 中）都已`lockItem="true"`在​​其上设置。

如果您使用appcmd.exe 删除然后重新创建本机模块条目，APPROOT`lockItem`将消失。用于实现 StaticCompressionModule 的命令，例如：

```
appcmd set config -section:system.webServer/modules /-[name='StaticCompressionModule']
appcmd set config -section:system.webServer/modules /+[name='StaticCompressionModule'] 
```

请注意，这适用于本机模块，因为这`name`是它们除了`lockItem`(no`type`或`preCondition`) 之外的唯一属性。就我而言，我希望能够`<clear />`全部默认`handlers`并`modules`专门添加我基于模块的应用程序所需的内容：

```
@echo off
setlocal
set iis=%SystemRoot%\System32\inetsrv\appcmd.exe
set iisx=%iis% /commit:apphost
set ws=config -section:system.webServer
%iisx% unlock %ws%/handlers
%iisx% unlock %ws%/modules
for /f "tokens=3 delims== " %%a in ('%iis% list %ws%/modules ^| find /v "type=" ^| find "add"') do %iisx% set %ws%/modules /-[name='%%~a'] && %iisx% set %ws%/modules /+[name='%%~a']
endlocal 
```

批处理文件中的假设是所有`<add>`元素`modules`都具有 a`type`并且未锁定或不锁定，已锁定并且只有 a`name`是重要的。如果有人试图做类似于我对 Web 应用程序所做的事情，我会尝试在[http://christophercrooker.com](http://christophercrooker.com)上写博客。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:16:04.037

我从来没有这样做过，但试一试（首先在测试环境中运行）

```
Import-Module WebAdministration

# at the web server level, unlock the StaticCompressionModule 
# and DynamicCompressionModule entries under 'modules'.
Set-WebConfigurationProperty //modules -Name Collection -Value @{name='StaticCompressionModule';lockItem='false'} -PSPath IIS:\
Set-WebConfigurationProperty //modules -Name Collection -Value @{name='DynamicCompressionModule';lockItem='false'} -PSPath IIS:\

# at my web site level, delete these modules
Disable-WebGlobalModule -PSPath 'IIS:\Sites\Default Web Site' -Name DynamicCompressionModule 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-10T15:38:46.963

以下是 IIS7 上托管模块和本机模块的实际工作方式（也适用于 IIS 10）以及如何检查它们是否已解锁。我存储了一组要解锁的模块名称，这些模块名称会针对每个检查进行循环。

```
#need IIS module
Import-Module WebAdministration

#checking to see if module is locked, same for managed and native    
foreach($module in $modules)
{    
    $lock = Get-WebConfigurationLock -Filter "system.webServer/modules/add[@name='$module']" -PSPath IIS:\
    $isLocked = $lock -neq $null
}

#unlocking is different between managed and native modules, so I have a function to check what type the module is
function Is-ManagedModule([string]$ModuleName) {
    $Precondition = Get-WebConfigurationProperty -filter //modules -Name Collection[name="$ModuleName"] -PSPath IIS:\ | Select -ExpandProperty Precondition
    return $Precondition -eq "managedHandler"
}

#and then actually doing the unlock
foreach ($module in $modules)
{
    if (Is-ManagedModule $module)
    {
        #Unlocks managed modules
        Set-WebConfigurationProperty -Filter //modules -Name Collection -Value @{name="$module";lockItem='false'} -PSPath IIS:\
    }
    else
    {
        #Unlocks native modules
        Remove-WebConfigurationLock -Filter "system.webServer/modules/add[@name='$module']" -PSPath IIS:\
    }
} 
```

# c# - 使用 AS2 尝试从另一台服务器读取 xml 文件

> ID：10604963
> 
> 赞同：0
> 
> 时间：2012-05-15T16:23:13.290
> 
> 标签：c#, asp.net-mvc-3, flash, actionscript-2

我正在尝试读取 XML 文件。两个文件（xml 和 html）都在同一个域中，但我应该在不知道真实路径的情况下访问它们。因为使用 mvc3 我有两个根示例：www.xxx.com/news 和 www.xxx.com/news/see/8

所以根不同。出色地。我现在正在这样做：

```
xmlAlbum = new XML();
xmlAlbum.ignoreWhite = true;
xmlAlbum.onLoad = loadXML;
xmlAlbum.load("http://www.guminformatica.com.ar/di/mapalatinoamerica.xml");
xmlAlbum2 = new XML();
xmlAlbum2.ignoreWhite = true;
xmlAlbum2.onLoad = loadXML2;
xmlAlbum2.load("http://www.guminformatica.com.ar/di/mapaArgentina.xml"); 
```

# mobile - 将 JQuery Mobile 元素与网格对齐在同一行

> ID：10604965
> 
> 赞同：0
> 
> 时间：2012-05-15T16:23:19.650
> 
> 标签：mobile, html, jquery-mobile

我有五个 HTML 元素与 jquery mobile 水平对齐。我使用宽度可变的 5 列自定义网格 ( `ui-grid-d`)。一切都很好，但元素并没有完全对齐——例如，控制组站在上面，段落站在其他组件下方。

我对移动设计和 jQuery Mobile 很陌生。有没有办法自动对齐所有元素？

```
<div id="alarmsLog" class="ui-grid-d">
      <div class="ui-bar ui-bar-c">
          <div class="ui-block-a">
            <a href="#" data-role="button" data-icon="delete" data-iconpos="notext">Image</a>
          </div>
          <div class="ui-block-b">
            <div data-role="controlgroup" data-type="horizontal" >
                <a href="#" data-role="button" data-icon="arrow-l" data-iconpos="notext">Left</a>
                <a href="#" data-role="button" data-icon="arrow-r" data-iconpos="notext">Right</a>
            </div>
          </div>
          <div class="ui-block-c">
            <p>1 di 2</p>
          </div>
          <div class="ui-block-d">
            <input type="text" name="alarmText" id="alarmText" value="Allarme 1"  />
          </div>
          <div class="ui-block-e">
            <a href="#" data-role="button" data-icon="delete" data-iconpos="notext">Delete</a>
          </div>
      </div>
</div> 
```

# xml - XSLT if 表达式语法，组合多个表达式

> ID：10604973
> 
> 赞同：9
> 
> 时间：2012-05-15T16:23:52.223
> 
> 标签：xml, xslt, xpath

尝试使用`<xsl:if test="expression">`我想将多个表达式组合在一起的 if 语句来执行操作顺序，例如这个伪代码：

```
if (Number != '' and (Name != '' or PreferredName != '')) {// code here} 
```

基本上我想在一个`<xsl:if>`：

```
<xsl:if text="Number != '' and (Name != '' or PreferredName != '')"> 
```

但我不确定`expression`语法，我认为我不能那样做`()`，因为我在任何地方都没有看到它。我在网上找不到表达式语法，可能是 XPath，但我不确定 XPath 是否支持`()`对表达式进行分组。我不是 XSL/XML/XSD 方面的专家，所以我不知道表达式是不是 XPath，还是什么。

如果可能的话，我宁愿不做嵌套`<xsl:if>`语句，并且想坚持使用`<xsl:if>`not `<xsl:choose>`。

我敢肯定这可能是一个简单的答案，但有点卡在这里。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T16:44:45.807

初学者的条件语句`xsl:if`需要一个`xsl:template`或其他 xsl 元素作为父元素。
语法将类似于以下内容：

```
<xsl:template>
    ... preliminary xsl statements ...
    <xsl:if test="Number != '' and (Name != '' or PreferredName != '')">
        ... further xsl statements (the code you were referring to ...
    </xsl:if>
    ... other xsl stataments ...
</xsl:template> 
```

进一步建议：研究 xslt 的用法，特别是模板及其应用程序（以及某种自动循环）。

# java - 替换 Axis2 aar 文件中的 jar 中的类

> ID：10604986
> 
> 赞同：1
> 
> 时间：2012-05-15T16:24:54.443
> 
> 标签：java, jar

我有一个 Axis2 aar 文件，埋在该 aar 文件中我有一个包含我编译的类的 jar 文件，我想替换其中的一个。

这是我所拥有的简化版本

MyService.aar 包含：

`lib\JarJarBinks.jar`

JarJarBinks.jar 包含：

`com\example\skywalker\TheForce.class`

我想替换`TheForce.class`，唯一想到的机制，而不重建一切是：

1.  项目清单
2.  解压aar文件
3.  拔出`JarJarBinks.jar`
4.  解开`JarJarBinks.jar`
5.  替换`TheForce.class`为我的更新副本
6.  jar起来`JarJarBinks`，并将其放回提取的aar布局中
7.  将 aar 文件保存起来

我可以创建一个 bash 脚本来自动执行此操作，但我想知道是否有更清洁/更快的方法。

我找到了更新选项，`jar u`但我不相信它适用于嵌套的人工制品。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-19T11:14:36.660

要使 Axis2 工作，您不需要**aar**文件。

services.xml 文件可以是 Axis2 工作的以下任一位置。

1.  存储库/服务/SimpleService/meta-inf/services.xml
2.  WEB-INF/services/SimpleService/meta-inf/services.xml

这将帮助我们有一个额外的步骤来生成 aar 文件。

**服务部署者.java**

```
 * <p>
 * Standard Axis2 service Deployer which use services.xml file to build
 * services. ServiceDeployer can be used with Axis2 archive (.aar) or exploded
 * directory structure. Some of the example formats given below.
 * </p>
 * <p>Examples : <p>
 *        <ul>
 *          <li>repository/services/SimpleService.aar/meta-inf/services.xml</li>
 *          <li>repository/services/SimpleService/meta-inf/services.xml</li>
 *          <li>WEB-INF/services/SimpleService.aar/meta-inf/services.xml</li>
 *          <li>WEB-INF/services/SimpleService/meta-inf/services.xml</li>
 *       </ul>

     InputStream servicexmlStream = serviceClassLoader
            .getResourceAsStream("META-INF/services.xml");
    if (servicexmlStream == null) {
        servicexmlStream = serviceClassLoader.getResourceAsStream("meta-inf/services.xml");
    } else {
        metainf = "META-INF";
    } 
```

[https://axis.apache.org/axis2/java/core/apidocs/org/apache/axis2/deployment/ServiceDeployer.html](https://axis.apache.org/axis2/java/core/apidocs/org/apache/axis2/deployment/ServiceDeployer.html)

# security - 是否应该从 CF10 开始使用 encodeForHtml() 和 encodeForURL() 来支持 htmlEditFormat() 和 urlFormat()？

> ID：10604987
> 
> 赞同：0
> 
> 时间：2012-05-15T16:24:56.167
> 
> 标签：security, coldfusion, coldfusion-10, esapi

在较早的问题[encodeForHtml() 与 htmlEditFormat() 中，它们有何不同](https://stackoverflow.com/questions/10597073/encodeforhtml-vs-htmleditformat-how-are-they-different)，似乎新的`encodeForHtml()`&`encodeForURL()`功能分别优于`htmlEditFormat()`& `urlFormat()`。

是否应该使用基于 esapi 的 encodeForXXX 函数来支持现有函数？是否应该弃用 2 个较旧的功能？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:48:08.967

我不知道这两个旧功能是否会被弃用。但我会说使用新功能是个好主意，除非您需要支持向后兼容性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T05:41:02.307

新功能涵盖了旧功能所做的所有领域，而且它们更“意识到”近期未完全逃脱加价的潜在风险。鉴于新功能的存在，我认为没有理由使用旧功能。

至于弃用，我完全赞成。如果`encodeForHtml()`- 例如 - 比 更好/更安全`htmlEditFormat()`，那么最好不要将后者标记为过时并且应该使用新功能。在最坏的情况下，不这样做是疏忽大意。

我会敦促 Adob​​e 在文档中将 htmlEditFormat() 等标记为已弃用，并告知原因。我不建议他们在这一点上比弃用更进一步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T00:51:34.370

**[ColdFusion 11 中的新功能](https://wikidocs.adobe.com/wiki/display/coldfusionen/New+in+ColdFusion)**

> **已弃用**
> 
> 该`HTMLEditFormat()`功能已[已]弃用。

# c++ - 成员函数模板参数数量超过 1 时的编译错误

> ID：10604990
> 
> 赞同：1
> 
> 时间：2012-05-15T16:24:59.010
> 
> 标签：c++, templates, stl

当我尝试调用`Foo<T>::setValue`涉及多个模板参数的成员函数版本时，有人会告诉我为什么编译器会标记错误，如下所示。

见[ideone](http://ideone.com/cvqOQ)

```
class Bar
{
public:
    enum TYPE{};
};

//////////////////////////////////////////////////////////////////////////////////////

template<typename T>
class Foo
{
public:
    template<typename P>
    void setValue1();

    template<typename P, int>
    void setValue2();

    template<typename P, typename P::TYPE>
    void setValue3();

private:
    T   m_value;
};

//////////////////////////////////////////////////////////////////////////////////////

template<typename T>
template<typename P>
void Foo<T>::setValue1()
{
}

template<typename T>
template<typename P, int>
void Foo<T>::setValue2()
{
}

template<typename T>
template<typename P, typename P::TYPE>
void Foo<T>::setValue3()
{
}

//////////////////////////////////////////////////////////////////////////////////////

int main()
{
    Foo<Bar::TYPE> f1;

    f1.setValue1<Bar>();                // Compiles
    f1.setValue2<Bar, int>();       // ERROR
    f1.setValue3<Bar, Bar::TYPE>(); // ERROR

    return EXIT_SUCCESS;
} 
```

海合会错误：

```
error: no matching function for call to ‘Foo<Bar::TYPE>::setValue2()’
error: no matching function for call to ‘Foo<Bar::TYPE>::setValue3()’ 
```

MSVC .NET 2008 错误：

```
Test6.cpp(60) : error C2975: 'Foo<T>::setValue2' : invalid template argument for 'unnamed-parameter', expected compile-time constant expression
        with
        [
            T=Bar::TYPE
        ]
        Test6.cpp(24) : see declaration of 'Foo<T>::setValue2'
        with
        [
            T=Bar::TYPE
        ]
Test6.cpp(61) : error C2975: 'Foo<T>::setValue3' : invalid template argument for 'unnamed-parameter', expected compile-time constant expression
        with
        [
            T=Bar::TYPE
        ]
        Test6.cpp(27) : see declaration of 'Foo<T>::setValue3'
        with
        [
            T=Bar::TYPE
        ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:33:11.600

您不能基于模板参数重载 C++ 中的函数……您只能基于函数参数签名重载函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T16:57:20.560

除了@Jason 提到的问题之外，您的第二个函数模板将 an`int`作为其第二个参数，并且您提供了一个类型。

通过将名称更改为`setValue2`每个@Jason 的帖子，然后将函数调用更改为：

```
f1.setValue2<Bar, 3>(); 
```

我不确定您要使用第三个模板函数定义来完成什么。看来您应该只需要一个模板参数，因为 P::Type 也可以派生。

我还应该注意，您的类定义并不十分精确——类的模板参数是 a `typename`，但您传递`Bar::TYPE`的是一个`enum`类型。

# javascript - 对象字面量可以嵌套多远？

> ID：10604995
> 
> 赞同：1
> 
> 时间：2012-05-15T16:25:09.450
> 
> 标签：javascript, oop, properties, nested, object-literal

我发现可以在对象文字属性中嵌套另一个属性。这是一个例子：

```
var rectangle = { 
    upperLeft : { x : 2, y : 2 },
    lowerRight : { x : 4, y : 4}
}; 
```

但是，当我尝试在该嵌套属性中嵌套另一个属性时，我无法让它工作。也许我的语法不正确？这是我的代码：

```
var rectangle = { 
    upperLeft : { x : {min: 2, max: 4}, y : 2 },
    lowerRight : { x : {min: 4, max: 6}, y : 4}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:27:55.917

你的第二个样品很好。当您访问：

```
rectangle.upperLeft.x.min 
```

它正确返回`2`。你遇到什么问题？请注意，没有理论上的最大嵌套级别。