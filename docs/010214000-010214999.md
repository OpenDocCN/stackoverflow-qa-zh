# StackOverflow 问答 10214000-10214999

# javascript - HTM5 LocalStorage：为每个登录的玩家保存一个游戏进程

> ID：10214000
> 
> 赞同：0
> 
> 时间：2012-04-18T16:42:39.270
> 
> 标签：javascript, html

我正在开发一个 html5 游戏，但是如果玩家处于游戏中期并且不小心关闭了网络浏览器，我就会遇到这个问题。一旦他再次打开游戏，游戏就会从头开始，玩家正在玩的游戏就输了。所以我找到了这个解决方案 使用本地存储，我们可以将整个游戏数据编码为 JSON 并存储它们。这样，玩家可以稍后恢复他们的游戏。

但是在我的游戏中，每个玩家都有一个登录名，所以我也应该将他的登录名存储在 localStorage 中，这样每个玩家都会有自己的 localStorage 。

那么我可以用 localStorage 做到这一点吗？有更好的解决方案吗？

提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:45:38.840

是的，您可以在客户端上使用 SQLLite 数据库。它是开源的，可以从[SQLLite 的下载链接下载](http://sqlitebrowser.sourceforge.net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T16:49:46.720

根据您的数据大小，您可以使用 cookie。它更快更简单。

# asp.net-mvc-3 - ASP.NET MVC - 带有实体框架的存储库模式

> ID：10214001
> 
> 赞同：1
> 
> 时间：2012-04-18T16:42:41.013
> 
> 标签：asp.net-mvc-3, entity-framework-4, repository-pattern

当您使用存储库模式开发 ASP.NET 应用程序时，您的每个方法是否创建一个新的实体容器实例（上下文），每个方法都有一个 using 块，或者您是否为容器创建一个类级别/私有实例由任何存储库方法使用，直到存储库本身被处置？除了我在下面提到的之外，还有哪些优点/缺点？有没有办法结合我没有看到的每一个的好处？您的存储库是否实现了 IDisposable，允许您为存储库实例创建 using 块？

**多个容器（与单个容器相比）**

*好处：*

*   防止连接被自动关闭/处理（将在 using 块的末尾关闭）。
*   有助于迫使您仅将特定视图/视图模型所需的内容拉入内存，并且往返次数更少（尝试延迟加载的任何内容都会出现连接错误）。

*缺点：*

*   控制器/视图中子实体的访问仅限于您使用 Include() 调用的内容
*   对于显示从许多表（许多不同的存储库方法调用）收集的信息的仪表板索引之类的页面，我们将增加创建和处置许多实体容器的开销。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:03:19.113

如果您在存储库中实例化您的上下文，那么您应该始终在本地进行，并将其包装在 using 语句中。

如果您使用依赖注入来注入上下文，那么当请求完成时，让您的 DI 容器处理对上下文的调用 dispose。

不要将上下文直接实例化为类成员，因为在垃圾回收发生之前，这不会释放上下文资源。如果你这样做了，那么你将需要实现 IDipsosable 来处理上下文，并确保使用你的存储库的任何东西都正确地处理了你的存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:30:28.137

我个人将我的上下文放在我的存储库中的类级别。我这样做的主要原因是因为存储库模式的一个明显优势是我可以轻松地交换存储库并利用不同的后端。请记住 - 存储库模式的目的是您提供一个接口，将数据提供给某些客户端。如果你曾经切换过你的数据源，或者只是想动态地提供一个新的数据源（通过依赖注入），那么如果你在每个方法级别上这样做，你就会产生一个更加困难的问题。

Microsoft 的 MSDN 站点有很好的资料[库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)。希望这有助于澄清一些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:46:15.660

我不同意所有四点：

> 防止连接被自动关闭/处理（将在 using 块的末尾关闭）。

在我看来，如果您在方法级别、存储库实例级别或请求级别处理上下文并不重要。（当然，您*必须*在单个请求结束时处理上下文 - 通过将存储库方法包装在`using`语句中或通过`IDisposable`在存储库类上实现（如您所建议的那样）并将存储库实例包装在`using`控制器操作中的语句中或通过在控制器构造函数中实例化存储库并将其处置在`Dispose`覆盖控制器类 - 或者通过在请求开始时实例化上下文并在请求结束时处理它（一些依赖注入容器将有助于完成这项工作）。）为什么要“自动处理”上下文？在桌面应用程序中，每个窗口/视图都有一个可能会打开数小时的上下文是可能且常见的。

> 有助于迫使您仅将特定视图/视图模型所需的内容拉入内存，并且往返次数更少（尝试延迟加载的任何内容都会出现连接错误）。

老实说，我会通过完全禁用延迟加载来强制执行此操作。在客户端与服务器断开连接的 Web 应用程序中，我看不到延迟加载的任何好处。在您的控制器操作中，您始终知道需要加载什么，并且可以使用急切或显式加载。为了避免内存开销和提高性能，您始终可以禁用 GET 请求的更改跟踪，因为 EF 无论如何都无法跟踪客户端网页上的更改。

> 控制器/视图中子实体的访问仅限于您使用 Include() 调用的内容

这是一个优势而不是劣势，因为您没有延迟加载带来的意外惊喜。如果您需要稍后在控制器操作中填充子实体，根据某些条件，您可以通过`LoadNavigationProperty`具有相同甚至新上下文的其他存储库方法（或其他东西）加载它们。

> 对于显示从许多表（许多不同的存储库方法调用）收集的信息的仪表板索引之类的页面，我们将增加创建和处置许多实体容器的开销。

创建上下文——我不认为我们在谈论成百上千的实例——是一种廉价的操作。我认为这是一种非常理论上的开销，在实践中没有发挥作用。

我已经使用了您在 Web 应用程序中提到的两种方法以及第三种选择，即为每个请求创建一个上下文，并将这个相同的上下文注入到控制器操作中我需要的每个存储库/服务中。他们三个都为我工作。

当然，如果您使用多个上下文，则必须小心在同一个工作单元中完成所有工作，以避免将实体附加到多个上下文，这将导致众所周知的异常。避免这种情况通常不是问题，但需要多加注意，尤其是在处理 POST 请求时。

我最近对每个请求使用上下文，因为它更容易，而且我只是看不到使用非常狭窄的上下文的好处，而且我认为没有理由在整个请求处理中使用多个工作单元。如果我需要多个上下文 - 无论出于何种原因 - 我总是可以创建专门的方法来使用它们自己的上下文而不是请求的“默认上下文”。

# python - Python win32com 可以在不弹出 GUI 的情况下使用 Visio（或任何程序）吗？

> ID：10214003
> 
> 赞同：2
> 
> 时间：2012-04-18T16:42:50.320
> 
> 标签：python, com, visio, win32com

我有一个 Python 脚本，使用 win32com 打开一个 Visio 文件并将每个选项卡转储为`.png`文件。执行此操作时，它会在屏幕上短暂闪烁 Visio gui。有没有办法在后台执行此操作而不加载 Visio 窗口？

```
import win32com.client
visio = win32com.client.Dispatch("Visio.Application")
visio.Documents.Open(filepath)
...
visio.Quit() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T17:38:44.517

```
visio = win32com.client.Dispatch("Visio.InvisibleApp") 
```

应该创建一个不可见的 Visio 实例。

请参阅[http://msdn.microsoft.com/en-us/library/aa201815(v=office.10).aspx](http://msdn.microsoft.com/en-us/library/aa201815(v=office.10).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:15:39.753

您可以使用该`Visible`属性控制应用程序的可见性。

示例：隐藏 Visio 应用程序窗口

```
visio.Visible = 0 
```

示例：显示 Visio 应用程序窗口

```
visio.Visible = 1 
```

当您创建初始实例时，它仍然是可见的。只有之后才能隐藏窗口。我不知道强制应用程序无形*启动的方法。*

# python - 在 Python 3.2.3 中使用 open() 的问题

> ID：10214004
> 
> 赞同：1
> 
> 时间：2012-04-18T16:42:50.780
> 
> 标签：python

我在 Python 3.2.3 中遇到了 open() 函数的问题。以下代码适用于 2.7.3，但不适用于 Python 3：

```
 file = open("text.txt", 'r') 
```

在 Python3 中，它给了我一个标准的 IOError：

```
 IOError: [Errno 2] No such file or directory: 'text.txt' 
```

请注意，引用的 text.txt 文件与 python 文件位于同一目录中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:06:49.473

文件名与文件的目录无关，而是与您[当前的工作目录](http://en.wikipedia.org/wiki/Current_working_directory)相关（您可以使用 找到[`os.getcwd()`](http://docs.python.org/library/os.html#os-file-dir)）。

如果要打开一个名称与 Python 文件相关的文件，可以使用魔法变量[`__file__`](http://docs.python.org/reference/datamodel.html#index-49)，如下所示：

```
import os.path
fn = os.path.join(os.path.dirname(__file__), 'text.txt')
with open(fn, 'r') as file:
   # Do something, like ...
   print(file.read()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:19:14.247

您正在尝试以读取模式打开文件，并且该文件必须存在。

也许问题是该文件不存在于您的 python3 路径中，因此打开命令失败，但您的 python2.7 库（或 python2.7 路径中的某个位置）上存在“text.txt”，这就是为什么 python 是能够找到文件并打开它。

您可以尝试此代码（这将确保您创建文件后该文件存在）：

```
f = open('text.txt','w')
f.close()
f.open('text.txt','r') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T00:53:59.547

我将 Eclipse 与 Pydev 一起使用，并且在包中而不是在项目级别上有 text.txt 文件。要访问包中的文件，您需要使用：

```
 file = open("[package]/text.txt", 'r') 
```

# java - Look&Feel 忽略了自定义 TableCellRenderer

> ID：10214006
> 
> 赞同：3
> 
> 时间：2012-04-18T16:42:57.937
> 
> 标签：java, swing, jtable, look-and-feel, nimbus

我有一个 JTable，我为其提供了一个自定义 TableCellRenderer，它根据数值单元格的值（<0、0、>0）将数字单元格着色为红色/灰色/绿色。

但是，当我使用 Nimbus L&F 时，该`label.setForeground()`方法被忽略了：调用时`label.getForeground()`我可以看到号码的颜色正确，例如红色，但在屏幕上却是黑色。如果我移除 L&F，它工作正常。

**有没有办法温和地要求 L&F 接受使用我的颜色作为那个单元格？**

ps：我知道的[javadoc`setForeground()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setForeground%28java.awt.Color%29)很清楚L&F可能会忽略这个调用，所以我正在寻找一种解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:21:01.477

*   使用起来很复杂`JLabel`，

*   如果您要使用`Components`，则无需覆盖`NimbusDefaults`或`Painter`，

*   [抱歉，我没有玩 & & 的想法](https://stackoverflow.com/q/9958004/714968)，`Nimbus`因为`NimbusDefaults`我`Renderer`还有另一个最喜欢的 L&F[请阅读有关外观和感觉的更多信息](https://stackoverflow.com/a/9382795/714968)

*   （没有从 JCheckBox 覆盖 NimbusDefaults，这个问题在这个论坛上解决了几次）

![在此处输入图像描述](../Images/2999668852722ce72e87125ba60134df.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.table.*;

public class TablePrepareRenderer extends JFrame {

    private static final long serialVersionUID = 1L;
    private JTable table;

    public TablePrepareRenderer() {
        Object[] columnNames = {"Type", "Company", "Shares", "Price", "Boolean"};
        Object[][] data = {
            {"Buy", "IBM", new Integer(1000), new Double(80.50), false},
            {"Sell", "MicroSoft", new Integer(2000), new Double(6.25), true},
            {"Sell", "Apple", new Integer(3000), new Double(7.35), true},
            {"Buy", "Nortel", new Integer(4000), new Double(20.00), false}
        };
        DefaultTableModel model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
            /*@Override
            public Class getColumnClass(int column) {
            switch (column) {
            case 0:
            return String.class;
            case 1:
            return String.class;
            case 2:
            return Integer.class;
            case 3:
            return Double.class;
            default:
            return Boolean.class;
            }
            }*/
        };
        table = new JTable(model) {

            private static final long serialVersionUID = 1L;

            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                Component c = super.prepareRenderer(renderer, row, column);
                int firstRow = 0;
                int lastRow = table.getRowCount() - 1;
                if (row == lastRow) {
                    ((JComponent) c).setBackground(Color.red);
                } else if (row == firstRow) {
                    ((JComponent) c).setBackground(Color.blue);
                } else {
                    ((JComponent) c).setBackground(table.getBackground());
                }
                return c;
            }
        };
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        getContentPane().add(scrollPane);
    }
    /*private static String[] suffix = new String[]{"", "k", "m", "b", "t"};
    private static int MAX_LENGTH = 4;

    private static String format(double number) {
    String r = new DecimalFormat("##0E0").format(number);
    r = r.replaceAll("E[0-9]", suffix[Character.getNumericValue(r.charAt(r.length() - 1)) / 3]);
    return r.length() > MAX_LENGTH ? r.replaceAll("\\.[0-9]+", "") : r;
    }*/

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch (Exception fail) {
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TablePrepareRenderer frame = new TablePrepareRenderer();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
        /*long[] numbers = new long[]{1000, 5821, 10500, 101800, 2000000, 7800000, 92150000, 123200000, 99999900};
        for (long number : numbers) {
        System.out.println(number + " = " + format(number));
        }*/
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:49:38.797

好的，感谢[mKorbel 的回答](https://stackoverflow.com/a/10214573/829571)，我意识到我使用`ColorUIResource`的是`Color`. 换句话说：

```
label.setForeground(Color.red); //works
label.setForeground(new ColorUIResource(Color.red)); //doesn't work 
```

我不确定我是否理解为什么一个有效而不是另一个（`Color`是 的直接超类`ColorUIResource`），但问题解决了。

# castle-windsor - 类型 Castle.Facilities.FactorySupport.FactorySupportFacility 没有实现接口 Castle.MicroKernel.IFacility

> ID：10214009
> 
> 赞同：2
> 
> 时间：2012-04-18T16:43:05.813
> 
> 标签：castle-windsor

我已将我的解决方案从城堡版本 1.0 更新到版本 3.0，现在我收到此错误：

> 类型 Castle.Facilities.FactorySupport.FactorySupportFacility 没有实现接口 Castle.MicroKernel.IFacility。

在我的配置文件中，我有这个：

```
 <facilities>
    <facility
     id="factory.support"     
     type="Castle.Facilities.FactorySupport.FactorySupportFacility, Castle.MicroKernel"
    />
  </facilities> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:32:45.723

你的组装是错误的。这行得通。

```
 <facilities>
    <facility
     id="factory.support"     
     type="Castle.Facilities.FactorySupport.FactorySupportFacility, Castle.Windsor"
    />
  </facilities> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T15:58:30.337

从 Castle v3 开始，FactorySupportFacility 存在于 Castle.Windsor 外部的自己的程序集中。所以要配置它，你可以使用

```
<facility
 id="factory.support"     
 type="Castle.Facilities.FactorySupport.FactorySupportFacility, Castle.Facilities.FactorySupport"
/> 
```

# javascript - JQuery：比 queue:false 或 div 包装器更好的方法

> ID：10214015
> 
> 赞同：0
> 
> 时间：2012-04-18T16:43:25.667
> 
> 标签：javascript, jquery, css, jquery-animate

这是我的情况。我试图一次在一个元素上做几个动画；然而，随着 UI 线程的“功能”和 JQuery 的动画队列，它变得很麻烦。

我正在为一个站点设计一个可重用的控件库，我想做的一件事是拥有一个多类属性系统来启动不同的动画`ready()`。

例如：

```
<div class="fadein loadingbar"></div> 
```

使用 CSS 作为图像背景`.loadingbar`，然后使用 JQuery 无限期地为加载栏的背景设置动画：

```
$(".loadingbar").each(function(){
            $(this).css({backgroundPosition:"0px 0px"});
            $(this).animate({backgroundPosition:"(-65px 0px)"}, (($(this).height() / 35) * 2000) + 600, "linear", function(){_n3_animLoadBars(this)});
        }); 
```

以及课程的`fadeIn()`动画`.fadein`：

```
$(".fadein").each(function(){
       $(this).css({opacity:0,visibility:"visible"})
       .animate({opacity:1}, {duration:1000});
    }); 
```

然而; 让它们异步动画的唯一方法是`{queue:false}`为`.animate()`函数做，它工作正常，直到我想*延迟*淡入动画：

```
$(".fadein").each(function(){
           $(this).css({opacity:0,visibility:"visible"})
           .delay(800)
           .animate({opacity:1}, {duration:1000,queue:false});
        }); 
```

它完全跳过了`.delay()`调用，因为它没有排队（因此没有在 fx 堆栈上的延迟之后立即放置动画提示）。

唯一的解决方法是用另一个 div 包装 div：

```
<div class="fadein"><div class="loadingbar"></div></div> 
```

当然，要拿`{queue:false}`出来。

* * *

虽然这可行，但据说 javascript 应该足够先进，因此标记不必那么混乱（通常像这样的简单 div 包装对我来说很好，但我设计它是为了我自己的个人娱乐，**我如果可能的话，希望将其保留为单个 div**）。

我缺少的 JQuery 的任何快速修复，或者有没有办法通过编写插件来做到这一点？

任何见解都会有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T23:42:49.397

找到了解决方案——这比我想象的要容易。

我没有在淡入中指定`{queue:false}`，而是在背景动画上指定了它，让淡入排队。

# caching - Varnish & ESIs : Fetching in parallel and possible workarounds

> ID：10214020
> 
> 赞同：4
> 
> 时间：2012-04-18T16:43:58.220
> 
> 标签：caching, memcached, reverse-proxy, varnish, esi

I'm investigating using Varnish with ESIs to cache page content for a high traffic forum-like website.

Context : I want to cache content for visitors only (connected users will have a really different display and need absolute fresh content). Still, for visitors, some parts of a page need to be dynamic : - not cachable, for example for a visitor-dependant module (think a 'suggestion' widget that is fed with a real-time analysis of the pages viewed, thanks to a beacon) - cachable with a small TTL of 15mn, for example for a 'latest posts' widget or for very changing ads campaigns.

Currently we are using Apache/PHP/symfony/memcache to cache pages and have in-house ESI-like mecanism : a page from cache is parsed and some specific tags are interpreted (including calls to web services and/or databases). This is not performant enough since server time is then around 700ms.

In remplacement of this solution, we can have Varnish+ESIs. The total nb of ESIs included in a page can reach 15\. The real number of ESIs to fetch will be less than that but not so much given the ESI's TTLs. The critical problem is that Varnish fetches the ESIs sequencially instead of parallel and this is not acceptable. This feature is somewhere late in Varnish's roadmap.

So,

*   What is your experience with Varnish and ESIs ? How many ESIs, response time gain that you have ?

*   Do you know workarounds or other serious and configurable (VCL was nice) reverse-proxies with parallel ESI fetching ?

*   If not, what kind of good caching strategy do you use for equivalent use-cases ?

Thanks, P.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-25T23:54:00.257

目前我在一个高流量的网站工作，性能就是我们的一切。在几个页面上，我们使用了很多（20 多个）ESI，例如在我们的搜索结果列表中。结果列表是 JSON 响应，其中的每个结果块都是一个单独的 ESI。好的，我们进行缓存预热。但是我们在这方面没有遇到任何性能问题。如果后端请求真的很慢，那么 ESI 的数量将是一个问题。

并行 ESI 获取在 Varnish 的功能请求列表中，但我认为它没有在 4.1 版中实现。

# matlab - How to divide a vector into frames in MATLAB?

> ID：10214027
> 
> 赞同：3
> 
> 时间：2012-01-22T14:41:23.053
> 
> 标签：matlab

I'am building a voice morphing system using MATLAB and I need to divide the source and target, training and test samples into frames of 128 samples so that I can then apply DWT on each of the frame. So please guide me how to divide the vector into frames?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-01-22T15:59:02.363

You can change a vector into a matrix of equally-sized columns/rows (i.e. frames) using the `reshape` function:

```
x = rand(128 * 100, 1);
X = reshape(x, 128, 100);
% X is a 128-by-100 matrix; the i-th column of 128 elements 
% is addressed by X(:,i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:37:01.493

如果您有可用的信号处理工具箱，则使用 reshape 的替代方法是使用缓冲区。简单地 。. .

```
y = buffer(x,128) 
```

..在你的例子中。如果原始信号 (x) 中的元素数不是 128 的整数倍，则缓冲区命令还将在最后一帧添加尾随零。

# django-pagination - Django paginator and raw SQL

> ID：10214030
> 
> 赞同：1
> 
> 时间：2012-04-18T16:44:43.893
> 
> 标签：django-pagination

I'm having trouble using djangoś paginator function. In this question i can't find the solution: [Django: Paginator + raw SQL query](https://stackoverflow.com/questions/2532475/django-paginator-raw-sql-query)

With `Table.object.all()` i have no trouble, but with raw sql i receive the error `object of type 'RawQuerySet' has no len()`

I tried also

num = len(list(ads)) paginator = Paginator(num, 2)

and i receive `object of type 'int' has no len()`. I tried to print num and it contains the correct number so i don't understand why paginator doesn't like it. Hope someone can help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T01:06:13.733

在这里找到解决方案：[http ://groups.google.com/group/django-users/browse_thread/thread/42cf7b5a88f31b9c](http://groups.google.com/group/django-users/browse_thread/thread/42cf7b5a88f31b9c)

这意味着：

```
paginator = Paginator((list(ads)), 10) 
```

# visual-studio-2010 - Visual Studio 2010 - "Add As Link" option not visibile

> ID：10214034
> 
> 赞同：1
> 
> 时间：2012-04-18T16:44:57.093
> 
> 标签：visual-studio-2010

I'm currently working on a solution which involves 2 projects that share some of the same code. However, when I right click on a project and select "Add->Existing Item", I no longer get the "Add As Link" option on the "Add" drop down button.

I am using Visual Studio 2010 Express in Window 7 on a 64bit machine and have done this before on Windows XP 32bit. I'm not quite sure why it isn't showing anymore.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:48:36.063

您可能想看看[“添加为链接”选项发生了什么？](https://stackoverflow.com/questions/5044885/what-happened-to-the-add-as-link-option)

长话短说，此选项（通常）仅适用于托管项目。您能否确认您当前的项目不是托管项目？

# tcp - Design need of checksum fields at multiple "TCP/IP" model layers ? are they really redundant ?

> ID：10214036
> 
> 赞同：2
> 
> 时间：2012-04-18T16:45:00.997
> 
> 标签：tcp, protocols, network-protocols, checksum

Design need of checksum fields at multiple "TCP/IP" model layers ? are they really redundant ?

let us take one example,

in L1: Ethernet-II, we have 4 bytes FCS field, in L2: Ipv4 we too have checksum, but in IPv6 they have omitted checksum and off-loaded to upper layers. in L3: TCP/UDP both mandates checksum field and further cause performance delay.

So, if IPv6's design to offload the checksum to uppper layers was a good design, then can we ignore L2 and above checksums as L1 FCS (frame check sequence) has already covered the integrity ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:27:01.687

不，因为记住层是相互独立的。你真的不知道你是否会有较低级别的 FCS。这对于特定的部署并不重要，但对于协议的寿命很重要。其次，每个协议中的各种校验和都有自己的问题。示例： http: [//noahdavids.org/self_published/CRC_and_checksum.html](http://noahdavids.org/self_published/CRC_and_checksum.html)

# c# - 用前向矢量画一个圆，并随着旋转一起移动

> ID：10214039
> 
> 赞同：1
> 
> 时间：2012-04-18T16:45:12.693
> 
> 标签：c#, winforms, gdi+, system.drawing

今天相当忙于发布并创建一个 AI 程序来模拟 Boid。现在我正在努力让一个“boids”画一个移动。“boid”只是一个圆圈（省略号），用线画来象征它的“前向向量”。

```
class SwarmCir
{
    public float _pointX;
    public float _pointY;
    public float _height;
    public float _width;
    Pen _pen = new Pen(Color.Black);
    PointF _ForwardPoint = new PointF(0, 0);
    float rotAng = 0.0f;

    public SwarmCir()
    {
        _pointX = 1.0f;
        _pointY = 1.0f;
        _height = 5.0f;
        _width = 5.0f;
        _ForwardPoint.X = 7.0f;
        _ForwardPoint.Y = 7.0f;
    }
    public SwarmCir(Point XY)
    {
        _pointX = XY.X;
        _pointY = XY.Y;
        _height = 5.0f;
        _width = 5.0f;
    }
    public SwarmCir( Point XY, float Height, float Width )
    {
        _pointX = XY.X;
        _pointY = XY.Y;
        _height = Height;
        _width = Width;
    }
    public void SetPen(Pen p)
    {
        _pen = p;
    }
    public void Draw(Graphics g)
    {
        g.DrawEllipse(_pen, _pointX, _pointY, _width, _height);
        g.DrawLine(_pen, new PointF(_pointX, _pointY), _ForwardPoint);
    }
    public void Rotate(PaintEventArgs e)
    {
        e.Graphics.TranslateTransform(_pointX, _pointY);
        e.Graphics.RotateTransform(rotAng);
        e.Graphics.TranslateTransform(-_pointX, -_pointY);
    }
    public PointF ForwardVec()
    {
        PointF temp = new PointF();
        temp.X = _pointX - _ForwardPoint.X;
        temp.Y = _pointY - _ForwardPoint.Y;
        return Normalize(temp);
    }
    public PointF Normalize(PointF p)
    {
        PointF temp = new PointF();
        if (p.X > p.Y)
        {
            temp.X = 1;
            temp.Y = p.Y / p.X;
        }
        else if (p.Y > p.X)
        {
            temp.Y = 1;
            temp.X = p.X / p.Y;
        }
        else
        {
            return new PointF(1, 1);
        }
        return temp;
    }
    public void MoveForward()
    {
        _pointX += ForwardVec().X;
        _pointY += ForwardVec().Y;
    }
    public void MoveBackwards()
    {
        _pointX -= ForwardVec().X;
        _pointY -= ForwardVec().Y;
    }
    public void TurnLeft()
    {
        rotAng += 10.0f;
    }
    public void TurnRight()
    {
        rotAng -= 10.0f;
    }
} 
```

目前，当运行一个实现这个类的程序时，实例化一个默认的 SwarmCir() 并调用底部的移动函数，我得到了非常奇怪的结果。本质上，我希望'W'沿着线指向的“前向矢量”移动圆圈。显然，“S”只是相反的。然后在转动时，我希望形状和线条能够正确转动。如果需要更多信息，请询问。努力打造完整的 AI 工作台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T07:35:04.437

由于您只画了一个圆和一条线，我将跳过 Rotate 方法中使用的转换。我还将在类中存储前向向量而不是前向点和 rotAngle。并使用 PointF 代替浮点 _pointX/_pointY 和半径而不是宽度/高度，因为它们对于圆来说是相等的。我还将这些字段设为私有，以避免来自课堂外的修改。

```
class SwarmCir
{
  private PointF _point;
  private PointF _forwardVector = new PointF(1, 0);
  private float _radius = 2.5f;
  private float _vectorLength = 5.0f;
  private Pen _pen = new Pen(Color.Black); 
```

然后，我会使用 _point 作为圆的中心点（在您的代码中，_pointX/_pointY 指的是圆顶部/左侧的点）。然后 draw 和 move 方法变为：

```
public void Draw(Graphics g)
{
  g.DrawEllipse(_pen, _point.X - _radius, _point.Y - _radius, 2 * _radius, 2 * _radius);
  g.DrawLine(_pen, _point,
      new PointF(_point.X + _forwardVector.X * _vectorLength,
                 _point.Y + _forwardVector.Y * _vectorLength));
}

public void MoveForward()
{
  _point.X += _forwardVector.X;
  _point.Y += _forwardVector.Y;
} 
```

顺便说一句，我经常为 PointF 定义一些扩展方法，以简化 PointF 和标量的加法和乘法。

```
static class PointFExtensions
{
  public static PointF Add(this PointF point, PointF other)
  {
    return new PointF(point.X + other.X, point.Y + other.Y);
  }

  public static PointF Add(this PointF point, float value)
  {
    return new PointF(point.X + value, point.Y + value);
  }

  public static PointF Multiply(this PointF point, PointF other)
  {
    return new PointF(point.X * other.X, point.Y * other.Y);
  }

  public static PointF Multiply(this PointF point, float value)
  {
    return new PointF(point.X * value, point.Y * value);
  }
} 
```

在我看来，这使得 draw 和 move 方法的代码更加优雅：

```
public void Draw(Graphics g)
{
  g.DrawEllipse(_pen, _point.X - _radius, _point.Y - _radius, 2 * _radius, 2 * _radius);
  g.DrawLine(_pen, _point, _point.Add(_forwardVector.Multiply(_vectorLength)));
}

public void MoveForward()
{
  _point = _point.Add(_forwardVector);
} 
```

好的，现在只剩下旋转了。首先将 Rotate 方法添加到 PointFExtensions：

```
public static PointF Rotate(this PointF point, double angle)
{
  angle *= Math.PI / 180.0; // Convert from degrees to radians
  return new PointF(
      Convert.ToSingle(point.X * Math.Cos(angle) - point.Y * Math.Sin(angle)),
      Convert.ToSingle(point.X * Math.Sin(angle) + point.Y * Math.Cos(angle)));
} 
```

然后 turn 方法变为：

```
public void TurnLeft()
{
  _forwardVector = _forwardVector.Rotate(10.0f);
} 
```

让我们希望能成功。我还没有编译和测试这段代码，所以可能有一些错别字......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:32:26.410

我快速查看了您的代码，`TurnLeft()`然后`TurnRight()`您更改了 field `rotAng`，这是您在课堂上其他地方不使用的字段。也许`ForwardVec()`应该使用它？`Math.Cos(rotAng)`也许将一些 x 坐标与y 坐标相乘`Math.Sin(rotAng)`？

这里只是猜测...

# python - 可以将 SQLAlchemy 配置为非阻塞吗？

> ID：10214042
> 
> 赞同：31
> 
> 时间：2012-04-18T16:45:24.393
> 
> 标签：python, database, asynchronous, sqlalchemy, nonblocking

我的印象是，通过 SQLAlchemy 调用数据库会阻塞并且不适合在同步代码以外的任何地方使用。我是正确的（我希望我不是！）还是有办法将其配置为非阻塞？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-18T19:00:02.150

您可以使用 gevent 以非阻塞方式使用[SQLA](http://www.gevent.org/)。这是一个使用 psycopg2 的示例，使用 psycopg2 的[协程支持](http://initd.org/psycopg/docs/advanced.html#support-to-coroutine-libraries)：

[https://bitbucket.org/zzzeek/green_sqla/](https://bitbucket.org/zzzeek/green_sqla/)

我也听说人们对[pymysql](https://github.com/petehunt/PyMySQL/)使用相同的想法。由于 pymysql 是纯 Python 并使用套接字库，gevent 将套接字库修补为异步。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T17:27:47.247

看看[Tornado](http://www.tornadoweb.org/)，因为他们有一些简洁的非阻塞库，尤其是 tornado.gen。

我们将它与[Momoko](https://github.com/FSX/momoko)一起使用，Momoko是 Tornado 的非阻塞 psycopg 包装器库。到目前为止一切都很好。也许唯一的缺点是您丢失了 SQLAlchemy 为您提供的所有模型对象内容。虽然性能是不真实的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-12T03:59:08.960

在 asyncio 的上下文中，如果没有 greenlet 的帮助，答案是否定的。

但是，可以在 asyncio 中仅使用 SQLAlchemy 的一部分。[请在GINO 项目](https://github.com/fantix/gino)中找到示例，其中我们仅使用没有引擎和完整执行上下文的 SQLAlchemy 核心在 asyncio 中制作简单的 ORM。

# asp.net-mvc-3 - Telerik 富文本编辑器中的 pdf 上传功能

> ID：10214049
> 
> 赞同：1
> 
> 时间：2012-04-18T16:45:49.417
> 
> 标签：asp.net-mvc-3, razor, telerik-mvc, rich-text-editor

我在我的项目中使用 ASP.NET MVC Telerik 编辑器，telerik 编辑器不支持 PDF 上传功能，它支持图像上传，有没有办法可以包含 PDF 上传功能或者有人尝试过这样做吗？

我的设置：

```
@(Html.Telerik().Editor().Name(clientId)
/*.Encode(false) weird. Settings "Encode(false)" doesn't work on category & product details page
Now we have to manually decode values*/
.Value(Model)
.Tools(tools => tools
.Custom(settings => settings.HtmlAttributes(new { @class = "t-html", onclick = "viewRichHtmlEditorSource" + random + "(event)", title="Edit HTML" })))
.FileBrowser(browser => browser.Browse("Browse", "ImageBrowser")
    .Thumbnail("Thumbnail", "ImageBrowser")
    .Upload("Upload", "ImageBrowser")
    .DeleteFile("DeleteFile", "ImageBrowser")
    .DeleteDirectory("DeleteDirectory", "ImageBrowser")
    .CreateDirectory("CreateDirectory", "ImageBrowser"))) 
```

如何在其中添加您建议的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T12:08:12.790

是的，它确实支持pdf，我将它用于pdf，它工作得很好。您需要注意的是文件的大小，您必须检查并确保它不超过 5MB

这是我正在使用的示例：

```
<div class="editor-field">
    @Html.TextBoxFor(model => model.NewFileName)
    @(Html.Telerik().Upload()
       .Name("attachment")
       .Multiple(false)
       .ClientEvents(events => events.OnSelect("onSelect"))
    )
</div> 
```

onSelect 脚本：

```
function onSelect(e) {
    if (e.files[0].size > 5000000) {
        alert('The file size is too large for upload');
        e.preventDefault();
        return false;
    }
    // Array with information about the uploaded files
    var files = e.files;
    var ext = $('#attachment').val().split('.').pop().toLowerCase();
    if ($.inArray(ext, ['pdf']) == -1) {
        alert('This type of file is restricted from being uploaded due to security reasons');
        e.preventDefault();
    } else {
        $("#NewFileName").val(files[0].name);
    }
    return false;
} 
```

控制器操作必须接收签名中的附件，如下所示：

```
public ActionResult EditFile(HttpPostedFileBase attachment) {
...
} 
```

# python - 如何在不出现 TypeError 的情况下将字符串相乘：不能将序列乘以“函数”类型的非整数？

> ID：10214050
> 
> 赞同：0
> 
> 时间：2012-04-18T16:45:49.930
> 
> 标签：python, string

我希望能够使用函数和 while 循环打印代表数字的符号

前任：

```
number = 250
# symbols 
C = 100
^ = 50 
```

应该打印

```
CC^ 
```

虽然打印一个函数可能有效，但尝试连接两个或多个打印函数会导致我出现类型错误：

```
TypeError: can't multiply sequence by non-int of type 'function' 
```

```
 number = 251;
def numeral_C(number_par):
  while number_par >=100:
    numeral_C = number_par / 100
    print "C"*numeral_C,
    number_par = number_par - numeral_C*100
  return ""
def numeral_UpArrow(number_par):
  while number_par >=50:
    numeral_upArrow = number_par / 50
    print "^"*numeral_UpArrow, #error
    number_par = number_par - numeral_UpArrow*50
  return ""
etruscan_C = str(numeral_C(number))
etruscan_UpArrow = str(numeral_UpArrow(number)) #error

print etruscan_C+etruscan_UpArrow

Traceback (most recent call last):
  File "/Applications/Wing IDE/WingIDE.app/Contents/MacOS/src/debug/tserver/_sandbox.py", line 15, in 
  File "/Applications/Wing IDE/WingIDE.app/Contents/MacOS/src/debug/tserver/_sandbox.py", line 11, in numeral_UpArrow

**TypeError: can't multiply sequence by non-int of type 'function' 
```

我想知道，有没有一种方法可以打印两个或多个函数而不会出现错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:51:47.753

您都在使用 & 分配给该函数内部的函数名称 numeric_UpArrow （这是一个函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:02:56.497

正如其他人所说，您在分配中重新使用已经与函数同名的东西时遇到问题：

```
def numeral_C(number_par):
   while number_par >=100:
      #this numeral_C is already a known function name, now youre reusing it as an int
      numeral_C = number_par / 100
      #you're using print inside a function, not a best practice, but.....
      print "C"*numeral_C,
      #uncomment the below line to see why the loop is unnecessary
      #print '%d = %d - %d' % (number_par - numeral_C*100, number_par, numeral_C*100)
      number_par = number_par - numeral_C*100
   return ""
   #you're printing, rather than returning, making this useless, and you're str()-ing the "" on return

number = 25101;
etruscan_C = str(numeral_C(number))
print

def numeral_c(number_par):
   num_c = number_par / 100
   return 'C'*num_c

print numeral_c(number) 
```

正如您在评论中看到的那样，对您的函数进行简单的重命名就可以解决这个问题，甚至可能对您的变量进行重命名。但是对于我认为“更大”的问题......

我觉得你原来的数学是一个不必要的循环。将您的 numeric_C 的行为与我的 numeric_c 进行比较：两者都产生相同的数字-C，但一个更可重用（通过将“C”作为字符串返回），而且它缺少循环和大量重新分配。

实际上，根据您对 number_par 的重新分配以减去最接近的 FLOORED 100 倍数，我找不到第二次循环发生的情况。换句话说，大部分逻辑都是无用的。您可以通过以下方式合理地完成整个功能：

```
'C'*int(number/100) 
```

# python - 如何遍历 HTML 文件中的特定元素并替换它们？

> ID：10214052
> 
> 赞同：0
> 
> 时间：2012-04-18T16:45:54.927
> 
> 标签：python, html

我需要在 Python 中做一件看似简单的事情，结果却非常复杂。我需要做的是：

1.  打开一个 HTML 文件。
2.  匹配特定 HTML 元素的所有实例，例如`table`.
3.  对于每个实例，将元素提取为字符串，将该字符串传递给将进行一些修改的外部命令，最后用从外部命令返回的新字符串替换原始元素。

我不能简单地做 a `re.sub()`，因为在每种情况下替换字符串都是不同的并且基于原始字符串。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:52:48.737

你可以使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)来做到这一点。

尽管对于您的需要，像[lxml.etree](http://lxml.de/tutorial.html)这样更简单的东西可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:54:03.690

听起来你想要[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)。您可能想要执行以下操作：

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(html_doc)

tables = soup.find_all( 'table' )
for table in tables:
    contents = str( table.contents )
    new_contents = transform( contents )
    table.replaceWith( new_contents ) 
```

或者，您可能正在寻找更接近[`soup.replace_with`](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#replace-with)

**编辑：**更新到最终解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:49:43.453

我发现通过 BeautifulSoup 或任何其他此类解析解析 HTML 变得复杂，因为您需要解析不同的页面，具有不同的结构，有时格式不正确，使用 javascript 操作等。在这种情况下，最好的解决方案是直接访问浏览器DOM 以及修改和查询节点。[您可以在像phanotomjs](http://phantomjs.org/)这样的无头浏览器中轻松做到这一点， 例如这里是一个 phantomjs 脚本

```
var page = require('webpage').create();

page.content = '<html><body><table><tr><td>1</td><td>2</td></tr></table></html>';
page.evaluate(function () {
    var elems = document.getElementsByTagName('td')
    for(var i=0;i<elems.length;i++){
        elems[i].innerHTML = '!'+elems[i].innerHTML+'!';
    }
});
console.log(page.content);
phantom.exit(); 
```

它改变了所有`td`的文本和输出是

```
<html><head></head><body><table><tbody><tr><td>!1!</td><td>!2!</td></tr></tbody></table></body></html> 
```

# javascript - 如何检测是否正在显示图像对象？

> ID：10214065
> 
> 赞同：0
> 
> 时间：2012-04-18T16:46:35.970
> 
> 标签：javascript, image, object, ready, loaded

当我在 DOM 中为大图像加载图像对象时，这将在 iPad 上冻结显示片刻。

出于测试目的，让 GIF 动画加载器旋转并将大图像添加到 DOM，当图像加载并添加到 DOM 时，您会注意到 GIF 动画将冻结直到图像显示。这种冻结足以禁用其上的 CSS3 动画效果。

有没有类似的东西

```
var image = new Image();
image.ready = function() { alert('the image is being displayed.') }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:09:38.317

您可以检查图像是否已像这样加载

```
var img = new Image();
img.onload = function() {
  alert('Done!');
}
img.src = '/images/myImage.jpg'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:59:08.923

对于在移动 Web 应用程序上预加载图像，我使用 html5-preloader 取得了成功。似乎这也可能对您有所帮助。

[HTML5-预加载器](http://code.google.com/p/html5-preloader/)

# php - 如何从php中检索文件名并将其放入JS

> ID：10214067
> 
> 赞同：0
> 
> 时间：2012-04-18T16:46:39.463
> 
> 标签：php, javascript, jquery, ajax

我在下面有一个 JavaScript 函数，它在文件上传完成后显示一条消息：

```
function stopVideoUpload(success) {
  var namevideofile = $('.fileVideo').val();
  var result = '';
  if (success == 1) {
    result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
    $('.listVideo').append(namevideofile + '<br/>');
  }
  else {
    result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
  }
  return true;
}​ 
```

以下是成功上传文件的另一个页面上的 php 脚本：

```
if( file_exists("VideoFiles/".$_FILES['fileVideo']['name'])) {
    $parts = explode(".",$_FILES['fileVideo']['name']);
    $ext = array_pop($parts);
    $base = implode(".",$parts);
    $n = 2;

    while( file_exists("ImageFiles/".$base."_".$n.".".$ext)) $n++;
    $_FILES['fileVideo']['name'] = $base."_".$n.".".$ext;

    move_uploaded_file($_FILES["fileVideo"]["tmp_name"],
    "VideoFiles/" . $_FILES["fileVideo"]["name"]);
    $result = 1;

}
    else
      {
      move_uploaded_file($_FILES["fileVideo"]["tmp_name"],
      "VideoFiles/" . $_FILES["fileVideo"]["name"]);
      $result = 1;

      }

?>

<script language="javascript" type="text/javascript">window.top.window.stopImageUpload(<?php echo $result;?>);</script> 
```

现在除了必须`var namevideofile`从文件输入值中检索值（.fileVideo 是文件输入的类），我想要它做的是当上传完成时，在服务器中给文件的名称将是 var namevideofile . 因此，如果我有 2 个称为 video.png 的文件，正如我在 php 代码中所述，如果文件存在，则在文件名末尾添加一个数字，以便在服务器中创建 video.png 和 video1.png。

因此，当我 append 时`namevideofile`，它应该在两个文件的上传完成后显示 video.png 和 video1.png 。, 的问题`var namevideofile = $('.fileVideo').val();`在于它将两个文件名都显示为 video.png 这是不正确的。

那么有谁知道如何更改`var namevideofile`，以便在上传后从服务器检索文件名？问题是 php 脚本与 JS 函数 (QandATable.php) 位于单独的页面 (videoupload.php) 上，因此此处是否需要涉及 ajax。

任何可以提供如何编码示例的人都会对我很有帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:52:44.010

您可以`echo`将值存储在 javaScript 变量中：

```
var namevideofile = <php echo $filename; ?>; 
```

# php - .htaccess 没有被怀疑

> ID：10214070
> 
> 赞同：1
> 
> 时间：2012-04-18T16:46:45.813
> 
> 标签：php, .htaccess, codeigniter, mod-rewrite

我在 Windows 7 机器上使用 CI 和 WAMP。在我的站点的应用程序文件夹中，我有一个`.htaccess`包含以下内容的文件：

```
RewriteEngine on
RewriteCond $1 !^(index\.php)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

这是复制和修改[CodeIgniter User Guide](http://codeigniter.com/user_guide/general/urls.html)。我确保 rewrite_module（以前不是 mod_rewrite 吗？）处于活动状态并重新启动了 WAMP。在我的控制器中，我有以下内容：

```
<?php

class Forum extends CI_Controller
{
public function index()
{
    $data['title'] = "Card Forums";
    $this->load->view('Header', $data);
    $this->load->model('forumdb');
    $data['sections'] = $this->forumdb->getSections();
    $this->load->view('Home', $data);
    $this->load->view('Footer');
}

public function site()
{
    $data['title'] = "Card Forums - Site";
    $this->load->view('Header', $data);
    $data['section'] = "Site";
    $this->load->view('Forum', $data);
    $this->load->view('Footer');
}
} 
```

当我去`localhost/forum`它时，它完全按照我的意愿去做。但是当我尝试去`localhost/forum/site`它时显示以下内容：

* * *

# 未找到

在此服务器上找不到请求的 URL /forum/site。

* * *

在`Forum`我看来：

```
<?php echo $section; ?> 
```

现在只应该显示变量，因为我想确保我首先访问该页面（周五才开始编写此站点）。当我尝试`localhost/forum/index.php/site`时，它给了我一个 404 错误。

我有一种感觉，我在这里遗漏了一些非常简单的东西，这让我很烦恼。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:55:01.833

这是一个更新的 .htaccess 文件

```
RewriteEngine on
RewriteCond $1 !^(index\.php|css)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

在您的 /forum/config 文件夹中找到 config.php 并更改此行

```
$config['index_page'] = 'index.php'; 
```

到

```
$config['index_page'] = ''; 
```

然后正如您提到的，您可以使用类似的功能`base_url('css/site.css');`

我通常对这种类型的 htaccess 文件做的一件事是为一个名为 public 的文件夹添加一个条目，所以在我的情况下它看起来像这样。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|public)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

然后我的所有资产都在公共文件夹中，我不需要继续向我的 htaccess 文件添加异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:10:53.557

对于 WAMP（以及我的 CI 项目的大多数其他环境），我最幸运的是在以下附加标志`.htaccess`：

```
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [NC,L,QSA] 
```

另外，检查您`uri_protocol`的`config.php`. 我很幸运将其设置为`PATH_INFO`而不是`AUTO`.

最后一件事要尝试：CI 有时会`base_url`在 WAMP 环境中检测到错误。要么定义你的`base_url`in `config.php`。

# wcf - 如何解锁 FileStream 锁？

> ID：10214071
> 
> 赞同：10
> 
> 时间：2012-04-18T16:46:50.987
> 
> 标签：wcf, wcf-binding, .net

我正在实现一个模块，以将文件从客户端机器分块上传到服务器。在服务器端，我使用的是 WCF Soap 服务。

为了分块上传文件，我已经从 Microsoft [http://msdn.microsoft.com/en-us/library/aa717050.aspx](http://msdn.microsoft.com/en-us/library/aa717050.aspx)实现了这个示例。我已经能够让它在一个简单的场景中工作，所以它确实以块的形式上传文件。此分块模块使用 WSDualHttpBinding。

我需要实现一个功能来重新上传文件，以防在上传特定文件时由于任何原因（用户选择、机器关闭等）停止上传过程。

在我的 WCF 服务中，我有一个方法可以在服务器端处理文件写入：

```
public void UploadFile(RemoteFileInfo request)
{
FileInfo fi = new FileInfo(Path.Combine(Utils.StorePath(), request.FileName));

if (!fi.Directory.Exists)
{
    fi.Directory.Create();
}

FileStream file = new FileStream(fi.FullName, FileMode.Create, FileAccess.Write);
int count;
byte[] buffer = new byte[4096];
while ((count = request.FileByteStream.Read(buffer, 0, buffer.Length)) > 0)
{
    file.Write(buffer, 0, count);
    file.Flush();
}
request.FileByteStream.Close();
file.Position = 0;
file.Close();

if (request.FileByteStream != null)
{
    request.FileByteStream.Close();
    request.FileByteStream.Dispose();
}
} 
```

当函数 request.FileByteStream.Read(buffer, 0, buffer.Length) 被消耗时，分块模块正在发送块。

初始化文件流后，文件被锁定（这是初始化文件流以进行写入时的正常行为），但我遇到的问题是我在执行发送/接收过程时停止了上传过程，然后是通道分块模块使用的没有取消，因此文件保持锁定，因为 WCF 服务仍在等待发送更多数据，直到发送超时到期（超时为 1 小时，因为我需要上传文件 +2.5GB）。在下一次上传时，如果我尝试上传相同的文件，我会在 WCF 服务中遇到异常，因为无法为相同的文件再次初始化文件流。

我想知道是否有办法避免/删除文件锁定，因此在下一次运行时，即使之前的文件流已经锁定了文件，我也可以重新上传同一个文件。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:07:53.137

我个人不喜欢这种解决方案。保持连接并不理想。

使用您的示例，您可能已经完成了 2.5GB 文件的一半，并且该过程可能会中止。您最终会遇到上述情况。更糟糕的是，您需要重新提交所有已经提交的数据。

我会自己处理块并将它们附加到同一个文件服务器端。调用指示文件正在启动的 WCF 方法，以块的形式上传数据，然后在上传完成时调用另一个方法。如果您确信文件名是唯一的，那么您甚至可以通过单个方法调用来完成此操作。

就像是：

```
ulong StartFile(string filename) // This returns the data already uploaded
void UploadFile(string filename, ulong start, byte[] data)
void EndFile(string filename) // Just as a safety net 
```

如果您不想走我上面概述的路线（它不会直接回答您的问题），则上述问题的一个简单解决方案是在上传时使用临时文件名，然后在上传完成。无论如何，您确实应该采用这种方法来防止服务器上的应用程序在上传完成之前获取文件。

# java - java中的Netbeans新窗口完全黑？

> ID：10214074
> 
> 赞同：1
> 
> 时间：2012-04-18T16:47:02.710
> 
> 标签：java, swing, netbeans

我正在尝试为游戏制作 GUI。首先，我在 jFrame 中加载欢迎屏幕。他们输入详细信息，如果详细信息正确，它应该加载另一个类中的下一个屏幕。它正确检查详细信息并打开新窗口但不显示它，它只是黑色？我不确定这是我的电脑还是我的代码？这是第二个窗口的代码：

```
import java.net.*;
import java.io.*;
import java.util.*;

public class ClientGUI extends javax.swing.JFrame {

/**
 * Creates new form ClientGUI
 */
private BufferedWriter writer;
public ClientGUI() {
     /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(ClientGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(ClientGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(ClientGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(ClientGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the form
     */
    setVisible(true);
    initComponents();
}

/**
 * This method is called from within the constructor to initialise the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">

    jButton1.setText("Move N");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });

    jButton2.setText("Move E");
    jButton2.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton2ActionPerformed(evt);
        }
    });

    jButton3.setText("Move S");
    jButton3.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton3ActionPerformed(evt);
        }
    });

    jButton4.setText("Move W");
    jButton4.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton4ActionPerformed(evt);
        }
    });

    jButton5.setText("Pickup");
    jButton5.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton5ActionPerformed(evt);
        }
    });

    jButton6.setText("Quit");
    jButton6.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton6ActionPerformed(evt);
        }
    });

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         

    try{
        writer.write("Move N");
        writer.newLine();
        writer.flush();
    }
    catch(Exception e){
            System.out.println("error");
    }

}                                        

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
   try{
        writer.write("Move E");
        writer.newLine();
        writer.flush();
    }
    catch(Exception e){
            System.out.println("error");
    }
}                                        

private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    try{
        writer.write("Move S");
        writer.newLine();
        writer.flush();
    }
    catch(Exception e){
            System.out.println("error");
    }
}                                        

private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    try{
        writer.write("Move W");
        writer.newLine();
        writer.flush();
    }
    catch(Exception e){
            System.out.println("error");
    }
}                                        

private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    try{
        writer.write("PICKUP");
        writer.newLine();
        writer.flush();
    }
    catch(Exception e){
            System.out.println("error");
    }
}                                        

private void jButton6ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    setVisible(false);
}                                        

/**
 * @param args the command line arguments
 */
public void run(){
try {
        final Socket server = new Socket("localhost", 30000);
    //Creates the socket to be used, has to be final because of innerclass
    InputStream in = server.getInputStream();
    OutputStream out = server.getOutputStream();
    //Creates the input and output streams

    BufferedReader stdin = new BufferedReader(new InputStreamReader(System.in));
    //Creates the reader to read what the client inputs
    final BufferedReader reader = new BufferedReader(new InputStreamReader(in));
    //Creates the reader to read what the server writes to the client, has to be final as used in innerclass
    writer = new BufferedWriter(new OutputStreamWriter(out));
    //Creates the writer so the client can write on the commandline

    Thread serverThread = new Thread(){
        //Modifies the Thread class
        public void run(){
        boolean quit = false;
        while (!quit){
            String line = "";
            try{
            line = reader.readLine();
            //Tries to read what the server has sent
            }
            catch(IOException e){
            System.out.println("Error" + e.getMessage());
            quit = true;
            //If it is unable to read what the server sent, it quits the loop
            }
            if (line != "null"){
                System.out.println(line);
            //So long as the line sent is not "null" it prints the line to the client
            }
        }
        }           
    };
    serverThread.start();
    //Starts the Thread

    String input = stdin.readLine();
    while (input != null) {
    writer.write(input);
    writer.newLine();
    writer.flush();
    input = stdin.readLine();
    //Reads what the client writes
    }
    System.exit(1);
    server.close();
} 
catch (IOException e) {
    System.out.println("error" + e.getMessage());
    e.printStackTrace();
    //Catches any errors with reading and writing to and from the server
}
} 
```

加上 netbeans 默认做的一些额外的摆动位。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:52:22.653

你的问题可能在这里：

```
setVisible(true);
initComponents(); 
```

你应该颠倒这个顺序：

```
initComponents();
setVisible(true); 
```

此外，您似乎正在做 Socket 工作。如果是这样，希望您注意在后台线程中执行此操作，而不是在主 Swing 事件线程 EDT 中。

# php - 使用 header('Location: ') 重定向到 UNC 路径

> ID：10214077
> 
> 赞同：1
> 
> 时间：2012-04-18T16:47:16.673
> 
> 标签：php, redirect, header, unc

我正在开发一个网站，可以从我们内部网中的几个远程位置以及整个 Internet 上查看该网站。由于远程位置的带宽限制，我们正在对某些文件类型（视频文件、flash 对象等）实施有条件的重写，这些文件将本地存储在每个物理位置的服务器上。但是，由于安全要求，我们无法在这些远程计算机上激活 Web 服务器，因此我们必须能够使用 Samba 共享重定向到 UNC 路径。

通过在中央 Apache 服务器上使用 mod_rewrite，我们有一个适合我们当前需求的工作解决方案，如下所示：

```
RewriteEngine on
RewriteCond %{REMOTE_ADDR} ^10\.
RewriteCond %{REQUEST_URI} \.(swf|mp3|wav|wmv|mov)$
RewriteRule ^(.*)/([^/]+)$ unc_redirect.php?server=myserver&path=sharename&file=$2 [R,L] 
```

然后我们的 php 脚本使用 header('Location: ') 重定向到所请求文件的 UNC 路径，如下所示：

```
<?php
$Str_Location='file://///'.$_GET["server"].'/'.$_GET["path"].'/'.$_GET["file"];
header('Location: '.urldecode($Str_Location), 1, NULL);
?> 
```

正如我所提到的，这个解决方案似乎可以很好地满足我们当前的需求。然而，它只适用于 Internet Explorer，并且只有当网站被 IE “信任”时（Firefox、Safari 和 Opera 的行为都略有不同，但没有一个会遵循 php 脚本的重定向）。现在这不是一个真正的问题，因为 IE 是 PC 上唯一可以触发重写条件的浏览器，但在我看来，可能有更好/更优雅的方式来实现相同（或更好）的结果.

关于重定向在 IE 中工作但没有其他浏览器的原因，我有自己的理论，但我基本上是这个领域的新手，所以我想我可能会问专家你的看法。

# powershell - 间隔路径、msbuild 和 psake

> ID：10214080
> 
> 赞同：1
> 
> 时间：2012-04-18T16:47:20.497
> 
> 标签：powershell, msbuild, psake

相关问题[在这里](https://stackoverflow.com/questions/2624459/how-to-suppress-quotes-in-powershell-commands-to-executables)。

这适用于编译 mvc3 应用程序。

```
task Compile 
{
    $config = $script:siteConfig.config

    exec { & "C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe" $webproject_path `
    /p:Configuration=$config /p:WebProjectOutputDir="$publish_dir" `
    /p:Outdir="$out_dir" /p:CleanWebProjectOutputDir=False `
    /T:_WPPCopyWebApplication /T:ResolveReferences /verbosity:quiet /nologo }
} 
```

所有这些路径变量都是脚本属性。但是，当在这些计算路径中引入空格时（例如，项目从 C:\Projects\ 移动到 C:\Users\ASDFG1\Documents\Visual Studio 2010\Projects）msbuild 认为有多个项目文件。这是有道理的，但我必须遗漏一些东西，将解析的变量放入引号中应该不难。

**尝试了变化**

```
exec { Invoke-Expression "& C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe '$webproject_path' /p:Configuration=$config /p:WebProjectOutputDir='$publish_dir' /p:Outdir='$out_dir' /p:CleanWebProjectOutputDir=False /T:_WPPCopyWebApplication /T:ResolveReferences /verbosity:quiet /nologo" }

exec { C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe "`"$webproject_path`"" `
/p:Configuration=$config /p:WebProjectOutputDir="`"$publish_dir`"" `
/p:Outdir="`"$out_dir`"" /p:CleanWebProjectOutputDir=False `
/T:_WPPCopyWebApplication /T:ResolveReferences /verbosity:quiet /nologo } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:50:28.473

使用`EchoArgs.exe`重现问题，我们看到引号没有按需要传递给可执行文件：

```
PS> $publish_dir = 'C:\Users\Documents\Visual Studio 2010\Projects'
PS> ./echoargs /p:WebProjectOutputDir="$publish_dir"
Arg 0 is </p:WebProjectOutputDir=C:\Users\Documents\Visual Studio 2010\Projects>

PS> ./echoargs /p:WebProjectOutputDir="`"$publish_dir`""
Arg 0 is </p:WebProjectOutputDir=C:\Users\Documents\Visual>
Arg 1 is <Studio>
Arg 2 is <2010\Projects> 
```

使用[此答案](https://stackoverflow.com/a/8468690/2495)中的反斜杠转义选项，我们可以保留变量扩展和封闭引号：

```
PS> ./echoargs /p:WebProjectOutputDir=\`"$publish_dir\`"
Arg 0 is </p:WebProjectOutputDir="C:\Users\Documents\Visual Studio 2010\Projects"> 
```

在这里，反引号告诉 PowerShell 将引号字符视为文字值，反斜杠告诉调用调用保留引号。

或者，我们可以通过预先评估完整参数来坚持单级转义，而不是内联`$publish_dir`变量：

```
PS> $publishArg = '/p:WebProjectOutputDir=\"{0}\"' -f $publish_dir
PS> ./echoargs $publishArg
Arg 0 is </p:WebProjectOutputDir="C:\Users\Documents\Visual Studio 2010\Projects"> 
```

# javascript - 如何在 jQuery Mobile 中绑定“mobileinit”事件？

> ID：10214083
> 
> 赞同：13
> 
> 时间：2012-04-18T16:47:26.080
> 
> 标签：javascript, jquery-mobile

这就是我试图挂钩 mobileinit 事件的方式：

```
$(document).bind("mobileinit", function() {
    console.log("Mobile init");
}); 
```

但这不适用于 Chrome（最新版本）、Ripple v0.9.1 和运行 OS7.0 的黑莓粗体 9790。

注意：我也尝试过使用`.on()`而不是，`.bind()`但没有运气。两个 jQuery 移动版本（1.0.1 和 1.1.0）都失败了。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-18T17:06:29.753

我用过这个，它*确实*有效。

是否有可能是其他东西破坏了脚本或 mobileinit 没有被解雇？

Chrome 会触发 mobileinit 吗？

我刚刚找到了一些我在 jQuery Mobile 1.0 中使用的代码，我们刚刚升级到 1.1.0 并且它可以工作。

您确保还包括常规 ol' jQuery，对吗？

[jQueryMobile 的文档可以做到这一点](http://jquerymobile.com/test/docs/api/globalconfig.html)，所以我确信它可以工作。肯定有其他问题。对不起，我帮不上什么忙。你有更多信息吗？或者尝试使用其他设备。

**[编辑]**在同一个自我页面上，它说“因为 mobileinit 事件会立即触发，所以您需要在加载 jQuery Mobile 之前绑定您的事件处理程序。按以下顺序链接到您的 JavaScript 文件：”

```
<script src="jquery.js"></script>
<script src="custom-scripting.js"></script> <!-- Note your script before jqm -->
<script src="jquery-mobile.js"></script> 
```

看起来脚本顺序很重要。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-22T21:49:50.763

这是另一个适用于我的简单示例（适用于 android 和 ios）

```
<script type="text/javascript" src="files/resources/lib/jquery/jquery-1.8.2.js"> </script>
<script type="text/javascript">
$(document).bind("mobileinit", function()
                 {
                 if (navigator.userAgent.toLowerCase().indexOf("android") != -1)
                 {
                 // your logic here
                 $.mobile.defaultPageTransition = 'none';
                 $.mobile.defaultDialogTransition = 'none';
                 }
                 if (navigator.userAgent.toLowerCase().indexOf("msie") != -1)
                 {
                 // your logic here
                 $.mobile.allowCrossDomainPages = true;
                 $.support.cors = true;
                 }
                 });
</script>
<script type="text/javascript" src="files/resources/lib/jquerymobile/1.3.2/jquery.mobile-1.3.2.js"></script> 
```

1.  包括主 jquery 文件
2.  在jquery mobile之前绑定mobileinit
3.  包含 jquery 移动 js 文件

# objective-c - 使用 Objective C 从 CSV 文件创建数组

> ID：10214084
> 
> 赞同：5
> 
> 时间：2012-04-18T16:47:35.503
> 
> 标签：objective-c, xcode

我是编码新手，所以如果这似乎是一个简单的问题，请原谅。

我正在尝试在地图上绘制坐标。

我想读取一个 CSV 文件并将信息传递给两个单独的数组。

第一个数组是 NSArray *towerInfo（包含纬度、经度和塔名）

第二个，NSArray *region（包含塔标题和区域），与第一个数组具有相同的计数索引。

本质上，我相信我需要；

1）将文件读入字符串.....

2) 将字符串分成一个临时数组，在每个/n/r处分隔......

3) 循环遍历 temp 数组并在每次将此信息附加到两个主存储数组之前创建一个 tower 和 region 对象。

这是正确的过程吗？如果是这样，是否有人可以发布一些示例代码，因为我真的很难做到这一点。

提前感谢大家。

克里斯。

我对此进行了编辑以显示我的代码示例。我遇到的问题是我收到警告说

1）“'dataStr'的局部声明隐藏了实例变量。2）“'array'的局部声明隐藏了实例变量。

我想我明白这些是什么意思，但我不知道如何绕过它。程序编译并运行，但日志告诉我“数组为空”。

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize dataStr;
@synthesize array;

-(IBAction)convert {
//calls the following program when the onscreen 'convert' button is pressed.

    NSString *dataStr = [NSString stringWithContentsOfFile:@"Towers.csv" encoding:NSUTF8StringEncoding error:nil];
    //specifies the csv file to read - stored in project root directory - and encodes specifies that the format of the file is NSUTF8\. Choses not to return an error message if the reading fails

    NSArray *array = [dataStr componentsSeparatedByString: @","];
    //splits the string into an array by identifying data separators.

    NSLog(@"array: %@", array);
    //prints the array to screen

} 
```

任何额外的帮助将不胜感激。感谢您到目前为止的回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T17:12:52.997

```
NSString* fileContents = [NSString stringWithContentsOfURL:filename ...];
NSArray* rows = [fileContents componentsSeparatedByString:@"\n"];
for (...
    NSString* row = [rows objectAtIndex:n];
    NSArray* columns = [row componentsSeparatedByString:@","];
... 
```

您可能需要进行一些“stringTrimmingCharactersInSet”调用来修剪空白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:03:24.180

关于您的警告：

您的代码会产生错误（不是警告），因为您需要在接口文件中声明您的属性，然后才能在实现中合成它们。您可能还记得`@synthesize`为您的属性生成访问器方法。另外，在使用`@synthesize`指令之前，您需要`@property`在界面中使用指令。这是一个例子：

```
@interface MyObject : NSObject {
    NSString *myString;
}
@property (assign) NSString *myString;
@end

@implementation MyObject
@synthesize myString;
  // funky code here
@end 
```

请注意，属性声明后跟一个类型（在这种情况下为赋值，这是默认设置）。Stephen G. Kochans 的书中对此有很好的解释：[Objective-C 2.0 中的编程](https://rads.stackoverflow.com/amzn/click/com/0321811909)

* * *

但是为了论证的缘故，假设您在`@interface`这里省略了正确的文件。如果您首先在 中声明一个属性`@interface`，然后在您的方法中声明另一个属性，使用相同的变量名，则方法变量将优先于实例变量。

在您的代码中，省略变量名的声明就足够了，如下所示：

```
dataStr = [NSString stringWithContentsOfFile:@"Towers.csv" encoding:NSUTF8StringEncoding error:nil];    
array = [dataStr componentsSeparatedByString: @","]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:45:47.893

我假设您问题的核心是“如何解析 CSV 文件”，而不是“解析后如何处理数据”。如果是这种情况，请查看[CHCSVParser](https://github.com/davedelong/CHCSVParser)库。我之前在项目中使用过它，发现它非常可靠。它可以为您将任意字符串或文件路径解析为行/列的 NSArray。之后，无论您如何处理数据，都取决于您自己。

# .net - 在 OData 服务中使用具有非 EF 类型的容器？

> ID：10214085
> 
> 赞同：2
> 
> 时间：2012-04-18T16:47:38.637
> 
> 标签：.net, entity-framework, odata

我们正在尝试使用 ReflectionProvider 向我们的 OData 服务添加一个字符串列表：

```
[DataServiceKey("ID")]
Public class Project
        public IEnumerable<Picture> Images { get; set; }
        // Picture is an EF entity and everything works
        public IEnumerable<string> Tags { get; set; }
        // Same situation here, only strings -- service fails to start!
} 
```

我们错过了什么吗？我们可以在 Entity Framework 中创建一个新实体以仅包含一个字符串属性，但这似乎对于仅存储一个字符串来说有点过头了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:11:31.440

原始值集合（例如字符串）是仅在 OData V3 和 WCF DS 中支持的功能，它在最近发布的 WCF DS 5.0（https://nuget.org/packages/Microsoft.Data.Services 或可安装的[http://blogs.msdn.com/b/astoriateam/archive/2012/04/09/wcf-data-services-5-0-rtm-release.aspx](http://blogs.msdn.com/b/astoriateam/archive/2012/04/09/wcf-data-services-5-0-rtm-release.aspx)）。

目前仅反射提供程序支持集合属性。EF 还不支持它们。（您不清楚您是否使用反射或EF，因为您提到了两者）。

# c++ - 如何解析通过管道收到的消息

> ID：10214094
> 
> 赞同：-3
> 
> 时间：2012-04-18T16:48:10.643
> 
> 标签：c++, winapi

我创建了我的管道服务器，它使用函数 ConnectNamedPipe 创建了一个管道实例。之后我从管道中读取数据并将数据保存到缓冲区中。我还没有创建我的客户，但我必须做一些操作。

我的客户必须向管道写入 2 件事： 1 - 服务器将执行的操作 - 减法、乘法、加法、除法（我正在尝试实现一种计算器） 2 - 服务器将计算的 2 个数字

我的服务器必须从管道中读取这些操作和 2 个数字并在屏幕上打印结果。

所以，我的问题是，我如何解析客户端编写的这两个操作？

我的服务器工作正常，但解析有问题。

```
#include <iostream>
#include <Windows.h>

using namespace std;

int main()
{
    HANDLE createPipe;
    BOOL Connect;
    BOOL Read;
    int buffer[100];
    DWORD numBytesRead;

    //Create Pipe
    createPipe = CreateNamedPipe(
        L"\\\\.\\pipe\\StackOverflow",
        PIPE_ACCESS_DUPLEX,
        PIPE_TYPE_MESSAGE,
        PIPE_UNLIMITED_INSTANCES,
        1024,
        1024,
        NMPWAIT_USE_DEFAULT_WAIT,
        NULL);

    //Check for failure
    if(createPipe == INVALID_HANDLE_VALUE){
        cout<<"Failed to create a pipe! "<<endl;
    }

    //Create instance of the pipe
    Connect = ConnectNamedPipe(
        createPipe,
        NULL);

    //Check for failure
    if(!(Connect)){
        cout<<"Failed to connect to the pipe"<<endl;
        CloseHandle(createPipe);
    }

    //Read bytes from the buffer
    Read = ReadFile(
            createPipe, 
            buffer,
            99 * sizeof(buffer),
            &numBytesRead,
            NULL);

    //check for failure
    if(!(Read)){
        cout<<"Failed to read from the pipe"<<endl;
        CloseHandle(createPipe);
    }

    return 0;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:58:09.763

您应该研究序列化 - 您应该如何对管道数据进行编码和解码。你有一个 Calculation 对象，它有两个 Operand 元素（数字）和一个 Operation（可能是枚举？） - 那么问题就变成了如何序列化（发送）和反序列化（接收器）该对象，而不依赖于管道 I/O。

查看 Boost.Serialization 的概念 - boost.org/doc/libs/1_49_0/libs/serialization/doc/index.html

# java - 在 Android 中使用 Timer 进行短信调度

> ID：10214100
> 
> 赞同：1
> 
> 时间：2012-04-18T16:48:42.117
> 
> 标签：java, android, timer, schedule

我是 Android 和 Java 的新手，我在 Android 中玩了一点 Timer。我的目的是安排发送短信。所以，我使用计时器来延迟发送短信的时间。一切正常，没有错误等等，但我的问题是，当我在android上执行我的应用程序时，计时器不会等待发送短信，所以它在按下“发送”按钮后直接发送，然后处理而无需等待（类似于无限循环的东西）。希望有人可以提供帮助：

```
public class SendMessageActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Button button = (Button) findViewById(R.id.send);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            button.setText("Hallo");

            final Timer mytimer = new Timer(true);

            final TimerTask mytask = new TimerTask() {
                public void run() {
                    SmsManager sms = SmsManager.getDefault();
                    sms.sendTextMessage(phone, "", "Hi Droide!",
                            null, null);
                }
            };

            mytimer.schedule(mytask, 1000L, 3000L);

            final Button button = (Button) findViewById(R.id.send);
            button.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    mytimer.cancel();
                }
            });

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:55:49.597

```
 mytimer.schedule(mytask, 1000L, 3000L); 
```

这意味着，第一次执行之前的延迟为 1 秒，后续执行之间的时间量为 3 秒。

如果要增加延迟使用，mytimer.schedule(mytask, 60000L, 180000L); //（1分钟，3分钟）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:52:24.237

你需要使用这个方法

```
public void schedule (TimerTask task, Date when) 
```

第二个参数定义发送消息的日期，我认为这是您代码中调用的错误方法。

# java - 对 Hashmap 中的对象值进行排序

> ID：10214104
> 
> 赞同：2
> 
> 时间：2012-04-18T16:48:59.683
> 
> 标签：java, sorting, hashmap

我想按对象的值对 Hashmap 进行排序。在这种情况下，按国家/地区代码。

```
 KEY              OBJECT                        
  String        LoyaltyCountry
                     - country name
                     - country code
                     - country loc 
```

我的代码如下：

```
public static HashMap<String, LoyaltyCountry> loyaltyCountrySortMap(HashMap<String, LoyaltyCountry> loyaltyCountryMap) {

            if (loyaltyCountryMap != null) {
                List keys = new ArrayList();
                keys.addAll(loyaltyCountryMap.keySet());
                Collections.sort(keys, new Comparator<LoyaltyCountry>() {
                    public int compare(LoyaltyCountry o1, LoyaltyCountry o2) {
                        return o1.getCountryName().compareTo(o2.getCountryName());
                    }
                });
            }

            return loyaltyCountryMap;
        } 
```

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T16:58:23.267

这是一个返回 Set 的方法，该 Set 包含按其值排序的 Map.Entry 项。

```
public static <K, V extends Comparable<? super V>> SortedSet<Map.Entry<K, V>> entriesSortedByValues(Map<K, V> map) {
    SortedSet<Map.Entry<K, V>> sortedEntries = new TreeSet<Map.Entry<K, V>>(
            new Comparator<Map.Entry<K, V>>() {
                @Override
                public int compare(Map.Entry<K, V> e1, Map.Entry<K, V> e2) {
                    return e1.getValue().compareTo(e2.getValue());
                }
            });
    sortedEntries.addAll(map.entrySet());
    return sortedEntries;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T16:53:04.523

创建 a `Comparator<Map.Entry<String,LoyaltyCountry>>`，获取`Map.entrySet()`，将其放入 a`List<Map.Entry<String,LoyaltyCountry>>`并对其进行排序。

澄清：你说你想`HashMap`按值排序——这不会发生。A`HashMap`是 a 的未排序实现`Map`。此外，`Map`所有排序的排序实现都在键上，所以即使 a`TreeMap`也无济于事。

最接近它的方法（没有制作自己的地图实现）是生成地图条目列表，这就是我在上面描述的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T16:58:58.163

你不能排序`HashMap`。

看起来您想返回按国家名称排序的地图值的有序列表。

对于将您的方法的返回类型更改为 List，例如

```
public static List<LoyaltyCountry> loyaltyCountrySortMap(
    HashMap<String, LoyaltyCountry> loyaltyCountryMap
  ) 
{

    if (loyaltyCountryMap != null) {
        List<LoyaltyCountry> values = new ArrayList();
        values.addAll(loyaltyCountryMap.values());
        Collections.sort(values, new Comparator<LoyaltyCountry>() {
            public int compare(LoyaltyCountry o1, LoyaltyCountry o2) {
                return o1.getCountryName().compareTo(o2.getCountryName());
            }
        });

        return values;
    }

    return null;
} 
```

# python - py2exe/py2app 和 docx 不能一起工作

> ID：10214105
> 
> 赞同：2
> 
> 时间：2012-04-18T16:49:00.310
> 
> 标签：python, py2exe, docx, py2app

在 Windows 7 上安装 docx：

D:\Program Files (x86)\Python27\Lib\site-packages 如下图：

![在此处输入图像描述](../Images/86e79ffaf0c776819b4af4dbbe964906.png)

在 OS X 上的 /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/docx-0.0.2-py2.7.egg-info 安装 docx，如下所示： ![在此处输入图像描述](../Images/9c0bce6971a3bc0e4ce7d3cd46cba31a.png)

以下是示例脚本（名为 docx_example.py），它在 python 解释器上运行得非常好：

```
#!/usr/bin/env python
'''
This file makes an docx (Office 2007) file from scratch, showing off most of python-docx's features.

If you need to make documents from scratch, use this file as a basis for your work.

Part of Python's docx module - http://github.com/mikemaccana/python-docx
See LICENSE for licensing information.
'''
from docx import *

if __name__ == '__main__':        
    # Default set of relationshipships - these are the minimum components of a document
    relationships = relationshiplist()

    # Make a new document tree - this is the main part of a Word document
    document = newdocument()

    # This xpath location is where most interesting content lives 
    docbody = document.xpath('/w:document/w:body', namespaces=nsprefixes)[0]

    # Append two headings and a paragraph
    docbody.append(heading('''Welcome to Python's docx module''',1)  )   
    docbody.append(heading('Make and edit docx in 200 lines of pure Python',2))
    docbody.append(paragraph('The module was created when I was looking for a Python support for MS Word .doc files on PyPI and Stackoverflow. Unfortunately, the only solutions I could find used:'))

    # Add a numbered list
    for point in ['''COM automation''','''.net or Java''','''Automating OpenOffice or MS Office''']:
        docbody.append(paragraph(point,style='ListNumber'))
    docbody.append(paragraph('''For those of us who prefer something simpler, I made docx.''')) 

    docbody.append(heading('Making documents',2))
    docbody.append(paragraph('''The docx module has the following features:'''))

    # Add some bullets
    for point in ['Paragraphs','Bullets','Numbered lists','Multiple levels of headings','Tables','Document Properties']:
        docbody.append(paragraph(point,style='ListBullet'))

    docbody.append(paragraph('Tables are just lists of lists, like this:'))
    # Append a table
    docbody.append(table([['A1','A2','A3'],['B1','B2','B3'],['C1','C2','C3']]))

    docbody.append(heading('Editing documents',2))
    docbody.append(paragraph('Thanks to the awesomeness of the lxml module, we can:'))
    for point in ['Search and replace','Extract plain text of document','Add and delete items anywhere within the document']:
        docbody.append(paragraph(point,style='ListBullet'))

    # Search and replace
    print 'Searching for something in a paragraph ...',
    if search(docbody, 'the awesomeness'): print 'found it!'
    else: print 'nope.'

    print 'Searching for something in a heading ...',
    if search(docbody, '200 lines'): print 'found it!'
    else: print 'nope.'

    print 'Replacing ...',
    docbody = replace(docbody,'the awesomeness','the goshdarned awesomeness') 
    print 'done.'

    # Add a pagebreak
    docbody.append(pagebreak(type='page', orient='portrait'))

    docbody.append(heading('Ideas? Questions? Want to contribute?',2))
    docbody.append(paragraph('''Email <python.docx@librelist.com>'''))

    # Create our properties, contenttypes, and other support files
    coreprops = coreproperties(title='Python docx demo',subject='A practical example of making docx from Python',creator='Mike MacCana',keywords=['python','Office Open XML','Word'])
    appprops = appproperties()
    contenttypes = contenttypes()
    websettings = websettings()
    wordrelationships = wordrelationships(relationships)

    # Save our document
    savedocx(document,coreprops,appprops,contenttypes,websettings,wordrelationships,'docx_example.docx') 
```

以下是用于创建独立（Mac OSX 中的 .app 和 Windows 7 中的 .exe）的安装脚本（名为 docx_setup.py）：

```
import sys,os

# Globals: START
main_script='docx_example'
dist_dir_main_path=os.path.abspath('./docx-bin')
compression_level=2
optimization_level=2
bundle_parameter=1
skip_archive_parameter=False
emulation_parameter=False
module_cross_reference_parameter=False
ascii_parameter=False
includes_list=['lxml.etree','lxml._elementpath','gzip']
# Globals: STOP

# Global Functions: START
def isDarwin():
    return sys.platform=='darwin'

def isLinux():
    return sys.platform=='linux2'

def isWindows():
    return os.name=='nt'
# Global Functions: STOP

if isDarwin():
    from setuptools import setup

    # Setup distribution directory: START
    dist_dir=os.path.abspath('%s/osx' %(dist_dir_main_path))
    if os.path.exists(dist_dir):
        os.system('rm -rf %s' %(dist_dir))
    os.system('mkdir -p %s' %(dist_dir))
    # Setup distribution directory: STOP

    APP = ['%s.py' %(main_script)]
    OPTIONS={'argv_emulation': False,
             'dist_dir': dist_dir,
             'includes': includes_list
            }
    print 'Creating standalone now...'
    setup(app=APP,options={'py2app': OPTIONS},setup_requires=['py2app'])
    os.system('rm -rf build')
    os.system('tar -C %s -czf %s/%s.tgz %s.app' %(dist_dir,dist_dir,main_script,main_script))
    os.system('rm -rf %s/%s.app' %(dist_dir,main_script))    
    print 'Re-distributable Standalone file(s) created at %s/%s.zip. Unzip and start using!!!' %(dist_dir,main_script)    

elif isWindows():
    from distutils.core import setup
    import py2exe

    # Setup distribution directory: START
    dist_dir=os.path.abspath('%s/win' %(dist_dir_main_path))
    if os.path.exists(dist_dir):
        os.system('rmdir /S /Q %s' %(dist_dir))
    os.system('mkdir %s' %(dist_dir))
    # Setup distribution directory: STOP

    OPTIONS={'compressed': compression_level,
             'optimize': optimization_level,
             'bundle_files': bundle_parameter,
             'dist_dir': dist_dir,
             'xref': module_cross_reference_parameter,
             'skip_archive': skip_archive_parameter,
             'ascii': ascii_parameter,
             'custom_boot_script': '',
             'includes': includes_list
            }
    print 'Creating standalone now...'
    setup(options = {'py2exe': OPTIONS},zipfile = None,windows=[{'script': '%s.py' %(main_script)}])
    print 'Re-distributable Standalone file(s) created in the following location: %s' %(dist_dir)
    os.system('rmdir /S /Q build') 
```

**现在真正的问题来了。**

以下是尝试使用使用命令 python docx_setup.py py2app 创建的 docx_example.app 后在 Mac OS X 控制台上发布的错误：

```
docx_example: Searching for something in a paragraph ... found it!
docx_example: Searching for something in a heading ... found it!
docx_example: Replacing ... done.
docx_example: Traceback (most recent call last):
docx_example:   File "/Users/admin/docx-bin/osx/docx_example.app/Contents/Resources/__boot__.py", line 64, in <module>
docx_example:     _run('docx_example.py')
docx_example:   File "/Users/admin/docx-bin/osx/docx_example.app/Contents/Resources/__boot__.py", line 36, in _run
docx_example:     execfile(path, globals(), globals())
docx_example:   File "/Users/admin/docx-bin/osx/docx_example.app/Contents/Resources/docx_example.py", line 75, in <module>
docx_example:     savedocx(document,coreprops,appprops,contenttypes,websettings,wordrelationships,'docx_example.docx')
docx_example:   File "docx.pyc", line 849, in savedocx
docx_example: AssertionError
docx_example: docx_example Error
docx_example Exited with code: 255 
```

以下是尝试使用使用命令 python docx_setup.py py2exe 创建的 docx_example.exe 后在 Windows 7 中的 docx_example.exe.log 文件中发布的错误：

```
Traceback (most recent call last):
  File "docx_example.py", line 75, in <module>
  File "docx.pyo", line 854, in savedocx
WindowsError: [Error 3] The system cannot find the path specified: 'D:\\docx_example\\docx_example.exe\\template' 
```

如您所见，OS X 和 Windows 7 在这里都指的是类似的东西。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-03T13:54:44.740

我找到了解决方案

在 api.py

从

```
_thisdir = os.path.split(__file__)[0] 
```

至

```
_thisdir = 'C:\Python27\Lib\site-packages\docx' 
```

或者无论你的 docx 文件是什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:20:04.240

发生的事情（至少对于 py2exe 而言）与[此问题](https://stackoverflow.com/questions/2747860/having-py2exe-include-my-data-files-like-include-package-data)类似。

关于 data_files 的文档在[这里](http://www.py2exe.org/index.cgi/data_files)。

你基本上要做的就是改变

```
setup(options = {'py2exe': OPTIONS},zipfile = None,windows=[{'script': '%s.py' %(main_script)}]) 
```

至

```
data_files = [
    ('template', 'D:/Program Files (x86)/Python27/Lib/site-packages/docx-template/*'), 
]

setup(
    options={'py2exe': OPTIONS},
    zipfile=None,
    windows=[{'script': '%s.py' %(main_script)}],
    data_files=data_files
) 
```

上面的模板文件的确切位置可能有误，因此您可能需要对其进行调整。

但是您可能需要包含其他几组数据文件。您可能希望使用`os.listdir`或`os.walk`类型的命令以编程方式检索它们。

如另一篇文章所述，您还必须更改

```
bundle_parameter=1 
```

至

```
bundle_parameter=2 
```

在文件的顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T00:54:40.983

与其更改一些库文件，我发现明确告诉 python-docx 在哪里查找模板更容易和更清晰，即：

```
document = Document('whatever/path/you/choose/to/some.docx') 
```

这有效地解决了 py2exe 和 docx 路径问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-17T10:41:14.927

您可以使用[这个](http://python-docx.readthedocs.org/en/latest/)基于`python-docx`. API 的优点是这个没有这个`savedoc`功能，所以你不会有任何其他`AssertionError`的。

对于该`WindowsError: [Error 3] The system cannot find the path specified: 'D:\\docx_example\\docx_example.exe\\template'`错误，您需要编辑`api.py`位于系统 Python 文件夹中的 docx egg 文件夹的文件（在我的计算机中`C:\Python27\Lib\site-packages\python_docx-0.3.0a5-py2.7.egg\docx`：）

改变这个：

```
_thisdir = os.path.split(__file__)[0]
_default_docx_path = os.path.join(_thisdir, 'templates', 'default.docx') 
```

对此：

```
thisdir = os.getcwd()
_default_docx_path = os.path.join(thisdir, 'templates', 'default.docx') 
```

第一个是获取实际运行的程序并将其添加到路径中以找到`templates`文件夹。
`C:\myfiles\myprogram.exe\templates\default.docx`

该解决方案仅采用路径，而不采用正在运行的程序。
`C:\myfiles\templates\default.docx`

希望能帮助到你！

# iphone - IOS - 如何在滚动元素时更新元素的界面？

> ID：10214106
> 
> 赞同：1
> 
> 时间：2012-04-18T16:49:07.353
> 
> 标签：iphone, ios, cocoa-touch, uiwebview

我有一个 UIWebView，其中有一个 div，其中有用户可以滚动的溢出。div 内内容的背景颜色会根据计时器而变化。

当我在 div 内滚动内容时，背景颜色不会改变，直到我松开手指。

有没有办法在我滚动时仍然允许 div 中的界面更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:52:25.440

没有。Apple 的 WebView 不允许您在滚动期间更改 UI。好吧，您可以更新它，但在视图完成减速之前它不会重绘。

这可能是为什么只发送一个 didScroll 事件的原因 - 当减速完成时。

# sql - 当您执行“SELECT *”时，SQL Server 如何确定列的顺序？

> ID：10214114
> 
> 赞同：16
> 
> 时间：2012-04-18T16:49:28.037
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2

当您执行 ? 时，SQL Server 如何确定列的顺序`SELECT *`？

我知道“排序依据”对于排序*数据*至关重要，但我希望*列名*是一致的。

注意：我的代码*不*依赖于返回列的实际顺序。我只想知道 SQL Server 如何决定对列名进行排序。

在我的团队使用的大约 20 台计算机中，其中一台表现不同。任何差异都值得研究。当我们打开 SQL Server Management Studio 时，所有计算机的列名排序似乎都是相同的。当我们的应用程序进行查询时，我看到了差异。

我正在使用 SQL Server 2008 和 SQL Server 2008 R2。我的应用程序使用 C# System.Data.SqlClient 来访问数据库。

编辑：我的问题原来是其中一台计算机被配置为以“sa”身份登录，而不是预期用户。当我们打算让它命中视图时，查询直接命中了表。感谢您帮助了解 sys.columns

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-18T16:53:23.927

`column_id`从系统视图来看，它们的顺序是`sys.columns`。

您可以通过以下方式检查：

```
SELECT column_id, name
FROM sys.columns
WHERE object_id = Object_id('MyTableName')
ORDER BY column_id 
```

**编辑**

这是给德姆斯的。您应该在更大的表上进行测试，但看起来它使用的是表中定义的顺序，而不是索引：

```
CREATE TABLE #T (cola int, colb int, colc int)

INSERT INTO #T
VALUES
(1,2,3),
(2,3,4),
(4,5,6)

SELECT * FROM #T

CREATE INDEX ix_test ON #T (colb, colc, cola)

SELECT * FROM #t
WHERE colb > 0

DROP TABLE #T 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T16:51:54.533

它们将与它们在 Sql Server Management Studio 中出现的顺序相同；本质上，它们的创建顺序。

确保所需列顺序的“正确”解决方案是在 SELECT 语句中明确指定字段。 `SELECT *`不保证输出列的顺序。

# jsf-2 - 为什么@FacesConverter(forClass=String.class) 不起作用

> ID：10214121
> 
> 赞同：1
> 
> 时间：2012-04-18T16:50:20.480
> 
> 标签：jsf-2

我在这里遵循了示例：[为什么 <h:inputText required="true"> 允许空格？](https://stackoverflow.com/questions/8326398/why-does-hinputtext-required-true-allow-blank-spaces)创建一个“全局”转换器来修剪所有输入字段。但是，提交输入字段时不会调用转换器。

```
@FacesConverter(forClass=String.class) 
... 
<p:inputText value="#{controller.inputValue}"/> 
```

但是当我改为：

```
@FacesConverter("StringTrimmer") 
... 
<p:inputText value="#{controller.inputValue}" converter="StringTrimmer"/> 
```

有用。

使用 Mojarra 2.1.7 和 PrimeFaces 3.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:08:12.890

`forClass`只有当属性的类型是指定类的实例时，才会调用带有 a 的转换器。在您的特定情况下，这只能意味着`#{controller.inputValue}`is**不是**type `String`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:49:22.877

如果您检查了绑定变量的类型是 String 并且转换器仍然没有被调用，您还可以检查以下内容：

*   如果输入组件封装在复合组件中，您可能会[遇到此问题](https://stackoverflow.com/q/4943490/840977)。在这种情况下，将无法正确调用转换器，从而导致永远无法访问您的自定义方法。在输入组件上显式调用转换器可以解决此问题。

*   如果将`value="someName"`和都添加`forClass="someClass"`到`@FacesConverter`注释中，则 forClass 属性将被忽略。这已[报告在这里](http://java.net/jira/browse/JAVASERVERFACES-1650)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:45:24.523

这不起作用，因为 inputValue 实际上不是字符串类型。一旦更改为 String 类型，它就起作用了。

# git - Msysgit GPG 错误

> ID：10214123
> 
> 赞同：4
> 
> 时间：2012-04-18T16:50:33.257
> 
> 标签：git

我在使用 msysgit 的 Windows 上收到以下错误。无论我是从命令提示符还是与 Git 捆绑的 BASH 执行此操作都没有关系：

> gpg: error loading `iconv.dll': 找不到指定的模块。

谷歌还没有产生任何好的结果。知道如何解决这个问题吗？我在与 gpg.exe 相同的 bin 文件夹中看到 libiconv2.dll。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:16:23.350

First, you should download the dll file "iconv.dll". The DLL is available as a ZIP file at the address [ftp://ftp.gnupg.org/gcrypt/binary/libiconv-1.9.1.dll.zip](ftp://ftp.gnupg.org/gcrypt/binary/libiconv-1.9.1.dll.zip). You should also get the corresponding ".sig" file and verify the integrity . This DLL has been built from the source package libiconv-1.9.1.tar.gz available at the same FTP sites. We distribute it separately for convenience and because GnuPG only requires this DLL and not the other files from the binary package. For copying conditions see the included file "COPYING.LIB".

To install this DLL, unzip it and copy the file "iconv.dll" to a directory where you usually keep DLLs. If you don't know such a directory, it is safe to copy it into the same directory as the "gpg.exe" file is stored.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-21T12:56:16.367

如果“bash 与 git 捆绑”意味着您正在使用 cygwin：

确保你已经安装了 cygwin gpg 并且它是`which gpg`.

您可以使用 cygwin 安装程序 (setup.exe/setup-x86.exe/setup-x86_64.exe) 安装 gpg。搜索“gnupg”。它将在 Utils 下。

# android - logcat中有很多关于接近传感器的错误消息

> ID：10214124
> 
> 赞同：1
> 
> 时间：2012-04-18T16:50:33.317
> 
> 标签：android, sensors, logcat, proximity

我的应用程序使用具有以下代码的接近传感器：

```
public class WakeLockHelper {
  static final String WAKE_LOCK_STR = "My.WakeLockHelper";
  static final int PROXIMITY_SCREEN_OFF_WAKE_LOCK = 32;

  private static WakeLock mScreenLock = null;

  private static WakeLock doWakeLock( final WakeLock inputWl, int flags, boolean lock ) {
    try {
      WakeLock wl = inputWl;
      if ( lock ) {
        if ( wl == null ) {
          PowerManager pm = (PowerManager) SJPhone.getContext().getSystemService( Context.POWER_SERVICE );
          wl = pm.newWakeLock( flags, WAKE_LOCK_STR );
          wl.setReferenceCounted( false );
          wl.acquire();
        }        
      }
      else {
        if ( wl != null ) {
          wl.release();
          if ( !wl.isHeld() ) {
            wl = null;
          }
        }
      }
      return wl;
    }
    catch ( Exception e ) {
      Log.e( e );
    }
    return null;
  }

  public static synchronized void screenLock( boolean lock ) {
    mScreenLock = doWakeLock( mScreenLock, PROXIMITY_SCREEN_OFF_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, lock );
  }
} 
```

一切正常，但仅在一台设备上，Lenovo Tablet K1 我在 logcat 中收到很多错误，如下所示：

```
04-17 15:11:34.450 E/Sensors (  162): proximity file handle not opened
04-17 15:11:34.450 E/Sensors (  162): proximity file handle not opened 
```

有谁知道这是什么以及如何避免？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:52:17.410

只需快速检查以确认。您的应用程序的“LOGTAG”是“传感器”吗？
如果不是，那么有问题的日志来自传感器 HAL。

```
04-17 15:11:34.450 E/Sensors (  162): proximity file handle not opened 
```

上面的日志似乎是来自传感器 HAL 的 LOGE()，
（通常开发人员用“传感器”LOGTAG 标记。）

只要您获得正确的接近事件，上述日志就可以安全地忽略。
开发人员很可能忘记从传感器 HAL 中清除调试日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T13:49:53.810

要删除这个烦人的日志 - 取消选中设置中明亮屏幕中的自动复选框。

# .net - 在 Visual Studio 2010 中使用实体框架创建的模型中未复制关系

> ID：10214127
> 
> 赞同：0
> 
> 时间：2012-04-18T16:50:54.847
> 
> 标签：.net, sql-server, entity-framework, edmx, database-first

我在使用实体框架时遇到问题

问题很简单，我在 sql server 2008 中有一个数据库。当我在 Visual Studio 2010 项目（使用 ADO.NET 实体数据模型）中导入用于创建 edmx 文件的表时，并非所有关系都在模型中复制，只是其中的一部分。我已经尝试删除重新创建模型，更新甚至在一个全新的项目中，同样的问题变成了......

例如：

这个实体被称为“simte_plandeestudio”

该表的创建脚本是：

```
CREATE TABLE [dbo].[simte_PlanDeEstudio](
    [Id] [uniqueidentifier] NOT NULL,
    [Estudiante] [uniqueidentifier] NULL,
    [Curso] [uniqueidentifier] NULL,
    [Duracion] [int] NOT NULL,
    [Meta] [int] NOT NULL,
    [Estado] [int] NOT NULL,
    [FechaFinalizacion] [datetime] NULL,
    [Tutor] [uniqueidentifier] NULL,
    [FechaInicio] [datetime] NOT NULL,
    [MotivoRetiro] [varchar](50) NULL,
    [FechaIngresoTaller] [datetime] NOT NULL,
    [FechaMatricula] [datetime] NOT NULL,
    [TiempoTranscurrido] [int] NOT NULL,
PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

SET ANSI_PADDING OFF
GO

**ALTER TABLE [dbo].[simte_PlanDeEstudio]  WITH CHECK ADD  CONSTRAINT [FK_simte_PlanDeEstudio_simte_Curso] FOREIGN KEY([Curso])
REFERENCES [dbo].[simte_Curso] ([Id])
GO
ALTER TABLE [dbo].[simte_PlanDeEstudio] CHECK CONSTRAINT [FK_simte_PlanDeEstudio_simte_Curso]
GO**

**ALTER TABLE [dbo].[simte_PlanDeEstudio]  WITH CHECK ADD  CONSTRAINT [FK_simte_PlanDeEstudio_simte_Estudiante] FOREIGN KEY([Estudiante])
REFERENCES [dbo].[simte_Estudiante] ([Id])
GO
ALTER TABLE [dbo].[simte_PlanDeEstudio] CHECK CONSTRAINT [FK_simte_PlanDeEstudio_simte_Estudiante]
GO**

ALTER TABLE [dbo].[simte_PlanDeEstudio]  WITH CHECK ADD  CONSTRAINT [FK_simte_PlanDeEstudio_simte_Usuario] FOREIGN KEY([Tutor])
REFERENCES [dbo].[simte_Usuario] ([Id])
GO

ALTER TABLE [dbo].[simte_PlanDeEstudio] CHECK CONSTRAINT [FK_simte_PlanDeEstudio_simte_Usuario]
GO

ALTER TABLE [dbo].[simte_PlanDeEstudio] ADD  CONSTRAINT [DF_simte_PlanDeEstudio_Id]  DEFAULT (newid()) FOR [Id]
GO 
```

前两个约束（**“simte_Curso”和“simte_Estudiante”**）在 sql management studio 图中可以看到，但没有传递给模型。

最后一个（**“simte_Usuario”**）在数据库图中并传递给模型。

“simte_curso”实体没有外键，“simte_usuario”只有一个与另一个表相关的外键

我希望它可以更清楚

“simte_curso”和“simte_Usuario”的创建脚本是：

```
**CREATE TABLE [dbo].[simte_Curso](
    [Id] [uniqueidentifier] NOT NULL,
    [Nombre] [varchar](50) NOT NULL,
    [Orden] [int] NOT NULL,
    [UltimoCurso] [bit] NULL,
PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]**

**CREATE TABLE [dbo].[simte_Usuario](
    [Id] [uniqueidentifier] NOT NULL,
    [UsuarioOrchard] [int] NOT NULL,
    [TipoDeUsuario] [varchar](10) NOT NULL,
    [Nombres] [varchar](50) NOT NULL,
    [Apellidos] [varchar](50) NOT NULL,
    [Documento] [varchar](50) NULL,
    [TelefonoMovil] [varchar](50) NULL,
    [FechaDeNacimento] [datetime] NULL,
    [CorreoElectronico] [varchar](50) NULL,
    [sexo] [bit] NULL,
PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
ALTER TABLE [dbo].[simte_Usuario]  WITH CHECK ADD  CONSTRAINT [FK_simte_Usuario_Orch_Orchard_Users_UserPartRecord] FOREIGN KEY([UsuarioOrchard])
REFERENCES [dbo].[Orch_Orchard_Users_UserPartRecord] ([Id])
GO
ALTER TABLE [dbo].[simte_Usuario] CHECK CONSTRAINT [FK_simte_Usuario_Orch_Orchard_Users_UserPartRecord]
GO** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:53:22.920

通常这表明数据库中没有设置外键约束。您能否确认关系实际上在数据库中，而不仅仅是表示外键的列名？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T22:53:39.540

如果您没有在相关表中设置主键，也可能会发生这种情况。我在 VS 2013 中针对 SQL Server 2008 R2 创建了一个实体框架版本 6 的 edm。关系是在数据库中设置的，但在 EDM 中没有显示几个表。一旦我将主键字段设置为 SQL Server 中的主键，EDM 就会正确更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-10T05:26:21.610

您可以在“模型浏览器”中添加新图表并添加关联，您必须单击鼠标右键并选择“添加到图表”。之后，表格和关系将显示在模型中。

# javascript - 调试导致重定向的 Javascript

> ID：10214133
> 
> 赞同：17
> 
> 时间：2012-04-18T16:51:44.067
> 
> 标签：javascript

我们有大量的 Javascript。在那里的某个地方，正在发生我们不希望的重定向。如何一般调试导致重定向的代码？堆栈跟踪将是完美的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-02T21:12:22.223

另一个人问了类似的问题。有人在 chrome 调试工具中提供了一个有用的选项，您可以尝试一下。请参阅下面的链接。

[在 Chrome 中的内联 javascript 重定向之前中断 javascript](https://stackoverflow.com/questions/12360187/break-javascript-before-an-inline-javascript-redirect-in-chrome#answer-12419326)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T16:54:48.283

没有简单的方法。你可以在你的文件中大量搜索一些词，比如“redirect”、“window.location”、“location”等。

# javascript - XMLHttpRequests 上是否有可用的 NavigationTiming 接口？

> ID：10214136
> 
> 赞同：7
> 
> 时间：2012-04-18T16:51:50.137
> 
> 标签：javascript, ajax, html, google-analytics, xmlhttprequest

该`window.performance`对象公开有关浏览器完成的最后页面加载的性能信息，包括 dns 查找时间等。但是，我还没有找到任何类似的 Ajax 调用。

我试图解决的更高层次的问题是能够使用谷歌分析来跟踪加载时间。您可以在 javascript 上设置自定义事件和跟踪时间，但目前无法获取查找时间和其他相关性能数据。也许有一种方法可以从`XMLHttpRequest`对象中获取这些信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T20:56:55.133

`window.performance.timing`-- 在 W3C [NavigationTiming](http://www.w3.org/TR/navigation-timing/)规范中定义，仅公开根文档页面加载的性能指标。

另一方面，W3C [ResourceTiming](http://www.w3.org/TR/resource-timing/)`img`规范公开了所有页面资源的性能信息，例如、`script`和`XMLHttpRequest`。ResourceTiming 在 IE10+ 中实现，目前在 Chrome 中具有前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T03:51:11.517

如果您需要与使用相同级别的信息，`window.performance`我认为***答案是否定的***。

在[w3.org 规范](http://www.w3.org/TR/XMLHttpRequest/)中，`XMLHttpRequest`您只能找到一个事件列表，使用它可以获得一些时间，但网络时间的详细信息不一样。

也许您可以寻找类似于[Firebug-NetPanel](http://getfirebug.com/wiki/index.php/Net_Panel_Architecture_Review)的东西，它使用*XPCOMInterface* [nsIHttpActivityObserver](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIHttpActivityObserver)

# mysql - 按 IN 子句对 MySQL 查询结果进行排序

> ID：10214139
> 
> 赞同：4
> 
> 时间：2012-04-18T16:51:51.720
> 
> 标签：mysql, sorting

我有一个这样的mysql

```
SELECT * FROM table WHERE id IN(3245,76,3466,998,12984,4466,931,50,728) 
```

有什么办法可以让查询的结果按照 ID 在 IN 子句中的顺序排序？

非常感谢

更新：[我刚刚在这里发现了这个问题，](https://stackoverflow.com/questions/2185029/sort-by-order-of-values-in-a-select-statement-in-clause-in-mysql) 尽管如此，我的 IN 子句确实包含多达 5000 个 id，那么使用“FIELD”会是最好的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T17:00:34.407

如果您不介意重复 id 序列，使用 ORDER BY FIELD 应该可以解决问题：

```
SELECT * FROM table WHERE id IN(3245,76,3466,998,12984,4466,931,50,728)
ORDER BY FIELD (id,3245,76,3466,998,12984,4466,931,50,728) 
```

正如@vyegorov 在评论中指出的那样，对于大量 id，您可能必须创建一个临时表来保存实际订单

```
CREATE TEMPORARY TABLE `temp_sort` (
    `id` INT NOT NULL ,
    `seq` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
    PRIMARY KEY ( `seq` ) ,
    UNIQUE ( `id` )
);

INSERT INTO temp_sort (id) VALUES (3245),(76),(3466);

SELECT * FROM table  
INNER JOIN temp_sort ON (temp_sort.id=table.id)
ORDER BY temp_sort.seq; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:10:26.810

由于您的 IN 子句中有多达 5000 个项目，因此您确实需要制作一个单独的表，其中包含您想要包含的 id 列表。在该表中放置一个订单列，然后按订单列进行内部连接和排序。这解决了这两个问题。

像这样：

```
SELECT table.*
FROM table
INNER JOIN tblIDs ON tblIDs.id = table.id
ORDER BY tblIDs.OrderValue 
```

您的新表 (tblIDs) 如下所示：

```
id     OrderValue
3245        1
76          2
3466        3 
```

通过对 id 列执行 INNER JOIN，您将确保仅显示原始表中具有您列出的 id 编号之一的行。OrderValue 列将允许您轻松有效地对查询进行排序，它还允许您轻松更改排序顺序，而无需拆分查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T16:54:32.537

除非您将这些 id 设置为属性。即使那样，它也会按顺序排列它们，而不是像你有它们那样乱序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T17:00:10.780

尝试这样做。

```
SELECT your_column_name * FROM table WHERE id IN(3245,76,3466,998,12984,4466,931,50,728)      
ORDER BY your_column_name 
```

# visual-studio - 使用 /clr 编译的 C++-CLI 库调试 C 可执行文件

> ID：10214144
> 
> 赞同：5
> 
> 时间：2012-04-18T16:52:04.583
> 
> 标签：visual-studio, visual-studio-2010, c++-cli

我正在使用 Visual Studio 2010 调试主要用 C 编写的应用程序。通常，我可以很好地附加调试器，但是当我链接到用 C++/CLI 编写的库时遇到了一些问题。

如果我用标志编译库`/clr`（我最终将不得不为此做尚未编写的库），那么我将失去调试整个 C 应用程序的所有能力，即使是与库调用无关的部分。我得到了一个带有黄色三角形和感叹号的空圆圈，应该是一个红色的断点圆圈。将鼠标悬停在它上面只会给我一个工具提示，上面写着“断点当前不会被命中。没有可执行代码与此行相关联。可能的原因包括：条件编译或编译器优化。”

*然后，如果我链接到没有*标志编译的完全相同的库`/clr`，我就可以再次调试我的应用程序。

我知道 Visual Studio 不太可能调试用 C++/CLI 编写的库，这没关系。我只想保留调试应用程序其余部分的能力，至少可以看到我调用外部库的结果。

另一个复杂的因素是这个项目不是由 Visual Studio 构建的。它是使用一个使用`cl`.

有谁知道为什么我目前不能按照我想要的方式调试库？关于我怎么做的任何建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T20:06:21.273

附加时必须选择调试器的*类型*。请注意对话框中的“附加到”标签。按 Select 按钮并勾选“Native”以获得对调试本机代码的支持。还需要在您的任何断点命中之前加载 DLL。如果您不确定是否已完成，请查看 Debug > Windows > Modules 调试器窗口以查看加载的 DLL。一旦调试器看到 DLL 加载并设置断点，断点指示器就会从空心变为实心红色。

否则支持调试 C++/CLI，您可以勾选“托管”和“本机”复选框。并在任何一种代码中设置断点。唯一不支持的是从托管代码到本机代码并返回的单步执行。需要模式开关来激活正确的调试引擎，这需要代码命中断点。

并考虑您本机项目中的调试选项，您可以指定一个 EXE 来启动。这样您就可以简单地按 F5 开始调试并跳过附加麻烦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T15:21:38.990

它也可能与**调试器类型**有关！（但这取决于我不太了解的具体建筑配置）

**如果您的任何项目符合公共语言运行时支持 (/clr)，您应该将启动项目中的调试器类型设置为“混合”，因为默认设置“自动”可能会失败！**

想象一下，你有两个项目：

1) 一个非 CLR C++ 项目，这是您的启动项目，它会生成一些 .exe 文件。

2) 生成 mylibrary.dll 的 C++ 项目，该项目使用公共语言运行时支持进行编译，因为它使用了一些托管代码。第一个项目中的 .exe 调用 mylibrary.dll。

如果您启动第一个项目并将调试器类型设置为其默认值“自动”，您将能够调试到第一个项目，但不能调试到第二个项目。调试器选择器没有意识到您将调用 CLR 库。

**所以将项目属性 -> 配置属性 -> 调试 -> 调试器类型设置为“混合”！**

# jquery - jquery循环插件，幻灯片速度

> ID：10214148
> 
> 赞同：-1
> 
> 时间：2012-04-18T16:52:14.440
> 
> 标签：jquery, slideshow, cycle

我有这个来自 JQuery Cycle 插件的 jQuery 幻灯片放映......

```
<script type="text/javascript">
$(window).on('load', function() {  
    var img_widths = [];
    var imgs = $(".pics").find("img");
    imgs.each(function() {
      img_widths.push($(this).width());
      $(this).attr("width", $(this).width());
    });
});
$('.pics').cycle('fade');
</script> 
```

它进行了一些调整，但我想知道是否有人知道如何让它更快或更慢？调整速度，我在插件的网站上看了它的教程，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T16:54:30.733

这需要 1 秒才能淡出，每隔 8 秒...

```
$(".pics").cycle({
    fx:'fade',
    speed:1000,
    timeout:8000
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:55:29.820

将您的代码更新为下面的代码，您必须将选项传递给循环命令：

```
<script type="text/javascript">
$(window).on('load', function() {  
    var img_widths = [];
    var imgs = $(".pics").find("img");
    imgs.each(function() {
      img_widths.push($(this).width());
      $(this).attr("width", $(this).width());
    });
});
$('.pics').cycle({
                    fx:     'fade',
                    speed:   1000
                 });
</script> 
```

您可以更新速度变量（**它使用 ms**），您可以使用其他几个选项，我喜欢使用[这个 jquery 循环选项参考](http://www.malsup.com/jquery/cycle/options.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T16:55:30.273

```
$('.pics').cycle({
    fx : 'fade',
    speed: 1000
}); 
```

只需调整速度数字。

# vb.net - 为什么点击后按钮背景开始闪烁？

> ID：10214149
> 
> 赞同：0
> 
> 时间：2012-04-18T16:52:15.643
> 
> 标签：vb.net, background

目前，当我单击我的 vb.net 表单上的一个按钮时，它具有与之关联的颜色（或图片），它会执行它应该执行的任何操作

但是之后，

它开始闪烁...？

是不是可以让点击后不闪烁？

编辑：这是按钮的 XAML

```
<Button Content="↑ Import" Height="57" HorizontalAlignment="Left" Margin="485,87,0,0" Name="ButtonImport" VerticalAlignment="Top" Width="126" Grid.Column="1" Background="Lime" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:50:01.637

如果将**Focus()**设置在按钮事件处理程序底部的**其他内容上，它将阻止按钮的背景闪烁。**

例如：

```
Private Sub ButtonRefresh_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles ButtonRefresh.Click
    refresh()  

    ListViewOrderDetail.Focus()
End Sub 
```

# java - 确保 java 方法是线程安全的

> ID：10214154
> 
> 赞同：0
> 
> 时间：2012-04-18T16:52:40.907
> 
> 标签：java, multithreading

只使用局部变量而不使用实例变量就足够了吗？因此仅使用堆栈上的内存（每个线程）。

但是当您创建一个新的 MyObject 方法时会发生什么。新对象不是在堆上创建的吗？它是线程安全的，因为对它的引用是本地的（线程安全的）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T16:54:56.453

它是线程安全的，因为如果它仅由该特定方法中的变量引用（如您所说，它是一个局部变量），那么其他线程不可能引用该对象，因此无法更改它。

想象一下你和我是海盗（线程）。你去把你的战利品（对象）埋在一个岛（堆）上，并为它保留一张地图（参考）。我碰巧用同一个岛来掩埋我的战利品，但除非你给我你的地图，或者我去全岛挖掘（这在爪哇岛上是不允许的），否则我不能乱动你的藏匿处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T16:56:08.133

您的 new`MyObject`是线程安全的，因为每次调用该方法都会在堆上创建自己的本地实例。没有一个调用引用通用方法；如果有 N 个调用，这意味着`MyObject`堆上有 N 个实例。当方法退出时，只要您不将其返回给调用者，每个实例都有资格进行 GC。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T16:56:38.320

好吧，让我问你一个问题：将你的方法限制为局部变量是否意味着你的方法不能与另一个线程共享资源？如果不是，那么显然这对于​​一般的线程安全来说是不够的。

如果您担心另一个线程是否可以修改您在另一个线程中创建的对象，那么您唯一需要担心的就是永远不要将对该对象的引用泄漏到线程之外。如果你实现了这一点，你的对象将在堆中，但没有其他线程能够引用它，所以没关系。

## 编辑

关于我的第一个陈述，这是一个没有实例变量的方法：

```
public void methodA() {
    File f = new File("/tmp/file");
    //...
} 
```

这并不意味着两个线程之间不能有共享资源:-)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T17:01:31.170

其他线程无法访问此类对象引用。但是，如果该对象不是线程安全的，那么整个线程安全性就会受到影响。

例如，考虑 MyObject 是一个 HashMap。

如果它在堆中，它不是线程安全的，这个论点是无效的。堆不能通过指针算术访问，因此它不会影响对象的实际存储位置（除了 ThreadLocal 的）。

# c# - 可以返回数据行中列的值并自动处理列值为空的可能性的单一方法

> ID：10214155
> 
> 赞同：4
> 
> 时间：2012-04-18T16:52:42.023
> 
> 标签：c#, generics

任何人都可以建议一种可以返回数据行中列的值并自动处理列值为空的可能性的方法。本质上，我试图提出一个通用的解决方案，利用 DataRow 扩展方法来处理 DBNull 值。到目前为止，我的解决方案是：

```
public static Nullable<T> SafeRead<T>(DataRow row, string fieldName) where T : struct
{
    if (row.HasColumn(fieldName))
    {
        return row.Field<Nullable<T>>(fieldName) ?? default(Nullable<T>);
    }
    else
        return default(Nullable<T>);
}

public static T SafeRead<T>(DataRow row, string fieldName) where T : class
{
    if (row.HasColumn(fieldName))
    {
        return row.Field<T>(fieldName) ?? default(T);
    }
    else
        return default(T);
} 
```

但这显然抱怨方法歧义，因为 C# 不允许基于参数约束的方法重载

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:00:48.993

以下将为您提供从数据行返回的值，如果值为 DBNull.Value，则为该类型的默认值。如果未定义该字段，则会抛出 ArgumentException。

```
using System;
using System.Data;

public static class DataAccess
{
    public static T GetValueOrDefault<T>(DataRow row, string fieldName)
    {
        if (!row.Table.Columns.Contains(fieldName))
        {
            throw new ArgumentException(
                string.Format("The given DataRow does not contain a field with the name \"{0}\".", fieldName));
        }
        else if (row[fieldName].Equals(DBNull.Value))
        {
            return default(T);
        }

        return row.Field<T>(fieldName);
    }
} 
```

这里有一些简单的测试：

```
[TestMethod]
public void GetValueOrDefault_ValueType_Test()
{
    const string FieldName = "Column";
    const int Expected = 5;

    DataTable dataTable = new DataTable();
    dataTable.Columns.Add(FieldName, typeof(int));

    DataRow row = dataTable.Rows.Add(Expected);

    int actual = DataAccess.GetValueOrDefault<int>(row, FieldName);
    Assert.AreEqual(Expected, actual);
}

[TestMethod]
public void GetValueOrDefault_ValueType_DBNull_Test()
{
    const string FieldName = "Column";

    DataTable dataTable = new DataTable();
    dataTable.Columns.Add(FieldName, typeof(int));

    DataRow row = dataTable.Rows.Add(DBNull.Value);

    int actual = DataAccess.GetValueOrDefault<int>(row, FieldName);
    Assert.AreEqual(default(int), actual);
}

[TestMethod]
public void GetValueOrDefault_ReferenceType_Test()
{
    const string FieldName = "Column";
    object expected = new object();

    DataTable dataTable = new DataTable();
    dataTable.Columns.Add(FieldName, typeof(object));

    DataRow row = dataTable.Rows.Add(expected);

    object actual = DataAccess.GetValueOrDefault<object>(row, FieldName);
    Assert.AreEqual(expected, actual);
}

[TestMethod]
public void GetValueOrDefault_ReferenceType_DBNull_Test()
{
    const string FieldName = "Column";

    DataTable dataTable = new DataTable();
    dataTable.Columns.Add(FieldName, typeof(object));

    DataRow row = dataTable.Rows.Add(DBNull.Value);

    object actual = DataAccess.GetValueOrDefault<object>(row, FieldName);
    Assert.AreEqual(default(object), actual);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:06:24.697

您总是可以自己实现 Nullable 的混蛋实现 - 并从您的函数中返回它。

```
public class SafeValue<T>
{
    public T Value {get; set;}
    public bool HasValue
    {
        get
        {
            if(typeof(T).IsClass)
                return Value != null;
            else return true;
        }
    }
} 
```

因此，将两者都替换为：

```
public static SafeValue<T> SafeRead<T>(DataRow row, string fieldName)
{
    if (row.HasColumn(fieldName))
    {
        return new SafeValue<T>{ Value = row.Field<T>(fieldName)};
    }
    else
        return new SafeValue<T>();
} 
```

和用法：

```
var val = SafeRead(row, "wah");

if(val.HasValue)
    //DoStuff(); 
```

# codeigniter - Codeigniter CSS img 类

> ID：10214161
> 
> 赞同：-1
> 
> 时间：2012-04-18T16:53:11.587
> 
> 标签：codeigniter, css-float

我正在尝试将文本环绕在图像周围，并且我在我的样式表上使用了一个 img 类来做到这一点。它正在正确加载样式表，并且所有其他样式属性都正常工作，但图像除外。没有codeigniter它可以正常工作，但由于某种原因，如果我在codeigniter中将类标签添加到图像中，图像不会显示。

代码如下：

**//CSS//**

```
.imgWrap {    
  margin: 8;
  float: left;
} 
```

**//html//**

```
<img src="<?php echo base_url{'../images/image_1.jpg'); ?>" 
alt ="landmark" class="imgWrap" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:01:01.393

首先，`base_url()`，不是`base_url{)`。

其次，边距（以及 CSS 中的大多数其他内容）需要单位。如果您愿意，可以使用像素 (px)、点 (pt)、picas (pc) 甚至英寸 (in)。看看[http://www.w3schools.com/cssref/css_units.asp](http://www.w3schools.com/cssref/css_units.asp)

第三，对于一个好的图像包装，你会希望它绝对定位（可能是相对的，取决于你在做什么），给它一个`display: block;`并可能明确定义宽度和高度。

# facebook - facebook登录/密码验证后，我得到一个对话框说“安装/取消”而不是“允许/不允许”应用程序权限。？

> ID：10214162
> 
> 赞同：0
> 
> 时间：2012-04-18T16:53:14.223
> 
> 标签：facebook, android-emulator

在按照 Android 应用程序的 Facebook-sdk 说明进行操作后，我得到一个对话框，说安装/取消而不是允许/不允许。我尝试更改 App id 并使用其他用户的凭据进行日志记录。但我仍然得到一个错误：

更新：我尝试更改应用程序设置develope.facebook.com->Application->Advanced->disabled Enhanced auth dialog。仍然没有解决方案。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:21:53.800

文本因各种原因而改变；例如，无论用户是否是第一次使用该应用程序 - 这是预期的，大约有 5 或 6 个可能的按钮文本组合 - 我认为安装/取消是新安装时看到的

# linq - 如何使用 DbContext 使用 linq to EF 删除多行数据

> ID：10214173
> 
> 赞同：4
> 
> 时间：2012-04-18T16:53:54.970
> 
> 标签：linq, entity-framework

在一个项目中，我有一个包含以下列的数据库表

![在此处输入图像描述](../Images/fc2c03a2f5899a5d885253f171a0c58a.png)

我希望能够从此表中删除所有具有匹配的 SharingAgencyId 和 ReceivingAgencyId 值的行，我可以传入这些值。

到目前为止我已经尝试过：

```
 public static ICollection<SecurityDataShare> UpdateSharedEntites(long conAgency, long recAgency)
        {
            ICollection<SecurityDataShare> agShares = null;
            try
            {
                using (var context = new ProjSecurityEntities(string.Empty))
                {
                    agShares = (from a in context.SecurityDataShares
                               .Where(c => c.ReceivingAgencyId == recAgency && c.SharingAgencyId == conAgency)
                                select a); 
                }
            }
            catch (Exception ex)
            {
                //ToDo
                throw;
            }
        } 
```

我的想法是检索 id 与传入的参数匹配的记录，然后使用 foreach 循环遍历 (agShare) 并删除每一行，然后保存我的更改。使用当前的实现，我似乎无法访问任何 Delete 方法。

查看上面的示例，我将不胜感激有关如何使用 dbContext 删除表中包含值 43 和 39 的行的任何建议。

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T16:56:00.193

如果我理解正确，您`DbContext`的属性 like`SecurityDataShares`应该输入为`IDbSet<SecurityDataShare>`. 如果那是正确的，你应该可以使用[这个`Remove`方法](http://msdn.microsoft.com/en-us/library/gg696334%28v=vs.103%29.aspx)。

```
foreach(var agShare in agShares) {
    context.SecurityDataShares.Remove(agShare);
}
context.SaveChanges(); 
```

请注意，这会创建一个单独的 SQL 语句来删除这些对象。如果您希望对象的数量相当大，您可能希望使用存储过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:05:43.700

实体框架并不容易运行单个命令来删除多行（我知道）。[我的偏好是使用原生 sql 和 sorts 的 dbcontext](https://stackoverflow.com/a/8778378/209259)直接为多实体更新/删除运行 SQL 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-04T12:19:18.963

您还可以将数据表传递给存储过程，数据库包含您类型的动态类型表，并将该表用于存储过程以从数据库表中删除匹配的行。

# amazon-ec2 - 如何在同一实例上更改 AMI

> ID：10214174
> 
> 赞同：27
> 
> 时间：2012-04-18T16:54:03.370
> 
> 标签：amazon-ec2

我在 AWS EC2 中启动了一个免费的微型实例，我想将实例的操作系统更改为 Cent 操作系统。我将如何更改实例的 AMI <- (OS Image)？

**编辑（已解决）：**

终止现有实例并启动一个新实例。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-02-03T20:19:58.193

您无法`AMI`在 AWS 中的现有实例上更新。这样做的唯一方法是**终止当前实例****并**使用所需的`AMI`

**背景**

`AMI`是一种特殊类型的虚拟设备，用于在 Amazon Elastic Compute Cloud（“EC2”）中实例化（创建）虚拟机，我总是将其称为`.iso`映像文件。

现在我可以使用`.iso`特定操作系统的映像文件（例如 Ubuntu）将其安装在我选择的分区上，如果我想更改该分区上的操作系统，那么我唯一的办法就是格式化该分区并安装新操作系统从它的`.iso`图像文件。

# c# - 试图引发事件c#

> ID：10214177
> 
> 赞同：5
> 
> 时间：2012-04-18T16:54:15.353
> 
> 标签：c#, events, event-handling

我一直在研究有关此的许多其他答案和示例，但我对如何设置它越来越感到困惑。我需要根据表单类中 performMove 方法的结果在 Robot 类中引发一个事件。我知道我不能从另一个班级提出这个事件，所以我所拥有的显然是行不通的。但我真的不知道如何正确设置它。我已经阅读了关于 codeProject、dreamInCode 以及在这个网站上的代表和活动文章，等等。这是针对初学者的 c# 课程，我对此很陌生，因为我相信每个人都能说出来:)

```
namespace Assignment12
{
    public delegate void ErrorHandler();

public partial class frmRobot : Form
{
    Robot moveRobot = new Robot();

    public frmRobot()
    {
        InitializeComponent();
        reset_Position();
        current_Position_Display();
        moveRobot.outOfRange += new ErrorHandler(moveRobot.coor_Within_Range);
    }
    ...

    private void performMove()
    {
        Point loc = lblArrow.Location;
        int x = moveRobot.Move_Robot_XAxis(loc.X);
        int y = moveRobot.Move_Robot_YAxis(loc.Y);
        if (x < -100 && x > 100)
        {
            moveRobot.outOfRange();
            x = loc.X;
        }
        if (y < -100 && y > 100)
        {
            moveRobot.outOfRange();
            y = loc.Y;
        }
        this.lblArrow.Location = new Point(x, y);
        current_Position_Display();
    }

class Robot
{

    public event ErrorHandler outOfRange;
    ...
    public void coor_Within_Range()
    {
        System.Console.WriteLine("TestOK");

    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T17:06:18.917

这个问题相当令人困惑。

您应该向自己提出的问题是：**谁负责宣布和执行政策**？您有两个实体：“表单”和“机器人”。您对机器人的法律地位有一些政策。哪个班级负责制定该政策？*机器人*是否知道它何时超出范围，并告知该事实的形式？或者*表单*是否知道机器人何时超出范围，并告知*机器人*这一事实？

*希望被告知*的是事件*监听*器。*希望通知其他人违反策略*的东西是事件*源*。完全不清楚您想成为其中的哪一件，以及您想成为哪一件。但是您违反的规则很明确： **事件侦听器不是在事件发生时被允许说的东西**。*听*音乐会的人不会站起来向钢琴家大喊要按什么键的指示！那是钢琴家的决定，听者只需决定是否听，以及如何反应。

如果表单决定机器人何时超出范围，则*机器人*需要成为侦听器。如果机器人决定表单何时超出范围，则*表单*需要成为侦听器。现在，您已经获得了作为侦听器的*表单*，但它试图告诉*机器人*何时超出范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:02:16.213

你似乎不需要一个事件。现在这只是一种复杂的调用方式`moveRobot.coor_Within_Range()`。去掉中间人：

```
 if (x < -100 && x > 100)
    {
        moveRobot.coor_Within_Range();
        x = loc.X;
    } 
```

尽管 Within_Range 和 outOfRange 奇怪地是相反的名称。

您需要一个事件来通知表单有关机器人中发生的事情。我在这里发布了一个关于如何做到这一点的[答案。](https://stackoverflow.com/a/2448530/60761)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:01:01.447

您`coor_Within_Range`需要提出的事件：

```
public void coor_Within_Range()
{
    System.Console.WriteLine("TestOK");
    if (this.outOfRange != null) {
        this.outOfRange();
    }
} 
```

然后在您的`Form`班级中，您需要处理该事件：

```
public frmRobot()
{
    // snipped
    moveRobot.outOfRange += new ErrorHandler(this.oncoor_Within_Range);
}

public void oncoor_Within_Range() {
    Console.WriteLine("robot within range");
} 
```

# jquery - 在 Jquery 选择器中，如果我想提供一个包含运行时生成的 elementId 的变量怎么办

> ID：10214182
> 
> 赞同：0
> 
> 时间：2012-04-18T16:54:36.547
> 
> 标签：jquery, jquery-selectors

我有以下代码片段：

```
 $(document).ready( function() {
        $("#input1").contextMenu({
        menu: 'myMenu'
        },
         function(action, el, pos) {
          alert("clicked");
    }); 
```

上面的代码不起作用，因为 input1 是一个包含在运行时生成的 elementId 的变量。

假设 input1 生成如下：

var input1 = "输入"+j; 其中 j 是一个值为 0 的变量

请指导我如何在 jQuery 选择器中使用变量 input1 作为 elementId。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:56:18.837

使用字符串连接形成选择器：

```
$(document).ready( function() {
    $("#" + input1).contextMenu({
    menu: 'myMenu'
    },
     function(action, el, pos) {
      alert("clicked");
}); 
```

显然，这假设变量`input1`存在并且在执行该代码时具有所需的值。

# c# - 从 ProgID 获取 dll 目录

> ID：10214183
> 
> 赞同：2
> 
> 时间：2012-04-18T16:54:39.780
> 
> 标签：c#, dll

我正在使用

```
Type progID =  Type.GetTypeFromProgID(SimpleConfiguration.currentConfiguration.OPOSWrappedSO); 
```

我还想将此 dll 的路径添加到 PATH 环境变量中。有没有办法从类型中获取目录？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T11:59:51.393

```
 public static string GetDLLPathFromClassID(string classID)
    {
        var regPath = @"\CLSID\" + classID + @"\InProcServer32\";
        return  GetDefaultRegistryValue(Registry.ClassesRoot, regPath);
    }

    public static string GetClassIDFromProgID(string progID)
    {
            var regPath =   progID + @"\CLSID\";
            return  GetDefaultRegistryValue(Registry.ClassesRoot, regPath);
    }

    private static string GetDefaultRegistryValue(RegistryKey rootKey, string regPath)
    {
        try
        {
            var regPermission = new RegistryPermission(RegistryPermissionAccess.Read,
                                                       @"HKEY_CLASSES_ROOT\" + regPath);
            regPermission.Demand();
            using (var regKey = rootKey.OpenSubKey(regPath))
            {
                if (regKey != null)
                {
                    string defaultValue = (string) regKey.GetValue("");
                    {
                        return defaultValue;
                    }
                }
            }
        }catch(Exception e)
        {
           //log error
        }
        return "";
    }

    public static string GetDLLDirectoryFromProgID(string progID)
    {
        var classID = GetClassIDFromProgID(progID);
        var fileName = GetDLLPathFromClassID(classID);
        if(string.IsNullOrEmpty(fileName))
        {
            return "";
        }
        return Path.GetDirectoryName(fileName);
    } 
```

# javascript - onkeypress 文本框问题

> ID：10214193
> 
> 赞同：-3
> 
> 时间：2012-04-18T16:55:28.807
> 
> 标签：javascript, jquery

我有这个：

```
<input type="text" ID="txtMy" name="txtMy" onkeypress="initialize();"/> 
```

在我的 .js 文件中，我有：

```
initialize()
{
    var x = $("#txtMy").val();
} 
```

但是，如果我的文本框中有 '2'，然后我输入 4，x 的值仍然是 2。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:58:51.167

您在 onkeypress 中的 initialize 拼写与声明 ( ) 不匹配`inititalize`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T16:59:49.337

采用`keyup`

以下是您如何以[不显眼的方式](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)做到这一点。

**HTML**

```
<input type="text" id="txtMy" /> 
```

**脚本**

```
$(function(){
  $("#txtMy").keyup(function (event) {
    alert($(this).val())
  });
}); 
```

工作示例：http: [//jsfiddle.net/VmELF/4/](http://jsfiddle.net/VmELF/4/)

如果您想将功能绑定到在 dom 加载后注入到 DOM 的文本框（可能通过 Ajax 调用等...），您可以使用 jQuery [on](http://api.jquery.com/on/)

```
$(function(){
  $("body").on("keyup","#txtSearchKey",function (event) {
    alert($(this).val())
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:05:50.767

`keydown`和`keypress`事件都在输入的键实际出现在文本框中之前执行。如果要在键出现后获取输入的新值，请改用`keyup`事件。

```
<input type="text" ID="txtMy" name="txtMy" onkeyup="initialize();"/>

initialize()
{
    var x = $("#txtMy").val();
} 
```

[您应该考虑使用.on()](http://api.jquery.com/on/)在 javascript 中绑定事件处理程序，因为无论如何您都在使用该库。将逻辑（javascript）与视图（html）分开是一个好习惯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T17:00:05.660

您可以使用 jquery 而不是标记事件处理程序：

```
var x;

$("#txtMy").on("keyup", function(){
     x = $(this).val();
     alert(x);
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T17:03:22.227

一些东西：

1.  使用`keyup`事件。`keypress`在记录角色之前开火。
2.  您的 HTML 片段中的 initialize() 函数拼写错误。

[请参阅http://jsfiddle.net/8XTLW/1/](http://jsfiddle.net/8XTLW/1/)上的工作 jsfiddle

# sql-server-2000 - 检查谁使用 SQL Server 2000 trc 文件登录

> ID：10214198
> 
> 赞同：0
> 
> 时间：2012-04-18T16:55:43.503
> 
> 标签：sql-server-2000

我正在尝试查看多个`.trc`文件以找出过去几个月中谁登录了 SQL Server。我没有设置跟踪，但我得到的是一堆`.trc`文件，

前任：

*   `C:\SQLAuditFile2012322132923.trc`,
*   `C:\SQLAuditFile201232131931.trc`

等等

我可以将这些文件加载​​到 SQL Profiler 中并单独查看它们，但我希望有一种方法可以将它们全部加载，以便快速扫描它们以查找登录信息。使用过滤器，或者更好的是，将它们加载到 SQL Server 表中并查询它们。

我尝试使用以下方法将文件加载到表中：

```
 use <databasename>
 GO
 SELECT * INTO trc_table
 FROM ::fn_trace_gettable('C:\SQLAuditFile2012322132923.trc', 10);
 GO 
```

但是当我这样做时，我收到错误消息：

> 文件“C:\SQLAuditFile2012322132923.trc”不存在或不是可识别的跟踪文件。或者打开文件时出错。

但是，我知道该文件存在，并且我有正确的名称。而且它们似乎是可识别的，因为我可以将它们加载到 SQL Profiler 中并很好地查看它们。

任何人都知道为什么我会收到此错误消息，如果这不起作用，也许是更容易分析这些多个 .trc 文件的另一种方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:02:40.987

您可能在 C: 的根目录上遇到权限问题。尝试将文件放入子文件夹，例如 c:\tracefiles\，并确保 SQL Server 帐户至少对该文件夹具有明确的读取权限。

也尝试开始更简单，例如

```
SELECT * FROM ::fn_trace_gettable('C:\SQLAuditFile2012322132923.trc', default); 
```

无论如何，除非您明确捕获成功的登录事件，否则我不知道这些跟踪文件将包含您要查找的信息……这不是 SQL Server 默认跟踪的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T12:51:02.433

我遇到了几乎相同的问题，并认为我会[从 Database Administrators 复制我的解决方案](https://dba.stackexchange.com/a/71551/43789)。

我在远程服务器上运行 SQL 跟踪并将跟踪文件传输到工作站上的本地目录，以便将数据加载到本地 SQL Server 实例上的表中以运行查询。

起初我认为错误可能与权限相关，但我排除了这一点，因为我没有问题将 .trc 文件直接加载到 SQL Profiler 中或作为文件加载到 SSMS 中。

在尝试了其他一些想法之后，我想了更多，意识到这毕竟是由于权限问题：查询是由 SQL Server 进程（sqlsrvr.exe）作为用户运行的，而`NT AUTHORITY\NETWORK SERVICE`不是我自己的 Windows 帐户。

解决方案是授予对存储跟踪文件的目录和跟踪文件本身的**读取**和**执行**权限。`NETWORK SERVICE`

您可以通过右键单击目录来执行此操作，转到“*安全*” 选项卡，添加`NETWORK SERVICE`为用户，然后选择`Read & Execute`其权限（这也应该自动选择`Read`和 `List folder contents`）。这些文件权限 (ACL) 应自动传播到目录内容。

如果您更喜欢使用命令行，您可以通过运行以下命令授予目录及其内容的必要权限：

```
icacls C:\Users\anthony\Documents\SQL_traces /t /grant "Network Service:(RX)" 
```

# php - 我的数据库不想显示我想要的一切

> ID：10214203
> 
> 赞同：-1
> 
> 时间：2012-04-18T16:55:56.910
> 
> 标签：php, mysql, database, phpmyadmin

我正在尝试制作一个页面来查看大约 5 个广告的用户的广告，并且只显示 1 个，这是代码：

```
<?php
try
{
$pdo_options[PDO::ATTR_ERRMODE] = PDO::ERRMODE_EXCEPTION;
$db = new PDO('mysql:host=localhost;dbname=test', 'root', '', $pdo_options);
$r = $db->query('SELECT id, inputid FROM ads WHERE inputid='.$_SESSION['log'].'');
echo '<ol>';
while($data = $r->fetch())
{
echo '<li><a href="adpage.php?id='.$data['id'].'">'.$adpage.'</a></li>';
$r->closeCursor();
}
echo '</ol>';
?> 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T16:57:10.850

```
while($data = $r->fetch())
{
echo '<li><a href="adpage.php?id='.$data['id'].'">'.$adpage.'</a></li>';
$r->closeCursor();   //<-- put this out of the loop
} 
```

像这样

```
while($data = $r->fetch())
{
echo '<li><a href="adpage.php?id='.$data['id'].'">'.$adpage.'</a></li>';
}

$r->closeCursor(); 
```

# unity3d - MissingReferenceException：“GameObject”类型的对象已被破坏，但您仍在尝试访问它（错误）

> ID：10214216
> 
> 赞同：0
> 
> 时间：2012-04-18T16:56:49.087
> 
> 标签：unity3d, unityscript, gameobject

我有一个问题，我一直试图找出几个说，我似乎无法确定它的原因！我创建了一个第一人称射击游戏，它在一张小地图上由几个敌人组成。我有两个场景（主菜单和游戏关卡）。当我的玩家死亡时，它会进入主菜单，您可以从中选择再次玩游戏。然后再次重新加载关卡。第一次运行游戏时，它运行没有任何问题。但是，当我这样做并再次按下播放游戏按钮时，它会向我返回一条消息，其中指出以下内容“MissingReferenceException：'GameObject' 类型的对象已被破坏，但您仍在尝试访问它。” 从下面的代码中，我只能看到两种类型的 GameObject。我试图移除 muzzleFlash 以查看这是否是问题，但它没有任何区别。当我读到这可能是问题的原因时，我已经取消了所有静态框，但这并没有解决问题。下面的这个脚本附加到一个敌人，我有一个附加到 FPS 的 PlayerShot 脚本。请问有人可以帮忙吗？

```
// speed of the AI player
public var speed:int = 5;

// speed the ai player rotates by
public var rotationSpeed:int = 3;

// the waypoints
public var waypoints:Transform[];

// current waypoint id
private var waypointId:int = 0;

// the player
public var player:GameObject;

// firing toggle
private var firing:boolean = false;

// the Mesh Renderer of the Muzzle Flash GameObject
private var muzzleFlashAgent:GameObject;

/**
    Start
*/
function Start() 
{
    // retrieve the player
    player = GameObject.Find("First Person Controller");

    // retrieve the muzzle flash
    muzzleFlashAgent = GameObject.Find("muzzleFlashAgent");

    // disable the muzzle flash renderer
    muzzleFlashAgent.active = false;
}

/**
    Patrol around the waypoints
*/
function Patrol()
{
    // if no waypoints have been assigned
    if (waypoints.Length == 0) 
    {
        print("You need to assign some waypoints within the Inspector");
        return;
    }

    // if distance to waypoint is less than 2 metres then start heading toward next waypoint
    if (Vector3.Distance(waypoints[waypointId].position, transform.position) < 2)
    {
        // increase waypoint id
        waypointId++;

        // make sure new waypointId isn't greater than number of waypoints
        // if it is then set waypointId to 0 to head towards first waypoint again
        if (waypointId >= waypoints.Length) waypointId = 0;
    }

    // move towards the current waypointId's position
    MoveTowards(waypoints[waypointId].position);
}

/**
    Move towards the targetPosition
*/
function MoveTowards(targetPosition:Vector3)
{
    // calculate the direction
    var direction:Vector3 = targetPosition - transform.position;

    // rotate over time to face the target rotation - Quaternion.LookRotation(direction)
    transform.rotation = Quaternion.Slerp (transform.rotation, Quaternion.LookRotation(direction), rotationSpeed * Time.deltaTime);

    // set the x and z axis of rotation to 0 so the soldier stands upright (otherwise equals REALLY bad leaning)
    transform.eulerAngles = Vector3(0, transform.eulerAngles.y, 0);

    // use the CharacterController Component's SimpleMove(...) function
    // multiply the soldiers forward vector by the speed to move the AI
    GetComponent (CharacterController).SimpleMove(transform.forward * speed);

    // play the walking animation
    animation.Play("walk");
}

/**
    Update
*/
function Update()
{
    // calculate the distance to the player
    var distanceToPlayer:int = Vector3.Distance(transform.position, player.transform.position);

    // calculate vector direction to the player
    var directionToPlayer:Vector3 = transform.position - player.transform.position;

    // calculate the angle between AI forward vector and direction toward player
    // we use Mathf.Abs to store the absolute value (i.e. always positive)
    var angle:int = Mathf.Abs(Vector3.Angle(transform.forward, directionToPlayer));

    // if player is within 30m and angle is greater than 130 (IN FRONT) then begin chasing the player
    if (distanceToPlayer < 30 && angle > 130)
    {
        // move towards the players position
        MoveTowards(player.transform.position);

        // if not firing then start firing!
        if (!firing) Fire();
    }
    // if player is within 5m and BEHIND then begin chasing
    else if (distanceToPlayer < 5 && angle < 130)
    {
        // move towards the players position
        MoveTowards(player.transform.position);

        // if not firing then start firing!
        if (!firing) Fire();
    }
    else
    {
        // patrol
        Patrol(); 

        // stop firing
        firing = false;
    }
}

/**
    Fire at the player
*/
function Fire()
{
    // toggle firing on
    firing = true;

    // check if still firing
    while (firing)
    {
        // hit variable for RayCasting
        var hit:RaycastHit;

        // range of weapon
        var range:int = 30;

        // fire the ray from our position of our muzzle flash, forwards "range" metres and store whatever is detected in the variable "hit"
        if (Physics.Raycast(muzzleFlashAgent.transform.position, transform.forward, hit, range)) 
        {
            // draw a line in the scene so we can see what's going on
            Debug.DrawLine (muzzleFlashAgent.transform.position, hit.point);

            // if we hit the player
            if (hit.transform.name == "First Person Controller")
            {
                // inform the player that they have been shot
                player.GetComponent(PlayerShot).Shot();  

                // play gunshot sound
                audio.PlayOneShot(audio.clip);

                // show muzzle flash for X seconds
                muzzleFlashAgent.active = true;
                yield WaitForSeconds(0.05);
                muzzleFlashAgent.active = false; 

                // wait a second or two before firing again
                yield WaitForSeconds(Random.Range(1.0, 2.0));
            }
        }

        // wait till next frame to test again
        yield;
    }
} 
```

这是破坏游戏对象的 PlayerShot。

```
// the sound to play when the player is shot
public var shotSound:AudioClip;

// the number of lives
public var lives:int = 3;

/**
    Player has been shot
*/
function Shot () 
{
    // play the shot audio clip
    audio.PlayOneShot(shotSound);

    // reduce lives
    lives--;

    // reload the level if no lives left
    if (lives == 0)
    {
        // destroy the crosshair
        Destroy(GetComponent(CrossHair));

        // add the camera fade (black by default)
        iTween.CameraFadeAdd();

        // fade the transparency to 1 over 1 second and reload scene once complete
        iTween.CameraFadeTo(iTween.Hash("amount", 1, "time", 1, "oncomplete", "ReloadScene", "oncompletetarget", gameObject));
    }
}

/**
    Reload the scene
*/ 
function ReloadScene()
{
    // reload scene
    Application.LoadLevel("MainMenu");
} 
```

与 BasicAI 一起附加到敌人的脚本是用于破坏游戏对象的 SoldierShot 脚本。下面是脚本。

```
public var ragdoll:GameObject;

/**
    Function called to kill the soldier
*/
function Shot()
{
    // instantiate the ragdoll at this transform's position and rotation
    Instantiate(ragdoll, transform.position, transform.rotation);

    Destroy(GetComponent(BasicAI));
    // destroy the animated soldier gameobject
    Destroy(gameObject);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T03:16:37.730

似乎您保留了对被破坏的 GameObject 的引用（或者我错了吗？）。

与常见的 C#（可能还有 javascript）程序中发生的情况相反，当您引用一个对象时，它永远不会被垃圾收集，在 Unity 中，如果您销毁该对象，您对它的所有引用都将转到`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:46:15.253

轻松修复，您可以删除“游戏关卡”中的游戏对象，并使用以下命令即时实例化您的士兵：

```
var instance : GameObject = Instantiate(Resources.Load("Soldier")); 
```

您只需要在项目文件夹中创建一个资源文件夹，然后将焊接的预制件放入其中。

# php - 上传文件无效

> ID：10214220
> 
> 赞同：2
> 
> 时间：2012-04-18T16:57:11.933
> 
> 标签：php, html

我有以下页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link href="/css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>
Click Browse and choose a file from your PC<br /><br />
<form method="POST" action="_URL_" enctype="multipart/form-data" name="IMGform">
<input type="file" name="image_upload"><br /><br />
<input class="button" type="Submit" value="Change Image">
<input type="hidden" name="add_image" value="true">
</form> 
</body> 
```

当我添加要上传的文件时，它根本不会产生任何结果。

var_dump($_POST) 只产生：

```
array(1) { ["add_image"]=> string(4) "true" } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T16:59:02.003

文件可通过[`$_FILES`](http://www.php.net/manual/en/reserved.variables.files.php)而不是`$_POST`.

有关详细信息，请参阅[文档](http://www.php.net/manual/en/features.file-upload.post-method.php)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T16:59:22.690

在 PHP 中，当文件上传时，它们可以通过`$_FILES`超全局访问，而不是通过 $_POST 超全局访问。请参阅[POST 方法上传](http://www.php.net/manual/en/features.file-upload.post-method.php)

# c++ - 为什么在没有显式作用域的情况下无法覆盖虚拟方法看到重载的基类版本？

> ID：10214223
> 
> 赞同：3
> 
> 时间：2012-04-18T16:57:45.077
> 
> 标签：c++, inheritance, overloading

我不明白为什么编译器不喜欢这个，这里是问题的例子：

```
class A
{
public:
    virtual void Expand() { }
    virtual void Expand(bool flag) { }
};

class B : public A
{
public:
    virtual void Expand() {
        A::Expand(true);
        Expand(true);
    }
}; 
```

当我尝试编译时，`A::Expand(true);`编译正常，但非作用域`Expand(true);`得到这个编译器错误：

'B::Expand' : 函数不接受 1 个参数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T16:59:50.037

您不需要`virtual`该行为的方法。派生类中的方法**隐藏**基类中同名的方法。因此，如果您在派生类中命名了任何函数`Expand`（即使它是基类中虚拟方法的覆盖），则无论其签名如何，都不会看到具有相同名称的基类方法。

您可以使用 使基类方法可见`using`。为此，您将添加`using A::Expand;`到 的定义中`B`：

```
class B : public A
{
public:
    using A::Expand;  
    virtual void Expand() { Expand(true); }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T16:58:47.250

那是因为除了覆盖 base 之外`Expand()`，您还**隐藏**了 base `Expand(bool)`。

当您在派生类中引入与基类中的方法同名的成员函数时，所有具有该名称的基类方法都隐藏在派生类中。

您可以通过限定（如您所愿）或使用`using`指令来解决此问题：

```
class B : public A
{
public:
    using A::Expand;
    virtual void Expand() {
        A::Expand(true);
        Expand(true);
    }
}; 
```

# enums - 开始学习 Enum ，属性 PTx

> ID：10214224
> 
> 赞同：0
> 
> 时间：2012-04-18T16:57:45.530
> 
> 标签：enums

我是 C# 的新手，现在我正在研究枚举并且我在属性 PTx 上遇到了这个问题。

错误“1不一致的可访问性：属性类型'EE5.Taxas'比属性'EE5.Deposito.PTx'33更难访问”

我应该怎么办？

命名空间 EE5 { 枚举分类 { A = 20, B = 24, C = 30 }

```
enum Limites 
{L1 = 2, L2 = 5 }

public class Deposito
{
    private double Capital;
    private int Time;
    private Taxas Tx;

    public Deposito(int C, double N)
    {
        Capital = C;
        Time = N;
        if (N < (int)Limites.L1)
            Tx = Taxas.A;
        else 
            if (N < (int)Limites.L2)
                Tx = Taxas.B;
            else
                Tx = Taxas.C;
    }

    public Taxas PTx
    {
        get
        {
            return Tx;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:03:52.677

公开您的分类列表。

```
namespace EE5 { public enum Taxas { A = 20, B = 24, C = 30 } 
```

# java - 从java中的文本文件中读取字符串

> ID：10214227
> 
> 赞同：1
> 
> 时间：2012-04-18T16:57:49.443
> 
> 标签：java, stack-overflow

我正在为我的编程期末考试而学习。我必须编写一个程序来打开一个存储在字符串 fileName 中的文件并在文件中查找名为 personName 的字符串，这应该打印 personName 之后的第一个字符串，然后程序应该在打印后终止，如果参数 personName 是不在文件中，则应打印“此名称不存在”，然后如果发生 IOException，则应打印“存在 IO 错误”，并且程序应使用 system.exit(0) 退出

程序应该使用文件 info.txt 并且每行应该包含两个字符串第一个字符串名称和第二个年龄。

一切都必须在一种方法中

data.txt 包含

最大 60.0

乔 19.0

阿里20.0

到目前为止，我的代码是：

```
public class Files{

    public void InfoReader(String fileName, String personName)
    {

      try{
         try{
                   // Open the file that is the first 
                  // command line parameter
                  FileInputStream fstream = new FileInputStream("C://rest//data.txt");
                  // Get the object of DataInputStream

                  DataInputStream in = new DataInputStream(fstream);
                  BufferedReader br = new BufferedReader(new InputStreamReader(in));

                  //Read File Line By Line
                  while ((fileName = br.readLine()) != null) {
                      // Print the content on the console
                      (new Files()).infoReader("info.txt","Joe"); //this prints the age
                  }
                  //Close the input stream
                  in.close();
              }

              catch (IOException e)
              {//Catch exception if any
                    System.out.println(" there is an IO Error");
                    System.exit(0);
              }
     }
    catch (Exception e)
              {//Catch exception if any
                    System.out.println("that name doesn't exists");

              }
    }
} 
```

`infoReader(info.txt,Joe);`应该打印`19.0`
但我得到一个`java.lang.StackOverflowError`

任何帮助将非常感激！！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:20:54.910

这就是我认为你正在尝试做的事情。如果没有，至少可以作为一个例子。正如阿米特所提到的，您当前的错误是由于递归调用，我认为这不是必需的。

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;

public class Files {

    public void InfoReader(String fileName, String personName) {
        try {
            // Open the file that is the first command line parameter
            FileInputStream fstream = new FileInputStream(fileName);

            // Get the object of DataInputStream
            DataInputStream in = new DataInputStream(fstream);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));

            String line = null;

            //Loop until there are no more lines in the file
            while((line = br.readLine()) != null) {
                //Split the line to get 'personaName' and 'age'.
                String[] lineParts = line.split(" ");

                //Compare this line personName with the one provided
                if(lineParts[0].equals(personName)) {
                    //Print age
                    System.out.println(lineParts[1]);
                    br.close();
                    System.exit(0);
                }
            }

            br.close();
            //If we got here, it means that personName was not found in the file.
            System.out.println("that name doesn't exists");
        } catch (IOException e) {
            System.out.println(" there is an IO Error");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:17:13.567

使用 commons-io 并且不要忘记编码！

```
List<String> lines = FileUtils.readLines(file, encoding) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:20:24.483

如果你使用[Scanner](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)类，它会让你的生活变得更轻松。

```
 Scanner fileScanner = new Scanner (new File(fileName));

  while(fileScanner.hasNextLine()
   {
      String line = fileScanner.nextLine();

      Scanner lineScanner = new Scanner(line);

      String name = lineScanner.next(); // gets the name
      double age  = Double.parseDouble(lineScanner.next()); // gets the age

      // That's all really! Now do the rest!
   } 
```

# node.js - Mongoose - 从 ref 查询中检索对象

> ID：10214231
> 
> 赞同：11
> 
> 时间：2012-04-18T16:58:08.110
> 
> 标签：node.js, mongodb, mongoose

我有以下模式：

```
var userSchema = new Schema({
    firstName: String,
    lastName: String,
    emailAddress: {type: String, set: toLower, index: {unique: true}},
});

var eventMemberSchema = new Schema ({   
    user: { type : Schema.ObjectId, ref : 'User' },
    created: { type: Date, default: Date.now }
});

var eventSchema = new Schema({
    id : String,
    name : String,
    startDate : Date,
    endDate : Date,
    venue : { type : Schema.ObjectId, ref : 'Venue' },

    invitees : [eventMemberSchema],
}); 
```

我正在尝试做的是使用invitation._id查询事件，并最终取回用户......

受邀者->事件成员->用户

到目前为止，我有：

```
Event
.find({ "invitees._id": req.query.invitation_id })
.populate('user')
.run(function (err, myEvent) {

  console.log('error: ' + err);
  console.log('event:  '+ myEvent);
}) 
```

这有效，控制台显示 myEvent 的输出......（我意识到我不需要上面我的猫鼬查询的填充部分......我只是在测试）

我正在努力获得，我基本上将其描述为：myEvent.invitees.user

**编辑**

作为更新......这*有效*- 但是，它有点糟糕，因为现在我需要做另一个数据库操作来获取用户（我意识到猫鼬中的 ref 在引擎盖下这样做）

```
Event
.findOne({ "invitees._id": "4f8eea01e2030fd11700006b"}, ['invitees.user'], function(err, evnt){
    console.log('err:  '+ err);
    console.log('user id:  '+ evnt.invitees[0].user); //this shows the correct user id
}); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-18T17:23:56.793

尝试

```
Event
.find({ "invitees._id": req.query.invitation_id })
.populate('invitees.user') 
```

**更新**：

这是一个工作[要点](https://gist.github.com/2416177)。

# c# - 在 Visual Studio 中，如何从以前版本的软件中引用 COM 对象

> ID：10214232
> 
> 赞同：0
> 
> 时间：2012-04-18T16:58:13.110
> 
> 标签：c#, visual-studio

我安装了最新版本的 Adob​​e Photoshop。较新的 CS6 Photoshop COM 对象现在显示在 Visual Studio 中：

![对象](../Images/3861625b6db2cddd865a470a0e01a292.png)

我想参考旧的 Adob​​e Photoshop CS5 对象库，但在 Visual Studio 中找不到它。

知道如何找回旧的吗？

谢谢

编辑___________________________________ 目前，我已经删除了 Adob​​e Photoshop CS6，旧的 CS5 Com 对象神奇地出现在了这个列表中。目前有效，但并不完美。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:20:06.797

鉴于您仍然拥有 dll/tlb(s)。选择浏览，找到 dll/tlb（如 C:\Program Files\Adobe\Adobe Photoshop CS6 (64 Bit)\TypeLibrary.tlb）并选择它。VS 会发现它是一个 com dll 并进行相应处理。

但是，如果您不能在 Windows 中同时安装这个 Adob​​e 应用程序的多个版本，那么 Photoshop dll 地狱是绝对可能的。无需安装您要使用的版本即可解决该问题的机会从苗条到无。

# solr - 通过 post.jar 添加文档

> ID：10214233
> 
> 赞同：1
> 
> 时间：2012-04-18T16:58:22.853
> 
> 标签：solr, lucene

我在 Windows7 上运行 Solr 并且不能在 cmd 上使用 Curl 所以我使用[post.jar](http://lucidworks.lucidimagination.com/display/solr/Running+Solr)。（是的，我使用 Cygwin 和 Mingw，但在这种情况下我想坚持使用 cmd.exe）。

*有没有一种方法可以直接在命令中通过其标签通过 post.jar 添加文档，而不是创建 xml 文档然后将该 xml 文档添加到命令中？*

具体来说，如果我在 xml 文件中添加以下标签，则文档会被精美地上传：

```
<add><doc><field name="id">50</field><field name="title">Test Title</field><field name="author">Dan</field><field name="content">Test using post.jar </field></doc></add> 
```

但是，如果我尝试在命令中添加相同的标签，它会向我发送一个错误的请求错误：

在 Cmd 处输入：

```
java -Ddata=args  -jar post.jar "<add><doc><field name="id">50</field><field name="title">Test Title</field><field name="author">Dan</field><field name="content">
 Test using post.jar </field></doc></add>" 
```

回报：

```
SimplePostTool: FATAL: Solr returned an error: Bad Request 
```

如果不是外部 xml 文件，我找不到任何关于通过 post.jar 向 solr 添加数据的文档或示例。删除效果很好：

```
java -Ddata=args  -jar post.jar '<delete><id>42</id></delete>' 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T01:01:59.660

好的，我已经想通了。对于将来可能遇到这种情况的任何人：

```
java -Ddata=args  -jar post.jar "<add><doc><field name=\"id\">17</field></doc></add>" 
```

确保双引号 xml 标记并使用“\”转义内部标记双引号。例如，我双引号从`<add>`to的 xml 标记`</add>`。此外，我不得不转义字段**id**周围的引号。确保对所有字段执行此操作，它将提交。

此外，如果您使用 java 进行开发，请确保您对斜线和引号都进行了转义。例如，我的 ProcessBuilder 字符串中的最后一个参数是我的标签，如下所示：

```
"<add><doc><field name=\\\"id\\\">17</field></doc></add>" 
```

请注意用于在 java 中转义的额外斜杠。

我希望这可以帮助那里的人......祝你好运！

# java - 访问 osgi bundle 的 lib jars

> ID：10214235
> 
> 赞同：3
> 
> 时间：2012-04-18T16:58:27.323
> 
> 标签：java, osgi

我正在开发一个需要 org.apache.http 包的 osgi 包。目标平台有一个 httpcommponents 包，其中包含这些包，因为当我在包的清单中声明这些依赖项时我已经看到它们，并且 Eclipse 自动将包添加到插件依赖项列表中。问题是当我`import org.apache.http`. 如果我浏览该捆绑包，它只有包 org.apache.http 中的激活器，并且在 lib 文件夹中包含我需要的包的 jar。我怎样才能访问这些包？启动激活器并在运行时获取我需要的类？一种解决方案是手动将 org.apache.http jar 添加到我的包的构建路径中。对不起，如果这是一个愚蠢的问题......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T16:19:48.887

你可能想看看[这个问题](https://stackoverflow.com/questions/3013583/what-is-the-standard-way-to-bundle-osgi-dependent-libraries/3015072#3015072)，关于你的构建问题。无论谁为您构建目标平台，都采取了错误的方法，这就是造成您悲痛的原因。

您的目标平台实际上应该使用[公共库的 OSGi 版本](http://wiki.apache.org/commons/CommonsOsgi)。如果没有 OSGi 就绪版本，您可以从[Springsource bundle repository](http://ebr.springsource.com/repository/app/faq)获取它们。

如果这不可能（解决这个问题），那么您可以简单地更改构建的类路径以包含适当的库。无论如何，它应该已经在运行时工作。

PS - 这不是一个愚蠢的问题;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:35:44.800

当您尝试启动捆绑软件时，您基本上需要确保您的 OSGi 容器运行`org.apache.http`捆绑软件。有几种方法可以做到这一点。您可以手动将 jar 复制到部署目录中，也可以使用[OSGi Bundle Repository (OBR)](http://en.wikipedia.org/wiki/OSGi)之类的东西。使用 OBR，当您安装一个包时，它的所有依赖项也会被下载并安装。

您可以使用[maven OSGi 插件](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)托管您自己的 OBR 。这将读取您的捆绑包的清单文件并使用该信息创建一个本地 OBR。然后，您可以从控制台使用 OBR 来安装您的捆绑包，以及它的所有依赖项。

# javascript - FB.XFBML.parse() 不刷新 Facebook 评论

> ID：10214237
> 
> 赞同：3
> 
> 时间：2012-04-18T16:58:44.750
> 
> 标签：javascript, ajax, facebook, facebook-comments

我有一个 JS 照片库，当用户单击缩略图时，它会将 API 中的单个图像加载到页面中。我希望人们能够在每张图片上添加 Facebook 评论。因此，我在包含画廊的页面中有我的 Facebook 评论元素。

```
<div class="fb-comments" data-href="" data-num-posts="10" data-width="480"></div> 
```

在加载页面并首先填充图库时，我将评论元素的 data-href 属性设置为第一张图片的 URL（例如[http://site.com/gallery/1027/1](http://site.com/gallery/1027/1)）。然后，如果用户单击缩略图，我将该属性重置为所选图像的 URL。

```
fbComments.attr('data-href', data.link + index);
FB.XFBML.parse(); 
```

这`FB.XFBML.parse();`是我读到的你应该做的让 Facebook 刷新评论。我已经为一张图片添加了评论，并尝试单击没有评论的图片的缩略图。但是我对第一张图片的评论仍然存在。谁能建议为什么？

我已经尝试在我的 JS 文件中注销 FB 对象，并且它记录正常，所以它在我调用它时可用。我已经检查过我的 JS 中的 click 事件确实将 data-href 属性更改为正确的值。当我在 fb-comments 元素中硬编码不同的 data-href 时，评论会按预期呈现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T17:04:29.350

我建议你从 dom 中完全删除之前的评论框，然后插入一个带有正确*data-href*的新 html，然后调用*FB.XFBML.parse*方法。

另一件事是您应该指定解析的位置，如下所示：

```
FB.XFBML.parse(document.getElementById("container-id")); 
```

# java - 链表数组

> ID：10214239
> 
> 赞同：1
> 
> 时间：2012-04-18T16:58:47.953
> 
> 标签：java, list, hash, linked-list

我有这个学校作业，我有点困惑。

这就是它所说的：

> “编写一个使用‘链接’技术进行散列的程序。程序将读取一个数组的长度，该数组将包含对将生成的每个链表的引用。此外，所有要存储的值都是阅读。程序应该有一个单独的函数用于在索引存在的地方进行散列。当程序生成链表时，将计算并打印出理论上的“负载因子”。整个数组应该很容易打印出来。”

我感到困惑的是，有关程序的部分将读取数组的长度，该数组将包含对将生成的每个链表的引用。是否可以生成多个链表？在这种情况下，你是怎么做到的？

这是我被告知要使用的类：

```
public class EnkelLenke { 

    private Node head = null; 
    private int numOfElements = 0; 

    public int getNum() 
    { 
        return numOfElements; 
    } 

    public Node getHead() 
    { 
        return head; 
    } 

    public void insertInFront(double value) 
    { 
        head = new Node (value, head); 

        ++numOfElements; 
    } 

    public void insertInBack(double value) 
    { 
        if (head != null) 
        { 
            Node this = head; 

            while (this.next != null) 
                this = this.next; 
                this.next = new Node(value, null); 
        } 

        else 
            head = new Node(value, null); 
            ++numOfElements; 
    } 

    public Node remove(Node n) 
    { 
        Node last = null; 
        Node this = head; 

        while (this != null && this != n) 
        { 
            last = this; 
            this = this.next; 
        } 

        if (this != null) 
        { 
            if (last != null) 
                last.next = this.next; 
            else 
                head = this.next; 
                this.next = null; 
                --numOfElements; 
                return this; 
        } 

        else 
            return null; 
    } 

    public Node findNr(int nr) 
    { 
        Node this = head; 

        if (nr < numOfElements) 
        { 
            for (int i = 0; i < nr; i++) 
                this = this.next; 

            return this; 

        } 

        else 
            return null; 
    } 

    public void deleteAll() 
    { 
        head = null; 
        numOfElements = 0; 
    } 

    public String printAllElements() {
        String streng = new String();

        Node this = head;
        int i = 1;

        while(this != null)
        {
            streng = streng + this.element + " ";
            this = this.findNext(); 

            i++;
            if(i > 5)
            {
                i = 1;
                streng = streng + "\n";

            }

        }

        return streng;
    } 

    public double getValueWithGivenNode (Node n) 
    {

        Node this = head; 

        while (this != null && this != n) 
        { 
            this = this.next; 
        } 

        if (this == n) 
            return this.element;
        else 
            return (Double) null; 

    } 
}

public class Node { 

    double element; 
    Node next; 

    public Node(double e, Node n) 
    { 
        element = e; 
        next = n; 

    } 

    public double findElement() 
    { 
        return element; 
    } 

    public Node findNext() 
    { 
        return next; 
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:04:39.503

您的数据结构将如下所示（其中“LL”是一个链表）：

```
i    |  a[i]
-------------------------------
0    |  LL[obj1 -> obj5 -> obj3]
1    |  LL[obj2]
2    |  LL[]
...  |  ...
N-1  |  LL[obj4 -> obj6] 
```

在每个数组索引处，您都有一个散列到该索引的对象的链接列表。

> 是否可以生成多个链表？在这种情况下，你是怎么做到的？

是的。创建您的数组，并将每个元素初始化为一个新的链表。

```
 EnkelLenke[] a = new EnkelLenke[N];
 for ( int i = 0; i < N; i++ ) {
     a[i] = new EnkelLenke();
 } 
```

# android - 具有自定义视图子级的水平滚动视图

> ID：10214244
> 
> 赞同：2
> 
> 时间：2012-04-18T16:58:58.990
> 
> 标签：android, android-3.0-honeycomb, horizontal-scrolling, android-custom-view, horizontalscrollview

我正在尝试在 Horizo​​ntalScrollView 父级内实现自定义视图。自定义视图根据来自 Handler 的时间重复绘制一条线到其 Canvas。我想将自定义视图的**可见**宽度设置为 1207 像素 x 548 像素，但我希望线条能够延伸到可见范围之外，并且我想让用户能够水平滚动以查看更多线。在我刚刚使用具有固定宽度和高度的框架布局包围我的自定义视图类之前，这显然不允许任何滚动。现在，当我尝试使用下面的布局时，一切都是黑色的（自定义视图的背景是白色的）。

我正在开发带有蜂窝的华硕变压器。

这是我正在使用的布局的相关部分：

```
<HorizontalScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="548dp" >

    <maavapp.layout.CustomDraw
        android:id="@+id/custom_draw"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </maavapp.layout.CustomDraw>
</HorizontalScrollView> 
```

如果需要，这里是 CustomDraw 类的代码：

```
public class CustomDraw extends View {
private static int mSelected;
private ArrayList<Coordinate> measure1;
private ArrayList<Coordinate> measure2;
private ArrayList<Coordinate> measure3;
private boolean north = false, east = true, south = true, west = false;
private DrawHandler dh = new DrawHandler();
private boolean draw = true;
private int width;
private int height;
private int m2;

public CustomDraw(Context context) {
    super(context);
    init();

}

public CustomDraw(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public CustomDraw(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

public void init() {        
    measure1 = new ArrayList<Coordinate>();
    measure2 = new ArrayList<Coordinate>();
    measure3 = new ArrayList<Coordinate>();

    mSelected = Constants.MEASURE_1;
    width = 0;
    height = 0;
    m2 = 0;
}

public void setMeasure(int measure) {
    mSelected = measure;
}

public void toggleDraw() {
    draw = !draw;
    if(draw) {
        updateLine();
    }
}

public boolean isDrawing() {
    return draw;
}

public void updateLine() {
    // grab new coordinates for each measure
    /*new_coord(measure1);
    new_coord(measure2);
    new_coord(measure3);*/

    if(measure1.isEmpty() && measure2.isEmpty() && measure3.isEmpty()) {
        measure1.add(new Coordinate(0, 0));
        measure2.add(new Coordinate(0, 0));
        measure3.add(new Coordinate(0, 0));
    } else {
        Coordinate last_coord = measure1.get(measure1.size() - 1);

        measure2.add(new Coordinate(++m2, 25));

        if(last_coord.x >= width) {
            east = false;
            west = true;
        } else if(last_coord.x <= 0) {
            east = true;
            west = false;
        }

        if(last_coord.y >= height) {
            south = false;
            north = true;
        } else if(last_coord.y <= 0) {
            south = true;
            north = false;
        }

        Log.d("MAAV", "last_coord.x + 3: " + (last_coord.x + 3));
        Log.d("MAAV", "last_coord.y + 3: " + (last_coord.y + 3));

        if(south && east) {
            measure1.add(new Coordinate(last_coord.x + 3, last_coord.y + 3));
        } else if(south && west) {
            measure1.add(new Coordinate(last_coord.x - 3, last_coord.y + 3));
        } else if(north && east) {
            measure1.add(new Coordinate(last_coord.x + 3, last_coord.y - 3));
        } else if(north && west) {
            measure1.add(new Coordinate(last_coord.x - 3, last_coord.y - 3));
        }
    }

    if(draw) {
        dh.sleep(10);
    }
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    this.width = w;
    this.height = h;
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
public void onDraw(Canvas c) {
    super.onDraw(c);
    Paint p = new Paint();
    p.setStyle(Paint.Style.FILL);

    p.setColor(Color.WHITE);
    c.drawPaint(p);
    p.setColor(Color.BLACK);

    switch(mSelected) {
    case Constants.MEASURE_1:
        for(int i = 0; i < measure1.size(); i++) {
            Coordinate coord = measure1.get(i);
            Log.d("MAAV", "drawing coord.x, coord.y: " + (coord.x) + ", " + (coord.y));
            c.drawRect(coord.x, coord.y, coord.x + 3, coord.y + 3, p);  
        }
        break;
    case Constants.MEASURE_2:
        for(int i = 0; i < measure2.size(); i++) {
            Coordinate coord = measure2.get(i);
            c.drawRect(coord.x, coord.y, coord.x + 3, coord.y + 3, p);
        }
        break;
    case Constants.MEASURE_3:
        for(int i = 0; i < measure2.size(); i++) {
            Coordinate coord = measure2.get(i);
            c.drawRect(coord.x, coord.y, coord.x + 3, coord.y + 3, p);
        }
        break;
    }

}

class DrawHandler extends Handler {

    @Override
    public void handleMessage(Message msg) {
        CustomDraw.this.updateLine();
        CustomDraw.this.invalidate();
    }

    public void sleep(long delayMillis) {
        this.removeMessages(0);
        sendMessageDelayed(obtainMessage(0), delayMillis);
    }
} 
```

}

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:09:02.153

我认为您还必须设置视口：**android:fillViewport="true"**

像：

```
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:fillViewport="true" > 
```

# php - php：将两个全局数组传递给函数来修改它们的最佳实践

> ID：10214247
> 
> 赞同：1
> 
> 时间：2012-04-18T16:59:03.787
> 
> 标签：php, function, global

有两个数组需要在函数中进行更改。如何传递该数组？我知道的方法是将 2 个数组声明为函数中的全局变量：

```
function myfunc(){
 global $arr1;
 global $arr2;
 //do something
} 
```

这是否有意义，是否可以将两个数组作为引用传递？如何（如果是）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:00:30.893

是的，您可以将数组作为参考传递，这比使用全局变量更可取。

```
function myfunc( array &$arr1, array &$arr2 ) {
    // do something
}

myfunc( $someArray, $someOtherArray ); 
```

函数定义中的`&`告诉 PHP 传递一个引用而不是一个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:02:04.373

这是通过引用传递它们的方法，定义函数如下：

```
function myfunc(&$arr1, &$arr2) {
    // ... modify arrays here
} 
```

只需在要通过引用传递的函数参数前面加上`&`. 现在，当它们被函数接收时，它们就是引用。

当您调用函数时，您不必（也不应该）将 放在`&`变量前面，因为这会导致调用时按引用传递通知。像往常一样将它们传递给您的函数`$res = myfunc($first, $second);`

请参阅[通过引用传递](http://php.net/manual/en/language.references.pass.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:36:53.427

我会采取另一种方法（如果数组不是太大......）以明确调用函数的位置，原始数组将被更改（尽管我可能永远不会在一个函数中更改两个全局数组......） ：

函数调用：

```
list($array1, $array2) = myfunc($array1, $array2); 
```

功能：

```
function myfunc($array_x, $array_y){
  //do something
  return array($array_x, $array_y);
} 
```

# maven - 为什么某些 WSO2 Carbon POM 文件中有奇怪的版本号？

> ID：10214249
> 
> 赞同：0
> 
> 时间：2012-04-18T16:59:11.503
> 
> 标签：maven, build, maven-2, wso2, wso2carbon

我一直在尝试使用 Maven 2 从这里构建 WSO2 Carbon 的 3.2.2 和 3.2.3 标签：

[https://wso2.org/repos/wso2/tags/carbon/3.2.2](https://wso2.org/repos/wso2/tags/carbon/3.2.2)

[https://wso2.org/repos/wso2/tags/carbon/3.2.3](https://wso2.org/repos/wso2/tags/carbon/3.2.3)

但是，这些标签下整个目录树中的 Maven pom.xml 文件在这两种情况下仍然引用版本 3.2.0 - 请问我是否遗漏了一些明显的东西？

当我尝试使用我们的内部工具分析这两种构建的结果时，我在两种情况下得到了相同的结果（实际上结果与 3.2.0 的结果相同），这让我觉得我可能正在构建 3.2。 0 多次意外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:51:53.143

你没有错过任何东西。看来他们确实搞砸了。也许那是他们的意图，但那根本没有任何意义（至少对我来说）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T06:53:51.010

3.2.2 和 3.2.3 是单点版本，通常涉及不向 3.2.0 版本引入新功能的错误修复/优化。如果特定组件没有任何修复/更改，则版本仍然是旧版本，不会引入新版本。这就是版本的处理方式。

# c# - 如何将字符串转换为枚举值到整数？

> ID：10214251
> 
> 赞同：4
> 
> 时间：2012-04-18T16:59:31.403
> 
> 标签：c#, enums

> **可能重复：**
> [如何在 C# 中将字符串转换为枚举？](https://stackoverflow.com/questions/16100/how-do-i-convert-a-string-to-an-enum-in-c)
> [枚举返回 int 值](https://stackoverflow.com/questions/943398/enums-returning-int-value)

我已经声明了一个枚举：-

```
public enum Car
        {
            SELECT = 0,
            AUDI = 1,
            NISSAN = 2,
            HONDA = 3,
            LINCOLN = 4
        } 
```

现在我需要它匹配的 enum 的 int 值：-

```
private int GetCarType(string CarName)
        {
            foreach(var item in Enum.GetNames(typeof(Car))
            {
                if (item.ToLower().Equals(CarName.ToLower()))
                    //return int value of Enum of matched item; ???????
            } 
```

预期结果：-

```
int i = GetCarType(CarName); //suppose CarName is AUDI, it should return 1;
Console.write(i);

Result :- 1 
```

我将如何获得枚举的价值？以及更好的编码实践。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T17:00:24.280

如果要将字符串转换为枚举，则应使用[Enum.Parse](http://msdn.microsoft.com/en-us/library/system.enum.parse.aspx)而不是迭代名称。

然后只需转换为整数：

```
var iAsInteger = (Int32)i; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T17:01:33.267

只需将您的枚举转换为 int like

```
int i=(int)Car.Audi; 
```

这会给你 1

```
int i=(int)Car.Select; 
```

这会给你0

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T17:02:24.233

```
var result = (int)System.Enum.Parse(typeof(Car), carName) 
```

[http://msdn.microsoft.com/en-us/library/essfb559.aspx](http://msdn.microsoft.com/en-us/library/essfb559.aspx)

这将替换您的`GetCarType`功能。您不再需要遍历枚举名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T17:06:02.173

```
int i = (int) Enum.Parse(typeof(Car), "AUDI"); 
```

# iphone - 有没有办法仅为 iphone 陀螺仪应用程序重置或刷新偏航？

> ID：10214252
> 
> 赞同：0
> 
> 时间：2012-04-18T16:59:40.830
> 
> 标签：iphone, ipad, gyroscope

我为陀螺仪构建了一个应用程序，并且偏航总是从我打开应用程序的位置开始测量。我希望能够将测量值归零或仅重新校准偏航测量值。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T21:07:45.960

一种解决方案，虽然不是最先进或最完善的，但在用户按下按钮确定他/她已准备好开始、校准等之前，推迟设置运动管理器参考框架。这样，yaw = 0 在该点按下按钮而不是加载应用程序的点。

# python - 在 setup() 中处理带有连字符的 python 包名称需要列表

> ID：10214260
> 
> 赞同：2
> 
> 时间：2012-04-18T17:00:14.410
> 
> 标签：python, python-memcached

我依赖于 python-memcached 包，但它的名称违反了 python 命名约定，因此它破坏了 core.py 中的设置函数。

```
setup(name='foo',
      version='1.0',
      requires = ['python-memcached','psycopg2']
      ) 
```

这会破坏设置。我如何依赖包？是否可以在本地重命名或创建别名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:37:12.110

`python-memcached`的模块名称是`memcache`，因此使用：

```
setup(name='foo',
  version='1.0',
  requires = ['memcache','psycopg2']
) 
```

希望有帮助。

另一种选择是`pylibmc`改用；有关后者的更多信息，请点击此处[http://pypi.python.org/pypi/pylibmc](http://pypi.python.org/pypi/pylibmc)

# url-rewriting - nginx 用 try_files 重写规则

> ID：10214265
> 
> 赞同：2
> 
> 时间：2012-04-18T17:00:26.800
> 
> 标签：url-rewriting, nginx

在这篇文章的底部是我当前的 nginx 重写规则，并且在大多数情况下它正在正常工作。我似乎遇到的唯一问题是在 example.com/?action=cmd 等链接的示例中，此操作正在作为 example.com/clientarea/?action=cmd 处理

我正在寻找一种方法，当 ? 调用符号，它将自动将其附加到 example.com/index.php 而不是 /clientarea/

```
location = / {
    rewrite ^ /clientarea/ permanent;
}

location ~ ^(.*)$ {
try_files $uri $uri/ /index.php?$1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:09:38.820

假设您有最新版本的 Nignx 1.0.x+（我认为），这应该可以工作：

```
location = / {
    if ($is_args = '?') {
        return 301 $scheme://$host/index.php$is_args$args;
    }
    rewrite ^ /clientarea/ permanent;
}

location ~ ^(.*)$ {
    try_files $uri $uri/ /index.php?$1;
} 
```

# java - android中的自定义复选框难度

> ID：10214271
> 
> 赞同：1
> 
> 时间：2012-04-18T17:00:46.157
> 
> 标签：java, android, listview, checkbox, adapter

如何修改此 imageCheckBoxAdapter 代码以在滚动时保持 checkBox 的状态（即所有选中的复选框即使在滚动后也应保持选中状态。此外，选中的变量需要存储在数组中）？

```
class imageCheckBoxAdapter extends ArrayAdapter<String>
{
private final Context context;
private final ArrayList<String> values;
private final Map< String, SmbFile> obj;
static ArrayList<Boolean> checks=new ArrayList<Boolean>();
public imageCheckBoxAdapter(Context context,ArrayList<String> values,Map< String, SmbFile>obj) 
{
    super(context, R.layout.row_checkbox, values);
    this.context = context;
    this.values = values;
    this.obj=obj;
}
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.row_checkbox, parent, false);
    TextView textView = (TextView) rowView.findViewById(R.id.text1_check);
    textView.setText(values.get(position));
    ImageView imageView = (ImageView) rowView.findViewById(R.id.icon_image_check);
    try
    {
        if((obj.get(values.get(position)).isFile()))
        {
            imageView.setImageResource(R.drawable.view_file_icon);
        }
        else
        {
            imageView.setImageResource(R.drawable.view_folder_icon);
        }
    }
    catch (SmbException e) 
    {
        Toast.makeText(context,"Network error",Toast.LENGTH_SHORT).show();
        Log.d("id1", "error1");
        e.printStackTrace();
    }
    return rowView;
}
} 
```

row_checkbox.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="5dp" >
    <CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="false" />
 <ImageView
    android:id="@+id/icon_image_check"
    android:layout_width="50px"
    android:layout_height="50px"
    android:layout_marginLeft="5px"
    android:layout_marginRight="20px"
    android:layout_marginTop="5px"
    android:src="@drawable/view_file_icon" >
    </ImageView>
 <TextView
    android:id="@+id/text1_check"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="30px" 
    android:typeface="sans">
    </TextView> 
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:34:43.473

```
class imageCheckBoxAdapter extends ArrayAdapter<String> implements View.onClickListener
{
    private final Context context;
    private final ArrayList<String> values;
    private final Map< String, SmbFile> obj;
    private ArrayList<Boolean> checks=new ArrayList<Boolean>();

    public imageCheckBoxAdapter(Context context,ArrayList<String> values,Map< String, SmbFile>obj) 
    {
        super(context, R.layout.row_checkbox, values);
        this.context = context;
        this.values = values;
        this.obj=obj;

        for (int i = 0; i < values.size(); i++) {
            checks.add(i, false);
        }
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.row_checkbox, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.text1_check);
        CheckBox chk = (CheckBox) rowView.findViewById(R.id.checkBox1);
        textView.setText(values.get(position));
        ImageView imageView = (ImageView) rowView.findViewById(R.id.icon_image_check);
        try
        {
            if((obj.get(values.get(position)).isFile()))
            {
                imageView.setImageResource(R.drawable.view_file_icon);
            }
            else
            {
                imageView.setImageResource(R.drawable.view_folder_icon);
            }
        }
        catch (SmbException e) 
        {
            Toast.makeText(context,"Network error",Toast.LENGTH_SHORT).show();
            Log.d("id1", "error1");
            e.printStackTrace();
        }

        chk.setTag(Integer.valueOf(position));

        // Set a listener for the checkbox
        chk.setOnClickListener(this);

        //Sets the state of CB, since we have the list of checked CB
        chk.setChecked(checks.get(position));

        return rowView;
    }

    @Override
    public void onClick(View view) {
        Integer index = (Integer)view.getTag();
        boolean state = checks.get(index.intValue());

        checks.set(index.intValue(), !state);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:05:08.897

我认为您需要将值存储在数组中。对于每个复选框，您设置一个 changeListener 来存储关联的复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:27:21.710

我最近读到，不知道在哪里，有人问过一个类似的案例。

如果我理解正确，这可能是因为`CheckBox`控件未在 中进行数据绑定`DataRepeaterItem`，并且在滚动复选框时会丢失其状态。

您可以尝试使用`Viewstate`来保持检查值。我会尝试找到那个帖子，它似乎信息丰富。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T17:52:17.797

我认为您可以使用 View.setTag 方法在列表中保存复选框的位置，在 getView 中引用您的复选框，如下所示：

```
CheckBox chk = (CheckBox) rowView.findViewById(R.id.checkBox1); 
```

因为 CheckBoxes 是 View 的间接子类，它也有一个属性 View.setTag 像这样：

```
chk.setTag(Integer.valueOf(position)); 
```

然后将 OnCheckedChangeListener 设置为您的 chk，例如：

```
chk.setOnCheckedChangeListener(new OnCheckedChangeListener {
    public void onCheckedChanged(CompoundButton buttonView, boolean state) {
           Integer int = (Integer)buttonView.getTag();

           checks.set(int.intValue(), !boolean)
    }
}); 
```

由于布尔数组列表大小与值大小相同，因此指定位置对应于复选框的确切位置

然后将此代码段添加到您的 getView 方法中：

```
if (checks.get(position)) {
  chk.setChecked(checks.get(position));
  // do some stuff if wanted..
} else {
  chk.setChecked(checks.get(position));
  // do some stuff if wanted..
} 
```

我们做了这个片段，因为当 listview 向上或向下滚动时，会为看不见的行项目调用 getView。并更新行项目是否已检查。

# mamp - 将 Coda 连接到由 Mamp Pro 托管的本地 Wordpress 安装

> ID：10214273
> 
> 赞同：0
> 
> 时间：2012-04-18T17:00:53.437
> 
> 标签：mamp, vhosts, coda

长期以来，我一直在使用 Coda 和 Mamp 的常规版本进行本地开发，而没有陷入这种许可混乱。我最近升级到 Mamp Pro 并使用 VHosts 进行设置。我有一个站点`example.com`，它的根路径设置为`/Users/john/Sites/example`. 我`www`在 Mamp Pro 中设置了所有者和组。

当我完成所有这些配置的那一刻，我开始遇到 Coda 的问题。它一直在询问我编辑本地文件的用户名和密码`/Users/john/Sites/example`。我想我必须在我的 Mac 上启用 FTP，然后在 Coda 中添加一个站点以阻止它要求我为每个文件输入用户名密码。但是，我不知道如何使它工作。我正在使用 Lion 10.7.2

此外，我设置了 etc/hosts 文件，用于将 example.com 指向 127.0.0.1

更新：虽然@mini 接受的答案并没有直接回答这个问题。它仍然是与 Coda 无缝集成的优雅解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T23:55:26.690

考虑改用 DesktopServer（连同 Coda 2）。与 MAMP 不同，您可以使用 WYSIWYG 预览直接处理模板主题文件，用于移动设备测试的 LAN 共享（使用 WordPress，而不仅仅是 HTML 站点），使 AirPreview 可以使用 WordPress，复制、导入/导出到实时站点等。设置很简单，因为它只需单击三下鼠标即可管理您的虚拟主机、数据库和项目文件：

[http://www.youtube.com/watch?v=Pw9-F8etBPY](http://www.youtube.com/watch?v=Pw9-F8etBPY)

# powershell - 使用 CSV 文件通过 IP 地址从网络中提取计算机名称

> ID：10214277
> 
> 赞同：3
> 
> 时间：2012-04-18T17:01:03.797
> 
> 标签：powershell

几天来我一直试图弄清楚为什么我的代码不起作用。
我几乎有一个 CSV 文件中的 IP 地址列表。从这个 IP 地址列表中，我想获取计算机名称。当我执行时，无论我得到什么

使用“1”参数调用“GetHostByAddress”的异常：“指定的 IP 地址无效。” 在 line:3 char:35 + [System.Net.dns]::GetHostbyAddress <<<< ("$foo[0]") + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : DotNetMethodException

这是 CSV 文件的示例和使用的代码：

CSV 文件

值
192.168.0.11
192.168.0.12
192.168.0.13
192.168.0.14

正在使用的代码：

```
$foo = import-csv  C:\test\test\test.csv 
[System.Net.dns]::GetHostbyAddress("$foo[0]") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T19:29:38.250

更新：添加了 Trim() 调用以删除前导或尾随空格（如果存在）。

删除引号并调用 value 属性：

```
$foo = import-csv  C:\test\test\test.csv 
[System.Net.dns]::GetHostbyAddress($foo[0].Value.Trim()) 
```

解析所有地址：

```
import-csv  C:\test\test\test.csv | 
foreach-object { [System.Net.dns]::GetHostbyAddress($_.Value.Trim()) } 
```

您可以使用 -as 类型运算符仅传递有效地址：

```
import-csv  C:\test\test\test.csv | 
where-object {$_.Value.Trim() -as [ipaddress]} | 
foreach-object { [System.Net.dns]::GetHostbyAddress($_.Value.Trim()) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:12:06.633

如果您的示例文件是正确的，我建议这样做：

```
$foo = get-content C:\test\test\test.csv | ? { $_ -notmatch  "Value" }

[System.Net.dns]::GetHostbyAddress($foo[0]) 
```

# c++ - 来自 twitcurl timelineUserGet 方法的未授权错误

> ID：10214279
> 
> 赞同：0
> 
> 时间：2012-04-18T17:01:06.203
> 
> 标签：c++, twitter, twitter-oauth

我目前正在使用 twitcurl 在 Linux 和 Twitter 上使用 C++。我已经构建了 twitcurl，它似乎可以正常工作，我已经能够从他们项目的 twitterClient 示例的稍微定制的版本中发布推文。但是，我一直在努力阅读用户的时间表。

现在，我知道通用身份验证正在工作，因为我首先设法以正确的用户身份发布推文。

但是，当我尝试使用以下代码读取用户时间线时：

```
/* Get user timeline */
replyMsg = "";
printf( "\nGetting user timeline\n" );
if( twitterObj.timelineUserGet( true, false, 5 ) )
{
    twitterObj.getLastWebResponse( replyMsg );
    printf( "\ntwitterClient:: twitCurl::timelineUserGet web response:\n%s\n", replyMsg.c_str() );
}
else
{
    twitterObj.getLastCurlError( replyMsg );
    printf( "\ntwitterClient:: twitCurl::timelineUserGet error:\n%s\n", replyMsg.c_str() );
} 
```

我收到以下错误：

```
twitterClient:: twitCurl::timelineUserGet web response:
<?xml version="1.0" encoding="UTF-8"?><hash><request>/1/statuses/user_timeline.xml?     count=5?trim_user=1</request><error>Not authorized</error></hash> 
```

我不确定这是否与 twitcurl 生成的无效 url 有关 multi ？可能与身份验证冲突的符号。

完整的源代码可以在[https://github.com/paulspencerwilliams/CPlusPlusSocialPlayground/blob/master/twitterClient.cpp](https://github.com/paulspencerwilliams/CPlusPlusSocialPlayground/blob/master/twitterClient.cpp)找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:33:32.220

[以下帖子帮助我解决了同样的问题](http://code.google.com/p/twitcurl/issues/detail?id=38)

> **哪些步骤将重现该问题？**
> 
> 将某些字符发送到 twitter API（任何字符必须是百分比编码，除了空格？）。
> 
> **什么是预期的输出？你看到了什么呢？**
> 
> 我希望 twitter 的服务器能够接受我的 oauth 签名，但它却打了我的脸。
> 
> **您使用的是什么版本的产品？在什么操作系统上？**
> 
> r88，这个问题适用于linux和wii（通过devkitpro）
> 
> **请在下面提供任何附加信息。**
> 
> 该问题可以通过删除 oauth.cpp 中 buildOAuthRawDataKeyValPairs() 中的 urlencode() 调用来解决。
> 
> 那是根据[twitter 所说的我们必须这样做](https://dev.twitter.com/docs/auth/creating-signature)。我不知道（没有检查）oauth 规范是否应该这样做，但很明显它是如何与 twitter 一起工作的。
> 
> 你写了 oauthlib.cpp 吗？

# java - 如果可调用抛出超时异常 java 并打开流

> ID：10214280
> 
> 赞同：-2
> 
> 时间：2012-04-18T17:01:10.800
> 
> 标签：java, io

我正在使用可调用来打开包含在 finally 块中的一些输入流，由于某些令人讨厌的原因，由于我不关心的原因而引发了过早的 eof 异常。我想给可调用对象一定的时间，如果未完成则将其关闭。但是我如何也关闭可调用内的 finally 块内的东西？例如，在下面的代码中，finally 块打印“e”永远不会被执行。

```
ExecutorService e = Executors.newSingleThreadExecutor();
Future<Integer> f = e.submit(new Callable<Integer>() {
    public Integer call() {
        try {
            int i = 0;
            while(i<1) {
            }
        } finally {
            System.out.println("e");
        }
        return 4;
    }
});

try {
    Integer i = f.get(2, TimeUnit.SECONDS);
} catch(Exception ef) {
    System.out.println("l");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:08:29.083

您提供的代码示例中的`finally`块永远不会执行，因为没有任何路径可以让执行退出`while`循环。如果满足`while`循环终止条件或有一些代码可能会`throw`出现，`RuntimeException`那么您将看到 sysout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T00:16:39.987

我认为你在吠叫错误的树。如果流是套接字输入流，则应使用 Socket.setSoTimeout() 强制读取超时，如果它们是 HTTP 流，则应使用 HttpURLConnection.setReadimeout()。数据库有超时。我能想到的所有可以在读取中阻塞的东西都有超时。

# javascript - 我如何滑下整个 div 但它的内容在滑动时会粘住？

> ID：10214282
> 
> 赞同：2
> 
> 时间：2012-04-18T17:01:32.767
> 
> 标签：javascript, jquery-ui, jquery, jquery-selectors

当您单击查看帖子的所有评论时，我正在尝试实现与 google+ 相同的盲目向下滚动查看效果。经过一番搜索，我发现：[http](http://docs.jquery.com/UI/Effects/Blind#overview) ://docs.jquery.com/UI/Effects/Blind#overview但它没有达到我想要的效果。

此 html 中已经存在的代码不是部分代码，而是有助于呈现用户进入页面时默认播种的评论 (2) 的代码。单击查看所有链接并将部分注释放在此之前并将它们向下推。如果在单击查看所有评论之前键入了更多评论，则会将它们切掉，留下 2 条最新评论。

**html:**

```
<% if m.comments.any? %>

    <div class="allCommentsWrapper">
        <% comments(m.id).each do |comment| %>
             <div class="comment_container">
              <%= link_to image_tag(default_photo_for_commenter(comment), :class => "commenter_photo"), commenter(comment.user_id).username %>
         <div class="commenter_content"> <div class="userNameFontStyle"><%= link_to commenter(comment.user_id).username.capitalize, commenter(comment.user_id).username %> - <%=  simple_format h(comment.content) %> </div>
            </div><div class="comment_post_time"> <%= time_ago_in_words(comment.created_at) %> ago. </div>
        </div>
      <% end %>
    </div>

<% end %> 
```

**查询：**

```
$('.view_all_comments').off().on('ajax:success', function(e){
    e.preventDefault();
    $(this).parents('.post_content').find('.comment_container').slice(0, -2).remove();
    $(this).parents('.post_content').find('.comment_container:first').before("<%= j render 'users/partials/show_all_comments', :comments => @comments %>");
    $(this).parents('.post_content').find('.allCommentsWrapper').hide().show("blind", { direction: "vertical" }, 6000);
}); 
```

无论如何，这并没有达到我想要的效果。就像内容被粘在另一个背景上一样，当 allCommentsWrapper div 向下滑动时，它会显示每条评论。我希望它看起来好像评论被粘在 div 上，所以当它向下滑动时，就像 div 被从底部拉出，但它的顶部是隐藏的，但似乎它就在它上面的 div 后面。

了解我的意思的最好方法是访问 google+ 并单击例如“23 条评论”并观看它们滑下。

如果可能的话，将不胜感激解决方案和一些提示。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:39:28.083

编辑：添加代码注释

[http://jsfiddle.net/MZzUr/51/](http://jsfiddle.net/MZzUr/51/)

这个怎么样？

```
$("#posts").on("click", ".expander", function() {
    var commentsList = [],
        commentTemplate = $("<div/>").addClass("comment"),
        tempComment = null,
        gettingComments = new $.Deferred(),
        $this = $(this);

    // here you would probably have an ajax call
    // I just used a for loop
    // in the done or success of the ajax call, resolve addingComments
    // return an array of results and create in memory dom objects with jquery
    // $.get(url, data, function(results) {
    //    //add results to commentsList
    //    gettingComments.resolve()
    // });
    for (var i = 0; i < 10; i++) {
        tempComment = commentTemplate.clone().text("Comment " + i);
        commentsList.push(tempComment);
    }
    gettingComments.resolve();

    gettingComments.done(function() {
        // mine were added in order created, we are going to prepend them backwards
        // so reverse the list. (easier to use in recursive function)
        commentsList.reverse();

        // pass list to recursive function to add and animate items one at a time
        AddAndAnimate(commentsList, 30, $this);
    });

    function AddAndAnimate(items, delay, $container) {
        // prepend the item, get the height, then hide it
        $container.prepend(items[0]);
        var addToHeight = "+=" + items[0].height();
        items[0].hide();

        // animate the height change of adding the element
        // when the animation is done, show the element again,
        // remove the first element from the array, and call the recursive function
        $container.animate({
            height: addToHeight
        }, delay).promise().done(function() {
            items[0].show();
            items.splice(0, 1);
            if (items.length > 0) {
                AddAndAnimate(items, delay, $container);
            }
        });
    }

}); 
```

这是一个如何实现的示例。如果您需要帮助将其翻译为您的具体示例，请告诉我。不一样，因为我没有你的 ajax 函数，所以我嘲笑了添加评论。

# salesforce - Salesforce - 一个用于沙盒和生产的 WSDL？

> ID：10214292
> 
> 赞同：4
> 
> 时间：2012-04-18T17:02:07.573
> 
> 标签：salesforce

所以，我正在创建一个 Salesforce 应用程序，目前它可以很好地访问沙盒帐户。

我们的生产账户和沙盒账户在字段方面是完全一样的。

现在，当我在 Visual Studio 中创建我的 Web 引用时，一个 URL 被添加到 test.salesforce.com 的配置文件中，这个 URL 也在 WSDL 中。

我可以更改配置中的 URL 以进行生产并且一切正常吗？我已经阅读了关于此的相互矛盾的想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T17:06:39.617

如果您使这 2 个环境保持同步，那么您会注意到 WSDL 中唯一的不同是服务 URL。所以，是的，在属性中更改它是安全的，或者在运行时覆盖它（通过 .Url 属性）以在 2 之间切换。

# linq - 修补 RavenDB 文档 - LINQ 查询中使用的多个条件

> ID：10214296
> 
> 赞同：2
> 
> 时间：2012-04-18T17:02:19.353
> 
> 标签：linq, nosql, ravendb

对于满足给定条件的所有文档，我想修补更新这些文档中的字段。为此，我在 LINQ Pad 中编写了一个查询，以获取所需文档的子集。

那是 ：

```
Session.Query<Movie>()    
.Where(x => x.Status == "Released" && x.IsDeleted == false && x.ReleaseDate.Date < new DateTime(2012, 4, 3))
.Dump(); 
```

现在我有了文件清单。但我需要修改一个字段。为此，我编写了一个索引和补丁命令。我需要帮助来完成这项任务。

补丁代码（不完整）：

```
 store.DatabaseCommands.UpdateByIndex("Movies/NewIndexName",
         new IndexQuery { Query = "IsDeleted:false" },
         new[]
        {
          new PatchRequest
              {
                  Type = PatchCommandType.Modify,
                  Name = "Status",
                  Value = "Testing"
               }
        }, allowStale: false); 
```

索引是

```
 from doc in docs.Movies
  select new { ReleaseDate = doc.ReleaseDate.Date, IsDeleted = doc.IsDeleted, Status =

  doc.Status } 
```

具体来说，我的问题是..我的方法是否正确..如果是，我如何在条件中添加多个条件..它说 Query = "IsDeleted:false" 我可以在查询中添加更多比较检查（如上面的 LINQ 查询）？

编辑：（使用丹尼尔·朗的解决方案）

这给出了格式异常。输入字符串格式不正确。

```
store.DatabaseCommands.UpdateByIndex("Movies/NewIndexName",
             new IndexQuery
             {
                 Query =
         string.Format("Status:Released AND IsDeleted:false AND ReleaseDate:{* TO {0}}",
         DateTools.DateToString(new DateTime(2012, 4, 3),
                                DateTools.Resolution.MILLISECOND))
             },
             new[]
            {
              new PatchRequest
                  {
                      Type = PatchCommandType.Modify,
                      Name = "Status",
                      Value = "TestingReleased"
                   }
            }, allowStale: false); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T19:50:41.687

您可以这样编写查询：

```
store.DatabaseCommands.UpdateByIndex("Movies/NewIndexName",
         new IndexQuery { Query = "IsDeleted:false AND Status:Release" },
         .... 
```

**注意**您始终可以调用`ToString()`LINQ 查询并查看幕后生成的 Lucene 查询（或使用[Fiddler](http://fiddler2.com/fiddler2/)并观察查询通过网络）

```
Session.Query<Movie>()    
.Where(x => x.Status == "Released" && x.IsDeleted == false && x.ReleaseDate.Date < new DateTime(2012, 4, 3))
.ToString() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T19:51:09.703

是的，您可以有多个条件并使用标准布尔运算将它们组合起来。您实际上是在这里构建一个 lucene 查询，所以让我们看看这个网站以了解有关如何编写它们的更多信息：http: [//lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html# Boolean%20 运算符](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html#Boolean%20operators)

关于日期的问题是，raven 将它们（与其他所有内容一样）存储为字符串，并且专门选择它使用的格式来启用范围查询和类似的东西，所以它可能不是你所期望的......

因此，为了查询日期，您需要以特殊方式对其进行格式化。Raven.Abstractions.Linq 中有一个 DateTools 类，它有一个可以提供帮助的 DateToString 方法。

您可以像这样从上面构造相同的查询：

*（编辑 4/27 在字符串中添加额外的 {}）*

```
Query = 
    string.Format("IsDeleted:false AND ReleaseDate:{{* TO {0}}}",
    DateTools.DateToString(new DateTime(2012,4,3), 
                           DateTools.Resolution.MILISECONDS)) 
```

# sql - 如何为 SQL Server 中的自动增量列指定特定值？

> ID：10214297
> 
> 赞同：2
> 
> 时间：2012-04-18T17:02:20.010
> 
> 标签：sql, sql-server

我在 sql server 中有一个自动增量标识列，但我想为其中一行指定一个特定值。所以编号方案如下：

```
1 ...,
2....,
999 - for the reserved entry,
3....,
n.... 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T17:04:55.667

您需要使用`IDENTITY_INSERT`：

```
SET IDENTITY_INSERT MyTableName ON

INSERT INTO MyTableName
(IdField, <list of all the fields>)
VALUES
(999, <list of other values)

SET IDENTITY_INSERT MyTableName OFF

DBCC CHECKIDENT(MyTableName, RESEED, 2) 
```

您还必须在语句中使用显式字段列表，并且每个会话`INSERT`限制为一个活动字段。`IDENTITY_INSERT`

如果种子值高于当前 ID 值，这也会将种子值重置为您插入的任何值。

你也可以通过使用来解决这个问题，[`DBCC CHECKIDENT`](http://msdn.microsoft.com/en-us/library/ms176057.aspx)但管理起来会很痛苦。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T17:06:03.987

您可以使用[IDENTITY_INSERT](http://msdn.microsoft.com/en-us/library/ms188059.aspx)：

```
SET IDENTITY_INSERT [tablename] ON;
INSERT INTO [tablename] (identitycolumn, ... ) VALUES (999, ...);
SET IDENTITY_INSERT [tablename] OFF; 
```

Having to resort to this is always a code smell. It is onyl acceptable as a data load practice for table population, or for replicating data. For an app to 'reserve' IDs is a a bad practice and indicates a data model design flaw.

# jquery - 更改选项卡式内容部分中选定选项卡的外观

> ID：10214303
> 
> 赞同：0
> 
> 时间：2012-04-18T17:02:46.837
> 
> 标签：jquery, css, tabs

我正在创建一个网站作为大学项目。我添加了一个带有标签内容的部分。它目前运行良好，但是，我希望能够更改 CSS 代码，以便选定的选项卡看起来与未选定的选项卡不同。目前，唯一有效的区别是使选项卡中的文本更粗。我无法让标签背景更改颜色等。我将为此部分附上适当的代码 -

HTML

```
<div class="tabs">
    <a href="#" class="defaulttab" rel="tabs1">Peace One Day</a>
    <a href="#" rel="tabs2">Time Line</a>
    <a href="#" rel="tabs3">Supporters</a>
    <a href="#" rel="tabs4">Video</a>
</div>

<div class="tab-content" id="tabs1">

    <img class="logo" src="images/peace_one_day_logo.png" height="225" width="150"/>   

    <div class="caption_1">

        <p>It all started Jeremy Gilley, a British filmmaker, and his decision to share his concerns of Peace with the world. Jeremy started documenting his journey in 1999, when he founded <strong>Peace One Day</strong>, a non-profit organization with the ultimate purpose of establishing an annual day of ceasefire and non-violence. </p>

                <p>Although the United Nations had already declared the 3rd Tuesday of September as the International Day of Peace, <strong>Peace One Day</strong> campaigned to take it a step further. The aim was to add more practical meaning to the already existing symbolism of the day, and these efforts were rewarded in 2001 when the member states of the United Nations unanimously adopted 21 September as the first annual day of global ceasefire and non-violence. 
        </p>

     </div>             

</div> 
```

CSS -

```
#tab_wrap {
    width:100%;
    color:#000;
    margin-top:3%;
}

.tabs a {
    display:block;
    float:left;
    font-size: 20px;
    color:#fff;
    text-decoration:none;
    margin-right:0.5%;
    padding:1% 2%;  

    background: rgb(23,16,84); /* Old browsers */
    background: -moz-linear-gradient(top,  rgba(23,16,84,1) 0%, rgba(41,88,216,1) 2%, rgba(17,0,86,1) 99%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(23,16,84,1)), color-stop(2%,rgba(41,88,216,1)),
                color-stop(99%,rgba(17,0,86,1))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(23,16,84,1) 0%,rgba(41,88,216,1) 2%,rgba(17,0,86,1) 99%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(23,16,84,1) 0%,rgba(41,88,216,1) 2%,rgba(17,0,86,1) 99%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(23,16,84,1) 0%,rgba(41,88,216,1) 2%,rgba(17,0,86,1) 99%); /* IE10+ */
    background: linear-gradient(top,  rgba(23,16,84,1) 0%,rgba(41,88,216,1) 2%,rgba(17,0,86,1) 99%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#171054', endColorstr='#110056',GradientType=0 ); /* IE6-9 */    

    -webkit-border-top-left-radius: 10px;
    -webkit-border-top-right-radius: 10px;
    -moz-border-radius-topleft: 10px;
    -moz-border-radius-topright: 10px;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
}

.selected {
    font-weight: bolder;
}

.tab-content {
    clear:both;
    border:solid #006 medium;
    padding:3%;
    background-color:#FFF;

    -webkit-border-radius: 25px;
    -webkit-border-top-left-radius: 5px;
    -moz-border-radius: 25px;
    -moz-border-radius-topleft: 5px;
    border-radius: 25px;
    border-top-left-radius: 5px;
}

#tabs1 {
    height:420px;
}

#tabs2 {
    height:800px;
}

.logo {
    margin-top:10%;
}

.caption_1 {
    width:75%;
    float:right;
} 
```

JavaScript -

```
<script type="text/javascript">

    $(document).ready(function() {

        $('.tabs a').click(function(){
            switch_tabs($(this));
        });

        switch_tabs($('.defaulttab'));

    });

    function switch_tabs(obj)
    {
        $('.tab-content').hide();
        $('.tabs a').removeClass("selected");
        var id = obj.attr("rel");

        $('#'+id).show();
        obj.addClass("selected");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:05:56.073

对于初学者的变化：

```
.selected {
    font-weight: bolder;
} 
```

至：

```
.tabs a.selected {
    font-weight: bolder;
} 
```

这样您就可以覆盖`tab a`选择器样式。

你可以这样清理你的jQuery：

```
function switch_tabs(obj)
{
    $('.tab-content').hide().filter(obj.attr("rel")).show();
    obj.addClass("selected").siblings().removeClass("selected");
} 
```

# android - Android 的 PhoneGap 示例应用程序不起作用

> ID：10214304
> 
> 赞同：3
> 
> 时间：2012-04-18T17:02:55.563
> 
> 标签：android, cordova

我正在尝试使用 Phonegap for Android 平台学习移动应用程序开发。所以，我下载了最新的PhoneGap 1.6 版。[我在http://wiki.phonegap.com/w/page/30862722/phonegap-android-eclipse-quickstart](http://wiki.phonegap.com/w/page/30862722/phonegap-android-eclipse-quickstart)找到了一篇不错的文章，它展示了如何为 Eclipse 设置 PhoneGap。在 Eclipse 中添加示例应用程序后，我现在可以运行该应用程序，但是，列表项似乎都无法在我的模拟器和手机上运行。示例应用程序包含一个列表（如链接示例所示），即获取位置、哔声、振动、呼叫 411、拍照等。只有拨打 411 才能正常工作 代码或电话间隙有什么问题？

日志猫

```
04-19 05:45:01.538: I/CordovaLog(325): Changing log level to DEBUG(3)
04-19 05:45:01.538: D/DroidGap(325): DroidGap.onCreate()
04-19 05:45:01.559: D/DroidGap(325): DroidGap.loadUrl(file:///android_asset/www/index.html)
04-19 05:45:01.559: D/DroidGap(325): DroidGap: url=file:///android_asset/www/index.html baseUrl=file:///android_asset/www/
04-19 05:45:01.958: D/DroidGap(325): DroidGap.init()
04-19 05:45:02.078: D/PluginManager(325): init()
04-19 05:45:02.178: D/SoftKeyboardDetect(325): Ignore this event
04-19 05:45:02.358: D/SoftKeyboardDetect(325): Ignore this event
04-19 05:45:10.470: D/CordovaLog(325): TypeError: Result of expression 'navigator.notification' [undefined] is not an object.
04-19 05:45:10.470: D/CordovaLog(325): file:///android_asset/www/main.js: Line 21 : TypeError: Result of expression 'navigator.notification' [undefined] is not an object.
04-19 05:45:10.499: E/Web Console(325): TypeError: Result of expression 'navigator.notification' [undefined] is not an object. at file:///android_asset/www/main.js:21
04-19 05:45:15.108: I/Database(325): sqlite returned: error code = 14, msg = cannot open file at source line 25467
04-19 05:45:21.128: D/CordovaLog(325): TypeError: Result of expression 'navigator.notification' [undefined] is not an object.
04-19 05:45:21.128: D/CordovaLog(325): file:///android_asset/www/main.js: Line 25 : TypeError: Result of expression 'navigator.notification' [undefined] is not an object.
04-19 05:45:21.128: E/Web Console(325): TypeError: Result of expression 'navigator.notification' [undefined] is not an object. at file:///android_asset/www/main.js:25
04-19 05:45:22.908: W/KeyCharacterMap(325): No keyboard for id 0
04-19 05:45:22.908: W/KeyCharacterMap(325): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
04-19 05:45:26.228: D/CordovaLog(325): TypeError: Result of expression 'navigator.network' [undefined] is not an object.
04-19 05:45:26.228: D/CordovaLog(325): file:///android_asset/www/main.js: Line 108 : TypeError: Result of expression 'navigator.network' [undefined] is not an object.
04-19 05:45:26.249: E/Web Console(325): TypeError: Result of expression 'navigator.network' [undefined] is not an object. at file:///android_asset/www/main.js:108 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T19:08:29.613

您的 index.html 中的 phonegap *js 或 cordova* js 的名称可能与 assets/www 目录中的文件名不匹配。

我创建的 AppLaud Eclipse 插件提供了一个向导来为 Android 的 PhoneGap 配置项目。请参阅[http://wiki.phonegap.com/w/page/34483744/PhoneGap-Eclipse-PlugIn-for-Android](http://wiki.phonegap.com/w/page/34483744/PhoneGap-Eclipse-PlugIn-for-Android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:45:21.887

我认为您的代码中有拼写错误，或者错过了一些属性，例如 charset="utf-8"

```
<script type="text/javascript" src="cordova-1.7.0.js"  charset="utf-8"></script>

<script type="text/javascript" charset="utf-8"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T09:32:46.937

它对我有用，但请确保只在 indext.html 文件中添加第一行而不是第二行。对我来说，删除第二行后它才有效。仅添加

添加确保 cordova-1.7.0.js 存在于 www 文件夹中。

# c - 无法打印可能在 C 中使用 typedef 构造的 MyType 中的值

> ID：10214305
> 
> 赞同：1
> 
> 时间：2012-04-18T17:03:01.487
> 
> 标签：c, printing, struct, typedef

我想创建一个打印方法来打印出 MyType 中的 int 和 string 值。但是它只适用于 doIt1。如何修改打印方法，有人可以帮忙吗？

```
#include<stdio.h>
#include<string.h>
typedef struct {
    int i;
    char s[1024];
} MyType;

doIt1(MyType *mt, int ii, char *ss){
    mt->i=ii;
    strcpy(mt->s, ss);
}

doIt2(MyType mt, int ii, char *ss){
    mt.i=ii;
    strcpy(mt.s, ss);
}

void print(MyType mt){
     print("%d\n", mt.i);
     print("%s\n", mt.s);
}

int main(int argc, char ** argv){
    MyType mt1, mt2;
    doIt1(&mt1, 12, "Other Stuff");
    doIt2(mt2, 7, "Something");
    print(mt1); // print out mt1
    print(mt2); // print out mt2
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:13:38.977

在中，您是*按值*`doit2`传递，也就是说，您正在制作副本。`mt`

 *在`doit2`函数内部，`mt`不是 的别名：它是另一个在退出`mt2`时将被丢弃的变量。`doit2`

简单地说，当你打电话时

```
doIt2(mt2, 7, "Something"); 
```

您的代码将执行以下操作（简化）：

```
{
    MyType mt2_tmp = mt2;
    /* execute doIt2 passing the copy, mt2_tmp, to the function */
    doIt2(mt2_tmp, 7, "Something");
    /* the function exits and the copy is thrown away */
} 
```*

# jquery - jQuery Datatables：如何删除行

> ID：10214307
> 
> 赞同：5
> 
> 时间：2012-04-18T17:03:04.387
> 
> 标签：jquery, jquery-datatables

我想从数据表中删除该行。这是我使用的数据表代码：

```
var aSelected = [];

oTable = $('.itemPublished').dataTable({
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",
    "bServerSide": true,
    "bProcessing": true,
    "sAjaxSource": "/item/datatable",
    "bDeferRender": true,
    "iDisplayLength":20,
    "aLengthMenu": [[10, 20, 50, 75, 100, 150], [10, 20, 50, 75, 100, 150]],
    "aoColumnDefs": [
            { "bSortable": false, "aTargets": [ 2, 3, 4 ] },
            { "sClass": "left", "aTargets": [ 1 ] }
    ],
    "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
        if ( jQuery.inArray(aData.DT_RowId, aSelected) !== -1 ) {
            $(nRow).addClass('row_selected');
        }
        $(nRow).addClass('gradeA');
        return nRow;
    }
}); 
```

我想测试触发一个事件以从数据表中删除一行。该事件由数据表表 DOM 之外的按钮触发。我试过这样做：

```
$('.test').live('click', function () {
    oTable.fnDeleteRow( 0 ); 
}); 
```

检查它是否可以从表中删除第一行，但它不会也不会产生任何错误。我哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T17:13:43.090

在这里找到以下评论： http: [//datatables.net/forums/discussion/6208/hyperlink-event-to-delete-row/p1](http://datatables.net/forums/discussion/6208/hyperlink-event-to-delete-row/p1)：

“由于您使用的是服务器端处理，而 fnDeleteRow 对您的服务器端环境一无所知，因此您需要对服务器进行 Ajax 调用以使其执行删除，然后在表上调用 fnDraw 以使其刷新新数据集。”

# android - Android Admob - 如何在 Manifest 中声明 AdActivity

> ID：10214308
> 
> 赞同：2
> 
> 时间：2012-04-18T17:03:05.887
> 
> 标签：android, admob

我尝试为 AdMob 创建简单的示例，但失败了。这是我的源代码

AdMob 活动

```
public class AdMobActivity extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
  }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/linearLayout"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <com.google.ads.AdView android:id="@+id/adView"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         ads:adUnitId="myId"
         ads:adSize="BANNER"
         ads:loadAdOnCreate="true" />
</LinearLayout> 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="my.ad.mob"
android:versionCode="1"
android:versionName="1.0" >
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="9"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".AdMobActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
            <activity android:name="com.google.ads.AdActivity"
              android:configChanges="keyboard|keyboardHidden|orientation"/>
</application>
</manifest> 
```

我使用 AdMob 4.3.1 和 Android target=android-13

当我尝试执行项目时，我需要添加的地方是消息：“您必须在带有 configChanges 的 AndroidManifest.xml 中声明 AdActivity”。那么我的错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:08:58.393

AdActivity 必须具有以下配置更改：

`keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-11T16:29:49.727

对于那些使用谷歌移动服务的现代 adMob 的人来说，完整的答案应该是：

```
<activity android:name="com.google.android.gms.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

（注意，`android:name`改变了）

# mysql - 用额外的数学加入 2 个表

> ID：10214309
> 
> 赞同：2
> 
> 时间：2012-04-18T17:03:17.473
> 
> 标签：mysql

我正在为测验模块编写数据库。有两张表，一张用于团队，一张用于提交的数据。球队只能在一轮中玩小丑，并且该轮的得分翻倍。

因此，teams 表有一个归档的 fldJoker，它是一个 int，可以是 1 到 8。

数据表包含一个teamid（谁提交的），加上一个整数和一个分数。

当我计算总分时，我想把小丑玩过的那轮的分数翻倍，这就是我的症结所在。

任何人都可以给我任何指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:08:19.563

你想做这样的事情：

```
select teamid, sum(score * if(fldJoker = round, 2, 1)) ... 
```

# java - Mockito 在调用具有可变数量参数的方法时使用参数匹配器

> ID：10214311
> 
> 赞同：17
> 
> 时间：2012-04-18T17:03:28.947
> 
> 标签：java, mockito

我试图在调用具有可变数量参数（`...`Java 中的东西）的方法时在没有成功的情况下使用参数匹配器。我的代码在下面，我还将列出我尝试用来完成这项工作的所有行。

```
import static org.mockito.Mockito.*;

public class MethodTest {
    public String tripleDot(String... args) {
        String sum = "";
        for (String i : args) {
            sum += i;
        }
        System.out.println(sum);

        return sum;
    }

    public static void main(String[] args) {
        try{
            MethodTest mt = mock(MethodTest.class);
            when(mt.tripleDot((String[])anyObject())).thenReturn("Hello world!");
            System.out.println(mt.tripleDot(new String[]{"1","2"}));
        }
        catch (Exception e) {
            System.out.println(e.getClass().toString() + ": " + e.getMessage());
        }
    }
} 
```

如果打印语句是：

```
System.out.println(mt.tripleDot(new String[]{"1"})); 
```

或者

```
System.out.println(mt.tripleDot("1")); 
```

它将打印“Hello world”。

但是如果打印语句是：

```
System.out.println(mt.tripleDot(new String[]{"1","2"})); 
```

或者

```
System.out.println(mt.tripleDot("1","2")); 
```

它将打印“空”。

我也尝试过改变 when 调用，例如`anyObject()`or`anyString()`但无济于事。我不确定 Mockito 是否可以使用参数匹配器处理包含可变数量参数的方法调用。甚至可能吗？如果是这样，我应该怎么做才能完成这项工作？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-18T17:06:53.607

试试[`anyVararg()`](https://static.javadoc.io/org.mockito/mockito-core/2.2.5/org/mockito/ArgumentMatchers.html#anyVararg())匹配器。这是在 1.8.1 中引入的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T17:10:04.463

试试`Mockito.anyVararg()`。它应该工作。

# javascript - HTMLAudioElement 在 iPod Touch (5.0.1) 上的 Safari 中无法正常静音

> ID：10214315
> 
> 赞同：5
> 
> 时间：2012-04-18T17:03:46.623
> 
> 标签：javascript, ios, html5-audio

**问题：**我在切换 html5 音频标签上的 muted 属性时遇到问题。

**平台：**仅在 iPod Touch ( **Safari** ) [ **iOS** 5.0.1] 上。在 Chrome 中运行良好。

```
// This code resides in my click binding.
var audios = document.getElementsByTagName('audio')[0];
console.log(audios.muted); // returns false by default
if(audios.muted == true){
  audios.muted = false;
}
else{
  audios.muted = true;
} 
```

在 chrome 中，console.log 将切换真/假，但在 iPod 上，它将始终保持为假。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:40:08.963

根据[文档](http://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Using_HTML5_Audio_Video.pdf)：

> 在 iOS 设备上，音频电平始终在用户的物理控制之下。音量属性在 JavaScript 中不可设置。读取 volume 属性总是返回 1。

看起来你必须使用硬件开关。似乎在 iPhone 上，音量开关不会影响 Safari 的音量（默认为铃声音量，除非正在播放声音，否则您可以调整 Safari 的音量），而在 iPod 上，音量开关会。

希望这对其他人有帮助。

# java - 如何将 BBM bin 转换为 DeviceId

> ID：10214316
> 
> 赞同：0
> 
> 时间：2012-04-18T17:03:46.880
> 
> 标签：java, blackberry, java-me

我使用此行将 bin 从成员转换为数字和字符

```
String bin=Integer.toString(Integer.parseInt(DeviceInfo.getDeviceId(),16)) 
```

现在如何将 bin 再次转换为 DeviceId（仅限数字）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:14:18.673

我想你想要相反的：

```
String rev=Integer.toHexString(Integer.parseInt(bin)); 
```

例如，这段代码：

```
String bin=Integer.toString(Integer.parseInt("12345678",16));
String rev=Integer.toHexString(Integer.parseInt(bin));
System.out.println(bin);
System.out.println(rev); 
```

输出：

```
305419896
12345678 
```

# javascript - 从右到左增加或增加 div 标签宽度

> ID：10214320
> 
> 赞同：3
> 
> 时间：2012-04-18T17:04:07.850
> 
> 标签：javascript, jquery, html, animation, css

所以基本上需要做的是，在时间 0，宽度为 0，时间 1，宽度应该逐渐增加，从右到左我猜最难的部分是从“右到左”动画它，我没有问题动画一些从左到右增加大小的东西，如下所示

```
 @-webkit-keyframes reducetime {
 0% {width: 100%;}
 25% {width: 75%;}
 50% {width: 50%;}
 75% {width: 25%;}
  to {width: 0%;}
} 
```

我更喜欢解决方案不需要额外的插件，但如果没有其他方法，请随时提供这样的解决方案。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T17:12:21.030

您可以使用`float:right`将容器放在右侧：

```
#abc {
  width: 100%;
  height: 100px;
  background-color: pink;
  animation-name: reducetime;
  animation-duration: 1s;
  float: right;
}

@keyframes reducetime {
  0% {
    width: 0;
  }
  100% {
    width: 100%;
  }
}
```

```
<div id="abc"></div>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-18T17:10:16.870

宽度不是从左侧或右侧动画，它只是从 div 的左边缘定位的 div 的内容。

只需相对于右边缘定位内容，使其从左侧隐藏。根据您在 div 中的内容，您可能需要在其中使用另一个容器 (div)，您可以使用`position: absolute; right: 0`.

# html - type="search" 输入上未显示圆角

> ID：10214322
> 
> 赞同：0
> 
> 时间：2012-04-18T17:04:16.163
> 
> 标签：html, css

当我输入 type="search" 时，圆角会被剪掉。当我使用 type="text" 时，它们看起来很棒。

```
#q { padding: 8px; outline: none; width: 282px; border: 1px solid #ccc; border-radius: 5px; }

<input type="search" id="q" placeholder="search..." /> 
```

住在这里：http: [//jsbin.com/ilipiw/4/edit](http://jsbin.com/ilipiw/4/edit)

截屏：

![](../Images/77e48d8a0f1f45acffd57d700fc8a136.png)

我正在使用最新版本的 Chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:40:10.120

尝试这个：

```
#q { -webkit-appearance: none; -webkit-border-radius: 5px; outline: none; border: 1px solid #999; padding: 10px; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T16:35:36.837

将此样式用于#q：

```
#q { 
    border-radius: 5px; outline: none; border: 1px solid #999; padding: 10px; 
    -webkit-appearance: none; -webkit-border-radius:5px;
} 
```

此 jsBin[版本](http://jsbin.com/ilipiw/5/edit#source)适用于 Chrome 18.0.1025.162。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-18T18:57:27.740

虽然它应该工作。

```
 #q{-webkit-border-radius:5px;} 
```

如果这不起作用，请更新您的 chrome。

# android - twitter 和 android 应用程序的代码

> ID：10214328
> 
> 赞同：1
> 
> 时间：2012-04-18T17:04:53.857
> 
> 标签：android, twitter, android-intent

我开发了一个与 Twitter 集成的应用程序。问题是当意图视图进入 twitter 页面时，我写下用户名和密码并单击提交按钮。该页面重新发送到其他页面并显示一个代码编号。如何从我的应用程序中获取此代码？谢谢

# javascript - $("#id").ajaxStart(...) 在 ajax 请求期间被调用两次

> ID：10214330
> 
> 赞同：1
> 
> 时间：2012-04-18T17:04:59.460
> 
> 标签：javascript, jquery, ajax

我有以下代码：

```
<script language="javascript">
function add(idautomobile,marque,model,couleur,type,puissance,GPS){ 

 $("#notification").ajaxStart(function(){
   $(this).empty().append("<center><br/><img src='img/ajax-loader.gif'></center>");
 });

      $.ajax({ 
           type: "POST", 
           url: "ajoutAutomobile", 
           data: {idautomobile1:idautomobile,marque: marque,model:model,couleur:couleur,type:type,puissance:puissance,GPS:GPS},
           error: function(xhr, ajaxOptions, thrownError){ $("#notification").empty().append("* Erreur Serveur Veillez rééssayer plus tard cause: "+thrownError).addClass("error"); } ,
           success: function(retour){ 
             $("#notification").empty().append(retour).removeClass("error").addClass("success");
                  } 
             });

   }
    else{
    $("#notification").empty().append("* Vérifiez les types de données").addClass("error");
        }

    }

function init(){

   $("#GPSs").ajaxStart(function(){
   $(this).empty().append("<center><br/><img src='img/ajax-loader.gif'></center>");
 });     
    $.ajax({
        type:"GET",
        url: "selectImei" ,
        error: function(xhr, ajaxOptions, thrownError){ $("#notification").empty().append("* Erreur Serveur Veillez rééssayer plus tard cause: "+thrownError).addClass("error"); } ,
        success: function(retour){ 
            $("#GPSs").empty().append(retour)
                  }
          });
    }
</script> 
```

正如您在此处看到的，我有两个功能`init()`，并且`add(..)`： init() 在页面加载时将其收集：

```
 <body onload="init()"> 
```

并在单击按钮时添加（..）：

```
 <input type="button" value="Ajouter Automobile" OnClick="add(idautomobile.value,marque.value,model.value,couleur.value,type.value,puissance.value,GPS.value)"> 
```

`<div id="notification">`我在函数中的 ajax 请求期间显示了一个 gif（加载器）`add(...)`：

```
 $("#notification").ajaxStart(function(){
   $(this).empty().append("<center><br/><img src='img/ajax-loader.gif'></center>");
 }); 
```

init() 函数中的相同（ `<select>`使用数据库中的选项进行初始化）：

```
$("#GPSs").ajaxStart(function(){
   $(this).empty().append("<center><br/><img src='img/ajax-loader.gif'></center>");
 }); 
```

一切都很好，“ajax-loader.gif”被加载到`<div id="GPSs">`，然后在收到响应时显示带有选项的呈现选择。

问题是当我调用 add(..) 函数时，图像 'ajax-loader.gif' 再次加载到`<div id="GPSs">`...

最初页面被加载，函数`init ()`被调用： ![在此处输入图像描述](../Images/083a7d86b8eaf69badaaeeaa5e9fa01e.png)

当 ajax 请求完成时，从数据库中检索选项然后显示到`<div id="GPSs">`： ![在此处输入图像描述](../Images/480215ddd3fadfe6977d91a48c187e8f.png)

当我点击按钮时的问题，图像再次显示： ![在此处输入图像描述](../Images/eb04491b9f1c0a0c7729ceb7664b7ea0.png)

有解决方案吗？

**完整代码**：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>

        <title>Ajout automobile</title>
        <%@include file="includes/head.html" %>  
        <script language="javascript">
function add(idautomobile,marque,model,couleur,type,puissance,GPS){ 

 $("#notification").ajaxStart(function(){
   $(this).empty().append("<center><br/><img src='img/ajax-loader.gif'></center>");
 });

         select = document.getElementById("type" );
         type = select.options[select.selectedIndex].value;
         select2 = document.getElementById("GPS" );
         GPS = select2.options[select2.selectedIndex].value;
         Vidautomobile=document.getElementById('idautomobile').validity.valid;
         Vmarque=document.getElementById('marque').validity.valid;
         Vmodel=document.getElementById('model').validity.valid;
         Vcouleur=document.getElementById('couleur').validity.valid;
         Vtype=document.getElementById('type').validity.valid;
         Vpuissance=document.getElementById('puissance').validity.valid;
         VGPS=document.getElementById('GPS').validity.valid;

if(Vidautomobile&&Vmarque&&Vmodel&&Vcouleur&&Vtype&&Vpuissance&&VGPS)
{ 
      $.ajax({ 
           type: "POST", 
           url: "ajoutAutomobile", 
           data: {idautomobile1:idautomobile,marque: marque,model:model,couleur:couleur,type:type,puissance:puissance,GPS:GPS},
           error: function(xhr, ajaxOptions, thrownError){ $("#notification").empty().append("* Erreur Serveur Veillez rééssayer plus tard cause: "+thrownError).addClass("error"); } ,
           success: function(retour){ 
             $("#notification").empty().append(retour).removeClass("error").addClass("success");
                  } 
             });

   }
    else{
    $("#notification").empty().append("* Vérifiez les types de données").addClass("error");
        }

    }

function init(){

   $("#GPSs").ajaxStart(function(){
   $(this).empty().append("<center><br/><img src='img/ajax-loader.gif'></center>");
 });     
    $.ajax({
        type:"GET",
        url: "selectImei" ,
        error: function(xhr, ajaxOptions, thrownError){ $("#notification").empty().append("* Erreur Serveur Veillez rééssayer plus tard cause: "+thrownError).addClass("error"); } ,
        success: function(retour){ 
            $("#GPSs").empty().append(retour)
                  }
          });
    }
</script>
    </head>
    <body onload="init()">
        <%@include file="includes/header.html" %>  

<div id="notification"><!-- zone de notification -->

</div>
<!--  Le contenu  -->
     <div id="content">      
    <form name="f">
        <table>
        <tr>   
           <td><b><i>Immatricule</i></b> </td>
           <td><input type="text" pattern="\w{5,30}" required placeholder="Immaticule" name="idautomobile" id="idautomobile"></td>
        </tr>

        <tr>
            <td>  <b><i>Marque</i></b></td> 
            <td> <input type="text"  required placeholder="Marque" name="marque" id="marque"></td>
        </tr>

        <tr>    
            <td><b><i>Model</i></b> </td>
            <td><input type="text" pattern="\w{3,30}" required placeholder="Model" name="model" id="model"></td>
        </tr>  
        <tr>
            <td><b><i>Couleur</i></b> </td>
            <td>  <input type="text" pattern="\w{3,30}" required placeholder="Couleur" name="couleur" id="couleur"></td>
         </tr>

        <tr>
            <td> <b><i>type</i></b> </td>
            <td><select name="type" id="type"> 
             <option  value="voiture" >Voiture </option>
             <option  value="camion" >Camion </option>
                </select> </td>  
        </tr>

          <tr>
            <td><b><i>Puissance</i></b> </td>
            <td>  <input type="text" pattern="\d{1}" required placeholder="Puissance" name="puissance" id="puissance"></td>
         </tr>

         <tr>
             <td><b><i>GPS</i></b></td>
             <td id="GPSs"></td>
         </tr>

    </table>
     <input type="button" value="Ajouter Automobile" OnClick="add(idautomobile.value,marque.value,model.value,couleur.value,type.value,puissance.value,GPS.value)">

 </form>

       </div>
    <!-- iclure le footer-->
<%@include file="includes/footer.html" %>   
<!-- fin iclure-->    
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:18:59.793

你调用`.ajaxStart()`了两次，所以当你发起第二个 AJAX 调用时，你会被调用是有道理的（假设没有一个已经在运行）。您需要做的是，一旦初始 AJAX 调用完成，取消绑定到元素的`ajaxStart`事件处理程序，如下所示：`#GPSs`

```
$('#GPSs').off('ajaxStart'); 
```

它使用了`.off()`jQuery 1.7 中引入的函数。如果您使用的是早期版本，请`.unbind()`改用。

# c++ - COM 互操作 - 未找到成员

> ID：10214332
> 
> 赞同：2
> 
> 时间：2012-04-18T17:05:05.150
> 
> 标签：c++, com

我正在尝试为 3rd 方产品编写插件。这采用本机 C++ DLL 的形式，它从提供的类型库实现指定的接口。我的插件加载成功，接口描述的方法在预期点被调用，我可以从我的插件中写出一个日志文件并查询一个 Web 服务，到目前为止一切都很好。

但是，对于我的插件查询主程序，该`Initialize()`方法传递了一个`IDispatch`接口。我正在尝试将此接口与如下代码一起使用：

```
Initialize(LPDISPATCH pDispArchivingControl) {
  LPOLESTR ptName = L"currentVaultId";
  HRESULT hr= pDispArchivingControl->GetIDsOfNames(IID_NULL, &ptName, 1, 
                         LOCALE_USER_DEFAULT, &dispID);
  // add parameters, etc
  hr = pDispArchivingControl->Invoke(dispID, IID_NULL, LOCALE_SYSTEM_DEFAULT, 
                   DISPATCH_METHOD, &dp, pvResult, NULL, NULL);
  // hr = 0x80020003 Member not found.
} 
```

第一部分，`GetIDsOfNames()`，做了我认为应该做的事情，即将程序文档中的方法名称放入`ptName`给我不同的值`dispID`- 15、27，等等。

第二部分，`Invoke()`始终返回 HRESULT 0x80020003（未找到成员）。

我在这里找到了一些解决方案：[HOWTO: Troubleshoot "Member Not Found" 0x80020003 Error](http://support.microsoft.com/kb/172108)。对于解决方案 1，我尝试将 DISPATCH_METHOD 和 DISPATCH_PROPERTYGET 作为第四个参数。我是否正确假设 2 和 3 不能适用于我，因为我在 dispID 中取回了值？我也不确定如何更改这些。

我现在有点想不通，谷歌没有进一步帮助我 - 有人能建议下一步做什么吗？

* * *

更新：这是 oleview 中的一种方法。我在树视图中找不到它，但能够使用 File > View TypeLib 打开它...

![oleview 中看到的方法](../Images/e8d1c81e93b455053cb6a8a3ad7026db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:38:07.183

Hans Passant 和 Rup 在评论中给出的这个问题的正确答案不是使用后期绑定，而是使用`#import`类型库。

我把这个放在`stdafx.h`：

```
#import "ArchivingControl.tlb" raw_interfaces_only, raw_native_types, named_guids, auto_search 
```

这在我的 .cpp 文件中：

```
ArchivingControl::IArchivingControlPtr JTArchivingControlPtr;
STDMETHODIMP CMyClass::Initialize(LPDISPATCH pDispArchivingControl)
{
   JTArchivingControlPtr = pDispArchivingControl;
   return S_OK;
}
STDMETHODIMP CMyClass::OtherFunction()
{
   BSTR pVaultId;
   JTArchivingControlPtr->get_currentVaultId(&pVaultId);
   return S_OK;
} 
```

现在一切都运行良好，而且我现在的代码更少了 - 谢谢！

# mips - 使用多个 mips 参数 >4

> ID：10214334
> 
> 赞同：2
> 
> 时间：2012-04-18T17:05:14.247
> 
> 标签：mips, spim, pcspim

我试图通过将它们推入堆栈来编写一个函数以使用除 4 之外的额外参数（因为我的 mips 版本仅支持 $a0-$a3），但我的代码不正确。这是我在主要（片段）中的代码：

```
li $t0,40 #temp value for our 5th arg.

addi $sp, $sp, -4 #decrement stack pointer by 4
sw $t0, 0($sp) #save the value of $t0 on the stack.

jal printf 
```

它将临时值设置为 40，在堆栈上提供空间并保存它。然后调用我的函数。作为测试是否有效，当我将这些临时参数 $a0-$a3 移动到它们保存的寄存器对应项时，在函数内部，我有以下代码：

```
lw $t0, 0($sp) 
addi $sp, $sp, 4
move $a0,$t0

li $v0, 1
syscall 
```

...但它只打印出 0 而不是 40，所以我做错了什么。任何帮助将不胜感激（并赞成）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:11:07.397

在最常见的 32 位 MIPS[调用约定](http://en.wikipedia.org/wiki/Calling_convention#MIPS)中，堆栈上为`$a0,$a1,$a2`and保留空间`$a3`，因此被调用函数应该期望在 处找到第 5 个参数`16($sp)`。

解决这些问题的最简单方法是用 C 编写函数的空版本，然后反汇编`.o`文件以找出编译器如何传递参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T21:32:45.130

通过查看上面链接的完整代码，您正在处理两个问题。

1）您的堆栈没有正确设置以使用标准 MIPS o32 调用约定的参数（尤其是四个以上）。其他答案很好地指出了您对此的帮助。

2）您使用的“printf”不使用标准调用约定。如果你看到评论：

```
## printf--
## A simple printf-like function. Understands just the basic forms
## of the %s, %d, %c, and %% formats, and can only have 3 embedded
## formats (so that all of the parameters are passed in registers).
## If there are more than 3 embedded formats, all but the first 3 are
## completely ignored (not even printed).
## Register Usage:
## $a0,$s0 - pointer to format string
## $a1,$s1 - format argument 1 (optional)
## $a2,$s2 - format argument 2 (optional)
## $a3,$s3 - format argument 3 (optional)
## $s4 - count of formats processed.
## $s5 - char at $s4.
## $s6 - pointer to printf buffer 
```

预计不会在堆栈上传递任何内容。（记住 $s0-6 与堆栈无关）。您可以向此函数提供 $a0-> 格式字符串和 3 个参数（在 $a1、$a2 和 $a3 中）。请注意，这些评论表明它会破坏 $s0-$s6，尽管从不完整的代码中，我可以说恢复了多少，而无需跟踪它。简而言之，您找到的这个 printf 可能很方便，但它不使用您应该学习的堆栈约定，而且非常有限。假设您有权使用它，请参阅获得修改权限并将界面重写为理智的东西。请记住，如果您需要一次打印超过 3 个变量，则必须多次调用该函数并不是什么大问题（如果是，只需编写一个包装器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T20:36:24.850

该代码绝对正确，因此问题出在其他地方。我最好的猜测是堆栈指针在你的代码中没有得到正确的管理，或者`printf`你在弹出堆栈之前有一个错误。为什么不使用调试器来查看发生了什么？如果可以，请发布一个可运行的程序，删除所有不相关的代码来证明问题。[这](https://gist.github.com/2416339)是一个有效的 MIPS 程序，它可以执行您尝试执行的操作并使用相同的指令。

# ruby-on-rails - rails 2.3.8 中的thinking-sphinx + REXML 错误

> ID：10214335
> 
> 赞同：1
> 
> 时间：2012-04-18T17:05:19.290
> 
> 标签：ruby-on-rails, full-text-search, thinking-sphinx, rexml

我正在尝试通过`sphinx`运行`thinking-sphinx`，一切正常，直到我进入搜索页面

我有以下型号

```
class Student < ActiveRecord::Base
 define_index do
  indexes [lastname, firstname]
 end
end 
```

并在我的应用程序控制器中包含（经过一些网络搜索）

```
include REXML 
```

但是当我去学生控制器索引动作时

```
def index
    @students = Student.search params[:search]
end 
```

我收到以下错误

```
undefined method `default_external' for REXML::Encoding:Module 
```

对正在发生的事情有任何想法吗？

我的环境如下

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.10
  - RUBY VERSION: 1.8.7 (2011-12-28 patchlevel 357) [x86_64-linux]
  - INSTALLATION DIRECTORY: /home/sameera/.rvm/gems/ruby-1.8.7-p357
  - RUBY EXECUTABLE: /home/sameera/.rvm/rubies/ruby-1.8.7-p357/bin/ruby
  - EXECUTABLE DIRECTORY: /home/sameera/.rvm/gems/ruby-1.8.7-p357/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /home/sameera/.rvm/gems/ruby-1.8.7-p357
     - /home/sameera/.rvm/gems/ruby-1.8.7-p357@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/

 Linux

 thinking-sphinx-1.4.11 
```

导轨 2.3.8

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T02:49:43.267

我不完全确定问题到底是什么，但我想我听说过其他人在将 Thinking Sphinx 与 REXML 结合使用时遇到问题。如果您不使用/加载 REXML，会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T20:28:36.473

正如[Riddle Google group](https://groups.google.com/forum/?fromgroups#!topic/thinking-sphinx/fEn5lA1v7Ig)上的 pat 所示，不包括 REXML，只是要求它解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:03:56.630

您要设置哪个版本的 Sphinx？sphinx 2 仅适用于 Rails 3 [http://freelancing-god.github.com/ts/en/rails3.html](http://freelancing-god.github.com/ts/en/rails3.html)

# sql - DB2 条件 WHERE 子句

> ID：10214340
> 
> 赞同：2
> 
> 时间：2012-04-18T17:05:45.443
> 
> 标签：sql, db2

我正在使用 DB2 v9

我有一个带有参数的存储过程，这些参数可能会作为空字符串传入。这是我正在尝试做的一些伪代码：

```
WHERE myColumn.name =
     IF param1 = '' THEN
        **disregard this param, all column values are eligible**
     ELSE
        myColumn.name = param1; 
```

如果它是一个空字符串，基本上只是忽略参数。如果没有，请将其作为 WHERE 子句中的过滤器应用。这可以在 DB2 中实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T17:08:10.953

```
SELECT ...
FROM ...
WHERE  param1 = '' 
   OR  myColumn.name = param1
   ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T22:28:41.653

[wildplasser](https://stackoverflow.com/users/905902/wildplasser)提供的答案[是](https://stackoverflow.com/questions/10214340/db2-conditional-where-clause/10214393#10214393)正确的，但还有一些额外的考虑因素可能有助于包括在内。

首先，存储过程输入参数可能包含 NULL 而不是 ''。使用[COALESCE](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000780.html)或[NULLIF](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000833.html)函数将覆盖 NULL 和任意数量的空白空间：

```
SELECT ... FROM ... WHERE COALESCE( param1, '' ) = '' OR myColumn.name = param1 ; 
```

当该类型的搜索查询编译到存储过程中时，通常有助于在过程中的语句上启用 REOPT ALWAYS。如果您不这样做，则存储过程中的 SQL 语句将始终使用相同的访问计划，而不管在运行时将哪些输入参数传递给存储过程。当用户在特定列上搜索时，允许优化器在运行时重新评估过程中的每个语句将提供更好的利用正确索引的机会。

```
CALL SYSPROC.REBIND_ROUTINE_PACKAGE 
    ('P','YOURPROCSCHEMA.YOURPROCNAME','REOPT ALWAYS') ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T21:10:04.820

这里的另一个关键字是“[动态 SQL](https://www.ibm.com/developerworks/mydeveloperworks/blogs/SQLTips4DB2LUW/entry/prepare_execute?lang=en) ”。将您的查询构建为字符串，或者使用`EXECUTE IMMEDIATE`它们（对于 UPDATE、INSERT 或 DDL）或使用`PREPARE`/ `OPEN`/ `FETCH`（对于 SELECT）。

# java - Netbeans：如何构建带有外部 .jar 库的 .jar 文件？

> ID：10214344
> 
> 赞同：2
> 
> 时间：2012-04-18T17:05:55.590
> 
> 标签：java, netbeans, jar, external

在 Netbeans 7.1 中，当我附加了一个外部 blucove.jar 库时，构建它并且输出文件是 app.jar。当我从 CMD 运行 app.jar 时使用：java -jar app.jar，外部库不是在职的。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:20:22.733

您需要在项目属性中启用“复制依赖库”：

![在此处输入图像描述](../Images/8da170371878b342aeeaa7b5b0c852f8.png)

启用后，您的`dist`目录应包含：

```
app.jar
lib/blucove.jar 
```

# php - osCommerce 上的 ot_discount 模块在确认页面上重新声明自己

> ID：10214351
> 
> 赞同：0
> 
> 时间：2012-04-18T17:06:05.603
> 
> 标签：php, oscommerce

在带有折扣代码的 osCommerce 安装中，它会将折扣发送给 PayPal，但是当用户输入他们的信用卡信息或登录到他们的 PayPal 帐户以完成购买时，checkout_confirmation.php 页面会加载此错误：

> 致命错误：无法在第 16 行的 /home/content/36/7880936/html/twopecans/includes/modules/order_total/ot_discount.php 中重新声明类 ot_discount

我已经读过两次加载类并按照一些说明来修复它，但我得到的只是一个新行 # 或错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T15:42:59.450

由于错误说重新声明这意味着您声明两次以从新模块获取数据，请检查您的 checkout_process 文件或任何 paypal_process 文件以消除错误

# php - phpquery ajax 和普通jquery ajax 有哪些区别？

> ID：10214353
> 
> 赞同：0
> 
> 时间：2012-04-18T17:06:15.033
> 
> 标签：php, ajax, request, phpquery

我正在构建一个小型网络服务来与我的 joomla 网站进行交互。

我已经根据以下教程构建了一个示例 webapp

[http://api.joomla.org/Joomla-Platform/JPlatform.html](http://api.joomla.org/Joomla-Platform/JPlatform.html)

现在我需要实现一个类似 REST 的 web 服务。所有的工作都完成了，并且测试它可以完美地检索和保存新项目到数据库（如果直接从浏览器调用的话）。

要从我的系统中使用它，我需要通过外部域调用它。

我尝试过使用普通的 Jquery getJson，它仍然可以正常工作。我传递所有数据以保存槽请求并正确保存它们。

但是这个调用可能被插入到另一个 getJson 调用中，所以为了避免 cuncurrent ajax 调用出现任何问题，我试图直接通过 php 调用，首先使用 CURL 没有成功，然后使用 phpQuery::ajax 部分成功。

问题与 JRequest 类和使用的 checkToken 方法有关。

我不明白为什么同样的调用： webapp/index.php?param=value -- 在 url 浏览器中 WORKS webapp/index.php?param=value -- 在 JQUEry javascript WORKS webapp/index.php?param=value - - 在 phpQuery 中部分省略一些值

这个电话之间应该有什么区别？

谢谢！

# android - 使用 AlphabetIndexer 获取 NullPointerException

> ID：10214357
> 
> 赞同：0
> 
> 时间：2012-04-18T17:06:19.703
> 
> 标签：android

```
I'm having a hard time here with AlphabetIndexer here. I'm trying to use it to produce sectioned listview:

private static final String sAlphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ";

private AlphabetIndexer mIndexer;

    public ContactAlphabetizedAdapter(Context context, int layout,
            Cursor cursor, String[] from, int[] to) {
        super(context, layout, cursor, from, to);

        mIndexer = new AlphabetIndexer(cursor, cursor.getColumnIndexOrThrow(ContactsContract.Data.DISPLAY_NAME), sAlphabet); 
```

在我的设备上，我的应用程序崩溃了，问题是：

```
 E/AndroidRuntime(5188): Caused by: java.lang.NullPointerException
    E/AndroidRuntime(5188):     at android.widget.AlphabetIndexer.compare(AlphabetIndexer.java:128)
    E/AndroidRuntime(5188):     at android.widget.AlphabetIndexer.getSectionForPosition(AlphabetIndexer.java:265) 
```

这是 AlphabetIndexer 内部的问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:12:42.363

您可能应该发布更多代码以确认这一点，但我猜您 cursos 已更改，*或者由于某些其他原因 cursor[columnIndex] 返回 null*，在`getSectionForPosition`评估时。

根据[这个悬而未决的问题](http://code.google.com/p/android/issues/detail?id=6061)，这种情况将触发与您遇到的非常相似的 NPE

同样，*真正的*问题出在您未发布的代码中。Alphabetindexer 只是没有很好地处理这种情况。

# eclipse - 用于更新 Eclipse 注释处理器设置的 Maven 插件？

> ID：10214359
> 
> 赞同：2
> 
> 时间：2012-04-18T17:06:25.060
> 
> 标签：eclipse, maven, maven-eclipse-plugin

我正在使用 Eclipse Indigo 并且有一个使用注释处理器生成代码的 Maven 项目。

我已经在项目属性中设置了注释处理（在 Eclipse 中），但理想情况下，我希望这个 IDE 设置由 Maven 管理，这样我就可以轻松地与我的同事分享它。

任何建议，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:23:25.450

在 Maven 中，您需要在 maven-compiler-plugin 配置中指定[annotationProcessors 。](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#annotationProcessors)虽然我不认为[当前用于 m2eclipse 的 JDT 集成](http://git.eclipse.org/c/m2e/m2e-core.git/tree/org.eclipse.m2e.jdt/src/org/eclipse/m2e/jdt/internal/JavaProjectConversionParticipant.java)当前正在处理此配置参数，但您可能希望为此打开[增强请求](http://www.eclipse.org/m2e/support/)。

# android - Android Facebook SDK 有效的重定向 url

> ID：10214360
> 
> 赞同：1
> 
> 时间：2012-04-18T17:06:27.417
> 
> 标签：android, facebook, api, authentication, redirect

我试图将 facebook 集成到我的 android 应用程序中。我唯一需要知道的是应用程序用户的 facebook-id（在本地 facebook 应用程序中使用）。

所以我按照官方教程进行了尝试，一切似乎都很好，但是：

如果我尝试通过以下方式在代码中进行身份验证：

```
 facebook.authorize(this, new DialogListener() {
        @Override
        public void onComplete(Bundle values) {}

        @Override
        public void onFacebookError(FacebookError error) {
            error.printStackTrace();
        }

        @Override
        public void onError(DialogError e) {
            e.printStackTrace();
        }

        @Override
        public void onCancel() {}
    }); 
```

显示带有我的 facebook 应用程序名称的 facebook 屏幕，有两个按钮“取消”和“登录”，但没有内容。

如果我单击登录，则会收到以下错误：

```
API Error Code: 100
API Error Description: Invalid parameter
Error Message: Requires valid redirect URL. 
```

我阅读了其他一些帖子，建议在 facebook 的应用程序设置中关闭“增强的身份验证对话框”，但这并没有改变任何东西。

我的调试哈希是正确的，因为我已经得到了一个错误修复它，所以这不是问题。

现在搜索了几个小时，但没有找到解决方案。

有没有人暗示如何解决这个问题？

**编辑**

和这里的问题一样： [点击](https://stackoverflow.com/questions/10202245/facebook-api-on-android-blank-screen-instead-of-auth)

对不起双标。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:24:55.273

facebook android SSO 存在问题。

看一下[平台状态](http://developers.facebook.com/live_status/)：

> 我们正在努力修复 Android SSO 错误。请订阅[https://developers.facebook.com/bugs/385350798163367](https://developers.facebook.com/bugs/385350798163367)以获取有关此问题的更新。

# g++ - 在 OS X Lion 中增加堆栈大小

> ID：10214363
> 
> 赞同：3
> 
> 时间：2012-04-18T17:06:30.550
> 
> 标签：g++, stack, osx-lion

我需要为需要大量堆栈的 C++ 程序执行此操作。我使用 g++（包含在 OS X Lion 中）来编译它。我怎样才能为我的程序增加它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T17:18:03.077

来自[http://developer.apple.com/library/mac/#qa/qa1419/_index.html](http://developer.apple.com/library/mac/#qa/qa1419/_index.html)

使用 gcc，通过 -Wl 将链接标志传递给 ld：

```
gcc -Wl,-stack_size -Wl,1000000 foo.c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:15:11.700

您可以使用`getrlimit`/ `setrlimit`- 这适用于 Linux、Mac OS X 和其他 POSIX-ish 操作系统，例如

```
#include <sys/resource.h>

int main (int argc, char **argv)
{
    const rlim_t kStackSize = 16 * 1024 * 1024;   // min stack size = 16 MB
    struct rlimit rl;
    int result;

    result = getrlimit(RLIMIT_STACK, &rl);
    if (result == 0)
    {
        if (rl.rlim_cur < kStackSize)
        {
            rl.rlim_cur = kStackSize;
            result = setrlimit(RLIMIT_STACK, &rl);
            if (result != 0)
            {
                fprintf(stderr, "setrlimit returned result = %d\n", result);
            }
        }
    }

    // ...

    return 0;
} 
```

# forms - orbeon 表单生成器在添加新的来自时中断

> ID：10214370
> 
> 赞同：1
> 
> 时间：2012-04-18T17:06:51.030
> 
> 标签：forms, oracle, glassfish, builder, orbeon

我在 glassfish/oracle 上运行 Orbeon Forms dev-post-3.7.1.200910140016 。当我添加新的来自（使用表单编辑源）时，来自构建器正在中断。这是我在日志文件中看到的错误 0:20:26,179 INFO DatabaseContext,httpSSLWorkerThread-8888-3:133 - 回滚数据源的 JDBC 连接：jdbc/oracle。10:20:26,192 错误 ProcessorService，httpSSLWorkerThread-8888-3:105 - java.sql.SQLException 出现异常：ORA-19025：EXTRACTVALUE 仅返回一个节点的值

```
 at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:440)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)
    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:837)
    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:445)
    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:191)
    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:523) 
```

当我添加并保存它时，它保存在 ORBEON_FORM_DATA 表中。向表中添加新行会破坏表单构建器。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:49:13.200

我的建议是首先升级到 Orbeon Forms 的最后一个版本，在撰写本文时它是 3.9，于 2011 年 5 月发布。（您那里的版本 3.7.1，几乎是 3 年前发布的。）然后，如果您在最新版本中仍然存在此问题，您可能需要更新您的问题或发布一个新问题，其中包含有关如何重现它的说明。

# zip - 标准 ZIP 中使用哪种算法？

> ID：10214374
> 
> 赞同：10
> 
> 时间：2012-04-18T17:07:02.357
> 
> 标签：zip, gzip, tar, lzma, lzw

我已经用谷歌搜索、维基搜索并阅读了 ZIP 的 RFC，但找不到有关 ZIP 中使用的确切算法的任何信息。

我找到了有关 ZIP == TAR + GZIP 的信息

但是，我对这个信息感到困惑。

由于我记得 GZIP 使用 LZW 算法，而 TAR 使用 LZMA，我无法想象 ZIP == TAR + GZIP (LZMA + LZW - ???)

你能帮我找到 ZIP 的算法吗？我想实现它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T17:22:42.743

Zip 提供的*功能*大致相当于 tar 与 gzip 的组合。

**tar**只是将多个文件一起收集到一个文件中，保留有关原始文件的信息（例如，路径、日期）。与问题中的陈述相反，它本身*不*进行压缩。

**gzip**只需要一个文件并压缩它。

**Zip**做到了这两点——即，它将许多组成文件存储到一个存档中（同样，保留路径、日期等内容），并压缩它们。与 tar + gzip 不同，它单独压缩每个文件，并且不压缩有关组成文件的“目录”信息。这使得处理存档中的单个文件变得容易（插入、删除、解压缩等），但也意味着它通常不会获得整体压缩效果。

与其重新实现 zip 的压缩算法，不如从[zlib 网站](http://www.zlib.net/)下载代码（非常便携、非常自由的许可证）几乎肯定会更好。zlib 网站确实对算法有相当合理的[解释](http://www.zlib.net/feldspar.html)。如果您真的坚持自己这样做，您可能还想查看[RFC 1950](https://www.ietf.org/rfc/rfc1950.txt)、[1951](https://www.ietf.org/rfc/rfc1951.txt)和[1952](https://www.ietf.org/rfc/rfc1952.txt)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-19T00:37:29.550

在这种情况下，“zip”是一种允许多种不同压缩方法的文件格式。它们包括 deflate、deflate64、bzip2、lzma、wavpack 和 ppmd。然而，在实践中，为了兼容性，您几乎总是会看到专门用于 zip 文件的 deflate。

deflate 也是 gzip 和 zlib 以及 png 图像格式使用的压缩方法。

deflate 是 LZ77 压缩机，而不是 LZ78。

tar 是存档器，而不是压缩器。它生成 .tar 文件格式。.tar 文件通常被压缩（方便地由 tar 程序本身调用外部程序），它添加一个后缀，例如用于 gzip 压缩的 .tar.gz。tar 选项包括用于 gzip 的 -z、用于 bzip2 (.bz2) 的 -j 和用于 lzma (.xz) 的 -J。

您不需要实现放气算法。它已经为你完成了。您可以在代码中使用[zlib](http://zlib.net)，它具有非常自由的许可证。

# xcode - Xcode 4.3 中的标签栏在所有屏幕/Storryboard 上可见

> ID：10214375
> 
> 赞同：0
> 
> 时间：2012-04-18T17:07:08.633
> 
> 标签：xcode

我正在使用 Xcode 4.3。我有一个带有 3 个选项卡栏项目的选项卡栏控制器，每个选项卡都链接到单独的视图控制器。在其中一个视图控制器上，我有一个链接到另一个视图控制器的自定义按钮。我可以链接此按钮以打开新的视图控制器（通过情节提要），但是标签栏（来自我之前的屏幕）不存在。添加新视图控制器时，如何为所有打开的项目保留标签栏？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:12:04.947

相当肯定你不能那样做。如果有办法我很想知道。

但是在过去，我通过创建按钮来模拟标签栏视图并以这种方式加载到控制器中来弥补这个问题。它并不理想，但我为这种情况提出了最佳解决方案。

# jquery - jquery post 和 get 方法在远程服务器上不起作用

> ID：10214383
> 
> 赞同：0
> 
> 时间：2012-04-18T17:07:38.443
> 
> 标签：jquery, ajax, cakephp, path, remote-server

以下 jquery 代码在本地服务器上运行良好，但在远程服务器上不起作用。仅供参考，远程服务器正在识别 jquery。我通过[我的 Stackoverflow Q 解决了这个问题](https://stackoverflow.com/questions/10133490/jquery-ajax-doctype-syntax-error-and-is-not-defined-error-on-remote-server)

请在[Merry Flowers 入场](http://www.merryflowers.com/students/add)页面查看问题页面。当我输入banana8@gmail.com 作为电子邮件ID（在父信息中）并按Tab 键时，应自动填写所有后续表单元素。但这里没有这样做。

以下是来自 chrome 开发者工具的 /students/get_parent_info 的网络标头：

```
Request URL:http://www.merryflowers.com/students/get_parent_info
Request Method:POST
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:52
Content-Type:application/x-www-form-urlencoded; charset=UTF-8
Cookie:CAKEPHP=b0103aa50047806a7063301569298541
Host:www.merryflowers.com
Origin:http://www.merryflowers.com
Referer:http://www.merryflowers.com/students/add
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19
X-Requested-With:XMLHttpRequest
Form Dataview URL encoded
data[MerryParent][email]:banana8@gmail.com
Response Headersview source
Connection:Keep-Alive
Content-Type:text/html; charset=UTF-8
Date:Fri, 20 Apr 2012 18:56:03 GMT

Keep-Alive:timeout=5, max=100
P3P:CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"
Server:Apache
Transfer-Encoding:chunked
X-Powered-By:PHP/5.2.17 
```

网络响应和预览：

```
**************************************** 
```

仅供参考，我已经验证了 banana8@gmail.com 的现有记录。

在阅读了 lazerblade 的回答后，我检查了 www 和 public_html 文件夹上的 index.php 和 test.php 。我在远程服务器上的根目录是 /home/aquinto1。我很久以前就对这些文件进行了更改。我现在没有在这里修改任何东西。

以下是我的代码：

索引.php

```
if (!defined('ROOT')) {
    define('ROOT', DS.'home'.DS.'aquinto1');  
    //define('ROOT', dirname(dirname(dirname(__FILE__))));
}
/**
 * The actual directory name for the "app".
 *
 */

if (!defined('APP_DIR')) {
    define('APP_DIR','app');
    //define('APP_DIR', basename(dirname(dirname(__FILE__))));
}
/**
 * The absolute path to the "cake" directory, WITHOUT a trailing DS.
 *
 */

if (!defined('CAKE_CORE_INCLUDE_PATH')) {
    //define('CAKE_CORE_INCLUDE_PATH', ROOT);
    define('CAKE_CORE_INCLUDE_PATH', DS.'home'.DS.'aquinto1');

} 
```

测试.php

```
if (!defined('ROOT')) {
    define('ROOT', DS.'home'.DS.'aquinto1');  
    //define('ROOT', dirname(dirname(dirname(__FILE__))));
}
/**
 * The actual directory name for the "app".
 *
 */

if (!defined('APP_DIR')) {
    define('APP_DIR','app');
    //define('APP_DIR', basename(dirname(dirname(__FILE__))));
}
/**
 * The absolute path to the "cake" directory, WITHOUT a trailing DS.
 *
 */

if (!defined('CAKE_CORE_INCLUDE_PATH')) {
    //define('CAKE_CORE_INCLUDE_PATH', ROOT);
    define('CAKE_CORE_INCLUDE_PATH', DS.'home'.DS.'aquinto1');
}

<script type="text/javascript">
   //var j=jQuery.noConflict();
  $(document).ready(function(){
      $("#MerryParentEmail").change(function(){
        //txt=$("#MerryParentEmail").val();
        email_id=$("#MerryParentEmail").serialize();
        $.post("/students/get_parent_info",email_id,function(result_str){
        result_array=result_str.split('*****');
          $("#MerryParentInitial").val(result_array[0]);
          $("#MerryParentName").val(result_array[1]); 
          $("#MerryParentLandline").val(result_array[2]);
          $("#MerryParentMobile").val(result_array[3]); 
          $("#MerryParentAddress").val(result_array[4]);
          $("#MerryParentStateId").val(result_array[5]);
          state=result_array[5];
          txt_str="state_id="+state;
          $.get("/students/getcities",txt_str,function(result){
            $("#MerryParentCityId").html(result).show();
            $("#MerryParentCityId").val(result_array[6]);
          });
          $("#MerryParentPostalCode").val(result_array[7]);
        });
      });

       $("#MerryParentStateId").change(function(){
        state=$(this).val();
        txt_str="state_id="+state;
        $.get("/students/getcities",txt_str,function(result){
            $("#MerryParentCityId").html(result).show();
        });
       });
 });
 </script> 
```

student_controller 的 get_parent_info 函数和 getcities 函数：

```
function get_parent_info(){
//$this->layout=false;
 if (!empty($this->data)){

    $merryparent_info=$this->Student->MerryParent->getMerryParents($this->data['MerryParent']['email']);
    print_r($merryparent_info);
    echo $merryparent_info['MerryParent']['initial'].'*****';
    echo $merryparent_info['MerryParent']['name'].'*****';
    echo $merryparent_info['MerryParent']['landline'].'*****';
    echo $merryparent_info['MerryParent']['mobile'].'*****';
    echo $merryparent_info['MerryParent']['address'].'*****';
    echo $merryparent_info['MerryParent']['state_id'].'*****';
    echo $merryparent_info['MerryParent']['city_id'].'*****';
    echo $merryparent_info['MerryParent']['postal_code'].'*****';
    }
}

function getcities(){
    $this->data['MerryParent']['state_id']=$_GET['state_id'];
    if (!empty($this->data['MerryParent']['state_id'])){
       $cities = $this->Student->MerryParent->City->getCities($this->data['MerryParent']['state_id']);
    //print_r($cities);
    foreach ($cities as $k=>$v){
            echo '<option value="'.$k.'">'.$v.'</option>';
    }

        /* foreach($cities as $optionValue){
            echo '<option>' . $optionValue . '</option>';
        }*/
    }else{
        $this->Session->setFlash('You didn\'t select a state!');
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:23:38.170

默认情况下，您不能跨不同域发出 XHR 请求。

您需要动态生成脚本标签并使用 JSONP。

这是一篇似乎涵盖如何做到这一点的文章：http: [//cjihrig.com/blog/remote-ajax-calls-using-jsonp/](http://cjihrig.com/blog/remote-ajax-calls-using-jsonp/)

此外，重要的是要注意这可能会导致安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T12:09:51.170

我相信这里的问题与您的本地主机文件结构和根路径位置与您的远程服务器文件结构和根路径位置之间的差异有很大关系。首先，您的 url，即使是 AJAX 调用，也不应该从根目录路径。您的公共文件夹（www、public_html）应该将流量重定向到您的框架中，因此您可以维护对 SEO 友好的 url 和更安全的站点，以防 PHP 以某种方式失败。话虽如此，您的 AJAX 网址仍应为 www.merryflowers.com/students/get_parent_info，其中学生是您的控制器，get_parent_info 是您在学生控制器中的函数。如果它在本地工作，那么它应该远程工作，但它需要正确的路径才能到达它需要去的地方。我猜您的本地设置包括一个 htdocs 文件夹，而您的远程服务器，如您所说，包括 www 和 public_html 文件夹（可能是 simlinked）。首先检查您的代码是否存在路径引用差异 - 远程不存在的本地路径、文件夹结构的差异等......然后检查您的配置、引导程序和任何其他定义路径的文件并相应地更改它们。我还会用 MVC、PHP、Apache（如果您使用 Apache、ISAPI 或其他）、htaccess 和路径重新标记您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:30:13.630

这对我有用..我面临同样的问题，但通过以下两个步骤解决

1）。在引用 jquery 和其他 js 文件时，我更改为 IP 地址而不是相对路径

2）在所有http get请求中，我用正确的IP地址替换了localhost。

感谢激光刀。你帮了我很多。

穆哈吉

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T17:30:58.583

好的，问题出在 MerryParent 模型中的代码上。我的 jquery 代码没有任何问题。

在 MerryParent 模型中，

```
function getMerryParents($field_value){         
if (is_int($field_value))         
    $conditions=array('merryParent.id'=>$field_value);         
else         
    $conditions=array('merryParent.email'=>$field_value);         

//debug($conditions);         

$merryparent_info=$this->find('first',array(         
                            'conditions'=>$conditions,         
                            'recursive'=>-1   //fetches merry_parents table data only not the associated data         
                            ));         
      debug($merryparent_info);         
return $merryparent_info;         
} 
```

我将 merryParent.id 更改为 MerryParent.id 并将 merryParent.email 更改为 MerryParent.email ，它现在可以在远程服务器上运行。:)

# javascript - Meteor JavaScript 框架是如何工作的？

> ID：10214385
> 
> 赞同：108
> 
> 时间：2012-04-18T17:07:50.220
> 
> 标签：javascript, node.js, web-applications, meteor

我遇到了[Meteor](https://en.wikipedia.org/wiki/Meteor_%28web_framework%29)，虽然它看起来很令人兴奋，但我想知道它是如何工作的。我的意思是传统的 Web 应用程序是这样工作的：您在服务器上有脚本，这些脚本从数据库中获取数据并将其动态添加到网页中，并且用户提交的数据通过其他一些脚本添加到数据库中。

但是这些东西在 Meteor 中是如何工作的呢？Meteor 的不同部分如何相互关联？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-05-16T16:47:31.113

[Meteor](http://meteor.com/)是一个优雅地实时更新 HTML 的框架。

Meteor 的美妙之处在于您只需要创建模板和数据模型。通常的样板代码的其余部分被隐藏起来。您不需要编写所有同步代码。

Meteor 的关键部分可以使用这些部分自己构建：

*   它提供了在您的数据模型更新时自动更新的**模板。**这通常使用[Backbone.js](http://documentcloud.github.com/backbone/)、[Ember.js](http://emberjs.com/)、[Knockout.js](http://knockoutjs.com/)或其他工具来完成。

*   **客户端/服务器消息传递**是通过[websocket](http://en.wikipedia.org/wiki/WebSocket)使用[socks.js](https://github.com/sockjs/sockjs-client)或[socket.io](http://socket.io/)之类的东西完成的。

*   与 MongoDB的**客户端连接**非常酷。它将 MongoDB 服务器驱动程序复制到客户端。不幸的是，上次我检查时，他们仍在努力保护这个数据库连接。

*   **延迟补偿**只是首先更新客户端模型，然后将更新发送到服务器-服务器。

您可以在[Meteor](http://meteor.com/)网站或[GitHub 上](https://github.com/meteor/meteor)找到其他简洁的部分。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-18T17:21:46.250

> **免责声明**：此答案描述**[Meteor ，](http://meteorserver.org/client-docs/)** **[Meteor Server](http://meteorserver.org/)**的 JavaScript 客户端库。它最初是由于问题中的歧义而添加的，并且可能用于澄清搜索类似答案但不确定差异的访问者所面临的类似歧义。
> 
> 要了解[*Meteor JavaScript 框架*](https://www.meteor.com/)，请参阅[xer0x](https://stackoverflow.com/users/47604/xer0x)的[这个答案](https://stackoverflow.com/a/10623051/548696)。

正如 Meteor Server 的文档中提到的，Meteor 是**Comet**的一个实现。Comet 又是**AJAX**的对应物。

在 AJAX 的情况下，您通常会在客户端认为需要这样做时发出请求。要从服务器提取更新，您需要调用服务器，例如。每 5 秒。

在 Comet 的情况下，来自服务器的更新更快，因为连接是持久的。连接是由客户端建立的，就像在 AJAX 中一样，但是服务器直到它有一些更新或达到执行限制（服务器上的脚本可能有执行限制）才会响应。

在 Meteor 的情况下，您只需获得需要一些特定服务器端代码（如 Meteor 服务器）和客户端上的适当代码（在这种情况下它看起来像 Meteor 类）的恒定数据流。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-09-16T18:12:26.020

由于依赖跟踪系统，实时数据更新的所有魔力正在发生。可以在文档的[Tracker](http://docs.meteor.com/#/full/tracker)部分找到有关其工作原理的说明。

# javascript - 如何在不按 DOM 顺序排序的情况下将 jquery 选择添加在一起

> ID：10214387
> 
> 赞同：2
> 
> 时间：2012-04-18T17:07:54.043
> 
> 标签：javascript, jquery

我有一个 jQuery 元素，我想搜索它的所有下一个兄弟姐妹以寻找可能的匹配项，如果失败则搜索所有以前的兄弟姐妹。

我原以为我可以做类似的事情：

```
myDiv.nextAll("li").add(myDiv.prevAll("li")).each(function()
{
     if (match) { return this; }
} 
```

但是，这不起作用。当我调用 jquery Add 时，它似乎按照它们在 DOM 中出现的顺序对集合进行排序，这意味着我总是回到第一个匹配的元素。我想不出一个简单的方法来解决这个问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:12:37.743

您是正确的，大多数 jQuery 操作将 DOM 元素按 DOM 排序顺序排列。这就是 jQuery 的工作方式，它之所以这样做，是因为它通常非常有用和重要。

但是，就您而言，我认为这意味着您必须进行两次单独的搜索，以便以正确的顺序搜索内容。如果第一次搜索没有找到结果，则执行第二次：

```
function fn() {
    if (match) {return this;}
}

var results = myDiv.nextAll("li").each(fn);
if (!results.length) {
    results = myDiv.prevAll("li").each(fn);
} 
```

我能想到的唯一其他解决方案是使用未排序的元素创建您自己的 jQuery 对象。您需要手动操作 jQuery DOM 元素数组，而不是使用像`.add()`自动排序这样的内置方法。在这种特殊情况下，这不会比我们上面的代码少，也不会是解决问题的更有效方法，因为即使您不需要`prevAll()`集合，您也会获得所有 DOM 元素。

根据您的评论，如果您希望 prevAll() 项目按 DOM 顺序排序，则必须执行以下操作：

```
function fn() {
    if (match) {return this;}
}

var results = myDiv.nextAll("li").each(fn);
if (!results.length) {
    results = $().add(myDiv.prevAll("li")).each(fn);
} 
```

额外的`.add()`将导致 jQuery 将`.prevAll()`结果排序为 DOM 顺序。

# java - Android Filtered Accelerometer+Gyroscope 显示信息

> ID：10214388
> 
> 赞同：3
> 
> 时间：2012-04-18T17:08:00.067
> 
> 标签：java, android, filter, accelerometer, gyroscope

我的项目的目标是想出一个工具来测量和计算设备在 Y 轴上上下移动的时间。假设手机放在滑轮系统上，每次它向上移动一段距离，比如 1 英尺，然后向下移动，我想将其计为 1 次重复。或者甚至达到在图表上显示运动的程度。

到目前为止，我的研究已经让我得出了一些结论：加速度计很吵，我需要过滤从它收到的任何数据。我需要将陀螺仪与加速度计结合使用。互补过滤器是一种更简单的方法来平滑来自传感器的数据。在传感器开始“监听”重复之前，我需要获得传感器的方向（基于重力？）。

所以根据我的理解，首先我需要得到方向。接下来，让传感器监听移动。然后存储数据，对其进行过滤以获得振荡模式，将其应用于峰值检测算法并存储结果。

[我参考了此链接以获取有关补充过滤器的信息： http](http://web.mit.edu/first/segway/#misc) ://web.mit.edu/first/segway/#misc 来自这篇文章： [结合陀螺仪和加速度计数据](https://stackoverflow.com/questions/1586658/combine-gyroscope-and-accelerometer-data)

这对于了解如何将它们组合在一起非常有帮助。

有人有与我的项目类似的代码吗？我什至很难开始使用代码。

谢谢阅读

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T06:47:53.890

自 2.3 版以来，这已内置到 Android API 中。使用`Sensor.TYPE_LINEAR_ACCELERATION`代替`Sensor.TYPE_ACCELEROMETER`：

```
Sensor.TYPE_ACCELEROMETER = Sensor.TYPE_LINEAR_ACCELERATION + Sensor.TYPE_GRAVITY 
```

使用传感器融合（传感器融合`Sensor.TYPE_LINEAR_ACCELERATION`的结果）时，Android 会使用所有可用的传感器在没有重力的情况下获得最佳的加速度计读数。 [http://www.youtube.com/watch?v=C7JQ7Rpwn2k&feature=results_main&playnext=1&list=PL29AD66D8C4372129](http://www.youtube.com/watch?v=C7JQ7Rpwn2k&feature=results_main&playnext=1&list=PL29AD66D8C4372129)

# iis - IIS 重写正则表达式

> ID：10214389
> 
> 赞同：0
> 
> 时间：2012-04-18T17:08:00.223
> 
> 标签：iis, iis-7

我在 IIS 重写正则表达式方面苦苦挣扎了一段时间。我所要做的就是删除下面网址中问号后的整个文本：

[http://www.blah.com/Pages/Content.aspx?id=n%2fWA2PJCJXXnu8mvdC0jXQ%3d%3d&ln=Gy7UlI4cSJE94Wa2qudbFQ%3d%3d](http://www.blah.com/Pages/Content.aspx?id=n%2fWA2PJCJXXnu8mvdC0jXQ%3d%3d&ln=Gy7UlI4cSJE94Wa2qudbFQ%3d%3d)

所以这个网址变成[http://www.blah.com/Pages/Content.aspx](http://www.blah.com/Pages/Content.aspx)。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T08:40:30.960

以下是一个非常基本的规则，需要进行修改以支持您的页面/内容，但您可以简单地使页面重定向到自身并添加`appendQueryString="false"`.

```
<rule name="Redirect - without QS" stopProcessing="true">
  <match url="(.*)" />
  <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
  <action type="Redirect" url="{R:1}" appendQueryString="false"/>
</rule> 
```

# jruby - Windows/JRuby 上的无头驱动程序？

> ID：10214390
> 
> 赞同：3
> 
> 时间：2012-04-18T17:08:03.517
> 
> 标签：jruby, watir-webdriver

我在 Windows/JRuby 上使用 watir-webdriver。我的开发一直使用 Firefox。

Watir::Browser.new :firefox

对于部署，我需要一个无头浏览器，需要 JavaScript 支持。对于无头浏览器，我有哪些选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T01:17:48.887

I am not quite sure of your requirements for deployment with a headless browser, but my team is using [`phantomjs`](http://code.google.com/p/phantomjs/) along with the [`jasminerice`](https://github.com/bradphelan/jasminerice) gem to automate our JavaScript testing on a headless browser with [`WebKit`](http://www.webkit.org/).

We are using JRuby 1.6.7 and Rails 3.2.3\. In our project we are using CoffeeScript, and we wanted to leverage the Rails asset pipeline to do the compiling of CoffeeScript to JavaScript, which is what `jasminerice` does. If my understanding is correct, this will work for tests and code written in plain ol' JavaScript as well.

The set-up is a bit involved, and you might find wildly varying and probably out-dated accounts of other people getting this to work, but here is a [quick guide](https://gist.github.com/2474873) (gist on Github) that is working for me right now:

1.  Add `jasminerice` to your `Gemfile` (gist is [here](https://gist.github.com/2474873#file_gemfile))

2.  Get the latest static build for `phantomjs` on Windows at [http://code.google.com/p/phantomjs/downloads/list](http://code.google.com/p/phantomjs/downloads/list)

3.  Drop that `phantomjs.exe` executable somewhere on your `PATH`. We have this in our Rails project's `bin` folder, and we have updated our `PATH` to include that folder.

4.  Create a `spec/javascripts` folder in your project directory, and create the following `spec.js` file that will pull into scope any required libraries or folders (gist [here](https://gist.github.com/2474873#file_spec.js))

5.  Create a `spec/javascripts/support` folder in your project directory, and create the following `phantomjs-runner` file that will be used to invoke `phantomjs` to execute your JavaScript test files under `spec/javascripts`. (gist is [here](https://gist.github.com/2474873#file_phantom_runner))

6.  Kick up your development Rails server and see `jasminerice` run your tests by going to [http://localhost:5555/jasmine](http://localhost:5555/jasmine)

7.  Alternately, you can create a Rake task that will execute everything for you and return the results to the command line (gist is [here](https://gist.github.com/2474873#file_js.rake)).

And those are the hoops we had to jump through in order to get `jasminerice` and `phantomjs` to compile and run our CoffeeScript tests headless on Win/JRuby. Hope that helps!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T18:01:57.137

如果您想在无头 linux 服务器上运行您的东西，请参阅watir-webdriver 博客上的[此页面](http://watirwebdriver.com/headless/)

使用 Watir-Webdriver，您可以获得与 Webdriver 相同的无头选项（因为我们使用 webdriver 来驱动浏览器）。这已经写在几个地方，例如[Alister 的 WatirMelon 博客](http://watirmelon.com/tag/headless/)上的这些文章。否则，只需进行谷歌搜索`watir-webdriver headless`，您就会看到许多有用的结果。但是我会坚持使用去年左右的东西，早期的东西现在可能有点过时了。

# c# - 使用正则表达式解析 XML 是否合适？

> ID：10214391
> 
> 赞同：0
> 
> 时间：2012-04-18T17:08:09.027
> 
> 标签：c#, xml, regex, linq, linq-to-xml

我正在研究一个插入另一个项目的项目。我进入的项目产生了一种**无法**更改的奇怪 XML 语法。

它有一个奇怪的元素，来说明

```
<DocumentRoot>
   <Parent>
      <Child-Which-Can-Occur-Random-Number-Of-Times> Data </Child-Which-Can-Occur-Random-Number-Of-Times>
      <Weird-Elt_12309843028938> Data I need </Weird-Elt_12309843028938>
      <Weird-Elt_84509843323232> Data I need </Weird-Elt_84509843323232>

   </Parent>
   <Parent>
      <Child-Which-Can-Occur-Random-Number-Of-Times> Data </Child-Which-Can-Occur-Random-Number-Of-Times>
      <Weird-Elt_12309843028938> Data I need </Weird-Elt_12309843028938>
   </Parent>
   <Parent>
      <Child-Which-Can-Occur-Random-Number-Of-Times> Data </Child-Which-Can-Occur-Random-Number-Of-Times>
      <Weird-Elt_12309843028938> Data I need </Weird-Elt_12309843028938>
   </Parent>
</DocumentRoot> 
```

我需要什么：“Weird-Elt”标签的名称，以及它的内容。

问题：无法更改 XML。Weird-Elt 元素可以出现随机次数，它上面的元素也可以出现`Child-Which-Can-Occur-Random-Number-Of-Times`。

我能看到的唯一解决方案是结合使用 Linq to XML 和正则表达式来匹配 Weird-Elt 的名称。

我是对的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:50:59.043

```
var nodeList = xmlDoc.DocumentElement.SelectNodes("//*[starts-with(name(),'Weird-Elt_')]"); 
```

如果名称不总是以 Weird-Elt_ 开头，请尝试`contains`

```
var nodeList = xmlDoc.DocumentElement.SelectNodes("//*[contains(name(),'Weird-Elt_')]"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T17:31:18.410

是的，你是对的。您将不得不使用带有正则表达式的 Linq to SQL。这是示例

```
Regex regEx = new Regex("Weird-Elt_.*", RegexOptions.Compiled);

XDocument doc = XDocument.Parse(xml1);
var x1 = from e in doc.Descendants("Parent").Descendants()
         where regEx.IsMatch(e.Name.LocalName)
        select e; 
```

希望能帮助到你。

# arrays - 在 PL/pgSQL 中迭代 integer[]

> ID：10214392
> 
> 赞同：54
> 
> 时间：2012-04-18T17:08:09.673
> 
> 标签：arrays, postgresql, loops, plpgsql, postgresql-8.4

我正在尝试遍历`integer[]`plpgsql 函数中的整数数组 ()。像这样的东西：

```
declare
    a integer[] = array[1,2,3];
    i bigint;
begin
    for i in a
loop 
    raise notice "% ",i;
end loop;
return true;
end 
```

在我的实际用例中，整数数组`a`作为参数传递给函数。我收到此错误：

> ```
> ERROR:  syntax error at or near "$1"
> LINE 1:   $1 
> ```

如何正确循环数组？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-04-18T17:24:02.737

```
DO
$do$
DECLARE
   a integer[] := array[1,2,3];
   i integer;                      -- int, not bigint
BEGIN
   FOR i IN 1 .. array_upper(a, 1)
   LOOP
      RAISE NOTICE '%', a[i];      -- single quotes
   END LOOP;
END
$do$; 
```

或者[**`FOREACH`**](https://www.postgresql.org/docs/current/plpgsql-control-structures.html#PLPGSQL-FOREACH-ARRAY)在 PostgreSQL 9.1 或更高版本中更简单：

```
 FOREACH i IN ARRAY a
   LOOP 
      RAISE NOTICE '%', i;
   END LOOP; 
```

对于多维数组，请参见：

*   [在plpgsql中循环数组维度](https://stackoverflow.com/questions/9783422/loop-over-array-dimension-in-plpgsql/9784986#9784986)

但是，使用[`generate_series()`](https://www.postgresql.org/docs/current/functions-srf.html)or的基于集合的解决方案[`unnest()`](https://www.postgresql.org/docs/current/functions-array.html#ARRAY-FUNCTIONS-TABLE)通常比在大集合上循环更快。基本示例：

*   [PostgreSQL：频率表扩展](https://stackoverflow.com/questions/12327046/postgresql-frequency-table-expansion/12327440#12327440)
*   [在开始日期和结束日期之间选择每个月](https://stackoverflow.com/questions/10747695/select-each-month-between-a-start-and-end-date/10747820#10747820)

搜索标签[generate-series](/questions/tagged/generate-series "显示标记为“生成系列”的问题")或[unnest](/questions/tagged/unnest "显示标记为“unnest”的问题")以获取更多信息。

# jquery - 使用表单和ajax设置Fancybox的宽度和高度

> ID：10214398
> 
> 赞同：0
> 
> 时间：2012-04-18T17:08:26.320
> 
> 标签：jquery, ajax, fancybox

我有一个表格

```
<form action="getData.php" method="POST" id="myForm">
<input type="input" size="20" name="myName" />
<input type="submit" value="Login" id="submit" />
</form> 
```

将数据传递给fancybox

```
<script type="text/javascript">
$(document).ready(function() {

$("#myForm").bind("submit", function() {

    $.ajax({
        type        : "POST",
        width: "500",
        height: "500",
        cache       : false,
        url         : "getData.php",
        data        : $(this).serializeArray(),
        success: function(data) {
            $.fancybox(data);
        }
    });

    return false;
});

});
</script> 
```

但是我似乎无法设置fancybox的大小或类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:52:29.687

布尔值和整数值应设置为不带引号。

因此，为了将 fancybox 设置`type`为`iframe`您的特定尺寸（500x500px 框），请调整您的脚本，例如：

```
$("#myForm").bind("submit", function() {
 $.ajax({
  type: "POST",
  cache: false,
  url: "getData.php",
  data: $(this).serializeArray(),
  success: function(data) {
   $.fancybox(data,{
    'width': 500,
    'height': 500,
    'type': 'iframe',
    'autoScale': false
   }); // fancybox
  } // success
 }); // ajax
 return false;
}); // bind 
```

由于`width`,`height`和`type`是您的 fancybox 设置，它们应该放在 fancybox 函数中，而不是*ajax*函数中。

另请注意，我们设置`autoScale`为`false`确保您将获得您`width/height`选择的尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:20:26.580

尝试这个：

```
 $.fancybox.resize(); 
```

# php - 将php中的配置文件解析为变量

> ID：10214400
> 
> 赞同：2
> 
> 时间：2012-04-18T17:08:29.190
> 
> 标签：php, parsing, configuration-files, ini

- 背景 -

因此，我正在为本地开发机器及其安装 wordpress 的安装程序脚本工作，我想做的是拥有它，以便用户从下拉框中选择特定的插件，然后从那里选择哪个版本他们想安装。

- 问题 -

所以我需要能够解析 .cfg 文件并将所有值动态存储到变量中，这样如果我们添加更多插件就不会中断。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:18:00.637

几种方法，取决于您希望如何存储配置数据。最快的方法是将数据存储为 .ini 文件并使用 PHP 内置的[parse_ini_file](http://us2.php.net/parse_ini_file)对其进行解析。您还可以将数据存储为其他格式，例如 XML 和 YAML，但我不推荐使用 XML，因为您可能不会在不同的系统之间传输数据，而且 XML 往往更难阅读所有无关标签（与yaml或ini）。

我个人更喜欢 yaml 并使用[Symfony 的 Yaml 组件](http://symfony.com/doc/current/components/yaml.html)解析器，它将 yaml 文件解析为一个数组。Symfony 的 Yaml 组件可以在 Symfony 框架之外使用。您也可以查看[Zend 的 Yaml 解析器](http://framework.zend.com/manual/en/zend.config.adapters.yaml.html)。

在您选择了您希望使用的格式和解析器之后，就像将配置文件存储在您的网络服务器可以访问的某个位置、需要它并通过解析器 API 传递它一样简单。解析后，您应该可以通过数组访问这些值。

- 更新 -

```
<?php

$settings = parse_ini_file('test.ini');

var_dump($settings); 
```

结果：

```
array(41) {
["plugins"]=>
string(0) ""
["breadcrumb-navxt"]=>
string(5) "4.0.1"
["bp-moderation"]=>
string(5) "0.1.4"
["buddypress-activity-stream-hashtags"]=>
string(5) "0.4.0"
["buddypress-group-documents"]=>
string(5) "0.3.5"
["buddypress-group-email-subscription"]=>
string(5) "2.9.1"
["buddypress-links"]=>
string(3) "0.5"
["buddypress"]=>
string(6) "1.2.10"
["calendar"]=>
string(5) "1.3.1"
["collapsing-pages"]=>
string(5) "0.6.1" 
```

这似乎按预期工作，所以如果我想要`calendar`插件的版本号，我会这样做：

```
var_dump($settings['calendar']); 
```

要存储在动态变量中：

```
$settings = parse_ini_file('test.ini');

foreach ($settings as $key => $setting) {
    // Notice the double $$, this tells php to create a variable with the same name as key
    $$key = $setting; 
}

var_dump($calendar); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:10:13.590

您可以将文件存储为 json 或 php 序列化格式吗？

# mysql - mysql查询加入

> ID：10214404
> 
> 赞同：0
> 
> 时间：2012-04-18T17:08:42.683
> 
> 标签：mysql

嘿我有两个表我想从两个表中得到组合结果结构是这样的

表A

```
id        user
1         2
2         2
3         3
4         2
5         2
6         3 
```

表B

```
id       credit
1        45
2        43
3        23
4        25
5        26 
```

在两个表 id 中都是 autoincrement 和 tableA.user=tableB.id 所以我试图执行这个查询，但它返回空结果

```
sql_query("SELECT * from tableA join tableB  ON tableA.user=tableB.id " ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:10:16.177

您缺少 *

```
SELECT * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:10:38.580

您在 SELECT 和 FROM 之间错过了 *

```
sql_query("SELECT * from tableA join tableB  ON tableA.user=tableB.id " ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:43:09.273

试试这个：

```
sql_query("SELECT * from tableA inner join tableB  ON tableA.user=tableB.id where tableA.user=tableB.id" ); 
```

这只会给你那些满足你加入条件的记录。

# c# - Metro Style Apps 的自定义图表解决方案 - 您会推荐哪种方式？

> ID：10214406
> 
> 赞同：1
> 
> 时间：2012-04-18T17:08:47.223
> 
> 标签：c#, charts, windows-8, microsoft-metro, windows-runtime

我正在寻找构建一个[Windows 8 Metro Style 应用程序](http://msdn.microsoft.com/en-us/windows/apps/)（带有 XAML 的 C#），该应用程序需要能够创建各种类型的图表（折线、条形、饼形、气泡等），这些图表具有响应性和动态性，并且能够与用户一起发展交互（例如，触摸特定数据点可为您提供有关该点的信息，用手指旋转饼图，使用两根手指即时调整图表大小）。

我对可用的内置/第三方解决方案的类型进行了一些研究，并遇到了与 .NET 4 一起打包的[Microsoft Chart Controls](http://archive.msdn.microsoft.com/mschart)。不幸的是，此 API 本身不适用于[WinRT](http://msdn.microsoft.com/en-us/library/windows/apps/br211377)。因此，我很可能会构建自己的自定义解决方案。

所以，我的问题是，您会推荐哪条路径以及为什么要为 Metro Apps 创建自定义图表解决方案？我应该选择 Silverlight 解决方案吗？利用内置[Windows.UI.XAML](http://msdn.microsoft.com/en-us/library/windows/apps/br211377) API 的 Canvas 解决方案？DirectX 11 可能吗？还有什么？请提供您推荐的解决方案的优缺点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:16:09.630

你的目标是什么平台？例如，我不知道 ARM 平台是否有足够好的 GPU 来处理 DX11 解决方案。

dx11 解决方案功能强大，但对于图表来说似乎有点矫枉过正。Silverlight 是 WPF 的一个子集，因此您最好直接使用 XAML API：使用上帝画布，您可以为所欲为。而且我不希望微软支持 Silverlight 太久。

具体来说：XAML 或 JS。两者都很强大。并且将准备好触摸。

# c++ - C++ 编译错误：语法错误：' '

> ID：10214408
> 
> 赞同：2
> 
> 时间：2012-04-18T17:08:55.413
> 
> 标签：c++, qt

我最初聘请某人为我编写一个 dll，我正在使用他给我的编译后的 dll，但它有一个我需要删除的 msgbox 弹出窗口。所以我从代码中删除了它并重新编译。他的代码需要 QtCore 库，所以我下载并安装了它。但是在那个库中我得到了很多错误，所有的错误都是语法错误：`<cv-qualifer>`

我用谷歌搜索了语法错误：`<cv-qualifer>`但这似乎是一个很常见的错误。

出现该错误的每一行都以“ asm volatile(”

我假设 asm 是汇编？我错过了一些我需要编译的东西吗？

任何帮助将不胜感激。

谢谢

编辑：完整的错误代码：错误 C2059：语法错误：'' 这是它发生一次的来源。每次发生它都以 asm volatile 开头

```
asm volatile("0:\n"
             "ldrex %[result], [%[_q_value]]\n"
             "eors %[result], %[result], %[expectedValue]\n"
             "strexeq %[result], %[newValue], [%[_q_value]]\n"
             "teqeq %[result], #1\n"
             "beq 0b\n"
             : [result] "=&r" (result),
               "+m" (_q_value)
             : [expectedValue] "r" (expectedValue),
               [newValue] "r" (newValue),
               [_q_value] "r" (&_q_value)
             : "cc", "memory"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:50:46.473

你在那里有 QT 作为 ARM 的源代码。您是为 ARM 构建的吗？您需要从源代码构建 QT 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:56:04.790

cv 是`const`和/或的标准简写`volatile`。我猜`volatile`关键字是罪魁祸首。

asm volatile 应该指示汇编代码中的副作用，因此不应移动 asm 代码。它看起来像是[Visual Studio 不同的 gcc 扩展。](http://en.wikipedia.org/wiki/Memory_ordering)

试试 __asm volatile 看看会发生什么。不，仍然是 gcc 特定的。

检查[MS 文档](http://msdn.microsoft.com/en-us/library/45yd4tzz.aspx)。他们使用带有 co cv 资格的 __asm。

# android - Android上使用复选框的jQuery移动布局

> ID：10214415
> 
> 赞同：0
> 
> 时间：2012-04-18T17:09:50.273
> 
> 标签：android, jquery-mobile, cordova

我在尝试在 Android 上使用 jQuery mobile 的 UI 进行复选框时遇到了困难。每次在 Android 中加载时，它都会偏离中心加载，但即使在 Eclipse 中，Web 预览也会按照应有的方式显示（如下图所示，左侧是 Eclipse 视图，右侧是模拟器视图） . 我也在尝试修复作为文本框类型=密码的密码字段，到目前为止，我发现的唯一解决方案是使用 jqMobi 的密码框。对此用户界面的任何建议或帮助将不胜感激！谢谢！

![在此处输入图像描述](../Images/0be99f537b35ee8364317f58b3848cab.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:05:12.407

对于 cehckbox，我只是将 CSS 设置为不显示复选框，这样 Android 就知道不绘制任何东西，让 jQuery mobile 仍然为我创建按钮。现在效果更好。

# java - 如何将布尔参数传递给 HQL 新构造函数

> ID：10214418
> 
> 赞同：3
> 
> 时间：2012-04-18T17:10:00.703
> 
> 标签：java, hibernate, jpa

**情况**：我有一个包装对象**Subject的对象****SubjectRow**（对象 Subject 是可持久实体）。我需要直接在 HQL 中创建新的包装器对象。

 **```
public class SubjectRow{
    Subject subject;
    String myString;
    boolean myBoolean;

    public SubjectRow(SubjectSch subject, String myString) {
        this.subject = subject;
        this.myString = myString;
    }

    public SubjectRow(SubjectSch subject, boolean myBoolean) {
        this.subject = subject;
        this.myBoolean = myBoolean;
    }

} 
```

**带有字符串的构造函数的 HQL（它应该像它应该的那样工作）：**

```
SELECT new package.SubjectRow(s, 'myString') FROM Subject s 
```

**问题**。有时我需要调用这个接受布尔值而不是字符串的包装器的另一个构造函数的问题。我尝试了同样的方法

```
SELECT new package.SubjectRow(s, true) FROM Subject s 
```

但是 Hibernate 抱怨它在 SubjectRow 类中找不到合适的构造函数。当然，我可以传递字符串，然后进行适当的强制转换——但它太丑了。

**问题**：我应该如何更改我的 HQL 和/或构造函数以直接传递此布尔参数（可以改用布尔参数）？

**“解决方案”**。因为我无法找到如何正确传递布尔值，所以我必须稍微修改我的域对象。我只是从 SubjectRow 中删除了这个布尔属性，而是创建了作为原始对象子对象的 SubjectRowFalse 和 SubjectRowTrue 类。现在只使用两个 HQL

SELECT new package.SubjectRowTrue(s) FROM Subject s

SELECT new package.SubjectRowFalse(s) FROM Subject s

当然，这只是一种解决方法，而不是原始问题的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T15:20:27.387

我不是 100% 确定，但我认为您可能需要使用布尔对象而不是布尔原语。**

# css - 在 html 滑块上定位 div 层时遇到问题

> ID：10214420
> 
> 赞同：0
> 
> 时间：2012-04-18T17:10:05.197
> 
> 标签：css, image, html, slider

我正在尝试使用以下方法将图像放置在滑块顶部：

CSS：

```
#orbitDemo { background: url(../../images/orbit/spinner.gif) no-repeat center center 
#3c3c3c; height: 300px;  }
#orbitDemo.orbit { height: auto; }
#orbitDemo img, #orbitDemo div { display: none; }
#orbitDemo.orbit img, #orbitDemo.orbit div { display: block;}

@media handheld, only screen and (max-width: 767px) {

dl.nice.tabs.mobile { margin-bottom: 0px; }
.nice.tabs.mobile dd a { padding: 12px 20px; }
div.foundation-header h1 { font-size: 32px; font-size: 3.2rem; }
}

#container 
{
margin-left: auto;
margin-right: auto;
width: 950px;
padding: 5px 15px 20px 15px;
border: 1px solid;
border-top: 1px solid #CCC;
border-left: 1px solid #CCC;
border-right: 1px solid #BBB;
border-bottom: 1px solid #BBB;
border-radius: 4px;
-moz-border-radius: 4px;
box-shadow:inset 0 0 2px #ccc;
background: #fff;
margin-bottom: 15px;
}

#image
{
position: absolute;
display: none;
z-index: 2000; // might need to be changed if you cant see it
} 
```

HTML：

```
<div id="sliderbg">
    <div class="container">
        <div class="row">           
            <div id="orbitDemo">

        <div>
        <a href="<?php echo $link1; ?>" >
            <img src="<?php echo $slide1 ;?>" alt="Slider" />
        </a>
        </div>

        <div>
        <a href="<?php echo $link2; ?>">
            <img src="<?php echo $slide2 ;?>" alt="Slider" />
        </a>
        </div>

        <div>
        <a href="<?php echo $link3; ?>">
            <img src="<?php echo $slide3 ;?>" alt="Slider" />
        </a>
        </div>

        <div id="image">
            <img src="<?php echo $slide0 ;?>" (This is the image over the slider.)
        </div>

            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
jQuery(document).ready(function ($) {
$(window).load(function() {
$('#orbitDemo').orbit({
     animation: 'horizontal-push',
     bullets: false,
 });
 });
 }); 
```

这很好用。我没有遇到任何问题，只是它将我想要的图像呈现在最后作为另一面。我会以错误的方式解决这个问题吗？我怎样才能让它跳过这张图片或重写它，使它看起来不像另一张幻灯片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T06:26:09.980

我想出了答案。

我应该做的是结束滑块 div 层并用我的图像在滑块外部定义新的，然后告诉它根据滑块偏移自己，如下所示：

```
<div id="sliderbg">
    <div class="container">
        <div class="row">           
            <div id="orbitDemo">

        <a href="<?php echo $link1; ?>" >
            <img src="<?php echo $slide1 ;?>" alt="Slider" />
        </a>

        <a href="<?php echo $link2; ?>">
            <img src="<?php echo $slide2 ;?>" alt="Slider" />
        </a>

        <a href="<?php echo $link3; ?>">
            <img src="<?php echo $slide3 ;?>" alt="Slider" />
        </a>

     </div>

        <div id="image">
            <img src="<?php echo $slide0 ;?>"
        </div>

        </div>
    </div>
</div>

<script type="text/javascript">
jQuery(document).ready(function ($) {

var ob = $('#orbitDemo').offset();
$('#image').css({ 'top': ob.top+56, 'left': ob.left+0 }).show();

$(window).load(function() {
$('#orbitDemo').orbit({
     animation: 'horizontal-push',
     bullets: true,
 });
 });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:31:43.470

我不确定我是否知道你的意思，但我认为你可以添加位置：固定到你的图像（例如徽标），并将其定位为顶部、底部、右侧和左侧。

# assembly - 使用递归将字符插入字符串？(MIPS)

> ID：10214421
> 
> 赞同：1
> 
> 时间：2012-04-18T17:10:05.477
> 
> 标签：assembly, mips

我需要获取用户输入的字符，并使用递归将其插入到正确字母位置的字符串中，然后请求另一个字符。一次只能输入一个字符。

我认为一个好方法是扫描字符串，当输入的字符与字母字符串中的字符匹配时，然后插入它。但是我无法将其放入代码中。我还必须使用递归（堆栈、$jal、$jr $ra），但我并不完全熟悉如何使用它。

到目前为止，这是我的代码：

```
 .data

    str: .asciiz "abcdefghijklmnopqrstuvwxyz .space 30" 
    input: .asciiz "Please input a letter: "
    error1: .asciiz "Error! Please only enter one lowercase letter!"
    print1: .asciiz "The string is: "

    .text

    main:
    la $s0,0
    li $v0,4
    la $a0,input
    syscall

    loop:
    li $v0,8
    syscall
    move $t0,$v0
    blt $t0,61,error #if less than a
    bgt $t0,80,error #if more than z
    bge $t0,0x50,print #when user enters P, print

    loop2:
    lb $t2,str($s0) #load first byte of string
    bge $t0,$t2,store #if input char=string char, store it
    addi $s0,$s0,1 #next char in string
    j loop

    store:
    sw $t0,str($s0) #store char in string
    addi $s0,$s0,1 #next char in string
    j loop

    error:
    li $v0,4
    la $a0,error1 #print error message
    syscall
    j loop #jump back to loop

    print:
    li $v0,4
    la $a0,print1 #print dialogue
    syscall
    li $v0,4
    la $a0,str #print string
    syscall 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:07:40.927

在解决任何其他问题之前，您需要明确此插入应该如何工作。您将获取一个字符并将其插入到预先存在的字符串中，对吗？如果是这样，那么这意味着您需要创建一个填充字符串的可修改缓冲区。该`.space`指令会做。此外，您需要分配一个大缓冲区，因为您将插入字符。最后，插入字符意味着转换，因此请为此做好准备。

目前，您有：

```
str: .asciiz "abcdefghijklmnopqrstuvwxyz" 
```

我猜你要修改那个字符串，但字符串声明并不是要修改的。你可能可以修改它，甚至让你的程序工作，但我不建议这样做。如果您声明多个字符串（并且您确实这样做了），它们很可能会被连续放置，然后您将覆盖数据。在尝试询问用户输入之前，我会专注于解决所有问题。

然后你有以下内容：

```
loop:
    li $v0,8
    syscall
    move $t0,$v0 
```

`syscall 8`读取一个字符串，而不是一个字符。`syscall 12`读取一个字符。在您尝试从控制台读取字符串时，您没有在`$a0`. 然后您尝试将系统调用的结果移动到临时寄存器中，但该调用不返回任何内容。它只将输入字符串放入缓冲区。

# android - 为整个应用程序设置全局错误消息

> ID：10214427
> 
> 赞同：0
> 
> 时间：2012-04-18T17:10:21.297
> 
> 标签：android, android-layout, android-intent

如何为整个应用程序设置全局错误消息？

截至目前，我在每个活动的布局中添加了一个文本设置为“”的 TextView，当发生一些错误时，我将该错误消息添加到该 TextView 并将其显示给用户。我不认为在每个活动的布局中添加一个空的 TextView 是一个好方法，因此我正在考虑只在某个地方添加一个 TextView，它可以在所有活动的布局中显示错误消息。

或者，甚至可能是添加空 Textview 之外的其他方法。

请建议。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:13:14.460

您可以定义一个 xml 文件，并且可以通过代码或通过 xml 包含该 xml 文件。

通过xml，您可以[包含](http://developer.android.com/training/improving-layouts/reusing-layouts.html)以下代码：

```
<include layout="@layout/name"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent" /> 
```

通过代码你可以像下面这样膨胀:::

```
View view; 
LayoutInflater inflater = (LayoutInflater)   getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
view = inflater.inflate(R.layout.mylayout, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T10:58:08.327

到目前为止，更容易、更好地应用于您的应用程序外观的是 AlertDialog。

使用 alertdialog 构建器非常容易实现。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage(myErrorMessage)
   .setCancelable(true)
   .setPositiveButton("OK", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {
            dialog.cancel();
       }
   });  

 AlertDialog alert = builder.create();
  alert.show(); 
```

它创建了一个弹出警报，只需一个按钮即可将其关闭。您不必在布局上添加任何内容，您可以在代码的任何位置执行它。

您还可以设置更多属性，使其对用户来说更加美观和信息丰富，例如标题或图标等。

```
 String theErrorMessage = "The error Message";

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage(theErrorMessage)
    .setTitle("ERROR!")
    .setIcon(R.drawable.ic_launcher)
       .setCancelable(true)
       .setPositiveButton("OK", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
           }
       });  

     AlertDialog alert = builder.create();
     alert.show(); 
```

与文本视图相比，我会更好地尝试此功能。这是上面代码的结果。

![屏幕截图 1](../Images/3ccc27e86e4eb2cb7bb16d910b71c515.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:20:52.410

您可以使用[对话框](http://developer.android.com/guide/topics/ui/dialogs.html)来显示您的错误消息。

# z3 - 如何在linux下从Z3编译示例代码

> ID：10214432
> 
> 赞同：2
> 
> 时间：2012-04-18T17:10:50.143
> 
> 标签：z3

我下载了 z3 for linux 版本，并试图让它在 linux 下工作，但它无法编译（我正在使用 gcc 编译示例代码）。我从 gcc 编译器获得了未定义引用的列表。我相信我在编译代码时指定了 lib 文件位置。任何人都可以提供我需要的库以使其正确编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:38:48.823

Z3 for linux 编译使用

> gcc (Ubuntu/Linaro 4.6.1-9ubuntu3) 4.6.1

如果您使用不兼容的 gcc 版本，您可能会遇到链接错误。

您是否设法编译了 Z3 附带的 C 示例？它位于：`z3/examples/c`

要编译它，你必须执行

> ./build.sh

如果它不起作用，可能是因为您使用的是不兼容的 GCC 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T17:54:29.850

在xubuntu 11.10（相同的 gcc 版本）中，**我**`-lz3-gmp`在. 这不是 gcc 第一次向我投掷，因为不是在最后。**`test_capi.c``-l`**

 **`gcc -fopemmp -o test_capi -I ../../include -L ../../lib test_capi.c -lz3-gmp`

它工作正常。**

# java - 用 Java 读取 XSD 文件

> ID：10214434
> 
> 赞同：1
> 
> 时间：2012-04-18T17:10:55.213
> 
> 标签：java, xml, web-services, xsd, schema

我有一个工作流 Web 服务，其中有多个活动作为服务方法公开。这些服务方法具有各种参数。在 Java 中，我需要知道这些参数是什么。

所以我想有一个 XSD 模式，我应该能够从中获取我想知道的信息。有没有办法从 Java 中的 XSD 文件中读取元素？我的 XSD 基本上是这样的：

```
<xs:element name='servicemethod'>
    <xs:complexType>
        <xs:sequence><xs:element name='parameterIWantToKnow'/></xs:sequence>
   </xs:complexType>
</xs:element> 
```

在 Java 中，我确实知道“servicemethod”，但我想知道嵌套在这个 servicemethod 元素中的元素名称。

或者是否有类似将 XML 解析为 JSON 的东西，因为我之前在 Java 中使用 JSON 做过类似的事情。

很感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T08:56:07.880

谢谢迈克尔。

也许我的问题有点令人困惑。但更明确地说：我有一个工作流，在 IIS 中作为服务托管。我所有的工作流程检索活动都公开为 Web 服务操作。但是所有这些操作都有参数，现在在 Java 中我想知道这些参数是什么。所以我想，通过阅读 XSD 文件，我可以检索这些名称吗？因为我的 XSD 是这样的：

```
<xs:element name='servicemethod'>
    <xs:complexType>
        <xs:sequence><xs:element name='parameterIWantToKnow'/></xs:sequence>
    </xs:complexType>
</xs:element>. 
```

我确实知道 Java 中的 servicemethod 名称，现在我想知道嵌套在这个 servicemethod 元素中的元素名称。顺便说一句，我的 XSD 只能通过 URL 获得，而不是作为我电脑上的文件。

顺便说一句，我既不是 Java 专家也不是 XML 专家，很抱歉问了一些对你来说可能没有意义的问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T07:55:38.617

这取决于你想对数据做什么（“消费”它不是很明确......）。XML Schema 是作为一组 XML 文档编写的，为了理解它，您通常需要该集合中的所有文档。要使用模式中的信息来回答合理的问题，例如“一个段落元素是否可以包含另一个段落元素？”，您将真的希望从已编译的模式（所谓的模式组件模型）而不是原始 XML 中工作. 有一个用于执行此操作的 Xerces API，称为 XSOM，或者 Saxon-EE 产品具有生成模式组件模型的 XML 表示的工具，可以使用 XPath 或 XQuery 进行处理。

# jquery - 从 MVC3 中的控制器向 AJAX 调用返回错误

> ID：10214435
> 
> 赞同：2
> 
> 时间：2012-04-18T17:10:57.277
> 
> 标签：jquery, ajax, asp.net-mvc-3

我有一个看起来像这样的 ajax 调用：

```
 $.ajax({
                url: '@Url.Action("SaveStudy")',
                type: "POST",
                contentType: 'application/json',
                data: JSON.stringify({
                    ....irrelevant data
                }),
                success: function (result) {

                      ....irrelevant data

                },
                error: function (result) {

                    //alert("I had an error");
                }
            }); 
```

当我的控制器中的逻辑发送回 HttpStatusCodeResult 时，到达了该 ajax 调用的错误部分。控制器代码如下所示：

```
 if (Participants==null)
            {
                return new HttpStatusCodeResult(409, "No Players were selected!");
            } 
```

有没有办法让错误消息“未选择玩家”显示在我的 AJAX 调用的错误部分的警报（或任何东西，真的）中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:12:56.727

查看[jQuery.ajax 文档](http://api.jquery.com/jQuery.ajax/)。从 jQuery 1.5 开始，您可以使用状态码来获取该信息。

```
$.ajax({
  statusCode: {
    404: function() {
      alert("page not found");
    }
  }
}); 
```

# ios5 - 关于翻页 iOS

> ID：10214440
> 
> 赞同：0
> 
> 时间：2012-04-18T17:11:22.353
> 
> 标签：ios5, effect, page-curl

对不起，伙计们，我必须解决一个问题。我想在我的应用程序中实现 Apple 通过其应用程序 iBook 向我们展示的著名效果 Page curl。我读到 API 不是公开的（非常非常糟糕......）。那么问题来了：真的不可能简单的实现翻页效果吗？谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:57:48.220

如果您使用的是 stroyboard。然后只需在视图之间创建一个segue，并在右侧工具栏中选择部分卷曲作为过渡样式。（完全没有编码）

或者，如果它是一个 modalviewController，则执行一些操作，例如将视图上的 animationtransition 属性设置为 uianimationtrasisionstylecurlup 并随后调用 presentmodalviewcontroller 和你很高兴。在这种情况下，您当然必须调用返回dismissmodalview。

# c++ - 用于对继承类中的子类进行操作的 C++ 设计模式

> ID：10214443
> 
> 赞同：0
> 
> 时间：2012-04-18T17:11:26.933
> 
> 标签：c++, design-patterns

我有一个抽象基类，它对所有派生类强制执行某些操作。除此之外，我想强制执行某些特定于派生类中声明的子类的其他操作。

以下是一个最小示例：

```
class Base {
    public:
        virtual void init() = 0;
        virtual void reset() = 0;
};

class Derived1 : public Base {
    class Data {
        int *x1;
    public:
        Data() {
            x1 = NULL;
        }

        void alloc(int num) {
            x1 = new int[num];
        }

        ~Data() {
            delete[] x1;
            x1 = NULL;
        }
    } data;

public:
    void init() { ... }
    void reset() { ... }

    void resetData() { 
        data.~Data(); 
    }
};

class Derived2 : public Base {
    class Data {
        float *x2;
    public:
        Data() {
            x2 = NULL;
        }

        void alloc(int num) {
            x2 = new float[num];
        }

        ~Data() {
            delete[] x2;
            x2 = NULL;
        }
    } data;

public:
    void init() { ... }
    void reset() { ... }

    void resetData() { 
        data.~Data(); 
    }
}; 
```

在上面的示例中，Base 对所有派生类强制执行 init() 和 reset() 方法。

除此之外，我想强制所有派生类都有

1.  命名数据的成员变量和
2.  `resetData()`调用此变量的析构函数的方法
3.  一个被调用的方法`Data &getData()`，它获取对变量的引用

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:13:34.913

> *   命名数据的成员变量和
> *   调用此变量的析构函数的名为 resetData() 的方法
> *   一个名为 Data &getData() 的方法，它获取对变量的引用

在我看来，如果它们对于所有派生类都很常见，那么您在基类中需要这些。

```
class Base {
    public:
        Data data;
        void resetData();  //if data is not a pointer, are you sure you want 
                           //to call its destructor?
                           //this will lead to undefined behavior when
                           //Base is destroyed, as data will automatically 
                           //be freed
        Data& getData();
        virtual void init() = 0;
        virtual void reset() = 0;
}; 
```

您的课程仍然是抽象的，以防万一您认为这是一个问题。

**没有这种方法**：

*   没有办法强制派生类声明成员
*   您可以查看**模板方法模式**，但同样，我不明白这一点
*   你可以有一个纯 virtual `getData`，但我还是不明白这一点

从设计的角度来看，您应该将所有这些都包含在您的基类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:28:17.420

我将在 Data 类型上对基类进行模板化，并将 Data 定义移出派生类。缺点是 Base 不再只有一种类型。

```
template <class Data>
class Base {
public:
  virtual ~Base() {}
  virtual void init() = 0;
  virtual void reset() = 0;
  virtual Data& getData() {
    return data;
  }
  virtual void resetData() {
    data.reset();
  }

protected:
  Data data;
};

class Data1 {
  int *x1;
public:
  Data1() {
    x1 = 0;
  }

  void alloc(int num) {
    x1 = new int[num];
  }

  void reset() {
    delete[] x1;
    x1 = 0;
  }

  ~Data1() {
    delete[] x1;
    x1 = 0;
  }
};

class Derived1 : public Base<Data1> {
public:

public:
  void init() { }
  void reset() { }
};

class Data2 {
  float *x2;
public:
  Data2() {
    x2 = 0;
  }

  void reset() {
    delete[] x2;
    x2 = 0;
  }

  void alloc(int num) {
    x2 = new float[num];
  }

  ~Data2() {
    delete[] x2;
    x2 = 0;
  }
};

class Derived2 : public Base<Data2> {
public:
public:
  void init() { }
  void reset() { }
  Data2& getData() {
    return data;
  }
  void resetData() {
    data.reset();
  }
}; 
```

另一种方法是从单个基类继承 Data 类。在这种情况下，您将无法强制成员变量的名称为数据。

```
class IData {
public:
  virtual ~IData() {}
  virtual void reset() = 0;
};

class Base {
public:
  virtual ~Base() {}
  virtual void init() = 0;
  virtual void reset() = 0;
  virtual IData& getData() = 0;
  virtual void resetData() = 0;
};

class Derived1 : public Base {
  class Data : public IData {
    int *x1;
  public:
    Data() {
      x1 = 0;
    }

    void alloc(int num) {
      x1 = new int[num];
    }

    void reset() {
      delete[] x1;
      x1 = 0;
    }

    ~Data() {
      delete[] x1;
      x1 = 0;
    }
  } data;

public:
  void init() { }
  void reset() { }

  IData& getData() {
    return data;
  }
  void resetData() {
    data.reset();
  }
};

class Derived2 : public Base {
  class Data : public IData {
    float *x2;
  public:
    Data() {
      x2 = 0;
    }

    void reset() {
      delete[] x2;
      x2 = 0;
    }

    void alloc(int num) {
      x2 = new float[num];
    }

    ~Data() {
      delete[] x2;
      x2 = 0;
    }
  } data;

public:
  void init() { }
  void reset() { }
  IData& getData() {
    return data;
  }
  void resetData() {
    data.reset();
  }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T07:43:23.920

感谢您的回复。这就是我想出的。我知道我打破了我原来的要求，即数据必须是派生类的子类，但以下设计模式确保所有派生类都有一个`data`成员变量，每个变量类型不同，但同样，每个都有一些基本方法对他们强制执行。我认为这是@emsr 在他的评论之一中所建议的。

现在`resetData()`也以单独的方法完成。感谢@LuchianGrigore 指出显式调用析构函数可能存在的问题。现在这个方法显式地代替了。虚拟析构函数也将调用相同的函数。我知道我不应该从析构函数中调用虚函数，但是通过明确设置函数的范围，我希望在这里避免任何歧义。（或者这也是一个问题？）

```
struct Data {
    virtual void resetData() = 0;
    virtual ~Data() {}
};

template<typename _DT>
class Base {
protected:
    _DT data;

public:
    _DT &getData() {
        return data;
    }

    void resetData() {
        data.resetData();
    }

    virtual void init() = 0;
    virtual void reset() = 0;
};

struct Data1 : public Data {
    int *x;

    Data1() {
        x = NULL;
    }

    void alloc(int num) {
        x = new int[num];
    }

    virtual void resetData() {
        delete[] x;
        x = NULL;
    }

    virtual ~Data1() {
        Data1::resetData();
    }

};

class Derived : public Base<Data1> {
public:
    virtual void init() {
        // Carry out other init operations
        Data1 &x = getData();
        x.alloc(10);
    }

    virtual void reset() {
        // Carry out other reset operations
        data.resetData();
    }
}; 
```

# eclipse - 在 Eclipse 上重构包的问题

> ID：10214445
> 
> 赞同：0
> 
> 时间：2012-04-18T17:11:37.363
> 
> 标签：eclipse, macos, blackberry, blackberry-jde

我在我的项目中使用 org.json.me（Mac 上的 eclipse jde 7.0）。为了提供对 jde 5.0 的兼容性，我将包名重新分解为 org.json.compatibility。问题是重构之后eclipse不识别导入org.json.compatibility。我做错了什么？我想，我没有错过任何东西。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T09:29:41.497

要为 OS5 提供兼容性，您需要在 Eclipse 中创建一个新的 BlackBerry 项目。然后，您可以在项目构建路径中包含 org.json.me 的源代码，而无需重构包名称。

# visual-studio - 从工具箱中导出我的拖放代码

> ID：10214449
> 
> 赞同：2
> 
> 时间：2012-04-18T17:11:53.487
> 
> 标签：visual-studio, visual-studio-2010, visual-studio-2008

我收集了一些代码片段，这些代码片段放在我的 Visual Studio 2008 工具箱 > 常规选项卡中。

有没有办法导出这些片段并将其导入到 Windows Server 2008 上的 Visual Studio 2008 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:41:42.550

您是否尝试从旧 VS 复制代码片段目录并将其粘贴到新 VS 中？您可以通过进入代码片段管理器（*工具 -> 代码片段管理器*）查看目录路径。还有一个导入按钮。

# javascript - 错误：defineAlreadyDefined

> ID：10214452
> 
> 赞同：7
> 
> 时间：2012-04-18T17:12:13.500
> 
> 标签：javascript, dojo, requirejs

我收到此错误：`Error: defineAlreadyDefined`，仅在 dojo 中发生。

**索引.php**

```
<script data-main="app" src="require.js"></script> 
```

* * *

**应用程序.js**

```
require({
    paths : {
        dojo : 'http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dojo/dojo'
    }
});

require([ 'dojo' ], function() {
   //something
}); 
```

我发现了一个类似的问题，但没有帮助我：

[当通过ajax多次加载dojo.js时得到错误：defineAlreadyDefined](https://stackoverflow.com/questions/9784314/when-dojo-js-loaded-via-ajax-multiple-times-get-error-definealreadydefined)

编辑：我进行了搜索，我认为我尝试使用 requiJS 和 Dojo 的方式是错误的。 [http://dojotoolkit.org/features/1.6/async-modules](http://dojotoolkit.org/features/1.6/async-modules)

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T00:31:38.473

为了使用带有 dojo 的外部加载器，您需要跳过定义 AMD 加载器的 dojo/dojo.js 文件。您的要求配置应具有以下内容：

```
require({
    packages: [
        {
            name: 'dojo',
            location: 'dojo',
            main:'dojo/main' 
        }
    ]
}); 
```

然而，dojo 加载器在加载 jQuery 插件方面与 requireJS 一样出色，并且它附带了一些额外的插件，例如`dojo/has`. 我会认真考虑使用它的加载器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T22:29:02.730

我不确定你想在这里完成什么，但[Dojo 实现了 requireJS](http://dojotoolkit.org/reference-guide/1.7/loader/amd.html)。因此你不需要requireJS。

对于 Dojo 库的正常使用，您会做的是：

```
//call dojo script
<script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js"></script>
<script>
    var dojoConfig = (function(){
        return {
            async: true,
            //in case you wanted to use your own library
            paths: [{
                name: "location/library"//your library path
            }]
        };
    })();       

    require([
        "dojo/parser",
        "name/something",//calling 'somethong' from library
        "dojo/domReady!"
    ], function(parser, something /*your library obj*/){
        //your logic
        parser.parse();
        something.do();
    });
});
</script> 
```

# android - 线程在离开时导致错误消息并返回游戏应用程序

> ID：10214459
> 
> 赞同：0
> 
> 时间：2012-04-18T17:12:26.277
> 
> 标签：android, multithreading

在玩完我的线程游戏然后点击应用程序图标然后再次点击我的应用程序图标后回家后，我收到“挖掘机意外退出错误”，它让我回到一般应用程序屏幕，我可以点击我的应用程序图标再次在这一点上，它把我带到了游戏中并且运行良好。我希望当我重新启动我的应用程序时，我应该对线程做一些事情来防止出现令人讨厌的消息。也许在一个`onStop`或`onPause`方法。这是我的线程代码片段：

```
getHolder().addCallback(
    new SurfaceHolder.Callback() {
        //@Override
        public void surfaceDestroyed(SurfaceHolder holder) {
            boolean retry = true;
            gameLoopThread.setRunning(false);
            while (retry) {
                try {
                    gameLoopThread.join();
                    retry = false;
                }
                catch (InterruptedException e) {}
            }
        }

        //@Override
        public void surfaceCreated(SurfaceHolder holder) {
            screenWidth =gameView.getWidth(); 
            screenHeight = gameView.getHeight(); 
            createSprites();
            gameLoopThread.setRunning(true);
            gameLoopThread.start();
        }

        //@Override
        public void surfaceChanged(SurfaceHolder holder, int format,
            int width, int height) {
        }
    }); 
```

我有一个游戏线程类：

```
import android.graphics.Canvas;
import android.view.SurfaceHolder;
public class GameLoopThread extends Thread {

    static final long FPS = 10;
    private GameView view;
    private boolean running = false;
    public GameLoopThread(GameView view) {
        this.view = view;
    }
    public void setRunning(boolean run) {
        running = run;
    }

    @Override
    public void run() {
        long ticksPS = 200 / FPS;
        long startTime;
        long sleepTime;
        while (running) {
            Canvas c = null;
            startTime = System.currentTimeMillis();
            try {
                c = view.getHolder().lockCanvas();
                synchronized (view.getHolder()) {
                    view.onDraw(c);
                }
            } finally {
                if (c != null) {
                    view.getHolder().unlockCanvasAndPost(c);
                }
            }
            sleepTime = ticksPS - (System.currentTimeMillis() - startTime);
            try {
                if (sleepTime > 0)
                    sleep(sleepTime);
                else
                    sleep(10);
            } catch (Exception e) {}
        }
    }
} 
```

我尝试的一件事是将surfaceDestroyed方法更改为just；

```
public void surfaceDestroyed(SurfaceHolder holder) {
  gameLoopThread.setRunning(false);
} 
```

但这没有帮助。

# grails - 如何在grails spring security自定义UserDetailsS ervices类中获取url参数？

> ID：10214461
> 
> 赞同：3
> 
> 时间：2012-04-18T17:12:37.800
> 
> 标签：grails, login, spring-security, url-mapping

我有两个登录页面，一个用于用户，另一个用于管理员。为了知道谁在尝试登录，我想到了一个 url 模式，比如`/app/admin/login`and `/app/user/login`。我不能按子域更改。这是一个使用 spring 安全性的 grails 应用程序。因此默认情况下，所有登录请求都发送到`/j_spring_security_check`url。我应该怎么做才能将登录提交 url 从$context 可以是用户或管理员 `/j_spring_security_check`的位置更改？`/app/$context/login`

我面临的另一个问题是，如何获取我的自定义 UserDetailsS​​ervices 类的请求参数？该类`params`中不可用，因此我不能`params.context`像在 Filters 类中那样编写。

对此的任何见解都将非常有帮助。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:33:42.850

1.  [这篇](http://mark.koli.ch/2010/07/spring-3-and-spring-security-setting-your-own-custom-j-spring-security-check-filter-processes-url.html)文章可能有助于解决 j_spring_security 问题。解决方案不是直接针对 Grails，但我看到 Grails 允许您以任何您喜欢的方式自定义 Spring。

2.  对于有关参数的服务层问题：参数是控制器的隐式 HttpRequest.parameters 对象。永远不要试图在服务层中期望任何 Http 感知。

所以我们不能在服务层引用它是一件好事。我的建议是将它作为参数传递给服务类方法。

# vb.net - VB 和 SQL 中的数据库导航

> ID：10214462
> 
> 赞同：0
> 
> 时间：2012-04-18T17:12:40.390
> 
> 标签：vb.net, sql-server-2008, vb.net-2010

我正在使用 VB.net 2010 和 sql server 2008。我想拥有像 next、previous、last、first 等数据导航按钮。我正在使用数据读取器对象来完成数据库操作。现在，我想显示下一个数据库行，按下下一个按钮，与上一个等相同。我该怎么做？提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:47:54.370

不幸的是，您无法使用 DataReader 执行您希望执行的操作，因为它从数据库返回只读、只**进**的数据流。

Microsoft 有一些很好的阅读：http: [//msdn.microsoft.com/en-us/library/ms254931%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms254931%28v=vs.90%29.aspx)关于 DataReaders 和 DataAdapters 之间的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T23:23:10.953

如果您使用的是 WinForms，最简单的解决方案是使用 Dataset、BindingSource、DataGridView 和 BindingNavigator：

1.  将数据集添加到您的项目并对其进行配置以提取您想要的数据
2.  将您创建的数据集、用于填充它的 TableAdapter、BindingSource、BindingNavigator 和 DataGridView 从工具箱拖到您正在设计的表单上
3.  BindingSource 绑定到数据集中的数据表，DataGridView 绑定到 BindingSource，BindingNavigator 绑定到 BindingSource
4.  在表单的 Load 事件中，使用 tableadapter 填充数据表

你必须弄清楚细节，但[MSDN上有很多演练](http://msdn.microsoft.com/en-us/library/8zhc8d2f.aspx)

和其他地方

# cryptography - RSA 的安全性如何？

> ID：10214463
> 
> 赞同：20
> 
> 时间：2012-04-18T17:12:40.733
> 
> 标签：cryptography, rsa

我正在使用 RSA 进行加密和解密。我听说它很容易受到攻击。是吗？使用起来有多安全？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-18T17:51:19.687

通常对 RSA 的攻击涉及分解一个大数，这是两个非常大的素数的乘积。这背后的一般想法是，找到素数相当容易，将它们相乘得到一个大数也很容易，但如果你只从那个大数开始，找到因数是*相当*困难的。

当他们还是一家独立公司时，RSA Data Security Inc. 曾面临过保理挑战。IIRC，最后几个奖项是由 RSA DSI 自己的团队赢得的。这些是使用通用数字场筛 (GNFS) 完成的。典型的实现使用大量的工作站几个月左右来建立一个“因子库”。然后（困难的部分）你将它提供给具有大量 RAM 的单台机器（以*TB*为起点）并让它紧缩几周以获得这些因素。

重点是要指出，对 RSA 的最常见攻击具有*非常*高的初始成本（即，获得类似 Cray 超级计算机的东西）才能开始。然而，老实说，我不相信目前有任何机器可以拥有足够的 RAM 甚至可以开始攻击 1024 位 RSA 密钥（更不用说 2048 甚至 4096 位密钥）类型坚持使用）。

当然，还有其他分解方法不需要那么大的机器，但它们的效率不够高，即使充其量，您也需要花费数年的时间来破解 RSA 标准的一个相当小的密钥 - - 例如，512 位。

实际上，RSA 本身的安全性通常是您在设计使用它的系统时最不关心的问题。事实上，几乎所有合理的现代加密算法都是如此。当某些东西被破坏时，它基本上从来没有真正破坏所涉及的基本算法——它是通过发现密钥分配方式的弱点、“社会工程”攻击等。

虽然（正如我所说）这通常适用于加密，但与大多数其他加密相比，RSA 更一致。这仅仅是因为 RSA 的正常用例相对复杂。特别是，您通常*不*希望使用 RSA 来加密大量原始数据。RSA 足够慢，以至于您通常不想使用它来加密大量数据。相反，您通常将 RSA 与一些对称密钥（也称为私钥）加密算法（如 AES）结合使用。

将两者一起使用时，首先要获取要向其发送一些数据的人的公钥。然后，您生成一个大小正确的随机数，用作您选择的对称算法的密钥。您使用 RSA 加密您的随机数并将其发送到目标。然后，您使用该数字作为对称算法的密钥，并使用该对称算法加密实际数据。

这意味着在实际使用中，RSA 有一些不一定适用于大多数对称加密算法的弱点。举一个明显的例子，如果用于为对称算法选择“随机”密钥的方法并不是完全随机的，那么攻击者可能能够找到密钥并解密数据，而根本不会攻击 RSA 加密本身（是的，这是公开发布的真实软件中真正漏洞的来源）。

另请注意，我上面描述的几乎是 RSA 通常使用的最简单的方法。实际系统通常会变得相当复杂，以提供诸如“完美的前向保密” ¹之类的东西。这样一个系统中的 RSA 仍然是完全正常的 RSA，但是使用它的系统的其余部分仍然要复杂得多。

摘要：如果您打算使用 RSA 加密，那么 RSA 本身的安全性可能是您最不关心的问题。从“RSA”到“安全通信系统”的路线有点像希腊神话和基督教圣经的扭曲组合：一个有一千个错误转弯的迷宫，每一个都通向一个看起来完全一样的地方你想去——但任何错误的转折都会让你遭受永恒的折磨和折磨。

* * *

^(1\. 不，我现在不打算描述这个，但我确信在[Crypto.SE](https://crypto.stackexchange.com/questions)上搜索它会找到一些相关的结果。然而，我可能应该补充一点，虽然 RSA 可以在提供 PFS 的系统中使用，但在实践中它是相当不寻常的。)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T17:16:35.617

假设 RSA 对于您的所有实际需求都是安全的。

但这当然取决于您在做什么，如何做以及要防御谁。

如果你想保护你的连接并且你坚持通常推荐的东西，RSA 就足够安全了。

如果你想在 NSA 眼皮子底下进行秘密行动，那你已经输了，因为你必须问这样一个问题。

PS：您可能想查看StackExchange上的[IT-Security站点，了解此类内容。](https://security.stackexchange.com/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-18T17:16:56.417

正确实施（即，如果您使用为您执行此操作的现有库），您的数据通道是安全的。但是，请记住，加密的目的只是让数据通道*不是*整个系统中最薄弱的环节。RSA 会这样做，但您仍然需要担心系统的其他部分以及它们的安全性。

# php - echo 替代 $_GET 请求方法

> ID：10214468
> 
> 赞同：3
> 
> 时间：2012-04-18T17:12:54.993
> 
> 标签：php, get

我知道这种方法：

```
stackoverflow.com/?id=stack

<?php 
   echo $_GET['id'];
   //output: stack
?> 
```

但我想知道如果 url 是这样的，如何获取 $_GET 请求：

```
stackoverflow.com/?stack

<?php 
   echo ???
   //output: stack
?> 
```

请注意，之后的内容`/?`是动态更改的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:16:02.043

您可以使用以下命令获取整个查询字符串（未解析）`$_SERVER['QUERY_STRING']`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:15:25.070

您可以像这样检索 $_GET 的所有值：

```
<?php
foreach($_GET as $key => $value){
 // $key = 'stack';
 // $value = '';
} 
```

但是，您*应该*知道在您的应用程序中可能有哪些值，并为它们进行适当的编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T17:16:09.613

```
<?php
$key = 'stack';
echo array_key_exists( $key, $_GET ) ? $key : NULL;
?> 
```

我刚刚注意到你的评论：

> 注意/之后的内容？是动态变化的。

如果您只想对查询字符串中出现的任何内容进行动态处理，那么有关循环`$_GET`或访问的其他答案`$_SERVER[ 'QUERY_STRING' ]`可能更适合您（实际上取决于您在做什么）。这种情况的另一种可能性是`array_keys( $_GET )`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T17:16:16.753

您可以使用[$_SERVER](http://php.net/manual/es/reserved.variables.server.php)获取有关 URL 的大量信息，例如

```
$_SERVER['QUERY_STRING'];
$_SERVER['REQUEST_URI']; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-18T17:17:11.310

[`$_SERVER['QUERY_STRING']`](http://php.net/manual/en/reserved.variables.server.php)包含您要查找的值。尝试：

```
<?php
echo $_SERVER['QUERY_STRING']; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-18T17:18:35.410

它将是具有空值的 $_GET['stack'] 。

有一个超全局 $_GET 数组。我相信在 php.net 上查看会有所帮助。

[http://localhost/?stack](http://localhost/?stack)

代码：

```
<?php
echo var_dump($_GET); 
```

输出：

```
array(1) {
  ["stack"]=>
  string(0) ""
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-18T17:21:47.953

您可以浏览内容`$_GET`并查看里面的内容。在您的情况下`stack`，将以空字符串作为值的键。

此外，您可以使用[`parse_url`](http://php.net/manual/en/function.parse-url.php)和检查`query`结果中的密钥，这与`$_SERVER['QUERY_STRING']`其他答案中描述的使用相同。

但是，如果您描述了您要实现的目标，也许会有所帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-04-18T17:25:35.360

```
<?php
$d = array_keys($_GET);
echo array_shift($d);
?> 
```

# javascript - 如何在 CSS 弹出窗口中显示 Google 预览按钮？

> ID：10214471
> 
> 赞同：0
> 
> 时间：2012-04-18T17:13:12.497
> 
> 标签：javascript, css

继续，让我知道这是否不可能：

我需要在弹出窗口中显示谷歌图书按钮（此处的文档：[https](https://developers.google.com/books/docs/preview-wizard) ://developers.google.com/books/docs/preview-wizard ）。所以，我想要的是一个弹出窗口，其中包含用户的 google 按钮，以便他们可以单击它并获得 google 的嵌入式查看器弹出窗口。

我使用几个 CSS 类来实现我的弹出窗口：

```
.item-notes {cursor:pointer;}
.item-notes .notes-details {position:absolute; display:none;} 
```

目前，我像这样实现这些类：

```
<div class="link"><a href="#"><img src="images/icon_read.jpg" alt="" /></a> <a href="#">Sample</a></div>
<div class="link item-notes">
<div class="notes-details"><h3>Notes</h3><p>Lorem Ipsum</p></div><a href="#"><img src="images/icon_notes.jpg" alt="" /></a> <a href="#">Notes</a></div> 
```

我的问题是我希望“示例”部分也成为一个弹出窗口，其中包含指向谷歌图书预览的链接（以及其他一些内容，但为了这个问题......

所以，我在“示例”部分尝试这个：

```
<div class="link item-notes">
<div class="notes-details">
<script type="text/javascript" src="http://books.google.com/books/previewlib.js"></script>
<script type="text/javascript"> GBS_insertPreviewButtonPopup(['ISBN:9780596527068']);</script></div>
<a href="#"><img src="images/icon_read.jpg" alt="" /></a> <a href="#">Sample</a></div> 
```

但是，该脚本并没有包含在弹出窗口中，而是链接到另一个包含 Google 预览按钮的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T18:42:11.177

可悲的事实是，这是不可能的。我什至向整个 Web 开发团队提出了这个问题，他们证实了这一点。您无法在 css 弹出窗口中使用 javascript 按钮。两者中的一个总是中断。

# jquery - jQuery UI 菜单栏不起作用

> ID：10214474
> 
> 赞同：1
> 
> 时间：2012-04-18T17:13:16.753
> 
> 标签：jquery, jquery-ui, jquery-ui-menubar

我从这里得到了代码，从[这里](http://view.jqueryui.com/menubar/)[得到](http://view.jqueryui.com/menubar/demos/index.html#menubar|default)了相关文件。我只是改变了路径，只保留了一个菜单栏，它对我不起作用。这是我能看到的： ![在此处输入图像描述](../Images/5c5f75c6d155cb19a392612ac9d63af4.png)

这是我的代码：

在 HTML 头中：

```
<link rel="stylesheet" href="Rules/navbar/jquery.ui.all.css" />
<script src="jquery-1.7.1.js"></script>
<script src="Rules/navbar/jquery.ui.core.js"></script>
<script src="Rules/navbar/jquery.ui.widget.js"></script>
<script src="Rules/navbar/jquery.ui.position.js"></script>
<script src="Rules/navbar/jquery.ui.button.js"></script>
<script src="Rules/navbar/jquery.ui.menu.js"></script>
<script src="Rules/navbar/jquery.ui.menubar.js"></script>
<script>
$(function() {
    function select(event, ui) {
        $("<div/>").text("Selected: " + ui.item.text()).appendTo("#log");
        if (ui.item.text() == 'Quit') {
            $(this).menubar('destroy');
        }
    }
    $("#bar1").menubar({
        position: {
            within: $("#demo-frame").add(window).first()
        },
        select: select
    });

    $(".menubar-icons").menubar({
        autoExpand: true,
        menuIcon: true,
        buttons: true,
        position: {
            within: $("#demo-frame").add(window).first()
        },
        select: select
    });

    $("#bar3").menubar({
        position: {
            within: $("#demo-frame").add(window).first()
        },
        select: select,
        items: ".menubarItem",
        menuElement: ".menuElement"
    });
});
</script>
<style>
    #bar1, #bar2 { margin: 0 0 4em; }
</style> 
```

在 HTML 正文中：

```
<div class="demo">

<ul id="bar2" class="menubar-icons">
    <li>
        <a href="#File">File</a>
        <ul>
            <li><a href="#Open...">Open...</a></li>
            <li class="ui-state-disabled">Open recent...</li>
            <li><a href="#Save">Save</a></li>
            <li><a href="#Save as...">Save as...</a></li>
            <li><a href="#Close">Close</a></li>
            <li><a href="#Quit">Quit</a></li>
        </ul>
    </li>
    <li>
        <a href="#Edit">Edit</a>
        <ul>
            <li><a href="#Copy">Copy</a></li>
            <li><a href="#Cut">Cut</a></li>
            <li class="ui-state-disabled">Paste</li>
        </ul>
    </li>
    <li>
        <a href="#View">View</a>
        <ul>
            <li><a href="#Fullscreen">Fullscreen</a></li>
            <li><a href="#Fit into view">Fit into view</a></li>
            <li>
                <a href="#Encoding">Encoding</a>
                <ul>
                    <li><a href="#Auto-detect">Auto-detect</a></li>
                    <li><a href="#UTF-8">UTF-8</a></li>
                    <li>
                      <a href="#UTF-16">UTF-16</a>
                      <ul>
                         <li><a href="#Option 1">Option 1</a></li>
                         <li><a href="#Option 2">Option 2</a></li>
                         <li><a href="#Option 3">Option 3</a></li>
                         <li><a href="#Option 4">Option 4</a></li>
                      </ul>
                   </li>
                </ul>
            </li>
            <li><a href="#Customize...">Customize...</a></li>
        </ul>
    </li>
</ul>

</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T18:59:51.437

**让你的代码在这里工作**：http : [//jsfiddle.net/cavmj/](http://jsfiddle.net/cavmj/)

使用您提供的 javascript 和 HTML。所以我猜这是一些没有正确加载的文件。

确保它加载：

```
<script src="Rules/navbar/jquery.ui.menu.js"></script>
<script src="Rules/navbar/jquery.ui.menubar.js"></script> 
```

并且CSS文件可以导入：

```
jquery.ui.menu.css
jquery.ui.menubar.css 
```

也许尝试直接链接：

```
<link rel="stylesheet" href=http://code.jquery.com/ui/1.8.19/themes/base/jquery-ui.css">
<link rel="stylesheet" href="http://view.jqueryui.com/menubar/themes/base/jquery.ui.menu.css">
<link rel="stylesheet" href="http://view.jqueryui.com/menubar/themes/base/jquery.ui.menubar.css"> 
```

如果这不是问题，请尝试检查控制台错误。

如果您有 firefox 和 firebug、Chrome 或 IE9（或更高版本）：**按 F12 并选择 Console**

那里会说它是否在加载时遇到任何 JavaScript 错误。

* * *

检查了你的链接。您缺少 jquery ui、菜单和菜单栏脚本。尝试添加以下内容：

```
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js" type="text/javascript"></script>
<script src="http://view.jqueryui.com/menubar/ui/jquery.ui.menu.js" type="text/javascript"></script>
<script src="http://view.jqueryui.com/menubar/ui/jquery.ui.menubar.js" type="text/javascript"></script> 
```

而且您在 jquery ui CSS 文件中缺少引用，它应该是

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.19/themes/base/jquery-ui.css"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T23:42:19.710

一切都在 jsfiddle.net 上工作，因为所有的 css 和 js 都引用了原始站点，并且内部链接也做同样的事情。

如果您想让它在本地工作，请尝试将所有 js 和 css 引用一一替换为您的本地文件，然后您将看到缺少哪些 css 或 js 或图像文件。

我遇到了同样的问题，经过这些步骤，现在一切都很好，无需外部参考即可工作。

# ios - IOS4.3+下载完成后检查文件大小

> ID：10214475
> 
> 赞同：0
> 
> 时间：2012-04-18T17:13:19.623
> 
> 标签：ios, xcode, nsurlconnection

在将文档下载到文档目录后，我正在尝试检查文档的文件大小是否正确。我不确定在我的网络服务帮助文件中的哪里检查它？或者最好的方法。

我能够在开始下载之前获得预期的文件长度。我可以得到每次突发发送的数据长度。我正在考虑每次在 didReceiveData 中添加这些突发数字，然后与预期长度进行比较，但不确定如何正确添加。

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
filesize1 = [[NSNumber numberWithLong: [response expectedContentLength]] retain];
NSLog(@"%@", filesize1);

if(requestType == DF_WS_REQUEST_GET_PDF_DATA)
{
    [[NSFileManager defaultManager] createFileAtPath:self.filename contents:nil attributes:nil];
    self.file = [[NSFileHandle fileHandleForUpdatingAtPath:self.filename] retain];// file is in .h 

    if (self.file)  
    {
        [self.file seekToEndOfFile];
    }
}
else
{
    [webData setLength: 0];
}
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data  
{

resourceLength = [NSNumber numberWithUnsignedInteger:[data length]];
    NSLog(@"resource length: %d", [resourceLength intValue]);

if(requestType == DF_WS_REQUEST_GET_PDF_DATA)
{
    if (self.file)  
    {
        [self.file seekToEndOfFile];
    } 
    [self.file writeData:data];
}
else
    [webData appendData: data];

}

- (void)connectionDidFinishingLoading:(NSURLConnection *)connection {
URL = filePreviewViewController.filePath;
NSError *AttributesError = nil;
NSDictionary *FileAttributes = [[NSFileManager defaultManager] attributesOfItemAtPath:URL error:&AttributesError];
NSNumber *FileSizeNumber = [FileAttributes objectForKey:NSFileSize];
long FileSize = [FileSizeNumber longValue];

NSLog(@"File: %@, Size: %ld", URL, FileSize);
} 
```

任何帮助或想法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:28:41.907

为什么不只是在下载完成后查询文件系统呢？

```
[[[NSFileManager defaultManager] attributesOfItemAtPath:filePath error:&error] fileSize] 
```

当您被告知您的下载已完成时，请拨打此电话。根据 NSURLConnection 的文档，你的代表应该会收到这个。

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

# debugging - 在 Xcode 4.3.1 中使用 libc++ 时如何获得合理的变量显示？

> ID：10214477
> 
> 赞同：5
> 
> 时间：2012-04-18T17:13:26.723
> 
> 标签：debugging, xcode4.3, lldb, libc++

我使用 Xcode 4.3.1 的 C++11 语言方言以及 libc++ 作为标准库。这种组合中的语言支持令人惊叹，但调试却是一种折磨。Xcode 的“摘要格式”和 lldb 的摘要格式功能都不会以漂亮的打印显示任何标准类型（std::string、std::vector 等）。由于它们的复杂性，为这些类型编写漂亮的打印机非常重要。（例如，std::string 在 libc++ 中非常复杂。）

在这种情况下，其他开发人员如何获得适合 STL 类型的变量显示？还是没有其他人使用带有 Xcode/lldb 的 libc++？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T11:51:51.077

好吧，lldb 存储库中有支持。这就是我所做的：

```
svn co http://llvm.org/svn/llvm-project/lldb/trunk lldb 
```

（我得到了修订版 160855）在 Xcode 的 lldb shell 中，您可以：

```
command script import  /Users/arne/oss/lldb/examples/synthetic/libcxx.py 
```

之后 lldb 更好地格式化 std::vector、std::map、std::string 和 std::map：

```
(lldb) p rv
(std::__1::vector<unsigned long, std::__1::allocator<unsigned long> >) $3 = size=2 {
  (unsigned long) [0] = 503
  (unsigned long) [1] = 503
} 
```

我已经用 Xcode 4.4 对此进行了测试。应该与 Xcode 4.3 类似

您可以将命令放在 .lldbinit 初始化文件中。甚至 Xcode 也会显示格式良好的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T14:34:06.463

此功能在 Xcode 4.4 中正常工作。Xcode 4.3 用户的最佳解决方案就是更新 Xcode。

# android - Appwidgetmanager.updateAppwidget() 没有做任何事情

> ID：10214486
> 
> 赞同：1
> 
> 时间：2012-04-18T17:14:33.773
> 
> 标签：android, widget, android-appwidget

我正在创建一个从数据库查询数据的应用程序小部件，并在此数据更改后使用内容观察器更新标签。问题是创建小部件时，我将标签更新为正确的值。当数据更改时，内容观察者会正确注册，但我无法更新小部件。代码如下所示：

```
//called after the configuration activity is done
public static void updateAppWidget(Context context, AppWidgetManager appWidgetManager,
         int appWidgetId){
    m_appWidgetManager = appWidgetManager;
    SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, 0);
    m_account = prefs.getString("account" + appWidgetId, "unknown");
    m_label = prefs.getString("label" + appWidgetId, "unknown");
    m_context = context;
    if (!m_accounts.contains(m_account)){
        m_accounts.add(m_account);
        m_context.getContentResolver().registerContentObserver(GmailContract.Labels.getLabelsUri(m_account), true,new MyContentObserver(new Handler()));
    }
    updateViews();

} 
```

在 ContentObserver 中，我只覆盖了以下函数：

```
@Override
public void onChange(boolean selfChange) {
        GmailUnreadCounterActivity.updateViews();
        super.onChange(selfChange);
    } 
```

updateViews 函数看起来像这样（当从 updateAppWidget 调用时，它工作得很好，当从 contentobserver 调用时，小部件没有更新，尽管值发生了变化）

```
public static void updateViews(){
    System.out.println("Number of widgets:" + m_appWidgetIds.length);
    for (int i = 0; i < m_appWidgetIds.length; i++){
        SharedPreferences prefs = m_context.getSharedPreferences(PREFS_NAME, 0);
        m_account = prefs.getString("account" + m_appWidgetIds[i], "unknown");
        m_label = prefs.getString("label" + m_appWidgetIds[i], "unknown");
        Cursor c = m_context.getContentResolver().query(GmailContract.Labels.getLabelsUri(m_account),null,null,null,null);
        while (c.moveToNext()) {
            if (c.getString(c.getColumnIndex(GmailContract.Labels.CANONICAL_NAME)).equals(m_label)){
                String line = String.valueOf(c.getInt(c.getColumnIndex(GmailContract.Labels.NUM_UNREAD_CONVERSATIONS)));
                remoteViews = new RemoteViews(m_context.getPackageName(), R.layout.main);
                remoteViews.setTextViewText(R.id.unread_count,
                        line);
                AppWidgetManager.getInstance(m_context).updateAppWidget(m_appWidgetIds[i], remoteViews);
            }
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:40:59.047

你如何获得 m_appWidgetIds？

为什么要将其保留在 for 循环中并更新所有实例。而不是那种用途

```
updateAppWidget (ComponentName provider, RemoteViews views) 
```

这将更新小部件的所有实例。

使用以下代码获取 ComponentName ComponentName provider = new ComponentName(context, YourAppWidgetProvider.class);

# ruby-on-rails - Haml 链接未呈现为链接

> ID：10214488
> 
> 赞同：0
> 
> 时间：2012-04-18T17:14:34.837
> 
> 标签：ruby-on-rails, haml

我正在尝试在 HAML 中创建一个简单的链接，如下所示：

```
link_to "Create Profile", home 
```

但由于某种原因，它会将所有内容呈现为纯文本。

知道为什么会发生这种情况吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:16:39.513

你忘了放等号`=`吗？

```
= link_to "Create Profile", home 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:04:16.487

第一次运行

```
rake routes 
```

在您的终端中检查所有路线。比选择正确的，例如 root_path 所以 link_to 助手调用将如下所示：

```
= link_to 'Create Profile', home_path 
```

您也可以像这样在 rails 控制台中练习 link_to 方法：

```
1.9.3-head :030 >   include ActionView::Helpers::UrlHelper
 => Object 
1.9.3-head :031 > link_to 'Home', '/home'
 => "<a href=\"/home\">Home</a>" 
```

还有我的最后一条建议——“不要害怕阅读源代码”，这里是 Rails 中的 link_to 方法和其他方法的源代码：

[https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/url_helper.rb#L236](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/url_helper.rb#L236)

# sql - 如何使用 SQL 获取字符串中的奇数字符

> ID：10214489
> 
> 赞同：6
> 
> 时间：2012-04-18T17:14:47.727
> 
> 标签：sql, oracle, substring

我正在处理一些加密数据，我需要从字符串中获取奇数字符并填充到列中：

```
abcedfgh 
```

到

```
acdg 
```

真的可以在SQL中做到吗？我试着用谷歌搜索，但找不到任何搜索结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T17:23:53.037

```
SELECT REGEXP_REPLACE(mycolumn, '(.).', '\1')
FROM   mytable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T12:40:23.003

```
SELECT REPLACE(DATA,',','') MYDATA
FROM(
      SELECT WM_CONCAT(DATA) AS  DATA
      FROM (
            SELECT SUBSTR('abcedfgh',LEVEL,1) DATA,ROWNUM RN
            FROM DUAL 
            CONNECT BY LEVEL <=LENGTH('abcedfgh')

           )
      WHERE MOD(RN,2) =1
    ) 
```

# apache-flex - 您可以将对象添加到数组集合中的数组集合吗？

> ID：10214490
> 
> 赞同：0
> 
> 时间：2012-04-18T17:14:56.923
> 
> 标签：apache-flex, arraycollection

我尝试将对象添加到 ArrayCollection 内的 ArrayCollection 中，但它不起作用。我收到错误 #1009，执行如下：

```
for (var x:Number = 0; x < identifyArrayCollection.length; x++)
{
    identifyArrayCollection[x].speedsArrayCollection.addItem(speedsObj);
} 
```

我可以将速度对象添加到不在 ArrayCollection 中的 ArrayCollection。

任何帮助，将不胜感激。

谢谢，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T23:57:27.183

不要忘记任何复合对象都需要首先初始化。例如（假设初始运行）：

有两种方法可以做到这一点：@Sam 的捎带

```
for (var x:Number = 0; x < identifyArrayCollection.length; x++)
{
   if (!identifyArrayCollection[x]) identifyArrayCollection[x] = new ArrayCollection();
   identifyArrayCollection[x].addItem(speedsObj);
} 
```

或者如果您真的想使用显式命名约定，则使用匿名对象 - 但是请注意，这些都不是**编译**时检查的（也不是使用数组访问器的任何东西）：

```
for (var x:Number = 0; x < identifyArrayCollection.length; x++)
{
   if (!identifyArrayCollection[x]) 
   {
      var o:Object = {};
          o.speedsArrayCollection = new ArrayCollection();
      identifyArrayCollection[x] = o;
   }
   identifyArrayCollection[x].speedsArrayCollection.addItem(speedsObj);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:32:16.243

下面的代码将该项目添加`speedObj`到被调用 `ArrayCollection`的索引的 found at`x`中。`ArrayCollection``identifyArrayCollection`

```
identifyArrayCollection.getItemAt(x).addItem(speedsObj); 
```

这是你要找的吗？

* * *

您拥有的代码执行以下操作：

```
identifyArrayCollection[x] 
//accesses the item stored in identifyArrayCollection 
//with the key of the current value of x
//NOT the item stored at index x

.speedsArrayCollection
//accesses the speedsArrayCollection field of the object
//returned from identifyArrayCollection[x]

.addItem(speedsObj)
//this part is "right", add the item speedsObj to the
//ArrayCollection 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T19:32:52.727

假设 identifyArrayCollection 是一个包含一些对象的 ArrayCollection，speedArrayCollection 是一个 ArrayCollection，定义为对象类型的变量，包含在 identifyArrayCollection

你应该做：

```
for (var x:Number = 0; x < identifyArrayCollection.length; x++)
{
    identifyArrayCollection.getItemAt(x).speedsArrayCollection.addItem(speedsObj);
} 
```

# mercurial - Mercurial 和 Bitbucked：如何更新分叉？

> ID：10214493
> 
> 赞同：4
> 
> 时间：2012-04-18T17:15:14.570
> 
> 标签：mercurial, bitbucket

我是 mercurial 和检查 bitbucket.org 基础设施的新手。如果我通过“fork”按钮在 bitbucked 上 fork 一些项目 - 保持 fork 最新的首选方法是什么？分叉“起源”是否保存在分叉存储库的某个地方？当然，我可以在“pull”命令中手动指定存储库——但这对我来说似乎很尴尬。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T17:35:07.483

在 bitbucket 接口中有一个“起源”的概念，但我认为你不能在 bitbucket 中进行拉取。

在 fork 的本地克隆中，您可以在`.hg/hgrc`文件`[paths]`部分中命名 URL，之后您可以执行“hg pull NAME”。例如我会经常这样做：

```
[paths]
upstream = http://path/to/repo/from/which/I/forked 
```

然后你可以做`hg pull upstream`这些改变。有关更多选项`hg help paths`，请参见[http://www.selenic.com/mercurial/hgrc.5.html#paths](http://www.selenic.com/mercurial/hgrc.5.html#paths)

# c# - 交易目的

> ID：10214495
> 
> 赞同：-1
> 
> 时间：2012-04-18T17:15:28.133
> 
> 标签：c#, transactions

我读了很多关于这个主题的文章，但我仍然有一些重要和基本的问题。如果不用于 SQL，事务的目的是什么？它对我在 wcf 中有何帮助？本文展示了一个使用简单事务的示例：

[http://msdn.microsoft.com/en-us/library/ms172152(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms172152(v=vs.90).aspx)

如果不是为了回滚他们试图恢复的内容以防代码失败，那么下面这段代码的目的是什么？

```
 void RootMethod()
{
     using(TransactionScope scope = new TransactionScope())
     {
          /* Perform transactional work here */
          SomeMethod();
          scope.Complete();
     }
}

void SomeMethod()
{
     using(TransactionScope scope = new TransactionScope())
     {
          /* Perform transactional work here */
          scope.Complete();
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:22:00.527

只有支持事务的资源才参与事务。通常，这只是 SQL Server。消息队列也支持事务。

如果您不使用任何启用事务的资源（如普通变量......），这将无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:25:03.563

这里有一个很好的例子

[http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope(v=vs.90).aspx#Y500](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope(v=vs.90).aspx#Y500)

在示例（上面的链接，下面的代码）中，SQL 连接对象将自动参与事务——因此这些 SQL 命令在事务完成之前不会提交（`scope.Complete`）。这样，只有当另一个发生时，两者才会发生在两个单独的服务器上。任何异常都会导致两者都回滚。

您的示例不清楚，因为它仅在该页面的上下文中描述嵌套范围。这个例子展示了一些被认为是嵌套的东西，而不是一些可以做任何有用的代码。

这是我认为很清楚的微软示例代码：

```
// This function takes arguments for 2 connection strings and commands to create a transaction 
// involving two SQL Servers. It returns a value > 0 if the transaction is committed, 0 if the 
// transaction is rolled back. To test this code, you can connect to two different databases 
// on the same server by altering the connection string, or to another 3rd party RDBMS by 
// altering the code in the connection2 code block.
static public int CreateTransactionScope(
    string connectString1, string connectString2,
    string commandText1, string commandText2)
{
    // Initialize the return value to zero and create a StringWriter to display results.
    int returnValue = 0;
    System.IO.StringWriter writer = new System.IO.StringWriter();

    try
    {
        // Create the TransactionScope to execute the commands, guaranteeing
        // that both commands can commit or roll back as a single unit of work.
        using (TransactionScope scope = new TransactionScope())
        {
            using (SqlConnection connection1 = new SqlConnection(connectString1))
            {
                // Opening the connection automatically enlists it in the 
                // TransactionScope as a lightweight transaction.
                connection1.Open();

                // Create the SqlCommand object and execute the first command.
                SqlCommand command1 = new SqlCommand(commandText1, connection1);
                returnValue = command1.ExecuteNonQuery();
                writer.WriteLine("Rows to be affected by command1: {0}", returnValue);

                // If you get here, this means that command1 succeeded. By nesting
                // the using block for connection2 inside that of connection1, you
                // conserve server and network resources as connection2 is opened
                // only when there is a chance that the transaction can commit.   
                using (SqlConnection connection2 = new SqlConnection(connectString2))
                {
                    // The transaction is escalated to a full distributed
                    // transaction when connection2 is opened.
                    connection2.Open();

                    // Execute the second command in the second database.
                    returnValue = 0;
                    SqlCommand command2 = new SqlCommand(commandText2, connection2);
                    returnValue = command2.ExecuteNonQuery();
                    writer.WriteLine("Rows to be affected by command2: {0}", returnValue);
                }
            }

            // The Complete method commits the transaction. If an exception has been thrown,
            // Complete is not  called and the transaction is rolled back.
            scope.Complete();

        }

    }
    catch (TransactionAbortedException ex)
    {
        writer.WriteLine("TransactionAbortedException Message: {0}", ex.Message);
    }
    catch (ApplicationException ex)
    {
        writer.WriteLine("ApplicationException Message: {0}", ex.Message);
    }

    // Display messages.
    Console.WriteLine(writer.ToString());

    return returnValue;
} 
```

# eclipse - Eclipse SDK 升级到 3.7 冲突依赖

> ID：10214499
> 
> 赞同：1
> 
> 时间：2012-04-18T17:15:42.687
> 
> 标签：eclipse, eclipse-plugin

我正在尝试将我的 Eclipse SDK 从版本 3.6.1 升级到 3.7.2，但是在添加软件站点下包含[http://download.eclipse.org/releases/indigo](http://download.eclipse.org/releases/indigo)后出现以下错误，然后转到帮助>检查新更新：-

由于依赖项冲突，无法完成安装。正在安装的软件：Eclipse SDK 3.7.2.M20120208-0800 (org.eclipse.sdk.ide 3.7.2.M20120208-0800)

我需要做什么才能完成升级？

# gallery - MODx 图库图片尺寸

> ID：10214503
> 
> 赞同：0
> 
> 时间：2012-04-18T17:16:03.430
> 
> 标签：gallery, modx, modx-revolution

我在 MODx Revolution 2.0.4-pl2 中使用 Gallery 组件。

全尺寸图像只有 500 像素宽。这就是标签的样子：

```
<img alt="Car" src="/MAMP/domain/assets/components/gallery/connector.php?action=web/phpthumb&w=500&h=500&zc=0&far=&q=90&src=%2Fdomain%2Fassets%2Fcomponents%2Fgallery%2Ffiles%2F2%2F8.jpg" class=""> 
```

根据我阅读文档的方式，我应该能够通过调整 GalleryItem 标签来更改此默认值：

```
[[!GalleryItem &imageWidth=`620`]] 
```

事实上，这会导致图像完全消失。如何更改此默认宽度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:56:40.087

正确的语法实际上是：

```
[[!GalleryItem? &imageWidth=`620`]] 
```

注意缺少的“？”

# javascript - 画布显示出意外的颜色并且不会显示倒置的图像

> ID：10214508
> 
> 赞同：1
> 
> 时间：2012-04-18T17:16:24.467
> 
> 标签：javascript, html, canvas

我目前正在尝试复制 Douglas Crockfords 演示[的“安全原则”中](http://www.youtube.com/watch?v=zKuFu19LgZA#t=1200s)显示的效果。作为使用“One Time Pad”加密密钥两次的风险的演示，他展示了两张图像，用相同的密钥对它们进行加密，然后从另一个中减去一个，导致两个图像同时显示。

我的方法使用四个画布元素，一个用于显示键，两个用于加载图像，第四个作为减法的目标。我能够生成（有点）随机密钥，加载图像并加密它们。尝试解密图像时会出现问题。为此，我将图像加载到第一个容器，对其进行加密，然后加密第二个容器（这会产生密钥的副本），然后减去两个容器的像素。原始图像仍可识别，但画布上出现随机像素。

将图像加载到第二个容器时，从空的第一个容器中减去图像应该能够得到反转版本。出乎意料的是，画布保持空白。

我目前的状态可以在[JSFiddle](http://jsfiddle.net/Mud6y/)看到，请看一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T14:58:56.790

**[更新的演示](http://jsfiddle.net/loktar/Mud6y/3/)**

首先，您将 alpha 设置为 255，但随后继续减去数据，因此您减去了 alpha 通道，不管您已经将其设置为 255 的事实。我所要做的就是使其有条件。

然后您将值变为 256，但范围是 0-255。最后但并非最不重要的一点是，您需要在生成部分中添加另一个 alpha 条件。

```
//generate a random image
(function() {
    var ct = getCTX("c0");
    var imgData = ct.createImageData(400, 400);
    var data = imgData.data;
    for (var i = 0, j = data.length; i < j; i++) {
        // Added conditional
        if (i % 4 === 3){
            data[i] = 255;
        }else{
            // random * 255 since color ranges are from 0-255
            data[i] = Math.floor(Math.random() * 255);
        }
    }
    ct.putImageData(imgData, 0, 0);
})();

function encodeWrap(id) {
    return (function() {
        var img = getCTX(id);
        var imgData = img.getImageData(0, 0, 400, 400);
        var data = imgData.data;
        for (var i = 0, j = data.length; i < j; i++) {
            if (i % 4 === 3){
                // added condition for alpha
                data[i] = 255;
            }else{
                // changed to 255
                data[i] = (data[i] + randomValues[i]) % 255;
            }
        }
        img.putImageData(imgData, 0, 0);
    });
}

document.getElementById("bt3").addEventListener("click", function() {
    var img1 = getImageData("c1"),
        img2 = getImageData("c2"),
        ct = getCTX("c3"),
        imgData = ct.createImageData(400, 400),
        data = imgData.data,
        tmp;

    for (var i = 0, j = data.length; i < j; i++) {
        if (i % 4 === 3){
            data[i] = 255;
        }else{
            tmp = img1[i] - img2[i];
            // changed to 255 since ranges go from 0 - 255
            if (tmp < 0){ tmp +=255;};
            data[i] = tmp;
        }
    }

    ct.putImageData(imgData, 0, 0);
});​ 
```

# android - RenderScript 文本大小

> ID：10214509
> 
> 赞同：1
> 
> 时间：2012-04-18T17:16:27.533
> 
> 标签：android, renderscript

如何在调用 rsgDrawText 之前设置字体特征？我对能够设置字体大小特别感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:51:36.567

它是一个多部分的过程。在您用于控制 RenderScript 运行时（通常拥有脚本的运行时）的文件中，在初始化脚本之后但在绑定之前执行以下操作：

```
 Font mFontSans; //This can be a class member variable.

 private void initFonts() {
      // Sans font by family name
      mFontSans = Font.create(mRS, mRes, "sans-serif", Font.Style.NORMAL, 8);
      mScript.set_gFontSans(mFontSans);
 } 
```

然后在 RenderScript 文件中有一个全局变量（在本例中为 gFontSans）并调用：

```
 rsgBindFont(gFontSans); 
```

在绘制所需文本之前的某个时间。如果您需要不同的大小，则需要将它们存储为单独的变量或数组。

# c# - 图像调整大小 - 值不能为空

> ID：10214510
> 
> 赞同：0
> 
> 时间：2012-04-18T17:16:30.970
> 
> 标签：c#, visual-studio, silverlight, windows-phone

好的，这就是我所拥有的：

几行代码，可以选择/拍摄照片并将其上传到我的服务器：

```
System.Windows.Media.Imaging.BitmapImage bmp = new System.Windows.Media.Imaging.BitmapImage();
        bmp.SetSource(e.ChosenPhoto);
        image1.Source = bmp;
        BitmapImage bitmapImage = bmp;
        var largest = Math.Max(bitmapImage.PixelWidth, bitmapImage.PixelHeight);
        var ratio = largest / 1024;
        var width = bitmapImage.PixelWidth / ratio;
        var height = bitmapImage.PixelHeight / ratio;
        WriteableBitmap wb = new WriteableBitmap(bitmapImage);
        Stream str = null; 
        wb.SaveJpeg(str, width, height, 0, 75);

        byte[] sbytedata = ReadToEnd(str);
        string s = EncodeTo64(sbytedata.ToString());
        WebClient wc = new WebClient();
        Uri u = new Uri("//something ;)//");
        wc.OpenWriteCompleted+=new OpenWriteCompletedEventHandler(wc_OpenWriteCompleted);
        wc.OpenWriteAsync(u, "POST", sbytedata); 
```

而且..它不起作用：[异常 - 屏幕](http://i.stack.imgur.com/ZDTbE.png)

此外，您还需要 ReadToEnd() 函数。这是：

```
 public static byte[] ReadToEnd(System.IO.Stream stream)
{
    long originalPosition = stream.Position;
    stream.Position = 0;

    try
    {
        byte[] readBuffer = new byte[4096];

        int totalBytesRead = 0;
        int bytesRead;

        while ((bytesRead = stream.Read(readBuffer, totalBytesRead, readBuffer.Length - totalBytesRead)) > 0)
        {
            totalBytesRead += bytesRead;

            if (totalBytesRead == readBuffer.Length)
            {
                int nextByte = stream.ReadByte();
                if (nextByte != -1)
                {
                    byte[] temp = new byte[readBuffer.Length * 2];
                    Buffer.BlockCopy(readBuffer, 0, temp, 0, readBuffer.Length);
                    Buffer.SetByte(temp, totalBytesRead, (byte)nextByte);
                    readBuffer = temp;
                    totalBytesRead++;
                }
            }
        }

        byte[] buffer = readBuffer;
        if (readBuffer.Length != totalBytesRead)
        {
            buffer = new byte[totalBytesRead];
            Buffer.BlockCopy(readBuffer, 0, buffer, 0, totalBytesRead);
        }
        return buffer;
    }
    finally
    {
        stream.Position = originalPosition;
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:24:29.097

改变

```
Stream str = null; 
```

至：

```
Stream str = new MemoryStream(); 
```

请记住 - 调试器会将下一条语句显示为导致异常的语句之后的语句。所以你实际上是在你看到的那个声明之前死去的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:28:46.023

好吧，这似乎`Stream str = null;`是错误的，您需要对其进行实例化，即 SaveToJpeg 写入现有流而不是创建一个并写入它。

# c++ - 我编译的 C++ 程序太小。我怎样才能让它变大？

> ID：10214516
> 
> 赞同：23
> 
> 时间：2012-04-18T17:16:54.837
> 
> 标签：c++

我有一个编译为 9.5k 的 C++ 程序。我希望它超过 1MB。我做了以下操作以将其填充到大约 18k，但是一直这样做到 1MB 会很困难。

代码无法访问，但由于编译器优化，我不得不让它看起来可以访问，因此 bool 发生了变化。

```
#include "stdafx.h"
#include <iostream>
using namespace std;

void main(int argc, char* argv[])
{
    bool a = false;
    cout << endl << "Passed parameters";
    for (int i = 0 ; i < argc ; i++)
    {
        if(i == 0)
        {
            cout << endl << "Run Path (Arg0): " << argv[i];
            a=true;
        }
        else
        {
            cout << endl << "Arg" << i << ": " << argv[i];
            if(a){a=false;}
        }
    }
    cout << endl << endl;
    system("pause");
    if (a){
    string pad1 = "padpadpadpadpadpadpadpadpadpadpadpadpadpadp1adpadpadpadpadpa";
    string pad2 = "dapdapdapdapdapdapdapdapd2apdapdapdapdapdapdapdapdapdapdapd";
    string pad3 = "dipdipdipdipdipdipdipdipdipdipd3ipdipdipdipdipdipdipdipdip";
    string pad4 = "dipdipdipdi4pdipdipdipdipdipdipdipdipdipdipdipdipdipdipdip";
    string pad5 = "dipdipdipd5ipdipdipdipdipdipdipdipdipdipdipdipdipdipdipdip";
    string pad6 = "dipdipdipd6ipdipdipdipdipdipdipdipdipdipdipdipdipdipdipdip";
    string pad7 = "dipdipdipd7i1pdipdipdipdipdipdipdipdipdipdipdipdipdipdipdip";
    string pad8 = "dipdipdip8dipdipdip1dipdipdipdipdipdipdipdipdipdipdipdipdip";
    string pad9 = "dipdipdipd9ipdipdipdipdip1dipdipdipdipdipdipdipdipdipdipdip";
    string pad10= "padpadpadpadpadpadpadpadpadpadp1adpadpadpadp1adpadpadpadpadpa";
    string pad11= "dapdapdapdapdapdapdapdapd2apdapdapdapdapdap1dapdapdapdapdapd";
    string pad12= "dipdipdipdipdipdipdipdipdipdipd3ipdipdipdipdipdipdip1dipdip";
    string pad13= "dipdipdipdi4pdipdipdipdipdipdipdipdipdipdipdipdipdi1pdipdip";
    string pad14= "dipdipdipd5ipdipdipdipdipdipdipdipdipd2ipdipdi1pdipdipdipdip";
    string pad15= "dipdipdipd6ipdipdipdip2dipdipdipdipdipdipdip1dipdipdipdipdip";
    string pad16= "dipdipdipd7ipdipdipdip2dipdipdipdipdip1dipdipdipdipdipdipdip";
    string pad17= "dipdipdip8dipdipdipdipdipdipd2ipdip1dipdipdipdipdipdipdipdip";
    string pad18= "dipdipdipd9ipdipdipdip1dipdipdipdipdipdi2pdipdipdipdipdipdip";
    string pad19= "padpadpadpadpadpadpadpadpadpadpad2padpadpadp1adpadpadpadpadpa";
    string pad20= "dapdapdapdapdapd2apdapdapd2apdapdapdapdapdapdapdapdapdapdapd";
    string pad21= "dipdipdipdipdipd2ipdipdi2pdipdipd3ipdipdipdipdipdipdipdipdip";
    string pad22= "dipdipdipdi4pdipdipdipd2ipdipdipdipdipdipdipdipdipdipdipdip";
    string pad23= "dipdipdipd5ipdip2dipdipdipdipdipdipdipdipdipdipdipdipdipdip";
    string pad24= "dipdipdipd6ipdipdipdi2pdipdipdipdipdipdipdipdipdipdipdipdip";
    string pad25= "dipdipdipd7i1pdipdipdipdipdipdip2dipdipdipdipdipdipdipdipdip";
    string pad26= "dipdipdip8dipdipdip1dipdipdip1dipdipdipdipdipdipdipdipdipdip";
    string pad27= "dipdipdipd9ipdipdipd1ipdip1dipdipdipdipdipdipdipdipdipdipdip";
    string pad28= "padpadpadpadpadpadpadpadp1adpadp1adpadpadpadp1adpadpadpadpadpa";
    string pad29= "dapdapdapdapdapdapdapdapd2apdapdapdapdapda1p1dapdapdapdapdapd";
    string pad30= "dipdipdipdipdipdipdipdipdipdipd3ipdipd1ipdipdipdipdip1dipdip";
    string pad31= "dipdipdipdi4pdipdipdipdipdipdipdi1pdipdipdipdipdipdi1pdipdip";
    string pad32= "dipdipdipd5ipdipdipdi1pdipdipdipdipdipdipdipdi1pdipdipdipdip";
    string pad33= "dipdipdipd6ipdipdipdip1dipdipdipdipdipdipdip1dipdipdipdipdip";
    string pad34= "dipdipdipd7ipdipdipdipdip1dipdipdipdip1dipdipdipdipdipdipdip";
    string pad35= "dipdipdip8dipdipdipdipdipdipdi1pdip1dipdipdipdipdipdipdipdip";
    string pad36= "dipdipdipd9ipdipdipdip1dipdipdipd1ipdipdipdipdipdipdipdipdip";}
    return;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-18T17:26:09.730

尝试这个：

```
char waste[1024*1024] = {1}; 
```

至少在我的 TDM-GCC（在 Win7 上）上，输出要大 1 MB；如果你写

```
char waste[1024*1024] = {0}; 
```

它将被优化（产生 27kB）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-18T17:32:07.173

使用静态可执行文件（`-static`flag for `gcc`）编译并添加系统包含，直到超过 1MB。我认为你可以用 Windows 做同样的事情，但我不在 Windows 中编程，所以我可能是错的，但这里有一个链接似乎描述了如何：[http ://www.geekadmin.com/?p=34](http://www.geekadmin.com/?p=34)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-18T17:28:05.360

有一个简单的解决方案：您可以将一些数据文件附加到您的 .exe 文件中。Windows 抱怨发布者未知，但确认后执行程序没有问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T17:25:33.190

```
int main(){}
char lol[1024*1024] = { 1 }; 
```

请注意 char`lol[1024*1024];`是不够的，否则编译器只会告诉操作系统创建一个零填充区域。这样，在程序中嵌入了 1MB 无意义的堆。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-18T17:21:32.297

也许您可以创建一个 1MB 大小的文件，并将所有信息读入某个变量或数据结构中。

要么，要么您可以创建一些数据结构，然后在循环中将一堆垃圾写入其中。请注意，这可能会使您的程序明显变慢。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-18T17:30:11.777

您可以通过在编译时静态分配内存来增大可执行文件的占用空间。例如，只需添加：

```
static char padding[1024 * 1024] = {1}; 
```

这将静态分配存储，而不是导致它在运行时分配，如果您省略了数组中第一个内存插槽的初始化值，就会发生这种情况。换句话说，如果没有显式编译时初始化为非零值，则数组存储在`.bss`目标文件的部分中，因此链接器仅存储一个选项卡以向 OS 运行时指示它需要为其分配内存在执行时数组，而不是在`.data`目标文件的部分中静态分配内存，这反过来会在可执行文件本身中为数组创建内存占用。

# java - 任何 Apache Commons-Configuration 替代品/竞争对手？

> ID：10214517
> 
> 赞同：6
> 
> 时间：2012-04-18T17:16:55.833
> 
> 标签：java, configuration, xml-configuration, apache-commons-config

我最近尝试使用[Apache Commons-Configuration](http://commons.apache.org/configuration/)来管理一些本地 XML 配置文件。它在易用性（无法加载空配置文件，CombinedConfiguration 需要为大多数操作使用底层配置等）以及跨 API 的一致性（保存操作没有事件，事件不是通用的）方面严重不足。

除了写入注册表的 JDK 首选项（我不想要）之外，还有其他替代方法来管理基于文件的首选项吗？

使用其他文件格式不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:48:42.827

我过去为此使用过 XStream，但它只是 XML 数据绑定，从文件映射到对象。它使您有责任提供更高级别的方法（特别是组合配置、验证）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:55:21.143

您的问题并不清楚您是否需要继续使用基于 XML 的技术。如果没有，那么您可能比考虑[Json](http://www.json.org/)、[YAML](http://yaml.org/)或（我最喜欢的，也是我维护的）[Config4*](http://www.config4star.org/)做得更糟。

# java - 我如何在java中表现出强制（一种特殊的多态行为）？

> ID：10214521
> 
> 赞同：0
> 
> 时间：2012-04-18T17:17:06.837
> 
> 标签：java, polymorphism

由于java是一种面向对象的语言，它应该表现出多态性。以下是我对一种多态性的定义；ad-hoc 多态性，以及它的一个子类型；强迫。

当一个函数在几种不同的类型（可能不表现出共同的结构）上工作或似乎工作时，获得了临时多态性，并且可能以不相关的方式对每种类型表现。有两种类型的临时多态性，强制和重载。

强制转换是一种避免类型错误的语义操作。编译器将一种类型转换为另一种类型，以便将函数调用中的参数类型与函数定义中的参数类型相匹配。函数定义仅适用于一种类型。编译器在编译时实现强制。

我有这个例子在 C++ 中工作

```
#include <iostream>
 using namespace std;

 void display(int a) const
 {
     cout << "One argument (" << a
          << ')' << endl;
 }

 int main( )
 {
     display(10); // returns "One argument (10)"
     display(12.6); // narrowing // returns "One argument (12)"
 } 
```

我试图在java中实现相同的程序但没有成功。

```
public static void display (int i)
{
  System.out.println("One argument (" + i + ")");
}

public static void main (String[] args)
{
  display(10); // One argument (10)
  display(12.6); // Narrowing (a type of coercion) takes place. One argument (12)
} 
```

但我收到了错误。

```
The method display is not applicable for the arguments(double). 
```

你知道如何成功转换。请注意，我真的希望使用编译器自动修复类型的强制技术。所以我用 (int) 12.6 转换为 int 对我来说不是一个选择。

如果您有另一个显示缩小的强制示例，如果您与我分享，我将不胜感激:)

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:26:35.860

很好[的参考：](http://www.programmersheaven.com/2/FAQ-JAVA-Differences-Between-JAVA-And-C-CPP) “在 Java 中，如果强制会导致数据丢失，您必须始终将数据元素显式转换为新类型。”

快速回答：你不能。对不起。

另一方面，要编写无法被知道自己在做什么的人挑选出来的 Java 代码是非常非常困难的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:26:27.370

简而言之，Java 不允许隐式缩小转换。因此，即使以下内容也无法编译：

```
double d = 12.6;
float f = d; 
```

请注意，“宽度”（如“扩大”和“缩小”实际上是关于范围，而不是精度）。

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2)：

> **作业转换**
> 
> 赋值转换发生在将表达式的值赋给变量时：必须将表达式的类型转换为变量的类型。
> 
> 赋值上下文允许使用以下之一：
> 
> *   身份转换
>     
>     
> *   扩大的原始转换
>     
>     
> *   扩大参考转换
>     
>     
> *   可选的装箱转换，然后是扩大的参考转换
>     
>     
> *   一个拆箱转换可选地跟随一个扩大的原始转换。

以及该章的其他地方：

> 方法调用转换...执行与赋值转换相同的转换。

您会注意到“缩小原始转换”不在该列表中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T17:30:31.637

Java 不允许缩小强制，而只是扩大强制。

所以允许：

```
float foo(float f) { return f*f; }

int i = 10;
float f = foo(i);
float f2 = i; 
```

但不是在您将失去精确度时。

编辑：实际上，由于 java 中的浮点数是标准的 4 字节 IEEE754，您实际上确实会丢失精度，但在任何情况下都是允许的，这表明了这种行为：

```
int d = Integer.MAX_VALUE;
float f = d;
System.out.println(String.format("%d != %12.0f", d, f)); 
```

你将拥有：

```
2147483647 != 2147483648 
```

所以答案比看起来要模糊一些。

# objective-c - 无限CCLayer背景

> ID：10214523
> 
> 赞同：0
> 
> 时间：2012-04-18T17:17:13.993
> 
> 标签：objective-c, cocos2d-iphone

有没有办法在 Cocos2D 中制作无限的背景？

假设您有一个带有小型宇宙飞船的 2d 游戏，当飞船向任何方向行驶时，图层会移动。拥有静态星星背景的叶子迟早会在屏幕外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:10:43.933

您可以使用 CCParallaxNode。

这是 CCParallaxNode 类参考的链接：

[http://www.cocos2d-iphone.org/api-ref/1.0.0/interface_c_c_parallax_node.html](http://www.cocos2d-iphone.org/api-ref/1.0.0/interface_c_c_parallax_node.html)

这是一个很棒的教程，展示了如何使用它：

[http://www.raywenderlich.com/3611/how-to-make-a-space-shooter-iphone-game](http://www.raywenderlich.com/3611/how-to-make-a-space-shooter-iphone-game)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:47:08.083

您需要平铺背景图像。这是一个示例代码

```
 CCSprite * bg = [CCSprite spriteWithFile:@"pattern11.jpg" rect:CGRectMake(0, 0, 256, 256)];
    [bg setPosition:ccp(0, 0)];
    ccTexParams params = {GL_LINEAR,GL_LINEAR,GL_REPEAT,GL_REPEAT};
    [bg.texture setTexParameters:&params];
    [self addChild:bg z:0]; 
```

确保图块采用以下格式：256x256 或 128x128

# java - 重新抛出 InvocationTargetException 目标异常

> ID：10214525
> 
> 赞同：8
> 
> 时间：2012-04-18T17:17:32.780
> 
> 标签：java, exception-handling, invocationtargetexception

如何重新抛出 InvocationTargetException 的目标异常。我有一个方法，它使用反射在我的一个类中调用 invoke() 方法。但是，如果在我的代码中抛出异常，我不关心 InvocationTargetException，只需要目标异常。这是一个例子：

```
public static Object executeViewComponent(String name, Component c,
        HttpServletRequest request) throws Exception {

    try {
        return c.getClass()
                .getMethod(c.getMetaData().getMethod(), HttpServletRequest.class)
                .invoke(c, request);
    } catch (InvocationTargetException e) {
        // throw the target exception here
    }
} 
```

我面临的主要问题是调用 throw e.getCause(); 不会抛出异常，而是抛出 Throwable。也许我不正确地接近这个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-18T17:23:07.853

```
catch (InvocationTargetException e) {
    if (e.getCause() instanceof Exception) {
        throw (Exception) e.getCause();
    }
    else {
        // decide what you want to do. The cause is probably an error, or it's null.
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:21:27.780

`Exception#getCause`返回一个`Throwable`。如果您希望编译器认为您正在抛出 an`Exception`那么您可能需要强制转换它。

```
throw (Exception) e.getCause(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T18:15:27.677

下面是冗长的，但我喜欢避免反射和强制转换。我不认为（但不确定）Java 7 的 multi catch 语法会有用。

```
public static Object executeViewComponent(String name, Component c,
        HttpServletRequest request) throw KnownException_1 , KnownException_2 , ... , KnownException_n {

    try {
        return c.getClass()
                .getMethod(c.getMetaData().getMethod(), HttpServletRequest.class)
                .invoke(c, request);
    }
    catch ( InvocationTargetException cause )
    {
          assert cause . getCause ( ) != null : "Null Cause" ;
          try
          {
               throw cause . getCause ( ) ;
          }
          catch ( KnownException_1 c )
          {
                throw c
          }
          catch ( KnownException_2 c )
          {
                throw c
          }
          ...
          catch ( KnownException_n c )
          {
                throw c
          }
          catch ( RuntimeException c )
          {
                throw c ;
          }
          catch ( Error c )
          {
                throw c ;
          }
          catch ( Throwable c )
          {
                assert false : "Unknown Cause" ;
          }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T17:20:47.050

您可以使用 throw 关键字和您捕获的相应对象重新抛出您之前捕获的任何异常：

```
catch (XXXException e)
{
       throw e;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T17:25:10.510

您可以在不明确声明的情况下重新抛出原因。

```
public static Object executeViewComponent(String name, Component c,
        HttpServletRequest request) throw /* known exceptions */ {

    try {
        return c.getClass()
                .getMethod(c.getMetaData().getMethod(), HttpServletRequest.class)
                .invoke(c, request);
    } catch (InvocationTargetException e) {
        // rethrow any exception.
        Thread.currentThread().stop(e.getCause());
    }
} 
```

# php - 如何从 PHP 中的多维数组中删除空值？

> ID：10214531
> 
> 赞同：11
> 
> 时间：2012-04-18T17:18:01.640
> 
> 标签：php, string, multidimensional-array, filtering, isnullorempty

我一直在寻找很多答案，但没有一个对我有用。

这是分配给我的`$quantities`数组的数据：

```
Array(
    [10] => Array([25.00] => 1)
    [9] => Array([30.00] => 3)
    [8] => Array([30.00] => 4)
    [12] => Array([35.00] => )
    [1] => Array([30.00] => )
    [2] => Array([30.00] => )
) 
```

我正在寻找一种方法来删除具有空值的子数组，例如`[12]` `[1]`并`[2]`保留其他所有内容。

期望的结果：

```
Array(
    [10] => Array([25.00] => 1)
    [9] => Array([30.00] => 3)
    [8] => Array([30.00] => 4)
) 
```

我在官方 php 文档上尝试了很多功能，但都没有奏效。

我用过这个：

```
function array_filter_recursive($array, $callback = null) {
    foreach ($array as $key => & $value) {
        if (is_array($value)) {
            $value = array_filter_recursive($value, $callback);
        } else {
            if ( ! is_null($callback)) {
                if ( ! $callback($value)) {
                    unset($array[$key]);
                }
            } else {
                if ( ! (bool) $value) {
                    unset($array[$key]);
                }
            }
        }
    }
    unset($value);
    return $array;
} 
```

但它只删除子数组中的元素；我需要完全删除子数组。

我不想要这个：

```
Array(
    [10] => Array([25.00] => 1)
    [9] => Array([30.00] => 3)
    [8] => Array([30.00] => 4)
    [12] => Array()
    [1] => Array()
    [2] => Array()
) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-13T22:16:35.850

有点晚了，但可以帮助寻找相同答案的人。我用这种非常简单的方法来；

1.  从不包含值的嵌套数组中删除所有键，然后
2.  删除所有空的嵌套数组。

* * *

```
$postArr = array_map('array_filter', $postArr);
$postArr = array_filter( $postArr ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-03T18:23:18.643

以下功能适用于我的情况。我们可以使用一个简单的递归函数从多维 PHP 数组中删除所有空元素：

```
function array_filter_recursive($input){
    foreach ($input as &$value){
        if (is_array($value)){
            $value = array_filter_recursive($value);
        }
    }
    return array_filter($input);
} 
```

然后我们只需要调用这个函数：

```
$myArray = array_filter_recursive($myArray); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T17:26:03.130

不确定这是否正是您要寻找的。

 ~~~~```
function array_remove_null($array) {
    foreach ($array as $key => $value)
    {
        if(is_null($value))
            unset($array[$key]);
        if(is_array($value))
            $array[$key] = array_remove_null($value);
    }
    return $array;
} 
```~~  ~~> 更新（更正）：

```
function array_remove_null($array) {
    foreach ($array as $key => $value)
    {
        if(is_null($value))
            unset($array[$key]);
        if(is_string($value) && empty($value))
            unset($array[$key]);
        if(is_array($value))
            $array[$key] = array_remove_null($value);
        if(isset($array[$key]) && count($array[$key])==0)
            unset($array[$key]);
    }
    return $array;
} 
```

我确信更好地检查并使其更强大可能有助于解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T10:45:48.840

使用 array_map() 过滤 $array 中的每个数组：

```
$newArray = array_map('array_filter', $array); 
```

这是[演示](http://codepad.org/xpSUedId)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-13T09:47:01.610

```
$newArray = array_map('array_filter', $array); 
```

这个sintax它的工作，非常有帮助，非常感谢你们..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-24T05:11:22.553

使用`array_filter`如下`array_map`：

```
$arr=array_filter(array_map('array_filter', $arr)); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-06-08T13:19:52.890

这会在多维度数组上递归删除所有具有空值的项目。适用于 PHP >= 5.6。如果要删除所有“空”值，请替换`!is_null($value)`为`!empty($value)`.

```
function recursivelyRemoveItemsWithNullValuesFromArray(array $data = []): array
{
    $data = array_map(function($value) {
        return is_array($value) ? recursivelyRemoveItemsWithNullValuesFromArray($value) : $value;
    }, $data);

    return array_filter($data, function($value) {
        return !is_null($value);
    });
} 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2017-10-15T13:45:57.453

因为数组中的每个子数组只有一个元素，所以可以使用以下两种方法之一来简化方法。逻辑上的优势在于避免在`array_filter`二级元素上使用函数迭代器 ( )。这就是为什么`current()`更适合这个问题/页面的原因。

代码：（[演示](http://sandbox.onlinephpfunctions.com/code/29b138c53461b96589ebf3b2fda71e721f247b53)）

```
$quantities=[
    10=>['25.00'=>1],
    9=>['30.00'=>3],
    8=>['30.00'=>4],
    12=>['35.00'=>null],
    1=>['30.00'=>''],
    2=>['30.00'=>null]
];

var_export(array_filter($quantities,function($a){return strlen(current($a));})); 
```

或者

```
foreach($quantities as $key=>$sub){  // could be done "by reference" but that impacts code stability
    if(!strlen(current($sub))){  // if subarray value has no length
        unset($quantities[$key]);
    }
}
var_export($quantities); 
```

两者都输出相同的结果（故意删除空值并保留`0`值）

```
array (
  10 => 
  array (
    '25.00' => 1,
  ),
  9 => 
  array (
    '30.00' => 3,
  ),
  8 => 
  array (
    '30.00' => 4,
  ),
) 
```

在上述方法中，`strlen()`用于检查 2 级元素，因为 OP 仅将整数列为“非空”值。未来的 SO 读者可能会根据可能包含`false`, `null`, `'0'`,`0`等的元素有不同的要求。合适的替换函数`strlen()`可能是：任何[“is_”函数](http://php.net/manual-lookup.php?pattern=is&scope=quickref)、[empty()](http://php.net/manual/en/function.empty.php)、任何[“ctype”函数](http://php.net/manual/en/book.ctype.php)等等。

如果 OP 的 2 级数组包含多个元素，并且 OP 想要删除所有零、假 y、空、空元素（意味着不希望或保证不会出现零），那么[Alastair F 的答案](https://stackoverflow.com/a/18796083/2943403)将是最好的选择。

如果 OP 的输入数组具有未知数量的级别并且应该删除零-ish/false-y/empty/null 元素，那么[Reza Mamun 的答案](https://stackoverflow.com/a/32382871/2943403)是一种合乎逻辑的递归方法。

我的观点是（以及我花费大量时间和精力来回答这个问题的动机）`array_filter()`是贪婪的，如果您不知道这种默认行为，您的项目可能会默默地输出不正确的信息。我希望这种解释可以为程序员节省一些时间和精力。~~~~

# ruby-on-rails - 如何处理 Rails Gem 的配置

> ID：10214536
> 
> 赞同：7
> 
> 时间：2012-04-18T17:18:36.020
> 
> 标签：ruby-on-rails, ruby, rubygems

我正在为 Rails 发布我的第一个 Gem。这很简单，但我需要提供一些设置配置选项的访问权限。我想让用户在 'config/initializers' 中放入一些东西，并用我的 gem 绑定到它。

所以，问题是：在 Rails gem 中提供配置选项是否有最佳实践？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-18T17:25:06.713

在我帮助开发的引擎[Forem](https://github.com/radar/forem)中，我们`mattr_accessors`在顶级常量上使用如下：

**库/forem.rb**

```
module Forem
  mattr_accessor :user_class, :theme, :formatter, :default_gravatar, :default_gravatar_image,
                 :user_profile_links, :email_from_address, :autocomplete_field,
                 :avatar_user_method, :per_page
... 
```

然后在里面`config/initializers`我们要求用户像这样设置它们：

```
Forem.user_class = 'User'
Forem.autocomplete_field = :login 
```

使用简短的 gem 名称，此解决方案与我将提出的另一个解决方案没有太大区别。

* * *

**解决方案#2**

仍然`mattr_accessors`在您的顶级常量上使用，但`config`在此模块上提供一个方法，该方法接受一个块并产生对象：

```
module ReallyComplicatedGemName
  mattr_accessor :....
  def self.config(&block)
    yield(self)
  end
... 
```

这样人们就可以做到：

```
ReallyComplicatedGemName.config do |config|
  config.user_class = "User"
  ...
end 
```

# asp.net - IIS 中非托管代码中的用户定义类 typedef 导致挂断但在 VS 中没有

> ID：10214537
> 
> 赞同：0
> 
> 时间：2012-04-18T17:18:46.190
> 
> 标签：asp.net, pinvoke, typedef

背景：我创建了一个包含 2 个 c 文件的 DLL。这些 c 文件引用了第三个 c 文件，该文件定义了一个用户定义的类型（我们称之为 class_pointer），它是一个类类型的指针。

例如 typedef class pointer_class *class_pointer;

然后定义类： typedef class pointer_class {..}

pointer_class 具有与它相关的各种变量和函数，原始 2 c 文件通过 class_pointer 使用这些变量和函数。

我在 ASP.NET C# Web 应用程序中使用这个 DLL。我正在使用 PInvoke 将函数导入 dll。但是，当我调用这些涉及class_pointer 的函数时，在IIS 上运行的网站会挂起。这在 VS 调试器中不会发生。如果我注释掉所说的 class_pointers，一切都会顺利运行——我可以访问 DLL 和所有内容。

我已尝试更改我的 bin 目录中包含的所有 DLL 的权限（为了安全起见），以使 NETWORK SERVICE 具有读取/执行权限。dll 将在没有 class_pointers 的情况下工作，所以我认为这不是权限问题。当涉及这些 class_pointers 时，是否有人对可能导致 IIS 挂起的原因有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:18:37.377

在微软的调试工具的帮助下，我终于能够解决这个问题。

class_pointers 是由另一个开发人员编写的，该开发人员后来离开了我工作的地方。在pointer_class中，有一个获取当前应用路径的函数。在 web 上运行时，它被设置为 SYSWOW64 中的 inetsrv 目录（我运行的机器是 64 位机器）。为了解决这个问题，我们在运行 Web 时设置了网站的应用程序路径，而不是 .exe 应用程序的运行位置 (SYSWOW64/inetsrv)。

由于应用程序路径错误，本机 dll 无法加载某些文件并弹出警告消息。这些弹出消息正在等待用户响应，由于我们无法在网络上获得消息，因此应用程序挂起！

希望这对其他人有帮助！

# android - surfaceview, 活动, startactivityforresult, 活动中的对话框

> ID：10214538
> 
> 赞同：1
> 
> 时间：2012-04-18T17:18:52.867
> 
> 标签：android, android-activity, surfaceview

我正在做一个小游戏并遇到一些问题。

有菜单

```
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch (arg0.getId()){
    case R.id.bStartGame:

        Intent a = new Intent(Menu.this, Action.class);
        startActivityForResult(a, 1);

        break; } 
```

然后是启动surfaceview的活动

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(new GameView(this));
} 
```

然后是带有游戏机制的surfaceView。

我的大部分代码都在这个视图中。

现在我有问题要为gameoverscreen找到一个好的解决方案。

如果我在surfaceview 内开始一个新活动，它会起作用-但我没有得到result()，它是会话期间获得的分数。

所以现在我想问你们如何解决这个问题。

想了一个办法，但是不知道怎么实现。它将高分从表面视图传递给活动并将其设置为结果（菜单活动返回）。并通过对话框启动一个 xml 文件，这将是游戏结束屏幕，一旦玩家触摸后退按钮，他就会回到菜单，在那里他可以看到他的得分。

你能告诉我如何编码吗？

亲切的问候丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:08:28.323

有很多方法可以解决这个问题：

- 使用 startActivityForResult ，然后将其从新活动中发送回来，使用 onActivityResult 将其捕获在旧活动中（检查[https://developer.android.com/reference/android/app/Activity.html](https://developer.android.com/reference/android/app/Activity.html)）

- 做我所做的（懒惰的，hacky方式:)：使用startActivity（）启动新活动并将高分添加为添加到意图的额外数据。在您的新活动中，使用 getIntent().getInt（随便什么）来获取发送的分数数据并按照您的意愿进行处理。然后关闭该活动，您将返回到前一个持有您的表面视图的活动。

现在的诀窍：在开始新活动并将其分数添加到意图之前，只需在 Surfaceview 的活动中运行与在新活动中相同的分数计算！这样，当您返回到 SurfaceView 的活动时，您仍然会获得正确的新分数（如果存储/恢复正确；不要忘记将其添加到您的保存/恢复状态和/或 SurfaceView 的私有变量中） ！

唯一的缺点是您必须在两个位置更新您的评分机制。这不是好的编程。但它有效而且很容易。

# javascript - jQuery 获取 div 的当前标签并填充

> ID：10214539
> 
> 赞同：0
> 
> 时间：2012-04-18T17:18:57.070
> 
> 标签：javascript, jquery, asp.net-mvc-3

我有多个 div，每个 div 都有一个文本框和一个标签。当文本框位于 .focus 时，我需要在标签中填充一些文本

到目前为止的脚本：

```
 $(function () {
   $('input:text').focus(function () {
     //how do I get the current label and populate with some text? and when clicking on a 
    //different textbox, I want to clear the previous label and just show the current
    //div's label with some data
 });
}); 
```

例如

```
<div>
    @Html.TextBoxFor(model => model.Title)
    <label>
    </label>
</div>
<div>
    @Html.TextBoxFor(model => model.Name)
    <label>
    </label>
</div>
<div>
    @Html.TextBoxFor(model => model.Address)
    <label>
    </label>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:40:02.410

为您制作的工作示例：

[http://jsfiddle.net/KhQtx/](http://jsfiddle.net/KhQtx/)

HTML：

```
<div>
    <input type="text" title="Tittle" value=""/>
    <label>
    </label>
</div>
<div>
    <input type="text" title="Name" value=""/>
    <label>
    </label>
</div>
<div>
    <input type="text" title="Address" value=""/>
    <label>
    </label>
</div>​ 
```

JS：

```
$('input:text').focus(function () {
   // clean label
   $('input:text').next('label').html("");

   // get input title
   var title = $(this).attr('title');            

   // add html to label from input title
   $(this).next('label').html(title);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:24:12.303

```
$(function () {
    $('input:text').focus(function () {
        $(this).siblings('label').empty().html('what you want..');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:24:20.910

您可以使用[parent](http://api.jquery.com/parent/)并[找到](http://api.jquery.com/find/)：

```
var label = $(this).parent().find('label') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T17:26:00.633

尝试：

```
$('input:text').focus( function(){
    $(this).next().text('text here');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T17:26:26.743

```
$('input:text').focus(function () {
   $('input:text').next('label').html(""); // reset all first
   $(this).next('label').html("Your text here");
}); 
```

[看这里](http://jsfiddle.net/VxP57/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T17:26:58.870

```
$(function () {
   $('input:text').focus(function () {
     // To put textboxvalue in label
     $($(this).parent().find('label')).val($(this).val());
     // To put customvalue in label
     $($(this).parent().find('label')).val("Hi i am a label");
 });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-18T17:27:05.697

```
$(function () {
   $('input:text').focus(function(e){
       $('div label').text("");
       $(this).next('label').text('SomeText');
    });
});​ 
```

[**例子**。](http://jsfiddle.net/heera/CpaF5/)

注意：最好为 div 分配一个类名，如下所示

```
<div class="parentDiv">
    <input type="text" id="Title" />
    <label></label>
</div> 
```

因此，您可以缩小选择范围，例如

```
 $('div.parentDiv label').text(""); 
       $(this).next('label').text('SomeText'); 
```

这将避免其他 div 的标签为空。

# php - 连接两个二进制字符串

> ID：10214545
> 
> 赞同：3
> 
> 时间：2012-04-18T17:19:23.950
> 
> 标签：php, sockets

我正在使用 socket_recv 函数接收二进制数据。php中是否有某种方法可以将它们合并为一个，以便我仍然可以像使用二进制字符串一样使用它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T17:29:55.763

您可以使用运算符简单地连接任意字符串`.`：

```
<?php
$s = "a\0b" . "c\0d";
var_export($s); // outputs  'a' . "\0" . 'bc' . "\0" . 'd' 
```

# sql-server - 还原备份访问被拒绝

> ID：10214546
> 
> 赞同：19
> 
> 时间：2012-04-18T17:19:31.027
> 
> 标签：sql-server, backup, restore, database-restore

我正在尝试将备份从`.bak`文件还原到本地数据库服务器并不断收到错误消息。

> 执行 Transact-SQL 语句或批处理时发生异常。(Microsoft.SqlServer.ConnectionInfo)
> 无法打开备份设备“C:\Clients\SQLitis\jMKZ.bak”。操作系统错误 5（拒绝访问。）。
> RESTORE HEADERONLY 异常终止。（Microsoft SQL Server，错误：3201）

甚至不知道从哪里开始排除故障。我使用的是管理员帐户并且拥有完全权限，所以应该没有什么可以拒绝我这样做，但我仍然收到错误消息。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-18T17:34:23.377

听起来 SQL Server 运行的服务帐户没有文件夹 C:\Clients\SQLitis 的权限。

安装 SQL Server 时，希望它被设置为使用不是机器管理员的域用户帐户（“服务帐户”）。因此，SQL Server 安装程序仅授予对 SQL Server 安装程序创建的文件夹的权限。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-23T19:48:30.263

您需要将该文件夹的权限授予 SQL Server 所充当的用户帐户。就我而言，它是**NT Service\MSSQLSERVER**

**您可以在SQL Server 配置管理器**中查找/更改 SQL Server 用户。这是一个链接，显示了如何：

[http://www.bidn.com/blogs/ShawnHarrison/ssis/2134/access-denied-during-database-backup](http://www.bidn.com/blogs/ShawnHarrison/ssis/2134/access-denied-during-database-backup)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-28T09:40:48.510

也许有点 hacky，但我通过将 .bak 文件复制到指定的备份文件夹中解决了这个问题。这样我就不必更改任何权限。

# javascript - 浏览器键事件是否仅对焦点元素触发（冒泡）？

> ID：10214547
> 
> 赞同：1
> 
> 时间：2012-04-18T17:19:38.187
> 
> 标签：javascript, focus, dom-events, keyevent

实验证据使我相信键（向上、向下、按下）事件（在气泡阶段）仅对*焦点*元素触发。

这种行为可能是直观的、明显的和/或可取的，但在任何地方都没有看到这种记录，所以我希望社区能证实我的“理论”。

否则，我有一些代码不能正确地让这些事件冒泡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:31:55.463

关键事件总是针对具有焦点的元素，并冒泡直到被取消。

如果没有输入元素或文档/窗口本身是目标并具有焦点，则无法按下键。

如果您正在查看输入的父项，并且焦点更改为窗口，则无法在父项中找到下一个键事件（因为它不存在），但您始终可以在文档级别找到它。

# iphone - 检测 RestKit 中的重定向不起作用？

> ID：10214551
> 
> 赞同：1
> 
> 时间：2012-04-18T17:19:50.737
> 
> 标签：iphone, objective-c, redirect, restkit

我有一个返回 302 的 Web 服务，并且自动重定向由 RestKit 完成。我试图在重定向之前做额外的逻辑。我知道 RestKit 有`isRedirect`和`isRedirection`. 所以在`request:didLoadResponse`代表中，我试图检查它，但它似乎没有击中任何一个。有什么我想念的吗？

```
- (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response 
{
    if ([response isRedirection]) 
    {
        NSLog(@"redirection");
    } 
    else if ([response isRedirect])
    {
        NSLog(@"redirect");
    }
    NSLog(@"response %@", [response bodyAsString]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:58:21.933

通过实施这个解决了这个问题：

```
@implementation RKResponse (CustomRedirect)

- (NSURLRequest *)connection:(NSURLConnection *)inConnection willSendRequest:(NSURLRequest *)inRequest redirectResponse:(NSURLResponse *)inRedirectResponse 
{
    NSLog( @"redirectResponse ***********************************************");

    NSURLRequest *newRequest = inRequest;
    if (inRedirectResponse) {
        newRequest = nil;
    }
    return newRequest;
}

@end 
```

这基本上表示您想自己处理重定向，因为您返回 nil。现在检查`isRedirect`和`isRedirection`将被击中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:35:32.740

我已经找到了一种替代 kailon 方式的方法，对于每个对该解决方案有问题的人来说，它的“代码侵入性”应该少一些。采用

```
[request setFollowRedirect:NO] 
```

并且您应该能够在 requestDidReceiveResponse 回调中捕获 302。它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T16:11:49.763

一个旧线程，我知道，但以防万一有人来看。如果您使用的是 RKObjectManager，您可以实现`setRedirectResponseBlock`以忽略/修改重定向：

```
RKObjectManager *objectManager = [RKObjectManager managerWithBaseURL:url];
RKObjectRequestOperation *operation = [objectManager objectRequestOperationWithRequest:request ...etc...];
[operation.HTTPRequestOperation setRedirectResponseBlock:^NSURLRequest *(NSURLConnection *connection, NSURLRequest *request, NSURLResponse *redirectResponse) {
        return redirectResponse ? nil : request;
    }];
[objectManager enqueueObjectRequestOperation:operation]; 
```

似乎可以解决问题。

# sql - 如果 field 为 null，则拉取某些字段；否则，拉其他字段

> ID：10214554
> 
> 赞同：10
> 
> 时间：2012-04-18T17:20:02.483
> 
> 标签：sql, sql-server, oracle

我有下表：

```
TestTable  
  ColumnA  
  Column1  
  Column2  
  Column3  
  Column4 
```

我想编写一个简单的 SQL 语句来检查 ColumnA 并根据它是否为空返回某些列。

像（伪）这样的东西：

```
If ColumnA Is Null
  SELECT ColumnA, Column1, Column2 
  FROM TestTable
Else
  SELECT ColumnA, Column3, Column4
  FROM TestTable 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-18T17:24:08.637

使用 SQL CASE 表达式：

```
SELECT
    ColumnA,
    CASE WHEN ColumnA IS NULL THEN Column1 ELSE Column3 END AS ColumnB,
    CASE WHEN ColumnA IS NULL THEN Column2 ELSE Column4 END AS ColumnC
FROM
    TestTable 
```

请参阅：
[CASE (SQL-Server Transact-SQL)](https://msdn.microsoft.com/en-us/library/ms181765.aspx)
[CASE 表达式 (Oracle)](https://docs.oracle.com/cd/B19306_01/server.102/b14200/expressions004.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T17:25:34.653

我能想到几条路线，没有一条一定很漂亮......

人们经常找到第一个，然后寻找更好的东西。我不确定是否真的有更好的东西。

```
SELECT
  ColumnA,
  CASE WHEN ColumnA IS NULL THEN Column1 ELSE Column2 END AS ColumnB,
  CASE WHEN ColumnA IS NULL THEN Column3 ELSE Column4 END AS ColumnC
FROM
  yourTable 
```

或者...

```
SELECT
  yourTable.ColumnA,
  subTable.ColumnB,
  subTable.ColumnC
FROM
  yourTable
CROSS APPLY
(
  SELECT yourTable.Column1 AS ColumnB, yourTable.Column3 AS ColumnC WHERE yourTable.ColumnA IS NULL
  UNION ALL
  SELECT yourTable.Column2 AS ColumnB, yourTable.Column4 AS ColumnC WHERE yourTable.ColumnA IS NOT NULL
)
  AS subTable 
```

或者...

```
SELECT
  ColumnA,
  Column1 AS ColumnB,
  Column2 AS ColumnC
FROM
  yourTable
WHERE
  ColumnA IS NULL

UNION ALL

SELECT
  ColumnA,
  Column2 AS ColumnB,
  Column4 AS ColumnC
FROM
  yourTable
WHERE
  ColumnA IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T17:39:24.823

给这只特殊猫剥皮的另一种方法：

```
SELECT ColumnA,
       NVL2(ColumnA, Column3, Column1),
       NVL2(ColumnA, Column4, Column2)
  FROM TestTable 
```

分享和享受。

# jquery - 改变 使用 CSS 着色？

> ID：10214558
> 
> 赞同：7
> 
> 时间：2012-04-18T17:20:08.267
> 
> 标签：jquery, css, canvas, colors

有没有办法使用 CSS 而不是 JS 来更改 HTML5 元素的颜色？我需要使用自定义的 LESS CSS 规则自定义 qTips 工具提示指针，我无法使用 jQuery 引用这些规则。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T17:25:22.970

是的，我不知道你遇到了什么问题，但我在[这里有一个工作的 jsfiddle](http://jsfiddle.net/AnzS8/)

```
<canvas></canvas>​

canvas {
    background: #cdcdcd;
    width:200px;
    height:200px;
}​ 
```

# ruby-on-rails-3 - 在 Rails 上通过电子邮件插入记录

> ID：10214572
> 
> 赞同：2
> 
> 时间：2012-04-18T17:20:55.550
> 
> 标签：ruby-on-rails-3, email

我在 rails3 上开发了一个消息系统。根据要求，当用户 A 向用户 B 评论任何消息时，该消息将存储在 DB 中，还会发送电子邮件通知。

现在我的要求是当用户 B 通过带有一些消息的邮件回复电子邮件通知时，它应该被插入到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:36:56.577

与发送电子邮件相比，这是一项相当复杂的任务。基本上，您将有几个步骤：

*   在您的邮件中设置接收方法
*   设置您的电子邮件服务器以将电子邮件转发到您的应用程序
*   处理电子邮件内容
*   保存到数据库中

[可能在这个rails guide](http://guides.rubyonrails.org/action_mailer_basics.html#receiving-emails)中可以找到对整个过程最直接的解释。

# visual-studio-2010 - 在 App.Config 中更改 Web 服务 URL

> ID：10214575
> 
> 赞同：3
> 
> 时间：2012-04-18T17:21:14.310
> 
> 标签：visual-studio-2010, web-services, sharepoint, sharepoint-2010

我有一个小的 sharepoint 项目，它集成到一个更大的 sharepoint 项目中。我的项目使用两个 Web 服务。我已经`Web Reference`使用`VS2010`. 我们有两套网络服务——一套用于测试，一套用于生产。当我在本地部署应用程序时，Web 服务设置将写入`C:\inetpub\wwwroot\wss\VirtualDirectories\80\`我本地计算机上的 web.config 文件。该部分看起来像这样 -

```
 <applicationSettings>
    <XXX.YYY.Properties.Settings>
      <setting name="XXX_YYY_ZZZ_WS1" serializeAs="String">
        <value>http://<TEST_IPAddress>/WebService/WS1.asmx</value>
      </setting>
      <setting name="XXX_YYY_ZZZ_WS2" serializeAs="String">
        <value>http://<TEST_IPAddress>/WebService/WS2.asmx</value>
      </setting>
    </XXX.YYY.Properties.Settings>
  </applicationSettings> 
```

测试和生产 Web 服务之间的区别只是 IP 地址。当我将 IP 地址更改为生产时，应用程序未使用新值。我不得不返回 VS，`Web Reference URL`将`Properties`对话框中的更新为正确的生产 url，然后再次重新部署包。这很乏味，因为我不断地从测试切换到生产 Web 服务 url。我希望能够更改 app.config 中的 IP 地址，在浏览器中刷新页面，它应该会选择新的 url。

难道我做错了什么？还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:27:14.703

我认为如果您在代码中更改 web 服务 url，那么您将不必重复构建过程。你可以这样改变

```
WebServiceObjectName webService = new WebServiceObjectName (); 
webService.Uri = [IPaddress or DNS name] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T21:47:07.040

我们这样做：

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IPublicWS"
                openTimeout="00:00:05"
                sendTimeout="00:03:00"
                receiveTimeout="00:10:00"
                closeTimeout="00:00:30"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="262144" maxBufferPoolSize="524288" maxReceivedMessageSize="262144"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
              <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="131072" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
              <security mode="None">
                <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
                <message clientCredentialType="UserName" algorithmSuite="Default" />
              </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <!-- Production -->
        <endpoint name="SvLive" address="http://sv.com/PublicWS/PublicWS.svc/PublicWS" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IPublicWS" contract="SV.IPublicWS" />

        <!-- Test -->
        <endpoint name="SvTest" address="http://staging.sv.com/PublicWS/PublicWS.svc/PublicWS" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IPublicWS" contract="SV.IPublicWS" />
    </client>
</system.serviceModel> 
```

​ 然后，要获取此 Web 服务的客户端引用：

```
public static PublicWSClient Client()
{
#if PRODUCTION
    return new PublicWSClient("SvLive");
#else
    return new PublicWSClient("SvTest");
#endif
} 
```

这被称为：

```
var sv = PublicWSClient.Client(); 
```

这可以防止您描述的任何手动步骤，并允许在准备签入的单个配置文件中捕获测试和实时。

# python - 如何针对大型规则集（5000+ 并且还在增长）构建有效的电子邮件过滤器

> ID：10214580
> 
> 赞同：2
> 
> 时间：2012-04-18T17:21:34.513
> 
> 标签：python, regex, email, postgresql

我正在构建一个电子邮件过滤器，我需要一种有效地将单个电子邮件与大量过滤器/规则匹配的方法。可以在以下任何字段中匹配电子邮件：

*   来自名字
*   从地址
*   发件人名称
*   发件人地址
*   学科
*   邮件正文

目前有超过 5000 个过滤器（并且还在增长），它们都定义在我们的 PostgreSQL (9.1) 数据库的一个表中。每个过滤器可能有 1 个或多个上述字段填充了 Python 正则表达式。

当前进行过滤的方式是选择所有过滤器并将它们加载到内存中。然后，我们对每封电子邮件进行迭代，直到在所有非空白字段上找到正匹配。不幸的是，这意味着对于任何一封电子邮件，都可能有多达 30,000 (5000 x 6) 次 re.match 操作。显然，随着添加更多过滤器，这不会扩展（实际上它已经没有）。

有一个更好的方法吗？

**到目前为止我考虑过的选项：**

1.  将保存的 python 正则表达式转换为 POSIX 样式的，以利用 PostgreSQL 的 SIMILAR TO 表达式。这真的会更快吗？在我看来，它只是将负载转移到其他地方。

2.  基于每个用户定义过滤器。虽然这并不实际，因为我们的系统用户实际上受益于大量预定义的过滤器。

3.  切换到基于文档的搜索引擎，例如弹性搜索，其中将要过滤的第一封电子邮件保存为规范表示。通过找到类似的电子邮件，我们可以缩小到特定的功能集进行测试并获得肯定的匹配。

4.  切换到贝叶斯过滤器，这也将给我们一些机器学习能力来检测类似的电子邮件或对现有电子邮件的更改，这些邮件仍然具有足够高的概率来猜测它们是同一件事情。这听起来很酷，但我也不确定它是否会扩展得特别好。

是否有其他选择或方法需要考虑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:42:06.600

PostgreSQL 9.1 版中的三元组支持可能会给您想要的。

[http://www.postgresql.org/docs/9.1/interactive/pgtrgm.html](http://www.postgresql.org/docs/9.1/interactive/pgtrgm.html)

它几乎肯定会在 9.2（计划于 2012 年夏天发布）中成为一个可行的解决方案，因为新版本知道如何使用三元索引来快速匹配正则表达式。在我们的商店中，我们发现三元索引的速度非常好。

此外，如果您想要进行“最近邻”搜索，您可以根据与搜索参数的相似性找到 K 个最佳匹配项，那么三元索引非常棒——它实际上从索引扫描中返回按“距离”顺序排列的行”。搜索 KNN-GiST 以获取文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T19:19:10.453

这些正则表达式有多复杂？如果它们真的是正则表达式（没有所有疯狂的 python 扩展），那么您可以将它们全部组合成一个正则表达式（作为替代方案），然后使用一个简单的（即内存中的）正则表达式匹配器。

我不确定这是否可行，但我怀疑您会惊喜地发现正则表达式编译成一个小得多的状态机，因为它将合并常见状态。

另外，对于快速的正则表达式引擎，可以考虑使用[nrgrep](http://www.mendeley.com/research/nrgrep-fast-flexible-patternmatching-tool/)来快速扫描。当从一个标题跳到下一个标题时，这应该可以加快您的速度（我自己没有使用它，但他们是朋友的朋友，当我阅读时，论文看起来很整洁）。

# android - android ActionBar 中 EditText 上的 addTextChangedListener()

> ID：10214584
> 
> 赞同：4
> 
> 时间：2012-04-18T17:21:42.803
> 
> 标签：android, nullpointerexception, android-edittext, android-actionbar, actionbarsherlock

我在我的操作栏中（实际上是 ActionBarSherlock）中有我的 edittext 作为操作项。布局在自己的 xml 中，一切正常，我可以访问 edittext 的内容并轻松更改。

我想在这个edittext上添加一个更改监听器。加载 onCreateOptionsMenu(Menu menu) 并填充菜单后，我创建了我的

```
EditText search=(EditText) findViewById(R.id.searchbar); // its name in a frame layout 
```

接着

```
search.addTextChangedListener(new TextWatcher(){

    @Override
    public void afterTextChanged(Editable s) {

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before,
            int count) {
    }
}); 
```

我在这个edittext上不断收到空指针异常。问题可能是显而易见的，但这给我带来了很多麻烦..

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T17:34:35.483

操作栏不在内容视图中，因此调用`findViewById`将始终返回`null`。

相反，您需要调用`menu.findItem(R.id.your_menu_item).getActionView()`以获取对操作视图的引用。使用该视图，您可以调用`findViewById`以获取对 的引用`EditText`（或者如果`EditText`是根视图，则您已经拥有该引用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:30:10.153

两个想法，都不能保证——

您是否检查过：

```
EditText search=(EditText) findViewById(R.id.searchbar); 
```

返回非空？如果返回 null：

*   SetContentView （在正确的文件上！！）在该行之前吗？
*   您的 xml 中是否有问题......或者它可能只需要“清理”并重建。

或者，您是否不小心在两者之间进行了搜索（例如，重新声明了它）？

# javascript - Google maps api v3，定义用户当前位置

> ID：10214587
> 
> 赞同：0
> 
> 时间：2012-04-18T17:21:48.300
> 
> 标签：javascript, google-maps-api-3, geolocation

```
function onPositionUpdate(position) {
    var lat = position.coords.latitude;
    var lng = position.coords.longitude;

    var markerPoint = new google.maps.LatLng(lat, lng);

    var marker = new google.maps.Marker({
        position: markerPoint,
        map: map,
        title: 'Your Location'
    });
}

function button_clicked() {
    if (navigator.geolocation)
        navigator.geolocation.getCurrentPosition(onPositionUpdate);
    else
        alert("navigator.geolocation is not available");
} 
```

此代码运行正确并显示用户位置。当我在家里尝试这个时，它会显示正确的地址，但是当我在另一个位置尝试这个时，这个代码不会显示正确的地址。为什么？我不知道这段代码是如何运行的（这段代码是否定义了 IP 或其他信息）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:00:48.370

您可以检查其他程序是否可以找到您。如果不是，则可能不是您的代码不正确：

[http://html5demos.com/geo](http://html5demos.com/geo)

某些安全措施可能会导致客户端不会自动共享位置信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T23:08:17.640

你有没有尝试过 ：

```
navigator.geolocation.getCurrentPosition(onPositionUpdate() ); 
```

不确定您的回调是否必须有括号。这是我会尝试的。

我还注意到地理定位需要一点时间才能将近似值缩小到更小的半径。可能必须调用**position update**。

# php - ul li 限制结果并在悬停时显示更多

> ID：10214593
> 
> 赞同：0
> 
> 时间：2012-04-18T17:22:18.740
> 
> 标签：php, jquery, css, html-lists

我有一个`ul`由 PHP 函数生成的。

```
<ul> 
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
<li>Item 4</li>
<li>Item 5</li>
</li> 
```

我想以这种方式“限制”结果并显示列表（在 HTML 页面中）

```
Item1 - Item2 - 3 more... 
```

鼠标悬停后必须显示“3 more”。

那可能吗？我怎么能用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:39:54.917

首先，我们需要说明我们的限制和*更多*计数器：

```
var limit = 3
var more = 0 
```

然后我们可以隐藏所有`li`超出我们限制的s：

```
$("#tricky_list li").each(function(index) {
    if(index >= limit){
        $(this).hide();
        more++;
    }
}); 
```

如果有任何`li`标签隐藏地点信息：

```
if(more){
    $("#tricky_list").append('<li class="more">' + more + ' more</li>');
} 
```

让我们让它成为一个触发器和命令来显示 hidden `li`s on `mouseover`。

```
$("#tricky_list li.more").live("mouseover", function(){
    $("#tricky_list li").each(function(index) {
            $(this).show();
    });
    $("#tricky_list li.more").hide()
}); 
```

​这样你就有了干净的html&css，一切都由js无缝完成。

[http://jsfiddle.net/27bvG/](http://jsfiddle.net/27bvG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:31:44.017

首先，您可以使用此 CSS

```
ul li:nth-child(-n+5) {display:none}  /* Shows only first 5*/
.showAll {display:block;} 
```

然后在悬停时你可以做..

```
$('ul')
.mouseover(function(){
    $(this).find('li').filter(':not(:visible)').addClass('showAll'); 
    //shows hidden li's
})
.mouseout(function(){
    $(this).find('li.showAll').removeClass('showAll');
    //hides those li's
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:43:35.447

```
var numToShow = 3;
var moreLi;
$('ul').children('li').hide().each(function() {
    if ($(this).index() < numToShow) {
        $(this).show();
    }
}).parent('ul').append('<li><a href="#" id="showMore">More</a></li>');

$('#showMore').click(function() {
    moreLi = $(this).parent('li');
    moreLi.siblings().show();
    moreLi.remove();
}); 
```

可能有一种更有效的方法来编写它，而且它肯定会更健壮，但这是您正在寻找的快速方法。

示例：http: [//jsfiddle.net/3Ak2X/](http://jsfiddle.net/3Ak2X/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T17:39:32.710

这应该可以帮助您入门。

[http://jsfiddle.net/qnQ7r/](http://jsfiddle.net/qnQ7r/)

# c# - 将 UNC 路径与凭据一起使用

> ID：10214596
> 
> 赞同：7
> 
> 时间：2012-04-18T17:22:39.597
> 
> 标签：c#, .net, windows, .net-4.0

我正在开发一个使用 UNC 路径访问同一 LAN 中的远程文件的应用程序。问题是，当尝试访问时，它会引发与 Windows 凭据相关的异常。

有没有办法将凭据添加到我的 UNC 路径？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:34:15.847

看起来 Win32 API 是处理此问题的最常用方法。查看这篇 SO 帖子 [使用凭据从远程、不受信任的域访问共享文件 (UNC)](https://stackoverflow.com/questions/659013/accessing-a-shared-file-unc-from-a-remote-non-trusted-domain-with-credentials)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:31:48.437

[使用 Windows api http://msdn.microsoft.com/en-us/library/windows/desktop/aa370645(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370645(v=vs.85).aspx)中的 NetUseAdd 函数可能对您有用。它允许您通过其 UNC 路径访问目录。

# css - IE7：hasLayout + 位置：相对 + 过滤器 = 溢出：隐藏

> ID：10214597
> 
> 赞同：0
> 
> 时间：2012-04-18T17:22:39.527
> 
> 标签：css, internet-explorer-7

**场景**：在 IE7 中...带有渐变的 Div，悬停时弹出菜单。

听起来很基本，但是将那个位置：相对于容器上，这样我就可以准确地定位菜单与 filter/hasLayout 组合的冲突。

示例：http: [//jsfiddle.net/WgZhH/2/](http://jsfiddle.net/WgZhH/2/)

有人有优雅的 CSS 解决方案吗？我确信我可以将元素嵌套在另一个容器中以分隔冲突的样式，但我希望得到一个纯 CSS 解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:11:35.383

添加另一个包装器怎么样？
像[http://jsfiddle.net/abTmp/](http://jsfiddle.net/abTmp/)

我已经在 IE7（在 VM 上）上进行了测试，它工作正常。

# javascript - 如何将字符串转换为 DOM 元素以与 canvas 元素一起使用？

> ID：10214599
> 
> 赞同：0
> 
> 时间：2012-04-18T17:22:48.577
> 
> 标签：javascript, string, dom, canvas, element

HTML：

```
<img src="person.png" id="person"/> 
```

JavaScript：

```
var object0 = document.getElementById("person");
var i = 0;

context.drawImage(object0, object0X, object0Y);// this works

context.drawImage("object" + i, object0X, object0Y);// this doesn't 
```

错误信息：

```
Could not convert JavaScript argument arg 0 [nsIDOMCanvasRenderingContext2D.drawImage] 
```

我在某处读到，我收到错误的原因是它必须是 DOM 元素，而不是字符串。好吧，我需要运行一个 for 循环，这样我才能影响屏幕上的多个对象，因此需要进行一些连接。我可以使用类似于 parseInt() 的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:52:35.383

使用字符串文字引用变量将导致错误，因为它将评估为字符串文字。

```
var Object0 = document.getElementById('person'); // typeof 'object'
console.log(typeof ('Object' + i)); // This will output 'string' to the console 
```

您可以改为创建一个对象，其属性包含对 DOM 元素的引用。

```
var images = {
    Object0: document.getElementById('person')
    // and so forth...
}; 
```

这非常有用，因为您可以使用括号表示法来引用每个属性。现在，您可以使用 for 循环遍历属性并访问值；像这样：

```
for (var i = 0; i < images.length; i++) {
    context.drawImage(images['Object' + i], Object0X, Object0Y); // This works
    console.log(typeof images['Object' + i]); // This will output 'object' to the console
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:26:05.657

我想你想做：

`context.drawImage(document.getElementById("object" + i), object0X, object0Y);`

这将要求您具有带有 ids `object0`, `object1`, `object2`...的图像元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:30:32.947

您不能通过字符串引用 JS 变量。该错误源于将字符串传递给 drawImage 函数，而不是对图像的引用。只需将变量传递给函数，它就可以工作。

# java - 如何以这种格式 00:00:00.000 将时间分配给 JFreeChart 中的 X 轴

> ID：10214600
> 
> 赞同：0
> 
> 时间：2012-04-18T17:22:58.620
> 
> 标签：java, jfreechart

我的问题是我不知道如何以这种格式 00:00:00.000 将时间分配给 JFreeChart 中的 X 轴。

我正在编写一个应用程序，它将从 CSV 文件中获取数据，其中列如下所示：

> 时间加速度X加速度Y加速度Z

例如，我看了看，但没有找到任何可能对我有帮助的东西。

我的代码：

```
public ChartService() {

        final CombinedDomainXYPlot plot = new CombinedDomainXYPlot(new DateAxis("Time"));
        this.datasets = new TimeSeriesCollection[SUBPLOT_COUNT];

        for (int i = 0; i < SUBPLOT_COUNT; i++) {
            this.lastValue[i] = 100.0;
            final TimeSeries series = new TimeSeries(Y_AXIS_TITLES[i], Millisecond.class);
           // this.series.add(new SimpleDateFormat("hh:mm:ss.mmm"), 0.2222);

            this.datasets[i] = new TimeSeriesCollection(series);
            final NumberAxis rangeAxis = new NumberAxis(Y_AXIS_TITLES[i]);
            rangeAxis.setAutoRangeIncludesZero(false);
            final XYPlot subplot = new XYPlot(
                    this.datasets[i], null, rangeAxis, new StandardXYItemRenderer()
            );
            subplot.setBackgroundPaint(Color.lightGray);
            subplot.setDomainGridlinePaint(Color.white);
            subplot.setRangeGridlinePaint(Color.white);
            plot.add(subplot);
        }

        final JFreeChart chart = new JFreeChart("Dynamic Data Demo 3", plot);

        chart.setBorderPaint(Color.black);
        chart.setBorderVisible(true);
        chart.setBackgroundPaint(Color.white);

        plot.setBackgroundPaint(Color.lightGray);
        plot.setDomainGridlinePaint(Color.white);
        plot.setRangeGridlinePaint(Color.white);

        final ValueAxis axis = plot.getDomainAxis();
        axis.setAutoRange(true);
        axis.setFixedAutoRange(60000.0);  // 60 seconds

        final JPanel content = new JPanel(new BorderLayout());

        final ChartPanel chartPanel = new ChartPanel(chart);
        content.add(chartPanel);

        chartPanel.setPreferredSize(new java.awt.Dimension(790, 620));
        chartPanel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        this.add(content);

    } 
```

请帮忙 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:58:04.413

```
 String s = "10:00:00.000";
    SimpleDateFormat f = new SimpleDateFormat("HH:MM:SS.SSS");

    Date parsedDate = f.parse(s); 
```

您可以如上所述将给定时间转换为日期，然后您可以使用 Date 对象创建 [http://www.jfree.org/jfreechart/api/gjdoc/org/jfree/data/time/Millisecond.html#Millisecond：日期](http://www.jfree.org/jfreechart/api/gjdoc/org/jfree/data/time/Millisecond.html#Millisecond:Date)

# android - 安卓谷歌地图在 Nexus S 上崩溃

> ID：10214601
> 
> 赞同：1
> 
> 时间：2012-04-18T17:22:59.263
> 
> 标签：android, maps, nexus-s

我正在开发一个使用谷歌地图的应用程序。它在除特定设备之外的所有设备上运行良好：Google Nexus S - 我们只能访问一个这样的设备。错误是在地图中导航时，应用程序崩溃并出现 OutOfMemoryError。下面是堆栈跟踪：

```
04-18 14:17:52.601 E/AndroidRuntime( 2714): FATAL EXCEPTION: main
04-18 14:17:52.601 E/AndroidRuntime( 2714): java.lang.OutOfMemoryError
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.graphics.Bitmap.nativeCreate(Native Method)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.graphics.Bitmap.createBitmap(Bitmap.java:585)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at com.google.android.maps.ZoomHelper.createSnapshot(ZoomHelper.java:444)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at com.google.android.maps.ZoomHelper.beginZoom(ZoomHelper.java:194)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at com.google.android.maps.MapView$2.onScaleBegin(MapView.java:380)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ScaleGestureDetector.onTouchEvent(ScaleGestureDetector.java:261)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at com.google.android.maps.MapView.onTouchEvent(MapView.java:682)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.View.dispatchTouchEvent(View.java:5486)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1953)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1714)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1959)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1728)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1892)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1371)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.app.Activity.dispatchTouchEvent(Activity.java:2364)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1840)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.View.dispatchPointerEvent(View.java:5662)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2863)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.os.Looper.loop(Looper.java:137)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at android.app.ActivityThread.main(ActivityThread.java:4340)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at java.lang.reflect.Method.invokeNative(Native Method)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at java.lang.reflect.Method.invoke(Method.java:511)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-18 14:17:52.601 E/AndroidRuntime( 2714):     at dalvik.system.NativeStart.main(Native Method) 
```

任何人都可以确认他们是否遇到了同样的问题？如果是这样，您是否碰巧有解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T18:41:29.520

我在使用 ICS 4.0.4 的 Galaxy S2 上遇到了同样的问题。我从谷歌地图的应用程序菜单中清除了数据并强行停止了它。在此之后重新启动谷歌地图，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:25:33.860

应用程序内存不足。您是否在应用程序的其他地方使用了大量内存（即加载大位图）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T22:27:25.147

我用我的 TF201 遇到了同样的事情。

卸载所有更新，然后**通过桌面市场重新安装。（play.google.com）**。至少这对我有用。可能也会删除缓存的数据和所有这些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T14:44:31.413

以防有人偶然发现这个问题，这里是Android 开发人员关于如何有效使用位图的[指南。](http://developer.android.com/training/displaying-bitmaps/index.html)

# windows - Windows API 调用更改控制台视频模式？

> ID：10214603
> 
> 赞同：0
> 
> 时间：2012-04-18T17:23:02.973
> 
> 标签：windows, console, terminal

是否有 Windows API 调用以不依赖于 INT 10H 的方式更改终端会话的视频模式？（我特别需要进入视频模式 3——在此过程中保存旧版本的屏幕并删除回滚，但如果其他模式也可用，那将非常有趣。）

Windows 版本的 dos.h 不再包含 REGS union 或 INTCALL 宏，所以我猜它已被弃用，取而代之的是一些新方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:45:20.020

更改为传统视频模式首先需要支持通过控制台窗口进入全屏模式。这种支持很久以前就开始消失了。我不太记得我拥有的最后一台仍然允许它的机器，但那是在上个世纪。

有一种快速的方法可以找出答案。打开控制台窗口[并按 Alt+Enter](http://support.microsoft.com/kb/81823)。如果没有任何反应（比如在 64 位操作系统上）或者您听到一声响亮的哔哔声，那么这是不可能的。请记住，即使有，也很少有用户仍然拥有可以工作的机器。

通过编程 DirectX 继续前进。或者只是一个 GUI 应用程序，这些天他们不难拼凑在一起。

# r - 找不到匹配项时 gsub 返回一个空字符串

> ID：10214604
> 
> 赞同：8
> 
> 时间：2012-04-18T17:23:07.443
> 
> 标签：r, regex, gsub

我正在使用`gsub`R 中的函数在文本列表中返回我的模式（参考编号）的出现。除非找不到匹配项，否则这很好用，在这种情况下，我会取回整个字符串，而不是空字符串。考虑这个例子：

```
data <- list("a sentence with citation (Ref. 12)",
             "another sentence without reference")

sapply(data, function(x) gsub(".*(Ref. (\\d+)).*", "\\1", x)) 
```

回报：

```
[1] "Ref. 12"                            "another sentence without reference" 
```

但我想得到

```
[1] "Ref. 12"                            "" 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T17:41:05.367

我可能会走另一条路，因为`sapply`对我来说似乎没有必要，因为这些函数已经矢量化了：

```
fun <- function(x){
    ind <- grep(".*(Ref. (\\d+)).*",x,value = FALSE)
    x <- gsub(".*(Ref. (\\d+)).*", "\\1", x)
    x[-ind] <- ""
    x
}

fun(data) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-18T17:45:21.793

根据文档，这是一个功能，`gsub`它返回输入字符串，如果没有与提供的模式匹配，则返回整个字符串。

在这里，我首先使用该函数`grepl`返回给定字符串中模式存在/不存在的逻辑向量：

```
ifelse(grepl(".*(Ref. (\\d+)).*", data), 
      gsub(".*(Ref. (\\d+)).*", "\\1", data), 
      "") 
```

将其嵌入函数中：

```
mygsub <- function(x){
     ans <- ifelse(grepl(".*(Ref. (\\d+)).*", x), 
              gsub(".*(Ref. (\\d+)).*", "\\1", x), 
              "")
     return(ans)
}

mygsub(data) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T17:49:28.210

```
xs <- sapply(data, function(x) gsub(".*(Ref. (\\d+)).*", "\\1", x))
xs[xs==data] <- ""
xs
#[1] "Ref. 12" "" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-19T04:25:22.740

`strapplyc`在 gsubfn 包中尝试：

```
library(gsubfn)

L <- fn$sapply(unlist(data), ~ strapplyc(x, "Ref. \\d+"))
unlist(fn$sapply(L, ~ ifelse(length(x), x, ""))) 
```

这给出了这个：

```
a sentence with citation (Ref. 12) another sentence without reference 
                         "Ref. 12"                                 "" 
```

如果您不介意列表输出，那么您可以使用 L 并忘记最后一行代码。请注意，`fn$`前缀将其应用于函数的公式参数转换为函数调用，因此第一行代码可以在没有`fn`as 的情况下编写`sapply(unlist(data), function(x) strapplyc(x, "Ref x. \\d+"))`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T17:33:43.877

您可以尝试嵌入`grep( ..., value = T)`该功能。

```
data <- list("a sentence with citation (Ref. 12)",
         "another sentence without reference")

unlist( sapply(data, function(x) { 
  x <- gsub(".*(Ref. (\\d+)).*", "\\1", x)
  grep( "Ref\\.", x, value = T )
  } ) ) 
```

有点笨重，但它的工作原理？它还删除了空的第二个引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-04T10:15:22.007

**基于@joran 的回答**

# 功能：

```
extract_matches <- function(x,pattern,replacement,replacement_nomatch=""){
    x <- gsub(pattern,replacement,x)
    x[-grep(pattern,x,value = FALSE)] <- replacement_nomatch
    x
} 
```

# 用法：

```
data <- list("with citation (Ref. 12)", "without reference", "")
extract_matches(data,  ".*(Ref. (\\d+)).*", "\\1") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-13T13:33:59.710

另一种简单的方法是使用 gsub 但在新函数中指定您想要的 ''

```
noFalsePositives <- function(a,b,x) {
  return(ifelse(gsub(a,b,x)==x,'',gsub(a,b,x)))
}
# usage
noFalsePositives(".*(Ref. (\\d+)).*", "\\1", data)
# [1] "Ref. 12" "" 
```

# matlab - matlab中的索引超出范围

> ID：10214607
> 
> 赞同：-4
> 
> 时间：2012-04-18T17:23:14.497
> 
> 标签：matlab

我无法获得如何运行它，请任何人帮助我。

我收到此错误：

```
 K>> [minutiae_valid]=postprocess_TICO(B,im,~K)
??? Attempted to access wind(273,386); index out of bounds because size(wind)=[368,385].

Error in ==> postprocess_TICO at 214
if (thinned(p,q)==1)&&(wind(p,q)==0) 
```

后处理_Tico

```
function [minutiae_valid]=postprocess_TICO(minutiae_valid,im1,thinned)
% clc;
% close all; 
% clear all;
cell=16;%total no. of cells needed in quantization;
% im1= imread('E:\FINGERPRINT DATABASE\FVC2002\Dbs\Db1_a\16_6.tif');
wl=(33-1)/2; 
% no=20;
% no2=20;
% nox = 0;
% noy = 0;  %to choose border area
% 
m=size(im1,1);
n=size(im1,2);
%m=(round(m/cell))*cell;
%n=(round(n/cell))*cell;
% im1=imresize(im1,[m n]);
% im=double(im1);
% figure;
% subplot(1,2,1);
% imshow(uint8(im));
% title('original input image');
% 
% %Identify ridge-like regions and normalise image--------------------------
%  blksze = 10;   
%  thresh =30;
%  M0=100;
%  STD0=150;
%  [thinim, mask] = imgenhance(im, blksze, M0, STD0);
% subplot(1,2,2); subimage((thinim));
% title('Improved thinned input image', 'FontSize', 12); 
% INPUT_IMG=thinim;
% 
% %minutiae extraction 
% thinned= INPUT_IMG;
% img = INPUT_IMG;
% [minutiae, minutiae_img, combined] = findminutiae(thinned, img);
% totminu_I = size(minutiae,1)
% figure,
% subplot(1,2,1), subimage(combined), title('minutiae before postprocess.')
% %______________________________________________________________
% %TO FIND BOUNDARY OF INPUT IMAGE AS WELL AS REGION OF FALSE MINU
% mask_input=mask;
% border=uint8(zeros(m,n));
%   
%  [m,n]=size(mask);
%        validr=uint8(zeros(m,n));
%     thin_temp=thinned;   
%        for i=1:m
%            for j=2:n-1
%                if((mask_input(i,j-1)==0)&&(mask_input(i,j)==1)&&(j<=n-no))
%                      border(i,j)=1;
%                    validr(i,j-nox:j+no)=1; 
%                     thin_temp(i,j-nox:j+no)=1; 
%                end
%                
%                if ((mask_input(i,j+1)==0)&&(mask_input(i,j)==1)&&(j>no))
%                      border(i,j)=1;
%                    validr(i,j+nox:-1:j-no)=1; 
%                    thin_temp(i,j+nox:-1:j-no)=1; 
%                end
%                
%            end
%        end
% 
%         for i=1:m
%            for j=1:n-1:n
%              if (mask_input(i,j)==1)
%                  if (j==1)
%                        border(i,j)=1;
%                    validr(i,j:j+no)=1;
%                    thin_temp(i,j:j+no)=1;
%                  end
%                  if (j==n)
%                        border(i,j)=1;
%                 validr(i,j:-1:j-no)=1;
%                  thin_temp(i,j:-1:j-no)=1;
%                  end
%              end
%            end
%         end
%       
%         
%        
%  for j=1:n
%            for i=2:m-1
%                if((mask_input(i-1,j)==0)&&(mask_input(i,j)==1)&&(i<=m-no))
%                      border(i,j)=1;
%                    validr(i-noy:i+no,j)=1;
%                     thin_temp(i-noy:i+no,j)=1;
%                end
%                if((mask_input(i+1,j)==0)&&(mask_input(i,j)==1)&&(i>no))
%                      border(i,j)=1;
%                     validr(i+noy:-1:i-no,j)=1;
%                      thin_temp(i+noy:-1:i-no,j)=1;
%                end
%                
%            end
%  end
%  
%  for j=1:n
%            for i=1:m-1:m
%              if (mask_input(i,j)==1)
%                if (i==1)
%                      border(i,j)=1;
%                    validr(i:i+no,j)=1;
%                    thin_temp(i:i+no,j)=1;
%                else validr(i:-1:i-no,j)=1;
%                    thin_temp(i:-1:i-no,j)=1;
%                end
%              end
%            end
%  end
% 
%  %___________________________________________________________________
%  % removing minu at the border of roi
% for x=1:size(thinned,1)
%   for y=1:size(thinned,2)
%         if ((validr(x,y)==1)&&(thinned(x,y)==1))
%             combined(x,y,:)=[255,255,255];
%             minutiae_img(x,y,:)=[0,0,0];
%             
%         end
%   end
% end
%     
% for i=1:totminu_I
%     x=minutiae(i,1);
%     y=minutiae(i,2);
%     if ((validr(x,y)==1)&&(thinned(x,y)==1))
%         minutiae(i,:)=0;
%     end
% end
% %__________________________
% 
% subplot(1,2,2), subimage(combined), title('after boundary effect ')
% minu_count=1;
% minutiae_valid(minu_count, :) = [0,0,0,0];  %to make x, y, CN, theta value of minutiae not in border region.
% for i=1:totminu_I
%     CN=minutiae(i,3);
%     if (CN~=0)
%          minutiae_valid(minu_count, :) = minutiae(i,:);
%            minu_count = minu_count + 1;
%     end
% end

% totminu_I= minu_count-1;

k=size(minutiae_valid);
totminu_I=k(1,1);
%FALSE RIDGE BIFURCATION
for i=1:totminu_I
if minutiae_valid(i,3)==3
           wind=ones(m,n);
         xi= minutiae_valid(i,1);
         yi=minutiae_valid(i,2);
         x=xi;
         y=yi;
         wind(xi-wl:xi+wl,yi-wl:yi+wl)=0; %window of size 25 cross 25
         wind(xi,yi)=-1;

      %mark '1', '2', '3'. 
       value=0;

         r=x-1;
         for c=y-1:y+1
             if (thinned(r,c)==1)&&(wind(r,c)==0)
                 value=value+1;
                 wind(r,c)=value;
             end
         end

         c=y+1;
         for r=x-1:x+1
             if (thinned(r,c)==1)&&(wind(r,c)==0)
                 value=value+1;
                 wind(r,c)=value;
             end
         end

         r=x+1;
         for c=y+1:-1:y-1
             if (thinned(r,c)==1)&&(wind(r,c)==0)
                 value=value+1;
                wind(r,c)=value;
             end
         end

         c=y-1;
         for r=x+1:-1:x-1
             if (thinned(r,c)==1)&&(wind(r,c)==0)
                 value=value+1;
                wind(r,c)=value;
             end
         end

for value=1:3  %search '1'/'2/'3' value pixel arond the minutia point in the window.
 for p=x-1:x+1
    for q=y-1:y+1
        if wind(p,q)==value
            xi=p;
            yi=q;
         end
    end
 end

cnt=0;
         while(xi>x-wl)&&(xi<x+wl)&&(yi>y-wl)&&(yi<y+wl) %mark '1'/'2'/'3' to the adjacent connected pixels
             k=0;
             for p=xi-1:xi+1
                 for q=yi-1:yi+1
                     if (thinned(p,q)==1)&&(wind(p,q)==0)
                         wind(p,q)=value;
                          k=k+1;
                         if k==1
                           x1=p;
                           y1=q;
                         end
                         if k==2  %more than one connected pixel
                             cnt=cnt+1;
                             x2=p;
                             y2=q;

                             t1=x1;
                             x1=x2;
                             x2=t1;

                             t2=y1;
                             y1=y2;
                             y2=t2;
                            %___________ 
                             xi=x2;
                             yi=y2;

                         while(xi>x-wl)&&(xi<x+wl)&&(yi>y-wl)&&(yi<y+wl)
                                  k=0;
                                  flag_see=0;
                          for p=xi-1:xi+1

                              for q=yi-1:yi+1

                                   if (thinned(p,q)==1)&&(wind(p,q)==0)
                                            wind(p,q)=value;
                                            flag_see=1;
                                             x3=p;
                                             y3=q;
                                            k=k+1;               
                                   end
                              end
                          end
                          if(flag_see==1)
                          xi=x3;
                          yi=y3;
                          else
                              xi=p;
                              yi=q;

                          end

                              if k==0
                                break
                              end
                          end
%            xi=x1;
%            yi=y1;

                         end
                     end
                 end
             end
             xi=x1;
             yi=y1;
             if k==0
                 break
             end
         end

end  

% figure,subimage(wind);
%to count 0-1, 0-2, 0-3 transition around the boundary clkwise
T=1;
for v=1:3
         T0v=0;
         r=x-wl;
         for c=y-wl:y+(wl-1)
             if (wind(r,c)==0)&&(wind(r,c+1)==v)
                 T0v=T0v+1;
             end
         end

         c=y+wl;
         for r=x-wl:x+(wl-1)
             if (wind(r,c)==0)&&(wind(r+1,c)==v)
                 T0v=T0v+1;
             end
         end

         r=x+wl;
         for c=y+wl:-1:y-(wl-1)
             if (wind(r,c)==0)&&(wind(r,c-1)==v)
                 T0v=T0v+1;
             end
         end

         c=y-wl;
         for r=x+wl:-1:x-(wl-1)
             if (wind(r,c)==0)&&(wind(r-1,c)==v)
                 T0v=T0v+1;
             end
         end

T1=T0v==1;
    T=T & T1;
end
         if T~=1
             minutiae_valid(i,:)=[0 0 0 0];
             combined(x,y,:)=[255,255,255];
         end

end
end

minu_count=1;
minutiae_valid_final(minu_count, :) = [0,0,0,0];  %to make x, y, CN, theta value of minutiae not in border region.
for i=1:totminu_I
    CN = minutiae_valid(i,3);
    if (CN~=0)
         minutiae_valid_final(minu_count, :) = minutiae_valid(i,:);
           minu_count = minu_count + 1;
    end
end

% totminu_I= minu_count-1;
minutiae_valid = minutiae_valid_final;

% figure, subimage(combined); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:16:44.963

在第 212 行和第 213 行，您创建了嵌套循环，循环遍历风的九个元素，以寻找与某种条件匹配的元素。当你找到一个时，你改变你的九元素块的中心。

当您的街区中心位于风的边缘时，就会出现问题。当您查看以边缘为中心的九个元素时，您不能以相同的方式访问索引，否则您会收到如上所示的错误。为了说明一个简单的例子：

```
a = rand(4,4);
for p=2:4
   for q = 1:3
     tmp += a(p,q)
   end
end 
```

对以 (3,2) 为中心的（方形数组）的 9 个元素求和。

```
a = rand(4,4);
for p=3:5
   for q = 1:3
     tmp += a(p,q)
   end
end 
```

将产生与尝试访问 a(5,1) 时相同的错误，因为该数组元素不存在。解决此问题的正确方法取决于您要执行的操作，但这绝对超出了您的问题范围以及我们的解决能力。

我希望这有帮助。

回应一些评论，我想为您提供一条建议。将来，如果您可以将问题归结为尽可能短的测试用例，那么您更有可能获得高质量的答案。这也是调试您自己的代码的重要一步。弄清楚如何构建测试用例通常会使您的问题的答案显而易见。当它不明显时，Stackoverflow 是一个很好的资源。

# adapter - 在适配器中为列表视图使用查询

> ID：10214608
> 
> 赞同：0
> 
> 时间：2012-04-18T17:23:16.220
> 
> 标签：adapter, xamarin.android

我有一个从适配器填充的列表视图。我的原始代码数据是从表中返回的，但是现在我需要从带有连接的查询中获取代码，因此我使用的示例将不再有效，并且我无法找出如何使用查询为了这。我正在使用 ORM 存储库。在我的 ORMrepository 我有这个功能

```
 public IList<Coe> GetmyCoe()
    {
      using (var database = new SQLiteConnection(_helper.WritableDatabase.Path))
      {
        string query = "SELECT Coe.Id, Adult.LName + ',  ' + Adult.MName AS Name, Coe.Createdt FROM Adult INNER JOIN Coe ON Adult.CoeMID = Coe.Id";
        return database.Query<Coe>(query);
      }
    } 
```

它实际上返回了我想要的数据。然后在我的活动页面中我有这个。

```
 _list = FindViewById<ListView>(Resource.Id.List);
  FindViewById<ListView>(Resource.Id.List).ItemClick += new System.EventHandler<ItemEventArgs>(CoeList_ItemClick);

   var Coe = ((OmsisMobileApplication)Application).OmsisRepository.GetmyCoe();
  _list.Adapter = new CoeListAdapter(this, Coe); 
```

我的适配器页面是我遇到问题的地方，我知道它设置为查看我不再做的表。但我不知道如何改变它，因为我现在传递给它。当前的 CoeListAdapter 是：

```
 public class CoeListAdapter : BaseAdapter
{
  private IEnumerable<Coe> _Coe;
    private Activity _context;

    public CoeListAdapter(Activity context, IEnumerable<Coe> Coe)
    {
      _context = context;
      _Coe = Coe;
    }

    public override View GetView(int position, View convertView, ViewGroup parent)
    {
        var view = (convertView
            ?? _context.LayoutInflater.Inflate(
                Resource.Layout.CoeListItem, parent, false)
                ) as LinearLayout;
        var Coe = _Coe.ElementAt(position);
        view.FindViewById<TextView>(Resource.Id.CoeMID).Text = Coe.Id.ToString();
        //view.FindViewById<TextView>(Resource.Id.GrdnMaleName).Text = Coe.Name;
        view.FindViewById<TextView>(Resource.Id.CreateDt).Text = Coe.CreateDt;
        return view;
    }

    public override int Count
    {
      get { return _Coe.Count(); }
    }

    public Coe GetCoe(int position)
    {
      return _Coe.ElementAt(position);
    }

    public override Java.Lang.Object GetItem(int position)
    {
        return null;
    }

    public override long GetItemId(int position)
    {
        return position;
    }
} 
```

如何设置 CoeListAdapter.cs 页面以便它可以使用传入的数据。正如你所看到的，我有一个注释掉的行，我在其中填写了一个 TextView 错误，因为 Coe.Name 不在 Coe 的表模型中。但它在查询中返回。我相信我的问题是 IEnumerable 但我应该把它改成什么。我是移动开发新手并为 Mono 起诉 VS2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T07:41:39.583

问题可能在于对象的绑定/映射而不是视图的创建。或者更具体地说，**查询**。

```
 Adult.LName + ',  ' + Adult.MName AS Name 
```

这应该是：

```
Adult.LName || ',  ' || Adult.MName AS Name 
```

另请参阅：[字符串连接在 SQLite 中不起作用](https://stackoverflow.com/questions/3568779/string-concatenation-does-not-work-in-sqlite)

来自 sqlite 文档：[http://www.sqlite.org/lang_expr.html](http://www.sqlite.org/lang_expr.html)在**Operators**标题下：

> 一元运算符 + 是无操作的。它可以应用于字符串、数字、blob 或 NULL，并且它始终返回与操作数具有相同值的结果。
> 
> 请注意，等于和不等于运算符有两种变体。等于可以是 = 或 ==。不等于运算符可以是 != 或 <>。|| 运算符是“连接” - 它将其操作数的两个字符串连接在一起。运算符 % 输出其左操作数的值模其右操作数。
> 
> 任何二元运算符的结果都是数值或 NULL，除了 || 连接运算符始终计算为 NULL 或文本值。

这表明 + 将评估为零。如果您使用 ||，则该值将是正确的值或 NULL（如果 Adult.LName 或 Adult.MName 中的任何一个为 NULL）。这可以通过以下方式解决：

```
coalesce(first, '') || ', ' || coalesce(second, '') 
```

但这可能会导致`, LastName`or `FirstName,`。另一种方法是在 Coe 中创建另外两个名为`LName`and的属性`MName`。然后将值绑定到这些属性并使用 Name 属性，如下所示：

```
public string Name
{
    get { return string.Join(", ", LName, MName); }
} 
```

这可能会更好，因为您可以更改名称的显示方式，特别是如果在不同的地方有不同的名字、中间名和姓氏组合。

和题外话：

> 我相信我的问题是 IEnumerable ......

这可能不太正确，因为它返回正确的值。更好的方法是使用 IList，因为 IEnumerable 每次都会遍历列表以获取项目，因为它不知道集合实际上是一个列表。（我认为）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T16:47:57.250

感谢您对合并的帮助，我确实发现这是错误的，我确实解决了我的问题，我正在使用 Greg Shackles 的示例来说明如何使用数据库进行设置。我要做的是用我想要的元素创建一个新模型。所以我创建了一个新模型并将其命名为 CoeList，然后在我有 List 或 IEnumerable 的任何地方我将其更改为 List 或 IEnumerable 并且它工作。

# iphone - Facebook评论框移动版未调整大小

> ID：10214613
> 
> 赞同：1
> 
> 时间：2012-04-18T17:23:34.213
> 
> 标签：iphone, ios, facebook, uiwebview, facebook-social-plugins

我在 iOS 的 Web 视图中集成了一个赞按钮和一个评论框（移动设备）（使用 Facebook 社交插件）。几天前我让它工作了，但今天，由于某种奇怪的原因，它无法正常工作。当用户还没有登录时，它看起来几乎没问题： [![图片](../Images/7aadf07f2720fbe75696e1b7143fad19.png)](https://i.stack.imgur.com/qX6ku.png)

但是一旦我登录，并且 UIWebView 检测到 Facebook cookie，它将无法正确加载。加载图标放错了，它不会停止，没有出现错误，没有加载网页（使用 UIWebView 委托方法检查），评论按钮不会被加载，框架不会改变它的高度来查看更多评论...

[![图片](../Images/8e7c42ee75d0b2eb90bf5acb4d9a7d6e.png)](https://i.stack.imgur.com/1hMpx.png)

如果我从 Safari 外部加载此 URL，iOS Safari 将正确加载网页！如果我强制加载普通版本（不是移动版本），评论就会正确加载！我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:01:25.843

好的，解决了...看来您必须出于某种奇怪的原因强制登录[https://m.facebook.com/login.php .....（不是](https://m.facebook.com/login.php)[https://www.facebook.com](https://www.facebook.com)）他们现在可能已经添加了这个限制：\

# .net - 使用字典是处理错误的有效方法吗？

> ID：10214614
> 
> 赞同：0
> 
> 时间：2012-04-18T17:23:34.997
> 
> 标签：.net, exception, error-handling

你们可能都注意到了，现在你得到的不同程序的错误总是有那个错误 ID 号，这实际上意味着发生了什么。

我在想也许有一个好主意`Dictionary<int,string>`，当 int 是错误 id 时，字符串是对所发生事件的描述。

例如：

```
ErrorID: 404
Description: Page not found 
```

我问这个是因为我发现了一个缺点，并且不确定这是否很重要（也许我只是不知道它是如何完成的）。作为一名程序员，一旦你捕获了一个异常，你会如何将它与错误 ID 关联起来？（因此您最终可以向用户提供`Description`他的操作无法成功的原因）。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:42:28.713

您正在尝试转置*良好的旧错误代码*模式。当您处理无异常语言（例如 C）或黑盒/远程进程（HTTP 请求）时，这是一个很好的做法。

在 .net 中，您可以使用包含错误消息的异常：

```
throw new Exception("File not found"); 
```

甚至创建自己的例外：

```
class FileNotFoundException : Exception
{
  public FileNotFoundException() : base("File not found") {}
} 
```

用法：

```
throw new FileNotFoundException(); 
```

所以，答案是：处理不经常发生的错误的错误代码可能是一个很好的模式。.NET 字典很快，但有开销。但是您的问题与 i18n 的东西相距不远。

真正的问题是：您更喜欢错误代码还是异常？

# jquery - 根据下拉选择创建动态下拉选项 - 卡住

> ID：10214618
> 
> 赞同：0
> 
> 时间：2012-04-18T17:23:45.060
> 
> 标签：jquery, ajax, django, django-templates

所以我正在尝试创建一个动态表单，其中第二个下拉框基于第一个下拉列表填充。

我正在使用`ajax`&`jquery`来帮助在我的 django 项目中构建这个动态表单，我需要一些帮助。我已经让 ajax 调用正常工作，并且我已将我的选择发送回表单，但现在我无法用我的选择填充表单。

有人可以帮我把 json 输出变成 html 选项吗？

这是我的ajax.py：

```
def switch_plan(request, *args, **kwargs):
    from plans.models import Plan, OwnershipType, MemberType, PlanMember
    from datetime import datetime
    now = datetime.now()
    json = {}
    data = request.POST
    plan_type = data.get('plan-plan_type')
    print plan_type

    if request.is_ajax():
        if plan_type == '5':
            ownership = OwnershipType.objects.all().exclude(id=3).exclude(id=8).exclude(id=9)
            json['owner_types'] = ownership

    return HttpResponse(simplejson.dumps(json), mimetype='application/json') 
```

我的plans.html js 代码：

```
<script type="text/javascript">
$(function(){
    $("#id_plan-plan_type").change(function() {
        q = $("form").serialize();

        $.ajax({
            type: "POST",
            url: "{% url plans-switch_plan %}",
            dataType: "json",
            data: q,
            success: function(json) {
                //need help here
            }
        });
    });
}); 
```

`$("#id_plan-ownership_type")`是我需要添加选项的选择字段。

**编辑**我的json输出如下`{'owner_types': [<OwnershipType: Corporate/Non-Corporate>, <OwnershipType: Estate>, <OwnershipType: In Trust For>, <OwnershipType: Joint Subscriber>, <OwnershipType: Single Subscriber>, <OwnershipType: Tenants in Common>]}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:36:56.750

在您的成功回调中：

```
$.each(json.owner_types, function(i, value){
    var opt = $("<option></option>");
    opt.text(value.name);
    opt.val(value.id);
    $("#id_plan-ownership_type").append(opt);
}) 
```

您还需要将模型数据提取为 JSON 可序列化类型，例如字典，类似于以下内容：

```
json["owner_types"] = [{"name": o.name, "id": o.id}
        for o in OwnershipType.objects.all()] # or .filter(...) 
```

# c# - 在 .NET 中使用 C 库

> ID：10214630
> 
> 赞同：0
> 
> 时间：2012-04-18T17:24:30.000
> 
> 标签：c#, c, pinvoke, dllimport

我需要在 C# 项目中使用 C 库。我能怎么做？

更具体地说：出于效率的原因，我需要使用[strtod](http://www.cplusplus.com/reference/clibrary/cstdlib/strtod/)函数从字符串中提取双精度值（例如“9.63074,9.63074 -5.55708e-006 0 ,0 1477.78”）。如果您对如何优化此操作有建议，请不要害羞，但主要问题仍然是标题指定的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T17:36:42.677

我认为 p/invoking to 不太可能`strtod`比纯 C# 解决方案更有效。托管/非托管转换存在开销，我认为这对于像`strtod`. 我自己会使用 C# 标记器，结合`double.Parse`.

最简单的 C# 分词器`String.Split()`会产生这个例程：

```
static List<double> getValues(string str)
{
    List<double> list = new List<double>();
    foreach (string item in str.Split(default(Char[]), StringSplitOptions.RemoveEmptyEntries))
        list.Add(double.Parse(item));
    return list;
} 
```

* * *

但是，由于我喜欢 p/invoke，以下是您`strtod`从 C# 调用的方式，请记住，我建议您不要在实际代码中使用这种方法。

```
[DllImport(@"msvcrt.dll", CallingConvention=CallingConvention.Cdecl)]
static extern double strtod(IntPtr str, ref IntPtr endptr); 
```

你可以这样称呼它：

```
IntPtr str = Marshal.StringToHGlobalAnsi(inputStr);
IntPtr endptr = IntPtr.Zero;
double val = strtod(str, ref endptr);
Marshal.FreeHGlobal(str); 
```

我将字符串作为 an 传递，`IntPtr`因为您会`strtod`反复调用以遍历整个缓冲区。我没有在这里展示，但如果你要使用它，`endptr`那么你需要按照我的说明进行操作。

当然，要`strtod`有效地远程使用，您需要访问`errno`全局变量。您需要处理全局变量这一事实应该足以警告这里是龙。更重要的是，通过提供的错误报告`errno`非常有限。但是，如果你想要它，这里是：

```
[DllImport(@"msvcrt.dll", CallingConvention = CallingConvention.Cdecl)]
static extern int _get_errno(); 
```

最后一点。您建议的输入字符串是

```
"9.63074,9.63074 -5.55708e-006 0 ,0 1477.78" 
```

但`strtod`由于虚假逗号而不会对其进行标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:45:17.203

首先，您没有意识到托管代码和非托管代码之间的调用相对昂贵，它不是免费的。因此，根据您告诉我们的内容，听起来您`strtod`将从托管代码中多次调用。您必须对其进行测试，但 pinvoke 惩罚可能会抵消任何性能提升。

此外，您是否进行了实际测试以确保`strtod`在您的用例中比托管版本更快？我的测试表明，超过 100,000 次迭代`double.Parse`实际上*更快。*（`strtod`耗时约 54 毫秒，`double.Parse`三轮运行约 15 毫秒。如果您愿意，我可以给您代码。）

这听起来像是在优化一段甚至没有经过测试的代码的错误尝试。你确定你正在解决正确的问题吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:28:48.633

为什么不使用`double.Parse()`？

```
double asDouble = double.Parse(myInput); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T17:29:20.980

要回答如何在 .NET 中使用 C 库的问题：您可以做的一件事是创建一个您想要的 C 调用函数。从那里，您需要将其构建为 DLL。完成后，您将能够从 C# 中 P/Invoke 它。

[http://www.codeproject.com/Articles/9826/How-to-create-a-DLL-library-in-C-and-then-use-it-w](http://www.codeproject.com/Articles/9826/How-to-create-a-DLL-library-in-C-and-then-use-it-w) http://msdn.microsoft.com/en -us/library/ms235282(v=vs.80).aspx

另一种可能性是将其构建为混合组件。

[http://msdn.microsoft.com/en-us/library/x0w2664k.aspx](http://msdn.microsoft.com/en-us/library/x0w2664k.aspx)

也就是说，在您的具体情况下，我强烈建议您查看 double.Parse() ，除非有充分的理由。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T18:23:30.783

David 通过 p/invoke 向您展示了如何做到这一点。但是，.NET 方法是使用`Regex`. 以下内容可能对您有用：

```
 MatchCollection matches = Regex.Matches(inputString, @".*?([-]{0,1} *\d+.\d+)");
    List<double> doubles = new List<double>();
    foreach (Match match in matches)
    {
        string value = match.Groups[1].Value;
        value = value.Replace(" ", "");
        doubles.Add(double.Parse(value));
    } 
```

此代码会将字符串中的所有双精度值添加到通用`List`集合中。注意我没有针对您的字符串测试正则表达式代码，但这给了您一个想法。

# java - Java httpURLConnection 线程化

> ID：10214636
> 
> 赞同：2
> 
> 时间：2012-04-18T17:24:55.127
> 
> 标签：java, multithreading, httpurlconnection

简单的问题：

是否可以同时请求多个 httpURLConnection？我正在创建一个工具来检查某些服务器上是否存在页面，目前，Java 似乎要等到每个 httpURLConnection 完成才能启动一个新的。这是我的代码：

```
public static String GetSource(String url){
String results = "";
try{
  URL SourceCode = new URL(url);
  URLConnection connect = SourceCode.openConnection();
  connect.setRequestProperty("Host", "www.someserver.com");
  connect.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20100101 Firefox/11.0");
  connect.setRequestProperty("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8");
  connect.setRequestProperty("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.7");
  connect.setRequestProperty("Accept", "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8");
  connect.setRequestProperty("Keep-Alive", "115");
  connect.setRequestProperty("Connection", "keep-alive");
  BufferedReader in = new BufferedReader(new InputStreamReader(connect.getInputStream(), "UTF-8"));
  String inputLine;
  while ((inputLine = in.readLine()) != null){
    results += inputLine;
  }
  return results;
}catch(Exception e){
  // Something's wrong
}
return results;
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:27:19.683

是的，您发布的代码可以同时从多个线程调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:48:14.803

您需要为每个命中创建一个线程。创建一个实现 Runnable 的类，然后将所有连接代码放入 run 方法中。

然后用这样的东西运行它......

```
for(int i=0; i < *thread count*; i++){
    Thread currentThread = new Thread(*Instance of your runnable Class*);
    currentThread.start();
} 
```

# android - 使用自定义 View 子实现 Dynamic Horizo ntalScrollView

> ID：10214644
> 
> 赞同：-1
> 
> 时间：2012-04-18T17:25:16.670
> 
> 标签：android, android-3.0-honeycomb, horizontal-scrolling, android-custom-view, horizontalscrollview

我正在尝试在 Horizo​​ntalScrollView 父级内实现自定义视图。自定义视图根据来自 Handler 的时间重复绘制一条线到其 Canvas。现在自定义视图填充了屏幕的宽度（由 548dp 高度限制），我希望线条能够延伸到可见的范围之外。此外，我想让用户能够水平滚动以查看更多行。我尝试将 Horizo​​ntalScrollView 的宽度设置为 1500dp（比屏幕宽度大得多），然后尝试水平滚动，但它没有移动。如果视图随着线条越过屏幕的可见部分而滚动，这也是理想的。

我正在开发带有蜂窝的华硕变压器。

这是我正在使用的布局的相关部分：

```
<HorizontalScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="1500dp"
    android:layout_height="548dp"
    android:fillViewport="true" >

    <maavapp.layout.CustomDraw
        android:id="@+id/custom_draw"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </maavapp.layout.CustomDraw>
</HorizontalScrollView> 
```

这是 CustomDraw 类的代码：

```
public class CustomDraw extends View {
private static int mSelected;
private ArrayList<Coordinate> measure1;
private ArrayList<Coordinate> measure2;
private ArrayList<Coordinate> measure3;
private boolean north = false, east = true, south = true, west = false;
private DrawHandler dh = new DrawHandler();
private boolean draw = true;
private int width;
private int height;
private int m2;

public CustomDraw(Context context) {
    super(context);
    init();

}

public CustomDraw(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public CustomDraw(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

public void init() {        
    measure1 = new ArrayList<Coordinate>();
    measure2 = new ArrayList<Coordinate>();
    measure3 = new ArrayList<Coordinate>();

    mSelected = Constants.MEASURE_1;
    width = 0;
    height = 0;
    m2 = 0;
}

public void setMeasure(int measure) {
    mSelected = measure;
}

public void toggleDraw() {
    draw = !draw;
    if(draw) {
        updateLine();
    }
}

public boolean isDrawing() {
    return draw;
}

public void updateLine() {
    // grab new coordinates for each measure
    /*new_coord(measure1);
    new_coord(measure2);
    new_coord(measure3);*/

    if(measure1.isEmpty() && measure2.isEmpty() && measure3.isEmpty()) {
        measure1.add(new Coordinate(0, 0));
        measure2.add(new Coordinate(0, 0));
        measure3.add(new Coordinate(0, 0));
    } else {
        Coordinate last_coord = measure1.get(measure1.size() - 1);

        measure2.add(new Coordinate(++m2, 25));

        /*if(last_coord.x >= width) {
            east = false;
            west = true;
        } else if(last_coord.x <= 0) {
            east = true;
            west = false;
        }*/

        if(last_coord.y >= height) {
            south = false;
            north = true;
        } else if(last_coord.y <= 0) {
            south = true;
            north = false;
        }

        Log.d("MAAV", "last_coord.x + 3: " + (last_coord.x + 3));
        Log.d("MAAV", "last_coord.y + 3: " + (last_coord.y + 3));

        if(south && east) {
            measure1.add(new Coordinate(last_coord.x + 3, last_coord.y + 3));
        } else if(south && west) {
            measure1.add(new Coordinate(last_coord.x - 3, last_coord.y + 3));
        } else if(north && east) {
            measure1.add(new Coordinate(last_coord.x + 3, last_coord.y - 3));
        } else if(north && west) {
            measure1.add(new Coordinate(last_coord.x - 3, last_coord.y - 3));
        }
    }

    if(draw) {
        dh.sleep(10);
    }
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    this.width = w;
    this.height = h;
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
public void onDraw(Canvas c) {
    super.onDraw(c);
    Paint p = new Paint();
    p.setStyle(Paint.Style.FILL);

    p.setColor(Color.WHITE);
    c.drawPaint(p);
    p.setColor(Color.BLACK);

    switch(mSelected) {
    case Constants.MEASURE_1:
        for(int i = 0; i < measure1.size(); i++) {
            Coordinate coord = measure1.get(i);
            Log.d("MAAV", "drawing coord.x, coord.y: " + (coord.x) + ", " + (coord.y));
            c.drawRect(coord.x, coord.y, coord.x + 3, coord.y + 3, p);  
        }
        break;
    case Constants.MEASURE_2:
        for(int i = 0; i < measure2.size(); i++) {
            Coordinate coord = measure2.get(i);
            c.drawRect(coord.x, coord.y, coord.x + 3, coord.y + 3, p);
        }
        break;
    case Constants.MEASURE_3:
        for(int i = 0; i < measure2.size(); i++) {
            Coordinate coord = measure2.get(i);
            c.drawRect(coord.x, coord.y, coord.x + 3, coord.y + 3, p);
        }
        break;
    }

}

class DrawHandler extends Handler {

    @Override
    public void handleMessage(Message msg) {
        CustomDraw.this.updateLine();
        CustomDraw.this.invalidate();
    }

    public void sleep(long delayMillis) {
        this.removeMessages(0);
        sendMessageDelayed(obtainMessage(0), delayMillis);
    }
}
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:48:51.023

对于任何好奇的人，我找到了适合我情况的答案。希望我在下面概述的内容也对您有所帮助。

为了让自定义视图滚动，我必须在自定义视图周围添加一个 LinearLayout 包装器。不是 100% 确定为什么。

此外，虽然我为我的自定义视图声明了一个固定大小（在下面的 xml 文件中），但我可以在我的代码中使用以下方法动态更新它：

```
CustomDraw.this.setLayoutParams(new LinearLayout.LayoutParams(width + {adjust size}, height)); 
```

其中“width”和“height”是自定义View的宽度和高度。同样，不知道为什么我必须说“new LinearLayout.LayoutParams(...);” 但这似乎可行。

这是我正在使用的xml：

```
<HorizontalScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroller"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="548dp"
        android:orientation="vertical" >

        <maavapp.layout.CustomDraw
            android:id="@+id/custom_draw"
            android:layout_width="4800dp"
            android:layout_height="fill_parent" >
        </maavapp.layout.CustomDraw>
    </LinearLayout>
</HorizontalScrollView> 
```

这是我正在使用的自定义类代码的相关部分：

```
public class CustomDraw extends View {
// member variables

public void setHSV(HorizontalScrollView hsv) {
    this.hsv = hsv;
}

public void updateLine() {
    if(measure1.isEmpty()) {
        measure1.add(new Coordinate(0, 0));
    } else {
        Coordinate last_coord = measure1.get(measure1.size() - 1);

                    // calculate south, north, east, and west

        if(((last_coord.x + 3) % 1200 == 0) 
                || ((last_coord.x + 3) % 1200 == 1) 
                || ((last_coord.x + 3) % 1200 == 2)
                || ((last_coord.x + 3) % 1200 == 3) && (last_coord.x + 3 >= 1200)) {
            hsv.smoothScrollTo(last_coord.x - 50, 0);
        }
        if(last_coord.x >= (width - 100)) {
            this.setLayoutParams(new LinearLayout.LayoutParams(width + 4800, height));
            width += 4800;
        }

        if(south && east) {
            measure1.add(new Coordinate(last_coord.x + 3, last_coord.y + 3));
        } else if(south && west) {
            measure1.add(new Coordinate(last_coord.x - 3, last_coord.y + 3));
        } else if(north && east) {
            measure1.add(new Coordinate(last_coord.x + 3, last_coord.y - 3));
        } else if(north && west) {
            measure1.add(new Coordinate(last_coord.x - 3, last_coord.y - 3));
        }
    }

    if(draw) {
        dh.sleep(10);
    }
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    this.width = w;
    this.height = h;
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
public void onDraw(Canvas c) {
    super.onDraw(c);
    Paint p = new Paint();
    p.setStyle(Paint.Style.FILL);

    p.setColor(Color.WHITE);
    c.drawPaint(p);
    p.setColor(Color.BLACK);

        Coordinate coord;
    for(int i = 0; i < measure1.size(); i++) {
        coord = measure1.get(i);
        c.drawRect(coord.x, coord.y, coord.x + 3, coord.y + 3, p);  
    }
}

class DrawHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        CustomDraw.this.updateLine();
        CustomDraw.this.invalidate();
    }

    public void sleep(long delayMillis) {
        this.removeMessages(0);
        sendMessageDelayed(obtainMessage(0), delayMillis);
    }
}
} 
```

# java - 对于 JSF 2.0，如何在 Tomcat 6 上启用 EL 2.2

> ID：10214646
> 
> 赞同：1
> 
> 时间：2012-04-18T17:25:26.740
> 
> 标签：java, jsf, tomcat, netbeans, el

我在我的 jsf 页面中使用 netbean 6.9.1 和 apache tomcat 6.in 我想要带参数的调用方法，对于当前，我使用带有 EL 默认值的 tomcat 6。

[我从http://download.java.net/maven/glassfish/javax/el/el-api/2.2.0-SNAPSHOT/el-api-2.2.0-SNAPSHOT.jar](http://download.java.net/maven/glassfish/javax/el/el-api/2.2.0-SNAPSHOT/el-api-2.2.0-SNAPSHOT.jar)下载了 EL 2.2

[http://download.java.net/maven/glassfish/org/glassfish/web/el-impl/2.2.0-SNAPSHOT/el-impl-2.2.0-SNAPSHOT.jar](http://download.java.net/maven/glassfish/org/glassfish/web/el-impl/2.2.0-SNAPSHOT/el-impl-2.2.0-SNAPSHOT.jar)

我将这些文件重命名为 el-api-2.2.0.jar 和 el-impl-2.2.0.jar，然后我复制到 tomcat lib (C:\Program Files\Apache Software Foundation\Apache Tomcat 6.0.26\lib)

在 web.xml 中，我添加了这个

```
 <context-param>
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
  </context-param> 
```

KategoriManager.java（用于测试）

```
public String editSetup(Integer id) {
    return "kategori_edit";
} 
```

和 Edit.jsp

```
---cut---
<h:commandLink value="Edit" action="#{kategoriManager.editSetup(1)}"/>
---cut--- 
```

但在 IDE netbean 中，我仍然收到工具提示错误，例如**“该函数必须与前缀一起使用”**

我运行这个网站，但我得到了错误

```
HTTP Status 500 -

type Status report

message

description The server encountered an internal error () that prevented it from fulfilling this request.
Apache Tomcat/6.0.26 
```

如何在 Tomcat 6 上启用 EL 2.2？请帮忙..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:30:14.390

JAR 应该放在 webapp 中`/WEB-INF/lib`，而不是 server 中`/lib`。您还应该绝对确保您没有 EL API JAR 的另一个副本`/WEB-INF/lib`。`javaee.jar`大多数初学者出于某些不明显的原因而放弃，例如`/WEB-INF/lib`“修复”编译错误。

另一种方法是使用 JBoss EL。另请参阅[在 EL 中调用直接方法或带有参数/变量/参数的方法以](https://stackoverflow.com/questions/3284236/jsf-2-0-method-invocation/3284328#3284328)获取说明。

# python - Python 诅咒：用一个脚本控制两个终端 (Linux)

> ID：10214653
> 
> 赞同：1
> 
> 时间：2012-04-18T17:25:58.040
> 
> 标签：python, curses, tty, terminal

我想制作一个 Python 脚本来控制两个单独的终端窗口中的诅咒。不是在单个终端中诅咒窗口，而是在我的 X 窗口管理器中诅咒 urxvt 的两个不同实例。

像这样的东西：

```
class myprogam():

    controlterm1()
    controlterm2()

    def controlterm1():
        Create a new (could be current) urxvt terminal window.
        In the urxvt window setup curses with curses.initscr(), etc.
        racergame()

    def controlterm2():
        Create another urxvt terminal window.
        Setup curses.initscr, borders, size, etc. in window, leaving the old one alone.
        typewriter()  

    def racecargame():
        Racing game in curses

    def typwritter()
        Boring program for writing

myprogram() 
```

当我使用命令“tty”时，我看到伪终端窗口被赋予了一个名称，这给了我对 /dev/pts/somenumber 的引用，其中第一个终端仿真器被分配了一个零，然后是 1、2 等对于新的终端。我可以将此标识符用作执行此操作的基础吗？

该脚本不必实际加载 urxvt 的新实例，因为如果它可以控制一个已经打开的实例，我很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:52:55.933

ncurses C API 具有`newterm`可用于初始化屏幕的功能。根据`newterm`手册页：

> 输出到多个终端的程序应该对每个终端使用 newterm 例程，而不是 initscr。

但是，python curses 模块没有实现 newterm。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T01:43:39.597

原则上，打开多个设备并从一个脚本对它们进行 I/O 是没有问题的。但是，我见过的大多数诅咒软件都假设它对与程序关联的一个终端进行 I/O。例如，initscr 没有参数。它查看您的环境变量以确定您的终端特征。

鉴于此，将您的程序分成两部分可能会更容易，一个在每个终端上运行，它们通过消息传递进行通信。

# opengl-es - OpenGL ES：一个 VBO 中的多个网格

> ID：10214658
> 
> 赞同：0
> 
> 时间：2012-04-18T17:26:09.960
> 
> 标签：opengl-es, opengl-es-2.0

如果我在单个 VBO 中有多个网格，有没有办法独立地将变换应用于这些网格？

如果我在绑定具有两个网格的 VBO 时调用 glDrawElements，它将使用当前的 MVP 矩阵绘制这两个网格。所以如果我一次在屏幕上有超过 20 个独立移动的网格，我需要 20 个 VBO 吗？或者是否有某种方法可以指定 glDrawElements 的偏移量和计数，以便它只渲染存储在 VBO 中的第一个网格？这样我可以更改 MVP 矩阵，然后在 VBO 中渲染第二个网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:39:20.033

假设您有三个网格，分别包含 5、11 和 13 个三角形，它们分别打包到一个索引缓冲区中，您可以将两个单独的网格绘制为：

```
// assumes index buffer has been bound
// set modelview
glDrawElements(GL_TRIANGLES, 5 * 3, GL_UNSIGNED_SHORT, 0);
// set modelview
glDrawElements(GL_TRIANGLES, 11 * 3, GL_UNSIGNED_SHORT, 5 * 3 * sizeof(unsigned short));
// set modelview
glDrawElements(GL_TRIANGLES, 13 * 3, GL_UNSIGNED_SHORT, (5 + 11) * 3 * sizeof(unsigned short)); 
```

您可以通过偏移最后一个参数中的指针来指定偏移量。

# java - INSERT INTO 语句中的 Java SQL 语法错误

> ID：10214664
> 
> 赞同：1
> 
> 时间：2012-04-18T17:26:34.547
> 
> 标签：java, sql

我正在尝试将下面的数据插入到具有列 ID[autoNumber]、type[text]、to[text]、from[text]、message[text] 和 attachmentLoc[text] 的表中

所以生成了自动编号，我将它们插入并提供列名。当它运行时，控制台打印出：

```
java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Syntax error in INSERT INTO statement.
at sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6957)
at sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7114)
at sun.jdbc.odbc.JdbcOdbc.SQLExecute(JdbcOdbc.java:3149)
at sun.jdbc.odbc.JdbcOdbcPreparedStatement.execute(JdbcOdbcPreparedStatement.java:216)
at sun.jdbc.odbc.JdbcOdbcPreparedStatement.executeUpdate(JdbcOdbcPreparedStatement.java:138)
at MultiEchoServer.saveMessage(MultiEchoServer.java:147)
at ClientHandler.run(MultiEchoServer.java:409) 
```

带来错误的代码是：

```
try
    {
        String sql = "INSERT INTO Messages (type, to, from, message, attachmentLoc) VALUES(?,?,?,?,?)";     
        PreparedStatement stmt = database.prepareStatement(sql);
        stmt.setString(1, message.getType());
        stmt.setString(2, message.getTo());
        stmt.setString(3, message.getFrom());
        stmt.setString(4, message.getMessage());
        stmt.setString(5, attachmentLoc);
        stmt.executeUpdate();
    }
    catch (SQLException e)
    {
        System.out.println("Could not perform statement");
        e.printStackTrace();
    } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:36:53.500

您没有说明您正在使用什么数据库引擎，但一些列名（以及表名）可能是保留字的候选者。最明显的是`from`。

您需要将这些标识符写在*标识符引号*中，这些标识符通常是反引号字符 (`) 或字符 [ 和 ]（取决于引擎）：

```
INSERT INTO `Messages` (`type`, `to`, `from`, `message`, `attachmentLoc`)
  VALUES (?,?,?,?,?); 
```

或者

```
INSERT INTO [Messages] ([type], [to], [from], [message], [attachmentLoc]) 
   VALUES (?,?,?,?,?); 
```

仅需要在作为保留字的标识符周围使用引号，但在所有标识符周围使用它不会受到伤害。此外，没有理由不在 VALUES 之后包含空格和语句末尾的分号（尽管大多数引擎都不需要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:10:54.023

INSERT 语句需要有效的语法。SQL 不理解问号。

也许，您想要以下之一：

*   “？”
*   空值
*   ''

或者其他一些价值。

因此，假设列接受 NULL 值，您可以使用：VALUES(NULL, NULL, NULL, NULL, NULL)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T00:50:42.497

From 是一个保留字，将其更改为 messageFrom 后，它允许插入到数据库中。

# c - 如何使用非 ascii 字符统计文件

> ID：10214666
> 
> 赞同：0
> 
> 时间：2012-04-18T17:26:36.937
> 
> 标签：c, file-io, utf-8, character-encoding

对于普通文件路径，我可以使用 stat 并获取它的大小。当路径包含 C:\temp\sमानकe\app.log 等非 ascii 名称时，它不起作用。

```
int main(int argc, char * argv[])
{
      struct stat FileAttrib;

      if (stat(argv[1], &FileAttrib) < 0) {
            printf("File Error Message = %s\n", strerror(errno));
      }
      else
      {
           printf("File size %d\n",  FileAttrib.st_size);
      }
      return 0;
} 
```

stat 只需要 char *。从命令提示符收到的路径并不是真正的有效文件。

![在此处输入图像描述](../Images/cf895ccb5b01ed739218c27439b67425.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:33:15.440

假设您使用的是 Windows，请尝试使用[GetShortPathNameW](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364989%28v=vs.85%29.aspx)获取短路径名称（如果存在），然后将短名称传递给`stat()`.

# c# - 客户端到具有祖先接口的 WCF 服务

> ID：10214668
> 
> 赞同：0
> 
> 时间：2012-04-18T17:26:56.407
> 
> 标签：c#, wcf

我正在制作一个 WCF 服务，它将公开一个从其他两个接口 IA 和 IB 继承的接口 IC。

WCF 是否允许我仅使用 IA 或 IB 打开该服务的客户端代理（因此仅向其公开部分服务接口），如果是这样，我是否必须更改任何设置才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:51:22.983

如果您在客户端执行“添加服务引用”，那么所有继承都会丢失，您只会看到一个平面接口。原因是 WSDL 文件不支持它。

如果您的客户端和服务器共享相同的程序集（仅限 .net），您可以执行类似的操作。

# objective-c - 当地时间和格林威治标准时间

> ID：10214672
> 
> 赞同：0
> 
> 时间：2012-04-18T17:27:04.907
> 
> 标签：objective-c

使用以下代码， foo 给我当地时间或 GMT？

```
NSString * foo = [formatter2 stringFromDate:[NSDate dateWithTimeIntervalSinceNow:-2 * 3600]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:51:10.467

该*字符串* `flyerid`将表示您当前时区的时间减去 2 小时，是的。这就是日期格式化程序的用途，默认情况下，它使用计算机的[区域设置](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFLocales/CFLocales.html)信息将传入的日期转换为最接近用户期望的表示形式。这包括使用计算机的时区。（当然，您可以通过发送`setTimeZone:`到格式化程序来更改它。）

*日期*对象本身没有时区。这只是一个瞬间，其描述或表示会根据您在地球上的位置而有所不同。例如，约翰列侬被宣布死亡的时刻在其当地时间 (GMT-5) 中表示为 1980 年 12 月 8 日上午 11:15，但在美国西海岸，即上午 8:15，并且在列侬的出生地，是下午 4 点 15 分。不过，他只被宣告死亡一次——同一时刻，不同的解读方式。

# c# - 将列表预加载到 Backbone JS

> ID：10214676
> 
> 赞同：0
> 
> 时间：2012-04-18T17:27:15.097
> 
> 标签：c#, asp.net-mvc-3, backbone.js

我正在尝试开发一个将在页面上加载项目列表的应用程序。每个项目都需要是一个单独的模型，以便跟踪各自的属性。到目前为止，由于列表已加载，我无法在 razor 中成功执行此操作，但在回发时返回为空。我认为backbone.js 将有助于这项工作，但我只能创建一个列表，即时添加和删除项目，而不是预先加载它们。我怎么能这样做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:37:02.750

使用 Backbone，建议（在文档中）通过引导它们就位来加载所有模型（对于一个集合）。例如，您可以将脚本标记添加到执行以下操作的 html 中：

```
<script>
  var People = new Backbone.Collection;
  People.reset([{name: "Chris", age:30}, {name: "Josie", age: 27});
  var Projects = new Backbone.Collection;
  Projects.reset([{name: "Programming", due: "Monday"}, {name: "Cleaning", due: "Today"}]);
</script> 
```

...来自 Backbone 文档，已修改：[http ://documentcloud.github.com/backbone/#FAQ-bootstrap](http://documentcloud.github.com/backbone/#FAQ-bootstrap)

或者，您可以 fetch() 内容（发送 ajax 请求）：

```
<script>
  var People = Backbone.Collection.extend({
    url: "/people"
  })
  People.fetch()
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:42:57.933

我不熟悉 Windows 世界，但一种可能的预加载方式是简单地让服务器在脚本标签中写入列表，例如

```
<script>
  window.myApp.myList = [
     { name: 'fred' },
     { name: 'mary' }
  ]
</script> 
```

然后，您可以使用内联或文件中的主干代码加载该列表：

```
var people = new PeopleCollection(window.myApp.myList) 
```

希望这足够清楚。

# c# - 动态用户控件保存 ViewState

> ID：10214677
> 
> 赞同：0
> 
> 时间：2012-04-18T17:27:15.533
> 
> 标签：c#, user-controls, viewstate, webforms

我正在使用 DropDownList 让用户选择表单模板。然后用户回发到服务器，模板中的用户控件被动态呈现到页面。一旦用户填写表单并单击保存，用户控件的 ViewState 就会丢失并且值为空。

## 页面控件

```
<air:CreateEditForm ID="CreateEditForm" runat="server" />

<asp:PlaceHolder ID="phDynamicControls" runat="server" />

<p>
    <asp:Button ID="btnCreate" runat="server" Text="Create" OnClick="btnCreate_Click" CssClass="action-button" />
    <asp:Button ID="btnSave" runat="server" Text="Save" OnClick="btnSave_Click" CssClass="action-button" Visible="false" />
    <asp:HyperLink ID="linkCancel" runat="server" Text="Cancel" NavigateUrl="Index.aspx" CssClass="action-button" />
</p> 
```

## 页面代码

```
protected void btnCreate_Click(object sender, EventArgs e)
{
  CreateDynamicSteps();
}

private void CreateDynamicSteps()
{
  foreach (WorkflowTemplate workflowTemplate in template.WorkflowTemplates)
  {
    foreach (WorkflowTemplateStep workflowStep in workflowTemplate.WorkflowTemplateSteps)
    {
        if (workflowStep.SubSteps.Count > 0)
        {
            foreach (WorkflowTemplateStep workflowSubStep in workflowStep.SubSteps)
            {
                if (workflowSubStep.WhoIsDynamic)
                {
                    dynamicSteps.Add(workflowSubStep);
                }
            }
        }
        else if (workflowStep.WhoIsDynamic)
        {
            dynamicSteps.Add(workflowStep);
        }
    }
  }

  // removed for brevity

  foreach (WorkflowTemplateStep dynamicStep in dynamicSteps)
  {
    PersonSelectorDialog personSelector = (PersonSelectorDialog)LoadControl("~/Pages/UserControls/PersonSelectorDialog.ascx");
    personSelector.ClientIDMode = System.Web.UI.ClientIDMode.Static;
    personSelector.LabelID = "lbl" + dynamicStep.ID;
    personSelector.Label = dynamicStep.Name + " Selector";
    DynamicPersonSelectorDialogs.Add(personSelector);
  }

  // removed for brevity
}

private void LoadControls()
{
  foreach (PersonSelectorDialog personSelector in DynamicPersonSelectorDialogs)
  {
    Label title = new Label();
    title.ID = personSelector.LabelID;
    title.ClientIDMode = System.Web.UI.ClientIDMode.Static;
    title.Text = personSelector.Label;
    phDynamicControls.Controls.Add(title);

    phDynamicControls.Controls.Add(personSelector);
  }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-23T12:09:22.473

当用户从下拉列表中选择表单模板并触发回发时，该值需要保留在某处，因为当您执行第二次回发时，您需要从第一次回发中再次加载用户控件。

# actionscript-3 - 使用 hitTest 代替 mouseOver / mouseOut

> ID：10214680
> 
> 赞同：0
> 
> 时间：2012-04-18T17:27:32.387
> 
> 标签：actionscript-3, flash, apache-flex

几乎所有的 Flex 组件都有 mouseOver/mouseOut 或 rollOver/rollOut 事件。要求这些事件调用的不是鼠标光标，而是其他元素，例如 Image 或 Bitmap。

例如，上面有一个列图和图像动画，当图像在列上方时，我需要获取数据（列值或索引）。如果它是一个组件，那么我会使用 hitTest。但是如果是图表怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T13:08:11.723

我无法正确理解您的问题，尽管我正在尝试这个......

如果您在图表上添加鼠标侦听器并且每当事件被调度检查..

```
position.x = event.currentTarget.mouseX;
position.y = event.currentTarget.mouseY; 
```

那么你可以试试hitTest。

或者

```
if(obj.hitTestPoint(position.x,position.y)){

} 
```

这可能是工作....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:28:02.003

你不能告诉图像/位图不是 mouseEnabled 吗？

# asp-classic - 调用函数时出现错误“变量未定义”

> ID：10214685
> 
> 赞同：3
> 
> 时间：2012-04-18T17:27:50.167
> 
> 标签：asp-classic

我创建了一个经典的 asp 页面，其功能如下：

```
<%@ Language=VBScript %>
<% Option Explicit %>

<%
      <!--#INCLUDE file='ADOVBS.inc'-->
       Response.Buffer = True

%>
<%
      Function Lettergrade(lg)

             Dim lgs
             if lg>50 then
            set    lgs="P"
                else
            set    lgs="F"
             end if
           set Lettergrade= lgs
       End Function
  %>
<%
set strlettergrade=Lettergade(strgrade)
... other code goes here
%> 
```

我试图在表达式中调用该函数，但是当它给我以下错误时：

> Microsoft VBScript 运行时错误“800a01f4”
> 
> 变量未定义：'Lettergade'

有人有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T19:28:36.020

1.  **Option Explicit**意味着您必须先 DIM 变量才能使用它们。
2.  **<!--#INCLUDE file='ADOVBS.inc'-->**不是 vbscript，因此不要将它们包含在 <% %> 脚本分隔符标记之间。
3.  你需要**调暗 strgrade**
4.  在使用它之前， 您需要**DIM strlettergrade**
5.  修正 Lettergade(strgrade) 的错字

```
 <%@ Language=VBScript %> 
<% Option Explicit %>  
<% Response.Buffer = True %>

<!--#INCLUDE file='ADOVBS.inc'-->

<%
Dim strlettergrade
Dim strgrade

%>

<%
Function Lettergrade(lg)

if lg > 50 then
  Lettergrade ="P" 
else 
  Lettergrade ="F" 

End Function
%>

<%
strgrade = 75
strlettergrade=Lettergrade(strgrade)
... other code goes here 
%> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:34:37.340

尝试摆脱`Set`函数调用的内部并分配`Lettergrade = lgs`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T18:01:48.167

`Variable is undefined: 'Lettergade'`

函数似乎没有被调用`Lettergrade`-`Lettergade`可能只是一个错字问题

尝试改变：

`strlettergrade=Lettergade(strgrade)`

至

`strlettergrade=Lettergrade(strgrade)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T19:26:40.203

这个脚本有几个问题，Chris 和 Ryan 已经指出了一些问题。

1.  `Set`仅在将对象分配给变量时才需要。字符串不是 VBScript 中的对象。摆脱`Set`脚本中的所有 's。

2.  克里斯提到的明显错字。更改`Lettergade`为`Lettergrade`。

3.  您似乎没有声明`strlettergrade`or`strGrade`变量。启用后（`Option Explicit`这是一个很好的做法），必须声明**所有**变量。用于`Dim`此（如函数内部的那个）。

4.  您似乎使用字符串作为`Lettergrade`函数的参数。由于变量名是`strgrade`. 在您与`integer`. 这*可能*会导致问题。`cInt`首先使用该函数将您的字符串转换为整数。

5.  包括需要去外面的`<% %>`标签。移动`<!--#INCLUDE file='ADOVBS.inc'-->`到下一行`Option Explicit`

按照这些步骤操作，或从@Cape Cod Gunny 复制粘贴脚本。在此之后，您的脚本应该按预期工作;)。除了第 4 点，你仍然需要纠正它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T18:04:37.087

您在调用函数时拼错了 Lettergrade。变量未定义：' **Lettergade** ' 另外我也会接受 SLaks 的建议。Set 不应该用于字符串。

# sql-server - 为什么我无法连接到 SQL Server 2012 LocalDB 共享实例？

> ID：10214688
> 
> 赞同：27
> 
> 时间：2012-04-18T17:28:06.363
> 
> 标签：sql-server, sql-server-express, sql-server-2012, localdb, sql-server-2012-express

我正在尝试在我的 Windows 7 x64 机器上设置 SQL Server 2012 LocalDB (RTM, x64) 共享实例，但我似乎无法连接到共享实例。我正在使用管理员命令提示符进行所有设置。这是我创建实例的方式：

```
sqllocaldb create MyInstance 
```

这会产生响应：

```
LocalDB instance "MyInstance" created with version 11.0. 
```

到目前为止，一切都很好。现在我分享一个实例：

```
sqllocaldb share "MyInstance" "MySharedInstance" 
```

结果是：

```
Private LocalDB instance "MyInstance" shared with the shared name: "MySharedInstance". 
```

看起来还是不错的。此时，我的 info 命令产生：

```
.\MySharedInstance
MyInstance
v11.0 
```

使用管理员或非管理员命令提示符从所有者帐户（管理员）连接到实例似乎工作正常。但是，当我以普通用户（而不是 Windows 管理员）身份登录并尝试连接时，事情就偏离了轨道：

```
sqlcmd -S (localdb)\.\MySharedInstance 
```

结果是：

```
Sqlcmd: Error: Microsoft SQL Server Native Client 11.0 : Named Pipes Provider: Could not open a connection to SQL Server [2]. .
Sqlcmd: Error: Microsoft SQL Server Native Client 11.0 : Login timeout expired.
Sqlcmd: Error: Microsoft SQL Server Native Client 11.0 : A network-related or instance-specific error has occurred while establishing a connection to SQL Server. Server is not found or not accessible. Check if instance name is correct and if SQL Server is configured to allow remote connections. For more information see SQL Server Books Online.. 
```

使用“-l”开关增加登录超时没有帮助。我可以连接到未共享的默认 v11.0 实例。非管理员用户的 info 命令产生与上面相同的结果，除了没有“MyInstance”，因为它是管理员用户拥有的命名实例。以下命令（适用于管理员用户/实例所有者）：

```
sqllocaldb info ".\MySharedInstance" 
```

也会导致错误：

```
Windows API call "FileTimeToSystemTime" returned error code: -2147024809. 
```

所以问题是为什么我的非管理员用户不能连接到我的共享实例？这似乎违背了共享实例的全部目的。当我尝试查询共享实例时，“sqllocaldb info”命令引发错误是怎么回事？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-18T18:46:00.487

**另一个编辑**

Cory，如果您安装了以前版本的 SQL Server（例如 2008），那就是`sqlcmd`您正在使用的版本。为了连接到 LocalDb，您需要使用 SQL Server 2012 版本的`sqlcmd`. 因此，您对用户的说明必须确保他们使用 SQL Server 2012 版本，方法是运行：

`C:\Program Files\Microsoft SQL Server\110\Tools\Binn\sqlcmd -S "(localdb)\.\InstanceName"`

这对我有用。我还没有验证的是，这个路径和版本是否对*只*安装了 sqllocaldb.msi 的`sqlcmd`用户可用。抱歉，我没有安装任何未安装 SQL Server 2012（或仅安装以前版本）的裸机来彻底尝试这一点。但是请让我知道是否明确调用 110 版本的伎俩。*`sqlcmd`*

 *我认为您也可以指示用户更改他们的系统变量，以便 110 版本首先出现（恕我直言，应该自动出现这种情况）。

Krzysztof的`FileTimeToSystemTime`一位同事已确认这是一个错误。因此，我所知道的非所有者通过`sqllocaldb`. 但是我已经证明了 SSMS 和 SSMS`sqlcmd`都可以工作，所以我希望这能让你更接近运行。

**编辑**

您需要向实例添加任何非所有者用户，例如，`CREATE LOGIN [MyDomain\OtherUser] FROM WINDOWS;`以及任何适当的权限。在我的测试登录失败并生成错误的错误消息（“FileTimeToSystemTime”错误消息是一个错误）。你还需要`GRANT CONNECT`. 执行此操作后，您*将*能够使用 Management Studio 通过此连接从第二个用户进行连接（我尝试过的唯一一个）：

```
(localdb)\.\MySharedInstance 
```

但是`sqlcmd`，无论我如何尝试连接，我仍然会收到错误消息：

```
sqlcmd -S "(localdb)\.\MySharedInstance"
sqlcmd -S ".\MySharedInstance"
sqlcmd -S "(localdb)\MySharedInstance"
sqlcmd -S "GREENHORNET\MySharedInstance"
sqlcmd -S ".\LOCALDB#SH04FF8A"
sqlcmd -S "GREENHORNET\LOCALDB#SH04FF8A" 
```

所有产量：

> HResult 0xFFFFFFFF，级别 16，状态 1 SQL Server 网络接口：
> 
> 查找指定的服务器/实例时出错 [xFFFFFFFF]。
> 
> Sqlcmd：错误：Microsoft SQL Server Native Client 10.0：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。
> 
> Sqlcmd：错误：Microsoft SQL Server Native Client 10.0：登录超时已过期。

虽然我已经验证该实例已设置为接受远程连接。所以还有一些其他的箍`sqlcmd`必须经过。

关于`sqllocaldb`exe，这如何遵循任何逻辑？我可以通过 看到该实例`info`，当我尝试停止它时收到一条正确的错误消息，当我尝试启动它时收到一条消息，它[已经] 启动，但我无法连接到它？

![在此处输入图像描述](../Images/1974b54e2287c8a8c36fbca6d2961ad8.png)

因此，除非您*需要* `sqlcmd`访问权限，否则在短期内，我会让二级用户使用 SSMS 做他们的事情（一旦您授予了足够的权限），并希望 Krzysztof 将获得有关其他项目的更多信息。

* * *

关于 4.0.2 更新，来自[http://connect.microsoft.com/SQLServer/feedback/details/723737/smo-cant-connect-to-localdb-instances](http://connect.microsoft.com/SQLServer/feedback/details/723737/smo-cant-connect-to-localdb-instances)：

> 我们明确决定不在 LocalDB 安装程序中包含 .NET Framework 4.0.2。安装 .NET Framework 更新会增加 LocalDB 安装程序的大小并可能导致重新启动。由于 LocalDB 是独立于 .NET 构建的，我们认为我们不应该为每个 LocalDB 安装承担这个成本。未来的 .NET 版本（包括 .NET 4.5，现在在 CTP 中）将支持开箱即用的 LocalDB。一些开发人员可能还希望在未来选择 ODBC、PHP 驱动程序/PDO，并且可能还会选择 JDBC。这些开发人员不会对更新 .NET 感兴趣。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-10T05:23:35.613

正如原始帖子所建议的那样，这并不像预期的那么简单，但我最终能够通过命名管道进行连接。

![通过命名管道连接到 LocalDB 实例](../Images/2c417e8547166bfdbb407b42ffe410a2.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-26T16:23:41.480

此答案假定删除实例是可以的。
即：您的所有数据都将消失，这没关系。

升级我的 SSMS 后，我遇到了同样的问题。

```
sqllocaldb i
.\MyCustomInstance

sqllocaldb d
LocalDb instance ".\MyCustomInstance" does not exist!

sqllocaldb i .\MyCustomInstance
Windows API call "FileTimeToSystemTime" returned error code: -2147024809. 
```

为了摆脱有问题的实例，我必须创建另一个`MyCustomInstance`我猜它会覆盖已经存在的实例，现在你可以删除它

```
sqllocaldb c MyCustomInstance
LocalDB instance "MyCustomInstance" created with version 11.0.
sqllocaldb d .\MyCustomInstance
LocalDB instance ".\Octopus" deleted. 
```

然后，启动实例并共享它。您必须首先启动实例。

```
sqllocaldb s MyCustomInstance
LocalDB instance "MyCustomInstance" started.
sqllocaldb h MyCustomInstance MyCustomInstance
Private LocalDB instance "MyCustomInstance" shared with the shared name: "MyCustomInstance". 
```

现在，当你需要连接时，你连接到`(localdb)\.\MyCustomInstance`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-08T14:16:40.877

安装完整的 .NET 框架 4.5.2 或更高版本，**然后重新启动**，您应该能够使用以下命令进行连接：

```
sqlcmd -S (localdb)\.\MySharedInstance 
```

我发现命名管道在机器重启时会生成一个新的哈希，命名共享实例将在重启后持续存在。

重要的是要注意它在重新启动后才会起作用。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-11-23T16:02:44.733

问题是您需要引用数据库名称：

```
sqlcmd -S "(localdb)\.\MySharedInstance" 
```*

# python - pip install numpy pandas 失败？

> ID：10214692
> 
> 赞同：3
> 
> 时间：2012-04-18T17:28:36.793
> 
> 标签：python, pandas, numpy, pip

Pandas 依赖于 numpy，安装 pandas 依赖项存在一个[开放构建问题。](https://github.com/pydata/pandas/issues/507)无论如何，在下面的示例中为什么 pip 退出 numpy 有什么想法吗？如果使用需求文件也会发生。

```
$virtualenv /tmp/pandatest
$source /tmp/pandatest/bin/activate
$pip install numpy pandas 
```

然后在 numpy setup 的中间，panda setup 被触发。

```
 DeprecationWarning)
C compiler: /usr/bin/gcc-4.0 -DNDEBUG -g -O3 -m32

compile options: '-Inumpy/core/src/private -Inumpy/core/src -Inumpy/core -     Inumpy/core/src/npymath -Inumpy/core/src/multiarray -Inumpy/core/src/umath -Inumpy/core/include -I/Library/Frameworks/Python.framework/Versions/2.6/include/python2.6 -c'
gcc-4.0: _configtest.c
/usr/bin/gcc-4.0 _configtest.o -o _configtest
_configtest
failure.
removing: _configtest.c _configtest.o _configtest
building data_files sources
build_src: building npy-pkg config files
Downloading/unpacking pandas
Running setup.py egg_info for package pandas
# numpy needed to finish setup.  run:

    $ pip install numpy  # or easy_install numpy 
```

....在测试 numpy 时

```
(pandatest)$ python
Python 2.6.2 (r262:71600, Apr 16 2009, 09:17:39) 
[GCC 4.0.1 (Apple Computer, Inc. build 5250)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy
Traceback (most recent call last):
   File "<stdin>", line 1, in <module>
ImportError: No module named numpy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:18:14.950

可能发生的事情是：

它无法安装“pandas”，因此也没有安装 numpy。

pip 是这样工作的：

如果您尝试安装多个软件包，并且其中一个软件包并不真正存在，则会破坏所有安装，因此由于无法安装 pandas，因此不会安装 pandas。

pip 中有一个问题可以解决这个问题，我尝试解决了这个问题，但并不是那么简单......

反正：

尝试分别安装每个包。

1.  尝试安装 numpy （它会工作）。
2.  尝试安装 pandas（它不起作用，但您将能够看到它为什么没有安装）

# python - 在 Tkinter 的背景中运行无限循环

> ID：10214701
> 
> 赞同：4
> 
> 时间：2012-04-18T17:29:22.987
> 
> 标签：python, loops, tkinter

我希望代码在后台运行并定期更新我的 GUI。我怎样才能做到这一点？

例如，假设我想在 GUI 代码的后台执行类似的操作，您可以在下面看到：

```
x = 0

while True:
   print(x)
   x = x + 1
   time.sleep(1) 
```

这是图形用户界面代码：

```
class GUIFramework(Frame):

    def __init__(self,master=None):
        Frame.__init__(self,master)
        self.master.title("Volume Monitor")
        self.grid(padx=10, pady=10,sticky=N+S+E+W)
        self.CreateWidgets()

    def CreateWidgets(self):
        textOne = Entry(self, width=2)
        textOne.grid(row=1, column=0)

        listbox = Listbox(self,relief=SUNKEN)
        listbox.grid(row=5,rowspan=2,column=0,columnspan=4,sticky=N+W+S+E,pady=5)
        listbox.insert(END,"This is an alert message.")

if __name__ == "__main__":
    guiFrame = GUIFramework()
    guiFrame.mainloop() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T18:34:38.730

有点不清楚顶部的代码应该做什么，但是，如果你只想每秒调用一个函数（或者你想要的每一秒），你可以使用该[`after`](http://effbot.org/tkinterbook/widget.htm)方法。

因此，如果您只想对 做某事`textOne`，您可能会执行以下操作：

```
...
textOne = Entry(self, width=2)
textOne.x = 0

def increment_textOne():
    textOne.x += 1

    # register "increment_textOne" to be called every 1 sec
    self.after(1000, increment_textOne) 
```

你可以让这个函数成为你的类的方法（在这种情况下我称之为它`callback`），你的代码看起来像这样：

```
class Foo(Frame):

    def __init__(self, master=None):
        Frame.__init__(self, master)
        self.x = 0
        self.id = self.after(1000, self.callback)

    def callback(self):
        self.x += 1
        print(self.x)
        #You can cancel the call by doing "self.after_cancel(self.id)"
        self.id = self.after(1000, self.callback)  

gui = Foo()
gui.mainloop() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T19:03:24.963

如果您真的想运行一个独特的无限循环，您别无选择，只能使用单独的线程，并通过线程安全队列进行通信。但是，除非在相当不寻常的情况下，您永远不需要运行无限循环。毕竟，您已经运行了一个无限循环：事件循环。所以，当你说你想要一个无限循环时，你实际上是在问如何在无限循环中进行无限循环。

@mgilson 给出了一个很好的例子来说明如何使用`after`，你应该在尝试使用线程之前考虑尝试。线程使您想要的成为可能，但它也使您的代码更加复杂。

# javascript - 如何通过 jquery 获取 javascript 分页数据？

> ID：10214708
> 
> 赞同：0
> 
> 时间：2012-04-18T17:30:05.583
> 
> 标签：javascript, jquery, ajax

我需要一个网站，一些我想通过 jquery 解析的数据。除了包含 javascript 锚链接的分页之外，我什么都能做。

[![](../Images/f8e752c651e9ebf43f678cd6f24242d0.png)](https://i.stack.imgur.com/rEEEs.jpg)
[（来源：[grinshare.com](http://www.grinshare.com/img2/QJGRHK.png)）]

```
<a href="javascript:__doPostBack('grdResults$ctl29$ctl01','')">2</a> 
```

我想通过ajax在第一页的一个段落中加载第二页（某些选择器，比如“p #listo”）。我可以通过ajax做到这一点吗？如果可能的话，请你能分享代码..

提前致谢..

注意：
我想通过 ajax 获得第二页...我尝试了很多东西....

```
$.ajax({
    url: __doPostBack('grdResults$ctl29$ctl01',''),
    success: function(data){
    //Some function I will perform
   }
}); 
```

但是它会重新加载页面...如果我使用引用作为 url 它会给出错误...我尝试获取、加载、发布但无法做到...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:39:57.670

您需要有一个在服务器端输出数据和处理分页的 URL。例如，它可能是 /mydata/page/3/，它会抓取数据的第 3 页并以某种格式（JSON、XML、YAML 等）返回它。

然后，您可以让 jQuery 在点击分页控制器中的每个项目时发送一个 ajax 请求，而不是运行 __doPostBack()。

切换到 ASP.NET MVC 会对您有所帮助。

# javascript - 您可以使用 javascript (ECMAScript5) 中的对象文字表示法指定其他描述符属性吗？

> ID：10214714
> 
> 赞同：2
> 
> 时间：2012-04-18T17:30:22.363
> 
> 标签：javascript, json

我已经看到可以使用对象文字符号来定义一个带有 getter 的对象，如下所示：

```
var foo = {
            get bar() { return 3; }
          } 
```

是否有一些对象文字语法允许我设置上面“bar”的其他属性描述符属性，例如“enumerable”？

或者，“ **get/set** ”是 ECMAScript5 对象文字表示法支持的唯一属性描述符属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:16:34.310

一个很好的问题......但我不认为它可以做到。

`get`并被定义为与[属性描述符](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)`set`相同的操作符：

```
Object.defineProperty(foo, "bar", {value : 3,  
                                   writable : true,  
                                   enumerable : true,  
                                   configurable : true,
                                   get : function(){ return value; },  
                                   set : function(newValue){ value = newValue;}
                                  }); 
```

浏览 javascript[运算符列表](https://developer.mozilla.org/en/JavaScript/Reference/Operators)，除了 get 和 set 之外，我没有看到其他描述符的任何类似内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:45:59.837

不，你将不得不使用`Object.defineProperty`.

这就是[规格](http://es5.github.com/#A.3)所说的：

> **对象字面量：**
> 
> ```
> { }
> { PropertyNameAndValueList }
> { PropertyNameAndValueList , } 
> ```
> 
> **属性名称和值列表：**
> 
> ```
> PropertyAssignment
> PropertyNameAndValueList , PropertyAssignment 
> ```
> 
> **财产分配：**
> 
> ```
> PropertyName : AssignmentExpression
> get PropertyName() { FunctionBody }
> set PropertyName( PropertySetParameterList ) { FunctionBody } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:34:19.747

您可能还想使用的唯一方法是 setter 语法，但您可能已经知道这一点。

一些浏览器支持`__proto__`允许您设置对象原型的属性，但它没有被指定并且可能每天都被删除。

像使用常规属性名称一样使用它：

```
var foo = {
    __proto__: bar
}; 
```

# vba - 我应该在 VB6 中明确声明我的变量吗

> ID：10214719
> 
> 赞同：5
> 
> 时间：2012-04-18T17:30:44.867
> 
> 标签：vba, coding-style, vb6, standards

我正在用 Visual Basic 6 编写一些代码，我注意到我什至不需要声明变量就可以工作。

以下（明确声明）：

```
Dim foo As String
foo = "Bar" 
```

似乎和这个（隐式声明）一样有效：

```
Dim foo
foo = "Bar" 
```

或者这个（没有声明）：

```
foo = "Bar" 
```

我知道在 C# 中我需要在使用它之前声明一个变量，并且隐式和显式声明都是可以接受的。我也知道在 Python 中，在使用变量之前根本不会声明变量。

关于 Visual Basic 6（以及扩展的 VBA），哪个是正确的？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T17:38:34.043

这是一个很好的**习惯**。

有一个名为 Option Explicit 的 VB 选项。将其设置为 ON，然后 VB 会强制您在使用变量之前声明它：不再

```
foo = "Bar" 
```

这有助于稍后在您的代码中输入错误的变量名......没有它，您可以输入变量名，您的程序编译但不会工作，而且很难挖掘出来。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-18T18:04:41.837

在工具/选项的编辑器选项卡中，选中**需要变量声明**复选框。这将自动将**Option Explicit**添加到每个新代码模块。

![在此处输入图像描述](../Images/8f96f1623f45197fdcd75fef8e6ccb5a.png)

我想说这不仅仅是一个最佳实践。我认为这是对程序员理智的要求。设置是持久的；一旦设置，它就会保持启用状态。微软之所以选择它是因为一些旧版本的 VB 没有该功能，这也解释了为什么它默认被禁用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-18T23:17:45.273

> > > 我应该在 VB6 中明确声明我的变量吗？

是的。为什么？

不仅因为这是一个好习惯或必须这样做，还因为我在这篇文章中也提到了一个主要原因。

> VB 默认变量为 Variant 类型。Variant 类型变量可以保存任何类型的数据，从字符串、整数、长整数、日期、货币等。默认情况下，“Variants”是“最慢”类型的变量。
> 
> 和
> 
> 正如我前面提到的，如果不指定变量的类型，VB 默认变量为 Variant 类型。而且您不希望这样做，因为它会减慢您的代码，因为 VB 编译器需要时间来决定您使用哪种变量。还应避免变体，因为它们会导致可能的“类型不匹配错误”。

**主题：“犯错”是人之常情（见第 3 点）**

**链接：[http ://siddharthout.wordpress.com/2011/08/01/to-err-is-human/](http://siddharthrout.wordpress.com/2011/08/01/to-err-is-human/)**

上面的链接还涵盖了与可以/应该注意的编码相关的其他部分。

高温高压

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-18T18:15:38.350

我强烈建议您始终声明变量。这可以通过在每个代码模块中设置 Option Explicit 来强制执行。您可以让 VB6 自动为您执行此操作，方法是转到工具->选项，在编辑器选项卡中选中需要变量声明。

如果您不使用 Option Explicit，那么每次您引用以前未知的变量名称时，都会自动为您创建一个变量。这是一种非常危险的行为，因为如果您输入错误的变量名，将会为您创建一个空变量，从而导致您的代码出现意外行为。

您不必声明变量的类型**，**但我也建议您这样做。变量的默认类型是 Variant，如果您正在创建供 C++ 或 C# 使用的 COM 对象（如果有人再这样做的话），它的性能开销很小并且会产生一些问题。

# javascript - JQuery $.ajax() post - java servlet 中的数据

> ID：10214723
> 
> 赞同：43
> 
> 时间：2012-04-18T17:30:51.207
> 
> 标签：javascript, jquery, ajax, hashmap

我想将数据发送到 java servlet 进行处理。数据将具有可变长度并位于键/值对中：

```
{ A1984 : 1, A9873 : 5, A1674 : 2, A8724 : 1, A3574 : 3, A1165 : 5 } 
```

数据不需要以这种方式格式化，这就是我现在拥有的方式。

```
var saveData = $.ajax({
      type: "POST",
      url: "someaction.do?action=saveData",
      data: myDataVar.toString(),
      dataType: "text",
      success: function(resultData){
          alert("Save Complete");
      }
});
saveData.error(function() { alert("Something went wrong"); }); 
```

该`$.ajax()`功能工作正常，因为我确实收到了“保存完成”的警报。我的困境在于 servlet。如何检索数据？我尝试使用这样的 HashMap ......

```
HashMap hm = new HashMap();
hm.putAll(request.getParameterMap()); 
```

...但`hm`结果是 null 我猜这意味着`.getParameterMap()`找不到键/值对。我哪里错了或者我错过了什么？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-04-18T17:48:52.273

你不想要一个字符串，你真的想要一个键值对的 JS 映射。例如，改变：

```
 data: myDataVar.toString(), 
```

和：

```
var myKeyVals = { A1984 : 1, A9873 : 5, A1674 : 2, A8724 : 1, A3574 : 3, A1165 : 5 }

var saveData = $.ajax({
      type: 'POST',
      url: "someaction.do?action=saveData",
      data: myKeyVals,
      dataType: "text",
      success: function(resultData) { alert("Save Complete") }
});
saveData.error(function() { alert("Something went wrong"); }); 
```

jQuery 理解这样的键值对，它不理解大字符串。它只是将其作为字符串传递。

**更新：**代码已修复。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-01-18T07:55:36.817

使用 java 脚本和 ajax 调用发送数据的简单方法。

首先正确你的表格是这样的

```
<form id="frm_details" method="post" name="frm_details">
<input  id="email" name="email" placeholder="Your Email id" type="text" />
    <button class="subscribe-box__btn" type="submit">Need Assistance</button>
</form> 
```

sumbit 后表单 id #frm_details 上的 javascript 逻辑目标

```
$(function(){
        $("#frm_details").on("submit", function(event) {
            event.preventDefault();

            var formData = {
                'email': $('input[name=email]').val() //for get email 
            };
            console.log(formData);

            $.ajax({
                url: "/tsmisc/api/subscribe-newsletter",
                type: "post",
                data: formData,
                success: function(d) {
                    alert(d);
                }
            });
        });
    }) 

General 
Request URL:https://test.abc
Request Method:POST
Status Code:200 
Remote Address:13.76.33.57:443

From Data
email:abc@invalid.ts 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-05-12T10:19:26.593

您可以将 ajax 帖子用作：

```
 $.ajax({
   url: "url", 
   type: "POST",
   dataType: "json",
   contentType: "application/json; charset=utf-8",
   data: JSON.stringify({ name: 'value1', email: 'value2' }),
   success: function (result) {
       // when call is sucessfull
    },
    error: function (err) {
    // check the err for error details
    }
 }); // ajax call closing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T02:00:38.190

就目前而言，我要走的路线与我之前所说的不同。我将格式化数据的方式更改为：

```
 &A2168=1&A1837=5&A8472=1&A1987=2 
```

在服务器端，我使用 getParameterNames() 将所有键放入 Enumerator，然后遍历 Enumerator 并将键和值放入 HashMap。它看起来像这样：

```
Enumeration keys = request.getParameterNames(); 
HashMap map = new HashMap(); 
String key = null; 
while(keys.hasMoreElements()){ 
      key = keys.nextElement().toString(); 
      map.put(key, request.getParameter(key)); 
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-12-15T07:01:46.780

要从`POST`命令中的 servlet 获取值，您可以按照本文中解释的方法[使用](https://stackoverflow.com/questions/9293991/how-to-get-the-data-via-ajax-in-servlet/9299128#9299128)格式`request.getParameter(key)`，该方法将返回您想要的值。

# java - 从表中获取随机字符串，但不超过一次

> ID：10214728
> 
> 赞同：0
> 
> 时间：2012-04-18T17:31:28.553
> 
> 标签：java

我试图弄清楚如何从表中获取随机字符串，包括 10 个单词。我正在创建游戏刽子手，但我不想一个词两次。游戏将继续进行，直到选出 5 个单词。

有什么好的解决办法吗？这是我现在的表的随机化方法。

```
private String wordList[] = { "String1", "String2", ..... }
public void getRandomWord(){
    Random generator = new Random();
    int r = generator.nextInt(9);
    activeWord = wordList[r];
} 
```

我试着让它工作，但没有运气：

```
ArrayList<String> usedWords= new ArrayList<String>();
public void getRandomWord(){
    Random generator = new Random();
    int r = generator.nextInt(9);
    if(addWord(wordList[r])){
        activeWord= wordList[r];
    }
}

private boolean addWord(String word) {
    for(String v : usedWords){
        if(!v.equals(word)){
            usedWords.add(word);
            return true;
        }
        else{
            getRandomWord();
        }
    }
    return false;   
} 
```

我想我已经做了一个迭代，但我猜那不是必要的。

我一直在考虑有一个带有布尔值的字符串表。所以如果这个词的值是真的，我就抓住它，如果不是，我就一直走下去，直到我找到一个词。

我可能会为此使用一个while循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:40:02.577

如果将 wordList 设为 ArrayList，则每次使用时都可以从列表中删除该单词。这样，可能值的列表就会缩小，并且不会有选择两次的风险。

# regex - /^$/ 匹配哪个非空字符串？

> ID：10214730
> 
> 赞同：8
> 
> 时间：2012-04-18T17:31:33.080
> 
> 标签：regex, perl

在 Perl SO [answer](https://stackoverflow.com/questions/9661379/perl-how-to-prompt-for-input-and-exit-if-user-empty-string-exit/9661651#9661651)中，张贴者使用此代码匹配空字符串：

```
$userword =~ /^$/; #start of string, followed immediately by end of string 
```

[brian d foy](https://stackoverflow.com/users/8817/brian-d-foy)对此评论说：

> 你不能真的这么说，因为这将匹配一个特定的非空字符串。

**问题**：与哪个非空字符串匹配？它是仅由“”组成的字符串`\r`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T17:34:41.270

```
use strict;
use warnings;

use Test::More;

ok("\n" =~ /^$/);
ok("\n" =~ /^\z/);
ok("\n" =~ /^\A\z/); # Better as per brian d. foy's suggestion

done_testing; 
```

如果要测试字符串是否为空，请使用`/^\z/`或查看[长度](http://perldoc.perl.org/functions/length.html)是否`$str`为零（这是我更喜欢的）。

输出：

```
好的 1
不行 2
不好 3
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-18T18:43:03.560

让我们检查一下文档，为什么不呢？引用[perlre](http://perldoc.perl.org/perlre.html) ,

`$`: 匹配行尾（或末尾换行符之前）

给定

`\z`: 仅在字符串末尾匹配

这意味着`/^$/`相当于`/^\n?\z/`。

```
$ perl -E'$_ = "";    say /^$/ ||0, /^\n?\z/ ||0, /^\z/ ||0;'
111

$ perl -E'$_ = "\n";  say /^$/ ||0, /^\n?\z/ ||0, /^\z/ ||0;'
110 
```

请注意，`/m`更改内容`^`和`$`匹配。在 下`/m`，`^`匹配任何“行”的开头，`$`匹配任何换行符之前和字符串末尾。

```
$ perl -E'$_ = "abc\ndef\n";  say "matched at $-[0]" while  /^/g'
matched at 0

$ perl -E'$_ = "abc\ndef\n";  say "matched at $-[0]" while  /$/g'
matched at 7
matched at 8 
```

并使用 /m：

```
$ perl -E'$_ = "abc\ndef\n";  say "matched at $-[0]" while  /^/mg'
matched at 0
matched at 4   <-- new

$ perl -E'$_ = "abc\ndef\n";  say "matched at $-[0]" while  /$/mg'
matched at 3   <-- new
matched at 7
matched at 8 
```

`\A`,`\Z`并且`\z`不受`/m`:

```
$ perl -E'$_ = "abc\ndef\n";  say "matched at $-[0]" while  /\A/g'
matched at 0

$ perl -E'$_ = "abc\ndef\n";  say "matched at $-[0]" while  /\z/g'
matched at 8

$ perl -E'$_ = "abc\ndef\n";  say "matched at $-[0]" while  /\Z/g'
matched at 7
matched at 8 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-18T19:02:14.340

正则表达式`/^$/`匹配非空字符串`"\n"`。

默认情况下，Perl 正则表达式匹配假定字符串包含单“行”文本。

`^`匹配行首；在没有`/m`修饰符的情况下，这与字符串的开头相同。

`$`匹配行尾或末尾的换行符之前（这就是`/^$/`匹配非空字符串的原因`"\n"`）。

报价`perldoc perlre`：

> 默认情况下，“^”字符保证只匹配字符串的开头，“$”字符只匹配结尾（或结尾的换行符之前），Perl 在假设字符串只包含一条线。嵌入的换行符不会被“^”或“$”匹配。但是，您可能希望将字符串视为多行缓冲区，这样“^”将匹配字符串中的任何换行符（除非换行符是字符串中的最后一个字符），而“$”将在任何换行符之前匹配。以更多开销为代价，您可以通过在模式匹配运算符上使用 /m 修饰符来做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T19:16:58.947

***脚本：***

```
my $str = "\n";

my $test1 = ($str =~ /^$/)   ? 1 : 0;
my $test2 = ($str =~ /\A\z/) ? 1 : 0;

print "$test1, $test2\n"; 
```

***输出：***

```
1, 0 
```

# wcf - 具有传输安全性的 wcf 服务

> ID：10214733
> 
> 赞同：1
> 
> 时间：2012-04-18T17:31:43.693
> 
> 标签：wcf, wcf-security, wcf-client

几天以来，我一直在努力追随。请帮我。我正在使用带有 .Net 3.5 的 XP 机器。我正在关注这个例子[http://msdn.microsoft.com/en-us/library/ms729789.aspx](http://msdn.microsoft.com/en-us/library/ms729789.aspx)。我使用[http://msdn.microsoft.com/en-us/library/ms733813(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms733813(v=vs.90).aspx)创建了一个证书，并在证书（本地计算机）> 受信任的根证书颁发机构 > 证书中导入了根证书和证书（本地计算机）>个人>证书中的另一个。我有自托管服务。软管代码是

```
 ServiceHost svcHost = new ServiceHost(typeof(CalculatorService.CalculatorService), new  Uri("https://localhost:8012/CalculatorService"));           
        ServiceMetadataBehavior smb = svcHost.Description.Behaviors.Find<ServiceMetadataBehavior>();
        if (smb == null)
            smb = new ServiceMetadataBehavior();
        smb.HttpsGetEnabled = true;
        smb.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
        svcHost.Description.Behaviors.Add(smb);
        svcHost.AddServiceEndpoint(ServiceMetadataBehavior.MexContractName,
            MetadataExchangeBindings.CreateMexHttpsBinding(),
            "mex");
        WSHttpBinding b = new WSHttpBinding();
        b.Security.Mode= SecurityMode.Transport;
        b.Security.Transport.ClientCredentialType = HttpClientCredentialType.None; 
        svcHost.AddServiceEndpoint(typeof(CalculatorService.ICalculator),b , "");
        svcHost.Credentials.ServiceCertificate.SetCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindBySubjectName, "SignedByCA");
        svcHost.Open();
        Console.WriteLine("The service is ready.");
        Console.WriteLine("Press <ENTER> to terminate service.");
        Console.WriteLine();
        Console.ReadLine();
        svcHost.Close(); 
```

当我尝试在客户端中添加引用时，出现以下错误。

> 下载“https://localhost:8012/CalculatorService/mex”时出错。底层连接已关闭：发送时发生意外错误。身份验证失败，因为远程方已关闭传输流。元数据包含无法解析的引用：“https://localhost:8012/CalculatorService/mex”。[向https://localhost:8012/CalculatorService/mex](https://localhost:8012/CalculatorService/mex)发出 HTTP 请求时出错. 这可能是由于在 HTTPS 情况下未使用 HTTP.SYS 正确配置服务器证书。这也可能是由于客户端和服务器之间的安全绑定不匹配造成的。底层连接已关闭：发送时发生意外错误。身份验证失败，因为远程方已关闭传输流。如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

我想我已经尝试了所有可能的方法。现在，我一点头绪都没有。请帮我。你是我最后的资源。

# vb.net - 解析 HTML 文档中的表格并提取 TR 和 TD。带有 HTML 敏捷包

> ID：10214737
> 
> 赞同：0
> 
> 时间：2012-04-18T17:31:49.850
> 
> 标签：vb.net, html-parsing, html-agility-pack

我已经完成了将表格格式的旧数据转换为新格式的工作。

旧的虚拟数据如下：

```
<table>
<tr>
<td>Some text 1.</td>
<td>Some text 2.</td>
</tr>
..... //any number of TRs goes here
</table> 
```

问题是新数据需要采用这种格式：

一些文字 1\. - 一些文字 2.......

这里需要做的总结：

查找表中的所有 TR。对于每个 TR 找到第一个 TD 并与用“ - ”分隔的第二个 TD 连接。

我正在使用带有 VB.Net 的 HTML 敏捷包。

请帮忙。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:32:47.870

您可以使用 Linq 和 HtmlAgilityPack 从表节点中获取所有 td，获取此节点的所有 InnerText 并创建新的 TR / TD。

```
// tableNode is the <table> HtmlNode. If you know where is this table you can use XPath to find him.

Dim sb As New StringBuilder()
For Each childNode As HtmlNode In tableNode.DescendantNodes().Where(Function(n) n.Name = "td")
    sb.Append(String.Format("{0} - ", childNode.InnerText))
Next

tableNode.RemoveAllChildren()

Dim newTrNode As HtmlNode = tableNode.OwnerDocument.CreateElement("tr")
Dim newTdNode As HtmlNode = tableNode.OwnerDocument.CreateElement("td")

newTdNode.InnerHtml = sb.ToString()
newTrNode.AppendChild(newTdNode)

tableNode.AppendChild(newTrNode) 
```

我希望它有帮助

# iphone - 如何使用 NSXMLParser 读取此 CDATA

> ID：10214747
> 
> 赞同：2
> 
> 时间：2012-04-18T17:32:32.113
> 
> 标签：iphone, objective-c, ios, nsxmlparser, cdata

我熟悉 NSXMLParser 并使用它来读取一些 XML 行，但我对这些行有疑问：

```
 <item>
    <title>Price Drop: AngerOfStick2  (Games)</title>
    <link>http://appshopper.com/games/angerofstick2</link>
    <category>Games</category>
    <guid isPermaLink="false">http://appshopper.com/games/angerofstick2-Wed, 18 Apr 2012 10:49:58 EDT-price</guid>
    <description><![CDATA[
        <img src="http://images.appshopper.com/icons/408/347359.png" align="left"/>
        <h3>AngerOfStick2 1.1.6</h3><br/>
        <b>Device:</b> iOS iPhone<br />
        <b>Category:</b> Games<br />
        <b>Price:</b> $.99 -> Free, <b>Version:</b> 1.1.6 (<a href="/link/angerofstick2">iTunes</a>) <br/><br/>
        <img src="http://a1.mzstatic.com/us/r1000/106/Purple/v4/f7/91/f9/f791f91e-454f-9525-2ebc-9c341707d0ad/mza_5266557554023051353.640x960-75.jpg" width="480" align="right"/>
        <b>Description:</b><br /><br />
        Limited Time SALE! 50% OFF! Get it now and don’t miss out!============UPDATES INFO============= version 1.0.1 :-Game Center Support-RETINA Icon Supportversion 1.0.2 :- Doodle Runner ( Add New Mode )version 1.0.3 :- Survival Mode ( Add New Mode ) version 1.0.4 :- Jump Jump Mode ( Add New Mode ) version 1.0.6 :-Mulitiplayer Mode: 1 vs 1   ( Add New Mode )------Main Update Plan------=====================================User say :- &quot; This is a wonderful game! It has a perfect balance of fast action-packed entertainment, and it is completely addicting! I would recommend this game to anyone! &quot;- &quot; Get this game! It's one of the best games I've played for a while! GET THIS GAME! &quot;- &quot; This game is the beast so addicte to it I can't stop playing it. &quot;- &quot; This is a great game! Really REALLY entertaining when you get into the zone. 5 stars !!!!!!!!!!!!!!!!  &quot;- &quot; Ohh yeaaaaaaaa oh yeaaaa oh yea! &quot;Introduction:- Anger of stick 2nd Story -Unknown enemies in the city emerge and the hero continues to remove enemies with a variety of weapons, and helicopters and robots that can devastate all enemies at a time.Special Features: - Action : You can feel the realistic fighting action with 130 behaviors and Hero air combo action is added that can remove all enemies at one time.- Weapons: Enemies can be handled lightly by using helicopters and robots in the map, and weapons such as M1911, UZI, Granade Luncher, Spas_12, SG550, Remington_870, Flamethrower, Ray-gun, Mini-gun, Bat, and Sword.- Map: Cities, deserts and forests are configured in the map and the fighting action inside building is added.Tips:- When enemies come on the both sides, all enemies will be fallen down on seizing and throwing enemies back.- An infinite combo attack is available with Hero air combo.- Enemies can be handled by well-using robots and helicopters on the streets.- To avoid the attacks from guns and robots of enemies, button on the key to move to the left is necessary.Support Information: For additional support, please contact: E-mail : pjh097@gmail.com<br/><br/><b>What's New</b><br /><br />Fixed some bug.<br/><br/>
        <a href="http://appshopper.com/games/angerofstick2">AngerOfStick2</a><br /><br />
    ]]></description>
    <pubDate>Wed, 18 Apr 2012 10:49:58 EDT</pubDate>
    </item> 
```

如何从描述元素中获取 img src？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:34:58.787

用这个方法...

```
- (void)parser:(NSXMLParser *)parser foundCDATA:(NSData *)CDATABlock
{
    NSString *someString = [[NSString alloc] initWithData:CDATABlock encoding:NSUTF8StringEncoding];
// reparse the string to extract the img src attribute value... 
} 
```

希望这会有所帮助...：D

# ruby-on-rails - 使用 watir-webdriver 单击文件下载弹出窗口中的按钮

> ID：10214749
> 
> 赞同：2
> 
> 时间：2012-04-18T17:32:33.467
> 
> 标签：ruby-on-rails, ruby, watir, watir-webdriver

伙计们，

我有一个有趣的问题。我在网页上有一些 javascript，单击它会打开一个弹出窗口。我试图找到窗口的标题以便我可以点击它，窗口有以下两个按钮“取消”和“保存文件”。这是我在我的 ruby​​ 代码中所做的：

```
@windows = @browser.windows #this should return an array, so @windows is an array
p @windows[1] #output of this is #<Watir::Window:0x115c796cc located=true>
puts "This is the title of the second window---->"+@windows[1].title #this puts blank 
```

我看到的问题是为什么我的 windows 对象在我打印出来时没有任何变量，`p @windows[1]`还有为什么我打印时没有打印标题`@windows[1].title`。我的目标是点击弹出窗口的“下载文件”按钮

这是我拥有的一段 HTML：

```
<td>
   <a onclick="window.open(this.href);return false;" href="/search/searches/1563/exports/1017">6175-1017-20120418181521-karnire.eml.zip</a>
</td> 
```

我尝试的另一件事是在我的代码中做这样的事情：

```
@windows = @browser.windows
@browser.window(:title => @windows[1].title).use do
     @browser.button(:value => "Save File").click
end 
```

对于上面我收到这样的错误：

```
Unable to locate window "{639686d9-4641-aa41-bf6f-3ba89659d921}" (Selenium::WebDriver::Error::NoSuchWindowError) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:59:56.610

我将从[watir-webdriver 博客上提供的信息开始](http://watirwebdriver.com/browser-downloads/)

如果这不起作用，请尝试查看[有关文件下载的 watir-wiki 页面](http://wiki.openqa.org/display/WTR/File+Downloads)？

它有点过时（一年内没有更新，也使用 autoit 而不是 rautomation）但它可能足以让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T03:06:17.030

Watir 可能没有等待窗口加载。尝试在单击后放置一个 sleep(10) 。

# git - 合并分支时如何防止更改被覆盖？

> ID：10214754
> 
> 赞同：2
> 
> 时间：2012-04-18T17:32:50.113
> 
> 标签：git, version-control, merge, branching-and-merging

我是 Git 新手（来自 Subversion 和 Bazaar）。

当我一直在处理一个分支并进行提交时，从那时起 master 发生了一些提交，当我将分支合并到 master 时，我发现了一些奇怪的情况：

*   在我的提交和主人的提交中，我们都创建了一个具有相同路径的新文件。它决定用我的文件完全覆盖主文件，没有冲突警告！
*   已在两个分支中修改的预先存在的文件向我显示冲突警告，并且为*某些*部分添加了内联注释，但对于其他部分，它实际上会在没有警告的情况下覆盖。

我可以告诉 Git 对这些冲突更严格吗？我不希望它在没有警告的情况下覆盖文件，如果它要评论文件供我检查，我希望它提供完全差异的绝对评论。

如果没有，我只好确定自己都修改过的文件，然后手动合并。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T20:44:48.413

当我尝试您的第一个场景时，我得到以下输出：

```
Auto-merging conflicted
CONFLICT (add/add): Merge conflict in <filename> 
```

您的第二种情况将在两个版本之间不同的行上产生冲突，但不会在一个版本或另一个版本中发生变化的行上产生冲突。这是预期的行为。

Git 实际上比大多数其他 VCS 更好地处理这些类型的冲突。您的流程还有其他一些问题会导致问题。也许你有一些罕见的配置设置。也许您误解了您在其中一个命令上使用的标志的含义。也许有些文件实际上并没有提交到您或您同事的工作目录中。也许您在与您想象的不同的分支中。找到一个准确的、可重现的、不符合您预期的命令序列，我们可以尝试从那里帮助您。

# java - 从 PHP 脚本返回到 Java 程序的字符串无法正常工作

> ID：10214758
> 
> 赞同：0
> 
> 时间：2012-04-18T17:33:05.050
> 
> 标签：java, php, email

我正在使用 PHP 脚本通过我的 java 程序访问我的数据库。如果脚本成功运行并且电子邮件已发送，则 PHP 脚本会发送电子邮件和打印。java程序使用：

```
InputStream in = null;
            try {
                httpPost.setEntity(new UrlEncodedFormEntity(nvps));
                HttpResponse response = httpclient.execute(httpPost);
                in = response.getEntity().getContent();
                String inn = in.toString();
            } catch (IOException e) {

            }   

            String result = null;
            String sent = "sent";
            try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(in,"iso-8859-1"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null)
                    sb.append(line);
                in.close();
                result = sb.toString(); 
```

为了获得从 PHP 脚本打印的内容。使用 Log 我知道当 PHP 脚本成功运行时，正在返回“sent”，并且变量“result”的值为“sent”。现在在 java 文件中，我正在尝试执行以下操作：

```
Log.e("result",result); <-- returns sent 

            if(result.equals("sent"))
            {                   
                ... do something
            } 
```

我尝试了几种不同的方法，但无论我尝试将“结果”与“发送”进行比较，它总是失败。如果有人知道为什么会发生这种情况，我将不胜感激任何建议。我确定它很愚蠢，但我认为它与 PHP 没有完全返回我认为的内容有关，即使 Log 显示它也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:36:18.137

也许尝试：

```
result.toString().equalsIgnoreCase("sent") 
```

你也可以这样做：

```
Log.e("result",result);

System.out.println( "!" + result.toString() + "!" );

if(result.equals("sent"))
{                   
     System.out.println( "Success" );
} 
```

# xcode - cocos2d：我的加速度计旋转不顺畅

> ID：10214759
> 
> 赞同：1
> 
> 时间：2012-04-18T17:33:11.120
> 
> 标签：xcode, cocos2d-iphone, rotation, accelerometer, smooth

所以我使用 cocos2d 中的加速度计来旋转我的精灵，但旋转一点也不平滑。我知道我必须使用过滤器，但我不知道如何将它集成到我的代码中：

```
-(id) init
{
self.isAccelerometerEnabled = YES;
    [[UIAccelerometer sharedAccelerometer] setUpdateInterval:1/60];

}

- (void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {

ombreoeuf1.rotation = acceleration.y * 90 ;

} 
```

对不起我的英语我是法国人：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T19:16:32.437

以下是如何实现低通滤波器。尝试一下，`kFilteringFactor`直到你得到很好的结果。

```
// Declare an int `accelY` in your class interface and set it to 0 in init
-(void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    float kFilteringFactor = 0.1;
    accelY = (acceleration.y * kFilteringFactor) + (accelY * (1.0 - kFilteringFactor));
    ombreoeuf1.rotation = accelY * 90;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:33:09.607

可以帮助您平滑的一件事是将更新间隔设置为 30 fps 而不是 60，因此将您的 init 更新为：

```
-(id) init 
{
    self.isAccelerometerEnabled = YES;

    [[UIAccelerometer sharedAccelerometer] setUpdateInterval:1.0/30];
} 
```

# c# - WCF 客户端的 Open() 方法在禁用安全性后不再引发异常。该怎么办？

> ID：10214760
> 
> 赞同：0
> 
> 时间：2012-04-18T17:33:11.293
> 
> 标签：c#, .net, wcf

我有一个 WCF 服务-客户端对。我们一直依赖于在客户端的工厂方法上调用 Open() 来确保在我们进行任何调用之前服务可用。就像是：

```
MyClient GetClient() 
{
    MyClient client = new MyClient();
    try
    {
        client.Open();
        return client;
    }
    catch(Exception)
    {
        //perform an (important) error-handling here
    }
} 
```

这样，调用者代码将执行以下操作：

```
client = factory.GetClient();
client.CallMethodInTheService(); 
```

他们不需要担心错误处理。

当我们在 wshttpbinding 中将安全模式设置为 Windows 并将 clientCredentialType 设置为 Windows 时，这将起作用。client.Open() 将在服务不可用时抛出异常，因此错误处理代码将被执行。但是，现在我们在无法使用基于 Windows 凭据的安全性的环境中进行部署，因此我们将安全模式设置为无。但是，这会导致 client.Open() 在服务不可用时不再抛出异常，而我们遇到了一些问题，因为我们依赖于工厂的 catch 块中的这段代码。

当我们使用消息安全性而不是禁用安全性时，Open() 抛出异常的原因是什么？如果 security 设置为 none，我们如何执行类似的可用性检查？我认为在每个单独的调用中放置带有错误处理的 try catch 并不是一个好的解决方案。工厂方法是否有另一种方法可以在返回客户端对象之前检查服务的可用性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:49:55.777

不会以任何安全性方式引发异常，但仅在涉及会话的情况下才会引发异常。例如，建立安全上下文=真或协商服务凭据=真（默认值）。在这些情况下，在第一次调用服务器之前，客户端将向它发送一些基础消息，以便决定要使用的密码密钥。当您调用 open() 时，您明确要求现在进行此协商（否则它将在第一次调用时发生）。如果您打开 Wcf 日志记录（或 Fiddler），您将看到这一点。

当服务不可用时，协商将失败，因此您会遇到异常。

没有安全性，就没有会话，所以也不例外。

我建议你在服务中添加一个 IsAlive 操作。

# php - 检查查询返回的输出是否包含字符串/数字

> ID：10214761
> 
> 赞同：1
> 
> 时间：2012-04-18T17:33:12.283
> 
> 标签：php, mysql, string, moodle

我正在研究 Moodle，但由于缺乏我的知识，我有一个与**php-mysql相关的疑问，这变得很复杂。**

我有一个查询可以很好地返回输出。使用 IF-ELSe 条件，我需要检查是否存在包含字符串的字段之一和包含数字的字段之一的组合。

我正在检查的字段在数据库表中属于以下类型。

```
 element - varchar(255)
 value - longtext 
```

这是我的查询，它返回如下所述的 o/p：

询问

```
 $scormstatus = $DB->get_records_sql("SELECT sc.*, s.name AS activityname FROM mdl_scorm_scoes_track AS sc JOIN mdl_scorm AS s ON s.id = sc.scormid WHERE sc.scormid = '" .$activityid. "' AND sc.userid = '" .$userid. "' AND sc.attempt = '".$scormattempt->attempt."'");
     foreach($scormstatus as $status)
      {
         echo "<br/>".$status->element."**".$status->value."<br/>";
         if(is_numeric($status->value))
         {
           if($status->element = 'cmi.core.score.raw' && $status->value != '0')
           {
              echo "<br/>Score";
           }    
           else
           {
                if($status->element = 'x.start.time' && $status->value != '0')
                {
                  echo "<br/>Started";
                }
           }
        }
    } 
```

输出：

```
 cmi.core.lesson_location**2
         Score

         cmi.core.lesson_status**incomplete
         cmi.core.score.max**50
         Score

         cmi.core.score.min**0
         cmi.core.score.raw**0
         cmi.core.total_time**00:00:22.00

         x.start.time**1334767290
         Score 
```

现在正如您所看到的，即使我正在检查一个条件是“cmi.core.score.raw”和大于 0 的值的组合，它仍然会为所有记录打印“分数”，并且永远不会进入 else部分。

理想情况下，我期待看到的输出是这样的

理想的 O/P：

```
 cmi.core.lesson_location**2
     cmi.core.lesson_status**incomplete
     cmi.core.score.max**50
     cmi.core.score.min**0
     cmi.core.score.raw**0
     cmi.core.total_time**00:00:22.00
     x.start.time**1334767290
     Started 
```

我的猜测是它没有识别在我的 IF--ELSE 案例中是数字的 value 字段，因此总是最终进入错误的 IF 部分。

关于发生了什么的任何猜测。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:42:29.690

这段代码：

```
if($status->element = 'cmi.core.score.raw' 
```

需要是：

```
 if($status->element == 'cmi.core.score.raw' 
```

一个`=`用于分配，而两个`==`用于比较。

# c++ - 如何使用 c++ 从其他应用程序关闭设备启动时生成的错误消息框？

> ID：10214766
> 
> 赞同：1
> 
> 时间：2012-04-18T17:33:33.313
> 
> 标签：c++, memory-leaks, pocketpc, shell32

我让我的应用程序说`test.exe`每当我启动我的移动设备时就会启动。

我还将文件保存`dummy.log`在`MyDevice\Windows\startup\`文件夹中，因此当我重新启动设备时，我看到`dummy.log`文件出现错误消息框。

我在任务管理器中观察到，`shell32`每当我使用上述配置启动设备时，大小都会增加。

并且还观察到 shell32 的大小会因为`test.exe`启动设备后出现错误消息框而增加。

如果我关闭错误消息框，则`shell32`大小会减小并且`test.exe`不会产生任何问题。

`Shell32`在上述情况下只有大小会增加，在其他情况下它可以正常工作。

我不知道它`error message box`是如何与我的`test.exe`应用程序相关联的。

我进行了调试和检查，我想到的唯一选择是从我的应用程序中关闭错误消息框`i.e. test.exe`。

***编辑部分：-***

***谁能让我知道如何检查和关闭我的应用程序中的错误消息框，即“test.exe”？***

***第二次编辑：-***

***还请让我知道错误消息框如何与我的应用程序（即“test.exe”）链接？它与计时器有关吗？我没有为我的应用程序中的外部窗口做任何事情***

请回复谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:02:34.200

我认为您可以使用[FindWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx) API，然后发送[WM_CLOSE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632617%28v=vs.85%29.aspx)

有关更多信息，请阅读此 Stackoverflow[问题](https://stackoverflow.com/questions/5402158/using-sendmessage-to-send-wm-close-to-another-process)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T18:05:15.323

1.  [使用this](https://stackoverflow.com/questions/865152/how-can-i-get-a-process-handle-by-its-name-in-c)获取处理程序的处理程序。
2.  [使用此](http://msdn.microsoft.com/en-us/library/ms171548.aspx)向 relvet 区域发送鼠标事件/击键
3.  [使用这个](http://www.sevenforums.com/tutorials/67503-task-create-run-program-startup-log.html)使程序在启动时运行

*您可以使用通常包含在 Visual Studio 中的[spy++](http://msdn.microsoft.com/en-us/library/aa242713%28v=vs.60%29.aspx)查看在屏幕上发送消息的位置。*

# python - 如何在 IPython 中显示动态创建（“自定义”）函数的源代码？

> ID：10214771
> 
> 赞同：7
> 
> 时间：2012-04-18T17:33:53.440
> 
> 标签：python, function, ipython

在 IPython 会话中，我通常定义自定义函数...问题是，有时我想查看这些函数的实际代码。到目前为止，我还没有找到一种方法来显示它。使用 ？和 ？？只返回“动态生成的函数。没有可用的源代码。” 有没有办法显示用户定义函数的源代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-29T17:54:51.830

我正在使用 python 2.7.4 和 iPython 0.13.2。

我可以在函数名称前使用 iPython 中的动态创建函数的来源`??`：

```
In [8]: ??sort_words
Type:       function
String Form:<function sort_words at 0x189b938>
File:       /tmp/ipython_edit_yc1TIo.py
Definition: sort_words(s)
Source:
def sort_words(s):
    x = re.findall(r'\W+(\w+)', s)
    x.sort()
    for i in x:
        print i 
```

也许这现在可以在更新版本的 iPython 中使用？你用的是什么版本？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T18:09:29.193

尝试搜索历史：

```
In [22]: for l in _ih:
   ....:     if l.startswith('def f'):
   ....:         print l
   ....:         
   ....:         
def f():
    a= 1
    b = 2
    return a*b 
```

虽然这是非常基本的，但更好的版本会解析/运行历史记录并查看是否可以取回函数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:10:23.750

如果您正在寻找交互式定义函数的来源，您可以在 iPython 的历史中找到它的最新定义：

```
[i for (i, l) in  enumerate(_ih) if l.startswith('def foo(')][-1] 
```

然后您可以编辑该行：

```
%edit 42 
```

它将打开记事本或其他包含函数定义的文本编辑器。

或者您可以保存到文件：

```
%save foo.py 42 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-29T19:17:15.633

在以下情况下，IPython 中的函数被认为是动态生成的：

*   它们是元编程的——它们是由另一个函数创建的。在这种情况下，没有源代码，它根本不存在。

*   它们在创建它们的不同命名空间中被引用，并且没有关于它们最初位于哪个命名空间的信息。在这种情况下，找出它们最初的位置并运行？从那里。

# java - 比较一类常量的字符串值

> ID：10214772
> 
> 赞同：0
> 
> 时间：2012-04-18T17:34:02.770
> 
> 标签：java, string-comparison

我的任务是创建一个针对我们的`Constants`类运行的测试，以确保类中的每个值都是唯一的。我不是在谈论常量名称（IDE 会告诉开发人员这些是否被复制），而是常量被设置为的值。

我是 Java 新手，不确定如何去做。

需要明确的是，我的`Constants`类定义如下：

```
public static final String STATUS_RECEIVED = "RE";
public static final String STATUS_CANCELLED = "CA";
public static final String STATUS_REVIEWED = "RE"; 
```

在上面的示例中，我希望我的测试注意到有一个重复的值（因为 STATUS_RECEIVED == STATUS_REVIEWED）。我将如何以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:38:59.073

遍历所有常量的字符串值，如果它们不在集合中，则将它们粘贴在集合中。如果它们已经在集合中，则测试失败。

或者，您可以将重复项粘贴到不同的集合中，并在该组重复项为空时进行测试 - 这将在您每次运行测试时为您提供重复项列表（而不是必须重新运行测试，直到您已删除所有重复项）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:40:25.777

```
Field[] fields = Constants.class.getDeclaredFields();
List<Field> staticFields = new ArrayList<>();
for(Field f:fields) {
  if (Modifier.isStatic(f)) {
    staticFields.add(f);
  }
}
for (int i = 0; i < staticFields.size(); i++) {
  for (int j = i + 1; j < staticFields.size(); j++) {
    if (staticFields.get(i).get(null).equals(staticFields.get(j).get(null))) {
      throw new AssertionFailedError(staticFields.get(i) + " equals " 
        + staticFields.get(j));
    } 
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:41:59.960

您可以只发现字段，然后检查唯一性（例如，将它们放在树形图中，然后计数）。

```
public void test() throws Exception {
    for (Field f : ConstantsClass.class.getDeclaredFields()) {
        System.out.println(f.getName() + ": " + f.get(null));
    }
} 
```

取自[通过反射访问 Java 静态最终 ivar 值](https://stackoverflow.com/questions/850148/accessing-java-static-final-ivar-value-through-reflection)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T17:43:19.833

使用[`java.lang.Class.getFields()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getFields%28%29)，遍历数组，获取每个值（使用[`Field.get(null)`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html#get%28java.lang.Object%29)），检查它是否已经在 Set 中，如果不存在则将其存储在 Set 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T17:41:32.897

如果你改用枚举，你的生活会容易得多。然后，您可以选择使成员名称与所需值匹配

```
enum Status {
RE,CA,RE;
} 
```

在这种情况下，编译器保证它们是唯一的，或者将值存储为属性

```
enum Status {
  averbosenamedescribingwhatremeans("RE") 
  etc, etc

  private final String statusCode;

  Status(String code) {
  this.statusCode = code;
  }  
} 
```

您可以使用枚举提供的 values() 方法轻松检查单元测试中代码的唯一性。

另外，您将拥有类型安全的代码。

使用您当前的方法，您需要通过反射查询类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T17:47:50.733

考虑`Constants`保持`Enum`当前`String`值。就像是：

```
public enum Constants {

    STATUS_RECEIVED("RE"),
    STATUS_CANCELLED("CA"),
    STATUS_REVIEWED("RE")

    private String value;

    public Constants(String value) {
        this.value = value;
    }

    public String getValue() {
        return value;
    }
} 
```

然后，您的测试可以遍历`value`每个`Enum`常量的字段，如果该值已经存在则失败例如：

```
public void testConstantValueUniqueness() {
    Set<String> values = new HashSet<String>();
    for(Constants constant : Constants.values()) {
        if(values.contains(constant.getValue())) {
            // fail
        }
        values.add(constant.getValue());
    }
} 
```

# vb.net - 通过使用复选框从列表视图中删除项目

> ID：10214773
> 
> 赞同：1
> 
> 时间：2012-04-18T17:34:02.910
> 
> 标签：vb.net, visual-studio-2010

我的程序需要一个复选框项目，并根据发票上项目上的序列号，从金额列表中减去一个，我在详细信息页面上的列表视图中有以下内容，我添加了以下代码：

项目 - 低袜（粉红色）
序列号 - 34-75-860
价格 - 5.89
数量 - 12

除了它们在列中而不是像上面那样的行中

```
Dim items As New ListViewItem
    items = ListView1.Items.Add("Low Socks(Pink)")
    items.SubItems.Add("34-75-860")
    items.SubItems.Add("$5.89")
    items.SubItems.Add("12")

    items = ListView1.Items.Add("Low Socks(Black)")
    items.SubItems.Add("34-75-900")
    items.SubItems.Add("$5.89")
    items.SubItems.Add("25")

    items = ListView1.Items.Add("Low Socks(Red)")
    items.SubItems.Add("34-75-756")
    items.SubItems.Add("$5.89")
    items.SubItems.Add("10")

    items = ListView1.Items.Add("Low Socks(Orange)")
    items.SubItems.Add("34-75-234")
    items.SubItems.Add("$5.89")
    items.SubItems.Add("34")

    items = ListView1.Items.Add("Low Socks(Blue)")
    items.SubItems.Add("34-75-598")
    items.SubItems.Add("$5.89")
    items.SubItems.Add("23")
End Sub 
```

在我的发票页面下，发票上的项目旁边有复选框。单击复选框时，我希望金额减少一。我稍后会进去，将其更改为实际需要的数量，具体取决于他们订购的商品数量......我的复选框编码是这样的：

```
Dim item As ListViewItem
    Dim i As Integer
    Dim count As Integer

    'count the number of items in itemdetails2 listview
    count = ItemDetails2.ListView1.Items.Count - 1

    'loop to read each item in the list
    For i = 1 To count

        If i > count Then Exit For

        item = ItemDetails2.ListView1.Items(i)

        'compare the item to the serial number
        If item.Checked = True Then

            If (item.SubItems(0).Text = "34-75-860") Then
                item.SubItems(2).Text -= 1
            End If

            i = i + 1
            count = count - 1
        End If

    Next

    ItemDetails2.Show()
End Sub 
```

现在看起来它什么也没做。我尝试将我的子项上的索引更改为 1 和 3 而不是 0 和 2，但我认为因为它们是子项，所以它们需要是子项索引 0 和子项索引 2，因为该项有一项和三个子项。如果这有意义....请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:31:13.307

在不深入研究索引内容的情况下，我可以注意到您将**字符串视为数字**

```
item.SubItems(2).Text -= 1 
```

当你应该尝试：

```
item.SubItems(2).Text -= CStr(CDec(item.SubItems(2).Text) - 1D) 
```

我希望这会有所帮助...

# c# - 从单行用户输入中读取多个变量/命令

> ID：10214774
> 
> 赞同：1
> 
> 时间：2012-04-18T17:34:05.763
> 
> 标签：c#, .net, console, user-input

**问题：如何从单行用户输入中读取多个命令/变量/修饰符？**

就像命令提示符之类的任何 CLI 所做的一样，用户输入一行并从中读取和分配变量 + 修饰符。

EG 转换程序指令：

```
32 km to cm 
```

然后是这样写的：

```
numToConvert = (32) 
```

然后

```
"km to cm" 
```

点转换率1

```
 conversionRate1 = (0.621371192) 
```

将 32 乘以转化率 (0.621371192)

打印结果。

第二个例子：

```
shutdown -h 
```

或者

```
shutdown /? 
```

shutdown 被读取为命令

-h 修改它或 /? 修改它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:48:24.827

命令行上给出的任何东西，在程序名称之后，都被空格分割，并传递给 args 数组。

所以，给定：

```
class Program
{
    static void Main(string[] args)
    {
        foreach (var a in args)
        {
            Console.WriteLine(a);
        }
    }
} 
```

运行“c:>program.exe convert foo to bar”将产生这些行

```
convert
foo
to
bar 
```

为了解析出语义，您需要扫描 args 数组并查找修饰符。

如果你有严格的语法，你可以简单地查看预期的位置

```
var numToConvert = Convert.toint32(args[4]) 
```

如果您允许灵活的语法，它将更加复杂；您将需要开发一系列解析规则来帮助您理解输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:53:44.290

此外，您可能希望查看一个旨在帮助解析和管理命令行参数的库。[命令行解析器库](http://commandline.codeplex.com/)是一个不错的选择。

# delphi - 使用 TRichEdit 的 TEdit 上下文菜单

> ID：10214776
> 
> 赞同：7
> 
> 时间：2012-04-18T17:34:13.283
> 
> 标签：delphi, delphi-7

是否有一种简单/聪明的方法可以将标准 Windows TEdit 菜单加载到这个 TRichEdit 中？

我知道我可以创建一个简单的菜单来模拟复制/粘贴等简单操作的 TEdit 菜单（[示例](http://www.delphifeeds.com/go/s/75488)），但是我也想保留更高级的菜单选项，例如 unicode 选项、阅读顺序和使用相同的本地化字符串。

编辑：我找到了一个[可能的线索](http://www.codeproject.com/Messages/1299076/another-implementation.aspx)（试图弄清楚，因为我不是 MFC 专家）......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-19T10:53:02.003

基于“可能的线索”和一点 MSDN，我想出了一个可能的解决方案。我仍然无法解决阅读顺序问题（和 unicode 选项）。似乎 RichEdit 的工作方式与 Edit 的工作方式不同，并且简单地设置或获取 WS_EX_RTLREADING 标志并不像预期的那样工作。无论如何，这里是代码：

```
procedure RichEditPopupMenu(re: TRichEdit);
const
  IDM_UNDO   = WM_UNDO;
  IDM_CUT    = WM_CUT;
  IDM_COPY   = WM_COPY;
  IDM_PASTE  = WM_PASTE;
  IDM_DELETE = WM_CLEAR;
  IDM_SELALL = EM_SETSEL;
  IDM_RTL    = $8000; // WM_APP ?

  Enables: array[Boolean] of DWORD = (MF_DISABLED or MF_GRAYED, MF_ENABLED);
  Checks: array[Boolean] of DWORD = (MF_UNCHECKED, MF_CHECKED);
var
  hUser32: HMODULE;
  hmnu, hmenuTrackPopup: HMENU;
  Cmd: DWORD;
  Flags: Cardinal;
  HasSelText: Boolean;
  FormHandle: HWND;
  // IsRTL: Boolean;
begin
  hUser32 := LoadLibraryEx(user32, 0, LOAD_LIBRARY_AS_DATAFILE);
  if (hUser32 <> 0) then
  try
    hmnu := LoadMenu(hUser32, MAKEINTRESOURCE(1));
    if (hmnu <> 0) then
    try
      hmenuTrackPopup := GetSubMenu(hmnu, 0);

      HasSelText := Length(re.SelText) <> 0;
      EnableMenuItem(hmnu, IDM_UNDO,   Enables[re.CanUndo]);
      EnableMenuItem(hmnu, IDM_CUT,    Enables[HasSelText]);
      EnableMenuItem(hmnu, IDM_COPY,   Enables[HasSelText]);
      EnableMenuItem(hmnu, IDM_PASTE,  Enables[Clipboard.HasFormat(CF_TEXT)]);
      EnableMenuItem(hmnu, IDM_DELETE, Enables[HasSelText]);
      EnableMenuItem(hmnu, IDM_SELALL, Enables[Length(re.Text) <> 0]);

      // IsRTL := GetWindowLong(re.Handle, GWL_EXSTYLE) and WS_EX_RTLREADING <> 0;
      // EnableMenuItem(hmnu, IDM_RTL, Enables[True]);
      // CheckMenuItem(hmnu, IDM_RTL, Checks[IsRTL]);

      FormHandle := GetParentForm(re).Handle;
      Flags := TPM_LEFTALIGN or TPM_RIGHTBUTTON or TPM_NONOTIFY or TPM_RETURNCMD;
      Cmd := DWORD(TrackPopupMenu(hmenuTrackPopup, Flags,
        Mouse.CursorPos.X, Mouse.CursorPos.Y, 0, FormHandle, nil));
      if Cmd <> 0 then
      begin
        case Cmd of
          IDM_UNDO:   re.Undo;
          IDM_CUT:    re.CutToClipboard;
          IDM_COPY:   re.CopyToClipboard;
          IDM_PASTE:  re.PasteFromClipboard;
          IDM_DELETE: re.ClearSelection;
          IDM_SELALL: re.SelectAll;
          IDM_RTL:; // ?
        end;
      end;
    finally
      DestroyMenu(hmnu);
    end;
  finally
    FreeLibrary(hUser32);
  end;
end;

procedure TForm1.RichEditEx1ContextPopup(Sender: TObject; MousePos: TPoint; var Handled: Boolean);
begin
  RichEditPopupMenu(TRichEdit(Sender));
  Handled := True;
end; 
```

任何反馈都会很好:)

# javascript - 销毁 jQuery 可排序/可删除

> ID：10214782
> 
> 赞同：1
> 
> 时间：2012-04-18T17:34:30.333
> 
> 标签：javascript, jquery, css, jquery-plugins, jquery-ui-sortable

所以我有一个问题，我希望能够在用户按下按钮时切换可排序插件的行为。IE，有排序模式和查看模式。我试图做这样的事情：

```
function enterEdit(){
    $('#someDiv').sortable();
} 

function enterView() {
    $('#someDiv').sortable('destroy');
}

$('#editToggle').on('click', '.toggle-button', function(e){
        var $target = $(e.target);
        if(!$target.hasClass('active')) {
            if($target[0].id == 'edit'){
                enterEdit();                    
            } else {
                enterView();
            }
            $('#editToggle').children().removeClass('active');
            $target.addClass('active');
        }
    }); 
```

这就是正在发生的事情。当我第一次初始化它时它起作用，然后破坏也起作用。问题是，当我再次单击编辑时，可排序不会重新初始化。有没有人曾经尝试过这个，或者有更好的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:42:50.380

如果你给每个应该排序的元素一个特定的类，然后用`$('#someDiv').sortable({items: li.yourClass});`

然后您可以在单击时添加和删除此类，元素将被排除或再次包含。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:51:24.053

你有正确的想法，但我有点困惑，为什么要对“活动”和“id”进行双重检查。您还应该使用 $(this) 而不是所有 e.target 的东西。

不管怎样，看看[这个小提琴](http://jsfiddle.net/UahYt/)。它清理了你正在做的事情的代码，我认为它可以做你想做的事。

# php - CodeIgniter 2.1 + Sparks + hmvc（最新）无法加载库/火花

> ID：10214785
> 
> 赞同：0
> 
> 时间：2012-04-18T17:34:38.890
> 
> 标签：php, codeigniter, hmvc

每当我尝试加载火花时，我都无法加载库，就好像 HMVC 已经破坏了火花的加载。

### 一个例子：

```
<?php 
if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Index extends MX_Controller {
    function __construct(){
        parent::__construct();
        $this->load->spark('template/1.9.0');
        $this->load->library('template');       
    }
    public function index(){
        $this->template
             ->title('TSET123')
             ->build('index/index');
    }
} 
```

**原因：** `Unable to load the requested class: template`

我已尝试通过 @getsparks.org 遵循这些说明：http: [//getsparks.org/set-up-mx](http://getsparks.org/set-up-mx)

但它仍然无法正常工作，有什么想法吗？

### 使用：

*   HMVC 最新
*   CI 2.1.x（尝试 1.0 和 1.1）
*   最新火花

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T15:11:35.213

我已经设法使（资产和模板）火花库与 HMVC 一起使用，但请确保其他火花库无法正常工作（因为我也尝试了 ion_auth 但它没有工作）。

1.  首先你必须有一个全新的 HMVC 安装然后你
2.  必须安装 sparks 但不要覆盖 MX 加载程序或 MX 模块文件
3.  `MY_Loader`从 sparks获取文件扩展它`MX_Loader`不是从`CI_Loader`这样的：

`require APPPATH."third_party/MX/Loader.php";`

```
class MY_Loader extends MX_Loader {
/*the MY_Loader code from getsparks.org*/} 
```

你可能会喜欢这个简单的代码[http://s.zah.me/IE0BQ4](http://s.zah.me/IE0BQ4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:43:21.927

[遵循http://getsparks.org/set-up-mx](http://getsparks.org/set-up-mx)中描述的所有步骤后

转到 application/third_party/MX/Modules.php 并更改：-

```
define('SPARKPATH', APPPATH.'sparks/'); 
```

至

```
define('SPARKPATH', FCPATH.'sparks/'); 
```

或者

您可以将 sparks 文件夹放在应用程序目录中

有了这个改变，ion_auth 和 oauth2 sparks 应该也能正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:10:05.400

从示例代码

```
$this->load->spark('example-spark/1.0.0'); 
$this->example_spark->method(); 
```

我没有看到任何这样的样本......

```
$this->load->library('something load via spark'); 
```

在你的情况下应该是......

```
$this->template->some_method(); 
```

# silverlight - 按下开始按钮时是否会调用 PhoneApplicationPage_Unloaded 事件？

> ID：10214789
> 
> 赞同：0
> 
> 时间：2012-04-18T17:34:47.167
> 
> 标签：silverlight, windows-phone-7, xaml

我在 xaml 页面上的 PhoneApplicationUnloaded 事件中做了一些清理工作。如果我在事件中放置一个断点，我可以看到如果我使用后退按钮来卸载页面，或者如果我在任何地方向前导航，它就会被命中，但是如果我使用开始按钮返回主屏幕，我不会'没有看到断点被击中。

当你点击开始按钮时，这个事件真的会被调用吗？（也许由于某种原因，模拟器在发生这种情况时会停止调试，而我没有看到它被击中）或者没有。如果它不应该代替什么事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:43:06.387

MSDN 上有一篇很好的[文章](http://msdn.microsoft.com/en-us/library/ff817008%28v=vs.92%29.aspx)，解释了按下开始按钮时会发生什么以及应该绑定到哪个事件。每当应用程序被中断（例如通过电话或开始按钮），它就会被删除，并引发相关的 Application_Deactivated 事件。每当焦点回到您的应用程序时，您都会收到 Application_Activated 事件（您应该在其中恢复以前的状态）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:40:10.220

点击开始按钮不会卸载应用程序，其他场景会卸载应用程序。将 Unload 事件中的代码放入 Unload 事件和按钮单击事件都可以调用的公共类中。

# java - 在Android中通过TCP套接字连接时获取“java.net.BindException：地址已在使用中”

> ID：10214790
> 
> 赞同：0
> 
> 时间：2012-04-18T17:34:50.680
> 
> 标签：java, android, sockets, tcp

我正在为它创建一个带有 Android 客户端的桌面应用程序。目的是将图像从 Android 设备发送到桌面，然后，用户在桌面上执行轻拂手势后，将相同的图像发送回手机。

从 android 发送到桌面效果很好，但是当方法循环侦听端口（尝试接收图片）时，我在 LogCat 中收到很多“java.net.BindException：地址已在使用中”。这个异常一直在循环，但应用程序并没有崩溃。

这是负责从桌面发送数据的代码段：

```
public void sendImage(byte[] buffer)
{
    try {
        Socket s = new Socket("192.168.1.34",8080);

        DataOutputStream dataOutputStream = null;
        DataInputStream dataInputStream = null;

        dataOutputStream = new DataOutputStream(s.getOutputStream());
        dataInputStream = new DataInputStream(s.getInputStream());

        dataOutputStream.writeInt(buffer.length);
        dataOutputStream.write(buffer,0, buffer.length);

        s.close();

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

下面是我的 Android 应用程序的代码。当应用程序启动时，我在单独的线程上运行“ImageReceiver.class”。“ImageReceiver”是 Observable 对象，因此当它改变状态时，我可以启动新活动并显示图像。

```
public class FluidPhotoClientActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Gallery gallery = (Gallery) findViewById(R.id.gallery);
    gallery.setAdapter(new ImageAdapter(this));

    gallery.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, int position, long id) {

            Toast.makeText(FluidPhotoClientActivity.this, "Sending photo nr: " + position, Toast.LENGTH_SHORT).show();

            try {
                Socket s = new Socket("192.168.1.35",8888);

                DataOutputStream dataOutputStream = null;
                DataInputStream dataInputStream = null;

                dataOutputStream = new DataOutputStream(s.getOutputStream());
                dataInputStream = new DataInputStream(s.getInputStream());

                Resources res = getResources();
                Drawable draw = null;

                switch(position) // HARDCODED IMAGE POSITION
                {
                case 0:
                    draw = res.getDrawable(R.drawable.testimage);
                    break;
                case 1:
                    draw = res.getDrawable(R.drawable.testimage2);
                    break;
                }

                if(draw!=null)
                {
                    Bitmap bitmap = (Bitmap)((BitmapDrawable) draw).getBitmap();
                    ByteArrayOutputStream stream = new ByteArrayOutputStream();
                    bitmap.compress(Bitmap.CompressFormat.JPEG, 100, stream);

                    byte[] buffer = stream.toByteArray();

                    dataOutputStream.writeInt(buffer.length);
                    dataOutputStream.write(buffer,0, buffer.length);

                    s.close();

                    dataInputStream.close();
                    dataOutputStream.close();
                } else {
                    Toast.makeText(FluidPhotoClientActivity.this, "Error", Toast.LENGTH_SHORT).show();
                }
            } catch (IOException e) {
                Toast.makeText(FluidPhotoClientActivity.this, "IOException", Toast.LENGTH_SHORT).show();
                e.printStackTrace();
            }
        }
    });

    ImageReceiver ir = new ImageReceiver();
    Thread imageListener = new Thread(ir);
    imageListener.start();

    class ImageObserver implements Observer {
        @Override
        public void update(Observable arg0, Object arg1) {
            Log.d("MESSAGE:" , "hello");
            showIncomingImage();
        }
    }
    ImageObserver io =  new ImageObserver();
    ir.addObserver(io);
}
public void showIncomingImage() {
    startActivity(new Intent(this, SingleViewActivity.class));
} 
```

}

ImageReceiver.class - 我想这是错误的来源。

```
public class ImageReceiver extends Observable implements Runnable {

private String responseImage;

public String getResponseImage() {
    return responseImage;
}

@Override
public void run() {
    while(1==1)
    {
        try {
            ServerSocket ss = new ServerSocket(8080);
            Socket s = ss.accept();

            DataInputStream dataInputStream = new DataInputStream(s.getInputStream());
            DataOutputStream dataOutputStream = new DataOutputStream(s.getOutputStream());

            int imageSize = dataInputStream.readInt();
            byte[] buffer = new byte[imageSize];
            dataInputStream.readFully(buffer, 0, imageSize);

            Log.d("MESSAGE:", String.valueOf(buffer.length));

            ss.close();
            s.close();
            if(buffer.length > 0)
            {
                this.responseImage = String.valueOf(buffer.length);
                setChanged();
                notifyObservers();
            }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

}

正如您在上面看到的，我正在使用不同的端口发送和接收数据，所以根据我的逻辑“地址不应该已经在使用中”——如果我理解正确的话。我正在尝试不同的端口，但这没有帮助。我将非常感谢所有提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T22:06:54.167

在循环外创建一次 ServerSocket。

# c - 数字周围的括号的含义

> ID：10214794
> 
> 赞同：2
> 
> 时间：2012-04-18T17:35:09.707
> 
> 标签：c

这是来自库的一段 C 代码：

```
typedef enum
{
/** 
  * @brief  SDIO specific error defines  
  */   
  SD_CMD_CRC_FAIL                    = (1), /*!< Command response received (but CRC check failed) */
  SD_DATA_CRC_FAIL                   = (2), /*!< Data bock sent/received (CRC check Failed) */
  SD_CMD_RSP_TIMEOUT                 = (3), /*!< Command response timeout */
  SD_DATA_TIMEOUT                    = (4), /*!< Data time out */ 
```

我不明白 , , 和 周围的`1`括号`2`的`3`含义`4`。是`SD_CMD_CRC_FAIL = 1`和`SD_CMD_CRC_FAIL = (1)`等价的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:37:06.087

是的，它们是等价的。

我不知道作者为什么选择这样写（尽管有关某些理论，请参阅对此答案的评论）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T17:39:26.120

单个值周围的括号是可选的，并且没有附加任何隐藏的魔法。`(1)`只会评估`1`它是否不是某些函数调用的一部分（即定界参数）。

就像在数学中一样，您可以在不改变表达式的含义的情况下添加多个级别的括号，例如`x = ((5) + (3))`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:59:40.820

在这种特殊情况下，括号没有任何区别，但最好**始终**用一对括号括住宏表达式。代码的作者可能将宏定义转换为`enum`, 并且括号仍然是旧代码的遗留物。

* * *

顺便说一句，这就是这个规则的原因。考虑以下代码：

```
#define FOUR 2 + 2
...
int x = 2 * FOUR; 
```

如您所料，最后一行将由预处理器转换`int x = 2 * 2 + 2;`为 6 而不是 8。`FOUR`如果用周围的括号定义，则不会发生这种情况：

```
#define FOUR (2 + 2) 
```

# javascript - Selenium：多浏览器并行测试

> ID：10214799
> 
> 赞同：2
> 
> 时间：2012-04-18T17:35:44.333
> 
> 标签：javascript, firefox, google-chrome, selenium, chat

我正在尝试测试一个聊天应用程序，但我一直面临一个特定问题。思路如下：

1.  我的第一个用户打开聊天并发送邀请
2.  第二个收到打开聊天面板的邀请
3.  一旦双方都在线，他们就可以开始聊天。

我已经在 selenium IDE 上开发了测试脚本，并且设置了 Selenium RC 和 Selenium HUB 并为这两个测试运行。另外，我在 Eclipse 上运行了测试，检查一切是否顺利（使用 Javascript）。

问题是我的第一个测试需要在特定时刻等待第二个测试开始，我不知道该怎么做。我使用 waitForElementPresent 等待聊天室中其他用户的响应，但第二个测试用例永远不会开始，因为它正在等待第一个完成。

我不知道我是否说清楚了，但我真的需要帮助……我已经阅读了很多主题，但没有什么能帮助我。

我注意到，如果我停止一个测试用例，我将失去开始第二个测试用例的会话，我希望它保持打开以模拟聊天。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:10:10.590

```
JUnitCore.runClasses(ParallelComputer.methods(), YourClassWithTests.class); 
```

试试这个，它应该同时运行两个测试。同时运行测试不会变得更容易。

或者只是将这两个测试混合在一起：

```
Selenium sele1 = new DefaultSelenium(something);
Selenium sele2 = new DefaultSelenium(something);
sele1.open("http://google.com");
sele2.open("http://seleniumhq.org"); 
```

这应该在一次测试中打开两个浏览器，您应该能够毫无问题地控制它们。

# ruby-on-rails - Rails 3.0.12 翻译文件不会解析为“无法在第 1 行第 0 列解析 YAML”

> ID：10214801
> 
> 赞同：1
> 
> 时间：2012-04-18T17:35:57.203
> 
> 标签：ruby-on-rails, internationalization, yaml, language-translation

我相信我有一个有效的 yml 翻译文件，由于特殊字符而无法解析。例如“switchfrench: 'Français'”加载失败并出现错误，无法在第 1 行第 0 列解析 YAML。yml 文件“switchfrench: 'Francais'”正确加载。

[https://gist.github.com/2415270](https://gist.github.com/2415270)

关于如何解析它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:44:41.730

好的，所以这有效：

```
1.9.3p125 :008 > YAML.load("switchfrench: Français\n")
 => {"switchfrench"=>"Français"} 
```

如果您尝试从控制台将其写入磁盘会怎样，如下所示：

```
File.open('config/locales/app.fr.yml', 'w') {|f| f << "switchfrench: Français\n" } 
```

# php - default.ctp 从控制器 cakephp 获取信息

> ID：10214802
> 
> 赞同：0
> 
> 时间：2012-04-18T17:36:06.803
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

我目前正在尝试使用 cakephp 在 php 中创建自己的小型 CMS。这样应该很容易修改网站。首先，我不是网络程序员，这只是为了业余时间。

我有一个控制器按钮，一个按钮可以有多个类别。所以我试图将它加载到 default.ctp 中，以便为每个页面加载这个菜单。

default.ctp 代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>
        <?php __('eg'); ?>
        <?php echo $title_for_layout; ?>
    </title>
    <?php
    echo $this->Html->css('cake.generic.style');
    echo $scripts_for_layout;
    ?>
</head>
<body>
    <div class="wrapper">
        <div class="header">
            <h1>Electro Geers Bvba</h1>
        </div>
        <div id="navMenu">
            <?php
            foreach ($buttons as $button) {
                echo '<ul>';
                echo '<li><a href="' . h($button['Button']['naam']) . '.html">' . h($button['Button']['naam']) . '</a>';
                if (!empty($button['Category'])) {
                    echo'<ul>';
                    foreach ($button['Category'] as $category) {
                        echo '<li><a href="' . $category['naam'] . '.html">' . $category['naam'] . '</a></li>';
                    }
                    echo'</ul>';
                }
                echo '</li>';
                echo '</ul>';
            }
            ?>
            <br class="clearFloat" />
        </div>
        <div class="contents">
            <h3>Sectionale poorten en Hekwerken</h3>
            <?php echo $content_for_layout; ?>

        </div>
        <div class="footer">
           Copyright © 2012 - 2017
        </div>
    </div>
</body> 
```

我知道 cakephp 通常不应该像这样使用，但我想知道这是否可能？如何将按钮名称加载到 default.ctp？

我目前收到此错误：

```
Notice (8): Undefined variable: buttons [APP\View\Layouts\default.ctp, line 20] 
```

警告 (2)：为 foreach() 提供的参数无效 [APP\View\Layouts\default.ctp，第 20 行]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T19:55:20.533

在您的 AppController 中：

```
$this->loadModel('Button');
$buttons = $this->Button->find('all');
$this->set(compact('buttons')); 
```

这将导致每个页面都查询`buttons`表并将结果传递给视图，然后可以通过您的`$buttons`变量访问该视图。

如果您要通过数据库处理菜单，我强烈建议您考虑以一种或另一种形式进行缓存 - 可能不是在每个页面上强制进行这样的数据库调用的最佳主意。

有很多选项，但我见过并喜欢的一个是将菜单保留在 XML 文件中 - 然后，每当您`buttons`更新/编辑/添加/删除...等时，更新 XML 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T23:47:17.463

您也可以将 div id="navMenu" 放入一个元素中，然后使用 requestAction。请参阅其中一位 Cake 开发人员的此链接。

[http://mark-story.com/posts/view/how-using-requestaction-increased-performance-on-my-site](http://mark-story.com/posts/view/how-using-requestaction-increased-performance-on-my-site)

# php - php合并数组忽略空值

> ID：10214806
> 
> 赞同：0
> 
> 时间：2012-04-18T17:36:21.657
> 
> 标签：php, arrays

我被困住了。我有 2 个要组合的数组，忽略空值并返回一个字符串。如：

```
$Array1 ( [0] => [1] => Monday [2] => Wednesday [3] => Friday [4] => Sunday ) 
$Array2 ( [0] => [1] => 8am [2] => [3] => 10am [4] => [5] => 2pm [6] => [7] => 4pm ) 
```

返回：

> 周一上午 8 点，周三上午 10 点，周五下午 2 点，周日下午 4 点

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:49:06.487

尚不完全清楚您希望输出的格式，但`array_filter()`第一步是使用：

```
$a1 = array( null, 'Monday', 'Wednesday', 'Friday', 'Sunday' );
$a2 = array( null, '8am', null, '10am', null, '2pm', null, '4pm' );

$a1 = array_filter($a1);
$a2 = array_filter($a2); 
```

这将删除空整。然后，您可以使用它`foreach`来构建您的输出。对于数组数组：

```
$out = array();
foreach ($a1 as $e) $out[] = array($e, array_shift($a2)); 
```

对于字符串数组：

```
$out = array();
foreach ($a1 as $e) $out[] = $e.' '.array_shift($a2); 
```

演示显示两种输出类型：[http ://codepad.org/ITZJH4RL](http://codepad.org/ITZJH4RL)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:42:54.373

```
$periods = array();
foreach (array_combine(array_filter($Array1), array_filter($Array2)) as $day => $hour) {
  $periods[] = $day . ' ' . $hour;
}
echo implode(', ', $periods); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:50:19.077

一种肮脏的方式来做到这一点，但是..

```
//Your arrays:
$Array1 = array( null , Monday, Wednesday, Friday, Sunday) 
$Array2 = array(null, 8am, null, 10am,null, 2pm, null, 4pm)
$Array3 =();
foreach($Array2 as $key=>$val):
    if($val != ''):
        array_push($Array3, $val);
    endif;
endforeach;

// This assumes you have the same number of values in each array
foreach( $Array1 as $key=>$val):
   $Array1[$key] = $Array1[$key] . " " . $Array3[$key];
endforeach;

var_dump($Array1); 
```

试一试，如果您有任何错误，请告诉我。

编辑：将示例数组转换为实际数组，而不仅仅是从示例中列出它们。

# email - Drupal 和电子邮件通知

> ID：10214810
> 
> 赞同：0
> 
> 时间：2012-04-18T17:36:32.437
> 
> 标签：email, drupal

我在 Drupal 6.x 中遇到了一个奇怪的问题

当用户注册新帐户时，不会发送电子邮件通知，并且通过检查 sendmail 日志文件，不会尝试发送电子邮件。

当用户被删除或发布文章时，将成功发送电子邮件。

我找不到为什么会这样。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T19:28:54.720

默认情况下，用户登录时不会发送电子邮件。

您是否对此有规则或应该这样做的自定义模块？

# java - Java Scanner 按空行拆分记录

> ID：10214817
> 
> 赞同：0
> 
> 时间：2012-04-18T17:36:56.143
> 
> 标签：java, regex, java.util.scanner

我的记录格式如下：

记录 1 行
记录 1 行
记录 1 行

记录 2 行
记录 2 行
记录 2 行

...

我想使用 java Scanner 来拉出每条记录的行。但是，我的模式似乎无法正常工作。

```
new Scanner(reader).useDelimiter(Pattern.compile("^\\s*$")); 
```

我取回我的输入，而不是scanner.next() 给我每条记录的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-19T14:36:57.373

我想出的解决方案是这样的：
`new Scanner(reader).useDelimiter(Pattern.compile("^\\s*$", Pattern.MULTILINE));`

这会将记录行作为一个组返回：
`scanner.next()`
yield: 再次执行 yield: 如果您只需要单独的行，请使用 @bart 的解决方案。
`record 1 line 1
record 1 line 2
record 1 line 3`
`scanner.next()`

`record 2 line 1
record 2 line 2
record 2 line 3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:41:00.800

我想要多行我会尝试

```
"\\n\\n+" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:41:50.320

这有点猜测，但你真的需要在这里使用正则表达式吗？我认为您只需将分隔符设置为新行字符即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T18:02:48.003

我会这样做。

```
StringBuilder sb = new StringBuilder();
ArrayList<String> records = new ArrayList<String>();
while(scanner.hasNextLine()){
    String line = scanner.nextLine();
    if("".equals(line.trim())){
        records.add(sb.toString());
        sb = new StringBuilder();
    }else{
        sb.append(line);
        sb.append("\n");
    }
}
System.out.println(records); 
```

我没有对此进行测试，因此可能会有一些愚蠢的错误。

# python - 使用 pip 查找安装了哪个版本的包

> ID：10214827
> 
> 赞同：946
> 
> 时间：2012-04-18T17:37:20.470
> 
> 标签：python, pip

使用 pip，是否可以确定当前安装了哪个版本的软件包？

我知道，`pip install XYZ --upgrade`但我想知道是否有类似的东西`pip info XYZ`。如果不是什么是告诉我当前使用的版本的最佳方法。

* * *

## 回答 #1

> 赞同：1358
> 
> 时间：2012-04-18T17:53:51.653

从[pip 1.3](https://github.com/pypa/pip/blob/1.3/CHANGES.txt#L54)开始，有一个`pip show`命令。

```
$ pip show Jinja2
---
Name: Jinja2
Version: 2.7.3
Location: /path/to/virtualenv/lib/python2.7/site-packages
Requires: markupsafe 
```

在旧版本中，`pip freeze`应该`grep`可以很好地完成这项工作。

```
$ pip freeze | grep Jinja2
Jinja2==2.7.3 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2012-04-24T14:28:43.053

我刚刚在 pip 中发送了一个拉取请求，增强了 Hugo Tavares 说：

（以光谱为例）

```
$ pip show specloud

Package: specloud
Version: 0.4.4
Requires:
nose
figleaf
pinocchio 
```

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2014-01-23T10:36:22.710

Pip 1.3 现在还有一个[list](https://pip.pypa.io/en/latest/reference/pip_list.html)命令：

```
$ pip list
argparse (1.2.1)
pip (1.5.1)
setuptools (2.1)
wsgiref (0.1.2) 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2014-04-30T11:00:48.963

并使用 --outdated 作为额外参数，您将获得您正在使用的软件包的当前和最新版本：

```
$ pip list --outdated
distribute (Current: 0.6.34 Latest: 0.7.3)
django-bootstrap3 (Current: 1.1.0 Latest: 4.3.0)
Django (Current: 1.5.4 Latest: 1.6.4)
Jinja2 (Current: 2.6 Latest: 2.8) 
```

所以结合 AdamKG 的回答：

```
$ pip list --outdated | grep Jinja2
Jinja2 (Current: 2.6 Latest: 2.8) 
```

也检查**pip-tools**：[https ://github.com/nvie/pip-tools](https://github.com/nvie/pip-tools)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-04-18T18:30:37.467

您也可以安装`yolk`然后运行`yolk -l`，这也提供了一些不错的输出。这是我为我的小 virtualenv 得到的：

```
(venv)CWD> /space/vhosts/pyramid.xcode.com/venv/build/unittest 
project@pyramid 43> yolk -l
Chameleon       - 2.8.2        - active 
Jinja2          - 2.6          - active 
Mako            - 0.7.0        - active 
MarkupSafe      - 0.15         - active 
PasteDeploy     - 1.5.0        - active 
Pygments        - 1.5          - active 
Python          - 2.7.3        - active development (/usr/lib/python2.7/lib-dynload)
SQLAlchemy      - 0.7.6        - active 
WebOb           - 1.2b3        - active 
account         - 0.0          - active development (/space/vhosts/pyramid.xcode.com/project/account)
distribute      - 0.6.19       - active 
egenix-mx-base  - 3.2.3        - active 
ipython         - 0.12         - active 
logilab-astng   - 0.23.1       - active 
logilab-common  - 0.57.1       - active 
nose            - 1.1.2        - active 
pbkdf2          - 1.3          - active 
pip             - 1.0.2        - active 
pyScss          - 1.1.3        - active 
pycrypto        - 2.5          - active 
pylint          - 0.25.1       - active 
pyramid-debugtoolbar - 1.0.1        - active 
pyramid-tm      - 0.4          - active 
pyramid         - 1.3          - active 
repoze.lru      - 0.5          - active 
simplejson      - 2.5.0        - active 
transaction     - 1.2.0        - active 
translationstring - 1.1          - active 
venusian        - 1.0a3        - active 
waitress        - 0.8.1        - active 
wsgiref         - 0.1.2        - active development (/usr/lib/python2.7)
yolk            - 0.4.3        - active 
zope.deprecation - 3.5.1        - active 
zope.interface  - 3.8.0        - active 
zope.sqlalchemy - 0.7          - active 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-01-06T18:52:46.403

您可以使用 grep 命令来查找。

```
pip show <package_name>|grep Version 
```

例子：

```
pip show urllib3|grep Version 
```

将仅显示版本。

> 元数据版本：2.0
> 版本：1.12

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2019-12-30T15:21:32.470

python 函数仅返回机器可读格式的包版本：

```
from importlib.metadata import version 
version('numpy') 
```

在 python 3.8 之前：

```
pip install importlib-metadata 
from importlib_metadata import version
version('numpy') 
```

bash 等价物（这里也从 python 调用）会更复杂（但更健壮 - 请参阅下面的注意事项）：

```
import subprocess
def get_installed_ver(pkg_name):
    bash_str="pip freeze | grep -w %s= | awk -F '==' {'print $2'} | tr -d '\n'" %(pkg_name)
    return(subprocess.check_output(bash_str, shell=True).decode()) 
```

示例用法：

```
# pkg_name="xgboost"
# pkg_name="Flask"
# pkg_name="Flask-Caching"
pkg_name="scikit-learn"

print(get_installed_ver(pkg_name))
>>> 0.22 
```

请注意，在这两种情况下，`pkg_name`参数都应包含格式为返回的包名称，`pip freeze`而不是在期间使用的格式`import`，例如`scikit-learn`not`sklearn`或`Flask-Caching`, not `flask_caching`。

请注意，虽然`pip freeze`在 bash 版本中调用可能看起来效率低下，但只有这种方法被证明对于包命名特性和不一致（例如下划线与破折号、小写与大写以及诸如`sklearn`vs之类的缩写`scikit-learn`）足够健壮。

注意：在复杂的环境中，两种变体都可能返回令人惊讶的版本号，这与您在`import`.

*当用户* 子文件夹中隐藏有其他版本的包时，就会出现这样一个问题`site-packages`。为了说明使用`version()`这里的危险，我遇到了一种情况：

```
$ pip freeze | grep lightgbm
lightgbm==2.3.1

and

$ python -c "import lightgbm; print(lightgbm.__version__)"
2.3.1

vs.

$ python -c "from importlib_metadata import version; print(version(\"lightgbm\"))"
2.2.3

until you delete the subfolder with the old version (here 2.2.3) from the user folder (only one would normally be preserved by `pip` - the one installed as last with the `--user` switch):

$ ls /home/jovyan/.local/lib/python3.7/site-packages/lightgbm*
/home/jovyan/.local/lib/python3.7/site-packages/lightgbm-2.2.3.dist-info
/home/jovyan/.local/lib/python3.7/site-packages/lightgbm-2.3.1.dist-info 
```

另一个问题是在同一环境中安装了一些 conda 软件包。如果它们与您的 pip 安装的包共享依赖项，并且这些依赖项的版本不同，您可能会降级您的 pip 安装的依赖项。

举例来说，2020 年 4 月 1 日 PyPI 中可用的最新版本`numpy`是 1.18.0，而同时 Anaconda 的`conda-forge`频道只有 1.17.3 版本`numpy`作为最新版本。因此，当您`basemap`使用 conda（作为第二个）安装软件包时，您之前安装的 pip`numpy`将被 conda 降级到 1.17.3，并且版本 1.18.0 将无法使用该`import`功能。在这种情况下`version()`是对的，和`pip freeze`/`conda list`错的：

```
$ python -c "from importlib_metadata import version; print(version(\"numpy\"))"
1.17.3

$ python -c "import numpy; print(numpy.__version__)"
1.17.3

$ pip freeze | grep numpy
numpy==1.18.0

$ conda list | grep numpy
numpy                     1.18.0                   pypi_0    pypi 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2019-02-19T03:11:33.967

[还有一个](https://pypi.org/project/pip-check/)名为的工具`pip-check`，可让您快速了解所有已安装的软件包及其更新状态：

[![在此处输入图像描述](../Images/99ce7fdd877a8bba950394c7c877772e.png)](https://i.stack.imgur.com/2I6uc.png)

自己没用过；只是偶然发现了它和这个 SO 问题，因为它没有被提及......

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2015-12-30T09:27:31.303

最简单的方法是这样的：

```
import jinja2
print jinja2.__version__ 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2018-02-24T05:52:35.060

在 Windows 上，您可以发出以下命令：

```
pip show setuptools | findstr "Version" 
```

输出：

```
Version: 34.1.1 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2020-01-06T06:41:31.913

pip show 在 python 3.7 中工作：

```
pip show selenium
Name: selenium
Version: 4.0.0a3
Summary: Python bindings for Selenium
Home-page: https://github.com/SeleniumHQ/selenium/
Author: UNKNOWN
Author-email: UNKNOWN
License: Apache 2.0
Location: c:\python3.7\lib\site-packages\selenium-4.0.0a3-py3.7.egg
Requires: urllib3
Required-by: 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-05-30T23:40:12.597

要使用 Python 代码执行此操作：

## 使用[`importlib.metadata.version`](https://docs.python.org/3/library/importlib.metadata.html#distribution-versions)

### 蟒蛇≥3.8

```
import importlib.metadata
importlib.metadata.version('beautifulsoup4')
'4.9.1' 
```

### 蟒蛇≤3.7

（使用[`importlib_metadata.version`](https://importlib-metadata.readthedocs.io/en/latest/using.html#distribution-versions)）

```
!pip install importlib-metadata

import importlib_metadata
importlib_metadata.version('beautifulsoup4')
'4.9.1' 
```

## 使用[`pkg_resources.Distribution`](https://setuptools.readthedocs.io/en/latest/pkg_resources.html#distribution-attributes)

```
import pkg_resources
pkg_resources.get_distribution('beautifulsoup4').version
'4.9.1'
pkg_resources.get_distribution('beautifulsoup4').parsed_version
<Version('4.9.1')> 
```

* * *

归功于*sinoroc*和*mirekphd*的评论。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2021-03-13T15:34:48.230

`pip list`也可以被告知将其输出格式化为`json`. 解析版本可能是一种更安全的方法。

```
pip list --no-index --format=json | \
  jq -r '.[] | select(.name=="Jinja2").version'
# 2.10.1 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-07-14T12:32:17.677

有问题，没有提到哪个操作系统用户正在使用（Windows/Linux/Mac）

因为有几个答案可以在 Mac 和 Linux 上完美运行。

如果用户试图在 Windows 上查找 python 包的版本，可以使用以下命令。

在 PowerShell 中使用以下命令：

`pip list | findstr <PackageName>`

例子：-`pip list | findstr requests`

输出 ：`requests 2.18.4`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-08-06T20:59:44.487

```
import pkg_resources
packages = [dist.project_name for dist in pkg_resources.working_set]
try:
   for count, item in enumerate(packages):
      print(item, pkg_resources.get_distribution(item).version)
except:
    pass here 
```

压痕可能并不完美。我使用 Try- except 块的原因是很少有库名称会因为解析库名称来处理版本而引发错误。即使 packages 变量将包含您环境中安装的所有库。

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-05-22T06:06:52.060

对于 Windows，您可以

1.  打开cmd，输入python，回车。

2.  输入导入并按回车。

3.  输入 ._version__ 并按回车键。

正如您在此处的屏幕截图中看到的那样，我正在使用这种方法来检查串行模块的版本。

![图片](../Images/c13cfca989cb0e97e70e7c779d95874e.png)

* * *

# javascript - javascript检查链接内的文本锚文本是否溢出

> ID：10214828
> 
> 赞同：1
> 
> 时间：2012-04-18T17:37:22.390
> 
> 标签：javascript, jquery

当我有这个 css/html 时，是否可以检查锚文本是否溢出？

```
<a href="#" style"overflow:hidden; width:100px; display:block;>
    This is a very long text. This is a very long text. This is a very long text.
</a> 
```

我使用 Jquery 或纯 javascript

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:45:59.873

您可以将文本内容分配给 tmp 元素，然后计算它的宽度并将其与`<a>`宽度进行比较以检查内容是否溢出。见下文，

[**演示**](http://jsfiddle.net/skram/SvNEa/2/)

```
$('a').on('click', function () {
    var $tmp = $('<a/>')
                .text($(this).text())
                .css('display','none')
                .appendTo('body');
    alert(($tmp.width() > $(this).width())?'Overflows':'Perfectly Inside');
    $tmp.remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:51:42.010

我建议：

```
var as = document.getElementsByTagName('a');

for (var i=0,len=as.length;i<len;i++){
    var that = as[i]
        w = that.offsetWidth,
        w2 = that.scrollWidth;
    if (w<w2) {
        console.log("This content overran!");
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ArdsZ/1/)。

* * *

与上面差不多，但下面也向 DOM 添加了一个 'reporting' 元素：

```
var as = document.getElementsByTagName('a');

for (var i=0,len=as.length;i<len;i++){
    var that = as[i],
        w = that.offsetWidth,
        w2 = that.scrollWidth,
        s = document.createElement('span');
    if (w<w2) {
        var text = document.createTextNode('This content overran the container, a, element by ' + (w2-w) + 'px.');
        s.appendChild(text);
        that.parentNode.insertBefore(s,that.nextSibling);
    }
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ArdsZ/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:11:45.890

试试这个

```
<div id="parent" style="overflow:hidden; width:100px;display:block">
 <a id="textblock" href="#" style="white-space: nowrap;" >
     This 
 </a>
</div>
<script>
  var p=document.getElementById("parent");
  var tb=document.getElementById("textblock");
  (p.offsetWidth<tb.offsetWidth)?alert('long'):alert('short');
</script>​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T18:23:30.550

**HTML**：

```
<a id="a1" href="#" style="overflow:hidden; width:100px; height:10px; display:block">
    This is a very long text. This is a very long text. This is a very long text.
</a>
<a id="a2" href="#" style="width:100px; height:10px; display:block">
    This is a very long text. This is a very long text. This is a very long text.
</a> 
```

**JS**：

```
function hasOverflow( $el ){
    return $el.css("overflow")==="hidden" &&  
          ($el.prop("clientWidth") < $el.prop("scrollWidth") || 
           $el.prop("clientHeight") < $el.prop("scrollHeight"));
}
console.log( hasOverflow($("#a1")) );       //true
console.log( hasOverflow($("#a2")) );       //false 
```

[**演示**](http://jsfiddle.net/p3LC8/)

# java - 在凹/凸多边形内查找有界矩形

> ID：10214829
> 
> 赞同：5
> 
> 时间：2012-04-18T17:37:30.477
> 
> 标签：java, geometry, computational-geometry

我正在寻找一种在凹面或凸面多边形内找到轴对齐矩形的方法。

我一直在网上寻找，我能找到的最接近的解决方案只适合凸多边形，而不适合凹多边形。例如 -

[在多边形内查找轴对齐的矩形](https://stackoverflow.com/questions/610462/finding-an-axis-aligned-rectangle-inside-a-polygon)

老实说，我不是一个伟大的数学天才，所以我宁愿找到代码示例或代码库，但我想我可以自己处理一些数学，或者找人来帮助我。

如果解决方案也可以在 Java 中使用，那就太好了，但也许我太贪婪了：P

**编辑**：为了回应罗素的评论，我添加了更多信息。

有界矩形应尽可能大。该矩形旨在在其中包含文本。最多 1 到 4 个字，支持文本换行。因此，例如，如果它太薄，我会垂直放置文本而不是水平放置。因此，对于纵横比，我想它需要足以包含 1-4 个单词，无论是垂直还是水平，并带有自动换行。如果矩形很小，我可以调整文本的大小，但最好是文本应该尽可能大。

另一个很好的要求是，如果多边形的一般方向是对角线，并且文本在对角线方向时会更合适，那么矩形不一定与轴对齐，而是与多边形的对角线。我想这个需求让这变得非常棘手，但如果你们认为它可能，那就太好了！

我想我现在已经涵盖了所有要求。:P

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:21:07.220

我曾经以一种非常笨拙的方式实现了一个类似的系统，只是通过搜索可能的矩形并`Shape.contains()`在它们上使用。它有点慢 - 将 Gettsburg Address 布局成椭圆形可能需要 1 秒 - 但对于静态文本和简单形状的小文本很有用。

如果您有兴趣，可以在[这里](http://www.zahniser.net/~russell/computer/index.php?title=ObjectDraw%20Library)解压缩 jar 文件并查看`TextWrappingLayout`. 它可能比您需要的要复杂得多，因为它不是在单个矩形中布局，而是尝试将每条线尽可能靠近边缘放置，但是您可以看到基本思想。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T00:04:23.703

由于您想对文本执行此操作，因此我认为速度很重要，准确性不那么重要。我建议这样做：

1.  将多边形放在网格上，其单元格与文本尺寸成比例。
2.  [使用Bresenham 的线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)删除边界上的单元格。.
3.  移除边界单元之外的单元（通过从网格边缘向内工作。
4.  找到剩余单元格上的最大矩形，例如[此处](http://www.drdobbs.com/database/184410529)显示的方法。

另请参阅[拼图：查找最大矩形（最大矩形问题）](https://stackoverflow.com/questions/7245/puzzle-find-largest-rectangle-maximal-rectangle-problem)。

编辑：我刚刚注意到如果多边形以一定角度定向，该算法会调整的请求。我的建议是找到多边形的[主轴](http://en.wikipedia.org/wiki/Principal_axis_theorem)来检查方向，旋转它以将主轴与 x 轴对齐，然后应用上面的算法。

另外，我想指出“删除一个单元格”实际上只是意味着在表示网格单元格的 2D 数组中设置一个位。

# jquery - jQuery prettyPhoto 不能与 Flip 一起使用！插入

> ID：10214830
> 
> 赞同：1
> 
> 时间：2012-04-18T17:37:35.433
> 
> 标签：jquery, html, flip, prettyphoto

我刚刚读过这篇文章：[LINK](https://stackoverflow.com/questions/8760694/jquery-prettyphoto-not-working-with-sponsor-flip-wall-plugin)，但实际上它没有任何帮助......

我遇到了类似上面链接的问题，但我使用的是 HTML 而不是 PHP。而且，使用[翻转！插件](http://lab.smashup.it/flip/)。

第一次打开我的页面时，prettyPhoto 可以工作，但是当我翻页时，它就不再工作了。

有调用 PrettyPhoto 的代码：

```
$(document).ready(function(){
 $("#box").prettyPhoto();
}); 
```

还有我的第一个链接：

```
<div id="flipTwoQuali">
 <a id="box" href="http://www.youtube.com/watch?v=l34c7wBEdmI" rel="prettyPhoto" title="">
 <img src="img/nossasacoes/qualificacao/video.png" />
 </a>
</div> 
```

这是当我单击菜单时，#flipTwoQuali div 将其内容更改为此（这是在*flipQuali.js*内，在*flipNE()*函数上：

```
<div id="flipTwoQuali">
 <a id="box" href="http://www.youtube.com/watch?v=F8PFPXox9Rk" rel="prettyPhoto" title="">
 <img src="img/nossasacoes/qualificacao/ne/img02.png" />
 </a>
</div> 
```

只是视频和图像发生了变化，但是 prettyPhoto 不再起作用了.... =/

我有它在线，[这里](http://efdutra.com/abril/fvc)。单击 INICIAR（绿色箭头）和视频（带有播放按钮的图像）。然后尝试翻转，点击NOVA ESCOLA（在灰色菜单上），然后在您之前点击视频的同一位置点击图像，它不再起作用了！！

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:49:10.850

我已经修好了！

那太简单了！

翻转！插件，有一个名为 onend 的回调

然后，我添加到我的脚本中：

```
onEnd: function(){
        $('[rel*="prettyPhoto"]').prettyPhoto();
    } 
```

有用！！

# mysql - 清理充满 html 标签的旧数据库

> ID：10214831
> 
> 赞同：1
> 
> 时间：2012-04-18T17:37:41.173
> 
> 标签：mysql, html, regex, replace

我正在将我客户的旧 mysql 数据库移动到一个新的 wordpress 系统（旧的也是 wp），我注意到他的文章都保存有大量`<p></p>`不同样式的 HTML 标签，因为直接从微软字。我已经说服客户使用从 Word 粘贴并在保存新文章之前清理他的文章。

现在，是否有任何安全的方法可以删除所有已保存的标签`<p style="different_styles_every_time"></p>`而不会留下垃圾并希望保留原始换行符？

我已经开始研究正则表达式，但是这里的很多答案都建议不要使用它来解析 HTML。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:42:55.877

这是我在类似 DB 情况（正在存储的 html）的“预渲染清理”过程中使用的一个安全过程。不幸的是，它是用 Java 编写的，但这个概念（和使用的正则表达式）可以应用于 SQL 更新查询。

一个注意事项是，我不仅建议在执行此操作之前进行备份，还建议在数据库的“安全”版本上进行测试。当然，对于这种规模的任何更新程序，您可能已经知道风险。

*注意：*****“要清理的 HTML 块”****不应将其解释为字符串文字，而应仅解释为“displayContent 是保存 DB 的 html 结果的变量，在这种情况下，只是循环内结果集的 1 次迭代。****

 ***```
String displayContent = "THE BLOCK OF HTML TO CLEAN";
String tagregex = "<p[^>]*>";
Pattern p2 = Pattern.compile(tagregex);
Matcher m2 = p2.matcher(displayContent);
displayContent = m2.replaceAll("");
displayContent = displayContent.replaceAll("</p>", ""); 
```

您当然可以将其用于任何其他 html 标签 + 它们的属性。祝你好运！***

# grails - 在从视图生成的数据库中存储一个值

> ID：10214833
> 
> 赞同：0
> 
> 时间：2012-04-18T17:38:07.233
> 
> 标签：grails, grails-2.0, grails-controller

我在 Grails 的一个视图中的 javascript 中计算了一个变量。现在我想将这个值保存在数据库中相应的位置。我怎样才能做到这一点？例如：我有参与者的地址，并通过它计算了相应的纬度和经度。我想将这些保存在我的数据库中。请告诉我该怎么做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:11:08.663

你有没有尝试过任何东西，你能发布一些代码吗

我可以想到两种可能的做事方式。可能还有更多。但我会推荐第一个。

1) 使用 jquery 的 javascript ajax 调用（如果您使用原型或其他一些 javascript 框架......应该有一些事情可以做到这一点 - 这是一个非常常见的事情）

您将需要在您的 grails 应用程序中使用 jquery 才能执行以下操作。

```
$('#buttonOrSomethingToDriveFunctionCall').click(function() {
  $.ajax({
    url: "${createLink(controller: 'user', action: 'saveData')}",
    data: yourDataHere,
    success: function(data) {
        // do something on success
      } 
    });
 }); 
```

2）将是在您的视图中间编写一些常规代码以直接调用控制器。这是个坏主意。你需要做一些事情来将数据保存到页面中，它会让你 gsp 有点难看....意大利面条代码

```
<%@ page import="controllerName" %>

<%
   controllerName->saveData(dataFromjavaScript)

%> 
```

# jquery - jquery 循环图像滑块插件（图像加载时间）

> ID：10214835
> 
> 赞同：0
> 
> 时间：2012-04-18T17:38:21.503
> 
> 标签：jquery, slideshow, cycle

如果您查看网站stretchshapes.net，您会看到我们正在使用一个名为VTEM 滑块的插件在我们网站的顶部显示广告。

几个月来它一直运行良好，但最近图像加载时间开始变得很漫长。例如，当页面加载时，您可以看到稍后显示的 3 或 4 张幻灯片出现在滑块所在位置的下方，然后消失在滑块后面，稍后再显示。

我尝试过优化图像的加载时间，但似乎没有多大作用。在我看来，我用来启动它的 jquery 应该能够首先将所有图像隐藏起来，而不是在图像加载之后。说得通？但愿如此..

这是启动滑块的 jquery：

```
 <script type="text/javascript">
 /* <![CDATA[ */
 $(document).ready(function(){$('#vtemslideshow1').cycle({fx:'scrollHorz',timeout:6500,speed:1000,next:'#cycle_next',prev:'#cycle_prev',pager:'#vtemnav',pagerEvent:'click',pagerAnchorBuilder:pagerFactory,startingSlide:0,fit:true,height:69,width:425});function pagerFactory(idx,slide){return'#vtemnav a:eq('+idx+') span';};});/* ]]> */
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:40:36.090

我不确定这是您的问题，但在调用幻灯片之前，您可以隐藏所有幻灯片，然后它们不应该出现。因此，您可以只`display:none`在服务器端添加除第一个之外的所有内容，以确保它们永远不会显示在滑块之外。

`$('#vtemslideshow1 a:gt(0)').hide(); // hide all but first` `$('#vtemslideshow1').cycle({fx:'scrollHorz',timeout:6500,speed:1000,next:'#cycle_next',prev:'#cycle_prev',pager:'#vtemnav',pagerEvent:'click',pagerAnchorBuilder:pagerFactory,startingSlide:0,fit:true,height:69,width:425});`

# jquery - 反向 JQuery 幻灯片

> ID：10214845
> 
> 赞同：0
> 
> 时间：2012-04-18T17:38:48.753
> 
> 标签：jquery, css, slideshow

嗨，我正在使用 JQuery 幻灯片。我的 html 中的所有图像都在彼此之上，我试图让我的代码从最后一张图像开始。但它不会工作，有什么想法吗？

原始代码如下所示：

```
$(document).ready(function() {
    var current = $('#gallery img:first');
    //Set the fade in effect for the next image, show class has higher z-index
    current.addClass('show').css({
        opacity: 0.0
    }).animate({
        opacity: 1.0
    }, 1000);

    setInterval('gallery()', 3000);
});

function gallery() {
    //if no IMGs have the show class, grab the first image
    var current = ($('#gallery img.show') ? $('#gallery img.show') : $('#gallery img:first'));

    //Get next image, if it reached the end of the slideshow, rotate it back to the first image
    var next = ((current.next().length) ? current.next() : $('#gallery img:first'));

    //Set the fade in effect for the next image, show class has higher z-index
    next.css({
        opacity: 0.0
    }).addClass('show').animate({
        opacity: 1.0
    }, 1000);

    //Hide the current image
    current.animate({
        opacity: 0.0
    }, 1000).removeClass('show');
}​ 
```

我的反向代码如下所示：

```
$(document).ready(function() {
    var current = $('#gallery img:last');
    //Set the fade in effect for the next image, show class has higher z-index
    current.addClass('show').css({
        opacity: 0.0
    }).animate({
        opacity: 1.0
    }, 1000);

    setInterval('gallery()', 3000);
});

function gallery() {
    //if no IMGs have the show class, grab the first image
    var current = ($('#gallery img.show') ? $('#gallery img.show') : $('#gallery img:last'));

    //Get next image, if it reached the end of the slideshow, rotate it back to the first image
    var before = ((current.before().length) ? current.before() : $('#gallery img:last'));

    //Set the fade in effect for the next image, show class has higher z-index
    before.css({
        opacity: 0.0
    }).addClass('show').animate({
        opacity: 1.0
    }, 1000);

    //Hide the current image
    current.animate({
        opacity: 0.0
    }, 1000).removeClass('show');
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:04:04.810

在没有测试页面的情况下，我在 ul 中添加了图像是这样做的：

```
var before = ((current.prev().length) ? current.prev() : $('#gallery img:last')); 
```

这将选择要显示的上一个图像，如果没有，则再次选择最后一个图像。

如果这对你有用，你可以试试吗？

# c# - 如何将此双 foreach 循环转换为 lambda？

> ID：10214848
> 
> 赞同：3
> 
> 时间：2012-04-18T17:38:58.480
> 
> 标签：c#, linq, lambda, foreach

有没有办法让这些 foreach 循环只有**一个**lambda 表达式？

```
 private int getNextEventId()
    {
        int numOfEvents = 0;

        foreach (MonthModel eventMonth in eventsForAllMonths)
        {
            foreach (DayModel eventDay in eventMonth.AllDays)
            {
                numOfEvents += eventDay.CalEvents.Count;
            }
        }

        return numOfEvents + 1;
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-18T17:41:44.610

```
int numOfEvents = eventsForAllMonths.SelectMany(m => m.AllDays)
                                    .Select(d => d.CalEvents.Count)
                                    .Sum(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T17:45:16.507

```
return (eventsForAllMonths.SelectMany(eventMonth => eventMonth.AllDays).Sum(eventDay => eventDay.CalEvents.Count) + 1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T17:44:39.067

试试这个：

```
 private int getNextEventId()
    {
        int numOfEvents = eventsForAllMonths.SelectMany(eventMonth => eventMonth.AllDays).Aggregate(0, (current, eventDay) => current + eventDay.CalEvents.Count);

        return numOfEvents + 1;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-18T18:29:55.627

这个怎么样？

```
return
    (from m in eventsForAllMonths
    from d in m.AllDays
    select d.CalEvents.Count).Sum() + 1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T17:41:31.053

我`ForEach()`以谋生为生，所以：

```
eventsForallMonths.ForEach(em=>em.ForEach(ed=>numOfEvents+=ed.CalEvents.Count)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-15T21:18:12.207

如何在 lambda 中转换它？

```
List<Item> listItem = new List<Item>();
foreach (StackPanel sp in spPhotos.Children)
{
    foreach(Item item in sp.Children)
    {
        listItem.Add(item);
    }
    sp.Children.Clear();
}
spPhotos.Children.Clear(); 
```

# ios - 将 UIViewController 添加到子视图并删除它的最正确方法是什么？

> ID：10214852
> 
> 赞同：0
> 
> 时间：2012-04-18T17:39:15.483
> 
> 标签：ios, uiviewcontroller, release-management, addsubview, memory-management

我正在尝试添加 UIViewController 子视图，然后单击按钮将其关闭。我当前的代码可以完成这项工作，我只是不确定它是否会泄漏或导致任何问题。

所以首先我添加子视图

```
-(IBAction)openNewView:(id)sender{
   // start animation
   [UIView beginAnimations:@"CurlUp" context:nil];
   [UIView setAnimationDuration:.3];
   [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
   [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.view cache:YES];

   // add the view
   newViewController* newVC = [[newViewController alloc] initWithNibName:@"newViewController" bundle:[NSBundle mainBundle]];
   [self.view addSubview:newVC.view];

   [UIView commitAnimations]; 
} 
```

然后在 newViewController.m 我有删除它的功能

```
-(IBAction)closeNewView:(id)sender{
   // start animation
   [UIView beginAnimations:@"curldown" context:nil];
   [UIView setAnimationDelegate:self];
   [UIView setAnimationDuration:.3];
   [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
   [UIView setAnimationTransition:UIViewAnimationTransitionCurlDown forView:self.view.superview cache:YES];

   // close dialog
   [self.view removeFromSuperview];
   [UIView commitAnimations];

   [self.view release];
} 
```

就像我说的那样有效，但是当我分析代码时，它告诉我：

在第 X 行分配并存储到“newViewController”中的对象的潜在泄漏：

```
newViewController* newVC = [[newViewController alloc] initWithNibName:@"newViewController" bundle:[NSBundle mainBundle]]; 
```

和

调用者此时不拥有的对象的引用计数的不正确递减`[self.view release];`

如果我`autorelease`使用 viewController 而不是`[self.view release]`它在删除时崩溃（如果我在添加视图后释放视图）：-[FirstViewController performSelector:withObject:withObject:]: message sent to deallocated instance 0xd21c7e0

如果我调用`[newVC release]`任何一个 viewController `dealloc`，它都无法构建。

希望我不是在问一个相当明显的问题，但是添加和删除视图控制器的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:51:56.940

你用的是什么IOS版本？如果您使用的是 5.0，您可能应该继续切换到 ARC，这样您就不必自己处理 [release] 调用。

如果您仍然想要或需要坚持手动内存管理：如果您尝试释放 newVC，dealloc 无法构建的原因是因为该指针的作用域是函数 openNewView。使其成为班级成员，您就可以释放它。

```
@implementation WhateverItsCalled {
  newViewController *newVC;
}

- ( IBAction ) openNewView: (id)sender {
...
  newVC = [ [ newViewController alloc ] initWithNibNamed:...
}

- ( void ) dealloc {
  [ newVC release ];
} 
```

是的，如果您不使用 ARC，则每个“alloc”都*必须*与相应的“release”配对。

另外我必须问 - 你为什么在这里使用视图控制器？如果您只想要一个视图，您可以使用 [ [ NSBundle mainBundle ] loadNibNamed] 从 NIB 加载视图，并将 [self] 列为文件的所有者。这将设置您的所有引用（包括您想要的视图），并且您不必实例化（看起来像）一个多余的视图控制器。

# javascript - 在 Rails 应用程序中的 Google Maps v3 上显示标记 - 使用 Javascript 和 JSON

> ID：10214860
> 
> 赞同：2
> 
> 时间：2012-04-18T17:39:56.890
> 
> 标签：javascript, ruby-on-rails, google-maps-api-3

Rails、谷歌地图、Javascript 和 JSON 都可以同时使用。因此，如果这是一个简单的问题，我深表歉意。

我有一个带有列表数据库的 Rails 应用程序，每个列表都有纬度和经度。我想要做的是当页面加载时，我想在地图上显示所有列表。

所以我有如下的listings_controller.rb、application.js、index.html.erb。我使用这本书作为我的代码的参考，但问题是它的示例使用了已弃用的 Google 地图版本。

我需要使用我的代码执行的步骤如下：

1.  index.html.erb 执行 application.js 中的代码
2.  application.js 调用 listings_controller.rb 中的一个函数，该函数获取列表模型中的所有列表并将它们转换为一个巨大的 JSON 对象。
3.  application.js 现在拥有列表的 JSON 数组，并在循环中对其进行解析，并提取列表的名称、其纬度和经度以及其他一些字段，并将此信息传递给 javascript 方法“addMarker(latitude, longitude, description, map )"

问题是我只知道如何执行下面列出的部分步骤。我想知道是否有人可以填补这些漏洞并帮助我。

**index.html.erb**

```
<!DOCTYPE html>  
<html>  
  <head>  
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />  
    <style type="text/css">  
      html { height: 100% }  
      body { height: 100%; margin: 0; padding: 0 }  
      #map_canvas { height: 100% }  
    </style>  
    <script type="text/javascript"  
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyATZJn-p3mhbyk9JmR8mevKAbtrx4ZzPiQ&sensor=false">  
    </script>  
    <%=javascript_include_tag 'application' %>  

  </head>  
  <body onload="initialize()">  
    <div id="map_canvas" style="width:80%; height:80%"></div>  
  </body>  
</html> 
```

**Listings_controller.rb**

```
def index   
    @listings = Listing.order(:name)  
    self.all_listings_json      
end  

def all_listings_json  
   render :text=>(@listings).to_json  
end 
```

**应用程序.js**

```
function initialize() 
  {  
    options =   
    {   
      center: new google.maps.LatLng(vlat,vlong),  
      zoom: 15,  
      mapTypeId: google.maps.MapTypeId.ROADMAP  
    };  

    map = new google.maps.Map(document.getElementById("map_canvas"), options);  

    //get JSON object         
    var markersArray = getMarkersJSON();

    //pass JSON object to method and add listings in array to map
    addMarkerArray( markersArray , map);
   }

function getMarkersJSON()  
{  
    //To do  

}  

function addMarkerArray( markersArray, map)  
   {
    var i;
    for(i = 0; i < markersArray.length ; i++)
    {
        //To DO

    }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:55:56.767

那么在您构建地图时，您已经拥有 JSON 对象了吗？

然后你需要做的就是通过你的对象运行：

```
var myJSON = [
{lat : 10.010232,long: 34.123232},
{lat : 23.122323,long: 76.343434},
{lat : 43.123434,long: 74.12343}
]; //Test data

    function addMarkerArray( markersArray, map)
    { 
        for(var i = 0; i < markersArray.length ; i++) 
        {
          var latitude = markersArray[i].lat;
          var longitude = markersArray[i].long;
          var myLatlng = map.LatLng(latitude,longitude);
          var marker = map.Marker({
              position: myLatlng,
              map: map,
              title:"One title"
          });
        }
    }
    addMarkerArray(myJSON,map); 
```

您可以在此处查看 Google 地图文档： [https ://developers.google.com/maps/documentation/javascript/overlays](https://developers.google.com/maps/documentation/javascript/overlays)

# java - Netty - 在频道之间共享附件

> ID：10214864
> 
> 赞同：0
> 
> 时间：2012-04-18T17:40:02.250
> 
> 标签：java, thread-safety, netty

我希望通过附件在 Netty 中的大约 20 个频道之间共享一个对象。前任..

```
SharedStatsObj sso ...
ChannelFuture future = bootstrap.connect(new InetSocketAddress(host, port));
ChannelHandlerContext c = future.getChannel().getPipeline().getContext("handler")
c.setAttachment(sso); 
```

该对象将保留发送的命令、我们已连接多长时间等统计信息，并且还将用于向各个通道发送信号以执行特定操作。有人对这个有经验么？除了在更新数据/访问数据时使用同步块之外，还有其他线程问题吗？任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:38:00.370

如果要在通道之间共享对象，则将其直接注入 ChannelHandler 或使用静态 ChannelLocal 实例。

确保您的对象是线程安全的！

# xcode - 重命名项目后尝试在 GIT 本地存储库上从 XCode 提交

> ID：10214866
> 
> 赞同：0
> 
> 时间：2012-04-18T17:40:03.370
> 
> 标签：xcode, git, commit, renaming

我有一个 projectA 已被复制并重命名为 ProjectB。从本地工作副本创建新的 GIT 存储库后，我尝试提交最后的更改，但收到此错误消息

致命：无法切换到“/Users/Me/Desktop/Projects/ProjectA/ProjectA.xcodeproj”：没有这样的文件或目录

为什么还在寻找旧文件？

我还注意到 xcode 重命名过程更改了目标名称，.plist 文件但不是主目录

干杯，克劳斯

# vb.net - 如何加速用 VB.NET 制作的游戏

> ID：10214871
> 
> 赞同：2
> 
> 时间：2012-04-18T17:40:15.993
> 
> 标签：vb.net, optimization

正如标题所暗示的那样，我在问一个关于我制作的想要加速的游戏的问题。这是一个很笼统的问题。所以它是这样的：我制作了一个程序，其中你是一个圆圈，敌人是向你进攻的正方形。您按空格键射击，每次击中都会获得积分，使用箭头键移动，有拾音器等。

但是，我不再想使用这样绘制的占位符圆圈：

```
e.Graphics.FillEllipse(Brushes.Orange,Player) 
```

这里的 Player 是定义播放器的矩形。因此，为了尝试替换图形，我下载了地球（玩家）与宇宙飞船（敌人）的 JPEG 图像。我使用以下方法绘制它：

```
e.Graphics.DrawImage(ImgEarth,Player.X,Player.Y,Player.Width,Player.Height) 
```

以及绘制敌人的相同技术。

然而，结果是非常非常缓慢移动的外星人。它不是一个慢计时器或任何东西（我在那里有大约 2 个同时工作），但 FPS 很差。这可能是我的系统，但当我检查时它只占用了大约 10MB 的内存。我知道 VB.NET 并不是游戏制作的最佳选择，因为它不如其他一些语言（C++、C#）快，但是有什么方法可以在不牺牲 FPS 的情况下绘制这些？

如果有帮助，我有一个带有 GeForce 8400M GS 的 1.66 GHz 处理器。（在我看来，像这样简单的事情非常有能力）

编辑：我使用双缓冲。`Me.DoubleBuffered = True`. ImgEarth 是 310x310 图像。我会尝试缩小它，因为在表格上它被绘制为 50x50 - 好点。

好的，这是整个 Form1.Paint 过程。之后我会解释一切。

```
e.Graphics.DrawImage(ImageEarth, Player.x,Player.y,Player.Width,Player.Height)

        'Projectiles
        Dim i As Integer = 0
        Do
            If Current_Projectile(i).IsEmpty = False Then e.Graphics.FillRectangle(Brushes.Red, Current_Projectile(i))
            i += 1
        Loop Until i = UBound(Current_Projectile)

        i = 0

        Do
            If Advanced_Projectiles(i).IsEmpty = False Then e.Graphics.FillRectangle(Brushes.Green, Advanced_Projectiles(i))
            i += 1
        Loop Until i = UBound(Advanced_Projectiles)

        i = 0
        Do
            If Pickups(i).IsEmpty = False Then
                If PickUpType = 0 Then e.Graphics.FillEllipse(Brushes.Green, Pickups(i))
                If PickUpType = 1 Then e.Graphics.FillEllipse(Brushes.Red, Pickups(i))
                If PickUpType = 2 Then e.Graphics.FillEllipse(Brushes.Yellow, Pickups(i))
            End If
            i += 1
        Loop Until i = UBound(Pickups)
        'Objects
        i = 0

        Do
            If Objects(i).IsEmpty = False Then e.Graphics.FillRectangle(Brushes.Blue, Objects(i))
            i += 1
        Loop Until i = UBound(Objects) 
```

好的。Current_Projectile 是一个数组，用于存储有关玩家发射的射弹（子弹）的数据。然后，高级射弹是相同的，除了它发射的前者更“有效”版本。Pickups 是一个数组，用于存储有关向玩家发射的拾取物的数据。它的颜色在另一个子程序中确定。最后，objects(i) 是一个数组，用于存储关于向你开火的敌人矩形的数据。

编辑 2：好的，认为你们可能需要 Timer.Tick 程序。

计时器称为 Tmr_Main，它处理游戏期间发生的大约 90% 的事情。它将大部分工作委托给各个子例程，但有些是在计时器本身中完成的。这是整个表单中第二复杂的代码块。这里是：

将 i 调暗为整数 = 0

```
CollisionDetect()
CheckForDead()

If ReadyToReset = True Then ResetInt += 1
If ResetInt = 80 Then
    ResetPowerUps()
    ReadyToReset = False
    ResetInt = 0
End If
'Projectiles(Bullets)
i = 0
Do
    If Current_Projectile(i).IsEmpty = False Then
        Current_Projectile(i).X += Projectile_Speed

        If Current_Projectile(i).X > Me.Width Then

            Current_Projectile(i) = Nothing
            No_Of_Projectiles -= 1
        End If

    End If

    i += 1

Loop Until i = UBound(Current_Projectile)
'Advanced Projectiles
i = 0

Do
    If Advanced_Projectiles(i).IsEmpty = False Then
        Advanced_Projectiles(i).X += AdvProjectile_Speed
    End If
    If Advanced_Projectiles(i).X >= Me.Width Then
        Advanced_Projectiles(i) = Nothing
    End If
    i += 1
Loop Until i = UBound(Advanced_Projectiles)

'Pickups
GeneratePickups()

i = 0
Do
    If Pickups(i).IsEmpty = False Then
        Pickups(i).X -= Pickup_Speed
    End If
    If Pickups(i).X < 0 Then
        Pickups(i) = Nothing
    End If
    i += 1
Loop Until i = UBound(Pickups)

LblScore.Text = "Score: " & Score
CheckForWin()

Me.Invalidate() 
```

好的，再一次，从顶部解释一切。`CollisionDetect()`包含用于评估在整个游戏中击中了什么的逻辑。这包括播放器和拾取器、播放器和对象、对象和弹丸、对象和高级弹丸、对象和播放器。接下来，它评估是否使用了拾取器。当玩家击中拾音器时，布尔值设置为 true。这意味着此计时器的每次迭代都会将一个添加到 variable `ResetInt`。当这达到 80 或 4 秒（50 毫秒计时器）时，拾取的效果被重置。此外，布尔值是假的，所以它不会再做同样的事情。

接下来，它移动表单上的所有对象。这些包括物体、射弹和拾音器。它还检查他们是否已经到达他们的“路径”的尽头（即，如果弹丸向右走得足够远，它就会从游戏中移除）。

最后，它检查玩家是否赢了，并更新一个告诉玩家分数的标签。然后它重绘。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T19:05:30.213

一些想法可以尝试...

(1) 使用`Option Strict On`它至少会引导您远离任何低效的自动类型转换。

(2) 而不是`Do ... Loop Until i = UBound( ... )`使用`For i = 0 To UBound( ... ) - 1`（除非您真的希望数组在循环期间可能添加或丢失元素）；`For`只会调用`UBound`一次，而`Do`每次迭代都会调用它。更好的是，为什么不使用`Length`数组成员而不是`UBound`？

(3) 对于那些`If`语句 testing `PickUpType`，使用 If-ElseIf 阶梯：

```
If PickUpType = 0 Then 
    e.Graphics.FillEllipse(Brushes.Green, Pickups(i)) 
ElseIf PickUpType = 1 Then 
    e.Graphics.FillEllipse(Brushes.Red, Pickups(i)) 
ElseIf PickUpType = 2 Then 
    e.Graphics.FillEllipse(Brushes.Yellow, Pickups(i)) 
End If 
```

毕竟，如果`PickUpType = 0`，为什么要浪费时间`PickUpType = 1`和`PickUpType = 2`？

(4) 试验`With`( [http://msdn.microsoft.com/en-us/library/wc500chb(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/wc500chb(v=vs.100).aspx) )。代替：

```
If Advanced_Projectiles(i).IsEmpty = False Then 
    Advanced_Projectiles(i).X += AdvProjectile_Speed 
End If 
```

尝试：

```
With Advanced_Projectiles(i)
    If Not .IsEmpty Then 
        .X += AdvProjectile_Speed 
    End If 
End With 
```

(5) 如果您正在使用 Microsoft.VisualBasic 命名空间（例如 UBound）之外的任何东西（不是常量），请尝试在框架的更“标准”部分中找到一种方法来完成相同的操作。Microsoft.VisualBasic 可能具有您可能不需要的附加层或 VB6 怪癖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T12:05:48.450

您应该使用双缓冲。这是您执行所有绘画和绘制到内存位图以响应游戏事件等的地方。然后在您的 OnPaint 中，您对该后台缓冲区的屏幕执行单个 blit。

# python - 以字符串 Python 中另一个字符的出现为条件替换字符串中的字符

> ID：10214872
> 
> 赞同：-1
> 
> 时间：2012-04-18T17:40:18.870
> 
> 标签：python, string

我的代码中有一个字符串（完全由小写字母组成）。在我打算在同一字符串中替换的字符之后，我需要替换一个以另一个字符的出现为条件的字符。例如，如果要替换的字符是“e”，条件字符是“t”，那么我们将替换“森林”中的“e”而不是“丛林”中的“有没有办法以简单的方式做到这一点Python？感谢您抽出时间来解决这个问题。

PS 请注意，我正在使用的字符中没有重复字母。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:51:22.480

如果要替换所有出现的后面`e`有 a 的`t`，可以使用以下命令：

```
>>> import re
>>> re.sub(r'e(?=.*t)', 'i', 'forest')
'forist'
>>> re.sub(r'e(?=.*t)', 'i', 'jungle')
'jungle'
>>> re.sub(r'e(?=.*t)', 'i', 'greet')
'griit' 
```

这使用了[前瞻](http://www.regular-expressions.info/lookaround.html)，这是一个零宽度的断言，它检查是否`t`在字符串中的任何后面而不消耗任何字符。这允许正则表达式找到`e`适合此条件的每个，而不仅仅是第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:42:59.250

```
>>> import re
>>> re.sub(r'e(.*t)', r'i\1', "forest")
'forist'
>>> re.sub(r'e(.*t)', r'i\1', "jungle")
'jungle' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:51:11.260

有什么问题？

```
if st.find("e") < st.find("t"): 
    st.replace("e","i",1) 
```

和它的可读性

如果事件不是唯一的，您也可以这样做

```
>>> pos_t=st.find("t")
>>> "".join(e if (e != 'e' or i > pos_t) else 'i' for i,e in enumerate(st)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T18:03:20.597

如果最后一个 t 之前的部分，这将用 'i' 替换所有 'e'：

```
def sub(x):   
    return x[:x.rfind('t')].replace('e','t') + x[x.rfind('t'):] 
```

结果：

```
>>> sub('feeoeresterette')
'fttotrtsttrttte'
>>> sub('forest')
'fortst'
>>> sub('greet')
'grttt'
>>> sub('theater')
'thtater'' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T20:27:30.530

以下是一个应该做你想做的功能：

```
>>> def replace(source, replacee, replacement, conditional):
...     if source.find(replacee) < source.rfind(conditional):
...         return source.replace(replacee, replacement)
...     else:
...         return source 
```

或者，如果您希望它不那么冗长：

```
>>> def replace(source, replacee, replacement, conditional):
...     return source.find(replacee) < source.rfind(conditional) and source.replace(replacee, replacement) or source 
```

两个产量都应该产生相同的结果，这里有一些例子：

```
>>> replace('forest', 'e', 'i', 't')
'forist'
>>> replace('jungle', 'e', 'i', 't')
'jungle'
>>> replace('tales', 'e', 'i', 't')
'tales' 
```

# javascript - 使画布与父级一样宽和一样高

> ID：10214873
> 
> 赞同：97
> 
> 时间：2012-04-18T17:40:21.950
> 
> 标签：javascript, css, html, canvas

我想制作一个矩形画布来模拟进度条，但似乎当我将画布的宽度和高度设置为 100% 时，它并没有真正使它像父级一样高和宽

请参阅下面的示例
[http://jsfiddle.net/PQS3A/](http://jsfiddle.net/PQS3A/)

甚至可以制作非正方形的画布吗？我不想硬编码画布的高度和宽度，因为在更大或更小的屏幕（包括移动设备）中查看时它应该动态变化

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-04-18T18:34:36.357

这是一个解决问题的工作示例：

## [http://jsfiddle.net/PQS3A/7/](http://jsfiddle.net/PQS3A/7/)

你的例子有几个问题：

1.  A`<div>`没有`height`或`width`属性。您需要通过 CSS 设置它们。
2.  即使 div 的大小正确，它也使用 default `position:static`，这意味着它不是任何子级的定位父级。如果希望画布与 div 大小相同，则必须将 div 设置为`position:relative`(or`absolute`或`fixed`)。
3.  Canvas 上的`width`和属性指定要绘制到的数据像素数（就像图像中的实际像素一样），并且与画布的*显示大小*`height`分开。这些属性必须设置为整数。

 *上面链接的示例使用 CSS 设置 div 大小并使其成为定位的父级。它创建了一个 JS 函数（如下所示），将画布设置为与其定位的父级相同的*显示*大小，然后调整内部`width`和`height`属性，使其具有与显示相同的像素数。

```
var canvas = document.querySelector('canvas');
fitToContainer(canvas);

function fitToContainer(canvas){
  // Make it visually fill the positioned parent
  canvas.style.width ='100%';
  canvas.style.height='100%';
  // ...then set the internal size to match
  canvas.width  = canvas.offsetWidth;
  canvas.height = canvas.offsetHeight;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-18T17:46:10.967

如果您希望画布实际上与父元素一样大，请使用画布的`width`和属性。`height`您可以使用[JQuery](http://www.jquery.com)设置它们。

```
$(document).ready(function() {
  var canvas = document.getElementById("theCanvas");
  canvas.width = $("#parent").width();
  canvas.height = $("#parent").height();
}); 
```

如果您不知道[JQuery](http://www.jquery.com)，请使用以下 Javascript：

```
var canvas = document.getElementById("theCanvas");
var parent = document.getElementById("parent");
canvas.width = parent.offsetWidth;
canvas.height = parent.offsetHeight; 
```

如果您使用`css`height 和 width 属性，`style="width:100%; height:100%;"`那么您只是在拉伸画布。这将导致您在画布上绘制的所有内容看起来都被拉伸了。

[JQuery 解决方案的JSFiddle](http://jsfiddle.net/PQS3A/3/)。

用于 Javascript 解决方案的[JSFiddle 。](http://jsfiddle.net/PQS3A/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:44:40.343

在标签上使用 CSS 属性而不是属性：

```
<div style="background-color:blue;width:140px;height:20px">
    <canvas style="background-color: red;width:100%;height:100%">
    </canvas>
</div>​ 
```

[这似乎有效](http://jsfiddle.net/PQS3A/2/)*

# java - 收到消息“org.aopalliance.aop.Advice 类型无法解析。” 在spring java程序中

> ID：10214875
> 
> 赞同：7
> 
> 时间：2012-04-18T17:40:29.493
> 
> 标签：java, eclipse, spring, aop

我正在尝试从此页面设置 spring AOP 示例：

[http://www.javabeat.net/articles/51-introduction-to-springs-aspect-orientation-programminga-4.html](http://www.javabeat.net/articles/51-introduction-to-springs-aspect-oriented-programminga-4.html)

我使用 Eclipse Indigo 作为我的开发环境。

在这些线上：

```
public class LogAfterThrowsAdvice implements ThrowsAdvice{

public class LogAfterReturningAdvice implements AfterReturningAdvice{ 

public class LogBeforeCallAdvice implements MethodBeforeAdvice { 
```

我收到消息：

> org.aopalliance.aop.Advice 类型无法解析。它是从所需的 .class 文件中间接引用的

我从这里下载了 org.aopalliance 包：

[http://sourceforge.net/projects/aopalliance/](http://sourceforge.net/projects/aopalliance/)

jar 文件是 aopalliance-alpha1.jar。它不包含路径 org.aopalliance.aop。我想知道我是否应该使用不同的 aopalliance jar 文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T17:48:56.053

我从这里下载了 jar：

[http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.org.aopalliance&version=1.0.0](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.org.aopalliance&version=1.0.0)

这解决了我的问题。

# glassfish - 在 Struts Action 中调用 EJB 对象

> ID：10214876
> 
> 赞同：1
> 
> 时间：2012-04-18T17:40:32.597
> 
> 标签：glassfish, struts, ejb

我在 struts 操作中调用 EJB 对象时遇到问题。

我在 glassfish 中部署了我的应用程序，在 glassfish 管理控制台的应用程序描述中，我看到部署了一个 StatelessSessionBean。我的应用程序的 .ear 文件由 .war（web 模块）和 .jar（ejb）组成，一个消息驱动，一个会话 bean。

当我尝试在 struts 操作类中调用会话 bean 时，我得到空指针异常。

这是我的电话：

```
@EJB
private AccountFacade accountFacade;

@Override
public ActionForward execute(ActionMapping mapping,
                             ActionForm form,
                             HttpServletRequest request,
                             HttpServletResponse response)
        throws Exception {
    UserCreationForm userCreationForm = (UserCreationForm) form;

    Account account = new Account();
    account.setName(userCreationForm.getName());
    account.setEmail(userCreationForm.getEmail());
    account.setPassword(userCreationForm.getPassword());

    accountFacade.create(account);

    return mapping.findForward(NavigationUtils.ACTION_SUCCESS);
} 
```

此行发生异常：`accountFacade.create(account);`

帐户外观类如下所示：

```
@Stateless
public class AccountFacade extends AbstractFacade<Account> implements AccountFacadeLocal {

    /**
     * Persistence context entity manager.
     */
    @PersistenceContext(unitName = "SearchEnginePU")
    private EntityManager em;

    /**
     * Gets entity manager.
     *
     * @return entity manager.
     */
    @Override
    protected EntityManager getEntityManager() {
        return em;
    }

    /**
     * Constructor.
     */
    public AccountFacade() {
        super(Account.class);
    }

} 
```

AccountFacadeLocal 接口：

```
@Local
public interface AccountFacadeLocal {

    void create(Account account);

    void edit(Account account);

    void remove(Account account);

    Account find(Object id);

    List<Account> findAll();

    int count();

} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:29:49.527

Struts 操作不是标准的 Java EE Web 组件，并且不由 Java EE 容器实例化和管理，因此 EJB 不会注入到 Struts 操作中。

使用 JNDI 查找您的 bean，或使用[http://code.google.com/p/struts-di/](http://code.google.com/p/struts-di/)（未测试）。另请参阅[EJB 3.1：它是否允许将 bean 注入到不受容器管理的资源中？](https://stackoverflow.com/questions/8612474/ejb-3-1-does-it-allow-injection-of-beans-into-resources-not-managed-by-the-cont)对于类似的问题。

# android - 有没有办法在给定的 classes.dex 文件中获取类名？

> ID：10214880
> 
> 赞同：3
> 
> 时间：2012-04-18T17:40:41.507
> 
> 标签：android, dex

我正在构建一个家庭自动化应用程序。我正在尝试添加一个插件系统。作为一个测试，我将一个测试类（即 Button 的子类）导出为 APK 文件并将其放在我的应用程序的文件目录中。我能够创建这个类的一个新实例，并使用 and 将它放在我的视图`DexClassLoader`中`.loadClass`。

下一步是扫描此目录中的所有 APK 并获取其中类的名称。

我发现 DexFile 类就是这样做的，但是它抛出了以下异常：

```
04-18 17:26:15.697: E/dalvikvm(726): Can't open dex cache '/data/dalvik-cache/data@data@com.strutton.android.testplugin@files@testloadclass.apk@classes.dex': No such file or directory

04-18 17:26:15.705: I/dalvikvm(726): Unable to open or create cache for /data/data/com.strutton.android.testplugin/files/testloadclass.apk (/data/dalvik-cache/data@data@com.strutton.android.testplugin@files@testloadclass.apk@classes.dex) 
```

它似乎试图在系统缓存中找到优化的 DexFile，但我没有缓存目录的权限。据我所知，这可能是设计使然，我对此没有问题。是否有另一种方法来解析 DEX 文件并从中获取类名？

我查看了一些 dex 反编译器项目的源代码。我必须推出自己的解决方案吗？

这是我的测试应用程序代码（来自我的 Activity OnCreate），以防我错过了什么：

```
 try {
        ArrayList<String> UIPlugins = new ArrayList<String>();
        final File filesDir = this.getFilesDir();
        final File tmpDir = getDir("dex", 0);
        final DexClassLoader classloader = new DexClassLoader( filesDir.getAbsolutePath()+"/testloadclass.apk",
                tmpDir.getAbsolutePath(),
                null, this.getClass().getClassLoader());
        final Class<Button> classToLoad = 
                (Class<Button>) classloader.loadClass("com.strutton.android.testloadclass.MyTestClass_IRDroidUIPlugIn");
        Button mybutton = classToLoad.getDeclaredConstructor(Context.class).newInstance(this);
        mybutton.setId(2);
        mybutton.setOnClickListener(this);
        main.addView(mybutton);
        // Up to here everything works as expected
        // This line throws the exceptions
        DexFile mDexFile = new DexFile(filesDir.getAbsolutePath()+"/testloadclass.apk";);
        Enumeration<String> classNames = mDexFile.entries();
        while (classNames.hasMoreElements()){
            String className = classNames.nextElement();
            if (className.endsWith("IRDroidUIPlugIn")){
                UIPlugins.add(className);
            }
        }
        final Class<Button> classToLoad = 
                (Class<Button>) classloader.loadClass("com.strutton.android.testloadclass.MyTestClass_IRDroidUIPlugIn");
        Button mybutton = classToLoad.getDeclaredConstructor(Context.class).newInstance(this);
        mybutton.setId(2);
        mybutton.setOnClickListener(this);
        main.addView(mybutton);
        btn.setText(tmpDir.getAbsolutePath());
      } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:50:32.040

代替：

```
DexFile mDexFile = new DexFile(filesDir.getAbsolutePath()+"/testloadclass.apk";); 
```

尝试：

```
DexFile mDexFile = DexFile.loadDex(filesDir.getAbsolutePath()+"/testloadclass.apk", tmpDir.getAbsolutePath()+"/testloadclass.odex", 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:51:45.053

您可能会考虑的另一种方法是将插件安装为单独的应用程序。您可以使用您定义的特定意图让插件应用程序公开服务。您还需要服务将实现的预定义aidl 接口。然后，在您的主应用程序中，您可以解析该服务意图，以查找任何插件服务。

# bash - awk 中的 shell 变量使用

> ID：10214881
> 
> 赞同：2
> 
> 时间：2012-04-18T17:40:42.280
> 
> 标签：bash, shell, awk

我目前在 awk 使用 shell 变量时遇到问题。这是我的问题，当我运行以下命令时：

> awk -F: '$1=="marco" {print $7}' /etc/passwd

一切正常，花花公子。但是，我希望能够传递我的 $user shell 变量而不是“marco”，所以我尝试以下操作（在阅读了 -v 标志之后）：

> awk -F: -v awkvar=$user '$1=="$awkvar" {print $7}' /etc/passwd

它似乎不起作用。谁能帮我？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:46:46.790

在 shell 端使用引号，不要`$`用于 awk 变量。

```
awk -F: -v awkvar="$user" '$1==awkvar {print $7}' /etc/passwd 
```

In `awk`,`$`表示它是一个位置参数（即字段编号），因此，它正在寻找字段“marco”，它简化为`$0`整行。所以它会找到任何只有一个字段的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:53:26.953

一些东西：

1.  在 awk 中，变量被替换为没有`$`符号。`$`表示“位置的字段”，因此`$awkvar`表示“awkvar 的位置*值的字段*”。如果`awkvar=marco`，则`$awkvar`与 相同`$"marco"`，相当于 $0。
2.  与 shell 变量不同，您不能引用 awk 变量，否则它们会被视为字符串：

    ```
    sh$ awk -v awkvar=foo 'BEGIN{print "awkvar",awkvar}'
    awkvar foo
    sh$ 
    ```

3.  包含用户名的标准 shell 变量是`$USER`，不是`$user`

所以总而言之，你想要的是这样的：

```
awk -F: -v awkvar=$user '$1==awkvar {print $7}' /etc/passwd 
```

或者，使用[`getent`](http://linux.die.net/man/1/getent)：

```
getent passwd $USER | awk -F: '{print $7}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:03:42.627

这不是`awk`一个壳问题。

这个可以工作（如果`$user`在你的 shell 环境中设置了变量）。

```
awk -F: '$1=="'"$user"'" {print $7}' /etc/passwd 
```

# java - 为什么 Java EE 安全中的名称为“领域”和“主体”？

> ID：10214884
> 
> 赞同：5
> 
> 时间：2012-04-18T17:40:59.057
> 
> 标签：java, security, jakarta-ee

为什么选择“领域”这个名称来表示（至少对我而言）似乎是一组安全约束和允许访问的用户。我可能错了。如果我把它翻译成我的母语，我就会知道它是一个“王国，领土”。我不明白。

> 主体：可以通过部署在企业中的安全服务中的身份验证协议进行身份验证的实体。主体通过使用主体名称来标识并通过使用身份验证数据进行身份验证。

还有校长，这毫无意义，在我母亲的口中，这更难了。有人可以解释一下吗？

[http://docs.oracle.com/javaee/6/tutorial/doc/bnbxj.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnbxj.html)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-18T17:43:53.717

“境界”一词在这里用作集合的空间类比——事物可以在集合内或不在集合内，就像王国一样。安全“领域”是这样一个集合，该集合中的所有事物都受相同规则的影响，但来自该区域之外的事物被视为外来的、可疑的或以其他方式对该领域内的事物具有不完全访问权限。

要了解这是如何工作的，请考虑一座中世纪城堡。城堡内的人被认为比外面的人更忠于国王，因此安全重点是防止外面的敌人进入。城堡内有一个只允许最受信任的人的要塞，以及安全机制（守卫和大门）限制从城堡其他地方进入要塞。

* * *

您可能会在安全文献中看到“安全域”和“信任域”等术语。这些是说“领域”的其他方式。

* * *

“委托人”是可以授予或拒绝授权的人。它可以是用户、角色、机器等。它是权限矩阵中的“主要”（首先或最重要的）实体。

“Principal”（IIRC）与“prince”一词相关，用于表示可以行使重要但不是无限权力的事物。

OP中引用的定义混淆了“身份验证”和“授权”，这是一个常见的错误。试想王子在需要*授权*的范围内行使权力。特别是在 Java-EE 中，[IBAC](http://www.gnu.org/software/hurd/ibac.html)（或类似 RBAC 的相关方案）中涉及主体，但该术语在安全文献中的使用更为广泛，其方式与是否发生身份验证无关，但与是否发生授权无关。

* * *

一个可能的混淆来源：你可能认为*王子*应该统治一个*公国*，但这个类比在这里不成立。在封建的欧洲，也许诸侯与诸侯（一种*境界*）之间是1：1的关系，但诸侯与诸侯之间并没有1：1的关系。一个给定的领域不一定由任何特定的主体统治。

# spring - 无法在 Spring 应用程序中使用 Flyway 1.6 进行迁移

> ID：10214887
> 
> 赞同：2
> 
> 时间：2012-04-18T17:41:04.863
> 
> 标签：spring, flyway

我有使用 Hibernate 连接到 PostgreSQL 的 Roo 生成的 Spring MVC 应用程序。我正在尝试将 Flyway 1.6 作为 bean 集成到 Spring 应用程序上下文中。“某些事情阻止”迁移被执行，并且我在由 Hibernate 元数据验证引起的上下文初始化时出错。使用 Flyway 1.6 Maven 插件（clean、init、migrate）执行迁移没有问题。

Flyway 1.5（以前的版本）的集成工作得很好。

我应该怎么做才能使 Flyway 1.6 集成迁移工作？我应该提供什么额外的配置？

环境：Ubuntu 11.10、Springsource Tool Suite 2.9.1（Eclipse 3.7.2）、OpenJDK 6b23、Tomcat 7.0.23、PostgreSQL 8.4.9/9.1、Spring 3.0/3.1、Hibernate 3.6.4.Final、PostgreSQL Native Driver 8.4 JDBC3 /4 构建 702。

pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
...
<dependencies>
    ...
    <dependency>
        <groupId>com.googlecode.flyway</groupId>
        <artifactId>flyway-core</artifactId>
        <version>1.6</version>
        <classifier/>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>com.googlecode.flyway</groupId>
            <artifactId>flyway-maven-plugin</artifactId>
            <version>1.6</version>
            <configuration>
                <driver>org.postgresql.Driver</driver>
                <url>jdbc:postgresql://localhost:5432/library</url>
                <baseDir>db/migration</baseDir>
                <user>library</user>
                <password>library</password>
            </configuration>
        </plugin>
        ...
    </plugins>
</build>
</project> 
```

数据库属性：

```
database.password=library
database.url=jdbc\:postgresql\://localhost\:5432/library
database.username=library
database.driverClassName=org.postgresql.Driver 
```

持久性.xml：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="persistenceUnit" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
        <property name="hibernate.hbm2ddl.auto" value="validate"/>
        <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/>
        <property name="hibernate.connection.charSet" value="UTF-8"/>
    </properties>
</persistence-unit>
</persistence> 
```

Spring上下文配置：

```
<beans xmlns="http://www.springframework.org/schema/beans" ...>
<context:property-placeholder location="classpath*:META-INF/spring/*.properties"/>
<context:spring-configured/>
<context:component-scan base-package="edu.sandbox.library">
    <context:exclude-filter expression=".*_Roo_.*" type="regex"/>
    <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
</context:component-scan>

<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
    <property name="driverClassName" value="${database.driverClassName}"/>
    <property name="url" value="${database.url}"/>
    <property name="username" value="${database.username}"/>
    <property name="password" value="${database.password}"/>
    <property name="testOnBorrow" value="true"/>
    <property name="testOnReturn" value="true"/>
    <property name="testWhileIdle" value="true"/>
    <property name="timeBetweenEvictionRunsMillis" value="1800000"/>
    <property name="numTestsPerEvictionRun" value="3"/>
    <property name="minEvictableIdleTimeMillis" value="1800000"/>
    <property name="validationQuery" value="SELECT version();"/>
</bean>
<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>
<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" depends-on="flyway" id="entityManagerFactory">
    <property name="persistenceUnitName" value="persistenceUnit"/>
    <property name="dataSource" ref="dataSource"/>
</bean>
<bean class="com.googlecode.flyway.core.Flyway" id="flyway" init-method="migrate">
    <property name="dataSource" ref="dataSource"/>
</bean>
</beans> 
```

日志：

```
...
INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@19d03a4e: defining beans [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.context.config.internalBeanConfigurerAspect,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,dataSource,transactionManager,org.springframework.transaction.config.internalTransactionAspect,entityManagerFactory,flyway]; root of factory hierarchy
DEBUG com.googlecode.flyway.core.dbsupport.DbSupportFactory - Database: PostgreSQL
DEBUG com.googlecode.flyway.core.Flyway - Schema: public
DEBUG com.googlecode.flyway.core.util.ClassPathScanner - Scanning directory: file:/home/developer/projects/sandbox/t7-work/webapps/library/WEB-INF/classes/db/migration/
DEBUG com.googlecode.flyway.core.util.ClassPathScanner - Scanning directory: file:/home/developer/projects/sandbox/t7-work/webapps/library/WEB-INF/classes/db/migration/
INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean - Building JPA container EntityManagerFactory for persistence unit 'persistenceUnit'
...
INFO  org.hibernate.tool.hbm2ddl.DatabaseMetadata - table not found: book
INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory - Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@43a4181c: defining beans [org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.context.config.internalBeanConfigurerAspect,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,dataSource,transactionManager,org.springframework.transaction.config.internalTransactionAspect,entityManagerFactory,flyway]; root of factory hierarchy
ERROR org.springframework.web.context.ContextLoader - Context initialization failed org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in file [/.../applicationContext.xml]: Cannot resolve reference to bean 'entityManagerFactory' while setting bean property 'entityManagerFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in file [/.../applicationContext.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: persistenceUnit] Unable to build EntityManagerFactory
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T12:18:49.820

`/`为`baseDir`属性值添加尾随（[如前所述](http://code.google.com/p/flyway/issues/detail?id=239)）似乎是 Flyway 1.6 的一种解决方法：

```
<bean class="com.googlecode.flyway.core.Flyway" id="flyway" init-method="migrate">
    <property name="dataSource" ref="dataSource"/>
    <property name="baseDir" value="db/migration/"/>
</bean> 
```

迁移按预期运行，产生以下日志：

```
...
DEBUG com.googlecode.flyway.core.dbsupport.DbSupportFactory - Database: PostgreSQL
DEBUG com.googlecode.flyway.core.Flyway - Schema: public
DEBUG com.googlecode.flyway.core.util.ClassPathScanner - Scanning directory: file:/home/developer/projects/sandbox/t7-work/webapps/library/WEB-INF/classes/db/migration/
DEBUG com.googlecode.flyway.core.util.ClassPathScanner - Found resource: db/migration/V1__initial.sql
DEBUG com.googlecode.flyway.core.util.ClassPathScanner - Scanning directory: file:/home/developer/projects/sandbox/t7-work/webapps/library/WEB-INF/classes/db/migration/
DEBUG com.googlecode.flyway.core.util.ClassPathScanner - Scanning directory: file:/home/developer/projects/sandbox/t7-work/webapps/library/WEB-INF/classes/db/migration/
DEBUG com.googlecode.flyway.core.util.ClassPathScanner - Found resource: db/migration/V1__initial.sql
DEBUG com.googlecode.flyway.core.util.ClassPathScanner - Scanning directory: file:/home/developer/projects/sandbox/t7-work/webapps/library/WEB-INF/classes/db/migration/
DEBUG com.googlecode.flyway.core.migration.sql.SqlScript - Found statement at line 17: CREATE TABLE public.schema_version (
...
DEBUG com.googlecode.flyway.core.migration.sql.SqlStatement - Executing SQL: CREATE INDEX schema_version_current_version_index ON public.schema_version (current_version)
INFO  com.googlecode.flyway.core.metadatatable.MetaDataTable - Metadata table created: schema_version (Schema: public)
INFO  com.googlecode.flyway.core.migration.DbMigrator - Current schema version: null
INFO  com.googlecode.flyway.core.migration.DbMigrator - Migrating to version 1
...
INFO  com.googlecode.flyway.core.migration.DbMigrator - Successfully applied 1 migration (execution time 00:00.161s).
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T23:09:49.780

看来您可能面临与此相同的问题：[https ://github.com/flyway/flyway/issues/107](https://github.com/flyway/flyway/issues/107)

请给随附的 jar 一个测试。如果它也适用于您，我将在接下来的几天内将其发布为 1.6.1。

# excel - 将新标签页复制并粘贴到 MSForms.Page

> ID：10214890
> 
> 赞同：2
> 
> 时间：2012-04-18T17:41:09.843
> 
> 标签：excel, vba, multipage

我在 Excel 中有一个带有 MultiPage 对象的用户窗体。我需要通过复制和粘贴现有标签页之一动态地将更多标签页添加到 MultiPage 对象中。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T23:12:06.543

您可以通过使用这段代码来做到这一点

```
Option Explicit

Private Sub CommandButton1_Click()

    '~~> Change 1 to the respective page index which you want to replicate
    MultiPage1.Pages(1).Controls.Copy

    '~~> Add a New page
    MultiPage1.Pages.Add

    '~~> Paste the copied controls
    MultiPage1.Pages(MultiPage1.Pages.Count - 1).Paste

End Sub 
```

**快照**

![在此处输入图像描述](../Images/611f7ceffadfa994eff744f5f6327a4c.png)

# javascript - 使用 jquery 设置除选项值以外的默认值

> ID：10214891
> 
> 赞同：-3
> 
> 时间：2012-04-18T17:41:10.833
> 
> 标签：javascript, jquery, html, css

```
<select id="itemDepartment">

  <option value="1">Computer Accessories</option>
  <option value="2">Laptop</option>

</select> 
```

以下属性设置下拉列表中的默认值

```
selected="selected" 
```

但我想选择除选项值以外的默认值，即**请选择部门**，当我单击下拉列表时， **请选择部门**文本消失并出现选项值（作为默认行为）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:48:28.070

在您的 HTML 中执行以下操作：

```
<select id="itemDepartment">
    <option value="">Please Select Department</option>
    <option value="1">Computer Accessories</option>
    <option value="2">Laptop</option>
</select> 
```

然后在 JQuery 中做。

```
$(function () {
    $("#itemDepartment").click(function () {
        $("#itemDepartment option:first").css("display", "none");
    });

    $("#itemDepartment").blur(function () {
        $("#itemDepartment option:first").css("display", "block");
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:48:53.257

```
<select id="itemDepartment">
    <option class="placeHolder" value=""> Please Select Department </option>  
    <option value="1">Computer Accessories</option>
    <option value="2">Laptop</option>
</select>​​​​​

$('#itemDepartment').focus(function() {
    $(this).find(".placeHolder").hide();
}).blur(function() {
    $(this).find(".placeHolder").show();
});​ 
```

[**现场演示**](http://jsfiddle.net/nuaMb/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:45:20.120

让“**请选择部门**”显示在 a中的唯一方法`<select>`是将其添加为选项，可能是第一个选项

```
<select id="itemDepartment">
  <option value="">Please Select Department</option>
  <option value="1">Computer Accessories</option>
  <option value="2">Laptop</option>
</select> 
```

其他任何东西都必须是`<div>`使用 javascript 的自定义编码，或者只是看起来像`<select>`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T17:46:03.960

您可能正在寻找占位符插件，例如以下之一：

*   [http://archive.plugins.jquery.com/project/input-placeholder](http://archive.plugins.jquery.com/project/input-placeholder)
*   [http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html](http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html)
*   [https://www.google.com/search?q=jquery+input+placeholder](https://www.google.com/search?q=jquery+input+placeholder)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-18T17:46:40.090

只需在您想要的文本中添加一个虚拟值。

```
<select id="itemDepartment">
  <option value="" selected="selected">[Please Select Department ]</option>
  <option value="1">Computer Accessories</option>
  <option value="2">Laptop</option>    
</select> 
```

# iphone - iOS：仅绘制 UImage 的一部分

> ID：10214897
> 
> 赞同：3
> 
> 时间：2012-04-18T17:41:40.120
> 
> 标签：iphone, objective-c, ios, image-manipulation, quartz-core

我正在尝试仅绘制 a 的自定义部分`UIImage`（即：我想*显示*`UIImage`用户触摸的部分） ，并且通过使用`mask`.`layer`

我的类似这样的东西`UIView`：

```
UIBezierPath *maskPath = [UIBezierPath bezierPath];
[maskPath setLineWidth:10.0];
[maskPath moveToPoint:CGPointMake(10.0, 10.0)];
[maskPath addLineToPoint:CGPointMake(100.0, 100.0)];
CAShapeLayer *shapeMaskLayer = [CAShapeLayer layer];
shapeMaskLayer.path = maskPath.CGPath;
[self.layer setMask:shapeMaskLayer]; 
```

然后，在`drawRect`：

```
- (void)drawRect:(CGRect)rect
{
    [img drawInRect:rect];
} 
```

有用。我只是看到由定义的图像部分`maskPath`。

但是，看起来这并不是解决此问题的最佳方法。所以我的问题是：**在 iOS SDK 中仅绘制图像的自定义部分（可以是任何形状）的最佳方法是什么？**.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T00:45:58.957

您可以尝试的一件事是简单地剪辑而不是创建额外的图层。例如

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    UIBezierPath *maskPath = [UIBezierPath bezierPath];
    [maskPath setLineWidth:10.0];
    [maskPath moveToPoint:CGPointMake(10.0, 10.0)];
    [maskPath addLineToPoint:CGPointMake(100.0, 100.0)];

    CGContextAddPath(ctx, maskPath.CGPath);
    CGContextClip(ctx)
    [img drawInRect:rect];
} 
```

# android - 使用 VpnService 在 android 4.0 中创建 VPN

> ID：10214899
> 
> 赞同：4
> 
> 时间：2012-04-18T17:41:44.293
> 
> 标签：android, vpn

我想在 android 4.0 平台上创建一个 vpn 连接，如 PPTP、IPSec 等。

Android 4.0 为我们提供了一个名为 VpnService 的新类，我已经查看了演示项目 ToyVpn，但我仍然遇到了一些问题。

ToyVpn 似乎创建了一个自定义的 vpn 实现，我们需要处理 vpn 连接的细节。

我只想创建类似系统设置活动的 vpn，所以有人知道吗？请告诉我...

附言。在android 2.3及早期，我们可以使用反射调用系统隐藏类来创建类似vpn的系统设置页面。但从 android 4.0 开始，它不再工作了。

谢谢！若超

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T12:04:32.493

我知道这已经有一段时间了，但我已经对此大惊小怪了一段时间，并认为我会为那些遇到这个问题的人插话。

Android 在 API 中为 Android 4.0+ 提供了 VpnService 类。此类允许用户级应用程序（即您的应用程序）将 DNS 请求和与定义的路由匹配的请求重定向到由您的应用程序管理的新的类似 TUN 的接口。这不会开箱即用地实现加密或我们对普通 VPN 的任何期望。

其他人提供了一些变体：

*   [适用于 Android 的 OpenVPN (SSL VPN)](https://code.google.com/p/ics-openvpn/)

*   [适用于 Android 的 StrongSwan（带 EAP 的 IKEv2 IPSec](http://wiki.strongswan.org/projects/strongswan/wiki/Android)

这些项目中的每一个都使用 JNI 将 Android VpnService 桥接到移植到 Android 的现有 VPN 解决方案。

# c# - Linq：TimeSpan 中 2 个日期时间之间的差异

> ID：10214901
> 
> 赞同：16
> 
> 时间：2012-04-18T17:41:48.553
> 
> 标签：c#, linq, linq-to-entities

我正在尝试这样做：

```
Tickets.Where(t => (t.Date - myTicket.Date) < TimeSpan.FromSeconds(120)); 
```

我收到“DbArithmeticExpression 参数必须具有数字通用类型”错误。考虑到我需要 TimeSpan 的差异，我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-18T18:09:01.673

你会想使用[SqlFunctions.DateDiff](http://msdn.microsoft.com/en-us/library/dd487052.aspx)

```
Tickets.Where(t => 
      SqlFunctions.DateDiff("second", t.Date, myTicket.Date) < 120)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-03T09:07:06.350

您也可以使用它；

```
var result = db.Tickets.Where(t => 
       SqlMethods.DateDiffSecond(myTicket.Date ,  t.Date) < 120); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T18:17:21.147

实体框架不支持使用 DateTime 的算术运算。您必须使用[SqlFunctions 之一](http://msdn.microsoft.com/en-us/library/dd487052.aspx)。因此，对于您的陈述，例如：

```
Tickets.Where(t => 
      SqlFunctions.DateDiff("second", t.Date, myTicket.Date) < 120)); 
```

# javascript - 如果只需要一个模板文件，wp_enqueue_script 是包含 js 库的最佳方式吗？

> ID：10214908
> 
> 赞同：0
> 
> 时间：2012-04-18T17:42:23.933
> 
> 标签：javascript, wordpress-theming, unobtrusive-javascript, wordpress

我想这更像是一个一般的最佳实践问题。

WordPress 建议使用 wp_enqueue_script 包含脚本，它将脚本添加到堆栈中，但堆栈中的所有内容都会加载到每个页面上。

但是，为了尽可能快地保持首次访问的初始页面加载并防止恶意代码破坏其他代码，最好只在需要的页面上包含脚本吗？

我看过很多关于缩小代码的文章，但关于何时/何处加载代码的文章并不多。有人可以推荐这方面的文献吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T00:12:50.560

您可以有条件地将带有任何（我认为）模板标签的脚本排入队列。我刚刚测试了这个，它就像一个魅力：

```
// hook to action
add_action( 'wp_enqueue_scripts', 'conditional_script' );
// function to load script on only the front page
function my_conditional_script() {
    if( is_front_page() ) {
        wp_enqueue_script( 'hello', get_template_directory_uri() . '/hello.js' );
    }
} 
```

对你来说，听起来你可能想使用`if ( is_page( array( 1, 2, 3 ) ) ) {...`

我不知道提供 gzip 和缩小的各种缓存插件（如 W3 Total Cache）将如何处理这个问题，但是，即使它没有帮助，也不在所有页面上加载可能是值得的。

# java - 在导航器中显示用户文件以进行拖放

> ID：10214909
> 
> 赞同：1
> 
> 时间：2012-04-18T17:42:24.687
> 
> 标签：java, javascript, jquery, html, canvas

我正在尝试找到创建应用程序的方法，在该应用程序中我可以与用户文件系统连接并在 div 中显示他自己的目录，从而允许选择文件并放入 HTML5 区域。

主要问题是如何获取目录树，所有与拖放HTML5相关的问题都解决了。我想象这个应用程序的方式是，左侧是一个 div，您可以在其中看到树，右侧是一个可放置区域，以便用户可以浏览他的磁盘并上传文件。

任何建议，或贡献，或任何值得欢迎的东西。我认为这是可以做到的！这将很难，但我希望我能解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:44:08.763

您无法访问任何目录树。安防措施

# java - 在 Java 编程中使用 String 被认为是邪恶的吗？

> ID：10214914
> 
> 赞同：0
> 
> 时间：2012-04-18T17:42:41.280
> 
> 标签：java, string

我试图了解`String`在编程过程中使用它是否有用，我们小组中普遍认为使用`String`是不好的做法并且`enum`是可行的方法，但我无法找到足够的理由投反对票`String`并且不胜感激关于这个问题的想法和例子？

**更新：**

我应该将我的问题重新表述为在什么情况下使用`String`是邪恶的，以及`dataType`你应该使用什么替代方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T17:46:23.273

`String`是有用的，也是表示文本数据的最佳方式。**不应**使用字符串来表示：

*   可枚举的相关常量（使用`enum`）。例如 no `"cm"`, `"mm"`,`"km"`作为单位。对这些元素使用`Unit`枚举。`Unit.cm`， ETC。
*   数字（使用`int`,`double`等）
*   日期（使用`Date`，`Calendar`或 joda-time `DateTime`）
*   密码 -`char[]`改为使用，因为 JVM 对字符串的处理方式不同，并且攻击者可能会访问敏感信息。
*   二进制内容。如果您有 a `byte[]`，则不应使用 a`new String(bytes)`来传输它 - 您可以通过这种方式丢失信息。字符串*可以*表示二进制内容，如果它被编码 - 在 Base64、Hex 等中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:55:42.060

如果你问是否

```
...
public enum Settings {
    FAST,SLOW,PRECISE
}
...
if(setting == Settings.FAST) {
...
} 
```

好于

```
...
if("FAST".equals(setting)) {
...
}
... 
```

那么答案是肯定的，枚举更好，因为您可以与 == 而不是 .equals() 进行比较，这可能会使可执行文件更快并且更容易编写，而且您可以使用 switch where 字符串值你不能，并且使用 enum如果您检查的是字符串值而不是枚举标志，您可以利用像 NetBeans 或 Eclipse 这样的优秀 IDE 来帮助您避免通过 IDE 和编译器的拼写错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:49:24.553

`java.lang.String`不是邪恶的。事实上，它可能是 java 中最常用的类（免责声明：我没有数据支持它）。但是，有一些注意事项：

*   加密货币。在处理加密密码时，有一个实例应该优先使用 char 数组而不是字符串：

> 将密码收集并存储在 java.lang.String 类型的对象中似乎是合乎逻辑的。但是，需要注意的是：String 类型的对象是不可变的，即没有定义允许您在使用后更改（覆盖）或清零 String 内容的方法。此功能使 String 对象不适合存储用户密码等安全敏感信息。您应该始终将安全敏感信息收集并存储在 char 数组中。

-- [http://docs.oracle.com/javase/1.4.2/docs/guide/security/jce/JCERefGuide.html#PBEEx](http://docs.oracle.com/javase/1.4.2/docs/guide/security/jce/JCERefGuide.html#PBEEx)

*   连接字符串时，您可能应该使用`StringBuilder`since `java.lang.String`is immutable 并且为每个连接制作新副本。

*   当存在更专业的类时，例如枚举、数字、日期等，比字符串更喜欢它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T17:49:51.230

使用的一个不幸方面`String`是，在 JDK 7 之前，它不能在`switch...case`语句中工作。您必须（如果`String`为此目的使用 s）`if...else if...else`改为使用。并且您必须使用`.equals()`而不是进行测试`==`，并且在某些情况下您可能希望使用`.equalsIgnoreCase()`替代。所有这些都使我更喜欢`enum`这种`String`情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T17:56:37.843

这取决于。出乎意料并假设此列表并不详尽。

优点：
[Java SE 7：String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html) - String 类是不可变的，因此可以共享字符串（这也意味着线程安全）。
[Java 中的字符串池](https://stackoverflow.com/questions/1881922/questions-about-javas-string-pool)- 字符串被池化，因此在重用它们时很有效。

`+`缺点：用于多个字符串时，Concat 操作效率不高。最好使用 a `StringBuilder`or a `StringBuffer`(thread-safe) or `Ropes`. 看到这个：[IBM：绳索](https://www.ibm.com/developerworks/java/library/j-ropes/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T18:32:21.613

字符串本身并不邪恶。

我认为当你使用它作为你的主要抽象时，伤害就来了。您可以在代码中看到它，其中有许多明显相关但分散在整个代码中的原语（例如字符串、整数、数组、数据结构）。

在这些情况下，更好的解决方案是将一起属于的数据项封装到一个可感知的对象中。

# android - 拨打 USSD 代码？

> ID：10214915
> 
> 赞同：8
> 
> 时间：2012-04-18T17:42:43.947
> 
> 标签：android

当我直接从听筒拨打 a 时，它可以工作。例如：*123# 获取数字的余额。

但是，当我尝试在应用程序中做同样的事情时，我遇到了问题。拨号器中显示的号码缺少结尾的#。我在我的应用程序中需要它我希望我的应用程序应该支持所有 USSD 代码。

有没有办法在应用程序中拨打ussd代码？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-18T17:46:53.080

我不完全确定，但我认为 android 尚不支持 USSD，但是您可以尝试以下解决方法：

```
String encodedHash = Uri.encode("#");
String ussd = "*" + encodedHash + "123" + encodedHash;
startActivityForResult(new Intent("android.intent.action.CALL",
Uri.parse("tel:" + ussd)), 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-12T10:29:56.050

```
String encodedHash = Uri.encode("*123#");
startActivityForResult(new Intent("android.intent.action.CALL",
Uri.parse("tel:" + encodedHash)), 1); 
```

# slider - 我怎样才能使 Nivo Slider 的过渡与文本下方 - 不是 CAPTION？

> ID：10214916
> 
> 赞同：0
> 
> 时间：2012-04-18T17:42:44.547
> 
> 标签：slider, transition, caption, nivo-slider

好的，所以我正在为我为我的学校做的一个网站开发这个 Nivo Slider……我想知道是否有可能让 Nivo Slider 用下面的文本进行转换。不一定是标题，但就像当 Nivo 转到新图像时，下面的文本将转到另一段文本。我的 Nivo 可以在所有浏览器中运行，但我很好奇是否有人知道这是否可能。我尝试将大文本放在标题中，但它只是让标题遍布整个 Nivo，而不是像我想要的那样在图像下方..

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:47:10.603

您可以使用标题选项将文本放在图库下方，然后使用 CSS 将其显示在下方。

只需进入`nivo-slider.css`文件并将类更改`position`为.`nivo-caption``relative`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:09:15.053

是的，这是可能的，通过简单的 css 修改，您可以在滑块下显示标题，它们会与图像同时消失。

亲切的问候

# shell - 在日志文件中获取 stdout+stderr

> ID：10214917
> 
> 赞同：0
> 
> 时间：2012-04-18T17:42:47.990
> 
> 标签：shell, redirect, stdout, stderr, csh

我正在尝试实现一些我的逻辑认为无法完成的事情。但我需要你的帮助来理解为什么不能。

***问题的简短版本***

***是否可以在不使用文件重定向（ >& 或 tee ）的情况下在 csh 中记录脚本的 stdout+stderr 。***

* * *

***问题详解***

我有一个 csh 脚本（script1）的要求，我不允许使用文件重定向。（我会在一段时间内给出原因）所以这意味着我不能使用类似的东西

```
echo just checking >& logfile 
```

因此我不能使用这个或 tee 来创建我的日志文件。我还有另一个脚本（script2），它是一个顶级脚本。

我可以在独立模式下或通过 script2 运行 script1。

**在任何一种情况下，我都需要在日志文件中创建 script1 的日志（stdout+stderr）。**

有两个可能（但不完整）的选项

在 script2 中写下这一行

```
./script1 >& logfile 
```

但是，当 script1 以独立模式运行时，我无法将 script1 记录在日志文件中。

另一种选择是在 script1 中使用文件重定向，如下所示：

```
echo test starting >> logfile
echo test over 
```

在这种情况下，有两个缺点： 1）“测试结束”打印在“测试开始”之前，即命令日志的出现顺序不确定。2) 如果我打算涵盖整个脚本，那么在每个语句之后放置 >>& 会很乏味。

现在有没有其他方法，我可以得到我需要的东西。也就是说，我可以在没有文件重定向的情况下运行 script1，并且仍然可以在日志文件中记录其 stdout+stderr。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:59:57.597

你提到了 csh，所以这可能对你没有帮助。另一方面，它可能会促使您停止将 csh 用于脚本，这是众所周知的不适合的任务。在 sh 中，您可以简单地执行以下操作：

```
#!/bin/sh
exec > logfile 2>&1
echo foo 
```

将 foo（以及所有后续命令的输出和错误）写入日志文件

# c++ - C++ 如何从 GUID 获取 Windows 图标？

> ID：10214918
> 
> 赞同：1
> 
> 时间：2012-04-18T17:42:50.070
> 
> 标签：c++, windows, icons, guid, windows-shell

如何在 C++ 中获取与 shell GUID 关联的图标？

像这样：{B2C761C6-29BC-4f19-9251-E6195265BAF1}

这个 guid 用于颜色管理快捷方式，我想获取它的图标，是否有 API 函数可以做到这一点？

# zend-framework - Zend Framework 评论框

> ID：10214923
> 
> 赞同：0
> 
> 时间：2012-04-18T17:42:56.770
> 
> 标签：zend-framework

我有一个应用程序，您可以在其中查看俱乐部，所有俱乐部都显示为链接，然后您单击俱乐部链接并进入俱乐部描述页面。在这个页面上是俱乐部的详细信息和一个评论框，供用户添加关于俱乐部的评论。

我遇到的问题是当我添加评论时。我有获取俱乐部 ID 和显示信息的操作，评论操作都在 clubDescriptionController 的索引操作中，因此它们相互冲突。

我的第二个问题是在我的数据库中，我在评论表中有一个 club_id（外键链接到俱乐部表“id”的主键）字段与用户正在评论的俱乐部相关，所以当用户评论时。评论链接到他们正在访问的页面的俱乐部，在我的代码中，我需要修复 getClub 操作的错误和评论操作冲突。但在那之后，我需要一个正确的方向，即如何让将俱乐部 ID 发布到评论数据库的 club_id 字段中的评论。这就是漫步的全部内容，谢谢您的时间，下面是代码。如果您需要更多信息，请随时询问。

俱乐部描述控制器：

```
<?php

class ClubDescriptionController extends Zend_Controller_Action
{

public function indexAction()
{
   $this->authoriseUser();
   //get id param from index.phtml (view)
   $id = $this->getRequest()->getParam('club_id');
   //get model and query by $id
   $clubs = new Application_Model_DbTable_Clubs();
   $clubs = $clubs->getClub($id);
   //assign data from model to view [EDIT](display.phtml)
   $this->view->clubs = $clubs;

    //action for the comments submission
   $form = new Application_Form_Comment();
    $form->submit->setLabel('Comment');
    $this->view->form = $form;
    if ($this->getRequest()->isPost()) {
        $formData = $this->getRequest()->getPost();
        if ($form->isValid($formData)) {
        $comment = new Application_Model_DbTable_Comments();
        $comment->addComment($form->getValue('comment'));
            $this->_helper->redirector('index');
        } else {
            $form->populate($formData);
        }
    }
} 
```

意见表：

```
<?php

class Application_Form_Comment extends Zend_Form
{

    public function init()
    {
        $this->setName('comment');
        $id = new Zend_Form_Element_Hidden('id');
  $id->addFilter('Int');
        $comment = new Zend_Form_Element_Text('comment');
        $comment->setRequired(true)
                ->addFilter('StripTags')
                ->addFilter('StringTrim')
                ->addValidator('NotEmpty');
        $submit = new Zend_Form_Element_Submit('submit');
        $submit->setAttrib('id', 'submitbutton');
        $this->addElements(array($id, $comment, $submit));
    }
} 
```

评论型号：

```
<?php

class Application_Model_DbTable_Comments extends Zend_Db_Table_Abstract
{

protected $_name = 'comments';

public function getComment($id) {
    $id = (int) $id;
    $row = $this->fetchRow('id = ' . $id);
    if (!$row) {
        throw new Exception("Count not find row $id");
    }
    return $row->toArray();
}

public function addComment($comment) {
    $data = array(
        'comment' => $comment,
        );
    $this->insert($data);
    }   
} 
```

风景：

```
<div id="comments-holder">
    <p id="comments-title">Comments</p>
    <?php
        echo $this->form;
    ?>
</div> 
```

在我提交评论时，它被添加到数据库中，但出现以下错误：

```
An error occurred
Application error
Exception information:

Message: SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`manchesternightlife`.`comments`, CONSTRAINT `comments_ibfk_1` FOREIGN KEY (`club_id`) REFERENCES `clubs` (`id`))
Stack trace:

#0 /Users/R_iMac/Sites/MN/library/Zend/Db/Statement.php(300): Zend_Db_Statement_Pdo->_execute(Array)
#1 /Users/R_iMac/Sites/MN/library/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#2 /Users/R_iMac/Sites/MN/library/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('INSERT INTO `co...', Array)
#3 /Users/R_iMac/Sites/MN/library/Zend/Db/Adapter/Abstract.php(575): Zend_Db_Adapter_Pdo_Abstract->query('INSERT INTO `co...', Array)
#4 /Users/R_iMac/Sites/MN/library/Zend/Db/Table/Abstract.php(1075): Zend_Db_Adapter_Abstract->insert('comments', Array)
#5 /Users/R_iMac/Sites/MN/application/models/DbTable/Comments.php(25): Zend_Db_Table_Abstract->insert(Array)
#6 /Users/R_iMac/Sites/MN/application/controllers/ClubDescriptionController.php(30): Application_Model_DbTable_Comments->addComment('hey')
#7 /Users/R_iMac/Sites/MN/library/Zend/Controller/Action.php(516): ClubDescriptionController->indexAction()
#8 /Users/R_iMac/Sites/MN/library/Zend/Controller/Dispatcher/Standard.php(295): Zend_Controller_Action->dispatch('indexAction')
#9 /Users/R_iMac/Sites/MN/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#10 /Users/R_iMac/Sites/MN/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
#11 /Users/R_iMac/Sites/MN/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#12 /Users/R_iMac/Sites/MN/public/index.php(28): Zend_Application->run()
#13 {main}  

Request Parameters:

array (
  'controller' => 'club-description',
  'action' => 'index',
  'club_id' => '1',
  'module' => 'default',
  'id' => '0',
  'comment' => 'hey',
  'submit' => 'Comment',
) 
```

谢谢

里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T18:01:49.320

所以你应该把 $club_id 给 addComment

```
public function addComment($comment, $club_id) {
 $data = array(
     'comment' => $comment,
     'club_id' => $club_id,
     'comment_date' => NOW(),
     );
 $this->insert($data);
 }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:03:23.060

第一次获得您的 id 时，使用它在您的数据库中查找俱乐部信息并设置视图。提交表单后，您现在将 id 存储在表单字段中。我认为您需要再次查询数据库并使用新的 id 字段重置视图（这次在 ispost 条件内）。当您提交表单而不是将其作为表单元素发送时，或者找到一种方法再次发送 id 作为参数。

方法一：'if ($form->isValid($formData)) {

```
$id = $form->getValue('id'); 
$clubs = $clubs->getClub($id);
$this->view->clubs = $clubs; 
```

这不是最雄辩的方式，但我认为这会奏效。

方法2：之前没有尝试过，但它可能会起作用。$form->submit->setLabel('Comment'); 之后

```
$form->setAction('index/club_id/'.$id); 
```

# vbscript - vbs：使用迭代脚本显示所有文件夹子文件夹？

> ID：10214927
> 
> 赞同：1
> 
> 时间：2012-04-18T17:43:05.637
> 
> 标签：vbscript

是否可以使用迭代脚本获取目录的所有子文件夹（以及子文件夹中的子文件夹......）？

我已经创建了它递归但我不可能迭代：/

任何人的想法：O

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:50:27.780

您必须实现递归子/函数免费为您提供的堆栈：

```
Dim sSDir : sSDir = "..."
walkDirIter goFS.GetFolder(sSDir)

Sub walkDirIter(oDir)
  Dim dicStack : Set dicStack = CreateObject("Scripting.Dictionary")
  Dim nCur     : nCur         = dicStack.Count
  Set dicStack(nCur) = oDir
  Do Until nCur >= dicStack.Count
     Dim oElm
     For Each oElm In dicStack(nCur).Files
         WScript.Echo oElm.Path
     Next
     For Each oElm In dicStack(nCur).SubFolders
         Set dicStack(dicStack.Count) = oElm
     Next
     nCur = nCur + 1
  Loop
End Sub ' walkDirIter 
```

您可以查看[这种递归方法](https://stackoverflow.com/a/10210862/603855)来进行上下文/比较。

# c# - 图片不显示，asp:repeater

> ID：10214931
> 
> 赞同：2
> 
> 时间：2012-04-18T17:43:18.317
> 
> 标签：c#, asp.net

我试图用转发器从我的数据库中显示名称、描述和图片。名称和描述可以正常工作，但图像不会显示。这些图像位于我项目的一个文件夹中，我正在尝试使用存储在数据库“路径”列中的字符串来访问它们。

哦，但是如果我查看浏览器的源代码，src="" 看起来不错，如果我将 src 粘贴到它，我什至可以在浏览器中查看图片。

这是我的代码：

```
<head runat="server">
<title></title>

<style type="text/css">
    .bilder {width:300;
             height:200;
             margin: 10px;
             border: 1px solid black;
             }
</style>

</head>
<body>
<form id="form1" runat="server">

<div>
    <asp:Repeater runat="server" ID="minRepeater">

        <ItemTemplate>
            <div class="wrapper">
                <h1><%# DataBinder.Eval(Container.DataItem, "Name") %></h1>
                <span id="desc"><%# DataBinder.Eval(Container.DataItem, "Description") %></span><br />
                <img src="<%# DataBinder.Eval(Container.DataItem, "Path") %>" alt="test" class="bilder" />
                <asp:Image ID="Image1" CssClass="bilder" ImageUrl='<%# DataBinder.Eval(Container.DataItem, "Path")%>' runat="server" />
            </div>
        </ItemTemplate>
    </asp:Repeater>
</div> 
```

和代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection();
        con.ConnectionString = connectionstring;

        SqlCommand com = new SqlCommand();
        com.CommandText = "SELECT * FROM Pictures";
        com.Connection = con;

        SqlDataAdapter ad = new SqlDataAdapter();
        ad.SelectCommand = com;

        DataTable dt = new DataTable();
        ad.Fill(dt);

        Response.Write(dt.Rows.Count);

        minRepeater.DataSource = dt;
        minRepeater.DataBind();
    } 
```

（是的，我知道我的代码不安全。一点也不。）

这是它在浏览器中的外观： ![在此处输入图像描述](../Images/d57599381ee047ec205f12c28ded9854.png)

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:45:44.210

您可以在 Firebug 或 Chrome 中运行它，看看是否找不到图像 (404) 及其路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:54:19.933

你的路径像`C:\\Images\etc.`..吗？如果你得到了`"Not allowed to load local resource"`，**你应该用相对路径尝试你的路径。**如果你在网站中没有它们，你应该将图像复制到站点并呈现该路径。您正面临安全问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T17:56:36.407

您收到的错误`Not allowed to load local resource`听起来像是您正在尝试使用本地系统上的路径进行加载。尝试使用`Server.MapPath`文件的相对路径，例如：

```
Server.MapPath("~/images/my-image.jpg"); 
```

# objective-c - 自定义 NSURLProtocol 应该跟随重定向本身，还是让其客户担心？

> ID：10214933
> 
> 赞同：10
> 
> 时间：2012-04-18T17:43:26.357
> 
> 标签：objective-c, ios, macos, redirect, nsurlprotocol

NSURLProtocolClient协议包含一个方法，[NSURLProtocol](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSURLProtocolClient_Protocol/Reference/Reference.html)`-URLProtocol:wasRedirectedToRequest:redirectResponse:`子类的实例应该用来告诉 URL 协议客户端请求已被重定向。但是，我不确定 URL 协议是否应该尝试从重定向的 URL 中检索资源，或者让客户端对该资源发出新请求。

谁能告诉我在重定向的情况下原始 URL 协议对象应该做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T01:39:41.667

为了回答这个问题，我只是在我的 URL 协议实现中删除了重定向响应中给出的链接之后的代码。如果连接客户端创建一个新连接来加载新 URL，这应该很明显。事实证明，什么都没有发生——客户端从不创建新连接，也没有遵循重定向。由此我不得不得出结论，URL 协议本身应该尝试加载重定向响应中给出的 URL。

# php - 硬盘上的旧 PHP 会话文件

> ID：10214934
> 
> 赞同：2
> 
> 时间：2012-04-18T17:43:29.423
> 
> 标签：php, windows, session

好的，请原谅我可能在这里很厚，或者我缺乏对 StackOverflow 的研究，但目前面临着使实时服务器稳定的压力，因此正在研究各种选项。

我们注意到在我们的服务器（Windows 2008/IIS7）上，tmp 文件夹有大约一百万个会话文件（垃圾收集似乎不起作用），所以这可能会导致我的 PHP 网站上的加载时间问题，就像过去一样 2/ 3 周我注意到负载问题。

我的理论是，当 PHP 创建一个会话并想要阅读它时，它必须通过数百万条记录才能找到我的会话。

任何想法，很高兴被告知我的理论完全是废话。

* * *

更新至今
清除超过一百万个会话文件似乎减轻了 HDD 的压力，并且与以前相比，PHP 站点的响应速度似乎更快。等待负载增加以查看这些会话文件是否导致初始问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T17:52:43.577

由于这是一个 I/O 操作，它在访问 tmp 目录中的会话时会变慢。检查您的 php ini 设置以获取[http://php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime](http://php.net/manual/en/session.configuration.php#ini.session.gc-maxlifetime)

我在服务器故障检查中看到了类似的问题 [https://serverfault.com/questions/373024/php-processes-run-one-at-a-time-always-taking-100-of-one-core](https://serverfault.com/questions/373024/php-processes-run-one-at-a-time-always-taking-100-of-one-core)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:56:50.373

php 5.4 提供了一个 sessionhandler 类来扩展，以便会话可以存储在键值扩展、数据库或其他任何东西中。对于较旧的 php 版本，也有类似的功能。

如果会话似乎是一个瓶颈，则应考虑这一点。

# php - 在后台从外部源下载大型 XML 文件，如果下载不完整，可以继续下载

> ID：10214940
> 
> 赞同：1
> 
> 时间：2012-04-18T17:44:13.820
> 
> 标签：php, file, curl, stream

## 一些背景资料

我想下载的文件在外部服务器上保存一周，并且每小时都会在那里创建一个新的 XML 文件（10-50mb 大），名称不同。我希望每次加载我的网站时在后台将大文件逐块下载到我的服务器，每次可能 0.5mb，然后在下次其他人加载网站时恢复下载。这将要求我的网站每小时至少有 100 个页面加载以保持更新，因此如果可能的话，每次可能会增加更多的文件。我研究**了 simpleXML** , **XMLreader** , **SAX parsing**，但无论我做什么，直接解析文件似乎需要很长时间，因此我想要一种不同的方法，即像上面描述的那样下载它。

如果我下载一个 30mb**大的 XML 文件**，我可以在 3 秒内使用 XMLreader 在本地解析它（25 万次迭代），但是当我尝试从外部服务器执行相同操作时，将其限制为 5 万次迭代，它使用 15 秒来读取那个小文件部分，因此似乎无法直接从该服务器解析它。

## 可能的解决方案

我认为最好使用**cURL**。但话又说回来，也许**fopen()**、**fsockopen()**、**copy()**或**file_get_contents()**是要走的路。我正在寻找关于使用哪些函数来实现这一点的建议，或者关于如何将 50mb 外部 XML 文件解析为**mySQL**数据库的不同解决方案。

我怀疑每小时执行一次**Cron**作业是最好的解决方案，但我不确定虚拟主机公司对它的支持程度如何，我也不知道如何做这样的事情。但如果这是最好的解决方案，而且大多数人都这么认为，我也必须在该领域进行研究。

如果在后台运行的**java applet/javascript**是一个更好的解决方案，那么当涉及到那里的函数/方法/库时，请指出正确的方向。

# 概括

*   在后台下载部分文件并在每次加载我的网站直到完成时恢复下载的最佳解决方案是什么？
*   如果即使尝试上述解决方案也很愚蠢，您会使用什么语言/软件来实现相同的目标（每小时下载一个大文件）？

提前感谢所有答案，对于长篇大论/问题深表歉意。

编辑：我最终使用此解决方案来获取具有 cron 作业调度 php 脚本的文件。它检查我的文件夹中已有的文件，生成过去四天可能下载的列表，然后下载下一个 XML 文件。

```
<?php
$date = new DateTime();
$current_time = $date->getTimestamp();
$four_days_ago = $current_time-345600;

echo 'Downloading: '."\n";
for ($i=$four_days_ago; $i<=$current_time; ) {
    $date->setTimestamp($i);

    if($date->format('H') !== '00') {
        $temp_filename = $date->format('Y_m_d_H') ."_full.xml";
        if(!glob($temp_filename)) {
            $temp_url = 'http://www.external-site-example.com/'.$date->format('Y/m/d/H') .".xml";
            echo $temp_filename.' --- '.$temp_url.'<br>'."\n";
            break; // with a break here, this loop will only return the next file you should download
        }
    }
    $i += 3600;
}

set_time_limit(300);
$Start = getTime(); 

$objInputStream = fopen($temp_url, "rb");
$objTempStream = fopen($temp_filename, "w+b");

stream_copy_to_stream($objInputStream, $objTempStream, (1024*200000));

$End = getTime();
echo '<br>It took '.number_format(($End - $Start),2).' secs to download "'.$temp_filename.'".';

function getTime() {
    $a = explode (' ',microtime());
    return(double) $a[0] + $a[1];
}
?> 
```

编辑2：我只是想告诉你，有一种方法可以按照我的要求做，只是在我的情况下它不起作用。有了我需要的数据量，该网站每小时必须有 400 多名访问者才能正常工作。但是对于较少量的数据，有一些选择；[http://www.google.no/search?q=poormanscron](http://www.google.no/search?q=poormanscron)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:52:51.530

您需要有一个计划的离线任务（例如，cronjob）。您所追求的解决方案是完全错误的。

可能工作的最简单的事情是您每小时运行的 php 脚本（很可能通过 cron 安排）下载文件并处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T20:38:55.157

你可以试试 fopen：

```
<?php
$handle = fopen("http://www.example.com/test.xml", "rb");
$contents = stream_get_contents($handle);
fclose($handle);
?> 
```

# java - 未重新加载配置

> ID：10214942
> 
> 赞同：1
> 
> 时间：2012-04-18T17:44:20.953
> 
> 标签：java, xml-configuration

我的配置管理类有问题，它没有重新加载。

让我向您展示我的部分代码：

```
public class ConfigurationManager extends XMLConfiguration
{
   private static final Logger log = LoggerFactory.getLogger(ConfigurationManager.class);

   private static final long serialVersionUID = 1L;
   public static final String CONFIG_FILE_PATH = "/config.xml";
   private static volatile ConfigurationManager instance = null;
   private static Object lock = new Object();

   // Instance management methods
   public static ConfigurationManager getInstance()
   {
      return getInstance(CONFIG_FILE_PATH);
   }

   public static ConfigurationManager getInstance(String cfg)
   {
      if(instance == null)
      {
         synchronized(lock)
         {
            if(instance == null)
            {
               try
               {
                  instance = new ConfigurationManager(cfg);
                  instance.dumpConfigurationToLog();
               }
               catch(Exception e)
               {
                  log.error("Error calling getInstance. Method params", e);
               }
            }
         }
      }
      return instance;
   }

   private Object loadedCfg;

   private int reloadInterval;

   private void dumpConfigurationToLog()
   {
      ByteArrayOutputStream bos = new ByteArrayOutputStream();

      try
      {
         this.save(bos);
         bos.flush();
      }
      catch(Exception e)
      {
         log.error("Error calling dumpConfigurationToLog. Method params", e);
      }

   }

   @Override
   public void configurationChanged(ConfigurationEvent event)
   {
      log.info("Enter Method configurationChanged params: {}", event);
      if(event.isBeforeUpdate() == false)
      {
         makeUpdates();

         log.info("Configuration file: {} has changed and reloaded...", loadedCfg);
         dumpConfigurationToLog();
      }
      log.info("Return Method configurationChanged");
   }

   private void updateReloadInterval()
   {
      int newReloadInterval = getInt("global.reloadInterval") * 1000;
      if(reloadInterval != newReloadInterval)
      {
         reloadInterval = newReloadInterval;
         if(getReloadInterval() > 0)
         {
            FileChangedReloadingStrategy reloadStrategy = new FileChangedReloadingStrategy();
            reloadStrategy.setRefreshDelay(getReloadInterval());
            this.setReloadingStrategy(reloadStrategy);
         }
         else
            if(getReloadInterval() == 0)
            {
               this.setReloadingStrategy(new InvariantReloadingStrategy());
            }
            else
            {
               log.error("Invalid reload interval for ConfigurationManager: {}", getReloadInterval());
            }
      }
   }

   private ConfigurationManager(String cfgFile) throws Exception, ConfigurationException
   {
      super();
      loadedCfg = cfgFile;
      if(System.class.getResource(cfgFile) != null)
         this.setURL(System.class.getResource(cfgFile));
      else
         this.setURL(getClass().getResource(cfgFile));
      this.load();
      makeUpdates();
      this.addConfigurationListener(this);
      this.setThrowExceptionOnMissing(true);
   }

   private void makeUpdates()
   {
      updateReloadInterval();
   }

   public int getReloadInterval()
   {
      return reloadInterval;
   }
} 
```

现在代码工作得很好，我可以读取配置文件，并且可以毫无问题地使用它，问题是它永远不会在配置更改时重新加载。我试过设置断点等，但它从来没有进入 configurationChanged 方法。

有人看到这里有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:50:12.403

好吧，经过测试和分析，我得出了这个结论，为了调用 configurationChanged，我需要进行显式调用以从 configuration 中获取值。那是我没有做的事情。

当我这样做时，事情就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:57:29.877

你`makeUpdates()`在设置你的`ConfigurationListener`.

此外，调用`load()`并不能保证 Event 会被触发。

最后，这个扩展类有什么实际调用`addProperty()`等吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T18:08:35.713

只有一个小问题：[资源包](http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html)被缓存，你可以调用`clearCache`，不幸的是不是每个包而是每个类加载器。

# javascript - 使用带有 .change() 事件的 input type="file" 字段上传文件并不总是在 IE 和 Chrome 中触发

> ID：10214947
> 
> 赞同：22
> 
> 时间：2012-04-18T17:44:46.033
> 
> 标签：javascript, jquery, internet-explorer, firefox, google-chrome

我有一段简单的代码来上传文件：

```
$(document).ready(function () {
    $(".attachmentsUpload input.file").change(function () {
        $('form').submit();
    });
});

<form class="attachmentsUpload" action="/UploadHandler.ashx" method="post" enctype="multipart/form-data">
    <input type="file" class="file" name="file" />
</form> 
```

当我单击输入然后在对话框中选择一个文件时，我正在使用 ajax 提交这个文件。这不是这里重要的部分。重要的部分是，当我在对话框中第二次选择同一个文件时，就在提交第一个文件之后，.change() 事件不会在 IE 和 Chrome 中触发。但是当我选择不同的文件时，事件会触发并正常工作。在 Firefox 下，它一直在触发。

如何解决这个问题，按预期工作（如在 Firefox 中）？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-18T17:51:15.707

### 描述

发生这种情况是因为如果您再次选择相同的文件，输入字段（选定的文件路径）的值不会改变。

您可以将`onChange()`事件中的值设置为空字符串，并且仅当该值不为空时才提交表单。看看我的示例和这个[jsFiddle Demonstration](http://jsfiddle.net/TmUmG/)。

### 样本

```
$(".attachmentsUpload input.file").change(function () {
    if ($(".attachmentsUpload input.file").val() == "") {
        return;
    }
    // your ajax submit
    $(".attachmentsUpload input.file").val("");
}); 
```

## 更新

无论出于何种原因，这在 IE9 中都不起作用。您可以替换元素以重置它们。 **在这种情况下，您需要 jQuery`live()`来绑定事件，因为您的输入字段将动态（重新）创建。** 这将适用于所有浏览器。

我在stackoverflow answer上找到了这个解决方案[Clearing input type='file' using jQuery](https://stackoverflow.com/questions/1043957/clearing-input-type-file-using-jquery)

```
$(".attachmentsUpload input.file").live("change", function () {
    if ($(".attachmentsUpload input.file").val() == "") {
        return;
    }
    // get the inputs value
    var fileInputContent = $(".attachmentsUpload input.file").val();
    // your ajax submit
    alert("submit value of the file input field=" + fileInputContent);
    // reset the field
    $(".attachmentsUpload input.file").replaceWith('<input type="file" class="file" name="file" />');
});​ 
```

### 更多信息

*   [jQuery.live()](http://api.jquery.com/live/)
*   [jQuery.replaceWith()](http://api.jquery.com/replaceWith/)

## 查看我更新[的 jsFiddle](http://jsfiddle.net/TmUmG/1/)

**注意：** [`live`](http://api.jquery.com/live/)现在从更高版本的 jQuery 中**删除。**请使用[`on`](http://api.jquery.com/on/)而不是`live`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:57:25.540

根据 dknaack 的回答，线索是**使用 jquery live 绑定更改事件并在提交后重置输入字段**：

```
$(document).ready(function () {
    $(".attachmentsUpload input.file").change(function () {
        $('form').submit();  /* sync submit */
        $(".attachmentsUpload input.file").replaceWith('<input type="file" class="file" name="file" />');
    });
}); 
```

必须**在提交**事件完成后执行重置。当提交为**async**时，例如在**ajax 成功**事件中重置该字段。

```
$(document).ready(function () {
    $(".attachmentsUpload input.file").change(function () {
        $('form').submit();  /* async submit */
    });
});

.ajaxForm({
    ...
    success: function (result) {
        // reset the field - needed for IE to upload the same file second time                    
        $this.find("input.file").replaceWith('<input type="file" class="file" name="file" />');
    }
}); 
```

# javascript - 在 JS 中，如何使用字符串来定义 JS 对象参数？

> ID：10214949
> 
> 赞同：1
> 
> 时间：2012-04-18T17:44:53.593
> 
> 标签：javascript

我有一个这样定义的函数：

```
var myObject = new Object();

    function myFunction(someString){

         myObject.someString= 0;

    } 
```

问题被`someString`视为字符串`someString`而不是该变量的值。

所以，在我多次使用不同`someString`的函数后，我想获得一个对象，其中包含每个 someString 的所有值。

但是当我遍历那个对象时，我得到的唯一结果是`someString : 0`

我想得到：

```
John : 0
James : 0
Alex : 0 etc.... 
```

我怎么做？非常感谢提前

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T17:46:17.583

您可以使用关联数组方法：

```
var someString = 'asdf';

myObject[someString] = 0; // {asdf: 0}
myObject['foo'] = 'bar'; 
```

您基本上可以使用任何字符串来检索您的方法/参数。

```
var i = 1;
myObject['test' + i] = i + 1; // gives us {test1: 2} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:53:00.620

试试这个

```
var myObject = new Object();
    function myFunction(someString){
        myObject[someString]= 0;
    } 
```

# ruby-on-rails - 如何在rails 3中保存到数据库之前格式化值

> ID：10214950
> 
> 赞同：5
> 
> 时间：2012-04-18T17:44:57.787
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有一个带有利润字段的用户模型。利润字段是 DECIMAL (11,0) 类型。我在表单上有一个屏蔽输入，允许用户输入 1,000 美元之类的东西。我想格式化该值并从中删除除数字之外的所有内容，这样我将保存 1000 个。这是我到目前为止所拥有的：

```
class User < ActiveRecord::Base
  before_save :format_values

  private

  def format_values
    self.profit.to_s.delete!('^0-9') unless self.profit.nil?
  end
end 
```

但它一直在数据库中保存0。看起来它在我的格式化功能之前将其转换为十进制。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T17:54:23.863

试试这个：

```
def profit=(new_profit)
  self[:profit] = new_profit.gsub(/[^0-9]/, '')
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-18T20:02:45.973

首先，这个：

```
def format_values
  self.profit.to_s.delete!('^0-9') unless self.profit.nil?
end 
```

和这个差不多：

```
def format_values
    return if(self.profit.nil?)
    p = self.profit
    s = p.to_s
    s.delete!('^0-9')
end 
```

因此，没有理由期望您的`format_values`方法对`self.profit`.

您当然可以更改`format_values`以将处理后的字符串分配给，`self.profit`但这无济于事，因为您的清理逻辑位于错误的位置，它将在变成零*后执行。* `'$1,000'`

当你给一个属性赋值时，ActiveRecord 会沿途应用一些类型转换。当您尝试转换`'$1,000'`为数字时会发生什么？你当然得到零。如果您在控制台中玩耍，您可以看到这种情况发生：

```
> a = M.find(id)
> puts a.some_number
11
> a.some_number = 'pancakes'
 => "pancakes"
> puts a.some_number
0
> a.some_number = '$1,000'
 => "1,000"
> puts a.some_number
0
> a.some_number = '1000'
 => "1000"
> puts a.some_number
1000 
```

因此，您的数据清理必须在数据进入模型实例之前进行，因为一旦 AR 掌握了价值，您*就会*`'$1,000'`变成`0`一切，一切都将丢失。我将逻辑放在控制器中，控制器的工作是在外部世界和模型之间进行调解，数据格式化和修改当然算作调解。所以你可以在你的控制器中有这样的东西：

```
def some_controller
    fix_numbers_in(:profit)
    # assign from params as usual...
end

private

def fix_numbers_in(*which)
    which.select { |p| params.has_key?(p) }.each do |p|
        params[p] = params[p].gsub(/\D/, '') # Or whatever works for you
    end
end 
```

然后，在 ActiveRecord 弄脏你的数据并把事情弄得一团糟之前，一切都会变得干净。

您可以通过覆盖`profit=`模型中的方法来做类似的事情，但这实际上不是模型的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:48:05.837

```
 def format_values
    self.profit.to_d!
  end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T17:56:14.697

我建议您为这个特定的实例变量@profit 编写自定义设置器：

```
class User
  attr_accessor :profit

  def profit= value    
    @profit = value.gsub(/\D/,'')
  end
end

u = User.new
u.profit = "$1,000"
p u.profit # => "1000" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T18:48:56.707

我建议精确地使用数字的 rails 助手。下面是一些代码。

通用示例：

```
number_with_precision(111.2345, :precision => 1, :significant => true)     # => 100 
```

Rails 代码示例：

```
def profit=(new_profit)
  number_with_precision(self[:profit], :precision => 1, :significant => true)
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-18T19:29:11.340

```
class User < ActiveRecord::Base
  before_save :format_values

  private

  def format_values
    self.profit = profit.to_s.gsub(/\D/,'') if profit
  end
end 
```

# objective-c - 读取（获取）textLabel 的字体大小

> ID：10214952
> 
> 赞同：2
> 
> 时间：2012-04-18T17:45:07.570
> 
> 标签：objective-c, ios

我使用 UITableViewController 的子类。在此表中，我使用带有 style 的标准单元格`UITableViewCellStyleDefault`。此样式包含一个`textLabel`. 我将一些文本分配给它的文本属性，然后我需要文本的长度（以磅为单位）：

```
cell = [tableView dequeueReusableCellWithIdentifier:@"CellID"];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellID"];
}
cell.textLabel.text = @"some text";
textWidth = [cell.textLabel.text sizeWithFont:cell.textLabel.font].width;

NSLog(@"text width = %f",textWidth);
NSLog(@"Font = '%@'",cell.textLabel.font); 
```

但是当我执行这段代码时，它返回的宽度为 0.00000：

```
text width = 0.000000
Font = '<UICFFont: 0x68b4a90> font-family: "Helvetica"; font-weight: bold; font-style: normal; font-size: 0px' 
```

我必须做什么才能获得此文本的实际宽度（通常显示且宽度不为 0）

**编辑：**
当我插入一行代码时`if (cell.font){}`，我得到正确的大小和宽度：

```
cell = [tableView dequeueReusableCellWithIdentifier:@"CellID"];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellID"];
}
cell.textLabel.text = @"some text";

// added line:
if (cell.font){}

textWidth = [cell.textLabel.text sizeWithFont:cell.textLabel.font].width;

NSLog(@"text width = %f",textWidth);
NSLog(@"Font = '%@'",cell.textLabel.font); 
```

显示这个：

```
text width = 98.000000
Font = '<UICFFont: 0x68dc400> font-family: "Helvetica"; font-weight: bold; font-style: normal; font-size: 20px' 
```

但是不推荐使用单元格的吸气剂“字体”。是否有不推荐使用的方法来获取字体大小/文本宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:33:35.740

Same annoying problem. This seemed to work:

```
[cell layoutIfNeeded]; 
```

but doesn't... quite. For some strange reason it resizes the font, from about 17 to about 20.

Use `[UIFont boldSystemFontOfSize:[UIFont labelFontSize]]`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-18T17:50:16.300

可能通过显式设置字体大小，可以获得文本Label的宽度。

CGSize textLabelSize = [textLabel.text sizeWithFont:[UIFont systemFontOfSize:17]];

这是一个可能有帮助的链接：[UITableViewCell中UILabel宽度的动态计算](https://stackoverflow.com/questions/1947970/dynamic-calculation-of-uilabel-width-in-uitableviewcell)

希望能帮助到你！:)

# asp.net - 返回两个值

> ID：10214966
> 
> 赞同：1
> 
> 时间：2012-04-18T17:45:52.900
> 
> 标签：asp.net

我该如何修改这个：

```
if ( reader.GetString( reader.GetOrdinal( "Status" ) ) == "Yes" )
{
    return true; // Return Status + Date it was Completed
}
else
{
    return false; // Return Status + null Date.
} 
```

返回两个值？目前它从数据库返回“状态”列，值为“是”或“否”。我怎样才能让它返回完成日期和状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:08:35.573

```
 private void DoSomething() {
        string input = "test";
        string secondValue = "oldSecondValue";
        string thirdValue = "another old value";
        string value = Get2Values(input, out secondValue, out thirdValue);
        //Now value is equal to the input and secondValue is "Hello World"
        //The thirdValue is "Hello universe"
    }

    public string Get2Values(string input, out string secondValue, out string thirdValue) {
        //The out-parameters must be set befor the method is left
        secondValue = "Hello World";
        thirdValue = "Hello universe";
        return input;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T17:48:20.373

在我看来，最好的方法是为结果编写一个类或一个结构。

否则你可以使用 out-parameter

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T17:56:49.607

这是一个小例子：

```
 private void DoSomething() {
        string input = "test";
        string secondValue = "oldSecondValue";
        string value = Get2Values(input, out secondValue);
        //Now value is equal to the input and secondValue is "Hello World"
    }

    public string Get2Values(string input, out string secondValue) {
        //The out-parameter must be set befor the method is left
        secondValue = "Hello World";
        return input;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-18T20:19:31.120

最好`struct`用两个属性定义 a ，但如果你真的不想这样做，你可以使用通用`KeyValuePair<TKey,TValue>`结构：

```
 KeyValuePair<bool, DateTime?> result;
        if (reader.GetString(reader.GetOrdinal("Status")) == "Yes")
        {
            result = new KeyValuePair<bool, DateTime?>
                (true, DateTime.Now); // but put your date here
        }
        else
        {
            result = new KeyValuePair<bool, DateTime?>
                (false, null);
        }
        // reader.Close()?
        return result; 
```

`KeyValuePair`有两个性质，`Key`和`Value`。Key 将是您的状态，Value 将是您的日期。

请注意，如果您需要空日期，则需要使用可为[空的 DateTime](http://www.dotnetperls.com/nullable-datetime)。

# c# - 使用 PetaPoco 动态和 WebAPI 返回 Json

> ID：10214969
> 
> 赞同：5
> 
> 时间：2012-04-18T17:46:04.257
> 
> 标签：c#, json, c#-4.0, asp.net-mvc-4, petapoco

是否可以使用 PetaPoco 动态查询在 ASP.net WebAPI 中返回 Json？

//WebAPI控制器

```
public class BranchController : ApiController
{
    public IEnumerable<dynamic> Get()
    {
        // Create a PetaPoco database object
        var db = new PetaPoco.Database("DefaultConnection");

        // Show all Branches
        var b = db.Query<dynamic>("SELECT * FROM Branches").ToList();

        return b;
    }

} 
```

我收到一个错误

> 要成为 XML 可序列化的，从 IEnumerable 继承的类型必须具有 Add(System.Object) 的实现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T18:11:14.627

JSON.Net 开箱即用地处理这个问题，所以我不得不添加一个自定义格式化程序。

这是我用来解决问题的 MSDN 文章：http: [//code.msdn.microsoft.com/Using-JSONNET-with-ASPNET-b2423706](http://code.msdn.microsoft.com/Using-JSONNET-with-ASPNET-b2423706)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:46:22.487

由于 PetaPoco`List<dynamic>`在这里返回一个真正的答案是*“WebApi 可以从列表中返回一个 Json”*吗？

答案是肯定的，但是 WebApi 有一个叫做[Content Negotiation](http://weblogs.asp.net/gunnarpeipman/archive/2012/04/19/asp-net-web-api-how-content-negotiation-works.aspx)的东西，而不是根据请求返回 Json 或 XML。

尝试请求 Json 或为 XML 尝试这个：

```
 // Show all Branches
    return (IEnumerable<dynamic>)db.Query<dynamic>("SELECT * FROM Branches"); 
```

# iphone - 在 HTML 页面上打开指向 iPad 上 PDF 特定页面的链接

> ID：10214974
> 
> 赞同：1
> 
> 时间：2012-04-18T17:46:20.950
> 
> 标签：iphone, html, ios, ipad, pdf

在过去的两天里，我一直在寻找这个问题的答案，但无法让它发挥作用。

我正在开发一个针对 iPad 优化的内置 HTML 的网络应用程序。其中一个页面具有指向 50 页 pdf 的不同页面的不同链接。我使用了 Adob​​e 网站[http://helpx.adobe.com/acrobat/kb/link-html-pdf-page-acrobat.html](http://helpx.adobe.com/acrobat/kb/link-html-pdf-page-acrobat.html)上的链接sample.html#page=2 并且在 Windows 上的桌面浏览器中工作，但是不在 iPad 上。我也尝试在 PDF 中创建目标并链接到它们，但这也不起作用。

任何帮助将不胜感激。唯一真正的要求是不能下载其他软件进行查看。再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T07:37:20.437

只需删除“=”符号即可。

所以：`sample.html#page2`

这应该适用于 iPad。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:03:00.170

这些链接仅适用于 Adob​​e 产品的桌面版本。Adobe 将来可能会在 Adob​​e Reader for iPad 中添加对它们的支持。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-01T11:10:32.630

只是

```
filename.pdf#pagenumber 
```

**前任**

`wwww.domain/pdffile`

# android - 如何旋转图像视图（不使用动画）

> ID：10214976
> 
> 赞同：0
> 
> 时间：2012-04-18T17:46:32.837
> 
> 标签：android

好吧，我确定之前有人问过这个问题，我搜索了论坛，但找不到我想要的。简而言之，我希望能够旋转一个图像视图并且这个旋转的图像仍然是可点击的（它占据的新空间）

我正在创建一个纸牌游戏，我希望玩家能够看到他的牌，就像 pople 通常一只手拿着牌（彩虹风格）一样。所以目前，我让每张卡片都是一个图像视图，它们是彼此最好的。如何将每个图像视图旋转一定角度？我不想使用旋转动画，因为它不会在旋转后改变图像的 x/y 位置，这会阻止触摸卡片的角落有任何帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:53:24.190

这是一个关于旋转 a 的问题`TextView`。您还必须重写该`onTouch`方法，但这应该足以让您入门。[在 Android 中旋转视图](https://stackoverflow.com/questions/1930963/rotating-a-view-in-android)

# android - 检测usb设备android

> ID：10214984
> 
> 赞同：0
> 
> 时间：2012-04-18T17:46:53.400
> 
> 标签：android, android-intent

当连接和分离 USB 设备时，我试图在我的 android 应用程序中弹出一个 toast ..
短 - 它不工作.. 有人可以告诉我我错过了什么吗？尝试将三星硬键盘连接到三星平板电脑并让我的应用在附加或分离时检测到它

我的活动

```
 import java.util.ArrayList;
    import java.util.HashMap;

    import com.eliddell.R;
    import android.app.Activity;
    import android.app.PendingIntent;
    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.content.IntentFilter;
    import android.content.res.Configuration;
    import android.hardware.usb.UsbAccessory;
    import android.hardware.usb.UsbDevice;
    import android.hardware.usb.UsbManager;
    import android.location.GpsStatus.Listener;
    import android.mtp.MtpDevice;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.inputmethod.InputMethodManager;
    import android.widget.Toast;

    public class UiModeTestActivity extends Activity {
        /** Called when the activity is first created. */
        //UsbAccessory accessory = (UsbAccessory) intent.getParcelableExtra(UsbManager.EXTRA_ACCESSORY);

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            String str = (String) getLastNonConfigurationInstance();

            IntentFilter filter = new IntentFilter("android.hardware.usb.action.USB_ACCESSORY_ATTACHED");
registerReceiver(mUsbReceiver, filter);

        }

       private static final String ACTION_USB_PERMISSION ="com.android.example.USB_PERMISSION";
       private final BroadcastReceiver mUsbReceiver = new BroadcastReceiver() {

            public void onReceive(Context context, Intent intent) {
                Toast.makeText(getApplicationContext(), "received", Toast.LENGTH_SHORT).show();
                String action = intent.getAction();
                if (UsbManager.ACTION_USB_ACCESSORY_DETACHED.equals(action)) {
                    UsbAccessory accessory = (UsbAccessory)intent.getParcelableExtra(UsbManager.EXTRA_ACCESSORY);
                    Toast.makeText(getApplicationContext(), "attached", Toast.LENGTH_SHORT).show();
                }
                if (UsbManager.ACTION_USB_ACCESSORY_ATTACHED.equals(action)) {
                    UsbAccessory accessory = (UsbAccessory)intent.getParcelableExtra(UsbManager.EXTRA_ACCESSORY);
                    Toast.makeText(getApplicationContext(), "detached", Toast.LENGTH_SHORT).show();
                }
            }
        };

    }; 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk android:minSdkVersion="12" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"

    >
    <uses-library android:name="com.android.future.usb.accessory" /> 
    <activity
        android:name=".UiModeTestActivity"
        android:configChanges="keyboard|uiMode|orientation"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <meta-data android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED"
            android:resource="@xml/accessory_filter" />
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:02:39.570

编辑2：

> 试图将三星硬键盘连接到三星平板电脑

如果我没记错的话：问题是键盘不是 USB 附件，因此不应触发 USB_ACCESSORY_ATTACHED 部分。

忘记下面的部分:)

* * *

尝试更换

```
 UsbManager mUsbManager = (UsbManager) getSystemService(Context.USB_SERVICE);
//final String ACTION_USB_PERMISSION ="com.android.example.USB_PERMISSION";

PendingIntent mPermissionIntent = PendingIntent.getBroadcast(this, 0, new Intent(ACTION_USB_PERMISSION), 0);
IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
registerReceiver(mUsbReceiver, filter); 
```

和

```
IntentFilter filter = new IntentFilter("android.hardware.usb.action.USB_ACCESSORY_ATTACHED");
registerReceiver(mUsbReceiver, filter); 
```

并删除

```
<action android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED" /> 
```

从你的 AndroidManifest.xml

您将权限与广播意图混淆了。

编辑：嗯，这可能是完全错误的：http: [//developer.android.com/guide/topics/usb/accessory.html](http://developer.android.com/guide/topics/usb/accessory.html)做了你所做的。

# google-chrome - Fancybox 在 Google Chrome 中不滚动

> ID：10214988
> 
> 赞同：3
> 
> 时间：2012-04-18T17:47:06.757
> 
> 标签：google-chrome, fancybox

[http://www.mayakaimal.com/media-press](http://www.mayakaimal.com/media-press)

它适用于我测试过的所有其他浏览器。

```
<script type="text/javascript">
        $j = jQuery.noConflict();
        $j(function(){
        $j("a.fancybox").fancybox({
            maxWidth    : '100%',
            maxHeight   : '100%',
            fitToView   : false,                   
            closeClick  : false,
            openEffect  : 'none',
            closeEffect : 'none'
        });   
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:22:46.847

如果指定的`fancybox`高度大于某个值，`fancybox`则不会滚动。不知道为什么会这样。

下面的代码适用于我的情况。玩它，看看它是否可以解决您的问题。

```
 height: Math.min(600, $(window).height() - 96)

    $.fancybox({
        width: 800,
        height: Math.min(600, $(window).height() - 96),
        autoScale: false,
        padding: 8,
        href: url,
        scrolling: 'auto',
        hideOnOverlayClick: false,
        centerOnScroll: true,
        transitionIn: 'elastic',
        transitionOut: 'elastic',
        type: 'iframe'
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-17T11:02:35.643

这应该有效：

```
 $.fancybox({
                        "href": "putYourURLhere",
                        "width": 500,
                        "height": 500,
                        "autoSize": false,
                        "autoDimensions": false,
                        "scrolling": 'auto',
                        "centerOnScroll": true,
                        "transitionIn": 'elastic',
                        "transitionOut": 'elastic',
                        "type": 'iframe',
                        "onClosed": function () {
                            parent.location.reload(true);
                        }
                    }); 
```

# iphone - 如何将 NSData 转换为包含十六进制值的 char 数组

> ID：10214990
> 
> 赞同：2
> 
> 时间：2012-04-18T17:47:10.857
> 
> 标签：iphone

我通过以下方法接收 NSData

```
 - (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag 
```

服务器以以下格式发送数据

```
 04 01 00 
```

作为六进制值。所以现在需要将此数据转换为char数组，以便我可以分别访问每一对请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:53:29.280

如果您想逐字节比较，可以这样：

```
 //NSData *test; // assume this is your NSData containing 0x04 0x01 0x00

    char *ptr = (void *)[test bytes]; // set a pointer to the beginning of your data bytes
    if(*ptr == 0x04) {
        NSLog(@"okay,.. got a 0x04");
    }
    ptr++; // go to the next byte
    if(*ptr == 0x01) {
        NSLog(@"okay,.. got a 0x01");
    } 
```

希望这对你有用。

# ruby - Refinerycms-pages-images 引擎自定义字段

> ID：10214991
> 
> 赞同：3
> 
> 时间：2012-04-18T17:47:12.027
> 
> 标签：ruby, ruby-on-rails-3, refinerycms

我正在使用带有[refinerycms-blog](https://github.com/resolve/refinerycms-blog)和refinerycms [-pages-images](https://github.com/resolve/refinerycms-page-images)引擎的炼油厂 CMS，我想为每个图像添加一个新的自定义字段（默认情况下有一个标题字段）。

我已经运行了一个数据库迁移，所以在refinery_image_pages 上有一个字段来保存该值，并像这样编辑了refinery/admin/pages/tabs/_image_field.html.erb 以显示该字段：

```
<%= text_field_tag "#{f.object_name.demodulize}[images_attributes][#{index}][image_margin_top]", 
```

（`image_margin_top`作为我的自定义字段。）

我的问题分为两部分：

1.  提交博客编辑表单时，如何获取 image_margin_top 值以保存到数据库？我猜我可能需要编辑其中一个核心模型？

2.  如何在管理表单上显示 image_margin_top 的值？默认标题字段在`_image_field.html.erb`-

    `f.object.caption_for_image_index(index)`

我想创建一个`image_margin_top_for_image_index()`方法，但不知道在哪里这样做。

非常感谢

# c# - 使用 ProcessInfo 用户名和密码调用 wkhtmltopdf 时无法读取 StandardOutput

> ID：10214995
> 
> 赞同：2
> 
> 时间：2012-04-18T17:47:27.993
> 
> 标签：c#, .net, process, console, wkhtmltopdf

我之前已经成功使用过 wkhtmltopdf，但现在我有一个场景是我需要在启动该过程时使用特定帐户。当我设置一个有效的用户名/密码时，标准输出流是空的，返回码是-1。一旦我注释掉用户名/密码，它就会按预期工作。

在 .Net 4、Win 7 64 位中对此进行测试。

```
class Program
{
    static void Main(string[] args)
    {
        var wkhtmlDir = AppDomain.CurrentDomain.BaseDirectory;
        var wkhtml = wkhtmlDir + @"\wkhtmltopdf.exe";

        var info = new ProcessStartInfo(wkhtml);

        info.CreateNoWindow = true;
        info.RedirectStandardOutput = true;
        info.RedirectStandardError = true;
        info.RedirectStandardInput = true;
        info.UseShellExecute = false;
        info.WorkingDirectory = wkhtmlDir;

        info.Arguments = "http://www.google.com -";

        var securePassword = new SecureString();
        var password = "mypassword";

        foreach (var c in password)
        {
            securePassword.AppendChar(c);
        }

        //comment out next three lines, and it works!
        info.UserName = "myuser"; 
        info.Password = securePassword;
        info.Domain = "mydomain"; 

        using (var process = Process.Start(info))
        {
            var output = process.StandardOutput.ReadToEnd();

            // wait or exit
            process.WaitForExit(60000);

            var returnCode = process.ExitCode;
        }

    } 
```

如果我注释掉 info.UserName、Password、Domain，则输出有数据，否则如果我尝试使用凭据，则输出为空白且 returnCode 为-1。

希望其他人遇到这种情况，这似乎是一个常见的情况，我肯定错过了一些简单的东西......

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T17:13:07.963

我还在 .net 应用程序中使用 WKHTMLTOPDF。我发现的一些可能对您有帮助的事情是：

*   wkhtmltopdf 进程的输出被放入 StandardError，而不是 StandardOutput。所以你应该重定向 StandardError 流而不是 StandardOutput
*   像您所做的那样重定向standardError和StandardOutput可能会（并且根据我对wkhtmltopdf的经验总是）导致您的应用程序死锁。[有关为什么http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx)的更多信息，请参阅此页面

在您的情况下，您可能会遇到写入错误并导致死锁的问题？

您可以将您的流程设置为异步读取标准错误和标准输出，就像我在下面的示例中所做的那样。我希望这有帮助

```
sub doConversion()
        dim p as System.Diagnostics.Process = new System.Diagnostics.Process()
        p.StartInfo.FileName = "wkhtmltopdf.exe"

        dim url as string = "[[[YOUR URL TO CONVERT]]]"
        dim outfilename as string = "[[[WHERE YOU WANT THE FILE]]]"
        dim switches as string = ""
        switches &= "--disable-smart-shrinking  --print-media-type "
        switches &= "--margin-top 0mm --margin-bottom 0mm --margin-right 0mm --margin-left 0mm "
        switches &= "--page-size A4 "

        p.StartInfo.Arguments = switches & Url & " " & outfilename

        console.writeline("Running command: " & commandToRun & " " & switches & Url & " " & outfilename)

        '## needs to be false in order to redirect output
        p.StartInfo.UseShellExecute = false 

        p.StartInfo.RedirectStandardOutput = true
        AddHandler p.OutputDataReceived, addressOf PDFOutputHandler

        p.StartInfo.RedirectStandardError = true
        AddHandler p.ErrorDataReceived, addressOf PDFOutputHandler

        p.StartInfo.WorkingDirectory = rootPath & iif(rootpath.endswith("\"),"","\") 
        console.writeline("Starting...")

        try
            p.Start()
            p.BeginOutputReadLine()
            p.BeginErrorReadLine()
            console.writeline("Started...")
        catch ex as exception
            throw new exception("Could not start process [" & p.startInfo.Filename & "] with arguments [" & p.startInfo.Arguments & "], " & vbcrlf & "(RootPath: " & rootpath & ")" & vbcrlf & ex.tostring & vbcrlf)
        end try

        '## ...then wait for exit 
        p.WaitForExit()
end sub

Private Sub PDFOutputHandler(sendingProcess As Object, outLine As DataReceivedEventArgs)
    If Not String.IsNullOrEmpty(outLine.Data) Then
        console.writeline(outLine.Data)
     End If 
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T23:29:34.507

我不确定，在.net 中是否可行，但是当我创建具有不同凭据的进程（例如 Win API 中的 CreateProcessAsUser）并创建管道时，我显然必须传递给 CreateNamedPipe [Null 安全或本地安全](http://conemu-maximus5.googlecode.com/svn/trunk/ConEmu/src/common/MSecurity.cpp)属性。

可能是你有同样的问题。

# java - 试图让 InetAddress.getLocalHost.getHostAddress (Java/Scala) 返回外部 IP

> ID：10214997
> 
> 赞同：3
> 
> 时间：2012-04-18T17:47:36.053
> 
> 标签：java, scala, networking, localhost, akka

所以我在使用`InetAddress.getLocalHost.getHostAddress`获取给定机器的外部 IP 地址时遇到了问题。

从某种意义上说，我实际上是在 Scala 中这样做的——Akka Remote Actors 的配置文件默认用于`InetAddress.getLocalHost.getHostAddress`获取机器的 IP 地址，这是我想要的，因为我将在多台机器上部署 Actor。但是，它似乎返回`127.0.0.1`而不是我想要的外部 IP 地址（因为远程参与者需要通过网络来回通信）。

问题是我不能使用我在谷歌上找到的任何方法来规避这个问题，因为它们似乎都涉及调整代码本身，而在这里我真的没有任何代码可以调整，DSL 只是自动使用`InetAddress.getLocalHost.getHostAddress`.

我从谷歌搜索中读到了一些线程，你可以通过编辑你的主机文件或其他东西来规避这个问题？我该怎么做呢？

谢谢！-kstruct

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T18:18:56.933

您可能想要使用[NetworkInterface](http://docs.oracle.com/javase/6/docs/api/java/net/NetworkInterface.html)类。

特别是，使用静态[getNetworkInterfaces](http://docs.oracle.com/javase/6/docs/api/java/net/NetworkInterface.html#getNetworkInterfaces%28%29)方法枚举所有可用的网络接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T21:42:43.477

检查您的 /etc/hosts 文件。它应该将“localhost”映射到 127.0.0.1，并将您的真实主机名映射到您的真实 IP 地址，或者其中之一：-| 一些 Linux 发行版显然犯了这个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-24T08:15:49.467

如果 getLocalHost 不起作用，我得到了部分解决方案。此解决方案的问题是您必须知道网络接口的名称才能匹配真实的名称。也许您可以改进此代码以删除“虚拟”设备和其他东西。

这是 scala 代码，但 java 代码非常相似

```
 def returnInterfaceAddress() : InetAddress = {
    var myInetAddress = InetAddress.getLocalHost
    val interfaces : util.Enumeration[NetworkInterface] = NetworkInterface.getNetworkInterfaces()
    while(interfaces.hasMoreElements){
      val inter = interfaces.nextElement()
      if(inter.getDisplayName() == "Realtek PCIe GBE Family Controller"){
        myInetAddress = inter.getInetAddresses().nextElement()
      }
    }
    myInetAddress
  } 
```

# php - PHP：如何在提交前临时保存复选框值

> ID：10214998
> 
> 赞同：1
> 
> 时间：2012-04-18T17:47:36.260
> 
> 标签：php, html, sql, forms

我对 PHP 有点生疏，我目前正在做一个 PHP 任务，用户可以选择并保存列出的图像/数据/值到他们自己的集合中。我已经输入了所有数据并将其打印在带有记录集分页的重复区域中。

我很困惑我应该如何在提交之前临时保存选中的复选框，因为我使用记录集分页来输出选项时有超过 1 页。（意思是：我在第一页中选择了 2 个值然后我单击下一页选择余额值，最后提交我的选择）

TIA

*我读过一篇关于在 session 中存储的文章，这是我想的解决方案，但我想知道在 chaging 页面时我应该如何将值发送到 session （由 Dreamweaver 生成的记录集分页）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T18:04:12.707

为了澄清前面的答案，您很可能希望为每个复选框创建一个新的 $_SESSION 变量并将一个布尔值与其关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:56:16.140

您可以将表单发布的结果存储在 PHP 的`$_SESSION`变量中。阅读这篇文章以获取更多信息：[将表单数据存储为会话变量](https://stackoverflow.com/questions/3791414/storing-form-data-as-a-session-variable)

此外，Google Land 中必须有教程或其他内容。

* * *

如果您需要在*不*提交表单的情况下保存表单结果，请尝试 JavaScript/AJAX 方法。这个想法是您实际上*确实*提交了表单，但是以一种幕后的方式（也就是说，用户永远不会注意到它）。本质上，您将要构建“自动保存”功能。看看这两个帖子：

*   [使用 Prototype 和 PHP 自动保存表单输入](https://stackoverflow.com/questions/1425156/autosaving-form-input-using-prototype-and-php)
*   [AJAX 自动保存功能](https://stackoverflow.com/questions/931252/ajax-autosave-functionality)

它们可能无法完全满足您的需求*，*但它们应该让您很好地了解您应该做什么。

**注意：**这两个帖子都使用计时器来触发其自动保存功能。我建议调整触发器以检测表单中的任何更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T17:59:36.053

将它们存储在 _SESSION 中并在需要时进行处理。