# StackOverflow 问答 12268000-12268999

# java - 在哈希表中搜索字符串 - Java

> ID：12268002
> 
> 赞同：1
> 
> 时间：2012-09-04T16:51:06.107
> 
> 标签：java

我在为特定字符串 xmlMatch 搜索哈希表时遇到问题。这是从特定 div 标签的内容派生的

我已经包含了用于搜索 XML 和定义字符串 xmlMatch 的代码。我相信这是正确的，并通过将其打印到屏幕上来证明这一点。我知道这应该很简单。我创建了一个快速测试哈希表，同样的东西在那里工作。

我的测试代码 - 作品

```
String xmlMatch2 = "Two";
Hashtable<String, String> table2 = new Hashtable <String, String>();
table2.put("One", "Uno");
table2.put("Two", "Dos");
table2.put("Three", "Tres");

System.out.println(table2.containsKey(xmlMatch2));
String n = table2.get("Two");
System.out.println(n); 
```

按预期工作，在 Eclipse 中将以下内容打印到控制台

真的

DOS

我的生产代码 - 不工作

```
if(startPosition >1)            
{
    out.println("startPosition is greater or equal to 1 ");

    int subStringIndex = startPosition + startTag.length();
    subStringIndex = subStringIndex + 2; // +2 is necessary to remove "> after sliceXML             
    out.println(subStringIndex); 

    int endPosition = testContent.indexOf(endTag, subStringIndex);
    out.println(endPosition); 

    if(endPosition >= startPosition)
    {

    xmlMatch = testContent.substring(subStringIndex, endPosition);
    //out.println("This is my xmlMatch " + xmlMatch); //prints Florida
    } 
```

上面的打印语句（激活时）确认 xmlMatch 是佛罗里达州

然后我实现一个简单的哈希表

```
Hashtable<String, String> table = new Hashtable<String, String>();
    table.put("Florida","/PathToFile.txt");
    table.put("Telescope","/PathToFile2.txt");
    table.put("Galaxy","/PathToFile3.txt"); 
```

这就是我的问题开始的地方！

```
out.println(table.containsKey(xmlMatch)); 
```

上面的打印语句在屏幕上打印 false - 我相信它应该打印 true，因为 xmlMatch 等于 Florida 在 Hashtable 中。

```
String n = table.get(xmlMatch);
out.println(n); 
```

这打印空 - 我相信这应该打印 /PathToFile.txt

但是，如果我只是这样做

```
out.println(xmlMatch); 
```

它再次将佛罗里达打印到屏幕上

我究竟做错了什么？我只是希望能够在我的哈希表中搜索特定的字符串。任何帮助一如既往，非常感谢。

**编辑：** 我是否有可能遇到大写字母的问题，或者我的 xmlMatch 传递了一个额外的空格字符？例如“佛罗里达”

**编辑 2** 我的 xml div 标签只是读取

```
<sliceXML>Florida</sliceXML> 
```

**解决方案** 我在这里添加这个，因为它是问题的解决方案，但不是我提出的问题的解决方案。

[在Joe K](https://stackoverflow.com/users/854793/joe-k)的帮助下，我检查了我的 endTag，发现我无法正确编码正斜杠。我在[这里发布了围绕答案的工作](https://stackoverflow.com/questions/12285142/encoding-special-html-characters-in-java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:58:51.807

您的 , 中可能有空格`xmlMatch`，`trim()`用于删除它们：

```
String n = table.get(xmlMatch.trim());
out.println(n); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T16:59:19.343

你可以用 "Florida".intern() 试试吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:01:14.827

Java 字符串从索引 0 开始，就像 C 数组一样。此外，一些 XML 序列化器/反序列化器倾向于小写标签。因此，一个 XML 文件，例如：

```
 <Firefox>xxxx</Firefox> 
```

会神奇地变成：

```
 <firefox>xxxxx</firefox> 
```

AFAIK，XML 文件中的标签区分大小写。无论如何，如果可能，请检查上下盖。

哦，是的：标签中的额外空格可能是一种负担。小心一切。

我的最后一条建议：既然您使用的是 Java，那么您可以尝试一下 SAX。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T16:57:02.863

你检查过空格吗？？？只需修剪 xmlMatch 并重试。

# ruby-on-rails - 如何在 Rails 上找到并终止正在运行的 Resque 作业？

> ID：12268008
> 
> 赞同：1
> 
> 时间：2012-09-04T16:51:35.700
> 
> 标签：ruby-on-rails, ruby, queue, resque, jobs

我正在使用[Resque](https://github.com/defunkt/resque)处理 Rails 应用程序上的一些后台作业。

问题是客户可以取消这个工作，所以：

*   如果作业仍在队列中：将其出列

    ```
    Resque.dequeue(GitHub::Jobs::UpdateNetworkGraph, 'repo:135325') 
    ```

*   如果工作已经完成：什么都不做

*   如果作业正在运行：???

有没有办法以编程方式找到工作并在它正在运行时告诉它立即停止？我主要关心的是确保我杀死所需的工作，而不是当前正在处理的工作，因为当我询问它是否正在运行时，它可能是另一种形式，直到我杀死它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:54:15.790

我不认为 resque 存储了`process id`fork 进程的，它 `log`虽然做到了，但我不存储进程 id`child process forked`

你可以在**第 139 行看到**[这里](https://github.com/defunkt/resque/blob/master/lib/resque/worker.rb#L137-152)

 **关于您如何提取正在运行的 resque 作业的进程 ID 的问题，我认为使用 redis 数据结构在您的作业本身内部执行此操作的方法

`running_process`所以考虑下面的代码是你使用 redis hash( )创建作业的执行操作，并`process_id`在其中添加当前时间戳

```
class MyJob
 @queue = :myjob

 def self.perform
   field = Time.now.to_i
   redis.hsetnx "running_process",field,Process.pid 
   ### Rest of the code

   #### when the code is about to finish 
   ##remove the finish process from the 
   redis.hdel "running_process",field
  end 
```

现在您可以通过简单地查询 redis "running_process" 哈希来获取所有正在运行的进程的列表，如下所示

`redis.hgetall "running_process"`

此处的注意事项如果`resque`作业失败，那么进程 ID 将永远不会被清除

哈希你所做的只是确保你交叉检查`process id`你收集的

从redis哈希实际上是一个`running resque job`

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-28T06:51:40.050

如果您想杀死/停止正在进行的工作而不将其标记为失败的工作，则可以使用此 hack。

```
class Task

    @queue = :queue_name

    def self.perform(parameters)

        pid = Process.fork do
            Task.work parameters
        end

        #puts "parent, pid #{Process.pid}, waiting on child pid #{pid}"
        Process.wait
    end

    def self.work(parameters)
        #Your perform code here
    end
end 
```

现在，您希望在哪里停止此代码，只需联系当前正在执行您要停止的工作的 resque 工作人员。并杀死其孩子的子进程。比如杀死Worker的孙子进程。

**解释：**

工作人员派生一个子进程，其中执行功能运行其代码。如果我们直接杀死这个子进程，那么这个作业将停止，但它会被标记为失败的作业。这就是为什么我们在 self.perform 中派生了另一个子进程，现在杀死 perform 的子进程将停止这个正在运行的作业，并且它不会被标记为失败。现在我们可以再次将作业排入队列。因此，任务是如何联系正在执行我们需要停止的工作的工人 (._.")

我已经设法通过为基于 UNIX 的系统编写以下代码来做到这一点：

```
Resque.workers.each do |worker|
    #If condition : "current worker is working and is working on the job that we want to stop and is operating on the queue that we require " and please change this condition as per your requirement          
    if worker.working? and worker.queues.include?("queue_name") and worker.job["payload"]["args"].first==post_id
            victim = %x[pgrep -P #{worker.pid}] #Getting child's PID
            victim.strip!
            victim = %x[pgrep -P #{victim}] #Getting grandchild's PID of worker
            victim.strip!
            %x[kill -9 #{victim.to_i}]
    end
end 
```**

# android - 片段 onSaveInstanceState 未被调用

> ID：12268015
> 
> 赞同：4
> 
> 时间：2012-09-04T16:52:16.137
> 
> 标签：android, fragment

我正在尝试在我的应用程序中使用片段。当我将应用程序切换到另一个片段时，我试图找到一种方法来存储片段使用的数据。我的第二个片段的代码在下面找到。当切换到这个片段和从这个片段切换时，我正在使用添加和删除片段。这是因为当我使用替换时，我遇到了麻烦。每当我切换到另一个片段并返回到这个片段时，都不会存储计数。我如何实际存储计数，以便在我的片段重新打开时可以回到它？

```
public class BasicFragment2 extends Fragment {

public int count = 0;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    if (savedInstanceState != null){
        count = savedInstanceState.getInt("Integer");
    }

    View view = inflater.inflate(R.layout.fragment_basic_2, container, false);

    Button button = (Button) view.findViewById(R.id.button2);

    // A simple OnClickListener for our button. You can see here how a Fragment can encapsulate
    // logic and views to build out re-usable Activity components.
    button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Activity activity = getActivity();
            count++;

            if (activity != null) {
                Toast.makeText(activity, "This is not a fragment...Yes it is " + count, Toast.LENGTH_LONG).show();
            }
        }

    });

    return view;
}

public void onSaveInstanceState(Bundle outState){
    outState.putInt("Integer",count);
    super.onSaveInstanceState(outState);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:56:26.153

尝试`onSaveInstanceState`在您的`Activity`班级中覆盖并在那里保存计数值。因为根据谷歌文档：

> 但是请注意：此方法可以在 onDestroy() 之前的任何时间调用。在很多情况下，一个片段可能大部分被拆除（例如当放置在没有显示 UI 的后台堆栈时），但它的状态不会被保存，直到它拥有的 Activity 实际需要保存它的状态。

# ios - 推特图片整合

> ID：12268016
> 
> 赞同：0
> 
> 时间：2012-09-04T16:52:16.700
> 
> 标签：ios, xcode, twitter

我的应用程序以下列方式发送推文：

```
-(IBAction)TweetMethod:(id)sender{

tweetView = [[TWTweetComposeViewController alloc] init];
TWTweetComposeViewControllerCompletionHandler
completionHandler = ^(TWTweetComposeViewControllerResult result)
{
    switch (result)
    {
        case TWTweetComposeViewControllerResultCancelled:
            NSLog(@"Twitter Result: canceled");
            break;
        case TWTweetComposeViewControllerResultDone:
            NSLog(@"Twitter Result: sent");
            break;
        default:
            NSLog(@"Twitter Result: default"); break;
    }
    [self dismissModalViewControllerAnimated:YES]; };
[tweetView setCompletionHandler:completionHandler]; 

NSURL *url = [[NSURL alloc] initWithString:@"Twitter.com"];

UIButton *button = (UIButton*) sender;

for (UITextView *text in messagetext) 
{

    for (UITextView *name in messagename) 
    {

    if ([text isKindOfClass:[UITextView class]] && text.tag == button.tag && text.tag== name.tag)
    {

             [tweetView setInitialText:[NSString stringWithFormat:@"Event name: %@. Download the app to check out the full details, including location, at: ", name.text]];
    }

   }

}

[tweetView addImage:[UIImage imageNamed:@"smallIcon 144 ipad.png"]];
[tweetView addURL:url];
[self presentModalViewController:tweetView animated:YES];

} 
```

我注意到，如果我保留这条线：

```
[tweetView addImage:[UIImage imageNamed:@"smallIcon 144 ipad.png"]]; 
```

出现图像，但蓝色按钮推文已关闭，因此我无法推文，而如果我删除该行，则没有图像，我可以推文。为什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:04:03.347

Twitter 有 140 个字符的限制！该推文可能与该图像太长。addImage/addURL 返回什么？如果它返回 NO，则推文太长。

另一个原因可能是您没有检查`[TWTweetComposeViewController canSendTweet]`. 用户必须在设置中设置了至少一个 Twitter 帐户。

# excel - 从 ColdFusion 导出的第 2 行的 Excel 列标题

> ID：12268023
> 
> 赞同：3
> 
> 时间：2012-09-04T16:52:34.000
> 
> 标签：excel, coldfusion, export, styling

我希望从 ColdFusion 导出到 Excel 的表格带有下面的标题，以在电子表格的第 2 行显示列标题，并在首次查看时打开过滤。

```
<cfheader name="Content-Type" value="application/msexcel">
<html xmlns:x="urn:schemas-microsoft-com:office:excel"> 
```

如何设置样式和 XML 规范以获得此结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:42:42.653

最简单的方法是在 Excel 中创建一个具有所需功能的简单电子表格。然后将其保存为 HTML 并查看源代码以查看如何使用哪些代码。

这是我通过这样做创建的一个基本示例。控制过滤的主要属性是`autofilter`和`autofilterrange`：

```
<!--- sample data --->
<cfset someQuery = queryNew("")>
<cfset queryAddColumn(someQuery, "ID", listToArray("10,22,14,51,62"))>
<cfset queryAddColumn(someQuery, "Title", listToArray("AAA,BBB,CCC,DDD,EEE"))>

<!--- generate --->
<cfheader name="Content-Type" value="application/msexcel">
<html xmlns:x="urn:schemas-microsoft-com:office:excel">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<table>
<!--- adjust filter range according to number of columns in query ---> 
<tr><td x:autofilter="all" x:autofilterrange="$A$1:$B$1">ID</td>
    <td x:autofilter="all">Title</td>
</tr>
<cfoutput query="someQuery">
    <tr><td>#ID#</td>
        <td>#Title#</td>
    </tr>
</cfoutput>
</table>
</body>
</html> 
```

# javascript - 如何使用eval为动态变量赋值？

> ID：12268026
> 
> 赞同：6
> 
> 时间：2012-09-04T16:52:43.583
> 
> 标签：javascript

我得到了动态变量名

```
varname = "data" + newid + "['" + name + "']"; 
```

我想为动态变量赋值。我试过这个

```
eval(varname) = value; 
```

但它不起作用。为了给动态变量赋值，我需要做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T16:56:17.450

不要使用评估。不要使用动态变量。

如果您有一组无序的相关数据，请将其存储在一个对象中。

```
var myData = {};
myData[ newid + name ] = value; 
```

虽然看起来你正在处理一个动态对象所以

```
myData[ newid ] = myData[ newid ] || {};
myData[ newid ][ name ] = value; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T16:54:40.360

```
var data1 = { a: 200 };
var newid = 1;
var name = "a";

var varname = "data"+newid+"['"+name+"']";
var value = 3;
eval(varname + "=" + value); // change data1['a'] from 200 to 3 
```

[话虽如此，`eval`是邪恶的。你真的确定你需要使用动态变量吗？]

# python - 在任何数据到达之前终止查询

> ID：12268029
> 
> 赞同：1
> 
> 时间：2012-09-04T16:53:06.280
> 
> 标签：python, mongodb, pymongo

我有一个相当大的集合并进行非索引（故意）查询，这可能需要很长时间才能返回第一批结果，或指示失败。如果在 10 秒内没有返回任何内容，我希望这些查询失败。所以我写了这个：

```
try:
     cur = big_collection.find(query, network_timeout=10)
     for doc in cur:
          print doc
except pymongo.errors.AutoReconnect:
     print "failure!" 
```

这在客户端上工作正常，但是，`current_op`即使在超时之后，查询也会在服务器上继续执行。我在块中尝试过`cur.close()`，但这不起作用，可能是因为它一直存在，直到它从服务器接收到任何数据。`db.kill_cursors``except``cur.cursor_id``None`

有没有办法杀死一个查询，即使它还没有返回任何数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:06:21.743

没有 PyMongo 包装器，但您可以使用相关的数据库命令来查询 opid 并终止操作。它看起来像：[`db['$cmd.sys.killop'].find_one({op:op})`](http://www.mongodb.org/display/DOCS/Viewing+and+Terminating+Current+Operation#comment-89149418). 出于某种原因，[这似乎不适用于 PyMongo 2.1](https://groups.google.com/d/msg/mongodb-user/1wFp7AqWnM4/iidDVbK0fiQJ)。

看：

*   [查看和终止当前操作](http://www.mongodb.org/display/DOCS/Viewing+and+Terminating+Current+Operation)
*   [PyMongo API：`command()`](http://api.mongodb.org/python/current/api/pymongo/database.html#pymongo.database.Database.command "Pymongo API：`command()`")（PyMongo 命令包装器？注意上面没有使用它...）

# c# - 可以从 Firefox 和 chrome 下载文件，但不能在 IE 中下载

> ID：12268035
> 
> 赞同：3
> 
> 时间：2012-09-04T16:53:53.830
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我有一个带有 Web API 的 ASP.NET MVC 4 应用程序。它工作得很好。但是一个问题是 IE 不能从 web api 下载文件，而 chrome 和 firefox 可以。浏览器说

```
"Unable to open this internet site. The requested site is either unavailable or cannot be found." 
```

根据[IE 8 和客户端缓存](https://stackoverflow.com/questions/8348214/ie-8-and-client-side-caching)，看起来是 no-cache 设置导致了问题。所以我想在那个下载中设置私人缓存。但在 MVC 4 中，我发现 HttpResponseMessage 中没有属性“Cache”，也没有任何设置私有缓存的方法。有人可以展示如何做到这一点吗？

**更新1：**根据我的调试，它不是缓存，而是以下代码中的“ContentDisposition”。

```
 HttpResponseMessage response = new HttpResponseMessage();
            response.StatusCode = HttpStatusCode.OK;
            response.Content = new StreamContent(result);
            response.Content.Headers.ContentType = new MediaTypeHeaderValue("application/vnd.ms-excel");
//            response.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
//              {
//                FileName = "PY75.xls"
//              };
            return response; 
```

如果我像上面这样评论，IE 可以下载以 id 作为默认文件名的文件，但在取消上面的评论时，它不能像上面描述的那样。知道如何解决这个问题吗？为什么 IE 无法识别 content-disposition 标头？

**更新 2：**升级 IE 9 后，content-disposition 终于可以工作了，可以从 web api 下载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:24:19.610

尝试添加

```
response.AddHeader("Content-Disposition", "attachment; filename=PY75.xls"); 
```

**更新**

我对此进行了更多研究，这可能是您打开和关闭流的方式的结果（不确定没有看到其余代码。我尝试了以下方法，它对我有用，也许它对你有用！

```
 public HttpResponseMessage Get()
    {
        string path = @"PATH_TO_XLS";
        MemoryStream responseStream = new MemoryStream();

        using (Stream fileStream = File.Open(path, FileMode.Open))
        {
            fileStream.CopyTo(responseStream);
            fileStream.Close();
        }

        responseStream.Position = 0;

        HttpResponseMessage response = new HttpResponseMessage();
        response.StatusCode = HttpStatusCode.OK;
        response.Content = new StreamContent(responseStream);
        response.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment") { FileName = "PY75.xls" };

        return response;
    } 
```

The only time I noticed that the browsers would have issues is when the memory stream was closed before sending the response back, which would make sense as the memory stream has to be open to stream the content back to the client. However I noticed the problem on all browsers not just IE. I'm not sure how the rest of your code is handling that, but if you for example handle creating the stream differently for chunked http vs just sending the whole file that could cause it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-13T13:38:24.347

I faced a similar problem and blogged about my solution [here](http://sudhanshutheone.net/2013/10/14/internet-explorer-cannot-download-over-https/) The jist of the solution is that a Pragma=no-cache header causes downloads to fail in IE 9 and below when on HTTPS. So you basically have to strip off that header. Also, if there's an explicit Cache-control header, and it should have the value as no-store, no-cache as the reverse order would also cause downloads to fail.

# iphone - NSPrdicate 中的多个搜索参数

> ID：12268037
> 
> 赞同：1
> 
> 时间：2012-09-04T16:53:57.797
> 
> 标签：iphone, search, nspredicate

我想根据多个参数（如标题、结束日期等）搜索我的 eventList 数组...当我只使用一个参数标题（如 [cd] %@）时，我正在使用以下代码，它工作得很好

```
 NSCharacterSet *whitespace = [NSCharacterSet whitespaceAndNewlineCharacterSet];
        NSString *trimmed = [searchBar.text stringByTrimmingCharactersInSet:whitespace];
        if([trimmed isEqualToString:@""]==NO)
        {
            //        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"title like[cd] %@",[NSString stringWithFormat:@"*%@*", searchBar.text]];
            NSPredicate *predicate = [NSPredicate predicateWithFormat:@"title like[cd] %@ ||  enddate like[cd] %@  ",[NSString stringWithFormat:@"*%@*", searchBar.text],[NSString stringWithFormat:@"*%@*", searchBar.text]];

            NSLog(@"Main Array:%@",arrMain);
            eventsList =(NSMutableArray*) [arrMain filteredArrayUsingPredicate:predicate];
            [eventsList retain];
            NSLog(@"Search Result:%@",eventsList);
            [eventTable reloadData];
        } 
```

我试过
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(title like[cd] %@) OR (enddate like[cd] %@)",[NSString stringWithFormat:@"* %@ *", searchBar.text],[ NSString stringWithFormat:@"* %@*", searchBar.text]];

它也有效，但不准确，因为我正在搜索特定日期，它不会显示，但如果我写 2 或 p 或 a 它只适用于某些结果......所以我可以说它不完美，我的 enddate 是带有格式的字符串2012-09-04 18:28:02 谁能帮我解决这个问题....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:30:45.277

将适当的单个谓词集合组装成 NSCompoundPredicate

如在

```
NSMutableArray *parr = [NSMutableArray array];
if([brand_one length]) { 
    [parr addObject:[NSPredicate predicateWithFormat:@"(title like[cd] %@) OR (enddate like[cd] %@) ",[NSString stringWithFormat:@"*%@*", searchBar.text],[NSString stringWithFormat:@"*%@*", searchBar.text]]];
}
if([brand_two length]) { 
     // etc 
}

NSCompoundPredicate *cpred = [NSCompoundPredicate andPredicateWithSubpredicates:parr]; 
```

您可以将谓词与 orPredicateWithSubpredicates: 和 andPredicateWithSubpredicates: 叠加，并且 NSCompoundPredicate 作为 NSPredicate 本身可以复合。

请参阅[http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCompoundPredicate_Class/Reference/Reference.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCompoundPredicate_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:09:17.783

完成

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(title like[cd] %@) OR (enddate like[cd] %@) ",[NSString stringWithFormat:@"*%@*", searchBar.text],[NSString stringWithFormat:@"*%@*", searchBar.text]]; 
```

我检查了我的数据库，它包含 2012-09-04 18:28:02 格式的日期，并且我以其他格式显示。

# playframework - 从播放中的另一个文件访问 html 2.0

> ID：12268041
> 
> 赞同：0
> 
> 时间：2012-09-04T16:54:06.860
> 
> 标签：playframework, playframework-2.0

我正在使用框架 Play 2.0 with Java 我有一些 html

```
<div>my html</div> 
```

在文件 test.html 中

无论如何我可以访问另一个文件（比如main.html）中的html吗？也许通过一些全局变量

我试图用

```
@variable{<div>my html</div>} 
```

然后使用从 main.html 访问它

```
@variable 
```

但这没有用...

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:37:48.863

模板基本上是 szegedi 提到的链接中所述的功能。我认为你想要的`tags`在 Play 中被调用。基本上你有一个包含一些 HTML 的文件：假设是一个进度条：

```
@(progressPercentage : Int) // define input params for this view/function

<div class="progress progress-success progress-striped active">
    <div class="bar" style="width: @progressPercentage%;">@progressPercentage%</div>
</div> 
```

上面的文件名为**progress.sacala.html**并保存在**views.tags.graphs**

您可以`access`通过在其中一个视图中输入以下内容来调用这段 HTML：

```
@tags.graphs.progress(yourPercentageVar) 
```

当然，您可以在不传递任何变量的情况下做到这一点，但我认为包含 vars 会很好。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:15:50.933

您应该尝试 html 转义：

```
@Html(test.content) 
```

如果这不起作用，这里是文档，如何使用模板引擎来满足您的需求： [Java 模板用例](http://www.playframework.org/documentation/2.0.3/JavaTemplateUseCases)

# java - 我有一个列表视图，其中连续包含超过 1 个值，当我输入 Edittext 时，如何使用名称值过滤列表？

> ID：12268042
> 
> 赞同：-1
> 
> 时间：2012-09-04T16:54:10.967
> 
> 标签：java, android, android-edittext, row

如果一行中只有一个值。我得到了答案，但我有不止一个。

这是我的主要课程，我无法决定如何填充 Textwatcher 的东西。“CityArray”是我创建行的类，“CityXmlParse”是我从原始文件夹中名为“cities.xml”的 XML 文件获取数据的类。每行都有一个图像和一个名称，我想在输入时按名称过滤行，但输入后必须看到整行（带图像）。

公共类 TravelFinalActivity 扩展 Activity {

```
EditText sc;
ListView lv;
List<CityData> citylist;
CityArray adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    sc = (EditText) findViewById(R.id.citySearch);

    CityXmlParse cityParse = new CityXmlParse();
    InputStream in = getResources().openRawResource(R.raw.cities);
    cityParse.xmlParse(in);

    citylist = cityParse.getList();        
    adapter = new CityArray(getApplicationContext(),R.layout.city_row, citylist);      
    lv = (ListView) this.findViewById(R.id.cityList);
    lv.setAdapter(adapter);      
    lv.setTextFilterEnabled(true);        

    sc.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub

        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
       }
  }); 
```

} }

这是用于 xml 解析的类。

公共类 CityXmlParse{

```
private final List<CityData> list = new ArrayList<CityData>();

private String getNodeValue(NamedNodeMap map, String key) {
    String nodeValue = null;
    Node node = map.getNamedItem(key);
    if (node != null) {
        nodeValue = node.getNodeValue();
    }

  return nodeValue;
}

public List<CityData> getList(){
    return this.list;
}

public void xmlParse(InputStream in){
try {
    DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    Document doc = builder.parse(in, null);
    NodeList cityList = doc.getElementsByTagName("city");

    for(int i=0; i<cityList.getLength(); i++){

    final NamedNodeMap cityAttr = cityList.item(i).getAttributes();
    final String cityName=getNodeValue(cityAttr, "name");
    final String cityInfo=getNodeValue(cityAttr, "info");   

    CityData cityObj = new CityData(cityName, cityInfo, cityName + ".png");

    list.add(cityObj);  

    }       
}catch (Throwable T) {}

} 
```

}

最后这是我的“CityArray”构造函数和自定义行的方法。

```
public CityArray(Context context, int textViewResourceId, List<CityData> citylist) {
    super(context, textViewResourceId, citylist);
    this.citylist=citylist;
    this.context=context;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View rowView = convertView;
    if(rowView == null){
        inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        rowView = inflater.inflate(R.layout.city_row, parent,false);
    } 

    CityData cityObj = getItem(position);

    cityImage = (ImageView) rowView.findViewById(R.id.city_image);      
    cityName = (TextView) rowView.findViewById(R.id.city_name);

    String imgPath = ASSETS_DIR + cityObj.resourceImg;      
    try {
        Bitmap bitmap = BitmapFactory.decodeStream(this.context.getResources().getAssets().open(imgPath));
        cityImage.setImageBitmap(bitmap);
    } catch (IOException e) {
        e.printStackTrace();
    }

    cityName.setText(cityObj.name);     

    return rowView;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:33:48.617

*   **使项目`ArrayAdapter`可过滤：** `ArrayAdapter`有一个内置的`ArrayFilter`，它通过使用`toString().toLowerCase()`每个对象的字符串来比较适配器列表中的对象。如果您`toString()`在 `CityData`类中覆盖并返回城市名称，那么`ArrayAdapter`应该能够有效地过滤项目。

*   **在 a 上启用自动文本过滤器`ListView`：**在布局中使用或`ListView`使用. 现在只要是焦点，用户可以简单地调出键盘，开始输入，列表项将被自动过滤。`android:textFilterEnabled="true"``setTextFilterEnabled(true)``listView`

*   **`ListView`**在 a上**显式设置文本过滤器****：**使用`setFilterText()`. `ListView`之后不要忘记清除它。

您可以通过检查相关的[Android Sources](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/ArrayAdapter.java#ArrayAdapter)来揭示更多细节。

# html - 如何从友好 URL 中删除 .html - Modx？

> ID：12268045
> 
> 赞同：10
> 
> 时间：2012-09-04T16:54:23.910
> 
> 标签：html, .htaccess, modx, modx-revolution

我正在使用 MODX 革命 2.2.4-pl。我正在使用提供的 .htaccess 文件并打开了友好的 URL。这些是我的重写规则。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

他们需要什么样的外观才能从 URL 中删除 .HTML？

在过去的二十分钟里，我一直在谷歌上搜索，但我的解决方案没有奏效。谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-04T23:03:40.130

有一种更简单的内置方式。登录到管理器。

**MODX 革命**

2.2.x 及更早版本：转到`System -> Content Types`.

2.3.x 及更高版本：转到`Content -> Content Types`.

找到 HTML 并删除“文件扩展名”中写入的内容。您可以通过双击`.html`表格来激活可编辑字段来执行此操作。删除内容后，清除缓存。

**MODX 进化**

去`Tools -> Configuration -> Friendly URLs`。

删除“Friendly URL Suffix”中的内容。保存并清除缓存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T17:07:04.483

这对我有用：

```
# The Friendly URLs part
#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_FILENAME} !-d
#RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]

RewriteCond %{REQUEST_URI} \.html$
RewriteRule ^(.*)\.html$ $1 [R=301,L]

RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]
#RewriteRule . /index.php [L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T17:03:53.173

首先，我认为您需要了解这个 .htaccess 试图做什么。

它试图将所有进入站点的请求重定向到位于 index 的前端控制器.php。

如果您要做的是在您的网站上使用一堆 *.html 文件（而不是前端控制器），但让它们使用干净的 URL，那么您将需要使用不同类型的重写。可能更像是

```
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html [L,QSA] 
```

此规则将以[http://domain.com/somepage](http://domain.com/somepage)的形式接收请求，并让它静默指向[http://domain.com/somepage.html](http://domain.com/somepage.html)以服务请求。

# c# - 带有过程的 Datagridview 不更新

> ID：12268047
> 
> 赞同：2
> 
> 时间：2012-09-04T16:54:32.440
> 
> 标签：c#, sql-server, stored-procedures

我已经用 SQL 编写了这个过程并且正在工作

```
ALTER proc [dbo].[gridcombo] (@tabela int)
as

/*1 Setores */
if  (@tabela=1)
begin
select setor_id, setor_nome  from tbl_setores
end
/*2  Atividade Economica   */
if  (@tabela=2)
begin
SELECT cnae_id, cnae_descricao  FROM tbl_CNAE
end 
```

我使用此过程在 C# 中填充数据网格视图

```
 public SqlConnection sqlcon = Tconex.GetConnection();
    public SqlDataAdapter da2 = new SqlDataAdapter();
    public DataTable dt1 = new DataTable(); 

        SqlParameter tabela = new SqlParameter("@tabela", SqlDbType.Int);
        tabela.Value = 1;
        SqlCommand llena = new SqlCommand("gridcombo", sqlcon);
        llena.Parameters.Add(tabela);
        llena.CommandType = CommandType.StoredProcedure;
        da2.SelectCommand = llena;
        da2.Fill(dt1);
        BindingSource bsource = new BindingSource();
        bsource.DataSource = dt1;
        dataGridView1.DataSource = bsource;
        dataGridView1.AutoGenerateColumns = true;
        sqlcon.Close(); 
```

当我更改`tabela.value`数据网格时填充了一个或另一个表，效果很好。

但我无法通过数据网格编辑表格

```
 da2.UpdateCommand = new SqlCommandBuilder(da2).GetUpdateCommand();  
        da2.Update(dt1);
        sqlcon.Close(); 
```

我究竟做错了什么？为什么我不能更新表？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:07:08.020

您必须在您`PrimaryKey`的表中返回您的表`SelectCommand`，以便正确生成您的更新命令

链接：http: [//msdn.microsoft.com/fr-fr/library/system.data.sqlclient.sqlcommandbuilder%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.sqlclient.sqlcommandbuilder%28v=vs.80%29.aspx)

# c# - 如何使用 .net youtube API 直接上传获取上传状态

> ID：12268049
> 
> 赞同：1
> 
> 时间：2012-09-04T16:54:40.133
> 
> 标签：c#, asp.net, youtube, youtube-api

我一直在尝试使用 youtubei API 直接上传方法进行锻炼，已成功上传视频，但问题是上传后某些视频被拒绝（拒绝（违反使用条款））。

我需要找到一种在 webResponse 中跟踪它们的方法，如果我阅读了 steram (readTOEnd()) XML

```
<app:control>
    <app:draft>yes</app:draft>
    <yt:state name='processing'/>
</app:control> 
```

州名始终显示“处理中”。请指出正确的方向，您对此有任何想法/经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:16:54.467

您可以尝试使用此代码

```
 WebResponse myWebResponse = myWebRequest.GetResponse(); 
    // Obtain a 'Stream' object associated with the response object.
    Stream ReceiveStream = myWebResponse.GetResponseStream();

    Encoding encode = System.Text.Encoding.GetEncoding("utf-8");

     // Pipe the stream to a higher level stream reader with the required encoding format. 
     StreamReader readStream = new StreamReader( ReceiveStream, encode );
     Console.WriteLine("\nResponse stream received");
     Byte[] read = new Byte[256];

     int count = readStream.Read( read, 0, 256 );
     Console.WriteLine("HTML...\r\n");

     if (count > 0) 
     {
           Console.Write("Success Reading");
     } 
```

# php - 如何在php中的文件开头写入数据？

> ID：12268051
> 
> 赞同：0
> 
> 时间：2012-09-04T16:54:53.973
> 
> 标签：php, append, file-pointer

> **可能重复：**
> [需要用 PHP 在文件开头写入](https://stackoverflow.com/questions/1760525/need-to-write-at-beginning-of-file-with-php)

我正在尝试制作一个日志文件。但我想在文件开头插入数据。我已经阅读了许多解决方案，但其中许多都给出了以下解决方案。

-> 以追加模式打开文件。
-> 将整个数据复制到一个变量中。
-> 将数据与临时变量连接起来。
-> 重写整个文件。

我已经访问并阅读了以下链接。 [需要用 PHP 在文件开头写](https://stackoverflow.com/questions/1760525/need-to-write-at-beginning-of-file-with-php)

如果我的日志文件大约为 50 到 85 MB，我认为这个过程很耗时。

有什么我可以在文件开头移动文件指针然后插入数据保存该文件的吗？

我需要一些可以为我工作的优化方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:57:17.357

不，您不能在文件开头粘贴新数据。您的选择是：

1.  打开新文件，写入新数据，然后将旧文件附加到新文件
2.  打开原始文件，将旧数据“向下”复制到文件中，然后覆盖文件的开头。

您需要在文件开头记录内容的任何原因？只读取文件的最后一部分是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:01:09.417

如果文件不是很大，而且你有足够的内存供 PHP.. 在这里，一个快速的 PHP 可以帮助你：

```
$toAdd = 'Text to add in beginning';
$file = '/path/to/your/file';
$temp = file_get_contents($file);
file_put_contents($file, $toAdd . $temp); 
```

# c# - 列表框 SelectedItem 不起作用

> ID：12268053
> 
> 赞同：3
> 
> 时间：2012-09-04T16:54:56.933
> 
> 标签：c#, silverlight, mvvm

我正在尝试将对象列表加载为包含多个数据的网格，并且我已经为它选择了 ListBox，如您在此处看到的：

```
<ListBox ItemsSource="{Binding People, Mode=TwoWay}" SelectedItem="{Binding Person, Mode=TwoWay}" >
  <ListBox.ItemContainerStyle>
     <Style TargetType="ListBoxItem">
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
     </Style>
  </ListBox.ItemContainerStyle>
  <ListBox.ItemTemplate>
     <DataTemplate>
         <Grid>
             <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="200"></ColumnDefinition>
                  <ColumnDefinition Width="50"></ColumnDefinition>
                  <ColumnDefinition Width="30"></ColumnDefinition>
                  <ColumnDefinition Width="50"></ColumnDefinition>
                  <ColumnDefinition Width="20"></ColumnDefinition>
             </Grid.ColumnDefinitions>
             <TextBlock VerticalAlignment="Center" Text="{Binding name}" Grid.Column="0" TextAlignment="Right"></TextBlock>
             <TextBox Grid.Column="1" Margin="5,0,0,0" Height="Auto" VerticalAlignment="Center" HorizontalAlignment="Stretch" Text="{Binding age}"></TextBox>
             <TextBlock Grid.Column="2" Text="yo" VerticalAlignment="Center" Margin="5,0,0,0"></TextBlock>
             <TextBox Grid.Column="3" Margin="5,0,0,0" Height="Auto" VerticalAlignment="Center" HorizontalAlignment="Stretch" Text="{Binding baremo}"></TextBox>
             <TextBlock Grid.Column="4" Text="€" VerticalAlignment="Center" Margin="5,0,0,0"></TextBlock>
         </Grid>
    </DataTemplate>
 </ListBox.ItemTemplate> 
```

当我将数据加载到 People ObservableCollection 中时，一切正常，并且显示完美。

**我第一次选择一个人时，它可以工作**并在虚拟机中设置属性值。

**当我第二次**选择不同的“人”时，问题就来了。属性**不会改变**，而且...**每次我选择不同的属性时，都需要更长的时间**（10 ó 20 之后会更长）。

这是我的 ViewModel 代码：

```
#region People
        public const string PeoplePropertyName = "People";

        private ObservableCollection<Player> _People;

        public ObservableCollection<Player> People
        {
            get
            {
                return _People;
            }

            set
            {
                _People = value;
                RaisePropertyChanged(People);
            }
        }
        #endregion

        #region Person
        public const string PersonPropertyName = "Person";

        private Player _Person;

        public Player Person
        {
            get
            {
                return _Person;
            }

            set
            {
                _Person = value;
                RaisePropertyChanged(PersonPropertyName);
            }
        }
        #endregion 
```

我正在加载这样的人员列表：

```
void LoadPeople(GetPlayersEventArgs e)
{
     if (this.People == null) this.People = new ObservableCollection<Player>();

        foreach (Player Person in e.Result)
        {
            Player newPerson = new Player();
            ...
            this.People.Add(newPerson);
        }

        this.SetUnBusy();
} 
```

我错过了什么吗？？提前致谢。

在@Ryan问题之后，我每次尝试选择另一个值时都会看到，我得到了很多：

> 解决方案中出现了“System.InvalidCastException”类型的第一次机会异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:29:05.520

从您分享的内容来看，该`Person`属性的实现是好的。有几件事我会推荐。

正如 vinod8812 建议的那样，将绑定模式更改为`OneWay`，或将其删除为`OneWay`默认值：

```
<ListBox ItemsSource="{Binding People}" SelectedItem="{Binding Person, Mode=TwoWay}" > 
```

更改`ObservableCollection<Player>`ViewModel 中的填充顺序：

```
public class ViewModel
{
    private readonly ObservableCollection<Player>();

    public ViewModel()
    {
        _People = new ObservableCollection<Player>();
    }

    public ObservableCollection<Player> People
    {
        get
        {
            return _People;
        }
    }
    /* rest of class */
} 
```

`_People`最后，在填充之前清除集合。否则，您可能只是添加重复项：

```
void LoadPeople(GetPlayersEventArgs e)
{
    _People.Clear();

    foreach (Player Person in e.Result)
    {
        Player newPerson = new Player();
        ...
        this.People.Add(newPerson);
    }

    this.SetUnBusy();
} 
```

有什么你知道与你的`INotifyPropertyChanged.PropertyChanged`事件有关的东西`ViewModel`吗？从您共享的代码中尚不清楚究竟是什么导致应用程序变慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:30:07.113

我建议打开在抛出 CLR 异常时会中断的功能。如果您使用的是 Visual Studio 2010 或 2012，请转到 Debug -> Exceptions（或默认为 Ctrl-E、D）并在“Common Language Runtime Exceptions”下确保选中“Thrown”。然后重新运行您的解决方案，看看是否有任何问题。

然后你会在你的 Person 对象中看到问题；）

# java - Java 泛型语法

> ID：12268058
> 
> 赞同：12
> 
> 时间：2012-09-04T16:55:14.050
> 
> 标签：java, generics

我想了解以下内容是什么意思？

```
public class Bar<T extends Bar<T>> extends Foo<T> {
    //Some code
} 
```

做这样的事情有什么好处（例如用例？）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T17:00:38.560

这是一个相当理论的例子，但在这种情况下你可能需要它：

```
public class Bar<T extends Bar<T>> extends Foo<T> {

    private final T value;

    public T getValue() { return value; }

    public void method(T param) {
        if (param.getValue().equals(someValue)) {
            doSomething();
        } else {
            doSomethingElse();
        }
    }
} 
```

`param.getValue()`如果 T 不是 a ，您将无法调用`Bar`，这是因为`T extends Bar<T>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T20:30:02.903

这与定义类的方式非常相似`java.lang.Enum`：

```
public abstract class Enum<E extends Enum<E>> implements Comparable<E> {
  private final String name;
  private final int ordinal;
  protected Enum(String name, int ordinal) {
    this.name = name; this.ordinal = ordinal;
  }
  public final String name() { return name; }
  public final int ordinal() { return ordinal; }
  public String toString() { return name; }
  public final int compareTo(E o) {
    return ordinal - o.ordinal;
  }
} 
```

由于像这样定义的类必须是**抽象**的并且不能直接实例化，因此该模式在类似于普通枚举扩展方式的构造中很有用：

```
// corresponds to
// enum Season { WINTER, SPRING, SUMMER, FALL }
final class Season extends Enum<Season> {
  private Season(String name, int ordinal) { super(name,ordinal); }
  public static final Season WINTER = new Season("WINTER",0);
  public static final Season SPRING = new Season("SPRING",1);
  public static final Season SUMMER = new Season("SUMMER",2);
  public static final Season FALL   = new Season("FALL",3);
  private static final Season[] VALUES = { WINTER, SPRING, SUMMER, FALL };
  public static Season[] values() { return VALUES.clone(); }
  public static Season valueOf(String name) {
    for (Season e : VALUES) if (e.name().equals(name)) return e;
    throw new IllegalArgumentException();
  } 
```

}

*来自“Java 泛型和集合”一书中的示例。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T17:06:41.393

`Bar`您基本上将“处理”的类型限制为扩展的任何类型`Bar<T>`。在这种情况下，你要确保`Bar`它只处理自身的扩展——也许调用一个私有的方法`Bar`。一个简单的例子是，你可以使用这个类来实现一种链表，并在做一些只能`Bar`/应该做的事情时对其进行迭代。假设您有以下代码：

```
public class Bar<T extends Bar<T>> extends Foo<T> {
    private T next;

    //Initialize next in constructor or somewhere else

    private void doSomethingOnlyBarCanDo(){
        //Do it...
    }

    public void iterate(){
        T t = next;
        while(t != null){
            t.doSomethingOnlyBarCanDo();
            t = t.next;
        }
    }
} 
```

使用这种构造，迭代“链”`Bar`实例非常容易，因为每个实例都会引用下一个实例 - 回忆一下`T`extends `Bar<T>`，所以你可以这样引用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T17:03:18.567

一个典型的用例是 Wrapper/Decorator 模式。`Bar`可能会包裹`T`它`Bar`本身。`Foo`只是一个处理`T`.

```
public abstract class Foo<T> {
    public abstract void foo(T t);
}

public class Bar<T extends Bar<T>> extends Foo<T> {
    private T wrapped;
    public Bar(T w) {
         this.wrapped = w;
    }

    public abstract void foo(T t) {
        // do something 
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T17:22:34.963

我唯一能说的是`<T extends Bar<T>>`使用这个你告诉`T`现在的类型`Bar<T>`，这意味着你可以访问所有可用的方法，否则如果你只这样做，`T`你将无法访问它，因为那将是通用的.`Bar``Bar``Bar<T>``T`

**那有什么用呢？**

您可以将其用于合成。例如

```
public class CustomList<T extends List<T>> {
    T t;

    T get(int index) {
        //Some custom code here
        return t.get(index);
    }
} 
```

您的示例有点错误，因为 Telling that T is of Type Bar 没有真正的优势，因为您始终可以访问 Bar 类中的 Bar 类方法

# regex - AS3 将动态变量包含到正则表达式对象中

> ID：12268060
> 
> 赞同：3
> 
> 时间：2012-09-04T16:55:31.537
> 
> 标签：regex, string, actionscript-3, variables

如何将动态变量包含到正则表达式对象中？

```
var pattern:RegExp = new RegExp(/'a '/ + keyword, '/gi'); 
```

在这种情况下，我希望正则表达式匹配“一只鸟”或“一只鸟”（如果“鸟”是关键字）。但是，“bird”如果单独存在，则不应匹配。

此外，我有一个后续问题（我希望不要问太多！）：我将如何做上面的确切事情，但是如果关键字前面没有'a'，正则表达式才匹配（我相信这个涉及使用 ^ 或 !，但我似乎无法为我的特定要求找到任何语言的任何明确文档）。

对于我的第二个问题，测试用例如下所示：

作品

```
abird
bird
bbbbirdddd 
```

不工作

```
a bird
a birdddd 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:32:07.537

ActionScript 3.0 支持lookbehinds 和不区分大小写的修饰符：

```
/(?<=a\s+)bird/i 
```

有关如何从变量构造正则表达式的更多信息，请参见此处：[在 AS3 中使用变量 Regexp](https://stackoverflow.com/questions/6657179/using-a-variable-in-an-as3-regexp)。

对于您问题的第二部分：

```
/(?<!a\s+)bird/i 
```

# php - 没有获得货币字符串数组的最大值和最小值

> ID：12268061
> 
> 赞同：1
> 
> 时间：2012-09-04T16:55:31.647
> 
> 标签：php, arrays, max, min

这是我的数组

```
Array ( [0] => $30.00 [1] => $200.00 [2] => $138.00 [3] => $100.00 [4] => $30.00 
[5]=>$30.00 [6] => $30.00 ) 
```

试图从此数组中获取最大值和最小值

```
echo $maxprice = max($list);
echo $minprice = min($list); 
```

我得到最高 30.00 美元和最低 100.00 美元

我猜这是因为值是货币字符串。

有人可以告诉我如何获得这个数组的真正最大值和最小值吗？这真的是因为钱串吗？

提前致谢

***注意*** 这个数组是从一个多维数组中剥离出来的。如果是普通数组，那就很简单了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:57:49.290

删除“$”符号以确保 php 将值视为数字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T16:58:11.707

您需要在数组中使用十进制值（不带“$”）。美元符号仅应在输出显示时应用。

要将字符串转换为浮点数，您可以只`array_walk()`使用数组。

如果在 PHP 5.3 或更高版本上，我喜欢使用这样的闭包

```
array_walk($array, function (&$value, $key) {
   $value = (float)ltrim($value, '$');
}); 
```

如果在旧版本的 PHP 中，您需要定义一个单独的函数并像这样在 array_walk 中调用该函数

```
array_walk($array, 'strip_dollar_signs');

function strip_dollar_signs (&$value, $key) {
    $value = (float)ltrim($value, '$');
} 
```

然后像往常一样对数组进行排序

```
sort($array, SORT_NUMERIC); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T17:20:13.077

考虑只存储数值，除非您使用一种以上的货币。此代码应该为您提供最小值和最大值

```
$copy = $list;
foreach($copy as $key=>$value)$copy[$key] = str_replace('$', '', $value);

echo $maxprice = max($copy);
echo $minprice = min($copy); 
```

# c - 在C中匹配（几个）字符串的最有效方法？

> ID：12268062
> 
> 赞同：3
> 
> 时间：2012-09-04T16:55:37.713
> 
> 标签：c, string, embedded, match

我们的系统需要接受来自终端的用户输入并匹配几个已知的关键字字符串（可能是 10 个）。

我们没有空间/计算机来做正则表达式等，代码需要小而快。

现在，这样做的讨厌的方法是：

```
 // str is null-terminated, assume we know it's safe/sane here
   if(!strncmp(str,"hello",5)
   {
      do_hello();
   }
   else if(!strncmp(str,"world",5)
   {
      do_world();
   }
   else
   {
      meh(); // Wasn't a match
   } 
```

因此，经过一番谷歌搜索和阅读后，我确信更好的方法是将各种匹配项的哈希值预先计算为 int，然后使用 case 语句：

```
// Assume hash() stops at NULL
switch(hash(str))
{
   case HASH_OF_HELLO:
      do_hello();
      break;

   case HASH_OF_WORLD:
      do_world();
      break;

   default:
      meh();
      break;
} 
```

我们可以在编译时计算 *HASH_OF_match*。这似乎是一种从相对较小的集合中选择字符串的更快/更优雅的方式。

那么——这看起来合理吗？/ 这样做有明显的问题吗？/ 有人有更优雅的方法吗？

作为一个脚注，这是我今天下午看到的最好看的哈希算法；），归功于 dan bernstein，它看起来很适合手头的工作。

```
unsigned int
get_hash(const char* s)
{
    unsigned int hash = 0;
    int c;

    while((c = *s++))
    {
        // hash = hash * 33 ^ c 
        hash = ((hash << 5) + hash) ^ c;
    }

    return hash;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T17:07:10.487

*散列的问题在于，用户输入的任意字符串可能会生成与您的匹配*项相同的散列，并且您将执行错误的内容。对于小至 10 的搜索集，我会坚持使用这种`if-else`方法。或者使用字符串数组和函数指针数组（假设所有函数具有相同的签名）来选择要执行的函数。

```
char const *matches[10] = {"first", "second", ..., "tenth"};
void (*fn[10])(void) = {&do_first, &do_second, ..., &do_tenth};

for( i = 0; i < 10; ++i ) {
  if( strcmp( str, matches[i] ) == 0 ) {
    (*fn[i])();
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T16:58:53.283

像在 Boyer-Moore 字符串搜索算法中那样在最后一个字符上使用嵌套 switch 语句怎么样？

[http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T08:49:16.333

散列和散列表最适合处理大量数据。由于输入字符串的数量是已知且有限的，您或许可以考虑这种方法：

让我们假设已知的字符串是

```
const char* STR_TABLE [STR_N] =
{
  "hello",
  "world",
  "this",
  "is",
  "a",
  "number",
  "of",
  "ten",
  "test",
  "strings"
}; 
```

然后我们可以在编译之前按字母顺序手动对它们进行排序，因为排序表提供了更快的搜索可能性。然后，您可以使用二进制搜索。

```
#include <stdio.h>
#include <stdlib.h>

#define STR_N 10

const char* STR_TABLE [STR_N] =
{
  "a",
  "hello",
  "is",
  "number",
  "of",
  "strings",
  "ten",
  "test",
  "this",
  "world"
};

int ptr_strcmp (const void* str1, const void* str2)
{
  return strcmp(str1, *(const char**)str2);
}

int main()
{
  const char* user_input = "world"; // worst case
  const char** result;

  result = bsearch (user_input,
                    STR_TABLE,
                    STR_N,
                    sizeof(const char*),
                    ptr_strcmp);

  if(result != NULL)
  {
    printf("%s\n", *result);
  }
  else
  {
    printf("meh\n");
  }

} 
```

这将归结为：

> 比较 "world" 和 "of"，1 比较 'w' != 'o'。
> 
> 比较“世界”和“测试”，1比较'w'！='t'。
> 
> 比较“world”和“this”，1比较'w'！='t'。
> 
> 比较“世界”和“世界”，5 次比较。
> 
> 比较总数为 8。

这当然涉及一些开销代码，检查'\0'和二进制搜索调用。您必须在您的特定平台上测量建议的各种方法，以找出最佳方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T18:39:26.090

听起来你想使用[gperf](http://www.gnu.org/software/gperf/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T17:04:32.673

也许解决方案可能是这样的：

```
struct keyword {
    unsigned int hash;
    const char *str;
    void (*job)();
};

//A table with our keywords with their corresponding hashes. If you could not
//compute the hash at compile time, a simple init() function at the beginning
//of your program could initialize each entry by using the value in 'str'
//You could also implement a dynamic version of this table (linked list of keywords)
//for extending your keyword table during runtime
struct keyword mykeywords[] = {
    {.hash = HASH_OF_HELLO, .str = "hello", .job = do_hello},
    {.hash = HASH_OF_WORLD, .str = "world", .job = do_world},
    ...
    {.str = 0} //signal end of list of keywords

};

void run(const char *cmd)
{
    unsigned int cmdhash = get_hash(cmd);
    struct keyword *kw = mykeywords;
    while(kw->str) {
        //If hash matches then compare the string, since we should consider hashing collisions too!
        //The order of conditions below is important
        if (kw->hash == cmdhash && !strcmp(cmd, kw->str)) { 
             kw->job();
             break;   
        }
        kw++;
    }
} 
```

# c# - 多重上传的 JavaScript 问题

> ID：12268064
> 
> 赞同：2
> 
> 时间：2012-09-04T16:55:45.637
> 
> 标签：c#, javascript, html, multi-upload

我正在尝试进行多文件上传。在此[博客](http://aspadvice.com/blogs/azamsharp/archive/2007/10/25/Upload-Multiple-Files-Using-WebClient.UploadFile-Method.aspx)的帮助下，但出现错误。

编码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="default.aspx.cs" Inherits="Upload_Multiple_Files._default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

    <script language="javascript" type="text/javascript">
        var selectedFiles = '';

        function ReceiveServerData(response) {
            alert(response);
        }

        function uploadFile() {
            var fileList = document.getElementById("fileDivBox").getElementsByTagName("INPUT");

            for (i = 0; i < fileList.length; i++) {
                selectedFiles += fileList[i].value + "|";
            }

            CallServer(selectedFiles, '');
        }

        function attachFile() {
            var fu = document.createElement("INPUT");

            fu.type = "file";

            var br = document.createElement("<BR>");

            document.getElementById("fileDivBox").appendChild(fu);
            document.getElementById("fileDivBox").appendChild(br);
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <a href="#" onclick="attachFile()">Attach a file</a> 
        </div>
    </form>
</body>
</html> 
```

代码隐藏：

```
namespace Upload_Multiple_Files
{
public partial class _default : System.Web.UI.Page
{
    public void RaiseCallbackEvent(string eventArgument)
    {
        string[] files = (eventArgument.TrimEnd('|')).Split('|');

        WebClient client = new WebClient();

        foreach (string file in files)
        {
            client.UploadFile("http://localhost:3850/FileServer.aspx", "POST", file);
        } 
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        string path = @"C:\UploadedFiles\"; // server folder

        string[] keys = Request.Files.AllKeys;

        foreach (String key in keys)
        {
            HttpPostedFile file = Request.Files[key];

            file.SaveAs(path + file.FileName);
        }
    }
}
} 
```

错误发生在行`br = document.createElement("<BR>");` 中：它说“未处理的异常”。我是 javascript 新手，因此没有任何线索是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:06:57.477

document.CreateElement 函数将为您添加标签的 < > 部分。您的代码试图做的是创建一个`<<br>>`无效的元素。仅使用 BR 的标签名称调用该方法：

```
br = document.CreateElement("BR"); 
```

`<br>`这将按照您的预期为您创建一个标签。

# c# - FileSystemWatcher - 文件准备好使用了吗

> ID：12268067
> 
> 赞同：14
> 
> 时间：2012-09-04T16:55:58.357
> 
> 标签：c#, .net, filesystemwatcher

将文件复制到文件监视文件夹时，如何确定文件是否已完全复制并准备好使用？因为我在文件复制期间收到了多个事件。（该文件是通过另一个程序使用 File.Copy 复制的。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T17:20:58.023

当我遇到这个问题时，我想出的最佳解决方案是不断尝试对文件进行排他锁；在写入文件时，锁定尝试将失败，本质上是[此](https://stackoverflow.com/questions/876473/is-there-a-way-to-check-if-a-file-is-in-use)答案中的方法。一旦文件不再被写入，锁定就会成功。

不幸的是，这样做的唯一方法是在打开文件时使用 try/catch，这让我感到畏缩——不得不使用 try/catch 总是很痛苦。不过，似乎没有任何办法解决这个问题，所以这就是我最终使用的。

修改该答案中的代码就可以了，所以我最终使用了这样的东西：

```
private void WaitForFile(FileInfo file)
{
    FileStream stream = null;
    bool FileReady = false;
    while(!FileReady)
    {
        try
        {
            using(stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None)) 
            { 
                FileReady = true; 
            }
        }
        catch (IOException)
        {
            //File isn't ready yet, so we need to keep on waiting until it is.
        }
        //We'll want to wait a bit between polls, if the file isn't ready.
        if(!FileReady) Thread.Sleep(1000);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-10T19:41:17.930

这是一种方法，它将重试文件访问最多 X 次，`Sleep`尝试之间有一次。如果它永远无法访问，则应用程序继续：

```
private static bool GetIdleFile(string path)
{
    var fileIdle = false;
    const int MaximumAttemptsAllowed = 30;
    var attemptsMade = 0;

    while (!fileIdle && attemptsMade <= MaximumAttemptsAllowed)
    {
        try
        {
            using (File.Open(path, FileMode.Open, FileAccess.ReadWrite))
            {
                fileIdle = true;
            }
        }
        catch
        {
            attemptsMade++;
            Thread.Sleep(100);
        }
    }

    return fileIdle;
} 
```

它可以这样使用：

```
private void WatcherOnCreated(object sender, FileSystemEventArgs e)
{
    if (GetIdleFile(e.FullPath))
    {
        // Do something like...
        foreach (var line in File.ReadAllLines(e.FullPath))
        {
            // Do more...
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T17:13:30.853

Note: this problem is not solvable in generic case. Without prior knowledge about file usage you can't know if other program(s) finished operation with the file.

In your particular case you should be able to figure out what operations File.Copy consist of.

Most likely destination file is locked during whole operation. In this case you should be able to simply try to open file and handle "sharing mode violation" exception.

You can also wait for some time... - very unreliable option, but if you know size range of files you may be able to have reasonable delay to let Copy to finish.

You can also "invent" some sort of transaction system - i.e. create another file like "destination_file_name.COPYLOCK" which program that copies file would create before copying "destination_file_name" and delete afterward.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T17:03:53.527

我在写文件时遇到了这个问题。在文件完全写入和关闭之前，我收到了事件。

解决方案是使用临时文件名并在完成后重命名文件。然后注意文件重命名事件而不是文件创建或更改事件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-17T15:31:27.697

```
 private Stream ReadWhenAvailable(FileInfo finfo, TimeSpan? ts = null) => Task.Run(() =>
    {
        ts = ts == null ? new TimeSpan(long.MaxValue) : ts;
        var start = DateTime.Now;
        while (DateTime.Now - start < ts)
        {
            Thread.Sleep(200);
            try
            {
                return new FileStream(finfo.FullName, FileMode.Open);
            }
            catch { }
        }
        return null;
    })
    .Result; 
```

...当然，您可以修改它的各个方面以满足您的需要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-04T03:33:44.193

一种可能的解决方案（在我的情况下有效）是使用 Change 事件。您可以使用刚刚创建的文件的名称登录创建事件，然后捕获更改事件并验证文件是否刚刚创建。当我在更改事件中操作文件时，它没有向我抛出错误“文件正在使用中”

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-26T15:32:31.883

如果您像我一样进行某种进程间通信，您可能需要考虑以下解决方案：

1.  App A 写入您感兴趣的文件，例如“Data.csv”
2.  完成后，应用程序 A 写入第二个文件，例如。“数据。确认”
3.  在您的 C# 应用程序中，让 FileWatcher 监听“*.confirmed”文件。当您收到此事件时，您可以安全地阅读“Data.csv”，因为它已由应用 A 完成。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-07-27T17:34:26.810

我用两个功能解决了这个问题：

1.  实现`MemoryCache`这个问题中看到的模式：[FileSystemWatcher 多次触发事件的强大解决方案](https://stackoverflow.com/questions/47273578/a-robust-solution-for-filesystemwatcher-firing-events-multiple-times)
2.  实现一个访问超时的 try\catch 循环

您需要收集环境中的平均复制时间，并将内存缓存超时设置为至少与新文件的最短锁定时间一样长。这消除了您的处理指令中的重复，并允许一些时间来完成复制。您在第一次尝试时将获得更好的成功，这意味着在 try\catch 循环中花费的时间更少。

这是 try\catch 循环的示例：

```
public static IEnumerable<string> GetFileLines(string theFile)
{
    DateTime startTime = DateTime.Now;
    TimeSpan timeOut = TimeSpan.FromSeconds(TimeoutSeconds);
    TimeSpan timePassed;
    do
    {
        try
        {
            return File.ReadLines(theFile);
        }
        catch (FileNotFoundException ex)
        {
            EventLog.WriteEntry(ProgramName, "File not found: " + theFile, EventLogEntryType.Warning, ex.HResult);
            return null;
        }
        catch (PathTooLongException ex)
        {
            EventLog.WriteEntry(ProgramName, "Path too long: " + theFile, EventLogEntryType.Warning, ex.HResult);
            return null;
        }
        catch (DirectoryNotFoundException ex)
        {
            EventLog.WriteEntry(ProgramName, "Directory not found: " + theFile, EventLogEntryType.Warning, ex.HResult);
            return null;
        }
        catch (Exception ex)
        {
            // We swallow all other exceptions here so we can try again
            EventLog.WriteEntry(ProgramName, ex.Message, EventLogEntryType.Warning, ex.HResult);
        }

        Task.Delay(777).Wait();
        timePassed = DateTime.Now.Subtract(startTime);
    }
    while (timePassed < timeOut);

    EventLog.WriteEntry(ProgramName, "Timeout after waiting " + timePassed.ToString() + " seconds to read " + theFile, EventLogEntryType.Warning, 258);
    return null;
} 
```

Where`TimeoutSeconds`是一个设置，你可以把你的设置放在哪里。这可以针对您的环境进行调整。

# hardware - 程序如何创建虚拟硬件？

> ID：12268070
> 
> 赞同：3
> 
> 时间：2012-09-04T16:56:13.173
> 
> 标签：hardware, virtual, driver

我见过像magicdisc 这样的程序创建虚拟CD 驱动器并将它们安装在机器上。这些程序如何欺骗操作系统，使其认为附加了一个新的硬件设备？

我想我必须为虚拟硬件编写一个驱动程序，而且我在 C 语言中很舒服，所以这听起来并不可怕，但是我如何让操作系统认为有一块硬件连接到它不是？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T16:59:08.227

通常操作系统有不同的层和库，在某些时候有一个库位于它上面的东西和实际硬件之间，你在那里伪造它，如果有某种读取扇区调用，你假装使用读取扇区该扇区地址，从文件中读取它，无论如何。每个操作系统（windows、linux 等）可能以不同的方式做事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:05:01.890

可能您熟悉 C 作为应用程序级别，它高于操作系统。虚拟驱动程序是一个软件，但需要在适当的位置写入设置：Windows 下的注册表，某些 Linux 下的一些配置文件。您需要在内核级别处理操作系统级别的调用和回调。比您希望该软件也能与您的设备通信，可能集成到 OS Shell 中。如果不是 3 层或更多层，则至少有 2 层。

例如windows xp你可以制作一个虚拟显卡（并拦截各种东西），对于Vista不是，只是有一个技巧:)

它是非常特定于操作系统的。

# c# - 如何检查应用程序是否仍在使用 ObjectContext？

> ID：12268072
> 
> 赞同：1
> 
> 时间：2012-09-04T16:56:21.793
> 
> 标签：c#, entity-framework-4, garbage-collection, object-reference

好吧，这个问题几乎说明了一切，但我会尽力为您提供上下文。我正在使用 Entity Framework 4.0，我经常使用以下语法 -

```
using (MLEntities context = ModelAccess.GetContext())
{
    /*just a sample statement*/
    this.ClientList = context.Clients.ToList();
    ...
    //Some other code
} 
```

我的理解是，每当我退出`using`块时，都会调用类（MLEntities`Dispose()`的基类）的方法，我猜这会释放任何非托管资源，特别是在这种情况下，是数据库连接。`ObjectContext`但是由于我通过`this.ClientList = context.Clients.ToList();`上下文持有对上下文对象的引用，因此不会被垃圾收集。正确的？

现在对于一些实例化的上下文对象，当应用程序运行时，我需要知道它们是否仍然被持有、被应用程序使用，或者它们是否已经被释放。我没有对`using`块外上下文的任何引用，但即使我有任何引用，尝试使用该引用也会使应用程序使用上下文对象。那么我该怎么做呢？任何建议表示赞赏。谢谢。

**编辑：**实际上我并不是说我持有对上下文对象的直接引用。诚实的错误。我的意思是，因为`Clients`它是上下文的一个属性，并且通过`this.ClientList`我持有对 的引用`Clients`，只要实例化上下文的当前对象与它一起存在`this.ClientList`，它不会使上下文对象也保持活动状态吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:03:58.023

`using() {}`将始终处置正在使用的对象。您不会通过 ClientList 引用上下文。这是对列表的简单引用。即使您在处理后引用了上下文，在访问它时也会收到[ObjectDisposedException](http://msdn.microsoft.com/en-us/library/system.objectdisposedexception%28v=vs.71%29.aspx)异常。
当上下文被释放时，ClientList 将与上下文分离，因此 EF 不会更多地跟踪此列表的更改。

# visual-studio - 调试 Oracle PL/SQL WEB 应用程序会挂起浏览器和开发工具

> ID：12268076
> 
> 赞同：2
> 
> 时间：2012-09-04T16:56:27.887
> 
> 标签：visual-studio, oracle, debugging, plsql, oracle-sqldeveloper

我对 PL/SQL 相当陌生，并被分配维护一个 PL/SQL 系统，该系统使用 PL/SQL 生成的 WEB 页面作为前端（PL/SQL Web 应用程序？）。由于应用程序的复杂性，我试图从 Oracle Developer Tools for Visual Studio (11.2.0.3.15) 或 Oracle 的 SQL Developer 中获取调试器。

我无法从开发环境启动应用程序，因此我在尝试调试的包中使用 DBMS_DEBUG_JDWP.CONNECT_TCP('10.15.1.177', '4000') 和 DBMS_DEBUG_JDWP.DISCONNECT() 过程。

在 Visual Studio 中启动 Oracle 调试侦听器时，工具 -> 启动 Oracle 外部应用程序调试器，此消息将出现在输出窗口中：

> PL/SQL 调试器启动。PL/SQL 调试器正在监听主机：10.15.1.177 和端口：4000。

在 Oracle SQL Developer 中显示此消息

> 调试监听器（端口=4000 超时=0 本地地址=10.15.1.177）

使用 Visual Studio，如果访问网页并且没有断点，则输出窗口会出现以下消息。

> 数据库已连接到主机：10.15.1.177 和端口：4000 上的 PL/SQL 调试器。线程 0x1 已退出，代码为 0 (0x0)。数据库已与主机：10.15.1.177 和端口：4000 上的 PL/SQL 调试器断开连接。

如果包中的任何位置，在 DBMS_DEBUG_JDWP 语句之前、之间或之后有断点，则 WEB 浏览器和开发环境都会挂起。Visual Studio 一直处于“无响应”状态，直到它被终止。

在 Oracle SQL Developer 中，WEB 页面挂起。如果侦听器停止，则无法显示网页，因为没有可用的侦听器。

我无法控制 Oracle 服务器，但由于 iIt 建立了连接，我假设没有防火墙阻止该端口。？

有人知道我错过了什么吗？

有人告诉我，您不能调试生成网页的 PL/SQL 包，但没有发现任何文档表明存在问题。

谢谢你的帮助，

香农

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T13:54:04.800

我使用 mod_plsql 已经有一段时间了，根据我的个人经验，调试此类应用程序的最佳（如果不是唯一）方法是检测您的源代码。调试器适用于可以在浏览器之外执行的 pl/sql 代码，但对于与 mod_plsql 交互的代码，根据我的经验，最好使用跟踪和日志消息来检测代码并使用它们来遵循程序流程。我们使用了一个非常复杂的日志框架，但这一切都归结为一个简单的表，用于存储日志消息和一个（自治）过程，该过程在该表中插入日志消息。

例子：

```
CREATE TABLE logtab (id NUMBER, when DATE, text VARCHAR2(2000));
CREATE SEQUENCE logseq;
CREATE OR REPLACE
PROCEDURE dolog(text IN VARCHAR2)
IS
    PRAGMA AUTONOMOUS_TRANSACTION;
BEGIN
    INSERT INTO logtab (id, when, text) VALUES (logseq.NEXTVAL, SYSDATE, SUBSTR(text, 1, 2000));
    COMMIT;
END dolog;
/

EXECUTE dolog('test'); 
```

# symfony - Capifony 使用 Symfony2.1 重新安装供应商失败

> ID：12268077
> 
> 赞同：0
> 
> 时间：2012-09-04T16:56:30.723
> 
> 标签：symfony, symfony-2.1, composer-php, capifony

我正在尝试使用**Capifony2.1.14部署****Symfony2.1**项目，但在重新安装 vendor 时失败。

 **配置：我在 Mac OSX Montain Lion（客户端）上，并且在 servergrove.com 上有一台服务器，女巫在 Ubuntu 12.04.1 LTS 上。

我的 deploy.rb 文件如下所示：

```
set :application, "DOA Manager Toshiba"
set :domain,      "root@server.me"
set :deploy_to,   "/var/www/vhosts/server.me"
set :app_path,    "app"
set :user,        "root"
set :use_sudo,    false

set :repository,  "git://github.com/****/****.git"
set :scm,         :git
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `subversion`, `mercurial`, `perforce`, or `none`

set :model_manager, "doctrine"
# Or: `propel`

role :web,        domain                         # Your HTTP server, Apache/etc
role :app,        domain                         # This may be the same as your `Web` server
role :db,         domain, :primary => true       # This is where Symfony2 migrations will run

set  :keep_releases,  3

set :update_vendors,    true
ssh_options[:forward_agent] = true

# Be more verbose by uncommenting the following line
# logger.level = Logger::MAX_LEVEL 
```

这是我终端上的输出： ![我的终端截图](../Images/7a7db4e0d2d2ee5c6a7fc929babe8af6.png)

有人可以向我解释为什么我会收到此错误以及如何解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:14:24.433

您应该添加：

```
set :use_composer, true 
```

到您的 deploy.rb。**

# sql-server - 如果列存在，则在“EXEC”内执行 SQLServer 条件执行

> ID：12268082
> 
> 赞同：2
> 
> 时间：2012-09-04T16:56:42.957
> 
> 标签：sql-server, exec

我是 SQLServer 脚本的新手（通常是 C++ 开发人员），非常感谢您的帮助。

我正在尝试对 SQLServer 数据库中包含“PROJID”列的所有表执行“查找和替换”更新。我真的很难找到一种不向我报告的方法：

消息 207，级别 16，状态 1，行 1 列名“PROJID”无效。

我正在执行的语句是：

```
EXEC
(
  'IF EXISTS(SELECT * FROM sys.columns WHERE name = N''PROJID'' AND Object_ID = Object_ID(N''' + @TableName + '''))' +
  ' BEGIN' +
  ' UPDATE ' + @TableName + 
  ' SET ' + @ColumnName + ' = REPLACE(' + @ColumnName + ',''' + @ReplaceIDStr + ''',''' + @FindIDStr + ''')' +
  ' WHERE ' + @ColumnName + ' LIKE ''' + @ReplaceIDStr + '''' + ' AND PROJID = ''1000''' +
  ' END'
) 
```

我也尝试过使用：

```
'IF COL_LENGTH(''' + @TableName + ''',''PROJID'') IS NOT NULL' + 
```

而不是上面的列存在检查。这也仍然给我“无效的列名”消息。

我很乐意在“Exec”语句之外进行列存在检查，但我也不知道如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:01:24.060

您只需要在不同的范围内执行此操作。

```
IF EXISTS (SELECT 1 FROM sys.columns ...)
BEGIN
  DECLARE @sql NVARCHAR(MAX);
  SET @sql = N'UPDATE ...';
  EXEC sp_executesql @sql;
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:22:49.783

将此查询的结果输出为文本。不要忘记更改变量的值！获取结果并运行它。

```
SET NOCOUNT ON

DECLARE @ColumnName VARCHAR(200) = 'ReplaceColumn'
    , @ReplaceIdStr VARCHAR(200) = 'ExampleReplaceIdStr'
    , @FindIdStr VARCHAR(200) = 'ExampleFindIdStr'

PRINT 'BEGIN TRAN'
PRINT 'SET XACT_ABORT ON'

SELECT
    'UPDATE ' + C.TABLE_NAME + CHAR(13)
    + 'SET ' + @ColumnName + ' = REPLACE(' + @ColumnName + ', ''' + @ReplaceIdStr + ''', ''' + @FindIdStr + ''')' + CHAR(13)
    + 'WHERE ' + @ColumnName + ' LIKE ''%' + @ReplaceIdStr + '%'' AND PROJID = ''1000''' + CHAR(13)
FROM INFORMATION_SCHEMA.COLUMNS C
WHERE C.COLUMN_NAME = 'PROJID'

PRINT 'COMMIT TRAN'

SET NOCOUNT OFF 
```

编辑：另外，一些推理：您说您要更新所有包含名为`PROJID`. 您的第一个查询只是说如果表`@TableName`有`PROJID`列，则`@ColumnName`对其进行更新。但它不能保证上面有@ColumnName。我给出的查询也没有检查，因为我假设所有表`PROJID`也有`@ColumnName`. 如果不是这种情况，请告诉我，我可以更新答案以进行检查。您收到`Invalid Column Name`错误表明`@ColumnName`不存在。

您的查询最多会更新一个表 ( `@TableName`)，而我给您的查询将更新每个具有`PROJID`. 我希望这就是你的目标。

编辑2：这是一个可以一次运行的版本：

```
DECLARE @ColumnName VARCHAR(200) = 'Value'
    , @ReplaceIdStr VARCHAR(200) = 'ExampleReplaceIdStr'
    , @FindIdStr VARCHAR(200) = 'ExampleFindIdStr'

DECLARE @Sql NVARCHAR(MAX)
DECLARE UpdateCursor CURSOR FOR
SELECT
    'UPDATE ' + C.TABLE_NAME
    + ' SET ' + @ColumnName + ' = REPLACE(' + @ColumnName + ', ''' + @ReplaceIdStr + ''', ''' + @FindIdStr + ''')'
    + ' WHERE ' + @ColumnName + ' LIKE ''%' + @ReplaceIdStr + '%'' AND PROJID = ''1000'''
FROM INFORMATION_SCHEMA.COLUMNS C
WHERE C.COLUMN_NAME = 'PROJID'

OPEN UpdateCursor

FETCH NEXT FROM UpdateCursor
INTO @Sql

WHILE @@FETCH_STATUS = 0
BEGIN
    EXEC sp_executesql @Sql

    FETCH NEXT FROM UpdateCursor
    INTO @Sql
END

CLOSE UpdateCursor
DEALLOCATE UpdateCursor 
```

# jquery - jquery for循环显示隐藏元素

> ID：12268085
> 
> 赞同：0
> 
> 时间：2012-09-04T16:56:59.743
> 
> 标签：jquery, for-loop

我对 jQuery 中的 for 循环有疑问。我正在尝试构建一个将动态旋转到最后一个广告的广告部分。

不幸的是，jQuery 为我的增量器提供了一个静态值。

这是我的代码

```
function ads(){

   var i = 0;

   for(i=0; i<=3; i++){    
      $("#adBox").delay(5000).hide("slide", { direction: "up" }, 1000);    
      $("#adBox").delay(1000).show("slide", { direction: "right" }, 1000);    
      $("#adContent").load("adPage" +i+".php");
   }
}    
ads(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:31:31.343

这里有几件事可能是相关的：

*   for 循环语法没有明显的问题。如果您`console.log("i: " + i);`在循环内添加，您应该会在此代码执行时看到四行写入浏览器的 JavaScript 控制台，例如：

```
我：0
我：1
我：2
我：3

```

*   每次循环执行时，都会发生以下事情，顺序如下：

    1.  元素#adBox 的动画队列中添加了 5 秒的延迟，然后将向上滑动的动画添加到队列中。
    2.  将这些项目添加到队列后，无需等待延迟或动画开始，立即将另一个延迟和向右滑动动画添加到同一元素的队列中。
    3.  无需等待延迟或动画执行，就调用 get `"adPage" + i + ".php"`。返回页面后，它将被加载到元素#adContent 中。但是，.load() 方法会*立即*返回，而无需等待页面被检索或加载。
*   for 循环可能在第一次调用 .load() 之前完成了所有四次迭代。

*   最后，关于术语的注释：for 循环是 JavaScript 内置的。它与 jQuery 无关，jQuery 是一个 JavaScript 库。

我怀疑你真正想要发生的事情是这样的：

```
function ads(i) {
    if (i <= 3) {
        $("#adBox").delay(5000).hide("slide", { direction: "up" }, 1000, function() {
            $("#adBox").delay(1000).show("slide", { direction: "right" }, 1000, function() {
                $("#adContent").load("adPage" + i +".php", function() {
                    ads(i + 1);
                });
            });
        });
    }
} 
```

我传递给隐藏、显示和加载的那些匿名函数参数是回调函数。它们只会在每个函数完成后执行。

# javascript - 使用 Handlebar.js

> ID：12268088
> 
> 赞同：6
> 
> 时间：2012-09-04T16:57:04.220
> 
> 标签：javascript, handlebars.js

我实际上是想在 Handlebar.js 上找到一些教程，我发现了这个[http://javascriptplayground.com/blog/2012/05/javascript-templating-handlebars-tutorial](http://javascriptplayground.com/blog/2012/05/javascript-templating-handlebars-tutorial)

但它实际上并没有按预期工作。

我正在做的是我有一个**index.html**文件，

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="http://cloud.github.com/downloads/wycats/handlebars.js/handlebars-1.0.0.beta.6.js" type="text/javascript" charset="utf-8"></script>
        <script src="app.js" type="text/javascript" charset="utf-8"></script>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Messing with Handlebars</title>

    </head>
    <body>
        <script id="ajax-comment" type="text/x-handlebars-template">
            <li>
            <span class="meta">{{name}} on {{date}}</span>
            <p>{{comment}}</p>
            </li>
        </script>

    </body>
</html> 
```

和一个包含代码的**app.js。**

```
var source = $("#ajax-comment").html();
var template = Handlebars.compile(source);
var data = {
    name : "Jack",
    date : "12/04/12",
    comment : "This is a really awesome tutorial. Thanks."
};
$("ul").append(template(data)); 
```

但我得到的只是一个空白页。我在这里犯了什么错误？详细的解释会很有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:01:57.260

`"ul"`元素不存在，你必须将它附加到实际存在的东西上。

只需`<ul></ul>`在身体的某个地方添加一个。

[在这里摆弄](http://jsfiddle.net/3U4uh/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:23:01.627

您可能想检查这个[问题](https://stackoverflow.com/questions/12613967/why-is-browser-returning-error-typeerror-this-input-is-null-in-firefox-and)的答案 似乎 jquery 函数无法访问该元素，因为在调用之前没有加载 DOM。仅在加载有效的 DOM 之后调用 app.js 代码（不将其包装在函数中）的初始更改之后，我尝试了更多组合。例如，我将脚本调用移到了`</body>`它的工作之前。

`... <script src="app.js" type="text/javascript" charset="utf-8"></script> </body>`

它还帮助我了解我们是使用 HTML 还是 XHTML 作为文档类型，以便更好地理解这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T15:43:54.927

尝试将 ref 放在底部的外部 JS 中，就在结束 body 标记的上方

例如

```
<body>
    <ul></ul>
   <!-- last thing on the page--> 
   <script src="app.js" type="text/javascript"></script>
</body> 
```

这似乎已经为我解决了

# jquery - 通过 jquery 获取上一个输入元素

> ID：12268090
> 
> 赞同：0
> 
> 时间：2012-09-04T16:57:18.417
> 
> 标签：jquery, traversal

我的代码

```
<table id="mytable">
<tr>
    <td>Text 5</td>
    <td>Other text 5</td>
    <td><input name="name5" value=""></td>
    <td><input type="checkbox" value="5" name="records"></td>
</tr>
<tr>
    <td>Text 7</td>
    <td>Other text 7</td>
    <td><input name="name7" value=""></td>
    <td><input type="checkbox" value="7" name="records"></td>
</tr>
<tr>
    <td>Text 13</td>
    <td>Other text 13</td>
    <td><input name="name13" value=""></td>
    <td><input type="checkbox" value="13" name="records"></td>
</tr>
</table> 
```

获取中间输入复选框

```
$('#mytable input[type=checkbox][name=records][value=7]') 
```

好的 ：-）

现在，我怎样才能得到上一个输入（）和下一个（）输入？

我试试

```
$('#mytable input[type=checkbox][name=records][value=2]').prev('input[type=checkbox]') 
```

对于上一个，但不起作用:-(

谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:59:49.697

假设您在 中引用了该中间复选框，并且还假设每个元素`checkbox`只有一个复选框后代：`tr`

```
//Previous checkbox:
checkbox.closest("tr").prev().find(":checkbox");

//Next checkbox:
checkbox.closest("tr").next().find(":checkbox"); 
```

这使用 获取祖先`tr`元素[`.closest()`](http://api.jquery.com/closest/)，然后使用[`.prev()`](http://api.jquery.com/prev/)or[`.next()`](http://api.jquery.com/next/)选择上一个或下一个`tr`，然后找到它的任何复选框后代。

还要注意[`:checkbox`](http://api.jquery.com/checkbox-selector/)选择器的使用，它基本上是您当前使用的属性选择器的快捷方式。您可以使用其中任何一种，但属性选择器可能会更快一些，因为它是原生 CSS 选择器。

# android - 如何使用带有签名保护的权限？

> ID：12268091
> 
> 赞同：2
> 
> 时间：2012-09-04T16:57:23.720
> 
> 标签：android, android-permissions

我想学习如何创建一个主应用程序及其关联的关键应用程序。问题是我不知道如何让关键应用程序广播 mainapp.action.VALID 进入主应用程序。

## @MainApp

```
<permission
        android:name="mainapp.permission.CHECK_RESULT"
        android:protectionLevel="signature" />

<application>

    <receiver
        android:name=".ResponseReceiver"
        android:permission="mainapp.permission.CHECK_RESULT" >
        <intent-filter>
            <action android:name="mainapp.action.CHECK_OK" />
        </intent-filter>
    </receiver> 
```

## @KeyApp

```
Intent i = new Intent();
i.setAction("mainapp.action.CHECK_OK");
context.sendBroadcast(i, "mainapp.permission.CHECK_RESULT"); 
```

结果是，意图被拒绝：它需要 mainapp.permission.CHECK_RESULT 权限。但如果我删除权限， mainapp.receiver.ResponseReceiver 可以接收意图，也可以确认两个应用程序使用相同的签名。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:11:09.013

正如 nandeesh 所指出的，您需要 KeyApp 中的相应`<uses-permission>`元素，即 KeyApp 请求`mainapp.permission.CHECK_RESULT`权限。

此外，AFAIK，您的第二个参数将要求MainApp`sendBroadcast()`也具有. 如果这不是您的意图（双关语意图（嵌套双关语意图（哦，不！无限双关语递归！））），我会在通话中删除第二个参数。`<uses-permission>``mainapp.permission.CHECK_RESULT``sendBroadcast()`

# c# - FirstOrLast IObservable 扩展

> ID：12268100
> 
> 赞同：1
> 
> 时间：2012-09-04T16:58:37.870
> 
> 标签：c#, system.reactive

我想`IObservable<T>`寻找与谓词匹配的元素，如果找不到，则返回`IObservable<T>`. 我不想存储整个内容，`IObservable<T>`也不想循环`IObservable`两次，所以我设置了一个扩展方法

```
public static class ObservableExtensions
{
    public static IObservable<T> FirstOrLastAsync<T>(this IObservable<T> source, Func<T, bool> pred)
    {
        return Observable.Create<T>(o =>
        {
            var hot = source.Publish();
            var store = new AsyncSubject<T>();
            var d1 = hot.Subscribe(store);
            var d2 = hot.FirstAsync(x => pred(x)).Amb(store).Subscribe(o);
            var d3 = hot.Connect();
            return new CompositeDisposable(d1, d2, d3);
        });
    }

    public static T FirstOrLast<T>(this IObservable<T> source, Func<T, bool> pred)
    {
        return source.FirstOrLastAsync(pred).Wait();
    }
} 
```

Async 方法从传入的可能很冷的 observable 创建一个 hot observable。它订阅 an`AsyncSubject<T>`以记住最后一个元素，并订阅 an`IObservable<T>`查找该元素。然后它从这些`IObservable<T>`s 中的任何一个中获取第一个元素，该元素首先通过`.Amb`(在收到消息`AsyncSubject<T>`之前不返回值) 返回一个值。`.OnCompleted`

我的问题如下：

*   这可以使用不同的 Observable 方法更好或更简洁地编写吗？
*   是否所有这些一次性用品都需要包含在 CompositeDisposable 中？
*   当 hot observable 在没有找到匹配元素的情况下完成时，FirstAsync 抛出异常和 AsyncSubject 传播其值之间是否存在竞争条件？
*   如果是这样，我是否需要将行更改为：

`var d2 = hot.Where(x => pred(x)).Take(1).Amb(store).Subscribe(o);`

我对 RX 很陌生，这是我对 IObservable 的第一个扩展。

*编辑*

我最终去了

```
public static class ObservableExtensions
{
    public static IObservable<T> FirstOrLastAsync<T>(this IObservable<T> source, Func<T, bool> pred)
    {
        var hot = source.Publish().RefCount();
        return hot.TakeLast(1).Amb(hot.Where(pred).Take(1).Concat(Observable.Never<T>()));
    }

    public static T FirstOrLast<T>(this IObservable<T> source, Func<T, bool> pred)
    {
        return source.FirstOrLastAsync(pred).First();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:30:00.653

您可以将您想要的两个案例放在一起。如果你的源 observable 是冷的，你可以做一个`Publish|Refcount`.

```
 public static IObservable<T> FirstOrLast<T>(this IObservable<T> source, Func<T, bool> predicate)
    {
        return source.TakeLast(1).Amb(source.Where(predicate).Take(1));
    } 
```

测试：

```
 var source = Observable.Interval(TimeSpan.FromSeconds(0.1))
                               .Take(10)
                               .Publish()
                               .RefCount();

        FirstOrLast(source, i => i == 5).Subscribe(Console.WriteLine); //5
        FirstOrLast(source, i => i == 11).Subscribe(Console.WriteLine); //9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T08:26:57.503

我试图产生一个有效的“更简单”的查询，但到目前为止没有。

如果我坚持你的基本结构，我可以提供一点改进。试试这个：

```
public static IObservable<T> FirstOrLastAsync<T>(
    this IObservable<T> source, Func<T, bool> pred)
{
    return Observable.Create<T>(o =>
    {
        var hot = source.Publish();
        var store = new AsyncSubject<T>();
        var d1 = hot.Subscribe(store);
        var d2 =
            hot
                .Where(x => pred(x))
                .Concat(store)
                .Take(1)
                .Subscribe(o);
        var d3 = hot.Connect();
        return new CompositeDisposable(d1, d2, d3);
    });
} 
```

它并没有好得多，但我喜欢它比使用`Amb`. 我认为这只是一个更清洁的东西。

# c# - 使用 TimeZoneInfo.ConvertTime 时夏令时日期错误？

> ID：12268101
> 
> 赞同：3
> 
> 时间：2012-09-04T16:58:42.097
> 
> 标签：c#, .net, time, timezone, dst

2011 年 11 月 6 日凌晨 2 点（美国东部标准时间，例如在纽约），根据[夏令时时间表](http://www.timeanddate.com/worldclock/clockchange.html?n=179&year=2011)，现在是凌晨 3 点。

有人知道为什么`TimeZoneInfo.ConvertTime`.NET 框架中的函数返回以下内容：

```
var tzi = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");
var f = "yyyy/MM/dd HH:mm:ss";
TimeZoneInfo.ConvertTime(new DateTimeOffset(2012, 11, 3, 11, 0, 0, TimeSpan.Zero), tzi).ToString(f);
"2012/11/03 07:00:00"
TimeZoneInfo.ConvertTime(new DateTimeOffset(2012, 11, 4, 11, 0, 0, TimeSpan.Zero), tzi).ToString(f);
"2012/11/04 06:00:00"
TimeZoneInfo.ConvertTime(new DateTimeOffset(2012, 11, 6, 11, 0, 0, TimeSpan.Zero), tzi).ToString(f);
"2012/11/06 06:00:00"
TimeZoneInfo.ConvertTime(new DateTimeOffset(2012, 11, 7, 11, 0, 0, TimeSpan.Zero), tzi).ToString(f);
"2012/11/07 06:00:00" 
```

时间变化似乎发生在 11 月 4 日，这没有任何意义，因为它发生在 6 日。

**编辑：**哇，这个在我身上。我在代码中使用了 2012 而不是 2011。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:01:52.100

看你的描述：

> 2011 年 11 月 6**日**

现在看看你的代码：

```
new DateTimeOffset(2012, 11, 3, 11, 0, 0, TimeSpan.Zero) 
```

我想我们找到了问题所在。

正如 .NET 所说，查看 2012 年的[夏令时时间表显示了 2012年 11 月 4 日发生的变化。](http://www.timeanddate.com/worldclock/clockchange.html?n=179&year=2012)

当然，我仍然认为[Noda Time](http://noda-time.googlecode.com)中的代码会更清晰，但我有偏见:)

# wpf - （MVVM-light）style.triggers 不起作用

> ID：12268103
> 
> 赞同：3
> 
> 时间：2012-09-04T16:58:49.633
> 
> 标签：wpf, mvvm, mvvm-light, datatrigger, attached-properties

我正在`WPF(MVVM)`使用库做项目`mvvm-light`，并且遇到了这样的问题：我想根据我的 ModelView 中的值创建样式触发器，但它不起作用

`XAML`部分 ：

```
<Window...

<Window.DataContext>
        <!-- Declaratively create an instance of our Alarm View Model-->
        <local:AlarmView />
</Window.DataContext>
....

<Grid>
<Grid.RowDefinitions>
            <RowDefinition Height="30" />
            <RowDefinition Height="100" />
</Grid.RowDefinitions>
<Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="100" />
</Grid.ColumnDefinitions>
<Button Grid.Row="0" Command="{Binding ChangeLocation}" Content="Click"></Button>    
<ListView 
         Grid.Row="1"
         Name="LV1" 
         ItemsSource="{Binding Items}"
         >
<ListView.Style>
            <Style TargetType="{x:Type ListView}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Location}" Value="0">
                        <Setter Property="Grid.ColumnSpan" Value="3"></Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Location}" Value="1">
                        <Setter Property="Grid.ColumnSpan" Value="1"></Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Location}" Value="2">
                        <Setter  Property="Grid.ColumnSpan" Value="2"></Setter>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding Location}" Value="3">
                        <Setter Property="Grid.ColumnSpan" Value="3"></Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ListView.Style>    
 </ListView>
 </Grid>
 </Window> 
```

部分来自`ModelView`：

```
class AlarmView : ViewModelBase
{
...
int _location = 0;
...
public int Location 
    {
        get { return _location; }
        set 
        {
            _location = value;
            RaisePropertyChanged("Location");
        }
    }    
...
public RelayCommand ChangeLocation { get; set; }
...
ChangeLocation = new RelayCommand(() => 
        {
            if (Location < 3)
            {
                Location++;
            }
            else Location = 0;
        });
... 
```

似乎没问题，但是当我更改位置时，什么也没有发生。为了检查我的命令，我将它绑定到`TextBox`- all works。哪里可能有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T07:46:20.597

你试过`UpdateSourceTrigger=PropertyChanged`在你的绑定上使用吗？我有一个类似的问题，并为我解决了这个问题。

```
<DataTrigger Binding="{Binding Location, UpdateSourceTrigger=PropertyChanged}" Value="0">
     <Setter Property="Grid.ColumnSpan" Value="3"></Setter>
</DataTrigger> 
```

# css - Firefox 中奇怪的 CSS 行为

> ID：12268109
> 
> 赞同：1
> 
> 时间：2012-09-04T16:59:16.527
> 
> 标签：css, firefox

如果有人能告诉我为什么这个 WordPress 主题中的标题栏在 Firefox 中不起作用，我将不胜感激。

如果您向下滚动一点，并查看标题“最近的作品”。在 Chrome IE 等上，该栏从左侧开始，然后为标题中断，并继续包装器宽度的其余部分。在 Firefox 中，标题栏不显示在标题的左侧，而仅在标题之后开始。

请在此处查看主题：http: [//mcstudiosmx.com/demo/wp/hi-wordpress/](http://mcstudiosmx.com/demo/wp/hi-wordpress/)

懒惰的开发人员尚未为此发布修复程序，我找不到解决方法。任何帮助/建议都会很棒:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:08:54.480

尝试将 left 属性添加到以下内容：

```
block-title .stripe {
background: transparent url(images/template/stripe.png) repeat-x right center;
display: inline-block;
height: 21px;
margin: 4px 17px 0 0;
width: 100%;
position: absolute;
left:0;
} 
```

# php - 不插入数据库机器人/蜘蛛/爬虫活动

> ID：12268112
> 
> 赞同：0
> 
> 时间：2012-09-04T16:59:22.113
> 
> 标签：php, mysql, bots

在我的网页上，我注册了访问者的活动以进行分析。

但是，结果会受到机器人访问的影响。

我想知道在将数据保存到数据库之前检查 user_agent 是否是一种聪明的方法（请参阅底部的功能）。我担心我的网络上的繁重负载。有很多机器人，我不知道在每次访问中检查 user_agent 与 30 个机器人列表是否有效。

```
$bots = array( 'googlebot', 'msnbot', 'baidu', ... up to 30 );
$isRobot = false;
$ua = strtolower( $_SERVER['HTTP_USER_AGENT'] );

foreach ( $bots as $bot ) {
        if ( strpos( $ua, $bot ) !== false )
            $isRobot = true;
        }

        if ( !$isRobot ) {
            // insert in the db
        }
    } 
```

另一种方法是允许插入数据库并在之后删除它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:27:42.203

使用[in_array](http://php.net/in_array)：

```
$bots = array( 'googlebot', 'msnbot', 'baidu', ... up to 30 );
$isRobot = false;
$ua = strtolower( $_SERVER['HTTP_USER_AGENT'] );

if(in_array($ua, $bots)) {
    $isRobot = true;
}
if ( !$isRobot ) {
    // insert in the db
} 
```

# php - 导入 CSV，排除第一行

> ID：12268114
> 
> 赞同：4
> 
> 时间：2012-09-04T16:59:23.097
> 
> 标签：php, mysql, csv, import-from-excel

我现在正在导入我的 csv，除了一件事，我如何让导入忽略第一行中的数据？员工将上传与第一行中的列名相同的格式。

```
if (isset($_POST['submit'])) {
    if (is_uploaded_file($_FILES['filename']['tmp_name'])) {
        echo "<h1>" . "File " . $_FILES['filename']['name'] . " uploaded successfully." . "</h1>";
        echo "<h2>Displaying contents:</h2>";
        readfile($_FILES['filename']['tmp_name']);
    }

    //Import uploaded file to Database
    $handle = fopen($_FILES['filename']['tmp_name'], "r");

    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $import = "INSERT into tictoc(employee,taskname,tasktime,sessiontime,sessionstart,sessionend,sessionnotes) values('" . $userinfo['first_name'] . " " . $userinfo['last_name'] . "','$data[0]','$data[1]','$data[2]','$data[3]','$data[4]','$data[5]')";

        mysql_query($import) or die(mysql_error());
    }

    fclose($handle);

    print "Import done";
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T17:01:20.367

只需设置一个变量`$i = 0` 然后仅插入何时`$i = 1`或更多

```
if (isset($_POST['submit'])) {
    $i=0; //so we can skip first row

    if (is_uploaded_file($_FILES['filename']['tmp_name'])) {
        echo "<h1>" . "File ". $_FILES['filename']['name'] ." uploaded successfully." . "</h1>";
        echo "<h2>Displaying contents:</h2>";
        readfile($_FILES['filename']['tmp_name']);
    }

    //Import uploaded file to Database
    $handle = fopen($_FILES['filename']['tmp_name'], "r");

    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        if($i>0) {
            $import="INSERT into tictoc(employee,taskname,tasktime,sessiontime,sessionstart,sessionend,sessionnotes) values('".$userinfo['first_name']." ".$userinfo['last_name']."','$data[0]','$data[1]','$data[2]','$data[3]','$data[4]','$data[5]')";

            mysql_query($import) or die(mysql_error());
        }
        $i++;
    }

    fclose($handle);

    print "Import done";
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T17:50:19.577

您可以简单地使用 MySQL 的[`LOAD DATA INFILE`](http://dev.mysql.com/doc/en/load-data.html)命令，这比将 CSV 解析为 PHP、为每条记录构造一个语句、将其作为字符串提交给 MySQL 并让 MySQL 为 SQL 解析所述字符串（有 SQL 注入的风险）要[快得多：](http://dev.mysql.com/doc/en/insert-speed.html)`INSERT`

```
LOAD DATA INFILE ? INTO TABLE tictoc
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
IGNORE 1 LINES
(tasktime, sessiontime, sessionstart, sessionend, sessionnotes)
SET employee = ?, taskname = ? 
```

使用 PDO：

```
$dbh = new PDO('mysql:dbname='.$dbname, $username, $password);

if (is_uploaded_file($_FILES['filename']['tmp_name'])) {
  $qry = $dbh->prepare('
    LOAD DATA INFILE :filepath INTO TABLE tictoc
    FIELDS TERMINATED BY \',\' OPTIONALLY ENCLOSED BY \'"\'
    IGNORE 1 LINES
    (tasktime, sessiontime, sessionstart, sessionend, sessionnotes)
    SET employee = :employee, taskname = :taskname
  ');

  $qry->execute(array(
    ':filepath' => $_FILES['filename']['tmp_name'],
    ':employee' => $userinfo['first_name'],
    ':taskname' => $userinfo['last_name']
  ));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T00:30:49.863

不需要变量。它比这简单得多。这是一个需要最少外部代码的解决方案，并且工作得很好。尝试放置：

```
$headers = fgetcsv($handle, 1000, ","); 
```

在获取 CSV 数据的 while() 循环之前。这会抓住标题，但不会将它们插入数据库。一旦 while 循环开始，第一行已经返回，因此将它们排除在 mysql 插入之外。最重要的是，似乎需要标题，所以这也解决了这个问题。

所以最后，

```
if (isset($_POST['submit'])) {
    if (is_uploaded_file($_FILES['filename']['tmp_name'])) {
        echo "<h1>" . "File " . $_FILES['filename']['name'] . " uploaded successfully." . "</h1>";
        echo "<h2>Displaying contents:</h2>";
        readfile($_FILES['filename']['tmp_name']);
    }

    //Import uploaded file to Database
    $handle = fopen($_FILES['filename']['tmp_name'], "r");

    //Grab the headers before doing insertion
    $headers = fgetcsv($handle, 1000, ",");

    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $import = "INSERT into tictoc(employee,taskname,tasktime,sessiontime,sessionstart,sessionend,sessionnotes) values('" . $userinfo['first_name'] . " " . $userinfo['last_name'] . "','$data[0]','$data[1]','$data[2]','$data[3]','$data[4]','$data[5]')";

        mysql_query($import) or die(mysql_error());
    }

    fclose($handle);

    print "Import done";
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-04T17:03:17.040

如果你喜欢，也许你可以使用这种方式：

```
$i=0;
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $i++;
    if($i==1) continue;

    $import="INSERT into tictoc(employee,taskname,tasktime,sessiontime,sessionstart,sessionend,sessionnotes) values('".$userinfo['first_name']." ".$userinfo['last_name']."','$data[0]','$data[1]','$data[2]','$data[3]','$data[4]','$data[5]')";

     mysql_query($import) or die(mysql_error());
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-04T17:09:19.980

我已经实现了这段代码，它是经过测试的代码。我认为这是非常充分的

您必须遵循一些规则：-

1.你的csv文件根据数据库表名（例如：db表名是users然后csv应该是users.csv）

2.您的 csv 文件的第一行应该是 db 表字段名称（例如：ID、名称等），然后开始您的数据输入

3.您可以从以下位置下载数据源类：- [http://code.google.com/p/php-csv-parser/](http://code.google.com/p/php-csv-parser/)因为我在代码下面有要求：require_once 'CSV/DataSource.php';

```
<?php
ini_set('memory_limit','512M');
$dbhost = "localhost";
$dbname = "excel_import";
$dbuser = "root";
$dbpass = "";

$conn=mysql_connect ($dbhost, $dbuser, $dbpass) or die ("I cannot connect to the database because: " . mysql_error());
mysql_select_db($dbname) or die("Unable to select database because: " . mysql_error());

require_once 'CSV/DataSource.php';

$filename = "users.csv";
$ext = explode(".",$filename);
$path = "uploads/".$filename;

$dbtable = $ext[0];

import_csv($dbtable, $path);

function import_csv($dbtable, $csv_file_name_with_path)
{
    $csv = new File_CSV_DataSource;
    $csv->load($csv_file_name_with_path);

    $csvData = $csv->connect();

    $res='';
    foreach($csvData  as $key)
    {
        $myKey ='';
        $myVal='';
        foreach($key as $k=>$v)
        {
            $myKey .=$k.',';
            $myVal .="'".$v."',";
          }

        $myKey = substr($myKey, 0, -1);
        $myVal = substr($myVal, 0, -1); 
        $query="insert into ".$dbtable." ($myKey)values($myVal)";
        $res=  mysql_query($query);

    }

    if($res ==1)
    {

                echo "record successfully Import.";

    }else{

                echo "record not successfully Import.";
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-04T17:01:28.310

你可以试试这个：

```
array_shift($data); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-02T07:13:11.517

`while`在循环前声明一个变量

```
$row=1; 
```

然后在`while`循环中放置这个条件

```
if($row==1){
   $row++; 
   continue;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-28T11:09:11.047

```
if (isset($_POST['submit'])) {
if (is_uploaded_file($_FILES['filename']['tmp_name'])) {
    echo "<h1>" . "File " . $_FILES['filename']['name'] . " uploaded successfully." . "</h1>";
    echo "<h2>Displaying contents:</h2>";
    readfile($_FILES['filename']['tmp_name']);
}

//Import uploaded file to Database
$handle = fopen($_FILES['filename']['tmp_name'], "r");
fgetcsv($handle); //skip the reading of the first line from the csv file

while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $import = "INSERT into tictoc(employee,taskname,tasktime,sessiontime,sessionstart,sessionend,sessionnotes) values('" . $userinfo['first_name'] . " " . $userinfo['last_name'] . "','$data[0]','$data[1]','$data[2]','$data[3]','$data[4]','$data[5]')";

    mysql_query($import) or die(mysql_error());
}

fclose($handle);

print "Import done"; 
```

}

# javascript - jQuery选择器缓存问题

> ID：12268116
> 
> 赞同：1
> 
> 时间：2012-09-04T16:59:29.990
> 
> 标签：javascript, jquery, jquery-ui, caching, jquery-selectors

问题是，当我每次编写 HTML 标签的 id 时，下面的代码都有效。但是当我缓存它们时，它不会。我错过了什么？

这是我的代码：

```
var NewFormContainer=$("#NewUserFormContainer"), opener=$("#nufcOpen"), closer=$("#nufcClose"), NewForm=$("#NewUserForm");
$(function() {
    $( "#userType" ).buttonset();
    $(".btn").button();

    closer.button({
        icons: {
            primary: "ui-icon-closethick"
        }, text: false
    }).click(function(){
        NewFormContainer.slideUp("slow");
    });
    opener.click(function(){
        NewFormContainer.slideDown("slow");
    });
}); 
```

顺便说一句，控制台中没有错误。我也在使用 jQ-UI

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:03:26.197

准备好后，您需要`cache`他们`dom`。

```
$(function() {
    $( "#userType" ).buttonset();
    $(".btn").button();

    var NewFormContainer=$("#NewUserFormContainer"),
        opener=$("#nufcOpen"),
        closer=$("#nufcClose"),
        NewForm=$("#NewUserForm");

    closer.button({
      icons: {
        primary: "ui-icon-closethick"
      }, text: false
    }).click(function(){
        NewFormContainer.slideUp("slow");
    });

    opener.click(function(){
        NewFormContainer.slideDown("slow");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:03:38.940

当您缓存它们时，它们会在 document.ready 之前进行评估。试试这个：

```
var NewFormContainer="#NewUserFormContainer", opener="#nufcOpen", closer="#nufcClose", NewForm="#NewUserForm";
$(function() {
  opener = $(opener);
  closer = $(closer);
  NewFormContainer = $(NewFormContainer);
  NewForm = $(NewForm);
  ... 
```

# perl - 如何覆盖 DBIx::Class Tables 中的“新”方法

> ID：12268119
> 
> 赞同：1
> 
> 时间：2012-09-04T16:59:44.857
> 
> 标签：perl, dbix-class

我在这里读过[http://search.cpan.org/~frew/DBIx-Class-0.08200/lib/DBIx/Class/Manual/Cookbook.pod#Setting_default_values_for_a_row](http://search.cpan.org/~frew/DBIx-Class-0.08200/lib/DBIx/Class/Manual/Cookbook.pod#Setting_default_values_for_a_row)，一种为列设置默认值的方法是覆盖**新**的方法。

我的问题是我的新方法永远不会被调用。

**用户.pm**

```
package MyApp::SchemaTest::Result::User;
use strict;
use warnings;
use base qw/DBIx::Class::Core/;

sub new {
    die "new: @_";
}
__PACKAGE__->table("GECKO_USER");
__PACKAGE__->add_columns(
  "user_id",
  { data_type => "integer", is_auto_increment => 1, is_nullable => 0 },
  "first_name",
  { data_type => "varchar2", is_nullable => 0, size => 45 },
  "last_name",
  { data_type => "varchar2", is_nullable => 0, size => 45 } );
__PACKAGE__->set_primary_key("user_id");

1; 
```

**测试.pl**

```
use Gecko2::SchemaTest;

my $schema = Gecko2::SchemaTest->connect("dbi:SQLite:$FindBin::Bin/../db/gecko2.sqlite");
ok($schema, "got schema");

my $user = $schema->resultset('User')->find( { login => 'toto' });
use DDP;
p $user; 
```

而且我得到了完全构造和可操作的 $user 对象，这意味着我的全新方法永远不会被调用。 **为什么不 ？？？**

我试图移动它但没有任何成功......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:27:32.827

我你调用 find 一个 Result/Row 对象是从数据库中的值构造的。食谱中描述的案例是用于创建新的行对象，例如通过调用 $rs->create。

为什么要覆盖来自数据库的值？

请注意，您还可以使用“default_value”属性为列设置默认值。如果使用 new_result 构造行对象，则不会设置列值，但如果使用 $schema->deploy 部署数据库，则设置数据库默认列值。

如果要设置新行对象的值，请查看[DBIx::Class::DynamicDefault](https://metacpan.org/module/DBIx%3a%3aClass%3a%3aDynamicDefault)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:55:19.017

我最终找到了解决方案：要控制数据库/存储中行对象的实例化，您需要覆盖**inflate_default**方法。

从文档：

> 从数据库中检索数据并将其转换为行对象的所有 DBIx::Class::ResultSet 方法都调用此方法 (*inflate_default*)。
> 
> 在您的 Result 类中扩展此方法以挂钩此过程，例如将结果重新分配到不同的类中。

当然如果你需要通过新方法来控制行对象的实例化，你必须重写它。

总而言之，如果你想挂钩行对象的每个可能的实例化，你必须同时覆盖**inflate_result**和**new**。

# php - 如果通过 $.get(..) 发送 HTML，则 jquery 数据表格式不正确

> ID：12268121
> 
> 赞同：0
> 
> 时间：2012-09-04T16:59:48.637
> 
> 标签：php, jquery, html, datatables

如果`content.php`我没有用数据填充表，那么我可以看到格式正确的 jquery 数据表。但是，如果我用数据填充它（我尝试了数据库数据和一些随机数的手动输入），它不再被格式化并且看起来像地狱。`$.get(..)`在这个例子中， （用于）是否会发生`test.php`无法正常工作的情况？

**测试.php**

```
 $(document).ready(function() {
        loadContent();
    });

    function loadContent() {
                            $.get('modules/mod_scheduler/content.php', function(data) {
                                $('#table').html(data);
                            });     
    }

<div id="table"></div> 
```

**内容.php**

```
<?php
    include_once '../../include/connect_db.php';

    $query = "SELECT * FROM `TestTable`";
    $result=execute_query($query);

?>

    <table id="newspaper-b" border="0" cellspacing="2" cellpadding="2" width = "100%">
                        <thead>
                            <tr>
                                <th scope="col">Flight Num</th>
                                <th scope="col">Appearance Time</th>
                                <th scope="col">Target Time</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <?php while($row=mysql_fetch_assoc($result)) {
                                        $flightNum=$row['flightNum'];
                                        $appearanceTime=$row['appearanceTime'];
                                        $targetTime=$row['targetTime'];
                            ?>
                            <tr>
                                <td><?php echo $flightNum; ?></td>
                                <td>

                                        <?php echo $appearanceTime;?>

                                </td>
                                <td>

                                        <?php echo $targetTime;?>

                                </td>

                                <td id="<?php echo $flightNum; ?>">
                                    <div>
                                        <img src='modules/images/edit.png' alt='Edit' />
                                    </div>
                                </td>
                            </tr>
                            <?php }?>
                        </tbody>
    </table> 
```

当然，我还定义了以下内容：

```
<link type="text/css" rel="stylesheet" href="modules/mod_scheduler/css/demo_table.css"/>
<link type="text/css" rel="stylesheet" href="modules/mod_scheduler/css/demo_page.css"/>
<link type="text/css" rel="stylesheet" href="modules/mod_scheduler/css/demo_table_jui.css"/>

<script type="text/javascript" src="modules/mod_scheduler/js/dataTable/jquery-ui.js"></script>
<script type="text/javascript" src="modules/mod_scheduler/js/dataTable/jquery.dataTables.js"></script>

<script language="javascript" type="text/javascript" src="modules/mod_scheduler/js/jqplot/plugins/jqplot.pointLabels.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:03:08.053

您可以在 ajax 更新时重新加载样式表，但它应该在新元素上自动应用 CSS 样式。

```
$(document).ready(function() {
    loadContent();
});

function loadContent() {
    $.get('modules/mod_scheduler/content.php', function(data) {
        $('#table').html(data);
        var randomString = '?r=' + Math.random();
        $('link[rel="stylesheet"]').each(function () {
            this.href = this.href.replace(/\?.*|$/, randomString);
        }); 
    });
} 
```

如果它仍然不起作用，请尝试在该`table`div 中手动应用从 AJAX 生成的内容，也许你的 css 中有错误 .. 一些`//`作为评论 .. 我犯了这样的错误 ..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:14:41.553

您正在返回一张桌子，但您没有`dataTable()`在我看到的情况下调用它。DataTables 插件的工作方式通常是`dataTable()`在表上调用。我不记得“任意”样式表会发生什么（无论您为表格设置了什么样式），但如果您使用的是 jQuery UI（看起来像您），它肯定看起来不对直到您调用该函数，从而为 jQuery UI 主题添加所有必要的类。您可以返回表中已经存在的那些类，但目前还没有。

由于您是在服务器端执行此操作，因此我会更进一步，为表返回 JSON 格式的数据，而不是一大堆表标记。这是使用 DataTables 的更优雅和更易于管理的方式。

# android - 使用列表<> 填充 builder.setItem

> ID：12268123
> 
> 赞同：1
> 
> 时间：2012-09-04T16:59:56.110
> 
> 标签：android, list, android-alertdialog, builder

我正在尝试使用 Builder 构建一个 AlertDialog。我的对话框必须有多个用户可以选择的选项。我在 android 开发者网站上发现我可以使用 builder.setItems(int, DialogInterface.onClickListener)。我的问题是我试图传递一个列表地址而不是 int。我希望用户从地址列表中选择一个选项。这是我的说明代码：

```
 private List<Address> addresses;

    protected void updateMap() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Pick an Address");

    builder.setItems(addresses, new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface arg0, int choosenAddress) {

            //address = addresses.get(choosenAddress); //choose result from the array

        }
    }); 
```

在builder.setItems ..我得到一个错误，说这个参数没有列出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:08:07.083

`SetItems`将字符序列数组作为参数，因此您必须转换`List<Address>`为`List<String>`然后使用`list.toarray()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:39:30.443

**对nandeesh**的回答的扩展

```
String [] addressStrings = new String [addresses.size()];

for(int i=0; i<addresses.size(); i++)
    addressStrings[i] = addresses.get(i).toString(); 
```

您需要重写类的`toString()`方法`Address`，以创建有意义`String`的`Address`对象表示。

现在在该`onClick()`方法中，您仍然可以通过给定索引访问对象，因为列表和数组`Address`的大小和元素顺序是相同的。`addresses``addressStrings`

```
Address selected = addresses.get(choosenAddress); 
```

# python - 匹配/搜索列表元素中的字典键

> ID：12268130
> 
> 赞同：0
> 
> 时间：2012-09-04T17:00:39.263
> 
> 标签：python

我有一本字典，

```
dct = {'slab1': {'name':'myn1', 'age':20}, 'slab2':{'name':'myn2','age':200}}
lst = {'/store/dir1/dir_slab1/tindy', '/store/dir2/dirslab2_fine/tunka','/store/dir1/dirslab3/lunku'} 
```

如何搜索列表元素中字典的键“slab1”、“slab2”？如果有匹配项，我想从字典中打印匹配的元素和“年龄”。所以，在上面的例子中，我应该得到类似的东西：

```
 '/store/dir1/dir_slab1/tindy', 20
  '/store/dir2/dirslab2_fine/tunka', 200 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:04:01.057

```
>>> dct = {'slab1': {'name':'myn1', 'age':20}, 'slab2':{'name':'myn2','age':200}}
>>> lst = {'/store/dir1/dir_slab1/tindy', '/store/dir2/dirslab2_fine/tunka','/store/dir1/dirslab3/lunku'}
>>> for item in lst:
...    for pattern in dct:
...       if pattern in item:
...           print "%s, %s" % (item, dct[pattern]["age"])
... 
/store/dir1/dir_slab1/tindy, 20
/store/dir2/dirslab2_fine/tunka, 200 
```

您还可以使用列表理解符号来获取对：

```
>>> [(item, dct[pattern]["age"]) for item in lst for pattern in dct if pattern in item]
[('/store/dir1/dir_slab1/tindy', 20), ('/store/dir2/dirslab2_fine/tunka', 200)] 
```

PS您的问题中有一些误解（例如，`list`变量不是列表），但解决方案应该是这样的。

# ruby-on-rails - iOS设备如何在没有用户登录的情况下向服务器标识自己

> ID：12268132
> 
> 赞同：1
> 
> 时间：2012-09-04T17:00:46.310
> 
> 标签：ruby-on-rails, json, authentication, ios5, authorization

我正在编写一个带有 Rails API 后端的 iOS 应用程序。Rails 后端将向应用程序提供 JSON 数据。我有以下要求。

1.  该应用程序将免费下载
2.  该应用程序将在地图上显示数据
3.  该应用程序将在用户附近显示数据
4.  加载应用程序后，设备应向服务器发送一些唯一标识符，将其标识为运行此应用程序的设备。
5.  由于不需要，因此不会对用户进行身份验证。下载该应用程序的任何人都可以使用这些数据。服务器只需要知道客户端是运行应用程序的设备。服务器无法向任何其他客户端提供数据
6.  我想在设备和服务器之间使用 SSL 运行数据
7.  用户位置将被发送到服务器，服务器返回用户附近的相应数据
8.  客户端接收 JSON 并在本地缓存数据。

**问题：**鉴于这些要求，如何设置步骤 4 和 5？

另外：如果我想在这个主题上搜索更多，我应该搜索哪些关键字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:04:02.157

考虑使用[OpenUDID](https://github.com/ylechelle/OpenUDID)或[SecureUDID](http://www.secureudid.org)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:36:44.153

我给你2个选择。

首先，简单的方法。一段时间以来，苹果禁止访问设备 ID。但是，它们会给您一个设备令牌。

要获得此唯一令牌，用户必须注册远程通知。

在应用程序启动时，调用以下函数：

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes (UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)]; 
```

然后将调用此回调：

```
 - (void)application:didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken. 
```

将令牌发送到您的服务器，您就完成了。这种方法的问题是显而易见的。您的用户必须注册远程通知。

另一种方法是使用 wi-fi 板的 MAC 地址。

去做这个：

[IP地址.h](http://www.chrisandtennille.com/code/IPAddress.h)

[IP地址.c](http://www.chrisandtennille.com/code/IPAddress.c)

将此文件导入您的项目。然后使用这个函数：

```
InitAddresses();
GetHWAddresses();

for (int i=0; i<MAXADDRS; ++i)
{
    //There is a way you can obtain more info about the hw_addrs, but in general, it's the first.
    NSLog(@"MAC: %s",  hw_addrs[i]);
}

FreeAddresses(); 
```

使用上面的mac地址创建一个哈希，你就完成了。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:04:34.940

首次启动时，应用程序向服务器发送一个请求，说*嗨，我是新客户，给我一个 id！*服务器生成一个新的随机 id 并将其发回。该应用程序将 id 保存在本地，并在以后使用它来唯一标识自己。

# sql - Oracle concat a dynamic value

> ID：12268137
> 
> 赞同：0
> 
> 时间：2012-09-04T17:01:15.563
> 
> 标签：sql, oracle

I need to update a table column with values that are derieved. To add little more complexity, I need to concat a value based on the derivate and hence the value to append for concat is not always the same. I came up with this query, but it apparently has a problem executing.

```
 update TRANSFER set PROCESS_STATUS = concat ( PREDICATE , 
                (select dom_value from DOMAIN_VALUES dv where dv.val_id = st.sr_cashflow_status
CASE PREDICATE WHEN dv.dom_value = 'ZZZZ' THEN 'SPB'
                         WHEN dv.dom_value = 'XXXX' THEN 'SPB'
                         WHEN dv.dom_value = 'YYYY' THEN 'SPB'
              ELSE 'DPS'
                         END ))         from TRANSFER st
    where PROCESS_STATUS is null; 
```

My main problem is that how do I maintain the appender (here, predicate) as dynamic value that can be checked on the value obtained by join?

Any answers/directions much appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:11:42.907

I guess you are trying to achieve something like below (considering `PREDICATE` is a column in `TRANSFER` table)-

```
MERGE INTO TRANSFER st 
   using (select CASE 
            WHEN dv.dom_value = 'ZZZZ' THEN 'SPB'
            WHEN dv.dom_value = 'XXXX' THEN 'SPB'
            WHEN dv.dom_value = 'YYYY' THEN 'SPB'
            ELSE 'DPS'
            END as key,
            val_id
           from DOMAIN_VALUES) dv
      on (dv.val_id = st.sr_cashflow_status and st.PROCESS_STATUS is NULL)         
    WHEN MATCHED THEN
         UPDATE SET PROCESS_STATUS = concat(PREDICATE,dv.key); 
```

OR

```
MERGE INTO TRANSFER st 
       using (select CASE 
                WHEN dv.dom_value = 'ZZZZ' THEN 'SPB'
                WHEN dv.dom_value = 'XXXX' THEN 'SPB'
                WHEN dv.dom_value = 'YYYY' THEN 'SPB'
                ELSE 'DPS'
                END as key,
                val_id
               from DOMAIN_VALUES) dv
          on (dv.val_id = st.sr_cashflow_status and st.PROCESS_STATUS is NULL)         
        WHEN MATCHED THEN
             UPDATE SET PROCESS_STATUS = PREDICATE||dv.key; 
```

A quick note on your `CASE` statement syntax. The syntax looks incorrect since you do not compare the outcome of the `CASE` with anything since you are using this in a `WHERE` clause, also you are missing `AND` clause too.

```
update TRANSFER set PROCESS_STATUS = concat ( PREDICATE , 
                (select dom_value from DOMAIN_VALUES dv where dv.val_id =            st.sr_cashflow_status
                   CASE PREDICATE WHEN dv.dom_value = 'ZZZZ' THEN 'SPB' -- and clause missing
                         WHEN dv.dom_value = 'XXXX' THEN 'SPB'
                         WHEN dv.dom_value = 'YYYY' THEN 'SPB'
                   ELSE 'DPS'
                         END ))         --comparison missing like CASE ... END = 'SPB' since the case is inside WHERE
       from TRANSFER st                 -- you cannot have a FROM clause in UPDATE
    where PROCESS_STATUS is null; 
```

# android - android：创建 json 对象或数组？

> ID：12268138
> 
> 赞同：0
> 
> 时间：2012-09-04T17:01:18.370
> 
> 标签：android, json, parsing, object

我每天都在学习更多关于 android 开发和 json 代码的知识。但现在我坚持这一点；我可以从我的在线数据库中获取我的值并显示它，但我看到了整个 json 代码。我想只看到我想要展示的部分。

这是我的代码，我认为它真的很基础，但我也在学习:)

如您所见，我只是从网页中获取值并将其放入我的文本视图中，但我想将其放入 JSONObject 或 JSONArray 中，但不知道哪个更好。

有人可以帮我吗？

亲切的问候

```
public class Bordje extends Activity{

public void onCreate (Bundle savedInstanceState) {
    try
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.bordje);

        //This is out textview element, obtained by id from XML Layout
        TextView myListView = (TextView)findViewById(R.id.netResult2);

        //Lets connect to the internet
        try {
            String result = "";
            //create new client object
            HttpClient httpclient = new DefaultHttpClient();
            //now post to the url
            HttpPost httppost = new HttpPost("http://www.wvvzondag2.nl/android/leesbordje.php");
            //execute url
            HttpResponse response = httpclient.execute(httppost);
            //get message from the response
            HttpEntity entity = response.getEntity();
            //get the content from message
            InputStream webs = entity.getContent();

            //convert response to string
            try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(webs, "iso-8859-1"),8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                }
                //slow our inputstream
                webs.close();
                //puts the resut into a string
                result=sb.toString();
            }catch(Exception e){
                Log.e("log_tag", "Error converting result "+e.toString());
            }

            //Parsing the JSON Data
            try{
                JSONArray jArray = new JSONArray(result);
                for(int i=0;i<jArray.length();i++){
                        JSONObject json_data = jArray.getJSONObject(i);
                        json_data.getString("introtext");
                        //Get an output to the screen
                        //then here should be some code that displays text?
                        //myListView.setText(Html.fromHtml(json_data)); ?
                }

            }catch(JSONException e){
                    Log.e("log_tag", "Error parsing data "+e.toString());
            }

        }catch(Exception e){
            Log.e("log_tag", "Error in http connection"+e.toString());
        }

    }
    catch (Exception e)
    {
        //this is the line of code that sends a real error message to the log
        Log.e("ERROR", "ERROR IN CODE: " + e.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:07:04.403

这不是哪个更好的问题。JSON 对象和 JSON 数组是两个不同的东西。

JSON 数组是（类似）项目的有序序列（http://www.json.org/javadoc/org/json/JSONArray.html）。

```
JSONArray jsonArray = new JSONArray("[JSON TEXT]");
String textToDisplay = jsonArray.getString(index); //return String at index 
```

JSON 对象是一个地图 (http://www.json.org/javadoc/org/json/JSONObject.html)。

```
JSONObject jsonObj = new JSONObject("[JSON TEXT]");
String textToDisplay = jsonObj.getString("key"); //returns String value 
```

然后在获得数据后，像以前一样在文本视图中设置它。

```
myListView.setText(textToDisplay); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:09:51.773

如果您从服务器获得有效的 json，您可以根据您获得的对象简单地制作一个`JSONArray`或`JSONObject`其中一个，因此没有必要说哪个更好。但是，在您的情况下，它很可能是 JSONArray。

为了实现这一点，您可以使用[gson](http://code.google.com/p/google-gson/)将有效的 json 字符串转换为`JSONObject`or `JSONArray`。

您将使用`.toJson()`和`.fromJSON(object)`方法。

# python - 如何在 Python/Kivy 中实现 ScrollView

> ID：12268140
> 
> 赞同：6
> 
> 时间：2012-09-04T17:01:20.383
> 
> 标签：python, kivy

我编写了一些代码来在 Python/Kivy 中显示一些内容，看来我没有写好 ScrollView。

我在程序中尝试了一些变化，但程序不显示滚动条。

这是我的代码：

```
def build(self):
    root = BoxLayout(orientation='vertical')
    box = BoxLayout(orientation='vertical')     
    lists = rss_feed()      
    for lista in lists:
        temp = BoxLayout(orientation='vertical')
        for entry in lista:
            temp.add_widget(Label(text=entry))
        box.add_widget(temp)
    sv = ScrollView(size_hint=(True, True), size=(400, 400))
    root.add_widget(sv)
    sv.add_widget(box)      
    return root 
```

我的问题是：我需要做什么来显示 scroolbar ？？？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T20:19:36.720

[我在https://groups.google.com/forum/?fromgroups=#!topic/kivy-users/AiaUnKp3XX4](https://groups.google.com/forum/?fromgroups=#!topic/kivy-users/AiaUnKp3XX4)上找到了一个示例，该错误已得到纠正。

我忘了设置绑定方法

# c++ - 没有二进制补码的有符号双字到无符号双字？

> ID：12268144
> 
> 赞同：1
> 
> 时间：2012-09-04T17:01:30.947
> 
> 标签：c++, c

如何将带符号的 DWORD 转换为无符号的 DWORD ？

我有一种方法是二进制补码。

但是，当我这样做时，编译器给出了一个错误，即有符号数不允许按位运算（根据 MISRA 规则 2004 第 12 条规则）。

那么我怎样才能转换为无符号 Dword？

```
long int  num1,num2,
unsigned long int num3;

num1 = 293;
num2 = 296;

num3 = num1 - num2; 
```

如果我运行代码，那么 num3 会加载一些像这样的 0xFFFFFFE somevalue。

但实际上想要的值 3 应该得到存储？

所以我将 unsigned long int num3 设为 long int num3。

那么num3有符号值（在这种情况下为-3）应该转换为3而不进行二进制补码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:07:42.170

从有符号到无符号转换的定义是取值的模数，这样结果总是对应于在二进制补码机器上取原始位所得到的结果。但是您不想转换`-3`；您要转换距离，即差值的绝对值：`abs( num1 - num2 )`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:05:56.213

```
long num3;
...
if (num3<0) num3=-num3; 
```

或者究竟是什么问题？

# c# - 在运行时将 Textboxcell 更改为 Comboboxcell

> ID：12268147
> 
> 赞同：0
> 
> 时间：2012-09-04T17:01:44.123
> 
> 标签：c#, winforms, datagridview

我正在使用 MySQL .net 连接器来填充 Datagridview 使用`Mysqladapter`和`Datagridview.Bindingsource`。这很好用，但我想改变一件事：

在填充到 DataGridview 的表中，有一个文本类型的列。此列中的单元格在`Datagridviewtextboxcell`datagridview 中显示为 a，但我想将其更改为`DataGridviewComboboxCell`（用户应在 ~10 个项目之间进行选择）。

我已经尝试了很多，但没有任何效果。DataGridview 中的 Columns 是只读的，我无法更改`DefaultCellTemplate`为 a `DataGridviewComboboxCell`，因为它不继承`DataGridviewTextboxcell`。

我也试过这个：[Gridview - 将 textboxcell 转换为 comboboxcell 并返回](https://stackoverflow.com/questions/6533976/gridview-convert-textboxcell-to-comboboxcell-and-back)，我认为我的问题可以通过这种方式解决，但是使用这个解决方案我也有 1 个问题：它不显示下拉按钮。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:24:38.010

在您链接的答案中，在该行之前：

```
dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex] = cb; 
```

尝试添加：

```
cb.DisplayStyle = DataGridViewComboBoxDisplayStyle.CHOOSE_ONE;
cb.FlatStyle = FlatStyle.CHOOSE_ONE; 
```

我不确定您想要如何设置组合框的样式，因此不要使用“CHOOSE_ONE”，而是尝试样式并选择您想要的样式。

**编辑**：似乎您根本没有将其更改为组合框。试试这个：

```
var values = new List<string> { "a", "b", "c" };
var cell = new DataGridViewComboBoxCell();
cell.DataSource = values;
dataGridView1[col, row] = cell; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:10:07.063

为此，您需要向网格添加一个新的 DataGridViewComboBoxColumn，然后隐藏文本框列。

我使用下面的代码展示了这一点，但您可以使用设计器执行相同的操作（只需使用设计器设置我在代码中设置的属性）。

需要注意的关键事项是：

*   DataPropertyName 是指网格数据源的属性 - 可能是您的文本框源
*   您需要为该列提供自己的数据源
*   DisplayMember 和 ValueMember 指的是列的数据源

这是添加列的代码：

```
// Here I do this in the form constructor - there are other places you can do it
public Form1()
{
    InitializeComponent();

    DataGridViewComboBoxColumn col = new DataGridViewComboBoxColumn();

    // You need to set some properties on the column to make it work

    // Datasource is the source (usually a list) of objects to show in the combobox
    col.DataSource = dataSource;

    col.DataPropertyName = "ColumnInGridDataSource";
    col.DisplayMember = "DisplayProperty";
    col.ValueMember = "ValueProperty";

    dataGridView1.Columns.Add(col);

    // This hides the textboxcolumn
    dataGridView1.Columns["YourTextBoxColumnName"].Visible = false;
} 
```

# haskell - 将 Data.Time.UTCTime 转换为/从 ByteString

> ID：12268148
> 
> 赞同：3
> 
> 时间：2012-09-04T17:01:46.700
> 
> 标签：haskell, bytestring

假设我需要以`Data.Time.UTCTime`“%Y-%m-%d %H:%M:%S”格式多次写入/读取文件。

在我看来，使用`Data.Time.formatTime`or`Data.Time.parseTime`转换`UTCTime`为/从`String`，然后打包/解包`String`to/from`ByteString`会太慢，因为它涉及中间`String`. 但是手动编写`ByteString`构建器/解析器`UTCTime`似乎重复了很多已经在`formatTime`and中完成的工作`parseTime`。

我想我的问题是：是否有一种系统的方法可以在不重复大量工作的情况下获得类型函数`t -> String`或`String -> t`转换为函数`t -> ByteString`或提高效率？`ByteString -> t`

我完全是一个 Haskell 新手，所以如果这个问题很愚蠢，请原谅我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T22:55:29.310

不，没有将 type 函数转换为 type 函数的通用`t -> String`方法`t -> ByteString`。如果您记得 ByteString 不仅仅是一个更快的`String`;它可能会帮助您适应这个现实。它比那低。A`ByteString`是字节序列；除非您考虑到编码，否则它没有任何意义。

所以你的选择是：

1.  使用函数组合，如 phg 的回答：

    ```
    import Data.ByteString.Char8 as B

    timeToByteStr :: UTCTime -> ByteString
    timeToByteStr = B.pack . formatTime'

    parseBStrTime :: ByteString -> Maybe UTCTime
    parseBStrTime = parseTime' . B.unpack 
    ```

    我已经更正了函数名称。我还使用了例如 parseTime' 而不是 parseTime 来省略格式字符串，`TimeLocale`您需要传入。

    （还值得注意的是，这`Data.Text`通常是比 更好的选择`Data.ByteString.Char8`。只有当您`Char`的 s 属于 Unicode 代码点 0-255 时，后者才能正常工作。）

2.  如果性能是一个问题并且这种转换是瓶颈，请编写一个解析器/构建器。

3.  只需使用`String`s。

最后一个选项对于 Haskell 新手来说是一个被低估的选择，恕我直言。`String`在性能方面是次优的，但它不是魔鬼的产物。如果你刚刚开始使用 Haskell，为什么不让你的生活尽可能简单，除非你的代码变得太慢？

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-04T17:17:40.270

如果您不是真的需要高度优化的代码，通常和最简单的方法是使用函数组合：

```
timeToByte = toBytes . formatTime
byteToTime = parseTime . fromBytes 
```

或类似的东西，因为我不熟悉这些库。

如果在分析之后您发现这种方法仍然很慢，我想您将不得不手动编写一些东西。

# xslt - 查询字符串值作为 xsl 参数

> ID：12268151
> 
> 赞同：2
> 
> 时间：2012-09-04T17:01:49.893
> 
> 标签：xslt, query-string

无论如何，我可以获取查询字符串变量的值并与 xsl 一起使用它。我试过了`<xsl:param name="qsVariableName">`，但没有成功，它没有中断，但是当我尝试像这样输入它时它给了我一个空值。

www.example.com?qsVariableName=true

```
 <xsl:param name="qsVariableName" />
 <xsl:value-of select="$qsVariableName"></xsl:value-of> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:15:23.643

**来自源 XML 文件或 XSLT 的查询字符串参数不会自动映射到`<xsl:param>`样式表中的设置。**

`<xsl:param>`调用转换时需要显式设置。根据环境以及您调用它的方式，设置参数的语法不同。

在 Java 中，您可以使用以下内容设置参数：

```
javax.xml.transform.Transformer trans =
        transFact.newTransformer(xsltSource);
trans.setParameter("qsVariableName", "true"); 
```

* * *

在 XSLT 2.0 中，您可以使用该`document-uri()`函数获取源 XML 文件的 URL，然后解析该值以获得查询字符串参数和值的序列。

```
tokenize(substring-after(document-uri(/), '?'), '&amp;') 
```

例如，如果您使用上面的代码转换带有 url 的 XML 文件：`http://example.com/file.xml?qsVariableName=true`它将返回“qsVariableName=true”。

# php - 使用我的网络爬虫 (php) 扫描元标记

> ID：12268155
> 
> 赞同：-3
> 
> 时间：2012-09-04T17:02:02.507
> 
> 标签：php

我有一个 php 网络爬虫，我很想给它添加 get_meta_tags() 函数。它扫描给定网页的所有 url 等等。是否可以将 get_meta_tag 方法添加到网络爬虫中，以便从扫描的网址中获取元数据？

```
 session_start();

 $domain = "www.ebay.com";

 if(empty($_SESSION['page']))
 {
 $original_file = file_get_contents("http://" . $domain . "/");

 $_SESSION['i'] = 0;

 $connect = mysql_connect("cust-mysql-123-05", "uthe_774575_0001", "rooney08");

 if (!$connect)
 {
 die("MySQL could not connect!");
 }

 $DB = mysql_select_db('theqlickcom_774575_db1');

if(!$DB)
{
 die("MySQL could not select Database!");
}
}
if(isset($_SESSION['page']))
{

$connect = mysql_connect("xxxxx", "xxxxx", "xxxx");

if (!$connect)
{
die("MySQL could not connect!");
}

$DB = mysql_select_db('xxxx');

if(!$DB)
{
die("MySQL could not select Database!");
}
$PAGE = $_SESSION['page'];
$original_file = file_get_contents("$PAGE");
}

$stripped_file = strip_tags($original_file, "<a>");
preg_match_all("/<a(?:[^>]*)href=\"([^\"]*)\"(?:[^>]*)>(?:[^<]*)<\/a>/is", $stripped_file,     $matches);

foreach($matches[1] as $key => $value)
{

if(strpos($value,"http://") != 'FALSE' && strpos($value,"https://") != 'FALSE')
{
$New_URL = "http://" . $domain . $value; 
}
else
{
$New_URL = $value;
}
$New_URL = addslashes($New_URL);
$Check = mysql_query("SELECT * FROM pages WHERE url='$New_URL'");
$Num = mysql_num_rows($Check);

if($Num == 0)
{
mysql_query("INSERT INTO pages (url)
VALUES ('$New_URL')");

 $_SESSION['i']++;

 echo $_SESSION['i'] . "";
  } 
  echo mysql_error();
   }

  $RandQuery = mysql_query("SELECT DISTINCT * FROM pages ORDER BY rank LIMIT 0,1");
  $RandReturn = mysql_num_rows($RandQuery);
  while($row1 = mysql_fetch_assoc($RandQuery))
  {
  $_SESSION['page'] = $row1['url'];
  } 
  echo $RandReturn;
  echo $_SESSION['page'];
  mysql_close();

  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:43:06.120

在从外部源读取 html 标签之前，我已经遇到过这个问题。Jstel 为我提供了一个很好的解决方案，尽管我相信您可以将她的解决方案纳入您的解决方案。

[http://www.php.net/manual/en/function.get-meta-tags.php#92197](http://www.php.net/manual/en/function.get-meta-tags.php#92197)

根据您的代码，它是如何工作的：

```
$domain = "www.ebay.com";
$original_file = file_get_contents("http://" . $domain . "/");
preg_match_all("/<meta[^>]+(http\-equiv|name)=\"([^\"]*)\"[^>]" . "+content=\"([^\"]*)\"[^>]*>/i",$original_file, $result);
print_r($result); 
```

您将在下面看到我从这个正则表达式得到的示例结果：

```
Array
(
    [0] => Array
        (
            [0] => <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            [1] => <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            [2] => <meta name="keywords" content="ebay, electronics, cars, clothing, apparel, collectibles, sporting goods, digital cameras, antiques, tickets, jewelry, online shopping, auction, online auction">
            [3] => <meta name="description" content="Buy and sell electronics, cars, fashion apparel, collectibles, sporting goods, digital cameras, baby items, coupons, and everything else on eBay, the world's online marketplace">
            [4] => <meta name="verify-v1" content="j6ZKbG61n+f9pUtbkf69zFRBrRSeUqyfEJ2BjiRxWDQ=">
            [5] => <meta name="y_key" content="acf32e2a69cbc2b0">
            [6] => <meta name="msvalidate.01" content="31154A785F516EC9842FC3BA2A70FB1A">
        )

    [1] => Array
        (
            [0] => http-equiv
            [1] => http-equiv
            [2] => name
            [3] => name
            [4] => name
            [5] => name
            [6] => name
        )

    [2] => Array
        (
            [0] => Content-Type
            [1] => Content-Type
            [2] => keywords
            [3] => description
            [4] => verify-v1
            [5] => y_key
            [6] => msvalidate.01
        )

    [3] => Array
        (
            [0] => text/html; charset=UTF-8
            [1] => text/html; charset=UTF-8
            [2] => ebay, electronics, cars, clothing, apparel, collectibles, sporting goods, digital cameras, antiques, tickets, jewelry, online shopping, auction, online auction
            [3] => Buy and sell electronics, cars, fashion apparel, collectibles, sporting goods, digital cameras, baby items, coupons, and everything else on eBay, the world's online marketplace
            [4] => j6ZKbG61n+f9pUtbkf69zFRBrRSeUqyfEJ2BjiRxWDQ=
            [5] => acf32e2a69cbc2b0
            [6] => 31154A785F516EC9842FC3BA2A70FB1A
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:11:16.453

首先，为什么要在这一行加上引号？：

```
$original_file = file_get_contents("$PAGE"); 
```

其次，可以通过以下方式检索所有元标记

```
$tags = get_meta_tags('http://www.example.com/'); 
```

见[php.net](http://php.net/manual/en/function.get-meta-tags.php)

所以在你的例子中，我想你将不得不使用：

```
$tags = get_meta_tags($New_URL); 
```

并将该数组保存在您的数据库中。

# ios - NSSortDescriptor 与关系

> ID：12268157
> 
> 赞同：0
> 
> 时间：2012-09-04T17:02:30.613
> 
> 标签：ios, xcode, nsfetchrequest, nssortdescriptor

在我的 CoreData 模型中有 3 个实体

具有与 Sections 实体的 section 关系和与 Chapters 实体的章节关系的结构。

所以一个 Formation 包含 1 或 n 个包含 1 或 n 章的部分

在我的实体部分中，有一个`sortNB`属性（一种`id`），所以我想在我的请求中对我的部分进行排序。

我试着做：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Formations" inManagedObjectContext:_managedObjectContext];
[request setEntity:entity];

NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"sections.sortNB" ascending:YES];
[request setRelationshipKeyPathsForPrefetching:[NSArray arrayWithObjects:@"sections", nil]];
[request setSortDescriptors:[NSArray arrayWithObject:sort]];

NSArray *forms = [[_managedObjectContext executeFetchRequest:request error:nil]mutableCopy]; 
```

但出现错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'to-many key not allowed here' 
```

我该如何进行？

我想在我的章节实体中插入相同类型的数字来对其进行排序，但首先，让我们为章节解决它：p

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:21:21.537

好的，所以我不是在我的请求中而是在使用之后对我的对象进行排序

```
NSArray *sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"sortNB" ascending:YES]];

NSArray *sortedRecipes = [[[formation sections] allObjects] sortedArrayUsingDescriptors:sortDescriptors]; 
```

它有效。

谢谢你的帮助。

# load-testing - 是否有任何性能测试工具可以从客户端测量服务器处理时间？

> ID：12268158
> 
> 赞同：0
> 
> 时间：2012-09-04T17:02:33.953
> 
> 标签：load-testing, qa, performance-testing

您好我想通过使用虚拟用户将负载应用到服务器来测量处理时间。我使用了 JMeter 和 Load runner 工具，发现它不能测量处理时间，那么有没有可以从客户端测量服务器处理的负载测试工具？请回复谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:12:41.030

JMeter 和 Grinder 等负载测试工具只能间接测量请求的处理时间，因为它无法查看服务器。它可以测量接收请求所需的总时间，然后您可以减去网络时间来计算服务器上的处理时间。许多负载测试工具包括一个服务器监控组件，该组件将收集服务器端指标（例如 CPU 使用率）并将它们包含在测试报告中。我们的产品（[负载测试仪](http://www.webperformance.com/load-testing/)) 和其他几个这样做。有关更多详细信息，您需要一个代码分析器。这些工具中的大多数将用于一次分析单个用户，并准确显示处理时间花费在代码的哪些部分。DynaTrace、AppDynamics 和 NewRelic 等一些工具更适合在生产负载下使用。这些都不是免费的。

# perl - CGI::Session 随机注销用户

> ID：12268160
> 
> 赞同：0
> 
> 时间：2012-09-04T17:02:39.460
> 
> 标签：perl, session, login, cgi

这是我的身份验证逻辑：

```
sub user_logon {
my ($dbh, $cgi, $cache, $logout) = @_;

#use Log::Log4perl qw(:easy);
#Log::Log4perl->easy_init($DEBUG);

my $session = new CGI::Session("driver:MySQL", $cgi, {Handle=>$dbh});

$session->expires("+3h");
my $auth = new CGI::Session::Auth::DBI({
    CGI             => $cgi,
    Session         => $session,
    IPAuth          => 1,
    DBHandle        => $dbh,
    #Log             => 1,
});

if($logout) {
    $auth->logout();
}
else {
    $auth->authenticate();

    if($auth->loggedIn) {
        my $user = Cherry::Schema::ResultSet::Employee::get_employee($dbh, $cache, { number => $auth->{userid} });

        if (!$user->{active}) {
            return { error => $user->{name} . ' is not an active employee.' };
        }

        $user->{cookie} = $auth->sessionCookie();
        return $user;
    }
    elsif($cgi->param('action') eq 'logon') {
        if($cgi->param('log_username') && $cgi->param('log_username')) {
            return { error => 'Your username and/or password did not match.' };
        }
        elsif(!$cgi->param('log_username') || !$cgi->param('log_username')) {
            return { error => 'Please enter a username and a password.' };
        }
    }
    else {
        return { error => 'You are not logged in' };
    }
}
}

sub handle_authentication {
my ($dbh, $cache, $config, $params, $cgi) = @_;

if(($cgi->param('auth') || '') eq 'super_user') { # for automation
    return;
}

if(($params->{action} || '') eq 'log_off') {
    user_logon($dbh, $cgi, $cache, 1); # 1 means log out
    login_form($config, 'Successfully logged out', $params->{login_url}, $params->{title});
}

my $user = user_logon($dbh, $cgi, $cache);

if(exists $user->{error}) {
    login_form($config, $user->{error}, $params->{login_url}, $params->{title});
}
elsif($user->{number}) {
    return $user;
}

} 
```

然后在我的代码中，每次打印标题时，它看起来像这样：

```
my $user = Cherry::Authentication::handle_authentication(
$dbh,
$cache,
\%config,
{
    action      => $FORM{action},
    username   => $FORM{log_username},
    password    => $FORM{log_password},
    auth        => $FORM{auth}
},
$cgi
);
print header( 
    -type   => 'application/json',
    -cookie => $user->{cookie}
); 
```

问题是这段代码似乎在大约 80% 的时间里运行良好。另外 20% 的用户被踢出（而不是在陈旧 3 小时后）。

这段代码有什么明显的缺陷吗？我是否遗漏了任何关键代码？

如果您觉得这里没有足够的信息来提供可行的解决方案，您对如何解决这些类型的问题有任何一般性建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:20:25.230

对于这个特殊问题，有一些我不知道的代码在起作用。

```
$cookie = CGI::Cookie->new(
    -name       => $session->name, # problem line
    -value      => $session->id,   # problem line
    -expires    => '+1y',
    -path       => '/',
    -secure     => 0,
);

my @header = (
    -cookie => $cookie,
    -type => 'text/html',
    -status     => $status
);

print $cgi->header( @header ); 
```

带有注释**#problem 行**的行正在分配一个新会话，即使一个已经存在。

我在似乎最有问题的用户计算机上安装了[Fiddler HTTP 调试器。](http://www.fiddler2.com/fiddler2/)然后，一旦用户意外退出，我查看了日志。我能够找到访问一个 url 的用户与下一个请求的意外注销之间的关联。

# java - 如何在字符串中查找字符模式偏移量

> ID：12268167
> 
> 赞同：0
> 
> 时间：2012-09-04T17:03:16.530
> 
> 标签：java, regex

我有这样的文本文件，其中包含带有换行符的文本。我将该文本文件读入字符串

```
random Text
State v. USA
some more text
USA v.
NY
Some more text
USA
v.LA ,  MN v. ND
USA vs. MN 
```

我想知道模式的偏移量（即开始和结束字符索引），例如**[Some word started with cap] v. [Some word beginning with cap]**

或者 **[一些以大写开头的词] vs. [一些以大写开头的词]**

对于上面的例子 "State v. USA" => **Start=11 and End=22**

“美国诉纽约” =>**开始 = 36 和结束 = 45**

[我从http://rubular.com/r/T7Ii2WDADw](http://rubular.com/r/T7Ii2WDADw)之类的东西开始，它并不涵盖所有情况。

因此，程序可以返回一个 Map，其中键是 Start+","+End，值是实际文本，例如 "State v. USA"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:24:38.300

要涵盖这两种情况，您需要使用此正则表达式。

```
\w+\s((v.)|(vs.))\s\w+ 
```

在java代码中。

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;

public class Testapp {

public static void main(String[] args) {
String text = "USA v. Russia \n Some other text \n India vs. Aus";
String regex="\\w+\\s((v.)|(vs.))\\s\\w+";
Pattern p = Pattern.compile(regex);
Matcher matcher = p.matcher(text);

while (matcher.find()) {
    System.out.println(matcher.group()+ ":" +"start =" + matcher.start() + " end = " + matcher.end());
}
}
} 
```

输出：

```
Starting & ending index ofUSA v. Russia:start=0 end = 13
Starting & ending index ofIndia vs. Aus:start=34 end = 47 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T17:28:15.243

这将是一个有效的正则表达式：`\w+\s+vs?[.]\s+\w+`

然后，使用，您可以使用and`Matcher.find()`获取每场比赛的开始和结束。`Matcher.start(0)``Matcher.end(0)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T17:05:51.577

方法`String.indexOf(String)`完全符合您的需要。

# backbone.js - 我无法从 Backbone.js 模型中获取所有属性

> ID：12268172
> 
> 赞同：1
> 
> 时间：2012-09-04T17:03:29.350
> 
> 标签：backbone.js

在这里，我正在创建一个带有 ID 的新 Divider，获取 Divider，并显示所有属性和单个属性：

```
var divider = new Divider({id: "A"});
divider.fetch();
console.info(divider.attributes);
console.info(divider.get("title")); 
```

将 attributes.title的输出`console.info(divider.attributes)`显示为一个包含四个字符串的数组；然而; `console.info(divider.get("title"))`显示为空。谁能想到为什么它会返回为空？我能得到的唯一属性是“id”。此外，`console.info(divider.attributes.title)`还显示为空。

这是我的分频器模型：

```
Divider = Backbone.Model.extend({
  defaults: {
    "id": null,
    "title": null,
    "description": null
  }
} 
```

让我知道我是否可以提供更多信息。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:42:38.550

Backbone.js fetch 是异步的，因此如果您依赖于要通过 fetch 填充的属性，则需要确保在 fetch 完成后获取属性。这是一个例子：

```
var Divider = new Divider({id: "A"});
divider.fetch({success: function() {
  console.info(divider.get("title");
}}); 
```

但是，我仍然不确定为什么`console.info(divider.attributes)`显示 attributes.title 与数据，并`console.info(divider.attributes.title)`显示为空。

参考：[Backbone.js 抓取问题（不能立即刷新数据）](https://stackoverflow.com/questions/6048480/backbone-js-fetch-problem-cant-refresh-data-immediately)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:07:13.913

很高兴您发现了异步问题。我遇到了与您相同的问题，并发现当返回数据时，您的模型的属性会在控制台中更新。因此，当您查看控制台时，fetch 方法已经完成并且您的模型已经更新。

# ruby - Ruby - 解析 JSON 后的 FasterCSV

> ID：12268188
> 
> 赞同：0
> 
> 时间：2012-09-04T17:04:05.200
> 
> 标签：ruby, json, parsing, fastercsv

我正在尝试解析客户数据（姓名和电子邮件）的 JSON 响应，并构建一个列标题相同的 csv 文件。

出于某种原因，每次运行此代码时，我都会得到一个 CSV 文件，其中包含一个单元格中所有名字的列表（名称之间没有分隔......只是一串名称相互附加）并且相同姓氏的东西。以下代码不包括添加电子邮件（稍后我会担心）。

代码：

```
 def self.fetch_emails

    access_token ||= AssistlyArticle.remote_setup
    cust_response = access_token.get("https://blah.desk.com/api/v1/customers.json")
    cust_ids = JSON.parse(cust_response.body)["results"].map{|w| w["customer"]["id"].to_i}

 FasterCSV.open("/Users/default/file.csv", "wb") do |csv|
      # header row
      csv << ["First name", "Last Name"]
      # data rows
      cust_ids.each do |cust_firstname|
        json = JSON.parse(cust_response.body)["results"]
        csv << [json.map{|x| x["customer"]["first_name"]}, json.map{|x| x["customer"]["last_name"]}]
      end 
    end
  end 
```

输出：

```
First Name        | Last Name
JohnJillJamesBill   SearsStevensSethBing 
```

等等...

期望的输出：

```
First Name | Last Name
John       | Sears
Jill       | Stevens
James      | Seth
Bill       | Bing 
```

示例 JSON：

```
{
    "page":1,
    "count":20,
    "total":541,
    "results":
    [
        {
            "customer":
            {
                "custom_test":null,
                "addresses":
                [
                    {
                        "address":
                        {
                            "region":"NY",
                            "city":"Commack",
                            "location":"67 Harned Road,
                             Commack,
                             NY 11725,
                             USA",
                            "created_at":"2009-12-22T16:21:23-05:00",
                            "street_2":null,
                            "country":"US",
                            "updated_at":"2009-12-22T16:32:37-05:00",
                            "postalcode":"11725",
                            "street":"67 Harned Road",
                            "lng":"-73.196225",
                            "customer_contact_type":"home",
                            "lat":"40.716894"
                        }
                    }
                ],
                "phones":
                [
                ],
                "last_name":"Suriel",
                "custom_order":"4",
                "first_name":"Jeremy",
                "custom_t2":"",
                "custom_i":"",
                "custom_t3":null,
                "custom_t":"",
                "emails":
                [
                    {
                        "email":
                        {
                            "verified_at":"2009-11-27T21:41:11-05:00",
                            "created_at":"2009-11-27T21:40:55-05:00",
                            "updated_at":"2009-11-27T21:41:11-05:00",
                            "customer_contact_type":"home",
                            "email":"jeremysuriel+twitter@gmail.com"
                        }
                    }
                ],
                "id":8,
                "twitters":
                [
                    {
                        "twitter":
                        {
                            "profile_image_url":"http://a3.twimg.com...",
                            "created_at":"2009-11-25T10:35:56-05:00",
                            "updated_at":"2010-05-29T22:41:55-04:00",
                            "twitter_user_id":12267802,
                            "followers_count":93,
                            "verified":false,
                            "login":"jrmey"
                        }
                    }
                ]
            }
        },
        {
            "customer":
            {
                "custom_test":null,
                "addresses":
                [
                ],
                "phones":
                [
                ],
                "last_name":"",
                "custom_order":null,
                "first_name":"jeremy@example.com",
                "custom_t2":null,
                "custom_i":null,
                "custom_t3":null,
                "custom_t":null,
                "emails":
                [
                    {
                        "email":
                        {
                            "verified_at":null,
                            "created_at":"2009-12-05T20:39:00-05:00",
                            "updated_at":"2009-12-05T20:39:00-05:00",
                            "customer_contact_type":"home",
                            "email":"jeremy@example.com"
                        }
                    }
                ],
                "id":27,
                "twitters":
                [
                    null
                ]
            }
        }
    ]
} 
```

是否可以更好地使用 FasterCSV 来实现这一点？我假设 << 每次都会添加到一个新行......但它似乎不起作用。我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T02:26:03.460

您已经以某种方式将所有内容都弄乱了，您解析 json 的次数太多（并且在循环中！）让我们让它更简单：

```
customers = JSON.parse(data)["results"].map{|x| x['customer']}
customers.each do |c|
  csv << [c['first_name'], c['last_name']]
end 
```

'wb' 也是 csv 的错误模式 - 只是 'w'。

# batch-file - 将参数从一个批处理文件传递到另一个

> ID：12268190
> 
> 赞同：0
> 
> 时间：2012-09-04T17:04:06.843
> 
> 标签：batch-file

我有 2 个批处理文件。

第一个需要一个输入参数，它是父文件夹的路径。它读取父文件夹中所有子文件夹的名称，并为每个子文件夹执行第二个批处理文件。

批次文件 1

```
@echo off
for  /d %%Y in (%1/*) do (  
set SubfolderNameAndPath=%%Y
call batch2.bat %SubfolderNameAndPath% 
) 
```

第二个批处理文件使用 SubfolderNameAndPath 作为输入参数，并对每个子文件夹中存在的所有文件执行 Evaluate.exe。它将 Evaluate.exe 的结果保存到文本文件“结果”中，该文件的扩展名带有每次访问的子文件夹的名称。( `results_%~n1.txt`)。

批处理文件 2

```
@echo off
for  %%X in (%1/*) do (  
echo Evaluate.exe  %%X AnotherArgumentHere -o results_%~n1.txt   
) 
```

当我运行 batch1 ( `batch1.bat ParentFolderPath`) 时，即使它似乎调用了 batch2.bat，batch2.bat 也不会执行。我相信我为 batch2.bat 定义输入参数的方式出了点问题，但我无法弄清楚它是什么。

`%SubfolderNameAndPath%`不包含任何空格。文件夹的路径都没有。我真的很感谢你在这方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:47:12.180

好吧，首先，当在括号内时，您不能设置变量，然后使用 %'s 访问它。您必须首先（在`for`循环之前） ，然后使用's 而不是's`setlocal enabledelayedexpansion`访问您的变量。`!``%`

但既然你无论如何都不做任何事情`%SubfolderNameAndPath%`，你应该把它消除掉。

其次，您需要补偿包含空格的路径，因此希望我下面的代码对您有用。为此，批处理对传递给的参数使用特殊符号来删除它们周围的双引号。所以，如果`%1`= `"This string"`，那么`%~1`= `This string`。此外，如果`%1`= `This string`，那么`%~1`仍然 = `This string`。`%~1`因此，除非您想保留任何双引号，否则使用该符号没有缺点。

因此，在 int`batch1.bat`中，我们删除所有可能的引号`%1`，然后在 周围加上双引号`%~1/*`，并加上双引号`%%Y`，以防其中有空格。

`batch1.bat`

```
@echo off
for  /d %%Y in ("%~1/*") do call batch2.bat "%%~Y" 
```

然后我们对 做同样的事情`batch2.bat`，但更多。

`batch2.bat`

```
@echo off
for  %%X in ("%~1/*") do (
  echo Evaluate.exe  "%%~X" AnotherArgumentHere -o "results_%~n1.txt"
) 
```

* * *

**编辑：** 2012/09/05 15:21

这怎么抓你？而不是调用单独的批处理：

```
for /d %%x in (%1\*) do (
  for /f "tokens=*" %%y in ( 'dir /b /a:-d "%%~dpnxx"' ) do (
    echo Evaluate.exe %%~nxy AnotherArgumentHere -o "results_%%~nxx.txt" 
  )
) 
```

（以上可以全部放在一行，去掉括号即可。）

我假设输出是：
`Evaluate.exe <file_name> AnotherArgumentHere -o "results_<directory_name>.txt"`

# ios - dictationRecordingDidEnd 从未调用过

> ID：12268194
> 
> 赞同：2
> 
> 时间：2012-09-04T17:04:26.590
> 
> 标签：ios, uitextview

我正在使用 UITextView 并在我的视图控制器中添加了 UITextInputDelegate。我已经实现了 textDidChange 和 dictationRecordingDidEnd 方法。永远不会调用 textDidChange 和 dictationRecordingDidEnd。请帮忙。

在 MyViewController.h 文件中

```
@interface MyViewController : UIViewController <UITextViewDelegate, UITextInputDelegate>
{

} 
```

在 MyViewController.m 文件中

```
- (void) textDidChange:(id<UITextInput>)textInput
{

}

- (void)dictationRecordingDidEnd
{

}
- (void)dictationRecognitionFailed
{
    textViewResults.text = @"Dictation Failed";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:59:04.243

我认为您不想使用 UITextInputDelegate 协议，而是使用 UITextInput 协议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T22:58:26.887

我遇到了同样的问题......似乎这些方法没有像他们应该的那样被调用（并且在 5.1 之前根本没有被调用）。我确实注意到每次输入模式更改时都会发送一个通知：

```
UITextInputCurrentInputModeDidChangeNotification 
```

如果您听（在 NSNotificationCenter 中）然后调用：

```
[[UITextInputMode currentMode] performSelector:@selector(identifier)]; 
```

您将获得当前输入模式的 NSString。按照这个逻辑，你可以知道当它从@“dictate”变为别的东西时，听写部分就结束了。（虽然可能尚未处理文本更改，但我还没有完全尝试过）。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextInputMode_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextInputMode_Class/Reference/Reference.html)

奇怪的是， UITextInputMode 不是私有的，但是方法返回的对象没有任何公共访问器......（因此 @selector(identifier) 为您提供所需的字符串）......不要认为这会标记苹果拒绝但买家要小心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-09T16:15:18.510

尝试改写 dictationRecordingDidEnd 方法，如下所示：

```
#import <UIKit/UIKit.h>

@interface MyTextField : UITextField

@end

#import "MyTextField.h"

@implementation MyTextField

- (void) dictationRecordingDidEnd {
    printf("dictationRecordingDidEnd\n");
}

@end 
```

我还没有返回并在早期的操作系统下进行测试，但它在 iOS 8.1.1 中运行良好。

# java - 3D 空间中的轴对齐边界框和三角形碰撞

> ID：12268200
> 
> 赞同：0
> 
> 时间：2012-09-04T17:04:56.730
> 
> 标签：java, collision-detection, collision

我已经阅读了很多关于“分离轴测试”的内容，并且从所有帖子和文章中我了解到它们都是针对 2D 碰撞，而不是 3D。我听说这更像是 3D 空间的“分离平面定理”，但我不清楚在哪里可以找到有关此方法与 2D 版本有何不同的信息。

我应该使用 SAT，因为我正在尝试计算三角形是否与 Axis-Aligned Bounding Box (AABB) 相交。我不需要知道交叉点发生在哪里，如果它发生或没有发生，只需一个布尔结果。

我实施 SAT 的主要尝试位于此处：[实施尝试](https://stackoverflow.com/questions/12219904/separating-axis-theorem-test-3-what-next)。

如果 SAT 需要修改，那么需要进行哪些修改才能在 3D 空间中成功实施？*因为根据 Christer Ericson 的著作Real-Time Collision Detection*中的说法，目前有 13 个轴需要测试。如果需要更改 SAT，那么我认为会有更多的轴要测试，因为涉及到第三个轴。

1.  来自 AABB 的三个面法线
2.  三角形的一个面法线
3.  由两者的边组合的叉积给出的九个轴

我需要了解 SAT 是否需要修改，并推动修改的方向和原因。如果不需要修改，我哪里出错了？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T01:00:44.563

在阅读了许多不同的帖子、文章和论文（其中最好的资源是[这篇](http://www.codezealot.org/archives/55)文章）之后，我现在知道不需要对 SAT 进行任何修改来进行 3D 碰撞检测。

虽然我的实现仍有一些问题，但我可以说，对于 AABB（立方体），您必须测试 3 个表面法线，对应于 x、y 和 z 轴。对于三角形，看起来需要 4 个法线，每个边一个，一个表面（我不完全确定三角形法线，因为我仍然需要测试。我尝试了一个法线并且 80%​​ 工作）。

对于 AABB（立方体），法线是通过获取曲面的两条垂直边并获取这两条边的叉积来计算的。

```
// Surface 1/3 (x, y, z - one surface for each)
Vector3d edge1 = new Vector3d();
Vector3d edge2 = new Vector3d();
Vector3d normal1 = new Vector3d();
// Get the edges, the two edges must be perpendicular to one another.
edge1.sub( point0, point1 );
edge2.sub( point0, point4 );
normal1.cross( edge1, edge2 );
normal1.normalize(); 
```

三角形表面法线的计算方法相同。

After that the SAT takes the projections of the AABB and the triangle and tests those on the AABB axes (normals) then this is repeated on the triangle axes (normals) and if any one of the tests detects a gap there is no collision.

# websphere - 与 Sun 等效的 JRE 所做的 websphere 7 有什么

> ID：12268207
> 
> 赞同：0
> 
> 时间：2012-09-04T17:05:26.683
> 
> 标签：websphere

我们正在升级我们的应用程序，如果我们在本地使用 Sun JDK，它可以工作，但它在 DEV 盒上失败。我们的 DEV 盒子上有 IBM jdk。Websphere 7 具有的 SUN 等效 JDK 是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:33:16.413

[WebSphere 7 支持 Java6 和 JEE5](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/rovr_specs.html)。

但是，它需要[WebSphere 本身附带的 Java 版本](http://www-01.ibm.com/support/docview.wss?uid=swg27005002)。（大多数是 IBM 自己的 Java SDK，尽管我认为 WebSphere 的 Solaris 版本可能会随 Oracle 的 Java 一起提供。）

# tcpdump - 如何使用 tcpdump 计算通过网络的字节数？

> ID：12268208
> 
> 赞同：2
> 
> 时间：2012-09-04T17:05:28.147
> 
> 标签：tcpdump

我有这样的 tcpdump

```
sudo tcpdmp tcp -n -i eth0 -w test.dmp 
```

我想计算通过 eth0 的 tcp 字节数。我如上所述使用 tcpdump 捕获所有包。文件大小是否等于字节数或 tcpdump 将附加信息添加到转储文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:45:13.427

是的，tcpdump 将附加信息添加到文件中。

它（当前）仅以 pcap 格式写入，这意味着文件开头有一个 24 字节的标头，提供文件中数据包的链路层标头类型等信息，因此您首先需要做的是从文件的大小中减去 24。

此外，每个数据包都有一个 16 字节的报头，给出了数据包的到达时间戳、数据包的长度以及捕获的数据包数据的字节数。这意味着您需要从长度中减去 16*{number of packet} - 但获取数据包数量的唯一方法是读取文件，因此您*无法*仅通过查看文件大小！

另请注意，某些版本的 tcpdump 没有*默认*“快照长度”为 0，因此捕获的数据包数据的字节数可能小于网络上的数据包字节数。

因此，您应该做的是编写一个程序（使用 libpcap，因为它已经知道 pcap 格式并且您不必编写自己的代码来理解它）读取所有数据包并添加“数据包长度”字段（它是结构`len`中的字段`struct pcap_pkthdr`；不要*使用*，`caplen`因为这是捕获的数据包数据的字节数）所有数据包的值。

您说`eth0`，因此链路层标头类型可能是以太网，例如，没有无线电元数据，如果您在 Wi-Fi 适配器上以监控模式捕获可能就是这种情况。在链路层标头中有额外元数据的情况下，您需要减去它。

# c++ - 依赖注入/继承设计模式的构造函数参数过多

> ID：12268209
> 
> 赞同：6
> 
> 时间：2012-09-04T17:05:38.677
> 
> 标签：c++, design-patterns, inheritance, dependency-injection

所以我决定使用工厂设计模式和依赖注入。

```
class ClassA
{        
    Object *a, *b, *c;
    public:
    ClassA(Object *a, Object *b, Object *c) :
    a(a), b(b), c(c) {}
};

class ClassB : public ClassA
{        
    Object *d, *e, *f;
    public:
    ClassB(Object *a, Object *b, Object *c, Object *d, Object *e, Object *f) :
    ClassA(a, b, c), d(d), e(e), f(f) {}
}; 
```

现在，问题是 classB 的构造函数参数太多。这是一个单继承层的例子，但是当继承层开始变深时，当每个层类需要构造更多的对象时，顶层的构造函数最终需要太多的参数才能生成！

我知道我可以使用 setter 而不是构造函数，但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T07:37:22.420

不建议将 Setter 用于此类事情，因为它们会导致部分构造的对象非常容易出错。构造需要许多参数的对象的常见模式是使用构建器。ClassBBuilder 的职责是创建 ClassB 对象。您将 ClassB 构造函数设为私有，并仅允许生成器使用朋友关系调用它。现在，建造者可以看起来像这样

```
ClassBBuilder {
  public:
    ClassBBuilder& setPhoneNumber(const string&);
    ClassBBuilder& setName(consg string&);
    ClassBBuilder& setSurname(const string&);
    ClassB* build(); 
} 
```

你使用这样的构建器：

```
ClassB* b = ClassBBuilder().setName('alice').setSurname('Smith').build(); 
```

build() 方法检查是否设置了所有必需的参数，它要么返回正确构造的对象，要么返回 NULL。不可能创建部分构造的对象。您仍然有一个带有许多参数的构造函数，但它是私有的并且只在一个地方调用。客户不会看到它。构建器方法还很好地记录了每个参数的含义（当您看到 ClassB('foo', 'bar') 时，您需要检查构造器以确定哪个参数是名称，哪个是姓氏）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:50:49.097

我认为您所描述的在 C++ 中不是问题 - 事实上，C++ 很好地反映了您的设计所表达的依赖关系：

1.  要构造 类型的对象`ClassA`，您需要具有三个`Object`实例（`a`和`b`）`c`。
2.  要构造 类型的对象`ClassB`，还需要三个`Object`实例（`d`和`e`）`f`。
3.  每个类型的对象`ClassB`都可以被视为一个类型的对象`ClassA`。

这意味着要构造一个类型的对象，`ClassB`您需要提供三个`Object`实现`ClassA`接口所需的对象，然后再提供三个用于实现`ClassB`接口的对象。

我相信这里的*实际*问题是您的设计。您可以考虑使用不同的方法来解决此问题：

1.  不要让`ClassB`继承`ClassA`。可能是也可能不是一个选项，具体取决于您是否需要对任一类型的对象进行同质访问（例如，因为您有一个集合，`ClassA*`并且该集合也可能包含指向 的指针`ClassB`）。
2.  寻找总是一起出现的物体。像 - 也许传递给任一构造函数（`a`and`b`或`d`and `e`）的前两个对象代表某种对。也许是对象标识符之类的？在这种情况下，为此引入一个专用的抽象（阅读：类型）可能是有益的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T17:37:22.070

这是 C++ 问题之一（如果这可以称为问题）。除了试图保持 ctor 的参数数量最少之外，它没有其他解决方案。

其中一种方法是使用 props 结构，例如：

```
struct PropsA
{
    Object *a, *b, *c;
};

class ClassA
{
    ClassA(PropsA &props, ... other params);
}; 
```

这似乎很明显，但我确实使用过几次。在许多情况下，事实证明某些参数组是相关的。在这种情况下，为它们定义一个结构是有意义的。

我最糟糕的噩梦是瘦包装类。可以直接访问基础的方法和数据字段，而必须复制所有 ctor。当有 10 多个 ctor 时，创建包装器开始成为问题。

# asp.net-mvc - 使用 Unity 注入 IAuthorizationFilter

> ID：12268211
> 
> 赞同：0
> 
> 时间：2012-09-04T17:05:46.780
> 
> 标签：asp.net-mvc

我正在尝试通过配置使用 Unity 将 IAuthorizationFilter 与 SecurityAuthorizationFilter 注入。我得到一个异常类型名称或别名 IAuthorizationFilter 无法解析。请检查您的配置文件并验证此类型名称。我检查了类型，它们看起来都不错。请有人指导我如何通常注入动作过滤器。提前致谢

我的配置如下

```
 <typeAlias alias="IAuthorizationFilter" type="System.Web.Mvc.IAuthorizationFilter, System.Web.Mvc"/>
  <typeAlias alias="SecurityAuthorizationFilter" type="JQS.Infrastructure.Security.Filters.SecurityAuthorizationFilter, JQS.Infrastructure.Security"/>

    <register type="IAuthorizationFilter" mapTo="SecurityAuthorizationFilter"/> 
```

-乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:59:23.223

尝试在 IAuthorizationFilter 别名的类型属性中写入完整的程序集名称（我的意思是版本、文化、公共令牌）

# python - Python 列出错误：localvars

> ID：12268215
> 
> 赞同：2
> 
> 时间：2012-09-04T17:05:56.343
> 
> 标签：python, django

我正在处理这段代码：

```
poll_list = poll.object.all()
result = []
    for q in poll_list:
        result = result.append(q)
return HttpResponse(result) 
```

它给出了本地 VARS 的错误......任何人都知道这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:07:08.623

```
poll_list = poll.object.all()
result = []
for q in poll_list:
    result = result.append(q) 
```

您的身份已关闭一个标签:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T17:09:18.280

`result = result.append(q)`绝对不是您想要的`append`返回调用`None`，您将其分配给它`result`，之后您将无法再通过`result`. 它必须是`result.append(q)`附加`q`到可变列表中的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T17:14:23.230

```
poll_list = poll.objects.all()
result = [x for x in poll_list] 
```

# cocoa - 对某些行禁用换行，但对其他行禁用

> ID：12268216
> 
> 赞同：1
> 
> 时间：2012-09-04T17:06:01.680
> 
> 标签：cocoa

我有一个 NSTextView 子类。它显示普通文本（应该换行，最好围绕 80 个字符的行）和 ascii 样式表（*不*应该换行）。

小样：

![小样](../Images/474e8eafd6493b59899c28ad915bb983.png)

如您所见，顶部的文本被换行，而表格则延伸。

我有代码可以确定一行是否是表格，但我需要一些关于如何使用选择性（非）包装的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:11:08.143

[在布局管理器中使用多个文本容器。](http://developer.apple.com/library/mac/#documentation/TextFonts/Conceptual/CocoaTextArchitecture/TextSystemArchitecture/ArchitectureOverview.html)

“这个是文本视图的宽度（它换行）；下一个是它需要的宽度（不换行）；等等。”

# r - 如何在stan中获得参数的完整边际分布

> ID：12268220
> 
> 赞同：5
> 
> 时间：2012-09-04T17:06:15.280
> 
> 标签：r, winbugs14, stan

从`stan` [网页](http://mc-stan.org)启动标准示例时，如下所示：

```
schools_code <- '
  data {
   int<lower=0> J; // number of schools 
   real y[J]; // estimated treatment effects
   real<lower=0> sigma[J]; // s.e. of effect estimates 
 } 
 parameters {
   real theta[J]; 
   real mu; 
   real<lower=0> tau; 
 } 
 model {
   theta ~ normal(mu, tau); 
   y ~ normal(theta, sigma);
 } 
 '

  schools_dat <- list(J = 8, 
                 y = c(28,  8, -3,  7, -1,  1, 18, 12),
                 sigma = c(15, 10, 16, 11,  9, 11, 10, 18))

 fit <- stan(model_code = schools_code, data = schools_dat, 
           iter = 1000, n_chains = 4) 
```

（这是从[这里](http://code.google.com/p/stan/wiki/RStanGettingStarted)获得的）

然而，这只为我提供了参数后验的分位数。所以我的问题是：如何获得其他百分位数？我*想*它应该类似于错误（？）

**备注：**我试图介绍标签`stan`，但是我的名声太小了；）抱歉

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T10:55:21.060

从`rstan v1.0.3`（尚未发布）开始，您将能够`apply()`直接在`stanfit class`由`stan() function`. 如果 fit 是从 获得的对象`stan()`，那么例如，

```
apply(fit, MARGIN = "parameters", FUN = quantile, probs = (1:100) / 100) 
```

或者

```
apply(as.matrix(fit), MARGIN = 2, FUN = quantile, probs = (1:100) / 100) 
```

前者将 FUN 应用于每个链中的每个参数，而后者在将 FUN 应用于每个参数之前将链组合起来。如果您只对一个参数感兴趣，那么类似

```
beta <- extract(fit, pars = "beta", inc_warmup = FALSE, permuted = TRUE)[[1]]
quantile(beta, probs = (1:100) / 100) 
```

是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:41:07.423

这是我的尝试，希望这是正确的：

假设`fit`是从 获得的对象`stan(...)`。那么任何百分位数的后验来自：

```
quantile(fit@sim$sample[[1]]$beta, probs=c((1:100)/100)) 
```

方括号中的数字是我猜的链。万一这还不清楚：我用`rstan`

# actionscript-3 - Flex - 防止文本超出组件边缘

> ID：12268221
> 
> 赞同：1
> 
> 时间：2012-09-04T17:06:20.923
> 
> 标签：actionscript-3, flash-builder, flex-spark

我有一个包含 VGroup 的火花窗口。VGroup 内部有几个 HGroup。发生的情况是，在 styleName 为“toastBody”的标签中，如果其文本太长，则“x”closeButton 会被推离组件的右边缘，并且文本也会离开右边缘。即使我已经设置了 VGroup 的左侧、顶部和右侧，并且在标签上设置了 paddingRight 为 10。

```
 <s:VGroup minHeight="0"
                left="16" top="12" right="4">
        <s:HGroup width="100%" gap="45">
              <s:Label styleName="toastTitle"
                          id="titleLabel" width="100%" />
              <s:Button skinClass="skins.ToastCloseButtonSkin" id="closeButton"
                            buttonMode="true" useHandCursor="true"/>
        </s:HGroup>
        <s:HGroup>
              <s:BitmapImage left="10" top="16"
                                   source="assets/iconChatBubbleToastMsg.png" id="chatIcon"/>
              <s:Label styleName="toastBody"
                          id="bodyLabel"
                          paddingRight="10"/>
        </s:HGroup>

  </s:VGroup> 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:15:30.803

您可以在该标签上设置一个 maxWidth 以防止它从右边缘推出，但它会开始自动换行。

```
 <s:Label styleName="toastBody"
                          id="bodyLabel"
                          paddingRight="10" maxWidth="800"/> 
```

# ios - 如何在 MVC 设计中干净地处理顺序动画？

> ID：12268222
> 
> 赞同：0
> 
> 时间：2012-09-04T17:06:28.397
> 
> 标签：ios, animation, uiview, uikit, uiviewanimation

我编写了一些代码，可以按顺序在屏幕上移动一些对象。随着每个对象完成移动，下一个开始。

代码的结构与此类似：

模型：

```
moveObject
{
    // Code to move the object
    ...

    [delegate moved:self];
} 
```

代表（控制器）：

```
moved:(MyClass *)o
{
    UIView* v = [self viewForObject:o];

    [UIView animateWithDuration:1.0
                     animations:^{
                         [v setCenter: [model center]];
                     }
                     completion:^(BOOL finished){
                         // Move object
                         [model moveObject];
                     }];
} 
```

除了这实际上[不能正常工作](https://stackoverflow.com/questions/12250490/why-are-sequential-uiview-animations-displayed-concurrently)之外，它在我看来在概念上并不正确。模型中的逻辑应该可以自由地进行移动，而不必等待控制器轻推，告诉它视图已准备好进行更多更新。

我的计划是创建一个待处理的动作-需要-动画的队列，每次模型更新需要动画的东西时，只需将其添加到队列中并让它继续。然后我可以从队列中取出动作，一次一个地为它们设置动画。

这也意味着我可以在没有任何视图的情况下使用模型，而无需编写一个单独的控制器，该控制器只是在移动对象时不断回调模型。

因此，在我开始为此开发自己的解决方案之前，Apple 的 API 中是否已经有代码来处理这个问题？似乎这将是一个足够普遍的问题，以至于会有一个标准的方法来处理它。

或者，是否有更好的方法在运行时处理构建动画链？（与使用完成块简单地对它们进行硬编码相反。）

# jquery - 动画：悬停CSS规则

> ID：12268223
> 
> 赞同：0
> 
> 时间：2012-09-04T17:06:35.743
> 
> 标签：jquery, html, css

是否可以动画过渡到 CSS :hover 规则？我并不是要动画成我在脚本中指定的东西，而是要在 CSS 中指定的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:22:38.377

现代浏览器广泛支持[CSS 过渡。](http://css3.bradshawenterprises.com/)

如果您想要比 CSS 过渡更广泛的支持，请[使用 jQuery`.animate`](http://api.jquery.com/animate/)。

但是，要让 jQuery 识别您放在`:hover`伪类中的样式是不可能的。您只需要在 JavaScript 中单独编写不断变化的样式即可。（如果将样式添加到适当的类中，您可以使用一些 jQuery/JS 技巧来提取样式，但不能使用伪类。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:12:05.333

Yes it's possible and faster also CSS3 takes advantage of hardware acceleration which make them buttery smooth. I would recommend using Modernizr to check if the browser supports CSS3 transitions and then provide jQuery fallback support using animate.

CSS3 transitions work like this [http://jsfiddle.net/zzKYC/](http://jsfiddle.net/zzKYC/)

EDIT: Here is also a perfect example of CSS3 transitions with Modernizr fallback support using jQuery's animate method

[http://masonry.desandro.com/docs/animating.html](http://masonry.desandro.com/docs/animating.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:14:23.367

不确定您要转换的确切内容，但是，这里有一个 jsfiddle 可以轻松转换颜色。我介绍了一些浏览器。

[http://jsfiddle.net/NTjQG/](http://jsfiddle.net/NTjQG/)

# xml - 省略应用转换时出现的额外 xlmns 和 xmlns:tei

> ID：12268229
> 
> 赞同：1
> 
> 时间：2012-09-04T17:06:54.597
> 
> 标签：xml, xslt, namespaces

我在互联网上（以及在这个论坛上）找到了很多解决这个问题的方法，但我仍然可以解决我的问题。我有这个代码：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:tei="http://www.tei-c.org/ns/1.0"
    exclude-result-prefixes="#default">
    <xsl:output omit-xml-declaration="yes" standalone="no" method="xml" indent="no" />

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>

    </xsl:template>

    <xsl:template match="tei:body">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
        <back>
            <div>
                <xsl:for-each select="//tei:rs[@type='luogo']">
                    <p><xsl:value-of select="."/></p>
                </xsl:for-each>
            </div></back>
    </xsl:template>
</xsl:stylesheet> 
```

输出是正确的，除了后面部分重复 xmlns 和 xmlns:tei 属性：

```
<back xmlns="" xmlns:tei="http://www.tei-c.org/ns/1.0"><div>....</div></back> 
```

他们已经在这里了（所以我不需要“后退”）：

```
<TEI xmlns="http://www.tei-c.org/ns/1.0"> 
```

我试过这样的代码：

```
<xsl:template match="@*|node()[not(self::*)]">
        <xsl:copy/>
    </xsl:template>

    <xsl:template match="*">
        <xsl:element name="{local-name()}">
            <xsl:apply-templates select="node()|@*"/>
        </xsl:element>
    </xsl:template> 
```

或这个：

```
<xsl:template match="*">
        <xsl:element name="{local-name()}">
            <xsl:apply-templates select="@*|*"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="tei:back">
        <xsl:attribute name="{local-name()}">
            <xsl:value-of select="."/>
        </xsl:attribute>
    </xsl:template> 
```

我什至更改了它以使其适合我的代码，使用“tei：back”更改匹配或选择的值，它不起作用。为了使 tei 命名空间仅出现在该部分中，我必须做什么？感谢您的建议您的帮助！

* * *

编辑：谢谢你的答案。我的xml代码是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="file:/C:/Users/User/Desktop/prova2.xsl"?>
<TEI xmlns="http://www.tei-c.org/ns/1.0">
    <teiHeader><fileDesc>
        <titleStmt>
            <title>AA</title>
        </titleStmt>
        <publicationStmt><p><!-- supply publication information --></p></publicationStmt>
        <sourceDesc>
            <bibl>AA</bibl>
        </sourceDesc>
    </fileDesc><profileDesc>
        <langUsage>
            <language ident="ita">AA</language>
            <language ident="lat">AA</language>
        </langUsage>
    </profileDesc></teiHeader>
    <text>
        <body>
            <div type="book" n="3" xml:id="L3">
                <head>AA
                </head>
                <div type="cap" n="1" xml:id="L3-01">
                    <head>AA</head>
                    <p>AA
                        <pb n="200"/>AA      
                    </p>
                </div>
            </div>
        </body>
    </text>
</TEI> 
```

完整的输出是这样的：

```
<?xml-stylesheet type="text/xsl" href="file:/C:/Users/User/Desktop/prova2.xsl"?><TEI xmlns="http://www.tei-c.org/ns/1.0">
    <teiHeader><fileDesc>
        <titleStmt>
            <title>AA</title>
        </titleStmt>
        <publicationStmt><p><!-- supply publication information --></p></publicationStmt>
        <sourceDesc>
            <bibl>AA</bibl>
        </sourceDesc>
    </fileDesc><profileDesc>
        <langUsage>
            <language ident="ita">AA</language>
            <language ident="lat">AA</language>
        </langUsage>
    </profileDesc></teiHeader>
    <text>
        <body>
            <div type="book" n="3" xml:id="L3">
                <head>AA
                </head>
                <div type="cap" n="1" xml:id="L3-01">
                    <head>AA</head>
                    <p>AA
                        <pb n="200"/>AA      
                    </p>
                </div>
            </div>
        </body><back xmlns="" xmlns:tei="http://www.tei-c.org/ns/1.0"><div/></back>
    </text>
</TEI> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:40:46.380

出现此问题是因为在您的输入 XML 文档中，所有元素都被指定在命名空间“http://www.tei-c.org/ns/1.0”内。但是，在您的 XSLT 中，您正在创建新元素（在`tei:body`模板中），但您没有指定新元素的名称空间。这意味着新元素，例如`back`在没有命名空间的情况下创建的，因此输出 XML 包含额外的命名空间标签来表明这一点。

解决此问题的一种方法是在创建元素时指定命名空间。而不是这样做......

```
<back>....</back> 
```

做这个....

```
<xsl:element name="back" namespace="http://www.tei-c.org/ns/1.0">....</xsl:element> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:tei="http://www.tei-c.org/ns/1.0" exclude-result-prefixes="#default">
   <xsl:output omit-xml-declaration="yes" standalone="no" method="xml" indent="no"/>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="tei:body">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
      <xsl:element name="back" namespace="http://www.tei-c.org/ns/1.0">
         <xsl:element name="div" namespace="http://www.tei-c.org/ns/1.0">
            <xsl:for-each select="//tei:rs[@type='luogo']">
               <xsl:element name="p" namespace="http://www.tei-c.org/ns/1.0">
                  <xsl:value-of select="."/>
               </xsl:element>
            </xsl:for-each>
         </xsl:element>
      </xsl:element>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<TEI xmlns="http://www.tei-c.org/ns/1.0">
   <teiHeader>
      <fileDesc>
         <titleStmt>
            <title>AA</title>
         </titleStmt>
         <publicationStmt>
            <p><!-- supply publication information -->
            </p>
         </publicationStmt>
         <sourceDesc>
            <bibl>AA</bibl>
         </sourceDesc>
      </fileDesc>
      <profileDesc>
         <langUsage>
            <language ident="ita">AA</language>
            <language ident="lat">AA</language>
         </langUsage>
      </profileDesc>
   </teiHeader>
   <text>
      <body>
         <div type="book" n="3" xml:id="L3">
            <head>AA </head>
            <div type="cap" n="1" xml:id="L3-01">
               <head>AA</head>
               <p>AA 
                  <pb n="200"/>AA 
               </p>
            </div>
         </div>
      </body>
      <back>
         <div/>
      </back>
   </text>
</TEI> 
```

# python - 如何模拟/存根python方法并根据输入参数返回结果？

> ID：12268235
> 
> 赞同：0
> 
> 时间：2012-09-04T17:07:07.907
> 
> 标签：python, mocking

我想通过外部库方法（urllib.open()）创建一个模拟/存根。我做了一项研究，发现了 mock 和 stub python 库，它们看起来不错，我可能会使用它们。

不过，我有一个设计问题：如何创建为每个输入参数返回各种响应的模拟/存根？

例如：如果我有以下调用，我需要根据收到的参数返回不同的响应：

```
ulrllib.open('url1', data={...})
ulrllib.open('url2', data={...})
.... 
```

假设至少有 10 个这样的情况，我如何为每个 url 和数据输入创建一个有错误或不同数据的存根？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:03:58.080

只需使用 python 模拟库。[pypi.python.org/pypi/mock](http://pypi.python.org/pypi/mock "python 模拟库")

此外，您可能会考虑为 url 使用 for 循环，而不是：

```
ulrllib.open('url1', data={...})
ulrllib.open('url2', data={...})
ulrllib.open('url3', data={...})
ulrllib.open('url4', data={...})
ulrllib.open('url5', data={...})
ulrllib.open('url6', data={...})
ulrllib.open('url7', data={...})
ulrllib.open('url8', data={...})
ulrllib.open('url9', data={...})
ulrllib.open('url10', data={...}) 
```

你可以使用：

```
responses = ()#empty list
urls=('url1', 'url2', 'url3', 'url4', 'url5', 'url6', 'url7', 'url8', 'url9', 'url10')
data=('data1', 'data2', 'data3', 'data4', 'data5', 'data6', 'data7', 'data8', 'data9', 'data10')
for i, page in enumerate(urls):
  mydata = urllib.urlencode(data[i])
  x = urllib.open(page, mydata)
  responses.append(str(x.read())) 
```

# asp.net - iis express running site without debug (ie running all the time while vs is open)

> ID：12268239
> 
> 赞同：5
> 
> 时间：2012-09-04T17:07:19.917
> 
> 标签：asp.net, .net, asp.net-mvc, iis-express

My app for ages would keep runing even when I wasn't debugging in VS 2010\. Now it only runs when debugging. It was really nice for it to run even when not debugging before?

Any ideas why this might have stopped, I miss it working nicely?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-29T19:08:20.147

I have noticed that in VS 2013 that if you uncheck 'Enable Edit and Continue' that it will work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:18:18.997

您可以通过站点名称或应用程序池从命令行手动启动它： [http ://learn.iis.net/page.aspx/870/running-iis-express-from-the-command-line/](http://learn.iis.net/page.aspx/870/running-iis-express-from-the-command-line/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-07-02T05:43:19.023

我有这个问题。这是我写的关于我如何解决它的博客文章

[http://www.radicalgeek.co.uk/Post/12/starting-up-iis-express-for-a-specflow-and-selenium-webdriver-test-run](http://www.radicalgeek.co.uk/Post/12/starting-up-iis-express-for-a-specflow-and-selenium-webdriver-test-run)

# internet-explorer - SignalR - Forever Frame in IE stops working after a few minutes of being idle

> ID：12268246
> 
> 赞同：5
> 
> 时间：2012-09-04T17:07:50.140
> 
> 标签：internet-explorer, iframe, comet, signalr

I am using SignalR in IE9 and, unfortunately, it has to degrade to using the forever frame connection.

I have spent some time looking at this with the Developer Tools in IE. I can see the callbacks loading into the dynamically inserted IFrame, and they call the receive function in the SignalR plugin. However after about 20/30 of these it just stops responding - I can no longer call client script from the server.

I'm guessing that the IFrame load is finally timing out, but there appear to be no events raised for this, so I cannot force a reconnect.

Has anyone managed to get a robust SignalR connection working in IE?

Thanks :)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-04T09:20:20.010

我们遇到了网站上的 Javascript 停止工作的问题，特别是我们注意到 Ajax 调用不起作用。经过一番调查，我们发现 SignalR 是导致崩溃的原因，我们发现了这篇关于 Forever Frames 的帖子。我们尝试使用客户端 JavaScript 中的以下代码删除 SignalR 中的 Forever Frames 支持：

```
$.connection.hub.start({ transport: ['webSockets', 'serverSentEvents', 'longPolling'] }); 
```

因此只支持'webSockets'、'serverSentEvents'、'longPolling'。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T07:14:25.687

根据[这个](https://github.com/SignalR/SignalR/issues/1963#issuecomment-20171833)Github 问题，这已在 jQuery 1.10.1 中得到修复。

该问题在 1.9.x 中引入并在 1.10.1 中修复。

使用 JQuery 1.8.1 运行它似乎也可以工作。

解决方案：更新 jQuery

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T21:14:18.727

每当我看到这种情况发生时，我实际上都有在后台运行的流氓、僵尸 IE9 进程。他们甚至没有与之关联的窗口。所以，我会去杀死那些僵尸并重新启动一个新的 IE 实例，并且很长一段时间都没有问题，直到任何导致问题的异常再次发生。

我知道这听起来很疯狂，但我花了很长时间向 David Fowler 解释问题的症状，以及我怎么看不出 iFrame 神奇地停止触发事件以让传输知道开始下一个 iFrame 会话的任何原因。SignalR 消息本身总是正确终止逻辑消息流，onreadystatechange 事件将简单地停止触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-30T13:08:18.950

将其放入文档就绪事件中，您的所有 iframe 问题都将得到解决：

```
$.connection.hub.start({ transport: ['webSockets', 'serverSentEvents', 'longPolling'] }); 
```

# nhibernate - NHibernate auditing with Event listeners - how to create history object in IPreUpdateEventListener.OnPreUpdate

> ID：12268251
> 
> 赞同：1
> 
> 时间：2012-09-04T17:08:02.543
> 
> 标签：nhibernate

I'm taking advantage of great article:

[http://ayende.com/blog/3987/nhibernate-ipreupdateeventlistener-ipreinserteventlistener](http://ayende.com/blog/3987/nhibernate-ipreupdateeventlistener-ipreinserteventlistener)

and have implemented **OnPreInsert** exactly like in the example. However, my auditing requirement when updating the entity, is to create a "history" entry in database. Let's say:

*   I fetch Person object
*   I modify

    personObj.FirstName = Console.ReadLine();

*   then I save the entity. Now, in **IPreUpdateEventListener.OnPreUpdate** I want to change **UpdatedAt** & **UpdatedBy** properties of Entity & State (just like in the article), and **also I need** to add a new record to database that contains old values (**FirstName** before change).

I saw that **PreUpdateEvent** contains **OldState** array, however I have no idea how to create a **Person** object fron **OldState** array and save it.

How can I achieve what I need?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:21:43.860

> 但是我不知道如何从 OldState 数组创建一个 Person 对象并保存它。

你看过[NHibernate Envers](https://bitbucket.org/RogerKratz/nhibernate.envers)吗？它就是这样做的。

如果您出于某种原因不想使用此框架，请查看其源代码。

# c - Finding the Generate and kill set using GCC

> ID：12268254
> 
> 赞同：1
> 
> 时间：2012-09-04T17:08:15.490
> 
> 标签：c, optimization, gcc, compiler-construction

I want to do a project for compiler optimization in which I need the Generate and kill set for each basic block. So I want to know is there any way to extract this information using GCC for a c program.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T10:39:22.753

您可能需要为此实现自定义 CGC 通行证。你可以从以下开始

1.  [http://gcc.gnu.org/wiki/WritingANewPass](http://gcc.gnu.org/wiki/WritingANewPass) - 为 GCC 基础设施添加新的通行证。
2.  [http://gcc.gnu.org/onlinedocs/gccint/](http://gcc.gnu.org/onlinedocs/gccint/) - GCC 内部文档（这个文档很长，可能有点混乱）。PDF 链接： http: [//gcc.gnu.org/onlinedocs/gccint.pdf](http://gcc.gnu.org/onlinedocs/gccint.pdf)

为了进行简单的数据流分析，您可以查看 SSA 部分： http: [//gcc.gnu.org/onlinedocs/gccint/SSA.html#SSA](http://gcc.gnu.org/onlinedocs/gccint/SSA.html#SSA)（搜索 use-def 链）

# jsf - Glassfish denies access to JSF page, returning 403 HTTP response code

> ID：12268255
> 
> 赞同：2
> 
> 时间：2012-09-04T17:08:17.947
> 
> 标签：jsf, jakarta-ee, glassfish, http-status-code-403, permission-denied

I have a managed bean tied to my `index.xhtml` JSF page which uses an injected EJB like this:

```
// Code inside managed bean
@EJB
QueryEndpointLocal queryEndpoint;

public void search() {
    //...
    SearchResult result = queryEndpoint.search(query, resultFormat);
    //...
} 
```

QueryEndpoint in turn takes advantage of another EJB named `QueryEngine`:

```
// Code inside QueryEndpoint
@EJB
QueryEngine queryEngine; 
```

Currently, I have another EJB very similar to `QueryEngine` named `QueryEngineLite`. Their difference is that `QueryEngineLite` uses a local dump file which is bundled to the enterprise application as a resource while `QueryEngine` connects to an HBASE database. They are both loaded at startup and have a `@PostConstruct`-annotated method which initializes the connection. Only one of them are used by `QueryEndpoint` in a deployed application, and the other one just sits around with `Startup` and `PostConstruct` annotations commented-out. I know there are far better ways to handle this and my current solutions is a bad one, but that will change in future phases of the project. We have a plan to take advantage of AppServer-managed connection pools to communicate with HBASE, but for now the connection is handled by a library which uses HBASE's java API.

Now, I don't have any problem when I use the Lite EJB. Interfaces work, web services work and everything's fine. Just when I use the HBASE-tied EJB (`QueryEngine`), Glassfish responds with HTTP 403 error to requests for index.xhtml and the following lines get inserted in server.log:

```
INFO: JACC Policy Provider:Failed Permission Check: context (" App/App-war_war ") , permission (" ("javax.security.jacc.WebUserDataPermission" "" "GET") ") 
INFO: JACC Policy Provider:Failed Permission Check: context (" App/App-war_war ") , permission (" ("javax.security.jacc.WebUserDataPermission" "" "GET:CONFIDENTIAL") ") 
INFO: JACC Policy Provider:Failed Permission Check: context (" App/App-war_war ") , permission (" ("javax.security.jacc.WebUserDataPermission" "/favicon.ico" "GET") ") 
INFO: JACC Policy Provider:Failed Permission Check: context (" App/App-war_war ") , permission (" ("javax.security.jacc.WebUserDataPermission" "/favicon.ico" "GET:CONFIDENTIAL") ") 
```

I have no idea why this happens and how it can be fixed. I should note that it's only the JSF page that does not work when the first engine EJB is used. Other parts of the application such as web services work perfectly with both engines. Thanks in advance for your help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:00:29.180

更新：我停止了部署应用程序的域，然后再次启动它，让预先部署的应用程序自动启动。问题消失了，我可以毫无问题地查看 index.xhtml JSF 页面。

我通过创建另一个域并重现问题来验证这一点。index.xhtml 在首次部署后返回 HTTP 403。重新启动域可以解决问题。为什么？

* * *

在 Glassfish 问题跟踪器中提交了一个错误。 [http://java.net/jira/browse/GLASSFISH-19064](http://java.net/jira/browse/GLASSFISH-19064)

# php - Here's a true challenge: why does PHP call shutdown function before sessions are written?

> ID：12268256
> 
> 赞同：7
> 
> 时间：2012-09-04T17:08:20.623
> 
> 标签：php, debugging, session, garbage-collection, shutdown

Here's the thing. A colleague of mine is trying to overwrite the session handling of a framework that we use. This framework uses PHP's own native session handling by default, but he is now trying to implement a database layer between the requests.

Problem is that the database object is not available by the time sessions are written anymore, yet it is available for other functions such as when data is read from sessions. This is a wild behavior. Here's what we did:

```
register_shutdown_function('exithandler'); 

session_set_save_handler(
    'sess_open',
    'sess_close',
    'sess_read',
    'sess_write',
    'sess_destroy',
    'sess_gc'
); 
```

Each of those functions also writes a single line to our log file that we can track with the name of the function. This is done whenever the function is called. Now here are two URL's that are requested, the first one is where sessions are actually written (new data to the sessions) and the second one where session data is just checked (and none is written). Here's the puzzle:

```
/login/
sess_open
sess_read
exithandler
sess_write
sess_close

/account/
sess_open
sess_read
sess_write
sess_close
exithandler 
```

Why is this behavior different? Why is the exit handler called before data is stored in sessions and why is the same not true for a regular page, even though the same methods are indeed called?

Problem is that none of our classes are available anymore after the exithandler is called, I assume that PHP garbage collector has called __destruct() methods on all of our classes and they are gone. This is just bad.

Anyone knows why PHP behaves this way?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:33:48.503

正如您的评论所说的 PHP5.4，您可能想看看[`SessionHandlerInterface()`](http://www.php.net/manual/en/class.sessionhandlerinterface.php). 您可以通过`register_shutdown_function`in`open()`方法来半自动化该过程并真正利用 PHP5.4 的特性。

```
<?php
class MySessionHandler implements SessionHandlerInterface
{
    private $savePath;

    public function open($savePath, $sessionName)
    {
        register_shutdown_function('session_write_close');
        $this->savePath = $savePath;
        if (!is_dir($this->savePath)) {
            mkdir($this->savePath, 0777);
        }

        return true;
    }

    public function close()
    {
        return true;
    }

    public function read($id)
    {
        return (string)@file_get_contents("$this->savePath/sess_$id");
    }

    public function write($id, $data)
    {
        return file_put_contents("$this->savePath/sess_$id", $data) === false ? false : true;
    }

    public function destroy($id)
    {
        $file = "$this->savePath/sess_$id";
        if (file_exists($file)) {
            unlink($file);
        }

        return true;
    }

    public function gc($maxlifetime)
    {
        foreach (glob("$this->savePath/sess_*") as $file) {
            if (filemtime($file) + $maxlifetime < time() && file_exists($file)) {
                unlink($file);
            }
        }

        return true;
    }
}

$handler = new MySessionHandler();
session_set_save_handler($handler, true);
session_start(); 
```

# xml - Scala 在 PCDATA 中嵌入嵌套的 XML 文档

> ID：12268257
> 
> 赞同：4
> 
> 时间：2012-09-04T17:08:23.887
> 
> 标签：xml, scala

遗憾的是，我需要生成一些混乱的 XML。

主文档必须包含嵌入的 XML 文档。但是，嵌入文档出现在 CDATA 部分中。最终结果应如下所示：

```
<?xml version="1.0"?>
<foo>
  <xml>
    <![CDATA[
      <?xml version="1.0" encoding="UTF-8"?>
      <bar>
      </bar>
    ]]>
  </xml>
</foo> 
```

我遇到了两个问题：

首先，在 CDATA 部分中输出的任何内容都呈现为转义（例如，大于号`>`变为`&gt;`）

有没有办法在 CDATA 部分中禁用转义？

其次，我无法创建 XML 声明。尝试包含嵌入式 XML 文档时收到以下异常：

```
def serializeEmbedded(): Seq[Node] = {
  <?xml version="1.0"?>
  <bar>
  </bar>
}

Exception in thread "main" java.lang.IllegalArgumentException: xml is reserved
    at scala.xml.ProcInstr.<init>(ProcInstr.scala:25) 
```

这是我第一次尝试 Scala 的原生 XML 处理。

谢谢，

赛什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T20:20:16.947

XML 声明仅与序列化真正相关，并且您不能使用 Scala 的 XML 文字语法指定它（正如您所发现的）。

我建议定义一个这样的辅助函数：

```
import scala.xml._

def toCData(doc: Elem) = {
  val w = new java.io.StringWriter
  XML.write(w, doc, "UTF-8", true, null)
  PCData(w.toString)
} 
```

现在您可以编写，例如：

```
scala> val doc = <outer>{ toCData(<inner/>) }</outer>
doc: scala.xml.Elem = 
<outer><![CDATA[<?xml version='1.0' encoding='UTF-8'?>
<inner></inner>]]></outer> 
```

它没有更多的语言支持那么优雅，但它确实有效。

# php - 使用同一页面中的数据刷新 DIV

> ID：12268260
> 
> 赞同：0
> 
> 时间：2012-09-04T17:08:29.020
> 
> 标签：php, ajax, variables, html, refresh

基本上，我有一个 foreach 循环，从数据库中的产品数组中引入数据，其中包括价格等。数据首先通过一个简单的 mySQL SELECT 查询拉下来。然后将其存储在关联数组中。

我想计算页面上显示的项目数。我知道如何计算数组中的项目，但我将过滤哪些项目通过 url 显示在页面上，并且只想计算实际显示的项目数量。

我的想法是每次 foreach 循环运行时只使用一个变量和 + 1，但问题是我需要在循环运行之前回显该数字。

这是我的循环：

```
 <h2>Title</h2><h5><? echo $numberofproducts; ?> products</h5>
    <? 
    $numberofproducts == 0;
    foreach(get_products() as $product){
    $numberofproducts++; 
    // display product info
    ?> 
```

循环通过 AJAX 运行完成后，有没有办法更新 h5 标签？不需要另一个包含一行的 php 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:19:47.283

也许像这样

```
echo "<script type='text/javascript'>$('#div_id').find('h5').html(".$numberofproducts.");</script>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:21:17.833

就这样吧：

```
<?php $products = get_products(); ?>

<h2>Title</h2><h5><?php echo count($products); ?> products</h5>
<?php 

    foreach($products as $index => $product){

        //you may use $index as the progressive loop counter

    }

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:24:42.203

您也可以只运行循环两次：

```
<h2>Title</h2>
<?php
  $numberofproducts = 0;
  $products = get_products();
  foreach($products as $product){
    ++$numberofproducts; 
  }
?>
<h5><?php echo $numberofproducts; ?> products</h5>
<?php
  foreach($products as $product){
    // display product info
  }
?> 
```

我假设该集合相当小，否则您不会先获取所有这些集合，然后在 for 循环中进行过滤。

此外，如果您使用 javascript 动态更改页面内容/列表，则在执行过滤后挂钩列表中（可见）元素的计数，然后更新 h5 中的数字。

# ruby-on-rails - 使用 DeviseInvitable 接受邀请时如何添加额外验证

> ID：12268263
> 
> 赞同：0
> 
> 时间：2012-09-04T17:08:35.790
> 
> 标签：ruby-on-rails, devise

亲爱的 Stackoverflowers，

我正在构建一个信息系统，其他用户（在系统中称为“所有者”）可以注册其他用户。我正在使用 Devise Invitable 来获取邀请功能。受邀用户将收到一封包含验证链接的电子邮件。如果他们点击它，他们可以设置密码并登录系统。

当用户设置他或她的密码时，我想建立一个额外的验证。用户必须输入他或她的“uni-code”，该“uni-code”由邀请者亲自或通过电话等方式提供给被邀请的用户。邀请用户时，uni-code 存储在数据库中。

*当受邀用户输入无效的 uni-code 时，用户将被重定向到同一页面，他或她必须重试。* **如何应用对 uni-code 的检查，如果失败，如何进行适当的重定向？**

```
# Controller for handling Owners
# This class uses Devise-Invite methods for inviting new Owners
class Devise::Invitations::OwnerInvitationsController < Devise::InvitationsController

  # GET /owners/new
  def new
    super
  end

  # POST /owners
  def create
    params[:owner][:parent_id] = current_inviter
    super
  end

  #  PUT /owners
  def update
    if true #TODO: check if entered uni-code equals the owner's uni-code
      super
    else
      #TODO: uni-code does not match, redirect (howto do a proper redirect)?
    end
  end

# GET  /owners/invitation/accept?invitation_token={abcdef}
  def edit
      super
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:51:24.350

您是否要添加额外的邀请码来验证用户。

查看以下链接可能会有所帮助

[https://github.com/scambra/devise_invitable](https://github.com/scambra/devise_invitable)

[Ruby on rails：设计，想要添加邀请码？](https://stackoverflow.com/questions/3704837/ruby-on-rails-devise-want-to-add-invite-code)

谢谢，

尼迪·萨瓦亚

# xcode - Xcode 4.4.1 在 Storyboard 上不断崩溃

> ID：12268264
> 
> 赞同：0
> 
> 时间：2012-09-04T17:08:38.007
> 
> 标签：xcode, storyboard

我无法使用 Xcode 打开我的主 Storyboard 文件。我更新到 4.4.1 没有成功。我试图恢复我的故事板的先前版本，但它没有打开它。每次都会崩溃。

如果我创建一个新的故事板文件，它会打开它，但我不想从头开始。

这是崩溃日志：

```
Process:         Xcode [21518]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.4.1 (1488)
Build Info:      IDEApplication-1488000000000000~2
App Item ID:     497799835
App External ID: 9950605
Code Type:       X86-64 (Native)
Parent Process:  launchd [294]
User ID:         501

Date/Time:       2012-09-04 18:59:51.627 +0200
OS Version:      Mac OS X 10.8.1 (12B19)
Report Version:  10

Interval Since Last Report:          362662 sec
Crashes Since Last Report:           225
Per-App Interval Since Last Report:  1725 sec
Per-App Crashes Since Last Report:   17
Anonymous UUID:                      9730AF74-F1A3-49A6-BE6A-AB5A3B587E29

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4F1003
UNCAUGHT EXCEPTION (NSBadBitmapParametersException): Overflow allocating bitmap backing store.  Cannot back bitmap with 1152921504606846976 bytes per row, -9223372036854775808 height, and 1 planes.
UserInfo: (null)
Hints: None
Backtrace:
  0  0x00007fff927166fe __exceptionPreprocess (in CoreFoundation)
  1  0x00007fff981ae470 objc_exception_throw (in libobjc.A.dylib)
  2  0x00007fff927164ec +[NSException raise:format:] (in CoreFoundation)
  3  0x00007fff8d8b065f NSNewBitmapBackingStore (in AppKit)
  4  0x00007fff8d9fe301 +[NSCGImageSnapshotRep _lockFocusForCreatingSnapshot:withRect:context:hints:flipped:] (in AppKit)
  5  0x00007fff8dabfbee -[NSImageRep _newCGImageForProposedRect:context:hints:flipped:] (in AppKit)
  6  0x00007fff8d94f41b -[NSImageRep CGImageForProposedRect:context:hints:] (in AppKit)
  7  0x00007fff8d9e75dd -[NSImageRep CGImageForProposedRect:context:hints:flipped:] (in AppKit)
  8  0x00007fff8da6baa6 -[NSImage _newSnapshotRepForRep:rect:context:processedHints:] (in AppKit)
  9  0x00007fff8da0db98 -[NSImage _snapshotRepForRep:rect:context:processedHints:] (in AppKit)
 10  0x00007fff8d967442 __71-[NSImage drawInRect:fromRect:operation:fraction:respectFlipped:hints:]_block_invoke_0 (in AppKit)
 11  0x00007fff8d94ce26 -[NSImage _usingBestRepresentationForRect:context:hints:body:] (in AppKit)
 12  0x00007fff8d967269 -[NSImage drawInRect:fromRect:operation:fraction:respectFlipped:hints:] (in AppKit)
 13  0x000000010e8b2c8a (in IDEInterfaceBuilderCocoaTouchIntegration)
 14  0x000000010e8b3352 (in IDEInterfaceBuilderCocoaTouchIntegration)
 15  0x0000000106278ef8 DVTCGContextDrawBlockByPreservingState (in DVTKit)
 16  0x000000010e8b3270 (in IDEInterfaceBuilderCocoaTouchIntegration)
 17  0x000000010e8b1350 (in IDEInterfaceBuilderCocoaTouchIntegration)
 18  0x00007fff8d939a94 -[NSView _drawRect:clip:] (in AppKit)
 19  0x00007fff8d9380f1 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in AppKit)
 20  0x00007fff8d938509 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in AppKit)
 21  0x00007fff8d938509 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in AppKit)
 22  0x00007fff8d938509 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in AppKit)
 23  0x00007fff8d938509 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in AppKit)
 24  0x00007fff8d938509 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in AppKit)
 25  0x00007fff8d938509 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in AppKit)
 26  0x000000010613bee5 -[DVTReplacementView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in DVTKit)
 27  0x00007fff8d938509 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in AppKit)
 28  0x00007fff8d938509 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in AppKit)
 29  0x00007fff8d938509 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in AppKit)
 30  0x00007fff8d938509 -[NSView _recursiveDisplayAllDirtyWithLockFocus:visRect:] (in AppKit)
 31  0x00007fff8d936122 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 32  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 33  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 34  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 35  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 36  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 37  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 38  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 39  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 40  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 41  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 42  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 43  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 44  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 45  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 46  0x00007fff8d937474 -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 47  0x00007fff8d935b73 -[NSThemeFrame _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] (in AppKit)
 48  0x00007fff8d93179d -[NSView _displayRectIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:] (in AppKit)
 49  0x00007fff8d8fb703 -[NSView displayIfNeeded] (in AppKit)
 50  0x00007fff900dbb81 __NSFirePerformWithOrder (in Foundation)
 51  0x00007fff926dd0c7 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ (in CoreFoundation)
 52  0x00007fff926dd031 __CFRunLoopDoObservers (in CoreFoundation)
 53  0x00007fff926b84a8 __CFRunLoopRun (in CoreFoundation)
 54  0x00007fff926b7dd2 CFRunLoopRunSpecific (in CoreFoundation)
 55  0x00007fff950db774 RunCurrentEventLoopInMode (in HIToolbox)
 56  0x00007fff950db454 ReceiveNextEventCommon (in HIToolbox)
 57  0x00007fff950db3a3 BlockUntilNextEventMatchingListInMode (in HIToolbox)
 58  0x00007fff8d8f7fa3 _DPSNextEvent (in AppKit)
 59  0x00007fff8d8f7862 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] (in AppKit)
 60  0x00007fff8d8eec03 -[NSApplication run] (in AppKit)
 61  0x00007fff8d893656 NSApplicationMain (in AppKit)
 62  0x0000000105ce3dc0 (in Xcode)
 63  0x0000000000000002

objc[21518]: garbage collection is ON
abort() called

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libsystem_kernel.dylib          0x00007fff96d39212 __pthread_kill + 10
1   libsystem_c.dylib               0x00007fff91a40b34 pthread_kill + 90
2   libsystem_c.dylib               0x00007fff91a84dfa abort + 143
3   com.apple.dt.IDEKit             0x0000000106a9d685 +[IDEAssertionHandler _handleAssertionWithLogString:] + 506
4   com.apple.dt.IDEKit             0x0000000106a9e300 -[IDEAssertionHandler handleUncaughtException:] + 603
5   com.apple.AppKit                0x00007fff8d8eed42 -[NSApplication run] + 836
6   com.apple.AppKit                0x00007fff8d893656 NSApplicationMain + 869
7   com.apple.dt.Xcode              0x0000000105ce3dc0 0x105ce2000 + 7616 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:12:02.333

很难说，但看看你的堆栈（第 4-10 行），图像有问题。我会进入您的应用程序并确保它正确加载图像。如果您仍然遇到问题，请尝试从导致问题的视图中删除图像，直到您可以准确找出导致异常的图像。

# javascript - 如何通过外部 Javascript 库（例如 jQuery）使用 Google Closure Stylesheet 重命名？

> ID：12268270
> 
> 赞同：2
> 
> 时间：2012-09-04T17:08:55.863
> 
> 标签：javascript, jquery, google-closure-compiler, google-closure-library, google-closure-stylesheet

我正在研究 Google 的样式表重命名功能，但我不确定如何重写我的 jquery 选择器。我没有发现**[文档](http://code.google.com/p/closure-stylesheets/#Renaming)**很清楚。

如果我有一些看起来像这样的代码：

```
<div class="MyClass"></div>
<div id="MyID"></div>

$('.MyClass').someFunc();
$('#MyID').someFunc(); 
```

必须如何编写 HTML 和 javascript 才能使 CSS 重命名起作用？

感谢您的建议。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-07T15:32:59.813

要让 Closure-stylesheets 与 jQuery 等外部库结合使用，您还需要使用 Closure-library 来添加对`goog.getCssName`. 但是，由于 Closure-Library 是为了最大限度地利用 Closure-compiler 的死代码消除而编写的，因此最终输出中只会包含非常少量的库代码（本例中约为 1KB）。

# 第 1 步 - 设置您的项目

您将需要以下工具：

*   [闭包库](http://code.google.com/p/closure-stylesheets/downloads/list)
*   [闭包编译器](http://code.google.com/p/closure-compiler/downloads/detail?name=compiler-latest.zip)
*   [闭包模板](http://code.google.com/p/closure-templates/downloads/detail?name=closure-templates-for-javascript-latest.zip)
*   [闭包样式表](http://code.google.com/p/closure-stylesheets/downloads/list)

# 第 2 步 - 设置您的源文件

## 样式表源 (sample.gss)

```
@def BG_COLOR              rgb(235, 239, 249);

@def DIALOG_BORDER_COLOR   rgb(107, 144, 218);
@def DIALOG_BG_COLOR       BG_COLOR;

.MyClass {
  background-color: BG_COLOR;
  height:100px;
}

#MyId {
  background-color: DIALOG_BG_COLOR;
  border: 1px solid DIALOG_BORDER_COLOR;
  height:100px;
} 
```

## 闭包模板源 (sample.soy)

```
{namespace ClosureSample}

/**
 * SampleHtml
 */
{template .SampleHtml autoescape="false"}
    <div class="{css MyClass}"></div>
{/template} 
```

## Javascript 源代码 ( [sample.js](http://people.missouristate.edu/chadkillingsworth/ClosureSamples/jQueryStylesheets/sample.js) )

```
goog.require('ClosureSample');
document.write(ClosureSample.SampleHtml());

$(function() {
    $('.' + goog.getCssName('MyClass')).css('background-color', 'pink');
}); 
```

## HTML 源代码 ( [development.htm](http://people.missouristate.edu/chadkillingsworth/ClosureSamples/jQueryStylesheets/development.htm) )

```
<!DOCTYPE html>
<html>
<head>
  <title>Closure stylesheets with External Library</title>
  <link rel="Stylesheet" media="all" href="sample.css" />
  <script type="text/javascript" src="sample_renaming_map.js"></script>
  <script type="text/javascript" src="http://closure-library.googlecode.com/svn/trunk/closure/goog/base.js"></script>
  <script type="text/javascript">
    goog.require('goog.soy');
    goog.require('goog.string.StringBuffer');
  </script>
  <script type="text/javascript" src="soyutils_usegoog.js"></script>
  <script type="text/javascript" src="sample-templates.js"></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
</head>
<body>
  <script type="text/javascript" src="sample.js"></script>
  <div id="MyId"></div>
</body>
</html> 
```

# 第 3 步 - 编译样式表和模板

使用从模板和样式表项目下载的工具，您需要编译`sample.gss`和`sample.soy`文件。这是用于此示例的命令：

```
java -jar closure-stylesheets.jar \
    --pretty-print \
    --output-file sample.css \
    --output-renaming-map-format CLOSURE_UNCOMPILED \
    --rename CLOSURE \
    --output-renaming-map sample_renaming_map.js \
    sample.gss

java -jar SoyToJsSrcCompiler.jar \
    --shouldProvideRequireSoyNamespaces \
    --shouldGenerateJsdoc \
    --outputPathFormat {INPUT_FILE_NAME_NO_EXT}.js \
    --cssHandlingScheme goog \
    sample.soy 
```

使用这些文件，您可以在开发期间测试重命名。[请参阅示例](http://people.missouristate.edu/chadkillingsworth/ClosureSamples/jQueryStylesheets/development.htm)。

# 第 4 步 - 为生产编译项目

首先使用“CLOSURE_COMPILED”选项重新编译样式表以生成重命名映射：

```
java -jar closure-stylesheets.jar \
    --output-file sample.css \
    --output-renaming-map-format CLOSURE_COMPILED \
    --rename CLOSURE \
    --output-renaming-map sample_renaming_map.js \
    sample.gss 
```

然后，您需要计算 Closure-library 依赖文件并将所有源 javascript 文件编译到一个源中。

*注意：由于 jQuery 与 Closure-compiler 的 ADVANCED_OPTIMIZATIONS 不兼容，因此它不会作为输入包含在内。相反，请参考在[Closure-compiler contrib/externs](http://code.google.com/p/closure-compiler/source/browse/#svn%2Ftrunk%2Fcontrib%2Fexterns)文件夹中找到的适当的[jQuery extern 文件](http://closure-compiler.googlecode.com/svn/trunk/contrib/externs/jquery-1.7.js)。*

Closure-library 项目中的 calcdeps.py 脚本还可用于在它确定的输入文件上调用 Closure-compiler。

```
python calcdeps.py \
    -i sample.js \
    -p PATH_TO_CLOSURE_LIBRARY_FOLDER \
    -p sample-templates.js \
    -o compiled \
    -c compiler.jar \
    -f --js=sample_renaming_map.js
    -f --compilation_level=ADVANCED_OPTIMIZATIONS \
    -f --warning_level=VERBOSE \
    -f --externs=jquery-1.7-externs.js \
    -f --js_output_file=sample_compiled.js 
```

查看最终结果：[编译后的版本](http://people.missouristate.edu/chadkillingsworth/ClosureSamples/jQueryStylesheets/compiled.htm)。

# 最后的笔记

如您所见，使用 Google Closure Stylesheets 不仅需要整个 Closure-tools 套件的各个部分，而且还非常复杂。

*   输出 HTML 需要使用 Google Closure-templates。在这个人为的示例中，我使用了一个`document.write`调用来输出带有正确重命名的类的 HTML，但是对于生产代码有更优雅和可维护的技术。
*   Closure-stylesheets 不会重命名 ID 选择器，因此 ID 的代码不受影响。
*   为了便于查看，编译后的示例引用了 Google CDN 的 jQuery 库。但是，将 jQuery 库和已编译的源代码连接到单个源 JS 文件中同样有效。

# javascript - suds.js 中的“找不到变量：窗口”

> ID：12268280
> 
> 赞同：1
> 
> 时间：2012-09-04T17:09:26.537
> 
> 标签：javascript, soap, titanium-mobile, suds

我正在尝试在我在 Titanium Studio（版本 2.1.1）中构建的移动应用程序中测试接收 SOAP 响应。我正在使用 suds 库这样做，但是当我调用它时，我得到了错误

`[WARN] Exception in event callback. {
line = 27;
message = "Can't find variable: window"`

我不确定我为什么会收到这个，我包含了 suds.js 库，并且应用程序不会崩溃，只是不会发送。我用来实现这个的代码是：

```
var suds = new SudsClient({ 
  endpoint: 'http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL',
  targetNamespace: 'http://ws.cdyne.com/' 
    });

    var soapBtn = Ti.UI.createButton({
        title:'SOAP',
        bottom:'100'
    });
    homeHolder.add(soapBtn);

    var callParams = {
    ZIP:'33325'
    };

    soapBtn.addEventListener('click',function(e){

    suds.invoke("GetCityForecastByZIP", callParams, function(xmlDoc) {
        var response = xmlDoc.documentElement.getElementsByTagName('GetCityForecastByZIPResult');
        Ti.API.info(response);
    }); 
```

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T02:19:58.113

您收到此错误是因为您没有使用修改后的 suds.js 钛，您可以从厨房水槽示例或 suds github [https://github.com/kwhinnery/上的钛移动示例中获得正确的错误。 Suds/tree/master/TitaniumMobileExample/CurrencyConverter/Resources](https://github.com/kwhinnery/Suds/tree/master/TitaniumMobileExample/CurrencyConverter/Resources)

# r - 将 RCurl 与 SFTP 一起使用

> ID：12268281
> 
> 赞同：8
> 
> 时间：2012-09-04T17:09:36.463
> 
> 标签：r, sftp, rcurl

我`ftpUpload`第一次尝试在 RCurl 包中使用。

我尝试访问的站点使用 sftp 协议。我已确保安装包含建立安全连接功能的 libcurl 版本。

SFTP 列在 RCurl 可用的协议中：

```
curlVersion()$protocols
[1] "dict"   "file"   "ftp"    "ftps"   "gopher"
[6] "http"   "https"  "imap"   "imaps"  "ldap"  
[11] "pop3"   "pop3s"  "rtmp"   "rtsp"   "scp"   
[16] "sftp"   "smtp"   "smtps"  "telnet" "tftp" 
```

然而，当我运行该`fileUpload`函数时，我得到：

```
ftpUpload(what = "some_file.png",
          to = "userid:password@sftp://ec2-some-server-ip.compute-1.amazonaws.com")

Error in function (type, msg, asError = TRUE)  : 
Couldn't resolve host 'sftp' 
```

我也尝试过在参数化方面打破常规`userid`，`password`但我得到了相同的响应。

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-08-18T10:56:54.117

用户 ID 和密码必须在协议之后（这就是为什么您会收到找不到主机 sftp 错误的原因）：

```
ftpUpload(what = "some_file.png",
      to = "sftp://userid:password@ec2-some-server-ip.compute-1.amazonaws.com:22/path/some_file.png") 
```

我还建议在主机之后包含端口号，以防它不是默认值以及您希望它去的服务器上的文件路径。

# asp.net - MiniProfiler 出错：System.Web.Routing.UrlRoutingModule 未实现 IHttpHandlerFactory

> ID：12268285
> 
> 赞同：7
> 
> 时间：2012-09-04T17:09:45.880
> 
> 标签：asp.net, iis-7, webforms, mvc-mini-profiler

我正在使用 MiniProfiler 来分析我的 ASP.NET 4 Webform 应用程序。在 localhost 中它工作正常，但是当我部署到 IIS7 时，我收到以下错误：

```
System.Web.Routing.UrlRoutingModule does not implement IHttpHandlerFactory or IHttpHandler 
```

这是给我错误的 web.config 行

```
<system.webServer>
<handlers>
  <add name="MiniProfiler" path="mini-profiler-resources" verb="*" type="System.Web.Routing.UrlRoutingModule" resourceType="Unspecified" preCondition="integratedMode" />
</handlers> 
```

你知道在这种情况下我应该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:04:22.130

最后，我最终使用了以下配置。这可能是矫枉过正，通常不推荐，但我解决了我的问题

```
<module runAllManagedModulesForAllRequests="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-21T13:20:52.697

```
 <handlers>
    <remove name="UrlRoutingModule-4.0"/>
    <add  name="UrlRoutingModule-4.0" path="*" verb="*" type="System.Web.Routing.UrlRoutingModule" preCondition="" />
  </handlers> 
```

# mysql - '合并' 2个mysql查询

> ID：12268286
> 
> 赞同：0
> 
> 时间：2012-09-04T17:09:48.193
> 
> 标签：mysql

我有 2 个查询要合并为一个。

第一个：

```
 SELECT 
        poll_questions.id,
        poll_questions.question,
        poll_questions.qmore,
        poll_questions.total_votes,
        poll_questions.active,
        poll_questions.created_at,
        poll_answers.answer,
        poll_answers.votes,
        poll_answers.id AS answer_id,
        poll_photos.photo_name_a,
        users.username

        FROM poll_questions 

        LEFT JOIN (poll_answers, poll_photos)  
            ON (poll_answers.question_id = poll_questions.id AND
                poll_photos.question_id = poll_questions.id
                )
        LEFT JOIN users ON poll_questions.author = users.id 

        WHERE poll_questions.active = 1 

        ORDER BY poll_questions.created_at DESC 

        LIMIT {$per_page} OFFSET {$offset} 
```

第二：

```
SELECT vote_history_raw.vote
FROM vote_history_raw
WHERE vote_history_raw.user_id = {$user_id} 
```

请注意，第一个查询中的用户是作者，第二个查询中他是选民。

感谢您的帮助！

# ruby-on-rails - 这个未初始化的常量错误是什么？

> ID：12268288
> 
> 赞同：1
> 
> 时间：2012-09-04T17:10:06.337
> 
> 标签：ruby-on-rails

我创建了 ruby​​ 类并将其放在 app_dir/lib/appointment_messaging_job.rb

```
class AppointmentMessagingJob
  def perform
  end
end 
```

在我的一个控制器中，我这样做：

```
test = AppointmentMessagingJob.new 
```

我得到一个非常烦人非常难以理解的错误：

```
Started GET "/en/appointments/1/approve" for 127.0.0.1 at 2012-09-04 13:02:43 -0400
Processing by AppointmentsController#approve as HTML
  Parameters: {"locale"=>"en", "id"=>"1"}
Completed 500 Internal Server Error in 2ms

NameError (uninitialized constant AppointmentsController::AppointmentMessagingJob):
  app/controllers/appointments_controller.rb:89:in 'approve' 
```

这个未初始化的常数是什么？我真的不明白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T17:14:57.460

您的库没有被加载，并且无法解析类名。

更新您的`config/application.rb`以自动包含`lib`目录；里面有一行默认被注释掉：

```
# Custom directories with classes and modules you want to be autoloadable.
# config.autoload_paths += %W(#{config.root}/extras) 
```

*（显然，您希望包含`lib`目录，而不是`extras`。）*

您也可以`require 'test_class'`在控制器中使用 IIRC，lib 目录位于库路径上。这使依赖关系更加明确，但我不确定它是否更具交流性。

# python - 在字典中递增

> ID：12268289
> 
> 赞同：1
> 
> 时间：2012-09-04T17:10:10.453
> 
> 标签：python, duplicates

我看过一堆基本上做我正在做的事情的帖子，但不幸的是，我不确定为什么我不断得到不是我想要的输出。问题是，每当某个单词出现在我的 excel 文件中时，我都会尝试增加字典，但是每个单词实例都被视为我的代码当前的新单词。例如，“the”在我的文件中出现了约 50 次，但输出只是在许多不同的行上列出了“the”，每个实例的计数为“1”。实际上，我希望“the”被列出一次，计数为“50”。非常感谢任何澄清！这是我的代码：

```
import csv
import string

filename = "input.csv"
output = "output1.txt"

def add_word(counts, word):
    word = word.lower()
    #the problem is here, the following line never runs
    if counts.has_key(word):
        counts[word] +=1
    #instead, we always go to the else statement...
    else:
        counts[word] = 1
    return counts

def count_words(text):
    word = text.lower()
    counts = {}
    add_word(counts, word)
    return counts

def main():
    infile = open(filename, "r")
    input_fields = ('name', 'country')
    reader = csv.DictReader(infile, fieldnames = input_fields)
    next(reader)
    first_row = next(reader)
    outfile = open(output, "w")
    outfile.write("%-18s%s\n" %("Word", "Count"))
    for next_row in reader:
        full_name = first_row['name']
        word = text.split(' ',1)[0]
        counts = count_words(word)
        counts_list = counts.items()
        counts_list.sort()
        for word in counts_list:
            outfile.write("%-18s%d\n" %(word[0], word[1]))
        first_row = next_row

if __name__=="__main__":
main() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T17:17:16.003

使用普通字典，*dict.get*方法非常适合计数：

```
>>> d = {}
>>> for color in 'red green blue green red red green'.split():
        d[color] = d.get(color, 0) + 1

>>> d
{'blue': 1, 'green': 3, 'red': 3} 
```

[集合模块](http://docs.python.org/library/collections.html#module-collections)提供了两种简化此代码的方法。

这是一个使用[*collections.Counter*](http://docs.python.org/library/collections.html#counter-objects)

```
>>> from collections import Counter
>>> d = Counter()
>>> for color in 'red green blue green red red green'.split():
        d[color] += 1

>>> d
Counter({'green': 3, 'red': 3, 'blue': 1}) 
```

还有[*collections.defaultdict*](http://docs.python.org/library/collections.html#defaultdict-objects)方法：

```
>>> from collections import defaultdict
>>> d = defaultdict(int)
>>> for color in 'red green blue green red red green'.split():
        d[color] += 1

>>> d
defaultdict(<type 'int'>, {'blue': 1, 'green': 3, 'red': 3}) 
```

当您的输出需要是常规字典或使用较旧版本的 Python 时，常规字典方法最适合。

*Counter*方法易于使用，并且具有许多非常适合计数应用程序的实用程序（例如， most_common() 方法按排序顺序列出了*n 个最大计数）。*[Counter](http://code.activestate.com/recipes/576611/)的反向移植可用于 2.7 之前的 Python 版本。

*defaultdict*方法有一些缺点。仅仅访问缺失值会导致字典增长。此外，要使用它，您需要了解工厂函数并知道可以在不带参数的情况下调用*int()*以产生零值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T17:12:17.597

您的函数`count_words`每次调用时都会创建一个新字典（而不是仅添加到当前`results`字典。

但是，对于这样的事情，您可能需要考虑使用 a (这是模块中的`Counter`一个特殊功能：`dict``collections`

```
from collections import Counter
c = Counter()
for row in csv_reader:
    c.update(text.lower() for text in row)

print(c) 
```

# symfony - Symfony2 中的组合根在哪里？

> ID：12268294
> 
> 赞同：1
> 
> 时间：2012-09-04T17:10:32.947
> 
> 标签：symfony, dependency-injection

我发现我在 Symfony2 控制器中使用 DI 容器作为服务定位器（即获取容器引用以在我的操作中初始化对象）。在查看了 Mark Seemann 的书后，他清楚地展示了如何在[ASP.NET MVC 的控制器工厂](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)中组合对象，我想知道 Symfony2 中是否有类似的模式？

# mysql - 按时间排序，仅显示唯一的地方

> ID：12268295
> 
> 赞同：2
> 
> 时间：2012-09-04T17:10:42.947
> 
> 标签：mysql, sql

我有以下结构：

```
CREATE TABLE IF NOT EXISTS `myTable` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `time` int(11) NOT NULL,
  `item` varchar(255) NOT NULL,
  `price` int(11) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `time` (`time`),
  KEY `item` (`item`),
  KEY `price` (`price`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;

INSERT INTO `myTable` (`ID`, `time`, `item`, `price`) VALUES
(1, 100, 'cat', 10),
(2, 101, 'cat', 10),
(3, 102, 'cat', 9),
(4, 103, 'cat', 11),
(5, 104, 'cat', 10),
(6, 105, 'cat', 10),
(7, 106, 'cat', 11); 
```

我试图找出一个返回以下内容的查询：

```
time   item   price
----   ----   -----
100    cat    10
102    cat    9
103    cat    11
104    cat    10
106    cat    11 
```

它按时间排序，并且仅显示价格与其之前的价格不同的行（***编辑：*** **根据时间**）。

**编辑：**

也许我把原来的问题弄得太简单了，如果用这样的数据更复杂怎么办：

```
INSERT INTO `myTable` (`ID`, `time`, `item`, `price`) VALUES
(1111, 100, 'cat', 10),
(21, 105, 'cat', 10),
(31, 108, 'cat', 9),
(411, 109, 'cat', 11),
(512, 110, 'cat', 10),
(61, 114, 'cat', 10),
(72, 120, 'cat', 11),
(8, 100, 'dog', 20),
(93, 102, 'dog', 20),
(104, 108, 'dog', 29),
(111, 109, 'dog', 31),
(122, 155, 'dog', 20),
(13, 165, 'dog', 20),
(1445, 172, 'dog', 31); 
```

在上面，ID列都乱了，可能中间还有其他记录。此外，时间不再以 1 递增，我将一只狗扔进了混合物中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:14:41.577

此查询将为每一行获取前一个 ID 的价格，并进行比较，如果不同则显示它

```
select time, item, price
from mytable T1
where price != (select price from mytable where id < t1.id order by id desc limit 1) or T1.id = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T17:41:30.143

您需要的查询是这样的：

```
select curr.time  ,
       curr.item  ,
       curr.price 
from myTable curr
join myTable prev on prev.time = ( select max(time)
                                   from myTable p
                                   where p.time < curr.time
                                 )
where curr.price != prev.price
order by t.time 
```

它利用了时间是表的备用键这一事实。我们从`myTable`（我们称其为*current ）中获取所有行，使其价格与基于备用键**time*的值的前一行的价格不同（我们将此集合称为*previous*）。

为此，我们需要一个[*相关的子查询*](http://en.wikipedia.org/wiki/Correlated_subquery)来标识当前行`time`小于或等于的值的最大值。`time`所以......我们最终引用了`myTable`三次：

*   首先，对于“当前”行的集合，
*   其次，对于“前一个”行的集合
*   第三，根据“当前”行中的数据识别“上一个”行。

简单的！

# javascript - 多人游戏完全在浏览器中运行，服务器仅用于 db？

> ID：12268296
> 
> 赞同：-1
> 
> 时间：2012-09-04T17:10:45.307
> 
> 标签：javascript, database, multiplayer, client-side

目前是否可能/可行/不疯狂使用javascript（可能+ flash）实现多人游戏，代码完全在客户端运行，服务器仅用于托管应用程序/游戏连接的数据库，以存储/获取相关多人信息（玩家和对手在游戏世界中的位置/拥有的物品/hiscore）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:15:18.927

如果没有服务器端代码来验证从客户端接收到的输入，那么游戏将容易出现重大安全问题，每个人都会很快达到 100 万级。

服务器端代码主要用于验证用户输入和格式化数据库接收到的数据。你不能没有它。

# c# - 如何从同一代码中正确调用 TAP 和非 TAP 方法？

> ID：12268299
> 
> 赞同：1
> 
> 时间：2012-09-04T17:10:58.233
> 
> 标签：c#, asynchronous, tap, async-ctp

我有类方法 A 需要使用 N 个计算器对象之一的服务来完成它的工作。

为了让 A 保持愚蠢和快乐，我不会要求它弄清楚它需要使用哪个计算器；一些更高级别的代码将找出 A 应该使用哪个计算器，并将其注入 A。

我遇到的问题是，其中一些计算器只是非 TAP（同步代码）的大块，而其他计算器是标记为“异步”（TAP）的方法

我不知道如何用 TAP 和非 TAP 计算器注入 A。IE，对于 TAP 计算器，似乎我需要做一个“等待”，但对于非 TAP 计算器，我不会。

不知道如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:14:44.883

通常，如果您尝试迁移到异步模型，我建议您将同步方法包装到 a 中`Task<T>`并使它们异步。然后，您可以在任何地方使用异步调用。

> IE，对于 TAP 计算器，似乎我需要做一个“等待”，但对于非 TAP 计算器，我不会。

这实际上如何实现并不重要。“非 TAP”计算器将返回`T`，而“TAP”计算器将返回`Task<T>`。这确实是唯一的区别 - 如果您的方法返回`Task`或`Task<T>`，您可能想要使用`await`. 如果没有，您要么只想使用该值，要么将其包装`TaskEx.Run`（使其异步），以便您可以使用`await`.

# php - Jquery 动态下拉菜单

> ID：12268305
> 
> 赞同：0
> 
> 时间：2012-09-04T17:11:28.747
> 
> 标签：php, jquery, ajax, select, dynamic

我有以下代码选择框 div：

```
Make:<br> 
        <select name="Make">
        <option value = "Toyota">Toyota</option>
        <option value = "Honda">Honda</option>
    </select>

<div id="side_model">           
        Model:<br> 
        <select name="Model">
        <PHP CODE THAT SEARCHES DATABASE FOR ALL MODELS AVAILABLE AND LIST THEM AS OPTIONS ?>
    </select>
</div> 
```

以及以下 Jquery：

```
<script>
jQuery(document).ready(function($){
    $('#Make').change(function() {
        $.get('dropdown.php',{make: $(this).val() },function(d){
            $('#side_model').html(d);
        });
    });
});
</script> 
```

这是我的代码的一个非常简化的版本，但我所做的是，一旦选择了 make，我在 dropwdown php 中查询数据库并获取该 make 的所有模型，然后简单地填充列表

我的 dropdown.php 看起来像这样：

```
Model:<br> 
            <select name="Model">
            <PHP CODE THAT SEARCHES DATABASE FOR ALL MODELS THAT MATCH THE MAKE SELLECTED AND LIST THEM AS OPTIONS ?>
        </select> 
```

好的，除了一个细节之外，代码几乎也按照预期的方式工作。

而不是 jQuery 用 dropdown.php 的内容替换 div，它只是在其顶部添加了额外的选择框。

如何获取 jQuery 代码以将模型选择框替换为动态生成的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:24:30.920

`.replaceWith()`使用 jQuery 的函数可能更有意义（[此处](http://api.jquery.com/replaceWith/)的文档）：

首先，为您的选择元素添加一个 ID

```
<div id="side_model">           
    Model:<br> 
    <select id="Model" name="Model">
        <option value='0'>----</option>
    </select>
</div> 
```

然后用来自的返回值替换它`$.get()`：

```
jQuery(document).ready(function($){

$('#Make').change(function() {
        $.get('dropdown.php',{make: $(this).val() },function(d){
            $('#Model').replaceWith(d);
        });
    });
}); 
```

现在您需要在后台做的就是`select`完整地生成 （包括打开/关闭`<select>`标签）。

**更新**

我刚刚注意到你在打电话`$("#Make").change()`，但你从​​来没有给你的任何元素一个 ID 设置为“Make”。将 ID 属性添加到您的选择 where `name="Make"`：

```
Make:<br> 
    <select id="Make" name="Make">
        <option value = "Toyota">Toyota</option>
        <option value = "Honda">Honda</option>
    </select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:41:02.543

我还注意到你打电话`$('#make')`，但你的选择只有这样的名字，所以请添加`id="make"`到你的选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:23:32.857

也许在重新填充之前清除 div？

```
$('#side_model').empty(); 
```

并再次填充

```
$('#side_model').append(/*your generated html code*/); 
```

- 编辑 -

我还注意到您调用 $('#make')，但您的选择只有这样的名称，所以请在您的选择中添加 id="make"

# java - 使用 java.xml.validator 针对 XSD 验证 XML 时如何获取更具体的错误

> ID：12268311
> 
> 赞同：10
> 
> 时间：2012-09-04T17:11:54.857
> 
> 标签：java, xml, validation, xsd

在搜索了针对 XSD 验证我的 XML 的最佳方法之后，我遇到了 java.xml.validator。

我首先使用 API 中的示例代码并添加我自己的 ErrorHandler

```
// parse an XML document into a DOM tree
DocumentBuilder parser = DocumentBuilderFactory.newInstance().newDocumentBuilder();
Document document = parser.parse(new File("instance.xml"));

// create a SchemaFactory capable of understanding WXS schemas
SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);

// load a WXS schema, represented by a Schema instance
Source schemaFile = new StreamSource(new File("mySchema.xsd"));
Schema schema = factory.newSchema(schemaFile);

// create a Validator instance, which can be used to validate an instance document
Validator validator = schema.newValidator();

// Add a custom ErrorHandler
validator.setErrorHandler(new XsdValidationErrorHandler());

// validate the DOM tree
try {
    validator.validate(new DOMSource(document));
} catch (SAXException e) {
    // instance document is invalid!
}

...

private class XsdValidationErrorHandler implements ErrorHandler {
    @Override
    public void warning(SAXParseException exception) throws SAXException {
        throw new SAXException(exception.getMessage());
    }

    @Override
    public void error(SAXParseException exception) throws SAXException {
        throw new SAXException(exception.getMessage());
    }

    @Override
    public void fatalError(SAXParseException exception) throws SAXException {
        throw new SAXException(exception.getMessage());
    }
} 
```

这工作正常，但是，传递给我的 XsdValidationErrorHandler 的消息并没有给我任何指示文档中有问题的 XML 的确切位置：

```
"org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: Invalid content was found starting with element 'X'. One of '{Y}' is expected." 
```

有没有办法让我覆盖或插入 Validator 的另一部分，以便我可以定义自己的错误消息发送到 ErrorHandler 而无需重写所有代码？

我应该使用不同的库吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T17:21:23.963

尝试捕获 SaxParseException，它是 SaxException 的后代。如果你得到其中之一，它有方法 getLineNumber()、getColumnNumber() 等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T17:15:59.890

在解析时验证。这将使位置信息可用，并且 ErrorHandler 将报告它。

只需在创建`Schema`之前创建`DocumentBuilderFactory`，然后像这样应用它：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
dbf.setNamespaceAware(true);
dbf.setValidating(false);
dbf.setSchema(schema); 
```

注意：该`setValidating()`方法告诉 DBF 是否使用 DTD 验证。设置架构告诉它使用架构验证。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T12:50:51.233

您可以执行`exception.getLineNumber()`并`exception.getColumnNumber()`获取错误的坐标。[这](https://stackoverflow.com/questions/4348285/how-to-get-errors-line-number-while-validating-a-xml-file-against-a-xml-schema)是一个类似的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T17:14:39.520

你看过[SAXParseException](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/SAXParseException.html)吗？我假设您正在寻找[行号](http://docs.oracle.com/javase/6/docs/api/org/xml/sax/SAXParseException.html#getLineNumber%28%29)之类的信息？正如@parcifel 提到的，您应该在解析时进行验证（更有效和更好的错误信息）。您可以通过[在 DocumentBuilderFactory 上指定架构来](http://docs.oracle.com/javase/6/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setSchema%28javax.xml.validation.Schema%29)做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-13T21:20:41.730

```
public class KitXsdErrorHandler implements ErrorHandler {

    @Override
    public void warning(SAXParseException exception) throws SAXException {
        handleMessage("Warning", exception);
    }

    @Override
    public void error(SAXParseException exception) throws SAXException {
        handleMessage("Error", exception);
    }

    @Override
    public void fatalError(SAXParseException exception) throws SAXException {
        handleMessage("Fatal", exception);
    }

    private String handleMessage(String level, SAXParseException exception) throws SAXException {
        int lineNumber = exception.getLineNumber();
        int columnNumber = exception.getColumnNumber();
        String message = exception.getMessage();
        throw new SAXException("[" + level + "] Sətr nömrə: " + lineNumber + " Sütun nömrə: " + columnNumber + " message: " + message);
    }
} 
```

这个信息也很有帮助

[如何使用 SAX XML Schema Validator 的验证消息进行内部化？](https://stackoverflow.com/questions/34565861/how-to-get-internalization-with-validation-messages-of-sax-xml-schema-validator)

[http://vijiprakash.blogspot.com/2008/05/custom-error-message-in-xml-xsd.html](http://vijiprakash.blogspot.com/2008/05/custom-error-message-in-xml-xsd.html)

# css - HTML&CSS3*JavaScript 高级滚动

> ID：12268312
> 
> 赞同：0
> 
> 时间：2012-09-04T17:11:59.503
> 
> 标签：css, html, scroll

我需要用 HTML、CSS3 和 JavaScript 创建一个工具。它将包含一些水平和垂直滚动条，以便正确查看所有内容，保持某些元素的固定大小。这是试图解释我想要什么的布局 ![在此处输入图像描述](../Images/f3c2cbb59c5f9243268d16bc1bd13886.png)

所以，我有一个包含**#left**和**#right DIV 的****#main** DIV。左 DIV 包含两个 DIV，右 DIV 包含另外 2 个 DIV。现在，我想创建一个垂直滚动条 (vscroll1) 来上下滚动**#content**和**#menu** DIV（同时，就像它们在同一个 DIV 中一样）。另一方面，我希望水平滚动条（hscroll2）同时通过**#content**和**#left_top_div**向左和向右滚动，就像它是相同的内容一样。

 ******我想我可能有两种方法：一些 CSS+HTML 技巧或使用 JavaScript。现在，如果将滚动条附加到**#leftdiv** ( `overflow:auto`)，它将根据我的需要滚动**#left_top_div**和**#content**（它包含的DIV），但垂直它只会滚动**#content**，而不是**#menu** DIV。所以，这是个问题。我可以在事件中使用 JavaScript`.onscroll()`来更改#menu topMargin，但是会有一点延迟，看起来不太好。你建议我怎么做？我只需要一些技巧或技术（好吧，一些示例代码也值得赞赏）。感谢大家，至少，阅读我所有的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:16:15.617

默认情况下，将所有 div 的 CSS 溢出设置为“隐藏”。然后...

将 #menu 和 #content 包装在一个固定高度的 div 中`overflow-y: scroll;`

然后使用 #menu 和 #content 固定宽度的 div`overflow-x: scroll`******

# web-applications - Cassandra 和 Hector 在不活动后弄断了管道

> ID：12268313
> 
> 赞同：1
> 
> 时间：2012-09-04T17:12:03.567
> 
> 标签：web-applications, ubuntu, cassandra, hector

我有一个在 Tomcat6 上运行的 Web 应用程序。在 30 或 60 分钟不活动后，如果我刷新页面，我会遇到 Broken Pipe 问题（下面报告的例外情况）。

我试图在其他线程中查找问题并看到更新可以解决它所以我更新到最新版本（Hector 1.1、Thrift 1.1.0 和 Cassandra 版本 1.1.4）但问题仍然存在。我正在使用默认的 Cassandra 配置，就像它来自`apt-get`Ubuntu 一样，我目前只有一个节点。

任何帮助将非常感激。谢谢。

```
2012-09-04 11:03:02,809 ERROR client.HThriftClient [http-8080-3,close:100] Could not flush transport (to be expected if the pool is shutting down) in close for client: CassandraClient<node1.p.cassandra.research-infrastructures.eu:9160-5>
org.apache.thrift.transport.TTransportException: java.net.SocketException: Broken pipe
    at org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:147)
    at org.apache.thrift.transport.TFramedTransport.flush(TFramedTransport.java:156)
    at me.prettyprint.cassandra.connection.client.HThriftClient.close(HThriftClient.java:98)
    at me.prettyprint.cassandra.connection.client.HThriftClient.close(HThriftClient.java:26)

2012-09-04 11:03:48,544 ERROR client.HThriftClient [http-8080-9,close:100] Could not flush transport (to be expected if the pool is shutting down) in close for client: CassandraClient<node1.p.cassandra.research-infrastructures.eu:9160-6>
org.apache.thrift.transport.TTransportException: java.net.SocketException: Broken pipe
    at org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:147)
    at org.apache.thrift.transport.TFramedTransport.flush(TFramedTransport.java:156) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T19:42:51.083

如果您长时间不活动，您的连接很可能会超时。如果您捕获该异常并在收到该异常后重新连接，我相信该错误将消失。如果你有那么多时间没有活动，我想知道你是否需要 Cassandra。

# c# - SharedAccessExpiryTime 的最大限制是 60 分钟吗？

> ID：12268320
> 
> 赞同：3
> 
> 时间：2012-09-04T17:13:22.153
> 
> 标签：c#, azure, azure-storage

我正在尝试通过下面的代码为容器生成共享访问密钥

```
string sas = azureContainer.GetSharedAccessSignature (new SharedAccessPolicy ()
{
    SharedAccessStartTime =  DateTime.UtcNow,
    SharedAccessExpiryTime = DateTime.UtcNow.AddHours(1),
    Permissions = SharedAccessPermissions.Write | SharedAccessPermissions.Read
}); 
```

在这种情况下，共享访问签名可以正常工作。客户端成功上传容器上的文件。但是，如果我设置的时间超过 1 小时（例如 2 小时），我会在尝试在客户端上传文件时遇到异常说

> 服务器未能验证请求。确保 Authorization 标头的值正确形成，包括签名。

同样，如果我尝试设置它，`DateTime.UtcNow.AddMinutes(61)`我会得到相同的异常。任何小于或等于 60 分钟的时间都可以正常工作。

**我的问题**：共享访问签名的最长时间是 60 分钟吗？我在任何文档中都没有找到任何这样的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:36:36.120

[正如我在这个答案](https://stackoverflow.com/a/11217273)中指出的那样：从 2012 年春季版本开始，1 小时的限制已被取消。MSDN 文章在[这里](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-table-sas-shared-access-signature-queue-sas-and-update-to-blob-sas.aspx)。现在，您需要自己从 github 拉取并构建 v1.7.1 库（假设您使用的是 .net），[这里](https://github.com/WindowsAzure/azure-sdk-for-net/tree/sdk_1.7.1)，因为它尚未作为最新 SDK+Tools 的一部分发布。此版本的库将使用 2012-02-12 协议版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T17:27:12.600

实际上这是记录在案的：[CloudBlob.GetSharedAccessSignature Method (SharedAccessPolicy)](http://msdn.microsoft.com/en-us/library/windowsazure/ee772922.aspx)

> ...您可以在单个共享访问签名上指定它。在这种情况下，签名可能有效的时间间隔被限制为 **一小时**。...

如果您希望它超过一小时，我建议您改用容器级别的访问策略（也可以撤销）。

# cgbitmapcontextcreate - CGBitmapContextCreate unsupported parameter combination error

> ID：12268323
> 
> 赞同：2
> 
> 时间：2012-09-04T17:13:38.787
> 
> 标签：cgbitmapcontextcreate

I'm reading an image file and re-displaying it without making any change as shown in the code below, but I get the this error:

: CGBitmapContextCreate: unsupported parameter combination: 8 integer bits/component; 16 bits/pixel; 1-component color space; kCGImageAlphaPremultipliedLast; 3792 bytes/row.

The code is:

```
CGImageRef sourceImage = theImage.image.CGImage;

CFDataRef theData;
theData = CGDataProviderCopyData(CGImageGetDataProvider(sourceImage));

UInt8 *pixelData = (UInt8 *) CFDataGetBytePtr(theData);

CGContextRef context;
context = CGBitmapContextCreate(pixelData,
                                 CGImageGetWidth(sourceImage),
                                 CGImageGetHeight(sourceImage),
                                 8,
                                 CGImageGetBytesPerRow(sourceImage),
                                 CGImageGetColorSpace(sourceImage),
                                 kCGImageAlphaPremultipliedLast);

CGImageRef newCGImage = CGBitmapContextCreateImage(context);
UIImage *newImage = [UIImage imageWithCGImage:newCGImage];

CGContextRelease(context);
CFRelease(theData);
CGImageRelease(newCGImage);

theImage.image = newImage; 
```

This code used to work fine until I upgraded to Xcode 4.4 recently.

Following a suggestion in [iPhone CGContextRef CGBitmapContextCreate unsupported parameter combination](https://stackoverflow.com/questions/5545600/iphone-cgcontextref-cgbitmapcontextcreate-unsupported-parameter-combination), I replaced "CGImageGetColorSpace(sourceImage)," by "CGColorSpaceCreateDeviceRGB(),", but got this error:

: CGBitmapContextCreate: invalid data bytes/row: should be at least 15168 for 8 integer bits/component, 3 components, kCGImageAlphaPremultipliedLast.

Then, when I replaced "CGImageGetBytesPerRow(sourceImage)," by "CGImageGetBytesPerRow(sourceImage)*4," the errors were gone but for copies of the 4X reduced image were displayed side-by-side.

Has anybody encountered this problem? Is it related to the Xcode 4.4 upgrade?

Thanks! Shai

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T06:16:04.037

通过使用 kCGImageAlphaNone 而不是 kCGImageAlphaPremultipliedLast 解决。我仍然不明白为什么/如何将我的彩色图像变成灰度，以及为什么曾经工作的东西改变了它的行为，但至少我得到了一些显示。

# asp.net - 如何检索在线考试 SQL Server 的问题

> ID：12268326
> 
> 赞同：0
> 
> 时间：2012-09-04T17:13:45.650
> 
> 标签：asp.net, sql-server

首先，我为特定模块安排了考试。模块包含超过2-3章，每章包含超过50-60个不同分数的问题。现在的问题是从所有章节中检索问题，并且应该完全相同的问题编号和分数总和应该与考试预定时间保存的相同。

```
table [Module](    
[module_id]
[module_name]
)

table [Chapter](        
[chapter_id]        
[module_id]        
[chapter_name]       
)

question_bank table          
[question_id]  [chapter_name]  [question_text]  [Marks]       
10001          .NET            Question1         1                                
10002          .NET            Question2         2                  
10003          .NET            Question3         4 
10004          .NET            Question4         1                                
10005          .NET            Question5         1                  
10006          .NET            Question6         4   
10007          .NET            Question7         1             
10008          .NET            Question8         2
10009          .NET            Question9         1

exam_schedule table                  
[exam_id]    [module_id]   [question]   [total_marks]          
1001          1001           6            10   

Output should be something like : 
[question_id] [exam_id]   [question_text]  [Marks]       
10001             1001        Question1         1                                
10002             1001        Question2         2                  
10004             1001        Question4         1                                
10005             1001        Question5         1                  
10006             1001        Question6         4  
10009             1001        Question9         1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:31:34.697

有什么问题：

```
select qb.question_id, es.exam_id, qb.question_text, sum(qb.marks) Marks
from question_bank qb
inner join Chapter c on c.chapter_name = qb.chapter_name
inner join Module m on m.module_id = c.module_id
inner join exam_schedule es on es.module_id = m.module_id
group by qb.question_id, es.exam_id, qb.question_text 
```

或者，如果`[question]`在 Exam_schedule 中映射到`question_id`：

```
select qb.question_id, exam_id, question_text, total_marks Marks
from exam_schedule es
inner join question_bank qb on qb.question_id = exam_schedule.question 
```

# c - 如何使用 C fread 读取大于 2GB 的文件？

> ID：12268327
> 
> 赞同：0
> 
> 时间：2012-09-04T17:13:48.813
> 
> 标签：c

> **可能重复：**
> [在 C 中使用 fwrite 时文件大小限制为 2GB？](https://stackoverflow.com/questions/730709/2gb-limit-on-file-size-when-using-fwrite-in-c)

我意识到对于我的 C 编译器，fread 函数只能正确读取小于 2GB（2147483648）的文件。我想知道我们是否可以读取 >2GB 的文件。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:15:02.587

您需要使用[大文件支持](http://en.wikipedia.org/wiki/Large_file_support)进行编译。或者，在某些平台上，您可以使用[`fopen64`](http://www.gnu.org/software/libc/manual/html_node/Opening-Streams.html#index-fopen64-933).

# icalendar - iCalendar 文件，用于跨越多天不同时间的事件

> ID：12268329
> 
> 赞同：1
> 
> 时间：2012-09-04T17:14:07.140
> 
> 标签：icalendar

我有一个以 iCalendar 格式呈现的事件，该格式跨越 3 天，每天都有不同的时间。我怎样才能最有效地在 iCalendar 文件中呈现它？[iCalendar 规范](https://www.rfc-editor.org/rfc/rfc5545#section-3.8.5.2)似乎说重复日期只允许日期组件，而不是时间组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:07:55.310

RELATED-TO 不是答案。

您应该简单地制作一个重复的事件，跨越 3 天。然后，对于每次出现的情况，您都会创建一个异常。为此，您只需添加另一个 VEVENT 对象，为其提供与初始对象相同的 UID，并使用 RECURRENCE-ID 属性。

RECURRENCE-ID 属性必须包含“原始”事件的完整日期时间。换句话说，它应该包含它所覆盖的事件的日期和时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T04:10:35.290

我不相信有一个简单的方法。我认为唯一的方法可能是在第 1 天、第 2 天、第 3 天进行 3 个事件。您可以尝试使用

相关的 [https://www.rfc-editor.org/rfc/rfc5545#section-3.8.4.5](https://www.rfc-editor.org/rfc/rfc5545#section-3.8.4.5)

和

RELTYPE [https://www.rfc-editor.org/rfc/rfc5545#section-3.2.15](https://www.rfc-editor.org/rfc/rfc5545#section-3.2.15)

链接事件。（对于那些只想预订整个 3 天的人来说，也许有一个为期 3 天的家长活动？）

我自己还没有尝试过，所以我不知道各种日历应用程序对它的支持程度，也不知道它会如何显示/解释或使用。

有一些关于使用的草稿文件：

[http://tools.ietf.org/id/draft-douglass-link-extension-01.xml#related-to](http://tools.ietf.org/id/draft-douglass-link-extension-01.xml#related-to) [http://microformats.org/wiki/User:TobyInk/hcalendar-1.1#Related-To_Links](http://microformats.org/wiki/User:TobyInk/hcalendar-1.1#Related-To_Links)

如果您确实发现任何关于此的内容，请回帖。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:37:57.550

假设您的活动是在 11 月 6 日、7 日、8 日，时间分别是 10 日 11 日和 12 日，您可以：

```
DTSTART:20121106T100000Z
DURATION:PT15M
RRULE:FREQ=DAILY;INTERVAL=1;COUNT=3;BYHOUR=10,11,12;BYSETPOS=1,5,9 
```

但是您可能需要检查您的日历软件是否支持此组合！

# php - 将创建虚拟主机，中断常规路由

> ID：12268330
> 
> 赞同：0
> 
> 时间：2012-09-04T17:14:10.487
> 
> 标签：php, apache, virtualhost, laravel

我正在第一次涉足 laravel 开发。我来自codeigniter背景。官方教程[http://daylerees.com/2012/03/25/laravel-getting-started/](http://daylerees.com/2012/03/25/laravel-getting-started/)建议从设置虚拟主机开始，我从来没有这样做过。我在easyphp wamp以及netbeans中开发了许多项目，我担心如何设置虚拟主机而不影响其他项目的路由。有没有办法让虚拟主机以我的 laravel 测试项目是否正在运行为条件，否则默认为其他项目的标准设置？

谢谢，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:28:17.590

仅当您想在同一 IP 地址上托管多个站点时才需要虚拟主机。当我阅读您的帖子时，您已经设置了一个可以开发 php 应用程序的环境。

继续走这条路，你会没事的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:36:33.230

添加虚拟主机很可能不会改变您当前项目的路径。尝试这样做，当出现一些问题时，我会尝试提供帮助。

# android - 点击 imageview 在 Android 上的图库中打开图像

> ID：12268333
> 
> 赞同：0
> 
> 时间：2012-09-04T17:14:14.087
> 
> 标签：android, android-intent, android-gallery, android-image

我正在制作一个应用程序，即在单个活动中显示图像。我使用 json feed 来获取图像的 url，它通过lazyloader 函数下载图像，然后将其显示在 ImageView 我需要创建的是，当您点击 imageView 时，图像会显示在标准中安卓图片库。

我如何做到这一点？我已经尝试过各种有意图的事情，但我无法让它发挥作用......

请帮帮我！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:34:54.383

您可以使用以下代码启动图像查看器。Uri 是您要启动的文件 uri

```
Intent intent = new Intent(); 
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setData(uri); 
activity.startActivity(intent); 
```

# sql - 递归oracle sql来识别一个值

> ID：12268334
> 
> 赞同：2
> 
> 时间：2012-09-04T17:14:17.583
> 
> 标签：sql, oracle

我有一个表 TABA(PK:NAME) 以这种方式存储 NAME,NAME_TYPE,SOURCE ：

```
NAME  NAME_TYPE SOURCE
----  --------- ------
Name1 Category  S1
Name2 Category  S2
Name3 Datamart  
Name4 Category  S1
Name5 Datamart
Name6 Datamart
Name7 Category  S3 
```

上面的注意事项：仅当 NAME_TYPE = Category 时，源才会出现在数据中。

我有另一个表 TABA_PARENT 存储 NAME,PARENT_NAME 以及基于 name_type 的 NAME 列之间的关系。Datamart 与类别的关系是一对多的。

```
 NAME   PARENT_NAME
    -----  -----------
    Name3  Name1
    Name3  Name2
    Name3  Name4
    Name3  Name5
    Name5  Name1
    Name5  Name6
    Name6  Name7 
```

我的要求是获取 TABA 的 SOURCE，其中 NAME_TYPE = Datamart（目前，TABA 中不存在）

预期输出：

```
SOURCE column for Name3
-----------------------

S1,S2,S3 
```

诀窍是递归地推导出 Name3 的 SOURCE，直到它映射到 TABA_PARENT 中的类别。

在上面的例子中：

Name3 映射到 PARENT_NAME Name1,Name2,Name4,Name5。其中 3 个 (name1,Name2,Name4) 属于 name_type = Category，因此在 TABA 中可以使用不同的源 -- S1,S2 第四个 PARENT_NAME Name5 是 name_type Datamart（源信息不可用），需要进一步扩展，直到它达到 name_type = Category。

我们有 Name5 映射到 PARENT_NAME Name1,Name6 的信息。Name1 是一个类别，因此可以推断出来源。Name6 又是一个数据集市。

但是，Name6 最终映射到作为 Category 的 Name7，因此源可用——S3

如上所示，所有映射都必须递归解析，直到它们到达 name_type 类别以识别不同的源。

```
Expected Result: S1,S2,S3 
```

我正在尝试是否可以使用 listagg 或类似的东西来完成（小的 pl/sql 代码也可以，但如果可能的话更喜欢单选）我很难递归地做到这一点。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T19:16:04.323

正如评论中所指出的，这可以通过结合[`listagg()`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)使用 （从 Oracle 11.2 开始提供）和[`connect by`](http://psoug.org/reference/connectby.html). 如果您不使用 11.2，那么还有[许多其他可用的字符串聚合技术](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)。

```
select listagg(source, ',' ) within group ( order by source )
  from ( select distinct source
           from taba a
           join ( select parent_name
                    from taba_parent
                   start with name = 'Name3'
                 connect by prior parent_name = name
                         ) b
             on a.name = b.parent_name
                ) 
```

子查询之所以存在，`distinct`是因为您有多个相同的来源。这返回`S1,S2,S3`。

为了获得相同的名称，您可以更改 START WITH 子句；例如将其更改为`start with name = 'Name5'`返回`S1,S3`。

数据集市没有来源这一事实并不重要，因为您仅在表上使用分层查询，仅在您拥有所需信息时才`taba_parent`加入表。`taba`

### 这是一个小[SQL Fiddle](http://www.sqlfiddle.com/#!4/db53d/8)来演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:02:35.073

感谢任何尝试此操作的人。我尝试使用“connect by”和 listagg 的组合并达到了预期的结果。

```
select listagg(source,',') within group (order by source) final_source from ( 
select
distinct
b.source source--,
from taba_parent a, taba b
where b.name = a.parent_name
and b.name_type = 'Category'
connect by prior a.parent_name = a.name
start with a.name = 'Name3'        
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:13:08.847

您需要一个分层查询（连接方式）来获得您的“最终父级”，然后您需要使用 listagg 将这些项目连接在一起。我只有Oracle 10g，所以没有listagg。这是分层位：

```
select distinct source from
(
select taba_parent.name, taba_parent.parent_name, taba.source
from
taba_parent
inner join taba on taba_parent.parent_name = taba.name
)
where name in (select name from taba where name_type = 'Datamart')
connect by name = parent_name
start with source is not null 
```

这给出了：

```
SOURCE
S3
S2
S1 
```

您可以使用 listagg 获取 S3、S2、S1

# struts2 - 将值传递给瓷砖

> ID：12268335
> 
> 赞同：1
> 
> 时间：2012-09-04T17:14:20.850
> 
> 标签：struts2, tiles

不使用瓷砖，这没关系。

```
<action name="/books/{ISBN}/content" class="example.BookAction">
    <result>/books/{1}.jsp</result>
</action> 
```

我尝试使用瓷砖来获得这个，但值没有传递给瓷砖定义
这是我的代码：

```
<action name="/books/{ISBN}/content" class="example.BookAction">
    <result type="tiles">{1}blablabla</result>
</action> 
```

瓷砖.xml

```
<definition name="*blablabla" extends="main_layout">
   <put-attribute name="body_area" value="/books/{1}.jsp" />
</definition> 
```

我怎样才能做到这一点？谢谢。！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:20:48.150

您可以使用通配符。在struts xml中

```
<action name="/books/{ISBN}/content" class="example.BookAction">
    <result type="tiles">${evalExpression}blablabla</result>
</action> 
```

然后在瓷砖

```
<definition name="*blablabla" extends="main_layout">
   <put-attribute name="body_area" value="/books/{1}.jsp" />
</definition> 
```

# android - 无法更改 ActionBarSherlock 标签栏文本大小

> ID：12268345
> 
> 赞同：1
> 
> 时间：2012-09-04T17:14:39.743
> 
> 标签：android, themes, actionbarsherlock, tabbar

我已经尝试了一切，但我无法让它工作。我已阅读有关此主题的所有相关帖子，但尚未找到有效的解决方案！

我想使用 ActionBarSherlock 更改标签栏文本大小。我已经设法更改了操作栏，但没有更改下面的标签文本（或标签本身）。

在 styles.xml 我有（许多尝试之一）：

```
<style name="ANM_Theme" parent="Theme.Sherlock">
<item name="actionBarTabTextStyle">@style/Theme_ActionBarText</item>
<item name="android:actionBarTabTextStyle">@style/Theme_ActionBarText</item> 
```

```
<style name="Theme_ActionBarText" parent="Widget.Sherlock.ActionBar.TabText">
<item name="android:textColor">#fff</item>
<item name="android:textSize">6sp</item> 
```

在我的活动中，我设置

```
public static int THEME = R.style.ANM_Theme; 
```

接着

```
setTheme(THEME); 
```

前

```
super.onCreate(savedInstanceState); 
```

编辑：

刚刚意识到，当您使用 Tabs+Pager 时，您不会在选项卡上获得 4.0 外观！这说明了为什么我不能通过 ActionBarSherlock 主题自定义选项卡。我在 4.1 设备上尝试。下载了 ActionBarSherlock 演示应用程序并得到了相同的结果..

谁知道怎么修它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:53:21.250

```
public class MainActivity extends SherlockFragmentActivity {
ViewPager  mViewPager;
TabsAdapter mTabsAdapter;

Button testButton;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    mViewPager = (ViewPager)findViewById(R.id.pager);

    // Add the tabs
    mTabsAdapter = new TabsAdapter(this, bar, mViewPager);
    mTabsAdapter.addTab(bar.newTab().setText("First"),
            FragmentA.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Second"),
            FragmentB.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Third"),
            FragmentC.class, null);

    setTitle(R.string.app_name);

    if (savedInstanceState != null) {
        bar.setSelectedNavigationItem(savedInstanceState.getInt("tab"));
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("tab", getSupportActionBar().getSelectedNavigationIndex());
}

@Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {

    menu.add("Refresh")
        .setIcon(R.drawable.ic_action_refresh)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    SubMenu subMenu1 = menu.addSubMenu("Menu");
    subMenu1.add("Sample");
    subMenu1.add("Items");
    subMenu1.add("In menu");

    MenuItem subMenu1Item = (MenuItem) subMenu1.getItem();
    subMenu1Item.setIcon(R.drawable.ic_action_overflow);
    subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item) {
    String itemTitle  = (String) item.getTitle();

        if(!itemTitle.equals("Menu")){
            Toast toast = Toast.makeText(getApplicationContext(), itemTitle+" pressed", Toast.LENGTH_SHORT);
            toast.show();
        }

    if(item.getItemId() == android.R.id.home){
        getSupportFragmentManager().popBackStackImmediate();
    }
    return super.onOptionsItemSelected(item);

}

public static class TabsAdapter extends FragmentPagerAdapter
        implements ViewPager.OnPageChangeListener, ActionBar.TabListener {
    private final Context mContext;
    private final ActionBar mBar;
    private final ViewPager mViewPager;
    private FragmentActivity mActivity;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(FragmentActivity activity, ActionBar bar, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActivity = activity;
        mBar = bar;
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);

    }

    public void addTab(ActionBar.Tab tab, Class<? extends Fragment> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        mBar.setSelectedNavigationItem(position);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mActivity.getSupportFragmentManager().popBackStack();
        Object tag = tab.getTag();
        for (int i=0; i<mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }

} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:45:31.737

我终于以一种 hacky 的方式解决了我的问题。我添加了支持操作栏和常规标签主机，然后我隐藏了原始标签主机并让 viewpager 和支持操作栏相互响应。

如果有人感兴趣，这是代码：

```
public class MainActivity extends SherlockFragmentActivity {
TabHost mTabHost;
ViewPager  mViewPager;
TabsAdapter mTabsAdapter;
static ActionBar bar;
//public static int THEME = R.style.Theme_app;
@Override
protected void onCreate(Bundle savedInstanceState) {
    //setTheme(THEME); //Used for theme switching in samples
    super.onCreate(savedInstanceState);

    setContentView(R.layout.fragment_tabs_pager);

    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();

    bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab tab1 = bar.newTab();
    ActionBar.Tab tab2 = bar.newTab();
    ActionBar.Tab tab3 = bar.newTab();
    ActionBar.Tab tab4 = bar.newTab();
    ActionBar.Tab tab5 = bar.newTab();

    tab1.setText("Home");
    tab2.setText("Learn");
    tab3.setText("Media");
    tab4.setText("Connect");
    tab5.setText("The Book");

    tab1.setTabListener(new MyTabListener());
    tab2.setTabListener(new MyTabListener());
    tab3.setTabListener(new MyTabListener());
    tab4.setTabListener(new MyTabListener());
    tab5.setTabListener(new MyTabListener());

    bar.addTab(tab1);
    bar.addTab(tab2);
    bar.addTab(tab3);
    bar.addTab(tab4);
    bar.addTab(tab5);

    mViewPager = (ViewPager)findViewById(R.id.pager);

    mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);

    mTabsAdapter.addTab(mTabHost.newTabSpec("Home").setIndicator("Home"),
            FragmentStackSupport.CountingFragment.class, null);
    mTabsAdapter.addTab(mTabHost.newTabSpec("Learn").setIndicator("Learn"),
            FragB.FragBList.class, null);
    mTabsAdapter.addTab(mTabHost.newTabSpec("Media").setIndicator("Media"),
            FragC.FragCList.class, null);
    mTabsAdapter.addTab(mTabHost.newTabSpec("Connect").setIndicator("Connect"),
            FragD.FragDList.class, null);
    mTabsAdapter.addTab(mTabHost.newTabSpec("The Book").setIndicator("The Book"),
            FragE.FragEList.class, null);

    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
    }
    mTabHost.getTabWidget().getChildAt(0).setVisibility(View.GONE);
    mTabHost.getTabWidget().getChildAt(1).setVisibility(View.GONE);
    mTabHost.getTabWidget().getChildAt(2).setVisibility(View.GONE);
    mTabHost.getTabWidget().getChildAt(3).setVisibility(View.GONE);
    mTabHost.getTabWidget().getChildAt(4).setVisibility(View.GONE);
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString("tab", mTabHost.getCurrentTabTag());
}

/**
 * This is a helper class that implements the management of tabs and all
 * details of connecting a ViewPager with associated TabHost.  It relies on a
 * trick.  Normally a tab host has a simple API for supplying a View or
 * Intent that each tab will show.  This is not sufficient for switching
 * between pages.  So instead we make the content part of the tab host
 * 0dp high (it is not shown) and the TabsAdapter supplies its own dummy
 * view to show as the tab content.  It listens to changes in tabs, and takes
 * care of switch to the correct paged in the ViewPager whenever the selected
 * tab changes.
 */
public static class TabsAdapter extends FragmentPagerAdapter
        implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final TabHost mTabHost;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();
    public static int tabPosition;

    static final class TabInfo {
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(String _tag, Class<?> _class, Bundle _args) {
            tag = _tag;
            clss = _class;
            args = _args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private final Context mContext;

        public DummyTabFactory(Context context) {
            mContext = context;
        }

        @Override
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }
    }

    public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mTabHost = tabHost;
        mViewPager = pager;
        mTabHost.setOnTabChangedListener(this);
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
        tabSpec.setContent(new DummyTabFactory(mContext));
        String tag = tabSpec.getTag();

        TabInfo info = new TabInfo(tag, clss, args);
        mTabs.add(info);
        mTabHost.addTab(tabSpec);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    @Override
    public void onTabChanged(String tabId) {
        int position = mTabHost.getCurrentTab();
        mViewPager.setCurrentItem(position);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        // Unfortunately when TabHost changes the current tab, it kindly
        // also takes care of putting focus on it when not in touch mode.
        // The jerk.
        // This hack tries to prevent this from pulling focus out of our
        // ViewPager.
        TabWidget widget = mTabHost.getTabWidget();

        widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
        mTabHost.setCurrentTab(position);
        bar.setSelectedNavigationItem(position);
        //widget.setDescendantFocusability(oldFocusability);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }
}

private class MyTabListener implements ActionBar.TabListener
{

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        try {
            mViewPager.setCurrentItem(tab.getPosition());
        } catch (Exception e) {
            // TODO: handle exception
        }
        //
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

} 
```

}

# scala - Scalaz7中的“序列”在哪里

> ID：12268351
> 
> 赞同：18
> 
> 时间：2012-09-04T17:14:48.723
> 
> 标签：scala, scalaz, scalaz7

我正在学习 Scalaz，并且我有一个已经使用 Scalaz7 的项目。在[这个问题](https://stackoverflow.com/questions/2569014/convert-a-list-of-options-to-an-option-of-list-using-scalaz)之后，我想使用该功能

```
sequence[T](l: List[Option[T]]): Option[List[T]] 
```

（并不是说自己很难写）。但是上述问题提到了Scalaz6。

> 在 Scalaz7 中哪里可以找到序列函数？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-04T18:21:23.010

它在[`scalaz.Traverse`](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/Traverse.scala)类型类中定义，如下所示：

```
def sequence[G[_]:Applicative,A](fga: F[G[A]]): G[F[A]] =
  traversal[G].run[G[A], A](fga)(ga => ga) 
```

[`scalaz.syntax.TraverseOps`](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/syntax/TraverseSyntax.scala)提供了一个被拉皮条的版本`List`，因为`List`有一个`Traverse`实例。

您可以只导入所需的内容：

```
import scalaz._, std.list._, std.option._, syntax.traverse._ 
```

或一切和厨房水槽：

```
import scalaz._, Scalaz._ 
```

然后你可以像这样使用它：

```
scala> val xs: List[Option[Int]] = Some(1) :: Some(2) :: Nil
xs: List[Option[Int]] = List(Some(1), Some(2))

scala> xs.sequence
res0: Option[List[Int]] = Some(List(1, 2)) 
```

或者，如果您想要问题中的确切表述：

```
scala> def sequence[T](l: List[Option[T]]): Option[List[T]] = l.sequence
sequence: [T](l: List[Option[T]])Option[List[T]]

scala> sequence(xs)
res1: Option[List[Int]] = Some(List(1, 2)) 
```

# c# - 在单击一次安装之前运行命令（不是应用程序启动）

> ID：12268353
> 
> 赞同：1
> 
> 时间：2012-09-04T17:14:55.070
> 
> 标签：c#, .net, clickonce, publish

我想在安装过程开始之前执行“rundll32 dfshim CleanOnlineAppCache”这个命令，我想做的第一件事就是执行上述命令。

基本上它会清除应用程序缓存，因为在安装过程中单击一次应用程序会抛出错误“在此操作期间检测到以下错误。* [6/7/2010 10:54:17 AM] System.Deployment.Application.DeploymentException（订阅） - 无法安装此应用程序，因为已安装具有相同标识的应用程序。要安装此应用程序，请修改此应用程序的清单版本或卸载预先存在的应用程序。-来源：System.Deployment"

多一点 Google-fu 导致了一个替代调用，它可以在没有开发 sdks 的计算机上做同样的事情。我知道有一天我需要记住这一点，所以这里是：rundll32 dfshim CleanOnlineAppCache

所以我想在每次用户安装此应用程序（clickonce）之前执行此命令以确保安全。

# javascript - 如何在 jQuery Mobile 中设置 100% 宽度的输入类型日期

> ID：12268357
> 
> 赞同：0
> 
> 时间：2012-09-04T17:14:59.763
> 
> 标签：javascript, jquery, ios, mobile, jquery-mobile

我正在使用 jQuery Mobile 1.1.1 开发一个 Web 应用程序，我对使用`<input type="date" />`100% 宽度的 a 感兴趣，但是在 iOS4 上查看页面时存在[间隙](http://jsfiddle.net/dcardoso/sLrrc/)（应该有箭头的空间被切割）。

有没有人有这个问题的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:15:36.557

解决此问题的一种可能解决方案是添加以下 CSS 以覆盖默认浏览器 CSS：

```
input::-webkit-outer-spin-button,  
input::-webkit-inner-spin-button {  
    -webkit-appearance: none;  
    margin: 0;  
} 
```

# c# - 从参考调用创建标签

> ID：12268360
> 
> 赞同：-2
> 
> 时间：2012-09-04T17:15:09.030
> 
> 标签：c#, label

我不明白为什么我的代码不起作用。我创建了两个类，Main 和 Labels，我想通过在 Main 中调用 Labels 类来打印出标签。它给了我一个运行时错误。感谢您提供的任何帮助。

```
 //--------------------------------------------------main class-------------------//
  namespace Test
  {
   public partial class Form1 : Form
   {
     labels label;

     public Form1()
     {
        InitializeComponent();
        createLabel();
     }

     private void createLabel()
     {
        //error "Object reference not set to an instance of an object"
        label.printHeader();
     }
    }//form
   }//test

  // ---------------------------------- labels class-------------------------//
  namespace Test
  {
    class labels
    {
     private Label label1;

     public labels()
     {

     }

     public void printHeader()
     {
        label1 = new Label();

        label1.Location = new System.Drawing.Point(82, 44);
        label1.Size = new System.Drawing.Size(977, 54);
        label1.Text = "MonthCalendar";
        Controls.Add(label1);
     }
   }//form
 }//test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:18:52.027

您声明了类，但从不创建实例。

尝试

```
 private void createLabel()
 {
    label = new labels();
    label.printHeader();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:18:19.800

只是实例化

```
 private void createLabel()
     {
        label = new labels();        
 //error "Object reference not set to an instance of an object"
        label.printHeader();
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T17:18:20.060

```
private void createLabel()
     {
        label =new labels();//add  this
        //error "Object reference not set to an instance of an object"
        label.printHeader();
     } 
```

# email - 如何使用 CakePHP 在后台发送电子邮件？

> ID：12268361
> 
> 赞同：3
> 
> 时间：2012-09-04T17:15:08.770
> 
> 标签：email, cakephp, background

就是这样，如何使用 CakePHP 在后台发送电子邮件，最好使用开箱即用的电子邮件组件？

编辑：在后台我的意思是在另一个线程中，或者至少允许控制器方法完成并将响应发送给用户。我想运行一个函数，向用户返回“OK”，然后发送一封电子邮件。

如果不可能，我怎么能使用 PHP`mail`函数呢？（仅当这是一个好方法时）

不知道这是否重要，但我使用的是 SMTP。

先感谢您。

编辑2：我正在尝试使用该`CakeEmail::deliver()`方法，因为我从[文档](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#sending-messages-quickly)中读到：

> 有时您需要一种快速启动电子邮件的方法，并且您不一定要提前设置一堆配置。CakeEmail::deliver() 就是为此目的而设计的。

我正在尝试这个：

```
CakeEmail::deliver('myemail@mydomain.com', 'Test', 'Test',
                array('from' => 'localhost@localhost.com'), true); 
```

但实际上并没有发送邮件。有人对这种方法有任何提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T00:46:30.490

因此，“在后台”意味着您要处理“带外”发送的邮件。这是为了给用户一个快速的响应，并且能够在用户有反馈后处理慢的操作，比如发送电子邮件（或者如你所说，在一个单独的线程中）。

有多种方法可以实现这一目标，包括：

*   工人/消息队列
*   定时任务

最简单的方法可能是使用每 15 或 30 秒触发一次的 cron 作业。

我推荐的方法是查看工作人员和队列，并使用[0mq](http://www.zeromq.org/)或[RabbitMQ](http://www.rabbitmq.com/)之类的东西来排队发送电子邮件的请求，并在请求之外处理它。

如果您想执行一项 cron 作业，而不是在用户发起的请求中发送电子邮件，您将创建一个新模型来表示您的出站电子邮件请求，并将该数据存储到您的数据库中。让我们以这个模型`Message`为例。

```
CREATE TABLE `messages` (
   `id` CHAR(36) NOT NULL PRIMARY KEY,
   `to` VARCHAR(255) NOT NULL,
   `from` VARCHAR(255) NOT NULL,
   `subject` VARCHAR(255) NOT NULL,
   `body` TEXT,
   `sent` TINYINT(1) NOT NULL DEFAULT 0,
   `created` DATETIME
); 
```

创建一个抓取`Message`模型的控制台，并查找“未发送”消息：

```
$messages = $this->Message->findAllBySent(0); 
```

创建自己的`send()`方法来简化事情，并处理所有未发送的消息：

```
foreach ($messages as $message) {
   if ($this->Message->send($message)) {
       // Sending was a success, update the database
       $this->Message->id = $message['Message']['id'];
       $this->Message->saveField('sent', 1, false);
   }
} 
```

`send()`模型上方法的实现`Message`取决于您，但它只会将传入的值传递`$message`并分流到`CakeEmail`（http://api.cakephp.org/class/cake-email）

完成后，您可以从命令行（或从您的 cron）调用控制台。

# ruby - Sinatra SASS 自定义目录

> ID：12268366
> 
> 赞同：2
> 
> 时间：2012-09-04T17:15:37.580
> 
> 标签：ruby, sinatra

如何配置 Sinatra 以使用自定义 SCSS 目录？我尝试了以下解决方案，但这对我不起作用。

```
class SassEngine < Sinatra::Base

set :views, File.dirname(__FILE__) + '/sass'

get '/sass/*.scss' do
    filename = params[:splat].first
    sass filename.to_sym
end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:19:46.223

实际上官方文档有一个专门针对这个用例的部分。

*   [Sinatra 文档 - 查找模板](http://www.sinatrarb.com/intro.html#Looking%20Up%20Template%20Files)

为了使它更容易这里是代码（取自文档）：

```
set :views, :sass => 'views/sass', :haml => 'templates', :default => 'views'

helpers do
  def find_template(views, name, engine, &block)
    _, folder = views.detect { |k,v| engine == Tilt[k] }
    folder ||= views[:default]
    super(folder, name, engine, &block)
  end
end 
```

完成此配置后，您只需执行以下操作：

```
get '/css/a_css_file.css' do
  sass :a_css_file
end 
```

或更一般的方法：

```
get '/css/*.css' do
  file = params[:splat].first
  sass file.to_sym
end 
```

虽然最后一个不是一个好方法，但如果在不存在的文件上调用它会导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:26:26.630

我找到了解决方案。

```
require 'sinatra'
require 'dm-core'
require 'dm-migrations'
require 'haml'
require 'sass'
require 'shotgun'

set :views, :scss => 'views/', :haml => 'template', :default => 'views'

 helpers do
   def find_template(views, name, engine, &block)
     _, folder = views.detect { |k,v| engine == Tilt[k] }
     folder ||= views[:default]
     super(folder, name, engine, &block)
   end
 end

get '/css/:name.css' do
  scss :styles
end

get '/' do
  haml :index
end 
```

如您所见，而不是：

```
get '/css/styles.css' do
  sass :styles
end 
```

它应该是：

```
get '/css/:name.css' do
  scss :styles
end 
```

然后我把我的styles.scss 放到我的/views 文件夹中。但是，您可以通过编辑 :scss => ' .scss 文件的路径来修改目标目录：

```
set :views, :scss => 'views/', :haml => 'template', :default => 'views' 
```

# facebook - 是否有可能知道用户是否在 facebook 中更新了状态

> ID：12268369
> 
> 赞同：0
> 
> 时间：2012-09-04T17:16:00.957
> 
> 标签：facebook, facebook-graph-api

假设我的应用有 10k 用户。现在，我想知道某个特定的人是否更新了状态消息！

Facebook 如何提供此类调用以及更新数据库的最佳方式是什么（它们存储公共状态消息的关键字）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:29:05.477

订阅[Facebook 实时更新](https://developers.facebook.com/docs/reference/api/realtime/)，方法是发送一个 POST 请求，`https://graph.facebook.com/<app-id>/subscriptions`其中包含一个`object`具有值`user`的参数和一个`fields`具有值的参数`statuses`。

您还需要提供

*   a `callback_url`facebook 将在其上执行 GET 请求以验证实际更新的订阅和 POST 请求，以及
*   `verify_token`将回显给您`callback_url`以验证订阅的不透明，

# linux - 在 Linux (Ubuntu) 中编译基本 C 语言 CUDA 代码

> ID：12268373
> 
> 赞同：4
> 
> 时间：2012-09-04T17:16:40.780
> 
> 标签：linux, ubuntu, makefile, cuda, nvidia

我花了很多时间在运行 Ubuntu Linux (11.04) 的机器上设置 CUDA 工具链。该装备有两个 NVIDIA Tesla GPU，我能够编译和运行来自 NVIDIA GPU 计算 SDK 的测试程序，例如 deviceQuery、deviceQueryDrv 和 bandwidthTest。

当我尝试从书籍和在线资源中编译基本示例程序时，我的问题就出现了。我知道您应该使用 NVCC 进行编译，但每当我使用它时都会出现编译错误。基本上任何涉及 CUDA 库的包含语句都会导致缺少文件/库错误。一个例子是：

```
#include <cutil.h> 
```

我是否需要某种 makefile 来将编译器定向到这些库，或者在使用 NVCC 编译时是否需要设置其他标志？

我遵循了这些指南：

[http://hdfpga.blogspot.com/2011/05/install-cuda-40-on-ubuntu-1104.html](http://hdfpga.blogspot.com/2011/05/install-cuda-40-on-ubuntu-1104.html) [http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc /CUDA_C_Getting_Started_Linux.pdf](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Getting_Started_Linux.pdf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T17:20:40.377

要修复包含问题，请将 cuda 包含目录添加到您的编译选项中（假设它是 /usr/local/cuda/include）：

```
nvcc -I/usr/local/cuda/include -L/usr/local/cuda/lib test.cu -o test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:31:28.187

`cutil`不是 CUDA 工具包的一部分。它是 CUDA SDK 的一部分。因此，假设您已按照说明操作并且已将 PATH 和 LIB 目录添加到环境变量中，您仍然需要指向 CUDA SDK 包含和库目录。

为了手动包含该库，您必须将路径传递给编译器：

```
nvcc -I/CUDA_SDK_PATH/C/common/inc -L/CUDA_SDK_PATH/C/lib ... 
```

虽然我个人不喜欢使用 CUDA SDK 库，但您可能会发现从 CUDA SDK 示例开始一个项目更容易。

# c# - 当用户从 BottomAppBar 固定时，如何确定选择了哪个 ListView 项及其 Url

> ID：12268380
> 
> 赞同：1
> 
> 时间：2012-09-04T17:17:36.260
> 
> 标签：c#, windows-8, windows-runtime, listviewitem, winrt-async

我有一个基本的 RSS 阅读器，它在左侧 Grid.Column 的 listView 中显示博客文章列表。右侧的 Grid.Column 是 WebView。当用户在 listView 中选择一个项目时，Webview 会更新为 Uri 并显示网页。

现在，我添加了一个 BottomAppBar 并创建了 Pin/UnPin 按钮。我已经成功创建了固定功能，但是，我没有将任何数据传递到 NavigationContext 的查询字符串中。因此，当用户单击固定磁贴时，它只会深度链接到整个页面，而不是所选文章。这会加载所有最新文章，而不是所选项目的 url。

我知道我必须将 Url 传递到固定磁贴的查询字符串中，但我被困在这里。我已经在我的 Windows Phone 应用程序中这样做了几十次，但我被困在了这个 Windows 8 应用程序中。在 WP7 上，我使用上下文菜单来固定项目。在这里，我从 appbar 固定，我似乎无法获取 url 并将其添加为查询字符串（作为我的 TileActivationArgument）

主要是我需要指导如何获取所选项目的数据并将其放到磁贴上以及如何读取它回来。这是我的 Pin() 方法：

编辑：我已经做了一个临时的工作解决方案，但它并没有解决我无法检索所选项目属性的问题。注释与代码内联

```
private async void PinTileHelper(string message, object sender)
    {
        //This is my preferred method, but I cannot extract the SelectedItem's properties
        //var item = itemListView.SelectedItem;

        //I'm not able to use the sender because this is a button click
        //var selectedItem = (FeedItems)((ListView)sender).SelectedItem;

        //As a cheesy workaround, I just took the Uri directly from the WebView's source Uri
        var ActivationArgument = this.ContentView.Source.ToString();

        Uri logo = new Uri("ms-appx:///Assets/squareTile-sdk.png");
        //Uri smallLogo = new Uri("ms-appx:///Assets/smallTile-sdk.png");

        SecondaryTile secondaryTile = new SecondaryTile("Toolbox",
                                                        "Fantasy Football Tile",
                                                        "Article name goes here and ",
                                                        ActivationArgument,
                                                        TileOptions.ShowNameOnLogo,
                                                        logo);

        secondaryTile.ForegroundText = ForegroundText.Dark;
        //secondaryTile.SmallLogo = smallLogo;

        bool isPinned = await secondaryTile.RequestCreateAsync();

        MessageDialog dialog = new MessageDialog("Pinned?");

        if (isPinned)
        {
            dialog.Content = "You have succesfully pinned this tile";
            await dialog.ShowAsync();
        }
        else
        {
            dialog.Content = "Something went wrong. The tile wasn't pinned.";
            await dialog.ShowAsync();
        }
    } 
```

感谢您提供的任何见解。

编辑#2：成功！！安全地投射到您的 ItemViewModel 项目就可以了。

```
var item = itemListView.SelectedItem as FeedItems (or your ItemViewModel items); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:25:20.610

尝试更换

```
var selectedItem = (FeedItems)((ListView)sender).SelectedItem; 
```

和

```
var selectedItem = (FeedItems)((ListView)sender).SelectedItem as FeedItem; 
```

我假设这是 as 语句的正确类类型。这将允许您访问所选项目的所有属性，包括 Uri。如果在此调用后 selectedItem 为 null，则您没有转换为正确的类型。转换为适当的类类型。现在，使用原样的代码，您将得到一个普通的旧对象。

是的，您抓取 LaunchArgs 并将它们传递到您的目标页面，作为处理您的开始导航的一部分。

# css - 如何在richfaces之后加载自定义css？

> ID：12268381
> 
> 赞同：3
> 
> 时间：2012-09-04T17:17:38.453
> 
> 标签：css, jsf, jsf-2, richfaces

我找到了这个线程[https://community.jboss.org/thread/202276?tstart=0](https://community.jboss.org/thread/202276?tstart=0)，其中用户`ramkumarps`展示了一种在richfaces加载他们的css后加载自定义CSS的方法，但我宁愿在内容之后不加载它加载。

有没有办法让它在richfaces之后立即加载并且仍然在`head`标签中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T18:54:34.987

无论您在哪里使用`<h:outputStylesheet>`标签，样式表总是呈现在头部。当你在里面添加它时唯一的区别`<h:body>`是它会在所有 Richfaces 样式表都被加载之后添加。同样如示例中所述，您不必最后添加它们。您可以在`<h:body>`打开标签后添加它们，这足以覆盖 Richfaces 样式。

您可以通过在浏览器中打开开发人员工具来检查这一点，并查看它是否呈现在头部。

# c# - 0.0 到 1 的正则表达式

> ID：12268383
> 
> 赞同：1
> 
> 时间：2012-09-04T17:17:43.367
> 
> 标签：c#, regex

我认为标题是描述性的

有效的：`0.1, 0.15, 0.25, .... and 1`

如何包含`1`是这里的主要挑战。谢谢。

**更新**

对不起，我不能写代码。这是一个遗留应用程序，我无权访问源代码。应用程序验证方法已嵌入，并且正在使用应用程序中嵌入的正则表达式验证器

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T17:20:43.107

正则表达式允许您在模式之间进行选择（即：匹配模式 A 或模式 B）。您可以使用 | 字符（例如：A|B）。

试试这个：

```
^(0(\.[0-9]+)?|1(\.0+)?)$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T17:21:40.023

这不是正则表达式解决方案，因为我认为正则表达式不是一个好的解决方案。我会这样做：

```
string n = "0.1";
decimal number;
bool isNumber = Decimal.TryParse(n, NumberStyles.AllowDecimalPoint, CultureInfo.InvariantCulture, out number);
return isNumber && number >= 0 && number <= 1; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T17:21:19.680

也许这会有所帮助：

```
^(?:(?:0)(?:\.\d+)?)|(?:1)(?:\.0+)?$ 
```

# apache-flex - Flex 4.6 - 在 s:List 或 s:ArrayCollection 上启用 onClick（单击）

> ID：12268385
> 
> 赞同：0
> 
> 时间：2012-09-04T17:17:52.917
> 
> 标签：apache-flex, onclick

我一直在搜索帖子，但我无法找到（我可能错过了）如何允许单击 s:List 或 s:Arraycollection 中的项目以前进到移动应用程序中的另一个视图。任何帮助将非常感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:27:39.540

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx"
           creationComplete="onCreationComplete()"
           >
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.controls.Alert;

            private var _listDataProvider:ArrayCollection = new ArrayCollection(['one', 'two', 'three']);

            private function onCreationComplete():void
            {
                list.dataProvider = _listDataProvider;
                list.addEventListener(MouseEvent.CLICK, onListItemClick);
            }

            private function onListItemClick(event:Event):void
            {
                Alert.show('Replace this Alert with code to go to view ' + event.currentTarget.selectedItem.toString() + '.', 'Item #' + (event.currentTarget.selectedIndex + 1).toString());
            }
        ]]>
    </fx:Script>
    <s:List id="list" 
            horizontalCenter="0"
            verticalCenter="0"
            />
</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:14:42.677

我遇到了同样的问题。由于某些原因，flash builder 正确导入了带有完整包名的 Alert 类（import mx.controls.Alert），但该项目无法编译，因为它显示“找不到导入警报”。我正在使用 SDK 4.6 开发一个移动应用程序，我知道它不支持 mx 控件。这仅解释了为什么 mx 命名空间控制类没有正确导入。我希望这能正确回答您的问题，因为我建议您找到其他向用户提醒信息的方法。也许编写自定义警报组件或通过本机扩展使用平台的警报控件。

# php - 截断文本而不截断 HTML

> ID：12268387
> 
> 赞同：4
> 
> 时间：2012-09-04T17:18:04.693
> 
> 标签：php

该字符串包含 78 个字符（含 HTML）和 39 个字符（不含 HTML）：

```
<p>I really like the <a href="http://google.com">Google</a> search engine.</p> 
```

我想根据非 HTML 字符数截断这个字符串，例如，如果我想将上面的字符串截断为 24 个字符，输出将是：

```
I really like the <a href="http://google.com">Google</a> 
```

截断在确定要截断的字符数时没有考虑 html，它只考虑了剥离的计数。但是，它没有留下打开的 HTML 标签。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T01:06:53.440

好吧，这就是我放在一起的东西，它似乎正在工作：

```
function truncate_html($string, $length, $postfix = '&hellip;', $isHtml = true) {
    $string = trim($string);
    $postfix = (strlen(strip_tags($string)) > $length) ? $postfix : '';
    $i = 0;
    $tags = []; // change to array() if php version < 5.4

    if($isHtml) {
        preg_match_all('/<[^>]+>([^<]*)/', $string, $tagMatches, PREG_OFFSET_CAPTURE | PREG_SET_ORDER);
        foreach($tagMatches as $tagMatch) {
            if ($tagMatch[0][1] - $i >= $length) {
                break;
            }

            $tag = substr(strtok($tagMatch[0][0], " \t\n\r\0\x0B>"), 1);
            if ($tag[0] != '/') {
                $tags[] = $tag;
            }
            elseif (end($tags) == substr($tag, 1)) {
                array_pop($tags);
            }

            $i += $tagMatch[1][1] - $tagMatch[0][1];
        }
    }

    return substr($string, 0, $length = min(strlen($string), $length + $i)) . (count($tags = array_reverse($tags)) ? '</' . implode('></', $tags) . '>' : '') . $postfix;
} 
```

用法：

```
truncate_html('<p>I really like the <a href="http://google.com">Google</a> search engine.</p>', 24); 
```

该功能是从（进行了小修改）中获取的：

[http://www.dzone.com/snippets/truncate-text-preserving-html](http://www.dzone.com/snippets/truncate-text-preserving-html)

# ios - Xcode 4.2 通用应用程序问题

> ID：12268399
> 
> 赞同：0
> 
> 时间：2012-09-04T17:19:03.227
> 
> 标签：ios, xcode4.2, ios-universal-app

我创建了一个通用应用程序，使用`xcode 4.2 and iOS 5 SDK`. 应用程序在 iPad 上运行时运行良好，但在 iPhone 上运行时遇到问题。代码已经到位，可以检测设备成语，但是当我运行应用程序时，`iphone`它仍然会为 iPad 加载 xib 并且 iarge 屏幕出现在 iphone 上。这是一个`bug for xcode 4.2`还是我错过了一些设置。已经尝试从我这边设置所有配置但没有帮助。这是我的应用程序委托中的代码

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {

        LoginViewController *masterViewController = [[[LoginViewController alloc] initWithNibName:@"LoginViewController_iPhone" bundle:nil] autorelease];
        self.navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];

    } 
    else {

        LoginViewController *masterViewController = [[[LoginViewController alloc] initWithNibName:@"LoginViewController_iPad" bundle:nil] autorelease];

       self.navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];

    } 
```

我问这是否是一个错误，因为它在 xcode 4.3 上运行良好。

# javascript - 将自定义按钮添加到现有站点

> ID：12268403
> 
> 赞同：0
> 
> 时间：2012-09-04T17:19:52.623
> 
> 标签：javascript, jquery, html

我正在尝试使用 Greasemonkey 将自定义按钮添加到现有站点。问题是这个站点没有 html 元素和重复类的 ID。一切都在桌子里面！

这是网站的结构。箭头是我要添加新按钮的地方：

[http://i.imgur.com/IyGBx.png](http://i.imgur.com/IyGBx.png)

这是我到目前为止所拥有的：

```
$(".embedded table tbody tr").find("td:last")
.append(newtd); 
```

（其中 newtd 是自定义按钮）

但由于该类有几个元素，我无法告诉 jquery 我应该将按钮添加到哪个元素，现在它出现在每个带有“嵌入”类的表中

应在现有 IMG 旁边添加新按钮 [http://i.imgur.com/tv5pL.png](http://i.imgur.com/tv5pL.png)

反正我能做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:22:40.853

只需使用常规的 CSS3[`nth-child`](http://api.jquery.com/nth-child-selector/)选择器：

```
$(".embedded:nth-child(7) td:last-child").append(newtd); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:27:18.943

```
$(".embedded table tbody tr").find("td:last").eq(3)
.append(newtd); 
```

其中 3 是第三个元素。

# ruby-on-rails - 测试 Rails 控制器：获取和发布奇怪的行为

> ID：12268405
> 
> 赞同：1
> 
> 时间：2012-09-04T17:19:59.740
> 
> 标签：ruby-on-rails, testing, rspec, controller

我正在使用 RSpec（通过 gem rspec-rails）来测试和开发我的应用程序。我试图“测试”一个控制器并遇到 post 和 get 方法的奇怪行为（对于所有其他此类）。

在我的路线文件中：

```
controller :sessions do
    post '/login',  action: :login_create
    get  '/login',  action: :login
    get  '/logout', action: :logout
end 
```

一开始，我以为post会在指定的url模拟一个http post请求，所以我在我的规范中写道：

```
describe "POST 'login'" do
    it "returns http success" do
        post 'login'
        response.should be_success
        response.should render_template 'sessions/login_create'
    end
end 
```

但这将调用登录操作，而不是 login_create，然后最后一个断言失败。经过大量的谷歌搜索和实验，我已经改变`post 'login'`了`post :login_create`，这确实有效！奇怪的是，如果我更改`post`为`get`，它将继续工作！O_o 这不奇怪吗？这些方法是如何工作和使用的？

在 Rails API 中，除了类之外，我没有找到任何其他东西：`ActionController::TestCase::Behavior`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:38:55.947

您正在编写的是*控制器*规范，而不是*请求*规范。在控制器规范中，根本不咨询路由，因为 rspec 直接调用控制器操作。

当您编写`post 'login'`时，`login`指定操作名称，而不是 URL 路径。

`login_create`测试操作的正确方法是`post :login_create`按照您发现的那样使用。

# windows - Windows 7 - 从 ip 到域

> ID：12268406
> 
> 赞同：0
> 
> 时间：2012-09-04T17:20:06.890
> 
> 标签：windows

我使用Windows 7，并进入一个需要找到一个IP（端口为8080）的网站。它没有找到它。

我想告诉他这个ip属于一个域（http://wargra....）

有简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:24:47.257

使用记事本或类似程序打开文件夹“C:\Windows\System32\drivers\etc”中名为“hosts”的文件。

请参阅 127.0.0.1 localhost 这一行，这意味着如果您键入 localhost，它必须转到 IP 127.0.0.1，因此只需以相同的方式为您的 IP 和域添加一行。

但是，这仅对您有用，如果您需要每个人都能够访问通过您正在谈论的 IP 访问的服务器，您需要在 godaddy 或类似网站上购买一个域，并将 DNS 指向服务器的 IP。

# scala - 如何重新启动liftweb？

> ID：12268409
> 
> 赞同：2
> 
> 时间：2012-09-04T17:20:15.090
> 
> 标签：scala, lift

我有我的 Boot.scala 和引导方法，我在其中进行设置。最后，我调用 LiftRules.statelessDispatchTable 并附加我的类的一个新实例，该实例扩展了具有服务块的 RestHelper。

在某些时候，我收到一个信号并需要更改此类，因此我需要再次调用 statelessDispatchTable 以删除原始的并添加一个新的。

有什么好方法可以做到这一点？

谢谢！

编辑：我将用我从大卫·波拉克那里得到的答案来更新这个问题：

你不能。一旦您的应用程序启动，就无法更改 LiftRules。

但是，您要添加到 statelessDispatchTable 的东西是 PartialFunction[Req, Box[LiftResponse]] 因此您可以编写如下所示的 PartialFunction：

```
object RestThing1 extends RestHelper { .... }

object RestThing2 extends RestHelper {....}

object MyDynamicRestThing extends PartialFunction[Req, Box[LiftResponse]] {
  def isDefinedAt(in: Req): Boolean = if (testCondition) RestThing1.isDefinedAt(in) else RestThing2.isDefinedAt(in)
  def apply(in: Req): Box[LiftRequest] = if (testCondition) RestThing1.apply(in) else RestThing2.apply(in)
}

LiftRules.statelessDispatchTable.append(MyDynamicRestThing) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:14:58.077

您可以创建一个二级调度......例如，一个接收请求的对象，然后根据其他一些逻辑将请求代理到真正的处理程序。那么你就完全不用搞乱顶级调度表了。

如果您需要做的是根据信号切换它（例如它会在某个时候恢复），或者如果有其他逻辑可以从适当的抽象中受益，那么这样做真的很有意义。

# servicestack - 如何在 baseController 中获取 UserSession？

> ID：12268411
> 
> 赞同：1
> 
> 时间：2012-09-04T17:20:30.990
> 
> 标签：servicestack

我正在尝试获取 UserSession。

```
public abstract class BaseController : ServiceStackController<CustomUserSession>
{
    public AuthService AuthService { get; set; } // NOT Autowired -Problem 1
    public BaseController()
    {
        //this.ControllerContext = null  -Problem 2
        //UserSession   'UserSession' threw an exception of type System.NullReferenceException' -Problem 3

        if (!this.ControllerContext.IsChildAction)
        {

        }
    }
} 
```

但是如您所见，有3个问题。为什么我需要这个？我想在 _Layout.cshtml 中应用用户特定的 css。

如何在控制器中获取当前用户会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-22T12:58:24.667

我也有一个 null UserSession，通过将以下代码添加到 AppHost 中的 Configure 方法来解决它：

```
 //Set MVC to use the same Funq IOC as ServiceStack
    ControllerBuilder.Current.SetControllerFactory(new FunqControllerFactory(container));
    ServiceStackController.CatchAllController = reqCtx => container.TryResolve<HomeController>(); 
```

不确定 AuthService 自动装配，也许上面也能解决这个问题

# google-app-engine - 用于服务 blob 的 Webapp2 路由正则表达式

> ID：12268415
> 
> 赞同：0
> 
> 时间：2012-09-04T17:20:40.810
> 
> 标签：google-app-engine, blobstore

我正在尝试提供 blob，正在使用 Webapp2。我已按照[https://developers.google.com/appengine/docs/python/blobstore/overview上的教程进行操作](https://developers.google.com/appengine/docs/python/blobstore/overview)

但是，访问类似的内容时出现 404 错误`/serve/5VxklPAO0WRbnRtVcb7SJA==`

我从来没有到过ServeHandler。我相信这是因为我在 Webapp2 路由中的正则表达式与 URL 的 serve/ 部分之后的内容不匹配。这就是我在 main.py 文件中的内容： `webapp2.Route(r'/serve/([^/]+)?', 'ServeHandler')`

如果我从 Webapp2 路由中删除 blob 键和相应的正则表达式，我会点击我的 ServeHandler。

感谢您提供任何正则表达式帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:31:02.723

我用：

```
webapp2.Route(r'/serve/<:([^/]+)?>', handler=ServeHandler),           # helper to process upload 
```

# php - symfony2 学说注释 [语义错误]

> ID：12268417
> 
> 赞同：2
> 
> 时间：2012-09-04T17:20:46.773
> 
> 标签：php, symfony, annotations, doctrine-orm

我使用 symfony2 和教义，我收到以下错误：

> [语义错误] Wibiya\WebsiteBundle\Entity\Rules::$RuleId 属性中的注释“@Doctrine\ORM\Mapping\RuleId”不存在，或无法自动加载。

实体包含其中`Rules`的列/字段。

```
 /**
     * @var integer $RuleId
     * @ORM\RuleId
     * @ORM\Column(name="RuleId", type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $RuleId; 
```

这是我试图运行的功能：

```
$em = $this->getDoctrine()->getEntityManager();
$Rules = $em->getRepository('WibiyaWebsiteBundle:Rules')->findAllOrderedByName(); 
```

`RulesRepository`班级：

```
 public function findAllOrderedByName()
    {
        return $this->getEntityManager()
            ->createQuery('SELECT p FROM WibiyaWebsiteBundle:Rules p ORDER BY p.RuleName ASC')
            ->getResult();
    } 
```

我试图把这条线放在底部`autoload.php`：

```
require __DIR__ . "/../vendor/doctrine/lib/Doctrine/ORM/Mapping/Driver/AnnotationDriver.php"; 
```

但是，我得到了同样的错误。
我正在使用 Symfony 2.0.16 和 Doctrine 2.1.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:24:28.470

Doctrine中没有`RuleId`注释，只是`Id`[ [see docs](http://www.doctrine-project.org/api/orm/2.1/namespace-Doctrine.ORM.Mapping.html) ]。

只需`@ORM\Id`在主键字段上使用您定义的**所有**实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T05:52:20.270

`@ORM\Id`只是学说映射中主键字段的注释，它独立于 MySql 表中主键的列名。您可以为您的主键字段保留任何名称，并在映射上将其指定为`@ORM\Column(name="column_name", type="integer")`.

# javascript - 用 jQuery 模拟点击？

> ID：12268421
> 
> 赞同：2
> 
> 时间：2012-09-04T17:21:08.953
> 
> 标签：javascript, jquery

5 秒后，我需要模拟单击按钮。

```
var count = 5;
countdown = setInterval(function () {
    $("#count").html(count);
    if (count == 0) {
        alert("Jotain pitäis tapahtua. kai");
        //What should I put instead of this line?
    }
    count--;
}, 1000);
return false; 
```

甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T17:22:18.673

`$('#my_button').trigger('click');`

那应该为你做。

或者正如其他人发布的速记：

`$('#my_button').click();`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T17:22:42.803

你可以做

```
$("#button").click(); 
```

这会触发所有已添加到按钮的单击事件的事件处理程序。事件处理程序必须由触发单击事件的同一 jQuery 实例添加（如果您有多个 jQuery 实例，请小心）

如果你想触发一些命名空间效果使用

```
$("#button").trigger('click.namespace'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T17:22:34.213

来自 jQuery 的 .click() 文档：

`Description: Bind an event handler to the "click" JavaScript event, or trigger that event on an element.`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T17:24:23.840

为什么不试试 setTimeout()？

```
$("targetElement").on("click", function(){
setTimeout(function(){
    //do something
},1000);
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-04T17:24:34.073

是的，这是可能的，而且您似乎非常接近获得完整的答案。试试这个：

```
var count = 5;

setInterval(function () {
    $("#count").html(count);
    if (count == 0) {
        alert("Jotain pitäis tapahtua. kai");
        $('#myButton').click();        
    }
    count--;
}, 1000); 
```

我刚刚添加`$('#myButton').click();`了单击按钮。

# javascript - 用户单击音频控件时无法接收单击事件

> ID：12268428
> 
> 赞同：0
> 
> 时间：2012-09-04T17:21:50.840
> 
> 标签：javascript, html, uiwebview

我有以下代码，如果用户单击列表中的任何项目，我想在其中获取单击事件：（我知道内联 onClick 是老式的，它更容易启动和运行，我稍后会更改它）。

```
<ul>
<li id = "li1" onclick="audioClick(event, 'li1', 'url');">
  <img id = "track_image" src="image.jpg" />
  <div id = "track_title">Title</div>
  <div id = "artist_name">Name</div>
  <div id = "release_date">Date</div>
  <a  href="another url"><img id = "visit_website" src="visit_website_icon.gif"/></a>
  <div id = "controls">
      <audio controls></audio>
  </div>
</li> 
```

如果我使用 KomodoEdit 和 Chrome 运行它，它就可以正常工作，即调用 audioClick()。但是，在 iPhone 上，如果用户单击控件则不会。

这可能是 iPhone 浏览器的一个功能，还是我的代码根本不正确？

（我将控件放在 div 中，因为似乎无法使用 .css 来定位它们，因此通过将它们放在 div 中我可以定位）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:49:13.673

点击事件委托在 iPhone 上可能很古怪。

读：

*   [http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html](http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html)
*   [http://www.quirksmode.org/blog/archives/2010/10/click_event_del_1.html](http://www.quirksmode.org/blog/archives/2010/10/click_event_del_1.html)

您可能想尝试触摸事件。

# c++ - C++ 列表视图工具提示

> ID：12268429
> 
> 赞同：0
> 
> 时间：2012-09-04T17:21:55.010
> 
> 标签：c++, windows, winapi, listview, tooltip

我在报告视图中有一个列表视图，我正在尝试为其显示工具提示，每个项目都不同。

但我根本无法显示任何工具提示...

到目前为止，这是我发现的：

```
case LVN_GETINFOTIP:
{
    LPNMLVGETINFOTIP GetInfoTip = (LPNMLVGETINFOTIP) lParam;
    GetInfoTip->pszText = L"TESTING";
    // What do I do now? How do I display the tooltip?
    return 0;
} 
```

收到`LVN_GETINFOTIP`消息后，如何显示工具提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:41:11.627

问题是您正在替换指针`pszText`。您需要修改内存缓冲区的内容。例如使用`StringCchPrintf`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:37:57.493

你忘了设置**LVS_EX_INFOTIP**吗？

```
ListView_SetExtendedListViewStyle(hListView, LVS_EX_INFOTIP  | LVS_EX_LABELTIP); 
```

看[这里](http://blogs.msdn.com/b/alexdan/archive/2006/05/16/adding-tooltips-to-a-list-view-control.aspx)的例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-15T18:20:04.050

```
LPNMLVGETINFOTIP pGetInfoTip = reinterpret_cast<LPNMLVGETINFOTIP>(pNMHDR); 
```

至少在报告模式下，您只会在鼠标悬停在第 0 列时收到消息

# php - PHP日历一年的第一周显示错误的年份

> ID：12268430
> 
> 赞同：-1
> 
> 时间：2012-09-04T17:22:03.880
> 
> 标签：php

> **可能重复：**
> [Php.Advance 每周日历一周](https://stackoverflow.com/questions/12266310/php-advance-weekly-calendar-one-week)

我编写了一个脚本，该脚本每周显示一个日历，用户可以选择一次后退或前进一周。一切都很好，除了每年的第一周仍然显示错误的年份并且 12 月 31 日显示为 02/01。似乎只有第 1 周受到影响，一周及以后的日子再次正确

```
<?
if(isset($_POST['add_week'])){
     $last_week_ts = strtotime($_POST['last_week']);
     $display_week_ts = $last_week_ts + (3600 * 24 * 7);
} else if (isset($_POST['back_week'])) {
     $last_week_ts = strtotime($_POST['last_week']);
     $display_week_ts = $last_week_ts - (3600 * 24 * 7);
} else {
    $display_week_ts = floor(time() / (3600 * 24)) * 3600 * 24;
}

    $week_start = date('d-m-Y', $display_week_ts);
    $week_number = date("W", $display_week_ts);
    $year = date("Y", $display_week_ts);

echo $week_start.' '.$week_number.' '.$year;
?>

<table name="week">
    <tr>
<?
for($day=1; $day<=7; $day++)
{
    echo '<td>';
    echo date('d-m-Y', strtotime($year."W".$week_number.$day))." | \n";
    echo '</td>';
}
?>
</tr>
<tr>
<form name="move_weeks" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<input type="hidden" name="last_week" value="<? echo $week_start; ?>" />
<td colspan="7"><input type="submit" name="back_week" value="back_week" /><input type="submit" name="add_week" value="add_week" />
</td>
</form>
</tr>
</table> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:29:37.250

这与您提供的格式有关`date()`。具体来说`W`。

来自[PHP 文档](http://tr2.php.net/manual/en/function.date.php)：

> ISO-8601 年中的周数，从星期一开始的周数

这是巧合，因为 2012 年 12 月 31 日是*星期一*。

您应该重写代码以使用其他方法来计算日期。我建议不要信任表单数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:33:51.173

正如原始问题的答案中所建议的那样，您不需要使用周数和年数的东西。

如果在一天结束时，您希望能够列出一周的 7 天，根本不要使用这部分代码：

```
$week_number = date("W", $display_week_ts);
$year = date("Y", $display_week_ts);

echo $week_start.' '.$week_number.' '.$year; 
```

并用原始问题中建议的循环替换回显的循环。

# php - 如何在以下代码中将两个查询放入一个数组中？

> ID：12268433
> 
> 赞同：3
> 
> 时间：2012-09-04T17:22:21.443
> 
> 标签：php, arrays, wordpress

我为我的 Wordpress 特色文章使用滑块。它选择一个类别并返回自定义数量的帖子。

如何制作显示为自定义帖子的第一个帖子？我可以直接在滑块代码中添加特定帖子的 ID**以使该帖子首先出现**，然后是原始查询返回的其他帖子？

例如，在页面上，第一个帖子的 ID 为 6（手动编写在源代码中），第二个、第三个和第四个帖子是原始代码中查询返回的帖子。这怎么可能？

有人建议这很简单，我需要做的就是在此之前进行另一个查询以获取自定义帖子，然后关闭查询，重新打开它以获取下一个查询（即在滑块代码中），最后推送项目一起放入一个数组中。我对 PHP 的了解非常有限，这限制了我理解如何做到这一点。

我知道如何获取自定义帖子，此代码有效：

```
<?php
$post_id = 6;
$queried_post = get_post($post_id);
?> 
```

但是，我不知道如何将这个和原始查询添加到数组中。**你？**

这是滑块的完整代码：

```
<?php 
    $responsive = 'on' != get_option('henrik_responsive_layout') ? false : true;
    $featured_auto_class = '';
    if ( 'on' == get_option('henrik_slider_auto') ) $featured_auto_class .= ' et_slider_auto et_slider_speed_' . get_option('henrik_slider_autospeed');
?>
<div id="featured" class="<?php if ( $responsive ) echo 'flexslider' . $featured_auto_class; else echo 'et_cycle'; ?>">
    <a id="left-arrow" href="#"><?php esc_html_e('Previous','henrik'); ?></a>
    <a id="right-arrow" href="#"><?php esc_html_e('Next','henrik'); ?></a>

<?php if ( $responsive ) { ?>
    <ul class="slides">
<?php } else { ?>
    <div id="slides">
<?php } ?>
        <?php global $ids;
        $ids = array();
        $arr = array();
        $i=0;

        $featured_cat = get_option('henrik_feat_cat'); 
        $featured_num = (int) get_option('henrik_featured_num'); 

        if (get_option('henrik_use_pages') == 'false') query_posts("showposts=$featured_num&cat=".get_cat_ID($featured_cat));
        else {
            global $pages_number;

            if (get_option('henrik_feat_pages') <> '') $featured_num = count(get_option('henrik_feat_pages'));
            else $featured_num = $pages_number;

            query_posts(array
                            ('post_type' => 'page',
                            'orderby' => 'menu_order',
                            'order' => 'ASC',
                            'post__in' => (array) get_option('henrik_feat_pages'),
                            'showposts' => (int) $featured_num
                        ));
        } ?>
        <?php if (have_posts()) : while (have_posts()) : the_post();
        global $post; ?>
        <?php if ( $responsive ) { ?>
            <li class="slide">
        <?php } else { ?>
            <div class="slide">
        <?php } ?>
                <?php
                $width = $responsive ? 960 : 958;
                $height = 340;
                $small_width = 95;
                $small_height = 54;
                $titletext = get_the_title();

                $thumbnail = get_thumbnail($width,$height,'',$titletext,$titletext,false,'Featured');

                $arr[$i]['thumbnail'] = get_thumbnail($small_width,$small_height,'',$titletext,$titletext,false,'Small');
                $arr[$i]['titletext'] = $titletext;

                $thumb = $thumbnail["thumb"];
                print_thumbnail($thumb, $thumbnail["use_timthumb"], $titletext, $width, $height, ''); ?>
                <div class="featured-top-shadow"></div>
                <div class="featured-bottom-shadow"></div>  
                <div class="featured-description">
                    <div class="feat_desc">
                        <p class="meta-info"><?php esc_html_e('Posted','henrik'); ?> <?php esc_html_e('by','henrik'); ?> <?php the_author_posts_link(); ?> <?php esc_html_e('on','henrik'); ?> <?php the_time(esc_attr(get_option('henrik_date_format'))) ?></p>
                        <h2 class="featured-title"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>
                        <p><?php truncate_post(410); ?></p>
                    </div>
                    <a href="<?php the_permalink(); ?>" class="readmore"><?php esc_html_e('Read More', 'henrik'); ?></a>
                </div> <!-- end .description -->
        <?php if ( $responsive ) { ?>
            </li> <!-- end .slide -->
        <?php } else { ?>
            </div> <!-- end .slide -->
        <?php } ?>
        <?php $ids[] = $post->ID; $i++; endwhile; endif; wp_reset_query(); ?>
<?php if ( $responsive ) { ?>
    </ul> <!-- end .slides -->
<?php } else { ?>
    </div> <!-- end #slides -->
<?php } ?>
</div> <!-- end #featured -->

<div id="controllers" class="clearfix">
    <ul>
        <?php for ($i = 0; $i < $featured_num; $i++) { ?>
            <li>
                <div class="controller">
                    <a href="#"<?php if ( $i == 0 ) echo ' class="active"'; ?>>
                        <?php print_thumbnail( $arr[$i]['thumbnail']['thumb'], $arr[$i]['thumbnail']["use_timthumb"], $arr[$i]['titletext'], $small_width, $small_height ); ?>
                        <span class="overlay"></span>
                    </a>
                </div>  
            </li>
        <?php } ?>
    </ul>
    <div id="active_item"></div>
</div> <!-- end #controllers --> 
```

如果您选择回复，请详细说明代码示例，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:09:33.073

**第 39 行**：用以下代码替换该行：

```
<?php if (have_posts()) : while (have_posts()) : 
global $post;
if (!$first_time)  
{
    $post_id = 6;
    $post = get_post($post_id);
    $first_time = 1;
}
else the_post();
 ?> 
```

解决思路很简单：

```
 Check for first-time loop
   :firt loop - simply get needed post with "get_post()" function
   :other loops - get posts from original query by "the_post()" function. 
```

# xcode - 如何在带有 iOS v 4.2.1 的旧 iPhone 3G 上测试应用程序

> ID：12268443
> 
> 赞同：0
> 
> 时间：2012-09-04T17:22:47.297
> 
> 标签：xcode, testing, ios4, ios-provisioning

我一直在我的 iPhone 4S 和我妻子的 iPhone 3GS 上测试我的应用程序。我还想在运行 iOS 4.2.1（它将支持的最高版本）的旧 iPhone 3G 上对其进行测试。

当我将 3G 连接到我的 Mac 并尝试配置它时，我收到两条错误消息：

**无法支持开发**

和

**Xcode 找不到安装这个版本的软件镜像**

我正在使用最新版本的 xCode (v. 4.4.1)。

是否有一些地方可以找到丢失的“软件映像”以便在 3G 和较旧的 iOS 设备上测试我的应用程序？

如果不是，如何知道该应用程序将与哪些设备一起使用？

我确实注意到运行 iOS5 及更高版本的较新 iPhone 也支持自动引用计数 (ARC)。每当我创建一个新项目时，我都会检查 ARC 按钮。如果一个人希望他们的应用程序在支持 iOS5 的旧设备上运行，是否必须放弃 ARC？

...戴尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:05:03.207

> 有什么地方可以找到丢失的“软件映像”吗？

我相信您可以通过在设备的摘要页面中单击恢复然后搜索`*.ipsw`文件来通过 iTunes 下载它。自动下载后，iTunes 甚至可能会共享该图像。

> 如果一个人希望他们的应用程序在支持 iOS5 的旧设备上运行，是否必须放弃 ARC？

不是全部。iOS 4.2 支持绝大多数`ARC`，但不支持`weak`引用。

此外，还有一些你必须跳到目标的箍。我在这里有一个概述它们的[答案（带有屏幕截图）。](https://stackoverflow.com/a/8697335/927947)

我知道 Xcode 4.4.1 可以使用 iOS 4.2.1 设备作为目标，因为我可以在运行 4.2.1 的第二代 iPod touch 上进行测试。

最后，如果您无法获取软件镜像，您可以尝试通过 developer.apple.com 直接在配置门户上通过 UDID 添加您的设备。（老式方式）

# javascript - 垂直展开 div

> ID：12268446
> 
> 赞同：0
> 
> 时间：2012-09-04T17:22:53.477
> 
> 标签：javascript, jquery

我有两个 DIV

一个在右边 另一个在左边

我正在寻找一个给我链接的代码，通过单击此链接，两个 div 将扩展为 100%（意味着其中一个将向下滑动），再次单击它们将返回并排

我试过这个：

```
<style>
#container {
   width:100%;
   height:500px;

}
#left {

    width:45%;
    height:500px;
    float: left;
}
#right {

    width:45%;
    height:500px;
    float: left;
}
</style>

<script type="text/javascript" src="scripts/jquery-1.8.0.min.js"></script>  

<div id="container">
      <div id="left">
       LEFT
    </div>

      <div id="right">
        RIGHT 
    </div>
</div>

<script>
$('#container').click(function(){
        if (parseInt($('div#right').css('right'),10) < 0) {
                 // Bring right-column back onto display
                  $('div#right').animate({
                      right:'0%'
                  }, 1000);

                  $('div#left').animate({
                    width:'45%'
                  }, 600);
                } else {

        // Animate column off display.
                  $('div#right').animate({
                      right:'-45%'
                  }, 600);

                  $('div#left').animate({
                    width:'100%'
                  }, 1000);
        }

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:55:25.203

您可以使用 jQuery 切换，为您的目的。

看看这个[**例子**](http://jsfiddle.net/cyXvv/)

# xcode - 导航控制器内的视图控制器内的 GLKViewController

> ID：12268450
> 
> 赞同：2
> 
> 时间：2012-09-04T17:23:28.733
> 
> 标签：xcode, opengl-es, uinavigationcontroller, glkit

我不确定为什么这不起作用，但也许这里有人可以阐明问题可能是什么。我正在开发基于 XCode OpenGL 模板的游戏。我有一个小的 GLKViewController，它的视图不占用全屏区域，所以我在另一个 UIViewController 中创建它，它确实有一个全屏视图作为容器。这行得通，并且我的更新/绘制方法被调用，正如我所期望的那样。

但是，当我获取容器视图（其中包含 GLKViewController）并尝试在 UINavigationController 中将其初始化为 rootViewController 时，GLKViewController 的更新方法永远不会被调用，而绘制方法只会被调用一次。

如果没有 UINavigationController，此视图层次结构可以正常工作，但是一旦添加，它就不起作用。我已验证正在调用 GLKViewController 的 viewDidLoad。上下文已初始化，因为我可以看到第一帧，但之后看起来绘制/更新消息被吞没了。我可以通过不对这个特定视图使用导航控制器来解决这个问题，但我想了解为什么这不起作用。关于绘制/更新功能可能发生什么的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T00:02:28.790

我最近设法让 GLKViewController 在 Master/Detail 视图控制器中运行并面临同样的问题。

您是否检查过 GLKViewController 没有暂停？

这将触发更新循环：

`self.paused = NO;`

# jquery - jquery imgareaselect插件不起作用

> ID：12268452
> 
> 赞同：1
> 
> 时间：2012-09-04T17:23:29.873
> 
> 标签：jquery

我正在使用 1.8 的最新版本的 jquery，插件似乎在这个版本中不起作用。

我的整个网站都与 jquery 1.8 兼容，但这个插件无法正常工作，因为我的网站是实时的，并且它用于主要用户个人资料图像裁剪，我真的被卡住了。

这是插件链接[https://github.com/odyniec/imgareaselect](https://github.com/odyniec/imgareaselect)。如果有人遇到同样的问题并有解决方案，请与我分享。

# linux - 从jar中提取txt文件

> ID：12268454
> 
> 赞同：0
> 
> 时间：2012-09-04T17:23:32.747
> 
> 标签：linux, bash, jar

我有一个很大的主目录，下面有很多 jar 文件。我需要将我的主目录中的 jar 文件中的所有 txt 文件的内容聚合到一个文本文件中。

有人可以帮我弄这个吗？我不知道如何为此编写脚本。我正在使用Linux系统。

回顾一下，我需要：

1.  查找所有jar文件
2.  查找jar文件中的所有txt文件
3.  将这些 txt 文件的内容获取到单个输出文件中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:10:13.400

如果我们在文件名中省略适当的空格处理，它可以归结为：

```
searchdir='/home/username/'
outputtxt='/home/username/out.txt'

for jar in $(find "$searchdir" -iname '*.jar'); do
  for txt in $(unzip -l "$jar" | awk '/\.txt$/ {print $NF}'); do
    unzip -c "$jar" "$txt" | tail -n +3 >> "$outputtxt"
  done
done 
```

如果您希望在输出文件中包含解压缩标头，您也可以`| tail -n +3`从最里面的循环中省略。一个示例标题：

```
Archive:  /home/username/filename.jar
  inflating: META-INF/maven/pom.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T03:43:48.070

我大概会使用`jar`工具来做到这一点-

```
for jarfile in `ls -1 *.jar`
do
    txtfiles=`jar tf "$jarfile"|grep ".txt"`   #find all txt files in the jar
    for files in $txtfiles
    do
      jar xf "$jarfile" $file     #extract just the txt file
      if [ $? -eq 0 ]             #check if extract was successful
      then
        cat "$file" >> aggregate_file.txt  
        rm -rf "$file"             #clean up the un-jar
      else
        print "Cannot extract $file from $jarfile..."
      fi
    done
done 
```

[这里](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/jar.html)是关于 的描述`jar`。

# c# - FileHelpers Csv 阅读器 - 无法转换 dd-mmm-yyyy 日期时间格式

> ID：12268455
> 
> 赞同：4
> 
> 时间：2012-09-04T17:23:35.200
> 
> 标签：c#, vb.net, visual-studio-2010, filehelpers

```
"NIFTY","13-Jun-2012","28-Jun-2012","7100.00" 
```

可以注意到，上述 csv 样本的日期格式是 - dd-mmm-yyyy

但是文件助手的日期时间格式（可能是，默认一个）是-dd-mm-yyyy

在尝试转换 csv 文件时出现以下错误。

```
Error Converting '06-Jun-2012' to type: 'DateTime'.  There are more chars in the Input String than in the Format string: 'ddMMyyyy' 
```

这是否可以使用 filehelper 从 06-JUN-2012 转换为 13-06-2012 。??

这是我用于文件助手的 mDate 类（v 2.9.16）

```
 [FieldTrim(TrimMode.Both)]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    private DateTime mDate; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T20:08:14.487

您必须使用转换器：

```
[FieldTrim(TrimMode.Both)]
[FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
[FieldConverter(ConverterKind.Date, "dd-MMM-yyyy" )] 
private DateTime mDate; 
```

更多的选择：

[http://www.filehelpers.net/mustread/](http://www.filehelpers.net/mustread/)

# java - 用 jline 预填充一行

> ID：12268461
> 
> 赞同：6
> 
> 时间：2012-09-04T17:24:16.440
> 
> 标签：java, readline, jline

使用 JLine（或 JLine2），是否可以发出对 a 的调用，`readline`并且`ConsoleReader`除了标准提示之外，缓冲区还可以预先填充我选择的字符串？

我试过做，例如：

```
reader.getCursorBuffer().write("Default");
reader.readLine("Prompt> "); 
```

这似乎确实写入了缓冲区，但该行仅显示提示。如果我按回车键，将按预期`readLine`返回。`"Default"`如果我清除屏幕，缓冲区将重新绘制并正确显示。

我的理解是，我应该`reader.redrawLine()`在调用`readLine`. 然而，最后一个是阻塞的，这使得它很难（并非不可能，但为此使用第二个线程肯定感觉不对）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-26T22:43:29.327

我今天正好遇到了这个用例。

这有点 hack，但我能够将文本预加载到 JLine 缓冲区中，然后让用户通过执行以下操作对其进行编辑：

```
String preloadReadLine(ConsoleReader reader, String prompt, String preload)
    throws IOException
{
    reader.resetPromptLine(prompt, preload, 0);
    reader.print("\r");
    return reader.readLine(prompt);
} 
```

是的，打印`\r`是一个黑客，但它似乎使事情奏效。

我正在使用 JLine-2.13。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-24T13:38:11.173

我设法使用线程来做到这一点（是的，它确实感觉不对，但我没有找到其他方法）。

我从[JLine 本身的代码中](https://github.com/jline/jline2/blob/master/src/main/java/jline/console/ConsoleReader.java#L3798)获得灵感，该代码也将线程用于类似目的。

在斯卡拉：

```
 val thr = new Thread() {
        override def run() = {
          reader.putString("Default")
          reader.flush()
          // Another way is:
          // reader.getCursorBuffer.write("Default") // writes into the buffer without displaying
          // out.print("D*f*ult") // here you can choose to display something different
          // reader.flush()
        }
      }
      thr.setPriority(Thread.MAX_PRIORITY)
      thr.setDaemon(true)
      thr.start() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T18:37:06.777

我认为您想要`resetPromptLine`或者`putStream`如果您已经设置了提示。

不要劫持您的问题，但我无法弄清楚如何简单地打印替换提示的行（表面上或视觉上将提示向下推，并在其上方显示一条消息）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-07T10:35:17.367

JLine3 更新：

这可以通过以下现有重载之一来完成`readLine`：

```
readLine(String prompt, Character mask, String buffer) 
```

例如，`reader.readLine("> ", null, "abc")`将产生`> abc`where`abc`是正在编辑的缓冲区的一部分。

# iphone - EXEC_BAD_ACCESS 错误

> ID：12268462
> 
> 赞同：0
> 
> 时间：2012-09-04T17:24:19.080
> 
> 标签：iphone, objective-c, ios, ios4, exc-bad-access

> **可能重复：**
> [如何在 Xcode 4 中设置 NSZombieEnabled？](https://stackoverflow.com/questions/2190227/how-do-i-set-up-nszombieenabled-in-xcode-4)

我正在调试一个应用程序，它在执行某个导航功能时会引发 exec-bad-access 错误，但只有当我在设备上运行它时才会发生。

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0xf0000008
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x3421bf78 objc_msgSend + 16
1   UIKit                           0x31d9a28c -[UIWebView    webView:decidePolicyForNavigationAction:request:frame:decisionListener:] + 68
2   CoreFoundation                  0x321ce7dc __invoking___ + 60
3   CoreFoundation                  0x321297aa -[NSInvocation invoke] + 154
4   CoreFoundation                  0x321293c8 -[NSInvocation invokeWithTarget:] + 44
5   WebKit                          0x365f6e06 -[_WebSafeForwarder forwardInvocation:] + 246
6   CoreFoundation                  0x321cda7c ___forwarding___ + 660
7   CoreFoundation                  0x32128648 _CF_forwarding_prep_0 + 40
8   CoreFoundation                  0x321ce7dc __invoking___ + 60
9   CoreFoundation                  0x321297aa -[NSInvocation invoke] + 154
10  WebCore                         0x358fa1ee _ZL11SendMessageP12NSInvocation + 18
11  WebCore                         0x3590d6ea _ZL20HandleDelegateSourcePv + 74
12  CoreFoundation                  0x3219facc __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 8
13  CoreFoundation                  0x3219f298 __CFRunLoopDoSources0 + 208
14  CoreFoundation                  0x3219e03e __CFRunLoopRun + 646
15  CoreFoundation                  0x3212149e CFRunLoopRunSpecific + 294
16  CoreFoundation                  0x32121366 CFRunLoopRunInMode + 98
17  GraphicsServices                0x31278432 GSEventRunModal + 130
18  UIKit                           0x31c20cce UIApplicationMain + 1074
19  Parliament                      0x0007396a main (main.m:14)
20  Parliament                      0x00073928 start + 32 
```

这是错误日志。有谁知道这是为什么，或者我怎么能调试这样的错误，因为通过仪器运行时没有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:50:05.383

您可能已经释放了一个对象，然后尝试在您的 webView:decidePolicyForNavigationAction 委托方法中访问该对象。

在调试构建设置中启用“僵尸”检测： [如何在 Xcode 4 中设置 NSZombieEnabled？](https://stackoverflow.com/questions/2190227/how-do-i-set-up-nszombieenabled-in-xcode-4)

这将帮助您确定对象是否未正确保留。

# php - 自动项目构建版本号

> ID：12268473
> 
> 赞同：1
> 
> 时间：2012-09-04T17:25:05.503
> 
> 标签：php, web, build-automation, versioning

我正在构建基于 PHP 的 Web 应用程序。（但我的问题根本与 PHP 无关。我的所有项目都需要一些东西，而不仅仅是网络。）

我每天都在对这个应用程序进行修复和更改。我需要的是版本控制系统，它会自动为项目提供构建版本号并要求我记录更改。什么可以用于此目的？

我没有 git 服务器，它不是公共项目，所以我可以使用 gitHub 之类的东西。

我的电脑规格：

**编辑：** Sublime（如果我需要任何解决方案，也可以使用 netbeans）

**操作系统：** Windows 8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:32:01.343

你在正确的轨道上。您需要使用 VCS **（版本控制系统）**，例如 Git、SVN 或 Mercurial。我更喜欢 Git（但在工作中使用 SVN）。您不必公开 Git 项目……您可以在本地托管自己的存储库，[使用 DropBox 进行设置](https://stackoverflow.com/questions/1960799/using-gitdropbox-together-effectively)，或者使用[BitBucket](https://bitbucket.org/)之类的东西。

有两种主要类型的版本控制：分布式和集中式。此处很好地解释了差异：[集中式和分布式版本控制系统之间的比较](https://stackoverflow.com/questions/111031/comparison-between-centralized-and-distributed-version-control-systems)

“要求我注意更改”称为**提交**，当您想要拍摄代码的“快照”并为其分配唯一标识符（即版本号）时，就会发生这种情况。某些系统（例如 Git）处理“版本号”的方式是一个哈希标识符，它不像 v.2.3.45 那样翻译得很好。尽管使用版本发布标签，但您有一些选择，并且可以使用脚本生成修订号。在此处阅读更多信息：[修订号的 git 等效项是什么？](https://stackoverflow.com/questions/4120001/what-is-the-git-equivalent-for-revision-number)

# javascript - 使用默认行为覆盖类外的 Javascript 方法

> ID：12268474
> 
> 赞同：0
> 
> 时间：2012-09-04T17:25:09.157
> 
> 标签：javascript, class, overriding, overwrite

我正在尝试理解 Javascript OOP。我正在尝试覆盖类中的方法。当“点击”时，该类具有默认功能。我想覆盖那个函数，所以当点击时会发生一些新的事情。

我有一个 Javascript 类，如下所示：

```
AlertModal = function(){
  var x = *this is my close object;

  x.onclick = destoryAlert;

  function destroyAlert(){
    console.log('destroy');
  }
} 
```

我的 HTML 文件显示：

```
<script type="text/javascript">
  window.alert = function (message) {
    var newAlert = new AlertModal();
    newAlert.destroyAlert = function(){
      console.log('new alert destroy');
    };

    newAlert.destroyAlert();
  }; 
```

我得到“新警报销毁”，这很棒。但是当我单击“x”时，它也表示销毁。所以它被覆盖了，但不是？！就像它在调用时创建了一个新的“destroyAlert”函数，但保留了默认值。

谁能告诉我如何做到这一点，创建一个具有默认功能的类，但如果需要如何覆盖它？

我习惯于用 Java 和 Actionscript 进行编程，扩展类和覆盖公共/受保护的方法，但是这样做 Javascript 似乎有很大不同，我无法理解这样做的逻辑。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:55:24.720

您可以覆盖实例级别的方法：

```
AlertModal = function() {
    this.init();
};

AlertModal.prototype.init = function() {
    var modal = this;
    var x = ...;
    x.onclick = function() {
        // Note that I'm not using `this` here, because it would
        // reference `x` instead of the modal. But we can pass the modal
        // from the outer scope. This is called a lexical closure.
        modal.destroy();
    };
};

AlertModal.prototype.destroy = function() {
    console.log('destroy');
};

var myalert = new AlertModal();
myalert.destroy = function() {
    console.log('new destroy');
};

myalert.destroy(); 
```

但是，如果您想在多个地方执行相同的覆盖，最好通过从 AlertModal 类继承来创建一个专门的 OtherAlertModal。这是一个在 JavaScript 中继承的好方法：http: [//ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:30:16.033

```
x.onclick = destroyAlertl 
```

将 x 的`onclick`处理程序设置为引用本地函数

然而

```
newAlert.destroyAlert = ... 
```

将此对象的`destroyAlert`属性集设置为不同的函数。它不会**更改**存储在`x.onclick`.

您需要将“默认”功能放在以下`prototype`位置`AlertModal`：

```
AlertModal.prototype.destroyAlert = function() {
     ...
} 
```

并以不同的方式注册处理程序：

```
var self = this;
x.onclick = function() {
    self.destroyAlert();
} 
```

如果您随后*覆盖*此类对象的`destroyAlert`属性，则将调用新函数。

# microdata - 微数据：如何在 UL 标签中表示多个奖项？

> ID：12268475
> 
> 赞同：3
> 
> 时间：2012-09-04T17:25:20.503
> 
> 标签：microdata

我想知道我们是否可以在相同的 itemtype 中重复相同的 itemprop，例如：

```
<ul itemscope itemtype="http://schema.org/Person">
   <li itemprop="award">Award 1</li>
   <li itemprop="award">Award 2</li>
   <li itemprop="award">Award 3</li>
</ul> 
```

这是使用微数据指定奖励的正确方法吗？改用 itemprop**奖励**怎么样？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T19:41:54.100

你写的很好，微数据中允许有多个值。

我发现[这](http://foolip.org/microdatajs/live/)很方便测试这种东西。它从您的片段中提取所有奖项，这很好！

正如您[在 schema.org 文档](http://schema.org/Person)中看到的那样，`awards`它是一种遗留拼写，不应再使用。

**更新**：哦，顺便欢迎来到 StackOverflow :-)

# android - Android 服务或线程

> ID：12268477
> 
> 赞同：0
> 
> 时间：2012-09-04T17:25:35.337
> 
> 标签：android, multithreading, service, android-service

嗨，在 android 中，我需要在应用程序运行时每 30 秒向服务器发送一次请求，而不会干扰用户。建议在服务或线程中执行此操作，还是在具有新线程的服务中执行此操作？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:34:16.570

退房[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)（正如柴图所说）以及[`IntentService`](http://developer.android.com/reference/android/app/IntentService.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:35:07.390

我建议您使用服务而不是创建一个线程。Android 开发者网站声明如下：

> 请注意，服务与其他应用程序对象一样，在其托管进程的主线程中运行。这意味着，如果您的服务要执行任何 CPU 密集型（例如 MP3 播放）或阻塞（例如网络）操作，它应该生成自己的线程来完成这项工作。更多信息可以在进程和线程中找到。IntentService 类可作为 Service 的标准实现使用，它有自己的线程来安排要完成的工作。

由于服务在 UI 线程中运行，您应该在服务中创建一个新线程，该线程每 30 秒向服务器发出一次请求。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:29:41.610

最好使用[服务](http://developer.android.com/reference/android/app/Service.html)。使用AlarmManager 调用服务。在服务中编写向服务器发送请求的代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T17:33:55.870

**服务：**服务是一个应用程序组件，表示应用程序希望在不与用户交互的情况下执行更长时间运行的操作

While`thread`是一个并发执行单元。您可以将两者用于您的目的，另一个选项是`Runnable`您`Handler`可以每 30 秒调用一次操作或代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T17:42:42.480

我建议您编写一个**[IntentService](http://developer.android.com/reference/android/app/IntentService.html)**而不是一个简单的服务，并在其中编写一个静态方法，以 30 秒的退避时间向服务器发送请求，并在您的活动中启动该服务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-15T02:44:57.200

简单地回答 - “你应该使用服务还是线程？”

服务只是一个组件，即使用户没有与您的应用程序交互，它也可以在后台运行。因此，只有在需要时才应该创建服务。

如果您需要在主线程之外执行工作，但仅在用户与您的应用程序交互时执行，那么您可能应该创建一个新线程而不是服务。

请记住，如果您确实使用服务，默认情况下它仍会在应用程序的主线程中运行，因此如果它执行密集或阻塞操作，您仍应在服务中创建一个新线程。

# ios - 禁止手势触发

> ID：12268479
> 
> 赞同：1
> 
> 时间：2012-09-04T17:25:41.280
> 
> 标签：ios, xcode, ios5, gesture

我的视图上有一个点击手势，我只希望能够在某个点之后和不同的功能运行之后触发。我的解决方案是为点击手势创建一个插座，然后根据需要调用功能`Enabled`设置。代码如下所示，第二个功能是点击手势`TRUE``FALSE`

```
- (IBAction)butt:(id)sender
{
    if(game == FALSE)
    {
        tapges.enabled = FALSE;
        int sec;
        sec = arc4random() % 5;
        if(sec == 0){sec++;}
        sleep(sec);
        tapges.enabled = TRUE;
        game = TRUE;
        gun.hidden = FALSE;
        start = [[NSDate date] timeIntervalSince1970];
    }

}

- (IBAction)tap:(id)sender
{
    if(game == TRUE)
    {
        end = [[NSDate date] timeIntervalSince1970];
        double total = end - start;
        NSString *myString = [NSString stringWithFormat:@"%lf", total];
        ss.text = myString;
        game = FALSE;
        gun.hidden = TRUE;
        tapges.enabled = FALSE;
    }
} 
```

但是，它似乎不起作用。即使在第一个功能设置后，`tapges.enabled = FALSE`如果您在它到达之前点击`tapges.enabled = TRUE`它仍然只是在对接功能运行后将点击功能排队运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:37:33.707

[有一种方法可以通过使用UIGestureRecognizerDelegate](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIGestureRecognizerDelegate)方法来防止 UIGestureRecognizer 触发（或在触发之前调用另一个函数），`gestureRecognizerShouldBegin`但我认为问题更多是逻辑问题。

不确定我是否完全理解您的任务，但不会更简单，例如：

```
- (IBAction)butt:(id)sender
{
    if(game == FALSE)
    {
     [self callOtherMethod];
    }
} 
```

或者

```
- (IBAction)butt:(id)sender
{
    if(game == FALSE)
    {
     //do set up
    } else {
     // do other setup
    }
} 
```

# php - 检查一个键是否存在并从PHP中的数组中获取相应的值

> ID：12268482
> 
> 赞同：24
> 
> 时间：2012-09-04T17:26:03.230
> 
> 标签：php, arrays

知道如何检查一个键是否存在，如果存在，然后从 php.ini 中的数组中获取该键的值。

例如

我有这个数组：

```
$things = array(
  'AA' => 'American history',
  'AB' => 'American cooking'
);

$key_to_check = 'AB'; 
```

现在，我需要检查**$key_to_check 是否**存在，如果存在，则获取一个对应的值，在这种情况下将是**美式烹饪**

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-04T17:27:17.877

```
if(isset($things[$key_to_check])){
    echo $things[$key_to_check];
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-10-13T05:57:44.150

I know this question is very old but for those who will come here It might be useful to know that in php7 you can use [Null Coalesce Operator](https://wiki.php.net/rfc/isset_ternary)

```
if ($value = $things[ $key_to_check ] ?? null) {
      //Your code here
} 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-09-04T17:27:42.450

```
if (array_key_exists($key_to_check, $things)) {
    return $things[$key_to_check];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-04T17:27:41.677

最简单的方法是这样做：

```
if( isset( $things[ $key_to_check ]) ) {
   $value = $things[ $key_to_check ];
   echo "key {$key_to_check} exists. Value: {$value}";
} else {
   echo "no key {$key_to_check} in array";
} 
```

你得到通常的价值：

```
$value = $things[ $key_to_check ]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-24T08:27:30.137

isset() 将返回：
- - -`**true** if the **key exists and the value is != NULL**`
`**false** if the **key exists and value == NULL**`
`**false** if the **key does not exist**`

array_key_exists() 将返回：
- -`**true** if the **key exists**`
`**false** if the **key does not exist**`

因此，如果您的值可能为 NULL，则正确的方法是`array_key_exists`. 如果您的应用程序不区分 NULL 和无键，则两者都可以，但`array_key_exists`始终提供更多选项。

在以下示例中，数组中没有任何键返回 NULL，但给定键的 NULL 值也是如此。这意味着它实际上与`isset`.

直到 PHP 7 才添加空合并运算符 (??)，但这可以追溯到 PHP 5，也许是 4：

```
$value = (array_key_exists($key_to_check, $things) ? $things[$key_to_check] : NULL); 
```

作为一个函数：

```
function get_from_array($key_to_check, $things)
    return (array_key_exists($key_to_check,$things) ? $things[$key_to_check] : NULL); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-04T17:28:23.280

只需使用`isset()`，如果您想将其用作函数，可以按如下方式使用：

```
function get_val($key_to_check, $array){
    if(isset($array[$key_to_check])) {
        return $array[$key_to_check]);
    }
} 
```

# c# - 带有包含动态变量的 where 子句查询的 C# Linq 查询

> ID：12268483
> 
> 赞同：0
> 
> 时间：2012-09-04T17:26:15.883
> 
> 标签：c#, .net, linq-to-entities

我在 c# 中有一个实体对象。它查询一个名为 FBApi 的数据库表。该表存储整数年和整数月。我的函数需要返回大于传入参数的所有记录。

```
public query(int myYear, int myMonth){
   var context = new MCSSUtility.Entities();
   return context.FBApis.Where(p => p.month == month && p.year == year);
} 
```

我正在考虑将整数转换为 DateTime 对象，但我不确定如何将 where 子句动态转换为 Datetime 变量？

```
public query(int myYear, int myMonth){
   DateTime my = new DateTime(myYear,myMonth,1);
   var context = new MCSSUtility.Entities();
   return context.FBApis.Where(p => new DateTime(p.year,p.month,1) >= my);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:30:18.613

请试试这个：

```
 public query(int myYear, int myMonth){
               DateTime my = new DateTime(myYear,myMonth,1);
               var context = new MCSSUtility.Entities();
               return context.FBApis.Where(p => EntityFunctions.CreateDateTime(p.year, p.month, 1, 0, 0, 0)  >= my);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:32:15.297

首先尝试选择一个具有两个属性的匿名对象：您的 FBApi 对象和您构造的日期时间：

```
return context.FBApis
.Select(s=>new{MyFBAPIObject=s,MyDateTime=newDateTime(s.Year,s.Month,1)})
.Where(w=>w.MyDateTime>=my)
.Select(s2=>s2.MyFBAPIObject); 
```

# php - PHP 运算符 && 和 "and" 的区别

> ID：12268487
> 
> 赞同：5
> 
> 时间：2012-09-04T17:26:33.543
> 
> 标签：php

> **可能重复：**
> [“AND”与“&&”作为运算符](https://stackoverflow.com/questions/2803321/and-vs-as-operator)

很抱歉这个非常基本的问题，但我一周前才开始学习 PHP，在 google/stackoverflow 上找不到这个问题的答案。

我经历了以下程序：

```
$one = true;
$two = null;
$a = isset($one) && isset($two);
$b = isset($one) and isset($two);

echo $a.'<br>';
echo $b; 
```

它的输出是：

```
false
true 
```

我读过&&/并且是一样的。两者的结果有何不同？请问有人能说出真正的原因吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T17:30:02.170

原因是[运算符优先级](http://php.net/manual/en/language.operators.precedence.php)。在您使用的三个运算符中`&&`，`and`& `=`，优先顺序是

*   `&&`
*   `=`
*   `and`

因此`$a`，在您的程序中按预期计算但对于`$b`, 语句`$b = isset($one)`首先计算，给出了意想不到的结果。它可以固定如下。

```
$b = (isset($one) and isset($two)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:31:06.010

这就是操作员分组的方式

```
$one = true;
$two = null;
$a = (isset($one) && isset($two));
($b = isset($one)) and isset($two);

echo $a.'<br>';
echo $b; 
```

这就是为什么它的第一个返回 false 而第二个返回 true 的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:30:03.757

请参阅： [http ://www.php.net/manual/en/language.operators.logical.php](http://www.php.net/manual/en/language.operators.logical.php)

它解释了“and”与“&&”的不同之处在于操作顺序不同。在这种情况下，分配首先发生。因此，如果您要这样做：

```
$b = (isset($one) and isset($two)); 
```

你最终会得到预期的结果。

# jquery - Cookie 未在 Chrome 跨域发布中发送

> ID：12268490
> 
> 赞同：3
> 
> 时间：2012-09-04T17:26:50.127
> 
> 标签：jquery, google-chrome, cross-domain, cors

我想使用 POST 提供跨域服务。我可以看到 preflight OPTIONS 调用成功，但是当我发布时，cookie 没有在 Chrome 中发送。相同的 javascript 和服务器代码适用于 Firefox 和 Safari。可能是什么问题呢？以下是详细信息：

请求 URL：http://j.test.com/Post
请求方法：OPTIONS
状态码：200 OK
请求标头view source
Accept: */*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q =0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:origin, x-requested-with, content-type, accept
Access-Control-Request -方法：POST
连接：keep-alive
主机：j.test.com
来源：http://www.amazon.com参考
：http://www.amazon.com/Gone-Girl-A-Novel-ebook/dp /B006LSZECO/ref=pd_rhf_gw_s_ts_2
User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11

响应头
Access-Control-Allow-Credentials:true
Access-Control-Allow-Headers:origin, x-requested-with, content-type, accept
Access-Control-Allow-Methods:POST, OPTIONS
Access-Control-Allow-Origin :http://www.amazon.com
Access-Control-Max-Age:1728000
Connection:keep-alive
Content-Length:0
Date:Tue, 04 Sep 2012 16:44:48 GMT
服务器:nginx

我使用 jQuery：

```
 jQuery.ajax({
     type: "POST",
     url: "http://j.test.com/Post",
     xhrFields: {
        withCredentials: true
     },
     data: {
            referringUrl: document.URL
           },
     success: function(data) {
     },
     error: function (responseData, textStatus, errorThrown) {
     }
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T09:08:09.840

您必须将标志 withCredentials 设置为 true ( [http://techblog.constantcontact.com/software-development/using-cors-for-cross-domain-ajax-requests/](http://techblog.constantcontact.com/software-development/using-cors-for-cross-domain-ajax-requests/) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T18:49:29.807

您可能还需要`crossDomain: true`在您的`jQuery.ajax()`电话中。

# rest - 使用 REST API 卷曲

> ID：12268491
> 
> 赞同：1
> 
> 时间：2012-09-04T17:26:51.467
> 
> 标签：rest, curl

我想使用 curl for Mac 测试 API。

根据 REST API 文档/论坛，URL 应如下所示：

```
 http://localhost:8080/sdpapi/request/?OPERATION_NAME=ADD_REQUEST&<your API key>&<Operation>    <Details><requester>Me</requester><subject>Test</subject><description>Testing Curl Input</description></Details></Operation> 
```

这是我为 curl 命令行输入提出的建议：

```
curl -X POST -d "OPERATION_NAME=ADD_REQUEST&TECHNICIAN_KEY=0...87&INPUT_DATA=<Operation><Details><requester>Me</requester><subject>Test</subject><description>Testing curl input</description></Details></Operation>" http://myserver.mydomain.org/sdpapi/request/ 
```

我还没有尝试过，因为我对此很陌生，而且我确信有问题。这看起来不错，我应该试一试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T02:58:44.183

想通了： curl -d "OPERATION_NAME=ADD_REQUEST&TECHNICIAN_KEY=xxxxxxxxxx&INPUT_DATA=TestData.xml" [http://xxx.xxx.xx.xx/sdpapi/request/](http://xxx.xxx.xx.xx/sdpapi/request/)

# php - 尝试在 PHP 中将文件压缩为 ZIP 的问题

> ID：12268492
> 
> 赞同：-1
> 
> 时间：2012-09-04T17:26:52.047
> 
> 标签：php, zip

我有一个代码，我试图将多个文件压缩成一个 zip。这在 PHP 和 MySQL 的帮助下，因为我将链接保存在 MySQL 表中。问题是未创建 zip 文件。这是代码：

```
<?php 

mysql_select_db("assignments",$conectar);  
    $result = mysql_query("SELECT * FROM pedimento"); 

<?php 

$enzipado = new ZipArchive(); 
if ($enzipado->open("activos.zip", ZIPARCHIVE::CREATE )!==TRUE) { 
    exit("No se pudo abrir el archivo\n"); 
} 
while($row = mysql_fetch_array($result)) {  
$enzipado->addFile($row['DepAduanero']); 
    }; 
$enzipado->close(); 
?> 
<a href="activos.zip">Descargar</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:54:25.217

始终建议您在使用它们之前检查您的文件是否存在。所以使用 file_exists()

[http://php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

或者，也许您的查询没有返回任何行 oO

# objective-c - 将函数移动到单独的类

> ID：12268494
> 
> 赞同：1
> 
> 时间：2012-09-04T17:27:02.077
> 
> 标签：objective-c, ios, xcode

我一直在构建一个 iOS 应用程序，我的一个 ViewController 已经变得充满了如下功能：

```
CGPoint randomPoint()
{
  //Code goes here
} 
```

我现在想将它们移到 A 类（或协议，我不确定什么对我有用），将其导入 VC 并像以前一样调用：

```
p=randomPoint(); //NOT A.randomPoint(), [A randomPoint] or whatever 
```

我尝试使用 C++ 类模板，但它在 CGPoint、CGRect 等方面存在问题。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:38:01.443

如果您想将 C 函数放在您所描述的那样，最佳做法是将它们移动到具有有意义名称的单独 .h 文件中。例如 MyGeometry.h

确保为函数提供描述性名称，例如：

```
static inline CGPoint CGPointMakeRandom() {
    // your code
    return point;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:39:09.787

您可以使用类方法创建一个单独的目标 c 类。

在头文件中声明这样的方法（假设您要调用它

```
#import <UIKit/UIKit.h>

@interface pointHelper : UIViewController

     +(CGPoint) randomPoint; 
```

然后在 .m 文件中

```
 @implementation pointHelper
     +(CGPoint) randomPoint{
         //// implementation
     } 
```

当您想在另一个文件中调用该方法时。

```
#import "pointerHelper.h" 
```

然后，您将能够访问这样的方法...

```
CGPoint thePoint = [pointHelper randomPoint]; 
```

或者如果你有一个类的对象..

```
CGPoint thePoint = [[pointHelperObject class] randomPoint]; 
```

这是一种更好的方法，因为它使您的代码更加清晰。[pointHelper randomPoint] 告诉您为什么要调用该方法以及它在做什么。您正在使用一个具有点实用程序的类，并且您正在使用它来抓取一个随机点。您不需要对象来调用此方法，因为它是由类抽象控制的。请注意不要尝试在类方法中访问类的属性。

# ajax - 对 Facebook 图形的 Ajax 请求在 IE 上不起作用

> ID：12268496
> 
> 赞同：1
> 
> 时间：2012-09-04T17:27:06.670
> 
> 标签：ajax, facebook, json, facebook-graph-api, jsonp

我正在开发一个 Facebook 应用程序。我正在尝试获取 url 的喜欢，因为我正在遍历一组 url 并将其添加到应该包含喜欢的 div 中。这是我的ajax请求：

```
 $.ajax({
                  type: "GET",
                  cache: false,
                  url: 'https://graph.facebook.com/?id='+videoUrl,
                  dataType : "json",
                  async: false,
                  header: "application/json",
                  success: function(data) {
                      if(data.shares == null) {
                          likeCount = 0;
                      } else {
                          likeCount = data.shares;
                      }
                  }
          }); 
```

这在 Chrome、Firefox、Safari 上运行良好。它不适用于任何IE。我认为这是一个缓存问题。请注意，我在请求中添加了 cache: false 。我尝试了 JSONP，我得到了喜欢，但我无法在请求之外访问它。我还尝试将其添加到我的 php 中：

```
 header("Cache-Control: post-check=0, pre-check=0", false); 
```

它仍然不起作用。请帮我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T06:07:17.307

我遇到了类似的问题。这对我有用：

```
$.get('https://graph.facebook.com/?id='+videoUrl+'&callback=?', function(data) {
                  if(data.shares == null) {
                      likeCount = 0;
                  } else {
                      likeCount = data.shares;
                  }
              }, 'json'); 
```

"&callback=?" 在 url 中导致 jQuery 将其视为 JSONP。请参阅[JSON 和 JSONP 之间有什么区别？](https://stackoverflow.com/questions/2887209/what-are-the-differences-between-json-and-jsonp) 比我在这里提供的更详细的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:06:16.090

这是因为 IE 对 CORS 的支持很差，所以只能在某些场景下工作。为了获得最佳支持，您应该通过 JS SDK 使用 Facebook 的 FB.api。

# c# - 如何将制表符分隔的文件读入 List 数组？

> ID：12268503
> 
> 赞同：2
> 
> 时间：2012-09-04T17:27:26.640
> 
> 标签：c#, winforms

我是第一次启动 Visual C# (2010 Express)，并且为 WindowsFormsApplication 创建了一个新项目。尚未编写任何代码，但我创建了一个按钮并将其放在 Form1 上。然后，我双击该按钮并被带到您编写按下/单击按钮时发生的情况的代码部分。

我想做的第一件事是从 LARGE 制表符分隔的文本文件 (30MB) 中读取数据。文本文件包含 7 个结构化数据列，如姓名、年龄、喜欢的颜色、动物等。文本格式没有什么棘手或花哨的。我正在使用下面的代码：

```
File.ReadLines(sourceFilePath)
.Select(line => line.Split('\t'))
.ToArray(); 
```

但我更基本的问题是如何建立和定义 File 和 sourceFilePath？使用上面的代码，我得到“当前上下文中不存在名称‘文件’。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T17:33:22.800

您需要将以下行添加到 C# 文件的顶部：

```
using System.IO; 
```

这将允许使用 System.IO 命名空间中的 File 类。

至于定义sourceFilePath，这只是一个变量，您可以声明并设置为您需要的任何文件路径，例如

```
string sourceFilePath = @"c:\data\file.csv"; 
```

注意在字符串文字前使用@；这可以防止反斜杠被视为转义序列的开始。相反，您可以转义 bakslashes，例如

```
string sourceFilePath = "c:\\data\\file.csv"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:36:17.123

如果要按制表键拆分，则可以尝试使用 ReadAllText 方法，然后使用 Split 方法，在其中定义分隔符（按制表符）：

```
 string[] delimitedByTab = File.ReadAllText(@"file").Split('\t').ToArray(); 
```

并使用 System.IO；文件类的命名空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:34:55.747

File 类驻留在 System.IO 命名空间中。您可以通过以下方式在应用程序中利用它：

```
using System.IO; 
```

至于定义 sourceFilePath 的内容，您将需要将值硬编码到固定位置，这并不总是可取的，或者设计一种机制让用户指定该路径，可能通过各种 CommonDialogs 之一可用的。对 CommonDialogs 的一些研究应该有助于推动您进一步开发项目。

# java - 在 Groovy 中模拟 HttpClient

> ID：12268506
> 
> 赞同：0
> 
> 时间：2012-09-04T17:27:32.863
> 
> 标签：java, grails, groovy, junit, mocking

> **可能重复：**
> [单元测试来自 Groovy 测试用例的 Java 类中的静态方法](https://stackoverflow.com/questions/12218699/unit-testing-a-static-method-in-a-java-class-from-groovy-test-case)

我正在尝试使用 groovy 对 java 类进行单元测试，其中`Helper`有一个静态方法，在其中`HttpClient`获取并`executeMethod`调用它。为了对这个类进行单元测试，我试图`httpClient.executeMethod()`在 Groovy 测试用例中模拟它，但我无法正确模拟它。

下面是Java类

```
public class Helper{

    public static message(final String serviceUrl){   

        HttpClient httpclient = new HttpClient();
        HttpMethod httpmethod = new HttpMethod();

        // the below is the line that iam trying to mock
        String code = httpClient.executeMethod(method);

    }
} 
```

关于如何从 Groovy 对这个静态方法进行单元测试的任何想法？由于`httpClient`对象在类方法中，我如何在 Groovy 测试用例中模拟这个对象？

这是我到目前为止的测试用例。我试图模拟为空，但没有发生......

```
void testSendMessage(){
    def serviceUrl = properties.getProperty("ITEM").toString()

    // mocking to return null   
    def mockJobServiceFactory = new MockFor(HttpClient)
    mockJobServiceFactory.demand.executeMethod{ HttpMethod str ->
        return null
    }

    mockJobServiceFactory.use {         
        def responseXml = helper.message(serviceUrl)

    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:19:58.423

从 Java 类的静态方法中显式调用 HttpClient 构造函数的设计将很难模拟以进行测试。Grails 模拟工具没有帮助，因为它们只能模拟 Groovy 代码中的调用，而不是 Java。如果您的助手类是用 Groovy 编写的，那么您可能会有更多的运气。

更好的设计是使用带有实例方法而不是静态方法的单例服务（或其他 Spring bean），并使用某种依赖注入，无论是 HttpClient 实例还是某种返回 HttpClients 的工厂对象。在测试中，您可以用一个模拟工厂替换这个工厂。

# c# - 如何捕捉 Label 控件的 Text 属性的变化？

> ID：12268508
> 
> 赞同：0
> 
> 时间：2012-09-04T17:27:38.637
> 
> 标签：c#, asp.net

我正在寻找类似于`OnTextChanged`TextBox 控件的属性的东西。这样，当标签的 Text 值发生变化时，就会调用一个特定的函数来执行我的特定工作。

**标记**

```
 <asp:TextBox ID="TextBox2"   runat="server"></asp:TextBox>

    <asp:Label ID="Label1" runat="server"  Text="Label"></asp:Label>

    <asp:SliderExtender ID="SliderExtender1"  TargetControlID="TextBox2"  BoundControlID="Label1" Maximum="200" Minimum="100" runat="server">
    </asp:SliderExtender> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:36:00.300

改为处理滑块的相应 OnChange 事件。标签文本可以更改的唯一方法是您的代码更改它。

**编辑**

嗯。您可以尝试将滑块绑定到不可见的 asp:TextBox，然后使用其中的 OnChange 事件来更新您的标签并调用您的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:50:32.763

观察`'input'`事件而不是`'change'`

```
jQuery('#textboxid').live('input', function() {
    // do your stuff
}) 
```

或使用`'change'`事件为您的滑块

```
$('#sliderid').live('change', function() {
     $('#textboxid').val('some text').trigger('change');
}); 
```

可能是这种方式而不是更改事件。（该`'change'`事件无法正常工作，但它`'input'`是完美的。）

```
$('#your_textbox').bind('input', function() {
    /* This will be fired every time, when textbox's value changes. */
}); 
```

这个 jQuery 代码可以立即捕捉到任何元素的变化，

```
$('.myElements').each(function() {
    // Save current value of element
    $(this).data('oldVal', $(this).val());

    // Look for changes in the value
    $(this).bind("propertychange keyup input paste", function(event){
    // If value has changed...
        if ($(this).data('oldVal') != $(this).val()) {
            // Updated stored value
            $(this).data('oldVal', $(this).val());

            // Do action
            ....
        }
    });
}); 
```

通过[phatmann](https://stackoverflow.com/a/2885716/)

# java - 导出带有内置到单独库（jar）中的链接源文件夹的插件似乎不起作用

> ID：12268512
> 
> 赞同：1
> 
> 时间：2012-09-04T17:27:52.873
> 
> 标签：java, eclipse, eclipse-plugin, export, eclipse-jdt

我有以下设置：有几个包含通用实用程序和基类的插件项目，例如：

1.  我的.util
2.  我的.util.ui

我有一个使用它们的插件。但是，我不想将这些实用程序类作为插件导入，而是使用链接的源文件夹。这根本不是问题，“工作负载”插件例如

*   my.actual.plugin

所有三个插件都在同一个工作区中，“实际”插件包含通常的“src”源文件夹和以下链接的源文件夹“src.my.util”（链接到 my.util/src）和“ src.my.util.ui”（链接到 my.util.ui/src）。链接的源文件夹绑定到各个输出文件夹（src -> bin、src.my.util -> bin.my.util、src.my.util.ui -> bin.my.util.ui）。

现在，在插件的构建文件（build.properties，或通过清单编辑器）中，我想指定两个实用插件的源构建到单独的 jar 中。因此，在“运行时”下的清单编辑器中，我添加了两个额外的 jar（“New...”->“my.util.jar”和“my.util.ui.jar”）并在“构建”下设置这些 jar 的适当链接 src 文件夹。生成的 build.properties 文件将类似于：

```
 source.. = src/
    output.. = bin/
    source.my.util = src.my.util/
    output.my.util = bin.my.util/
    source.my.util.ui = src.my.util.ui/
    output.my.util.ui = bin.my.util.ui/
    jars.compile.order = .,\
                           my.util.jar,\
                           my.util.ui.jar
    bin.includes = META-INF/,\
                    my.util.jar,\
                    my.util.ui.jar 
```

将其导出为可运行的 jar 是可行的（为简单起见，我们假设它包含一个具有 main 方法的类等......）。

但是，尝试使用“可部署的插件或片段”导出向导导出它确实会出现如下错误消息：

```
 <workspace>\.metadata\.plugins\org.eclipse.pde.core\temp\org.eclipse.pde.container.feature\compile.org.eclipse.pde.container.feature.xml:4: The following error occurred while executing this line:
        <workspace>\my.actual.plugin\build.xml:167: The following error occurred while executing this line:
    <workspace>\my.actual.plugin\build.xml:138: <workspace>\my.actual.plugin\src.my.util does not exist.
    The following error occurred while executing this line:
    <workspace>\my.actual.plugin\build.xml:167: The following error occurred while executing this line:
    <workspace>\my.actual.plugin\build.xml:138: <workspace>\my.actual.plugin\src.my.util does not exist. 
```

即使我在导出向导中打开“使用在工作区中编译的类文件”选项，也会出现此错误。

当我不使用单独的运行时 jar 时，它可以工作，但这不是我想要的 ;-)

奇怪的是，当我导出 ant 构建脚本（Export... -> General / Ant Buildfiles）时，路径被正确扩展（从“虚拟”相对链接转换为绝对路径）。并且 ant 脚本可以正确编译。为什么 hack 不能作为插件导出？

我希望有人有一些建议吗？提前致谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T03:19:44.557

我看到没有其他人回答过这个问题，所以我会提供一个你可能不喜欢的答案/意见。

我强烈建议您避免在插件项目中使用链接源文件夹。

您收到您看到的错误的原因是因为 PDE 使用另一种机制来构建项目。它不使用 .classpath 和 .project 文件来确定项目结构。相反，它使用 MANIFEST.MF 和 build.properties。它也不使用 Eclipse 的资源抽象，因此 PDE 无法识别链接文件夹。

您可能会采取一些黑客行为来欺骗 PDE 找到您的链接源文件夹，但这不是一个可移植的解决方案。

相反，我建议将它们分开，以便您拥有多个插件，这样您就不需要复制源文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-12T08:02:24.037

我已经提交了一个错误报告：[https](https://bugs.eclipse.org/bugs/show_bug.cgi?id=457192) ://bugs.eclipse.org/bugs/show_bug.cgi?id=457192 一个相关的错误报告是：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id= 66177](https://bugs.eclipse.org/bugs/show_bug.cgi?id=66177)

我觉得应该解决

# javascript - 如何使用 jQuery 从 DOM 中删除所有单选按钮元素

> ID：12268513
> 
> 赞同：-2
> 
> 时间：2012-09-04T17:27:54.787
> 
> 标签：javascript, jquery, html

这是我的一半 HTML 代码：

```
<fieldset class="amenities"> 
    <legend>Amenities</legend>
    <div class="clr"></div>
    <ul id="amenities">
        <li class="amenity ">
            <input class="am-input" type="checkbox" name="jform[amenities][]" id="jform_amenities0" value="95"  />
            <label class="am-title" for="jform_amenities0" ></label>
        </li>
        <li class="amenity ">
            <input class="am-input" ............... 
```

这是我的 jQuery 代码：

```
$("label[for='jform_amenities5']").addClass("selected");
$("fieldset input:radio").remove();​ 
```

这是[演示](http://jsfiddle.net/9fVTN/)。

我只想从网站上删除所有单选按钮。我使用了该`.remove()`功能，但什么也没发生。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:30:10.567

要删除带有 text = radio 标签的复选框，您必须执行以下操作，

**[现场演示](http://jsfiddle.net/rajaadil/9fVTN/3/)**

```
$("label[for='jform_amenities5']").addClass("selected");
lbl = $("fieldset label:contains('Radio')");
$('#'+ lbl.attr('for')).remove();
$("fieldset label:contains('Radio')").remove();​​​​​​​​​​​​ 
```

如果您想删除您在代码中尝试过的 type = radio 那么您必须使用复选框而不是无线电，因为您的代码中没有无线电控制

```
$("label[for='jform_amenities5']").addClass("selected");

$("fieldset input:checkbox").remove();​ 
```

**[现场演示](http://jsfiddle.net/rajaadil/9fVTN/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:30:28.127

您正在使用*复选框*，而不是单选按钮。因此，要么将输入*类型*设置为`checkbox`：

```
$("fieldset input[type='checkbox']").remove();​ 
```

或者使用[`:checkbox`](http://api.jquery.com/checkbox-selector/)选择器，它是等效的：

```
$("fieldset input:checkbox").remove();​ 
```

**[演示](http://jsfiddle.net/FSETq/)**。

# c - 有没有办法重用pthreads？

> ID：12268514
> 
> 赞同：5
> 
> 时间：2012-09-04T17:27:57.983
> 
> 标签：c, multithreading, pthreads, posix

我有一个被调用数百万次的函数，这个函数所做的工作是多线程的。这是功能：

```
void functionCalledSoManyTimes()
{
  for (int i = 0; i < NUM_OF_THREADS; i++)
  {
    pthread_create(&threads[i], &attr, thread_work_function, (void *)&thread_data[i]);
  }
  // wait
} 
```

每次调用函数时我都会创建线程，并为每个线程提供其数据结构（在算法开始时设置一次）以在`thread_work_function`. `thread_work_function`简单地处理一系列数组，并且结构包含指向这些数组的`thread_data`指针和每个线程负责的索引。

尽管以这种方式对算法进行多线程处理确实将性能提高了 20% 以上，但我的分析表明对 pthread_create 的重复调用会导致显着的开销。

我的问题是：有没有一种方法可以实现我的目标，而无需`pthread_create`每次调用​​函数时都调用？

**问题解决了。**

谢谢你们，我真的很感谢你们的帮助！我已经使用您的提示[在这里编写了一个解决方案。](https://stackoverflow.com/q/12282393/408286)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:30:47.397

只需启动一组固定的线程并使用线程间通信系统（例如环形缓冲区）将数据传递给处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T17:41:35.513

优雅地解决问题并不是那么容易。您可以将静态存储用于线程池，但是如果`functionCalledSoManyTimes`可以从多个线程调用自身会发生什么？这不是一个好的设计。

我要处理这种情况是`pthread_key_create`在第一次调用（使用）时创建一个线程本地存储键，并在给定线程中第一次调用时`pthread_once`将你的线程池存储在那里。您可以提供一个析构函数，当线程存在时将调用该函数，然后该函数可以负责向线程池中的工作线程发出信号以终止它们自己（通过或某种其他机制）。`pthread_setspecific``functionCalledSoManyTimes``pthread_key_create``pthread_cancel`

# algorithm - 使用费马定理的矩阵求幂

> ID：12268516
> 
> 赞同：5
> 
> 时间：2012-09-04T17:28:09.827
> 
> 标签：algorithm, matrix, numbers, exponentiation

就像我们使用费马小定理进行模幂运算一样，我只是想知道有没有这样的快速矩阵求幂方法？我们可以使用费马定理进行矩阵求幂吗？如果没有，那么有没有比分治求幂法更快的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:42:13.213

我会寻找[Octave 的实现](http://www.gnu.org/software/octave/doc/interpreter/Functions-of-a-Matrix.html#Functions-of-a-Matrix)。它给你一些参考。这里有一些链接：

*   [http://epubs.siam.org/doi/abs/10.1137/1020098](http://epubs.siam.org/doi/abs/10.1137/1020098)
*   [http://www.cs.cornell.edu/cv/researchpdf/19ways+.pdf](http://www.cs.cornell.edu/cv/researchpdf/19ways+.pdf)

# javascript - 将文本嵌套在另一个函数中后，它不输出文本

> ID：12268521
> 
> 赞同：0
> 
> 时间：2012-09-04T17:28:37.537
> 
> 标签：javascript, jquery, ajax

我有一个愚蠢的错误，我不知道为什么会发生。

`<p>`基本上我从 AJAX 代码“表 PAGES 存在”中得到返回，如果我在声明后将其放入标签，我可以将其输出到标签，`var response = data;`但不知何故，当`functionResponse`.

谁能告诉我为什么？我是否传递了错误的变量？

```
 $(document).ready(function(){

        function functionResponse (response){

            if (response == "The table PAGES exists"){
                $("p").html(response);

            } 
            } // close of functionResponse      

$("#iForm").submit( function(event){
    event.preventDefault();

    var user = $("input[name=username]").val();
    var password = $("input[name=password]").val();
    var dbName = $("input[name=dbName]").val();
    var server = $("input[name=server]").val(); 

        $.get("1.php", {username: user, password: password, dbName: dbName, server: server },function(data){

            var response = data;            

            functionResponse (response);

                        }) // close of .get

    })

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:52:03.730

由于修剪按照我的建议起作用，因此我将其作为答案输入，并附有以下解释。

您的 get 函数的返回处理程序能够将值分配给 p 标记，因为分配不关心空格，特别是分配 html，浏览器只是忽略所有额外的空格。

它不是将它传递给使其中断的函数，而是字符串比较。浏览器可能不关心 HTML 中的空白，但 JavaScript 在进行字符串比较时非常关心空白。

文本

```
"This is some text" 
```

和

```
"    This is some text    " 
```

当浏览器呈现它们时，它们会显示相同，因为重复的空格会被忽略。但是只要看一下它们，您就会发现它们不是同一个字符串。除非您通过修剪来告诉它，否则 Javascript 不会忽略引导和跟踪您的刺痛的空白。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T17:40:12.293

使用“var”初始化变量只会使其在该范围内可读，因此您尝试将其称为另一个范围，要么将变量移到提交之外，要么取出使其成为全局的“var”。

# templates - 有没有办法用dust.js做不止一级的继承值覆盖？

> ID：12268522
> 
> 赞同：4
> 
> 时间：2012-09-04T17:28:45.407
> 
> 标签：templates, inheritance, dust.js

我正在使用灰尘模板，设计的一个方面一直困扰着我。这让我想知道我是否“做错了”，所以我想我会问 SO 有没有办法在dust.js 中使用块和内联部分创建多级继承？假设您有一个带有布局的基本模板，一个覆盖某些内容的继承模板，然后是另一个从该模板继承的模板，它希望有选择地覆盖某些内容。通常我会想象它通过提供最终覆盖值的最后一个继承模板来工作。然而，内联部分语法似乎只在一个级别上起作用。这是一个人为的例子，应该显示我在说什么。

模板 1 `test_base.dust`：

```
<h1>
{+document_title/}
</h1>
{+content}
<p>Some great content.</p>
{/content} 
```

模板 2 `test_level1.dust`：

```
{>test_base/}
{<document_title}Level 1{/document_title}
{<content}
<p>Other great content</p>
{/content} 
```

模板 3 `test_level2.dust`：

```
{>test_level1/}
{<document_title}Level 2{/document_title} 
```

渲染这些模板我得到以下结果：

```
dust.render('test_base', {}, function(err, data) { console.log(data); } );
"<h1></h1><p>Some great content.</p>"

dust.render('test_level1', {}, function(err, data) { console.log(data); } );
"<h1>Level 1</h1><p>Other great content</p>"

dust.render('test_level2', {}, function(err, data) { console.log(data); } );
"<h1>Level 1</h1><p>Other great content</p>" 
```

我已经阅读了几次文档，但似乎您可以从多个级别继承模板，但您只能覆盖单个模板定义的块。那我是不是“做错了”？有没有办法通过使用块和内联部分的选择性覆盖来完成多级继承？还有其他方法可以做到这一点并保持模板干燥吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:54:20.827

不幸的是，似乎不支持这种继承模型。在linkedin fork上找到了这个讨论：[https ://github.com/linkedin/dustjs/issues/101](https://github.com/linkedin/dustjs/issues/101)

该讨论引用了文档中的特定段落：

> ...内联部分从不输出内容本身，并且对于定义它们的模板始终是全局的， *因此它们的定义顺序没有意义*。它们被传递给定义它们的模板调用的所有模板。

所以我对此有两种解释：一种顺序是不确定的，可能基于模板的编译方式。第二种可能的解释是全局定义总是取代定义它的模板和模板调用的任何模板。如果这是正确的解释，那么如果父模板中的内联部分覆盖的块在继承层次结构中处于同一级别或更高级别，则它们将始终“获胜”。这与我所期望的相反，并且使得使用内联部分进行多级继承是不可能的（至少使用相同的命名块）。

似乎这是一个死胡同，关于如何在 Dust 中实现这种行为的任何其他想法？

# python - 较大数的非相异质因数

> ID：12268526
> 
> 赞同：4
> 
> 时间：2012-09-04T17:29:01.773
> 
> 标签：python, math, numpy

我编写并使用这个函数来产生一个数字的素数：

```
import numpy as np
from math import sqrt

def primesfrom3to(n):
    """ Returns a array of primes, p < n """
    assert n>=2
    sieve = np.ones(n/2, dtype=np.bool)
    for i in xrange(3,int(n**0.5)+1,2):
        if sieve[i/2]:
            sieve[i*i/2::i] = False
    return np.r_[2, 2*np.nonzero(sieve)[0][1::]+1]    

def primefactors(tgt,verbose=True):
    if verbose: 
        print '\n\nFinding prime factors of: {:,}'.format(tgt)

    primes=primesfrom3to(sqrt(tgt)+1)

    if verbose:
        print ('{:,} primes between 2 and square root of tgt ({:.4})'.
                      format(len(primes),sqrt(tgt))) 

    return [prime for prime in primes if not tgt%prime] 
```

如果我用[Project Euler #3](http://projecteuler.net/problem=3)中的值调用它，它会成功生成不同素数的列表：

```
>>> print primefactors(600851475143)
Finding prime factors of: 600,851,475,143
62,113 primes between 2 and square root of tgt (7.751e+05)
[71, 839, 1471, 6857] 
```

这与[Wolfram Alpha](http://www.wolframalpha.com/input/?i=600851475143%20prime%20factors)为主要因子产生的结果一致。（最大的是 Project Euler #3 的正确答案）

现在假设我想要那个数字 x 1e6 的因数：

```
>>> print primefactors(600851475143*1000000)
Finding prime factors of: 600,851,475,143,000,000
39,932,602 primes between 2 and square root of tgt (7.751e+08)
[2, 5, 71, 839, 1471, 6857] 
```

对于这个更大的数字，[Wolfram Alpha 产生](http://www.wolframalpha.com/input/?i=600851475143000000%20prime%20factors)：

```
2**6 * 5**6 * 71 * 839 * 1471 * 6857 
```

有没有一种简单的方法来修改我的代码，我可以计算`2`和`5`作为较大数字的素数的大小？

（我对此的原始代码或算法感兴趣——不是指向可以为我做这件事的库的指针，谢谢！）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T18:10:40.200

执行此操作的传统方法是依次划分每个主要因素，然后递归您的因式分解方法。这通常比筛选所有素数要快，因为您只关心实际除数的（少数）素数。

当然，还有很多很多比试除法更好的素因式分解算法；人们通常使用诸如二次筛之类的东西来处理大范围的数字，在小端使用 Pollard 的 rho 方法，在大端使用数域筛。这些都*明显*要复杂得多。

* * *

由于您事先筛选了所有素数，因此您不必关心算法的效率。鉴于此，最简单的方法是*事后*计算多重性，这就是@tobias_k 所写的。你也可以把它分解成一个单独的函数

```
def multiplicity(n, p):
    i = 0
    while not n % p:
        i, n = i+1, n/p
    return i 
```

进而

```
>>> n = 600,851,475,143,000,000
>>> n = 600851475143000000
>>> factors = [2, 5, 71, 839, 1471, 6857]
>>> [(f, multiplicity(n,f)) for f in factors]
[(2, 6), (5, 6), (71, 1), (839, 1), (1471, 1), (6857, 1)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T18:04:17.827

一旦你有了不同的主要因素，你可以做这样的事情：

```
factors = []
for f in distinct_prime_factors:
    while n % f == 0:
        factors.append(f)
        n /= f 
```

现在`factors`将保存所有主要因素的列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T00:40:48.213

恭敬地，这样更容易（而且更快，更有效）：

```
from collections import defaultdict
from math import sqrt

def factor(n):
    i = 2
    limit = sqrt(n)    
    while i <= limit:
      if n % i == 0:
        yield i
        n = n / i
        limit = sqrt(n)   
      else:
        i += 1
    if n > 1:
        yield n

def pfac(num):
    d=defaultdict(int)
    for f in factor(num):
        d[f]+=1

    terms=[]
    for e in sorted(d.keys()):
        if d[e]>1:
            terms.append('{:,}^{}'.format(e,d[e]))
        else:
            terms.append('{:,}'.format(e))

    print ' * '.join(terms),'=','{:,}'.format(num)           

pfac(600851475143*1000000-1)
pfac(600851475143*1000000)
pfac(600851475143*1000000+1) 
```

印刷：

```
83 * 127 * 57,001,373,222,939 = 600,851,475,142,999,999
2^6 * 5^6 * 71 * 839 * 1,471 * 6,857 = 600,851,475,143,000,000
3^2 * 19 * 103 * 197 * 277 * 16,111 * 38,803 = 600,851,475,143,000,001 
```

# c++ - getline 的实现（ istream& is, string& str ）

> ID：12268538
> 
> 赞同：6
> 
> 时间：2012-09-04T17:29:52.653
> 
> 标签：c++, string

我的问题很简单，getline(istream, string) 是如何实现的？如何解决像 getline (char* s, streamsize n) 这样的固定大小的 char 数组的问题？他们是否使用临时缓冲区和对 new char[length] 或其他简洁结构的多次调用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T17:32:44.403

`getline(istream&, string&)`以读取一行的方式实现。它没有明确的实现；每个图书馆可能彼此不同。

可能的实现：

```
istream& getline(istream& stream, string& str)
{
  char ch;
  str.clear();
  while (stream.get(ch) && ch != '\n')
    str.push_back(ch);
  return stream;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T17:41:42.857

@SethCarnegie 是对的：不止一种实现是可能的。C++ 标准没有说明应该使用哪个。

但是，这个问题仍然很有趣。这是一个经典的计算机科学问题。当一个人事先不知道要分配多少内存时，在哪里以及如何分配内存？

1.  一种解决方案是将字符串的字符记录为单个字符的*链接列表*。这既不节省内存也不快速，但它可以工作，很健壮，并且编程相对简单。但是，标准库不太可能以这种方式实现。

2.  第二种解决方案是分配一个固定长度的缓冲区，例如 128 个字符。当缓冲区溢出时，您分配一个双倍长度、256 个字符的新缓冲区，然后将旧字符复制到新存储中，然后释放旧字符。当新缓冲区溢出时，您再次分配一个更新的双倍长度缓冲区，512 个字符，然后重复该过程；等等。

3.  第三种解决方案结合了前两种。维护一个字符数组的链表。列表的前两个成员（比如说）每个存储 128 个字符。第三个商店256。第四个商店512，等等。这需要比其他编程更多的编程，但可能比其他任何一个都更可取，具体取决于应用程序。

可能的实现列表还在继续。

关于标准库实现，@SteveJessop 补充说“[a] 标准库的字符串不允许实现为 (1)，因为`operator[]`字符串的复杂性要求。在 C++11 中不允许实现为（3）要么，因为字符串的连续性要求。C++ 委员会表示相信，在他们添加连续性要求时，没有有效的 C++ 实现（3）。当然，`getline`可以暂时用之前的字符做它喜欢的事情将它们全部添加到字符串中，但标准确实说明了字符串可以做什么。”

添加是相关的，因为虽然`getline`可以通过多种方式暂时存储其数据，但如果数据的最终目标是字符串，这可能与`getline`'s 的实现有关。@SteveJessop 进一步补充说，“对于字符串本身，实现几乎必须是 (2)，除了它们可以选择自己的扩展率；只要它们乘以某个常数，它们就不必每次都加倍。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-05T03:57:17.053

正如@3bdalla 所说， thb 的实现不能作为 gnu 实现。因此，我编写了自己的实现，它的工作方式与 gnu 的类似。我不知道这个变体会出现什么错误，所以需要对其进行测试。我的getline实现：

```
std::istream& getline(std::istream& is, std::string& s, char delim = '\n'){
    s.clear();
    char c;
    std::string temp;
    if(is.get(c)){
        temp.push_back(c);
        while((is.get(c)) && (c != delim))
            temp.push_back(c);
        if(!is.bad())
            s = temp;
        if(!is.bad() && is.eof())
            is.clear(std::ios_base::eofbit);
    }
    return is;
} 
```

# google-apps-script - 作为 Web 应用程序发布的项目和多个 doGet() 脚本文件——需要澄清

> ID：12268539
> 
> 赞同：1
> 
> 时间：2012-09-04T17:29:52.640
> 
> 标签：google-apps-script

让我提供一些上下文：

我创建了一个名为“联系表”的独立项目。在这个项目中，我创建了 2 个脚本，分别称为“Script1”和“Script2”。对于“Script1”，我使用 GUI Builder 创建一个表单。对于“Script2”，我创建了另一个表单，这次是在代码中。这两个脚本都调用“doGet()”函数。

无论如何，我将“Script1”发布为一个网络应用程序，单击 URL，一切都在那里。完美的！现在，让我感到困惑的问题来了。当我将“Script2”发布为 Web 应用程序时，Web 应用程序 URL 将我带到“Script1”Web 应用程序，什么！？如果我单击“测试最新代码的网络应用程序”链接，我只会看到“Script2”网络应用程序。

为什么是这样？所以我的问题是这个？

您可以像我设置的那样使用 1 个项目发布 2 个 Web 应用程序吗？如果可以，两个 Web 应用程序之间如何共享资源？

我知道要将脚本部署为 Web 应用程序，它必须包含 doGet(e) 函数。项目如何使用 doGet() 函数处理多个文件？

基本上我对项目、项目中的多个文件以及项目中的 Web 应用程序部署感到困惑。我从 Google 阅读了 Google App Scripts Documentation，但它没有提供我正在寻找的说明。如果有人对此有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:05:40.997

项目中文件的目的是为了方便开发人员简单地分离代码。所以，如果你有两个同名的函数，很难说哪个会被执行。

如果您想拥有两个 Web 应用程序，则必须拥有两个不同的项目。您不能将它们放在同一个项目中。

# java - EXCEPTION_ACCESS_VIOLATION 帮助（jLabel 和 MATLAB 部署的 JAR 文件）

> ID：12268546
> 
> 赞同：2
> 
> 时间：2012-09-04T17:30:15.120
> 
> 标签：jlabel 中读取文本 2）从, jar, matlab, java, matlab, exception, jar, jlabel

嗨，我的程序随后需要执行两个操作：1）从[jlabel 中读取文本 2）从](/questions/tagged/jlabel "显示标记为“jlabel”的问题")[jar](/questions/tagged/jar "显示标记为“jar”的问题")文件中 实例化一个类。jar 文件是从[matlab](/questions/tagged/matlab "显示标记为“matlab”的问题") R2008B 构建和打包的。

当执行两个操作之一时它运行良好，但由于某种原因，一旦执行两个操作就会崩溃。

对于我应该从哪里开始解决这个问题的任何帮助或建议，我将不胜感激。

我得到的错误消息：

```
# An unexpected error has been detected by Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6d8b1117, pid=5648, tid=3568
#
# Java VM: Java HotSpot(TM) Client VM (10.0-b19 mixed mode windows-x86)
# Problematic frame:
# C  [jvm.dll+0x1117]
#
# An error report file with more information is saved as:
# C:\Users\Emily\Documents\NetBeansProjects\SourceTraceGUI2012\hs_err_pid5648.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#
Opening log file:  C:\Users\Emily\AppData\Local\Temp\java.log.5648
Java Result: 1

#
# An unexpected error has been detected by Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6d8b1117, pid=1240, tid=4532
#
# Java VM: Java HotSpot(TM) Client VM (10.0-b19 mixed mode windows-x86)
# Problematic frame:
# C  [jvm.dll+0x1117]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

#Current thread (0x0840f800):  JavaThread "Unknown thread"   #[_thread_in_native,id=4532,stack(0x0b6d0000,0x0bed0000)]

siginfo: ExceptionCode=0xc0000005, writing address 0x00000150

Registers:
EAX=0x00000000, EBX=0x0840f8f4, ECX=0x0840f7dc, EDX=0x00000004
ESP=0x0becf1cc, EBP=0x0becf1d0, ESI=0x00000000, EDI=0x00000000
EIP=0x6d8b1117, EFLAGS=0x00010246

Top of Stack: (sp=0x0becf1cc)
0x0becf1cc:   0840f8f4 0becf1ec 6d9c8c33 00000000
0x0becf1dc:   00000006 082f1c28 0840f8f4 00000000
0x0becf1ec:   0becf208 78791463 0840f8f4 082f1c28
0x0becf1fc:   0840f800 18594120 18594120 0becf244
0x0becf20c:   0c0d9c91 0840f8f4 0becf24c 0becf254
0x0becf21c:   082a0e58 082a0e5c 0becf224 18594120
0x0becf22c:   0becf254 186006a0 00000000 18594120
0x0becf23c:   00000000 0becf254 0becf278 0c0d2e17 

Instructions: (pc=0x6d8b1117)
0x6d8b1107:   01 00 00 5e 5d c3 cc cc cc 55 8b ec 56 8b 75 08
0x6d8b1117:   c7 86 50 01 00 00 05 00 00 00 83 3d bc fa b1 6d 

Stack: [0x0b6d0000,0x0bed0000],  sp=0x0becf1cc,  free space=8188k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [jvm.dll+0x1117]
C  [jvm.dll+0x118c33]
C  0x78791463
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::StubRoutines (1)

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
v  ~BufferBlob::Interpreter
 v  ~BufferBlob::Interpreter
v  ~BufferBlob::StubRoutines (1)
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::Interpreter
v  ~BufferBlob::StubRoutines (1)

---------------  P R O C E S S  --------------- 
```

# java - Java ProcessBuilder开始在Linux中顺序执行多个命令

> ID：12268550
> 
> 赞同：21
> 
> 时间：2012-09-04T17:30:28.590
> 
> 标签：java, processbuilder

我想使用 ProcessBuilder 类通过我的 Java 应用程序顺序执行 2 个或更多命令。我已经尝试了其他回复/论坛中建议的多个选项，但没有运气。

以下是我尝试过的事情：

```
 ProcessBuilder processBuilder = new ProcessBuilder("ls", ";", "pwd"); 
```

给我以下错误：

错误：ls：；：没有这样的文件或目录错误：ls：pwd：没有这样的文件或目录

```
 ProcessBuilder processBuilder = new ProcessBuilder("ls", "&&", "pwd"); 
```

给我类似的错误：

错误：ls：&&：没有这样的文件或目录错误：ls：pwd：没有这样的文件或目录

```
 List<String> command = new ArrayList<String>();
    command.add("ls");
    command.add(";");
    command.add("pwd");
    ProcessBuilder processBuilder = new ProcessBuilder(command); 
```

给我以下错误：

错误：ls：；：没有这样的文件或目录错误：ls：pwd：没有这样的文件或目录

我的操作系统是 Linux/Mac-OSX。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-04T17:34:54.437

您的方法等效于`ls`使用指定的参数进行调用。在 Bash 表示法中，您正在运行的是：

```
ls ';' pwd
ls '&&' pwd 
```

如果您希望`ls`并`pwd`作为单独的命令运行，您可以使用 Bash（或另一种 shell 语言）将它们包装成一个命令：

```
bash -c 'ls ; pwd' 
```

你可以这样称呼：

```
ProcessBuilder processBuilder = new ProcessBuilder("bash", "-c", "ls ; pwd"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-06-19T10:11:27.643

我正在使用 ProcessBuilder 来编译这样的 java 程序，它对我有用：

```
ProcessBuilder b = new ProcessBuilder("cmd.exe","/c","cd " + dir,
            " & javac " + mapClassName + ".java -cp " + pathToProjectClasses); 
```

*   cmd.exe ：它启动命令提示符。
*   \c ：不确定它在做什么，但它很重要，您可以查看此链接以获取更多信息[（\? cmd 命令）](https://stackoverflow.com/questions/515309/what-does-cmd-c-mean)
*   cd + dir ：是第一个命令，它将目录更改为某个路径，即 dir。
*   & ：它的意思是在你完成第一个命令后开始第二个命令
*   javac ：这个词和字符串的其余部分是第二个命令
*   -cp ：要编译的类使用的外部类的路径。

所以我有 2 个命令，第一个是`cd`命令，第二个是`javac`命令，我使用`&`.

抱歉我的写作技巧不好，如果我没有很好地解释我的代码，请向我询问您想知道的任何事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T17:35:00.177

您可以从第一个命令中的[ProcessBuilder.start()获取进程，使用](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html#start%28%29)[waitFor()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Process.html#waitFor%28%29)等待，然后启动第二个命令。

# c# - 按长度删除子字符串

> ID：12268559
> 
> 赞同：0
> 
> 时间：2012-09-04T17:31:05.373
> 
> 标签：c#, substring

我一直在尝试在开头或结尾删除特定长度的子字符串。

不过，这是我编写的代码，但无法正常工作。

```
this.temp = String.Empty;
foreach (string line in this.txtBox.Lines) {
    if (Envir.Operations.Begin == true)
        this.temp += line.Substring(Envir.Operations.Length - 1) + Environment.NewLine;
    else
        this.temp += line.Substring(0, line.Length - Envir.Operations.Length) + Environment.NewLine;
} 
```

如果您知道如何解决此问题，请您告诉我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:32:30.533

line.Substring 必须有两个参数，子串的起始索引和长度

用。。。来代替

```
 if (Envir.Operations.Begin)
 {
   this.temp += line.Substring(0, Envir.Operations.Length - 1) + Environment.NewLine;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:44:38.890

您的代码看起来不错，除了它不检查输入字符串是否比您需要的长度长。它可能会导致超出范围的异常。像这样修改你的代码：

```
 this.temp = String.Empty;
foreach (string line in this.txtBox.Lines) {
    if (line.Length<=Envir.Operations.Length) {
        this.temp += Environment.NewLine;
        continue; // adding new line if input is shorter
    }
    if (Envir.Operations.Begin)
        this.temp += line.Substring(Envir.Operations.Length - 1) + Environment.NewLine;
    else
        this.temp += line.Substring(0, line.Length - Envir.Operations.Length) + Environment.NewLine; 
```

}

# java - 如何实现 Asprise OCR 库

> ID：12268563
> 
> 赞同：0
> 
> 时间：2012-09-04T17:31:30.920
> 
> 标签：java, ocr

有人可以告诉我如何在我的 java 程序中实现 Asprise OCR 库。我正在使用 Eclipse，并且我知道如何导入 .jar，但是一旦我想运行我的程序，它就会给我关于丢失的 .dll 文件的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:40:38.517

我修复了它，我只需将 .jar 附带的 .dll 复制到 System32。如果您不想将它们添加到 System 32，只需将它们添加到您的工作区并使用

```
'System.load("dll_name_without_.dll_at_the_end");' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T02:23:32.343

仅供参考，[用于 Java 的 Asprise OCR 库](http://asprise.com/royalty-free-library/java-ocr-api-overview.html)从 5.0 版开始自动处理本机库文件。

Java 提供了两种加载库的方法，这里有一个很好的解释 [。Java 中 System.load() 和 System.loadLibrary 之间的区别](https://stackoverflow.com/questions/7016391/difference-between-system-load-and-system-loadlibrary-in-java)

# sql - SQL 将登录名映射到现有用户

> ID：12268566
> 
> 赞同：21
> 
> 时间：2012-09-04T17:31:40.330
> 
> 标签：sql, sql-server-2008

我最近将我的开发环境从 SQL 2000 升级到了 SQL 2008 R2。我已经备份了我们的生产数据库并将其恢复为我们的新开发服务器。

我在开发服务器上创建了一个登录名，该登录名反映了我在生产服务器上使用的登录名，但我无法将其映射到数据库中的“dbo”用户。当我在“用户映射”中编辑登录属性时，将用户替换为“dbo”，然后出现以下错误：

> 标题：用户“dbo”的 Microsoft SQL Server Management Studio 创建失败。(Microsoft.SqlServer.Smo) 执行 Transact-SQL 语句或批处理时发生异常。(Microsoft.SqlServer.ConnectionInfo) 用户、组或角色“dbo”已存在于当前数据库中。（Microsoft SQL Server，错误：15023）

那么如何将登录名映射到现有用户？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-10T01:56:55.893

要协调用户与登录名，可以使用系统存储过程 sp_change_users_login。

```
sp_change_users_login [ @Action = ] 'action'
[ , [ @UserNamePattern = ] 'user' ] 
[ , [ @LoginName = ] 'login' ] 
[ , [ @Password = ] 'password' ]; 
```

例如：

`EXEC sp_change_users_login 'Update_One','User123','User123'`

如果您有很多不同步的用户，您可以使用光标拉出所有用户并为他们运行此命令。对未同步的用户运行此命令不会产生任何不利影响，并且它将修复所有孤立的用户。

```
DECLARE @sql NVARCHAR(MAX);
DECLARE curSQL CURSOR
FOR
       SELECT   'EXEC sp_change_users_login ''UPDATE_ONE'', ''' + name + ''', ''' + name + ''''
       FROM     sysusers
       WHERE    issqluser = 1
                AND name NOT IN ( 'guest', 'dbo', 'sys', 'INFORMATION_SCHEMA' )
OPEN curSQL
FETCH curSQL INTO @sql
WHILE @@FETCH_STATUS = 0 
     BEGIN
           EXEC (
           @sql
           )
           FETCH curSQL INTO @sql
     END
CLOSE curSQL
DEALLOCATE curSQL 
```

这必须在您需要固定用户的数据库的上下文中运行。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-05-12T17:50:44.400

我认为需要添加 Nikola Markovinović 对这篇文章的评论作为答案。使用更改用户命令：

```
USE {database}; 
ALTER USER {user} WITH login = {login} 
```

在哪里：

*   {database}：包含孤儿用户的数据库
*   {user}：孤儿用户名
*   {login}：登录名。您可以使用与旧服务器上相同的登录名或将用户映射到不同的登录名

[我在http://www.aip.im/2010/05/re-map-database-user-to-login-in-sql-server-after-restoring-or-attaching-database/#sthash](http://www.aip.im/2010/05/re-map-database-user-to-login-in-sql-server-after-restoring-or-attaching-database/#sthash.fbazv94Z.dpuf)找到了这个答案。 [fbazv94Z.dpuf](http://www.aip.im/2010/05/re-map-database-user-to-login-in-sql-server-after-restoring-or-attaching-database/#sthash.fbazv94Z.dpuf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-11T17:16:43.353

在 SQL Server 2012 下，无法更改用户“dbo”。

# css - CSS 页脚使页面内容偏离中心

> ID：12268568
> 
> 赞同：0
> 
> 时间：2012-09-04T17:31:50.227
> 
> 标签：css, center, footer, css-tables

我一直在努力让粘性页脚在**所有**浏览器中工作，对于 Wordpress 主题，我认为我已经成功了......直到我意识到中间表被推到浏览器窗口的绝对左侧. 课还是：

```
position:center; 
```

所以我猜测它可能是一些页脚 CSS 覆盖它，但我找不到它！我能得救吗？

[这是](http://sixth-sense.netai.net/)我的临时站点的链接。如您所见，不仅测试帖子都在左侧，页脚现在也无法正常工作！所以我现在实际上让情况变得更糟了。对不起，我不确定是什么导致了问题！希望你能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:40:28.320

如果你把 text-align:center; 在你的#uptop 中？

问题是我不建议在 div 中嵌入表格，因为您违反了页面上严格的标记规则。之后更难找到导致此问题的原因。

# android - MainActivity.jave 文件中的错误

> ID：12268570
> 
> 赞同：-2
> 
> 时间：2012-09-04T17:32:01.750
> 
> 标签：android, android-layout

我正在编辑 mainactivity.java 代码文件，当我导入 R 时发生此错误 **R 无法解析为变量** ，然后出现更多新错误，例如 **bAdd 无法解析或不是字段 bSub 无法解析或不是字段 tvDisplay 无法被解决或不是一个领域** 请指导我如何删除这些错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:42:46.277

**Project -> Clean**：重复几次，直到你看到错误消失。

选择**“自动构建”**，这样每次清理项目时，都会重新构建它。是的，确保在清理之前保存文件（我知道这很奇怪，但有时错误会拒绝消失，直到你保存它然后清理它）。**确保布局**文件夹中的文件没有错误，因为它有时会阻止 R.java 中代码的自动生成

另外，请确保 MainActivity.java 中的代码**没有****`import android.R`**. Eclipse 倾向于在您管理导入时添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:36:45.550

R 是在构建项目时重新创建的生成源。确保项目已构建（在 Eclipse 中，项目->自动构建中有一个自动构建选项）。
不要导入 R。这不是您要查找的 R。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T08:44:28.157

由于您的任何**XML**文件包含错误导致的错误。所以检查所有 xml 文件并清理项目并构建它。

# sql - Sybase - FROM 子句中的子查询

> ID：12268571
> 
> 赞同：3
> 
> 时间：2012-09-04T17:32:03.870
> 
> 标签：sql, sap-ase

我正在使用 Sybase ASE 12.5.0.3，但无法执行以下子查询：

```
select * from (select '1' union select '2' ) X 
```

我一直在环顾四周，据我所知，在 Sybase ASE 12 之后应该是可能的，我做错了什么，还是这个版本不可能？？？

**编辑**- 即使将查询更改为：

```
select * from (select '1' as col1 union select '2' as col1 ) X 
```

因此，即使为列提供别名，它还是会失败......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T17:47:03.540

在没有看到错误消息的情况下，您似乎需要在子查询中提供列别名：

```
select * 
from 
(
    select '1' as yournewCol 
    union 
    select '2' as yournewCol
) X 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T12:11:35.223

Sybase ASE 不支持 FROM 子句中的子查询：

> 子查询可以嵌套在外部 select、insert、update 或 delete 语句的 where 或 having 子句中、另一个子查询中或选择列表中。或者，您可以编写许多包含子查询作为连接的语句；Adaptive Server 将诸如连接之类的语句处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T17:41:06.513

你需要给你的列名。尝试这个：

# asp.net - ASP.NET 文本框 UTF8

> ID：12268576
> 
> 赞同：0
> 
> 时间：2012-09-04T17:32:22.557
> 
> 标签：asp.net, vb.net, utf-8, textbox

我有一个名为 SpeakerName 的表字段。当我在表格中显示它时，它会正确显示名称（例如 Efraín），但是当将其传递给文本框时，它会显示：Efraín 我认为这是一个 UTF 8 和 ASCII 问题，如何将文本框设置为正确显示文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:48:03.710

你可以调整

```
var result = Server.HtmlEncode(yourText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:57:41.740

我使用了 HttpUtility.HtmlDecode(mytext) 并且成功了！我发现这个[特殊（或外国）字符](https://stackoverflow.com/questions/11652928/special-or-foreign-countries-characters)非常有帮助！谢谢！

# django - 显示来自 Backbone.js 相关对象的信息

> ID：12268577
> 
> 赞同：1
> 
> 时间：2012-09-04T17:32:28.083
> 
> 标签：django, django-models, backbone.js, tastypie, backbone-relational

当后端这些属性存储在 PostgreSQL 数据库中的单独 Django 模型上时，在我的 Backbone.js 有线前端上显示来自相关对象的信息的最佳方式是什么？

我目前正在使用 Django、Tastypie、Django-Tastypie、Backbone.js、Backbone-Relational 和 Handlebars.js 模板。我愿意以不同的方式做事，如果有必要或更有效，我愿意学习 Riak 等新技术。

在前端，我尝试使用标准 Django 模板非常简单：在帖子上显示标签列表以及该帖子的作者。

在后端，我有一个`Post`模型和`Tag`，`User`和`UserProfile`（作者）模型。`Users`并且`UserProfiles`是一对一的，`Post`与`UserProfile`但我想要显示的内容存储在`User`属性下的模型中`username`。目前，这涉及到两次艰苦的查找，以获取每个帖子的作者用户名。`Post`型号：

```
class Post(models.Model):
    author = models.ForeignKey(UserProfile)
    topic = models.ForeignKey(Topic)
    tags = models.ManyToManyField(Tag)
    content = models.TextField()
    title = models.CharField(max_length=250)
    slug = models.SlugField()
    description = models.TextField() 
```

在 Coffeescript 中，我有我的 Backbone 模型。目前我正在尝试在初始化 Post 模型时获取相关的作者和标签对象。我当前的代码非常草率，我很抱歉，我的 javascript foo 仍在开发中！

```
class User extends Backbone.RelationalModel
class UserProfile extends Backbone.RelationalModel
    urlRoot : '/api/v1/profile/?format=json'
class PostTag extends Backbone.RelationalModel
    initialize: ->
        this.get('tag').on 'change', ( model ) =>
            this.get( 'post' ).trigger( 'change:tag', model )
class Tag extends Backbone.RelationalModel
    urlRoot: '/api/v1/tag/?format=json'
    idAttribute: 'id',
    relations: [{
        type: Backbone.HasMany,
        key: 'post_tags',
        relatedModel: PostTag,
        reverseRelation: {
            key: 'tag',
            includeInJSON: 'id',
        },
    }],

class Post extends Backbone.RelationalModel
    idAttribute: 'id',
    relations: [{
        type: Backbone.HasMany,
        key: 'post_tags',
        relatedModel: PostTag,
        reverseRelation: {
            key: 'post',
            includeInJSON: 'id',
        },
    }]
    initialize: ->
        @.get('tags').forEach(@addTag, @)
        @.addAuthor()
        @.on 'change:tag', (model) ->
            console.log('related tag=%o updated', model)
    addAuthor: () ->
        profile_id = @.get('author')
        if app.UserProfiles.get(profile_id)?
            profile = app.UserProfiles.get(profile_id)
            user = app.Users.get(profile.user)
            @.set('author_name',user.get('username'))
        else
            profile = new app.UserProfile(profile_id)
            app.UserProfiles.add(profile)
            profile.fetch(success: (model,response) =>
                user_id = profile.get('user')
                if app.Users.get(user_id)?
                    user = app.Users.get(user_id)
                    user.fetch(success: (model,response) =>
                        console.log(user.get('username'))
                        @.set('author_name',user.get('username'))
                    )
                    console.log("Existing user"+user_id)
                    console.log(user.get('username'))
                    #@.set('author_name',user.get('username'))
                else
                    user = new app.User('resource_uri':user_id)
                    app.Users.add(user)
                    console.log("New user"+user_id)
                    user.fetch(success: (model,response) =>
                        console.log(user.get('username'))
                        @.set('author_name',user.get('username'))
                    )
            )

    addTag: (tag_id) ->
        console.log(tag_id)
        if app.Tags.get(tag_id)?
            tag = app.Tags.get(tag_id)
            console.log("TAG" + tag)
        else
            console.log("NON EXISTENT")
            console.log(tag_id)
            tag = new app.Tag({'id':tag_id})
            tag.fetch()
            app.Tags.add(tag)
        post_tag = new app.postTag({
            'tag': tag_id,
            'post': @.get('resource_uri')
            })
        @.get('post_tags').add(post_tag) 
```

这段代码实际上可以很好地获取和存储相关对象，但它非常混乱，我相信一定有更好的方法。此外，我想不出一种方法来访问存储的标签名称以显示在我的`Handlebars.js`模板中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:32:28.083

在写这篇文章时，我发现了相关问题[如何在 Backbone.js 中加载具有外键关系的子模型？](https://stackoverflow.com/questions/11502614/how-do-i-load-sub-models-with-a-foriegn-key-relationship-in-backbone-js)

既然我已经写了这个问题，我想我不妨把它贴出来，以防它对任何人有用。

答案就像添加`full=True`到我的`tastypie`资源一样简单。然后我可以摆脱`addTags`and`addAuthor`函数，因为我不需要保存或更新相关对象，所以上面线程中的其余答案对我来说不是必需的。

# loops - Excel宏：每次该列中的名称更改时，如何通过特定列循环制作宏

> ID：12268581
> 
> 赞同：3
> 
> 时间：2012-09-04T17:32:39.457
> 
> 标签：loops, excel, charts, vba

好吧，我的目标是创建一个图表制作宏，因为我有大约 90 个不同的站名；每个站都需要自己的图表。

我想使用的多个系列是我的估计 CFS、模拟 CFS、压力期数（编号）和站名。我正在尝试制作简单的 xy 散点线图，其中 No. 值将是我的 x 范围，而 est:CFS 和 sim:CFS 都将是我的 y 范围以创建 2 条相当简单的线。

现在我的问题很简单：我应该如何在 VBA 中设计代码，以便它知道停止接收 Niobrara 河站图表图表中的系列数据，并开始使用以下数据蛇河站图表......等等以此类推，直到它遍历所有 90 多个图表。

我不知道如何用一个命令来循环并读取该站名列，并让它理解与该站相对应的所有行都属于它，并让它理解这就是它需要的所有数据图表，而当车站改变时，我希望它移动到下一个。

下图显示了工作表上的数据是如何布局的：

![工作表](../Images/cd44be6ad2db6d0072a95a20009fb763.png)

如果这有点难以理解，我深表歉意，如果我可以提供更多信息以使我的问题更清楚，我很乐意发布更多信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:33:08.327

下面的代码将允许您从工作表中检索所有唯一的站名称并将它们放入`Stations()`字符串数组中。

```
Dim TopRowOfData As Integer
Dim StationNameColumn As Integer    
Dim Stations() As String

Sub GetUniqueChartNames()

    Dim rngTmp As Range
    Dim outRange As Range

    'Select the first data cell of the Station name column.
    Cells(TopRowOfData, StationNameColumn).Select
    'Select the rest of the data in the column.
    Range(Selection, Selection.End(xlDown)).Select
    'Assign this data to a range variable.
    Set rngTmp = Selection
    'Find a row that occurs below the area of the range data.  This will be used
    'to paste the filtered values into temporarily.
    outRow = rngTmp.Row + rngTmp.Rows.Count + 10 '10 is arbitrary, could be any number.
    Set outRange = Cells(outRow, 1)
    'Filter the data values by unique values and paste the results into the outRange area.
    rngTmp.AdvancedFilter Action:=xlFilterCopy, CopyToRange:=outRange, Unique:=True
    'Get the output results of the filter operation and store them in a range object.
    'outRow contains the heading of the filtered column.  outRow + 1 is where the data starts.
    Cells(outRow + 1, 1).Select
    Range(Selection, Selection.End(xlDown)).Select
    Dim rngFinal As Range
    Set rngFinal = Selection
    'Add the output results into the Stations array.
    ReDim Stations(rngFinal.Rows.Count - 1)
    Dim i As Integer
    For i = 0 To rngFinal.Rows.Count - 1
        Stations(i) = Cells(rngFinal.Row + i, rngFinal.Column).Value
    Next

    'Delete the temporary range.
    rngFinal.Clear

End Sub 
```

`TopRowOfData`变量就是这样，一个整数告诉你的代码最上面一行是数据开始的地方 。`StationNameColumn`是包含站名的列的编号（A=1、B=2 等）

获得站名数组后，您可以逐步通过站名列并检索与数组中每个项目关联的所有数据值。然后根据该数据创建单独的图表。

或者，您可以逐一检查站名列中的值，只检索与当前站名关联的第一行和最后一行的地址，然后根据该数据创建图表。下面的代码将执行此操作，假设您的数据按站点名称排序，以便所有相同的站点名称组合在一起。

```
Sub FindRowsAssociatedWithStationName()

    Dim i As Integer
    Dim j As Integer
    Dim rng As Range
    'Temp variables to store the first and last row numbers.
    Dim first As Integer
    Dim last As Integer

    'Loop through all of the station names.
    For i = 0 To UBound(Stations)
        'Select the first data cell of the station names column.
        Cells(TopRowOfData, StationNameColumn).Select
        'Select the rest of the data in the column.
        Range(Selection, Selection.End(xlDown)).Select
        'Assign this data to a range variable.
        Set rng = Selection

        'Initialize both of the row number variables to 0.
        first = 0
        last = 0

        'Loop through all the data rows.
        For j = 0 To rng.Rows.Count - 1
            If Cells(rng.Row + j, StationNameColumn).Value = Stations(i) Then
                'Set the first variable.
                If first = 0 Then
                    first = rng.Row + j
                End If
                'Set the last variable.
                last = rng.Row + j
             End If
        Next

        'Call a method to create the actual charts, passing in the first and last row associated with the current Station name.
        Call CreateChart(first, last)

    Next
End Sub 
```

然后，您创建实际图表的代码可以使用第一个和最后一个（行）的值来检索这些行的适当数据。

# memory-management - Linux PowerPC Book E 通过热重启保留原始 RAM

> ID：12268586
> 
> 赞同：3
> 
> 时间：2012-09-04T17:33:09.757
> 
> 标签：memory-management, linux-kernel, powerpc

使用`CONFIG_FSL_BOOKE`(P1020 RDB) 2.6.31 我需要在原始的某个固定位置（无论在哪里）保留 1MB 的 RAM，这意味着 U-Boot 或 bootmem 分配器不会触及它，因此 RAM 内容可以保留热重启。需要注意的是，我无法将 U-boot 更改为使用`CONFIG_PRAM`/ `mem=`。

在 arc/powerpc 2.6.31 中编译可重定位内核不是一个选项。`memmap`在 arch/powerpc/kernel/setup_32.c 中不受支持。

理想情况下，这个区域应该被保留而不是 L1 d-cached，这样它就可以用来存储来自中断上下文的 ramoops。

有没有办法`_end`在 bootmem 之前移出到 0x600000 以创建一个没有人触及的洞？也就是说，欺骗内核认为`_end`更远？

在 vmlinux.lds.SI 中尝试了类似的东西：

```
 . = ALIGN(PAGE_SIZE);
    _end = . ;
    PROVIDE32 (end = .); 
```

变成

```
 . = ALIGN(PAGE_SIZE);
    _start_unused_ram = .;
    . = ALIGN(0x400000);
    _end = . ;
    PROVIDE32 (end = .); 
```

但是，`__bss_stop`0x400000 和 0x400000 之间的区域被覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:25:01.943

最好的解决方案是将内存区域添加为设备树中的保留区域。

这样，它将在引导期间提前保留，并且不应被内核触及。

# javascript - 如何使用 Javascript 将内存中的 html 动态加载到 FireFox 中的 iframe 中？

> ID：12268595
> 
> 赞同：0
> 
> 时间：2012-09-04T17:34:04.853
> 
> 标签：javascript, iframe

在 chrome 中，如果我在名为 html 的 var 中将 HTML 作为字符串，我可以轻松地将其加载到 iframe 中并让 iframe 执行该 html 页面（使用它可能包含的任何 css/jss/etc），方法是：

```
window.sHTML = html;
iframe.src = javascript:parent.sHTML 
```

在 Firefox 中，这根本不起作用。有没有办法在Firefox中工作？请注意，我需要 JS 在 iframe 中正确执行。例如，这个小提琴[http://jsfiddle.net/9k9Pe/2/ 可以满足](http://jsfiddle.net/9k9Pe/2/)我的要求，但是如果 html 中有一个脚本标签，那就会破坏事情。

更新：这实际上在 Firefox 中有效，它只是与破坏我的代码的 window.location 的交互方式不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T01:12:39.950

回答我自己的问题：

```
window.sHTML = html;
iframe.src = javascript:parent.sHTML 
```

这实际上在 Firefox 中有效，它只是与破坏我的代码的 window.location 的交互方式不同。

要更详细地了解，如果您这样做，请使用 chrome

```
iframe.src = www.foo.com/bar.html
window.sHTML = html;
iframe.src = javascript:parent.sHTML 
```

然后 iframe 将执行 html 字符串中的 html，但它的 window.location 将保持 www.foo.com/bar.html 并且相对链接将被视为 iframe 来自 www.foo.com/bar.html

然而，在 FF 中，window.location 变为 javascript:parent.sHTML 并且相对链接将不再按预期方式工作。

# c# - Java 文件类（构造函数）

> ID：12268601
> 
> 赞同：0
> 
> 时间：2012-09-04T17:34:24.010
> 
> 标签：c#, java, .net, multithreading, file-io

```
File f = new File(filePath);

    RandomAccessFile rf=null;
    String firstLine="";
    if (f.isFile() && f.length() > 0) {
        rf = new RandomAccessFile(f, "r");

            rf.seek(0);
        firstLine = rf.readLine();
        rf.close(); 
```

上面的代码用于从 java 构造函数中的文件读取。同一个文件可以同时被不同的线程打开。现在我正在用 C# 编写代码，并且像 java 中的 File 类不存在。我想问一下 File 类的构造函数在这里是做什么的，它与我们简单地使用下面的方法有什么不同。

```
StreamReader sr = File.OpenText(path) 
```

当只有从文件中读取的行是第一行时，为什么实际使用随机访问文件。由于有不同的线程，当一个线程同时在文件中读取或写入时，其他线程也可能正在读取文件。我们如何在 C# 中允许它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:41:19.553

我认为这可以解决问题：

```
System.IO.StreamReader file = new System.IO.StreamReader("c:\\test.txt");
string firstLine = file.ReadLine();
file.Close(); 
```

# python - 按字母顺序对 argparse 帮助进行排序

> ID：12268602
> 
> 赞同：24
> 
> 时间：2012-09-04T17:34:29.127
> 
> 标签：python, sorting, arguments, command-line-arguments, argparse

我正在使用 Python 的 (2.7) argparse 工具，并希望自动按选项按字母顺序对它生成的帮助进行排序。

默认情况下，帮助条目按添加顺序排序*，如下所示：

```
p = argparse.ArgumentParser(description='Load duration curves and other plots')
p.add_argument('--first', '-f', type=int, default=1, help='First Hour')
p.add_argument('--dur', '-d', type=int, default=-1, help='Duration in Hours. Use -1 for all')
p.add_argument('--title', '-t', help='Plot Title (for all plots), default=file name')
p.add_argument('--interp', '-i', action="store_true", default=True, 
                help='Use linear interpolation for smoother curves')
...
args = p.parse_args() 
```

当调用 as 时`python script -h`产生：

```
usage: script.py [-h] [--first FIRST] [--dur DUR] [--title TITLE] [--interp]

Load duration curves and other plots

optional arguments:
  -h, --help            show this help message and exit
  --first FIRST, -f FIRST
                        First Hour
  --dur DUR, -d DUR     Duration in Hours. Use -1 for all
  --title TITLE, -t TITLE
                        Plot Title (for all plots), default=file name
  --interp, -i          Use linear interpolation for smoother curves 
```

是否可以自动按字母顺序对它们进行排序？这将是 dur, first, h, interp, title。

*显然，解决方法是通过使用 p.add_argument 按字母顺序添加条目来手动维护，但我试图避免这样做。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-04T18:13:19.967

您可以通过提供自定义[`HelpFormatter`类](http://docs.python.org/library/argparse.html#formatter-class)来做到这一点；其中的内部结构没有正式记录。这意味着当涉及到 Python 版本与版本之间的兼容性时，您需要靠自己，但我发现界面相当稳定：

```
from argparse import HelpFormatter
from operator import attrgetter

class SortingHelpFormatter(HelpFormatter):
    def add_arguments(self, actions):
        actions = sorted(actions, key=attrgetter('option_strings'))
        super(SortingHelpFormatter, self).add_arguments(actions)

p = argparse.ArgumentParser(...
    formatter_class=SortingHelpFormatter,
) 
```

在这里，我对选项字符串（`('--dur', '-d')`等）进行排序，但您可以选择要排序的内容。这个简单的排序选项将单破折号选项放在最后，就像`-h`选项一样。

输出：

```
usage: [-h] [--first FIRST] [--dur DUR] [--title TITLE] [--interp]

Load duration curves and other plots

optional arguments:
  --dur DUR, -d DUR     Duration in Hours. Use -1 for all
  --first FIRST, -f FIRST
                        First Hour
  --interp, -i          Use linear interpolation for smoother curves
  --title TITLE, -t TITLE
                        Plot Title (for all plots), default=file name
  -h, --help            show this help message and exit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:59:11.623

创建 ArgumentParser 类时，您可以传入帮助格式化程序： http: [//docs.python.org/library/argparse.html#formatter-class](http://docs.python.org/library/argparse.html#formatter-class)

因此，显然您可以使用提供的格式化程序之一，但不能在没有逆向工程的情况下覆盖和替换它们：

```
>>> h = argparse.ArgumentDefaultsHelpFormatter
>>> print h.__doc__
Help message formatter which adds default values to argument help.

    Only the name of this class is considered a public API. All the methods
    provided by the class are considered an implementation detail. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T18:29:01.387

一种替代方法，*绝对*比@MartijnPieters 提出的更丑陋：

```
p = argparse.ArgumentParser()

#add arguements here

for g in p._action_groups:
    g._group_actions.sort(key=lambda x:x.dest) 
```

将它放在`try`/`except`子句中可能会很好，因为它只是格式化帮助，因此如果这段代码在某个`AttributeError`或某事上失败，那么程序的执行并不重要......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T13:33:23.870

这类似于@mgilson 的回答。我以为我之前已经发布了这个，但显然不是。

```
d = dict()
d['--first'] = ('-f', "type=int", "default=1", "help='First Hour'")
d['--dur'] = ('-d', type=int, default=-1, help='Duration in Hours. Use -1 for all')
# etc

for prim_option in sorted(d):
    p.add_arguments(prim_option, *d[prim_option]) 
```

您可以调整字典中确切用作键的内容，以及对 的参数`sorted`和调用的确切结构`add_arguments`，以获得所需的排序顺序。这遵循公开记录的接口`argparse`，但确实为定义解析器的过程增加了一层。（根据您的理念，将有关选项的信息与解析器的实现分开可能是一件好事。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-27T22:59:06.700

帮助中的参数顺序由`parser.format_help`方法确定：

```
Definition:  parser.format_help(self)
Source:
    def format_help(self):
        formatter = self._get_formatter()
        ...
        # positionals, optionals and user-defined groups
        for action_group in self._action_groups:
            formatter.start_section(action_group.title)
            formatter.add_text(action_group.description)
            formatter.add_arguments(action_group._group_actions)
            formatter.end_section() 
```

`help`是通过获取一个`formatter`对象，然后向它添加“部分”来创建的。在这里，它遍历`_action_groups`，将每个放在自己的部分中，并使用`add_arguments`方法添加其动作（参数）。格式化程序是临时的，仅用于创建字符串（通常是多行）。

操作组包括默认的`postionals`和`optionals`，以及用户创建的任何操作组。这些组仅用于帮助，不用于解析。因此`action_group._group_actions`列表可以重新排序而不影响解析。（解析器有自己的动作列表，`parser._actions`）。

这证实了@mgilson 的观察，即排序`p._actions`不会影响帮助，但排序会影响`_group_actions`。

排序`_actions`将影响`usage`（无论是帮助的一部分还是独立的）：

```
 # usage
    formatter.add_usage(self.usage, self._actions,
                        self._mutually_exclusive_groups) 
```

请注意，`action_groups`不会传递给使用部分。使用部分会重新排序其操作，`optionals`首先显示，然后`positionals`。

`add_argument`如果要控制位置的解析顺序以及它们在使用中的顺序，请在阶段之前/期间对参数进行排序。

如果您只想控制帮助组中的顺序，那么`._group_actions`可以在调用格式化程序之前或在其中重新排序列表中的内容。

还有其他关于控制`usage`. 例如，有些人不希望`positionals`订购 after `optionals`。

我同意 Formatter 类很麻烦。但在大多数情况下，它与 Parser 类是分开的。所以它可以被重写而对解析的影响最小。现有的 Formatter 子类只是调整低级方法，即控制换行和帮助行格式化的方法。解析器和格式化程序之间的重要接口是`format_usage`and`format_help`方法，它们相对简单和高级。

# 子类化

尽管@grieve 引用了警告，但人们确实将其子类化`HelpFormatter`以满足他们自己的需要。唯一阻止人们这样做的是某种公司政策。所有警告告诉我们的是，argparse 开发人员没有尝试想象或记录用户可能想要进行的所有更改。我什至无法列举我在过去几年中提出的建议。

# cocos2d-iphone - Cocos2D 移动精灵有时生涩

> ID：12268605
> 
> 赞同：0
> 
> 时间：2012-09-04T17:34:40.863
> 
> 标签：cocos2d-iphone

在这里，我想从上到下移动一些 cocos2D 精灵对象。在屏幕中随机位置生成的精灵 r。有时所有精灵的运动都不稳定..我不能使用 CCMove，因为我想在精灵之间保持相等的距离。

```
[self schedule: @selector(updateObjects:)];

-(void)updateObjects:(ccTime) dt
{
    //when I print dt, it gives different value..
    //jerk comes when this value s larger than ideal value..

    for(Obstacles *Obs in ObsArray)
    {
        CGPoint pos = Obs.position;
        pos.y -= gameSpeed;
        Obs.position = pos;
    }
} 
```

我怎么解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T19:15:19.537

解决了问题 1\. 删除了所有 printf 和 cocos2D 日志 2\. 为图像加载添加了单独的线程。3\. 在高清模式下使用多个 1024x1024 精灵表代替 2048x2048。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:49:03.730

Cocos2d 使用可变时间步长：是*自上次调用*此调度选择器以来`dt`的时间，以秒为单位。如果您的对象必须每秒移动的距离（以点为单位），那么您必须将对象位置更改为。*`gameSpeed``gameSpeed * dt`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-30T06:49:18.040

我有同样的问题，我尝试了很多东西，最后我发现它在 android 设备上会比 ios 设备更抖动。他们渲染的帧速率应该以恒定的时间间隔更新。如果你使用更新方法然后设置恒定增量时间

例如我使用了更新方法

```
void MyClass::update(float dt) {
    int positioniteration=8;
    int valocityiteration=8;
    world->Step(1/60.0,valocityiteration,positioniteration);//60 FPS } 
```

我还在 appdelegate 中添加了这些行

```
director->setDepthTest(false);
director->setProjection(Director::Projection::_2D);// MY GAME IS 2D SO USED 2D PROJECTION .. IT HELPED ME 
```

希望这可以帮助。：）*

# drupal - 如何覆盖首页节点 tpl - drupal

> ID：12268607
> 
> 赞同：6
> 
> 时间：2012-09-04T17:34:45.723
> 
> 标签：drupal, drupal-7

如何覆盖drupal首页node.tpl文件？我尝试了各种

```
 node--front.tpl.php
   page--node--front.tpl.php
   page--front--node.tpl.php 
```

但它不工作。

覆盖主页节点的文件名是什么？（我在drupal 7中工作）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T18:29:08.653

您可以将此功能添加到主题模板.php

```
 function customethemename_preprocess_node ( &$vars ) {

        if ($vars["is_front"]) {
           $vars["theme_hook_suggestions"][] = "node__front";
        }  
    } 
```

然后就可以page page--front.tpl.php

它会解决问题

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-05T19:51:49.953

它应该是`page--front.tpl.php`

此外，请确保您的主题的层次结构中有前体（例如`page.tpl.php`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T01:08:17.120

我建议通过将特定的内容节点设置为首页来解决此问题。

[http://www.inmotionhosting.com/support/edu/drupal-7/homepage/change-front-page](http://www.inmotionhosting.com/support/edu/drupal-7/homepage/change-front-page)

然后我会使用特定的节点 ID 模板。

`node--[insert id here].tpl.php` IE`node--1.tpl.php`

在此之前，您需要做两件事：

1.  确保您的主题文件夹中有原始 node.tpl.php 文件的副本（否则将不会拾取被覆盖的模板文件）。
2.  清除 Drupal 的缓存

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:02:40.493

无需手动开发首页，只需通过视图或其他创建首页并将其设置为首页：

```
www.yoursite.com/?q=admin/config/site-information 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-11T10:13:43.267

以下步骤解决了我在 Drupal 7 中创建自定义首页的问题。

1.  创建一个文件：page--front.tpl.php。注意两个连字符而不是一个。
2.  清除缓存：配置>>开发>>性能>>清除所有缓存

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-21T15:36:15.810

我认为最好的解决方案是使用frontpage nid

```
function YOURTHEME_preprocess_node ( &$vars ) {
list(, $frontpage_nid) = explode('/', drupal_get_normal_path(variable_get('site_frontpage', 'node')));

  if ($vars['node']->nid == $frontpage_nid) {
    $vars['theme_hook_suggestions'][] = "node__frontpage";
  } 
} 
```

因为

```
if ($vars["is_front"]) {
    $vars["theme_hook_suggestions"][] = "node__front";
} 
```

为frontpage中的所有节点添加主题建议，而不仅仅是frontpage节点

# java - 原子文件修改

> ID：12268609
> 
> 赞同：7
> 
> 时间：2012-09-04T17:34:52.447
> 
> 标签：java, windows, unix

文件中有我想要覆盖的区域（可能很小）。假设我调用 fseek、fwrite、fsync。有什么方法可以确保这种区域重写操作的原子性，例如我需要确定，在任何失败的情况下，该区域将只包含旧的（修改前）数据，或者只包含新的（修改后的）数据，但不是混合这个。

我想强调两件事。

**首先**：如果没有办法以原子方式写入任何大小的区域也没关系 - 我们可以通过将数据附加到文件中来处理它，fsync'ing，然后重写文件中的“指针”区域，然后再次 fsync。但是，如果“指针”写入不是原子的，我们仍然可以使用非法指针损坏文件。

**第二**：我很确定，写 1 字节区域是原子的：我不会在文件中看到我从未放在那里的任何字节。所以我们可以使用一些技巧来为地址分配两个区域并使用 1 字节开关，因此区域的重写变成了 - 追加新数据，同步，重写两个（未使用的）指针槽之一，再次同步，然后重写'switch byte ' 并再次同步。所以覆盖区域操作现在至少包含 3 个 fsync 调用。

所有这一切都会容易得多，如果我将有很长的原子写作，但我真的有吗？

有没有办法在不使用第 2 点提到的方法的情况下处理这种情况？

另一个问题是 - 写入和同步之间是否有任何顺序保证？例如，如果我调用 fseek、fwrite [1]、fseek、fwrite [2]、fsync，我是否可以在 [2] 处写入，而在 [1] 处写入 - 未提交？

这个问题适用于linux和windows操作系统，也需要任何特定的答案（例如在ubuntu版本abc ....）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:52:35.253

通常可以安全地假设写入 512 字节的块是由 HDD 一次写入完成的。但是，我不会这么认为。相反，我会使用您的第二个解决方案，同时在您的写入中添加校验和并在更改文件中的指针之前对其进行验证。

通常，将校验和添加到写入磁盘的所有内容中是一个很好的做法。

要回答“同步”保证 - 你可以假设。虽然同步是 FS 和磁盘相关的，但假设我们正在谈论“合理”的实现。

*   在第一次之后`sync`，数据保证被刷新到磁盘（磁盘可能仍然在它的缓存中），如果数据你应该得到你写的任何东西。
*   如果第二次之后`sync`两个同步的数据都在磁盘缓存中，那么您描述的情况可能会发生，但*恕我直言*，这种可能性非常低。

无论如何，没有其他机制可以保证您的数据在磁盘上。这就是为什么你**必须有校验和**。

更多信息：[确保 fsync 完成了它的工作](https://stackoverflow.com/questions/11612165/ensure-fsync-did-its-job)

# css - Visual Studio 搜索功能似乎没有在 CSS 文件中搜索文本

> ID：12268615
> 
> 赞同：0
> 
> 时间：2012-09-04T16:56:02.140
> 
> 标签：css, visual-studio, visual-studio-2010

我注意到，当使用 Visual Studio 的“在文件中查找”搜索功能时，即使文本确实存在，它似乎也不会在 CSS 文件中搜索/查找文本。

我在网上找不到有关此问题的任何内容，并且即使 Visual Studio 允许您在 CSS 文件中搜索文本也无法确定。

希望有人可以对此有所了解；它应该允许你这样做吗？如果是这样，什么原因可以解释为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:32:20.297

我不得不说我以前没有遇到过这个错误。[在这里](https://stackoverflow.com/questions/4795443/visual-studio-2010-find-in-files-not-finding-files)阅读，有一些潜在的解决方案可能会有所帮助。

# php - 如何使用相同的javascript控制表单中的不同元素

> ID：12268620
> 
> 赞同：0
> 
> 时间：2012-09-04T17:35:10.157
> 
> 标签：php, javascript

我的表格中有不止一行。基本上每行有两个下拉框。第二个下拉框的值根据第一个下拉框中的选择进行更新。如何一次将 javascript 应用于单个行？说当我更改第二行中的第一个下拉框时，我希望第二个下拉框仅在第二行中更新。另外，如何使用数组将多行数据更新到同一个数据库。这是我的代码：

```
<form action='purchase.php' method="POST"> 
<table><tr><td>Supplier</td><td>Item Name</td></tr>
<tr><td><select name ="supplier" id = "supplier" onchange = "updatesup()">
<option value = "1"> SUPA </option><option value = '2'>SUPB</option></select> </td>
<td> <Select name ="itemname" id="itemname"><option value = ""> Select Item</option></select>/td></tr>
<tr><td><select name ="supplier" id = "supplier" onchange = "updatesup()">
<option value = "1"> SUPA </option><option value = '2'>SUPB</option></select> </td>
<td> <Select name ="itemname" id="itemname"><option value = ""> Select Item</option></select>/td></tr></table></form> 
```

在选择供应商时..我想更改项目名称下拉列表中的项目..但我希望更改仅发生在相应的下拉列表中...我该怎么做？

这是我正在使用的 javascript

```
array iteam_a;
item_a[0] = [1, item1, 1];
item_a[1] = [2, item2, 1];
item_a[2] = [3, item2, 1];
item_a[3] = [4, item4, 2];
item_a[4] = [5, item5, 2];
item_a[5] = [6, item6, 2];
function updatesup(){
    removeAllOptions(document.getElementById('itemname'));
    addOption(document.getElementById('itemname'), "", "Select Item");

    for (var i = 0; i <= item_a.length-1; i++){
        if (item_a[i][2] === document.getElementById('supplier').value){
                addOption(document.getElementById('itemname'), item_a[i][0], item_a[i][1]);
            }
     }   

 }

function addOption(selectbox, value, text ){
    var optn = document.createElement("OPTION");
optn.text = text;
optn.value = value;

selectbox.options.add(optn);
 }               

function removeAllOptions(selectbox)
{
var j;
for(j=selectbox.options.length-1;j>=0;j--)
{
    selectbox.remove(j);
}
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:39:18.793

看看[knockout.js](http://knockoutjs.com/)

它允许您在 Javascript 中构建 MVVM 模型，并且可以轻松实现您想要的。网站上有很多例子。在[第 9 频道](http://channel9.msdn.com/Events/Speakers/steve+sanderson)上，Steve Sanderson 对 knockout.js 进行了精彩的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:47:13.023

您可以更改 updatesetup 方法的签名。

定义两个参数，比如 mainindex 和 subindex，它们必须从该行接收每个元素的索引，例如：

```
function updatesup(mainindex, subindex){
    removeAllOptions(document.getElementById('itemname_' + subindex));
    addOption(document.getElementById('itemname_' + subindex), "", "Select Item");

    for (var i = 0; i <= item_a.length-1; i++){
        if (item_a[i][2] === document.getElementById('suplier_' + subindex).value){
                addOption(document.getElementById('itemname_' + subindex), item_a[i][0], item_a[i][1]);
        }
 } 
```

请注意，我已经更改了要搜索的 id ...因此，在您的 html 中，使用索引序列构建了第行

```
<form action='purchase.php' method="POST"> 
<table><tr><td>Supplier</td><td>Item Name</td></tr>
<tr><td><select name ="supplier_0" id = "supplier_0" onchange = "updatesup()">
<option value = "1"> SUPA </option><option value = '2'>SUPB</option></select> </td>
<td> <Select name ="itemname_0" id="itemname_0"><option value = ""> Select Item</option>        </select>/td></tr>
<tr><td><select name ="supplier_1" id = "supplier_1" onchange = "updatesup()">
<option value = "1"> SUPA </option><option value = '2'>SUPB</option></select> </td>
<td> <Select name ="itemname_1" id="itemname_1"><option value = ""> Select Item</option>        </select>/td></tr></table></form> 
```

# c# - 在 Windows 窗体上的文本框中显示函数的内容

> ID：12268622
> 
> 赞同：0
> 
> 时间：2012-09-04T17:35:21.810
> 
> 标签：c#, textbox, scope, wmi, wifi

在我的程序中，我试图从系统中获取 WiFi 强度值。当我得到我需要的值时，我试图在 Windows 窗体的文本框中显示它。到目前为止，我无法在我需要的文本框中显示任何类型的值。我需要一些关于如何实现这一点的见解。获取原始 rssi 值的函数调用在计时器循环内。

*请注意，此 wifi 强度代码由本网站的贡献者提供。它不是我自己的。

```
 public static int GetSignalStrengthAsInt()
 {
     Int32 returnStrength = 0;
     ManagementObjectSearcher searcher = null;
     try
     {
         searcher = new ManagementObjectSearcher( 
              @"root\WMI", 
              @"select Ndis80211ReceivedSignalStrength  
                from  MSNdis_80211_ReceivedSignalStrength 
                where active=true" );

         // Call the get in order to populate the collection
         ManagementObjectCollection adapterObjects = searcher.Get();

         // Loop though the management object and pull out the signal strength
         foreach ( ManagementObject mo in adapterObjects )
         {
             returnStrength = Convert.ToInt32( 
                 mo["Ndis80211ReceivedSignalStrength"].ToString());
             break;
         }
      }
      catch (Exception)
      {
      }
      finally
      {
          if ( searcher != null )
          {
              searcher.Dispose();
          }
      }
      return returnStrength;            
 }

 //**********************PROBLEM AREA BELOW************************************
 void timer_Tick(object sender, EventArgs e) //not working
 {
     GetSignalStrengthAsInt();
     wifi.Text = returnStrength;  // unclear how to get returnStrength in wifi box
     ...
 } 
```

文本框的名称是“wifi”。我想我遇到了某种范围界定问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:40:07.853

您应该从函数中读取值。

```
void timer_Tick(object sender, EventArgs e) //not working 
{ 
    int returnStrength = GetSignalStrengthAsInt(); 
    wifi.Text = returnStrength.ToString();  // unclear how to get returnStrength in wifi box 

     //stuff 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:40:46.053

您需要使用函数的返回值：

```
wifi.Text = GetSignalStrengthAsInt().ToString(); 
```

# sql - SQL子查询中的ISNULL不返回任何内容

> ID：12268624
> 
> 赞同：0
> 
> 时间：2012-09-04T17:35:24.257
> 
> 标签：sql, tsql

下面是触发的 SQL 的一部分，它使用子查询返回 TableString 列中的值。子查询将返回前两个值和 Fname 的“标记”，但之后什么也没有（甚至分号也没有）。TableString 列是一个 nvarchar，设置为 255 个字符，并在插入或更新期间捕获所有相似数据。

```
INSERT INTO TransactionLog (TransactionDate, Operator, TableName, Action
                           , TableString, UserId)
SELECT LastChangeDate
     , 'Op'
     , @tableName
     , @action
     , CAST('sNum:' + CAST(sNumber as nvarchar(10)) + ' entType:' + EntityType 
            + ' Fname:' + ISNULL(FirstName, 'NULL') 
            + ' Lname:' + ISNULL(LastName, 'NULL') 
            + ' suff:' + ISNULL(NameSuffix, 'NULL') 
            + ' corpName:' + ISNULL(CorporateName, 'NULL' ) 
            + ' ctrlId:' + ISNULL(CAST(ControlId as nvarchar(3)), 'NULL') 
            AS nvarchar(30)) as TableString
     , LastChangeOperator
FROM deleted 
```

TableString 中的返回值：

```
sNum:1000024 entType:S Fname 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:38:04.050

这与截断数据无关，`ISNULL`而是*截断*数据的结果。

注意：

```
.. AS nvarchar(30) 
```

也就是说，更多的数据被省略了。（在这种情况下，输出甚至不包含“Fname:”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T18:52:58.683

附带说明一下，他的返回字符数是 28，因为 Nvarchar(30) 意味着存储 30 个字节，而 Unicode (N) 是一个字母的两个字节，即使您存储的是非 Unicode。varchar 声明中的数字不是字符数，而是要使用的字节数。当人们使用 Nvarchar 时，它真的很吸引人。

# java - 正则表达式：PatternSyntaxException：非法重复

> ID：12268626
> 
> 赞同：1
> 
> 时间：2012-09-04T17:35:38.680
> 
> 标签：java, regex, string

我不擅长正则表达式，我正在尝试将`java.lang.String` `replaceAll()`方法与代码段一起使用，如下所示

一个是：

```
public class method3 {

    public static int addTwoNumbers(int one, int two){
        return one+two;
    }

    public static void main (String[] args){
        int total = addTwoNumbers(1, 3);
        System.out.println(total);
    }
} 
```

替换为 B

```
null
public class method3 {
    /* some writting */
    public static int addTwoNumbers(int one, int two){
        return one+two;
    }
    /*more text*/
    public static void main (String[] args){
        int total = addTwoNumbers(1, 3);
        System.out.println(total);
    }//end of 
} 
```

这给了我以下错误

```
java.util.regex.PatternSyntaxException: Illegal repetition 
```

我猜这和`/**/`角色有关？

您如何对此进行排序，还有其他我需要注意的角色吗？

**编辑：这是错误信息**

```
Exception in thread "AWT-EventQueue-0" java.util.regex.PatternSyntaxException: Illegal repetition near index 25
null
public class method2 {

    public static int addTwoNumbers(int one, int two){
        return one+two;
    }

    public static void main (String[] args){
        int total = addTwoNumbers(1, 3);
        System.out.println(total);
    }
}

                         ^
    at java.util.regex.Pattern.error(Pattern.java:1924)
    at java.util.regex.Pattern.closure(Pattern.java:3104)
    at java.util.regex.Pattern.sequence(Pattern.java:2101)
    at java.util.regex.Pattern.expr(Pattern.java:1964)
    at java.util.regex.Pattern.compile(Pattern.java:1665)
    at java.util.regex.Pattern.<init>(Pattern.java:1337)
    .... 
```

调用 replaceAll()

```
 String a = readFile(directoryToAddFile,startOfCode, endOfCode);
        String b = textarea.getText().toString();
        String content = IOUtils.toString(new FileInputStream(directoryToAddFile));
        content = content.replaceAll(a, b);
        IOUtils.write(content, new FileOutputStream(directoryToAddFile)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T17:50:51.807

目前，您的代码尝试将“替换”字符串分析为正则表达式。

要逐字替换字符串而不是正则表达式，您可以使用[Pattern#quote(String)](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)。

```
content = content.replaceAll(Pattern.quote(a), b); 
```

另外，作为旁注，在这种情况下，您可能会发现[String#replace(CharSequence, CharSequence)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)比 replaceAll 更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:51:52.597

您的问题可能源于没有转义您要替换的字符以及您要替换的字符。正则表达式可能不是您想在此处使用的工具。来自 www.regular-expressions.info，要注意的字符是 []\^$.|?*+()

在该网站上阅读以查看正则表达式的用途/限制。

# mediaelement.js - MediaElement.js 播放器轨迹栏在音频结尾附近跳跃

> ID：12268634
> 
> 赞同：1
> 
> 时间：2012-09-04T17:36:25.517
> 
> 标签：mediaelement.js

我已经设法让 media element.js 正常工作，但是当音乐接近尾声时，当前的小节会跳动并且不会一直完成到最后。我不知道这是怎么回事。

如果有帮助，我已经把它上传到这里。（它在底部）

[http://sites.lukespoor.me/mediaelement/blog.html](http://sites.lukespoor.me/mediaelement/blog.html)

# c# - 从 c# 运行 gpg.exe 时出错

> ID：12268648
> 
> 赞同：0
> 
> 时间：2012-09-04T17:37:44.177
> 
> 标签：c#, windows, windows-services, gnupg

嗨，我正在尝试使用 GPG 加密 zip，我可以从命令行执行此操作。当我将它集成到 C# 应用程序中时，它运行良好。但是当我将它与 Windows 服务集成时，**gpg2.exe 关闭时出现错误**

以下是异常详情

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: gpg2.exe
  Application Version:  0.0.0.0
  Application Timestamp:    4fa14f63
  Fault Module Name:    StackHash_e51a
  Fault Module Version: 0.0.0.0
  Fault Module Timestamp:   00000000
  Exception Code:   c0000005
  Exception Offset: 00000000
  OS Version:   6.0.6002.2.2.0.272.7
  Locale ID:    1033
  Additional Information 1: e51a
  Additional Information 2: 4c0d4d78887f76d971d5d00f1f20a433
  Additional Information 3: e51a
  Additional Information 4: 4c0d4d78887f76d971d5d00f1f20a433 
```

以下是我用来加密的代码

公共布尔加密（字符串inRecipient，字符串sourceFile，字符串destinationFile）{

```
/// File info
FileInfo fi = new FileInfo(sourceFile);

ProcessStartInfo s = new ProcessStartInfo("cmd.exe");
s.CreateNoWindow = true;
s.UseShellExecute = false;
s.RedirectStandardInput = true;
s.RedirectStandardOutput = true;
s.RedirectStandardError = true;
s.WorkingDirectory = new FileInfo(pgpPath).DirectoryName;

bool processExited = false;

using (Process p = Process.Start(s))
{

    string recipient = " --recipient \"" + inRecipient + "\"";
    string output = " --output \"" + destinationFile + "\"";
    string encrypt = " --encrypt \"" + sourceFile + "\"";
    string homedir = " --homedir \"" + HomeDirectory + "\"";
    string cmd = "\"" + PgpPath + "\" " + recipient + output + encrypt;

    p.StandardInput.WriteLine(cmd);
    p.StandardInput.Flush();
    p.StandardInput.Close();
    processExited = p.WaitForExit(3500);
    p.Close();
}
return processExited; 
```

}

我无法使用问题签名找到任何东西。请帮忙

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-26T19:32:38.047

如果要使用 Process，为什么不直接运行 gpg.exe 而不是 cmd.exe？我只是为一个项目做了这个，并且没有遇到以下问题

```
private static void encrypt()
    {
        //have to list full path, adding to PATH had no effect 
        ProcessStartInfo gpg = new ProcessStartInfo(
            @"C:\Program Files (x86)\GnuPT\GPG\gpg.exe",
            @"--no-options --yes --armor --recipient ""recipient"" --encrypt ""file"""
        );
        Process.Start(gpg);
    } 
```

只需将所有命令行参数作为第二个参数传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T17:51:49.530

这很可能是由用户上下文问题引起的。运行服务的用户帐户可能无权访问您尝试加密的文件。

要测试此理论，请转到服务属性并在“登录”选项卡中输入您知道可以访问该文件的帐户。最好与您用于运行 C# 应用程序的帐户/密码相同

您还应该确保您的代码使用文件的完整路径进行加密，而不是相对路径。

# ruby-on-rails - application.html.erb 中的 Javascript 产生，无法使其工作。Ruby on Rails？

> ID：12268649
> 
> 赞同：0
> 
> 时间：2012-09-04T17:37:45.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, yield

我在 application.html.erb 中有这样的声明：

```
<%= yield(:javascript) %> 
```

我有以下 Javascript，它应该响应产量：

```
<% content_for : javascript do %>

  <script type="type/javascript">
    $(function() {
       call_to_function();
   });

  </script>

<% end %> 
```

如果我将上面的块放在 home/index.html.erb 中，它可以正常工作，但我想以某种方式使其始终可用于 application.html.erb，而不仅仅是当我调用 home#index 时。

我怎样才能做到这一点，任何指针将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:05:12.807

而不是使用

```
 <%= yield(:javascript) %> 
```

你可以直接把你的java脚本放到app/views/layout中的application.html.erb来共享代码，扔掉所有的页面。

当你有相同的内容时，不需要使用yield。当我们有每个页面的特定代码不同时使用yield，从每个页面我们调用yield来实际替换yield块的内容。因此，将 <%= yield(:javascript) %> 替换为

```
 <script type="type/javascript">
$(function() {
   call_to_function();
}); 
```

出现在您的所有页面中。

# css - 将标记插入 h:outputText 以增强某些单词 jsf

> ID：12268654
> 
> 赞同：0
> 
> 时间：2012-09-04T17:38:25.673
> 
> 标签：css, jsf-2

我想`<span>` 在这个 outputText 的值中插入 a ：

```
<h:outputText id="jesuis1" value="la quantité nécéssaire : #{editCommandController.myCom.nbreExemplaire*editCommandController.myCom.nbrePage}" /> 
```

我的目标是 `{editCommandController.myCom.nbreExemplaire*editCommandController.myCom.nbrePage}` 通过 css 来增强它，但它产生了一个错误

你有什么主意吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:34:48.213

你需要`escape`属性！

`<h:outputText escape="false" value="#any text including el that evaluates to html tags"/>`

或者你可以使用

> ```
> <h:outputFormat escape="true" value="text with {0} tags>
>     <f:param value="#{bean.htmlExpression}" />
> </h:outputFormat> 
> ```

# c# - ConcurrentDictionary 枚举和锁定

> ID：12268655
> 
> 赞同：33
> 
> 时间：2012-09-04T17:38:32.283
> 
> 标签：c#, .net, concurrency

如果我有一个 ConcurrentDictionary，我是否需要在使用它循环时锁定它`foreach`？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-04T17:40:24.483

> 如果我有一个 ConcurrentDictionary，在使用 foreach 循环遍历它时是否需要锁定它？

不。从文档中[`ConcurrentDictionary.GetEnumerator`](http://msdn.microsoft.com/en-us/library/dd287131.aspx)：

> 从字典返回的枚举器可以安全地与字典的读取和写入同时使用，但它并不代表字典的即时快照。通过枚举器公开的内容可能包含调用 GetEnumerator 后对字典所做的修改。

只要您对此感到满意，就不需要任何锁定。

# jquery-ui - JQueryUI 对话框自动打开和按钮不起作用

> ID：12268658
> 
> 赞同：1
> 
> 时间：2012-09-04T17:38:54.083
> 
> 标签：jquery-ui

我试图让一个 JQueryUI (1.8.23) 对话框在 ASP.NET MVC 视图上工作。我已将对话框指定为“autoOpen：false”，并在对话框上指定了一些按钮。

第一个问题是对话框似乎不尊重“autoOpen：false”声明，并且总是在页面加载时打开。第二个问题是我指定的按钮不显示；当我从页面上的链接打开对话框或在页面加载时打开对话框时。

我设置对话框的 Javascript 是：

```
 $(function() {
        var actionUrl = "";

        var passReason = $("#passReason"),
        allFields = $([]).add(passReason);

        $("#pass-dialog").dialog({
            autoOpen: false,
            height: 100,
            width: 300,
            modal: true,
            buttons: {
                "Pass": function() {
                    actionUrl = actionUrl.replace('COMMENT', escape(passReason.combobox('getValue')));
                    document.location = actionUrl;
                    $(this).dialog("close");
                },
                "Cancel": function() {
                    $(this).dialog("close");
                }
            },
            close: function() {
                $(this).dialog("close");
            }
        });

        $(function() {
            $("#passReason").combobox({
                url: '<%= Url.Action("GetOverrideReasonCodes", "Statistics") %>',
                valueField: 'code',
                textField: 'description',
                method: 'GET',
                mode: 'remote'
            });
        });
    });

    function getManagerComment(jobId, routeId, crisId) {
        actionUrl = '<%= Url.Action("ManualCompleteSegment", "Statistics", new RouteValueDictionary{{"jobId", "JOBID"}, {"routeId", "ROUTEID"}, {"crisId", "CRISID"}, {"comment", "COMMENT"} }) %>';
        actionUrl = actionUrl.replace('JOBID', jobId);
        actionUrl = actionUrl.replace('ROUTEID', routeId);
        actionUrl = actionUrl.replace('CRISID', crisId);

        $("#pass-dialog").dialog("open");
    }

    function getManagerRouteComment(jobId, routeId) {
        actionUrl = '<%= Url.Action("ManualCompleteRoute", "Statistics", new RouteValueDictionary{{"jobId", "JOBID"}, {"routeId", "ROUTEID"}, {"comment", "COMMENT"} }) %>';
        actionUrl = actionUrl.replace('JOBID', jobId);
        actionUrl = actionUrl.replace('ROUTEID', routeId);

        $("#pass-dialog").dialog("open");
    } 
```

代表我的对话内容的是：

```
 <div id="pass-dialog" title="Enter Pass Reason">
    <form>
    <fieldset>
        <label for="passReason">Pass Reason: </label>
        <input id="passReason" name="passReason" class="easyui-combobox" />
    </fieldset>
    </form>
</div> 
```

我在发出的 HTML 下方。

有什么建议么？

谢谢，马修

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:28:26.377

发现 jQueryUI 和“EasyUI”CSS 文件之间存在冲突。一旦我从等式中删除 EasyUI 并进入我的下拉列表的更多手动填充，一切都按预期工作。

# c# - 给定以下代码，如何构造 USING 语句？

> ID：12268660
> 
> 赞同：0
> 
> 时间：2012-09-04T17:38:56.820
> 
> 标签：c#, using

这可行，但我想使用“使用”关键字。

```
Stream st = null;

st = request.GetRequestStream();
st.Write(bytes, 0, bytes.Length);         
st.Close(); 
```

我将如何在这里使用关键字“使用”？

使用（流 st = ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T17:40:11.390

```
using (Stream st = request.GetRequestStream())
{
    st.Write(bytes, 0, bytes.Length);         
} 
```

# linux - Linux 脚本变量“$$”

> ID：12268661
> 
> 赞同：0
> 
> 时间：2012-09-04T17:39:01.860
> 
> 标签：linux, shell

> **可能重复：**
> [$$ 在 shell 中是什么意思？](https://stackoverflow.com/questions/78493/what-does-mean-in-the-shell)

我正在阅读 Linux 的 shell 脚本并遇到变量`$$`：两个美元符号。基本上整行是

```
 work_dirname=/tmp/my-work-$$ 
```

是什么`$$`意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T17:42:00.687

`$$`给出 shell 的进程 ID。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T17:43:05.417

> 它是脚本本身的进程 ID (PID)。该`$$`变量经常在脚本中用于构造“唯一”临时文件名（参见示例 32-6、示例 16-31 和示例 15-27）。这通常比调用 mktemp 更简单。

（来源：[http](http://tldp.org/LDP/abs/html/internalvariables.html#PROCCID) ://tldp.org/LDP/abs/html/internalvariables.html#PROCCID ）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T17:43:10.443

它是正在执行的脚本的进程 ID。这可用于为临时文件创建一个唯一的文件名，这就是您正在查找的脚本可能正在执行的操作。

参见：[http ://tldp.org/LDP/abs/html/internalvariables.html#PROCCID](http://tldp.org/LDP/abs/html/internalvariables.html#PROCCID)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T17:49:43.650

@KingsIndian 是对的： `$$`给出 shell 的进程 ID。

但是什么是*进程 ID？*

要理解这一点，试试这个：

```
$ echo $$
$ sh
$ echo $$
$ exit
$ echo $$ 
```

第一个和第三个回显打印相同的进程 ID，但中间一个打印不同的。不同之处在于该`sh`命令会挂起您现有的 shell 并打开一个新的 shell，这是一个新进程并且有自己的 ID。

当您希望每个 shell 拥有自己的文件时使用示例中的语法，该文件不会与其他 shell 打开的文件冲突。这是否健壮取决于将对该文件执行的操作，但这是一种有时会被使用的策略。

另请参阅`mktemp`命令。

# php - mysql_num_rows() 使用 AND 时返回 0

> ID：12268662
> 
> 赞同：0
> 
> 时间：2012-09-04T17:39:02.077
> 
> 标签：php, mysql, sql

我正在尝试根据 wordpress 中的此查询检索行数：

```
protected function wp_has_facility($fid)
{
    //global $wpdb;

    $fid = intval($fid);

    $sql = "SELECT post_id FROM wprf_postmeta WHERE meta_value = '".$fid."' AND meta_key = 'facility_id'";
    $result = mysql_query($sql) or die(mysql_error());

    $num_rows = mysql_num_rows($result);

    echo $num_rows;

    return $num_rows;
} 
```

运行此函数时，$num_rows 返回 0。

如果我回显查询字符串并在 phpmyadmin 中运行它，它会成功选择给我一些行。

经过进一步调查，看起来当我对 meta_value 进行硬编码时，它会给我一个行数。但是，如果我用变量填充字符串，它就不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T17:43:18.537

这仅意味着您的表当前不包含满足这两个条件的记录。

### 关于您的代码的备注：

不需要连接，您可以将查询替换为：

```
$sql = "SELECT post_id FROM wprf_postmeta WHERE meta_value = '$fid' AND meta_key = 'facility_id'"; 
```

`mysql_*`函数已被弃用，您应该避免使用它们，因为它们将在 PHP 的未来版本中被删除。这里是[替代品](http://php.net/manual/en/mysqlinfo.api.choosing.php)。

# java - spring mvc 在 cloudfoundry 上不起作用

> ID：12268665
> 
> 赞同：1
> 
> 时间：2012-09-04T17:39:09.820
> 
> 标签：java, spring, session, spring-mvc, cloud-foundry

我有一个使用 spring-mvc 开发的应用程序。我将应用程序部署到 cloudfoundry。

在我的本地一切都很好，但是在 cloudfoundry 会话对象上没有成功呈现。

这是我的申请

[http://jelibo.final.cloudfoundry.com/](http://jelibo.final.cloudfoundry.com/)

登录凭据是：测试/测试

登录后左侧菜单上的休闲“Hesabım”链接。

我正在尝试使用 eclipse 插件和“mvn clean verify cf:update cf:restart”部署我的应用程序

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:39:17.317

似乎您的表达式中有一个空格。当我查看您的来源时，我看到以下内容：

```
<font color="#777" style="font-size: 30px; font-weight: bold;">${merc.merchantName }</font> 
```

如您所见，末尾有一个空格`${merc.merchantName }`

尝试删除空间并将其保留，`${merc.merchantName}`然后查看是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:31:35.550

确保您正在使用`org.springframework.web.servlet.ModelAndView;`

有时`import org.springframework.web.portlet.ModelAndView;`会由 IDE 自动导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T20:40:37.700

问题是关于这个讨论

[Spring MVC：ModelAndView 对象没有被带到视图中](https://stackoverflow.com/questions/8314404/spring-mvc-modelandview-objects-are-not-getting-carried-to-the-view)

我的本地是tomcat7；但是cloudfoundy适用于tomcat6。所以 web.xml 的版本必须是 version2.4 规范。

```
xmlns="http://java.sun.com/xml/ns/j2ee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-   app_2_4.xsd" 
```

# c# - 使 MediaElement 支持更多的视频编解码器

> ID：12268668
> 
> 赞同：9
> 
> 时间：2012-09-04T17:39:21.763
> 
> 标签：c#, .net, vb.net, windows-runtime, mediaelement

有没有办法`MediaElement`支持更多的视频编解码器，比如，`mkv`等？如果没有，是否有任何其他控件支持更多视频编解码器？`flv``mov`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T12:01:44.370

你见过[播放器框架](http://playerframework.codeplex.com/)吗？它是支持 Windows 8 的开源组件，是 Microsoft 媒体平台的一部分，由 Microsoft 开发。*它是标准MediaElement*控件的替代品，并提供插件机制。我不确定您是否可以通过这种机制支持额外的编解码器。

除此之外，您还可以扩展媒体平台（尽管扩展必须用 C++ 编写），如 Microsoft 提供的这些示例所示：

*   [媒体扩展示例](http://code.msdn.microsoft.com/windowsapps/Media-extensions-sample-7b466096)
*   [MediaStreamSource 媒体扩展示例](http://code.msdn.microsoft.com/windowsapps/MediaStreamSource-media-dfd55dff)

第二个示例非常有趣，因为它是一个示例媒体扩展，添加了Silverlight 中的*MediaStreamSource*机制。多亏了这个扩展，您可以在 C#/VB.NET 中实现自己的*MediaStreamSource ，为**MediaElement*提供内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:11:52.557

这似乎是不可能的，因为 WinRT 具有完全不同的 API 集，并且所有现有的基于 win32 的编解码器都不会运行，除非编解码器所有者重写它们。一种很长的方法是将 win32 代码移植到 winrt 中，这需要对两者都有深入的了解，而且这样做似乎太长了。即使您能以某种方式找到使现有编解码器工作的方法，它也无法在基于 arm 的 Windows 8 平板电脑上工作。

这意味着，除了 Microsoft 提供的 winrt 之外，没有其他编解码器。

您的选择是将它们转换为 h.264 视频，这已成为 h.264 在所有设备上播放的标准。苹果在标准化视频方面做得很好。从 Win 7 开始，微软提供了对 h.264 的内置支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-25T08:16:18.833

MediaElement 播放 Windows 媒体播放器可以播放的任何内容。因此，如果您在 PC 上安装了正确的编解码器集，它可以是一个非常通用的媒体播放器。

我个人已经安装了[K-Lite 编解码器](http://www.majorgeeks.com/files/details/k_lite_mega_codec_pack.html)

以及[Media_player_codec_pack 编解码器](http://www.majorgeeks.com/files/details/media_player_codec_pack.html)

现在我的 Windows Media Player 在播放 mp4 文件时不再滞后。只需按照安装程序的建议并在开始安装过程之前重新启动您的 PC。另外...它试图通过对话框欺骗您安装辅助软件，所以当心！

安装后，只需记住在应用程序的视频设置中试验“首选加速”参数，看看根据您的硬件哪个更好。我已将其设置为 - CUVID。

我还安装了这套[编解码器来支持avi格式](http://www.free-codecs.com/Combined_Community_Codec_Pack_download.htm)

希望这可以帮助 ：）

# c# - ListBox 中的项目选择错误（Windows Phone、Caliburn.Micro、Rx）

> ID：12268670
> 
> 赞同：1
> 
> 时间：2012-09-04T17:39:39.283
> 
> 标签：c#, windows-phone-7, system.reactive, caliburn.micro

我使用 Caliburn Micro 和 Reactive Extensions 为 Windows Phone 7 开发了一个应用程序。

该应用程序有一个带有`ListBox`控件的页面：

```
<Grid x:Name="ContentPanel"
          Grid.Row="1"
          Margin="12,0,12,0">
      <ListBox ItemsSource="{Binding Items}">
          <ListBox.ItemTemplate>
              <DataTemplate>
                  <Views:ItemView Margin="0,12,0,0" />
              </DataTemplate>
          </ListBox.ItemTemplate>
      </ListBox>
</Grid> 
```

我将下一个`ItemView`用作`DataTemplate`：

```
<UserControl ...>
    <Grid x:Name="LayoutRoot"
          cal:Message.Attach="[Event Tap] = [Action SelectItem]">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Column="0"
                   Style="{StaticResource PhoneTextLargeStyle}"
                   Text="{Binding Name}"
                   TextWrapping="Wrap" />

        <TextBlock Grid.Column="1"
                   Foreground="{StaticResource PhoneDisabledBrush}"
                   Style="{StaticResource PhoneTextLargeStyle}"
                   Text="{Binding Id}" />
    </Grid>
</UserControl> 
```

对应的`ItemViewModel`看起来像这样：

```
public class ItemViewModel
{
    private readonly INavigationService _navigationService;

    public int Id { get; private set; }

    public string Name { get; private set; }

    public ItemViewModel(Item item)
    {
        Id = item.Id;
        Name = item.Name;

        _navigationService = IoC.Get<INavigationService>();
    }

    public void SelectItem()
    {
        _navigationService.UriFor<MainViewModel>()
            .WithParam(x => x.Id, Id)
            .Navigate();
        }
    }
} 
```

`ListBox`填充项目：

```
public class ListViewModel : Screen
{
    private readonly IItemsManager _itemsManager;

    private List<ItemViewModel> _items;

    public List<ItemViewModel> Items
    {
        get { return _items; }
        private set
        {
            _items = value;
            NotifyOfPropertyChange(() => Items);
        }
    } 

    public ListViewModel(IItemsManager itemsManager)
    {
        _itemsManager = itemsManager;
    }

    protected override void OnViewReady(object view)
    {
        base.OnViewReady(view);           

        Items = null;

        var list = new List<ItemViewModel>();

        _itemsManager.GetAll()
            .SubscribeOn(ThreadPoolScheduler.Instance)
            .ObserveOnDispatcher()
            .Subscribe((item) => list.Add(new ItemViewModel(item)), 
                (ex) => Debug.WriteLine("Error: " + ex.Message), 
                () => 
                    {
                        Items = list;
                        Debug.WriteLine("Completed"));
                    }
    }
} 
```

问题就从这里开始了。

`_itemsManager`正确返回所有项目。并且所有项目都正确显示在`ListBox`. 大约有 150 项。

当我点击一个项目时，必须调用`SelectItem`相应的方法。`ItemViewModel`并且对于`ListBox`. 但是对于所有 next items`SelectItem`方法的调用绝对不正确`ItemViewModel`。例如，我点击项目 34 并`SelectItem`为项目 2 调用方法，我点击 45 - 为项目 23 调用方法，依此类推。并且项目之间没有依赖关系。

我已经为寻找错误而头疼了。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:01:50.453

在阅读[了讨论论坛](http://caliburnmicro.codeplex.com/discussions/299193)和Caliburn.Micro[文档中的页面后找到了解决方案。](http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Conventions&referringTitle=Documentation)所有的问题都是因为 Caliburn.Micro 的约定。

为了解决我添加到`DataTempalate`下一个代码的问题：`cal:View.Model={Binding}`. 现在页面的一部分`ListBox`看起来像这样：

```
<Grid x:Name="ContentPanel"
      Grid.Row="1"
      Margin="12,0,12,0">
    <ListBox ItemsSource="{Binding Items}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Views:ItemView Margin="0,12,0,0" cal:View.Model={Binding}/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

我认为这不是一个完美的答案。因此，如果有人可以提供更好的答案和解释，我会很高兴。

# javascript - 在 IE7 中 window.open() 后权限被拒绝

> ID：12268673
> 
> 赞同：2
> 
> 时间：2012-09-04T17:39:51.350
> 
> 标签：javascript, winforms, internet-explorer-7

我们有一个带有嵌入式 IE 控件的 winforms 应用程序。

在这个 IE 控件中，我们运行一个 web 应用程序（我控制的是 web 应用程序，但不是 winforms 应用程序）。

在 Web 应用程序中，我运行一些 javascript 来打开一个子窗口并用 HTML 填充它：

```
 var features = "menubar=no,location=no,resizable,scrollbars,status=no,width=800,height=600,top=10,left=10";
    newTarget = "reportWin" + String ( Math.random () * 1000000000000 ).replace( /\./g ,"" );
    reportWindow = window.open('', newTarget, features); 
    var d = reportWindow.document; // <-- Exception is thrown here
    d.open();
    d.write('<head>\r\n<title>\r\n...\r\n</title>\r\n</head>');
    d.write('<body style="height: 90%;">\r\n<table style="height: 100%; width: 100%;" border="0">\r\n<tr>\r\n<td align="center" valign="middle" style="text-align:center;">\r\n');
    d.write(...);
    d.close(); 
```

当我们在这个 WinForms 应用程序中运行 Web 应用程序时（但不是单独运行，也不是在另一个 WinForms 应用程序中），我们在指示的行中收到 Javascript 错误：

```
Line 0: Access denied 
```

关于为什么会发生这种情况或如何避免这种情况的任何想法？请注意，该窗口未打开 URL；它只是一个空窗。

在同一个应用程序中，在同一个域中打开具有指定 URL 的窗口确实有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T09:07:34.040

基于：

1.  [IE 6/7 Access Denied 试图访问弹出窗口.document](https://stackoverflow.com/questions/735136/ie-6-7-access-denied-trying-to-access-a-popup-window-document)
2.  [http://thecodecave.com/2006/07/20/how-to-get-around-access-is-denied-in-a-windowopen-javascript-call/](http://thecodecave.com/2006/07/20/how-to-get-around-access-is-denied-in-a-windowopen-javascript-call/)

您遇到的问题是正在打开的 URL 需要与打开它的页面位于同一域中。大概一个空白的 Url 不会共享其创建者的域。我写了几个快速测试网页，发现

1.  调用`var reportWindow = window.open('', newTarget, features);`导致访问被拒绝错误。
2.  同样的事情`var reportWindow = window.open('http://google.com', newTarget, features);`
3.  但是在站点中打开另一个页面进行渲染确实有效`var reportWindow = window.open('WebForm2.aspx', newTarget, features);`

最后一个弹出一个窗口，指向`WebForm2.aspx`执行此代码：

```
window.document.open();
window.document.write('<head>\r\n<title>\r\n...\r\n</title>\r\n</head>');
window.document.write('test<body style="height: 90%;">\r\n<table style="height: 100%; width: 100%;" border="0">\r\n<tr>\r\n<td align="center" valign="middle" style="text-align:center;">\r\n');
window.document.close(); 
```

# java - 带串口的Java接口

> ID：12268674
> 
> 赞同：3
> 
> 时间：2012-09-04T17:39:53.473
> 
> 标签：java, c, serial-port, listener

我正在寻找一个库接口，以允许我检查已发布到串行端口的内容。

更准确地说，我正在使用 teensy 2.0 与按钮交互。我想在程序中运行代码而不模拟按键，并认为将某些内容打印到串行将是连接到 Java 程序的一种简单方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T20:25:04.643

我曾经使用[RxTx 库](http://rxtx.qbang.org/wiki/index.php/Main_Page)通过 USB 端口在 PC 和外部 MCU 之间建立通信通道。工作得很好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:54:51.957

对于我自己，我正在使用 jssc 库与串行端口进行通信，它工作正常，我在这里它会保持这种状态，这是链接：[http ://code.google.com/p/java-simple-serial -连接器/下载/列表](http://code.google.com/p/java-simple-serial-connector/downloads/list)

# jsp - 将 java bean 从 jsp 传递到 servlet

> ID：12268677
> 
> 赞同：0
> 
> 时间：2012-09-04T17:40:02.690
> 
> 标签：jsp, servlets

我发现了很多解决方案，但没有一个对我有用。

这是jsp中的bean

```
<jsp:useBean id="customer" class="com.objects.Customer" scope="request" />
<form action="proceed" method="post">
    <% customer.setEmail("abc");%>
    <input type="submit" value="Proceed" />
</form> 
```

这是小服务程序

```
Customer customer = (Customer)request.getAttribute("customer");
System.out.println(customer.getEmail()); 
```

然后它就繁荣了，客户对象为空。我试图更改为 session 和 getsession 但仍然没有工作。

谁能指出我的错误。？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:09:13.697

请求属性不能以这种方式工作。客户 bean 在`request`对应于**前一个**请求的对象上实例化：显示表单的对象。当您将表单提交给 servlet 时，您放置`customer`对象的请求早已不复存在。

但它应该适用于`<jsp:useBean id="customer" class="com.objects.Customer" scope="session" />`并且`session.getAttribute("customer")`因为`session`假设您在浏览器中启用了 cookie，这些对象跨越多个请求。如果它不起作用，那么您提供的代码中还有另一个问题不可见。

还有一个建议：使用标准`<jsp:setProperty name="customer" property="email" value="abc" />`来设置 bean 值。

# sql - SQL 嵌套查询计算

> ID：12268678
> 
> 赞同：0
> 
> 时间：2012-09-04T17:40:03.547
> 
> 标签：sql

```
 SELECT *, 
           (select SUM(sl.priceeach*sl.qty) as 'tot' 
                  from salesline sl where sl.soid=so.soid) as 'total',
           so.total,
           so.discount,
           so.tax
    from salesorder so 
```

我试图弄清楚这个查询，但我无法在另一列中显示总数以显示含税和减去折扣的数据

```
ERROR : #1054 - Unknown column 'so.total' in 'field list' 
```

我的查询有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:07:34.413

首先，您不想为此使用相关子查询。事实上，你应该永远不要使用它们，因为它们像游标一样逐行处理。

CTE 或派生表将完成这项工作。

```
SELECT a.total, 
       so.discount, 
       so.tax 
FROM salesorder so 
JOIN 
    (SELECT sl.soid,SUM(sl.priceeach*sl.qty) AS 'total'  
     FROM salesline sl GROUP BY sl.soid) A
    ON A.soid = so.soid 
```

现在 total 是一个可用列，可用于查询中的其他计算，例如：

```
SELECT a.total, 
       so.discount, 
       so.tax,
       so.tax*a.total as TaxableAmount 
FROM salesorder so 
JOIN 
    (SELECT sl.soid,SUM(sl.priceeach*sl.qty) AS 'total'  
     FROM salesline sl GROUP BY sl.soid) A
    ON A.soid = so.soid 
```

# ios - 当我调用 facebook authorize:permissions 时，它一直要求允许该应用程序

> ID：12268685
> 
> 赞同：1
> 
> 时间：2012-09-04T17:40:20.460
> 
> 标签：ios, facebook, sdk

我正在使用 facebook-ios-sdk。我基本上是从 appDelegate 获取 facebook，每次它碰到我的 viewController 时，它都会调用这个方法：

```
- (void)openFacebook{
    appDelegate.facebook = [[Facebook alloc] initWithAppId:@"11234567892515" andDelegate:self];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"]) {
        appDelegate.facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        appDelegate.facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }

    if (![appDelegate.facebook isSessionValid]) {
        NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"user_likes", 
                                @"read_stream",
                                @"user_photos",
                                //@"user_about_me",
                                //@"email",
                                @"publish_stream",
                                @"publish_actions", 
                                nil];
        [appDelegate.facebook authorize:permissions];
        NSLog(@"Facebook session is valid"); 
        [appDelegate.facebook extendAccessTokenIfNeeded];
    } 

} 
```

问题是......即使应用程序被允许，它仍然会出现对话框以允许应用程序......

即使我已经授权它，我如何才能阻止它每次都要求我授权应用程序时弹出？请保持简单，我不是天才，谢谢:)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:18:10.697

我的猜测是，一旦您登录，您就不会存储 AccessToken 和 ExpiryDate。

添加此项以查看您是否在 UserDefaults 中有这些商店

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSLog(@"%@", [defaults dictionaryRepresentation]); 
```

在你的 Facebook fbDidLogin 方法中你有这样的吗？

```
// Store session info.
    [[NSUserDefaults standardUserDefaults] setObject:_facebook.accessToken forKey:@"FBAccessTokenKey"];
    [[NSUserDefaults standardUserDefaults] setObject:_facebook.expirationDate forKey:@"FBExpirationDateKey"];
    [[NSUserDefaults standardUserDefaults] synchronize]; 
```

# html - 如何使用 css 隐藏列表并在鼠标位于上方时显示它？

> ID：12268693
> 
> 赞同：0
> 
> 时间：2012-09-04T17:41:05.967
> 
> 标签：html, css, list, navigation

我有这个菜单：

```
home
Pictures
Picture 1
Picture 2
Sounds
Videos 
```

我想要`Picture 1`并且`Picture 2`被隐藏，除非我将鼠标移到上面`"Pictures"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:46:40.340

您必须在这里使用 javascript，CSS 本身没有任何逻辑。将图片1和图片2的显示属性设置为none，然后将鼠标悬停在图片上时用javascript设置为block。使用 PrototypeJS 你会做类似的事情

```
$("pictures").observe("mouseover", function(){ $("Picture 1").setStyle({display: "block"}) } )
$("pictures").observe("mouseout", function(){ $("Picture 1").setStyle({display: "none"}) } ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:47:27.083

因为您的问题明显缺乏信息，尽管我对这个问题发表了自己的评论，但我将猜测您的 HTML 并假设您正在使用一个`ul`元素来包含您的列表：

```
<ul>
    <li>home</li>
    <li>Pictures
        <ul>
            <li>Picture 1</li>
            <li>Picture 2</li>
        </ul></li>
    <li>Sounds</li>
    <li>Videos</li>
</ul>​ 
```

如果是这种情况，那么我建议使用以下 CSS：

```
ul ul {
    display: none;
}

ul li:hover ul {
    display: block;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jWYwr/)。

鉴于我怀疑您正在尝试制作某种菜单结构（再次，基于缺乏信息的疯狂猜测），我正在更新上面的 CSS 以演示飞出式 CSS 菜单：

```
ul {
    /* adjust to taste */
    width: 6em;
}

ul ul {
    display: none;
    /* to more easily show the connection between the parent li and child ul
       adjust to taste, of course */
    background-color: inherit;
}

li {
    /* to position the child ul element relative to its parent */
    position: relative;
}

li:hover {
    /* just to identify which li element is currently hovered */
    background-color: #ffa;
}

li li:hover,
li:hover li:hover {
    /* so the hovered li is differentiated from its parent ul's background
       and the background of its grandparent li. Adjust to taste */
    background-color: #dda;
}

ul li:hover ul {
    /* so that it's visible on the page */
    display: block;
    position: absolute;
    /* to be level with its parents top-edge */
    top: 0;
    /* so that the li appears on the right of the parent li */
    left: 100%;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/jWYwr/1/)。

# r - 如何对有向图进行排序和可视化？

> ID：12268697
> 
> 赞同：3
> 
> 时间：2012-09-04T17:04:33.067
> 
> 标签：r, graph-theory, data-visualization, igraph

我将 R 与[igraph](http://cran.r-project.org/web/packages/igraph/index.html)一起使用，并且我有一个带权重的方阵。我想整理一下。我想用`page.rank(g)`，我得到了一个相应的向量和它的值。

```
library(igraph)
g<-get.matrix()
page.rank(g)$value
page.rank(g)$vector 
```

现在，我想使用这些值进行排序，并在可能的情况下将其可视化。类似于下图的东西：

![在此处输入图像描述](../Images/6f54041ff592700af5a4d033631f767f.png)

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:43:02.510

选择基于力的布局并将顶点大小 ( `vertex.size`) 设置为与页面排名值成比例。[请参阅igraph 主页](http://igraph.sourceforge.net/screenshots2.html#2)上有关如何设置顶点大小的示例。（该示例使用`tkplot`，但您可以只使用它`plot`来代替。）您可以通过`vertex.label`参数设置顶点标签`plot`，并且`\n`允许制作多行标签。

# android - Android - 溢出小部件喜欢 ActionBar

> ID：12268701
> 
> 赞同：0
> 
> 时间：2012-09-04T17:41:41.957
> 
> 标签：android, widget, overflow, android-actionbar

我想创建自己的操作栏，其中包含按钮列表（带有文本的图标）。这具有溢出功能： - 每当数字按钮太多（例如，由于长文本而导致宽度超过屏幕大小）时，此操作栏必须溢出。示例是 HTC 手机的天气应用程序，如下所示：

![溢出操作栏](../Images/f0f186cad7c4d8c8e92cd98f8daef99e.png)

和：

![在此处输入图像描述](../Images/d753c6bcf961a2329543e4934724f5a4.png)

我们可以翻转操作栏中的按钮来执行指定的操作。

Android 已经引入了 ActionBar 并且它具有溢出功能。然而这不符合我们的期望，所以我想创建自己的小部件。

有谁知道如何实现它？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:49:14.283

您可以使用[**`HorizontalScrollView`**](http://developer.android.com/reference/android/widget/HorizontalScrollView.html), 并将所有内容放入其中。通过将布局宽度设置为`match_parent`并将布局高度设置为`wrap_content`，您可以实现几乎相同的效果。

```
<HorizontalScrollView
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <!-- Put the buttons here -->
</HorizontalScrollView> 
```

# css - 如何在浏览器窗口的边界（垂直和水平）中保持居中的 div？

> ID：12268703
> 
> 赞同：3
> 
> 时间：2012-09-04T17:41:46.730
> 
> 标签：css, ios, html

我正在努力使图像和链接始终保留在浏览器窗口中。这是[网站](https://dl.dropbox.com/u/3980495/5PORE/HTML/index.html)。在 iPad 上加载时，居中的内容比窗口大，如图所示![这里](../Images/7ab6ebdf07c41f33b9e5f93bbdae9868.png)。

我希望它显示为![这个](../Images/1a4040e715741665d9d0ef6f09609f46.png)（显然没有黑色边框）。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:45:38.393

在没有任何额外标记的情况下使元素居中的技巧是使用`translate`：

```
div {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translateX(-50%) translateY(-50%);
} 
```

这是小提琴：http: [//jsfiddle.net/QE8KV/](http://jsfiddle.net/QE8KV/)

* * *

**PS**不要忘记供应商前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:10:56.987

Joseph Silber 的答案的问题是，如果窗口小于您的内容，则内容会被剪切。

然后你可以使用浮动技巧：http: [//jsfiddle.net/QE8KV/2/](http://jsfiddle.net/QE8KV/2/)

HTML：

```
<div id="top"></div>
<div id="center">Text</div> 
```

CSS：

```
html,body{
    height:100%;
    width:100%;
    margin:0;
    padding:0;
}
#top {
    float: left;
    height: 50%;
    margin-top: -150px;
    width: 100%;
}
#center{
    background: #2D285E;
    box-shadow: 1px 1px 4px #231E5C;
    color:white;

    width: 300px;
    height: 300px;
    margin:0 auto;
    clear:both;
} 
```

# objective-c - CGSizeMake 不适用于常量

> ID：12268706
> 
> 赞同：14
> 
> 时间：2012-09-04T17:42:02.847
> 
> 标签：objective-c

有没有办法做这种事情？

```
static const CGSize maxPageSize = CGSizeMake(460, 651); 
```

这是非法的，因为“Initializer 元素不是编译时常量”。

当然，我可以使用单独的花车，但我想知道是否有办法做到这一点。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-04T17:46:09.130

因为`CGSize`只是一个简单的 C 结构：

```
struct CGSize {
  CGFloat width;
  CGFloat height;
};
typedef struct CGSize CGSize; 
```

您可以使用初始化列表：

```
static const CGSize maxPageSize = {460, 651}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:54:40.400

```
CGSize 
```

包含宽度和高度值的结构。

```
struct CGSize {
   CGFloat width;
   CGFloat height;
};
typedef struct CGSize CGSize; 
```

**字段** 宽度 宽度值。高度 高度值。

```
const CGSize CGSizeZero; 
```

例如

```
static const CGSize pageSize = {320, 480}; 
```

# asp.net - 简单的 LinkBut ton 回发

> ID：12268709
> 
> 赞同：0
> 
> 时间：2012-09-04T17:42:22.123
> 
> 标签：asp.net, asp.net-mvc, vb.net, linq

这一定是有史以来最简单的问题。我试图使用带有“postbackurl”的链接按钮将值发布到另一个页面。它适用于一个按钮，但它是一个链接按钮是空白的。我不想使用查询字符串。有任何想法吗？

默认.aspx：

```
 <asp:LinkButton ID="LinkButton" postbackurl="~/2.aspx" Text="ThisIsATest" runat="server">ThisIsATest</asp:LinkButton> 
```

2.aspx：

```
 Dim test = Request.Form("LinkButton")

    Response.Write(test) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:45:24.730

尝试使用此代码

```
var text = ((LinkButton)PreviousPage.FindControl("LinkButton")).Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:43:37.477

使用 PreviousPage.FindControl 获取控件引用

```
Dim lb As LinkButton = DirectCast(PreviousPage.FindControl("LinkButton"), LinkButton)

If lb IsNot Nothing Then
     Response.Write(test.ID) ' display linkbutton ID
     Response.Write(test.Text) ' display linkbutton Text
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:51:14.863

尝试：

```
Protected Sub LinkButton1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles LinkButton1.Click
    Response.Redirect("2.aspx?id=" + somestring)
End Sub 
```

# macos - 任何可可的鼠标移动模式识别器？

> ID：12268714
> 
> 赞同：2
> 
> 时间：2012-09-04T17:42:37.567
> 
> 标签：macos, cocoa

我需要某种用于 Cocoa 的鼠标移动模式识别器。我特别需要的是识别鼠标“摇晃”或某种圆周运动。我读过[Protractor](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/36269.pdf)，但我想知道是否已经实现了某种库。

我目前正在设置一个全局事件监视器来跟踪系统范围内的鼠标移动，但我需要能够识别特定的模式，如圆周运动、摇晃和类似的模式。

```
_eventMonitor = [NSEvent addGlobalMonitorForEventsMatchingMask:NSMouseMovedMask handler:^(NSEvent *eventoEntrada) {
    NSLog(@"Movement detected");

    NSPoint loc = [NSEvent mouseLocation];
    NSLog(@"x:%.2f y:%.2f",loc.x, loc.y);
}]; 
```

有没有图书馆可以完成这项任务？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T10:12:58.073

您可以在 mac OS X 1 中使用 Quartz 库 - 在您的 applicationDidFinishLaunching 方法中定义鼠标事件掩码

```
CFMachPortRef      mouseEventTap;
CGEventMask        mouseEventMask;

CFRunLoopSourceRef runLoopMouseSource;

// Create an event tap. We are interested in key presses.

mouseEventMask = (1 << kCGEventMouseMoved) ;

mouseEventTap = CGEventTapCreate(kCGSessionEventTap, kCGTailAppendEventTap, 0,
                                 mouseEventMask, mouseCGEventCallback, NULL);

if (!mouseEventTap) {
    fprintf(stderr, "failed to create event tap\n");
    exit(1);
}

// Create a run loop source.
runLoopMouseSource = CFMachPortCreateRunLoopSource(
                                              kCFAllocatorDefault, mouseEventTap, 0);

// Add to the current run loop.

CFRunLoopAddSource(CFRunLoopGetCurrent(), runLoopMouseSource,
                   kCFRunLoopCommonModes);

// Enable the event tap.
 CGEventTapEnable(mouseEventTap, true); 
```

然后像这样实现回调函数mouseCGEventCallback

```
 CGEventRef mouseCGEventCallback(CGEventTapProxy proxy, CGEventType type,
                         CGEventRef event, void *refcon)
   {

    if (type == kCGEventMouseMoved)
    {
       //here you can detect any information you need from the event field key

       return event;
    }

 } 
```

有关事件字段的更多信息，请查看此

[https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html#//apple_ref/c/tdef/CGEventField](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html#//apple_ref/c/tdef/CGEventField)

希望对你有所帮助

# android - Android - 从 ListView 选择中获取数据库 ID

> ID：12268721
> 
> 赞同：0
> 
> 时间：2012-09-04T17:42:50.317
> 
> 标签：android, database, sqlite, android-listview, cursor

我有一个`ListView lv`使用`Cursor c`SQL 数据库中的 a 来填充它。选择了一个项目时，我需要获取行的ID。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:50:53.697

我假设您使用的是 SimpleCursorAdapter （或类似的），所以我会使用[OnItemClickListener](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)：

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        // id references the SQLiteDatabase _id column
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T09:07:39.163

这就是它对我的影响。在另一个类中，我创建了一个 List 类型的方法，并在 sqlite 数据库的列表中添加了列 ID 和项目的名称。

这是一段用于检索所选项目的列 ID 的代码。

```
 public List<String> list;
    adapt = new MyAdapter(this, R.layout.list_inner_view, list); //custom adapter
    listTask.setAdapter(adapt);

    listTask.setOnItemClickListener(new AdapterView.OnItemClickListener() {
       @Override
       public void onItemClick(AdapterView<?> adapterView, View v, int position, long l) {

           Integer id = list.get(position).getId();
          //position is the position of the item in the list.
       }
   }); 
```

结果：该项目在列表中的第 3 位。它的数据库 column_id（自动增量）值是 12，因为我已经删除了以前的项目。所以你期望的结果是 12，也就是变量 id 的值。

如果您不完全理解这一点，可能是因为我没有发布我的整个代码。但我会帮你解决你的问题。

# php - 如何将 MySQL 表行分配给不同的变量？

> ID：12268723
> 
> 赞同：0
> 
> 时间：2012-09-04T17:42:50.940
> 
> 标签：php, mysql, database

我的 MySQL 表只有 3 列。该列中的数据按 sub_id 编号排序，如下所示：

```
sub_id | field_name | field_val
1 ------- carname -------ford
1 ------- driver ------- michael
1 ------- licence -------123
2 ------- carname -------bmw
2 ------- driver ------- robert
2 ------- licence -------321 
```

对于使用表格，我有以下代码：

```
 $link = mysql_connect("xxx", "xxx", "xxx");
   mysql_select_db("xxx");
   mysql_query ('SET NAMES utf8');
   mysql_query ('SET CHARACTER SET utf8');
   $query = "select sub_id,field_name,field_val from wp_cformsdata WHERE sub_id IN ($ID)";
   $result = mysql_query($query); 
```

它通过所需的 ID 给了我一组行。我知道拥有如此凌乱的表格非常不舒服，但它是由插件自动创建的。**问题是如何将我得到的每一行分配给不同的变量？我想用这个变量来填充 html 文档。**对不起英语不好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:03:50.437

据我所知，您需要像循环一样简单的东西来读取文档的行。

```
<?php
$link = mysql_connect("xxx", "xxx", "xxx");
mysql_select_db("xxx");
mysql_query ('SET NAMES utf8');
mysql_query ('SET CHARACTER SET utf8');
$query = "select sub_id,field_name,field_val from wp_cformsdata WHERE sub_id IN ($ID)";
$result = mysql_query($query);
while($rows=mysql_fetch_array($result)){
?>
<div> <?php echo $rows['sub_id'];?> </div>
<div> <?php echo $rows['field_name'];?> </div>
<div> <?php echo $rows['field_val'];?> </div>
<?
}
mysql_close();
?> 
```

我希望这有帮助。您也可以使用 mysql_fetch_assoc()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:50:07.270

你不需要不同的变量。我建议`switch`在您的 PHP 代码中使用：

```
$link = mysql_connect("xxx", "xxx", "xxx");
mysql_select_db("xxx");
mysql_query ('SET NAMES utf8');
mysql_query ('SET CHARACTER SET utf8');
$query = "select sub_id,field_name,field_val from wp_cformsdata WHERE sub_id IN ($ID)";
$result = mysql_query($query);
while($row = mysql_fetch_assoc($result))
{
    switch($row['field_name'])
    {
        case 'carname':
            // do something
            break;
        case 'driver':
            // do something else
            break;
        // add more "case" here
        default:
            // do the default action here
    }
} 
```

此外，请阅读[此页面](http://php.net/manual/en/mysqlinfo.api.choosing.php)以帮助您选择使用什么而不是弃用的`mysql_*`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:46:11.000

“相反，应该使用 MySQLi 或 PDO_MySQL 扩展。” 从文档中，您正在使用的那些方法已被弃用。

这是您获取每个项目的方法，您必须循环，因为它是一个结果，设置。

```
while ($row = mysql_fetch_assoc($result)) {
    $car_name = $row['carname'];
    $driver =  $row['driver'];
} 
```

等等..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T17:46:00.407

您只需要遍历所有结果，手动将字段名称和 sub_id 与您期望的内容进行比较，然后将结果分配给条件中的变量。

就个人而言，我会对其进行迭代并创建一个 sub_id => 字段数组，因此类似于

```
while($row = mysql_row($result))
    $users[$row['sub_id']][$row['field_name']] = $row['field_value'] 
```

语法是错误的，因为我不记得确切的语法了`mysql_*`，但你明白了。

# twitter - 获取在指定时间跨度内发送的推文

> ID：12268724
> 
> 赞同：1
> 
> 时间：2012-09-04T17:42:54.933
> 
> 标签：twitter, twitter-anywhere

我正在寻找一种方法来收集用户在特定时间跨度内发送的所有推文。我需要它来根据发送推文的日期实现分页。显然没有办法收集像“直到”和“自从”这样的东西。我正在使用 JavaScript Anywhere API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:20:08.270

您可以使用一种方法：`GET statuses/user_timeline` 更多信息：[https ://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)

没有任何特定的日期范围运算符可以应用于此时间线，但因为您可以为每个请求获取大约 150-200 个状态。然后，您可以针对您正在寻找的日期范围查询您现在的本地数据集。

# flash - Flash 回退控件未使用 mediaelement.js 正确设置样式

> ID：12268727
> 
> 赞同：1
> 
> 时间：2012-09-04T17:43:06.790
> 
> 标签：flash, mediaelement.js

我在我的本地 IIS 服务器上运行它，我遇到了一个问题，当为 mediaelement.js 使用 Flash 后备时 - 时间线滑块不出现，背景样式不显示 - 字幕没有背景，隐藏式字幕菜单没有样式，无法选择选项... - 我认为这些都源于同一个问题。

所有这些都在以 HTML 5 运行时有效。

有人有想法么？

这是显示我遇到的问题的图片链接： [mediaelement.js flash bug](http://imgur.com/XG57m)

# ruby-on-rails - Ruby on Rails 测试加载器失败

> ID：12268734
> 
> 赞同：0
> 
> 时间：2012-09-04T17:43:56.160
> 
> 标签：ruby-on-rails

我正在尝试运行其他人在 Ruby on Rails 中编写的一些测试。他们曾经通过，但现在不再通过了。这就是我得到的堆栈跟踪：

```
USERNAME:functional user.name$ rake test
(in /Users/user.name/workspace/Build Visibility/Rails)
/Users/user.name/workspace/Build Visibility/Rails/config/routes.rb:9:in `block in <top (required)>': Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id (RuntimeError)
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:260:in `draw'
    from /Users/user.name/workspace/Build Visibility/Rails/config/routes.rb:1:in `<top (required)>'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `load'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `block in load'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `load'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application/routes_reloader.rb:40:in `each'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application.rb:108:in `reload_routes!'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise/rails.rb:14:in `block in <class:Engine>'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:34:in `call'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:42:in `each'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application/finisher.rb:52:in `block in <module:Finisher>'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/user.name/workspace/Build Visibility/Rails/config/environment.rb:5:in `<top (required)>'
    from /Users/user.name/workspace/Build Visibility/Rails/test/test_helper.rb:2:in `require'
    from /Users/user.name/workspace/Build Visibility/Rails/test/test_helper.rb:2:in `<top (required)>'
    from /Users/user.name/workspace/Build Visibility/Rails/test/unit/teams_test.rb:1:in `require'
    from /Users/user.name/workspace/Build Visibility/Rails/test/unit/teams_test.rb:1:in `<top (required)>'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:10:in `require'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9:in `each'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `select'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `<main>'
/Users/user.name/workspace/Build Visibility/Rails/config/routes.rb:9:in `block in <top (required)>': Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id (RuntimeError)
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.6/lib/action_dispatch/routing/route_set.rb:260:in `draw'
    from /Users/user.name/workspace/Build Visibility/Rails/config/routes.rb:1:in `<top (required)>'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `load'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `block in load'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:245:in `load'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application/routes_reloader.rb:40:in `each'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application.rb:108:in `reload_routes!'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/lib/devise/rails.rb:14:in `block in <class:Engine>'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:34:in `call'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:42:in `each'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.6/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application/finisher.rb:52:in `block in <module:Finisher>'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:30:in `run'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `each'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/application.rb:136:in `initialize!'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.6/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/user.name/workspace/Build Visibility/Rails/config/environment.rb:5:in `<top (required)>'
    from /Users/user.name/workspace/Build Visibility/Rails/test/test_helper.rb:2:in `require'
    from /Users/user.name/workspace/Build Visibility/Rails/test/test_helper.rb:2:in `<top (required)>'
    from /Users/user.name/workspace/Build Visibility/Rails/test/functional/buildtools_controller_test.rb:1:in `require'
    from /Users/user.name/workspace/Build Visibility/Rails/test/functional/buildtools_controller_test.rb:1:in `<top (required)>'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:10:in `require'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:10:in `block (2 levels) in <main>'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9:in `each'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:9:in `block in <main>'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `select'
    from /Users/user.name/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/rake_test_loader.rb:4:in `<main>'
Errors running test:units! #<RuntimeError: Command failed with status (1): [/Users/user.name/.rvm/rubies/ruby-1.9....]>
Errors running test:functionals! #<RuntimeError: Command failed with status (1): [/Users/user.name/.rvm/rubies/ruby-1.9....]> 
```

任何帮助或见解都会很棒。谢谢！

**编辑：**

```
SampleApp::Application.routes.draw do

  # devise_for :users do get '/users/sign_out' => 'devise/sessions#destroy' end

  match '/administration' => 'administration#show'
  match '/administration/:id' => 'administration#show' 
  match 'environment/:display_name' => 'environments#show'

  root :to => 'displays#show', :page => 1, :tab => Tab.first.id

  resources :settings do
    collection do 
      post "update_all"
    end
  end
  resources :buildtools do
    collection do
      post "update_all"
    end
  end
  resources :environments do
    collection do
      put :update_order
      post "update_all"
    end
  end
  resources :projects do
    collection do
      post "update_all"
    end
  end 
  resources :teams do
    collection do 
      put :update_order
      post "update_all"
      get "column_sort"
    end
    member do
      get "show_history"
    end
  end
  resources :plans do 
    collection do 
      post "update_all"
    end
  end
  resources :test_suites do
    collection do 
      post "update_all"
    end
  end
  resources :tabs do
    collection do
      put :update_order
    end
  end
  resources :environment_teams do
    collection do
        put :update_order
    end
  end
  resources :pages do
    collection do
      put :update_order
      post "update_all"
    end
  end
  resource  :display do
    collection do
      get "reset"
    end
  end
  resources :user, :controller => "user"
end
#SampleApp::Application.routes.draw do
  # The priority is based upon order of creation:
  # first created -> highest priority.

  # Sample of regular route:
  #   match 'products/:id' => 'catalog#view'
  # Keep in mind you can assign values other than :controller and :action

  # Sample of named route:
  #   match 'products/:id/purchase' => 'catalog#purchase', :as => :purchase
  # This route can be invoked with purchase_url(:id => product.id)

  # Sample resource route (maps HTTP verbs to controller actions automatically):
  #   resources :products

  # Sample resource route with options:
  #   resources :products do
  #     member do
  #       get 'short'
  #       post 'toggle'
  #     end
  #
  #     collection do
  #       get 'sold'
  #     end
  #   end

  # Sample resource route with sub-resources:
  #   resources :products do
  #     resources :comments, :sales
  #     resource :seller
  #   end

  # Sample resource route with more complex sub-resources
  #   resources :products do
  #     resources :comments
  #     resources :sales do
  #       get 'recent', :on => :collection
  #     end
  #   end

  # Sample resource route within a namespace:
  #   namespace :admin do
  #     # Directs /admin/products/* to Admin::ProductsController
  #     # (app/controllers/admin/products_controller.rb)
  #     resources :products
  #   end

  # You can have the root of your site routed with "root"
  # just remember to delete public/index.html.
  # root :to => 'welcome#index'

  # See how all your routes lay out with "rake routes"

  # This is a legacy wild controller route that's not recommended for RESTful applications.
  # Note: This route will make all actions in every controller accessible via GET requests.
  # match ':controller(/:action(/:id))(.:format)'
#end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T23:32:23.820

[在您发布的 routes.rb 文件的第 9 行](https://gist.github.com/db2a04717799ea44b279#L9)，您有以下代码：

```
 root :to => 'displays#show', :page => 1, :tab => Tab.first.id 
```

据我所知，该`Tab`模型没有记录，因此产生了 Rails 找不到您想要的第一条记录的 nil 错误`id`。

# java - 如何在 Java 注释中返回对象？

> ID：12268738
> 
> 赞同：2
> 
> 时间：2012-09-04T17:44:08.207
> 
> 标签：java, annotations

我正在制作一个测试注释，我希望能够让用户指定一个预期的返回值。

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface Test {
    Object value() default null;
    Class<? extends Throwable> exception() default NoException.class;
    int timeout() default 0;
} 
```

据我所知，您不能将*Object*指定为注释方法中的返回类型。

我想知道是否有允许返回原语和字符串的返回类型。

如果没有，是否可以创建？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T17:46:49.410

简而言之，没有。oracle 文档对此进行了解释

> 返回类型仅限于原始类型、字符串、类、枚举、注释和上述类型的数组。方法可以有默认值

有关这方面的 Oracle 文档，请参见[此处](http://docs.oracle.com/javase/1.5.0/docs/guide/language/annotations.html)。

如果你可以传递一个对象，语法是什么？传递的项目必须是常量，这就是存在限制的原因

# facebook - Facebook 封面照片不可用

> ID：12268739
> 
> 赞同：0
> 
> 时间：2012-09-04T17:44:12.340
> 
> 标签：facebook, facebook-graph-api

直到大约一周前，我才成功地获得了封面照片，但突然之间它停止了工作。我正在使用这个 API 调用：

[https://graph.facebook.com/19292868552?fields=cover（Facebook](https://graph.facebook.com/19292868552?fields=cover) 开发者账号）

这仍然有效，但我的个人帐户没有返回封面照片：

[https://graph.facebook.com/shwnb?fields=cover](https://graph.facebook.com/shwnb?fields=cover)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:54:00.527

您错过了封面图片和专辑封面图片所需的 access_token。

通过在此处获取访问令牌来检查您的浏览器： [https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

（注意：这个令牌是临时的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:48:34.220

您忘记了访问令牌。我用过`shwnb?fields=cover`

```
 {
  "cover": {
    "id": "409216505785036", 
    "source": "http://a1.sphotos.ak.fbcdn.net/hphotos-ak-ash3/558495_409216505785036_1964211932_n.jpg", 
    "offset_y": 49
  }, 
  "id": "100000900706582"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T17:55:02.507

对此有一个有效的[错误报告](https://developers.facebook.com/bugs/277195785720028)。您应该对此进行复制。

我可以在没有访问令牌的情况下获取页面封面照片，但用户封面照片现在需要一个令牌。

# mysql - MySQL：在 UNION 中保留选择顺序

> ID：12268745
> 
> 赞同：4
> 
> 时间：2012-09-04T17:44:38.167
> 
> 标签：mysql

我有一个存储有关某些事件的信息的表。
我想列出这些事件，但我希望即将发生的事件首先按升序显示，而过去的事件按降序显示在下方。

我可能想做这样的事情：

```
(SELECT * FROM events WHERE date > NOW() ORDER BY date ASC)
UNION
(SELECT * FROM events WHERE date &lt; NOW() ORDER BY date DESC) 
```

我检查了 MySQL 文档，发现 UNION 通常适用于无序的行集，因此对每个 SELECT 进行排序是毫无用处的。UNION ALL 似乎都没有完成这项工作。

在谷歌搜索了一下之后，我知道如何根据 SELECT 生成的行对行进行排序，但是，我仍然不知道如何按不同的顺序按同一列对它们进行排序。

我想我可以很好地执行两个 SELECT，一个用于即将发生的事件，一个用于过去的事件。但我真的想知道是否有可能只用一个查询来做到这一点。
你有什么可以建议的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:00:04.540

我不认为你需要一个`UNION`。你应该能够写：

```
SELECT *
  FROM events
 ORDER
    BY CASE WHEN date < NOW() THEN date ELSE NOW() END DESC,
       date ASC
; 
```

的`CASE WHEN date < NOW() THEN date ELSE NOW() END DESC`部分`ORDER BY`确保即将发生的事件首先出现，并确保过去的事件以所需的顺序显示，但不影响即将发生的事件的相对顺序。该`date ASC`部分是处理该部分的后备标准。

（免责声明：未经测试。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:26:48.780

To answer the more general question, the `UNION` operation is not guaranteed to preserve any order of any retrieved rows. To get rows returned in a specific order, the only guarantee you have is to use an `ORDER BY` clause on the query (the outermost SELECT statement).

# in-app-purchase - 如何模拟用户在 Google 电子钱包沙盒中取消订单？

> ID：12268747
> 
> 赞同：0
> 
> 时间：2012-09-04T17:44:55.520
> 
> 标签：in-app-purchase, in-app-billing, google-checkout, android-pay

如何模拟用户在 Google 电子钱包沙盒中取消订单？

我想测试用户取消订单的情况。有没有办法通过谷歌钱包沙箱做到这一点。

我通过测试帐户购买，我在我的交易列表中看到了订单，但我没有看到取消订单的方法。我只看到一个“联系业务”链接，我可以在其中请求取消订单。

这是用户取消订单的唯一方法吗？

如果有用户控制的取消选项，我们可以在沙箱中模拟吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T07:41:33.423

您可以点击联系 [Seller Name] 并发送取消订单的请求权。卖家可能会也可能不会取消您的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T03:26:06.653

在沙盒中，订单“收费”可能需要大约 40 分钟。

之后，用户将在项目描述旁边看到一个“取消订阅”按钮。

# objective-c - 用于 iPhone 开发的 GameMaker

> ID：12268750
> 
> 赞同：1
> 
> 时间：2012-09-04T17:45:05.713
> 
> 标签：objective-c, ios, xcode, game-maker

GameMaker 与 iPhone 开发的 XCode/Objective-C 相比如何？我认为 GameMaker 非常易于使用，但其功能受到限制，而 XCode/Objective-C 更难使用，但当然尽可能灵活（通过设计）。我正在考虑买一本关于两者之一（GameMaker 或 XCode/Objective-C）的书，因为我想开发 iPhone 应用程序，但我发现很难弄清楚利弊。任何输入将不胜感激:) :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:33:15.587

您可以使用 Game Maker 开发几乎所有东西，但为什么不应该这样做是因为它**的性能非常差**。我读过很多关于使用 GM 完成的游戏完全耗尽电池的评论。我不会选择这个选项。

我宁愿寻找像**Unity3D**这样的坏蛋，或者像**Corona SDK**这样更便宜的东西。最好的方法仍然是使用原生工具，如 iOS 的 xCode 和 Android 的 Eclipse Java。但这是一个取决于您希望为开发花费多少时间的选择。

更新：要走的路是[**cocos2d-x**](http://www.cocos2d-x.org/)。

# wordpress - WordPress 模板

> ID：12268751
> 
> 赞同：-1
> 
> 时间：2012-09-04T17:45:07.867
> 
> 标签：wordpress, templates

我需要知道如何创建具有此标记的 WordPress 页面模板：

```
<div id="content">
   <div class="main-column-left">
     <div  class="map">
       <iframe></iframe>
     </div>
   </div>
   <div class="main-column-right">
   <h3>Contact us</h3>
   <p>blah-blah-blah</p>
   <p>blah-blah-blah</p>
   <p>blah-blah-blah</p>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:12:18.983

要为 wordpress 创建模板，请创建一个 php 文件 example-template.php

放上代码：

```
<?php
/**
 * Template Name: The name of your template 
 * Description: Your description
 */
get_header(); ?>

<!-- put here your html -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

然后将模板上传到您的主题文件夹并加载它。

# javascript - 获取页面上所有具有类的 div 的 ID - jquery

> ID：12268752
> 
> 赞同：1
> 
> 时间：2012-09-04T17:45:08.880
> 
> 标签：javascript, jquery, jquery-selectors

我需要用一个类获取每个 div 的 ID 并将其发送到另一个 PHP 文件。我假设我需要一个变量中的所有 ID。ID 将被放入一个 mysql 查询中，我将在其中找到不等于这些 ID 的数据。如何才能做到这一点？

我已经尝试过 jQuery 的 each 函数，但你不能将来自该函数的所有数据放入一个变量中。至少不是我做的那样。

这是我尝试过的。

```
$('.newsItem').each(function(){
     alert (this.id);
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T17:47:09.733

```
var ids = $('.className').map(function(){
   return this.id;
}).get(); 
```

[演示](http://jsfiddle.net/mrobin/cEbJr/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:49:12.073

将数据放入数组

```
 Var ids= new Array();
 $('.newsItem').each(function(){
            ids[] = $(this).attr('id');
    }); 
```

# iphone - tabBarController 在更改视图时设置为零，但始终在窗口中

> ID：12268753
> 
> 赞同：0
> 
> 时间：2012-09-04T17:45:10.390
> 
> 标签：iphone, objective-c, ios, tabbar, swipe

我目前在标签栏控制器内的导航控制器内使用表格视图。当我在表格视图的详细视图上时，我想在详细视图之间“滑动”，所以我实现了一个带有 UIViewAnimations 的 UISwipeGesture 来向右/向左滑动。一切正常，但我有一个小问题......当我在从表视图加载的详细视图上时，self.tabBarController 元素在这里，我有我的标签栏，所以我可以在它上面添加一个操作表。但是当我滑动时，self.tabBarController 现在为零......我不知道为什么......也许是因为导航控制器？

这是我的代码：

```
- (id) init
{
    if (self = [super init]) {
        CGRect fullScreenRect=[[UIScreen mainScreen] applicationFrame];
        UIScrollView *scrollView=[[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, fullScreenRect.size.width, 367.)];
        scrollView.contentSize=CGSizeMake(320,100);
        scrollView.delegate = self;
        self.view=scrollView;
        self.myView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, 367.)];
        self.ButtonSizeM.tag = 0;
        self.ButtonSizeP.tag = 0;
        self.ContentIV = [[UIImageView alloc] init];
    }
    return self;
}

- (void) handleSwipeLeft {
   if (!((self.ancient.tableView.indexPathForSelectedRow.section == ([self.ancient numberOfSectionsInTableView:self.ancient.tableView] - 1)) && (self.ancient.tableView.indexPathForSelectedRow.row == [self.ancient tableView:self.ancient.tableView numberOfRowsInSection:(self.ancient.tableView.indexPathForSelectedRow.section)]-1)))
    {
        NSIndexPath *whereToGo;
        if (self.ancient.tableView.indexPathForSelectedRow.row == [self.ancient tableView:self.ancient.tableView numberOfRowsInSection:(self.ancient.tableView.indexPathForSelectedRow.section)]-1) {
            whereToGo = [NSIndexPath indexPathForRow:0 inSection:(self.ancient.tableView.indexPathForSelectedRow.section)+1];
        }
        else {
            whereToGo = [NSIndexPath indexPathForRow:(self.ancient.tableView.indexPathForSelectedRow.row)+1 inSection:self.ancient.tableView.indexPathForSelectedRow.section];
        }

        CCFASimpleDetail *nextView = [[CCFASimpleDetail alloc] init];
        nextView = [self.ancient tableView:self.ancient.tableView prepareViewForIndexPath:whereToGo];
        [nextView performSelectorOnMainThread:@selector(affichageEnPlace) withObject:nil waitUntilDone:YES];

        float width = self.myView.frame.size.width;
        float height = self.myView.frame.size.height;

        [nextView.view setFrame:CGRectMake(width, 0.0, width, height)];

        [self.view addSubview:nextView.view];
        [UIView animateWithDuration:0.5f delay:0 options:UIViewAnimationCurveEaseInOut animations:^{
                [nextView.view setFrame:self.view.frame];
                [self.myView setFrame:CGRectMake(-width, 0.0, width, height)];
            } completion:^(BOOL finished) {

                [self.myView removeFromSuperview];
                [self.ancient.tableView selectRowAtIndexPath:whereToGo animated:NO scrollPosition:UITableViewScrollPositionTop];
            }
         ];
    }
} 
```

我可以在刷卡后帮我找到我的标签栏:)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:43:35.737

当您在此处添加视图时：

```
[self.view addSubview:nextView.view]; 
```

UINavigation 控制器对此一无所知，也不会为您设置 navigationBar 和 tabBar 属性。

您可以做的是让视图获取其超级视图（将是 self.view），然后从该视图中询问 tabBarController 和 tabBar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T01:11:04.033

我刚刚通过添加解决了我的问题

```
[self.ancient.navigationController popViewControllerAnimated:NO];
[self.ancient.navigationController pushViewController:nextView animated:NO]; 
```

在完成块上！

# joomla - VirtueMart -- 没有 pdf 生成

> ID：12268754
> 
> 赞同：0
> 
> 时间：2012-09-04T17:45:12.463
> 
> 标签：joomla, virtuemart

我正在使用 VM 2.0.8e ，除了我没有 PDF 发票之外，一切都很好。

电子邮件已正确发送给客户，但没有 PDF 附件。我查看了配置，但我无法指定我想要 PDF 发票。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T06:57:35.593

你确定pdf是生成的吗？就我而言，我必须创建一个文件夹 vm-files 并将其置于 URL 无法访问的路径中。然后在VM配置中输入它。顺便说一句，Phoca PDF 适用于 Virtuemart 1.x :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:20:35.740

显然这是解决方案：

[http://www.phoca.cz/phocapdf](http://www.phoca.cz/phocapdf)

# java - Spring JSP - 如何显示请求值？

> ID：12268755
> 
> 赞同：0
> 
> 时间：2012-09-04T17:45:12.027
> 
> 标签：java, spring-mvc

我想回显在请求中选择的缓存操作，以便它显示在浏览器上。我很少有 JSP 经验。我怎样才能让***操作***的价值出现？

JSP：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<html>
    <body>
        <h1>Cache Operation Results - ${operation}</h1>
        <ul>
            <c:forEach items="${results}" var="nextObject">
                <pre>${nextObject.toString()}</pre>
            </c:forEach>
        </ul>
    </body>
</html> 
```

控制器片段：

```
@RequestMapping(value = "/objectcache", method = RequestMethod.GET)
public ModelAndView objectCache(@RequestParam("operation") String operation, HttpServletRequest req) {

    List<String> cacheReturnValue = new ArrayList<String>();
    ModelAndView mav = new ModelAndView("/utils/objectCache", "results", cacheReturnValue);

    if (operation.equalsIgnoreCase("reload")) {
        cacheReturnValue = this.reloadCache();
    }

    mav.addObject("operation", operation);
    return new ModelAndView("/utils/objectCache", "results", cacheReturnValue);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:16:15.370

JSP 页面可以通过表达式访问多个[隐式对象。](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html#wp71043)根据该文档中给出的示例，您可以像这样获取参数值：

```
${param['operation']} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:16:54.727

**删除错误后**，您的代码*应该*可以正常工作-您已经创建了两次，因此忽略了添加到第一个对象的“操作”。解决方案 -只创建一次：**`ModelAndView``ModelAndView``mav`**

 **```
@RequestMapping(value = "/objectcache", method = RequestMethod.GET)
public ModelAndView objectCache(@RequestParam("operation") String operation,
        HttpServletRequest req) {

    List<String> cacheReturnValue = new ArrayList<String>();

    if (operation.equalsIgnoreCase("reload")) {
        cacheReturnValue = this.reloadCache();
    }

    ModelAndView mav = new ModelAndView("/utils/objectCache");
    mav.addObject("results", cacheReturnValue);
    mav.addObject("operation", operation);
    return mav;
} 
```

**编辑：**

小提示：由于[`ModelAndView#addObject`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/ModelAndView.html#addObject%28java.lang.Object%29)返回对`this`对象的引用，因此您可以链接它的调用而无需创建`mav`如下变量：

```
return new ModelAndView("/utils/objectCache")
        .addObject("results", cacheReturnValue)
        .addObject("operation", operation); 
```**

# sql-server - sql pivot 函数是否不允许整数作为列名？

> ID：12268756
> 
> 赞同：4
> 
> 时间：2012-09-04T17:45:17.210
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我正在尝试做一个相当符号枢轴。这个按预期运行：

```
with cte as
(
    select Symbol, TradeDate, 'Per' + cast(Period as CHAR(3)) Per, Value
    from tblDailySMA
)

select * from cte
pivot
(Max(Value) for Per in (Per5,Per10,Per15,Per20,Per30,Per40,Per50,Per60,Per80,Per100,Per110,Per120,
    Per150,Per200)) pvt 
```

这个给出了错误`Incorrect syntax near 5`（并突出显示了“for Period in”之后的第一个值（5）：

```
with cte as
(
    select Symbol, TradeDate, Period, Value
    from tblDailySMA
)

select * from cte
pivot
(Max(Value) for Period in (5,10,15,20,30,40,50,60,80,100,110,120,150,200)) pvt 
```

经过多次试验和错误后，我得到了第一个运行...是否有原因，例如可能不允许整数值作为列名？谢谢..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T17:49:54.037

[您应该始终在列名](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx) 周围放置方括号`[]`：

```
with cte as
(
    select Symbol, TradeDate, Period, Value
    from tblDailySMA
)

select * from cte
pivot
(
   Max(Value) for Period in ([5],[10],[15],[20],[30],[40],[50],[60],[80],[100],[110],[120],[150],[200])
) pvt 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms175874.aspx)：

第一个字符必须是以下之一：

*   Unicode 标准 3.2 定义的字母。字母的 Unicode 定义包括从 a 到 z、从 A 到 Z 的拉丁字符，以及来自其他语言的字母字符。
*   下划线 (_)、at 符号 (@) 或数字符号 (#)。

如果是其他任何东西，那么您将需要使用方括号。`[]`

# android - Android：AndEngine空指针错误

> ID：12268759
> 
> 赞同：0
> 
> 时间：2012-09-04T17:45:36.460
> 
> 标签：android, andengine

我正在使用 AndEngine 制作游戏。现在，我有一个`ArrayList`填充了几个`Sprite`对象。我还有另一个`Sprite`我要检查碰撞，然后`Sprite`在`ArrayList`一小段延迟后删除。但是，我认为我正在处理这个错误，因为我的`ArrayList`:

```
for (int i = 0; i < mIceArray.size(); i++) {
    if (this.collidesWith(mIceArray.get(i))) {
        final int mIndex = i;
        TimerHandler iceRemovalTimer = new TimerHandler(0.1f, new ITimerCallback() {
            @Override
            public void onTimePassed(final TimerHandler pTimerHandler) {
                removeIce(mIceArray.get(mIndex));
                mIceArray.remove(mIndex);
                unregisterUpdateHandler(pTimerHandler);
                }
        });
        mEngine.registerUpdateHandler(iceRemovalTimer);
    }
} 
```

如果有人有建议，他们将不胜感激！谢谢！

编辑：此代码在我的其他 Sprite`onManagedUpdate()`方法中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T04:34:21.433

你没有发布你的错误日志，以及你在哪里初始化你的`mIceArray`. 但我预料到了你的问题：

您尝试`mIceArray`根据碰撞状态和计时器在迭代期间修改您的。这会欺骗你的运行时调试。原因可能是：

*   `mIceArray`在您的精灵在场景上更新之前，您不会启动。
*   `mIceArray.get(index)`当索引处的项目已被删除时，从行中提取错误。

为此，您使用：

```
synchronized (mIceArray)
{
    for(....)
    {
        //your code to check mIceArray
        //and store (mark) the object to be removed from array
    }
    //remove obj outside the for loop
} 
```

为什么不试试 AndEngine 解决方案：

*   **`CollisionHandler`**with**`ICollisionCallback`**用于场景碰撞检查，或
*   **`ContactListner`**用于物理碰撞处理。

# java - 在 java 中使用多部分内容流式传输 RESTful 服务

> ID：12268760
> 
> 赞同：1
> 
> 时间：2012-09-04T17:45:37.380
> 
> 标签：java, database, rest, streaming, jax-rs

我一直在尝试找出一种使用 JAX-RS 将多部分/混合内容作为流处理的标准兼容方式。默认情况下（如果我没记错的话）在容器将请求传递给服务之前，多部分片段存储在内存中或作为临时文件。

我更喜欢直接流而不是来自临时文件的流的原因是多部分/混合请求的每个部分都包含一个文件，该文件必须在单个事务中持久可靠存储（= 集群数据库）。因为通过系统传输的文件应该没有大小限制，并且客户端和服务器都位于本地网络中，所以将千兆字节的数据存储在临时文件中（在 SAN 上）将导致显着的性能损失。

有没有办法使用 JAX-RS 将部件直接流式传输到数据库？如果不是，我应该将服务实现为 servlet 还是将事务拆分为多个请求并使用 JAX-RS？将服务实现为 servlet 将需要一个流式多部分/混合兼容解析器，而拆分事务也不是一项简单的任务。

# java - 将 args 和 stdin 从 main 传递给一个类

> ID：12268762
> 
> 赞同：0
> 
> 时间：2012-09-04T17:45:46.960
> 
> 标签：java

有人可以根据我所拥有的给我一个示例，说明如何将命令行 args 或 stdin 从 main 传递给名为 drawOnGrid 的类吗？我很难理解它。基本上我需要使用“g.drawString (argOne, 10, 10);” 而不是 drawOval 或 drawLine。我附上了我的代码。

```
import java.awt.*;
import javax.swing.*;
import java.util.*;

public class Tictactoe extends JFrame {

//construct a figurePanel
public Tictactoe() {

    Container RandomTicTacToePanel = getContentPane();
    RandomTicTacToePanel.setLayout(new GridLayout(3, 3));

    for (int i = 0; i < 9; i++) {
        RandomTicTacToePanel.add(new drawOnGrid());
    }
}

//Main method
public static void main(String[] args) {

    String argOne;
    String argTwo;

    Scanner in = new Scanner(System.in);

    int length = args.length;
    if (length <= 0) {
        System.out.println("Please enter player One's symbol: ");
        argOne = in.nextLine();
        System.out.println("Please enter player Two's symbol: ");
        argTwo = in.nextLine();
        in.close();
    }

    Tictactoe Tframe = new Tictactoe();
    Tframe.setTitle("Tic Tac Toe Panel: Random Entries");
    Tframe.setSize(350, 350);
    Tframe.setResizable(true);
    Tframe.setLocationRelativeTo(null);
    Tframe.setVisible(true);
    Tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

class drawOnGrid extends JPanel {

    //overide the paintComponent
    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        int random = (int) (Math.random() * 3);

        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 3; j++) {

                if (random == 0) {
                    System.out.print(" ");
                } else if (random == 1) {
                    g.drawOval(10, 10, getWidth() - 20, getHeight() - 20);
                } else if (random == 2) {
                    g.drawLine(10, 10, getWidth() - 10, getHeight() - 10);
                    g.drawLine(getWidth() - 10, 10, 10, getHeight() - 10);

                }
            }

        }
    }
}
} 
```

我真的很感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:54:56.767

试试这个：

```
import java.awt.*;
import javax.swing.*;
import java.util.*;

public class Tictactoe extends JFrame {

//construct a figurePanel
public Tictactoe(String text) {

    Container RandomTicTacToePanel = getContentPane();
    RandomTicTacToePanel.setLayout(new GridLayout(3, 3));

    for (int i = 0; i < 9; i++) {
        RandomTicTacToePanel.add(new drawOnGrid(text));
    }
}

//Main method
public static void main(String[] args) {

    String argOne = null; // Init with null
    String argTwo = null; // Init with null

    Scanner in = new Scanner(System.in);

    int length = args.length;
    if (length <= 0) {
        System.out.println("Please enter player One's symbol: ");
        argOne = in.nextLine();
        System.out.println("Please enter player Two's symbol: ");
        argTwo = in.nextLine();
        in.close();
    } else if(length == 1) {
        argOne = args[0];
    } else if(length == 2) {
        argOne = args[0];
        argTwo = args[1];
    }

    Tictactoe Tframe = new Tictactoe(argOne);
    Tframe.setTitle("Tic Tac Toe Panel: Random Entries");
    Tframe.setSize(350, 350);
    Tframe.setResizable(true);
    Tframe.setLocationRelativeTo(null);
    Tframe.setVisible(true);
    Tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

class drawOnGrid extends JPanel {

    private String text;

    public drawOnGrid(String text) {
       this.text = text;
    }

    //overide the paintComponent
    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        int random = (int) (Math.random() * 3);

        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 3; j++) {

                if (random == 0) {
                    System.out.print(" ");
                } else if (random == 1) {
                    g.drawOval(10, 10, getWidth() - 20, getHeight() - 20);
                } else if (random == 2) {
                    g.drawLine(10, 10, getWidth() - 10, getHeight() - 10);
                    g.drawLine(getWidth() - 10, 10, 10, getHeight() - 10);

                }
            }

        }
    }
} 
```

# c++ - c++中的神经网络输出

> ID：12268764
> 
> 赞同：0
> 
> 时间：2012-09-04T17:45:55.760
> 
> 标签：c++, neural-network

我想创建一个计算神经网络输出的函数。我的 NN 的元素是一个 19D 输入向量和一个 19D 输出向量。我选择了一个有 50 个神经元的隐藏层。我的代码如下，但我不太确定它是否正常工作。

```
double *BuildPlanner::neural_tactics(){

    norm();  //normalize input vector
    ReadFromFile();   // load weights W1 W2 b1

    double hiddenLayer [50][1];

    for(int h=0; h<50; h++){
            hiddenLayer[h][0] =0;
            for(int f = 0; f < 19; f++){

                    hiddenLayer[h][0] = hiddenLayer[h][0] + W1[h][f]*input1[f][0];
            }
    }

    double HiddenLayer[50][1];

    for(int h=0; h<50; h++){
            HiddenLayer[h][0] = tanh(hiddenLayer[h][0] + b1[h][0]);
    }

    double outputLayer[50][1];

    for(int h=0; h<19; h++){
            for(int k=0; k<50; k++){
                    outputLayer[h][0] = outputLayer[h][0] + W2[h][k]*HiddenLayer[k][0];
            }
    }

    double Output[19];

    for(int h=0; h<19; h++){

            Output[h] = tanh(outputLayer[h][0]);
    }

    return Output;
} 
```

其实我不太确定矩阵乘法。W1*input+b1 其中矩阵的大小为 50x19 * 19x1 + 50x1 和 W2*outHiddenLayer 19x50*50x1！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:15:43.580

你的矩阵乘法对我来说看起来不错，但还有其他问题——`outputLayer 是 50x1 但是 a）你只遍历前 19 个元素，b）你在方程的 RHS 上有它

`outputLayer[h][0] = outputLayer[h][0] + W2[h][k]...`

在该元素被定义之前。这可能会导致你所有的问题。此外，虽然我假设您正在制作`outputLayer`二维以使它们看起来像矩阵，但当第二维的大小为 1 时，它完全是无偿的并且会减慢速度——只需将其声明为

`double outputLayer[50];`

因为它是一个向量，而且它们总是一维的，所以它实际上会让你的代码更清晰。

# apache - .htaccess 文件不断出现内部错误 500 和 403

> ID：12268765
> 
> 赞同：0
> 
> 时间：2012-09-04T17:45:58.680
> 
> 标签：apache, .htaccess

我不知道为什么，但在我的网站主机上，我的 .htaccess 继续抛出 apache 错误（500 和 403）。

我的 .htaccess 文件如下所示：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l
RewriteRule ^ - [L]
RewriteRule ^([^/]+)/([^/]+)/?$ index.php/?node=$1&id=$2 [L,QSA]
RewriteRule ^([^/]+)/?$ index.php/?node=$1 [L,QSA] 
```

这其中的哪一部分可能导致这种情况？我对 htaccess 不是很熟悉，所以我不会开始知道。

# java - 如何从 JButton 按下字母并将其与字符串进行比较

> ID：12268770
> 
> 赞同：2
> 
> 时间：2012-09-04T17:46:10.060
> 
> 标签：java, string, swing, for-loop, jbutton

`JButton`按下时获取字母

```
 public class ButtonDisabler implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        JButton btnGetText = (JButton) e.getSource();
        char charLetterPressed;            
        charLetterPressed=(btnGetText.getText().charAt(1));

        btnGetText.setEnabled(false);
    }
} 
```

然后使用该字母并将其与字符串进行比较，然后仅在找到该字母时才显示该字母`JLabel`

```
 char charChkWord;
     StringBuffer word = new StringBuffer();
    for (int i = 0; i < strRandomWord.length(); i++) {
        charChkWord = strRandomWord.charAt(i);
        if (charLetterPressed == String.valueOf(charChkWord)) {
            lblWord.setText(word.append(charChkWord).toString());
        }
    } 
```

我不确定如何获取该字母并将其与字符串进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:41:41.147

我不能推荐`KeyListener`。相反，让每个按钮知道它的名称，如下图和[此处](https://stackoverflow.com/a/12024012/230513)所示。

```
for (int i = 0; i < 26; i++) {
    String letter = String.valueOf((char) (i + 'A'));
    buttons[i] = new JButton(letter);
    north.add(buttons[i]);
} 
```

然后你可以使用类中的`contains()`方法`String`。

```
lblWord.getText().contains(button.getText()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:48:59.037

我和垃圾神在一起，`KeyListeners`如果可以的话，我会避免。

我还将按钮的文本设置为您要使用的字符和/或设置按钮的名称

```
JButton btnA = new JButton("A");
btnA.setName("A"); 
```

这将允许您选择如何在按钮上显示文本，同时为您提供一种方法来提供可能对您更有用的附加信息......

```
JButton button = (JButton) evt.getSource();
String text = button.getText();
// If you wanted to use the name of the button instead...
String name = button.getName();

// You would use this if you need part of the text...
char charPressed = Character.toLowerCase(text.charAt(0)); 
// You could to this to convert the character to a String for easier
// comparison...
String strCharPressed = Character.toString(text.charAt(0)).toLowerCase(); 

// A sample
String word = "This is a test";

// Finds the first occurrence of the character in the String...
// Comparison is case sensitive...
// If indexOf > -1 then the word contains the character
int indexOf = word.toLowerCase().indexOf(charPressed);
// Or, you just check to see if it is contained in the word...
boolean contains = word.toLowerCase().contains(Character.toString(charPressed));

System.out.println("indexOf = " + indexOf);
System.out.println("contains = " + contains); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:01:16.487

您可以`char charLetterPressed;`超出方法范围。

你不需要`String.valueOf(charChkWord)`只使用`charLetterPressed == charChkWord`.

在`if`范围内使用设置标签文本后`break;`退出`for`循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T18:05:35.987

使用以下代码获取`KeyPressed`

```
class MyKeyListener extends KeyAdapter {
  public void keyPressed(KeyEvent evt) {

     Char chr = evt.getKeyChar();

    }
  } 
```

现在，一旦您**按下键**，**将其转换为 String**，请执行以下操作....

```
String s = new String(chr);

if(s.equals(charChkWord)){

   // Do something...

}else{

   // Do something...

} 
```

# javascript - 当接近折线时检测鼠标光标

> ID：12268771
> 
> 赞同：0
> 
> 时间：2012-09-04T17:46:14.337
> 
> 标签：javascript

我有一个具有一定数学权重的编程问题。我有一张地图，上面有形状（折线）。我可以获取这些形状的屏幕坐标并将它们转换为地图坐标并反转。我正在捕获鼠标位置并在地图上移动。当我移动鼠标时，如何识别我是否靠近地图上淹没的另一个形状。我正在考虑在鼠标光标周围创建一个点半径，然后不断循环通过可用形状（我想我可以将它们的坐标加载到数组中）以进行匹配。但是，我认为这将非常缓慢。关键是当我靠近时（例如 15 像素），我会将缪斯位置捕捉到那个接近的形状。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:13:16.537

现在 - 如果你真的想让它变得完美 - 你可以计算光标到每个线段的距离。

对于每个线段（由点 D 和 E 定义）

以格式计算段 DE 的线公式：

斧头 + 通过 + C = 0

A = Dy - Ey

B = Ex - Dx

C = (插入点 D) = -1 * (A * Dx + B * Dy)

现在将光标位置插入公式：

A * cursor.x + B * cursor.y + C = 你到线段的距离

*一件事 - 这是到无界线的距离。您现在要确保您位于两个分段点之间。因此，请确保光标中的角度 D、E 三角形都小于 90 度。有很多方法可以做到这一点，看看点积公式来学习一个快速的方法。

现在，如果 anlges 小于 90，则使用到线的距离，否则，使用到线段的任一点 (D & E) 的最小距离。现在您拥有完整的对齐线功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:58:53.963

如果你有形状的每个点/线段（你应该使用折线），这里有一个可能的快速和简单的例程：

对于每个形状，通过平均每个组成点来计算形状中心（即 - 对于五边形，将所有五个 point.x 相加，除以 5 - 对所有 point.y 执行相同操作）。将此称为平均 shape.x 和 shape.y。使用距离公式计算与鼠标的接近程度。(Mouse.x - Shape.x)^2 + (Mouse.y - Shape.y)^2... 您不必取平方根，因为您只对最接近的形状感兴趣。

跟踪每个形状的最小距离“平方”。最小值是您最近的形状中心。

如果您想以最大范围捕捉行为，请确保距离平方 < 像素距离平方。

如果你想让它变得非常高效，形状中心不需要不断地重新计算，只需计算一次。如果您在屏幕空间和您提到的其他坐标之间进行转换，则中心将与任何其他点一样缩放和平移。

# java - SAX 解析器异常

> ID：12268773
> 
> 赞同：2
> 
> 时间：2012-09-04T17:46:33.463
> 
> 标签：java, xml, xsd

收到此错误：

SAX 解析器异常。

cvc-elt.1：找不到元素“xs:schema”的声明。

有了这个 xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"targetNamespace="http://nrg.wustl.edu/tx"  xmlns:tx="http://nrg.wustl.edu/tx" xmlns:xnat="http://nrg.wustl.edu/xnat" xmlns:xdat="http://cnl.wustl.edu/xdat" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:import namespace="http://nrg.wustl.edu/xnat" schemaLocation="../xnat/xnat.xsd"/>
    <xs:import namespace="http://cnl.wustl.edu/xdat" schemaLocation="../xdat/xdat.xsd"/>
    <xs:element name="MedicationTreatmentList" type="tx:medTreatmentList" />
    <xs:element name="TreatmentList" type="tx:treatmentList" />
    <xs:element name="ChemotherapyTreatment" type="tx:chemotherapyTreatment" />
    <xs:element name="RadiationTreatment" type="tx:radiationTreatment" />
    <xs:complexType name="medTreatment">
        <xs:sequence>
            <xs:element name="code" type="xs:string" minOccurs="0" />
            <xs:element name="codeType" type="xs:string" minOccurs="0" />
            <xs:element name="name" type="xs:string" minOccurs="0" maxOccurs="1">
                <xs:annotation>
                    <xs:appinfo>
                        <xdat:field uniqueComposite="NAME_DATE_FK"/>
                    </xs:appinfo>
                </xs:annotation>
            </xs:element>
            <xs:element name="status" type="xs:string" minOccurs="0" />
            <xs:element name="doseAmount" type="xs:float" minOccurs="0" />
            <xs:element name="doseUnit" type="xs:string" minOccurs="0" />
            <xs:element name="doseSchedule" type="xs:string" minOccurs="0" />
            <xs:element name="route" type="xs:string" minOccurs="0" />
            <xs:element name="indication" type="xs:string" minOccurs="0" />
            <xs:element name="startDate" type="xs:date" minOccurs="0" maxOccurs="1">
                <xs:annotation>
                    <xs:appinfo>
                        <xdat:field uniqueComposite="NAME_DATE_FK"/>
                    </xs:appinfo>
                </xs:annotation>
            </xs:element>
            <xs:element name="startDateDayNotReported" type="xs:boolean" minOccurs="0" />
            <xs:element name="startDateMonthNotReported" type="xs:boolean" minOccurs="0" />
            <xs:element name="startDateYearNotReported" type="xs:boolean" minOccurs="0" />
            <xs:element name="endDate" type="xs:date" minOccurs="0" />
            <xs:element name="endDateDayNotReported" type="xs:boolean" minOccurs="0" />
            <xs:element name="endDateMonthNotReported" type="xs:boolean" minOccurs="0" />
            <xs:element name="endDateYearNotReported" type="xs:boolean" minOccurs="0" />
            <xs:element name="clinicalTrialName" type="xs:string" minOccurs="0" />
            <xs:element name="clinicalTrialArm" type="xs:string" minOccurs="0" />
            <xs:element name="treatmentNotes" minOccurs="0">
                <xs:simpleType>
                    <xs:restriction base="xs:string">
                        <xs:maxLength value="1000" />
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="medTreatmentList">
        <xs:complexContent>
            <xs:extension base="xnat:subjectAssessorData">
                <xs:sequence>
                    <xs:element name="medTreatments" minOccurs="0">
                        <xs:complexType>
                            <xs:sequence>
                                <xs:element name="medTreatment" type="medTreatment" minOccurs="0" maxOccurs="unbounded">
                                    <xs:annotation>
                                        <xs:appinfo>
                                            <xdat:field>
                                                <xdat:relation uniqueComposite="NAME_DATE_FK" relationType="single"/>
                                            </xdat:field>
                                        </xs:appinfo>
                                    </xs:annotation>
                                </xs:element>
                            </xs:sequence>
                        </xs:complexType>
                    </xs:element>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="treatment">
        <xs:sequence>
            <xs:element name="code" type="xs:string" minOccurs="0" />
            <xs:element name="codeType" type="xs:string" minOccurs="0" />
            <xs:element name="name" type="xs:string" minOccurs="0" />
            <xs:element name="status" type="xs:string" minOccurs="0" />
            <xs:element name="doseAmount" type="xs:float" minOccurs="0" />
            <xs:element name="doseUnit" type="xs:string" minOccurs="0" />
            <xs:element name="doseSchedule" type="xs:string" minOccurs="0" />
            <xs:element name="route" type="xs:string" minOccurs="0" />
            <xs:element name="indication" type="xs:string" minOccurs="0" />
            <xs:element name="startDate" type="xs:date" minOccurs="0" />
            <xs:element name="startDateDayNotReported" type="xs:boolean" minOccurs="0" />
            <xs:element name="startDateMonthNotReported" type="xs:boolean" minOccurs="0" />
            <xs:element name="startDateYearNotReported" type="xs:boolean" minOccurs="0" />
            <xs:element name="endDate" type="xs:date" minOccurs="0" />
            <xs:element name="endDateDayNotReported" type="xs:boolean" minOccurs="0" />
            <xs:element name="endDateMonthNotReported" type="xs:boolean" minOccurs="0" />
            <xs:element name="endDateYearNotReported" type="xs:boolean" minOccurs="0" />
            <xs:element name="clinicalTrialName" type="xs:string" minOccurs="0" />
            <xs:element name="clinicalTrialArm" type="xs:string" minOccurs="0" />
            <xs:element name="treatmentNotes" minOccurs="0">
                <xs:simpleType>
                    <xs:restriction base="xs:string">
                        <xs:maxLength value="1000" />
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="treatmentList">
        <xs:complexContent>
            <xs:extension base="xnat:subjectAssessorData">
                <xs:sequence>
                    <xs:element name="treatments" minOccurs="0">
                        <xs:complexType>
                            <xs:sequence>
                                <xs:element name="treatment" type="tx:treatment" minOccurs="0" maxOccurs="unbounded">
                                    <xs:annotation>
                                        <xs:appinfo>
                                            <xdat:field>
                                                <xdat:relation relationType="multi" relationName="tx_treatmentList_treatment"/>
                                            </xdat:field>
                                        </xs:appinfo>
                                    </xs:annotation>
                                </xs:element>
                            </xs:sequence>
                        </xs:complexType>
                    </xs:element>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="baseTreatment">
        <xs:complexContent>
            <xs:extension base="xnat:subjectAssessorData">
                <xs:sequence>
                    <xs:element name="type" type="xs:string" minOccurs="0" />
                    <xs:element name="unit" type="xs:string" minOccurs="0" />
                    <xs:element name="dose" type="xs:float" minOccurs="0" />
                    <xs:element name="timing" type="xs:string" minOccurs="0" />
                    <xs:element name="startDate" type="xs:date" minOccurs="0" />
                    <xs:element name="startDateDayNotReported" type="xs:boolean" minOccurs="0" />
                    <xs:element name="startDateMonthNotReported" type="xs:boolean" minOccurs="0" />
                    <xs:element name="startDateYearNotReported" type="xs:boolean" minOccurs="0" />
                    <xs:element name="endDate" type="xs:date" minOccurs="0" />
                    <xs:element name="endDateDayNotReported" type="xs:boolean" minOccurs="0" />
                    <xs:element name="endDateMonthNotReported" type="xs:boolean" minOccurs="0" />
                    <xs:element name="endDateYearNotReported" type="xs:boolean" minOccurs="0" />
                    <xs:element name="completed" type="xs:boolean" minOccurs="0" />
                    <xs:element name="incompleteReason" type="xs:string" minOccurs="0" />
                    <xs:element name="incompleteExtent" type="xs:string" minOccurs="0" />
                    <xs:element name="clinicalTrialName" type="xs:string" minOccurs="0" />
                    <xs:element name="clinicalTrialArm" type="xs:string" minOccurs="0" />
                    <xs:element name="completedNotes" minOccurs="0">
                        <xs:simpleType>
                            <xs:restriction base="xs:string">
                                <xs:maxLength value="1000" />
                            </xs:restriction>
                        </xs:simpleType>
                    </xs:element>
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="chemotherapyTreatment">
        <xs:complexContent>
            <xs:extension base="tx:baseTreatment" />
        </xs:complexContent>
    </xs:complexType>
    <xs:complexType name="radiationTreatment">
        <xs:complexContent>
            <xs:extension base="tx:baseTreatment" />
        </xs:complexContent>
    </xs:complexType>
</xs:schema> 
```

从我所见，该声明看起来是正确的。我已经经历了好几次，但什么都想不出来。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:52:05.653

您的声明无效。您在 targetNameSpace 之前缺少一个空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:57:09.633

间距问题应该是

`<?xml version="1.0" encoding="UTF-8"?> <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://nrg.wustl.edu/tx" xmlns:tx="http://nrg.wustl.edu/tx" xmlns:xnat="http://nrg.wustl.edu/xnat" xmlns:xdat="http://cnl.wustl.edu/xdat" elementFormDefault="qualified" attributeFormDefault="unqualified">`

# android - 当您想要切换 2 个可见视图之一时如何使用布局权重

> ID：12268789
> 
> 赞同：1
> 
> 时间：2012-09-04T17:47:26.513
> 
> 标签：android, android-layout, android-linearlayout

我有一个 LinearLayout，它将有一个取消按钮和一个进度条，其中进度条为 70%，取消按钮为 30%，如下所示：

```
<LinearLayout android:orientation="horizontal"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
  >

 <ProgressBar
     android:id="@+id/uploadProgressBar"
     style="?android:attr/progressBarStyleHorizontal"
     android:layout_width="0dp"
     android:layout_weight=".7"
     android:layout_height="wrap_content"
     android:layout_gravity="center_vertical"
     />
 <Button
     android:id="@+id/uploadCancelButton"
     style="@style/TitleBarButton"
     android:layout_width="0dp"
     android:layout_weight=".3"
     android:layout_height="wrap_content"
     android:text="@string/cancel_btn"
     android:layout_gravity="center_vertical"

      />

 </LinearLayout> 
```

这很好用，但是我意识到实际上我想要显示进度条或文本视图，其中文本视图可能是一个小的状态消息（如果说上传失败）。

我尝试在上面的 LinearLayout 中放置一个 TextView，并将其可见性默认设置为“已消失”，并且权重设置与进度条相同。在代码中，我只会将进度条设置为可见或文本视图，而将另一个设置为消失。然而，android 系统似乎对总重量贡献了不可见项目的重量。我什至尝试在 LinearLayout xml 属性中使用 android:weightSum="1.0" 但是我的按钮不再可见，因为即使文本消失了，它也占用了空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:53:26.357

[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)是您正在寻找的。

使用起来非常简单。您将要切换的视图放置在 ViewFlipper 中，就像将它们放置在 XML 中的布局中一样。然后从代码中调用包含您的视图`setDisplayedChild()`的对象。`ViewFlipper`此方法的参数是您要显示的视图的索引。

# asp.net - 按钮命令名称代码

> ID：12268793
> 
> 赞同：2
> 
> 时间：2012-09-04T17:47:40.703
> 
> 标签：asp.net, button

在 VS2012 的标准默认新网站中，Account 部分 Login.aspx 有一个发送登录信息的按钮。没有事件代码，它显然运行“登录”，即 CommandName。处理它的代码在哪里？可以添加或更改吗？我在项目的任何地方都找不到它。登录实际上是如何发生的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:52:05.467

登录按钮位于[`<asp:Login />`](http://msdn.microsoft.com/en-us/library/t863ehhh)Web 控件中。该`<asp:Login />`控件将使用web.config（或 machine.config）中设置的默认[MembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)[`MembershipProvider`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.membershipprovider) ...或者您可以在 Login 控件上设置属性

[如何：使用 ASP.NET 成员资格提供程序](http://msdn.microsoft.com/en-us/library/ms731049.aspx)

[成员资格和角色提供者](http://msdn.microsoft.com/en-us/library/aa354509.aspx)

要控制/更改登录逻辑，您可以创建一个覆盖该[`ValidateUser`](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.validateuser.aspx)方法的自定义 MembershipProvider。

# java - 为 Eclipse Juno 安装 m2e maven 插件时面临问题

> ID：12268801
> 
> 赞同：5
> 
> 时间：2012-09-04T17:48:04.880
> 
> 标签：java, eclipse, maven, plugins, m2e

我安装了 JUNO Eclipse，然后想获得 Eclipse 的 Maven 插件。经过一番搜索，我知道我可以使用 eclipse 市场安装插件。所以我搜索了插件并成功安装了它，但是当我重新启动 eclipse 时，当我右键单击任何项​​目时，我看不到 Maven 选项。当我点击 WINDOWS--> PREFERENCES 时，我可以在那里看到 Maven 选项。这意味着，maven 已安装但不确定是否完全安装。

我再次重新安装了它，但仍然没有运气。任何人都可以帮忙吗？

仅供参考，我正在使用 maven 3.0.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:50:30.320

您需要确保已安装 Java JDK 并将其添加到 Preferences -> Java -> Installed JREs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:24:46.090

如果您的项目仍然是标准 Java 项目，那么您必须为此项目启用 Maven。您可以通过右键单击项目来执行此操作，然后选择配置 -> 转换为 Maven 项目。然后您必须输入组 ID、工件 ID 等，然后为您创建 pom.xml。

# dns - 负载平衡来自不同位置的静态网站？

> ID：12268804
> 
> 赞同：1
> 
> 时间：2012-09-04T17:48:29.450
> 
> 标签：dns, load, webserver, hosting, load-balancing

我有一个仅包含基本 HTML 页面和图像的站点（没有数据库）。该站点有很多用户访问，因此我需要对其进行负载平衡。我想在不同的位置对其进行负载平衡，因此即使一个位置关闭，另一个位置仍然在运行。这就是我的想法：

*   我将从美国获得一台服务器，从欧盟获得一台服务器
*   我会将完全相同的内容上传到美国和欧盟
*   我将域的名称服务器设置`US.EXAMPLE.COM`为`EU.EXAMPLE.COM`

此设置是否会以访问者随机指向美国服务器或欧盟服务器的方式工作？还是有更好的方法？

另外，如果美国不景气，访客会自动连接到欧盟，直到美国不景气？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:57:33.087

名称服务器的规则如下...

“无论哪个名称服务器响应速度快，访问者都会被路由到该服务器。”

这意味着，如果我来自欧洲并且 eu.yoursite.com 对我的响应速度更快，我将被发送到欧盟服务器。如果您的欧盟站点很忙，并且 us.yoursite.com 对我的响应速度更快，我将被发送到美国服务器。

因此，大多数情况下您的负载平衡安排都会起作用。

您还应该使用“ [CDN 托管](http://www.accuwebhosting.com/cdn-hosting.html)”将内容缓存在各个位置。由于 CDN 上的静态内容是从全球各种 POP 交付的，因此 CDN 减少了主服务器上的负载。

CDN 还可以加速静态内容的加载并改善站点访问者的体验。

# windows - WSAEventSelect，零事件

> ID：12268811
> 
> 赞同：2
> 
> 时间：2012-09-04T17:49:00.290
> 
> 标签：windows, winapi, sockets, winsock

在我的套接字服务器中，我使用 WSAEventSelect() 和 WSAEnumNetworkEvents() 来检测 FD_ACCEPT 和 FD_CLOSE 事件。

这是我的代码的简化版本：

```
HANDLE sockEv=CreateEvent(NULL,TRUE,FALSE,NULL);
WSAEventSelect(servSocket,sockEv,FD_ACCEPT|FD_CLOSE);
for(;;) {
  if(WSAWaitForMultipleEvents(1,&sockEv,FALSE,INFINITE,FALSE)==WSA_WAIT_EVENT_0) {
    WSANETWORKEVENTS wsaEvents={0};
    WSAEnumNetworkEvents(servSocket,sockEv,&wsaEvents);
    if((wsaEvents.lNetworkEvents & FD_ACCEPT)==FD_ACCEPT) {
      SOCKET clntSock=accept(servSocket,(sockaddr*)clientAddr,&addrlen);
      ....
    }
    else if (wsaEvents.lNetworkEvents==0) {
    // this event occurs after each FD_ACCEPT event
    }
    ....
  }
  ....
} 
```

问题是每次从客户端接受新连接时，我都会收到 2 个事件：首先 WSANETWORKEVENTS.lNetworkEvents 设置为 FD_ACCEP，然后 WSANETWORKEVENTS.lNetworkEvents 设置为零。也就是说，每次接受一个新客户端时，for(;;) 循环都会执行 2 次。或者，在检测到 FD_ACCEPT 之后，WSAEnumNetworkEvents 可能不会重置 sockEv。

这个零事件是什么意思，为什么会发生？我在文档中没有找到任何关于它的信息。

**更新**：可编译样本

```
int _tmain(int argc, _TCHAR* argv[])
{
  WSADATA wsaData;
  WSAStartup(MAKEWORD(2,2),&wsaData);
  try {
    SOCKET servSocket=socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);

    sockaddr_in serv={0};
    serv.sin_family=AF_INET;
    serv.sin_addr.s_addr=htonl(INADDR_ANY);
    serv.sin_port=htons(18081);
    memset(serv.sin_zero,0,sizeof(serv.sin_zero));

    if(bind(servSocket,(sockaddr*)&serv,sizeof(serv))==SOCKET_ERROR)
      throw WSAGetLastError();
    if(listen(servSocket,SOMAXCONN)==SOCKET_ERROR)
      throw WSAGetLastError();
    HANDLE sockEv=CreateEvent(NULL,TRUE,FALSE,NULL);
    if(WSAEventSelect(servSocket,sockEv,FD_ACCEPT|FD_CLOSE)==SOCKET_ERROR) 
      throw WSAGetLastError();

    for(;;) {
      if(WSAWaitForMultipleEvents(1,&sockEv,FALSE,INFINITE,FALSE)!=WSA_WAIT_EVENT_0)
        throw -1;
      WSANETWORKEVENTS wsaEvents={0};
      if(WSAEnumNetworkEvents(servSocket,sockEv,&wsaEvents)==SOCKET_ERROR)
        throw WSAGetLastError();
      if((wsaEvents.lNetworkEvents & FD_ACCEPT)==FD_ACCEPT) {
        SOCKET clntSocket=accept(servSocket,0,0);
        closesocket(clntSocket);
        puts("accept");
      }
      else if(wsaEvents.lNetworkEvents==0) {
        puts("zero event");
      }
    }
  }
  catch(int errorCode) {
    printf("Last Error: %d\n",errorCode);
  }
  WSACleanup();
  return 0;
} 
```

我在 WinXP 32bit 上试过这个代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:00:12.690

回答我自己的问题。看来我找到了发生这种情况的原因和时间。这个零事件发生在客户端套接字（accept() 返回的套接字）关闭之后。如果您不将 FD_CLOSE 与 WSAEventSelect 一起使用，则不会发生这种情况。所以人们可以忽略它。MSDN 对这种行为只字未提。

# objective-c - UITableView：加载所有单元格

> ID：12268812
> 
> 赞同：4
> 
> 时间：2012-09-04T17:49:07.270
> 
> 标签：objective-c, xcode, uitableview, viewdidload

是否可以在加载视图时加载 UITableView 的所有单元格，以便在滚动时不加载它们？（我会在执行此操作时显示加载屏幕）

拜托，这是我项目的唯一方法（抱歉太复杂了，无法解释原因^^）

编辑：

好吧，让我解释一下，我肯定在做什么：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   NSString *cellIdentifier = [NSString stringWithFormat:@"Identifier %i/%i", indexPath.row, indexPath.section];
   CustomTableCell *cell = (CustomTableCell *)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];
   NSDictionary *currentReading;

   if (cell == nil)
   {
       cell = [[[CustomTableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];

       UILabel *label;
       UIView *separator;

       if(indexPath.row == 0)
       {
           // Here I'm creating the title bar of my "table" for each section
       }
       else
       {
           int iPr = 1;

           do
           {
               currentReading = [listData objectAtIndex:iPr-1];
               iPr++;
           } while (![[currentReading valueForKey:@"DeviceNo"] isEqualToString:[devicesArr objectAtIndex:indexPath.section]] || 
                      [readingresultsArr containsObject:[currentReading valueForKey:@"ReadingResultId"]]);

           [readingresultsArr addObject:[currentReading valueForKey:@"ReadingResultId"]];
           //
           // ...
           //
       }
    }
    return cell;
} 
```

我的错误发生在 do-while-loop 中：“listData”是一个包含多个字典的数组。我的问题是，当我慢慢向下滚动表格时，一切都很好，但是当我快速滚动到视图的末尾然后滚动到中间时，我得到了 iPr 不在的错误数组的范围。所以问题是，第一部分的最后一行已经添加到“readingresultsArr”中，但还没有加载或想要再次加载。这就是我想一次加载所有单元格的原因。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T23:06:01.447

只需调用以下命令，您就可以预先分配所有单元格：

```
[self tableView: self.tableView cellForRowAtIndexPath: indexPath]; 
```

对于表中的每一行。将上述行放在适当的 for 循环中并在`viewDidAppear`.

然而问题是 tableView 不会保留所有这些单元格。当不需要它们时，它将丢弃它们。

您可以通过添加一个`NSMutableArray`来解决这个问题`UIViewController`，然后缓存所有在`cellForRowAtIndexPath`. 如果您的表在其生命周期内有动态更新（插入/删除），您也必须更新缓存数组。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-28T02:17:05.070

在 uiscrollview 上放一个 uitableview

例如，您希望完整列表 uitableview 的高度为 1000 。

然后设置 uiscrollview contentsize 为 320X1000 并设置 uitableview 高度为 1000

然后所有单元格加载它们的内容，甚至在屏幕上不可见

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-02-19T11:53:01.743

在我的情况下，我使用 automaticDimension 作为单元格高度并将estimatedRowHeight 设置为小，这就是 tableview 加载所有单元格的原因

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-19T01:20:06.377

根据 juancazalla 的评论，我发现如果您有一个使用 automaticDimension 的 tableView，一次加载所有单元格的最佳方法是通过将estimatedRowHeight 设置为低值（例如 1）来实现。

# php - 合并两张PNG透明图片

> ID：12268813
> 
> 赞同：6
> 
> 时间：2012-09-04T17:49:10.797
> 
> 标签：php, png, gd, watermark

我正在尝试创建一个函数来调整透明 PNG 图像的大小并向它们添加透明的 PNG 水印。我试图放置 imagealphablending($image_p, false); 和 imagesavealpha($image_p,true); 到处都是，但它会使黑色背景或裁剪第一张图像。这是我的代码：

```
$newName=$this->filename;
list($OrigWidth, $OrigHeight)=$this->info;
if($OrigHeight>$OrigWidth){
    $pomer=$OrigWidth/$OrigHeight;
    $NewHeight=$h;
    $NewWidth=$NewHeight*$pomer;
}else{
    $pomer=$OrigHeight/$OrigWidth;
    $NewWidth=$w;
    $NewHeight=$NewWidth*$pomer;
}

$image_p=imagecreatetruecolor($NewWidth, $NewHeight);
if($this->ext=="jpg")
$image=imagecreatefromjpeg($newName);
elseif($this->ext=="png")
$image=imagecreatefrompng($newName);
elseif($this->ext=="gif")
$image=imagecreatefromgif($newName);

if($this->ext=="png" or $this->ext=="gif"){ //průhlednost
    imagealphablending($image_p, false);
    imagesavealpha($image_p,true);
    $transparent = imagecolorallocatealpha($image_p, 255, 255, 255, 127);
    imagefilledrectangle($image_p, 0, 0, $NewWidth, $NewHeight, $transparent);
}

if(($OrigWidth>$w or $OrigHeight>$h) and $w!=0)
    imagecopyresampled($image_p, $image, 0, 0, 0, 0, $NewWidth, $NewHeight, $OrigWidth, $OrigHeight);
else
    $image_p=$image; //není třeba zmenšovat

if($vodoznak!=""){ //if watermark is set
    //imagealphablending($image_p, false);
    //imagesavealpha($image_p,true);
    $watermark = imagecreatefrompng($vodoznak);     
    $ww = imagesx($watermark);
    $wh = imagesy($watermark);
    if($umisteni{0}=="0") $x=3; else $x=$OrigWidth-$ww-3;       
    if($umisteni{1}=="0") $y=3; else $y=$OrigHeight-$wh-3;
    imagealphablending($watermark, false);
    imagesavealpha($watermark,true);
    imagecopy($image_p, $watermark, $x, $y, 0, 0, $ww, $wh);
}

if($this->ext=="jpg")
imagejpeg($image_p, $copypath, $komprese);
elseif($this->ext=="png")
imagepng($image_p, $copypath);
elseif($this->ext=="gif")
imagegif($image_p, $copypath); 
```

我不知道，我应该在哪里放置 alpha 设置，请帮忙。感谢您的每一个建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:42:57.057

该`imagesavealpha`函数需要应用于您要粘贴到您创建的图像上的图像，所以要`$image`代替`$image_p`：

```
imagealphablending($image, true);
imagesavealpha($image,true); 
```

就像你对水印所做的那样！

# c# - 控件不起作用

> ID：12268821
> 
> 赞同：1
> 
> 时间：2012-09-04T17:49:43.377
> 
> 标签：c#, controls

我已经添加了我的主类，我从中调用按钮类，这就是它应该打印出按钮的地方。代码编译正常，但我看不到实际的按钮。在我看来，它没有继承控件属性。谢谢！

```
 using System;
  using System.Collections.Generic;
  using System.ComponentModel;
  using System.Data;
  using System.Drawing;
  using System.Linq;
  using System.Text;
  using System.Windows.Forms;
  using System.Windows;

  //main class
  namespace Test
  {
    public partial class Form1 : Form
    {
     buttons button1;

     public Form1()
    {
        InitializeComponent();
        print_button();
    }

    private void print_button()
    {
        button1 = new buttons();
        button1.print();
    }

   }//form
  }//test

//---------------------------------------------------------------//

//buttons class
namespace Test
{
  public class buttons : System.Windows.Forms.Control

  class buttons
  {
     private Button button1;

     public buttons()
     {

     }

      public void print()
      {
          button1 = new Button();
          button1.Location = new System.Drawing.Point(82, 44);
          button1.Size = new System.Drawing.Size(977, 54);
          button1.Text = "next";
          Controls.Add(button1);
     }
  }//class
}//test 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:51:36.177

你的类`buttons`不是子类，`System.Windows.Forms.Control`所以它没有`this.Controls`成员。

我建议在 VS 中使用 WinForms 设计器，而不是手动创建自己的表单或控件，至少在您是初学者的时候。

我还注意到您应该遵守 .NET 样式约定。类和公共成员应该使用 TitleCase 并且应该存在于命名空间中。更改`buttons`为`Buttons`（如果您想使用该名称）并将其包装在一个`namespace`块中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:11:44.833

我不知道你想用你提供的代码来完成什么。无论如何，此方法不起作用的原因是：

```
public void print()
{
   button1 = new Button();

    button1.Location = new System.Drawing.Point(82, 44);
    button1.Size = new System.Drawing.Size(977, 54);
    button1.Text = "next";
    Controls.Add(button1);
} 
```

是因为“按钮”类没有定义控件集合，也没有从公开控件集合的类继承。例如，如果您要这样做：

```
public class buttons : System.Windows.Form
{
    ...
} 
```

然后，您的代码至少可以编译，因为 Form 类公开了一个 Controls 集合。不过，您要完成的工作并不完全清楚，因此此解决方案可能不适合您的需求。在适当的时候发布更多信息，我会尽我所能帮助你。

- - -编辑

您似乎正试图从上面的评论中重构您的 Form1 类。

你可以这样做：

```
public class Form1 : Form
{
    public void foo()
    {
       Controls.Add(buttons.print());
    }
} 
```

并将您的按钮类修改为：

```
public class buttons
{
   public static Button print()
   {
     Button btn = new Button();
     btn.Location = new System.Drawing.Point(82, 44);
     btn.Size = new System.Drawing.Size(977, 54);
     btn.Text = "next";
     return btn;
   }
} 
```

一旦被调用，这将在主窗体的控件集合中添加一个按钮。正如所写，虽然这种方法是无用的，因为它只能一遍又一遍地产生相同的按钮。我会修改该方法，使其看起来像这样

```
 public static Button print(Point buttonLocation, Size buttonSize, string buttonText)
   {
     Button btn = new Button();
     btn.Location = buttonLocation;
     btn.Size = buttonSize;
     btn.Text = buttonText;
     return btn;
   } 
```

然后主窗体如下所示：

```
 public void foo()
    {
       Controls.Add(buttons.print(new System.Drawing.Point(82, 44), new System.Drawing.Size(977, 54), "button text"));
    } 
```

这有帮助吗？

--- 编辑 2 ---

我提供此编辑作为一个严格的学术示例，说明如何根据 OP 在评论中的要求保持主类（表单）“更干净”。我不建议在生产中使用这种方法，而是建议使用诸如 MVC、MVP 或 MVVP 之类的模式。我在这里排除了这些模式的示例，因为我认为它们此时超出了 OP 的技能水平，只会导致更多的混乱。

考虑以下：

```
 public class buttons
 {
      private Form _form = null;
      public buttons(Form form)
      {
         _form = form;
      }

      public void print(Point buttonLocation, Size buttonSize, string buttonText)
      {
         Button btn = new Button();
         btn.Location = buttonLocation;
         btn.Size = buttonSize;
         btn.Text = buttonText;
         _form.Controls.Add(btn);
      }     
 }

 public class Form1 : Form
 {
     private buttons _buttons = null;
     public Form1()
     {
       _buttons = new buttons(this);
     }

     public void foo()
     {
        buttons.print(new System.Drawing.Point(82, 44), new System.Drawing.Size(977, 54), "button text");
     }
 } 
```

现在发生了什么事：当 Form1 被实例化时，它创建了一个按钮类的新实例，并将自身的引用传递给按钮构造函数 (_buttons = new buttons(this)) 在内部按钮类将此引用设置为局部变量_form 因此，您对变量 _form 执行的任何操作都与您直接对 Form1 执行的操作一样。如您所见，这就是 print() 方法中发生的情况，在该方法中创建了一个按钮，然后将其添加到 _form 的 Controls 集合中，这与从 Form1 中调用 Controls.Add 相同。

你能理解这个吗？

# javascript - Javascript 检测 TAG 中的完整 URL

> ID：12268823
> 
> 赞同：0
> 
> 时间：2012-09-04T17:49:47.280
> 
> 标签：javascript, regex

我希望 javascript 检测图像的来源并对其是否是完整的 URL 采取措施 REGEX

示例代码：

```
var source = 'http://test.com/';
if( [if var source starting with http:// ] ){ // Regex conditional
    // do something
}else{
    // // something
} 
```

如何使用 Javascript 正则表达式做到这一点？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:59:21.063

如果您坚持使用正则表达式，那么您可以这样做：

```
^https?:\/\/.*$ 
```

[在这里](http://writecodeonline.com/javascript/)测试的 Javascript 代码：

```
 var re = /^https?:\/\/.*$/;
  var sourcestring = "source string to match with pattern";
  var matches = re.exec(sourcestring);
  for (var i=0; i<matches.length; i++) {
    alert("matches["+i+"] = " + matches[i]);
  } 
```

对于您的代码：

```
var source = 'http://test.com/';
var pattern = /^https?:\/\/.*$/;
if(null != pattern.exec(source))
{ 
    // Regex conditional
    // do something
}
else
{
    // // something
} 
```

* * *

但请注意，这仅检查 URL 的第一部分，这不一定意味着字符串的其余部分符合 URL。例如，您的源字符串可能类似于“http://^&#*@%.IAmABadUrl.com”，如果发送未编码，则它不是有效的 URL。
有关[IETF 网站](http://www.ietf.org/rfc/rfc1738.txt)上 URL 中允许的内容的更多信息：

> 因此，只有字母数字、特殊字符“$-_.+!*'()”和用于其保留目的的保留字符可以在 URL 中未编码地使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T17:53:56.890

为什么不使用

```
if(source.indexOf("http://")>-1){

//do something?
} 
```

# c# - 支持密码短语 rsa 私钥的 SSH 库

> ID：12268829
> 
> 赞同：6
> 
> 时间：2012-09-04T17:50:22.583
> 
> 标签：c#, windows, ssh

我目前正在开发一个需要 SSH 库的小型 Visual C# 应用程序。我已经尝试过 DotNetSSH、Renci.SshNet 和 SharpSsh。Granados SSH 库的文档记录很差（至少我几乎什么也没找到），所以我跳过了这个。

所有这些库都有一个大问题（恕我直言）：它们无法使用密码打开 SSH 私钥。

Renci.SshNet 不支持 AES。DotNetSSH 和 SharpSsh 使用 jsch（java ssh 库）作为基础，并且似乎存在错误（？），因此它不会解密私钥并不断询问密码。

使用用户名+密码和没有密码短语的私钥连接非常适合 SharpSsh。

有人已经有同样的问题了吗？或者是否有另一个支持“RSA 私钥和密码”的 C# SSH 库？

提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-01-30T09:09:26.990

我已成功使用[SSH.NET](https://github.com/sshnet/SSH.NET)开源库来处理 SSH 和 SFTP。

**这是连接密钥文件+密码的代码。**

```
 public void Connect(string host, int port, string user, string passPhrase, string privateKeyFilePath) {

        var keyFiles = new[] { new PrivateKeyFile(privateKeyFilePath, passPhrase) };

        var methods = new List<AuthenticationMethod>();
        methods.Add(new PasswordAuthenticationMethod(user, passPhrase));
        methods.Add(new PrivateKeyAuthenticationMethod(user, keyFiles));

        var con = new ConnectionInfo(host, port, user, methods.ToArray());
        var client = new SshClient(con);
        client.Connect();

        // create an xterm shell
        var Shell = client.CreateShellStream("xterm", 80, 24, 800, 600, 1024);

        // for reading & writing to the shell
        var reader = new StreamReader(Shell);
        var writer = new StreamWriter(Shell);

        // ....

        client.Disconnect();
    } 
```

## 私钥文件格式

请注意，您的私钥文件必须是 OpenSSH 格式。如果您在 Notepad++ 中打开密钥文件，它的第一行必须有“BEGIN RSA PRIVATE KEY”。

如果没有，则使用 puttygen 将您的私钥文件转换为 OpenSSH 格式。

1.  在 puttygen 中打开私钥
2.  转到转换菜单并选择导出 OpenSSH 密钥。
3.  将该新密钥保存到文件中并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:58:37.507

也许[Chilkat SSH 组件](http://www.chilkatsoft.com/ssh-sftp-component.asp)可以帮助你。

但它不是免费的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-05T13:37:52.927

我们的[SecureBlackbox](http://www.eldos.com/sbb/net-ssh.php)以所有常见格式加载和保存 SSH 密钥，并支持加密的密钥文件。不确定是否有任何其他图书馆这样做。

# android - 错误：R 无法解析

> ID：12268830
> 
> 赞同：1
> 
> 时间：2012-09-04T17:50:26.737
> 
> 标签：android, android-intent

在此代码中，当我导入 R 时，我遇到 问题，例如**R 无法解析为变量，然后出现新错误，例如****bAdd 无法解析或不是字段 bSub 无法解析或不是字段 tvDisplay 无法解析或不是字段** 我也是使用 project-> clean 选项的干净项目，但错误仍然存​​在 package com.thenewboston.com；

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {

    int counter ;
    Button add;
    Button sub;
    TextView display;
    @Overridea
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        counter = 0; 
       add = (Button) findViewById(R.id.bAdd);
       sub = (Button) findViewById(R.id.bSub);
       display = (TextView) findViewById(R.id.tvDisplay);
       add.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            counter++;
            display.setText("your total is" + counter );
        }
    });
       sub.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            counter = --;
            display.setText("your total is" + counter );
        }
    });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    } 
```

请删除这些错误并指导我在哪里做错谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:54:03.953

选择“**自动构建**”，这样每次清理项目时，都会重新构建它。是的，确保在清理之前保存文件（我知道这很奇怪，但有时错误会拒绝消失，直到你保存它然后清理它）。确保**布局文件夹**中的文件**没有错误**，因为它有时会阻止 R.java 中代码的自动生成

 **另外，请确保 MainActivity.java 中的代码没有**`import android.R`**. Eclipse 倾向于在您管理导入时添加它。

***编辑：***刚刚注意到您的代码中有语法错误。

```
counter = --; 
```

应该替换为

```
counter --; 
```**

# javascript - Javascript：XMLDocument 迭代

> ID：12268834
> 
> 赞同：1
> 
> 时间：2012-09-04T17:50:40.663
> 
> 标签：javascript, xmldocument, domparser

我有以下代码：

```
var xmlString = ajaxRequest.responseText.toString();
parser = new DOMParser()
doc = parser.parseFromString(xmlString, "text/xml"); 
```

响应文本是一个完整的 HTML 文档。创建 XMLDocument (doc) 后，我想检查每个节点，操作一些东西并打印它。

如何迭代 XMLDocument？我想继续它的每个节点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:04:17.440

一个小例子，如果你想从这个 XML 中获取所有链接并打印它们的文本

```
var links = doc.documentElement.getElementsByTagName("a");

for (i=0;i<links.length;i++)  {  
    var txt=links[i].firstChild.nodeValue;
    document.write(txt + '<br>');
} 
```

几乎可以肯定这是正确的，没有时间测试它。

您可以阅读这篇文章以更深入地了解：

[getElementsByTagName](http://reference.sitepoint.com/javascript/Document/getElementsByTagName)

[节点名](http://reference.sitepoint.com/javascript/Node/nodeName)

[节点列表](http://reference.sitepoint.com/javascript/NodeList)

希望这可以帮助。

此致！

# python - 是否可以仅在本地主机上运行 python SimpleHTTPServer？

> ID：12268835
> 
> 赞同：99
> 
> 时间：2012-09-04T17:50:44.630
> 
> 标签：python, http, command-line, python-2.x, simplehttpserver

我有一个 vpn 连接，当我运行 python -m SimpleHTTPServer 时，它在 0.0.0.0:8000 上提供服务，这意味着它可以通过 localhost**和**我的真实 IP 访问。我不希望机器人扫描我，并且对只能通过 localhost 访问服务器感兴趣。

可能吗？

```
python -m SimpleHTTPServer 127.0.0.1:8000  # doesn't work. 
```

也欢迎任何其他可以使用命令行立即执行的简单 http 服务器。

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2016-11-27T05:50:04.997

在 Python 3.4 及更高版本中，该`http.server`模块接受一个`bind`参数。

根据[文档](https://docs.python.org/3/library/http.server.html)：

> `python -m http.server 8000`
> 
> 默认情况下，服务器将自己绑定到所有接口。选项 -b/--bind 指定它应该绑定的特定地址。例如，以下命令使服务器仅绑定到 localhost：
> 
> `python -m http.server 8000 --bind 127.0.0.1`
> 
> 3.4 新版功能：引入了 --bind 参数。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2012-09-04T18:18:49.127

正如*@sberry*解释的那样，简单地使用 nice`python -m ...`方法是不可能的，因为 IP 地址在`BaseHttpServer.test`函数的实现中是硬编码的。

一种从命令行执行此操作而无需先将代码写入文件的方法是

```
python -c 'import BaseHTTPServer as bhs, SimpleHTTPServer as shs; bhs.HTTPServer(("127.0.0.1", 8888), shs.SimpleHTTPRequestHandler).serve_forever()' 
```

如果这仍然算作一个衬里取决于您的终端宽度;-) 这当然不是很容易记住。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2012-09-04T17:56:19.677

如果您阅读源代码，您会看到只有端口可以在命令行上被覆盖。如果你想改变它所服务的主机，你需要自己实现and的`test()`方法。但这应该很容易。`SimpleHTTPServer``BaseHTTPServer`

这是您可以很容易地做到这一点的方法：

```
import sys
from SimpleHTTPServer import SimpleHTTPRequestHandler
import BaseHTTPServer

def test(HandlerClass=SimpleHTTPRequestHandler,
         ServerClass=BaseHTTPServer.HTTPServer):

    protocol = "HTTP/1.0"
    host = ''
    port = 8000
    if len(sys.argv) > 1:
        arg = sys.argv[1]
        if ':' in arg:
            host, port = arg.split(':')
            port = int(port)
        else:
            try:
                port = int(sys.argv[1])
            except:
                host = sys.argv[1]

    server_address = (host, port)

    HandlerClass.protocol_version = protocol
    httpd = ServerClass(server_address, HandlerClass)

    sa = httpd.socket.getsockname()
    print "Serving HTTP on", sa[0], "port", sa[1], "..."
    httpd.serve_forever()

if __name__ == "__main__":
    test() 
```

并使用它：

```
> python server.py 127.0.0.1     
Serving HTTP on 127.0.0.1 port 8000 ...

> python server.py 127.0.0.1:9000
Serving HTTP on 127.0.0.1 port 9000 ...

> python server.py 8080          
Serving HTTP on 0.0.0.0 port 8080 ... 
```

# c++ - 有没有办法降低时间复杂度来找到这个矩阵的n次方？

> ID：12268838
> 
> 赞同：2
> 
> 时间：2012-09-04T17:50:57.770
> 
> 标签：c++, algorithm

我正在研究一个问题，我应该找到`nth`一个`4x4`矩阵的幂，它`n`可以和我一样大`10^15`，因为答案中的值可能非常大，我可以使用`modulo 10^9+7`。给定矩阵是-

```
 2  1 -2 -1
A= 1  0  0  0
   0  1  0  0
   0  0  1  0 
```

我为此目的编写了一个代码，但它的运行时间超过了预期的时间。因此，请任何人帮助我降低时间复杂度。

```
#define FOR(k,a,b) for(typeof(a) k=(a); k < (b); ++k)
typedef long long ll;
#define dim 4
struct matrix {
    long long a[dim][dim];
};
#define MOD 1000000007
matrix mul(matrix x, matrix y)
{
    matrix res;
    FOR(a, 0, dim) FOR(b, 0, dim) res.a[a][b] = 0;
    FOR(a, 0, dim) FOR(b, 0, dim) FOR(c, 0, dim) {
    ll temp = x.a[a][b] * y.a[b][c];
    if (temp <= -MOD || temp >= MOD)
        temp %= MOD;
    res.a[a][c] += temp;
    if (res.a[a][c] <= -MOD || res.a[a][c] >= MOD)
        res.a[a][c] %= MOD;
    }
    return res;
}

matrix power(matrix m, ll n)
{
    if (n == 1)
        return m;
    matrix u = mul(m, m);
    u = power(u, n / 2);
    if (n & 1)
        u = mul(u, m);
    return u;
}

matrix M, RP;
int main()
{
    FOR(a, 0, dim) FOR(b, 0, dim) M.a[a][b] = 0;
    M.a[0][0] = 2;
    M.a[0][1] = 1;
    M.a[0][2] = -2;
    M.a[0][3] = -1;
    M.a[1][0] = 1;
    M.a[2][1] = 1;
    M.a[3][2] = 1;
    int nt;
    scanf("%d", &nt);
    while (nt--) {
    ll n;
    scanf("%lld", &n);
    RP = power(M, n);
    FOR(a, 0, dim)
        FOR(b, 0, dim)
        printf("%lld\n", RP.a[a][b]);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:55:53.973

[评论者表明这个答案是不完整的。答案保留在这里以供参考，但不想再投票了。评论者会自行决定添加更完整的答案吗？]

是的。一个很好的方式来做你想做的事是众所周知的。您必须对矩阵进行*对角化。*

对角化将需要一些编程。该理论在[此处](http://derivations.org/)进行了解释。14.6。幸运的是，现有的矩阵代数库（如 LAPACK）已经包含对角化例程。

@Haile 正确且有趣地观察到并非所有矩阵都是可对角化的，存在退化的情况。我对这种情况没有太多的实践经验。有 Schur 分解（参见先前链接的源代码的第 14.10 节），但我通常看到 Schur 仅用于提出理论观点，而不是进行实际计算。不过，我相信舒尔会奏效。我怀疑，实现它需要付出很多努力，但它会起作用，即使在严格不可对角矩阵的情况下也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:41:39.960

您可以利用多个测试用例来减少总计算量。

请注意，每次调用 power 时，您都在重新计算原始矩阵 2 的所有幂。因此，对于像 10^15（大约 2^50）这样的数字，您最终将对矩阵进行 50 次平方，并计算该数字中每个非零位的乘法（可能是 25 次）。

如果您只是预先计算 2 的 50 次幂，那么每个测试用例平均只需要 25 次乘法而不是 75 次。

您可以将这个想法更进一步，并为您的求幂使用不同的基础。这将导致更多的预计算，但每个测试值的最终矩阵乘法更少。

例如，您可以预先计算 [M^1,M^2,M^3],[M^4,M^8,M^12，而不是预先计算 M^2, M^4, M^8, M^16 ],[M^16,M^32,M^48] 所以 M^51 将是 (M^3)*(M^48) 而不是 M*M^2*M^16*M^32

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:34:47.170

这并不是关于更快地对矩阵求幂的想法，而是关于加快整个程序的想法。

如果您被要求执行 10^4 次幂运算，这并不意味着它们应该独立完成。您可以对请求进行排序并为每个下一个计算重用先前的结果。

您还可以存储先前计算的中间结果。

# java - Java ConcurrentHashMap 实现

> ID：12268843
> 
> 赞同：38
> 
> 时间：2012-09-04T17:51:15.223
> 
> 标签：java

我刚刚在看Java的ConcurrentHashMap的源代码，发现这行代码：

```
/*
 * The maximum number of times to tryLock in a prescan before possibly blocking on acquire in   
 * preparation for a locked segment operation. On multiprocessors, using a bounded number of  
 * retries maintains cache acquired while locating nodes.
 */
static final int MAX_SCAN_RETRIES =
              Runtime.getRuntime().availableProcessors() > 1 ? 64 : 1 
```

用于在`MAX_SCAN_RETRIES`获取锁时查找条目。我的问题是如何`64`确定多处理器机器的数量？有人知道这个数字背后的理论`64`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T19:56:52.303

在处理跨多个 CPU 的锁重试时，您需要在尝试快速获取锁（自旋）和允许 CPU 切换到另一个线程以避免浪费 CPU 时间在不会发生的锁上自旋之间取得平衡很快发布。允许 CPU 尝试获得锁的实际自旋次数受到整个系统的实际速度以及通常在临界区中执行的代码量的强烈影响。

这个问题深深植根于停止问题以及与 SMP 系统上的操作系统设计相关的许多其他问题，以优化并发性。这种设计选择通常是通过在许多应用程序中反复试验的方法来解决的。但是，在我看来，选择 64 就像是实现者的任意调用（数字是 2 的幂）。

不幸的是，这个特定的代码既有错误又有限制。错误在于 availableProcessors 的文档指出“此值可能会在虚拟机的特定调用期间发生变化”，因此可能导致锁旋转太多次（如果计数从 > 1 移动到 = 1）或太少（在反之亦然）。它的局限性在于，真正需要在其应用程序中调整并发性的开发人员没有能力这样做，因为 MAX_SCAN_RETRIES 是最终的（尽管可以使用反射来玩一些技巧）。

# magento - 不要将捆绑的主项目纳入运输

> ID：12268845
> 
> 赞同：0
> 
> 时间：2012-09-04T17:51:37.690
> 
> 标签：magento

如果将捆绑产品添加到购物车中，则商品本身以及每个捆绑选项都会根据以下条件计入购物车中的商品数量：

```
<?php $var = Mage::helper('checkout/cart')->getCart()->getQuote()->getItemsCollection() ?>
<?php echo count($var) ?> 
```

看起来实现准确运费（基于客户要求）的最佳方法是将购物车中的每个捆绑产品的商品数量减少 1。

这会是一个混乱的修复吗？你将如何实现这个“功能”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:10:15.047

当然不，您只需自定义运输模型，并将您的业务规则实施到运输。看看这个： http: [//www.magentocommerce.com/wiki/5_-_modules_and_development/shipping/create-shipping-method-module](http://www.magentocommerce.com/wiki/5_-_modules_and_development/shipping/create-shipping-method-module) 它可能很“简单”

# android - Android：在java中解析json对象中的json

> ID：12268847
> 
> 赞同：1
> 
> 时间：2012-09-04T17:51:48.557
> 
> 标签：android, json

我有这样的json..

```
 {"source":[{"id":"22","name":"xyz"},{"id":"23","name":"ghj"},
 {"id":"24","name":"tuv"}]} 
```

我必须得到“id”和“name”的值。怎么做..

我已经尝试了很多。但无法获得如何做到这一点的最佳解决方案。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:35:19.457

您想使用以下代码....

```
 JSONObject jObject = new JSONObject(responseBody);
                sourceArray = jObject.getJSONArray("source");
                for (int i = 0; i < 3; i++) {
                    name[i] = sourceArray.getJSONObject(i).getString("name").toString();
                    id[i] = sourceArray.getJSONObject(i).getInt("id");
                } 
```

responseBody 是您的实际 JSON 字符串。如果您有任何疑问，请回复。

# list - 对象引用未设置为对象的实例-“对象包含列表属性”

> ID：12268849
> 
> 赞同：0
> 
> 时间：2012-09-04T17:51:49.790
> 
> 标签：list, exception, object, error-handling

我只是创建一个类的对象。此类的属性之一是另一个类的对象列表。当我想从这个列表中的第二个类中转换一个对象时，将给出此错误“对象引用未设置为对象的实例”。

这是第一堂课的代码：

```
public class RCSection<Bar>
    {
       private string RCSectionName;
       private int NumberOfBars;
       private double NumberOfInnerBars;
       private double NumberOfOuterBars;
       private double TransverseSpacing;

       private Steel LongitudinalSteel;
       private Steel TransevrseSteel;
       private Concrete Concrete;
       private List<Bar> LongitudinalBar;

       private Bar TransverseBar;

       private Section Section;

       public string rCSectionName
       {
           set { RCSectionName = value; }
           get { return RCSectionName; }
       }
       public int numberOfBars
       {
           set { NumberOfBars = value; }
           get { return NumberOfBars; }
       }
       public double transverseSpacing
       {
           set { TransverseSpacing = value; }
           get { return TransverseSpacing; }
       }
       public double numberOfInnerBars
       {
           set { NumberOfInnerBars = value; }
           get { return NumberOfInnerBars; }
       }
       public double numberOfOuterBars
       {
        set { NumberOfOuterBars = value; }
        get { return NumberOfOuterBars; }
       }

       public Steel longitudinalSteel
       {
           set { LongitudinalSteel = value; }
           get { return LongitudinalSteel; }
       }
       public Steel transverseSteel
       {
           set { TransevrseSteel = value; }
           get { return TransevrseSteel; }
       }
       public Concrete concrete
       {
           set { Concrete = value; }
           get { return Concrete; }
       }
       public List<Bar> longitudinalBar
       {
           set { LongitudinalBar = value; }
           get { return LongitudinalBar; }
       }
       public Bar transverseBar
       {
           set { TransverseBar = value; }
           get { return TransverseBar; }
       }

       public Section section
       {
           set { Section = value; }
           get { return Section; }
       } 
```

}

一开始我想知道，我为列表创建属性的方式，对吗？！之后，以下代码与使用此类的对象并在其中转换对象有关

```
 for (int i = 0; i < myRCSection.numberOfBars; i++)
  {

       Bar mybar = new Bar(newFormRCSection.comboBoxSteelSize1.Text,"SI");
       myRCSection.longitudinalBar[i] = mybar;//Error will appear here :(

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:16:28.510

我找到了答案。当我定义 RCSection 的新对象时，我应该定义与该对象相关的列表

```
RCSection myRCSection= new RCSection<Bar>();
myRCSection.longitudinalBar = new List<Bar>(); 
```

# android - can i access an element within a view, with only access to the view's reference variable?

> ID：12268857
> 
> 赞同：0
> 
> 时间：2012-09-04T17:52:10.980
> 
> 标签：android, ios, titanium

If I have a view - `myCoolView` - and I'd like to change the text of a button in the view, how do I do it?

Given that I know that the button is called, say, `myCoolButton`, and it was added to the view in some function, and now, in a different function I have access to `myCoolView`, how do I change the button text?

I checked the Titanium API and I cannot see a "getter" call on a view to access anything that was added to it via the `add` method.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:10:55.960

Use the "children" property, [as documented](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.View-property-children).

```
// Create the views.
var myCoolView = Ti.UI.createView();
var myCoolButton = Ti.UI.createButton({
    title: 'My Cool Button',
    id: 'myButtonsID'
});
myCoolView.add(myCoolButton);

// Later, find the button.
var children = myCoolView.children;
if (children) {
    for (var i = children.length - 1; i >= 0; i--) {
        if (children[i].id === 'myButtonsID') {
            children[i].title = 'My Updated Cool Button';
            break;
        }
    }
} 
```

# c# - Linq to sql 在 C# 中对提交进行前置和后置操作？

> ID：12268858
> 
> 赞同：1
> 
> 时间：2012-09-04T17:52:13.273
> 
> 标签：c#, linq-to-sql

除了更新记录之外，如何让 Linq to Sql 执行前置和后置操作？我正在尝试设置一个类型 4 缓慢变化的维度，如此[处](http://en.wikipedia.org/wiki/Slowly_changing_dimension#Type_0)所述。

**tbl_emplyees**

```
Id     Name     HourlyWage
--------------------------
1      Bob      30
2      Dan      20 
```

**tbl_emplyees_history**

```
Id     CreatedDate      Name     HourlyWage
----------------------------------------------
1      4/2/2012         Bob      10
1      4/3/2012         Bob      20
2      2/2/2012         Dan      10 
```

所以，我需要做的是，在更新任何记录之前，需要将它们复制到历史表中。

我查看了存储过程，但那里似乎存在断开连接。Linq 非常出色，它可以自动提交修改后的记录，但似乎没有办法将所有修改后的记录传递到存储过程中，从而实现奇偶校验并允许前后操作同样轻松。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:05:10.120

您在存储过程中看到什么“断开连接”？LINQ to SQL 对存储过程有很好的支持。

或者，您是否考虑过审计触发器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:04:16.797

由于您是以编程方式执行此操作，您是否可以在更新 tbl_employees 中的相应行之前将新行插入到 tbl_employees_history 中？

# c# - 请使用 line => line 和 .toArray 解释这部分 C# 代码中发生了什么

> ID：12268862
> 
> 赞同：2
> 
> 时间：2012-09-04T17:52:28.807
> 
> 标签：c#, winforms, visual-studio-2010

这是代码：

```
File.ReadLines(sourceFilePath).Select(line => line.Split('\t')).ToArray(); 
```

我知道在“选择”关键字之前发生了什么。有人可以分解“line => line.Split ...

我的理解是，我们将逐行浏览文本文件，并通过制表符解析和拆分一行输入文本（因为我知道文本是制表符分隔的）。但是，“line => line...”到底是怎么回事？

我在代码行的末尾得到文本进入一个数组。但是当我调试并单步执行代码并使用本地窗口时，包含已读取内容的数组的名称是什么？如何查看读入数组的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T17:54:10.747

这实际上是说，“对于文件中的每一行，将制表符上的行拆分为一个字符串数组，然后创建这些数组的数组（这样返回数组中的每个元素都是一个数组）”

该`Select`函数采用 Enumerable 某物并将函数应用于每个项目，为每个输入值生成 1 个输出值。在其他编程语言中，这称为 Map 或 Projection。

=> 表示编译成委托函数的 lambda 表达式。它接受一个名为“line”的参数，其类型由用法推断（因为`ReadLines`返回字符串的 IEnumerable，属于字符串`line`类型）。

lambda 的主体具有最后一次调用（对 的调用`Split`）产生的值的隐含返回类型。因此，该行表示“在每一行上运行此 lambda”。

`.ToArray`最后，最后（在 lambda 之外）的调用将`IEnumerable<String[]>`返回的 by`Select`转换为数组数组 ( `String[][]`)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T17:56:00.930

这`=>`是一个[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)- 将其视为一种[委托](http://msdn.microsoft.com/en-us/library/ms173171)或[函数](http://msdn.microsoft.com/en-us/library/bb549151)。从返回的每个项目`File.Readlines`都由`Select`-操作，`Select`通过 lambda 函数传递每一行，该函数`line => line.Split('\t')`接受一个参数（名为`line`），然后返回调用参数的`.Split('\t')`结果`line`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T17:59:30.733

运算符是一种 LINQ 扩展方法，用于将`Select`集合中的元素投影到不同的形式中。最常见的用法是从该集合的元素中选择单个列到一个新集合中，但是可以在 lambda 表达式中处理更复杂的投影。

编译器会自动推断该`Select`方法返回的数据类型，以便它依赖于您传入的 lambda 的输出。在您的情况下，lambda 的输出是一个字符串数组，因此最终它返回一个`IEnumerable<string[]>`. 当您`ToArray()`最后调用时，您将 转换`IEnumerable<string[]>`为具体的 `string[][]`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T17:57:51.033

这是林奇。

Select 方法是 IEnumerable 的扩展，它允许您使用 lambda 表达式将每个结果“投影”到其他形式（行 => ... 部分）

在这种情况下，开发人员希望拆分制表符上的每一行（产生一个数组，这是投影）并检索一个包含每个结果的数组。

# android - 如何根据android设备上可用的分辨率设置按钮的宽度

> ID：12268867
> 
> 赞同：-1
> 
> 时间：2012-09-04T17:53:16.063
> 
> 标签：android, android-layout, android-widget

我当前的 android 项目要求按钮的宽度应根据设备上可用的分辨率动态设置

我想连续排列 9 个按钮，但大小取决于可用的分辨率

对于我们正在使用以下代码的当前场景

```
 DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    //int sheight = displaymetrics.heightPixels;
    int swidth = displaymetrics.widthPixels;
    int px=swidth/11;
    bW.setWidth(px);
    bE.setWidth(px);
    bR.setWidth(px);
    bT.setWidth(px);
    bY.setWidth(px);
    bU.setWidth(px);
    bI.setWidth(px);
    bO.setWidth(px);
    bP.setWidth(px); 
```

不知何故，按钮的宽度不会以任何方式改变它保持不变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T17:56:04.813

如果我认为您的按钮是您使用 设置的图像`Selector file`，那么您需要将这些文件保存在`drawable-hdpi`、`drawable-mdpi`和中`drawable-ldpi`，并且图像将**根据可用的分辨率自行调整。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:20:20.547

我认为你应该使用**android:layout_weight**属性。它会根据可用宽度消耗空间。

将所有按钮设置为**android:layout_weight="1"**

试试这个网址

[Android中的线性布局和权重](https://stackoverflow.com/questions/2698817/linear-layout-and-weight-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:31:21.027

使用 Ninepatch 图像的按钮和其他对象不会比 Ninepatch 本身小。

确保您使用适合您所需尺寸的按钮的 Ninepatch 图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T05:49:39.097

我想出了这个解决方案

```
 ViewGroup.LayoutParams params = button.getLayoutParams();
    params.width=px;
    button.setLayoutParams(params); 
```

# websphere - Web Sphere 应用服务器 v7.0

> ID：12268868
> 
> 赞同：0
> 
> 时间：2012-09-04T17:53:16.967
> 
> 标签：websphere, websphere-6.1

WebSphereApplicationServer 中有哪些不同的“wsadmin 对象”，它们的用途是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:09:40.970

[WebSphere InfoCenter](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/txml_configvsoper.html)中描述了 AdminConfig、AdminControl、AdminTask 和 AdminApp 对象。

# asp.net-mvc - Ninject DI - 在 MVC3 应用程序中放置绑定

> ID：12268871
> 
> 赞同：0
> 
> 时间：2012-09-04T17:53:24.723
> 
> 标签：asp.net-mvc, dependency-injection, inversion-of-control, ninject

我有一个非常分层的 MVC3 应用程序（域、服务、Web、基础设施等的单独项目）

我了解控制器构造函数注入的概念，MVC3 和 Ninject 可以很好地协同工作。但是对于与 web 层分开的层的注入呢？

例如，我有一个依赖于 Repository 接口的服务。服务是从控制器调用的，服务本身会被构造函数注入正确注入，但是存储库呢？我该如何注射？

```
public class MyService
{
  protected virtual IPersonRepository PersonRepository {get; set;}

  public virtual void UseRepository()
  {
    PersonRepository.FindEveryoneInTheWorldButDontReturnThem();
  }
} 
```

在上面的示例中，我在哪里/如何 [n] 注入存储库？

Ninject 3.0 Ninject.Web.MVC 3.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:55:10.337

通过构造函数注入注入存储库，您的 IoC 容器 (Ninject) 将处理依赖链（即，当您将 MyService 作为依赖注入时，它的任何依赖也将由容器解析，它们的依赖等等）

```
public MyService(IPersonRepository personRepository)
{
    this.PersonRepository = personRepository;
} 
```

# c# - 通过正则表达式过滤和替换的有效方法

> ID：12268873
> 
> 赞同：0
> 
> 时间：2012-09-04T17:53:37.267
> 
> 标签：c#, regex

我正在处理一个字符串数组，并希望执行以下操作：

```
//Regex regex; List<string> strList; List<string> strList2; 
foreach (string str in strList){
    if (regex.IsMatch(str)) {      //only need in new array if matches...
        strList2.Add(regex.Replace(str, myMatchEvaluator)) 
                                   //but still have to apply transformation
    }
} 
```

现在，我知道这是可行的，但这实际上意味着对数组中的每个字符串运行两次相同的正则表达式。有没有办法将这两个步骤 - 过滤和转换 - 折叠成一个正则表达式解析调用？

（大部分时间都可以工作的一个是

```
string str2 = regex.Replace(str, myMatchEvaluator);
if (str2 == str)
    strList2.Add(str2); 
```

但这通常会丢弃一些仍然不需要替换的有效匹配项。）

**编辑：**一个与我的大致相似的正则表达式示例，以说明为什么这很棘手：想象一下在日志文件中的行首查找单词，并希望将它们大写。

正则表达式是`new Regex("^[a-z]+", RegexOptions.IgnorePatternWhiteSpace)`，替换函数是`match => match.ToUpper()`。

现在一些第一个单词已经大写了，我不想把它们扔掉。另一方面，我不想大写该单词的所有实例，而只是第一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:21:39.047

您可以创建自己的匹配评估器：

```
private class DetectEvaluator {
    public bool HasBeenAvaluated { get; private set }
    private MatchEvaluator evaluator;
    public DetectEvaluator(MatchEvaluator evaluator) { 
        HasBeenAvaluated = false;
        this.evaluator = evaluator;
    }
    public string Evaluate(Match m) {
        HasBeenAvaluated = true;
        return evaluator(m);
    }
} 
```

然后为您的每张支票创建一个新的：

```
var de1 = new DetectEvaluator(myMatchEvaluator);
string str2 = regex.Replace(str, de1.Evaluate);
if( de1.HasBeenEvaluated ) strList2.Add(str2); 
```

但我没有看到这里提高了可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T19:03:27.253

您可以使用 lambda 函数作为更新单词列表的匹配评估器。

```
IEnumerable<string> Replaces(string source)
{
    var rx = new Regex(@"\w+m", RegexOptions.IgnoreCase); // match words ending with 'm'
    var result = new List<string>(); 
    rx.Replace(source, m => { result.Add(m.ToString().ToUpper()); return m.ToString(); });
    return result;
}

    List<string> GetReplacements(List<string> sources) {
        var rx = new Regex(@"\w+m", RegexOptions.IgnoreCase); // match words ending with 'm'.
        var replacements = new List<string>(sources.Count);   // no need to allocate more space than needed.

        foreach(string source in sources) 
            // for each string in sources that matches 'rx', add the ToUpper() version to the result and replace 'source' with itself.
            rx.Replace(source, m  => {replacements.Add(m.ToString().ToUpper()); return m.ToString(); });

        return replacements;
    }

    List<string> GetReplacements2(List<string> sources) {
        var rx = new Regex(@"\w+m", RegexOptions.IgnoreCase); // match words ending with 'm'.
        var replacements = new List<string>(sources.Count);   // no need to allocate more space than needed.

        foreach(string source in sources) {
            var m = rx.Match(source);                         // do one rx match
            if (m.Success)                                    // if successfull
                replacements.Add(m.ToString().ToUpper());     // add to result.
        }

        return replacements;
    } 
```

如果您需要修改原始源并收集未修改的匹配项，则交换 lambda 表达式中的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T18:05:12.163

像这样的工作吗？

```
foreach (string str in strList)
{
    str = regex.Replace(str, delegate(Match thisMatch) {
        // only gets here if matched the regex already
        string str2 = yourReplacementFunction(thisMatch);  
        strList2.Add(str2);

        return thisMatch.Value;

    }); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T16:28:11.910

基于我收到的所有答案，以下工作：

```
void AddToIfMatch(List<string> list, string str; Regex regex; 
                                        MatchEvaluator evaluator)
{
    bool hasBeenEvaluated = false;
    string str2 = regex.Replace(
        str, 
        m => {HasBeenEvaluated = true; return evaluator(m);}
    );
    if( hasBeenEvaluated ) {list.Add(str2);}
} 
```

# android - 如何从android中的特定手机号码读取短信

> ID：12268884
> 
> 赞同：0
> 
> 时间：2012-09-04T17:54:14.110
> 
> 标签：android, sms

> **可能重复：**
> [读取来自特定发件人的所有短信](https://stackoverflow.com/questions/10870230/read-all-sms-from-a-particular-sender)

我想知道如何阅读短信以及如何拆分手机号码和消息正文。请给我一个示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:22:38.677

意图接收器的代码，它将从接收到的意图中读取 SMS 并显示消息。

```
 public class SmsReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                str += "SMS from " + msgs[i].getOriginatingAddress();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
            }
            //---display the new SMS message---
            Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
        }                         
    }
} 
```

并确保在您的清单文件中添加此权限。

```
<uses-permission android:name="android.permission.RECEIVE_SMS">
</uses-permission> 
```

此外，**`msgs[i].getOriginatingAddress()`**为您提供 SMS 的发件人，您可以检查这是否是您的特定号码。然后用于**`msgs[i].getMessageBody().toString();`**显示短信正文。

本[教程](http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android)涵盖了您问题的一些方面。

希望能帮助到你。

# windows - Powershell：获取 FQDN 主机名

> ID：12268885
> 
> 赞同：72
> 
> 时间：2012-09-04T17:54:18.587
> 
> 标签：windows, powershell

我想通过 powershell 脚本检索 Windows 服务器的 FQDN 名称。到目前为止，我找到了 2 个解决方案：

```
$server =  Invoke-Command -ScriptBlock {hostname} 
```

上面的行将只打印服务器的短名称

```
$sysinfo = Get-WmiObject -Class Win32_ComputerSystem
$server = “{0}.{1}” -f $sysinfo.Name, $sysinfo.Domain 
```

以上两行将为我提供 FQDN，但这看起来真的很讨厌代码来检索主机名:(

所以，我的问题是，有没有一种更简单的方法可以在 powershell 中获取 FQDN。我是一个 bash/perl 编码器，最近拿起了 powershell .. 所以很难。

谢谢。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-09-04T17:57:13.450

获取本地计算机的 FQDN：

```
[System.Net.Dns]::GetHostByName($env:computerName) 
```

或者

```
[System.Net.Dns]::GetHostByName($env:computerName).HostName 
```

获取远程计算机的 FQDN：

```
[System.Net.Dns]::GetHostByName('mytestpc1') 
```

或者

为了更好地格式化值使用：

```
[System.Net.Dns]::GetHostByName('mytestpc1').HostName 
```

*   对于远程机器，请确保主机可访问。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2012-09-04T18:02:54.400

怎么样：`"$env:computername.$env:userdnsdomain"`

这实际上*仅*适用于用户登录到域（即没有本地帐户）、登录到与服务器相同的域并且不适用于脱节的名称空间 AD 配置的情况。

使用另一个答案中引用的这个：

```
$myFQDN=(Get-WmiObject win32_computersystem).DNSHostName+"."+(Get-WmiObject win32_computersystem).Domain ; Write-Host $myFQDN 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-05-13T13:40:10.527

通过 dotNet 类的本地计算机 FQDN

```
[System.Net.Dns]::GetHostEntry([string]$env:computername).HostName 
```

或者

```
[System.Net.Dns]::GetHostEntry([string]"localhost").HostName 
```

参考：

[Dns 方法 (System.Net)](http://msdn.microsoft.com/en-us/library/System.Net.Dns_methods%28v=vs.110%29.aspx)

注意：GetHostByName 方法已过时

* * *

通过 WMI 查询的本地计算机 FQDN

```
$myFQDN=(Get-WmiObject win32_computersystem).DNSHostName+"."+(Get-WmiObject win32_computersystem).Domain
Write-Host $myFQDN 
```

参考：

[Win32_ComputerSystem 类](http://msdn.microsoft.com/en-us/library/aa394102%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-08-07T12:32:09.483

```
[System.Net.Dns]::GetHostByName((hostname)).HostName 
```

`$env:computerName`返回主机的 NetBIOS 名称，因此前面的两个示例都返回 netbioshostname.domainsuffix（不是 FQDN！）而不是 dnshostname.domainsuffix (FQDN)

例如，主机具有 FQDN aa-w2k12sv-storage.something.com 和 NetBIOS 名称 aa-w2k12sv-stor（一个简单的例子，我通常更改 NetBIOS 名称）

主机名实用程序返回 dnshostname，即 FQDN 的第一部分和代码

```
[System.Net.Dns]::GetHostByName((hostname)).HostName 
```

返回正确的 FQDN

注释：切勿使用 AD 域和主机的相同 NetBIOS 和 DNS 名称。如果您或第 3 方应用程序写入日志：“无法连接到 hostname.domainsuffix”，它会尝试解析什么名称？如果您在日志中看到“无法连接到 netbiosname.domainsuffix”，那么毫无疑问，是一个懒惰的程序员在 NetBIOS 名称中添加了域后缀，您可以确定这是一个错误，并且可以开票强制他们修复该问题...

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-09-16T16:31:26.297

```
(Get-ADComputer $(hostname)).DNSHostName 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-12-01T18:31:56.367

这是我一直使用的方法：

```
$fqdn= $(ping localhost -n 1)[1].split(" ")[1] 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-11-09T22:22:56.477

它也可以从注册表中检索：

```
Get-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters' |
   % { $_.'NV HostName', $_.'NV Domain' -join '.' } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-09-12T14:17:17.590

# 更清晰的远程 FQDN 格式

```
[System.Net.Dns]::GetHostByName('remotehost').HostName 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-03-09T21:15:24.927

这适用于 Windows 上的 PS 和 PS Core（在版本 5.1 和 7.2 上测试）

```
[System.Net.Dns]::Resolve($null).HostName 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-05-05T15:14:52.737

我使用以下语法：

```
$Domain=[System.Net.Dns]::GetHostByName($VM).Hostname.split('.')
$Domain=$Domain[1]+'.'+$Domain[2] 
```

$VM 是向上还是向下都没有关系...

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-05-11T19:26:11.997

要获取与第一个 IpAddress 对应的 fqdn，需要使用以下命令：

```
PS C:\Windows\system32> [System.Net.Dns]::GetHostByAddress([System.Net.Dns]::GetHostByName($env:computerName).AddressList[0]).HostName
WIN-1234567890.fritz.box 
```

其中`[System.Net.Dns]::GetHostByName($env:computerName).AddressList[0]`表示第一个 IpAddress-Object 并`[System.Net.Dns]::GetHostByAddress`从中获取 dns-object。

如果我在独立的 Windows 上采用获胜的解决方案，我只得到：

```
PS C:\Windows\system32> (Get-WmiObject win32_computersystem).DNSHostName+"."+(Get-WmiObject win32_computersystem).Domain
WIN-1234567890.WORKGROUP 
```

那不是我想要的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-04-29T14:08:25.350

```
"$env:computername.$env:userdnsdomain" 
```

如果像这样分开就可以了

```
"$env:computername"+"$env:userdnsdomain" 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-05-05T06:05:59.590

这个怎么样

```
$FQDN=[System.Net.Dns]::GetHostByName($VM).Hostname.Split('.')
[int]$i = 1
[int]$x = 0
[string]$Domain = $null
do {
    $x = $i-$FQDN.Count
    $Domain = $Domain+$FQDN[$x]+"."
    $i = $i + 1
} until ( $i -eq $FQDN.Count )
$Domain = $Domain.TrimEnd(".") 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-09-15T12:36:36.297

这是一种根据“名称”和“可分辨名称”确定服务器 FQDN 的方法。适用于多个域：

```
$server = Get-ADComputer serverName -Server domainName -Properties * | select Name, DistinguishedName
$domain = $server.DistinguishedName -split ","
$domain = $domain | ? {$_ -like 'DC=*'}
$domain = $domain -join "."
$domain = $domain -replace "DC="
$FQDN = $server.Name + "." + $domain 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-03-01T15:49:20.793

我有以下添加..我需要从主机名中分离出 dns 后缀..而且我只“知道”服务器别名短名称......并且想知道 dns 后缀是什么

```
#example:
#serveralias:     MyAppServer.us.fred.com
#actualhostname:  server01.us.fred.com 
#I "know":        "MyAppServer" .. I pass this on as an env var called myjumpbox .. this could also be $env:computername

$forname                 = $env:myjumpbox
$fqdn                    = [System.Net.Dns]::GetHostByName($forname).Hostname
$shortname               = $fqdn.split('.')[0]
$domainname              = $fqdn -split $fqdn.split('.')[0]+"."
$dnssuf                  = $domainname[1]  
" name parts are- alias: " + $forname + " actual hostname: " + $shortname + " suffix: " + $dnssuf

#returns

name parts are- alias: MyAppServer actual hostname: server01 suffix: us.fred.com 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-10-06T09:25:31.643

如果您有多个网络适配器并且多个适配器处于活动状态（fe WLAN + VPN），则需要进行更复杂的检查。您可以使用此单线：

```
[System.Net.DNS]::GetHostByAddress(([System.Net.DNS]::GetHostAddresses([System.Environment]::MachineName) | Where-Object { $_.AddressFamily -eq "InterNetwork" } | Select-Object IPAddressToString)[0].IPAddressToString).HostName.ToLower() 
```

# ios - 如何在多个 UIViewController 之间共享一个故事板场景

> ID：12268888
> 
> 赞同：15
> 
> 时间：2012-09-04T17:54:45.407
> 
> 标签：ios, uiviewcontroller, segue, uistoryboard, uistoryboardsegue

我完全重新制定了这个问题，因为我了解到我最初偏离了轨道，但让我离解决问题更近了一步。参考这张图... ![故事板插图](../Images/28632a9610f16b7db271413f184c2afb.png)

我想在代码中创建或操作segue（以黄色突出显示），以便主视图是`MFMasterViewController`（以红色突出显示）的多个子类中的任何一个。

使用 Nibs 执行此操作时，我可以创建一个 Nib，`SharedNib.xib`并将类设置为`MFMasterViewController`，然后创建我的子类，例如`MFMasterViewControllerSubclassA`，`MFMasterViewControllerSubclassB`等等，然后实例化我想要使用的任何子类......

```
MFMasterViewControllerSubclassA *controller = [[MFMasterViewControllerSubclassA alloc] initWithNibName:@"SharedNib" bundle:nil]; 
```

或者...

```
MFMasterViewControllerSubclassB *controller = [[MFMasterViewControllerSubclassB alloc] initWithNibName:@"SharedNib" bundle:nil]; 
```

等等

关于我如何使用情节提要来做到这一点的任何线索？

在我的情况下，想要这样做的原因是我的所有子类都是相同的表格视图和数据，但排序不同，并且在写入 cels 的详细文本的内容方面存在一些差异。我怀疑这是一种并不少见的模式。

干杯和 TIA，佩德罗 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T21:01:27.367

这不是一个直接的答案，但这就是根据您对原因的解释，我将如何完成您想要的事情。

基本上，您需要将`UITableViewDataSource`（也可能是委托）与委托分开，`MFMasterViewController`因此当执行 segue 时，您可以在视图控制器中设置正确的数据源和委托。

所以在导航控制器中你需要实现该`prepareForSegue:sender:`方法。这是您可以在执行之前自定义 segue 的地方：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // you can set the segue identifier using Interface Builder 
    // also it is a good thing to make sure which segue you're using
    if (([segue identifier] isEqualToString:@"TheId"]) {
       id<UITableViewDataSource> dataSource = [[TableViewDataSourceImplementationA alloc] init];
       [[[segue destinationViewController] tableView] setDataSource:dataSource];
    }
} 
```

通过这种方式，您可以获得所需的自定义，而无需创建视图控制器的子类。

如果您可以访问 WWDC 视频，请查看会话 #407 在您的应用中采用故事板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-17T20:20:23.207

对于遇到此问题的任何人，您还应该更普遍地考虑使用“策略”模式作为子类化控制器的替代方案。公认的答案是其中的一种形式，其中实施的策略来自任何数据源/委托，并且可以在运行时切换。另一个例子是[https://stackoverflow.com/a/17381927/954643](https://stackoverflow.com/a/17381927/954643)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T18:05:14.397

如果您的 .m 文件没有与任何故事板相关联，那么 self.storyboard 不会是 Nil 吗？

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:
                                   @"MainStoryboard" bundle:[NSBundle mainBundle]];
    ViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"HauptMenu"]; 
```

确保将 storyboardWithName: 更改为您的故事板的名称。

```
NSString * storyBoardName;
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    storyBoardName = @"MainStoryboard_iPad";
} else {
    storyBoardName = @"MainStoryboard_iPhone";
}
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:
                                   storyBoardName bundle:[NSBundle mainBundle]];
ViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"HauptMenu"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-19T19:13:22.510

我相信我终于找到了答案。我们想使用带有另一个类名的故事板 ViewController。有很多解决方法，比如使用委托，但我认为这是最好的一种。我已经在另一个话题中回答了。希望能帮助到你！ [https://stackoverflow.com/a/32103618/1943053](https://stackoverflow.com/a/32103618/1943053)

# c# - 如何抑制诸如“变量从未分配给..”之类的 Intellisense 警告？

> ID：12268889
> 
> 赞同：4
> 
> 时间：2012-09-04T17:54:46.920
> 
> 标签：c#, visual-studio, warnings, intellisense

我在玩MEF。问题是，Visual Studio（'12，Pro）认为我导入的东西从未分配给并有助于突出显示警告：

![带有 VS 警告的代码屏幕截图。](../Images/9618443551d9332d423798b7f7e6cb17.png)

我知道这只是装饰性的，但是（因为这些警告通常值得注意）我觉得它会分散注意力。

在我的研究中，我发现了两种声称可以抑制警告的方法，但它们似乎指的是构建时的警告，而不是来自 Intellisense：

*   [`SupressMethod`属性_](http://www.chris-alexander.co.uk/5328)
*   [该`#pragma warning disable`指令](https://stackoverflow.com/questions/5004832/visual-studio-2010-pro-suppressmessage)

有没有办法抑制 IntelliSense 警告？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-09-04T17:56:14.317

只需将其设为公共财产，您一开始就不会收到警告。

# javascript - Javascript window.open() 工具栏=没有不起作用

> ID：12268894
> 
> 赞同：0
> 
> 时间：2012-09-04T17:55:07.537
> 
> 标签：javascript, html, linux, firefox, window.open

我正在尝试用最少的附加功能（工具栏、菜单栏、地址栏等）在 Firefox 中打开一个 html 文件。只是网页的html内容，没有别的。我希望能够从终端在 linux 中执行此操作。我还必须以这样一种方式做到这一点，即它可以在运行相同版本的 Firefox 的多台 linux 机器上工作。因此，这消除了使用配置文件的任何可能性。我希望 Firefox 有一个简单的参数可以让我关闭这些设置。我不相信有。

我发现的唯一可能性是通过 javascript 的 window.open。似乎 window.open 的参数规格甚至在**firefox 1.5.0.9**中都不起作用。我读过其中一些已在 firefox 3.0+ 中删除，但没有发现任何关于我使用的版本 1.5.0.9 的信息。

这就是我用来使用 windows.open 打开我的 .html 文件的方法...

测试.html：

```
 <html>
    <body>
    <script>
    window.open('./rel_notes.html','_self','toolbar=no,menubar=no')
    </script>
    </body>
    </html> 
```

然后从终端运行'firefox test.html'。

当我这样做时，工具栏和菜单栏仍然出现。我究竟做错了什么？有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:13:05.553

如果您的浏览器设置允许弹出没有来自 X 源的通知（我猜是本地主机？），那么以下可能会起作用：

```
 window.open('./rel_notes.html',null,'menubar=no,toolbar=no');
window.open('','_self',''); //this is needed to prevent IE from asking about closing the window.
setTimeout('self.close();',500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:29:06.970

取自 bungdito 给我的链接中的链接：

```
 After a window is opened, JavaScript can't be used to change the features. 
```

因此，通过打开 test.html，然后在 _self 上使用 window.open，我正在尝试使用 javascript 将功能调整为已打开的窗口。

来源：[https ://developer.mozilla.org/en-US/docs/DOM/window.open](https://developer.mozilla.org/en-US/docs/DOM/window.open)

# java - 如何使用 TableCellRenderer 将单元格的背景填充一半？

> ID：12268897
> 
> 赞同：1
> 
> 时间：2012-09-04T17:55:13.880
> 
> 标签：java, swing, user-interface, tablecellrenderer

我想使用 2 种颜色为表格的同一个单元格着色。我还必须在单元格中显示一些文本，我想通过保持当前结构来做到这一点。

我已经尝试过使用标签、面板，但我无法让它正常工作。此外，颜色必须根据单元格上的状态更新（更新前半部分的颜色，同时保持第二部分的颜色）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:01:04.290

您可以编写自己的`Component`/扩展，`JPanel`它知道如何显示文本并知道如何用 2 种颜色绘制背景。这意味着您必须覆盖`paint`或`paintComponent`在您的自定义组件中。

然后，`getTableCellRendererComponent`将返回此自定义组件的实例。

# c# - 如何在运行时绘制创建的 DoubleBufferedPanel

> ID：12268898
> 
> 赞同：-1
> 
> 时间：2012-09-04T17:55:14.463
> 
> 标签：c#, .net, winforms, graphics

我编写了一个用于绘制矢量基元的 C# 应用程序。对于绘图表面，我使用放置在 TabControl 中的 Draw.DoubleBufferedPanel。当我创建新项目时，会创建一个带有新 Draw.DoubleBufferedPanel 的新标签页。但是在用于溺水的按钮的单击事件中，我使用主要的 Draw.DoubleBufferedPanel，当我创建新选项卡时，我无法在其中绘制任何内容。我必须做什么才能在新创建的项目中绘图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:24:12.630

确保您的控制层次结构正确：

*   主窗体
    *   选项卡控件
    *   标签页1
        *   我的绘图控制1：我的绘图控制
    *   标签页2
        *   我的绘图控制2：我的绘图控制

然后在 MyDrawControl 的绘制处理程序（不是它的实例）中，您需要通过完整地保留剪裁来仅在其自己的表面（图形）上进行绘制。

**更新：**

[可以在此处](https://stackoverflow.com/questions/12244392/how-to-correctly-get-a-winforms-button-control-to-draw-custom-text)找到有关如何实现执行某些自定义绘图的控件的信息。通常，您必须编写自己的类并从控件（或其后代之一，如 Button）继承并实现 OnPaint() 方法。在 OnPaint() 中，您可以使用 Graphic 进行绘制。该控件可以设置为 DoubleBuffered = true，以便 Winforms 自动在 OnPaint() 代码周围应用双缓冲。

# javascript - 如何处理 javascript 中的循环引用，类似于 Excel 提供迭代限制的方式？

> ID：12268901
> 
> 赞同：0
> 
> 时间：2012-09-04T17:55:24.950
> 
> 标签：javascript, excel, for-loop, circular-reference

我有一个带有循环引用的 Excel 电子表格。默认情况下，Excel 不会计算单元格。但是，您可以覆盖此默认行为并强制它计算具有循环引用的单元格。您只需要在它停止之前设置迭代次数（或使用其默认的 100 次迭代）。

如果我想用 JavaScript 重现 Excel 对这种情况的处理，我可以简单地将我的函数包装在一个 for 循环中，迭代一个计数器，并在计数器达到指定数字时结束函数调用吗？还是我错过了 Excel 对其迭代限制所做的更复杂的事情？

对于请求的抽象性质，我深表歉意。我目前没有确切的例子，但如有必要，可以制作一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:10:52.510

你可以这样做：

```
var counter = 0;

function foo(){
    //do something
    counter++;
    if(counter < 100)
        bar();
}

function bar(){
    //do something
    foo();
} 
```

这是一个循环调用，将在计数器达到 100 时结束。

# objective-c - Obj-C 中的 NSNumber 常量

> ID：12268904
> 
> 赞同：18
> 
> 时间：2012-09-04T17:55:45.050
> 
> 标签：objective-c, ios, constants, nsnumber

[我想通过本主题](https://stackoverflow.com/a/539191/1639775)中用于 NSStrings 的相同样式制作一些 NSNumber 常量。也就是说，我正在创建单独的 constants.h/.m 文件并将它们导入到需要访问它们的类中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-04T18:08:34.227

这样做的问题是没有编译时常量 NSNumber 这样的东西。只有 NSString 获得了这种区别。NSNumbers 总是动态创建的。您可以使用在程序启动时运行的函数来初始化变量来伪造它。您的选择：

1.  `+load`使用执行初始化的方法创建一个类。

2.  在包含常量的文件中，包含一个带有`__attribute__((constructor))`. 因此，例如：

    ```
    // Constants.m

    NSNumber *someGlobalNumber;

    __attribute__((constructor))
    static void InitGlobalNumber() {
        someGlobalNumber = [[NSNumber numberWithInteger:1] retain];
    } 
    ```

但是，当然，您不能在启动过程早期运行的任何其他功能中可靠地使用这些数字。这通常不是问题，但值得牢记。

另一个选项，我见过几次，是有一个带有数字访问器的类，而不是提供对变量的原始访问。这是一个更重的设计，但它也感觉不那么巫毒，这有它的魅力。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-04T18:04:14.907

不幸的是，您目前无法像生成`NSNumber`常量一样生成`NSString`常量。当你尝试这样做时，你会得到一个编译器错误

```
NSNumber * const kNumberConstant = @2; // This doesn't work. 
```

但是，您可以改用原语。

```
NSInteger const kSomeIntValue = 10; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-04T19:37:52.600

您基本上可以在三个部分中实现接近您想要的效果：

.h 文件：

```
extern NSNumber *MyFirstConstant; 
```

.m 文件

```
NSNumber *MyFirstConstant; 
```

AppDelegate.m

```
+(void)initialize
{
    MyFirstConstant = @5;
    ...
} 
```

AppDelegate 保证在您的任何其他代码之前运行，并且初始化是在 AppDelegate 上调用的第一个方法，因此您基本上可以确保在您的应用程序运行之前为您设置所有常量。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-04T18:06:28.027

### 更新：

多年后，我才意识到可以*为*整数创建一个 NSNumber 常量......但这是一个 hack：

```
#define CONST_INT_NSNUMBER( x ) ((__bridge NSNumber * const)(void * const)(( x << 8 ) | 0x27))

NSNumber * const number = CONST_INT_NSNUMBER(123) ; 
```

这是因为某些整数 NSNumber 被存储为[标记指针](https://mikeash.com/pyblog/friday-qa-2012-07-27-lets-build-tagged-pointers.html)。

* * *

### 原答案：

你不能这样做。

```
NSNumber * const mynumber = @5.5; 
```

给出：

> Initializer 元素不是编译时常量

暗示编译器具有专门用于创建编译时常`NSString`量对象的特殊功能，但没有任何其他类型的对象。

但是，您*可以*这样做：

**.h**：

```
extern NSNumber * kConstantNumber ; 
```

**.m**：

```
NSNumber * kConstantNumber ;

@implementation NSNumber (InitializeConstants)

+(void)load
{
    kConstantNumber = @42;
    // ... and the rest ...
}

@end 
```

# ios - iOS youtube iframe 嵌入 - 不会全屏显示

> ID：12268912
> 
> 赞同：0
> 
> 时间：2012-09-04T17:56:06.210
> 
> 标签：ios, iframe, uiwebview, youtube-api

视频显示在 iPad 上。您可以点击以调出控件。全屏按钮显示在右下方，但点击它没有任何作用。它应该让播放器进入全屏模式。有什么我可以添加到此代码中以使其工作的吗？

```
NSString *htmlStr = [NSString stringWithFormat:@"<body style=\"margin:0;padding:0;\" ><iframe class=\"youtube-player\" type=\"text/html\" width=\"420\" height=\"226\" src=\"http://www.youtube.com/embed/%@\" frameborder=\"0\" allowfullscreen></iframe>",video_ID];

UIWebView *videoView = [[UIWebView alloc] initWithFrame:thumb.frame];
            videoView.backgroundColor = [UIColor darkGrayColor];
            videoView.scrollView.scrollEnabled = NO; 
            [videoView loadHTMLString:htmlStr baseURL:nil];
            [videoCcontainer addSubview:videoView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:30:55.903

尝试使用嵌入，而不是 iframe：http: [//mobiledevelopertips.com/video/display-youtube-videos-without-exiting-your-application.html](http://mobiledevelopertips.com/video/display-youtube-videos-without-exiting-your-application.html)

```
NSString *youTubeVideoHTML = @"<html><head>\
                      <body style=\"margin:0\">\
                      <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
                      width=\"%0.0f\" height=\"%0.0f\"></embed>\
                      </body></html>"; 
```

# apache - php cron 作业不更新 php.ini

> ID：12268913
> 
> 赞同：0
> 
> 时间：2012-09-04T17:56:06.137
> 
> 标签：apache, cron, crontab, php

我最近修改了 php.ini 文件中的“include_path”变量。在你问之前，我重新启动了 apache 服务。该更改适用于我们从 Web 浏览器访问的每个页面。

问题是 cron 工作似乎没有考虑到这种变化。当我在 cron 作业中执行 phpinfo() 时，它使用与 Web 服务器相同的 php.ini 文件，这是我更改的文件，但“include_path”旁边的值是旧文件。

那么有没有办法“重启”crontab？或者也许还有另一个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:57:44.847

一些系统为 web 和 CLI 使用单独的 php.ini 文件。您还需要在其中进行更改：[如何找到命令行使用的 php.ini 文件？](https://stackoverflow.com/questions/2750580/how-to-find-the-php-ini-file-used-by-the-command-line)

找到这个文件的最简单方法是在命令行运行它：**php --ini**这将产生如下输出：

```
user@computer:~$ php --ini
Configuration File (php.ini) Path: /etc/php5/cli
Loaded Configuration File:         /etc/php5/cli/php.ini
Scan for additional .ini files in: /etc/php5/cli/conf.d 
```

您看到的“加载的配置文件：”是您需要添加更改的地方。

**编辑：**另一个选项是在您的 CRON 脚本中使用[set_include_path()](http://php.net/manual/en/function.set-include-path.php)在运行时进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T17:58:15.657

PHP 通常有两个 .ini 文件。一种用于网络服务器内 (SAPI)，另一种用于命令行 (CLI)。如果您只修改了 SAPI 之一，那么从 CLI 运行的任何内容（例如 cron 作业）都不会看到更改。

在命令行中执行 a`php -i`以查看 PHP 在该模式下在哪里寻找它的 ini 文件。

# javascript - 扩展的垂直 div

> ID：12268920
> 
> 赞同：0
> 
> 时间：2012-09-04T17:56:18.087
> 
> 标签：javascript, jquery

我有两个 DIV

一个在右边 另一个在左边

我正在寻找一个给我链接的代码，通过单击此链接，两个 div 将扩展为 100%（意味着其中一个将向下滑动），再次单击它们将返回并排

我试过这个：

```
<style>
    #container {
       width:100%;
       height:500px;
       border: 1px solid red;
    }
    #left {
        width:45%;
        height:500px;
        float: left;
        border: 1px solid blue;
    }
    #right {
        width:45%;
        height:500px;
        float: left;
        border: 1px solid yellow;
    }
</style>

<script type="text/javascript" src="scripts/jquery-1.8.0.min.js"></script>  

<div id="container">
    <div id="left">
        LEFT
    </div>

    <div id="right">
        RIGHT 
    </div>
</div>

<script type="text/javascript">
    $('#container').click(function(){
        if (parseInt($('div#right').css('right'),10) < 0) {
            // Bring right-column back onto display
            $('div#right').animate({
                right:'0%'
            }, 1000);

            $('div#left').animate({
                width:'45%'
            }, 600);
        } else {
            // Animate column off display.
            $('div#right').animate({
                right:'-45%'
            }, 600);

            $('div#left').animate({
                width:'100%'
            }, 1000);
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T19:04:23.563

[http://jsfiddle.net/u9Rgv/25/](http://jsfiddle.net/u9Rgv/25/)

```
#container
{
    width:300px;
}
#left,#right
{
    background-color:#000;
    width:10px;
    height:100px;
    overflow:hidden;
}

#left{
    float:left;
}
#right{
    float:right;
} 
```

​</p>

```
$("a").click(function(){
    var $left = $("#left");
    if($left.css("width")=="10px")
        $left.animate({width: "100%"})
    else 
        $left.animate({width: "10px"});

    var $right = $("#right");
    if($right.css("width")=="10px")
        $right.animate({width: "100%"})
    else 
        $right.animate({width: "10px"});

});​ 
```

# jquery - 简单的 jQuery textarea 扩展以适应内容

> ID：12268921
> 
> 赞同：0
> 
> 时间：2012-09-04T17:56:19.137
> 
> 标签：jquery, textarea, height

在我尝试构建一个简单的跨浏览器扩展文本区域时，我发现所有插件接缝都过于混乱。

我开发了这个：

```
$(document).ready(function() {
    $('textarea').keyup(function() {
        var txtheight = this.scrollHeight;
        $(this).height(txtheight)
    });
    $('textarea').keyup();
});​ 
```

它正在产生意想不到的结果。

在 FIREFOX 上它正在工作，但如果我从 textarea 中删除行，它的大小不会减小。

在 CHROME 上，按下任何键都会导致添加另一个行高。

这非常令人困惑，因为如果我将代码更改为：

```
$(document).ready(function() {
    $('textarea').keyup(function() {
        var txtheight = this.scrollHeight;
       alert(txtheight); 
    });
    $('textarea').keyup();
});​ 
```

警报每次都会在两个浏览器上正确获取数字。这到底是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:04:05.603

这是一种似乎有效的方法：

```
​$('#test').on('keydown', function(e){
    var that = $(this);
    if (that.scrollTop()) {
        $(this).height(function(i,h){
            return h + 20;
        });
    }
});​​​​​​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/THM3D/)。

以稍微复杂的方式修改了上述内容，但我认为具有适当的准确性：

```
function heightComparison(el) {
    if (!el) {
        return false;
    }
    else {
        var $el = $(el),
            clone = $('#' + el.id + '-clone'),
            cH = clone.height();

        $el.height(cH);

    }
}

$('#test').on('keyup paste', function(e) {
    var that = this,
        $that = $(that),
        clone = $('#' + that.id + '-clone').length ? $('#' + that.id + '-clone') : $('<div />', {
            'id': that.id + '-clone'
        }).css({
            'position': 'absolute',
            'left': '-1000px',
            'border-width': '1px',
            'border-color': '#000',
            'border-style': 'solid',
            'overflow': 'hidden',
            'width': $that.width(),
            'min-height': $that.height(),
            'padding': $that.css('padding'),
            'font-size': $that.css('font-size'),
            'font-family': $that.css('font-family')
        }).appendTo('body');

    clone.text($that.val());

    heightComparison(that);
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/THM3D/3/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T18:38:42.813

这行不通：

```
$(document).ready(function() {
    $('textarea').keyup(function() {
       var txtheight = $(this).scrollTop();
       $(this).css('height',($(this).height() + txtheight) + 'px')
    });
    $('textarea').keyup();
}); 
```

简单有效的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T09:54:14.570

I know its too late to answer the thread but you'll get a solution cooked enough :)

I just binded two events on `textarea` and thats all.

```
$('textarea').keypress(function (e) {
  // check if user pressed 'Enter'
  if(e.which == 13) 
  {
   // get control object to modify further
   var control = e.target;

    // get existing 'Height' of pressed control
   var controlHeight = $(control).height();

   //add some height to existing height of control, I chose 17 as my line-height was 17 for the control 
   $(control).height(controlHeight+17);
  }
});

$('textarea').blur(function (e) {

    // Here we get exact number of lines in our TextArea
    var textLines = $(this).val().trim().split(/\r*\n/).length; 

    // Now apply the number Of Lines * line-height to your control. That's all.
    $(this).val($(this).val().trim()).height(textLines*17);
}); 
```

It will grow your textbox while adding content in it, and also removes extra whitespaces ata the end. Check it out an **[example and fiddle](https://17path.wordpress.com/2013/01/08/resize-textarea-on-enter-pressed/)**

# iphone - 横幅徽章 iPhone

> ID：12268923
> 
> 赞同：0
> 
> 时间：2012-09-04T17:56:47.367
> 
> 标签：iphone, xcode4

有没有办法让我的应用程序的横幅/徽章只更新到 1？例如，如果我的应用程序有三个通知/更新，而不是在主页上显示带有数字 3 的启动图标，我可以只显示数字 1 吗？

我想从本质上讲，我问我可以为我正在为 iPhone 开发的应用程序设置徽章的最大值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:07:41.730

您自己设置应用程序徽章，因此您可以确定您显示的数字的算法。因此，如果您只想在有任何消息的情况下将标记设置为 1，否则没有标记，只需使用以下内容：

```
- (void)applicationWillResignActive:(UIApplication *)application {
    [[UIApplication sharedApplication] setApplicationIconBadgeNumber:(numberOfMessages > 0) ? 1 : 0];
} 
```

# javascript - 将日期时间 javascript 绑定到表列

> ID：12268924
> 
> 赞同：0
> 
> 时间：2012-09-04T17:56:47.040
> 
> 标签：javascript, jquery, html

我有 31 行和 4 个表列的 html 表我正在尝试编写 javascript(Jquery) 以将第一列与当月的日期绑定。

这是我的代码

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" src="Scripts/jquery-1.8.0.js"></script>
        <script type="text/javascript">
            $(document).ready(function ($) {
                var table = document.getElementById("myTable")
                var myDate = new Date();
                myDate.setDate(myDate.getDate() - 1)
                for (var i = 0; i < 16; i++) {
                    var row = document.createElement("tr");
                    var cell = document.createElement("td");
                    cell.innerText = myDate.getDate() + "/" + (myDate.getMonth() + 1) + "/" + myDate.getYear();
                    myDate.setDate(myDate.getDate() + 1)
                    row.appendChild(cell);
                    table.tBodies[0].appendChild(row);
                }
            });
    </script>
</head>

<body>
<table id="myTable"></table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T09:08:22.443

如果我们正在处理较短的月份（例如，在 4 月，表格将*不会*显示 2013 年 4 月 31 日），这是一个也可以打破循环的解决方案：

```
$(function() {
    var table = document.getElementById("myTable")
    var myDate = new Date();
    var month = myDate.getMonth() + 1;
    var firstOfMonth = new Date();
    firstOfMonth.setDate(1);
    for (var i = 0; i < 31; i++) {
        myDate.setDate(firstOfMonth.getDate() + i);
        if (myDate.getMonth() + 1 != month) break;
        var row = document.createElement("tr");
        var cell = document.createElement("td");
        cell.innerText = formatDate(myDate, dateFormat);
        row.appendChild(cell);
        table.tBodies[0].appendChild(row);
    }
}); 
```

[**链接到 jsfiddle**](http://jsfiddle.net/martyk/MP4LR/9/)

注意：OP 提到 javascript 作为第一个选项（仅在 backets 中使用 jQuery），这就是为什么我将代码留在纯 js 中（DOM 就绪包装器除外）。如果您想要一个完全独立于 jQuery 的解决方案，请[按照此 SO post 中的说明绑定 DOM 内容加载事件](https://stackoverflow.com/questions/8181061/dom-loaded-event-cross-borwser-native-javascript-code)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T14:06:59.557

您正在尝试追加到，`tbody`但您没有定义一个。将 HTML 更改为

```
<table id="myTable"><tbody></tbody></table> 
```

如果您已经有行和单元格，您只想添加新单元格

```
for (var i = 0; i < 16; i++) {
                    var cell = document.createElement("td");
                    cell.innerText = myDate.getDate() + "/" + (myDate.getMonth() + 1) + "/" + myDate.getFullYear();
                    myDate.setDate(myDate.getDate() + 1)
                    $(table).find('tr').eq(i).prepend(cell);
                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T21:07:21.830

我想你的问题与[这个问题有关](https://stackoverflow.com/questions/12222137/adding-jquery-ui-datepicker-dynamically-style-break)。
换句话说，您正在寻找一个 Javascript 函数，该函数应该为当前月份的每一天向空表中添加一行；每行应该有四列，分别命名为“日期”、“开始时间”、“结束时间”和“小时类型”，第一列（“日期”）应该包含一个文本输入，其日期格式为“dd/mm/ yyyy”。
如果是这样，这是我的解决方案：

```
<!DOCTYPE html>
<html>
    <head>
        <script language="javascript" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>
        // See https://stackoverflow.com/questions/4881938/javascript-calculate-number-of-days-in-month-for-a-given-year
        Date.prototype.daysInMonth = function(year, month) { 
            var monthStart  = new Date(year, month, 1);
            var monthEnd    = new Date(year, month + 1, 1);
            var monthLength = Math.round((monthEnd - monthStart) / (1000 * 60 * 60 * 24));
            var mm  = ((month + 1) < 10) ? ('0' + (month + 1)) : (month + 1);
            var ret = new Array();
            for (var i = 1; i <= monthLength; i++) {
                var dd = (i < 10) ? ('0' + i) : i;
                ret.push(dd + '/' + mm + '/' + year);
            }
            return ret;
        };

        function addRows(table, dates) {
            var idx = 1;
            for (var i in dates) {
                table.append('<tr>'+
                             '<td><input name="date'+idx+'" id="date'+idx+'" class="date" value="'+dates[i]+'"></td>'+
                             '<td><input name="startTime'+idx+'" id="startTime'+idx+'"></td>'+
                             '<td><input name="endTime'+idx+'" id="EndTime'+idx+'"></td>'+
                             '<td>'+
                             '<select name="hourType'+idx+'" id="hourType'+idx+'">'+
                             '<option value="">Please select</option>'+
                             '<option value="1">Regular</option>'+
                             '<option value="2">Overtime</option>'+
                             '</select>'+
                             '</td>'+
                             '</tr>');
                idx++;
            }
        }

        $(function() {
            var myDate = new Date();
            var year   = myDate.getFullYear();
            var month  = myDate.getMonth(); 
            var dates  = myDate.daysInMonth(year, month);
            var table  = $("#myTable").find("tbody");
            addRows(table, dates);
        });
        </script>       
    </head>
    <body>
        <form>
          <table id="myTable">
            <thead>
              <tr>
                <th>Date</th>
                <th>Start Time</th>
                <th>End Time</th>
                <th>Hour Type</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        </form>
    </body>
</html> 
```

显然，该表的行数也可能少于 31 行，具体取决于当月的天数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T14:06:19.480

试试这个：- [http://jsfiddle.net/adiioo7/9fQxq/](http://jsfiddle.net/adiioo7/9fQxq/)

采用

```
table.appendChild(row); 
```

代替

```
table.tBodies[0].appendChild(row); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T09:25:36.163

[这是一个工作 jsFiddle](http://jsfiddle.net/samsamX/upeRf/1/)。

我会使用的方式：

```
var d = new Date();              // get current date
var currentMonth = d.getMonth(); // save current month
d.setDate(1);                    // set date to first day of current month

// (...) create your table header

// create 31 rows
for(var i=1; i<=31; i++) {
    var line = $(document.createElement('tr'));
    if(d.getMonth() == currentMonth) {
        // add the date to the first column
        line.append('<td>'+dateToDMY(d)+'</td>')
            .append('<td></td>')
            .append('<td></td>')
            .append('<td></td>');
    } else {
        // in case you always want to have 31 rows, whatever the month
        line.append('<td colspan="4" class="empty">&nbsp</td>');
    }

    $('#myTable').append(line);  // append the line to the table
    d.setDate(d.getDate() + 1);  // increase the date
}

/* 
 * Format Date : dd/mm/yyyy
 * Based on Adrian Maire work
 * http://stackoverflow.com/a/10685571/1238019
*/
function dateToDMY(date) {
    var d = date.getDate();
    var m = date.getMonth() + 1;
    var y = date.getFullYear();
    return '' + (d <= 9 ? '0' + d : d) + '/' + (m<=9 ? '0' + m : m) + '/' + y;
} 
```

请注意，使用[setDate 函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setDate)将使用超出范围的日期自动更新日期月份（然后您不必关心闰年）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T16:47:12.187

如果我正确理解了您的问题，而不是将第一列与当月的日期绑定？[小提琴](http://jsfiddle.net/d2SeZ/2/)

```
$(document).ready(function () {
    // Get today date
    var d = new Date();
    //Get Days of Month
    var n = new Date(d.getYear(), d.getMonth()+1, 0).getDate();

    //Run loop for number of days
    for (var i = 1; i <= n; i++) {
        //Create row data
        var row = '<tr><td>'+ i + "/" + (d.getMonth() + 1) + "/" + d.getFullYear()+'</td><td><td/><td><td/><td><td/></tr>';

        // Append row data to table
        $('#myTable').append(row);
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-07T17:58:14.097

您的问题不是很清楚.. 但是从您的代码中，我了解到您正在创建表 16 行，其中第 1 列的日期为`(CURRENT_DATE - 1)`to `(CURRENT_DATE+14)`。

我使用模板来呈现表格行。根据需要更新模板以呈现其他列。

**演示：http:** [//jsfiddle.net/nLQ7q/3/](http://jsfiddle.net/nLQ7q/3/)

```
$(document).ready(function ($) {
     var table = $("#myTable")
     var myDate = new Date();
     myDate.setDate(myDate.getDate() - 1);

     var rowTmpl = '<tr><td>{DATE}</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>';
     var rows = [];

     for (var i = 0; i < 16; i++) {
         var row = rowTmpl.replace('{DATE}', myDate.getDate() + "/" + (myDate.getMonth() + 1) + "/" + myDate.getYear());
         myDate.setDate(myDate.getDate() + 1)
         rows.push(row);         
     }

      table.html(rows.join(''));
 }); 
```

* * *

这里有一个带有日期选择器的花哨版本[http://jsfiddle.net/nLQ7q/4/](http://jsfiddle.net/nLQ7q/4/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-08T06:19:14.183

### 你可以试试这个：[FIDDLE](http://jsfiddle.net/nRfS2/)

`<table id="myTable"></table>`

请注意，您`tbody`的标记中没有，所以我把它放了并使用了下面的 jquery

### `-JQUERY-`：

```
 jQuery(document).ready(function ($) {
     var table = $("#myTable");
     var myDate = new Date();
     myDate.setDate(myDate.getDate() - 1)
     for (var i = 0; i < 16; i++) {
        var row = $("<tr>");
        var cell = $("<td>");
        myDate.setDate(myDate.getDate() + 1)
        cell.text(myDate.getDate() + "/" + (myDate.getMonth() + 1) + "/" + myDate.getFullYear());
        row.append(cell);
        table.find('tbody').append(row);
    }
    $('#myTable').find('tr').each(function (i, v) {
       $(this).append('<td/><td/><td/>');
       $('td:not(:first)', this).text(i + 1);
    });
 }); 
```

在每个`row in the tr`填充`first td`日期和`created other tds`一些默认文本。

### 我想出了这个：[小提琴](http://jsfiddle.net/nRfS2/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-08T18:27:29.187

```
 $(function ($) {
     var table = $("#myTable")
     var myDate = new Date();

     myDate.setDate(myDate.getDate() - 1);

     for (var i = 0; i < 16; i++)
     {
         var row = $('<tr/>');         
         var cell = $('<td/>');

         cell.text
          (myDate.getDate() +
           "/" +
           (myDate.getMonth() + 1) +
           "/" +
           (1900 + myDate.getYear()));

         myDate.setDate(myDate.getDate() + 1);

         row.append(cell);
         table.append(row);
     }
 }); 
```

# macos - 在 Mac-OS X 10.8 中限制对进程的内存分配

> ID：12268925
> 
> 赞同：11
> 
> 时间：2012-09-04T17:56:49.223
> 
> 标签：macos, memory, memory-management

我想控制最大内存，一个进程可以在 Mac-OS X 10.8 中使用。我觉得设置 ulimit -v 应该可以实现目标，但似乎并非如此。我尝试了以下简单的命令：

```
 ulimit -m 512

    java -Xms1024m -Xmx2048m SomeJavaProgram 
```

我假设第二个命令应该失败，因为 Java 进程将首先为自己保留 1024MB 内存，但它会平静地通过。在我的示例程序中，我尝试使用以下代码片段分配超过 1024MB 的空间：

```
System.out.println("Allocating 1 GB of Memory");
List<byte[]> list = new LinkedList<byte[]>();
list.add(new byte[1073741824]); //1024 MB
System.out.println("Done...."); 
```

这两个程序都可以毫无问题地执行。我们如何控制 Mac-OS X 中程序的最大内存分配？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-22T18:06:36.643

我不确定你是否还需要回答这个问题，但如果其他人碰巧有同样的问题，这里就是答案。

`ulimit -m`严格限制常驻内存，而不是进程可以从操作系统请求的内存量。

`ulimit -v`将限制进程可以从操作系统请求的虚拟内存量。

例如...

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char* argv[]) {

    int size = 1 << 20;

    void* memory = NULL;

    memory = malloc(size);

    printf("allocated %i bytes...\n", size);

    return 0; 

} 
```

```
ulimit -m 512
./memory
allocated 1048576 bytes... 
```

```
ulimit -v 512
./memory
Segmentation fault 
```

如果您执行`ulimit -a`它应该提供子进程的所有当前限制的摘要。

正如@bikram990 在下面的评论中提到的，[java](https://www.ibm.com/developerworks/community/blogs/troubleshootingjava/entry/ulimit_and_xmx?lang=en)进程可能不会遵守软限制。要强制执行 java 内存限制，您可以将参数传递给进程（-Xmx、-Xss 等...）。

**警告！**

也可以通过`ulimit -H` [命令](http://ss64.com/osx/ulimit.html)设置硬限制，子进程不能修改。但是，如果没有提升权限（root），一旦降低，这些限制也不能再次提高。

# python - 使用多个字典创建 JSON，Python

> ID：12268930
> 
> 赞同：4
> 
> 时间：2012-09-04T17:57:09.120
> 
> 标签：python, json, dictionary

我有这个代码：

```
>>> import simplejson as json
>>> keys = dict([(x, x**3) for x in xrange(1, 3)])
>>> nums = json.dumps(keys, indent=4)
>>> print nums
{
    "1": 1,
    "2": 8
} 
```

但是我想创建一个循环来使我的输出看起来像这样：

```
[
    {
        "1": 1,
        "2": 8
    },
    {
        "1": 1,
        "2": 8
    },
    {
        "1": 1,
        "2": 8
    }
] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T18:01:22.790

您需要创建一个列表，在转换为 JSON*之前将所有映射附加到该列表：*

```
output = []
for something in somethingelse:
    output.append(dict([(x, x**3) for x in xrange(1, 3)])
json.dumps(output) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-04T18:01:14.927

您想要的输出不是有效的 JSON。我认为您可能打算将多个字典附加到列表中，如下所示：

```
>>> import json
>>> multikeys = []
>>> for i in range(3):
...    multikeys.append(dict([(x, x**3) for x in xrange(1, 3)]))
... 
>>> print json.dumps(multikeys, indent=4)
[
    {
        "1": 1, 
        "2": 8
    }, 
    {
        "1": 1, 
        "2": 8
    }, 
    {
        "1": 1, 
        "2": 8
    }
] 
```

# python - 用户定义的 Python 3.2.2 问题

> ID：12268931
> 
> 赞同：0
> 
> 时间：2012-09-04T17:57:08.990
> 
> 标签：python, python-3.x, user-defined-functions

当我运行以下代码时，无论我将 absoluteValue 设置为什么，结果都不是。为什么？

```
def absoluteValue(n):
     if (n) < 0:
         return -(n)
     elif (n) > 0:
         return (n) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:01:51.870

在使用 Python 3.2.2 时，这在我的系统上完美运行：

```
>>> def absoluteValue(n):
     if (n) < 0:
         return -(n)
     elif (n) > 0:
         return (n)

>>> absoluteValue(-34)
34
>>> absoluteValue(34)
34
>>> 
```

检查您是否正确安装了python。

# javascript - 访问函数对象的上下文属性 | 如何？

> ID：12268934
> 
> 赞同：1
> 
> 时间：2012-09-04T17:57:23.513
> 
> 标签：javascript

每个函数对象都应该有两个“隐藏”属性（根据 JavaScript The Good Parts, The Functions Chapter ）

```
context 
```

和

```
code 
```

有没有办法访问这些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:13:50.767

好吧，您可以很容易地访问函数代码 - 通过使用[toString()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/toString)（或 Mozilla 的非标准[toSource()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/toSource)）：

```
var x = function() { alert('Here is my happy function'); };
console.log(x.toString()); 
```

至于上下文，我想 DC 的意思不仅仅是 simple `this`，而且实际上写了关于 Execution Context 的文章。

**更新：在**[ES5 规范](http://es5.github.com/#x13.2)中找到了一个有趣的片段，其中这两个属性实际上是在一些细节中描述的——而不是作为抽象概念：

> **13.2 创建函数对象**
> 
> 给定由 FormalParameterList 指定的可选参数列表、由*FunctionBody指定的主体、由**Scope*指定的词法环境 和布尔标志 Strict，函数对象的构造如下：
> 
> ...
> 
> 将 F 的 [[Scope]] 内部属性设置为 Scope 的值。
> 
> ...
> 
> 将 F 的 [[Code]] 内部属性设置为 FunctionBody。

同时：

> 词法环境和环境记录值纯粹是规范机制，不需要对应于 ECMAScript 实现的任何特定工件。ECMAScript 程序不可能直接访问或操作这些值。

所以我想这结束了关于访问`Scope`函数属性的问题。

至于`Code`属性，它的只读访问`toString()`，正如马特正确注意到的那样，是依赖于实现的——但更多的是实现。)

# sublimetext2 - sublimetext2 中的项目特定主题

> ID：12268940
> 
> 赞同：9
> 
> 时间：2012-09-04T17:58:08.450
> 
> 标签：sublimetext2, sublimetext

我错过了什么还是 SublimeText2 缺少这个功能/包？

我想要实现的是，当我同时打开 2-3 个项目时，使窗口在视觉上彼此不同，现在，当我在其中一个窗口中更改配色方案时，它在其他打开的 SublimeText2 窗口中也会发生变化。当您必须查看侧边栏/标题栏才能看到项目名称时，这很难工作。当您必须将数十行从一个项目复制粘贴到另一个项目或类似的东西时，它会变得非常烦人。

任何可以帮助我解决此问题的软件包/配置？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-04T18:14:33.550

编辑项目设置，执行以下操作：

```
{
  "settings": {
    "color_scheme": "Packages/Color Scheme - Default/Amy.tmTheme"
  }
} 
```

使用 Preferences->Browse Packages 查找配色方案目录/文件名。

# vba - 使用 .Vbs 文件打开默认电子邮件客户端

> ID：12268942
> 
> 赞同：0
> 
> 时间：2012-09-04T17:58:12.710
> 
> 标签：vba, vbscript

> **可能重复：**
> [通过 VBA](https://stackoverflow.com/questions/1265270/send-e-mail-through-vba)
> [发送电子邮件 在 Exchange 环境中从 Excel 发送电子邮件](https://stackoverflow.com/questions/6122747/send-email-from-excel-in-exchange-environment)

到目前为止我有这个

```
Dim objOutl
Set objOutl = CreateObject("Outlook.Application")
Set objMailItem = objOutl.CreateItem(olMailItem)
objMailItem.Display
strEmailAddr  = "me.me@you.com"
objMailItem.Recipients.Add strEmailAddr
objMailItem.Body = "Hi"
objMailItem.Attachments.Add "access.xml"
Set objMailItem = nothing
Set objOutl = nothing 
```

有用！但仅限于具有 Outlook 的计算机上。我怎样才能让它与装有 Windows Live 的计算机一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:59:02.883

Windows Live Mail (WLM) 不支持通过 VBA 实现自动化，因此它不像 Outlook 那样简单。

对于其他选项，请尝试`[vba] e-mail`在搜索字段中输入。你会得到很多点击；这是一个相关示例：[Hit](https://stackoverflow.com/questions/9330897/how-to-send-a-mail-automatically/933217) , [hit](https://stackoverflow.com/questions/1265270/send-e-mail-through-vba) , [hit](https://stackoverflow.com/questions/6122747/send-email-from-excel-in-exchange-environment)。其中一些为您提供了使用 CDO 发送邮件的工作代码。如果我是你，我会这样做。

如果您*必须*使用 WLM，请查看支持 WLM[的 Excel 邮件插件。](http://www.rondebruin.nl/mail/add-in.htm)

否则，您将无法使用 VBA 的`SendMail`方法，该方法非常有限：

*   只能发送 Excel 对象，例如工作表、工作簿、图表、范围等。
*   无法在电子邮件正文中写入文本
*   不能使用 CC 或 BCC 字段
*   无法附加文件（调用该方法的 Excel 对象除外）

示例代码：

```
Dim wb As Workbook
Set wb = ActiveWorkbook
wb.SendMail "me.me@you.com", _
            "Insert subject here" 
```

更多示例请看这里：[http ://www.rondebruin.nl/sendmail.htm](http://www.rondebruin.nl/sendmail.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T19:02:04.220

以下假设适用于访问（vba）（代码不是我的）：

```
Public Function send_email()

Set cdomsg = CreateObject("CDO.message")
With cdomsg.Configuration.Fields
.Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2 'NTLM method
.Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "smtp.gmail.com"
.Item("http://schemas.microsoft.com/cdo/configuration/smptserverport") = 587
.Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
.Item("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = True
.Item("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 60
.Item("http://schemas.microsoft.com/cdo/configuration/sendusername") =   "mygmail@gmail.com"
.Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "mypassword"
.Update
End With
' build email parts With cdomsg
.To = "somebody@somedomain.com"
.From = "mygmail@gmail.com"
.Subject = "the email subject"
.TextBody = "the full message body goes here. you may want to create a variable to hold  the text"
.Send
End With
Set cdomsg = Nothing
End Function 
```

请注意，如果您想使用其他电子邮件服务，您应该稍微更改一下代码。

这里有一些其他选项 - [msdn 参考](http://msdn.microsoft.com/en-us/library/ms872547%28EXCHG.65%29.aspx)

希望能帮助到你。

# r - 将多个数据帧存储到一个数据结构中 - R

> ID：12268944
> 
> 赞同：17
> 
> 时间：2012-09-04T17:58:17.723
> 
> 标签：r, dataframe

是否可以将多个数据帧存储到一个数据结构中，然后由每个数据帧进行处理？即示例

```
df1 <- data.frame(c(1,2,3), c(4,5,6))
df2 <- data.frame(c(11,22,33), c(44,55,66)) 
```

..然后我希望将它们添加到数据结构中，这样我就可以遍历该数据结构，一次检索每个数据帧并进行处理，例如

```
 for ( iterate through the data structure) # this gives df1, then df2
 {
    write data frame to a file
} 
```

我在 R 中找不到任何这样的数据结构。任何人都可以指出任何说明相同功能的代码吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T18:01:23.677

只需将其`data.frames`放入列表中。一个优点是 a`list`非常适用于`apply`样式循环。例如，如果要保存 data.frame，可以使用`mapply`：

```
l = list(df1, df2)
mapply(write.table, x = l, file = c("df1.txt", "df2.txt")) 
```

如果你喜欢`apply`风格循环（你会的，相信我:)）请看一下史诗`plyr`包。它可能不是最快的包（寻找`data.table`快），但它滴水的语法糖。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T18:13:15.950

列表可以用来保存几乎任何东西，包括`data.frame`s：

```
## Versatility of lists
l <- list(file(), new.env(), data.frame(a=1:4)) 
```

要写出存储在列表中的多个数据对象，`lapply()`您的朋友是：

```
ll <- list(df1=df1, df2=df2)
## Write out as *.csv files
lapply(names(ll), function(X) write.csv(ll[[X]], file=paste0(X, ".csv")))
## Save in *.Rdata files
lapply(names(ll), function(X) {
    assign(X, ll[[X]]) 
    save(list=X, file=paste0(X, ".Rdata"))
}) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-08-28T09:50:33.250

您正在寻找的是一个`list`. 您可以使用类似的函数`lapply`以相同的方式单独处理每个数据帧。但是，在某些情况下，您可能需要将数据框列表传递给处理彼此相关的数据框的函数。在这种情况下`lapply`对你没有帮助。

这就是为什么重要的是要注意如何访问和迭代列表中的数据框。它是这样完成的：

```
mylist[[data frame]][row,column] 
```

请注意数据框索引周围的双括号。因此，对于您的示例，它将是

```
df1 <- data.frame(c(1,2,3), c(4,5,6))
df2 <- data.frame(c(11,22,33), c(44,55,66))
mylist<-list(df1,df2) 
```

`mylist[[1]][1,2]`将返回 4，而`mylist[1][1,2]`将返回 NULL。我花了一段时间才找到这个，所以我认为在这里发帖可能会有所帮助。

# android - 由于活动的实例，内存增加

> ID：12268951
> 
> 赞同：0
> 
> 时间：2012-09-04T17:59:10.110
> 
> 标签：android, memory

我有一个创建服务的应用程序。当您退出并重新进入正在运行的服务时，内存会增加。我用 MAT 分析了文件“hprof”：

*“由“dalvik.system.PathClassLoader @ 0x406bea70”加载的“com.yulis.PantallaPrincipal”实例占用 557.432 (17,08%) 个字节。内存在“com.yulis.Multimedia”加载的一个实例中累积“ dalvik.system.PathClassLoader @ 0x406bea70""*

如果我出去多次进入应用程序，增加实例的数量。一个类接收一个类活动的“上下文”和该类的数据捕获服务类。这可能是问题吗？

我该如何防止这种情况？

# doctrine-orm - 学说：是否可以通过相关领域进行索引？

> ID：12268955
> 
> 赞同：15
> 
> 时间：2012-09-04T17:59:25.893
> 
> 标签：doctrine-orm, dql, many-to-one

我有一个 Doctrine 模型 ( `Assignment`)，它与另一个模型 ( ) 具有多对一的关系`Region`。作业归用户所有（每个用户一次每个区域只有一个作业），我试图让`indexBy`用户的作业数组由作业区域的 ID 键入。但是，我只得到标准的 0..n 数字键。

当我尝试运行 DQL 查询`SELECT am, reg, user FROM Assignment am INDEX BY [...] JOIN am.region reg JOIN am.user user WHERE user.id = ?1`时，INDEX BY 的这些值都不起作用：

*   `region`（错误：无效的 PathExpression。必须是 StateFieldPathExpression。）
*   `region_id`（错误：类 ...\Assignment 没有名为 region_id 的字段或关联）
*   `region.id`（错误：预期的字符串结尾，得到 '.'）

这可能吗？如果没有，那么`User`在没有 的区域上访问 的分配的便捷方法是`indexBy`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-23T12:09:16.713

我今天正在处理同样的问题。幸运的是我找到了解决方案:)

首先，您必须在 ORM 映射中声明附加列：

```
Abdulklarapl\My\EntityA:
type: entity
table: entityA
manyToOne:
    entityB:
        targetEntity: EntityB
        joinColumn:
            name: label_id
            referencedColumnName: id
id:
    id:
        type: integer
        id: true
        generator:
            strategy: AUTO
fields:
    value:
        type: text
    entityB_id:
        type: integer
lifecycleCallbacks: {  } 
```

请注意，我已声明`entityB_id`为**字段**+ 我已通过添加子句配置**了 manyToOne关系**`joinColumn`

所以现在你可以使用 entityB_id 作为标量值

```
$doctrine->getEntityManager()->createQueryBuilder()
        ->select('c')
        ->from('AbdulklaraplMyBundle:EntityA', 'c', 'c.entityB_id')
        ->getQuery()->getResult(); 
```

它将返回关联数组

```
[
    c.entityB_id: {
        id: "",
        value: ""
        entityB_id: ""
    }
] 
```

您也可以将`AbstractQuery::HYDRATE_ARRAY`其用作参数`getResult()`- 它将返回带有数组而不是对象的关联数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-08T08:27:30.403

如果您需要通过外键进行索引，例如“region_id”，则可以在您的映射中：

```
/**
 * @ORM\OneToMany(targetEntity="Region", mappedBy="user", indexBy="region_id")
 */
protected $regions; 
```

该功能是[在此处添加的](https://github.com/doctrine/doctrine2/pull/639)。

不幸的是，似乎没有记录您必须使用外键本身的列名。

[使用索引关联](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/working-with-indexed-associations.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-06T04:49:55.357

导入查询类（可选）：

```
use \Doctrine\ORM\Query; 
```

创建查询：

```
$query = $this->data->em->createQuery('
    SELECT a 
    FROM Assignment a 
    INDEX BY a.reg //to set array custom key
    WHERE a.user = :user');
$query->setParameter('user', 3); //user with id 3

//set the hidration mode in order to work with read-only arrays
$assignments = $query->getResult(Query::HYDRATE_ARRAY); 
```

# javascript - Rally App SDK 1.32：最近重组后选择器无法使用通用查询访问 PortfolioItems

> ID：12268956
> 
> 赞同：1
> 
> 时间：2012-09-04T17:59:29.263
> 
> 标签：javascript, rally

似乎 App SDK 1.32 中的选择器，虽然查询应该足够通用以提取正确的项目，但无法找到任何项目。这是代码，即使最近发生了变化，我认为也可以很好地提取数据。

```
piChooser = new rally.sdk.ui.Chooser({
    type: 'PortfolioItem',
    title: 'Choose a Portfolio Item',
    fetch: 'FormattedID,Name',
    query: 'PortfolioItemType.Name = "MRU"',
    width: 500,
    height: 500
}, rallyDataSource); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:39:12.303

不幸的是，这看起来像是一个缺陷，有趣的是，它似乎与 9/1 代码版本无关，因为我能够在运行早期代码库 (2012.05.19) 的本地 Rally 实例上重现它。看起来这是 PortfolioItem 工件的 rally.sdk.ui.Chooser 的一般问题 - 即使您不指定查询，Chooser 也无法显示它们。

我已经就此向 Rally Development 提交了一个缺陷。如果您想了解有关缺陷的最新信息，您可能希望将案例提交至 rallysupport@rallydev.com。

# php - Symfony2 Doctrine 处理波兰字符

> ID：12268958
> 
> 赞同：0
> 
> 时间：2012-09-04T17:59:34.137
> 
> 标签：php, symfony, doctrine-orm

我尽我所能在我的 symfony2 项目中获得波兰字符，但我失败了。我将我的对象从 Request 持久化到数据库，如下所示：

```
$mail = new Mail();
$form = $this->createFormBuilder($mail)
        ->add('to_id', 'integer', array('label' => 'Adresat (ID):'))
        ->add('subject', 'text', array('label' => 'Temat:', 'max_length' => 255, 'attr' => array('class' => 'mail')))
        ->add('data', 'textarea', array('label' => 'Treść:', 'attr' => array('class' => 'mail')))
        ->getForm();
if ($request->getMethod() == 'POST') {
  $form->bindRequest($request);
  $em->persist($mail);
  $em->flush();
} 
```

不幸的是，在数据库中，波兰语字符由问号表示。当我把它拿回来查看时也是如此。每个设置看起来都不错，config.yml：

```
doctrine:
    dbal:
        charset:  UTF8 
```

和

```
framework:
    charset:         UTF-8 
```

数据库中的模式得到字符集 utf8 和排序规则 utf8_polish_ci

有人也遇到这个问题吗？

我在项目选项中使用编码设置为 UTF-8 的 NetBeans 7.2

@EDIT：我删除了整个架构，重新创建了它，它工作正常。所以我没有找到解决方案，但我想在 MySQL Workbench 中创建模式对编码有不好的影响（使用 CREATE SCHEMA 手动完成）。

# ajax - 将字符串返回到grails中的ajax调用

> ID：12268961
> 
> 赞同：0
> 
> 时间：2012-09-04T17:59:57.487
> 
> 标签：ajax, grails, gsp

我的 Groovy Controller 类中有一个函数 sampleFunction() ，我使用 gsp 中的 Ajax 调用作为

```
var result = ${remoteFunction(controller: 'mycontroller', action: 'sampleFunction',
                                  update: 'none',
                                   params:'\'id=\'+id+\'&content=\'+content+\'&modSubj=\'+modSubj')} 
```

如何从 sampleFunction() 返回一个字符串，以便变量 result 具有返回值。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T18:34:49.627

Grails 控制器操作可以`render`直接调用以在响应中返回一些文本，而不是使用 GSP。

```
def sampleFunction() {
    render 'somestring'
} 
```

# java - 来自Web服务的相同字符串的Java md5哈希对于每个事务都是不同的

> ID：12268962
> 
> 赞同：0
> 
> 时间：2012-09-04T17:59:57.393
> 
> 标签：java, web-services, md5

我正在尝试比较来自 Web 服务的 java 中的密码。

我使用以下命令从命令行调用服务：

curl -d '[{"usr":"joe","password":"joe"}]' [http://mydomain.com:8080/myservice/login](http://mydomain.com:8080/myservice/login)

我解析 JSON 并将密码传递给哈希方法。

我的哈希方法如下：

```
 private String createHash(String password){

    byte[] bytesOfMessage = null;
    try {
        bytesOfMessage = password.getBytes("UTF-8");
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    MessageDigest md = null;
    try {
        md = MessageDigest.getInstance("MD5");

    } catch (NoSuchAlgorithmException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    String thedigest = md.digest(bytesOfMessage).toString();
    System.out.println("passed in: "+thedigest);

    return thedigest;
} 
```

问题是每次我使用完全相同的密码调用此方法时，打印的哈希值都不同。如何让密码具有相同的哈希值，以便我可以比较密码并验证用户身份？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T18:03:12.590

该`digest()`方法返回 a `byte[]`，`toString()`方法 on`byte[]`打印出字节数组的*对象标识*，而不是*content*。通常，为了打印出 byte[] 的结果，您需要将字节转换为可打印的字符串（通常使用十六进制编码或 base64 编码）。十六进制编码经常用于 md5 校验和，[例如这里](https://stackoverflow.com/questions/9655181/convert-from-byte-array-to-hex-string-in-java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T18:45:14.093

你可以试试base64。我已经给出了例子

```
public String encrypt(String plaintext) throws Exception {

        MessageDigest messageDigest = null;
        String hash=null;

        try{
            messageDigest = MessageDigest.getInstance("MD5");
            messageDigest.update(plaintext.getBytes("UTF8"));
            byte[] raw = messageDigest.digest();
            hash = new String(Base64.encode(raw));

        }catch(Exception nsa){
        throw new Exception();
        }

            return hash;

} 
```

# asp.net - 为什么我的 .Net 1.1 和 2.0 应用程序的共享表单身份验证中断

> ID：12268964
> 
> 赞同：-1
> 
> 时间：2012-09-04T18:00:14.650
> 
> 标签：asp.net, forms-authentication

我有一个具有这样结构的 ASP.NET 系统，在同一台服务器上托管 .Net 1.1 和 .Net 2.0 应用程序：

```
/apps11/app1
/apps11/app2
/apps11/web.config
/apps20/app3
/apps20/app4
/apps20/web.config 
```

上面这两个 web.config 文件具有特定于其 .Net 版本的部分，但与表单身份验证和机器密钥相关的部分是相同的（因此表单身份验证 cookie 可以在不同版本的应用程序之间共享）。该部分如下所示（混淆了真实密钥，但保留了确切的长度和设置）：

```
<machineKey
   validationKey="AAAABBBBCCCCDDDDEEEEFFFF0000111122223333"
   decryptionKey="BBBB9999AAAA1111"
   validation="SHA1">
</machineKey>
<authentication mode="Forms">
  <forms name=".ASPXAUTH" protection="All" timeout="15" path="/" loginUrl="/apps20/login.aspx"></forms>
</authentication> 
```

应用登录页面组件升级后，1.1 应用的共享身​​份验证停止工作。我可以登录到 2.0 应用程序，但是当我导航到 1.1 应用程序时，它会不断地将我重定向回登录页面。经历了以下故障排除步骤：

1.  [MS10-070 存在](http://technet.microsoft.com/en-us/security/bulletin/MS10-070)问题并需要[KB243375 补丁](http://support.microsoft.com/default.aspx?scid=kb;en-US;2433751)？它已经在服务器上应用了。
2.  安装程序破坏了机器密钥？我检查了 machinekey 值，安装程序更新了 validationKey 和 encryptionKey 值。但是，设置保持不变（validation="SHA1"），并且两个 web.config 文件中的机器密钥相同。
3.  machine.config 或 web.config 中每个 .Net Framework 版本的其他值？在 .Net 2.0 web.config 中找到了域设置，但这似乎只影响票证 cookie 的域，而不影响它的内容。
4.  如[如何在 ASP.NET V1.1 和 ASP.NET V2.0 应用程序之间共享身份验证 Cookie](http://weblogs.asp.net/scottgu/archive/2005/12/10/432851.aspx)中所述，1.1 和 2.0 之间的加密设置存在问题？除了键值之外什么都没有改变，为什么它现在会坏掉呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:00:14.650

回答我自己的问题。在 .Net 1.1 之后的许多年里，我怀疑很多其他人会需要这些信息，但把它放在这里以防万一......

最后，问题确实是上面的#4。不仅键发生了变化，而且键的**长度**也发生了变化：

```
<machineKey
  validationKey="EEEEEEEE77778888999900001111AAAABBBBCCCCDDDDFFFFAAAABBBBCCCCDDDDEEEEFFFF1111222233334444555566667777888899990000AAAABBBBCCCCDDDD"
  decryptionKey="888899990000111122223333444455556666777788889999" validation="SHA1">
</machineKey> 
```

线索出现在这篇[Security via in ASP.NET 2.0](http://www.devproconnections.com/article/security-development/security-via-lt-machinekey-gt-in-asp-net-2-0)文章中，它说*“解密属性是 ASP.NET 2.0 中的新增功能，以减少旧版本验证属性的重载。此属性的自动选项使用**从密钥大小推断的**算法。默认为三重 DES 加密，但 128 或 256 位的密钥将使用 AES。*

**在 .Net 2.0 web.config 中将encryption="3DES"**添加到我的 machineKey 标记解决了这个问题。它工作了多年，因为旧密钥足够短，可以推断出 3DES。新密钥足够长，可以推断出 AES。

我回去阅读[了 machineKey element 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/w8h3skw9%28v=vs.80%29.aspx)。它只是说*“ASP.NET 根据配置设置确定要使用的解密算法”*。虽然稍后在本主题中它会告诉您每种加密类型使用的密钥长度，但它并没有说加密类型是从长度推断出来的。事实上，它告诉您如何使用比推荐长度更短的密钥（不确定您为什么要这样做）。

有什么更好的解决方案吗？我是唯一一个认为 MSDN 文档在这一点上有些欠缺的人吗？

# .net - Bonjour sdk for windows 仅在 UI 线程中运行

> ID：12268967
> 
> 赞同：4
> 
> 时间：2012-09-04T18:00:29.357
> 
> 标签：.net, access-violation, bonjour

我正在开发一个使用 Bonjour 算法在网络中查找服务的程序。我下载[了适用于 Windows 的 Bonjour SDK](https://developer.apple.com/softwarelicensing/agreements/bonjour.html)。.Net 上有两个示例应用程序。两者都是 Windows 窗体项目。示例工作正常，但是当我尝试实现示例控制台应用程序时，我收到了 AccessViolationException。这是我的代码：

```
class Program
{
    static void Main(string[] args)
    {
        DNSSDService service = new DNSSDService();
        DNSSDEventManager eventManager = new DNSSDEventManager();
        eventManager.ServiceFound += new _IDNSSDEvents_ServiceFoundEventHandler(eventManager_ServiceFound);
        //next line raises AccessViolationException
        DNSSDService browse = service.Browse(0, 0, "_psia._tcp", null, eventManager);

        Console.ReadKey();
    }

    static void eventManager_ServiceFound(DNSSDService browser, DNSSDFlags flags, uint ifIndex, string serviceName, string regtype, string domain)
    {
        //TODO: some logic
    }
} 
```

我找到了解决方案 - Bonjour 库中的所有方法都应该从 STA 线程调用。所以我在 Main 方法中添加了 [STAThread] 属性。代码现在如下所示：

```
class Program
{
    [STAThread]
    static void Main(string[] args)
    {
        DNSSDService service = new DNSSDService();
        DNSSDEventManager eventManager = new DNSSDEventManager();
        eventManager.ServiceFound += new _IDNSSDEvents_ServiceFoundEventHandler(eventManager_ServiceFound);
        DNSSDService browse = service.Browse(0, 0, "_psia._tcp", null, eventManager);

        Console.ReadKey();
    }

    static void eventManager_ServiceFound(DNSSDService browser, DNSSDFlags flags, uint ifIndex, string serviceName, string regtype, string domain)
    {
        //TODO: some logic
    }
} 
```

我用 AccessViolationException 解决了这个问题，但收到了一个新问题。在我调用 Browse 方法后，应该为网络中定义的每个服务调用“ServiceFound”事件。但它没有。经过一段时间的调查，我发现我需要运行消息泵来接收所有这些事件。所以最终的代码是这样的：

```
 class Program
{
    [STAThread]
    static void Main(string[] args)
    {
        DNSSDService service = new DNSSDService();
        DNSSDEventManager eventManager = new DNSSDEventManager();
        eventManager.ServiceFound += new _IDNSSDEvents_ServiceFoundEventHandler(eventManager_ServiceFound);
        DNSSDService browse = service.Browse(0, 0, "_psia._tcp", null, eventManager);

        Application.Run();
    }

    static void eventManager_ServiceFound(DNSSDService browser, DNSSDFlags flags, uint ifIndex, string serviceName, string regtype, string domain)
    {
        //TODO: some logic
    }
} 
```

停止消息循环调用 Application.Exit()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T17:40:32.853

我试图用你的代码来发现 ip camera ip address，但我不知道`hostName`我应该做什么来`GetAddrInfo`工作。

```
using Bonjour;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace WindowsFormsApplication1 {
    static class Program {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main() {
            DNSSDService service = new DNSSDService();
            DNSSDEventManager eventManager = new DNSSDEventManager();
            eventManager.ServiceFound += new _IDNSSDEvents_ServiceFoundEventHandler(eventManager_ServiceFound);
         //   DNSSDService browse = service.Browse(0, 0, "_axis-video._tcp", null, eventManager);
            DNSSDService browse = service.Browse(0, 0, "_http._tcp", null, eventManager);

            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        }
        static void eventManager_ServiceFound(DNSSDService browser, DNSSDFlags flags, uint ifIndex, string serviceName, string regtype, string domain) {
            Console.WriteLine("browser: " + browser + "\nDNSSDFlags " +  flags+ "\nifIndex " + ifIndex +"\nserviceName: " + serviceName + "\nregtype: " +regtype+ "\ndomain: "+ domain);

            DNSSDEventManager eventManager = new DNSSDEventManager();
            eventManager.AddressFound += new _IDNSSDEvents_AddressFoundEventHandler(eventManager_AddressFound);
            DNSSDAddressFamily family = new DNSSDAddressFamily();
            browser.GetAddrInfo(flags, ifIndex, family, "axis-00408cbeeae5", eventManager);

        }

        private static void eventManager_AddressFound(DNSSDService service, DNSSDFlags flags, uint ifIndex, string hostname, DNSSDAddressFamily addressFamily, string address, uint ttl) {
            Console.WriteLine("----------------------------------------");
            Console.WriteLine("FFFFFFFFFFFFFFFFFFFFFOUUUUUUUUUUUUUUUUND");
            Console.WriteLine("----------------------------------------");

        }

    }
} 
```

# java - 上传文件的保存路径我真的应该选择getServletContext吗？

> ID：12268968
> 
> 赞同：0
> 
> 时间：2012-09-04T18:00:39.220
> 
> 标签：java, servlets, file-upload, workspace

这是我的情况：

*   我的表必须有一个按钮来显示图像，我在数据库中插入数据，只包含图像文件的名称*（filename.jpg）*而不是特定路径，服务器将根据它在真实服务器中的上下文显示它或不是。为此，经过长时间的搜索，我找到了`getServletContext().getRealPath("/images")`找到粘贴所在上下文的方法，例如本地主机或真实主机（至少这是我所理解的）。

但是，当我在 localhost 时，它会显示该方法的上下文

> getServletContext().getRealPath("/images"):
> 
> *C:\Documents and Settings\josue\Meus documentos\workspace.metadata.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\testeDeFuncoes\images\file.jpg*

我推断它正在调用临时文件夹的上下文，该文件夹仅用于 localhost 测试。我认为要在 localhost 中恢复它会起作用，但在真正的服务器中它会起作用，我认为不是，对吧？

我可以以动态方式放入 Web 内容，当我导出 WAR 文件时，它会存储在文件中，上传时，无论服务器决定选择哪个位置，它都能正常工作。如果不是，在大多数情况下，通常用什么来做一个网页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:36:27.110

您可能会考虑将图像存储在数据库中，具体取决于您的需要，请参阅[将图像存储在数据库中 - 是或否？](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

我个人非常喜欢将图像存储在数据库中并将它们缓存在本地文件系统的临时目录中。

无论哪种方式，您都应该有一个可靠的已知规范位置来存储图像。如果您不将它们存储在数据库中，请决定一个非临时目录，或者使其可配置。

webapp 可能是从一个 war 文件中提供的，并且`servletContext.getRealPath(...)`不太可能返回一个可靠的地方来存储任何东西。

# java - 在 WebDriver 中设置自定义 Firefox 驱动程序配置文件

> ID：12268969
> 
> 赞同：0
> 
> 时间：2012-09-04T18:01:00.217
> 
> 标签：java, selenium-webdriver, selenium-firefoxdriver

我正在使用 Selenium Webdriver(Java) 来自动化 Web 应用程序，并且该应用程序有一个场景，即我必须下载一个 xml 文件，但我无法这样做，因为每次尝试下载时都会询问路径。谷歌搜索建议我必须创建一个自定义 Firefox 驱动程序配置文件，但我不知道如何在 WebDriver 中设置一个。我知道如何在 Selenium RC 中做到这一点。如果有人对此有想法，请提出建议。

提前致谢。！！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-04T19:15:23.487

这是创建自定义 Firefox 配置文件的方法：

```
FirefoxProfile profile = new FirefoxProfile();
profile.setPreference("your_preference", "preference_value");
return new FirefoxDriver(profile); 
```

我手头没有您必须设置的首选项以启用 xml 下载。如果您找不到它，请告诉我，我也可以看看它。

# regex - Jquery ui自动完成 - 组合框 - 匹配第二个/第三个单词的第一个字母

> ID：12268983
> 
> 赞同：1
> 
> 时间：2012-09-04T18:01:49.420
> 
> 标签：regex, combobox, jquery-ui-autocomplete

我已经搜索了很多时间，但没有结果。我正在尝试使用 Jquery UI 自动完成插件。我正在使用组合框模式（此处提供的示例：http: [//jqueryui.com/demos/autocomplete/#combobox](http://jqueryui.com/demos/autocomplete/#combobox)）。根据我的理解，更改此代码（来自示例）

`var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i" );`

有了这个

`var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex(request.term), "i" );`

确保我将通过第一个单词中的第一个字母自动完成。但是，假设我有一系列这样的选项：

```
<option value="">Auto Skin</option>
<option value="">Score</option> 
```

并输入字母's'，它将自动仅显示“分数”选项。

我怎么能改变正则表达式来获得这两个结果，因为选项“自动皮肤”有“皮肤”这个词也以字母's'开头？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:07:16.047

代替`^`匹配字符串开头的正则表达式模式，使用正则表达式模式`\b`来匹配单词边界。

```
var matcher = new RegExp("\\b" + $.ui.autocomplete.escapeRegex(request.term), "i" ); 
```

更多信息[在这里](http://answers.oreilly.com/topic/217-how-to-match-whole-words-with-a-regular-expression/)。

# bash - 从标签设置亚马逊 ec2 主机名的 shell 脚本

> ID：12268986
> 
> 赞同：2
> 
> 时间：2012-09-04T18:01:59.623
> 
> 标签：bash, amazon-ec2, ec2-ami, ec2-api-tools

我正在尝试从标签“名称”设置亚马逊 EC2 主机名

并找到了从实例数据中提取标签[的答案。](https://stackoverflow.com/a/7122649/957423)

```
ec2-describe-tags \
  --filter "resource-type=instance" \
  --filter "resource-id=$(ec2-metadata -i | cut -d ' ' -f2)" \
  --filter "key=Name" | cut -f5 
```

结果是：

```
+------------+--------------+------+--------+
| resourceId | resourceType | key  | value  |
+------------+--------------+------+--------+
| i-1xxxxxxx | instance     | Name | dev200 |
+------------+--------------+------+--------+ 
```

我可以看到我快到了，但是如何从上面的结果中获取 value(dev200) ？然后我可以使用它：

```
echo $HOSTNAME > /etc/hostname 
```

ps 我在实例上有 BASH，但我完全迷失在[bash 文档](http://www.tldp.org/LDP/abs/html/)中。有人可以指出正确的段落吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T18:42:35.643

经过一些错误和试验后，脚本开始工作：

```
#!/bin/bash
hostname=`ec2-describe-tags --filter "resource-type=instance" \
  --filter "resource-id=$(ec2-metadata -i | cut -d ' ' -f2)" \
  --filter "key=Name" | grep Name`

IFS="|" read -ra NAME <<< "$hostname"
hostname=${NAME[4]}
echo $hostname 
```

使用 IFS 将字符串解析为数组，幸运的是我知道第 4 个元素始终是主机名。

编辑（2012 年 12 月 20 日）：在此发布后的短时间内，一些相关的 ec2 命令行工具已被修改，并且标志已更改或弃用（例如，上面的 -i 标志似乎不再适用当前版本的 ec2metadata）。记住这一点，这是我用来获取当前机器的“​​名称”标签的命令行脚本（不能与脚本的其余部分对话）：

```
ec2-describe-tags --filter "resource-type=instance" --filter "resource-id=$(ec2metadata --instance-id)" | awk '{print $5}' 
```

在 Debian/Ubuntu 上，您需要`apt-get install cloud-utils ec2-api-tools`让这些工作（后者仅在 Ubuntu Multiverse 上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-05T15:57:57.410

您可以只使用 curl，因为它通常已安装。

assign_host_name=$(curl ' [http://169.254.169.254/latest/meta-data/assigned_host_name](http://169.254.169.254/latest/meta-data/assigned_host_name) ') assign_domain_name=$(curl ' [http://169.254.169.254/latest/meta-data/assigned_domain_name](http://169.254.169.254/latest/meta-data/assigned_domain_name) ')

然后只需检查分配的值是否不包含如下所示的 404 HTML 消息。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> <head> <title>404 - Not Found</title> </head> <body> <h1>404 - Not Found</h1> </body> </html> 
```

然后做任何你想分配主机名的魔法。我将在今天晚些时候编辑它以添加我是如何做到的。

# javascript - 使用用户输入修改链接

> ID：12268987
> 
> 赞同：3
> 
> 时间：2012-09-04T18:02:07.160
> 
> 标签：javascript

我正在为一个函数编写一小段代码，实际上我在另一个[问题的答案](https://stackoverflow.com/a/7097818/1646851)中找到了这些代码，这是一个巨大的帮助。不过，尝试修改该脚本片段给我带来了一些麻烦：我正在尝试更改这一点，以便不是使用链接更改显示的文本，而是使用静态文本修改链接（例如“单击此处” ) 或按钮元素。

```
<a id="reflectedlink" href="http://www.google.com/search">http://www.google.com/search</a>
<input id="searchterm"/>
<script type="text/javascript">
   var link= document.getElementById('reflectedlink');
   var input= document.getElementById('searchterm');
   input.onchange=input.onkeyup= function() 
      {
         link.search= '?q='+encodeURIComponent(input.value);
         link.firstChild.data= link.href;     
      }; 
</script> 
```

我真的很想有一个简单的按钮，可以在新窗口中打开修改后的链接。我已经尝试寻找类似的解决方案，但我确定我错过了它只是因为我不知道我在寻找什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:19:30.893

[修改了你的小提琴](http://jsfiddle.net/Sxz4R/28/)：

HTML

```
Search <input id="searchterm" type="text" /> 
```

JavaScript

```
var searchterm = document.getElementById('searchterm');
var base_url = 'http://www.google.com/search?q=';
searchterm.onchange = searchterm.onkeyup = function(e) {
    e = e || event;
    if ( (e.which || e.keyCode) == 13 ){
        window.open(base_url + encodeURIComponent(searchterm.value), '_blank');
    }
}; 
```

`window.open`有关该功能的更多信息在[这里。](http://www.w3schools.com/jsref/met_win_open.asp)

# python - 我需要在 google appengine 中使用交易吗

> ID：12268988
> 
> 赞同：0
> 
> 时间：2012-09-04T18:02:15.713
> 
> 标签：python, google-app-engine, transactions

**update 0** 我的`def post()`代码发生了巨大的变化，因为它最初是基于一个数字表单，其中包括复选框和文本输入字段，而不仅仅是文本输入字段，这是当前的设计更像纸。但是，结果我有其他问题可以通过提出的解决方案之一解决，但我不能完全遵循提出的解决方案，所以让我尝试解释新的设计和问题。

较小的问题是我的实现效率低下，因为在`def post()`我为每个输入时隙创建了一个不同`name`的长字符串`<courtname><timeslotstarthour><timeslotstartminute>`。在我的代码中，这`name`是在嵌套`for`循环中读取的，带有以下片段[我想效率非常低]。

```
tempreservation=courtname+str(time[0])+str(time[1])
name = self.request.get('tempreservation',None) 
```

更严重的直接问题是我的`def post()`代码从未被阅读过，我无法弄清楚为什么（也许以前也没有被阅读过，但我还没有测试那么远）。我想知道问题是否在于现在我希望帖子和获取都以相同的方式“完成”。下面的第一行用于 post()，第二行用于 get()。

```
return webapp2.redirect("/read/%s" % location_id)
self.render_template('read.html', {'courts': courts,'location': location, ... etc ...} 
```

我的新 post() 如下。请注意，我已经在代码中留下了`logging.info`，看看我是否曾经到达那里。

```
class MainPageCourt(BaseHandler):

    def post(self, location_id):
        logging.info("in MainPageCourt post  ")
        startTime = self.request.get('startTime')
        endTime = self.request.get('endTime')
        day = self.request.get('day')
        weekday = self.request.get('weekday')
        nowweekday = self.request.get('nowweekday')
        year = self.request.get('year')
        month = self.request.get('month')
        nowmonth = self.request.get('nowmonth')
        courtnames = self.request.get_all('court')
        for c in courtnames:
            logging.info("courtname: %s " % c)
        times=intervals(startTime,endTime)
        for courtname in courtnames:
            for time in times:
                tempreservation=courtname+str(time[0])+str(time[1])
                name = self.request.get('tempreservation',None)
                if name:
                    iden = courtname
                    court = db.Key.from_path('Locations',location_id,'Courts', iden)
                    reservation = Reservations(parent=court) 
                    reservation.name = name
                    reservation.starttime = time
                    reservation.year = year
                    reservation.nowmonth = int(nowmonth)
                    reservation.day = int(day)
                    reservation.nowweekday = int(nowweekday)
                    reservation.put()
        return webapp2.redirect("/read/%s" % location_id) 
```

最终，我想通过将数据存储中的现有 Reservations 数据与隐含的新预订进行比较，向上述 get() 代码添加检查/验证，并发出警报，告诉用户她可以解决的任何潜在问题。

我也将不胜感激对这两个问题的任何评论。

**更新结束 0**

我的应用程序适用于社区网球场。我想用模仿纸张的在线数字表替换纸质注册表。两个网球约会发生冲突时，可能会出现“交易性”冲突，这似乎不太可能发生。那么，我如何让第二位约会者提前了解冲突，同时让成功的一方有机会改变她的约会，就像她在纸上（用橡皮擦）一样。

每半小时是表格上的一个时间段。人们通常在“提交”之前一次注册多个半小时。

因此，在循环中的代码中，我执行了 get_all。如果任何获取成功，我想让用户控制是否接受 put()。我仍然认为 put() 将是全有或全无，没有选择性。

所以我的问题是，我是否需要让部分代码使用明确的“事务”？

```
class MainPageCourt(BaseHandler):

    def post(self, location_id):
        reservations = self.request.get_all('reservations')
        day = self.request.get('day')
        weekday = self.request.get('weekday')
        nowweekday = self.request.get('nowweekday')
        year = self.request.get('year')
        month = self.request.get('month')
        nowmonth = self.request.get('nowmonth')
        if not reservations:
            for r in reservations:
                r=r.split()
                iden = r[0]
                temp = iden+' '+r[1]+' '+r[2]
                court = db.Key.from_path('Locations',location_id,'Courts', iden)
                reservation = Reservations(parent=court) 
                reservation.starttime = [int(r[1]),int(r[2])]
                reservation.year = int(r[3])
                reservation.nowmonth = int(r[4])
                reservation.day = int(r[5])
                reservation.nowweekday = int(nowweekday)
                reservation.name = self.request.get(temp)
                reservation.put()
            return webapp2.redirect("/read/%s" % location_id)
        else:
            ... this important code is not written, pending ...
            return webapp2.redirect("/adjust/%s" % location_id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:18:14.227

看看乐观并发控制： [http ://en.wikipedia.org/wiki/Optimistic_concurrency_control](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T16:43:48.753

您可以检查给定的时隙的可用性，并仅在它们不冲突时`Court`编写相应的`Reservations`子实体。`stat_time`

以下是使用祖先查询为 1 次预订执行此操作的方法：

```
@ndb.transactional
def make_reservation(court_id, start_time):
  court = Court(id=court_id)
  existing = Reservation.query(Reservation.start_time == start_time,
                               ancestor=court.key).fetch(2, keys_only=True)
  if len(existing):
    return False, existing[0]
  return True, Reservation(start_time=start_time, parent=court.key).put() 
```

或者，如果您将 slot 设置为 Reservation id 的一部分，则可以删除查询并构造 Reservation 实体键以检查它们是否已存在：

```
@ndb.transactional
def make_reservations(court_id, slots): 
  court = Court(id=court_id)
  rs = [Reservation(id=s, parent=court.key) for s in slots]
  existing = ndb.get_multi(r.key for r in rs)
  if any(existing):
    return False, existing
  return True, ndb.put_multi(rs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T17:20:11.920

我认为您应该始终使用事务，但我认为您的问题最好通过事务来解决。

我认为你应该实施一个两阶段的预订系统——这是你在大多数购物袋和票务公司看到的。

1.  发布表格会创建一个“预订请求”，它将时间限制为“在别人的购物袋中”5-15 分钟
2.  用户必须在批准屏幕上再次提交以确认时间。您也可以让他们更新该屏幕上的冲突，并尽可能长时间地重置时间段上的“预订锁定”。
3.  一个 cronjob - 或一个由在某个窗口进入的请求触发的伪造的 - 清除过期的预留锁并将时间返回到可用插槽池中。

# java - Java - 字节和二进制

> ID：12268989
> 
> 赞同：5
> 
> 时间：2012-09-04T18:02:26.703
> 
> 标签：java

这是一个基本问题。

当我使用字节流将字节写入文件时，我是在创建二进制文件吗？

例如：我使用字节流将文本数据写入记事本，当我在十六进制查看器中打开记事本时，我会看到每个字符对应的十六进制值。但为什么不是二进制值（即 0 和 1）。

我还了解到，使用数据输出/输入流我读/写二进制文件。

我想我的困惑是写字节是什么意思，写二进制数据是什么意思。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T18:07:50.950

> 当我使用字节流将字节写入文件时，我是在创建二进制文件吗？

您按原样写入字节*，*例如，按原样**写入****字节**。如果这些字节代表字符，那么通常**no**，它只是一个文本文件（毕竟一切都是 1 和 0）。否则答案***取决于***。术语二进制文件具有误导性，但通常指[的是可以包含任意数据的文件](http://en.wikipedia.org/wiki/Binary_file)。

 *****> 当我在十六进制查看器中打开记事本时，我会看到每个字符对应的十六进制值。但为什么不是二进制值

HEX 只是字节的另一种表示形式。以下三个是相等的

```
10       (Decimal value 10)
0xA      (Hex value 10)
00001010 (Binary value 10) 
```

计算机只存储**二进制**值。但编辑者可以选择以其他方式表示（*显示*）它们，例如**十六进制**或**十进制**形式。给定足够的字节，它甚至可以表示为图像。

> 写字节是什么意思，写二进制数据是什么意思

[二进制数据](http://en.wikipedia.org/wiki/Binary_data)表示**1**和**0**，例如`00001010`8 位。8`bits`做一个`byte`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:07:54.610

混淆可能是由您正在使用的应用程序引起的。如果您在 HEX 查看器中打开某些内容，它应该以 HEX 而不是 BIN 表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T18:08:03.817

“文本”和“二进制”文件的概念对于您和我作为文件的“消费者”来说，主要是一种概念上的理解。严格来说，*每个*文件都由 1 和 0 组成，因此都是真正意义上的二进制文件。十六进制表示、特定字符集的编码、图像文件格式。您可以启动一个 100 个随机字节的数组，将其输出到一个文件中，它就像任何其他文件一样“二进制”。这一切都在如何解释字节的上下文中有所不同。

这是一个例子。在久经考验的 ACII 中，大写字母“A”被编码为十进制 65。您可以在十六进制查看器中将其表示为 0x41（十六进制），作为编辑器中的“A”，但最终，您将该字节写入文件，它只是一个字节转换为一系列八位，01000001。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T18:09:36.737

通常，您使用 Writer(s) 创建一个文本文件，并使用其他方式（流、通道等）创建一个二进制文件。但是，如果您的“二进制”文件包含文本且仅包含文本，则无论如何它都是文本文件。

关于十六进制格式，这只是查看字节值的一种紧凑（首选）方式。*****

# visual-studio-2008 - Arial Narrow 字体在 Windows CE 模拟器中显示为 Tahoma

> ID：12268990
> 
> 赞同：2
> 
> 时间：2012-09-04T18:02:32.277
> 
> 标签：visual-studio-2008, windows-ce

当我在 Visual Studio 中向我的 Windows CE 6.0 项目添加控件时，我可以选择以下字体之一：Arial、Arial Narrow、Tahoma、Times New Roman

但是，当我启动模拟器时，我选择 Arial Narrow 的所有标签都显示在 Tahoma 中。

我不知道这是否是模拟器的配置问题。如果是这样，我不知道如何纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T18:46:28.173

我的猜测是 Arial 不在操作系统中。仅仅因为 Visual Studio 允许您选择字体并不意味着该字体本身在设备上可用。如果字体不可用，操作系统将“选择”它可以与请求的字体最接近的匹配。您最好的选择是：

A. 获取包含所需字体的操作系统映像（[Arial在 Platform Builder*中*](http://www.microsoft.com/windowsembedded/en-us/develop/windows-embedded-ce-6-os-components.aspx)可用）

或者

B. 找到[字体的可分发版本](http://ttfonts.net/search.htm?q=arial)并将其部署到您的应用程序中

# wpf - 自定义 WPF 日历标题

> ID：12268991
> 
> 赞同：1
> 
> 时间：2012-09-04T18:02:45.410
> 
> 标签：wpf, calendar, wpftoolkit

我需要自定义 wpf 日历标题-月标题，日标题等。可以在日历标题上添加额外的文本，也可以修改其日期标题。

我已经尝试通过引用[this](http://msdn.microsoft.com/hi-in/magazine/dd882520%28en-us%29.aspx)。里面使用的是老版本的WPF工具包，新版本没有。它与 WPF 本身集成在一起。因此，日标题标题不会显示在那里。

我正在使用 .Net 4.0 和 Visual Studio 2010 进行开发。我没有使用任何其他设计器软件，例如 Blend。

请让我知道您实现这一目标的想法。

提前致谢，N

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:06:26.870

听起来好像您需要创建一个自定义控件模板。您如何做到这一点取决于您可以使用哪些工具。如果您有一个处理 WPF 的 Blend 版本（请参阅[此处](http://blendinsider.com/technical/announcing-blend-sketchflow-preview-for-visual-studio-2012-2012-08-15/)获取可以下载的链接，因为它是预览版），您可以从默认模板创建控件模板。

在 Blend 中，过程如下：

1.  使用设计器添加日历控件，
2.  右键单击并选择编辑模板 | 编辑副本...',
3.  选择在哪里创建新样式（最好添加资源字典），
4.  再次执行相同操作，为包含日历视觉效果的 CalendarItem 创建模板，
5.  使用设计器对模板进行所需的更改，最后
6.  单击`[Calendar]`标题栏下方面包屑中的单词以返回正常设计模式。

如果您不想安装 Blend，则可以改用MSDN 站点[中的 WPF 日历示例模板。](http://msdn.microsoft.com/en-us/library/ff468218%28v=vs.100%29.aspx)

# c# - 将复选框标签（在面板中）获取到新表单

> ID：12268999
> 
> 赞同：0
> 
> 时间：2012-09-04T18:03:19.013
> 
> 标签：c#, winforms

对 C# 来说相当新，所以如果我遗漏了一些简单的东西或试图以错误的方式做这件事，请原谅我。

我正在创建另一个表单来补充我的主表单，它需要**在单击第二个表单的按钮时从主表单中提取一些信息。**Main for 上的信息存储在复选框和文本框中。

我的文本框工作正常，但无法弄清楚如何将复选框标记数据连同格式一起拉出。主窗体工作正常，除了我无法弄清楚如何将复选框数据带过来。

这是我目前用来在我的主窗体上显示复选框 TAG 数据的代码。

```
 //Statements to write checkboxes to stringbuilder
string checkBoxesLine = "\u2022 LIGHTS ";

foreach (Control control in pnlCheckBoxes.Controls)
{
    if (control is CheckBox)
    {
        CheckBox checkBox = (CheckBox)control;

        if (checkBox.Checked && checkBox.Tag is string)
        {
            string checkBoxId = (string)checkBox.Tag;
            checkBoxesLine += string.Format("{0}, ", checkBoxId);
        }
    }
} 
```

这是我用来打开新表单并将复选框标记数据和 textbox.text 数据移动到新表单的按钮。

```
private void code_blue_link_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
{
    trouble_shooting = tshooting_text.Text;
    services_offered = services_offered_text.Text;
    other_notes = other_notes_text.Text;
    cust_modem = cust_modem_text.Text;
    //Opens CODE BLUE form and pushes text to it.
    code_blue_form CBForm = new code_blue_form();
    CBForm.cust_name_cb = cust_name_text.Text;
    CBForm.cust_cbr_cb = cust_callback_text.Text;
    CBForm.cust_wtn_cb = cust_btn_text.Text;
    CBForm.cust_notes_cb = cust_modem + "\r\n" + trouble_shooting + "\r\n" + services_offered + "\r\n" + other_notes;

    CBForm.Show();
} 
```

这是我的第二种表单的代码，以及我如何获取信息以填充该表单上的文本框。

```
public partial class code_blue_form : Form
{
    public string cust_name_cb;
    public string cust_wtn_cb;
    public string cust_cbr_cb;
    public string cust_notes_cb;
    public string cust_modem_cb;
    public code_blue_form()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        cb_name_text.Text = cust_name_cb;
        cb_wtn_text.Text = cust_wtn_cb;
        cb_cbr_text.Text = cust_cbr_cb;
        cb_notes_text.Text = cust_notes_cb;
    }
  }
} 
```

长文请见谅！对此的任何想法/方向将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:22:50.957

我不会使用您的代码立即回答。我发现代码有异味。如果我是你，我会这样做（但如果你坚持使用相同的设计，那么你可以相应地调整我的代码，没什么大不了的，最重要的是你知道该怎么做）：

```
void code_blue_link_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
{
    var checkBoxIds = GetCheckBoxIds();

    cust_modem = cust_modem_text.Text;
    trouble_shooting = tshooting_text.Text;
    services_offered = services_offered_text.Text;
    other_notes = other_notes_text.Text;

    //take off underscore convetion and replace with camelCase convention.
    CodeBlueForm cbForm = new CodeBlueForm(checkBoxIds, cust_name_text.Text, 
                                           cust_callback_text.Text, 
                                           cust_btn_text.Text,
                                           cust_modem + "\r\n" + 
                                           trouble_shooting + "\r\n" + 
                                           services_offered + "\r\n" + 
                                           other_notes);

    cbForm.Show();
}

private List<int> GetCheckBoxIds()//even better naming required like GetFruitIds() 
{                                 //(whatever the id is of) or even better Tag  
                                  //checkBoxes with the Fruit object iself and not ids.
    List<int> checkBoxIds = new List<int>(); //So you can call GetFruits();
    foreach (Control control in pnlCheckBoxes.Controls)
    {
        if (control is CheckBox)
        {
            CheckBox checkBox = (CheckBox)control;

            if (checkBox.Checked && checkBox.Tag is int) //tag them as ints. 
                checkBoxIds.Add((int)checkBox.Tag);      //I hope ids are integers.
        }
    }

    return checkBoxIds;
}

public partial class CodeBlueForm : Form
{
    List<int> checkBoxIds = new List<int>():
    string cust_cbr_cb; //should be private.
    string cust_name_cb;
    string cust_wtn_cb;
    string cust_notes_cb;
    string cust_modem_cb;

    public CodeBlueForm(List<int> ids, string cust_name_cb, string cust_wtn_cb, 
                        string cust_notes_cb, string cust_modem_cb)
    {
        InitializeComponent();

        this.checkBoxIds = ids;
        this.cust_name_cb = cust_name_cb;
        this.cust_wtn_cb = cust_wtn_cb;
        this.cust_notes_cb = cust_notes_cb;
        this.cust_modem_cb = cust_modem_cb;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        cb_name_text.Text = cust_name_cb; 
        cb_wtn_text.Text = cust_wtn_cb;
        cb_cbr_text.Text = cust_cbr_cb;
        cb_notes_text.Text = cust_notes_cb;

        string checkBoxesLine = "\u2022 LIGHTS ";        
        // if you dont require a lot of string formatting, then just:
        checkBoxesLine += string.Join(", ", checkBoxIds);

        // or go with your classical:
        //foreach (int id in checkBoxIds)
        //    checkBoxesLine += string.Format("{0}, ", checkBoxIds);

        //and do what u want with checkboxline here.
    }
} 
```