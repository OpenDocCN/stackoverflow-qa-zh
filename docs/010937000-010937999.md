# StackOverflow 问答 10937000-10937999

# php - 通过 php 函数动态添加表单字段作为“数组”而不是值发布

> ID：10937001
> 
> 赞同：3
> 
> 时间：2012-06-07T17:42:18.040
> 
> 标签：php, arrays, forms

我有一个表单，允许用户在需要时添加更多表单字段。我需要通过 php 在电子邮件中发布值，但它一直以“数组”而不是值的形式返回。我是新手，只是无法弄清楚问题所在。

这是javascript：

```
 var counter = 1;
    var limit = 50;
    function addInput(divName){
        if (counter == limit)  {
          alert("You have renter code hereeached the limit of adding " + counter + " inputs");
     }
     else {
          var newdiv = document.createElement('div');
          newdiv.innerHTML = "Entry " + (counter + 1) + " <br><input type='text' name='myInputs[]'>";
          document.getElementById(divName).appendChild(newdiv);
          counter++;
     }
} 
```

这是html表单（我删除了大部分以节省时间）：

```
 <form id="teamreg" class="appnitro"  method="post" action="teamreg.php" >
        <input name="recipient" type="hidden" id="recipient" value="kim@ka-kingdesigns.com" />
        <ul>
            <li>
                <h3>Contact Information</h3>
            </li>   
            <li id="li_1" >
                <label class="description" for="company">Company/Organization </label>
                <div>
                    <input id="company" name="company" class="element text large" type="text" maxlength="255" value=""/> 
                </div> 
            </li>

            <li id="li_3" >
                <label class="description" for="contactname">Team Cooridinator</label>
                <span>
                    <input id="element_2_1" name= "contactname_1" class="element text" maxlength="255" size="8" value=""/>
                    <label>First</label>
                </span>
                <span>
                    <input id="element_2_2" name= "contactname_2" class="element text" maxlength="255" size="14" value=""/>
                    <label>Last</label>
                </span> 
            </li>       

<li class="section_break">
            <h3>Team Members</h3>
            <p>Please list everyone planning on volunteering (including spouses, children, etc.)<br/>
</p>
        </li>

<li>
<div id="dynamicInput">
          Entry 1<br><input type="text" name="myInputs[]">
     </div>
     <input type="button" value="Add another text input" onClick="addInput('dynamicInput');">

</li>
            <li class="buttons">
                <input type="hidden" name="form_id" value="421421" />

                <input id="saveForm" class="button_text" type="submit" name="submit" value="Submit" />
        </li>
            </ul>
        </form> 
```

这是php：

```
header("location: registrationthankyou.html");
$company = $_POST['company'];
$coordinator = "{$_POST['contactname_1']} {$_POST['contactname_2']}";
$myInputs = $_POST['myInputs'];
foreach ($myInputs as $eachInput) {
     echo $eachInput . "<br>";
}
$to = $_POST['recipient']; //"user@example.com";
$subject = "Day of Caring Team Registration".$_POST['subject'];
$comments = "
<strong>Company:</strong> {$company}<br>
<strong>Team Coordinator:</strong> {$coordinator} <br>
<strong>Team Members</strong> {$myInputs}<br><br>
mail($to,$subject,$comments,"From: $from\r\n"
    ."Reply-To: $from\r\n"
    ."Content-Type: text/html; charset=iso-8859-1\n" 
    ."X-Mailer: PHP/" . phpversion()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:00:54.653

改变：

```
<strong>Team Members</strong> {$myInputs}<br><br> 
```

到：

```
<strong>Team Members</strong> ".implode(",", $_POST['myInputs'])."<br /><br /> 
```

您包含在以下内容中的代码对您的电子邮件没有任何作用：

```
foreach ($myInputs as $eachInput) {
     echo $eachInput . "<br>";
} 
```

你可以做：

```
foreach ($myInputs as $eachInput) {
     $message .= $eachInput . "<br>";
} 
```

然后更新电子邮件以`{$myInputs}`反映`{$message}`

# sql - 查找连续离开的用户

> ID：10937003
> 
> 赞同：-2
> 
> 时间：2012-06-07T17:42:20.653
> 
> 标签：sql, oracle

我想获取过去 30 天内连续 2 天离开的用户列表。

表名：参加UserId、Date、Leave Flag

休假标志是“Y”代表现在，“N”代表休假日。

这可以在 SQL 中完成吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:11:08.297

```
SELECT DISTINCT a.UserId FROM Attend AS a
INNER JOIN Attend AS b
ON a.UserId == b.UserId && a.LeaveFlag == 'N' && b.LeaveFlag == 'N' && 
DATEDIFF(dd,a.Date,b.Date) > 0 && a.Date < b.Date
WHERE DATEDIFF(dd, a.Date, GETDATE()) <= 30 
```

可能需要修改 where 子句，具体取决于您是要包括还是排除 31 天和 30 天前离开的人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:09:11.160

如果您每天只有一次休假，并且您正在使用具有窗口函数（Oracle 支持）的数据库，那么您可以使用一个技巧来避免自联接。它确实需要其他处理。

这个想法是，如果我们为用户生成一个按日期排序的数字序列，那么这个序列和日期之间的差异将是恒定的。例如，如果日期是 3 月 2 日、4 日、5 日、7 日，那么序列将是 1、2、3、4，而差异将是 3 月 1 日、3 月 2 日、3 月 2 日、3 月 3 日。然后我们可以查看此列表中的重复项。

以下查询使用此方法：

```
select userid
from (select t.*, 
             dateadd(d, -seqnum, t.date) as diff
      from (select t.*, row_number() over (partition by userid order by date) as seqnum
            from t
            where datediff(d, t.date, getdate()) <= 30 and leave = 'Y'
           ) t
     ) t
group by userid, diff
having count(*) > 1 
```

# licensing - GPLv2 | 我可以在我的商业产品中嵌入来自其他开发人员的代码吗？

> ID：10937010
> 
> 赞同：0
> 
> 时间：2012-06-07T17:42:39.557
> 
> 标签：licensing, gpl

我创建了一个产品，我喜欢在我的产品中包含另一个开发人员的源代码，该源代码在 GPLv2 下可用。

我想问的是：

我可以在我的产品中嵌入其他 GPLv2 代码吗？如果可以，如何？（我的意思是，是否有任何特殊规则可以根据许可证执行此操作）

我是否必须使用 GPLv2 许可证共享我的产品？我是否可以免费分享我的产品？

我知道这个地方可能不是这个问题的最佳选择，但我不知道我还能在哪里提出这个问题。如果有更好的地方告诉我去。

很抱歉在这里问，但 GPLv2 没有以我的母语提供，因此我无法理解所描述的大部分规则。

亲切的问候梅里亚诺斯尼科斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T17:51:57.580

如果您使用 GPLv2 代码，您必须在 GPLv2 或 GPLv3 下发布您自己的程序。在继续之前，您*必须*完全了解其中一个许可证，否则您将来可能会遇到不必要的问题。

简而言之：

*   您必须向所有客户发布程序的源代码。您无需将其发布给其他任何人。
*   您可以为软件收费，但是：
*   您的客户将被允许免费复制和使用您的程序。
*   您的客户也可以将您的整个程序的副本提供或出售给其他人，包括源代码（在相同的 GPL 许可下）。
*   他们将有权对您的程序进行更改并重新编译。他们可以根据需要复制和/或出售更改（在相同的 GPL 许可下）。

你不能限制这一点。您不能有任何合同规定客户必须为他们自己的副本付费（此类合同不适用于 GPL 许可软件）。这意味着您实际上可能只能将第一个副本出售给任何单个客户，因为他们可以自由地为自己制作更多副本（他们也可以将软件复制给其他人）。

# tsql - 导出所有不在比较表中

> ID：10937014
> 
> 赞同：0
> 
> 时间：2012-06-07T17:43:09.150
> 
> 标签：tsql, common-table-expression

几年来，我一直在使用以下导出查询 (CTE)，但客户要求我们不要向他们提供“C”行中的所有数据，因为他们不需要某些数据。我有他们不需要的所有原告姓名，但我不知道如何调整查询以排除他们不需要的原告姓名。并且如下所示使用 NOT IN 没有用，我猜我错过了一些东西！

```
SELECT 4 AS grpOrd
    , null AS posInGrp
    , 'C'
    , A.CaseNumberKey
    , 'C|' + IsNull(J.CType, '') + '|' + IsNull(J.plaintiffName,'') + '|' + IsNull(J.plaintiffAdd1, '') + '|' + IsNull(J.plaintiffCity, '') + '|' + IsNull(J.plaintiffState, '') + '|' + IsNull(J.plaintiffZip, '') + '|' + '|' + IsNull(J.defendantName, '') + '|' + IsNull(J.defendantAdd1, '') + '|' + IsNull(J.defCity, '') + '|' + IsNull(J.defState, '') + '|' + IsNull(J.defZip, '') + '|' +  '|' + IsNull(J.Court, '') + '|' + IsNull(J.CaseID, '') + '|' + IsNull(J.JAmt, '') + '|' + IsNull(replace(convert(VarChar(10), JDate, 101), '/', ''), '') + '|' + IsNull(replace(convert(VARCHAR(10), revivedDate, 101), '/', ''), '') AS Extract
FROM   newCityCollection.dbo.PropertyInformation A 
JOIN   Acme.new_judgment_system.dbo.selected_compiled_clean J 
    ON J.CaseNumber = A.CaseNumberKey
WHERE  A.DateFinished BETWEEN @PeriodStart AND @PeriodEnd 
    AND ClientKey = 2 
    AND (J.plaintiffName NOT IN (SELECT Plaintiff FROM dbo.excluded_Plaintiffs)) 
```

`dbo.excluded_Plaintiffs`当我尝试运行它时，我得到了无效的对象名称。请注意，这是 CTE 的最底部，它有很多行，但问题仅在最后一行。

他们不想要的普通原告的一个例子是`'PHILA TRAFFIC COURT'`

是否可以调整上述内容以检查表格（excluded_Plaintiffs）并排除该数据？我试过无济于事，希望有人能给出答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:58:11.187

好吧，我回答了我自己的问题。我错过了 dbo.excluded_Plaintiffs 这一行中的数据库。应该写成 newCityCollection.dbo.excluded_Plaintiffs。

# spring-mvc - 在 spring mvc portlet 中，一个 portlet/controller 可以有多个 context.xml 文件吗？

> ID：10937018
> 
> 赞同：0
> 
> 时间：2012-06-07T17:43:31.723
> 
> 标签：spring-mvc

我在一次采访中被问到这个问题。我说不，然后他问我如何访问其他 portlet 控制器。我是 spring 新手，我知道在应用程序上下文文件中，我们的 bean 只不过是控制器及其相应的依赖项......定义如下：

```
<bean id="projectProfileSummaryController" class="com.ca.beacon.implproject.controllers.ProjectProfileSummaryController">
        <property name="restTemplateBuilder" ref="restTemplateBuilder"/>
        <property name="implementProjectService" ref="implementProjectService"/> 
```

以及他们在视图解析器中定义的视图。

我是对还是错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:37:22.957

首先，一个portlet 可以有多个控制器类。

其次，根据[FrameworkPortlet 的文档](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/portlet/FrameworkPortlet.html)（父类`DispatcherPortlet`）：

> 将“contextConfigLocation”portlet init-param 传递给上下文实例，将其解析为可能由任意数量的逗号和空格分隔的多个文件路径，例如“test-portlet.xml, myPortlet.xml”。如果没有明确指定，上下文实现应该从 portlet 的名称空间构建一个默认位置。

所以是的，一个portlet 可以有多个上下文xml 文件。

# javascript - Javascript/html：如何存储 div，并在以后隐藏其子项

> ID：10937022
> 
> 赞同：-1
> 
> 时间：2012-06-07T17:44:03.540
> 
> 标签：javascript, jquery, html

我正在存储一个被选中的 div

```
var selectedCell = null;
    $(".selectableBox").on('click', function (event) {
            selectedCell = $(this);
        } 
```

稍后我想隐藏一个 selectableCell 的子名称 selectableCellChild

```
$('#deleteConfirmed').on('click', function (event) {

    selectedCellList.($'selectableCellChild').hide();
}); 
```

如何正确隐藏此子 div？我知道上面示例的语法不正确，我已经尝试了很多方法，包括使用 selectedCellList 的 children() 和 next() 方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T17:46:05.750

```
selectedCellList.find('{selectableCellChild}').hide(); 
```

where`selectableCellChild`是单元格实际选择器的占位符。

> 我已经尝试了很多方法，包括使用**children()**和**next()**

*   `children`- 只遍历一层。
*   `find`- 深入遍历所有 DOM 级别。
*   `next`选择下一个直接兄弟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T17:45:21.870

使用`.find`.

```
selectedCellList.find('selectableCellChild').hide(); // I hope selectableCellChild isn't your real selector, it won't work 
```

此外，在声明变量时，请将其设为 jQuery 对象，因为您打算在其中存储一个 jquery 对象以避免未定义的方法错误。

```
var selectedCell = $(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T17:46:17.240

对于第二部分，这就是您想要的：

```
$('#deleteConfirmed').on('click', function (event) {
    $(selectedCellList).find('.selectableCellChild').hide();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T17:48:26.113

如果我理解正确，您正试图隐藏单击的 div 的子级。尝试如下，

```
var selectedCell = null;
$(".selectableBox").on('click', function (event) {
   selectedCell = $(this);
}); //Your missed );

$('#deleteConfirmed').on('click', function (event) {
   //v-- Changed from selectedCellList to selectedCell as this is the clicked div.
   selectedCell.find('.selectableCellChild').hide(); 
   //assuming selectableCellChild-^ is class of child elements in the clicked div
}); 
```

# iphone - 如何在 iOS 上使用 OpenCV 对 CGImage 进行二值化？

> ID：10937024
> 
> 赞同：0
> 
> 时间：2012-06-07T17:44:10.990
> 
> 标签：iphone, ios, ios5, image-processing, opencv

在我的 iOS 项目中，我有一个 RGB 格式的 CGImage，我想对其进行二值化（转换为黑白）。我想使用 OpenCV 来做到这一点，但我是 OpenCV 的新手。我找到了一本关于 OpenCV 的书，但它不适用于 iPhone。

如何在 iOS 上使用 OpenCV 对这样的图像进行二值化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T20:11:56.797

如果您不想在您的 iOS 项目中设置 OpenCV，我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架中有两个用于图像二值化的阈值过滤器，一个简单阈值和一个基于像素附近局部亮度的自适应阈值。

您可以对图像应用一个简单的阈值，然后使用如下代码提取生成的二值化 UIImage：

```
UIImage *inputImage = [UIImage imageNamed:@"inputimage.png"];    
GPUImageLuminanceThresholdFilter *thresholdFilter = [[GPUImageLuminanceThresholdFilter alloc] init];
thresholdFilter.threshold = 0.5;
UIImage *thresholdFilter = [thresholdFilter imageByFilteringImage:inputImage]; 
```

（如果您的应用程序中不使用 ARC，请释放上述过滤器）

如果您希望将此图像显示到屏幕上，可以将阈值输出发送到 GPUImageView。如果您愿意，您还可以使用这些过滤器处理实时视频，因为它们完全在 GPU 上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T19:40:19.040

看看[`cv::threshold()`](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html#cv-threshold)adn pass *thresholdType*为`cv::THRESH_BINARY`：

```
double cv::threshold(const cv::Mat& src, 
                     cv::Mat& dst, 
                     double thresh, 
                     double maxVal, 
                     int thresholdType) 
```

[此示例](https://stackoverflow.com/questions/6594941/convert-image-document-to-black-and-white-with-opencv/6612237#6612237)使用 OpenCV 的 C 接口将图像转换为黑白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T11:12:24.367

您要做的是去除低变化率并留下高变化率，这是一个高通滤波器。我只有音频信号处理方面的经验，所以我真的不知道您可以使用哪些选项，但这就​​是我要寻找的方向。

# jquery - 从 Google 图书解析 JSON 对象

> ID：10937027
> 
> 赞同：1
> 
> 时间：2012-06-07T17:44:12.603
> 
> 标签：jquery, json, getjson

我正在尝试生成这样的书单：

[https://google-developers.appspot.com/books/examples/viewability-with-callback](https://google-developers.appspot.com/books/examples/viewability-with-callback)

来自使用 Google 的 Google 图书 API 的 JSON 对象。

我之前只使用过带有 YQL 的 JSON，并且我已经解析了这样的结果：

```
$.each(data.query.results.row, function (i, item) { 
```

正如我在这里所做的那样 [http://jsfiddle.net/nathanbweb/U2QWY/4/](http://jsfiddle.net/nathanbweb/U2QWY/4/)

但是对于 Google 图书，JSON 对象包含唯一的 ISBN 作为对象，因此我无法以相同的方式解析它们：

```
$.each(data.ProcessGBSBookInfo.[[uniqueisbn]], function (i, item) { 
```

我怎样才能做到这一点？我的小提琴在这里：http: [//jsfiddle.net/5tWQh/](http://jsfiddle.net/5tWQh/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T17:50:39.760

这是你的小提琴更新正常工作：http: [//jsfiddle.net/5tWQh/1/](http://jsfiddle.net/5tWQh/1/)

我更改了您的 url 以允许正确的 JSONP 回调处理，然后修改 $.each 以使其遍历返回的 isbn 数字。

```
$.getJSON('http://books.google.com/books?jscmd=viewapi&bibkeys=0596000278,00-invalid-isbn,ISBN0765304368,0439554934&callback=??', function(data) {
...
$.each(data, function(i, item) {... 
```

# javascript - Collection.get 在backbone.js 中返回未定义

> ID：10937031
> 
> 赞同：1
> 
> 时间：2012-06-07T17:44:38.823
> 
> 标签：javascript, backbone.js

我对 collection.get 和 model.get 返回未定义有疑问。

这是我的初始化代码

```
initialize: function () {
    this.collection = new productsCollection();
    this.model = new productModel();
} 
```

这是我的渲染代码

```
this.collection.fetch({
    success: function (product) {
        console.log(product);
        $(that.el).html(_.template(productListTemplate, { products: product.models, _: _ }));
    }
}); 
```

我的产品列表显示正常。当我点击每个产品时，我会弹出一个可以更改名称的弹出窗口

我想在模型中获取设置的新名称并触发保存

但我无法获得产品的型号这里是代码

```
$("#productName").val($(e.currentTarget).html());

var ID = $(e.currentTarget).data("id");
var item = this.collection.get(ID);

console.log("start..........");
console.log(item);
console.log(ID)
//            console.log(this.collection);
console.log(this.model.get(item));
console.log("end..........");

$('.modal').modal('toggle'); 
```

我能够在控制台中获得正确的 ID，但不能在集合和模型中获得

有人可以帮忙提前谢谢

***UPDATE*** 这里是完整的视图代码

```
function ($, _, Backbone, popupModal, productTab, productsCollection, productListTemplate, productModel) {
    var productListView = Backbone.View.extend({
        el: $("#page"),
        initialize: function () {
            this.collection = new productsCollection();
            this.model = new productModel();
            this.model.bind('change', this.loadResults, this);
        },
        render: function () {
            this.loadResults();
        },
        loadResults: function () {
            var that = this;
            this.collection.fetch({
                success: function (product) {
                    console.log(product);
                    $(that.el).html(_.template(productListTemplate, { products: product.models, _: _ }));
                }
            });
            var modalWindow = $(".modal").modal({
                show: false,
                backdrop: true,
                closeOnEscape: true
            });
            $('#createProduct').click(function (e) {
                this.modalWindow.modal('show');
            });
        },
        // This will simply listen for scroll events on the current el
        events: {
            "click #saveProduct": "saveProduct",
            "click .productTabs": "productTabs",
            "click .productDetails": "productDetails"
        },
        saveProduct: function () {
            this.model.set({
                Name: $('#productName').val()
            });
            this.model.save({ id: this.model.get('id') },
         {
             success: function (model, response) {
                 //                 console.log("success");
             },
             error: function (model, response) {
                 //                 console.log(response);
                 var errorMsg = JSON.parse(response.responseText);
                 $(".errorMessage").html('<div class="alert alert-error">' + errorMsg.Error + '</div>');
             }
         });
        },
        productTabs: function (e) {
            e.preventDefault();
            $(this).tab('show');
        },
        productDetails: function (e) {
            e.preventDefault();
            $("#productName").val($(e.currentTarget).html());
            var ID = $(e.currentTarget).data("id");
            var item = this.collection.get(ID);
            console.log("start..........");
            console.log(item);
            console.log(ID)
            //            console.log(this.collection);
            console.log(this.collection.models.get(item));
            console.log("end..........");
            $('.modal').modal('toggle');
        }
    });
    return new productListView;
}); 
```

**更新**响应

*this.collection*

```
b.hasOwnProperty.e
_byCid: Object
_byId: Object
_onModelEvent: function () { [native code] }
_removeReference: function () { [native code] }
length: 2
models: Array[2]
0: b.hasOwnProperty.e
1: b.hasOwnProperty.e
length: 2
__proto__: Array[0]
__proto__: s​ 
```

它有 2 个型号，我的列表也有 2 个产品

*这个.model*

```
_callbacks: Object
_changed: false
_changing: false
_escapedAttributes: Object
_previousAttributes: Object
attributes: Object
ID: ""
Name: ""
hRef: ""
__proto__: Object
cid: "c2"
__proto__: s 
```

属性为空

*这*给了我以下

```
cid: "view1"
collection: b.hasOwnProperty.e
_byCid: Object
_byId: Object
_onModelEvent: function () { [native code] }
_removeReference: function () { [native code] }
length: 2
models: Array[2]
__proto__: s
model: b.hasOwnProperty.e
_callbacks: Object
_changed: false
_changing: false
_escapedAttributes: Object
_previousAttributes: Object
attributes: Object
cid: "c2"
__proto__: s
options: Object
__proto__: s 
```

**更新**这是我扩展收藏时看到的

```
b.hasOwnProperty.e
_byCid: Object
_byId: Object
_onModelEvent: function () { [native code] }
_removeReference: function () { [native code] }
length: 2
models: Array[2]
0: b.hasOwnProperty.e
_callbacks: Object
_changed: false
_changing: false
_escapedAttributes: Object
_previousAttributes: Object
attributes: Object
ID: "7e0c94fc-7c16-45c9-84a9-a0690103b946"
Name: "dsa"
hRef: "Product/dsa"
__proto__: Object
cid: "c3"
collection: b.hasOwnProperty.e
__proto__: s
1: b.hasOwnProperty.e
length: 2
__proto__: Array[0]
__proto__: s 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:00:58.590

问题是您必须将所有将由 DOM 事件调用的函数绑定到您的视图实例：

因此，将此行添加到您的`initialize`方法中：

```
_.bindAll(this, "saveProduct", "productTabs", "productDetails") 
```

否则`this`在函数中将是全局`window`对象而不是视图的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T07:26:39.880

如果

```
Collection.findWhere({_id: ID}) // get the right answer 
```

我们可以得出结论：

*   到Model，关键是[**idAttribute**](http://backbonejs.org/#Model-idAttribute)
*   到Collection，关键是[**modelId**](http://backbonejs.org/#Collection-modelId)

* * *

例如 ：

```
var Model = Backbone.Model.extend();
var Col = Backbone.Collection.extend({ model: Model });

var Persons = new Col([{
    _id: 1,
    name: 'Ken'
}, {
    _id: 2,
    name: 'Mike'
}, {
    _id: 3,
    name: 'John'
}]);

console.log( Persons.get(1) ); // undefined 
```

如果表示 M 的**idAttribute**：

```
var M = Backbone.Model.extend({ idAttribute: '_id' });
...
console.log( Persons.get(1) ); // the model of Ken 
```

* * *

在某些情况下我们不需要 Model，例如：

```
var Col = Backbone.Collection.extend();

var Persons = new Col([{
    _id: 1,
    name: 'Ken'
}, {
    _id: 2,
    name: 'Mike'
}, {
    _id: 3,
    name: 'John'
}]);

console.log( Persons.get(2) ); // undefined 
```

为了解决这个问题，我们只需要重写原来的**modelId**方法：

```
var Col = Backbone.Collection.extend({
    modelId: function() {
        return '_id';
    }
});
...
console.log( Persons.get(2) ); // the model of Mike 
```

* * *

* * *

PS：[官方文档](http://backbonejs.org/#Collection-modelId)中有更多详细信息。

* * *

再次 PS：BackboneJS 的旧版本不支持**modelId**

# asp-classic - 在数据库中存储 ASP VBScript 和 HTML 的混合物

> ID：10937032
> 
> 赞同：1
> 
> 时间：2012-06-07T17:44:46.333
> 
> 标签：asp-classic

我试图摆脱应用程序的 HTML 文件并将其内容存储在数据库中。问题是，这些文件中混合了经典的 ASP/VBscript 代码和 HTML。

因此，例如，除了常规 HTML 之外，还有以下内容：

```
Your name is <%=sYourName%> 
```

和

```
<% If .... Then %>
<p>blah blah blah</p>
<% End If %> 
```

当它从数据库中提取并输出到浏览器时，不会解析 ASP/VBScript 代码，因此它会显示为常规文本。

所以我的问题是，有没有办法将这种 ASP/HTML 混合存储在数据库中并获得正确的输出到浏览器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:33:29.067

首先让我警告**不要这样做**。

ASP 需要一个文件来处理 ASP 脚本，无法从 DB 中读取文本然后直接将其作为 ASP 脚本执行。

但是，您可以从数据库中读取文本并将其写入网站物理文件夹下的临时文件，然后用户`Server.Execute`运行它。（**编辑**或参考您在问题评论中的说明，您可以将 XSL 输出到文件，然后服务器执行该文件）。

也就是说，这似乎是一件疯狂的事情。暴露于恶意使用本身就使其开始变得不明智。我也不确定这比仅仅从物理文件开始有什么优势。

# debugging - 如何打破 ollydbg 调试器？

> ID：10937033
> 
> 赞同：0
> 
> 时间：2012-06-07T17:44:46.623
> 
> 标签：debugging, ollydbg

我真的是调试新手，调试不是我的强项，所以我不会让任何人感到困惑，我不是在问如何`breakpoint`使用 ollydbg 在程序中设置 a，但这个功能`break`有点类似于`break`在 Visual c++ 调试器中调试程序时可用，这在 ollydbg 中是否可用？

如果是那么我该怎么做呢？或者如果不是，那么我还能做些什么来模拟`break`使用 ollydbg WIN32 调试器的程序中的 a 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T17:23:58.100

如果您的意思是 Visual Studio 调试器的“Break all”功能，它会挂起所有线程并将光标设置到当前正在执行的源代码行（或其中之一，至少，您可以使用线程选项卡来更改线程） ...
... 那么这类似于 OllyDbg 暂停函数，它再次暂停所有线程并将光标设置为正在执行的指令。

要在线程之间切换，您只需打开线程视图 (alt+t) 并在所需线程上按 Enter。这会将您带到该线程的 EIP。

# php - 分页链接返回相同的条目

> ID：10937034
> 
> 赞同：0
> 
> 时间：2012-06-07T17:44:47.877
> 
> 标签：php, expressionengine

为了让我正确地进行分页，我不得不制作两个单独的循环，不幸的是它一遍又一遍地显示相同的两个条目，无论页面如何。我怎样才能解决这个问题？

```
 <section id="{embed:chan}" class="product-content">
        <div class="wrap">

            <hgroup>
                <h1>{embed:title}</h1>

                {embed="products/.sub-nav"}

            </hgroup>

            <ul class='list-column-3'>
            {exp:channel:entries channel="{embed:chan}" category="{embed:cat_id}" status="{embed:stat}" limit="{embed:limt}" paginate="bottom"}

                <li>
                    <article>

                        {if no_results}<p>No Products in this Channel, check channel info?</p>{/if}
                        {if product_blurb_image}<img src="{product_blurb_image}" alt="{title}" />{/if}

                        <h1>{title}</h1>
                        <p>{product_blurb}</p>

                    </article>
                    <a class='red-btn' href="{comment_url_title_auto_path}">Learn More</a>
                </li>

                {!-- The below is needed for a true 3 column layout --}
                {switch="||</ul><ul class='list-column-3'>"}

            {/exp:channel:entries}
            </ul>

            <ul class="product-pager">
            {exp:channel:entries channel="{embed:chan}" category="{embed:cat_id}" status="{embed:stat}" limit="{embed:limt}" paginate="bottom"}
                {paginate}
                    {pagination_links}

                        {previous_page}
                            <li><a class="prev ir" href="{pagination_url}">&nbsp;</a></li>
                        {/previous_page}

                        {page}
                            <li><a href="{pagination_url}" class="{if current_page}curr{/if}">{pagination_page_number}</a></li>
                        {/page}

                        {next_page}
                            <li><a class="next ir" href="{pagination_url}">&nbsp;</a></li>
                        {/next_page}

                    {/pagination_links}
                {/paginate}
            {/exp:channel:entries}
            </ul>

            <div class="clear"></div>  

        </div>
    </section><!--/{embed:chan}--> 
```

**更新**

当只有一页或没有页面时，除了愚蠢的结束 UL 标记外，我什么都有....

```
 <section id="{embed:chan}" class="product-content">
            <div class="wrap">

                <hgroup>
                    <h1>{embed:title}</h1>

                    {embed="products/.sub-nav"}

                </hgroup>

                <ul class='list-column-3'>
                {exp:channel:entries channel="{embed:chan}" category="{embed:cat_id}" status="{embed:stat}" limit="{embed:limt}" paginate="bottom"}

                    <li>
                        <article>

                            {!-- I could put the closing </ul> here, but then it'd only show if there was nadda' --}    

                            {if no_results}<p>No Products in this Channel, check channel info?</p>{/if}
                            {if product_blurb_image}<img src="{product_blurb_image}" alt="{title}" />{/if}

                            <h1>{title}</h1>
                            <p>{product_blurb}</p>

                        </article>
                        <a class='red-btn' href="{comment_url_title_auto_path}">Learn More</a>
                    </li>

                    {!-- The below is needed for a true 3 column layout --}
                    {switch="||</ul><ul class='list-column-3'>"}

                    {paginate}

                        {!-- Close last "list-column-3" open "product-pager" --}    
                        </ul><ul class="product-pager">
                        {pagination_links}

                            {previous_page} <li><a class="prev ir" href="{pagination_url}">&nbsp;</a></li> {/previous_page}

                            {page} <li><a href="{pagination_url}" class="{if current_page}curr{/if}">{pagination_page_number}</a></li> {/page}

                            {next_page} <li><a class="next ir" href="{pagination_url}">&nbsp;</a></li> {/next_page}

                        {/pagination_links}
                        </ul>

                        {!-- This should work, but doesn't --}
                        {if "{total_pages}" == 1} </ul> {/if}

                    {/paginate}

                {/exp:channel:entries}

                <div class="clear"></div>  

            </div>
        </section><!--/{embed:chan}--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:42:00.710

这应该适合你：

```
{exp:channel:entries channel="{embed:chan}" category="{embed:cat_id}" status="{embed:stat}" limit="{embed:limt}" paginate="bottom"}
{if no_results}<p>No Products in this Channel, check channel info?</p>{/if}
{switch='<ul class="list-column-3">||'}
    <li>
        <article>
            {if product_blurb_image}<img src="{product_blurb_image}" alt="{title}" />{/if}
            <h1>{title}</h1>
            <p>{product_blurb}</p>
        </article>
        <a class="red-btn" href="{comment_url_title_auto_path}">Learn More</a>
    </li>
{switch="||</ul>"}
{paginate}
    <ul class="product-pager">
    {pagination_links}
        {previous_page}<li><a class="prev ir" href="{pagination_url}">&nbsp;</a></li>{/previous_page}
        {page}<li><a href="{pagination_url}" class="{if current_page}curr{/if}">{pagination_page_number}</a></li>{/page}
        {next_page} <li><a class="next ir" href="{pagination_url}">&nbsp;</a></li> {/next_page}
    {/pagination_links}
    </ul>
{/paginate}
{/exp:channel:entries} 
```

# c++ - 标准和“异国情调”图标

> ID：10937035
> 
> 赞同：3
> 
> 时间：2012-06-07T17:44:51.647
> 
> 标签：c++, qt, qt4, icons

我正在尝试将 Qt 中的标准图标用于 QToolButton 但我遇到了问题。我的代码是：

```
m_buttonZoomPlus->setIcon(QStyle::standardIcon(QStyle::SP_DesktopIcon)); 
```

我收到错误消息：

> 不能在没有对象的情况下调用成员函数 'QIcon QStyle::standardIcon(QStyle::StandardPixmap, const QStyleOption*, const QWidget*) const'

这是什么意思？我是否必须创建一个空的 QStyle 对象并在其上调用 standardIcon 函数？

此外，我在这里找到了标准图标列表：http: [//doc.trolltech.com/main-snapshot/qstyle.html#StandardPixmap-enum](http://doc.trolltech.com/main-snapshot/qstyle.html#StandardPixmap-enum)

这个列表是详尽的还是有其他标准图标？我正在寻找例如放大/缩小图标，但我还没有找到它。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T17:49:35.663

这意味着`standardIcon`不是静态方法，因此您不能那样调用它。您需要构造 a`QStyle`并对其进行适当的初始化，然后您可以使用该方法来获取特定的图标。

**编辑：**杰里米是对的。如果您不更改样式或定义自己的样式，则可以简单地使用以下内容：

```
QApplication::style()->standardIcon(QStyle::SP_DesktopIcon); 
```

参考：[http ://doc.qt.io/qt-5/qstyle.html#standardIcon](http://doc.qt.io/qt-5/qstyle.html#standardIcon)

# php - Codeigniter HMVC - 两个模块将相同的变量名传递给它们的视图并导致冲突

> ID：10937037
> 
> 赞同：1
> 
> 时间：2012-06-07T17:45:04.400
> 
> 标签：php, codeigniter, variables, hmvc

我的安装中有两个模块。两个模块的控制器都传递了一个名为

```
$data['content'] 
```

对他们的看法。此外，第一个模块的视图通过运行第二个模块

```
<?php echo Modules::run('module2'); ?> 
```

之后应该显示其 $data['content'] 变量中的值。不幸的是，此时第一个模块的 $data 内容被第二个模块的 $data 替换。这对我来说很不方便，所以我想知道是否有一种方法可以“保护” $content 变量并将它们仅保留在其关联的模块中？

如果可能，我想避免重命名 $data['content'] 。我在使用中找到了一个不太完美的解决方案

```
$data(__CLASS__) 
```

但我很好奇是否可以不更改 $data['content']。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:42:35.857

```
class Some extends MX_Controller{

    public function __construct(){parent::__construct();}

    public function index(){
        $this->load->view('template', array( //Primary template
            'content'    =>  'some_index' // index view
        ));
    }

    public function _module_1(){
      $this->load->view('module_1_view', array( //Module View : NO primary template
            ''    =>  '' <= no need to load view here, only data
        ));
    }

    public function _module_2(){
      $this->load->view('module_2_view', array( //Module View : NO primary template
            ''    =>  '' <= no need to load view here, only data
        ));
    }
} 
```

-

**模板.php**

```
<html>
  <?php $this->load->view($content); ?>
</html> 
```

-

**some_index.php**

```
<html>

//call modules
<?php echo Modules::run('some/_module_1'); ?>

<?php echo Modules::run('some/_module_2'); ?>

//call module from another class
<?php echo Modules::run('another_class/_module_1'); ?>

</html> 
```

# sql - 在 Oracle 中，为什么 '' = '' 是假的？

> ID：10937040
> 
> 赞同：6
> 
> 时间：2012-06-07T17:45:10.980
> 
> 标签：sql, oracle, oracle11g

这个问题来自我之前[的帖子](https://stackoverflow.com/questions/10936176/searching-for-text-in-a-database-with-entity-framework)。

我很好奇为什么：

```
select * from TPM_USER where '' = '' 
```

返回零行，但是：

```
select * from TPM_USER where 1 = 1 
```

返回表中的每一行。这是每个 SQL 标准，还是 Oracle 特定的？

Oracle [SQL 小提琴](http://sqlfiddle.com/#!4/74757/5)。

以下工作按预期进行：

PostgreSQL [SQL 小提琴](http://sqlfiddle.com/#!1/66640/1)

SQL Server [SQL 小提琴](http://sqlfiddle.com/#!3/66640/1)

mySQL [SQL 小提琴](http://sqlfiddle.com/#!2/66640/1)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T17:54:41.157

Oracle 不区分空字符串和`NULL`.

这就是为什么推荐的字符串数据类型是`VARCHAR2`而不是`VARCHAR`：后者应该做这种区分，但目前没有。

在使用的三价逻辑中`SQL`，`NULL = NULL`（在 Oracle 中是 的同义词`'' = ''`）评估为`NULL`(not `FALSE`but `NULL`)，因此被`WHERE`子句过滤掉。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T17:47:17.003

在 Oracle 中，[空字符串等同于 NULL](https://stackoverflow.com/questions/203493/why-does-oracle-9i-treat-an-empty-string-as-null)。您[不使用`=`NULL 值](http://thinkoracle.blogspot.com/2005/06/nulls-in-oracle.html)。

# asp.net-mvc-3 - 在 GET 上显示验证消息

> ID：10937050
> 
> 赞同：2
> 
> 时间：2012-06-07T17:45:49.717
> 
> 标签：asp.net-mvc-3, model-view-controller, validation

我们有可能从 GET 操作加载的数据可能对发布无效，并且希望能够在首次加载数据时显示验证消息。验证全部使用 ValidationAttributes 在服务器端进行。

如何在首次加载数据时强制显示验证摘要？我猜我需要以某种方式将错误强制到 ModelState 中，但我首先需要将它们从模型类中取出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T03:55:39.657

我最终为模型类添加了一个验证方法，该方法将错误添加到 ModelState。然后，我创建并添加了一个自定义 ModelValidator 和 AssociatedValidatorProvider，用于在表单绑定期间进行的正常验证期间调用它。这样，不直接绑定到 Model 类的控制器操作仍然可以调用模型的 .Validate(ModelState) 方法来伪造验证。这种方法适用于仅服务器端的验证。

用户信息**模型类**：

```
private IEnumerable<RuleViolation> GetRuleViolations()
{
    List<RuleViolation> violationList = new List<RuleViolation>();

    if (String.IsNullOrWhiteSpace(FirstName)) 
        violationList.Add(new RuleViolation("First Name is required.", FirstName"));

    return violationList;
}

public void Validate(System.Web.Mvc.ModelStateDictionary ModelState)
{
    foreach (RuleViolation violation in GetRuleViolations())
   {
        ModelState.AddModelError(violation.PropertyName, violation.ErrorMessage);
   }
} 
```

这就是它可以直接从**控制器操作中使用的方式。**在此操作中，模型类对象作为 UserSearch 模型的一部分返回。

```
public ActionResult Search(UserSearch model)
{
    if (this.ModelState.IsValid)
    {
        model.Search();
        if (model.UserInfo != null )
        {
            model.UserInfo.Validate(ModelState);
        }
    }... 
```

对于我正在处理的特定用例，这就是我所要做的。但是我继续完成了在回发上进行“正常”验证的工作：创建了一个简单的 ModelValidator，Validate 覆盖看起来像这样。如果您在所有模型类中都遵循上述模式，您可能也可以为它们重用此模式。

```
public override IEnumerable<ModelValidationResult> Validate(object container)
{
    var results = new List<ModelValidationResult>();
    if (Metadata.Model != null)
    {
        UserInfoViewModel uinfo = Metadata.Model as UserInfoViewModel;
        foreach (var violation in uinfo.GetRuleViolations())
        {
            results.Add(new ModelValidationResult
                {
                    MemberName = violation.PropertyName,
                    Message = violation.ErrorMessage
                });
        }
    }
    return results;
} 
```

最后，扩展 AssociatedValidationProvider 以返回此 ModelValidator 并将其添加到 Application_Start 中的 ModelValidationProviders 集合中。在[http://dotnetslackers.com/articles/aspnet/Customizing-ASP-NET-MVC-2-Metadata-and-Validation.aspx#s2-validation上有一篇相关文章](http://dotnetslackers.com/articles/aspnet/Customizing-ASP-NET-MVC-2-Metadata-and-Validation.aspx#s2-validation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:22:33.247

我不知道是否明白你需要什么，但这里是...

使用 jquery 运行验证以在加载表单时显示验证摘要

```
$(document).ready(function() {
    $('#FormId').valid(); 
}); 
```

# css - 输入 [type="submit"]:select CSS 不起作用

> ID：10937051
> 
> 赞同：1
> 
> 时间：2012-06-07T17:45:53.540
> 
> 标签：css, button, submit, onselect

我有一个 .css 样式表，其中包含我的输入类型按钮的样式，如下所示。

```
input[type="submit"]
input[type="submit"]:hover
input[type="submit"]:focus 
```

以上三个工作，但`input[type="submit"]:select`不工作。我什至试过`:selected`。`:visited`, etc是否`:link`适用于`<input type="button" />`and `<input type="submit" />`?

请帮助我如何开始`input[type="submit"]:select`工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T17:51:09.423

阅读[CSS2 伪类规范](http://www.w3.org/TR/CSS2/selector.html#pseudo-class-selectors)和[CSS3 伪类规范](http://www.w3.org/TR/selectors/#pseudo-classes)，你会发现：
没有像你描述的那样的伪类。

你的意图是什么？你想设计什么风格，你想什么时候应用这种风格？也许您正在寻找[`:active`伪类](http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes)？

> *`:active`伪类在用户激活元素时应用。例如，在用户按下鼠标按钮并释放它的时间之间。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T17:49:44.227

因为`:select`不是有效的 CSS 伪类。

# c# - IndexOutOfRangeException C#

> ID：10937052
> 
> 赞同：0
> 
> 时间：2012-06-07T17:45:57.427
> 
> 标签：c#, matrix, indexoutofboundsexception

我的目标是制作一个三重for循环来乘以矩阵X矩阵，我输入矩阵，我必须得到矩阵^ 2。

我收到错误“IndexOutOfRangeException” - 当我调试以下代码时，索引超出了数组的范围：

```
 for (int i = 1; i < nodeList.Count+1; i++)
            {
                for (int j = 1; j < nodeList.Count+1; j++)
                {
                    result[i, j] = "0";

                    for (int k = 1; k < nodeList.Count+1; i++)
                    {

                        if ((matrix[i, k] != null) && (matrix[k, j] != null))
                        {
                            n1 = Convert.ToInt32(matrix[i, k]);
                            n2 = Convert.ToInt32(matrix[k, j]);
                            n3 = Convert.ToInt32(result[i, j]);

                            total = n3 + n1 * n2;
                            _total = total.ToString();

                            result[i, j] = _total;

                        }
                    }
                }
            } 
```

其中变量是： 1\. 类型为 String[,] 的矩阵，维度为 (nodelist+1,nodelist+1) 2.result 与矩阵的类型和维度相同，我想将结果放在其中矩阵 3.nodelist 是我在图 4 中拥有的节点名称的数组。n1、n2、n3 是 int，我将矩阵 5.total 中的转换 int 放入其中。乘法 6._total 将结果矩阵的总 int 转换为总字符串

所以我为每个数组和矩阵设置了正确的维度，但我总是得到同样的错误。我不明白为什么。可以请人帮助注意错误，因为我没有看到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T17:49:13.277

在`k`循环中，您正在递增`i`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T17:49:05.783

for (int k = 1; k < nodeList.Count+1; i++) <-- 你在增加 i，它应该增加 k。

像这样：

for (int k = 1; k < nodeList.Count+1; k++)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T17:48:01.703

数组在 C# 中是从 0 开始的——第一个元素位于位置 0 而不是位置 1。

```
for (int i = 1; i < nodeList.Count+1; i++) 
```

... 应该 ...

```
for (int i = 0; i < nodeList.Count; i++) 
```

您还遇到了 k 循环的复制粘贴错误。

```
for (int k = 1; k < nodeList.Count+1; i++)  // should be k++? 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T17:48:43.180

将 for 循环与数组一起使用的标准方法是使用

`for(int x= 0; x < arry.count ;x++)`

使用 1 和 +1 作为条件将确保您得到一个不受欢迎的索引，因为 c# 数组的索引为 0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T17:59:13.300

如前所述，您在 K 循环中以 i 递增。

此外，每次尝试在循环的最后一次迭代中访问矩阵时，都会出现越界错误。您需要在循环中从 0 变为 Count，或者您需要在所有矩阵运算中添加 -1。前任：

```
results[i-1, j-1] = _total; 
```

矩阵索引从 0 开始。

# powershell - Signtool 允许我签署代码，但 Set-AuthenticodeSignature 说“证书不适合代码签名”

> ID：10937065
> 
> 赞同：14
> 
> 时间：2012-06-07T17:47:35.273
> 
> 标签：powershell, code-signing, signtool

我有一个自签名的代码签名证书，根据[这个答案](https://stackoverflow.com/a/201277/80274)的说明制作，与 一起使用时效果很好`signtool.exe`，但是如果我尝试使用 签名`Set-AuthenticodeSignature`，它会失败。

为什么我可以使用 签名`signtool`，但不能使用`Set-AuthenticodeSignature`？

*   `signtool`：

    ```
    Signtool sign /v /n "VetWeb" SetupRDPPermissions.ps1

      The following certificate was selected:
        Issued to: VetWeb
        Issued by: VetWeb CA
        Expires:   Sat Dec 31 18:59:59 2039
        SHA1 hash: 84136EBF8D2603C2CD6668C955F920C6C6482EE4

      Done Adding Additional Store
      Successfully signed: SetupRDPPermissions.ps1

      Number of files successfully Signed: 1
      Number of warnings: 0 
    ```

*   `Set-AuthenticodeSignature`：

    ```
    $cert = @(Get-Childitem cert:\CurrentUser\My | Where-Object -FilterScript {$_.Subject -eq 'CN=VetWeb'})[0]

    Set-AuthenticodeSignature SetupRDPPermissions.ps1 $cert

      Set-AuthenticodeSignature : Cannot sign code. The specified certificate is not suitable for code signing.
        At line:1 char:26
        + Set-AuthenticodeSignature <<<<  SetupRDPPermissions.ps1 $cert
          + CategoryInfo          : InvalidArgument: (:) [Set-AuthenticodeSignature], PSArgumentException
          + FullyQualifiedErrorId : Argument,Microsoft.PowerShell.Commands.SetAuthenticodeSignatureCommand 
    ```

    *   `Get-Childitem cert:\CurrentUser\My -CodeSigningCert`不返回任何结果

*   ```
     $cert | Format-List *

       PSPath             : Microsoft.PowerShell.Security\Certificate::CurrentUser\My\84136EBF8D2603C2CD6668C955F920C6C6482EE4
       PSParentPath       : Microsoft.PowerShell.Security\Certificate::CurrentUser\My
       PSChildName        : 84136EBF8D2603C2CD6668C955F920C6C6482EE4
       PSDrive            : cert
       PSProvider         : Microsoft.PowerShell.Security\Certificate
       PSIsContainer      : False
       Archived           : False
       Extensions         : {System.Security.Cryptography.Oid}
       FriendlyName       :
       IssuerName         : System.Security.Cryptography.X509Certificates.X500DistinguishedName
       NotAfter           : 12/31/2039 5:59:59 PM
       NotBefore          : 6/1/2012 1:49:31 PM
       HasPrivateKey      : True
       PrivateKey         : System.Security.Cryptography.RSACryptoServiceProvider
       PublicKey          : System.Security.Cryptography.X509Certificates.PublicKey
       RawData            : {48, 130, 1, 235...}
       SerialNumber       : CF330347F35AC0B4427AFFA82DB51238
       SubjectName        : System.Security.Cryptography.X509Certificates.X500DistinguishedName
       SignatureAlgorithm : System.Security.Cryptography.Oid
       Thumbprint         : 84136EBF8D2603C2CD6668C955F920C6C6482EE4
       Version            : 3
       Handle             : 479608336
       Issuer             : CN=VetWeb CA
       Subject            : CN=VetWeb 
    ```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-03T03:42:41.723

我遇到了同样的问题，我想出的答案是我必须[创建两个证书](http://www.hanselman.com/blog/SigningPowerShellScripts.aspx)。首先，一个受信任的根证书颁发机构使用

```
makecert -n "CN=PowerShell Local Certificate Root" -a sha1 -eku 1.3.6.1.5.5.7.3.3 -r -sv root.pvk root.cer -ss Root -sr localMachine 
```

然后使用来自上述证书颁发机构的个人证书

```
makecert -pe -n "CN=PowerShell User" -ss MY -a sha1 -eku 1.3.6.1.5.5.7.3.3 -iv root.pvk -ic root.cer 
```

创建这些后，使用

```
$cert = @(Get-ChildItem cert:\CurrentUser\My -CodeSigning)[0] 
```

用于签名（假设您只有一个代码签名证书）。例如，如果脚本的名称是 xyz.ps1，请在 PowerShell 中使用此命令

```
Set-AuthenticodeSignature path/to/xyz.ps1 $cert 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T20:18:11.143

根据证书提供者的[get-help 证书](http://technet.microsoft.com/en-us/library/dd347615) `-CodeSigningCert`动态参数，仅获取具有代码签名权限的证书。

现在为什么`signtool`可以签名而不可以`Set-AuthenticodeSignature`，解释可能在Microsoft[代码签名简介文档中。](http://msdn.microsoft.com/en-us/library/ms537361%28v=vs.85%29.aspx)

这是我的证书颁发机构生成版本：

```
# Gen-CACert.ps1
clear-host

$scriptBlock = {.\Makecert -n `"CN=PowerShell Authorite de certification`"  <# Sujet du certificat (conforme à la norme X50 #>`
                           -a sha1                                          <# Algorithme utilisé #>`
                           -eku 1.3.6.1.5.5.7.3.3                           <# Option du certificat (signature de code) #>`
                           -r                                               <# Certificat auto signé #>`
                           <# -ss `"$($args[0])`"                              Dossier de stockage du certificat #>`
                           -ss `"root`"                                     <# Dossier de stockage du certificat #>`
                           -sr localMachine                                 <# Magasin de stockage localmachine ou currentuser (defaut) #>`
                           -sv `"$($args[0]).pvk`"                          <# Nom du fichier contenant la clef privée #>`
                           `"$($args[0]).cer`"}                             <# Nom du fichier certificat #>

$PoshCARoot = "PoshCARoot"
Invoke-Command -ScriptBlock $scriptBlock  -ArgumentList $PoshCARoot 
```

这是我的开发证书生成版本：

```
# Gen-DevCert.ps1
clear-host

$scriptBlock = {.\Makecert  -pe                            <# La clef privée est exportable #>`
                            -n `"CN=PowerShell Dev Team`"  <# Sujet du certificat (conforme à la norme X509 #>`
                            -a sha1                        <# Algorithme utilisé #>`
                            -eku 1.3.6.1.5.5.7.3.3         <# Option du certificat (signature de code) #>`
                            -ss `"My`"                     <# Dossier de stockage du certificat #>`
                            -sr currentuser                <# Magasin de stockage localmachine ou currentuser (defaut) #>`
                            -iv `"$($args[0]).pvk`"        <# Clef privée de l'autorité #>`
                            -ic `"$($args[0]).cer`"        <# Certificat de l'autorité #>`
                            `"$($args[1]).cer`"}           <# Nom du fichier certificat #>

$PoshCARoot = "PoshCARoot"
$PoshDevTeam = "PoshDevTeam"
Invoke-Command -ScriptBlock $scriptBlock  -ArgumentList $PoshCARoot,$PoshDevTeam 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-12T15:52:16.080

问题是签名证书格式错误并且缺少正确的 KU 和 EKU。

`openssl`要解决此问题，请使用下面的链接创建一个自签名 CA `openssl.cnf`，一个由自签名 CA 签名的代码签名 ICA，最后是一个由 ICA 签名的代码签名证书

* * *

预建[`openssl.cnf`](https://github.com/JW0914/Wikis/tree/master/Scripts%2BConfigs/OpenSSL)包含从第 430 行开始所需的所有信息和命令：

1.  **先决条件：**
    *   ***Windows*：**安装[OpenVPN](https://openvpn.net/index.php/open-source/downloads.html)（包括`openssl-utils`）
        *（添加到系统`PATH`：）`%ProgramFiles%\OpenVPN\bin`*
    *   ***BSD/Linux* :**安装`openssl`|| `openssl-utils`|| [编译](https://wiki.openssl.org/index.php/Compilation_and_Installation)
2.  **创建 CA：**

    ```
    # CA key should have a secure passphrase of at least 20 characters, containing 
    # at least 2 uppercase, 2 lowercase, 2 numbers, and 2 symbols

    # PreReqs: Create files crlnumber, index, rand, & serial
      mkdir cert crl 
      echo 01 > crl\crlnumber ; echo > index ; echo > rand ; echo 00 > serial

    # Create CA:
      openssl req -x509 -new -sha512 -days 3650 -newkey rsa:4096 -keyout "CA.key.pem" -out "CA.crt.pem" -config "openssl.cnf" -extensions v3_ca 
    ```

3.  **创建 ICA：**

    ```
    # ICA key should have a secure passphrase of at least 20 characters, containing 
    # at least 2 uppercase, 2 lowercase, 2 numbers, and 2 symbols

    # Request:
      openssl req -out "code-signing-ICA.csr" -new -days 3650 -sha512 -newkey rsa:4096 -keyout "code-signing-ICA.key" -config "openssl.cnf" -extensions v3_signing_ica

    # Sign:
      openssl x509 -req -sha512 -days 3650 -in "code-signing-ICA.csr" -CA "CA.crt.pem" -CAkey "CA.key.pem" -CAserial "serial" -out "code-signing-ICA.crt.pem" -extfile "openssl.cnf" -extensions v3_signing_ica

      # Create Concatenated CA - ICA Cert Chain:
        # Windows:
          cmd /c type "code-signing-ICA.crt.pem" "CA.crt.pem" > "code-signing-ICA-Chain.crt.pem"

        # BSD/Linux:
          cat "code-signing-ICA.crt.pem" "CA.crt.pem" > "code-signing-ICA-Chain.crt.pem" 
    ```

4.  **创建签名证书：**

    ```
    # Request:
      openssl req -out "code-signing.csr" -new -days 3650 -sha512 -newkey rsa:2048 -keyout "code-signing.key.pem" -config "openssl.cnf" -extensions v3_codesign

    # Sign:
      openssl x509 -req -sha512 -days 3650 -in "code-signing.csr" -CA "code-signing-ICA-chain.crt.pem" -CAkey "code-signing-ICA.key.pem" -CAserial "serial" -out "code-signing.crt.pem" -extfile "openssl.cnf" -extensions v3_codesign

    # Export:
      openssl pkcs12 -export -out "code-signing.p12" -inkey "code-signing.key.pem" -in "code-signing.crt.pem" -certfile "code-signing-ICA-chain.crt.pem" 
    ```

* * *

### [OpenSSL KU 和 EKU](https://superuser.com/a/1248085/529800)

代码签名证书应具有以下设置：

*   ```
    keyUsage  = critical, nonRepudiation, digitalSignature 
    ```

    *   **`nonRepudiation`：**
        证书可用于对上述数据进行签名，但证书公钥可用于提供不可否认服务
        *（防止签名实体错误地拒绝某些操作）*
    *   **`digitalSignature`：**
        证书可用于应用数字签名
        *（用于实体认证和数据源完整性认证）*

*   ```
    extendedKeyUsage  = critical, codeSigning, msCodeInd, msCodeCom, mcCTLSign, timeStamping 
    ```

    *   **`codeSigning`:**
        代码签名
    *   **`msCodeInd`:**
        Microsoft 个人代码签名 (authenticode)
    *   **`msCodeCom`:**
        微软商业代码签名 (authenticode)
    *   **`mcCTLSign`:**
        微软信任列表签名
    *   **`timeStamping`:**
        可信时间戳

* * *

### [`SignTool`](https://docs.microsoft.com/en-us/dotnet/framework/tools/signtool-exe)

先决条件：

1.  安装[Windows SDK](https://developer.microsoft.com/en-us/windows/downloads/sdk-archive)
2.  **`[![WinKey](../Images/39686981dadab97559d4ce79a621f076.png)](https://i.stack.imgur.com/8NWKd.png)`+`R`** → `sysdm.cpl`→ 确定
    *高级*→*环境变量...* →*系统变量*→*路径*→*编辑...*
3.  添加到路径：`%ProgramFiles(x86)%\Windows Kits\10\bin\10.0.15063.0\x64`
    *   确保`\10\bin\10.0.15063.0\x64`反映您的 Windows 版本的正确路径

```
# Establish $TS variable:
  Set-Variable -Name TS -Value "http://sha256timestamp.ws.symantec.com/sha256/timestamp" -Scope "Global"

# Sign:
  SignTool sign /s "MY" /fd "SHA256" /ph /td "SHA256" /tr $TS "Path\to\File" 
```

*   **`sign`:**
    使用嵌入签名对文件进行签名
*   **`/s`*`<name>`：***
    指定搜索证书时要打开的商店*（默认：`MY`商店）*
*   **`/fd`：**
    指定用于创建文件签名的文件摘要算法*（默认值：SHA1）*
*   **`/ph`:**
    如果支持，为可执行文件生成页面哈希
*   **`/td`*`<alg>`*:**
    用于`/tr`或`/tseal`请求 RFC3161 时间戳服务器使用的摘要算法
*   **`/tr`*`<URL>`*:**
    指定 RFC3161 时间戳服务器的 URL *（如果时间戳失败会产生警告）*
    *   如果未指定`/tr`或未`/t`指定，则签名文件将不加时间戳

* * *

### [电源外壳](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.security/set-authenticodesignature)

```
# Establish $cert variable:
  $cert = Get-PfxCertificate -FilePath "Path\to\Signing\Cert"

# Establish $TS variable (if not already set above):
  Set-Variable -Name TS -Value "http://sha256timestamp.ws.symantec.com/sha256/timestamp" -Scope "Global"

# Sign:
  Set-AuthenticodeSignature -HashAlgorithm "sha256" -IncludeChain "all" -FilePath "File"  -Certificate $cert -TimestampServer $TS 
```

*   **`Set-AuthenticodeSignature`：**
    将 Authenticode 签名添加到 PowerShell 脚本或其他文件
*   **`-HashAlgorithm`：**
    指定用于计算数字签名的散​​列算法
    *（PowerShell 2：sha1 || PowerShell 3+：sha256）*
*   **`-IncludeChain` *`<String>`*：**
    确定信任链中的哪些证书包含在数字签名中*（默认值`NotRoot`：）*；可接受的值：
    *   **`Signer`：**仅包括签名者的证书
    *   **`NotRoot`：**包括证书链中的所有证书，根权限除外
    *   **`All`：**包括证书链中的所有证书
*   **`-Certificate` *`<X509Certificate>`*：**
    将用于签署脚本或文件的证书；输入存储表示证书的对象的变量或获取证书的表达式
    *   要查找证书，请使用证书 [ ] 驱动器中的`Get-PfxCertificate`或；如果证书无效或没有权限，则命令失败`Get-ChildItem``Cert:``codeSigning`

# c# - 必填字段和 asp.net

> ID：10937069
> 
> 赞同：1
> 
> 时间：2012-06-07T17:47:47.267
> 
> 标签：c#, asp.net, drop-down-menu, textbox

我在 Visual Studio 中的 .aspx 页面上工作。

我想要一个文本框，后面跟着一个下拉菜单。

如果用户在文本框 id 和下拉菜单中输入任何输入，则在单击相应按钮之前都需要。

使用 RequiredFieldValidator 是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:01:21.467

我认为您尝试做的是条件验证这个问题类似于您对[条件验证 ASP.NET的问题](https://stackoverflow.com/questions/1711819/conditional-validation-asp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T17:52:35.563

是的，`RequiredFieldValidator`很适合您的场景。只要确保基于“如果用户在文本框中输入任何输入”来启用或禁用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T17:56:02.583

您可以为文本框的字段和 onblur 创建验证器，使用 javascript 启用/禁用验证器。

**HTML**：

```
<asp:TextBox runat="server" ID="txt" onblur="enableVaidators();" /> 
```

**Javascript**：

```
function enableValidators()
{
   var val_Test = document.getElementById('<%=val_Test.ClientID%>');
   var enableValidators = true;

   // Perform check on whether to enable or disable based on your scenario

   ValidatorEnable(val_Test, enableValidators);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T17:56:28.433

使用 jquery 怎么样？

一切都在客户端完成：

[http://docs.jquery.com/Plugins/Validation/](http://docs.jquery.com/Plugins/Validation/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T17:59:20.297

我将使用基于 TextBox 状态实现逻辑的 CustomValidator。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)

# sql - SQL：在“LIKE”查询条件中使用文本框值

> ID：10937070
> 
> 赞同：1
> 
> 时间：2012-06-07T17:47:51.380
> 
> 标签：sql, ms-access

SQL：所以，我正在尝试使用通配符将“行”值与放置在表单中的文本框的值（使用 MS Access '10）进行比较的条件进行查询，并且这条**粗体可能是错误的行部分**，但我不知道该怎么做：

SELECT Table.*
FROM Table
WHERE (((Table.Row) **Like '%"[Forms]![SomeForm]![Texbox1]"%'));**

想法？

不知何故 WHERE **(((Table.Row)=[Forms]![SomeForm]![Textbox1]));** 用作搜索完整字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T17:55:03.083

```
WHERE Table.Row ALike '%' & [Forms]![SomeForm]![Texbox1] & '%' 
```

在 ANSI 89 模式下...

```
WHERE Table.Row Like '*' & [Forms]![SomeForm]![Texbox1] & '*' 
```

在 ANSI 92 模式下...

```
WHERE Table.Row Like '%' & [Forms]![SomeForm]![Texbox1] & '%' 
```

或者您可以使用`InStr()`而不是`Like`比较。

```
WHERE InStr(1, Table.Row, [Forms]![SomeForm]![Texbox1]) > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T17:50:35.893

在 Access 中，使用 * 而不是 % 作为通配符

# c# - 在 C# 中是否有相当于 C 的静态？

> ID：10937071
> 
> 赞同：8
> 
> 时间：2012-06-07T17:47:54.027
> 
> 标签：c#, c, static

在CI可以做

```
void foo() {
  static int c = 0;
  printf("%d,", c);
  c ++;
}

foo(); 
foo(); 
foo();
foo(); 
```

它应该打印`0,1,2,3`

C#中是否有等价物？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:20:46.597

虽然有些人建议作为`static` *成员*变量，但由于可见性，这并不相同。作为aquinas 答案的*替代方案，如果**闭包被接受*，那么可以这样做：

（请注意，这`Foo`是一个*属性*而不是*方法*，它`c`是“每个实例”。）

```
class F {
    public readonly Action Foo;
    public F () {
        int c = 0; // closured
        Foo = () => {
            Console.WriteLine(c);
            c++;
        };
    }
}

var f = new F();
f.Foo();  // 0
f.Foo();  // 1 
```

但是，C#*没有直接*等效`static`于 C 中的变量。

快乐编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T17:50:56.087

就像是：

```
class C
{
    private static int c = 0;
    public void foo()
    {
        Console.WriteLine(c);
        c++;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T18:09:27.343

不，没有办法实现与静态 c 函数变量相同的行为......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T17:50:50.217

C# 中没有全局变量，但是，您可以在类中创建静态字段。

```
public class Foo{
    private static int c = 0;
    void Bar(){
       Console.WriteLine(c++);
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-07T17:56:31.157

您不能在方法级别上做到这一点。您可以在方法级别上做的最接近的事情是这样的，但这并不是那么接近。特别是，它仅在您引用枚举器时才有效。如果其他人调用此方法，他们将看不到您的更改。

```
 class Program {
        static IEnumerable<int> Foo() {
            int c = 0;
            while (true) {
                c++;
                yield return c;
            }
        }
        static void Main(string[] args) {
            var x = Foo().GetEnumerator();
            Console.WriteLine(x.Current); //0            
            x.MoveNext();
            Console.WriteLine(x.Current); //1
            x.MoveNext();
            Console.WriteLine(x.Current); //2
            Console.ReadLine();
        }
    } 
```

有趣的是 VB.NET 确实支持静态局部变量：[http](http://weblogs.asp.net/psteele/pages/7717.aspx) ://weblogs.asp.net/psteele/pages/7717.aspx 。正如本页所述，.NET 本身不支持这一点，但 VB.NET 编译器通过添加静态类级别变量来伪造它。

# actionscript - IntelliJ mxml 给出关于在类型化类中用作 id 的 id 属性的错误

> ID：10937073
> 
> 赞同：0
> 
> 时间：2012-06-07T17:48:02.883
> 
> 标签：actionscript, intellij-idea, mxml

我在 actionscript 中有一个类型化的类：

```
public class Cat {
    public var id:int;
    public var name:String;
} 
```

我在 mxml 组件中使用实例变量：

```
<valueobjects:Cat id="selected_cat"/> 
```

在 IntelliJ 中，cat 的 id 作为错误出现，“无效的整数值”，尽管它会编译而不会出错。此错误在编辑文件时出现在 IDE 中，并在底部将其列为错误。有谁知道告诉 IntelliJ 这个类或属性的任何技巧。或者是否有任何元数据标签来识别属性，以便 mxml 解析器满意？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:55:23.507

是的，问题是，通常 id 是用于标记的字符串，用于设置字符串类型的 id。Flex 通过 UIComponent 或 IMXMLObject 支持。您不应在标记中使用 ValueObjects，除非该类实现 IMXMLObject。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T10:52:03.207

要在标记中声明非可视对象，您必须在 Flex 4 及更高版本中使用 fx:declarations 标签。

每个 mxml 标记（无论是否可视）中的 id 属性充当从代码的其余部分引用此对象的一种方式。

换句话说，它相当于这个标记。

var selected_car:汽车

所以 id 必须始终是 String 属性。

在您的类中，您将 id 声明为 int 属性，这会使编译器感到困惑，因为它不知道哪个是有效的。

如果您需要在不更改类的情况下使用它，则必须使用 AS 而不是 MXML 创建实例。如果您需要使用 mxml（启用绑定等），您可能需要将属性名称更改为 catID 之类的名称。

# php - PHP TCPDF 未定义变量：l

> ID：10937076
> 
> 赞同：0
> 
> 时间：2012-06-07T17:48:16.147
> 
> 标签：php, tcpdf

使用全新安装的 TCPDF，
并首次运行示例 1 @ [http://www.tcpdf.org/examples.php](http://www.tcpdf.org/examples.php)
我得到“**未定义变量：l** ”

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:23:31.713

大概就是这一行：

```
//set some language-dependent strings
$pdf->setLanguageArray($l); 
```

他们希望您首先使用某种语言数组填充它。该方法的文档：[http ://www.tcpdf.org/doc/classTCPDF.html#a2a7cc18749cac51d0efca5d491d9217c](http://www.tcpdf.org/doc/classTCPDF.html#a2a7cc18749cac51d0efca5d491d9217c)

# matplotlib - 一些内联图不会从 Ipython 笔记本打印

> ID：10937080
> 
> 赞同：1
> 
> 时间：2012-06-07T17:48:33.177
> 
> 标签：matplotlib, ipython

我正在使用 Ipython Notebook 生成一些条形图。代码单元是这样的：

```
kcount =0;for k, v in pledge.groupby(['Date','Break']).sum().Amount.iteritems():
if k[0] <> kcount:
    kcount=k[0]
    pledge[pledge.Date==k[0]].groupby(['Break','Progcode'])['Amount'].sum().plot(kind='bar')
    plt.title(k[0])
    plt.figure() 
```

这为我提供了我们承诺活动的每一天的条形图，显示了当天每个节目的表现。总共24张图表。它们在屏幕上显示得很好，但是当我使用 Ipython Notebook 中的打印按钮时，它只打印足够的图形来填充最后一页，根据使用的打印机，它可以从 3 到 6 个图形不等。使用的一台打印机报告说它需要 11x17 的纸张来打印作业（不是我在任何地方设置的），当我手动将其设置为 8 1/2 x 11 时，它再次只打印出前 3 页。在这一点上，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:17:36.667

作为一种解决方法，您可以使用`plt.savefig('filename.png')`（或 .jpg 或 .whatever）保存图像文件，然后手动打印文件吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T04:25:31.127

我最终将这些页面保存到多页 PDF 文件中，然后从那里打印出来。查阅文档[http://matplotlib.org/api/backend_pdf_api.html](http://matplotlib.org/api/backend_pdf_api.html)

了解如何将多个图形保存到多页 PDF 文件中。

这看起来也是一个很好的资源。[http://blog.marmakoide.org/?p=94](http://blog.marmakoide.org/?p=94)

# python - 等待作业完成的有效方法：python 和 drmaa

> ID：10937081
> 
> 赞同：0
> 
> 时间：2012-06-07T17:48:38.450
> 
> 标签：python, sungridengine, drmaa

我想问一下我通过 Python 使用的 drmaa API 中的“等待”功能。它是否会执行常量 qstat（如果我们在 SGE 上运行它）来检查程序是否已完成执行。

我们的管理员希望我们避免任何恒定的 qstat，因为它会由于调度程序的额外负载而降低性能。

一般来说，wat 将是一种通过 DRMAA 检查作业状态的有效方法，而不会过度使用调度程序。

谢谢！-阿比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T23:47:32.383

从 DRMAA API 的角度来看，没有更好的方法。该 API 仅反映了您可以使用默认命令行工具在 shell 脚本中执行的操作。

问题在于您的特定 DRMAA 库的实施策略，因为 SGE 提供了比持续轮询更好的方法来获取作业状态更新。因此，您有以下选择：

*   修复您使用的 DRMAA 实现依赖于与调度程序的一些直接通信。有线协议的一种信息来源可能是 Open Grid Scheduler 项目。
*   等到 Univa（或其他人）为他们的 Grid Engine 产品提供 DRMAAv2 实施。这个版本的 API 支持对作业状态更改的库回调 (http://ogf.org/documents/GFD.198.pdf)，这似乎正是您想要的。

# javascript - 从 JavaScript 执行 shell 命令时权限被拒绝错误

> ID：10937085
> 
> 赞同：1
> 
> 时间：2012-06-07T17:48:49.950
> 
> 标签：javascript, asp.net, internet-explorer, internet-explorer-8, shellexecute

我正在尝试运行 shell 命令以从 JavaScript 打开记事本。这就是我的代码的样子：

```
 <script type="text/javascript">
     function runNotepad() {
        var oShell = new ActiveXObject("Shell.Application");
        var commandtoRun = "C:\\WINDOWS\\Notepad.exe";
        oShell.ShellExecute(commandtoRun, null, "", "open", "1");
        }
 </script> 
```

当我尝试运行它时，它会给我一个错误提示`Microsoft JScript runtime error: Permission denied`。

我也`Allow active content to run in files on my computer`加入了，`IE`但还是没有运气。

知道我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:51:31.577

> 知道我在这里缺少什么吗？

没有浏览器会允许 JavaScript 任意启动进程。由于安全隐患，此功能在 Internet Explorer 中不可用。

如果从其他脚本主机（例如`cscript`，但不是 Internet Explorer）运行，这将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T17:52:18.043

您不能在网页 javascript 中运行或创建本机对象。这个想法是，如果有人能做到这一点，那么他们就可以创建一个 FileSystem 对象。然后，当您无所事事地浏览他们的网页时，他们会对您的文件系统造成严重破坏。

如果您需要这样做，并将文件保存在主机的机器上，请将其保存为 HTML 应用程序 (*.hta)。

# c++ - 命名空间内类的友元函数

> ID：10937096
> 
> 赞同：6
> 
> 时间：2012-06-07T17:49:19.340
> 
> 标签：c++, namespaces, friend

我对下面的代码有两个问题：

```
namespace A { class window; }

void f(A::window);

namespace A
{
    class window
    {
    private:
       int a;
       friend void ::f(window);
    };
}

void f(A::window rhs)
{
    std::cout << rhs.a << std::endl;
} 
```

1）为什么我需要通过执行 ::f(window) 将窗口类中的成员函数 f 限定为全局？

2）为什么在这种特殊情况下我需要预先声明函数 f(A::window) ，而当类没有在命名空间内定义时，可以在函数被声明为友元之后声明函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T17:57:02.783

当您声明`f()`为朋友时，`A`如果前向声明尚不存在，则实际上是在包含类的封闭命名空间中完成的（在这种情况下）。

所以这...

```
namespace A
{
    class window
    {
    private:
        friend void ::f(window);
    };
} 
```

基本上变成了这个……

```
namespace A
{
    class window;
    void f(window);

    class window
    {
    private:
        friend void f(window);
    };
} 
```

**编辑：**这是 C++ 标准的一个片段，它明确讨论了这种情况：

> 标准 7.3.1.2 / 3：
> 
> 在命名空间中首先声明的每个名称都是该命名空间的成员。**如果非本地类中的友元声明首先声明了一个类或函数，则友元类或函数是最内层封闭命名空间的成员。**在该命名空间范围内（在授予友谊的类定义之前或之后）提供匹配声明之前，未限定查找 (3.4.1) 或限定查找 (3.4.3) 无法找到朋友的名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T17:57:47.783

至于1），你的函数不在命名空间中，所以你必须使用 :: 告诉编译器在命名空间之外搜索它。

否则，它只会在命名空间内寻找函数（这就是它们存在的原因）。Koenig 查找不适用于此处，因为窗口类位于命名空间内。

虽然不太确定2），但我敢打赌它与1）有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T17:58:22.327

1) 因为函数`f`是在当前命名空间之外声明和定义的。如果您将类的定义移动到与函数相同的命名空间中，无论是全局还是其他，您都不需要这样做。

2）你总是需要在引用之前声明一个函数。您的类使用friend 语句引用该函数。

# html - 覆盖整个页面

> ID：10937100
> 
> 赞同：0
> 
> 时间：2012-06-07T17:49:31.177
> 
> 标签：html, css

我想创建一个将在弹出窗口后面使用的叠加层。但是当页面向下滚动时，覆盖就不再存在了吗？我可以使用 javascript 来获取页面内容的高度，然后可以将相同的高度应用于覆盖，但是有没有基于 css 的解决方案？

```
#overlay{
    width: 100%;
    height: 100%;
    position: absolute;
    left: 0px;
   top: 0px;
   background-color:#000;
   opacity: .75
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T17:56:05.930

只需将`position`属性更改为`fixed`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T22:57:35.110

```
-webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    position: relative; 
```

试试看，我不确定它是否适用于除背景之外的任何东西，但值得一试！

# objective-c - 标识符 IBFilesOwner 缺少代理

> ID：10937103
> 
> 赞同：5
> 
> 时间：2012-06-07T17:49:36.207
> 
> 标签：objective-c, ios, xcode

我们有一个应用程序在极少数情况下会因错误而崩溃：

`Missing proxy for identifier IBFilesOwner`

我们理解这意味着它无法为我们的一个 nib (xib) 找到文件所有者，但我们已经通过并确认它们都设置了有效的。

Google 上几乎为零，有人可以提供任何建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:05:21.333

嘿，我遇到了同样的问题，结果证明我正在执行一些线程，并且我正在执行应该在另一个线程的主线程上的代码。我不知道你在你的应用程序中做什么，但希望这可能会给你一个线索。

如果您分享一些代码，我们可以尝试找出发生了什么。

# javascript - 如何让信息窗口在谷歌地图中有标签？

> ID：10937104
> 
> 赞同：2
> 
> 时间：2012-06-07T17:49:42.513
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, jquery-ui-map

如何使我的 infoWindows 具有选项卡式内容？我试过这样的事情：

```
google.maps.event.addListener(this, "domready", function(){ $("#info").tabs() }); 
```

**也尝试使用`infoWidnwow`, `infowindow`, and`iw`代替`this`关键字*

和

```
.ready(function(){ $("#info").tabs();}); 
```

和

```
.bind('domready', function(){ $("#info").tabs(); }); 
```

这些都不起作用。

创建标记和信息窗口的代码：

```
$('#map').gmap(mapOptions).bind('init', function(){
    $.post('getmarkers.php', function(json){
        var theMarkers = json;
        $.each(theMarkers, function(i, element) {
            $.each(element, function(object, attributes){
                $('#map').gmap('addMarker', { 
                    'position': new google.maps.LatLng(parseFloat(attributes.Lat), parseFloat(attributes.Lng)), 
                    'bounds':true } ).click(function(){                             
                        $('#map').gmap('openInfoWindow', { 'content':'<div id="info"><ul><li><a href="#tab1">Tab1</li><li><a href="#tab2">Tab2</li></ul><div id="tab1"><h1>'+attributes.productName+'</h1></div><div id="tab2"><h2 style="color: grey"><h1>'+attributes.productPrice+'</h1></div></div>' }, this);                        
                }); 
            });
        });
    }); 
}); 
```

不知何故，我需要告诉这部分：

```
$('#map').gmap('openInfoWindow', { 'content':'<div id="info"><ul><li><a href="#tab1">Tab1</li><li><a href="#tab2">Tab2</li></ul><div id="tab1"><h1>'+attributes.productName+'</h1></div><div id="tab2"><h2 style="color: grey"><h1>'+attributes.productPrice+'</h1></div></div>' }, this); 
```

标记`content`我传递给的`openInfoWindow`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-11T14:38:26.743

有一个免费的 jquery 插件可以处理多个选项卡、每个选项卡的定位和我刚刚发现的样式，它有一个直观的自定义界面。这是一个演示

[https://github.com/googlemaps/js-info-bubble/blob/gh-pages/examples/example.html](https://github.com/googlemaps/js-info-bubble/blob/gh-pages/examples/example.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:10:24.100

删除您发布的前三个片段并使用它：

```
$('#map').gmap(mapOptions).bind('init', function() {
    $.post('getmarkers.php', function(json) {
        var theMarkers = json;
        $.each(theMarkers, function(i, element) {
            $.each(element, function(object, attributes) {
                $('#map').gmap('addMarker', {
                    'position': new google.maps.LatLng(parseFloat(attributes.Lat), parseFloat(attributes.Lng)),
                    'bounds': true
                }).click(function() {
                    var ts = $.now();
                    $('#map').gmap('openInfoWindow', {
                        "<div id='" + ts + "info'>... your tab content ..."
                    }, this);
                    $('#' + ts + 'info').tabs();
                });
            });
        });
    });
});​ 
```

我创建了一个唯一的字符串并用它给 div 一个唯一的 id，然后用它来制作标签。

# javascript - 为什么 Backbone 模型在保存时向服务器发送重复的属性？

> ID：10937106
> 
> 赞同：9
> 
> 时间：2012-06-07T17:49:50.590
> 
> 标签：javascript, ruby-on-rails, ruby, backbone.js, nested-attributes

我正在使用 Rails 后端 API 编写一个练习 Backbone 应用程序，我对保存 Backbone 模型的行为感到困惑。

假设一个团队有很多玩家，我想在一个 POST 中保存一个有很多玩家的团队。

所以在 Rails 中我有：

```
class Team < ActiveRecord::Base
  has_many :players
  accepts_nested_attributes_for :players
end

class Player < ActiveRecod::Base
  belongs_to :team
end 
```

对于骨干客户端，我定义了一个 Player 模型和一个 Players 集合（未显示）

然后是包含团队模型（注意：没有团队集合）

```
Demo.Models.Team = Backbone.Model.extend({
  urlRoot: '/teams',
  defaults: {
    'team_size': 12
  },
  initialize: function() {
    this.players = new Demo.Collections.Players());
  },
  toJSON: function() {
    var json = _.clone(this.attributes);
    json.players_attributes = this.players.map(function(player) {
      return player.toJSON();
    });
    return json;  
  }
} 
```

当我在浏览器中检查我的字符串化 JSON 时，一切看起来都很好：

```
{"team_size":12, "players_attributes":[{"name":"Fred"},{"name":"Jim" },{"name":"Mark"}]} 
```

检查服务器日志，重复唯一的顶级属性（“团队规模”），一次在顶级，然后在根键下重复。

```
Started POST "/teams" for 127.0.0.1 at 2012-06-07 13:39:40 -0400
Processing by TeamsController#create as JSON
  Parameters: {
    "team_size"=>12, "players_attributes":[{"name":"Fred"},{"name":"Jim" },{"name":"Mark"}]}, 
    "team"=>{"team_size"=>12}
  } 
```

我有几个问题：

1.  确保 player_attributes 嵌套在根键内的最佳方法是什么？我（这样我就可以在 TeamController 中以标准的 rails 方式进行嵌套保存：（即 Team.create(params[:team])）我可以使用 toJSON 中的一些 javascript 黑客来完成此操作，但我猜有一个更简单，更清洁的方式。

2.  这是标准的、可取的行为吗？要发送这样的属性的副本？我想没有坏处，但它闻起来不对劲。

3.  我没有正确定义 url / urlRoot 吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T07:00:23.480

1- 您必须重写 toJSON 方法才能将模型名称作为发送到服务器的 JSON 元素的根。

```
 toJSON: function() {
    return { team: _.clone( this.attributes ) }
  }, 
```

由于您已经在弄乱并覆盖此方法，因此我看不出有任何理由不这样做。

2-这是您描述的一种非常奇怪的行为。尝试：

```
class Team < ActiveRecord::Base
  self.include_root_in_json = false
end 
```

它可能会消除 Rails 重复参数解析。您从中获得的另一个优势是 Rails 不会将团队作为其生成的 JSON 的根元素包含在客户端中。

3-您对 urlRoot 的定义很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T22:27:09.413

我在寻找同样的问题时来到这里。所以即使这是一个老问题，我认为值得给出答案。

我实际上找到了一个解释这些重复属性的 Rails 设置：wrap_parameters

[http://apidock.com/rails/v3.2.13/ActionController/ParamsWrapper/ClassMethods/wrap_parameters](http://apidock.com/rails/v3.2.13/ActionController/ParamsWrapper/ClassMethods/wrap_parameters)

只需将其设置为一个空数组，rails 就不会尝试包装来自您的 JSON 请求的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T16:39:12.833

尽管您可以使用其他人提到的 toJSON hack，但这实际上并不是一个好主意。`sync`一方面，它会在和`save`with之间产生不一致的结果`{patch: true}`（这种不一致是因为如果您不打补丁，同步方法会调用 toJSON，但如果您将补丁设置为 true，则不会调用 toJSON）

相反，更好的解决方案是使用补丁版本的 Backbone，它会重载同步方法本身。骨干轨 gem 会自动执行此操作，或者您可以将骨干轨_rails_sync.js 拉到您自己的应用程序中。可以在此处找到此问题的更完整答案：[Backbone.js and Rails - How to handle params from Backbone models？](https://stackoverflow.com/questions/6272070/backbone-js-and-rails-how-to-handle-params-from-backbone-models?rq=1)

# android - Android，尝试从触摸事件中调用新意图

> ID：10937108
> 
> 赞同：0
> 
> 时间：2012-06-07T17:50:02.240
> 
> 标签：android

我正在尝试制作一个应用程序，当触摸屏幕时它会调用一个新的意图。我有在视图类中捕获触摸事件的代码。当我尝试创建一个新意图时，Intent(this, cYesNoDisplay.class);，我收到一个错误，说构造函数未定义，我假设构造函数没有在视图基类中定义，但是 Activity 类？

我对如何做到这一点感到困惑，有没有办法让我的 View 类是意图类的成员，如何称呼它？？？？我想一定有办法做到这一点，还在学习Java。泰德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T17:53:18.787

您对问题所在的 View 类的评估是正确的。为了让它工作，这样做：

```
Intent i = new Intent(NameOfYourActivity.this, cYesNoDisplay.class); 
```

将 [NameOfYourActivity] 替换为您所在的活动的名称。

**编辑：**我可能误解了你在做什么。如果您实际上已经构建了自己的 View 类并覆盖了 onTouch() ，那么您实际上需要做一些不同的事情。

如果您还没有它，请添加：

```
Context ctx; 
```

到你的类声明。

在您的构造函数中更改它以将作为参数传入的上下文存储在您声明的 ctx 引用中。

```
public [ClassName] (Context c){
    this.ctx = c;
} 
```

然后在 onTouch() 里面这样做：

```
Intent i = new Intent(ctx, cYesNoDisplay.class);
ctx.startActivity(); 
```

**再次编辑：**您必须使用的原因`ctx.startActivity(i);`是 startActivity() 是 Context 的一种方法。由于 Activity*是一个* 上下文，当您从 Activity 内部调用它时，您不必在其前面放置任何内容。但是，当您在不同类的“内部”时，您必须使用对 Context 的引用来调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:37:32.700

用这个 。这在我的项目中工作正常。

意图 i = new Intent(NameOfYourActivity.this, cYesNoDisplay.class); 开始活动（一）；

# database - 如何在 Adob e Air 的 LIKE 运算符模式中使用命名参数

> ID：10937110
> 
> 赞同：2
> 
> 时间：2012-06-07T17:50:10.297
> 
> 标签：database, sqlite, air, adobe

我想在 LIKE 运算符模式中使用命名参数占位符，以便正确转义参数字符串。

这是我使用 at-param 占位符的修改后的代码：

> var stmt = new air.SQLStatement();
> 
> stmt.text = "SELECT * FROM comments WHERE title LIKE '%@search%';";
> 
> stmt.parameters["@search"] = "参数字符串";
> 
> stmt.execute();

这样做会产生带有以下详细信息的 SQLError

> 消息：错误 #3315：SQL 错误。
> 
> 详细信息：在参数属性中找到“@search”参数名称，但在指定的 SQL 中没有

正如 Mike Petty 所建议的，我尝试了：

> stmt.text = 'SELECT * FROM comments WHERE title LIKE "@%search%";';

这会产生相同的 SQL 错误详细信息。

文档有这个：

> expr ::= (列名 | expr) LIKE 模式
> 
> 模式 ::= '[ 字符串 | % | _]'

我怀疑它是由于 qoutes 而被跳过的，关于如何使它工作的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:46:38.340

找到了一个解决方案，基本上不是这样：

```
var stmt = new air.SQLStatement();
stmt.text = "SELECT * FROM comments WHERE title LIKE '%@search%';";
stmt.parameters["@search"] = "argument string";
stmt.execute(); 
```

您必须为整个 LIKE 运算符模式放置一个占位符并将该模式​​绑定为参数。

```
var stmt = new air.SQLStatement();
stmt.text = "SELECT * FROM comments WHERE title LIKE @search;";
stmt.parameters["@search"] = "%" + userInput + "%";
stmt.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T17:52:26.303

从你的字符串中删除你的 :string 。

就像工作一样好：

```
SELECT * FROM comments WHERE comments.title LIKE '%string%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:25:53.987

从您的问题很难判断，但是您当前的语句是抛出 SQLError，只是不编译，还是不返回任何结果？

如果我不得不猜测我会说你在这里有一些问题：

1.  您不必限定 where 子句中的列，因为您只有 1 个表可供选择
2.  参数*字符串*在技术上是 AIR / Actionscript 的保留字（尽管大小写不同） - 仍然有点混乱。

尽管文档和代码允许您使用冒号或 at-symbol，但我更喜欢使用 @，因为它更容易看到 ;)

不要忘记为行添加您期望的类的 itemClass 定义 - 这有助于避免匿名对象。

这应该是相当直截了当的：

```
var stmt:SQLStatement = new SQLStatement();
    stmt.itemClass = Comment;
    stmt.text = 'SELECT * FROM comments WHERE title LIKE "@%search%";';
    stmt.parameters['@search'] = userInput.text;
    stmt.addEventListener(SQLEvent.RESULT, onResults);
    stmt.execute(); 
```

# python-2.7 - 从主应用程序工作目录中的子文件夹中找到我的 py 模块

> ID：10937111
> 
> 赞同：0
> 
> 时间：2012-06-07T17:50:28.840
> 
> 标签：python-2.7

这个问题以前可能有人问过，但我找不到。

我在Linux机器上。我有一个从名为 /avt 的文件夹运行的 py 应用程序。（示例）这段代码不是我写的，它有大约 12 个模块。我是继承这个烂摊子的幸运工程师。此应用程序导入位于此目录下的其他模块 /avt/bin 无论当前工作目录在哪里，我都希望能够在 /bin 目录中找到我的模块。有时应用程序将 dir 更改为其他一些子文件夹以执行某些文件 I/O。然后应该返回，但似乎有时它不会返回，因为代码会出错并出现“没有这样的文件或目录”错误。所以我想在每次对 /bin 目录进行任何文件 I/O 之前测试工作目录。例如，我想在 /bin 中创建文件，然后打开这些文件并从中读取数据。如何测试以确保我当前的工作目录始终是 /avt？如果不是，那么 ch.dir 呢？注意：它还必须是可移植的代码，这意味着如果必须在任何 Linux 机器上的任何目录结构上运行。

我试过这段代码，但我认为它不是很干净。Python 不是我的主要语言。这种编码是否正确，它会为此工作吗？请原谅我不知道如何为这个论坛格式化它。

```
Avtfolder = os.path.realpath(os.path.abspath(os.path.split(inspect.getfile( inspect.currentframe() ))[0]))
if Avtfolder not in sys.path:
    sys.path.insert(0, Avtfolder)

if Avtfolder.__contains__('/avt'): 

    modfilespath = Avtfolder + '/bin'
    print 'bin dir is ' + modfilespath
else:
    print 'directory lost...'
#write some code here that changes to the root /avt dir 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:11:52.330

我有一些笔记。

首先，恐怕您混淆了两个问题（或者我无法从问题中分辨出您所面临的问题）。这些问题是：

1.  对可以驻留在不同机器上不同目录中的文件的 I/O
2.  导入您的应用程序使用的 Python 模块，这些模块也可能位于稍微不同的位置。

问题的标题和一些文本表明您正在处理问题 2，而对 I/O 和“没有这样的文件或目录”错误的引用指向问题 1。

然而，这些是单独的问题，需要单独处理。我无法给出两者的确切食谱，但这里有一些建议：

**对于问题 1**：我认为在用户安装 Python 库的文件夹中执行一些 I/O、创建文件等不是一个好主意。它是 Python 模块的文件夹，而不是数据。此外，如果库是通过`setup.py`、 using `pip`or安装的`easy_install`（如果现在不是这种情况，将来可能会改变），那么程序可能没有足够的权限在此处写入，除非调用为`root`. 没错。在其他地方创建文件。

至于“如何跟踪目录更改”部分：我必须承认我不太明白你的意思。为什么还要使用“当前目录”的概念？在我看来，您应该只有一些变量，例如`write_path`,`data_path`等，代码将是

```
data = open(os.path.join(data_path, 'data.foo'))
dump = open(os.path.join(write_path, 'dump.bar'), 'w') 
```

等等

为什么你甚至关心你的图书馆在哪里？我觉得不对，我会改的。这些`inspect.currentframe()`东西闻起来像你真的需要重新考虑图书馆的设计。

现在，图书馆的位置重要的是**问题 2**。但同样，*绝对*路径无关紧要（如果确实如此，请改变它！）。您只需要将所有模块都放在一个文件夹（或其子文件夹）内。如果它们在同一个文件夹中，那很好。`import foo`会工作的。如果有些在子文件夹中，则这些子文件夹中应该有一个名为的文件`__init__.py`，然后它们将被 Python 解释器视为模块，因此您将能够做到`from foo import bar`，其中包含和`foo`的子文件夹在哪里。`__init__.py``bar.py`

因此，请尝试重写它，以便您不依赖`.py`文件的位置。你真的根本不需要在`inspect`那里使用。另一方面，`__contains__`除非你真的需要，否则不要使用像直接这样的特殊方法。`if '/avt' in Avtfolder`也会这样做。

# wordpress - .htaccess 将子域重定向到主域（如果是桌面），不包括某些文件夹

> ID：10937113
> 
> 赞同：0
> 
> 时间：2012-06-07T17:50:38.107
> 
> 标签：wordpress, .htaccess, redirect

我有`domain.com`。

我也有`m.domain.com`。

如果我尝试`m.domain.com`从桌面访问，我想将用户重定向到`domain.com`除非用户明确尝试访问特定文件夹（在我的情况下：`wp-admin`登录到 wordpress）。

我的 .htaccess 的一部分具有以下代码，可以正确检测和处理重定向，但我被困在文件夹排除部分。

```
#Options +FollowSymlinks -MultiViews
#insert folder exclusion 
#RewriteCond %{HTTP_USER_AGENT} ^.*(MSIE.*Windows\ NT|Lynx|Safari|Opera|Firefox|Konqueror) [NC]
#RewriteCond %{HTTP_USER_AGENT} !(^.*(Opera\ Mini|SymbianOS|Mobile)) [NC]
#RewriteCond %{HTTP_HOST} ^(\w+)\.domain\.com [NC]
#RewriteRule .* http://domain.com/ [R,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:02:02.543

如果您想在访问根目录时重定向，那么也许您可以在 RewriteRule 的最后一行之前添加以下内容。

```
RewriteCond %{REQUEST_URI} ^/$ 
```

[如果您直接访问http://m.domain.com/](http://m.domain.com/)，这将只处理重定向。

```
RewriteCond %{REQUEST_URI} !^/(wp-admin|etc|etc)$ 
```

仅当正在访问的文件夹不在列表中（wp-admin 等）时，上述内容才会重定向。

# asp.net-mvc - 向模型列表中添加多个项目？

> ID：10937120
> 
> 赞同：0
> 
> 时间：2012-06-07T17:50:57.950
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有一个页面添加了多次相同的输入框。

```
@Html.TextBoxFor(m => m.Product)
@Html.TextBoxFor(m => m.Product)
@Html.TextBoxFor(m => m.Product) 
```

如何将它绑定到模型。

我试过了：

```
public class Shop
    {            
        public string ShopName { get; set; }

        [Remote("ProductExists", "Account", AdditionalFields = "ShopName", ErrorMessage = "Product is already taken.")]
        public List<String> Product { get; set; }
} 
```

但我只能看到第一个字段中的数据。我也试过：

```
@Html.TextBoxFor(m => m.Product[0])
@Html.TextBoxFor(m => m.Product[1])
@Html.TextBoxFor(m => m.Product[2]) 
```

但是远程验证不起作用，所以我在这里有点难过。我想要实现的基本目标是将产品列表与商店一起发送，以便可以通过远程调用函数对其进行验证。我尝试将产品放在自己的公共类中，但后来我无法从该类中访问商店名称。

这是我正在尝试使用的控制器操作：

```
public JsonResult ProductExists(List<String> Product, string ShopName) 
```

任何我如何解决这个问题的想法都会非常感激？

**编辑**

此 Semi 有效，但远程验证仍未通过 ShopName：

```
public class Shops
{
    [Required]
    public string ShopName { get; set; }
    public List<Products> Product { get; set; }
}

public class Products
{
    [Required]
    [Remote("ProductExists", "Home", AdditionalFields = "ShopName", ErrorMessage = "Product is already taken.")]
    public String Product { get; set; }
} 
```

控制器动作：

```
public JsonResult ProductExists(List<String> Product, string ShopName)
    {

        return Json(true, JsonRequestBehavior.AllowGet);

    } 
```

看法：

```
@model Shop.Models.Shops

@{
ViewBag.Title = "Shop";
}

<h2>Shop</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">   </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"    type="text/javascript"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Shop</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.ShopName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ShopName)
        @Html.ValidationMessageFor(model => model.ShopName)
    </div>

    <div class="editor-field">
        @Html.EditorFor(model => model.Product[0])
        @Html.ValidationMessageFor(model => model.Product[0])
    </div>

    <div class="editor-field">
        @Html.EditorFor(model => model.Product[1])
        @Html.ValidationMessageFor(model => model.Product[1])
    </div>

    <div class="editor-field">
        @Html.EditorFor(model => model.Product[2])
        @Html.ValidationMessageFor(model => model.Product[2])
    </div>

        <input type="submit" value="Create" />

</fieldset>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:24:09.167

看看下面的[答案](https://stackoverflow.com/a/4756796/1279541)。我会像你尝试的那样让产品本身成为一个类。搜索页面呈现的 html 代码并检查`ShopName`文本框的字段名称。我认为应该是`ShopName`，如果是这样，如果不将`AdditionalFields`属性更改为呈现的名称，则不需要更改属性。

所以是这样的：

```
public class Shop
{            
        public string ShopName { get; set; }

        public List<Products> Product { get; set; }
}

public class Products
{

        [Remote("ProductExists", "Account", AdditionalFields = "ShopName", ErrorMessage = "Product is already taken.")]
        public String Product { get; set; }
} 
```

在您看来，请执行以下操作：

```
foreach(var item in Model.products)
{
   @Html.TextBoxFor(item => item.product) // not sure if the syntax is right 
} 
```

# javascript - 显示：FancyBox 无和 Flash 视频问题

> ID：10937122
> 
> 赞同：0
> 
> 时间：2012-06-07T17:51:14.077
> 
> 标签：javascript, jquery, css, flash

我有一个有趣的问题。当用户单击图像缩略图时，我使用 FancyBox 灯箱显示“视频”标签，它适用于所有形式的 HTML5 视频。主要问题是在 IE9 之前的浏览器中进行测试时，不会加载 Flash 回退。

我正在使用 HTML5Media.info HTML5 视频 javascript 插件来自动检测“视频”标签并在浏览器无法识别“视频”标签时创建一个 Flash 后备“对象”。这个插件不能编辑，因为它是一个链接文件，而不是我服务器上的文件。

我知道问题出在“显示：无；” 那是周围的DIV之一。

我知道使用的方法/修复

```
height: 0; width: 0; overflow: hidden; 
```

但这些在我的情况下不起作用。由于 Flash 对象/嵌入是根据用户拥有的浏览器动态生成的，而 FancyBox 依赖于“display: none;” 我不能用这个。FancyBox 也被用在网站的其他地方，改变它来支持这将是不必要的工作。

我需要一种使用 Javascript 或 jQuery 的方法来检测周围 DIV 的显示状态是否设置为无，然后，当显示 DIV 时，然后加载 Flash 视频。

这可以通过 AJAX 调用来完成吗？

如果您知道这样做的方法，请告诉我。抱歉，我在 Javascript 方面越来越好，但无论如何我都不是专家，因此感谢您的帮助！

我也很抱歉没有包含参考链接，这是一个公司项目。保密的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:08:18.103

```
height: 0; width:0; overflow: hidden; 
```

这实际上工作得很好。我之前尝试过，它不能正常工作。我不知道为什么，但对于任何使用 FancyBox 的人来说，他们正在动态加载 SWF 或 FlashPlayers，这是你想要隐藏 DIV 的 css。奇迹般有效。FancyBox 会自动将 DIV 调整为所需的大小。

# javascript - 循环绑定中的绝对引用 Javascript var

> ID：10937125
> 
> 赞同：1
> 
> 时间：2012-06-07T17:51:25.517
> 
> 标签：javascript, jquery, javascript-events

我创建了以下函数来绑定到我页面中所有类型为“.wrapper”的类。我遇到的问题是，当我触发任何这些事件时，var 'this' 不再指向绑定它的特定循环，而是在循环绑定的最终迭代中使用的 'this'。这似乎是我理解 var 在绑定时如何存储的错误，而不是作为值，它们存储为指针。任何人都可以帮助向我展示如何使这些绑定保持与它们的对象相关。

谢谢德文

```
var pullUpEl, pullUpOffset, generatedCount = 0, index = 0, wrappers = [];

$('.wrapper').each(function () {
    if ($(this).hasClass('tooltip')) {
        pullUpEl = $(this)[0].getElementsByTagName("div")[0].getElementsByTagName("div")[0];
        pullUpOffset = pullUpEl.offsetHeight;

        wrappers[index] = new iScroll($(this).attr('id'), {
            useTransition: true,
            fadeScrollbar: true,
            hideScrollbar: false,
            hScrollbar: false,
            //snap: 'li',
            onRefresh: function () {
                if (pullUpEl.className.match('loading')) {
                    pullUpEl.className = '';
                    pullUpEl.querySelector('.pullUpLabel').innerHTML = 'Pull up to load more...';
                }
            },
            onScrollMove: function () {
                if (this.y < (this.maxScrollY - 5) && !pullUpEl.className.match('flip')) {
                    pullUpEl.className = 'flip';
                    pullUpEl.querySelector('.pullUpLabel').innerHTML = 'Release to refresh...';
                    this.maxScrollY = this.maxScrollY;
                } else if (this.y > (this.maxScrollY + 5) && pullUpEl.className.match('flip')) {
                    pullUpEl.className = '';
                    pullUpEl.querySelector('.pullUpLabel').innerHTML = 'Pull up to load more...';
                    this.maxScrollY = pullUpOffset;
                }
            },
            onScrollEnd: function () {
                if (pullUpEl.className.match('flip')) {
                    pullUpEl.className = 'loading';
                    pullUpEl.querySelector('.pullUpLabel').innerHTML = 'Loading...';
                    pullUpAction(this, pullUpEl.parentNode.getElementsByTagName("ul")[0]);
                }
            }
        });
    } else {
        wrappers[index] = new iScroll($(this).attr('id'));
    }
    index++;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:09:23.633

不是问题`this`，是问题`pullUpEl`。你把它变成了全局的，所以它的最终值是`.each()`块中的最后一个元素。当您的`onRefresh`,`onScrollMove`等函数运行时，它们不会在`pullUpEl`实际发生变化的上下文中运行。因此，本质上，无论是哪个元素触发了这一点，所有更改每次都在循环的最后一个元素上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:01:58.117

非正式地，`this`计算第一个词法封闭的上下文（隐式参数）`function`。您可以捕获它：

```
function f() {
    var self = this;
    function g() {
        // here "self" evaluates to the context of f, "this" evaluates to the one of g
    }
} 
```

要在浏览器控制台中运行，请尝试：

```
function f() {
    var self = this;
    return function g() {
        console.log(String(self));
        console.log(String(this));
    }
}

f.apply(1).apply(2) 
```

有关血腥细节，请参阅[ECMA 262](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf) , 11.1.1：

> `this`关键字计算为`ThisBinding`当前执行上下文的值。

该标准规定`ThisBinding`只有在输入功能代码或输入`eval`代码时才改变。

# python - 在 Sublime Text 2 中显示当前函数的 Python 文档字符串？

> ID：10937130
> 
> 赞同：12
> 
> 时间：2012-06-07T17:51:49.847
> 
> 标签：python, sublimetext, sublimetext2

我刚刚找到了 Sublime Text 2，它很棒。我真正想念的唯一一件事是能够查看我正在处理的函数的文档字符串。有没有可以做到这一点的插件？

例如：

```
def f(x):
    '''a doc string for f'''
    print x

f # << at this point, either automatically or with a keystroke,
  # I would like to be able to somehow view "a doc string for f" 
```

**编辑：**我已经尝试使用 SublimeCodeIntel 和 SublimeRope，都没有这样的支持。

**Edit2：**它也应该适用于打开项目中的其他模块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T23:13:16.133

这样[的](https://github.com/kemayo/sublime-text-2-goto-documentation)内容将指向文档中的正确位置，但如果您确实需要将文档集成到您的环境中，我会考虑使用 IDE。但是，我也是 Sublime 的粉丝，需要时只需打开浏览器即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-06T01:22:42.567

[为 sublime 安装 anaconda](http://damnwidget.github.io/anaconda/)。

然后在 Sublime3 上，导航到`Preferences > Package Settings > Anaconda > Settings-User`以下行并将其添加到刚刚打开的文本文件中。

```
{
    "anaconda_linting" : false,
    "enable_signatures_tooltip" : true,
    "merge_signatures_and_doc" : true,
    "python_interpreter":"/home/miladiouss/anaconda3/bin/python"
} 
```

保存，重新启动 Sublime，然后享受最好的 Python IDE！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T16:20:49.717

通过调整 SublimeCodeIntel，您可以禁用“跳转”到定义函数的文件——这将允许您在单击 alt 时在状态栏中查看函数定义。

为此，请选择*Preferences > Browse Packages*然后打开 *SublimeCodeIntel/SublimeCodeIntel.py*。

转到`class GotoPythonDefinition(sublime_plugin.TextCommand):`并在第 890 行添加一个`return`，以便`_trigger`读取的第一行：

```
 def _trigger(defns):
            if defns is not None:
                defn = defns[0]
                if defn.name and defn.doc:
                    msg = "%s: %s" % (defn.name, defn.doc)
                    logger(view, 'info', msg, timeout=3000)
                    return 
```

（您还可以调整`msg`字符串格式并删除`defn.name`以节省一些状态栏空间）。

必须低头查看状态栏才能看到定义有点迷失方向……而且，状态栏将无法显示长定义。然而，这是一个开始。希望工具提示/弹出控件将通过 API 提供，以便定义可以出现在视图中 alt-clicked 函数旁边。

# html - 在 HTML5 移动应用程序中对 pdf 进行注释的插件

> ID：10937135
> 
> 赞同：3
> 
> 时间：2012-06-07T17:52:10.337
> 
> 标签：html, pdf, jquery-mobile

使用 jQueryMobile 和 html5，我构建了一个移动应用程序，在该应用程序中我需要从外部 url 检索 pdf 文件，保存在应用程序中，并提供对该文件进行注释的可能性。

所以我想知道是否有一个插件可以用来对pdf进行注释。

非常感谢您提前。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:18:34.667

我没有使用任何这些，但这里有一些可能会有所帮助：

*   [http://snipplr.com/view/9250/](http://snipplr.com/view/9250/)
*   [http://www.zurb.com/playground/javascript-annotation-plugin](http://www.zurb.com/playground/javascript-annotation-plugin)
*   [http://flexpaper.devaldi.com/annotations.htm](http://flexpaper.devaldi.com/annotations.htm)
*   [http://code.google.com/p/xsd-forms/](http://code.google.com/p/xsd-forms/)

希望这可以帮助

# java - Maven 发布插件不更新依赖管理中的快照

> ID：10937141
> 
> 赞同：6
> 
> 时间：2012-06-07T17:52:35.003
> 
> 标签：java, maven, maven-release-plugin

我有一个公司范围的父 pom，`<dependencyManagement>`其中定义了应该在整个应用程序中使用的项目版本，其中一些是 SNAPSHOT，有点像这样：

```
<dependencyManagement>
  <dependencies>
    ...
    <dependency>
      <groupId>my.group</groupId>
      <artifactId>myArtifact</artifactId>
      <version>1.0-SNAPSHOT</version>
    </dependency>
    ...
  <dependencies>
</dependencyManagement> 
```

当我`release:prepare`在父 pom 上运行时，这些 SNAPSHOT 不会被删除。结果是继承自父项的项目在发布时无法使用其版本。如何确保在`<dependencyManagement>`发布时更新父 pom 的部分？

我看到了这个问题：[为什么 maven 发布插件允许依赖管理中的 SNAPSHOT 版本？](https://stackoverflow.com/questions/2089246/why-does-maven-release-plugin-allow-for-snapshot-version-in-dependency-managment)，但提到的票声称在插件的早期版本中已修复。

```
Maven Release Plugin 2.3.1
Apache Maven 3.0.4 (r1232337; 2012-01-17 08:44:56+0000)
Java version: 1.6.0_31, vendor: Sun Microsystems Inc.
OS name: "windows 7", version: "6.1", arch: "amd64", family: "windows" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:05:57.527

因此，您正在尝试发布不属于您正在准备的构建的工件？如果你做一个 relase:perform，如果它们不存在，插件应该将哪些工件上传到存储库？（如果他们这样做，为什么要放置快照版本？）。
我认为正如@khmarbaise 所说，该插件不会删除不属于您的反应器的快照（该插件可能认为它们是第三方依赖项）。

**这是一条评论，我把它作为答案，因为我还没有发表评论的声誉**……对不起我的英语！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:37:10.757

只关心检查您的部分中`maven-release-plugin`是否有`SNAPSHOT`-s `<dependencies/>`。`<dependencies/>`将由扩展此父级的所有模块继承。他们总是会在构建之前尝试解决这些依赖关系。

`<dependencies/>`和部分之间的区别在于`<dependencyManagement/>`后者仅定义将使用的版本。这就是说，如果您在那里定义了 -s，则发布插件根本不关心`SNAPSHOT`，除非该父项目是聚合器或聚合器的一部分，并且该父项目与聚合器一起作为一个整体发布。

同样，maven-release-plugin 也不处理`<pluginManagement/>`. 另外，我相信它仅在与`<dependencies/>`.

`SNAPSHOT`更糟糕的是——据我所知——如果依赖项/插件有一个版本，如果它在一个`<*Management/>`部分中，你甚至不会收到警告。

出于这个原因，我采用的方法是拥有一个`<properties/>`包含工件版本的父 POM。`SNAPSHOT`在发布它之前，我使用 grep扫描它以查找-s：

```
grep SNAPSHOT pom.xml 
```

# c# - 使用“this”关键字调用基类 fun()（存在派生类时）

> ID：10937145
> 
> 赞同：0
> 
> 时间：2012-06-07T17:52:55.457
> 
> 标签：c#

我有以下代码片段

```
Class Parent
{
    public override String ToString()
    {
            return "in Parent";
    }

    public virtual void printer()
    {
           Console.write(this.ToString());
    }
}

Class Child : Parent
{
    public override String ToString()
    {
            return "in Derived";
    }

    public override void printer()
    { 
           base.printer();
           Console.write(this.ToString());
    }
} 
```

在主要我有

```
Parent p = new Derived();
p.printer(); 
```

输出为“In Derived”2 次。这是预期的，因为调用了大多数覆盖的方法。

但是，是否可以调用基类的 ToString() 方法，在这种情况下，而不是基类调用派生类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:04:58.960

您*可以*通过使用[new](http://msdn.microsoft.com/en-us/library/435f1dw2.aspx)关键字来解决此问题，而不是在 Child 类中覆盖 ToString()。

然后，当您的对象被引用为`Child`（或 的子级`Child`）时， ToString() 将映射到`Child.ToString()`. 当它被转换为基础对象（例如`Parent`）时，ToString() 将映射到`Parent.ToString()`.

不过，我认为这不是很好的做法，尤其是使用 ToString() 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:10:36.943

没有。表格 MSDN：

> 调用虚拟方法时，会检查对象的运行时类型以查找覆盖成员。调用最派生类中的重写成员，如果没有派生类重写该成员，则该成员可能是原始成员。

因此，即使您转换为`Parent`，该对象仍然是 a `Child`，因此将应用覆盖。问题是您是`ToString()`从已被覆盖的父类调用的，因此如果实例是`Child`.

解决它的一种方法是创建一个单独的私有函数而不是使用`ToString()`：

```
public class Parent
{
    public override String ToString()
    {
        return ToStringPrivate();
    }

    private string ToStringPrivate()
    {
        return "in Parent";
    }

    public virtual void printer()
    {
        Console.WriteLine(this.ToStringPrivate());
    }
}

public class Child : Parent
{
    public override String ToString()
    {
        return "in Derived";
    }

    public override void printer()
    {
        base.printer();
        Console.WriteLine(this.ToString());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T17:57:44.500

您必须在 Child 中添加一个新方法：

```
public override string BaseToString()
{
     return base.ToString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:05:23.613

我认为您已经触及原始问题代码中的解决方案。您只需要直接调用 base.ToString() 即可。您的 base.printer() 调用仍在调用 this.ToString() ，它将从 Child 类调用覆盖的版本。

# fullcalendar - Fullcalendar 问题：在日视图中选择错误的时间段

> ID：10937146
> 
> 赞同：2
> 
> 时间：2012-06-07T17:53:01.110
> 
> 标签：fullcalendar

在日视图中，当您单击一个时隙时，它会选择一个较晚的时隙。在很早的时间（凌晨 3 点左右）工作正常，然后选择的时间段移动到比实际点击的时间晚 30 到 90 分钟。

[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)上的演示工作正常，所以这可能是我的自定义 css 中的问题。

我在客户端使用 Firefox 12.0 和 FullCalendar 1.5.3，服务器端是 WAMP 和 CodeIgniter（但所有服务器端代码都可以正常工作）。

这些是我找到的以前的报告，但没有明确的解决方案：code dot google dot com/p/fullcalendar/issues/detail?id=631 code dot google dot com/p/fullcalendar/issues/detail?id=1216

由于它是大型应用程序的一部分，因此无法发布我的代码。所以没有那个，我应该去哪里看的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T10:59:36.413

跟进 Ryan Nel 的回答：

我有同样的情况，字体系列被我的“主题”样式表覆盖，迫使日历插槽选择在当天晚些时候关闭。

我在我的主题 CSS 中添加了以下行，以在日历上强制行高：

```
.fc-agenda-slots {
    line-height: 1em !important;
} 
```

它对我有用，但可能还有其他事情，比如你想要强制执行的填充。只需在相同的括号内添加规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T12:51:19.100

这个问题很老，但我刚刚遇到了同样的问题。

这是由我的自定义 CSS 中的两条规则引起的。第一个是我的 reset.css 中的一般“行高”设置（删除它是最大的不同）。另一个是适用于的填充规则：

```
#calendar table {
    padding: 10px;
} 
```

一旦我删除了这两个规则，就可以准确地选择时间段。

# php - PHP 格雷码 - XOR 错误

> ID：10937148
> 
> 赞同：3
> 
> 时间：2012-06-07T17:53:07.360
> 
> 标签：php, xor, gray-code

我在php中编写了这个函数来做一个数字的[格雷码](http://en.wikipedia.org/wiki/Gray_code)：

```
function c_gray($num){
    $bin=decbin($num);  //binary of the number
    $xor=array();
    $xor[]=reset(str_split($bin)); //Get the first bit of binary and put it as the first element of $xor array
    for($i=0;$i<strlen($bin)-1;$i++){  //for any bit of the binary 
            echo $xor[]=$bin[$i] ^ $bin[$i+1]; //do the xor with the next bit of binary and put the result in array $xor
    }
    $res=implode($xor);  //put hte final code in $res
    return $res;
} 
```

问题在于异或。如果我打印`$xor`数组，则只有我放入的第一个元素`$xor[]=reset(str_split($bin));`

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:10:30.390

您的字符串元素不会隐式转换为整数...尝试：

```
function c_gray($num){
    $bin   = decbin($num);  //binary of the number
    $xor   = array();
    $xor[] = reset(str_split($bin)); //Get the first bit of binary and put it as the first element of $xor array
    for($i=0;$i < strlen($bin)-1; $i++){  //for any bit of the binary
        $xor[] = (int)$bin[$i] ^ (int)$bin[$i+1]; //do the xor with the next bit of binary and put the result in array $xor
    }
    $res  = implode($xor);  //put hte final code in $res
    return $res;
} 
```

# macos - Mac 沙盒：真的可以这么简单吗？

> ID：10937150
> 
> 赞同：2
> 
> 时间：2012-06-07T17:53:32.017
> 
> 标签：macos, osx-snow-leopard

我只是想对沙盒进行一些确认。我完全理解为什么要实施它以及它背后的原理。

当我开始接近我的第一个 Mac 应用程序的发布时，我一直推迟沙盒，因为它听起来相当复杂，我想我会在更近的时候担心它。我观看了一些 Apple 视频并阅读了一些文档（不是全部），并认为我会尝试将其添加到我的应用程序中！

我在 Xcode 中打开了沙盒，没有指定任何权利，因为它们与我的应用程序并不真正相关，并且权利证书在左侧弹出并运行我的应用程序....就是这样，一切运行良好，没有问题。

这就是我感到困惑的地方......肯定不会那么简单？！我的应用程序在后台保存数据，无需用户输入保存，它只是无缝地发生。无论如何，我检查了 /Users/whoever/Library/Containers 并且有一个名为 container 文件夹的应用程序，并且相关数据保存在那里（当然这不是我在应用程序中指定为保存位置的确切路径）。我关闭了我的应用程序，重新打开它，果然保存的数据仍然存在。

是这样吗？现在这是否意味着我的应用程序已被沙盒化，或者我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:53:22.200

对，就是那样。如果您的应用程序真的不需要任何权利，甚至不需要打开/保存用户指定的文件的能力，那么沙盒就是微不足道的。

# css - 使用 CSS 设置页面样式时遇到问题

> ID：10937151
> 
> 赞同：1
> 
> 时间：2012-06-07T17:53:48.797
> 
> 标签：css

我的网站存档页面有问题。我不明白它在做什么，因为 .entry-content 样式已经完美地设置为它在博客页面上的样子。但是，当您转到[存档页面](http://www.averylawoffice.ca/averywordpress/?m=201203)时，它会变得紧凑而紧凑，并且页脚的左侧甚至还有一个间隙。我的类别做同样的事情，但是网站上的所有其他样式都很好。我正在使用 firebug 来查看样式，但通过它，我什至看不到 .entry-content CSS 样式没有出现时可能发生的情况。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:22:31.970

归档页面中有一个名为“date”的类应用于正文标记，因此只需从该类中删除 padding-left 即可修复您的网站页脚。

```
.date {
 color: #666;
 position: relative;
 padding-left: 10px;/* Remove This*/
 min-height: 10px;
} 
```

现在，发布日期问题：我可以看到您在标签内使用了包装的帖子标题，但它在存档页面和标题显示中的包装内标签设置为阻止。所以只需将标题标签更改为存档页面中的跨度。下面是您要跨度的代码更改标头。它在所有页面代码中具有良好的主要一致性。

```
<header class="entry-header">
    <h1 class="title">
      <a href="http://www.averylawoffice.ca/averywordpress/?p=10" title="Permalink to Looking for someone to hire?" rel="bookmark">Looking for someone to hire?</a>
   </h1>
   <div class="entry-meta">Posted on: March 27, 2012 </div><!-- .entry-meta -->
</header> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T17:59:40.797

只需`height`从

```
.entry-header {
    font-weight: bold;
    height: 50px; /* remove this */
    margin-left: 0;
    text-align: left;
    width: 400px;
} 
```

# css - CSS 以 100% 宽度缩放元素

> ID：10937154
> 
> 赞同：25
> 
> 时间：2012-06-07T17:54:01.943
> 
> 标签：css, webkit-transform

我有兴趣缩小 100% 宽度的 div。我遇到的问题是，当我将元素按比例缩小时，它会得到一个固定的宽度，并且不再延伸 100% 的宽度。

示例 - [http://jsfiddle.net/Fz7qh/2/](http://jsfiddle.net/Fz7qh/2/)

当我使用 CSS 缩放属性（而不是变换：缩放）时，它按预期工作，但我听说缩放属性没有得到很好的支持。我的问题是这可以通过 CSS 转换比例来实现吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-07T18:17:59.743

要模拟该`zoom`属性在这种情况下的作用，您可以添加`-transform-origin: 0 0;`并将其设置`width`为`oldWidth / newScale`( `100 / 0.7 ~= 142.857143`)：

[http://jsfiddle.net/thirtydot/Fz7qh/5/](http://jsfiddle.net/thirtydot/Fz7qh/5/)

```
div.zoomed {
    -webkit-transform: scale(.7);
    -webkit-transform-origin: 0 0;
    width: 142.857143%;
}​ 
```

# ios - 面向开发人员的 iOS 发布日期

> ID：10937156
> 
> 赞同：1
> 
> 时间：2012-06-07T17:54:02.287
> 
> 标签：ios

有 ios 企业协议的开发人员有没有办法比公众更早地了解即将到来的 ios 更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T17:59:15.797

Apple 不会向开发人员（企业或其他）提供此信息（确切的发布日期）。

但是，开发者协议的标准部分提供对预发布 iOS 软件的访问。因此，**任何**开发人员、企业或其他人都可以在 iOS 软件向公众发布之前访问它的版本。

# ios5 - iPhone——模拟器黑屏——viewcontroller

> ID：10937157
> 
> 赞同：0
> 
> 时间：2012-06-07T17:54:07.223
> 
> 标签：ios5, ios-simulator

我已经搜索了这个论坛并查看了在 iPhone 模拟器上加载屏幕时“黑屏”视图问题的各种解决方案，但我相信我的问题是独一无二的，因此我还没有找到解决方案。

这是正在发生的事情：

*   当我使用 Interface Builder 使用“push”segue（拖动线，选择“push”）将 ViewA 链接到 ViewB 时，ViewB 正确加载；
*   当按下 ViewA 上的按钮时执行“推送”。

但是，当我在按下 ViewA 上的按钮时尝试以编程方式加载 ViewB 时，ViewB 显示为黑屏。这是我正在做的事情：

*   我正在使用最新版本的 XCode；
*   `-(void) loadView`已被 ViewB 注释掉；
*   我使用Interface Builder创建了ViewA和ViewB *，并且*没有任何一个View的.xib文件，所以我相信当按下按钮时以编程方式分配+初始化ViewB（？）时我不能使用“initWithNibName”参数（？）。
*   我有一个 NavigationController，ViewA 是“RootView”，ViewA 和 ViewB 都有一个 ViewController。
*   我用来通过按 ViewA 按钮以编程方式加载 ViewB 的代码如下：

    ViewB *viewB = [[ViewB alloc] init]; [self.navigationController pushViewController:viewB 动画:YES];

有没有人有任何解决方案？（PS——这个社区太棒了！！！）

感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:22:58.980

尝试使用 initWithNibName:@"" 包初始化 ViewController：将该视图的 XIB 文件的名称放在第一个参数的位置，不带扩展名“.xib”，并将包设置为 nil 或 [NSBundle mainBundle]。您可以进一步查看 Apple 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T11:34:54.240

可能 [self navigationController] 为零，检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T23:07:04.837

当你使用故事板时，你应该像这样初始化你的 ViewController

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle bundleForClass:[self class]]];
ViewControllerB *viewController = [storyboard instantiateViewControllerWithIdentifier:@"identifier"];
[self.navigationController viewController animated:YES]; 
```

在界面生成器中，您应该将尝试初始化的视图控制器的标识符设置为“标识符”

（MianStoryboard_iPhone 当然是你故事板的名字！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T13:07:37.877

可能你的 XIB 搞砸了。您可以尝试删除 viewcontroller.m[h][xib] 并添加一个新的。在此之前，复制并粘贴 m 和 h 文件的内容。添加新的空视图控制器后，刚刚过去的内容。不幸的是，您将不得不再次组装 xib。

# python - 如何在python中为facebook graph api批处理请求模拟curl -F

> ID：10937164
> 
> 赞同：3
> 
> 时间：2012-06-07T17:54:48.863
> 
> 标签：python, facebook-graph-api, curl

我正在尝试按照以下示例进行批处理：http: [//developers.facebook.com/docs/reference/ads-api/batch-requests/](http://developers.facebook.com/docs/reference/ads-api/batch-requests/)

具体来说，curl 命令：

```
 curl -F 'access_token=____' 
    -F 'batch=[
               {
                "method": "POST",
                "relative_url": "6004251715639",
                "body": "redownload=1&max_bid=35"
               },
               {
                "method": "POST",
                "relative_url": "6004251716039",
                "body": "redownload=1&max_bid=35"
               },
               {
                "method": "POST",
                "relative_url": "6004251715839",
                "body": "redownload=1&max_bid=35"
               }
              ]' https://graph.facebook.com 
```

工作正常。

当我尝试在 python 中使用 urllib2 时，我不知道如何模拟“-F”标志。

当它是单个请求的“-d”时，我知道该怎么做：

```
curl -d  "name=Chm&daily_budget=1000&lifetime_budget=10000
&campaign_status=1" "https://graph.facebook.com/
act_368811234/adcampaigns?access_token=___" 
```

我使用python代码模拟了它：

```
def sendCommand(self, url, dataForPost=None):        
    if dataForPost == None:
        req = urllib2.Request(url)
    else:
        req = urllib2.Request(url, dataForPost)        
    jar = cookielib.CookieJar()
    opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(jar))
    content = opener.open(req)
    response = content.read()
    return response 
```

如何模拟上面的 -F 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:01:03.607

您的`sendCommand`功能应该可以工作。dataForPost 需要一个字典。如果你通过它下面的一个，它将复制 access_token 和批处理的 -F 函数。我正在使用`"""`字符串文字并去除空格。您可以将其保留，但 urllib2 会尝试对其进行 url 编码，这可能会使调试变得更加困难。您可以尝试使用 json 库来生成批处理值。

```
dataForPost = {'access_token' : '____',  
               'batch' : """[
               {
                "method": "POST",
                "relative_url": "6004251715639",
                "body": "redownload=1&max_bid=35"
               },
               {
                "method": "POST",
                "relative_url": "6004251716039",
                "body": "redownload=1&max_bid=35"
               },
               {
                "method": "POST",
                "relative_url": "6004251715839",
                "body": "redownload=1&max_bid=35"
               }
              ]""".replace('\n', '').replace('\t', '').replace(' ', '')} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-24T15:46:57.123

对于 Python，我们可以使用[Facepy](https://github.com/jgorset/facepy)来获取批量请求的功能和处理 Facebook Graph API 的分页。

根据 facebook，graph api 一次需要 50 个请求，但 facepy 会为我们处理，即我们可以将尽可能多的请求附加到列表中并对其进行批处理。

```
from facepy import GraphAPI
access = <access_token>
batch1=[
    {'method': 'GET', 'relative_url': 'me/accounts'}
]
graph = GraphAPI(access)
data= graph.batch(batch1)

for i in data:
    print i 
```

# php - PHP 中的有效 SQL 查询失败？

> ID：10937165
> 
> 赞同：-4
> 
> 时间：2012-06-07T17:54:51.087
> 
> 标签：php, mysql, mysqli

所以。我正在开发一个简单的系统。我有以下代码：

```
$sql = mysqli_connect($db_host, $db_user, $db_pass, $db_name);
$aaa="SELECT UserName,activeuntil from sessions WHERE `sessionid`='$b' AND `sessiontype`=$a";
$sqc=mysqli_prepare($sql,$aaa);
mysqli_execute($sqc);
mysqli_bind_result($sqc,$un,$til);
while(mysqli_fetch($sqc)){echo $un;if(strtotime($til)>time())$user=$un;}
echo "Hi, $user"; 
```

$aaa 在我的情况下产生：

```
SELECT UserName,activeuntil from sessions WHERE `sessionid`='rc1xamoblbqxul78czfsvub62fudzc' AND `sessiontype`=0 
```

这是在 PhpMyAdmin 中完美运行的查询。但是，整个代码不会产生结果（应该有 1 行）。为什么？我想我错过了一些非常简单的东西，但是什么？

PS：如果你只能说“请清理你的输入”、“这种编码风格很糟糕”，请不要回答这个问题，因为这些都会被修复。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:59:14.950

我建议：

```
$link = mysqli_connect($db_host, $db_user, $db_pass, $db_name);
$query ="SELECT UserName,activeuntil from sessions WHERE 'sessionid'='$b' AND 'sessiontype'=$a";
$query = mysqli_query($link, $query);
while($row = mysqli_fetch_object($query))
{
echo "Hi ".$row->UserName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:34:42.037

我忘记了一个微不足道的、非 SQL 相关的东西（一个包含语句......）。无论如何，感谢所有的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:01:46.573

当我在 php 中遇到查询问题时，我会回显我的 SQL 字符串并在 PHPmyAdmin 中运行它。如果它执行正常，那么您的连接有错误。希望这可以帮助。

# javascript - 用于在 CKEditor 中插入图像的 G-Mail 样式拖放

> ID：10937166
> 
> 赞同：0
> 
> 时间：2012-06-07T17:55:01.490
> 
> 标签：javascript, html, image, upload, ckeditor

如何增强**CKEditor**以支持将图像**从用户桌面拖放**到 CKEditor 文本框的内容中？它必须在后台将图像上传到服务器，并在上传完成后插入指向图像的链接。服务器上图像的生成路径无关紧要（它可能是我所关心的 GUID）。

当然不是一件容易的事，我非常愿意购买这样的插件，但是我找不到任何目前可以做到这一点的插件。有没有人对如何实现这样的插件有任何想法？今天我环顾四周，但我发现最好的是这个[dropfile 插件](http://dev.ckeditor.com/ticket/5692)，不幸的是，它似乎在 CKEditor 3.0 中不起作用。谢谢你的帮助。

编辑

我刚刚看了这个视频，它显示 CKEditor 完全按照我的意愿做，但是他没有提到如何设置它： [http ://www.youtube.com/watch?v=DVInjn51VYw](http://www.youtube.com/watch?v=DVInjn51VYw)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:00:04.953

制作这部电影的人实际上为 CKEditor 制作了一个插件：http: [//alfonsoml.blogspot.nl/2012/06/drag-and-drop-uploads-in-ckeditor.html](http://alfonsoml.blogspot.nl/2012/06/drag-and-drop-uploads-in-ckeditor.html)

# python - 带有返回数据的芹菜任务：做错了还是做对了？

> ID：10937177
> 
> 赞同：1
> 
> 时间：2012-06-07T17:55:38.427
> 
> 标签：python, celery, celeryd, celery-task

我正在学习使用芹菜。我有一个函数（在 Flask 应用程序中），从我到目前为止所学到的有点伪代码中：

```
def do_a_task_route():
    try:
        result = a_celery_task.apply_async(args=[request_data])
        returned = a_celery_task.AsyncResult(result.task_id).get(timeout = 2.0)
        return jsonify(response = returned['response'])
    except:
        return jsonify(response = "some big problem") 
```

我不是 100% 确定这是正确和最好的，但现在对我有用。似乎结果/返回的行可能是一个“返回 = run_task”，其中运行任务执行任务并等待。

我正在考虑重构方向——a）将这两行（结果/返回）捆绑在一个运行任务并调用结果的函数中，或者 b）将“AsyncResult”放入任务本身并返回。

以前做过这件事的人的芹菜方法是什么？或者只是来自以前微调过芹菜的人的一些反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:27:26.223

仅当您打算在 Web 应用程序的其他地方重用此代码时，重构此代码才有意义。如果只是从这里调用它们，则无需将这几行放入新函数中。但是，如果您打算重用代码，那么最好有一个函数来启动该任务并返回响应。我真的不认为这是关于 Celery 的问题，因为这些重构原则适用于任何代码。

# c# - 如何从数字格式转换回来？

> ID：10937181
> 
> 赞同：0
> 
> 时间：2012-06-07T17:55:53.623
> 
> 标签：c#, windows-phone-7

在我的应用程序中，我使用以下

```
newTotal.ToString("c", (NumberFormatInfo)NumberFormatInfo.CurrentInfo.Clone()) 
```

将输入的号码转换为手机的号码格式。但是有没有一种简单的方法可以再次将其转换回一个简单的数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:03:16.430

只需使用 double.parse，如下所示：

```
var text = (1234,567).ToString("c");

var number = double.Parse(text, System.Globalization.NumberStyles.Currency, cultureInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:06:20.073

您可以使用[Parse](http://msdn.microsoft.com/en-us/library/f56zcx39.aspx)系列方法来做到这一点。您没有指定 newTotal 是什么类型，但 parse 可用于所有数字原始类型。

# database - 如何处理大数据数据集市/事实表？（2.4亿行）

> ID：10937184
> 
> 赞同：5
> 
> 时间：2012-06-07T17:56:04.720
> 
> 标签：database, hadoop, data-warehouse, hive, infobright

我们有一个 BI 客户，每月在他们的销售数据库表中生成大约 4000 万行，这些行是从他们的销售交易中生成的。他们想用他们 5 年的历史数据建立一个销售数据集市，这意味着这个事实表可能有大约 2.4 亿行。（40 x 12 个月 x 5 年）

这是结构良好的数据。

这是我第一次面对如此大量的数据，这让我分析了 Inrbright 等垂直数据库工具。但是使用这种软件，一个简单的查询仍然需要非常非常长的时间来运行。

这让我看了一下 Hadoop，但在阅读了一些文章后，我得出结论认为 Hadoop 不是创建事实表的最佳选择（即使使用 Hive），因为在我的理解中是用于处理非结构化数据。

所以，我的问题是：建立这个挑战的最佳方式是什么？，我不是在寻找合适的技术吗？在如此大的事实表中，我可以获得的最佳查询响应时间是多少？..或者我在这里面对一堵真正的墙，唯一的选择是建立聚合表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T01:24:08.480

您是否查看过适合您需求的 Google BigQuery（付费高级服务）。这很简单

1.  以 CSV 格式加载数据（由记录的新行或字段的可配置字符分隔）。该文件可以是 gzip 格式。您还可以附加到现有表。

2.  使用 SQL 语句（虽然有限的 sql 语句）开始查询，结果以数百万行的秒数返回。

3.  将数据提取到 CSV 或其他表中（类似于聚合层）

看看这里。[https://developers.google.com/bigquery/](https://developers.google.com/bigquery/)

用于数据处理的前 100GB 是免费的。所以你现在就可以开始了，它还与谷歌电子表格集成，这将允许你创建图表和图形等可视化来进行管理。您可以将谷歌电子表格导出为 Microsoft Excel / PDF。

谷歌表示它可以扩展到多兆字节并提供实时查询（几秒的响应）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T19:05:46.750

首先，我假设它的 240m 而不是 2400m。

首先看看 ssd.analytical-labs.com

FCC 演示在 Infobright 上运行了一个 150m 的记录事实表，我怀疑在 VW 上它会更快。

关键是保持简单，会有一些查询使它变慢，但它的响应速度非常快。

我建议您考虑聚合、查询的方式以及重要的是您查询的内容。

例如，根据性能、产品、品牌、年份等将其拆分为 Marts。如果用户只想对价值不到 1 年的数据进行查询（这种情况比大多数人想的要多） ) 然后他们可以使用更小的事实表。

存储很便宜，所以只要它保持响应，复制数据就没有关系。

当然，如果您正在执行 OLAP，您可以使用内联聚合表来确保大多数查询运行在更可接受的级别（假设它们已经汇总）。

硬件也很重要，确保你有快速的磁盘，这几乎总是瓶颈，你从磁盘上获取数据的速度越快，通常它显示给最终用户的速度就越快。

架构设计也很重要，现代列存储数据库更喜欢在可能的情况下使用 0 个连接的非规范化表，我过去发现，90% 的查询有 1 个非规范化表，然后有一些连接表（例如日期暗淡）用于大多数用例的特殊情况都很重要。

无论如何，那是我的 2 美分。如果你想要关于它的 Skype 或其他什么，请在 twitter 上联系我。

汤姆

编辑：

这里还有一个非科学基准来支持 JVD 所说的话：

*   物理盒上的 ssd：175.67 MB/秒
*   物理盒上的 sata：113.52 MB/秒
*   ec2：75.65 MB/秒
*   ec2 ebs 突袭：89.36 MB/秒

如您所见，读取速度存在很大差异。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T22:34:09.550

我认为这里有几种方法，

1）您应该在mondrian上尝试聚合表，agg表的缺点是您需要事先了解大多数重复查询的用例，如果您不这样做，那么调整它就不那么容易了，您最终会花费很长时间您未优化聚合表的查询的响应时间。

2）另一种选择是对事实表的数据进行分区，可能按年份，为每年创建不同的模式，为整个历史创建一个虚拟多维数据集。如果您有正确的软件，您还可以创建物化视图（如果您有 Oracle）或索引视图（如果您有 MS SqlServer）。

后期的方法对我来说效果很好，查询时间有显着改善。此外，我的 ETL 过程没有受到影响（在选项 1 中，您需要创建一个额外的过程来构建和维护聚合表），因为 RDMBS 负责更新每个分区上的数据的过程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T18:50:49.083

您可能会考虑打包的 NoSQL/分析解决方案，例如[DataStax Enterprise](http://www.datastax.com/products/enterprise)，它使用 Apache Cassandra 与 Hadoop 和其他有用的分析工具配对。没错，Hadoop 的“默认”HDFS 文件系统非常适合非结构化数据，但是将其与 NoSQL 数据存储（如 Cassandra 或 HBase）集成将使您能够更轻松地使用 MapReduce 分析结构化数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T19:31:34.943

我成功用于超大型数据仓库的另一种技术组合是 Hadoop + Hive。使用 Map/Reduce 作业处理数据，并作为外部表呈现给 Hive。通过交换阶段和数据仓库区域之间的分区来执行更新。

这种方法的一大优势是可以对数据运行（几乎）正常的 SQL 查询。缺点 - 您无法将 Hive 后端连接到交互式 UI 前端。但是，如果您所做的只是运行每日报告和数据挖掘，那么这应该可行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T19:05:25.673

hadoop 绝对适合这样的大数据。你可以将它与 hbase 一起使用，它可以让我们扩展到数百万行和数十亿列，并且还提供了很好的水平扩展性。它适用于实时随机读写访问。 .另一方面，hive 适合批处理，因此您可以在后台运行 hive 作业以执行其他任务..我们不应将 hadoop 误认为是传统 RDBMS 的替代品，但它确实有助于处理庞大的数据集..您可以使用另一个 apache 项目“sqoop”，它允许我们将现有数据库中的数据导入到 hadoop 集群，而不会有太大的痛苦。

# java - 在一个语句中获取从 Java 中的 MySQL INSERT/触发器返回的模拟自动增量值的方法？

> ID：10937185
> 
> 赞同：2
> 
> 时间：2012-06-07T17:56:05.353
> 
> 标签：java, mysql

我有一个 MySQL 表，它有一个两列主键，后者在以前是 MyISAM 时是自动递增的。当我将它切换到 InnoDB 时，我必须将 auto_increment 列转换为普通的 int，该 int 使用插入前触发器将自身更新为 max()+1。目前没有问题。。

进行插入的Java PreparedStatement 需要知道刚刚插入的行的last_insert_id，并且不需要Oracle/etc 的RETURNING 功能。我不确定如何最好地检索该值。有没有办法在不将所有插入函数包装到存储函数或需要第二次查询的情况下获得模拟的自动增量值？

仅供参考，大致如下（只是写出来，所以可能并不完美，但它应该让这个想法得到理解）：

```
创建表 t (
  id1 int 非空，
  id2 int NOT NULL DEFAULT '0',
  主键（id1，id2）
) 引擎=InnoDB;
分隔符 $$
CREATE TRIGGER t_auto_increment BEFORE INSERT ON t
每一行
开始
    SET NEW.id2 = (SELECT MAX(id2)+1 FROM t WHERE id1=NEW.id1);
结束$$
分隔符；
```

我知道对于其他数据库引擎，我可以告诉它使用插入查询返回 id2，我认为这可以解决我的问题，但 MySQL 似乎不支持这一点。我宁愿不做一些存储函数来包装每个插入，所以我想到的最好的方法是设置一个变量并在之后查找它..虽然我更喜欢不需要第二个的东西查询服务器，当然，尽管说查询会很轻。

# database - Visual FoxPro 多表表单

> ID：10937193
> 
> 赞同：3
> 
> 时间：2012-06-07T17:56:48.230
> 
> 标签：database, foxpro

我刚开始在学校使用 FoxPro，当我尝试创建一个需要向多个表添加数据的表单时遇到了一些问题（没有设计器）。

我正在使用 APPEND 命令，但这似乎只将数据添加到主表中。

非常感谢任何有关解决方案的建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:47:58.427

在进行追加之前，您需要明确选择工作区（别名或表）。例如，在您的“CLICK”事件中，您会执行类似...

```
SELECT FirstTableName
append blank
replace FieldW with "something",;
        FieldX with 1.23,;
        FieldY with SomeVariable,;
        FieldZ with Thisform.SomeTextbox.Value

SELECT SecondTableOrAlias
append blank
replace FieldA with Thisform.AnotherTextbox.Value,;
        FieldB with Thisform.SomeCheckBox.Value

SELECT ThirdTableOrAlias
append blank
replace ... 
```

如果尚未从表单的 DataEnvironment 打开表，您可能希望通过在上述追加/替换之前执行以下操作来确保它们首先打开

```
if not used( "FirstTableName" )
   select 0
   use FirstTableName
ENDIF 

if not used( "SecondTableOrAlias")
   select 0
   use SecondTableOrAlias
endif 
```

ETC...

此外，VFP 也支持 SQL，所以你可以这样做

```
insert into FirstTableName ;
   ( FieldW,;
     FieldX,;
     FieldY,;
     FieldZ ;
   );
   values ;
   ( "something",;
     1.23,;
     SomeVariable,;
     Thisform.SomeTextbox.Value ;
   ) 
```

并通过 SQL-Select 查询数据

```
select * from FirstTableName ;
   where FieldW = "something" ;
   into cursor C_SomeTempResultSet READWRITE 
```

# php - 如何捕获 Shopify Webhook 发送的 HTTP POST 请求

> ID：10937198
> 
> 赞同：15
> 
> 时间：2012-06-07T17:57:16.867
> 
> 标签：php, ruby-on-rails, shopify, webhooks

我有点像个菜鸟，并且不怕承认这一点，我正在从事这个项目作为学习经验，以便更好地使用 php 和服务器端脚本/ing 处理。

我试图想出一种方法来使用 Shopify 并在每次从我的 Shopify 购物车中完成订单时同时更新服务器外数据库。例如，有人从我的在线商店购买了东西，我希望它更新我的家庭数据库库存以显示它现在少了一件商品。

我得出的结论是，最好的方法是设置一个[webhook 通知](http://api.shopify.com/webhook.html)，将 HTTP POST 请求发送到我的服务器，然后让我的服务器捕获 POST 并将其解析为 XML。然后，我将通过一个 php 脚本读取 XML，该脚本将更新我的数据库。

我的 php 没有问题，但我似乎无法弄清楚如何在我的服务器上捕获 webhook。Webhook 向我询问发送 POST 请求的 URL，我的问题是；网址是什么？

我做了一些研究，发现您可以通过 html、php、Access-Control-Allow-Origin 等多种方式捕获 POST 请求。但是，由于我还是新手，所以我不真正了解如何做到这些。我尝试过使用 HTML 隐藏操作表单，但似乎无法让它捕获 XML。

我想做的就是让 webhook 发送它的 POST 请求，并将它作为 .xml 捕获。这样我就可以在每天结束时读取 xml，并相应地更新数据库。

如果您能想到更好或更简单的方法来做到这一点，请务必给我您的建议。我希望这是安全的，所以像 Access-Control-Allow-Origin 这样的方法是不可能的。

tl;dr：我必须在服务器上做什么才能捕获 webhook 通知？我的服务器上应该有什么脚本来提供给 webhook？如何编写回调脚本？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-11T18:31:26.890

[在http://example.com/whatever.php](http://example.com/whatever.php)创建一个公共 URL ，其中 example.com 是您的域名，whatever.php 是您可以编辑的 PHP 文件。

然后把这段代码放到whatever.php中：

```
<?php
$webhookContent = "";

$webhook = fopen('php://input' , 'rb');
while (!feof($webhook)) {
    $webhookContent .= fread($webhook, 4096);
}
fclose($webhook);

error_log($webhookContent);
?> 
```

然后在 Shopify 管理员中，您可以创建一个新的 webhook 并将其指向[http://example.com/whatever.php](http://example.com/whatever.php)，当您单击 Shopify 管理员中的“测试 webhook”按钮时，Shopify 将发布到您上面的脚本，这应该反过来将 webhook 的主体写入您的 PHP 错误日志。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-21T15:11:13.267

抱歉，我没有足够的声誉发表评论，但这里是 Edward Ocampo-Gooding 的回答中的死链接的内容：

> **PHP 示例 w/ SimpleXML (PHP 5+)**
> 
> 下面的脚本向您展示了如何将 XML 数据从 Shopify 获取到您的脚本中、归档文件并发送正确的标题...
> 
> 鉴于 webhook 管理员中的新订单订阅设置为：[http ://example.com/some-script.php?key=123456789](http://example.com/some-script.php?key=123456789)
> 
> [http://example.com/](http://example.com/)上 some-script.php 的内容：

```
<?     
// Protect URL from rogue attacks/exploits/spiders
// Grab from GET variable as given in Shopify admin URL
// for the webhook
//
// NOTE: This is not necessary, just a simple verification
//
// A digital signature is also passed along from Shopify,
// as is the shop's domain name, so you can use one or both of those
// to ensure a random person isn't jacking with your script (or some
// spider just randomly hitting it to see what's there).
//
// If $key doesn't matched what should be passed in from the
// webhook url, the script simply exits
$key = $_GET['key']; 

if ($key != '123456789') {
  header('HTTP/1.0 403 Forbidden');
  exit();
}

// Variables used for processing/saving
$xmlString = ;  // Used to get data from Shopify into script
$name = ;  // Saves the billing address name to be used for later ...
$email = ;  // Save the email address of the user to be used for later ...
$productTitles = array();  // Saves all titles of products purchased to be used for later ... 

// Get XML data and read it into a string for use with SimpleXML
// Thanks to David Oxley (http://www.numeriq.co.uk) for help with this
$xmlData = fopen('php://input' , 'rb'); 
while (!feof($xmlData)) { $xmlString .= fread($xmlData, 4096); }
fclose($xmlData);

// Save order XML in file in orders directory
// This creates a file, write the xml for archival purposes, and closes the file ...
// If the file already exists, it appends the data ... this should create a separate
// file for every order but if two orders are processed the same second, they'll both
// be in the same file
file_put_contents('orders/order' . date('m-d-y') . '-' . time() . '.xml', $xmlString, FILE_APPEND);

// Use SimpleXML to get name, email, and product titles
// SimpleXML allows you to use the $xml object to easily
// retrieve the data ...
// Please note, if hyphens are used in the xml node, you must
// surround the call to that member with {'member-name'} as is
// shown below when getting the billing-address name & the
// line items
$xml = new SimpleXMLElement($xmlString);

$name = trim($xml->{'billing-address'}->name);
$email = trim($xml->email);

// Create productTitles array with titles from products
foreach ($xml->{'line-items'}->{'line-item'} as $lineItem) {
  array_push($productTitles, trim($lineItem->title));
}

// You would then go on using $name, $email, $productTitles in your script
// to do whatever the heck you please ...

// Once you are done doing what you need to do, let Shopify know you have 
// the data and all is well!
header('HTTP/1.0 200 OK');
exit();

// If you want to tell Shopify to try sending the data again, i.e. something
// failed with your processing and you want to try again later
header('HTTP/1.0 400 Bad request');
exit();
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T19:17:52.050

听起来你对PHP最熟悉，所以我会根据它来回答。

您需要一个可作为公共 URL 访问的 PHP 脚本/页面，该 URL 可以获取 Shopify 发送给您的 HTTP POST 中发送的数据并将其转换为您的数据库所需的形式。

这是 PHP 脚本的示例：[http ://wiki.shopify.com/WebHook#PHP_Example_w.2F_SimpleXML_.28PHP_5.2B.29](http://wiki.shopify.com/WebHook#PHP_Example_w.2F_SimpleXML_.28PHP_5.2B.29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T22:06:05.717

要回答有关 URL 的问题，这是您服务器上将处理接收 webhook 的端点。这对于大多数 Web 框架来说设置起来非常简单，它只需要处理 post 请求并以 200 OK 响应。

一旦您在服务器上设置了端点，您就可以在 shopify 上创建 webhook，其中 URL 是网络服务器上的端点。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-30T09:12:10.073

Shopify webhook 不使用常见的 GET 或 POST 请求方法传递数据。您可以在 PHP 中使用 fopen() 方法并传入 php://input 流。

假设您为购物车更新创建了一个 webhook 并设置 URL [http://example.com/cart_update_hook.php](http://example.com/cart_update_hook.php)然后将以下代码放入 cart_update_hook.php 以获取 shopify webhook 发送的数据。

```
<?php
$webhookContent = "";
$webhook = fopen('php://input' , 'rb');
while (!feof($webhook)) {
    $webhookContent .= fread($webhook, 4096);
}
fclose($webhook);
$data = json_decode($webhookContent, true);
//do whatever you want with the data
?> 
```

# perl - cygwin、perl、dos 版本的 abspath()？

> ID：10937199
> 
> 赞同：4
> 
> 时间：2012-06-07T17:57:19.957
> 
> 标签：perl, path, cygwin

运行 cygwin perl 时，有没有办法从 cygwin 路径获取 DOS 绝对路径？理想情况下，它还可以解析 cygwin 符号链接。

例如：

```
'/cygdrive/c/foo' -> 'C://foo' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T18:14:42.827

从外壳：

```
cygpath -wa /cygdrive/c/foo 
```

来自 perl：

```
system("cygpath", "-wa", "/cygdrive/c/foo") 
```

我没有用符号链接测试过这个。

# search - 我的网站在 Google 搜索结果中出现了多少次？

> ID：10937200
> 
> 赞同：0
> 
> 时间：2012-06-07T17:57:25.577
> 
> 标签：search, google-analytics, yahoo, bing

有没有办法知道我的网站在谷歌（或必应，或雅虎）的搜索结果中出现了多少次，无论页面排名或用户是否点击我网站的链接？

# c++ - 重载赋值运算符是否总是由 C++ 编译器提供？

> ID：10937202
> 
> 赞同：0
> 
> 时间：2012-06-07T17:57:39.337
> 
> 标签：c++, operator-overloading, assignment-operator, constructor-overloading

> **可能重复：**
> [隐式复制构造函数/赋值运算符](https://stackoverflow.com/questions/2779316/behaviour-of-the-implicit-copy-constructor-assignment-operator)
> [C++ 的行为 - 自动生成默认 ctor、复制 ctor 和默认赋值运算符的条件？](https://stackoverflow.com/questions/4943958/c-conditions-for-automatic-generation-of-default-ctor-copy-ctor-and-default)

C++编译器总是提供重载的赋值运算符是真的吗？c++编译器不提供的情况有哪些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T17:59:27.510

任何 C++ 编译器都会隐式提供赋值/复制赋值（`=`）运算符，除非您`const`在类中拥有或引用成员。

如果`const`成员编译器无法提供`=`，因为这会破坏`const`初始化后不修改成员的约定。

如果引用成员编译器不提供`=`，因为它将它留给类的用户来决定适当的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:29:55.880

> C++编译器总是提供重载的赋值运算符是真的吗？

如果您不声明自己的赋值运算符，编译器将*隐含地*为您声明一个（总是）。如果你使用它，那么编译器也会*隐式定义*它（总是）。

Als 的回答中显示了一个常见的误解，即在某些情况下不会对其进行定义。那是**错误**的，类型是否具有常量成员或引用根本不重要，编译器会*声明*并*定义*它。这些情况的情况是*隐式定义*的编译器将无法编译。

如果您在编译器中尝试这样做，错误将不会指向缺少的赋值运算符，而是在编译*隐式定义*的赋值时出错。

# excel - 无法在 Excel Webaccess Webpart 中刷新 Excel 连接

> ID：10937213
> 
> 赞同：2
> 
> 时间：2012-06-07T17:58:08.240
> 
> 标签：excel, sharepoint, sharepoint-2010, business-intelligence, powerpivot

我正在使用带有数据透视表的 excel 工作簿。我正在使用 Excess Webpart 来显示它。当我单击刷新所有数据连接时。

它抛出一个错误。附上屏幕截图。

![在此处输入图像描述](../Images/13d7a075f80e50e753df6db4891d9899.png)

我已经配置了安全存储服务和 Excel 服务应用程序。有什么建议么 ？？

我已经在服务器中安装了 SP2010 + SQL Server 2008R2。我有一个包含数据透视表的 excel 表（数据来自另一个 SQL 服务器）。

我想在 Sharepoint 中显示该 excel 文件。我正在使用 Excel Web Access Webpart 来显示它，但是在单击 Refresh All Data 连接时，它会引发错误。首先，它给出了委派错误。当我为 Excel 服务配置 Secure Store Service 时，错误变为无法刷新数据连接，请联系您的系统管理员。

注意：我尝试在 SP 2010 中部署 powerpivot 解决方案，但在 Farm Solution() 中找不到该解决方案。

我正在现有设置中安装 Powerpivot（SQL Server）。那么，当 Powerpivot 安装完成后，您能告诉我如何继续上述场景吗？

任何人都可以提出任何与之相关的建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T12:57:05.360

找到以下关于如何使用 SP 2010 和 SQL Server 2008 安装 Power pivot 的 URL 链接。步骤很容易理解，它可以解决您的问题。 [PowerPivot 现有场安装 PDF](http://powerpivotgeek.com/docs/PowerPivot_Existing_Farm_Installation.pdf)。

干杯，拉穆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:32:13.340

我只需要在 Excel 文件中添加无人参与的帐户 ID。它解决了我的问题。

谢谢大家。

# objective-c - 连接：没有调用 didReceiveData

> ID：10937215
> 
> 赞同：1
> 
> 时间：2012-06-07T17:58:14.057
> 
> 标签：objective-c, ios5, nsurlconnection, xcode4.3

我在 NSURLConnection 中遇到问题。我的 didRecieveData 方法没有被调用。我不知道有什么问题。我也经历了几乎所有以前的问题，但似乎没有任何解决办法。

请帮帮我。这是我的代码。

```
 -(void)gettheJSONdata
     {
           NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:_serverAddress cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10];

           [request setHTTPMethod: @"GET"];

           NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

          NSLog(@"This is displayed");
     }

     -(void)connection:(NSURLConnection*)connection didReceiveData:(NSData *)data
     {
           NSLog(@"This is not displayed.");
           AppAppDelegate *JSONdata = (AppAppDelegate*)[[UIApplication sharedApplication] delegate];

           JSONdata.userloginJSONdata = [[NSData alloc] initWithData:data];

           NSError *error;

          _result = [NSJSONSerialization JSONObjectWithData:JSONdata.userloginJSONdata options:NSJSONReadingMutableContainers error: &error];

           NSString *test = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
           NSLog(@"Json data : %@",test);
     }

     -(void) connectionDidFinishLoading:(NSURLConnection*) connection
     {
           AppAppDelegate *resultofJSONdata = (AppAppDelegate*)[[UIApplication sharedApplication] delegate];

           resultofJSONdata.JSONdataresult = _result;
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:17:05.337

你没有启动请求。你需要：

```
[connection start]; 
```

或者

```
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES]; 
```

编辑：我下面的评论有不正确的方法名称。尝试同时实现：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

和

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error 
```

看看是否其中任何一个被击中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:58:58.517

最后我解决了这个问题。我没有合成 JSON 数据结果。

我没有意识到这可能会导致 NSURLConnection 出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T07:52:32.790

在我的情况下，标题是没有连接 didReceiveData 没有被调用，如果请求需要，请务必添加授权，

```
 [urlRequest setValue:[UserContext sharedInstance].requesthandler.reqHeader forHTTPHeaderField:@"Authorization"]; 
```

# jquery - jQuery使用插件中使用的链接制作变量

> ID：10937216
> 
> 赞同：0
> 
> 时间：2012-06-07T17:58:14.797
> 
> 标签：jquery, variables, initialization, href, soundcloud

这是一个奇怪的问题，我很抱歉。

我正在使用 Soundcloud 的[自定义播放器](https://github.com/soundcloud/soundcloud-custom-player/wiki/)，需要从插件启动的每个链接的 src 中创建一个变量。我一直在挖掘源代码，但找不到它在哪里获取链接并开始操纵它们。[这是来源>](https://github.com/soundcloud/soundcloud-custom-player/blob/master/js/sc-player.js)

所以要清楚，我的页面上有一堆链接：

```
<a class="sc" href="link/to/soundcloud/">yeah!</a> 
```

插件初始化为：

```
$('a.sc').scPlayer(); 
```

我想从每个链接中创建一个变量，`.attr('href');`以便在我添加到插件内部的一个特殊的小 GUI 片段中使用。本质上，我正在构建一个 URL 来制作一个弹出窗口，并且需要为每个实例提供`$player`它自己的链接，该链接将对应于网站上的子文件夹。

不幸的是，这只是在挖掘源头，涉及的很多技术/方法都在我的脑海中。对于它的价值，在我决定在这里问之前，我自己尝试了很长时间。您会在网上`134`发现播放器的来源已设置。这是在 HTML5 驱动程序而不是 Flash 驱动程序中。所以它不是很理想，但在正确的轨道上。

每个链接到底是在哪里`href`引入和操纵的？快把我逼疯了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:06:49.093

我不确定我是否理解正确，但对我来说，轨道似乎是在`$.each`函数内的第 523 行上处理的。看起来有一个对象 -`track`有一个名为的成员`permalink_url`保存 URI。

# html - 如何在表格单元格中显示多行文本

> ID：10937218
> 
> 赞同：143
> 
> 时间：2012-06-07T17:58:19.447
> 
> 标签：html, css, tablerow

我想将数据库中的一段显示到表格单元格中。

结果是大的 1 行，忽略它在数据库中的组织方式。例如忽略“进入”（新行）

我想完全根据它在数据库中的写入方式来展示它。

例如，如果段落保存如下：

```
hello ,
my name is x. 
```

我希望它完全像那样显示，而不是：

```
hello, myname is x. 
```

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2012-06-07T18:00:36.607

您要使用的 CSS[`white-space:pre`](http://www.w3.org/TR/CSS21/text.html#white-space-prop)应用到适当的`<td>`. 要对所有表格单元格执行此操作，例如：

```
td { white-space:pre } 
```

或者，如果您可以更改标记，则可以[`<pre>`](http://www.w3.org/TR/html4/struct/text.html#edef-PRE)在内容周围使用标签。默认情况下，Web 浏览器使用其用户代理样式表将相同的`white-space:pre`规则应用于此元素。

> *PRE 元素告诉视觉用户代理，封闭的文本是“预格式化的”。处理预格式化文本时，可视化用户代理：*
> 
> *   *可能会留下完整的空白。*
> *   *可以使用固定间距字体渲染文本。*
> *   *可以禁用自动换行。*
> *   *不得禁用双向处理。*

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2015-05-01T23:01:24.410

```
style="white-space:pre-wrap; word-wrap:break-word" 
```

这将解决新行的问题。pre 标签会添加额外的 CSS。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-06-07T18:00:34.373

将内容包装在`<pre>`（预先格式化的文本）标签中

```
<pre>hello ,
my name is x.</pre> 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2012-06-07T18:05:04.713

解决这个问题的两个建议：

解决方案1：`<div style="white-space:pre;">{database text}</div>`或`<pre>{database text}</pre>`

如果您的文本没有 html 标签或 css 属性，这是一个很好的解决方案。例如，还允许维护选项卡。

解决方案 2：替换`\n`为`<p></p> or <br/>`

如果您只想添加换行符，而不会丢失其他文本属性或格式，这是一个解决方案。php中的一个例子是`$text = str_replace("\n","<br />",$database_text);`

您也可以使用`<p></p>`or `<div></div>`，但这需要更多的文本解析。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-05-26T10:01:08.953

嗨，我需要做同样的事情！不要问为什么，但我正在使用 python 生成一个 html，并且需要一种方法来遍历列表中的项目，并让每个项目在表的单个单元格中占据自己的一行。

我发现 br 标签对我很有效。例如：

```
<!DOCTYPE html>
<HTML>
    <HEAD>
        <TITLE></TITLE>
    </HEAD>
    <BODY>
  <TABLE>
            <TR>
                <TD>
                    item 1 <BR>
                    item 2 <BR>
                    item 3 <BR>
                    item 4 <BR>
                </TD>
            </TR>
        </TABLE>
  </BODY> 
```

这将产生我想要的输出。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2019-04-25T05:55:28.700

下面的代码对我来说就像魔术一样>>

```
td { white-space:pre-line } 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-06-07T18:00:42.627

在您的服务器端代码中，将新行 ( `\n`)替换为`<br/>`.

如果您使用的是 PHP，则可以使用[`nl2br()`](http://php.net/nl2br)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-11-04T13:39:38.360

我在每一行之后使用 html 代码标记（见下文），它对我有用。

`George Benson </br>` `123 Main Street </br>` `New York, Ny 12344 </br>`

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2019-03-24T17:16:36.387

我只`<br>`在里面添加了`<td>`，效果很好，断线！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-10-22T09:54:40.800

对于我的情况，我可以这样使用。

```
td { white-space:pre-line , word-break: break-all} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-05-16T07:01:01.963

如果你有一个字符串变量`\n`，你想把它放在里面`td`，你可以试试

```
<td>
    {value
        .split('\n')
        .map((s, index) => (
            <React.Fragment key={index}>
                {s}
                <br />
            </React.Fragment>
        ))}
</td> 
```

# api - FB开放图api，发布如spotify

> ID：10937220
> 
> 赞同：2
> 
> 时间：2012-06-07T17:58:21.297
> 
> 标签：api, facebook-opengraph

简单地解释一下，我的网站让用户听来自 youtube 的音乐（完全使用客户端方法进行编程）。我需要实现的是一个类似于 spotify 的功能，特别是当人们在听曲目时。

我已经定义了动作：捕捉对象：音乐

我想做的是，A. 在股票代码中发布这个。例子：

> ABC 在 Mysite [Box with the link] 上捕获了 {Sample Music}

B. 活动块中的时间线！！

是否可以将用户重定向到 Mysite，而不仅仅是我的 FB 应用程序。此外，当用户点击 {sample music} 时，我想将其重定向到特定页面。？？可能吗？

截至目前，当我点击示例音乐时，我会被重定向到这样的页面：

> [http://mysite.com?fb_action_ids=502866955644&fb_action_types=fatslave%3Acatch&fb_source=other_multiline](http://mysite.com?fb_action_ids=502866955644&fb_action_types=fatslave%3Acatch&fb_source=other_multiline)

实际上我需要将三个变量传递给我的站点（或我的重定向站点），比如说艺术家、轨道、videoID，任何想法如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:42:55.610

在 Cbroe 的帮助下搞定了！！

第 1 步：创建自定义操作属性（在我的情况下为 propa、propb、propc - 根据需要标记）

第 2 步：当用户使用操作 ID 重定向到您的站点时，使用操作 ID 使用 GET 检索自定义操作属性。

> [更多信息在这里](https://developers.facebook.com/docs/opengraph/actions/#read)

# symfony - 在 Symfony2 测试中获取非默认 EM

> ID：10937222
> 
> 赞同：1
> 
> 时间：2012-06-07T17:58:42.963
> 
> 标签：symfony, doctrine-orm

我有一个 Symfony2 单元测试，其中我得到了这样的实体管理器：

```
$this->_em = $kernel->getContainer()->get('doctrine.orm.entity_manager'); 
```

这适用于*默认*实体管理器，但我想获得另一个名为`core`的实体管理器，除了`default`. 我怎样才能做到这一点？

我只是为了踢球而尝试过，但没有奏效：

```
$this->_em = $kernel->getContainer()->get('doctrine.orm.entity_managers.core'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:44:38.880

试试这样：

```
$kernel->getContainer()->get('doctrine')->getEntityManager('core') 
```

你应该阅读[这个页面](http://symfony.com/doc/current/cookbook/doctrine/multiple_entity_managers.html)

# javascript - 如何在Javascript中打印文字unicode字符串？

> ID：10937225
> 
> 赞同：20
> 
> 时间：2012-06-07T17:58:52.017
> 
> 标签：javascript, unicode, character, unicode-literals

我有一个包含带有特殊 unicode 字符的字符串的数组：

```
var a = [
    ["a", 33],  
    ["h\u016B", 44],
    ["s\u00EF", 51],
    ...
]; 
```

当我遍历这个数组时：

```
for (i=0;i<a.length;i++) {
    document.write(a[i][0] + "<br />");
} 
```

它打印带有重音符号的字符：

```
a
hù
sô
... 
```

而且我要：

```
a
h\u016B
s\u00EF
... 
```

如何在 Javascript 中实现这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-07T18:13:50.397

像这样的东西？

```
/* Creates a uppercase hex number with at least length digits from a given number */
function fixedHex(number, length){
    var str = number.toString(16).toUpperCase();
    while(str.length < length)
        str = "0" + str;
    return str;
}

/* Creates a unicode literal based on the string */    
function unicodeLiteral(str){
    var i;
    var result = "";
    for( i = 0; i < str.length; ++i){
        /* You should probably replace this by an isASCII test */
        if(str.charCodeAt(i) > 126 || str.charCodeAt(i) < 32)
            result += "\\u" + fixedHex(str.charCodeAt(i),4);
        else
            result += str[i];
    }

    return result;
}

var a = [
    ["a", 33],  
    ["h\u016B", 44],
    ["s\u00EF", 51]
];

var i;
for (i=0;i<a.length;i++) {
    document.write(unicodeLiteral(a[i][0]) + "<br />");
} 
```

### 结果

```
一个
h\u016B
s\u00EF
```

[**JSFiddle**](http://jsfiddle.net/d3Szv/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T18:18:20.540

如果你有一个 unicode char 并且你想要它作为一个字符串，你可以这样做

```
x = "h\u016B";
// here the unicode is the second char
uniChar = x.charCodeAt(1).toString(16); // 16b
uniChar = uniChar.toUpperCase(); // it is now 16B
uniChar = "\\u0" + uniChar; // it is now \\u016B
x = x.charAt(0) + uniChar; // x = "h\\u016B" which prints as you wish 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-07T18:02:42.157

javascript`string.charCodeAt()`应该有帮助。IE

`"test".charCodeAt(0)`将返回 的数字代码`"t"`。

除此之外，您还需要编写一个 if 语句来检查字符是否为非 ASCII 等。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-18T06:42:49.013

因此，来到这里试图回答这个问题：[Javascript：按原样显示 unicode，](https://stackoverflow.com/questions/35474425/javascript-display-unicode-as-is#35474425)但由于这里的这个问题，它已被关闭。

这个问题的另一个答案：也可以（至少在某些现代浏览器中）使用[String.raw](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/raw) - 函数

语法是这样的：

```
var rawStr = String.raw`Hello \u0153`; 
```

这是一个工作小提琴（Chrome，FF）：http: [//jsfiddle.net/w9L6qgt6/1/](http://jsfiddle.net/w9L6qgt6/1/)

# azure - Microsoft Lync 会在 Windows Azure 虚拟机角色上运行吗？

> ID：10937228
> 
> 赞同：4
> 
> 时间：2012-06-07T17:59:03.610
> 
> 标签：azure, virtual-machine, lync, azure-vm-role

Microsoft Lync 能否在运行 Windows 的 Windows Azure 虚拟机角色上运行？ [Azure 现在支持持久虚拟机](http://redmondmag.com/articles/2012/06/07/windows-azure-to-gain-iaas-linux-hybrid-cloud-support.aspx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:24:52.373

当前不支持 Windows Azure 虚拟机上的 Lync。

# c++ - 在 Allegro 5 运行时更改基元的颜色

> ID：10937233
> 
> 赞同：1
> 
> 时间：2012-06-07T17:59:15.743
> 
> 标签：c++, windows, visual-studio-2010, allegro

我正在编写一个 2D 对象编辑器，以便我可以更快地为基本程序创建 UI。我根本没有使用任何位图。相反，我只是在游戏循环中使用函数调用绘制原语。到目前为止一切都很好，但我想知道如何在运行时更改对象的颜色。

基本概念是我使用一个变量来表示颜色，当用户调用改变该变量值的函数时，就会改变颜色。简单的。就像是：

```
void runColor(){
  ALLEGRO_COLOR color = NULL;

   if(event.mouse.button&1)
      color = al_map_rgb(255, 0, 0);
   else
      color = al_map_rgb(0, 255, 0);

   al_draw_filled_rectangle(firstXval, firstYval, secondXval, secondYval, color);
 } 
```

不幸的是，这不起作用。当我使用类似的代码时，根本就没有绘制对象。没有编译错误，没有运行时错误，什么都没有。相反，这些对象没有颜色，因此是不可见的，尽管我已经验证它们确实是被创建的。所以我猜这意味着颜色变量在某种程度上是正确的类型，但不保留`al_map_rgb()`它设置为等于该函数返回的值时的值。我知道它必须返回一些东西，否则它就不能成为函数中的参数`al_draw`。

虽然我可以写出导致不同绘图函数的 if else if 语句，但我宁愿只使用像上面这样的简单代码包，而不是一堆冗余的东西来解决应该简单的问题。我只是不想使用相当于胶带的代码。

所以我确信这个问题可能与我`al_map_rgb()`返回值的假设有关`ALLEGRO_COLOR`，但我不知道。你们愿意提出一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:26:57.807

首先，没有必要做任何假设。正如您在[手册](http://www.allegro.cc/manual/5/al_map_rgb)中看到的那样，`al_map_rgb()`确实返回了一个`ALLEGRO_COLOR`对象。

那段代码没有任何问题。值不正确，目标位图不是`x,y`您所期望的，或者您没有调用`al_flip_display()`. 确保在每个帧（即每个`al_flip_display()`）调用上重绘整个场景。

此外，在绘制图元时，请确保您了解坐标的工作原理。绘制填充矩形时，您将指定外部点`(x1,y1)-(x1+w,y1+h)`。

# wpf - WPF 没有 DI 框架的 Prism 的优势

> ID：10937238
> 
> 赞同：1
> 
> 时间：2012-06-07T17:59:31.983
> 
> 标签：wpf, dependency-injection, prism

我正在与非常支持 Prism 的 WPF 应用程序的其他开发人员合作，但我只是不了解其中的好处。我通过依赖注入框架和使用 EventAggregator 获得了模块化的想法。但是，如果没有这两件事，使用 Prism 有什么核心优势吗？

基本上我不知道为什么我需要动态加载视图并将它们放置在区域中，而我在开发过程中已经知道它们会去哪里并且它们永远不会改变。

我在网上找到的所有内容都将 DI 的优势视为 Prism 的唯一优势。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:33:20.590

PRISM 提供了一个以模块化方式组成应用程序的框架。因此，您不必将视图注入到区域中，但它会使其更加灵活。您可以更轻松地使用不同的视图并将它们注入您的区域。

我同意 DI 可能是 PRISM 最常用的功能，并且可以说是使用它的最有说服力的理由。一般来说，没有必要使用 PRISM，特别是如果你的应用程序足够小，但它确实使它更灵活地适应未来的变化。解耦组件很好，PRISM 提供了实现它的方法（不是唯一的方法）。

HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:51:32.060

我的恕我直言

您对 PRISM 的看法是错误的：

*   PRISM 是*框架*。因此，您可以独立使用它的*任何*部分。它是 DI 容器、导航框架、EventAggregator、DelegateCommand、NotificationObject、模块化结构、区域和许多其他东西。
*   DI与 PRISM*没有任何关系。*这是*独立*的事情。*您可以在没有*PRISM 的情况下轻松使用 Unity（或 MEF，但这不是真正的 DI 容器） 。PRISM 只是提供了所有东西的一些集成。

我对棱镜的看法：

*   “他们永远不会改变” - 如果您已经知道，请远离这个项目。如果项目永远不会改变 - 它已经死了。根据我的经验，如果项目存在 -*任何事情*都可以改变。甚至是不变的东西。我与一家保险公司合作得非常密切，他们说一件事*永远不会改变*。他们有几十万客户。5 (!!!) 年后它被改变了......非常酷。感谢上帝，我一直认为*任何事情*都可以改变。
*   PRISM 的另一个优点是“标准化”——所有标准类都具有相同的名称，它们具有相同的属性和方法，您的项目具有标准结构等。
*   PRISM 的区域为 XAML 提供了一些 DI 类比。没有它你能做到吗？当然可以。但同样 - 这是“标准”方式。你可以很容易地跳到另一个项目，你不会学习另一个“穷人框架”。

同样，这是*我的恕我直言*。当然，我可能是错的..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:51:35.947

我确实大量使用区域和导航。它可能不适用于您的场景，但在我的情况下，我在 TabControl 中打开了多个视图（通过导航）。传递参数（查询字符串）和控制目标（NavigationAware）的能力对我来说很重要。

假设您有带有客户和订单的 UI。您会看到客户和他的订单。您单击特定订单，然后打开另一个页面。猜猜看，您可以使用如下导航访问订单视图：

1.  /订单视图

2.  /OrderView?OrderKey=123

第一个将打开您的视图。第二个将打开并导航到您需要的订单。您还可以将链接从订单视图链接到客户视图

/CustomerView - 将打开新客户屏幕

/CustomerView?CustomerKey=123 - 将打开您的客户或导航回您已经打开的视图。

如果您关心这样的场景 - PRISM 会有所帮助。

如果您的团队在同一视图上使用区域 - 我也没有看到太多好处。而且我没有这样的地区。

另一个示例使用：

我有一个区域的 MenuStackPanel。根据用户权限，应用程序将加载该用户可以使用的模块。当模块加载时 - 他们注册他们的作品并用他们的选项填充菜单。

# linux - chroot 下的 Android 上的 Ubuntu 报告了不同数量的处理器

> ID：10937240
> 
> 赞同：2
> 
> 时间：2012-06-07T16:13:46.363
> 
> 标签：linux, java

我已经在我的 HTC One X（QuadCore 实际上是 PentaCore）上的 chroot 环境中安装了 Ubuntu 12.04（v2 完整版）：[http ://linuxonandroid.blogspot.de/p/downloads.html](http://linuxonandroid.blogspot.de/p/downloads.html)

当我在 Ubuntu 上启动一个简单的 Java 终端应用程序并使用打印出处理器计数时，`Runtime.getRuntime().availableProcessors()`我注意到我得到的结果不一致。它返回 1 到 4 个内核之间的任意位置，而不是总是看到全部 4 个。

我知道原生 Android 内核按需使用 4 个内核，但是当我`htop`在 Ubuntu 上运行进程查看器时，我总是看到 4 个 CPU！为什么 Ubuntu 的 JVM 报告不同数量的内核，而`htop`Ubuntu 内核可以一致地看到所有 4 个内核？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:28:24.927

据我所知，这就是 JVM 的工作方式。[注释](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#availableProcessors%28%29)[文档`availableProcessors()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Runtime.html#availableProcessors%28%29)（强调我的）：

> `public int availableProcessors()`
> 
> 返回 Java 虚拟机可用的处理器数量。
> 
> **此值可能会在虚拟机的特定调用期间发生变化。**因此，对可用处理器数量敏感的应用程序应偶尔轮询此属性并适当调整其资源使用情况。

我的假设是，波动发生在操作系统根据当前运行的进程数量及其在系统上的负载确定它需要如何分配内核时。尽管它可能并不总是为 JVM 提供所有四个内核，但听起来 Ubuntu 和 Android 都在正常工作。我认为这实际上与 Ubuntu 在 Android 环境中运行这一事实无关。

# google-app-engine - 我的域应用程序的 URL 获取总是启动新实例。如何避免这种情况？

> ID：10937243
> 
> 赞同：2
> 
> 时间：2012-06-07T17:59:52.347
> 
> 标签：google-app-engine, task, urlfetch

我有一项延迟任务来格式化 HTML 中的正文电子邮件，对我自己的应用程序域执行 UrlFetch：

```
//Format body email in HTML
final Charset UTF8_CHARSET = Charset.forName("UTF-8");
final String FORMAT_EMAIL = "http://www." + NamespaceManager.getGoogleAppsNamespace() + "/email/formatEmail";

URL url = new URL(FORMAT_EMAIL);
HTTPRequest req = new HTTPRequest(url, HTTPMethod.POST, FetchOptions.Builder.withDeadline(60.0));
req.setPayload(Utils.getPostData(map, "UTF-8").getBytes());
HTTPResponse resp = urlFetchService.fetch(req);
if (resp.getResponseCode() == HttpURLConnection.HTTP_OK)
    bodyMessage = new String(resp.getContent(), UTF8_CHARSET);
//here create new task to send email
SendEmail sendEmail = new SendEmail(emailTO, nameTO, emailREPLYTO, nameREPLYTO, subject, bodyMessage);
queue.add(TaskOptions.Builder.withPayload(sendEmail)); 
```

我将一些参数传递给 servlet formatEmail 以制作一封可爱的 HTML 电子邮件。.. :) 此代码工作正常，创建一个新的推送任务，并成功发送电子邮件。

问题是这个任务总是 100% 的时间创建一个新实例，即使没有任何用户访问，以使这个*艰巨*的任务和实例在代码结束时关闭。

如何避免这种情况？

如果我对外部域而不是我自己的域进行 UrlFetch，通常 GAE 不会为此创建新实例.... 不奇怪吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:04:36.483

Java 运行时不是多线程的，因此每个实例一次只能处理一个请求。当您的应用程序向自身发出请求时，通常不会有可用的空闲实例来为新请求提供服务——调用者已经占用了该空间。

您可以使用预热请求和空闲实例设置来确保有一个额外的实例来处理您的格式化请求，但您似乎可以直接在原始请求中调用格式化代码，而不是向自己发出 HTTP 请求。

更新：正如尼克指出的那样，这仅[在默认情况下是正确的](https://developers.google.com/appengine/docs/java/runtime#Requests_and_Servlets)。你定了`<threadsafe>true</threadsafe>`吗？

# php - 如何转义特殊字符以用于 JSON 数据

> ID：10937245
> 
> 赞同：1
> 
> 时间：2012-06-07T18:00:01.267
> 
> 标签：php, javascript, json

```
 `{\
     "wins\":[\"http://nintendos.t15.org/folder.dsos\",\"http://nintendos.t15.org
     /NintendOS%20Office/word.dsos?create=true\"
  ]}` 
```

这是我用 PHP 写入文件的 JSON 字符串。

我不在乎哪种语言（JS 或 PHP），但我将如何转义数据（如“\ to”）以使用它？确切的代码如下：

```
function SaveSession(){
 try{
   if(user){
    var date=new Date();
    var month=date.getMonth()+1;
    var day=date.getDate();
    var year=date.getFullYear();
    var hour=date.getHours();
    var minutes=date.getMinutes();
    var seconds=date.getSeconds();
    if(minutes<10){
        minutes="0"+minutes;
    }
    if(seconds<10){
           seconds="0"+seconds;
    }
    dt=""+month+"/"+day+"/"+year+" "+hour+":"+minutes+":"+seconds+"";
    var session=new Object();
    session.wins=new Array();
    var pages=document.getElementsByClassName("page");
        if(pages[0]){
           session.wins.push(pages[0].getElementsByTagName("iframe")[0].src);
        }
        if(pages[1]){                            
                   session.wins.push(pages[1].getElementsByTagName("iframe")[0].src);
        }
        if(pages[2]){
                   session.wins.push(pages[2].getElementsByTagName("iframe")[0].src);
        }if(pages[3]){
                   session.wins.push(pages[3].getElementsByTagName("iframe")[0].src);
        }if(pages[4]){
           wins.push(pages[4].getElementsByTagName("iframe")[0].src);
        }if(pages[5]){
                   session.wins.push(pages[5].getElementsByTagName("iframe")[0].src);
        }if(pages[6]){
               session.wins.push(pages[6].getElementsByTagName("iframe")[0].src);
        }if(pages[7]){
               session.wins.push(pages[7].getElementsByTagName("iframe")[0].src);
        }if(pages[8]){
               session.wins.push(pages[8].getElementsByTagName("iframe")[0].src);
        }if(pages[9]){
               session.wins.push(pages[9].getElementsByTagName("iframe")[0].src);
        }
            ajaxObj.onreadystatechange=function(){
        if(ajaxObj.readyState>=4 && ajaxObj.status==200){
    }
    else{
    }
     }
     var sessionData=escape(JSON.stringify(session));
     ajaxObj.open("POST","req.php",true);
     ajaxObj.setRequestHeader("Content-type","application/x-www-form-urlencoded");
     ajaxObj.send("save_session=true&user="+username+"&session="+sessionData+"");
}
}
catch(err){
    alert("Error. Unable to save session. "+err+"");
}
 } 
```

基本上，我想将 JSON 对象保存到文件中，如果我想再次使用它，我需要转义特殊字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:03:14.950

还没有测试过，但它可能会工作:)

```
<?php 

str_replace('\"', '"', $jsonString);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:06:55.763

其实很简单。

```
<?php
    $a = array('x' => '"xyzhttp://test\escape');
    $b = json_encode($a); // {"x":"\"xyzhttp:\/\/test\\escape"}
    print_r(json_decode($b, true)); // Array ( [x] => "xyzhttp://test\escape ) 
?> 
```

只需使用这些`json_*`功能。

# xslt - XSLT 2 字符仅生成 ID

> ID：10937246
> 
> 赞同：1
> 
> 时间：2012-06-07T18:00:02.563
> 
> 标签：xslt

我想`generate-id`在我的 xslt 样式表中使用。但是，此函数会生成一个 8 字符长的 id。

有没有办法让 id 只有两个字符？当然，这使得可能的 id 数量有限（1296 种可能性），但我永远不需要超出这个限制。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:41:03.930

如果您只需要 ID 对于单个文档中的节点是唯一的，则可以使用

```
<xsl:number count="*" level="any" from="/*" format="a"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:57:18.770

如果您想使用 XML 名称中允许的所有 unicode 字符，那么 2 个字符就有超过 1296 种可能性！

不幸的是，XSLT 处理器可以自由决定如何为`generate-id()`函数创建 ID（这意味着根据您使用的处理器，您可以获得多于或少于 8 个字符）。

话虽这么说，如果这对您来说真的很重要，您应该能够`generate-id()`根据前面的兄弟节点和祖先节点节点`count(ancestor::node()|preceding::node())`（其他机制，这可能不是很有效，但应该工作......

# cuda - cuModuleLoadDataEx 选项

> ID：10937250
> 
> 赞同：1
> 
> 时间：2012-06-07T18:00:21.403
> 
> 标签：cuda

我正在尝试对 PTX 代码进行 JIT 编译。代码编译并运行，但与生成它的 cuda C 相比，速度非常慢。
试图尝试为什么运行从 cuda C 生成的 PTX 代码较慢（两者都针对 compute_20/sm_20），我想在我的调用 cuModuleLoadDataEx 中设置选项以确保它针对的是 compute_20/sm_20，但我似乎无法通过选项正确。目前我有

```
CUjit_option options[] = {
    CU_JIT_TARGET
}
CUjit_target_enum target = CU_TARGET_COMPUTE_20
void *optionValues[] = {
    &target
};
int32_t err = cuModuleLoadDataEx(&hModule, ptxSrc, 1, options, optionValues); 
```

但是调用返回 1 (cudaErrorMissingConfiguration) 我当然尝试过在堆栈溢出和谷歌上搜索如何正确设置选项的示例，但我找不到任何东西。如果我不尝试设置任何选项，则调用成功并且代码正确运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:20:40.850

搜索 CUDA SDK 附带的示例程序，您会发现许多 cuModuleLoadDataEx 示例，尽管它们似乎都没有指定 CU_JIT_TARGET。我在 matrixMulDrv、vectorAddDrv 和其他一些函数中看到了这个函数调用。

查看这些样品，似乎当OptionValue需要成为缓冲区的指针（例如CU_JIT_INFO_LOG_BUFFER）时，您可以将该指针作为选项值传递，但是当需要简单的整数（例如CU_JIT_MAX_REGISTER）时，您就会铸造Integer integergergergergergergergergergergergergergergerger将值传递给 void* 并将其传递：

```
void *optionValues[] = {
    (void*)(uintptr_t) CU_TARGET_COMPUTE_20,
}; 
```

# mysql - 改进了查询季度支出数据的表结构

> ID：10937251
> 
> 赞同：3
> 
> 时间：2012-06-07T18:00:28.487
> 
> 标签：mysql, database-design

我正在为我正在为我的公司工作的项目寻找有关最有效的表结构/SQL 代码的建议。我不是专业开发人员，所以更简单的解决方案更可取。

项目要求：

我想创建一个 HTML 表格，按财政季度按供应商类别显示总支出，其中每个类别都是一个链接，可以单击以展开以获取供应商级别 x 业务单位级别的支出。

我已经启动并运行了它。我内置了 PHP 和 MySQL。但是，在某些情况下，我为扩展表而运行的查询运行非常缓慢。我想彻底检查我的表结构和查询，以使整个过程更加高效和灵活。

**我拥有的数据摘要**

我每个季度都会从每个业务部门获取供应商支出的原始数据。我还有一个解码器环，可以将供应商名称与供应商类别（例如星巴克 -> 餐厅）相匹配。

**我当前的流程** 我将季度数据汇总到一个名为spendfile 的表中，其中包含以下列：

*   供应商名称
*   standard_vendor_name（更正供应商名称中的拼写错误等）
*   供应商类别
*   四分之一
*   花费

当我（第一次）请求用户查看 HTML 表的类别向下并按季度在单独的列中花费时，我创建了一个名为 treetable 的临时表，其中包含以下列：

*   rowlabel（出现在表格下方的类别/供应商名称）
*   支出 Q1（每个季度与供应商的支出的单独列）
*   花费Q2
*   花费Q3
*   花费Q4
*   花费...

请注意，为了获得此表，我需要选择所有唯一的供应商类别，然后按季度计算每个季度的总支出，最后将每个季度的季度总支出加入到类别列表中（所以我要进行 5-6 次连接，1每个时间段）。

然后我呈现为 html 表（相当简单）

当用户单击一个类别以获取更多详细信息时，我会经历类似的过程：获取唯一的供应商列表，汇总支出（这次是针对特定类别的所有供应商）并将所有时间段作为单独的列加​​入。

最后一步是将新的钻取数据合并到正确位置的树形表中（在所有供应商所属的类别下方）。

有没有人对更好的方法有任何想法？我想做的事情有意义吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:33:02.893

如果不了解有关您的架构的更多信息，很难提供具体的建议（例如可能使用的 SQL）。不过，我会努力的。以下是一些一般性建议。

1.  尝试量化“非常缓慢”，这样您就可以知道您是否在改进时进行改进。还要量化您要处理的数据量。
2.  仅在您绝对确定需要临时表时才使用它们。DBMS 中可能发生的最昂贵（=== 慢）的事情之一是将数据写入表。如果您不需要临时表，请不要使用它们。
3.  如果可以，请创建一个 SQL 查询，为您希望从原始数据以 HTML 格式显示的表生成正确的列和行。然后，在命令行 mySQL 客户端中运行该查询并使用 EXPLAIN 命令让 mySQL 告诉您它正在尝试做什么。见这里：[http ://dev.mysql.com/doc/refman/5.0/en/explain.html](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

以下是有关该查询如何工作的一些更具体的建议。假设您的输入表具有此架构。

```
vendorname
standard_vendor_name (corrects misspells in vendor name, etc.)
vendor_category (character string)
quarter (integer)
spend  (floating point) 
```

假设您想要一个包含这些列的表

```
vendor_category
vendor (standardized spelling)
spend_q1
spend_q2
spend_q3
spend_q4 
```

很抱歉，我不明白您关于如何处理输出中的供应商名称和类别的问题。我假设您只是显示类别，然后显示每个供应商的名称，并按类别排序。

我也不明白你是如何`quarter`在你的输入表中存储的。假设您在 1Q2011 - 2Q2012 使用数字格式，例如 20111、20112、20113、20114、20121、20122。

假设您想在 html 表格中显示任意四个连续的季度，只是为了笑。

所以，我们开始吧。

我们需要一个小子查询来根据您要显示的最近一个季度的 ID（您需要提供）生成您需要的四个季度 ID。

```
SELECT DISTINCT QUARTER
  FROM INFO
 WHERE QUARTER <= ~~~the most recent quarter~~~
 ORDER BY QUARTER DESC
 LIMIT 0,4 
```

如果您总是从最近一个季度开始，您可以简单地忽略`WHERE QUARTER <= ~~~the most recent quarter~~~`这个小子查询，它会获取您拥有的最新数据。

其次，我们需要将季度列表子查询构建为子查询，以生成最新季度的数据。

```
SELECT I.QUARTER, I.VENDOR_CATEGORY, I.STANDARD_VENDOR_NAME, SUM(I.SPEND) SPEND
  FROM INFO I
  JOIN (        
    SELECT DISTINCT QUARTER
      FROM INFO
     WHERE QUARTER <= ~~~the most recent quarter~~~
     ORDER BY QUARTER DESC
     LIMIT 0,1
 ) Q ON I.QUARTER=Q.QUARTER
 GROUP BY I.QUARTER, I.VENDOR_CATEGORY, I.STANDARD_VENDOR_NAME 
```

这是我们基本的季度查找构建块。此时很明显，您将需要您的 INFO 表在 QUARTER 和 VENDOR_CATEGORY 列上有索引。

您可能需要对这两者，甚至是 (QUARTER, VENDOR_CATEGORY, STANDARD_VENDOR_NAME) 的复合索引。但是让事情正常进行。然后查看 EXPLAIN 输出。然后尝试添加其他索引。在您继续之前，值得摆弄索引以优化此构建块查询。

我们还需要三个这样的小子查询，每个前一个季度一个。`LIMIT 0,1`除了、`LIMIT 1,1`、`LIMIT 3,1`和之外，子查询与构建块相同`LIMIT 4,1`。

我们还需要一个我们需要显示的所有 VENDOR_CATEGORY 和 STANDARD_VENDOR_NAME 组合的主列表。此查询会弹出在您正在考虑的任何季度中出现一次或多次的任何类别/供应商组合的结果。

```
SELECT DISTINCT I.VENDOR_CATEGORY, I.STANDARD_VENDOR_NAME
  FROM INFO I
  JOIN (        
    SELECT DISTINCT QUARTER
      FROM INFO
     WHERE QUARTER <= ~~~the most recent quarter~~~
     ORDER BY QUARTER DESC
     LIMIT 0,4
 ) Q ON I.QUARTER=Q.QUARTER 
```

不要在这一项中进行 LEFT JOIN，否则您最终会得到所有类别/供应商项目，包括您在最近四个季度没有花钱的项目。

现在我们需要把它们放在一起。事情变得荒谬的冗长（SQL 不是很有趣吗？）。我们必须将所有这些构建块连接在一起。这是我们的大查询的大纲，并带有注释以显示构建块的去向。

```
SELECT A.VENDOR_CATEGORY, A.STANDARD_VENDOR_NAME, Q.SPEND, R.SPEND, S.SPEND, T.SPEND
  FROM (
     /* category combinations */
  )A
  LEFT JOIN (
     /* most recent quarter spend */
  )Q ON (           A.VENDOR_CATEGORY=Q.VENDOR_CATEGORY 
                AND A.STANDARD_VENDOR_NAME=Q.STANDARD_VENDOR_NAME)
  LEFT JOIN (
     /* second most recent quarter spend */
  )R ON (           A.VENDOR_CATEGORY=R.VENDOR_CATEGORY
                AND A.STANDARD_VENDOR_NAME=R.STANDARD_VENDOR_NAME)
  LEFT JOIN (
     /* third most recent quarter spend */
  )S ON (           A.VENDOR_CATEGORY=S.VENDOR_CATEGORY
                AND A.STANDARD_VENDOR_NAME=S.STANDARD_VENDOR_NAME)
  LEFT JOIN (
     /* fourth most recent quarter spend */
  )T ON (           A.VENDOR_CATEGORY=T.VENDOR_CATEGORY
                AND A.STANDARD_VENDOR_NAME=T.STANDARD_VENDOR_NAME)
ORDER BY A.VENDOR_CATEGORY, A.STANDARD_VENDOR_NAME 
```

我将留给您将子查询插入此大纲。

您可能已经使用过类似的方法来生成临时表。但如果你做对了，你可以简单地使用这个大查询来生成你的报告。除非您的信息表有数以亿计的行，否则如果您正确索引表，它将运行得相当快。

如果您确实有数以亿计的行，那么您可能为一家大公司工作，该公司可以为具有快速磁盘和数 GB RAM 的更大的 mySQL 服务器而生。这也将加快速度，尤其是在您制定索引后。

# jquery - 使用 formdata 发布数组

> ID：10937258
> 
> 赞同：9
> 
> 时间：2012-06-07T18:00:52.283
> 
> 标签：jquery, arrays, image, html, post

我正在使用新的 HTML5 FormData-Object 通过 Ajax 发布一些值和图像。到目前为止它工作正常。现在，我想使用这个对象发布一个数组，但我在服务器端得到的只是“[object - object]”。如何发布带有 formdata 的数组？

到目前为止我所拥有的

```
var formData=new FormData();
formData.append('text', $('#text').attr('value'));
formData.append('headline',$('#headline').attr('value'));
formData.append('myarray',{key1: 'bla', key2: 'blubb'}); 
```

最后一行不起作用。我使用此代码发送请求

```
 $.ajax({
                        url: 'xyz',
                        data: formData,
                        type: 'POST',
                        processData: false,
                        contentType: false,
                        success: function(data) { 
                            var decoded=$.parseJSON(data);
                            displaySuccess('Success', decoded.message); 
                        },error: function(data){
                            var decoded=$.parseJSON(data);
                            displayError('Error', decoded.message);
                        },complete: function(data){
                            $('#cursor').hide();
                            $("#submitbutton").removeAttr('disabled')
                        }
                    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-07T19:47:14.297

在关联数组的每个元素上使用`.append()`可能会产生您期望的结果。

代替这一行：

```
formData.append('myarray',{key1: 'bla', key2: 'blubb'}); 
```

您可以尝试以下方法：

```
var myarray = {key1: 'bla', key2: 'blubb'};

jQuery.each(myarray, function(key, value) {
    formData.append('myarray['+key+']', value);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-09T07:21:03.307

谢谢。我现在想出了这个解决方案：

```
 for (i = 0; i < social_networks.length; i++) {
                    formData.append("myarray["+i+"][mykey]",arr[i]['mykey']);
                    formData.append("myarray["+i+"][mykey2]",arr[i]['mykey2']);
                } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T18:17:24.293

从您的语法来看，您似乎试图传递一个对象，而不是一个数组。我认为您不能通过 HTML 表单传递对象。

```
{ key1 : value1 , key2 : value2 } 
```

**对比**

```
[ value1, value2 ] 
```

[这是对通用JS 语法](http://www.json.org/)的方便参考

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-14T05:01:57.813

试试这个。它对我有用。

```
var files = $scope.myFile;
        var fd = new FormData();
        fd.append("file", files[0]);
        fd.append("assignment", JSON.stringify({ classAssignment: $scope.editItem })); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-08T11:08:47.707

我的清单是这样的

```
billlists = [{ Color: "White"Quantity: "1"Shape: "2.0"SizeNo1: "1"SizeNo2: "1"StoneColorCost: "20000"StoneColorWT: "0.006"Type: "1"__proto__: Object1: Color: "White"Quantity: "1"Shape: "2.0"SizeNo1: "0.5"SizeNo2: "0.7"StoneColorCost: "6"StoneColorWT: "0.005"Type: "1"},

{ Color: "White"Quantity: "1"Shape: "2.0"SizeNo1: "1"SizeNo2: "1"StoneColorCost: "20000"StoneColorWT: "0.006"Type: "1"__proto__: Object1: Color: "White"Quantity: "1"Shape: "2.0"SizeNo1: "0.5"SizeNo2: "0.7"StoneColorCost: "6"StoneColorWT: "0.005"Type: "1"}] 
```

**此代码用于格式化键值对等数据**

```
function serializeData(name, arr)
 {
   var a = [];
    for (var i = 0; i < arr.length; i++) 
        {
      for (var key in arr[i]) 
    {
 a.push({ name: name + '[' + i + '].' + key + '', value: arr[i][key] });
     }
        }
         return a;
                  }

  var mydata = serializeData('billlist', billlists);

  $.each(mydata, function (key, input) {
       fd.append(input.name, input.value);
            }); 
```

**这是序列化数据的输出**

```
0: {name: "billlist[0].Type", value: "1"}
1: {name: "billlist[0].Color", value: "White"}
2: {name: "billlist[0].Shape", value: "2.0"}
3: {name: "billlist[0].SizeNo1", value: "1"}
4: {name: "billlist[0].SizeNo2", value: "1"}
5: {name: "billlist[0].Quantity", value: "1"}
6: {name: "billlist[0].StoneColorWT", value: "0.006"}
7: {name: "billlist[0].StoneColorCost", value: "20000"}
8: {name: "billlist[1].Type", value: "1"}
9: {name: "billlist[1].Color", value: "White"}
10: {name: "billlist[1].Shape", value: "2.0"}
11: {name: "billlist[1].SizeNo1", value: "0.5"}
12: {name: "billlist[1].SizeNo2", value: "0.7"}
13: {name: "billlist[1].Quantity", value: "1"}
14: {name: "billlist[1].StoneColorWT", value: "0.005"}
15: {name: "billlist[1].StoneColorCost", value: "6"} 
```

**它为我工作**

**但在其他帖子中，我看到数据就像**

```
 {name: "billlist[0][Type]", value: "1"} 
```

它对我不起作用

# login - 从 Safari 5.1.x 扩展自动登录到基本身份验证保护的 URL - 可能吗？

> ID：10937261
> 
> 赞同：3
> 
> 时间：2012-06-07T18:01:00.553
> 
> 标签：login, safari, safari-extension, basic-authentication

我负责为三种浏览器开发扩展（具有相同的功能集）：Firefox、Chrome 和 Safari。其中一项功能是基本身份验证自动登录。凭据是从我们的服务器获取的，然后只需单击一下，用户就可以登录到受基本身份验证保护的 URL，而无需手动填写凭据。

我让它适用于 Firefox 和 Chrome。对于 Firefox，我利用它缓存基本身份验证凭据的事实，即使请求是通过 XMLHttpRequest 完成的。所以，我基本上是这样做的：

```
 //Make the basic-auth request to URL using XMLHttpRequest
  var xml = new XMLHttpRequest();
  xml.open('GET', URL ,false, USERNAME , PASSWORD);
  xml.send('');
  //Now redirect the current tab to the URL
  window.content.document.location = URL; 
```

这适用于 Firefox，也适用于 Chrome。谷歌在最新版本的 Chrome 中更改了一些东西，我不得不开始使用 onAuthRequest 回调，它工作正常（如果不是更好，请查看这篇文章以获取参考：[Chrome 插件开发：用户：pass@url 不支持谷歌浏览器了？](https://stackoverflow.com/questions/10725654/chrome-plugin-development-userpassurl-not-supported-by-google-chrome-anymore)）。

现在，问题出在 Safari 5.1 上。XMLHttpRequest 技术似乎不起作用，我找不到 onAuthRequest 等效项。有谁知道在 Safari 5.1 上实现相同效果的方法？

# ios - 透明度和 CGLayers

> ID：10937263
> 
> 赞同：2
> 
> 时间：2012-06-07T18:01:06.027
> 
> 标签：ios, ios5, core-graphics

我正在为我的 iOS5 应用程序创建许多 CGLayer，如下所示：

```
layer_1 = CGLayerCreateWithContext (context,self.bounds.size, NULL);    
offlineContext_1 = CGLayerGetContext (layer_1);
layer_2 = CGLayerCreateWithContext (context,self.bounds.size, NULL);    
offlineContext_2 = CGLayerGetContext (layer_2);
layer_3 = CGLayerCreateWithContext (context,self.bounds.size, NULL);    
offlineContext_3 = CGLayerGetContext (layer_3); 
```

对于计时器的每一步，我都会绘制到offline_contexts，当所有的绘制完成后，我会通过调用将所有层收集到一个中：

```
CGContextDrawLayerAtPoint (context, CGPointZero, layer_1);
CGContextDrawLayerAtPoint (context, CGPointZero, layer_2);
CGContextDrawLayerAtPoint (context, CGPointZero, layer_3); 
```

这很好用。第 1 层的内容似乎被第 2 层的内容覆盖，然后第 3 层覆盖了前两层。所有绘图都是使用如下调用完成的：

```
 CGContextAddArc(context,cx,cy,radius,-fromDir,toDir,1-curve); 
```

出于性能原因，我用图像替换了很多像上面这样重复的绘图命令，这样结果应该是相同的，但不是绘制 CGContextAddArc() 20 次，而是告诉图像自己绘制 20 次：

```
[myArcImage drawAtPoint: loc]; 
```

然而，随着这一变化，叠加的顺序似乎发生了变化。图像最终会被绘制到集体视图中，但只有那些不覆盖绘制到其他上下文的其他线条和弧线的图像部分。我玩过在 drawAtPoint 变体中使用混合，但这只会影响图像中可见的部分。

关于为什么线条和弧线覆盖其他图层中的内容但图像没有的任何想法？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:26:41.943

好吧，我明白了我在做什么。我正在绘制的弧线和线条类似于上面的 CGContextAddArc() 调用，并且该调用将要绘制的上下文作为参数。当我切换到绘图图像时，drawAtPoint() 方法不会将上下文作为参数。相反，它将图像绘制到当前上下文，在我的例子中是当前 UIView 的上下文。

我的问题的解决方案是用 push/pop 上下文调用包装 drawAtPoint 调用：

```
UIGraphicsPushContext(correct_context);
[myArcImage drawAtPoint: loc];
UIGraphicsPopContext(); 
```

# c - 分解循环的结束条件

> ID：10937266
> 
> 赞同：0
> 
> 时间：2012-06-07T18:01:11.720
> 
> 标签：c, strtok, factors, strtol

晚上好，

我在分配作业时遇到问题。

基本上，我们需要编写一个程序来计算给定`stdin`. 数据只能通过其进入程序`stdin`，无论是通过一个`echo`还是一个`< file.txt`。数据流永远不会超过 80 个字符（它们可以是数字，也可以不是数字）。

我在程序中使用的函数是`read()`,`strotol()`和`strtok()`, “不相关”的代码流程如下：

1.  用于`malloc`分配 80 个初始字节的内存。
2.  `int`通过`read()`读取的字符数（我相信，最后一个）存储在 中`\0`。
3.  重新分配内存`realloc()`以节省尽可能多的内存（我知道在这种情况下这很简单，但是哦……）。

现在是棘手的一点：

1.  由于数据必须用空格分隔，因此要检查的最大项目数最多为：`(n/2)+1`，其中`n`是在上点 nº 2 处读取的字符数。
2.  创建一个数组，`long`其最大大小为在点 nº 1 中获得的数字。
3.  填充`numbers[0]`结果：`strtol(strtok(line, delim), &end, 10)`。
4.  添加`1`到`counter`并进入一个`while`循环：

    ```
    while((numbers[counter] = strtol(strtok(NULL, delim), &end, 10)) != NULL) {
        if(!*end) {
            // Check whether it's 0, 1, negative, prime or extract its factors
        }
        else {
            fprintf(stderr, "\"%s\" is not a non-negative integer", end)
        }
        counter++;
    } 
    ```

现在，这里有一些输入和它们的输出：

输入：`echo 1 2 3 4 5 6 7 8 9 10 | ./factors`

输出：

```
1
2    
3
    2    2
5
    2    3
7 
    2    2    2
    3    3
    2    5
Segmentation Fault (core dumped). 
```

Input`./factors < integers.txt` 其中 integers 包含一列整数。

输出：

所有整数都被分解得很好，最后打印出：

```
Segmentation Fault (core dumped). 
```

输入：`echo abc 12 13 14 15 | ./factors`

输出：

```
"abc" is not a non-negative integer
13
    2    7
    3    5
Segmentation Fault (core dumped). 
```

输入：`echo -1 -2 -3 -4 -5 | ./factors`

输出：

```
"-1" is not a non-negative integer
"-2" is not a non-negative integer
"-3" is not a non-negative integer
"-4" is not a non-negative integer
"-5" is not a non-negative integer 
```

输入：`echo abc abc abc | ./factors`

输出：

```
"abc" is not a non-negative integer 
```

（并且不继续检查）。

输入：`echo 3 4 0 6 7 | ./factors`

输出：

```
3
    2    2 
```

（并且不继续检查）。

据我所知，当它遇到一个`0`以上的非或基本上在基于健康的数据流`integer`的末尾的实例时，它会失败。`integer`

知道我该如何解决这个问题，为什么它会如此明显地随机失败？

我应该让你知道我是 C 的新手...

非常感谢您。

==================================================== ==

EDIT1：根据请求，这里是生成的代码片段`numbers[]`，并从中读取`stdin`：

```
char *line;
char *end;
char *delim = " \n";
int charsread, counter; 

line = malloc(80);
charsread = read(0, line, 81);
if (charsread == 0) {
    return EX_OK;
}
realloc(line, charsread);
maxelem = (charsread / 2) + 1;
long numbers[maxelem];
numbers[0] = strtol(strtok(line, delim), &end, 10);
if (!*end) {
    zeroone(numbers[0]);
}
else {
    fprintf(stderr, "\"%s\" is not a non-negative integer\n", end);
}
counter = 1;
while [...] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:04:18.180

尝试使用gdb调试segfault，通过设置适当的环境变量使其在segfaulting时转储核心，或直接在gdb中运行。Segfault 意味着你正在读/写你不应该读/写的一部分内存。随机性意味着您可能正在破坏堆栈或其他东西。我认为“printf”是罪魁祸首，检查他们的论点。您也没有检查数字是否小于数组长度？它可能会超出它吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:14:08.827

好的，让我们在现场查看一些内容，看看我们是否可以解决您的问题。

* * *

这在您的程序中不是必需的：

```
realloc(line, charsread); 
```

尝试减少内存占用是正确的，但是如果分配太多，那又如何呢？它是 80 个字节。不要过于复杂，因为你的盘子里已经有足够的了。

* * *

这很奇怪：

```
maxelem = (charsread / 2) + 1;
long numbers[maxelem]; 
```

这很好，并且适用于您的情况，但是您可以通过计算数字组来更准确地确定元素的数量。

* * *

我建议尝试在 lopp 中进行整个提取

* * *

关于实际`segmentation fault`......我可能错了，因为我没有机会在这里在我的机器上重现它，但我认为发生错误是因为你没有`line`用`\0`字符终止你的。在 C 语言中，我相信您已经通过您发布的代码片段的外观知道，行通常是我们所说的“NULL 终止”，因此按照惯例我们用值 0 来终止它们，这是 of 的数值`NUL`字符，也表示为（`\0`有时有点令人困惑，因为人们会在“NULL 终止”、“NUL”字符和“NULL 指针”之间混淆，它们是不同的东西）。

然后，这会使您的程序中断，因为最终您的程序会尝试读取行尾，`strtok`但它不知道在哪里停止。它不知道缓冲区的长度以及在此缓冲区中的停止位置。所以它一直在读取，到达一个不允许访问的内存地址，因此出现了一个`segmentation fault`.

所以你想简单地：

```
/*
** If you keep your realloc, you need to allocate for the number of read
** characters from stdin, and for an extra char to terminate.
*/
line = realloc(line, charsread + 1); 
/*
** Terminate the string.
*/
line[charsread] = '\0'; 
```

**更新：**啊，你实际上几乎在那里，你有逻辑，但可能只是错过了这一点......你甚至自己写了这个：

> 通过 read() 将读取的字符数存储在 int 中（我相信是最后一个 \0）。

这部分是正确的。如果您真的得到了一行 80 个字符，那么您的`read`调用将在最后返回带有 a 的行`\0`。但大多数情况下，您的读取缓冲区较少，因此您的读取缓冲区仅读取可见字符，您需要自己对字符串进行空终止。

* * *

我还会尝试重写您的处理循环，以便将第一次初始调用作为它的一部分 strtok。编写起来并不总是很方便，但通常看到一段代码几乎与循环之前或之后的循环内的内容相同，这让我认为有更好的逻辑方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T06:34:11.990

非常感谢您富有洞察力的回复。

最后我只是重写了整件事，因为它看起来不像我预期的那么干净。由于手册中`strtok`指定了`NULL`如果无法提取令牌的返回值，这就是我最终得到的结果：

```
long number;
item = strtok(line, delim);
while (item != NULL) {
       number = strtol(item, &rest, 10);
       if (*rest == 0) {
           zeroOne(number);
       }
       else {
           fprintf(stderr, "\"%s\": not a non-negative int.\n", item);
       }
       item = strtok(NULL, delim);
} 
```

`NULL`似乎是一种更简洁的方法，并且确实考虑了 strtok 在尝试进入`while`我之前的循环之前返回的返回值这一事实。然后，今天早上我回到这里并阅读了您的回复:)

关于您对 a 的硬编码输入到该行的后续问题`\0`：这是否意味着我的最后一个`strtok`实际输出`\0`令牌并尝试进入循环，或者它是否`NULL`在我最后一次介绍后立即到达实体时返回 a特点？作为惯例，在使用时`read()`（或者可能是其他读取功能，例如`fgets()`我是否应该始终尝试将 a 硬编码`\0`到 read 行以允许其他功能检查`EOL`/ `EOF`？

如果其他人在使用这些功能（`strtok`和`strtol`）时遇到问题，我建议您查看此站点上发布的这两个问题：

关于`strtol`的第二个论点：[Strtol 第二个论点](https://stackoverflow.com/questions/10289661/strtol-second-argument)

关于`strtok`的输出：[无法连接 strtok 的输出变量。strcat 和 strtok](https://stackoverflow.com/questions/10227353/cannot-concatenate-strtoks-output-variable-strcat-and-strtok)

# scala - 内部具有幺半群和函数的元组的应用实例

> ID：10937268
> 
> 赞同：9
> 
> 时间：2012-06-07T18:01:17.723
> 
> 标签：scala, scalaz, applicative, monoids

我试图将之前遇到的 haskell 示例转换为 scalaz。原来的例子是这样的：

```
("Answer to the ", (*)) <*> ("Ultimate Question of ", 6) <*> ("Life, the Universe, and Everything", 7) 
```

据我所知，它使用[了这个](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/Control-Applicative.html#line-199)实例。

它不会从字面上转换为 scalaz：

```
scala> ("Answer to the ", ((_: Int) * (_: Int)) curried) |@| ("Ultimate Question of ", 6) |@| ("Life, the Universe, and Everything", 7) tupled
res37: (java.lang.String, (Int => (Int => Int), Int, Int)) = (Answer to the Ultimate Question of Life, the Universe, and Everything,(<function1>,6,7)) 
```

虽然，我已经寻找了一个实例，它似乎[在那里](https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Applicative.scala#L39)（再次，据我所知）。

所以，问题是：为什么它不能这样工作？或者我错过了什么/没有得到正确的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:44:57.377

Scalaz 的`Control.Applicative`'s等价物`<*>`也称为`<*>`，尽管它以相反的顺序混淆了它的参数。所以以下工作：

```
val times = ((_: Int) * (_: Int)) curried
val a = "Answer to the "
val b = "Ultimate Question of "
val c = "Life, the Universe, and Everything"

(c, 7) <*> ((b, 6) <*> (a, times)) 
```

或者，正如我在回复您的评论时指出的那样，如果您想坚持使用以下内容，您可以使用以下内容`|@|`：

```
(a -> times |@| b -> 6 |@| c -> 7)(_ apply _ apply _) 
```

我个人更喜欢这个`<*>`版本，即使它感觉倒退。

* * *

我们可以更详细地了解正在发生的事情。首先，您不需要这里的全部功能`Applicative`——<code>Apply 就可以了。我们可以`Apply`使用以下方法获取元组的实例`implicitly`：

```
scala> val ai = implicitly[Apply[({type λ[α]=(String, α)})#λ]]
ai: scalaz.Apply[[α](java.lang.String, α)] = scalaz.Applys$$anon$2@3863f03a 
```

现在我们可以将我们的第一个元组应用于第二个：

```
scala> :t ai(a -> times, b -> 6)
(java.lang.String, Int => Int) 
```

结果到第三个：

```
scala> :t ai(ai(a -> times, b -> 6), c -> 7)
(java.lang.String, Int) 
```

这就是我们想要的：

```
scala> ai(ai(a -> times, b -> 6), c -> 7)._1
res0: java.lang.String = Answer to the Ultimate Question of Life, the Universe, and Everything

scala> ai(ai(a -> times, b -> 6), c -> 7)._2
res1: Int = 42 
```

上的`<*>`方法`MA`只是把它包装得更好一点。

# jquery - css 类选择器不工作，不知道为什么

> ID：10937273
> 
> 赞同：0
> 
> 时间：2012-06-07T18:01:31.347
> 
> 标签：jquery, css, selector

在我的项目中，您可以单击一个地区，它的县徽出现在底部。

[我的项目](http://danu2.it.nuigalway.ie/09101916/qtipdemo2/)

我有一些 jquery 悬停在新添加的波峰上，我想在他们的类上使用选择器。每个波峰都添加了：

```
$("#selectResult").append("<div id='"+arr[this.id]+"' class='inline'></div>");
var addThis = arr[this.id];
$("#" + addThis).css({'background-image' : 'url(./coatofarms/'+arr[this.id]+'.png)',
'background-repeat': 'no-repeat',
'background-position': 'bottom'}); 
```

我的 jquery 测试悬停是：

```
 $(".inline").hover(function(){
         alert('in');
}, function(){
         alert('out');
}); 
```

该类是 .inline ，但选择不起作用（？）在 div ID 上测试，它工作得很好。有人可以告诉我哪里出错了吗？蒂亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:16:08.043

由于您`.inline`动态附加到 DOM，因此普通绑定在这里不起作用。您需要委托事件处理程序来执行如下操作：

```
$('#selectResult').on('hover', '.inline', function(e) {
   if(e.type == "mouseenter") {
      alert('In');
   } else {
      alert('Out');
   }
}); 
```

[**`.on()`**](http://api.jquery.com/on)委托事件处理程序的方法需要使用如下：

```
$(container).on(eventName, target, handlerFunction); 
```

这里，`container`指向的元素是静态元素，即在页面加载时属于 DOM，而不是动态附加。尽量避免`document`或`body`作为`container`参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:07:25.103

如果您要动态添加元素，则需要设置一个委托，以便在这种情况下为给定元素订阅一个或多个事件。

使用 jQuery [on()](http://api.jquery.com/on/)

就像是：

```
$(document).on('mouseover mouseout', '.inline', function(e){
      if(e.type == 'mouseover')
      {
         alert('in');
      }
      else if(e.type == 'mouseout')
      {
          alert('out');
      }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:21:14.730

试试这个 ：

```
$(".inline").live("mouseenter",function(){
         alert('in');
}).live("mouseleave", function(){
         alert('out');
}); 
```

# javascript - 两个变量怎么可能都是一个 JQuery 对象，但 .css 属性不能在其中一个上工作？

> ID：10937274
> 
> 赞同：2
> 
> 时间：2012-06-07T18:01:35.263
> 
> 标签：javascript, jquery

在下面的代码中，如何`thebody`同时`app.body`成为 JQuery 对象，但将`.css`属性设置为`thebody`有效但无效`app.body`？

```
var app = app || {};

app.show = function(html) {
    this.baseElement.html(html);
};

app.body = $('body');

app.init = function() {
    this.baseElement = $('div#app');
    var thebody = $('body');
    console.log(app.objectIsJquery(thebody)); //true
    console.log(app.objectIsJquery(app.body)); //true
    app.body.css('background-color', 'yellow'); //does not set the background color, no errors
    //thebody.css('background-color', 'yellow'); //sets color correctly
};

app.start = function() {
    this.baseElement.css('color', 'brown');
    this.show(dp.qstr.addStar('testing'));
};

app.objectIsJquery = function(obj) {
    return obj.selector != undefined;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T18:07:33.620

该代码可能位于页面的头部。因此，当执行该行时`app.body = $('body');`，主体还不存在。但是你稍后再打电话`app.init()`；可能在 DOMReady 上，所以主体存在于那时。当您运行时，`var thebody = $('body');`您会在集合中获得一个元素。

您可以通过检查 if `app.body.length === 0`while来验证这一点`thebody.length === 1`。

您应该将整个代码块移动到正文或`DOMReady`回调中，例如：

```
$(function(){

...

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:06:58.497

尝试

```
app.body.html().css() 
```

如果我的预感是正确的，那么您的 jquery 没有选择 app.body 的 dom，因此您需要将其转换为 html 以进行选择。

# c++ - 如何在 OpenGL 中绘制显示在 Alpha 纹理后面的线框？

> ID：10937280
> 
> 赞同：2
> 
> 时间：2012-06-07T18:01:54.623
> 
> 标签：c++, opengl, textures, alpha, wireframe

我有一个带有 alpha 通道的纹理立方体，并希望在立方体周围绘制一个线框框。我遇到的问题是线框没有通过纹理立方体的透明部分显示。如何在后面显示线框？

这是我用来绘制两个立方体的代码：

```
glLoadIdentity();

glTranslatef(0.0f, 0.0f, z);

glRotatef(xRotation, 1.0f, 0.0f, 0.0f);
glRotatef(yRotation, 0.0f, 1.0f, 0.0f);
glRotatef(zRotation, 0.0f, 0.0f, 1.0f);

// Draw Textured    
glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);

glEnable(GL_TEXTURE_2D);
glEnable(GL_LIGHTING);

glColor4f(1.0f, 1.0f, 1.0f, 1.0f);

glBindTexture(GL_TEXTURE_2D, _images[_filter]);

glBegin(GL_QUADS);
    DrawTexturedCube();
glEnd();

// Draw Wireframe
glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);

glDisable(GL_TEXTURE_2D);
glDisable(GL_LIGHTING);

glColor3f(1.0f, 0.0f, 0.0f);

glBegin(GL_QUADS);
    DrawWireframeCube();
glEnd();

xRotation += xSpeed;
yRotation += ySpeed;
zRotation += zSpeed; 
```

我的 Init 中的混合功能正在使用：

```
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

在绘制纹理之前，我已经为 glColor4f 尝试了不同的 alpha 值，但这并没有什么不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:04:32.653

您是否启用了深度测试？我的第一个猜测是，由于您已经绘制了带纹理的立方体（并且可能已写入深度缓冲区），因此随后在同一 Z 处立即绘制线框立方体的尝试未通过深度测试并且未渲染。

尝试禁用它，或更改渲染立方体和线框的顺序。

# image - 在 Tkinter for python 3.2 中显示图像

> ID：10937287
> 
> 赞同：0
> 
> 时间：2012-06-07T18:02:24.170
> 
> 标签：image, python-3.x, tkinter

如何使用 Tkinter 在 Python 3.2 中显示图像？PIL 不起作用，所以不使用它的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:23:22.873

使用 Tkinter`PhotoImage`类创建一个图像对象，然后将该对象分配给`image`一个小部件的属性`Label`。

有关更多信息，请参阅[http://effbot.org/tkinterbook/photoimage.htm](http://effbot.org/tkinterbook/photoimage.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-20T12:58:33.487

这很简单：

```
photo = PhotoImage(file="C:\pictures\pic1.gif")
label = Label(image=photo)
label.pack() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T01:55:12.123

# 试试这个（对于python 3）

```
from tkinter import PhotoImage

photo = PhotoImage(file="/home/pi/pile.gif")
lb=tkinter.Label(root,image = photo)
lb.grid(row=4, column=1) 
```

# linux - 如何禁用 gdb 中的新线程/线程退出消息？

> ID：10937289
> 
> 赞同：77
> 
> 时间：2012-06-07T18:02:33.267
> 
> 标签：linux, multithreading, logging, gdb

我正在调试一个应用程序，我收到很多这样的消息：

```
[New Thread 0x7fffde152700 (LWP 11142)]
[Thread 0x7fffde152700 (LWP 11142) exited]
[New Thread 0x7fff967fa700 (LWP 11143)]
[Thread 0x7fff967fa700 (LWP 11143) exited]
[New Thread 0x7fff967fa700 (LWP 11144)]
[Thread 0x7fff967fa700 (LWP 11144) exited]
[New Thread 0x7fff967fa700 (LWP 11145)]
[Thread 0x7fff967fa700 (LWP 11145) exited]
[New Thread 0x7fffde152700 (LWP 11146)]
[Thread 0x7fffde152700 (LWP 11146) exited]
[New Thread 0x7fffde152700 (LWP 11147)]
[Thread 0x7fffde152700 (LWP 11147) exited]
[New Thread 0x7fffde152700 (LWP 11148)]
[Thread 0x7fffde152700 (LWP 11148) exited]
[New Thread 0x7fffde152700 (LWP 11149)]
[Thread 0x7fffde152700 (LWP 11149) exited]
[New Thread 0x7fffde152700 (LWP 11150)]
[Thread 0x7fffde152700 (LWP 11150) exited]
[New Thread 0x7fffde152700 (LWP 11151)]
[Thread 0x7fffde152700 (LWP 11151) exited]
[New Thread 0x7fffde152700 (LWP 11152)]
[Thread 0x7fffde152700 (LWP 11152) exited]
[New Thread 0x7fffde152700 (LWP 11153)]
[Thread 0x7fffde152700 (LWP 11153) exited]
[New Thread 0x7fffde152700 (LWP 11154)]
[Thread 0x7fffde152700 (LWP 11154) exited]
[New Thread 0x7fff967fa700 (LWP 11155)]
[Thread 0x7fff967fa700 (LWP 11155) exited]
[New Thread 0x7fffde152700 (LWP 11156)]
[Thread 0x7fffde152700 (LWP 11156) exited]
[New Thread 0x7fffde152700 (LWP 11157)]
[Thread 0x7fffde152700 (LWP 11157) exited] 
```

我几乎从不对此消息感兴趣。它们使阅读其余输出变得更加困难。它们可以改变程序的计时行为，从而难以重现和调试竞态危害。如何禁用这些消息？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-06-07T18:04:17.790

您可以在运行 gdb 时关闭线程事件：

```
set print thread-events off 
```

# php - PHP 字符串到 javascript 可以破坏代码 - 我猜是某些字符，是问题吗？

> ID：10937294
> 
> 赞同：0
> 
> 时间：2012-06-07T18:03:07.027
> 
> 标签：php, javascript, string

我将一个 PHP 字符串传递给 onclick。此文本来自 YouTube（视频说明）。在某些情况下，字符串会破坏代码。

字符 \n \r ' 和 " 被删除，因此不清楚是什么字符是原因。

```
echo "<span onclick='update_hits(\"".$id."\");vidtxt=\"".$desc6."\";openVideo(\"".$v."\",\"".$sn." : ".addslashes($title)."\",0)'><img src='".$apng."' border='0' />Play large</span>"; 
```

我已经尝试了我能想到的一切来解决这个问题，但没有成功。

```
$desc6=nl2br($desc6);
$desc6=preg_replace('/[\x00-\x1f]/', '', $desc6);
$desc6=preg_replace('/\xc2[\x80-\x9f]/', '', $desc6);
$desc6=preg_replace('/[\x7f]/', '', $desc6);
$desc6=nl2br($desc6);
$desc6 = iconv("UTF-8", "UTF-8//IGNORE", $desc6); 
$desc6=preg_replace('~\p{C}+~u', '', $desc6);
$desc6=htmlspecialchars($desc6);
$desc6=preg_replace('/[\x00-\x1F\x7F]/', '', $desc6); 
$desc6=ereg_replace('[[:cntrl:]]', '', $desc6); 
$desc6 = str_replace(chr(127), "", $desc6); 
$desc6=preg_replace('/\bKa(\W|$)/i', '', $desc6);
$desc6=addslashes($desc6); 
```

大多数描述字符串都可以正常工作，即使是其他语言的文本。但有时有些东西会打破这一点。

剥离为 ascii，这意味着我不能显示非英语语言，确实有效。

```
$desc6=preg_replace('/[^(\x20-\x7F)]*/','', $desc6); 
```

以下允许所有描述工作，但像韩语这样的语言不能正确显示：

```
$desc6 = iconv("ISO-8859-1", "UTF-8//IGNORE", $desc6); 
```

有任何想法吗？

ps:
$desc6=json_encode($desc6); 打破一切:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:22:26.980

您只需要两个功能：

*   [`json_encode`](http://php.net/json_encode)对 JavaScript 字符串进行编码。
*   [`htmlspecialchars`](http://php.net/htmlspecialchars)对 HTML 属性值进行编码。

两者都在行动：

```
echo "<span onclick='".htmlspecialchars("update_hits(".json_encode($id).");vidtxt=".json_encode($desc6).";openVideo(".json_encode($v).",".json_encode($sn." : ".$title).",0)", ENT_QUOTES)."'><img src='".htmlspecialchars($apng, ENT_QUOTES)."' border='0' />Play large</span>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:22:34.180

`.addslashes($title)."\",0)` 不应该是"\""吗

# iphone - iOS 开发 - 创建多个可拖动的图像

> ID：10937301
> 
> 赞同：0
> 
> 时间：2012-06-07T18:03:23.400
> 
> 标签：iphone, ios, ipad

我了解如何使单个图像可拖动，但我似乎无法使两个不同的图像可拖动。这是我的代码：

```
-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

  UITouch *touch = [[event allTouches] anyObject];
  CGPoint location = [touch locationInView:self.view];

  if ([touch view] == player1) {
      player1.center = location;
  } else {
      player2.center = location;
  }

} 
```

player1 和 player2 是我的两个图像。

我不明白为什么上面的代码不起作用？我非常感谢任何人可以给我的任何帮助/建议。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:08:30.333

`if ([[touch view] isEqual:player1])`因为您比较对象，而不是原始标量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:12:57.923

你应该做的是子类化`UIImageView`并`touchesMoved:`在那里实现。因此，当您初始化可拖动视图时，它们都继承了`touchesMoved:`功能。你的代码应该看起来更像这样......

```
//Player.h
@interface Player : UIImageView

CGPoint startLocation;

@end

//Player.m
@implementation Player

- (void) touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {   
     // Retrieve the touch point
     CGPoint pt = [[touches anyObject] locationInView:self];
     startLocation = pt;
}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

       CGPoint pt = [[touches anyObject] locationInView:self];
       CGFloat dx = pt.x - startLocation.x;
       CGFloat dy = pt.y - startLocation.y;
       CGPoint newCenter = CGPointMake(self.center.x + dx, self.center.y + dy);
       self.center = newCenter;
}

@end 
```

现在，当您初始化`Player`'s 时，示例如下：

```
Player *player1 = [[Player alloc] initWithImage:[UIImage imageNamed:@"player1.png"]];
[self.view addSubview:player1];
// You can now drag player1 around your view.

Player *player2 = [[Player alloc] init];
[self.view addSubview:player2];
// You can now drag player2 around your view. 
```

假设您将这些添加`Players`到您`UIViewController`的视图中。

他们都实施`-touchesMoved:`

希望这可以帮助 ！

**更新**：添加`-touchesBegan:`了拖动子类的完整示例`UIImageView`，确保您将`.userInteractionEnabled`属性设置为**YES** ，因为默认情况下这是**关闭的。**

# regex - 在多行上搜索和替换模式

> ID：10937302
> 
> 赞同：0
> 
> 时间：2012-06-07T18:03:24.233
> 
> 标签：regex, sed

我有一个像

```
Fixed pattern
text which can change(world) 
```

我想用

```
Fixed pattern
text which can change(hello world) 
```

我想用什么

```
cat myfile | sed -e "s#\(Fixed Pattern$A_Z_a_z*\(\)#\1 hello#g > newfile 
```

UPDATE：上面的world这个词也是一个变量，会改变 基本上在表达式后面遇到的第一个括号后面加上hello。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:15:30.533

假设您的目标是`'hello '`在 之后的行的每个左括号内添加`'Fixed pattern'`，这是一个应该有效的解决方案：

```
sed -e '/^Fixed pattern$/!b' -e 'n' -e 's/(/(hello /' myfile 
```

以下是每个部分的解释：

```
/^Fixed pattern$/!b    # skip all of the following commands if 'Fixed pattern'
                       #   doesn't match
n                      # if 'Fixed pattern' did match, read the next line
s/(/(hello /           # replace '(' with '(hello ' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T18:12:06.953

要使用 sed 执行此操作，请使用`n`：

```
sed '/Fixed pattern/{n; s/world/hello world/}' myfile 
```

您可能需要更加小心，但这应该适用于大多数情况。每当 sed 看到`Fixed pattern`（您可能想要使用行锚`^`和`$`）时，它将读取下一行，然后对其应用替换。

# php - Onclick in a INPUTBOX - 在附近显示文本 - onclick out 文本消失

> ID：10937308
> 
> 赞同：0
> 
> 时间：2012-06-07T18:03:41.800
> 
> 标签：php, javascript, jquery-ui, jquery

我有一个输入框。当我在输入框中单击文本以显示在输入框附近时，我想要做什么，如果我单击 OUT 输入框，文本就会消失...

我试过这个，它有效但不完全：

```
<style type="text/css">
.hidden {display:none} 
</style> 
```

然后

```
<input name="title" type="text" id="title" onclick="document.getElementById ('TEXT_CLASS').className = document.getElementById ('TEXT_CLASS').className == 'hidden' ? '' : 'hidden'" /> 
```

然后

```
<span id="TEXT_CLASS" class="hidden">the text that I want to appear on click</span> 
```

所以这一切都有效，但是，当我点击时文本不会消失，文本只是切换..

有人可以帮我使文本仅在“单击”时出现，而仅在“单击”时消失吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:07:07.533

当您说点击退出时，我认为您的意思是`blur`.. 意味着文本框失去焦点.. 然后您需要实现 onblur 事件。

您应该实施`onfocus`并`onblur`如下所示。

```
<input name="title" type="text" id="title" 
   onfocus="document.getElementById('TEXT_CLASS').className = ''";
   onblur=" document.getElementById('TEXT_CLASS').className = 'hidden';"
/> 
```

可能你应该考虑这样做，如下所示，

```
 <input name="title" type="text" id="title" />
   <span id="TEXT_CLASS" class="hidden">Test Class</span>

   <script>
      var titleEl = document.getElementById('title');
      var textSpanEl = document.getElementById('TEXT_CLASS');

      titleEl.onfocus = function () {
          textSpanEl .className = '';
      }

      titleEl.onblur = function () {
          textSpanEl .className = 'hidden';
      }
   </script> 
```

**演示：http:** [//jsfiddle.net/LyKze/](http://jsfiddle.net/LyKze/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:07:23.453

如果您使用的是 jQuery，则可以执行类似的操作

```
$('#title').click(function(){ 
     $('#TEXT_CLASS').css('display', $('#TEXT_CLASS').is(':visible') ? 'none' : 'block'); 
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:09:33.403

我建议您创建一个 javascript 函数来切换跨度的可见性。

```
function setVisilibity(span, visible)
{
    span.style.display = visible ? "block" : "none";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:14:12.897

将 TEXT_CLASS 默认设置为隐藏，然后执行以下操作

```
$("#title").focus(functiion(){
   $("#TEXT_CLASS").show();
}); 
```

# unit-testing - 如何使用 jasmine 和 browserify 进行单元测试？

> ID：10937309
> 
> 赞同：9
> 
> 时间：2012-06-07T18:03:47.243
> 
> 标签：unit-testing, node.js, jasmine, browserify

使用 browserify 样式代码运行 jasmine HTML 报告器的任何最佳方法？我还希望能够使用 phantomjs 无头运行，因此需要 HTML 报告器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-16T23:43:54.603

我创建了一个详细的示例项目来解决茉莉花测试（和其他） - 请参阅[https://github.com/amitayd/grunt-browserify-jasmine-node-example](https://github.com/amitayd/grunt-browserify-jasmine-node-example)。在[我的博文中讨论](http://www.doboism.com/blog/2013/05/17/cross-developing-for-node-js-and-browsers-using-browserify/.)

这方面的方法是为主要源代码（所有模块都公开）创建一个 Browserify 包，并为依赖于外部的主要源代码的测试创建一个。然后测试可以在 PhantomJS 或真正的浏览器中运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-18T18:23:00.353

我认为还没有一个`jasmine-browserify`包，它与 Browserify/NPM 的做事方式不匹配（避免全局导出）。

现在，我`/node_modules/jasmine-reporters/ext/jasmine.js`只`jasmine-html.js`在`<head>`我`spec_entry.js`的`<head>`. （请注意，如果入口点不是顶级的，那么由于 Browserify 中存在一个长期的、棘手的错误，您将度过一段糟糕的时光）。

只要`jasmine-node`您不假设存在全局`document`或`window`. 但是，您必须记住在其中注册您的规范`spec_entry.js`，除非您想破解 Browserify 以使其在您的目录中抓取`.spec.js`文件。

不过，我会对更优雅的解决方案非常感兴趣，它可以透明地与 jasmine-node 和 browserify 一起使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-17T18:01:06.497

如果您使用[grunt-watchify](https://github.com/amiorin/grunt-watchify)，则无需创建 spec_entry.js。只需在您的规范中使用 require，然后将您的规范与 grunt-watchify 捆绑：

```
 watchify: {
        test: {
            src: './spec/**/*Spec.js',
            dest: 'spec/spec-bundle.js'
        }
    },
    jasmine: {
        test: {
            options: {
                specs: 'spec/spec-bundle.js'
            }
        }
    }, 
```

然后运行你的测试

```
grunt.registerTask('test', ['watchify:test','jasmine:test']); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-16T22:04:41.353

由于以上所有答案都已过时（当然这并不意味着它们不再工作等）我想指出[https://github.com/nikku/karma-browserify](https://github.com/nikku/karma-browserify)这是业力的预处理器亚军。它将测试文件与所有必需的依赖项结合在一起。这样创建的 browserify 包被传递给基于配置运行它的业力。请注意，您可以选择任何现代测试框架（jasmin、mocha...）和浏览器（phantom、chrome ..）可能这正是您所需要的 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-06T19:43:43.643

您可能还想研究 Karma。设置非常简单，它会监视更改并重新运行您的测试。查看这个使用 Karma 测试 browserify/react 项目的示例项目。您只需要添加一些依赖项并创建一个 karma.conf.js 文件。

[https://github.com/TYRONEMICHAEL/react-component-boilerplate](https://github.com/TYRONEMICHAEL/react-component-boilerplate)

# javascript - 如何加载 gzip 文件？

> ID：10937310
> 
> 赞同：1
> 
> 时间：2012-06-07T18:03:55.460
> 
> 标签：javascript, gzip, web-optimization

我对此完全陌生，所以我将所有 js 文件压缩到一个 gzip 中，然后我该怎么办？我只是简单地将我的代码更改为

```
<script type="text/javascript" src='sample.js.gz'></script> 
```

就像我以前加载那些 js 文件一样？还是我需要解压缩它？

# ios - 使用 CoreGraphics 和线程问题绘制的自定义 UITableViewCell

> ID：10937314
> 
> 赞同：0
> 
> 时间：2012-06-07T18:04:14.153
> 
> 标签：ios, uitableview, thread-safety, core-graphics

我正在使用核心图形绘制自定义 UITableViewCell，基于 Loren Brichter 的 Fast TableView 示例。

我在自定义单元类中使用了一些 iVar，我将其创建为具有强参考（因此为 ARC）的原子（多线程安全）。

现在，当我开始太快地滚动 tableView 时，问题就开始了。`- (void)drawContentView:(CGRect)rect`我在子类化以执行自定义绘图的方法上随机崩溃。

问题是我在自定义单元类中使用的 iVar 已被释放，并且内存现在由其他对象拥有，这当然会导致崩溃。

我尝试对整个绘图代码使用@synchronized 指令，以强制对绘图代码进行互斥锁，但这并没有解决问题。

有没有其他人遇到过这个问题并且知道问题的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:04:40.027

原子并不普遍意味着“多线程安全”。这只是意味着当您使用 getter 时，您将在其上获得一个额外的保留/自动释放对（因此它不会在您的运行循环期间消失），并且它将与 setter 同步，这样您就可以如果设置和发生碰撞，则不会得到半个对象。仅当您使用 getter 和 setter 时，这一切都是正确的。您不应该直接访问 ivars。如果你是，那么原子就没有任何意义。

您也可能在主线程以外的线程上修改主 UIKit 上下文。你不能这样做。主 UIKit 上下文（交给 的`drawRect:`）仅在主线程上有效。

# javascript - 在 HTML 5 / Javascript Techart 上绘制矩形

> ID：10937317
> 
> 赞同：0
> 
> 时间：2012-06-07T18:04:23.157
> 
> 标签：javascript, html, teechart

我需要在 HTML 5 / JavaScript Tee 图表上绘制垂直和水平矩形/带（如甘特图）。

我可以使用下面的 Bar 系列绘制一个矩形，但我希望矩形浮动在特定的 XY 坐标上，而不是从 x 轴站立。

```
var series1 = new Tee.Bar();
                     series1.data.values = [30000];
                     //alert(" openValues[y] "+ openValues[y] + " closeValues[y]  "+ closeValues[y] );
                     series1.data.x = [ (openValues[y] + closeValues[y]) /2 ];
                     series1.format.shadow.visible = false;
                     series1.format.lineCap = "round";
                     series1.format.stroke.fill = "#D3D3D3";
                     series1.format.stroke.size = .5;
                     series1.colorEach = "auto";
                     series1.format.join = "round";
                     series1.format.cap = "square";
                     series1.format.fill="#F8F8FF";
                     series1.barSize=100000;
                     //series1.format.transparent =1;
                     series1.color = "silver";
                     series1.marks.visible = false;
                     //series1.hover.shadow =false;
                     series1.hover.stroke.size =.01;
                     Chart1.addSeries(series1); 
```

是否可以使用 HTML 5 / Javascript Teecharts 绘制一个矩形。我想绘制具有特定 x1、y1、x2 和 y2 值的甘特图中的矩形。

我尝试在 Teecharts 中使用格式对象，但没有帮助

Chart1.panel.format.rectPath(20,20,30,40);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:26:32.063

使用 html5 绘制简单的矩形...

```
window.onload = function() {
    var canvas = document.getElementById('myCanvas');
    var context = canvas.getContext('2d');

    context.beginPath();
    context.rect(188, 50, 200, 100);
    context.fillStyle = '#8ED6FF';
    context.fill();
    context.lineWidth = 5;
    context.strokeStyle = 'black';
    context.stroke();
  }; 
```

这是使用 html5 的甘特图的示例链接

[http://www.eecg.toronto.edu/~brousse1/Libraries/RGraph/docs/gantt.html](http://www.eecg.toronto.edu/~brousse1/Libraries/RGraph/docs/gantt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:09:59.433

下一个 TeeChart Javascript v1.1 将包括甘特系列。这是演示： http: [//www.steema.us/files/jscript/demos/series/gantt/gantt.htm](http://www.steema.us/files/jscript/demos/series/gantt/gantt.htm)

我们很高兴听到有关它的任何评论。

Steema 支持中心

# .net - 在 .NET Windows 窗体中处理对象的对象属性更改事件

> ID：10937318
> 
> 赞同：1
> 
> 时间：2012-06-07T18:04:26.617
> 
> 标签：.net, vb.net, winforms, properties, event-handling

我知道如何很容易地处理单个对象的属性更改事件。我想处理作为另一个对象一部分的对象属性更改事件。

给定`Object`：

```
[ObjectY = Y]
+ Public WithEvents X As ObjectX 
```

我想做类似的事情：

```
Private Sub XPropertyChanged() Handles Y.X.PropertyChanged 
```

现在我需要创建一个与该对象内的对象相等的对象，然后处理此变量指针属性更改，但这很烦人。有没有办法做类似上面的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T16:14:07.707

答案是评论：

> 让每个对象实现 INotifyPropertyChanged ...然后如何从复合对象中冒泡事件将变得非常明显。

# build - CCnet 中的 System.FormatException

> ID：10937321
> 
> 赞同：1
> 
> 时间：2012-06-07T18:04:37.960
> 
> 标签：build, cruisecontrol.net, formatexception

当我尝试通过 Cruise Control 构建项目时，出现以下错误：

```
BUILD EXCEPTION
Error Message:  System.FormatException: Input string was not in a correct format.
at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number,               NumberFormatInfo info, Boolean parseDecimal)
at System.Number.ParseUInt64(String value, NumberStyles options, NumberFormatInfo numfmt)
at System.Convert.ToUInt64(String value)
at ThoughtWorks.CruiseControl.Core.Sourcecontrol.Svn.GetModifications(IIntegrationResult from, IIntegrationResult to)
at ThoughtWorks.CruiseControl.Core.Sourcecontrol.QuietPeriod.GetModificationsWithLogging(ISourceControl sc, IIntegrationResult from, IIntegrationResult to)
at ThoughtWorks.CruiseControl.Core.Sourcecontrol.QuietPeriod.GetModifications(ISourceControl sourceControl, IIntegrationResult lastBuild, IIntegrationResult thisBuild)
at ThoughtWorks.CruiseControl.Core.IntegrationRunner.GetModifications(IIntegrationResult from, IIntegrationResult to)
at ThoughtWorks.CruiseControl.Core.IntegrationRunner.Integrate(IntegrationRequest request)
Project:    TRPMonitor 5.2.0 10G 11G
Date of build:  2012-06-07 13:53:26
Running time:   00:00:03
Integration Request:    Build (ForceBuild) triggered from COREBUILDER 
```

我将 TortoiseSvn 的版本从 1.6 更改为 1.7，并将 svn 命令行从 1.6 更新为 1.7。我怎样才能让我的项目再次构建？

谢谢！

PS我去了这里：http: [//jira.public.thoughtworks.org/browse/CCNET-634](http://jira.public.thoughtworks.org/browse/CCNET-634) 和这里：[http](http://comments.gmane.org/gmane.comp.windows.dotnet.ccnet.user/6126) ://comments.gmane.org/gmane.comp.windows.dotnet.ccnet.user/6126 但是它没有解决我的问题。

*   编辑 -

在 CCnet.log 中，我发现了这个（在将所有文件更新到 svn 1.7 之后）：

```
2012-06-07 15:16:45,579 [72:INFO] Project: 'TRPMonitor 5.2.0 10G 11G' is added to queue: 'TRPMonitor 5.2.0 10G 11G' in position 0\. Requestsource : COREBUILDER ()
2012-06-07 15:16:45,594 [TRPMonitor 5.2.0 10G 11G:INFO] Queue: 'TRPMonitor 5.2.0 10G 11G' is attempting to be in-use, trying to lock related queues
2012-06-07 15:16:45,594 [TRPMonitor 5.2.0 10G 11G:INFO] Project: 'TRPMonitor 5.2.0 10G 11G' is first in queue: 'TRPMonitor 5.2.0 10G 11G' and shall start integration.
2012-06-07 15:16:45,594 [TRPMonitor 5.2.0 10G 11G:DEBUG] Checking if C:\REP\TRUNKS_5.2.0\TRPMonitor\trunks_5.01.1 is a svn working folder
2012-06-07 15:16:45,594 [TRPMonitor 5.2.0 10G 11G:DEBUG] Starting process [C:\Program Files\svn-win32-1.7.5\svn.exe] in working directory [C:\REP\TRUNKS_5.2.0\TRPMonitor\trunks_5.01.1] with arguments [info http://xx.xx.xxx.xx/svn/svn-payments-core/ --username XXXXXXXX --password ******** --no-auth-cache --non-interactive --xml]
594 [TRPMonitor 5.2.0 10G 11G:DEBUG] Not setting PriorityClass on [C:\Program Files\svn-win32-1.7.5\svn.exe] to default Normal
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] <?xml version="1.0" encoding="UTF-8"?>
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] <info>
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] <entry
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe]    path="svn-payments-core"
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe]    revision="75905"
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe]    kind="dir">
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] <url>http://xx.xx.xxx.xx/svn/svn-payments-core</url>
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] <repository>
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] <root>http://xx.xx.xxx.xx/svn/svn-payments-core</root>
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] <uuid>12d69269-45e3-204f-b74b-a9c2047a3d92</uuid>
2012-06-07 15:16:45,844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] </repository>
2012-06-07 15:16:45,844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] <commit
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe]    revision="75905">
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] <author>XXXXXX</author>
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] <date>2012-06-07T19:15:34.949697Z</date>
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] </commit>
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] </entry>
844 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] </info>
954 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] standard-error stream closed -- null received in event
954 [4:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] standard-output stream closed -- null received in event
969 [72:DEBUG] [TRPMonitor 5.2.0 10G 11G C:\Program Files\svn-win32-1.7.5\svn.exe] process exited event received
985 [TRPMonitor 5.2.0 10G 11G:WARN] Source control failure (GetModifications): Input string was not in a correct format. 
```

似乎错误来自SVN命令行...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:44:53.547

查看 svn 1.7的[发行说明](http://subversion.apache.org/docs/release-notes/1.7.html#wc-ng)，元数据的存储方式似乎发生了变化（而不是多个 .svn 文件夹，现在只有一个。）尝试删除构建框上的所有源代码并让 ccnet重新拉一切。

# php - 要反序列化数据，是否需要具有相同的数组结构，从该数组结构中保存到数据库

> ID：10937322
> 
> 赞同：0
> 
> 时间：2012-06-07T18:04:39.267
> 
> 标签：php, joomla, joomla1.5, joomla-extensions

我将 Joomla 的一个组件用于 CCKT，它在 serialize() 之后存储数据，

另一方面，我正在使用另一个组件来生成 csv & xls 文件，它将所有 sql 数据转换为 csv。

因此，当我将存储在 db 中的那些数据称为序列化时，它在 xls 中也显示为序列化 &**我希望它们取消序列化**

***所以问题是生成 xls 和 csv 的组件是否必须知道序列化的数组才能将其转换为非序列化..？？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:17:03.430

查看文档：

[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

PHP 序列化创建一个字符串。

CSV 生成器通常会遍历数组以获取值，但 DB 查询会返回序列化值的字符串。

使用 unserialize() 重新构建序列化数组并将其传递给您的 CSV 函数。

[http://www.php.net/manual/en/function.unserialize.php](http://www.php.net/manual/en/function.unserialize.php)

检查 PHP 文档以及 CSV 函数接受的参数。

干杯

# php - 动态更改配置变量 cakephp

> ID：10937324
> 
> 赞同：1
> 
> 时间：2012-06-07T18:04:43.487
> 
> 标签：php, cakephp, cakephp-1.3

假设我在 cakePHP 应用程序的 bootstrap.php 文件中有这个：

```
Configure::write('Config.language', 'eng'); 
```

如何根据应用程序控制器中的用户操作动态更改该配置变量的值？我试图在我的控制器中做与上面所做的相同的事情，但这没有用

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:00:28.790

尝试`Configure::write('Config.language', 'dut');`例如

@Ryan Pendleton 提出的问题的[答案显示了使用该指令的一种正确方法。](https://stackoverflow.com/a/10147349/840409)它应该在 AppController 中使用，因为它首先被加载 - 作为应用程序本身中所有其他控制器的父级。我使用了“有点正确”，因为最好验证`app/config/routes.php`文件中的语言代码（'eng'、'fre'、'dut'） -[转到此处了解更多信息](http://book.cakephp.org/1.3/view/945/Routes-Configuration)。

另请查看：[国际化-本地化说明](http://book.cakephp.org/1.3/en/view/1228/Internationalization-Localization)。

# php - 在 MySQL 的表中插入多项选择

> ID：10937328
> 
> 赞同：1
> 
> 时间：2012-06-07T18:04:52.953
> 
> 标签：php, mysql, html, database, arrays

我必须`<select multiple="multiple">`在 php.ini 中获得多种选择。之后，我使用该方法将它放入一个变量中，`POST`并且我尝试至少将数组回显以确保我的变量`$authors`具有选择但它会打印此错误

`Warning: Invalid argument supplied for foreach() in C:\xampp\htdocs\ex\addBook.php on line 45`

这是我的代码：

```
<?php
    include ("includes/connections.php");
    $authors = $_POST["authors"];
    foreach ($authors as $author) 
    {
        echo $author;
    }
?> 
```

这是我在 html 中的“选择多个”：

```
<?php multiple("author_ID", "author_firstname", "author_lastname", "author", "author_lastname", "authors"); ?> <span style="font-size: 12px; color: #666;">(Keep down Ctrl for selecting multiple authors)</span> 
```

这是多功能：

```
<?php include ("includes/connections.php");
    function multiple($intIdField, $strfNameField, $strlNameField, $strTableName, $strOrderField, $strNameOrdinal, $strMethod="asc") {
       echo "<select multiple=\"multiple\" name=\"$strNameOrdinal\">\n";

       $strQuery = "select $intIdField, $strfNameField, $strlNameField
                   from $strTableName
                   order by $strOrderField $strMethod";

       $rsrcResult = mysql_query($strQuery);

       while($arrayRow = mysql_fetch_assoc($rsrcResult)) {
          $strA = $arrayRow["$intIdField"];
          $strB = $arrayRow["$strlNameField"] . " " . $arrayRow["$strfNameField"];    
          echo "<option value=\"$strA \">$strB</option>\n";
       }

       echo "</select>";
    }
?> 
```

所以我猜这个`$authors`变量会是一个数组，我很乐意至少打印出来，但正如我已经说过的那样，这不会发生。

从数据库中获取的作者正确显示，没有任何问题。问题是我希望从“选择多个”列表中选择的那些被回显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:50:35.317

HTML中的多选名称需要以'[]'结尾表示它是一个数组，然后当你在php中运行你的foreach循环时，确保它正在接收一个数组，所以它需要设置，或者您需要将单个值类型转换为数组。我很确定您的问题在于您如何设置 name 属性。

# sharepoint-2010 - 如何在 sharepoint 2010 中显示特定搜索范围的结果？

> ID：10937332
> 
> 赞同：3
> 
> 时间：2012-06-07T18:05:09.580
> 
> 标签：sharepoint-2010

在 SharePoint 2010 中，我为不同的文档库位置创建了几个新的搜索范围，但无论我使用哪一个都没有返回任何结果。我什至创建了一个搜索范围来搜索“所有内容”，将其附加到我的搜索框 Web 部件，但仍然没有结果！

这会是什么原因？

我注意到当我从 URL 中删除 &s=myscope 时，结果会显示出来，但是一旦我将 &s=myscope 放回它上面，我就没有得到任何结果。我应该调试或检查什么？...

*   我已经等了 15 分钟让示波器爬行
*   子站点的索引站点内容，设置为是
*   搜索框 Web 部件已连接到正确的搜索范围组

这真让我抓狂...

谢谢你的帮助！

* * *

~~我什至创建了一个搜索范围来搜索“所有内容”，将其附加到我的搜索框 Web 部件，但仍然没有结果！~~

当我将范围设置为“所有内容”时它会起作用 - 刚刚发现！但不是当我尝试将网址设置到特定文件夹时......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:19:34.377

了解行为之间的区别，“包括”和“要求”有所帮助。过滤范围的网址也可能敏感吗？我在 URL 的开头添加了“https”，因为我使用的网站也使用“https”。但是后来我用“http”尝试了它......所以作为最终判决，通过使用“Include”和“http://”，我的范围抓取了我特定目录中的所有项目，我现在得到了结果！

# python - Python/sqlite：从其他列具有特定值的行中获取列值作为列表/元组

> ID：10937334
> 
> 赞同：2
> 
> 时间：2012-06-07T18:05:27.613
> 
> 标签：python, sqlite

我有一个包含 4 列的 sqlite 表，例如：id、pagenr、x1、y1。我需要将 y1 列值作为列表/元组获取，但只能从 pagenr 和 x1 具有特定值的行中获取。帮助很大。注意：我使用的是 python 2.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:01:50.413

使用 sqlite3 模块的这段代码应该将查询结果的行提取到`output`列表中：

```
conn = sqlite3.connect('database.db')
c = conn.cursor()
c.execute('select y1 from table where pagenr=? and x1=?',
(pagenr_value, x1_value))
output = c.fetchall() 
```

# spring - Spring中的表单导航

> ID：10937335
> 
> 赞同：1
> 
> 时间：2012-06-07T18:05:28.297
> 
> 标签：spring, spring-mvc

嗨，我有四个 JSP 文件，比如 one.jsp、tow.jsp、three.jsp 和four.jsp，每个文件都有下一个和上一个链接来导航到所有jsp 和最后一个jsp 文件，即four.jsp 有提交按钮。现在我想要从前三个jsp到第四个的所有字段的值，当使用从four.jsp点击提交按钮时将数据提交到数据库我不必使用隐藏字段将值从jsp传递到jsp和我不想使用会话来存储数据。有没有办法在不使用隐藏字段和会话的情况下将数据（VO）从一个 jsp 传递到另一个？

注意：我正在使用弹簧。而且我对 JSF 的导航不感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:22:22.570

所以你需要一个有状态的bean，可能想研究一下Spring Web Flow之类的东西。它是为处理这类东西而设计的。

如果您不想将其存储在会话中，则必须开始研究具有状态可能性的 EJB。

这是一些文档：

[http://static.springsource.org/spring/docs/2.5.6/reference/ejb.html](http://static.springsource.org/spring/docs/2.5.6/reference/ejb.html)

PS EJB 也在会话中存储东西，不要认为有任何绕过它，除非您序列化 POJO 并将其存储为 cookie。

# c# - 方法返回类型列表 还是通用方法？

> ID：10937339
> 
> 赞同：-4
> 
> 时间：2012-06-07T18:05:39.920
> 
> 标签：c#, xml, generics

我希望该方法具有特定的返回类型，但不知何故我无法使其工作。

我有一个 XML 结构：

```
<Notifications>
   <Alerts>
      <Max>3<Max/>
      <Med>2<Med/>
      <Min>1<Min/>
   </Alerts>
</Notifications> 
```

我想得到 , ,`Max`的`Med`值`Min`。但要点是我根本不想要任何 foreach 循环，我只希望该方法具有 List<string> 返回类型，或者更好地创建通用返回类型。

关键是，我没有任何自定义类（我不想拥有它）来填充它的属性。

这就是我所知道的，但是我在“List()”匿名方法上遇到了一个错误：

```
Here it returns:
List<string> items = GetAlerts();

//method to read:
public List<string> GetAlerts()
{
    return xmlDoc1.Descendants("Notifications").Elements("Alerts").Select(s => new
    {
        MAX = s.Element("Max").Value,
        MED = s.Element("Med").Value,
        MIN = s.Element("Min").Value
     }).ToList(); //error on this line
} 
```

## ----------

* * *

这个方法看起来会是一个通用的返回类型吗？这是不行的：

```
Here it returns: 
List<object> items = setBLL2.GetAlert<List<object>>();

public T GetAlert<T>() where T:class
{
    return (T)xmlDoc1.Descendants("Notifications").Elements("Alerts").Select(s => new
    //ERROR up here before (T
    {
         MAX = s.Element("Max").Value,
         MED = s.Element("Med").Value,
         MIN = s.Element("Min").Value
     }).ToList();
} 
```

错误信息是：

> 无法将类型“System.Collections.Generic.List”转换为“T”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:13:32.620

您不能跨方法边界传输匿名类型（在您的情况下，作为`List<T>`从您的方法返回的泛型类型）。

`Max`您应该使用、`Med`和定义一个类或结构`Min`作为属性，并从您的方法中初始化其实例列表。

```
public class Alert
{
    public string Max { get; set; }
    public string Med { get; set; }
    public string Min { get; set; }
}

public IList<Alert> GetAlerts()
{
    return (xmlDoc1.Descendant("Notifications").Elements("Alerts").Select(s => 
        new Alert
        {
            Max = s.Element("Max").Value,
            Med = s.Element("Med").Value,
            Min = s.Element("Min").Value
        }).ToList();
} 
```

**编辑**：作为替代方案，您*可以*返回将属性名称映射到其值的字典列表：

```
public IList<Dictionary<string,string>> GetAlerts()
{
    return (xmlDoc1.Descendant("Notifications").Elements("Alerts").Select(s => 
        new Dictionary<string,string>
        {
            { "Max", s.Element("Max").Value },
            { "Med", s.Element("Med").Value },
            { "Min", s.Element("Min").Value }
        }).ToList();
} 
```

您可以使用以下代码访问您的值：

```
string firstMin = alerts[0]["Min"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:16:21.117

试试这个：

```
void Main()
{
   List<string> alerts =

   XDocument.Parse(Data)
            .Descendants("Alerts")
            .Elements()
            .Select (nd => nd.Value)
            .ToList();

   alerts.ForEach(al => Console.WriteLine ( al ) );     // 3 2 1 on seperate lines

}

// Define other methods and classes here
const string Data = @"<?xml version=""1.0""?>
<Notifications>
   <Alerts>
      <Max>3</Max>
      <Med>2</Med>
      <Min>1</Min>
   </Alerts>
</Notifications>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:25:29.393

不幸的是，我不知道如何在 LINQ 查询的列表中的单独条目中返回 MAX、MED 和 MIN。不过，您可以做的是让您的 LINQ 查询将 MIN、MED 和 MAX 放入 List 对象，然后返回第一行。

```
public IList<Alert> GetAlerts() 
{ 
    var xmlDoc1 = XDocument.Parse(XML, LoadOptions.None);
    var entries = xmlDoc1.Descendants("Notifications").Elements("Alerts").Select(s => new
        List<string> {
            s.Element("Max").Value,
            s.Element("Med").Value,
            s.Element("Min").Value
        }).ToList();
    // Make sure we don't get an ArgumentOutOfRangeException
    if (entries.Count > 0)
    {
        return entries[0];
    }
    else
    {
        return new List<string>();
    }
} 
```

PS - 您的 MIN、MAX 和 MED 的结束标签格式不正确，“/”应该在名称之前，而不是之后。

# ruby-on-rails-3 - FactoryGirl 创建一个额外的对象

> ID：10937341
> 
> 赞同：0
> 
> 时间：2012-06-07T18:05:47.013
> 
> 标签：ruby-on-rails-3, rspec, factory-bot

我的工厂：

```
FactoryGirl.define do
  factory :comment do
    content 'bla bla bla bla bla'
    user
  end

  factory :user do
    sequence(:username) { |n| "johnsmith#{n}" }
    password '123'

    factory :user_with_comments do
      ignore do
        comments_count 5
      end

      after(:create) do |user, evaluator|
        FactoryGirl.create_list(:comment, evaluator.comments_count, user: user)
      end
    end
  end
end 
```

我的规格：

```
require 'spec_helper'

describe Comment do
  let(:comment) { Factory.create :comment }

  describe "Attributes" do
    it { should have_db_column(:content).of_type(:text) }
    it { should have_db_column(:user_id).of_type(:integer) }
    it { should have_db_column(:profile_id).of_type(:integer) }
  end

  describe "Relationships" do
    it { should belong_to(:profile) }
    it { should belong_to(:user)    }
  end

  describe "Methods" do
    describe "#user_name" do
      it "Should return the comment creater username" do
        user         = Factory.create :user
        binding.pry
        comment.user = user
        binding.pry
        comment.user_username.should == user.username
      end
    end
  end
end 
```

在第一个 binding.pry 上，**User.count**按预期返回 1。但是在第二个 binding.pry 中，**User.count**返回 2。我的问题是，为什么**comment.user = user** assignment 创建了一个新的用户记录？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:14:22.650

原因是你的 let for `comment`calls `Factory.create :comment`。在工厂 for 中`comment`，它调用关联 for `user`。

因此，当您使用 let 时，它会创建一个评论对象和一个用户对象并将它们连接起来。然后，您在设置时覆盖该用户`comment.user=user`。

# javascript - Google Charts - 避免在 yAxis 中显示负值

> ID：10937342
> 
> 赞同：19
> 
> 时间：2012-06-07T18:06:02.647
> 
> 标签：javascript, google-visualization

我有以下代码：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Year', 'People'],
    ['2010',0]
  ]);

  // Create and draw the visualization.
  new google.visualization.ColumnChart(document.getElementById('visualization')).
      draw(data,
           {title:"Yearly Coffee Consumption by Country",
            width:600, height:400,
            hAxis: {title: "Year"},
            backgroundColor: 'none'
           }
      );
} 
```

这给了我下面的图表![图表](../Images/f87396025bad669fa02b595ce1f640c6.png)

如何避免在 yAxis 中显示负值？我试过添加 `vAxis: {minValue:0}`没有任何运气。

这些图表有一个游乐场/沙箱：[Google Charts Playground](https://code.google.com/apis/ajax/playground/?type=visualization#column_chart)

​</p>

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-22T17:25:48.193

您需要将 viewWindowMode 设置为显式

```
vAxis: {viewWindowMode: "explicit", viewWindow:{ min: 0 }} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-19T08:14:54.140

`viewWindowMode: "explicit"`在当前版本中已弃用，它使用`vAxis.viewWindow.min`：

```
vAxis: {
    viewWindow: {
        min: 0
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-01T09:49:40.320

它对我不起作用。我需要添加最大值：`max:1`

负轴仅在所有值都为 0 时出现，因此，为了不在最大值范围内，我只在没有正值时放置 vAxis（使用 PHP）。

我的代码示例是：

```
 $hayPositivos = false;
            foreach($valores as $valor){
                $html[]=",
                ['".$valor['dia']."', ".intval($valor['validadas']).",      ".intval($valor['totales'])."]";
                if(!$hayPositivos && (intval($valor['validadas']) >0 || intval($valor['totales']) >0)){
                    $hayPositivos = true;
                }
            }

                    $html[]="]);

                    var options = {
                      title: '".t('News by time:').$periodo_nombre."',
                      legend: { position: 'bottom' }";
                    if(!$hayPositivos){
                        $html[] = ",
                        vAxis: {
                          viewWindow: {min: 0, max:1}
                        }";
                    }

                    $html[] = "}; 
```

这就是它的外观：

[如果所有值都是负数](https://i.stack.imgur.com/uzrvu.jpg)

[如果有任何正值](https://i.stack.imgur.com/xPe5I.jpg)

# testng - 如何禁用 TestNG 的控制台输出？

> ID：10937343
> 
> 赞同：1
> 
> 时间：2012-06-07T18:06:05.477
> 
> 标签：testng

通过 TestNG.run() 以编程方式运行 TestNG 时，如何禁用所有控制台输出？我试过了

```
 testNG.setUseDefaultListeners( false ); 
```

这没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:51:35.537

testng.setVerbose(0)。

…………

# java - 流口水规则没有触发

> ID：10937345
> 
> 赞同：1
> 
> 时间：2012-06-07T18:06:09.703
> 
> 标签：java, rules, drools, business-rules, rule-engine

我需要做的是，如果 lineId 2016 标识的 KeymarkDocField 具有空值，则从 fieldOrderNumber 265 标识的另一个 KeymarkDocField 中获取值，并设置它。

我有以下规则：

```
rule "Add Disbursement Date to NLS XML Output"
when
    $modify : KeymarkDocField(lineId == 2016, value == null)            
    KeymarkDocField($disDate : value, fieldOrderNumber == 265)
then
    modify($modify){
        setValue($disDate)
    }
end 
```

所有这些信息都来自一个 xml 文件。我查看了 XML 文件并验证了所有数据都是正确的。但是，此规则不会触发。我是 Drools 的新手，想知道是否有人能够识别我所犯的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:52:46.790

弄清楚了。这是因为 lineId 返回的是 String，而不是 int。所以比较失败。

# google-visualization - 没有数据时如何显示空谷歌图表？

> ID：10937349
> 
> 赞同：27
> 
> 时间：2012-06-07T18:06:37.680
> 
> 标签：google-visualization

考虑绘制一个柱形图，但我没有从数据源获取任何数据，我们如何绘制一个空图表而不是显示一条红色的默认消息“表格没有列”？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-07T18:32:32.370

我所做的是用 1 列和 1 个数据点（设置为 0）初始化我的图表。然后，每当添加数据时，我检查是否只有 1 列并且它是虚拟列，然后我将其删除。我还隐藏了要开始的图例，这样它就不会出现在虚拟列中，然后在添加新列时添加它。

下面是一些示例代码，您可以将其插入到[Google Visualization Playground](https://code.google.com/apis/ajax/playground/?type=visualization#column_chart)中来完成我所说的工作。您应该会看到空图表 2 秒钟，然后将添加数据并显示列。

```
var data, options, chart;

function drawVisualization() {

  data = google.visualization.arrayToDataTable([
    ['Time', 'dummy'],
    ['', 0],
   ]);

  options = {
    title:"My Chart",
    width:600, height:400,
    hAxis: {title: "Time"},
    legend : {position: 'none'}
  };

  // Create and draw the visualization.
  chart = new google.visualization.ColumnChart(document.getElementById('visualization'));
  chart.draw(data,options);
  setTimeout('addData("12:00",10)',2000);
  setTimeout('addData("12:10",20)',3000);
}

function addData(x,y) {
  if(data.getColumnLabel(1) == 'dummy') {
    data.addColumn('number', 'Your Values', 'col_id');
    data.removeColumn(1);
    options.legend = {position: 'right'};
  }

  data.addRow([x,y]);
  chart.draw(data,options);
}​ 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-12T08:21:04.190

对于这个问题，一个更好的解决方案可能是使用注释列而不是数据列，如下所示。使用此解决方案，您无需使用任何 setTimeout 或自定义函数来删除或隐藏您的列。通过将下面给定的代码粘贴到[Google Code Playground](https://code.google.com/apis/ajax/playground/?type=visualization#column_chart)来尝试一下。

```
function drawVisualization() {
  var data = google.visualization.arrayToDataTable([
      ['', { role: 'annotation' }],
      ['', '']
  ]);

  var ac = new google.visualization.ColumnChart(document.getElementById('visualization'));
  ac.draw(data, {
      title : 'Just a title...',
      width: 600,
      height: 400
  });
} 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T02:44:00.233

我这样做的方法是禁用饼图，关闭工具提示，填充假值并将其设为灰色。我确信有更聪明的方法可以做到这一点，但这对我有用，而其他方法却没有。

唯一的缺点是它将图例中的两个项目也设置为灰色。我认为您也许可以只添加第三个项目，并使其仅在图例中不可见。不过我喜欢这种方式。

```
function drawChart() {
// Define the chart to be drawn.
  data = new google.visualization.DataTable();
  data.addColumn({type: 'string', label: 'Result'});
  data.addColumn({type: 'number', label: 'Count'});
  data.addRows([
          ['Value A', 0],
          ['Value B', 0]
  ]);

  var opt_pieslicetext = null;
  var opt_tooltip_trigger = null;
  var opt_color = null;
  if (data.getValue(1,1) == 0 && data.getValue(0,1) == 0) {
     opt_pieslicetext='none';
     opt_tooltip_trigger='none'
     data.setCell(1,1,.1);
     opt_color= ['#D3D3D3'];
  } 
  chart = new google.visualization.PieChart(document.getElementById('mydiv'));
  chart.draw(data, {sliceVisibilityThreshold:0, pieSliceText: opt_pieslicetext, tooltip: { trigger: opt_tooltip_trigger }, colors: opt_color } );
} 
```

# python - 如何检查没有扩展名的文件类型？

> ID：10937350
> 
> 赞同：100
> 
> 时间：2012-06-07T18:06:40.653
> 
> 标签：python, filesystems, identification

我有一个装满文件的文件夹，它们没有扩展名。如何检查文件类型？我想检查文件类型并相应地更改文件名。让我们假设一个函数`filetype(x)`返回一个文件类型，如`png`. 我想做这个：

```
files = os.listdir(".")
for f in files:
    os.rename(f, f+filetype(f)) 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-06-07T18:43:54.497

有一些 Python 库可以根据文件的内容（通常是标题/幻数）识别文件，并且不依赖文件名或扩展名。

如果您要处理许多不同的文件类型，则可以使用[`python-magic`](https://github.com/ahupp/python-magic). 这只是完善的`magic`库的 Python 绑定。这在我对它的有限使用中享有良好的声誉和（少量的认可），它一直很稳固。

还有一些用于更专业文件类型的库。例如，Python 标准库有一个[`imghdr`](http://docs.python.org/library/imghdr.html)模块，它只对图像文件类型做同样的事情。

如果您需要无依赖（纯 Python）文件类型检查，请参阅[`filetype`](https://github.com/h2non/filetype.py).

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2014-06-26T14:51:07.383

[Python Magic](https://github.com/ahupp/python-magic)库提供了您需要的功能。

`pip install python-magic`您可以按如下方式安装库并使用它：

```
>>> import magic

>>> magic.from_file('iceland.jpg')
'JPEG image data, JFIF standard 1.01'

>>> magic.from_file('iceland.jpg', mime=True)
'image/jpeg'

>>> magic.from_file('greenland.png')
'PNG image data, 600 x 1000, 8-bit colormap, non-interlaced'

>>> magic.from_file('greenland.png', mime=True)
'image/png' 
```

在这种情况下，Python 代码在底层调用[libmagic](http://www.unix.com/man-page/freebsd/3/libmagic/)，它与 *NIX`file`命令使用的库相同。因此，这与基于子进程/shell 的答案的作用相同，但没有这种开销。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-07T18:12:45.557

在 unix 和 linux 上有[`file`](http://www.cyberciti.biz/faq/linuxunix-determine-file-type/)猜测文件类型的命令。甚至还有一个[windows 端口](http://gnuwin32.sourceforge.net/packages/file.htm)。

从[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?file)：

> File 测试每个参数以尝试对其进行分类。共有三组测试，按此顺序执行：文件系统测试、幻数测试和语言测试。第一个成功的测试会导致打印文件类型。

您需要`file`使用模块运行命令，`subprocess`然后解析结果以找出扩展名。

**编辑：** 忽略我的回答。改用克里斯约翰逊的[答案](https://stackoverflow.com/a/10937927/1322401)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-10-07T16:00:53.270

对于图像，您可以使用该`imghdr`模块。

```
>>> import imghdr
>>> imghdr.what('8e5d7e9d873e2a9db0e31f9dfc11cf47')  # You can pass a file name or a file object as first param. See doc for optional 2nd param.
'png' 
```

[Python 2 imghdr 文档](https://docs.python.org/2/library/imghdr.html)
[Python 3 imghdr 文档](https://docs.python.org/3/library/imghdr.html)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-07T18:25:01.373

```
import subprocess as sub
p = sub.Popen('file yourfile.txt', stdout=sub.PIPE, stderr=sub.PIPE)
output, errors = p.communicate()
print(output) 
```

正如史蒂文指出的那样，[`subprocess`](https://docs.python.org/3/library/subprocess.html)这就是方法。您可以通过上面的方式获取命令输出，如这篇[文章](https://stackoverflow.com/questions/3791465/python-os-system-for-command-line-call-linux-not-returning-what-it-should)所说

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-08-05T00:43:29.493

您还可以安装`file`Python 的官方绑定，一个名为`file-magic`（它不使用 ctypes，如`python-magic`）的库。

它在 PyPI 上以[file-magic](https://pypi.python.org/pypi/file-magic)的形式提供，在 Debian 上以[python-magic](https://packages.debian.org/jessie/python-magic)的形式提供。对我来说，这个库是最好用的，因为它可以在 PyPI 和 Debian（可能还有其他发行版）上使用，使部署软件的过程更容易。我也[写过关于如何使用它的博客](http://blog.justen.eng.br/2016/02/detecting-file-type-and-encoding-in-python.html)。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-06-06T03:14:02.823

使用较新的子流程库，您现在可以使用以下代码（*nix only 解决方案）：

```
import subprocess
import shlex

filename = 'your_file'
cmd = shlex.split('file --mime-type {0}'.format(filename))
result = subprocess.check_output(cmd)
mime_type = result.split()[-1]
print mime_type 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-06T10:36:39.670

您也可以使用此代码（纯 python 的 3 字节头文件）：

```
full_path = os.path.join(MEDIA_ROOT, pathfile)

try:
    image_data = open(full_path, "rb").read()
except IOError:
    return "Incorrect Request :( !!!"

header_byte = image_data[0:3].encode("hex").lower()

if header_byte == '474946':
    return "image/gif"
elif header_byte == '89504e':
    return "image/png"
elif header_byte == 'ffd8ff':
    return "image/jpeg"
else:
    return "binary file" 
```

> 没有任何软件包安装[和更新版本]

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-02T18:45:16.407

仅适用于 Linux，但使用“sh”python 模块，您可以简单地调用任何 shell 命令

[https://pypi.org/project/sh/](https://pypi.org/project/sh/)

点安装 sh

> 进口sh
> 
> sh.file("/root/文件")

输出：/root/file：ASCII 文本

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-30T21:28:54.963

此代码以递归方式列出给定文件夹中给定扩展名的所有文件

```
import magic
import glob
from os.path import isfile

ROOT_DIR = 'backup'
WANTED_EXTENSION = 'sqlite'

for filename in glob.iglob(ROOT_DIR + '/**', recursive=True):
    if isfile(filename):
        extension = magic.from_file(filename, mime = True)
        if WANTED_EXTENSION in extension:
            print(filename) 
```

[https://gist.github.com/izmcm/6a5d6fa8d4ec65fd9851a1c06c8946ac](https://gist.github.com/izmcm/6a5d6fa8d4ec65fd9851a1c06c8946ac)

# iphone - 比较 NSdate 时出现意外错误

> ID：10937356
> 
> 赞同：1
> 
> 时间：2012-06-07T18:07:11.233
> 
> 标签：iphone, ios, nsdate

我正在将一个日期（比如 start_date）与当前日期（current_date_from_db）进行比较。但是由于以下两个错误中的任何一个，比较都失败了：

```
if ([current_date_from_db compare:start_date]== NSOrderedAscending) 
{
     NSLog(@"Yes");
}
else {      
     NSLog(@"No");      
}; 
```

和

```
while([ current_date_from_db earlierDate:start_date] && [current_date_from_db laterDate:end_date]) 
```

代码失败了

> SIGBART：由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSCFString isEqualToDate:]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:33:57.893

current_date_from_db 是一个字符串，您可以在错误消息中看到：[NSCFString isEqualToDate:]。您需要解析您的日期，然后进行比较：

```
NSDate *dateFromString = [[NSDate alloc] init];
dateFromString = [dateFormatter dateFromString:current_date_from_db]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:38:21.290

您需要在比较之前进行转换。要么使用 current_date_from_db 创建 NSDate 对象，要么将 start_date 转换为字符串，然后进行比较。

# android - Android NDK：如何将 syslog 输出重定向到 logcat？

> ID：10937358
> 
> 赞同：3
> 
> 时间：2012-06-07T18:07:14.717
> 
> 标签：android, android-ndk, syslog

我有很多现有的 C 和 C++ 代码可以在使用 syslog 的 Android 上运行。如何让 syslog 调用的输出出现在 logcat 中？

（这是一个仅在开发时出现的问题；我不在乎解决方案是否便携或无法发货。）

请注意，使用 LOG_PERROR 不是很有用。你可以做：

```
openlog("mystuff", LOG_PERROR | LOG_PID, LOG_USER); 
```

问题是任何使用 syslog 的人都假设他们也可以使用 openlog。您必须假设您的 openlog（指定 LOG_PERROR）将被现有的 openlog 调用覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:19:01.403

您可以在[这里](http://blog.blackwhale.at/?p=218)查看如何在本机代码中使用日志记录，然后将您的 syslog 函数替换为使用此函数进行输出。

# iphone - iOS 自定义表情

> ID：10937359
> 
> 赞同：2
> 
> 时间：2012-06-07T18:07:18.003
> 
> 标签：iphone, objective-c, ios

应用商店中有一些应用允许您使用自定义表情符号（笑脸等）。我的问题是：是否可以在手机上拍照，然后裁剪、缩小，并将其设置为键盘上的表情符号之一？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:20:19.160

简而言之：没有。您当然可以从相机胶卷中拍照并将其裁剪为表情大小，但无法将其附加到键盘上，只能制作一个只能在您自己的应用程序中访问的完全自定义键盘。

# java - 从 C++ 中的 CORBA WLE 到 Java

> ID：10937361
> 
> 赞同：2
> 
> 时间：2012-06-07T18:07:24.117
> 
> 标签：java, c++, corba, tuxedo

我们正试图放弃我们的 WLE/Tuxedo/BEA/etc 旧版许可证，转而使用 Java。我们有一些旧的 CORBA 客户端没有开发，所以我们必须向后兼容。如果他们尝试使用 TObj_Boostrap 和/或 FactoryFinder 进行连接，有什么办法可以解决这个问题吗？如果绝对有必要自己动手，我愿意在服务器端写任何东西。

# sql - JOIN 打破 WHERE 子句子查询

> ID：10937364
> 
> 赞同：3
> 
> 时间：2012-06-07T18:07:32.427
> 
> 标签：sql, oracle, date, join, subquery

我的数据库中有 3 个表。

*   **PARENT_A**有一个“ID”主键列。
*   **PARENT_B**有一个“ID”主键列。
*   **CHILD**具有“PARENT_A_ID”和“PARENT_B_ID”外键列。它还有一个“START_DATE”列，它是一个 VARCHAR（遗憾的是，我无法更改它）。

现在，我有以下查询。

*更新*- 我更新了子查询，使其更像我的实际代码。对 c2 有一个额外的限制，它保证 START_DATE 是一个有效的日期。

```
SELECT *
FROM PARENT_B pb
LEFT OUTER JOIN CHILD c1 ON c1.PARENT_B_ID = pb.ID
WHERE pb.ID IN
(
    SELECT c2.PARENT_B_ID
    FROM PARENT_A pa
    LEFT OUTER JOIN CHILD c2 ON c2.PARENT_A_ID = pa.ID
    WHERE TO_DATE(c2.START_DATE, 'mm/dd/yyyy') BETWEEN
          ADD_MONTHS(TRUNC(SYSDATE, 'MONTH'), -12) AND
          (TRUNC(SYSDATE, 'MONTH') - 1)
    AND c2.HAS_VALID_DATE = 1
); 
```

此查询失败。我得到一个`ORA-01843: not a valid month`例外。但是，如果我删除第一个连接（查询的第 3 行），查询运行良好。

我不知道是怎么回事。子查询本身运行良好，所有值都采用正确的日期格式。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T18:16:26.957

几乎可以肯定，问题是至少有一些行无法使用该格式`CHILD`将字符串转换为日期。由于 Oracle 可以按任何顺序评估谓词，因此我希望您碰巧在没有连接的情况下获得的计划是在执行之前消除那些坏行，而您碰巧通过连接获得的计划是在消除其他行之前评估原因。当然，明天，优化器可能会选择一个不同的计划，并且查询可能会与连接一起工作，而如果没有它，查询可能会失败。或者您可能会发现查询成功返回第一行，然后在您尝试获取行时抛出 ORA-01843 错误。`start_date``mm/dd/yyyy``to_date``to_date`

除非您可以修复数据，否则最好的选择通常是编写您自己的字符串到日期转换例程，`NULL`如果字符串无法转换为日期，则返回 a。就像是

```
CREATE OR REPLACE FUNCTION my_to_date( p_dt_str IN VARCHAR2, p_mask IN VARCHAR2 )
  RETURN DATE
  DETERMINISTIC
IS
  l_dt DATE;
BEGIN
  l_dt := to_date( p_dt_str, p_mask );
  RETURN l_dt;
EXCEPTION
  WHEN others THEN
    RETURN NULL;
END; 
```

然后你的查询会说

```
WHERE my_to_date( c2.start_date, 'mm/dd/yyyy' ) between ... 
```

您还可以使用此函数查找`start_date`无效的行

```
SELECT *
  FROM child
 WHERE start_date is not null
   AND my_to_date( start_date, 'mm/dd/yyyy' ) is null 
```

Jonathan Gennick 有一篇很棒的文章[Subquery Madness](http://gennick.com/madness.html)更详细地介绍了这个问题。这也是一个有趣的阅读。

# ruby-on-rails-3 - 查找慢速 rspec 测试列表

> ID：10937366
> 
> 赞同：32
> 
> 时间：2012-06-07T18:07:59.163
> 
> 标签：ruby-on-rails-3, testing, rspec

如何找到最慢的 rspec 测试列表？我想重构那些运行得更快。我试图寻找宝石，但找不到任何东西。我在想放点东西

```
Rspec.before(:each) 
```

和

```
Rspec.after(:each) 
```

块来生成这个列表。但我不知道如何访问规范的名称。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-06-07T18:11:44.163

这实际上是内置在 rspec 命令中的。只需在运行所有 rspec 测试时使用`-p`or标志。`--profile`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-07T18:17:37.970

正如 MrDan 所说， --profile 标志。你也可以在你的项目根目录下制作一个.rspec文件，这样你就可以一直得到时序信息，像这样：

```
$ cat .rspec 
--colour
--profile
--format nested
--backtrace 
```

您通常还可以通过关闭垃圾收集来加速所有测试，如下所示：

```
# turn off garbage collection when running tests, place this in spec_helper.rb
RSpec.configure do |config|
  config.before(:all) do
     DeferredGarbageCollection.start
  end

  config.after(:all) do
     DeferredGarbageCollection.reconsider
  end
end 
```

# java - 确定基于打包的 Web 应用程序的 JDBC fetchSize

> ID：10937373
> 
> 赞同：1
> 
> 时间：2012-06-07T18:08:56.147
> 
> 标签：java, oracle, jdbc

我这里有一个特别棘手的情况。我支持在 JBoss 上运行的基于 java 的打包 Web 应用程序。该应用程序是一个打包的应用程序，因此我实际上无法访问任何代码或知道代码是如何开发的。

我想要找出的是 JDBC fetchSize 的设置。我不知道它在哪里设置，意味着在 ResultSet 级别或 Statement 级别等。

这是我到目前为止所尝试的：

1) 我尝试通过从 Oracle 下载 ojdbc_g.jar 文件并按照他们提供的说明为 JDBC 驱动程序配置跟踪。不幸的是，在这些说明中，它声明我需要将此 jar 文件添加到 CLASSPATH 中，但我不确定在此应用程序中设置的位置。不用说，这条路并不富有成效，因为我从未能够成功获得跟踪文件输出。

2）我尝试使用 WireShark 捕获所有 TNS 数据包，看看我是否能以这种方式找到它，这又是徒劳的，因为在那个级别，实际上几乎不可能找到每次传递了多少行。那里有很多其他依赖项，我无法获得我想要的信息。

3) 我尝试的最后一件事是配置对数据库的 SQL Net 调用的数据库端跟踪，但我不确定是否必须在 sqlnet.ora 文件中执行此操作，或者是否必须跟踪侦听器。

这就是我现在卡住的地方。同样，我想要做的就是找出应用程序的 JDBC fetchSize 正在设置什么（如果它甚至被设置的话）。我知道这会影响应用程序的性能，所以这就是我想要找到它的原因。

任何指导表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:11:41.103

解压 jar 文件，尝试在类文件中 grepping 获取 fetchSize，这将为您提供类文件。然后反汇编或者反编译，或者调试看看是什么设置的。

# java - C++ 或 Java 调用 R 脚本的 RCPP 或 RCaller 的基准测试？

> ID：10937374
> 
> 赞同：2
> 
> 时间：2012-06-07T18:09:07.737
> 
> 标签：java, c++, linux, r, rcpp

我对这个答案的看法高低不一，所以我求助于在这里发帖。如果我有一个 Linux C++ 程序调用一个带有 RCpp 之类的 R 脚本/函数，是否会有任何明显的延迟？这是可以预料的，甚至听起来合理吗？如果我使用 Java JAR 文件中的 RCaller 之类的东西怎么办？如果调用相同的 R 脚本/函数，您认为 C++ 仍然比 Java 快吗？任何预期的差异？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:27:43.887

我对 R 外部函数接口或 RCpp 没有特别的知识，但与其他一些人合作过。您的问题无法确定地回答。只有一些经验法则。FFI 的工作是满足调用和被调用环境的假设。这通常是通过从一种语言复制到另一种语言来匹配两种语言的数据布局。（这就是 RCpp 的全部意义所在。）或者你可以很幸运并让它们匹配。如果运行时环境相似，或者跨语言边界移动的数据很小，这可能非常有效：不会比 self 函数调用成本高多少。由于这个原因，从 Fortran 调用 C 通常非常快。如果环境差异很大，则必须复制大型数据结构。副本消耗资源：内存和处理器周期。垃圾收集是环境之间差异的典型代表：单独的收集器很少（从不）合作。由于这个原因，R 和 Java（都是垃圾收集）可能需要复制。如果您正在编写专门用于 callL R 的 C++，您可以在 RCpp 结构中设置数据，这样就不需要副本。

我会从 C++ 开始编写一些小测试，以模拟您必须通过界面移动的数据量。运行并计时以获取间接费用。由此你可以做出真正的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:25:49.667

我认为您需要[RInside](http://dirk.eddelbuettel.com/code/rinside.html)，它可以很容易地将 R 嵌入到您的 C++ 应用程序中。它在四个目录中附带了大量示例，包括一些用于 Qt、Wt（用于 webapps）和 MPI 的示例。

在该框架中，您在启动时将 R 实例化一次，然后拥有自己的实例。往返延迟将是您向 R 实例发送命令所花费的任何时间，加上 R 花费的时间（很可能占主导地位）加上返回。

RInside 使用[Rcpp](http://dirk.eddelbuettel.com/code/rcpp.html)，因此您可以获得整个对象传输和所有其他细节。查看 RInside 示例，并在 rcpp-devel 列表上发布问题。

# css - CSS 按钮不呈现为按钮

> ID：10937375
> 
> 赞同：1
> 
> 时间：2012-06-07T18:09:09.593
> 
> 标签：css

我有这个代码

```
.sidebar-button
{
    color:#ffffff;
    background-color:#ff9933;
    background-repeat:repeat-x;background-image:-khtml-gradient(linear, left top, left bottom, from(#ffae5e), to(#ff9933));
    background-image:-moz-linear-gradient(top, #ffae5e, #ff9933);background-image:-ms-linear-gradient(top, #ffae5e, #ff9933);
    background-image:-webkit-gradient(linear, left top, left bottom, color-stop(0%, #ffae5e), color-stop(100%, #ff9933));
    background-image:-webkit-linear-gradient(top, #ffae5e, #ff9933);background-image:-o-linear-gradient(top, #ffae5e, #ff9933);
    background-image:linear-gradient(top, #ffae5e, #ff9933);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffae5e', endColorstr='#ff9933', GradientType=0);
    text-shadow:0 -1px 0 rgba(0, 0, 0, 0.25);border-color:#ff9933 #ff9933 #ff8000;border-color:rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
} 
```

但它呈现为橙色背景的文本。知道为什么它不能正确渲染吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:11:56.397

```
height: 30px;
width: 100px; 
```

您需要制作按钮的宽度和高度：http: [//jsfiddle.net/uJR2t/](http://jsfiddle.net/uJR2t/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:13:23.580

一旦你开始设计它，你必须完全设计它。它不继承基本的按钮属性。您还可以使用类似[http://css-tricks.com/examples/ButtonMaker/](http://css-tricks.com/examples/ButtonMaker/)的东西来快速创建更详细的按钮。

# objective-c - 我在工作空间中使用 Kal 的项目：认为 Kal 是主要目标

> ID：10937380
> 
> 赞同：0
> 
> 时间：2012-06-07T18:09:27.343
> 
> 标签：objective-c, xcode4

我查看了 SO 中所有先前的答案来回答这个问题：我创建了一个工作区，添加了 Kal，*然后*添加了一个新项目，一个空的选项卡栏应用程序。两者都*构建*成功；但是当我尝试在我的项目上运行时，什么也没有发生（发生按下无效键的“bong”），就像它没有资格运行一样！

Q1：我必须创建工作区，*然后添加我的项目*，然后添加 Kal？或者是否有设置表明我的项目依赖于 Kal，因此我的项目是主项目？（当我尝试将 Kal 作为依赖项添加到我的项目时，弹出窗口中没有显示任何内容）。

Q2：因为这是一个工作区，我知道 XCode 负责链接器设置；我是否仍然需要对搜索路径进行所有更改，如 Kal 文档中所述？

这是我的方案的样子： ![项目方案](../Images/e3a20f990a3a6c9182c3c74412097d0c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:01:51.560

尝试使用“⌘ + shift + .”（⌘ + <），然后在出现的弹出窗口左侧按“管理方案...”，然后在下一个弹出窗口的新弹出窗口中按“编辑...”上方的 +（**天哪！** ) 在 Soari.xcodeproj 下点击目标选择 Soari 旁边的选择器，然后随意命名。接下来在 Xcode 的左上角单击与构建/运行和停止按钮相邻的项目标题的按钮将打开方案选择器。如果您在工作区中，您的项目有单独的方案是正常的，但添加它应该可以解决这个问题。

# iphone - UITapGestureRecognizer 在移出视图并返回后被忽略

> ID：10937382
> 
> 赞同：1
> 
> 时间：2012-06-07T18:09:37.940
> 
> 标签：iphone, objective-c, ios, gesture, uitapgesturerecognizer

我`UILabel`的`UIView`. 我将它用作状态面板，如果不需要显示任何内容，它就会滑出视图。我通过简单地将其动画到 origin.y 减去标签的高度来做到这一点。

一旦必须显示消息，我就将标签滑回视图中。几秒钟的延迟后，它滑出。这很好用。

我还在`UITapGestureRecognizer`标签中添加了一个，因此用户可以立即关闭消息，而无需等待它自动消失。

我的问题是，一旦标签移出视图，手势识别器就不会触发。当标签完全在视图内并且可见时，我初始化并添加手势识别器。它第一次按预期工作。但是当消息返回时，手势识别器似乎已被删除或禁用。

我还尝试在我的动画的完整块中每次标签完全出现在屏幕上时添加一个 gr，但这也无济于事。

有人可以向我解释这里发生了什么以及如何让识别器一直工作吗？

如果您需要更多信息，请告诉我。

### 更新

我做了一些进一步的测试，当我在 showError 调用中记录 lblError.gestureRecognizers 时，我得到了这个：

```
<UITapGestureRecognizer: 0x6b153f0; state = Possible; view = <UILabel 0x6b14fa0>; target= <(action=dismissError:, target=<OptionViewController 0x686d2a0>)>> 
```

它与我在创建后立即得到的完全一样。所以它仍然存在，我猜触摸事件没有得到它。

### 更新 2

我更进一步。

问题似乎是我将标签移动到 y 坐标 0。这可能是`GestureRecognizer`代码中的一个错误，因为当我将它设置为 0.1 时它可以工作！

看起来系统“认为”标签不在视图中，因此禁用了触摸处理或其他东西。^^

这解决了问题的一半，但在另一侧创建了一个新问题。现在手势识别器工作了，延迟的移出动画不再被触发。

所以我认为真正的问题是，移出动画是在移入后立即触发的。即使它被延迟，它也会阻止标签接收任何类型的触摸事件。

### 编码

// 添加手势识别器（在 viewDidLoad 中）

```
UITapGestureRecognizer *errorDismissGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissError:)];
[lblError addGestureRecognizer:errorDismissGesture];

// display error
- (void)showError:(NSString *)message {
  [lblError setText:message];
  [UIView animateWithDuration:0.5 
                   animations:^(void) { 
                     CGRect frame = lblError.frame;
                     frame.size.width = self.view.bounds.size.width;
                     frame.origin.y = 0;
                     lblError.frame = frame;
                   } 
                   completion:^(BOOL finished) {
                     [UIView animateWithDuration:0.5
                                           delay:2.0
                                         options:UIViewAnimationOptionCurveEaseOut
                                      animations:^(void) {
                                        CGRect frame = lblError.frame;
                                        frame.origin.y = -40.0f;
                                        lblError.frame = frame;
                                      }
                                      completion:^(BOOL finished) {}];
                   }];
}

- (void)dismissError:(UIGestureRecognizer *)sender {
  [UIView animateWithDuration:0.3
                   animations:^(void) {
                     CGRect frame = lblError.frame;
                     frame.origin.y = -40.0;
                     lblError.frame = frame;
                   }
                   completion:^(BOOL finished) {}];
} 
```

谢谢和问候，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:49:12.150

我终于解决了！

似乎延迟的移出动画以某种方式阻止了标签接收任何触摸事件。甚至 UIAnimationOptionAllowUserInteraction 也无济于事。

所以我用定时调用替换了延迟动画，这使得代码更易读。这就是它现在的样子。

```
 - (void)showError:(NSString *)message {
     [lblError setText:message];
     [UIView animateWithDuration:0.5 
                     animations:^(void) { 
                         CGRect frame = lblError.frame;
                         frame.size.width = self.view.bounds.size.width;
                         frame.origin.y = 0.1;
                         lblError.frame = frame;
                     } 
                     completion:^(BOOL finished) {
                         if (finished) {
                            [_moveOutTimer invalidate];
                             _moveOutTimer = nil;
                             _moveOutTimer = [NSTimer scheduledTimerWithTimeInterval:3.0 target:self selector:@selector(dismissError:) userInfo:nil repeats:NO];
                         }
                     }];
}

- (void)dismissError:(UIGestureRecognizer *)sender {
    [_moveOutTimer invalidate];

    [UIView animateWithDuration:0.3
                    animations:^(void) {
                         CGRect frame = lblError.frame;
                         frame.origin.y = -40.0;
                         lblError.frame = frame;
                     }
                     completion:^(BOOL finished) {}];
} 
```

# asp.net - MVC3 中的表单身份验证：如果用户尝试访问他们无权访问的资源，则返回 401（未经授权）而不是重定向

> ID：10937384
> 
> 赞同：1
> 
> 时间：2012-06-07T18:09:40.113
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-3, forms-authentication

我有一个使用表单身份验证的面向公众的 MVC3 站点。使用表单身份验证，如果用户未获得授权，则会将重定向发送到登录页面。我不希望这种行为，而是希望服务器以未经授权的 401 响应。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:15:21.270

你的意思是这样的吗？

```
public class 401AuthorizeAttribute : AuthorizeAttribute
{
    private class Http401Result : ActionResult
    {
        public override void ExecuteResult(ControllerContext context)
        {
            // Set the response code to 401.
            context.HttpContext.Response.StatusCode = 401;
            context.HttpContext.Response.End();
        }
    }

    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        filterContext.Result = new Http401Result();
    }
} 
```

您必须使用此属性而不是`[Authorize]`.

# android - 我如何实际绑定设备？

> ID：10937387
> 
> 赞同：14
> 
> 时间：2012-06-07T18:09:51.847
> 
> 标签：android, bluetooth, device

在我所见的任何地方，我都为我的蓝牙适配器找到了这种方法“getBondedDevices()”。但是，我有我的平板电脑和另一个蓝牙设备坐在我旁边，我不知道如何真正让设备显示在绑定设备列表中。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-07T19:00:37.703

在蓝牙术语中，“绑定”和“配对”基本上是同义词（官方称，配对过程会导致绑定，但大多数人可以互换使用它们）。为了将您的设备添加到该列表中，您必须完成**Discovery**过程，这是一个设备搜索和找到另一个设备的方式，然后将两者**配对。**

您实际上可以作为用户从设备设置中执行此操作，但如果您希望在应用程序的上下文中这样做，您的过程可能看起来像这样：

1.  注册一个`BroadcastReceiver`for`BluetoothDevice.ACTION_FOUND`和`BluetoothAdapter. ACTION_DISCOVERY_FINISHED`
2.  通过调用开始发现`BluetoothAdapter.startDiscovery()`
3.  每次在范围内发现新设备时，您的接收器都会通过第一个操作被调用，您可以检查它以查看它是否是您想要连接的设备。`BluetoothAdapter.cancelDiscovery()`一旦你发现它不会浪费不必要的电池，你就可以打电话。
4.  发现完成后，如果您没有取消它，您的接收器将通过第二个操作被调用；所以你知道不要期待更多的设备。
5.  手持设备实例，打开一个`BluetoothSocket`和`connect()`。如果设备尚未绑定，这将启动配对并可能会显示一些系统 UI 以获取 PIN 码。
6.  配对后，您的设备将显示在绑定的设备列表中，直到用户进入设置并将其删除。
7.  该`connect()`方法实际上还打开了套接字链接，当它返回而没有抛出异常时，两个设备已连接。
8.  现在连接好了，就可以调用`getInputStream()`并`getOutputStream()`从socket中读写数据了。

基本上，您可以检查绑定设备列表以快速访问外部设备，但在大多数应用程序中，您将结合使用此功能和真正的发现，以确保无论用户如何，您都可以始终连接到远程设备做。如果设备已经绑定，您只需执行步骤 5-7 即可连接和通信。

有关更多信息和示例代码，请查看[Android SDK 蓝牙指南](http://developer.android.com/guide/topics/wireless/bluetooth.html)的“发现设备”和“连接设备”部分。

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-22T06:13:50.577

API 级别 19 及以上您可以在要连接的 BluetoothDevice 实例上调用 createBond()。您将需要一些权限才能发现和列出可见设备

```
<uses-permission android:name="android.permission.BLUETOOTH"/>
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

发现和列出设备的代码：

```
bluetoothFilter.addAction(BluetoothDevice.ACTION_FOUND);
bluetoothFilter.addAction(BluetoothAdapter.ACTION_DISCOVERY_STARTED);
bluetoothFilter.addAction(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
registerReceiver(bluetoothReceiver, bluetoothFilter);
private BroadcastReceiver bluetoothReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                Log.e("bluetoothReceiver", "ACTION_FOUND");
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                devicesList.add((device.getName() != null ? device.getName() : device.getAddress()));
                bluetoothDevicesAdapter.notifyDataSetChanged();
            } else if (BluetoothAdapter.ACTION_DISCOVERY_STARTED.equals(action)) {
                Log.e("bluetoothReceiver", "ACTION_DISCOVERY_STARTED");
            } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
                Log.e("bluetoothReceiver", "ACTION_DISCOVERY_FINISHED");
                getActivity().unregisterReceiver(bluetoothReceiver);
            }
        }
}; 
```

只需在所选设备上调用 createBond()。

# c - 使用内存段的程序，等待锁访问数据段（基本）

> ID：10937388
> 
> 赞同：0
> 
> 时间：2012-06-07T18:09:54.510
> 
> 标签：c, sleep, shared-memory

我必须说我知道信号量，但我还不知道如何使用它们。所以问题是当获取特定值时我将控件传递给我的数据段，我`int lock`怎么能让我的代码工作，因为此时它冻结了，我不明白为什么......

sc(server) - 首先运行

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <sys/wait.h>
#include "st.h"

int main(){
    int shmid,i;
    int w =1;
    struct msg* m;
    shmid = shmget(1271,sizeof(struct msg), IPC_CREAT|IPC_EXCL|0600);

    if(shmid == -1){
        perror("~~~Shmid");
        exit(1);
    }   
    m = shmat(shmid,0,0);
    printf("segment attached to structure");

    do{
    printf("waiting...");
    sleep(1);
    }while(m->lock != 1);

    if(m->lock == 1)
    printf("lock open!");

    shmdt(m);
return 0;
} 
```

抄送（客户）

```
int main(int argc, char *argv[]){
    if(argc != 2)
        perror("~~~ ./c [file name]");
        exit(1);
    int shmid;
    struct msg* m;
    shmid = shmget(1271,0,0);

    if(shmid == -1){
        perror("~~~Shmid");
        exit(1);
    }   
    m = shmat(shmid,0,0);

    m->f = *argv[1];
    m->lock = 1;

    shmdt(m);
return 0;
} 
```

st.h

```
struct msg{
    char f[50];
    int lock;   
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:43:48.283

错误位于客户代码的开头：

```
int main(int argc, char *argv[]){
    if(argc != 2)
        perror("~~~ ./c [file name]");
        exit(1);
    int shmid;
    ... 
```

您应该将`perror()`and`exit()`语句放在花括号块中。

在您当前的代码中，总是调用 exit 语句，并且您的客户端终止而不附加到内存块并更改锁的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:01:07.927

那应该是：

```
数据 = shmat(shmid, (void *)0, 0); // 注释指针
如果（数据==（字符*）（-1））
    错误（“shmat”）；
```

# javascript - TaffyDB：选择问题

> ID：10937395
> 
> 赞同：0
> 
> 时间：2012-06-07T18:10:18.410
> 
> 标签：javascript, json, taffydb

我是 TaffyDB 的新手，没有做过很多 javascript 编程，所以我希望我遇到的问题很简单。我正在尝试根据所选客户端使用存储在 TaffyDB 中的选项更新列表框。但是，当我进行选择时，它会返回所有行。

下面是我用来更新列表框的代码，以及用于执行查询的 selectString，以及 TaffyDB 中的内容。

任何人都知道为什么我在指定 clientID = 1788 时要取回所有行？

我尝试了在列标识符周围加引号和不加引号的选择字符串。

```
// load existing user client projects if we have any
var lbProjects = document.getElementById('lbProjects');
lbProjects.options.length = 0;
var selectString = '{clientID:"' + clientID + '"}';
alert(selectString);
userProjects(selectString).each(
function (r) {
    var option = new Option();
    option.value = r.projectID;
    option.text = r.projectName;
    lbProjects.add(option, null);
}); 
```

selectString 中有什么：{clientID:"1788"}

数据库中的内容：[{"clientID":"1788","projectID":"19"}, {"clientID":"1789","projectID":"24"}, {"clientID":"1790" ,"projectID":"23"}]

谢谢你的帮助。亚伦湖布拉彻

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:01:55.993

问题是试图使用 selectString 变量。

线

```
userProjects(selectString).each( 
```

现在读

```
userProjects({clientID: clientIDValue}).each( 
```

我应该传入一个对象数组，而不是一个字符串。javascript 中的 {} 创建一个对象数组。

# facebook-graph-api - Graph API：各种API调用中帖子的评论数不一致

> ID：10937396
> 
> 赞同：2
> 
> 时间：2012-06-07T18:10:19.933
> 
> 标签：facebook-graph-api, comments

您好 Graph API 专家，

当您调用 /[post_id 时，结果包含“comments”字段，该字段具有“count”字段，该字段应该包含此特定帖子的评论总数。

现在，如果您调用 /[post_id]/comments ，您将一一获得实际的评论数据。

我面临的问题是，当我比较“comments.count”字段的值和返回的所有实际评论数据的数量时，它们是不同的。

更糟糕的是，如果您随后查看 Facebook.com 时间轴上的同一帖子，您可以在其中看到该帖子的评论数量（即“查看所有***评论”链接），这个数字也不同于“comments.count” " 字段值。

这不仅发生在一个帖子上，而且发生在其中许多帖子上——我观察到这往往发生在评论超过 100 条的帖子上（我实际上计算了时间轴上的所有评论，它与实际评论数据的数量相匹配从 /[post_id]/comments API 调用返回）。

这是正常的 API 行为吗？如果是这样的话，我应该或者你会相信哪个号码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T21:40:26.517

好的，当您查看一些时间线帖子上的一些 Facebook 评论计数时，您会看到前的计数。16 条评论，当您尝试手动统计帖子上的评论时，您可能会看到它正在查看 15 条评论，那么缺少评论在哪里？facebook的计数是错误的吗？实际上不是，这是因为，有些人更改个人资料隐私，比如不显示我的评论 不是我朋友的人，或者我们没有任何共同的朋友，等等。这是因为你无法从 graph api 获得这些私有化评论，但这些评论不排除在总数中。那么解决方案是什么，请确保正确获取 facebook 为您提供的所有数据。并比较它，有多少评论看起来像缺失，并显示缺失计数作为您的应用程序中的私人评论计数。我觉得好多了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T19:22:26.693

欢迎来到 Facebook API 编程的世界。是的，这是正常的（但显然是不希望的）API 行为。这是我们在围绕他们的 API 进行编程时面临的矛盾之一。CBroe 在上面的评论中可能是正确的，这是其 API 集群中服务器之间的数据不一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T15:43:04.147

除此之外还有分页的问题，你可以用offset+limit参数来说明你想要多少数据，从哪里取，如果你处理posts的数量，你可以说offset=0和limit=50它会起作用，但是如果您尝试 offset=100 和 limit=50 它可能会返回空数据，但是然后尝试 offset=100 和 limit=100 它将返回 100 个帖子。

该 api 只是错误的并且充满了不一致的地方，似乎没有任何方法可以解决它们。

我认为我们在 opengraph 上被超卖了，我认为这不是 facebook 告诉我们的那样，我开始感受到将它卖给我的老板并发现我可能无法交付的灼热:(

# html - 如何在 HTA 文件中使用 VBScript 单击按钮

> ID：10937398
> 
> 赞同：2
> 
> 时间：2012-06-07T18:10:24.947
> 
> 标签：html, vba, vbscript, forms, hta

我的代码看起来像

```
<html>
<head>
<title>My HTML application</title>
<HTA:APPLICATION 
    id="frames" 
    border="thin" 
    caption="yes" 
    icon="http://www.google.com/favicon.ico" 
    showintaskbar="yes" 
    singleinstance="yes" 
    sysmenu="yes" 
    navigable="yes" 
    contextmenu="no" 
    innerborder="no" 
    scroll="auto" 
    scrollflat="yes" 
    selection="yes" 
    windowstate="normal" />
</head>

<script language="VBScript">

Sub Window_OnLoad
  'This method will be called when the application loads
  'Add your code here
  GetUserName
End Sub

Sub GetUserName() 
    Set objNetwork = CreateObject("WScript.Network")
    linkTo("http://servername/nph-psf.exe?HOSTID=AD&ALIAS=" & objNetwork.UserName)
    Set objNetwork = Nothing 
End Sub

Sub linkTo(strLink) 
    Document.getElementById("psyncLink").src = strLink
End Sub

Sub checkInputPage
    Document.theforms.name
End Sub

</script>        
    </head> 
    <frameset rows="60px, *"> 
        <frame src="topo.htm" name="topo" id="topo" application="yes" /> 
        <frame src="http://servername/nph-psf.exe?HOSTID=AD&ALIAS=" name="conteudo" id="psyncLink" application="yes" /> 
    </frameset> 
</html> 
```

并且页面加载了 2 个按钮，如何以编程方式执行点击操作？

```
<INPUT border=0 type=image alt="Use a password" name="SUBMIT-password.pss" src="docs/pics/en-us/useapassword_button.jpg"> 
```

请注意，我无法更改从中加载的任何代码，因为我没有写入该目录的权限。我正在创建一个 HTA 脚本，它可以以编程方式单击该页面上的按钮和链接，以帮助我们的用户更改密码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T15:22:19.220

请参阅[如何在 HTA 文件中使用 VBScript 单击按钮](https://stackoverflow.com/questions/10937398/how-to-click-a-button-using-vbscript-in-an-hta-file)

这正是我需要的

```
<script type="text/javascript"> 
function doClick(fr) { 
    var btn = fr.contentWindow.document.getElementsByName("SUBMIT-password.pss"); 
    if (btn.length == 0) { 
        alert("no button!"); 
        return; 
    } else { 
        btn[0].click(); 
    } 
} 
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T18:39:13.817

只是一个例子

```
<INPUT border=0 type=image alt="Use a password" name="cmdBtn" src="docs/pics/en-us/useapassword_button.jpg" onclick="cmdBtn_Click"> 
```

**VB 脚本**

```
<script language="vbscript">
   sub cmdBtn_Click()
       msgbox("Clicked !") 
   end sub
</script> 
```

**或者**

```
<INPUT type="Button" value="Click Me" name="cmdBtn" /> 
```

**脚本**

```
<SCRIPT LANGUAGE="VBSCRIPT" EVENT="OnClick" FOR="cmdBtn">
    msgbox("Clicked !")
</script> 
```

如果您单击该按钮，它将显示带有文本“已单击！”的警报 在里面。

# javascript - 简单的 Dojo i18n 实现

> ID：10937405
> 
> 赞同：4
> 
> 时间：2012-06-07T18:10:46.887
> 
> 标签：javascript, dojo

我最近才开始学习道场供个人使用和体验。到目前为止，我一直在做关于各种 dojo 东西的教程（在他们的网站和网络上），并且我一直在“努力”为更复杂的应用程序（或良好实践）实施具体的基础设施。我找到了一个有趣的项目（[https://github.com/csnover/dojo-boilerplate](https://github.com/csnover/dojo-boilerplate)）和文章（[http://www.sitepen.com/blog/2011/05/04/what-is-the-best-开始-道场-项目/的方式](http://www.sitepen.com/blog/2011/05/04/what-is-the-best-way-to-start-a-dojo-project/)）。有了这个，我想我的第一个问题就解决了。如我错了请纠正我。

我觉得 i18n 上的教程缺少具体的实现。例如，我想在样板项目的对话框中添加 i18n。

```
define([ 'dojo/_base/declare', 'dijit/Dialog' ], function (declare, Dialog) {
    return declare(Dialog, {
        title: 'Hello World',
        content: 'Loaded successfully!'
    });
}); 
```

在这里，我的项目层次结构是：

![在此处输入图像描述](../Images/98399b427221ebefd278b7737967ea13.png)

如您所见，我为我的应用程序创建了自己的 nls 文件夹，并为不同的（语言语言环境）我的“字符串”存储。现在，如何在上面的对话框代码的标题或内容上指定区域设置内容。我最近在 ruby​​ on rails 上完成了 i18n（使用 MVC 的概念），根据我的观点，我必须为这个特定的视图创建一个本地化文件（.yml）。我知道 RoR 和 Dojo 真的不是一回事，但是有一个小部件（可以与我的视图进行比较），所以每个小部件都需要有自己的本地化......我遇到了 2 个教程，[第一个](http://dojotoolkit.org/documentation/tutorials/1.6/i18n/)和[第二个](http://www.sitepen.com/blog/2011/08/25/how-do-i-create-a-dynamic-validating-internationalized-form-in-a-dialog/)。也许，我读错了。

我现在有这样的东西，但它不起作用..我错过了什么？

```
dojo.requireLocalization("app", "dialog");

define([ 'dojo/_base/declare', 'dijit/i18n' 'dijit/Dialog' ], function (declare, Dialog) {
    i18n: dojo.i18n.getLocalization("app", "dialog"),
    return declare(Dialog, {
        title: i18n.title,
        content: i18n.content
    });
}); 
```

谢谢你。

**编辑：**

```
define([ 'dojo/_base/declare', 'dojo/i18n!app/nls/labels', 'dijit/Dialog' ], function (declare, labels, Dialog) {
    return declare(Dialog, {
        title: labels.title,
        content: labels.content
    });
}); 
```

我现在没有错误，但我的 labels.title 是空的...？

**编辑（1）：我忘记在默认的 nls 文件夹中添加根目录。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:50:53.417

这是我如何构建一些本地化对话框的示例。

目录结构

```
myApp\
  dialog\
    myDialog.js
    nls\
      dialog.js
      fr-ca\
        dialog.js 
```

myDialog.js

```
define("myApp/dialog/myDialog", [
  "dojo", "dijit/Dialog", "dojo/i18n", 
  "dojo/i18n!./nls/dialog" // this is a relative path to the 
                           // dialog.js from myDialog.js
], function(dojo, Dialog) {

  var i18n = dojo.i18n.getLocalization(
    "myApp.dialog",  // this is the directory path to the nls folder
    "dialog"         // this is the file
  );       

  return declare(Dialog, {
    title:    i18n.title,
    content:  i18n.content
  });
}); 
```

# soapui - soapui-testrunner.sh - 只接受一个.xml 文件作为输入？

> ID：10937407
> 
> 赞同：0
> 
> 时间：2012-06-07T18:10:55.877
> 
> 标签：soapui

我正在使用命令行运行soapui 测试。现在它看起来像这样：

/bin/testrunner.sh -j -a -f"输出" -R"Project_Report" -F"HTML" /path_to_xml_file/sample.xml

我希望它运行 /path_to_xml_file/ 下的所有 .xml 文件。就像是

/bin/testrunner.sh -j -a -f"输出" -R"Project_Report" -F"HTML" /path_to_xml_file/*.xml

但它不起作用。我不想将所有测试分组到一个 .xml 文件中。

我尝试使用这样的 for 循环： for file in `ls *.xml`; 做 /bin/testrunner.sh -j -a -f"output" -R"Project_Report" -F"HTML" /path_to_xml_file/$file 完成

但是还有另一个问题。在 .html 文件中只能看到最后一个 .xml 文件的测试结果。它正在覆盖所有以前的测试结果。

有人可以帮我弄这个吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T20:51:53.697

嗬！我第一次没有看到你的 -f 标志。

我不确定我还有更多可以提供的东西，但即使要分享这个，我也需要将其添加为答案（因此它是可读的）。

这是我用来运行 testRunner 批处理文件的批处理文件。我知道您没有使用 Windows，但我猜至少其中一些东西在 linux 上更干净、更容易。基本上这个想法是：

*   从上次运行中清理
*   为结果创建一个名为目录的时间戳
*   运行测试
*   将运行输出转储到文件中
*   grep (findstr) 查找错误的输出
*   将所有输出复制到时间戳命名文件夹

如果你在 linux 中按照这些思路做了一些事情，你应该能够确保你的所有 HTML 文件都被捕获。如果您需要将所有 HTML 文件收集到一个列表中，我猜您可以再次使用 grep 来获取该列表。

抱歉，我没有 Linux 示例。

```
@ECHO OFF
call "C:\Program Files\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86
set hour=%time:~0,2%
if "%hour:~0,1%"==" " set hour=0%time:~1,1%
set timeClean=%hour%_%time:~3,2%_%time:~6,2%
set mydate=%date:~4,2%%date:~7,2%%date:~10,4%
set timestamp=%mydate%_%timeClean%
set newDir=TestResults\%timestamp%
set projFileName=%1
set testSuite=%2
set baseDir=%3
echo BASE DIRECTORY = %baseDir%
SETLOCAL ENABLEEXTENSIONS
setlocal enabledelayedexpansion
del /F /S /Q %baseDir%soapui*.log
del /F /S /Q %baseDir%global-groovy*.log
del /F /S /Q %baseDir%soapui*.log.*
set file=%baseDir%\%projFileName%
set newFolder=%baseDir%Results_%timestamp%
echo %newFolder%
mkdir %newFolder%
set newSummaryFile=%newFolder%\testSummary.txt
echo Executing test %projFileName%
call testrunner.bat -s%testSuite% -r -j -I -S -f%newFolder% %projFileName% >    %newFolder%\summary.txt 2>&1
@ping 127.0.0.1 -n 5 -w 1000 > nul
set "content=Failed tests (if any) line numbers:"
for /f "tokens=1,8*" %%i in ('findstr /I /N /C:"ASSERTION FAILED" /C:" ERROR"  %newFolder%\summary.txt') do call :addLines Line %%i %%j
goto :end
:addLines
for /f "tokens=1 delims=::" %%z in ("%2") do set "linenum=%%z"
set "content=%content% %1 %linenum%"
GOTO :eof
:end
echo %content% > %newSummaryFile%
xcopy /F *.log %newFolder% 
```

# ajax - 如果我递归调用 ajax 函数会发生什么？它可能会导致任何问题。

> ID：10937408
> 
> 赞同：0
> 
> 时间：2012-06-07T18:11:07.067
> 
> 标签：ajax, jquery

```
<script>
    $(document).ready(function(){
        ajaxcall();
    });
    function ajaxcall(){
    $.ajax({
          url: 'test.php',
            success: function(data) { 
                data = data.split(':');
                $('#hours').html(data[0]);
                $('#minutes').html(data[1]);
                $('#seconds').html(data[2]);
                ajaxcall();
            }
        });
    }
    </script>
    <span id="hours">0</span>:<span id="minutes">0</span>:<span id="seconds">0</span> 
```

在这段代码中，我调用了 ajax 函数 onsuccess，所以它将是无限循环。它会引起任何问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:15:13.917

~~这将导致您的浏览器最终耗尽内存并崩溃，因为每个调用都将保存在调用堆栈中。~~我错了; 回调是异步的，因此控制权将离开父函数。如果您尝试更新时间，我建议您改为执行以下操作：

```
$(document).ready(function(){
    setInterval(ajaxcall, 1000); //calls ajaxcall every 1000 microseconds
});

function ajaxcall(){
   $.ajax({
        url: 'test.php',
        success: function(data) { 
            data = data.split(':');
            $('#hours').html(data[0]);
            $('#minutes').html(data[1]);
            $('#seconds').html(data[2]);
        }
   });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:15:13.093

不会有什么不好的事情发生。它会进行 ajax 调用，等待它返回，然后永远进行另一个调用。这本身并没有错。请注意，您的服务器端操作不要太繁重，不要传输太多数据，以免浪费太多带宽。

如果您希望能够停止它，您可以创建一个变量来定义是否继续进行调用，并随时将其关闭。

```
var keepCalling = true;

function ajaxCall() {
    if (!keepCalling)
        return;

    //ajax call...
} 
```

设置`keepCalling`为`false`将在当前呼叫完成后停止呼叫。

# jquery - 用于露天自动完成的 jQuery Ajax

> ID：10937413
> 
> 赞同：-4
> 
> 时间：2012-06-07T18:11:33.333
> 
> 标签：jquery, ajax, alfresco

我需要在 Alfresco 中实现一个自动完成输入，但我需要用 jquery 做一个 ajax 请求，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:08:51.980

你为什么要尝试使用 jQuery？Alfresco 使用 YUI 库。如果您愿意，请查看我关于基于该库在 Spring Surf (Alfresco Share) 中[创建自动完成的旧帖子。](http://www.shmoula.cz/mvc-and-spring-surf/)如果你仍然需要 jQuery，重写那几个 javascript 例程[应该不是什么](http://www.devbridge.com/projects/autocomplete/jquery/)大问题。

# iphone - 不应该是僵尸的僵尸对象

> ID：10937416
> 
> 赞同：2
> 
> 时间：2012-06-07T18:11:43.790
> 
> 标签：iphone, objective-c, xcode, release-management, nszombie

我有一个导航视图 iPhone 应用程序。我创建了一个简单的对象，它有一个“名称”NSString 和一个“重量”NSNumber。加载单元格时，此应用程序不断崩溃。这是方法：

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];
}

// Configure the cell...
factor *toAdd = [factors objectAtIndex:indexPath.row];

cell.textLabel.text = toAdd.name;
cell.detailTextLabel.text = [toAdd.weight stringValue];
    // ^ crashes here...
    // stringByAppendingString:@"%"];

return cell;
} 
```

在 NSNumber 上调用 stringValue 方法时，我在控制台上收到“发送到已释放实例的消息”。我不明白为什么会这样。上面的行访问名称没有问题，我没有 [release] 语句。

谢谢

编辑：这是我的因素的 init 方法。我仔细检查了重量是（保留，非原子）并在实现中合成，就像名字一样。

```
- (id) init{
if( self = [super init] )
{
    weight = [NSNumber numberWithInt:10];
    name = @"Homework";
}
return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:32:21.477

您没有在 init 中使用属性设置器方法。因此不保留对象。

试试这个：

```
- (id) init{
if( self = [super init] )
{
    self.weight = [NSNumber numberWithInt:10];
    self.name = @"Homework";
}
return self;
} 
```

为避免此类错误，您可以使用以下方法综合属性：

```
@synthesize name = _name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:18:26.847

能否成功访问该属性与该属性是否已被释放`name`无关。`weight`所有这一切都告诉你，你`factor`的生活很好，它`name`也很好。我猜你`weight`在`factor`.

编辑：使用添加的代码，这*绝对*是您正在做的事情。

# c++ - 使用后需要删除 CString 以释放内存吗？

> ID：10937421
> 
> 赞同：3
> 
> 时间：2012-06-07T18:12:00.277
> 
> 标签：c++, visual-c++, mfc, cstring

如果我使用这样的 CString：

```
void myFunc(char *str)
{
  CString s(str);
  // Manipulate other data with CString
  // ...
  // Finished

  // Should I somehow delete 's' here to avoid a memory leak?
} 
```

一旦函数超出范围，字符串是否会被删除？

另外，我知道`new`关键字分配内存，如果我构造一个没有`new`关键字的对象，内存仍然分配吗？我的直觉告诉我是的，但我想验证一下。

例如

```
CString *asdf = new CString("ASDF");
// same as?
CString asdf("ASDF"); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-07T18:20:50.310

`new`**在堆上**分配内存，所以

```
CString *asdf = new CString("ASDF"); 
```

在堆上分配a`CString`并将指向它的指针分配给`asdf`。该内存不会被释放，在`asdf`你调用之前也不会调用析构函数`delete asdf`。

没有`new`，你在**堆栈**上分配，所以

```
CString asdf("ASDF"); 
```

分配栈内存，`asdf`代表。当堆栈展开时（如从函数返回时），此内存会自动回收，并且`asdf`在超出范围时会自动调用析构函数。

此外，`CString`清理自己的资源，所以如果`CString`对象被清理（如果它在堆栈上超出范围，或者如果它在堆上被删除），它使用的资源也将被清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:15:00.667

`CString`管理字符串字符本身的内存，所以它会在其析构函数中释放这些内存*（它有点聪明，但这样想）*。

如果您分配一个`CString`with`new`并且从不调用`delete`它，那么您不仅会泄漏`CString`对象的内存，而且它的析构函数也不会被调用，因此您也会泄漏字符串字符的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T18:20:39.850

在大多数情况下，当您创建一个 CString 对象时，您最终会得到两个分配，一个分配给对象本身，一个分配给字符串的字符。字符分配隐藏在对象中，您不必担心。如果您像在第一个示例中那样将对象声明为自动变量，则该对象将在块的末尾（即右大括号）被释放。如果你分配它，`new`你必须稍后再分配它，`delete`否则会有内存泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:15:35.187

如果你在堆栈上分配一个对象（即如果你不使用new），那么当它在函数结束时超出范围时它会自动销毁。

# objective-c - 我可以将标准 ivars 和属性添加到 NSManagedObject 吗？

> ID：10937426
> 
> 赞同：9
> 
> 时间：2012-06-07T18:12:24.413
> 
> 标签：objective-c, ios, properties, nsmanagedobject

我可以将标准属性添加到 NSManagedObject。我不希望这些对象被保存，但我希望它们在应用程序运行的整个生命周期内都存在。

我可以添加一个由 ivar 支持的 getter 和 setter 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T18:33:06.690

是的，您可以将自己的属性和方法添加到从 NSManagedObject 派生的类中。我一直这样做。您可以声明属性@dynamic（如果使用Core Data），或者简单地@synthesize 它们。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-07T18:33:15.130

在这种情况下，通常使用“瞬态属性”。您可以像其他实体属性一样在核心数据模型中声明它们，但在数据模型检查器中将它们标记为“瞬态”。它们是您的核心数据模型的一部分，但不会持久化！ ![在此处输入图像描述](../Images/9aeae0b8ac33d839fbcc7586d383de6f.png)

# java - 为 JTable 数据生成 HTML 报告

> ID：10937429
> 
> 赞同：-2
> 
> 时间：2012-06-07T18:12:33.927
> 
> 标签：java, html, swing, jtable, report

我需要为基于 Swing 的应用程序生成 HTML 格式的报告。

*   是否可以转换`JTable`成 HTML 代码（HTML 表格）？
*   如果是，我如何转换`JTable`成 HTML 表格，或者有没有其他方法可以生成 HTML 用于报告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:21:04.520

好的。我一夜之间得出了三个解决方案（如果可能的话，你可以将它们组合起来）：

1.  基本的 - 最大的控制和灵活性 - 通过迭代使用`table`, `td`,包裹数据的行来生成 HTML `tr`。为了获得更好的视觉效果，您必须手动将其包含在生成的输出中。
2.  使用[JAXB](http://jaxb.java.net/tutorial/)或[Jackson](http://jackson.codehaus.org/)注释（或任何为您提供轻松创建 JSON/XML 的库）创建模型，并将模型保存到/使用“html 模板”，其中包含例如提供的花哨的东西`CSS`和酷炫的视觉效果`jQuery UI`（以及扩展：[Heatbox](http://www.jnathanson.com/blog/client/jquery/heatcolor/index.cfm)等）[DataTables](http://datatables.net/)、[KendoUI](http://www.kendoui.com/documentation/ui-widgets/grid/walkthrough.aspx)、[Flexigrid](http://www.flexigrid.info/)，甚至是[Google Charts](https://developers.google.com/chart/interactive/docs/gallery)。为了适应特定的“视觉效果提供者”，您可能必须对生成的`XML`/`JSON`数据进行一些操作，但`JAXB`您甚至可以生成严格的`HTML` `table`片段。
3.  数据生成就像 in `2.`- 但是您将此数据与可以读取`XML`/ `JSON`（或您提供的任何格式）的外部工具/应用程序一起使用。你可以尝试使用`Jasper reports`（[这里](http://www.packtpub.com/article/jasperreports-creating-report-from-xml-data-using-xpath)和[这里](http://jasperreports.sourceforge.net/sample.reference/xmldatasource/index.html)，[iReport](http://jasperforge.org/projects/ireport)，[Eclipse BIRT](http://www.eclipse.org/birt/phoenix/)）——报告工具应该有选项`Save as..->HTML Page`。

如果是图表（如果您不想要基于上述`JavaScript`的解决方案），您还可以`HTML`使用一些 java 库生成图像（您将在页面中显示），这些库使您可以保存生成的图像（例如[JFreeChart](http://www.jfree.org/jfreechart/)等或`Swing`' s 油漆组件技巧）。

# flash - 使用终端运行 SWF 文件

> ID：10937431
> 
> 赞同：1
> 
> 时间：2012-06-07T18:12:45.993
> 
> 标签：flash, actionscript, terminal

有没有办法通过终端运行 swf 文件？喜欢`php -f file.php`功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:43:08.677

有点。您可以打开独立 Flash Player 应用程序并将 swf 文件作为参数传递，例如：

```
path/to/your/standalone/FlashPlayer yourFile.swf 
```

您可能会发现[as3term](http://code.google.com/p/as3term/)很有趣。如果您查看源代码，您会注意到编译后的 swf 被加载，但没有添加到显示列表中，但作为根的整个应用程序仍然是一个 swf。

请注意，您将始终打开一个窗口。例如，任何 Document/Main as3 类都扩展 Sprite，它是一个可显示的对象，有点像在 Java 中扩展 Applet - 你最终会在屏幕上看到一些东西。您不能像典型的命令行应用程序 AFAIK 那样像文本一样执行 swf。

说到 Java，[Joa Ebert 的 JITB](http://blog.joa-ebert.com/2010/08/19/introducing-jitb/)项目令人印象深刻。我不确定它有多可行，但也许可以使用/修改项目以在没有 GUI 的情况下运行 actionscript 字节码。尽管如此，它看起来并不容易/直截了当。你到底需要在不需要界面的动作脚本中做什么？也许可以使用可以从命令行运行的脚本（如 php、python 等）来实现相同的功能？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-25T07:54:58.600

`.swf`可以使用**gnash** swf 查看器在终端上打开文件。

# ios - iOS：绘画/绘图应用程序如何消除响应触摸的初始延迟？

> ID：10937437
> 
> 赞同：4
> 
> 时间：2012-06-07T18:13:06.770
> 
> 标签：ios, ipad, touchesbegan, touchesmoved

当我使用绘画/绘图应用程序时，我从来没有注意到按下手指和能够看到在显示器上绘制的东西之间的延迟。但是，对于我的应用程序，最初的接触接收速度非常慢。第二个、第三个和第四个手势每秒接收 60 个，但第一个手势可能是每秒 2-3 个触摸事件。此外，如果我让应用闲置 10 秒，同样的延迟会再次发生。就好像 iOS 忘记了应用程序需要注意，或者设备（iPad 3、iOS 5.1.1）进入了一种睡眠状态，显示屏打开但触摸响应变慢。

更新：如果我通过关闭显示屏让 iPad 3 进入睡眠/锁定状态并保持 10 秒钟，然后打开显示屏，每次都会发生初始缓慢的触摸响应。

更新：运行 iOS 5.1.1 的 iPad 1 上没有出现此问题。即使我将 iPad 1 从睡眠/解锁状态带回来，也没有延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:12:47.937

我以前没有真正使用过这种东西，但我记得在某处读过关于使用 UIBezierPath 创建绘图应用程序的内容。你可以尝试使用它。根据这个问题，它更快：

[为什么 UIBezierPath 比 Core Graphics 路径快？](https://stackoverflow.com/questions/6327817/why-is-uibezierpath-faster-than-core-graphics-path)

教程在这里：[http ://soulwithmobiletechnology.blogspot.com/2011/05/uibezierpath-tutorial-for-iphone-sdk-40.html](http://soulwithmobiletechnology.blogspot.com/2011/05/uibezierpath-tutorial-for-iphone-sdk-40.html)

# c# - ASP.NET 向多个电子邮件发送电子邮件

> ID：10937439
> 
> 赞同：1
> 
> 时间：2012-06-07T18:13:16.623
> 
> 标签：c#, asp.net, mailaddress

我这里有这个代码...

```
MailAddress from = new MailAddress("noreply@fakeemail.com", "IPC Orders");
        MailAddress to = new MailAddress("email1@fakeemail.com.com");
        MailMessage mail = new MailMessage(from, to);
        mail.To.Add("email2@fakeemail.com");
        mail.To.Add("email3@fakeemail.com"); 
```

显然这不是完整的代码，但是当我尝试向多个电子邮件地址发送电子邮件时不会发送，如果我注释掉这两行......

```
 mail.To.Add("email2@fakeemail.com");
        mail.To.Add("email3@fakeemail.com"); 
```

它有效，并将其发送到第一封电子邮件`MailAddress to = new MailAddress("email1@fakeemail.com.com");`

我的代码有什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:22:02.437

用于 `AddressCollection`添加多个`TO`地址，例如

mail.To = new AddressCollection("email2@fakeemail.com, email3@fakeemail.com");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:22:22.233

您可以尝试将所有电子邮件地址添加到列表中，然后遍历该列表并在每个元素处发送邮件

```
List<string> emailAddress = new List<string>();
emailAddress.add("email1@em.com");
emailAddress.add("email2@em.com"); // ... etc

 foreach (string email in emailAddress)
 {
  MailMessage mail = new MailMessage(from, email);
  //+ more stuff
 } 
```

# linux - 如何循环浏览脚本中的某些文件？

> ID：10937445
> 
> 赞同：2
> 
> 时间：2012-06-07T18:13:48.460
> 
> 标签：linux, bash, loops, for-loop

我在这方面非常初学者，并且已经搜索了我的问题的答案，但没有找到任何我理解如何实施的答案。任何帮助将不胜感激。

我有一个脚本：

```
FILE$=`ls ~/Desktop/File_Converted/`
mkdir /tmp/$FILE
mv ~/Desktop/File_Converted/* /tmp/$FILE/ 
```

所以我可以使用 Applescript 来说明何时将文件放入此桌面文件夹，创建一个临时目录，将文件移动到那里并做其他事情。然后我删除临时目录。就目前而言，这很好，但问题是，如果在我对当前正在使用的文件执行操作之前将另一个文件放入 File_Converted 目录，它将在脚本之前更改 $FILE 变量的值完成对当前文件的操作。

我想做的是使用一个变量设置，变量是$FILE1。我检查是否定义了 $FILE1，如果没有，则使用它。如果已定义，则尝试 $FILE2 等... 最后，当我完成后，我想回收变量，以便 $FILE1 再次设置回 null 并且放入 File_Converted 文件夹的下一个文件可以使用它再次。

任何帮助将不胜感激。我是新手，所以我不知道从哪里开始。

谢谢！

担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:34:08.493

您的问题有点难以解析，但我*认为*您并没有真正理解[shell glob](http://mywiki.wooledge.org/glob)或[循环构造](http://www.gnu.org/software/bash/manual/bashref.html#Looping-Constructs)。球团是根据*现在*的情况进行扩展的，而不是根据之前或以后可能存在的情况。

```
DIR=$(mktemp -d)
mv ~/Desktop/File_Converted/* "$DIR"
cd "$DIR"
for file in *; do
    : # whatever you want to do to "$file"
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T18:40:35.237

您不需要 LIFO - 为不同事件运行的脚本的多个副本不会在它们的变量名上发生冲突。它们*将*冲突的是共享临时目录，您应该`mktemp -d`在每次运行脚本时使用新的、唯一且保证不冲突的名称创建一个临时目录。

```
tempdir=$(mktemp -t -d mytemp.XXXXXX)
mv ~/Desktop/File_Converted/* "$tempdir"
cd "$tempdir"
for f in *; do
  ...whatever...
done 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T18:24:07.393

您所描述的是一种经典的*竞争条件，*其中不清楚一个操作是否会在冲突操作开始之前完成。这些并不容易处理，但是通过处理它们，您将学到很多关于脚本和编程的知识，因此即使只是为了学习，也值得付出努力。

我建议您首先查看`lockfile`或`flock`联机帮助页。尝试一些实验。看起来您可能对此具有正确的才能，因为您提出的问题完全正确。

顺便说一句，我怀疑你想杀`$`了

```
FILE$=`ls ~/Desktop/File_Converted/` 
```

顺便说一句，@CharlesDuffy 正确地观察到“`ls`在脚本中使用表明某些事情本身做错了。请参阅[mywiki.wooledge.org/ParsingLs](http://mywiki.wooledge.org/ParsingLs)和[mywiki.wooledge.org/BashPitfalls](http://mywiki.wooledge.org/BashPitfalls)。” 有人怀疑建议的`lockfile`练习将清除这两点，尽管可能需要几个小时才能完成它。

# mysql - MySQL 限制函数使用

> ID：10937450
> 
> 赞同：0
> 
> 时间：2012-06-07T18:14:00.130
> 
> 标签：mysql, sql, limit

我有一个存储在 MySQL 中的函数，它通过用户的 UUID 访问敏感信息...是否可以锁定 MySQL 中的函数，以便它只能返回查询中的单个记录？`SELECT SENSITIVE_FUNCTION(UUID) FROM users;`这个想法是为了防止在前端服务器由于任何原因受到损害时通过某种场景返回数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T18:15:04.850

利用[`LIMIT`](http://dev.mysql.com/doc/refman/5.1/en/select.html)

```
SELECT * FROM sometable WHERE id = 1 LIMIT 1 
```

> LIMIT 子句可用于限制 SELECT 语句返回的行数。LIMIT 接受一个或两个数字参数，它们都必须是非负整数常量（使用准备好的语句时除外）。
> 
> 有两个参数，第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数。初始行的偏移量为 0（不是 1）：
> 
> 选择 * 从 tbl 限制 5,10；# Retrieve rows 6-15 要检索从某个偏移量到结果集末尾的所有行，您可以为第二个参数使用一些较大的数字。此语句检索从第 96 行到最后一行的所有行：
> 
> 从 tbl 限制 95,18446744073709551615 中选择 *；使用一个参数，该值指定从结果集开头返回的行数：
> 
> 从 tbl 限制 5 中选择 *；# 检索前 5 行 换句话说，LIMIT row_count 等价于 LIMIT 0, row_count。

# sql - PL/SQL 根据其他表中某行的值选择多个项目

> ID：10937454
> 
> 赞同：0
> 
> 时间：2012-06-07T18:14:25.567
> 
> 标签：sql, oracle, stored-procedures, plsql

我已经为一个问题苦苦挣扎了好几天。我在 Oracle DB (10g) 中有几个表，一个显示按优先级排序的订单列表，另一个显示产品库存。我想要做的是根据优先级将可用产品分配给订单。我的问题是：

*   每个订单将只收到一种产品。如何根据可用的存在只选择可以接收产品的订单？
*   为了使程序更有效率，有没有办法在选择产品时存储库存更改，并在程序结束时应用更新？

这两个表都有数千个项目，所以我认为 PL/SQL 存储过程会更有效。

感谢您的时间和帮助。

PS：这是我的表格的一个例子。

```
Orders
-------------------------------------------
| ID      |  Priority     |     Product
-------------------------------------------
| Order1  |    50         |        1
| Order7  |    48         |        3
| Order3  |    45         |        1
| Order2  |    40         |        1
| Order9  |    30         |        2
| Order4  |    15         |        3

 Inventory
-------------------------------------------
| ProductID |  Qty      
-------------------------------------------
| 1         |    2 
| 2         |    4 
| 3         |    1 
```

运行存储过程后，我需要得到以下结果并需要更新库存。

```
-------------------------------------------
| ID      |  Priority     |     Product
-------------------------------------------
| Order1  |    50         |        1
| Order7  |    48         |        3
| Order3  |    45         |        1
| Order9  |    30         |        2

Updated Inventory
-------------------------------------------
| ProductID |  Qty      
-------------------------------------------
| 1         |    0 
| 2         |    3 
| 3         |    0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:31:36.987

是的，程序将是处理交易的最佳方式。

打开一个游标并用您订购的订单表填充它。当您完成订单时，遍历游标并更新 Inventory 表。

```
CREATE OR REPLACE PROCEDURE update_oders (status OUT BOOLEAN)
IS
    CURSOR orders
    IS
          SELECT id, priority, product
            FROM orders
        ORDER BY priority DESC;
BEGIN
    status := FALSE;

    FOR cur_rec IN orders
    LOOP
        BEGIN
            SELECT COUNT ( * )
              INTO inventory_count
              FROM inventory
             WHERE productid = cur_rec.product;

            IF inventory_count > 0
            THEN
                BEGIN
                    UPDATE inventory
                       SET qty = qty - 1
                     WHERE productid = cur_rec.product;

                    INSERT INTO filledorder (id, priority, product)
                        VALUES (id, priority, product);
                EXCEPTION
                    WHEN OTHERS
                    THEN
                        --log error about problem..
                        ROLLBACK;
                END;
            ELSE
                -- log some error or order inventory?
                NULL;
            END IF;
        EXCEPTION
            WHEN NO_DATA_FOUND
            THEN
                --log data;
                NULL;
        END;
    END LOOP;

    COMMIT;
    status := TRUE;
EXCEPTION
    WHEN OTHERS
    THEN
        -- log 
        ROLLBACK;
        status := FALSE;
END; 
```

# linq - 如何配置 LINQ 请求

> ID：10937455
> 
> 赞同：0
> 
> 时间：2012-06-07T18:14:30.143
> 
> 标签：linq, linq-to-entities

我有 2 张桌子：'AllowedDates'

```
- DayID int PK
- Day datetime 
```

'允许时间'

```
- TimeID int PK
- DayID int FK
- Hour int
- Minute int 
```

我也有表“用户”：

```
- ID int PK
- FirstName nvarchar(max)
... 
```

和表'UserDeniedTimes'：

```
DayID int FK
UserID int FK
Hour int
Minute int 
```

我需要为具体的 DayID/Hour/Minute 选择没有拒绝时间（在 UserDeniedTimes 中记录）的用户

我尝试执行以下操作：

```
var result = from i in _dbContext.Users
where i.UserDeniedTimes.All(
    p => (!p.AllowedDate.AllowedTimes.Any(
        a1 => a1.DayID == aTime.DayID
           && a1.Hour == aTime.Hour
           && a1.Minute == aTime.Minute
    ))
)
select new ... 
```

它工作正常，但有一个例外。如果用户在某一天在 UserDeniedTimes 中有记录，但在另一天，该用户也不会被选中。例如，UserDeniedTimes 有记录：

```
DayID = 10
UserID = 20
Hour = 14
Minute = 30 
```

如果 aTime 具有以下值，则不会选择此用户：

```
DayID = 10
Hour = 9
Minute = 30 
```

但是如果 DayID = 11 则会被选中。为什么？

[添加] 当我仅按天限制时它可以正常工作：

```
var result = from i in _dbContext.Users
where i.UserDeniedTimes.All(
    p => (!p.AllowedDate.AllowedTimes.Any(
        a1 => a1.DayID == aTime.DayID
    ))
)
select new ... 
```

但在我写的时候不起作用：

```
var result = from i in _dbContext.Users
where i.UserDeniedTimes.All(
    p => (!p.AllowedDate.AllowedTimes.Any(
        a1 => a1.Hour == 14
    ))
)
select new ... 
```

为什么？魔术 DayID 和 Hour 有什么区别？

[添加#2]

```
 ((time == null) || i.UserDeniedTimes.All(p => 
                        //p.AllowedDate.AllowedTimes.Any(a1 => a1.DayID != 33) && 
                        (p.AllowedDate.AllowedTimes.Any(a2 => a2.Hour != 14)
                        ))) && 
```

不工作

```
 ((time == null) || i.UserDeniedTimes.All(p => 
                        p.AllowedDate.AllowedTimes.Any(a1 => a1.DayID != 33) && 
                        //(p.AllowedDate.AllowedTimes.Any(a2 => a2.Hour != 14)
                        ))) && 
```

作品

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:34:33.487

有时它有助于重新表述问题：如果我读得很好，您不希望用户具有至少一个指定的 DayID/Hour/Minute 的拒绝时间：

```
where !i.UserDeniedTimes.Any(
    p => (p.AllowedDate.AllowedTimes.Any(
        a1 => a1.DayID == aTime.DayID
           && a1.Hour == aTime.Hour
           && a1.Minute == aTime.Minute
    ))
) 
```

这应该选择您想要的用户。如果没有，请用更多的话告诉你你到底想要达到什么目的。

# jquery - 使用 jQuery 动态创建 ASP.NET 按钮控件

> ID：10937459
> 
> 赞同：1
> 
> 时间：2012-06-07T18:14:44.153
> 
> 标签：jquery, asp.net

我知道这可以为常规的 HTML 按钮完成，但是可以使用 jQuery 动态创建 asp:Button 吗？

这是我的按钮，带有调用服务器端函数的 onclick：

```
<asp:Button ID="btnYesGPS" runat="server" Text="Yes" CssClass="formButton" onclick="btnYesGPS_Click" /> 
```

感谢您对此的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:16:50.577

不，您不能使用 jQuery 创建 ASP.NET 控件。它们是特定于服务器的，而 jQuery 在客户端上执行。他们只是属于如此不同和分离的世界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:27:49.803

由于看起来您已经拥有服务器端逻辑并且只想从客户端调用它，因此我看到了 2 个选项：

1.  默认情况下隐藏 asp.net 按钮 ( `display:none`) 并在 GPS API 可用时显示它
2.  通过 AJAX (WebMethod) 调用它

我个人喜欢第一个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:22:49.090

正如 Claudio 提到的，您不能在客户端创建 ASP.NET 控件，但是您可以在客户端创建元素，这些元素使用 jquery（或 AJAX）回发到服务器端并执行一些服务器端功能。

如果您给我们一些关于您的问题的背景信息，我们或许能够提供更详细的答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:28:03.250

您说您正在发布到网络服务。这可以纯粹在javascript中完成。

在你的 中添加一个`ScriptService`引用`ScriptManager`，你应该可以从 javascript 调用它。然后在客户端使用 jquery 添加按钮就足够了。

无法在客户端添加 asp.net 按钮，在这种情况下根本不需要。

如果您需要帮助，请参阅此处：[asp.net Web 服务](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-web-services)

# java - 在他们登录我的网站/应用程序后，我如何请求 Facebook 权限？

> ID：10937462
> 
> 赞同：1
> 
> 时间：2012-06-07T18:15:00.800
> 
> 标签：java, facebook, http, http-get

我目前有我的应用程序要求扩展权限以在登录时发布到用户的墙上。有没有办法让应用程序在登录时而不是在他们第一次想在墙上发布东西时请求这些扩展权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:28:04.793

您可以创建一个分层工作流，在其中请求 current_permissions 并在调用 FB.ui() 方法之前通过更多扩展权限对其进行扩展。为此，您可能会查看以下可以为您管理的组件：http: [//www.facebook.com/pages/Helper-Component-Community/222933037808340?sk=app_412923142052609](http://www.facebook.com/pages/Helper-Component-Community/222933037808340?sk=app_412923142052609)

这是创建此类工作流的示例：

```
var publishStreamDummy = function() {

    // user granted the permission to stream publish ... so we call an FB.ui dialog
    FB.ui({
        yourUiParams          
        },      
        function(response) {
          if(typeof response['post_id'] != 'undefined')
              // posted
          else
              // post failed
        }
    );
} 
// the deny-callback
var publishStreamDenied = function() {
    // the user denied the publish 
}

    // check permission and save access token via ajax
    fbHelper.loginAndSave('publish_stream', 'general', 
                            {   func : publishStreamDummy, 
                                params : null,
                                cufa : true
                            } ,
                            {   func : publishStreamDenied, 
                                params : null,
                                cufa : true
                            } 
                        ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:23:01.500

不幸的是你不能。

当您请求某些权限时，您定义了应用程序的“范围”。因此用户可以知道您的应用程序将能够做什么。

如果您尝试删除在他们的墙上张贴然后添加它的能力。您将无法做到这一点，因为您第一次获得的令牌仅对您第一次要求的内容具有权限。

# java - 在 onPostExecute 中启动 AsyncTask

> ID：10937463
> 
> 赞同：0
> 
> 时间：2012-06-07T18:15:02.337
> 
> 标签：java, android, timertask

所以它是这样的：

我有一个带有 TimerTask 的 AsyncTask。每 15 秒运行一次 AsyncTask。AsyncTask 获取 XML 数据并将其放入动态创建的 TextView 中，该 TextView 包含在动态创建的 TableRow 中。

onPostExecute 我创建了所有的 tableRow 和 TextView，然后为了不让它们加倍而不是刷新，我删除了 tableRow 视图。

```
protected void onPostExecute(Document result)
{
if(TableLayout.getChildAt(1) == null)
{
    //All my code to show tableRow and TextView
else
{
    int u = 20;
    while(tl.getChildAt(1) != null)
    {
        if(tl.getChildAt(u) != null)
            tl.removeViewAt(u);
        u--;
    }
} 
```

所以是的，一切都很好。我只是想知道是否有某种方法可以让我的 TimerTask 立即重新启动，而不是等待 x 毫秒为 timerTask 重新开始？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:03:03.757

所以是的，我找到了一种方法来做到这一点。我会发布以防其他人想做类似的事情。

```
protected void onPostExecute(Document result)
    {

        if(tl.getChildAt(1) == null)
        {
            //do some code              
        }
        else
        {
            int u = 20;
            while(tl.getChildAt(1) != null)
            {
                if(tl.getChildAt(u) != null)
                    tl.removeViewAt(u);
                u--;
                }
                //do same code over again as above.

                }
            }
        } 
```

这将删除 tableRows 并重新创建新的，从而“更新”它们

# php - PHP - 并非所有图像都被上传

> ID：10937465
> 
> 赞同：0
> 
> 时间：2012-06-07T18:15:08.767
> 
> 标签：php, mysql, image, file-upload, pdo

这个问题让我困惑了一段时间。基本上我有一个表单，提交时会将多个图像同时上传到服务器，并将每个图像的记录插入到 Mysql 数据库中。

目前我可以选择最多 6 张图像并将其成功上传到服务器，并将它们的记录插入到 mysql 数据库中。

如果我选择 7 张图片，则只有 6 张被上传。如果我选择 8、9 或 10 张图像，这也是一样的；它总是比我选择上传的总数少一。

如果我选择 11 张图像并提交表单，则没有任何反应，不会上传任何图像，也不会将图像记录插入数据库。

我检查了图像，所有图像都在允许的文件类型、大小、尺寸等范围内。我正在使用的网络服务器的 php.ini 文件将 max_file_uploads 设置为 200。

那么为什么它在一个实例中只上传我的一张图片，而在另一个实例中却不上传任何一张呢？

代码很长，我会尽量只包含适用的东西。

additem.php：

```
//check if the submit button has been clicked
    if( isset( $_POST['submit'] ) ){

        //validate the title and description
        $title = validate_title($_POST['title']);
        $desc = validate_desc($_POST['desc']);

        //Get other posted variables
        $cat = $_POST['cat'];
        $year = $_POST['year'];

        if($title && $desc != false){

            //check if an image has been submitted
            if((!empty($_FILES["files"])) && ($_FILES['files']['error'][0] == 0)){

                // Insert the post
                insert_post_db($title, $desc, $year);

                // Get id of last inserted post
                $post_id = get_postid();

                // loop through each individual image
                foreach($_FILES['files']['tmp_name'] as $key => $tmp_name){ 

                    // Get the image info
                    $temp_dir = $_FILES['files']['tmp_name'][$key]; // Temporary location of file
                    $image_type = $_FILES['files']['type'][$key]; // Image filetype
                    $image_size = $_FILES['files']['size'][$key]; // Image file size
                    $image_name = $_FILES['files']['name'][$key]; // Image file name

                    // Get image width and height
                    $image_dimensions = getimagesize($temp_dir); // returns an array of image info [0] = width, [1] = height
                    $image_width = $image_dimensions[0]; // Image width
                    $image_height = $image_dimensions[1]; // Image height

                    // Check to make sure there are no errors in ther file
                    if($_FILES['files']['error'][$key] === UPLOAD_ERR_OK){

                        // Make sure each filename name is unique when it is uploaded
                        $random_name = rand(1000,9999).rand(1000,9999).rand(1000,9999).rand(1000,9999);

                        // Set the path to where the full size image will be stored
                        $path = 'img/fullsize/'.$random_name . $_FILES['files']['name'][$key];

                        // Set the path to where the thumb image will be stored
                        $thumb_path = 'img/thumb_/'.$random_name .$_FILES['files']['name'][$key];

                        // Set the Maximum dimensions the images are allowed to be
                        $max_width = 4040;
                        $max_height = 4040;

                        // Set the Maximum file size allowed (5MB)
                        $max_size = 5242880;

                        // Set the file extensions that are allowed to be uploaded and store them in an array
                        $allowed = array('image/jpeg','image/png','image/gif');

                        // Check to make sure the image that is being uploaded has a file extension that we permit
                        if(in_array($image_type,$allowed)){
                            // Check to make sure the Image dimensions do not exceed the maximum dimensions allowed
                            if(($image_width < $max_width) && ($image_height < $max_height)){ 
                                // Check to make sure the Image filesize does not exceed the maximum filesize allowed
                                if($image_size < $max_size){ 

                                    // Check the shape of the Image (square, standing rectangle, lying rectangle) and assign a value depening on which it is
                                    $case = image_shape($image_width, $image_height);

                                    // Create the new thumbnail dimensions
                                    list($thumb_width, $thumb_height, $smallestside, $x, $y) = thumb_dimensions($case, $image_width, $image_height, $smallestside, $x, $y);

                                    // Create the thumbnails
                                    create_thumbnail($image_type, $image_height, $image_height, $temp_dir, $thumb_path, $thumb_width, $thumb_height, $smallestside, $x, $y);

                                    // move large image from the temporary location to the permanent one
                                    move_uploaded_file($temp_dir, $path);

                                    // Get the new randomly generated filename and remove the directory name from it
                                    $file_name = substr($path, 4);

                                    // Insert a record of the image in the Database
                                    insert_image_db($file_name, $cat, $post_id,$image_size, $image_width, $image_height);

                                    // Tell user image was successfully uploaded
                                    echo "<p>Image uploaded ok.</p>";

                                    // Forward to the review post page
                                    header('Location: reviewpost.php');
                                }else{
                                    echo $_FILES['files']['name'][$key] . ': unsupported file size.';
                                }
                            }else{
                                echo $_FILES['files']['name'][$key] . ': unsupported image dimensions.';
                            }
                        }else{
                            echo $_FILES['files']['name'][$key] . ': unsupported filetype.';
                        }
                    }else{echo 'file error';}
                }

            }else{
                //display error message if user didnt select an image to upload
                echo '<p>There was an error processing your submission. Please select an image to upload.</p>';
            }
        }else{
            //display error message if the title or description are incorrect length
            echo errormessage($title, $desc);
        }
    } 
```

功能：

```
// Find out what shape the image is
    function image_shape($image_width, $image_height){
        if($image_width == $image_height){$case=1;} // square image
        if($image_width < $image_height){$case=2;} // standing rectangle
        if($image_width > $image_height){$case=3;} // lying rectangle
        return $case;

    }

    // Set the dimensions of the new thumbnail 
    function thumb_dimensions($case, $image_width, $image_height){
        switch($case){
            case 1:
                $thumb_width    =   200;
                $thumb_height   =   200;
                $y = 0;
                $x = 0;
                $smallestside = $image_height;
            break;
            case 2:
                $thumb_height   =   200;
                $ratio          =   $thumb_height / $image_height;
                $thumb_width    =   round( $image_width * $ratio );
                $x = 0;
                $y = ($image_height - $image_width) /2;
                $smallestside = $image_width;
            break;
            case 3:
                $thumb_width    =   200;
                $ratio          =   $thumb_width / $image_width;
                $thumb_height   =   round($image_height * $ratio);
                $x = ($image_width - $image_height) /2;
                $y = 0;
                $smallestside = $image_height;
            break;
        }
        return array($thumb_width, $thumb_height, $smallestside, $x, $y);
    }

    // Create a thumbnail of the image
    function create_thumbnail($image_type, $image_width, $image_height, $temp_dir, $thumb_path, $thumb_width, $thumb_height, $smallestside, $x, $y){
        switch($image_type){
            case 'image/jpeg';
                $thumbsize = 200;
                $img =      imagecreatefromjpeg($temp_dir);
                $thumb =    imagecreatetruecolor($thumbsize, $thumbsize);
                            imagecopyresized($thumb, $img, 0, 0, $x, $y, $thumbsize, $thumbsize, $smallestside, $smallestside);
                            imagejpeg($thumb, $thumb_path,100);

            break;
            case 'image/png';
                $thumbsize = 200;
                $img =      imagecreatefrompng($temp_dir);
                $thumb =    imagecreatetruecolor($thumbsize, $thumbsize);
                            imagecopyresized($thumb, $img, 0, 0, 0, 0, $thumbsize, $thumbsize, $smallestside, $smallestside);
                            imagepng($thumb, $thumb_path, 0);

            break;
            case 'image/gif';
                $thumbsize = 200;
                $img =      imagecreatefromgif($temp_dir);
                $thumb =    imagecreatetruecolor($thumbsize, $thumbsize);
                            imagecopyresized($thumb, $img, 0, 0, 0, 0, $thumbsize, $thumbsize, $smallestside, $smallestside);
                            imagegif($thumb, $thumb_path, 100);

            break;
        }

    }
    function insert_post_db($title, $desc, $year){
        //test the connection
        try{
            //connect to the database
            $dbh = new PDO("mysql:host=localhost;dbname=mjbox","root", "usbw");
        //if there is an error catch it here
        } catch( PDOException $e ) {
            //display the error
            echo $e->getMessage();
        }

        $stmt = $dbh->prepare("INSERT INTO mjbox_posts(post_year,post_desc,post_title,post_active,post_date)VALUES(?,?,?,?,NOW())");
        $stmt->bindParam(1,$year);
        $stmt->bindParam(2,$desc);
        $stmt->bindParam(3,$title);
        $stmt->bindValue(4,"0");
        $stmt->execute();

    }
    function insert_image_db($file_name, $cat, $post_id, $image_size, $image_width, $image_height){

        //test the connection
        try{
            //connect to the database
            $dbh = new PDO("mysql:host=localhost;dbname=mjbox","root", "usbw");
        //if there is an error catch it here
        } catch( PDOException $e ) {
            //display the error
            echo $e->getMessage();
        }

        //insert images
        $stmt = $dbh->prepare("INSERT INTO mjbox_images(img_file_name,cat_id,post_id,img_size,img_width,img_height,img_is_thumb) VALUES(?,?,?,?,?,?,?)");
        $stmt->bindParam(1,$file_name);
        $stmt->bindParam(2,$cat);
        $stmt->bindParam(3,$post_id);
        $stmt->bindParam(4,$image_size);
        $stmt->bindParam(5,$image_width);
        $stmt->bindParam(6,$image_height);
        $stmt->bindValue(7,"0");
        $stmt->execute();
    } 
```

抱歉，代码很多，我试图只包含可能适用的内容，如果我遗漏了什么，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:36:19.133

尝试在每个文件之间添加一个睡眠计时器。我刚试过，它对我有用。我放了0.3秒。

```
foreach($file .. $k => $v) {
    // your stuff above..
    usleep(300000); // Sleep between each file, 1000000 = 1 second
} 
```

# registry - 通过注册表禁用 Windows 防火墙 [WINSERVER 2008]

> ID：10937471
> 
> 赞同：1
> 
> 时间：2012-06-07T18:15:27.320
> 
> 标签：registry

我google了很长时间关于如何做到这一点。我只能找到： - HKEY_LOCAL_MACHINE > SYSTEM > CurrentControlSet > Services > SharedAccess > Paramateres > FirewallPolicy 还有一个，但该文件夹也不存在。

如果你问我为什么要这样做，我已经破坏了我的专用服务器的防火墙，所以我不能 RDP。我现在可以通过恢复模式访问（来自 cd 的 xp。） - 我可以访问注册表，但不知道在哪里进行编辑。顺便说一句，我的操作系统：Windows Server 2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:13:08.990

ight VNC viewer 用于在恢复模式下访问 windows 服务器

使用 Tight VNC，输入 IP 地址和恢复密码以访问服务器。

然后，

运行 > 注册表编辑器

点击“HKEY_LOCAL_MACHINE”

单击“文件”下的“加载 Hive”菜单

加载正确的文件 -> C:\Windows\system32\config\SYSTEM

给它一个名字（zB“RegTemp”）

点击“确定”加载文件

打开 HKEY_LOCAL_MACHINE\RegTemp\ControlSet001\Services\SharedAccess\Parameters\FirewallPolicy\

打开“PublicProfile”和“StandardProfile”并将值“EnableFirewall”和“DoNotAllowExceptions”更改为 0

再次转到“RegTemp”

打开“文件”-菜单和“卸载 Hive”

关闭注册表并取消 WinRecovery

# jquery - jQuery :nth-child 在 IE 中不工作

> ID：10937474
> 
> 赞同：4
> 
> 时间：2012-06-07T18:15:35.830
> 
> 标签：jquery, internet-explorer, cross-browser

我正在使用此代码

```
$('.list-item:nth-child(5n)').after('<div class="clear"><img src="http://domain.com/image.jpg" width="780" height="80" alt="banner" /></div>') 
```

这在 Firefox 和 Chrome 中运行良好，但在 IE8、IE9 中无法运行......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:02:44.380

jQuery`nth-child`在没有本地浏览器支持的情况下处理。它在 IE7、8 和 9+ 中运行良好。

小提琴：http: [//jsfiddle.net/jonathansampson/Y3MP4/](http://jsfiddle.net/jonathansampson/Y3MP4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T18:19:01.013

`nth-child`IE 6-8 不支持。IE9 支持它。见[这里](http://www.quirksmode.org/css/contents.html#t38)。

有关可能的解决方法，请参阅[此问题](https://stackoverflow.com/questions/3951390/nth-child-is-not-working-in-ie)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T18:51:46.443

好像还有什么不对劲。您的代码即使在 IE6 中也应该可以工作——尽管 IE<9 本身并不支持 nth-child，但 jQuery 的选择器引擎 (Sizzle) 会为您隐式处理它。

试试这个代码：

```
<script>
$("ul").remove();
var ul = $("<ul>");
for (var i = 1; i < 100; i++) {
  $("<li>", {
    "class" : "list-item",
    html : i
  }).appendTo(ul);
}
ul.appendTo(document.body);

$('.list-item:nth-child(5n)')
  .after('<div class="clear">Clear!</div>')
</script> 
```

你看到“清除！” 评论？即使在 IE6 中，您也应该...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T21:26:42.270

实际上，您可以在 js 文件夹中上传一个脚本，并在标题中添加一些条件，nth-child 将在 IE 6、7 和 8 中工作。您可以[在此处](http://selectivizr.com/)了解更多信息，如果您需要使用圆角，则需要安装另一个名为 curvycorners.js 的脚本，它们真的很节省时间。祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-26T09:41:56.823

jQuery nth-child 选择器在 IE8 中涉及复杂选择器的某些极端情况下不起作用。

以下需要在 IE8 中修改。

```
//Works fine in IE9+, FF and Chrome. 
//dataColumn = jQuery('.table-header div.rf-edt-hdr + div table table tbody > tr:nth-child(1) td:nth-child(1)');
//headerColumn = jQuery('div.table-header > div.rf-edt-hdr table table > tbody > tr td:nth-child(1)');
dataColumn = jQuery('.table-header div.rf-edt-hdr + div table table tbody > tr').eq(0).find('td').eq(0);
headerColumn = jQuery('div.table-header > div.rf-edt-hdr table table > tbody > tr td').eq(0); 
```

注意：nth-​​child 是基于 1-index 的。eq() 是基于 0 索引的。

# c# - 根据键自动对对象的数据结构进行排序？

> ID：10937479
> 
> 赞同：0
> 
> 时间：2012-06-07T18:16:15.393
> 
> 标签：c#

我想要一个结构来根据关联的键为我自动排序数据，但是一旦完成，我就不必用键抓取任何对象，我只想从列表中删除第一个。在我的具体情况下，每个对象都有一个关联的浮点值，我想将它们从低到高排序。

例如，我希望能够对整数列表进行排序，但是通过它们对应的浮点“键”并抓取索引 0 处的那个 - （这将是具有最低关联浮点的那个）

我遇到了orderedDictionary，但我并不完全理解它们，也不知道它们是否适合我的需求。我认为它们只是一个允许您也可以索引到它们的字典，但它们不是模板类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:22:35.980

您可能想要一个 SortedSet：http: [//msdn.microsoft.com/en-us/library/dd412070.aspx](http://msdn.microsoft.com/en-us/library/dd412070.aspx)

如果您不使用 .net 4.0，则它在 PowerCollection 项目中可用：http: [//powercollections.codeplex.com/](http://powercollections.codeplex.com/)

.Net4.0 SortedSet 示例

```
SortedSet<float> set = new SortedSet<float>( );
set.Add(13.3f);
set.Add(0.5f);
set.Add(5.5f);

Console.WriteLine(string.Format("Minimum Value: {0}", set.Min)); // prints 0.5
Console.WriteLine(string.Format("Maximum Value: {0}", set.Max)); // prints 13.3

foreach (float f in set)
{
    Console.WriteLine(f);
}
// prints:
// 0.5
// 5.5
// 13.3

// using custom IComparer<float>, see implementation below
set = new SortedSet<float>(new FloatDescComparere());

set.Add(13.3f);
set.Add(0.5f);
set.Add(5.5f);

Console.WriteLine(string.Format("Minimum Value: {0}", set.Min)); // prints 13.3
Console.WriteLine(string.Format("Maximum Value: {0}", set.Max)); // prints 0.5

foreach (float f in set)
{
    Console.WriteLine(f);
}
// prints:
// 13.3
// 5.5
// 0.5 
```

描述 IComparer：

```
private class FloatDescComparere : IComparer<float>
{
    public int Compare(float x, float y)
    {
        if (y > x)
            return 1;
        else if (x > y)
            return -1;
        else
            return 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:22:56.457

您可以使用哈希表[http://en.wikipedia.org/wiki/Hash_table](http://en.wikipedia.org/wiki/Hash_table)，将“键”放入哈希中并在哈希中搜索您的元素“键”，如果哈希具有键，则您拥有该元素. 每次添加新元素时都必须更新 O(1)，但查找复杂度也为 O(1)。

# contact - 尝试在 Microsoft Lync 中访问 ContactEndpointCollection

> ID：10937484
> 
> 赞同：2
> 
> 时间：2012-06-07T18:16:29.857
> 
> 标签：contact, lync, endpoints

我正在尝试访问特定联系人可能拥有的所有端点，以便我可以显示它们，而我能够在文档中找到此类集合的唯一位置是 ContactEndpointCollection。但是，尽管我进行了所有搜索，但我似乎无法找到如何从特定联系人那里获取此集合。

所以我的问题是：给定一个联系人，我怎样才能得到他们的 ContactEndpointCollection？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:09:15.647

您需要使用 GetContactInformation 方法来获取联系人端点。

```
Contact c;
List<object> endpoints = c.GetContactInformation(ContactInformationType.ContactEndpoints) as List<object>;
foreach(object o in endpoints)
{
    ContactEndpoint ce = o as ContactEndpoint;
    // Stuff
} 
```

这将返回一个对象，您需要将其转换为对象列表。然后您可以遍历该列表，将每个元素转换为 ContactEndpoint。我不知道如何避免双重铸造，我相信有办法，但这是一种解决方法。

# javascript - 样式未应用于对象

> ID：10937485
> 
> 赞同：1
> 
> 时间：2012-06-07T18:16:43.483
> 
> 标签：javascript, html

我的 JavaScript 文件中有以下函数：

```
 function menu_display(a) {
  document.getElementsById("dropmenu2").style.visibility="visible";
   } 
```

问题是样式未应用于我的对象（该函数被调用，我使用警报进行了检查）。事实上，微软可视化 Web 开发人员对这个对象的唯一建议是：constructor、toString、valueOf、isProtypeOf 等等。它甚至没有暗示可以应用“风格”。问题是什么？

`getElementsById`通过替换修复后`getElementById`，当我将它放在我的 html 文件中时，该函数可以正常工作，但是如果我将它放在外部 JavaScript 文件中，则该函数被调用（我检查过），但样式又不是其中之一的建议。这次没有拼写错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:18:24.630

`getElementsById()`不是文档（或任何东西）的函数。你正在寻找`getElementById()`.

```
document.getElementById("dropmenu2").style.visibility = "visible"; 
```

[在 MDN 上查看](https://developer.mozilla.org/en/DOM/document.getElementById)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:21:06.920

没有`getElementsById()`不是一个有效的 JS 函数。正确的函数是`getElementById()`单数，而不是复数，因为 HTML 规范只允许页面上的单个元素具有特定的 ID。元素 ID*必须*是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:18:35.720

你有两个错别字：

`Elements`应该是[getElementById](https://developer.mozilla.org/en/DOM/document.getElementById)中的 Element 。
`syle`应该是[风格](https://developer.mozilla.org/en/DOM/element.style)。

```
 document.getElementById("dropmenu2").style.visibility = "visible"; 
```

# php - 从 php 运行 python 脚本

> ID：10937487
> 
> 赞同：2
> 
> 时间：2012-06-07T18:16:50.933
> 
> 标签：php, python, web, cgi

我正在尝试从 php 运行 python 脚本。

```
exec("../cgi-bin/form.py", $output);
var_dump($output); 
```

我确定路径是正确的，并且 form.py 是可执行的。

这是form.py

```
#!/usr/bin/env python
print "IN form.py' 
```

但是，这会打印出 NULL。我不认为脚本正在执行。我如何确保它是？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:19:27.960

您实际上只是在输入文件的位置。您需要告诉 exec 使用该脚本执行 python。

```
exec("python ../cgi-bin/form.py", $output); 
```

# hibernate - 休眠映射

> ID：10937488
> 
> 赞同：1
> 
> 时间：2012-06-07T18:16:58.220
> 
> 标签：hibernate, mapping

我有一个使用代表发布者对象的“类”标签的休眠映射。发布者字段之一是一个非常大的描述（最大 30k 字符）。我正在使用最大为 4k 字符的 oracle varchar 字段，因此我被迫将我的描述拆分为 8 个不同的字段（我被迫使用 varchar 字段类型 btw）。我不想隐藏这个数据库的复杂性，并且我的发布者对象中只有 1 个描述字段。

到目前为止，我发现的唯一方法是在休眠中使用 8 个描述字段映射一个“transit”对象，我可以在只有 1 个描述的最终发布者对象中手动复制该对象。

有人有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:28:16.760

我想您可以使用 Hibernate 的自定义 UserTypes 来“神奇地”将列组合成一个值。

一些文档的这一部分讨论了如何在从表中检索数据时组合两列来创建自定义货币类。这可能会让你开始。

[http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html#types-custom](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html#types-custom)

我个人使用它从数据库中加载 blob，它工作得很好，一旦你将 UserType 写入并映射到你的数据库映射中，你的代码甚至不“知道”数据库中的实际物理类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:28:54.577

为单个值使用 8 个字段确实很难看，但无论如何......

Hibernate 使用对象。对象使用封装。在您的实体中提供公共`getDescription()`和`setDescription()`方法，并让这些方法将描述从/拆分到您的 8 个私有持久字段：

```
public String getDescription() {
    return join(desc1, desc2, ..., desc8);
}

public void setDescription(String description) {
    String[] s = split(description);
    desc1 = s[0];
    ...
    desc8 = s[7];
} 
```

# android - 谷歌地图需要很长时间才能加载

> ID：10937494
> 
> 赞同：1
> 
> 时间：2012-06-07T18:17:18.803
> 
> 标签：android, android-mapview, android-maps

当我尝试加载我的定制应用程序时，它需要很长时间才能找到我。我知道这将取决于网络提供商和 GPS。但是[地图](https://play.google.com/store/apps/details?id=com.google.android.apps.maps&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5nb29nbGUuYW5kcm9pZC5hcHBzLm1hcHMiXQ..)等一些应用程序可以更快地找到我（使用相同的设置和设备）。是因为我正在尝试免费来源的东西吗？来自 Google Inc 的订阅地图 API 会更快地加载地图吗？

有人遇到同样的问题吗？对解决方案有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:01:37.080

如果它最终获取了您的位置，那么它会变慢不是您的错（除非您将 requestLocationUpdates() 延迟设置得非常高，这是值得怀疑的）。我一直在我的几个应用程序中使用 GPS，我发现定位时间不到一秒钟，但我也看到在其他设备上需要 10 多分钟。

不过，我认为这不是您的地图的问题。当然，也许 Google 的地图 API 加载速度会快一点；但我认为这不是你的问题。

# android - Chris Banes 的 Android-PullToRefresh java.lang.NoSuchFieldError: com.handmark.pulltorefresh.library.R$id.pull_to_refresh_sub_text

> ID：10937496
> 
> 赞同：3
> 
> 时间：2012-06-07T18:17:27.080
> 
> 标签：android, gridview, refresh

我正在尝试使用[https://github.com/chrisbanes/Android-PullToRefresh/](https://github.com/chrisbanes/Android-PullToRefresh/)。我按照示例进行操作，但收到错误 java.lang.NoSuchFieldError: com.handmark.pulltorefresh.library.R$id.pull_to_refresh_sub_text

这是我的网格：

```
<com.handmark.pulltorefresh.library.PullToRefreshGridView
  xmlns:ptr="http://schemas.android.com/apk/res/com.abc.myproject"
  android:id="@+id/gv_image"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:listSelector="#00000000"
  android:padding="4dp"
  android:horizontalSpacing="4dp"
  android:verticalSpacing="4dp"
  android:gravity="center"
  android:numColumns="3"
  android:columnWidth="128px"
  android:stretchMode="columnWidth"
  ptr:ptrMode="pullDownFromTop"
  ptr:ptrDrawable="@drawable/android" /> 
```

当我运行时，我有上述异常。我将 PullToRefresh 添加为工作区中的另一个项目，并将其作为我的项目库。我还添加了 Jar 文件。我认为错误是因为 xmlns:ptr="http://schemas.android.com/apk/res/com.abc.myproject"?

我跟踪了代码，导致异常的行在 LoadingLayout.java 中： mSubHeaderText = (TextView) header.findViewById(R.id.pull_to_refresh_sub_text);

难道我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:27:56.670

Android SDK Tools r17 添加了对具有库中自定义属性的自定义视图的支持。使用自定义属性的布局必须使用命名空间 URI：

`http://schemas.android.com/apk/res-auto`

而不是包含应用程序包名称的 URI。在构建时，此 URI 将替换为特定于应用程序的 URI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:58:53.463

我遇到过同样的问题，

我所做的修复它是将对库的引用从列表的底部移动到列表的顶部。我认为我引用的某些内容与`R.java`.

您可以进行搜索`R.java`以`pull_to_refresh_sub_text`确保它已正确生成。

# java - 使用 java 将字符串插入到 datetime mysql 列中。

> ID：10937497
> 
> 赞同：0
> 
> 时间：2012-06-07T18:17:27.460
> 
> 标签：java, mysql, datetime, insert, calendar

MySQL 是否允许我将格式正确的字符串插入 MySQL 数据库中的数据时间字段？

我正在解析一个文件，结合 yyyyMMdd 格式的日期和 HHmmss 格式的时间，并计划将它们格式化为如下字符串：

```
 "yyyy-MM-dd HH:mm:ss" 
```

然后我想使用插入查询将此字符串插入到我的日期时间字段（其格式与上面的示例相同）。

如果这不是处理我的问题的正确方法，我应该使用什么方法？在查看 MySQL 文档后，我觉得只要格式正确，我就可以做到这一点。使用 Java 的 Calendar 和 Date 类似乎只会让我头疼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:23:45.497

这不是这样做的正确方法。正确的方法是使用 java.sql.Timestamp，并使用准备好的语句插入您的日期：

```
Date date = dateFormat.parse(s);
Timestamp timestamp = new Timestamp(date.getTime());
String sql = "insert into my_table (id, instant) values(?, ?)";
PreparedStatement stmt = connection.prepareStatement(sql);
stmt.setLong(1, id);
stmt.setTimestamp(2, timestamp);
stmt.executeUpdate(); 
```

这将使您的代码可移植，而不是绑定到任何语言环境或数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:20:42.290

如[手册中所述](http://dev.mysql.com/doc/en/date-and-time-literals.html)，此类日期时间文字有多种有效格式，包括您建议的格式。

所以是的，这将完全按照您的描述工作。但是请注意，您不需要添加额外的格式，因为您可以直接插入`YYYYMMDDHHMMSS`- 它甚至不需要作为字符串引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:23:54.957

是的，那会奏效。MySQL 使用该格式`yyyy-MM-dd HH:mm:ss`作为其默认格式，但如前所述，您可以使用许多其他格式。

如果您想检查有效日期，请尝试对日期执行幂等操作。

```
SELECT 'mydate' + INTERVAL 0 DAY 
```

如果 MySQL 向您返回相同的内容，则日期有效，否则 MySQL 将返回 NULL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:25:20.243

如果格式正确，您可以使用字符串。我在我的代码中执行此操作，并有一个 TimeUtil 类将 long 转换为 DB 的规定格式。

然后我可以简单地使用如下语句

```
stat.setString(10, TimeUtil.formatTime(message.submitTime)); 
```

# android - 从字符串转换为双精度

> ID：10937498
> 
> 赞同：0
> 
> 时间：2012-06-07T18:17:28.733
> 
> 标签：android, android-intent, android-widget

在这个用于计算行列式的应用程序中，我使用了一个 java 解析器形式：[http](http://www.speqmath.com/tutorials/expression_parser_java/index.html) ://www.speqmath.com/tutorials/expression_parser_java/index.html以允许用户输入数学表达式。但应用程序崩溃

```
secondo = new Button (this);
secondo.setText("Fill the matrix and CALCULATE");
tableLayout.addView(secondo);
secondo.setOnClickListener(new OnClickListener(){
public void onClick(View arg0) {

for (int i = 0; i < 3; i++){
for (int j = 0; j < 3; j++){

expr[i][j] = valore[i][j].getText().toString();  
matrix[i][j] = prs.parse(expr[i][j]);

}
}

for (int i = 0; i < 3; i++){
for (int j = 0; j < 3; j++){

int index1 = matrix[i][j].indexOf("=");

matrix1[i][j] = matrix[i][j].substring(index1+2);

}
}
for(int i = 0; i < 3; i++){
for(int j = 0; j < 3;  j++){

vettore1[i][j] = Double.parseDouble(matrix1[i][j]);
}
}

Matrix A = new Matrix(vettore1);
det = A.det(); 
```

这段代码给了我这个错误：

```
06-07 17:59:09.138: E/AndroidRuntime(2420): FATAL EXCEPTION: main
06-07 17:59:09.138: E/AndroidRuntime(2420): java.lang.NumberFormatException: 
06-07 17:59:09.138: E/AndroidRuntime(2420):     at org.apache.harmony.luni.util.FloatingPointParser.parseDblImpl(Native Method)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:283)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at java.lang.Double.parseDouble(Double.java:287)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at java.lang.Double.valueOf(Double.java:326)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at it.bisemanuDEV.matrixDET.SecondaAttivita$1.onClick(SecondaAttivita.java:143)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at android.view.View.performClick(View.java:2408)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at android.view.View$PerformClick.run(View.java:8819)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at android.os.Handler.handleCallback(Handler.java:603)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at android.os.Looper.loop(Looper.java:123)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at android.app.ActivityThread.main(ActivityThread.java:4627)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at java.lang.reflect.Method.invokeNative(Native Method)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at java.lang.reflect.Method.invoke(Method.java:521)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-07 17:59:09.138: E/AndroidRuntime(2420):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:24:23.557

将无效字符串转换为数字时会发生Generall **NumberFormatException**

例如： `matrix1[i][j]="21.21"`那没关系

但如果 `matrix1[i][j]="a21.21"` `<--`它会给你**NumberFormatException**

在你的情况下`vettore1[i][j] = Double.parseDouble(matrix1[i][j]);`

尝试通过打印值来检查您的响应字符串使用`LOG`或`System.out.println(matrix1[i][j]);` 测试您的所有响应值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:25:05.483

将此行放入 try catch 中，因为字符串中可能存在非数字字符

```
if(matrix1[i][j]!=null && matrix1[i][j].trim().length()>0)
try{
             vettore1[i][j] = Double.parseDouble(matrix1[i][j].trim());
}catch(NumberFormatException nfe){

   //Toast here the string matrix1[i][j] to check 
 } 
```

# java - Java编译错误加载类路径

> ID：10937499
> 
> 赞同：1
> 
> 时间：2012-06-07T18:17:33.267
> 
> 标签：java, ant, compiler-errors, javac

我正在尝试编译我的 java 文件。我知道在这种情况下使用 ant 是最好的解决方案。但是我的项目是一次性部署的，我不使用 ant 来使用它。

学习基本的将是基本的时间。

我有一个文件夹名称项目，它包含子目录

项目 -src 包含源文件（.java 文件） -bin（包含类文件的目标位置） -lib（包含我用于项目的外部库 (*.jar)）

我在控制台上使用以下命令（通过 Windows，而不是在 Linux 上）

```
javac -cp lib\*.jar -d bin src\com\fgh\www\*.java 
```

编译器仍然无法找到库。

```
Package com.** does not exist 
```

任何关于相同的输入都会很棒。谢谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:24:52.503

采用`javac -cp "lib\*" -d bin src\com\fgh\www\*.java`

另请阅读[在 java 类路径中使用通配符](https://stackoverflow.com/questions/10847850/using-wildcards-in-java-classpath/10847949#10847949)

# javascript - 灯箱中的可见性按钮

> ID：10937500
> 
> 赞同：0
> 
> 时间：2012-06-07T18:17:35.383
> 
> 标签：javascript, jquery, css

当值为 0 或 JavaScript 中数组中的最高数字时，我的可见性有问题

这是我的代码...

```
 <!-- script fotoviewer -->
<script>

$("#fotoviewerclick").click(function(){
$("#wrapper").fadeIn(1000);
$("#lightbox").fadeIn(1000);
})

$("#lightboxbtnclose").click(function(){
$("#wrapper").fadeOut(400);
$("#lightbox").fadeOut(400);
})

$("#wrapper").click(function(){
$("#wrapper").fadeOut(400);
$("#lightbox").fadeOut(400);
})

var imagenumber = 0;
var imagenumber_count = 1;
var imagenumber_total_count = imagelist.length;
document.getElementById('counter_total').innerHTML = imagelist.length;

function btnleft(){
    var load = imagelist[imagenumber-=1];
    if (imagenumber_count > 1){imagenumber_count -= 1; document.getElementById('counter').innerHTML = imagenumber_count;}
    if (load) // imagenumber in array boundaries
        document.getElementById('lightboxcontent').innerHTML = load;
    else
        imagenumber = 0;
 }
 function btnright(){
    if (imagenumber_count < imagenumber_total_count) {
    imagenumber_count += 1;
    document.getElementById('counter').innerHTML = imagenumber_count;
  }
    var load = imagelist[imagenumber+=1];
    if (load){ // imagenumber in array boundaries
        document.getElementById('lightboxcontent').innerHTML = load;
   }
    else{
        imagenumber = imagelist.length-1;}
 }
</script> 
```

当第一张照片出现在查看器中时，我不想要上一张。显示按钮，并且当我在最后一张图片上时，下一个按钮不会显示

有谁能帮助我吗？

谢谢！！

*PS.：对不起我的英语不好，我来自比利时*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:52:03.053

基本逻辑是

如果您的 imagenumber_count 达到 0 则可见性：左按钮隐藏，否则可见性：可见

如果您的 imagenumber_count 与总图像数相同，则右键可见性：隐藏，否则可见性：可见

# iphone - iPhone横屏时如何调用另一个视图

> ID：10937503
> 
> 赞同：0
> 
> 时间：2012-06-07T18:17:40.927
> 
> 标签：iphone, ios

![Second View its main gallery view][1] 你好，我正在尝试在设备处于横向时调用一个新的视图控制器。这是一个带有滚动视图的图片库，问题是我想在不同的位置显示图片库，但我不知道如何。我正在使用带有故事板的 Xcode 4.3，所以它与我认为的旧版本有点不同。

感谢您的帮助。！[这是没有横向代码的外观，滚动消失] [2]这就是我调用另一个视图的原因

当！我不允许发布图片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:29:02.633

在情节提要中制作横向视图。在检查器中添加一个标识符，如 LandscapeView。然后，在你原来的视图控制器中，导入横向视图的视图控制器的头文件：

```
#import "LandscapeViewController.h" //Change to whatever your file is called 
```

并像这样修改以下方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    LandscapeViewController *landscapeView = [self.storyboard instantiateViewControllerWithIdentifier:@"LandscapeView"]; //change LandscapeViewController to the correct name and change LandscapeView to the correct identifier
    landscapeView.modalTransitionStyle = UIModalTransitionStyleCrossDissolve; //Or whatever transition you want

    [self presentModalViewController:landscapeView animated:NO];
    return YES;
} 
```

然后，在横屏视图的视图控制器中，修改同样的方法如下：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    [self dismissModalViewControllerAnimated:NO];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:27:56.623

您可以使用以下方法检测方向：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(detectOrientation) name:@"UIDeviceOrientationDidChangeNotification" object:nil]; 
```

然后您可以编写一个函数，以便在检测到更改时继续使用新的 ViewController：

```
-(void) detectOrientation {

    if (([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft) || ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight)) {
    {
        if(!self->wasInLandscape)
        {
            [self performSegueWithIdentifier:@"Landscape Segue" sender:self];
            self->wasInLandscape = YES;
        }

    } else if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationPortrait || [[UIDevice currentDevice] orientation] == UIDeviceOrientationPortraitUpsideDown) 
    {

        if(self->wasInLandscape)
        {
            [self dismissModalViewControllerAnimated:NO];
            self->wasInLandscape = NO;
        }

    }   
} 
```

有了这个，我将 segue 设置为没有动画的模态 segue，因此它只会在您切换时呈现出来。当`wasInLandscape` `BOOL`我们已经在当前位置时，用于确保我们不会解雇或执行 segues。

# jquery - 在 iphone - jquery 打开/关闭嵌套导航

> ID：10937505
> 
> 赞同：2
> 
> 时间：2012-06-07T18:17:58.387
> 
> 标签：jquery, iphone, nav

我正在构建一个顶部有嵌套导航的移动网站。我希望在用户点击其父 li 时弹出子导航。这是我的麻烦：当点击子导航的任何其他内容时，我需要关闭它，包括最初打开它的 li。

我试过的：

*   fadeToggle 和其他切换：子导航仅在再次点击父 li 时关闭。
*   hover()：根本不会关闭子导航。

我的导航样例：

```
<ul>
    <li id="open"><a href="#">one</a>
        <nav><ul>...</ul></nav>
    </li>
    <li>...</li>
</ui> 
```

这是我尝试过的悬停 jquery：

```
$("li#open").hover(
    function (event) { 
    event.preventDefault(); $("nav").show(); },
    function (event) { 
    event.preventDefault(); $("nav").hide(); }
); 
```

我对 jquery 和 javascript 编写自己的函数不够满意，但必须有某种方法来编写一个会说，除了“nav”之外的任何东西都会隐藏“nav”。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:34:46.410

我会做这样的事情

```
$("li#open").click(function (event) { 
    // prevent default
    event.preventDefault();
    // if #open has class active, then remove it if not then add it
    if($(this).hasClass("active")) {
        $(this).removeClass("active");
    }
    else {
        $(this).addClass("active");
    }
);

$(document).click(function() {
    // if #open has class active then remove it
}); 
```

活动类应该显示菜单，默认情况下菜单不显示。这样，当您添加活动课程时，菜单将显示

如果您有多个项目，这适用于一个菜单项，那么代码需要更改一下。如果这仅适用于 iOS，那么您可以使用 touchstart 和 touchend 而不是 click

```
$("li#open").live('touchstart', function (event) { // function content } 
```

当你触摸屏幕时触发touchstart，当你的手指离开屏幕时触发touchend

# c# - 如何正确地将实例引用传递给另一个类的构造函数？

> ID：10937508
> 
> 赞同：0
> 
> 时间：2012-06-07T18:18:03.240
> 
> 标签：c#, garbage-collection, pass-by-reference

我只是在编写一个聊天应用程序（服务器），但我遇到了问题。

服务器接受连接，`TcpClient`然后创建`Connection`类的新实例并将`TcpClient`' 引用传递给它。这个新`Connection`实例保存了参考以供将来使用。然后将新`Connection`实例添加到`Users`列表中。

让我们看看伪代码：

```
while(true)
{
    // 1\. Accept connection into new Client instance
    Client = new TcpClient()
    Client = AcceptTcpClient();
    // 2\. Create new Connection object and pass Client's reference to it.
    Connection abc = new Connection(Client);

    // Add new user to users collection
    Users.Add(Connection);
} 
```

现在该`abc`实例引用了 Client 对象。直到这里一切正常，但每次 while() 循环进入下一次迭代时，我都可以在调试器中看到 Client 实例已被处理（我想是由垃圾收集器处理的）。

因此，当另一个迭代开始时，列表中的所有`Connection`实例`Users`都可以，但它们对引用的`TcpClient`引用只是回收的实例。因此连接立即关闭，无法进行任何工作。

你知道问题出在哪里吗？感谢您的回答。

您可能需要确切的源代码 - 如果需要，我当然可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:59:57.937

它不是一个单一的连接。

这里有两件事重叠。

“连接”取决于要创建的客户端，并且您正在创建多个客户端和多个各自的连接。

您可以通过使用空引用来欺骗垃圾收集器，并在循环外声明变量：

```
public void Dummy(ref Connection AConnection, ref TcpClient AClient)
{
  AConnection = null;
  AClient = null;
} // void Dummy(...)

public void Example()
{
  TcpClient Client = null;
  Connection abc = null;

  while(true)
  {
      // 1\. create new Client instance, WITHOUT connection
      Client = new TcpClient()
      //Client = AcceptTcpClient();

      // 2\. Create new Connection object that requires Client's reference to it.
      Connection abc = new Connection(Client);

      // Add new user to users collection
      Users.Add(abc);

      // uncomment only when debugging
      Dummy(ref abc, ref Client)
  } // while

  // uncomment only when debugging
  Client = null;
  abc = null;
} // void Example(...) 
```

干杯。

# c# - 异常构造器类

> ID：10937509
> 
> 赞同：0
> 
> 时间：2012-06-07T18:18:07.780
> 
> 标签：c#

当我使用它时是否相同：

```
catch(Exception e)
{
    throw new Exception("some Exception", e);
} 
```

还有这个：

```
catch(Exception e)
{
   throw new Exception("some Exception", e.InnerException);
} 
```

还是我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T18:20:20.763

在您的第二个示例中，您将丢弃捕获的异常并使用其内部异常。您通常会像在第一个示例中那样进行编码。

在第一种情况下，捕获的异常 ( `e`) 成为`InnerException`您抛出的新异常：

```
catch(Exception e)
{
    throw new Exception("some Exception", e);
} 
```

在第二种情况下，您使用的是`InnerException`of `e`，并且来自的数据`e`丢失了：

```
catch(Exception e)
{
   throw new Exception("some Exception", e.InnerException);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T18:21:21.090

第一个例子一般来说更正确。当您由于另一个异常而引发新异常时，您应该将原始异常包含为新异常的内部异常。

但这并不是普遍正确的。在某些非常特殊的情况下，当您想要撤消另一个代码对实际错误的包装时，它**可能很有用。**

```
try {
  // some reflection call 
} catch (TargetInvocationException e) {
  // Reduce the layers of data a developer has to dig through by using the real
  // exception when I re-wrap
  throw new MyException("some message", e.InnerException);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T18:33:47.143

重新抛出异常有三种方式：

```
catch (Exception ex)
{
    throw;
} 
```

抛出原始异常并保留原始堆栈跟踪。

```
catch (Exception ex)
{
    throw ex;
} 
```

抛出原始异常，但原始堆栈跟踪丢失。堆栈跟踪现在将此行显示为异常的发起者。

```
catch (Exception ex)
{
    throw new Exception("...", ex);
} 
```

抛出一个新异常，但保留原始异常及其堆栈跟踪作为`InnerException`新异常的。

第一种情况很有用，您需要清理失败而不是成功。如果您需要在这两种情况下进行清理，您将使用 finally 子句，而不是 catch 子句。或者您只是想记录此处发生的异常并让调用者处理它。

第二种情况根本没有用。为什么要隐藏堆栈跟踪？可能有一些罕见的情况，这是有用的，但我不知道。

当您想要返回单一类型的异常（或类型族）时，最常使用第三种情况。例如，您是一个文本解析方法，并且您希望将所有（非致命）异常转换为 ParseException（或其他），它提供额外的详细信息，例如发生异常的文本中的行号。

在您提供的第二个示例中，被捕获的异常被完全丢弃。产生了一个新的异常，原来异常的 InnerException 变成了这个新异常的 InnerException。我可以想象没有任何场景可以剥离中间异常。

# python - gnuplot：第 1 行：无效命令

> ID：10937510
> 
> 赞同：2
> 
> 时间：2012-06-07T18:18:09.280
> 
> 标签：python, command, cygwin, gnuplot

大家好，stackoverflow 上所有可爱的人，

我正在尝试使用 gnuplot 绘制数据。我首先阅读表格并提取我想要的数据。我将此数据写入 .dat 文件。截至目前，我只是试图通过命令行绘制它，但会在它工作后添加必要的代码以从 python 脚本中绘制它。

我创建 .dat 文件的代码-

```
#!/usr/bin/python

file = open("test_m.rdb")
table = open('table.dat', 'w+')

trash = file.readline()

trash = file.readline()

data = file.readline()
i = data.split()
flux = i[2]
observed = i[4]
table.write(flux + " " + observed,)

while 1:
    line = file.readline()
    i = line.split()
    try:
        flux = i[2]
        observed = i[4]
    except IndexError:
        break
    table.write("\n" + flux + " " + observed)
    table.close() 
```

我试图在 cygwin 中使用的命令和错误-

```
gnuplot plot table.dat

0.058 2
^
"table.dat", line 1: invalid command 
```

先感谢您。我很感激你能提供的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:24:16.813

你可能想要：

```
gnuplot --persist -e 'plot "table.dat" u 1:2' 
```

使用您的命令，gnuplot 正在查找要在名为“plot”的文件中运行的命令，然后在名为“table.dat”的文件中运行。'table.dat' 没有要运行的命令，它有要绘制的*数据。*使用“-e”与将单引号中的内容放入临时文件（称为 temp.gp）然后执行`gnuplot temp.gp`. 这`--persist`使得情节保持在你的屏幕上（你会想要的，因为我怀疑你是否将它保存到文件中）。要了解如何将其保存到文件中，请在 gnuplot 中执行 ：`help set term`和.`help set output``set term`

**编辑**

我对cygwin不太了解，所以我不知道默认终端是什么（或将启用哪些终端）。

有几件事要尝试：

```
gnuplot -e 'plot "table.dat" u 1:2; pause -1'  #this should leave your plot open until you hit return 
```

将命令放在文件中

```
#tmp.gp
set term postscript enh color
set output "tmp.ps"
plot "table.dat" u 1:2 
```

现在运行它：

```
gnuplot tmp.gp 
```

然后使用您拥有的任何工具打开后记以查看后记——我经常使用`gv`，但我不知道 cygwin 上有什么。

```
gv tmp.ps & 
```

# c - C套接字多个本地ip

> ID：10937511
> 
> 赞同：0
> 
> 时间：2012-06-07T18:18:11.393
> 
> 标签：c, linux, sockets

我们的服务器上有**N 个**本地 IP。我需要使用其中之一创建套接字连接。我怎样才能做到这一点 ？

```
fd = socket(AF_INET, SOCK_STREAM, 0);
connect(fd, (struct sockaddr*)addr, sizeof(*addr));
// ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:19:51.043

`bind()`在连接之前将套接字连接到适当的本地地址。

# php - 更新数据库时使用 $_GET

> ID：10937517
> 
> 赞同：-1
> 
> 时间：2012-06-07T18:18:22.933
> 
> 标签：php, mysql

我是 PHP 新手，所以听起来可能很愚蠢。

我正在尝试更新数据库，这是我到目前为止的代码。

```
$pulldown = CleanUserInput($_GET['q']);
$name = CleanUserInput($_POST['name']);

$result = mysql_query("UPDATE Suppliers SET SuppName = ('$name') 
WHERE SuppName = ('$pulldown')"); 
```

如何使用 $_GET 设置它将更新的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:21:27.910

假设您的变量已正确传递给此脚本，则脚本的第 3 行应如下所示：

```
$result = mysql_query("UPDATE Suppliers SET SuppName = '".$name."' WHERE SuppName = '".$pulldown."';") or die(mysql_error()); 
```

要通过 $_GET 变量设置要更新的列名，您的代码可能如下所示：

```
$pulldown = CleanUserInput($_GET['q']);
$name = CleanUserInput($_POST['name']);
$column_name = CleanUserInput($_GET['column_name']);
$result = mysql_query("UPDATE Suppliers SET `".$column_name."` = '".$name."' WHERE `".$column_name."` = '".$pulldown."';") or die(mysql_error()); 
```

当然，这将替换变量列中的值`$column_name`。不确定这是否是您想要做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:22:20.953

如果您的表单具有`<form method="post">`，并且您的`<input>`（或`<select>`）元素之一具有`name="q'`属性，那么您会在`$_POST`，而不是中找到它`$_GET`。虽然在技术上可以通过将查询字符串附加到表单属性中的 url来混合`GET`和形成表单，但我怀疑这就是您在这里尝试做的事情。`POST``action`

作为旁注，您的代码看起来容易受到[SQL Injection](https://www.owasp.org/index.php/Top_10_2010-A1)的攻击。您应该改用参数化查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:21:56.040

简短的回答：

```
$column = CleanUserInput($_POST['column']);
$result = mysql_query("UPDATE Suppliers SET $column = '$name' WHERE SuppName = '$pulldown'"); 
```

但你应该确保你没有 sql 注入问题。确保 CleanUserInput 将您从那里拯救出来！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:39:41.383

```
$result = mysql_query("UPDATE Suppliers SET SuppName = '{$name}' 
WHERE SuppName = '{$pulldown}'"); 
```

使用此查询..您的代码中有语法错误

# asp.net - 我应该如何将多个参数传递给 ASP.Net Web API GET？

> ID：10937524
> 
> 赞同：141
> 
> 时间：2012-06-07T18:18:48.640
> 
> 标签：asp.net, asp.net-mvc, rest, asp.net-mvc-4, asp.net-web-api

我正在使用 .Net MVC4 Web API 来（希望）实现一个 RESTful api。我需要将一些参数传递给系统并让它执行一些操作，然后返回一个对象列表作为结果。具体来说，我传递了两个日期并返回它们之间的记录。我还在跟踪返回的记录，以便后续调用不会在系统中重新处理。

我考虑了几种方法：

1.  将参数序列化为一个 JSON 字符串并在 API 中将其分开。 [http://forums.asp.net/t/1807316.aspx/1](http://forums.asp.net/t/1807316.aspx/1)

2.  传递查询字符串中的参数。
    [将多个查询参数传递给restful api的最佳方法是什么？](https://stackoverflow.com/questions/2640560/what-is-best-way-to-pass-multiple-query-parameters-to-a-restful-api)

3.  在路由中定义参数：api/controller/date1/date2

4.  使用本来就可以让我通过参数传递对象的 POST。

5.  研究 ODATA，因为 Web API（当前）支持它。我还没有做太多，所以我对它不是很熟悉。

似乎正确的 REST 实践表明何时提取数据，您应该使用 GET。但是，GET 也应该是无效的（不会产生副作用），我想知道我的具体实现是否违反了这一点，因为我在 API 系统中标记了记录，因此我产生了副作用。

这也让我想到了支持可变参数的问题。如果输入参数列表发生变化，那么如果这种情况经常发生，那么必须为选择 3 重新定义您的路线会很乏味。如果在运行时定义参数可能会发生什么......

无论如何，对于我的具体实现，哪种选择（如果有）似乎最好？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2014-11-04T20:07:01.093

我认为最简单的方法是简单地使用`AttributeRouting`.

在您的控制器中很明显，您为什么要在全局`WebApiConfig`文件中使用它？

例子：

```
 [Route("api/YOURCONTROLLER/{paramOne}/{paramTwo}")]
    public string Get(int paramOne, int paramTwo)
    {
        return "The [Route] with multiple params worked";
    } 
```

`{}`名称需要与您的参数匹配。

就这么简单，现在你有一个单独`GET`的在这个实例中处理多个参数。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-05-14T22:19:00.007

只需向`WebApiConfig`条目添加一条新路由。

例如，调用：

```
public IEnumerable<SampleObject> Get(int pageNumber, int pageSize) { .. 
```

添加：

```
config.Routes.MapHttpRoute(
    name: "GetPagedData",
    routeTemplate: "api/{controller}/{pageNumber}/{pageSize}"
); 
```

然后将参数添加到 HTTP 调用中：

```
GET //<service address>/Api/Data/2/10 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2012-09-26T08:04:18.397

我只需要在需要传递参数的地方实现一个 RESTfull api。我通过传递查询字符串中的参数以与 Mark 的第一个示例“api/controller?start=date1&end=date2”所描述的相同的样式来做到这一点

在控制器中，我使用了[C# 中 URL 拆分的提示？](https://stackoverflow.com/questions/1029909/url-split-in-c)

```
// uri: /api/courses
public IEnumerable<Course> Get()
{
    NameValueCollection nvc = HttpUtility.ParseQueryString(Request.RequestUri.Query);
    var system = nvc["System"];
    // BL comes here
    return _courses;
} 
```

就我而言，我通过 Ajax 调用 WebApi，如下所示：

```
$.ajax({
        url: '/api/DbMetaData',
        type: 'GET',
        data: { system : 'My System',
                searchString: '123' },
        dataType: 'json',
        success: function (data) {
                  $.each(data, function (index, v) {
                  alert(index + ': ' + v.name);
                  });
         },
         statusCode: {
                  404: function () {
                       alert('Failed');
                       }
        }
   }); 
```

我希望这有帮助...

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2013-08-22T09:56:03.417

我在[http://habrahabr.ru/post/164945/上找到了出色的解决方案](http://habrahabr.ru/post/164945/)

```
public class ResourceQuery
{
   public string Param1 { get; set; }
   public int OptionalParam2 { get; set; }
}

public class SampleResourceController : ApiController
{
    public SampleResourceModel Get([FromUri] ResourceQuery query)
    {
        // action
    }
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-06-07T19:15:06.307

这个记录标记是什么意思？如果这仅用于记录目的，我将使用 GET 并禁用所有缓存，因为您希望记录此资源的每个查询。如果记录标记有其他目的，那么 POST 就是要走的路。用户应该知道，他的行为会影响系统，POST 方法是一个警告。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-06-08T10:53:41.647

*@LukLed*清楚地解释了使用*GET*或*POST*。关于传递参数的方式，我建议使用第二种方法（我对*ODATA*也不太了解）。

 **> 1.将参数序列化为一个 JSON 字符串并在 API 中将其分开。[http://forums.asp.net/t/1807316.aspx/1](http://forums.asp.net/t/1807316.aspx/1)

这不是*用户友好*和*SEO 友好的*

> 2.传递查询字符串中的参数。将多个查询参数传递给restful api的最佳方法是什么？

这是通常的首选方法。

> 3.定义路由中的参数：api/controller/date1/date2

这绝对不是一个好方法。这让人觉得有些人`date2`是一个子资源，`date1`但事实并非如此。`date1`和都是`date2`查询参数，属于同一级别。

在简单的情况下，我会建议这样的 URI，

```
api/controller?start=date1&end=date2 
```

但我个人喜欢下面的 URI 模式，但在这种情况下，我们必须编写一些自定义代码来映射参数。

```
api/controller/date1,date2 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-10-19T03:36:19.347

使用这里完全描述的参数绑定：[http ://www.asp.net/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api](http://www.asp.net/web-api/overview/formats-and-model-binding/parameter-binding-in-aspnet-web-api)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-08-23T13:20:15.010

```
 [Route("api/controller/{one}/{two}")]
    public string Get(int One, int Two)
    {
        return "both params of the root link({one},{two}) and Get function parameters (one, two)  should be same ";
    } 
```

根链接的参数({one},{two}) 和Get 函数参数(one, two) 应该相同

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-04-04T19:02:47.010

我知道这真的很老了，但我最近也想要同样的东西，这就是我发现的......

```
 public HttpResponseMessage Get([FromUri] string var, [FromUri] string test) {
        var retStr = new HttpResponseMessage(HttpStatusCode.OK);
        if (var.ToLower() == "getnew" && test.ToLower() == "test") {
            retStr.Content = new StringContent("Found Test", System.Text.Encoding.UTF8, "text/plain");
        } else {
            retStr.Content = new StringContent("Couldn't Find that test", System.Text.Encoding.UTF8, "text/plain");
        }

        return retStr;
    } 
```

* * *

所以现在在你的地址/URI/...

http(s)://myURL/api/myController/?var=getnew&test=test

结果：“找到测试”

* * *

http(s)://myURL/api/myController/?var=getnew&test=anything

结果：“找不到该测试”

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-10-17T13:14:44.193

现在你可以通过简单地使用来做到这一点

```
 public string Get(int id, int abc)
        {
            return "value: " + id + "  " + abc;
        } 
```

这将返回：“值：5 10”

如果你用[https://yourdomain/api/yourcontroller?id=5&abc=10](https://yourdomain/api/yourcontroller?id=5&abc=10)**调用它**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-02-15T07:45:23.870

```
 public HttpResponseMessage Get(int id,string numb)
    {
        //this will differ according to your entity name
        using (MarketEntities entities = new MarketEntities())
        {
          var ent=  entities.Api_For_Test.FirstOrDefault(e => e.ID == id && e.IDNO.ToString()== numb);
            if (ent != null)
            {
                return Request.CreateResponse(HttpStatusCode.OK, ent);
            }
            else
            {
                return Request.CreateErrorResponse(HttpStatusCode.NotFound, "Applicant with ID " + id.ToString() + " not found in the system");
            }
        }
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-15T16:47:00.627

这段代码对我有用。然后我可以在 URL http://.../api/GetSomething?paramOne=1¶mTwo=2 上使用常规查询字符串

.NET 6 核心

```
[Route("api/GetSomething")]
public IActionResult GetSomething(int paramOne, int paramTwo)
{
    ...    
    return Content(jsonData);
} 
```

而不是执行以下操作 [Route("api/GetSomething/{paramOne}/{paramTwo}")]**

# c# - C# 中的提供者模型依赖注入实现

> ID：10937529
> 
> 赞同：1
> 
> 时间：2012-06-07T18:19:14.480
> 
> 标签：c#, architecture, dependency-injection, provider-model

我有一个建筑情况，我想得到一个意见。

我有一个正在开发的扑克系统。目前我有许多不同类型的游戏目前由不同的类处理（当然有一个通用的接口）。

游戏包括德州扑克、Omaha Hi、Omaha Hi/Lo、7-Card Stud、7-Card razz、London Lowball 和 Follow the Queen。我希望将来会有更多。

目前，我使用的是提供者模型，类似于 SQL 连接字符串。交易是，所有游戏的类型名称都位于 app.config 文件中。

我正在考虑将类型放入数据库中，这样就不需要触及配置文件。然后当我开发一个新游戏时，安装程​​序只需复制一个新的 DLL 并调用一个脚本来将游戏的类型插入数据库中。

有没有更好的方法来动态允许这种类型的依赖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:33:27.623

也许您甚至可以在不需要更新数据库的情况下做到这一点。既然您将一款游戏放在一个 DLL 中，为什么不在 DLL 元数据中包含游戏名称。例如，您可以将游戏名称作为类的属性：

```
[Game("Texas Hold Em")]
public class TexasHoldEm : Game
{
} 
```

加载游戏插件可以如下完成：

```
string pluginDirectory =
    Path.Combine(AppDomain.CurrentDomain.BaseDirectory, 
        "Plugins");

var pluginAssemblies =
    from file in new DirectoryInfo(pluginDirectory).GetFiles()
    where file.Extension == ".dll"
    select Assembly.LoadFile(file.FullName);

var gameTypes =
    from dll in pluginAssemblies
    from type in dll.GetExportedTypes()
    where typeof(Game).IsAssignableFrom(type)
    where !type.IsAbstract
    where !type.IsGenericTypeDefinition
    select type; 
```

如果您使用依赖注入容器，您通常可以轻松地将它们注册`gameTypes`到容器中。但是，您可能无论如何都需要某种工厂来获得正确的游戏：

```
public interface IGameFactory
{
    IEnumerable<Game> GetGames();

    Game GetGame(string name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:30:09.873

我认为这是解决您的问题的一种非常可靠的方法。关于在数据库中存储类名，您有什么特别不喜欢的吗？

# sql-server - SQL Server BIDS 主键列

> ID：10937530
> 
> 赞同：0
> 
> 时间：2012-06-07T18:19:16.803
> 
> 标签：sql-server, bids

在 BIDS 中，我有一个 excel 源和一个 OLE 数据库目标。但是，在我的 OLE 数据库中，我有一个未从我的 excel 源映射到的主键 id 字段。如何创建要插入到我的主键 id 字段的值？

我以前从未使用过 BIDS，所以如果您需要任何其他信息或更好的解释，请告诉我 :)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:22:20.327

如果您的主键列是`IDENTITY`，那么如果您不指定值，它将自动填充

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:42:05.143

在您`OLEDB Destination`选择`table or view`要从 excel 源加载数据的位置 -> 移动到`column mapping tab`您可以根据您的要求实际**映射**列的位置。

# jquery - JQuery - 从隐藏 div 内的输入字段中获取值

> ID：10937533
> 
> 赞同：3
> 
> 时间：2012-06-07T18:19:21.830
> 
> 标签：jquery

会`$('#some-field').val()`返回“某物”还是空字符串？我假设无论 div 是否可见，它都会返回该值。但我一直在得到空字符串。任何想法？

```
<div style="display:none;">
    <form>
        <input id="some-field" type="text" value="something" />
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:20:12.313

尝试这个：

```
$('div:hidden #some-field').val(); 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/173/)**

即使`$('#some-field').val();`元素属于 DOM，也可以使用，因为可见性不会影响。

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/174/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T18:20:35.163

它会返回`something`。由于可见性仍然存在于 DOM 中，因此可见性不会成为检索值的因素。

# web - 我需要一个软件分发平台

> ID：10937534
> 
> 赞同：2
> 
> 时间：2012-06-07T18:19:27.570
> 
> 标签：web, software-distribution

好的，所以我正在制作一些小型应用程序，并且我想托管一个网站来分发它们。

现在我将免费赠送我的程序，但稍后我计划以低价出售其中一些。

要做到这一点，我需要一个网站，我有主机 我有域名但我没有网络软件，我想要一些关于使用哪些软件的建议。

首先我尝试了joomla，但这并不好，因为它管理起来很烦人，并且不允许跟踪下载量。

然后我尝试了磁铁，这很好，但它似乎不允许即时下载免费软件（用户必须通过结帐过程）。

然后我想也许我会像谷歌代码或其他东西一样使用，也可以管理我的源代码，但这只允许开源软件

所以是的，欢迎任何建议

tl;dr：我需要一个平台来分发我的软件，在该平台上可以跟踪下载并允许用户快速下载软件

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-10T15:08:05.967

我不确定您是否探索过有趣的分发平台，例如[OptimumInstaller](http://optimuminstaller.net/publishers/)。现在除了臭名昭著的 Playstore 之外，还有一些专注于移动应用程序。

# html - 通过VBScript将word文档附加到lotus notes邮件正文时如何保留格式？

> ID：10937537
> 
> 赞同：0
> 
> 时间：2012-06-07T18:19:39.440
> 
> 标签：html, vbscript, ms-word, formatting, lotus-notes

我正在尝试自动化一个邮件系统，在该系统中，编辑过的 word 文档将通过 Lotus Notes 邮寄给许多人。

我正在使用以下代码来执行此操作。此代码工作正常，只是它在作为邮件发送时丢失了所有格式（例如粗体、斜体、段落等）。

```
Set objRange = ob_doc.Content
mailtext = ob_word.CleanString(objRange.Text)

'Create the mail document
Set notesDocument = notesDatabase.CreateDocument
'set to memo format
notesDocument.Form = "Memo"
'Set the subject
notesDocument.Subject = subject
'Set the body
Set notesRichTextItem = notesDocument.CreateRichTextItem("Body")
notesRichTextItem.AppendText(mailtext) 
```

...在做了一些研究之后，我尝试将 word doc 转换为 html 以保持格式不变，但我无法将该 html 文件作为邮件正文邮寄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:58:59.590

您需要使用 Notes 中的 MimeEntity 类以 HTML 格式发送电子邮件。有关更多信息，请参阅此 SO 答案： [从 Excel VBA 发送格式化的 Lotus Notes 富文本电子邮件](https://stackoverflow.com/questions/3263343/sending-formatted-lotus-notes-rich-text-email-from-excel-vba)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:20:52.780

或者您可以将 Word 文档作为附件发送。它没有那么优雅，但代码很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T13:06:27.803

如果您希望 Word 文档以与 MS Word 中相同的方式出现在 Notes 客户端（或任何其他电子邮件客户端）中，您会感到头疼。最接近的解决方案是使用 MS Word 将文档保存为 HTML（如您所提到的），然后使用 Notes MIME 类使用 Word 生成的 HTML（如 Ken 提到的）创建电子邮件。您将面临的最大问题是 Word 使用样式的方式。不同的电子邮件客户端对样式有不同的要求，Notes 相当挑剔——例如，所有样式都必须是内联的（不是全局的或外部的），Word 不会这样做。

# javascript - 我应该使用 Javascript、CSS 还是隐藏控件呈现的图像？

> ID：10937540
> 
> 赞同：0
> 
> 时间：2012-06-07T18:19:45.983
> 
> 标签：javascript, jquery, css, reportviewer, server-side

我想隐藏 ReportView 控件的背景图像，`toolbar_bk.png` 通过说隐藏实际上我想将其设置为无。

那我怎么能轻松做到呢？服务器端、CSS、Javascript 还是更好的 JQUERY？我完全迷失了这个。

这是渲染的部分

```
<div id="ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolder1_ReportViewer1_ctl05" 
  style="font-family:Verdana;font-size:8pt;border-bottom:1px #CCCCCC Solid;
  background-color:#F7F7F7;
  background-image:url(/domain-name.com/Reserved.ReportViewerWebControl.axd?
  OpType=BackImage&Version=10.0.40219.329&
  Color=%23F7F7F7&Name=Microsoft.Reporting.WebForms.Icons.toolbar_bk.png);"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:24:40.617

请注意，隐藏您的元素或显示您的背景等始终是 CSS。您可以将它内联、放入外部文件或通过脚本语言（即 JavaScript）动态创建它，最终使用 JavaScript 库作为 jQuery。

对于您的问题：只是不要创建内联样式服务器端，一切都很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:26:52.417

我不确定这是你想要的。不过这里有一个答案..

用自己的 div 包裹它们。让我们给那个 div 一个“包装器”类。在 css 端粘贴这个：

.wrapper * { 背景图像：无；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:26:33.450

使用 jQuery，您只需执行以下操作：

```
$('#ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolder1_ReportViewer1_ctl05').css('background-image', 'none'); 
```

仅使用普通的javascript：

```
document.getElementById('ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolder1_ReportViewer1_ctl05').style.backgroundImage = 'none'; 
```

在页面或外部样式表中使用 css：

```
#ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolder1_ReportViewer1_ctl05 { background-image:none !important} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:31:07.797

1.  最佳选项——将服务器控件配置为不设置背景图像。
2.  如果 #1 不可行，您可以编写 JavaScript 以在加载 HTML 后对其进行操作。

如果您需要使用选项 2，这是一个 jQuery 示例：

```
$('[id~="ReportViewer1"]').css('background-image', 'none'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T05:32:22.437

使用jquery`addClass()`函数如下

```
<style>
            .report
            {
                background-color: #D6E3F3;
                /* background-image: url("/Reserved.ReportViewerWebControl.axd?OpType=BackImage&Version=10.0.30319.1&Color=%23ECE9D8&Name=Microsoft.Reporting.WebForms.Icons.toolbar_bk.png");*/
                border-bottom: 1px solid #CCCCCC;
                font-family: Verdana;
                font-size: 8pt;
            }
            </style>

<script>
    $(document).ready(function () {
        $('#ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolder1_ReportViewer1_ctl05').removeAttr('style');
        $('#ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolder1_ReportViewer1_ctl05').addClass('report');
    });
</script> 
```

# excel - Excel - 公式在“向下填充”命令中猜测错误

> ID：10937541
> 
> 赞同：0
> 
> 时间：2012-06-07T18:19:50.630
> 
> 标签：excel, accounting

我知道这应该很简单，但我无法解决。

我有一列是用它左边的 3 列的总和计算的。例如总和（C1-C3）。

当我填写它时，每个单元格都会正确地得到它的公式。例如

```
C4 = SUM(C1-C3)
D4 = SUM(D1-D3)
E4 = SUM(E1-E3)
etc. 
```

我只需要再做一件事。我有一个单元格，其中包含一个我想从每个单元格中删除的数字，所以我的公式是：

```
C4 = SUM(C1-C3) - J30
D4 = SUM(D1-D3) - J30
E4 = SUM(E1-E3) - J30
etc. 
```

当我从 C4 方的公式中填写时，虽然它开始猜测更像这样：

```
C4 = SUM(C1-C3) - J30
D4 = SUM(D1-D3) - J31
E4 = SUM(E1-E3) - J32
etc. 
```

我怎样才能让它每次都选择 J30 而不是自动假设我希望它为每一行增加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:21:52.453

在单元格名称前使用 $：

```
C4 = SUM(C1-C3) - $J$30 
```

这将填写为：

```
C4 = SUM(C1-C3) - $J$30
D4 = SUM(D1-D3) - $J$30
E4 = SUM(E1-E3) - $J$30
etc. 
```

# java - Android - 将 Pid 映射到端口

> ID：10937543
> 
> 赞同：1
> 
> 时间：2012-06-07T18:20:05.470
> 
> 标签：java, android, networking, port

我希望有一个人可以帮助我。我目前正在尝试获取应用程序使用的端口 - 最后我想要一个 Java 对象，我可以将应用程序的包名称传递给它并获取使用的端口。

有人可以告诉我如何实现这一点 - android 设备上似乎没有 netstat od lsof 工具。

我会很感激每一个提示或提示:)

非常感谢

# mysql - SQL 更新来自不同表的表值

> ID：10937548
> 
> 赞同：1
> 
> 时间：2012-06-07T18:20:25.923
> 
> 标签：mysql, phpmyadmin, sql-update, x-cart

我有 2 个表 xcart_products`productid , meta_description` 和许多其他字段。第二张表是 xcart_extra_field_values 有 ( `productid fieldid and value`)

我需要复制的`fieldID = 1`值`xcart_extra_field_values`

进入

表中相同的`meta_description`列。`xcart_products``Productid`

```
UPDATE `xcart_products` SET meta_description = ( SELECT value FROM
      xcart_extra_field_values WHERE fieldid = 1 AND
      xcart_extra_field_values.productid = xcart_products.productid ) 
WHERE 
    xcart_extra_field_values.productid = xcart_products.productid ; 
```

我写了上面的 SQL 但我得到了一个错误

```
#1054 - Unknown column 'xcart_extra_field_values.productid' in 'where clause' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:30:05.177

我希望这对你有用：

```
UPDATE `xcart_products`, `xcart_extra_field_values` SET xcart_products.meta_description = xcart_extra_field_values.value 
WHERE
xcart_extra_field_values.fieldid = 1
AND
xcart_products.productid = xcart_extra_field_values.productid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:25:22.193

您需要查询的第二个表名，因为它在查询中使用，即使您没有更改其中的任何数据。

更新 xcart_products、xcart_extra_field_values

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T18:25:29.653

您可以改用多表`UPDATE`语法来连接表：

```
UPDATE xcart_products JOIN xcart_extra_field_values USING (productid)
SET    xcart_products.meta_description = xcart_extra_field_values.value
WHERE  xcart_extra_field_values.fieldid = 1; 
```

# google-maps-api-3 - 谷歌地图 api 与 Bing 地图 api 2012

> ID：10937556
> 
> 赞同：2
> 
> 时间：2012-06-07T18:20:43.807
> 
> 标签：google-maps-api-3, comparison, bing, bing-maps

我想在网页上开发地图 api，但我不确定我应该使用 Google 还是 Bing。我已经在没有考虑 Bing 的情况下使用 Google 完成了一些工作，并且在将 kml 文件加载到地图上时遇到了一些限制。它们也可能与 Bing 一起存在。我看过其他帖子，但它们要么太具体，要么已经过时：

*   [Google Maps API 与 Multimap/Bing Maps API](https://stackoverflow.com/questions/3060834/google-maps-api-vs-multimap-bing-maps-api)
*   [谷歌地图或必应地图 API？](https://stackoverflow.com/questions/4158815/google-maps-or-bing-maps-api)
*   [Google 地图、必应地图、OpenStreetMaps 和 MapQuest 限制](https://stackoverflow.com/questions/5531464/google-maps-bing-maps-openstreetmaps-and-mapquest-limitation)
*   [使用地图 Web 应用程序 google-maps vs bing-maps 开发的最佳 api](https://stackoverflow.com/questions/5967871/best-api-for-develop-with-maps-web-application-google-maps-vs-bing-maps)
*   [Bing Maps vs Google Maps -> 标记在不同的地方](https://stackoverflow.com/questions/7380248/bing-maps-vs-google-maps-markers-are-in-different-places)
*   [使用 Bing 或 Google Maps API 获取用户的位置（纬度、经度）](https://stackoverflow.com/questions/8914580/get-users-location-latitude-longitude-with-bing-or-google-maps-api)
*   [理想情况下 Bing 地图或 Google 地图的 JavaScript UI？](https://stackoverflow.com/questions/9316667/javascript-ui-for-ideally-bing-maps-or-google-maps)

Bing 和谷歌地图 api 的优缺点是什么？例如：下载大小、用户友好性、免费使用的功能数量、可供下载的地图数量、搜索数量等。您对其中任何一个的体验如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T20:04:51.840

我了解到 Bing Maps 与 Google Maps Api 之间的区别

1.  Google API 有更好的文档
2.  谷歌有[操场](http://code.google.com/apis/ajax/playground/)
3.  当您使用地理编码时，您会发现美国以外的谷歌地图比 bing 更准确，并且对查询请求更宽容，事实上，如果您想使用 bing 进行地理编码，我真的建议您使用更多具体可以。
4.  必应地图仍然`beta`在他的标志上写着

# resharper - VS2012RC 与 Resharper 悬停？

> ID：10937560
> 
> 赞同：1
> 
> 时间：2012-06-07T18:20:48.660
> 
> 标签：resharper, visual-studio-2012

我正在使用 VS2012RC，但我终生无法弄清楚如何更改 Visual Studio“深色主题”中出现的“悬停元素”的颜色。下面的文字实际上是说`Declaration hides variable blah from outer scope`

![VS2012RC](../Images/60e7fe7bf37d2d3bbb17e5a65406c2f8.png)

如何更改此文本的颜色以便实际阅读？这让我发疯，我希望其他人也在经历这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:21:55.510

经过一番努力，找到了解决方法：

它`Data Tips`在该`Fonts and Colours`部分的下方。您必须从愚蠢的基本黑色设置更改为浅色。

# .net - 私有嵌套类

> ID：10937565
> 
> 赞同：7
> 
> 时间：2012-06-07T18:21:17.520
> 
> 标签：.net, vb.net, oop, class, nested

我想创建一个嵌套类，它只能对父类可见并从父类实例化。
但我也希望能够通过父类的公共变量来使用嵌套类的实例。
我尝试将嵌套类设为私有，或将嵌套类的构造函数设为私有，但它不会编译。
是否可以在 .NET 中执行此操作？

这可以编译并且可以工作，但是任何人都可以使用嵌套类：

```
 Public Class OuterClass
        Public X As Integer = 123
        Public NestedClassInstance As New NestedClass(Me)

        Public Class NestedClass
            Private Parent As OuterClass

            Public Sub New(ByVal _Parent As OuterClass)
                Parent = _Parent
            End Sub

            Public Sub GetParentX()
                Debug.WriteLine("X = " & Parent.X.ToString)
            End Sub
        End Class
    End Class

    Sub Main()
        Dim OuterClassInstance As New OuterClass
        OuterClassInstance.NestedClassInstance.GetParentX()
    End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T18:28:08.733

通常 Private 嵌套类实现一个接口或继承另一个类，并暴露接口/基类。当您想隐藏父类的实现时，这很有用。像这样的东西：

```
Module EntryPoint
    Sub Main()
        Dim OuterClassInstance As New OuterClass
        OuterClassInstance.NestedClassInstance.GetParentX()
    End Sub
End Module

Public Class OuterClass
    Public X As Integer = 123
    Public NestedClassInstance As ISomeImplementation = New NestedClass(Me)

    Private Class NestedClass
        Implements ISomeImplementation
        Private Parent As OuterClass

        Public Sub New(ByVal _Parent As OuterClass)
            Parent = _Parent
        End Sub

        Public Sub GetParentX() Implements ISomeImplementation.GetParentX
            Debug.WriteLine("X = " & Parent.X.ToString)
        End Sub
    End Class
End Class

Public Interface ISomeImplementation
    Sub GetParentX()
End Interface 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T18:24:25.810

您不能拥有也通过公共接口公开的私有嵌套类。

这是一个非此即彼的命题——嵌套类要么是私有的，要么不是。

一种选择是使用您希望嵌套类实现的协定声明接口（使用一些重构工具，您可以从类中提取接口）并公开接口，同时保持嵌套类私有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:49:17.163

如果您只是想阻止客户在您的库之外使用您的对象，那么只需创建构造函数`friend`。这样，只有您的程序集中的代码才能创建对象。

# html - iframe 动态高度（无法访问 javascript 或样式表）

> ID：10937567
> 
> 赞同：0
> 
> 时间：2012-06-07T18:21:25.573
> 
> 标签：html, css, iframe

我处于一个非常糟糕的位置，因为我需要根据其内容使 iframe 高度灵活，但我无法访问任何样式表或服务器上的 head。我也不敢大声使用任何 JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:51:27.430

仅使用内联 CSS 无法做到这一点。您可能做的最好的事情是在 iframe 上设置一个大于被调用内容的固定高度。

如果您可以访问这两个页面并且它们都存在于同一个域中，那么有 javascript 解决方案，但除此之外，我认为您不走运。

Ajax 将是另一种解决方案，但它再次需要 javascript。

# java - 迁移之前访问 MySQL 服务器的代码以访问 MS SQL Server

> ID：10937569
> 
> 赞同：1
> 
> 时间：2012-06-07T18:21:31.577
> 
> 标签：java, mysql, sql-server

我有一个由 Java servlet 组成的小应用程序，数据库服务器是 MySQL 服务器。现在我必须转移到运行 Tomcat 的新服务器（感谢上帝！），但对于数据库，它的堆栈中运行了 SQL Server。

那么，我必须在我的 servlet 代码中进行重大更改吗？或者只是更改我的 servlet 中的驱动程序就可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:23:42.377

如果您通过依赖干净的 JDBC 来实现您的 DAO 或任何类型的 DB 访问层，那么您不需要做任何事情，只需更改 JDBC 驱动程序（以及数据源的连接信息，如连接字符串）。

最有可能的是，您唯一需要的更改应该是将针对 MySQL 格式化的连接字符串切换为针对 SQL Server 格式化的连接字符串，即：

*   从：`jdbc:mysql://[host][,failoverhost...][:port]/[database][?propertyName1][=propertyValue1][&propertyName2][=propertyValue2]`

    见：[http ://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)

*   至：`jdbc:sqlserver://[serverName[\instanceName][:portNumber]][;property=value[;property=value]]`

    见： http: [//msdn.microsoft.com/en-us/library/ms378428 (v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms378428(v=sql.90).aspx)

# sql - SQL Server 性能临时表或变量

> ID：10937575
> 
> 赞同：1
> 
> 时间：2012-06-07T18:21:50.260
> 
> 标签：sql, sql-server-2008

我目前正在优化一个存储过程，因为它由于存在大量计算和条目而超时。

但是，我不确定情况。最好使用 8 个临时表（从数据库中的其他数据中提取信息）还是将数据库中的数据放入各种变量中并访问它们？

哪个可以提供最佳性能来解决超时问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:27:41.637

取决于您在“临时”表中有多少条目。

*   一个*真正的*临时表`#temp`可以在其上定义索引，SQL Server 将对其行数等进行分析，并且它确实参与事务，例如，您可以插入行然后回滚，这些行将从您的“消失”中临时表

*   `@temp`SQL Server 将始终认为一个表变量只有一行——如果那里只有几行，这不是问题。但是，如果您需要存储数百行，SQL Server 查询优化器的这种假设可能会导致查询计划效率极低。另外：表变量**不**参与事务 - 这可能是好事 - 也可能是坏事 - 取决于您的环境

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:33:53.850

根据您上面的回答，您绝对应该使用临时表。您还应该考虑将它们编入索引以提高性能。

# php - 确认带有激活链接的电子邮件，如果 PHP 有效，则将其存储在文件中

> ID：10937585
> 
> 赞同：1
> 
> 时间：2012-06-07T18:22:24.023
> 
> 标签：php, perl, cgi

我意识到这个问题已经被问过很多次了，但我还没有找到一个平面文件版本。

我正在寻找一种在 PHP 或 CGI-PERL 中实现以下目标的方法，*最好*是PHP：

1.  一个人通过表格提交他们的电子邮件地址。
2.  然后将电子邮件（临时）存储在平面文件数据库（temp_emails.txt）中
3.  然后，此人会收到一封自动回复电子邮件，其中包含用于确认其电子邮件地址的链接。
4.  通过单击链接进行确认后，他们的电子邮件地址将被保存到一个新文件中。

（例如confirmed_emails.txt）。

我想到的一种方法是某种形式的“选择加入”方法。

如果没有 SQL 或类似的数据库，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:28:32.610

这是可能的。

将电子邮件写入 temp_emails.txt 文件时，像这样打开它：

```
$f = fopen('temp_emails.txt', 'a+'); // open for read/write at end of file
fwrite($f, $email); // write the email to the file
fclose($f); // close it
// send new email 
```

他们得到了他们的链接 confirm.php?email=xyz@abc.com

```
// first check if they already confirmed it
$file = file('confirmed_emails.txt');
if(!in_array($email, $file)){
    // not in file
    $f = fopen('confirmed_emails.txt', 'a+');
    fwrite($f, $email);
    fclose($f);
}else {
    // already confirmed
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:28:39.583

我认为您可以在不存储任何内容的情况下进行管理，即使在文本文件中也是如此。

当您生成要通过电子邮件发送给用户以进行确认的唯一代码时，请通过散列您要发送到的电子邮件地址来创建它，并具有以下格式的链接：

```
http://www.example.com/confirm.php?email=<emailaddress>&confirm=<hashedemail> 
```

然后只需根据链接中的哈希值重新对链接中的电子邮件地址进行哈希处理，如果它们匹配，则您已确认电子邮件地址。

（虽然我很好奇您为什么不想将其存储在数据库中 - 大概您需要将电子邮件地址存储在一个数据库中，以便您可以对它们做一些有用的事情？）

# c - 与联合概念相关的 c 代码输出问题

> ID：10937588
> 
> 赞同：1
> 
> 时间：2012-06-07T18:22:31.230
> 
> 标签：c, unions

我的代码如下： -

```
#include<stdio.h>

main() {
    union a {
        short int x;
        char y[2];
    };
    union a e;
    e.y[0] = 3;
    e.y[1] = 2;
    printf("%d\n%d\n%d\n", e.y[0], e.y[1], e.x);

    return 0;
} 
```

它给出的输出为

```
3
2
515 
```

我不明白这个515是怎么来的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:57:09.953

因为我想为 ASCII 艺术找个借口……

声明`union`允许您选择如何解释其数据。在您的情况下，作为 a`unsigned short`或 a `char [2]`。这两个都是 2 字节长，因此您的联合将引用 2 字节的内存部分，因此：

```
union a e;

    ---------------
e-> | ???? | ???? |
    --------------- 
```

现在您决定将联合解释为字符数组：

```
e.y[0] = 3;

    ---------------
e-> | 0x03 | ???? |
    ---------------

e.y[1] = 2;

    ---------------
e-> | 0x03 | 0x02 |
    --------------- 
```

然后您将其解释为`unsigned short`：

```
printf("%d\n%d\n%d\n", e.y[0], e.y[1], e.x); 
```

您使用的是小端系统（如@Oli 所述），这意味着最低有效字节首先存储在内存中。这意味着当您的代码查看 a 时`unsigned short`，它认为`0x03`是*最不重要的*字节。

所以你的 2-byte unsigned short 被解释为`0x0203`. `0x0203`十六进制是`515`十进制。

* * *

我认为，为了清楚起见，该评论很有趣，可以将答案放入其中。

假设我们这样做：

```
union a {
    int x;
    char y[2];
};

int main(int argc, char * argv[])
{
    union a e = {512};
} 
```

里面是什么？分解它：

`int`是 4 个字节，`char [2]`是 2 个字节，所以`union`是 4 个字节长来存储最大的数据类型。 `512`是`0x00000200`十六进制的。所以存储那个整数小端，你有：

```
 -----------------------------
e-> | 0x00 | 0x02 | 0x00 | 0x00 |
    ----------------------------- 
```

`e.x`512也是如此。`e.y[0]`是0和`e.y[1]`2

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T18:24:46.903

515 是十六进制 0x0203。

ey[0] 为 3，或 0x03。ey[1] 为 2，或 0x02。

short int x 将两者组合成 0x0203 或 515。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T18:24:17.907

你有一个[小端](http://en.wikipedia.org/wiki/Endianness)系统：

2 * 2 ⁸ + 3 = 515。

联合有效地允许您将 s 使用的内存重新解释`short`为一对连续`char`的 s。

# java - 将参数传递给类构造函数PHP SOAP？

> ID：10937593
> 
> 赞同：0
> 
> 时间：2012-06-07T18:22:36.837
> 
> 标签：java, php, web-services, soap, constructor

我正在尝试将参数传递给类构造函数，但没有成功。我试过以下

PHP

```
$c = "site.wsdl";
$client = new SoapClient($c,array('classmap' => array('state' => "mystate",'county' =>  "mycounty")),array("trace"=> 1,"exceptions" => 1)); 

$client = new SoapClient($c,array('classmap' => array('state' => "mystate",'county' =>  "mycounty")));

$client = new SoapClient($c,array('state' => "mystate",'county'=>"mycounty")); 
```

Web服务代码Java

```
@WebService
public class MyWebservice{
 String test =  "";

/**
 * 
 * @param county
 * @param state
 */
public MyWebservice(@WebParam(name = "county") String county,
            @WebParam(name = "state") String state) {   

    test= county+"_"+state;
            //want to use this String elsewhere in the class
}

} 
```

错误

```
Fatal error: Uncaught SoapFault exception: [S:Server] com.sun.enterprise.container.common.spi.util.InjectionException: Error creating managed object for class 
```

如果我从构造函数中删除参数，我在创建肥皂客户端时没有任何问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:04:06.720

您应该映射到 php 类（通过提供带有名称的字符串），而后者又用于将参数转发到远程 URI，我得到的印象是您使用类映射作为尝试发送参数的一种方式直接地。如果不是，可以发布您的 mycountry 和 mystate 类以及您的 wsdl 文件。

[您将在此博客文章](http://pookey.co.uk/wordpress/archives/78-using-the-classmap-with-soap-in-php)（不是我的）上找到一个非常详细的示例，说明如何将 SoapClient 与 classmap 一起使用。这非常清楚，我建议您阅读一遍以确保这不是问题。希望能帮助到你。:)

# iphone - 如何一次删除多个 UIButtons 的背景图像？

> ID：10937596
> 
> 赞同：1
> 
> 时间：2012-06-07T18:22:45.003
> 
> 标签：iphone, objective-c, ios, uibutton, background-image

我在我的应用程序中使用了 20 个 UIButton。我在点击事件上设置了所有这些 UIButton 的背景图像。所有这些 UIButton 都保存在 NSMutableArray 中。这里是代码。

```
 saveBtn = [[NSMutableArray alloc] init];
             for (int i=0; i<20; i++) {
             UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
             btn.frame = CGRectMake(spacex, spacey, 30.0, 30.0);
             idx = arc4random()%[arr count];
             NSString* titre1 = [arr objectAtIndex:idx];
             [btn setTitle:titre1 forState:UIControlStateNormal];   
             spacex = spacex + 30;
             [saveBtn addObject:btn];
             [self.view addSubview:btn];
          } 
```

我不成功这是我的代码。

```
 UIButton *currentButton = (UIButton *)sender;
 UIImage * imgNormal = [UIImage imageNamed:@"subtabButton.png"];
 [currentButton setBackgroundImage:imgNormal forState:UIControlStateNormal];
 [currentButton setTitle:currentButton.titleLabel.text forState:UIControlStateNormal]; 
```

但是在这 20 个 UIButtons 之间有 3 个 UIButtons，我希望当玩家单击这三个 UIButtons 中的一个时，所有之前设置的背景图像都将从 UIButtons 中删除。任何人都可以指导我如何做到这一点..thanx 提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T18:31:34.790

```
for (UIButton *btn in yourArrayOfButtons)
{
   [btn setBackgroundImage:[UIImage imageNamed:@"nameofmyimage"] forState:UIControlStateNormal];
} 
```

或者如果你想删除图像：

```
for (UIButton *btn in yourArrayOfButtons)
{
   [btn setBackgroundImage:nil forState:UIControlStateNormal];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T18:25:16.067

创建时将所有按钮放在 NSArray 或 NSMutableArray 中。然后使用 for-in 循环或简单的 for 循环来更改所有这些的背景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T18:25:56.753

可能最好的方法是动态创建每个按钮。将每个按钮信息存储到 NSMutableArray 中，然后执行 for 循环以删除图像。

```
 [currentButton setBackgroundImage:nil forState:UIControlStateNormal]; 
```

将删除按钮的图像。如果不了解您的按钮是如何存储在数组中的，就很难为您提供帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T19:20:48.713

据我了解，您有 20 个按钮，其中 3 个按钮删除了其他 17 个的图像。

如果控制此功能的 3 个在数组中，我建议您将它们从中删除，因为循环遍历您的按钮数组也会从 3 个`main`按钮中删除图像。

或者，您应该使用 a`tag`来区分 3 个主要按钮。您的按钮操作应如下所示。

```
-(void)buttonPressed:(id)sender {

      UIButton *button = (UIButton*)sender;

      if(button.tag == 1001 || button.tag == 1002 || button.tag == 1003) {

             for (UIButton *btn in buttonArray) {
                [btn setBackgroundImage:nil forState:UIControlStateNormal];
             }

       }

} 
```

我可能误解了您的需求，但这就是我想出的。希望能帮助到你 ！

# django - gnuplot web 界面的安全风险

> ID：10937597
> 
> 赞同：2
> 
> 时间：2012-06-07T18:22:47.610
> 
> 标签：django, security, gnuplot

我需要制作一种 gnuplot Web 界面，它接收命令列表或文件，将其保存到光盘并告诉 gnuplot 将其渲染为 png（“设置终端 png；设置输出......”）。

用户可以用它做什么讨厌或愚蠢的事情（例如超载 cpu 或 RAM，访问文件系统......）？我怎样才能避免它们？在将代码传递给 gnuplot 之前，我应该删除哪些潜在的恶意行？

我正在通过`subprocess.Popen`django 运行 gnuplot。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T18:34:21.503

**免责声明——这份清单一定是不完整的**

您需要禁用一些东西（至少）。

在 gnuplot 中，看一下`help shell`——那些允许用户生成交互式 shell（介于`shell`和之间的任何东西`logout`都需要被丢弃）。此外，您需要删除所有以`!`or开头的行`system`（以及任何续行），因为它们调用了 shell 命令。在我要做的潜在危险事情清单上，下一个是使用反向替换。

```
#homeless1.gp
mysring="`rm -rf ~`" 
```

将清除您的主目录。当然，我没有声称如果你做了所有这些事情，你的脚本将是完全安全的。如果您只允许用户上传一个文件来运行，您最好禁用`load`并且`call`从那时起您不必担心用户以某种方式上传另一个恶意脚本并从第一个加载它。

另一个想法——gnuplot 允许使用管道调用程序——例如

```
plot "<awk -F, '{print $0}' mydata.txt" #runs system command awk 
```

你几乎需要禁用任何以空格开头的字符串，`<`或者`|`- 可能还有转义序列，因为如果它们没有转义任何东西，gnuplot 可能会默默地丢弃它们。

```
#homeless2.gp
MYSTRING="<rm -rf ~"
plot MYSTRING  #removes $HOME -- And doesn't even give you a plot :-( 
```

还有一个……

```
#homeless3.gp
set output "| rm -rf ~" 
```

您还可以使用以下方法很容易地将脚本卡在无限循环中`reread`——该脚本只有一行长：

```
#inifite_loop.gp
reread   #Suckers!!! 
```

即使您构建了一个 chroot 监狱来运行您的脚本，这也是您可能想要禁用的（我对此一无所知，我只是在谷歌搜索如何在 unix 下安全运行脚本时才学会了这个术语......） - - 虽然我想使用上述方法，但用户仍然可以通过用不同的编程语言构建无限循环并从 gnuplot 执行它来固定你的 CPU 的一个核心 - 我猜内存也是如此......

```
#infinite_mem.gp
!python -c "a=[]; while True: a.append('Suckers!!! '*10000000))" #You'll probably hit swap pretty fast with this... 
```

我想得越多，为了安全地执行此操作，您几乎将不得不从头开始重新编写 gnuplot 解析器并检查所有内容（或沙箱和监视器——对消耗的资源设置仔细的限制）。

（对不起，我确定这不是你想听到的）。

似乎（对我来说）你最好的选择是创建你自己的迷你语言，它只接受一小部分（但有用的）gnuplot 命令子集，并从该组命令构建 gnuplot 脚本......

**进度编辑**

玩了一会儿之后，您可以在 gnuplot 中禁用管道——

```
./configure --program-suffix=safer 
```

现在，您需要编辑`config.h`由 configure... 生成的内容，注释掉以下行：

```
#define HAVE_PCLOSE 1 
```

和

```
#define HAVE_POPEN 1 
```

和

```
#define PIPES 1 
```

（例如`/*#define HAVE_PCLOSE 1*/`，如果您不熟悉 C 注释）。

然后`make; [sudo] make install`- 使用我设置的方式后缀，可以将您的“更安全”版本的 gnuplot 调用为`gnuplotsafer`.

这消除了管道引起的不安全感（带有`|`, `<`，甚至反引号的字符串的问题现在是安全的）。**外壳**，**系统**和**！**仍然不安全，您仍然必须通过解析脚本来禁用它们——但这比尝试确保用户没有设置恶意管道要容易得多。

我还建议您在将系统上线之前检查以确保您不能对管道/backtics等进行任何操作，并且我仍然会尝试尽可能多地对整个事情进行沙箱处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T01:16:25.543

mgilson 上面所说的一切都非常重要，需要理解——这可能非常危险。但是通过仔细的沙盒和资源使用监控应该可以*安全地进行。*

看看[http://www.plotshare.com/](http://www.plotshare.com/)。他们已经存在了一段时间，所以他们一定找到了一种安全的方法。也许你可以和他们谈谈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T09:33:37.857

我是[www.plotshare.com](http://www.plotshare.com)的作者，我今天才看到这个条目。

我要感谢 mgilson 用他的言论使页面更安全。老实说，管道安全问题并没有引起我的注意，因为我倾向于在绘制之前对数据进行预处理，因此很少使用管道。

我将该页面作为一个空闲时间项目运行，并不断尝试改进它。现在，我希望大多数安全漏洞都被填满。

@Lee Phillips：感谢您将情节分享包含在您的书中。现在，我正在添加一些不错的功能（改进的帮助系统、html 画布等），以使在线绘图体验真正优于仅在 shell 中使用 gnuplot。

当我对页面的质量有信心时，我会更加努力地提高在 google 上的知名度。如果您不喜欢该页面的某些内容或错过某个特定功能，请告诉我。

# c - 管子/叉子有问题。看不懂手册的一半（男）

> ID：10937600
> 
> 赞同：1
> 
> 时间：2012-06-07T18:22:58.770
> 
> 标签：c, fork, pipe

在一门课程中，老师给了我们一些代码（在黑板上），但他的字迹很糟糕，我无法做出几个部分。在管道和叉子上也是新的，所以这无济于事。

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/wait.h>
void main () {
    int a[] = {1,2,3,4}, f[2];  // ok so we initialize an array and a "pipe folder" (pipefd in manual) ?
    pipe (f);                   // not 100% sure what this does ?
    if (fork () == 0) {         // if child
        close (f[0]);               // close pipe read-end
        a[0] += a[1];               
        write (f[1], &a[0], sizeof (int))      // fixed
        close (f[1]);               // close pipe write-end
        exit(0);                    // closes child and sends status update to parent ?
    }
    else {                          // if parent
        close (f[1])                // close write-end of pipe
        a[2]+=a[3];
        read (f[0], &a, sizeof(int))          // fixed
        wait (0);                   // waits for child to ... close ? or just finish ? or is it the same thing
        a[0]+= a[2]; close (f[0]); 
        printf ("%d\n, "a[0]);
   }
} 
```

孩子和父母是否按特定顺序进行。我猜父母等待孩子关闭，如果`close (f[1])`没有返回错误，它会继续吗？（顺便说一句，“0”代表什么`wait(0)`）然后才继续？

我有什么误解？我做对了吗？

我想我应该提到我做了一些研究，`man`但我发现它非常令人困惑。**就我而言**，它们适用于已经知道自己在做什么但忘记了一些细节（例如要包括什么以及 -p 做什么）的用户，或者是对基本了解有更多了解的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T18:30:50.490

1.  `pipe`创建两个文件描述符。一个是你写的，另一个是你读的。你写到一个，你可以从另一个读取。UNIX 中的文件描述符是整数 ( `int`)。
2.  文件描述符由子进程继承。因此，管道使人们能够在进程之间进行通信。在这种情况下，孩子会写入一些父母可以读取的数据
3.  不要在读/写中使用 8 ，而是使用`sizeof`ie `sizeof(int)`。编译将为存储的字节数提供正确的值，并且`int`
4.  `wait(0)`等待孩子终止。

# c# - 如何使用openSSL库在客户端和服务器之间实现非对称加密和解密？

> ID：10937601
> 
> 赞同：2
> 
> 时间：2012-06-07T18:22:58.960
> 
> 标签：c#, asp.net, openssl, public-key-encryption

我正在尝试在用 ASP.NET 和 C# 编程的简单客户端和服务器应用程序之间创建安全连接。我必须加密服务器和客户端之间交换的消息。我也必须通过使用散列函数来应用完整性。

我的问题是如何解析交换的字节数组并解密它。

注意：交换的每条消息都包含：

1.  用目的地的公钥加密的原始消息
2.  原始消息散列（SH512），然后用源私钥加密

如何发送和解析这样的字节数组？

# c++ - std::map 未按预期运行

> ID：10937605
> 
> 赞同：1
> 
> 时间：2012-06-07T18:23:15.463
> 
> 标签：c++, map

我正在尝试使用该`std::map`模板，但无法使其正常工作。从互联网上的研究我来到这个解决方案并将文件重定向到输入流，这里是代码：

```
typedef map<char*, int> wc;
int main() {
    int c;
    char cc[75], nombre[75];
    wc m;
    scanf("%d", &c);
    while (c--) {
        scanf("%s %[ a-zA-Z]", cc, nombre);
        ++m[cc]; // This should work
        printmap(m);
    }
} 
```

打印地图是一个只打印地图对象的函数。这是我的文件 input.txt

```
3
Spain Donna Elvira
England Jane Doe
Spain Donna Anna 
```

当我执行程序时，输出是：

```
Spain -> 1
England -> 2
Spain -> 1 
```

我期望的是：

```
Spain -> 2
England -> 1 
```

Country 的出现次数映射到它出现的次数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T18:32:52.227

作为我上面评论的解决方案，您提供的代码的 C++ 版本：

```
typedef map<std::string, int> wc;
int main() {
    int c;
    string cc, nombre;
    wc m;
    std::cin >> c;
    while (c--) {
        std::cin >> cc;
        std::getline(std::cin, nombre);
        m[cc] += 1; // This should work
    }
    printmap(m);
} 
```

[http://ideone.com/2JP82](http://ideone.com/2JP82)

首先：`std::map`根据代码中的键对数据进行排序，`char*`，它指向`char cc[75]`。因此，当您替换 中的文本时`cc`，地图的键发生了变化，这破坏了一切。地图的键*永远不能改变*。因为我们使用的是 C++，所以你根本不应该使用`char[]`；改为使用`std::string`它（因为它是“值类型”）将使一切都神奇地工作。我不知道它以前是如何工作的，因为您没有显示该`printmap`功能。

第二：您`printmap`每次阅读一行时都会调用，并且由于 a`map`无法打印“最后添加的内容”，因此该想法根本没有意义。该`printmap`调用可能应该打印整个地图，并且在循环之外。

第三：不要使用`scanf`，不安全。使用流：`std::cin >> cc`阅读单个单词，或`std::getline(std::cin, nombre)`阅读剩下的内容。这样，如果有人进入该行，代码就不会崩溃（[最长国家名称](http://www.funtrivia.com/askft/Question33835.html)和[最长姓氏](http://answers.yahoo.com/question/index?qid=20081022055524AAXVIOc)的来源）

```
Krungthepmahanakornamornratanakosinmahintarayuttha-yamahadilokphopnopparatrajathaniburiromudomrajaniw-esmahasatharnamornphimarnavatarnsathitsakkattiyavi-sanukamprasit Wolfeschlegelsteinhausenbergerdorffvortschaferswesenchafewarenwholgepflegeunzenvonangereifenduchihrraubgiriigfeindtausendjahresvorandieerscheinenbanderechiffgebrauchlichtalsseinursprungvonkrrthinzwischensternartigraumaufdersuchebtbewohnbarplanetenkreisedrehensichundstandigmenshlichkeittkonntevortpflanzeslamdlichfreudeundruhemitnichteinfurchrintlligentgeschopfsvonhinzwischenster 
```

# wpf - WPF拦截依赖属性

> ID：10937610
> 
> 赞同：0
> 
> 时间：2012-06-07T18:23:38.297
> 
> 标签：wpf

我有一个从数据网格继承的自定义控件。每次将数据绑定到网格时，我都必须评估一个属性。我目前正在使用 DataSource="{Binding....}" 进行绑定

有没有一种方法可以创建一个新的依赖属性（？），每次更改 DataSource 属性时都会对其进行评估？我可以以某种方式将我的方法“附加”到 DataSource 属性吗？

我希望我的意图很明确。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:29:22.300

如果您继承自`DataGrid`，则可以重写该`OnItemsSourceChanged`方法，如下所示：

```
protected override void OnItemsSourceChanged(IEnumerable oldValue, IEnumerable newValue)
{
    // update your property here
    base.OnItemsSourceChanged(oldValue, newValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:06:39.410

我能够通过覆盖 OnPropertyChanged 并使用以下代码以及我的新依赖属性来处理这个问题 -

```
if(e.Property.Name = "DataSource")
{
// Invoke my new method
} 
```

# ruby-on-rails-3 - 与用户关联的云图像

> ID：10937611
> 
> 赞同：1
> 
> 时间：2012-06-07T18:23:40.373
> 
> 标签：ruby-on-rails-3, carrierwave, cloudinary

我正在尝试查找有关如何将通过 cloudinary 上传的图像与特定用户相关联的文档，该特定用户将允许上传它们的用户删除等，但不允许其他用户删除。但是，图像应该随时可供公众查看。我对 Rails 比较陌生，但基本上我正在尝试使用 cloudinary 进行复制：

```
class Image

  belongs_to :user

end

class User

  has_many :images

end 
```

显然，代码并不完整，只是试图显示我想要实现的关联，如果这是表示关系的合适方式。如果有人对更好的解决方案有建议，或者可以向我指出一些处理此类问题的文档的方向，我们将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:55:02.043

假设您使用 CarrierWave 和 Cloudinary 来管理 Rails 模型的上传。您需要定义一个上传器类并将其安装到您的 Image 类。假设您的 Image 模型类具有“图片”属性：

```
class PictureUploader < CarrierWave::Uploader::Base

  include Cloudinary::CarrierWave

  version :thumbnail do
    process :resize_to_fit => [50, 50]
  end

end

class Image

  belongs_to :user

  mount_uploader :picture, PictureUploader

end 
```

每个用户都有多个图像记录，每个记录都包含对正在上传的实际图像的引用。对于嵌入这样的图像：

```
<%= image_tag(user.images[0].picture_url) %> 
```

或缩略图：

```
<%= image_tag(user.images[0].picture_url(:thumbnail)) %> 
```

有关更多详细信息，请参阅[Cloudinary 文档](http://cloudinary.com/documentation/rails_integration#carrierwave_upload)。

关于图像删除：您的 Web 应用程序可能允许用户管理图像。简单地删除图像记录将自动删除上传到 Cloudinary 的远程图像。例如：

```
user.images.last.destroy 
```

# ruby-on-rails - 使用回形针/云文件将图像保存到 Rackspace

> ID：10937614
> 
> 赞同：1
> 
> 时间：2012-06-07T18:23:48.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, paperclip, cloudfiles

我有我的 Rails 应用程序，里面装满了来自不同供应商的大约 30000 种产品。目前，每个产品 image_url 都由各个供应商托管。我将如何将 image_url 中的每个图像保存到我的 rackspace 帐户，并确保 rackspace 生成的每个 image_url 都分配给正确的产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:57:21.603

如果您已经拥有所有文件并且知道它们应该与哪些对象关联，则可以将其放入 Rake 任务中。

对于每一款产品，

1.  上传图片
2.  更改`image_url`
3.  验证上传 + 模型名称
4.  保存模型

如果您需要跟踪哪些已处理或未处理，您可以在模型中添加一个字段，或者保留一个已处理模型的数组，直到任务完成。

# python - Python：系统找不到使用 subprocess.Popen 指定的文件

> ID：10937615
> 
> 赞同：1
> 
> 时间：2012-06-07T18:23:49.437
> 
> 标签：python

我的整个脚本：

```
#!/bin/env python

import subprocess
p = subprocess.Popen(["/bin/bash", "-i", "-c", "C:\\xampp\\xampp_stop.exe"])
stdout, stderr = p.communicate() 
```

这导致：`WindowsError: [Error 2] The system cannot find the file specified`

然而，`C:\xampp\xampp_stop.exe`确实存在

有什么建议么？我是 python 新手，所以我怀疑这是非常非常明显的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T18:25:45.420

其实`bash`是系统找不到。Windows 不附带`bash`. 删除它及其参数，然后调用`xampp_store.exe`.

```
#!/bin/env python

import subprocess
p = subprocess.Popen(["C:\\xampp\\xampp_stop.exe"])
stdout, stderr = p.communicate() 
```

# csv - 将原始的部分结构化文本转换为 CSV 或制表符分隔的文档或 XML

> ID：10937617
> 
> 赞同：1
> 
> 时间：2012-06-07T18:23:55.393
> 
> 标签：csv

我正在帮助一个非营利组织将他们现有的数据组织到一个数据库中。数据包括大约 200 条记录。他们一直在使用一个简单的word文档。我正在开始构建原始数据的工作，以便可以将其输入数据库。我将数据复制到 Textpad 中，效果很好。也就是说，数据是结构化的，但不是完美匹配。例如，一些组织有一个网站，一些没有等。以下是一些指示剩余数据的信息示例：

[![](../Images/44040815529ec275a9da755bb2e0c5c0.png)](https://i.stack.imgur.com/pdISC.png)

我创建了一个 ERD，它经过了多次修改，并得到了我的导师的批准。此时我处于 ETL(Extract, transform, load) 过程

1.  清理剩余的部分结构化但混乱的数据。
2.  放入Excel可读的doc类型，并排列到适用的表格中
3.  创建数据输入 SQL 脚本。
4.  运行脚本。

我已经用其他一些数据做到了这一点，而且效果很好。

清理并将其放入 Excel（CSV 或制表符分隔）是我需要指导的地方。还是将其转换为 XML 更好？如果我手动浏览文本文件以确保所有标题（因为缺少更好的词）匹配如下：

[![](../Images/0a6af2f7ef6611c5ce4e656011180f69.png)](https://i.stack.imgur.com/WM5DY.png)

有没有办法转移呢？

我对此进行了研究，我很惊讶我找不到任何好的信息。[更新]我刚刚找到了实际的术语，ETL Process。如果我必须开始重新输入和/或剪切和粘贴，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:11:44.567

这两个“记录”明显不同。例如，一些联系人有多个电话号码，而其他联系人只有一个。此外，联系人的数量可能会有所不同。它似乎适用于具有多个表的关系数据库模式。但是，您将很难根据数据布局自动化填充多个关系表的过程。你要处理多少数据？如果它不是一个巨大的数量，你可能会更好地做这种半手动，将你的 Textpad 文档的部分重新格式化为 INSERT 语句（使用大量的正则表达式搜索和替换），并花一些时间运行查询。

如果数据量确实很大，那么您可能需要用您选择的语言编写一个小程序来解析文件并创建一个包含适当插入语句的输出文件以填充所有数据表。

对于一个健壮的关系数据库，您需要一个至少包含以下表格的数据库模式：

```
Categories (map category names to IDs)
Types (map Group Types to IDs)
Organizations (including category and group type ID, name, addr, objs, activities, meetings, website, email, and an organization ID)
Contacts (one to many referencing org ID, including contact name and a contact ID)
Phone (one to many referencing contact ID, including phone type and phone number) 
```

如果没有 Types 和 Categories 表，您可能会侥幸逃脱，但根据数据量以及他们将来计划如何查询数据（例如，如果在某个时候他们希望找到特定类别中的所有组织），它们可能会很有用特定组类型，并且至少有数千个组织，那么额外的表格将证明是值得的）。

由于联系人/电话信息似乎非常灵活，因此最好将其放入单独的表中 - 否则您必须在主组织表中包含 contactN/phoneN/phoneTypeN 的列，以获得最大可能的联系人数/phones，这也会限制可以建立多少联系人/电话关联。

您还最好确保没有任何记录需要任何其他字段（会议、电子邮件、...）的多个条目。如果这是可能的，那么您再次需要选择是添加额外的关系表，还是添加多个字段以获得最大可能到组织表。

# c# - 会话对象不存储值

> ID：10937621
> 
> 赞同：2
> 
> 时间：2012-06-07T18:24:12.073
> 
> 标签：c#, asp.net

我目前正在创建一个网页，并且我想将与该站点的当前访问者相关的一个对象转移到另一个页面。我选择使用 Session 项来执行此操作。但似乎有一个问题，我在这样的一页上声明它的价值：

```
Session["CurrentAccount"] = new Account(tb_username.text, tb_password.text); 
```

并希望在另一个页面上检索这些数据，如下所示：

```
Account currAccount = (Account)Session["CurrentAccount"]; 
```

每当我尝试这样做时，都会发生 nullreferenceexception。Account 类未标记为可序列化。并且两个页面都在同一个应用程序下运行。

编辑：我尝试做同样的事情，而是将常规字符串绑定到会话，这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:30:57.840

可序列化仅适用于 SQL 会话。这将在将其放入会话时引发异常。

直接将会话分配给“新对象”时，我遇到了同样的问题。尝试先创建实例，然后将实例分配给您的会话！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:29:04.047

确保您已启用读/写会话。

看到这个：http: [//msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.enablesessionstate.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.enablesessionstate.aspx)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-07T18:48:14.443

我已经弄清楚出了什么问题，显然您无法将自定义对象存储到会话中，但问题完全相同，但将 Account 替换为常规字符串，它确实有效。谢谢你的帮助。

TL；DR 您显然不能在会话中存储标准对象以外的对象。

# objective-c - 可可教程麻烦

> ID：10937622
> 
> 赞同：1
> 
> 时间：2012-06-07T18:24:13.860
> 
> 标签：objective-c, cocoa, model-view-controller, delegates, controller

**[这是这个](https://stackoverflow.com/questions/9915703/connecting-app-delegate-to-controller-class)问题的副本。**

我在掌握一些 Cocoa 基础知识（特别是 Controllers 和 Delegates）时遇到了困难，所以我决定完成一个基础教程。我找到了一个“你的第一个 Mac 应用程序”，一切顺利，直到“[下一步要去哪里](http://developer.apple.com/library/mac/#documentation/General/Conceptual/Mac101/Articles/07_WhereNext.html)”阶段。这里有一堆我不明白的大概是基本的东西：

>

> *   “创建一个新的控制器类，并将管理轨道和用户界面从应用程序委托转移到这个新类。”

...创建一个单独的控制器类有什么意义？我得到了 MVC 模式并在过去使用过它，我只是无法弄清楚单独的 Controller 和 Delegate 的位置。

> *   “在 nib 文件中创建控制器类的实例，并与它建立适当的连接，而不是与应用程序委托建立适当的连接。”

...在此之前，我只是认为我只是创建了一个 NSWindowController 的子类，然后在 .xib 文件中声明该窗口应该是该类的对象。现在我很困惑。控制器应该是什么类？它应该符合哪些接口（对不起，协议）？如果它只是我指向 outlet 的一个类，那么再一次 - 与我已经拥有的 Delegate 有什么区别？

> *   “添加从应用程序委托到新控制器对象的连接。应用程序完成启动后，应用程序委托应向控制器发送消息以显示窗口。”

...消息是什么？我找到的最接近的东西是 NSWindowController 类中的 showWindow: message ，但是当我写这个时：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {

    [trackController showWindow:self];

} 
```

在 AppDelegate 的 applicationDidFinishLaunching 方法中，它显示错误“接收器类型'TrackController'例如消息是前向声明'，我只是不明白这是什么意思。

不仅如此——我为什么要发送一条消息来显示这个窗口，如果这个窗口没有任何我创建的代码，在一个空白项目中显示？也许我应该以某种方式关闭这个默认行为并自己创建这个窗口的一个实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:35:32.070

控制器类的要点：在控制器和模型元素及其用户界面之间保持一定比例是一种很好的做法。对于简单的应用程序，您可以将所有代码放在`AppDelegate`. 一旦您开发了更复杂的应用程序，您将希望将代码从`AppDelegate`各种控制器卸载，并且您将拥有用于维护模型的各种视图。我试图在视图和控制器之间保持 1:1 的关系，以使事情易于管理。

控制器可以实现各种协议来代表 UI 组件处理特定的功能位。然后他们成为该组件的代表。例如，在您的视图中，您有一个`NSTextView`并且您想知道用户何时单击文本中的链接。然后，您的控制器可以实现`<NSTextViewDelegate>`并实现该方法`textView:clickedOnLink:atIndex:`。通过这样做，它成为了您的`NSTextView`.

控制器应该是什么类？有大量控制器类可用于构建您的应用程序。我倾向于只使用`NSViewController`. 该控制器能够处理`NSView`以`NSWindow`. 支持的视图层次结构`NSView`允许您决定各种粒度场景（巨大、复杂的控制器或细粒度 - 由您决定）。

有关前向声明问题，请参阅[此帖子](https://stackoverflow.com/questions/322597/class-vs-import)。

我不明白您在显示窗口时的最后一个问题。显然，默认模板会生成一些管道代码来显示窗口。您可以使用该代码或滚动您自己的代码。澄清如果我没有正确理解你......

# jquery-mobile - jquery-mobile - 后退按钮双退 - 仅限 Android

> ID：10937629
> 
> 赞同：4
> 
> 时间：2012-06-07T18:24:27.480
> 
> 标签：jquery-mobile, back-button

与 data-rel="back" 的链接会导致两个（双）反向转换，而不是一个。这个问题似乎与 Android 相关——在 2.2 和 2.3 中得到了证明。

第 1 页 -> 第 2 页 -> 第 3 页

如果用户单击第 3 页上的后退链接，将发生以下情况：后退链接 ->（第 2 页临时）-> 第 1 页

尝试禁用 pushStateEnabled 但未成功

```
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script>
$( window ).bind( 'mobileinit', function(){
    $.mobile.pushStateEnabled = false;
});
</script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

也尝试过，双回仍然存在

```
<a href="/" onclick="history.back(-1)" >Back</a> 
```

有任何建议/更新以提供预期的返回功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T16:00:48.353

只要您的锚标签正确，我就看不出为什么`$.mobile.pushStateEnabled = false;`不起作用。

也许使用“文档”作为选择器而不是“窗口”就可以了。

你试过了吗？

```
<script>
$( document ).bind( 'mobileinit', function(){
    $.mobile.pushStateEnabled = false;
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:06:27.850

@Phill 您可以将[jquery 移动库页面](http://jquerymobile.com/demos/1.1.0/docs/pages/index.html)打开到 android 2.2 或 2.3 设备。如果您打开索引页面，首先单击“页面转换”，然后打开任何转换页面并单击“带我返回”按钮，一段时间后它会返回“页面转换”页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:00:23.663

文件：

*   [http://jquerymobile.com/demos/1.1.0/docs/api/data-attributes.html](http://jquerymobile.com/demos/1.1.0/docs/api/data-attributes.html)

**数据相关**

> *back*（在历史记录中后退一步）
> *dialog*（打开样式为对话框的链接，不在历史记录中跟踪）
> *external*（用于链接到另一个域）

在锚标记上使用属性 data-rel="back" 而不是哈希导航，这将带您到上一页

例子：

```
<a href="#" data-rel="back">Back</a> 
```

有关的：

*   [jQuery Mobile - 后退按钮](https://stackoverflow.com/questions/5740934/jquerymobile-backbutton/5743997#5743997)

# php - 我如何将值从 javascript 传递到 php 实时

> ID：10937639
> 
> 赞同：0
> 
> 时间：2012-06-07T18:25:08.753
> 
> 标签：php, javascript, ajax, jquery

> **可能重复：**
> [jQuery 和 PHP 建议的答案](https://stackoverflow.com/questions/4875956/jquery-and-php-suggested-answers)
> [自动为 php 建议 ajax](https://stackoverflow.com/questions/10520255/auto-suggest-ajax-for-php)

我想使用 javascript 将值从文本字段传递到 php 文件。以下是代码。在这里您可以看到一个文本字段和一个 javascript。在javascript中检查行源：“test.php”，这里我想将数据传递给php。

```
<form id="form1" name="form1" method="post" action="#">

<input type="text" name="Tag" id="Tag" />

</form> 
```

```
 $('#Tag').jSuggest({
    uniqID: 'id',
    source: "test.php", //TOGETHER WITH THIS URL I WANT TO PASS VALUE FROM TEXTBOX NAMED "TAG" TO A VARIABLE IN TEST.PHP NAMED "REQ"
   // preFill: pref.items,
    selectedItemProp: "name", 
    seekVal: "name",
    queryLimit: 10,
    newItem: function (item){ var newItemData = {value: item, name: item}; return newItemData;},
    selectionLimit: 2,
    formatList: function(data, elem){elem.html(data.name); return elem;},
    selectionAdded: function(elem, data) {
      console.log(data.name);
    },
    selectionRemoved: function(elem, data) {
      console.log(data.name);
      elem.remove();
    }

 }); 
```

# assembly - 我无法分配堆栈变量 - 8086 程序集

> ID：10937641
> 
> 赞同：1
> 
> 时间：2012-06-07T18:25:17.527
> 
> 标签：assembly, x86, stack, x86-16

我尝试编写一个获取字符串并将其复制到堆栈上的过程。

那是我的代码：

```
cpyStr proc
    mov bp, sp    
;   save the IP
    mov bx, sp
;   copy the counter loop
    mov cx, [bp+4]
;   make local variable - need 30 bytes
    sub sp, [bp+4] * 2; length is byte so duplicate for word ...
;   copy the string's offset
    mov si, [bp+2] ; offset to si
copy:
    sub bx, 2 ; next word
    mov ax, [si] ; store the character in ax
    mov [bp], ax ; copy to stack's currect word
;   to the next .. 
    add si, 1 ; go to next character
loop copy
;   print
    push bx ; send local string var as parameter for printStr
    call printStr 
;   return the IP
    push    bx
;   returtn to main ....
    ret 4 ; delete 2 parameters 
endp ; end 
```

主要的：

```
start:
    mov ax,@DATA
    mov ds,ax
; print
    push strSize
    push offset string
    call cpyStr
; msg
    push offset passed
    call printStr
; end
    mov ah,4ch
    mov al,0
    int 21H
end start 
```

数据段：

```
string  db "Heello$"
strSize dw  8
passed  db "Passed$" 
```

由于某种原因，它没有成功处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:18:09.270

你至少有三个问题。

首先，您的复制从写入 [bp] 开始，覆盖函数的返回地址。您的堆栈缓冲区从 [sp] 开始。其次，向前遍历源缓冲区和向后遍历目标缓冲区，反转字符串。第三，您在目标缓冲区中跳转了 2 个字节，但在源缓冲区中仅跳转了 1 个字节。正确的代码应该或多或少像这样

```
 cpyStr proc
    mov bp, sp
    mov cx, [bp+4]
    sub sp, cx
    add cx, 1
    shr cx, 1
    mov si, [bp+2]
    mov bx, sp
copy:
    mov ax, [si]
    mov [bx], ax
    add bx, 2
    add si, 2
    loop copy

    push sp
    call printStr
    mov sp, bp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:39:55.483

不应该是：`string db "Hello", $`在数据段中以及`passed db "Passed", $`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T22:03:30.610

代码不应该是：

```
loop copy
mov sp, bx
pop sp           ;pop instead of push
call printStr

ret 4
endp 
```

# perl - 排序与线性搜索以查找最小值/最大值

> ID：10937645
> 
> 赞同：4
> 
> 时间：2012-06-07T18:25:25.593
> 
> 标签：perl, sorting, complexity-theory

最近，我在 perl 中遇到了以下代码，它返回所有传递的参数中的最小数值。

```
return 0 + ( sort { $a <=> $b } grep { $_ == $_ } @_ )[0]; 
```

我通常使用简单的线性搜索来查找列表中的最小值/最大值，这对我来说似乎很简单并且足够优化。上面的代码是否比简单的线性搜索更好？在这种情况下与 perl 有什么关系？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T19:49:09.100

O() 没有说明算法需要多长时间。例如，在其他条件相同的情况下，我总是会在以下两个中选择算法 2：

*   算法 1：O(2*N + 1000 天) = O(N)
*   算法 2：O(5*N + 100 ms) = O(N log N)

O() 指定算法所花费的时间如何随着输入大小的增加而*缩放*。（嗯，它可以用于任何资源，而不仅仅是时间。）由于前面的两个答案只讨论 O()，所以它们是无用的。

如果您想知道对于给定大小的输入哪种算法更好的算法，您需要对它们进行基准测试。

*在这种情况*下，看起来[List::Util](http://search.cpan.org/perldoc?List%3a%3aUtil)`min`总是明显更好。

 *```
$ perl x.pl 10
           Rate  sort LUmin
sort  1438165/s    --  -72%
LUmin 5210584/s  262%    --

$ perl x.pl 100
           Rate  sort LUmin
sort   129073/s    --  -91%
LUmin 1485473/s 1051%    --

$ perl x.pl 1000
          Rate  sort LUmin
sort    6382/s    --  -97%
LUmin 199698/s 3029%    -- 
```

代码：

```
use strict;
use warnings;

use Benchmark  qw( cmpthese );
use List::Util qw( min );

my %tests = (
   'sort'  => 'my $x = ( sort { $a <=> $b } @n )[0];',
   'LUmin' => 'my $x = min @n;',
);

$_ = 'use strict; use warnings; our @n; ' . $_
   for values %tests;

local our @n = map rand, 1..( $ARGV[0] // 10 );
cmpthese(-3, \%tests); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T18:32:11.037

你说的对。如果您不需要为任何其他目的排序数据，则简单的线性搜索是最快的。无论如何，为了完成它的工作，排序必须至少查看每个数据一次。

只有当排序后的数据对其他目的有用时——或者当我不关心运行时间、功耗、散热等时——我才会对数据进行排序以找到最小值和最大值。

现在，@SimeonVisser 是正确的。排序确实有*O(n*log(n))。* **这并不像许多程序员想象的那样比*O(n)慢得多。*** 在感兴趣的实际案例中，管理排序的平衡二叉树（或其他此类结构）的开销可能与*log(n)*因子一样重要。所以，不必害怕分类的前景！但是，线性搜索仍然更快：您对此非常正确。

此外，@DavidO 添加了如此有见地的评论，我会用他自己的话在这里引用它：

> 线性搜索也是一种更容易泛化的算法。例如，对于大型数据集，线性搜索可以轻松（并且相对有效地）基于磁盘。而基于磁盘的排序变得相对昂贵，如果字段大小未标准化，则更加复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:33:17.440

出于显而易见的原因，线性搜索是 O( *n )。*排序是 O( *n* log *n* )（参见Perl 文档中的[排序](http://perldoc.perl.org/functions/sort.html)）。所以是的，就复杂性而言，线性搜索确实更快。这不仅适用于 Perl，也适用于任何实现这些算法的编程语言。

与许多问题一样，有多种方法可以解决它，也有多种方法可以获得列表的最小值/最大值。从概念上讲，当您只需要列表的最小值或最大值时，我会说线性搜索会更好，因为问题不需要排序。*

# php - 使用curl单击javascript按钮

> ID：10937646
> 
> 赞同：3
> 
> 时间：2012-06-07T18:25:28.000
> 
> 标签：php, javascript, curl

我已经使用 curl 解析了一个页面，它包含一些复选框和一个“全选”和一个“提交”按钮。单击该按钮会选中每个复选框。“全选”按钮会触发一个 JavaScript 函数，该函数实际上是选中所有复选框。

现在我需要点击“全选”和“提交”按钮。我该怎么做？

这是按钮代码：

```
input type="button" onclick="SelectAll(137)" value="Select All" 
```

这是js函数：

```
function SelectAll(n)
{
    for(i=0;i<n;i++)
    document.getElementById("ch"+i).checked=true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T18:34:01.757

你不能。如果您必须使用 cURL，则必须自己手动制作 POST 请求。`checkbox1=on&checkbox2=on&...`这将涉及查找所有复选框的名称并在 POST 正文中发送一堆。请参阅[http://davidwalsh.name/execute-http-post-php-curl](http://davidwalsh.name/execute-http-post-php-curl)，了解使用 PHP 通过 cURL 进行 POST 请求的一般示例。

另一种选择是使用[Selenium Web Driver](https://github.com/facebook/php-webdriver)之类的东西，它几乎可以让您编写像 Firefox 这样的 Web 浏览器脚本，它可以运行 JavaScript、单击事物等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T18:28:49.167

在你的 Curl 请求中传递一个参数，该参数由 jQuery 在其 $(document).ready() 上解析。有一些插件可以帮助解析参数。

就像是

```
$(document).ready(function(){
    var buttonPress = $.param("buttonPress");
    if (buttonPress == true)
        $("#myButton").click();
}); 
```

# java - 使用 & 符号从 url 获取请求参数

> ID：10937652
> 
> 赞同：4
> 
> 时间：2012-06-07T18:25:47.367
> 
> 标签：java, jsp

我正在尝试获取以“&”符号开头的请求参数，例如：- `http://localhost:8080/simple.jsp?my=&234587`

在其他页面上我得到它喜欢`String value=request.getParameter("my"); value.substring(0,4);`

我想获得 &234，请建议我没有得到任何价值。

谢谢，阿斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:29:31.673

在此示例中，您没有一个参数，而是两个参数：

1.  我的
2.  234

`234`在这里不是一个值。`&`分隔查询参数。如果您需要将该 & 符号作为 的值的一部分`my`，则需要在 URL 中将其转义为`%26`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T19:30:37.747

谢谢你的共鸣，我找到了答案，我曾经`request.getQueryString();`得到整个字符串，即 &234587，然后相应地解析它。

:)

再次感谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:48:03.637

如果您只处理获取请求。你可以写这样的东西。

```
String requestURI=request.getRequestURI();
String pContent=requestURI.split("?")[1];
String[] pArray= pContent.split("&");
String value="";                  
for (int i=0 ;i<pArray.length;i++) {
  if(pArray[i].equals("my"+"=")){
   value="&" + pArray[i+1];
   break;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:30:51.113

您很可能必须在 url 中编码“&”：

`http://localhost:8080/simple.jsp?my=%26234587`

# php - 尝试在锁定的表上运行 sql 时 PHP 脚本挂起

> ID：10937653
> 
> 赞同：1
> 
> 时间：2012-06-07T18:25:50.330
> 
> 标签：php, mysql, debugging, mysqli

所以我正在使用 mysqli，当我尝试执行以下查询时：

```
UPDATE Security.Users SET firstName = 'RYANTEST' WHERE id = '1' 
```

虽然 Security.Users 表上有一个锁，但我的 php 脚本只是永远挂起（到目前为止，我测量的最长约为 11 分钟）。

这不应该返回错误或至少超时吗？

我尝试在mysql上设置interactive_timeout和waiting_timeout，但没有成功。我还尝试将 php 脚本设置为 3 秒后超时，但再次没有运气（直接在脚本中使用 set_time_limit() ）。

我不确定我还能尝试什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:33:47.377

看看这篇 SO 帖子，它描述了如何为 mysql 长时间运行的查询设置超时

[如果需要太长时间，如何停止 MySQL 查询？](https://stackoverflow.com/questions/2137084/setup-mysql-query-timeout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:33:33.460

不，这是正常行为。如果一个表被锁定，所有其他也需要锁定该表的请求将**等待**轮到它们，直到前一个锁被释放。

这是为了确保竞争环境中的数据完整性。

# iphone - 初始屏幕 inxcode 上的跳过按钮

> ID：10937655
> 
> 赞同：0
> 
> 时间：2012-06-07T18:25:57.147
> 
> 标签：iphone, xcode4.2

我有一个闪屏，然后主视图淡入。闪屏会持续五秒钟。我如何使用具有相同动态淡出然后淡入主视图的跳过按钮跳过此内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:39:04.050

如果您可以跳过它，请不要将其放在首位。

启动图像**不适**用于启动画面。它们的存在是为了给人一种更快加载应用程序的错觉。Apple 的人机界面指南明确告诉您不要这样做：

> [**避免显示关于窗口或闪屏。**一般来说，尽量避免提供任何类型的启动体验，阻止人们立即使用您的应用程序。](http://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW25)
> 
> [避免使用您的启动图像作为提供以下内容的机会：](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW5)
> 
> *   “应用程序入口体验”，例如闪屏
> *   关于窗口
> *   品牌元素，除非它们是应用程序首屏的静态部分
> 
> 由于用户可能会频繁地在应用程序之间切换，因此您应该尽一切努力将启动时间缩短到最短，并且您应该设计一个淡化体验而不是吸引注意力的启动图像。

App Store 审核指南明确要求您遵守 HIG，您的申请可能会因违反其中的任何规则而被拒绝。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:41:41.397

@Jim 是正确的，尽管如果您仍然想要在初始屏幕上显示跳过按钮，您可以创建一个新的视图控制器并查看并调用它`rootViewController`，并在 App Delegate 中指定应用程序应该打开到 rootViewController。在 rootViewController 中，您可以拥有一个带有初始屏幕图像的 UIImageView 和一个立即转换到主视图的“跳过”UIButton。希望这可以帮助。

# android - Android Image 无法在 Nexus S 上使用本机相机应用程序保存

> ID：10937659
> 
> 赞同：3
> 
> 时间：2012-06-07T18:26:09.270
> 
> 标签：android, camera, nexus-s

所以这有点奇怪，因为在我正在测试的三款设备中，我只在 4.0.3 的 Google Nexus S 上遇到了这个问题。我正在启动本机相机应用程序拍照，我不在乎图像保存到哪里，所以我不指定，希望它会保存到默认位置，但没有保存位置全部！

在 Galaxy S 2 和 Samsung Skyrocket（都带有 2.3.something）上运行良好。

我用来启动应用程序的代码

```
Intent camIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(camIntent, TAKE_PHOTO);
return true; 
```

我保持它非常简单，这就是我感到困惑的原因！有谁知道 Nexus S 的相机特有的任何问题？

**编辑：**似乎 Nexus S 的相机应用程序可能会将文件保存在某个 onActivityResult 中，并且由于我启动了本机相机应用程序并且在返回时不保存图像，因此它不会保存它。有人知道这是真的吗？看到这种行为了吗？

**编辑：**没有人见过这个？我很难相信我是第一个遇到这种情况的人...

**编辑：**好的，在进行了更多工作之后，我尝试将 URI 添加到意图的 EXTRA_OUTPUT 中，如下所示：

```
camIntent.putExtra(MediaStore.EXTRA_OUTPUT,
                            Uri.parse(folderPath + String.format("%d.jpg", System.currentTimeMillis()))); 
```

现在我看到了这里描述的行为：[Android ACTION_IMAGE_CAPTURE Intent](https://stackoverflow.com/questions/1910608/android-action-image-capture-intent)，当我点击确定时相机应用程序不做任何事情，并且事先创建文件也不起作用，因为我尝试这样：

```
File f = new File(folderPath, filename);
f.createNewFile();
camIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.parse(folderPath + filename)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T20:20:35.217

好吧，想通了。奇怪的是，我不知道为什么，但改变这一行：

```
camIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.parse(folderPath + filename)); 
```

至

```
camIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(file)); 
```

解决它。不知道我是否应该理解为什么......但无论如何，它有效。我确实尝试了十亿其他的东西......

根本没有指定EXTRA_OUTPUT - >相机会表现得一切都很好......除了它不会在任何地方保存图像

获取由 intent.getExtras().get("data") -> 获取的位图确实返回了一个位图，但它不是许多错误报告中广泛记录的全尺寸图像

使用上面的 Uri.parse 方法 -> 导致本机相机应用程序复选标记按钮在单击时不执行任何操作

希望这可以帮助某人..

# django - 处理 Django 日历应用程序中的重复事件

> ID：10937660
> 
> 赞同：6
> 
> 时间：2012-06-07T18:26:32.827
> 
> 标签：django, django-models

我正在 Django 中开发日历应用程序。

相关模型结构如下：

```
class Lesson(models.Model):
  RECURRENCE_CHOICES = (
    (0, 'None'),
    (1, 'Daily'),
    (7, 'Weekly'),
    (14, 'Biweekly')
  )
  frequency = models.IntegerField(choices=RECURRENCE_CHOICES)
  lessonTime = models.TimeField('Lesson Time')
  startDate = models.DateField('Start Date')
  endDate = models.DateField('End Date')
  student = models.ForeignKey(Student)

class CancelledLesson(models.Model):
  lesson = models.ForeignKey(Lesson)
  student = models.ForeignKey(Student)
  cancelledLessonDate = models.DateField() # Actual date lesson has been cancelled, this is startDate + Frequency

class PaidLesson(models.Model):
  lesson = models.ForeignKey(Lesson)
  student = models.ForeignKey(Student)
  actualDate = models.DateField() # Actual date lesson took place
  paidAmt = models.DecimalField('Amount Paid', max_digits=5, decimal_places=2)
  paidDate = models.DateField('date paid')

class CompositeLesson(models.Model):
  # only used to aggregate lessons for individual lesson management
  lesson = models.ForeignKey(Lesson)
  student = models.ForeignKey(Student)
  actualDate = models.DateTimeField()
  isCancelled = models.BooleanField()
  canLesson = models.ForeignKey(CancelledLesson, blank=True, null=True)
  payLesson = models.ForeignKey(PaidLesson, blank=True, null=True) 
```

显然，这都会导致显示属于特定学生的课程出现问题。我正在尝试做的是显示一个表格，其中显示学生姓名以及所有预定课程的实例。我正在动态计算重复频率以避免炸毁我的数据库。重复的例外情况（即课程取消）存储在它们自己的表中。生成重复时，将根据取消的课程表检查重复。

在此处查看我的代码以生成重复（以及由此引起的问题的小目录）：[Can't get key to display in Django template](https://stackoverflow.com/questions/10935801/cant-get-key-to-display-in-django-template)

我对 Python 相对缺乏经验，并且正在使用这个项目来了解很多概念，所以如果我遗漏了一些本质上是“Pythonic”的东西，我深表歉意。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T19:59:59.957

您的问题的关键部分是您使用少数模型来跟踪一个概念，因此您引入了很多重复和复杂性。每个附加模型都是 的“类型” `Lesson`，因此您应该在此处使用继承。此外，大多数附加模型只是跟踪 a 的特定特征，`Lesson`因此实际上不应该是模型本身。这就是我设置它的方式：

```
class Lesson(models.Model):
    RECURRENCE_CHOICES = (
        (0, 'None'),
        (1, 'Daily'),
        (7, 'Weekly'),
        (14, 'Biweekly')
    )

    student = models.ForeignKey(Student)
    frequency = models.IntegerField(choices=RECURRENCE_CHOICES)
    lessonTime = models.TimeField('Lesson Time')
    startDate = models.DateField('Start Date')
    endDate = models.DateField('End Date')
    cancelledDate = models.DateField('Cancelled Date', blank=True, null=True)
    paidAmt = models.DecimalField('Amount Paid', max_digits=5, decimal_places=2, blank=True, null=True)
    paidDate = models.DateField('Date Paid', blank=True, null=True)

class CancelledLessonManager(models.Manager):
    def get_query_set(self):
        return self.filter(cancelledDate__isnull=False)

class CancelledLesson(Lesson):
    class Meta:
        proxy = True

     objects = CancelledLessonManager()

class PaidLessonManager(models.Manager):
    def get_query_set(self):
        return self.filter(paidDate__isnull=False)

class PaidLesson(Lesson):
      class Meta:
          proxy = True

      objects = PaidLessonManager() 
```

您会注意到我将所有属性都移到了`Lesson`. 这是应该的方式。例如，`Lesson`有一个`cancelledDate`字段。如果该字段为 NULL，则它不会被取消。如果是实际日期，则取消。不需要其他模型。

`CancelledLesson`但是，`PaidLesson`出于指导目的，我已经离开了。这些现在在 Django “代理模型”中被称为。他们没有自己的数据库表（所以没有讨厌的数据重复）。它们纯粹是为了方便。每个都有一个自定义管理器来返回适当的匹配`Lessons`，例如，您可以`CancelledLesson.objects.all()`只获取那些`Lesson`被取消的 s。您还可以使用代理模型在管理员中创建独特的视图。如果您只想为`CancelledLesson`s 提供一个管理区域，则可以，而所有数据仍会进入一个表中`Lesson`。

`CompositeLesson`已经过去了，很好的摆脱。这是试图将这三个其他模型组合成一个有凝聚力的东西的产物。这不再是必需的，因此您的查询将变得*更加*容易。

**编辑**

我没有提到您可以而且应该向`Lesson`模型添加实用方法。例如，虽然从数据库的角度来看，通过字段是否为 NULL 来跟踪取消/否是有意义的，但从编程的角度来看，它并不像它应该的那样直观。因此，您可能想要执行以下操作：

```
@property
def is_cancelled(self):
    return self.cancelledDate is not None

...

if lesson.is_cancelled:
   print 'This lesson is cancelled' 
```

或者：

```
import datetime

...

def cancel(self, date=None, commit=True):
    self.cancelledDate = date or datetime.date.today()
    if commit:
        self.save() 
```

然后，您可以通过调用取消课程`lesson.cancel()`，它会默认为今天取消。如果您想将来取消它，您可以传递一个日期：`lesson.cancel(date=tommorrow)`（`tomorrow`a在哪里`datetime`）。如果您想在保存之前进行其他处理，请 pass `commit=False`，它实际上不会将对象保存到数据库中。然后，`lesson.save()`当你准备好时打电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T19:13:38.420

这就是我想出的。我觉得 classes_in_range() 可能不像我能理解的那样“Pythonic”，但这正是我需要它做的。

```
class Lesson(models.Model):
RECURRENCE_CHOICES = (
    (0, 'None'),
    (1, 'Daily'),
    (7, 'Weekly'),
    (14, 'Biweekly')
)
relatedLesson = models.ForeignKey('self', null=True, blank=True)
student = models.ForeignKey(Student)
frequency = models.IntegerField(choices=RECURRENCE_CHOICES, null=True, blank=True)
lessonTime = models.TimeField('Lesson Time', null=True, blank=True)
startDate = models.DateField('Start Date')
endDate = models.DateField('End Date', null=True, blank=True)
isCancelled = models.BooleanField(default = False)
amtBilled = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)
amtPaid = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)

def get_exceptions(self):
    return Lesson.objects.filter(relatedLesson = self.id)

def cancel(self, date=None):
    if date:
        x = Lesson()
        x = self
        x.pk = None
        x.relatedLesson = self.id
        x.isCancelled = True
        x.startDate = date
        x.endDate = date
        x.save()
    else:
        self.endDate = datetime.date.today()
        self.save()
    return

def pay_lesson(self, date, amount):
    x = Lesson()
    x = self
    x.pk = None
    x.relatedLesson = self.id
    x.amtPaid = amount
    x.startDate = date
    x.endDate = date
    x.save()
    return

def lessons_in_range(self, startDate, endDate):
    if (self.startDate > endDate) or (self.endDate < startDate):
        return None
    if self.endDate < endDate:
        endDate = self.endDate
    ex = self.get_exceptions()
    if self.frequency == 0:
        if ex:
            return ex
        else:
            return self
    sd = next_date(self.startDate, self.frequency, startDate)
    lessonList = []
    while (sd <= endDate):
        exf = ex.filter(startDate = sd)
        if exf:
            # lesson already exists in database, add it
            lessonList.append(exf)
        elif sd == self.startDate:
            # lesson is the original lesson, add that
            lessonList.append(self)
        else:
            # lesson does not exist, create it in the database then add it to the list
            x = Lesson()
            x.student = self.student
            x.frequency = 0
            x.lessonTime = self.lessonTime
            x.relatedLesson = self
            x.startDate = sd
            x.endDate = sd
            x.isCancelled = False
            x.amtBilled = self.amtBilled    
            x.amtPaid = None
            x.save()
            lessonList.append(x)
        sd += timedelta(self.frequency)
    return lessonList 
```

# java - 不兼容的类型 - SortedSet 和 TreeSet

> ID：10937667
> 
> 赞同：2
> 
> 时间：2012-06-07T18:27:08.407
> 
> 标签：java

当我尝试编译这个时：

```
import java.util.*;

public class NameIndex
{
    private SortedMap<String,SortedSet<Integer>> table;

    public NameIndex()
    {
        this.table = new TreeMap<String,TreeSet<Integer>>();
    }
} 
```

我得到：

```
Incompatible types - found java.util.TreeMap<java.lang.String,java.util.TreeSet<java.lang.Integer>> but expected java.util.String,java.util.SortedSet<java.lang.Integer>> 
```

知道为什么吗？

更新：这编译：

```
public class NameIndex
{
    private SortedMap<String,TreeSet<Integer>> table;

    public NameIndex()
    {
        this.table = new TreeMap<String,TreeSet<Integer>>();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:29:56.667

尝试这个：

```
this.table = new TreeMap<String, SortedSet<Integer>>(); 
```

您可以在添加元素时指定映射中值的*实际*类型，同时必须使用与声明属性时相同的类型（即`String`和`SortedSet<Integer>`）。

例如，这将在向地图添加新的键/值对时起作用：

```
table.put("key", new TreeSet<Integer>()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:30:11.323

始终使用接口而不是具体类型键入对象。所以你应该有：

```
private Map<String, Set<Integer>> table; 
```

而不是你现在拥有的。优点是您现在可以随时切换实现。

然后：

```
this.table = new TreeMap<String, Set<Integer>>(); 
```

你会得到一个编译时错误，因为`SortedSet`和`TreeSet`是不同的类型，尽管它们实现了相同的接口 ( `Set`)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T18:31:44.583

您可以随时声明：

```
private SortedMap<String, ? extends SortedSet<Integer>> table; 
```

但我建议使用：

```
private Map<String, ? extends Set<Integer>> table; // or without '? extends' 
```

看看[这个](https://stackoverflow.com/q/10656019/639753)问题

# c# - 树视图中的资源管理器

> ID：10937671
> 
> 赞同：1
> 
> 时间：2012-06-07T18:27:32.687
> 
> 标签：c#, treeview, explorer

![在此处输入图像描述](../Images/e64999b63ec567c839f22d7392407426.png)

如何在 Treeview 控件中执行此操作？我正在使用 C#，我做了一些研究，但只获得桌面非常困难......我可以获得逻辑驱动程序，但我只需要获得“桌面”，它会扩展以显示“我的文档” 、“我的电脑”和其他可以在我的桌面上看到的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:32:49.997

尝试这个：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace DesktopTreeView
{
 public partial class Form1 : Form
 {
    public Form1()
    {
        InitializeComponent();
        LoadFoldersInTreeView(treeView1);
    }

    void LoadFoldersInTreeView(TreeView treeName)
    {
        treeName.BeginUpdate();
        treeName.Nodes.Add("Desktop");
        DirectoryInfo dirInfo = new DirectoryInfo(@"C:\");
        TreeNode node = new TreeNode();
        node.Text = "My Computer";
        treeName.Nodes[0].Nodes.Add(node);
    }
 }
} 
```

结果如下所示：

![在此处输入图像描述](../Images/71da0159c922ac5fd21ce3cbe7eb00d0.png)

# python - Python诱变剂未正确保存

> ID：10937672
> 
> 赞同：1
> 
> 时间：2012-06-07T18:27:40.663
> 
> 标签：python, unicode, utf-8, mutagen

我正在从 Excel 文档中提取文本并将它们作为 id3 标记添加到一些 mp3 文件中。我的 Excel 文档中的大多数字符都是俄语 (Unicode)，但有些是英语。当我运行脚本时，所有英文标签都被正确地写入元数据，但所有俄语字符都显示为问号。如果我在控制台中打印俄语字符，它们会完美显示。为什么他们被写成问号？

## Python

```
from mutagen.easyid3 import EasyID3
import xlrd
import glob
import re
import os
for name in glob.glob('*.mp3'):
  audio = EasyID3(name)
  wb = xlrd.open_workbook('xl.xls')
  sh = wb.sheet_by_name(u'Russian')
  col_b = 1
  col_c = 2
  col_e = 4
  col_g = 6
  col_i = 8
  col_k = 10
  for i in range(sh.nrows):
    row = sh.row_values(i)
    for j in range(len(row)):
      if row[j] == name:
        audio["title"] = sh.cell(i,col_e).value
        audio["author"] = sh.cell(i,col_i).value
        audio["copyright"] = sh.cell(i,col_g).value
        audio["album"] = sh.cell(i,col_k).value
        audio["discsubtitle"] = sh.cell(i,col_c).value
        audio.save()
print "All MP3 MetaData Parsed!" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:17:09.387

您应该使用“解码”或/和“编码”方法。

关于：[https ://stackoverflow.com/a/370199/1321404](https://stackoverflow.com/a/370199/1321404)

另一种方式：[https ://stackoverflow.com/a/4631545/1321404](https://stackoverflow.com/a/4631545/1321404)

# windows - 如何使用 DOS 批处理命令列出正在运行的应用程序？

> ID：10937674
> 
> 赞同：1
> 
> 时间：2012-06-07T18:27:42.157
> 
> 标签：windows, batch-file, dos

背景：我使用 DOS START 命令启动 MyDaemon：

```
@echo off
START "MyDaemon" java -cp test.jar MyTest /B 
```

作为其中的一部分，我还想检查 MyDaemon 是否已经在运行。如果是，我不想再开始了。

**不**符合我要求的 dos 命令是：

```
tasklist /fi "imagename eq "MyDaemon" > nul
if errorlevel 1 start "MyDaemon" java -cp test.jar MyTest /B 
```

那是因为，在任务列表中，图像名称是“java.exe”，而不是“MyDaemon”。我正在寻找在任务管理器中看到的“应用程序名称”，而不是图像名称。

那么如何执行此检查以查看 MyDaemon 是否已在使用 DOS 运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:19:23.923

你可以试试：

```
tasklist /fi "windowtitle eq MyDaemon" 
```

键入任务列表/？了解更多详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:37:38.217

不，您只能枚举进程。如果使用参数（如您的'）启动了一个进程，您将看不到它们。

我可以在 .NET 中为您提供一个解决方案来获取进程的应用程序名称（或主窗口的标题），但我认为 dos 做不到。

# ruby-on-rails - 提高编程解决方案技能的书籍推荐

> ID：10937679
> 
> 赞同：-2
> 
> 时间：2012-06-07T18:28:01.490
> 
> 标签：ruby-on-rails, ruby

我是自学的。我目前在 Rails 中完成大部分工作。有时我发现解决复杂的编程问题很困难，我相信我们很多人都会这样做。有什么好的学科或书籍可以提高编程解决能力？

有没有关于这件事的具体书？也许像数学、代数、微积分之类的东西？通用计算机科学？像这样的书[http://pragprog.com/book/ahptl/pragmatic-thinking-and-learning](http://pragprog.com/book/ahptl/pragmatic-thinking-and-learning)？通用 OOP？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T18:41:07.900

我有超过 20 年的编程经验，根据我的经验，一些提高编程技能的好方法是（没有任何优先顺序）

a) 解决复杂的编程问题

b) 重新审视您的解决方案，看看可以在哪些方面进行改进（至少 2-3 次通过）。一本包含改进程序技巧的好书正在重构：[http ://www.amazon.com/Refactoring-Improving-Design-Existing -代码/dp/0201485672](https://rads.stackoverflow.com/amzn/click/com/0201485672)

c) Dobbs 博士是获取技巧和见解的绝佳网站： [http ://www.drdobbs.com/](http://www.drdobbs.com/)

e）查看其他人的代码，例如。开源代码，这样您就不会在良好的心态中发展青蛙。这是学习良好实践的好方法。

f) 学习使用多种语言（例如 Java、PHP）进行编程。这也是提高技能的好方法。

g) 在编写代码时尝试并始终考虑“最佳实践”。HTH。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T18:35:10.823

了解您的数据结构和算法以及设计模式。Design Patterns by the gang of 4 很好地推荐 Head first into design patterns 也是一个不错的选择。

我个人做编程难题，我在codingbat.com、pojecteuler.com、uva.onlinejudge.org 和其他可以在google 上找到的网站上找到在线难题。我相信 UVA 有一本培训参加比赛的人的书。还反弹[http://www.reddit.com/r/learnprogramming](http://www.reddit.com/r/learnprogramming)和 [http://www.reddit.com/r/programming](http://www.reddit.com/r/programming)

但是，是的，擅长某件事的最好方法是一遍又一遍地做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T18:34:20.787

有很多关于计算机科学的书籍，但最好的恕我直言，计算机程序的结构和解释：http: [//mitpress.mit.edu/sicp/full-text/book/book.html](http://mitpress.mit.edu/sicp/full-text/book/book.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T15:26:26.843

离散数学教科书，例如Graham、Knuth 和 Patashnik 的《 *Concrete Mathematics: A Foundation for Computer Science 》，将是有益的。*

# jquery - 使用 JQUERY 跟踪整个 HTML 页面的点击

> ID：10937687
> 
> 赞同：0
> 
> 时间：2012-06-07T18:28:37.790
> 
> 标签：jquery, iframe, onclick, click

我正在尝试跟踪对 html 元素的点击。

和：

```
$('html').click(function() {
    // action here
}); 
```

但是这个东西不适用于 iframe ，无法捕捉 iframe 点击，或者点击到选择框

[http://jsfiddle.net/TYJtc/4/](http://jsfiddle.net/TYJtc/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:06:32.257

此答案基于您的域的 iframe 内容，使用 jquery 1.7.2，这应该在文档内部准备就绪

[http://jsfiddle.net/TYJtc/6/](http://jsfiddle.net/TYJtc/6/)

html

```
<iframe id="myframe" src='/'></iframe> 
```

js

```
$('#myframe').contents().find('body').bind('click', function(e) {

   alert('clicked');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:38:20.883

您需要将脚本放在 document.ready 函数中，并将“html”更改为文档。

```
$(document).ready(function() {
    $(document).click(function(e) {
     alert("click");
    });
}); 
```

[http://jsfiddle.net/TYJtc/1/](http://jsfiddle.net/TYJtc/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:55:43.833

您可以在 iframe 上放置一个具有高 z-index 的 div。这应该拦截所有点击并调用文档点击处理程序。主要问题就是这样。它拦截所有点击，因此底层 iframe 不会收到任何点击事件。

# batch-file - 批量执行多命令

> ID：10937698
> 
> 赞同：1
> 
> 时间：2012-06-07T18:29:08.747
> 
> 标签：batch-file, cmd

我试图在一个打开的窗口中从批处理文件中运行多窗口命令。
我希望打开的命令窗口按顺序执行两件事：

1.  切换音量
2.  定向到该卷中的目录。

这是我写的：

```
start cmd /k C: && cd 'C:\Program Files (x86)\aaa\' 
```

但是，这只会切换音量。第二件事没有执行。
谁能给我指路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:05:52.737

好吧，你至少有 2 个选项......：第一个，确保你的 && 被传递给新的 cmd ......

```
start cmd /k "C: && CD c:\temp" 
```

2nd，使用 /d 开关在 cd 上一步“到达那里”......

```
start cmd /k cd /d c:\temp 
```

KR巴特克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:02:39.690

如果要将目录更改为另一个驱动器，可以使用

`cd /d C:\`

但是如果您在同一驱动器中更改目录，则不需要切换驱动器，只需更改到该目录：

`cd "C:\Program Files (x86)\aaa"`

请记住用空格在路径周围加上引号，这可能是您的命令没有更早起作用的原因。

另外，你不应该真的需要`start`and `cmd`。你所做的并不真的需要像这样被线程化。如果它是一个批处理文件，您可以`pause`在最后使用而不是使用`cmd /k`.

您的完整批处理文件将如下所示：

```
cd "C:\Program Files (x86)\aaa"
pause >nul 
```

或`cmd /k`用于一行（在命令行使用的情况下）：

```
cmd /k cd "C:\Program Files (x86)\aaa" 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:59:10.283

你不只是在需要的目录中打开你的 cmd 吗？喜欢^

```
start /dc:\temp cmd 
```

# php - json_encode 在 while 循环中不起作用

> ID：10937699
> 
> 赞同：2
> 
> 时间：2012-06-07T18:29:13.390
> 
> 标签：php, jquery

我的 php 脚本中有一个 json_encode，如果在 while 循环中调用 json_encode，它似乎会使 Jquery 方面失败。

当我在浏览器窗口而不是页面中查看结果时，我需要结果，我可以看到它确实有效。

**例如：**

```
while ($row = mysql_fetch_array($result)) {     
    $id = $row['id'];
    $title = $row['title'];
    $content = $row['content'];

    $data = array("id" => $id,
    "title" => $title,
    "success" => true
    );
echo json_encode($data); // Inside the While Loop

} 
```

**浏览器中的输出是：**

```
{"id":"15","title":"Advanced Booking Examples","success":true}
{"id":"14","title":"Advanced Booking Fields","success":true}
{"id":"11","title":"Add New Driver","success":true}
{"id":"10","title":"Registering a Driver \/ Add New Vehicle","success":true}
{"id":"8","title":"Dispatch Controls","success":true}
{"id":"7","title":"Troubleshooting Driver Device Checklist","success":true}
{"id":"6","title":"Requirements Checklist","success":true} 
```

在 jQuery 响应中，这实际上是空白的，但是如果我将其留在`echo json_encode($data);`while 循环之外，则 jQuery 会获取响应，但是只有 1 条记录 - 是循环中的最后一条记录。

我需要 jQuery 从循环中获取所有结果。

**这是JS**

```
$.ajax({ // Send it off for prcessing
        type: "POST",
        dataType: 'json',
        url: "includes/auto_suggest.php",
        data: {
            q: inputString
        },
        success: function (result) {
            if (result.success) {             
                var id = result.id;
                var title = result.title;                    
                $('#auto_id').append("<input type='text' class='hideid' id='hideid_" + id + "' value='" + id + "'/>");              
        $('#auto_title').prepend("<p>" + title + "</p>");
            }
        }
    }); 
```

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T18:32:30.580

JSON 需要全部位于一个数组或对象上。您需要将每一行附加到一个数组，然后`json_encode`。

```
$data = array();
while ($row = mysql_fetch_array($result)) {     
    $id = $row['id'];
    $title = $row['title'];
    $content = $row['content'];

    $data[] = array(
      "id" => $id,
      "title" => $title,
      "success" => true
    );
}
echo json_encode($data); 
```

然后在 JavaScript 中，您将拥有一个可以循环访问的对象数组。

```
$.ajax({ // Send it off for prcessing
    type: "POST",
    dataType: 'json',
    url: "includes/auto_suggest.php",
    data: {
        q: inputString
    },
    success: function (result) {
        $.each(result, function(){
          if (this.success) {
            var id = this.id;
            var title = this.title;
            $('#auto_id').append("<input type='text' class='hideid' id='hideid_" + id + "' value='" + id + "'/>");
            $('#auto_title').prepend("<p>" + title + "</p>");
         }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T18:32:18.183

好吧，您没有发送有效的 JSON。将对象存储在一个数组中，然后`json_encode`在循环后存储该数组。

```
$data = array();
while ($row = mysql_fetch_array($result)) {     
    $id = $row['id'];
    $title = $row['title'];
    $content = $row['content'];

    $data[] = array("id" => $id,
        "title" => $title,
        "success" => true
    );
}
echo json_encode($data); 
```

然后，您需要更改 JavaScript 代码以正确处理数组而不是对象。由于这里没有人知道您到底打算做什么，因此您必须自己做或提供更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T18:32:54.863

您需要将结果数据添加到数组并调用`json_encode`一次，如下所示：

```
$data = array();
while ($row = mysql_fetch_array($result)) {     
    $id = $row['id'];
    $title = $row['title'];
    $content = $row['content'];

    $data[] = array("id" => $id,
    "title" => $title,
    "success" => true
    );
}

echo json_encode($data); 
```

这将更改您输出的 JSON（因为当前您的 JSON 无效），您现在必须在 jQuery 回调中循环。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T18:33:10.100

当该行在循环内时返回的 JSON 作为一个整体无效。它是多个 JSON 字符串在一起。你需要把它们分开。

我会创建一个数组并在循环内将每个添加`$data`到该数组中。然后，在循环之外，`json_encode`它并回显它。这将创建一个 JSON 字符串以返回到您的 javascript。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T18:32:34.187

也许...

```
$data = array();
while( WHATEVER ){
    // other code
    $data[] = array('id' => $id, 'title' => $title, 'success' => true);
}

echo json_encode($data); 
```

将所有信息存储在一个数组中，然后对该数组进行编码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-07T18:32:44.720

您不能将这样的多个对象传递给 jQuery。当 while 循环完成时，放入 in 数组并打印对象数组。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-07T18:32:52.350

您需要在 while 循环之外对 json 进行编码。它将返回单个 json，这实际上是正确的

```
while ($row = mysql_fetch_array($result)) {     
    $id = $row['id'];
    $title = $row['title'];
    $content = $row['content'];

    $data[] = array("id" => $id,
    "title" => $title,
    "success" => true
    );

}
echo json_encode($data); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-07T18:35:56.830

您的 JSON 输出无效。试试这个完整的代码（编辑）：

```
$result = Array();
while ($row = mysql_fetch_array($result)) {     
    $id = $row['id'];
    $title = $row['title'];
    $content = $row['content'];

    $data = array("id" => $id,
        "title" => $title,
    );
    $result[] = $data;
}
echo json_encode(Array('data'=>$result,'success'=>true)); // Outside the While Loop 
```

在你的 javascript 代码中

```
$.ajax({ // Send it off for prcessing
        type: "POST",
        dataType: 'json',
        url: "includes/auto_suggest.php",
        data: {
            q: inputString
        },
        success: function (results) {
            if (results.success) {
                for(var i in results.data) {
                    var result = results.data[i];             
                    var id = result.id;
                    var title = result.title;                    
                    var $newfield = $("<input type='text' class='hideid' id='hideid_" + id + "' value='" + id + "'/>");              
                    $newfield.prepend("<p>" + title + "</p>");
                    $('#auto_title').append($newfield);
                }
            }
        }
    }); 
```

# sql - 您可以使用 __in 过滤外键吗？

> ID：10937704
> 
> 赞同：0
> 
> 时间：2012-06-07T18:29:27.153
> 
> 标签：sql, django

我有以下查询：

```
Child.objects.filter(
    foreign_key_field__in=Parent.objects.filter(param=something)) 
```

视图死于：

```
invalid literal for int() with base 10: 'value of something' 
```

在我看来，`foreign_key_field`期望是`id`某种类型的，我给它一个实际的价值。难道我做错了什么？这可能吗？

目标是避免遍历`child_set`父级以调用子级中的另一个查询生成方法，这会导致为每个返回的单个对象生成一个查询。相反，我想诱导 ORM 在一个查询中获取所有匹配的子节点，并像往常一样迭代它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:21:17.053

问题是你在做什么：

```
Child.objects.filter(parent__in=Parent.objects.filter(...)) 
```

或者

```
Child.objects.filter(parent_id__in=Parent.objects.filter(...)) 
```

第一个版本可以工作，第二个版本会给你“invalid literal for int() with base 10”错误。

# r - 在 R 中通过 hclust 重新排序数据

> ID：10937705
> 
> 赞同：0
> 
> 时间：2012-06-07T18:29:29.180
> 
> 标签：r, statistics

我从这里看到了这些代码：http: [//learnr.wordpress.com/2009/08/10/ggplot2-version-of-figures-in-lattice-multivariate-data-visualization-with-r-part-9/](http://learnr.wordpress.com/2009/08/10/ggplot2-version-of-figures-in-lattice-multivariate-data-visualization-with-r-part-9/)

```
hc1 <- hclust(dist(USArrests, method = "canberra"))
hc1 <- as.dendrogram(hc1)
ord.hc1 <- order.dendrogram(hc1)
hc2 <- reorder(hc1, state.region[ord.hc1])
ord.hc2 <- order.dendrogram(hc2)
region.colors <- trellis.par.get("superpose.polygon")$col
USArrests2 <- melt(t(scale(USArrests)))
USArrests2$X2 <- factor(USArrests2$X2, levels = state.name[ord.hc2]) 
```

但我对`state.region`变量的第四行感到非常困惑。

关于订单的变量是`ord.hc1`从 生成的`USArrests`，这似乎与 无关`state.region`。那为什么它`state.region`用于重新排序而不是`USArrests`数据框中的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:25:30.220

查看帮助文件`state.region`-

```
?state.region 
```

**Details**下的第一句话是

```
R currently contains the following "state" data sets.  
Note that all data are arranged according to alphabetical 
order of the state names. 
```

这意味着我们可以在 USA 数据集之间跳转，因为它们的顺序**相同**，即第一个条目的`USArrests`状态与 中的状态相同`state.region`。

# apache - 如何将子域添加到私有 Linux 服务器

> ID：10937709
> 
> 赞同：0
> 
> 时间：2012-06-07T18:29:52.877
> 
> 标签：apache, subdomain

如何为我的 linux 服务器（使用 apache）创建一个可以从外部访问的子域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:54:23.883

子域必须在域的 DNS 设置中有自己的条目。或者，当您希望拥有多个子域或希望脚本对子域做出不同反应时，您可以使用星号 (*) 作为通配符。然后您应该能够在 Plesk、CPanel 或您使用的任何工具中进行设置。当您在 Apache 文件中执行此操作时，您应该也可以像任何其他域一样将其设置为虚拟主机。

# c# - c#动态复制面板

> ID：10937714
> 
> 赞同：3
> 
> 时间：2012-06-07T18:30:07.453
> 
> 标签：c#, dynamic, duplicates, panel

我需要根据复选框动态复制面板中的所有控件。（如果选中复选框，则会出现另一个面板）。

最后，当我单击计算时，它对创建的每个面板执行相同的预定义操作。

图片理解：

![在此处输入图像描述](../Images/07e7f163757e87896334e2c5aba54ce0.png)

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:43:47.477

将所需的控件放入 UserControl。

当一个复选框被选中时，创建该控件的一个实例并添加它。

```
MyPanel myPanel = new MyPanel();
myPanel.Location = new Point(25,25);
this.Controls.Add (myPanel); 
```

位置是您在表单中想要的位置。

# asp.net - CSS 表格 - 右侧不适合浏览器

> ID：10937715
> 
> 赞同：0
> 
> 时间：2012-06-07T18:30:07.497
> 
> 标签：asp.net, css, xhtml

今天早上我一直在我们公司的网站上工作，但遇到了一些问题。我将页面格式化为两个单元格，一个在右侧，一个在左侧。右边的包含一张大约 790 像素宽的图像。当我将浏览器窗口缩小到不再适合的位置时，整个单元格会跳到第一个单元格下方。我怎样才能防止这种情况发生？

代码...

xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org   /TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>
Test
</title>
<link href="StyleSheet1.css" type="text/css" rel="Stylesheet" />
</head>
<body>
<form name="form1" method="post" action="default.aspx" id="form1">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKLTg2ODI4NzA2OWQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFCUNoZWNrQm94MU+tEbqmFYLAUCuNpKlG5GJdxlTP" />
</div>

<div>

<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWBwKUzskuAuzRsusGAoznisYGAuzR9tkMAuzRirUFAoLk17sJArursYYIEh1rVMqwd3ohPqFy9J1P74IvCz4=" />
</div>
<div style = "padding-left:15%;">
<div class = "header">
    <img src="images/logoclr.bmp" style="height:56px;width:253px;border-width:0px;" />
    <input name="TextBox1" type="text" id="TextBox1" style="width:414px;" />
    <input type="submit" name="Button1" value="Search" id="Button1" />
    </div>
    <br /><br /><br /><br /><br />
<div class="loginSide">
    <div class = "internalBox">
    Log On To Invoice Viewer
    </div>
    <br />
    <span>Login ID:</span>
    <br />
    <input name="TextBox2" type="text" id="TextBox2" />
    *<br />
    <br />
    <span id="Label1">Password</span>
    <br />
    <input name="TextBox3" type="text" id="TextBox3" />
    *<br />
    <br />
    <input id="CheckBox1" type="checkbox" name="CheckBox1" />
    Remember my Login ID<br />
    <br />
    <div style="padding-left:20px;"><input type="submit" name="Button2" value="Login" id="Button2" /></div>
    <br />
</div>
<div class = "imageSide">
    <img src="images/1_back11.jpg" style="border-width:0px;" />
</div>
</div>
</form>
</body>
</html> 
```

css

```
body 
{
background-color:rgb(227,227,225);
font-family:Verdana;
font-size:.8em;
margin-left:auto;
}

.loginSide
{
float:left;
border-width:1px;
border-right:0px;
border-color:rgb(186,107,255);
border-style:solid;
width:275px;
height:292px;
padding:10px;
background-color:rgb(223,232,237);
}

.imageSide
{
border-width:1px;
border-color:rgb(186,107,255);
border-style:solid;
width:792px;
padding:10px;
background-color:rgb(223,232,237);
float:left;

}

.internalBox
{
padding-left:50px;
padding-right:50px;
padding-top:5px;
padding-bottom:5px;
background-color:rgb(54,113,109);
color:White;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:35:07.377

尝试为包含所有内容（例如 ）的 div 设置一个 id`<div id="wrapper" style="padding-left:15%;">`并为其创建一个 CSS 选择器，并在其中指定最小宽度：

```
#wrapper {
    min-width: 900px;
} 
```

您应该根据图像 div*不*换行的最小宽度来选择宽度。当然，既然你有一个包装器的选择器，你也可以将它`padding-left`移到 CSS 中，而不是让它内联。

[这是和示例小提琴](http://jsfiddle.net/BZNkE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:33:27.240

您可以尝试使单元格的宽度动态化。如果您使用百分比而不是固定宽度，它将自动调整为窗口大小。

```
.imageSide
{
border-width:1px;
border-color:rgb(186,107,255);
border-style:solid;
width:70%;
padding:10px;
background-color:rgb(223,232,237);
float:left;

}

.loginSide
{
float:left;
border-width:1px;
border-right:0px;
border-color:rgb(186,107,255);
border-style:solid;
width:30%;
height:292px;
padding:10px;
background-color:rgb(223,232,237);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:36:22.480

只是不要提供`width`of，`imageSide`因为它必须根据浏览器窗口的剩余宽度进行调整，同时`loginSide`必须坚持自己的*实心*宽度。

试试这个[小提琴](http://jsfiddle.net/ZVMvf/)。

还有一件事，你`float: left`在两者中`loginSide`都使用了`imageSide`，只是在 中使用它`loginSide`，`imageSide`而不是自动调整。

这是*更新的* [小提琴](http://jsfiddle.net/ZVMvf/1/)。

最后，如果你想要自己的代码没有任何改动，我也为你准备了这个。:)

这是您的[*第二个更新*](http://jsfiddle.net/ZVMvf/2/)的[小提琴](http://jsfiddle.net/ZVMvf/2/)`imageSide` `width:792px`也是..

干杯.. :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:58:41.947

想通了，我将图像包装在这个 div 中：

```
<div style = "overflow: hidden;"> 
```

# eclipse - 无法更改日食行长度或注释行长度

> ID：10937719
> 
> 赞同：2
> 
> 时间：2012-06-07T18:30:15.717
> 
> 标签：eclipse

我尝试更改所有换行参数，增加和减少源和注释的最大行长度，以及禁用注释格式。但是，我无法影响代码格式化程序的分行行为。无论我对格式进行什么更改，注释和源代码的行拆分都为 120 个字符。我还尝试将 eclipse 从 3.6 升级到 3.7。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:15:23.613

1.  右键单击您的项目并转到`Properties`
2.  检查`Java Code Style`> `Formatter`>`Enable project specific settings`是否被选中
3.  如果是这样，请检查`Active profile`

我的猜测是`Active profile`选择的选项与您正在编辑的选项不同。删除项目并重新创建它会导致项目返回默认代码样式配置文件，其中`Enable project specific settings`未选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:59:28.947

您是否将线宽更改为：

Preferences > Java > Code Style > Formatter >> 然后编辑最大线宽？

# logging - 在 SSIS 2008 BIDS 中将执行日志写入文件

> ID：10937720
> 
> 赞同：0
> 
> 时间：2012-06-07T18:30:21.053
> 
> 标签：logging, ssis, bids

我使用命令行 (.bat) 执行一个 BIDS 包。该包有一个脚本任务，当在 BIDS 中执行时，该任务成功地将变量写入执行结果：

> （[进程是]信息：变量名）

当我通过批处理执行时，我会记录这个过程。

```
dtexec /FILE "\\Server\FilePath\LoadPackage.dtsx" /MAXCONCURRENT " -1 " /CHECKPOINTING OFF  /REPORTING E >%LOGDIR%\%LogFile% 
```

该过程写入以下内容：

> 适用于 64 位的 Microsoft (R) SQL Server 执行包实用程序版本 10.0.1600.22 版权所有 (C) Microsoft Corp 1984-2005。版权所有。
> 
> 开始时间：下午 2:19:14 DTExec：包执行返回 DTSER_SUCCESS (0)。开始时间：下午 2:19:14 结束时间：下午 2:19:14 经过时间：0.532 秒

我想把变量名写到上面的文件中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:40:33.250

您的批处理脚本已请求 dtexec 报告 E，错误。如果您将 I（信息）添加到该列表中，您应该捕获丢失的事件

从`dtexec /?`

```
/Rep[orting]        Level[;EventGUIDOrName[;EventGUIDOrName[...]]
                    Level = N or V or any one or more of E, W, I, C, D, or P. 
```

你的批处理脚本看起来像 `dtexec /FILE "\\Server\FilePath\LoadPackage.dtsx" /MAXCONCURRENT " -1 " /CHECKPOINTING OFF /REPORTING EI > %LOGDIR%\%LogFile%`

如果这不起作用，请告诉我。

# iphone - 通过应用内电子邮件发送谷歌地图链接

> ID：10937726
> 
> 赞同：-1
> 
> 时间：2012-06-07T18:31:23.310
> 
> 标签：iphone, objective-c, ios

实际上正在开发一个 iOS 应用程序，允许用户通过邮件或短信发送他的位置。

我只想发送一封包含[http://maps.google.com/maps?q=London](http://maps.google.com/maps?q=London)之类的链接的电子邮件， 然后收件人只需触摸该链接即可打开地图应用程序

有什么办法可以提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:50:50.360

这是 iOS 中邮件应用程序的内置功能。如果您通过电子邮件向自己发送[http://maps.google.com/maps?q=London](http://maps.google.com/maps?q=London)，然后在 iOS 设备上打开它，它会自动将其链接到地图应用程序。如果您想从其他应用程序链接到地图应用程序，请参阅此链接[如何从我自己的本机应用程序中启动 Google 地图 iPhone 应用程序？](https://stackoverflow.com/questions/30058/how-can-i-launch-the-google-maps-iphone-application-from-within-my-own-native-ap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:01:28.873

尝试查看`MFMessageComposeViewController`and`MFMailComposeViewController`类。`MFMessageComposeViewController`有`body`属性，`MFMailComposeViewController`有`setMessageBody:isHTML:`方法。

实现这些模式视图控制器后，您可以轻松地使用[http://maps.google.com/maps?q=London](http://maps.google.com/maps?q=London)设置相应的属性/使用相应的方法用您的地图链接以及任何其他方法填充消息/电子邮件正文要添加的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:34:50.633

您可以执行一些操作，例如在电子邮件的消息正文中放置一个超链接，并在制作 MFMailComposeViewController 的消息正文时将 isHTML 属性设置为 YES。

# syntax - 提交后如何使用 window.location.href？

> ID：10937727
> 
> 赞同：0
> 
> 时间：2012-06-07T18:31:28.997
> 
> 标签：syntax, window.location

我试过 window.location.href 没有做任何提交它有效

```
 window.location.href="http://www.google.com"; 
```

但是，如果我必须进行发布提交，那么如果数据有效，我想使用 `window.location.href`Can有人向我解释如何做到这一点来执行重定向吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:35:48.633

如果您使用的是 PHP，您可以简单地使用标题。

```
<?php header("Location: http://google.com"); ?> 
```

至于仅使用 JavaScript 进行重定向...

```
<script> window.location = 'http://google.com'; </script> 
```

# android - Android：用进度对话框填充 Spinner

> ID：10937734
> 
> 赞同：0
> 
> 时间：2012-06-07T18:31:50.930
> 
> 标签：android, nullpointerexception, spinner, progressdialog

我有一个按钮，当我单击它时，我加载了其他 Activity，我调用了一个方法，该方法用来自 Web 服务的数据填充微调器。

好吧，当我单击此按钮时，屏幕保持“冻结”状态，然后显示活动。因此，我认为向用户显示进度对话框可能是一件好事，并在获得 Web 服务的返回后，结束进度对话框。

我尝试使用 Handler，现在我尝试使用 AsyncTask，但是，得到 NullPointerException，因为我的程序在调用 Web 服务之前填充微调器。

```
private void fillSpinner(){
    //runWebService();
    new CallWebServiceAsyncTask().execute(null);

    mAdapter = new PlanesAdapter(this, allPlanes);
    mList.setAdapter(mAdapter);
}

class CallWebServiceAsyncTask extends AsyncTask<Void, Void, Void> {

 private ProgressDialog progressDialog;

 @Override
 protected void onPreExecute() {

    progressDialog = new ProgressDialog(PlanesActivity.this);
    progressDialog.setMessage("Loading...");
    progressDialog.show();

 }

@Override

 protected Void doInBackground(Void... v) {

    runWebService();
    return null;

 }

 @Override

    protected void onPostExecute(Void result) {

    progressDialog.dismiss();

 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:34:37.220

> 因为我的程序在调用 Web 服务之前填充微调器。

您应该在获取数据后填写数据`onPostExecute Method`

```
 @Override

    protected void onPostExecute(Void result) {

    progressDialog.dismiss();

    mAdapter = new PlanesAdapter(this, allPlanes);
    mList.setAdapter(mAdapter);

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:46:30.510

@SamirMangroliya 的建议是正确的，但您甚至需要知道哪里出错了。当您调用 AsyncTask 时，您要求应用程序在后台执行一些操作，这些操作将在非 UI 线程中发生。现在，当您调用`execute()`AsyncTask 对象时，在函数中编写的应用程序代码`doInBackground(Void... v)`在后台运行，并且您的控件返回到调用后的下一条语句`execute()` `[new CallWebServiceAsyncTask().execute(null)]`，在您的情况下是填充适配器值的操作。这些值尚未从 Web 服务接收。您可以确定您的后台操作已完成的唯一地方是`onPostExecute(Void result)`按照建议您可以创建适配器的功能。

# python - 一次安装三个软件包失败：“pip install numpy pil aptus”但它们单独工作，为什么？

> ID：10937735
> 
> 赞同：2
> 
> 时间：2012-06-07T18:31:56.407
> 
> 标签：python, numpy, installation, virtualenv, pip

日志和更多详细信息位于：[https ://gist.github.com/2890621](https://gist.github.com/2890621)

```
stu@vervet ~ $ virtualenv --no-site-packages testingpip
New python executable in testingpip/bin/python
Installing distribute......................done.
stu@vervet ~ $ source testingpip/bin/activate
stu@vervet ~ $ which pip
/home/stu/testingpip/bin/pip
stu@vervet ~ $ which python
/home/stu/testingpip/bin/python
stu@vervet ~ $ pip --log=piplog.log install numpy pil aptus
Downloading/unpacking numpy
...
...
... 
```

*最终，由于 numpy 依赖，命令失败*

但是做：

```
stu@vervet ~ $ pip install numpy
stu@vervet ~ $ pip install pil
stu@vervet ~ $ pip install aptus 
```

*作品*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:11:02.660

这是由Aptus setup.py 文件中的[这一行引起的。](https://bitbucket.org/ned/aptus/src/c053d5f7a949/setup.py#cl-15)

您应该将其报告为 Aptus 的错误。如果 Aptus 依赖于 numpy，它应该将它添加到其依赖项列表中，而不是在安装过程中抛出异常。

Aptus应该被修补成这样的东西：

```
install_requires = []

try: import numpy
except ImportError: install_requires.append('numpy')

setup(
    ...
    install_requires=install_requires,
    ...
) 
```

# java - abstract static member initialization

> ID：10937736
> 
> 赞同：1
> 
> 时间：2012-06-07T18:32:07.327
> 
> 标签：java, abstract-class

I want derived classes to have their own loggers, but it looks like I cannot:

```
abstract class C {
  final protected static Logger l;
  C (...) {
    l.emit("C");
  }
}
class C1 extends C {
  final protected static Logger l = new Logger("C1");
  C1 (...) {
    super(...);
    l.emit("C1");
  }
} 
```

I want a `Logger` in `C1` but not in `C`, so that `new C1()` produces this output:

```
C1: C
C1: C1 
```

(the first line comes from the `C` constructor and the second line from the `C1` constructor). Instead I get a `nullPointerException` in `C` because `l` there is `null`.

I cannot make `l` into `abstract` in `C`, and I do not want to init it there either because then the output would be

```
C: C
C1: C1 
```

What are my options?

Thanks!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T18:33:57.130

# Solution 1 (the classic)

A possible approach would be to have an abstract `getLogger()` method in your abstract class, so that derived classes are forced to provide their own logger.

```
public class AbstractClass {
  abstract Logger getLogger();

  public void someMethodInAbstractClass() {
    getLogger().debug("something"); // will output using provided child logger
  }
}

public class ConcreteClass extends AbstractClass {
  private static final Logger LOGGER = Logger.getLogger(ConcreteClass.class);

  @Override
  Logger getLogger() {
    return (LOGGER);
  }

  public void someMethod() {
    getLogger().debug("something"); // will output using local logger
  }
} 
```

You could also provide a default implementation in the abstract class to not force the child to implement an override. You make it easier on the consumers of your abstract class (developing concrete classes), but you won't enforce the fine graining of the method.

# Solution 2 (long-winded...)

Another, more violent solution would be to have a `getMagicLogger()` method in the abstract class, that will determine at runtime the concrete type of the current instance to return a new logger instance, either every time or by lazy loading it and storing it in a field.

This way the abstract class handles it all and it's very easy for consumers, but it's kind of a crazy thing to do. AND, that means the Logger won't be a static field, obviously.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T18:35:35.280

There's no attribute overriding for static members, the `l` logger in `C` is the one declared in `C` (which is null) and *not* the one from the `C1` subclass.

# html - 有什么方法可以在 Twitter 上重新创建 CSS 狗耳朵效果吗？

> ID：10937737
> 
> 赞同：1
> 
> 时间：2012-06-07T18:32:09.190
> 
> 标签：html, css, twitter

当您在 Twitter 上转发或收藏时，一个带有图标的小彩色三角形会出现在包含该推文的 div 的角落。我从 Twitter 复制了 CSS 和 sprite 表，并尝试在我的网站上重新创建它，但它并没有完全按计划进行（三角形根本没有使用完全相同的 CSS 出现）。那么，如何在我的网站上的 div 的角落添加三角形“狗耳朵”效果？

这是我从 Twitter 复制的代码：

```
.dogear {
  position:absolute;
  top:0;
  right:0;
  display:none;
  width:24px;
  height:24px;
}

.retweeted .dogear {
  background-position:0 -450px;
}

.favorited .dogear {
  background-position:-30px -450px;
}

.retweeted.favorited .dogear {
  background-position:-60px -450px;
}

.retweeted .dogear,.favorited .dogear,.retweeted.favorited .dogear{
  display:block;
}

i {
  background-image: url("../sprite.png") !important;
  display: inline-block;
  vertical-align: text-top;
  background-image: url("../sprite.png");
  background-position: 0px 0px;
  background-repeat: no-repeat;
} 
```

并使用以下方法插入 HTML：

```
<i class="dogear"></i> 
```

我更改了精灵表 URI，我打算更改类名，并添加一些，所以它不完全相同。是否有可能使这种效果起作用？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:38:51.183

您需要为`z-index`包含折耳的元素添加一个更大的属性，以便它出现在您希望它看起来重叠的元素的顶部。

`z-index`用于控制绝对定位、相对定位或固定定位的元素的堆叠顺序。

`z-index` [您可以在 Mozilla Developer Network 上](https://developer.mozilla.org/en-US/docs/Web/CSS/z-index)阅读更多信息。

此外，您正在使用`dogear`该类，而我从您粘贴的代码中可以看出这一点。如果您查看样式表中的类定义，则会被告知不显示：`display: none;`

# jquery-mobile - 带有木偶或卓别林的 jQuery Mobile？

> ID：10937738
> 
> 赞同：2
> 
> 时间：2012-06-07T18:32:09.243
> 
> 标签：jquery-mobile, backbone.js, marionette

过去我使用 Backbone 编写了几个基于 Web 的应用程序，但现在我正在使用 Backbone.js 和 jQuery Mobile 开始一个新的移动应用程序。我正在考虑使用[Marionette](https://github.com/derickbailey/backbone.marionette)或[Chaplin](https://github.com/chaplinjs/chaplin)来帮助提供更好的结构、视图管理和内存管理。最终，这将使用 PhoneGap 完成，以部署为企业应用程序。

但是，我似乎找不到任何可以表明其中任何一个都可以与 jQuery Mobile 一起工作（或不工作）的东西。为了从中获得最大的好处，我知道我必须禁用 jQuery Mobile，这很好。我还看到了一些关于[require.js 和 JQM 也不能很好地协同工作](https://stackoverflow.com/questions/10904433/jquery-mobile-require-js-and-backbone)的问题。那么有没有人知道使用这些 Backbone 框架中的任何一个来开发移动站点是否容易，并且可以很好地与 JQM 配合使用？或者有另一个专门为与 JQM 一起使用而设计的基于 Backbone 的框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:18:12.790

我所知道的最好的 Backbone + JQM 教程是[http://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/](http://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/)

Marionette 应该可以正常工作 - 尽管目前它会相当慢。我已经在我的手机浏览器上运行了基于 Marionette 的网络应用程序并且它运行......但我也知道它运行缓慢。我正在为下一个版本 (v0.9) 进行性能改进，但这可能还需要一到两周的时间，这取决于我在下一份合同开始前还有多少时间。

# php - 从基于 xml 的关联数组中获取属性

> ID：10937739
> 
> 赞同：0
> 
> 时间：2012-06-07T18:32:09.943
> 
> 标签：php, xml

我有一个返回关联数组的 xml 解析器。这是结构：

```
<addresses id="123">
  <anonymous-address> <test>data 1 </test>
  </anonymous-address>
</addresses>

print_r($this->params) will return 
Array
(
    [addresses] => Array
        (
            [id] => 123
            [anonymous-address] => Array
                (
                    [0] => Array
                        (                                
                            [test] => Array
                                (
                                    [VALUE] => data 1
                                ))))) 
```

然后这个数组通过 list() 传递为：

```
list($root, $data) = $parsedXML; 
```

然后我尝试从 root 获取一个 id 属性并以这种方式读取：

```
$id = $data[$root]['id']; 
```

编辑：这适用于除 400 的一个 $root 值之外的所有值。这种开关 ($root) 的情况与其他情况具有相同的代码，所以我不知道为什么它只在那里出错。

var_dump($root, $data) 输出

```
string (9)  "addresses"
array(1)  {
    ["addresses"]=>
    array(2)  {
        ["id"]=>
        string(3)  "123"
        ["anonymous-address"]=>
        array(1)  {
            ["VALUE"]=>
            string(7)  "data 1 "
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:36:44.407

```
$a = list($root, $data); 
```

现在 $a 将是：

```
array(0 => $root, 1 => $data); 
```

所以你可以像这样得到它们：

```
$a[0], $a[1] 
```

所以可能

```
$id = $a[1][$a[0]]['id']; 
```

# flash - 如何让我的 FDT 4.X 模板在 FDT 5.5+ 中工作？

> ID：10937748
> 
> 赞同：0
> 
> 时间：2012-06-07T18:32:47.250
> 
> 标签：flash, templates, installation, fdt

我对在 FDT4.5 中制作新项目模板很有信心，但我似乎无法在 FDT5.5 中做同样的事情

此外 - 当我创建一个新项目时，我只能在新项目向导中看到一种项目类型（Web），而以前对模板如何工作的了解表明应该有 AS3、Basic、Flash Professional 和 Flex - 请参阅附加图像。

新项目的模板方式是否发生了变化？还是我的新项目选项列表未正确初始化？

你可以看到我试图在我的列表中添加一个新的项目类型（FlashDevelop-FDT Hybrid），我以前能够为 FDT4.5 做这允许我在 FDT 项目中拥有像源一样设置的源文件FlashDevelop 项目中的文件。但是，正如您从屏幕截图中看到的那样，我的新 FlashDevelop - 新 Web 项目的选项中缺少 FDT Hybrid - AS3、Basic、Flash Professional 和 Flex 也是如此。

![在此处输入图像描述](../Images/32b18a79ba409c385d019af3d62eea28.png) ![在此处输入图像描述](../Images/d033b2a1f56ba0b4e0bc0a4ed6983ccd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:32:49.357

您需要确保模板的版本正确：

```
<version>2.5</version> 
```

否则 FDT 5.5+ 将忽略它。

因为模板和项目类型在主要版本之间会发生变化，所以最好的办法是复制现有的工作模板，然后添加您希望拥有的旧模板的部分。

# ruby-on-rails - 如何让 Ruby 视图加载 Bootstrap css 库？

> ID：10937753
> 
> 赞同：0
> 
> 时间：2012-06-07T18:32:52.680
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap, haml

我有一个 ruby​​ on rails 应用程序，我试图让按钮从 bootstrap css 库中继承一些样式。

我已经在应用程序的其他地方定义了 css 库的导入，并且它可以工作。

现在我正在使用 HAML 并尝试将链接呈现为这样的按钮：

```
 =link_to((t "some_path"), some_url(disclosure), :class => "btn" ) 
```

但 btn 没有得到认可。我需要做什么才能正确引用 bootstrap.css？

在识别 twitter 引导 css 的另一个命名空间中，我有一个清单文件，如下所示：

```
/*
 * THIS IS THE MANIFEST FILE FOR THE LAYOUT
 *= require_self
 *= require bootstrap
 *= require bootstrap-responsive
 *= require bootstrap_overrides
*/ 
```

但我不确定我正在处理的其他代码是否需要它。如果我这样做，我该如何配置它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:13:30.490

我喜欢使用 bootstrap-sass gem

```
gem 'bootstrap-sass', '~> 2.0.0' 
```

然后导入引导程序`application.css.scss`

```
@import 'bootstrap'; 
```

不是您的问题的一部分，但我还包括一些来自引导程序的 JS 元素`application.js`

```
//= require bootstrap 
```

# php - for循环内的PHP post方法导致无限循环

> ID：10937760
> 
> 赞同：1
> 
> 时间：2012-06-07T18:33:21.240
> 
> 标签：php, for-loop

我有一组字段，例如 field1、field2、... field10。

我将这个值从一个页面传递到另一个页面，并使用 for 循环内的 post 方法获取值，如下所示..

```
for ( $i = 1; $i <= 10; $i++) {
$txtfield.$i = $_POST[field.$i]; 

echo $txtfield.$i;
} 
```

这使得无限循环连续打印 field1 的值..

最后出现这个错误..

```
Fatal error: Maximum execution time of 60 seconds exceeded in C:\xampp\htdocs\... 
```

这段代码有什么错误？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:38:56.843

我不知道“字段”的值是什么，它不应该是带有$的变量吗？

无论如何，我认为你想这样做：

```
for ( $i = 1; $i <= 10; $i ++) {
    $varname = ($txtfield . $i);
    $$varname = $_POST[field.$i]; 

    echo $$varname;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:41:09.323

您`$i`每次都在这里重新分配`$_POST[field.$i]`

```
$txtfield.$i = $_POST[field.$i] 
```

有点像这样，第二行是非表达式：

```
$i = $_POST[field.$i];
$txtfield.$i; 
```

# actionscript-3 - 编译为 swf 的 Web 应用程序

> ID：10937761
> 
> 赞同：0
> 
> 时间：2012-06-07T18:33:21.347
> 
> 标签：actionscript-3, ant, compilation, flash

我有一个 swf 模板，可以用于不同的数据输入，例如颜色、文本等。但是我不想使用将数据绑定到它的普通方式，例如 xml。我希望应用程序能够生成包含所有数据的已编译 swf。

是否可以在编译时注入数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:43:29.790

应该是，但取决于您想弄乱模板代码的程度。

您可以在 Flash 中嵌入资源，这样您就可以[在 XML](http://flashgamedojo.com/wiki/index.php?title=Embedding_XML_in_AS3)中嵌入您想要的信息。

然后，您需要做的就是在代码中找到加载 XML 文件的位置，并为其提供您自己的嵌入式 XML 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:50:35.897

是的，这是可能的，但前提是您有权访问源 .fla 文件，以便您可以从中生成新的 .swf 文件。

如果您只是想更改 .fla 文件中某些对象的一些颜色或其他外观，您应该能够做到这一点而不必弄乱 xml，只需在 Flash 中打开库项目并编辑它们的颜色。

如果您想将外部资产放入实际的 .swf 中，您也可以这样做，但如果您已经拥有它来提取外部资产，我建议您保持这种方式。

对于 XML，在 ActionScirpt 中，您实际上可以在实际的 Actionscript 代码中声明 XML。打开 XML 文件并将 XML 内容复制到解析它的代码中。

对于图像，您只需将图像文件直接拖到舞台上或拖到库中即可。

# java - 在 JSP 中调用 Spring bean 方法

> ID：10937762
> 
> 赞同：1
> 
> 时间：2012-06-07T18:33:22.910
> 
> 标签：java, spring, jsp

我有一个java类

LayoutManager.java，我使用它作为 Sprean Bean 传递到我的 jsp 页面中

```
 <custom:useSpringBean var="layoutManager" bean="LayoutManager"/> 
```

如何使用 spring bean 从我的 jsp 中的 LayoutManager.java 调用方法？

我觉得我会使用某种形式的 servlet <% %>，但不确定语法

我想调用方法

```
 public Iterable<Layouts> getSpecificLayout(String subjectName) 
```

我现在唯一的弹簧代码是

```
 public class UseSpringBean extends SimpleTagSupport
 {
     public void doTag() throws JspException, IOExceptionP
        PageContext pageContext = (PageContext)getJspContext();
        WebApplicationContext springContext = WebApplicationContextUtils.getWebApplicationContext(pageContext.getServletContext());
        pageContext.setAttribute(var, springContext.getBean(bean), PageContxt.PAGE_SCOPE);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:49:15.057

如果您真的希望`Layouts`在 jsp 页面中使用列表，那么您需要从 spring 控制器中添加此列表，`ModelMap`以便它在 jsp 页面中可见。

就像是：

```
@RequestMapping(value="/getSpecificLayout", method = RequestMethod.GET)
public String getSpecificLayout(Stirng subjectName, ModelMap model){
    Iterable<Layouts> layouts = getSpecificLayout(String subjectName);
    model.addAttribute("layouts", layouts);
    return "listLayouts";
} 
```

在jsp中：

```
<c:for items="listLayouts" var="layout">
  <c:out value="layout.name"/>
</c:for> 
```

（这不是经过测试的代码，只是一个示例。抱歉，代码编辑无法正常工作，我的意思是我无法看到内联编辑器）。

# java - 被测单元：Impl 还是 Interface？

> ID：10937763
> 
> 赞同：33
> 
> 时间：2012-06-07T18:33:25.280
> 
> 标签：java, unit-testing, dependency-injection, mockito

假设我有实现它的接口和实现类，并且我想为此编写单元测试。我应该测试什么接口或Impl？

这是一个例子：

```
public interface HelloInterface {
    public void sayHello();
}

public class HelloInterfaceImpl implements HelloInterface {
    private PrintStream target = System.out;

    @Override
    public void sayHello() {
        target.print("Hello World");

    }

    public void setTarget(PrintStream target){
        this.target = target;
    }
} 
```

所以，我有实现它的 HelloInterface 和 HelloInterfaceImpl 。什么是被测单元接口或 Impl？

我认为应该是HelloInterface。考虑下面的 JUnit 测试草图：

```
public class HelloInterfaceTest {
    private HelloInterface hi;

    @Before
    public void setUp() {
        hi = new HelloInterfaceImpl();
    }

    @Test
    public void testDefaultBehaviourEndsNormally() {
        hi.sayHello();
        // no NullPointerException here
    }

    @Test
    public void testCheckHelloWorld() throws Exception {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        PrintStream target = new PrintStream(out);
        PrivilegedAccessor.setValue(hi, "target", target);
        //You can use ReflectionTestUtils in place of PrivilegedAccessor
        //really it is DI 
        //((HelloInterfaceImpl)hi).setTarget(target);
        hi.sayHello();
        String result = out.toString();
        assertEquals("Hello World", result);

    }
 } 
```

主线实际上是我注释掉的一条。

`((HelloInterfaceImpl)hi).setTarget(target);`

方法`setTarget()`不是我的公共接口的一部分，所以我不想不*小心*调用它。如果我真的想调用它，我应该花点时间考虑一下。例如，它帮助我发现我真正想做的是依赖注入。它为我打开了整个世界的新机遇。我可以使用一些现有的依赖注入机制（例如 Spring 的），我可以自己模拟它，就像我在代码中实际所做的那样，或者采用完全不同的方法。仔细看看，PrintSream 的准备并不容易，也许我应该使用模拟对象来代替？

**编辑**：我认为我应该*始终*关注界面。从我的角度来看`setTarget()`，它也不是 impl 类的“合同”的一部分，它为依赖注入服务。我认为从测试的角度来看，任何 Impl 类的公共方法都应该被认为是私有的。不过，这并不意味着我忽略了实现细节。

另请参阅[私有/受保护的方法是否应进行单元测试？](https://stackoverflow.com/questions/5601730/tdd-should-private-protected-methods-be-under-unit-test)

**EDIT-2**在多个实现\多个接口的情况下，我会测试所有的实现，但是当我在我的`setUp()`方法中声明一个变量时，我肯定会使用接口。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-07T18:42:11.377

实现是需要测试的单元。这当然是您要实例化的内容以及包含程序/业务逻辑的内容。

如果您有一个关键接口并且您想确保每个实现都正确地遵守它，那么您可以编写一个专注于接口并要求传入实例的测试套件（与任何实现类型无关）。

是的，将 Mockito 用于 PrintStream 可能会更容易，但可能并不总是可以避免像在这个特定示例中那样使用模拟对象。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T18:41:11.957

我会测试界面。

我认为错误在于编写实现的方式是硬连线写入 System.out；你让自己无法用另一个 PrintStream 覆盖。我会使用构造函数而不是 setter。没有必要以这种方式模拟或铸造。

这是一个简单的案例。我想一个更复杂的会有一个工厂来创建不同的、更复杂的接口实现。希望你不会以这样的方式设计它，你会被装箱。

在您的测试中坚持使用界面也会使模拟变得更加容易。

```
public class HelloInterfaceImpl implements HelloInterface {

    private PrintStream target;

    public HelloInterfaceImpl() {
        this(System.out);
    }

    public HelloInterfaceImpl(PrintStream ps) { 
       this.target = ps;
    }

    @Override
    public void sayHello() {
        target.print("Hello World");
    }
} 
```

这是测试：

```
public class HelloInterfaceTest {

    @Test
    public void testDefaultBehaviourEndsNormally() {
        HelloInterface hi = new HelloInterfaceImpl();    
        hi.sayHello();
    }

    @Test
    public void testCheckHelloWorld() throws Exception {
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        PrintStream target = new PrintStream(out);
        HelloInterface hi = new HelloInterfaceImpl(target);    
        hi.sayHello();
        String result = out.toString();
        assertEquals("Hello World", result);
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-07T19:59:21.813

我总是测试实现——一个类可以实现多个接口，一个接口可以由多个类实现——每个类都应该被测试覆盖。

在单元测试中调用setter的要求（将接口转换为实现）：

```
((HelloInterfaceImpl)hi).setTarget(target); 
```

意味着您实际测试了实现。这不是合同的一部分，但这是使实施工作的重要部分，应该进行适当的测试。

让我们以JDK为例。您有接口`List`和两个实现：`ArrayList`和`LinkedList`. 另外`LinkedList`实现`Deque`接口。如果您为`List`接口编写测试，您会涵盖什么？数组还是链表？更重要的是`LinkedList`，您会选择测试什么接口？`Deque`还是`List`？如您所见，当您测试实现时，您不会遇到此类问题。

就我个人而言，在单元测试中将接口转换为实现显然是出现问题的迹象；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T19:50:36.007

我会说这取决于实现以及它在接口合同之外的作用。许多实现只实现接口中提供的功能，而在其他实现中，接口只是类功能的一小部分。它可以实现多个接口。

最终，您正在测试实现。

在您定义的简单案例中，我说六个中的一个和六个另一个。将您的测试用例写入接口或实现，只要它充分测试*实现*，结果是相同的。

举一个不同的例子，我会有一个类，通过装饰**真实的**读者和作者来收集通信渠道的统计信息。我的类现在可能实现了这些接口，但它也收集统计信息，这与任一合同无关。我当然仍然可以基于这些接口编写测试，但它不会完全测试这个类。

# c++ - 何时使用 std::string 与 char*？

> ID：10937767
> 
> 赞同：13
> 
> 时间：2012-06-07T18:33:43.413
> 
> 标签：c++, std

> **可能重复：**
> [C++ char* vs std::string](https://stackoverflow.com/questions/801209/c-char-vs-stdstring)

我是来自 C# 的 C++ 新手，但我确实更喜欢 C++。

我有一个抽象类，它定义了两个常量字符串（不是静态的）。我想知道 a`const char*`是否会是更好的选择。我仍然了解 C++ 标准，但我只是认为在这种特殊情况下我确实没有任何理由需要使用 std::string （不附加或编辑字符串，只需写入通过控制台`printf`）。

`std::string`我应该在每种情况下都坚持吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T18:34:37.807

在每种情况下我都应该坚持使用 std::string 吗？

是的。

除了一些边缘情况，您编写高性能多线程日志库并且您确实需要知道何时进行内存分配，或者可能在某些低级协议中摆弄数据包标头中的各个位/司机。

问题是你从一个简单的 char 开始，然后你需要打印它，所以你使用 printf()，然后可能是 sprintf() 来解析它，因为 std::stream 对于一个 int 到字符串来说会很痛苦。你最终会得到一个不安全和不可维护的混合 oc c/c++

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T18:39:24.893

我会坚持使用`std::string`而不是`const char*`，因为大多数内置 C++ 库都使用字符串而不是字符数组。`std::string`有很多内置的方法和设施，在操作字符串时给程序员很大的权力。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T18:36:23.893

> 在每种情况下我都应该坚持使用 std::string 吗？

在某些情况下`std::string`不需要，只需一个简单的`char const*`就可以了。但是，除了操作之外，您确实获得了其他功能，您还可以与其他*字符串*和*字符数组*进行比较，以及对它们进行操作的所有标准算法。

我会说`std::string`默认情况下使用*（对于成员和变量）*，然后仅在您碰巧看到这是性能下降的原因时才更改*（它不会）*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T18:48:42.773

这就像将苹果与橙子进行比较。`std::string`是一个容器类，而 char* 只是一个指向字符序列的指针。

这真的完全取决于你想对字符串做什么。

另一方面，Std::string 可以让您快速访问简单的字符串计算和操作功能。其中大部分都是简单的字符串操作函数，没什么特别的。

所以它基本上取决于你的需求以及你的函数是如何声明的。std::string 优于 char 指针的唯一优点是它不需要特定的长度减值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T18:38:51.383

`std::string`在需要存储值时使用。

当您想要最大的灵活性时使用`const char *`，因为几乎所有东西都可以轻松转换为一个或从一个转换。

# mysql - 在 pythonanywhere 上备份 mysql 数据库

> ID：10937775
> 
> 赞同：3
> 
> 时间：2012-06-07T18:34:02.277
> 
> 标签：mysql, pythonanywhere

我是 MySQL 新手，知道如何使用 mysqldump 实用程序备份数据库。但是，我认为它没有安装在 pythonanywhere 上。对于如何备份我在 pythonanywhere 上创建的 mysql 数据库的任何建议，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T10:31:16.540

[更新]

我们现在已经`mysqldump`通过 bash 控制台会话提供了二进制文件，因此您可以继续使用它！

（对于任何好奇/受类似问题影响的人，历史答案如下）

> PythonAnywhere 管理员在这里，我们将尝试尽快包含 mysqldump。
> 
> 与此同时，也许某种序列化可能是答案？
> 
> 例如，如果您使用 Django，您可以使用它的 ORM 将每条记录转换为某种 JSON 或 XML 序列化表示，然后将它们转储到文本文件中......
> 
> Django 有一个你可以使用的管理命令：
> 
> ```
> python manage.py dumpdata my_app > my_app_dump.json 
> ```
> 
> 更多信息在这里： [https ://docs.djangoproject.com/en/dev/ref/django-admin/#dumpdata-appname-appname-appname-model](https://docs.djangoproject.com/en/dev/ref/django-admin/#dumpdata-appname-appname-appname-model)
> 
> 如果您不使用 django，也许 SQLAlchemy 之类的东西可以提供帮助？这里有一些指针： [如何将 SqlAlchemy 结果序列化为 JSON？](https://stackoverflow.com/questions/5022066/how-to-serialize-sqlalchemy-result-to-json)
> 
> 也许我们会快点把 mysqldump 放进去！

# android - 如何为 Android 生成 Google 地图发布密钥

> ID：10937777
> 
> 赞同：-1
> 
> 时间：2012-06-07T18:34:02.537
> 
> 标签：android, google-maps, key

如何生成 Google Api 发布密钥？在开发环境中，我使用 debug.keystore 生成调试密钥。但我现在即将向市场发布 Android 应用程序。那么如何生成释放密钥呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:50:09.037

谷歌了很多，直到为我找到了一个。

这是命令在命令提示符中的外观

```
C:\Program Files\Java\jre7\bin> keytool -v -list -keystore C:\Users\Andranik\.android\MyKeystore 
```

不复制 MD5 并转到[此处](https://developers.google.com/android/maps-api-signup)。在这里你得到了 apiKey。

替换你的钥匙，`HERE_YOUR_KEY`然后就可以了。

```
<com.google.android.maps.MapView
        android:id="@+id/myGMap"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:enabled="true"
        android:clickable="true"
        android:apiKey="HERE_YOUR_KEY"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:46:23.960

您需要知道的一切都记录[在这里 - 获取 Google Maps Android API 密钥](https://developers.google.com/maps/documentation/android/mapkey)。

# apache-poi - 如何使用 apache poi eventusermodel 从 .xlsx 文件到工作簿？

> ID：10937778
> 
> 赞同：0
> 
> 时间：2012-06-07T18:34:02.707
> 
> 标签：apache-poi, xssf, hssf

我需要同时使用 xls 和 xlsx。使用 xssf 时出现内存不足错误，因此我更改为 sxssf，虽然这不起作用，但我想更改我的代码以使用 eventusermodel 而不是 ss usermodel。不幸的是，我不太了解如何使用事件 api，所以如果有人可以提供一些示例代码来从文件文件或输入流转到工作簿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:25:54.317

您应该使用 Event API，这意味着您需要结合 SAX 进行读取和`SXSSFWorkbook`写入。

这个[例子](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xssf/eventusermodel/XLSX2CSV.java)是一个 Excel 到 CSV 的转换器。您应该在 endElement() 方法中做同样的事情。如果未创建，则应创建一个新行，并在每次有值时创建一个新单元格 (name=="v")。设置单元格的类型和新值：

```
if ("v".equals(name)) {
            if (row == null)
                row = sheet.createRow(0);
            cell = row.createCell(thisColumn);

            switch (nextDataType) {
            case BOOL:
                cell.setCellType(Cell.CELL_TYPE_BOOLEAN);
                char first = value.charAt(0);
                thisStr = first == '0' ? "FALSE" : "TRUE";
                if (thisStr == "FALSE")
                    cell.setCellValue(false);
                else
                    cell.setCellValue(false);

            case OTHER_CELL_TYPE:
                 //.... 

            default:
                cell.setCellType(Cell.CELL_TYPE_BLANK);
                break;
            }
             //......More proccessing
} 
```

这里有[apache poi SXSSF 示例](http://poi.apache.org/spreadsheet/how-to.html#sxssf)，以便更好地了解如何保存它。

# php - 未收到来自 PHP mail() 联系表的电子邮件

> ID：10937781
> 
> 赞同：0
> 
> 时间：2012-06-07T18:34:06.483
> 
> 标签：php, forms, email, cpanel, contact

我知道这个问题已经被问过无数次了，但我一直找不到适合我的答案。

我的联系表格似乎验证得很好，当输入合适的数据并单击“发送消息”按钮时，会显示一条消息，说明该消息实际上已发送。屏幕上没有错误消息。

**我的 html 代码如下所示：**

```
<form action="send.php" id="contact_form" method="post" name="contact_form">
  <ul>
    <li>
      <label>NAME <span class="required">*</span></label>
      <input type="text" name="name" id="name" value="" class="requiredField" />
    </li>
    <li>
      <label>EMAIL <span class="required">*</span></label>
      <input type="text" name="email" id="email" value="" class="requiredField email" />
    </li>
    <li class="textarea">
      <label>MESSAGE <span class="required">*</span></label>
      <textarea name="message" id="message" rows="20" cols="30" class="requiredField"></textarea>
    </li>
    <li class="button_form">
      <input name="submitted" id="submitted" value="Send Message" class="submit" type="submit" />
      <input id="reset" type="reset" value="Reset Form" class="submit" />
    </li>
  </ul>
</form>
<script type="text/javascript">
  //<![CDATA[
  $(document).ready(function(){
    $("#form").validate();
  });
  //]]> 
```

**我的 JS 看起来像这样：**

```
$(document).ready(function() {
  $('form#contact_form').submit(function() {
    $('form#contact_form .error').remove();
      var hasError = false;
      $('.requiredField').each(function() {
        if(jQuery.trim($(this).val()) == '') {
          var labelText = $(this).prev('label').text();
          $(this).parent().append('<span class="error">Please enter your '+labelText+'</span>');
          $(this).addClass('inputError');
          hasError = true;
        }
        else if($(this).hasClass('email')) {
          var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
          if(!emailReg.test(jQuery.trim($(this).val()))) {
            var labelText = $(this).prev('label').text();
    $(this).parent().append('<span class="error">Please a valid '+labelText+'</span>');
            $(this).addClass('inputError');
            hasError = true;
          }
        }
      });

      if(!hasError) {
        $('form#contact_form input.submit').fadeOut('normal', function() {
          $(this).parent().append('');
        });
        var formInput = $(this).serialize();
        $.post($(this).attr('action'),formInput, function(data){
        $('form#contact_form').slideUp("fast", function() {
      $(this).before('<p class="success">Thank you!<br/>Your email was sent successfully.<br/>I will contact you as soon as possible.</p>');
        });
      });
    }

    return false;
  });
}); 
```

**我的 PHP 看起来像这样：**

```
<?php 
error_reporting(E_ALL ^ E_NOTICE); // hide all basic notices from PHP

if(!isset($hasError)) {

  $emailTo = 'name@domain.com';
  $subject = 'Submitted message from '.$name;
  $sendCopy = trim($_POST['sendCopy']);
  $body = "Name: $name \n\nEmail: $email \n\nComments: $comments";
  $headers = 'From: ' .' <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email;

  mail($emailTo, $subject, $body, $headers);

  $emailSent = true;
}
}
?> 
```

我在代码中遗漏了什么吗？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T14:38:45.297

您的服务器中使用的电子邮件系统是什么。你有 sendmail、SMTP 等吗？我的意思是你是否检查了 php.ini 文件中的邮件端口（例如：smtp_port）和 smtp ip 地址（“localhost 或 192.168.132.1 等”）等。

如果这些设置有问题，那么您的邮件将无法正常工作。最好是先检查 smtp，因为它比 sendmail 快。您可以为此目的使用 google smtp 设置。检查此链接[https://www.digitalocean.com/community/articles/how-to-use-google-s-smtp-server](https://www.digitalocean.com/community/articles/how-to-use-google-s-smtp-server)。

# mysql - mysql查询上真的很奇怪的错误

> ID：10937783
> 
> 赞同：1
> 
> 时间：2012-06-07T18:34:15.563
> 
> 标签：mysql

我有这个查询，我认为它会自己说话：

```
mysql> select id,email from members where email LIKE "%abraham.sustaita@gmail.com%";
+--------+----------------------------+
| id     | email                      |
+--------+----------------------------+
| 272118 | abraham.sustaita@gmail.com | 
+--------+----------------------------+
1 row in set (0.69 sec)

mysql> select id,email from members where email = "abraham.sustaita@gmail.com";
Empty set (0.00 sec)

mysql> select id,email from members where id = 272118;
Empty set (0.00 sec) 
```

数据存在，但如果我使用 LIKE 以外的其他数据，它会返回空...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:04:19.813

当存在如此明显的不可能的查询序列时，是时候考虑表（或索引）损坏并运行 Mysql`CHECK`命令了。

在这种情况下，跑步 `REPAIR TABLE members QUICK`就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:41:53.003

如果 id 是 varchar 而 email 是 varchar 他们可能有周围的空格。

# php - php传参问题

> ID：10937794
> 
> 赞同：0
> 
> 时间：2012-06-07T18:34:47.767
> 
> 标签：php, parameters, hyperlink, echo

这是我的代码：

```
<?php
$lijstDoelmannen = mysql_query("SELECT * FROM Speler WHERE positie = 'Doelman' ORDER BY familienaam, voornaam");
$teller = 1;
while($rij = mysql_fetch_array($lijstDoelmannen))
{
    if($teller < 5){
        echo "<td><a href='spelerDetail.php?spelerId='" . $rij['id'] . "><img src='images/spelers/unknown.png' alt='' width='50' />
            <br /><br />" . $rij["id"] . " " . $rij['familienaam'] . " " . $rij['voornaam'] . "</a></td>";
    }
}
?> 
```

问题在于超链接中的参数 spelerId = 空格（未填写）。如果我 echo `$rij["id"]`，它会给我正确的价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:36:48.183

```
<a href='spelerDetail.php?spelerId='" . $rij['id'] . "> 
```

您需要移动撇号：

```
<a href='spelerDetail.php?spelerId=" . $rij['id'] . "'> 
```

在添加变量之前，它当前正在结束链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:41:41.193

你也可以这样做：

```
echo "<td><a href='spelerDetail.php?spelerId={$rij['id']}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:42:40.507

你`'`在你的`href`.

```
"...<a href='spelerDetail.php?spelerId='" . $rij['id'] . ">..." 
```

这应该是：

```
"...<a href='spelerDetail.php?spelerId=" . $rij['id'] . "'>..." 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:48:05.607

```
while($rij = mysql_fetch_array($lijstDoelmannen))
{
if($teller < 5){
    echo "<td><a href='spelerDetail.php?spelerId='" . $rij['id'] . "><img src='images/spelers/unknown.png' alt='' width='50' />
        <br /><br />" . $rij["id"] . " " . $rij['familienaam'] . " " . $rij['voornaam'] . "</a></td>";
}
}
?> 
```

我更喜欢以这种方式编写上面的代码来解决这些类型的问题：

```
while($rij = mysql_fetch_array($lijstDoelmannen)){
if($teller < 5){ ?>
    <td><a href="spelerDetail.php?spelerId=<?php echo $rij['id'] ?>">
    <img src="images/spelers/unknown.png" alt="" width="50" />
    <br /><br /><?php echo $rij['id'] . " " . $rij['familienaam'] . " " . $rij['voornaam'] ?></a></td>
<?php }} ?> 
```

# php - 基本 PHP 搜索（引擎）脚本

> ID：10937795
> 
> 赞同：0
> 
> 时间：2012-06-07T18:34:49.510
> 
> 标签：php, search-engine

我的 PHP 脚本需要检查整个数据数组中的匹配项。它目前正在寻找精确的字符串匹配。我希望它不那么严格。

例如，如果数组包含字符串“Tom and Jerry”，我想为“Tom and Jerry”、“Tom & Jerry”甚至“Tom and Jerry”返回true。我发现 PHP 搜索引擎的链接更复杂，并不是我真正需要的。我的数据相当小而且动态，所以没有索引。

我知道我可以写一个毛茸茸的正则表达式，但我很确定我会重新发明轮子，因为我确信其他人已经这样做了。任何关于在哪里寻找或如何解决这个问题的建议将不胜感激。

编辑：为了澄清，我试图避免将所有动态生成的数据输入数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:36:26.873

如果数据在 MySQL 中，您可以使用[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)。这很容易开发；问题是：这样的解决方案会不会太重？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:04:15.657

它可能需要一些试验和错误，但你可以这样做：

*   手动列出可能不存在的单词，例如“and”、“in”、“of”等（例如在您的`Tom Jerry`示例中）。
*   计算字符串和搜索查询之间的[汉明距离。](https://en.wikipedia.org/wiki/Hamming_distance)如果它很低（可能最多一两个），则返回 true。
*   否则，返回假。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:27:12.037

我刚刚发现了两个似乎可以满足我要求的功能：

[`similar_text()`](http://ca2.php.net/manual/en/function.similar-text.php)

[`levenshtein()`](http://ca2.php.net/levenshtein)

两者似乎都返回一个表示两个字符串之间匹配“接近度”的整数。两者之间的差异超出了我的想象。

我的搜索得到了[这个 SO question](https://stackoverflow.com/questions/3149970/compare-text-strings-to-see-if-they-match-allow-slight-differences)的帮助。

# python - 当我运行一个非常简单的 py2exe 测试时，它给了我错误

> ID：10937798
> 
> 赞同：4
> 
> 时间：2012-06-07T18:34:55.613
> 
> 标签：python, exe, py2exe

我写了一个非常简单的名为 test.py 的程序，它看起来像这样：

```
print 'hello world' 
```

然后我编写了一个名为 setup.py 的安装程序，如下所示：

```
from distutils.core import setup
import py2exe

setup(console=['test.py']) 
```

它们都在同一个文件夹中，所以它应该可以工作。当我运行 setup.py 时，它会给出如下所示的错误消息：

```
C:\Python26\lib\sets.py:85: DeprecationWarning: functions overriding warnings.showwarning() must support the 'line' argument
  stacklevel=2)
Traceback (most recent call last):
  File "C:\Users\python2.6\Desktop\program\pygametests\setup.py", line 5, in <module>
    setup(console=['test.py'])
  File "C:\Python26\lib\distutils\core.py", line 140, in setup
    raise SystemExit, gen_usage(dist.script_name) + "\nerror: %s" % msg
SystemExit: usage: setup.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
   or: setup.py --help [cmd1 cmd2 ...]
   or: setup.py --help-commands
   or: setup.py cmd --help

error: no commands supplied 
```

我正在运行Windows Vista。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:38:52.770

您应该转到保存文件的文件夹并运行：

```
C:\Python27\mydir> python setup.py py2exe 
```

或直接

```
C:\Python27\mydir> setup.py py2exe 
```

回溯告诉您您没有在命令行中为 setup.py 发送任何命令（在我的示例中为“py2exe”）

您可以使用以下命令查看可用命令：

```
C:\Python27\mydir>setup.py --help-commands
Standard commands:
  build            build everything needed to install
  build_py         "build" pure Python modules (copy to build directory)
  build_ext        build C/C++ extensions (compile/link to build directory)
  build_clib       build C/C++ libraries used by Python extensions
  build_scripts    "build" scripts (copy and fixup #! line)
  clean            clean up temporary files from 'build' command
  install          install everything from build directory
  install_lib      install all Python modules (extensions and pure Python)
  install_headers  install C/C++ header files
  install_scripts  install scripts (Python or otherwise)
  install_data     install data files
  sdist            create a source distribution (tarball, zip file, etc.)
  register         register the distribution with the Python package index
  bdist            create a built (binary) distribution
  bdist_dumb       create a "dumb" built distribution
  bdist_rpm        create an RPM distribution
  bdist_wininst    create an executable installer for MS Windows
  upload           upload binary package to PyPI
  check            perform some checks on the package
  py2exe

usage: setup.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
   or: setup.py --help [cmd1 cmd2 ...]
   or: setup.py --help-commands
   or: setup.py cmd --help

C:\Python27\mydir> 
```

# ruby - 运行 kaminari 规格

> ID：10937805
> 
> 赞同：4
> 
> 时间：2012-06-07T18:35:36.987
> 
> 标签：ruby, kaminari

这可能是一个愚蠢的问题，但我似乎找不到答案。

我想为[kaminari](https://github.com/amatsuda/kaminari)做出贡献，所以我分叉了 repo，`bundle`'d 它，现在我想运行规范以确保一切都是绿色的。但我似乎无法让它工作：

```
bin/rake spec                                                                                                                                                        

/Users/Ksoltysiak/.rbenv/versions/1.9.3-p125/bin/ruby -S rspec spec/config/config_spec.rb spec/helpers/action_view_extension_spec.rb spec/helpers/helpers_spec.rb spec/helpers/sinatra_helpers_spec.rb spec/helpers/tags_spec.rb spec/models/active_record/active_record_relation_methods_spec.rb spec/models/active_record/default_per_page_spec.rb spec/models/active_record/scopes_spec.rb spec/models/array_spec.rb spec/models/data_mapper/data_mapper_spec.rb spec/models/mongo_mapper/mongo_mapper_spec.rb spec/models/mongoid/mongoid_spec.rb spec/requests/users_spec.rb
warning: no framework detected.
would you check out if your Gemfile appropriately configured?
---- e.g. ----
when Rails:
    gem 'kaminari'

when Sinatra/Padrino:
    gem 'kaminari', :require => 'kaminari/sinatra'

when Grape:
    gem 'kaminari', :require => 'kaminari/grape'

/Users/Ksoltysiak/Documents/Repositories/kaminari/spec/models/array_spec.rb:3:in `<top (required)>': uninitialized constant Kaminari::PaginatableArray (NameError)
    from /Users/Ksoltysiak/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load'
    from /Users/Ksoltysiak/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
    from /Users/Ksoltysiak/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `map'
    from /Users/Ksoltysiak/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load_spec_files'
    from /Users/Ksoltysiak/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22:in `run'
    from /Users/Ksoltysiak/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:69:in `run'
    from /Users/Ksoltysiak/.rbenv/versions/1.9.3-p125/lib/ruby/gems/1.9.1/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun'
rake aborted!
/Users/Ksoltysiak/.rbenv/versions/1.9.3-p125/bin/ruby -S rspec spec/config/config_spec.rb spec/helpers/action_view_extension_spec.rb spec/helpers/helpers_spec.rb spec/helpers/sinatra_helpers_spec.rb spec/helpers/tags_spec.rb spec/models/active_record/active_record_relation_methods_spec.rb spec/models/active_record/default_per_page_spec.rb spec/models/active_record/scopes_spec.rb spec/models/array_spec.rb spec/models/data_mapper/data_mapper_spec.rb spec/models/mongo_mapper/mongo_mapper_spec.rb spec/models/mongoid/mongoid_spec.rb spec/requests/users_spec.rb failed 
```

我试图绕过捆绑器，但后来我遇到了版本和东西的宝石问题。那么我在这里缺少什么？我没有在 wiki 或问题上找到任何东西，甚至在这里也没有找到任何关于此的内容。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T15:35:15.540

我最近对 ​​Kaminari 测试进行了一系列更改。[https://github.com/amatsuda/kaminari/compare/b61db76...1f8389ae](https://github.com/amatsuda/kaminari/compare/b61db76...1f8389ae)

由于这个大重构，现在可以每个 ORM 库单独运行测试，例如：

```
BUNDLE_GEMFILE=gemfiles/active_record_32.gemfile bundle exec rake spec 
```

要一次运行所有测试，您应该调用`spec:all`任务：

```
bundle exec rake spec:all 
```

我知道这有点不寻常。至少它显然需要记录在案。我会这样做，直到下一个稳定版本。

或者如果您有更好的解决方案，请告诉我。

# python - OSError：[错误 1] 不允许操作

> ID：10937806
> 
> 赞同：7
> 
> 时间：2012-06-07T18:35:41.183
> 
> 标签：python, linux, file-permissions, user-permissions

我正在尝试运行一个使用后链接器创建的二进制文件（xFiles.bin.addr_patched）的python脚本。但是，我收到此错误。

```
File "abc.py", line 74, in ParseCmd
shutil.copy(gOptions.inputX, gWorkingXFile)
File "/usr/lib/python2.6/shutil.py", line 89, in copy
copymode(src, dst)
File "/usr/lib/python2.6/shutil.py", line 66, in copymode
os.chmod(dst, mode)

OSError: [Errno 1] Operation not permitted: 'myPath/xFiles.bin.addr_patched' 
```

当我通过 ls-l 检查这个 xFiles.bin 的权限时，它表明

```
-rwxrwxrwx 1 nobody  nogroup 
```

我认为错误是因为这个文件是由其他应用程序创建的，我正在运行的 python 脚本无权访问它。由于我是 ubuntu 的初学者，我真的不知道如何解决它。对于如何解决这个问题，有任何的建议吗？

解决了：

***作为建议的答案之一：chown username:groupname file name 解决了这个问题***

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T18:39:23.347

您可以尝试（从命令行，但我确信 python 中有语法）：

```
sudo chown your_username:your_groupname filename 
```

注意：该组通常只是您的用户名。我觉得这些权限有问题。每个人的读写执行似乎都关闭了。这个文件是如何创建的？它是如何由用户创建的`nobody`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T18:49:20.900

更改权限的 Python 代码：

```
from getpwnam import pwd
from getgrnam import grp
import os

uid = getpwnam("YOUR_USERNAME")[2]
gid = grp.getgrnam("YOUR_GROUPNAME")[2]
os.chown("myPath/xFiles.bin.addr_patched", uid, gid) 
```

运行脚本，`sudo`你就完成了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T18:44:49.133

我的猜测是您应该查看`myPath`文件夹的权限。似乎您无法写入它，因此出现了问题。尝试`ls -l myPath/..`查看`myPath`. 如果这是问题所在，请使用 更改文件夹的权限`chmod`。

PS 另外，请参阅关于[Linux 文件权限](http://www.tuxfiles.org/linuxhelp/filepermissions.html)的 Google 最高结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-03T07:12:31.133

在我的 mac（10.14 Mojave）上运行 python 脚本试图访问`/Users/xxx/Pictures/Photos Library.photoslibrary`. 完整的解决方案可以在[http://osxdaily.com/2018/10/09/fix-operation-not-permitted-terminal-error-macos/中找到](http://osxdaily.com/2018/10/09/fix-operation-not-permitted-terminal-error-macos/)

摘要：转到系统偏好设置 > 安全和隐私 > 隐私 > 全盘访问，然后将您的 IDE 或 python 解释器添加到列表中。

# seo - 堆栈交换 SEO 技术

> ID：10937812
> 
> 赞同：-1
> 
> 时间：2012-06-07T18:36:04.240
> 
> 标签：seo, stackexchange

Stack Exchange 对问题使用以下 URL 格式：

```
+-----------------------------------+-------+----------------------------+
|                                   |   ID  |                            |
+-----------------------------------+-------+----------------------------+
| http://stackoverflow.com/questions/1234567/question-heading            |
+------------------------------------------------------------------------+
| http://stackoverflow.com/users    /1234567/user-name                   |
+------------------------------------------------------------------------+ 
```

虽然问题加载时没有问题标题，即。`http://stackoverflow.com/questions/1234567`，那么为什么 Stack Exchange 使用 URL 的`question-heading`and`user-name`部分呢？

WordPress 也使用类似的 URL 修正。

这是SEO技巧还是其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:41:20.543

在您的 URL 中包含关键字是搜索引擎的积极排名因素。因此，放置标题、用户名等是帮助页面在该页面上的关键字获得良好排名的好方法，因为从理论上讲，写得好的标题和问题将导致答案也包含重要且相关的关键字他们。

# sql-server-2008 - 在 DDL alter table trigger 中，如何获取新的 create table 语句？

> ID：10937814
> 
> 赞同：1
> 
> 时间：2012-06-07T18:36:18.507
> 
> 标签：sql-server-2008, c#-4.0, smo, ddl

我想在 ddl alter table 触发器触发时获取新表定义（创建表语句）并将其保存到 txt 文件中。

我试过 xp_helptext，这只适用于视图或存储过程。我希望有这样的东西来改变表以获得新的创建语句。

我也尝试过使用 xp_cmdshell 来启动 .net。并根据来自 INFORMATION_SCHEMA 的信息对脚本进行硬编码。但是，它被锁定，因为在 .net 运行期间触发器未关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:49:52.173

你不能这样做。当您运行 ALTER TABLE 时，SQL Server 不会生成新的 CREATE TABLE 语句。您将看到 DDL 触发器中的 EVENTDATA() 仅包含 ALTER 命令，而不是整个表定义。您还会注意到，INFORMATION_SCHEMA 和 sys.tables 之类的目录视图都不会存储 CREATE TABLE 生成的副本，即使原始命令是 CREATE TABLE 也是如此，因此从该路径中没有什么可获取的。

您可以通过运行服务器端跟踪，然后右键单击表并选择 Script As > Create To > New Query Editor Window 来查看 Management Studio 生成创建表脚本的操作。我可以向您保证，这不是一些简单`SELECT create_table FROM sys.something`的，而是针对大量 DMV 的一组元数据查询。您甚至看不到正在组装 CREATE TABLE，因为它是在代码中完成的，而不是从数据库或查询中完成的。

更易于访问：SMO 具有[脚本对象的方法](http://sqlblog.com/blogs/ben_miller/archive/2007/10/03/table-scripting-with-smo-part-1.aspx)比如桌子。但我认为您不应该尝试从触发器中执行此操作 - 让 ALTER TABLE 事务等待您调用某些外部进程、写入文件系统等的能力是个坏主意。这是我的建议：当表的定义已更改，在 DDL 触发器中向队列表添加一行。在操作系统上有一个 PowerShell 脚本或 C# 命令行可执行文件，它使用 SMO 方法生成给定表名的脚本。安排该脚本每分钟或每 5 分钟运行一次，并检查队列表中是否有任何已发生但您尚未捕获的新更改。程序根据 SMO 生成的 CREATE TABLE 脚本写入文件，然后更新队列表（或删除行），使其只处理一次。

# iphone - 为越狱的 iphone 创建一个呼叫阻止列表应用程序

> ID：10937822
> 
> 赞同：-1
> 
> 时间：2012-06-07T18:36:33.860
> 
> 标签：iphone, cydia, callblocking

> **可能重复：**
> [如何使用私有 API 来阻止 iOS 应用程序中的来电？](https://stackoverflow.com/questions/7326338/how-can-i-use-private-apis-to-block-incoming-calls-in-an-ios-application)

任何人都可以帮我创建越狱 ios 设备的呼叫阻止列表吗？

是否有任何私有 API 可用于创建阻止列表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:20:38.387

请参阅[如何使用私有 API 阻止 iOS 应用程序中的传入呼叫？](https://stackoverflow.com/questions/7326338/how-can-i-use-private-apis-to-block-incoming-calls-in-an-ios-application)

我自己没有尝试过，但接受的答案和提供的链接（[http://tech.ruimaninfo.com/?p=83](http://tech.ruimaninfo.com/?p=83)）应该回答你的问题。

# jquery - 在表单上运行 .val() 将返回硬编码值

> ID：10937823
> 
> 赞同：1
> 
> 时间：2012-06-07T18:36:41.117
> 
> 标签：jquery, input, validation

我有一个表单来编辑通过设置填充的数据库表，`<input value="<?php echo $myvalue?>">`但是我正在尝试验证表单，如果我删除该字段，则在 form_submit 上，该值返回为旧值，`$myvalue`而不是`""`我希望看到的值。我注意到在 HTML 中`value`仍然设置了该属性，这是有道理的，但我不确定在这种情况下任何表单如何检查输入是否为空！？

到目前为止，这是我的验证功能。我还不能完全测试它。

```
$(".my-form").submit( function(e) {
        $('error-desc').hide();
        $('input').removeClass('error');
        $('input[name^=edit]').each( function(){
            if ($(this).val()===""){
            $(this).addClass('error');
            $('error-desc').show();
            }
        });

        $('.add > .item').each( function(){
            var empty = true;
            $(this).find('input').each(function(){
                if ($(this).val() !== ""){
                    empty = false;
                }
            });
            if (!empty){
                $(this).find('input[name^=edit][value=""]').each(function(){
                    $(this).addClass('error');
                    $('error-desc').show();
                });
            }
        });

        if ($('input').hasClass('error')) {
            $('html, body').animate({
                scrollTop: $('.error-details').offset().top
            }, 2000);
            return false;
        } else {
            return false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:43:26.013

如果输入被用户清空或通过 javascript 清空，无论源中的内容是什么，jQuery 的`.val()`方法都应该返回正确的。`""`

如果发生了其他事情，您需要提供一个带有证据的 jsfiddle，因为这不是该`.val()`方法的工作原理。如果输入为空，`.val()`将返回一个空字符串。

演示：http: [//jsfiddle.net/eW63x/](http://jsfiddle.net/eW63x/)

# java - Axis2 需要哪些 mvn 工件？

> ID：10937826
> 
> 赞同：0
> 
> 时间：2012-06-07T18:36:48.980
> 
> 标签：java, web-services, maven, axis2

我试图弄清楚我必须在 pom.xml 中包含哪些工件才能让其他人的 JAX-WS 瘦客户端编译和运行其 junit 测试。按照目前的情况，它仅使用axis2-jaxws 工件编译文件：

```
 <dependency>
    <groupId>org.apache.axis2</groupId>
    <artifactId>axis2-jaxws</artifactId>
    <version>1.6.0</version>
    <scope>provided</scope>
  </dependency> 
```

但是，当我尝试运行测试时，我得到了 ClassNotFoundException：

```
Caused by: java.lang.ClassNotFoundException: org.apache.ws.policy.Assertion
at java.lang.J9VMInternals.verifyImpl(Native Method)
at java.lang.J9VMInternals.verify(J9VMInternals.java:72)
at java.lang.J9VMInternals.initialize(J9VMInternals.java:134)
at org.apache.axis2.description.AxisDescription.<init>(AxisDescription.java:25)
at org.apache.axis2.engine.AxisConfiguration.<init>(AxisConfiguration.java:85)
at org.apache.axis2.deployment.DeploymentEngine.populateAxisConfiguration(DeploymentEngine.java:767)
at org.apache.axis2.deployment.FileSystemConfigurator.getAxisConfiguration(FileSystemConfigurator.java:113)
at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContext(ConfigurationContextFactory.java:38)
at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContextFromFileSystem(ConfigurationContextFactory.java:90)
at org.apache.axis2.jaxws.ClientConfigurationFactory.getClientConfigurationContext(ClientConfigurationFactory.java:116)
at org.apache.axis2.jaxws.description.impl.DescriptionFactoryImpl.createServiceDescription(DescriptionFactoryImpl.java:92)
at org.apache.axis2.jaxws.description.impl.DescriptionFactoryImpl.createServiceDescription(DescriptionFactoryImpl.java:79)
at org.apache.axis2.jaxws.description.DescriptionFactory.createServiceDescription(DescriptionFactory.java:78)
at org.apache.axis2.jaxws.spi.ServiceDelegate.<init>(ServiceDelegate.java:219)
at org.apache.axis2.jaxws.spi.Provider.createServiceDelegate(Provider.java:83)
at org.apache.axis2.jaxws.spi.Provider.createServiceDelegate(Provider.java:79)
at javax.xml.ws.Service.<init>(Service.java:57)
at javax.xml.ws.Service.create(Service.java:687) 
```

我尝试将范围切换到“测试”甚至“编译”，但没有任何区别。显然， Assertion 类不是 jaxws 依赖树的一部分。在 jarvana.com 上进行的一些搜索将我指向[ws-commons/policy artifact](http://www.jarvana.com/jarvana/view/ws-commons/policy/1.0/policy-1.0.jar!/org/apache/ws/policy/Assertion.class?classDetails=ok)，但这是古老的。

我似乎找不到与最新的 jax-ws 工件配套的最新工件。我也尝试过包含[壁垒项目工件](http://mvnrepository.com/artifact/org.apache.rampart/rampart-project/1.6.0)，但无济于事。

谁能帮我指出正确的方向？

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:18:41.220

尝试`mvn dependency:analize-only`哪个会告诉您哪些工件是您的编码引用但未声明

# linux - 为什么 tcp_tw_reuse 默认是关闭的？

> ID：10937828
> 
> 赞同：2
> 
> 时间：2012-06-07T18:37:11.757
> 
> 标签：linux, tcp

我遇到了一个问题，由于所有连接都处于 TIME_WAIT 状态，我的连接用完了。将超时设置为 1 秒仍然会导致问题。我们使用负载均衡器，所以我使用 tcp_tw_reuse 而不是回收。我将发布需要使用 tcp_tw_reuse 的代码。

但是，我认为 tcp_tw_reuse 可能会产生负面影响，但我想不出它可能是什么。有谁知道为什么在 Linux 安装中默认情况下不启用此功能？

或者，谁能列出任何潜在的负面影响？我认为这对系统没有任何影响，直到连接用完为止，此时对此的需求似乎很明显。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-02T16:39:13.437

今天看到一篇很棒的文章，它提供了一个非常深入的答案，我认为遇到这个问题的任何人都应该有：

[http://vincent.bernat.im/en/blog/2014-tcp-time-wait-state-linux.html](http://vincent.bernat.im/en/blog/2014-tcp-time-wait-state-linux.html)

在查看它之后，看起来我对使用 tcp_tw_reuse 所做的更改甚至不会影响传入的连接，因此看来我最初的解决方案是一个徒劳的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:57:24.143

TIME_WAIT 状态是 TCP 的一个组成部分。这是一种安全/数据完整性措施，可防止来自相同端口号之间的两个顺序连接的数据混淆。你当然*不*应该弄乱它。它可能导致的唯一问题是创建出站连接时出现绑定错误。它最终是由应该使用连接池但没有使用的应用程序引起的。

# android - PhoneStateListener - 应用程序意外停止

> ID：10937837
> 
> 赞同：0
> 
> 时间：2012-06-07T18:38:29.883
> 
> 标签：android, events, call, phone-state-listener

这是我的代码：

```
private PhoneStateListener mPhoneStateListener = new PhoneStateListener() {
    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        super.onCallStateChanged(state, incomingNumber);
        switch (state) {
        case TelephonyManager.CALL_STATE_OFFHOOK:
            break;
        case TelephonyManager.CALL_STATE_RINGING:
            break;
        case TelephonyManager.CALL_STATE_IDLE:
            break;
        }
    }
}; 
```

OnCreate 事件：

```
mTelephonyManager = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
        mTelephonyManager.listen(mPhoneStateListener,
                PhoneStateListener.LISTEN_CALL_STATE); 
```

AndroidManifest.xml：

```
 <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
        <receiver android:name=".ServiceReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.PHONE_STATE" />
            </intent-filter>
        </receiver> 
```

**编辑**

错误日志：

```
06-07 20:00:35.203: W/dalvikvm(1807): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
06-07 20:00:36.253: E/AndroidRuntime(1807): FATAL EXCEPTION: main
06-07 20:00:36.253: E/AndroidRuntime(1807): java.lang.RuntimeException: Unable to instantiate receiver company.group.ServiceReceiver: java.lang.ClassNotFoundException: company.group.ServiceReceiver
06-07 20:00:36.253: E/AndroidRuntime(1807):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2100)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at android.os.Looper.loop(Looper.java:137)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at java.lang.reflect.Method.invokeNative(Native Method)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at java.lang.reflect.Method.invoke(Method.java:511)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at dalvik.system.NativeStart.main(Native Method)
06-07 20:00:36.253: E/AndroidRuntime(1807): Caused by: java.lang.ClassNotFoundException: company.group.ServiceReceiver
06-07 20:00:36.253: E/AndroidRuntime(1807):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
06-07 20:00:36.253: E/AndroidRuntime(1807):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2095) 
```

问题：**当我接到电话时，我的应用程序会意外停止。这段代码有什么问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:00:49.640

您使用的是服务还是活动？

如果您在 Activity 中执行此操作，请尝试在 onCreate() 中执行这两件事（PhoneStateListener 和 TelephonyManager 的板条箱内部类）。

# c# - 错误 ArgumentNullException 未处理

> ID：10937838
> 
> 赞同：0
> 
> 时间：2012-06-07T18:38:30.777
> 
> 标签：c#, wcf, windows-phone-7

我指的是这个[http://www.dotnetcurry.com/ShowArticle.aspx?ID=585](http://www.dotnetcurry.com/ShowArticle.aspx?ID=585)从 sql server 检索图像到窗口电话，并且在高亮行运行时出现错误 ArgumentNullException 未处理。

```
public class ImageConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            byte[] buffer = value as byte[];
            **Stream memStream = new MemoryStream(buffer);**
            WriteableBitmap wbimg = PictureDecoder.DecodeJpeg(memStream);
            return wbimg; 
        }
        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return null; 
        }
    } 
```

我发现另一个类似的帖子对我有同样的错误。 [http://forums.create.msdn.com/forums/p/74224/452127.aspx](http://forums.create.msdn.com/forums/p/74224/452127.aspx) 但是不明白编码..有人知道如何解决错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:42:59.557

看起来**value**为 null 或不是字节数组。

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    WriteableBitmap wbimg = null;

    if (value != null && value is byte[]) {
        byte[] buffer = value as byte[];
        Stream memStream = new MemoryStream(buffer);
        wbimg = PictureDecoder.DecodeJpeg(memStream);
    }

    return wbimg; 
} 
```

# git - .gitattributes 默认文件类型处理

> ID：10937839
> 
> 赞同：5
> 
> 时间：2012-06-07T18:38:31.137
> 
> 标签：git, line-endings, gitattributes

我们已经为我们的项目存储库创建了一个文本和二进制文件类型列表，但我担心某些类型可能已经从该分类中滑落，或者将来有人可能会添加新文件类型而忘记将其添加到`.gitattribute`文件。

某些类别下不在此文件中的文件类型的默认行为是什么？可以将未提及的文件类型设置为“二进制”的默认行为吗？我认为，为了转换等目的而将文本文件真正视为文本，而不是仅仅因为配置中未提及其文件类型而将`autocrlf`其更改为文件的行尾，其问题较小`rar`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T22:08:12.690

默认是尝试确定文件是文本文件还是二进制文件 - 如果它被视为二进制文件，则不执行任何操作，如果是文本文件，则将其视为已定义的 core.eol 和/或 autocrlf 设置。对于大多数用例，二进制文件的检测是有效的。有些地方没有， .gitattributes 可以提供帮助。

另请参阅我之前提出的这个部分相关的[问题。](https://stackoverflow.com/questions/10734395/git-default-all-text-files-to-unix-line-breaks)

编辑：关于将大多数默认设置为二进制，请参阅[此问题](https://stackoverflow.com/questions/4264447/can-gits-gitattributes-treat-all-files-as-binary-except-a-few-exceptions)。基本上可以通过 .gitattributes 中的类似内容来完成：

```
* binary
*.txt crlf 
```

所以明星应该是第一条规则。

编辑：更改顺序 - 在某些时候，这已被记录为这些从一般到更具体，后者覆盖前者。

# shell - 用于检查 txt 文件并执行另一项工作的简单 unix 脚本

> ID：10937847
> 
> 赞同：0
> 
> 时间：2012-06-07T18:39:12.633
> 
> 标签：shell, unix

我有两个 bat 脚本：A.bat 和 B.bat。A.bat 生成一个txt文件（year.txt），其中包含模拟的最后一年，比如2005年。

我希望 A.bat 每 30 秒检查一次 year.txt。如果 year.txt 显示 2005，那么 A.bat 将调用 B.bat。

请教我如何做到这一点。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:49:00.317

要每 30 秒检查一次，只需使用[`sleep`](http://linux.die.net/man/1/sleep)：

```
while true; do
    if test "$(cat year.txt)" = "2005"; then
        B.bat
    fi
    sleep 30
done 
```

# html - 如何正确地将表单插入 HTML/CSS 中的 div？

> ID：10937850
> 
> 赞同：0
> 
> 时间：2012-06-07T18:39:18.603
> 
> 标签：html, css

我做错了。这就是我所拥有的。

2 个背景图像 div（用于内容）和一个页脚。我试图将表单锚定到 div_11 的顶部，但它会到底部并隐藏它的一部分。

```
<div id="index-11_">
  <img src="xxx/ttt.jpg" alt="" width="1012" height="295" align="top" id="index_11" />
  <form>
    <div class="form">FORM CODE</div>
  </form>
</div>

<div id="index-12_">
  <img id="xxx/ccc.png" width="100" height="592" alt="" />
</div> 
```

这是CSS：

```
#index-11_ {
  position:absolute;
  left:88px;
  top:158px;
  width:1012px;
  height:295px;   
}

div.box {   
  position:relative;
  background:#222222;
  width: 600px;
  margin-left:auto;
  margin-right:auto;
  border:1px solid #262626;
}

#index-12_ {
  position:absolute;
  left:1100px;
  top:158px;
  width:100px;
  height:592px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:44:26.713

该表单位于底部，因为您将其放置在您的第一张图片之后。似乎您希望图像元素成为 div 的背景图像，而不是让它们成为 html 流中的实际元素。你可以这样做；将此添加到`#index-11_`CSS：

```
background: url(xxx/ttt.jpg) no-repeat; 
```

替换您的第一个图像元素。

[http://reference.sitepoint.com/css/background](http://reference.sitepoint.com/css/background)

# android - android: 光标适配器 NullPointer

> ID：10937851
> 
> 赞同：0
> 
> 时间：2012-06-07T18:39:21.433
> 
> 标签：android, nullpointerexception, android-cursoradapter

我的一个应用程序中有以下代码。我在此遇到运行时错误

```
public class MainActivity extends Activity {
    private SQLiteAdapter mySQLiteAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        ListView listContent = (ListView) findViewById(R.id.listView1);
        mySQLiteAdapter = new SQLiteAdapter(this);
        mySQLiteAdapter.openToRead();
        Cursor cursor = mySQLiteAdapter.queueAll();
        startManagingCursor(cursor);
        String[] from = new String[] { SQLiteAdapter.KEY_CONTENT };
        int[] to = new int[] { R.id.textView1, R.id.textView2 };
        SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this,
                R.layout.row, cursor, from, to);
        listContent.setAdapter(cursorAdapter);
        mySQLiteAdapter.close();
    }
} 
```

错误如下：

```
06-08 00:04:17.133: E/AndroidRuntime(7072): FATAL EXCEPTION: main
06-08 00:04:17.133: E/AndroidRuntime(7072): java.lang.RuntimeException: Unable to start activity ComponentInfo{bl.ock/bl.ock.MainActivity}: java.lang.NullPointerException
06-08 00:04:17.133: E/AndroidRuntime(7072):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at android.os.Looper.loop(Looper.java:130)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at android.app.ActivityThread.main(ActivityThread.java:3835)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at java.lang.reflect.Method.invokeNative(Native Method)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at java.lang.reflect.Method.invoke(Method.java:507)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at dalvik.system.NativeStart.main(Native Method)
06-08 00:04:17.133: E/AndroidRuntime(7072): Caused by: java.lang.NullPointerException
06-08 00:04:17.133: E/AndroidRuntime(7072):     at bl.ock.MainActivity.onCreate(MainActivity.java:28)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-08 00:04:17.133: E/AndroidRuntime(7072):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
06-08 00:04:17.133: E/AndroidRuntime(7072):     ... 11 more 
```

请帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:41:49.540

`setContetView(<your_layout_id>) in missing in onCreate()`使用 findViewById() 获取列表之前的函数

```
 super.onCreate(savedInstanceState);
     setContetView(<your_layout_id>);<------------------
    ListView listContent = (ListView) findViewById(R.id.listView1); 
```

# java - Java：你什么时候选择让你的类不可变而不是可变

> ID：10937859
> 
> 赞同：-1
> 
> 时间：2012-06-07T18:39:48.290
> 
> 标签：java, memory-management

> **可能重复：**
> [可变对象与不可变对象](https://stackoverflow.com/questions/214714/mutable-vs-immutable-objects)

我了解不可变对象与可变对象之间的优缺点，但是当你来设计它时，你如何决定选择哪一个。

我之所以问这个问题是因为如果它是可变的，您可以通过将对象更改回初始状态来重用该对象，因为它是高效且经济的，所以当您处理多步操作时，您可以重用它并且再次。而当您执行多步操作时，不可变对象的性能会被放大，因为它在每一步都会生成一个新对象。<-就记忆而言

这是示例：

```
 //Mutable
   A a = new A();
   for(int j = 0 ; j < 1000 ; j++){
       a.setP1(j);
       //do something

   }

   //Immutable
   for(int j = 0 ; j < 1000 ; j++){
       A a = new A(j);
       //do something
   } 
```

我知道不可变对象是安全的，不需要同步，简单，并且共享内部，但是除了这些之外还有什么特别的原因吗？我们什么时候应该让我们的类成为最终的（不可变的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:29:10.367

您对可变性的推理基本上是针对对象池与创建。这是使对象可变的糟糕理由，除非出于某些非常特殊的原因，创建它非常昂贵，或者需要严格控制实例的数量（如数据库连接和线程池）。

这是 Java 早期使用的一种技术，但现在不受欢迎。让 VM 和垃圾收集器完成其工作并为其用例设计代码，而忽略这种通常“虚构”的优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:57:38.157

我在以下情况下使用不可变对象：

1.  在多线程环境中工作，不可变对象非常适合线程间通信（消息）
2.  当对象不保持其成员变量在应用程序的生命周期内不改变的状态时。示例，用户凭据

# c# - 删除所有符合条件的对象

> ID：10937860
> 
> 赞同：0
> 
> 时间：2012-06-07T18:39:49.663
> 
> 标签：c#

给定

```
 List<LabEntity> selected = originalSettings.SelectedInstanceLabs;
        List<LabEntity> available = Presenter.GetLabs(dateRange);
        if (!firstLoad)
        {
            //Remove selected labs from the available labs
            available.Remove(?);// Remove Where selected.Id = available.Id
        } 
```

有没有可以完成多项任务的扩展方法？删除一次只适用于一个。其他 Remove 类型的方法似乎也不能胜任这项任务。我可以在那里粘贴一个 foreach，但必须有一个更简洁的实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T18:41:24.350

当然可以！

`available.RemoveAll( ~delegate goes here~)`

就像是; `available.RemoveAll(a => selected.Exists(s => s.Id == a.Id));`

请原谅我的 4.0 委托语法，不确定您使用的是什么版本...

**编辑：**从评论更新（@vcsjones）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T18:49:51.983

你的意思是这样吗？：

```
 List<LabEntity> selected = originalSettings.SelectedInstanceLabs;
        List<LabEntity> available = Presenter.GetLabs(dateRange);
        if (!firstLoad)
        {
            //Remove selected labs
            available = available.Except<LabEntity>(selected).ToList();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:42:05.420

如果您对 LINQ 很满意，您可以在开始时过滤它们：

```
var selectedSet = HashSet<LabEntry>(selected);
var available = Presenter.GetLabs(dateRange).Where(l => !selectedSet.Contains(l)); 
```

或者您可以过滤事后：

```
available.RemoveAll(l => selectedSet.Contains(l)); 
```

在这两者中，第一个应该更快，因为它避免创建一个集合只是为了从中删除项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:45:31.273

沿着这些路线的东西会做到这一点：

`available.RemoveAll(x => selected.Contains(y => (y.Id == x.Id)));`

# python - 如何运行 python 脚本并将生成的脚本上传到服务器上的保管箱？

> ID：10937861
> 
> 赞同：0
> 
> 时间：2012-06-07T18:39:50.943
> 
> 标签：python, dropbox

我写了一个通过 Yahoo! 下载数据的 python 脚本。Finance API 并将其放入文件中。之后，它将文件上传到 Dropbox。该脚本每 10 分钟执行一次。我怎样才能用服务器以最低的成本实现这一点？我不想让我的电脑 24/7 全天候运行。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:46:01.723

如果脚本每 10 分钟运行一次，EC2 等对您没有任何好处，因为它们是根据 15 分钟的时间片定价的（并且将始终使用服务器）。

最便宜的解决方案是小型 VPS，可以从一些提供商那里以低至 5 美元/月的价格找到。安装 dropbox 和 python 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:44:15.190

从 Amazon 获取微型 EC2 实例，或从其他地方获取类似价格的超小型服务器。 [在服务器上安装保管箱](https://www.dropbox.com/install?os=lnx)。将您的作业设置为通过 cron 运行。

有很多方法可以在不配置您自己的服务器的情况下做到这一点，但很难超过微型 EC2 实例的价格。

# iphone - iPhone 设备上的 Facebook 连接错误

> ID：10937863
> 
> 赞同：1
> 
> 时间：2012-06-07T18:40:05.140
> 
> 标签：iphone, facebook, facebook-graph-api, device

我正在构建一个应用程序，在该应用程序中我需要使用 Graph API 为那个 m 建立 Facebook 连接。我正在使用扩展权限，例如`friends_birthday`使用以下代码。

```
NSArray *permissions = [NSArray arrayWithObjects:@"friends_birthday", nil];
[facebook authorize:permissions]; 
```

在模拟器上运行时一切正常，但在设备上运行时显示连接错误，`Err code: 10000`。如果我遗漏任何东西，请建议我。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:09:11.130

更新 facebook 应用程序或尝试删除并重新安装 facebook 应用程序

# android - Onclick 方法不会被调用

> ID：10937864
> 
> 赞同：0
> 
> 时间：2012-06-07T18:40:15.533
> 
> 标签：android, onclick, onclicklistener

我正在开发一个 android 应用程序。我是 android 的新手。Onclick 方法没有被触发。我已经尝试了几个小时。我已经检查了几次按钮 ID 和代码。我在下面发布了我的代码。请帮忙。

```
package com.android.disasterAlertApp;

import android.app.Activity;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class Registration extends Activity{
Button sqlRegister;
EditText  sqlFirstName,sqlLastName,sqlEmail,sqlMobileNumber,sqlCurrentLocation,sqlUsername,sqlPassword;

    @Override
    protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.registration);
    sqlFirstName = (EditText) findViewById(R.id.etFname);
    sqlLastName = (EditText) findViewById(R.id.etLname);

    sqlRegister = (Button) findViewById(R.id.bRegister);
    sqlRegister.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Toast.makeText(Registration.this, "fire", Toast.LENGTH_LONG).show();
            }
        });
    }
} 
```

------------------------XML 文件------------------------ --------

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>

<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="536dp"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_centerInParent="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Register"
    android:layout_gravity="center"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="20dp" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="First Name"
    android:textSize="15dp"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/etFname"
    android:layout_width="200dp"
    android:layout_height="45dp"
    android:ems="10"

    android:inputType="textPersonName" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Last Name"
    android:textSize="15dp"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/etLname"
    android:layout_width="200dp"
    android:layout_height="45dp"
    android:ems="10"
    android:inputType="textPersonName" >
</EditText>

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Email"
    android:textSize="15dp"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/etEmail"
    android:layout_width="200dp"
    android:layout_height="45dp"
    android:ems="10"
    android:inputType="textEmailAddress" />

/////This is the Register Button/////
<Button
    android:id="@+id/bRegister"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="92dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="Register"
    android:textSize="15dp" />

 </LinearLayout>

 </ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:16:10.210

我在测试中使用了上面的代码`project and it is working fine`....请看附图

![在此处输入图像描述](../Images/aa76961fcc42387eddd4494e687791e2.png)

请让我们知道代码中是否还有以上未提及的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:55:37.750

尝试通过将以下内容添加到您的按钮 xml 来以不同的方式设置它

```
android:onClick="onClickHandler" 
```

然后在您的活动中，定义此方法：

```
public void onClickHandler(View target) {
   switch (target.getId()) {
      case R.id.bRegister:
         //doSomething
     break;
   }
} 
```

# mysql - 多表 MySQL 查询

> ID：10937865
> 
> 赞同：1
> 
> 时间：2012-06-07T18:40:23.283
> 
> 标签：mysql

我有两个要同时查询的表。这些表是上传和受众上传关联，所以事情就是这样，我的表中只有一个名为“ESL”的主题值，但是当我使用下面的 SQL 时，它给了我 6 条记录，它重复相同的数据 6 次。

```
SELECT uploads.*, audienceuploadassociation.*
FROM   uploads
  JOIN audienceuploadassociation
    ON uploads.upload_id = audienceuploadassociation.upload_id
 WHERE uploads.member_id = '1'
   AND uploads.member_school_id='1'
   AND subject = 'ESL'
   AND topic = 'Poetry'
LIMIT  20 
```

这是上传的表结构：

```
`uploads` (
  `upload_id` int(11) NOT NULL AUTO_INCREMENT,
  `member_id` varchar(255) NOT NULL,
  `date` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `upload_name` text NOT NULL,
  `upload_title` varchar(255) NOT NULL,
  `upload_type` varchar(100) NOT NULL,
  `subject` varchar(50) NOT NULL,
  `topic` longtext NOT NULL,
  `year` int(100) DEFAULT NULL,
  `keywords` varchar(255) NOT NULL,
  `description` longtext NOT NULL,
  `status` enum('Finished','Work in progress','Blank template') NOT NULL DEFAULT 'Finished',
  `test_name` varchar(255) DEFAULT NULL,
  `firstname` varchar(255) NOT NULL,
  `lastname` varchar(255) NOT NULL,
  `member_display_name` varchar(255) NOT NULL,
  `member_school_id` int(11) NOT NULL DEFAULT '1',
  PRIMARY KEY (`upload_id`)
) 
```

对于观众上传协会：

```
`audienceuploadassociation` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `upload_id` bigint(20) NOT NULL,
  `audiencename` varchar(254) NOT NULL,
  PRIMARY KEY (`id`)
) 
```

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:45:20.533

试试这个，使用 GROUP BY：

```
SELECT uploads.*, audienceuploadassociation.*
FROM   uploads
  JOIN audienceuploadassociation
    ON uploads.upload_id = audienceuploadassociation.upload_id
 WHERE uploads.member_id = '1'
   AND uploads.member_school_id='1'
   AND subject = 'ESL'
   AND topic = 'Poetry'
GROUP BY uploads.upload_id
LIMIT  20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:48:39.997

我看不出这两个表之间有任何关系。

在您的`uploads`表定义中更改此

```
`member_school_id` int(11) NOT NULL DEFAULT 1 
```

删除引号，`member_school_id`因为它是一个`INT`字段。

```
SELECT uploads.*, audienceuploadassociation.*
FROM   uploads
  JOIN audienceuploadassociation
    ON uploads.upload_id = audienceuploadassociation.upload_id
 WHERE uploads.member_id = '1'
   AND uploads.member_school_id=1
   AND uploads.subject = 'ESL'
   AND uploads.topic = 'Poetry'
LIMIT  20 
```

# prolog - 如何在 prolog 中执行此操作而不会导致无限循环？

> ID：10937866
> 
> 赞同：1
> 
> 时间：2012-06-07T18:40:23.593
> 
> 标签：prolog, infinite-loop

我想在 Prolog 中做这样的事情：

```
some_commutative_property(X,Y) :- some_commutative_property(Y,X).
some_commutative_property(1,2).
some_commutative_property(3,4). 
```

这样查询两者`some_commutative_property(1,2).`并`some_commutative_property(2,1).`返回true。

问题显然是第一行创建了一个无限循环。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T18:44:32.477

可能有多种解决方案：

*   将谓词一分为二：

    `some_commutative_property(X,Y) :- some_commutative_property_aux(X,Y).` `some_commutative_property(X,Y) :- some_commutative_property_aux(Y,X).`

`some_commutative_property_aux(1,2).`和_`some_commutative_property_aux(3,4).`

*   执行命令：

    `some_commutative_property(X,Y) :- X>Y, some_commutative_property(Y,X).`

with `some_commutative_property_aux(1,2).`and这只有在基本事实只有with`some_commutative_property_aux(3,4).`形式的假设下才有效。`some_commutative_property(A,B)``A =< B`

*   如果您不喜欢这些解决方案，您可以使用一种称为制表的记忆机制。到目前为止，并非所有 Prolog 方言都支持表格，例如，XSB 就支持。正如 David S. Warren 解释的那样“[这个想法非常简单：永远不要两次调用相同的过程：第一次调用时，记住它返回的所有答案，如果再次调用，使用之前计算的答案来满足后面的请求。在 XSB 中，程序员通过使用编译器指令指示应该列出哪些调用](http://www.cs.sunysb.edu/~warren/xsbbook/node14.html)。添加`:- table some_commutative_property/2`到您的原始代码中也可以解决问题。

# google-chrome - 在 Chrome 中使用用户脚本从 tinyMCE 获取内容

> ID：10937867
> 
> 赞同：1
> 
> 时间：2012-06-07T18:40:24.653
> 
> 标签：google-chrome, tinymce, greasemonkey, userscripts

我的问题是尝试使用用户脚本获取 Tumblr 的 tinymce 编辑器的内容。在 Firefox 中，这非常有效：

```
var tm = (unsafeWindow.tinyMCE) ? unsafeWindow.tinyMCE : null;  
if(tm!= null){
    var _tempcontent = tm.activeEditor.getContent();
    console.log(_tempcontent);
} 
```

但是在 Chrome 中我得到“未定义”，然后当我修改 unsafeWindow 时，我找不到 tinymce 实例，而在 Firefox 中存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:19:04.063

虽然*谷歌浏览器*现在定义`unsafeWindow`了用户脚本，[但它不允许对目标页面的 javascript 对象进行任何访问](https://stackoverflow.com/a/10828021/331508)。它只允许访问 DOM。

要解决此问题，您可以为脚本提供一个跨浏览器、功能齐全的脚本`unsafeWindow`——如[本答案](https://stackoverflow.com/a/10945153/331508)所示：

```
/*--- Create a proper unsafeWindow object on browsers where it doesn't exist
    (Chrome, mainly).
    Chrome now defines unsafeWindow, but does not give it the same access to
    a page's javascript that a properly unsafe, unsafeWindow has.
    This code remedies that.
*/
var bGreasemonkeyServiceDefined     = false;

try {
    if (typeof Components.interfaces.gmIGreasemonkeyService === "object") {
        bGreasemonkeyServiceDefined = true;
    }
}
catch (err) {
    //Ignore.
}

if ( typeof unsafeWindow === "undefined"  ||  ! bGreasemonkeyServiceDefined) {
    unsafeWindow    = ( function () {
        var dummyElem   = document.createElement('p');
        dummyElem.setAttribute ('onclick', 'return window;');
        return dummyElem.onclick ();
    } ) ();
} 
```

* * *

**或者，**您可以重构脚本以使用*脚本注入*...

```
function main () {
    //--- PUT EVERYTHING IN THIS WRAPPER FUNCTION...
    var tm = tinyMCE;
    if (tm!= null) {
        var _tempcontent = tm.activeEditor.getContent();
        console.log(_tempcontent);
    }
}

addJS_Node (null, null, main);

function addJS_Node (text, s_URL, funcToRun) {
    var D                                   = document;
    var scriptNode                          = D.createElement ('script');
    scriptNode.type                         = "text/javascript";
    if (text)       scriptNode.textContent  = text;
    if (s_URL)      scriptNode.src          = s_URL;
    if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';

    var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
    //--- Don't error check here. if DOM not available, should throw error.
    targ.appendChild (scriptNode);
} 
```

# c# - Telerik radgrid 控制详细信息屏幕在单击主记录时不刷新

> ID：10937868
> 
> 赞同：2
> 
> 时间：2012-06-07T18:40:28.263
> 
> 标签：c#, asp.net, telerik-grid

我的 aspx 页面上有两个 radgrids：Log 和 LogDetails。

当我单击日志网格上的一行时，我希望 LogDetails 使用 LogGrid 的 logid 刷新。但细节网格**并不令人耳目一新。**

请帮我。这是我的代码。谢谢

```
 protected void OnLogGridNeedDataSource(object sender, Telerik.Web.UI.GridNeedDataSourceEventArgs e)
    {
        var logs = LogManager.FindLog();

        var sortedlogs = from l in logs
                         orderby l.LogId descending
                         select l;

        grdLogGrid.DataSource = sortedlogs;

    }

    protected void OnLogDetailGridNeedDataSource(object sender, Telerik.Web.UI.GridNeedDataSourceEventArgs e)
    {
        int logid = 0; 

        if (grdLogGrid.SelectedValue != null)
            logid = Convert.ToInt32(grdLogGrid.SelectedValue.ToString());

        var logDetails = LogManager.FindLogDetail();
        var logDetail = from ld in logDetails
                        where ld.LogId == logid
                        select ld;

        grdLogDetailGrid.DataSource = logDetail;

    }

    protected void OnLogGridItemCommand(object sender, Telerik.Web.UI.GridCommandEventArgs e)
    {
        grdLogDetailGrid.Rebind();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:01:52.123

为了`LogId`更好地将值传递给详细信息网格，请使用`DataKeyNames`MasterTableView 的属性来设置唯一标识符属性名称和`SelectedValue`主 RadGrid 的属性，以在代码隐藏中获取它的值。查看此演示：[网格/主/详细网格](http://demos.telerik.com/aspnet-ajax/grid/examples/programming/selectedvalue/defaultcs.aspx)

当您使用高级数据绑定时，您可以访问主网格的 SelectedValue 属性，只是在详细的网格 NeedDataSource 事件处理程序中，而无需处理`ItemCommand`主网格的事件。

# javascript - 如何在服务器端运行不受信任的代码？

> ID：10937870
> 
> 赞同：31
> 
> 时间：2012-06-07T18:40:34.783
> 
> 标签：javascript, linux, node.js

我正在尝试使用沙盒模块在 linux + node.js 中运行不受信任的 javascript 代码，但它已损坏，我所需要的只是让用户编写打印输出一些文本的 javascript 程序。不允许其他 i/o，只使用普通的 javascript，没有其​​他节点模块。如果它真的不可能做到，你建议用什么其他语言来完成这种任务？我需要的最小功能集是一些数学、正则表达式、字符串操作和基本的 JSON 函数。脚本将运行 5 秒，然后进程将被终止，我该如何实现？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2020-03-27T10:26:44.857

我在这些问题（`vm2`, `jailed`）中看到的所有库都试图隔离`node`进程本身。这类“监狱”不断被打破，并且高度依赖于未来对`node`标准库的升级，以免暴露另一个攻击媒介。

另一种方法是`V8::Isolate`直接使用该类。它旨在隔离 Google Chrome & 中的 JavaScript `node`，因此您可以期望它得到完全维护，并且比您、我或单个库维护者能够做到的更安全。这个类只能运行“纯” `JavaScript`。它具有完整的 ECMAScript 实现，但没有浏览器 API 或`node`API。
这就是`Cloudflare`他们的[Worker](https://developers.cloudflare.com/workers/about/how-it-works/)产品所使用的。

[`deno`](https://deno.land/)，由 的创建者开发的新语言`node`，默认情况下使用完全相同的东西进行沙箱化，并根据您启用的标志公开标准库的部分内容。

**在一个`node`环境中**，你可以使用[`isolated-vm`](https://github.com/laverdet/isolated-vm). `v8::Isolate`这是一个了不起的库，可以使用您要单独运行的代码创建d 个子进程。

它提供了将值和函数传递给隔离和返回的方法。这并不像大多数“监狱”库那样简单易用，但可以保证 JavaScript 代码的实际沙盒。
由于它是“纯”JavaScript，因此唯一的转义是您以注入函数的形式提供的转义。
此外，它会随着每个`node`版本自动更新，因为它使用`node`自己的`v8::Isolate`.
主要的痛点之一是，如果您想在脚本中注入库，您可能需要使用包捆绑`webpack`器，以便将所有内容捆绑到库可以使用的单个脚本中。

我个人使用它在爬虫中运行用户提供的代码，以使用用户提供的代码从网页中提取信息，它可以创造奇迹。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-18T14:37:03.407

我最近创建了一个库，用于对不受信任的代码进行沙盒处理，它似乎符合要求（在 Node.js 的情况下在受限进程中执行代码，并在 Web 浏览器的沙盒 iframe 内的 Worker 中执行代码）：

[https://github.com/asvd/jailed](https://github.com/asvd/jailed)

有机会将给定的一组方法从主应用程序导出到沙箱中，从而提供任何自定义 API 和一组权限（该功能实际上是我决定从头开始制作库的原因）。上面提到的数学、正则表达式和字符串相关的东西是由 JavaScript 本身提供的，任何额外的东西都可以从外部显式导出（比如一些用于与主应用程序通信的函数）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-09T11:50:16.957

沙盒的基本思想是，您需要将变量预定义为全局变量来执行操作，因此如果您通过取消设置它们或将它们替换为受控变量来拒绝脚本它们，它就无法逃脱。只要你什么都不忘。

首先替换拒绝 require() 或用受控的东西替换它。不要忘记进程和“全局”又名“根”，难的是不要忘记任何事情，这就是为什么依靠别人建立沙箱是件好事;-)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-05T06:24:01.880

[Docker.io](https://www.docker.io/)是一个很棒的新手，它使用[LXC](http://linuxcontainers.org/)和[CGroups](http://en.wikipedia.org/wiki/Cgroups)来创建沙箱。

这是一个使用[Docker](https://www.docker.io/)和[Go Lang实现的](http://golang.org/)[在线要点](http://hmarr.com/2013/oct/16/codecube-runnable-gists/)（类似于[codepad.org ）](http://codepad.org/)

这只是为了证明可以在[Docker 容器](https://www.docker.io/)中安全地运行用多种编程语言编写的**不受信任的代码**，包括`node.js`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-08-11T10:06:59.520

Know its pretty late to answer the question, guess the below tool might be a value add which is not mentioned in the above answers/comments.

Trying to implement similar use-case. After have gone through the web resources, [https://www.npmjs.com/package/vm2](https://www.npmjs.com/package/vm2) seems to be handling the sandbox environment(nodejs) pretty well.

It's pretty much satisfies the sandboxing features like restricting the access to builtin or external modules, data exchanges between sandbox, etc.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-02T10:10:39.713

如果您能承受性能损失，您可以在具有适当 CPU 和内存限制的一次性虚拟机中运行 JS。

当然，那么您就是信任 VM 解决方案的安全性。通过将它与普通的 JS 沙箱一起使用，您将拥有两层安全性。

对于附加层，将沙箱放在与主应用程序不同的物理机器上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-03T09:45:23.483

我现在面临着类似的问题，我只阅读有关沙盒模块的坏消息。

如果您不需要特定于节点环境的任何内容，我认为最好的方法是使用无头浏览器（例如 PhantomJS 或 Chimera）用作沙箱环境。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-24T10:16:27.670

一个迟到的答案，但也许是一个有趣的想法。

**静态代码分析**=> **AST 操作**=>**代码生成**

1.  静态分析将解析源代码的[AST](https://github.com/estree/estree)。AST 提供了一个通用的数据结构，让我们可以遍历和修改源代码。
2.  通过 AST 操作，我们可以找出对外部范围内任何敏感变量的所有标识符引用。如果需要，我们可以在函数体的开头重新声明和初始化它们，从而覆盖它们。因此，从内部到外部的引用都在控制之中。
3.  从 AST 生成代码也很容易。

例如，一个函数如下所示：

```
function () {
    a = 1;
    window.b = 1;
    eval('window.c()');
} 
```

基于 JS 代码解析器的静态分析使我们能够在原始函数体之前插入变量声明语句：

```
function () {
    var a, window = {}, eval = function () {}; // variable overwriting
    a = 1;
    window.b = 1;
    eval('window.c()');
} 
```

而已。

应该考虑更多的覆盖，例如`eval()`和`new Function()`其他全局对象或 API。解析过程中的警告应该组织好并报告。

一些相关的工作按顺序进行：

*   [esprima](https://github.com/jquery/esprima)，用于多用途分析的 ECMAScript 解析基础架构。
*   [estraverse](https://github.com/estools/estraverse)，ECMAScript JS AST 遍历函数。
*   [escope](https://github.com/estools/escope)，ECMAScript 范围分析器。
*   [escodegen](https://github.com/estools/escodegen)，ECMAScript 代码生成器。

我基于上述的做法是[function-sandbox](https://github.com/shenfe/function-sandbox)。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-06-09T12:49:18.907

问自己这些问题：

1.  你是这个星球上最聪明的人之一吗？
2.  你是否经常拒绝谷歌、Mozilla 和卡巴斯基实验室的工作机会，因为这会让你感到厌烦？
3.  “不受信任的代码”是来自与您在同一家公司工作的人，还是来自全球各地的犯罪分子和无聊的电脑孩子？
4.  您确定 node.js 没有可能通过您的沙箱泄漏的安全漏洞吗？
5.  你能写出完美的 100% 无错误代码吗？
6.  你了解 JavaScript 的一切吗？

正如您通过[沙盒模块](http://gf3.github.com/sandbox/)的实验已经知道的那样，编写自己的沙盒并非易事。沙盒的主要问题是你必须把一切都做好。一个错误将彻底破坏您的安全性，这就是为什么浏览器开发人员与全球各地的破解者不断战斗的原因。

也就是说，简单的沙箱很容易做到。首先，你需要编写自己的 JavaScript 解释器，因为你不能使用 node.js 中的解释器，因为`eval()`and `require()`（两者都会让破解者逃离你的沙箱）。

解释器必须确保解释的代码不能访问除了您提供的少数全局符号之外的任何东西。例如，这意味着不能有`eval()`函数（或者您必须确保仅在您自己的 JavaScript 解释器的上下文中评估此函数）。

这种方法的缺点：工作量很大，如果你在解释器中犯了错误，破解者可以离开沙箱。

另一种方法是清理代码并使用 node.js 运行它`eval()`。您可以通过运行一堆正则表达式来清理现有代码，就像`/eval\s*[(]//g`删除恶意代码部分一样。

这种方法的缺点：很容易犯错误，使您容易受到攻击。例如，regexp 和 node.js 认为的“空白”之间可能存在不匹配。解释器可能会接受一些晦涩的 unicode 空格，但不会被允许攻击者运行的正则表达式接受`eval()`。

我的建议：编写一个小型演示测试用例，展示沙盒模块是如何被破坏并修复的。它将为您节省大量时间和精力，并且如果沙箱中有错误，那不是您的错（嗯，至少不完全是）。

# java - “getDocumentElement”和“getFirstChild”之间的不同

> ID：10937872
> 
> 赞同：12
> 
> 时间：2012-06-07T18:40:36.060
> 
> 标签：java, xml, nodes, document

我有以下`Document`对象 - `Document myDoc`。

`myDoc`通过...保存`XML`文件

```
myDoc = DocumentBuilderFactory.newInstance()
            .newDocumentBuilder().parse(file); 
```

现在我想获取 XML 文件的根目录。有没有区别

```
Node firstChild = this.myDoc.getFirstChild() 
```

和

```
Node firstChild = (Node)myDoc.getDocumentElement() 
```

第一种方式，`firstChild`保存文件的节点根，`XML`但它的深度不为`Node`. 但是，在第二种方式中，`firstChild`将具有所有深度的根。

例如，我有以下 XML

```
<inventory>
    <book num="b1">
    </book>
    <book num="b2">
    </book>
    <book num="b3">
    </book>
</inventory> 
```

并`file`持有它。

在第一种情况下，`int count = firstChild.getChildNodes()` 给出 `count = 0`.

第二种情况会给`count = 3`.

我对吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-07T19:13:10.333

如果文档根节点之前还有其他节点（例如评论节点），则使用 myDoc.getFirstChild() 获得的节点可能不是文档根。看下面的例子：

```
import org.w3c.dom.*;

public class ReadXML {

    public static void main(String args[]) throws Exception{     

        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

        // Document elements
        Document doc = docBuilder.parse(new File(args[0]));

        Node firstChild = doc.getFirstChild();
        System.out.println(firstChild.getChildNodes().getLength());
        System.out.println(firstChild.getNodeType());
        System.out.println(firstChild.getNodeName());

        Node root = doc.getDocumentElement();
        System.out.println(root.getChildNodes().getLength());
        System.out.println(root.getNodeType());
        System.out.println(root.getNodeName());

    }
} 
```

解析以下 XML 文件时：

```
<?xml version="1.0"?>
<!-- Edited by XMLSpy -->
<catalog>
   <product description="Cardigan Sweater" product_image="cardigan.jpg">
      <catalog_item gender="Men's">
         <item_number>QWZ5671</item_number>
         <price>39.95</price>
         <size description="Medium">
            <color_swatch image="red_cardigan.jpg">Red</color_swatch>
            <color_swatch image="burgundy_cardigan.jpg">Burgundy</color_swatch>
         </size>
         <size description="Large">
            <color_swatch image="red_cardigan.jpg">Red</color_swatch>
            <color_swatch image="burgundy_cardigan.jpg">Burgundy</color_swatch>
         </size>
      </catalog_item>    
   </product>
</catalog> 
```

给出以下结果：

```
0
8
#comment
3
1
catalog 
```

但如果我删除评论，它会给出：

```
3
1
catalog
3
1
catalog 
```

# c# - 如何使用 WPF 按钮或超链接打开资源管理器窗口以浏览给定的 UNC 路径？

> ID：10937881
> 
> 赞同：3
> 
> 时间：2012-06-07T18:41:12.290
> 
> 标签：c#, wpf, xaml, caliburn.micro

我有一个 UNC 路径`\\machine\share\folder\something\`，当单击按钮时，我需要能够在 Windows 资源管理器中打开该位置。我应该使用什么 WPF 控件以及如何从我的 viewModel 绑定到该控件？

我的 viewModel 的一个例子是：

```
public class ViewModel : Screen {
    public string LogPath { get { return "\\machine\share\folder\something"; } }
} 
```

我正在使用 Caliburn Micro，但我不知道这是否相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:51:15.807

如果我正确理解了您的问题，那么 WPF、Caliburn 等的使用就完全无关紧要了。您只需要在 ViewModel 上运行以下代码的函数：

```
 Process.Start(new ProcessStartInfo
                      {
                          FileName = "\\\\machine\\share\\folder\\something",
                          UseShellExecute = true
                      }); 
```

我会使用一个简单的`Button`控件，`Command`它绑定到您的 ViewModel，`CommandArgument`如果需要，还可以指定启动路径。

# symfony - oneToMany/ManyToOne 双向关联未在学说 2 中生成连接列

> ID：10937883
> 
> 赞同：0
> 
> 时间：2012-06-07T18:41:15.997
> 
> 标签：symfony, doctrine, doctrine-orm

我正在尝试为一张表创建两个 oneToMany 关系。但是，当我生成实体时，连接列不会在 Foo 实体上生成。这是我的yaml：

**用户.orm.yml**

```
Acme\SomeBundle\Entity\User:
  type: entity
  table: user
  id:
    id:
      type: integer
      generator:
        strategy: AUTO
  fields:
    firstname:
      type: string
      length: 40
    created_at:
      type: datetime
      gedmo:
        timestampable:
          on: create
    updated_at:
      type: datetime
      gedmo:
        timestampable:
          on: update
  oneToMany:
    foos:
      targetEntity: Foo
      mappedBy: user 
```

**艺术家.orm.yml**

```
Acme\SomeBundle\Entity\Artist:
  type: entity
  table: artist
  id:
    id:
      type: integer
      generator:
        strategy: AUTO
  fields:
    name:
      type: string
      length: 100
  oneToMany:
    foos:
      targetEntity: Foo
      mappedBy: artist 
```

**Foo.orm.yml**

```
Acme\SomeBundle\Entity\Foo:
  type: entity
  table: foo
  id:
    id:
      type: integer
      generator:
        strategy: AUTO
  fields:
    created_at:
      type: datetime
      gedmo:
        timestampable:
          on: create
    updated_at:
      type: datetime
      gedmo:
        timestampable:
          on: update
  ManyToOne:
    artist:
      targetEntity: Artist
      inversedBy: foos
    user:
      targetEntity: User
      inversedBy: foos 
```

Foo 表上只创建了 id、created_at 和 updated_at 列，同时还应该创建两个连接列。我也尝试在我的 yaml 文件中手动定义连接列，但是[文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/association-mapping.html#one-to-many-bidirectional)说这不应该是必需的。

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:53:12.700

Pfff 原来是大写的 M on `ManyToMany`。应该`manyToMany`

# java - Java——如何处理构造函数中的类型擦除？

> ID：10937889
> 
> 赞同：19
> 
> 时间：2012-06-07T18:41:43.410
> 
> 标签：java, type-erasure

假设我的班级中有两个构造函数：

```
public User (List<Source1> source){
...
}

public User (List<Source2> source) {
...
} 
```

假设这两个构造函数都提供了关于用户的相同信息，并且是为不同用例构造用户的同样有效的方法。

在 Java 中，由于类型擦除，您不能这样做——Java 不会接受两个以 List< 为参数的构造函数？>。

那么，解决这个问题的方法是什么？什么是不矫枉过正但仍尊重基本 OO 的解决方案？仅仅因为 Java 没有强大的泛型支持就必须围绕这个构造工厂方法或其他接口似乎是错误的。

以下是我能想到的可能性：

1）接受 a`List<?>`作为构造函数的参数并在构造函数中解析您需要哪种逻辑，或者如果它不是任何可接受的类型，则抛出异常。

2) 创建一个接受任一 List 的类，构造适当的 User 对象并返回它。

3）创建包装器`List<Source1>`，`List<Source2>`可以将其传递给 User 构造函数。

4）用两个类子类这个家伙，除了构造函数之外，所有的功能都被继承了。一个的构造函数接受 Source1，另一个接受 Source2。

5）用构建器包装这个人，其中有两种不同的构建器方法，用于实例化的两个不同数据源。

我的问题是：

1）需要这样做是Java的缺陷，还是有意的设计决定？直觉是什么？

2) 在不引入不必要的复杂性的情况下，哪种解决方案在维护良好代码方面最强大？为什么？

这个问题是类似的：[Designing constructors around type erasure in Java](https://stackoverflow.com/questions/2703584/designing-constructors-around-type-erasure-in-java)但没有详细说明，它只是提出了各种解决方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T19:03:33.690

通常的方法是使用[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)：

```
public static User createFromSource1(List<Source1> source) {
    User user = new User();
    // build your User object knowing you have Source1 data
    return user;
}

public static User createFromSource2(List<Source2> source) {
    User user = new User();
    // build your User object knowing you have Source2 data
    return user;
} 
```

如果您*只想*使用`Source1`or进行构造`Source2`（即您没有默认构造函数），您只需隐藏构造函数，强制客户端使用您的工厂方法：

```
private User () {
    // Hide the constructor
} 
```

出现此问题是因为您不能以不同的方式命名构造函数，如果这些是普通方法，您将如何克服这个问题。因为构造函数名称固定为类名称，所以此 Code Pattern 只是区分然后给出相同类型擦除的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:48:54.667

1：保持与擦除的向后兼容性。

2：你的班级可以使用泛型吗？像这样的东西：

```
public class User<T> {
    private List<T> whatever;
    public User(List<T> source){
       ....
    }
} 
```

我不确定这是否是您的意思（2）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T01:55:24.717

基本问题是语言是在泛型存在*之前*设计的（构造函数名称是固定的） ，因此它无法处理由于类型擦除引起的冲突，这通常可以通过重命名方法来处理以区分它们。

一种“解决方法”，不诉诸工厂方法，是添加另一个非类型参数以使编译器能够区分它们：

```
public User(List<Source1>, Source1 instance) {
    // ignore instance
}

public User(List<Source2>, Source2 instance) {
    // ignore instance
} 
```

不过这有点蹩脚，因为您可以用任何东西替换那些额外的参数（例如`Integer`and `String`，或者只是让其中一个省略第二个参数），它仍然可以工作。此外，额外的参数被忽略 - 它的存在只是为了区分构造函数。尽管如此，它确实允许代码在不添加任何额外方法或特殊代码的情况下工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:54:15.350

```
public class User<T> {

    public User(List<T> source){

    }

} 
```

或者可能更好：

```
public class User<T extends SomeTypeOfYours> {

    public User(List<T> source){

    }
} 
```

Wheer是和`SomeTypeOfYours`的超类型。`Source1``Source2`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T19:20:45.403

我一般喜欢工厂的想法，或者泛化用户（如@Markus Mikkolainen 建议的那样），但一种可能的选择是将列表的类作为第二个参数传递并打开它，例如

```
public User<List<?> source, Class<?> clazz) {
   switch(clazz) {
      case Source1.class: initForSource1(); break;
      case Source2.class: initForSource2(); break;
      default: throw new IllegalArgumentException();
   }
} 
```

如果有一些共同的`<?>`祖先类，则可能是别的东西。我可以想象在很多情况下这是一个糟糕的主意，但在少数情况下它可能是可以接受的。

# javascript - 使用 Javascript XMLHttpRequest 进行摘要式身份验证

> ID：10937890
> 
> 赞同：9
> 
> 时间：2012-06-07T18:41:44.707
> 
> 标签：javascript, hash, xmlhttprequest, digest-authentication

我正在尝试使用使用摘要式身份验证的 API 进行身份验证。

我正在向服务器发送 POST 请求，但返回的响应是`HTTP 401 Denied`. 这是`WWW-Authenticate`来自服务器的挑战标头：

（包含用于格式化的反斜杠，不存在于响应标头中）

```
WWW-Authenticate: Digest realm="Guard", domain="/", \ 
  nonce="MTMzOTA5Mjk1NTE2NDo0NzY2NjJiOTgyMjE1ZDc0OWU3NzM5MTkzMWNjNGQzNw==", \ 
  algorithm=MD5, qop="auth" 
```

使用此标头中的参数，我应用摘要身份验证算法并构建质询回复标头：

```
const HA1 = MD5("login:Guard:mypassword");
const HA2 = MD5("POST:/");

const authHash = MD5(
  HA1 + ':' + unquotes(tokensObj["nonce"]) + ':' +
  tokensObj["nc"] + ':' + tokensObj["cnonce"] + ':' +
  unquotes(tokensObj["qop"]) + ':' + HA2
);

const challengeReply = 'Digest username:"login"' +
  ', realm=' + tokensObj["realm"] + ', nonce=' + tokensObj["nonce"] +
  ', uri=' + tokensObj["domain"] + ', algorithm=' + tokensObj["algorithm"] +
  ', response="' + authHash + '"' + ', qop=' + unquotes(tokensObj["qop"])  +
  ', nc=' + tokensObj["nc"] + ', cnonce="' + tokensObj["cnonce"] + '"';

xhr.setRequestHeader("Authorization", challengeReply); 
```

发送到服务器的标头：

```
Authorization: Digest username:"login", realm="Guard", \
  nonce="7d0c753c2fb4cdc9480403547952f1", uri="/", algorithm=MD5, \
  response="e9d8ad8f04e42672f2c21d70257c1072", qop=auth, nc=00000001, \
  cnonce="bd5fd9b093dccaa1" 
```

但这不起作用，我仍然收到 HTTP 401 Denied。服务器摘要认证已经过测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:48:22.637

错误是`username`用冒号指定参数，它应该是等号（`username:"login"`vs `username="login"`）：

```
Authorization: Digest username="login", realm="Guard", nonce="7d0c753c2fb4cdc9480403547952f1", uri="/", algorithm=MD5, response="e9d8ad8f04e42672f2c21d70257c1072", qop=auth, nc=00000001, cnonce="bd5fd9b093dccaa1" 
```

# java - 如何在 List 上使用 setText() 函数

> ID：10937891
> 
> 赞同：0
> 
> 时间：2012-06-07T18:41:48.120
> 
> 标签：java, android, eclipse, android-layout, nullpointerexception

我正在创建应用程序，玩家将他们的名字放入程序中，程序将他们的名字发送到字符串数组中的下一个活动，然后下一个程序将数组放入列表中，然后对其进行随机播放。出于某种原因，每次我尝试使用 .setText 函数时，应用程序都会收到 nullpointerexception 错误。我已经用 toast 测试了该列表，以验证它不为空，而事实并非如此。有什么建议么？

```
endInstructions = (Button)findViewById(R.id.buttonEndInstructions);

    player = (TextView)findViewById(R.id.textViewPlayerName);

    endInstructions.setOnClickListener(this);

    Bundle ext = getIntent().getExtras();
    int numberOfPlayers= ext.getInt("numberofplayers");
    String[] sarray = ext.getStringArray("namearray");

    names = Arrays.asList(sarray);
    Collections.shuffle(names);

    Toast.makeText(this, names.get(0), Toast.LENGTH_SHORT).show();

    //player.setText(names.get(0)); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:56:46.563

没有一百万个解决方案...

Player 为 null，您可以通过测试来检查：

```
 Toast.makeText(this, player, Toast.LENGTH_SHORT).show(); 
```

这意味着什么？可能您当前的布局不包含名为“textViewPlayerName”的文本视图

请仔细检查您的 xml 布局或确保您之前使用过 setContentView ;-)

编辑：由于 endInstructions 关于您的代码不为空，因此您之前正确使用了 setContentView ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:16:10.177

我认为 GUI 对象播放器为空。如果您放置一个 try/catch 块，您可以验证这一点，并在导致异常后阅读错误消息。

我怀疑 GUI 对象 ID R.id。**textViewPlayerName**不存在或不是类类型**TextView**。因此 player 为空。例如，对象类型可能是*TextField*，或者是 Android 框架中的任何其他有效类型。

祝你好运，让我们知道你的进展。

# python - 使用 CherryPy 和 Google App Engine 实现“Hello World”的第一步：有更新的指南吗？

> ID：10937892
> 
> 赞同：2
> 
> 时间：2012-06-07T18:41:48.310
> 
> 标签：python, google-app-engine, cherrypy

首先，我只想说我已经搜索过有关该主题的信息；有许多 stackoverflow 帖子都引用了 2008 年的同一篇博文：

[http://boodebr.org/main/python/cherrypy-under-google-appserver#comment-51142](http://boodebr.org/main/python/cherrypy-under-google-appserver#comment-51142)

我知道新的 CherryPy 版本不再需要这篇博文提到的补丁。我的 GAE 应用程序的根目录中有cherrypy 文件夹——当我在程序中导入它时没有收到错误——但是在“import cherrypy”行之外，我无法让它工作。我不确定如何更改 app.yaml 文件以正确反映我使用的是cherrypy，而不是 webbapp2（或者如果这很重要）。

有人知道可以引导我完成 CherryPy/GAE 的更新教程吗？或者，有人可以发布一个简单的 hello world 程序，该程序将在 GAE 中使用cherrypy 工作吗？

编辑：如果有帮助，这是我现在在 main.py 中的代码 - 它从cherrypy返回两个 404 错误。

```
import cherrypy
import wsgiref.handlers 

class Root:
def index(self):
    return "Hello, CherryPy!"

app = cherrypy.tree.mount(Root(), "/")
wsgiref.handlers.CGIHandler().run(app) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T22:19:29.580

我有一个使用cherrypy在GAE中运行的网站，它非常简单，您的代码是正确的，但您没有公开`index`解释`404`.

无论如何，您应该使用 GAE 提供的[run_wsgi_app](https://developers.google.com/appengine/docs/python/tools/webapp/utilmodule)，因此您的代码将如下所示：

```
import cherrypy
from google.appengine.ext.webapp.util import run_wsgi_app

class Root(object):

    @cherrypy.expose
    def index(self):
        return 'Hello CherryPy!'

app = cherrypy.tree.mount(Root(), '/')
run_wsgi_app(app) 
```

# sql-server - SQL Server 打印表的层次结构？

> ID：10937895
> 
> 赞同：0
> 
> 时间：2012-06-07T18:41:50.057
> 
> 标签：sql-server, hierarchy

我正在尝试对多个表中表示的层次结构进行文本打印。表格如下所示：

```
create table #par1 ( par1_id int primary key identity, par1_data varchar(8) )
create table #par2 ( par2_id int primary key identity, par1_id int , par2_data varchar(8) )
create table #par3 ( par3_id int primary key identity , par2_id int ,  par3_data varchar(8) )
create table #par4 ( par4_id int primary key identity , par3_id int ,  par4_data varchar(8) )
create table #par5 ( par5_id int primary key identity, par4_id int , par5_data varchar(8) )

insert into #par1 values ( 'a' )
insert into #par1 values ( 'b' )
insert into #par1 values ( 'c' )
insert into #par1 values ( 'c' )

insert into #par2 values ( 1 , 'aa' )
insert into #par2 values ( 2 , 'bb' )
insert into #par2 values ( 3, 'cc' )
insert into #par2 values ( 4, 'cc' )

insert into #par3 values ( 1 , 'aaa' )
insert into #par3 values ( 2 , 'bbb' )
insert into #par3 values ( 3 , 'ccc' )
insert into #par3 values ( 4 , 'ddd' )

insert into #par4 values ( 1 , 'aaaa' )
insert into #par4 values ( 2 , 'bbbb' )
insert into #par4 values ( 3 , 'cccc' )
insert into #par4 values ( 4 , 'dddd' )

insert into #par5 values ( 1 , 'wwwww' )
insert into #par5 values ( 1 , 'xxxxx' )
insert into #par5 values ( 1 , 'yyyyy' )
insert into #par5 values ( 1 , 'zzzzz' ) 
```

我在[http://vyaskn.tripod.com/hierarchies_in_sql_server_databases.htm](http://vyaskn.tripod.com/hierarchies_in_sql_server_databases.htm)处使用代码来创建正确的格式，但我无法打破单表结构来挖掘多个表。产生这种结果的 TSQL 是什么样的：

```
----a
--------aa
------------aaa
----------------aaaa
--------------------wwwww
--------------------xxxxx
--------------------yyyyy
--------------------zzzzz
----b
--------bb
------------bbb
...etc 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:19:51.860

它看起来像数据库中的中间层代码。

但是直接附加到您的脚本的 T-SQL 是这样的：

```
CREATE TABLE #allPar (id int IDENTITY (1,1), originalID int, originalTable int, parentID int NULL, data varchar(8))

INSERT INTO [#allPar] ([originalID], [originalTable], [data])
SELECT [par1_id], 1, [par1_data] FROM #par1;

INSERT INTO [#allPar] ([originalID], [originalTable], [parentID], [data])
SELECT [par2_id], 2, [id], [par2_data] FROM #par2 INNER JOIN #allPar ON [#allPar].[originalID] = [#par2].[par1_id] AND [#allPar].[originalTable] = 1;

INSERT INTO [#allPar] ([originalID], [originalTable], [parentID], [data])
SELECT [par3_id], 3, [id], [par3_data] FROM #par3 INNER JOIN #allPar ON [#allPar].[originalID] = [#par3].[par2_id] AND [#allPar].[originalTable] = 2;

INSERT INTO [#allPar] ([originalID], [originalTable], [parentID], [data])
SELECT [par4_id], 4, [id], [par4_data] FROM #par4 INNER JOIN #allPar ON [#allPar].[originalID] = [#par4].[par3_id] AND [#allPar].[originalTable] = 3;

INSERT INTO [#allPar] ([originalID], [originalTable], [parentID], [data])
SELECT [par5_id], 5, [id], [par5_data] FROM #par5 INNER JOIN #allPar ON [#allPar].[originalID] = [#par5].[par4_id] AND [#allPar].[originalTable] = 4;

DECLARE @text [varchar](MAX);
SET @text = '';
WITH Recursed
AS
(
-- Anchor member definition
    SELECT [id], [originalID], [originalTable], [parentID], [data], 0 AS [Level], [originalID] AS rootID
    FROM #allPar [ap] WHERE [ap].[parentID] IS NULL
    UNION ALL
-- Recursive member definition
    SELECT [ap].[id], [ap].[originalID], [ap].[originalTable], [ap].[parentID], [ap].[data], [apParent].[Level] + 1, [rootID]
    FROM #allPar [ap] INNER JOIN Recursed [apParent]
        ON ap.[parentID] = [apParent].[id]
)
SELECT @text = @text + REPLICATE('-', [Level] * 4) + [data] + CHAR(13) + CHAR(10) FROM [Recursed] ORDER BY [rootID], [Level], [originalID]
PRINT @text 
```

# backbone.js - 在 Add 事件处理程序中对 Backbone 集合进行排序会重新触发 Add 事件

> ID：10937897
> 
> 赞同：0
> 
> 时间：2012-06-07T18:41:57.857
> 
> 标签：backbone.js, backbone-events

我有一个基于模型属性对自身进行排序的集合，有时我想添加一个模型并只计算`add`事件处理程序中的顺序。问题是当我在 add 事件处理程序中调用 collection.sort() 时，由于某种原因它会再次触发 add 事件。

由于我的 add 事件做了一些 DOM 插入，我最终在我的 DOM 中得到了重复的项目。

到目前为止，我发现的唯一解决方案是在添加模型或调用 _.defer 并对集合进行排序然后运行任何进一步的代码之前计算下一个订单

查看完整的小提琴：http: [//jsfiddle.net/DD23n/9/](http://jsfiddle.net/DD23n/9/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T23:30:24.237

[sntran](https://stackoverflow.com/a/10938546/479863)关于您的问题的出处是正确的：您在迭代数组时正在修改它。

您从`nOrder: null` [模型列表的开头开始](https://github.com/documentcloud/backbone/blob/master/backbone.js#L614)使用新模型：

```
splice.apply(this.models, [index, 0].concat(models)); 
```

然后`add` [循环遍历触发`'add'`事件](https://github.com/documentcloud/backbone/blob/master/backbone.js#L627)的模型：

```
for (i = 0, length = this.models.length; i < length; i++) {
  if (!cids[(model = this.models[i]).cid]) continue;
  options.index = i;
  model.trigger('add', model, this, options);
} 
```

但是在你的`'add'`回调中，你修改了模型：

```
if(model.get('nOrder') == null)
    model.set('nOrder', _.max(collection.pluck('nOrder')) + 1); 
```

然后对集合进行排序：

```
collection.sort({silent: true}); 
```

这两个动作`this.models[0]`在`this.models[3]`事件触发循环中移动；但是`i`for 那个循环会一直滴答作响，新的`this.models[3]`（曾经是 at `0`）将`if (!cids[(model = this.models[i]).cid])`再次通过测试，这是你的第二个`'add'`事件。

您可以观看此版本的小提琴作品，以了解集合的数组如何在您背后发生变化：

> [http://jsfiddle.net/ambiguous/p8Fp4/](http://jsfiddle.net/ambiguous/p8Fp4/)

我认为最简单的解决方案是向`append`您的集合添加一个方法，该方法`nOrder`在模型上设置适当的值，然后将其添加到集合中：

```
append: function(m) {
    var nOrder = _.max(this.pluck('nOrder')) + 1;
    if(m instanceof Backbone.Model)
        m.set({ nOrder: nOrder });
    else
        m.nOrder = nOrder;
    this.add(m);
} 
```

然后您的`'add'`回调可以不理会`nOrder`并停止对集合进行排序。

演示：http: [//jsfiddle.net/ambiguous/JqWVP/](http://jsfiddle.net/ambiguous/JqWVP/)

您也可以覆盖集合的`add`方法，但如果您想正确地执行此操作，则要复杂得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T19:25:53.357

如果您通读主干的源代码，该`add`函数会将插入模型连接到`collection.models`. 在这种情况下，您有四个。

因为您没有告诉`add`函数静默，所以它循环通过 collection.models 并触发`'add'`插入元素的事件。

但是你调用`sort`一个`add`处理程序，`collection.models`变得不同。当集合执行其循环`add`功能时，插入模型将位于不同的位置，它将再次触发“添加”。

我不确定这是否有意义，但我认为最好不要在循环期间重新排列/修改数组。

# iphone - 使用 MagicalRecord 使用当前实体创建新实体

> ID：10937901
> 
> 赞同：1
> 
> 时间：2012-06-07T18:42:07.623
> 
> 标签：iphone, objective-c, ios, core-data, magicalrecord

我正在尝试使用现有实体（传入）设置所有值来创建一个新实体。这是我在托管对象子类中使用的类方法：

```
+(FlightManifest *)getNextFlightManifestLegWithFlightManifest:(FlightManifest *)fm {
    // Get the current context
    NSManagedObjectContext *moc = [NSManagedObjectContext MR_contextForCurrentThread];

    // Set a var to the cur leg so we can use it to increment the leg number later
    NSInteger curLeg = [fm.leg intValue];

    // Check to see if we already have the next leg saved
    if ([self getFlightManifestWithTripID:fm.tripid andLeg:[NSNumber numberWithInt:curLeg + 1]] !=nil) {
        return [self getFlightManifestWithTripID:fm.tripid andLeg:[NSNumber numberWithInt:curLeg + 1]];
    } else {
        // Create a new leg using the passed in FlightManifest for the values
        FlightManifest *newFM = [FlightManifest MR_createInContext:moc];  

        // Set the value of the newly created object to the one passed in
        newFM = fm;

        // Increment the leg number
        newFM.leg = [NSNumber numberWithInt:curLeg + 1];

        // Save the object
        [moc MR_save];

        return newFM;
    }
} 
```

我这样称呼它：

```
- (IBAction)nextLegButtonPressed:(id)sender {

    currentFlight = [FlightManifest getNextFlightManifestLegWithFlightManifest:currentFlight];
    self.legNumberLabel.text = [currentFlight.leg stringValue];
    [self reloadLegsTableViewData];
} 
```

正在发生的事情是我正在更改当前实体而不是创建一个新实体。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:34:38.890

这似乎很明显，但这条线似乎很可疑：

```
// Set the value of the newly created object to the one passed in
    newFM = fm; 
```

这将在使用现有 fm 对象后生成代码...并更改您尝试复制的那个...

# php - 文件附件类型

> ID：10937904
> 
> 赞同：-1
> 
> 时间：2012-06-07T18:42:22.490
> 
> 标签：php, email, sendmail, attachment

嗨，我有发送带有多个附件的电子邮件的代码，但是下面的一段代码有问题。

每当我提交图像时，我都会收到“不支持的文件格式！”。如果我删除那部分代码，它会很好用，但是用户可以发送每种类型的文件（我知道这很危险）。文件大小检查效果很好。怎么了？:S

```
//*** Attachment ***//  
for($i=0;$i<count($_FILES["fileAttach"]["name"]);$i++)  
{
    $filesize = $_FILES["fileAttach"]["size"][$i]/1024;

    if($_FILES["fileAttach"]["name"][$i] != "" && $filesize < 50 && preg_match("image/", $_FILES["fileAttach"]["type"][$i]))  
    {  
    $strFilesName = $_FILES["fileAttach"]["name"][$i];  
    $strContent = chunk_split(base64_encode(file_get_contents($_FILES["fileAttach"]["tmp_name"][$i])));  
    $strHeader .= "--".$strSid."\n";  
    $strHeader .= "Content-Type: application/octet-stream; name=\"".$strFilesName."\"\n";  
    $strHeader .= "Content-Transfer-Encoding: base64\n";  
    $strHeader .= "Content-Disposition: attachment; filename=\"".$strFilesName."\"\n\n";  
    $strHeader .= $strContent."\n\n";  
    }
    elseif(!preg_match("image/", $_FILES["fileAttach"]["type"][$i])){
        die('<div id="warning">Unsuported file format!</div>');
    }
    elseif($filesize > 50){
        die('<div id="warning">Filesize must be less than 2 Mb!!!</div>');
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:44:44.030

```
$strHeader .= "Content-Type: application/octet-stream; name=\"".$strFilesName."\"\n"; 
```

应该只是

```
$strHeader .= "Content-type: application/octet-stream\n"; 
```

没有文件名部分。这进入内容处置行。

在大局观中，不要建立自己的 mime 电子邮件。正如你所发现的那样，它既痛苦又丑陋。使用[PHPMailer](http://phpmailer.worxware.com)或[Swiftmailer](http://swiftmailer.org)为您完成 - 整个附件业务可以简化为使用任一库的**单个**函数调用。

# php - HTML 表单 - 每个 IP 每小时最多保存 X 次

> ID：10937909
> 
> 赞同：-1
> 
> 时间：2012-06-07T18:42:50.583
> 
> 标签：php, mysql

我有一个问题，我需要接收数据（只有一个来自表单的字符串，它是接收的名称）：

```
$received_data = $_POST['data'];
$ip = checkip(); 
```

而“用户”IP（它不需要 cookie 或会话，我不能使用它们），我必须将两个数据（数据和 ip）保存在数据库中并允许每小时查看 5 个，但允许查看相同已经看到了，我的意思是存储在数据库中的“数据”可以无限制地看到，但每小时只能看到 5 个不同的数据（名称），例如：

可以检查：Martha、Jack、Lily、Mark 和 Peter（每小时，下一小时可以检查其他人，或者可能相同 - 取决于用户）。

并且在同一小时内可以检查已经检查的五个名称，但直到下一小时才能检查其他名称。

如果尝试再次检查 Martha、Jack 和 Martha，（第二个 Martha）不算数，因为它已经在同一小时内检查过。

我不知道我该怎么做，有人可以帮助我吗？

提前谢谢你，亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:48:20.313

我会重新考虑使用 IP 地址。许多组织/ISP 有许多计算机来共享一个 IP 地址。

至于每小时仅验证 5 次，您需要存储收到的最后 5 条数据的时间戳。如果少于五个，则一切正常。

否则检查最年长的时间。如果超过 1 小时，则确定并通过删除最旧的时间戳并将其替换为新时间戳来更新数据库。否则它应该失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:52:53.137

```
function getRealIpAddr()
{
    if (!empty($_SERVER['HTTP_CLIENT_IP']))   //check ip from share internet
    {
      $ip=$_SERVER['HTTP_CLIENT_IP'];
    }
    elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))   //to check ip is pass from proxy
    {
      $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
      $ip=$_SERVER['REMOTE_ADDR'];
    }
    return $ip;
}

function maxSavePerHour($data, $ip, $maxSave = 5){

    $data = mysql_real_escape_string($data);

    // Get record matching within last hour
    $res = mysql_query("select * from table where data='$data' and ip='$ip' and lastinsert <= date_sub(NOW(), interval 1 hour)";

     $totalRows = mysql_num_rows($res);

    // If a record was NOT found within last hour matching everything then insert new record.

      // Compare records against max saves
      if($totalRows <= $maxSave){
        $storeData = true;
      }else{
        $storeData = false;
      }  

   if($storeData){
      $res = mysql_query("insert into table set data='$data', ip='$ip'";
      //Add more exception handling here....
    }

}

$ip = getRealIpAddr();
$data = $_POST['data'];

maxSavePerHour($data,$ip); 
```

# django - 如何使用 SelectDateWidget 传递日期？

> ID：10937915
> 
> 赞同：1
> 
> 时间：2012-06-07T18:43:12.303
> 
> 标签：django, widget

我正在尝试使这个简单的代码起作用：

# 表格.py

```
class TestForm(forms.Form):
    start_date = forms.DateField(widget=SelectDateWidget())
    end_date = forms.DateField(widget=SelectDateWidget()) 
```

# 视图.py

```
def test(request):
    form = TestForm(request.GET)
    if form.is_valid():
        start = request.GET.get('start_date')
        end = request.GET.get('end_date')
        test_var = 'Hello'

    return render(request, 'schedule/test.html', locals()) 
```

# 测试.html

```
{% extends "base.html" %}

{% block content %}
    <form method="get">
    <table>
        {{ form.as_table }}
        <tr><td><input type="submit"></td><td></td></tr>
    </table>
    </form>
    <br/>
    <b>Start date</b>: {{ start }}<br />
    <b>End date</b>: {{ end }}<br />
    <b>Test var:</b> {{ test_var }}

{% endblock %} 
```

看起来 SelectDateWidget 没有正确设置 {{ start }} 和 {{ end }} 变量：

* * *

![截屏](../Images/d2f66b3799af1afde01decb545595237.png)

* * *

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:19:29.850

通过清理数据访问表单值，尝试：

```
start = form.cleaned_data.get('start_date')
end = form.cleaned_data.get('end_date') 
```

如果您想要获取参数，它们按日、月和年传递：

print: request.GET 会给你：

```
<QueryDict: {u'end_date_day': [u'4'], u'start_date_day': [u'1'], u'end_date_year': [u'2012'], u'end_date_month': [u'3'], u'start_date_month': [u'2'], u'start_date_year': [u'2012']}> 
```

# python - 使用python将文件加载到numpy数组中

> ID：10937918
> 
> 赞同：5
> 
> 时间：2012-06-07T18:43:30.830
> 
> 标签：python, csv, file-io, numpy

因此，我对 Python 非常熟悉，并且正在尝试通过复制我编写的一些 matlab 代码来学习。我有一个部分，在 matlab 中，我加载了一个制表符分隔的数据文件。语法

```
x = load(data.txt) 
```

获取制表符分隔的数据并将它们放入标记为 x 的矩阵的单元格中。

有没有办法在 python 中做到这一点，但使用逗号分隔的数据？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-07T21:18:16.367

有多种方法，请选择最适合您的应用的一种。

如果您正在使用[numpy](http://numpy.scipy.org/)，最好使用 numpy 的[`load`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.load.html)、或函数[`loadtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)，因为您的文件将在预处理后加载到合适的结构中。[`fromfile`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromfile.html)[`genfromtxt`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)

但是，如果您不打算使用 numpy （或任何其他具有某些文件加载​​功能的*大型*库），那么仅将其用于加载文件将是一种矫枉过正...考虑使用内置的 python 函数或 csv取而代之的是标准库中的[模块](http://docs.python.org/library/csv.html)……它将更加灵活，并且更加流畅。

以下是使用示例的方法`file.txt`（每行的值用制表符分隔）：

```
1   2   3   4
7   8   9   10  11  12
13  14  15 
```

### 内置python

没有要导入的模块，非常简单，灵活，在大多数情况下都是不错的选择，恕我直言。

`rb`仅使用内置函数以二进制模式加载文件以在表（值列表列表，在文件中用制表符分隔）中读取（标志）：

```
>>> file = open('file.txt', 'rb')
>>> table = [row.strip().split('\t') for row in file] 
```

### CSV

标准库中的[csv 模块](http://docs.python.org/library/csv.html)也非常简单。

请注意，虽然 CSV 表示逗号分隔值，但实际上没有标准，您可以选择任何您想要的分隔符。因此 CSV 代表所有面向单元格或类似表格的文件。

使用 csv以二进制模式加载文件以`rb`在表（值列表列表，在文件中用制表符分隔）中读取（标志）[`reader`](http://docs.python.org/library/csv.html#csv.reader)：

```
>>> import csv
>>> file = open('file.txt', 'rb')
>>> data = csv.reader(file, delimiter='\t')
>>> table = [row for row in data] 
```

### 访问单元格

该表已与前面的两个示例类似地加载，并且可以通过以下方式访问该表的数据`table[row][col]`：

```
>>> table
[['1', '2', '3', '4'], ['7', '8', '9', '10', '11', '12'], ['13', '14', '15']]    
>>> table[0]
['1', '2', '3', '4']
>>> table[1][2]
9 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-07T18:49:45.073

如果您将 Python 用于类似 MATLAB 的目的，您将希望使用[NumPy](http://numpy.scipy.org/)（和 scipy）；特别是，您应该阅读[NumPy for MATLAB Users](http://www.scipy.org/NumPy_for_Matlab_Users)。

如果你有逗号分隔的数据，你可以使用`numpy.loadtxt`它来读取它（当然是在安装 numpy 之后）：

```
$ cat matrix.csv 
1,2,3
4,5,6
7,8,9 
```

接着

```
>>> import numpy as np
>>> m = np.loadtxt("matrix.csv", delimiter=",")
>>> m
array([[ 1.,  2.,  3.],
       [ 4.,  5.,  6.],
       [ 7.,  8.,  9.]])
>>> np.matrix(m)
matrix([[ 1.,  2.,  3.],
        [ 4.,  5.,  6.],
        [ 7.,  8.,  9.]]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T18:48:00.500

标准库中有一个 csv 模块。

[请参阅此处的文档](http://docs.python.org/library/csv.html)

```
>>> import csv
>>> spamReader = csv.reader(open('eggs.csv', 'rb'), delimiter=' ', quotechar='|')
>>> for row in spamReader:
...     print ', '.join(row)
Spam, Spam, Spam, Spam, Spam, Baked Beans
Spam, Lovely Spam, Wonderful Spam 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T18:51:33.650

numpy.loadtxt 函数将 ASCII 文件中的数据读取到 numpy 数组中。用于分隔值的字符串可以使用 delimiter 参数定义：

```
numpy.loadtxt('data.txt', delimiter=',') 
```

对于更复杂的情况，该`numpy.genfromtxt`函数是一个很好的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T18:50:49.490

请参阅[csv](http://docs.python.org/library/csv.html)模块（特别是`reader`类）和/或[numpy.loadtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html)函数。

# wpf - 分配给标签的变量

> ID：10937922
> 
> 赞同：1
> 
> 时间：2012-06-07T18:43:43.080
> 
> 标签：wpf, xaml, c#-4.0

我正在使用 C# 创建 WPF 接口。显示屏显示移动物体的当前坐标。我正在做的是在一个间隔上触发一个线程，该线程调用一个检查移动对象当前位置的函数。

注意：检查当前位置的函数是从其他类（在不同的 .cs 文件中）调用的，我的界面在另一个窗口中，即主窗口。

如何在窗口界面中显示坐标？有没有办法将在一个类（.cs）中初始化的变量分配给界面（.xaml）中的另一个标签工具栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:27:17.270

最简单的方法是添加几个`TextBlock`s （或者`TextBox`如果您愿意）并将它们绑定到视图模型上的属性：

```
<TextBlock Text="{Binding Path=XCord}" /> 
```

诀窍在于，由于您使用的是计时器或后台线程，因此您必须同步属性更改通知，以便它们发生在您的 UI 线程上。所以你可以实现如下`XCord`属性：

```
 public string XCoord
    {
        get { return _xcoord; }
        set
        {
            if(!Application.Current.Dispatcher.CheckAccess())
            {
                Application.Current.Dispatcher
                    .BeginInvoke(new Action(() =>
                                            {
                                                _xcoord = value;
                                                NotifyPropertyChanged("XCoord");
                                            }));
            }
            else
            {
                _xcoord = value;
                NotifyPropertyChanged("XCoord");
            }
        }
    } 
```

此检查`Dispatcher`用于确保您没有尝试从错误的线程设置属性，如果是，它用于`BeginInvoke`在 UI 线程上完成工作。这样，当`PropertyChanged`事件触发时，绑定会尝试读取值并更改 UI，它会从 UI 线程而不是后台线程执行此操作。

# java - 如何让 Jackson mixin 用于私有字段？

> ID：10937924
> 
> 赞同：7
> 
> 时间：2012-06-07T18:43:49.960
> 
> 标签：java, jackson, annotations, mixins, jackson-databind

我正在尝试使用 Jackson 2.0 mixins 来序列化一个没有注释的类。

下面是简化的源代码。[请注意，我没有使用 getter/setter，但根据文档，](https://github.com/FasterXML/jackson-docs/wiki/JacksonMixInAnnotations)我似乎仍然可以使用 mixins 。

```
public class NoAnnotation {
   private Date created;
   private String name;

   // make one with some data in it for the test
   static NoAnnotation make() {
      NoAnnotation na= new NoAnnotation();
      na.created = new Date();
      na.name = "FooBear";
      return na;
   }

   // my Mixin "class"
   static class JacksonMixIn {
      JacksonMixIn(@JsonProperty("created") Date created,
                   @JsonProperty("name") String name)
         { /* do nothing */ }
   }

   // test code
   public static void main(String[] args) throws Exception {
      NoAnnotation na = NoAnnotation.make();
      ObjectMapper objectMapper = new ObjectMapper();
      objectMapper.addMixInAnnotations(NoAnnotation.class, JacksonMixIn.class);
      String jsonText = objectMapper.writeValueAsString(na);
      System.out.println(jsonText);
   }
} 
```

当我运行 main 我得到

```
Exception in thread "main" com.fasterxml.jackson.databind.JsonMappingException: No serializer found for class com.flyingspaniel.so.NoAnnotation and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationConfig.SerializationFeature.FAIL_ON_EMPTY_BEANS) )
    at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:51)
    at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:25)
    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:108)
    at com.fasterxml.jackson.databind.ObjectMapper._configAndWriteValue(ObjectMapper.java:2407)
    at com.fasterxml.jackson.databind.ObjectMapper.writeValueAsString(ObjectMapper.java:1983)
    at com.flyingspaniel.so.NoAnnotation.main(NoAnnotation.java:49) 
```

当我按照异常中的说明添加一行时

```
objectMapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS); 
```

我不再收到异常，但结果是一个空的 JSON 对象，`{}`.

如果我将这些字段公开，它会起作用，但这不是我想做的事情，因为它不是一个合理的对象设计。

我猜我在某处遗漏了一个基本的“setThis”步骤，但不知道是什么。在这种情况下如何让 mixins 工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T18:48:25.773

如果你想使用注解混合正确的方式来声明它是：

```
static class JacksonMixIn {
    @JsonProperty Date created;
    @JsonProperty String name;
} 
```

以这种方式完成后，您可以控制字段序列化，只需将它们从混合中包含/排除。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T22:43:13.497

我想到了。如果要访问私有字段，则需要通过添加以下行来使用可见性：

```
objectMapper.setVisibilityChecker(VisibilityChecker.Std.defaultInstance()
        .withFieldVisibility(Visibility.ANY)); 
```

对于受保护的字段，您还可以使用`Visibility.PROTECTED_AND_PUBLIC`.

## 完整示例

```
// test code
public static void main(String[] args) throws Exception {
   NoAnnotation na = NoAnnotation.make();
   ObjectMapper objectMapper = new ObjectMapper();
   objectMapper.addMixInAnnotations(NoAnnotation.class, JacksonMixIn.class);
   objectMapper.setVisibilityChecker(VisibilityChecker.Std.defaultInstance()
           .withFieldVisibility(Visibility.ANY));
   String jsonText = objectMapper.writeValueAsString(na);
   System.out.println(jsonText);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-12T05:19:54.817

[正如您在自我回答](https://stackoverflow.com/a/10940881/1108305)中提到的，更改字段可见性检查器将解决这种情况。作为修改 的替代方法`ObjectMapper`，这可以通过使用[`@JsonAutoDetect`](https://fasterxml.github.io/jackson-annotations/javadoc/2.0/com/fasterxml/jackson/annotation/JsonAutoDetect.html)注释使用纯基于注释的解决方案来完成：

```
@JsonAutoDetect(fieldVisibility = Visibility.ANY)
static class JacksonMixIn {
   JacksonMixIn(@JsonProperty("created") Date created,
                @JsonProperty("id") int id)
      { /* do nothing */ }
} 
```

# java - IntelliJ IDEA 中的自定义 spring 命名空间处理程序

> ID：10937925
> 
> 赞同：2
> 
> 时间：2012-06-07T18:43:50.023
> 
> 标签：java, spring, intellij-idea, xsd, xml-namespaces

我正在阅读有关编写自定义 spring 命名空间处理程序的教程：http: [//static.springsource.org/spring/docs/2.5.x/reference/extensible-xml.html](http://static.springsource.org/spring/docs/2.5.x/reference/extensible-xml.html)

一切都很好，直到我进入第 B.5 节关于注册新的处理程序和模式..

我尝试将 spring.handlers 和 spring.schemas 放入我的项目中 - 没有用

我能够找到文件 | 设置 | Schemas 和 DTD，确实在编辑器中启用了自动完成功能，但处理程序仍未注册。这也没有转化为 spring.schemas 文件中的条目。

简而言之，有人可以解释如何在 intelliJ 11.1.2 中执行以下操作吗？

a) 配置它以识别新的模式和命名空间处理程序 b) 在构建工件时将正确的信息放入 META-INF/spring.handlers 和 spring.schemas 文件中？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T02:32:26.793

为了完成这项工作，我需要将 *.handlers、*.schemas 和 *.xsd 添加到资源模式（设置 | 编译器）。一旦我得到了那个设置，它就像一个魅力。

# c++ - 为什么这个缓冲区大小没有被套接字正确处理？

> ID：10937926
> 
> 赞同：0
> 
> 时间：2012-06-07T18:43:52.087
> 
> 标签：c++, sockets

当我将 BUF_SIZE 设置为 10000 工作正常但 50000 没有。我只是试图将数据从客户端发送到服务器并测试缓冲区大小，但我发现对于某些大小，应用程序无法正常工作。

为什么？？我怎么能解决它？

例如，我运行服务器和客户端，第一次尝试工作正常，但是当我重新运行客户端时，开始出现交付问题。

这是服务器：

```
#include <sys/types.h>
#include <sys/wait.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <iostream>
#include <signal.h>

#define BUF_SIZE 50000

using namespace std;

void manejador(int signo);

int main()
{
    int     sservice, sclient,l,nbytes_read, err, nbytes_sent;
    bool    end;
    char    buf[BUF_SIZE];
    struct sockaddr_in sin, clientfsin;
    pid_t pid;
    int status;

    sservice=socket(PF_INET,SOCK_STREAM, 0); /*Open the socket*/
    if(sservice == -1)
    {
        perror("Server. Socket: ");
        exit(-1);
    }

    sin.sin_family      = AF_INET;  /*ARPANET address family*/
    sin.sin_addr.s_addr = INADDR_ANY;   /*Accept connections on any Interface*/ 
    sin.sin_port        = htons(4000);          /*Service TSAP > 1023\. CHANGE IT!*/

    /*Register the server in the system*/
    err=bind(sservice, (struct sockaddr*)&sin, sizeof(sin));
    if(err == -1)
    {
        perror("Server. bind: ");
        exit(-1);
    }

    /*Up to 5 waiting connections*/
    err = listen(sservice,5);
    if(err == -1)
    {
        perror("Server. Listen: ");
        exit(-1);
    }

    /* Receiving requests loop */
    for(;;)
    {
        /*Accept a connection from a client*/
        l = sizeof(clientfsin);
        sclient = accept(sservice,(struct sockaddr *)&clientfsin, (socklen_t*) &l);
        if(sclient == -1)
        {
            perror("Server. Accept: ");
            continue;
        }

        signal(SIGCHLD,manejador);          //Quitar si ponemos waitpid
        pid = fork();

        if(pid == -1){
            printf("Error al crear el proceso hijo\n");
            exit(0);
        }

        if(pid){
            close(sclient);
            //waitpid(pid,&status,0); //Descomentar si usamos waitpid
        }else{

        close(sservice);    
        /*Give the service*/
        end = false;
        int i=1;
        while(!end && (i<=10)) 
        {   
            nbytes_read=recv(sclient,(char *)buf,sizeof(buf),0);

            if (nbytes_read > 0)
            {
                buf[nbytes_read]='\0'; 
                //cout << "SERVER>Server received: " << buf << endl;
                printf("Recepcion <%i>: Se han recibido <%i> bytes del cliente\n",i,nbytes_read);
                cout.flush();

                err = 0;
                //sprintf(buf,"%s_server",buf);
                nbytes_sent = send(sclient,(char *)buf,sizeof(buf),0);
                printf("Envio <%i>: Se han enviado <%i> bytes al cliente\n",i,nbytes_sent);
                i++;
            }
            else    
            {
                perror("Sever. Receive/read: ");
                end=true;
                err = -1;
            }
        }

        if(err >= 0)
            cout << "SERVER>Cliente Atendido" << endl;
        else
            cout << "SERVER>Finalizacion incorrecta del cliente" << endl;

        /*Never forget to close a socket!*/
        close(sclient);
        exit(0);
        }
    }

    close(sservice);
    printf("Fin server");

} /*main()*/

void manejador(int signo) //comentar si usamos waitpid
{
      int estado;
      wait(&estado);
} 
```

这是客户：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <cstdio>
#include <cstdlib>
#include <cstring>
#include <iostream>
#include <sys/time.h>

#define BUF_SIZE 50000

using namespace std;

int main()
{
    int     sock, err;
    bool    end;
    char    buf[BUF_SIZE];
    struct sockaddr_in sout;

    sock=socket(PF_INET,SOCK_STREAM, 0); /*Open the socket*/
    if(sock == -1)
    {
        perror("Client. Socket: ");
        exit(-1);
    }

    sout.sin_family      = AF_INET;                       /*ARPANET address family*/
    sout.sin_addr.s_addr = inet_addr("127.0.0.1");     /*Which server?*/
    sout.sin_port        = htons(4000);                       /*Output port*/

    /*Connect to the server*/
    err = connect(sock,(struct sockaddr *)&sout, sizeof(sout));
    if(err == -1)
    {
        perror("Client. Connect: ");
        exit(-1);
    }

    end = false;
    double t1,t2;
    while(!end) 
    {   
        /*Ask for the service*/
        //cout << endl << "CLIENT> Send a message...: " ;    cout.flush();
        //cin.getline(buf, 128);
        int i=0;
        for(i=0;i<10;i++){
            timeval tim;
                    gettimeofday(&tim, NULL);
                    t1=tim.tv_sec+(tim.tv_usec/1000000.0);

            err = send(sock,(char *)buf,sizeof(buf),0);

            if(err == -1)
            {
            perror("Client. Send/write: ");
            exit(-1);
            }
            printf("Envio <%i>: Se han enviado <%i> bytes\n",i+1,err);

            gettimeofday(&tim, NULL);
                    t2=tim.tv_sec+(tim.tv_usec/1000000.0);
                    printf("%.6lf para el envio de <%i>\n", t2-t1,i+1);

            err = recv(sock,(char *)buf,sizeof(buf),0);
            printf("Recepcion <%i>: Se han recibido <%i> bytes\n",i+1,err);
            //cout << "CLIENT> Server response: " << buf;   
            cout.flush();
        }
        end=true;
    }

    close(sock);

} /*main()*/ 
```

题外话：很抱歉用西班牙语发表评论；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T22:37:05.440

错误：

1) 您的服务器不会尝试确保它已收到完整的消息。

2) 无论它实际需要发送多少字节，您的服务器都会发送 50,000 个字节。

3) 如果您的服务器实际上读取了 50,000 个字节，它尝试添加终止零将溢出缓冲区。

3) 您的客户端发送了 50,000 个不确定的字节。

4) 您的客户端忽略它收到的字节数。

5) 客户端不确保它确实收到了服务器发送的终止零字节。

但你最大的错误是：你没有合理的协议。如果消息以零字节终止，为什么要发送 50,000 字节？如果你的消息总是 50,000 字节，为什么接收者不尝试接收 50,000 字节呢？

我会给你我给每个 TCP 程序员的标准建议： 从开发协议开始并记录它。协议应指定谁发送以及何时发送。协议应指定消息的框架方式。协议应指定有效和无效消息的规则。协议应指定如何检测和处理死连接。等等。

正确记录协议需要一个小时左右的时间，但这是非常值得的。没有一个，很难判断我上面的哪些错误真的是错误。（例如，即使消息只是“hi”，也许你真的应该总是发送 50,000 个字节。服务器应该通过字节数还是通过终止零来找到消息的结尾？等等。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:19:52.530

我运行了你的程序。问题在于您对`recv`工作方式的期望。您期望接收器始终能够`BUF_SIZE`在一次读取中读取所有字节。如果这是您的期望，那么您应该在调用`MSG_WAITALL`的最后一个参数中设置标志。`recv`尽管在阻塞 I/O 中，`send`调用将保持阻塞状态，直到发送完所有字节，但对于`recv`. 它将接收套接字输入队列中的任何数据，因此它`recv`可能比没有`MSG_WAITALL`标志的预期短。

至于为什么较小的值`BUF_SIZE`有效而较大的无效，这可以通过套接字输入队列的大小来解释。您可以尝试使用`setsockopt`该`SO_RCVBUF`选项将其设置为与您匹配或超过您的值`BUF_SIZE`，看看它是否适合您。但是，在现实生活中，网络条件将决定输入缓冲区是否保持满，所以短读只是你的程序应该处理的事情。

其余的答案解决了代码中的一些样式问题和一种“off by one”错误。

我注意到您正在从堆栈中创建一个相当大的数组。您可以考虑动态分配它。一种方法是使用向量。

```
std::vector<char> buf;

buf.resize(BUF_SIZE);
nbytes_read = recv(sclient, &buf[0], buf.size(), 0); 
```

另一件值得注意的事情（@Linux_iOS.rb.cpp.c.lisp.m.sh 注意到）是如果`nbytes_read`有 value `BUF_SIZE`，那么尝试`NUL`终止输入是错误的事情。它将访问缓冲区区域之外的数据。如果你真的必须`NUL`终止，那么使用向量，你可以使用`push_back`.

```
if (nbytes_read == buf.size()) buf.push_back('\0');
else buf[nbytes_read] = '\0'; 
```

但是您应该会发现只设置缓冲区的大小会更容易。

```
buf.resize(nbytes_read); 
```

然后，当您回显数据时，您只会回显读取的内容。

```
send(sclient, &buf[0], buf.size(), 0); 
```

# sql-server-2005 - 比较同一表中的 2 个连续行并将 row2 更新为 row1 值

> ID：10937929
> 
> 赞同：1
> 
> 时间：2012-06-07T18:44:08.100
> 
> 标签：sql-server-2005

我需要比较同一张表中的 2 个连续行。如果第二行中缺少数据，我应该使用第一行的数据对其进行更新。

例如：

```
Row   EmpID  DATE        PosID        EmpStatus  EmpDept  EmpVP
----------------------------------------------------------------------
1     21     2010-12-31  NULL         TC         NULL     40
2     21     2010-01-25  90156840101  NULL       407      NULL
3     21     2003-11-25  NULL         AC         NULL     NULL 
```

第一次迭代：由于Row1 EmpStatus = TC，我想将Row2上的EmpStatus更新为TC（由于其为NULL），并将Row2上的EmpVP更新为40，如下图：

```
Row   EmpID  DATE        PosID        EmpStatus  EmpDept  EmpVP
----------------------------------------------------------------------
1     21     2010-12-31  NULL         TC          NULL    40
2     21     2010-01-25  90156840101  TC          407     40 
3     21     2003-11-25  NULL         AC          NULL    NULL 
```

第二次迭代：由于 Row3 上的 PositionID 为 NULL，我想用 Row2 的 PositionID 更新 Row3。由于 Row2 现在有 EmpStatus = TC，我想比较 row2 和 row3 数据。由于第 3 行有一个新值，我想保留新值“AC”。但同时我想更新第 3 行的 EmpDept 的值 = 40，因为它是 NULL。期望的结果如下所示：

```
Row   EmpID  DATE        PosID        EmpStatus  EmpDept  EmpVP
----------------------------------------------------------------------
1     21     2010-12-31  NULL         TC          NULL    40
2     21     2010-01-25  90156840101  TC          407     40 
3     21     2003-11-25  90156840101  AC          407     40 
```

我正在处理历史数据加载，我必须根据日期向后建立记录。

谁能告诉我如何编码？我想知道我们是否可以进行这些更新，最好不使用游标，因为我在这张表中有很多员工。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:24:50.657

这是一个迭代过程，不仅取决于访问的每一行，还取决于处理过程中所做的数据更改。我什至无法想象没有游标你会怎么做。

我认为，一旦您决定使用游标，那么只需确定规则（以比您介绍的更通用的方式），然后使用游标实现这些规则。

这似乎是一个一次性的过程，所以我不确定我是否理解您为什么会担心编写一个使用游标处理数据的例程，并在维护期间或仅在缓慢使用期间运行它时期。

下面是一些关于如何解决这个问题的伪代码（您需要从手册中获取实际的语法详细信息，并且您需要确保以正确的顺序和正确的方式应用您的业务规则）：

开始

```
DECLARE @row NUMBER, @posID VARCHAR(20), @empStatus VARCHAR(2), @empDept NUMBER, @empVP NUMBER;
DECLARE @prevPosID VARCHAR(20), @prevEmpStatus VARCHAR(2), @prevEmpDept NUMBER, @prevEmpVP NUMBER;
DECLARE @isFirst NUMBER;
SET @isFirst = 1;

DECLARE  mycurs CURSOR FOR
SELECT   Row, PosID, EmpStatus, EmpDept
FROM     Empl
ORDER BY Date DESC
FOR UPDATE OF Empl;

OPEN mycurs;

FETCH NEXT mycurs INTO @row, @posID, @empStatus, @empDept, @empVP;

WHILE (@@FETCH_STATUS != NOTFOUND)
BEGIN
    IF (@isFirst == 1) THEN
    BEGIN
        @isFirst = 0;
    END
    ELSE
    BEGIN
        IF (@empStatus IS NULL AND @prevEmpStatus IS NOT NULL) THEN
        BEGIN
            SET @empStatus = @prevEmpStatus;
            UPDATE Empl SET EmpStatus = @empStatus WHERE Row = @row;
        END
        IF (@posID IS NULL AND @prevPosID IS NOT NULL) THEN
        BEGIN
            SET @posID = @prevPosID ;
            UPDATE Empl SET PosID = @posID WHERE Row = @row;
        END
        IF (@empDept IS NULL AND @prevEmpDept  IS NOT NULL) THEN
        BEGIN
            SET @empDept = @prevEmpDept;
            UPDATE Empl SET EmpDept= @empDept WHERE Row = @row;
        END
    END

    SET @prevPosID = @posID;
    SET @prevEmpStatus = @empStatus;
    SET @prevEmpDept = @empDept;
    SET @prevEmpVP = @empVP;

    FETCH NEXT mycurs INTO @row, @posID, @empStatus, @empDept, @empVP;
END

DEALLOCATE mycurs;
CLOSE mycurs; 
```

结尾

# javascript - 没有返回结果时显示消息 JavaScript 搜索

> ID：10937933
> 
> 赞同：1
> 
> 时间：2012-06-07T18:44:20.487
> 
> 标签：javascript, html, bing-api

我们有一个 JavaScript 搜索脚本，可以从 Bing API 中提取数据。但是，当没有找到用户查询的结果时，它只会显示一个空白页面。**我们如何让脚本显示无结果消息，例如“Nothing found.”？**

```
ajax({
    type:"GET",
    url:"http://api.bing.net/json.aspx?appId=APPID&query=QUERY&sources=web&adult=strict&web.count=10&cc=en&jsontype=callback&jsoncallback=?",
    dataType:"jsonp",
    success:function(a){
        $ID("results").innerHTML="<h2>Search</h2>";
        for(var c=0;c<a.SearchResponse.Web.Results.length;c++){
            var d=a.SearchResponse.Web.Results[c];
            $ID("results").innerHTML+="<a href=\""+d.Url+"\" id=\"result\"><div id=\"title\">"+d.Title+"</div><div id=\"url\">"+d.DisplayUrl+"</div>"+d.Description+"</a>"
        }
    }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:47:20.753

```
 function noResults() {
     $ID("results").innerHTML="<h2>Nothing to see here...</h2>";
   }

   ajax({
        type:"GET",
        url:"http://api.bing.net/json.aspx?appId=APPID&query=QUERY&sources=web&adult=strict&web.count=10&cc=en&jsontype=callback&jsoncallback=?",
        dataType:"jsonp",
        success:function(a){
            if (!a.SearchResponse.Web.Results ||
                !a.SearchResponse.Web.Results.length) {
              noResults();
            } else {
              // results processing here
            }
        },
        error : function (a) {
            noResults();
        }
   }) 
```

可能不是您想要的，但或多或​​少是您要求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:47:10.660

```
ajax({
type:"GET",
url:"http://api.bing.net/json.aspx?appId=APPID&query=QUERY&sources=web&adult=strict&web.count=10&cc=en&jsontype=callback&jsoncallback=?",
dataType:"jsonp",
success:function(a){
    $ID("results").innerHTML="<h2>Search</h2>";
    if(a.SearchResponse.Web.Results.length > 0 ) {
       for(var c=0;c<a.SearchResponse.Web.Results.length;c++){
          var d=a.SearchResponse.Web.Results[c];
          $ID("results").innerHTML+="<a href=\""+d.Url+"\" id=\"result\"><div id=\"title\">"+d.Title+"</div><div id=\"url\">"+d.DisplayUrl+"</div>"+d.Description+"</a>"
       }
    } else {
        $ID("results").innerHTML = "Sorry no result found"; //you can customize this
    }
} 
```

})

# linker - 链接描述文件中的 Make 或 Shell 变量

> ID：10937934
> 
> 赞同：9
> 
> 时间：2012-06-07T18:44:21.557
> 
> 标签：linker, makefile

链接描述文件是否可以访问 makefile/shell 变量并根据所述变量做出决定？

例如，假设我想在不使用不同链接器脚本的情况下更改下面 RAM 区域的开头，是否可以使用 make 变量来执行此操作？

```
MEMORY
{
ifeq ($(SOME_VAR),0)
RAM (wx) : ORIGIN = 0x100000, LENGTH = 128K
else
RAM (wx) : ORIGIN = 0x200000, LENGTH = 128K
endif
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-21T15:29:44.637

ld 不会从环境中导入任何变量，因此不能直接使用它们。最好的方法是使用要导出的环境变量创建自己的链接器脚本，并让原始链接器脚本包含它：

生成文件：

```
foo:
    echo SOMEVAR=$(SOMEVAR) > environment_linker_script
    ld ... 
```

环境链接器脚本：

```
SOMEVAR=xxx 
```

master_linker_script：

```
include environment_linker_script

ifeq ($(SOME_VAR),0) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T09:15:52.857

如果在 makefile 中决定几个链接器脚本之一的解决方案还不够，那么在 make 中生成脚本可能是一个可行的选择。

这个解决方案依赖于 GNU make 的逐字变量，这些变量被导出到环境变量并用 $$ 引用。我使用它来定义一个路径变量，用于在另一个链接器脚本中包含一个链接器脚本，如下所示：

```
define LDSCRIPT_DEF
/* Include the original libopencm3 linker script */
INCLUDE $(OPENCM3_DIR)/lib/stm32/f4/stm32f405x6.ld

/* Do custom stuff */
endef
export LDSCRIPT_DEF

$(LDSCRIPT):
    @echo "$$LDSCRIPT_DEF" > $(LDSCRIPT) 
```

说明：这是 makefile 的一部分，只有在 makefile 使用 $(LDSCRIPT) 作为所有相关规则的先决条件时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T01:42:31.443

我对此表示怀疑，尽管它取决于您使用的链接器。链接器可能会从 make 中读取一些导出的变量，但正如我所说，所有这些都取决于特定的链接器功能。另一个想法可能是只要链接器文件不会太复杂，一个选择是使用您的 makefile 实际生成它。有很多关于让 makefile 生成头文件的例子，你可以按照相同的路径生成链接器文件。

# jakarta-ee - Tomcat 5.5 和 Tomcat 6.0 中的 ClassNotFoundException 错误

> ID：10937935
> 
> 赞同：7
> 
> 时间：2012-06-07T18:44:22.393
> 
> 标签：jakarta-ee, tomcat, tomcat6, tomcat7, tomcat5.5

我在使用 tomcat 5.5 和 tomcat 6.0 服务器时遇到了这个奇怪的问题。我有两个将安装在 tomcat 上的 web 应用程序。当 tomcat 启动时，这两个 web 应用程序也同时启动，但有时一个 web 应用程序由于一个应用程序中的 init 失败而无法初始化，另一个应用程序在运行时出现 classnotfoundexception 错误。在 tomcat 7.0 中，即使其他应用程序无法初始化，该应用程序也可以正常运行。

经过一些调试后，我知道有一个名为 crystal.jar 的 jar，它位于两个应用程序的 web-inf/lib 文件夹中。我已将 jar 移至 tomcat 的 common/lib 文件夹，然后它开始正常工作。我想知道为什么它在 tomcat 7.0 中运行良好，而不是在 tomcat 5.x 和 tomcat 6.x 版本中。这些版本之间的类加载架构是否有任何变化？

谢谢

**EDIT1：**该库位于两个应用程序 WEB-INF\lib 目录的位置，并且它们与外部 DLLS 没有依赖关系。刚才我阅读了有关 tomcat 5.5 类加载器架构的信息，并了解到每个 Web 应用程序都有自己的类加载器。WEB-INF\lib 文件夹和 classes 文件夹中的库将被加载到这个类加载器中。存储在公共目录下的库将被放置到共享类加载器中。然后这个库应该在 web 应用程序的单独类加载器中单独加载。即使一个 Web 应用程序无法启动，其他 Web 应用程序也应该独立工作。这就是为什么我觉得奇怪，需要进一步调查。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T19:20:53.960

终于找到了这个问题的答案

存在一种已知的 PermGen 内存泄漏，当库类被系统类引用并因此超出其使用期限时。一个例子是当 Java 发现 JDBC 驱动程序或其他一些服务并“自动注册”它时。它在系统中保持对它的引用，但该类本身属于 Web 应用程序，并且必须在应用程序停止时卸载 - 但由于该引用而不能。并非所有此类引用都很容易清除。

这种情况下的一个典型症状是第一个依赖这个系统特性的web应用程序会成功，但是第二个和其他的会失败（因为在系统中注册的服务属于第一个web应用程序，无法看到来自第二个应用程序的类加载器，反之亦然）。

Tomcat 7 和最新版本的 Tomcat 6 在其默认配置中对某些已知的 PermGen 内存泄漏有更好的保护。

Tomcat 5.5 根本没有这样的保护。

**编辑**一些参考资料

[http://people.apache.org/~markt/presentations/2010-08-05-Memory-Leaks-JavaOne-60mins.pdf](http://people.apache.org/~markt/presentations/2010-08-05-Memory-Leaks-JavaOne-60mins.pdf) [http://people.apache.org/~markt/presentations/2010-11-04 -Memory-Leaks-60mins.pdf](http://people.apache.org/~markt/presentations/2010-11-04-Memory-Leaks-60mins.pdf)

[http://eclipse.org/mat/](http://eclipse.org/mat/)

[http://wiki.apache.org/tomcat/FAQ/Troubleshooting_and_Diagnostics](http://wiki.apache.org/tomcat/FAQ/Troubleshooting_and_Diagnostics) [http://wiki.apache.org/tomcat/MemoryLeakProtection](http://wiki.apache.org/tomcat/MemoryLeakProtection)

# sencha-touch - 在容器中居中分段按钮？

> ID：10937936
> 
> 赞同：4
> 
> 时间：2012-06-07T18:44:24.870
> 
> 标签：sencha-touch, sencha-touch-2

我有一个带有分段按钮的 TabBar 导航，其中还包含卡片布局。一切正常。但是，我试图让我的分段按钮在屏幕上居中。我不想让它伸展。我已经包含了主要视图并将所有代码放在 [SenchaFiddle](http://www.senchafiddle.com/#KFylK)

![在此处输入图像描述](../Images/2c3f636ef28ee0c087c546369b4cd7e2.png)

![在此处输入图像描述](../Images/03cce5ba3e9706d2929ed81414e8783d.png)

```
Ext.define('SenchaFiddle.view.SegView', {
    扩展：'Ext.Container'，
    xtype: 'seg-view',

    配置：{
        布局：'适合'，
        项目： [
            {
                布局：'vbox'，
                项目： [
                    {
                        xtype: '分段按钮',
                        允许压抑：真，
                        项目： [
                            {
                                文本：'选项 1'，
                                按下：真的，
                                处理程序：函数（）{
                                    console.log("选中 #1");
                                    Ext.getCmp('card-container').setActiveItem(0);
                                }
                            },
                            {
                                文本：'选项 2'，
                                处理程序：函数（）{
                                    Ext.Msg.alert("foo");

                                    Ext.getCmp('card-container').setActiveItem(1);
                                }
                            },
                            {
                                文本：'选项 3'，
                                处理程序：函数（）{
                                    Ext.getCmp('card-container').setActiveItem(2);
                                }
                            }
                        ]
                    },
                    {
                        xtype: '容器',
                        弯曲：10，
                        id: '卡片容器',
                        布局： {
                            类型：'卡'
                        },
                        项目： [
                            {
                                xtype: 'option-view1',
                                风格：'背景颜色：#fff'
                            },
                            {
                                html: '酒吧',
                                风格：'背景颜色：＃666'

                            },
                            {
                                html: '巴兹',
                                风格：'背景颜色：＃333'

                            }
                        ]
                    }
                ]
            }

        ]
    }
});

```

```
Ext.define('SenchaFiddle.view.MainView', {
    扩展：'Ext.tab.Panel'，
    xtype: '测试视图',
    id: '测试视图',

    配置：{
        tabBarPosition:'底部',
        布局： {
            类型：'卡'，
            动画片： {
                持续时间：300，
                easing: '缓入出',
                类型：'幻灯片'，
                方向：“左”
            }
        },
        全屏：是的，

        项目： [
            {
                标题：'Tab1'，
                iconCls: '信息',
                xtype：'面板'，
                布局： {
                    类型：“适合”
                },
                项目： [
                    {
                        标题：'标题 1'，
                        xtype: '工具栏',
                        停靠：'顶部'
                    },
                    {
                        id: '图片标签',
                        html: '正在加载 foo...'
                    },
                    {
                        xtype: 'seg-view',
                        布局：“适合”
                    }
                ]
            },
            {
                标题：'Tab2'，
                iconCls: '动作',
                项目： [
                    {
                        标题：'标题 2'，
                        xtype: '工具栏',
                        停靠：'顶部'
                    },
                    {
                        id: '新闻标签',
                        html: '加载栏...'
                    }
                ]
            }
        ]
    }
});

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T19:53:17.567

只是你能用`layout:{pack:'center'}`试着把你放在后面`allowDepress: true`，玩得开心！居中。

像这样：

```
Ext.define('SenchaFiddle.view.SegView', {
extend: 'Ext.Container',
xtype: 'seg-view',

config: {
    layout: 'fit',
    items: [
        {
            layout: 'vbox',
            items: [
                {
                    xtype: 'segmentedbutton',
                    allowDepress: true,
                    layout: {pack:'center'},
                    ... 
```

**更聪明**:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:55:53.040

你可以做的是把你的分段按钮放在一个带间隔的 hbox 布局中：

```
Ext.define('SenchaFiddle.view.SegView', {
  extend: 'Ext.Container',
  xtype: 'seg-view',

  config: {
    layout: 'fit',
    items: [
    {
      layout: 'vbox',
      items: [{
        xtype:'container',
        layout:'hbox',
        items:[{xtype:'spacer'},
        {
          xtype: 'segmentedbutton',
          allowDepress: true,
          items: [
          {
            text: 'Option 1',
            pressed: true,
            handler: function() {
              console.log("Picked #1");
              Ext.getCmp('card-container').setActiveItem(0);
            }
          },
          {
            text: 'Option 2',
            handler: function() {
              Ext.getCmp('card-container').setActiveItem(1);

            }
          },
          {
            text: 'Option 3',
            handler: function() {
              Ext.getCmp('card-container').setActiveItem(2);
            }
          }
          ]
          },{xtype:'spacer'}]},
          {
            xtype: 'container',
            flex: 10,
            id: 'card-container',
            layout: {
              type: 'card'
            },
            items: [
            {
              xtype: 'option-view1',
              style: 'background-color: #fff'
            },
            {
              html: 'bar',
              style: 'background-color: #666'

            },
            {
              html: 'baz',
              style: 'background-color: #333'

            }
            ]
          }
          ]
        }

        ]
      }
}); 
```

希望这可以帮助

# javascript - 重新组合javascript数组

> ID：10937948
> 
> 赞同：0
> 
> 时间：2012-06-07T18:45:03.860
> 
> 标签：javascript, jquery, json

我有下面的 javascript 数组

```
var test =[{
Maths:{
    ST1:10,
    ST2:2,
    ST3:15}
},
{
Science:{
    ST1:50,
    ST3:40}
    }
] 
```

我想从中生成如下所示的数组

```
var t = [{ST1:{
               Maths:10,
               Science:50
              },
          ST2:{
               Maths:2,
               Science:0
              },
          ST3:{
               Maths:15,
               Science:40
              }
         }] 
```

我尝试使用下面显示的代码

```
for (var key in test) {
  if (test.hasOwnProperty(key)) {
  for (var key1 in test[key]){
    //console.log(key1)}
    var abc = test[key][key1];
    for(var x in abc)
    {

    console.log(x+key1+abc[x])

    }

    }
  }
} 
```

我是新手，帮我做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:07:26.673

这主要是你想要的......

```
var t = {};
for (var i = 0; i < test.length; i++) {
    for (var name in test[i]) {
        for (var level in test[i][name]) {
            if (!t[level])
                t[level] = {}
            t[level][name] = test[i][name][level]
        }
    }
} 
```

唯一缺少的是在某个部分下缺少值`Science:0`时获取 for 。`STx`

***演示：http:*** [//jsfiddle.net/eHwBC/](http://jsfiddle.net/eHwBC/)

*结果：*

```
{
    "ST1": {
        "Maths": 10,
        "Science": 50
    },
    "ST2": {
        "Maths": 2
    },
    "ST3": {
        "Maths": 15,
        "Science": 40
    }
} 
```

`for-in`请记住，用于枚举时没有保证顺序。

如果标签（数学、科学等）是预先知道的，那么您可以确保每个对象都获得所有标签。

如果没有，可以进行单独的循环。根据方法的不同，它可以在这个主循环之前或之后完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:09:43.363

尝试如下，

```
/* Iterator start */
var t = {};
for (var i = 0; i < test.length; i++) {  //Iterate Maths, Science,..   
    for (var key in test[i]) {           //Iterate Math
        for (var iKey in test[i][key]) { //Iterate ST1, ST2, ST3
          var s = (t.hasOwnProperty(iKey))?t[iKey]:createObject();                    
          s[key] = test[i][key][iKey];
          t[iKey] = s;
        }
    }
}
/* Iterator End */ 

p = [];
p.push(t);
//^- p is what you want

// Separate function so you can add more items later without changing logic
function createObject () {
    return {'Maths' : 0, 'Science': 0};
} 
```

[**下面的演示**](http://jsfiddle.net/xWGsP/4/)和证明，

![在此处输入图像描述](../Images/c8131db570ccf68ceb8152ca4c983661.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:48:13.873

## 你知道`JSON.stringify(t)`吗？

它将对象文字转换为 JSON。

Mozilla 关于这个函数的文档可以在[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)找到。

你也可以阅读[这篇博客文章](http://cjihrig.com/blog/native-browser-support-for-json-part-2-of-2/)以获得进一步的解释

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T19:19:55.793

尝试这个：

```
var test =[{
Maths:{
    ST1:10,
    ST2:2,
    ST3:15
    }
},
{
Science:{
    ST1:50,
    ST3:40}
    }
];

var result = [];
for(i = 0; i <= test.length; i++){
  var resultRow = {};
  for(key in test[i]){
    for(subKey in test[i][key]){
      if(resultRow[subKey] == undefined){
        resultRow[subKey] = {};
      }
      resultRow[subKey][key] = test[i][key][subKey];
    }
  }
  result.push(resultRow);
} 
```

# jquery - 我可以在 jquery 中检测到客户端操作系统具体是 Mac 雪豹吗？

> ID：10937951
> 
> 赞同：2
> 
> 时间：2012-06-07T18:45:18.320
> 
> 标签：jquery, operating-system, osx-snow-leopard

我正在创建一个下载页面，我只想将使用 MAC Snow Leopard 操作系统的用户重定向到此页面。我可以通过 jquery 专门检测雪豹操作系统用户吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:47:53.263

通过分析 User-Agent 字符串，您可以（不可靠地）了解正在运行的操作系统版本。

[http://www.quirksmode.org/js/detect.html](http://www.quirksmode.org/js/detect.html)

该脚本的核心是以下代码：

```
this.version = this.searchVersion(navigator.userAgent)
        || this.searchVersion(navigator.appVersion)
        || "an unknown version"; 
```

请注意，您需要同时考虑“userAgent”和“appVersion”，具体取决于具体的浏览器。

不同的浏览器通常以略有不同的方式报告操作系统。查看这些列表，了解三大 Mac 浏览器是如何做到这一点的——Snow Leopard 浏览器通常在某处包含字符串“10_6_”或“10.6”，以表明它是 Mac OS 10.6.n：

[http://www.useragentstring.com/pages/Safari/](http://www.useragentstring.com/pages/Safari/)

[http://www.useragentstring.com/pages/Chrome/](http://www.useragentstring.com/pages/Chrome/)

[http://www.useragentstring.com/pages/Firefox/](http://www.useragentstring.com/pages/Firefox/)

总而言之，您可以尝试这样的事情，这绝对没有经过我的严格测试：

```
var ua = navigator.userAgent ||navigator.appVersion;
if (ua.match(/10[_.]6/)) { // null if not matched
    alert('Snow Leopard');
} else {
    alert('not Snow Leopard');
} 
```

[http://jsfiddle.net/8BxUC/2/](http://jsfiddle.net/8BxUC/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:48:47.693

您应该能够从`navigator.appVersion`或`navigator.userAgent`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:50:10.493

你只能通过用户代理：

```
$('#UserAgent').val(navigator.userAgent); 
```

它看起来像这样：

```
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/534.53.11 (KHTML, like Gecko) Version/5.1.3 Safari/534.53.10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T19:10:50.390

使用 navigator.userAgent 来确定平台，容易受到用户的欺骗或浏览器本身的虚假陈述。在可能的情况下，最好完全避免使用特定于浏览器的代码。

# shell - 如何获取错误输出并将其存储在变量或文件中

> ID：10937953
> 
> 赞同：3
> 
> 时间：2012-06-07T18:45:19.323
> 
> 标签：shell, unix, permissions

我在弄清楚如何获取错误输出并将其存储在 ksh 中的变量或文件中时遇到了一些麻烦。所以在我的脚本中，我有`cp -p source.file destination`一个`while`循环。

当我收到以下错误

```
cp: source.file: The file access permissions do not allow the specified action. 
```

我想抓住它并将其存储在变量或文件中。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T18:50:35.363

您可以像这样重定向命令的错误输出：

```
cp -p source.file destination 2>> my_log.txt 
```

它将错误消息附加到 my_log.txt 文件中。

如果您需要一个变量，您可以将 stderr 重定向到 stdout 并将命令输出分配给一个变量：

```
my_error_var=$(cp -p source.file destination 2>&1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:53:03.913

在 ksh 中（根据 Q），如在 bash 和其他 sh 衍生物中，您可以使用重定向从 cp 获取所有/仅 stderr 输出，然后在 var 中获取（使用 $()，如果使用模糊的最新版本，则比反引号更好） ：

```
output=$(cp -p source.file destination 2>&1) 
```

cp 通常不会输出任何内容，尽管这会捕获 stdout 和 stderr；要以这种方式捕获 stderr，`1>/dev/null`也可以使用。重定向到文件的其他解决方案可以使用 cat/各种其他命令来输出/处理日志文件。

我不建议使用输出到临时文件的原因：

重定向到一个文件然后读取它（通过 read 命令或更低效地通过`$(cat file)`），特别是对于单行，效率较低且速度较慢；虽然如果您想在显示错误之前每次都附加到它以进行多次操作，但还不错。除非您总是将其清除，否则您还将保留临时文件，不要忘记人们何时中断（即 Ctrl-C）或终止脚本。

如果脚本一次运行多次，使用临时文件也可能是一个问题（例如，如果文件系统/其他延迟导致大量溢出或仅来自多个用户，则可能通过 cron 发生），除非临时文件名是唯一的。

除非非常小心，否则生成临时文件也是一种安全风险，特别是如果再次处理文件数据或内容可能在显示之前被其他东西重写以混淆/钓鱼用户/破坏脚本。不要养成太随便的习惯，首先通过此处/google 的其他问题阅读临时文件（例如 mktemp）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:48:40.517

您可以通过执行以下操作进行 STDERR 重定向：

```
command 2> /path/to/file.txt 
```

# c# - 数据绑定不起作用

> ID：10937955
> 
> 赞同：-1
> 
> 时间：2012-06-07T18:45:21.760
> 
> 标签：c#, wpf, data-binding

我想知道通用代码有什么问题。这里是：

```
namespace Morse_Mail{

public partial class MainWindow : Window
{

    public ObservableCollection<Message> Messages { get; set; }

    public MainWindow()
    {
        Messages = new ObservableCollection<Message>();

        InitializeComponent();
    }

    // some code here

}

public class Message : INotifyPropertyChanged
{
    private string subject;
    private string date;
    private string sender;
    private string id;

    public string Subject
    {
        get { return subject; }
        set { subject = value; OnPropertyChanged("Subject"); }
    }
    public string Date
    {
        get { return date; }
        set { date = value; OnPropertyChanged("Date"); }
    }
    public string Sender
    {
        get { return sender; }
        set { sender = value; OnPropertyChanged("Sender"); }
    }
    public string ID { get; set; }

    public Message(string _Subject, string _Date, string _Sender, string _ID) 
    {
        Subject = _Subject;
        Date = _Date;
        Sender = _Sender;
        ID = _ID;
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
}} 
```

我想将列表视图内容绑定到 Messages ObserverableCollection。这是我的 xaml 代码：

```
<Window x:Class="Morse_Mail.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Height="864.5" Width="1203.5" ResizeMode="NoResize" Title="Morse Mail" WindowStartupLocation="CenterScreen">
<Grid Height="830" VerticalAlignment="Top">
    <ListView x:Name="ListView" HorizontalAlignment="Left" Height="704" Margin="47,39,0,0" VerticalAlignment="Top" Width="600" IsSynchronizedWithCurrentItem="True"
              ItemsSource="{Binding Messages}">
        <ListView.View >
            <GridView AllowsColumnReorder="true">
                <GridViewColumn Width="300" Header="Subject" 
                                DisplayMemberBinding="{Binding subject}"/>
                <GridViewColumn Width="150" Header="Date" 
                                DisplayMemberBinding="{Binding date}"/>
                <GridViewColumn Width="120" Header="Sender" 
                                DisplayMemberBinding="{Binding sender}"/>
                <GridViewColumn Width="20" Header="ID" 
                                DisplayMemberBinding="{Binding id}"/>
            </GridView>
        </ListView.View>
    </ListView>
</Grid> 
```

我的应用程序有效，但如果我使用按钮将新项目添加到消息集合中，它们会出现在该集合中，但窗口中没有任何变化。为什么我的数据绑定不起作用以及如何

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:47:14.980

您似乎没有设置[`DataContext`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx). （它需要是持有你绑定到的属性的对象，这里是窗口）

# java - 绕过 Java 闭包的最终限制的模式

> ID：10937956
> 
> 赞同：0
> 
> 时间：2012-06-07T18:45:28.723
> 
> 标签：java, coding-style, closures

我正在尝试编写一段非常简单的代码，但无法找到一个优雅的解决方案：

```
int count = 0;
jdbcTemplate.query(readQuery, new RowCallbackHandler() {
         @Override
         public void processRow(ResultSet rs) throws SQLException {
            realProcessRow(rs);
            count++;
         }
      }); 
```

这显然不能编译。我知道的两种解决方案都很臭：我不想计算一个类字段，因为它实际上是一个局部变量，我只需要用于记录目的。我不想计数一个数组，因为它很丑陋。

这只是愚蠢的，必须有一个合理的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T18:48:29.237

第三种可能性是使用 final-mutable-int-object，例如：

```
final AtomicInteger count = new AtomicInteger(0);
....
count.incrementAndGet(); 
```

Apache Commons 也有一个`MutableInteger`我相信的，但我没用过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T21:03:08.163

您似乎已经知道解决方案（尽管它们不同）；你可能知道原因（它不能通过引用捕获局部变量，因为在闭包运行时变量可能不存在，所以它必须按值捕获（有多个副本）；拥有相同的变量是不好的指不同范围内的不同副本，每个副本都可以独立更改，因此无法更改）。

如果您的闭包不需要将状态共享回封闭范围，那么类中的字段是正确的做法。我不明白你的反对意见是什么。如果闭包需要能够被多次调用并且每次都需要递增，那么它需要在对象中维护状态。字段（实例变量）正确地表达了对象中状态的存储。该字段可以使用从外部范围捕获的值进行初始化。

如果您的闭包需要将状态共享回封闭范围（这不是很常见的情况），那么使用可变结构（如数组）是正确的做法，因为它避免了本地生命周期的问题多变的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T18:49:57.010

我通常计算一个类字段，但添加一个注释，它只是一个字段，因为它被内部闭包、Runnable 等使用...

# objective-c - 在没有委托的情况下检测 UIWebView 何时完成加载

> ID：10937960
> 
> 赞同：1
> 
> 时间：2012-06-07T18:46:08.107
> 
> 标签：objective-c, ios, uiwebview

是否可以执行：

```
[UIWebView loadRequest:[NSURLRequest requestWithURL:url]]; 
```

以我知道 UIWebView 何时完成加载 NSURL 的方式，以便我可以继续进行进一步处理？除了使用委托之外。如果不是，代表将在什么条件下工作。

感谢您的任何提示/想法

进一步解释。我有这段代码在测试应用程序中对我有用：

```
webview = [[UIWebView alloc] init];
webview.delegate = self;
[webview loadRequest:[NSURLRequest requestWithURL:url]]; 
```

在测试应用程序的标题中，我有：

```
#import <UIKit/UIKit.h>
@interface ViewController : UIViewController <UIWebViewDelegate> {
UIWebView   *webview; 
```

}

我试图在一个我不完全理解的非常复杂的环境中复制它。我不知道该放在哪里，因为我不清楚。接口定义为：

```
@interface Stream (Extension)
@end 
```

并且它在头文件中稍后定义了另外四个接口。

在我的实现中，我得到“未声明的标识符自我”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:54:28.880

如果您使用 NSURLProtocol 拦截网络流量，您可以了解 Web 视图何时完成获取 NSURL 的内容和页面中的任何嵌入内容请求（但您必须提前知道 html 页面是否会发出请求以获取即图像）。

但是您无法检测到 UIWebView 何时已加载 dom 或在没有委托的情况下完成显示页面（出于好奇，我可能知道您为什么要问这样的问题）。

# ios - 客户端应用程序的 iPhone App Store ID

> ID：10937961
> 
> 赞同：1
> 
> 时间：2012-06-07T18:46:11.720
> 
> 标签：ios, facebook, app-store

我正在尝试将我的应用程序连接到 facebook，到目前为止，我已经填写了所有内容，除了“iPhone App Store ID”。我知道我可以通过注册我的应用程序在 iTunes Connect 上获得它。问题是，我的应用程序是为第三方客户服务的，他有自己的苹果 ID，他将是把应用程序上传到 Appstore 的人。如果我注册了应用程序，当他尝试将应用程序上传到应用商店时，这是否会导致我的客户出现问题？

我陷入了这个问题，不确定该去哪里，我已经向我的客户询问了 iPhone App Store ID，但我还没有收到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:48:50.690

使用您的客户 App ID 将是可行的方法。否则事情可能会变得混乱......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:52:34.243

您可以使用自己的 ID 注册应用程序，并且在需要时必须使用客户的 ID。

# linq - LINQ 遍历结果

> ID：10937962
> 
> 赞同：0
> 
> 时间：2012-06-07T18:46:23.333
> 
> 标签：linq

我正在尝试阅读以下文本文件：

```
 Author
    {
    Name  xyz
    blog  www.test.com
    rating 123
    }    
   Author
    {
    Name  xyz
    blog  www.test.com
    rating 123
    }   
    Author
    {
    Name  xyz
    blog  www.test.com
    rating 123
    }   
    Author
    {
    Name  xyz
    blog  www.test.com
    rating 123
    } 
```

我正在使用以下代码段来获取我的作者记录：

```
 public static IEnumerable<string> GetAuthors(string path, string startfrom, string endto)
        {
            return File.ReadLines(path)
                .SkipWhile(line => line != startfrom)
                .TakeWhile(line => line != endto);
        }

 public static void DoSomethingWithAuthors(string fileName)
        {
            var result = GetAuthors(fileName, "AUTHOR", "}").ToList();
         } 
```

以上仅返回我一个作者详细信息。有人可以告诉我如何一次性获取所有作者，以便我可以填充到一个对象。非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:49:49.877

它会在`}`它遇到的第一个地方停下来。

取下`.TakeWhile(line => line != endto)`钻头，它应该适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:43:47.650

我很少建议这样做，但如果文件结构是可预测的，您甚至可以使用正则表达式来获取您的作者详细信息。由于您要初始化的对象并不复杂，您可以匹配该`Author`位并从正则表达式匹配组中获取值。

匹配作者的正则表达式是这样的：

```
Author\s*{\s*Name\s+(.*?)\s+blog\s+(.*?)\s+rating\s+(.*?)\s*} 
```

您的值将在组 1,2 和 3 中。

**编辑：**

如果它对您没有影响，您可以使用 ReadToEnd() 方法，然后您可以将整个文件内容解析为字符串：http:
[//msdn.microsoft.com/en-us/library/system。 io.streamreader.readtoend(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readtoend(v=vs.100).aspx)

至于正则表达式解决方案 - 看看这个：http:
[//msdn.microsoft.com/en-us/library/twcw2f1c.aspx](http://msdn.microsoft.com/en-us/library/twcw2f1c.aspx)

改编版本 - 它可能需要调整，但通常它应该可以工作：

```
string text = [yourInputFileAsString]
      string pat = @"Author\s*{\s*Name\s+(.*?)\s+blog\s+(.*?)\s+rating\s+(.*?)\s*}";

      Regex r = new Regex(pat, RegexOptions.IgnoreCase | RegexOptions.Singleline);

      Match m = r.Match(text);

      var authors = new List<Author>();
      while (m.Success) 
      {
         var name = m.Groups[1].Value;
         var blog = m.Groups[2].Value;
         var rating = m.Groups[3].Value;
         var author = new Author(name, blog, rating);
         authors.Add(author);

         m = m.NextMatch();
      } 
```

# php - 无法显示 mySQL 表的最后更新时间

> ID：10937968
> 
> 赞同：0
> 
> 时间：2012-06-07T18:47:10.173
> 
> 标签：php, mysql, sql, time

所以我有一个网站，我试图显示 mySQL 服务器的最后更新时间，我环顾四周但仍然有问题。这是我的代码

```
$sql = 'SHOW TABLE STATUS FROM alumni LIKE "alumni_data"';
     $tableStatus = mysqli_query($link, $sql);
    if (!$tableStatus) {
        $error = 'Error getting update status: ' . mysqli_error($link);
        include 'error.html.php';
        exit();
    }

while ($array = mysqli_fetch_array($tableStatus)) {
          $updatetime = $array['Update_time'];
     }

echo '<center>Last Updated: ' . $updatetime . '</center>'; 
```

发生的事情是什么都没有打印出来，就像它从未找到更新时间一样。我已经手动输入了该查询，所以我很确定它可以工作。

谢谢

# c# - 空文本框上的 asp.net 滚动条

> ID：10937970
> 
> 赞同：0
> 
> 时间：2012-06-07T18:47:12.873
> 
> 标签：c#, asp.net, textbox, scrollbar

我有一个如下文本框：

```
 <asp:TextBox ID="TextBox1" runat="server" Width="100px" Rows="3" ReadOnly="true"
 BorderStyle="None" BorderWidth="0" TextMode="MultiLine" Text='<%# Eval("Notes") %>'
 BackColor="#222222" ForeColor="White"></asp:TextBox> 
```

当文本框为空或由于文本适合 3 行而不需要滚动时，如何使垂直滚动条不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:56:46.990

您可以通过指定`overflow:auto;`. 您可以手动将此属性添加到页面代码隐藏中的`CssStyleCollection`at `TextBox1.Style`，或者您可以以`CssClass`声明方式应用值并在外部样式表中定义 css 类。

这是一些关于 CSS 的文档`overflow`：[http ://www.quirksmode.org/css/overflow.html](http://www.quirksmode.org/css/overflow.html)

`TextBox.Style`以下是有关该属性的一些文档：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.style](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.style)

# c# - 修剪所有文件中文本的最快方法

> ID：10937978
> 
> 赞同：3
> 
> 时间：2012-06-07T18:47:42.840
> 
> 标签：c#

我有一个功能可以修剪目录中所有文件中的所有文本。这是代码

```
var dbtables = System.IO.Directory.GetFiles(db);

foreach(var table in dbtables)
{
     string text = File.ReadAllText(table);
     File.WriteAllText(table, text.Trim());
} 
```

此目录中有很多大文件，大约需要 30 分钟才能完成。你知道更快的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:05:43.620

以下是我建议对每个文件执行的操作：

1.  读第一个字符。

2.  如果是空格，则必须重写整个文件。

    1.  将整个文件读入内存。
    2.  从头开始逐个字符地迭代以找到第一个非空白字符。
    3.  从末尾逐个字符迭代以查找第一个非空白字符。
    4.  寻找文件的开头。
    5.  仅将字符串的中间字符写入文件。
    6.  将文件的长度设置为您编写的字符数。
3.  如果第一个字符不是空格，则不会修剪开头，因此您可以截断结尾。

    1.  逐个字符地向后读取文件，直到找到一个不是空格的字符。
    2.  如果您找到了空格，请将文件的长度设置为其当前长度减去空格字符的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:59:04.627

*您的代码当前从每个整个*文件的开头和结尾修剪空白，而不是每一行。如果要逐行修剪空白，可以使用：

```
var dbtables = System.IO.Directory.GetFiles(db);

foreach (string table in dbtables)
{
    string temp = table + ".tmp";
    using (StreamWriter target = new StreamWriter(temp))
        foreach (string line in File.ReadLines(table))
            target.WriteLine(line.Trim());

    File.Delete(table);
    File.Move(temp, table);
} 
```

# javascript - 如何将第二个函数绑定到 jQuery 验证 submitHandler

> ID：10937979
> 
> 赞同：0
> 
> 时间：2012-06-07T18:47:46.160
> 
> 标签：javascript, jquery, validation, jquery-validate

如何向另一个脚本中设置的 jQuery 验证 submitHandler 添加其他功能？我无法修改首先定义 submitHandler 的源 JavaScript。相反，我需要从运行的后续脚本中添加一些额外的功能。这是首先定义 submitHandler 的 .js 文件的一些按比例缩小的伪代码——我无法直接修改：

```
$("#frmReg").validate({
    invalidHandler: function(e, validator) { //code here ... not relevant },
    submitHandler: function() {
        window.onbeforeunload = null;
        $('#myForm')[0].submit();             
    },
    rules: { firstname: { required: true } },
    messages: { firstname: { required: 'First name is required' } }
}); 
```

本质上，我想将*第二个*函数绑定到现有的 submitHander。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T18:59:44.567

我浏览了源代码，我认为这应该可行：

```
var validatorInstance = $("#frmReg").validate(), //Call this AFTER the initial registration,
    submitHandler = validatorInstance.settings.submitHandler;

validatorInstance.settings.submitHandler = function(){
    //Do your custom stuff here
    console.log(true);
    return submitHandler.apply(this,arguments); //forward to the old handler
}; 
```

# jquery - 在 Sharepoint 2010 中对自定义 WCF 服务进行身份验证

> ID：10937980
> 
> 赞同：2
> 
> 时间：2012-06-07T18:47:49.097
> 
> 标签：jquery, wcf, authentication, sharepoint-2010, active-directory

我在 SharePoint 2010 中创建了一个自定义 WCF 服务，我试图通过 JQuery Ajax 请求调用该服务。我的自定义 WCF 服务以此处给出的示例为模型：

链接：http: [//blog.sharepointbits.com/2010/04/custom-wcf-services-in-sharepoint-2010_17.html](http://blog.sharepointbits.com/2010/04/custom-wcf-services-in-sharepoint-2010_17.html)

上面的方法给了我一个可以从 C# 服务器端代码访问的 WCF 服务，以及一个自定义 InfoPath 表单，但是，我无法使用 JQuery Ajax 获得响应。

我在 Stack Overflow 上的其他地方阅读，`MultipleBaseAddressWebServiceHostFactory`而不是`MultipleBaseAddressBasicHttpBindingServiceHostFactory`像原始文章建议的那样使用 a 。

链接：[Sharepoint 2010 wcf 服务。用jquery调用方法](https://stackoverflow.com/questions/5095701/sharepoint-2010-wcf-service-call-method-with-jquery)

这有效，允许我通过 JQuery Ajax 联系（但不验证）服务，但是，

a) 我不再能够导航到[http://[servername]/_vti_bin/Service.svc/mex](http://[servername]/_vti_bin/Service.svc/mex)并查看 WSDL。此问题意味着我的 InfoPath 表单也无法连接到该服务，因为它们要查找 WSDL。

b) 即使 JQuery Ajax 请求命中自定义 WCF 服务，浏览器每次都要求我进行身份验证，即使该请求来自登录到 SharePoint 的用户的浏览器。

如果有人知道如何解决问题 a) 和 b)，我将不胜感激。制作可以在任何应用程序中使用的服务真的不应该那么困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:50:23.467

经过一番折腾，我坚持使用`MultipleBaseAddressBasicHttpBindingServiceHostFactory`. 我没有尝试通过 JSON 联系 WCF 服务，而是创建了一个函数来创建 SOAP 消息，将其发送到 WCF 服务，然后解析结果。

有趣的是，这似乎也解决了我的身份验证问题，尽管我不清楚为什么。

现在可以从 InfoPath 和 JavaScript 使用该服务。

作为参考，从 JavaScript 到 WCF 的 SOAP 消息应如下所示：

```
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">                
    <soap:Body>
       <MethodName xmlns="http://tempuri.org/"> 
           <ParamName1>Value</ParamName1>
           <ParamName2>Value</ParamName2>
       </MethodName> 
    </soap:Body> 
 </soap:Envelope> 
```

和 JQuery 发送它：

```
$.ajax({
    type: "POST",
    url: url,
    data: soapEnvelope,
    timeout: timeOut,
    contentType: "text/xml",
    dataType: "xml",
    beforeSend: function (xhr) {
        xhr.setRequestHeader("SOAPAction", 'http://tempuri.org/' + methodPath);
    },
    success: onSuccess,
    error: onFailure
}); 
```

注意：找出 methodPath 的值的最简单方法是查看服务的 WSDL。

# javascript - Django 隐藏字段输入，带有媒体渲染问题的自定义小部件

> ID：10937989
> 
> 赞同：0
> 
> 时间：2012-06-07T18:48:13.373
> 
> 标签：javascript, django, django-forms, django-widget

我有一个 Django 小部件；它是一个隐藏的输入文本字段，有一个与之关联的 JavaScript 媒体文件。此 JavaScript 媒体创建一个 ajax 文件上传器，需要 1 个参数；它应该附加到的元素的 id。上传成功后，JavaScript 上传器将文件的位置作为字符串返回，并用它设置隐藏字段的值。

当我简单地硬编码 JS 创建的小部件应作为隐藏字段的父级附加到的元素的 id 时，这将停止工作；小部件甚至没有出现。我认为这与隐藏的输入有关。无论如何，任何一般的方向都会受到赞赏。如果需要额外的上下文，请告诉我。

# c# - C# 的数学概率 - 如何在某次尝试中获取 3 个不同字符的枚举值

> ID：10937994
> 
> 赞同：0
> 
> 时间：2012-06-07T18:48:22.920
> 
> 标签：c#, math, probability

嗨，我昨天问过这个问题，但由于不被理解而被关闭，所以这次我会尽量说得更具体一些。所以这里的情况。

**1.**我在一个字符数组中有 3 个字符：A、B、C，如下所示：

```
char[] characters = {'A', 'B', 'C'}; 
```

**2.**在枚举这 3 个字符的所有可能匹配项时，我得到例如以下内容：

```
Text    = A
tries   = 1
indexes = characters[0] 
------------
Text    = B
tries   = 2
indexes = characters[1] 
------------
Text    = C
tries   = 3
indexes = characters[2] 
------------
Text    = AA
tries   = 4
indexes = characters[0] characters[0] 
------------
Text    = AB
tries   = 5
indexes = characters[0] characters[1] 
------------
Text    = AC
tries   = 6
indexes = characters[0] characters[2] 
------------
Text    = BA
tries   = 7
indexes = characters[1] characters[0] 
------------
Text    = BB
tries   = 8
indexes = characters[1] characters[1] 
------------
Text    = BC
tries   = 9
indexes = characters[1] characters[2] 
------------
Text    = CA
tries   = 10
indexes = characters[2] characters[0] 
------------
Text    = CB
tries   = 11
indexes = characters[2] characters[1] 
------------
Text    = CC
tries   = 12
indexes = characters[2] characters[2] 
```

**3.**现在给定某个try的次数，我们能得到这个特定try的索引数吗？例如，在此尝试的尝试编号 10 处，文本是 CA（如上所示），因为索引是字符 [2] 和字符 [0]，所以是否有一个数学方程可以知道这些索引编号具有尝试次数?

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T18:55:08.877

> 我们可以在这个特定的尝试中获得索引的数量吗

对于任何给定数量的字母，您只是在以 3 为基数计算数字。因此，只需将十进制转换为 base-3，然后再转换回来。

要确定较小的字符串长度有多少可能性：有 3^n 个不同的可能长度字符串`n`使用 3 个字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:52:50.420

如果 的值`try`小于 4：

```
characters[try-1] 
```

除此以外：

```
characters[(try-4)/3], characters[(try-4)%3] 
```

其中`%`是模运算符，`/`是整数除法

所以`try == 10`你得到：

```
characters[2], characters[1] 
```

*注意*：由于您的尝试值从 1 开始，索引从 0 开始，我们需要从一开始就为 -1

*注意*：由于模运算的工作方式，第二个索引也可以写为`(try-1)%3`

# php - 正则表达式，截断以缩短文章并用省略号代替标点符号？

> ID：10937997
> 
> 赞同：3
> 
> 时间：2012-06-07T18:48:35.087
> 
> 标签：php, regex

我正在尝试截断 PHP 中的描述字段，并在适当的位置插入省略号，以便用户可以单击并了解更多信息。所以我从一个字段中检索一些字符：

```
LEFT(html,340) as descr 
```

然后设置变量...

```
$desc= $a['descr']; 
```

现在是困难的部分......我想在刺痛中找到最后一个标点符号，然后用'......'替换它们，因为我认为在随机位置打破一个句子会很丑陋。然后，如果句子太长且没有标点符号，或者结果太短，我实际上会从末尾开始替换第一个找到的空格。

```
$desc1=preg_replace('/([\.\-_,:].*)$/','...',$desc);

    $desc=strlen(strlen($desc1)>170&&340>strlen($desc1))?$descr1:
        preg_replace('/(\s.*)$/','...',substr($desc,0,300)); 
```

这是我到目前为止所尝试的，但问题是它在完全随机的位置打破了字符串，而不是从最后一个标点符号的位置开始。嗯

当几个标点符号一起被发现时，它也是无能为力的。最后，我只想在破折号前面有空格时才替换破折号。但我似乎无法弄清楚如何做这些事情，我的意思是如何把它们放在一起......

如果您能就上述任何一点提出建议，我会很高兴。

**嗯，我就是这样解决的**

```
$desc1 = preg_replace('/[.,!:_]+[^.,!:_]*$/', '... ', $desc);
    $desc=(strlen($desc1)<170)?preg_replace('/[\s]+[^\s]*$/', '... ', $desc) : $desc1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:16:46.417

这是我的解决方案：

```
<?php

define("STR_LEN_THRESHOLD", 400); //Define the threshold in characters.

$punctuation = ".,!:_"; //Define punctuation marks
$string = "Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus";
while (strlen($string) > STR_LEN_THRESHOLD) { //While string is too long
    $string = preg_replace("/[$punctuation][^$punctuation]+$/", "", $string); //Remove the last sentence
}
echo $string . "..."; //After enough was removed, add ... 
```

这输出：

> Pellentesque 居民 morbi tristique senectus et netus et malesuada 名声 ac turpis egestas。Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante。Donec eu libero 坐在amet quam egestas semper。Aenean ultricies mi vitae est. Mauris placerat eleifend leo。Quisque sat amet est et sapien ullamcorper pharetra。Vestibulum erat wisi, condimentum sed, commodo vitae...