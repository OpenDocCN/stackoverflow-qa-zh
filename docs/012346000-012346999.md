# StackOverflow 问答 12346000-12346999

# android - 位图图像视图在android中的触摸事件上自动缩放

> ID：12346001
> 
> 赞同：0
> 
> 时间：2012-09-10T05:53:30.773
> 
> 标签：android, bitmap

我正在开发一个应用程序，我想在我的布局上拖动图像视图、触摸事件。但问题是我正在从 Facebook 检索位图图像，而拖动它会自动缩放到较小的图像。

```
ImageView img = (ImageView)findViewById(R.id.edit_text_image);

Bitmap bm=getFacebookImage();
img.setImageBitmap(bm);

img.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        //Toast.makeText(MoveImage.this,"hiii", Toast.LENGTH_SHORT).show();
        switch(event.getAction())
        {
//      case MotionEvent.ACTION_DOWN:   
//
//      break;

        case MotionEvent.ACTION_MOVE:
            //Toast.makeText(MoveImage.this,"moved", Toast.LENGTH_SHORT).show();
            ImageView img=(ImageView)findViewById(v.getId());
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(img.getLayoutParams());
//                 
            int x_cord = (int)event.getRawX();
            int y_cord = (int)event.getRawY();

            if(x_cord>windowwidth){x_cord=windowwidth;}
            if(y_cord>windowheight){y_cord=windowheight;}

            params.leftMargin = x_cord - 25; //(int)event.getX();//
            params.topMargin =  y_cord - 75; // (int)event.getY();//

            img.setLayoutParams(params);

        break;

        }
        return true;
    }
}); 
```

如果我从资源中获取图像，它工作正常：

```
ImageView img = (ImageView)findViewById(R.id.edit_text_image);
img.setBackgroundResource(R.drawable.ic_launcher);

// same touch event here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T08:54:14.590

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    StickerRelativeLayout = (RelativeLayout) findViewById(R.id.shsticker_relativeLayout1);
    RelativeLayout.LayoutParams layoutParams;
    layoutParams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    final ImageView view = new ImageView(getApplicationContext());
    view.setPadding(10, 10, 10, 10);
    view.setImageResource(shstickerBaseAdaptor.shstickerImage[arg2]);
    view.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            windowwidth = getWindowManager().getDefaultDisplay().getWidth();
            windowheight = getWindowManager().getDefaultDisplay().getHeight();
            android.widget.RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) view.getLayoutParams();

            switch (event.getActionMasked()) {
                case MotionEvent.ACTION_DOWN:
                    Toast.makeText(ImageEditingClass.this, "hii rma jee", Toast.LENGTH_SHORT).show();
                    break;
                case MotionEvent.ACTION_MOVE:

                    RelativeLayout.LayoutParams mParams = (RelativeLayout.LayoutParams) view.getLayoutParams();
                    int x_cord = (int) event.getRawX();
                    int y_cord = (int) event.getRawY();
                    if (x_cord > windowwidth) {
                        x_cord = windowwidth;
                    }
                    if (y_cord > windowheight) {
                        y_cord = windowheight;
                    }

                    layoutParams.leftMargin = x_cord - 15;
                    layoutParams.topMargin = y_cord -100;
                    layoutParams.rightMargin = x_cord - 50;
                    layoutParams.bottomMargin = x_cord - 50;
                    view.setLayoutParams(layoutParams);
                    break;
                default:
                    break;
            }
            return true;
        }
    });

    StickerRelativeLayout.addView(view, layoutParams);
    Toast.makeText(ImageEditingClass.this, "you click" + arg2, Toast.LENGTH_SHORT).show();
} 
```

# c# - 单击按钮时如何阻止日历预呈现？

> ID：12346007
> 
> 赞同：0
> 
> 时间：2012-09-10T05:54:25.420
> 
> 标签：c#, c#-4.0, calendar, prerender

我创建了一个带有日历的时间表。现在我正在使用事件日历预渲染。但该事件在每次点击时都会运行。当我单击按钮时，我想阻止此事件触发。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:56:38.327

您可以尝试使用此代码

```
If( ! IsPostBack)
{
  //Execute Your code
} 
```

当你点击按钮 => 他不经过`( ! IsPostBack)`

# javafx - 在 JavaFX TextArea 中突出显示字符串

> ID：12346009
> 
> 赞同：2
> 
> 时间：2012-09-10T05:54:44.353
> 
> 标签：javafx, javafx-2

> **可能重复：**
> [突出显示 JavaFX TextArea 中的字符串](https://stackoverflow.com/questions/9128535/highlighting-strings-in-javafx-textarea)

如何突出显示文本区域中的文本？例如，在 ms-word 中，如果我们在 find 选项中写入文本，相同的文本将在文本区域中突出显示，就像我想在 javafx 中那样做，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:23:28.250

不幸的是，还不支持富文本（fx 2.2）。

您可以尝试下一个解决方法：

1.  使用富文本编辑器
2.  使用 Web 视图
3.  在 Canvas 上绘制多个文本
4.  只需将不同格式的文本/标签放在 HBox 或 TilePane 中。
5.  在 TextArea 上创建一个透明窗格并绘制一个不透明的高光，但这可能很困难，因为找出确切的单词坐标很复杂。

# c# - WCF 安全性和客户端错误

> ID：12346015
> 
> 赞同：0
> 
> 时间：2012-09-10T05:55:13.123
> 
> 标签：c#, wcf, security

我创建了一个启用了消息安全模式的 wcf 服务这是我的服务

```
 [ServiceContract]
    public interface IMessagingServices
    {
        [OperationContract]
        string SendMessage(string from, string to, string message);

        [OperationContract]
        List<Message> GetMessages(string from, string to);

        [OperationContract]
        int DeleteMessages(int[] idList);
    }
} 
```

这就是它的配置

```
<bindings>
      <wsHttpBinding>
        <binding name="wsBinding1">
          <security mode="Message">
            <message clientCredentialType="UserName"/>
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>

<services>

  <service name="MessagingServices" behaviorConfiguration="SecureServiceBehavior" >
    <endpoint address="" binding="wsHttpBinding" contract="IMessagingServices" bindingConfiguration="wsBinding1" />
    <!--<endpoint address="mex" binding="mexHttpBinding" contract="IMetaDataExchange"/>-->
  </service>

</services>

<behaviors>

  <endpointBehaviors>
    <behavior name="httpBehavior">
      <webHttp/>
    </behavior>
  </endpointBehaviors>

  <serviceBehaviors>

    <behavior name="SecureServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceCredentials>
        <serviceCertificate findValue="KServic.local" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="AuthenticationHandler, mynamespace" />
      </serviceCredentials>
    </behavior>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

一切似乎都很好，我可以在 VS 2010 的添加服务引用中添加服务，并且代理已连续创建，但在客户端尝试调用服务操作时出现错误，这是客户端代码

```
ServiceReference1.MessagingServicesClient mscClient = new MessagingServicesClient();

           // mscClient.Open();

            mscClient.ClientCredentials.UserName.UserName = "test";
            mscClient.ClientCredentials.UserName.Password = "test";
            mscClient.ClientCredentials.ClientCertificate.SetCertificate(StoreLocation.LocalMachine, StoreName.My, X509FindType.FindByIssuerName, "KService.local");

             // error is here
            var msg = mscClient.SendMessage("rnd.test", "rnd.test", "Hello brother!");

            mscClient.Close(); 
```

这是错误

***传出消息的身份检查失败。预期的身份是'身份（[http://schemas.xmlsoap.org/ws/2005/05/identity/right/possessproperty：http://schemas.xmlsoap.org/ws/2005/05/identity/claims/thumbprint](http://schemas.xmlsoap.org/ws/2005/05/identity/claims/thumbprint) )' 用于 'http://192.168.100.24:16027/MessagingServices.svc' 目标端点。***

这里有什么问题？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:56:29.423

使用消息安全时，您应该在客户端设置*端点标识。*
您提供的代码设置*客户端凭据*，而不是端点身份。

如果您想通过 .config 文件或类设置身份，请参阅WCF 配置架构中[`<identity>`](http://msdn.microsoft.com/en-us/library/ms731721)的元素，如果您想在代码中设置身份：[`<certificateReference>`](http://msdn.microsoft.com/en-us/library/ms731383)[`X509CertificateEndpointIdentity`](http://msdn.microsoft.com/en-us/library/system.servicemodel.x509certificateendpointidentity)

```
var certificate = ...; // load X509Certificate2 instance from the X509Store
var address = new EndpointAddress(uri, new X509CertificateEndpointIdentity(certificate)); 
```

请注意，该服务证书必须在客户端使用之前进行验证。有关详细信息，请参阅[`<authentication> of <serviceCertificate>`](http://msdn.microsoft.com/en-us/library/aa347703)元素页面。

# objective-c - 没有 NSScrollView 的 NSTableView

> ID：12346021
> 
> 赞同：4
> 
> 时间：2012-09-10T05:56:14.810
> 
> 标签：objective-c, macos, nstableview, nsscrollview

我正在考虑制作不可滚动的nstableview。

是否可以有一个没有滚动视图的表格视图，或者可能从滚动视图中提取表格视图？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T17:00:17.723

我不知道这是否是一个好习惯（我在谷歌上搜索 - 这就是我发现你的问题的方式）（**编辑：**为什么不这样？），但可以在没有 NSScrollView 的情况下获得 NSTableView：拖动出一个“自定义视图”并将其身份设置为`NSTableView`. 你在这！唯一的问题是你没有从 IB 那里得到任何关于 tableview 的视觉反馈。但是您仍然可以在 IB 中设置网点（委托、数据源等）。恐怕您必须从代码中设置 UI 选项（例如“绘制背景”等）（至少如果您使用我的“技巧”，它们不会出现）。

你甚至可以在没有 IB 的情况下做到这一点（我在 SO 上找到了这段代码，我没有测试它）：

```
MyDataSource *dataSource = [[MyDataSource alloc] init];
NSTableColumn *column = [[NSTableColumn alloc] initWithIdentifier:@"onlyColumn"];
NSTableView *table = [[NSTableView alloc] initWithFrame: frameWhereTableViewShouldGo];
[table setDataSource:dataSource];
[table addTableColumn:column];
[theViewYouWantATableViewIn addSubview:table]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T07:57:55.110

至少你可以实现你的 NSScrollView 子类并重新实现它的`scrollWheel:`方法。

```
@interface MyScrollView : NSScrollView

@property (nonatomic) BOOL scrollingEnabled;

@end

@implementation

- (void)scrollWheel:(NSEvent *)event
{
  if (self.scrollingEnabled)
    [super scrollWheel:event];
}

@end 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-10T05:58:07.383

你是这个意思吗？

```
self.tableView.scrollEnabled=NO; 
```

# c# - c#中的C++ dll

> ID：12346026
> 
> 赞同：0
> 
> 时间：2012-09-10T05:56:33.900
> 
> 标签：c#, c++, dll

我有如下 C++ DLL

```
#include "stdafx.h"

extern "C" __declspec(dllexport)double Add(double a, double b);

extern double Add(double a, double b) 
{ 
    return a + b; 
} 
```

n 这里我试图将此 DLL 与我的 C# 应用程序链接

```
using System.Text;

using System.Runtime.InteropServices; 

namespace test
{

    class Program

    {

        [DllImport("DLL.dll", CallingConvention = CallingConvention.Cdecl)]

        public static extern double Add(double a, double b);  

        static void Main(string[] args)

        {

            Console.WriteLine(Add(1.0, 3.0)); // error here

            Console.ReadLine(); 

        }
    }
} 
```

米得到错误：

> “无法加载 DLL 'DLL.dll'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）”

请帮帮我...如何将 c++ dll 与 c# 链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:30:35.913

调用约定确定函数参数在函数调用之前如何放置在堆栈上，以及函数返回时如何删除它们（调用者与被调用者）。您可以在大约 100 万个 StackOverflow 问题中找到更多相关信息，或者转到[此处](http://en.wikipedia.org/wiki/Calling_convention)阅读一些内容。

关于将 DLL 放置在您正在编写的 C#（又名 .NET）应用程序的范围内，恐怕我无法对此发表评论，除非说通用 DLL 必须在当前的 lib-search 路径（Windows 中的 PATH）中目录，或内核的主目录（通常是 c:\windows\system32。不要将文件复制到 system32，顺便说一句。只需将您的应用程序设置为“从”您的 DLL 所在的目录“运行”就可以了。*有*例外到这个，以及可以从根本上改变这个的配置设置，但如果我是你，我现在会坚持简单。复杂总是可以稍后出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:54:32.067

您收到此错误是因为`DLL.dll`不在您的调试/发布文件夹中，

据我所知，Visual Studio 不知道如何手动将这些文件复制到您的输出文件夹中。

将 dll 文件添加到您的 C# 解决方案中

然后`files properties`设置`build action`为`content` 并设置`copy to output directory`为`copy if newer`这将自动复制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:47:44.067

您要么需要将 dll 放置在与 C# exe 相同的位置，要么将 dll 打包到 exe 中。第一个选项很简单。对于第二个选项，请查看[在 Visual C# 2010 中将 DLL 嵌入到 .exe 中](https://stackoverflow.com/questions/6920920/embedding-dlls-into-exe-in-in-visual-c-sharp-2010)

# r - SQL查询列表内的数据框

> ID：12346027
> 
> 赞同：4
> 
> 时间：2012-09-10T05:56:36.503
> 
> 标签：r, list, dataframe, data.table, sqldf

给定数据框

```
df1 <- data.frame(CustomerId=c(1:6),Product=c(rep("Toaster",3),rep("Radio",3)))
df2 <- data.frame(CustomerId=c(2,4,6),State=c(rep("Alabama",2),rep("Ohio",1))) 
```

存储在列表中

```
dflist <- c(df1,df2) 
```

如何在这些数据帧上运行 sqldf 查询（连接）？

失败的尝试：

```
test <- sqldf("select a.CustomerId, a.Product, b.State from dflist[1] a
          inner join dflist[2] b on b.id = a.id")

test <- sqldf("select a.CustomerId, a.Product, b.State from dflist$df1 a
          inner join dflist$df2 b on b.CustomerId = a.CustomerId") 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T06:13:20.700

如果您将 data.frames 从列表复制到新环境，则可以使用`envir`参数`sqldf`或通过命名列表的元素，并使用`with`.

注意几件事：

*   我`dflist`使用`list`not创建`c`。

注意区别

```
str(c(df1,df2))
##List of 4
## $ CustomerId: int [1:6] 1 2 3 4 5 6
## $ Product   : Factor w/ 2 levels "Radio","Toaster": 2 2 2 1 1 1
## $ CustomerId: num [1:3] 2 4 6
## $ State     : Factor w/ 2 levels "Alabama","Ohio": 1 1 2

str(list(df1,df2))
##List of 2
## $ :'data.frame': 6 obs. of  2 variables:
##  ..$ CustomerId: int [1:6] 1 2 3 4 5 6
##  ..$ Product   : Factor w/ 2 levels "Radio","Toaster": 2 2 2 1 1 1
## $ :'data.frame': 3 obs. of  2 variables:
##  ..$ CustomerId: num [1:3] 2 4 6
##  ..$ State     : Factor w/ 2 levels "Alabama","Ohio": 1 1 2 
```

*   我已经调整了 sql 查询以反映 data.frames 中的名称（根据您的第二种方法）

# 命名数据

```
dflist <- list(df1,df2)
names(dflist) <- c('df1','df2') 
```

## 创造一个新的工作环境

```
# create a new environment

e <- new.env()
# assign the elements of dflist to this new environment
for(.x in names(dflist)){
  assign(value = dflist[[.x]], x=.x, envir = e)
}

# this could also be done using mapply / lapply
# eg
# invisible(mapply(assign, value = dflist, x = names(dflist), MoreArgs =list(envir = e)))
# run the sql query
sqldf("select a.CustomerId, a.Product, b.State from df1 a
          inner join df2 b on b.CustomerId = a.CustomerId", envir = e)

##  CustomerId Product   State
## 1          2 Toaster Alabama
## 2          4   Radio Alabama
## 3          6   Radio    Ohio 
```

# 使用更简单的方法`with`

您可以简单地使用`with`which 在本地进行评估（重要的是 dflist 是此处的命名列表）

```
# this is far simpler!!
with(dflist,sqldf("select a.CustomerId, a.Product, b.State from df1 a
           inner join df2 b on b.CustomerId = a.CustomerId")) 
```

# 另一种简单的方法使用`proto`

*   感谢@G.Grothendieck（见评论

这使用`proto`加载的包`sqldf`

```
dflist <- list(a = df1, b = df2)
sqldf( "select a.CustomerId, a.Product, b.State from df1 a 
         inner join df2 b on b.CustomerId = a.CustomerId", 
         envir = as.proto(dflist)) 
```

# 使用数据表

或者您可以使用`data.table`which give`sql-like`方法（参见[FAQ 2.16](http://datatable.r-forge.r-project.org/datatable-faq.pdf)）

```
library(data.table)
dflist <- list(data.table(df1),data.table(df2))
names(dflist) <- c('df1','df2')
invisible(lapply(dflist, setkeyv, 'CustomerId'))
with(dflist, df1[df2])
##    CustomerId Product   State
## 1:          2 Toaster Alabama
## 2:          4   Radio Alabama
## 3:          6   Radio    Ohio 
```

# ios - 将对象从一个 CCLayer 拖放到另一个

> ID：12346032
> 
> 赞同：2
> 
> 时间：2012-09-10T05:57:02.033
> 
> 标签：ios, cocos2d-iphone, cocos2d-x

我的`CCScene`. `MainLayer`其中包含`GameLayer`和`HUDLayer`。这就是它现在的样子：

```
[ z-Order        ] | [ Layer ]
==============================
  3 ( Top Most )   | HUDLayer
  2 ( Middle )     | GameLayer
  1 ( Bottom )     | MainLayer 
```

我在我的which 调用的方法上添加了触摸侦听器（`ccTouchBegan`、`ccTouchMoved`和`ccTouchEnded`），该方法返回该层中的触摸对象。`MainLayer``GameLayer``getTouchedObject( CCPoint p_Loc )`

我现在能够成功地“触摸” `MainLayer`. 现在，我要做的是将触摸的对象拖动到`HUDLayer`. 当我只使用一层时，我能够毫无问题地拖放不同的对象，但是需要实现`CCLayer`s 所以我将主层分为三个不同的层。

答案不需要是 cocos2d-x。我了解一点 Obj-C 并且可以将 Obj-C 翻译成 C++，所以欢迎 cocos2d 的答案。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T06:39:42.540

最简单的方法可能是：

1.  `CCLayer`在最上面添加一个新的叫`HoverLayer`什么。这是为了模块化。
2.  只要在任何图层上触摸精灵，就将其从该图层中删除，并将其添加为`HoverLayer`同一位置的子对象。用户不会“看到”任何改变。
3.  在触摸时，拖动精灵后，检测精灵是否在其中`HUDLayer`。
4.  从 中删除精灵`HoverLayer`并将其添加到适当的图层。

笔记：

*   您可以使用 the`HUDLayer`而不是`HoverLayer`，但您的课程会很混乱。
*   当然，如果你在`GameLayer`拖动的同时保持触摸的精灵，它会`HUDLayer`在某个点结束，所以将精灵移动到顶层是必须的。
*   实现给定解决方案的代码很简单。没什么特别的，真的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T06:57:39.993

我将在这里提供一个实现：

```
CCSprite* tmpSprite = getTouchedObject();
tmpSprite->retain();
tmpSprite->removeFromParentAndCleanup(false);
//do something here to get a pointer to you HUDLayer
//for example myHud = GameLayer->getChildByTag(HUD_TAG);
myHud->addChild(tmpSprite);
tmpSprite->release(); 
```

# python - 南：未知命令“迁移”

> ID：12346033
> 
> 赞同：10
> 
> 时间：2012-09-10T05:57:06.230
> 
> 标签：python, django, migration, pip, django-south

我变得无情

```
$ python manage.py migrate
Unknown command: 'migrate'
Type 'manage.py help' for usage. 
```

我将代码从 github 拉到一台新计算机上。此代码经过测试，正在其他计算机上运行。整个代码运行良好，除了我无法运行迁移！

安装我的虚拟环境并运行`pip install -r requirements.txt`. 它安装了所有东西，包括南方。我可以通过运行检查

```
$ python manage.py shell
>>> import south
>>> south.__version__
'0.7.3' 
```

但是，当我运行 时`manage.py help`，`migrate`并`schemamigration`没有列出命令。

我仔细检查了我的`settings.py`文件是否在下面列出了“南” `INSTALLED_APPS`（拉后我没有更改此文件）。

我试过`pip uninstall south`然后`pip install -r requirements.txt`再次运行，但我仍然得到同样的错误。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-05T03:57:28.137

**这主要是由于我们都通过 pip 安装了最后一个稳定版本（1.6）时遵循 1.7（DEV 版本）教程造成的。**

按照[1.6 教程](https://docs.djangoproject.com/en/1.6/intro/tutorial01/)或按照说明安装 1.7 开发版 Django。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-10T09:03:15.387

对于 Django 管理命令来说，成功导入包是不够的。Python 可以很容易地从一个压缩的鸡蛋中导入一个包，但 Django 需要一个普通的未压缩文件。

最初简化问题的建议：

1.  管理命令必须作为文件存在于普通目录中`path..to..south/management/commands`（非压缩文件）。
2.  尝试手动查找和删除 south 的旧安装。一个常见的问题是，某个软件包的一个版本已通过 easy_install（压缩）或“python setup.py install”手动安装，但 pip 没有卸载它并第二次安装它。
3.  在 python 路径中仅使用绝对目录。如果可能，请不要在环境中或通过自定义的 manage 或 settings.py 更改安装程序和运行 Django 之间的 python 路径。一些 manage.py 或 settings.py 使用的 python 路径与包安装程序使用的路径不同，例如添加了“.”。或“..”在其他目录之前。您的项目中或项目中不应有其他`south`目录。`.``..`

建议 1 是 Django 的绝对要求。即使我以某种方式使用多个版本来使用多个版本的 Python、Django 等测试我的应用程序，另外两个也很有帮助。

主要需求调查示例：

```
$ python manage.py shell
>>> import os
>>> import south.management.commands.migrate
>>> assert os.path.isfile(south.management.commands.migrate.__file__) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-25T18:37:51.787

我通过访问[http://south.readthedocs.org/en/latest/installation.html](http://south.readthedocs.org/en/latest/installation.html)并使用 easy_install south 解决了这个问题。然后我在我的 INSTALLED_APPS 中添加了“南”，它起作用了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-02T15:11:46.773

我得到了同样的错误，但出于不同的原因。我做了：

```
$ python manage.py migrate my_app --settings=settings_dev.py 
```

但是使用设置参数，您应该传递*模块*的名称而不是*文件*的名称。所以应该是

```
$ python manage.py migrate my_app --settings=settings_dev 
```

*当您像这样运行validate*命令时，您会收到一条不错的错误消息，但是当您运行 south 命令时，它会说该命令是未知的：/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-09T10:45:19.693

就我而言。south 已经安装，但后来要求是其他库的原因：

```
pip install -r requirements.txt 
```

我不知道为什么 manage.py 没有抱怨他们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-06T12:16:52.330

我有这个，但结果是我的错误，`settings.py`当我尝试时出现了`runserver`。修复了错误，命令又回来了。基本上没有任何应用程序的管理命令在那里，所以我的`INSTALLED_APPS`必须已经被覆盖或从一开始就没有被写入。就我而言，设置文件的导入失败了。

# java - 将证书密钥库迁移到另一个 JVM

> ID：12346042
> 
> 赞同：1
> 
> 时间：2012-09-10T05:57:53.337
> 
> 标签：java, security, jsse

我正在开发一个需要 JRE 并创建证书的安装程序。我正在开发捆绑新 JRE 的下一个版本的安装程序。我需要将在旧 JRE 的[cacerts](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/keytool.html#cacerts)密钥库中导入的所有证书移动到新 JRE。如果我将旧 jre/lib/security/ 目录下的“cacerts”文件复制到新的 JRE，cacerts 中的现有证书是否有效，我将进行安装。

我看了看问题：[“是否可以将 cacerts 的所有内容导入 jssecacerts 文件？”](https://stackoverflow.com/questions/7492220/is-it-possible-to-import-all-contents-of-cacerts-into-a-jssecacerts-file) 将证书导入我的密钥库。这是否意味着如果通过复制 cacerts 的密钥库迁移不起作用，我需要备份现有的 jre/lib/security/cacerts 并将其导入新的 JRE？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:44:46.970

你不想这样做。您不想干扰新 trustStore 中已经存在的证书，也不想从旧 trustStore 的原始内容中复制不在新 trustStore 的默认内容中的任何内容。您希望将已*添加*到旧默认 trustStore 的所有证书导入到新的默认 trustStore。因此，请在单独的位置跟踪它们，然后在新的 trustStore 上重复原始导入过程。

# html - 如何设置浏览器滚动条来滚动页面的一部分？（高于隐藏的页脚部分）就像 http://i-donline.com/

> ID：12346043
> 
> 赞同：1
> 
> 时间：2012-09-10T05:57:57.280
> 
> 标签：html, css

如何设置浏览器滚动条来滚动页面的一部分？（高于隐藏的页脚部分）就像[http://i-donline.com/](http://i-donline.com/)

[http://jsfiddle.net/hVvfn/2/](http://jsfiddle.net/hVvfn/2/)

```
.header{
position: fixed;
left: 0;
top: 0;
width: 1000px;
height: 100px;
background:  blue;
z-index: 1;
}
.contentwrap{
position: absolute;
left: 0;
top: 100px;
width: 1000px;
height: 250px;
background:  ;
}
.footer{
position: fixed;
left: 0;
top: 350px;
width: 1000px;
height: 300px;
background:  blue;
}
.row{
position: relative;
left: 0;
top: 0;
width: 800px;
height: 250px;
border: purple 1px solid;
background: gray;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:03:41.833

有一个名为 iScroll 的库。只用于这类事情。你可以去看看，我觉得会有帮助。事实上我已经用过很多次了。像魅力一样工作。链接在这里：

[**在这里滚动**](http://cubiq.org/iscroll)

# algorithm - 合并排序中的比较次数

> ID：12346054
> 
> 赞同：5
> 
> 时间：2012-09-10T05:59:19.050
> 
> 标签：algorithm, merge, complexity-theory, mergesort

我在研究合并排序主题时遇到了这个概念，即合并排序中的比较次数（在最坏的情况下，根据[维基百科](http://en.wikipedia.org/wiki/Merge_sort)）等于 (n ⌈lg n⌉ - 2 ^(⌈lg n⌉</支持> + 1); 实际上它介于 (n lg n - n + 1) 和 (n lg n + n + O(lg n)) 之间。问题是我无法弄清楚这些复杂性试图表达什么。我知道 O(nlogn) 是合并排序的复杂性，但是比较的次数？)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T06:09:27.997

# 为什么要计算比较

任何排序算法基本上都有两种操作：比较数据和移动数据。在许多情况下，比较会比搬家更昂贵。想想基于引用的类型系统中的长字符串：移动数据只会交换指针，但比较可能需要在找到第一个差异之前迭代字符串的大部分公共部分。所以从这个意义上说，比较很可能是需要关注的操作。

# 为什么要精确计数

这些数字似乎更详细：您得到一个实际数字，而不是简单地给出一些朗道符号（大哦符号）来表示复杂性。一旦您确定了基本操作是什么，例如本例中的比较，这种实际计数操作的方法就变得可行了。在比较被朗道符号隐藏的常数时，或者在检查小输入的非渐近情况时，这一点尤其重要。

# 为什么这个精确的计数公式

请注意，在整个讨论中，lg 表示以 2 为底的对数。当您对*n 个*元素进行合并排序时，您有 ⌈lg *n* ⌉ 个合并级别。假设您在每个要排序的元素上放置 ⌈lg *n* ⌉ 个硬币，并且合并需要一个硬币。这肯定足以支付所有合并的费用，因为每个元素都将包含在 ⌈lg *n* ⌉合并中，并且每次合并所进行的比较不会超过所涉及的元素数量。所以这是公式中的*n* ⌈lg *n* ⌉ 。

由于两个长度为*m*和*n*的数组的合并只需要进行*m* + *n* - 1 次比较，所以最后你仍然有硬币，每次合并都有一个。让我们暂时假设我们所有的数组长度都是 2 的幂，即你总是有*m* = *n*。那么合并的总数是*n* -1（2的幂之和）。*利用n*是 2 的幂这一事实，这也可以写为 2 ^(⌈lg *n* ⌉ </sup> - 1，然后从所有硬币的数量中减去返回硬币的数量，得到*n* ⌈lg *n* ⌉ - 2 ^(⌈lgn *_*⌉</sup> + 1 根据需要。))

如果*n*小于 1 小于 2 的幂，则存在 ⌈lg *n* ⌉合并，其中少一个元素。这包括两个单元素列表的合并，这些列表过去只取一枚硬币，现在完全消失了。所以总成本减少了 ⌈lg *n ⌉，如果**n*是 2 的幂，这正是你放在最后一个元素上的硬币数量。所以你必须在前面放置更少的硬币，但你会得到相同数量的硬币。这就是公式使用 2 ^(⌈lg *n* ⌉ </sup> 而不是*n*的原因：除非您降低到较小的 2 次方，否则该值保持不变。*如果n*之间的差异，同样的论点成立*并且二的下一个幂大于 1。*)

 *总的来说，这导致了[维基百科](http://en.wikipedia.org/wiki/Merge_sort)中给出的公式：

> *n* ⌈lg *n* ⌉ − 2 ^(⌈lg *n* ⌉ </sup> + 1)

*注意：我对上述证明非常满意。[对于那些喜欢我的公式的人，请随意分发它，但不要忘记根据许可证](http://creativecommons.org/licenses/by-sa/3.0/)的要求将其归功于我。*

# 为什么这个下限

为了证明下界公式，让我们写 ⌈lg *n* ⌉ = lg *n* + *d*其中 0 ≤ *d* < 1。现在上面的公式可以写成
*n* (lg *n* + *d* ) − 2 ^(lg *n* + *d*) + 1 = *n* lg *n* + *nd* - *n* 2 ^(*d*) + 1 = *n* lg *n* - *n* (2 ^(*d*) - *d* ) + 1 ≥ *n* lg *n* - *n* + 1
其中不等式成立，因为 2 ^(*d*) − *d* ≤ 1 for 0 ≤ *d* < 1

# 为什么这个上限

我必须承认，我很困惑为什么有人将*n* lg *n* + *n* + O(lg *n* ) 命名为上限。即使您想避免使用 floor 函数，上面的计算也建议将*n* lg *n* − 0.9 *n* + 1 作为精确公式的更严格的上限。2 ^(*d*) - *d*有其最小值 (ln(ln(2)) + 1)/ln(2) ≈ 0.914，因为*d* = -ln(ln(2))/ln(2) ≈ 0.529。

我只能猜测引用的公式出现在某些出版物中，或者作为该算法的相当宽松的界限，或者作为与该算法进行比较的其他算法的确切比较次数。

* * *

# （两个不同的计数）

*此问题已通过以下评论解决；一个公式最初被错误地引用。*

> 等于 (n lg n - n + 1); 实际上它在 (n lg n - n + 1) 和 (n lg n + n + O(lg n)) 之间

如果第一部分为真，那么第二部分也同样为真，但明确说明上限似乎毫无意义。我自己没有看细节，但是这两个陈述像这样放在一起看起来很奇怪。要么第一个真的是真的，在这种情况下我会省略第二个，因为它只会令人困惑，或者第二个是真的，在这种情况下第一个是错误的，应该省略。*

# c - 将 32 位值分配给无符号 uint8_t 数组

> ID：12346057
> 
> 赞同：0
> 
> 时间：2012-09-10T05:59:30.983
> 
> 标签：c, pointers, data-structures

我有一个如下所示的结构。

```
typedef struct
{
    attribute_code_t field_id;
    uint8_t instance_num;
    uint8_t length;
    uint8_t data[32];
    uint32_t crc_value;
}table_entry_t; 
```

我想按如下方式填充结构。

```
entry->field_id = 54;;
entry->instance_num = 0;
entry->length = 4;
entry->data = 0xfdfcfefa; 
```

它给了我错误，错误：分配中的类型不兼容。在最后一行。我想知道进行上述分配的最佳方法是什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T06:04:26.690

以下代码将数据复制到 32 字节的前 4 个字节。

```
tmpdata = 0xfdfcfefa;
memcpy(entry->data, &tmpdata, sizeof(uint8_t) *4); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T06:13:45.393

你有一个 32 字节的数组，你试图给它们分配一个 4 字节的值。你想要什么结果？如果它正在填充前 4 个字节，请分别分配它们。或者使用常量数组：

```
static const uint8_t __initializer[] = { 0xfd, 0xfc, 0xfe, 0xfa };
entry->length = sizeof(__initializer);
memcpy( entry->data, __initializer, sizeof(__initializer) ); 
```

由于不同平台上的字节顺序不同，强烈不建议将 int 复制到数组中。

# android - Android httpUrlConnection 连接到服务器但不是互联网

> ID：12346062
> 
> 赞同：0
> 
> 时间：2012-09-10T05:59:57.670
> 
> 标签：android, networking, emulation, httpurlconnection

我正在开发一个使用 HttpUrlConnection 的应用程序，它与服务器完美连接，但是从它获取数据时显示连接超时 IOException。

互联网和网络权限已在 android.manifest 中设置；android模拟器中没有显示条（这说明了什么）。

在 developer.android.com 上阅读：模拟器的功能限制包括： - 不支持确定网络连接状态 - 以及其他一些......

任何帮助将不胜感激。而且我没有实际的设备来测试它。

收到的服务器信息会打印在 logcat 中。

谢谢...

这是代码：

```
URL url = new URL(urlString);
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
try {
    Log.i(INFO_TAG, "Received server:" + conn.toString());
    conn.setInstanceFollowRedirects(true);
    conn.setRequestMethod("GET");
    conn.setRequestProperty("Content-length", "0");
    conn.setUseCaches(false);
    conn.setAllowUserInteraction(false);
    conn.setConnectTimeout(25000 /* milliseconds */);
    conn.setReadTimeout(15000/* 10000 *//* milliseconds */);
    // conn.setDoInput(true);
    // Starts the query
    conn.connect();
    status = conn.getResponseCode();
    Log.d(DEBUG_TAG, "Status recevied is: " + conn.getResponseCode());
    responseCode = status;
    if (responseCode == 200) {
        Log.i(INFO_TAG, "URL Connection OK");
        contentIs = conn.getInputStream();
        BufferedReader reader = new BufferedReader(
                new InputStreamReader(contentIs));
        String line;
        while ((line = reader.readLine()) != null) {
            builder.append(line);
            Log.i(INFO_TAG, "Data Read is: " + line);
        }
    } else {
        Log.d(DEBUG_TAG, "Could not read data from web server");
        Log.e(ConnectAndGetData.class.toString(),
            "Failed to download content");
    }
}// end of try
catch (Exception ex) {
    // This is currently being printout
    Log.d(DEBUG_TAG, "Received an exception" + ex.toString(), ex);
    ex.printStackTrace();
    throw new IOException("Error Connecting" + ex.toString());// "Error connecting");
} finally {
    if (contentIs != null) {
        contentIs.close();
        conn.disconnect();
    }
} 
```

还有一件事，它抛出了一个连接超时异常，它不会在这一行打印信息： Log.d(DEBUG_TAG, "Status recevied is: " + conn.getResponseCode());

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T02:07:38.353

问题不是上面的代码，而是服务器代码（罪魁祸首）。现在实现了一个 Web 服务，上面的代码工作正常。

谢谢大家的评论...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:31:21.340

你需要写

`conn.setDoInput( true );`在这条线之后

```
conn.setConnectTimeout(25000 /* milliseconds */);
conn.setReadTimeout(15000/*10000*/ /* milliseconds */); 
```

它设置指示此 URLConnection 是否允许输入的标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:33:04.727

模拟器无法从服务器接收任何响应。我认为你的网络连接有问题。检查您的代理设置。

# javascript - 停止表单提交无法正常工作

> ID：12346064
> 
> 赞同：0
> 
> 时间：2012-09-10T06:00:01.187
> 
> 标签：javascript, jquery, forms

> **可能重复：**
> [提交表单不会在 jquery ajax 调用中停止](https://stackoverflow.com/questions/804946/submit-form-does-not-stop-in-jquery-ajax-call)

我有一个表格：

```
<form id="orderForm" onsubmit="return prepareOrder(this);" action='@ConfigurationManager.AppSettings["EpayLogonUrl"]' method="POST"> 
```

和`prepareOrder`功能：

```
function prepareOrder(form) {
    $('.wizard_next_step').attr('disabled', 'disabled');
    $('.wizard_next_step').addClass('disabled');
    $('.wizard_prev_step').attr('disabled', 'disabled');
    $('.wizard_prev_step').addClass('disabled');       

    $.ajax({
        type: 'POST',
        url: '/Pay/CreateOrder',
        success: function (response) {
            if (response.IsSuccess) {
                alert('2');
                $("input[type=hidden][name=Signed_Order_B64]").val(response.Message);
            } else {
                alert('1');
                toastr.options.timeOut = 10000;
                toastr.info(response.Message);
                return false;
            }
        },
        error: function () {
            return false;
        },
        async: false
    });
} 
```

该提交中的问题在`IsSuccess`等于 false 时不会停止。为了测试，我正确插入警报和警报显示（1），但无论如何都要提交表单。哪里有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:02:57.090

您的 ajax 调用返回 false，但您的`prepareOrder`方法不是。尝试在 ajax 调用之外返回 false ：

```
function prepareOrder(form) {
    $('.wizard_next_step').attr('disabled', 'disabled');
    $('.wizard_next_step').addClass('disabled');
    $('.wizard_prev_step').attr('disabled', 'disabled');
    $('.wizard_prev_step').addClass('disabled');       

    $.ajax({
        type: 'POST',
        url: '/Pay/CreateOrder',
        success: function (response) {
            if (response.IsSuccess) {
                alert('2');
                $("input[type=hidden][name=Signed_Order_B64]").val(response.Message);
            } else {
                alert('1');
                toastr.options.timeOut = 10000;
                toastr.info(response.Message);
                return false;
            }
        },
        error: function () {
            return false;
        },
        async: false
    });

    return false;    
} 
```

# java - Java“迭代器”关键字

> ID：12346070
> 
> 赞同：-1
> 
> 时间：2012-09-10T06:00:40.423
> 
> 标签：java, iterator, queue

我在考试中被要求用 Java 编写一个关于队列的算法。我用 an`Iterator`来提取队列的元素。（元素由 chars : `'R'`or `'W'`or `'B'`ONLY 组成）。该问题禁止创建或破坏输入队列的任何字符。我只是想问一下使用`Iterator`提取元素是否“创建”字符？我的算法是：

```
Q=Queue
Iterator dummy=Q.elements();
while (//some condition){
   if (dummy.data=='R')
   ...
   ... 
```

这只是算法。我想问我是否“创造”了元素，因为我因此获得`0`了分数。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:04:27.223

队列上没有像正确`elements()`方法那样的方法；`element()``Retrieves but does not remove element from the queue``queue.iterator()`

无论如何，从逻辑上讲，您都是正确的，但您不应该得到`0`

`new for loop`您也可以使用

```
 for(Object object : queue) {
        //do something
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:08:01.153

A`char`是一种值类型，因此所有分配都会导致“复制”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:08:22.853

不，迭代器不会创建任何东西。Java 中的字符是对象，不可变，并通过引用从数组中传递出来（为了降低内存使用量，它们在幕后被重用）：

```
 public static Character valueOf(char c) {
    if(c <= 127) { // must cache
        return CharacterCache.cache[(int)c];
    }
        return new Character(c);
    } 
```

# mysql - 更改名称中包含空格的表

> ID：12346072
> 
> 赞同：1
> 
> 时间：2012-09-10T06:00:45.710
> 
> 标签：mysql, sql

我想添加 3 列。有两件事我不知道，一个是如何为每列指定一个默认值，然后是如何更改有空格的表：

```
 ALTER TABLE  app name and url
ADD COLUMN price VARCHAR(200)
ADD COLUMN type_of_membership VARCHAR(200)
ADD COLUMN special_deal VARCHAR(200) 
```

我收到此错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'name and url ADD COLUMN price VARCHAR(200) ADD COLUMN type_of_membership VARCH' 附近使用正确的语法

我想这是因为我有一个带空格的表名。

这是您插入默认值的方式：

```
 ALTER TABLE  app name and url
ADD COLUMN price VARCHAR(200) DEFAULT 'None'
ADD COLUMN type_of_membership VARCHAR(200) DEFAULT 'None'
ADD COLUMN special_deal VARCHAR(200) DEFAULT 'None' 
```

**更新** 这是我执行的：

```
ALTER TABLE  `app name and url`
ADD COLUMN price VARCHAR(200) DEFAULT 'None',
ADD COLUMN type_of_membership VARCHAR(200) DEFAULT 'None',
ADD COLUMN special_deal VARCHAR(200) DEFAULT 'None'; 
```

这就是我得到的：

```
 'mydb.app name and url' is not BASE TABLE 
```

错误是因为它是一个视图..我现在明白了。我将不得不修改视图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:01:29.083

在 Mysql 中，您需要使用`backtick`(*重音*)对其进行转义

```
ALTER TABLE  `app name and url`
ADD COLUMN price VARCHAR(200)
ADD COLUMN type_of_membership VARCHAR(200)
ADD COLUMN special_deal VARCHAR(200) 
```

[MySQL中重音（AKA反引号）引用字符的含义是什么？](https://stackoverflow.com/questions/7857278/what-is-the-meaning-of-grave-accent-aka-backtick-quoted-characters-in-mysql)

**PS：**下次在你的表和列名中只使用字母数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T06:02:22.567

利用````

您必须将表名替换为

```
 ALTER TABLE  `app name and url` 
```

# [SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/be7a0/1)

# qt - 从文件 Qt 加载所有图像

> ID：12346073
> 
> 赞同：0
> 
> 时间：2012-09-10T06:00:49.340
> 
> 标签：qt

我想将文本文件中的所有图像加载到 Qt 中的小部件。

我是这样写代码的，

```
void project::showfile()
{
    QString fileName = "/home/main/Desktop/image_file.txt";
    show_image(fileName); 
}

void project :: show_image(const QString &fileName)
{
    Widget *wid1=new Widget(ui->scrollArea_2);

    QFile file(fileName);
    qDebug()<<"test";

    if (!file.open(QIODevice::ReadWrite | QIODevice::Text))
    {
        qDebug() << "Error opening file";
    }

    QString line;
    QTextStream InputDataFile(&file);
    while(!InputDataFile.atEnd())
    {
        line = InputDataFile.readLine();

        QPixmap pixmap(line);
        wid1->setPixmap(line);

        wid1->resize(pixmap.size());
        wid1->show();
    }
    file.close();
} 
```

对于您的示例，我的`image_file.txt`包含

```
/home/keerthana/Desktop/images/2_222_31.jpg 
```

当我使用此代码时，我只能加载文件中的最后一个图像。我想将所有图像加载到 GUI。

谁能帮我？那我怎么能加载所有东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:22:33.397

代码不完整，但代码似乎建议您在同一个小部件上重复加载图像。只显示最后一个似乎是正确的。您加载的每个像素图似乎都替换了以前的...

# api - 我现在不能在 Foursquare 中看到“其他”列表吗？

> ID：12346078
> 
> 赞同：1
> 
> 时间：2012-09-10T06:01:21.150
> 
> 标签：api, foursquare

我正在编写一个程序来寻找 Foursquare 的“现在”。正如我所附，场地中有 2 个人，但我看不到使用 API 的人，API 只返回一个空列表。

我不能看到成员，因为他们属于“其他”类型吗？难道没有办法解决问题吗？

```
hereNow: {count: 2,
...,
groups: [{type: "others",
...
count: 2,
items: [ ]
}
]
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T21:17:35.813

正如 akdotcom 提到的，文档为您提供了有关端点工作方式的最新信息：[https ://developer.foursquare.com/docs/venues/herenow](https://developer.foursquare.com/docs/venues/herenow)

此端点的工作方式发生了变化。

过去，它会返回当前在场地登记的每个人（3 小时内）。

它已被更改，因此如果您没有在某个地点签到，您只能看到在那里签到的您的朋友（以及根据当前文档的朋友的朋友），您不能看到非朋友。

一旦您签入，您将能够看到所有人，但有一个例外，虽然我相信仍然会反映在计数中，但现在不会显示选择不出现在此处的人。

我相信他们的解释是这更像是现实世界。如果你不在那里，你就看不到谁在那里。

只有场地管理员可以看到每个人都签到，而无需自己签到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T19:09:34.637

请参阅端点文档 ( [https://developer.foursquare.com/docs/venues/herenow](https://developer.foursquare.com/docs/venues/herenow) )，了解针对不同类型的请求返回的“herenow”信息的概述。您可能正在发出“无用户”请求，它只返回计数，没有用户信息。

# oracle - Oracle Exadata 错误：未找到 CellCli 错误

> ID：12346082
> 
> 赞同：1
> 
> 时间：2012-09-10T06:01:40.320
> 
> 标签：oracle, oracle11g, oracle10g, exadata

我正在尝试在我的一台 Exadata 单元服务器上运行 cellcli。当我登录到服务器时，我能够按预期看到所有文件。（如：all_group all_nodelist_group cell_group all_ib_group 等）当我发出启动 cellcli 的命令时，它给了我找不到命令的错误：

```
# cellcli
-bash: cellcli: command not found
# which cellcli
which: no cellcli in (/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin) 
```

知道 exadata 上的 cellclie 可执行文件的位置是什么吗？我是否需要导出任何其他路径才能获取此命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:48:49.080

> cellcli 位于 /opt/oracle/cell/cellsrv/bin 中。它应该放在 /etc/profile.d/cell_env.sh 的路径中

（来自[马克菲尔丁](http://twitter.com/pythianfielding)）

# c# - 文件上传时超出最大请求长度错误

> ID：12346086
> 
> 赞同：0
> 
> 时间：2012-09-10T06:01:55.747
> 
> 标签：c#, html, http, file-upload, iis-7

如何**使用 html 上传按钮上传 5mb pdf 文件**？当我尝试上传 5mb 文件时出现**最大请求长度超出错误**？。出现此问题是因为 Machine.config 文件部分中 maxRequestLength 参数的默认值为**4096 （4 兆字节）**。所以我尝试更改 webconfig 文件，

```
<configuration>
    <system.web>
         <httpRuntime maxRequestLength="102400" executionTimeout="1200" />
    </system.web>
</configuration> 
```

如果我这样使用，我会得到一个现有的连接被远程主机错误强行关闭。**我的项目由 IIS7 托管**。所以我尝试，

```
<system.webServer>
   <security>
      <requestFiltering>
         <requestLimits maxAllowedContentLength="1048576" />
      </requestFiltering>
   </security>
 </system.webServer> 
```

这种方式也不允许上传5mb的文件？**如何通过 HTML 上传按钮上传 5 mb 文件？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:15:35.817

尝试在值的末尾添加“0” `<requestLimits maxAllowedContentLength>`。我认为它以字节为单位，这意味着您的示例将其设置为大约 1MB。

这是[有关此设置的文档](http://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:19:14.657

假设这是您自己的服务器，如果没有看到 Murtuza Kabul。尝试

```
requestLengthDiskThreshold="800000" 
```

顺便说一句，我会推荐 NeatUpload，因为我认为 HTML 上传不是很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:32:51.687

如果您在共享主机帐户上运行此程序，则您能够解决此问题的机会较小。由于资源分配有限，托管服务提供商会指定连接的超时时间，因此如果连接花费太多时间，它会关闭它。

我的建议是，您应该寻求托管服务提供商的帮助或尝试更改主机或计划。

# ruby-on-rails - 黄瓜功能挂在控制台上

> ID：12346089
> 
> 赞同：0
> 
> 时间：2012-09-10T06:02:11.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cucumber

在我的 rails 应用程序中，我有 2000 行用于黄瓜功能的代码。

现在我使用命令 rake rcov:features 一次运行所有功能来获取覆盖率报告。

我观察到，在同时运行时，它们会挂起某些功能，因此不会生成覆盖率报告。

请建议，被绞死的可能性是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:14:02.917

当代码依赖于现代化程序时，我已经看到这种情况发生了，并且它被删除了。当在 gemfile 中指定不兼容/不可构建的服务器时，我也看到了这种情况（在这种情况下，Windows 上的瘦构建损坏）。我也见过使用 selenium 的机器，而没有使用 capybara-webkit 的机器，反之亦然。基本上，大约有一百万件事情会出错，在我看来，Rails 测试总体上将受益于额外的润色和改进的交互。我想知道你是否会更容易从小处开始，而不是试图一次找出 2000 行中的确切位置，也许删除除一点点代码之外的所有代码并添加它会更容易慢慢地，直到失败。如果这在过去有效，你可以使用你的 git repo 做同样的事情。

# android-emulator - 运行 wikiitude AR 浏览器时出现无效的命令行参数错误

> ID：12346090
> 
> 赞同：1
> 
> 时间：2012-09-10T06:02:11.853
> 
> 标签：android-emulator

> [2012-09-10 11:21:35 - com.wikitude.example.SimpleARBrowserActivity] Android 启动！
> 
> [2012-09-10 11:21:35 - com.wikitude.example.SimpleARBrowserActivity] adb 运行正常。
> 
> [2012-09-10 11:21:35 - com.wikitude.example.SimpleARBrowserActivity] 执行 com.wikitude.example.SimpleARBrowserActivity 活动启动
> 
> [2012-09-10 11:21:35 - com.wikitude.example.SimpleARBrowserActivity] 自动目标模式：启动具有兼容 AVD 'new' 的新模拟器
> 
> [2012-09-10 11:21:35 - com.wikitude.example.SimpleARBrowserActivity] 使用“新”虚拟设备启动新模拟器
> 
> *[2012-09-10 11:21:36 - Emulator] 无效的命令行参数：8.8.8.8,8.8.4.4。
> 
> [2012-09-10 11:21:36 - Emulator] 提示：使用“@foo”启动名为“foo”的虚拟设备。
> 
> [2012-09-10 11:21:36 - 模拟器] 请使用 -help 获取更多信息*

我从 wikiitude 的网站下载了 wikiitude SDK。在运行维基浏览器时，我收到了这个错误。有人可以帮我吗？

# android - 在文件上传期间显示进度条

> ID：12346096
> 
> 赞同：3
> 
> 时间：2012-09-10T06:02:37.203
> 
> 标签：android, http, networking, file-upload

我有一个异步任务，应该在文件上传期间显示进度。一切正常，只是它看起来真的非常快地完成了文件上传，然后它就坐在那里 100% 等待。

我将其追溯到

```
URL url = new URL(urlServer);
connection = (HttpURLConnection) url.openConnection();

// Allow Inputs & Outputs
connection.setDoInput(true);
connection.setDoOutput(true);
connection.setUseCaches(false);

// Enable POST method
connection.setRequestMethod("POST");

connection.setRequestProperty("Connection", "Keep-Alive");
connection.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);

outputStream = new DataOutputStream(connection.getOutputStream());
outputStream.writeBytes(twoHyphens + boundary + lineEnd);
outputStream.writeBytes("Content-Disposition: form-data; name=\"Filedata\";filename=\"" + pathToOurFile + "\"" + lineEnd);
outputStream.writeBytes(lineEnd);
long totalBytesWritten = 0;
while (bytesRead > 0) {
    outputStream.write(buffer, 0, bufferSize);
    outputStream.flush();
    if (mCancel) { throw new CancelException(); }

    totalBytesWritten += bufferSize;
    if (mProgressDialog != null) { 
            mProgressDialog.setProgress(Integer.valueOf((int) (totalBytesWritten / 1024L))); 
    }

    bytesAvailable = fileInputStream.available();
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
}
outputStream.writeBytes(lineEnd);
outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

// Responses from the server (code and message)
int serverResponseCode = connection.getResponseCode(); 
```

我注意到的是，直到它获取响应代码的最后一行之前没有真正的延迟。我认为正在发生的事情是数据正在缓冲，所以看起来它已经上传了它，但实际上并没有 - 它只是缓冲了它。然后当我调用 getResponseCode() 时，它别无选择，只能完成上传以获取上传状态。有什么方法可以让它实际上传，这样我才能得到合理的进展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:10:19.263

这就是 HTTP Post 的设计方式，所以不要指望它会为您提供进度详细信息。

您可以使用市场上可用的几个文件上传器组件之一。他们在内部使用 flash 或 silverlight 或 iframe 来显示进度。

[http://dhtmlx.com/docs/products/dhtmlxVault/index.shtml](http://dhtmlx.com/docs/products/dhtmlxVault/index.shtml)

[http://www.element-it.com/multiple-file-upload/flash-uploader.aspx](http://www.element-it.com/multiple-file-upload/flash-uploader.aspx)

如果你谷歌一下，你会发现很多这样的人。

他们在内部使用原始 IO 而不是 http post 来处理多个文件和进度通知。雅虎和谷歌也使用这种技术来制作邮件附件。

如果您真的喜欢冒险，您可以重新创建轮子 - 即编写您自己的组件。

**编辑：**

请指定是否要在 Windows 桌面应用程序或 Web 应用程序中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T05:46:49.600

你可以这样做：

```
try { // open a URL connection to the Servlet
            FileInputStream fileInputStream = new FileInputStream(
                    sourceFile);
            URL url = new URL("http://10.0.2.2:9090/plugins/myplugin/upload");
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true); // Allow Inputs
            conn.setDoOutput(true); // Allow Outputs
            conn.setUseCaches(false); // Don't use a Cached Copy
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("ENCTYPE", "multipart/form-data");
            conn.setRequestProperty("Content-Type",
                    "multipart/form-data;boundary=" + boundary);
            conn.setRequestProperty("uploadedfile", filename);
            // conn.setFixedLengthStreamingMode(1024);
            // conn.setChunkedStreamingMode(1);
            dos = new DataOutputStream(conn.getOutputStream());
            dos.writeBytes(twoHyphens + boundary + lineEnd);
            dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                    + filename + "\"" + lineEnd);
            dos.writeBytes(lineEnd);
            bytesAvailable = fileInputStream.available();
            bufferSize = (int) sourceFile.length()/200;//suppose you want to write file in 200 chunks
            buffer = new byte[bufferSize];
            int sentBytes=0;
            // read file and write it into form...
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            while (bytesRead > 0) {
                dos.write(buffer, 0, bufferSize);
                // Update progress dialog
                sentBytes += bufferSize;
                publishProgress((int)(sentBytes * 100 / bytesAvailable));
                bytesAvailable = fileInputStream.available();
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }
            // send multipart form data necesssary after file data...
            dos.writeBytes(lineEnd);
            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
            // Responses from the server (code and message)
            serverResponseCode = conn.getResponseCode();
            String serverResponseMessage = conn.getResponseMessage();
            // close streams
            fileInputStream.close();
            dos.flush();
            dos.close();
        } catch (MalformedURLException ex) {
            ex.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:28:37.380

您可以尝试使用 AsyncTask ...

在 onPreExecute 方法中创建一个进度对话框并在 onPostExecute 方法中关闭对话框。

将上传方法保留在 doInBackground() 中

例子 ：

```
public class ProgressTask extends AsyncTask<String, Void, Boolean> {

    public ProgressTask(ListActivity activity) {
        this.activity = activity;
        dialog = new ProgressDialog(context);
    }

    /** progress dialog to show user that the backup is processing. */
    private ProgressDialog dialog;

    protected void onPreExecute() {
        this.dialog.setMessage("Progress start");
        this.dialog.show();
    }

        @Override
    protected void onPostExecute(final Boolean success) {
        if (dialog.isShowing()) {
            dialog.dismiss();
        }           
    }

    protected Boolean doInBackground(final String... args) { 
```

// 你的上传代码

```
 return true;
       }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T14:06:38.747

HttpURLConnection.setFixedLengthStreamingMode(...) 成功了！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T06:06:41.427

您可以按如下方式使用 Progress Dialog 类，

```
ProgressDialog progDailog = ProgressDialog.show(this,"Uploading", "Uploading File....",true,true);

new Thread ( new Runnable()
{
     public void run()
     {
      // your loading code goes here
     }
}).start();

Handler progressHandler = new Handler() 
{
     public void handleMessage(Message msg1) 
     {
         progDailog.dismiss();
     }
} 
```

# jquery - 检查 jquery cookie 数组是否存在

> ID：12346099
> 
> 赞同：0
> 
> 时间：2012-09-10T06:02:55.087
> 
> 标签：jquery, cookies

我想知道 jquery 是否可以检查 cookie 数组是否存在。

我的 cookie 名称是 'report' 并且使用 php 我像这样回显它：

```
echo '<pre>'; print_r($_COOKIE['report'][146]); echo '</pre>'; 
```

吐出这样的东西：

```
Array
(
    [15128] => 15128
    [13670] => 13670
) 
```

这是我希望让 jquery 检查上面的 cookie 数组是否存在（或不存在）的地方，这是我到目前为止所得到的，但它没有拾取 cookie 数组。

```
if ( $.cookie('report[146]') ) {
  window.location = 'http://www.myurl.com/';
} else {
  alert('Please make a selection.');
} 
```

当有人勾选复选框时，我的表单不会刷新，但它使用 jquery 添加 cookie（工作正常），但我似乎无法让 jquery 检查是否有任何 cookie。

这是将单个 cookie 添加到数组的代码：

```
if ($(this).attr('checked')) { 
  $.cookie('report[146]['+thisID+']', thisID, { expires: 7, path: '/' });
} else {
  $.cookie('report[146]['+thisID+']', thisID, { expires: -1, path: '/' });
}; 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:06:22.243

```
if($.cookie('report') == null) { 
    alert('no cookie!');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T06:41:17.780

您现在正在做的是设置名为的 cookie `report[146]['+thisID+']`（例如，如果 thisID = `135`，则 cookie 名称为`report[146][135]`）。cookie 的值不是数组，该 cookie 的值是`thisID`.

如果您希望 cookie 具有 name`report`并且它的 value 应该是索引 146 具有 value 的数组`thisID`，请执行以下操作：

```
var cookieValue = [];
cookieValue[146] = thisID; 
```

设置它：

```
$.cookie('report', cookieValue); 
```

Cookie 值现在将设置为（这就是数组序列化的方式）：

```
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,135 
```

要阅读它：

```
var cookie = $.cookie('report');
if(cookie){
  var cookieValue = cookie.split(','); //you need to do this since array is serialized as comma separated values.
  var valueAtIndex146 = cookieValue[146];
} 
```

# mysql - MySQL故障排除帮助，在单表上不能做任何事情

> ID：12346102
> 
> 赞同：10
> 
> 时间：2012-09-10T06:03:05.773
> 
> 标签：mysql

道歉，但我真的没有太多关于这个问题的信息。

我有一个 MySQL MySIAM 引擎表，其中包含大约 80K 条记录（不断增加）。今天突然没反应了。

我什至不能做一个查询（例如`SELECT * FROM table LIMIT 1`），服务器只是花时间执行，看起来永远不会停止。

我无法转储表进行备份。

但是，同一个数据库中的另一个表，同一个引擎（MySIAM）工作得很好。

我不知道从这里去哪里。不确定是死锁还是什么。

该表中的所有数据都非常重要。您指点帮助我确定问题的方向将不胜感激。例如，是否有任何命令来检查表是否因什么原因损坏等。

* * *

UPDATE::::: 我都不能使用`CHECK TABLE`，它也需要永远的执行时间。

更新 :::: 我做了研究并想出了一些关于修复表的东西。但是，建议我应该先进行备份。由于我无法为这张桌子做背面，所以无论如何都可以使用 REPAIR 命令吗？

* * *

## ：：：：：：：：：：：：： 解决了 ：：：：：：：：：：：

按照克里斯蒂安的帮助，使用`SHOW PROCESSLIST;`命令。我看到有一个状态为“复制到 tmp 表”的进程包含另一个进程。所以我用`KILL <process id>`杀死那个过程和一切释放正常。

干杯查农

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T06:38:39.610

抱歉，我无法评论您的问题... :)

您运行的究竟是哪个版本的 MySQL，5.1.xx？

可以发一下你的`SHOW PROCESSLIST;`状态吗？

**更新**：Chanon，在此事件之后，为了防止出现此问题，您必须检查和优化发送 MySQL 处于“复制到 tmp 表”状态的查询，以避免速度缓慢和临时出现“磁盘已满”的风险分割。

# python - 如何在 Pyramid 中创建具有多个子域并共享相同模型的大型网站？

> ID：12346104
> 
> 赞同：0
> 
> 时间：2012-09-10T06:03:19.523
> 
> 标签：python, pyramid

我正在构建一个包含多个域的电子商务网站：

```
www.example.com: main website which show all items
passport.example.com: this website handle everything related to users like ordering, user information management and so on
static.example.com: holding static contents
admin.example.com: for admin use 
```

客户要求我建立三个网站（网站“静态”不需要应用程序来处理）并将它们放入三个服务器中。这些网站需要共享模型和模板。我应该建立三个项目吗？有没有更好的方法来处理 Pyramid 中的这种情况？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:26:09.197

我这样做的方式是为我的模型创建一个单独的 python 包（你可能想为你的模板创建另一个包），并将`python setup.py develop`它放在每个项目的`virtualenv`. 另外，我通常将所有项目保存在同一个源代码控制存储库下，以确保部署时没有版本问题。`setup.py`通过在不同项目的依赖项中使用版本号，您可能会得到相同的结果。

如果这对您来说听起来很新鲜，您可能需要阅读[http://guide.python-distribute.org/](http://guide.python-distribute.org/)。

每个包都有它`setup.py`告诉包名称和版本号，以及依赖项列表。

# ios - 如何让 MKPolylines 在 MKMapView (iOS) 中正确地跟随道路？

> ID：12346105
> 
> 赞同：1
> 
> 时间：2012-09-10T06:03:38.127
> 
> 标签：ios, routes, mapkit, polyline, map-directions

)

我正在尝试使用 Google Directions API 在我的 iOS 项目中的 MKMapView 上放置方向折线。我使用了此博客中的代码：http: [//iosguy.com/2012/05/22/tracing-routes-with-mapkit/](http://iosguy.com/2012/05/22/tracing-routes-with-mapkit/)，效果很好。但我发现的问题是折线不跟随道路，而是从一个点直接画线到另一个点:-(

谁能帮我让它沿着道路行驶？谢谢 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T12:15:41.813

您可以使用 Google Directions 响应的 *overview_polyline* 元素来绘制沿道路的平滑线，而不是使用路线步骤的坐标。您可以使用此代码来解码折线字符串：[https ://gist.github.com/3770235](https://gist.github.com/3770235)

编辑：我错误地假设您使用步骤坐标的位置，因为这通常是这些直线的原因，但您发布的链接已经使用 *overview_polyline*。在那种情况下，我的答案可能无法解决您的问题。不过，将折线解码为 MKPolyline 上的一个类别可能是对您的代码的一个很好的补充。

# configuration - JackRabbit 配置 RepositoryAccessServlet 问题

> ID：12346106
> 
> 赞同：2
> 
> 时间：2012-09-10T06:03:39.447
> 
> 标签：configuration, websphere, jackrabbit, illegalstateexception

大家好，我收到以下异常：`java.lang.IllegalStateException:`不可`repository`用。请检查`RepositoryAccessServlet`web.xml 中的配置。

我是 Jackrabbit 的新手，我已经部署了`jackrabbit-webapp-2.4.3 on my websphere7`，但是如何`repository.xml`在这个 webapp web.xml 中配置我的自定义。我已阅读 webapp web.xml 并尝试相应地更改它，但我无法。如果您有任何示例配置和代码片段，请分享，我很困在这里。先感谢您。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-09-14T13:33:02.677

这是一个示例 repository.xml。希望这会有所帮助：

```
<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!DOCTYPE Repository
          PUBLIC "-//The Apache Software Foundation//DTD Jackrabbit 2.0//EN"
          "http://jackrabbit.apache.org/dtd/repository-2.0.dtd">

<!-- Example Repository Configuration File
     Used by
     - org.apache.jackrabbit.core.config.RepositoryConfigTest.java
     -
-->
<Repository>
    <!--
        virtual file system where the repository stores global state
        (e.g. registered namespaces, custom node types, etc.)
    -->
    <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
        <param name="path" value="${rep.home}/repository"/>
    </FileSystem>

    <!--
        data store configuration
    -->
    <DataStore class="org.apache.jackrabbit.core.data.FileDataStore"/>

    <!--
        security configuration
    -->
    <Security appName="Jackrabbit">
        <!--
            security manager:
            class: FQN of class implementing the JackrabbitSecurityManager interface
        -->
        <SecurityManager class="org.apache.jackrabbit.core.DefaultSecurityManager" workspaceName="security">
            <!--
            workspace access:
            class: FQN of class implementing the WorkspaceAccessManager interface
            -->
            <!-- <WorkspaceAccessManager class="..."/> -->
            <!-- <param name="config" value="${rep.home}/security.xml"/> -->
        </SecurityManager>

        <!--
            access manager:
            class: FQN of class implementing the AccessManager interface
        -->
        <AccessManager class="org.apache.jackrabbit.core.security.DefaultAccessManager">
            <!-- <param name="config" value="${rep.home}/access.xml"/> -->
        </AccessManager>

        <LoginModule class="org.apache.jackrabbit.core.security.authentication.DefaultLoginModule">
           <!-- 
              anonymous user name ('anonymous' is the default value)
            -->
           <param name="anonymousId" value="anonymous"/>
           <!--
              administrator user id (default value if param is missing is 'admin')
            -->
           <param name="adminId" value="admin"/>
        </LoginModule>
    </Security>

    <!--
        location of workspaces root directory and name of default workspace
    -->
    <Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/>
    <!--
        workspace configuration template:
        used to create the initial workspace if there's no workspace yet
    -->
    <Workspace name="${wsp.name}">
        <!--
            virtual file system of the workspace:
            class: FQN of class implementing the FileSystem interface
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${wsp.home}"/>
        </FileSystem>
        <!--
            persistence manager of the workspace:
            class: FQN of class implementing the PersistenceManager interface
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${wsp.home}/db;create=true"/>
          <param name="schemaObjectPrefix" value="${wsp.name}_"/>
        </PersistenceManager>
        <!--
            Search index and the file system it uses.
            class: FQN of class implementing the QueryHandler interface
        -->
        <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
            <param name="path" value="${wsp.home}/index"/>
            <param name="supportHighlighting" value="true"/>
        </SearchIndex>
    </Workspace>

    <!--
        Configures the versioning
    -->
    <Versioning rootPath="${rep.home}/version">
        <!--
            Configures the filesystem to use for versioning for the respective
            persistence manager
        -->
        <FileSystem class="org.apache.jackrabbit.core.fs.local.LocalFileSystem">
            <param name="path" value="${rep.home}/version" />
        </FileSystem>

        <!--
            Configures the persistence manager to be used for persisting version state.
            Please note that the current versioning implementation is based on
            a 'normal' persistence manager, but this could change in future
            implementations.
        -->
        <PersistenceManager class="org.apache.jackrabbit.core.persistence.pool.DerbyPersistenceManager">
          <param name="url" value="jdbc:derby:${rep.home}/version/db;create=true"/>
          <param name="schemaObjectPrefix" value=`enter code here`"version_"/>
        </PersistenceManager>
    </Versioning>

    <!--
        Search index for content that is shared repository wide
        (/jcr:system tree, contains mainly versions)
    -->
    <SearchIndex class="org.apache.jackrabbit.core.query.lucene.SearchIndex">
        <param name="path" value="${rep.home}/repository/index"/>
        <param name="supportHighlighting" value="true"/>
    </SearchIndex>

    <!--
        Run with a cluster journal
    -->
    <Cluster id="node1">
        <Journal class="org.apache.jackrabbit.core.journal.MemoryJournal"/>
    </Cluster>
</Repository> 
```

# magento - 通过覆盖模型重写 Magento URL

> ID：12346109
> 
> 赞同：0
> 
> 时间：2012-09-10T06:03:47.613
> 
> 标签：magento

是否有一个 Base 模型，我可以通过覆盖该模型来重写我的 URL。

我有很多 URL，我需要使用重定向它们而不将它们添加到**类别 URL 重写管理**

我可以通过覆盖**Mage_Core_Model_App**来做到这一点，但不幸的是 Magento 不允许覆盖 App 模型。

示例：旧网址：[www.old.com/pro/1232](http://www.old.com/pro/1232)

新 URL：[www.mage.com/my-product.html](http://www.mage.com/my-product.html) 我想将旧 URL 重定向到新 URL，而不使用 Magento 中的 URL 重写管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:08:54.770

我们使用 Apache 重写做了类似的事情。

您应该能够在您使用的任何 Web 服务器中配置重写。

# python - 或过滤 Google Drive Api q 对象

> ID：12346113
> 
> 赞同：2
> 
> 时间：2012-09-10T06:03:59.977
> 
> 标签：python, google-drive-api

我正在尝试使用 Google Drive python 客户端来选择所有具有 mimeType audio/mpeg OR audio/flac OR audio/ogg 的文件类型。这如何在单个查询中完成？我试过了：

```
files = drive.files().list().setQ("mimeType='audio/mpeg OR mimeType='audio/flac'").execute() 
```

但是这个请求未能产生正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:12:49.370

您在查询中丢失了一个单引号，并且查询无效：

```
mimeType='audio/mpeg' OR mimeType='audio/flac'
                    ^ 
```

但是 Google Drive API 仍然不支持`or`运算符，因此您必须执行两个查询才能获得所需的结果：

```
mpegs = drive.files().list().setQ("mimeType='audio/mpeg'").execute()
flacs = drive.files().list().setQ("mimeType='audio/flac'").execute() 
```

# c++ - 有没有办法确保浮点的输出在不同的操作系统中相同？

> ID：12346117
> 
> 赞同：4
> 
> 时间：2012-09-10T06:04:28.080
> 
> 标签：c++, windows, linux, io, floating-point

这是我的代码：</p>

```
int a = 0x451998a0;
float b = *((float *)&a);
printf("coverto float: %f, %.10lf\n", b, b); 
```

在 Windows 中，输出为：

```
coverto float: 2457.539063, 2457.5390625000 
```

在linux中，输出为：

```
coverto float: 2457.539062, 2457.5390625000 
```

有什么方法可以确保输出相同吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T06:12:05.913

您看到的行为只是 Windows 的`printf()`功能与 Linux 的`printf()`功能不同的结果。最有可能的区别在于如何`printf()`实现数字舍入。

在这两个系统的底层如何`printf()`工作是一个实现细节；`printf()`因此，系统不太可能对如何显示浮点值提供如此细粒度的控制。

有两种方法可以使它们保持不变：

1.  在计算过程中使用比在显示过程中更高的精度。例如，一些科学和图形计算器`double`对所有内部计算都使用精度，但仅以`float`精度显示结果。

2.  使用跨平台`printf()`库。这样的库很可能在所有平台上都具有相同的行为，因为确定要显示哪些数字所需的计算通常与平台无关。

然而，这真的没有你想象的那么大。输出之间的差异为 0.000001。这与这两个值的差异约为 0.0000000004%。显示错误确实可以忽略不计。

考虑一下：[洛杉矶和纽约之间的距离是 2464 英里](http://www.wolframalpha.com/input/?i=the+distance+between+Los+Angeles+and+New+York)，这与显示输出中的数字具有相同的数量级。0.000001 英里的差是 1.61*毫米*。我们当然不会以接近那种精度的任何地方来测量城市之间的距离。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:25:20.140

显而易见的答案是在输出中使用较少的精度。一般来说，如果涉及任何计算，您甚至无法确定实际的浮点值是否相同。`printf`以及 如何`ostream`定义实现，即使浮点值相等。

通常，C++ 不保证两个实现产生相同的结果。在这种特殊情况下，*如果*它很重要，您可以在进行转换之前手动进行舍入，但您仍然会偶尔遇到问题，因为实际的浮点值会有所不同。事实上，即使使用相同的编译器进行不同级别的优化，这也可能发生。所以你尝试的任何事情（除了用汇编程序编写整个程序）最终都注定是一场失败的战斗。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:49:29.110

如果您使用相同的 printf() 实现，它们很有可能会显示相同的输出。根据您的工作，在两种操作系统上使用 GNU GCC 可能会更容易，或者获取 printf() 源代码并将其添加到您的项目中（您应该可以轻松搜索一个）。

顺便说一句-您实际上检查过该十六进制数字的编码吗？它应该向上还是向下取整？625 本身很可能是四舍五入的，所以你不应该假设它应该四舍五入到 63....

# java - java中是否有任何通用名称值对？

> ID：12346121
> 
> 赞同：6
> 
> 时间：2012-09-10T06:04:58.563
> 
> 标签：java, generics

java中是否有任何通用名称值对类型的东西？我需要类似的东西

`Queue<NameValuePair<String,String>>`存储名称值对字符串值的队列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T06:06:20.410

commons-lang 提供了一个`Pair`.

见[http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/tuple/Pair.html](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/tuple/Pair.html)

编辑：更新的网址，因为它被打破

# ajax - 如何在 ASP.NET 应用程序中使用 Ajax Contolls 而无需在服务器上安装 AJAX 工具包

> ID：12346123
> 
> 赞同：0
> 
> 时间：2012-09-10T06:05:14.250
> 
> 标签：ajax

我有一个 ASP.NET 应用程序（.NET4.0），它有多个 Ajax 控件，如日历扩展器、Ajax HTML 编辑器等。在 Win server 2008 R2 上托管应用程序时，网络管理员不允许我在其上安装 Ajax 工具包服务器。是否有任何方法可以在不安装 Ajax 工具包的情况下运行 Ajax 控件..？

# java - 如何通过单击邮件中的链接获取 Gmail ID

> ID：12346125
> 
> 赞同：0
> 
> 时间：2012-09-10T06:05:20.153
> 
> 标签：java, gmail

我有一个 java 应用程序，它发送带有链接的群组邮件（仅限**Gmail**），我需要获取单击邮件中链接的人的 mailId，并根据它应该登录到可能应用程序的 mailId，是否有任何 api连接，或者我应该遵循什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:15:10.137

Gmail 会尽其所能对链接进行清理。您必须为每个用户生成唯一链接，并将其映射到数据库中的 gmail 帐户。例如，`id=12345`向您的链接添加一个查询参数，例如：http: [//yourdomain.com/app/ ?id=12345](http://yourdomain.com/app/?id=12345)

# wordpress - Wordpress：如何将 OR 运算符添加到此查询中？

> ID：12346126
> 
> 赞同：0
> 
> 时间：2012-09-10T06:05:30.367
> 
> 标签：wordpress, operators

我有这段代码来计算自定义分类术语及其子术语中的帖子数量：

```
 function wp_get_postcount($id)
            {
            $count = 0;
            $taxonomy = 'productcategories';
            $args = array(

                    'child_of' => $id

            );

            $tax_terms = get_terms($taxonomy,$args);

            var_dump($tax_terms);

            foreach ($tax_terms as $tax_term) {
            $count +=$tax_term->count;
            }
            return $count;
            } 
```

问题是，对于包含帖子的实际术语，它返回为 null，因为它没有子术语。我想知道查询是否有可能包含带有 $id 的术语及其子项？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:25:41.487

为什么不在 get_terms 中使用“pad_counts [”](http://codex.wordpress.org/Function_Reference/get_terms)。

```
$terms=get_terms('my_taxonomy',array('pad_counts'=>1)); 
```

# asp.net-mvc-3 - IIS 最大工作进程设置为 1，但产生更多？

> ID：12346127
> 
> 赞同：2
> 
> 时间：2012-09-10T06:05:43.690
> 
> 标签：asp.net-mvc-3, logging, iis-6

即使在我将最大工作进程数设置为一个之后，IIS 6 是否有可能产生多个工作进程？如果是，在什么条件下？也许在应用程序池回收期间？

我之所以问，是因为我遇到了诸如*The process cannot access the file 'mylogfile.txt' because it is being used by another process 之*类的错误。

我怀疑我收到此错误是因为有多个 IIS 工作人员在运行我的 ASP.NET MVC 3 应用程序，并且这些应用程序尝试同时写入同一个日志文件。我很确定没有其他应用程序打开日志文件。我也很确定日志库（[Essential Diagnostics](http://essentialdiagnostics.codeplex.com/)）能够处理尝试同时写入日志的多个线程（而不是进程）。

有没有办法在它发生的时候检查它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:35:47.003

是的，IIS Worker 进程可以由于以下任何原因产生更多实例，

```
 1\. During Application Pool recycles (as you mentioned).
   2\. During web application restarts (by web.config, or IIS resets)
   3\. By machine.config file configurations, if certain memory thresholds reaches(like no. of requests , CPU usage, memory usage , etc ) 
```

# javascript - Twitter关注按钮：使用javascript获取加载按钮的状态（关注与否）？

> ID：12346128
> 
> 赞同：2
> 
> 时间：2012-09-10T06:05:44.477
> 
> 标签：javascript, jquery, iframe, twitter, twitter-follow

**我需要在加载时而不是点击时获取 twitter“关注”按钮的状态。**

我目前正在通过 ajax 加载按钮，并调用 twttr.widgets.load() 来让 widjet.js 发挥它的魔力。

我知道绑定“follow”和“unfollow”以接受来自单击按钮的回调，但是如何在任何用户交互之前检测按钮的当前状态？

*例如，页面加载并且用户登录到 twitter 并且当前正在关注关注按钮的目标，所以看起来他们已经关注了用户。*

如何使用 javascript/jquery 检测到这一点？我目前没有通过 twitter 授权他们，所以我无法通过他们的 api 进行检查。

其他尝试：

> 我还尝试通过 javascript 获取 iframe 的内容，因为 twitter 关注按钮 iframe 有一个指定按钮状态的类，但由于 CORS 似乎不可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T18:24:43.843

我希望答案是*你不能*。

twitter 关注按钮位于 iframe 中，以防止您访问它并获取他们不希望您拥有的信息。

Facebook 的运作方式类似。喜欢按钮位于 iframe 中，因此您无法使用它来确定某人是否“喜欢”了特定页面。该信息需要用户的许可。

# oracle - Oracle 查询执行计划

> ID：12346132
> 
> 赞同：3
> 
> 时间：2012-09-10T06:06:21.620
> 
> 标签：oracle, indexing, sql-execution-plan

我对 Oracle 查询的执行计划有点困惑。这是在 IBM AIX 6.1 平台上的 Oracle Enterprise Edition 11.2.0.1.0 中。我有一个表 TEST1（100 万行）和另一个表 TEST2（50,000 行）。两个表都有相同的列。有一个视图创建为这两个表的联合。我在这个视图上发起一个查询，在 WHERE 子句中有一个索引列。我能发现的是索引没有被使用并且导致了全表扫描。稍微修改一下查询，它就开始使用索引。我想知道这种特殊的变化如何导致计划的改变。

请在下面找到完整的 DDL + DML。我已经给出了简化的例子。实际的架构和要求要复杂一些。事实上，所讨论的查询是由 OCI 代码生成器动态构建和执行的。我在这里的目的不是要获得替代方案，而是要真正了解计划更改背后的逻辑原因（在此之间，我是应用程序程序员而不是数据库管理员）。非常感谢您的帮助。

```
DROP TABLE TEST1 CASCADE CONSTRAINTS ;  
DROP TABLE TEST2 CASCADE CONSTRAINTS ;  

CREATE TABLE TEST1  
(  
    ID      NUMBER(20)     NOT NULL,  
    NAME    VARCHAR2(40),  
    DAY     NUMBER(20)  
)  
PARTITION BY RANGE (DAY)  
(  
    PARTITION P001 VALUES LESS THAN (2),  
    PARTITION P002 VALUES LESS THAN (3),  
    PARTITION P003 VALUES LESS THAN (4),  
    PARTITION P004 VALUES LESS THAN (5),  
    PARTITION P005 VALUES LESS THAN (6),  
    PARTITION P006 VALUES LESS THAN (7),  
    PARTITION P007 VALUES LESS THAN (8),  
    PARTITION P008 VALUES LESS THAN (9),  
    PARTITION P009 VALUES LESS THAN (10),  
    PARTITION P010 VALUES LESS THAN (11),  
    PARTITION P011 VALUES LESS THAN (12),  
    PARTITION P012 VALUES LESS THAN (13),  
    PARTITION P013 VALUES LESS THAN (14),  
    PARTITION P014 VALUES LESS THAN (15),  
    PARTITION P015 VALUES LESS THAN (16),  
    PARTITION P016 VALUES LESS THAN (17),  
    PARTITION P017 VALUES LESS THAN (18),  
    PARTITION P018 VALUES LESS THAN (19),  
    PARTITION P019 VALUES LESS THAN (20),  
    PARTITION P020 VALUES LESS THAN (21),  
    PARTITION P021 VALUES LESS THAN (22),  
    PARTITION P022 VALUES LESS THAN (23),  
    PARTITION P023 VALUES LESS THAN (24),  
    PARTITION P024 VALUES LESS THAN (25),  
    PARTITION P025 VALUES LESS THAN (26),  
    PARTITION P026 VALUES LESS THAN (27),  
    PARTITION P027 VALUES LESS THAN (28),  
    PARTITION P028 VALUES LESS THAN (29),  
    PARTITION P029 VALUES LESS THAN (30),  
    PARTITION P030 VALUES LESS THAN (31)  
) ;  

CREATE INDEX IX_ID on TEST1 (ID) INITRANS 4 STORAGE(FREELISTS 16) LOCAL  
(  
    PARTITION P001,  
    PARTITION P002,  
    PARTITION P003,  
    PARTITION P004,  
    PARTITION P005,  
    PARTITION P006,  
    PARTITION P007,  
    PARTITION P008,  
    PARTITION P009,  
    PARTITION P010,  
    PARTITION P011,  
    PARTITION P012,  
    PARTITION P013,  
    PARTITION P014,  
    PARTITION P015,  
    PARTITION P016,  
    PARTITION P017,  
    PARTITION P018,  
    PARTITION P019,  
    PARTITION P020,  
    PARTITION P021,  
    PARTITION P022,  
    PARTITION P023,  
    PARTITION P024,  
    PARTITION P025,  
    PARTITION P026,  
    PARTITION P027,  
    PARTITION P028,  
    PARTITION P029,  
    PARTITION P030  
) ;  

CREATE TABLE TEST2  
(  
    ID      NUMBER(20)      PRIMARY KEY   NOT NULL,  
    NAME    VARCHAR2(40),  
    DAY     NUMBER(20)  
) ;  

CREATE OR REPLACE VIEW TEST_V AS  
SELECT  
    ID, NAME, DAY  
FROM  
    TEST1  
UNION  
SELECT  
    ID, NAME, DAY  
FROM  
    TEST2 ;  

begin  
    for count in 1..1000000  
    loop  
        insert into test1 values(count, 'John', mod(count, 30) + 1) ;  
    end loop ;  
end ;  
/  

begin  
    for count in 1000000..1050000  
    loop  
        insert into test2 values(count, 'Mary', mod(count, 30) + 1) ;  
    end loop ;  
end ;  
/  

commit ;  

set lines 300 ;  
set pages 1000 ;  

-- Actual query  
explain plan for  
    SELECT Key FROM  
    (  
        WITH recs AS  
        (  
            SELECT * FROM TEST_V WHERE ID = 70000  
        )  
        (  
            SELECT 1 AS Key FROM recs WHERE NAME = 'John'  
        )  
        UNION  
        (  
            SELECT 2 AS Key FROM recs WHERE NAME = 'Mary'  
        )  
    ) ;  

select * from table(dbms_xplan.display()) ;  

PLAN_TABLE_OUTPUT  
------------------------------------------------------------------------------------------------------------------------------------------  
| Id  | Operation                   | Name                         | Rows  | Bytes  | TempSpc | Cost (%CPU)  |    Time  | Pstart | Pstop |  
------------------------------------------------------------------------------------------------------------------------------------------  
|   0 | SELECT STATEMENT            |                              | 1611K | 4721K  |         |   13559 (1)  | 00:02:43 |        |       |  
|   1 |  VIEW                       |                              | 1611K | 4721K  |         |   13559 (1)  | 00:02:43 |        |       |  
|   2 |   TEMP TABLE TRANSFORMATION |                              |       |        |         |              |          |        |       |  
|   3 |    LOAD AS SELECT           | SYS_TEMP_0FD9D6610_34D3B6C   |       |        |         |              |          |        |       |  
|*  4 |     VIEW                    | TEST_V                       | 805K  | 36M    |         |   10403 (1)  | 00:02:05 |        |       |  
|   5 |      SORT UNIQUE            |                              | 805K  | 36M    |   46M   |   10403 (8)  | 00:02:05 |        |       |  
|   6 |       UNION-ALL             |                              |       |        |         |              |          |        |       |  
|   7 |        PARTITION RANGE ALL  |                              | 752K  | 34M    |         |   721 (1)    | 00:00:09 |    1   |   30  |  
|   8 |     TABLE ACCESS FULL       | TEST1                        | 752K  | 34M    |         |   721 (1)    | 00:00:09 |    1   |   30  |  
|   9 |        TABLE ACCESS FULL    | TEST2                        | 53262 | 2496K  |         |   68 (0)     | 00:00:01 |        |       |  
|  10 |    SORT UNIQUE              |                              | 1611K | 33M    |   43M   |   13559 (51) | 00:02:43 |        |       |  
|  11 |     UNION-ALL               |                              |       |        |         |              |          |        |       |  
|* 12 |      VIEW                   |                              | 805K  | 16M    |         |   1429 (1)   | 00:00:18 |        |       |  
|  13 |       TABLE ACCESS FULL     | SYS_TEMP_0FD9D6610_34D3B6C   | 805K  | 36M    |         |   1429 (1)   | 00:00:18 |        |       |  
|* 14 |      VIEW                   |                              | 805K  | 16M    |         |   1429 (1)   | 00:00:18 |        |       |  
|  15 |       TABLE ACCESS FULL     | SYS_TEMP_0FD9D6610_34D3B6C   | 805K  | 36M    |         |   1429 (1)   | 00:00:18 |        |       |  
------------------------------------------------------------------------------------------------------------------------------------------  

Predicate Information (identified by operation id):  
---------------------------------------------------  
   4 - filter("ID"=70000)  
  12 - filter("NAME"='John')  
  14 - filter("NAME"='Mary')  

-- Modified query (only change is absence of outermost SELECT)  
explain plan for  
    WITH recs AS  
    (  
        SELECT * FROM TEST_V WHERE ID = 70000  
    )  
    (  
        SELECT 1 AS Key FROM recs WHERE NAME = 'John'  
    )  
    UNION  
    (  
        SELECT 2 AS Key FROM recs WHERE NAME = 'Mary'  
    ) ;  

select * from table(dbms_xplan.display()) ;  

PLAN_TABLE_OUTPUT  
-----------------------------------------------------------------------------------------------------------------------------------------  
| Id  | Operation                                | Name                       | Rows  | Bytes | Cost (%CPU) | Time     | Pstart | Pstop |  
-----------------------------------------------------------------------------------------------------------------------------------------  
|   0 | SELECT STATEMENT                         |                            |   4   |  88   |    6 (67)   | 00:00:01 |        |       |  
|   1 |  TEMP TABLE TRANSFORMATION               |                            |       |       |             |          |        |       |  
|   2 |   LOAD AS SELECT                         | SYS_TEMP_0FD9D6611_34D3B6C |       |       |             |          |        |       |  
|   3 |    VIEW                                  | TEST_V                     |   2   |  96   |    4 (50)   | 00:00:01 |        |       |  
|   4 |     SORT UNIQUE                          |                            |   2   |  96   |    4 (75)   | 00:00:01 |        |       |  
|   5 |      UNION-ALL                           |                            |       |       |             |          |        |       |  
|   6 |       PARTITION RANGE ALL                |                            |   1   |  48   |    1 (0)    | 00:00:01 |    1   |   30  |  
|   7 |        TABLE ACCESS BY LOCAL INDEX ROWID | TEST1                      |   1   |  48   |    1 (0)    | 00:00:01 |    1   |   30  |  
|*  8 |     INDEX RANGE SCAN                     | IX_ID                      |   1   |       |    1 (0)    | 00:00:01 |    1   |   30  |  
|   9 |       TABLE ACCESS BY INDEX ROWID        | TEST2                      |   1   |  48   |    1 (0)    | 00:00:01 |        |       |  
|* 10 |        INDEX UNIQUE SCAN                 | SYS_C001242692             |   1   |       |    1 (0)    | 00:00:01 |        |       |  
|  11 |   SORT UNIQUE                            |                            |   4   |  88   |    6 (67)   | 00:00:01 |        |       |  
|  12 |    UNION-ALL                             |                            |       |       |             |          |        |       |  
|* 13 |     VIEW                                 |                            |   2   |  44   |    2 (0)    | 00:00:01 |        |       |  
|  14 |      TABLE ACCESS FULL                   | SYS_TEMP_0FD9D6611_34D3B6C |   2   |  96   |    2 (0)    | 00:00:01 |        |       |  
|* 15 |     VIEW                                 |                            |   2   |  44   |    2 (0)    | 00:00:01 |        |       |  
|  16 |      TABLE ACCESS FULL                   | SYS_TEMP_0FD9D6611_34D3B6C |   2   |  96   |    2 (0)    | 00:00:01 |        |       |  
-----------------------------------------------------------------------------------------------------------------------------------------  

Predicate Information (identified by operation id):  
---------------------------------------------------  
   8 - access("ID"=70000)  
  10 - access("ID"=70000)  
  13 - filter("NAME"='John')  
  15 - filter("NAME"='Mary')  

quit ; 
```

谢谢和问候，
Reji

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:09:27.987

我无法在 11.2.0.3 中重现这一点，除了：您遇到了一个错误，这显然在 11.2.0.3 中已解决，我认为对此行为没有合乎逻辑的解释。

One thing that jumped immediately in my eye is the lack of object statistics and - if your output was complete - the fact that OPTIMIZER_DYNAMIC_SAMPLING is set to 0\. You could try to reproduce with OPTIMIZER_DYNAMIC_SAMPLING=2\. In that case the dynamic sampler kicks in if the object statistics are missing. BTW: don't use this feature instead of correct optimizer statistics. More info about dynamic sampling [Dynamic sampling and its impact on the Optimizer](https://blogs.oracle.com/optimizer/entry/dynamic_sampling_and_its_impact_on_the_optimizer)

In your - nice documented - question and script/test case you try to make use of append and nologging. This only works for bulk inserts, not for row inserts with values. What would happen is for every insert: push-up the highwater mark and dump a full block of data in the free block, in your case that would have only 1 row .... Luckily, the database ignores this instruction.

Before you fire SQL to a table, make sure that you give it optimizer statistics. This will certainly help your case.

# php - 如何在 zend 框架中装饰和添加单选按钮？

> ID：12346137
> 
> 赞同：0
> 
> 时间：2012-09-10T06:06:55.677
> 
> 标签：php, zend-framework, zend-form

**在将这个元素添加到表单中时，标签没有很好地装饰。谁能帮助我，如何用zend形式的标签装饰单选按钮，即如何在一行中显示标签和单选按钮......**

```
$this->addElement('radio', 'FORM_EXITS',
                    array('decorators' => $this->elementDecoratorsTr ,'label' => 'Exists :',
                    'multiOptions' => array(
                    '1' => 'Yes',
                    '0' => 'No',
                    ),
                        'Separator' => ''

                ));

 public  $elementDecoratorsTr = array(
                'ViewHelper',
                'Description',
                'Errors',
                array(array('data'=>'HtmlTag'), array('tag' => 'td')),
                //array('ViewScript', array('viewScript' => 'users/adduser.phtml')),
                array('Label', array('tag' => 'td', 'style' => 'float:right;')),
                array(array('row'=>'HtmlTag'), array('tag'=>'tr', 'closeOnly' => true))
                ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:10:24.247

```
$this->addElement('radio', 'FORM_EXITS',
                array('decorators' => $this->elementDecoratorsTr ,'label' => 'Exists :',
                'multiOptions' => array(
                '1' => 'Yes',
                '0' => 'No',
                ),
                    'Separator' => '   '

            )); 
```

现在测试一下。

否则使用这样的**结构**。

```
$gender = new Zend_Form_Element_Radio('gender');
$gender->setLabel('Gender:')
       ->setRequired(true)
       ->addMultiOptions(array('male' => 'Male',
                               'female' => 'Female' ))
       ->setSeparator('  '); 
```

# c# - 提交后弹窗

> ID：12346146
> 
> 赞同：2
> 
> 时间：2012-09-10T06:07:56.047
> 
> 标签：c#, asp.net

直接问一个问题，当我在我的页面中完成添加一些数据并单击提交按钮时，我怎样才能弹出一个窗口说信息已成功添加到数据库中而不是创建一个新页面？有什么我可以做的吗？有什么网站可以参考吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:11:18.660

您只需输入以下代码：

```
Response.Write("<script>alert('information has been successfully added')
                </script>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:40:28.007

你可以为它创建一个可重用的函数。

```
 public void Show(string msg)
  {
            Page page = HttpContext.Current.Handler as Page;
            if (page != null)
            {
                ScriptManager.RegisterStartupScript(page, page.GetType(), "msg", "alert('" + msg + "');", true);
            }
  } 
```

并在这样的提交按钮调用中。

```
 protected void btnSubmit_Click(object sender, EventArgs e)
 {
       // Your Code for submit 
        Show("Save Success");
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:21:53.047

您可以在消息中设置标签文本，并在要显示消息时使其可见。

```
lblMessage.Text = "Data updated successfully";
lblMessage.Visible = true; 
```

为了使其突出，您可以使用 jquery [dialogs](http://jqueryui.com/demos/dialog/)，并使用 CSS 适当地对其进行样式设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:25:25.003

```
//Global Declaration
public static void Message(String message, Control cntrl)
{
  ScriptManager.RegisterStartupScript(cntrl, cntrl.GetType(), "alert", "alert('" + message + "');", true);
}

//Call any where, where you want to display message
 Message("Any message here", this); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T06:25:58.257

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "Notification", "alert('Done');", true); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T06:27:27.007

如果您使用常规提交行为提交表单，则使用 ASP.NET，您仍将经历一个完整的页面生命周期。这意味着该页面首先需要重新加载，然后才能触发您的警报。如果您希望页面不重新加载而只显示结果警报，则需要使用 AJAX 执行操作，将表单发布到更新您拥有的数据库的服务方法。这不会重新加载您的页面，只会显示您的 ajax 调用已完成的警报。[jQuery $.post()](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-10T06:34:27.953

检查有效数据后单击按钮，您可以执行以下操作

```
ClientScriptManager script = Page.ClientScript

if (!script.IsStartupScriptRegistered(GetType(), "Show Popup"))
 {
   script.RegisterStartupScript(GetType(), "Show Popup", "ShowPopup();", true);
 } 
```

您可以使用**[ClientScriptManager.RegisterStartupScript 方法](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerstartupscript.aspx)**`javascript`调用函数`code behind`

这是你的弹出窗口

**HTML：**

```
<div id="Popup"></div> 
```

**CSS：**

```
#Popup
{

    height:200px;
    width:300px;
    position:fixed;
    z-index:102;
    left:50%;
    top:50%;
    margin-top:-130px;
    margin-left:-180px;
    font-weight:bold;
    font-size:10pt;
    padding:20px;
    background-color:#fff;
    border:10px solid #9cc3f7;
    border-radius:20px;
    -webkit-border-radius:20px;
    -moz-border-radius:20px;
    text-align:center;
    display:none;
}​ 
```

**jQuery函数：**

```
function ShowPopup()
{

 $('#Popup').show("slow");

}​ 
```

**[查看示例](http://jsfiddle.net/vc5J5/)**

# java - JTable中添加图片时显示的字符串路径

> ID：12346152
> 
> 赞同：0
> 
> 时间：2012-09-10T06:08:30.107
> 
> 标签：java, swing, jtable, tablemodel, imageicon

我尝试使用 setValueAt 添加图像，但问题是它打印字符串并且不加载图像。对此有任何帮助。代码如下

```
int selectedColumn = table1.getSelectedColumn();
int selectedRow = table1.getSelectedRow();
ImageIcon addIcon = new ImageIcon("c:\\onion.png");
table1.getModel().setValueAt(addIcon, selectedRow, electedColumn); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T06:17:08.470

您需要[创建一个](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)`Icon.class`为其[`getColumnClass`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html#getColumnClass%28int%29)方法返回的表模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T06:20:51.773

确保您的表知道给定列中存储了哪些数据，以便它可以选择适当的渲染器。因此，您的 JTable 创建代码应该是这样的：

```
DefaultTableModel tableModel = new DefaultTableModel(dataObject, columnNames);
JTable table = new JTable(tableModel){
    public Class getColumnClass(int column){
        return getValueAt(0, column).getClass();
    }
}; 
```

# java - 如何连接三个表？

> ID：12346156
> 
> 赞同：0
> 
> 时间：2012-09-10T06:09:00.760
> 
> 标签：java, hadoop, mapreduce

我有一个包含三个表的大量数据，假设三个表的数据类似于：

表 A：

## 身份证名称地点

1 个 aaa位置 1
2 个 bbb 位置 2

表 B：

## Id cId 名称

1 11 aaa
2 22 bbb

表 C：

## cId cname

11 p1
22 p2

当我使用 hadoop mapreduce 加入表 A 和 B 时，我得到了输出

## 千伏

1 个 aaa 位置 1 11
2 个 bbb 位置 2 22

现在我想用上面的输出加入表 C，我可以替换 11 --> p1。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:13:31.073

可能最简单的解决方案是使用@David 提到的[Pig 。](http://pig.apache.org/)为了快速测试，你想出了这样的东西：

```
TABLE_A = LOAD 'hdfs://my_path/input/table_a.txt' using PigStorage(' ') AS (
            id:chararray, 
            name:chararray, 
            place:chararray
          );

TABLE_B = LOAD 'hdfs://my_path/input/table_b.txt' using PigStorage(' ') AS (
            id:chararray, 
            cid:chararray, 
            name:chararray
          );

TABLE_C = LOAD 'hdfs://my_path/input/table_c.txt' using PigStorage(' ') AS (
            cid:chararray, 
            cname:chararray
          );

TMP = FOREACH (join TABLE_A by id, TABLE_B by id) GENERATE 
        TABLE_A::id as id, 
        TABLE_A::name as name, 
        TABLE_A::place as place, 
        TABLE_B::cid as cid;

JOIN_ABC = FOREACH (join TMP by cid, TABLE_C by cid) GENERATE 
             TMP::id, 
             TMP::name, 
             TMP::place, 
             TABLE_C::cname;

store JOIN_ABC into 'hdfs://my_path/output' using PigStorage(' '); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:30:02.757

如果要在 map reduce 上连接两个数据集，常用算法是：

*   将每个数据集映射到重新排列字段并将要加入的字段转换为数据集的键，标记每个记录以区分（稍后在减少阶段）该记录来自哪个数据集也很有用
*   将这些数据集合并为一个
*   减少数据集，因为关键是您要加入的字段 - 您只需要对分组数据执行联接

因此，如果您了解如何加入两个数据集，则可以重复此操作以加入第三个数据集。

这种方法的缺点是，如果您的数据集之一是小尺寸的字典，则 reduce 阶段的 reducer 的数量将被限制为该字典的大小（实际上它们受到不超过大小的不同键空间大小的限制词典）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:32:11.753

我不认为你可以在一个 MR 步骤中加入 3 个表。所以我认为你只需要另一个 MR 工作，它将获取加入 A、B 的结果并将它们与 C 加入。
而且有点偏离 - 我建议在用 Java 编码 MR 之前使用 Hive 或 Pig。

# ckeditor - CKEditor：禁用电子邮件 ID 的默认链接

> ID：12346158
> 
> 赞同：1
> 
> 时间：2012-09-10T06:09:12.760
> 
> 标签：ckeditor

我正在使用 CKEditor 最新版本。每当用户键入他的电子邮件 ID 时，就会创建一个锚链接。Like`<a href="mailto:abcd@example.com">abcd@example.com</a>`在输出中创建。如何在 CKEditor 配置中禁用此属性。

我试过`config.forcePasteAsPlainText = true;`了，但在这种特殊情况下没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:34:35.530

Auto Url Detection 是 IE 的一项功能，从 IE9 开始，您可以禁用此功能。

> 在 IE9 之前，无法从 JavaScript 指定 IDM_AUTOURLDETECT_MODE，这意味着页面无法禁用 ContentEditable 区域中的自动超链接。IE9 支持新的命令常量 AutoUrlDetect，允许脚本禁用自动超链接，如下所示： document.execCommand("AutoUrlDetect", false, false)

您可以尝试在编辑器的文档对象上执行此调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T12:52:49.127

您还可以在 CKeditor 创建输出之前（例如，用户单击提交按钮的那一刻）在输入中搜索 @ 并将其替换为`&#64;`

# python - 格式命令在旧版本的 python 中不起作用

> ID：12346160
> 
> 赞同：-1
> 
> 时间：2012-09-10T06:09:31.307
> 
> 标签：python

我编写了一个可以在我的笔记本电脑（python 版本 2.7.3）上找到的 python 代码，但它似乎不能在我的大学桌面（python 版本 2.5.2）上运行。

我不知道这是否是版本问题，但我收到了有关以下行的错误消息：

```
os.chdir('../../pulsararchive/{0}'.format(pname)) 
```

我收到以下错误消息：

> AttributeError：“str”对象没有属性“格式”

“格式”的东西在旧版本的 python 中不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:10:47.803

```
 `str.format`: New in version 2.6. 
```

[http://docs.python.org/library/stdtypes.html#str.format](http://docs.python.org/library/stdtypes.html#str.format)

另请参阅[是否有 2.5 的 Python 模块提供类似于 2.6 中的 "string".format() 调用的功能？](https://stackoverflow.com/q/4643981/989121)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T06:10:54.750

不，该[`.format()`方法](http://docs.python.org/library/stdtypes.html#str.format)直到 python 2.6 才引入。

您应该改用旧式[`%`字符串格式](http://docs.python.org/library/stdtypes.html#string-formatting)：

```
os.chdir('../../pulsararchive/%s' % pname) 
```

# python - Python - 以秒为单位获取 UTC 偏移量

> ID：12346164
> 
> 赞同：2
> 
> 时间：2012-09-10T06:09:52.367
> 
> 标签：python, timezone, pytz

基于此代码，我如何以秒为单位获取给定日期的 UTC 偏移量。[从python中的时区名称获取UTC偏移量](https://stackoverflow.com/questions/5537876/get-utc-offset-from-time-zone-name-in-python)

目前，我有这个代码：

```
Python 2.7.3 (default, Jul  3 2012, 19:58:39) 
[GCC 4.7.1] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import pytz
>>> import datetime
>>> offset = datetime.datetime.now(pytz.timezone('US/Pacific')).strftime('%z')
>>> offset
'-0700'
>>> int(offset)*3600
-2520000
>>> int(offset)*360 
-252000
>>> 
```

例如，美国/太平洋有时是 -800 小时（可能是军事时间：D），但我需要它以秒为单位，例如：-25200。

我应该乘以 360 吗？听起来不对，但谁知道呢。

TIA

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T06:19:39.637

```
>>> import datetime, pytz
>>> melbourne = pytz.timezone("Australia/Melbourne")
>>> melbourne.utcoffset(datetime.datetime.now())
datetime.timedelta(0, 36000)

>>> pacific = pytz.timezone("US/Pacific")
>>> pacific.utcoffset(datetime.datetime.now())
datetime.timedelta(-1, 61200)
>>> -1*86400+61200
-25200
>>> pacific.utcoffset(datetime.datetime.now()).total_seconds()
-25200.0 
```

# iphone - 我们如何像苹果在他的应用商店中那样加载图像？

> ID：12346176
> 
> 赞同：1
> 
> 时间：2012-09-10T06:11:23.880
> 
> 标签：iphone, objective-c, ios, uitableview, asynchronous

大家好，苹果如何加载不影响表格视图滚动的表格视图单元格图像。它的工作速度有多快。我想制作一个像直接从 URL 加载图像并且不影响 UITableview 滚动的表格视图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:18:05.067

延迟加载是您所指的确切术语。（Apple Technologies 在任何适用的地方都使用 LazyLoading，无论是 iOS 还是 Mac OS X ——它也提供了最佳的用户体验，因为用户不会被迫等待）

Apple 提供了执行类似功能的示例源代码——[这里是示例代码](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

不要与`ParseOperation`类混淆。它只是 XML Parsing 功能的单独实现。虽然，这是一种更好的方法，但您可以在自己的工作类中编写它（从中调用连接请求。）

此外——Apple 已更新此代码以使用 Blocks (GCD)。希望对您有所帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:15:01.523

您不需要看得太远 - Apple 在 Open- [LazyTables](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)中有此代码。

如果你想知道神奇的酱汁是启动 bg 线程下载图像，在后台下载完成后，它会更新 UI 以显示图像。

# javascript - Drupal弹窗返回值

> ID：12346177
> 
> 赞同：1
> 
> 时间：2012-09-10T06:11:25.783
> 
> 标签：javascript, drupal

我想要一个弹出窗口，用户可以在其中选择 2 个选项。当用户选择选项 1 时，form['loading_type'] 的值必须是“Loading Type A”，否则它的值是“Loading Type B”。我使用 Drupal 6 作为我的 CMS，使用 PHP 作为表单，使用 Javascript 作为弹出窗口。

它可能会有所帮助，但以下是我的代码片段：

```
$form['loading_type'] = array(
  '#type' => 'hidden',
);
$form['submit'] = array(
  '#type' => 'submit',
  '#value' => t('Submit'),
  '#attributes' => array('class' => 'accountability-button-confirm'),
);

$(document).ready(
function(){
  $('.accountability-button-confirm').click(
    function(){
      return Drupal.popups.open(
        Drupal.t('Loading Type:'),
        Drupal.t("Please choose loading type."),
          {
           'Yes': {
             title: Drupal.t('Loading Type A'),
             func: function(){
              Drupal.popups.close();
              document.getElementById("loading_type").value = "Loading Type A";
              $("form#name-of-my-from-form").submit();
            }
           },
           'No': {
             title: Drupal.t('Loading Type B'),
             func: function(){
              Drupal.popups.close();
              document.getElementById("loading_type").value = "Loading Type B";
              $("form#name-of-my-from-form").submit();
            }
           },
         400
       );
    } 
```

请帮忙。（我是 Drupal 新手。）非常感谢！

# java - 为什么将 System.nanoTime() 转换为 Calendar 对象会给我错误的当前日期？

> ID：12346178
> 
> 赞同：3
> 
> 时间：2012-09-10T06:11:35.040
> 
> 标签：java, android

如果我理解正确，即使系统时间已更改， using`System.nanoTime()`也是一种将标记保持在当前时间的更准确方法。`System.currentTimeInMillis()`那么为什么当我将 long 值转换为`nanoTime()`对象`Calendar`时，输出是错误的呢？

```
import java.util.Calendar;

public class Test {

    public static void main(String[] args) {
        Calendar c = Calendar.getInstance();
        c.setTimeInMillis(System.currentTimeMillis());
        System.out.println(c.get(Calendar.MONTH) + " " + c.get(Calendar.DATE) + " " + c.get(Calendar.YEAR) +
                " " + c.get(Calendar.HOUR_OF_DAY) + ":" + c.get(Calendar.MINUTE) + ":" + c.get(Calendar.SECOND)
                + ":" + c.get(Calendar.MILLISECOND));
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T06:16:20.070

[System.nanotime()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#nanoTime%28%29) javadoc 建议：

返回最精确的可用系统计时器的当前值，以纳秒为单位。

> 此方法只能用于测量经过的时间，与系统或挂钟时间的任何其他概念无关。返回的值表示自某个固定但任意时间以来的纳秒（可能在将来，因此值可能为负数）。此方法提供纳秒精度，但不一定提供纳秒精度。不保证值的变化频率。由于数值溢出，超过大约 292 年（263 纳秒）的连续调用的差异将无法准确计算经过的时间。
> 
> 例如，要测量一些代码需要多长时间执行：

```
long startTime = System.nanoTime();
// ... the code being measured ...
long estimatedTime = System.nanoTime() - startTime; 
```

# zend-framework - Zend_Gdata 库和 Picasa 数据 API -- 缺少 loader.php 文件

> ID：12346180
> 
> 赞同：1
> 
> 时间：2012-09-10T06:11:46.190
> 
> 标签：zend-framework, google-api, zend-gdata

我试图在 php 中开发一个应用程序，以使用 Zend_Gdata 库从 picasa 下载图片。我的项目文件夹结构是这样的：

```
www(wamp)
  /project
    test.php
    /Zend
      /Authentication
      /Barcode
      .
      .
      /View
      /XmlRpc 
```

如您所见，我没有复制完整的 Zend 框架。我不想在这个项目中使用完整的 MVC 范例，只需要 Zend_Gdata 库。这是这样做的方法吗？还是我必须使用完整的 zend 框架？我对 Zend 完全陌生。

[我在 IBM 站点http://www.ibm.com/developerworks/library/x-picasalbum/](http://www.ibm.com/developerworks/library/x-picasalbum/)上发现这篇文章解释得很好。

但我似乎无法在该教程的清单 5 中指定的 Zend 文件夹中找到**Loader.php文件。**

```
// load library
require_once 'Zend/Loader.php';
Zend_Loader::loadClass('Zend_Gdata');
Zend_Loader::loadClass('Zend_Gdata_ClientLogin');
Zend_Loader::loadClass('Zend_Gdata_Photos');
Zend_Loader::loadClass('Zend_Http_Client'); 
```

相反，我在 Zend 文件夹中找到了这个文件夹**Loader**，其中包含许多其他 loaderClasses。那个教程过时了吗？（其日期为 2008 年 9 月 16 日；Zend 现在是 Zend2）该文件夹中的哪个文件用于旧 Loader.php 的目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:59:56.703

如果您使用 Zend Framework 1，您必须首先将 Zend 文件夹添加到您的 include_path

```
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(realpath(dirname(__FILE__) . '/../library'), // /../library is the relative path to the Zend folder 
    get_include_path(),
))); 
```

然后设置自动加载器（此代码至少需要 v1.12 的框架）

```
require_once __DIR__ . '/../library/Zend/Loader/StandardAutoloader.php';
$loader = new Zend_Loader_StandardAutoloader(
    array(
         Zend_Loader_StandardAutoloader::LOAD_NS => array(
             'Zend'     => __DIR__ . '/../library/Zend',
         ),
    ));
$loader->register(); 
```

如果您使用 Zend Framework 2，那么您必须使用

```
require_once __DIR__ . '/../library/Zend/Loader/StandardAutoloader.php';
$loader = new Zend\Loader\StandardAutoloader(
    array(
         Zend\Loader\StandardAutoloader::LOAD_NS => array(
             'Zend'     => __DIR__ . '/../library/Zend',
             'ZendGData'=> __DIR__ . '/../library/ZendGData',
         ),
    ));
$loader->register(); 
```

上面的说明设置了自动加载器，因此您不需要加载每个类。

在 ZF1 中，您可以直接执行以下操作：

```
$var = new Zend_Gdata_ClientLogin() 
```

ZF2中相同的是：

```
$var = new ZendGData\ClientLogin(); 
```

# android - 如何为 Android Market Place 设置应用程序名称和描述？

> ID：12346186
> 
> 赞同：0
> 
> 时间：2012-09-10T06:12:13.347
> 
> 标签：android

我需要将我的第一个应用程序发布到 android 市场。该应用程序将支持多种语言，因此我希望为所有支持的语言分别设置名称和描述。

此外，我希望设备（启动器）上显示的应用程序名称与市场上的名称不同。我猜设备上当前从以下标签中获取的应用程序名称不会与市场上的应用程序名称冲突

```
 <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" 
```

简单地说，我如何为市场设置不同语言的应用程序名称和描述，并使市场中的名称与设备上的名称不同？

--**编辑**--

我可以在 android manifest 文档中看到标签的以下属性

```
android:description
android:label 
```

文档没有说明在市场中设置值，但这些值会影响 Android 市场中的描述或标签吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:15:30.700

将应用程序上传到市场后，您可以从 Google Developer Console 设置应用程序的名称和描述。

在**列表详细信息**部分，您可以提供与应用程序中使用的名称不同的 android 应用程序的名称和描述。

![在此处输入图像描述](../Images/b713cdb38f8830f9178884a917db70a5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:53:21.663

将应用程序上传到 Google Developer Console 后，您就有机会设置从名称和描述到价格和屏幕截图的所有详细信息。

上传 apk 并设置这些值后，您就有机会发布应用程序。

# ruby-on-rails - Rails 在调试控制台上查看 activerecord sql 语句

> ID：12346192
> 
> 赞同：6
> 
> 时间：2012-09-10T06:12:53.453
> 
> 标签：ruby-on-rails, activerecord, ruby-debug

我在 Rails 3.2 应用程序中使用[调试器](https://github.com/cldwalker/debugger)gem。

如何在调试控制台上查看活动记录方法调用的结果 SQL 语句？

例如：如果我`Product.all`在调试控制台上运行，它会打印出所有产品。我也想看看`"Select * from Products"`。这可能吗？

编辑现在我更聪明（；p）活动记录还在活动记录关系对象上提供 .to_sql 方法，以检查它们对底层数据库运行的 sql 查询。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T06:18:33.007

是的，你打赌 - 在你的命令之前运行它：

```
ActiveRecord::Base.logger = Logger.new(STDOUT) 
```

# php - 如何为异步单击的节点加载子节点

> ID：12346194
> 
> 赞同：0
> 
> 时间：2012-09-10T06:13:14.320
> 
> 标签：php, jquery, mysql, ajax, jstree

嗨，我正在为我的项目使用 jstree 插件，以树视图样式显示类别/子类别。
我想为一个节点加载子节点，该节点被选中/单击。
我不想一次加载完整的树。

我有单独的 mysql 表
1）主类别（根节点）
2）subcategory_level1
3）subcategory_level2
4）subcategory_level3

是否有可能像这样
1）用户单击节点，并获取 id（为我工作）
2）使用 ajax 我将 id 发送到 php 文件并获取传递的节点 id 的子级别节点（我无法执行此操作。请在此处指导）显示所选节点的子级节点。

这些是我找到的 jstree 插件示例的链接。 [链接1 链接](http://luban.danse.us/jazzclub/javascripts/jquery/jsTree/reference/_examples/1_datasources.html)
[2](http://www.jstree.com/demo)

# jquery - 使用 django 用换行符替换逗号

> ID：12346196
> 
> 赞同：0
> 
> 时间：2012-09-10T06:13:19.873
> 
> 标签：jquery, python, django

我正在使用 django 和 python。

我正在从视图中传递帖子，并且正在`{{post.destination}}`使用 django 模板显示目的地。如果目的地的数据库值是`"Shakespeare,Edison,Fleming"`我需要`','`用新行替换。

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:29:27.210

对此没有一步解决方案。

您可以做的是，在您的视图中制作一个字符串替换`','`并`'\n'`在模板中使用它以显示为换行符。

例如

鉴于：

```
 new_destination = post.destination.replate(',', '\n') 
```

在模板中，使用过滤器为每个新行`linebreaksbr`放置标签。`<br/>`

```
{{new_destination|linebreaksbr}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:30:06.867

您可以使用模板中的过滤器/标签将逗号替换为新行，但是没有内置的。您可以编写自定义标签，查看文档[https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/)

但是我认为更合适的方法是在您的视图函数中完成替换，并将处理后的值在上下文中传递给您的模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:20:15.473

查看[Django 模板标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)。我认为，这将是最好的。

# java - 将日期以毫秒为单位转换为 Java 中的今天、昨天、最近 7 天、最近 30 天

> ID：12346198
> 
> 赞同：4
> 
> 时间：2012-09-10T06:13:37.627
> 
> 标签：java, time

我有一些文档，它的创建时间以毫秒为单位。我需要将它们分开为今天、昨天、过去 7 天、过去 30 天、超过 30 天。

我使用了以下代码：`convertSimpleDayFormat(1347022979786);`

```
public static String convertSimpleDayFormat(Long val) {

            long displayTime = System.currentTimeMillis() - val;
            displayTime = displayTime/86400000;
            String displayTimeVal = "";
            if(displayTime <1)
            {
                    displayTimeVal = "today";  
            }
            else if(displayTime<2)
            {
                    displayTimeVal = "yesterday";
            } 
            else if(displayTime<7)
            {
                    displayTimeVal = "last7days";
            } 
            else if(displayTime<30)
            {
                    displayTimeVal = "last30days";
            }
            else
            {
                    displayTimeVal = "morethan30days";
            }
            return displayTimeVal;
    } 
```

我减去当前时间并传递毫秒并转换为一天。

但我面临的问题是，我无法以毫秒为单位计算日期的确切时间。

我想为今天计算：从午夜 00:00 到午夜 24:00。（正好是 24 小时。）

同样，我想将毫秒精确地转换为今天、昨天、过去 7 天、过去 30 天和超过 30 天。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T06:34:07.580

```
private static Calendar clearTimes(Calendar c) {
    c.set(Calendar.HOUR_OF_DAY,0);
    c.set(Calendar.MINUTE,0);
    c.set(Calendar.SECOND,0);
    c.set(Calendar.MILLISECOND,0);
    return c;
}

public static String convertSimpleDayFormat(long val) {
    Calendar today=Calendar.getInstance();
    today=clearTimes(today);

    Calendar yesterday=Calendar.getInstance();
    yesterday.add(Calendar.DAY_OF_YEAR,-1);
    yesterday=clearTimes(yesterday);

    Calendar last7days=Calendar.getInstance();
    last7days.add(Calendar.DAY_OF_YEAR,-7);
    last7days=clearTimes(last7days);

    Calendar last30days=Calendar.getInstance();
    last30days.add(Calendar.DAY_OF_YEAR,-30);
    last30days=clearTimes(last30days);

    if(val >today.getTimeInMillis())
    {
            return "today";  
    }
    else if(val>yesterday.getTimeInMillis())
    {
        return "yesterday";
    } 
    else if(val>last7days.getTimeInMillis())
    {
        return "last7days";
    } 
    else if(val>last30days.getTimeInMillis())
    {
        return "last30days";
    }
    else
    {
        return "morethan30days";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:48:02.897

这是一个小技巧，没有经过严格的测试。使用风险自负。我已使其可扩展，因此您可以添加新的持续时间。

```
public static String prettyTimeStamp(long timeStamp) {
        Calendar c = Calendar.getInstance();
        c.clear(Calendar.HOUR_OF_DAY);
        c.clear(Calendar.MINUTE);
        c.clear(Calendar.SECOND);
        c.clear(Calendar.MILLISECOND);
        long today = c.getTimeInMillis();
        final long oneDay = 24 * 60 * 60 * 1000L;
        final long[] durations = new long[] { today - oneDay, today,
                today + 7 * oneDay, today + 30 * oneDay };
        final String[] labels = "Yesterday,Today,Last 7 days,Last 30 Days,More than 30 Days"
                .split(",");
        int pos = Arrays.binarySearch(durations, timeStamp);
        return labels[pos < 0 ? ~pos : pos];
    } 
```

顺便说一句，你真的应该只使用像[PrettyTime这样的库](http://ocpsoft.org/prettytime/)

# neo4j - Neo4j，哪个更好：多个关系还是一个属性？

> ID：12346201
> 
> 赞同：5
> 
> 时间：2012-09-10T06:14:01.700
> 
> 标签：neo4j

我是 neo4j 的新手，我正在建立一个社交网络。为了这个问题，我的图表由`user`和`event`节点组成，它们之间有关系。

用户可能会被邀请、加入、参加或主持一个活动，每个用户都是之前的一个子集。

我是否应该为每个状态/状态创建多个关系，或者与属性创建一个关系来存储当前状态是否有任何好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:57:43.767

据我了解，图形类型的查询比属性更容易/更有效地完成关系类型。

一种关系如何，但关系类型不同？

您可以使用 Cypher 查询与管道的多种类型的关系（以防您与不想在查询中获取的事件有其他关系）。

更新——添加控制台示例：[http ://console.neo4j.org/?id=woe684](http://console.neo4j.org/?id=woe684)

或者，您可以将旧关系保留在那里，而不必构建稍微复杂的查询，但这对于这个用例来说有点浪费。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-28T11:49:47.910

如果可能，在查询图表时，选择不同的关系类型而不是由属性限定的单一类型可能会对性能产生显着的积极影响。前一种方法比后者快至少 2 倍。当数据在高级缓存中并且使用本机 Java API 查询图形时，第一种方法的单跳遍历速度快 8 倍以上。

来源： http: [//graphaware.com/neo4j/2013/10/24/neo4j-qualifying-relationships.html](http://graphaware.com/neo4j/2013/10/24/neo4j-qualifying-relationships.html)

# javascript - 访问对象的嵌套属性

> ID：12346203
> 
> 赞同：0
> 
> 时间：2012-09-10T06:14:02.353
> 
> 标签：javascript, jquery

我必须访问对象的属性：

```
var jsonobj= {
    "first": {
        "second": 120
    }
} 
```

如何检查是否`second`可用？如果我们在这里检查，则`jsonobj.hasOwnProperty()`返回。`false`

如果我想将值`second`从 120 更改为 100，我该如何实现呢？我可以得到一个通用的解决方案，以便它适用于任意数量的层次结构吗？

**编辑**：如果我不知道房产名称怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:33:25.923

如果您想检查嵌套属性 [key] 的 [唯一路径] 是否存在，此功能可能会有所帮助：

```
function keyPathExists(obj,keypath){
  var keys = keypath.split('.'), key, trace = obj;
  while (key = keys.shift()){
    if (!trace[key]){
      return null
    };
    trace = trace[key];
  }
  return true;
}

//usages
var abcd = {a:{b:{c:{d:1}}}};
keyPathExists(abcd,'a.b.c.d'); //=> 1
keyPathExists(abcd,'a.b.c.d.e'); //=> null
if (keyPathExists(abcd,'a.b.c.d')){
 abcd.a.b.c.d = 2;
} 
```

请仔细阅读[@nnnnnn](https://stackoverflow.com/users/615754/nnnnnn)的评论，尤其是其中提供的[链接](http://benalman.com/news/2010/03/theres-no-such-thing-as-a-json/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:16:00.923

使用`typeof`：

```
if(typeof jsonobj.first == 'undefined'){
    jsonobj.first = {};
}
if(typeof jsonobj.first.second == 'undefined'){
    jsonobj.first.second = {};
}    
jsonobj.first.second = 100; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:16:13.007

要更改值，您可以使用“点”表示法 - 所以尝试：`jsonobj.first.second = 100`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:17:12.617

```
var jsonobj= {
              "first": {
                           "second": 120
                        }
           }

alert(jsonobj.first.second);

jsonobj.first.second = 100

alert(jsonobj.first.second);​ 
```

# c# - SSN 验证问题

> ID：12346205
> 
> 赞同：0
> 
> 时间：2012-09-10T06:14:07.783
> 
> 标签：c#, javascript, jquery, asp.net, jquery-validate

我正在开发一个 ASP.Net MVC 3 Web 应用程序，在该应用程序中我试图使用 Jquery Mask Plugin 验证 SSN 号码但是我想在编辑模式下打开表单时，如果我的 SSN 是，我不应该能够完成 SSN 123-45-6789 然后在编辑模式下我应该能够看到 XXX-XX-6789。我已经为此目的使用了掩码，但是当我在编辑模式下将 XXX-XX-6789 放在 SSN 上时，它给了我一个错误，即 SSN 中不允许使用字母，所以请建议我验证 SSN 并满足编辑模式的要求。提前致谢。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:55:08.933

我能想到的最简单的解决方案是在验证 SSN 的函数中添加这样的一行：

```
function validateSSN(ssnInput){
    if(ssnInput.value==ssn.defaultValue) return;

    //validate SSN
} 
```

该条件只会在用户更改 SSN 时检查它。

# closures - 如何使用谷歌关闭模板获取特定于语言的消息

> ID：12346206
> 
> 赞同：1
> 
> 时间：2012-09-10T06:14:25.767
> 
> 标签：closures, google-closure, google-closure-library, google-closure-templates

我正在尝试为我的项目实施国际化支持，为此人们建议使用 google Closure Templates。但我对闭包模板非常陌生。我正在尝试使用闭包模板获取特定于语言的消息，但没有进入 xlf 文件。如果有人知道如何使用闭包模板生成特定于语言的消息，请告诉我步骤。这对我很有帮助。

我的 .soy 文件代码如下。

```
{namespace poc} 
/** 
*Testing message translation 
*@param pageTitle 
*/ 
{template .translate} 
<HTML> 
<Head> 
<title>{$pageTitle} 
</title> 
</head> 
<div> 
{msg desc="Hello"}Hello{/msg} 
</div> 
</html> 
{/template} 

and generated .xlf content as bellow 

<?xml version="1.0" encoding="UTF-8"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2">
  <file original="SoyMsgBundle" datatype="x-soy-msg-bundle" xml:space="preserve" source-language="en" target-language="pt-BR">
    <body>
      <trans-unit id="2286494898080570401" datatype="html">
        <source>Thanks</source>
        <target/>
        <note priority="1" from="description">Says thanks</note>
      </trans-unit>
    </body>
  </file>
</xliff> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:17:49.363

我看到您已经使用 SoyMsgExtractor 创建了基础 xlf。接下来，您需要将此基础 xlf 翻译成您想要支持的语言。为每种语言创建一个文件。我使用了 Translution 的 xliff 退出器。[http://sourceforge.net/projects/eviltrans](http://sourceforge.net/projects/eviltrans)。

接下来，使用 SoyToJsSrcCompiler 可以为每种语言制作翻译大豆：

java -jar SoyToJsSrcCompiler.jar --shouldGenerateGoogMsgDefs --bidiGlobalDir 1 --messageFilePathFormat Filename_en-us.xliff --outputPathFormat FileName_fr.js *.soy

这将创建一个包含已编译大豆文件的 Filename._fr.js 文件。

包括这个文件而不是原始的大豆（或编译的）将创建一个本地化版本。

祝你好运！

\雷内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:29:38.120

我认为最简单的方法是制作（即从任何来源生成）一个单独的 js 文件，其中包含一个消息对象并通过 extern 声明的函数引用它。

它只是工作并且没有复杂的依赖关系。

# android - Facebook SSO 集成，注销方法实际上并没有将我从本机 FB 应用程序中注销

> ID：12346210
> 
> 赞同：0
> 
> 时间：2012-09-10T06:14:50.953
> 
> 标签：android, single-sign-on, facebook-android-sdk

当我从我的应用程序（第三方）登录时，我已经`SSO`为 facebook 实现了登录，并且登录适用于 FB（本机应用程序），现在问题（或者我不确定这是否受 FB 限制）是当我执行 logOut 时从我的应用程序（再次是第三方）它不会让我退出 Facebook。

如果有人有同样的经历，请对此有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:32:28.487

将接受 给出的答案`Krylez`，即无法以编程方式从本机 Facebook 应用程序中注销用户。

# java - 我可以将 Apache Derby 数据库与 Android 应用程序连接起来吗？

> ID：12346216
> 
> 赞同：7
> 
> 时间：2012-09-10T06:15:32.297
> 
> 标签：java, android, database-connection, derby

我正在准备一个与餐厅管理相关的 Android 应用程序。我需要将应用程序连接到另一个 Windows 应用程序（如 pos 软件）中。该 Windows 应用程序使用 Apache Derby 数据库。我可以将那个 windows pos 连接到我的 android 应用程序的前端吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-26T14:16:59.350

您不能使用 derby 客户端 jdbc 驱动程序直接从 android 连接到 derby 数据库，因为 derby 不支持 android，有关详细信息，请参阅[DERBY-4458](https://issues.apache.org/jira/browse/DERBY-4458)。

这样做的最好方法是修改 windows POS 以公开一个休息接口，并让你的 android 应用程序通过 REST 与 POS 对话。

如果您无法修改 POS 应用程序，并且如果 derby 在 POS 应用程序上以[客户端服务器模式运行，您可以编写另一个 Java 应用程序，该应用程序在使用](http://db.apache.org/derby/docs/10.10/getstart/cgsquck13780.html)[jdbc](http://db.apache.org/derby/docs/10.10/getstart/rgsquck30197.html)与 derby 通信的同一台机器上运行，并让新的 Java 应用程序公开一个 REST 接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T14:16:25.943

如果您的问题仍未解决，您可能想看看这个：[Awake SQL](http://www.awake-sql.org) Proves to be good solution on this。我正在自己尝试，看看它是否有效。

# core-data - 核心数据复杂 SQL 查询

> ID：12346219
> 
> 赞同：0
> 
> 时间：2012-09-10T06:15:40.387
> 
> 标签：core-data

我有以下 sql 查询，任何人都可以帮助我将其转换为 NSPredicate 以运行核心数据吗？

想不通...

```
SELECT title, address1, ( 6371 * acos( cos( radians(36.414376) ) 
* cos( radians( latitude ) ) * cos( radians( longitude ) - radians(28.155212) ) 
+ sin( radians(36.414376) ) * sin( radians( latitude ) ) ) ) 
AS distance 
FROM main 
HAVING distance < 0.5 
ORDER BY distance 
```

纬度和经度在实体主中是双倍的，

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:56:23.550

简短的回答是你不能。

核心数据并且`NSPredicate`不允许您执行数学运算。

但是，您可以做的是编写一个`NSPredicate`返回框内的每个地址的 a。

您需要做的是预先计算最小纬度和经度以及最大纬度和经度。

然后你`NSPredicate`变成：

```
CGFloat minLat = ...;
CGFloat maxLat = ...;
CGFloat minLong = ...;
CGFloat maxLong = ...;
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(latitude < %f AND latitude > %f) AND (longitude < %f AND longitude > %f)", minLat, maxLat, minLong, maxLong]; 
```

然后，从该查询的结果中，您可以缩小到一个圆圈内以删除角落中的项目。的盒子。

# java - 为什么我的 Fragment 中的方向更改后我的 ListView 变为空？

> ID：12346220
> 
> 赞同：3
> 
> 时间：2012-09-10T06:15:43.503
> 
> 标签：java, android, android-fragments

在我的一个中，我`Fragments`有一个从 parent 调用的方法`Activity`。该方法没什么特别的，它只是将 my 滚动`ListView`到一个位置。

```
public void scrollToSomething() {
    mListView.smoothScrollToPosition(The position I supply);
} 
```

当我最初调用这个方法时，它就像我期望的那样工作，但是当我旋转我的设备并再次调用它时，我`NullPointerException`从我的`ListView`. 我非常迷茫为什么会这样。我试过打电话`setRetainInstance(true)`。在调用该方法之前，我尝试检查 my`ListView`是否为 null，如果是，则再次对其进行初始化，但这也不起作用。我试过`onCreateView`用几种不同的方式改变我的，想也许那里出了问题。

**onCreateView**

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    /* The View for the fragment's UI */
    final ViewGroup mRootView = (ViewGroup)inflater.inflate(R.layout.fragment_list_base,
            container, false);
    /* Initialize our ListView */
    mListView = (ListView)mRootView.findViewById(R.id.fragment_list_base);
    return mRootView;
} 
```

使用简单`Fragment`的. 我已经尝试仔细查看我和父母的方法，看看我是否调用了可能导致错误的东西，但没有什么特别突出的。我不确定我遇到的是某种错误，还是我只是忽略了某些东西。任何帮助或建议都会是巨大的。我不完全确定还要添加什么，因为我只是很迷茫为什么会发生这种情况，但是如果有人有问题，我会发布您认为合适的任何代码。`ViewPager``FragmentStatePagerAdapter``onDestroy``Fragment``Activity`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T06:29:24.557

这可能会帮助你

如果您`android:targetSdkVersion="12"`或更少：

```
android:configChanges="orientation|keyboardHidden"> 
```

如果您`android:targetSdkVersion="13"`或更多：

```
android:configChanges="orientation|keyboardHidden|screensize"> 
```

# javascript - 防止表单自动刷新

> ID：12346221
> 
> 赞同：0
> 
> 时间：2012-09-10T06:15:50.230
> 
> 标签：javascript, cordova, jquery-mobile

我有一个简单的表格。我正在处理它的提交。提交时，我的 Android 设备出现问题。页面刷新，没有任何反应。第二次点击可以解决问题并发送 AJAX 调用。你知道如何解决它吗？没有语法错误。它无需在我的浏览器中刷新即可工作。它在 Android 上刷新。

这是一个代码：

```
<form method="post" name="logowanie" data-ajax="false" id="form">

            <label for="email">E-mail:</label>
            <input type="email" name="email" id="email"/>   
            <label for="haslo">Hasło:</label>
            <input type="password" name="haslo" id="haslo"/>

            <button id="submit" type="submit" data-theme="e">Zaloguj</button>

</form> 
```

我正在以这种方式处理表格：

```
 $(document).ready(function () {

    $('form').on('submit', function (e) {

    Ajax call

    return false;
   }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:37:53.267

缺少一些“）”。

```
<script>
 $(document).ready(function () {

    $('form').on('submit', function (e) {

    //Ajax call
    alert('test');
    return false;
   });  
});

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:01:23.127

尝试： -

```
 e.preventDefault();
  e.stopImmediatePropagation(); 
```

......

```
 <script>
  $(document).ready(function () {
    $('form').on('submit', function (e) {
     e.preventDefault();
     e.stopImmediatePropagation();
     alert('test');
    return false;
    });  
  });
 </script> 
```

# c# - 我们如何区分 c# 和 silverlight 实用程序类和 ui？

> ID：12346227
> 
> 赞同：0
> 
> 时间：2012-09-10T06:16:14.553
> 
> 标签：c#, silverlight

任何人请告诉我如何区分实用程序类、ui 控件（ui 渲染）和包部署方面的 c# 和 silverlight？

我需要知道所有这些细节，请任何人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:24:02.320

[MSDN](http://msdn.microsoft.com/en-us/library/cc838194%28v=vs.95%29.aspx)上列出了开箱即用的 Silverlight 类- 各种 C# 类库也是如此。

假设您的问题来自想知道 Silverlight 中哪些 C# 类不可用（我记得很多）

# ios - 如何在 iOS 中获取大量电池信息？

> ID：12346230
> 
> 赞同：4
> 
> 时间：2012-09-10T06:16:29.713
> 
> 标签：ios, battery, uidevice

我想知道是否可以接收有关电池的信息，例如：容量（mA）、电​​压（V）、iOS 中的循环计数？

我知道 UIDevice 类，但电池电量不是我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-30T00:04:54.343

试试[UIDeviceListener](https://github.com/eldoogy/PowerData)`UIDevice` ，它基本上是在不使用任何私有 API的情况下窃取整个电池数据字典。它暴露了大量信息：

```
{
    AdapterDetails =     {
        Amperage = 1000;
        Description = "usb host";
        FamilyCode = "-536854528";
        PMUConfiguration = 1000;
        Watts = 5;
    };
    AdapterInfo = 16384;
    Amperage = 1000;
    AppleRawCurrentCapacity = 1279;
    AppleRawMaxCapacity = 1275;
    AtCriticalLevel = 0;
    AtWarnLevel = 0;
    BatteryData =     {
        BatterySerialNumber = REDACTED;
        ChemID = 355;
        CycleCount = 524;
        DesignCapacity = 1420;
        Flags = 640;
        FullAvailableCapacity = 1325;
        ManufactureDate = REDACTED;
        MaxCapacity = 1273;
        MfgData = REDACTED;
        QmaxCell0 = 1350;
        StateOfCharge = 100;
        Voltage = 4194;
    };
    BatteryInstalled = 1;
    BatteryKey = "0003-default";
    BootBBCapacity = 52;
    BootCapacityEstimate = 2;
    BootVoltage = 3518;
    CFBundleIdentifier = "com.apple.driver.AppleD1815PMU";
    ChargerConfiguration = 990;
    CurrentCapacity = 1275;
    CycleCount = 524;
    DesignCapacity = 1420;
    ExternalChargeCapable = 1;
    ExternalConnected = 1;
    FullyCharged = 1;
    IOClass = AppleD1815PMUPowerSource;
    IOFunctionParent64000000 = <>;
    IOGeneralInterest = "IOCommand is not serializable";
    IOInterruptControllers =     (
        IOInterruptController34000000,
        IOInterruptController34000000,
        IOInterruptController34000000,
        IOInterruptController34000000
    );
    IOInterruptSpecifiers =     (
        <03000000>,
        <26000000>,
        <04000000>,
        <24000000>
    );
    IOMatchCategory = AppleD1815PMUPowerSource;
    IOPowerManagement =     {
        CurrentPowerState = 2;
        DevicePowerState = 2;
        MaxPowerState = 2;
    };
    IOProbeScore = 0;
    IOProviderClass = AppleD1815PMU;
    InstantAmperage = 0;
    IsCharging = 0;
    Location = 0;
    Manufacturer = A;
    MaxCapacity = 1275;
    Model = "0003-A";
    Serial = REDACTED;
    Temperature = 2590;
    TimeRemaining = 0;
    UpdateTime = 1461830702;
    Voltage = 4182;
    "battery-data" =     {
        "0003-default" = <...>;
        "0004-default" = <...>;
        "0005-default" = <...};
    "built-in" = 1;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T06:54:10.737

我可能错了，但使用公共 API 这是不可能的。根据**[`UIDevice`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/doc/uid/TP40006902-CH3-SW28)**文档，您似乎最多只能获取电池电量、状态并启用电池监控。

**2019 年 2 月 15 日更新：**看起来 iOS [`UIDevice`](https://developer.apple.com/documentation/uikit/uidevice/1620042-batterylevel)API 现在允许开发人员访问设备的电池电量。哇！它目前公开了 4 个不同的 API。从外观上看，这些并不是“私有的”，换句话说，开发人员可以安全地使用它们，而无需 Apple 阻止您的应用从 AppStore 访问。

获取设备电池状态

1.  `var batteryLevel: Float`（设备的电池电量）。
2.  `var isBatteryMonitoringEnabled: Bool`（一个布尔值，指示是否启用电池监控（true）或不启用（false））。
3.  `var batteryState: UIDevice.BatteryState`（设备的电池状态）。
4.  `enum UIDevice.BatteryState`（设备的电池电量状态）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-11T22:52:10.510

可以使用公共 API 获取电池容量和电压，并且应用商店也允许这样做。链接在这里 -

1.  应用商店：[https ://itunes.apple.com/us/app/system-monitor-ultimate/id740765454?mt=8](https://itunes.apple.com/us/app/system-monitor-ultimate/id740765454?mt=8)
2.  github：[https ://github.com/Asido/SystemMonitor](https://github.com/Asido/SystemMonitor)[![在此处输入图像描述](../Images/1143225c6e0f8dd97e18a050930e92e5.png)](https://i.stack.imgur.com/eb1wu.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-23T09:33:34.437

是的，有可能……通过使用私有框架 iosDiagnosticsupport.Framework。
在做了一些测试之后，我有一些关于电池的数据，而不是 iDevice 的整体日志。以下是一些可能对您有所帮助的链接... [iOS 诊断第 3 部分](http://www.lyonanderson.org/blog/2014/11/13/ios-diagnostics-part-3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-02T18:39:18.973

查看[JSystemInfoKit](https://jbot-42.github.io/systeminfokit.html)库。

您想先导入 IOKit 框架（从此处获取 .framework 文件*/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/System/Library/Frameworks/IOKit.framework* ) 和iOS 项目中的IOKit 标头（从[此处获取这些文件）。](http://www.tateu.net/repo/files/IOKit.zip)

[在这里](https://github.com/jBot-42/JSystemInfoKit/blob/3d8a98d7d1b2a1bff4ff09716d9365e2e8948905/SystemInfoKit/JSKSystemMonitor.m#L346)，您可以找到获取大量电池信息所需的方法。

另外， *IOPSCopyPowerSourcesInfo*（来自*IOPowerSources.h*）返回一个 NSDictionary ，其中包含更多信息，例如*电池健康*。

# yii - Yii:: 我可以在控制器中获取视图的值吗

> ID：12346231
> 
> 赞同：0
> 
> 时间：2012-09-10T06:16:41.667
> 
> 标签：yii

我创建一个表单使用CActiveForm 来创建一个表单。

```
<?php $form = $this->beginWidget('CActiveForm', array(
    'id'=>'report-form',
    'enableAjaxValidation'=>false,
    'enableClientValidation'=>true,
    'focus'=>array($exps[0],'productname'),
)); ?> 
```

当我在控制器中调用 ajax 处理程序时。我想创建一个新的 html 字符串来更新表单。

但我找不到访问价值 $form 的方法！

我可以从视图中获取控制器中的值吗？

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:33:36.517

您可以在控制器上创建表单对象并通过 render() 函数的第二个参数将其传递给视图。

```
// inside controller
$form = $this->beginWidget('CActiveForm', array(
    'id'=>'report-form',
    'enableAjaxValidation'=>false,
    'enableClientValidation'=>true,
    'focus'=>array($exps[0],'productname'),
));

$this->render($myView, array(
    'form' => $form,
)); 
```

# java - 如何在 Solr 中获取最后一个索引记录？

> ID：12346240
> 
> 赞同：10
> 
> 时间：2012-09-10T06:17:51.493
> 
> 标签：java, apache, solr, indexing, solrj

我想知道如何获取/搜索 Apache Solr 中的最后一个索引记录..？

当现有记录被更新时，它会进入所有记录的末尾......所以我想获得最后一条索引记录。

谢谢..

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-10T06:35:03.927

您可以在 Solr 模式中添加一个“时间戳”字段，以便在添加时将当前日期/时间放入记录中。

```
<field name="timestamp" type="date" indexed="true" stored="true" default="NOW" multiValued="false"/> 
```

然后，对该字段进行降序排序，第一条记录将是最新的。像这样的查询应该这样做：-

[http://localhost:8080/solr/core-name/select/q=*%3A*&start=0&rows=1&sort=timestamp+desc](http://localhost:8080/solr/core-name/select/q=*%3A*&start=0&rows=1&sort=timestamp+desc)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-10T07:20:12.607

您可以使用以下查询按索引顺序对文档进行排序。

```
http://localhost:8983/solr/select?q=*:*&sort=_docid_ asc

or 

http://localhost:8983/solr/select?q=*:*&sort=_docid_ desc 
```

# android - 关闭另一个活动的弹出窗口

> ID：12346244
> 
> 赞同：0
> 
> 时间：2012-09-10T06:18:14.003
> 
> 标签：android, android-intent

我正在编写一个具有活动的应用程序，并且正在启动一个弹出窗口（弹出窗口我已经在另一个不是活动的类中实现）。在我的主要活动中，我有代码在发生事件时显示弹出窗口。我能够成功地做到这一点。但是当我收到另一个事件时，我需要取消弹出窗口。（我只会在主要活动中得到这个事件）。当我收到事件时，如何完成主要活动的弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:23:28.120

在您创建 popUP(dialog) 的类中创建一个公共方法，并在其中写入

```
public void dismissDialog(){
    dialog.dismiss();
} 
```

然后每当你想删除对话框调用这个方法......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:24:16.917

如果此弹出窗口是一个对话框，您可以使用

`dialog.cancel();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:29:26.507

```
final AlertDialog.Builder aBuilder;

//constructor(Context c){//mContext = c;}

public void showMessage(final String title, final String s) { 

        aBuilder = new AlertDialog.Builder(mContext); 
        aBuilder.setTitle(title); 
        aBuilder.setIcon(R.drawable.ic_launcher); 
        // aBuilder.setIcon(R.drawable.icon); 
        aBuilder.setMessage(s);
    }

public void dismissMessage() { 
        aBuilder.dismiss();
    } 
```

# javascript - 使用 jQuery 创建表单的克隆

> ID：12346248
> 
> 赞同：2
> 
> 时间：2012-09-10T06:18:30.527
> 
> 标签：javascript, jquery, forms, clone

使用 jQuery，当在克隆中选择不同的值时，如何在不修改原始表单的情况下创建表单的克隆。目前，当在克隆表单中选择一个值时，返回的结果会添加到克隆的结果以及原始结果中。我只想让结果出现在每个独特的表单中。这是我所拥有的：

```
 <script>
      $(document).ready(function() {

         shows / hides results based on selection

         $(".color-select").live("change" ,function(){
            if($(this).val() == 'red'){ 
              $('.red').removeClass('hide');

               // toggles sub menus
              $(this).parent('.controls').find('.submenu-select').removeClass('hide');
            }

            if($(this).val() == 'orange'){ 

              $('.orange').removeClass('hide');
              $(this).parent('.controls').find('.submenu-select').addClass('hide');
            }
            if($(this).val() == 'yellow'){ 
              $('.yellow').removeClass('hide');
              $(this).parent('.controls').find('.submenu-select').addClass('hide');
            }
            if($(this).val() == 'green'){ 
              $('.green').removeClass('hide');
              $(this).parent('.controls').find('.submenu-select').addClass('hide');
            }
          });

; 
         // Duplicates category select menu 

           $(".add-color").click(function(){
          $(".color-category").clone().removeClass('color-category').appendTo("#we-want-to").find('.submenu-select').addClass('hide');

        });

        $(".add-color-alternate").click(function(){
          $(".color-category-alternate").clone().removeClass('color-category-alternate').appendTo("#we-want-to").find('.submenu-select, .results-table').addClass('hide');

        }); 
```

这是一些 html [http://jsfiddle.net/mckenney42south/Z4yFs/的小提琴](http://jsfiddle.net/mckenney42south/Z4yFs/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:32:19.763

您在表单的原始实例和克隆实例之间看到 dickiness 的原因有两个：

*   表单依赖于`name`正确提交的属性。在某些情况下，提交带有重复`name`字段的表单会导致将数组发送到服务器；在其他情况下，它将覆盖。

*   没有看到你的表单的其余部分——小提琴不是特别有用，抱歉——在我看来，你的 jQuery 选择器很可能也从克隆返回元素。为了解决这个问题，您可以给表单的每个实例一个唯一的 ID，并将您的表单更改逻辑与它自己的`$('#form-n')`对象链接起来，其中“n”将替换为表单的顺序 ID 号。

# c++ - 视觉辅助 x 深色主题

> ID：12346254
> 
> 赞同：4
> 
> 时间：2012-09-10T06:18:59.343
> 
> 标签：c++, visual-studio-2010, visual-assist

我已经安装了视觉辅助 X，我使用 Visual Studio 进行 C++ 开发。但是，我不确定如何启用此处提到的深色主题配色方案[http://www.wholetomato.com/products/features/color.asp](http://www.wholetomato.com/products/features/color.asp)？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T07:09:04.723

根据链接上的文档，如果您有深色背景并按下“使用默认值”按钮，颜色将默认为适合深色方案的颜色：

> 在安装时或在 VA 选项对话框中按使用默认值时选择的方案取决于您当前的 IDE 颜色方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-23T16:48:00.847

据称，您可以[在注册表中设置一个值](https://docs.wholetomato.com/default.asp?W494)来修复它：

> 您可以通过设置以下注册表 DWORD 值来诱使 Visual Assist 做出不同的决定，例如假设您的主题与 Dark 主题相似：
> 
> HKCU\Software\Whole Tomato\Visual Assist X\\VsThemeColorBehavior

设置为 2 以假设未知主题为黑暗。

但是，我找不到它不适用于我的 Visual Assist 版本（需要 2023，但不适用于 2258）。此外，当我打开 VAssist Options 时，注册表值重置为 0。

我可以让它使用深色的唯一主题是使用浅色编辑器的“深色”（！？）。

# javascript - 动态编辑表单动作路径

> ID：12346255
> 
> 赞同：0
> 
> 时间：2012-09-10T06:19:10.340
> 
> 标签：javascript

我想动态编辑表单操作 url。我当前的代码就像

```
 function Fbsubmit()
      {
    var cont=document.getElementById("viewcontent").value;
    var title=document.getElementById("noteheadid").value;
    var loc='http://122.98.15.171/xyx/phptest.php'+'?title='+title+'&cont='+cont;
    location.href=loc;
      } 
```

这里的问题是用户将能够在加载页面时更改 url。任何人都可以建议将其转换为 post 方法的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:21:32.897

使用以下方法动态更改表单`method`属性：`setAttribute()`

`document.getElementById("myForm").setAttribute("method", "post");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:23:51.177

如果使用 jQuery 是可以的，你可以很容易地做到这一点：

```
$.post('http://122.98.15.171/xyx/phptest.php',
    {
        title: $('#noteheadid').val(),
        cont: $('#viewcontent').val(),
    }
); 
```

**注意**：您*不需要*jQuery 来执行上述操作。它只是使它更容易和更具可读性。

# c++ - C++ 日期和时间

> ID：12346260
> 
> 赞同：9
> 
> 时间：2012-09-10T06:19:38.887
> 
> 标签：c++, datetime

我正在用 C++ 开发约会应用程序，并想使用一些日期和时间功能。

在谈论日期和时间时只使用字符串更容易，还是我应该编写或获取日期/时间类？

我想编写一个包含约会时间和日期的约会类。编写完类文件后，我想将其集成到 C++ 构建器中的表单应用程序中。

我看到有一个 TMonthCalendar 控件。我想在制作表单应用程序时使用此控件。因此，该控件使用什么格式的日期？我想在制作类时使用与控件相同的类型，以便我可以轻松地将它集成在一起。

**更新**

我发现它使用 TDateTime 类型。我的问题是：我需要使用什么包含语句才能在控制台应用程序中使用它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-10T06:43:30.737

C++11 包括用于日期/时间表示的便利数据类型和函数，以及它们到字符串的转换。

有了它，你可以做这样的事情（我认为这很不言自明）：

```
#include <iostream>
#include <iomanip>
#include <ctime>

int main()
{
    std::time_t t =  std::time(NULL);
    std::tm tm    = *std::localtime(&t);
    std::cout << "Time right now is " << std::put_time(&tm, "%c %Z") << '\n';
} 
```

特别是，有数据类型`std::time_t`和，以及用于漂亮打印`std::tm`的非常好的 IO 操纵器。`std::put_time`它使用的格式字符串在[cppreference](http://en.cppreference.com/w/cpp/io/manip/put_time)中有详细记录。

这也应该与语言环境很好地配合使用，例如对于日本时间/日期格式：

```
std::cout.imbue(std::locale("ja_JP.utf8"));
std::cout << "ja_JP: " << std::put_time(&tm, "%c %Z") << '\n'; 
```

`chrono`C++11 标准库中包含的库还允许您方便地进行简单的时间/日期运算：

```
std::chrono::time_point<std::chrono::system_clock> now;
now = std::chrono::system_clock::now();
/* The day before today: */
std::time_t now_c = std::chrono::system_clock::to_time_t(
         now - std::chrono::hours(24)); 
```

**不幸的是，并非所有这些都在所有编译器中都可用。**特别是，该`std::put_time`功能似乎在 GCC 4.7.1 中尚不可用。为了让我最初给出的代码能够工作，我不得不使用稍微不那么优雅的`std::strftime`函数：

```
#include <iostream>
#include <iomanip>
#include <ctime>

int main()
{
    std::time_t t =  std::time(NULL);
    std::tm tm    = *std::localtime(&t);

    constexpr int bufsize = 100;
    char buf[bufsize];
    if (std::strftime(buf,bufsize,"%c %Z",&tm) != 0)
      std::cout << "Time right now is " << buf << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-16T15:44:55.033

> 在谈论日期和时间时只使用字符串更容易吗？

不可以。即使是简单的事情，比如如果你有会议开始和结束日期计算持续时间，也需要考虑复杂的事情，比如闰年。

> 我应该写还是上日期/时间课程？

不。编写一个日期/时间库看起来很简单，但要正确却相当困难，而且**极容易出错**。此外，其他人以前也这样做过[——boost 是一系列享有盛誉的免费图书馆](http://www.boost.org/doc/libs/1_59_0/doc/html/date_time.html)。事实上，还有很多其他人，以至于新手程序员想要编写一个日期/时间库，但[在](http://thedailywtf.com/articles/Failure-to-Leap)[这方面却](http://www.thedailywtf.com/articles/A-Little-More-Simplified)[失败了，这已成为](http://thedailywtf.com/articles/A-Waste-of-Time) [陈词滥调](http://thedailywtf.com/articles/Time-Table-Overload) 。

> 我看到有一个 TMonthCalendar 控件。[...] 我发现它使用 TDateTime 类型。

依赖与您的 GUI 框架相同的日期/时间类是可以的，但是如果您稍后更改 GUI 框架，它可能会成为一个问题。由于稍后将一个合理的日期/时间库换成另一个合理的日期/时间库并不难，因此只需使用您认为易于使用的一个即可。

# java - 从 Ajax 响应中获取请求参数

> ID：12346264
> 
> 赞同：0
> 
> 时间：2012-09-10T06:19:47.213
> 
> 标签：java, ajax, request

我每 30 秒对 java 方法进行一次 ajax 调用。我在 java 方法中设置了几个请求参数。

如何从 ajax 响应中获取它们。

```
<script LANGUAGE="JavaScript1.2">

var tId = window.setTimeout(function () { 
location.reload(true);
alert('<s:property value="#disableReload" />');
if('<s:property value="#disableReload" />' == "true"){
    alert("clearing");
}else{
    var url = 'moveETHAction_fetchExecutorData.action';
    var form = document.getElementById('moveForm');
    var params = Form.serialize(form) + '&ms=' +  new Date().getTime();
    form.action = "fetchExecutorData";
    var myAjax = new Ajax.Request(url, {method: 'post', parameters: params, onComplete: showResponseAction} );
}
}, 30 * 1000);

function showResponseAction(originalRequest){
alert(originalRequest.responseText);
    alert('<s:property value="#request[\'DISABLE_FLOW'\]" />');
document.getElementById('actionChange').innerHTML = originalRequest.responseText;
}
</script> 
```

在 Java 方法中，我正在设置此参数

> request.setAttribute(GenericConstants.DISABLE_FLOW, false);

但我没有从 ajax 获得更新的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:41:16.480

对服务器端的任何更改`HttpServletRequest`在客户端都将不可见。此外`setAttribute`方法不会影响传入的`HTTP`请求字符串。`HttpServletRequest`它是在服务器端传递信息的附加存储。

您需要以结构化的方式将信息添加到现有响应中（JSON 更适合您的客户端立即转换为 javascript 对象并访问响应中的各个值）。希望这可以帮助。

# php - Doctrine2 产品和特征映射问题

> ID：12346265
> 
> 赞同：0
> 
> 时间：2012-09-10T06:20:03.610
> 
> 标签：php, orm, doctrine-orm, doctrine-query

我正在制作一个需要成为多商店解决方案的电子商务解决方案。在建立产品及其功能之间的关联时，我被严重卡住了。由于它是一个多商店解决方案**，我需要每个产品的动态功能可能性**。我想出了三个实体：Product、FeatureKind 和 FeatureValue。

*   FeatureKind 具有基本特征名称，如**Size、Color、Style**等。还具有**与 FeatureValue 实体的 M:M 连接**。
*   FeatureValue 显然包含 FeatureKind 的值，例如**Small、Medium、Green、Red、Blue、Full-Sleeved**等。
*   **产品实体通过 M:M 关联连接到 FeatureKind**。

我在这种类型的结构中遇到了一些问题：

*   如果我有一个**只有 Small size**的 Product 怎么办，它也不应该在选项中显示 Medium 。如果一个产品只有绿色，它不应该同时显示红色和绿色，等等。
*   其次，如果我的产品**只有小号绿色和大号红色**怎么办？这将如何解决？

我确定我需要同时改变我的结构和架构，幸运的是该项目在 Symfony2 中，我只需要制作产品包。

我很乐意在这里发布实体，但我的问题是概念而不是代码。如果您需要查看它，只需发表评论，我将编辑问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:15:55.577

根据您的用例，功能实体应该是 STI。您可以创建从特征实体分支出来的不同实体，以映射不同的特征，例如颜色、大小或体积。您需要创建一个连接表，以在 M:M 关系下将 Product 实体与 Feature 实体连接起来。

[在此处阅读有关 STI 的更多信息。](http://doctrine-orm.readthedocs.org/en/latest/reference/inheritance-mapping.html?highlight=single%20table)

```
/**
 * @Entity
 * @InheritanceType("SINGLE_TABLE")
 * @DiscriminatorColumn(name="discr", type="string")
 * @DiscriminatorMap({"feature" = "Feature", "color" = "Color", "size" = "Size"})
 */
class Feature
{
    // ...
}

/**
 * @Entity
 */
class Color extends Feature
{
    // ...
} 
```

# visual-studio-2010 - 如何将宏添加到 Visual Studio 项目？

> ID：12346267
> 
> 赞同：8
> 
> 时间：2012-09-10T06:20:20.323
> 
> 标签：visual-studio-2010, visual-studio

我需要向 Visual Studio 项目添加一个宏，以便我可以使用此宏来设置项目的属性。

![在此处输入图像描述](../Images/0e8d0ed1c23f82d218b37a69079de2ed.png)

例如，我可以将 192.168.1.50 替换为一个名为 $(RemoteComputer) 的宏。

我可以这样做吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T08:57:47.990

两种选择：

1.  将其设为 PATH 或 APPDATA 之类的环境变量（我的电脑-> 属性-> 高级-> 环境变量）。请注意，您需要重新启动 MSVC，否则它将找不到新的环境变量。
2.  如果您只想为单个项目设置设置，请打开`.vcxproj`文件并转到`Project/PropertyGroup[Label="Globals"]`. 在此处添加一个新标签，例如 FooBar，它将在该项目的工作室设置中显示为 $-macro。

# jasper-reports - 报表不同格式的不同分页

> ID：12346268
> 
> 赞同：3
> 
> 时间：2012-09-10T06:20:23.003
> 
> 标签：jasper-reports

使用 iReport，我正在生成要以多种格式查看的报告。我是否可以仅**忽略**HTML 等特定格式的分页，而让`true`其他格式忽略分页？

随着`isIgnorePagination="false"`HTML 预览出现在块中。但是，将其设置为`true`使 PDF 输出单页。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T21:46:59.437

为什么是的，你可以。`IS_IGNORE_PAGINATION`在导出报告之前添加具有适当值的 。您可以在运行时根据您的导出格式设置该值。

```
params.put("IS_IGNORE_PAGINATION", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T13:02:43.510

我找到了一个解决这个问题的方法：

```
 paramaters.put("fromDate", fromDate);
        paramaters.put("toDate", toDate);
        if (!output.equals("pdf"))
        {
        paramaters.put("IS_IGNORE_PAGINATION", true);
        }
        else
            paramaters.put("IS_IGNORE_PAGINATION", false);

        JasperPrint jasperPrint = null;
        jasperPrint = JasperFillManager.fillReport(CompiledReport, paramaters, connection);

        if (output.equals("html")) {
            generateHtmlResponse(response, jasperPrint);
        } else if (output.equals("pdf")) {
            generatePdfResponse(response, jasperPrint);
        } else if(output.equals("excel")) {
            generateXLResponse(response, jasperPrint);
        } 
```

# iphone - 在 iPhone 的 UIImageView 中添加 UITextField 中的问题？

> ID：12346269
> 
> 赞同：0
> 
> 时间：2012-09-10T06:20:30.400
> 
> 标签：iphone, ios, uiimageview, uitextfield

目前我在 iPhone 应用程序中工作，使用 UIImageView 在屏幕上设置背景图像，然后在 UIImageView 中添加 UITextField，然后我运行应用程序，UITextField 无法启用，如何启用它？请帮我

提前致谢

我试过这个：

```
UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
imageView.image=[UIImage imageNamed:@"2ndscreenback.png"];

Daystext =[[UITextField alloc]initWithFrame:CGRectMake(57, 122, 171, 31)];
Daystext.borderStyle=UITextBorderStyleRoundedRect;
Daystext.delegate=self;
Daystext.userInteractionEnabled=YES;
[imageView addSubview:Daystext];
[self.view addSubview:imageView]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:27:28.507

只需在您的代码中添加以下行

```
imageView.userInteractionEnabled = YES; 
```

像这样的意思

```
UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
imageView.image=[UIImage imageNamed:@"2ndscreenback.png"];

Daystext =[[UITextField alloc]initWithFrame:CGRectMake(57, 122, 171, 31)];
Daystext.borderStyle=UITextBorderStyleRoundedRect;
Daystext.delegate=self;
Daystext.userInteractionEnabled=YES;
imageView.userInteractionEnabled = YES;
[imageView addSubview:Daystext];
[self.view addSubview:imageView]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:34:30.837

试试这样

```
UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
imageView.image=[UIImage imageNamed:@"2ndscreenback.png"];
imageView.userInteractionEnabled=YES;
[self.view addSubview:imageView];

Daystext =[[UITextField alloc]initWithFrame:CGRectMake(57, 122, 171, 31)];
Daystext.borderStyle=UITextBorderStyleRoundedRect;
Daystext.delegate=self;

[imageView addSubview:Daystext]; 
```

您可以在 imageview 上获取文本字段....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:24:51.300

试试这个：

```
UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
imageView.image=[UIImage imageNamed:@"2ndscreenback.png"];

Daystext =[[UITextField alloc]initWithFrame:CGRectMake(57, 122, 171, 31)];
[self.view addSubview:imageView];
Daystext.borderStyle=UITextBorderStyleRoundedRect;
Daystext.delegate=self;
Daystext.userInteractionEnabled=YES;
[self.view addSubview:Daystext]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:24:59.960

我认为最好为您的 UITextFild 设置背景图像，如下所示：

```
myTextField.borderStyle = UITextBorderStyleNone;
myTextField.background = [UIImage imageNamed:@"back.png"]; 
```

或者像这样

```
UIImageView *myView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"back.png"]];
[myTextField  setRightView:myView];
[myTextField  setRightViewMode:UITextFieldViewModeAlways]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T06:26:34.067

```
UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
imageView.image=[UIImage imageNamed:@"2ndscreenback.png"];

Daystext =[[UITextField alloc]initWithFrame:CGRectMake(57, 122, 171, 31)];
[self.view addSubview:imageView];
Daystext.borderStyle=UITextBorderStyleRoundedRect;
Daystext.delegate=self;
Daystext.editable = YES;
Daystext.userInteractionEnabled=YES;
[self.view addSubview:Daystext]; 
```

试试这个。希望它对你有用！

# iphone - 在 settings.bundle 初始化之前设置默认值的解决方法

> ID：12346270
> 
> 赞同：0
> 
> 时间：2012-09-10T06:20:37.657
> 
> 标签：iphone, objective-c, ios5, settings.bundle

（我是 IOS 和 Objective-C 的新手，所以请原谅任何误用的术语...）用户导航到其 IOS 设备上的设置，它不会加载默认值。我读过很多帖子，解释说应用程序应该创建自己的默认值，直到 settings.bundle 被“初始化”。

为此，我编写了一些读取 settings.bundle 并相应地创建数组的代码。但是如果 settings.bundle 尚未初始化，它会创建一个默认数组以在此期间使用。我怀疑我的问题在于我使用逻辑 AND 运算符的以下代码行（可能不正确......）：

```
if (!([swimtypeendurance isEqualToString:@"ON"]) && !([swimtypeendurance isEqualToString:@"OFF"])) 
```

问题是我无法得到上面 if 语句的真实结果，我的应用程序总是执行“else”。我对 settings.bundle 的理解是，如果它们没有被初始化，那么开关既不是 ON 也不是 OFF，就好像它没有价值一样。因此，我正在测试游泳类型耐力的字符串是否既不是 ON 也不是 OFF，换句话说，如果它不是 ON 并且它不是 OFF - 因此我尝试使用 ! 和 ＆＆...

也许解释我在做什么的更好方法是：我正在从 settings.bundle 测试我的一个设置的值，看看它是打开还是关闭。如果它是两种状态之一，那么我假设设置包已经初始化并且可以使用所有设置，如果不是，即它是无状态的，那么我创建一个要使用的数组，直到用户初始化 settings.bundle。

以下是为问题提供上下文的完整代码片段：

```
NSMutableArray* arrayofswimtypes = [NSMutableArray arrayWithCapacity:15];
    NSString *swimtt750 = [defaults boolForKey:kswimtypett750mKey]? @"ON" : @"OFF";
    if ([swimtt750 isEqualToString:@"ON"]) {
        swimTypeTt750m = [[NSString alloc] initWithFormat:@"Time Trial - 750m"];
        [arrayofswimtypes addObject:[[NSString alloc] initWithFormat:@"%@", swimTypeTt750m]];
    }
    NSString *swimtt1500 = [defaults boolForKey:kswimtypett1500mKey]? @"ON" : @"OFF";
    if ([swimtt1500 isEqualToString:@"ON"]) {
        swimTypeTt1500m = [[NSString alloc] initWithFormat:@"Time Trial - 1500m"];
        [arrayofswimtypes addObject:[[NSString alloc] initWithFormat:@"%@", swimTypeTt1500m]];
    }

    [arrayofswimtypes addObject:[[NSString alloc] initWithFormat:@"General Session"]];

    NSString *swimtypedrills = [defaults boolForKey:kswimtypedrillsKey]? @"ON" : @"OFF";
    if ([swimtypedrills isEqualToString:@"ON"]) {
        swimTypeDrills = [[NSString alloc] initWithFormat:@"Drills Session"];
        [arrayofswimtypes addObject:[[NSString alloc] initWithFormat:@"%@", swimTypeDrills]];
    }
    NSString *swimtypeendurance = [defaults boolForKey:kswimtypeenduranceKey]? @"ON" : @"OFF";
    if ([swimtypeendurance isEqualToString:@"ON"]) {
        swimTypeEndurance = [[NSString alloc] initWithFormat:@"Endurance Session"];
        [arrayofswimtypes addObject:[[NSString alloc] initWithFormat:@"%@", swimTypeEndurance]];
    }

    //Place an if-else statement in here to load a default array if the user has not been to settings and initialised the settings.bundle
    if (!([swimtypeendurance isEqualToString:@"ON"]) && !([swimtypeendurance isEqualToString:@"OFF"])) {
        swimSessTypesArray = [[NSMutableArray alloc] initWithObjects:[[NSString alloc] initWithFormat:@"Time Trial - 750m"],
                              [[NSString alloc] initWithFormat:@"Time Trial - 1500m"], 
                              [[NSString alloc] initWithFormat:@"General Session"],
                              [[NSString alloc] initWithFormat:@"Drills Session"],
                              [[NSString alloc] initWithFormat:@"Endurance Session"], nil];
        NSLog(@"Count of swimSessTypesArray NOT FROM Defaults: %i", [swimSessTypesArray count]);
    } else {
        swimSessTypesArray = arrayofswimtypes;
        NSLog(@"Count of swimSessTypesArray from Defaults: %i", [swimSessTypesArray count]);
    } 
```

对此的任何提示和评论将不胜感激，包括我可以根据您的卓越知识和经验对我的编码进行的任何改进。

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:31:43.290

好的，Matthias 的评论让我找到了我的工作解决方案。本质上，有两种常用方法可以测试您的应用程序的 settings.bundle 是否已由用户初始化，如果没有则设置要使用的默认值：1）使用 registerDefaults 和 2）使用一些 IF-ELSE 语句创建您自己的测试。由于该问题与两个选项中的后者有关，因此我将回答它而不是 registerDefaults 方法。

首先应该知道的是，`boolForKey`它将在两种不同的情况下返回 NO：首先，当密钥不存在时（有效地是当用户没有初始化设置包时）以及当它被设置为 OFF 位置时. 这使得使用 boolForKey 进行测试变得非常不可能，但是如果您使用 objectForKey 来测试密钥是否存在，那么它可以完美地工作。代码如下所示（与问题中的示例代码一致）：

```
if (![boolForKey:kswimtypeednurancekey]) {
Create your default settings to be used by the app;
} else {
Use the settings from the settings.bundle;
} 
```

# unix - unix 中 html 格式邮件的附件

> ID：12346272
> 
> 赞同：0
> 
> 时间：2012-09-10T06:20:51.253
> 
> 标签：unix

```
1\. (cat mytest.html;uuencode "myfile.xls" "myfile.xls")|mail -s "$("This is Subject\nContent-Type: text/html")" test@yahoo.com

2\. (uuencode "myfile.xls" "myfile.xls")|mail -s "$("This is Subject\nContent-Type: text/html")" test@yahoo.com < mytest.html 
```

当我使用上述 2 种方法时，输出带有 html 格式。但我没有收到任何附件？（其中 mytest.html 包含 html 部分）

注意：我得到了一些分散的字符来代替附件。

请让我离开这里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:48:30.390

[uuencode](http://en.wikipedia.org/wiki/Uuencoding)是用于将二进制数据编码为 ASCII 文本以包含在邮件和新闻文章中的旧标准，但它已经过时并且十多年来没有普遍使用。可能没有剩余的 MUA 仍然知道如何处理它，尤其是在 HTML 邮件中。

此外，您为命令参数指定`Content-Type`标头的技巧是一个非常丑陋的技巧。我很惊讶它完全有效！在任何情况下，它都无法包含至少一个其他必需的标头：.`-s``mail``MIME-Version: 1.0`

您需要构建一个[MIME](https://www.rfc-editor.org/rfc/rfc2045)多部分消息，其中一部分是您的 HTML 文档，另一部分是您的附件（如果是二进制数据，可能是 base64 编码）。

因为 MIME 要求您选择多部分边界，所以格式化邮件正文以使用该边界分隔多个部分，为每个多部分子部分（包括每个部分自己的`Content-Type`和可能的`Content-Transfer-Encoding`和`Content-Disposition`/或其他部分）生成标题，并对每个部分进行适当的编码，您最好使用为您构建 MIME 消息的工具包，而不是尝试通过`mail`命令手动完成。如果您在 shell 中工作，您可以尝试[makemime](http://manpages.ubuntu.com/manpages/gutsy/man1/makemime.1.html)但这几乎和手动操作一样难看，所以我建议使用 Perl 的 MIME-Tools 之类的东西。

# asp.net-mvc-3 - MVC3 - 呈现不是控制器中的方法的视图

> ID：12346274
> 
> 赞同：0
> 
> 时间：2012-09-10T06:21:08.840
> 
> 标签：asp.net-mvc-3, partial, nopcommerce

我不知道如何最好地描述我的要求，但这里有。我正在尝试在[nopCommerce](http://www.nopcommerce.com)应用程序中从以下控制器/模型呈现视图：

CustomerController.cs 片段：

```
[NonAction]
protected CustomerNavigationModel GetCustomerNavigationModel(Customer customer)
{
   var model = new CustomerNavigationModel();
   model.HideAvatar = !_customerSettings.AllowCustomersToUploadAvatars;
   model.HideRewardPoints = !_rewardPointsSettings.Enabled;
   model.HideForumSubscriptions = !_forumSettings.ForumsEnabled || !_forumSettings.AllowCustomersToManageSubscriptions;
   model.HideReturnRequests = !_orderSettings.ReturnRequestsEnabled || _orderService.SearchReturnRequests(customer.Id, 0, null).Count == 0;
   model.HideDownloadableProducts = _customerSettings.HideDownloadableProductsTab;
   model.HideBackInStockSubscriptions = _customerSettings.HideBackInStockSubscriptionsTab;
   return model;
} 
```

CustomerNavigationModel.cs：

```
public partial class CustomerNavigationModel : BaseNopModel
{
    public bool HideInfo { get; set; }
    public bool HideAddresses { get; set; }
    public bool HideOrders { get; set; }
    public bool HideBackInStockSubscriptions { get; set; }
    public bool HideReturnRequests { get; set; }
    public bool HideDownloadableProducts { get; set; }
    public bool HideRewardPoints { get; set; }
    public bool HideChangePassword { get; set; }
    public bool HideAvatar { get; set; }
    public bool HideForumSubscriptions { get; set; }

    public CustomerNavigationEnum SelectedTab { get; set; }
 }

public enum CustomerNavigationEnum
{
    Info,
    Addresses,
    Orders,
    BackInStockSubscriptions,
    ReturnRequests,
    DownloadableProducts,
    RewardPoints,
    ChangePassword,
    Avatar,
    ForumSubscriptions
} 
```

MyAccountNavigation.cshtml 片段：

```
 @model CustomerNavigationModel
 @using Nop.Web.Models.Customer;
 @if (!Model.HideInfo)
 {
      <li><a href="@Url.RouteUrl("CustomerInfo")" class="@if (Model.SelectedTab == CustomerNavigationEnum.Info)
          {<text>active</text>}
          else
          {<text>inactive</text>}">@T("Account.CustomerInfo")</a></li>} 
```

视图：@Html.Partial("MyAccountNavigation", Model.NavigationModel, new ViewDataDictionary())

我知道它无法呈现 MyAccountNavigation 因为它在控制器中不存在。但是，取决于放置语法的页面，它会起作用。那么有没有办法在不更改控制器中的代码的情况下实现这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:59:34.690

MVC 以特定顺序查找局部视图。为了使您的局部视图起作用，您需要放置`MyAccountNavigation.cshtml' into`~/Views/Shared/`

我查看了源代码，这就是发生的事情：

```
 public RazorViewEngine(IViewPageActivator viewPageActivator)
            : base(viewPageActivator)
        {
            AreaViewLocationFormats = new[]
            {
                "~/Areas/{2}/Views/{1}/{0}.cshtml",
                "~/Areas/{2}/Views/{1}/{0}.vbhtml",
                "~/Areas/{2}/Views/Shared/{0}.cshtml",
                "~/Areas/{2}/Views/Shared/{0}.vbhtml"
            };
            AreaMasterLocationFormats = new[]
            {
                "~/Areas/{2}/Views/{1}/{0}.cshtml",
                "~/Areas/{2}/Views/{1}/{0}.vbhtml",
                "~/Areas/{2}/Views/Shared/{0}.cshtml",
                "~/Areas/{2}/Views/Shared/{0}.vbhtml"
            };
            AreaPartialViewLocationFormats = new[]
            {
                "~/Areas/{2}/Views/{1}/{0}.cshtml",
                "~/Areas/{2}/Views/{1}/{0}.vbhtml",
                "~/Areas/{2}/Views/Shared/{0}.cshtml",
                "~/Areas/{2}/Views/Shared/{0}.vbhtml"
            };

            ViewLocationFormats = new[]
            {
                "~/Views/{1}/{0}.cshtml",
                "~/Views/{1}/{0}.vbhtml",
                "~/Views/Shared/{0}.cshtml",
                "~/Views/Shared/{0}.vbhtml"
            };
            MasterLocationFormats = new[]
            {
                "~/Views/{1}/{0}.cshtml",
                "~/Views/{1}/{0}.vbhtml",
                "~/Views/Shared/{0}.cshtml",
                "~/Views/Shared/{0}.vbhtml"
            };
            PartialViewLocationFormats = new[]
            {
                "~/Views/{1}/{0}.cshtml",
                "~/Views/{1}/{0}.vbhtml",
                "~/Views/Shared/{0}.cshtml",
                "~/Views/Shared/{0}.vbhtml"
            };

            FileExtensions = new[]
            {
                "cshtml",
                "vbhtml",
            };
        } 
```

我们对`AreaPartialViewLocationFormats`和感兴趣`PartialViewLocationFormats`。

这解释了为什么当您尝试在与客户相关的视图中使用它时会找到您的视图，而它在其他任何地方都不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:32:05.110

无论我从您的问题中了解到什么，您都需要从许多页面执行“MyAccountNavigation”部分视图，为此您可以将此部分视图放在共享文件夹中。

如果我错了，请纠正我。

**编辑文本**

基础控制器：

ExecuteCore 方法

您可以将菜单或该模型存储在 ViewBag 中，例如

```
var customerNavigationModel = assigned your value;
ViewBag.MenuData = customerNavigationModel; 
```

从视图

```
@{Html.RenderPartial("MyAccountNavigation", ViewBag.MenuData);} 
```

# lucene - 如何修复 Lucene 并行阅读器错误“所有阅读器必须具有相同数量的子阅读器”？

> ID：12346276
> 
> 赞同：0
> 
> 时间：2012-09-10T06:21:11.120
> 
> 标签：lucene

我有两个 Lucene 索引，我正在尝试与 Lucene 4.X 中的 ParallelCompositeReader 一起打开它们。两个索引以相同的顺序包含相同数量的文档 (14365790)。我的代码如下所示：

```
val articlesReader = DirectoryReader.open(FSDirectory.open(...))
val citationCountReader = DirectoryReader.open(FSDirectory.open(...))
val reader = new ParallelCompositeReader(articlesReader, citationCountReader) 
```

当我运行此代码时，我收到以下错误：

```
Exception in thread "main" java.lang.IllegalArgumentException: All readers must have same number of subReaders
    at org.apache.lucene.index.ParallelCompositeReader.validate(ParallelCompositeReader.java:147)
    at org.apache.lucene.index.ParallelCompositeReader.prepareSubReaders(ParallelCompositeReader.java:100)
    at org.apache.lucene.index.ParallelCompositeReader.<init>(ParallelCompositeReader.java:71)
    at org.apache.lucene.index.ParallelCompositeReader.<init>(ParallelCompositeReader.java:64)
    at org.apache.lucene.index.ParallelCompositeReader.<init>(ParallelCompositeReader.java:58) 
```

关于索引的一些信息：

*   articlesReader 索引包含每篇文章的标题、摘要和出版年份等信息。它是几年前由其他人使用 Lucene 3.X 创建的。重新创建非常大且耗时，所以如果可能的话，我宁愿不修改它

*   citationCountReader 索引包含每篇文章的引用计数。它是通过遍历articlesReader 创建的。这是一个 Lucene 4.X 索引。这个只需要几个小时来重新创建，所以如果我必须重新创建任何东西，我宁愿修改这个。（当然，我也不想重新创建。）

我对 ParallelCompositeReader 的源代码进行了一些研究，似乎抛出了这个错误，因为`.getSequentialSubReaders()`返回一个大小为 1 的`articlesReader`列表，但返回一个大小为 3 的列表`citationCountReader`。但我不知道什么`SequentialSubReaders`是或如何使它们在两个索引中相同。这很可能不是关键问题和/或我的问题有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:47:59.987

好的，事实证明问题在于两个索引的段数不同。所以我不得不强制将索引与多个段合并为一个段。这是我所做的：

```
val config = new IndexWriterConfig(Version.LUCENE_40, ...)
config.setOpenMode(IndexWriterConfig.OpenMode.APPEND)
val indexWriter = new IndexWriter(FSDirectory.open(...), config)
indexWriter.forceMerge(1)
indexWriter.close 
```

一旦两个索引都有一个段，然后`.getSequentialSubReaders()`为两个读取器返回一个大小为 1 的列表，ParallelCompositeReader 就能够加载它们。

# java - java反射的method.invoke在运行时没有选择正确的方法

> ID：12346283
> 
> 赞同：-3
> 
> 时间：2012-09-10T06:21:55.687
> 
> 标签：java, reflection

```
String str="123/false"
String[] ss = str.split("/"); 
Object[] value = new Object[ss.length];
int ii=0;
for(Object s:ss){
  value[ii] = new Object();
  value[ii]=s;
  ii++;
} 
```

`method.invoke(new Instance(), value)//`调用方法不是在运行时识别方法。

要调用的方法是：`String getList(int i, Boolean f)`

只有当我使用以下代码时它才会被识别：

```
method.invoke(new Instance(), new Integer(123), new Boolean(false)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:44:21.650

如果我做对了，您需要`value`包含数组`int`，`Boolean`但是您首先设置了一个`Object`，然后将其替换为 a `String`。由于 Java 不能调用该方法`String getList(int,Boolean)`，因为`String`不能转换为`int`也不能转换为`Boolean`。要解决此问题，您必须执行以下操作：

```
String str="123/false"
String[] ss = str.split("/"); 
Object[] value = new Object[ss.length];

// Conversion String to int, first parameter
value[0] = Integer.parseInt(ss[0]);  
// Conversion String to boolean, second parameter
value[1] = Boolean.parseBoolean(ss[1]); 

method.invoke(new Instance(), value); 
```

# android - 单击小部件时如何访问另一个应用程序

> ID：12346285
> 
> 赞同：0
> 
> 时间：2012-09-10T06:22:11.460
> 
> 标签：android, widget

当我单击我的`widget`. 它似乎不起作用。请告诉我哪里出错了。到目前为止，这是我的代码。

```
public class MyWidgetProvider extends AppWidgetProvider {

    public String team1name;
    public String team2name;
    public String team1score;
    public String team2score;
          @Override
            public void onUpdate(Context context, AppWidgetManager appWidgetManager,int[] appWidgetIds) {
                super.onUpdate(context, appWidgetManager, appWidgetIds);
                Log.i(MyWidgetProvider.class.toString(), "Onupdate called for " + this);

                  RemoteViews remoteViews = new RemoteViews(context.getPackageName (), R.layout.widget_layout); 

                  Intent in = new Intent(Intent.ACTION_MAIN);
                  PackageManager packageManager = context.getPackageManager();
                  in = packageManager.getLaunchIntentForPackage("com.playup.android.adapters");
                  in.addCategory(Intent.CATEGORY_LAUNCHER);
                  PendingIntent pendingIntent2 = PendingIntent.getActivity(context,0 /* no requestCode */, in, 0 /* no flags */);
                  remoteViews.setOnClickPendingIntent(R.id.layout, pendingIntent2);

                  ComponentName thisWidget = new ComponentName(context, MyWidgetProvider.class);
                  AppWidgetManager manager = AppWidgetManager.getInstance(context);
                  manager.updateAppWidget(thisWidget, remoteViews);
            }
            public void onReceive(Context context, Intent intent){
                Bundle extras = intent.getExtras();
                if (extras == null) {
                  return;
                }
                team1name = extras.getString("team1name");
                team2name = extras.getString("team2name");
                team1score = extras.getString("team1score");
                team2score = extras.getString("team2score");    

                    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
                      remoteViews.setTextViewText(R.id.team1name, team1name);
                      remoteViews.setTextViewText(R.id.team2name, team2name);
                      remoteViews.setTextViewText(R.id.team1score, team1score);
                      remoteViews.setTextViewText(R.id.team2score, team2score);

                        ComponentName cn = new ComponentName(context, MyWidgetProvider.class);  
                        AppWidgetManager.getInstance(context).updateAppWidget(cn, remoteViews);
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T12:36:37.680

我只是将一些代码从 onUpdate() 方法添加到 onReceive() 方法，它就起作用了。这是代码。

```
 Intent in = new Intent(Intent.ACTION_MAIN);
      PackageManager packageManager = context.getPackageManager();
      in = packageManager.getLaunchIntentForPackage("com.playup.android.adapters");
      in.addCategory(Intent.CATEGORY_LAUNCHER);
      PendingIntent pendingIntent2 = PendingIntent.getActivity(context,0 /* no requestCode */, in, 0 /* no flags */);
      remoteViews.setOnClickPendingIntent(R.id.layout, pendingIntent2); 
```

# android - “确定”按钮的覆盖方法

> ID：12346287
> 
> 赞同：1
> 
> 时间：2012-09-10T06:22:13.780
> 
> 标签：android

我为音频示例创建了一个简单的 Activity 类。但问题是即使我离开应用程序，音频文件也会继续运行。我只想通过按下任何电话中间的“确定/完成”按钮来停止活动。我应该在活动类中覆盖哪种方法？

```
public class Audio extends Activity {

    private MediaPlayer mp;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    setVolumeControlStream(AudioManager.STREAM_MUSIC);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_audio, menu);
    return true;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    int resId;
    switch (keyCode) {
    case KeyEvent.KEYCODE_DPAD_UP:
    resId = R.raw.up;
    break;
    case KeyEvent.KEYCODE_DPAD_DOWN:
    resId = R.raw.down;
    break;

    default:
        return super.onKeyDown(keyCode, event);
    }

    // Release any resources from previous MediaPlayer
    if (mp != null) {
        mp.release();
        }

    // Create a new MediaPlayer to play this sound
    mp = MediaPlayer.create(this, resId);
    mp.start();

    // Indicate this key was handled
    return true;

}

}/// end class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:25:23.647

尝试使用这个：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if ((keyCode == KeyEvent.KEYCODE_HOME)) {
    Toast.makeText(Audio.this, "You pressed the home button!", Toast.LENGTH_LONG).show();  
    Audio.this.finish();                  
    return true;
}
return super.onKeyDown(keyCode, event); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:48:02.950

你可以在 onPause() 方法中处理你想要的。或者你也可以实现 onDestroy() 方法。当您按下主页按钮或关闭应用程序时，它会转到 onPause()，然后是 onDestroy()。

```
@Override
protected void onPause() {
    // stop player here
    super.onPause();
} 
```

# java - 将哈希图添加到哈希图数组

> ID：12346290
> 
> 赞同：0
> 
> 时间：2012-09-10T06:22:35.763
> 
> 标签：java, list, jdbc, hashmap, resultset

我有以下代码：

```
 ResultSet rs = DB.doQuery("SELECT username,register_ip FROM users ORDER BY joined DESC LIMIT 10");
    Map<String,String> botInfo = new HashMap<String, String>();
    List<Map<String , String>> myMap  = new ArrayList<Map<String,String>>();
    int c = 0;

    while(rs.next()) {
        botInfo.put("username", rs.getString("username"));
        botInfo.put("register_ip", rs.getString("register_ip"));
        myMap.add(c, botInfo);
        c++;
    } 
```

这个想法是让输出像这样..我将使用 PHP 作为示例：

```
[0] => array('username' => 'someUsername', 'register_ip' => 'someIP'); 
```

依此类推.. 但是，我得到的是 10 个 HashMap 的列表，它们都包含相同的 username,register_ip 值。我有哪些选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T06:25:32.163

那是因为您将相同的*botInfo* HashMap 添加到列表中。您想要做的是在您的 while 循环中创建一个新的 HashMap，向其中添加元素，最后将此映射添加到您的列表中。你想要做的是这样的：

```
ResultSet rs = DB.doQuery("SELECT username,register_ip FROM users ORDER BY joined DESC LIMIT 10");
List<Map<String , String>> myMap  = new ArrayList<Map<String,String>>();
int c = 0;

while(rs.next()) {
    //Create a new instance of the map
    Map<String,String> botInfo = new HashMap<String, String>();

    //Add elements to the the map
    botInfo.put("username", rs.getString("username"));
    botInfo.put("register_ip", rs.getString("register_ip"));

    //Add the map to the list
    myMap.add(c, botInfo);

    //Increment your counter
    c++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T06:25:38.413

```
ResultSet rs = DB.doQuery("SELECT username,register_ip FROM users ORDER BY joined DESC LIMIT 10");
List<Map<String , String>> myMap  = new ArrayList<Map<String,String>>();

while(rs.next()) {
    Map<String,String> botInfo = new HashMap<String, String>();
    botInfo.put("username", rs.getString("username"));
    botInfo.put("register_ip", rs.getString("register_ip"));
    myMap.add(botInfo);
} 
```

每条记录都需要一个新`HashMap`的`botInfo`。

编辑：`c`没用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T06:26:04.717

```
ResultSet rs = DB.doQuery("SELECT username,register_ip FROM users ORDER BY joined DESC LIMIT 10");
Map<String,String> botInfo;
List<Map<String , String>> myMap  = new ArrayList<Map<String,String>>();

while(rs.next()) {
    botInfo = new HashMap<String, String>();
    botInfo.put("username", rs.getString("username"));
    botInfo.put("register_ip", rs.getString("register_ip"));
    myMap.add(botInfo);
} 
```

使用此代码..这将对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:28:47.517

试试这个：

```
ResultSet rs = DB.doQuery("SELECT username,register_ip FROM users ORDER BY joined DESC LIMIT 10");
Map<String,String> botInfo;
List<Map<String , String>> myMap  = new ArrayList<Map<String,String>>();
String[] columns = {"username", "register_ip"};

while(rs.next()) {
    botInfo = new HashMap<String, String>();
    for(int i = 0; i < columns.length; i++) {
        botInfo.put(columns[i], rs.getString(columns[i]));
    }
    myMap.add(botInfo);
} 
```

# graph - 对集群的质量进行排名

> ID：12346291
> 
> 赞同：0
> 
> 时间：2012-09-10T06:22:36.623
> 
> 标签：graph, cluster-analysis, ranking

我有一个有向图（实际上它是一个超图，但暂时可以忽略它）。

从这个图中，我选择了各种子图，并且我正在寻找一个函数，它可以根据它们的“集群质量”对各种此类子集进行排名。

当子集的成员之间存在大量链接时，“集群质量”应该很高

当从子集的许多成员到子集或从子集外部存在大量链接时，“集群质量”应该很低。

我的问题是：

*   “集群质量”的正确术语是什么？

*   在这种情况下确实存在哪些相关算法/功能？

*   JVM 上存在哪些实现。首选 Scala，但任何可从 java 调用的东西都可以吗？

背景：这个想法是从源代码（类和方法名称或其片段）中提取单词，并通过查找“良好集群”使用的单词，从而找到那些可能最好地描述应用程序的单词，从而可能代表代码中的一些知识概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:52:25.120

关于与聚类分析相关的算法/功能，有几个。图中的聚类与图划分密切相关，图划分最近成为一个活跃的研究领域，尤其是随着 Facebook 和 Twitter 等在线社交网络的出现，其底层结构自然地由（社交）图表示。

话虽如此，根据我的经验，我想到了两种聚类措施。一个是模块化，它基本上将子图（集群）与边缘随机分布的子图的外观进行比较。

另一个是电导率，它衡量随机游走在集群候选者上收敛到某个均匀分布的速度。

另一个更宽松的衡量标准是查看聚类系数，它衡量图形中三角形（3 个循环）的数量与可能存在的三角形数量的关系。

总而言之，有很多与这个主题相关的算法（和学术论文），我上面提到的三个是更通用的用例。

关于 JVM 上的实现，我所知道的库中没有包含此类算法的库，但流行的 Scala 图形库是 Scala 的 Graph（将来将合并到 Scala 扩展核心库中）和Cassovary，由 Twitter 发布。

# c# - 引用程序集时，是否可以坚持使用版本号但忽略 publickeytoken？（即接受签名/未签名）

> ID：12346293
> 
> 赞同：1
> 
> 时间：2012-09-10T06:22:50.410
> 
> 标签：c#, .net, assemblies, publickeytoken

根据问题，

是否可以指定对另一个程序集的引用，需要特定版本但*不*坚持特定的 publickeytoken？我的直觉是没有（因为我猜测何时指定版本，所以使用了包括版本和 pkt 的整个完全限定程序集名称）

所以如果我有这种情况：

程序集 A 的 v1.0（无符号） 程序集 B 的 v1.0，需要程序集 A 的 v1.0

我可以在没有源代码的情况下重新签署程序集（通过 ildasm + ilasm），以便我有 A 和 B 的工作版本，并签名吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:58:01.953

因此，这并不能*完全*回答问题，而是通过将一对未签名的程序集移动到签名版本来解决我的基本场景，同时保持特定的版本要求。事实证明，当您重新签署程序集时，在您对它们进行 ilasm 之前，您可以打开 .il 并查看顶部附近并为引用添加特定的 publickeytoken，如下所示：

```
// Metadata version: v2.0.50727
.assembly extern mscorlib
{
  .publickeytoken = (B7 7A 5C 56 19 34 E0 89 )                         // .z\V.4..
  .ver 2:0:0:0
}
.assembly extern My.Assembly
{
  .publickeytoken = (3E 5D C7 B6 5B C4 C7 0E )                         // .z\V.4..
  .ver 1:0:0:0
}
.assembly extern System.Core
{
  .publickeytoken = (B7 7A 5C 56 19 34 E0 89 )                         // .z\V.4..
  .ver 3:5:0:0
} 
```

编译后，一切都应该按预期工作:)

# python - 如何覆盖 django.contrib.comments 字段小部件？

> ID：12346294
> 
> 赞同：0
> 
> 时间：2012-09-10T06:23:04.327
> 
> 标签：python, django, django-forms, django-comments, django-widget

我不想在我的评论表单的评论字段中添加内联样式。我正在寻找一种将占位符属性添加到我的字段的方法。这样做的正确方法是什么？

我正在寻找一种为 get_comment_create_data 方法添加/修改小部件的方法。

这是我当前表单的外观：

```
# forms.py
...
class PostComment(CommentForm):
    """
    A lighter comment form.
    """
    def get_comment_create_data(self):
        """
        This needs to be overwritten to remove the fields from the class
        """
        return dict(
            content_type = ContentType.objects.get_for_model(self.target_object),
            object_pk    = force_unicode(self.target_object._get_pk_val()),
            comment      = self.cleaned_data['comment'],
            submit_date  = datetime.datetime.now(),
            site_id      = settings.SITE_ID,
            is_public    = True,
            is_removed   = False,
        )
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:31:17.460

您可以像这样扩展类方法：

```
class PostComment(CommentForm):
    def get_comment_create_date(self):
        data = super(PostComment, self).get_comment_create_data()
        data.update(dict(
            placeholder  = 'foo'
        ))
        return data 
```

# c# - 如何使用 Fluent NHibernate 和 IUserType 将两列映射到一个成员？

> ID：12346296
> 
> 赞同：1
> 
> 时间：2012-09-10T06:23:22.783
> 
> 标签：c#, fluent-nhibernate, composite, iusertype

我有一个 IUserType ，它将两列映射为一个类型，如下所示：

```
....
public object NullSafeGet(IDataReader rs, string[] names, object owner)
{
    return new FooBar(rs[names[0]], rs[names[1]]);
}
.... 
```

我无法使用 Fluent NHibernate 指定两个列名。我试过这个：

```
Map(x => x.Boz).Columns.Add("GLUB","SHERP").CustomType<FooBarUserType>(); 
```

但第二列名称被忽略。如何使用 Fluent NHibernate 指定两个列名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T19:43:14.587

我在一个项目中遇到了同样的问题。

我能够使用以下方法使其工作：

```
Map(x => x.Boz).Columns.Add("GLUB").Columns.Add("SHERP").CustomType<FooBarUserType>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:35:37.317

尝试 ICompositeUserType。这可以处理多个列。但有时同事会忘记组件映射，它通常可用且映射更简单：

利用

```
 Component(x=>x.Boz) //instead of Map(x=>x.Boz) 
```

并创建一个 ComponentMap 映射类，如：

```
 public class FooBarMap: ComponentMap<FooBar>
       {
           public FooBarMap()
           {
               Map(x => x.FoobarProp1);
               Map(x => x.FoobarProp2);
           }
       } 
```

这将在您的原始表中创建 2 列（不会为 FooBar 实体创建自己的表）：FooBarProp1 和 FooBarProp2。

ICompositeUserType 的替代方案在我的流利版本中很糟糕：我总是收到错误消息“列数错误”，并且像 Columns.Clear() 这样的提示不起作用。

问候，迈克尔

# linux - Linux : 如何通过修复文件系统摆脱 linux 文件系统修复提示

> ID：12346309
> 
> 赞同：0
> 
> 时间：2012-09-10T06:24:41.283
> 
> 标签：linux, filesystems

当我尝试登录我的 FC16 VM 时，我最终会出现文件系统修复提示。

我猜这是由文件系统损坏引起的问题。

在此文件系统修复提示中，我无法运行大多数命令。大多数文件也处于只读模式。

首先，我想知道我的文件系统的类型——是 ext2、ext3 还是 ext4？

为此，如果我执行“df -T”，则表示它无法识别 df 命令。

如果我简单地运行 fsck，这就是我得到的全部：

(修复文件系统):# fsck
fsck from util linux 2.20.1
(修复文件系统):#

重新启动后，我再次以相同的修复文件系统提示结束。

这里的出路是什么？我可以在修复文件系统提示符下运行哪些命令？

TIA-Sidharth

# node.js - 如何在咖啡脚本中返回一个函数的值

> ID：12346310
> 
> 赞同：0
> 
> 时间：2012-09-10T06:24:44.793
> 
> 标签：node.js, mongodb, coffeescript

我使用咖啡脚本编写node.js，它工作正常，我想知道的是 *如何在咖啡脚本中返回一个函数的值*，这是我的代码

```
exports.find=->
    db.open((err, db)->
        unless err
            db.createCollection('test', (err, collection)-> 
                unless err
                    collection.find().toArray((err, items)->
                        unless err
                           //here how to return *items*
                            console.log(items)
                )
        )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:39:03.580

由于DB相关的操作都是异步的，所以你应该为`find`例程指定一个回调函数。

（边注：

你应该使用保护条款，`return if err`而不是`unless err`. 它降低了缩进级别并使代码更易于阅读。

或者更好的是，您应该将错误作为第一个参数传递给回调。这是 node.js 项目的约定）

```
exports.find = (callback) ->
  db.open (err, db) ->
    return callback(err) if err
    db.createCollection 'test', (err, collection) ->
      return callback(err) if err
      collection.find().toArray (err, items) ->
        return callback(err) if err
        callback(null, items) // <<<================ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:39:45.350

我会使用诸如[async](https://github.com/caolan/async)之类的流控制，它可以让您拥有更简洁的代码和易于理解的异步流

```
npm install async 
```

* * *

```
async = require "async"

exports.find = (callback) ->
  async.waterfall [
    (callback) ->
      db.open (err, db) -> callback err, db

    (db, callback) ->
      db.createCollection 'test', (err, collection) -> callback err, collection

    (collection, callback) ->
      collection.find().toArray (err, items) -> callback err, items
  ], (err, items) ->
    if err then callback null else callback items 
```

`null`在这种情况下，将返回发生错误的时间。

如果没有错误，`items`将返回

# lame - 使用 LAME 时的开头点击声音

> ID：12346314
> 
> 赞同：7
> 
> 时间：2012-09-10T06:25:01.073
> 
> 标签：lame

我正在使用 LAME 将 WAV 文件（从音频 CD 中提取）转换为 MP3。转换结果很好，除了在文件的最开始有一个“点击”的声音。点击在歌曲本身之前几乎需要 0.5 秒。

```
char *input_file = argv[1];
char *output_file = argv[2];

FILE *pcm = fopen(input_file, "rb");
FILE *mp3 = fopen(output_file, "wb+");

size_t nread;
int ret, nwrite;

const int PCM_SIZE = 1152;
const int MP3_SIZE = 1152;

short pcm_buffer[PCM_SIZE * 2];
unsigned char mp3_buffer[MP3_SIZE];

lame_t lame = lame_init();

// Can not put these lines at the end of conversion
id3tag_set_title(lame, "Still reminds me");
id3tag_set_artist(lame, "Anggun");

lame_set_VBR(lame, vbr_mt);
lame_set_VBR_quality(lame, 2);

ret = lame_init_params(lame);

do {
    nread = fread(pcm_buffer, sizeof(short), PCM_SIZE * 2, pcm);

    if (nread != 0) {
        // Is this the cause of the single click?
        int nsamples = nread / 2;
        short buffer_l[nsamples];
        short buffer_r[nsamples];

        int j = 0;
        int i = 0;
        for (i = 0; i < nsamples; i++) {
            buffer_l[i] = pcm_buffer[j++];
            buffer_r[i] = pcm_buffer[j++];

        }

        nwrite = lame_encode_buffer(lame, buffer_l, buffer_r, nsamples,
                mp3_buffer, MP3_SIZE);

    } else {
        nwrite = lame_encode_flush(lame, mp3_buffer, MP3_SIZE);

    }

    fwrite(mp3_buffer, nwrite, 1, mp3);
} while (nread != 0);

lame_close(lame);

fclose(mp3);
fclose(pcm); 
```

这是怎么回事？我在这里想念什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T20:47:00.770

不确定您是否仍在寻找 Dave L 以外的答案，但咔哒声来自 LAME 意外编码音频文件中的标题。根据您生成的 WAV 文件，标头可能是 44 字节。我在转换我录制的 PCM 文件时遇到了类似的问题，但在我的情况下，这些标头是 4096 字节。如果它是一个真正的 wav 文件（因此具有 44 字节的标题），只需使用

```
fseek(pcm,44,0); 
```

在您打开文件后立即跳过标题内容。我还建议在您的一个 WAV 文件上使用十六进制编辑器来验证标题的大小。

一旦我跳过它（再次，我的标题是 4096b），点击噪音就消失了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T03:59:17.923

任何运气解决这个问题？

我遇到了类似的问题，我尝试在写入输出文件时跳过前 1024 个字节（即，在开始将 LAME 的输出写入输出文件之前，我只是丢弃了这些字节）。这消除了录制开始时的“咔哒”声，但这有点小技巧，但似乎可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-15T10:22:48.990

跳过标题对于避免此类点击很重要，但固定大小例如。44 字节是一个**不起作用**的解决方案。

我的典型 WAV 文件具有 80 字节的标头。

无论如何，您应该解析 WAV 文件以找到真正的标头大小。这对于获取一些额外的东西也很有意义，例如每个样本的位数、通道数等，这些东西可用于为 lame 设置正确的参数或提供一些有用的默认参数。

为了让事情变得更容易，你不能从头开始开发所有这些东西。可以使用 Lame 源中包含的前端（查找文件 get_audio.c 和函数`parse_wave_header(lame_global_flags * gfp, FILE * sf)`

如果您只需要标头大小，您当然可以修改此功能以满足您的需求。

# c# - 我应该使用查找列表而不是大量乘法吗？

> ID：12346323
> 
> 赞同：1
> 
> 时间：2012-09-10T06:25:37.337
> 
> 标签：c#, performance, comparison, multiplication, lookup-tables

在我的应用程序中，我有一个非常大的字节数组，它是一个扁平的 3 维数组，我们使用 3 个嵌套的 for 循环 (x, y, z) 填充数组，然后我们通过一些数学运算得到我们想要的值，最具体地说：

要获取数组中的索引：

```
return x + z*SizeX + y*SizeX*SizeZ; 
```

并返回 x/y/z 坐标，给定一个索引：

```
int index = pos;
var y = (ushort) (pos/SizeX/SizeZ);
pos -= y*SizeX*SizeZ;
var z = (ushort) (pos/SizeX);
pos -= z*SizeX;
var x = (ushort) pos;

return new BlockPos(x, y, z, index, this); 
```

首先，我想第二个可以提高效率，我只是不知道该怎么做，任何帮助将不胜感激：P

我的主要问题是，为 y 和 x 值创建一个查找表（在加载类时填充）对我来说会更快，还是将乘法保留在那里更快？

*编辑* 这个数学在某些情况下被称为很多，所以如果它会更快，即使对于更长的启动它也会产生更好的差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T06:32:35.473

在*大多数*语言和架构中，乘法将成为一条（或几条）机器指令。虽然这些指令可能相对昂贵，但它们仍然应该比执行查找操作更便宜 - 并且查找操作很可能需要乘法。

例如“定位数组的第 4 个元素”将是

```
<array base address> + (3 * <array element size>) 
```

考虑到您的伪代码，我建议的唯一优化是执行`SizeX*SizeZ`一次“常量”操作（例如 ），然后存储这些结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:47:51.083

这些可能会加快您的速度；

*   制作 SizeX、SizeY、SizeZ 常量
*   预计算 SizeXZ = SizeX * SizeZ 和其他（也作为常量）；

预先计算的数组索引不会为您带来太多好处，因为预先计算的列表会非常大，并且由于很少做简单的数学运算，因此查看它可能不会更快。

C# 中的数组操作相对较慢（与其他一些语言相比），因为大多数访问都经过边界检查。有一些方法可以解决这个问题；

*   在不安全的部分放置一个紧密的数组循环并使用指针请参阅[C# 中的大数组算术](https://stackoverflow.com/questions/111026/large-array-arithmetics-in-c-sharp) 或谷歌以获取“矩阵乘法不安全的 c#”
*   Mono 有一个参数可以跳过边界检查。在您的情况下*可能*会更快

另一个加速可能是安排你的数学循环，使你的数学处理顺序访问大数组。这样，每次访问都受益于数据通常已经被先前的计算提取到 cpu-cache 中的事实。因此，以这样的方式构造 x,y,z 循环，使您得到 index=1、index=2、index=3 等。而不是 index = 0、index= 256、index = 512 等。

# database - CAP 定理 - 可用性和分区容限

> ID：12346326
> 
> 赞同：271
> 
> 时间：2012-09-10T06:25:45.927
> 
> 标签：database, nosql, consistency, availability

虽然我试图理解 CAP 中的“可用性”（A）和“分区容限”（P），但我发现很难理解各种文章的解释。

我感觉A和P可以一起走（我知道不是这样，这就是我无法理解的原因！）。

简单来说，A和P是什么以及它们之间的区别？

* * *

## 回答 #1

> 赞同：539
> 
> 时间：2012-09-10T08:14:45.933

一致性意味着整个集群中的数据是相同的，因此您可以从/向任何节点读取或写入并获取相同的数据。

可用性意味着即使集群中的某个节点出现故障，也能够访问集群。

分区容错意味着即使两个节点之间存在“分区”（通信中断）（两个节点都已启动，但无法通信），集群仍继续运行。

为了同时获得可用性和分区容错性，您必须放弃一致性。考虑在主-主设置中是否有两个节点 X 和 Y。现在，X 和 Y 之间的网络通信中断，因此它们无法同步更新。此时，您可以：

A) 允许节点不同步（放弃一致性），或

B）认为集群“关闭”（放弃可用性）

所有可用的组合是：

*   **CA** - 所有节点之间的数据是一致的 - 只要所有节点都在线 - 您可以从任何节点读取/写入并确保数据相同，但是如果您在节点之间开发了分区，则数据将是不同步（一旦分区被解决就不会重新同步）。
*   **CP** - 数据在所有节点之间保持一致，并通过在节点关闭时变得不可用来保持分区容差（防止数据不同步）。
*   **AP** - 节点保持在线，即使它们无法相互通信，并且会在分区解决后重新同步数据，但您不能保证所有节点都将拥有相同的数据（在分区期间或之后）

您应该注意[CA 系统实际上并不存在](http://codahale.com/you-cant-sacrifice-partition-tolerance/)（即使某些系统声称存在）。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2014-01-23T17:10:41.983

将 P 与 C 和 A 等同考虑有点错误，而 C、A、P 中的“三分之二”的概念具有误导性。我解释 CAP 定理的简洁方式是，“在分布式数据存储中，在网络分区时，您必须选择一致性或可用性，并且不能同时获得两者”。较新的 NoSQL 系统试图关注可用性，而传统的 ACID 数据库更关注一致性。

你真的不能选择CA，网络分区不是任何人想要的，它只是分布式系统的一个不受欢迎的现实，网络可能会失败。问题是当发生这种情况时，您会为您的应用程序选择什么权衡。最初提出该术语的人的这篇[文章似乎非常清楚地解释了这一点。](http://www.infoq.com/articles/cap-twelve-years-later-how-the-rules-have-changed)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-07-09T17:31:47.547

这就是我讨论 CAP 的方式，特别是关于 P。

仅当您对单一的单服务器数据库（可能具有复制但所有数据都在一个“故障块”上 - 服务器不被视为部分故障）感到满意时，CA 才有可能。

如果您的问题需要横向扩展、分布式和多服务器 --- 可能会发生网络分区。您已经需要 P。我处理的问题很少适用于单服务器始终范式（或者，正如 Stonebraker 所说，“分布式是赌注”）。如果您能找到 CA 问题，那么像传统的非横向扩展 RDBMS 这样的解决方案会提供很多好处。

对我来说，很少见：所以我们继续讨论 AP 与 CP。

当您有分区时，您只能在 AP 和 CP 操作之间进行选择。如果网络和硬件运行正常，您就可以得到蛋糕并吃掉它。

让我们讨论一下AP/CP的区别。

AP——当有网络分区时，让独立的部分自由操作。

CP - 当存在网络分区时，关闭节点或禁止读写，因此存在确定性故障。

我喜欢可以两者兼得的架构，因为有些问题是 AP，有些是 CP——而有些数据库可以两者兼得。在 CP 和 AP 解决方案中，也有微妙之处。

例如，在 AP 数据集中，您可能会出现不一致的读取和产生写入冲突 - 这是两种不同的可能 AP 模式。您的系统能否配置为具有高读取可用性但不允许写入冲突的 AP？或者您的 AP 系统能否通过强大而灵活的解决系统来接受写入冲突？你最终会需要两者，还是你可以选择一个只做一个的系统？

在 CP 系统中，如果有小分区（单个服务器），您会获得多少不可用性？更大的复制会增加 CP 系统中的不可用性，系统如何处理这些权衡？

这些都是CP vs AP要问的问题。

Brewer 的“12 年后”帖子是目前该领域的一个很好的读物。我相信这会清晰地推动 CAP 辩论，并强烈推荐它。

[http://www.infoq.com/articles/cap-twelve-years-later-how-the-rules-have-changed](http://www.infoq.com/articles/cap-twelve-years-later-how-the-rules-have-changed)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-04-18T09:19:45.867

[![CAP定理](../Images/85e6088d421b61fa99901759670a93cf.png)](https://i.stack.imgur.com/d3s55.png)

## 一致性：

读取保证**返回给定客户端的最新写入（如 ACID）**。如果**在此期间有任何请求，它必须等到**节点之间/节点中的数据同步完成。

* * *

## 可用性：

每个节点（如果没有失败）总是执行查询并且应该总是响应请求。它是否返回最新的副本并不重要。

* * *

## 分区容错：

发生网络分区时，系统将继续运行。

* * *

> 关于**AP**，可用性（始终可访问）可以存在（**Cassendra**）或不存在（**RDBMS**）分区容差

[图片来源](https://dzone.com/articles/better-explaining-cap-theorem)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-06-29T19:26:36.330

我浏览了很多链接，但没有一个能给我满意的答案，除了一个。

因此，我用非常简单的措辞来描述 CAP。

*   **一致性**：必须返回相同的**数据**，无论它来自哪个节点。

*   **可用性**：**节点**应该响应（必须可用）。

*   **Partition Tolerance**：**集群**应该响应（必须可用），即使节点之间存在分区（即网络故障）。

（同样令人困惑的一个主要原因是它的命名约定不好。如果我是对的，我可能会给出**DNC**定理：**数据一致性**、**节点可用性**、**集群可用性**，其中每个分别对应于**一致性**、**可用性**和**分区容**差）

**CP 数据库：** CP 数据库以牺牲可用性为代价提供一致性和分区容错性。当任何两个节点之间发生分区时，系统必须关闭不一致的节点（即使其不可用），直到分区解决。

**AP 数据库：** AP 数据库以牺牲一致性为代价提供可用性和分区容错性。发生分区时，所有节点都保持可用，但分区错误端的节点可能会返回比其他节点更旧的数据版本。（分区解决后，AP 数据库通常会重新同步节点以修复系统中的所有不一致。）

**CA 数据库：** CA 数据库提供跨所有节点的一致性和可用性。但是，如果系统中的任何两个节点之间存在分区，它就无法做到这一点，因此无法提供容错能力。在分布式系统中，分区是不可避免的。因此，虽然我们可以在理论上讨论 CA 分布式数据库，但出于所有实际目的，CA 分布式数据库可以存在但不应该存在。

因此，这并不意味着如果您需要，您就不能为您的分布式应用程序拥有一个 CA 数据库。许多关系数据库（例如 PostgreSQL）提供一致性和可用性，并且可以使用复制部署到多个节点。

来源：[https ://www.ibm.com/cloud/learn/cap-theorem](https://www.ibm.com/cloud/learn/cap-theorem)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-06-23T21:08:53.343

我觉得在任何答案中都没有很好地解释分区容差，所以只是为了更详细地解释 CAP 定理意味着：

**C**：（线性化或强一致性）大致意思是

> 如果操作 B 在操作 A 成功完成后开始，则操作 B 必须看到系统处于与操作 A 完成时相同的状态，或者更新的状态（但绝不是旧状态）。

**答**：

> “系统中非失败 [数据库] 节点收到的每个请求都必须产生 [非错误] 响应”。某些节点能够处理请求是不够的：任何非失败节点都需要能够处理它。许多所谓的“高可用性”（即低停机时间）系统实际上并不符合这个可用性定义。

**:** _

> Partition Tolerance（名字严重错误）基本上意味着您正在通过可能延迟或丢弃消息的异步网络进行通信。互联网和我们所有的数据中心都有这个属性，所以你在这件事上没有任何选择。

资料来源：Awesome Martin kleppmann 的[作品](https://martin.kleppmann.com/2015/05/11/please-stop-calling-databases-cp-or-ap.html)

举个例子：Cassandra 最多可以是 AP 系统。但是，如果您将其配置为基于 Quorum 读取或写入，则它不会保持 CAP 可用（根据 CAP 定理的定义可用）并且只是 P 系统。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-15T09:02:24.187

理解 CAP 定理的简单方法：

> 在网络分区的情况下，需要在完美可用性和完美一致性之间做出选择。
> 
> **选择一致性**意味着无法回答客户的查询，因为系统不能保证返回最近的写入。这牺牲了可用性。
> 
> **选择可用性**意味着能够响应客户的请求，但系统不能保证一致性，即最新写入的值。可用系统在给定情况下提供最佳答案。

这个解释来自[这篇优秀的文章](https://dzone.com/articles/understanding-the-cap-theorem)。希望它会有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-17T07:45:39.747

在简单的 CAP 定理中，分布式系统不可能同时提供所有三个保证：

[![在此处输入图像描述](../Images/11c46d2212e672987c2c199acc5dc4ca.png)](https://i.stack.imgur.com/M2bfY.png)

**一致性**

每个节点同时包含相同的数据

**可用性**

每次必须至少有一个节点可用于提供数据

**分区容错**

系统故障非常罕见

大多数情况下，每个系统只能保证**CA、AP 或 CP**至少两个功能。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-05-07T04:04:26.363

> Brewer 的主题演讲、Gilbert 论文和许多其他处理方法将 C、A 和 P 置于同等地位，作为实现的理想属性，并有效地说“选择两个！”。但是，这通常被认为是一种误导性的演示，因为您无法构建或选择！- “分区容错”：您的系统可能会遇到分区，也可能不会。
> 
> CAP 更好地理解为描述您在构建可能遭受分区的系统时必须做出的权衡。实际上，这是每个分布式系统：没有 100% 可靠的网络。所以（至少在分布式环境中）没有现实的 CA 系统。您可能会遭受分区，因此您必须在某些时候妥协 C 或 A。

[https://github.com/henryr/cap-faq#10-why-do-some-people-get-annoyed-when-i-characterise-my-system-as-ca](https://github.com/henryr/cap-faq#10-why-do-some-people-get-annoyed-when-i-characterise-my-system-as-ca)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-05T08:46:06.323

一致性——当我们发送读取请求时，如果它正在返回结果，它应该返回客户端请求给出的最新写入。可用性——你的读/写请求应该总是成功的。分区容错 – 当出现网络分区（某些机器无法相互通信）时，系统应该仍然可以工作。

在分布式中，有可能发生网络分区，我们无法避免 CAP 的“P”。所以我们在“一致性”和“可用性”之间进行选择。

[http://bigdatadose.com/understanding-cap-theorem/](http://bigdatadose.com/understanding-cap-theorem/)

# unix - 将参数传递给 sed 命令

> ID：12346332
> 
> 赞同：-1
> 
> 时间：2012-09-10T06:26:09.973
> 
> 标签：unix, sed

我想从一个大文件中提取两个标签名称之间的部分文件。例如，我有一个名为 XXPOXPOEPO.txt 的文件，我只想要 * Blocks 和 * Items 之间的文件部分。如何将这两个标签名称作为参数传递给 sed 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:50:42.893

目前还不是很清楚您到底需要什么，但您可以在`sed`命令中使用 bash 变量。例如：

```
$ start=2

$ seq -s ' ' 5 | sed "s/.*\($start\)/\1/"
2 3 4 5 
```

# python-module - Monkeyrunner 找不到我的模块

> ID：12346337
> 
> 赞同：1
> 
> 时间：2012-09-10T06:26:36.963
> 
> 标签：python-module, monkeyrunner

我已经安装了`psutil`模块。
如果由 python 解释器运行，它运行良好，但是当我尝试在 monkeyrunner 脚本中导入模块时，它给出

> 没有这样的模块。

有什么方法可以让我在 monkeyrunner 中使用 psutil 模块？

注意-我正在使用带有 android ics-x86 版本的 monkeyrunner

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:42:27.453

尝试将您的脚本命名为**something.py**。这样你就有了一个 python 脚本，你可以在其中导入模块。当您使用 monkeyrunner 运行脚本时，某些 python 模块无法识别。Monkeyrunner 不等于 python 100%。它不具备所有的能力和功能。

# .htaccess - 将 .htm 重定向到同一域下的 .php 并获取值

> ID：12346338
> 
> 赞同：-1
> 
> 时间：2012-09-10T06:26:52.750
> 
> 标签：.htaccess, mod-rewrite, redirect

我的网站托管在 linux 上。我的四个域和一些子域停在根目录上。现在我已将所有*.htm*文件更改为*.php*。当我尝试重定向时

用*.htaccess*加上`RewriteRule ^(.*)\.htm$ $1.php [r=301,nc]`它就可以了，它不会带来 get 值。我想将所有*.htm*重定向到同一域上的*.php以及获取值。*在发布这个问题之前，我很厌倦找到匹配的代码。请帮助我。

感谢和问候，Leelakh Ran。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:39:50.340

您忘记的是附加查询字符串标志`QSA`：

```
RewriteRule ^(.*)\.htm$ $1.php [R=301,NC,QSA] 
```

# aviarc - 如何在 Return/Enter 按键上提交 Aviarc 表单？

> ID：12346340
> 
> 赞同：1
> 
> 时间：2012-09-10T06:27:11.033
> 
> 标签：aviarc

我有一个在表中创建新记录的表单。它是一系列文本编辑字段，每个字段都有来自同一数据集的字段。当我单击一个按钮时，将运行一个将新值提交到数据库的 ajax 工作流。

有没有办法让点击 Return/Enter 做同样的事情，Web 表单通常的工作方式？

我希望能够使用的代码是这样的：

```
<behaviors xmlns="urn:aviarc:widget:com.aviarc.toronto.widget.core.action">
    <when>
        <events>
            <event event="add_problem_record_button.onClick" />

            <!-- how do I ensure this is the Return key? -->
            <event event="add_problem_record_form.onKeyUp" />
        </events>
        <do>
            <call-ajax-workflow name="add-problem-record" />
        </do>
    </when>
</behaviors> 
```

我的主要问题是如何测试是否按下了 Return 键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:27:11.033

文本编辑小部件提供 onEnterKey 事件：

```
<when>
    <events>
        <widget-event name="text-edit-1.onEnterKey"/>
        <widget-event name="submit.onClick"/>
    </events>
    <!-- do stuff -->
</when> 
```

更一般地说，如果您需要在事件处理程序中找出 keyCode，您可以从事件参数数据集中访问它：

```
<when>
    <events>
        <!-- all these events should provide a keyCode parameter -->
        <widget-event name="my-text-edit.onKeyDown"/>
        <widget-event name="my-text-edit.onKeyUp"/>
        <widget-event name="my-text-edit.onKeyPress"/>
    </events>
    <alert message="{$event-parameters.keyCode}"/>
</when> 
```

# java - 如何从内部类访问阴影的外部类变量？

> ID：12346343
> 
> 赞同：7
> 
> 时间：2012-09-10T06:27:15.557
> 
> 标签：java, scope

这不是直截了当的问题。在我的例子中，外部类变量和内部类 setter 方法的参数名称是相同的。像：

```
class Problem {
    String s;
    int p;
    class Inner {
        String testMethod() {
         return  s = "Set from Inner";
        }
        void setP(int p)
        {
            p=p;  //it will do self assignment
        }
    }

} 
```

现在我无法初始化外部类实例变量 p ，`this.p=p`因为它表示内部类。我再一次做不到`Problem.p=p;`它会出错。现在如何分配外部 p，保持内部 Class 方法`setP(int p)`的参数同名 p ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T06:28:42.747

这是您可以/应该这样做的方式：

```
Problem.this.p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:29:48.723

用于将 p 引用到外部类，例如

```
Problem.this.p = p; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T06:30:04.177

用这个

```
class Problem {
String s;
int p;
class Inner {
    String testMethod() {
     return  s = "Set from Inner";
    }
    void setP(int p)
    {
        Problem.this.p=p;  //it will do assignment
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:30:40.140

```
class Problem {
String s;
int p;
class Inner {
    String testMethod() {
     return  s = "Set from Inner";
    }
    void setP(int p)
    {
        Problem.this.p=p;  //it will do assignment to p of outer class
    }
}
} 
```

# c - 在C中找到列表的最长递增子序列

> ID：12346348
> 
> 赞同：5
> 
> 时间：2012-09-10T06:27:28.187
> 
> 标签：c, algorithm

我在尝试查找构成给定列表的最长递增子序列的元素时遇到问题。

我有算法来查找列表中给定项目的值，并且我了解它使用的方法，我只是不知道要添加什么以及在哪里添加它，以便我拥有组成 LIS 的数字

这是我现在正在做的事情：

```
for (A[0] = N[0], i=lis=1; i<n; i++) {
    int *l = lower_bound(A, A+lis, N[i]);
    lis = max(lis, (l-A)+1);
    *l = N[i];
} 
```

`A`是一个存储部分 LIS 的数组，但在某些时候它会发生变化，因为可能存在不同的解决方案。`N`是元素的数组。

我怎样才能从这里找到最长的增加子序列`N`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T18:59:27.777

您可以使用两个附加数组来查找 LIS。例如，如果您的源放在数组**A**

```
1  8  4  12  6  6  1 
```

我们有一个数组**B**来存储**A**的元素，这些元素更有可能是 LIS 的元素。更准确地说，**B**将在位置**i**处保持为 LIS 。加上一个数组**idx**来记录位置。

我们从**A[0]**开始，将 A[0] 放在 B[0] 处。由于 A[0] 附加在**B**中的位置 0 处，因此 idx[0] = 0。

```
 [0]  1   2   3   4   5   6

 A  |  1   8   4  12   6   6   1
 B  | (1)
idx |  0 
```

那么对于位置 1，由于**B**中的元素小于 A[1]，所以将 A[1] 附加到 B。idx[1] 记录了**B**中的位置为 1。

```
 0  [1]  2   3   4   5   6

 A  |  1   8   4  12   6   6   1
 B  |  1  (8)
idx |  0   1 
```

**对于位置 2，与B**中的元素相比，A[2] 或 4 更可能是 LIS 的元素，以便将**B**保持为 LIS。**因此，在B**中找到不小于 4 的最小元素并替换为 8。 idx[2] 设置为在**B**中替换 8 的位置。我认为您可以使用搜索算法找到这样的元素。

```
 0   1  [2]  3   4   5   6

 A  |  1   8   4  12   6   6   1
 B  |  1  (4)
idx |  0   1   1 
```

所以继续这种方式，我们逐渐建立**idx**。

```
position 3
       0   1   2  [3]  4   5   6

 A  |  1   8   4  12   6   6   1
 B  |  1   4 (12)
idx |  0   1   1   2

position 4
       0   1   2   3  [4]  5   6

 A  |  1   8   4  12   6   6   1
 B  |  1   4  (6)
idx |  0   1   1   2   2

position 5
       0   1   2   3   4  [5]  6

 A  |  1   8   4  12   6   6   1
 B  |  1   4  (6)
idx |  0   1   1   2   2   2

position 6
       0   1   2   3   4   5  [6]

 A  |  1   8   4  12   6   6   1
 B  | (1)  4   6
idx |  0   1   1   2   2   2   0 
```

我们有**idx**记录的位置，现在我们向后扫描**idx**并找出 LIS。

```
 0   1   2   3   4   5   6

 A  |  1   8   4  12   6   6   1
idx |  0   1   1   2   2  (2)  0    | 6

       0   1   2   3   4   5   6

 A  |  1   8   4  12   6   6   1
idx |  0   1  (1)  2   2   2   0    | 4  6

       0   1   2   3   4   5   6

 A  |  1   8   4  12   6   6   1
idx | (0)  1   1   2   2   2   0    | 1  4  6 
```

因此，输出 LIS 为 {1, 4, 6}

代码和 A = {1, 8, 4, 12, 6, 6, 1} 作为源

```
#include <stdio.h>
#include <stdlib.h>

#define INT_INF 10000

int search_replace(int *lis, int left, int right, int key) {
        int mid;

        for (mid = (left+right)/2; left <= right; mid = (left+right)/2) {
                if (lis[mid] > key) {
                        right = mid - 1;
                } else if (lis[mid] == key) {
                        return mid;
                } else if (mid+1 <= right && lis[mid+1] >= key) {
                        lis[mid+1] = key;
                        return mid+1;
                } else {
                        left = mid + 1;
                }
        }
        if (mid == left) {
                lis[mid] = key;
                return mid;
        }
        lis[mid+1] = key;
        return mid+1;
}

int main(void) {
        int i, tmp, size = 7, lis_length = -1; 
        int *answer;
        int A[7] = {1,8,4,12,6,6,1},
            LIS[7],
            index[7] = {0};

        LIS[0] = A[0];
        for (i = 1; i < size; ++i) {
                LIS[i] = INT_INF;
        }

        for (i = 1; i < size; ++i) {
                index[i] = search_replace(LIS, 0, i, A[i]);
                if (lis_length < index[i]) {
                        lis_length = index[i];
                }
        }

        answer = (int*) malloc((lis_length+1) * sizeof(int));
        for (i = size-1, tmp = lis_length; i >= 0; --i) {
                if (index[i] == tmp) {
                        answer[tmp] = A[i];
                        --tmp;
                }
        }

        printf("LIS: ");
        for (i = 0; i < lis_length+1; ++i) {
                printf("%d ", answer[i]);
        }
        printf("\n");

        return 0;
} 
```

以及代码的输出

```
LIS: 1 4 6 
```

# xml - 为什么 JSON 比 XML 更轻量级？

> ID：12346349
> 
> 赞同：18
> 
> 时间：2012-09-10T06:27:28.890
> 
> 标签：xml, json

我正在寻找 JSON 和 XML 之间的区别。因为，两者都是用于系统之间的数据交换，但是 JSON 和 XML 之间有很大的区别，即 JSON 比 XML 更轻量级。但我无法找到 JSON 轻量级的真正原因。是什么让 JSON 轻量级？

我发现的一个答案是，在 JSON 中没有很多额外的 xml 标记。实际是什么意思。还有更多的原因可以描述为什么 JSON 是轻量级的吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-10T06:31:50.763

您*看过*JSON 和 XML 文档的示例吗？

虽然 JSON 和 XML 都用于表示任意数据*树*，但 XML 更为冗长。树中的每个元素都有一个名称（元素类型名称），并且该元素必须包含在一对匹配的标签中。相比之下，JSON 以类似于 Javascript 的“嵌套数组”类型的符号表示树（事实上，JSON 文档可以按字面意思解析为 Javascript 以产生相应的数组）。

看看[差异](http://json.org/example.html)。

XML 当然在语义上更丰富，因为元素可以用任意数量的*属性*来装饰，并且元素可能包含自由文本流的*混合内容以及嵌套元素。*例如，将以下代码段表示为 JSON 会很乏味：

```
<paragraph>
   This is an entire paragraph of <emph>text</emph>. It is interspersed with
   further, nested <emph>XML elements</emph>, as well as the occasional
   <link href="http://stackoverflow.com/a/12346394/596781">hyperlink</link>.
</paragraph> 
```

另一方面，类似*数据*的文档在 JSON 中可以简单得多。想象一下：

```
<properties>
    <property type="int" name="ID">123</property>
    <property type="date" name="birthday">19700101</property>
    <references>
        <url>http://stackoverflow.com/a/12346394/596781</url>
        <doi>something.made.up</doi>
    </references>
</properties> 
```

这变成了一个非常紧凑的 JSON 数组。

第二个考虑因素是围绕这两种格式的工具集的数量。虽然 JSON 工具主要用于解析 JSON 数据，但 W3C 一直在开发大量相关技术来以系统方式操作 XML，例如 XSLT 和 XPATH。

简而言之，作为一个非常个人的观点，我会说 XML 是关于文档的，而 JSON 是关于数据的。对于大型结构化文档，XML 会感觉更自然和有用，而 JSON 通常是用于传输数据集的更简单、更简洁的格式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-10T06:32:48.127

JSON 表示法更简洁。XML 在结束标记中重复节点类型，而 JSON 只是使用堆栈推断闭包范围。XML 支持命名空间，据我所知 JSON 不支持。XML 模式通常包含类型信息，但没有内在原因不能使用 JSON 执行此操作。应该注意的是，JSON 的兴起在很大程度上是因为它在所有实际*使用*的方面在功能上都等同于 XML 。一旦 LZW 压缩开始起作用，这种差异就消失了，因为 XML 很好地屈服于字典压缩。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-10T06:33:14.940

数据模型不同。除了您自己注意到的缺少标记之外，JSON 还没有所有其他 XML 功能，例如：

*   处理指令
*   评论
*   属性

因此，不仅数据本身更轻量级，任何实现数据模型的库也是如此。这使得使用非 JavaScript 语言渲染、解析和处理 JSON 的速度要快得多。对于 JavaScript，这是不费吹灰之力的，因为 JSON 是实际的 JavaScript 代码，因此对于 JavaScript 解析器来说更“轻量级”来处理

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-10T06:33:33.397

**简单**

XML 比 SGML 简单，但 JSON 比 XML 简单得多。JSON 的语法要小得多，并且更直接地映射到现代编程语言中使用的数据结构。

**可扩展性**

JSON 不可扩展，因为它不需要。JSON 不是一种文档标记语言，因此不需要定义新的标签或属性来表示其中的数据。

**互操作性**

JSON 具有与 XML 相同的互操作性潜力。

**开放性**

JSON 至少与 XML 一样开放，也许更开放，因为它不是企业/政治标准化斗争的中心。

[内容链接](http://www.json.org/xml.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-10T08:08:37.700

这里有几个因素在起作用：

(a) JSON 数据模型更简单；它具有较少的不同种类的对象，并且它们具有较少的属性。

(b) JSON 数据模型更接近 Javascript 等常见编程语言中可用的数据模型，因此在使用这些语言时需要较少的数据转换

(c) JSON 的序列化语法比 XML 的语法具有更少的冗余（不太冗长）。

当然，这些差异是因为 JSON 的设计目的与 XML 不同。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-13T11:32:11.637

它只是比线性因子小。那不是真的更小。压缩后，两种格式占用的空间大致相同。

请记住，已经必须使用 XML 的程序不会因为也允许 JSON 而变得更简单，它们会变得更复杂。除非您摆脱旧标准，否则额外的标准只会使事情复杂化，而且 XML 不会很快消失。

XML 是围绕文档的概念设计的。JSON 更多的是关于简单的数据结构。JSON 不太关心标准，即它没有模式，因此与熟练使用 XML 的人相比，可移植性可能更困难。通常当我必须使用一些 ReSTful 服务时，我会被告知“阅读代码”或“查看 JSON 数据本身”以便理解它。即隐式（并且经常改变）数据格式。

这两种格式都存在这样一个问题，即它们只能以自然形式表示树，而不是数据图。我不喜欢这两种格式。他们俩似乎都完成了一半。对象序列化解决了更多的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-05T17:40:20.160

为什么我们要忘记安全方面？通过网络传输数据时，XML 更安全，因为我们可以准备 XML 信封并发出 SOAP 请求。

# c# - 如何在 C# 中的特定时间隐藏和显示表单？

> ID：12346354
> 
> 赞同：0
> 
> 时间：2012-09-10T06:27:45.930
> 
> 标签：c#, timer, callback, alert

我正在为提醒编写一个小应用程序。为此，我从 Stack Overflow 上的一个类似问题和答案中得到了很大的帮助。[我从这里](https://stackoverflow.com/questions/1297109/how-do-i-generate-an-alert-at-a-specific-time-in-c)使用了迅雷提到的代码。

相关代码为：

```
private void Form1_Load(object sender, EventArgs e)
    {
        System.Threading.TimerCallback callback = new            System.Threading.TimerCallback(ProcessTimerEvent);
        var dt =    new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day   , 10, 0, 0);

        if (DateTime.Now < dt)
        {
            var timer = new System.Threading.Timer(callback, null, dt - DateTime.Now, TimeSpan.FromHours(24));
        this.Hide(); // This line works... Form hides itself
        }

    }

    private void ProcessTimerEvent(object obj)
    {
        //MessageBox.Show("Hi Its Time");
        this.Show();  //This line does not work. Form gets disposed off instead of show
    } 
```

我的问题：我得到了该答案中提到的所有内容（包括 MessageBox）。但是，如果我在进行回调时尝试隐藏表单并再次显示它而不是`MessageBox.Show("Hi Its Time")`它不起作用。请参阅我对每一行的评论。我不明白为什么表格会被处理。

```
this.Visible() // does not work and disposed off the same way 
```

还尝试通过更改其位置属性将表单移出屏幕。返回时，将其带回其原始位置，但这也不起作用。我可以做些什么来隐藏和显示退货表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:57:27.963

我相信您遇到了跨线程问题。您的回调应如下所示：

```
private void ProcessTimerEvent(object obj)
{
    if (this.InvokeRequired)
    {
        this.Invoke(new Action<object>(this.ProcessTimerEvent), obj);
    }
    else
    {
         this.Show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:11:49.650

我刚刚检查并发现您的代码出现此错误：

> 跨线程操作无效：控件“Form1”从创建它的线程以外的线程访问。

您只需将`ProcessTimerEvent`功能更改为：

```
if (this.InvokeRequired)
{
    this.BeginInvoke(new Action<object>(ProcessTimerEvent), obj);

    // To wait for the thread to complete before continuing.
    this.Invoke(new Action<object>(ProcessTimerEvent), obj);
}
else
{
    this.Show();
} 
```

# ios5 - Corebluetooth 获取温度

> ID：12346355
> 
> 赞同：0
> 
> 时间：2012-09-10T06:27:56.900
> 
> 标签：ios5, ios6, core-bluetooth, bluetooth-lowenergy

Form core蓝牙框架如何使用iPhone获取体温或心率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T23:01:35.047

这取决于设备。

[Apple 在其网站](http://developer.apple.com/library/mac/#samplecode/HeartRateMonitor/Listings/HeartRateMonitor_HeartRateMonitorAppDelegate_m.html)上有一个很好的 wahoo BlurHR 心率监测器示例。相同的想法可用于访问任何蓝牙 LE 设备。

[您还可以在此处找到](http://www.byteworks.us/Byte_Works/Blog/Entries/2012/8/20_Controlling_Bluetooth_LE_Devices_with_techBASIC.html)使用 techBASIC 编写的访问加速度计、按钮、电池电量指示器和接近警报的示例应用程序。它的优点是可以完全从 iPhone 或 iPad 访问 BLE 设备，而无需在 Mac 上用 Objective C 编写代码。这可能更好或更糟，具体取决于您的情况。本文逐步介绍了如何连接到 BLE 设备。这些想法适用于任何 BLE 设备，并且同样适用于 iOS。

# iphone - 检查 NSURLConnection 在 iphone 中是否成功？

> ID：12346359
> 
> 赞同：4
> 
> 时间：2012-09-10T06:28:31.713
> 
> 标签：iphone, objective-c, ipad, ios5, nsurlconnection

```
-(void)loadRequest:(NSString *)jsonString{
receivedData = [[NSMutableData alloc]init];
urlString = [[NSString alloc]initWithString:[NSString stringWithFormat:kURL]];
urlRequest=[NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
   requestInformation =[[NSMutableURLRequest alloc]initWithURL:urlRequest cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:60];
[requestInformation setValue:khttpValue forHTTPHeaderField:kContentType];
[requestInformation setValue:@"value1" forHTTPHeaderField:@"key1"];

[requestInformation setHTTPMethod:kPost];
jsonData= [[NSString stringWithFormat:@"json=%@",jsonString] dataUsingEncoding:NSUTF8StringEncoding];
[requestInformation setHTTPBody:jsonData];

connection = [[NSURLConnection alloc] initWithRequest:requestInformation delegate:self];
[connection start];
if(connection){
    NSLog(@"Connection succesfull");
}
else{
    NSLog(@"There is a error in connection");
    [NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(onFailedToUpload) userInfo:nil repeats:NO];

}
} 
```

如何检查 else 部分是否被执行。我给出了不正确的 URL ，调用了 didfailwitherror 方法，但没有执行 else 部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:49:26.423

据我所知，`connection`对象总是被创建的。即使你的网址是错误的。任何错误都来自委托`didFailWithError`方法。您可能需要检查错误并正确进行。前任。如果超时，您可能希望在`didFailWithError`委托中重试。对于其他错误类型的处理方式不同。

如果您想在将其传递给之前处理损坏或错误的 url，`NSURLConnection`那么您需要自己做。

以下是使用时对您有用的代表`NSURLConnection`-

```
- (void)connection:(NSURLConnection *)connection
didReceiveResponse:(NSURLResponse *)response 
{
    NSLog("@Resp received");
    return;
}

- (void)connection:(NSURLConnection *)connection
    didReceiveData:(NSData *)data 
{
    NSLog("@Data received");
    return
}

- (void)connection:(NSURLConnection *)connection
  didFailWithError:(NSError *)error 
{
    NSLog("@ERROR: Achtung !: %@",[error localizedDescription]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH , 0),, ^{
        NSLog(@"FinishedLoading: In bg thread, do something with data here");

        dispatch_async( dispatch_get_main_queue(), ^{
            NSLog(@"FinishedLoading: In Main thread, access the UI here");
        });
    });
} 
```

# android - 使用本地信任库时，Android HttpsUrlConnection javax.net.ssl.SSLException 连接因对等握手错误而关闭

> ID：12346368
> 
> 赞同：12
> 
> 时间：2012-09-10T06:29:25.197
> 
> 标签：android, ssl, android-emulator, openssl, httpsurlconnection

我无法让 Android`OpenSSL`使用该对象连接到一个简单的服务器`HttpsUrlConnection`（我已经梳理了 StackOverflow 和一堆在线教程，并且几乎逐行地按照示例进行操作，但我仍然无法弄清楚为什么我的当我使用本地信任库时损坏）。

我目前有一个尝试连接到简单的 Android 活动`OpenSSL server`（我可以使用 OpenSSL 客户端连接到我的服务器），一旦`HttpsUrlConnection.connect()`被调用，我就会收到一个“`javax.net.ssl.SSLException: Connection closed by peer" error during the SSL handshake.` 也许我错误地设置了我的示例服务器？

注意事项：

*   暂时没有客户授权
*   加载默认信任库时能够连接到[https://www.google.com](https://www.google.com)
*   无法使用自签名证书连接到本地主机上的服务器
*   不想信任所有证书
*   不想使用 Apache HttpClient
*   只想使用本地信任库
*   用充气城堡创建了本地信任库
*   能够正确地将信任库加载到
*   在代理防火墙后面，在我的 android 虚拟设备上设置了代理
*   AVD 设置为`Android 4.1 API 16`.

我已经尝试过的事情：

*   连接到两者`127.0.0.1 and 10.0.2.2`
*   使用新的`SecureRandom() with the SSLContext.init()`
*   创建网址`'URL u = new URL("https", "10.0.2.2", 443, "/");'`
*   使用`TrustManagerFactory.getDefaultAlgorithms()`而不是“X509”
    *   给出`"Unexpected response code error 503"`而不是“连接被对等方关闭”

提前感谢您抽出宝贵时间查看我的问题！

使用命令启动的简单服务器：

```
$ sudo openssl s_server -accept 443 -cert server-cert.pem -key server-key.pem -pass file:passphrase.txt -state -www -verify 0 
```

使用命令测试客户端连接：

```
$ openssl s_client -connect 127.0.0.1:443 
```

Android 活动代码（已编辑以删除完整的运行代码以进行简化 - 如果需要更多代码，请告诉我） - 错误输出位于代码下方。

```
 try {
        TrustManagerFactory tmf;

        // local trust store
        tmf = TrustManagerFactory.getInstance("X509");
        tmf.init(loadLocalKeyStore(getApplicationContext()));

        // default trust store - works for https://www.google.com
        // tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
        // tmf.init((KeyStore) null);

        SSLContext context = SSLContext.getInstance("TLS");
        context.init(null, tmf.getTrustManagers(), null);

        HostnameVerifier hostnameVerifier = org.apache.http.conn.ssl.SSLSocketFactory.STRICT_HOSTNAME_VERIFIER;
        URL u = new URL("https://10.0.2.2");

        HttpsURLConnection urlConnection = (HttpsURLConnection) u.openConnection();

        urlConnection.setSSLSocketFactory(context.getSocketFactory());
        urlConnection.setHostnameVerifier(hostnameVerifier);
        urlConnection.connect();

        System.out.println("Response Code: " + urlConnection.getResponseCode());
        System.out.println("Response Code: " + urlConnection.getCipherSuite());
    } 

    ...

    private KeyStore loadLocalKeyStore(Context context) {
        InputStream in = context.getResources().openRawResource(R.raw.newserverkeystore);
        KeyStore trusted = null;
        try {
           trusted = KeyStore.getInstance("BKS");
           trusted.load(in, "thisisasecret".toCharArray());
        } finally {
           in.close();
        }
       return trusted;
    } 
```

正确连接到[https://www.google.com](https://www.google.com)时的输出：

```
09-09 21:58:09.947: I/System.out(669): Response Code: 200
09-09 21:58:09.947: I/System.out(669): Response Code: TLS_ECDHE_RSA_WITH_RC4_128_SHA 
```

尝试使用自签名证书连接到我的服务器时的输出：

```
09-09 22:03:23.377: D/HttpsProxy(717): Https Request error
09-09 22:03:23.377: D/HttpsProxy(717): javax.net.ssl.SSLException: Connection closed by peer
09-09 22:03:23.377: D/HttpsProxy(717):  at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
09-09 22:03:23.377: D/HttpsProxy(717):  at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:395)
09-09 22:03:23.377: D/HttpsProxy(717):  at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:210)
09-09 22:03:23.377: D/HttpsProxy(717):  at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:478)
09-09 22:03:23.377: D/HttpsProxy(717):  at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:442)
09-09 22:03:23.377: D/HttpsProxy(717):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
09-09 22:03:23.377: D/HttpsProxy(717):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
09-09 22:03:23.377: D/HttpsProxy(717):  at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
09-09 22:03:23.377: D/HttpsProxy(717):  at libcore.net.http.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:165)
09-09 22:03:23.377: D/HttpsProxy(717):  at com.example.myfirstapp.HttpsUrlConnectionActivity$3.doInBackground(HttpsUrlConnectionActivity.java:257)
09-09 22:03:23.377: D/HttpsProxy(717):  at com.example.myfirstapp.HttpsUrlConnectionActivity$3.doInBackground(HttpsUrlConnectionActivity.java:1)
09-09 22:03:23.377: D/HttpsProxy(717):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
09-09 22:03:23.377: D/HttpsProxy(717):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-09 22:03:23.377: D/HttpsProxy(717):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-09 22:03:23.377: D/HttpsProxy(717):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
09-09 22:03:23.377: D/HttpsProxy(717):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-09 22:03:23.377: D/HttpsProxy(717):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-09 22:03:23.377: D/HttpsProxy(717):  at java.lang.Thread.run(Thread.java:856) 
```

再次感谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T09:17:57.857

我解决了我的问题 - 我需要使用 10.0.2.2 作为通用名称 (CN) 的证书，因此它匹配 Android localhost ip 地址 10.0.2.2 而不是“localhost”或“127.0.0.1”。

编辑：您可能可以创建一个证书，其中 localhost 作为 CN，“127.0.0.1”和“10.0.2.2”作为主题备用名称 (SAN)。

创建 10.0.2.2 证书和私钥 pem 文件后，我可以使用以下命令访问运行的服务器：

```
openssl s_server -accept 8888 -cert 10.0.2.2-cert.pem -key 10.0.2.2-key.pem  -state -www 
```

如果您想强制客户端提供证书（尽管不会检查），请将标志添加`-Verify 1`到上面的命令中。

要在命令行测试服务器，您可以使用以下命令（注意 openssl 能够通过 127.0.0.1 连接）：

```
openssl s_client -connect 127.0.0.1:8888 
```

如果服务器需要，要添加客户端证书，请添加标志`-cert client-cert.pem -key client-key.pem`

在我的 Android 客户端中，我使用以下代码进行连接（删除了错误检查）：

```
// use local trust store (CA)
TrustManagerFactory tmf;
KeyStore trustedStore = null;
InputStream in = context.getResources().openRawResource(R.raw.mycatruststore); // BKS in res/raw
trustedStore = KeyStore.getInstance("BKS");
trustedStore.load(in, "insertBksPasswordHere".toCharArray());
tmf = TrustManagerFactory.getInstance("X509");
tmf.init(trustedStore);

// load client certificate
KeyStore clientKeyStore = loadClientKeyStore(getApplicationContext());
KeyManagerFactory kmf = KeyManagerFactory.getInstance("X509");
kmf.init(clientKeyStore, "insertPasswordHere".toCharArray());

SSLContext context = SSLContext.getInstance("TLS");

// provide client cert - if server requires client cert this will pass
context.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);
HostnameVerifier hostnameVerifier = org.apache.http.conn.ssl.SSLSocketFactory.STRICT_HOSTNAME_VERIFIER;

// connect to url
URL u = new URL("https://10.0.2.2:8888/");
HttpsURLConnection urlConnection = (HttpsURLConnection) u.openConnection();
urlConnection.setSSLSocketFactory(context.getSocketFactory());
urlConnection.setHostnameVerifier(hostnameVerifier);
urlConnection.connect();
System.out.println("Response Code: " + urlConnection.getResponseCode()); 
```

您应该得到一个 200 的响应代码，并且可以从那里解析响应。

这是加载客户端凭据的代码，这与加载服务器密钥库相同，但资源文件名和密码不同：

```
private KeyStore loadClientKeyStore(Context context) {
    InputStream in = context.getResources().openRawResource(R.yourKeyStoreFile);
    KeyStore trusted = null;
    trusted = KeyStore.getInstance("BKS");
    trusted.load(in, "yourClientPassword".toCharArray());
    in.close();
    return trusted;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-22T16:12:24.610

我浪费了 6 - 7 个小时来解决这个问题，最后它与

```
public void URLConnection(String webUrl) throws IOException, NoSuchAlgorithmException, KeyManagementException {
        //TLSSocketFactory objTlsSocketFactory = new TLSSocketFactory();
        URL url = new URL(webUrl);
        HttpsURLConnection urlConnection = (HttpsURLConnection)url.openConnection();
        urlConnection.setRequestMethod("GET");
        //urlConnection.setSSLSocketFactory(objTlsSocketFactory);

        int responseCode = urlConnection.getResponseCode();
        System.out.println("\nSending 'GET' request to URL : " + url);
        System.out.println("Response Code : " + responseCode);

        BufferedReader in = new BufferedReader(
                new InputStreamReader(urlConnection.getInputStream()));
        String inputLine;
        StringBuffer response = new StringBuffer();

        while ((inputLine = in.readLine()) != null) {
            response.append(inputLine);
        }
        in.close();

        //print result
        System.out.println(response.toString());
    } 
```

它奏效了！！！！！！！

# mongodb - 当前数据库以外的查询

> ID：12346370
> 
> 赞同：0
> 
> 时间：2012-09-10T06:29:29.737
> 
> 标签：mongodb, database

在 mongoDB 中，我可以查询当前数据库以外的数据库吗？示例：如果我有两个不同的数据库 A 和 B，并且我当前的数据库是 A（在控制台中），那么我可以查询 B 数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:56:21.827

[您可以使用.getSiblingDB()](http://docs.mongodb.org/manual/reference/method/db.getSiblingDB/)方法在同一个 mongod / mongos 实例上查询另一个数据库，例如：

```
use A
db.getSiblingDB('B').collection.find(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:36:06.420

查看手册中有关[打开其他连接](http://www.mongodb.org/display/DOCS/dbshell+Reference)的部分：

```
db = connect("<host>:<port>/<dbname>") 
```

> 打开一个新的数据库连接。一个shell 中可能有多个连接，但是，shell 的自动getLastError 报告仅针对“db”变量完成。

```
conn = new Mongo("hostname") 
```

> 打开与新服务器的连接。之后使用 getDB() 选择数据库。

```
 db = conn.getDB("dbname") 
```

> 为连接选择特定数据库

# objective-c - 如何在 NSMatrix 中取消选择 NSButtonCell

> ID：12346375
> 
> 赞同：1
> 
> 时间：2012-09-10T06:29:58.533
> 
> 标签：objective-c, nsbuttoncell

我的 NSMatrix 中有两个单选按钮，模式为 NSRadioModeMatrix。默认情况下，单击第一个单选按钮。我的问题是当我点击我的第二​​个单选按钮“让我选择”并点击取消时，两个单选按钮似乎都被选中了。当单击“选择文件夹”对话框中的“取消”时，我试图取消选择我的第二个单选按钮。选择路径并选择打开时，它可以正常工作。使用 NSRadioModeMatrix，它必须一次选择一个单选按钮。但是为什么一次选择两个按钮。我在这里做错了什么

```
 NSButtonCell *prototype = [[NSButtonCell alloc] init];
[prototype setTitle:@"Choose home Folder"];
[prototype setButtonType:NSRadioButton];

NSRect matrixRect  = NSMakeRect(15,150,450,125);

myMatrix = [[NSMatrix alloc] initWithFrame:matrixRect mode:NSRadioModeMatrix
                                           prototype:(NSCell *)prototype
                                        numberOfRows:2
                                     numberOfColumns:1];
NSSize cellSize;
cellSize.height =40;
cellSize.width=400;

[myMatrix setCellSize:cellSize];
[myMatrix setTarget:self];
[myMatrix setAction:@selector(HandleRadioClick)];

NSArray *cellArray = [myMatrix cells];
[[cellArray objectAtIndex:0] setTitle:@"Leave it as Default"];
[[cellArray objectAtIndex:0] setTag:0];
[[cellArray objectAtIndex:1] setTitle:@"Let me Choose"];
[[cellArray objectAtIndex:1] setTag:1];

-(void) HandleRadioClick
{
NSOpenPanel* dirDialog = [NSOpenPanel openPanel];
// Enable the selection of files in the dialog.
[dirDialog setCanChooseFiles:NO];

// Multiple files not allowed
[dirDialog setAllowsMultipleSelection:NO];

// Can't select a directory
[dirDialog setCanChooseDirectories:YES];

NSString *selectedFolder;
if ([dirDialog runModal] == NSOKButton)
{
    selectedFolder =[dirDialog filename];
    if([selectedFolder length] > 50)
    {
        [label setFrame:NSMakeRect(45, 120, 400, 80)];
    }
    [label setStringValue:selectedFolder];
}
else{
    [[[myMatrix cells] objectAtIndex:1] setTitle:@"Why its not deselecting" ];
    [[[myMatrix cells] objectAtIndex:1] setSelected:NO];    // Not Working
    [[[myMatrix cells] objectAtIndex:1] deselectRow:1];     // Not Working
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:18:12.480

```
 [[[myMatrix cells] objectAtIndex:1] setSelected:NO] 
```

和

```
 [[[myMatrix cells] objectAtIndex:1] deselectRow:1] 
```

两者都不起作用，因为它们不是 NSButtonCell 的属性

而不是那个方法试试这个

```
[myMatrix selectCellAtRow:0 column:0]; 
```

# ruby - 如何清理混合了哈希和数组的数据？

> ID：12346379
> 
> 赞同：2
> 
> 时间：2012-09-10T06:30:13.417
> 
> 标签：ruby, arrays, hash

我有这样的哈希数据：

```
{
  "current_condition" => [
    {
      "cloudcover"       => "100",
      "humidity"         => "100",
      "observation_time" => "05:44 AM",
      "precipMM"         => "0.0",
      "pressure"         => "1015",
      "temp_C"           => "14",
      "temp_F"           => "57",
      "visibility"       => "13",
      "weatherCode"      => "122",
      "weatherDesc"      => [
        {
          "value" => "Overcast"
        }
      ],
      "weatherIconUrl" => [
        {
          "value" => "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0004_black_low_cloud.png"
        }
      ],
      "winddir16Point" => "NNW",
      "winddirDegree"  => "340",
      "windspeedKmph"  => "15",
      "windspeedMiles" => "9"
    }
  ], 
  "request" => [
    {
      "query" => "94127",
      "type"  => "Zipcode"
    }
  ],
  "weather" => [
    {
      "date"        => "2012-09-09",
      "precipMM"    => "0.0",
      "tempMaxC"    => "21",
      "tempMaxF"    => "69",
      "tempMinC"    => "12",
      "tempMinF"    => "53",
      "weatherCode" => "113",
      "weatherDesc" => [
        {
          "value" => "Sunny"
        }
      ],
      "weatherIconUrl" => [
        {
          "value" => "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png"
        }
      ],
      "winddir16Point" => "W",
      "winddirDegree"  => "279",
      "winddirection"  => "W",
      "windspeedKmph"  => "23",
      "windspeedMiles" => "14"
    },
    {
      "date"        => "2012-09-10",
      "precipMM"    => "0.1",
      "tempMaxC"    => "20",
      "tempMaxF"    => "68",
      "tempMinC"    => "12",
      "tempMinF"    => "53",
      "weatherCode" => "119",
      "weatherDesc" => [
        {
          "value" => "Cloudy"
        }
      ],
      "weatherIconUrl" => [
        {
          "value" => "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0003_white_cloud.png"
        }
      ],
      "winddir16Point" => "WSW",
      "winddirDegree"  => "252",
      "winddirection"  => "WSW",
      "windspeedKmph"  => "17",
      "windspeedMiles" => "11"
    }
  ]
} 
```

一些哈希值只是字符串，其中一些是只有一个元素的数组，如下所示：

```
"weatherDesc"=>[{"value"=>"Cloudy"}] 
```

我想让哈希中的所有元素都像这样：

```
"weatherDesc"=>{"value"=>"Cloudy"} 
```

有没有简单的 Ruby 方法，或者一个循环可以做到这一点？还是我需要遍历每个 key-val 对来展平它？

--更新-9-11-2012

感谢那些讨论并帮助我的人。这是一个更新，我刚刚发现数组中实际上有一个哈希值有2个对象，我在这一行修改了@iioiooioo的代码

```
hash[k] = v.first if v.is_a?( Array ) && v.count == 1 
```

--对此进行更多更新，上面的内容无法正常工作，因为数组中有没有被清理的数组，因为没有处理具有 2 个元素的数组，这将结束对它的递归。我最终这样做了，这并不漂亮，但是......

```
def arr_to_hash(a)
  hash = {}
  for i in 0..a.length-1
      hash[i.to_s] = a[i]
  end
  hash
end

def clean_it( hash )
  hash.each do |k,v|
  hash[k] = arr_to_hash v if v.is_a?( Array ) && v.count > 1
  hash[k] = v.first if v.is_a?( Array ) && v.count == 1
  clean_it( hash[k] ) if hash[k].is_a?( Hash )
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:18:44.943

我同意@iioiooioo，你绝对应该使用递归。我认为这应该做你想要的：

```
def collapse(obj)
  return obj unless obj.respond_to? :each
  if obj.is_a? Array
    ary = obj.map{ |elem| collapse elem }
    ary.first if ary.length == 1
  elsif obj.is_a? Hash
    obj.each { |key, val| obj[key] = collapse val }
    obj
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:56:08.170

我不相信一个简单的循环就足够了，我认为你需要使用递归，就像这样：

```
a = {"current_condition"=> [{"cloudcover"=>"100", "humidity"=>"100", "observation_time"=>"05:44 AM", "precipMM"=>"0.0", "pressure"=>"1015", "temp_C"=>"14", "temp_F"=>"57", "visibility"=>"13", "weatherCode"=>"122", "weatherDesc"=>[{"value"=>"Overcast"}], "weatherIconUrl"=>[{"value"=>"http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0004_black_low_cloud.png"}], "winddir16Point"=>"NNW", "winddirDegree"=>"340", "windspeedKmph"=>"15", "windspeedMiles"=>"9"}], "request"=>[{"query"=>"94127", "type"=>"Zipcode"}], "weather"=>[{"date"=>"2012-09-09", "precipMM"=>"0.0", "tempMaxC"=>"21", "tempMaxF"=>"69", "tempMinC"=>"12", "tempMinF"=>"53", "weatherCode"=>"113", "weatherDesc"=>[{"value"=>"Sunny"}], "weatherIconUrl"=>[{"value"=>"http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png"}], "winddir16Point"=>"W", "winddirDegree"=>"279", "winddirection"=>"W", "windspeedKmph"=>"23", "windspeedMiles"=>"14"}, {"date"=>"2012-09-10", "precipMM"=>"0.1", "tempMaxC"=>"20", "tempMaxF"=>"68", "tempMinC"=>"12", "tempMinF"=>"53", "weatherCode"=>"119", "weatherDesc"=>[{"value"=>"Cloudy"}], "weatherIconUrl"=>[{"value"=>"http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0003_white_cloud.png"}], "winddir16Point"=>"WSW", "winddirDegree"=>"252", "winddirection"=>"WSW", "windspeedKmph"=>"17", "windspeedMiles"=>"11"}]}

def clean_it( hash )

 hash.each do |k,v|
  hash[k] = v.first if v.is_a?( Array )
  clean_it( hash[k] ) if hash[k].is_a?( Hash )
 end

end

clean_it( a )

p a 
```

输出：

```
{"current_condition"=>{"cloudcover"=>"100", "humidity"=>"100", "observation_time"=>"05:44 AM", "precipMM"=>"0.0", "pressure"=>"1015", "temp_C"=>"14", "temp_F"=>"57", "visibility"=>"13", "weatherCode"=
>"122", "weatherDesc"=>{"value"=>"Overcast"}, "weatherIconUrl"=>{"value"=>"http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0004_black_low_cloud.png"}, "winddir16Point"=>"NNW", "wind
dirDegree"=>"340", "windspeedKmph"=>"15", "windspeedMiles"=>"9"}, "request"=>{"query"=>"94127", "type"=>"Zipcode"}, "weather"=>{"date"=>"2012-09-09", "precipMM"=>"0.0", "tempMaxC"=>"21", "tempMaxF"=>"
69", "tempMinC"=>"12", "tempMinF"=>"53", "weatherCode"=>"113", "weatherDesc"=>{"value"=>"Sunny"}, "weatherIconUrl"=>{"value"=>"http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_s
unny.png"}, "winddir16Point"=>"W", "winddirDegree"=>"279", "winddirection"=>"W", "windspeedKmph"=>"23", "windspeedMiles"=>"14"}} 
```

# regex - 从多行中删除前导字符

> ID：12346380
> 
> 赞同：0
> 
> 时间：2012-09-10T06:30:15.507
> 
> 标签：regex

请看下面的例子，我只需要保留那些由 RA 继承的字符：在所有行上，我需要删除直到 RA 的所有值：

例如 FP: 0x33A173D0, RA: 0x947BD1C 应该产生我 0x947BD1C 这些字符的模式通常是相同的，它们以 FP: 开头，两个空格，后跟十六进制值，然后是逗号，两个空格，然后是 RA：我对正则表达式非常陌生，因为我在工作中反复执行此操作，有人建议我通过正则表达式执行此操作，但他们不知道如何..我也不知道。所以我在这里寻求帮助

```
FP: 0x33A173D0, RA: 0x947BD1C
FP: 0x33A173F0, RA: 0x895AA8C
FP: 0x33A17400, RA: 0x8934DD0
FP: 0x33A17430, RA: 0xA3C6990
FP: 0x33A17438, RA: 0xA3C6C10
FP: 0x33A17448, RA: 0xA3C6F4C
FP: 0x33A17480, RA: 0xA68769C
FP: 0x33A17498, RA: 0xA8097A4
FP: 0x33A174F8, RA: 0x9DE4410
FP: 0x33A17528, RA: 0x8E01CD8
FP: 0x33A17548, RA: 0x8E02D1C
FP: 0x33A17560, RA: 0x8E0497C 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:34:44.943

尝试：

```
^(.*?RA: ) 
```

并用空字符串替换匹配的组。或匹配：

```
^.*?RA: (.*)$ 
```

得到你的最终内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:35:12.833

Python 示例：

```
result = re.sub(r"(?m)^.*,\s*RA:\s*", "", subject) 
```

**解释：**

```
(?m)    # Multiline mode
^       # Match start of line
.*      # Match any number of characters
,\s*    # Match a comma, followed by optional whitespace
RA:\s*  # Match "RA:", followed by optional whitespace 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:36:03.927

我假设您正在逐行阅读这些值，然后您可以使用

```
.*RA:\s*(.*)$ 
```

并替换为

```
$1 
```

[在 Regexr 上](http://regexr.com?323j0)查看

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:36:34.547

在支持 REGEX 的文本编辑器（如 vim、UltraEdit）中，找到

```
FP: +0x[0-9A-F]+, +RA: +(0x[0-9A-F]+) 
```

用。。。来代替

```
$1 
```

或在一些特殊的编辑器（如 Crimson Editor、EditPlus）中应替换为

```
\1 
```

# javascript - 在输入类型 date 中设置日期

> ID：12346381
> 
> 赞同：139
> 
> 时间：2012-09-10T06:30:19.937
> 
> 标签：javascript, html, jquery, date

我将在 Chrome中的 datepicker 输入**类型日期**中设置今天的日期。

```
$(document).ready(function() {
    let now = new Date();
    let today = now.getDate()  + '/' + (now.getMonth() + 1) + '/' + now.getFullYear();
    console.log(today);
    $('#datePicker').val(today);
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input id="datePicker" type="date">
```

但是，它不起作用。

请尝试 Chrome 中的代码片段。

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-09-10T07:28:20.083

小提琴链接：http: [//jsfiddle.net/7LXPq/93/](http://jsfiddle.net/7LXPq/93/)

这里面有两个问题：

1.  HTML 5 中的日期控件接受我们在 SQL 中使用的年-月-日格式
2.  如果月份是 9，则需要设置为 09 而不是简单地设置为 9。所以它也适用于日场。

请按照小提琴链接进行演示：

```
var now = new Date();

var day = ("0" + now.getDate()).slice(-2);
var month = ("0" + (now.getMonth() + 1)).slice(-2);

var today = now.getFullYear()+"-"+(month)+"-"+(day) ;

$('#datePicker').val(today); 
```

* * *

## 回答 #2

> 赞同：155
> 
> 时间：2012-11-10T14:30:13.177

`document.getElementById("datePicker").[valueAsDate](https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement#:%7E:text=minimum.-,valueasdate,-Date) = new Date()`

应该管用。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-07-18T12:56:34.773

更新：我正在使用`date.toISOString().substr(0, 10)`. 给出与接受的答案相同的结果，并得到很好的支持。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2018-10-14T12:17:24.420

```
var today = new Date().toISOString().split('T')[0];
$("#datePicker").val(today); 
```

上面的代码将起作用。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-06-11T18:27:45.020

对我来说，解决这个问题的最短方法是使用 moment.js 并在 2 行中解决这个问题。

```
var today = moment().format('YYYY-MM-DD');
$('#datePicker').val(today); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-03-05T14:52:51.280

如果它采用这种格式，您的代码会起作用：`YYYY-MM-DD`，这是日期格式的计算机标准[http://en.wikipedia.org/wiki/ISO_8601](http://en.wikipedia.org/wiki/ISO_8601)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-03-14T20:03:15.003

我通常在使用日期输入时创建这两个辅助函数：

```
// date is expected to be a date object (e.g., new Date())
const dateToInput = date =>
  `${date.getFullYear()
  }-${('0' + (date.getMonth() + 1)).slice(-2)
  }-${('0' + date.getDate()).slice(-2)
  }`;

// str is expected in yyyy-mm-dd format (e.g., "2017-03-14")
const inputToDate = str => new Date(str.split('-')); 
```

然后，您可以将日期输入值设置为：

```
$('#datePicker').val(dateToInput(new Date())); 
```

并像这样检索选定的值

```
const dateVal = inputToDate($('#datePicker').val()) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-08-22T22:58:02.137

您只能在输入`type="date"`中使用日期格式`YYYY-MM-DD`

我已经`formatDate`在 NODE.js express-handlebars 中实现了 helper，不用担心......只需使用第一行中描述的格式。

例如：

```
< input type="date" id="date" name="date" class="form-control" value="{{formatDate invoice.date 'YYYY-MM-DD'}}" /> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-08-30T23:33:47.340

对我来说，获取语言环境日期和正确输入格式的最短方法`type="date"`是：

```
var d = new Date(); 
var today = d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2); 
```

或这个 ：

```
var d = new Date().toLocaleDateString().split('/');
var today = d[2]+"-"+("0"+d[0]).slice(-2)+"-"+("0"+d[1]).slice(-2); 
```

然后只需设置日期输入值：

```
$('#datePicker').val(today); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-10-15T16:48:03.793

**2021**

我发现这样做的一个好方法是使用语言环境进行格式化。您可以通过许多不同的方式使用它。**这适用于您不使用 jquery datepicker，而是使用 html datepicker 时。**

```
 $("#datepickerEnd").val(new Date().toLocaleDateString('en-CA'));//YYYY-MM-dd 
```

或拆分用于操作或调整或其他用途。

```
let theDate = new Date();
  $("#datepickerEnd").val(theDate.toLocaleDateString('en-CA'));//YYYY-MM-dd 
```

操纵示例。

```
 theDate.setDate(theDate.getDate()-7);
  $("#datepickerStart").val(theDate.toLocaleDateString('en-CA'));//YYYY-MM-dd 
```

'en-ca' 是我的日期选择器所需的格式。如果您的不同，您可以查找匹配的字符串格式。由于它将其转换为字符串，因此它不包含用于弄乱每个区域的额外信息。因此，通过这种方式，您可以将其用于纯粹的格式化。

了解更多信息

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-01-27T12:31:58.520

Datetimepicker 总是需要输入格式 YYYY-MM-DD，它不关心模型的显示格式，也不关心你的本地系统日期时间。但是日期时间选择器的输出格式是您想要的（您的本地系统）。[我的帖子](https://stackoverflow.com/questions/48193586/jquery-set-date-value-in-asp-net-core-2-razor)中有一个简单的例子。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-19T10:24:44.820

试试这个，

```
$('#datePicker').val(moment().format('YYYY-MM-DD')); 
```

注意：您需要添加 Moment.js 作为依赖项

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2016-12-09T10:53:26.673

**jQuery版本**

```
var currentdate = new Date();

$('#DatePickerInputID').val($.datepicker.formatDate('dd-M-y', currentdate)); 
```

# php - 致命错误：达到“100”的最大函数嵌套级别，正在中止！带 ionCube 装载机

> ID：12346384
> 
> 赞同：0
> 
> 时间：2012-09-10T06:30:39.423
> 
> 标签：php, zend-framework, magento, ioncube

我收到致命错误：达到“100”的最大函数嵌套级别，正在中止！使用 ionCube 加载器。我不想卸载 IonCube。那我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T06:35:53.767

一些解决方案

*   重写您的代码以确保您永远不会达到 100 个嵌套调用
*   提高限制`xdebug`：`xdebug.max_nesting_level = 200`在`php.ini`

# c# - 通过更新面板请求调用回发

> ID：12346393
> 
> 赞同：2
> 
> 时间：2012-09-10T06:31:37.033
> 
> 标签：c#, asp.net, ajax, updatepanel

我正在使用在计时器滴答事件上触发的更新面板，它执行以下代码在 ShowPanel 方法中，我想让更新面板之外的另一个面板可见。但直到满足回发条件后才会显示。任何机构有解决方案？

```
 protected void timerT_Tick(object sender, EventArgs e)
    {
       if (condition)
        {
            ShowPanel();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:53:50.033

我需要的只是调用回发脚本，如下所示..

```
protected void timerT_Tick(object sender, EventArgs e)
{
   if (condition)
    {
        string jv = "__doPostBack('__Page', 'MyCustomArgument');";
        ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "postback",jv, true);
        ShowPanel();
    }
} 
```

[更多描述信息可在此处获得](http://www.dotnetspider.com/resources/1521-How-call-Postback-from-Javascript.aspx)

# hadoop - hbase和zookeeper的版本

> ID：12346395
> 
> 赞同：2
> 
> 时间：2012-09-10T06:32:15.100
> 
> 标签：hadoop, compatibility, hbase

我目前已经开始使用以下配置的“hbase 90.5”和“hadoop 20.205”。我也想设置动物园管理员。

任何人都可以告诉哪个版本的 Zookeeper 可以与上述版本的 hbase 配合使用吗？

谢谢

哈利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:08:33.570

HBase 0.90.5 使用`ZooKeeper 3.3.2`. 看看它的`pom.xml`：

```
<zookeeper.version>3.3.2</zookeeper.version> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T20:02:14.333

您似乎正在尝试解决许多人已经解决的问题：将 HBase 与 Zookeeper 和 Hadoop 放在一起。没有理由不使用像 Cloudera 或 Hortonworks 这样提供开源软件包的商业供应商。把时间花在问题的独特部分和尚未解决的部分上。

# iphone - 从 iOS 相册中获取图片数据

> ID：12346396
> 
> 赞同：1
> 
> 时间：2012-09-10T06:32:16.100
> 
> 标签：iphone, objective-c, ios, ios5

我需要从 iOS 照片库中存储的图像中获取元数据（EXIF 和其他）。因此我需要原始图片数据而不是 UIImage 对象。

目前我使用 imagepickercontroll 和 ALAssetsLibrary 获取资产图像 url，如下所述：[display image from URL retrieved from ALAsset in iPhone](https://stackoverflow.com/questions/3837115/display-image-from-url-retrieved-from-alasset-in-iphone)

此 url 可用于获取 UIImage 对象，但如何获取原始图像以便处理它的元数据？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:58:20.727

ALAssetsLibrary 在[此处检索所有图像](http://books.google.co.in/books?id=kGy77H7ejY0C&pg=PT508&lpg=PT508&dq=alassetslibrary+erica+sadun+ios+cookbook&source=bl&ots=S_8m7UjbMb&sig=2eeuAG8xBFGK2k1VtEdcRUgzF7o&hl=en#v=onepage&q=alassetslibrary%20erica%20sadun%20ios%20cookbook&f=false)

```
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library assetForURL:assetURL
resultBlock:^(ALAsset *asset)  {
    NSDictionary *metadata = asset.defaultRepresentation.metadata;
    imageMetadata = [[NSMutableDictionary alloc] initWithDictionary:metadata];
    [self addEntriesFromDictionary:metadata];
}
failureBlock:^(NSError *error) {
}];
[library autorelease]; 
```

请参阅更多[getting-metadata-from-images-on-ios](http://blog.codecropper.com/2011/05/getting-metadata-from-images-on-ios/)链接并获得帮助。

# css - 无法让“div”正确浮动

> ID：12346406
> 
> 赞同：1
> 
> 时间：2012-09-10T06:33:00.527
> 
> 标签：css, css-float

![在此处输入图像描述](../Images/11af5d2191ced6f9e119e93aeb96cd42.png)

我无法设置我的 CSS 以正确显示我的页面。我希望“饮料”图标保留在左侧，但我想将整个饮料图像块上移到“饮料”图标的右侧。

我尝试将饮料图标浮动到左侧，然后将饮料图像块也浮动到左侧，但这显然不起作用。

HTML：

```
 <div id="drink_section">

            <img src="/{{MEDIA_URL}}images/images/drinks_order_title.png" alt="" id="drinks_order_title" />                   

            <div id="drink_menu">
                {% for item in drink %}
                    <div id="drink_set">
                        <img src="{{item.photo_menu.url}}" alt="" id="drink_photo" />
                        <img src="/{{MEDIA_URL}}images/images/drinks_title_overlay.png" alt="" id="drinks_title_overlay" />                   
                        <p id="drink_name">{{item.name}}</p> 
                        <p id="drink_price">${{item.price}}</p>

                        <div id="drink_footer">
                            <a id ="drink_order_button" href="{{item.slug}}"></a>
                        </div><!-- end drink_footer-->

                    </div><!-- end drink_set-->
                {% endfor %}
            </div><!-- end drink_menu--> 

        </div><!-- end drink_section--> 
```

CSS

```
#drink_section{
    width:755px;
    float:left;

}

#drink_menu{
    float:left;
}

#drink_title{
    float:left;
    width:128px;
}

#drink_set{
    float:left;
    width:137px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:57:27.047

```
 #drink_section{
        width:755px;
        float:left;
        **display:inline-block;**

    }

    #drink_menu{
        float:left;
    }

    #drink_title{
        float:left;
        width:128px;
    }

    #drink_set{
        float:left;
        **width:400px;** /* more width than current */
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:42:43.807

***[演示](http://tinkerbin.com/8As3FbuX)***

您好，现在您可以更改`ul li`此设计的代码和使用的列表项

像这样

**html**

```
<ul class="ordr">
  <li>
  <img src="http://www.gravatar.com/avatar/772707aec2cb2ce7b372deb2d4e06b51?s=32&d=identicon&r=PG" alt="">
    <p>price tag</p>
    <a href="#">price tag</a>
  </li>
<li>
  <img src="http://www.gravatar.com/avatar/772707aec2cb2ce7b372deb2d4e06b51?s=32&d=identicon&r=PG" alt="">
    <p>price tag</p>
    <a href="#">price tag</a>
  </li>
  <li>
  <img src="http://www.gravatar.com/avatar/772707aec2cb2ce7b372deb2d4e06b51?s=32&d=identicon&r=PG" alt="">
    <p>price tag</p>
    <a href="#">price tag</a>
  </li>
    <li>
  <img src="http://www.gravatar.com/avatar/772707aec2cb2ce7b372deb2d4e06b51?s=32&d=identicon&r=PG" alt="">
    <p>price tag</p>
    <a href="#">price tag</a>
  </li>
      <li>
  <img src="http://www.gravatar.com/avatar/772707aec2cb2ce7b372deb2d4e06b51?s=32&d=identicon&r=PG" alt="">
    <p>price tag</p>
    <a href="#">price tag</a>
  </li>
        <li>
  <img src="http://www.gravatar.com/avatar/772707aec2cb2ce7b372deb2d4e06b51?s=32&d=identicon&r=PG" alt="">
    <p>price tag</p>
    <a href="#">price tag</a>
  </li>
          <li>
  <img src="http://www.gravatar.com/avatar/772707aec2cb2ce7b372deb2d4e06b51?s=32&d=identicon&r=PG" alt="">
    <p>price tag</p>
    <a href="#">price tag</a>
  </li>

</ul> 
```

**css**

```
.ordr{
  list-style:none;}
.ordr li{
float:left;
  background:red;
  width:100px;
  margin-left:1px;
  position:relative;
}
.ordr li img{
  width:100%;
  border:solid 1px black;}

.ordr li p{
position:absolute;
  left:0;
  top:66px;
  text-align:center;
  color:#fff;
  right:0;
  background:rgba(0,0,0,0.5)
} 
```

***[现场演示](http://tinkerbin.com/z28wenJO)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T06:44:48.850

将以下内容提供给图像部分。

```
float:right; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T06:46:43.637

尝试使 **#drink_set**宽度为 100 像素，我认为它会对您有所帮助

```
#drink_set{
    float:left;
    width:100px;
} 
```

# javascript - Javascript - onblur 函数无法更改文本框的值

> ID：12346407
> 
> 赞同：3
> 
> 时间：2012-09-10T06:33:02.480
> 
> 标签：javascript, html, onblur

我有一些文本框允许用户输入从 0 到 20 的数字。所以我有一个 js 验证代码来测试他们是否遵守规则。

我有以下文本框：

```
<input type="textbox" name="tx1" onblur="checkValue(this.value)" />
<input type="textbox" name="tx2" onblur="checkValue(this.value)" />
.... 
```

然后我写了一个这样的js函数：

```
function checkValue(value) {
  if (value > 20) {
     return this.value = 20;
  } else if (value < 0){
     return this.value = 0;
  } else if (value == '' || isNan(value)) {
     return this.value = 0;
  } else {
     return this.value;
  }
} 
```

我试图通过 console.log() 进行测试。我尝试了 alert('hi') 并且它有效。但是，当满足上述条件时，它根本不会改变值。那么有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T06:36:53.567

试试这个

```
<input type="textbox" name="tx1" onblur="checkValue(this)" /> 
```

```
function checkValue(sender) {
var value = parseInt(sender.value);
  if (value > 20) {
     sender.value = 20;
  } else if (value < 0){
     sender.value = 0;
  } else if (value == '' || isNan(value)) {
     sender.value = 0;
  } else {
     return sender.value;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T06:42:19.190

重新编写您的代码，如下所示。只有传球`this`才能胜任。

**HTML**

```
<input type="textbox" name="tx1" onblur="checkValue(this)" />
<input type="textbox" name="tx2" onblur="checkValue(this)" />
.... 
```

**Javascript**

```
function checkValue(obj) {
  if (obj.value > 20) {
     obj.value = 20;
  } else if (obj.value < 0){
     obj.value = 0;
  } else if (value == '' || isNan(obj.value)) {
     obj.value = 0;
  } 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T06:36:40.277

您的脚本返回值，但没有设置这些值的地方。因此，当模糊函数调用脚本时，肯定会调用脚本。但该值未在任何位置设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T07:04:56.530

“isNan()”不是函数，但“isNaN()”是，发送输入元素，不仅是元素的值，用于更新输入值。

```
<script>
    function checkValue(input) {
    console.log(input.value);
  if (input.value > 20) {
     return input.value = 20;
  } else if (input.value < 0){
     return input.value = 0;
  } else if (input.value == '' || isNaN(input.value)) {
     return input.value = 0;
  } else {
     return input.value;
  }
}
</script>

<input type="textbox" name="tx1" onblur="checkValue(this)" />
<input type="textbox" name="tx2" onblur="checkValue(this)" /> 
```

# windows - 程序和功能中的 UAC

> ID：12346410
> 
> 赞同：1
> 
> 时间：2012-09-10T06:33:11.530
> 
> 标签：windows, windows-7, windows-7-x64, addremoveprograms

我有一个二进制文件，它创建并稍后从程序和功能中删除条目（也出现在添加/删除程序中）。虽然我可以在创建条目时获得 UAC 权限，但我的要求不允许我在需要删除条目时显示 UAC 提示。这是有道理的，因为从 HKLM 删除注册表项时您应该需要管理员权限。

但我注意到我可以在没有 UAC 提示的情况下从“程序和功能”窗口中卸载条目。从那里卸载（无论如何都会调用我的二进制文件）与我直接调用我的二进制文件有何不同？有什么方法可以以相同的方式运行我的二进制文件并避免 UAC 提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T20:58:37.537

默认情况下，UAC 对内置的 Windows 控制面板进行特殊处理，允许它们静默提升。因此，当您的卸载程序从程序和功能启动时，它已经被提升并且不需要提示。

没有办法让 Windows 以相同的方式处理第三方应用程序，尽管用户可以更改设置，以便所有应用程序静默提升 - 或者相反，控制面板*不会*静默提升。

# unit-testing - Grails getErrorCount() 返回超过 1 个错误，如何获取错误列表？

> ID：12346417
> 
> 赞同：1
> 
> 时间：2012-09-10T06:33:42.257
> 
> 标签：unit-testing, grails, groovy

我对 grails 中的这个字段有这个约束：

```
businessNumber(matches: '([0-9A-Z]*9)RA([0-9A-Z]*4)', maxSize: 15) 
```

我正在设置 maxSize 约束，以便 grails 在 html 视图上嵌入一个 maxlength 属性。我对如下所示的约束进行了单元测试：

```
void testBusinessNumberExceedMaxSize(){
        mockChildrenSpecialAllowancesForm.setBusinessNumber("F%G&Hy934F4G6H%55")
        assertFalse (mockChildrenSpecialAllowancesForm.validate())
        assertEquals ("maxSize",mockChildrenSpecialAllowancesForm.errors.businessNumber)
        assertEquals (2, mockChildrenSpecialAllowancesForm.errors.getErrorCount())
    } 
```

然后，它会生成此故障：

```
testBusinessNumberExceedMaxSize(com.ass.socialservicescm.ChildrenSpecialAllowancesTests)
|  org.junit.ComparisonFailure: expected:<ma[xSize]> but was:<ma[tches]>
    at org.junit.Assert.assertEquals(Assert.java:125)
    at org.junit.Assert.assertEquals(Assert.java:147)
    at com.ass.socialservicescm.ChildrenSpecialAllowancesTests.testBusinessNumberExceedMaxSize(ChildrenSpecialAllowancesTests.groovy:177) 
```

我假设它违反了 2 个约束（因为我的错误计数是 2），一个是 maxSize，另一个是匹配项。但是我如何为 maxSize 约束做一个 assertEquals 呢？

注意：我正在使用 grails 2.0.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:15:41.313

我会尝试

```
assert 'maxSize' in mockChildrenSpecialAllowancesForm.errors.getFieldErrors('businessNumber')*.code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:59:22.620

我使用它来将所有验证异常解析为字符串，然后在调用代码中执行 assertEquals 并将其与结果进行比较。也许有一种更简单的方法，但现在这对我有用。

```
public static String getErrorString(errors) {
    StringBuffer errorMsg = new StringBuffer();
    errors.allErrors.each {
        if (it instanceof org.springframework.validation.FieldError) {
            if ((it.defaultMessage) == null) {
                errorMsg.append('Error-> ObjectName:' + it.getObjectName() + ' /Field:' + it.getField() + ' /RejectedValue:' + it.getRejectedValue() + ".\n");
            } else {
                errorMsg.append(doReplace((String) it.defaultMessage, it.arguments) + "\n");
            }
        }
    }
    return errorMsg.toString();
}

public static String doReplace(String error, Object[] arguments) {
    int index = 0;
    arguments.each {
        error = error.replace("{" + index + "}", it.toString());
        index++;
    }
    return error;
} 
```

# sql - 通过不敏感的唯一键插入 Sql

> ID：12346420
> 
> 赞同：0
> 
> 时间：2012-09-10T06:34:00.167
> 
> 标签：sql, postgresql, insert, case-sensitive, case-insensitive

我的表上有一个具有唯一键属性的列，但我也希望它以一种不敏感的方式是唯一的。如果有一个像 xyz 这样的键，插入语句的值 Xyz，xYZ 可以正常工作，我想要阻止。我可以用什么来实现这一目标？（我正在使用 postgresql。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:43:02.173

我认为你可以这样做：

```
create unique index on tableName (lower(columnName)) 
```

# rest - 如何从 http://parse.com 上的类更改 objectId？

> ID：12346422
> 
> 赞同：1
> 
> 时间：2012-09-10T06:34:13.943
> 
> 标签：rest, parse-platform

我正在调用 RestAPI 方法来更新对象[https://parse.com/docs/rest#objects-updating](https://parse.com/docs/rest#objects-updating)并且我得到了成功响应，但 objetId 不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:46:45.663

objectId 是不可编辑的字段，因此您将无法对其进行更新。如果您需要使用自己的 ID，则必须在 objectId 字段之外添加一个单独的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:29:08.407

我不确定您是否可以更改objectId。它是系统在实例化时分配的唯一标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T08:27:09.063

除非您导入一个类，否则这是不可能的。如果已存在同名的类，则无法导入该类，因此您需要先合并该数据。

# c++ - 带有模板的 C++ 继承

> ID：12346423
> 
> 赞同：-1
> 
> 时间：2012-09-10T06:34:26.377
> 
> 标签：c++, templates, inheritance

编辑：这只是另一个案例“愚蠢而无趣的错误”。你已经被警告了:)

这是让我彻夜难眠的事情。也许具有较高 C++ 知识的人可以找到如何使其工作：

```
template<class T>
class Base
{
    virtual void Method ( T* arg ) = 0;
};

class Child : public Base<MyType>
{
    void Method ( MyType* arg ) { /*blah*/ };
}; 
```

这不会编译（至少在 VS2008 上不会），因为它无法将两个方法匹配在一起。

目前我们通过在 Method 声明中使用 BaseType 而不是 MyType 来解决它，然后在 Method 的 Child 实现中将 BaseType 转换为 MyType（我们仍然需要 MyType 作为基类中其他内容的模板）。

仍然能够直接使用模板化类型会很好。

编辑：谢谢大家，似乎修复其他错误（后面列出的）使它一切正常。我确实有`template<class T>`，而不是`template<T>`在我的原始代码以及列为公共的方法。这表明我应该在发布之前等待更长的时间。我为此道歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T06:38:34.493

这是编译和工作正常的完整示例：

```
struct MyType
{
};

template< class T>
class Base
{
public:
    virtual void Method ( T* arg ) = 0;
};

class Child : public Base<MyType>
{
  public:
    void Method ( MyType*  ) { /*blah*/ };
};

int main()
{
  MyType a;
  Child b;

  b.Method( &a );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T06:43:43.847

您需要在第一类模板中使用正确的语法：

```
template<typename T> // here! You can also use "class" instead of "typename".
class Base
{
    virtual void Method ( T* arg ) = 0;
}; 
```

并且您的第二个类必须是类模板，除非`MyType`是类型：

```
template <typename MyType>
class Child : public Base<MyType>
{
    void Method ( MyType* arg ) { /*blah*/ };
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T06:39:35.603

在第一行写`template<class T>`而不是`template<T>`. 这样就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T06:52:52.383

为了您想要的结果，您需要将基类方法公开

```
 template<class T> class Base
    {
        public: // public definition is important or else it won't be overridden
        virtual void Method ( T* arg ) {
            cout << "Method in base.";
        }
    };

class Child : public Base<char>
{
    void Method ( char* arg ) {
       cout << "Method in child.";
    };
}; 
```

# clojure - 如何托管 CGI 应用程序？

> ID：12346432
> 
> 赞同：1
> 
> 时间：2012-09-10T06:34:56.787
> 
> 标签：clojure, ring, noir

到目前为止，我已经测试了 hunchentoot-cgi(CL)、maytpd2(Haskell)、ocsigen(OCaml)、yaws(erlang) 来托管旧的 python CGI 应用程序。除了hunchentoot-cgi，一切都很好。我喜欢 Lisp 风格的编程，所以我真的很想将应用程序托管在 Lisp 风格的 Web 服务器中。

在erlang中，我只需要如下配置它：

```
>cat ~/yaws.conf
...
<server 192.168.1.2>
    port = 8000
    listen = 0.0.0.0
    docroot = /media/G/www/qachina/
    access_log = false
    appmods = <cgi-bin, yaws_appmod_cgi>
</server>
... 
```

然后 python CGI 应用程序可以工作。

Noir/Ring怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:28:12.347

Ring（以及因此，Noir）并不是您所想的那种网络服务器。它是一个用于创建 Web 应用程序的框架。它不提供对外部应用程序的访问；相反，它允许您在 Clojure 中编写自己的动态 Web 应用程序。然后可以将这些应用程序部署到标准 Java servlet 容器或使用嵌入式 Jetty Web 服务器手动运行。

当然可以创建这样的 Web 应用程序，它会获取外部 CGI 程序的输出，对其进行处理并将结果提供给客户端，但是您必须自己编写所有 CGI 处理（例如解析 HTTP 标头并构建标准 Ring响应图）。据我所知，环形堆栈没有 CGI 包装器。

# php - 如何使用 API 获取带有绝对 URL 的维基百科页面 HTML？

> ID：12346445
> 
> 赞同：3
> 
> 时间：2012-09-10T06:36:08.343
> 
> 标签：php, wikipedia-api, mediawiki-api

我正在尝试使用此代码通过 wikipedia API 检索文章

```
$url = 'http://en.wikipedia.org/w/api.php?action=parse&page=example&format=json&prop=text';
$ch = curl_init($url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
$c = curl_exec($ch);
$json = json_decode($c);
$content = $json->{'parse'}->{'text'}->{'*'}; 
```

我可以在我的网站上查看内容，一切都很好，但是我检索到的文章中的链接有问题。如果您打开网址，您会看到所有链接都以 href=\"/ 开头，这意味着如果有人点击文章中的任何相关链接，它会将他重定向到**www.mysite.com** /wiki/..（错误 404）**en.wikipedia.com** /wiki/.. 是否有任何代码可以添加到现有代码中来解决此问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T12:25:53.707

这似乎是 MediaWiki `action=parse`API 的一个缺点。事实上，有人已经提交[了一项功能请求，要求提供`action=parse`返回完整 URL](https://bugzilla.wikimedia.org/show_bug.cgi?id=40128)的选项。

作为一种解决方法，您可以尝试自己破坏链接（如 adil 建议的那样），或者`index.php?action=render`像这样使用：

*   [http://en.wikipedia.org/w/index.php?action=render&title=Example](http://en.wikipedia.org/w/index.php?action=render&title=Example)

这*只会*为您提供没有 API 包装器的页面 HTML，但如果这就是您想要的，那么它应该没问题。（例如，这是[InstantCommons](http://www.mediawiki.org/wiki/InstantCommons)内部用来显示远程文件描述页面的方法。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T07:35:31.683

您应该能够像这样修复链接：

```
$content = str_replace('<a href="/w', '<a href="//en.wikipedia.org/w', $content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-12T11:06:17.777

以防其他人需要替换 URL 的所有实例。

您需要使用正则表达式和`g`标志

`/<a href="\/w/g`

# java - ensureIndexIsVisible(int) 不起作用

> ID：12346446
> 
> 赞同：2
> 
> 时间：2012-09-10T06:36:16.967
> 
> 标签：java, swing, jscrollpane, jlist, listselectionlistener

我对 Java 很陌生，并且正在使用 Netbeans。我制作了一个 JList 用作接收器，它包含在 jScrollPane 中。当我将项目添加到 jList 时，我希望它贴在底部，以滚动列表中的最后一个项目。我尝试过使用`ensureIndexIsVisible(int)`，但它似乎根本没有任何效果。

我已经宣布了 DLM...

```
public class ShoppingCart extends javax.swing.JFrame {

DefaultListModel dlm = new DefaultListModel(); 
```

我正在使用它来填充列表....

```
private void PrintToReceipt(){

    JList Receipt = new JList( dlm );

    dlm.addElement(ItemQuantity + "@ " + Money.format(ItemPrice) + " * " + TaxRate.format(ItemTax) + "% = " + Money.format(ItemTotal));

    Receipt.ensureIndexIsVisible(Receipt.getSelectedIndex());

} 
```

我也尝试过 的变体`getSelectedIndex`，但只是简单地放置我的变量来跟踪我添加了多少项目，没有任何效果。当我添加更多然后可以在视口中看到时，它会简单地继续添加它们，但滚动条保持在顶部。谁能告诉我我还能尝试什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T06:46:25.727

检查选择的索引值是什么。还尝试将 ensureIndexIsVisible 包装在`SwingUtilities.invokeLater`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T06:57:35.947

有两种方法：

通过包装`ensureIndexIsVisible`到`invokeLater`（`@Stas`如上所述+1）

或者

直接使用`ListSelectionListener`，例如

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.*;

public class ListOneItem extends JFrame implements ListSelectionListener {

    private static final long serialVersionUID = 1L;

    public ListOneItem() {
        setLayout(new GridLayout(1, 2));
        String[] numbers = {"one", "two", "three", "four", "five", "six", "seven"};
        final JList list = new JList(numbers);
        list.setVisibleRowCount(1);
        list.addListSelectionListener(this);
        JScrollPane scrollPane = new JScrollPane(list);
        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_NEVER);
        scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        add(scrollPane);
        Runnable doRun = new Runnable() {

            @Override
            public void run() {
                list.setSelectedIndex(3);
            }
        };
        SwingUtilities.invokeLater(doRun);
    }

    @Override
    public void valueChanged(final ListSelectionEvent e) {
        JList list = (JList) e.getSource();
        list.ensureIndexIsVisible(list.getSelectedIndex());
    }

    public static void main(String[] args) {
        Runnable doRun = new Runnable() {

            @Override
            public void run() {
                ListOneItem frame = new ListOneItem();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.setLocationRelativeTo(null);
                frame.pack();
                frame.setVisible(true);
            }
        };
        SwingUtilities.invokeLater(doRun);
    }
} 
```

# java - 获取android设备的服务器ip

> ID：12346447
> 
> 赞同：0
> 
> 时间：2012-09-10T06:36:17.843
> 
> 标签：java, android, client-server, ip

在我的应用程序中，我需要获取服务器 ip .. 我获取 ip 的代码是

```
try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                Log.v("","ip1--:" + inetAddress);
                Log.v("", "ip2--:" + inetAddress.getHostAddress());       
                String ipv4;
      if (!inetAddress.isLoopbackAddress() && InetAddressUtils.isIPv4Address(ipv4 = inetAddress.getHostAddress())) {

                    String ip = inetAddress.getHostAddress().toString();
                    Toast.makeText(getApplicationContext(), inetAddress., Toast.LENGTH_SHORT).show();
                    Log.v("","ip---::" + ip);
                    // return inetAddress.getHostAddress().toString();
                    return ipv4;
                }
            }
        } 
```

但如果设备连接到联网的 wifi 设备，它会返回本地地址。请告诉我如何获取网络的父 ip。提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:42:15.233

```
WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
WifiInfo wifiInfo = wifiManager.getConnectionInfo();
int ipAddress = wifiInfo.getIpAddress(); 
```

请注意，ipAddress 是一个整数。

例如，如果您的 IP 地址是“86.52.119.245”：

```
the int returned by getIpAddress will be 4118230102.
Translated into binary this number is: 11110101 01110111 00110100 01010110.
Convert each byte into a decimal, and then you get the numbers: 80 35 83 10
Notice that the numbers are in network order so you have to flip it. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:35:59.780

```
private String wifi_ip() 
    {
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpGet httpget = new HttpGet("http://wiki.iti-lab.org/ip.php");
            HttpResponse response;

            response = httpclient.execute(httpget);

            // Log.i("externalip",response.getStatusLine().toString());

            HttpEntity entity = response.getEntity();
            if (entity != null) {
                long len = entity.getContentLength();
                if (len != -1 && len < 1024) {
                    String str = EntityUtils.toString(entity);
                    // Log.i("externalip",str);
                    // ip.setText(str);
                    ip1 = str;
                }
            }
        } catch (Exception e) {
            // ip.setText("Error");
        }
        return ip1;
    } 
```

# javascript - 如果条件匹配，则停止执行脚本

> ID：12346454
> 
> 赞同：0
> 
> 时间：2012-09-10T06:36:58.607
> 
> 标签：javascript, jquery

当用户单击提交按钮时，脚本会修改页面上打印的购物车。但是，如果用户再次单击它，它将再次添加同一行，我需要停止它。

**所以我只希望脚本只修改一次页面的内容，如果内容已经改变，什么也不做。**

这是我尝试过的：

```
$(document).ready(function () {
    $(function () {
        $(".submit").click(function () {
            var a = $('.simpleCart_input').val();
            var a1 = $('.simpleCart_input').val();
            if (a1 == a + " kpl") {
                return false;
            } else {
                $('.itemRow .item-quantity').text(a + " kpl");
            }
            var b = $('.itemRow .item-price').html();
            var b1 = $('.itemRow .item-price').html();
            if (b1 == b + " /kpl") {
                return false;
            } else {
                $('.itemRow .item-price').text(b + " /kpl");
            }
            var c = $('.itemRow .item-total').html();
            var c1 = $('.itemRow .item-total').html();
            if (c1 == "Yhteensä: " + c) {
                return false;
            } else {
                $('.itemRow .item-total').text("Yhteensä: " + c);
            }
            var d = $('.simpleCart_grandTotal').html();
            var d1 = $('.simpleCart_grandTotal').html();
            if (d1 == "Tuotteet yhteensä " + d) {
                return false;
            } else {
                $('.simpleCart_grandTotal').text("Tuotteet yhteensä " + d);
            }
            var data = $('#yhteystiedot').serializeArray();
            data.push({
                name: 'cartContent',
                value: $('#emailedcart').html()
            });
            //alert (data);return false;
            $.ajax({
                type: "POST",
                data: data,
                url: "order/order.php",
                dataType: "html",
                error: function () {
                    alert("Jotakin meni pahasti pieleen! Yritä uudelleen?");
                },
                success: function () {
                    alert("Onnistui");
                }

            });
            return false;

        });
    });
}); 
```

这对我不起作用。

[样本](http://jsfiddle.net/UUYqx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:42:53.063

类似的东西应该有效：

```
$(document).ready(function () {
    var gDone = false;
    $(".submit").click(function () {
        if (gDone) return false; // already submitted
        gDone = true;
        // ...
    });
}); 
```

编辑：停用或隐藏提交按钮对用户更友好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:43:03.827

您的 onclick 处理程序不可能返回 false，因为您正在比较 2 个相同的元素并期望 2 个不同的值：

```
var a = $('.simpleCart_input').val();
var a1 = $('.simpleCart_input').val();
if (a1 == a + " kpl") { 
```

...所有行也是如此。`a1`永远不会`a + " kpl"`，因为您对两者都进行了相同的选择，`a`并且`a1`.

# ssis - 在数据流期间在列中捕获 oracles 的 (sequence.nexval) 值

> ID：12346455
> 
> 赞同：1
> 
> 时间：2012-09-10T06:37:18.373
> 
> 标签：ssis

我正在从 SQL 服务器表插入到 Oracle 表，该表的标识列有一个序列。我使用 OLDDB 命令作为我的目的地，并使用以下查询插入到 oracle 表中

```
Insert into tablename (id, col1,col2....) values (seq.nextval,?,?,...) 
```

我将所有参数映射到源列，它就像一个魅力，包括为标识列生成序列。

我的另一个要求是第一个表中生成的序列必须映射到另一个表的外键关系，如下：

```
table 1

emp table with columns 
empid ----------- generated from sequence
name suffix

table 2

empinfo table with column
empinfoid ---- generated from sequence 
empid ----- id that was generated in table 1\. 
address
edulevel 
```

由于我在这两个表之间没有任何其他公用键，因此我无法从表 1 中查找并将 empid 拉到表 2。

如何将 empid（从序列生成）并行插入两个表？我尝试使用 oledb 命令输出参数，但没有成功，因为 Oracle 连接无法找到输出参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-25T16:30:28.247

如果您在同一个会话中运行两个插入语句，则可以`seq.currval`在 table2 中插入。

# sql-server - 最适合处理 100MB 到 GB 的数据库

> ID：12346459
> 
> 赞同：0
> 
> 时间：2012-09-10T06:37:40.883
> 
> 标签：sql-server, oracle, tree, search-engine, information-retrieval

我需要存储 100MB 到 1Gb 的数据（像 BOOK1、BOOK2 等字符串）并且它会增长。当用户对 book1（按名称）的名字搜索完成时（并且应该很快）并且一旦找到匹配项，它就会检索与 book1 相关的数据，例如作者姓名、出版日期、版本等。

1GB的数据只是书名，但与书籍相关的数据更多（作者姓名、版本、印刷日期等）。因此，如果我只考虑 1GB（将增长）作为索引，Oracle 或任何 SQL 数据库将快速有效地进行文本搜索（搜索只是书名，没有书扫描）。

[我想使用后缀树构建索引，但它使用了 40 次 * 没有字符，这是巨大的。]

Oracle 或 MS Sql 或 MySQL 是不错的选择吗？还是我需要考虑 Hadoop MapReduce 或分布式计算。

Oracle 或其他 SQL 是否有关于访问时间和并发访问数的基准？

非常感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:45:17.017

根据您的存储要求，您可以使用具有以下限制的 Oracle XE：

1.  它将允许您存储多达 4G 的数据
2.  使用高达 1G 的 RAM

此外，它是免费使用的。你可以[在这里下载](http://www.oracle.com/technetwork/products/express-edition/downloads/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:46:00.447

您提到的任何数据库都可以处理 1 GB 的数据，它认为它很小

# android - 我可以使用 android 模拟器的 selenium web 驱动程序按下后退按钮吗

> ID：12346460
> 
> 赞同：5
> 
> 时间：2012-09-10T06:37:40.397
> 
> 标签：android, selenium

我可以使用 selenium 网络驱动程序按下 android 模拟器的后退按钮吗？

寻求帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-16T18:21:33.047

我将 Selenium 与 A​​ppium 和 Android 模拟器一起使用，成功了

```
webdriver.navigate().back(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T03:55:34.877

从我的 java 类运行以下命令。它可以帮助我按下后退按钮。

```
 Runtime.getRuntime().exec("cmd /K cd " +"../libs/android-sdk-windows/platform-tools");
         Runtime.getRuntime().exec("cmd /C adb shell input keyevent 4"); 
```

希望它会帮助别人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T12:27:10.080

我有以下假设：因为我们有这样的映射

```
**Emulated Device Key** -**Keyboard Key**:
Home -  HOME;
Menu (left softkey)  -  F2 or Page-up button;
Star (right softkey) -  Shift-F2 or Page Down;
Back  - ESC; 
```

尝试模拟发送“esc”键。

```
element.sendKeys(Keys.ESCAPE) 
```

如果您想处理一些弹出窗口（例如警报或确认对话框）并且没有任何可能本地化元素 prolly 这有效：

```
Alert a = driver.switchTo().alert();
a.confirm(); // or dismiss() if you want to hit 'cancel' 
```

希望这对你有帮助）

# casting - 意外的编译器错误（多余的演员？）

> ID：12346464
> 
> 赞同：0
> 
> 时间：2012-09-10T06:37:59.510
> 
> 标签：casting, g++

我目前正在编写自己的内核自下而上，我在线性内存管理器中遇到了这个小问题，我似乎无法理解。

我有以下代码； `void* end_page_address = /*(void*)*/ 0x3FF000;`

但是，当禁用 void 指针强制转换时，g++ 会出现以下错误；

`src/paging/LinearMemoryManager.cpp: In constructor 'LinearMemoryManager::LinearMemoryManager(PhysicalMemoryManager*)': src/paging/LinearMemoryManager.cpp:87:42: error: invalid conversion from 'int' to 'void*' [-fpermissive]`

怎么会？- 因为它显然通常不需要，因为它上面的行在没有演员表的情况下编译得很好：

`void* start_page_address = 0x00000000;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:12:48.213

我认为地址为 0 的 NULL 指针（甚至写为`0x00000`或类似）值得在 C++ 规范（以及 GCC 编译器内部）中进行特定处理。顺便说一句，添加了 C++11`nullptr`及其类型，这是有充分理由的。

但是非零地址`void* end_page_address = (void*) 0x3FF000;` 需要显式转换。

我希望您在使用 C++ 编写内核时了解 C++ 技巧（异常、构造函数、RTTI...）。您可能需要*准确*了解您的特定版本如何`g++`处理它们。

^(我也希望你的内核是自由软件（GPL-ed），并且你遵循*“早发布，经常发布”*的座右铭。我很想看看它的源代码。)

# ruby-on-rails - Ruby on Rails 中的绑定参数

> ID：12346465
> 
> 赞同：0
> 
> 时间：2012-09-10T06:38:09.213
> 
> 标签：ruby-on-rails, rails-routing

我之前也问过一个与此主题相关的问题，借助该问题，我找到了我想要的名称：“<strong>bound parameters”。

我设法通过向`routes.rb`. 但是，这种类型的 URL 不是我正在寻找的解决方案。

我的问题是，您如何提供'user/dosomething/:id' 以匹配作为参数发送的动作用户的`dosomething`动作？`id`

这是[我](http://guides.rubyonrails.org/routing.html#bound-parameters)为了了解这个想法而阅读的部分：

> ### 3.1 绑定参数
> 
> 当您设置常规路由时，您需要提供一系列符号，Rails 将这些符号映射到传入的 HTTP 请求的一部分。其中两个符号是特殊的：`:controller`映射到应用程序中的控制器名称，以及`:action`映射到该控制器中的操作名称。例如，考虑这条路线：
> 
> ```
> get ':controller(/:action(/:id))' 
> ```
> 
> 如果这个路由处理了传入的请求`/photos/show/1`（因为它没有匹配文件中任何先前的路由），那么结果将是调用 的 show 操作，`PhotosController`并使最终参数`"1"`作为`params[:id]`. 该路由还将路由到的传入请求`/photos`， `PhotosController#index`因为`:action`和`:id`是可选参数，用括号表示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:31:46.717

您可以添加自定义路由：

```
get 'user/doesomething/:id' => 'users#do_something', :as => 'do_something_user' 
```

`GET`这会将与 URL 匹配的 HTTP 请求路由`user/dosomething/:id`到`UsersController`'s`do_something`操作。该`:as => 'do_something_user'`部分命名路由，以便您可以使用`do_something_user_path`和`do_something_user_url`帮助器来生成 URL。

有关路由的更多信息，请参阅[Rails Routing from the Outside In](http://guides.rubyonrails.org/routing.html)。

# vba - 比较基本字符串指数复杂度

> ID：12346466
> 
> 赞同：1
> 
> 时间：2012-09-10T06:38:09.853
> 
> 标签：vba, structure

我可能会问一个愚蠢的问题，但我正在自学 VBA，我只是被难住了，我什至不确定我可以使用哪些术语来查找解决方案。

我正在编写一个将三个变量与其他三个变量进行比较的代码，然后我想显示哪些变量已更改。

所以如果 x = a 但 y <> b 和 z <> c 那么输出应该是 b/c

我制定了一个可以正常工作的代码

```
 Dim Str As String
    If X <> A Then
        If Y <> B Then
            If Z <> C Then
                Str = "a/b/c"
            Else
                Str = "a/b"
            End If
        ElseIf Z <> C Then
            Str = "a/c"
        Else
            Str = "a"
        End If
    ElseIf Y <> B Then
            If Z <> C Then
                Str = "b/c"
            Else
                Str = "b"
            End If
    Else
        Str = "c"
    End If 
```

但是随着我增加变量的数量，这会很快变得非常复杂。

如果有人能帮助我找到一种没有指数复杂性的更简单的方法，我将不胜感激。

非常感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:55:55.767

您需要相互独立地测试每个变量对——而不是在一个巨大的`If`构造树中将它们链接在一起。

例子：

```
str = "" 'Start with blank string. Append as required.
If x <> a Then str = str & "a/"
If y <> b Then str = str & "b/"
If z <> c Then str = str & "c/"

'Remove the extra / at the end
If Right(str, 1) = "/" Then str = Left(str, Len(str - 1)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T06:49:53.120

您可以将 2 个字符串放入 2 个数组中，然后使用`FOR...NEXT`构造来循环两个数组。您可以使用`UBound(arValues)`动态找出数组中的项目数。
祝你好运

# forms - Display on a view fields values from different forms - Lotus Notes

> ID：12346467
> 
> 赞同：0
> 
> 时间：2012-09-10T06:38:31.350
> 
> 标签：forms, view, lotus-notes

I have a main form which contain an embedded view. This embedded view is displaying field values that exist in another form. How can i display fields that are in the main form and fields that are in the other form on the same ordinary view?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:21:17.483

Firstly, your View Selection formula needs to select documents created with both forms

```
SELECT Form = "Main" | Form = "Other" 
```

or you can use a short-hand version

```
SELECT Form = "Main":"Other" 
```

Then you need to enter a conditional formula in the column where you want to display values from documents created with both forms

```
@IF(Form = "Main" ; FieldName1 ; Form = "Other" ; FieldName2 ; "") 
```

although, as only those two forms are permitted, you can shorten that too

```
@If(Form = "Main"; FieldName1 ; FieldName2) 
```

Hope this helps, Phil

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:52:57.263

You could emulate the view in a rich text field, using the technique I describe here: [http://www.bleedyellow.com/blogs/texasswede/entry/dynamictables](http://www.bleedyellow.com/blogs/texasswede/entry/dynamictables)

You need to modify the code to get both your "main" document and your "other" document, and combine them together into one row. This way you can display values from different documents (even one "main" and multiple "other" documents).

It would work something like this:

*   Create temp document with rich text field.
*   Get the first "main" document and "other" document(s) associated with it (doc.Responses if they are child documents).
*   Create a new document using the row template form, and put values into the different fields.
*   Render the new row document into the rich text field on the temp document.
*   Repeate above steps for each main document.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T15:01:24.417

If you only have values from one other document displayed on the main form, there's no need to use an embedded view to display the values. You could use computed text to display the values from the second document along with values from the main document.

If you need to view multiple documents and want to include values from the main document in the embedded view on the same lines as the other documents, I would recommend having the values from the main document be stored on those other documents, rather than trying to put the other document data on the main form (since there would be multiple other documents, requiring multiple field values on the main).

That said, if the field values are already on the main form, why do you need to display them a second time on those lines in the embedded view? After all, it would repeat the same value on every line in that column.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T06:47:40.437

Visualize it in sql format:

Form A:
EmpNum | Name

Form B:
Name | Project

Can I have something like this in Lotus Notes:

SELECT *
FROM Form A, Form B
WHERE Form A.Name = Form B.Name

# iphone - 访问文件夹中的所有图像 iphone 应用程序

> ID：12346473
> 
> 赞同：4
> 
> 时间：2012-09-10T06:38:54.737
> 
> 标签：iphone, ios, xcode, nsfilemanager

我正在使用 Xcode 制作 iPhone 应用程序，以下是目录结构

```
GFGGAME
  -gfggame.xcodeproj
  -Images
    --bagold
     ---bags_1.png
     ---bags_2.png
    --bagsnew
     ---bags_5.png
     ---bags_6.png 
```

我想访问文件夹`bagsold`和`bagsnew`. 如果我对 png 使用资源路径和谓词过滤器，它会给我所有 png 文件。有没有办法我可以只访问文件夹中存在的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:35:24.760

从您对其他已回答的人的回复来看，在我看来，您将文件夹与 Xcode 组混淆了。Xcode 组与设备上的文件夹不对应。它们只是为了帮助您组织您的 Xcode 项目*，*而不是设备。任何资源都直接复制到具有平面层次结构的主目录包中。

当您将文件夹拖入 Xcode 以将其添加到项目中时，您需要选择*“为任何添加的文件夹创建文件夹引用”*而**不是** *“为任何添加的文件夹创建组”*。这将在构建应用程序时保留目录布局。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T06:46:45.110

我想你可能想使用这种`NSBundle`方法：

```
+ (NSArray *)pathsForResourcesOfType:(NSString *)extension inDirectory:(NSString *)bundlePath 
```

[在此处查看 API 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html)

您将`@".png"`作为扩展名传递，然后为您想要的子目录指定目录路径（您可能需要调用两次，每个子目录调用一次，然后只需将第二个路径数组附加到第一个）。

[在此处查看有关 Stack Overflow 的类似问题](https://stackoverflow.com/a/8743760/119114)

**请注意**上面答案（链接）中的要点，即您需要在 Xcode 中做什么才能使其工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T07:06:07.637

做这个：

```
NSString *bundleRootpath = [[NSBundle mainBundle] bundlePath];
NSString *filePath = [bundleRootpath pathForResource:@"bags_1" ofType:@"png" inDirectory:@"Images/bagold"]
NSFileManager *fileMangr = [NSFileManager defaultManager];
NSArray *dirContents = [fileMangr contentsOfDirectoryAtPath:bundleRootpath error:nil]; //your path here it may be document directory also 
```

过滤 JPG（如果有）

```
NSArray *onlyJPGs;
if([dirContents count] > 0){
NSPredicate *fltrJPG = [NSPredicate predicateWithFormat:@"self ENDSWITH '.jpg'"];
onlyJPGs = [dirContents filteredArrayUsingPredicate:fltrJPG];
} 
```

现在 PNG 如果有的话

```
NSArray *onlyPNGs;
if([dirContents count] > 0){
NSPredicate *fltrPNG = [NSPredicate predicateWithFormat:@"self ENDSWITH '.png'"];
onlyPNGs = [dirContents filteredArrayUsingPredicate:fltrPNG]; 
```

搜索任何其他格式（如果有）

将 onlyJPG 和 onlyPNG 合并到一个数组中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-29T11:40:03.033

只是为了多样化:)

```
 NSMutableArray *filePaths = [NSMutableArray arrayWithArray:[NSBundle pathsForResourcesOfType:nil inDirectory:fullPathToFolder]];
    NSMutableArray *toDelete = [NSMutableArray array];
    if(filePaths.count>0){
        [filePaths enumerateObjectsUsingBlock:^(NSString* obj, NSUInteger idx, BOOL *stop) {
            if(!([obj hasSuffix:@"jpg"] || [obj hasSuffix:@"png"])){
                    [toDelete addObject:obj];
            }
        }];
    }
    [filePaths removeObjectsInArray:toDelete];
    return filePaths; 
```

# c - CDT API 将头文件附加到 Eclipse CDT 中的 C 项目

> ID：12346478
> 
> 赞同：0
> 
> 时间：2012-09-10T06:39:17.147
> 
> 标签：c, eclipse, eclipse-plugin, eclipse-cdt

我们制作了一个 Eclipse CDT 插件，以创建一个遵循整个组织的特定标准集的 C 项目布局。我们维护某种定义项目/产品依赖关系的 XML 文件。这意味着，每个产品都有一个 XML 文件，该文件定义了该产品中的源文件/头文件。

因此，当在 Eclipse CDT 中导入 C 项目时，我们的插件不会遵循标准的 CDT 项目设置，而是将产品名称作为输入并解析产品的 XML 以生成具有适当源文件的 C 项目。

我们能够使用 Eclipse 中的以下 API 和链接资源概念将源文件附加到 C 项目。

```
org.eclipse.core.resources.IFolder   
org.eclipse.core.resources.IFile 
```

我们还能够使用以下类将头文件附加到同一个 C 项目。

```
org.eclipse.cdt.core.model.IIncludeEntry 
```

> 注意：我们使用 inlcude 目录作为输入创建了 IIncludeEntry 实例。Eclipse 的扫描器发现机制是识别每个目录中的各个源文件，并在 C 项目的“包含”标签下显示它们。

现在源文件显示在“Source”标签下，头文件显示在 C 项目的“Includes”标签下。我们可以毫无问题地修改和构建源文件。

但是，我们无法编辑任何头文件。**如果我通过Project >> Properties >> C/C++ General >> Paths and Symbols**手动添加外部头文件，一切正常，我们可以编辑文件。

我还尝试通过将单独的头文件路径提供给**IIncludeFileEntry来使用****org.eclipse.cdt.core.model.IIncludeFileEntry**而不是**IIncludeEntry**。但是 Eclipse 没有用**IIncludeFileEntry**识别任何东西。

 ****将头文件创建/附加到 C 项目的 CDT API 是什么？Eclipse CDT 如何创建它们？****

# php - 如何检查 PHP 中的数组？

> ID：12346479
> 
> 赞同：16
> 
> 时间：2012-09-10T06:39:16.383
> 
> 标签：php, arrayaccess

我能想到的最好的方法是

```
function is_array_alike($array) {
  return is_array($array) || (is_object($array) && $array instanceof ArrayAccess && $array instanceof Traversable && $array instanceof Serializable && $array instanceof Countable);
} 
```

啊。还有更漂亮的吗？

编辑：测试`is_object`似乎没有必要。我在 instanceof PHP 手册中添加了一个关于此的部分。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T16:58:25.893

好吧，既然你在帖子中确实使用了“漂亮”这个词，只是为了提高可读性而对外观进行快速建议：

```
function is_array_or_alike($var) {
  return is_array($var) ||
           ($var instanceof ArrayAccess  &&
            $var instanceof Traversable  &&
            $var instanceof Serializable &&
            $var instanceof Countable);
} 
```

变更说明：

1.  函数名称更改：“ `is_array_alike`”->“ `is_array_or_alike`”只是为了清楚地表明正在测试数组和相似性。

2.  参数/参数名称更改：`$array`->`$var`因为“ `$array`”已经有点预设参数是数组类型。

3.  堆叠 &&'ed 条件以提高可读性和符合 Drupal 编码标准：最大 80 字符行。由于您是 Drupal 核心维护者之一，我想我假设此功能可能会进入 Drupal，因此您可能会在提交之前完成此操作。

4.  你是对的，这`is_object()`是不必要的。在 Java 中这是必要的，因为`instanceof`如果第一个操作数不是对象，则会引发编译时错误，但我刚才在 PHP 中检查并没有错误，只是 bool(false) 的结果。

我同意 paulmatthews86 的建议，即您提供一个用例。如果我们不知道标准，就很难提供建议。例如，从鸭式范式的角度借用一点，`instanceof`测试会很有用，但不一定是强制性的，甚至不一定是完整的。如果您对 can 做什么以及它在某些上下文中的行为方式更感兴趣，`$var`那么您可以使用反射来检查是否存在需要稍后对其调用的方法，或者您可以测试它在通过时是否按预期运行到数组函数。例如，它是否与`array_udiff_assoc`,`array_chunk`等一起“工作”。如果这些行为对您的用例更重要，那么这些测试可能会取代`instanceof`类型测试，尽管当然会有很多重叠。

希望这可以帮助。如果您决定发布它，有兴趣看看您最终决定的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:25:29.237

即使`ArrayObject`implements `Serializable`，假设对象必须将其实现为类数组也是错误的。

情况恰恰相反。你可以利用它`Serializable`来有效地防止对象的序列化。所以我会考虑从接口检查中删除它。

此外，如果您在`instanceof`没有对象的情况下使用，您将看到一个（致命的）错误。我建议您将“类似数组”的对象的检查委托给叶函数，并让对输入类型不那么严格的函数使用它：

```
function is_array_or_object_arraylike($var) {

    return is_array($var) 
        || (is_object($var) && is_object_arraylike($var))
        ;
}

function is_object_arraylike($obj) {

    return $obj instanceof ArrayAccess
        && $obj instanceof Traversable
        && $obj instanceof Countable
        ;
} 
```

还要记住，即使一个对象是类似数组的，它也不适用于大多数数组函数。它也不适用于`foreach`，因此您应该更好地概述您在此处寻找的数组功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T07:23:16.633

php中有迭代器接口[http://php.net/manual/en/class.iterator.php](http://php.net/manual/en/class.iterator.php)

利用

```
function isIter($abc) {
    return (is_array($abc) || $abc instanceof Traversable);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-18T13:48:21.703

有一个 PHP 7.3 的新规范在这里实现了一个`is_countable`函数[https://wiki.php.net/rfc/is-countable](https://wiki.php.net/rfc/is-countable)

基于规范 & 对于以前的 PHP 版本，你可以使用这个

```
if (is_array($foo) || $foo instanceof Countable) {
    return count($foo);
} 
```

或者你也可以像这样实现一种 polyfill

```
if (!function_exists('is_countable')) {

    function is_countable($c) {
        return is_array($c) || $c instanceof Countable;
    }

} 
```

# jquery - jQuery 加载 div 内容正确的语法

> ID：12346480
> 
> 赞同：1
> 
> 时间：2012-09-10T06:39:22.903
> 
> 标签：jquery, variables, syntax, load

以下内容的正确语法是什么？

`postid`是我需要添加到 url 的 slug；我只需要`article`来自远程页面的 div 的内容；我还将传递`postid`到远程页面

```
.load("http://something/crew/?=" + postid .article ,{id:postid}); 
```

谢谢。

根据下面的答案，正确的语法是：

```
.load("http://something/crew/?=" + postid + " .article" ,{id:postid}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:43:19.477

```
.load("http://something/crew/?id=" + postid  + " .article"); 
```

注意前面有一个空格`.article`。

来自[http://api.jquery.com/load/#loading-page-fragments](http://api.jquery.com/load/#loading-page-fragments)

> 如果字符串中包含一个或多个空格字符，则假定字符串中第一个空格之后的部分是确定要加载的内容的 jQuery 选择器。

# android - android中listview中的onclick按钮

> ID：12346481
> 
> 赞同：0
> 
> 时间：2012-09-10T06:39:23.427
> 
> 标签：android, android-layout, android-intent, android-listview

我的项目包含**listView(homelistView)**，其中包含**button(btnList)**。

当我单击**按钮（btnList）**时，它必须转到另一个活动。我尝试了很多，但我没有找到一个很好的例子。

请给我一个很好的例子。

下面是我的代码：

这是我的列表视图包含按钮。单击按钮时，它必须转到其他活动

```
 --------------------------------A--
                  button(btnList) B
  --------------------------------C---
                  BUTTON(btnList) D
  --------------------------------E-- 
```

homempleb.xml 在我在 xml 中使用此代码之前。根据 Mohith verma 示例，按钮列表对我来说效果很好

```
 <ListView              
            android:id="@+id/homelistView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.04"
            android:dividerHeight="0dip" >

      </ListView> 
```

homempleb.xml 目前我在我的列表视图中添加了滚动索引并更改了代码，如下所示.. Listbutton 现在对我不起作用..请帮帮我

```
 <com.woozzu.android.widget.IndexableListView

            android:id="@+id/homelistView"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.04"
            android:dividerHeight="0dip" >
    </com.woozzu.android.widget.IndexableListView> 
```

MainActivity.java

```
 public class MainActivity extends Activity implements
    SearchView.OnQueryTextListener, SearchView.OnCloseListener {

private ListView listView;
// private IndexableListView listView;
private SearchView search;
EfficientAdapter objectAdapter;
// EfficientAdapter2 objectAdapter1;
int textlength = 0;
private CheckBox checkStat, checkRoutine, checkTat;
private ArrayList<Patient> patientListArray;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.homempleb);
    Log.i("scan", " txtScanResult ");

    ActionItem nextItem = new ActionItem();
    final QuickAction quickAction = new QuickAction(this,
            QuickAction.VERTICAL);
    quickAction.addActionItem(nextItem);
    quickAction.setOnDismissListener(new QuickAction.OnDismissListener() {
        @Override
        public void onDismiss() {
            Toast.makeText(getApplicationContext(), "Dismissed",
                    Toast.LENGTH_SHORT).show();
        }
    });

    search = (SearchView) findViewById(R.id.searchView1);
    search.setIconifiedByDefault(false);
    search.setOnQueryTextListener(this);
    search.setOnCloseListener(this);
    search.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            quickAction.show(v);
        }
    });
    checkStat = (CheckBox) findViewById(R.id.checkBoxStat);
    checkRoutine = (CheckBox) findViewById(R.id.checkBoxRoutine);
    checkTat = (CheckBox) findViewById(R.id.checkBoxTat);
    checkStat.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (((CheckBox) v).isChecked()) {
                checkStat.setChecked(true);
                Toast.makeText(MainActivity.this, "STAT",
                        Toast.LENGTH_SHORT).show();
                checkRoutine.setChecked(false);
                checkTat.setChecked(false);
            }
        }
    });
    checkRoutine.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (((CheckBox) v).isChecked()) {
                checkRoutine.setChecked(true);
                Toast.makeText(MainActivity.this, "ROUTINE",
                        Toast.LENGTH_SHORT).show();
                checkStat.setChecked(false);
                checkTat.setChecked(false);
            }
        }
    });
    checkTat.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            if (((CheckBox) v).isChecked()) {
                checkTat.setChecked(true);
                Toast.makeText(MainActivity.this, "TAT Effeciency",
                        Toast.LENGTH_SHORT).show();
                checkRoutine.setChecked(false);
                checkStat.setChecked(false);
            }
        }
    });

    // listView = (IndexableListView) findViewById(R.id.homelistView);
    listView = (ListView) findViewById(R.id.homelistView);
    listView.setTextFilterEnabled(true);
    listView.setFastScrollEnabled(true);
    listView.setFastScrollAlwaysVisible(true);
    objectAdapter = new EfficientAdapter(this);
    listView.setAdapter(objectAdapter);

    Button refreshButton = (Button) findViewById(R.id.refreshButton);
    refreshButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // objectAdapter1 = new EfficientAdapter2(MainActivity.this);
            objectAdapter = new EfficientAdapter(MainActivity.this);// adapter
                                                                    // with
                                                                    // new
                                                                    // data
            listView.setAdapter(objectAdapter);

            Log.i("notifyDataSetChanged", "data updated");
            // objectAdapter1.notifyDataSetChanged();
            objectAdapter.notifyDataSetChanged();

        }
    });

}

@Override
public boolean onClose() {
    return false;
}

@Override
public boolean onQueryTextChange(String newText) {
    return false;
}

@Override
public boolean onQueryTextSubmit(String query) {
    return false;
} 
```

}

高效适配器.JAVA

```
 public class EfficientAdapter extends BaseAdapter implements SectionIndexer {

private String mSections = "#ABCDEFGHIJKLMNOPQRSTUVWXYZ";
ArrayList<Patient> patientListArray;

private LayoutInflater mInflater;
private Context context;

public EfficientAdapter(Context context) {
    mInflater = LayoutInflater.from(context);
    this.context = context;

    String patientListJson = CountriesList.jsonData;
    JSONObject jssson;
    try {
        jssson = new JSONObject(patientListJson);
        patientListJson = jssson.getString("PostPatientDetailResult");
    } catch (JSONException e) {
        e.printStackTrace();
    }
    Gson gson = new Gson();
    JsonParser parser = new JsonParser();
    JsonArray Jarray = parser.parse(patientListJson).getAsJsonArray();
    patientListArray = new ArrayList<Patient>();
    for (JsonElement obj : Jarray) {
        Patient patientList = gson.fromJson(obj, Patient.class);
        patientListArray.add(patientList);
        Log.i("patientList", patientListJson);

    }
}

/**
 * sorting the patientListArray data
 */
public void sortMyData() {
    // sorting the patientListArray data
    Collections.sort(patientListArray, new Comparator<Object>() {
        @Override
        public int compare(Object o1, Object o2) {
            Patient p1 = (Patient) o1;
            Patient p2 = (Patient) o2;
            return p1.getName().compareToIgnoreCase(p2.getName());
        }

    });
}

public int getCount() {

    return patientListArray.size();
}

public Object getItem(int position) {

    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.homemplebrowview, null);
        holder = new ViewHolder();
        holder.text1 = (TextView) convertView.findViewById(R.id.name);
        holder.text2 = (TextView) convertView.findViewById(R.id.mrn);
        holder.text3 = (TextView) convertView.findViewById(R.id.date);
        holder.text4 = (TextView) convertView.findViewById(R.id.age);
        holder.text5 = (TextView) convertView.findViewById(R.id.gender);
        holder.text6 = (TextView) convertView.findViewById(R.id.wardno);
        holder.text7 = (TextView) convertView.findViewById(R.id.roomno);
        holder.text8 = (TextView) convertView.findViewById(R.id.bedno);
        holder.btnList = (Button) convertView.findViewById(R.id.listbutton);

        holder.btnList.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {                   
                Toast.makeText(context, "STAT", Toast.LENGTH_SHORT).show();
                Intent next = new Intent(context, Home.class);
                Log.i("next23", "next");
                context.startActivity(next);
            }
        });

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.text1.setText(Util.formatN2H(patientListArray.get(position)
            .getName()));
    holder.text2.setText(patientListArray.get(position).getMrnNumber());
    holder.text3.setText(Util.formatN2H(patientListArray.get(position)
            .getRoom()));
    holder.text4.setText(Util.formatN2H(patientListArray.get(position)
            .getAge()));
    holder.text5.setText(Util.formatN2H(patientListArray.get(position)
            .getGender()));
    holder.text6.setText(Util.formatN2H(patientListArray.get(position)
            .getWard()));
    holder.text7.setText(Util.formatN2H(patientListArray.get(position)
            .getRoom()));
    holder.text8.setText(Util.formatN2H(patientListArray.get(position)
            .getBed()));

             **
     holder.btnList.setOnClickListener(new OnClickListener() {

      @Override 
              public void onClick(View v) { Intent next=new
     Intent(context, Home.class); context.startActivity(next); 
              } });
     **
    return convertView;
}

static class ViewHolder {
    public Button btnList;
    public TextView text8;
    public TextView text7;
    public TextView text6;
    public TextView text5;
    public TextView text4;
    public TextView text1;
    public TextView text2;
    public TextView text3;
}

@Override
public void notifyDataSetChanged() {
    super.notifyDataSetChanged();
}

public int getPositionForSection(int section) {
    // sorting the patientListArray data
    sortMyData();
    // If there is no item for current section, previous section will be
    // selected
    for (int i = section; i >= 0; i--) {
        for (int j = 0; j < getCount(); j++) {
            if (i == 0) {
                // For numeric section
                for (int k = 0; k <= 9; k++) {
                    if (StringMatcher.match(
                            String.valueOf(patientListArray.get(j)
                                    .getName().charAt(0)),
                            String.valueOf(k)))
                        return j;
                }
            } else {
                if (StringMatcher.match(
                        String.valueOf(patientListArray.get(j).getName()
                                .charAt(0)),
                        String.valueOf(mSections.charAt(i))))
                    return j;
            }
        }
    }
    return 0;
}

public int getSectionForPosition(int position) {
    return 0;
}

public Object[] getSections() {
    String[] sections = new String[mSections.length()];
    for (int i = 0; i < mSections.length(); i++)
        sections[i] = String.valueOf(mSections.charAt(i));
    return sections;
}

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:59:37.740

首先从 MainActivity 类中删除 btnList、btnScan。

在您的 EfficientAdapter 类中添加对象`Context Context`

更改您的构造函数：

```
public EfficientAdapter(Context context) {
        mInflater = LayoutInflater.from(context);
    } 
```

至：

```
public EfficientAdapter(Context context) {
        mInflater = LayoutInflater.from(context);
this.context=context;
    } 
```

在您的 ViewHolder 类中，您需要添加`Button btnList.`

然后在 getview 方法中使用`holder.btnList`

然后使用：

```
holder.btnList.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent next=new Intent(context, SeviceDetails.class);
                context.startActivity(next);
            }
        }); 
```

在返回 convertView 之前在您的 getview 方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-29T10:26:53.877

尝试这个..

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    View view = convertView;
    if (view == null){
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflater.inflate(R.layout.list_layout_ip_addtional_users, null);
    }

    //Handle TextView and display string from your list
    TextView listItemText2 = (TextView)view.findViewById(R.id.list_item_string_name);
    listItemText2.setText(list.get(position));

    ImageButton button8 = (ImageButton) view.findViewById(R.id.ip_additional_user_edit);
    button8.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Intent intent = new Intent(context, IPAdditionalUsersEdit.class);
            context.startActivity(intent);
        }
    });

    return view;
} 
```

# javascript - 替换变量时JavaScript字符串replace（）不起作用

> ID：12346483
> 
> 赞同：0
> 
> 时间：2012-09-10T06:39:30.613
> 
> 标签：javascript, regex, variables, replace

我正在尝试创建一个 JavaScript 脚本来突出显示页面上的某些文本。现在我在尝试用其他文本替换文本（来自正文 html）时遇到问题。我想`highlights`用其他一些文本替换数组中每个项目的所有实例。

我正在使用的代码是：

```
 var responseText = server.responseText;
    var highlights = responseText.split("\n");
    var text = document.body.innerHTML;

    for (i in highlights) {
        if (highlights[i].length > 1) {
            var exp = new RegExp(highlights[i], "g");
            console.log(exp);
            console.log(highlights[i]);
            text = text.replace(exp, "XXXXXXXXXXX");
        }
    }

    document.body.innerHTML = text; 
```

`highlights[i]`目前，我正在为正则表达式获得正确的值打印输出`exp`；如果`highlights[i]`是“记住”，那么我得到的打印输出`exp`是“/Remember/g”（不带引号）——但它不会替换页面上的“记住”这个词。'如果我`highlights[i]`用`new RegExp()`简单的字符串“Remember”替换它，它就可以正常工作。关于有什么问题的任何想法？

**编辑：** 我解决了这个问题！创建时，`RegExp()`我传入`highlights[i].trim()`而不是仅仅`highlights[i]`在开始/结束时摆脱空白，它现在似乎正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:19:56.557

你的 multiline 有问题`server.responseText`。我用空格而不是换行符替换了输入，并且所有替换都可以正常工作：

[http://jsfiddle.net/XTdgJ/1/](http://jsfiddle.net/XTdgJ/1/)

# c++ - 每个 memory_order 是什么意思？

> ID：12346487
> 
> 赞同：75
> 
> 时间：2012-09-10T06:39:44.847
> 
> 标签：c++, c++11, thread-safety, atomic, memory-model

我读了一章，我不太喜欢它。我仍然不清楚每个内存顺序之间有什么区别。这是我目前的猜测，在阅读了更简单的[http://en.cppreference.com/w/cpp/atomic/memory_order后我理解了](http://en.cppreference.com/w/cpp/atomic/memory_order)

**以下是错误的，所以不要试图从中学习**

*   memory_order_relaxed：不同步，但在不同原子变量中从另一个模式完成订单时不会被忽略
*   memory_order_consume：同步读取这个原子变量，但是它不同步在此之前编写的宽松变量。但是，如果线程在修改 Y（并释放它）时使用 var X。其他消耗 Y 的线程也会看到 X 被释放？我不知道这是否意味着这个线程推出了 x（显然是 y）的变化
*   memory_order_acquire：同步读取这个原子变量，并确保在此之前写入的宽松变量也被同步。（这是否意味着所有线程上的所有原子变量都已同步？）
*   memory_order_release：将原子存储推送到其他线程（但前提是它们使用消耗/获取读取 var）
*   memory_order_acq_rel：用于读/写操作。是否进行获取，以便您不修改旧值并释放更改。
*   memory_order_seq_cst：与获取释放相同，除了它强制在其他线程中看到更新（如果`a`在另一个线程上放松存储。我`b`用 seq_cst 存储。`a` 用放松读取的第三个线程会看到变化以及`b`任何其他原子变量？ ）。

我想我理解但如果我错了请纠正我。我找不到任何用易于阅读的英语解释它的东西。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-12-30T15:12:47.573

GCC Wiki通过代码示例提供了[非常全面且易于理解的解释。](http://gcc.gnu.org/wiki/Atomic/GCCMM/AtomicSync)

（摘录已编辑，并添加了重点）

### 重要的：

在将我自己的措辞添加到答案的过程中重新阅读从 GCC Wiki 复制的以下引用时，我注意到引用实际上是错误的。他们以完全错误的方式*获取*和*消费。**release-consume*操作仅提供对依赖数据的排序保证，而*release-acquire*操作提供该保证，而不管数据是否依赖于原子值。

> 第一个模型是“顺序一致的”。这是未指定时使用的默认模式，也是最严格的。也可以通过 明确指定`memory_order_seq_cst`。它提供**了与顺序程序员天生熟悉的相同的限制和限制移动负载，除了它适用于跨线程**。
> [...]
> 从实际的角度来看，这相当于所有原子操作都充当了优化障碍。可以在原子操作之间重新排序，但不能跨操作重新排序。线程本地的东西也不受影响，因为其他线程看不到。**[...] 这种模式还提供了所有**线程的一致性。
> 
> **相反**的做法是`memory_order_relaxed`。该模型通过删除发生前的限制来减少同步。这些类型的原子操作还可以对其执行各种优化，例如死存储删除和共享。[...] 如果没有任何发生前的边缘，任何线程都不能指望来自另一个线程的特定排序。当程序员只是希望变量本质上是原子的而不是使用它来同步线程以获取其他共享内存数据**时，最常使用**
> 宽松模式。
> 
>  **第三种模式 ( `memory_order_acquire`/ `memory_order_release`) 是其他两种模式的**混合。**获取/释放模式类似于顺序一致模式，只是它只**对因变量应用发生前的关系**。这允许放宽独立读取和独立写入之间所需的同步。
> 
> `memory_order_consume`是对释放/获取内存模型的进一步细微改进，它通过*在对非依赖共享变量进行排序之前删除发生的事件来*稍微放宽要求。
> [...]
> 真正的区别归结为硬件必须刷新多少状态才能同步。由于消费操作*可能*因此执行得更快，因此知道自己在做什么的人可以将其用于性能关键的应用程序。**

 **### 以下是我自己尝试的更平凡的解释：

另一种看待它的方法是从重新排序读取和写入的角度来看待问题，包括原子的和普通的：

**所有**原子操作都保证在其自身内部是原子的（*两个*原子操作的组合不是一个整体的原子！）并且在它们出现在执行流的时间轴上的总顺序中是可见的。这意味着在任何情况下都不能对原子操作进行重新排序，但其他内存操作很可能会被重新排序。编译器（和 CPU）通常会进行这种重新排序作为优化。
这也意味着编译器必须使用任何必要的指令来保证在任何时候执行的原子操作将看到之前执行的每个其他原子操作的结果，可能在另一个处理器内核（但不一定是其他操作）上.

现在，**放松**就是这样，最低限度。除此之外，它什么也不做，也不提供任何其他保证。这是最便宜的手术。对于强排序处理器架构（例如 x86/amd64）上的非读-修改-写操作，这归结为一个普通的普通移动。

**顺序一致**的操作正好相反，它不仅对原子操作强制执行严格的排序，而且对之前或之后发生的其他内存操作也强制执行严格的排序。任何人都无法跨越原子操作强加的障碍。实际上，这意味着失去优化机会，并且可能必须插入栅栏指令。这是最昂贵的型号。

**释放**操作防止普通加载和存储在原子操作之后重新排序，*而*获取**操作**防止普通加载和存储在原子操作*之前*重新排序。其他一切仍然可以移动。
防止存储在之后移动以及在相应原子操作之前移动负载的组合确保了获取线程所看到的任何内容都是一致的，只损失了少量的优化机会。
人们可能会认为这就像一个不存在的锁，它正在被释放（由作者）和获取（由读者）。除了...没有锁。

在实践中，release/acquire 通常意味着编译器不需要使用任何特别昂贵的特殊指令，但它*不能*自由地根据自己的喜好重新排序加载和存储，这可能会错过一些（小的）优化机会。

最后，**consume与***acquire*是相同的操作，只是排序保证仅适用于依赖数据。相关数据将是例如由原子修改的指针指向的数据。
可以说，这可能会提供一些获取操作不存在的优化机会（因为更少的数据受到限制），但是这是以更复杂和更容易出错的代码和非平凡任务为代价的获得正确的依赖链。

目前不鼓励在规范修订时使用*消费排序。*

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-09-10T12:01:07.580

这是一个相当复杂的课题。尝试阅读[http://en.cppreference.com/w/cpp/atomic/memory_order](http://en.cppreference.com/w/cpp/atomic/memory_order)几次，尝试阅读其他资源等。

这是一个简化的描述：

编译器*和*CPU 可以重新排序内存访问。也就是说，它们的发生顺序可能与代码中指定的顺序不同。大多数时候这很好，当不同的线程尝试通信并且可能会看到破坏代码不变量的内存访问顺序时，就会出现问题。

通常您可以使用锁进行同步。问题是它们很慢。原子操作要快得多，因为同步发生在 CPU 级别（即 CPU 确保没有其他线程，即使在另一个 CPU 上，也不会修改某些变量等）。

因此，我们面临的一个问题是内存访问的重新排序。`memory_order`枚举指定编译器*必须*禁止的重新排序类型。

`relaxed`- 没有限制。

`consume`- 任何依赖于新加载值的负载都不能重新排序。原子负荷。即，如果它们在源代码中的原子加载之后，它们也会在原子加载之后*发生*。

`acquire`- 没有负载可以重新排序。原子负荷。即，如果它们在源代码中的原子加载之后，它们也会在原子加载之后*发生*。

`release`- 没有商​​店可以重新订购。原子商店。即，如果它们在源代码中的原子存储之前，它们也会在原子存储之前*发生*。

`acq_rel`-`acquire`并`release`结合。

`seq_cst`- 更难理解为什么需要这种排序。基本上，所有其他排序仅确保特定不允许的重新排序不会仅发生在消耗/释放相同原子变量的线程中。内存访问仍然可以以任何顺序传播到其他线程。这种排序确保不会发生这种情况（因此是顺序一致性）。对于需要这样做的情况，请参阅链接页面末尾的示例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2022-01-04T22:32:53.133

其他答案解释了相对于各种原子操作可以或不能重新排序哪些操作，但我想提供一个替代的、更高级的解释：各种内存顺序可以实际用于什么。

* * *

**要忽略的事情：**

**`memory_order_consume`**- 显然没有主要的编译器实现它，他们默默地用更强的`memory_order_acquire`. [甚至标准本身也说要避免它。](http://eel.is/c++draft/atomics.order#note-1)

[关于内存订单](https://en.cppreference.com/w/cpp/atomic/memory_order)的 cppreference 文章的很大一部分涉及“消费”，因此删除它可以大大简化事情。

它还可以让您忽略相关功能，例如`[[carries_dependency]]`和`std::kill_dependency`。

* * *

**数据竞争：**从一个线程写入非原子变量，同时从另一个线程读取/写入它被称为*数据竞争*，并导致未定义的行为。

* * *

**`memory_order_relaxed`**是最弱的，据说是最快的记忆顺序。

对原子的任何读/写都不会导致数据竞争（以及随后的 UB）。`relaxed`只为单个变量提供这个最低限度的保证。它不为其他变量（原子或非原子）提供任何保证。

宽松的操作可以以奇怪的顺序在线程之间传播，并且随着不同的不可预测（但很小）的延迟，对不同变量的宽松更改可以以不同的顺序对不同的线程变得可见，等等。

唯一的规则是：

*   每个线程将按照您告诉它的确切顺序访问每个单独的变量。例如，`a.store(1, relaxed); a.store(2, relaxed);`将写`1`, then `2`，从不以相反的顺序。*但是在同一个线程中对不同*变量的访问仍然可以相对于彼此重新排序。
*   如果线程 A 多次写入一个变量，然后线程 B 读取几次，它将以相同的顺序获取值（当然它可以读取一些值多次，或者跳过一些，如果你不同步其他方式的线程）。

* * *

**示例用途：**任何不尝试使用原子变量来同步对非原子数据的访问：各种计数器（仅供参考），或“停止标志”以指示其他线程停止。另一个例子：在`shared_ptr`s 上增加引用计数的操作在内部使用`relaxed`.

* * *

**栅栏：** `atomic_thread_fence(relaxed);`什么都不做。

* * *

**`memory_order_release`，`memory_order_acquire`**做所有事情`relaxed`，等等（所以它应该更慢或等效）。

只有商店（写入）可以使用`release`. 只有加载（读取）可以使用`acquire`. 诸如读取-修改-写入操作[`fetch_add`](https://en.cppreference.com/w/cpp/atomic/atomic/fetch_add)都可以是 ( `memory_order_acq_rel`)，但它们不是必须的。

那些让你**同步**线程：

*   假设线程 1 读取/写入某个内存 M（任何非原子或原子变量，都没有关系）。

*   然后线程 1 对变量 A 执行释放存储。然后它停止接触该内存。

*   如果线程 2 然后执行**相同**变量 A 的获取加载，则称此加载与线程 1 中的相应存储**同步。**

*   *现在*线程 2 可以安全地读取/写入该内存 M。

您只与最新的作者同步，而不是之前的作者。

您可以跨多个线程链接同步。

有一个特殊的规则，即同步在任意数量的读取-修改-写入操作中传播，而不管它们的内存顺序如何。例如，如果线程 1 执行`a.store(1, release);`，则线程 2 执行`a.fetch_add(2, relaxed);`，然后线程 3 执行`a.load(acquire)`，*则*线程 1 与线程 3 成功同步，即使中间有一个宽松的操作。

在上面的规则中，一个释放操作 X，以及对同一个变量 X 的任何后续读-修改-写操作（在下一个非读-修改-写操作处停止）称为以 X 为首的**释放序列**。（所以如果获取从释放序列中的任何操作读取，它与序列的头部同步。）

如果涉及读-修改-写操作，没有什么能阻止您同步多个操作。在上面的例子中，如果`fetch_add`使用`acquire`or `acq_rel`，它也会与线程 1 同步，反之，如果使用`release`or `acq_rel`，线程 3 除了与 1 之外，还会与 2 同步。

* * *

**使用示例：** `shared_ptr`使用类似`fetch_sub(1, acq_rel)`.

原因如下：假设线程 1 读取/写入`ptr->...`，然后销毁其副本`ptr`，递减 ref 计数。然后线程 2 销毁最后剩余的指针，同时减少 ref 计数，然后运行析构函数。

由于线程 2 中的析构函数将访问线程 1 先前访问的内存，因此需要进行`acq_rel`同步`fetch_sub`。否则，您将面临数据竞赛和 UB。

* * *

**Fences：**使用`atomic_thread_fence`，您基本上可以将轻松的原子操作转变为释放/获取操作。单个栅栏可以应用于多个操作，和/或可以有条件地执行。

如果您从一个或多个变量执行轻松读取（或以任何其他顺序），然`atomic_thread_fence(acquire)`​​后在同一个线程中执行，则所有这些读取都算作获取操作。

相反，如果你这样做`atomic_thread_fence(release)`了，然后是任意数量的（可能是放松的）写入，这些写入都算作释放操作。

`acq_rel`栅栏结合了栅栏`acquire`和`release`栅栏的效果。

* * *

**与其他标准库功能的相似之处：**

几个标准库特性也导致了与关系的类似*同步。*例如，锁定一个互斥锁与最新的解锁同步，就好像锁定是一个获取操作，而解锁是一个释放操作。

* * *

**`memory_order_seq_cst`**做一切`acquire`/`release`做，等等。这应该是最慢的顺序，但也是最安全的。

`seq_cst`读取算作获取操作。`seq_cst`写入算作释放操作。`seq_cst`读-修改-写操作都算作两者。

`seq_cst`操作可以相互*同步，*也可以与获取/释放操作同步。小心混合它们的特殊效果（见下文）。

`seq_cst`是默认顺序，例如 given `atomic_int x;`，`x = 1;`does `x.store(1, seq_cst);`。

`seq_cst`与获取/释放相比，有一个额外的属性：`seq_cst`整个程序中的所有读取和写入都发生在一个**全局顺序**中。

除其他事项外，**此顺序尊重上述***获取/释放描述的***同步*****关系，****除非**（这很奇怪）同步[来自*将*seq-cst 操作与获取/释放操作](https://stackoverflow.com/q/70554277/2752075)混合（释放与 seq-cst 同步，或seq-cst 与获取同步）。这种混合本质上将受影响的 seq-cst 操作降级为获取/释放（它可能保留了一些 seq-cst 属性，但你最好不要指望它）。*

 ** * *

**示例使用：**

```
atomic_bool x = true;
atomic_bool y = true;
// Thread 1:
x.store(false, seq_cst);
if (y.load(seq_cst)) {...}
// Thread 2:
y.store(false, seq_cst);
if (x.load(seq_cst)) {...} 
```

假设您只希望一个线程能够进入`if`正文。`seq_cst`允许你这样做。获取/释放或较弱的订单在这里是不够的。

* * *

**栅栏：** `atomic_thread_fence(seq_cst);`做栅栏所做的一切`acq_rel`，外加一个附加功能。

比方说：

*   线程 1 使用`seq_cst`order 访问变量 X，然后
*   线程 2 线程使用任何顺序访问同一个变量 X（不一定会导致同步），然后
*   线程 2 可以`atomic_thread_fence(seq_cst)`。

*然后在线程 1 中的 seq-cst 访问之后*，线程 2 中的任何操作都将在线程 1 中发生（但线程 1 中的 seq-cst 操作之前的非 seq-cst 操作不一定会在线程 2 中的围栏之前发生）。

反过来也有效：

*   线程 1 执行`atomic_thread_fence(seq_cst)`，然后
*   线程 1 使用任意顺序访问变量 X，然后
*   `seq_cst`线程 2 使用order访问相同的变量 X。

那么线程 1 中栅栏之前的任何操作都将发生在线程 2 中的 seq-cst 操作之前，但不一定在线程 2 中后续的非 seq-cst 操作之前。

您也可以在两侧设置栅栏：

*   线程 1 执行`atomic_thread_fence(seq_cst)`，然后
*   线程 1 使用任意顺序访问变量 X，然后
*   线程 2 使用任意顺序访问同一个变量 X，然后
*   线程 2 可以`atomic_thread_fence(seq_cst)`

然后在栅栏之前线程 1 中的任何事情都会发生在栅栏之后线程 2 中的任何事情之前。

* * *

**不同订单之间的互操作**

总结以上内容：

|  | `relaxed`写 | `release`写 | `seq-cst`写 |
| --- | --- | --- | --- |
| **`relaxed`加载** | - | - | - |
| **`acquire`加载** | - | 与 | 与*同步 |
| **`seq-cst`加载** | - | 与*同步 | 与 |

* = 参与的 seq-cst 操作得到一个混乱的 seq-cst 顺序，实际上被降级为获取/释放操作。这在上面已经解释过了。

* * *

**使用更强的内存顺序是否会使线程之间的数据传输更快？**

[不，似乎没有。](https://stackoverflow.com/q/61591287/2752075)

* * *

**无数据竞争程序的顺序一致性**

该标准[解释说，](http://eel.is/c++draft/intro.multithread#intro.races-note-21)如果您的程序仅使用`seq_cst`访问（和互斥体），**并且没有数据竞争**（导致 UB），那么您不需要考虑所有花哨的操作重新排序。该程序的行为就像一次只执行一个线程，线程不可预测地交错。***

# ruby - 以“$”符号开头的数字的正则表达式

> ID：12346492
> 
> 赞同：0
> 
> 时间：2012-09-10T06:40:01.490
> 
> 标签：ruby, regex

我想要一个正则表达式来验证这些类型的字符串格式：

```
$-1000.999
$9999.444
-12344.555
123434.55
0.444455 
```

还有制作正则表达式的好工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:44:51.760

这是正则表达式：`\$?-?\d+\.\d+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:09:02.487

```
^\$?\-?(([1-9]{1})([0-9]*)|0)(\.[0-9]*)?$ 
```

请检查..这符合您的测试用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:55:00.540

```
\s+$?(-+)?\d*\.?\d*\s+

one or more spaces followed by
zero or one $ sign followed by 
zero or one of either - or + followed by
zero or more digits followed by
zero or one decimal followed by
zero or more digits followed by 
one or more spaces 
```

这也将匹配 .444455 和 11111 之类的数字，并且不会匹配 @223.44 或 #444.33 或 &1233.555

# android - 在 android 中使用 scribd

> ID：12346499
> 
> 赞同：0
> 
> 时间：2012-09-10T06:40:34.707
> 
> 标签：android, scribd

如何在 Android 中使用 Scribd 查看我的 Doc 文件。基本上我想在我的 Android 代码中使用 Scribd Api。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:21:45.883

> Crocodoc 是打开文档的好选择。为每个文档创建会话后，我们可以使用 WebView 查看文档。

# python - 设置具有序列错误的数组元素

> ID：12346510
> 
> 赞同：-1
> 
> 时间：2012-09-10T06:41:39.307
> 
> 标签：python

**第二次编辑**

这就是“stokes_line”的生成方式：

```
os.system('pdv -t %s > temp.txt ' % epoch_name)
    stokes_line = np.genfromtxt('temp.txt', usecols=3, dtype=[('stokesI','float')],     skip_header=1)

os.system('vap -nc "mjd" %s >> mjd.txt' % new_y[i])
stokes_list[b] = stokes_line 
```

“pdv”是来自另一个程序的命令，它生成了“stokes_line”中使用的一些数字。

stokes_list 每次都会在循环中添加一个新的 stokes_line 。

**编辑：**

stokes_line 是使用 numpy.genfromtxt 命令创建的（因此从 txt 文件中提取）并由浮点数组成，它们看起来像这样：

> [(0.00126596,) (0.000621272,) (0.00058694,) ..., (0.0015368,) (0.000926448,) (7.95851e-05,)]

一堆一起组成一个 stokes_list，每个 stokes_line 由相同数量的浮点数组成。

问题是因为 genfromtxt 没有创建一个全是方括号的列表，而是其他东西（它是否称为序列）？

* * *

我编写了一个可以在我的笔记本电脑（python 版本 2.7.3）上找到的 python 代码，但它似乎不能在我的大学桌面（python 版本 2.5.2）上运行。

我不认为在这里显示大量代码会有用，但错误消息在这两行的第二行：

```
os.system('vap -nc "mjd" %s >> mjd.txt' % new_y[i])
stokes_list[b] = stokes_line 
```

其中“vap”是来自另一个程序的命令，它返回一些值。无论如何，问题的症结在于我只有在旧版本的 Python 上运行时才会收到以下错误消息：

> ValueError：使用序列设置数组元素。

现在我做了一些研究，人们说问题是由于某些列表的长度不兼容 - 但如果是这种情况，为什么当我在新版本的 Python 上运行它时它工作正常。

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:44:51.197

`.format`，[`Formatter`该类](http://docs.python.org/library/string.html#string-formatting)是在 2.6 中添加的。

`os.system('vap -nc "mjd" %s >> mjd.txt' % new_y[i])`应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T18:50:17.757

当您使用`np.genfromtxt(…, usecols=3, dtype=[("stokesI","float")])`时，您正在构建一个只有一个字段 ( `"stokesI"`) 的结构化数组。当然，当你打印数组时，会出现这样的结构：

```
[(0.00126596,) (0.000621272,) (0.00058694,) ..., (0.0015368,) (0.000926448,) (7.95851e-05,)] 
```

每个项目都由`np.void`一个命名的浮点字段组成。

看起来有点浪费，您可以将表达式简化为：

```
np.genfromtxt(…,usecols=3, dtype=float) 
```

然后你会得到：

```
[  1.26596000e-03   6.21272000e-04   5.86940000e-04 ...  1.53680000e-03
   9.26448000e-04   7.95851000e-05] 
```

它在较旧版本的 Python 上明显失败的可能原因是您使用的是较旧版本的 NumPy，例如 1.4 或 1.5。since的构造有了一些改进`ndarrays`（更好地处理生成器，从字符串自动转换……）

# android - ImageView 只有两个圆角？

> ID：12346511
> 
> 赞同：14
> 
> 时间：2012-09-10T06:41:39.987
> 
> 标签：android

我想要一个右上角和左下角圆角的 ImageView。

> ```
> <corners 
> android:topRightRadius="10dp"
> android:bottomLeftRadius="10dp"
> android:topLeftRadius="0dp"
> android:bottomRightRadius="0dp"/> 
> ```

尝试了上面的代码，但它不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T06:58:13.330

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
<solid android:color="@android:color/darker_gray"/>
<corners android:topRightRadius="10dp"
    android:bottomRightRadius="0dp"
    android:topLeftRadius="0dp"
    android:bottomLeftRadius="10dp"/>

</shape> 
```

这是我在可绘制文件夹中的可绘制 shape.xml。我正在使用这个drawable来设置imageviews背景。

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher"
    android:background="@drawable/shape"/> 
```

完成 在设备/模拟器上运行应用程序时会出现（不会出现在 xml 图形布局中）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T07:00:38.900

> 我正在使用它，它对我来说很好用

```
<?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="rectangle" >

        <solid android:color="#FFFFFF" />

        <corners
            android:bottomLeftRadius="10dp"
            android:bottomRightRadius="10dp"
            android:topLeftRadius="0dp"
            android:topRightRadius="0dp" />

        <stroke
            android:width="1dp"
            android:color="#000000" />

    </shape> 
```

# c++ - 数组名称的 C++ 表示法

> ID：12346512
> 
> 赞同：0
> 
> 时间：2012-09-10T06:41:53.323
> 
> 标签：c++, class, syntax

我有两个课程，一个约会课程和一个日历课程。日历类有一组约会对象。约会数组名称是否应该是复数？IE：

```
appointment[] appointment; 
```

或者

```
appointment[] appointments; 
```

这种情况是否有一致的语法？

**更新：**另外，类名是否以小写或大写字母开头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:57:57.200

没有约定，但您需要为类型标识符和变量标识符使用不同的名称。我倾向于大写类型而不是变量标识符，但这是个人品味的问题。在成员数据的这种特定情况下，还可以使用前缀或后缀。

也是个人品味，我确实倾向于使用复数来表示容器，并且怀疑它更常见。但是，反驳这一点，我经常认为在谈论整个容器时这是有道理的，而从英语阅读的角度来看，“约会[3]”作为“约会三”比“约会三”读起来更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T06:46:00.170

没有商定的命名约定，但我会提出两个建议：

1.  使用`std::vector<appointment>`
2.  给数据成员一些特殊的前缀或后缀，例如`appointments_`或`m_appointments`

就个人而言，我发现复数形式在提到集合时更直观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T07:47:23.310

> 约会数组名称是否应该是复数？

是的，当然。因为它包含多个约会。

> 这种情况是否有一致的语法？

这取决于您的组织、团队或部门内的[编码约定。](http://en.wikipedia.org/wiki/Coding_conventions)您将如何命名变量、类等取决于此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T08:13:00.733

没有真正的普遍惯例。如果你在一个团队中工作，团队应该建立约定，每个人都应该遵守它们。关于约定：能够识别类型名称很重要，因为您无法在不知道符号是否为类型名称的情况下解析 C++。一种常见的约定*是*使类型名称以大写字符开头，而其他名称（函数、变量等）以小写字符开头。然而，它并不是普遍的。理论上，至少，从名字本身就应该清楚：通常的“规则”是类型名是非限定名词，变量名是限定名词，函数是动词。在实践中，限定名词和不限定名词之间的区别并不总是那么清楚，而且（至少在英语中）并不总是确定一个词是动词还是名词。我发现区分 1) 类型与其他符号以及 2) 成员与非成员很有用。

关于复数，这取决于。`appointment`我发现 eg和之间的区别`appointments`不是很明显。根据上下文，我可能觉得它已经足够了，并且 `appointments`无论如何都可以使用，但在许多情况下，我会更进一步，将其称为`setOfAppointments`or `listOfAppointments`，或者其他明确表示容器的名称。这可能只是我的懒惰。我真的应该找到一个更好的名字（一个限定名词，表示什么样的约会：`allAppointments`，如果没有别的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T07:45:08.710

没有特别的约定。

我会建议使用匈牙利符号。

请阅读以下文章：http: [//msdn.microsoft.com/en-us/library/aa260976%28v=vs.60%29.aspx](http://msdn.microsoft.com/en-us/library/aa260976%28v=vs.60%29.aspx)

这会给你一个很好的主意。

# linux - Linux 如何测试 PCIe 驱动程序？

> ID：12346513
> 
> 赞同：2
> 
> 时间：2012-09-10T06:41:55.843
> 
> 标签：linux, driver, linux-device-driver, pci, pci-e

我写了一个简单的 PCIe 驱动程序，我想测试它是否有效。例如，如果可以对设备使用的内存进行写入和读取。

我怎样才能做到这一点？

哪些东西也应该被证明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:04:26.320

例如，您需要为您的设备找到 sysfs 条目

```
/sys/devices/pci0000:00/0000:00:07.0/0000:28:00.0 
```

（通过其他子目录中的符号链接可以更容易地到达那里`/sys`，例如`/sys/class/...`）

在这个目录中应该有（伪）文件命名`resource...`，它们对应于您设备的各种地址范围（基地址寄存器）。我认为这些可以`mmap()`编辑（但我从未这样做过）。

您可以使用 /sys 中的条目执行许多其他操作。有关更多详细信息，请参阅内核文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-19T08:49:28.783

要测试内存，您可以按照以下方法：

1）做 lspci -v

```
Output of this command will be something like this

0002:03:00.1 Ethernet controller: QUALCOMM Corporation Device ABCD (rev 11)
Subsystem: QUALCOMM Corporation Device 8470
Flags: fast devsel, IRQ 110
Memory at 11d00f1008000 (64-bit, prefetchable) [disabled] [size=32K]
Memory at 11d00f0800000 (64-bit, prefetchable) [disabled] [size=8M]
Capabilities: [48] Power Management version 3
Capabilities: [50] Vital Product Data
Capabilities: [58] MSI: Enable- Count=1/8 Maskable- 64bit+
Capabilities: [a0] MSI-X: Enable- Count=1 Masked-
Capabilities: [ac] Express Endpoint, MSI 00
Capabilities: [100] Advanced Error Reporting
Capabilities: [13c] Device Serial Number 00-00-00-00-00-00-00-00
Capabilities: [150] Power Budgeting <?>
Capabilities: [180] Vendor Specific Information: ID=0000 Rev=0 Len=028 <?>
Capabilities: [250] #12 
```

2）我们可以在上面看到输出内存被禁用。要启用它，我们可以执行以下操作：

```
setpci -s 0002:03:00.1 COMMAND=0x02 
```

此命令将启用地址处的内存：11d00f1008000

现在，尝试使用您的处理器读取命令读取该内存，它应该可以访问。

# python - 如何正确缩放 Quiver 图

> ID：12346516
> 
> 赞同：1
> 
> 时间：2012-09-10T06:42:26.153
> 
> 标签：python, matplotlib, scale

我正在尝试找到以下问题的解决方案：

我创建洋流地图，数据以厘米/秒为单位。我使用 matplolib.quiver 得到的箭头有相对较大的头部和较小的尾部。这样就很难看懂地图了。

1.  有没有办法玩尾巴的长度和头部的大小/宽度？
2.  当我放大时，我的箭头太小了。我看不到它们的方向，也看不到它们的大小。有没有办法解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-25T20:55:15.590

首先，您可以尝试将箭头的单位更改为*width*或*height*。与恒定的*点*选项相比，这会导致箭头随图形尺寸调整大小。您还可以减小*宽度*参数（默认值为 0.005）。

您还可以使用一些参数来更改磁头参数。这些参数被定义为轴宽的倍数。您可以缩小这三个以提高可见性：

*   *headwidth* : 头部宽度为轴宽的倍数，默认为 3
*   *headlength* : 头部长度为轴宽的倍数，默认为 5
*   *headaxislength*：轴交叉处的头长，默认为 4.5

[https://matplotlib.org/devdocs/api/_as_gen/matplotlib.axes.Axes.quiver.html](https://matplotlib.org/devdocs/api/_as_gen/matplotlib.axes.Axes.quiver.html)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-09-10T10:05:11.577

[此示例](http://matplotlib.sourceforge.net/examples/pylab_examples/quiver_demo.html)显示如何调整箭头的属性。

# iphone - 字符串中的 XML 响应，DidStartElement 没有调用 NSXMLParser

> ID：12346521
> 
> 赞同：0
> 
> 时间：2012-09-10T06:42:48.803
> 
> 标签：iphone, objective-c, xcode, nsxmlparser

在这里，我在临时字符串中得到 xml 响应。我需要从该 xml 响应中获取一个标记值。

```
-(void) httpDataDidFinishLoadingWithData:(NSData *)theData
{
    m_activityLoaded=NO;
    temp=[[NSString alloc] initWithData:[dataLoader httpData]  encoding:NSUTF8StringEncoding];
    NSLog(@"TEMP IS TEMP %@", temp);
    parser=[[NSXMLParser alloc] initWithContentsOfURL:[NSURL URLWithString:temp]];
    [parser setShouldProcessNamespaces:NO];
    [parser setShouldReportNamespacePrefixes:NO];
    [parser setShouldResolveExternalEntities:NO];
    parser.delegate=self;
    [parser parse];
} 
```

问题是 DidStartElement 在上述解析器分配后甚至没有调用并准备解析。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName
attributes:(NSDictionary *)attributeDict
{
    if(![elementName isEqual:@"Result"])
        return;
    woeid = [attributeDict objectForKey:@"woeid"];
    NSLog(@"woeid   %@", woeid);
} 
```

我的 XML 响应是

```
<?xml version="1.0" encoding="UTF-8"?>
<Body><woied></woied></Body> 
```

请帮我摆脱这些家伙。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:24:50.270

? [[NSXMLParser alloc] initWithContentsOfURL:[NSURL URLWithString:temp]]; ?

也许您应该使用 [[NSXMLParser alloc] initWithData:theData]; 创建解析器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:34:55.857

你可以试试这个：

```
-(void) httpDataDidFinishLoadingWithData:(NSData *)theData
{
    m_activityLoaded=NO;
    temp=[[NSString alloc] initWithData:[dataLoader httpData]  encoding:NSUTF8StringEncoding];
    NSLog(@"TEMP IS TEMP %@", temp);
    parser=[[NSXMLParser alloc] initWithData:[temp dataUsingEncoding: NSUTF8StringEncoding];
    [parser setShouldProcessNamespaces:NO];
    [parser setShouldReportNamespacePrefixes:NO];
    [parser setShouldResolveExternalEntities:NO];
    parser.delegate=self;
    [parser parse];
} 
```

我认为这可能可行。您将错误的数据传递给解析器。

# fat32 - FAT32 保留扇区有什么用？

> ID：12346525
> 
> 赞同：4
> 
> 时间：2012-09-10T06:43:01.613
> 
> 标签：fat32, fat

我知道扇区 0 主要用于加载操作系统。某些 Windows 版本的 bootloadres 大于 1 个扇区，并且也使用扇区 1 和 2。在扇区 6 到 8 通常是扇区 0-2 的备份。但剩下的又是为了什么？为什么很多格式化工具默认32个保留扇区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-10-18T14:27:02.837

实际上 FAT32 引导扇区有从 6 个扇区开始的备份副本，因此总共 12 个扇区。AND FAT32 引导扇区在 13 扇区上继续。所以最少是 13 个扇区。然后格式化工具希望将第一个簇与 1MB 边界对齐，因此由于 FAT 扇区的数量不同，保留扇区的数量可能会非常不同。对于 HDD 来说，4K 边界就足够了，但一些 SSD 在 1MB 边界下可以更快地工作。至少有 1MB 对齐的 Windows7 格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T13:28:30.230

Some file systems may want a specific alignment of data and therefor will increase the number of reserved sectors to meet that alignment.

# android - 经常同步一堆文本数据——压缩是一个好的模式吗？

> ID：12346531
> 
> 赞同：0
> 
> 时间：2012-09-10T06:43:28.337
> 
> 标签：android, synchronization, compression

我想知道我是否必须经常（每小时）同步一堆文本数据 - 例如 10kb - 在发送之前压缩它不是更好吗？

例如，如果我压缩它然后发送到我的服务器，它将被解压缩和处理 - 应用程序将使用更少的传输。处理这种情况是好的模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:57:02.313

我认为这取决于您的问题集。如果它很小，最好压缩并发送整个内容。如果它不小，您可能需要考虑一种[rsync](http://en.wikipedia.org/wiki/Rsync)样式的解决方案，它只传输所需的数据量以使文件同步。您仍然可能希望在线上进行压缩，但您不希望 rsync 压缩文件，因为一个小的更改可能会通过压缩级联成一个更大的更改。

链接也很重要，成本和功耗也很重要。压缩算法各不相同，但它会比不压缩花费更多的 CPU 时间。希望以大大减少发送时间为代价，最终节省您的电力。

因此，鉴于您正在谈论的问题集，一个小文件，我认为压缩它并将其发送出去会很好，特别是如果链接很慢（有时当您接收不良时会出现这种情况）。我不熟悉 Android 的框架，但是如果您通过 HTTP 发布文件，并且两端都支持 gzip 压缩，则可以“免费”获得它。

# c# - c#中的DateTime抛出异常指定的强制转换无效

> ID：12346533
> 
> 赞同：-3
> 
> 时间：2012-09-10T06:43:31.113
> 
> 标签：c#, sql-server-2008

```
private void dataGridView1_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
    {
        try
        {
            if ((dataGridView1.Focused) && (dataGridView1.CurrentCell.ColumnIndex == 0))
            {
                dtpInstallment.Location = dataGridView1.GetCellDisplayRectangle(e.ColumnIndex, e.RowIndex, false).Location;
                dtpInstallment.Visible = true;
                if (dataGridView1.CurrentCell.Value != DBNull.Value)
                {
                   // dtpInstallment.Value = DateTime.Today;
                   dtpInstallment.Value = (DateTime)dataGridView1.CurrentCell.Value;

               //     DateTime date = (DateTime)dataGridView1.CurrentCell.Value;
                 //   dtpInstallment.Value = DateTime.Parse(date.ToString("dd/MM/yyyy"));

                }
                else
                {
                    dtpInstallment.Value = DateTime.Today;
                }
            }
            else
            {
                dtpInstallment.Visible = false;
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

> 在这个日期时间抛出异常...... dataGridView1.CurrentCell.Value..但无法转换为 DateTimePicker 的 dtpInstallment.value

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:47:32.443

这是因为您正在解析的值的格式不正确。尝试使用`ParseExact`

```
string poop = "2005-12-14 23:12:34";
string currentFormat = "yyyy-MM-dd HH:mm:ss";
DateTime poo = DateTime.ParseExact(poop, currentFormat, System.Globalization.CultureInfo.InvariantCulture);
// yyyy-MM-dd HH:mm:ss ==> you can change the format that matches the current
//                         value of your dataGridView1.CurrentCell.Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:48:42.723

单元格中的值不是有效日期。也许改用[DateTime.TryParse](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)。这样，如果它是有效格式，您将获得 DateTime，如果不是，则不例外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T07:35:16.677

尝试使用 CellContentClick 事件

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
 DateTime dtpInstallment = DateTime.Parse(dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString());
} 
```

然后使用 dataGridView1_CellBeginEdit 事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:53:05.437

由于您检查 DBNull.Value，我猜您使用 SqlDataSource 检索数据，并且您的日期时间值确实属于[SqlDateTime](http://msdn.microsoft.com/en-us/library/system.data.sqltypes.sqldatetime.aspx)类型。

# android - 在琐事应用程序中识别正确答案

> ID：12346536
> 
> 赞同：0
> 
> 时间：2012-09-10T06:43:37.710
> 
> 标签：android, database, android-sqlite

我正要深入了解我改变游戏规则的 -_- 琐事应用程序的本质，但我想知道在我启动我的数据库 (SQLite) 之前，我的应用程序如何知道选择的答案何时正确？我在想我可以简单地在数据库中放置一列作为答案，然后有 4 个单独的列用于答案选择，其中一个会重复 - 然后只需将选择的答案与当前行的答案进行比较。但这似乎不是最优雅的解决方案。我只是想知道是否还有其他我不知道的方法。

我不知道是否值得一提，但答案选择会在最终被放入文本视图之前被洗牌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:50:31.240

我建议给每个答案一个数值（来自数据库的PK）并将正确答案的数量与“问题”表中的问题行存储起来。

至于检查正确答案，您真的想为每个问题返回数据库吗？如果您的应用程序起飞并被很多人使用，那么您的数据库将承受很大的压力。也许让应用程序下载“轮”（一组问题）定义并在本地检查每一轮的答案，然后上传结果。

# java - 尽管有 OpenEntityManagerInView，但 LazyInitializationException（Spring 和 Vaadin）

> ID：12346538
> 
> 赞同：2
> 
> 时间：2012-09-10T06:44:18.497
> 
> 标签：java, spring, hibernate, jpa, vaadin

我将 Spring Roo 和 Vaadin 用于（简单）数据库应用程序。有一个视图显示包含实体的表。对于要显示的表格，Hibernate 需要延迟加载 1:n 引用的实体。这适用于小表，但一旦表变大，只有第一部分正确显示，并出现以下异常。

```
com.vaadin.data.util.MethodProperty$MethodException
    at com.vaadin.data.util.MethodProperty.getValue(MethodProperty.java:612)
    at com.vaadin.data.util.AbstractProperty.toString(AbstractProperty.java:78)
    at com.vaadin.ui.Table.formatPropertyValue(Table.java:3476)
    at eu.wuttke.tinyscrum.ui.dashboard.DashboardTaskStoryTable.formatPropertyValue(DashboardTaskStoryTable.java:66)
    at com.vaadin.ui.Table.getPropertyValue(Table.java:3428)
    at com.vaadin.ui.Table.getVisibleCellsNoCache(Table.java:1853)
    at com.vaadin.ui.Table.refreshRenderedCells(Table.java:1477)
    at com.vaadin.ui.Table.enableContentRefreshing(Table.java:2645)
    at com.vaadin.ui.Table.changeVariables(Table.java:2491)
    at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.changeVariables(AbstractCommunicationManager.java:1455)
    at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariableBurst(AbstractCommunicationManager.java:1399)
    at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariables(AbstractCommunicationManager.java:1318)
    at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.doHandleUidlRequest(AbstractCommunicationManager.java:763)
    at com.vaadin.terminal.gwt.server.CommunicationManager.handleUidlRequest(CommunicationManager.java:296)
    at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:501)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:190)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:769)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:698)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:891)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:690)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.GeneratedMethodAccessor841.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.vaadin.data.util.MethodProperty.getValue(MethodProperty.java:610)
    ... 34 more
Caused by: org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:167)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:215)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:190)
    at eu.wuttke.tinyscrum.domain.Iteration_$$_javassist_1.getName(Iteration_$$_javassist_1.java)
    at eu.wuttke.tinyscrum.domain.Iteration_Roo_JavaBean.ajc$interMethodDispatch1$eu_wuttke_tinyscrum_domain_Iteration_Roo_JavaBean$eu_wuttke_tinyscrum_domain_Iteration$getName(Iteration_Roo_JavaBean.aj)
    at eu.wuttke.tinyscrum.domain.TaskAndStory.getIterationName(TaskAndStory.java:32)
    ... 38 more 
```

我从其他 Hibernate 应用程序中知道这个 LazyInitializationException 异常，它在会话未打开或已再次关闭时发生。但是查看堆栈跟踪，似乎 OpenEntityManagerInView 过滤器被调用了。

有任何想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T10:17:53.057

Vaadin 在服务器端具有持久状态。如果您将对象绑定到 Vaadin 组件（例如通过使用 a `BeanItemContainer`），您的对象将在服务器端“存活”多个请求。

另一方面，Spring（通过`OpenEntityManagerInView`）将为每个请求（`EntityManagers`不是安全的）创建一个新的 EntityManager 并在请求后关闭它。这样，您已经加载`Entities`的文件将被分离（EM 不再可用），并且当 Vaadin 发出新请求以加载更多表行时，延迟加载文件将无法加载（并且您将获得`LazyInitializationException`），因为加载它们的 EM 不再存在。

一些解决方案：

*   使用 Eager JPA Fetch ( `@ManyToOne (fetch= FetchType.EAGER)`)
*   使用 JOIN FETCH 查询加载您的对象（例如`SELECT mag FROM Magazine mag LEFT JOIN FETCH mag.articles WHERE mag.id = 1` [查看更多](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_fetch_joins "看更多")）
*   使用 EclipseLink（EclipseLink 将打开一个新的 Session 来加载分离对象的延迟加载字段）[我们正在使用这种方法]

# javascript - 为什么是 没有被插入到我的 html 中？

> ID：12346541
> 
> 赞同：0
> 
> 时间：2012-09-10T06:44:29.463
> 
> 标签：javascript

我正在创建一个简单的消息传递系统（用于学习目的），用户在其中输入他们的密码，或者如果他们没有密码则创建一个，并且我们的消息对应关系存储在另一个数组中的一个数组中。示例：您是第 5 个注册用户，您的密码是 pass 数组中的第 5 项，我们对应的是 logNum 数组中的第 5 项。

我想知道我是否可以使用本地存储，以便用户可以关闭他们的浏览器并仍然保存我们的通信，以及我将如何修改日志。但截至目前，我在底部的确认段落甚至没有被插入到文档中。

我非常感谢任何建议。

```
<!DOCTYPE HTML> 
    <html>     
        <head>             
            <title>waGwan?</title>     
            <meta charset="utf-8"/>
            <link rel=stylesheet href=comm.css></link>       
        </head>     
            <body>                              
                <section>
                    <p>enter or create passcode: <input type=text id=passcode></p>
                    <input type=button id="button" value="send">
                </section>
                <section id="log"></section>
                <script type="text/javascript">
                    var pass[];
                    var logNum=[];
                    document.getElementById("button").onclick=checkPass;
                    function checkPass(){
                        for(i=0;i<pass.length;i++){
                            //if passcode already exists exit
                            if(document.getElementById("passcode").value==pass[i]){
                                break;
                            }
                            //if passcode doesn't equal last existing passcode the passcode is added to the pass array and an array with name passcode is added to the logNum array
                            else if(document.getElementById("passcode").value!==pass[pass.length-1]){
                                pass.push(document.getElementById("passcode").value)
                                logNum.push(var document.getElementById("passcode").value.toString()[]);
                            }
                        }
                        //adds "Works!" to document
                        document.getElementById("log").innerHTML="<p>Works!</p>";
                    }
                </script>
            </body> 
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:48:48.670

一些错字;)

```
<!DOCTYPE HTML> 
    <html>     
        <head>             
            <title>waGwan?</title>     
            <meta charset="utf-8"/>
            <link rel=stylesheet href=comm.css></link>       
        </head>     
            <body>                              
                <section>
                    <p>enter or create passcode: <input type=text id=passcode></p>
                    <input type=button id="button" value="send">
                </section>
                <section id="log"></section>
                <script type="text/javascript">
                    var pass=[]; << here
                    var logNum=[];
                    document.getElementById("button").onclick=checkPass;
                    function checkPass(){
                        for(i=0;i<pass.length;i++){
                            //checking if passcode already exists
                            if(document.getElementById("passcode").value==pass[i]){
                                break;
                            }
                            //if passcode doesn't equal last existing passcode the passcode is added to the pass array and an array with name passcode is added to the logNum array
                            else if(document.getElementById("passcode").value!==pass[pass.length-1]){
                                pass.push(document.getElementById("passcode").value)
                                logNum.push(document.getElementById("passcode").value.toString());<< here
                            }
                        }
                        //adds "Works!" to document
                        document.getElementById("log").innerHTML="<p>Works!</p>";
                    }
                </script>
            </body> 
    </html> 
```

1.  `var pass = [];`

2.  `logNum.push(document.getElementById("passcode").value.toString());`

工作[jsfiddle](http://jsfiddle.net/bG4EP/)

尝试使用 Firebug for FireFox 或其他适用于您的浏览器的开发人员工具。

# pdflib - 如何使用带有重图像的 PDFLib 减小 pdf 大小？

> ID：12346542
> 
> 赞同：1
> 
> 时间：2012-09-10T06:44:35.307
> 
> 标签：pdflib

我正在 PDFLib 引擎的帮助下创建 pdf。就将要存储在 pdf 中的数据而言，我的要求非常高。一份 pdf 将存储大约 300 张图像。并将同时创建大约 100 个 pdf。我的图像被重复了，所以我会知道哪个图像会在哪里。现在，如果我使用 PDFLib 的 image_load 选项，则 pdf 大小约为 100Mb。有什么办法可以减小尺寸吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:49:15.350

答案是`Templates`。

PDFlib 支持技术名称为 Form 的 PDF 功能`XObjects`。但是，由于该术语与交互形式相冲突，我们将此功能称为`templates`.

可以将PDFlib`template`视为页外缓冲区，将 、 和 操作重定向到其中`text`（`vector`而`image`不是作用于常规页面）。

模板完成后，它可以像光栅图像一样使用，并且可以在任意页面上放置任意次数。像图像一样，模板可以进行几何变换，例如缩放或倾斜。

当一个模板在多个页面上使用（或在同一页面上多个）时，用于构建模板的实际 PDF 运算符仅包含在 PDF 文件中一次，从而节省了 PDF 输出文件的大小。模板会针对在多个页面上重复出现的元素（例如恒定背景或公司徽标）提出自己的建议。

并且还会减小尺寸。

# jquery - 使用 jQuery 移动整个窗口

> ID：12346550
> 
> 赞同：0
> 
> 时间：2012-09-10T06:44:59.863
> 
> 标签：jquery, scroll

我一直试图了解这个网站上呈现的效果 - [http://artofflightmovie.com/](http://artofflightmovie.com/)用于导航。他们一直在使用[scrollTo](http://demos.flesler.com/jquery/scrollTo/)插件来移动到页面的不同部分。但是，我无法理解他们如何将整个屏幕移动到 dom 元素。他们有很大的背景吗？他们是否`$(...).scrollTo( {top:'110px', left:'290px'}, 800 );`在每次点击时都使用类似的东西？任何关于我如何完成类似事情的见解都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:10:11.307

> 布局 ：

Body Size 1200px x 30000px，它有7个Div在body中分布在不同的绝对位置，每个Div都有一个对应的Tab。

> 动画片 ：

他们已经处理`onScroll`了主 div ie 容器的事件。现在，当您滚动时，它会显示在 Body 上滚动的效果，当您到达要显示的下一个 Div 时，选项卡选择会更改。当您单击任何选项卡时，它会导航到对应的 Div，同时更改 Conatiner Div 的滚动位置。

# java - 这个java程序的输出有点不对？

> ID：12346551
> 
> 赞同：0
> 
> 时间：2012-09-10T06:45:03.773
> 
> 标签：java

**Java 代码：**

```
public class Car {

    //variables
    int myStartMiles;
    int myEndMiles;
    double myGallonsUsed;
    int odometerReading;
    double gallons;

    //constructors
    public Car(int odometerReading) {
        this.myStartMiles = odometerReading;
        this.myEndMiles = myStartMiles;
    }

    //methods
    public void fillUp(int odometerReading, double gallons) {
        this.myEndMiles = odometerReading;
        this.gallons = gallons;
    }

    public double calculateMPG() {
        int a = (this.myEndMiles - this.myStartMiles);
        return ((a) / (this.gallons));
    }

    public void resetMPG() {
        myGallonsUsed = 0;
        this.myStartMiles = myEndMiles;
    }

    public static void main(String[] args) {
        int startMiles = 15;
        Car auto = new Car(startMiles);

        System.out.println("New car odometer reading: " + startMiles);
        auto.fillUp(150, 8);
        System.out.println("Miles per gallon: " + auto.calculateMPG());
        System.out.println("Miles per gallon: " + auto.calculateMPG());
        auto.resetMPG();
        auto.fillUp(350, 10);
        auto.fillUp(450, 20);
        System.out.println("Miles per gallon: " + auto.calculateMPG());
        auto.resetMPG();
        auto.fillUp(603, 25.5);
        System.out.println("Miles per gallon: " + auto.calculateMPG()); 
    }
} 
```

我试图让它工作，但我无法获得所需的输出。

期望的结果是：

```
New car odometer reading: 15
Miles per gallon: 16.875
Miles per gallon: 16.875
Miles per gallon: 10.0
Miles per gallon: 6.0 
```

我越来越：

```
New car odometer reading: 15
Miles per gallon: 16.875
Miles per gallon: 16.875
Miles per gallon: 15.0
Miles per gallon: 6.0 
```

你能告诉我代码有什么问题吗？我正在尝试在纸上手动手动运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:54:20.527

问题出在你的`fillUp`方法上。特别是这一行：

```
this.gallons = gallons; 
```

应该：

```
this.gallons += gallons; 
```

由于您是分配而不是添加，因此在第三种情况下输出是错误的，因为：

```
auto.fillUp(350, 10);
auto.fillUp(450, 20); 
```

设置`gallons`为`10`，然后用`20`而不是添加覆盖它`10`，然后添加`20`总共`30`.

**编辑：**您还需要`gallons = 0;`在您的`resetMPG`方法中。当前您设置`myGallonsUsed = 0`了 ，但该变量未使用，所以我不知道您为什么要这样做。

# javascript - 事件 javascript

> ID：12346555
> 
> 赞同：1
> 
> 时间：2012-09-10T06:45:16.790
> 
> 标签：javascript

我需要在鼠标点击时显示一条消息。但我还需要在下次单击鼠标时显示另一条消息。问题是在我的代码中，这两条消息都出现在第一次鼠标点击时。

```
<!DOCTYPE>
    <html>
        <head>
            <script>
                function myfunction()
                {
                var obj=document.getElementById("msg1");
                obj.innerHTML="message1";
                if(obj.innerHTML=="message1")
                {
                    var obj1=document.getElementById("msg2");
                    obj1.innerHTML="message2";
                }

                }
            </script>

        </head>
        <body>
            <div id="msg">
                <form name="myform">
                    <input type="button" value="click" onclick="myfunction()">
                        <p id="msg1"></p>
                        <p id="msg2"></p>
                </form>
            </div>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:50:37.680

```
<script>
var flag=0;            
function myfunction()
            {
            if (flag==0)
            {
            var obj=document.getElementById("msg1");
            obj.innerHTML="message1";
            flag=1;}
            else
            {
                var obj1=document.getElementById("msg2");
                obj1.innerHTML="message2";
            }

            }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:16:17.813

只需添加一个点击计数器来检查它是第一次点击还是更多。

```
<!DOCTYPE>
<html>

<head>
    <script>
        var $clickCount = 0;
        function myfunction() {
            $clickCount++;
            var obj = document.getElementById("msg1");
            obj.innerHTML = "message1";
            if (obj.innerHTML == "message1") {
                var obj1 = document.getElementById("msg2");
                if ($clickCount == 2) {
                    obj1.innerHTML = "message2";
                }

            }

        }
    </script>
</head>

<body>
    <div id="msg">
        <form name="myform">
            <input type="button" value="click" onclick="myfunction()">
            <p id="msg1"></p>
            <p id="msg2"></p>
        </form>
    </div>
</body>

</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:52:48.323

与其他人类似，但到底是什么：

```
 var obj1 = document.getElementById('msg1');
    var obj2 = document.getElementById('msg2');

    if (obj1.innerHTML == '') {
      obj1.innerHTML = 'message1';
    } else {
      obj2.innerHTML = 'message2';
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:54:06.260

```
function myfunction() {
  var i, ele;
  for(i = 1; i <= 2; i++) {
     ele = document.getElementById("msg"+i);
     if (ele && ele.innerHTML.length == 0) {
         ele.innerHTML = 'message' + i;
         return;
     }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T06:49:07.920

```
if (obj.innerHTML == "message1") {
  var obj1 = document.getElementById("msg2");
  obj1.innerHTML = "message2";
}else{
  obj.innerHTML = "message1";
} 
```

您的 if 将始终执行，因为您试图`obj.innerHTML == "message1"`在将其设置为之后立即检查 if 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T06:49:35.563

您是否看到您将obj 的innerhtml 设置为“message1”，然后在您检查innerHTML 是否为“message1”之后立即为真。

你需要改变if。所以它说：

```
if(obj.innterHTML=="message1"){
  obj.innerHTML="message2";
} else {
  obj.innerHTML="message1";
} 
```

# c - 用于 Windows 的 C 语言中的 WriteFile 和 Sprint

> ID：12346558
> 
> 赞同：0
> 
> 时间：2012-09-10T06:45:48.950
> 
> 标签：c, windows

我基本上是想让这段代码在 Windows 中工作，我必须使用 Windows API 中包含的 sprint() 和 writefile() 函数。我对如何解决这个问题有点困惑，Windows C 代码似乎要复杂得多。

```
#include <stdio.h>
#include <string.h>
//Defining String used for name//
#define NAME "Rodger Rodger"
Main(){
char tbuf[35];
memset(tbuf, '\b', sizeof(tbuf));
sprintf(&tbuf[0], "Hello %s\n", NAME);
write(1,tbuf,sizeof(tbuf));
} 
```

输出：你好罗杰罗杰

这可行，但是我需要在 Windows 中使用 writefile() 和 sprint() 函数来完成。

编辑：最终设法做到了。这是最终代码：

```
//C Programming in Windows //
//Timothy Ford //
#include  <stdio.h>
#include <windows.h>

//Defining String used for name//
#define NAME "Timothy Ford"

int main(){
char tbuf[35];

//Handle used to define output
HANDLE Outta = GetStdHandle (STD_OUTPUT_HANDLE);

//DWORD used to store bytesWritten
DWORD written;

memset(tbuf, '\0', sizeof(tbuf));
sprintf(tbuf,"Hello %s\n", NAME);

//WriteFile used for output of string
WriteFile(Outta, tbuf, sizeof(tbuf), &written, NULL);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:57:27.737

我注意到您的代码存在几个问题：

*   不要传递`tbuf[0]`to的地址`sprintf`。而是通过 tbuf。Tbuf 已经是一个指向字符串的指针：`sprintf(tbuf, "Hello, %s\n", NAME);`. 并不是说它不会按原样工作，但我认为我提出的版本更短更清晰。

*   为什么要将 tbuf 设置为 '\b'？这是退格键，而我相信您想将 tbuf 设置为 0('\0')

这是[ideone](http://ideone.com/2tXaI)的工作版本。

# asp.net - 检查服务器证书 asp.net Paypal

> ID：12346559
> 
> 赞同：0
> 
> 时间：2012-09-10T06:45:50.760
> 
> 标签：asp.net, security, paypal, ssl-certificate, paypal-sandbox

我们有一个具有捐赠功能的网站因此我们与 Paypal 集成用户在 PayPal 上捐款后，Paypal 向我们的网站发送一个确认截断的请求 那么如何检查请求是否来自 Paypal，如何检查证书由 Paypal 提供或仅检查 Request.Request.Uri 因为如果我没有执行此检查，任何人都可以欺骗并发送带有 PayPal 发送的参数的请求，以确认任何虚假交易

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:34:55.987

您可以参考[PayPal Payments 标准集成指南](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_WebsitePaymentsStandard_IntegrationGuide.pdf)。在第 344 页上，它谈到了设置证书。另请参阅第 347 页，其中专门讨论了您想要的内容。您可以运行一个命令并传递`PPCertFile`引用 PayPal 公共证书的参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:46:21.337

您唯一能做的就是检查 REFERER，但这也可能是空的。归根结底，您可以将您的页面保密，但无论谁捐赠您，他们都可以看到您的返回 url。我确信 Paypal 会通过电子邮件向您发送某种通知，因此您知道这不是恶搞。即使您尝试读取传入请求的标头..它们也可能被欺骗。

[获取引荐来源网址 - 来自 Paypal (HTTPS) 的访问者](https://stackoverflow.com/questions/10430704/get-referrer-url-visitors-coming-from-paypal-https)

# android - 在 Android 4.0.4 中执行菜单充气时应用程序强制关闭

> ID：12346570
> 
> 赞同：0
> 
> 时间：2012-09-10T06:46:51.990
> 
> 标签：android, menuitem

我基于 android api 版本 8 构建了一个应用程序，我选择了这个选项，因为我认为它可以在较新版本的 Android 中工作，但是当我尝试做我在标题中提到的事情时，我的应用程序强制关闭。该应用程序启动并正常工作，只有菜单充气错误，这是我的代码：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    Toast.makeText(this, "About Developer", Toast.LENGTH_LONG).show();
    Intent i = new Intent(this, about.class);
    startActivity(i);
    return true;
} 
```

有没有人有任何想法来解决它？

日志猫：

```
 09-10 14:07:02.630: DEBUG/AndroidRuntime(1631): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
09-10 14:07:02.646: DEBUG/AndroidRuntime(1631): CheckJNI is ON
09-10 14:07:10.746: DEBUG/AndroidRuntime(1631): Calling main entry com.android.commands.pm.Pm
09-10 14:07:12.027: DEBUG/dalvikvm(266): GC_EXPLICIT freed 10K, 54% free 2552K/5511K, external 716K/1038K, paused 360ms
09-10 14:07:12.086: WARN/ActivityManager(68): No content provider found for: 
09-10 14:07:12.237: WARN/ActivityManager(68): No content provider found for: 
09-10 14:07:12.307: DEBUG/PackageParser(68): Scanning package: /data/app/vmdl-674477132.tmp
09-10 14:07:12.707: INFO/PackageManager(68): Removing non-system package:com.dg.tkd
09-10 14:07:12.707: INFO/ActivityManager(68): Force stopping package com.dg.tkd uid=10036
09-10 14:07:12.837: INFO/Process(68): Sending signal. PID: 1618 SIG: 9
09-10 14:07:12.928: ERROR/InputDispatcher(68): channel '4079e2f8 com.dg.tkd/com.dg.tkd.digital_tkd (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
09-10 14:07:12.928: ERROR/InputDispatcher(68): channel '4079e2f8 com.dg.tkd/com.dg.tkd.digital_tkd (server)' ~ Channel is unrecoverably broken and will be disposed!
09-10 14:07:12.947: INFO/ActivityManager(68):   Force finishing activity HistoryRecord{406a3e48 com.dg.tkd/.digital_tkd}
09-10 14:07:12.986: INFO/WindowManager(68): WIN DEATH: Window{407ea958 com.dg.tkd/com.dg.tkd.about paused=false}
09-10 14:07:13.037: INFO/WindowManager(68): WIN DEATH: Window{4079e2f8 com.dg.tkd/com.dg.tkd.digital_tkd paused=false}
09-10 14:07:13.086: ERROR/InputDispatcher(68): Received spurious receive callback for unknown input channel.  fd=161, events=0x8
09-10 14:07:13.447: DEBUG/dalvikvm(68): GC_CONCURRENT freed 1043K, 46% free 4596K/8455K, external 3251K/3627K, paused 24ms+31ms
09-10 14:07:13.788: DEBUG/PackageManager(68): Scanning package com.dg.tkd
09-10 14:07:13.788: INFO/ActivityManager(68): Start proc com.android.launcher for activity com.android.launcher/com.android.launcher2.Launcher: pid=1641 uid=10001 gids={}
09-10 14:07:13.836: INFO/PackageManager(68): Package com.dg.tkd codePath changed from /data/app/com.dg.tkd-1.apk to /data/app/com.dg.tkd-2.apk; Retaining data and using new
09-10 14:07:14.146: INFO/PackageManager(68): Unpacking native libraries for /data/app/com.dg.tkd-2.apk
09-10 14:07:14.707: DEBUG/installd(35): DexInv: --- BEGIN '/data/app/com.dg.tkd-2.apk' ---
09-10 14:07:15.457: DEBUG/dalvikvm(1649): DexOpt: load 72ms, verify+opt 125ms
09-10 14:07:15.537: DEBUG/installd(35): DexInv: --- END '/data/app/com.dg.tkd-2.apk' (success) ---
09-10 14:07:15.546: WARN/PackageManager(68): Code path for pkg : com.dg.tkd changing from /data/app/com.dg.tkd-1.apk to /data/app/com.dg.tkd-2.apk
09-10 14:07:15.546: WARN/PackageManager(68): Resource path for pkg : com.dg.tkd changing from /data/app/com.dg.tkd-1.apk to /data/app/com.dg.tkd-2.apk
09-10 14:07:15.546: DEBUG/PackageManager(68):   Activities: com.dg.tkd.digital_tkd com.dg.tkd.about
09-10 14:07:15.747: INFO/installd(35): move /data/dalvik-cache/data@app@com.dg.tkd-2.apk@classes.dex -> /data/dalvik-cache/data@app@com.dg.tkd-2.apk@classes.dex
09-10 14:07:15.757: DEBUG/PackageManager(68): New package installed in /data/app/com.dg.tkd-2.apk
09-10 14:07:16.047: INFO/WindowManager(68): Setting rotation to 0, animFlags=1
09-10 14:07:16.146: INFO/ActivityManager(68): Config changed: { scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=3/1 orien=1 layout=18 uiMode=17 seq=48}
09-10 14:07:16.717: INFO/ActivityManager(68): Force stopping package com.dg.tkd uid=10036
09-10 14:07:17.717: INFO/ActivityThread(1641): Pub com.android.launcher2.settings: com.android.launcher2.LauncherProvider
09-10 14:07:19.727: DEBUG/dalvikvm(1641): GC_EXTERNAL_ALLOC freed 457K, 54% free 2684K/5767K, external 1032K/1038K, paused 107ms
09-10 14:07:20.607: INFO/ActivityManager(68): Displayed com.android.launcher/com.android.launcher2.Launcher: +7s521ms
09-10 14:07:20.687: WARN/InputManagerService(68): Got RemoteException sending setActive(false) notification to pid 1618 uid 10036
09-10 14:07:21.156: WARN/WindowManager(68): App freeze timeout expired.
09-10 14:07:21.657: INFO/ActivityManager(68): Force stopping package com.dg.tkd uid=10036
09-10 14:07:22.097: DEBUG/dalvikvm(1641): GC_EXTERNAL_ALLOC freed 97K, 53% free 2718K/5767K, external 1561K/1572K, paused 229ms
09-10 14:07:22.256: DEBUG/dalvikvm(68): GC_EXPLICIT freed 514K, 47% free 4504K/8455K, external 3247K/3627K, paused 397ms
09-10 14:07:23.517: DEBUG/dalvikvm(68): GC_EXPLICIT freed 18K, 47% free 4486K/8455K, external 3247K/3627K, paused 240ms
09-10 14:07:25.356: WARN/RecognitionManagerService(68): no available voice recognition services found
09-10 14:07:26.056: DEBUG/dalvikvm(68): GC_EXPLICIT freed 129K, 47% free 4515K/8455K, external 3247K/3627K, paused 391ms
09-10 14:07:26.906: INFO/installd(35): unlink /data/dalvik-cache/data@app@com.dg.tkd-1.apk@classes.dex
09-10 14:07:27.037: DEBUG/AndroidRuntime(1631): Shutting down VM
09-10 14:07:27.097: INFO/AndroidRuntime(1631): NOTE: attach of thread 'Binder Thread #4' failed
09-10 14:07:27.117: DEBUG/dalvikvm(1631): GC_CONCURRENT freed 100K, 72% free 293K/1024K, external 0K/0K, paused 16ms+18ms
09-10 14:07:27.157: DEBUG/dalvikvm(1631): Debugger has detached; object registry had 1 entries
09-10 14:07:29.029: DEBUG/AndroidRuntime(1657): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
09-10 14:07:29.029: DEBUG/AndroidRuntime(1657): CheckJNI is ON
09-10 14:07:30.966: DEBUG/dalvikvm(1641): GC_CONCURRENT freed 224K, 50% free 2915K/5767K, external 1959K/2091K, paused 9ms+9ms
09-10 14:07:31.826: DEBUG/AndroidRuntime(1657): Calling main entry com.android.commands.am.Am
09-10 14:07:32.726: INFO/ActivityManager(68): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.dg.tkd/.digital_tkd } from pid 1657
09-10 14:07:32.857: DEBUG/AndroidRuntime(1657): Shutting down VM
09-10 14:07:32.926: INFO/AndroidRuntime(1657): NOTE: attach of thread 'Binder Thread #3' failed
09-10 14:07:33.037: DEBUG/dalvikvm(1657): GC_CONCURRENT freed 102K, 69% free 319K/1024K, external 0K/0K, paused 4ms+2ms
09-10 14:07:33.108: DEBUG/jdwp(1657): Got wake-up signal, bailing out of select
09-10 14:07:33.108: DEBUG/dalvikvm(1657): Debugger has detached; object registry had 1 entries
09-10 14:07:33.327: WARN/ActivityManager(68): Activity pause timeout for HistoryRecord{40796458 com.android.launcher/com.android.launcher2.Launcher}
09-10 14:07:33.446: INFO/ActivityManager(68): Start proc com.dg.tkd for activity com.dg.tkd/.digital_tkd: pid=1666 uid=10036 gids={}
09-10 14:07:34.347: INFO/WindowManager(68): Setting rotation to 1, animFlags=1
09-10 14:07:34.386: INFO/ActivityManager(68): Config changed: { scale=1.0 imsi=310/260 loc=en_US touch=3 keys=2/1/2 nav=3/1 orien=2 layout=18 uiMode=17 seq=49}
09-10 14:07:35.997: INFO/ActivityManager(68): Displayed com.dg.tkd/.digital_tkd: +2s584ms
09-10 14:07:37.786: DEBUG/dalvikvm(266): GC_EXPLICIT freed 8K, 54% free 2551K/5511K, external 716K/1038K, paused 381ms
09-10 14:07:38.046: WARN/IInputConnectionWrapper(1641): showStatusIcon on inactive InputConnection
09-10 14:07:38.337: DEBUG/dalvikvm(1641): GC_EXTERNAL_ALLOC freed 33K, 50% free 2899K/5767K, external 1953K/2091K, paused 88ms
09-10 14:07:38.896: DEBUG/dalvikvm(68): GC_EXPLICIT freed 298K, 47% free 4490K/8455K, external 3247K/3627K, paused 172ms
09-10 14:07:40.007: DEBUG/dalvikvm(1641): GC_EXTERNAL_ALLOC freed 48K, 50% free 2891K/5767K, external 2754K/2940K, paused 104ms
09-10 14:07:41.847: DEBUG/dalvikvm(317): GC_EXPLICIT freed 12K, 55% free 2578K/5703K, external 716K/1038K, paused 167ms
09-10 14:07:45.489: INFO/ActivityManager(68): Process android.process.media (pid 210) has died.
09-10 14:07:47.356: DEBUG/dalvikvm(341): GC_EXPLICIT freed 5K, 55% free 2520K/5511K, external 716K/1038K, paused 644ms
09-10 14:07:49.816: DEBUG/dalvikvm(1641): GC_EXTERNAL_ALLOC freed 9K, 51% free 2882K/5767K, external 5999K/7492K, paused 167ms
09-10 14:08:18.196: WARN/KeyCharacterMap(1666): No keyboard for id 0
09-10 14:08:18.196: WARN/KeyCharacterMap(1666): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
09-10 14:08:21.546: INFO/ActivityManager(68): Starting: Intent { cmp=com.dg.tkd/.about } from pid 1666
09-10 14:08:22.097: DEBUG/dalvikvm(1666): GC_EXTERNAL_ALLOC freed 65K, 52% free 2608K/5379K, external 908K/1038K, paused 97ms
09-10 14:08:23.776: INFO/ActivityManager(68): Displayed com.dg.tkd/.about: +2s112ms 
```

# iphone - 使用 。iPhone应用程序中的bks密钥库证书

> ID：12346573
> 
> 赞同：5
> 
> 时间：2012-09-10T06:47:09.027
> 
> 标签：iphone, objective-c, ios, bouncycastle

我正在构建一个需要 .bks 密钥库进行身份验证的 iPhone 应用程序。我没有找到任何关于 iOS 应用程序的信息。

我想知道苹果是否允许在他们的应用程序中使用密钥库以及如何开始使用 iOS。证书是使用 BouncyCastle 创建的。我确实为 android 找到了有关它的信息，但对于 iOS，我没有运气。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T20:17:02.290

您可以像这样从密钥库中导出所需的证书

```
keytool -exportcert -keystore <keystore> -file some.cer 
```

您可能需要告诉 keytool 有关商店类型和商店提供者的信息，[请看这里](https://stackoverflow.com/questions/6866447/keytool-error-java-security-keystoreexception-bks-not-found)。

您可以使用以下代码将该 .cer 文件读入 iOS 钥匙串：

```
- (void) importCertToKeyChain: (NSData *) data
{
    // Delete the old certificate, otherwise SecItemAdd complains.
    OSStatus oss = SecItemDelete((__bridge CFDictionaryRef)([self clientCertificateQuery]));

    // Import the certificate
    SecCertificateRef certRef = NULL;
    certRef = SecCertificateCreateWithData(NULL, (__bridge CFDataRef)(data));

    NSDictionary *att = [NSDictionary dictionaryWithObjectsAndKeys: (__bridge id)(kSecClassCertificate), kSecClass, (__bridge id) certRef, kSecValueRef, nil];

    oss = SecItemAdd((__bridge CFDictionaryRef)(att), NULL);
} 
```

当您需要证书时，您可以像这样从钥匙串中获取：

```
- (SecCertificateRef) getCertFromKeyChain
{
    CFTypeRef ref = NULL;
    SecItemCopyMatching((__bridge CFDictionaryRef)([self clientCertificateQuery]), &ref);

    return (SecCertificateRef) ref;
} 
```

clientCertificateQuery 看起来像这样。

```
static NSString *clientCertSubject = @"TestSubjectClient";

-(NSMutableDictionary *) clientCertificateQuery
{
    NSMutableDictionary *query = [[NSMutableDictionary alloc] init];
    [query setObject:(__bridge id) kSecClassCertificate forKey:(__bridge id)kSecClass];
    [query setObject:clientCertSubject forKey:(__bridge id<NSCopying>)(kSecMatchSubjectContains)];
    [query setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecReturnRef];
 id)kSecAttrKeyType];
    return query;
} 
```

还有一个读取 PCKS12 存储的功能（您仍然需要将 BKS 存储转换为该格式）。它被调用`SecPKCS12Import`，您无需将证书导入您的 iOS 钥匙串。我没有运气，无论如何都需要钥匙串中的证书，但这里有[一些关于 this](https://stackoverflow.com/questions/9874932/ssl-identity-certificate-to-run-an-https-server-on-ios)的内容。

**更新：**

正如 camdaochemgio 在评论中指出的那样，在应用程序中包含包含秘密信息（如私钥）的证书时，不建议使用上述方法。因为 .cer 文件不受保护，可以轻松地从 .ipa 中提取。

PKCS#P12 支持密码保护，所以最好使用它。

您可以像这样将您的密钥库转换为 PKCS#P12（取自[此处](http://shib.kuleuven.be/docs/ssl_commands.shtml)）：

```
 keytool -importkeystore -srckeystore KEYSTORE.jks -destkeystore KEYSTORE.p12 -srcstoretype BKS -deststoretype PKCS12 -srcstorepass mysecret -deststorepass mysecret -srcalias myalias -destalias myalias -srckeypass mykeypass -destkeypass mykeypass -noprompt 
```

然后你可以像这样加载 .p12 文件（学分在[这里](https://stackoverflow.com/questions/11173711/how-do-i-programatically-import-a-certificate-into-my-ios-apps-keychain-and-pas)）

```
// Load Certificate
NSString *path = [[NSBundle mainBundle] pathForResource:@"cert" ofType:@"p12"];
NSData *p12data = [NSData dataWithContentsOfFile:path];
CFDataRef inP12data = (__bridge CFDataRef)p12data;

// Only password based PKCS#12 blobs are supported
CFStringRef password = CFSTR("Password");
const void *keys[] = { kSecImportExportPassphrase };
const void *values[] = { password };
CFDictionaryRef options = CFDictionaryCreate(NULL, keys, values, 1, NULL, NULL);

// The import
CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);
OSStatus securityError = SecPKCS12Import(inP12data, options, &items);

if (securityError == 0)
{
    // Exploring the content
    CFDictionaryRef myIdentityAndTrust = CFArrayGetValueAtIndex(items, 0);
    const void *tempIdentity = NULL;
    tempIdentity = CFDictionaryGetValue(myIdentityAndTrust, kSecImportItemIdentity);
    *identity = (SecIdentityRef)tempIdentity;
    const void *tempTrust = NULL;
    tempTrust = CFDictionaryGetValue(myIdentityAndTrust, kSecImportItemTrust);
    *trust = (SecTrustRef)tempTrust;
}

if (options) {
    CFRelease(options);
} 
```

最后但并非最不重要的一些关于这个主题的链接：

*   [https://developer.apple.com/library/ios/documentation/Security/Reference/keychainservices/Reference/reference.html](https://developer.apple.com/library/ios/documentation/Security/Reference/keychainservices/Reference/reference.html)
*   [https://developer.apple.com/library/ios/documentation/Security/Reference/certifkeytrustservices/Reference/reference.html](https://developer.apple.com/library/ios/documentation/Security/Reference/certifkeytrustservices/Reference/reference.html)
*   [https://developer.apple.com/library/ios/documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html](https://developer.apple.com/library/ios/documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html)
*   [https://github.com/kuapay/iOS-Certificate--Key--and-Trust-Sample-Project](https://github.com/kuapay/iOS-Certificate--Key--and-Trust-Sample-Project)
*   [http://blog.wingsofhermes.org/?p=75](http://blog.wingsofhermes.org/?p=75)

# java - 多个可绘制背景图像以适应屏幕分辨率

> ID：12346577
> 
> 赞同：3
> 
> 时间：2012-09-10T06:47:42.113
> 
> 标签：java, android, drawable, resolution, dpi

好的，所以我有一张分辨率为：1054X1054 的图像。我想设置该图像，使其完全适合 android 设备的屏幕尺寸。（我将在某些编辑器中将图像剪切为 nessacary）。所以我的问题是：我怎么知道我的图像应该是什么分辨率，这样它就可以覆盖设备背景而无需调整图像大小。（对于 mdpi、hdpi、ldpi）

我问这个问题是因为我一直误解“多屏幕分辨率”的真正工作原理。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T06:57:51.713

您可以将图像设计为使用不同的屏幕尺寸重新调整大小，您会发现每种设计都需要最少的空间。因此，上面的每个通用屏幕尺寸都有一个由系统定义的相关最小分辨率。

android os 以“dp”为单位计算大小——与定义布局时应使用的单位相同——这使系统可以避免担心屏幕密度的变化。

```
xlarge screens image sizes are at least 960dp x 720dp
large screens image sizes are at least 640dp x 480dp
normal screens image sizes are at least 470dp x 320dp
small screens image sizes are at least 426dp x 320dp 
```

# iphone - 如何访问一个 MainClass 中的多个类数据？

> ID：12346578
> 
> 赞同：0
> 
> 时间：2012-09-10T06:47:42.247
> 
> 标签：iphone, xcode, abstract-class

我正在做一个大项目。所以这就是我的应用程序包含大量编码的原因。这个项目的有趣之处在于它只包含一个主视图，而这个主视图包含 25 个子视图，每个子视图都包含 UITableview。所以对我来说问题是，如果我在主视图中声明所有这些子视图和 uitableview 以及每个子视图所需的不同功能它造成混乱。现在为了方便起见，我想为每个子视图创建单独的类，但我不熟悉如何在我的 mainviewviewcontroller 中访问所有这些类。如果有人无法理解我的问题，请访问此链接。[http://chris-software.com/index.php/2009/05/02/passing-data-between-classes/](http://chris-software.com/index.php/2009/05/02/passing-data-between-classes/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:42:58.690

从您的评论看来，您已经编写了您在问题中提到的内容，现在，您尝试使您的代码可扩展，并按照 zoul 的建议将其分开。

正如zoul所提到的，您的问题没有任何确切的解决方案，因为您的问题也不准确，或者说具体。

不幸的是，正如您在评论中提到的那样，您想要实现的目标并不完全可能。但是，让我尝试给您一些提示，在重构代码时您可能会发现它很有用。

1.  确定需要在不同类之间共享哪些数据。
2.  为您的应用程序确定视图控制器。我这么说是指您的应用程序可能需要的视图控制器的数量。您也可以使用更少数量的视图控制器来完成任务。
3.  如果共享数据的大小相当大，我建议您使用 SQLite 或 CoreData 来满足您的需要。

欢迎具体查询。祝你好运:)

附加说明：尽量遵循Apple提供的设计模式，最重要的是在SDLC的初始阶段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:21:58.197

首先，一定要把代码拆分成单独的控制器或视图，否则你会进入痛苦的世界。其次，在 Stack Overflow 上很难回答您当前的问题，因为这是一个关于架构的问题，正确回答它需要对您的问题进行更长时间的讨论；没有现成的解决方案。

通常，在这种情况下，您希望将单独的屏幕或视图构建为具有允许根据需要将它们连接在一起的接口的单独控制器。（努力设计单个控制器以尽可能少地了解其他控制器。）然后您可以拥有一个类来创建所有组件并将它们连接在一起。有许多特定的工具可以帮助解决这个问题，尤其是`UIViewController`iOS 5 中引入的容器 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T07:49:24.347

解决您在新/不同课程中不时使用相同代码的问题，可重用性是关键。但是要做到这一点，您必须遵循“松耦合和高内聚”原则。本质上，您需要像组件一样创建每个子视图，它执行特定任务并且不知道或不依赖于外部因素（如其父级等）。最后，我觉得您在尝试重用代码时面临的主要问题是因为您正在使用 IB 将函数连接到 UI 事件。我建议使用目标和选择器属性进行连接，因为这将简化可重复使用性并保持您的代码谨慎和清洁。

您可以在此处阅读有关耦合和内聚的更多信息[Loose Coupling and High Cohesion](http://www.xyzws.com/scjp/SGS11/5/2)

# android - 如何从头开始为 Android 平板电脑编写 LCD 驱动程序？

> ID：12346580
> 
> 赞同：7
> 
> 时间：2012-09-10T06:47:48.590
> 
> 标签：android, c, linux, linux-kernel, linux-device-driver

我想写一个[华硕TF700液晶屏的驱动](http://www.engadget.com/2012/06/25/asus-transformer-pad-infinity-tf700-review/)

*   我应该学习什么才能从一开始就做到这一点？
*   我应该如何开始进入它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T07:42:34.973

为此，您需要做的第一件事是彻底了解设备的硬件架构。

该系统基于 nVIDIA Tegra 3，LCD 面板将直接连接到它的图形子系统。

您的第一站应该是 Tegra 的技术参考手册。如果我所见过的其他 ARM SoC 的内容有什么可参考的，将是 8000-10000 页，并且仅在 NDA 下可用 - 特别是那些与图形子系统相关的部分。

接下来，您将需要彻底了解 Linux 中如何处理显示。您的目标是实现一个简单的帧缓冲区，还是利用 Tegra 的 2d 和 3d 功能？

LCD 面板的背光驱动器也将有一个驱动器——该控制器很可能挂在 Tegra 的 I2C 总线之一上。

为 Linux 构建一个基本的帧缓冲驱动程序应该非常简单，因为它实际上并没有做太多事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T08:43:27.530

同意 Martin James，如果您不必自己编写整个驱动程序会更好，并且华硕必须已经为现有的面板提供了一个。但是，如果您想支持新面板，则可以重用现有驱动程序代码并为新面板添加支持。这里有几个先决条件：

1.  华硕使用的芯片组的技术参考手册。
2.  显示面板规格。
3.  带有显示芯片组接口的硬件原理图。
4.  已经存在的帧缓冲区驱动程序的知识。
5.  （最重要的是）一个硬件团队，将探测传入/传出面板的信号。

同样，这将是一项艰巨的任务，并且需要一些时间来实施。一切顺利！（如果你还打算继续：）

# javascript - wrap is not working after including event.keycode == 13 in my html

I included the below code that is included in ** (bold) in my HTML form. I also have tags in my html form. After including the code in

> ID：12346586
> 
> 赞同：1
> 
> 时间：2012-09-10T06:48:15.397
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:57:48.463

无效的标记，错过`"`了以下结束双引号：

```
<input type="button" value="Search" onclick=" id="btnSearch">
                                            ^^ Missing ending double quote here 
```

它应该是：

```
<input type="button" value="Search" onclick="" id="btnSearch"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:59:01.537

```
<form name="linemanagerdb" action="UserManagement.jsp" onkeypress="return checkValue(event)" method="post">
    <table>
        <tr>
            <td>Employee ID</td>
            <td>
                <input type="text" name="text1" id="text1" value="" onkeydown="if (event.keyCode == 13) document.getElementById('btnSearch').click()"
            />
            </td>
        </tr>
    </table>
    <input type="submit" value="Search" id="btnSearch" />
    <textarea class="styled" rows="5" cols="12" name="jDesc" id="jDesc"></textarea>
    <script>
        function checkValue(event) {
            var e = event || window.event;
            var elem = e.target || e.srcElement;

            if (elem.nodeName.toLowerCase() == 'input') {
                return event.keyCode != 13;
            }

            return true;
        }
        document.getElementById("btnSearch").onclick = function () {
            alert("ok")
        }
    </script>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:43:00.023

我们需要做的就是从标签中删除 TextArea 标签。这解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:56:21.770

你缺少双引号`onclick`

```
<input type="button" value="Search" onclick="" id="btnSearch"> 
```

# jsf-2 - 在 RichFaces 4.0 中为扩展数据表保存表状态

> ID：12346587
> 
> 赞同：0
> 
> 时间：2012-09-10T06:48:17.967
> 
> 标签：jsf-2, datatable, richfaces, horizontal-scrolling

在 Richfaces 3.3 中，extendedDataTable 具有属性“tableState”，用于在支持 bean 字符串变量中保存表排序状态、列宽、列顺序等，但在 RichFaces 4.0 中，这似乎不存在。是否仍在实施中？或者我可以以不同的方式执行相同的操作？

迁移指南不建议任何内容，并且在扩展数据表的情况下几乎没有帮助。

我也面临很多水平滚动问题。如果我将列的宽度扩展了一些宽度，水平滚动条就会消失。这也可以在richfaces 演示站点上复制。只需将任何列宽扩展几个像素，水平滚动就会消失。

[http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=extendedDataTable](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=extendedDataTable)

有没有人尝试过 RF4 的扩展数据表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:03:38.903

看来它尚未针对 RF4.0 实施。暂定为 4.3.0。 [https://issues.jboss.org/browse/RF-10442](https://issues.jboss.org/browse/RF-10442)

# ruby - 从logstash中的文件名获取事件的时间戳

> ID：12346590
> 
> 赞同：2
> 
> 时间：2012-09-10T06:48:43.097
> 
> 标签：ruby, logging, logstash

我们有一个将事件写入文件的进程，没有时间戳。文件名本身以时间戳为后缀，该时间戳应该用于文件中的所有事件。现在，我正在尝试使用logstash的输入文件插件来解析文件。有没有一种方法可以将文件名获取到字段中，以便我可以使用 gsub 过滤器提取时间戳，然后使用日期过滤器将时间戳设置为事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T12:29:40.150

我有类似的需求，并再次问了这个问题-感谢 Jettro Coenradie ，您可以在[这个问题中找到更新的答案:)](https://stackoverflow.com/questions/22916200/logstash-how-to-add-file-name-as-a-field)

# sql - oracle中的突变触发器问题

> ID：12346591
> 
> 赞同：1
> 
> 时间：2012-09-10T06:48:45.763
> 
> 标签：sql, oracle, plsql, oracle11g

我正面临变异触发错误，

我将在这里描述我使用 tableA 和 tableB 的问题。

TableA 包含一个名为 empChecked 的列，它可以包含 2 个值“-”、“+”。
TableB 包含一个名为 mgrChecked 的列，它可以包含 2 个值“-”、“+”。

当前要求是 empChecked 和 mgrchecked 中的两个字段必须同步。我的意思是，如果 empChecked 更新为“+”，那么在 tableB 中签入的经理必须更新为“+”，反之亦然。两个字段都可以从前端进行更新。

我在两个表上都创建了触发器。但我面临 ora-04091 错误。

请建议我任何方法来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:55:14.977

变异表错误是代码异味。它几乎总是指向一个糟糕的数据模型，通常是标准化不足。

当然，这里有一个糟糕的数据模型。您的表格中有一个具有两个设置的列。没关系。现在您想将同一列添加到第二个表并保持两者同步。这个新专栏完全没有意义。该新列中没有可用的信息，而不是您无法通过查询第一个表获得的信息。

这就是 ORA-04091 告诉你的。您可以花费大量时间来构建解决方法，但这都是浪费精力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:41:36.903

与其使用触发器进行这种同步，为什么不创建一个名为 TableB 的视图，它将“包含”来自 TableB 的所有数据（不是 mgrchecked）+ 来自 TableA 的 empChecked 列像这样

```
create or replace view TAbleB as
  select t1.id
       , t1.Column2
       , ... 
       , t1.ColumnN
       , t.empChecked
    from TableA t
       , TableB t1
   where t.id = t1.id 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-10T07:23:57.997

您对细节有点不清楚，但我认为这会有所帮助（假设您在两个表上都有一个 ID 列）

```
CREATE TRIGGER tri_table_a
    AFTER UPDATE ON table_a
DECLARE
    hits NUMBER :=0;
BEGIN
    SELECT count(*) INTO hits FROM table_a a INNER JOIN table_b b ON (a.id=b.id) WHERE a.emp_checked<>b.mgr_checked;
    IF hits>0 THEN
        UPDATE table_b b SET mgr_checked=(SELECT emp_checked FROM table_a a WHERE a.id=b.id);
    END IF;
END;
/

CREATE TRIGGER tri_table_b
    AFTER UPDATE ON table_b
DECLARE
    hits NUMBER :=0;
BEGIN
    SELECT count(*) INTO hits FROM table_a a INNER JOIN table_b b ON (a.id=b.id) WHERE a.emp_checked<>b.mgr_checked;
    IF hits>0 THEN
        UPDATE table_a a SET emp_checked=(SELECT mgr_checked FROM table_b b WHERE a.id=b.id);
    END IF;
END;
/ 
```

关键是 don't use `FOR EACH ROW`，这会导致表锁。

* * *

**编辑**

*   这不会与 table lock 或 ORA- **04091**冲突，因为没有`FOR EACH ROW`in trigger 条件（也不是*row trigger*），这意味着触发器主体只会在整个更新操作完成后*执行；*

*   这**不会**导致死循环，因为当`count(*)`in trigger body返回0时，`UPDATE`不会执行inside trigger body；

*   另外，`count(*)`必须使用，因为这是一个*语句触发器*并且没有`:new.emp_checked`可用的；

*   一般场景：更新table_a -> 触发tri_table_a -> [trigger]check count -> [trigger]update table_b ->triggers tri_table_b -> [trigger]check count -> done。

*   在发布此答案之前，我自己尝试了这一点。

# java - Java中的小集合：哪种数据结构？

> ID：12346594
> 
> 赞同：12
> 
> 时间：2012-09-10T06:48:50.710
> 
> 标签：java, set

**关于小型**集合（例如 1-100 个元素）上各种 Java 集合实现的性能是否有任何好的参考，或者有人可以告诉我更多信息？O(1) vs O(log n) 的故事对于这些大小几乎无关紧要，但由于我需要处理数百万个这样的小集合，所以性能确实很重要。我发现的大多数参考资料都没有提到太多。

我需要对这些集合执行以下操作（通常每组只执行几次）：

*   初始化一个新集合和/或硬拷贝一个旧集合
*   添加/删除元素
*   迭代集合
*   计算`hashCode()`整个集合的

我认为这些是比较可行的选择（假设比较/散列 T 几乎是免费的）：

*   **HashSet<T>**：似乎不擅长迭代（因此在`hashCode()`）
*   **TreeSet<T>**：似乎有高得离谱的开销
*   **LinkedHashSet<T>**：完全没有这方面的经验，它有很高的开销吗？
*   **ArrayList<T>**：本身很快，但不是一组，所以需要丑陋的技巧`Collections.sort()`......

一般首选以上哪一项？还是我应该写自己的`SmallSet<T>`课？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T06:54:23.747

如果您真的在寻找性能，那么您可以通过自己的测试来帮助您：

*   您是否经常为它们分配新的？如果是这样，垃圾收集可能比其他情况更相关
*   您是否只分配一次并需要快速访问？Hashcollisions 将对此产生影响
*   你经常改变它们吗？

您需要设置一个与您的实际使用类似的测试用例 - 测试足够长的时间以使 GC 启动并在那里看到效果。

如果您检测到它们之间的关键差异，请在每次更新 JVM 后重新运行测试，因为实现可能会发生变化。

在你完成这样的性能测试之前，我会给出我的标准建议：选择可读性最好的选项，并且只有在使用可读性较低的选项有明显的好处时才更改它。代码维护者（可能是未来的你）会为此感谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-08T21:37:14.597

这是一个作为数组的小型 Set 实现：

它很容易满足您的需求:)

来源： [https ://highlyscalable.wordpress.com/2011/12/29/ultimate-sets-and-maps-for-java-p1/](https://highlyscalable.wordpress.com/2011/12/29/ultimate-sets-and-maps-for-java-p1/)

```
public class ArraySet {
    private int[] array;
    private int size = 0;

    public ArraySet(int capacity) {
        array = new int[capacity];
        Arrays.fill(array, -1);
    }

    public boolean add(int key) {
        int index = Arrays.binarySearch(array, 0, size, key);
        if (index < 0) {
            int insertIndex = -index-1;

            if(size < array.length - 1) {
                if(insertIndex < size) {
                    System.arraycopy(array, insertIndex, array, insertIndex + 1, size - insertIndex);
                }
                array[insertIndex] = key;
            } else {
                int[] newArray = new int[array.length + 1];
                System.arraycopy(array, 0, newArray, 0, insertIndex);
                System.arraycopy(array, insertIndex, newArray, insertIndex + 1, array.length - insertIndex);
                newArray[insertIndex] = key;
                array = newArray;
            }

            size++;
            return true;
        }
        return false;
    }

    public int get(int position) {
        return array[position];
    }

    public int size() {
        return size;
    }

    public boolean contains(int key) {
        return Arrays.binarySearch(array, key) >= 0;
    }
} 
```

# asp.net - 部署后出现“allowDefinition='MachineToApplication'超出应用程序级别”错误（跟进）

> ID：12346598
> 
> 赞同：0
> 
> 时间：2012-09-10T06:49:12.980
> 
> 标签：asp.net, .net, deployment, exception-handling, web-config

[这是我昨天](https://stackoverflow.com/questions/12338559/allowdefinition-machinetoapplication-beyond-application-level-error-on-dep/)提出的问题的后续问题。我得到了答复并实施了相同的方法，但没有运气。我完全无法理解我哪里出错了，为什么它不起作用。有人可以帮帮我吗？它通过 ASP.NET Web 开发服务器在本地工作，但不是通过 IIS（本地或尝试部署时）。另外，为什么服务器如此重要？

请注意，它是一个网站，而不是 Web 应用程序。提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:50:45.320

您的应用程序可能针对 .NET 4.0，而应用程序池针对 .NET 2.0。

# android - Android-如何在 textview 上显示文本选择？

> ID：12346604
> 
> 赞同：12
> 
> 时间：2012-09-10T06:49:26.147
> 
> 标签：android, textview, android-edittext, textselection

我正在实现一个 epub 阅读应用程序，我使用 textview 来显示 epub 的文本。当用户长按 textview 时，我想从 textview 中选择文本，然后对 textview 的选定文本执行多项操作，例如突出显示等。那么，如何向用户显示这些光标以选择用户想要的任何文本。

*我不想使用 EditText 并让它看起来像 textview。可能优先使用覆盖文本视图。

*我附上了截图来解释我在找什么-

![来自 moon+reader 的屏幕截图，用于在其中显示我想要在我的应用程序中选择的文本](../Images/b869ad117126f2442301be123372f95b.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-16T19:50:07.063

这是很久以前问过的，当时我自己也遇到了这个问题。我自己为自己的应用 Jade Reader 制作了一个 Selectable TextView。我已将解决方案托管到 GitHub。（BitBucket 的代码与应用程序相关联，但它更加完整和完善。）

[可选的 TextView（在 GitHub 上）](https://github.com/zhouray/SelectableTextView)

[Jade 阅读器（在 BitBucket 上）](https://bitbucket.org/rayzhou/jaderead-restart/overview)

![选择](../Images/c5cbf08d9455d35f231d2bec95515b89.png)

使用以下代码将使您的 TextView 可选择。

```
package com.zyz.mobile.example;

import android.app.Activity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;

public class MainActivity extends Activity {

    private SelectableTextView mTextView;
    private int mTouchX;
    private int mTouchY;
    private final static int DEFAULT_SELECTION_LEN = 5;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // make sure the TextView's BufferType is Spannable, see the main.xml
        mTextView = (SelectableTextView) findViewById(R.id.main_text);
        mTextView.setDefaultSelectionColor(0x40FF00FF);

        mTextView.setOnLongClickListener(new View.OnLongClickListener() {
            @Override
            public boolean onLongClick(View v) {
                showSelectionCursors(mTouchX, mTouchY);
                return true;
            }
        });
        mTextView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mTextView.hideCursor();
            }
        });
        mTextView.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                mTouchX = (int) event.getX();
                mTouchY = (int) event.getY();
                return false;
            }
        });
    }

    private void showSelectionCursors(int x, int y) {
        int start = mTextView.getPreciseOffset(x, y);

        if (start > -1) {
            int end = start + DEFAULT_SELECTION_LEN;
            if (end >= mTextView.getText().length()) {
                end = mTextView.getText().length() - 1;
            }
            mTextView.showSelectionControls(start, end);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-10T08:54:54.280

这取决于您希望支持的最低 Android 版本。

在 3.0+ 上，您在 TextView 上有[textIsSelectable](http://developer.android.com/reference/android/widget/TextView.html#attr_android:textIsSelectable)属性，它启用了此行为。例如：

```
<TextView android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:padding="@dimen/padding_medium"
        android:text="@string/hello_world"
        android:bufferType="spannable"
        android:textIsSelectable="true"
        android:textSize="28dip"
        tools:context=".MainActivity" /> 
```

在此之下，你最好的办法是使用一个看起来和行为都像 TextView 的 EditText（除了 slection 的东西）。或者您可以使用跨度自己实现此功能。

# search - 狮身人面像搜索 max_matches 错误

> ID：12346608
> 
> 赞同：4
> 
> 时间：2012-09-10T06:49:37.483
> 
> 标签：search, sphinx, thinking-sphinx

我想以这样一种方式自定义 sphinx 搜索，以便我可以在内存中保留尽可能多的记录。

我收到以下错误：

> searchd 错误（状态：1）：每个查询 max_matches=25000 超出范围（每个服务器 max_matches=1000）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T12:07:36.077

在您的情况下，我建议`max_matches`在服务器端设置为 100000。

即使您需要更多，您也可以随时使用`limit N,M`来获取结果集的切片而不会超出范围。

以我的经验，人类在搜索结果中不会超过 10-20 页，因此 100K 应该绰绰有余。

# c# - 如何删除注释行

> ID：12346611
> 
> 赞同：0
> 
> 时间：2012-09-10T06:50:00.837
> 
> 标签：c#, sql, stored-procedures

请告知我如何在我的存储过程中运行时删除注释掉的代码 /* .. */。以下面的例子为例：如果我的SP发现下面这种方式的注释代码垃圾，包括注释符号在内的所有注释代码都将被删除。

```
/*
    INSERT INTO MATERIAL.GTT_DMD
      (
      asof_src_dt
      , asof_src_tm
      )
        SELECT
       asof_src_dt
       , CAST (asof_src_ts AS  TIME(0)) AS asof_src_tm
     FROM  DEMAND.v_supl SNP_DMD
*/ 
```

* * *

感谢您的支持，我找到了正则表达式

```
/\*[\w\W]*?(?=\*/)\*/ 
```

你能帮忙看看这是否是删除代码的最佳方式。谢谢。

```
public void DeleteCommentedCode(string filePath)
    {
        StreamReader input = new StreamReader(filePath);

        Regex pattern = new Regex("/\*[\w\W]*?(?=\*/)\*/");            

          StreamReader streamReader = new StreamReader(filePath);
        StreamWriter streamWriter = new StreamWriter(filePath + ".tmp");

        while (!streamReader.EndOfStream)
        {
            string data = streamReader.ReadLine();
            if(pattern.IsMatch(data))
            {
                data = data.Replace(data, ""); // Replace with empty 
                streamWriter.WriteLine(data);
            }

        }

        streamReader.Close();
        streamWriter.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:55:44.940

假设您的意思是从存储过程中删除评论，这里有一篇关于提取 SP 内容的帖子。

[C#/SQL 获取所有存储过程及其代码](https://stackoverflow.com/questions/1549794/c-sql-get-all-stored-procedures-and-their-code)

要删除您可以尝试使用正则表达式的注释，这里有一篇关于使用一些 RegEx 示例清理 SQL 语句的好文章。

[http://larrysteinle.wordpress.com/2011/02/09/use-regular-expressions-to-clean-sql-statements/](http://larrysteinle.wordpress.com/2011/02/09/use-regular-expressions-to-clean-sql-statements/)

# java - 即使在运行时异常之后如何确保计划的执行程序运行

> ID：12346616
> 
> 赞同：2
> 
> 时间：2012-09-10T06:50:34.243
> 
> 标签：java, executorservice

我有一个运行时间很长的任务，它会定期轮询 Web 服务以获取 XML 内容。我正在为这些定期运行使用计划的执行程序，并且一切正常。

[ScheduledExecutorService scheduleAtFixedRate](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate%28java.lang.Runnable,%20long,%20long,%20java.util.concurrent.TimeUnit%29)的 JavaDoc状态

> *   ...如果任务的任何执行遇到异常，则后续执行将被抑制 ...*

这清楚地表明，在未处理的异常情况下，应用程序即使正在运行，实际上也处于停止状态并且什么也不做。

我想确保任务执行不会停止，除了捕获所有异常之外，还有其他方法可以处理吗？

```
@Override 
public void run() {
  try {
       // fetch xml feed from network, 
       // parse the feed and dump to file the json.
  } catch (Exception e) {
      logger.error("Unhandled exception " + e);}
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:20:50.040

除了在 r​​un 方法中捕获所有异常之外，我认为没有其他方法。如果您不介意使用 3rd 方库，您可以使用[Quartz](http://www.quartz-scheduler.org/)。看看[这里](http://www.quartz-scheduler.org/documentation/quartz-2.1.x/examples/Example6)。

*hth*

# java - Android：将自定义活动类的引用传递给自定义线程类-> 好样式？

> ID：12346625
> 
> 赞同：1
> 
> 时间：2012-09-10T06:51:24.070
> 
> 标签：java, android, android-layout, android-asynctask

我是 Android 编程新手，我想知道是否可以毫无问题地使用以下代码片段，或者是否存在一些样式问题。该代码完全有效：

```
public class SelectTeamActivity extends Activity {

    private HashMap<String, String> keyValues;
    private MyXMLHandler xmlHandler;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_select_team);
        getActionBar().setDisplayHomeAsUpEnabled(true);

        xmlHandler = new MyXMLHandler(this);
        xmlHandler.execute(urlHandler.getUserDataURL());
    }
} 
```

这是 asycncron 任务的自定义类：

```
public class MyXMLHandler extends AsyncTask<String, String, String> {

    private String pin;
    SAXParser sp;
    DefaultHandler userData;
    private SelectTeamActivity selectTeamActivity;

    public MyXMLHandler(SelectTeamActivity selectTeamActivity) {
      this.selectTeamActivity = selectTeamActivity;
    }

    public String getPin() {
    return pin;
    }

    @Override
    protected String doInBackground(String... address) {
    try {
        URL url= new URL(address[0]);
        URLConnection yc = url.openConnection();
        SAXParserFactory spf = SAXParserFactory.newInstance();
        sp = spf.newSAXParser();
        userData = new DefaultHandler() {
        public void startElement(String uri, String localName, String qName, Attributes attributes)
            throws SAXException {
            if (localName.equals("entry")) {
            pin = attributes.getValue("pin");
            }
        }

        };
        sp.parse(yc.getInputStream(), userData);
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (SAXException e) {
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    }
    return pin;
    }

    protected void onPostExecute(String result) {
        TextView text = (TextView) selectTeamActivity.findViewById(R.id.textView1);
        text.setText(result);
    }
} 
```

我将活动类“SelectTeamActivity”的“this”引用传递给 MyXMLHandler 构造函数，以在运行任务的函数“doInBackground”完成后更新 UI。

这个可以吗？

我正在搜索与“在 AsynTask 类中更新 UI”相关的其他一些问题，但我只找到了扩展“AsyncTask”的类仅作为 UI Activity 类的内部类实现的解决方案。在那里访问 UI 完全没有问题。

问候

# mysql - Mysql根据颜色和大小维护Stock

> ID：12346627
> 
> 赞同：0
> 
> 时间：2012-09-10T06:51:54.770
> 
> 标签：mysql, inventory, stock

我正在为自行车开发库存。我将`Cycles cid,title, desc etc`, 存储在 CYCLE 表中，另一个`STOCK(sid,cid,qty)`用于存储库存。现在我知道自行车可以有多种颜色（黑色、红色、橙色等）和尺寸。我对根据尺寸和颜色存储库存感到困惑。

我修改了 STOCK 表

```
STOCK(sid,cid,qty,color,size). 
```

例如

```
 1,101,12,1,null for Red Color 
 1,101,12,2,null for Green Color 
```

......（关于颜色的相同周期的 6 条记录，因为可以有 6 种颜色）PLUS Size medium,Large,Small（关于尺寸的相同周期的 3 条记录）1,101,12,null,medium - for中号 1,101,12,null,Small - 适用于小号 1,101,12,null,Large - 适用于大号

1 个周期产品共有 9 条记录。

我对库存 STOCK（sid、cid、数量、红色、绿色、蓝色、橙色、青色、黄色、中、大、小）和 1 条库存单条记录有另一种设计。1,101,0,0,1,3,5,6,3,0,7

我的问题是，这是维持股票的正确方法，还是我可以改进。如果您能帮助微调，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:59:12.023

你的设计应该是这样的：

循环表：只有循环 CID、颜色、尺寸、价格等的“属性”

您将尺寸设置为“小”、“中”等 您将颜色设置为“红色”、“绿色”等

库存表：只维护数量及相关明细ID、CID、QTY、DATE_OF_ARRIVAL_OF_SHIPMENT等

所以现在，Cycle 表中的每一行都标识了一种“类型”的周期，而 stock 表中的每一行都标识了一些库存周期。

这很好，因为现在，如果您必须添加其他颜色/尺寸，您只需要在表格中创建另一行，而不需要修改您的结构。此外，现在您可以针对您的所有特征编写简单的查询（例如，所有尺寸的红色循环有多少个库存？）

希望这可以帮助！

# c# - C# 加载文档后做一些事情

> ID：12346628
> 
> 赞同：1
> 
> 时间：2012-09-10T06:52:05.303
> 
> 标签：c#, webbrowser-control

我想在文档完全加载后做一些事情......我不想使用 WebBrowser.DocumentCompleted 事件，所以请不要建议我这样做。

我尝试了两种方法来做到这一点，但它们不起作用。有人可以告诉我我做错了什么吗？

示例 1

```
wb.Navigate("http://www.google.com");
while(wb.ReadyState != WebBrowserReadyState.Complete) { }
richtextdocument.Text = wb.DocumentText; 
```

示例 2

```
wb.Navigate("http://www.google.com");
while(wb.isBusy == true) { }
richtextdocument.Text = wb.DocumentText; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:08:08.313

尝试使用计时器来验证文档加载状态。

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            if(webBrowser1.ReadyState == WebBrowserReadyState.Complete)
            {
                timer1.Enabled = false;
                richTextBox1.Text = webBrowser1.DocumentText;
            }
        }

        private void button1_Click(object sender, EventArgs e)
        {
            timer1.Enabled = true;
            webBrowser1.Navigate("http://www.google.com");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:14:00.023

您在这里处理的是尝试同步调用固有的异步方法。

正如您在对问题的评论中提到的那样，不使用的原因`DocumentCompleted`是您需要将该事件用于其他目的，我建议您做的是使用该`DocumentCompleted`事件，再加上一个私有类布尔标志来确定这是否是`DocumentCompleted`与否的特例。

```
private bool wbNeedsSpecialAction; //when you need to call the special case of Navigate() set this flag to true

public Form1() 
{
    InitializeComponent();         
    wb.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(wb_DocumentCompleted);
}

void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    if (wbNeedsSpecialAction)
    {
        richtextdocument.Text = wb.DocumentText;
        wbNeedsSpecialAction = false;
    }
    else
    {
        //other cases of using DocumentCompleted...
    }
}

public void Browse()
{
    wbNeedsSpecialAction = true; //make sure the event is treated differently
    wb.Navigate("http://www.google.com");
} 
```

这仍然允许您控制事件处理程序中的其他情况。

`Navigate()` *您必须特别注意确保您的用户在此“特殊操作”页面完成加载之前*无法触发另一个调用，否则它可能会*窃取*特殊情况事件。一种方法可能是阻止 UI 直到页面完成加载，例如：

```
Cursor.Current = Cursors.WaitCursor; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T14:18:28.210

```
while(wb.ReadyState != WebBrowserReadyState.Complete) {application.doevents } 
```

# selenium - 用于 UI 的 Selenium 工具

> ID：12346630
> 
> 赞同：0
> 
> 时间：2012-09-10T06:52:16.083
> 
> 标签：selenium

我在我的 Firefox 中安装了 selenium 工具。我在 selenium 中记录了登录详细信息测试用例并保存了它，每当我想测试我用来播放记录的测试用例的登录模块时。它非常简单易行。我想使用 selenium 改进代码明智的测试。你能帮我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:59:14.433

看一眼：

[SeleniumHQ](http://seleniumhq.org/)

[文档](http://seleniumhq.org/docs/)

请让你的问题更具体一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:03:39.980

开始编写 selenium 测试的基本步骤如下：1）从 ffox 中的 selenium IDE 开始（正如您在问题中提到的）2）记录测试 3）将您的测试导出为 java/junit4/webdriver 4）设置例如 intelij IDEA ide通过以下方式： - 设置 maven.dont 忘记环境变量 - 打开想法 > 项目结构。选择您安装的 JDK - 从头开始​​创建项目 > 板条箱项目 - maven 模块 - 从原型创建（tciked 复选框）。选择 maven-archetype-quickstart。按完成 - 您已经创建了新项目。现在在 POM.xml 中添加适当的依赖项

```
 <dependency> <groupId>org.seleniumhq.
selenium</groupId> <artifactId>selenium-
java</artifactId> <version>2.24.1</version>
</dependency> 
```

-选择红色下划线的代码段。按 alt+enter 。maven 将更新存储库索引 - 现在您可以将记录的 selenium 测试复制/粘贴到创建项目中。它会是这样的：

```
import com.thoughtworks.selenium.SeleneseTestBase;
import org.junit.After;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;

import java.util.concurrent.TimeUnit;

public class HomePageTest extends SeleneseTestBase{

static WebDriver driver;

@Before
public void openFirefox(){

driver = new FirefoxDriver();
driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);

}

@Test
public void testHomePage(){
driver.get("https://www.google.by/");
WebElement search = driver.findElement(By.xpath("//*[@id=\"gbqfq\"]"));
search.sendKeys("laptop");
search.submit();

}

@After
public void closeFirefox(){
// driver.quit();
}

} 
```

按运行。请享用）

# android - 安卓。如何使用嵌套在 TabHost 上的 ViewPager 显示 MapView

> ID：12346632
> 
> 赞同：0
> 
> 时间：2012-09-10T06:52:24.377
> 
> 标签：android, android-mapview, android-viewpager

我需要开发下一个情况：我有带有 TabHost 的 main_screen.xml，它有两个（或更多）选项卡 - 每个选项卡都有作为根元素 ViewPager。

ViewPager 有两个（或更多）页面下一个序列 MainViewList->DetailView->MapView 并返回 MapView->DetailView->MainViewList (M->D->M)

我有问题：在第一次通过时一切正常，但在再次 M->D->M 之后它崩溃了，但只有一个 MapView 可以用 MapActivity 充气。

我通过调试检查了 ViewPagerAdapter 上的 destroyItem 方法可以正常工作 - 它从 parentView (ViewPager) 中删除 MapView。

然后我去 Map->D->M 我从 ViewPagerAdapter prevscreen 中的屏幕列表中删除 - 所以如果向左滑动我无法返回屏幕（第一个屏幕，或 MapView 之后的 DetailView，我无法滑回 MapView - 我需要这个逻辑有效）。

您还可以看到这篇文章[MapView 没有从 ViewPager 中删除？](https://stackoverflow.com/questions/10530087/mapview-not-being-removed-from-viewpager)有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:52:24.377

所以我找到了下一个解决方案

ViewPager 是任何 Activtiy 的一部分，所以我创建活动下一个代码

```
class FirstTabActivityWithMap extends MapActivity{
 MapViewHolder mpViewHolder;//Extends ViewHolder and contains MapView inflated from layout resource

protected void onCreate(...){
// Create view pager
 myViewPager=new ViewPager();//And etc init Pager

//Some code witch create mpViewHolder - it's depend of yours needs
 setContentView(myViewPager);
}

//Here is magic :)
public void someActionWichNeedAddScreenWithMap(){

 //Remove current map from prev parent 
 if (mpViewHolder.currentView.getParent() != null) {
    ((ViewPager) mpViewHolder.currentView.getParent())
        .removeView(mpViewHolder.currentView);
    }
    this.myViewPager.addScreen(mpViewHolder);//Adding screen and call notifyDataSetChanged()
 }

} 
```

此代码 ((ViewPager) mpViewHolder.currentView.getParent()).removeView(mpViewHolder.currentView); 有一个问题 - 你总是会使用同一个 MapView 实例。

# forms - 动态添加控件到动态 crm 2011

> ID：12346634
> 
> 赞同：0
> 
> 时间：2012-09-10T06:52:26.950
> 
> 标签：forms, controls, crm, microsoft-dynamics

我想保留一个包含多个字段的记录列表，并通过一个表单输入它们，该表单将现有记录显示为由不同文本框组成的列表。同一个表单上的“新”按钮将为新条目创建新的文本框行。

是否可以通过单击按钮在表单上动态创建文本框等控件？用 JS 还是插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:50:58.933

为此，您最好制作一个自定义网页并将其显示在表单上的 iFrame 中。

我不相信动态创建文本框会很好用，我认为它不会被支持——你必须改变 DOM。此外，您还必须实现一些奇怪且过于复杂的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:09:42.360

过去我也收到过这样的要求。虽然不完全支持，但这是可能的，我已经看过很多次了。

最好的办法是阅读一些文档以熟悉通过 javascript 向 CRM 服务发出请求。您需要将库添加到您的解决方案中，并确保使用它们的表单引用它们。

从这里开始：http: [//msdn.microsoft.com/en-us/library/gg334279.aspx](http://msdn.microsoft.com/en-us/library/gg334279.aspx)

使用 javascript 进行 DOM 更改时，jQuery 和 jQueryUI 也会让你的生活变得更轻松。

阅读knockoutjs。我基本上已经完成了您所要求的相同事情，并且利用淘汰赛使添加\删除\更新行的任务变得如此简单。

完成任务的最佳方法是首先创建一个具有基本结构的 html 页面 Web 资源。还要创建页面引用的 javascript Web 资源。该文件将用于动态修改页面。在您的实体表单中，添加一个新的侧导航链接并将其指向您的 Web 资源。

现在，当该网页加载时，在 js 文件中有一个事件处理程序，用于请求该实体的记录列表并显示它们。从这里您可以包含事件处理程序和按钮，它们将允许您捕获事件，然后对 CRM 进行适当的服务调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T18:12:18.287

为什么不在单独的隐藏选项卡中将表单上已有的字段？

然后使用 javascript 来：
显示选项卡
显示提交按钮
（用户输入数据）
通过 ajax 提交值（[http://msdn.microsoft.com/en-us/library/gg328025.aspx](http://msdn.microsoft.com/en-us/library/gg328025.aspx)）
清除文本框
隐藏选项卡

# c++ - 如何在 QxtApplication 中隐藏控制台窗口

> ID：12346637
> 
> 赞同：2
> 
> 时间：2012-09-10T06:52:50.110
> 
> 标签：c++, qt, libqxt

我正在尝试制作 gui Qxt 应用程序，但是在启动时会创建一个控制台窗口。我不需要控制台窗口，如何隐藏它？

我正在使用 mingw gcc4.4 qt4.8 libqxt-0.6.2

。轮廓：

```
QT       += core gui network testlib

CONFIG  += qxt
QXT     += core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = yascreens
TEMPLATE = app

SOURCES += main.cpp \
    application.cpp \
    configwidget.cpp \
    network.cpp \
    imageselectwidget.cpp

HEADERS  += \
    application.h \
    configwidget.h \
    network.h \
    defines.h \
    imageselectwidget.h

RESOURCES += \
    resources.qrc

QMAKE_CXXFLAGS += -std=c++0x

FORMS += \
    config.ui 
```

完整的来源[在这里](https://github.com/bakwc/yascreens)（github）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:01:31.657

我找到了一个部分解决方案（控制台窗口出现片刻然后隐藏）。您应该修改您的 main.cpp 文件，如：

```
#if defined(Q_OS_WIN)
    #define _WIN32_WINNT 0x0500
    #include <windows.h>
    HWND WINAPI GetConsoleWindow(void);     // For hiding console in windows
#endif

int main(int argc, char *argv[])
{
    #if defined(Q_OS_WIN)
        HWND hwnd = GetConsoleWindow();
        ShowWindow(hwnd, 0);               // For hiding console in windows
    #endif

    // Your application code here
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:27:23.340

问题是我在 pro 文件中使用了 QTest 和 testlib。只是不要使用 QTest :)

# java - 从停止的地方恢复活动而不会丢失数据

> ID：12346639
> 
> 赞同：0
> 
> 时间：2012-09-10T06:53:02.137
> 
> 标签：java, android

嗨，我对活动有疑问，因为我是 Android 中的新手，我有两个活动：当第一个活动完成时，第二个活动开始，第二个活动的内容元素发生变化

* * *

（这在第一个“默认”活动中）

```
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

        final Context context = this;
        AppPrefs appPrefs = new AppPrefs(context);
        String Last_Activity = appPrefs.getValue("Last_Activity");
         if(Last_Activity == "listV"){
             finish();
             Intent i = new Intent(this, NewClas.class);
             startActivity(i);

         }
} 
```

当应用程序在后台时，我打开它：每个已更改的元素都变成了原来的样子，

我的意思是所有更改都像以前一样返回

我想要的是恢复活动，并显示它是应用程序在后台时所做的更改。

对不起我的英语我希望有人帮助我非常感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:58:45.503

啊.. 你的 If 条件永远不会成为**真的**，

应该是这样的，

```
 if(Last_Activity.equals("listV")){ ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T06:59:41.240

您可以使用[onSaveInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)将所需的任何值保存在包中，然后在[onRestoreInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)中恢复它们。

# java - JPA：按集合值属性排序查询结果？

> ID：12346643
> 
> 赞同：2
> 
> 时间：2012-09-10T06:53:21.667
> 
> 标签：java, jpa, orm, jpa-2.0

我有一个具有价值属性的实体：

```
@Entity
public class Scenario{
  ..
  @ManyToMany
  List<Category> categories;
  ..
} 
```

有什么方法可以查询`Scenarios`和订购`categories`属性的查询结果，如下所示：

`select scenario from Scenario scenario order by scenario.category`

更准确地说，我们有兴趣从每个`Scenario`列表中对第一个类别进行排序并忽略其余部分。我们可以在 JPQL/Criteria 查询中做这些事情吗（例如，`Comparator`以某种方式传递自定义）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:38:47.177

您的问题意味着`categories`集合具有定义的顺序。如果它是一个索引集合（即它用 注释`@OrderColumn`）并且您想对第一个 s 进行排序，`Scenario`您 应该能够执行以下操作：`name``Category`

```
select s from Scenario s left join s.categories c 
where index(c) = 0 order by c.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:44:12.620

我们使用hibernate注解对数据进行排序：

```
@Sort(type = SortType.NATURAL)
private SortedSet<Category> sections = new TreeSet<Category>(); 
```

在这里我们使用`Set`注释，因为我们也想要独特的元素。

```
public class Category implements java.io.Serializable, Comparable<Category> {

    public int compareTo(Category category) {    
        // Your implementation of compareTo
    }
} 
```

# c# - Ghostscript 使服务器崩溃

> ID：12346646
> 
> 赞同：1
> 
> 时间：2012-09-10T06:53:32.507
> 
> 标签：c#, asp.net, iis-7.5, ghostscript, cassini

我的问题是：我正在使用 ghostscript 将一些 pdf 转换为 jpeg 文件，然后将它们渲染为 silverlight 控件。我正在使用以下方法转换 pdf 文件：

```
public void PdfToJpg(string ghostScriptPath, string input, string output) {
            timer1.Enabled = true;
            //if the pdf has more than 1 file (ex. 3) then 3 jpeg files will be outputed 
            String ars = "-dNOPAUSE -sDEVICE=jpeg  -r300 -o" + output + "-%d.jpeg  " + input;
            ProcessStartInfo startInfo = new ProcessStartInfo();
            startInfo.WindowStyle = ProcessWindowStyle.Hidden;
            startInfo.Arguments = ars;
            startInfo.FileName = ghostScriptPath;
            startInfo.WindowStyle = ProcessWindowStyle.Hidden;            
            using (Process exeProcess = Process.Start(startInfo)) {
                exeProcess.WaitForExit();
            }           
        } 
```

然后将页码和页面字节[]保存到字典中，会话中的字典并使用启用silverlight的服务发送它，并将它们发送到包含silverlight控件的aspx页面（使用Response.redirect（page.aspx）） . 一切正常，但有时服务器（Cassini 或 IIS）崩溃，这意味着文件已转换但不会发生重定向，只是页面保持在加载状态。我必须使用“结束进程”关闭 cassini 或重新启动 IIS 服务器，以便该进程再次工作。我不认为问题出在服务上，因为我有一个类似的过程来向 silverlight 应用程序发送一个字节 [] 的音频文件并且一切正常，服务器永远不会卡住，所以我认为这是因为 ghostscript.. ., 如果有人有一些想法。另外我正在使用elmah并且没有报告错误......并且在调试时，当我单击包含转换和过程的其他部分的查看按钮时，它不会进入点击事件但转换完成（不是重定向），我不知道这怎么可能……谢谢。所以肯定是ghostscript

更新：我将代码更改为：

```
 using (Process convertProc = new Process()) {
                convertProc.StartInfo.FileName = ghostScriptPath;
                convertProc.StartInfo.Arguments = args;
                //convertProc.StartInfo.UseShellExecute = false;
                //convertProc.StartInfo.RedirectStandardOutput = true;
                convertProc.StartInfo.CreateNoWindow = true;
                convertProc.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
                convertProc.Start();
                ThreadedKill(convertProc.Id);
                convertProc.PriorityClass = ProcessPriorityClass.Normal;
                convertProc.WaitForExit();
                } 
```

如果 useshellexecute 和 redirectoutput 被注释，服务器有时会“疯狂”，如果不是，代码每次都运行完美，但是出现了 ghostscript 进程的窗口，我不希望这样。为了不出现，我必须评论这行或将 useshellexecute 设置为 true 并评论重定向输出，这有时会导致失败。我能做些什么？以及什么是redirectStandardOutput 以及它是什么...，在MSDN 上不明白...

更新 2：将我的 gswin64.exe 更改为 gswin64c.exe 用于控制台应用程序，现在我正在谈论的那个窗口不再显示了。没有代码疯了……，至少现在还没有……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:56:11.077

首先，你不需要，`-dNOPAUSE`因为这`-o`意味着它`-dBATCH`并`-dNOPAUSE`没有伤害。

这个问题是“间歇性”发生的吗？或者，如果您发送的文件反复挂起（使服务器崩溃？）：它是每次都挂起，还是更频繁地挂起该特定文件？

如果这确实是断断续续的，则不太可能是 Ghostscript。

*要将 Ghostscript 中的stdout*和*stderr*捕获到文件中，您可以添加`-sstdout=___.out`and`-sstderr=___.err`以查看 Ghostscript 是否已抱怨。如果您总是编写相同的文件，则错误后的内容会告诉您是否有任何消息是由 gswin*.exe 生成的。

添加`-Z:`也会将一些时间信息添加到 Ghostscript 输出中。

请注意，由于您使用的是 JPEG 输出：如果 Ghostscript 意外停止，则*TEMP*`-r300`目录中将有两个文件以开头并具有扩展名。这些是为用于条带的基于磁盘的“clist”文件创建的（300 dpi 字母大小的页面足够大，可以超过默认值 8m）。*`te_``.tmp``-dMaxBitmap=____`*

 *如果您在 TEMP 文件夹中没有看到文件堆积`te_XXXXX.tmp`，则 Ghostscript （可能）没有崩溃。*

# jsp - 在jsp中包含一个动作结果

> ID：12346652
> 
> 赞同：0
> 
> 时间：2012-09-10T06:54:20.553
> 
> 标签：jsp, struts2

我有以下jsp页面

```
header
Body
footer
left navigation
and right navigation 
```

我在正文页面中包含页眉页脚左右导航，为此我正在使用

```
<s:include/> 

<s:include value="leftnav.jsp/>
    leftnav.jsp contains link
    messages
    friendshiprequest
    ..
    .. 
```

我想显示消息计数和新的友谊请求计数。我的问题是通过包含消息和友谊请求计数值不显示。我无法要求采取必要的行动。有什么方法可以包含带有操作结果的页面而不是仅页面。

# asp.net - 根据另一个 Literal 值设置 Literal 的显示

> ID：12346656
> 
> 赞同：2
> 
> 时间：2012-09-10T06:54:35.010
> 
> 标签：asp.net

将文字文本块设置为仅在另一个文字文本块返回值时显示的最佳方法是什么？

这是我正在尝试构建的代码，其中包含逻辑所在的注释。

```
<!-- Will be shown if there is content in the DB -->
<asp:Literal id="letter_to_zelda" runat="server"></asp:Literal>

<!-- Will be also shown if there is content in the db, but 
     I only want to show it if the line above had no content to display -->
<asp:Literal id="letter_to_link" runat="server"></asp:Literal> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:42:00.810

在您从数据库中的代码中检索值之后，您应该分配这些值。

```
letter_to_zelda.Text = ValueFromDb;
if(String.IsNullOrEmpty(ValueFromDb))
{
    //if content is not static, assign it
    letter_to_link.Text = LetterText;
    letter_to_link.Visible = true;
} 
```

# javascript - 缩短地址栏中的 url

> ID：12346657
> 
> 赞同：4
> 
> 时间：2012-09-10T06:54:36.127
> 
> 标签：javascript, redirect, short-url

我是 html 新手。是否可以为应用设置短 URL？例如：- 我们可以在用户的​​地址栏中使用“www.abc.com\r”，而不是长网址“www.abc.com\x\y\z\a”。我们可以使用 javascript 来模拟吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:14:31.023

是的，您可以通过在位置创建一个文档`/r`并向该文档添加一个 Javascript 来简单地执行以下操作：

```
document.location.href = "/x/y/z/a"; 
```

但是，由于许多原因，您不应该这样做。

1.  这不是重定向（您可以返回浏览器，因此您基本上是在破坏您的历史记录）
2.  你依赖 Javascript
3.  这将对SEO产生负面影响
4.  它更慢
5.  ...

您确实应该尝试在应用程序的服务器端处理此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:00:30.080

你正在寻找`url rewriting`

阅读[ASP.NET 中的 URL 重写](http://msdn.microsoft.com/en-us/library/ms972974.aspx)

[**初学者的 URL 重写**](http://www.addedbytes.com/articles/for-beginners/url-rewriting-for-beginners/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:00:10.033

这是使用数据库完成的，该数据库获取短 URL 的长 URL，因此请注意您只能使用 Javascript 在客户端上进行操作。

# ruby-on-rails - Rails：清除英语或阿拉伯语字符串中的特殊字符

> ID：12346660
> 
> 赞同：3
> 
> 时间：2012-09-10T06:54:54.533
> 
> 标签：ruby-on-rails, ruby, utf-8

我想从英语或阿拉伯语字符串中清除特殊字符。例如，以下示例中的“–”是显示“？”的特殊字符 转换为 UTF-8 时。

文件名：`1-Mechanical Drawings – Part 1`应该是`1-Mechanical Drawings Part 1`.

`السلطات العراقية تعلنé`应该是`السلطات العراقية تعلن`，其中`é`是特殊字符，应该从字符串中删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:06:45.353

这在某种程度上是在重新发明轮子，但是您可以执行以下操作来获得您在问题中想要的输出：

```
def clean_file name
  result = File.basename(name,".*")
  result.gsub!(/[é–]\s?/,'')
  result
end 
```

将 [] 中的位替换为您认为不适合 é 等文件名的字符。但要注意两件事：

*   使用上面的黑名单方法可能意味着你留下你不想要的字符 - 使用像 \W 这样的白名单方法来捕获所有非单词字符更正常，这至少在 ruby​​ 1.9 中有效，但也许是导致你的原因1.8的问题
*   在名称中留下空格可能会导致您出现问题，因此您可能应该至少删除“”和小写。

# iphone - 如何使openGLView透明？

> ID：12346665
> 
> 赞同：0
> 
> 时间：2012-09-10T06:55:15.233
> 
> 标签：iphone, opengl-es, cocos2d-iphone, cclayer

我正在尝试为我的游戏制作透明的 openGLView，我希望它只对我游戏中的一个功能透明。实际上，它是与设备的相机相关的功能。我正在为我的相机使用 UIImagePickerController，但我无法使 GLView 透明。

我尝试过使用 Ray 的教程，我在这里发布了一些代码：

```
glClearColor(0,0,0,0);

[CCDirector sharedDirector].openGLView.backgroundColor = [UIColor clearColor];
[CCDirector sharedDirector].openGLView.opaque = NO; 
```

然后我有一个 UIView，我将它作为子视图添加到 UIWindow，然后我将 Picker 视图添加到 UIView。

关于如何使这个 openGLView 透明的任何想法？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:57:41.937

请尝试以下代码以实现透明。

```
glLayer.opaque = NO;      
glLayer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                kEAGLColorFormatRGBA8, kEAGLDrawablePropertyColorFormat, nil];
glClearColor(0.0f, 0.0f, 0.0f, 0.0f); 
```

# drools - 以编程方式添加 gdst（引导决策表）

> ID：12346666
> 
> 赞同：1
> 
> 时间：2012-09-10T06:55:18.010
> 
> 标签：drools, drools-guvnor

虽然有以[编程方式添加 DRL 规则](https://www.google.co.in/search?q=drools%20add%20rules%20programmatically)的方法，但无法找到是否可以以编程方式添加“引导决策表”。这些规则在 WebDAV 中可见，因为 gdst 文件只是 XML。是否有 API 可以在没有 guvnor UI 的情况下创建这些规则，使用 WebDAV 或 REST 上传到 guvnor 并稍后使用 UI 进行更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T11:11:51.097

您可以通过 Drools WB 内部 GIT 添加/移动/更新 gdst :) 首先，您需要查看有关配置/属性的文档/并留在 WB 6.2.0-beta2 上（不要去 beta3 或 CR1 ）。

[http://docs.jboss.org/drools/release/6.2.0.CR1/drools-docs/html/wb.Workbench.html#wb.systemProperties](http://docs.jboss.org/drools/release/6.2.0.CR1/drools-docs/html/wb.Workbench.html#wb.systemProperties)

请注意 ：

1.  默认主机是 localhost 所以你需要改变它

    org.uberfire.nio.git.ssh.host

2.  将默认 git 目录、M2 存储库移动到 Jboss AS 的一些外部路径。

最后，您会注意到只有“编辑过的”文件通过 GIT 而不是“生成的”文件。因此，如果您专注于 .gdst，您将无法检索/编辑您可以在 WB 中看到的生成的 .drl。

祝你好运 ：）

# emacs - Emacs 转到行首，跳过缩进

> ID：12346669
> 
> 赞同：4
> 
> 时间：2012-09-10T06:55:24.730
> 
> 标签：emacs

我在emacs中有一行代码：

```
<tab><tab>int i = 0;<cursor> 
```

如果我单击 Ctrl-a，它将移动到行首：

```
<cursor><tab><tab>int i = 0; 
```

但我想创建一个 elisp 函数，它将忽略开头的任何缩进：

```
<tab><tab><cursor>int i = 0; 
```

怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T07:00:19.457

> mm 运行命令 back-to-indentation，这是 `simple.el' 中的交互式编译 Lisp 函数。
> 
> 它与 Mm 绑定。
> 
> （回到缩进）
> 
> 将点移动到该行的第一个非空白字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T15:58:07.487

```
(defun beginning-of-line++ ()
  (interactive)
  (if (bolp)
      (back-to-indentation)
    (beginning-of-line)))
(global-set-key (kbd "C-a") 'beginning-of-line++) 
```

然后，如果单击 Ca，光标将移动到行首，然后再次单击 Ca，光标将返回缩进。连续的 Ca 将在行首和缩进之间切换替换光标。

# wcf - http://localhost/Service1.svc 上没有 EndPoint 监听

> ID：12346670
> 
> 赞同：1
> 
> 时间：2012-09-10T06:55:36.727
> 
> 标签：wcf, windows-phone-7.1

在**http://localhost:6272/Service1.svc**上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

**InnerException** 远程服务器返回错误：NotFound

我有 2 个解决方案项目

1\. **MyApp**（Windows 应用程序）

2\. **WcfService1**（类库）

我的**网络配置**

```
<?xml version="1.0"?>
<configuration>

 <system.web>
      <compilation debug="true" targetFramework="4.0" />
 </system.web>

<system.serviceModel>

<client>
  <endpoint address="http://localhost:6272/Service1.svc" binding="basicHttpBinding"
    bindingConfiguration="BasicHttpBinding_IService1" contract="ServiceReference1.IService1"
    name="BasicHttpBinding_IService1" />
</client>

<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>

<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IService1" closeTimeout="00:10:00"
      openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
      allowCookies="true" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>

 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
 </system.webServer>

 </configuration> 
```

在我的 Service1.svc.cs 中，我只是将**CookiesContainer**对象返回给**client(MyApp)**。

我应该怎么办？**我的web.config**文件有什么变化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:08:41.020

您的 WcfService1 需要不仅仅是一个类库：您需要以某种方式托管该服务。有许多选项，包括使用 IIS 和自托管。这有点过时，但给出了一个很好的大纲：http: [//msdn.microsoft.com/en-us/library/bb332338.aspx](http://msdn.microsoft.com/en-us/library/bb332338.aspx)

# ruby - 使用 CSS 或 XPath 按内容选择元素

> ID：12346681
> 
> 赞同：0
> 
> 时间：2012-09-10T06:56:23.450
> 
> 标签：ruby, xpath, css-selectors, capybara

如何使用 CSS 或 XPath 在下面的代码中获取文本“Next”的链接？

```
<div id="pagination">
    <a href="link">2</a>
    <a href="link">3</a>
    <a href="link">4</a>
    <a href="link">5</a>
    <a href="link">6</a>
    <a href="link">7</a>
    <a href="link">8</a>
    <a href="link">9</a>
    <a href="link">10</a>
    <a href="link">Next</a>
    <a href="link">Last</a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:04:08.743

目前还不太清楚你想要什么。如果你想要第十个链接：

```
require 'nokogiri'

doc = Nokogiri::HTML(<<EOT)
<div id="pagination">
    <a href="link">2</a>
    <a href="link">3</a>
    <a href="link">4</a>
    <a href="link">5</a>
    <a href="link">6</a>
    <a href="link">7</a>
    <a href="link">8</a>
    <a href="link">9</a>
    <a href="link">10</a>
    <a href="link">Next</a>
    <a href="link">Last</a>
</div>
EOT

doc.search('a')[9]
=> #<Nokogiri::XML::Element:0x80763880 name="a" attributes=[#<Nokogiri::XML::Attr:0x80763498 name="href" value="link">] children=[#<Nokogiri::XML::Text:0x80762fd4 "Next">]> 
```

或者：

```
doc.at('//a[9]') 
```

如果您不知道它将是哪个元素编号，但要关闭文本并想使用 CSS，我会这样做：

```
doc.search('a').select{ |n| n.content == 'Next' }.first 
```

不幸的是，CSS 不能搜索标签的文本，所以你必须有点创意。XPath 可以做到：

```
doc.at('//a[text()="Next"]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:01:49.430

```
path = "/a[.='Next']" 
```

查询该路径，您将获得`a`带有“Next”的元素，因为它是`text()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:01:09.390

**如果规则是`a`其字符串值是`"Next"`的最后一个孩子`div`，只需使用**：

```
//div[@id='pagination']/a[last()-1] 
```

这里我们假设在`div`XML 文档中最多存在一个`id`属性值为 的`"pagination"`——这是对 XHTML 文档的合理假设。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
     <xsl:copy-of select="//div[@id='pagination']/a[last()-1]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<div id="pagination">
    <a href="link">2</a>
    <a href="link">3</a>
    <a href="link">4</a>
    <a href="link">5</a>
    <a href="link">6</a>
    <a href="link">7</a>
    <a href="link">8</a>
    <a href="link">9</a>
    <a href="link">10</a>
    <a href="link">Next</a>
    <a href="link">Last</a>
</div> 
```

**对 XPath 表达式求值，并将从该求值中选择的节点复制到输出：**

```
<a href="link">Next</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T22:16:22.327

实际上，也可以用 css 做到这一点：

```
 #pagination a:nth-last-child(2) 
```

假设它总是倒数第二个，你可以使用 css 3 选择器

# xml - 如何使用 XSLT 格式化日期？

> ID：12346685
> 
> 赞同：0
> 
> 时间：2012-09-10T06:56:50.187
> 
> 标签：xml, xslt, date-format

尝试将日期转换为特定格式但出现错误：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://www.openapplications.org/oagis/9"
xmlns:xs="http://www.w3.org/2001/XMLSchema">

<xsl:variable name="origDate" select="row[@num='6']/cell[@num='2']"/>
<PromisedDeliveryDateTime><xsl:value-of select="format-date(xs:date($origDate), '[Y] [M] [D]')" /></PromisedDeliveryDateTime> 
```

但我得到了错误：

> 未能转换 XQMessage 部分，索引 = 0（无效日期“30.11.2011”
> （非数字组件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:04:14.717

xs:date() 构造函数需要一个 ISO 日期格式的字符串：2011-11-30。要以其他格式处理日期，您首先需要将它们转换为 ISO 格式，例如，您可以这样做

```
string-join(reverse(tokenize($in, '.')), '-') 
```

# javascript - 在 iframe 中访问 jqgrid

> ID：12346686
> 
> 赞同：2
> 
> 时间：2012-09-10T06:56:51.163
> 
> 标签：javascript, jquery, iframe, jqgrid

我有一个包含 iframe 和按钮的 jsp。iframe 包含一个 jqgrid。当按下按钮时，我需要提醒 iframe 内 jqgrid 的记录计数。

我试过了

```
var grid = jQuery("#myFrame").contents().find("#myGrid");
var count = grid.jqGrid('getGridParam', 'reccount');
alert(count); //alerts undefined 
```

如何从 iframe 访问 jqgrid？

更新：

HTML 片段

```
 <body>
        <iframe 
            frameborder="0" name="myFrame" id="myFrame" width="100%"
            height="290px" scrolling="no"
            src="myFrameContent.jsp">
        </iframe>
       <form action="frameAction" method="post" target="myFrame">
           <button>refresh table</button> 
       </form>
    </body> 
```

当按下按钮时，表单将被提交，然后 iframe 将重新加载 json 字符串（响应）作为 jqgrid 的数据。根据奥尔加的回答，我试着把

```
$(function(){
        $("#myFrame").load(function(){         
            var grid = $("#myFrame").contents().find("#myGrid");           
            var count = grid.jqGrid('getGridParam', 'reccount');          
            alert("count=" + count);     
        });
    }); 
```

在父 jsp 中，它仍然警告未定义。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:40:14.383

可能您在访问`iframe`内容时遇到了相同的起源问题。看看[这里](http://javascript.info/tutorial/same-origin-security-policy)和[这里](https://stackoverflow.com/a/364997/315935)。

**更新**：问题可能是您尝试在加载`iframe` *之前访问它的内容。*

关于有效[的演示](http://www.ok-soft-gmbh.com/jqGrid/iframe.htm)

```
$(function () {
    $("#myFrame").load(function() {
        var $grid = $(this).contents().find("#list"),
            count = $grid.jqGrid('getGridParam', 'reccount');

        alert("count=" + count);
    });
}); 
```

（我使用`#list`的不是`#myGrid`你使用的，因为我加载的 iframe 中有另一个网格 ID）我使用[jQuery.load](http://api.jquery.com/load/)来确保我`iframe`只*在*`iframe`加载后才访问网格。对应的 HTML 如下：

```
<body>
    <iframe id="myFrame" src="textareaedit.htm"></iframe>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:39:08.303

如果您使用具有相同域的 iframe，那么它可能很有用，但如果您使用跨域，则无法访问内部 html / 内容。

```
var $frame = document.getElementById("myFrame");
var $frameContent = frm.contentWindow || frm.contentDocument;

alert($frameContent.document.getElementById("myGrid"));
console.log($frameContent.document.getElementById("myGrid")); 
```

# java - Junit：如何通过junit中的方法分配返回值

> ID：12346688
> 
> 赞同：2
> 
> 时间：2012-09-10T06:57:09.820
> 
> 标签：java, junit

如何使用模拟对象测试此类：

> 我的班级{
> 
> ```
>  MyStudent mystudent=null; 
>      Mymethod mymethod= new Mymethod ();
> 
>      public void show(String data){ 
>          mystudent=mymethod.display(data);
> 
>      }
>   } 
> ```

这里`mymethod.display()`方法返回一个实例`mystudent`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:42:53.313

如果我正确理解您的问题，您会想要一个在一个简单示例上使用模拟的 junit 测试示例。使用 Junit4 和[mockito](http://code.google.com/p/mockito/) ，您的 junit 测试将如下所示：

测试测试.java

```
import static org.junit.Assert.assertNotNull;
import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.when;
import static org.mockito.Matchers.anyString;

import org.junit.Before;

public class TestTest {
    private Test test;
    private Totest totest;

    @Before
    public void setup(){
        totest = mock(Totest.class);
        test = new Test(totest);
    }

    @org.junit.Test
    public void mytest_should_not_be_null_after_I_called_displayed(){
        when(totest.display(anyString())).thenReturn(new Mytest());
        test.myMethod("some data");
        assertNotNull(test.getMytest());
    }
} 
```

*setup*方法使用@Before*注释进行*注释。它在此测试类的任何测试用例运行之前执行。测试用例用*@Test*注释。它只是在调用方法*display*后检查字段*mytest*是否为非空。

 *你需要像这样改进你的测试类：

```
class Test{ 

     private Mytest mytest=null; 
     private final Totest totest;

     public Test(Totest totest) {
         this.totest = totest;
     }

     public void myMethod(String data){ 
         mytest = totest.display(data);
     }

    public Mytest getMytest() {
        return mytest;
    }

 } 
```

您应该注意构造函数，它将 Totest 实例作为参数。此类的 totest 字段成为最终字段，因为唯一允许设置它的代码是您的构造函数。这样您就可以在 Test 类中注入任何 Totest 实例。这是某种依赖注入（如何将依赖注入到类中的示例，但还有其他方法可以做到这一点，您也可以使用简单的 setter，我只是更喜欢将我的依赖声明为 final，因为它在我看来更清楚）。那么为什么我在你的小例子中使用了 DI 呢？因为我需要在 Test 中注入一个 Totest 的实例。我在单元测试中注入的实例只是一个模拟。测试用例的第一行定义了调用显示时模拟实例的行为。

我希望它有一些意义。*

# fullcalendar - fullcalendar zorder 问题

> ID：12346689
> 
> 赞同：1
> 
> 时间：2012-09-10T06:57:12.667
> 
> 标签：fullcalendar, z-order

我对完整日历版本 v1.5.3 有疑问。

这看起来是由于日历中呈现的事件的 zorder 所致。如果我以 15 分钟时段的日程表格式显示事件，IE 习惯于呈现一个事件，以便它与下一个事件重叠。这在 Firefox 中完美呈现。

有没有办法以编程方式改变正在渲染的事件的 zorder，以便最早的事件总是在最前面？

# angularjs - 有没有办法让AngularJS在开始时而不是在需要时加载部分？

> ID：12346690
> 
> 赞同：190
> 
> 时间：2012-09-10T06:57:16.150
> 
> 标签：angularjs

我有这样的路线设置：

```
var myApp = angular.module('myApp', []).
    config(['$routeProvider', function ($routeProvider) {
    $routeProvider.
        when('/landing', {
            templateUrl: '/landing-partial',
            controller: landingController
        }).
        when('/:wkspId/query', {
            templateUrl: '/query-partial',
            controller: queryController
        }).
        otherwise({
            redirectTo: '/landing'
        });
}]); 
```

我希望能够让 angularjs 在开始时而不是在请求时下载部分内容。

是否可以？

* * *

## 回答 #1

> 赞同：270
> 
> 时间：2012-09-10T07:16:44.657

是的，至少有两种解决方案：

1.  使用`script`指令 ( [http://docs.angularjs.org/api/ng.directive:script](http://docs.angularjs.org/api/ng.directive%3ascript) ) 将您的部分放入最初加载的 HTML
2.  如果需要，您还可以从 JavaScript 填写`$templateCache`（[http://docs.angularjs.org/api/ng.$templateCache](http://docs.angularjs.org/api/ng.%24templateCache)）（可能基于`$http`调用结果）

如果您想使用方法（2）来填写，`$templateCache`您可以这样做：

```
$templateCache.put('second.html', '<b>Second</b> template'); 
```

当然，模板内容可以来自`$http`调用：

```
$http.get('third.html', {cache:$templateCache}); 
```

这里是那些技术的 plunker：[http ://plnkr.co/edit/J6Y2dc?p=preview](http://plnkr.co/edit/J6Y2dc?p=preview)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-20T21:30:43.743

如果你使用 Grunt 来构建你的项目，有一个插件会自动将你的部分组件组装到一个 Angular 模块中，该模块会启动 $templateCache。您可以将此模块与其余代码连接起来，并在启动时从一个文件加载所有内容。

[https://npmjs.org/package/grunt-html2js](https://npmjs.org/package/grunt-html2js)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-12-11T20:07:35.167

添加构建任务以在 Angular 中连接和注册您的 html 部分`$templateCache`。（*这个答案是[karlgold答案的更详细的变体。](https://stackoverflow.com/a/16125388/88204)）*

对于**grunt**，使用[grunt-angular-templates](https://www.npmjs.com/package/grunt-angular-templates)。对于**gulp**，使用[gulp-angular-templatecache](https://www.npmjs.com/package/gulp-angular-templatecache)。

下面是用于说明的配置/代码片段。

**gruntfile.js 示例：**

```
ngtemplates: {
  app: {                
    src: ['app/partials/**.html', 'app/views/**.html'],
    dest: 'app/scripts/templates.js'
  },
  options: {
    module: 'myModule'
  }
} 
```

**gulpfile.js 示例：**

```
var templateCache = require('gulp-angular-templatecache');
var paths = ['app/partials/.html', 'app/views/.html'];

gulp.task('createTemplateCache', function () {
return gulp.src(paths)
    .pipe(templateCache('templates.js', { module: 'myModule', root:'app/views'}))
    .pipe(gulp.dest('app/scripts'));
    }); 
```

**templates.js（此文件由构建任务自动生成）**

```
$templateCache.put('app/views/main.html', "<div class=\"main\">\r"... 
```

**索引.html**

```
<script src="app/scripts/templates.js"></script>
<div ng-include ng-controller="main as vm" src="'app/views/main.html'"></div> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-02-03T10:48:34.580

如果您将每个模板包装在脚本标签中，例如：

```
<script id="about.html" type="text/ng-template">
<div>
    <h3>About</h3>
    This is the About page
    Its cool!
</div>
</script> 
```

将所有模板连接到 1 个大文件中。如果使用 Visual Studio 2013，请下载 Web Essentials - 它添加了一个右键菜单来创建 HTML Bundle。

添加这个人为更改 Angular`$templatecache`服务而编写的代码 - 它只是一小段代码并且它可以工作：[Vojta Jina 的 Gist](https://gist.github.com/vojtajina/3354046)

它`$http.get`应该更改为使用您的捆绑文件：

```
allTplPromise = $http.get('templates/templateBundle.min.html').then( 
```

您的路线`templateUrl`应如下所示：

```
 $routeProvider.when(
            "/about", {
                controller: "",
                templateUrl: "about.html"
            }
        ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-28T12:09:10.507

如果您使用 rails，您可以使用资产管道来编译并将您的所有 haml/erb 模板推送到一个模板模块中，该模块可以附加到您的 application.js 文件中。结帐 [http://minhajuddin.com/2013/04/28/angularjs-templates-and-rails-with-eager-loading](http://minhajuddin.com/2013/04/28/angularjs-templates-and-rails-with-eager-loading)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-24T08:56:31.660

我只是用来`eco`为我做这项工作。 `eco`Sprockets 默认支持。它是 Embedded Coffeescript 的简写，它接受一个 eco 文件并编译成一个 Javascript 模板文件，该文件将被视为您在资产文件夹中拥有的任何其他 js 文件。

你需要做的就是创建一个扩展名为 .jst.eco 的模板并在其中编写一些 html 代码，rails 将自动编译并使用资产管道提供文件，访问模板的方式非常简单`JST['path/to/file']({var: value});`：`path/to/file`是基于逻辑路径，所以如果你有文件`/assets/javascript/path/file.jst.eco`，你可以访问模板`JST['path/file']()`

为了让它与 angularjs 一起工作，你可以将它传递给模板属性而不是 templateDir，它就会开始神奇地工作！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-16T17:16:33.273

您可以将 $state 传递给您的控制器，然后当页面加载并调用控制器中的 getter 时，您可以调用 $state.go('index') 或您想要加载的任何部分。完毕。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-12-18T22:01:31.020

另一种方法是使用 HTML5 的[应用程序缓存](http://www.html5rocks.com/en/tutorials/appcache/beginner/)一次性下载所有文件并将它们保存在浏览器的缓存中。上面的链接包含更多信息。以下信息来自文章：

更改您的`<html>`标签以包含一个`manifest`属性：

```
<html manifest="http://www.example.com/example.mf"> 
```

清单文件必须与 mime-type 一起提供`text/cache-manifest`。

一个简单的清单看起来像这样：

```
CACHE MANIFEST
index.html
stylesheet.css
images/logo.png
scripts/main.js
http://cdn.example.com/scripts/main.js 
```

一旦应用程序脱机，它将保持缓存状态，直到发生以下情况之一：

1.  用户为您的站点清除浏览器的数据存储。
2.  清单文件已修改。注意：更新清单中列出的文件并不意味着浏览器会重新缓存该资源。清单文件本身必须更改。

# c# - WCF JSON 返回服务应返回单个转义序列

> ID：12346694
> 
> 赞同：0
> 
> 时间：2012-09-10T06:57:31.240
> 
> 标签：c#, string, wcf, utf-8

我为将 html 代码更改为 JavaScript 转义所做的是：

```
string input = "&#2358;&#2381;&#2352;&#2368;&#2327;&#2306;&#2327;..."

var output = Regex.Replace(input, @"&#([0-9]*);", 
               x => String.Format("\\u{0:X4}", int.Parse(x.Groups[1].Value)));
or alternately;

var output = String.Join("", WebUtility.HtmlDecode(input)
                   .Select(x => "\\u" + ((int)x).ToString("X4"))); 
```

但是现在我有一个问题，当我通过 wcf 服务以 json 格式发送这些数据时。我得到了相应的价值。但只有输出变量出错，格式如下：

\\u0026\\u0023\\u0032\\u0033\\u0033\\u0037\\u003B\\u0026\\u0023\\u0032\\u0033\\u0037\\u0035\\u003B\\u0026\\u0023\\ u0032\\u0033\\u0033\\u0038\\u003B\\u0026\\u0023\\u0032\\u0033\\u0036\\u0034\\u003B\\u0020\\u0026\\u0023\\u0032\\u0033\ \u0032\\u0035\\u003B\\u0026\\u0023\\u0032\\u0033\\u0035

我不想要**'\\u0026'**但只想要**'\u0026'**作为回应。我已经尝试了所有方法，例如：

```
output.Replace("\\","'\'");
output.Replace("\\",@"\"); 
```

但没有在这里工作。

这是我的 WCF 服务方法：

```
 [OperationContract(Name = "GetByCity")]
        [WebInvoke(Method = "GET", UriTemplate = "/GetByCity/DeviceType={DeviceType}&CityId={id}&Limit={limit}", BodyStyle = WebMessageBodyStyle.WrappedRequest,
                    RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        NewsList GetByCity(string DeviceType, string id, string limit); 
```

现在我不知道在哪里定义 utf-8 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:03:56.083

Unicode escpace 序列`\u....`用于 C# 源代码，它用于 JSON 格式的数据，但不用于 C# 字符串。C# 字符串完全支持 Unicode，并且可以直接表示所有 Unicode 字符。

如果传输的 JSON 数据需要，WCF 服务将自动创建转义序列。但如果字符串已经包含这些转义序列，那么 WCF 服务将添加更多转义，以便在解析 JSON 数据后保留不必要的转义序列。

因此，为了解决您的问题，您需要将 HTML 实体 ( `&#....;`) 替换为真正的 Unicode 字符，即`&#2358;`需要替换为具有 Unicode 代码点 2358 的字符：

```
var output = Regex.Replace(input, @"&#([0-9]*);", 
           x => new String((char) int.Parse(x.Groups[1].Value), 1) ); 
```

# hadoop - 更改 HDFS (/var/logs/hadoop-yarn/apps) 日志中的 DEBUG 日志记录

> ID：12346697
> 
> 赞同：3
> 
> 时间：2012-09-10T06:57:36.250
> 
> 标签：hadoop, log4j, apache-pig

我正在使用 cloudera CDH4 演示 VM（MR2，Yarn）。

我有一个程序流程，通过hadoop命令执行jar文件，其中主类调用pigscript（通过pigserver registerscript方法和几个UDF在pigscript中被调用）。

在调用猪脚本之前，我可以将日志（调试）自定义到文件中。

启动 pig 脚本后，日志将保存在 HDFS 目录**/var/logs/hadoop-yarn/apps/(User-Name)/日志/（作业 ID）/（日志文件）**。

我可以在 yarn-site.xml 中看到属性**yarn.nodemanager.remote-app-log-dir**为**/var/logs/hadoop-yarn/apps/**。

对于该 remote-app-log-dir 属性，如何将日志记录更改为 DEBUG。

# c# - Winforms 链接检查器

> ID：12346706
> 
> 赞同：0
> 
> 时间：2012-09-10T06:58:05.657
> 
> 标签：c#, winforms

我有以下代码，旨在检查来自文件托管商的链接的可用性，如 rapidshare、extabit、turbobit........等。我在下面编写的代码总是返回 HttpStatusCode “OK”，因为链接实际上是有效的，但链接内的文件不可用或没有文件。有没有办法在不使用任何服务提供的任何 api 的情况下检查我想要的东西，我的意思是有没有一种使用 .Net 的方法可以让我做我想做的事？

```
private bool LinkChecker(string url)
    {
        string result = string.Empty;
        Uri urlCheck = new Uri(url);
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlCheck);
        request.Timeout = 15000;

        HttpWebResponse response = null;
        try
        {
            response = (HttpWebResponse)request.GetResponse();
        }
        catch (Exception err)
        {
            return false;
        }

        switch ((HttpStatusCode)response.StatusCode)
        {
            case HttpStatusCode.OK:
                result = "Ok";
                break;
            case HttpStatusCode.BadGateway:
                result = "No Internet";
                break;
            case HttpStatusCode.Forbidden:
                result = "Link Not Found";
                break;
            case HttpStatusCode.NotFound:
                result = "Link Not Found";
                break;
        }

        if (result == "Ok")
            return true;
        else
            return false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:16:54.597

这真的取决于主机。

一些主机返回带有正确代码的 HTTP 响应，但根据我的经验，它们中的大多数总是返回 200 OK。即使找不到页面/文件，许多网站也总是返回 200 OK。

一些主机将 HTTP 重定向返回到“找不到文件”页面，因此您可以使用该页面（您的新 URL 将包含文本“filenotfound”。

但我认为最通用的方法是在响应正文中查找某些文本。这意味着您很有可能会为每个主机寻找不同的文本，但我真的没有看到任何其他方式。

希望能帮助到你！:-)

# java - java.util.zip.ZipException：CEN 标头无效（签名错误）

> ID：12346707
> 
> 赞同：9
> 
> 时间：2012-09-10T06:58:10.960
> 
> 标签：java, zip

执行此（相对简单的）代码时出现此错误：

```
 ZipFile zf = new ZipFile(fn);
    Enumeration<? extends ZipEntry> eze = zf.entries();
    while (eze.hasMoreElements()) {
        ZipEntry ze = eze.nextElement();
        System.out.println(ze.getName());
    }
    zf.close(); 
```

实际上。有趣的是，我在 java-sun-6u32 和 java-1.6.0-openjdk-amd64 上得到了它，但是 java-sun-7u4 成功了。unzip 本身似乎可以很好地处理它。我猜这意味着这些 zipfiles 可能是由 java 7 理解的一些较新版本的 zip 创建的，但以前的版本没有。但是，任何见解将不胜感激。此外，由于在生产中我真的没有使用 java 7 的选项，任何使早期版本的 java 理解这个新版本的 zip 的方法（如果这实际上*是*问题所在，当然。）

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-10T22:09:01.170

`7z l -slt`您的评论中提供的输出非常有用：

> 类型 = zip 64 位

给出一个提示，它是*ZIP64*（*ZIP*规范的 4.5 版）。然而，尽管*Java7*支持它，但目前这种支持还没有向后移植到*Java6*，您将不得不求助于外部库，例如 Apache [Compress](http://commons.apache.org/compress/zip.html)。

PS作为参考，`file test.zip`会输出类似

```
test.zip: Zip archive data, at least v4.5 to extract 
```

# html - 在 Safari 浏览器上放大/缩小菜单栏未正确显示

> ID：12346710
> 
> 赞同：1
> 
> 时间：2012-09-10T06:58:13.317
> 
> 标签：html, css

我有一个包含 6 个项目的菜单栏：Safari 浏览器上的问题 ![在此处输入图像描述](../Images/474079056acb42ed5c754e1dbdee5be4.png)

当我放大时，您可以在上面和下面的图像中看到差异

![在此处输入图像描述](../Images/db7f81c0514234da5b32dc8b0fe40620.png)

当我放大布局时，只会更改 Safari 浏览器。但它在所有其他浏览器上都能正常工作。

CSS：

```
 .menubar {
  float:left;
  width:920px;  
  background:url(../images/nav-back.png) top left repeat-x;
  height:52px;
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  border-radius: 8px;
  padding:9px 10px 8px 10px;
  margin-bottom:32px;
 }
  .menubar * {
  padding:0;
  margin:0;
  font-size:18px;
  text-transform: uppercase;
 }
  .menubar ul {
  float:left;   
  background:url(../images/nav-bg.gif) top left repeat-x;
  width:920px;
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  border-radius: 8px;
  display: block;
  }
  .menubar li {
  float:left;
  background:url(../images/depth.gif) top right no-repeat;  
  line-height:52px;
  text-align:center;
  }
  .menubar li.last {
  background:none;
  }
  .menubar li.home a {
  -webkit-border-radius: 8px 0px 0px 8px;
  -moz-border-radius: 8px 0px 0px 8px;
  border-radius: 8px 0px 0px 8px ;
  width:145px;
  }
 .menubar li.plan a {
 -webkit-border-radius: 0px 8px 8px 0px;
 -moz-border-radius:0px 8px 8px 0px;
 border-radius: 0px 8px 8px 0px;
 width:150px;
 background:none;
 }
 .menubar li.freecard a {
 width:162px;
 }
 .menubar li.intro a {
width:160px;
 }
 .menubar li.howitwork a {
width:152px;
 }
 .menubar li.featurelist a {
width:151px;
 }
 .menubar li a {
color:#288fb7;
display: block;
text-decoration: none;
 }
 .menubar li a:hover {
color:#000;
text-decoration:none;
 }
 .menubar li a.active {
background:url(../images/nav-hover.gif) top left repeat-x;
color:#fff;
 }

<nav class="menubar">
            <ul>
                <li class="home"><a href="index.html">Home</a></li>
                <li class="freecard"><a href="create-free-card.html">Create FREE Card</a></li>
                <li class="intro"><a href="relay-card-intro.html">Relay Card Intro</a></li>
                <li class="howitwork"><a href="howitworks.html">How It Works</a></li>
                <li class="featurelist"><a href="feature-list.html">Feature List</a></li>
                <li class="plan last"><a href="plans.html" class="active">Plans</a></li>
                </ul>
        </nav> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:16:34.910

删除 .menubar ul 的宽度为

```
.menubar ul {
   float:left;   
   background:url(../images/nav-bg.gif) top left repeat-x;
   -webkit-border-radius: 8px;
   -moz-border-radius: 8px;
   border-radius: 8px;
   display: block;
} 
```

这解决了我的问题。

# c# - 在 C# 中编辑子窗体中的单个引用变量

> ID：12346717
> 
> 赞同：1
> 
> 时间：2012-09-10T06:58:29.947
> 
> 标签：c#, winforms

我目前正在尝试为我正在从事的项目制作程序。

我使用 2 个最终嵌入到父 WinForm 中的用户窗体。

我需要做但似乎没有工作的是创建对我的设置类的引用，并让用户表单直接编辑变量。数据使用序列化的 XML 存储

我有一个类可以控制我的 xml 文件的读/写。它首先在 ParentForm 中创建。然后，我有几个动态控件，它们从单独的用户表单中的 List<> 变量中读取。然后我使用该数据创建另一个用户窗体，它允许我查看/编辑这些变量。

我目前可以很好地查看它们，但我无法编辑变量。我对使用引用不是很熟悉，因为大多数时候我使用事件或只是从表单复制数据，导致（我觉得）不必要的开销。

为了更好地说明

WinForm -> 选择类别 -> 绘制 UserForm1（显示类别中的项目）-> 选择项目 -> 绘制 UserForm2（编辑项目）

所有表单都需要访问 WinForm 中的 Settings 变量。

这就是我目前正在做的事情：

编辑表格：

```
public partial class EditPage: UserControl
{
    public StorageClass refSettings;
    public EditPage(ref StorageClass pSettings)
    {
                  refSettings = pSettings; 
```

类别表格：

```
public partial class Categories: UserControl
{
    public StorageClass programSettings;
    public Categories(ref StorageClass pSettings)
    {
                  programSettings = pSettings; 
```

这当然不是实际的代码，而是我想要做的主要事情。任何帮助都是极好的

编辑：我没有收到任何错误。被传递的变量根本没有被更新。当我去编辑它时，它只是在处理子编辑表单后恢复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:03:54.060

第一：考虑到我认为它是*引用类型的类型的**名称*。所以在*这种情况下*，您不需要像带关键字的引用一样传递它。`StorageClass`**`ref`**

 **第二：如果这只是一个`data-class`，包含一些必须在程序的不同域之间共享的数据的类，请在单独的类中声明它，例如`static`一个。

一个*伪代码*。

```
public static clss StorageClass 
{
     public StorageData Data1
     public StorageData Data2
     public StorageData Data3

} 
```

一次正确初始化该类中的所有字段，您可以在*任何*形式的应用程序中使用它，例如简单访问`StorageClass.Data1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:06:31.420

你可以有一个通用的设置类，它从 XML 中读取配置，我相信你已经拥有了。
假设您有一个下拉选择，它指示要
在 MainForm 的面板中加载和显示哪个用户控件，因此您从 SelectionChangedEvent 调用用户控件并将
设置类传递给 UserControls 的构造函数。
您还可以在 UserControls 中公开事件并从 MainForm 订阅这些事件，以根据用户控件中的操作在 MainForm 中进行任何更改。
假设您要编辑某些内容，从用户控件触发一个事件并在 MainParent 窗体中订阅该事件，然后从 MainForm 进行更改。**

# macos - Qt 和 OSX 的工作组合，用于部署通用二进制文件

> ID：12346722
> 
> 赞同：1
> 
> 时间：2012-09-10T06:59:13.617
> 
> 标签：macos, qt, deployment, cmake, macdeployqt

由于我在设置用于构建大型 qt 项目并将它们部署为通用 OSX 二进制文件的构建系统时遇到了许多问题，我只想问是否有人知道操作系统的完美组合（OSX leopard、snow leopard、lion、mountain lion) 和 Qt 版本拥有一个可以正常工作的部署系统。

我只想要以下东西：

1) 没有编译器问题 2) 一个**有效**的macdeployqt 命令 3) 与 CMake 完全兼容以构建项目。

当我尝试使用 OSX 10.5.8（带有 gcc 4.0.1 的豹）、Qt 4.7.1 和 CMake 2.8.7 制作通用 dmg 时，最后 3 点的组合对我来说似乎很痛苦！

# html - 不放doctype可以吗？

> ID：12346723
> 
> 赞同：0
> 
> 时间：2012-09-10T06:59:17.593
> 
> 标签：html, doctype

> **可能重复：**
> [怎么了，Doctype？](https://stackoverflow.com/questions/414891/whats-up-doctype)

在我的浏览器中，我查看了我已经制作的 html 页面的页面源代码，并注意到

```
<html> 
```

是红色字体，表示有错误。

我在它之前添加了这个：

```
<!DOCTYPE html> 
```

而且它现在似乎不是红色字体。

问题是......我的页面的外观现在与以前不同，当时我没有文档类型。

问题是，不声明 doctype 并仍然保留我页面的样式是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:01:38.777

不要编写有效的 HTML 以消除验证错误。编写有效的 HTML 以便将其一致地呈现给所有客户端。

如您所说，如果不指定指示用户代理如何解释以下代码的文档类型，*则无法保留页面的样式。*

话虽如此，您编写的标记可能比您上面引用的更符合另一种文档类型。

[请参阅“选择文档类型”](http://htmlhelp.com/tools/validator/doctype.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:04:26.817

[在某些（实际上是相当多的）浏览器（例如 IE）中，如果您不输入 doctype（ Quirks Mode - Wikipedia](http://en.wikipedia.org/wiki/Quirks_mode) ） ，渲染将完全不同（请注意我的使用剧烈）。

在任何情况下，最好的办法是每次添加一个。获取 TextExpander 之类的内容，以便更轻松地输入。

就像每天早上记得刷牙一样，这是另一个应该成为强制性的习惯。

此外，请考虑每次都使用 HTML5 DocType（您使用的那个）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T07:07:58.703

标准规定所有文档都应该有一个文档类型定义——doctype（文档类型）声明。W3 定义了您可以使用[的文档类型列表。](http://www.w3.org/QA/2002/04/Web-Quality)

正如您所发现的，添加*错误*的文档类型会产生一些有趣的后果。因此，根据您的文档所遵循的内容提供*正确的文档类型非常重要。*

请参阅[这篇出色的文章](http://www.alistapart.com/articles/doctype/)，其中详细介绍了这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T07:10:10.570

[**不要忘记添加文档类型**](http://www.w3.org/QA/Tips/Doctype)

HTML 不仅仅是一种类型，实际上还有很多：HTML 4.01 Strict、HTML 4.01 Transitional、XHTML 1.0 Strict 等等。所有这些类型的 HTML 都在其各自的[**W3C 规范**](http://www.w3.org/TR/html401/)中定义，但它们也以机器可读的语言定义，指定一种 HTML 类型的合法结构、元素和属性。

这样的定义称为“文档类型定义”，或简称为 DTD。

**为什么要指定文档类型？**

因为它定义了您的文档实际使用的**(X)HTML**版本，这是处理文档的某些工具所需的关键信息。

例如，指定文档的 doctype 允许您使用诸如[**标记验证器**](http://validator.w3.org/)之类的工具来检查**(X)HTML**的语法。如果这些工具不知道您使用的是哪种文档，它们将无法工作。

但最重要的是，对于大多数浏览器系列来说，一个 doctype 声明会使很多猜测变得不必要，从而触发“标准”渲染模式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T07:11:48.963

Doctype 定义了您的文档实际使用的 (X)HTML 版本，这是处理文档的某些工具所需的关键信息。

[http://www.w3.org/QA/Tips/Doctype](http://www.w3.org/QA/Tips/Doctype)

阅读上面的链接后，您可以决定它是否可以。:)

# layout - 创建自定义布局 ExtJs 4.1

> ID：12346730
> 
> 赞同：3
> 
> 时间：2012-09-10T06:59:46.723
> 
> 标签：layout, extjs4.1

我一直试图找出在 ExtJs 4.1 中创建自定义布局的最佳方法。我想要的是绝对布局的变体，能够为每个包含的项目指定 X、Y 坐标。问题是我还想根据项目的参数设置大小和坐标（包含的项目都是扩展 FieldSet 的小部件）。所以基本上它将是一个绝对布局，它接受参数来指定它的大小和位置。

有没有我可以阅读的指南来解释如何在 ExtJs 中扩展布局？我知道这可能只是一个简单的“扩展”并覆盖某些方法，但我还没有弄清楚如何准确地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T17:15:41.653

我发现的关于 Ext JS 4.1 布局的最佳资源是[Ext.layout.Context](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.Context)的文档。它解释了布局计算的流程和在布局期间访问 DOM 的规则。请注意，4.1 中的布局比 4.0.7 和更早版本中的要复杂得多，因此即使是简单的覆盖和扩展也可能需要花费数小时阅读源代码才能理解问题域。

就实际扩展布局而言，它就像扩展任何其他类一样工作。因此，请阅读您要扩展的类及其所有布局子类，以了解您的代码所在的位置以及可用的方法。

# iphone - 获取在 UIWebView 中加载的 pdf 文件的选定文本

> ID：12346731
> 
> 赞同：5
> 
> 时间：2012-09-10T06:59:51.007
> 
> 标签：iphone, objective-c, uiwebview, copy-paste

我们可以通过使用从 web 视图中获取选定的文本

```
- (NSString *)selectedText {
    return [self stringByEvaluatingJavaScriptFromString:@"window.getSelection().toString()"];
} 
```

但如果我正在加载 PDF 文件，这将不起作用。所以我的想法是复制选定的文本，然后以`UIPasteboard`编程方式将其粘贴。当我手动单击复制按钮时它工作正常，但我不希望它是那样的。我希望复制 cade 以编程方式执行。我怎样才能给它打电话？或者简单地说，如何从 Web 视图中加载的 PDF 文件中获取所选文本的参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:09:27.137

对此没有简单的答案，如果我错了，请纠正我，但我认为优化内存占用`UIWebView`实际上会将 PDF 页面绘制为图像，因此您无法访问单个项目（文本字段、图像等）。你可以这样做——

PDF 是由更多字典和数组组成的嵌套字典。您必须深入研究[CGPDFDocument](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CGPDFDocument/Reference/reference.html)

由于`UIWebView`在自定义方面没有太多公开，因此[Reader](https://github.com/vfr/Reader)是呈现 PDF 的一个很好的建议替代方案和起点。由于它是开源的，您可以更改渲染逻辑以选择文本。

另一种选择是[PSPDFKit](http://pspdfkit.com)。我在我的一个项目中使用过它，它非常棒。它包括全文搜索、自动缩略图创建、单页或双页模式、查看大纲、页面链接等

我认为上述方法中的一种或多种应该可以帮助您获得想要的东西，然后将其作为开源发布以供他人受益；）

# pdflib - PDFLib 模板错误：不能在对象范围内调用函数

> ID：12346736
> 
> 赞同：2
> 
> 时间：2012-09-10T07:00:07.287
> 
> 标签：pdflib

我正在使用 PDFLib 引擎生成 pdf 文件。我已经使用了它的模板功能，我的代码如下：

```
/* define the template */
template = p.begin_template_ext(width, height, "");

...template using text, vector, and image functions...
p.begin_page(page_width, page_height);

/* use the template */

p.fit_image(template, 0.0, 0.0, "");
...more page marking operations...
p.end_page();
...

p.close_image(template); 
```

但这给了我一个错误，例如：

> 不能在对象范围内调用函数。

我不确定我在哪里犯了错误。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:03:30.563

你还没有放置`end_template_ext`函数。让你的代码看起来像：

```
/* define the template */
template = p.begin_template_ext(template_width, template_height, "");
...place marks on the template using text, vector, and image functions...
p.end_template_ext(0, 0);
...
p.begin_page(page_width, page_height);
/* use the template */
p.fit_image(template, 0.0, 0.0, "");
...more page marking operations...
p.end_page();
...
p.close_image(template); 
```

# html - 如果选择了选项，如何编写文本？

> ID：12346739
> 
> 赞同：3
> 
> 时间：2012-09-10T07:00:18.037
> 
> 标签：html

大家好，当用户选择选项之一时，我正在尝试做的事情，用户可以看到文本。

例如：如果用户选择梅赛德斯用户可以看到类似“梅赛德斯是最好的德国汽车”的文字

```
<body>

<select>
  <option>Volvo</option>
  <option selected="selected">Saab</option>
  <option>Mercedes</option>
  <option>Audi</option>
</select>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:10:45.563

嗨，您可以使用 JavaScript 执行此操作

更改您的代码：

**HTML：**

```
<body>
<select name="type" id="type" onchange="call(this.value);">
  <option>Volvo</option>
  <option selected="selected">Saab</option>
  <option>Mercedes</option>
  <option>Audi</option>
</select>
<div id="message"></div>
</body> 
```

**脚本 ：**

```
 <script type="text/javascript">
    function call(value){
      var x=document.getElementById("message");
      x.innerHTML = value+" is the best German Car";
    }
    </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T07:17:28.727

这将提醒选定的文本。试试这个：

```
<body>
<select id="we">
  <option>Volvo</option>
  <option selected="selected">Saab</option>
  <option>Mercedes</option>
  <option>Audi</option>
</select>
<script type="text/javascript">
    var a=document.getElementById( 'we' );
    alert(a.options[a.selectedIndex].text)
</script>
</body> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T07:12:14.690

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    </head>
    <body>
        <div id="carMessage"></div>
        <select id="cars">
          <option>Volvo</option>
          <option selected="selected">Saab</option>
          <option>Mercedes</option>
          <option>Audi</option>
        </select>

        <script>
            $('#cars').change(function() {
                var msg = $('#cars').text() + " are the best cars.";
                $('#carMessage').text(msg);
            });
        </script>
    </body>

</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T07:39:23.467

请参阅此示例，在此示例中，在选择不同选项时，它将获取所选选项的值和标题，并将其写入目标 div。

**HTML：**

```
<select name="type" id="selectBox" onchange="call(this.value)">
    <option title="your text for Volvo">Volvo</option>
    <option title="your text for Saab" selected="selected">Saab</option>
    <option title="your text for Mercedes">Mercedes</option>
    <option title="your text for Audi">Audi</option>
</select>

<div id="message"></div> 
```

**Javascript：**

```
function call(value){

    var msgDiv = document.getElementById("message");
    var selectBox = document.getElementById("selectBox"); 
    var title = selectBox.options[selectBox.selectedIndex].getAttribute('title');     
    var message = value + " " + title;      

    msgDiv.innerHTML = message;

} 
```

## [演示](http://jsfiddle.net/akhurshid/DZuDH/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T07:05:54.920

您可以使用 javascript 来做到这一点。遵循[**这些教程**](http://www.javascriptkit.com/jsref/select.shtml)

# java - 获得最多 6 点的减 (-) 双倍值

> ID：12346741
> 
> 赞同：-1
> 
> 时间：2012-09-10T07:00:19.040
> 
> 标签：java, android

> **可能重复：**
> [使用最多两位小数的双精度](https://stackoverflow.com/questions/6554569/using-double-up-to-two-decimal-places)

嗨，我想将双精度值转换为 6 点，例如如果值是

```
 -1.00005522000 
```

它应该被转换并导致

```
 -1.000055 
```

我知道有很多解决方案，但我仍然无法获得价值

如果我使用像

```
 : -1.79769313486231E308 
```

结果值变成

```
 -9.22337203668547 
```

我用过参考

[http://www.roseindia.net/java/beginners/RoundTwoDecimalPlaces.shtml](http://www.roseindia.net/java/beginners/RoundTwoDecimalPlaces.shtml)

[java - 如何使用字符串生成器在java中打印最多两位小数？](https://stackoverflow.com/questions/9528904/how-to-print-upto-two-decimal-places-in-java-using-string-builder)

[使用最多两位小数的 double](https://stackoverflow.com/questions/6554569/using-double-up-to-two-decimal-places)

但没有得到解决方案，所以请任何人都可以帮助我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T07:03:22.643

使用十进制格式。

```
DecimalFormat df = new DecimalFormat("#.######");
df.format(1.00005522000); 
```

更多信息请点击[这里](http://developer.android.com/reference/java/text/DecimalFormat.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T07:07:55.140

```
double d = 1.00005522000;
String result = String.format("%.6f", d); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-10T07:18:22.733

```
string str=1.00005522000;
sting[] newstr=str.split(".");
newstr[0];//contains 1
newstr[1];//contains 00005522000
newstr[1].substring[0,5];//it contains  6 numbers 
```

# css - Twitter BootStrap Scrollspy Bug 仍然存在...？

> ID：12346746
> 
> 赞同：2
> 
> 时间：2012-09-10T07:00:36.523
> 
> 标签：css, ruby-on-rails-3, jquery-plugins, twitter-bootstrap

阅读 github 文档，错误是众所周知的，它被认为已在 2.1 中修复.. 但它没有？

本质上......您可以偏移scrollspy使用的数据但是偏移不会影响选项卡的实际点击。

对找到解决方案有任何帮助吗？

这是我要修复的网站：www.powerliftingbasics.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T15:50:33.447

根据@fat 对[问题 #3316: Scrollspy Bugs](https://github.com/twitter/bootstrap/issues/3316#issuecomment-6082310)的评论：

> `$('.navbar').scrollspy({offest: 70});`仅用于修改滚动计算 - 我们不会改变实际的锚点点击内容，这取决于您。该插件仅用于监视卷轴。

也就是说，ScrollSpy 只是观察，它不控制浏览器滚动。

`padding-top: 30px`Twitter Bootstrap 页面通过在链接到的部分上使用 a 来解决它。否则你可以用 JS 处理它：

```
function adjustScrollForNavbar() {
  var $nav = $('div.navbar')
  if ( $nav.css('position') !== "fixed" ) return
  window.scrollBy(0, -$nav.height())
}

// Adjust for fixed navbar
$('body').on('click.scroll-adjust', '[href^="#"]', function (e) {
  if ( e && e.isDefaultPrevented() ) return
  $(window).one('scroll', adjustScrollForNavbar )
}); 
```

显然，CSS 修复会更可取。

# string - Hive：将字符串转换为整数

> ID：12346750
> 
> 赞同：55
> 
> 时间：2012-09-10T07:01:04.217
> 
> 标签：string, hive, user-defined-functions, hiveql

我正在寻找一个内置 UDF 来将我的配置单元表中的字符串列的值转换为整数，以便使用 SELECT 和 ORDER BY 进行排序。我在语言手册中搜索过，但没有用。任何其他建议也欢迎。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-09-10T19:25:34.383

`cast(str_column as int)`

来自：[语言手册 UDFs - 类型转换函数](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-TypeConversionFunctions)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-09-18T10:20:56.983

如果该值介于 –2147483648 和 2147483647 之间，则 cast(string_filed as int) 将起作用。else cast(string_filed as bigint) 将起作用

```
 hive> select cast('2147483647' as int);
    OK
    2147483647

    hive> select cast('2147483648' as int);
    OK
    NULL

    hive> select cast('2147483648' as bigint);
    OK
    2147483648 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-06-12T15:52:00.777

它会返回 NULL 但如果作为 BIGINT 会显示数字

# cordova - 如何在 PhoneGap(Android) 中调用 Soap Web 服务

> ID：12346752
> 
> 赞同：0
> 
> 时间：2012-09-10T07:01:24.063
> 
> 标签：cordova, soap, android-ksoap2

我想创建肥皂服务并从 android Phone gap 拨打电话..我不知道从哪里开始...有人能说一下吗...

任何人都可以向我推荐任何示例教程或示例。谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:18:33.650

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

[如何从 Phonegap（iPhone 应用程序）调用 SOAP 服务](https://stackoverflow.com/questions/11542195/how-to-call-soap-service-from-phonegap-iphone-app)

# android - 从 mySQL 获取图像到 listview Android

> ID：12346755
> 
> 赞同：-3
> 
> 时间：2012-09-10T07:01:32.590
> 
> 标签：android, mysql, json, listview

我想从我的数据库 mySQL 中获取图像以显示在列表视图中（图像 + 文本列表视图）

我的代码：

```
 public void cek(){

           String url_select = "http://10.0.2.2/BloodGlucose/selectDoctor.php";

           HttpClient httpClient = new DefaultHttpClient();
           HttpPost httpPost = new HttpPost(url_select);

           //parameter
           ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();

           try {
              //add parameter
               httpPost.setEntity(new UrlEncodedFormEntity(param));

             HttpResponse httpRespose = httpClient.execute(httpPost);
             HttpEntity httpEntity = httpRespose.getEntity();

             //read content
             InputStream in = httpEntity.getContent();
             BufferedReader read = new BufferedReader(new InputStreamReader(in));

             String content = "";
             String line = "";

             while((line = read.readLine())!=null){
                content += line;
             }

             Log.d("ADBUG", "content: "+content);

             //json
             if(!content.equals("null")){

                try {
                   JSONArray jArr = new JSONArray(content);
                   for(int i=0;i<jArr.length();i++){
                      JSONObject jObj = jArr.getJSONObject(i);
                      String id = jObj.getString("_id");
                      String name = jObj.getString("name");
                      String dateofbirth = jObj.getString("dateofbirth");
                      String phone = jObj.getString("telp");
                      String address = jObj.getString("clinicaddress");
                      String file = jObj.getString("file");
                      String uname = jObj.getString("username_doctor");
                      String lulusan = jObj.getString("lulusan");
                      String clinicname = jObj.getString("clinicname");

                      names.add(name);
                      date.add(dateofbirth);
                      telp.add(phone);      
                      clinic.add(address);
                      usernamedoctor.add(uname);
                      namaklinik.add(clinicname);
                      graduate.add(lulusan);

                   }

setListAdapter(new DoctorArrayAdapter(this, names)); 

                } catch (JSONException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
                }

             }else{
                Toast.makeText(this, "Error", Toast.LENGTH_LONG).show();
             }

          } catch (ClientProtocolException e) {
             // TODO Auto-generated catch block
             e.printStackTrace();
          } catch (IOException e) {
             // TODO Auto-generated catch block
             e.printStackTrace();
          }
       } 
```

DoctorArrayAdapter 代码：

```
package research.android.bloodglucose;

import java.util.ArrayList;

import research.android.bloodglucose.R;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class DoctorArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final ArrayList<String> values;

    public DoctorArrayAdapter(Context context, ArrayList<String> names) {
        super(context, R.layout.list_row, names);
        this.context = context;
        this.values = names;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.list_row, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.DoctorName);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.list_image);
        textView.setText(values.get(position));

        // Change icon based on name
        String s = values.get(position);

        System.out.println(s);

        /*if (s.equals("WindowsMobile")) {
            imageView.setImageResource(R.drawable.windowsmobile_logo);
        } else if (s.equals("iOS")) {
            imageView.setImageResource(R.drawable.ios_logo);
        } else if (s.equals("Blackberry")) {
            imageView.setImageResource(R.drawable.blackberry_logo);
        } else {
            imageView.setImageResource(R.drawable.android_logo);
        }*/

        return rowView;
    }
} 
```

我的代码有什么问题吗？因为图片没有显示，只有文字，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:31:12.557

方便，您应该创建一个从 扩展的类`ArrayAdapter`，然后实现该方法`getView`来告诉您的列表对每个项目执行什么操作（添加图像和文本）。

检查此链接[Android listview 示例](http://www.mkyong.com/android/android-listview-example/)

（自定义 ArrayAdapter 示例）

（还有一个提示，您的错误部分来自构建列表视图，而不是来自从 MySQL 获取数据，因此请从您的问题中删除这部分，这会产生误导）

这是一个获取具有其 url 路径的图像的函数

```
public static Bitmap getURLImage(String path)
{

    try
    {
        URL aURL = new URL(path);
        final URLConnection conn = aURL.openConnection();
        conn.connect();
        final BufferedInputStream bis = new BufferedInputStream(
                conn.getInputStream());
        final Bitmap bm = BitmapFactory.decodeStream(bis);
        bis.close();
        return bm;
    }
    catch (Throwable e)
    {   
        Log.w("ERROR", "Error " + e.getMessage());
        return null;
    }
} 
```

然后你做（你应该从一个线程调用它，因为从 android 4.0 开始你不允许从主线程建立网络连接，这是应该添加的部分`getView`）：

```
 new Thread() {
                public void run() {
                    try {
                        //mBitmap is an attirbute
                        mBitmap = getRemoteImage(link);
                        handler.sendEmptyMessage(COMPLETE);

                    } finally {

                    }
                };
            };

/**
in your handler u set the image to the bitmap that you fetched
*/
    private final Handler handler = new Handler(new Callback() {

            public boolean handleMessage(Message msg) {
                   imageView.setImageBitmap(mBitmap);
            }
    } 
```

# java - 从屏幕捕获并保存到磁盘多线程

> ID：12346762
> 
> 赞同：6
> 
> 时间：2012-09-10T07:02:03.510
> 
> 标签：java, multithreading, video-capture

下面的问题应该观察屏幕，记录一个事件（一个测量文本框变成绿色）并记录所有导致它的事件，产生一个导致它的事件的“电影”。不幸的是，需要记录整个屏幕。到目前为止，我已经完成了识别参与的部分。但是我每秒几乎没有两帧。我想要大约**25 到 30 fps**。

我的想法是在两个单独的线程中进行写作和阅读。因为**写入事件很少，并且可以在后台运行**，所以录制事件会占用更多的时间并且运行得更快。不幸的是，整个事情似乎太慢了。我希望能够在事件发生**前10 到 20 秒将屏幕写入磁盘。**

编辑：如果可能的话，我想尽可能地保持平台独立。

编辑 2：Xuggler 似乎有一个独立于平台的 jar 文件。不幸的是，我真的不知道如何将它用于我的目的：记录导致 isarecord 被触发点的 20 秒。

这是我到目前为止所做的：

```
package fragrecord;

import java.awt.AWTException;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

import javax.imageio.ImageIO;

public class Main {
    public static void main(String[] args) {
        //The numbers are just silly tune parameters. Refer to the API.
        //The important thing is, we are passing a bounded queue.
        ExecutorService consumer = new ThreadPoolExecutor(1,4,30,TimeUnit.SECONDS,new LinkedBlockingQueue<Runnable>(100));
        System.out.println("starting");
        //No need to bound the queue for this executor.
        //Use utility method instead of the complicated Constructor.
        ExecutorService producer = Executors.newSingleThreadExecutor();

        Runnable produce = new Produce(consumer);
        producer.submit(produce);  
        try {
            producer.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        consumer.shutdown();
        try {
            consumer.awaitTermination(Long.MAX_VALUE, TimeUnit.NANOSECONDS);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
}

class Produce implements Runnable {
    private final ExecutorService consumer;

    public Produce(ExecutorService consumer) {
        this.consumer = consumer;
    }
    boolean isarecord(BufferedImage image){
        int x=10, y = 10;
        Color c = new Color(image.getRGB(x,y));
        int red = c.getRed();
        int green = c.getGreen();
        int blue = c.getBlue();
        // Determine whether to start recording
        return false;

    }

    @Override
    public void run() {

        Robot robot = null;
        try {
            robot = new Robot();
        } catch (AWTException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        //
        // Capture screen from the top left to bottom right
        //
        int i = 0;
        while(true) {

            i++;
        BufferedImage bufferedImage = robot.createScreenCapture(
                new Rectangle(new Dimension(1024, 798)));

        Runnable consume = new Consume(bufferedImage,i);
        consumer.submit(consume);
        }

    }
}

class Consume implements Runnable {
    private final BufferedImage bufferedImage;
    private final Integer picnr;
    public Consume(BufferedImage bufferedImage, Integer picnr){
        this.bufferedImage = bufferedImage;
        this.picnr = picnr;
    }

    @Override
    public void run() {
        File imageFile = new File("screenshot"+picnr+".png");
        try {
            System.out.println("screenshot"+picnr+".png");
            ImageIO.write(bufferedImage, "png", imageFile);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T07:56:53.750

我尝试稍微编辑您的代码，而不是创建`png`文件，我尝试创建`bmp`文件以消除数据压缩的开销时间，但以磁盘空间为代价。

结果：我不知道如何计算 fps，但解决方案比你的更快。:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T08:07:49.433

你应该衡量需要多少时间`robot.createScreenCapture()`。它可能需要超过 40 毫秒，这意味着使用纯 Java 无法实现您想要的。以我的经验，通话可能非常慢。

我确实设法通过一个技巧大大缩短了时间，但它仅适用于 Unix：启动 VNC 服务器（= RAM 中的桌面）。[我修补了TightVNC](http://www.tightvnc.com/)的源代码，以使用 NIO 使用内存映射文件将图像写入磁盘。这给了我大约 10-20 fps。

下面是使用 NIO 编写图像的代码：

```
private File pixelFile = new File("tmp", "pixels.nio").getAbsoluteFile();
private IntBuffer intBuffer;
private FileChannel rwChannel;

private MappedByteBuffer byteBuffer;
private int[] pixels;

private void createMemoryMappedFile() {
    File dir = pixelFile.getParentFile();
    if(!dir.exists()) {
        dir.mkdirs();
    }

    try {
        rwChannel = new RandomAccessFile(pixelFile, "rw").getChannel();

        int width = ...;
        int height = ...;
        pixels = new int[width*height];

        byteBuffer = rwChannel.map(MapMode.READ_WRITE, 0, width * height * 4);
        intBuffer = byteBuffer.asIntBuffer();
    } catch(Exception e) {
        throw new RuntimeException("Error creating NIO file " + pixelFile, e);
    }
}

public void saveImage() {

     buffer.position(0);
     buffer.put(image.getRaster().getPixels(0,0,width,height,pixels));

     flushPixels();
}

private void flushPixels() {
    byteBuffer.force();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T08:08:08.713

你最大的问题是你只有一个线程来实际创建图像。*ThreadPoolExecutor*不会按照您期望的方式创建线程。

来自 javadoc

*   如果运行的线程少于 corePoolSize，则 Executor 总是更喜欢添加新线程而不是排队。
*   如果 corePoolSize 或更多线程正在运行，Executor 总是更喜欢排队请求而不是添加新线程。
*   如果请求无法排队，则会创建一个新线程，除非这将超过 maximumPoolSize，在这种情况下，该任务将被拒绝。

因此，除非队列已满，否则它将只使用一个线程。此时，您在内存中有 100 个屏幕截图，这些屏幕截图正在向 GC 添加工作。如果我将核心线程设置为 4（我的笔记本电脑上有 4 个核心）并将内存增加到 1 GB，我设法捕获 20 FPS 左右。

如果您对磁盘的输出受到限制，您可以将最后 400 个写入的图像存储为队列中的字节数组，并且仅在按钮变为“绿色”时将它们写入磁盘。然而在我的测试中，这些图像会占用超过 100MB 的内存，所以再次确保你有足够的内存。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-18T23:33:52.810

由于使用执行器的各种原因，重写到 nio 和类似的事情不会有帮助。

这里有一堆你应该考虑的事情：

1.  图像捕获在 java 中很慢，如果没有 JNI 依赖项，您将无能为力
2.  使用 jpeg 而不是 png，更快
3.  使用 ImageIO 的任何图像压缩都很慢。您可以使用老式的专有 JpegEncoder 类（在 com.sun 包中）或 TurboJPEG java 库（也可以使用 JNI），但恕我直言，这不是瓶颈
4.  磁盘 i/o 绝对不是问题（您正在写入 <5mb/s，所以不用担心）
5.  并行编写许多图像实际上会减慢您的应用程序，而不是加快速度（除非您有 ssd）
6.  考虑并行化捕获/分析线程（例如，仅每 20 帧进行一次分析）（*）
7.  我敢打赌，在您可以充分优化 Java 应用程序以使其以 25fps 运行（使用 100% cpu xD）之前，您会使用本机语言为每个平台完成两次编写此应用程序
8.  认真考虑混合解决方案；例如，使用可用工具将*所有内容记录到压缩电影中，然后再进行分析（**）*

一言以蔽之：java 对你想做的事情很糟糕，真的很糟糕。

尽管如此，我已经编写了我自己版本的这个工具。 [http://pastebin.com/5h285fQw](http://pastebin.com/5h285fQw)

它所做的一件事是允许在鼠标之后记录一个较小的矩形。在 500x500 时，它可以让我轻松达到 25fps，并在后台写入图像（图像压缩 + 写入对我来说需要 5-10 毫秒，因此它的写入速度比记录速度快得多）

* * *

（*）您没有谈论如何分析图像，但这似乎是您的性能问题的主要来源。一些想法：

*   只看第 N 帧
*   仅捕获屏幕的一个子部分并随着时间的推移移动该子部分（稍后重新组合图像；这会导致严重的撕裂，但可能对您的目的无关紧要）
*   捕获本身应该“不太慢”（全屏可能为 10-20fps）；使用串行捕获但并行化分析

(**) 在 macosx 上，您可以使用内置的 quicktime x 非常有效地记录到硬盘；在 Windows 上，我听说 playclaw (http://www.playclaw.com/) 非常好，也许物有所值（想想你浪费时间优化 Java 野兽会做什么：)）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T07:26:53.837

离题，但看看[Xuggler](http://www.xuggle.com/xuggler)。如果您想使用 Java 创建视频，这将很有用。

编辑：此外，如果您不将每张图片转储到磁盘，而是将它们附加到字节数组，并且很少将其转储到磁盘上，则可以优化您的图像消费者代码。

编辑 2：有**“无安装”版本的库**和 maven 依赖项（带有预编译平台特定库的 jar）：[blog.xuggle.com/2012/04/03/death-to-installers](http://blog.xuggle.com/2012/04/03/death-to-installers)和[xuggle。 com/xuggler/下载](http://xuggle.com/xuggler/downloads)

# mysql - MySQL中NULL DEFAULT NULL和DEFAULT NULL之间的区别？

> ID：12346764
> 
> 赞同：9
> 
> 时间：2012-09-10T07:02:26.390
> 
> 标签：mysql, sql, create-table

最近我在 MySQL 中遇到了一个新问题。我正要创建一个新表

`col1 TIMESTAMP DEFAULT NULL`

（即具有默认`NULL`值的列），但在创建时给了我一个错误：

> 列的默认值无效

但是当我尝试时`col1 TIMESTAMP NULL DEFAULT NULL`，该表已创建。

我想知道以上两种语法有什么区别。我之前在列中的一些插入 NULL 值中也遇到了这个问题。

任何人都可以解释这个问题的原因，比如它是特定于版本的问题还是 MySQL 的其他问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T07:05:19.953

第一个`NULL`表示该列可以为*空*，即接受`NULL`。第二个`NULL`（在 之后`DEFAULT`）是*默认*值。

如果您只有默认值，但使列拒绝空值，则无法使用该默认值。

（不过，我的印象是，如果您既不指定`NULL`也不指定`NOT NULL`该列可以为空，那么您所看到的有点令人困惑）。

# maven - 将从源代码构建的插件安装到eclipse中？

> ID：12346766
> 
> 赞同：1
> 
> 时间：2012-09-10T07:02:53.727
> 
> 标签：maven, eclipse-plugin, eclipse-cdt

我下载了 CDT 插件源代码，并通过 maven 构建了整个项目。我遵循了所有 maven 步骤，例如 maven clean、maven compile ... maven install。一切运作良好。我的问题是如何将自己构建的CDT插件安装到eclipse中以便我可以创建一个新的C/C++项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:24:44.300

将您的功能和插件文件夹复制到您想要使用 CDT 插件的 Eclipse 中。

# ssh - SSH强制命令参数

> ID：12346769
> 
> 赞同：5
> 
> 时间：2012-09-10T07:03:03.293
> 
> 标签：ssh, ssh-keys, openssh

我正在尝试编写一个脚本，在成功 ssh 登录后验证用户权限。

我正在通过 SSH 强制命令执行此操作。我想传递脚本参数（例如它正在验证的用户），但我不确定我会怎么做。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T00:34:21.400

这是我自己想出来的。您可以通过设置环境变量并在强制命令脚本中读取它们来将参数传递给强制命令脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-12T21:36:06.820

您可以`ForcedCommand`在 sshd 配置文件中设置 a ，或者更好地在`authorized_keys`相应用户的文件中设置。

ssh execute 将环境变量 SSH_ORIGINAL_COMMAND 设置为发送到服务器的完整命令行，然后执行`ForcedCommand`。

编写使用此环境变量来提供参数的脚本具有安全隐患，因为攻击者可能会`; rm -rf /`在命令行末尾添加例如。然后首先`ForcedCommand`将运行，然后`rm -rf /`.

[本文](http://at.magma-soft.at/sw/blog/posts/The_Only_Way_For_SSH_Forced_Commands/)描述了一个脚本，该脚本可用于一般锁定允许的命令行。它还包含相关信息的链接。

机制如下：

1.  将脚本（仅）作为`ForcedCommand`
2.  添加允许的“真实”命令作为参数
3.  在相应用户帐户的主目录中添加一个规则文件 ( `.onlyrules`)，它将允许的参数限制为实际命令。

唯一的脚本读取 SSH_ORIGINAL_COMMAND 检查命令是否 a) 允许（在参数列表中） b) 在用户 PATH 上，然后检查参数是否通过规则（在我们的例子中是简单的 sed(1) 脚本。

设置示例：

```
ForcedCommand /usr/local/bin/only ls 
```

或`authorized_keys`：

```
command="/usr/local/bin/only ls" ssh-rsa AAAA... 
```

`.onlyrules`

```
\:^ls /tmp$:{p;q} 
```

这将只允许将命令发送`ls /tmp`到远程主机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:06:39.320

SSH 不允许通过参数（甚至通过管道）传递密码，它是设计使然，甚至在`man`页面中有描述。通过 ssh 自动登录的唯一方法是通过文件身份验证。

我认为您可以尝试将用户提供的密码与 /etc/shadow 中的值进行比较。这应该够了吧 ：）

# uinavigationcontroller - 翻转视图控制器中带有导航控制器的静态表视图控制器

> ID：12346776
> 
> 赞同：0
> 
> 时间：2012-09-10T07:04:16.323
> 
> 标签：uinavigationcontroller, uitableview, utility

我想实现一个基于实用程序视图的 iOS 应用程序，我想在导航视图控制器中包含的静态表视图的帮助下实现我的应用程序的设置我已经搜索了 stackoverflow，我得到了这个

[带有导航控制器和 FlipSide 上的表格视图的实用应用程序](https://stackoverflow.com/questions/4546034/utility-app-with-navigation-controller-and-table-view-on-flipside)

但这对我来说还不够，因为我是 iOS 新手

所以有人可以教我如何实现 uitableviewcontroller 包含在背面的 uinavigation conrtoller 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:32:16.123

看一下

静态数据表视图控制器 2.0

[https://github.com/xelvenone/StaticDataTableViewController](https://github.com/xelvenone/StaticDataTableViewController)

这大大简化了静态单元的工作

# javascript - 在javascript中记录传递给回调的参数的约定是什么？

> ID：12346780
> 
> 赞同：4
> 
> 时间：2012-09-10T07:04:33.450
> 
> 标签：javascript, documentation, javadoc

当使用 javadoc 样式的文档样式时，是否有记录传递给回调函数的参数的约定？

```
/**
 * @param cb {Function} A callback that will be passed a name (String) and a Number
/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:05:30.637

这与事件比回调更相关，但我想发布它，因为它可能在相关情况下对您有所帮助。如果在调用回调时还触发事件，则可以使用此方法记录事件，然后，在回调文档中，请注意它接收与事件相同的参数并使用 @link 链接到事件。

我使用类似于您在下面看到的内容来记录[F.js](http://lazd.github.com/F/)中的事件。它没有连接到任何特定代码，我将它转储在定义 F.Component 的脚本底部：

```
/**
 * Triggered when this component is shown
 *
 * @name F.Component#component:shown
 * @event
 *
 * @param {Object}  evt                 Event object
 * @param {String}  evt.name            This component's name
 * @param {F.Component} evt.component   This component
 */ 
```

上面的 JSDoc 语句生成的文档在使用 jsdoc-toolkit 构建时[看起来像这样。](http://lazd.github.com/F/F/jsdoc/symbols/F.Component.html)基本上，您会得到一个很好的事件详细信息部分，该部分描述了何时触发事件以及将哪些参数传递给回调。这也适用于 JSDoc3，并产生具有相同信息的事件部分。

请注意，[描述 @event 标记的文档](http://code.google.com/p/jsdoc-toolkit/wiki/TagEvent)并未准确描述以这种方式使用它，但它确实提供了所需的输出。就 JSDoc3 而言，[@event](http://usejsdoc.org/tags-event.html)和[@fires](http://usejsdoc.org/tags-fires.html)标记还没有文档，但 @event 确实给出了我正在寻找的输出。

# c# - JQuery 按钮单击文本框问题

> ID：12346781
> 
> 赞同：0
> 
> 时间：2012-09-10T07:04:53.013
> 
> 标签：c#, jquery, button, click

我正在尝试使用 JQuery 代码在按钮单击时清理以前的文本框值。但它会在点击时显示以前的值。这是我的代码。

```
 $('#<%=create_question.ClientID %>').click(function () {
     var get_firstname_entered = ($('#textbpx').val());
     ($('#textbox').val(""));
     ($('#textbox1').val(""));
 }); 
```

这是html代码。

```
 <table border=1>
    <tr>
    <td><asp:Label ID="label" Text="Title:" runat="server" /></td>
    <td><asp:TextBox ID="textbox"  BackColor="Silver" runat="server" /></td> <br />
    </tr>
    <tr>
     <td><asp:Label ID="label1" Text="Description:" runat="server" /></td>
    <td><asp:TextBox ID="textbox1"  BackColor="Silver" runat="server" /> </td><br />
    </tr>
   </table> 
```

我错过了什么吗？按钮单击有效，我使用警报框检查了它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:15:13.190

尝试捕获服务器端控制。

```
$('#<%=textbox.ClientID %>').val(''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:15:29.710

```
 $('#<%=create_question.ClientID %>').click(function () {
     var get_firstname_entered = ($('#<%=textbox.ClientID %>').val());
     ($('#<%=textbox.ClientID %>').val(""));
     ($('#<%=textbox1.ClientID %>').val(""));
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T08:04:02.513

$('#<%=textbox.ClientID %>').val(''); $('#<%=textbox1.ClientID %>').val('');

# java - 类型参数隐藏中的 Java 泛型

> ID：12346783
> 
> 赞同：4
> 
> 时间：2012-09-10T07:05:08.003
> 
> 标签：java, generics, interface, wildcard

假设我有一个这样的界面

```
public interface Foo<Ret, Arg> {
    public Ret doSomething(Arg arg);
} 
```

以及一个仅具有包可见性的具体实现类。

```
class FooImpl<Ret, Arg1, Arg2> implements Foo<Ret, Arg>, Bar<Ret, Arg1, Arg2> {
    // This class also implements something else making use of Arg2, so you cannot safely remove it
    // But nothing relating to Arg2 is needed to create a FooImpl
} 
```

（如何发生这种情况的一个例子是两个接口声明的方法的实现和`Foo`转发到一个可变参数方法）`Bar``FooImpl`

现在，假设在同一个包中的某处有一个静态方法返回 a`FooImpl`作为 a `Foo`。有人会认为您可以使用`return new FooImpl<Ret, Arg1, ?>(...)`，而实际上您不能（您必须使用具体的虚拟类型作为`Arg2`，即`return new FooImpl<Ret, Arg1, Object>(...)`，比如说）。

知道为什么会这样，尤其是`Foo`界面和包可见性有效地隐藏了`FooImpl`使用静态方法的任何内容吗？是因为人们仍然可以在某种程度上使用反射来到达需要具体类型的`Bar`部分吗？`FooImpl`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T07:22:32.893

我认为这与您的特定设计无关。

您只是不能使用通配符实例化类型。

这也行不通：

```
return new ArrayList<?>(); 
```

如果确实如此，除了

```
return new ArrayList<Object>(); 
```

您需要一个具体的类，但这并不意味着您需要在工厂方法签名中显示它：

```
static <A,B> Foo<A,B> makeFoo(){
    return new FooImpl<A,B, SomeTypeThatNoOneNeedsToSee>();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:32:52.380

Java 编译器努力做到不聪明。在很多情况下，它显然不需要某些信息来生成正确的代码，但它仍然会报错。当 Java 被发明时，全世界都看到 C 以草率的态度试图编译一切，无论多么危险或愚蠢。目标`javac`是确保人们不会[轻易将自己射中脚](http://m5p.com/~pravn/foot.html)。

因此，它假设您提到了一个原因`Arg2`- 如果某些事情没有必要，您肯定不会将其放入代码中。

解决方案：

1.  实现时分配一个类型`Bar`：`class FooImpl<Ret, Arg1> implements Foo<Ret, Arg>, Bar<Ret, Arg1, Object>`
2.  创建一个`BetterFooImpl<Ret, Arg1> extends FooImpl<Ret, Arg1, Object>`. 这对 API 的使用者隐藏了第三个类型参数。
3.  尽量去掉第三个参数`Bar`
4.  谨慎使用泛型。这可能令人惊讶，但在某些情况下泛型根本无法正常工作。这通常是因为细微的实现细节会导致`@SuppressWarning`注释的爆炸式增长。发生这种情况时，我会问 SO，当我找不到我能理解的解决方案时，我会删除泛型。编写可维护的代码比通过泛型迷宫找到聪明的方法更重要。

# jquery - 如何让 5 个 div 淡入、淡出并在最后一个上停止？

> ID：12346784
> 
> 赞同：1
> 
> 时间：2012-09-10T07:05:09.930
> 
> 标签：jquery

我正在寻找每个 div 淡入，显示 5 秒，淡出。然而，在最后一个我正在寻找它停止（而不是循环），因为用户将能够浏览内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:31:48.373

您可以循环遍历所有`divs`using`jquery` `.each()`函数，然后`fadein`每个函数`div`延迟 5 秒，然后`fadeout`。如果`div`是最后一个，则阻止`fadeout`。

这是我想出的

```
$('#container div').each(function(index){
$(this).fadeIn("fast", function() {

    if(index!=4)
    $(this).delay(5000).fadeOut("slow");

});
}); 
```

**[观看现场演示](http://jsfiddle.net/DC2VH/)**

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:11:01.417

这应该很简单 - 使用这些：

*   `fadeIn()`- [http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)
*   `fadeOut()`- [http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)
*   `delay()`- [http://api.jquery.com/delay/](http://api.jquery.com/delay/)

只需制作由页面加载或您想要的任何事件触发的一系列事件。

# boost - 通过 boost 消息队列发送复杂的数据结构

> ID：12346787
> 
> 赞同：10
> 
> 时间：2012-09-10T07:05:23.370
> 
> 标签：boost, message-queue, boost-interprocess

我有以下数据结构：

```
typedef struct
{
    short id;
    string name;
    short age;
} person_struct; 
```

使用 boost 消息队列，我尝试将此数据结构发送到另一个进程中的消息队列接收器。但是，收到后，在访问上述结构中的“名称”变量时出现分段错误。

以下是我的发件人功能：

```
person_struct MyRec;
MyRec.id = 1;
MyRec.name = "ABC123";
MyRec.age = 20;   
message_queue mqSender(create_only, "MSG_Q", 100, sizeof(person_struct));
mqSender.send(&MyRec, sizeof(person_struct), MQ_PRIORITY); 
```

以下是我的接收器功能：

```
message_queue myReceiver(open_only, "MSG_Q");
person_struct *recvMsg = new person_struct();
size_t msg_size;
unsigned int priority;
myReceiver.receive(recvMsg, sizeof(person_struct), msg_size, priority);
cout << "ID: " << (*recvMsg).id << endl;
cout << "Name: " << (*recvMsg).name << endl;
cout << "Age: " << (*recvMsg).age << endl; 
```

(*recvMsg).id 的 cout 没问题，但 (*recvMsg).name 的 cout 出现分段错误。在某处读到我需要对结构进行序列化，但不知道该怎么做。任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-10T10:30:01.670

来自[消息队列的提升文档](http://www.boost.org/doc/libs/1_51_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.message_queue)：

> 消息队列只是在进程之间复制原始字节而不发送对象。这意味着如果我们想使用消息队列发送一个对象，该对象必须是二进制可序列化的。例如，我们可以在进程之间发送整数，但不能发送 std::string。您应该使用 Boost.Serialization 或使用高级 Boost.Interprocess 机制在进程之间发送复杂数据。

使用 Boost.Serialization 序列化您的对象并在接收端反序列化。

一些快速有效的代码：

**信息.hpp**

```
#include <boost/serialization/string.hpp>

#define MAX_SIZE 1000

class info
{
    public:
        info (int i = 0, std::string n = "")
            : id(i), name(n)
        {};

        int id;
        std::string name;

    private:
        friend class boost::serialization::access;

        template<class Archive>
            void serialize(Archive & ar, const unsigned int version)
            {  
                ar & id;
                ar & name;
            }
}; 
```

**发送.cpp**

```
#include <string>
#include <sstream>

#include <boost/interprocess/ipc/message_queue.hpp>
#include <boost/archive/text_oarchive.hpp>

#include "info.hpp"

using namespace boost::interprocess;

int main ()
{
    try
    {  
        message_queue mq
            (
             open_or_create,
             "mq",
             100,
             MAX_SIZE
            );

        info me(1, "asdf");

        std::stringstream oss;

        boost::archive::text_oarchive oa(oss);
        oa << me;

        std::string serialized_string(oss.str());
        mq.send(serialized_string.data(), serialized_string.size(), 0);
    }
    catch(interprocess_exception &ex)
    {  
        std::cerr << ex.what() << std::endl;
    }
} 
```

**接收.cpp**

```
#include <string>
#include <iostream>

#include <boost/interprocess/ipc/message_queue.hpp>
#include <boost/archive/text_iarchive.hpp>

#include "info.hpp"

using namespace boost::interprocess;

int main ()
{
    try
    {  
        message_queue mq
            (
             open_only,
             "mq"
            );
        message_queue::size_type recvd_size;
        unsigned int priority;

        info me;

        std::stringstream iss;
        std::string serialized_string;
        serialized_string.resize(MAX_SIZE);
        mq.receive(&serialized_string[0], MAX_SIZE, recvd_size, priority);
        iss << serialized_string;

        boost::archive::text_iarchive ia(iss);
        ia >> me;

        std::cout << me.id << std::endl;
        std::cout << me.name << std::endl;
    }
    catch(interprocess_exception &ex)
    {  
        std::cerr << ex.what() << std::endl;
    }

    message_queue::remove("mq");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-03T22:28:09.463

进行复杂数据结构传输的一种方法是采用老式方式——制作自己的数据编码器/解码器。如果您使用 ASN1（Abstract Syntax Notation One）的基本概念，那么您可以将数据编码为二进制字段，然后将其传输并使用您的解码器对其进行解码

/* 示例：创建要发送到服务器的事件消息，要求它使用 MusicPlayer 方法传递事务 id 和动作 Start/Stop 所有数据都在 pCompressedData 中！应该发送的正是这个内存。

```
 // Client code
 // Create DataEncoderDecoder response
 // Encode
 DED_START_ENCODER(encoder_ptr);
 DED_PUT_STRUCT_START( encoder_ptr, "event" );
 DED_PUT_METHOD ( encoder_ptr, "name",  "MusicPlayer" );
 DED_PUT_USHORT ( encoder_ptr, "trans_id",  trans_id);
 DED_PUT_BOOL   ( encoder_ptr, "startstop", action );
 DED_PUT_STRUCT_END( encoder_ptr, "event" );
 DED_GET_ENCODED_DATA(encoder_ptr,data_ptr,iLengthOfTotalData,pCompressedData,sizeofCompressedData); 
```

// 要发送的数据在 pCompressedData 中

```
 // Server code
 // retrieve data ...
 //...

 std::string strName,strValue;
 unsigned short iValue;
 bool bValue;

 DED_PUT_DATA_IN_DECODER(decoder_ptr,pCompressedData,sizeofCompressedData);

 // decode data ...
 if( DED_GET_STRUCT_START( decoder_ptr, "event" ) &&
 DED_GET_METHOD ( decoder_ptr, "name", strValue ) &&
 DED_GET_USHORT ( decoder_ptr, "trans_id", iValue) &&
 DED_GET_BOOL   ( decoder_ptr, "startstop", bValue ) &&
 DED_GET_STRUCT_END( decoder_ptr, "event" ))
 {
 TRACE0(_T("FAIL!!!\n"));
 }
 else
 {
 TRACE0(_T("SUCCESS!!!\n"));
 }
 */ 
```

创建 DED_xxx 作为捆绑 ASN1 解决方案的基本宏！

[ASN1 信息](http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)

# asp.net - 如何通过 Vb.net 读取 Word、Excel 元数据？

> ID：12346789
> 
> 赞同：0
> 
> 时间：2012-09-10T07:05:31.507
> 
> 标签：asp.net, vb.net, ms-word, ms-office, metadata

我想通过asp.net（vb）读取Word、Excel文件的元数据（如作者、关键字等）。我怎样才能做到这一点 ？

有没有样品，参考网站？

我在网上找到了以下代码，但它返回第二条语句的错误（“ Dim excelbook As New Microsoft.Office.Interop.Excel.Workbook ”）

```
Public Sub ReadExcel(ExcelFileName As String)

    Dim Wapp As New Microsoft.Office.Interop.Excel.Application
    Dim excelbook As New Microsoft.Office.Interop.Excel.Workbook

    If Wapp Is Nothing Then
        Wapp = New Microsoft.Office.Interop.Excel.Application
    End If

    If excelbook Is Nothing Then
        excelbook = New Microsoft.Office.Interop.Excel.Workbook
    Else
        excelbook.Close()
    End If

    excelbook = Wapp.Workbooks.Open(ExcelFileName)

    Dim _BuiltInProperties As Object = excelbook.BuiltinDocumentProperties

    If Not _BuiltInProperties Is Nothing Then
        excel_keyword = _BuiltInProperties("Keywords").Value
    End If

    If Not excelbook Is Nothing Then
        excelbook.Close()
    End If

    If Not Wapp Is Nothing Then
        Wapp.Quit()
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:13:41.490

这是[相同](https://skydrive.live.com/?cid=6514bc76687e775b&id=6514BC76687E775B!131)的示例。或者您可以从[https://dl.dropbox.com/u/79986486/StackOverFlow9684368.zip](https://dl.dropbox.com/u/79986486/StackOverFlow9684368.zip) {Temporary}下载

您可以使用带有 C# 或 VB.Net 的 openXML 来实现这一点。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:34:36.043

引自[Social.MSDN](http://social.msdn.microsoft.com/Forums/eu/isvvba/thread/d1f072f1-0006-4e42-a2fe-f6b12d683636)

您可以使用 DSOFile 访问这些值（适用于一大堆不同的文件类型），或者更简单地说，您可以在 VBA 中访问这些属性

```
Sub Macro1()
'
' Macro1 Macro
'
    Dim mWorkbook As Workbook
    Set mWorkbook = Application.Workbooks(1)
    mWorkbook.BuiltinDocumentProperties("Author").Value = "the Author"
    mWorkbook.BuiltinDocumentProperties("Title").Value = "the Title"
    mWorkbook.BuiltinDocumentProperties("Subject").Value = "the Subject"
End Sub 
```

# proxy - 如何使用 PDFLib 为目标页面申请代理？

> ID：12346790
> 
> 赞同：0
> 
> 时间：2012-09-10T07:05:36.310
> 
> 标签：proxy, pdflib

我想提供 pdf 作为生成 pdf 的代理的参考。但它没有携带对外部目标的引用。我的代码如下：

```
proxy = p.begin_template_ext(0, 0,"reference={target.pdf pagenumber=1 strongref=true}");
if (proxy == -1)
{
  /* Error */
} 
```

但它总是会出错。不知道为什么。我错过了任何概念性的东西吗？什么是最好的使用方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:07:28.463

`PDFlib`可以使用以下对象之一作为参考页面的占位符（代理）：

1.  另一个导入的 PDF 页面（例如目标的简化版本）。用作外部目标代理的 PDF 页面必须具有与目标页面相同的页面几何形状。

2.  一个模板，例如一个简单的几何形状，例如一个划掉的矩形。模板将根据目标页面的大小和纵横比进行调整。

更改您的代码，例如：

```
proxy = p.begin_template_ext(0, 0,
"reference={filename=target.pdf pagenumber=1 strongref=true}");
if (proxy == -1)
{
  /* Error */
}
...construct template contents...
p.end_template_ext(0, 0); 
```

您在参数中缺少“文件名”。

# sql - SQL Server 2005 中单个更新语句中字符串的多次替换

> ID：12346791
> 
> 赞同：1
> 
> 时间：2012-09-10T07:05:37.083
> 
> 标签：sql, sql-server-2005

我有一个包含以下数据的表'tblRandomString'：

```
ID  ItemValue

1   *Test"
2   ?Test* 
```

我有另一个表“tblSearchCharReplacement”，其中包含以下数据

```
Original   Replacement

*          `star`
?          `quest`
"          `quot`
;          `semi` 
```

现在，我想使用这些替换在 ItemValues 中进行替换。我试过这个：

```
Update T1
SET ItemValue = select REPLACE(ItemValue,[Original],[Replacement])
FROM dbo.tblRandomString T1
JOIN
dbo.tblSpecialCharReplacement T2
ON T2.Original IN ('"',';','*','?') 
```

但这对我没有帮助，因为每次更新只完成一次替换。

一种解决方案是我必须将其用作 CTE 来执行多个替换（如果存在）。

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:22:16.867

样本数据：

```
declare @RandomString table (ID int not null,ItemValue varchar(500) not null)
insert into @RandomString(ID,ItemValue) values
(1,'*Test"'),
(2,'?Test*')

declare @SearchCharReplacement table (Original varchar(500) not null,Replacement varchar(500) not null)
insert into @SearchCharReplacement(Original,Replacement) values
('*','`star`'),
('?','`quest`'),
('"','`quot`'),
(';','`semi`') 
```

和`UPDATE`：

```
;With Replacements as (
    select
        ID,ItemValue,0 as RepCount
    from
        @RandomString
    union all
    select
        ID,SUBSTRING(REPLACE(ItemValue,Original,Replacement),1,500),rs.RepCount+1
    from
        Replacements rs
            inner join
        @SearchCharReplacement scr
            on
                CHARINDEX(scr.Original,rs.ItemValue) > 0
), FinalReplacements as (
    select
        ID,ItemValue,ROW_NUMBER() OVER (PARTITION BY ID ORDER BY RepCount desc) as rn
    from
        Replacements
)
update rs
    set ItemValue = fr.ItemValue
from
    @RandomString rs
        inner join
    FinalReplacements fr
        on
            rs.ID = fr.ID and
            rn = 1 
```

产生：

```
select * from @RandomString

ID          ItemValue
----------- -----------------------
1           `star`Test`quot`
2           `quest`Test`star` 
```

它的作用是从未更改的文本（中的顶部选择`Replacements`）开始，然后尝试应用任何有效的替换（中的第二个选择`Replacements`）。它将根据它产生的任何结果继续应用第二个选择，直到没有新的行产生。这称为递归公用表表达式 (CTE)。

然后我们使用第二个 CTE（这次是非递归的）`FinalReplacements`对第一个 CTE 生成的所有行进行编号，将较低的行号分配给最后生成的行。从逻辑上讲，这些行是应用最后一个适用变换的结果，因此将不再包含任何要替换的原始字符。所以我们可以使用第 1 行来对原始表执行更新。

这个查询确实做了比严格必要的工作更多的工作——对于少量的替换字符行，它不太可能效率太低。我们可以通过定义应用替换的单一顺序来清除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T01:04:42.063

跳过连接表和嵌套 REPLACE 函数会起作用吗？或者您是否需要实际从另一个表中获取数据？

```
-- perform 4 replaces in a single update statement
UPDATE T1
SET ItemValue = REPLACE(
                  REPLACE(
                    REPLACE(
                      REPLACE(
                        ItemValue,'*','star')
                      ItemValue,'?','quest')
                    ItemValue,'"','quot')
                  ItemValue,';','semi') 
```

注意：我不确定您是否需要转义要替换的任何字符

# amazon-mws - GetLowestOfferListingsForASINRequest 如何排除自己的列表？

> ID：12346792
> 
> 赞同：1
> 
> 时间：2012-09-10T07:05:46.100
> 
> 标签：amazon-mws

使用时`GetLowestOfferListingsForASIN`，它会返回一个可用列表列表，包括我自己在亚马逊上的列表。

是否可以从结果中排除我自己的列表`GetLowestOfferListingsForASIN`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:29:08.807

因为`GetLowestOfferListingsForASIN`你可以设置`ExcludeMe`. 默认情况下它是假的。这是行为和文档链接：

*   True – 您自己的报价列表不包括在返回的报价列表中。
*   False – 您自己的报价清单包含在返回的报价清单中。

[MWS产品API文档](https://images-na.ssl-images-amazon.com/images/G/01/mwsportal/doc/en_US/products/MWSProductsApiReference._V401383218_.pdf)

# javascript - 将数据加载到使用 JSON 返回的表单字段时出现问题

> ID：12346795
> 
> 赞同：1
> 
> 时间：2012-09-10T07:06:04.953
> 
> 标签：javascript, jquery, ajax

我有表单布局，我根据城市 ID 加载城市名称、州和国家等城市详细信息，并通过 JSON 返回。

相同的功能如下：

```
public JsonResult GetCityDetails(int city_id)
    {
        var result = "SELECT (CITY_NAME + ', ' + STATE_NAME + ', ' + COUNTRY_NAME) AS CITY_NAME FROM COUNTRY_MASTER cm, STATE_MASTER sm, CITY_MASTER cy where cy.STATE_ID = sm.STATE_ID AND sm.COUNTRY_ID = cm.COUNTRY_ID AND cy.CITY_ID =" + city_id + " ";
        var tempPerson = DatabaseHelper.Instance.Database.QuerySingle(result);
        return Json(new { Data = tempPerson.CITY_NAME });
    } 
```

在这里，我获得了通过 JSON 返回的城市详细信息的正确数据，但在加载到 html 表单字段时出现问题。

但是，此函数在 java 脚本函数中调用如下：

```
loadCityDetails: function (_cityid) {
           debugger;
            console.log("loadCityDetails");
            $.ajax({
                url: '@Url.Action("GetCityDetails", "Yogya")' + '?address_id=' + currentAddressID + '&person_id=' + currentPersonID + '&city_id=' +_cityid,
                type: 'POST',
                success: function (data) {
                 alert('Address Selected');                      
                   $("#CITY_DETAIL_AC").val(data.Data);

                }
            });
        }, 
```

现在，问题是如果我不保持警觉（'Address Selected'）; loadCityDetails 中的代码，我没有将城市详细信息加载到城市名称字段中，只有在提供警报时才会出现。但我不想保持这种警惕。那么，如何在不显示警报的情况下加载城市详细信息。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:24:31.100

这是因为调用`$("#CITY_DETAIL_AC").val(data.Data);`发生在异步 ajax 调用中，该调用独立于 DOM 构造运行。在函数调用返回时，您无法知道 DOM 是否已准备就绪 - 可能不是，因为您无法访问该元素。显示警告框让系统有时间在尝试写入 DOM 之前创建它。

解决方案：将包含ajax调用的函数放在.ready()中，像这样：

`$(document).ready(function(){..your function body here...});`

然后保证在所有元素都存在之前不会发生。现在您必须从 {...function body...} 中检索 city-id，因为您不能再期望它作为参数传入。

# migration - 在 Open Laszlo 4.9 中视图未正确拉伸

> ID：12346797
> 
> 赞同：1
> 
> 时间：2012-09-10T07:06:07.613
> 
> 标签：migration, openlaszlo, lzx

我创建了一个视图，它将缩放该特定视图内的视图。该代码在 OL 3.3 中正常工作，但在 OL 4.9 中无法正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:55:54.950

视图缩放的工作方式已经改变，首先[是 4.0 版本](http://wiki.openlaszlo.org/Runtime_Differences#Stretching_nested_subviews)（从那时起浏览器不支持嵌套 div 的缩放）。对于 OpenLaszlo 4.9，视图中添加了 xscale 和 yscale 属性。检查相应的 JIRA 以获取详细信息：http: [//jira.openlaszlo.org/jira/browse/LPP-9865](http://jira.openlaszlo.org/jira/browse/LPP-9865)

这是一个简单的示例，它适用于 OpenLaszlo 5.0 的两个运行时：

```
<canvas>

    <class name="testbox" width="120" height="120" bgcolor="blue">
        <text text="${'xscale=' + parent.xscale + ' / yscale=' + parent.yscale}" fgcolor="white"/>
        <view x="30" y="30" width="60" height="60" bgcolor="red"></view>
    </class>

    <testbox x="20" y="50" />

    <testbox x="20" y="200" xscale="2"/>

    <testbox x="20" y="350" yscale="1.5"/>

</canvas> 
```

以下是使用 DHTML 运行时 5.0 运行应用程序的屏幕截图： ![OpenLaszlo 4.9+ 用于拉伸视图的 xscale 和 yscale 属性](../Images/e77f119fa8fc555cb0f86aace5797731.png)

# python - python中一读一写进程之间的通信

> ID：12346799
> 
> 赞同：0
> 
> 时间：2012-09-10T07:06:24.183
> 
> 标签：python, multithreading, locking

我正在寻找一种在 python 脚本的两个进程之间安全传递信息（！）的方法。

一个进程只读，另一个只写。我需要传递的数据是一个字典。

到目前为止，我发现的最佳解决方案是本地 SQL 服务器（因为数据本身就是一种表），我假设 SQLite 将安全地处理事务。

有没有更好的方法，也许是一个模块来锁定文件在写入时被读取，反之亦然？

我使用的是 linux ubuntu 11.10，但欢迎使用跨平台解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:17:50.210

要在进程之间传输数据，可以使用[管道](http://en.wikipedia.org/wiki/Named_pipe)和[套接字](http://docs.python.org/library/socket.html)。Python 使用[酸洗](http://docs.python.org/library/pickle.html)在对象和字节流之间进行转换。

为了安全地传输数据，您需要确保数据只传输一次。这意味着：目标进程需要能够说“我没有收到所有内容，请再次发送”，而发送者需要某种形式的收据。

为此，您应该在数据中添加一个“标题”，为其提供唯一键（可能是时间戳或哈希）。然后，接收者和发送者都可以保留他们已经发送/看到的列表，以避免两次处理数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T19:01:37.120

对于单向通信，您可以使用例如[`multiprocessing.Queue`](http://docs.python.org/library/multiprocessing.html#pipes-and-queues)或`multiprocessing.queues.SimpleQueue`。

共享内存也是使用`multiprocessing.Array`. 但是您必须将字典分成至少两个数组（键和值）。只有当所有值都是相同的基本类型时，这才会有效。

两者的优点`multiprocessing.Queue`在于`multiprocessing.Array`它们都在内部受到锁的保护，因此您不必担心。

# c# - 如何使用 ListBox 为 GridView 中的第一列数据分配工具提示

> ID：12346803
> 
> 赞同：0
> 
> 时间：2012-09-10T07:06:36.487
> 
> 标签：c#, asp.net, gridview

我有一个`ListBox`与`GridView`. 使用这个`ListBox`我想为每一行显示一个工具提示，只显示`GridView`. 我已经`GridView`在前端绑定了。

我尝试过的代码是给出**超出范围**错误的索引：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            for (int i = 0; i <= GridView1.Rows.Count; i++)
            {
                String ProCol = GridView1.Rows[i].Cells[0].ToString();

                if (ProCol.Length != 0)
                {
                    e.Row.Cells[0].ToolTip = ListBox1.Items[i].ToString().Trim();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:10:28.407

它在 for 循环的最后一次迭代中失败，因为索引是从零开始的（第一项具有 0 索引，最后一项具有`count-1`索引）。代替

```
i <= GridView1.Rows.Count 
```

和

```
i < GridView1.Rows.Count 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:28:21.540

尝试将您的代码移动到`DataBound`事件中，`GridView`而不是在`RowDataBound`. 这样，它只会在所有行都已绑定并且`GridView.Rows`集合已初始化时运行一次。

此外，您应该按照**Michal Klouda**在他`<=`关于`<`.

并且`ListBox1`在绑定`GridView`.

只要您绑定`ListBox`befor 就应该工作的示例代码`GridView`：

```
protected void GridView1_DataBound(object sender, EventArgs e)
{
    var gv = (GridView)sender;
    for (int i = 0; i < gv.Rows.Count; i++)
    {
        var oneRow = gv.Rows[i];
        String ProCol = oneRow.Cells[0].ToString();

        if (ProCol.Length != 0)
        {
            oneRow.Cells[0].ToolTip = ListBox1.Items[i].ToString().Trim();
        }
    } 

} 
```

# facebook - 点击移动网页后喜欢按钮恢复？

> ID：12346805
> 
> 赞同：1
> 
> 时间：2012-09-10T07:06:55.203
> 
> 标签：facebook, mobile, facebook-like

我制作了一个带有类似按钮的移动网络来模拟类似的网关。当用户点击它时，它触发了edge_create事件，点赞按钮变为灰色，但随后立即恢复并转到粉丝页面。但是，如果用户按下点赞按钮的时间足够长，就会正确触发点赞动作。

我不知道是什么原因以及如何解决它......有人有同样的问题吗？

# iphone - CATransform3DMakeRotation 导致 UIimage 与 UIimageview 一起旋转

> ID：12346806
> 
> 赞同：1
> 
> 时间：2012-09-10T07:07:17.337
> 
> 标签：iphone, uiimageview, uiimage, core-animation

我面临`UIImageView`旋转问题。

我需要`UIImageView`用像广告这样的动画来水平旋转。

为此，我使用以下代码：

```
[UIView animateWithDuration:1.0
        delay:0.0
        options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionAllowUserInteraction
        animations:^{
             if (baddview) {
                 baddview = FALSE;
                 adimageView.layer.transform = CATransform3DMakeRotation(0, 0, 1, 0);                          
             } else {
                 baddview = TRUE;
                 adimageView.layer.transform = CATransform3DMakeRotation(M_PI, 0, 1, 0);                          
             }
         }
         completion:^(BOOL finished) {
         }
]; 
```

图像视图正在根据我的需要旋转，但图像视图中的图像出现反转，就像旋转 180 度后一样（[您可以在此处看到图像](http://www.freeimagehosting.net/89x2m)）。

如何在`UIImageView`不旋转的情况下为旋转设置动画`UIImage`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:25:30.977

One possible approach is making 2 `UIImageView`s, and animating them. What you would have to do is:

1.  Before the animation block, create the new `UIImageView` and place it behind the current `UIImageView`, but make sure that it has a rotation of 180.
2.  Make two animation blocks, one that rotates the first view **90** degrees at **half** (ie 0.5 sec) the duration, and the other block animates the view behind to `CATransform3DIdentity` at **full** duration (ie 1.0 sec).

I will add some code if needed.

Or alternatively, set the `isDoubleSided` property of `CALayer` to `NO`. Then, rotate both views 180 degrees. The top view will be hidden, since it is not double sided.

* * *

I just created a new single-view project, and added a `UIButton` to perform the flip. Here is the rest of the code:

**Header File:**

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {
    UIImageView* _imageView1;
    UIImageView* _imageView2;
}

- (IBAction)flip:(id)sender;

@end 
```

**Implementation file:**

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>
@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    UIImage* image1 = [UIImage imageNamed:@"gaara1.png"];
    _imageView1 = [[UIImageView alloc] initWithImage:image1];
    [_imageView1 setFrame:CGRectMake((CGRectGetWidth(self.view.bounds) - 300)/2, 100.f, 300, 75)];

    UIImage* image2 = [UIImage imageNamed:@"gaara2.png"];
    _imageView2 = [[UIImageView alloc] initWithImage:image2];
    [_imageView2 setFrame:CGRectMake((CGRectGetWidth(self.view.bounds) - 300)/2, 100.f, 300, 75)];
    // the second imageView is in the back
    [self.view addSubview:_imageView2];
    [self.view addSubview:_imageView1];

}

- (IBAction)flip:(id)sender {
    [_imageView1.layer setDoubleSided:NO];
    [_imageView2.layer setDoubleSided:NO];

    [_imageView1.layer setZPosition:10.f];

    [_imageView1.layer setTransform:CATransform3DIdentity];
    [_imageView2.layer setTransform:CATransform3DMakeRotation(-M_PI, 1.f, 0.f, 0.f)];

    [UIView animateWithDuration:1.0
                          delay:0.0
                        options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionAllowUserInteraction
                     animations:^{
                         _imageView1.layer.transform = CATransform3DMakeRotation(M_PI, 1.f, 0.f, 0.f);
                         _imageView2.layer.transform = CATransform3DIdentity;
                     }
                     completion:NULL];

}

@end 
```

The images:

![enter image description here](../Images/5bd05819daceefb2b5fd012517af1aaa.png)

![enter image description here](../Images/7e78f3f6f4f2ff32675701a5ead9ab28.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T19:55:32.127

您的代码可能会导致问题。UIView 动画用于动画化 UIView 的属性，而不是图层。

如果您尝试在 UIView 动画块中操作图层变换，我预计会出现问题。您应该限制自己在 UIView 动画块中更改视图属性：

```
[UIView animateWithDuration:1.0
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                     _imageView1.transform = CGAffineTransformMakeRotation(M_PI);
                     _imageView2.transform = CGAffineTransformIdentity;
                 }
                 completion:NULL]; 
```

CAAnimation 对象用于动画层。

如果您想为视图的图层变换设置动画，请直接执行（这将为您提供隐式动画）或创建 CABasicAnimation 对象来执行更复杂的动画。

# git - 巡航控制：正确（或不）通过双引号传递集成属性

> ID：12346809
> 
> 赞同：1
> 
> 时间：2012-09-10T07:07:31.647
> 
> 标签：git, cruisecontrol.net

# 信息

我正在运行一个 GIT 项目并使用最新版本的 Cruise Control (1.8) 运行 MSBuild 任务。

# 错误

错误消息与其他问题类似，但原因不同。

```
MSBUILD : error MSB1008: Only one project can be specified 
```

# 原因

出现问题是因为历史上的一位作者的名字中有双引号。例如，Givename “引用的昵称”姓氏。

## 历史

发生这种情况的原因是 CC.Net 的 GIT 提供程序发生了变化

最初，提供者最初会获取存储库并构建它，而不提供整个历史的所有作者信息。新的提供者现在提供了整个项目在其第一次构建时的历史记录。

## 诊断

因此，这是尝试运行构建任务时日志的完整输出。（我已将单行拆分为多行以使其更易于阅读）参数的第二行（第 5 行）是问题行。

```
Starting process [C:\Windows\Microsoft.NET\Framework64\v4.0.30319\MSBuild.exe]
in working directory [c:\Builds\Build\project_master]
with arguments [
/nologo /t:Build
/p:CCNetArtifactDirectory=c:\Builds\Artifacts\project_master;CCNetBuildCondition=ForceBuild;CCNetBuildDate=2012-09-10;CCNetBuildId=e954ce9462d14bbc99110a0b43f9e4e2;CCNetBuildTime=12:54:23;CCNetFailureTasks=;CCNetFailureUsers="Matthew Vukomanovic,Givename "Quoted Nickname" Surname";CCNetIntegrationStatus=Unknown;CCNetLabel=1;CCNetLastIntegrationStatus=Failure;CCNetListenerFile=c:\Builds\Artifacts\project_master\project_master_ListenFile.xml;CCNetModifyingUsers=;CCNetNumericLabel=1;CCNetProject=project_master;CCNetProjectUrl=http://buildserver.domain/ccnet/server/local/project/project_master/ViewLatestBuildReport.aspx;CCNetRequestSource=buildserver;CCNetUser=;CCNetWorkingDirectory=c:\Builds\Build\project_master
/v:quiet /p:Configuration=Release /p:debug=pdbonly project.sln
/l:"C:\Program Files (x86)\CruiseControl.NET\server\ThoughtWorks.CruiseControl.MsBuild.dll";c:\Builds\Artifacts\project_master\msbuild-results-5d764e9e-a8cb-4591-a531-71809edbe2a0.xml
] 
```

# 目前的工作

我所做的当前工作是创建项目让它运行和失败。然后停止巡航控制，手动修改项目的状态文件以**不**包含问题作者姓名。所以我从这个修改XML

```
<FailureUsers>
  <anyType xsi:type="xsd:string">Matthew Vukomanovic</anyType>
  <anyType xsi:type="xsd:string">Givename "Quoted Nickname" Surname</anyType>
</FailureUsers> 
```

对此

```
<FailureUsers>
  <anyType xsi:type="xsd:string">Matthew Vukomanovic</anyType>
  <anyType xsi:type="xsd:string">Givename Surname</anyType>
</FailureUsers> 
```

但是，我们可以更改存储库的作者： * 提交是很久以前的，因此必须修改的活动分支和标签的数量也是一项大任务；和 * 在一个公共项目中，你可能会得到某人出于某种原因在他们的名字中使用双引号。

# 一个修复

理想情况下，应该正确引用集成属性，我将在 Cruise Control 项目中提出一个问题，但这可能需要一段时间。

# 永久工作

与此同时，我想做的是停止将 msbuild 任务发送到 CCNetFailedUsers 和 CCNetModifyingUsers，或者阻止整个集成属性。有谁知道这是怎么做到的吗？（我无法在任何地方找到如何做到这一点）。或者有没有人有我上面没有提到的任何建议？

*编辑我发现有人遇到同样的问题，但是自 2010 年提出以来似乎没有任何修复措施[https://groups.google.com/forum/#!topic/ccnet-user /HBabRAq-tsw/讨论](https://groups.google.com/forum/#!topic/ccnet-user/HBabRAq-tsw/discussion)*

*EDIT2 我已经提交了一个拉取请求来修复我为此所做的修复，可以在我的 CruiseControl.NET 的 github 分支的主分支上找到。更具体地说，提交[https://github.com/matthewvukomanovic/CruiseControl.NET/commit/3b3ca4a1b81c02de9948ff83ad33536443b208da](https://github.com/matthewvukomanovic/CruiseControl.NET/commit/3b3ca4a1b81c02de9948ff83ad33536443b208da)和之前的两个提交。我希望它将被放入下一个版本的 Cruise Control Net 中。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:13:09.463

问题已放在 [http://www.cruisecontrolnet.org/issues/191](http://www.cruisecontrolnet.org/issues/191)

并且已经解决，会包含在1.8.3版本的集成测试中也增加了

# ruby - 在 Ruby 中切片最后 4 个或以其他方式处理此输入/输出模式？

> ID：12346813
> 
> 赞同：-1
> 
> 时间：2012-09-10T07:08:06.560
> 
> 标签：ruby, regex, slice

```
print('What is the day and hour (ex., Monday 08AM): ')
appoint = gets.slice[0..-4]
puts(appoint) 
```

正在返回此错误：

/scope.rb:2:in `slice': wrong number of arguments (0 for 1..2) (ArgumentError) from /scope.rb:2:in`'

还尝试`slice[appoint.length..-4]`了一些其他的东西。

通过阅读其他问题，我了解到这就是这样一个切片的完成方式。我不熟悉正则表达式模式。我实际上也希望能够返回星期几，这可能意味着`from -5 back to input`或`everything up until the space`使用某种正则表达式模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:16:32.783

你想要这个吗 ？

```
appoint = gets.slice(-4,4) 
```

因为`Monday 08AM`它返回：

```
08AM 
```

您可以像这样使用切片：`slice(start, length)`.

在你的情况下`start`is`-4`和`length`is `4`。

**编辑** 或只有括号：

```
appoint = gets[-4..-1] 
```

字符串也是一个字符数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:28:01.213

Regex exmaple:

```
s = "Monday 08AM"

day = /[a-zA-Z]+/
s[day]
=> "Monday"

# \d? to also catch 8AM without 0 at the start
hour = /\d?\d[paPA][mM]/
s[hour]
=> "08AM" 
```

[Regex tutorial from Ruby 1.9.3 docs](http://www.ruby-doc.org/core-1.9.3/Regexp.html)

# sql - 用于连接表的数据库查询

> ID：12346816
> 
> 赞同：-1
> 
> 时间：2012-09-10T07:08:35.623
> 
> 标签：sql

我有两张桌子。如果第一个表（朋友电子邮件）与第二个表（用户 ID）匹配，那么我将此记录插入到第三个表中。在第三张桌子

```
u1-->useremail  
u2-->Friendemail 
```

那么它还包含

```
u2-->useremail  
u1-->Friendemail 
```

可以使用查询吗？？？

**表格1**

```
Useremail        Friendemail

 1\. u1             u2
 2\. u1             u3
 3\. u1             u4
 4\. u2             u3 
```

**表 2**

```
 id
 u1
 u2
 u3 
```

**表3**

```
Useremail   Friendemail
1\. u1             u2
2\. u1             u3
3\. u2             u3
4\. u2             u1
5\. u3             u1
6\. u3             u2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:17:59.680

首先使用选择查询选择数据并应用连接然后插入到表中

```
 insert into table3(usermail,friendmail) (select table1.usermail,table1.friendmail from table1 inner join table2 on table1.usermail=table2.userid and table1.friendmail in (select userid from table2) union select table1.friendmail,table1.usermail from table1 inner join table2 on table1.friendmail=table2.userid and table1.usermail in (select userid from table2) ); 
```

也许它会帮助你......

# cocoa - 通过 NSTask 执行时 tops 命令给出错误

> ID：12346821
> 
> 赞同：0
> 
> 时间：2012-09-10T07:09:27.623
> 
> 标签：cocoa, nstask

我正在尝试通过 NSTask 使用以下**tops**命令：

```
tops replace "__My_CompanyName__" with "XYZ" TryItOut.m 
```

但它总是给出以下错误：

```
File replace "__My_CompanyName__" with "XYZ" does not exist 
```

通过终端执行时，它工作正常。

下面是我使用的代码：

```
NSTask *theTopsCommand = [[NSTask alloc] init];
[theTopsCommand setLaunchPath:@"/usr/bin/tops"];
[theTopsCommand setArguments:[[NSArray alloc] initWithObjects:@"replace \"__My_CompanyName__\" with \"XYZ\"", self.selectedFilePath,nil]];
[theTopsCommand launch];
[theTopsCommand waitUntilExit]; 
```

如果我做错了什么，谁能建议我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:13:39.727

您需要将参数`tops`作为字符串数组提供，但您提供的是一个字符串。

尝试：

```
[theTopsCommand setArguments:[NSArray arrayWithObjects:@"replace", @"__My_CompanyName__", @"with", @"XYZ", self.selectedFilePath, nil]]; 
```

# pdflib - PDFLib如何使用书签跳转到另一个文件？

> ID：12346822
> 
> 赞同：0
> 
> 时间：2012-09-10T07:09:37.153
> 
> 标签：pdflib

我想在 pdf 中创建一个链接或书签，用 PDFLib 将我带到另一个 pdf。为此，我使用了以下代码：

```
String optlist = "filename=paper_planes_catalog.pdf " +"destination={page 2 type fixed left 50 top 200 zoom 2}"; 
```

现在我为此创建了如下操作：

```
goto_action = p.create_action("GoToR", optlist); 
```

但是我该如何应用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:34:11.613

您必须为此创建书签。

```
String optlist = "action={activate " + goto_action + "} fontstyle=bold textcolor={rgb 0 0 1}";

catalog_bookmark = p.create_bookmark("Our Paper Planes Catalog", optlist); 
```

这将完成剩余的工作。

# jquery - 多按钮点击处理

> ID：12346824
> 
> 赞同：0
> 
> 时间：2012-09-10T07:09:48.610
> 
> 标签：jquery, json

在我的 html 页面中，我有 4 个购买按钮。单击每个按钮时，将在弹出窗口中填充相应的数据。它工作正常。但是在这 4 个按钮中，有两个具有相同的数据。所以我不需要单独调用来获取这些数据。我想检查页面中是否已经加载了数据，如果是，则需要填充。我正在使用带有 JSON 的 ajax 从后端获取数据。请帮帮我。

提前致谢。

添加小提琴

在这里，如果您使用底部的 firbug>Net 检查，我们可以看到已经加载了 4 个 json 响应。我需要避免这种情况，因为所有这四个响应都是重复的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:14:10.010

我会使用 jQuery 并制作一些通用的东西：

```
$('.buybutton').click(function() {
    loadDataIfNotLoaded();
 }); 
```

只需将 class="buybutton" 放在每个购买按钮上，然后检查数据是否已加载到您的函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:14:49.667

使用 jquery ajax 时，您可以简单地让 jQuery 完成缓存工作。

```
$.ajax({

    cache: true,

    success: function(data) {

        // do something now that the data is loaded

    },

    url: '/path/to/my/json/file.js'

}); 
```

# sql-server-2005 - SQL 用于在 Microsoft C5 中拆分 Zip 和 City 字段

> ID：12346829
> 
> 赞同：0
> 
> 时间：2012-09-10T07:10:11.337
> 
> 标签：sql-server-2005, split, sql-view, c5

我有一个客户正在运行 Microsoft C5 作为他们的 ERP 系统，我们应该帮助他们将其集成到他们的 CRM 系统中。为此，我创建了一个 SQL 视图，在其中根据我们的导入程序的标准映射导入客户所需的字段。问题是这个版本的微软 C5 将邮政编码和城市存储在同一个字段中，所以我需要将它分成一个邮政编码字段和一个城市字段。问题在于，邮政编码和城市之间的空格数量并没有一个共同的模式，而且邮政编码的长度也不相同，等等。我已经尝试了很多字符串函数，但我敢打赌，如果你知道如何解决它是小菜一碟。

以下是我需要拆分的 zipcity 列中的一些值示例：

```
D-40883  Ratingen
N-4300  Sandnes
S-55117  Jönköping
3650  Ølstykke
PL - 58-100 swidnica dlaska 
```

如您所见，这里我们混合了德国、丹麦、挪威、瑞典和波兰的邮政编码和城市名称。这就是我需要分开的。

我不知道我是否应该尝试使用正则表达式？我在使用正则表达式方面不是很熟练，因此非常感谢您的帮助。

# php - Joomla : 超级管理员能否获得该站点的 ftp 密码（从配置文件或任何其他方式）？

> ID：12346830
> 
> 赞同：4
> 
> 时间：2012-09-10T07:10:11.103
> 
> 标签：php, joomla, security, joomla1.5

我可以作为超级管理员访问 joomla 1.5 制作的网站后端。现在我要做的是，关闭该站点并将一个简单的 html 文件设置为站点主页。为此，我认为我需要 ftp 用户/通行证。有没有办法从 joomla 后端获得该通行证？我可以在帮助>系统信息>配置文件中看到一些条目，其中 $ftp_user:'xxxxxx' 和 $ftp_pass:'xxxxxx'。有没有办法知道这些值？即使我无法获得 ftp 用户/通行证，我可以以某种方式使用 joomla 后端编辑/浏览任何文件/目录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:27:30.247

您不需要 ftp 详细信息，您可以使用简单的超级管理员控件来完成此操作。执行以下操作：- 1.创建一个新主题，其中只有一个简单的 HTML 页面和所需的 css、图像。2.将此主题添加到joomla。3.将此主题设置为您的默认主题，现在您可以看到您最近集成到新主题中的html页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:13:04.660

是的，如果 FTP 用户/密码保存在 Joomla configuration.php 文件中。在后端，转到全局配置并查看 HTML 源代码，搜索*jform_smtppass*并找到它旁边的密码值。

仅使用 Joomla 测试！2.5.6。

# python - 谷歌应用引擎电子邮件附件：将其下载到文件系统

> ID：12346831
> 
> 赞同：0
> 
> 时间：2012-09-10T07:10:11.637
> 
> 标签：python, google-app-engine, download, email-attachments

我能够收到一封发给应用引擎的电子邮件。我看到附件中的数据是有效负载 base64 编码数据。我可以将附件原样下载到文件系统而不对其进行处理或不将其存储到 blobstore 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:23:15.587

您无法将文件写入 App Engine 中的 Web 应用程序目录。

您可能的选择是：

*   将内容保存在数据存储中。
*   使用 Blobstore
*   使用谷歌存储设施。

或者，您可能希望将内容发布到可以存储数据的外部服务器，无论是您自己的还是第三方（如 Amazon S3）。

# android - Android dropbox sdk注销功能错误

> ID：12346834
> 
> 赞同：1
> 
> 时间：2012-09-10T07:10:33.877
> 
> 标签：android, logout, dropbox-api

我正在使用 dropbox android sdk 将 dropbox 与我的应用程序集成，并且我想从我的应用程序中的 dropbox 注销。从官方文档和 Dropbox 论坛中，退出的唯一方法是调用`unlink()`Dropbox 会话并从`SharedPreference`.

```
mApi.getSession().unlink();
//clear dropbox accesstoken and secret keys from SharedPreference
clearKeys(); 
```

那么上面的调用没有做任何事情。当我稍后尝试登录时

```
AppKeyPair appKeyPair   =   new AppKeyPair(AppConstants.DROPBOX_API_KEY,AppConstants.DROPBOX_API_SECRET);
AndroidAuthSession session;
session             =   new AndroidAuthSession(appKeyPair, ACCESS_TYPE); 
```

登录屏幕没有显示，而是显示 api 询问用户访问文件夹到保管箱的权限的屏幕（通常在登录屏幕后显示）。有没有办法从 Dropbox 注销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:18:57.487

这里的问题是应用程序何时达到`onResume()`功能。即使您已注销，dropbox api 也会要求浏览器登录，并以密钥响应。浏览器似乎已经缓存了登录。调用注销功能时尝试清除 Web 浏览器缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T01:57:39.693

因为 unlink() 调用纯粹是客户端工作，所以它不等于取消应用程序与用户帐户的链接，您可以在 Web 上的“设置”页面下执行此操作。

这是代码片段

```
@Override
public boolean isLinked() {
    return (oauth1AccessToken != null) || (oauth2AccessToken != null);
}

@Override
public void unlink() {
    oauth1AccessToken = null;
    oauth2AccessToken = null;
} 
```

# android - 下载没有任何历史记录的 JellyBean 源代码

> ID：12346840
> 
> 赞同：1
> 
> 时间：2012-09-10T07:10:59.930
> 
> 标签：android, android-source, samsung-mobile

目前我尝试按照[**此链接中给出的说明进行操作。**](https://stackoverflow.com/questions/9442214/android-source-code-download)由于巨大的下载要求不能喜欢那个。

但我想要的只是没有任何历史记录的**`Jelly Bean(Nexus 7)`**来源**`code`**（没有分支，也没有提交）。就像三星如何提供[**Here一样。**](http://opensource.samsung.com/reception/receptionSub.do?method=list&menu_item=mobile&classification1=mobile_phone&classification2=&classification3)

有这样的吗？

# facebook - 通过 FacebookGraphAPI 实现 Facepile

> ID：12346841
> 
> 赞同：2
> 
> 时间：2012-09-10T07:11:00.757
> 
> 标签：facebook, facebook-graph-api

在我的一个应用程序中，我需要使用给定的 url 加载 facepile。为了喜欢与 Facebook 相关的帖子和​​其他内容，我正在使用 Facebook SSO。请有人帮我加载facepile吗？

# android - APK内相同路径的重复文件

> ID：12346843
> 
> 赞同：17
> 
> 时间：2012-09-10T07:11:03.503
> 
> 标签：android, android-library

我有一个使用一些库的应用程序。

问题是，当我尝试导出 apk 文件时，我得到“在 APK 内相同路径的重复文件”。

这是日志：

```
org.eclipse.core.runtime.CoreException: Duplicate files at the same path inside the APK
at com.android.ide.eclipse.adt.internal.project.ExportHelper.exportReleaseApk(ExportHelper.java:284)
at com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard.doExport(ExportWizard.java:295)
at com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard.access$0(ExportWizard.java:232)
at com.android.ide.eclipse.adt.internal.wizards.export.ExportWizard$1.run(ExportWizard.java:217)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: com.android.sdklib.build.DuplicateFileException: Duplicate files at the same path inside the APK
at com.android.sdklib.build.ApkBuilder$JavaAndNativeResourceFilter.checkEntry(ApkBuilder.java:123)
at com.android.sdklib.internal.build.SignedJarBuilder.writeZip(SignedJarBuilder.java:225)
at com.android.sdklib.build.ApkBuilder.addResourcesFromJar(ApkBuilder.java:563)
at com.android.ide.eclipse.adt.internal.build.BuildHelper.finalPackage(BuildHelper.java:372)
at com.android.ide.eclipse.adt.internal.project.ExportHelper.exportReleaseApk(ExportHelper.java:255)
... 4 more 
```

任何人都必须处理这个问题？

非常感谢。

编辑：解决方案

我弄清楚了问题所在。我包含了一个 JAR 文件，其中包含一个 AndroidManifest.xml 文件，该文件与我自己项目的 AndroidManifest.xml 文件冲突。我的实例中的解决方案是重建 JAR 文件，确保它排除了自己的 AndroidManifest.xml 版本，然后将新版本的 JAR 文件重新包含到我的项目中。执行此操作后，您可能需要清理项目。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-17T15:20:35.513

如果您在使用 Maven 进行构建时碰巧遇到了这个问题，我可以通过输入以下内容来解决它：

```
<extractDuplicates>true</extractDuplicates> 
```

进入 Maven Android 插件配置标签。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T07:25:42.620

Check the external jars you have imported in your application..

```
Project Properties -> Java Build Path -> Libraries -> Add External JARs... 
```

There might be some duplicate files imported!

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T07:30:32.257

我弄清楚了问题所在。我包含了一个 JAR 文件，其中包含一个 AndroidManifest.xml 文件，该文件与我自己项目的 AndroidManifest.xml 文件冲突。我的实例中的解决方案是重建 JAR 文件，确保它排除了自己的 AndroidManifest.xml 版本，然后将新版本的 JAR 文件重新包含到我的项目中。执行此操作后，您可能需要清理项目。

# java - 使用 JPA 和 Hibernate 注册 SQL 函数

> ID：12346845
> 
> 赞同：8
> 
> 时间：2012-09-10T07:11:26.597
> 
> 标签：java, spring, hibernate, sql-function, dialect

我想知道**使用 JPA/Hibernate 注册自定义 SQL 函数**的最佳方法是什么。

我必须通过扩展 MysqlInnodb 方言还是有更好的方法？

任何人都可以提供代码示例和相关文档的指针吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T07:47:05.710

是的，扩展方言是注册自定义 SQL 函数的好方法。

在您的方言类构造函数中添加类似的内容。

```
registerFunction("current_timestamp", new NoArgSQLFunction(Hibernate.TIMESTAMP) );
registerFunction("date", new StandardSQLFunction(Hibernate.DATE) ); 
```

查看现有方言类之一的源代码。 [http://www.koders.com/java/fid0E7F787E2EC52F1DA8DFD264EDFBD2DE904A0927.aspx](https://web.archive.org/web/20120923033430/http://www.koders.com/java/fid0E7F787E2EC52F1DA8DFD264EDFBD2DE904A0927.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-07-11T12:51:39.943

您可能会阅读文章告诉您通过扩展 Hibernate 来注册 SQL 函数`Dialect`，但这是一个幼稚的解决方案。

从 Hibernate ORM 5.2.18 和 5.3.1 开始，注册 SQL 函数的最佳方法是提供[`MetadataBuilderContributor`](https://vladmihalcea.com/hibernate-sql-function-jpql-criteria-api-query/)这样的：

```
public class SqlFunctionsMetadataBuilderContributor 
        implements MetadataBuilderContributor {

    @Override
    public void contribute(MetadataBuilder metadataBuilder) {
        metadataBuilder.applySqlFunction(
            "group_concat",
            new StandardSQLFunction(
                "group_concat", 
                StandardBasicTypes.STRING
            )
        );
    }
} 
```

您可以通过`hibernate.metadata_builder_contributor`配置属性将其传递给 Hibernate：

```
<property>
    name="hibernate.metadata_builder_contributor" 
    value="com.vladmihalcea.book.hpjp.hibernate.query.function.SqlFunctionsMetadataBuilderContributor"
</property> 
```

或者，如果您以本机方式引导 Hibernate，则只需将 SQL 函数应用于`MetadataBuilder`引导期间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-29T09:55:04.620

注册每个版本的 SQL 方法

```
 //Add Hibernate Properties
        properties.put("hibernate.dialect",
                        "com.sparkslink.web.config.sql.RegisterSqlFunction");

        //Create A Class 
        public class RegisterSqlFunction extends MySQLDialect {

            public RegisterSqlFunction() {
                super();
                registerFunction("group_concat", new StandardSQLFunction("group_concat", StandardBasicTypes.STRING));
            }
        }

        //Dao Method

        public List<Client> getTest() {
                Query query = getSession()
                        .createQuery("SELECT sl.name as name ,group_concat(sl.domain) as domain FROM SlClient sl GROUP BY sl.name");
                query.setResultTransformer(Transformers.aliasToBean(Client.class));
                return query.list();
            }
//DTO Class
    public class Client {
        private String name;
        private String domain;
    //Getter 
    //Setter
    } 
```

# java - 带有 Spring MVC 的 Ajax 无法正常工作

> ID：12346855
> 
> 赞同：2
> 
> 时间：2012-09-10T07:12:11.020
> 
> 标签：java, jquery, ajax, jsp, spring-mvc

这是我尝试插入用户的jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Add Users using ajax</title>
        <script src="/Spring3MVC/js/jquery.js"></script>
        <script type="text/javascript">
        function doAjaxPost() {
            // get the form values
            var firstName = $('#firstName').val();
            var lastName = $('#lastName').val();

            $.ajax({
                type: "POST",
                url: "/insert",
                data: "firstName=" + firstName + "&lastName=" + lastName,
                success: function(response) {
                    // we have the response
                    $('#info').html(response);
                    $('#firstName').val('');
                    $('#lastName').val('');
                },
                error: function(e) {
                    alert('Error: ' + e);
                }
            });
        }
        </script>
    </head>
    <body>
        <h1>Add Person</h1>
        <table>
            <tr><td>First Name : </td><td> <input type="text" id="firstName" name="firstName" /><br/></td></tr>
            <tr><td>Last Name : </td><td> <input type="text" id="lastName" name="lastName" /> <br/></td></tr>
            <tr><td colspan="2"><input type="button" value="Add Users" onclick="doAjaxPost()"><br/></td></tr>
            <tr><td colspan="2"><div id="info" style="color: green;"></div></td></tr>
        </table>
        <a href="/SpringMVC/search">Show All Users</a>
    </body>
</html> 
```

这是我的控制器代码

```
@RequestMapping(value="/insert", method = RequestMethod.POST)
public String insertPerson(ModelMap model, HttpServletRequest request, HttpServletResponse response, @RequestParam("firstName") String firstName, @RequestParam("lastName") String lastName ) {
    personDao.savePerson(firstName,lastName);
    model.addAttribute("nameAdded", firstName+" "+lastName);
    return "personAdded";
} 
```

当我单击“添加用户”按钮时，没有任何反应。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T07:18:43.067

除了 Ajax 帖子之外，您在任何地方都使用上下文 URL。

应该

`url: "/insert",`

也许是

`url: "/SpringMVC/insert",`

甚至更好

`url: "<spring:url value='/insert' />",`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T07:34:45.457

尝试

`data: {firstName: firstName, lastName: lastName},`

代替

`data: "firstName=" + firstName + "&lastName=" + lastName,`

在你的ajax调用中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-10T07:38:04.827

将`url`JSP 中的 AJAX 请求用作：

```
url: "insert" 
```

代替：

```
url: "/insert" 
```

您使用的是指向服务器根目录而不是控制器的绝对 URL。

我已经对其进行了测试，并且使用您的代码对我来说效果很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T17:01:05.230

两个页面的绝对 url 是什么，如果你在键盘上按 f12 键，你可以跟踪 ajax 调用并跟踪响应代码，如果是 200，那么你的服务器端代码没有问题现在检查成功功能，否则检查服务器代码，当然 404 意味着它没有到达服务器。

# javascript - $.inArray() 没有给出元素的准确索引？

> ID：12346860
> 
> 赞同：1
> 
> 时间：2012-09-10T07:12:30.180
> 
> 标签：javascript, jquery

我有一个数组。

```
var arr =[23,45,78,89]; 
```

我想从这个数组中删除 78 所以我正在使用

```
 arr.splice($.inArray(78), 1); 
```

但这总是删除最后一个元素 89。

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T07:15:21.037

您缺少第二个参数`$.inArray`- 试试这个：

```
arr.splice($.inArray(78,arr), 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T07:16:43.940

你必须通过`arr`to [`jQuery.inArray`](http://api.jquery.com/jquery.inarray/)：

```
$.inArray(78, arr) 
```

您还应该在拼接之前验证是否找到了该值：

```
var index = $.inArray(78, arr);
if (index > -1) {
    arr.splice(index, 1);
} 
```

`splice`将 视为`-1`“从头开始的第一个”（或“最后一个”）。

# c++ - 如何卸载 Metro 设备元数据以获得更多选项

> ID：12346862
> 
> 赞同：1
> 
> 时间：2012-09-10T07:12:37.280
> 
> 标签：c++, visual-c++, microsoft-metro, windows-runtime

我从我的团队获得了我的相机应用程序的设备元数据。我使用元数据创作工具安装了设备元数据。我有以下查询。由于这个设备随着团队的工作而不断变化，我每天都会更新设备元数据。

我的问题是

1.  更新设备元数据是在缓存中创建新条目还是更新现有条目。

2.  如何使用工具卸载设备元数据。目前我通过删除元数据缓存手动完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:41:02.747

我猜这个问题是由于设备（相机）的设备应用程序元数据的多个副本。
我检查了所有的元数据

```
%programdata%\Microsoft\Windows\DeviceMetadataStore 
```

使用元数据创作工具并比较包名称，如果它们相同则将其删除。我删除了所有相关条目

```
%programdata%\Microsoft\Windows\DeviceMetadataCache\dmrccache\multiloc 
```

还可以比较 SoftwareInfo.xml 中的包名称。
我重新安装了元数据。现在它工作正常。

请确认我发现同一设备/设备应用程序的多个元数据副本是否会导致问题。

# mysql - 根据另一个表的几列创建一个表，但还要添加一些额外的列

> ID：12346864
> 
> 赞同：9
> 
> 时间：2012-09-10T07:12:55.127
> 
> 标签：mysql

我知道我可以做这样的事情：

```
CREATE TABLE new_table AS (
    SELECT field1, field2, field3
    FROM my_table
) 
```

我想知道如何向这个创建表添加更多的列，这些列`SQL`不是来自`my_table`，而是那些我会写我自己的列，并且这将是唯一的`new_table`。

我知道我可以用上面的方法制作表格，`SQL`然后额外（在命令完成后）添加必要的列，但我想知道这一切是否可以在一个命令中完成，也许是这样的（试过这样，但是没用）：

```
CREATE TABLE new_table AS (
    (SELECT field1, field2, field3
    FROM my_table),
    additional_field1 INTEGER NOT NULL DEFAULT 1,
    additional_field2 VARCHAR(20) NOT NULL DEFAULT 1
) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T07:22:54.557

您还可以显式指定生成列的数据类型：

请参阅[创建表选择手册](http://dev.mysql.com/doc/refman/5.5/en/create-table-select.html)

```
CREATE TABLE new_table
(
 additional_field1 INTEGER NOT NULL DEFAULT 1,
 additional_field2 VARCHAR(20) NOT NULL DEFAULT 1
)
AS
(
 SELECT id, val,
        1 AS additional_field1,
        1 AS additional_field2
 FROM my_table
); 
```

# 示例：[SQLFiddle](http://sqlfiddle.com/#!2/5eea5/1)

# android - 从 logcat 发送广播

> ID：12346866
> 
> 赞同：0
> 
> 时间：2012-09-10T07:13:04.360
> 
> 标签：android, logcat, broadcast

如果活动开始，我如何从 logcat 结果发送广播（如发送广播）（它用活动管理器标记）

就像浏览器启动 logcat 会显示：

```
09-10 09:47:04.020: I/ActivityManager(2707): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.android.browser/.BrowserActivity } from pid 2880 
```

市场上有应用程序像要求的那样被称为

LogCatNotifier

[https://play.google.com/store/apps/details?id=RabiSoft.LogCatNotifier&hl=en](https://play.google.com/store/apps/details?id=RabiSoft.LogCatNotifier&hl=en)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:22:36.903

如果您要问的是在记录特定内容时如何知道何时发送广播，您应该`Service`监控设备的日志，并且当它遇到您想要发送广播的日志时，您应该发送广播。

[您可以在此处](http://www.helloandroid.com/tutorials/reading-logs-programatically)了解如何以编程方式读取日志

**编辑：**如果我没记错的话，在 JellyBean 中，除了您自己的应用程序之外，不再可以从任何应用程序中读取日志。

# php - 仅返回键的 PHP foreach

> ID：12346876
> 
> 赞同：49
> 
> 时间：2012-09-10T07:14:21.270
> 
> 标签：php, arrays, foreach

可能没有任何意义但仍然存在的理论问题，也许有一个聪明的答案。

我想遍历数组并获取它的键并使用它们。我所做的一个简单的例子：

```
foreach($array as $key => $value) {
    $other_array[$key] = 'something';
} 
```

现在，在此范围内未使用的`PHP Mess Detector`尖叫声。`$value`因此，我在想也许这不是访问`keys`我的`array`.

知道如何在不不必要地取出`values`我的情况下做到这一点`array`吗？它是否对性能有任何重大影响......或者我只是偏执并且应该继续而不用愚蠢的问题浪费任何人的时间:)。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-09-10T07:17:26.217

你可以做这样的事情

```
foreach(array_keys($array) as $key) {
 // do your stuff
} 
```

这将使*foreach*迭代一个由数组中的键组成的数组，而不是实际的数组。请注意，从性能的角度来看，它可能并不好。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-10-09T15:39:11.250

只需忽略此消息。

在 PHP 中，您使用的方式`foreach`是最快的。正确的是，您应该避免使用未使用的变量，但在这种情况下，您无法避免它，而不会损失一些性能。

例如 比`foreach(array_keys($arr) as $key)`慢大约 50% 到 60% 。
`foreach($arr as $key => $notUsed)`

这个问题的 phpmd 已经在这里报告[了，](https://github.com/phpmd/phpmd/pull/198)[这里](https://github.com/phpmd/phpmd/issues/48)也已经有一个拉取请求。

在更新 phpmd 之前，您还可以使用[这个小技巧](https://github.com/phpmd/phpmd/issues/48#issuecomment-58123855)

在方法的文件`/src/main/php/PHPMD/Rule/UnusedLocalVariable.php`中`collectVariables(..)`（在我的情况下为第 123 行）替换

```
if ($this->isLocal($variable)) 
```

经过

```
if ($this->isLocal($variable) && !($this->isChildOf($variable, 'ForeachStatement') && $variable->getName() === '$notUsed')) 
```

这将阻止 phpmd 报告foreach 循环内的`$notUsed` *任何位置。*

**更新：** 上述建议假定 PHP 5.6（撰写此答案时的相关版本）。但是时间过去了，现在使用 PHP 7.2 似乎正好相反。与往常一样，它取决于确切的用例，但对于少于 100.000 个键的关联数组，将其存储`array_keys($arr)`在变量中并在 foreach 循环中使用它会更快。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-12T08:03:08.413

它是有效的 PHP 代码，不要修复代码，而是修复 PHP MD。[PHP MD 2.2](https://github.com/phpmd/phpmd/pull/198)中有一个配置 并且需要这个规则：

```
<properties>
    <property
        name="allow-unused-foreach-variables"
        description="Allow unused variables in foreach language constructs."
        value="false" />
</properties> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-21T21:31:15.017

被 18C 破解 :-)

在构造`as $key=>$value`中，$value 在分配 $key 之前首先在 PHP 中分配。

```
$array=[1,3,6,10];

foreach($array as $k => $k) 
   print($k.'<br/>'); 
```

对于您的代码：

```
foreach($array as $key => $key) 
{
    $other_array[$key] = 'something';
} 
```

顺便提一句。不要使用：`foreach($array as $k => &$k)`。它可能会破坏您的阵列。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T07:26:18.033

如果您想将所有键设置为某个值，您可以这样做：

```
$array = array(
        'foo'=> 'oldval1',
        'bar'=> 'oldval2',
        'baz'=> 'oldval3'
);

$other_array = array_fill_keys(array_keys($array), 'something');
print_r($other_array); 
```

这将产生：

```
Array
(
    [foo] => something
    [bar] => something
    [baz] => something
) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-30T05:56:54.773

如果您使用的是 XML 规则集：

```
 <rule ref="rulesets/unusedcode.xml/UnusedLocalVariable">
        <properties>
            <property name="allow-unused-foreach-variables" value="true" />
        </properties>
    </rule> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-13T22:58:29.723

循环以避免在一段时间内进行 foreach。

```
$a = ['1','A','B','12','ui'];

 while(true) { sleep(1);
    $b = next($a) ? current($a): reset($a);
    echo key($a) , ':' , $b , PHP_EOL;
 } 
```

# java - 以 Java dos 风格播放声音的频率

> ID：12346878
> 
> 赞同：0
> 
> 时间：2012-09-10T07:14:31.787
> 
> 标签：java, dos, javasound, audio, jfugue

在 Turbo C++ 中，我们有一个名为的头文件，`dos.h`它公开了三个函数`sound`和. 使用这三个函数可以用 C++ 编写一个基本的钢琴程序。`nosound``delay`

我想使用 Java 实现相同的结果。我的选择是使用 jfugue 提供的库或`javax.sound.sampled`. 问题是我事先不知道每个音符的持续时间。

我想在用户按下某个键时开始播放某个频率，并仅在用户释放它时停止。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T23:56:49.893

Java 教程有一个示例，其中在最里面的 while 循环中查询一个布尔值，其中一个正在打包字节并将它们交给 SourceDataLine 进行播放。

因此，可以编写您的事件（可能是关闭事件）来更改此布尔值。由于声音播放在其自己的线程中，因此最好使布尔值“易失”，并使用这种消息传递方法而不是尝试直接控制播放。

让我们看看能否找到教程示例... [http://docs.oracle.com/javase/tutorial/sound/playing.html](http://docs.oracle.com/javase/tutorial/sound/playing.html)

请注意，在“使用源数据行”部分的示例中，有一个 while 循环，其中表达式“!stopped”作为条件之一。在这个例子中，回放的基类肯定有一个布尔值“stopped”，并且可能将它标记为“volatile”。

# objective-c - 将图像存储在 sqlite 中还是只是对它的引用？

> ID：12346879
> 
> 赞同：3
> 
> 时间：2012-09-10T07:14:38.867
> 
> 标签：objective-c, ios, core-data, uiimage, nsdata

我已经使用 coredata 制作了几个应用程序，并且我将图像存储在 sqlite 中，但在某个地方我发现它很糟糕。我已经搜索了网络，但我发现的只是这个建议：

*   **图像大小 < 100kb**与相关数据存储在同一个表中
*   **图像大小 < 1mb**存储在通过关系附加的单独表中，以避免不必要地加载
*   **图像大小 > 1mb**存储在磁盘上并在 Core Data 中引用它

所以我的问题是：将图像保存在 sqlite db 中的优点和缺点是什么`NSData`，并且在图像保存在文件系统中时只存储对图像的引用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T07:25:21.747

[Apple 在其核心数据性能](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreData/Performance.html#//apple_ref/doc/uid/TP40001075-CH25-SW11)指南中提供了有关此主题的一些指导。一般来说，尽管 SQLite 可扩展性很好并且可以轻松处理数 GB 大小的数据库，但大型二进制 blob 不可查询或可索引，并且会膨胀数据库的大小而几乎没有回报。

如果您的目标是 iOS 4 及更高版本，您可以在包含此类数据的属性上设置“[允许外部二进制数据存储](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSAttributeDescription_Class/reference.html#//apple_ref/occ/instm/NSAttributeDescription/setAllowsExternalBinaryDataStorage:)”标志，Core Data 会自动将它们单独存储在文件系统中（如果它认为合适的话），并且自动管理指向数据存储中该数据的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:27:14.067

Benefits: Not so sure, but I can think of couple of benefits of storing just links in the database.

1.  The native code interaction with the file system would be faster than the SQLite image fetching. (overall faster performance)

2.  Clean and scalable database -- (with size being the concern, migration would be easier)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T08:32:12.183

您可能想检查我得到的类似（如果不相同）主题的答案。因为作为您，我只发现有人提供建议，但没有人真正提供基准和真正的技术答案。

[请举例说明为什么不建议将图像存储在 CoreData 中？](https://stackoverflow.com/questions/10848147/provide-example-for-why-it-is-not-advisable-to-store-images-in-coredata)

除此之外，在我的应用程序已经实现了数据库中的所有图像并发送到应用程序商店之后，我可以告诉你，如果你使用 iCloud，事情会变得更容易。如果在 UITableView 中使用带有缩略图图标的小图像，则可以完全避免异步图像加载。

只有一个建议，为每个图像大小提供一个实体，而不是将所有图像存储在附加到主实体的集合中。

我发现使用 iCloud 的唯一缺点是每次更改图像时都会生成更大的事务日志。但在我的情况下，图像很小，更新图像的需求很少。另外，目前 iCloud+CoreData 有很多问题，所以我在发货前删除了它，所以目前这对我来说真的不是问题。

# javascript - 谷歌地图 v3 数组标记

> ID：12346882
> 
> 赞同：0
> 
> 时间：2012-09-10T07:15:03.097
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我无法在 Google Maps V3 中显示多个标记，我得到了正确的坐标但没有显示在地图上。控制台中也没有错误

1.  map_items[0] = 标题
2.  map_items[1] = 55.153766, 11.909180
3.  map_items[2] = 链接
4.  map_items[3] = 文本

如果我发出警报，它们都会正确显示。例子

“标题”、“51.00150763193481、-2.5659284999999272”、“链接”、“文本”

```
 function initialize() {
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 7,
                center: new google.maps.LatLng(55.153766, 11.909180),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });
            for (var x = 0; x < temp.length; x++) {
                if(temp[x][1]){
                    var map_items = temp[x];
                    var myLatlng = new google.maps.LatLng(map_items[1]);
                    var marker = new google.maps.Marker({
                        map: map,
                        position: myLatlng,
                        title: map_items[0]
                    });
                    google.maps.event.addListener(marker, 'click', function() {
                        infowindow.setContent('<div class="google_marker"><a href="'+map_items[2]+'">'+map_items[0]+'</a><br /><p>'+map_items[3]+'</p></div>');
                        infowindow.open(map, marker);
                    });
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T07:23:28.850

google.maps.LatLng() 接受两个参数，而不是一个，所以：

```
var latlon = map_items[1].split(',');
var myLatlng = new google.maps.LatLng(parseFloat(latlon[0]), parseFloat(latlon[1])); 
```

虽然实际上，最好使用对象而不是数组，其中每个项目都包含不同的数据类型，例如：

```
marker_data[0] = {
  "lat": 55.153766,
  "lon": 11.909180,
  "title": "My Title",
  "link": "http://stackoverflow.com"
}
//etc... 
```

然后你会像这样访问它：

```
var myLatlng = new google.maps.LatLng(marker_data[0].lat, marker_data[0].lon); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:27:19.593

Assuming `map_items[1]` is string

```
if (temp[x][1]) {
    var map_items = temp[x];
    var latlng = map_items[1].split(",");
    var myLatlng = new google.maps.LatLng(parseFloat(latlng[0]), parseFloat(latlng[1]));
    var marker = new google.maps.Marker({
        map: map,
        position: myLatlng,
        title: map_items[0]
    });
    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent('<div class="google_marker"><a href="' + map_items[2] + '">' + map_items[0] + '</a><br /><p>' + map_items[3] + '</p></div>');
        infowindow.open(map, marker);
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:36:17.930

我认为当您单击任何标记时，只有最后一个 map_items 可用。创建不同的上下文可能会解决您的问题。

```
function initialize() {
                var map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 7,
                    center: new google.maps.LatLng(55.153766, 11.909180),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                });
                function AttachEventToMarker(marker, map_items){

                    google.maps.event.addListener(marker, 'click', function() {
                       infowindow.setContent('<div class="google_marker"><a href="'+map_items[2]+'">'+map_items[0]+'</a><br /><p>'+map_items[3]+'</p></div>');
                       infowindow.open(map, marker);
                    });
                }

                for (var x = 0; x < temp.length; x++) {
                    if(temp[x][1]){
                        var map_items = temp[x];
                        var myLatlng = new google.maps.LatLng(map_items[1]);
                        var marker = new google.maps.Marker({
                            map: map,
                            position: myLatlng,
                            title: map_items[0]
                        });
                         AttachEventToMarker(marker, map_items);
                    }
                }
            } 
```

# image-processing - 如何掩盖绿色像素？

> ID：12346886
> 
> 赞同：0
> 
> 时间：2012-09-10T07:15:12.800
> 
> 标签：image-processing, opencv, computer-vision, emgucv

我需要屏蔽图像中的绿色像素。我有掩蔽红色像素的例子。这里的例子：

```
Image<Hsv, Byte> hsv = image.Convert<Hsv, Byte>()

Image<Gray, Byte>[] channels = hsv.Split();

               //channels[0] is the mask for hue less than 20 or larger than 160

CvInvoke.cvInRangeS(channels[0], new MCvScalar(20), new MCvScalar(160), channels[0]);
               channels[0]._Not(); 
```

但是，我无法理解这些参数在哪里标记：

```
new MCvScalar(20), new MCvScalar(160) 
```

知道我必须采用哪些参数来掩盖绿色像素吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:20:01.403

该代码使用 20 - 160 范围之外的色调屏蔽像素（或者更确切地说屏蔽范围内的像素，然后反转屏蔽）。

一、了解HSV（Hue、Saturation、Value）：[http ://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)

实际的色调以度为单位，从 0 到 360，如：

![色调角度](../Images/96c11865090602f95bc79ad8977c6620.png)

然后查看[8 位 HSV 格式的 OpenCV 文档](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor)：

色调首先在 0 - 360 范围内计算，然后除以 2 以适应 8 位整数。

这意味着在原始示例中，蒙版像素的实际色调低于 40 度或高于 320 度。显然这是 0 度正/负 40。

对于类似的果岭范围，您需要 120 +/- 40，即从 80 到 160。最后将其转换为 8 位表示 - 从 40 到 80。

但是，实际代码将与您的示例不同：对于红色，他们必须屏蔽 20,160，然后反转掩码。对于绿色，只需从 40 到 80 进行掩蔽就足够了（即您必须省略该`channels[0]._Not();`部分）。

# php - 在magento中更改产品类型

> ID：12346891
> 
> 赞同：2
> 
> 时间：2012-09-10T07:15:40.070
> 
> 标签：php, magento, magento-1.6

我有两种产品，它们的类型是“分组产品”，现在我想将此产品更改为简单产品。有什么办法吗？

一些链接说我必须直接从数据库中更改。我试过了，但没有任何改变。有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T03:01:13.663

如果只有 2 个，也许您应该创建 2 个具有相同 url 的新产品并更改旧产品的 url。

或者，您可以进行一些编程。

也许从这门课开始`Mage_Catalog_Model_Product_Type_Grouped`。公共函数 getAssociatedProducts 返回一个关联产品数组，您可以在创建新产品之前通过应用任何逻辑对其进行简单排序。

在此过程中，您必须处理商店范围等，但有很多教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T10:16:33.003

无法在管理员中更改产品类型！

可能您可以转到“catalog_product_entity”表并将 type_id 从分组更改为简单，但我不知道它是否会引发新错误，但我只知道您必须丢失分组项目链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T01:59:55.073

您是否重建了索引（管理员/系统/索引管理）并刷新了缓存（管理员/系统/缓存管理）？

# html - 将 div 拉伸到父级的高度

> ID：12346892
> 
> 赞同：2
> 
> 时间：2012-09-10T07:15:45.123
> 
> 标签：html, css

我希望我的内容区域伸展到父级的高度，并且标题区域的高度是固定的。我无法硬编码内容区域的高度，因为在我正在处理的情况下，父区域的高度可能会改变。

HTML：

```
​&lt;div class="parent">
    <div class="title">Title</div>
    <div class="content">
       <p>My Content</p>
    </div>
</div>​ 
```

CSS：

```
.parent{
    width : 500px;
    height: 300px;
    background-color : gray;
    position: absolute;
}

.title{
    height:50px;
    background-color: #94A6E0;
    margin:5px;
}

.content{
    background-color: #8CBF99;
    margin:5px;
} 
```

JSFiddle：http: [//jsfiddle.net/PGJJv/](http://jsfiddle.net/PGJJv/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:27:22.900

有一种方法可以在不使用固定高度的情况下做到这一点：

您可以将父级设置为`display: table;`，将子级设置为`display: table-row`。然后最低的 div 将占据其余的高度。唯一的事情是你需要一个额外的元素来伪造两个元素之间的空间作为`border-top`或`border-bottom don't`在`<tr>`s 上工作。此外，您必须向父级添加填充以代替子级的边距。

(This is not a real `<tr>`, it is a sematic div but it is just emulating the behavior of a `<tr>`.)

HTML:

```
<div class="parent">
    <div class="title">Title</div>
    <span class="greyLine"></span>
    <div class="content">
        <p>My Content</p>
    </div>
</div>​ 
```

CSS:

```
.parent{
    width : 500px;
    height: 300px;
    background-color : gray;
    position: absolute;
    display: table;
    padding: 5px;
}

.title{
    height:50px;
    background-color: #94A6E0;
    display: table-row;
}

span.greyLine
{
    display: table-row;
    background-color: gray;
    height: 5px;
}

.content{
    background-color: #8CBF99;
    display: table-row;
}​ 
```

[http://jsfiddle.net/Kyle_/PGJJv/6/](http://jsfiddle.net/Kyle_/PGJJv/6/)

EDIT:

As Dipaks rightly points out, IE7 doesn't support the `display: table-row;` property.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:27:54.200

Maybe you can use the property of a table. Set your parent as a `table` You can have a fixed height for your title, that you display as a `table-row`. And your content is the second and last table-row; so it always fit the height of the table.

Here is a fidde example : [http://jsfiddle.net/PGJJv/5/](http://jsfiddle.net/PGJJv/5/)

You just have to play with margin and border to recreate exactly your template.

# google-bigquery - 消除 BigQuery 表中的重复记录

> ID：12346896
> 
> 赞同：9
> 
> 时间：2012-09-10T07:15:59.730
> 
> 标签：google-bigquery

我计划每天将增量数据附加到 BigQuery 表中。每次向现有表添加增量数据时，我都想从表中的现有数据中消除重复记录（基于主键列）。一种方法是——

1.  从增量数据中收集一组键（让我们称之为`INCR_KEYS`）
2.  对 - `SELECT all_cols from table where pkey_col NOT IN (INCR_KEYS)`- 行运行查询并将结果存储在新表中。
3.  将增量数据附加到新表中。

我对这种方法的担忧是它会创建一个大表的副本并添加到我的账单中。

有没有更好的方法在不创建重复表的情况下实现相同的目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T15:13:08.173

我不知道在不创建重复表的情况下如何做到这一点——这实际上听起来是一个非常聪明的解决方案。

但是，您的增量成本可能非常小 - BigQuery 仅针对数据存在的时间长度向您收费。如果您删除旧表，您只需要为这两个表支付几秒钟或几分钟的费用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T05:41:06.043

您可以在将目标表设置为现有表的情况下运行查询，并将写入处置设置为截断：

```
bq query --allow_large_results --replace --destination_table=mydataset.mytable \
    'SELECT * FROM mydataset.mytable
     WHERE key NOT IN (SELECT key FROM mydataset.update)'
bq cp --append_table mydataset.update mydataset.mytable 
```

我相信这会奏效，但我认为值得进行备份，特别是因为您可以稍后将其删除。

```
bq cp mydataset.mytable mydataset.backup
# You can also build the new table in one pass:
bq query --allow_large_results --replace --destination_table=mydataset.mytable \
    'SELECT * FROM (
         SELECT * FROM mydataset.mytable
         WHERE key NOT IN (SELECT key FROM mydataset.update)
     ), (
         SELECT * FROM mydataset.update
     )'
bq rm mydataset.backup 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T18:09:00.013

您可以设置一个新的目标表并按所有列查询计数和分组：

```
SELECT
  FIELD1,
  FIELD2,
  FIELD3,
  FIELD4
FROM (
  SELECT
    COUNT (*),
    FIELD1,
    FIELD2,
    FIELD3,
    FIELD4
  FROM
    [<TABLE>]
  GROUP BY
    FIELD1,
    FIELD2,
    FIELD3,
    FIELD4) 
```

# css - 使用 div 标签的页面布局

> ID：12346902
> 
> 赞同：0
> 
> 时间：2012-09-10T07:16:45.297
> 
> 标签：css, html

我正在尝试设计一个分为 3 个区域的网页：-

1) 标题区域 2) 左侧导航窗格 3) 主要内容区域

为此，我目前正在使用以下 CSS 类：-

```
 .Content
    {
    position:absolute;
    overflow:auto;
    top:10%;
    left:20%;
    width:80%;
    height:90%;
    }

    .Header
    {
    position:absolute;
    left:0;
    top:0;
    height:10%;
    width:100%;
    background-color:Blue;
    text-align:center;
    }

    .NavPanel
    {
        position:absolute;
        top:10%;
        left:0;
        height:90%;
        width:20%;
        overflow:auto;
        background-color:Menu;
    } 
```

body 标签的高度和宽度设置为 100%。

我不认为这是做我想做的事情的好方法。例如，当我降低浏览器的高度时，标题区域会按比例缩小，最终消失。此外，Chrome 按预期呈现页面，但由于某种原因，IE8 中出现水平滚动条。

我在 HTML 和 CSS 方面没有丰富的知识，所以我只是想知道是否有更好的方法来做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:32:15.917

您可以尝试[**`min-height`**](https://developer.mozilla.org/en-US/docs/CSS/min-height)在标题上设置 a 并使用[**媒体查询**](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)。

例如，您可以设置`min-height: 2em;`和使用如下媒体查询：

```
@media (max-height: 20em) { /* the min-height for the header = 10% of the max-height used here */
    .content, .navPanel {
        top: 2em; bottom: 0;
    }
} 
```

[**演示**](http://dabblet.com/gist/3689483)

但是，媒体查询在 IE 8 或更早版本中不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:19:40.233

您可能想为标题指定一个绝对高度，例如：

```
.Header 
    { 
    position:absolute; 
    left:0; 
    top:0; 
    height:100px; 
    width:100%; 
    background-color:Blue; 
    text-align:center; 
    } 
```

您还可以以字体大小为单位指定标题：`height: 10em`（1 em 应该是字母“m”的宽度；1 ex 应该是字母“x”的高度）。

请注意，删除标题和内容的“位置”属性可能会更好。在这种情况下，定位将是相对的（默认），使内容出现在标题下方，而不管标题的大小。在这种情况下，请删除内容的“高度”属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:38:53.593

你可以试试；

**HTML**

```
<div id="container">
    <div id="header">
    </div>
    <div id="sidebar">
    </div>
    <div id="viewer"></div>
</div> 
```

**CSS**

```
html, body {
    margin: 0;
    padding: 0;
    border: 0;
}
#header, #sidebar, #viewer {
    position: absolute;
}
#header{
    top: 0;
    width: 100%;
    height: 10%;
    background: yellow
}
#sidebar {
    top: 10%;
    width: 20%;
    bottom: 0;
    background-color: red;
    z-index:100;
}
#viewer {
    top: 10%;
    left: 20%;
    right: 0;
    bottom: 0;
    background-color: green;
} 
```

***[这](http://jsfiddle.net/blasteralfred/mczeW/)***是一个现场演示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:30:54.097

这是您可以使用和扩展的基本布局：

[http://jsfiddle.net/yUCdb/](http://jsfiddle.net/yUCdb/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T07:37:04.200

嗨，我认为您正在寻找像这样的页面布局复制并将此代码粘贴到任何记事本中并检查出来。

```
<html>
<head>
    <style type="text/css">

        .Container
        {
        background-color:yellow;
        height:100%;
        weight:100%;
        }

        .inner
        {
        float:left;
        top:10%;
        height:90%;
        width:100%
        }

        .Content
        {
        float:left;
        top:10%;
        left:20%;
        width:80%;
        height:100%;
        background-color:skyblue;
        }

        .Header
        {
        float:left;
        height:10%;
        width:100%;
        background-color:Blue;
        text-align:center;
        }

        .NavPanel
        {
            float:left;
            top:10%;
            height:100%;
            width:20%;
            background-color:Menu;
        }
    </style>
</head>
<body>
    <div class="Container">
        <div class="Header"></div>
            <div class="inner">
                <div class="NavPanel"></div>
                <div class="Content"></div>
            </div>
        </div>
    </div>
</body>
</html> 
```

# php - 验证码不适用于清漆

> ID：12346903
> 
> 赞同：0
> 
> 时间：2012-09-10T07:16:51.130
> 
> 标签：php, caching, captcha, varnish

我偶然发现了这个奇怪的问题。由于我在服务器上安装/启用了 Varnish 缓存，php captcha 总是会因为错误的代码输入而出错，所以 captcha 根本不起作用。它确实显示代码图像，但是当输入代码时它返回错误。

有趣的是，当我禁用 Varnish 时，验证码会顺利运行。任何想法，是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:35:43.690

很可能您生成验证码的验证码页面被缓存，导致它每次都为用户提供相同的验证码。通过发送正确的 no-cache/0 ttl 标头使该页面不可缓存。

# java - 制作固定格式文件

> ID：12346908
> 
> 赞同：0
> 
> 时间：2012-09-10T07:17:21.143
> 
> 标签：java, string, file, java-io

我有一个包含 50000 行的输入文件。它应该是固定格式（30 个字符）。但输入是字符串。

例如

```
This is line one. 
This is line one and complete.
This is line empty. 
```

第一行是 17 个字符。第二行是 30 个字符。第三行是 20 个字符。

在我的输入文件中，一旦该行结束，就会出现换行符。

但是，我希望换行符恰好位于第 31 位。因此，如果一行短于 30 个字符，则应填充空格以使其成为 30 个字符的行。

如何为这个巨大的输入文件执行此操作？

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:23:50.190

[填充字符串](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/StringUtils.html#rightPad%28java.lang.String,%20int,%20char%29)还不够吗？

# sqlite - CREATE TABLE 查询崩溃

> ID：12346909
> 
> 赞同：0
> 
> 时间：2012-09-10T07:17:22.893
> 
> 标签：sqlite

我想创建一个包含 2 个唯一数字字段的表。这是我尝试的查询：

```
CREATE TABLE Favorite {
Indexx INTEGER,
Numberr INTEGER,
UNIQUE(Indexx,Numberr)
} 
```

但它崩溃了..这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:19:48.053

使用`(`and `)`，而不是[文档](https://www.sqlite.org/lang_createtable.html)中描述的`{`and 。`}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:20:54.633

```
CREATE TABLE Favorite (
Indexx INTEGER,
Numberr INTEGER,
UNIQUE(Indexx,Numberr)
) 
```

这应该可以解决您的问题。是`{`和`}`括号导致了问题。

# sql-server - 如何使用 SQL Server 查找与表关联的所有触发器？

> ID：12346914
> 
> 赞同：48
> 
> 时间：2012-09-10T07:17:38.820
> 
> 标签：sql-server, sql-server-2008

*我在SQL Server*中为表创建了一个触发器，它对我有用。

我的问题是：如何找到并修改它？

我使用此查询来查找我的触发器：

```
select * from sys.triggers 
```

这会找到所有触发器，但是如何打开它并更改触发器？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-10T07:28:22.860

您可以使用 SSMS 简单地做到这一点。只需转到您的表名并展开触发器节点即可查看与该表关联的触发器列表。右键单击以修改触发器。 ![在此处输入图像描述](../Images/2df8ec7d008035efadffaa25d37e3ad7.png)

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-09-10T07:29:13.017

```
select so.name, text
from sysobjects so, syscomments sc
where type = 'TR'
and so.id = sc.id
and text like '%YourTableName%' 
```

这样，您可以列出与给定表关联的所有触发器。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-07-08T12:34:18.410

这可能有用

```
SELECT 
 t.name AS TableName,
 tr.name AS TriggerName  
FROM sys.triggers tr
INNER JOIN sys.tables t ON t.object_id = tr.parent_id
WHERE 
t.name in ('TABLE_NAME(S)_GOES_HERE'); 
```

这样，您只需插入表的名称，查询将获取您需要的所有触发器

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-10T07:25:53.510

```
select m.definition from sys.all_sql_modules m inner join  sys.triggers t
on m.object_id = t.object_id 
```

这里只需复制定义并更改触发器。

否则，您可以转到 SSMS 并展开您的数据库，然后在可编程性下展开数据库触发器，然后右键单击特定触发器并单击修改，您也可以更改。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-09-21T10:03:14.697

使用 sp_helptrigger 查找关联表的触发器列表

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-08-31T13:16:48.570

**在表上查找触发器：**

```
select so.name, text
from sysobjects so, syscomments sc
where type = 'TR'
and so.id = sc.id
and text like '%TableName%' 
```

**并且您可以找到具有表参考的存储过程：**

```
SELECT Name
FROM sys.procedures
WHERE OBJECT_DEFINITION(OBJECT_ID) LIKE '%yourtablename%' 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-10T07:29:08.507

经过

[需要用表名和表的模式列出 SQL Server 数据库中的所有触发器](https://stackoverflow.com/questions/4305691/need-to-list-all-triggers-in-sql-server-database-with-table-name-and-tables-sch)

此 URL 具有一组查询，您可以通过这些查询获取与特定表关联的触发器列表。

我相信您正在使用 sqlserver 以下是获取修改触发器的步骤

**修改触发器**

1.  展开一个服务器组，然后展开一个服务器。

2.  展开数据库，展开包含触发器的表所属的数据库，然后单击表。

3.  在详细信息窗格中，右键单击触发器所在的表，指向所有任务，然后单击管理触发器。

4.  在名称中，选择触发器的名称。

5.  根据需要更改文本字段中触发器的文本。按 CTRL+TAB 缩进 SQL Server 企业管理器触发器的文本。

6.  要检查触发器的语法，请单击检查语法。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-02-20T21:25:39.660

使用此查询，您可以在所有表​​和所有视图中找到所有触发器。

```
 ;WITH
        TableTrigger
        AS
        (
            Select 
                Object_Kind = 'Table',
                Sys.Tables.Name As TableOrView_Name , 
                Sys.Tables.Object_Id As Table_Object_Id ,
                Sys.Triggers.Name As Trigger_Name, 
                Sys.Triggers.Object_Id As Trigger_Object_Id 
            From Sys.Tables 
            INNER Join Sys.Triggers On ( Sys.Triggers.Parent_id = Sys.Tables.Object_Id )
            Where ( Sys.Tables.Is_MS_Shipped = 0 )
        ),
        ViewTrigger
        AS
        (
            Select 
                Object_Kind = 'View',
                Sys.Views.Name As TableOrView_Name , 
                Sys.Views.Object_Id As TableOrView_Object_Id ,
                Sys.Triggers.Name As Trigger_Name, 
                Sys.Triggers.Object_Id As Trigger_Object_Id 
            From Sys.Views 
            INNER Join Sys.Triggers On ( Sys.Triggers.Parent_id = Sys.Views.Object_Id )
            Where ( Sys.Views.Is_MS_Shipped = 0 )
        ),
        AllObject
        AS
        (
            SELECT * FROM TableTrigger

            Union ALL

            SELECT * FROM ViewTrigger
        )

    Select 
        * 
    From AllObject
    Order By Object_Kind, Table_Object_Id 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-28T02:11:05.003

您可以通过以下查询查看与您的数据库相关的所有触发器

```
select * from sys.triggers 
```

对于打开触发器，您可以使用以下语法

```
sp_helptext 'dbo.trg_InsertIntoUserTable' 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-02-15T23:31:59.513

```
 select o1.name as trigger_name,o2.name as table_name from sys.objects o1 
 join sys.objects o2 on 
 o1.parent_object_id=o2.object_id     
 where o1.type='TR' 
 and o2.name='my_table' 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-06-09T06:31:27.347

```
select   B.name 
from     sys.objects    A
join     sys.triggers   B
on     A.object_id    =    B.parent_id
where    A.name    ='Table_name' /*Table Name*/ 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-04-17T05:58:34.213

下面很简单的查询

```
select (select [name] from  sys.tables where [object_id] = tr.parent_id ) as TableName ,*  from sys.triggers tr 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-02-06T08:44:57.157

从 information_schema.TRIGGERS 中选择 *；

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-07-18T07:31:53.713

```
select t.name as TriggerName,m.definition,is_disabled 
from sys.all_sql_modules m 
inner join  
sys.triggers t
on m.object_id = t.object_id 
inner join sys.objects o
on o.object_id = t.parent_id
Where o.name = 'YourTableName' 
```

这将为您提供**指定表上的所有触发器**

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-03-28T09:41:16.300

**尝试使用：**

```
select * from sys.objects where type='tr' and name like '%_Insert%' 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-07-18T05:45:19.240

您可以使用 sp_helptext yourtriggername 打开触发器

# php - PHP 5.2.17：将本地时间转换为 GMT 和 GMT 到本地时间

> ID：12346917
> 
> 赞同：1
> 
> 时间：2012-09-10T07:17:53.250
> 
> 标签：php

在我的应用程序中，我只想将本地时间转换为 GMT 和 GMT 到本地时间。我有以下两种方法可以做到这一点。

```
function GmtTimeToLocalTime($date) {
    $gmt_time = date("Y-m-d H:i:s", $date);
    date_default_timezone_set("UTC");
    $timestamp_in_gmt = strtotime($gmt_time);
    date_default_timezone_set('Asia/Calcutta');
    $local_time = date("Y-m-d H:i:s", $timestamp_in_gmt);
    //date_default_timezone_set("UTC");
    return $local_time;
}

function LocalTimeToGmtTime($date) {
    $local_time = date("Y-m-d H:i:s", $date);
    date_default_timezone_set('Asia/Calcutta');
    $timestamp_in_localtime = strtotime($local_time);
    date_default_timezone_set("UTC");
    $gmt_time = date("Y-m-d H:i:s", $timestamp_in_localtime);
    //date_default_timezone_set('Asia/Calcutta');
    return $gmt_time;
} 
```

但是我得到了所有输入的这个日期 1970-01-01。

请给我正确的方法。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:23:06.347

也许如果您尝试使用 DateTime 对象，您会得到更好的结果：

```
<?php
 function GmtTimeToLocalTime($time) {
    $date =  new DateTime(date('Y-m-d h:i:s',$time),new DateTimezone('UTC'));
    $date->setTimezone(new \DateTimezone('Asia/Calcutta'));
    return $date->format("Y-m-d H:i:s");
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T07:20:55.763

一个快捷方式应该是查看[DateTime](http://php.net/manual/fr/class.datetime.php)并用于`DateTime::setTimezone`将时区从 GMT 修改为本地时间，反之亦然。

编辑：当然，您可以使用您的时间戳填充此 DateTime`DateTime::setTimestamp`或`DateTime::createFromFormat`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-01T09:31:31.797

在以下函数中传递 latlong 以获取时区。

```
function getTimezoneGeo($latForGeo, $lngForGeo) {
        $json = file_get_contents("http://api.geonames.org/timezoneJSON?lat=".$latForGeo."&lng=".$lngForGeo."&username=demo");
        $data = json_decode($json);
        $tzone=$data->timezoneId;
        return $tzone;
    } 
```

# css - css中的2类样式声明不起作用

> ID：12346921
> 
> 赞同：-1
> 
> 时间：2012-09-10T07:18:10.930
> 
> 标签：css, class

我想使用 CSS 来设置两个不同的输入样式，但在我的 CSS 文件中，两个类只使用一个声明。这是我尝试过的

HTML：

```
<input type="text" name="data_start" id="data_start" class="data_start" />
<input type="text" name="data_end" id="data_end" class="data_end" /> 
```

CSS：

```
.data_start .data_end { width:68px; margin-left:5px; } 
```

如果我使用上面的代码，我的输入不会得到样式，但如果我在我的 CSS 文件中执行以下操作，它将起作用：

```
.data_start { width:68px; margin-left:5px; }
.data_end { width:68px; margin-left:5px; } 
```

有人可以解释为什么第一个 CSS 语句不起作用吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T07:20:15.120

`.data_start .data_end`表示元素`.data_end` *中*的`.data_start`元素。

`.data_start, .data_end`表示它适用于`.data_start`和`.data_end`元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T07:20:51.553

因为你做错了什么：

```
.data_start .data_end {width:68px;margin-left:5px;} 
```

就是说：搜索`.data_end`里面`.data_start.`

```
.data_start, .data_end {width:68px;margin-left:5px;} 
```

是说搜索`.data_start`或`.data_end`，看逗号，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T07:20:41.737

.data_start, .data_end {width:68px;margin-left:5px;} 你好，

您需要添加“，”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T07:21:22.110

你必须用逗号分隔两个`.data_start`AND`.data_end {width:68px;margin-left:5px;}`

它应该如下所示：`.data_start, .data_end {width:68px;margin-left:5px;}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T07:22:00.567

使用逗号分隔这两个

```
.data_start, .data_end {width:68px;margin-left:5px;} 
```

# javascript - 使用 jQuery.getJSON() 获取对象

> ID：12346922
> 
> 赞同：-4
> 
> 时间：2012-09-10T07:18:19.003
> 
> 标签：javascript, jquery, json

我需要帮助。我的代码是这样的：

```
<script type="text/javascript">
$(document).ready(function () {
  var setting = {
    check: {
      enable: true
    },
    data: {
      simpleData: {
        enable: true
      }
    }
  };
  var url = "<%=path%>/manageMenu/getAllPersonTree.action";

  $.getJSON(url, function(data) {
    $.each(data, function (name, value) {
      if (name == "1") {
        $.fn.zTree.init($("#tree"), setting, value);
      }
      alert(data);
    });
  });
});
</script> 
```

结果`alert(data)`是`[object Object]`，我怎样才能得到对象的真实值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:20:27.047

检查你的对象

```
console.dir(data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:20:40.880

`alert`是一个糟糕的调试工具。它是阻塞的，这意味着您的代码将停止执​​行，直到您放弃警报。尝试`console.log(data)`改用:)

作为参考，如果您是调试 JavaScript 的新手，这是一个很好的起点；[http://fixingthesejquery.com](http://fixingthesejquery.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:21:20.060

要获取`data`对象的字符串表示，请尝试以下`JSON.stringify`方法：

```
alert(JSON.stringify(data)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T07:21:56.320

将结果分配给全局变量（例如，在 'var url=...' 之后声明一个变量，然后将数据分配给该变量）。然后您可以使用 Firebug，它会向您显示您的对象（DOM 选项卡），您可以浏览它们并查看所有要查看的内容。

# mfc - Outlook 联系人“文件为”字段值

> ID：12346924
> 
> 赞同：0
> 
> 时间：2012-09-10T07:18:22.347
> 
> 标签：mfc, outlook, mapi

如何以编程方式读取特定用户的 Outlook 联系人的“文件为”字段的默认设置。这与我们可以通过**文件**->**选项**->**联系人**菜单获得的信息相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:26:26.510

Check the FileAsOrder value in HKEY_CURRENT_USER\Software\Microsoft\Office\\Outlook\Contact.

0x8017: LastFirstMiddle; 0x8037: FirstMiddleLastSuffix; 0x3A16: Company; 0x8019: LastFirstMiddleCompany; 0x8018: CompanyLastFirstMiddle;

# ios - iOS 中的自动标记

> ID：12346926
> 
> 赞同：2
> 
> 时间：2012-09-10T07:18:26.357
> 
> 标签：ios, facebook, ios5, flickr

我只需要知道iOS中的照片中是否有自动标记面临的任何API？我的要求是当我们在 iPhone 中捕获图像时，我们需要自动标记来自 facebook 和 flickr 的朋友。由于我们可以从 fb 和 flickr 获取朋友列表，但我不确定如何使用这些组合的朋友列表自动标记拍摄的照片？任何指针都受到高度赞赏。

谢谢，纳文

# c# - 当列变小时调整 ListView 的大小

> ID：12346927
> 
> 赞同：0
> 
> 时间：2012-09-10T07:18:37.217
> 
> 标签：c#, wpf, xaml

我有一个列表视图，当我手动调整列宽时，整个列表视图变得更大，到目前为止一切都很好。但是当我缩小列时，列表视图仍然保持宽度。列表视图是否也可能随着列宽而缩小？

下面是一个简单的例子：

```
<Grid>
        <Grid.Resources>
            <XmlDataProvider x:Key="Data">
                <x:XData>
                    <Data xmlns="">
                        <Item ID="1"/>
                        <Item ID="2"/>
                        <Item ID="3"/>
                    </Data>
                </x:XData>
            </XmlDataProvider>
        </Grid.Resources>

        <ScrollViewer>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <ListView DataContext="{Binding Source={StaticResource Data}, XPath=/Data}"
                      ItemsSource="{Binding XPath=Item}" SelectionMode="Single">                  
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="ID" DisplayMemberBinding="{Binding XPath=@ID}"/>
                    </GridView>
                </ListView.View>
            </ListView>

            <TextBlock Text="Test" Grid.Column="1"/>
            </Grid>
        </ScrollViewer>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:22:49.117

我找到了一个解决方案，它可能不是最好的，但它对我有用。我在列之间添加了一个gridsplitter，并将列宽设置为*。

```
<Grid>
        <Grid.Resources>
            <XmlDataProvider x:Key="Data">
                <x:XData>
                    <Data xmlns="">
                        <Item ID="1"/>
                        <Item ID="2"/>
                        <Item ID="3"/>
                    </Data>
                </x:XData>
            </XmlDataProvider>
        </Grid.Resources>

        <ScrollViewer>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="3"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <ListView DataContext="{Binding Source={StaticResource Data}, XPath=/Data}"
                      ItemsSource="{Binding XPath=Item}" SelectionMode="Single">                  
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="ID" DisplayMemberBinding="{Binding XPath=@ID}"/>
                    </GridView>
                </ListView.View>
            </ListView>

            <GridSplitter Grid.Column="1" Width="3" VerticalAlignment="Stretch" HorizontalAlignment="Center" Background="Transparent" ResizeBehavior="PreviousAndNext"/>

            <TextBlock Text="Test" Grid.Column="2"/>
        </Grid>
        </ScrollViewer>
    </Grid> 
```

# android - 电池小部件在一段时间后停止更新

> ID：12346928
> 
> 赞同：1
> 
> 时间：2012-09-10T07:18:37.587
> 
> 标签：android, widget, battery

我正在尝试制作一个显示电池电量的电池小部件。当它启动时，它工作正常，但一段时间后，它停止工作并开始显示电池电量 0。请帮我弄清楚我错过了什么。

这是代码：

```
public class Widget extends AppWidgetProvider {
    static int level;
static int powers;
AppWidgetManager ap;

@Override
public void onReceive(final Context context, Intent intent) {
    // TODO Auto-generated method stub
    super.onReceive(context, intent);

    System.out.println(intent.getAction());

    if (intent.getAction().equalsIgnoreCase(Intent.ACTION_BATTERY_CHANGED)) {

        int rawlevel = intent.getIntExtra("level", -1);
        int scale = intent.getIntExtra("scale", -1);

        powers = intent.getIntExtra("plugged", -1);

        level = -1;
        if (rawlevel >= 0 && scale > 0) {
            level = (rawlevel * 100) / scale;
        }
        onUpdatew(context);

    }
}

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    final int N = appWidgetIds.length;
    for (int i = 0; i < N; i++) {
        int appWidgetId = appWidgetIds[0];

        Intent intent = new Intent(context, xyz.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                intent, 0);

        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.widget_main);

        views.setTextViewText(R.id.txt1, level + "");
        Log.i("Power", powers + "");
        Log.i("Level", level + "");

        views.setOnClickPendingIntent(R.id.iv, pendingIntent);
        appWidgetManager.updateAppWidget(appWidgetId, views);

        super.onUpdate(context, appWidgetManager, appWidgetIds);
    }

}

@Override
public void onEnabled(Context context) {
    // TODO Auto-generated method stub
    System.out.println(context.getApplicationContext().registerReceiver(
            this, new IntentFilter(Intent.ACTION_BATTERY_CHANGED)));
    onUpdatew(context);
    super.onEnabled(context);
}

public void onUpdatew(Context context) {
    RemoteViews views = new RemoteViews(context.getPackageName(),
            R.layout.widget_main);

    views.setTextViewText(R.id.txt1, level + "");

    AppWidgetManager myManager = AppWidgetManager.getInstance(context);
    ComponentName myName = new ComponentName(context, Widget.class);
    myManager.updateAppWidget(myName, views);

}} 
```

# android - “响应不包含内容类型”

> ID：12346930
> 
> 赞同：0
> 
> 时间：2012-09-10T07:19:00.100
> 
> 标签：android

“响应不包含内容类型”？？

在这里，我正在我的应用程序中建立一个连接以获取 XML，例如：

```
 try {

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(uri1);

        if(list!=null)
        {
        UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(list);

        httpPost.setEntity(formEntity);
        }
         URI uri=httpPost.getURI();
        HttpResponse httpResponse = httpClient.execute(httpPost);

        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
              sb.append(line + NL);
        }
        in.close();

        result = sb.toString();

}
    catch(UnsupportedEncodingException e)
    {
        String err = (e.getMessage()==null)?"Cant connect to server":e.getMessage();
        Log.e("Network Error:",err); 
    }
    catch (MalformedURLException e) {
        String err = (e.getMessage()==null)?"Malformed Exception":e.getMessage();
        Log.e("Malformed Exception:",err); 

     } 
     catch(Exception ex)
     {
         Log.i("Exception,ex", ex.getMessage());
         String err = (ex.getMessage()==null)?"NetworkConnectionException":ex.getMessage();
         Log.e("NetworkConnectionException:",err); 
     }
    finally {
        if (in != null) {
            try {
                    in.close();
             } catch (Exception ex) {
                 String err = (ex.getMessage()==null)?"Excepion":ex.getMessage();
                 Log.e("Exception:",err); 
            }
        }

     }

    return result; 
```

我在这里使用的 URL 是一个带有 RSS 源的博客 URL

并且作为响应，错误是：“响应不包含内容类型”或“内容已被使用”

我已经尝试了一切但仍然没有成功..请帮助

[已编辑]：获取 XML 的正常 URL 工作正常，但是这个博客 URL 给了我这个错误

# vim - 如何添加 vim 键盘映射

> ID：12346937
> 
> 赞同：2
> 
> 时间：2012-09-10T07:19:43.203
> 
> 标签：vim, keymapping

在编程时，我经常使用以下两行：

```
sprintf(buff,"%s", __func__);

putrsUART(buff); 
```

是否可以设置任何键盘快捷键来插入这两行？例如，当我在命令模式下键入 \sp 时，这些函数会添加到我文件中的光标位置。这可能吗？如果是这样，我如何映射我的键？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T08:59:50.763

您可以使用为此设计的*缩写。*

```
:abbr spb sprintf(buff,"%s", __func__);
:abbr uart putrsUART(buff); 
```

用于`:help abbr`血淋淋的细节。请注意，您需要在缩写形式之后键入另一个字符，以便 vim 识别它们。这对于这些来说很自然，因为您将键入 ENTER 作为下一个字符。也可以输入多行缩写。只需`<CR>`在您想要换行的地方使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:04:50.073

这是正常模式的简单映射，可让您点击`\sp`（除非您已重新映射领导者，在这种情况下使用它而不是`\`）以插入 sprintf 语句。

```
map <Leader>sp isprintf(buff,"%s", __func__);<Esc> 
```

话虽如此，我认为缩写是这里的方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T10:46:48.063

如前所述，*缩写*（我将其限制为插入模式 ( `:iabbr`)，因为您可能在命令行中不需要它们）最适合简单的扩展；您也可以仅为某些文件类型定义它们（通过`:iabbr <buffer> ...`）。

你`__func__`看起来像一个模板参数，你每次都需要调整。您不能通过缩写来做到这一点，但有各种插件（许多受 TextMate 编辑器中的功能启发）提供模板插入和参数扩展和一些高级功能。查看*snipMate*、*xptemplate*或*UltiSnips 之一*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T07:25:09.677

尝试使用 snip-Mate 插入常用的代码片段。[http://www.vim.org/scripts/script.php?script_id=2540](http://www.vim.org/scripts/script.php?script_id=2540)

* * *

回答错误，抱歉：

在你的 vimrc 中试试这个：

```
map <c-w> :sprintf(buff,"%s",func)<cr> 
```

这意味着映射到 Ctrl-W。

# iphone - Iphone 以编程方式获取照片分辨率

> ID：12346943
> 
> 赞同：0
> 
> 时间：2012-09-10T07:20:01.247
> 
> 标签：iphone, ios, uiimagepickercontroller, uidevice

有一种方法可以以编程方式获取用 iphone 拍摄的照片的尺寸吗？我想直接获取尺寸而不通过模型版本，因此此解决方案无效：

检查型号版本-> 编写包含每个 iphone 型号尺寸的字典 -> 获取正确的索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-11T23:28:56.267

试试这个代码以获得最大的相机分辨率：

```
- (CMVideoDimensions) getCameraMaxStillImageResolution:(AVCaptureDevicePosition) cameraPosition {

    CMVideoDimensions max_resolution;
    max_resolution.width = 0;
    max_resolution.height = 0;

    AVCaptureDevice *captureDevice = nil;

    NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
    for (AVCaptureDevice *device in devices) {
        if ([device position] == cameraPosition) {
            captureDevice = device;
            break;
        }
    }
    if (captureDevice == nil) {
        return max_resolution;
    }

    NSArray* availFormats=captureDevice.formats;

    for (AVCaptureDeviceFormat* format in availFormats) {
        CMVideoDimensions resolution = format.highResolutionStillImageDimensions;
        int w = resolution.width;
        int h = resolution.height;
        if ((w * h) > (max_resolution.width * max_resolution.height)) {
            max_resolution.width = w;
            max_resolution.height = h;
        }
    }

    return max_resolution;
}

- (void) printCamerasInfo {
    CMVideoDimensions res;
    res = [self getCameraMaxStillImageResolution:AVCaptureDevicePositionBack];
    NSLog(@" Back  Camera max Image resolution: %d x %d", res.width, res.height);
    res = [self getCameraMaxStillImageResolution:AVCaptureDevicePositionFront];
    NSLog(@" Front Camera max Image resolution: %d x %d", res.width, res.height);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:23:04.983

当你拍照时，你会得到一个 UIImage。

UIImage 对象有一个 -(CGSize)size 方法，它以点为单位返回图像的尺寸。您应该将其乘以它的 scale 属性以获取像素。

[资源](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIImage_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIImage)

专业提示：阅读文档。

# ruby-on-rails - 当我从 sql 文件插入数据时，我们可以将所有模型验证都做假吗？

> ID：12346954
> 
> 赞同：1
> 
> 时间：2012-09-10T07:20:38.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在构建一个应用程序，其中我使用 sql 转储文件 (<<*.sql) 填充数据库。从 Sql 文件插入数据时，我希望模型验证为 false。怎么可能？

前任..

## 用户表

姓名 | 电子邮件

* * *

用户表 << users.sql

user.rb(model) validate_presence_of :email

当我从 sql 文件插入数据时，想要做所有的模型验证错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:46:42.167

如果您正在从 SQL 文件加载数据（例如`mysql < dump.sql`，在命令行中使用类似的东西），那么您的验证将不适用。只有当您使用 ActiveRecord（例如，使用调用模型`save`实例的Ruby 脚本`User`）时，验证才适用。

如果您发现不使用 ActiveRecord 就无法加载数据，那么问题可能是您的数据库架构不允许`NULL`某些列中的值。

# google-cloud-messaging - GCM 是否适用于 android 2.3 平台？

> ID：12346957
> 
> 赞同：1
> 
> 时间：2012-09-10T07:20:47.963
> 
> 标签：google-cloud-messaging

我已经使用 GCM 创建了一个应用程序，它在 Android 平台 4.1 和 4.03 上正常工作（即获取一个 RegId 并在我的服务器中注册自己，甚至可以接收 GCM），但是当我启动 android 2.3 的模拟器（API 10）然后应用程序已安装但从未注册 IE 永远不会获得 RegId。当我第一次启动（安装）应用程序时，它会收到一条 GCM 消息，我不明白它来自哪里，但我可以看到该设备未在我的服务器中注册。我还使用了带有 2.3.3 android 软件的 HTC 手机，结果仍然相同。任何人都可以看到问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T13:21:49.320

在模拟器上它通常不应该工作，因为它没有与设备绑定的谷歌帐户。设备需要有一个谷歌帐户和安装谷歌播放来注册一个ID。

另一方面，电话应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:33:36.780

GCM 将从 Android 2.2 开始工作。请参考本教程，它可能会对您有所帮助，

[http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/](http://androidv5.wordpress.com/2012/08/15/how-to-implement-google-cloud-messaging/)

这对我来说可以。

# php - 获取最顶层的父母 ID，而不考虑孩子的 ID

> ID：12346961
> 
> 赞同：1
> 
> 时间：2012-09-10T07:20:57.497
> 
> 标签：php, mysql, loops, mysqli, parent-child

我有一个表（例如名称是“page”），其中每一行都是另一行的子行，如下所示（参见 HTML 部分）：

[http://jsfiddle.net/Fuqrb/](http://jsfiddle.net/Fuqrb/)

我想通过使用孩子的 id 找到最上面的父母的 id。例如，我们得到一个 URL 变量作为最底层孩子的 id：

```
http://www.website.com/page.php?p=6 
```

然后我们将 URL 变量存储到一个变量中：

```
$p = $_GET['p']; 
```

要获得最顶层的父母的 id，我必须多次使用查询功能。例如：

```
if($result = $mysqli->query("SELECT * FROM page WHERE id='$p' LIMIT 1"))
{
    while($row = $result->fetch_array())
    {
        $parent = $row["parent"];
    }
}

if($result = $mysqli->query("SELECT * FROM page WHERE id='$parent' LIMIT 1"))
{
    while($row = $result->fetch_array())
    {
        $parent1 = $row["parent"];
    }
}

if($result = $mysqli->query("SELECT * FROM page WHERE id='$parent1' LIMIT 1"))
{
    while($row = $result->fetch_array())
    {
        $parent2 = $row["parent"];
    }
}

if($result = $mysqli->query("SELECT * FROM page WHERE id='$parent2' LIMIT 1"))
{
    while($row = $result->fetch_array())
    {
        $id = $row["id"];
    }
} 
```

这种方式是无效的，因为如果我得到另一个 URL 变量作为更高/更低级别的另一个孩子的 id，这将不起作用。

无论孩子的身份如何，如何动态获取最顶层父母的身份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:30:13.863

```
DELIMITER $$

CREATE FUNCTION `fnGetRootParent`(
    page INT
) RETURNS int(11)
    READS SQL DATA
    DETERMINISTIC
BEGIN
    DECLARE _parent INT;
    DECLARE _result INT;

    SET _parent = page;

    my_loop: LOOP
        SELECT 
             p.id
            ,p.parent
        INTO 
             _result
            ,_parent
        FROM page p
        WHERE id = _parent;

        IF (_parent = 0) OR (_parent = _result) THEN
            LEAVE my_loop;
        END IF;
    END LOOP my_loop;

    RETURN _result;
END 
```

`SELECT fnGetRootParent(213);`

# linux - linux上的unix netcat实用程序，检查是否建立了连接

> ID：12346964
> 
> 赞同：1
> 
> 时间：2012-09-10T07:21:21.657
> 
> 标签：linux, sockets, netcat

我在 linux 上使用 netcat 实用程序从 Windows 机器上的程序接收输出。我的问题是 Windows 机器上的程序并不总是给出输出。

如何检查是否已与 netcat 建立连接？

到目前为止我正在做的是“ `nc -l -v 9103 > output`”然后我检查输出的大小，这带来的问题是netcat仅在达到某个缓冲区大小或遇到新行字符后才写入文件，所以在某些情况下即使已建立连接，文件大小被检测为零。

我如何检查是否有人与 netcat 建立了连接。

我尝试使用

```
nc -l -v -e someprog.exe 9103 > output 
```

但我的 netcat 似乎不支持这个

以下是我的选择

```
 $ nc -h
usage: nc [-46DdhklnrStUuvzC] [-i interval] [-p source_port]
          [-s source_ip_address] [-T ToS] [-w timeout] [-X proxy_version]
          [-x proxy_address[:port]] [hostname] [port[s]]
        Command Summary:
                -4              Use IPv4
                -6              Use IPv6
                -D              Enable the debug socket option
                -d              Detach from stdin
                -h              This help text
                -i secs         Delay interval for lines sent, ports scanned
                -k              Keep inbound sockets open for multiple connects
                -l              Listen mode, for inbound connects
                -n              Suppress name/port resolutions
                -p port         Specify local port for remote connects
                -r              Randomize remote ports
                -s addr         Local source address
                -T ToS          Set IP Type of Service
                -C              Send CRLF as line-ending
                -t              Answer TELNET negotiation
                -U              Use UNIX domain socket
                -u              UDP mode
                -v              Verbose
                -w secs         Timeout for connects and final net reads
                -X proto        Proxy protocol: "4", "5" (SOCKS) or "connect"
                -x addr[:port]  Specify proxy address and port
                -z              Zero-I/O mode [used for scanning]
        Port numbers can be individual or ranges: lo-hi [inclusive] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:36:21.847

详细模式将写入到 stderr 的连接，您可以将 stderr 重定向到文件，详细日志有类似 connect to [xxx] from [xxxx]

尝试

```
nc -l -v -p 9103 -k 1> output 2>connect.log 
```

并监控 connect.log 的连接性

如果您不使用 -k ，netcat 在第一次连接后退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:42:58.350

如果您可以升级您的 netcat 副本：现代版本（1.10，一个）可以选择在连接时执行程序（或 shell 命令）。否则，您可以使 netcat 认为它在终端中运行（以禁用 stdout 的缓冲），例如使用`script`（它只是将 stdin/stdout/stderr 上的所有内容保存在给定文件中）。或使用`screen`和的日志记录功能`tmux`。

# flexslider - Flexslider，没有快速滚动开始

> ID：12346966
> 
> 赞同：1
> 
> 时间：2012-09-10T07:21:25.233
> 
> 标签：flexslider

我使用“FLexslider - Jquery”插件。

当animationLoop 为真并且到达幻灯片的末尾时，我不喜欢它，它会快速滚动到开头。我希望它保持一个连续的循环。我没有看到这个选项。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:28:07.843

根据您发帖的日期，我们可以假设您使用的是 Flexslider2 吗？如果你是，选项 animationLoop 应该已经设置为 TRUE 并且应该克隆你的第一张和最后一张幻灯片，所以它总是循环而不是“重置”回到开头。你能把你的代码粘贴到你拥有的东西上，然后从那里开始。

前任：

```
$('.flexslider').flexslider({
  animation: "slide",
  slideshow: false,
  animationLoop: false,
  video: true,
  controlsContainer: '.flex-nav',
  manualControls: ".flex-nav_tab li",
  start: function() {
    console.log('changing slide')
  }
}); 
```

# sql - 最近6个月的退货记录

> ID：12346969
> 
> 赞同：0
> 
> 时间：2012-09-10T07:21:48.257
> 
> 标签：sql, sql-server, tsql

下面是我的 SQL 语句

```
DECLARE @dStart datetime ,
    @dEnd  datetime

SET @dEnd = GETDATE()
SET @dStart = DATEADD(mm, -6, @dEnd)

Select * from MyTable
Where TheDate Between @dStart AND @dEnd 
```

这将返回今天减去 6 个月数据的所有记录。

但我想要这个月的数据加上前 5 个月的数据。

目前它也将从 3 月开始返回记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T07:30:03.257

代替

```
DATEADD(mm, -6, @dEnd) 
```

你可能会使用

```
dateadd(month, datediff(month, 0, @dEnd) - 5, 0) 
```

这会将日期截断为当月的第一天并从中减去五个月。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T07:35:11.403

```
declare @date datetime
declare @months int
declare @year int
set @months=month(GETDATE())
set @year=month(GETDATE())
set @date=getdate()
(Select * from MyTable Where TheDate Between (01/@months-5/@year) AND (01/@months/@year) ) union (Select * from MyTable Where TheDate Between (01/@months/@year) AND @date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T07:36:14.373

```
DECLARE @dStart datetime ,
    @dEnd  datetime

SET @dEnd = GETDATE()
SET @dStart = DATEADD(mm, -4, @dEnd) 
```

# c# - IOrderedQueryable 和采取（）

> ID：12346973
> 
> 赞同：-2
> 
> 时间：2012-09-10T07:21:58.303
> 
> 标签：c#, linq, linq-to-sql

我需要的是订购 IQueriable（LINQ to SQL 方法的结果）并在定义*count时返回第一个**count*元素。我使用以下代码：

 *```
IOrderedQueryable<MainLog> list = logs.OrderByDescending(item => item.Time);
if (count > 0) list = list.Take(count).OrderByDescending(item=>item.Time); 
```

它工作正常，但我不喜欢两次调用 OrderByDescending。我可以在不破坏订单且不重复订购的情况下让它变得更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:24:26.187

绝对不需要第二个`OrderByDescending`。只需将其删除：

```
IQueryable<MainLog> list = logs.OrderByDescending(item => item.Time); 
if (count > 0)
    list = list.Take(count); 
```*

# email - 如何创建内网文档搜索

> ID：12346981
> 
> 赞同：1
> 
> 时间：2012-09-10T07:22:44.993
> 
> 标签：email, search, search-engine, wiki

我正在尝试将以下系统放在一起，我想要一些建议，从“不要这样做”到“只需安装 X 就可以了”

第 1 阶段：在某处有一个专门用于存放文档的文件夹。团队中的任何人都可以将文件放在那里、编辑文件、创建文件夹等。让这个位置被搜索引擎索引，例如 Solr，因此可以访问。问：我是否需要一些与搜索引擎分开的特殊索引/爬网系统？

第 2 阶段：有一个机器人邮件用户，每当它收到电子邮件时，它都会将其存储在所述文件夹中。问：这很容易做到吗？我们使用 Outlook Exchange，但如果它使事情变得更容易，我们也有 Linux 服务器。

阶段 3：在存储电子邮件时添加一些逻辑：例如将相同主题的电子邮件放在同一个文件夹中。问：你是怎么做到的？

谢谢

# c# - windows phone 中的数字仪表控制

> ID：12346982
> 
> 赞同：0
> 
> 时间：2012-09-10T07:22:52.237
> 
> 标签：c#, xaml, windows-phone-7.1

我正计划在 Windows Phone 7 中开发数字仪表控件。我怎样才能基本上基于计时器显示数字数字？.. 任何人都可以帮助我设计吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:24:00.737

您可以在项目中嵌入数字字体，例如在字体文件夹下，并可以按如下方式使用它...

```
FontFamily="/fonts/digitalfontfile.ttf#digitalfontname" 
```

其中 digitalfontfile.ttf 是您嵌入的 ttf 字体文件，digitalfontname 是字体名称...

# ruby - Ruby Regex 匹配字符串的多个部分

> ID：12346988
> 
> 赞同：0
> 
> 时间：2012-09-10T07:23:08.463
> 
> 标签：ruby, regex

*使用 Ruby：ruby 1.9.3dev（2011-09-23 修订版 33323）[i686-linux]*

我有以下字符串：

```
str = 'Message relates to activity <a href="/activities/35">TU4 Sep 5 Activity 1</a> <img src="/images/layout/placeholder.png" width="222" height="149"/><br/><br/>First question from Manager on TU4 Sep 5 Activity 1.' 
```

我想匹配以下内容：

> 35（一个数字，它是 href 属性值的一部分）
> TU4 Sep 5 活动（标签的文本）经理在 TU4 Sep 5 Activity 1 上提出的第一个问题。（最后一个标签
> 之后的剩余文本）`<br/><br/>`

为了达到同样的效果，我编写了以下正则表达式

```
result = str.match(/<a href="\/activities\/(?<activity_id>\d+)">(?<activity_title>.*)<\/a>.*<br\/><br\/>(?<message>.*)/) 
```

这会产生以下结果：

```
#<MatchData "<a href=\"/activities/35\">TU4 Sep 5 Activity 1</a> <img src=\"/images/layout/placeholder.png\" width=\"222\" height=\"149\"/><br/><br/>First question from Manager on TU4 Sep 5 Activity 1." 
         activity_id:"35" 
         activity_title:"TU4 Sep 5 Activity 1" 
         message:"First question from Manager on TU4 Sep 5 Activity 1."> 
```

但我想这不是有效的。是否有可能在匹配的结果中仅返回所需的值（如上面我想要匹配的内容所述），并且从匹配的结果中排除以下值：

```
"<a href=\"/activities/35\">TU4 Sep 5 Activity 1</a> <img src=\"/images/layout/placeholder.png\" width=\"222\" height=\"149\"/><br/><br/>First question from Manager on TU4 Sep 5 Activity 1." 
```

谢谢，

吉涅什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:20:45.223

执行此操作的适当方法是不使用正则表达式。相反，请使用 Nokogiri 库轻松解析您的 html：

```
require 'nokogiri'

doc = Nokogiri::HTML.parse(str)
activity_id = doc.css('[href^="/activities"]').attr('href').value[/\d+$/]
activity_title = doc.css('[href^="/activities"]')[0].inner_text
message = doc.search("//text()").last 
```

这将完全按照您的正则表达式尝试进行，随机失败的可能性要低得多。

# internet-explorer - IE 中的 Slickgrid 渲染问题

> ID：12346993
> 
> 赞同：0
> 
> 时间：2012-09-10T07:23:32.460
> 
> 标签：internet-explorer, slickgrid

我在 IE9 中遇到了 Slickgrid 的渲染问题。（所有其他浏览器都可以正常工作）。有点难以解释，所以我截了一些截图。

1.）我有一个标准的 Slickgrid 显示大量数据：

![滑动网格工作](../Images/b8986ffb8f1ebaa2de7a6d64c405c7e7.png)

一切看起来都很完美（在 IE9 中也是如此）。

我实现的是，当表格的整体宽度低于 600 像素时，它将改变其显示样式。我将列模型更改为两列，并自己为这些列实现了格式化程序。如果我使网格更小，它看起来像这样：

![在此处输入图像描述](../Images/d6c251de465a6935b30899749ef29af8.png)

这*看起来*不错，但它们应该看起来都像第一个条目（就像在任何其他浏览器中一样）。接下来我注意到的是一些条目比其他条目“更大胆”。好像他们被画了两次或什么的。

如果我将宽度改回正常，问题会变得更糟：

![在此处输入图像描述](../Images/89df061f68d1ed0bc3e233996e8111a9.png)

似乎旧的（较薄的）表格样式（或其中的某些部分）仍呈现在表格中。

每次我现在从薄变宽或变回来时，情况都会变得更糟：

![在此处输入图像描述](../Images/8117f33be5495306cc938bd8327e483d.png)

在我的代码的某些部分，我实例化了这样的表：

```
this.grid = grid = new Slick.Grid(this.el, dataView, columns, options);
grid.setSelectionModel(new Slick.RowSelectionModel()); 
```

网格保存在一个模块中，并且该实例化代码仅在模块启动时执行*一次。*

在那之后，在那个模块上有一个渲染方法来处理网格：

```
render : function() {

    var data = this.model.get('data'),      
        dataView = this.options.dataView,
        columns = [],
        tableData = [],
        columnModel = data[0].columnModel ? data[0].columnModel : null,
        k, r, u, v, d;              
        //renderMode 0 = wide, 1 = compact
    if(this.renderMode === 0){
        this.grid.setOptions({
            rowHeight: this.grid.otrStandardRowHeight
        });
        //is there a columnModel received from the server?
        if(columnModel != null){
            var modelColumns = columnModel.columns;
            /* go through the columns of the columnModel and find the corresponding column
             * in the data columns to keep the order of the columnModel. Also add the column width. 
             * */
            for (u = 0; u < modelColumns.length; u++){
                //get the index of the modelColumn's field value inside the data columns array
                var idx = $us.indexOf(data[0].columns.keys, modelColumns[u].field);
                if(idx >= 0){
                    columns.push( {
                        otrColumnIndex : idx + 1,
                        id : data[0].columns.keys[idx],
                        field : data[0].columns.keys[idx],
                        name : data[0].columns.labels[idx],
                        width: modelColumns[u].width,
                        sortable : true
                    } );
                }
            }
        }else{
            //if there is no column model add all columns in the order they arrive
            for (k = 0, size = data[0].columns.keys.length; k < size; k++) {                
                columns.push( {
                    otrColumnIndex : k + 1,
                    id : data[0].columns.keys[k],
                    field : data[0].columns.keys[k],
                    name : data[0].columns.labels[k],
                    sortable : true
                } );
            }
        }                       
    }else if(this.renderMode === 1){            
        this.grid.setOptions({
            rowHeight: 78
        });
        columns.push({id: "dataCell",
                      name: "Beschreibung",
                      formatter: this.getRenderFunction(data, 0),
                      width: 300,
                      cssClass: "compactCell",},
                      {id: "dateCell",
                       name: "Datum",
                       width: 150,
                       formatter: this.getRenderFunction(data, 1),
                       cssClass: "compactCell"} 
                     );

    }

    //add rowdata to the table  
    var nextIndex = 0;
    for(d = 0; d < data.length; d++){
        nextIndex = data[d].nextIndex ? data[d].nextIndex : nextIndex;
        for (r = 0, size = data[d].rows.length ; r < size; r++) {
            var rowData = {};
            rowData.id = data[d].rows[r].key;
            for (v = 0; v < data[d].rows[r].values.length; v++) {
                rowData[data[d].columns.keys[v]] = data[d].rows[r].values[v];               
            }
            tableData.push(rowData);
        }
    }

    this.grid.setColumns(columns);
    //this.grid.setData(tableData);
    dataView.beginUpdate();
    dataView.setItems(tableData);
    dataView.endUpdate();       
    var range = this.grid.getRenderedRange();
    var viewport = this.grid.getViewport();
    var diff = viewport.bottom - range.bottom;

    //if there is more space to fill with rows, retrieve the next page
    if(diff > 0){                               
        this.trigger("retrieveNextPage", nextIndex);
    }

} 
```

*编辑*：这是一个显示问题的jsfiddle：

[http://jsfiddle.net/EmSPU/26/](http://jsfiddle.net/EmSPU/26/)

将问题与实际应用程序隔离开来并不容易，因此您必须点击“switchMode”按钮，该按钮的作用与应用程序中的调整大小事件完全相同。

再说一遍：这一切都在 FF、Chrome 和 Safari 中运行，就像一个魅力！

对此有任何想法吗？提前感谢您阅读这个长问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T07:14:00.933

答案非常简单。`</p>`自定义格式化程序函数中缺少结束标记。这会在 IE 中产生这种影响，因为它无法正确删除旧单元格。其他浏览器工作正常，因为它们自己纠正了这些错误。

# wpf - 如何从另一个 .xaml 页面设置 MainWindow 控件（如 stackpanel）的可见性

> ID：12346999
> 
> 赞同：0
> 
> 时间：2012-09-10T07:23:57.100
> 
> 标签：wpf, mvvm

我正在以 MVVM 模式创建一个示例 WPF 应用程序来实现母版页内容页面概念。在我的 wpf 应用程序中，我有一个 MainWindow 页面和 3 个用户控件，例如 Page1、Page2 和 Page3。

MainWindow.xaml 包含一个网格、一个堆栈面板和一个框架。

MainWindow.xaml 中的网格包含一个图像控件，堆栈面板包含一个 TextBlock 和 3 个按钮。

该框架首先按页面填充或加载，如下所示：

```
 // Load and show the MainWindow

        MainWindowViewModel vm = new MainWindowViewModel();
        MainWindow main = new MainWindow();
        Navigator.NavigationService = main.NavigationFrame.NavigationService;
        main.DataContext = vm;
        main.Show();

        // Load and navigate to the first page
        Page1ViewModel pagevm = new Page1ViewModel();
        Page1 p1 = new Page1();
        p1.DataContext = pagevm;
        Navigator.NavigationService.Navigate(p1); 
```

通过使用它，我能够从 page1 导航到 page2，然后从 page2 导航到 page3。

在这里，我的问题最初是堆栈面板应该在显示 page1 和 page2 时禁用。但是，当从 page2 导航到 page3 时，这意味着每当我显示 page3 时，应该启用 MainWindow 中的堆栈面板，并且按钮只能在 page3 中执行它们的点击事件。

请让我知道这个问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:23:26.653

您可以将当前页面提取到 MainWindowViewModel 并添加一个返回的属性，无论是否`StackPanel`启用：

```
MainWindowViewModel:
private Page _currentPage = null;
public Page CurrentPage
{
    get { return _currentPage; }
    set
    {
        _currentPage = value;
        Notify("CurrentPage");
        Notify("StackPanelEnabled");          
    }
}

public bool StackPanelEnabled
{
    get { return CurrentPage is Page3; }
} 
```

`Notify`是引发`PropertyChanged`事件的辅助方法。`Content`将 的属性绑定`Frame`到`CurrentPage`：

```
<Frame Content="{Binding CurrentPage}"/> 
```

用它：

```
Page1ViewModel pagevm = new Page1ViewModel();
Page1 p1 = new Page1();
p1.DataContext = pagevm;
vm.CurrentPage = p1; 
```