# StackOverflow 问答 12466000-12466999

# java - 查询数据库，重新排列，插入新表

> ID：12466000
> 
> 赞同：0
> 
> 时间：2012-09-17T19:36:41.010
> 
> 标签：java, mysql

我已经有一个包含每个用户的分数和其他统计数据的数据库。但分数没有以任何方式组织，使其可用于制作排行榜排名。

如果表格看起来像这样：

```
+----------+-------+-----+ 
| Username | Score | ... |
+----------+-------+-----+
|   UserA  | 900   | ... |
+----------+-------+-----+
|   UserB  | 200   | ... |
+----------+-------+-----+
|   UserC  | 850   | ... |
+----------+-------+-----+
|   UserD  | 450   | ... |
+----------+-------+-----+ 
```

数据库中的位置和分数没有关系。现在，我要做的是创建一个数据库查询，收集每个用户的分数，然后按分数重新排列它们。我认为这类似于 ORDER BY score DESC。

在以正确的方式对它们进行排序后，我想将新值输入到一个只有用户名和排名的表中，我可以在游戏中查询该表以告知所请求的任何给定玩家的排名。

前任：

```
+----------+------+ 
| Username | Rank |
+----------+------+
|   UserA  | 1    |
+----------+------+
|   UserC  | 2    |
+----------+------+
|   UserD  | 3    |
+----------+------+
|   UserB  | 4    |
+----------+------+ 
```

现在，如果我查询用户名 = UserA 的排名，我会得到 1

那么我的问题是什么？我如何在 java 中查询数据库的分数和用户名，然后根据数字排名而不是分数将值重新排列到一个新表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:40:53.820

在[这个线程](https://stackoverflow.com/questions/282322/sql-numbering-the-rows-returned-by-a-select-statement)中有类似的讨论。

一般来说，最好只选择按分数排序，然后将查询结果放入数组列表中。第 0 项是得分最高的人，第 1 项是得分第二的人，依此类推。

如果您确实需要在结果集中选择排名，请尝试使用链接讨论中的示例之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:43:48.880

“In Java”是您问题中唯一令人困惑的部分。你想要这样的东西：

```
CREATE TABLE leaderboard (username varchar(50), score int unsigned, rank int unsigned)

INSERT INTO leaderboard (username, score, rank) SELECT username, score, @rank:=@rank+1 FROM scores_table, (SELECT @rank:=0) as run_once order by rank desc; 
```

未经测试，但这就是概念。当需要重新计算排行榜时：

```
DELETE * from leaderboard;

INSERT INTO leaderboard (username, score, rank) SELECT username, score, @rank:=@rank+1 FROM scores_table, (SELECT @rank:=0) as run_once order by score desc; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T19:44:46.667

制作数据库，嗯，以你想要的格式返回你需要的数据：

```
set @rank = 0;
select username, @rank := @rank + 1 as rank
from user_scores
order by score desc 
```

不需要 Java 魔法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T20:29:32.997

对于特定用户，这可能有效：

```
select username, score, (select count(h.username)+1 from users u, (select username, score from users) h where u.username = 'UserG' and (h.score > u.score)) as 'rating' from users where username = 'UserG'; 
```

像 Alain 建议的那样设置变量 @rank 的问题是在重复分数的情况下，如果 2 个用户的分数为 100 怎么办？如果您需要的话，上面的查询会将它们都评为#5。

# apache - apache lucene 令牌

> ID：12466007
> 
> 赞同：3
> 
> 时间：2012-09-17T19:37:43.017
> 
> 标签：apache, lucene, indexing

我开始试验 Apache Lucene Core 4，我的问题是......假设我创建了一些文本的索引，它存储在一个名为“context”的字段中是否可以获取该字段的标记列表，那就是成功索引？我正在查看 IndexReader 和 Field，但不知道如何检索令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:58:21.927

你有两个选择：

*   您可以重新分析存储的字段，
*   或使用[术语向量](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/index/IndexReader.html#getTermVector%28int,%20java.lang.String%29)（前提是您在索引时启用了术语向量）。

# php - PHP, cURL 发布数组？

> ID：12466009
> 
> 赞同：3
> 
> 时间：2012-09-17T19:37:55.900
> 
> 标签：php, curl, libcurl

我正在尝试使用 cURL 登录。

登录页面中的 HTML 正在做一些我从未见过的事情。

```
<input type="text" name="user_session[login]"/>
<input type="password" name="user_session[password]"/> 
```

我试图：

```
user_session[login]=blablabla&user_session[password]=blablabla 
```

但什么都没有，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T00:55:18.190

确保对密钥进行 URL 编码。我不认为这些括号是安全的。PHP 会将这些参数解析为一个数组，但是如果您只是尝试模拟表单提交，那么脚本的作用并不重要。如果您将 PHP 5 函数`http_build_query`与数组一起使用，`['user_session' => ['login' => 'NAME', 'password' => 'PASS']]`它应该返回您需要的查询字符串，正确转义（可以附加到 URL 之后`?`或用作 POST 数据`curl_setopt($resource, CURL_POSTFIELDS, http_build_query($args))`）。

如果仍然不起作用，请发布整个表格；除了括号之外，您的提交可能还有其他问题。

# objective-c - 注册应用程序 viewDidAppear/etc 的通知？

> ID：12466011
> 
> 赞同：0
> 
> 时间：2012-09-17T19:37:59.597
> 
> 标签：objective-c, ios, notifications, nsnotificationcenter, nsnotifications

在 iOS 中是否可以在 AppDelegate 上注册此应用程序中发生的所有 viewDidAppear 的通知？我想注册那些为我的应用程序做一些分析处理的人，而不需要从每个 viewDidAppear 显式地触发我的类。任何建议如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:40:46.243

您必须继承 UIView 并注册通知并从该子类发布。您应用程序中的所有视图都需要是您的子类的实例。

# bash - teamocil 的 bash 完成

> ID：12466013
> 
> 赞同：1
> 
> 时间：2012-09-17T19:38:00.770
> 
> 标签：bash, bash-completion

我正在尝试为[teamocil](http://remiprev.github.com/teamocil/)定义 bash 自动完成，这样当我键入`teamocil <tab>`它时，它应该以文件夹中的文件名完成，`~/.teamocil/`而没有文件扩展名。网站上有一个例子`zsh`：

```
compctl -g '~/.teamocil/*(:t:r)' teamocil 
```

我怎么能用这个`bash`？

**编辑：**受 michael_n 回答的影响，我想出了一个单行：

```
complete -W "$(teamocil --list)" teamocil 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T03:45:41.713

这是我拥有的另一个完成脚本的通用版本，它执行类似的操作。它假定一个通用的假设命令“flist”，使用由 FLIST_DIR 定义的某些文件目录来完成命令（省略选项）。

为您的程序修改以下内容（`teamocil`），将默认目录从更改`$HOME/flist`为`$HOME/.teamocil`），定义您自己的过滤器/转换等；然后只需获取它（例如，`. ~/bin/completion/bash_completion_flist`），可选择将其添加到您现有的 bash 完成列表中。

```
# bash_completion_flist: 
#  for some hypothetical command called "flist",
#  generate completions using a directory of files

FLIST_DIR=${FLIST_DIR=:-"$HOME/flist"}

_flist_list_files() {
   ls $FLIST_DIR | sed 's/\..*//'
}

_flist() {
   local cur="${COMP_WORDS[COMP_CWORD]}"       
   COMPREPLY=()
   [[ ${cur} != -* ]] \
      && COMPREPLY=($(compgen -W "$(_flist_list_files)" -- ${cur}))
}

complete -o bashdefault -o default -o nospace -F _flist flist 2>/dev/null \
    || complete -o default -o nospace -F _flist flist 
```

笔记：

*   它可能更短，但这或多或少是更长、更复杂的完成的模板。（功能很好。）
*   实际的完成命令 ( `complete -o ...`) 在不同版本的 bash 中工作有点难。
*   如果有“。”，则后缀剥离过于简化。在文件名中，留给读者作为练习:-) 有多种方法可以做到这一点（sed、awk 等）；最好的方法是通过 bash-isms ( `base=${filename%.*}`)，但最简单的方法可以说是简单的 sed，它对文件名格式有一些假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:38:16.103

Bash 以另一种方式实现了类似的想法，因此 zsh 的命令和文件在 bash 中不起作用。但是您可以编写自己的自动完成规则。更多信息：

*   [bash 补全简介：第 1 部分](http://www.debian-administration.org/articles/316)
*   [bash 补全简介：第 2 部分](http://www.debian-administration.org/articles/317)
*   SO：[如何在bash中启用命令行开关的制表符补全？](https://stackoverflow.com/questions/777017/how-to-enable-tab-completion-of-command-line-switches-in-bash)
*   SO：[自动完成命令行参数](https://stackoverflow.com/questions/3690655/auto-complete-command-line-arguments)

# jsf-2 - 与 h:outputScript 一起使用的 cometd javascript 路径

> ID：12466014
> 
> 赞同：0
> 
> 时间：2012-09-17T19:38:00.473
> 
> 标签：jsf-2, comet, cometd

我正在尝试在我的 Web 应用程序中配置 CometD。这个 Web 应用程序是 CometD 的客户端，它使用 JSF 2.0、primefaces 3.3.1 并在 glassfish 上运行。在这个应用程序中，这个全局变量是未定义的：

```
var cometd = $.cometd; 
```

可能我的问题的根源是javascript库的链接：

```
<script type="text/javascript" src="${pageContext.request.contextPath}/jquery/jquery-1.7.2.js"></script>
<script type="text/javascript" src="${pageContext.request.contextPath}/jquery/json2.js"></script>
<script type="text/javascript" src="${pageContext.request.contextPath}/org/cometd.js"></script>
<script type="text/javascript" src="${pageContext.request.contextPath}/jquery/jquery.cometd.js"></script> 
```

我知道这是导入 javascript 文件的 JSP 方式，但我根本不知道 h:outputScript 使用哪个路径...

PS。我刚刚为这个模块添加了这个依赖：

```
 <dependency>
        <groupId>org.cometd.javascript</groupId>
        <artifactId>cometd-javascript-jquery</artifactId>
        <version>2.4.3</version>
        <type>war</type>
 </dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:48:26.250

这是我的错，我没有看到 maven 原型在项目目录中创建了所有 javascripts 文件......

# c# - 当 cpu 资源低于百分比时运行程序

> ID：12466018
> 
> 赞同：0
> 
> 时间：2012-09-17T19:38:55.910
> 
> 标签：c#

我想要一个我正在编写的程序在用户设置的某些日期以及 CPU 资源低于某个百分比时执行。现在，我正在使用任务计划程序托管包装器 (http://taskscheduler.codeplex.com/documentation) 来设置具有用户指定日期和时间的 Windows 计划任务。

但是，我无法弄清楚如何执行 CPU % 部分。甚至可以设置 Windows 计划任务来执行此操作吗？如果没有，我该怎么做？视窗服务？

# visual-studio-2010 - Visual Studio：我可以将属性表的导入设为只读吗？

> ID：12466026
> 
> 赞同：1
> 
> 时间：2012-09-17T19:39:41.890
> 
> 标签：visual-studio-2010, visual-studio, msbuild, msbuild-4.0, propertysheet

我在 Visual Studio 2010 中有一个属性表，可以导入其他一些属性表。我的属性表的导入部分如下所示：

```
 <ImportGroup Label="PropertySheets">
    <Import Project="something.props" />
    <Import Project="something.else.props" />
  </ImportGroup> 
```

我想确保添加我的属性表的人不会意外更改我包含的表的导入顺序。例如，这将是错误的：

```
 <Import Project="something.else.props" />
    <Import Project="something.props" /> 
```

我查看了 Microsoft 的网站，但找不到阻止更改订单的方法。在 Visual Studio 中，智能感知显示 Condition 和 Label for`<ImportGroup>`和 Condition、Label 和 Project for `<Import>`. 除了将文件设置为只读（因为我必须将其签入源代码管理，这不会持续），我可以在我的属性表中做些什么来防止订单被更改？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:17:31.840

ImportGroup 的 Label 属性未在 xml 架构[http://msdn.microsoft.com/en-us/library/5dy88c2e(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/5dy88c2e(v=vs.100).aspx)中定义，这真是太好了。叹...

关于问题 - 由于 msbuild 属性优先级的性质，我怀疑您是否可以制作 100% 防弹解决方案，但简单地将您自己的导入移动到 msbuild 文件的底部将保证对您的价值观有某种“保护”。

# camera - 获取具有已知位置和方向的相机正在查看的对象的 3D 位置

> ID：12466031
> 
> 赞同：3
> 
> 时间：2012-09-17T19:39:59.503
> 
> 标签：camera, position, orientation, augmented-reality, artoolkit

我正在构建一个增强现实应用程序，并且我有相机的偏航、俯仰和滚动。我想开始在 3D 环境中放置对象。我想让它在用户单击时，在相机指向的位置（2D 屏幕的中心）弹出一个 3D 点，当用户移动时，该点在 3D 空间中相应移动。相机不会改变位置，只会改变方向。是否有适当的方法来恢复该点的 3D 位置？我们可以假设所有点都与相机位置等距。

我能够为两个轴独立完成此操作（OpenGL 默认方向）。这适用于垂直轴的变化：

```
x = -sin(pitch)
y = cos(pitch)
z = 0 
```

这也适用于水平轴的变化：

```
x = 0
y = -sin(yaw)
z = cos(yaw) 
```

我在想我应该把 combine 变成：

```
x = -sin(pitch)
y = sin(yaw) * cos(pitch) 
z = cos(yaw) 
```

这似乎很接近，但并不完全正确。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:35:06.643

听起来您只想将旋转矢量（俯仰、偏航、滚动）转换为旋转矩阵。[可以在关于旋转矩阵的 Wikipedia 文章中](http://en.wikipedia.org/wiki/Rotation_matrix#General_rotations)看到转换。这个想法是，一旦您构建了矩阵，就可以简单地转换任何点。

```
final_pos = rot_mat*initial_pose 
```

其中最终和初始姿势是 3x1 向量，而 rot_mat 是 3x3 矩阵。

# jsf-2 - p:子菜单未展开

> ID：12466032
> 
> 赞同：0
> 
> 时间：2012-09-17T19:40:01.750
> 
> 标签：jsf-2, primefaces

我正在尝试但弄清楚如何使用 p:panelMenu

由于某种原因，我无法像展示示例[http://www.primefaces.org/showcase/ui/panelMenu.jsf那样扩展子菜单项](http://www.primefaces.org/showcase/ui/panelMenu.jsf)

这是我的 jsf 示例：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org    
/TR/xhtml1/DTD/xhtml1-transitional.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">
<h:head>
  </h:head>
  <h:body>
    <h:form>
        <p:panelMenu style="width:300px"> 
            <p:submenu label="Non-Ajax Menuitem"> 
                <p:menuitem value="Delete"  ajax="false" icon="ui-icon-close" /> 
            </p:submenu>   
        </p:panelMenu> 
    </h:form>
</h:body> 
```

知道我在这里缺少什么吗？

谢谢

# tfs - 管理多个团队中用户的团队成员容量

> ID：12466033
> 
> 赞同：2
> 
> 时间：2012-09-17T19:40:03.770
> 
> 标签：tfs

我们目前正在研究如何在 TFS 2012 中最好地管理我们的项目。我们计划创建**多个团队，以便管理**同一项目的并发迭代，以实现不同时发布的不同功能，所以我们做了两个团队（项目 1，项目 2）。

我们目前遇到的问题是如何在将成员分配给多个团队时管理团队成员的容量。有没有一种方法可以查看**为每个团队的所有当前迭代分配给成员的容量，**而无需在多个 sprint 之间导航？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T21:40:53.077

当前工具不支持您想要的功能，我们目前也没有计划在不久的将来支持此功能。

随时将您的建议添加到[User Voice](http://visualstudio.uservoice.com)。我们使用该列表来帮助确定我们工作的优先级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T21:54:32.770

此功能是开箱即用的，并且自 TFS 2008 以来一直可用。您需要将 Microsoft Project Server 安装到与 TFS 一起使用的 SharePoint 实现（或另一个如果您喜欢）上，然后配置集成。

> 通过安装 Team Foundation Server Extensions for Project Server，项目经理可以使用 Microsoft Project Server 访问在 Team Foundation 中工作的敏捷和正式软件团队的最新项目状态和资源可用性。此集成使数据能够从 Team Foundation Server (TFS) 中的工作项流向 Project Server 中企业项目计划中的任务。项目经理和软件开发团队可以使用他们喜欢的工具，以支持他们需求的精度水平工作，并透明地共享信息。两个服务器产品配置完成后，同步引擎为映射的企业项目计划和团队项目中的配置数据维护调度数据和资源使用情况。

对于 TFS 2010，有一个附加组件，但对于 TFS 2012，它包含在产品中。

*   [启用 Team Foundation Server 和 Microsoft Project Server 之间的数据流](http://msdn.microsoft.com/en-us/library/gg455680.aspx)
*   [Microsoft® Team Foundation Server® 2010 和 Microsoft Project Server® 2010 集成 Hyper-V 虚拟机](http://www.microsoft.com/en-us/download/details.aspx?id=22267)

# linq - 如何获取按日期分组的最受欢迎的帖子？

> ID：12466034
> 
> 赞同：-1
> 
> 时间：2012-09-17T19:40:03.483
> 
> 标签：linq, entity-framework

我想对我的帖子进行排序以显示按日期分组的查看次数最多的帖子，以便每天查看最多的帖子出现，然后是下一个，然后是下一个。

如何在 linq 中编写此查询？如果可能，基于方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:53:06.630

```
int postsPerDay = 5;

var topPostsByDate = Posts
    .GroupBy(post => post.Date)
    .Select(grp => new
        {
            Date = grp.Key,
            TopPosts = grp
                .OrderByDescending(post => post.Views)
                .Take(postsPerDay)
                .Select(post => new Post(post))
        })
    .OrderByDescending(x => x.Date); 
```

编辑：从数据行构造一个新的 Post 对象。假设 Post 有一个构造函数接受`DataRow`; 改变以适应。

# google-app-engine - AppEngine Spring 控制器未更新

> ID：12466036
> 
> 赞同：1
> 
> 时间：2012-09-17T19:40:06.557
> 
> 标签：google-app-engine, spring-mvc, jetty

也许我在这里遗漏了一些非常基本的东西，但问题如下：

我有一个注释为@Controller 的Java 类，它的方法用@RequestMapping 注释，它的返回值用@ResponseBody 注释。我有一个 web.xml 配置 Spring Servlet 来处理请求。当我使用 AppEngine Eclipse 插件（在 Jetty 中运行它）在本地运行这个 web 应用程序时，它运行良好。

**但是**，当我更改方法以返回不同的内容时，清理、重建和再次运行，它仍然返回旧内容。即使我删除了控制器，它仍然可以工作。到底是怎么回事？即使我停止并重新启动 Jetty，也会发生这种情况。

PS：也许我应该将类注释为@WebService，而不是@Controller？我是春天的新手。

*我正在使用 Spring 3.1 和 AppEngine 1.7*

# android - TextView1通过点击跳转到ScrollView中的TextView2

> ID：12466045
> 
> 赞同：-2
> 
> 时间：2012-09-17T19:40:30.383
> 
> 标签：android, text, scroll, textview

我在 ScrollView 中使“TextView1”可点击，我需要使屏幕在文本中降低到“TextView2”文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:37:40.550

**这是我的布局：**

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/activity_main_scrollview"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textViewTitle"
        android:onClick="doClick"
        android:clickable="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="@dimen/padding_medium"
        android:layout_marginBottom="1500dp"
        android:text="@string/hello_world" />

    <TextView
        android:id="@+id/textViewText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="@dimen/padding_medium"
        android:text="sdfasiufhadifhissipaghuopghshgiahipuhguiashguipahguiphiughsdupaghapsghasuipghasughpgh" />

</LinearLayout> 
```

**这是我的代码：**

```
public class MainActivity extends Activity {

private ScrollView scrollView;
private TextView textViewAim;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        scrollView =  (ScrollView) findViewById(R.id.activity_main_scrollview);
        textViewAim = (TextView)   findViewById(R.id.textViewText);
    }

    public void doClick(View view){
        if (view.getId() == R.id.textViewTitle) {
            int[] location = new int[2];
            textViewAim.getLocationOnScreen(location);
            scrollView.scrollTo(location[0], location[1]);
        }
    }
} 
```

**请享用！**

# asp-classic - CDONTS 发送带有附件的电子邮件 - 经典 ASP

> ID：12466048
> 
> 赞同：0
> 
> 时间：2012-09-17T19:40:37.920
> 
> 标签：asp-classic, cdonts

我想使用 CDONTS 发送带有附件的电子邮件。但是，这是我正在使用的：

CDO_MAIL.AttachFile "http://SampleWebSite.com/Sample.asp?COMMAND=6"

在 JavaScript 中，我们正在做：

image1.src = "http://SampleWebSite.com/Sample.asp?COMMAND=6"

问题是 - 我没有确切的图像名称。上面的 URL 给我返回了一张图片。你能告诉我如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:51:57.237

[狄奥狄斯是正确的](https://stackoverflow.com/a/12466860/215042)。但是，“解决”此问题的另一种方法是[下载文件](https://stackoverflow.com/questions/10496675/download-files-from-url-using-classic-asp)，以便您在本地拥有它，*然后*附加它。根据 Diodeus 的建议，嵌入 HTML 将导致大多数邮件客户端阻止图像并需要用户交互才能下载图像。最好[附上它并通过 CID 引用它](http://support.jodohost.com/threads/tut-how-to-add-embedded-images-in-cdo-mail.7692/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T20:46:14.657

CDO 不支持 HTTP。它需要一个**本地**文件引用（C:....）。

不过，您可以使用简单的 HTML 将图像嵌入到消息正文中：

```
<img src="http://SampleWebSite.com/Sample.asp?COMMAND=6" /> 
```

# c# - 将 *Awaitable* 匿名函数作为参数传递

> ID：12466049
> 
> 赞同：38
> 
> 时间：2012-09-17T19:40:38.147
> 
> 标签：c#, asynchronous, lambda, parameter-passing

先上代码。这就是我想要做的。我很接近，但我想我只需要修复我在 UpdateButton 方法中定义参数的方式。

```
private async void UpdateButton(Action<bool> post)
{
    if (!await post())
        ErrorBox.Text = "Error posting message.";
}

private void PostToTwitter()
{
    UpdateButton(async () => await new TwitterAction().Post("Hello, world!"));
}

private void PostToFacebook()
{
    UpdateButton(async () => await new FacebookAction().Post("Hello, world!"));
} 
```

不幸的是，这`!await post()`不起作用，因为“类型 'void' 是不可等待的。” 所以问题是，我如何在这个方法中定义我的参数来支持一个可*等待*的参数？

下面是 TwitterAction().Post() 的定义方式...

`public virtual async Task<bool> Post(string messageId){...}`

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-17T19:45:06.670

```
private async void UpdateButton(Func<Task<bool>> post)
{
    if (!await post())
        ErrorBox.Text = "Error posting message.";
} 
```

- 编辑 -

```
UpdateButton(()=>Post("ss"));

private async void UpdateButton(Func<Task<bool>> post)
{
    if (!await post())
        this.Text = "Error posting message.";
}

public virtual async Task<bool> Post(string messageId)
{
    return await Task.Factory.StartNew(() => true);
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-17T19:43:46.873

您需要将其作为 a 传递`Task<bool>`，而不是`Action<bool>`.

这提供了“等待”的东西。

鉴于您当前的代码，我相信这会起作用：

```
private async Task UpdateButtonAsync(Task<bool> post)
{
    if (!await post)
        ErrorBox.Text = "Error posting message.";
}

// This will work if Post returns Task<bool> in the current API...
private void PostToTwitter()
{
    UpdateButtonAsync(new TwitterAction().Post("Hello, world!"));
} 
```

* * *

如果您不想`Task<bool>`立即启动，并且需要将其保持为传递 lambda，那么 lambda 仍然没有理由异步。在这种情况下，您可以使用：

```
private async Task UpdateButtonAsync(Func<Task<bool>> post)
{
    if (!await post())
        ErrorBox.Text = "Error posting message.";
}

// This will work if Post returns Task<bool> in the current API...
private void PostToTwitter()
{
    UpdateButtonAsync(() => new TwitterAction().Post("Hello, world!"));
} 
```

这会导致 lambda 返回`Task<bool>`(no `async`/ `await`required，因为`Post`已经返回`Task<bool>`)，并且 update 方法会运行 lambda。

就个人而言，我发现第一个选项（上面）更简单，并且怀疑它更有可能是您想要的。鉴于您的 API 已经返回`Task<T>`，您可以直接传递`await`它。

# apache - .htaccess 用于使用子域进行域更改 - apache + plesk

> ID：12466053
> 
> 赞同：0
> 
> 时间：2012-09-17T19:40:57.820
> 
> 标签：apache, .htaccess, plesk

我们正在使用基于 plesk 的系统，并且最近更改了域名。我想将所有进入旧域的请求重定向到新域。有很多问题以类似的方式提出，但我的有点不同。我想确保所有子域都被路由到新域上的同一个子域。我在 docroot 中设置了一个通用的 htaccess，但由于某种原因，它也适用于所有子域。

```
RewriteCond %{HTTP_HOST} !newdomain.com$ [NC]
RewriteRule ^(.*)$ http://newdomain.com/$1 [L,R=301] 
```

我怎样才能使它更通用，以便子域也可以适当地路由？对于奖励积分，我如何将 https 请求路由到 https 和 http 到 http。

我想补充一点，该规则将第一个 url 转换为第二个，这是不可取的：

```
http://SUBDOMAIN.olddomain.com/somepath/somefile.php
http://newdomain.com/subdomains/SUBDOMAIN/httpdocs/somepath/somefile.php 
```

正确的转换应该创建以下 url：

```
http://SUBDOMAIN.newdomain.com/somepath/somefile.php 
```

最后，这应该适用于通配符子域。

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:53:31.443

尝试：

```
# ignore "www."
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} ^([^.]+)\.olddomain.com$ [NC]
RewriteRule ^(.*)$ http://%1.newdomain.com/$1 [L,R=301] 
```

在你已经拥有的规则**之前**，你会想要这个。

而且由于您已经编辑了问题，因此您需要额外的内部重写来处理新站点上的一般子域，这与重定向无关。这是 301 重定向范围之外的全新功能。您将需要特殊规则来处理子域的内部路由：

```
RewriteCond %{REQUEST_URI} !^/subdomains/
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} ^([^.]+)\.newdomain.com$ [NC]
RewriteRule ^(.*)$ /subdomains/%1/httpdocs/$1 [L] 
```

# c++ - “字段类型不完整”错误

> ID：12466055
> 
> 赞同：87
> 
> 时间：2012-09-17T19:41:13.280
> 
> 标签：c++

我的头文件中有一个错误：

```
field "ui" has incomplete type. 
```

我试过做`ui`一个指针，但这不起作用。我认为我不需要这样做，因为我已经`MainWindowClass`在命名空间中定义了 my `Ui`。这是我的`mainwindow.h`：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QtGui/QMainWindow>
#include "ui_mainwindow.h"

namespace Ui {
    class MainWindowClass;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

    public:
        MainWindow(QWidget *parent = 0, Qt::WFlags flags=0);
        ~MainWindow();

    public slots:
        void slideValue(int);
    private:
        Ui::MainWindowClass ui; //error line
};

#endif // MAINWINDOW_H 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-09-17T19:54:31.563

您正在使用类型的前向声明`MainWindowClass`。这很好，但这也意味着您只能声明对该类型的指针或引用。否则编译器不知道如何分配父对象，因为它不知道前向声明类型的大小（或者它是否实际上具有无参数构造函数等）

所以，你要么想要：

```
// forward declaration, details unknown
class A;

class B {
  A *a;  // pointer to A, ok
}; 
```

或者，如果您不能使用指针或引用......

```
// declaration of A
#include "A.h"

class B {
  A a;  // ok, declaration of A is known
}; 
```

在某些时候，编译器需要知道`A`.

如果您只存储一个指向的指针，`A`那么在声明`B`. 它在某些时候需要它们（每当您实际取消引用指向 的指针时`A`），这可能在实现文件中，您需要在其中包含包含 class 声明的标头`A`。

```
// B.h
// header file

// forward declaration, details unknown
class A;

class B {
public: 
    void foo();
private:
  A *a;  // pointer to A, ok
};

// B.cpp
// implementation file

#include "B.h"
#include "A.h"  // declaration of A

B::foo() {
    // here we need to know the declaration of A
    a->whatever();
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-17T19:44:32.843

问题是您的`ui`属性使用了class 的[**前向声明**](http://en.wikipedia.org/wiki/Forward_declaration)`Ui::MainWindowClass`，因此出现“不完整类型”错误。

包含声明此类的头文件将解决该问题。

**编辑**

根据您的评论，以下代码：

```
namespace Ui
{
    class MainWindowClass;
} 
```

不**声明**一个类。这是一个**前向声明**，这意味着该类将在链接时的某个时刻存在。
基本上，它只是告诉编译器该类型将存在，并且它不应该警告它。

但是类**必须在某个地方定义**。

请注意，这只有在您有**指向**此类类型的指针时才有效。
您不能拥有不完整类型的静态分配实例。

所以要么你真的想要一个不完整的类型，然后你应该将你的`ui`成员声明为一个指针：

```
namespace Ui
{
    // Forward declaration - Class will have to exist at link time
    class MainWindowClass;
}

class MainWindow : public QMainWindow
{
    private:

        // Member needs to be a pointer, as it's an incomplete type
        Ui::MainWindowClass * ui;
}; 
```

或者你想要一个静态分配的实例`Ui::MainWindowClass`，然后需要声明它。您可以在另一个头文件中执行此操作（通常，每个类都有一个头文件）。
但只需将代码更改为：

```
namespace Ui
{
    // Real class declaration - May/Should be in a specific header file
    class MainWindowClass
    {};
}

class MainWindow : public QMainWindow
{
    private:

        // Member can be statically allocated, as the type is complete
        Ui::MainWindowClass ui;
}; 
```

也将工作。

注意这两个声明之间的区别。第一个使用前向声明，而第二个实际上声明了类（这里没有属性也没有方法）。

# php - PHP 优化 - include() 与否

> ID：12466057
> 
> 赞同：4
> 
> 时间：2012-09-17T19:41:41.080
> 
> 标签：php

我有两个关于函数包括的优化问题。

1.  使用单个 php 文件并包含它或使用几个小文件并包含它们更好吗？哪个会更快？

2.  例如，我使用一个 PHP 文件`mysql_connect`和所有数据库连接的东西。然后在我需要的时候包含它。但是在我需要的时候只写代码而不包含任何东西会更快吗？

另外，如果有人有实际数字，我将是一个不错的加分项。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T19:43:54.017

1.  差异将是微不足道的。

2.  [不要重复自己。](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)不要一遍又一遍地将连接信息放在每个文件中。包括在你的情况下听起来不错。

3.  停止使用`mysql_*()`. 请改用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

您正在谈论微优化，而开始考虑面向对象编程可能会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T19:46:34.690

选择任何体面的开源项目。比如 WordPress、Joomla、Drupal。现在检查他们是否有一个巨大的-everything-goes-in-there 文件，或者他们是否已将其拆分为小的、可维护的组件。

答：首先支持可维护性。当您遇到瓶颈时，您将能够以更简单的方式找到并解决它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T19:45:41.533

PHP include() 是在服务器端处理的，而不是由浏览器或其他任何地方处理的，因此性能差异可以忽略不计。如果它可以帮助您使您的代码更有条理，您应该包括您的数据库连接信息，不会有明显的速度差异。

# python - 如何在 Python 中检查字符串中是否包含数值？

> ID：12466061
> 
> 赞同：45
> 
> 时间：2012-09-17T19:41:53.827
> 
> 标签：python, string, int, converter

> **可能重复：**
> [如何在 Python 中检查字符串是否为数字？](https://stackoverflow.com/questions/354038/how-do-i-check-if-a-string-is-a-number-in-python)
> [Python - 将字符串解析为浮点数或整数](https://stackoverflow.com/questions/379906/python-parse-string-to-float-or-int)

例如，我想检查一个字符串，如果它不能转换为整数（带`int()`），我该如何检测呢？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-17T19:43:29.177

使用[`.isdigit()`方法](http://docs.python.org/library/stdtypes.html#str.isdigit)：

```
>>> '123'.isdigit()
True
>>> '1a23'.isdigit()
False 
```

引用文档：

> 如果字符串中的所有字符都是数字并且至少有一个字符，则返回 true，否则返回 false。

For `unicode` strings or Python 3 strings, you'll need to use a more precise definition and use the [`unicode.isdecimal()`](https://docs.python.org/2/library/stdtypes.html#unicode.isdecimal) / [`str.isdecimal()`](https://docs.python.org/3/library/stdtypes.html#str.isdecimal) instead; not all Unicode digits are interpretable as decimal numbers. [U+00B2 SUPERSCRIPT 2](http://codepoints.net/U+00B2) is a digit, but not a decimal, for example.

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-17T19:42:49.380

你总是`try`可以的：

```
try:
   a = int(yourstring)
except ValueError:
   print "can't convert" 
```

请注意，`isdigit`如果您想知道是否可以使用以下方法将字符串转换为浮点数，则此方法更胜一筹`float`

# android - 如何在不取消/分配内存的情况下使用 ImageView

> ID：12466065
> 
> 赞同：1
> 
> 时间：2012-09-17T19:42:12.317
> 
> 标签：android, eclipse, android-4.0-ice-cream-sandwich

我有一个应用程序，它使用带有数千张图像的翻书式动画。APK 大小不是问题，因为它是一个内部唯一的应用程序，永远不会放在任何应用商店。

我遇到的问题是我的动画师是一个子类**ImageView**，它以每秒 15 帧的速度切换图像，每次我调用**setImageURI**垃圾收集然后运行。那么是否有一种不会导致垃圾收集运行的**setImageURI**替代方法？

编辑：更多背景信息。

我的应用程序有大约 12 个序列，其中 6 个包含 1609 个图像，并且需要在某些帧调用不同的事件。另一个需要是用户能够在任何帧上停下来调查情况并执行动作或继续执行序列。3D 引擎本来是理想的解决方案，但由于用户不需要完全的自由并且始终处于“轨道”上，因此提出了这种方法。

这是应用程序的核心，也是出现问题的地方

```
try {
   ((BitmapDrawable) getDrawable()).getBitmap().recycle();
   setImageURI(imgUri);
   refreshDrawableState();
} catch (Exception e) {
   e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:58:00.353

垃圾收集器正在运行，因为您正在将一个图像交换为另一个转储前一个图像。每次您丢失对图像的引用时，都会发生这种情况。

这里有几种可能的方法可供考虑。

1.  既然您提到它是一本动画书，那么构建并分配一个[AnimationDrawable](http://androidforums.com/application-development/11620-programmatic-frame-frame-animation-examle-animationdrawable.html)`ImageView`将充当逐帧动画（正是动画书的本质）。这会一次加载所有图像并将它们保留在您丢失对`AnimationDrawable`.

2.  将所有图像存储为[SoftReferences](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ref/SoftReference.html)以缓存图像。SoftReference 会将对象保留在内存中，直到需要收集内存为止。这将减慢垃圾收集器的频率（假设这是原因）。用于`BitmapFractory`构建映像并将`setImageBitmap`其分配给`ImageView`. 这样做的另一个优点是它允许您在将图像分配给 ImageView 之前在线程上构建图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:52:12.797

也许是因为你的 Image 需要很多内存，而 android 需要调用 GB 来释放更多的内存，以避免你的程序崩溃

# android - OpenCV 本机示例未构建

> ID：12466074
> 
> 赞同：15
> 
> 时间：2012-09-17T19:42:54.293
> 
> 标签：android, eclipse, opencv, android-ndk

我花了很长时间试图让这个东西工作，我认为我的错误非常微不足道，但我无法修复它。另外，我知道以前有过关于此的问题，但没有人帮助我解决我的问题。

我在 eclipse juno 中使用 android-opencv 库

当我构建示例时，我将使用示例 4 作为示例，我在控制台中收到以下消息：

```
15:29:35 **** Build of configuration Default for project org.opencv.samples.tutorial4.Sample4Mixed ****
"C:\\dev\\android-ndk-re8b-windows\\ndk-build.cmd" 
Cannot run program "C:\dev\android-ndk-re8b-windows\ndk-build.cmd": Launching failed

Error: Program "C:\dev\android-ndk-re8b-windows\ndk-build.cmd" not found in PATH
PATH=[C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\ThinkPad\Bluetooth Software\;C:\Program Files\ThinkPad\Bluetooth Software\syswow64;C:\Program Files\Broadcom\WHL\;C:\Program Files\Broadcom\WHL\syswow64;C:\Program Files\Broadcom\WHL\SysWow64\;C:\Program Files\Broadcom\WHL\SysWow64\syswow64;C:\Program Files (x86)\Common Files\Lenovo;C:\Program Files (x86)\Common Files\Ulead Systems\MPEG;C:\Program Files (x86)\Windows Live\Shared;C:\SWTOOLS\ReadyApps;C:\Program Files (x86)\Intel\Services\IPT\;C:\Program Files (x86)\MATLAB\R2011a Student\bin;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\TortoiseSVN\bin;C:\Program Files (x86)\Git\cmd;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Program Files (x86)\Symantec\VIP Access Client\;C:\Program Files (x86)\SSH Communications Security\SSH Secure Shell]

15:29:35 Build Finished (took 54ms) 
```

双\是从哪里来的？！

我也确实将我的环境变量 NDKROOT 定义为我的 ndk 的绝对路径。但为了更安全，我在 properties->c/c++ build path 中再次定义了它。

帮助

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-25T18:12:05.460

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T10:10:45.213

如果你使用 Windows 7，你可以这样设置：

1.  右击“**我的电脑**”
2.  点击“**属性**”
3.  点击“**高级系统**”
4.  创建一个新变量`NDKROOT`
5.  将值更改为您的 NDK 路径
6.  重启 Eclipse
7.  点击“**确定**”

# javascript - 基于按钮选择的幻灯片内容

> ID：12466075
> 
> 赞同：1
> 
> 时间：2012-09-17T19:43:07.757
> 
> 标签：javascript, jquery

我正在尝试设置一个有 3 个按钮选择的内容区域。根据用户选择的按钮，不同的内容将滑入到位。根据它们所在的部分（选择了哪个按钮），按钮将是不同的颜色 - 白色而不是橙色。

这是我想要完成的总体思路的链接。感谢您的帮助。

[http://jsbin.com/epibab/2/edit](http://jsbin.com/epibab/2/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:00:38.403

## *[jsBin 演示](http://jsbin.com/epibab/14/edit)*

HTML：删除了所有相关`ID`的 s ：

```
<div id="hopperContentNav_ctr">
    <ul class="hopperTabs">
        <li><a href="#" class="active tab-1" >RECORD, WATCH, STORE&mdash;<br />IN ANY ROOM!</a></li>
        <li><a href="#" class="tab-2" >COMMERCIAL-FREE TV<br />IN PRIMETIME!</a></li>
        <li><a href="#" class="tab-3" >MOVIE MADNESS&mdash;<br />ANYTIME, ANYWHERE!</a></li>
    </ul>
</div> 
```

相反，我添加了类`page`：

```
<div class="page">
    <p class="wholeHomeHead">Whole-Home-DVR</p>
            ........
</div> 
```

jQuery：

```
$(document).ready(function() {
    $('.page:gt(0)').hide(); // hide all pages but first one using :gt() selector

    $('.hopperTabs li').click(function(e){
        e.preventDefault();
        var thisInd = $(this).index();
        $('.page').stop().fadeTo(300,0,function(){
            $(this).hide();
            $('.page').eq(thisInd).stop().fadeTo(600,1);
        });             
    });
}); 
```

很抱歉没有使用带有幻灯片的 hide() 和 show() ......我把它留给你。我有一些问题，不习惯使用这个 jQuery UI。

# ruby-on-rails - 使用声明式授权对嵌套资源进行属性检查

> ID：12466076
> 
> 赞同：3
> 
> 时间：2012-09-17T19:43:25.490
> 
> 标签：ruby-on-rails, declarative-authorization

我正在尝试添加`filter_access_to`，`attribute_check: true`但我的模型 ,`Assignment`是嵌套的`Project`，我想检查当前用户是否已分配给项目，以便他/她可以更新分配（即所有分配，而不仅仅是特定的分配）该项目。

我有下一个权限：

```
has_permissions_on :assignment do |a|
    to :read
    if_attribute :user, is { user }
end 
```

在我的控制器中：

```
filter_access_to :all, require: :manage, context: :assignment, attribute_check: true 
```

问题是我无法访问索引页面，因为它找不到分配的 ID。

我的模型是：

```
class User < ActiveRecord::Base
    has_many :assignments
    has_many :projects, through: :assignments
end

class Project < ActiveRecord::Base
    has_many :assignments
    has_many :users, through: :assignments
end

class Assignment < ActiveRecord::Base
    belongs_to :user, inverse_of: :assignments
    belongs_to :project, inverse_of: :assignments
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T23:47:19.797

除非您有非常特殊的使用需求，否则您`filter_access_to`可以改用`filter_resource_access`（[参见文档](http://www.tzi.org/~sbartsch/declarative_authorization/master/classes/Authorization/AuthorizationInController/ClassMethods.html#M000221)）并指定`:nested_in`选项。

`filer_access_to`只需使用以下（或类似）更改您的行：

```
filter_resource_access nested_in: :projects 
```

如果您**真的**想继续使用`filter_access_to`，那么您需要创建一个与 Project 关联的 Assignment 实例，并将其分配`@assignment`给`before_filter`. 当您使用`filter_resource_access`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:16:27.537

这是对我有用的代码：

```
before_filter :set_assignment
    filter_access_to [:index,:create,:destroy], require: :manage, context: :assignment, attribute_check: true
....
def set_assignment
  @project ||= Project.find(params[:project_id])
  p = {project_id: @project.id}.merge(params[:assignment] || {})
  @assignment ||= (params[:id] ? Assignment.find(params[:id]) : Assignment.new(p))
end 
```

不知道为什么`filter_resource_access :nested_in => :project`没有工作。它对 and 有效，`index`但对`create`and无效`destroy`。

# eclipse - 当 Visual Studio 正在调试 Web 应用程序时，无法从 Eclipse 和 Android 模拟器进行调试

> ID：12466087
> 
> 赞同：0
> 
> 时间：2012-09-17T19:44:22.873
> 
> 标签：eclipse, visual-studio-2010, debugging, android-emulator, conflict

**更新：**如果我首先启动 Visual Studio 调试器，然后使用 Eclipse，它会起作用！上次它起作用时，我一定是按这个顺序完成的，把它留在这里，希望将来能帮助别人。

虽然我不确定为什么会发生这种情况，因为它上周还在工作！

基本上我得到：

> 与 adb 的连接已断开，出现严重错误。
> 
> 您必须重新启动 adb 和 Eclipse。
> 
> 请确保 adb 正确位于 'C:\dev\android-sdk\platform-tools\adb.exe' 并可以执行。

或者它设法启动了模拟器，但是我得到了实际的 Java IO 错误：

> 已建立的连接被主机中的软件中止 java.io.IOException: 已建立的连接被主机中的软件中止

一旦我完全关闭了 Visual Studio，我就能够在 Eclipse 的模拟器中成功启动和调试 Android 应用程序......虽然我当然无法浏览我的 Web 应用程序！

这里会发生某种端口冲突吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:22:00.313

如果我首先启动 Visual Studio 调试器，然后使用 Eclipse，它似乎可以工作！上次它起作用时，我一定是按这个顺序完成的，把它留在这里，希望将来能帮助别人。

我猜 Visual Studio 比 Eclipse 更聪明，这就是为什么它以一种方式而不是另一种方式工作的原因，Eclipse 可能不会尝试其他端口......不是 100% 对此，仍然愿意给任何提供答案的人我的“解决方案”的真实解释。

# ios - 我喜欢给 UIPopoverController 添加标题和按钮

> ID：12466092
> 
> 赞同：0
> 
> 时间：2012-09-17T19:44:40.670
> 
> 标签：ios, ipad, uiviewcontroller, uipopovercontroller

我喜欢给 UIPopoverController 添加标题和按钮。使用我当前的代码

```
- (IBAction)listOfDocumnetsInSections:(id)sender {

UIViewController *listViewController = [[UIViewController alloc] init];
self.lsitOfDocument = [[UITableView alloc] initWithFrame:CGRectMake(0, 10, 300, [self countRecordsInEntity] * 43) style:UITableViewStylePlain];
self.lsitOfDocument.dataSource = self;
self.lsitOfDocument.delegate = self;

[listViewController.view addSubview:self.lsitOfDocument];
self.listOfSectionsPopOver = [[UIPopoverController alloc] initWithContentViewController:listViewController];

[self.listOfSectionsPopOver setPopoverContentSize:CGSizeMake(300, [self countRecordsInEntity] * 43)];
[self.listOfSectionsPopOver presentPopoverFromRect:CGRectMake(700, 35, 10, 10)
                                            inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny
                                          animated:YES];} 
```

看起来像

![在此处输入图像描述](../Images/d8868b37eabb76ef4ae0e514dfe43739.png)

但我喜欢像下面这样改变用户界面

![在此处输入图像描述](../Images/f5e66268b1a57f158e016002e3e8c5c2.png)

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:53:13.920

几个选项：

1.  在视图顶部添加一个 UIToolbar
2.  为您的 UITableView 创建一个包含 UIToolbar 的节标题

UIToolbar 将包含标签和按钮

# git - 我跑了 git update-index --assume-unchanged 现在想要获取文件列表？

> ID：12466093
> 
> 赞同：2
> 
> 时间：2012-09-17T19:44:41.037
> 
> 标签：git, git-index

我暂时想为某个提交删除一些文件并运行：`git update-index --assume-unchanged file_name`在一堆文件上。

然后我关闭了终端，是否有办法取回我运行`git update-index`命令的文件的名称，以便我可以`--not-assume-unchanged`在它们上运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T20:05:08.463

要进一步扩展 Richard Michael 的答案，您可以简单地在 ls-files -v 输出的行首用 grep 查找小写字母

```
git ls-files -v|grep ^[a-z] 
```

将只显示您假定未更改的文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T19:59:22.683

只需在树中的所有文件上运行它。默认是不假设不变。

你为什么首先运行它？如果要从提交中排除文件，只需`git add`手动运行所需的文件即可`git commit`。如果您将`-a`标志传递给，您只会获得所有修改过的文件`git commit`，所以不要这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T16:27:57.467

注意，我使用的是`git --version`1.8.1.2。

您可以通过以下方式确定为索引中的文件设置的位：`git ls-files -v`. `assume-unchanged`具有位集的文件具有*小写*标签。

不要将它与`S`对应于`skip-worktree`位的标记混淆（看起来`s`好像文件*也*设置了`assume-unchanged`位）。

请参阅和选项部分`git help update-index`中有关标签本身的讨论。`-t``-v`

例如：`Gemfile`已经`skip-worktree` **设置**，我们还要设置`assume-unchanged`。

```
$ git ls-files -v|grep Gemfile
S Gemfile
$ git update-index --assume-unchanged Gemfile
$ git ls-files -v|grep Gemfile
s Gemfile 
```

# android - 如何获得可靠的广播接收器

> ID：12466097
> 
> 赞同：5
> 
> 时间：2012-09-17T19:44:50.457
> 
> 标签：android, service, broadcastreceiver

我希望每次 Intent.ACTION_BATTERY_CHANGED 被广播时调用一个广播接收器，以便我可以跟踪一些数据。

我现在拥有的：

```
public class ReceiverApplication extends Application {

    @Override
    public void onCreate() {
        // Register Receiver
    }
    public static BroadcastReceiver myReceiver = new BroadcastReceiver()  {

        @Override
        public void onReceive(Context context, Intent intent) {
            // Start Service to progress data
        }       
    };  
} 
```

这工作正常，直到我使用最近的应用程序“任务管理器”刷掉我的偏好屏幕之一或我的主要活动。然后广播接收器不再被调用。如果我开始一项活动，则会调用 ReceiverApplication 的 onCreate() 并再次开始工作。

我可以通过一直运行一个空服务来解决这个问题。该服务似乎并没有通过滑动活动而被杀死，并且 onCreate() 在一段时间后被调用并重新启动 BroadcastReceiver 而不做任何事情。这里的问题是我不希望服务一直运行。

那么，我怎样才能在任何可以接收用户想要的广播的活动或服务之外获得广播接收器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:41:13.317

> 我希望每次 Intent.ACTION_BATTERY_CHANGED 被广播时调用一个广播接收器，以便我可以跟踪一些数据。

这种广播可能会发送*很多*。因此，Android 只允许正在运行的应用程序接收此广播，因此它不必为了告诉一堆应用程序“嘿，电池电量已更改”而分叉一堆进程。

> 这工作正常，直到我使用最近的应用程序“任务管理器”刷掉我的偏好屏幕之一或我的主要活动。然后广播接收器不再被调用。

该行为终止了您的流程。

> 那么，我怎样才能在任何可以接收用户想要的广播的活动或服务之外获得广播接收器？

通常，您会在清单中注册广播。对于`ACTION_BATTERY_CHANGED`，这是不可能的。

Bear in mind that you can *poll* `ACTION_BATTERY_CHANGED` -- instead of calling `registerReceiver()` with an actual `BroadcastReceiver`, pass in `null`. The return value of `registerReceiver()` will be the *last* `ACTION_BATTERY_CHANGED` `Intent`. So, if you can get away with finding the battery level every few minutes, use `AlarmManager` to wake up every so often and check the current battery level.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:49:45.487

~~与其嵌套广播接收器并动态注册它，不如在您的 Android 清单中声明一个~~根据文档，不能在清单中声明 BATTERY_CHANGED：

> 您不能通过清单中声明的​​组件接收此信息，只能通过使用 Context.registerReceiver() 显式注册它。请参阅 ACTION_BATTERY_LOW、ACTION_BATTERY_OKAY、ACTION_POWER_CONNECTED 和 ACTION_POWER_DISCONNECTED，了解发送和可以通过清单接收器接收的不同电池相关广播。

我会注册一个广播接收器来接收所有这些事件：

```
 <receiver
        android:name="MyBroadcastReceiver">
        <intent-filter>
            <action
                android:name="android.intent.action.BATTERY_LOW" />
            <category
                android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action
                android:name="android.intent.action.BATTERY_OKAY" />
            <category
                android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action
                android:name="android.intent.action.ACTION_POWER_CONNECTED" />
            <category
                android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action
                android:name="android.intent.action.ACTION_POWER_DISCONNECTED" />
            <category
                android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver> 
```

无论您的应用程序是否正在运行，广播接收器都会收到通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:31:27.990

除了已经给出的答案之外，当您使用任务管理器“滑动它”时，您的应用程序停止正常工作是正常的。任务管理器将停止它，因为用户**要求**它。

如果您不想停止 Activity 的生命周期，请不要这样做……您的应用程序将调用 onPause() 方法，如果需要，还可以调用其他方法，即使用户仍然可以使用您的广播实际上不要使用您的应用程序。任务管理器将终止应用程序和所有“相关”线程。

如果您想了解有关 Activity 生命周期的一些详细信息，请查看官方文档：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# c - 释放阵列时出现分段错误（核心转储）

> ID：12466100
> 
> 赞同：1
> 
> 时间：2012-09-17T19:45:03.163
> 
> 标签：c

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main(int argc, char * argv[])
{
    /*
        arguments from command line:
        N: dimension of each tuple
        M: maximum possible number of attributes
            a tuple can take
    */
    int N,M;
    N = atoi(argv[1]);
    M = atoi(argv[2]);

    // Ln store attribute range from 0 to Ln[i]-1;
    int * Ln = (int *)malloc(N);
    //int Ln[N];
    //printf("N: %d, M: %d\n",N,M);
    /*
        to generate parameters to file "repo_file.txt"
    */

    int i,seed,p1,p2,p3;
    seed = time(NULL);
    p1 = 762; p2 = 8196; p3 = 9765;
    for(i=0;i<N;i++)
    {
        seed  = (p1*seed+p2)%p3;
        srand(seed);
        Ln[i] = (rand()%M+1);
        printf("%dth element: %d \n",i,Ln[i]);
    }

   free(Ln);
   return 0;
} 
```

我将按照上面的编码将一些随机数分配给一个数组。但是，我收到如下错误：分段错误（核心转储），似乎是由 free() 调用引起的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T19:46:29.737

您没有分配正确的字节数：

```
 int * Ln = (int *)malloc(N); 
```

`N`以字节为单位，您应该使用`N * sizeof *Ln`

作为旁注，[不要强制转换 malloc](http://c-faq.com/malloc/mallocnocast.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T19:46:55.223

您没有为`Ln`数组分配足够的空间。您只分配`N` *bytes*，而不是`N`整数空间。因此，您的循环将经过数组的末尾。

利用：

```
int *Ln = malloc(N * sizeof(int)); 
```

# exception - 表或视图在外壳中不存在异常

> ID：12466101
> 
> 赞同：1
> 
> 时间：2012-09-17T19:45:03.467
> 
> 标签：exception, view, plsql, block

我的 shell 脚本中的 pl/sql 块有这个问题。这是脚本 PL/SQL BLOCK：

```
$ORACLE_HOME/bin/sqlplus -s system/${SysPwd}@${SList} <<!
--WHENEVER SQLERROR EXIT FAILURE;
  SET SERVEROUTPUT ON SIZE UNLIMITED;
  SET FEEDBACK OFF;
  SET DEFINE OFF;
  spool ${RESULT} append
DECLARE
TABLE_MISSING EXCEPTION;
  PRAGMA EXCEPTION_INIT(TABLE_MISSING,-6550);
    err_num NUMBER;
    err_msg VARCHAR2(100);
    cnt number;
    sql_stmt varchar2(2000);
    v_user varchar2(100) := '${User}';
    p_username varchar2(100);
    p_fullname varchar2(100);
    p_account_state char(2);

BEGIN
  select count(*) into cnt from users where upper(full_name) like '%${PaceUser}%';
  if cnt <> 0 then
  select rtrim(username),rtrim(full_name),account_state into p_username,p_fullname,p_account_state from users where upper(full_name) like '%${User}';
   dbms_output.put_line('User ${User} exist in the database ${SList}.....');
  end if;
EXCEPTION
  when NO_DATA_FOUND then
  NULL;
  WHEN TABLE_MISSING
      THEN
        NULL;
  WHEN OTHERS THEN
         NULL;
END;
/ 
```

和错误：

```
ERROR:

   select count(*) into cnt from users where upper(full_name) like '%TYLER MACHUTCHON%';
                                      *
ERROR at line 16:
ORA-06550: line 16, column 48:
PL/SQL: ORA-00942: table or view does not exist
ORA-06550: line 16, column 3:
PL/SQL: SQL Statement ignored
ORA-06550: line 18, column 120:
PL/SQL: ORA-00942: table or view does not exist
ORA-06550: line 18, column 3:
PL/SQL: SQL Statement ignored 
```

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:45:43.283

```
 WHEN TABLE_MISSING
      THEN
        NULL; 
```

Looks like an error that you should raise to the caller and fail your process. "Table missing" is not an error you'd want to ignore.

```
 WHEN OTHERS THEN
         NULL; 
```

Another really bad thing to do.Unless your process has no meaning and no one cares if it works.

=================================================================================

Now as for the actual fix, if the table might or might not exists during run time, you'll need to use dynamic sql to do all your operations. To check if it exists or not, you can use the data dictionary views (user_tables, all_tables or dba_tables).

# lua - 纯 Lua 文件浏览器

> ID：12466102
> 
> 赞同：1
> 
> 时间：2012-09-17T19:45:06.310
> 
> 标签：lua, file-browser

我不确定如何实现纯 Lua 文件浏览器......是否有任何代码用于纯 lua 文件浏览器，如果没有，我该如何实现它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T20:02:35.797

纯 Lua 没有用于文件系统访问的模块。你可以做以下两件事之一：

1.  使用一些可用的模块：http: [//lua-users.org/wiki/FileSystemOperations](http://lua-users.org/wiki/FileSystemOperations)
2.  使用 os.exec() 执行 ls-ing 然后 cd-ing。

对于 UI，您可以使用多种绑定之一，例如用于 Qt (GUI) 或用于 ncurses (TUI) 的绑定。

# ios - 使用 RestKit 从下拉菜单中选择一个项目

> ID：12466104
> 
> 赞同：0
> 
> 时间：2012-09-17T19:45:18.957
> 
> 标签：ios, objective-c, restkit, html-select

我正在寻找一种方法来使用 RestKit API 从我的网站的下拉菜单中选择一个项目。我搜索了网络，但它没有给我相关的结果。这是下拉菜单的 HTML 代码：

```
<form class="myProfile" method="POST">
    <div class="myProfile">Which one is your favorite soccer team?
    <select class="team_selection" name="favTeamID" id="favTeamID" onchange="JavaScript:submit()">
<option value="">Select One...</option>
<option value="203">Manchester</option>
<option value="1">Barcelona</option>
<option value="2">Chelsea</option>
</select> 
```

我尝试使用以下代码发布键值“name”和“id”：

```
[RKClient clientWithBaseURLString:@"http://MyWebsite.com"];

    NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"Barcelona", @"name",
                            @"1", @"id",
                            nil];

    RKRequest *request = [[RKClient sharedClient] post:@"/profile.php" params:params delegate:self];
    [request setUserData:@"selectFavoriteTeam"]; 
```

但它不起作用。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:12:38.603

我想通了，我必须在 favTeamID 上发布代码：

```
[RKClient clientWithBaseURLString:@"http://MyWebsite.com"];

    NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"1", @"favTeamID",
                            nil];

    RKRequest *request = [[RKClient sharedClient] post:@"/profile.php" params:params delegate:self];
    [request setUserData:@"selectFavoriteTeam"]; 
```

# oracle - Oracle 数据仓库傻瓜书

> ID：12466108
> 
> 赞同：0
> 
> 时间：2012-09-17T19:45:26.840
> 
> 标签：oracle, data-warehouse

我被要求研究“Oracle 提供的用于创建数据仓库的工具”。我在理论上研究了基本的 DW 概念、数据立方体、数据挖掘等，并且我还知道如何使用 Access 之类的“经典”RDBMS 构建基本 DW（好吧，比如说 MySQL ......）

现在是时候让我动手做一些更实用的东西了，所以...

1.  你能推荐几本书，可能是免费的吗？
2.  Oracle 是否提供免费工具来构建用于演示/教育目的的 DW？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:56:47.740

在此处查看 Oracle 的 Warehouse Builder 工具：[http ://www.oracle.com/technetwork/developer-tools/warehouse/overview/introduction/index.html](http://www.oracle.com/technetwork/developer-tools/warehouse/overview/introduction/index.html)

他们提供自学指南和 SDK。

此外，如果您不熟悉 ETL（提取、转换和加载）概念，那么阅读该主题也会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:15:44.673

一般来说，Oracle 有两种 ETL 工具：Oracle Warehouse Builder (OWB) 和 Oracle Data Integrator (ODI)。后一个（ODI）是一个新事物，我希望它成为一个祖先，它将在某些（可能很长的）未来取代 OWB - 但有些人可能想因为这样的预测而杀了我。;-) 无论如何，这些都是相当昂贵的工具，而 Oracle 没有“任何东西”是免费的——他们实际上有一些东西，比如 JDeveloper，但它最适用于他们的数据库，该数据库仅用于非商业用途，并且有一些额外的限制. ;-)

如果您想从数据仓库的概念开始，您应该阅读[Ralph Kimball](https://rads.stackoverflow.com/amzn/click/com/0471200247)或[Bill Inmon](https://rads.stackoverflow.com/amzn/click/com/0764599445)的书籍（或两者，因为它们代表不同的概念）——首先了解这个概念并不重要。之后，您应该尝试找到您的 ETL 工具。我不确定，但甲骨文一般都热衷于 Inmon 的概念。

您可以先试用 Talend Open Studio，它是免费的，但非常实用。当您了解它时，您将能够轻松切换到其他工具，因为它们通常非常相似。

# java - 在 Linux 上编译具有多个类的 Java 程序

> ID：12466110
> 
> 赞同：3
> 
> 时间：2012-09-17T19:45:29.163
> 
> 标签：java, compiler-construction

到目前为止，我已经能够在终端中使用 javac 命令在 Linux 中编译我的 Java 程序，但很快我将需要编译一个包含两个或三个类以及 main 的程序，我不确定这将如何工作.

我还能为此使用 javac 命令吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T19:47:02.697

是的，只要做`javac *.java`（如果你所有的类都在默认包中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T16:00:06.513

[理想情况下，您会使用Maven](http://maven.apache.org)、[ANT](http://ant.apache.org)等构建系统

如果你只是在编译当前工作目录中的类，并且你没有使用包，你可以很高兴地使用

```
$ javac *.java 
```

如果您使用了一些包（并将文件放在正确的包目录中），您可以使用

```
$ javac $(find . -name \*.java) 
```

当您访问大量文件时，您需要在文件中列出它们并通过`@`参数引用它，例如

```
$ find . -name \*.java > ./java-files.txt
$ javac @./java-files.txt 
```

但最终，构建工具将使生活变得更加轻松。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T19:49:07.750

是的你可以。从 oracle javac 页面

> 将源代码文件名传递给 javac 有两种方法：
> 
> 对于少量源文件，只需在命令行中列出文件名即可。
> 
> 对于大量源文件，列出文件中的文件名，用空格或换行符分隔。然后在 javac 命令行上使用列表文件名，前面有一个 @ 字符。

[请参阅文档](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javac.html)

# regex - 如何将正则表达式匹配附加到vim中的一行？

> ID：12466114
> 
> 赞同：1
> 
> 时间：2012-09-17T19:45:42.947
> 
> 标签：regex, vim

是否可以使用`:%s`在一行中的某处查找匹配项，然后将其附加到该行？

以下面的字符串为例，我希望在行尾`:s/\(value\)/\$\1/`附加一些东西`value`，但它只是在inline`$`之前添加`value`

演示字符串：

```
This value is too damn high! 
```

预期输出：

```
This is too damn high!value 
```

实际输出：

```
This $value is too damn high! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:55:18.277

你可以走得又快又脏：

```
:s,\(.*\)\(value\)\(.*\),\1\3\2, 
```

但可能有更清洁的方法来做到这一点。

对于查找和附加（如问题所述）：

```
:s,\(.*\(value\).*\),\1\2, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T19:56:31.530

在 Vim 中，`\$`是一个字面的美元符号。行尾匹配很简单`$`。您可以使用`\1`替换第一个匹配的组，并`\0`匹配整个匹配。因此：

```
:s#.*\(value\).*#\0\1 
```

# javascript - 用从源代码中删除代码替换显示无

> ID：12466117
> 
> 赞同：1
> 
> 时间：2012-09-17T19:46:01.890
> 
> 标签：javascript, jquery, css, ajax

希望这会有意义。我有一个页面，用户可以在其中创建一个 div 框。该用户最多可以创建三个 div 框。每个框都附有一个删除按钮，如果按下该按钮，则该特定框的显示将变为无。当他们重新加载页面时，屏幕再次为空，他们可以再次创建 div 框而不会出现错误。现在假设用户创建了三个 div 框，然后使用删除按钮将它们全部删除。现在屏幕为空的用户决定再创建一个 div 框。他这样做了，现在有两个具有相同 id 的 div 框，因为同一个 div 框已经创建过一次，现在没有显示。

因为有两个重复的 div 框，所以当同一页面上有多个 id 时，jQuery 事件很难触发。我的问题是，当我按下删除按钮以完全删除已删除 div 框的代码时，我可以用什么来代替 display none？下面的代码是我的意思是有重复的 div 框的示例，它是从 firebug 中获取的。（我特意从下面代码中的每个 div 框中取出了删除按钮以简化问题。只需要知道它在旧 div 框和新 div 框之间重复）。这需要使用 jQuery、Javascript 或 PHP 来完成。

```
//this section was colored in a lighter opacity in Firebug

<div id="post_3" class="ui-widget-content" style="position: absolute; left: 523px; top: 

341.1px; z-index: 990; display: none;"></div>

<div id="post_2" class="ui-widget-content" style="position: absolute; left: 254px; top: 

196.1px; z-index: 990; display: none;"></div>

<div id="post_1" class="ui-widget-content" style="position: absolute; left: 2px; top: 

343.1px; z-index: 990; display: none;"></div>

//end of section

//this is the most recent div box created. It clashes with the first div box.

<div id="post_3" class="ui-widget-content" style="position: absolute; left: 0px; top: 

343.1px; z-index: 990;"></div>

//end of most recent div box code 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T19:48:21.737

是的，函数[.remove()](http://api.jquery.com/remove)会帮助你！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T19:48:22.447

如果你想真正从屏幕上删除项目，你可以简单地调用 jQuery`.remove()`函数。

例子 -`$("#element").remove();`

完成此操作后，您将能够“回收”元素的 id 而不会引起问题。

参考 -

*   [`remove()`](http://api.jquery.com/remove)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T19:49:12.793

如果您想在单击按钮时删除 div，您可以删除它们，而不是使用 jQuery 的[**remove()**](http://api.jquery.com/remove/)设置显示值。

> 每个框都附有一个删除按钮，如果按下该按钮，该特定框将显示为无

在按钮内单击，`$("specificDiv").remove()`改为执行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-17T19:50:31.090

嗯......我在任何地方都看不到任何删除按钮，所以我不能很具体，但你可能想要使用的是`$(selector).remove();`

# ios - 如何调试 iOS 中工作线程的崩溃？

> ID：12466119
> 
> 赞同：1
> 
> 时间：2012-09-17T19:46:03.643
> 
> 标签：ios

这通常发生在从后台返回时。我很难重现这个问题。我最初的猜测是这是一个网络连接的竞争条件，但我可能错了。我在这里还缺少其他线索吗？

```
Thread 3 name:  Dispatch queue: com.apple.networking.connection.0x5a6540
Thread 3 Crashed:
0   libsystem_kernel.dylib          0x38f422a8 __close_nocancel + 12
1   libdispatch.dylib               0x37f5083e _dispatch_source_cancel_callout + 98
2   libdispatch.dylib               0x37f4d122 _dispatch_source_invoke$VARIANT$mp + 230
3   libdispatch.dylib               0x37f4ae8e _dispatch_queue_drain$VARIANT$mp + 78
4   libdispatch.dylib               0x37f4adbc _dispatch_queue_invoke$VARIANT$mp + 36
5   libdispatch.dylib               0x37f4b91a _dispatch_root_queue_drain + 182
6   libdispatch.dylib               0x37f4babc _dispatch_worker_thread2 + 80
7   libsystem_c.dylib               0x34758a4e _pthread_wqthread + 358
8   libsystem_c.dylib               0x347588e0 start_wqthread + 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:51:59.333

您正在调用一些导致崩溃的连接，我认为您应该在调用此连接的代码中放置一个断点

# sql - 替换访问sql中的多个左连接

> ID：12466127
> 
> 赞同：0
> 
> 时间：2012-09-17T19:46:56.060
> 
> 标签：sql, ms-access

我正在为三个表“进程名称”、“Work_Log1”和“ACn_reviewer”编写一个**ms 访问查询。**

现在“Work_Log1”表具有“进程名称”和“ACN_REviewer”表的外键。

但是“Work_log1”表在“ACN_Reviewer”表的某些行中有空值。

我提出的工作**查询**

```
select w.[activity_id], w.[activity_start_date], w.[reporting month] , 
r.[Reviewer_Name] , p.[process_name]
from [process name] p left join 
([work_log1] w left join [acn_reviewer] r
on w.[ACN Reviwer] = r.[ACN_Reviewer_ID]  )
on w.[process] = p.[process_id] 
 where w.[activity_id] = 54447 
```

现在我知道 work_log1 表中没有进程 ID 为空。

我问的问题是否有某种方法可以在没有连接的情况下进行上述查询？

像这样的东西，只在 acn_reviewer 上加入

```
 select w.[activity_id], w.[activity_start_date], w.[reporting month] , 
r.[Reviewer_Name] , p.[process_name]
from [process name] p  ,   [work_log1] w left join [acn_reviewer] r
 on w.[ACN Reviwer] = r.[ACN_Reviewer_ID]   
  where w.[process] = p.[process_id] and 
  w.[activity_id] = 54447 
```

我希望现在我清楚

那么我可以在 sql 中写这样的东西吗，这会在 ms-access 中引发错误

```
select w.[activity_id], w.[activity_start_date], w.[reporting month] ,
r.[Reviewer_Name] , p.[process_name] from [process name] p, [work_log1] w 
left join [acn_reviewer] r
on w.[ACN Reviwer] = r.[ACN_Reviewer_ID]  on w.[process] = p.[process_id]
 where w.[activity_id] = 54447 ; 
```

谢谢

普拉久特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:54:31.957

根据我从上面的属性中收集到的信息：

```
Process Name (p)
p.[process_name]
p.[process_id]

Work_Log1 (w)
w.[activity_id]
w.[process]
w.[acn reviwer]
w.[activity_start_date]
w.[reporting month]

ACN Reviewer (r)
r.[acn_reviewer_id]
r.[reviewer_name] 
```

![](../Images/373725874703c4387edcf875891ad135.png)

又是怎样的`Process Name`关系`ACN Reviewer`？如果不是，则无法根据`NULL`.`Work_Log1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:11:28.273

**最后一次尝试：** 我在想....也许你想将这些结果联合到另一个选择与 work_log1 left join'd to acn_reviewer （不先将 work_log1 与 process 一起加入）以获得 process 为 null 而 acn_reviewer 不是的情况？是的？不...？谁知道。我累了。访问不允许完整的外部连接和东西所以....也许这就是你想要做的，实际上？

```
 select  pw.[activity_id], 
                pw.[activity_start_date], 
                pw.[reporting month] ,
                r.[Reviewer_Name], 
                pw.[process_name] 

        from    ([work_log1] as w

                join [process name] as p 
                on w.[process] = p.[process_id] ) as pw

                    join [acn_reviewer] as r
                    on pw.[ACN Reviwer] = r.[ACN_Reviewer_ID]  

        where   pw.[activity_id] = 54447 

        -- all records in work_log1 that have a matching row both
                    -- in acn_reviewer and process via the join 

        union 

        select  pw.[activity_id], 
                pw.[activity_start_date], 
                pw.[reporting month] ,
                null as [Reviewer_Name], 
                pw.[process_name] 

        from    ([work_log1] as w

                join [process name] as p 
                on w.[process] = p.[process_id] ) as pw

                    left join [acn_reviewer] as r
                    on pw.[ACN Reviwer] = r.[ACN_Reviewer_ID]  

        where   pw.[activity_id] = 54447 and r.[acn reviewer] is null

        -- all records where work_log1, WITH a row in process, 
                    -- WITHOUT a row in acn_reviewer 

        union

        select  pw.[activity_id], 
                pw.[activity_start_date], 
                pw.[reporting month] ,
                r.[Reviewer_Name] as [Reviewer_Name], 
                null as [process_name] 

        from    ([work_log1] as w

                join [acn_reviewer] as r
                on w.[ACN Reviwer] = r.[ACN_Reviewer_ID] ) as wr

                    left join [process name] as p 
                    on w.[process] = p.[process_id]  

        where   pw.[activity_id] = 54447 and p.[process_id] is null

        -- all records where work_log1, WITHOUT a row in process, 
                    -- WITH a row in acn_reviewer 

        union

        select  pw.[activity_id], 
                pw.[activity_start_date], 
                pw.[reporting month] ,
                null as [Reviewer_Name], 
                null as [process_name] 

        from    ([work_log1] as w

                left outer join [acn_reviewer] as r
                on w.[ACN Reviwer] = r.[ACN_Reviewer_ID]  ) as wr

                    left outer join [process name] as p 
                    on wr.[process] = p.[process_id]

        where   pw.[activity_id] = 54447 and p.[process_id] is null and wr.[ACN_Reviewer_ID] is null

        -- all records in work_log1 that have no matching rows in either process or acn_reviewier
                    --  cuzzz its a left outer join and the where says the joined tables return null-thing 
```

访问很奇怪，如果您将整个内容放入 a 中，可能会或可能不喜欢它，`select * from (query with unions) as x where activity_id = 54447`但我不确定。我没有测试过这个。但你有希望得到这个想法。希望这就是你想要的。**如果不是 ---> 像 njk 这样的 ERD 提供给我们/您是正确的（b/c 您说他的错误）将非常有帮助，没有它或没有显示您需要的 NULL 的示例结果集我只是无法继续。**

或者...您的第一个查询剥离了连接？

```
select  w.[activity_id], 
        w.[activity_start_date], 
        w.[reporting month], 
        r.[Reviewer_Name], 
        p.[process_name]

from    work_log1 as w, acn_reviewer as r, process as p 

where   (w.[acn reviewer] = r.acn_reviewer_id or r.acn_reviewer_id is null) and 
        w.process = p.process_id 
```

# jquery - datepicker 没有填充选择器 div

> ID：12466128
> 
> 赞同：0
> 
> 时间：2012-09-17T19:47:01.843
> 
> 标签：jquery, jquery-ui

因此，我正在使用为管理区域购买的模板，但是在示例中它出现了，而在我的版本中却没有。

它增加了

```
<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div> 
```

但是那里没有其他内容，加载就绪状态，添加了唯一 ID，但没有其他内容。

我通过 CDN 包含了 jQuery 和 jQuery UI，我遗漏了什么明显的东西，为什么 div 被创建但没有被填充？

jQuery

```
$(function() {
    $( ".datepicker" ).datepicker();
}); 
```

界面字段

```
<input type="text" class="simple_field pick_date hasDatepicker" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:48:14.560

哦***就在我写这篇文章的时候，我意识到在页面加载之前拥有“hasDatepicker”类会搞砸一切！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:55:20.300

您的 jQuery 代码正在尝试将 datepicker 分配给具有 class 的字段`datepicker`。您的输入没有分配该类。它有一个类`hasDatepicker`。您需要更改其中一个以匹配。

这应该有效：

```
$(function() {
    $( ".hasDatepicker" ).datepicker();
}); 
```

# jquery - jQuery 显示和 wordpress

> ID：12466131
> 
> 赞同：0
> 
> 时间：2012-09-17T19:47:09.087
> 
> 标签：jquery, wordpress

jQuery 弹出模式（我的名字旁边的右上角）有问题。它在按网站 (http://edwardmanson.com/test/) 之前非常有效，但是在将所有内容链接在一起并将其放入 wordpress 之后它停止工作 (http://edwardmanson.com)。任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:42:04.873

Wordpress 打包的 jQuery 默认为[`noConflict`](http://api.jquery.com/jQuery.noConflict/)模式，因此`$`不能开箱即用，使用`jQuery`like`jQuery('document')`或像包装你的代码

```
(function($) { 
    // Code that uses jQuery's $ can follow here.
})(jQuery); 
```

或在您的文档中像这样准备好：

```
jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
}); 
```

正如 Ethan Brown 所说，你加载了 jQuery 两次，至少它在浪费带宽......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:35:10.580

问题似乎是 jQuery 版本冲突。在您的实时页面顶部，您包含了 jQuery 1.7.1。在页面*底部*，您包含了 jQuery 1.4。我做了一些实验，发现如果您删除 jQuery 1.4 的包含，它会起作用。

# c - 二叉树元素的递归printf

> ID：12466136
> 
> 赞同：4
> 
> 时间：2012-09-17T19:47:23.643
> 
> 标签：c, binary-tree, kernighan-and-ritchie

我回到 K&R 是为了阅读一章，并注意到我之前省略的一个示例。本章涵盖了二叉树数据类型的主题。我了解在节点中存储新条目，但打印功能让我感到困惑。为什么要先打印左侧部分？

如果它`printf`是函数中的第一个命令，然后是左和右，它会起作用吗？

如果不是——那为什么？

```
/* treeprint: in-order print of tree p */
void treeprint(struct tnode *p)
{
    if (p != NULL) {
        treeprint(p->left);
        printf("%4d %s\n", p->count, p->word);
        treeprint(p->right);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T19:54:17.927

首先从左侧下降，然后打印节点本身，然后从右侧下降，是使此操作*按顺序*遍历树的原因。如果您`printf`按照您的建议在左下降之前移动了它，那将使其成为*预*遍历。如果您先进行两次下降，那将是*post-order*。所有三种可能性都访问所有节点，但是以三种不同的顺序。

考虑简单的树

```
 *
 / \
a   +
   / \
  b   c 
```

如果您按顺序遍历这棵树，您将得到

```
* a + b c 
```

为了，

```
a * b + c 
```

下单后，

```
a b c + * 
```

*您想要*这些可能性中的哪一种取决于您在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T19:51:05.670

当然它会“工作”。你只会在输出上得到不同的排序。您也可以在打印两个子节点*后打印该节点。*（想象一下，如果你有一棵树有多个孩子，而不仅仅是两个。）

真正的问题是树节点的*值*是否遵循任何特殊规则，因此任何特定的遍历顺序是否特别有意义。例如，对于[二叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree)，左-自-右顺序以排序顺序打印出值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T19:55:40.850

您可以通过不同的方式遍历二叉树：预排序、中排序和后排序。

printf 可能是一个完全不同的过程（节点数据的计算）。有些问题需要不同的在树上行走的方式，例如，如果您正在平衡一棵二叉树，您将在访问两个子树后计算平衡因子。

因此，printf 可以被认为是其他类型的过程/函数的占位符，以处理不同类型的问题。

# c# - 如何正确处理 Web 浏览器控制返回导航

> ID：12466138
> 
> 赞同：3
> 
> 时间：2012-09-17T19:47:47.137
> 
> 标签：c#, windows-phone-7, webbrowser-control

我正在尝试在我放置在我的 WP7 应用程序中的 Web 浏览器控件中执行正确的回栈导航。Web 浏览器位于一个自定义控件中，我在其中实现了导航方法，然后将此控件放置在我的应用程序的一个页面中。导航似乎工作正常，除了 backstack。有时它会返回上一页，而其他时候（当它不应该这样做时）它会关闭应用程序。到目前为止，这是我的实现：

WebBrowser.cs（用户控制）

```
 //The navigation urls of the browser.
    private readonly Stack<Uri> _NavigatingUrls = new Stack<Uri>();

    //The history for the browser
    private readonly ObservableCollection<string> _History =
       new ObservableCollection<string>();

    //Flag to check if the browser is navigating back.
    bool _IsNavigatingBackward = false;

    /// <summary>
    /// Gets the History property for the browser.
    /// </summary>
    public ObservableCollection<string> History
    {
        get { return _History; }
    }

    /// <summary>
    /// CanNavigateBack Dependency Property
    /// </summary>
    public static readonly DependencyProperty CanNavigateBackProperty =
        DependencyProperty.Register("CanNavigateBack", typeof(bool),
        typeof(FullWebBrowser), new PropertyMetadata((bool)false));

    /// <summary>
    /// Gets or sets the CanNavigateBack property. This dependency property
    /// indicates whether the browser can go back.
    /// </summary>
    public bool CanNavigateBack
    {
        get { return (bool)GetValue(CanNavigateBackProperty); }
        set { SetValue(CanNavigateBackProperty, value); }
    }

    void TheWebBrowser_Navigating(object sender,
        Microsoft.Phone.Controls.NavigatingEventArgs e)
    {
        //show the progress bar while navigating
    }

    void TheWebBrowser_Navigated(object sender,
        System.Windows.Navigation.NavigationEventArgs e)
    {
        //If we are Navigating Backward and we Can Navigate back,
        //remove the last uri from the stack.
        if (_IsNavigatingBackward == true && CanNavigateBack)
            _NavigatingUrls.Pop();

        //Else we are navigating forward so we need to add the uri
        //to the stack.
        else
        {
            _NavigatingUrls.Push(e.Uri);

            //If we do not have the navigated uri in our history
            //we add it.
            if (!_History.Contains(e.Uri.ToString()))
                _History.Add(e.Uri.ToString());
        }

        //If there is one address left you can't go back.
        if (_NavigatingUrls.Count > 1)
            CanNavigateBack = true;
        else
            CanNavigateBack = false;

        //Finally we hide the progress bar.
        ShowProgress = false;
    }

    /// <summary>
    /// Used to navigate back.
    /// </summary>
    public void NavigateBack()
    {
        _IsNavigatingBackward = true;
        TheWebBrowser.InvokeScript("eval", "history.go(-1)");
    } 
```

浏览器页面.xaml.cs

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        if (TheBrowser.CanNavigateBack)
        {
            e.Cancel = true;
            TheBrowser.NavigateBack();
        }
        else
            base.OnBackKeyPress(e);
    } 
```

注意：在我的网络浏览器中启用了 Javascript，并且所有其他导航都正常工作。我的问题是，有时网络浏览器可以正确导航回来，而其他时候它不起作用并一起关闭。我的执行有问题吗？我可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T21:17:19.937

只是我还是你在调用 base.OnBackKeyPress(e) 时创建了一个无限循环引用 - 所以当向后导航不可用时，它会尝试将事件重新发送回自身，事实上，你没有不需要这样做，不做 e.Cancel = true; 您将自动允许 OnBackKeyPress 事件继续进行而不会出现任何问题，因此请完全删除 else 部分并看看会发生什么。由于您在返回导航不可用时收到错误，因此只有在那时才启动循环引用是有道理的。

请记住，我是一名 VB.NET 程序员，所以除非 C# 有一些我没有掌握的非常不同的东西，否则我们可能会找到一个解决方案。

您正在执行 e.cancel=true; 的事实 建议如果你没有这样做，事件将继续，因此，重新启动事件是没有必要的（因为你没有取消它），并且可能正在创建一个循环引用。尝试删除它，让我们知道会发生什么。也就是说，您需要删除以下行：

```
 } 
        else 
            base.OnBackKeyPress(e); 
```

# c# - 我可以在没有业务应用程序模板的情况下使用身份验证域服务吗？

> ID：12466139
> 
> 赞同：0
> 
> 时间：2012-09-17T19:47:49.840
> 
> 标签：c#, silverlight

我尝试为现有的 silverlight web 应用程序实现身份验证/授权。看来身份验证域服务可以满足我的要求。但是，我能找到的在线示例都是基于业务应用程序模板的。我只是想知道我是否仍然可以在我的项目中轻松实现此身份验证域服务？有没有我可以参考的不基于 MVVM 模式的示例？

顺便说一句，我添加了一个 WCF RIA 服务类库项目以在我的 Siliverlight 项目上启用 WCF RIA 服务。

实际上，我真正想要的只是检索 Silverlight 项目中的当前角色名称。

谢谢，

魏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:15:04.523

是的你可以。

AuthenticationService.svc 只是：

```
<%@ ServiceHost Language="C#"
Service="System.Web.ApplicationServices.AuthenticationService" %> 
```

编辑：我给的示例调用是错误的，请忽略它。这是我定义的用于登录用户的 Web 服务，我把它与 AuthenticationService 混淆了。

这是一个链接，解释了如何在没有模板的情况下实现它：

[http://msdn.microsoft.com/en-us/library/ee942451%28v=vs.91%29.aspx](http://msdn.microsoft.com/en-us/library/ee942451%28v=vs.91%29.aspx)

# c# - XmlAttribute 不适用于 XmlArray

> ID：12466142
> 
> 赞同：2
> 
> 时间：2012-09-17T19:47:59.870
> 
> 标签：c#, xml-serialization

我无法使用 XmlSerializer 生成以下 XML 结构：

```
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Name>This is root.</Name>
  <OtherValue>Otha.</OtherValue>
  <Shapes Name="This attribute is ignored!">
    <Circle>
      <Name>This</Name>
      <Value>Is</Value>
      <Whatever>Circle</Whatever>
    </Circle>
    <Square>
      <Name>And</Name>
      <Value>this is</Value>
      <Something>Square</Something>
    </Square>
  </Shapes>
</Root> 
```

唯一的问题是*`<Shapes>`*没有写入的属性。我用于序列化的类如下：

```
public class Root
{
    [XmlElement]
    public string Name { get; set; }

    [XmlElement]
    public string OtherValue { get; set; }

    [XmlArray("Shapes")]
    [XmlArrayItem("Circle", typeof(Circle))]
    [XmlArrayItem("Square", typeof(Square))]
    public ShapeList Shapes { get; set; }
}

public class ShapeList : List<Shape>
{
    // Attribute that is not in output
    [XmlAttribute]
    public string Name { get; set; }
}

public class Shape
{
    public string Name { get; set; }
    public string Value { get; set; }
}

public class Circle : Shape
{
   public string Whatever { get; set; }
}

public class Square : Shape
{
    public string Something { get; set; }
} 
```

还有一个运行序列化的主要方法：

```
public static void Main(String[] args)
{
    var extraTypes = new Type[] {
        typeof(Shape),
        typeof(Square),
        typeof(Circle)
    };

    var root = new Root();
    root.Name = "This is root.";
    root.OtherValue = "Otha.";

    root.Shapes = new ShapeList()
    {
        new Circle() { Name = "This", Value="Is", Whatever="Circle" },
        new Square() { Name = "And", Value="this is", Something="Square" }
    };
    root.Shapes.Name = "This is shapes.";

    using (var sw = new StreamWriter("data.xml"))
    {
        var serializer = new XmlSerializer(typeof(Root), extraTypes);
        serializer.Serialize(sw, root);
    }
} 
```

*   为什么我没有得到*ShapeList的**Name*属性？
**   如果使用这种方法无法完成，还有其他简单的方法吗？*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:36:06.457

不处理数组外部的属性；为此只处理叶节点 - 集合只是：它们的内容。有一种方法可以做到，*如果*你不介意让模型更复杂一点......

```
public class Root
{
    [XmlElement]
    public string Name { get; set; }

    [XmlElement]
    public string OtherValue { get; set; }

    [XmlElement("Shapes")]
    public ShapeContainer Shapes { get; set; }
}

public class ShapeContainer
{
    [XmlAttribute]
    public string Name { get; set; }

    private readonly List<Shape> items = new List<Shape>();
    [XmlElement("Circle", typeof(Circle))]
    [XmlElement("Square", typeof(Square))]
    public List<Shape> Items { get { return items; } }
}

public class Shape
{
    public string Name { get; set; }
    public string Value { get; set; }
}

public class Circle : Shape
{
    public string Whatever { get; set; }
}

public class Square : Shape
{
    public string Something { get; set; }
} 
```

用法更改如下：

```
root.Shapes = new ShapeContainer();
root.Shapes.Items.Add(new Circle() { Name = "This", Value="Is", Whatever="Circle" });
root.Shapes.Items.Add(new Square() { Name = "And", Value = "this is", Something = "Square" });
root.Shapes.Name = "This is shapes."; 
```*

# image - PHP图像扩展错误

> ID：12466147
> 
> 赞同：0
> 
> 时间：2012-09-17T19:48:26.267
> 
> 标签：image, php

如果上传的文件不是 .jpg、.jpeg 或 .JPG，我正在尝试让我的网站出错

```
<?php
function error(){echo"<script>$(function(){alert('Error')});</script>"; exit();}
$fileName = $_FILES['image']['name'];
$ext = substr(strrchr($fileName, "."), 1);

if($ext != "jpg" || $ext != "jpeg" || $ext != "JPG"){ error(); }
?> 
```

到目前为止，当上传另一种文件类型（.png、.gif、.doc 等）时，什么都没有发生。error() 函数使页面的其余部分停止工作，但它不会向用户显示错误警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:53:27.243

更改此行：

```
function error(){echo"<script>$(function(){alert('Error')});</script>"; exit();} 
```

对于这个：

```
function error(){echo"<script>alert('Error');</script>"; exit();} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:52:26.993

这是“白名单”文件扩展名的简单片段 -

```
$path_info = pathinfo($fileName);
$ext = strtolower($path_info['extension']);
$extWhitelist = array(
 'bmp',
 'gif', 
 'jpeg',
 'jpg',
 'png'
);
if (!in_array($ext,$extWhitelist)){
  // invalid file extension! 
} 
```

`$extWhitelist`仅允许使用中的文件扩展名。

资源 -

*   [`pathinfo()`](http://php.net/manual/en/function.pathinfo.php)
*   [`in_array()`](http://php.net/manual/en/function.in-array.php)

# extjs - 选项卡面板和卡片布局内的 Extjs 沙盒图表

> ID：12466149
> 
> 赞同：1
> 
> 时间：2012-09-17T19:48:47.797
> 
> 标签：extjs, charts, sandbox, extjs4.1

我有一个使用 extjs 4.1 沙盒图表的 extjs 3.4 应用程序。我遇到的唯一问题是，在 IE8 中，一旦从选项卡布局激活或从卡片布局调用时，它们就不会完全呈现。

代码没什么特别的：

```
var barBreakdownChart = Ext4.create('Ext4.chart.Chart', {
    renderTo: Ext.get('barBreakdownDiv').dom,
    width: 550,
    height: 300,
    animate: true,
    store: geosPeerChartStore,
    legend: true,
    axes: [{
        type: 'Numeric',
        position: 'left',
        title: 'Days of Supply',
        fields: ['line1', 'line2', 'line3', 'line4', 'line5'],
        label: {
            renderer: Ext.util.Format.numberRenderer('0,0')
        },
        labelTitle: {
          font: '14px "Lucida Grande"'
        },
        grid: true,
        minimum: 0
    }, {
        type: 'Category',
        position: 'bottom',
        // label: {
        //     rotate: {
        //         degrees: 315
        //     }
        // },
        fields: ['name']
    }],
    series: [{
        type: 'column',
        fill: true,
        //title: 'Current Year',
        axis: 'left',
        highlight: true,
        tips: {
            trackMouse: true,
            width: 140,
            height: 28,
            renderer: function (storeItem, item) {
                this.setTitle(storeItem.get('name') + ': ' + storeItem.get('line1') + ' $');
            }
        },
        xField: 'name',
        yField: ['line1', 'line2', 'line3', 'line4', 'line5']
        ,title: ['2008', '2009', '2010', '2011', '2012']
    }]
}); 
```

那么这里是在标签面板中调用图表的地方：

```
 items: [{
            xtype: 'tabpanel',
            style: 'margin-bottom: 10px;',
            height: 400,
            deferredRender: false,
            defaults: {
                hideMode: 'offsets'
            },
            activeTab: 0,
            items: [{
                title: 'Line Chart',
                items: lineBreakdownContainer
            }, {
                xtype:'panel',
                html: '<div id="barBreakdownDiv"> </div>'
            }] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:04:36.870

也许问题出在样式上。尝试使用另一个 css，（即 ext-ie-debug.css）而不是 resource/css/ext-all.css

# java - jstack 100% CPU

> ID：12466153
> 
> 赞同：1
> 
> 时间：2012-09-17T19:49:08.833
> 
> 标签：java, multithreading, cpu, jrun, jstack

所以我一直在试图弄清楚为什么我们的应用程序偶尔会消耗 100% 的 CPU。我已经阅读了几篇非常有用的 stackovertflow 帖子，但我认为为了安全起见，我想获得一些建议......指导......帮助......无论如何。实际上，这也归结为我缺乏查看堆栈跟踪的经验。如果有人能在这里指出可能的罪魁祸首并向我展示这样的指针，我将非常感激，以便我能更好地理解这一点。

值得注意的线程（在我看来）是等待监视器的线程：

```
我一直得到其中四个线程 jndi-0 - jndi-4

    “jndi-0”prio=6 tid=0x000000001113e000 nid=0x187c 等待监视器条目 [0x0000000012a9f000]
       java.lang.Thread.State: BLOCKED (在对象监视器上)
        在 java.net.PlainSocketImpl.accept(PlainSocketImpl.java:388)
        - 等待锁定（java.net.SocksSocketImpl）
        在 java.net.ServerSocket.implAccept(ServerSocket.java:453)
        在 java.net.ServerSocket.accept(ServerSocket.java:421)
        在 jrun.servlet.network.NetworkService.accept(NetworkService.java:356)
        在 jrun.naming.NamingNetworkService.accept(NamingNetworkService.java:115)
        在 jrun.naming.NamingNetworkService.createRunnable(NamingNetworkService.java:141)
        在 jrunx.scheduler.ThreadPool$DownstreamMetrics.createRunnable(ThreadPool.java:287)
        在 jrunx.scheduler.ThreadPool$ThreadThrottle.createRunnable(ThreadPool.java:349)
        在 jrunx.scheduler.ThreadPool$UpstreamMetrics.createRunnable(ThreadPool.java:241)
        在 jrunx.scheduler.WorkerThread.run(WorkerThread.java:62)
       锁定的可拥有同步器：
        - 没有任何

```

```
    “jrpp-298”prio=6 tid=0x0000000014730800 nid=0xdd4 等待监视器条目 [0x000000001cc4b000]
       java.lang.Thread.State: BLOCKED (在对象监视器上)
        在coldfusion.runtime.LocalScope.put(LocalScope.java:247)
        - 等待锁定（coldfusion.runtime.VariableScope）
        在coldfusion.runtime.NeoPageContext.SymTab_setValidatedSimpleName（NeoPageContext.java:1339）
        在coldfusion.runtime.NeoPageContext.SymTab_setValidatedDottedName（NeoPageContext.java:1297）
        在coldfusion.runtime.NeoPageContext.setValidatedAttribute（NeoPageContext.java:524）
        在coldfusion.runtime.NeoPageContext.setAttribute(NeoPageContext.java:392)
        在coldfusion.runtime.CfJspPage._set（CfJspPage.java:369）
        在 cfmathFunctions2ecfm1090027769$funcREDUCEBARBASE.runFunction(C:\SIWEB\cfw\controllers\ContentLogic\mathFunctions.cfm:711)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:192）
        在coldfusion.runtime.CfJspPage._invokeUDF（CfJspPage.java:2471）
        在 Statement26069.evaluate(:1)
        在coldfusion.compiler.ExprClassLoader.evaluate(ExprClassLoader.java:143)
        在coldfusion.runtime.CFPage.Evaluate（CFPage.java:1726）
        在 cfContentLogic2ecfc1938419849$funcEVALUATEFUNCTIONSTRING.runFunction(C:\SIWEB\cfw\controllers\ContentLogic.cfc:479)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:463)
        在coldfusion.runtime.CfJspPage._invokeUDF（CfJspPage.java:2436）
        在 cfContentLogic2ecfc1938419849$funcFINDANDEVALUATE.runFunction（C:\SIWEB\cfw\controllers\ContentLogic.cfc:528）
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.filter.SilentFilter.invoke（SilentFilter.java:47）
        在coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:192）
        在coldfusion.runtime.CfJspPage._invokeUDF（CfJspPage.java:2471）
        在 cfContentLogic2ecfc1938419849$funcPREPAREDANSWERSBYQUESTIONIDQGID.runFunction(C:\SIWEB\cfw\controllers\ContentLogic.cfc:340)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:463)
        在coldfusion.runtime.CfJspPage._invokeUDF（CfJspPage.java:2436）
        在 cfContentLogic2ecfc1938419849$funcPROCESSDYNAMICITEMBYQUESTIONIDQGID.runFunction(C:\SIWEB\cfw\controllers\ContentLogic.cfc:69)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:463)
        在coldfusion.runtime.TemplateProxy.invoke（TemplateProxy.java:453）
        在coldfusion.runtime.TemplateProxy.invoke（TemplateProxy.java:320）
        在coldfusion.runtime.CfJspPage._invoke（CfJspPage.java:2222）
        在 cfitemPackaging2ecfm1230617345$funcPREPAREDITEMBYQUESTIONIDQGID.runFunction(C:\SIWEB\cfw\controllers\ProtectedBusinessLogic\itemPackaging.cfm:693)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:463)
        在coldfusion.runtime.CfJspPage._invokeUDF（CfJspPage.java:2436）
        在 cfitemPackaging2ecfm1230617345$funcPREPAREDITEMSANDPASSAGESSTRUCTBYQGID.runFunction(C:\SIWEB\cfw\controllers\ProtectedBusinessLogic\itemPackaging.cfm:408)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:463)
        在coldfusion.runtime.CfJspPage._invokeUDF（CfJspPage.java:2436）
        在 cfitemPackaging2ecfm1230617345$funcPREPAREDITEMSANDPASSAGESSTRUCTBYQGIDS.runFunction(C:\SIWEB\cfw\controllers\ProtectedBusinessLogic\itemPackaging.cfm:73)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:463)
        在coldfusion.runtime.TemplateProxy.invoke（TemplateProxy.java:453）
        在coldfusion.runtime.TemplateProxy.invoke（TemplateProxy.java:320）
        在coldfusion.runtime.CfJspPage._invoke（CfJspPage.java:2222）
        在 cfpracticesession2ecfm1218050444$funcPRACTICESESSION.runFunction(C:\SIWEB\cfw\controllers\Test\practicesession.cfm:272)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:463)
        在coldfusion.runtime.CfJspPage._invokeUDF（CfJspPage.java:2436）
        在coldfusion.tagext.lang.InvokeTag.doEndTag（InvokeTag.java:432）
        在coldfusion.runtime.CfJspPage._emptyTcfTag（CfJspPage.java:2662）
        在 cfcfml2ecfm667848367$func$INVOKE.runFunction(C:\SIWEB\cfw\wheels\global\cfml.cfm:177)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.filter.SilentFilter.invoke（SilentFilter.java:47）
        在coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:463)
        在coldfusion.runtime.CfJspPage._invokeUDF（CfJspPage.java:2436）
        在 cfprocessing2ecfm76711320$func$CALLACTION.runFunction(C:\SIWEB\cfw\wheels\controller\processing.cfm:85)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.filter.SilentFilter.invoke（SilentFilter.java:47）
        在coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:463)
        在coldfusion.runtime.CfJspPage._invokeUDF（CfJspPage.java:2436）
        在 cfprocessing2ecfm76711320$func$PROCESSACTION.runFunction(C:\SIWEB\cfw\wheels\controller\processing.cfm:60)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.filter.SilentFilter.invoke（SilentFilter.java:47）
        在coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:192）
        在coldfusion.runtime.TemplateProxy.invoke（TemplateProxy.java:448）
        在coldfusion.runtime.TemplateProxy.invoke（TemplateProxy.java:308）
        在coldfusion.runtime.CfJspPage._invoke（CfJspPage.java:2272）
        在 cfrequest2ecfm104933708$func$REQUEST.runFunction(C:\SIWEB\cfw\wheels\dispatch\request.cfm:166)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.filter.SilentFilter.invoke（SilentFilter.java:47）
        在coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:192）
        在coldfusion.runtime.TemplateProxy.invoke（TemplateProxy.java:448）
        在coldfusion.runtime.TemplateProxy.invoke（TemplateProxy.java:308）
        在coldfusion.runtime.CfJspPage._invoke（CfJspPage.java:2272）
        在 cfindex2ecfm812783003.runPage(C:\SIWEB\cfw\wheels\index.cfm:1)
        在coldfusion.runtime.CfJspPage.invoke（CfJspPage.java:196）
        在coldfusion.tagext.lang.IncludeTag.doStartTag（IncludeTag.java:370）
        在coldfusion.runtime.CfJspPage._emptyTcfTag（CfJspPage.java:2661）
        在 cfrewrite2ecfm453288076.runPage(C:\SIWEB\cfw\rewrite.cfm:1)
        在coldfusion.runtime.CfJspPage.invoke（CfJspPage.java:196）
        在coldfusion.tagext.lang.IncludeTag.doStartTag（IncludeTag.java:370）
        在coldfusion.runtime.CfJspPage._emptyTcfTag（CfJspPage.java:2661）
        在 cfonrequest2ecfm951311187$funcONREQUEST.runFunction(C:\SIWEB\cfw\wheels\events\onrequest.cfm:1)
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:418）
        在coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:360)
        在coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:324)
        在coldfusion.filter.FunctionAccessFilter.invoke（FunctionAccessFilter.java:59）
        在coldfusion.runtime.UDFMethod.runFilterChain（UDFMethod.java:277）
        在coldfusion.runtime.UDFMethod.invoke（UDFMethod.java:192）
        在coldfusion.runtime.TemplateProxy.invoke（TemplateProxy.java:448）
        在coldfusion.runtime.TemplateProxy.invoke（TemplateProxy.java:308）
        在coldfusion.runtime.AppEventInvoker.invoke（AppEventInvoker.java:74）
        在coldfusion.runtime.AppEventInvoker.onRequest（AppEventInvoker.java:243）
        在coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:269)
        在coldfusion.filter.RequestMonitorFilter.invoke（RequestMonitorFilter.java:48）
        在coldfusion.filter.MonitoringFilter.invoke（MonitoringFilter.java:40）
        在coldfusion.filter.PathFilter.invoke(PathFilter.java:86)
        在coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:70)
        在coldfusion.filter.ClientScopePersistenceFilter.invoke（ClientScopePersistenceFilter.java:28）
        在coldfusion.filter.BrowserFilter.invoke（BrowserFilter.java:38）
        在coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
        在coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
        在coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
        在coldfusion.filter.RequestThrottleFilter.invoke（RequestThrottleFilter.java:126）
        在coldfusion.CfmServlet.service（CfmServlet.java:175）
        在coldfusion.bootstrap.BootstrapServlet.service（BootstrapServlet.java:89）
        在 jrun.servlet.FilterChain.doFilter(FilterChain.java:86)
        在 com.intergral.fusionreactor.filter.FusionReactorFilter.k(FusionReactorFilter.java:636)
        在 com.intergral.fusionreactor.filter.FusionReactorFilter.d(FusionReactorFilter.java:266)
        在 com.intergral.fusionreactor.filter.FusionReactorFilter.doFilter(FusionReactorFilter.java:171)
        在 jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
        在coldfusion.monitor.event.MonitoringServletFilter.doFilter（MonitoringServletFilter.java:42）
        在coldfusion.bootstrap.BootstrapFilter.doFilter（BootstrapFilter.java:46）
        在 jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
        在 jrun.servlet.FilterChain.service(FilterChain.java:101)
        在 jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)
        在 jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
        在 jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)
        在 jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
        在 jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)
        在 jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:320)
        在 jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
        在 jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:266)
        在 jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)
       锁定的可拥有同步器：
        - 没有任何

```

```
    跟踪时间：10:50:51.504 2012 年 9 月 18 日线程 ID：0x19 (25) 线程名称：jndi-3 优先级：5 哈希码：290417686 状态：RUNNABLE"jndi-3" prio=5 runnablejava.net.PlainSocketImpl.socketAccept(PlainSocketImpl.java :???)[Native Method]java.net.PlainSocketImpl.accept(PlainSocketImpl.java:390)java.net.ServerSocket.implAccept(ServerSocket.java:453)java.net.ServerSocket.accept(ServerSocket.java:421 )jrun.servlet.network.NetworkService.accept(NetworkService.java:356)jrun.naming.NamingNetworkService.accept(NamingNetworkService.java:115)jrun.naming.NamingNetworkService.createRunnable(NamingNetworkService.java:141)jrunx.scheduler.ThreadPool $DownstreamMetrics.createRunnable(ThreadPool.java:287)jrunx.scheduler.ThreadPool$ThreadThrottle.createRunnable(ThreadPool.java:349)jrunx.scheduler.ThreadPool$UpstreamMetrics。createRunnable(ThreadPool.java:241)jrunx.scheduler.WorkerThread.run(WorkerThread.java:62)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:04:07.250

我会推荐尝试 JVisualVM - 它非常适合通过线程进行排序。另一个不错的选择是使用 Eclipse，它也可以让您在调试模式下单步执行各个线程。

# asp.net-mvc - 将 Delete ActionLink 更改为按钮

> ID：12466155
> 
> 赞同：3
> 
> 时间：2012-09-17T19:49:12.650
> 
> 标签：asp.net-mvc, html, razor, asp.net-mvc-4

我读过你不应该使用删除链接。如何将其更改为按钮？

```
 @Html.ActionLink("Delete", "Delete", new { id = Model.ListOfRecipients[i].RecipientId,applicationId=Model.ApplicationId },  new { @class = "button delete_recipient" }) 
```

编辑@using (Html.BeginForm()) {

```
 <div id='added_recipients'>

          <table class='header'>
            <tr>
                @if (Model.ListOfRecipients != null)
                {
                <td class='recipient-title'>
                    @if (Model.ListOfRecipients.Count == 1) {@Model.ListOfRecipients.Count.ToString() <span>Recipient</span>}
                    @if (Model.ListOfRecipients.Count > 1)  {@Model.ListOfRecipients.Count.ToString() <span>Recipients</span>}

                </td>
                <td class='express'>
                  Express
                </td>
                <td class='quantity'>
                  Quantity
                </td>
                <td class='action'>
                </td>
                }
            </tr>
          </table>

            @if (Model.ListOfRecipients != null)
            {
                for (int i = 0; i < Model.ListOfRecipients.Count; i++)
                { 

                <div class='recipient-wrapper'>
                    <div class='decision_block'>
                        <table class='recipient'>
                            <tr>
                                <td class='recipient-title'>
                                    @Html.HiddenFor(model=>model.ListOfRecipients[i].RecipientId)
                                    <h3>
                                    @if(Model.ListOfRecipients[i].RecipientTypeId==1)
                                    {
                                        @Html.DisplayTextFor(model => model.ListOfRecipients[i].MedicalLicensingAuthorityName) 
                                        @Html.HiddenFor(model => model.ListOfRecipients[i].MedicalLicensingAuthorityName)                           
                                     }
                                    else
                                    {
                                        @Html.DisplayTextFor(model => model.ListOfRecipients[i].RecipientName) 
                                        @Html.HiddenFor(model => model.ListOfRecipients[i].RecipientName)
                                    }
                                    </h3>
                                    <div class='delivery-type'>
                                        Delivery Type: @Html.DisplayTextFor(model => model.ListOfRecipients[i].DeliveryType)
                                                       @Html.HiddenFor(model => model.ListOfRecipients[i].DeliveryType)
                                    </div>
                                </td>
                                <td class='na express'>
                                    @Html.CheckBoxFor(model => model.ListOfRecipients[i].ExpressIndicator)
                                    @Html.HiddenFor(model => model.ListOfRecipients[i].ExpressIndicator)
                                </td>
                                <td class='quantity'>
                                    <h3>
                                      Qty @Html.DisplayTextFor(model => model.ListOfRecipients[i].Quantity)
                                          @Html.HiddenFor(model => model.ListOfRecipients[i].Quantity)
                                    </h3>
                                </td>
                                <td class='action'>
                                    <input class='button edit_recipient' type='button' value='Edit' />

                                   @* <input class='button delete_recipient' type='button' value='Delete' />*@

                                @Html.ActionLink("Delete", 
                                                 "Delete", 
                                                  new { id = Model.ListOfRecipients[i].RecipientId,applicationId=Model.ApplicationId },  
                                                  new { @class = "button delete_recipient",onlick = "$.post(this.href); return false;" }) 

                                </td>
                            </tr>
                        </table>
                        <div class='recipient_editable'>
                            <br />
                            <hr />

                            <br />
                            <input class='button update_recipient' type='button' value='Update' />
                            <a class='button cancel_update' href='#'>Cancel</a>
                        </div>
                    </div>
                </div>

                }
            }

        </div>

        <input class='button' type='submit' value='Continue' />

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T19:52:58.383

> 我读过你不应该使用删除链接。

这是正确的。

> 如何将其更改为按钮？

使用带有提交按钮的表单，该按钮将`POST`用于`Delete`控制器操作：

```
@using (Html.BeginForm("Delete", null, new { id = Model.ListOfRecipients[i].RecipientId, applicationId = Model.ApplicationId }, FormMethod.Post))
{
   <button type="submit" class="button delete_recipient">Delete</button>
} 
```

并*模拟*`DELETE`HTTP 动词（因为标准 HTML 表单不支持 DELETE）：

```
@using (Html.BeginForm("Delete", null, new { id = Model.ListOfRecipients[i].RecipientId, applicationId = Model.ApplicationId }, FormMethod.Post))
{
   @Html.HttpMethodOverride(HttpVerbs.Delete)
   <button type="submit" class="button delete_recipient">Delete</button>
} 
```

然后使用 HttpDelete 属性装饰您的 Delete 控制器操作：

```
[HttpDelete]
public ActionResult Delete(int id, int applicationId)
{
    ...
} 
```

* * *

更新：

现在您已经发布了您的真实代码，您似乎已经在 for 循环之外拥有了一个 HTML 表单。由于无法嵌套表单，因此此解决方案将不起作用。所以一种可能性是使用 AJAX：

```
@Ajax.ActionLink(
    "Delete", 
    "Delete", 
    new { 
         id = Model.ListOfRecipients[i].RecipientId,
         applicationId = Model.ApplicationId 
    },
    new AjaxOptions {
        HttpMethod = "DELETE",
        OnSuccess = "function() { alert('The item has been deleted'); }"
    },
    new { 
         @class = "button delete_recipient",
    }
) 
```

如果您不想使用 AJAX，则必须在 main 之外生成这些表单`Html.BeginForm`以避免表单嵌套。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:01:37.730

您也可以使用锚标记来删除使用`httppost`动词。您可以将`$.post(this.href); return false;`属性添加到锚标记。更多可以在[这里阅读](http://haacked.com/archive/2009/01/30/simple-jquery-delete-link-for-asp.net-mvc.aspx)

```
 $(".delete_recipient").click(function() {
     $.post(this.href); 
     return false;
    });

@Html.ActionLink("Delete", "Delete", new { id = Model.ListOfRecipients[i].RecipientId,applicationId=Model.ApplicationId },  new { @class = "button delete_recipient" }) 
```

# android - 无法从 Canvas 位图中将 ImageBitmap 设置到 ImageView

> ID：12466156
> 
> 赞同：1
> 
> 时间：2012-09-17T19:49:14.670
> 
> 标签：android, imageview, android-canvas

我正在尝试将画布绘制的位图渲染到 App Widget 中的 ImageView 上。无法让它工作，我正在尝试一个更简单的示例，没有 RemoteViews 对象，所以只是尝试将一些矩形渲染到画布中，然后在 ImageView 上设置它。我只看到一个空白活动。这是代码示例：

```
LinearLayout layout = new LinearLayout (this);
layout.setDrawingCacheEnabled(true);
try
{
    Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.ARGB_8888); 
    Canvas canvas = new Canvas(bitmap);
    Paint red = new Paint ();
    red.setColor(0xCC0000);
    Paint blue = new Paint ();
    blue.setColor (0x0099CC);
    canvas.drawRect(0, 0, 100, 100, red);
    int percent = 55;
    canvas.drawRect(0, 0, percent, 100, blue);
    ImageView imageView = new ImageView (this);
    imageView.setDrawingCacheEnabled(true);
    imageView.setImageBitmap(bitmap);
    imageView.setAdjustViewBounds(true);
    imageView.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
              LayoutParams.WRAP_CONTENT));
    layout.addView(imageView);

}
catch(Exception e)
{
    Log.e("ElectionForecastWidgetProvider", "error with bar", e);
}
this.setContentView(layout); 
```

在堆栈溢出和其他地方搜索之后，我一直在调整各个部分，例如尝试 setDrawingCacheEnabled 方法。任何人都可以在这里提供任何见解吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:55:14.463

颜色以 ARGB 格式呈现，尝试将其更改为；

```
...
red.setColor(0xFFCC0000);
...
blue.setColor (0xFF0099CC);
... 
```

# sql - 使用存储过程创建/更新视图

> ID：12466162
> 
> 赞同：0
> 
> 时间：2012-09-17T19:49:40.007
> 
> 标签：sql, sql-server-2008, tsql

我想使用这样的存储过程创建或更新视图：

```
CREATE PROC Proc_Get_Ready_Weapons
AS
BEGIN

  IF EXISTS(select * FROM sys.views where name = 'dbo.vwGetReadyWeapons')
  BEGIN
    EXEC ('CREATE VIEW dbo.vwGetReadyWeapons ... rest of view')
  END
  ELSE
  BEGIN
    EXEC ('CREATE OR REPLACE VIEW dbo.vwGetReadyWeapons ... rest of view')
  END

  IF @@ROWCOUNT = 0
    PRINT 'Warning: No rows were updated'  
END 
```

但收到此错误：

> 消息 156，级别 15，状态 1，行 1
> 关键字“OR”附近的语法不正确。
> 警告：未更新任何行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:52:21.890

`CREATE OR REPLACE`在 SQL Server 中无效（[至少目前还没有](http://connect.microsoft.com/SQLServer/feedback/details/127219/create-or-replace)）。

也许你的意思是：

```
EXEC('ALTER VIEW dbo. ...'); 
```

您也没有有效的支票。我想你的意思是：

```
IF NOT EXISTS 
  (SELECT 1 FROM sys.views WHERE [object_id] = OBJECT_ID('dbo.vwGetReadyWeapons')) 
```

# tsql - 如何开发 TSQL Case Where 语句

> ID：12466172
> 
> 赞同：0
> 
> 时间：2012-09-17T19:50:34.793
> 
> 标签：tsql, case, ssms

> **可能重复：**
> [在 where 子句中的 T-SQL 中使用 CASE？](https://stackoverflow.com/questions/2006242/using-case-in-t-sql-in-the-where-clause)
> [如何最好地将具有多个值的报表参数添加到多个报表中？](https://stackoverflow.com/questions/12411326/how-to-best-add-a-report-parameter-with-multiple-values-to-multiple-reports)

我正在使用 SSMS 2008 R2 开发一个查询，该查询将返回如下记录。我有这个数据集的一个参数，可以是一个值或多个值。但棘手的部分是单值和多值都是同一个列表的一部分：A = 多值 B、C、D = 单值

因此，如果选择 A，则 A 包括所有 3 个值：B、C、D。但如果选择 B，则应仅显示 B 记录。

在我的存储过程中处理这个问题的最佳方法是什么？
到目前为止，我创建了一个永久表来存储 B、C、D 的信息。现在我想弄清楚如果选择了 A，如何在 B、C、D 中加入。我应该在 WHERE 子句中使用 CASE 语句吗？某种特殊的JOIN？CTE？

# windows - “新安装的程序”如何工作？

> ID：12466174
> 
> 赞同：2
> 
> 时间：2012-09-17T19:50:39.540
> 
> 标签：windows, installation, nsis, hint

我正在使用 NSIS 构建程序安装程序。可执行文件名为 XYZ.exe，我想将其安装在“$PROGRAM_FILES/XYZ 1.0/”中。我还在菜单开始中创建快捷方式：“$MENU_START/XYZ 1.0/XYZ 1.0”指向“$PROGRAM_FILES/XYZ 1.0/XYZ.exe”

使用创建的安装程序安装我的软件后，将显示“新安装的软件”提示。使用该链接不会使此提示消失。这是一个简短描述 Windows 如何处理新安装程序的链接。不幸的是，信息并不准确。 [http://blogs.msdn.com/b/oldnewthing/archive/2005/11/24/496690.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2005/11/24/496690.aspx)

我该怎么做才能使我的链接隐藏提示？我不想完全禁用这些提示。

我也不想等待它自己消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:00:16.123

高光应该会在一段时间后消失。

恕我直言，搞砸这个是毫无意义的，但如果你真的必须这样做，那么你可以尝试在快捷方式上设置[System.AppUserModel.ExcludeFromShowInNewInstall属性。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391568%28v=vs.85%29.aspx)不过，这在 NSIS 中并不容易做到……

# bash - 为bash中循环内的数组元素赋值

> ID：12466177
> 
> 赞同：10
> 
> 时间：2012-09-17T19:51:00.967
> 
> 标签：bash

我想将值修改为数组的元素，但我不知道执行此操作的语法

```
for i in `seq 0 8`;
do
    if [ ${config[$i]} = "value1" ]
        then config[$i] = "value2"    #<- This line
    fi
done 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T19:56:20.907

从技术上讲，唯一被破坏的是空白。不要在 shell 语法中的运算符周围放置空格：

```
config[$i]="value2" 
```

但是，您可能还需要考虑许多其他小事。例如，如果 的元素`config`可以包含空格，则测试可能会中断。使用引号或`[[`test 关键字来避免这种情况。

```
… if [[ ${config[$i]} = "value1" ]]
    then config[$i]="value2" … 
```

`seq`是一个非标准的外部可执行文件。你最好使用内置的迭代语法。此外，假设迭代发生在 中的所有元素上`config`，您可能只想这样做：

```
for ((i=0; i<${#config[@]}; i++));
do
    if [[ ${config[$i]} = "value1" ]]
        then config[$i]="value2"
    fi
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T19:59:57.193

像这样删除2个额外的空格：

```
config[$i]="value2" 
```

# extjs - store.sync() 后刷新网格不起作用；

> ID：12466179
> 
> 赞同：1
> 
> 时间：2012-09-17T19:51:11.900
> 
> 标签：extjs, extjs4

我已成功将数据添加到服务器并取回 json，以便成功 = true。添加后，我的网格不同步数据（使用 F5 刷新后）。在成功的处理程序中，我已经提出：

```
var store = Ext.getStore('Workers');
store.sync(); 
```

我已经检查过了，我真的得到了商店工人，但同步不起作用。

我认为当我在存储中重新加载数据时，网格中的数据也应该重新加载。

我也试过这个：

```
Ext.getCmp('workerlist').getView().refresh(); 
```

**我已经尝试了 stackoverflow 中的所有示例。:)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T21:05:37.660

我确定你做到了...

`sync();`不是加载数据的正确方法。你应该试试

```
var store = Ext.getStore('Workers');
store.load(); 
```

`refresh()`网格将自身绑定到商店，因此如果您重新加载商店，网格将始终这样做，但网格在调用它时永远不会导致商店加载。您也可以尝试获取网格并从那里访问商店，例如`Ext.getCmp('my-grid').store.load();`

# wpf - 列表框选择边距

> ID：12466184
> 
> 赞同：2
> 
> 时间：2012-09-17T19:51:38.567
> 
> 标签：wpf, listbox, selection

我有一个 WPF 选项卡控件。它里面是一个列表框，里面装满了一些项目。（图中只表示了一项）：

![未选择的项目](../Images/e0ee3c9850425ae63334c26b1cfbdb90.png)

该项目具有橙色渐变。

一旦我用鼠标选择它，这里就是同一个项目：

![未选择的项目](../Images/25a20adedc5c172a0507d41bd48dec4b.png)

我感兴趣的领域是我用红色圈出的蓝色的左边小条子。我意识到这是我选择该项目的产物，它将整个项目涂成蓝色以表示这一点。但是您会注意到，除了左侧之外，这条蓝色条不位于任何边缘。

我的问题是：如何拉伸我的列表框项目的左侧，这样蓝色的条子就消失了，而列表框项目的橙色填充了该区域？我在我能想到的所有东西上都使用了边距和填充，但无济于事。

非常感谢任何提示、评论和建议！:)

编辑：根据要求，ItemTemplate 的 Xaml。

ItemTemplate 使用作为静态资源的 DataTemplate。数据模板如下所示：

```
 <DataTemplate x:Key="MyDataTemplate">
        <UserControl MouseDoubleClick="MouseDoubleClick_Event">
            <DockPanel Background="<the orange gradient>" LastChildFill="True">
                <Image Name="AnImage" Height="20" Width="20" Source=" Binding Path=ImagePath}"/>
                <Label Width="Auto">
                    <TextBlock Text="{Binding Path=TheName}" />
                </Label>
            </DockPanel>
        </UserControl>
    </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:18:39.003

我很确定问题出在您的`TabControl`容器上，无论如何您都没有放置它，只需在`Padding`以下位置设置为零`TabControl`：

```
<TabControl Margin="0" Padding="0"> 
```

`TabControl`的默认样式将 设置`Padding`为 4（这是您看到的内边距）并将`Margin`内容主机上的`Padding`绑定到`TabControl`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T12:52:19.570

我找到了解决方案。如果我只是在我的 ListBox 上设置一个负的左边距，它会将 ListBoxItems 移动到该数量之上，并且条子消失。感谢大家的关注！

# twitter-bootstrap - 如何在 Twitter Bootstrap 2.1.1 中使用 Affix 组件

> ID：12466185
> 
> 赞同：2
> 
> 时间：2012-09-17T19:51:41.237
> 
> 标签：twitter-bootstrap

我正在尝试按照[记录的步骤](http://twitter.github.com/bootstrap/javascript.html#affix)在最新版本的 twitter bootstrap 中使用 affix 组件，但我无法让它工作。这是[JsFiddle中的示例](http://jsfiddle.net/NRhv8/13/)

我看到两个问题

*   单击 sidenav 链接可以正确滚动到适当的内容，但滚动内容不会使适当的 sidenav 链接处于活动状态
*   sidenav 的样式与 bootstrap[网站](http://twitter.github.com/bootstrap/javascript.html#affix)中不同。

如果有人能像在 twitter bootstrap 站点中那样帮助它工作，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T21:38:35.833

您正在寻找 ScrollSpy。当您滚动或切换到适当的部分时，它会突出显示一个菜单项。

Affix 在某种程度上是实验性 CSS 的替代品`position:sticky`。当您从顶部滚动*n* px 时，它会将菜单`position`从`static`更改为 。`fixed`

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T17:50:23.350

关于词缀的文档令人困惑，因为它描述了词缀“左侧的子导航是词缀插件的现场演示”。而这个子导航更是scrollspy的一个例子。

我将引导文档中的子导航类似于一个小的 jsfiddle

[http://jsfiddle.net/citykid/Gb2SD/6/](http://jsfiddle.net/citykid/Gb2SD/6/)

```
<body>
    <div class="container">
        <div class="row">
            <div class="span2" id="navparent">
                <ul class="nav nav-list navex" data-spy="affix">
                    <li><a href="#o">overview</a>
                    </li>
                    ...
                </ul>
            </div>
            <div class="span9">
                <p>top of the document</p>
                 <h3 id="o" data-offset-top="200">Overview</h3>
                <div style="height:500px">dummy content overview</div>
                ...
            </div>
        </div>
    </div>
    <script src="/js/jquery-1.9.0.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-scrollspy.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-affix.js"></script>
    <script>
        $(document).ready(function() {
            $(document.body).scrollspy({
                target: "#navparent"
            });
        });
    </script>
</body> 
```

使用 JS api，而不是数据属性，否则您会遇到 jsfiddle.net/citykid/Gb2SD/4 中描述的错误*

# mysql - 将 6 个 mysql 表合并为一个以将结果回显到带有 php 的 html 表中

> ID：12466186
> 
> 赞同：2
> 
> 时间：2012-09-17T19:51:42.827
> 
> 标签：mysql, merge, html-table

## 数据库的目的

我正在使用带有 Apache 服务器的 mysql 数据库来存储家庭学校信息。我正在尝试跟踪类似于成绩册的每项作业，我可以在其中按主题和月份查询以跟踪分数。

## 我的数据库设计

**assignment**是主表，具有：id(primary auto inc)、student_id、subject_id、points_id、date、Notes_id 和 type。

**notes**包含关于作业的可选注释，并具有 id(primary auto inc)、note 和 date。

**points**具有可用于分配的分数和总分，并包含 id(primary auto inc)、received 和 total。

**student**是一个学生列表（我的孩子），包含 id（primary auto inc）、first_name 和 last_name（是的，我知道这个专栏是我的孩子，但我这样做是为了练习）。

**subject**是当前主题的列表，包含 id(primary auto inc)、name、description。我的逻辑是我每年都可以根据需要务实地添加更多科目。

**type**包含分配的类型，并包含 id(primary auto inc)、name、description。

## 现在我如何加入打印出来？

我需要将作业、学生、主题、分数、笔记加入到一个表中，我可以使用 while 循环遍历该表，以将最近的活动（数据输入）回显到 html 表中。

我尝试了许多类似的版本：

```
$result = mysql_query("SELECT * FROM assignment, student, subject, points, notes
                            WHERE assignment.student_id = student.id 
                            AND assignment.subject_id = subject.id 
                            AND assignment.points_id = points.id 
                            "); 
```

这样做只会产生空查询。有人可以将我推向正确的方向吗？我正在寻找的最终结果是一个组合表，它用我想要显示的值填充存储的_id，例如：html 表中的 2012 年 9 月 12 日 Jane Doe 数学测验 25/28。

**如果需要，请提供其他信息... PHP 函数存储数据**

```
function submit_entry($con){
    $student = $_POST['student'];
    $subject = $_POST['subject'];
    $type = $_POST['type'];
    $notes = mysql_real_escape_string($_POST['notes'],$con);
    $received = mysql_real_escape_string($_POST['received'],$con);
    $total = mysql_real_escape_string($_POST['total'],$con);

    //Retreive student data
    $token = strtok($student, " ");
    $student_firstname = $token;
    $token = strtok(" ");
    $student_lastname = $token;
    $result = mysql_query("SELECT * FROM student WHERE first_name='$student_firstname'");
    $row = mysql_fetch_array($result);
    $student_id = $row['id'];

    //Retrieve subject data
    $result = mysql_query("SELECT * FROM subject WHERE name='$subject'");
    $row = mysql_fetch_array($result);
    $subject_id = $row['id'];

    //Retrieve type
    $result = mysql_query("SELECT * FROM type WHERE name='$type'");
    $row = mysql_fetch_array($result);
    $type_id = $row['id'];

    //obtain last inserted ID (assignment)
    if(!mysql_query("INSERT INTO points ( received, total)
    VALUES ('$received', '$total')"))
    {
        die('Error:  ' . mysql_error() . ' in points INSERT!');
    }
    $points_id = mysql_insert_id();

    if(!mysql_query("INSERT INTO assignment (student_id, subject_id, type, date, points_id)
    VALUES ('$student_id', '$subject_id', '$type_id', NOW(), '$points_id')"))
    {
      die('Error: ' . mysql_error() . ' in assignment INSERT!');
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:27:57.653

我同意 Remm 的建议。我正在轮询每个表（学生、主题和类型）中的值并将它们存储在关联数组中。

```
function recent_activity($count){

$subject_list;
$student_list;
$assignment_type;
$alt_table = false;

//build arrays with keys for echo
$result = mysql_query("SELECT * FROM subject");
while($row = mysql_fetch_array($result))
{
    $subject_list[$row['id']] = $row['name'];
}

$result = mysql_query("SELECT * FROM student");
while($row = mysql_fetch_array($result))
{
    $student_list[$row['id']] = $row['first_name'] . " " . $row['last_name'];
}

$result = mysql_query("SELECT * FROM assignment ORDER BY date DESC LIMIT $count");
$entry_date = null;

while($row = mysql_fetch_array($result))
{
    if($entry_date != $row['date'])
    {
        if($entry_date == null)
        {
            $entry_date = $row['date'];
            $entry_date_array = date("F j Y", strtotime($row['date']));
            $token = strtok($entry_date_array, " ");
            $token = strtok(" ");
            create_date($token, substr($entry_date_array, 0, 3));
            echo "<table class=\"student-table\">";
            $alt_table = false;
        }
        else
        {
            echo "</table>";
            echo "<div class=\"clear_float\"></div>";
            $entry_date = $row['date'];
            $entry_date_array = date("F j Y", strtotime($row['date']));
            $token = strtok($entry_date_array, " ");
            $token = strtok(" ");
            create_date($token, substr($entry_date_array, 0, 3));
            echo "<table class=\"student-table\">";
            $alt_table = false;
        }
    }

    if($alt_table == true)
    {
        echo "<tr class=\"alt\">";
        $alt_table = false;
    }
    else
    {
        echo "<tr>";
        $alt_table = true;
    }

    echo "<td>" . "<a href=\"" . $student_list[$row['student_id']] . "\">" . $student_list[$row['student_id']] . "</a>" . "</td>";
    echo "<td>" . $subject_list[$row['subject_id']] . "</td>";
    $row_id = $row['id'];
    $points_result = mysql_query("SELECT * FROM points WHERE id = '$row_id' ");
    $points_row = mysql_fetch_array($points_result);
    echo "<td>" . $points_row['received'] . " / " . $points_row['total'] . "</td>";
    echo "</tr>";
}

echo "</table>";
echo "<div class=\"clear_float\"></div>";
}

function create_date($day, $month){
echo "<div class=\"date\">" . "<p>" . $day ."<span>" . $month . "</span>" . "</div>";
}
?> 
```

它仍然是一个触摸车。我希望表格按日期分隔，并在每个表格前面插入一个 css 创建的日期块。目前，我创建的日期不准确，这是语句出现意外问题的结果

```
if($entry_date != $row['date']) 
```

从我详细的细节中，我可以看出这个项目是如何被误解为家庭作业的。作为一名专业的医疗机械师程序员/操作员，我意识到清晰地传达信息的重要性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:58:42.217

我认为您的部分问题是您`INNER JOIN`在查询中使用了一个，这意味着记录需要存在于所有表中。我建议使用 a`LEFT JOIN`代替：

```
select *
from assignment a
left join notes n
  on a.notes_id = n.id
left join points p
  on a.points_id = p.id
left join student stu
  on a.student_id = stu.id
left join subject sub
  on a.subject_id = sub.id
left join type t
  on a.type_id = t.id 
```

如果您不熟悉`JOIN`语法，这里有一个很好的链接：

[SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# file-upload - 合适的 Flash 上传器 icm the Play！框架

> ID：12466187
> 
> 赞同：1
> 
> 时间：2012-09-17T19:51:50.347
> 
> 标签：file-upload, playframework, uploadify, swfupload

我需要一个（flash）上传器来管理（主要是显示进度）icm the Play！框架。我已经尝试过 SWFUpload 和 Uploadify，但在 Mac 上都遇到了“302”错误。这似乎是 Mac 唯一的问题（在 Windows 上运行良好），并且似乎与 Play 有关系！根据路由文件重定向页面。

那么有没有适用于 Play! 的解决方案？我想要么找到一种在请求中没有重定向的方法，要么找到在 Mac 上没有这个问题的实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:25:27.513

[在http://www.uploadify.com](http://www.uploadify.com)有一个 html 5 上传器，可以 5 美元下载，到目前为止它对我来说是完美的。

# c# - 如何将 ISO8601 TimeSpan 转换为 C# TimeSpan？

> ID：12466188
> 
> 赞同：50
> 
> 时间：2012-09-17T19:51:53.843
> 
> 标签：c#, xml, parsing, datetime, xml-parsing

`System.FormatException`当我尝试执行以下操作时（例如），我得到了一个：

```
TimeSpan ts = XmlConvert.ToTimeSpan("P72H"); 
```

我研究了[ISO8601 标准](http://en.wikipedia.org/wiki/ISO_8601#Dates)，它似乎是正确的，但无论我做什么，我都无法让它在不抛出异常的情况下解析时间。

谢谢！

编辑：

异常详情：

```
System.FormatException was unhandled by user code
HResult=-2146233033
Message=The string 'P72H' is not a valid TimeSpan value.
Source=System.Xml 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-09-17T19:59:01.437

您需要将时间分隔符添加到您的字符串中。尝试这个：

```
TimeSpan ts = XmlConvert.ToTimeSpan("PT72H"); 
```

请参阅持续时间规范 - [http://www.w3.org/TR/xmlschema-2/#duration](http://www.w3.org/TR/xmlschema-2/#duration)

> 3.2.6.1 词汇表示
> 持续时间的词汇表示是 [ISO 8601] 扩展格式 PnYn MnDTnH nMnS，其中 nY 表示年数，nM 表示月数，nD 表示天数，“T”是日期/时间分隔符，nH 小时数，nM 分钟数，nS 秒数。秒数可以包括任意精度的十进制数字。

**根据评论编辑/更新**

由于存在一些关于为什么字符串`P2M2W5D`不会被视为有效的问题，`TimeSpan`因为`W`它是 ISO 8601 标准的一部分，所以我想添加此更新，以便如果有人遇到该问题，他们不必通读评论得到答案。问题在于原始字符串`P72H`和`P2M2W5D`字符串必须符合 W3C XML Schema（请参阅[XmlConvert.ToTimeSpan](https://docs.microsoft.com/en-us/dotnet/api/system.xml.xmlconvert.totimespan?view=netframework-4.8)的文档）。当我们查看 W3C XML Schema（上面的链接）时，它引用了 ISO 8601 标准，特别是第 5.5.3.2.1 节，它给出了`W`在 XML Schema 中不是有效字符的原因：

> 由于周没有明确的结转点（52 或 53），因此不应在这些应用程序中使用周

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-17T19:59:23.440

您一定错过了标准中的某些内容。以下：

```
System.Xml.XmlConvert.ToString(TimeSpan.FromHours(12)) 
```

给我字符串`PT12H`。所以似乎时间部分需要以`T`. 以下正确解析：

```
System.Xml.XmlConvert.ToTimeSpan("PT25H") 
```

（到一个`TimeSpan`字符串化为`1.01:00:00`。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-17T05:26:59.943

请使用以下格式`System.Xml.XmlConvert.ToTimeSpan("PnYnMnDTnHnMnS")`。

P - 指示符必须放在日期格式之前。

nY - 年数，例如：2Y
nM - 月数 例如：4M
nD - 天数 例如：6D

T - 必须放在时间格式之前的指示符

nH - 小时数 例如：8H
nM - 分钟数例如：12M
nS - 秒数 例如：14S

```
 System.Xml.XmlConvert.ToTimeSpan("P2Y4M6DT8H12M14S") 
```

在这里，与 Month 和 Minutes 混淆的部分用相同的字母表示，但指示符的使用使它们分开以便于理解。

# python - 如何使用默认权限使用 Python 创建目录？

> ID：12466190
> 
> 赞同：2
> 
> 时间：2012-09-17T19:52:07.060
> 
> 标签：python, mkdir

我想使用与 shell 相同的权限在 Python 中创建一个目录`mkdir`。

标准的[Python 文档](http://docs.python.org/library/os.html "15.1\.  os - 其他操作系统接口")说：

> os.mkdir（路径[，模式]）
> 
> 使用数字模式模式创建一个名为 path 的目录。默认模式为 0777（八进制）。在某些系统上，模式被忽略。在使用它的地方，当前的 umask 值首先被屏蔽掉。如果目录已经存在，则会引发 OSError。

我不想要默认`0777`权限，而是从父目录继承的权限。我可以在不查询父目录权限的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T20:06:26.160

您已经*获得*了与 shell 相同的权限`mkdir`。

使用外壳[mkdir](http://pubs.opengroup.org/onlinepubs/009695399/utilities/mkdir.html)：

> 对于每个 dir 操作数，mkdir 实用程序应执行与 IEEE Std 1003.1-2001 的系统接口卷中定义的 mkdir() 函数等效的操作，使用以下参数调用：
> 
> dir 操作数用作路径参数。
> 
> S_IRWXU、S_IRWXG 和 S_IRWXO 的按位或的值用作模式参数。（如果指定了 -m 选项，模式选项参数将覆盖此默认值。）

或者，更易读（来自 BSD 手册页）：

> ... 使用当前 umask(2) 修改的模式 rwxrwxrwx (0777) 以指定的顺序创建命名为操作数的目录。

Python`os.mkdir`做同样的事情：

> ... [t]默认模式是 0777... 当前的 umask 值首先被屏蔽掉。

Python 实际上使用完全相同的参数调用 shell 文档中提到的完全相同的 POSIX [mkdir](http://pubs.opengroup.org/onlinepubs/009695399/functions/mkdir.html)函数。该函数定义为：

> 新目录的文件权限位应从 mode 初始化。mode 参数的这些文件权限位应由进程的文件创建掩码修改。

或者，更易读，来自 FreeBSD/OS X 手册页：

> 目录路径是使用 mode 指定的访问权限创建的，并受调用进程的 umask(2) 限制。

如果您在 Windows 等非 POSIX 平台上，Python 会尝试模拟 POSIX 行为，即使本机 shell 有一个调用`mkdir`方式不同的命令。这主要是因为主要的此类 shell 是 Windows，它有一个that 是[md](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/mkdir.mspx)`mkdir`的同义词，并且就权限而言，它的作用细节甚至没有记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T20:03:42.590

看起来您可能能够使用[如何获取文件的权限掩码来获取您正在写入文件的目录的当前权限？](https://stackoverflow.com/questions/5337070/how-can-i-get-a-files-permission-mask)然后将该模式传递给`mkdir`?

# php - Wordpress Codex：在存档页面上以缩略图形式显示所有帖子附件

> ID：12466194
> 
> 赞同：1
> 
> 时间：2012-09-17T19:52:23.483
> 
> 标签：php, wordpress, codex

我正在对这个使用 Wordpress 构建的摄影师作品集网站进行最后的润色。

这是开发链接：[http](http://dev.manifold.ws/maudearsenault/category/fashion/) ://dev.manifold.ws/maudearsenault/category/fashion/ （**NSFW**）

我将帖子类别用于主导航（时尚、美容、生活方式......）。在类别页面上，我想出了如何拥有两种不同的帖子视图：默认视图以水平滚动布局显示 600 像素高度的图片，而备用视图（您可以通过单击“查看全部”链接访问）以小缩略图大小显示所有图片的网格。

我正在使用以下代码来显示这些小缩略图：

```
<?php $images =& get_children( 'post_type=attachment&post_mime_type=image&post_parent=' . $post->ID );
foreach( $images as $imageID => $imagePost )
echo wp_get_attachment_link($imageID, 'thumbnail', false); ?> 
```

虽然它以我想要的方式显示缩略图，但这段代码有两个问题：

1.  当我单击缩略图时，它会链接到图片文件。我希望缩略图链接到带有父帖子锚点的类别页面，或者如果第一个链接不可能，则链接到帖子页面。

2.  现在，缩略图标题（或者可能是链接标题）是附件文件的名称。我宁愿标题是我在 Wordpress 中设置的图片的标题。

我一直在试图使这项工作变得混乱，查看 Wordpress Codex 但无法使其工作。

任何帮助，将不胜感激。

谢谢！

-汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:14:17.017

不久前，我的一个客户项目遇到了这个确切的问题，我有一个答案给你，但你不会喜欢它。

所有这些信息都设置在[媒体部分](http://en.support.wordpress.com/images/#upload-images-from-your-computer)的后端。

要更改此信息，只需像这样更新特定图像的详细信息。

[示例图像](http://en.support.files.wordpress.com/2009/08/image_edit.png)

> 1.  标题 - 显示为工具提示的文本（当鼠标悬停在图像上时）。
>     
>     
> 2.  替代文本 - 图像不可用时显示的文本。
>     
>     
> 3.  默认标题 - 直接显示在图像下方的图像标题。
>     
>     
> 4.  描述 - 与您的仪表板中的图像和博客上的附件页面一起显示的文本。
>     
>     
> 5.  链接 URL - 图像将链接到的 URL/网址。
>     
>     
>     
>     None 按钮将完全删除链接。
>     
>     
>     
>     文件 URL 按钮会将图像链接到其原始的全尺寸版本。
>     
>     
>     
>     附件发布 URL 按钮会将图像链接到其附件页面。
>     
>     
>     
>     或者您可以设置为您希望它链接到的任何内容。
>     
>     
> 6.  对齐 - 图像在您的帖子或页面中的位置。有关更多信息，请参阅此页面的图像对齐。
>     
>     
> 7.  大小 - 图像的大小。

希望这可以帮助！

# java - 字符串中元音在前，辅音在后作为链表

> ID：12466196
> 
> 赞同：-3
> 
> 时间：2012-09-17T19:52:31.747
> 
> 标签：java, string

我已经通过链表给出了输入AMAZON。输出应该是AAOMZN。ie前面的元音和后面的辅音。Netbeans IDE没有显示任何输出。如果有错误请指出错误。为什么IDE没有显示任何输出。我的代码：

```
 class Node
    {
    char value;
    Node next;

    }
    public class AmazonProb1 
    {
    public static void main(String args[]){

    Scanner s=new Scanner(System.in);
    String str=s.nextLine();

    StringTokenizer ss=new StringTokenizer(str);
    Node a1=new Node();
    Node a2=new Node();
    Node a3=new Node();
    Node a4=new Node();
    Node a5=new Node();
    Node a6=new Node();
    a1.value='A'; 
    a2.value='M'; 
    a3.value='A'; 
    a4.value='Z';
    a5.value='O'; 
    a6.value='N';

    a1.next=a2;
    a2.next=a3;
    a3.next=a4;
    a4.next=a5;
    a5.next=a6;
    a6.next=null;

    Node x=new Node();
    Node head=new Node();
    head=a1;
    x=a1;

    for(int i=0;i<6;i++)
    {  
    if(head.value==(('A')|('O')|('E')|('I')|('U'))) 
    {
        head=head.next;

    }
    else if(head.value!=(('A')|('O')|('E')|('I')|('U'))) 
    {
        x=head;
        while(head.value!=(('A')|('O')|('E')|('I')|('U'))) 
        {
            x=x.next;

        }
        swap(x,head);

        }

    }                

    System.out.println(a1);
    System.out.println(a2);  
    System.out.println(a3);  
    System.out.println(a4); 
    System.out.println(a5);  
    System.out.println(a6);   

    }

    public static void swap(Node a,Node b)
    {
    Node temp=new Node();
    temp=a;
    a=b;
    b=temp;

    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:57:23.450

您正在打印节点，而不是 node.value。此外，您无需在分配之前为 Temp 创建新节点 b。b 已经是对节点的引用。你不需要另一个。

# html - 为什么我的 Scripts.RenderSection 不适用于 jqGrid？

> ID：12466204
> 
> 赞同：3
> 
> 时间：2012-09-17T19:53:19.240
> 
> 标签：html, asp.net-mvc-4, asp.net-optimization, bundles

我正在使用 Visual Studio 2012 和 MVC 4，在我的 _Layout.cshtml 中，我有以下内容：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/jqueryui")
        @Scripts.Render("~/bundles/jqgrid")

        @RenderSection("head", required: false)
    </head>
    <body>
        @RenderBody()

        @RenderSection("scripts", required: false)
    </body>
</html> 
```

在 BundleConfig.cs 我有

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
            "~/Scripts/jquery-{version}.js"));

        bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
            "~/Scripts/jquery-ui-{version}.js"));

        bundles.Add(new ScriptBundle("~/bundles/jqgrid").Include(
            "~/Scripts/jquery.jqGrid.min.js"));
    }
} 
```

我已经三重检查了，我的脚本文件夹确实包含 jquery.jqGrid.min.js，但它没有被包括在内。

我的 HTML 头看起来像：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link href="/Viper/Content/css" rel="stylesheet"/>

    <script src="/Viper/Scripts/jquery-1.8.1.js"></script>

    <script src="/Viper/Scripts/jquery-ui-1.8.23.js"></script>

</head> 
```

任何想法为什么不添加这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T20:05:39.123

debug=true 时的默认行为是忽略 *.min.js（这是我们正在寻找修复的问题）。

目前，最简单的做法是将文件重命名为 jquery.jqGrid.js

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T08:59:44.420

如果您从以下位置更改捆绑定义：

```
bundles.Add(new ScriptBundle("~/bundles/jqgrid").Include("~/Scripts/jquery.jqGrid.min.js")); 
```

至：

```
bundles.Add(new ScriptBundle("~/bundles/jqgrid").Include("~/Scripts/jquery.jqGrid.*")); 
```

它会像伤害一样起作用。

因此，出于调试目的，jquery.jqGrid.src.js 将在发布配置中运行应用程序期间加载 jquery.jqGrid.min.js。

# android - 在通知栏上方添加视图

> ID：12466210
> 
> 赞同：2
> 
> 时间：2012-09-17T19:53:32.780
> 
> 标签：android, view, notifications, position

我搜索了一种将视图放在 Android 通知栏上方的方法，例如 SwipePad 这就是我想要的（红色恐慌）： ![在此处输入图像描述](../Images/e45ecd088fdce7d9fb388fa8cf08e408.png)

我已经测试了这段代码：

```
 setContentView(R.layout.main);

    View disableStatusBar = new View(this);
    disableStatusBar.setBackgroundColor(Color.GREEN);

    WindowManager.LayoutParams handleParams = new WindowManager.LayoutParams(
        WindowManager.LayoutParams.FILL_PARENT,
        50,
        // This allows the view to be displayed over the status bar
        WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,//or other type_system make same
        // this is to keep button presses going to the background window
        WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE |
        // this is to enable the notification to recieve touch events
        WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL |
        // Draws over status bar
        WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN,
        PixelFormat.TRANSLUCENT);

    handleParams.gravity = Gravity.TOP;
    getWindow().addContentView(disableStatusBar, handleParams); 
```

但这只会给我：![在此处输入图像描述](../Images/9e029f290f5a28bae12c47a694d3aa36.png)

绿条不在通知栏上方...

任何人都可以给我一个好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-30T09:00:01.857

我使用这个解决方案：

```
 final WindowManager.LayoutParams params = new WindowManager.LayoutParams(
            WindowManager.LayoutParams.WRAP_CONTENT,
            WindowManager.LayoutParams.WRAP_CONTENT,
            WindowManager.LayoutParams.TYPE_PHONE,
            WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE|WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN
            |WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,
            PixelFormat.TRANSLUCENT); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-17T19:59:33.557

如果您的意思是要在通知栏中显示一个图标，则可以使用[NotificationManager](http://developer.android.com/reference/android/app/NotificationManager.html)类。

# matrix - Java3D 变换线

> ID：12466211
> 
> 赞同：0
> 
> 时间：2012-09-17T19:53:48.320
> 
> 标签：matrix, line, coordinates, transform, java-3d

我正在开发一个小型应用程序，它在 Java 3D SimpleUniverse 中渲染球体，然后用线连接一些球体。创建球体正在工作，也可以创建线条。当涉及到配方中的运动时，麻烦就来了。使用 Transform3D 对象并提供新坐标来移动球体非常容易。但是，我想更新连接两个遥远球体的线，重要的是要提到两个球体可能在任何方向上移动了任意数量的空间，并且计算每秒更新数十次，并且它们会持续更新相当长的时间长时间（超过 5 分钟）。有没有简单的方法来更新 Java3D 中的线坐标（我正在使用的 LineArray 对象）？这是我现在正在处理的代码的一部分：

```
TransformGroup [] segments;

public void createLines(SphereSet sphereSet, BranchGroup branchGroup) {
    segments = new TransformGroup[sphereSet.getEdgeSet().size()]; //Each edge connects two spheres in the sphereSet.
    Point3f [] source_dest = new Point3f[2];
    int lineIndex = 0;
    for (Edge e : sphereSet.getEdgeSet()) {
        segments[lineIndex] = new TransformGroup();
        segments[lineIndex].setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
/**
 *  Now create the Point3f pair that represents a segment connecting two spheres.
 */
        source_dest[0] = new Point3f();
        source_dest[1] = new Point3f();
        source_dest[0].setX(e.getSource().getCoordinates()[0]);
        source_dest[0].setY(e.getSource().getCoordinates()[1]);
        source_dest[0].setZ(e.getSource().getCoordinates()[2]);
        source_dest[1].setX(e.getTarget().getCoordinates()[0]);
        source_dest[1].setY(e.getTarget().getCoordinates()[1]);
        source_dest[1].setZ(e.getTarget().getCoordinates()[2]);

        LineArray line = new LineArray(2, LineArray.COORDINATES);
        line.setCoordinates(0, source_dest);

        Appearance lineApp = new Appearance();
        LineAttributes lineAttr = new LineAttributes(2, LineAttributes.PATTERN_SOLID, true);
        lineApp.setLineAttributes(lineAttr);

        Shape3D lineShape = new Shape3D(line, lineApp);
        segments[lineIndex].addChild(lineShape);

        branchGroup.addChild(segments[lineIndex]);

        lineIndex++;
    }
}

//Now, spheres' coordinates are updated... and we need to update lines' coordinates.

public void updateLines(SphereSet sphereSet) {

    int segmentIndex = 0;
    for (Edge e : sphereSet.getEdgeSet()) {
        //MYSTERIOUS CODE GOES HERE
        segmentIndex++;
    }
} 
```

提前致谢。PS：也许我需要通过变换矩阵来做到这一点。在这种情况下，建议如何计算它会非常有帮助。同样在这种情况下，我想知道在任意大量迭代之后，是否由于精度损失，线的末端可能与球体的中心不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T04:29:48.310

1) 创建一个从 javax.media.j3d.Behavior 派生的类，例如：

```
public class MyBehavior extends Behavior {

    private WakeupCondition wc = new WakeupOnElapsedTime(100); // Every 0.1 sec.

    public void initialize() {

      wakeupOn(wc);
    }

    public void processStimulus(Enumeration criteria) {

      double[] p = { 0, 0, 0 };
      for(int i = 0;i < nLinePoints;i++) {
          line.getCoordinate(i,p);
          p[0] += RandGenerator.randUniform(-0.1,0.1);
          p[1] += RandGenerator.randUniform(-0.1,0.1);
          p[2] += RandGenerator.randUniform(-0.1,0.1);
          line.setCoordinate(i,p);
      }
      wakeupOn(wc);
    }
} 
```

2）在您的`createLines()`方法中，允许读取和写入坐标：

```
line.setCapability(LineArray.ALLOW_COORDINATE_READ);
line.setCapability(LineArray.ALLOW_COORDINATE_WRITE); 
```

3）将行为附加到您的场景图：

```
MyBehavior randomEffect = new MyBehavior();
randomEffect.setSchedulingBounds(new BoundingSphere(new Point3d(0.0, 0.0,0.0), 100.0));
rootBranchGroup.addChild(randomEffect); 
```

BoundingSphere 定义了行为实际执行的子空间

# iphone - iOS (iPhone) 开发 - 本地通知在应用程序未运行时随机触发

> ID：12466214
> 
> 赞同：1
> 
> 时间：2012-09-17T19:54:03.360
> 
> 标签：iphone, objective-c, ios

当我们的应用程序未运行时，我们遇到了一个关于本地通知触发的非常奇怪的问题。通过不运行，我的意思是它完全终止（当您双击主页按钮时不会出现在任务列表中）。

在正常运行情况下，当应用程序处于后台时，如果设备静止超过 X 秒，应用程序将生成本地通知并发出警告声音。15 秒后，如果未采取任何措施，则会生成另一个本地通知，其中包含紧急消息。

似乎是随机的，在应用程序终止后的几小时或几天内，设备会突然报告警告通知，然后大约 15 秒后发出紧急通知，就像应用程序在后台正常运行一样。如前所述，我们已验证该应用程序未列在正在运行的任务列表中，并且似乎已完全终止。

该应用程序已注册为位置、音频和 VOIP 的长期后台处理模式。

当应用程序终止时（在 applicationWillTerminate 中），我们执行清理，包括关闭和取消计时器、取消本地通知等。

我有两个理论：

1.  我想知道这些“幽灵”通知是否只是在应用程序运行时排队的旧通知，但直到现在才执行（我的问题是为什么仍然尊重警告和紧急通知之间的时间差）。
2.  该应用程序是否有可能在深层背景中“秘密”运行。如果是这样，则设备似乎会定期“唤醒”应用程序；如果是这种情况，那么设备使用什么作为此“唤醒呼叫”的标准。

我想知道是否有人遇到过这个奇怪的问题，如果有，我们如何解决这个问题？

PS - 我们对 iOS 开发还很陌生，所以如果我们忽略了一些非常明显的事情，请提前道歉

**更新 #1** 通过 xCode 使用日志消息，我观察到 applicationWillTerminate 在通过任务栏关闭关闭应用程序时始终被调用。不过，关于这种行为是否可以依赖似乎确实存在很多争论，所以我不会断定地说我是否相信我的观察结果是一致的，但我倾向于这个方向。但是，对此有任何进一步的见解，将不胜感激！

**更新 #2** 我昨晚尝试了一种新方法；到目前为止，我们一直在使用该**`[application scheduleLocalNotifications]`**方法安排一个通知以触发“现在”，并将日期设置为当前时间。相反，我使用了该**`[application presentLocalNotificationNow]`**方法，并且没有提供日期/时间。该应用程序仍然可以正常运行，但它并没有解决问题，因为昨晚在应用程序未运行时随机触发了“幽灵”通知。我现在想知道这个问题是否不是与“旧通知”相关的问题，而更多地与由于我们长期后台执行注册的某些触发而导致应用程序“唤醒”有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:30:02.077

一旦您的应用程序安排了 UILocalNotification，它们将由操作系统处理，而不是您的应用程序。因此，即使您的应用程序被杀，它们仍然会关闭。

所以不，您的应用程序还没有在深层背景中秘密运行，这些只是您已经安排好的通知正在关闭。您是否可能在通知上设置重复间隔？

您可以使用以下方法清除所有通知：

```
 [[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

如 onnoweb 所述，在您的应用程序被杀死之前，您的 applicationWillTerminate 可能没有被调用。我不确定当用户在任务栏中关闭应用程序时是否总是调用它。

* * *

编辑以回应评论：

我的第一个想法是您似乎在安排 UILocalNotifications 的开火日期不正确。我建议您检查安排它们的方式。在您的应用程序被杀死后一天它们可能会关闭的唯一方法是，如果您在应用程序仍在运行时安排它们。

* * *

编辑以回应进一步的评论：

Teeg - 我认为 applicationWillTerminate 有时可能会在您终止应用程序时被调用，但不能保证会被调用。根据我的阅读，如果您的应用程序处于挂起状态，则不会调用该方法。我不知道具有长时间运行后台任务的应用程序是如何工作的，但也许它会在后台和挂起状态之间切换。我不知道。但问题是，打电话

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

将取消您的所有通知。因此，如果在那之后发生了故障，那就是没有调用该方法的证据。我猜另一种可能是调用了该方法，但是该应用程序在被杀死之前没有足够的时间取消所有通知。我不太确定你有多少时间在那里做事。我会再次建议您最好的选择是首先找出为什么要安排这些通知。

# java - XML SAX 解析器不工作 - NullPointerException

> ID：12466215
> 
> 赞同：0
> 
> 时间：2012-09-17T19:54:11.763
> 
> 标签：java, android

一整天我都在试图弄清楚如何让我的解析器工作，但由于某种原因，我总是得到一个 NullPointerException，这是我的代码：

**主要活动：**

```
public class MainActivity extends Activity {
    XMLHandler data;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

try {
             Log.i("PARSER", "versuch!");

                /**
                 * Create a new instance of the SAX parser
                 **/

                SAXParserFactory saxPF = SAXParserFactory.newInstance();
                SAXParser saxP = saxPF.newSAXParser();
                XMLReader xmlR = saxP.getXMLReader();

                URL url = new URL("my xml file"); // URL of the XML

                /** 
                 * Create the Handler to handle each of the XML tags. 
                 **/
                 data = new XMLHandler();
                xmlR.setContentHandler(data);
                xmlR.parse(new InputSource(url.openStream()));

            } catch (Exception e) {
                System.out.println(e);
                Log.i("PARSER", "ES KLAPPT NICHT!");
            }

        TextView txt1 = (TextView) findViewById(R.id.txtview1);
        txt1.setText(data.getTournament().get(0).get(0).getTeam1().toString());

    } 
```

**XML处理程序：**

```
public class XMLHandler extends DefaultHandler {

    private Tournament tournament;
    private TournamentDay currentDay;
    private Match currentMatch;
    private StringBuilder builder;

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if (qName.equalsIgnoreCase("team1"))
            currentMatch.setTeam1(builder.toString());
        else if (qName.equalsIgnoreCase("team2"))
            currentMatch.setTeam2(builder.toString());
        else if (qName.equalsIgnoreCase("resultfinal"))
            currentMatch.setResultfinal(builder.toString());
        else if (qName.equalsIgnoreCase("result1"))
            currentMatch.setResult1(builder.toString());
        else if (qName.equalsIgnoreCase("result2"))
            currentMatch.setResult2(builder.toString());
        else if (qName.equalsIgnoreCase("venue"))
            currentMatch.setVenue(builder.toString());
        else if (qName.equalsIgnoreCase("gmt"))
            currentMatch.setGmt(builder.toString());
        else if (qName.equals("match"))
            currentDay.add(currentMatch);
        else if (qName.equals("day"))
            tournament.add(currentDay);
    }

    @Override
    public void startElement(String uri, String localName, String qName,
                             org.xml.sax.Attributes attributes) throws SAXException {
        if (qName.equals("data")) {
            tournament = new Tournament();
        }
        if (qName.equals("day")) {
            currentDay = new TournamentDay();
        }
        else if (qName.equals("match")) {
            currentMatch = new Match();
        }
        else {
            builder = new StringBuilder();
        }
    }

    @Override
    public void characters(char[] chars, int start, int length) throws SAXException {
        builder.append(chars, start, length);
    }

    public Tournament getTournament() {
        return tournament;
    }
} 
```

**比赛：**

```
public class Tournament {

    private List<TournamentDay> days;

    public Tournament() {
        this.days = new ArrayList<TournamentDay>();
    }

    public void add(TournamentDay day) {
        days.add(day);
    }
    public TournamentDay get(int i) {
       return days.get(i); 
    }
} 
```

**匹配：**

```
public class Match {
    private String team1;
    private String team2;
    private String resultfinal;
    private String result1;
    private String result2;
    private String date;
    private String venue;
    private String gmt;

    public String getTeam1() {
        return team1;
    }

    public void setTeam1(String team1) {
        this.team1 = team1;
    }

    public String getTeam2() {
        return team2;
    }

    public void setTeam2(String team2) {
        this.team2 = team2;
    }

    public String getResultfinal() {
        return resultfinal;
    }

    public void setResultfinal(String resultfinal) {
        this.resultfinal = resultfinal;
    }

    public String getResult1() {
        return result1;
    }

    public void setResult1(String result1) {
        this.result1 = result1;
    }

    public String getResult2() {
        return result2;
    }

    public void setResult2(String result2) {
        this.result2 = result2;
    }

    public String getDate() {
        return date;
    }

    public void setDate(String date) {
        this.date = date;
    }

    public String getVenue() {
        return venue;
    }

    public void setVenue(String venue) {
        this.venue = venue;
    }

    public String getGmt() {
        return gmt;
    }

    public void setGmt(String gmt) {
        this.gmt = gmt;
    }

} 
```

**最后是我的 XML 文件：**

```
<data>
    <day>

        <match>

            <team1>ind</team1>
            <team2>afg</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>
            <date>19.09</date>
            <venue>1</venue>
            <gmt>14:00</gmt>

        </match>

        <match>

            <team1>eng</team1>
            <team2>afg</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>

            <date>21.09</date>
            <venue>1</venue>
            <gmt>14:00</gmt>

        </match>
        <match>

            <team1>ind</team1>
            <team2>eng</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>
            <date>23.09</date>
            <venue>2</venue>
            <gmt>10:00</gmt>

        </match>
    </day>
    <day>
        <match>

            <team1>aust</team1>
            <team2>irl</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>
            <date>19.08</date>
            <venue>1</venue>
            <gmt>10:00</gmt>

        </match>
        <match>

            <team1>aust</team1>
            <team2>west</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>
            <date>22.09</date>
            <venue>1</venue>
            <gmt>14:00</gmt>

        </match>
        <match>

            <team1>west</team1>
            <team2>irl</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>

            <date>24.09</date>
            <venue>1</venue>
            <gmt>14:00</gmt>

        </match>

    </day>

</data> 
```

**这是日志猫：**

```
09-17 15:26:49.299: I/System.out(3392): java.lang.NullPointerException
09-17 15:26:49.299: I/PARSER(3392): ES KLAPPT NICHT!
09-17 15:26:49.299: D/AndroidRuntime(3392): Shutting down VM
09-17 15:26:49.299: W/dalvikvm(3392): threadid=1: thread exiting with uncaught exception (group=0xb40a64f0)
09-17 15:26:49.299: I/Process(3392): Sending signal. PID: 3392 SIG: 9
09-17 15:26:49.299: D/AndroidRuntime(3392): procName from cmdline: com.example.xmldownloader
09-17 15:26:49.299: E/AndroidRuntime(3392): in writeCrashedAppName, pkgName :com.example.xmldownloader
09-17 15:26:49.299: D/AndroidRuntime(3392): file written successfully with content: com.example.xmldownloader StringBuffer : ;com.example.xmldownloader
09-17 15:26:49.299: E/AndroidRuntime(3392): FATAL EXCEPTION: main
09-17 15:26:49.299: E/AndroidRuntime(3392): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.xmldownloader/com.example.xmldownloader.MainActivity}: java.lang.NullPointerException
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1698)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1726)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:949)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.os.Looper.loop(Looper.java:130)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.ActivityThread.main(ActivityThread.java:3770)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at java.lang.reflect.Method.invokeNative(Native Method)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at java.lang.reflect.Method.invoke(Method.java:507)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:880)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:638)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at dalvik.system.NativeStart.main(Native Method)
09-17 15:26:49.299: E/AndroidRuntime(3392): Caused by: java.lang.NullPointerException
09-17 15:26:49.299: E/AndroidRuntime(3392):     at com.example.xmldownloader.MainActivity.onCreate(MainActivity.java:58)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1662)
09-17 15:26:49.299: E/AndroidRuntime(3392):     ... 11 more 
```

有人可以帮我吗？或者指出，我做错了什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:18:43.447

```
txt1.setText(data.getTournament().get(0).get(0).getTeam1().toString()); 
```

it is not a code, where you would like to look at it! Please split it into one statement per line, and log it!

Exactly the same it was the problem [here](https://stackoverflow.com/questions/12452663/force-closed-with-null-pointer-exception-in-android/12452802#12452802) too.

# c# - 用户控件中的 INotifyPropertyChanged

> ID：12466216
> 
> 赞同：14
> 
> 时间：2012-09-17T19:54:12.670
> 
> 标签：c#, silverlight-4.0

我有一个从 TextBox 控件继承的自定义控件。我想`INotifyPropertyChanged`在我的自定义控件中实现接口。

```
public class CustomTextBox : TextBox, INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    protected void NotifyPropertyChanged(string info)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(info));
    }
} 
```

我的问题是当我尝试引发 PropertyChanged 事件时，PropertyChanged 事件处理程序始终为空。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-17T19:56:15.230

> PropertyChanged 事件处理程序始终为空。

`PropertyChanged`在某些人订阅该事件之前，这始终是正确的。

但是，通常，如果您要制作自定义控件，则不会使用`INotifyPropertyChanged`. 在这种情况下，您将改为创建[自定义依赖属性。](http://msdn.microsoft.com/en-us/library/cc903933%28v=vs.95%29.aspx)通常，依赖对象（即：控件）都将使用依赖属性，而 INPC 由成为`DataContext`这些对象的类使用。这允许绑定系统正常工作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-17T20:03:13.750

UI 代码使用 PropertyChanged 事件，但不是您正在编写的那个意义上的事件。控件从不实现 INPC（INotifyPropertyChanged 的​​缩写），它们绑定到*已实现*INPC 的对象。这样，某些 UI 属性，例如 TextBox 控件上的**Text**属性绑定到此类的属性。这是 MVVM 架构的基础。

例如，您将编写以下 XAML 代码：

```
<TextBlock x:Name="txtBox" Text="{Binding Title}" /> 
```

并且您以下列方式在代码中设置 TextBlock（或其任何祖先，DataContext 被传播）的数据上下文：

```
txtBox.DataContext = new Movie {Title = "Titanic"}; 
```

现在对于班级本身：

```
public class Movie : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    protected void NotifyPropertyChanged(string info)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(info));
    }

    private string _title;
    public string Title
    {
        get { return _title; }
        set
        {
            if (_title == value) return;

            _title = value;
            NotifyPropertyChanged("Title");
        }
    }
} 
```

现在，无论何时更改`Title property`，无论是在代码中还是通过其他绑定，UI 都会自动刷新。这是有关[数据绑定](https://docs.microsoft.com/en-us/dotnet/desktop/wpf/data/data-binding-overview?view=netdesktop-5.0)和[MVVM](https://docs.microsoft.com/en-us/archive/msdn-magazine/2009/february/patterns-wpf-apps-with-the-model-view-viewmodel-design-pattern)的更多信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-12T02:03:30.300

像我在评论中说的那样做。它不像你那样工作。只需创建一个额外的类并`Notification Interface`在那里实现并将这个类应用于`DataContext`. `UserControl`它会像你需要的那样工作。

```
 public partial class W3 : UserControl
    {
        WeatherViewModel model = new WeatherViewModel();

        public W3()
        {
            InitializeComponent();
            this.DataContext = model;
        }

        public void UpdateUI(List<WeatherDetails> data, bool isNextDays)
        {
            model.UpdateUI(data, isNextDays);
        }
    }

    class WeatherViewModel : INotifyPropertyChanged
    {     

        public void UpdateUI(List<WeatherDetails> data, bool isNextDays)
        {
            List<WeatherDetails> weatherInfo = data;
            if (weatherInfo.Count != 0)
            {
                CurrentWeather = weatherInfo.First();
                if (isNextDays)
                    Forecast = weatherInfo.Skip(1).ToList();
            }
        }

        private List<WeatherDetails> _forecast = new List<WeatherDetails>();

        public List<WeatherDetails> Forecast
        {
            get { return _forecast; }
            set
            {
                _forecast = value;
                OnPropertyChanged("Forecast");
            }
        }

        private WeatherDetails _currentWeather = new WeatherDetails();

        public WeatherDetails CurrentWeather
        {
            get { return _currentWeather; }
            set
            {
                _currentWeather = value;
                OnPropertyChanged("CurrentWeather");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void OnPropertyChanged(string propertyName)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    } 
```

# python - Python CTRL-C 退出没有回溯？

> ID：12466221
> 
> 赞同：3
> 
> 时间：2012-09-17T19:54:39.617
> 
> 标签：python, python-2.7, exit, traceback

为学习目的构建一个简单的“石头、纸、剪刀”的 Python 游戏。

我在这里阅读了其他一些关于退出 Python 而没有回溯的帖子。我正在尝试实现它，但仍然得到追溯！一些 Python 奇才可以指出这个 Python 假人有什么问题吗？这个想法是单击 RETURN（或键入“yes”或“y”将使程序再次运行 play()，但按 CTRL-C 将关闭它而不会回溯。我使用的是 Python 2.7。

```
 # modules
    import sys, traceback
    from random import choice

    #set up our lists
    ROCK, PAPER, SCISSORS = 1, 2, 3
    names = 'ROCK', 'PAPER', 'SCISSORS'

    #Define a function for who beats who?
    def beats(a, b):
        return (a,b) in ((PAPER, ROCK), (SCISSORS, PAPER), (ROCK, SCISSORS))

    def play():
        print "Please select: "
        print "1 Rock"
        print "2 Paper"
        print "3 Scissors"
        # player choose Rock, Paper or Scissors
        player_choice = int(input ("Choose from 1-3: "))
        # assigns the CPU variable a random CHOICE from a list.
        cpu_choice = choice((ROCK, PAPER, SCISSORS))

        if cpu_choice != player_choice:
            if beats(player_choice, cpu_choice):
                print "You chose %r, and the CPU chose %r." % (names[player_choice - 1], names[cpu_choice - 1])
                print "You win, yay!!"
            else:
                print "You chose %r, and the CPU chose %r." % (names[player_choice - 1], names[cpu_choice - 1])
                print "You lose. Yuck!"
        else:
            print "You chose %r, and the CPU chose %r." % (names[player_choice - 1], names[cpu_choice - 1])
            print "It's a tie!"

        print "Do you want to play again? Click RETURN to play again, or CTRL-C to exit!"

        next = raw_input("> ")

        # THIS IS WHAT I'M WORKING ON - NEED TO REMOVE TRACEBACK!
        if next == "yes" or "y":
            try:
                play()
            except KeyboardInterrupt:
                print "Goodbye!"
            except Exception:
                traceback.print_exc(file=sys.stdout)
            sys.exit(0)
        elif next == None:
            play()
        else:
            sys.exit(0)

# initiate play() !
play() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:09:46.347

尝试重构你的主循环；更多类似的东西：

```
try:
    while (play()):
        pass
except KeyboardInterrupt:
    sys.exit(0) 
```

`play`看起来像：

```
def play():
    _do_play() # code for the actual game

    play_again = raw_input('play again? ')
    return play_again.strip().lower() in ("yes", "y") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T20:07:13.910

您调用`play()`了两次，因此您需要将*两种*情况都放在`try`/`except`块中：

```
if next in ("yes", "y"):
    try:
        play()
    except KeyboardInterrupt:
        print "Goodbye!"
    except Exception:
        traceback.print_exc(file=sys.stdout)
    sys.exit(0)
elif next is None:
    try:
        play()
    except KeyboardInterrupt:
        print "Goodbye!"
    except Exception:
        traceback.print_exc(file=sys.stdout)
        sys.exit(0)
else:
    sys.exit(0) 
```

我已经纠正了另外两个问题，最好在 python中测试`None`with ，而你的第一个测试不起作用，因为它被解释为与中间的 an分开。总是被视为因此您永远不会来到代码中的其他分支。`is``if``next == "yes" or "y"``next == "yes"``"y"``or``"y"``True`

请注意，我怀疑上面的代码可以进一步简化，但是您根本没有向我们展示您的`play()`功能，所以您让我们猜测您要做什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T20:03:48.590

一个问题是您需要将`raw_input`语句`try` `except KeyboardInterrupt`和实际`play`函数一起包含在子句中。例如

```
try:
   nxt = raw_input('>')
   if nxt.lower().startswith('y') or (nxt.strip() == ''):
      play()
   else:
      sys.exit(0)
except KeyboardInterrupt:
   sys.exit(0)
except Exception:
   traceback.print_exc(file=sys.stdout) 
```

# ruby-on-rails - 如何制作可点击的链接以对网页上的表格进行排序，ror

> ID：12466224
> 
> 赞同：0
> 
> 时间：2012-09-17T19:55:14.933
> 
> 标签：ruby-on-rails, ruby-on-rails-3, web-applications, ruby-on-rails-3.1, haml

我是 ROR 的新手，我正在尝试一些基本语法

如果我有一个记录表，则在 index.html.haml 中显示我的所有记录。而且我想通过表格的某些属性对其进行排序。

举些例子

## 姓名年龄

必应 32
啧啧 20

我想让名字和年龄是可点击的，这样我就可以按那个键对表格进行排序。问题是我对逻辑感到困惑。

到目前为止，我知道我必须修改 index.html.haml ，然后将一些数据发送回控制器，然后控制器进行某种 ruby​​ 排序，然后将表发送回看法。

有人可以提供一些指导如何实现级别的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:07:26.957

您可以从大量 Ror 书籍中学习 Ror 基础知识，但这只是为了让您入门

在控制器中：

```
@records = YourTable.all.sort_by { |r| r.bing } 
```

在视图中：

```
<% @records.each do |record| %>
  <%= record %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:28:00.570

您也可以通过 jQuery 而不是在 Rails 中执行此操作，这样可以节省流量并且不需要刷新页面。例如查看这些

[http://datatables.net/](http://datatables.net/)

或者

[http://tablesorter.com/docs/](http://tablesorter.com/docs/)

# pdf - 自动链接到 PDF

> ID：12466225
> 
> 赞同：0
> 
> 时间：2012-09-17T19:55:15.797
> 
> 标签：pdf, hyperlink, download, drupal-7

我目前正在使用 Drupal 7 进行开发。

我的客户将在线上传 PDF 到文件夹。我需要链接以根据文件夹中的内容自动填充到内容页面上。

因此，如果文件夹中有 5 个 PDF，Drupal 将自动显示 5 个指向 PDF 的唯一下载链接。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:16:53.367

我找到了解决方案。

```
<?php
if ($handle = opendir('/path/to/uploaded_files')) {
while (false !== ($file = readdir($handle))) {
if (substr($file,0,1) == ".") continue;
if (is_dir($file)) continue;  
if (substr($file,-3,3) != "pdf") continue;
echo '<a href="';
echo $file;
echo '" target="_blank">';
echo $file;
echo '</a><br>';
}
closedir($handle);
}
?> 
```

# java - 使用 Java 创建异常的迭代器问题

> ID：12466226
> 
> 赞同：1
> 
> 时间：2012-09-17T19:55:17.340
> 
> 标签：java, concurrency, java.util.concurrent

```
String input from keyboard
Vector<String> myVector = new Vector<String>(someArray.length);   //assume Vector is populated
Iterator<String> itr = myVector.iterator();

for loop begins
    while(itr.hasNext() && itr.next().equals(input)){
       itr.remove();
    }

    ...

    while(itr.hasNext()    // is this the problem source?
     run more code  

for loop ends 
```

当当前元素等于一个字符串`input`时，我想删除该元素，否则继续迭代。我在这里不断收到并发异常。

我还应该做什么？我应该把我的 itr.next 搬到别处吗？

**问题：我想要这样的逻辑，如果当前向量元素等于目标，我希望它从向量中删除。我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:19:09.173

I do not know why you are getting concurrent modification exceptions, because removing items through an iterator is legitimate: according to the documentation,

> If the Vector is structurally modified at any time after the Iterator is created, in any way **except through the Iterator's own remove or add methods**, the Iterator will throw a `ConcurrentModificationException`.

To answer your question about removing from the vector all elements that are equal to target, the simplest solution is to use `Vector`'s [`removeAll`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html#removeAll%28java.util.Collection%29) method.

```
myVector.removeAll(Collections.singletonList(input)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T19:58:35.557

A`ConcurrentModificationException`可以在遍历集合并且不小心从中删除元素时抛出。

我建议您单独构建一个`List`包含要删除的元素，并`Vector`在循环完成执行后将它们全部从原始元素中删除。

其他建议：

您还可以遍历列表的副本。

使用 foreach 循环：

```
for (String value : myVector) {
  ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T19:59:31.560

你初始化向量的内容了吗？您在构造函数中设置它的长度，但我看不到您实际上是在向它添加字符串，这将导致 NullPointerException。

您可能希望使用以下方法初始化 Vector：Arrays.asList(someArray)

当有一个正确的向量时，你不需要在 for 循环中为迭代器设置一个 while 循环

像这样的东西应该工作：

```
String[] someArray = new String[]{ "A", "B", "C" };
Vector<String> myVector = new Vector<String>(Arrays.asList(someArray));
Iterator<String> itr = myVector.iterator();
while(itr.hasNext()){
   String myString = itr.next();
   if (myString.equals(input)) itr.remove();
} 
```

**编辑**您得到异常的原因很可能是因为您错误地调用了 .next 方法。.next 方法只能在每次`hasNext`调用后调用一次，.remove 方法只能在每次调用后调用一次`.next`。由于您省略了代码中的细节，因此很难准确定位问题。但总的来说，不需要 for 循环。一个while循环应该足够了，但你不应该在if语句中使用`hasNext` **and 。** `next`

使用迭代器进行迭代的正确方法是（在伪代码中）：

```
while (iterator has more items) {
    get the next item
    do something with the item (remove it if it should be removed, or handle it in another way)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T20:07:31.930

我只是避免整个迭代器。这应该做你想要的：

```
 while (myVector.remove(input)) {
    // this should get them all
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T20:10:17.530

尝试像这样包装你的向量：

```
Vector vector = Collections.synchronizedCollection(vector); 
```

和一个简短的 javadoc 解释：

> 返回由指定集合支持的同步（线程安全）集合。为了保证串行访问，对后备集合的所有访问都是通过返回的集合完成的，这一点至关重要。
> 
> 当迭代它时，用户必须手动同步返回的集合：

```
Collection c =
 Collections.synchronizedCollection(myCollection);
      ...   synchronized(c) {
       Iterator i = c.iterator(); // Must be in the synchronized block
       while (i.hasNext())
          foo(i.next());   } 
```

# php - PHP Web 应用程序托管 - 静态 IP 问题

> ID：12466229
> 
> 赞同：0
> 
> 时间：2012-09-17T19:55:24.213
> 
> 标签：php, web-hosting

全部 - 我在 CakePHP 上设计了一个 Web 应用程序并托管在个人机器上。我买了一个静态IP，通过静态IP，我们可以访问互联网上的网站。现在，我为我的 Web 应用程序购买了一个域，并将请求从域转发到静态 IP。当我们输入域名时，它会将我们带到 Web 应用程序，但问题是，每当我将鼠标悬停在任何链接上时，我在浏览器的状态栏中看到的是静态 IP，而不是域名。

请帮助我解决问题。

感谢您对此的回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:50:25.147

icn 是正确的。确保您在域中有 IP 地址的 A 记录。

假设您的域也使用 GoDaddy，**[本文](http://support.godaddy.com/help/article/7920/adding-or-editing-a-records?locale=en)**将阐明如何通过其域管理器添加 A 记录。

我会： 1\. Ping 域以查看它正在 ping 到哪里。2\. 添加您的 A 记录 3\. 几个小时后（允许 DNS 传播）再次 ping 它。它现在应该 ping 到*您的*IP 地址。

最良好的祝愿

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:03:50.453

您需要将“A/AAAA 记录”（不转发）添加到您的 DNS 管理器。设置域名为你的域名，IP地址为你的IP地址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T01:11:57.563

如果您可以找到 DNS 管理器（在域管理器页面上单击启动），您将看到第一个标题是“A - 主机”，在“主机”列下，您会看到一个 @ 。单击铅笔编辑 @ 的“指向”列，并将此值设置为您的 IP 地址。

如果您看到一条名为 www 的记录，请将此指向 @ 。

之后大约需要一个小时到 24 小时才能自行修复。您可以按照 Mark 的建议使用 ping 工具。

# python - 功能打印正确的输出和无

> ID：12466233
> 
> 赞同：3
> 
> 时间：2012-09-17T19:55:40.830
> 
> 标签：python

我已经定义了这个函数，它接受一个单词和一串必需的字母，如果单词至少使用了所有必需的字母，则返回 True。当我运行它时，它给了我正确的输出，但我不明白为什么它也输出“无”。

这是我的代码：

```
 def uses_all(word, allused):
    boolean = False
    for e in allused:
        if e in word:
            boolean = True
        else:
            boolean = False
            break 
    print boolean 

print uses_all('facebook', 'd') 
```

输出：

```
False
None 
```

对我哪里出错的评论将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T19:57:35.743

你的程序打印`boolean`False，所以你知道它是从哪里来的。

如果一个函数没有显式返回任何东西，它会自动返回 None，当你使用

```
print uses_all('facebook', 'd') 
```

您要求它打印`uses_all`返回的内容，即无。因此：

```
False
None 
```

顺便说一句，我认为你的功能可以更简洁地写成

```
def uses_all(word, allused):
    return all(e in word for e in allused) 
```

可以提高效率，但这对于政府工作来说应该足够了。[all](http://docs.python.org/library/functions.html#all)函数非常方便（另请参见 参考资料）`any`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T19:57:41.813

因为`uses_all()`没有return语句。如果你从函数返回一个值，它将被打印而不是 None，当然除非你`return None`:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T19:57:20.080

您打印函数的结果，但函数没有`return`任何作用（--> 无）

如果您希望结果为`False False`，请添加`return boolean`函数。

或者，如果一个`False`就足够了，您可以更改`print uses_all('facebook', 'd')`为`uses_all('facebook', 'd')`

# javascript - 在没有内部错误 500 的情况下无法检查变量是否为空

> ID：12466236
> 
> 赞同：0
> 
> 时间：2012-09-17T19:55:57.273
> 
> 标签：javascript, smarty

一个对象在控制台中显示为 null：

```
console.log(document.getElementById("id"+"{$id_attribute}")); 
```

给`null`. 编辑： {$id_attribute} 是聪明的（服务器语言），它被编码在一个 .tpl 文件中。但随后我尝试检查它是否为 null，如下所示：

```
if (document.getElementById("id"+"{$id_attribute}") == null) {
    alert('something wrong');
} 
```

我收到内部错误 500 并且我的页面无法正确显示....

知道我做错了什么吗？

谢谢你。

# plsql - PL SQL 处理触发错误

> ID：12466237
> 
> 赞同：1
> 
> 时间：2012-09-17T19:56:09.393
> 
> 标签：plsql, oracle10g

我有数千个 sql`INSERT INTO`行的脚本文件。其中一些行将插入数据库中已经存在的数据，所以我想捕获这些错误并绕过它。有没有办法捕捉触发器抛出的错误并忽略它？

```
ERROR at line 1:
ORA-20053: Username must be unique
ORA-06512: at "MY_TRIGGER", line 18
ORA-04088: error during execution of trigger 'MY_TRIGGER'
ORA-06512: at line 3 
```

我可以通过捕获 a`DUP_VAL_ON_INDEX`然后做 来使用独特的约束来做到这一点`NULL`，但这不适用于上述触发错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:00:25.587

您可以定义自己的异常并使用它，就像使用默认异常处理程序之一（如`dup_val_on_index`.

```
DECLARE
  l_unique_username_ex exception;
  pragma exception_init( l_unique_username_ex, -20053 );
BEGIN
  <<your INSERT statement>>
EXCEPTION
  WHEN l_unique_username_ex
  THEN
    NULL; -- Ignore the error
END; 
```

不过，一般来说，修改脚本更有意义，以便它们只尝试插入不存在的行，而不是让触发器尝试标记它们然后忽略错误。

# jakarta-ee - 加载WEB-INF文件夹下的资源

> ID：12466248
> 
> 赞同：0
> 
> 时间：2012-09-17T19:56:44.957
> 
> 标签：jakarta-ee, servlets

我在 WEB-INF 目录中有一个 Web 应用程序和 XML 文件。我需要加载这个 xml 文件。是否有其他方式加载它而不是使用`getServletContext().getResourceAsStream("/WEB-INF/test.xml");`

我尝试了类似的选项`Thread.currentThread().getContextClassLoader().getResourceAsStream("/WEB-INF/test.xml");`

它不工作。

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:25:38.643

您可以在应用程序中使用（jsp - servlet）从`WEB-INF`文件夹中访问资源。`/WEB-INF/test.xml`

```
<!%@ taglib uri="/WEB-INF/tiles-jsp.tld" prefix="tiles" %> 
```

如果您想让它对 Web 用户可用，则不能直接访问它。为了让用户直接访问它，必须有某种接口可以从 WEB-INF 文件夹中公开文件（例如，读取文件 /WEB-INF/test.xml 并将其输出到 jsp/servlet 的 jsp )

**更新**

要使用 Servlet 读取文件，请使用以下命令：

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    StringBuffer strContent = new StringBuffer("");
    int ch;
    PrintWriter out = response.getWriter();
    try {
        String path = getServletContext().getRealPath("/WEB-INF/newfile.xml");
        File file = new File(path);
        FileInputStream fin = null;
        try {
            fin = new FileInputStream(file);
            while ((ch = fin.read()) != -1) {
                strContent.append((char) ch);
            }
            fin.close();
        } catch (FileNotFoundException e) {
            System.out.println("File " + file.getAbsolutePath()
                    + " could not found");
        } catch (IOException ioe) {
            System.out.println("Exception while reading the file" + ioe);
        }
        System.out.println("File contents :");
        System.out.println(strContent);
    } finally {
        out.close();
    }
} 
```

这将从中读取一个名为 newfile.xml 的文件并将`WEB-INF`其内容输出到控制台。输出将类似于：

> 文件内容：
> 
> <一个>
> 
> <b>xxxx</b>
> 
> </a>

# java - Spring可以/应该重用Hibernate Session进行子事务（REQUIRES_NEW）

> ID：12466253
> 
> 赞同：1
> 
> 时间：2012-09-17T19:57:06.587
> 
> 标签：java, spring, hibernate, transactions

我有一个事务服务调用第二个具有 REQUIRES_NEW 传播的服务。

激活日志我看到 Spring 在创建子事务时创建了一个新的 Hibernate Session，即使当前线程已经有一个打开的 Session。

```
[DEBUG] org.springframework.transaction.interceptor.AbstractFallbackTransactionAttributeSource.getTransactionAttribute(AbstractFallbackTransactionAttributeSource.java:106) Adding transactional method 'executeProcessed' with attribute: PROPAGATION_REQUIRES_NEW,ISOLATION_DEFAULT; ''
[DEBUG] org.springframework.orm.hibernate3.HibernateTransactionManager.doGetTransaction(HibernateTransactionManager.java:437) Found thread-bound Session [org.hibernate.impl.SessionImpl@467743d7] for Hibernate transaction
[DEBUG] org.springframework.transaction.support.AbstractPlatformTransactionManager.handleExistingTransaction(AbstractPlatformTransactionManager.java:415) Suspending current transaction, creating new transaction with name [com.microsigns.ds.businesslogic.rendering.service.impl.PipelineDataServiceImpl.executeProcessed]
[DEBUG] org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:493) **Opened new Session** [org.hibernate.impl.SessionImpl@3d4b1aad] for Hibernate transaction
[DEBUG] org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:504) Preparing JDBC Connection of Hibernate Session [org.hibernate.impl.SessionImpl@3d4b1aad]
[DEBUG] org.springframework.orm.hibernate3.HibernateTransactionManager.doBegin(HibernateTransactionManager.java:569) Exposing Hibernate transaction as JDBC transaction [jdbc:postgresql://localhost:5432/ds, UserName=microsignsdds, PostgreSQL Native Driver] 
```

重用会话在性能方面不应该更好吗？这也将避免必须在子事务中重新加载或重新附加对象。我在这里想念什么？

这种行为在 org.springframework.orm.hibernate3.HibernateTransactionManager 中被硬编码：

```
xObject.getSessionHolder().setSynchronizedWithTransaction(true); 
```

我正在使用休眠 3.6 和 Spring 3.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T20:03:22.853

不，它不应该重用会话。如果您需要一个新事务，那么您需要能够修改、提交、回滚等子事务中的所有内容。一个休眠会话可以被认为是事务缓存，它保存事务数据。

# python - 我怎样才能避免这种竞争条件？

> ID：12466260
> 
> 赞同：3
> 
> 时间：2012-09-17T19:57:44.877
> 
> 标签：python, sql, postgresql, synchronization, race-condition

我有一个分布式任务队列，其任务如下所示：

```
# creates a uniquely-named file
new_path = do_work()

old_path = database.query('select old path')
unlink(old_path)

database.query('insert new path') 
```

这里有一个竞争条件：如果任务队列软件同时启动其中两个任务，它们将从`old_path`数据库中得到相同的结果，并且竞争失败者的取消链接调用失败（将失败者的新路径从未来取消链接中孤立出来） ）。

有没有办法可以构建这个来绕过这场比赛？如果需要，我可以从当前的设计中丢弃任何东西。具体来说，我使用的是 PostgreSQL、Python 和 Celery。我知道我可能可以使用表范围的锁定/将 psycopg2 的事务级别更改为 SERIALIZABLE，但我不确定是否可以避免这种竞争条件。表级锁定还意味着我必须为每个附加任务引入一个新表（以免它们相互阻塞），这听起来不太吸引人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T23:21:45.080

我强烈建议您研究已经解决此问题的工具，例如[PGQ](http://wiki.postgresql.org/wiki/PGQ_Tutorial)。排队比你想象的要难得多。这不是你想重新发明的轮子。

## 并发难

米海的回答看起来表面上很好，但在并发操作中却有所下降。

两个并发 UPDATE 可以选择同一行（在他的示例中具有`used_flag = FALSE`）。其中一个将获得锁并继续。另一个将等到第一次运行并提交。当提交发生时，第二次更新将获得锁，重新检查它的条件，找到不再匹配的行，并且什么都不做。因此，除了一组并发更新中的一个之外，所有并发更新都可能返回一个空集。

在`READ COMMITTED`模式下，您仍然可以获得不错的结果，大致相当于单个会话`UPDATE`连续循环。在`SERIALIZABLE`模式下，它将无可救药地失败。尝试一下; 这是设置：

```
CREATE TABLE paths (
    used_flag boolean not null default 'f',
    when_entered timestamptz not null default current_timestamp,
    data text not null
);

INSERT INTO paths (data) VALUES
('aa'),('bb'),('cc'),('dd'); 
```

这是演示。尝试三个并发会话，逐步进行。在 READ COMMITTED 中执行一次，然后在所有会话`SERIALIZABLE`中使用`BEGIN ISOLATION LEVEL SERIALIZABLE`而不是 plain再次执行`BEGIN`。比较结果。

```
SESSION 1             SESSION2         SESSION 3

BEGIN;
                                       BEGIN;

UPDATE      paths
    SET     used_flag = TRUE
    WHERE   used_flag = FALSE
    RETURNING data;

                      BEGIN;

                      INSERT INTO
                      paths(data)
                      VALUES
                      ('ee'),('ff');      

                      COMMIT;               
                                       UPDATE      paths
                                           SET     used_flag = TRUE
                                           WHERE   used_flag = FALSE
                                           RETURNING data;

                      BEGIN;

                      INSERT INTO
                      paths(data)
                      VALUES
                      ('gg'),('hh');      

                      COMMIT;        

COMMIT; 
```

在`READ COMMITTED`第一个 UPDATE 成功并产生四行。第二个产生剩余的两个`ee`，并`ff`在第一次更新运行后插入并提交。`gg`并且`hh`不会被第二次更新返回，即使它在提交后实际执行也是如此，因为它已经选择了它的行并且在插入它们时正在等待锁定。

孤立地，`SERIALIZABLE`第一次 UPDATE 成功并产生四行。第二个失败了`ERROR: could not serialize access due to concurrent update`。在这种情况下`SERIALIZABLE`，隔离不会帮助你，它只会改变失败的性质。

`UPDATE`如果没有显式事务，当s 并发运行时也会发生同样的事情。如果您使用显式事务，则无需摆弄时间就可以更轻松地进行演示。

## 只选一排怎么样？

如上所述，系统工作正常，但是如果您只想获取最旧的行怎么办？因为`UPDATE`在阻塞锁之前选择了要操作的行，所以您会发现在任何给定的事务集中只有一个`UPDATE`会返回结果。

您会想到以下技巧：

```
UPDATE      paths
    SET     used_flag = TRUE
    WHERE entry_id = (
        SELECT entry_id
        FROM paths 
        WHERE used_flag = FALSE
        ORDER BY when_entered
        LIMIT 1
    )
    AND used_flag = FALSE
    RETURNING data; 
```

或者

```
UPDATE      paths
    SET     used_flag = TRUE
    WHERE entry_id = (
        SELECT min(entry_id)
        FROM paths 
        WHERE used_flag = FALSE
    )
    AND used_flag = FALSE
    RETURNING data; 
```

但这些不会按您的预期工作；当同时运行时，两者都会选择相同的目标行。一个会继续，一个会阻塞锁直到第一次提交，然后继续并返回一个空结果。如果没有第二个`AND used_flag = FALSE`，我认为他们甚至可以返回重复项！在上面的演示表中添加一`entry_id SERIAL PRIMARY KEY`列后尝试。`paths`为了让他们参加比赛，就`LOCK TABLE paths`在第三节；请参阅我在以下链接中给出的示例。

[我在另一个答案](https://stackoverflow.com/questions/11761281/in-postgresql-do-multiple-updates-to-different-rows-in-the-same-table-having-a/11769059#11769059)中写了这些问题，并且在我的答案[中多线程会导致受约束集上的重复更新](https://stackoverflow.com/questions/11914804/can-multiple-threads-cause-duplicate-updates-on-constrained-set)。

说真的，去看看PGQ。它已经为你解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:03:20.080

不要选择旧路径，而是执行以下操作：

```
old_path = database.query('
    UPDATE      paths
        SET     used_flag = TRUE
        WHERE   used_flag = FALSE
        RETURNS data'); 
```

该`RETURNS`子句允许您从刚刚更新的行（/deleted/inserted）中“选择”值。

指定该`used_flag`行是否已被另一个 Python 实例使用。使用该`WHERE used_flag = FALSE`位将确保您没有选择已经使用过的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:03:33.860

如果任务队列软件能够为请求提供唯一标识符，那么也许您可以将每个请求的 old_path 存储在不同的行中。如果没有，也许您可​​以为每个请求生成一个密钥并用它存储路径。

# regex - JavaScript 正则表达式中的前瞻

> ID：12466262
> 
> 赞同：3
> 
> 时间：2012-09-17T19:58:07.490
> 
> 标签：regex, lookahead

使用 JavaScript，我试图替换 html 标记内的属性，并提出了这个正则表达式：

```
/<\s*tag[^>]*(attr)=['"]{1,1}([^'"\s]*)['"]{1,1}/ig; 
```

这行得通。但是，我希望能够指定查找包含属性值的相同类型的引号。因此，例如，我想指定这是否是表单`<tag attr='data'>`，在第二个引号中查找单引号，而不是双引号。反之亦然`<tag attr="data">`；将 SECOND 标记与双引号匹配，而不是单引号。这是为了帮助我保护函数调用免受格式奇特的 HTML 的影响。

那么，我该如何实现呢？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:02:56.577

试试这个：

```
/<tag[^>]*attr=(['"])(?:(?!\1)\S)*\1/ig; 
```

**解释：**

```
<tag     # Match <tag (\s* is not needed since whitespace is illegal here)
[^>]*    # Match any non-> characters
attr=    # Match "attr="
(['"])   # Match a quote, remember which kind; {1,1} can be dropped (it's a no-op)
(?:      # Try to match
 (?!\1)  #  (unless it's the corresponding closing quote)
 \S      #  any non-whitespace character
)*       # any number of times
\1       # Match the corresponding closing quote 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:03:42.347

试试这个：

```
/<\s*tag[^>]*(attr)=(['"]{1,1})([^'"\s]*)\2{1,1}/ig; 
```

# linux - SVN不提示输入用户名和密码

> ID：12466263
> 
> 赞同：1
> 
> 时间：2012-09-17T19:58:21.890
> 
> 标签：linux, svn

> **可能重复：**
> [在提交和签出中启用密码](https://stackoverflow.com/questions/6000007/enable-password-in-both-commit-and-checkout)

我在我们的 RedHat Enterprise 6.3 Linux 服务器上安装了 subversion（版本 1.6.11）。然后我使用以下命令创建了一个存储库：

```
svnadmin create /home2/svnrepo 
```

然后我将以下条目添加到**/home2/svnrepo/conf/svnserve.conf**文件中：

```
anon-access = none
auth-access = write
password-db = passwd
realm = My SVN Repository 
```

**我通过在/home2/svnrepo/conf/passwd**文件中添加以下条目来添加一个 svn 用户：

```
joe = joepw 
```

我使用以下命令将项目导入 SVN：

```
svn import /home/joe/projects/myproject file:///home2/svnrepo/myproject 
```

然后我启动了 SVN 服务守护进程：

```
svnserve -d 
```

当我尝试在另一台机器上使用以下命令检查项目时，系统**不会提示我输入密码**。但是，该项目正在检查中。为什么呢？

```
svn co svn://54.245.0.1/home2/svnrepo/myproject 
```

请指教。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T22:50:18.483

我发现我在 svnserve.conf 文件的末尾添加了这些条目。我将这些条目移至 [general] 部分。这解决了问题！

# events - Titanium - 当我单击行时，我的 TableViewRow 颜色的内容被覆盖

> ID：12466265
> 
> 赞同：0
> 
> 时间：2012-09-17T19:58:33.200
> 
> 标签：events, styles, titanium, tableview, appcelerator

我正在研究 Titanium 并为 iOS 开发，我创建了一个 TableView，每行都有一个按钮，当您单击该行时，另一个按钮会添加到该行中，如果再次单击该按钮，则会删除该按钮，每个控件都有自己的行为和自己的风格。我正在处理的问题是，当我单击该行时，按钮上的样式被覆盖，我的意思是，如果任何按钮具有特定的背景颜色，则所述颜色将被覆盖并替换为行的背景颜色，字体颜色也会发生这种情况。

这是该行在被单击之前的外观截图：

![在此处输入图像描述](../Images/7ec8ce2087e22f74a27277d6a5864a3a.png)

下一个是当我单击该行并添加另一个按钮时：

![在此处输入图像描述](../Images/58445d7990ab713a1bc0fc7d4e63f129.png)

看看小灰色按钮背景颜色如何更改为与行背景颜色相同的颜色。当我单击该行使按钮消失并再次单击该行使其重新出现时，也会发生同样的情况：

![在此处输入图像描述](../Images/36bef96f2bf2041cb644e279b40c7546.png)

这就是我定义行和按钮的方式：

```
function addToDo(title, priority, taskId){
    var that = {};

    var row = Ti.UI.createTableViewRow({
        height:80, 
        value : taskId,
        backgroundSelectedColor : 'transparent',
        selectedBackgroundColor : 'transparent',
        selectedColor : 'transparent',
        item_type : 'ROW'
    });

    that.currentPriority = priority;

    that.resolveColor = function(tmpPriority){
        switch(tmpPriority){

            case 0: backgroundColorPriority = "#da362a"; break;
            case 1: backgroundColorPriority = "#da6c2a"; break;
            case 2: backgroundColorPriority = "#da962a"; break;
            case 3: backgroundColorPriority = "#dacb2a"; break;             
        }
        return backgroundColorPriority;
    }

    var rowLayout = Ti.UI.createView({
        backgroundColor : 'transparent'
    });

    var checkbox = Ti.UI.createButton({
        top: 25,
        left: 5,
        width: 30,
        height: 30,
        borderColor: 'white',
        borderWidth: 2,
        borderRadius: 1,
        backgroundColor: '#b1b1b1',
        backgroundImage: 'NONE',
        item_type : 'CHECKBOX',
        value: false //value is a custom property in this case here.
    });

    row.add(checkbox);

    //Attach some simple on/off actions
    checkbox.on = function(item) {
        this.backgroundColor = '#62b425';
        item.backgroundColor = "#101010";
        this.value = true;
    };

    checkbox.off = function(item) {
        this.backgroundColor = '#b1b1b1';
        item.backgroundColor = that.resolveColor(item.currentPriority);
        this.value = false;
    };

    // Create a Label.
    var todoTitleLabel = Ti.UI.createLabel({
        text : title,
        color : 'white',
        font : {fontSize:11},
        left : 40,
        top : 35,
        textAlign : 'center'
    });

    // Add to the parent view.
    row.add(todoTitleLabel);

    // Create a Button.
    var deleteTask = Ti.UI.createButton({
        title : 'Borrar',
        height : 50,
        width : 100,
        top : 85,
        left : 110,
        item_type : 'DELETEBUTTON',
        style : Ti.UI.iPhone.SystemButtonStyle.PLAIN,
        color : '#000',
        backgroundSelectedColor : '#F7F8E0',
        selectedColor : '#F7F8E0',
        backgroundColor : '#F7F8E0'
    });

    // Add to the parent view.
    row.expand = function(){
        this.height=160;
        row.add(deleteTask);            
    };

    row.contract = function(){
        this.height=80;
        row.remove(deleteTask);

    };

    var backgroundColorPriority = that.resolveColor(that.currentPriority);      
    row.backgroundColor = backgroundColorPriority;
    that.currentRow = row;

    checkbox.container = that.currentRow;

    return that;
} 
```

这就是我处理行上的点击事件的方式：

```
table.addEventListener('click', function(e){
    if(e.source.item_type == 'CHECKBOX'){
        if(false == e.source.value) {
            e.source.on(e.source.container);
        } else {
            e.source.off(e.source.container);   
        }
    }else if(e.source.item_type == 'DELETEBUTTON'){
        alert('delete button');
    }else if(e.source.item_type == 'ROW'){
        if(!borraState){
            Ti.API.info('IN ' + JSON.stringify(e));
            taskId = e.row.value;
            todoId = tasks[taskId].todoId;
            index = e.index;
            borraLayout.animate(borrarLayoutIn);
            e.source.expand();
            borraState = true;
        }else{
            Ti.API.info('OUT ' + JSON.stringify(e));
            borraLayout.animate(borrarLayoutOut);
            borraState = false;
            e.source.contract();
        }
    }
}); 
```

我不明白为什么单击该行时颜色会被覆盖，即使我在处理事件时尝试重新定义背景颜色，但无济于事。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:44:27.517

我通过将下一个属性添加到我的 TableViewRow 解决了这个问题

```
selectionStyle : Titanium.UI.iPhone.TableViewCellSelectionStyle.NONE 
```

该属性使其在点击/按下/单击/等行时不会显示颜色或效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T08:04:55.840

笔记：

Titanium.UI.iPhone.TableViewCellSelectionStyle 已弃用

改用 Titanium.UI.iOS.TableViewCellSelectionStyle

# java - JSP 更改未在 jBoss 中显示

> ID：12466278
> 
> 赞同：0
> 
> 时间：2012-09-17T19:59:48.997
> 
> 标签：java, jsp, jboss

如果有帮助的话，我对 jBoss 和 JSP 还很陌生，并且有 PHP 背景。

我已经从 subversion 中检查了一个项目，并且正在玩弄 .jsp 页面，修改文本并更改它们以在屏幕上挂起。一旦我这样做了，我再次构建项目，我在 *.jsp 页面上所做的更改不会反映在屏幕上。我是否需要停止，重新启动 jBoss，然后再次构建项目？（那会很疯狂）

不知道我错过了什么，但欢迎任何解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:25:42.647

默认情况下，如果您部署展开的 Web 应用程序（未打包，而是作为文件夹），则每次修改 JSP 时都会自动重新加载内容。
您可以使用您正在使用的 JBoss AS 版本的特定配置来更改此行为。例如，如果您使用的是 JBoss AS 7，请查看本[教程](http://www.mastertheboss.com/jboss-web-server/how-to-deploy-a-web-application-on-the-root-context-on-jboss-as-7)。
希望能帮助到你

# android - 调用 setDisplayChild() 时视图翻转器崩溃；在准备好添加javascript接口的文档上，请帮助

> ID：12466280
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:00:05.447
> 
> 标签：android, jquery, webview, crash, viewflipper

我正在构建一个应用程序项目（我的第二个项目），可以说，它在等待带有 webview 的第二个 viewflipper 布局以加载网页时显示一个初始加载屏幕。加载时的 html 网页调用我的 android java 中的一个函数，`vf.setDisplayedChild(TWO);`但它没有！我已经用烤面包而不是上述功能测试了这个？！这显示得很好。但是，如果我将其设置回displaychild，我的加载屏幕会崩溃并返回到我的main.xml 活动，然后使用viewflipper 重新启动活动并在崩溃和重新加载之间循环！

我怀疑这与我在 oncreate 函数中的 vf 控件和`vf.displaychild`公共`javascriptinterface`类中的调用有关？？！！！但没有知识做更多。

我研究了某种布尔变化监听器，但不认为这是值得做的。

我的代码：

```
package com.......;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.webkit.WebChromeClient;
import android.webkit.WebView;
import android.widget.Toast;
import android.widget.ViewFlipper;

public class Webview  extends Activity {

    ViewFlipper vf;
    private final int ONE = 0;
    private final int TWO = 1;
        private WebView webView;

        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.vf);

            vf=(ViewFlipper)findViewById(R.id.flipper);    
            vf.addView(View.inflate(this, R.layout.load, null), ONE);
            vf.addView(View.inflate(this, R.layout.webview, null), TWO);
                vf.setDisplayedChild(ONE);

            webView = (WebView) findViewById(R.id.webView1);

            webView.getSettings().setJavaScriptEnabled(true);

            webView.getSettings().setBuiltInZoomControls(false);
            webView.setWebChromeClient(new WebChromeClient());
            webView.getSettings().setSupportZoom(false);
            webView.addJavascriptInterface(new JSI(this), "android");
            webView.loadUrl("my wamp dir");

            //failsafe if not shown
            new Handler().postDelayed(new Runnable() {
                @Override
                    public void run() {
                    Toast.makeText(getApplicationContext(), "Sorry There was a problem!\nPlease check your Data/WI-FI connection.", Toast.LENGTH_SHORT).show();
                    finish();
                    }
                }, 30000);

        }

        public class JSI
        {
            Context mContext;

            /** Instantiate the interface and set the context */
            JSI(Context c) {
                mContext = c;
            }

        public void loaded()
        {

            vf.setDisplayedChild(TWO);
            //Toast.makeText(mContext, "Showing!", Toast.LENGTH_SHORT).show();

        }
        }

    } 
```

当然，该函数在 jquery/script ready 函数中调用为：

```
android.loaded(); 
```

对答案的任何帮助表示赞赏！

编辑-------------------------- 已经找到了调试器并且得到了一个异常：只有一个线程可以访问它的设置视图！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:58:36.043

啊啊我不知道`runOnUiThread()` 这对它进行了排序！

```
public void Activated()
        {
            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                   vf.setDisplayedChild(TWO);
                }
            }); 
```

只是注意到我忘记停止我的处理程序延迟执行，如果语句变量错误检查我认为。

# c++ - 如何将第一个值存储在 C++ 骰子游戏中并在下一步进行比较？

> ID：12466282
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:00:26.350
> 
> 标签：c++, dice

我目前正在做一个骰子游戏。用户首先掷一对骰子，假设他掷骰子 1 = 2 和骰子 2 = 3。所以现在总数是 5。现在，他需要再次获得 5（总数）才能获胜，如果他在下一步中没有获得 5，那么他会再次滚动并继续比赛。但是，如果在任何时候，他一共掷了两个，他就输了。

所以，请告诉我如何存储第一轮的价值并将其与下一步行动进行比较。我尝试了一些东西，但它似乎不起作用。

```
#include<iostream>
#include<ctime>      // for the time() function
#include<cstdlib>    // for the srand() and rand() functions
using namespace std;

// Declare variables
//int compInput;
int userInput;
int die1 = 0;
int die2 = 0;
int dieTotal = 0;
int Dice ()
{
    // roll the first die
    die1 = (rand() % 6 ) + 1;
    // roll the second die
    die2 = (rand() % 6 ) + 1;

}

// iniating a second two pair dice function.
int compDice()

{
    Dice();
    dieTotal = die1 + die2;
    return (dieTotal);
}

// User Rolling the dice and calucalting the total here

int userGame()
{
    cout << "\nUser turn --- Press 2 to roll" << endl;
    cin >> userInput;

    if ( userInput == 2 )
    {
        Dice ();
        cout << "\nThe user rolled        Dice 1 = " << die1 << " and Dice 2 = " << die2 << endl;
        cout << "Total = " << die1 + die2 << endl;
    }

    else {
        cout << "Wrong input.";
        //userGame();
    }
    return (die1 + die2 );
}

int checkForWin ()
{
    while (true)
    {

        int result1 = compDice();
        int result = userGame();

        // int finalResult = dieTotal;
        if (result == result1 )
        {
            cout << "\nUser won. Computer looses....m " << endl;
            break;
        }

        else if (result == 2)
        {
            cout << "\nUser looses. Computer won." <<endl;
            break;
        }

        else
        {
        }
    }
}

// Calling for the checkForWin() function in main and the srand.
int main ()
{
    cout << "This is the Dice game. " << endl;

    // set the seed
    srand(time(0));
    checkForWin(); // Initiating the game.
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:13:00.670

在我们的评论聊天/误解之后，我冒昧地复制了您的代码并对其进行了修改（尽可能少地保持您的编码风格 - 我不会在任何未来的项目中推荐这种风格）以产生您想要的结果。让我知道它是否有效（简单的测试表明它有效，可能错过了其他一些怪癖）

```
#include<iostream>
#include<ctime>      // for the time() function
#include<cstdlib>    // for the srand() and rand() functions
using namespace std;

// Declare variables
//int compInput;
int userInput;
int firstRoll = 1;
int die1 = 0;
int die2 = 0;
int dieTotalToMatch = 0;
void Dice ()
{
    // roll the first die
    die1 = (rand() % 6 ) + 1;
    // roll the second die
    die2 = (rand() % 6 ) + 1;

}

// iniating a second two pair dice function.
void compDice()
{
    Dice();
    dieTotalToMatch = die1 + die2;
}

// User Rolling the dice and calucalting the total here

int userGame()
{
    cout << "\nUser turn --- Press 2 to roll" << endl;
    cin >> userInput;

    if ( userInput == 2 )
    {
        Dice ();
        cout << "\nThe user rolled        Dice 1 = " << die1 << " and Dice 2 = " << die2 << endl;
        cout << "Total = " << die1 + die2 << endl;
    }

    else {
        cout << "Wrong input.";
        //userGame();
    }
    return (die1 + die2 );
}

void checkForWin ()
{

    while (true)
    {

        int result = userGame();
        if (firstRoll)
        {
            dieTotalToMatch = result;
            firstRoll = 0;
            continue;
        }
        // int finalResult = dieTotal;
        if (result == dieTotalToMatch )
        {
            cout << "\nUser won. Computer looses....m " << endl;
            break;
        }

        else if (result == 2)
        {
            cout << "\nUser looses. Computer won." <<endl;
            break;
        }

        else
        {
        }
    }
}

// Calling for the checkForWin() function in main and the srand.
int main ()
{
    cout << "This is the Dice game. " << endl;

    // set the seed
    srand(time(0));
    checkForWin(); // Initiating the game.
    cin.ignore();

    return 0;
} 
```

# jquery - Ajaxform 和 jQuery 对话框 - 表单提交两次

> ID：12466287
> 
> 赞同：0
> 
> 时间：2012-09-17T20:00:49.400
> 
> 标签：jquery, ajaxform

这是场景 - 我有一个页面，其中有一个打开 jQuery UI 对话框的链接。对话框中有一个小表单（用于上传图像）。“动作”页面处理并返回图像，该图像旨在返回到对话框。

现在，这一切都按预期工作-但是，由于某种原因，它被处理了两次。从视觉上看，没有任何迹象表明它被提交和处理了两次（我只知道是因为我使用的是 Firebug，并且我试图弄清楚为什么它的处理时间比预期的要长）。

在这里查看以前的答案，建议 jQuery 代码应该在对话框之外 - 但它已经是。我已经用尽了我现在能想到的所有途径。我是 JS/jQuery 的新手，所以我完全有可能遗漏了一些简单的东西。无论哪种方式，指针表示赞赏！我的代码如下...

```
 <head[...]>
 <script>
 $(function() {
 $('#submitImage').bind('click', function(){
    $(".preview").html('');
    $(".preview").html('<img src="/images/elements/loaders/103.png" alt="Uploading...." style="text-align:center;"//>');
    $("#imgadd").ajaxForm({
    clearForm: 'true',
    target: '.preview'
    }).submit();
});
});
 </script> 
```

[......页面的其余部分......]

```
 <!-- Dialog -->

 <div id="customDialog" class="customDialog" title="Upload or Insert Image">

 <form id="imgadd" action="a_blogimgupload.cfm" method="post" enctype="multipart/form-data">
 <input type="file" class="fileInput" name="blogimg" />&nbsp;<input type="submit" id="submitImage" value="Upload" /></form>

 <div class="preview">
 <ul>
 <li><img src="imgthumb.png" alt="" /><a href="javascript:;" title="Insert" onclick="addImage('imgfull.png');return false;">Insert</a></li>
</ul> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:11:57.727

谢谢李。我的在 IE 中多次发帖。我现在也在 IE 中工作。发布我的一些javascript....

```
$(document).ready(function () {
$("#uploadSubmit").button().click(function (e) {
    submitUploadForm();
    e.preventDefault();
    return false;
});

});

function submitUploadForm() {
$(function () {
    $('#reportOptions').ajaxForm({
        success: SubmitSuccesful,
        error: AjaxError,
        type: 'post',
        cache: false,
        url: baseHref() + 'Upload'
    }).submit();
});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:08:03.943

您`.ajaxForm`习惯于准备表格以使用 ajax 发送。您使用它的一个 - 该表单的每次提交都将使用 AJAX 完成。因此，您必须将代码移到外部点击下方

```
$("#imgadd").ajaxForm({
    clearForm: 'true',
    target: '.preview'
    }) 
```

（此外，您不需要在单击处理程序中调用 .submit() ，因为它已经导致提交）或者，您可以像这样更改代码：

```
$('#submitImage').bind('click', function(e){
    $(".preview").html('');
    $(".preview").html('<img src="/images/elements/loaders/103.png" alt="Uploading...." style="text-align:center;"//>');
    $("#imgadd").ajaxForm({
    clearForm: 'true',
    target: '.preview'
    }).submit();
    e.preventDefault();
}); 
```

哪里`e.preventDefault()`（好吧，从来没有尝试过这样的事情，也许你还需要做 e.stopPropagation()，但我不这么认为）将阻止浏览器执行默认操作，即提交。但最好是在这里做第一件事。

此外， `.ajaxSubmit()`它接受与 ajaxForm 相同的选项，但它也会导致立即提交。但是，如果您将使用它 - 您将需要删除`.submit`并且 `e.preventDefault`仍然是必需的。

# javascript - 使用javascript边框颜色消失

> ID：12466288
> 
> 赞同：1
> 
> 时间：2012-09-17T20:00:52.403
> 
> 标签：javascript, colors, border

我正在使用以下代码...

```
if (theForm.textOne.value.trim() == "" || theForm.textTwo.value.trim() == "")
{
alert("part of the form is blank");
document.getElementById("textTwo").style.borderColor="red";
} 
```

问题是当警报消失时红色会消失。如何让边框保持这种颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:19:45.993

In order for borders to apear, you need more than border-color for it to display : you also need the border-style and the border-width

Also it exists libraries to help you manipulate html doccument

Look at this JQuery goodness :

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
   $(function(){
      $("form").submit(function() {
        var valid = true;
        $("form #textTwo, form #textOne").each(function(){
           if ($(this).val().trim() == "")
           {
              $(this).css("border","1px #ff0000 solid");
              valid = false;
           }
        });
        if(!valid){
           alert("part of the form is blank");
           return false;
        }
      });
   })
</script> 
```

To lean more : [http://jquery.com/](http://jquery.com/)

# sql - SQL 中的 For 循环基础知识

> ID：12466289
> 
> 赞同：1
> 
> 时间：2012-09-17T20:00:56.163
> 
> 标签：sql, loops, for-loop

当我第一次学习 R 时，我在处理重复性任务时发现了 for 循环的强大功能。现在，我想将相同的逻辑应用于 SQL，但我很难理解 psql 的基础知识。当我在 Postgres 工作时，任何 ANSI 解决方案都将不胜感激。

问题是这样的。我有一个名单。对于每个名称，我想生成一个报告。我要查询的表之一非常庞大，以至于我不能简单地为所有名称运行我的脚本，然后只过滤名称，所以我想做如下的事情：

```
for(i in list){

select distinct name, key 
into temp table stuff from table1 where name = i

select case when x.date is null then y.date else x.date end date
     , widgets
     , troll
     , cookie
     , googol
     , bite
     , clicks 
into temp table junk2 
from (
   select substring(datetime,1,10) as date
         , count(*) as bite
         , count(distinct cookie) as cookie
         , count(distinct troll) as troll 
   from table2
   where order_key in (select key from stuff)
   group by substring(datetime,1,10)
   order by substring(datetime,1,10) 
   ) x 
full join (
   select substring(datetime,1,10) as date
        , count(distinct widgets) as widgets
        , count(distinct googol) as googol
        , count(*) as clicks 
   from table3
   where order_key in (select key from stuff)
   group by substring(datetime,1,10)
   order by substring(datetime,1,10) 
   ) y 
on x.date = y.date

COPY junk2 to name_print(i) --psuedocode

discard all
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:10:01.047

这不是一个完整的答案，因为我没有耐心重新表述您在代码中所做的整个事情，但简而言之，我认为您正在寻找的是：

```
INSERT INTO name_print (...column names separated with commas...)
SELECT ...fields...
 FROM table1 ...all the joins...
 WHERE table1.name IN (...list of values or another select...); 
```

# c# - 如何从 OpenCover 报告中排除类

> ID：12466290
> 
> 赞同：7
> 
> 时间：2012-09-17T20:01:09.250
> 
> 标签：c#, unit-testing, mstest, opencover, reportgenerator

在为 MSTest 套件使用 OpenCover 生成覆盖率报告（然后使用 ReportGenerator 生成 HTML 报告）时，我试图排除框架生成的类。特别是，由服务引用在项目的命名空间下生成的类。

我用来生成 XML 文件的命令如下所示：

```
OpenCover.Console.exe -register:user "-target:MyProject.Tests.dll" -targetargs:"/testcontainer:MyContainer" -output:coverage.xml -mergebyhash -filter:-*.AWebService.* 
```

我也尝试按文件排除：

```
OpenCover.Console.exe -register:user "-target:MyProject.Tests.dll" -targetargs:"/testcontainer:MyContainer" -output:coverage.xml -mergebyhash  -excludebyfile:*Reference.cs 
```

但服务引用类仍显示在 XML 文件中。

有没有办法只排除 Visual Studio 生成的那些特定类？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T21:07:35.443

看起来您忘记了过滤器 arg 中的装配部分，请尝试以下操作：

```
-filter:"+[*]* -[*]*.AWebService.*" 
```

# mediawiki - 在哪里决定应该将基本 URL 重定向到 Main_Page？

> ID：12466291
> 
> 赞同：1
> 
> 时间：2012-09-17T20:01:13.353
> 
> 标签：mediawiki, wiki

问题标题可能不言自明。

我想将我的客户重定向到其他内容，而不是`www.my-wiki-address.org/index.php/Main_Page`他们在浏览器栏中输入网站网址时，即`www.my-wiki-address.org`. 我已经深入研究了代码，但找不到重定向的位置。

我正在使用 MediaWiki 1.19.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:13:01.637

主页的标题由接口消息[MediaWiki:Mainpage](http://www.mediawiki.org/wiki/Manual%3aInterface/Mainpage)定义，参见。例如[wikitionary:MediaWiki:Mainpage](http://en.wiktionary.org/wiki/MediaWiki%3aMainpage)。您可以将您的 MediaWiki:Mainpage 设置为您自己实现的某个特殊页面，或者您可以保留“经典”主页位置，但使用[自定义标签](http://www.mediawiki.org/wiki/Manual%3aTag_extensions)或[其他扩展点](http://www.mediawiki.org/wiki/Manual%3aExtensions)编辑页面以包含一些动态生成的内容（同样，可能实现自己），参见例如[RSS 扩展](http://www.mediawiki.org/wiki/Extension%3aRSS)。

# serialization - 使用 Jackson (JSON) 序列化递归类

> ID：12466292
> 
> 赞同：0
> 
> 时间：2012-09-17T20:01:15.227
> 
> 标签：serialization, jackson, stack-overflow, recursive-datastructures

我已经像这样定义了一个 HashMaps 树：

```
public class HashTree<K, V> extends HashMap<K, HashTree<K, V>> {

    private static final long serialVersionUID = 1L;
    boolean isLeaf = true;
    private HashMap<K, V> value = new HashMap<K, V>();

    public HashMap<K, V> getValues() {
        return value;
    }

    public void setValues(HashMap<K, V> value) {
        this.value = value;
    }

    public void putValue(K key, V value) {
        this.value.put(key, value);
    }

    public void removeValue(K key) {
        this.value.remove(key);
    }

    public void clearValues() {
        this.value.clear();
    }

} 
```

注意类型是递归的：`HashMap<K, HashTree<K, V>>`. 在 Java 中这很好用，但是当我用 Jackson 序列化时，我得到了堆栈溢出：

```
java.lang.StackOverflowError
    com.fasterxml.jackson.databind.type.TypeBindings._resolveBindings(TypeBindings.java:232)
    com.fasterxml.jackson.databind.type.TypeBindings._resolveBindings(TypeBindings.java:269)
    com.fasterxml.jackson.databind.type.TypeBindings._resolveBindings(TypeBindings.java:309)
    com.fasterxml.jackson.databind.type.TypeBindings._resolveBindings(TypeBindings.java:309)
    com.fasterxml.jackson.databind.type.TypeBindings._resolveBindings(TypeBindings.java:309)
    com.fasterxml.jackson.databind.type.TypeBindings._resolve(TypeBindings.java:203)
    com.fasterxml.jackson.databind.type.TypeBindings.findType(TypeBindings.java:121)
    com.fasterxml.jackson.databind.type.TypeFactory._fromVariable(TypeFactory.java:798)
    com.fasterxml.jackson.databind.type.TypeFactory._constructType(TypeFactory.java:343)
    com.fasterxml.jackson.databind.type.TypeFactory.findTypeParameters(TypeFactory.java:279)
    com.fasterxml.jackson.databind.type.TypeFactory.findTypeParameters(TypeFactory.java:251)
    com.fasterxml.jackson.databind.type.TypeFactory._fromParamType(TypeFactory.java:759)
    com.fasterxml.jackson.databind.type.TypeFactory._constructType(TypeFactory.java:337)

... 
```

我试图用这个来插入序列化，当它遇到哈希树时应该只返回一个字符串“123”。

```
public class HashTreeSerializer<K,V> extends StdSerializer<HashTree<K,V>> {

    public HashTreeSerializer() {
        super(HashTree.class, false);
    }

    @Override
    public void serialize(HashTree<K, V> tree, JsonGenerator json,
            SerializerProvider provider) throws IOException,
            JsonGenerationException {
        json.writeString("123");
    }

} 
```

我什至将 HashTree 扩展到 StringHashTree 以删除那些泛型类型，但我仍然遇到堆栈溢出。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:22:44.177

这是一个错误；类型解析器应该能够将其解析为可接受的无变量类型。

# python - Windows 上的 PyQwt 5.xw/ PyQt 4.6

> ID：12466297
> 
> 赞同：0
> 
> 时间：2012-09-17T20:01:38.690
> 
> 标签：python, windows, qt, qwt

正在寻找 Qt 4.6 功能，但似乎 PyQwt 5.x 仅与 PyQt 捆绑在一起。从源代码编译看起来有点令人生畏，关于如何让 PyQwt 与 Qt 4.6+ 一起运行的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:52:15.180

我不确定我是否理解你的问题。

PyQwt 5.x 需要 PyQt 才能工作。如果您想要没有 Python 的 PyQwt，那么您正在搜索专门用于 Qt 4.7+ 的“qwt”。

如果您需要 PyQwt 5.x 的编译版本并希望将其与 PyQt 4.9.x 和 Python 2.7 一起使用，那么您可以查看[此页面](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyqwt)
在那里您可以找到适用于不同 Python 版本的 Windows 的预编译 Python 扩展。

在这种情况下，带有 PyQt 4.7（或更高版本）的 PyQwt 5.x 和上面页面中的预编译二进制文件对我有用。

# android - 如何在操作栏中内联显示选项卡

> ID：12466300
> 
> 赞同：6
> 
> 时间：2012-09-17T20:02:03.400
> 
> 标签：android

有没有办法代替图标和活动标签显示选项卡（我想这样做，但找不到任何解决方案）。我正在尝试以垂直显示方向（纵向）在活动栏内（不在下方）显示导航选项卡。我查看了 android 库“ActionBarSherlock”，“Styled”的一个示例，但有些选项卡显示与标准包中的完全相同。

## 活动栏示例（“纵向”方向）：

标准显示活动栏中的选项卡

```
+------------------------------------------------------------------------------+
| +---+                                                              /˜\    +  |
| |   | Example                                                      \_/    +  |
| +---+                                                                \    +  |
+------------------------------------------------------------------------------+
|                         |                          |                         |
|        Section 1        |        Section 2         |        Section 3        |
|                         |                          |                         |
+------------------------------------------------------------------------------+ 
```

它的外观示例（没有图标和标签的活动栏，里面有标签）

```
+------------------------------------------------------------------------------+
|       |       |                                                    /˜\    +  |
| Tab 1 | Tab 2 | Tab 3                                              \_/    +  |
|       |       |                                                      \    +  |
+------------------------------------------------------------------------------+ 
```

如果有人能告诉我如何在 2.2 到 4.0 的范围内实现这一点，那就太好了。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:22:32.863

当您将屏幕旋转到横向模式时，它将显示所需的方式。在纵向模式下，它将以堆叠模式显示选项卡。确实没有足够的空间在手机（甚至像 S3 之类的东西）上以纵向模式执行您想要的操作，而 android SDK 知道这一点。

如果您对在纵向模式下执行此操作一无所知，您应该查看自定义标题栏布局（ActionBarSherlock 对此进行了演示）。

# c++ - 无法链接模板函数

> ID：12466301
> 
> 赞同：3
> 
> 时间：2012-09-17T20:02:09.063
> 
> 标签：c++, templates

我有这个代码：

```
template<typename T>
class Listoid{

  private:
    std::vector<T> list;

  public:
    typedef typename std::vector<T>::iterator iterator;

    iterator begin() {return list.begin();}
    iterator end() {return list.end();}

  public:
    Listoid(T t) {
      list.push_back(t);
    }

  const T operator [](int i){
    return list[i];
  }

  void addElem(T ne){
    list.push_back(ne);
  }

  friend T cons(T new_elem, Listoid<T> list);

};

template<typename T>
Listoid<T> cons(T new_elem, Listoid<T> list){

  Listoid<T> new_list(new_elem);
  for(typename Listoid<T>::iterator it = list.begin(), e = list.end();
        it != e; ++it){
          new_list.addElem(*it);
        }
  return new_list;
}

int main(){

  Listoid<int> lista(312);
  lista.addElem(22);

  Listoid<int> lista2 = cons(21, lista);

  return EXIT_SUCCESS;
} 
```

但我无法编译它；我收到以下错误：

```
/tmp/listoid-3kYCmd.o: In function `main':
listoid.cpp:(.text+0xda): undefined reference to `cons(int, Listoid<int>)'
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

也许它真的很简单，但我无法解决它。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T20:05:02.457

你必须告诉编译器`cons`是函数模板而不是简单函数。使用此语法：

```
friend T cons <>(T new_elem, Listoid<T> list); 
```

注意函数名后面的**<> 。**

否则它正在搜索简单的功能，而不是功能模板。那是链接器告诉你的。

[更新]

并且不要忘记在它的朋友类之前添加你的函数的前向声明，这样你的类就会知道朋友是什么。

```
template<typename T>
Listoid<T> cons(T new_elem, Listoid<T> list); 
```

[更新2]

并更改函数模板的类型，并添加类的前向声明。看：

```
template<typename T>
class Listoid;
template<typename T>
Listoid<T> cons(T new_elem, Listoid<T> list);

template<typename T>
class Listoid{
...

  friend Listoid<T> cons <>(T new_elem, Listoid<T> list);

}; 
```

这对我有用：[ideone](http://ideone.com/sTpPX)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:06:11.013

`friend T cons(T new_elem, Listoid<T> list);`不是模板，你以后`template<typename T> Listoid<T> cons(T new_elem, Listoid<T> list)`是`cons()`函数的不同重载。请参阅[常见问题解答](http://www.parashift.com/c++-faq/template-friends.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T20:10:19.893

尝试使用模板声明和正确的返回类型重新处理您的函数声明：

```
 template<typename U> friend Listoid<U> cons(U new_elem, Listoid<U> list); 
```

并重命名你的`typename`，这样它就不会影响你的类模板中的模板类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T20:20:55.717

问题是您有两个不同的声明`cons`，一个在`friend`声明中，另一个在命名空间级别之外。模板中的友谊并不像一开始那样简单，我建议您阅读[这个](https://stackoverflow.com/a/4661372/36565)其他答案，并详细解释不同的选项。特别是，如果您希望（看起来）只与模板的特定专业化友好，则需要在类模板之前预先提供声明：

```
template<typename T>
class Listoid;
template<typename T>
T cons(T new_elem, Listoid<T> list);
template<typename T>
class Listoid{
   friend T cons<T>(T,Listoid<T>);
... 
```

在当前表单中，您将非模板函数声明为朋友。该非模板函数将比模板更好地匹配（当类型匹配时，非模板优先于模板）并且编译器将生成对非模板函数的依赖关系：

```
int const(int,Listoid<int>); 
```

# android - AndroidPlot：它是如何组合在一起的

> ID：12466303
> 
> 赞同：1
> 
> 时间：2012-09-17T20:02:09.977
> 
> 标签：android, androidplot

我正在使用 AndroidPlot 创建一个简单的条形图应用程序，它可以实时显示一些值。我刚开始使用它，所以请耐心等待。有一个教程，它提供了一些基本信息，然后是 JavaDocs，它似乎给了我一切，包括厨房水槽。

我现在的问题是：所有 AndroidPlot 类如何组合在一起？我有一个绘图、一个格式化程序和一个渲染器，但我似乎没有找到创建渲染器的方法。

（更准确地说：我想要一个条形图，其中的条形具有一定的宽度和每个条形的不同颜色）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:51:17.687

我想我发现了，在文档中不容易找到。我在这里找到它：[https ://androidplot.jira.com/source/browse/ANDROIDPLOT/trunk/Examples/DemoApp/src/com/androidplot/demos/OrientationSensorExampleActivity.java?hb=true](https://androidplot.jira.com/source/browse/ANDROIDPLOT/trunk/Examples/DemoApp/src/com/androidplot/demos/OrientationSensorExampleActivity.java?hb=true)

有一个`XYPlot`对象（如快速入门中所示），您可以在其中添加一个对象`XYSeries`。，`XYSeries`以及一个`Formatter`。要获得`Renderer`，您需要将其告知`AddSeries`方法调用。然后，通过`getRenderer`调用和一些强制转换，您可以获得`Renderer`，您可以在其中放入一些渲染器特定的东西。

在代码中：

```
XYPlot plot = (XYPlot) findViewById(R.id.myPlot);
XYSeries series = new SimpleXYSeries(
      Arrays.asList(new Number[] { 1,2,3 } ), 
      SimpleXYSeries.ArrayFormat.Y_VALS_ONLY, "title");
BarFormatter formatter = new BarFormatter(
           Color.rgb(0, 200, 0),
           Color.rgb(100, 0, 0));
plot.addSeries(series, BarRenderer.class, formatter);
BarRenderer renderer = (BarRenderer)plot.getRenderer(BarRenderer.class);

// the BarRenderer is available now 
```

# javascript - 如何使用此 RegExp 检测换行符

> ID：12466305
> 
> 赞同：1
> 
> 时间：2012-09-17T20:02:20.897
> 
> 标签：javascript, regex

我正在使用这个[SO](https://stackoverflow.com/a/5454297/184883)中的 RegExp来缩短字符串而不削减单词。不幸的是，当测试字符串中有换行符时，这不起作用。有没有办法在不删减单词的情况下缩短字符串以及在第一个换行符之后。

```
"this is a longish string of \n\n test".replace(/^(.{11}[^\s]*).*/, "$1"); 
//Expected output: "this is a longish"
//Actual output: "this is a longish test" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:07:40.340

您是否尝试过在您拥有的之前插入另一个“.replace()”？

例子：

```
var longString = "this is a longish<br> string of test";
longString = longString.replace(/\n/g, "").replace(/^(.{11}[^\s]*).*/, "$1"); 
```

也许有这种效果的东西会有所帮助？您可能需要稍微调整一下格式，因为我不确定您希望字符串最终看起来如何，或者`<br>`页面中的标签是如何格式化的，等等。

祝你好运！

# c# - 永远不会在 .aspx 的 aspx.cs 中调用 delete 函数

> ID：12466308
> 
> 赞同：0
> 
> 时间：2012-09-17T20:02:43.427
> 
> 标签：c#, javascript, asp.net, html, css

我有个问题。我正在尝试从列表中删除某些内容，但它从不从 .aspx.cs 调用我的删除函数

这是我的 JavaScript 代码：

```
function doTheDelete(doIDeleteExpenses) {
        if (selectedExpensesList.length > 0) {
            $.ajax({
                type: "POST",
                //url: "/Tasks/ViewTasks.aspx/deleteTasksAndLinkedItems",
                url: '<%=ResolveUrl("~/Expenses/ViewExpenses.aspx/deleteSelectedExpense")%>',
                data: "{'DeleteExpenses' : " + "'" + doIDeleteExpenses + " '}",
                //dataaaaaa
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var ss = data.d;
                    if (ss.length > 0) {
                        for (var i = 0; i < ss.length; ++i) {
                            $.noty.consumeAlert({ layout: 'center', type: 'error', dismissQueue: true });
                            alert(ss[i]);

                        }
                    }
                    $("#viewTasksGrid").flexReload();
                },
                error: function (data) {
                    $.noty.consumeAlert({ layout: 'center', type: 'error', dismissQueue: true, modal: true });
                    alert('Error Deleting Expense');
                    if (window.console) {
                        console.log(data);
                    }
                }
            });
        } else {
            showMessage('No expenses are selected.');
        }
    }

    function getSelectedExpenseIDs() {
        var selectedExpensesList = new Array;
        var i = 0;
        $('.expenseCheckBox:checked').each(function () {
            if ($(this)[0].id !== "checkAllExpenses") {
                selectedExpensesList[i] = $(this)[0].id.split('_')[1];
                ++i;
            }
        });
        return selectedExpensesList;
    } 
```

这是我在 aspx.cs 中永远不会被调用的方法：

```
[WebMethod]
public static string[] deleteSelectedExpense(bool DeleteExpenses, String[] ExpID)
{
    var rList = new List<string>();
    //var canDeleteTasks = false;
    //var canDeleteTrackers = false;
    var canDeleteExpenses = false;
    var investigatorID = (int)HttpContext.Current.Session["InvestigatorID"];
    var conn = new SqlConnection(ConfigurationManager.ConnectionStrings["OSCIDConnectionString"].ToString());
    var cmd = new SqlCommand("p_Admin_Permissions_CanDeleteExpenses", conn);
    cmd.Parameters.Add(new SqlParameter("@InvestigatorID", SqlDbType.Int));
    cmd.Parameters["@InvestigatorID"].Value = investigatorID;
    cmd.CommandType = CommandType.StoredProcedure;
    try
    {
        conn.Open();
        canDeleteExpenses = (bool)cmd.ExecuteScalar();
    }
    catch (SqlException sql)
    {
        if (!rList.Contains("Can not connect to the database. Please try again."))
            rList.Add("Can not connect to the database. Please try again.");
    }
    catch (Exception ex)
    {
        if (!rList.Contains("An Error Occured"))
            rList.Add("An Error Occured");
    }
    finally
    {
        if (conn.State == ConnectionState.Open)
            conn.Close();
    }

    if (canDeleteExpenses)
    {
        foreach (var expense in ExpID)
        {

            if (canDeleteExpenses && DeleteExpenses)
            {
                conn = new SqlConnection(ConfigurationManager.ConnectionStrings["Connection"].ToString());
                cmd = new SqlCommand("p_DeleteExpenses", conn);
                cmd.Parameters.Add(new SqlParameter("@TaskID", SqlDbType.Int));
                cmd.Parameters["@ExpID"].Value = int.Parse(expense);
                cmd.Parameters.Add("@Message", SqlDbType.NVarChar, 50);
                cmd.Parameters["@Message"].Direction = ParameterDirection.Output;
                cmd.CommandType = CommandType.StoredProcedure;
                try
                {
                    conn.Open();
                    cmd.ExecuteNonQuery();
                }
                catch (SqlException sql)
                {
                    if (!rList.Contains("Error Connecting to the Database. Unable To Delete Expense(s)."))
                        rList.Add("Error Connecting to the Database. Unable To Delete Expense(s).");
                }
                catch (Exception ex)
                {
                    if (!rList.Contains("An Error Occured"))
                        rList.Add("An Error Occured");
                }
                finally
                {
                    if (conn.State == ConnectionState.Open)
                        conn.Close();
                }
            }
            else if (!canDeleteExpenses && DeleteExpenses)
            {
                rList.Add("You do not have permission to delete Expenses");
            }
            else
            {
                if (!rList.Contains("You do not have permission to delete the task(s)."))
                    rList.Add("You do not have permission to delete the task(s).");
            }
        }
    }
    //var serializer = new JavaScriptSerializer();
    //var re = serializer.Serialize(rList.ToArray());
    return rList.ToArray();
} 
```

当我在浏览器控制台中时，它告诉我一个内部错误（500）。好吧，原因很明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:05:14.390

你的参数是错误的。该`deleteSelectedExpense`方法接受`bool`和`string[]`参数，但您只是将 bool 传递给它以标记是否删除它们。

编辑：我猜你没有正确传递你的字符串数组。传递字符串值数组时，json 格式应该看起来像`expId : [ 1, 2, 3 ]`，这就是我使用该`myArray.join`方法并将括号放在值周围的原因。

```
var myArray = ['100', '200'];
$.ajax({
         type: 'POST',
         url: 'WebForm1.aspx/testMethod',
         contentType: 'application/json; charset=utf-8',
         dataType: 'json',
         data: '{ del: true, expId : [' + myArray.join(",") + '] }',
         success: success,
         error: error
       });
function success(data) {
    $('#result').html(data.d);
}
function error(data) {
    $('#result').html(data.d);
} 
```

网络方法：

```
[WebMethod]
public static string testMethod(bool del, string[] expId)
{
    var rand = new Random();
    return rand.Next().ToString();
} 
```

# pdf - 如何使用 Pdfmark 和 Ghostscript 应用简单的格式化文本图章

> ID：12466309
> 
> 赞同：3
> 
> 时间：2012-09-17T20:02:54.490
> 
> 标签：pdf, pdf-generation, ghostscript

我已经成功地使用 ghostscript 和 Pdfmarks 应用笔记、手绘图（Type Ink）、突出显示等。现在我想对文本图章（不是位图）做同样的事情，但不知道怎么做。

窥视一个未压缩的标记文件（感谢 pdftk 的解压缩和 Acrobat Professional 的标记）我看到我的自定义文本标记最终成为一个 XObject，它在 Stamp 注释的外观流中被引用。很复杂，我想。

所以这是我的问题：是否可以使用一个简单的 Pdfmark 文件应用一个文本标记，例如以页面为中心 45 度以下的文本 DRAFT，而不必使用外观流、XObjects 等？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:44:43.937

如果您不为注释提供外观流，那么您完全依赖于 PDF 使用者选择为其绘制的任何内容。那可能没什么。

但是，PDF 1.7 参考手册在“Rubber Stamp Annotations”下说（第 635 页）：

```
Name    name          (Optional) The name of an icon to be used in displaying the annotation. Viewer applications should provide predefined icon appearances for at least the following standard names:
Approved     Experimental    NotApproved
AsIs         Expired         NotForPublicRelease
Confidential Final           Sold
Departmental ForComment      TopSecret
Draft        ForPublicRelease

Additional names may be supported as well. Default value: Draft.
Note: The annotation dictionary’s AP entry, if present, takes precedence over the Name entry; see Table 8.15 on page 606 and Section 8.4.4, “Appearance Streams.” 
```

所以是的，您应该能够成功地将“草稿”用作注释而不提供外观流，并且您可以使用所需的“矩形”条目将其居中放置在页面上。我不太确定让它旋转 45 度，但注释没有 Matrix 条目，所以我不相信你可以在不指定外观流的情况下可靠地做到这一点。

# c# - 目标属性更改时如何更新源绑定？

> ID：12466311
> 
> 赞同：0
> 
> 时间：2012-09-17T20:02:56.383
> 
> 标签：c#, wpf, xaml, data-binding

我有两个文本框`txt1`和`txt2`一个字符串依赖属性`sprop`。

```
public static readonly DependencyProperty spropProperty = DependencyProperty.Register("sprop", typeof (string), typeof (MainWindow), new UIPropertyMetadata(string.Empty));

public string sprop
{
    get { return (string) this.GetValue(spropProperty); }
    set { this.SetValue(spropProperty, value); }
} 
```

`txt1`现在，如果我以这种方式在 XAML 中设置数据绑定：

```
Text="{Binding sprop, ElementName=window, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged} 
```

`txt1``sprop`每当文本框文本发生更改时，都会立即更新。

`txt2`但是，如果我以这种方式在 C# 中设置数据绑定：

```
DataContext = this;
txt2.SetBinding(TextBox.TextProperty, "sprop"); 
```

然后仅在失去焦点时`txt2`更新。`sprop`

**如何使用 C# 代码在文本更改`sprop`后立即更新`txt2`？**

* * *

我试过的：

```
DataContext = this;
var myBinding = new Binding("sprop");
myBinding.Source = this;
myBinding.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
txt2.SetBinding(TextBlock.TextProperty, myBinding); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:05:48.297

您还需要在 txt2 中设置 UpdateSourceTrigger 以便在属性更改后进行更新，您也可以在代码中设置：

```
Binding myBinding = new Binding("MyDataProperty");
myBinding.Source = myDataObject;
myBinding.Mode = TwoWay;
myBinding.UpdateSourceTrigger = PropertyChanged;
myText.SetBinding(TextBlock.TextProperty, myBinding); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T21:16:45.690

您是否将 txt2 设置为 Mode=TwoWay？

# php - Magento 网站在进入销售 -> 订单页面时崩溃

> ID：12466312
> 
> 赞同：1
> 
> 时间：2012-09-17T20:02:57.327
> 
> 标签：php, mysql, magento

当我进入销售 -> 订单页面时，我的 magento 网站崩溃了，尽管我最近将服务器升级到了 8 gigs 的内存。我们每天有大约 5-6k 的访问者，以及大约 6k 的产品。它运行得更快，并且不会像以前那样崩溃，但仍然会在订单页面上崩溃。我已经浏览了我能找到的所有 magento 教程，但我仍然遇到了麻烦。这是我的 my.cnf，看看这是否可能导致错误：

[mysqld]
innodb_file_per_table=1
default-storage-engine=MyISAM

max_connections=400 key_buffer_size
=256M
myisam_sort_buffer_size=64M
join_buffer_size=2M
read_buffer_size= 1M sort_buffer_size=
1M
table_open_cache=2500
线程缓存大小=128
interactive_timeout=45
wait_timeout=20
connect_timeout=8
max_allowed_pa​​cket=16M
max_connect_errors=10 query_cache_limit
=1M query_cache_size
=128M query_cache_type
=1
table_definition_cache = 512 max_heap_table_size
= 64M
tmp_table_size = 32M
innodb_buffer_pool_size = 4096M
tmpdir=/home/mysqltemp

[mysqld_safe]
open_files_limit=8192

[mysqldump ]
max_allowed_pa​​cket=16M

[myisamchk] key_buffer_size=
64M sort_buffer_size
=64M
read_buffer_size=16M
write_buffer_size=16M

我是在找对地方，还是应该在其他地方寻找问题？

编辑：为了澄清，我在 magento 中收到 500 错误，并且 mysql 服务器崩溃。
Mysqltemp 设置为 home，因此没有大小限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:38:20.993

您应该检查 apache 和 mysql 日志以获取更多信息

根据您的操作系统，检查日志文件，我可能会提供更多信息：

```
/etc/httpd/logs/error.log

/var/logs/mysql/*.log 
```

**一个可能的问题：**

您正在运行 32 位操作系统和 32 位版本的 MySQL 吗？如果是这样，`innodb_buffer_pool_size = 4096M`超过 2GIG 将导致崩溃，因为 MySQL 将不稳定。

我建议放置`innodb_buffer_pool_size = 1024M`并查看服务器是否稳定。
有关详细信息`innodb_buffer_pool_size`，请参阅[MySQL 官方文档](http://dev.mysql.com/doc/refman/5.0/en/innodb-parameters.html#sysvar_innodb_buffer_pool_size)

# excel - 将参数传递给 PowerPivot 查询

> ID：12466324
> 
> 赞同：3
> 
> 时间：2012-09-17T20:03:48.817
> 
> 标签：excel, powerpivot

我有一个这样设置的 PowerPivot 查询：

`exec sp_GetOrders NULL, NULL, '2012-08-01', '2012-09-17', 'All', 0, NULL, 1, 0, NULL`

但我希望日期字段是单元格的参数。我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:26:32.137

根据这个线程似乎不可能。Powerpivot 确实有问题。

[http://social.msdn.microsoft.com/Forums/en-US/sqlkjpowerpivotforexcel/thread/b579e218-e4f0-4153-81d1-eac96692d423/](http://social.msdn.microsoft.com/Forums/en-US/sqlkjpowerpivotforexcel/thread/b579e218-e4f0-4153-81d1-eac96692d423/)

# java - TreeSet 到 List 转换中的控制器排序

> ID：12466326
> 
> 赞同：2
> 
> 时间：2012-09-17T20:04:15.570
> 
> 标签：java, sorting, collections, tree

我的方法中有 2 个列表按特定顺序排序（根据 ID 字段升序或降序）

我有一个自定义比较器实现，它允许我将两个列表都放入树集中并获得所需的结果。

我的问题是加载树集后，我需要从该方法返回一个列表。我的第一个实现并不关心排序，所以我这样做了（复合是我命名的 TreeSet）：

```
 composite.addAll(custom);
    composite.addAll(reference);    

    Iterator<MyObject> anIter = composite.iterator();
    ArrayList<MyObject> returnVal = new ArrayList<MyObject>();
    while(anIter.hasNext()) 
        returnVal.add(anIter.next()); 
```

执行此操作后，“自定义”和“参考”这两个列表将恢复为默认顺序。Collection 的 iterator() 方法状态的 Javadocs 将按升序返回列表，这可能是我的麻烦所在。

那么......有没有办法在保护原始列表顺序的同时返回 TreeSet 的内容？我想到了一个树集，因为我想在两个集合上使用比较器接口的强大功能，将它们与 addAll() 联合起来，并抛出欺骗。

任何有关保护排序的建议将不胜感激。

***编辑********

```
Set<MyObject> composite = new TreeSet<MyObject>(new Comparator<MyObject>(){
        @Override
        public int compare(MyObject arg0, MyObject arg1) {
            int arg0ID = arg0.getObjID();
            int arg1ID = arg1.getObjID();                
            if(arg0ID < arg1ID) return -1;
            else if(arg0ID> arg1ID) return 1;
            else return 0;
        }           
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:06:49.623

> 有没有办法在保护原始列表顺序的同时返回 TreeSet 的内容？

不，当然不。`TreeSet`是这项工作的错误工具。使用 a的*要点*`TreeSet`是它对`Comparator`集合包含的对象应用基于 - 的排序。使用不同的数据结构——a 怎么样[`LinkedHashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)？— 如果您想在保留插入顺序的同时删除重复的对象。

* * *

> 我看不出你的陈述如何反驳我的决定。我故意选择 TreeSet，因为我想练习比较器接口。...我的比较器让我确定要过滤的对象的哪些组件。我不想失去这种能力

在[`TreeSet`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)：*“元素使用它们的自然顺序排序，或者由在集合创建时提供的 Comparator 排序，具体取决于使用的构造函数。”* 您不能选择任何带有`TreeSet`. 如果您不能使用`equals()`and`hashCode()`来选择代表身份的对象字段，请使用带有 a 的 decorate-dedup-undecorate 模式`LinkedHashSet`，其中装饰器包含`equals()`和`hashCode()`实现。**`Comparator`/`Comparable`用于指定排序，而不是标识或相等。**

* * *

> 您是在建议我需要放弃它并转向 LinkedHashSet 之类的东西？

对，就是这样。要么`MyObject`实现你的`.equals()`意思`.hashCode()`是：

```
class MyObject {
    // snip

    @Override
    public boolean equals(Object o) {
        // boilerplate junk here
        if (!o instanceof MyObject) return false;
        MyObject other = (MyObject) o;
        return this.getObjID() == other.getObjID();
    }

    @Override
    public int hashCode() {
        return this.getObjID();
    }

    // snip
} 
```

像这样重复数据删除：

```
List<MyObject> custom = /* snip */;
List<MyObject> reference = /* snip */;

Set<MyObject> uniques = new LinkedHashSet<>(custom.size() + reference.size());
uniques.addAll(custom);
uniques.addAll(reference);
List<MyObject> deduped = new ArrayList<>(uniques); 
```

或者使用我提到的 decorate-dedup-undecorate 模式。装饰器类看起来像这样：

```
class Decorator {
    private final MyObject value;

    public Decorator(MyObject value) {
        this.value = value;
    }

    public MyObject getValue() {
        return value;
    }

    @Override
    public boolean equals(Object o) {
        // boilerplate junk here
        if (!o instanceof Decorator) return false;
        Decorator other = (Decorator) o;
        return this.value.getObjID() == other.value.getObjID();
    }

    @Override
    public int hashCode() {
        return this.value.getObjID();
    }
} 
```

这大致是你如何使用它：

```
List<MyObject> custom = /* snip */;
List<MyObject> reference = /* snip */;

Set<Decorator> uniques = new LinkedHashSet<>(custom.size() + reference.size());
for (MyObject m : custom) uniques.add(new Decorator(m));
for (MyObject m : reference) uniques.add(new Decorator(m));

List<MyObject> deduped = new ArrayList<>(uniques.size());
for (Decorator d : uniques) deduped.add(d.getValue()); 
```

# wcf - WCF在项目之间“添加服务引用”或“共享合同程序集”？

> ID：12466327
> 
> 赞同：4
> 
> 时间：2012-09-17T20:04:34.277
> 
> 标签：wcf, web-services, design-patterns

在我工作的公司中，有 3 个团队在从事不同的项目，当谈到在这些项目之间使用 Web 服务时，我有一个两难选择，是应该通过“**添加服务参考**”还是我们可以**将合同作为程序集共享**并使用 ChannelFactory 来叫它 ？任何推荐的解决方案或有没有比这更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T21:57:27.980

就像关于软件开发的大多数问题一样，这取决于:)。

如果您的服务是保持您的核心/业务逻辑的东西，并且构建客户端是为了为服务制作 UI，我看不到耦合客户端和服务的问题，因为客户端的目的是耦合到某些服务。

如果不是这种情况，并且客户有更广泛的目的，并且考虑到这些因素，使用服务只是其功能的一小部分： - 在共享合同的情况下，您不必更改/重新生成客户端在合同更改的情况下，因为它会自动传播，因为双方都使用相同的类型。这还有一个好处，那就是，如果在服务端发生了一些变化（消息字段被删除/重命名），它将自动破坏客户端的构建，并且通常整个事情可以更快地修复。否则您必须等待第一次调用（或系统测试）以通知服务已更改并且某些内容不正常（使用添加服务参考方法也有实现此目的的方法）。

在某些情况下，您不希望新版本的服务合同对客户端代码产生影响，并且希望客户端独立工作（构建）。在这种情况下，生成客户端将是更好的方法。

基本上答案在于问题是单独开发的客户端和服务还是它们是同一个项目/应用程序的一部分..

是的，在这两种情况下，您都可以使用 ChannelFactory

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T20:16:36.503

我建议添加服务引用来生成客户端代理，而不是将合同作为程序集共享。它在服务和客户端之间提供了较弱的耦合。在这两种情况下，您都可以使用 a`ChannelFactory<T>`来调用服务，只是在第一种情况下`T`将为您生成 by`svcutil.exe`而在第二种情况下，它将来自共享程序集。

# php - 使用 preg_* 做 time()

> ID：12466328
> 
> 赞同：1
> 
> 时间：2012-09-17T20:04:43.293
> 
> 标签：php, regex

我有点卡在这里，我做了一些 preg 编码来查找任何 11 位数字，但我不知道如何使它使用找到/匹配到诸如“preg - time()”之类的函数

提醒一下，这 11 位数字可能会被找到不止一次，所以应该启用该函数以在其中任何一个上使用，也许是数组上的循环或任何东西？

```
"#\d{11}#"   -   Quick example on the preg i might will use. 
```

帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:13:28.310

用于[`preg_replace_callback`](http://php.net/manual/en/function.preg-replace-callback.php)使用自定义函数对每个匹配项进行更改。

```
function your_custom_function($matches){
    $match = $matches[0];
    // Do something with $match
    return $match;
}
$string = preg_replace_callback(
    "#\d{11}#",
    "your_custom_function",
    $string
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:08:09.623

[preg_replace](http://php.net/manual/en/function.preg-replace.php)自动替换 all，[preg_match_all](http://php.net/manual/en/function.preg-match-all.php)将在第三个参数中为您提供所有匹配项。

```
preg_match("/\d{11}/", "Quick example on the preg I might will use", $matches);
print_r($matches); 
```

# sql - Access 2007 查询

> ID：12466329
> 
> 赞同：0
> 
> 时间：2012-09-17T20:04:52.870
> 
> 标签：sql, ms-access

以下是我正在使用的数据：

```
位置 ID 会员 ID 1 美元账单 5 美元账单 日期 时间
56789 000000000 2220 2000 2012 年 4 月 1 日 43337
56789 000000000 2221 2000 2012 年 4 月 1 日 62219
56789 000000000 2221 2000 2012 年 4 月 1 日 62220
56789 000123456 2226 2000 2012 年 4 月 1 日 63206
56789 000000000 2228 2001 2012 年 4 月 1 日 64438

```

我需要一个查询来确定每个位置收到的每个钞票面额的美元金额，以及每个位置收到的总美元金额。

> 位置 ID 56789 在 4:33:37 和 6:22:19 之间从会员 ID 000000000 收到总计 1 美元。
> 
> 位置 ID 56789 在 6:22:20 和 6:32:06 之间从会员 ID 000000000 收到总计 5 美元。
> 
> 位置 ID 56789 在 6:32:06 和 6:44:38 之间从会员 ID 000123456 收到总计 7 美元。

`Location ID 56789`在 的日期收到的总金额`4/1/2012`是`$13`。

关于如何编写查询来确定这一点的任何建议？

**编辑（附加信息）**

我还需要能够返回`[Member ID] = 000123456 with a [$1 Bill] total count of 2`。

期望结果示例（每个请求）：

```

位置 ID 会员 ID 1 美元账单总额 5 美元账单总额 日期
  56789 000000000 5 0 2012 年 4 月 1 日
  56789 000123456 2 5 2012 年 4 月 1 日

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:40:36.970

首先我想说我很高兴我不必使用具有这种命名约定的数据库。

打开一个新查询并将其粘贴到 SQL 视图中

```
SELECT[location id], max([$1 bill])-min([$1 bill]) +( max([$5 bill])-min([$5 bill]))*5 as dailyTotal
FROM myTable
group by [location id],date 
```

它将编写一个查询，将每个位置的每日总数分组。从那里您可以更改查询的 WHERE 部分，以将其限制在有用的范围内。

祝你好运

# android - “OSError: [Errno 2] No such file or directory” 在 Titanium Studio 上导入 Android 示例项目

> ID：12466330
> 
> 赞同：1
> 
> 时间：2012-09-17T20:05:00.633
> 
> 标签：android, linux

我在 Windows 7 64 位的虚拟机上运行 Linux 32 位。在 Linux 盒子中，我安装了 Java 7、适用于 Linux 32 位的最新 Android SDK 和 Titanium Studio。我为上面的所有三个文件夹授予了读写权限。当我尝试导入示例项目时，我想知道是什么导致了这个错误“OSError: [Errno 2] No such file or directory”。

```
[INFO] logfile = /usr/Titanium_Studio/RSS Reader/build.log
[INFO] Building Sample.RSS for Android ... one moment
[INFO] Titanium SDK version: 2.1.2 (08/24/12 14:46 ed7f777)
[ERROR] Exception occured while building Android project:
[ERROR] Traceback (most recent call last):
[ERROR]   File "/root/.titanium/mobilesdk/linux/2.1.2.GA/android/builder.py", line     2237, in <module>
[ERROR]     s.build_and_run(False, avd_id, debugger_host=debugger_host)
[ERROR]   File "/root/.titanium/mobilesdk/linux/2.1.2.GA/android/builder.py", line 1848, in build_and_run
[ERROR]     self.wait_for_device('e')
[ERROR]   File "/root/.titanium/mobilesdk/linux/2.1.2.GA/android/builder.py", line 362, in wait_for_device
[ERROR]     devices = self.sdk.list_devices()
[ERROR]   File "/root/.titanium/mobilesdk/linux/2.1.2.GA/android/androidsdk.py", line 220, in list_devices
[ERROR]     (out, err) = subprocess.Popen([adb, 'devices'], stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate()
[ERROR]   File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
[ERROR]     errread, errwrite)
[ERROR]   File "/usr/lib/python2.7/subprocess.py", line 1239, in _execute_child
[ERROR]     raise child_exception
[ERROR] OSError: [Errno 2] No such file or directory
[ERROR] Application Installer abnormal process termination. Process exit value was 1 
```

# php - WP术语相关数据？

> ID：12466339
> 
> 赞同：-2
> 
> 时间：2012-09-17T20:05:54.913
> 
> 标签：php, wordpress

所以我有一个wordpress分类法，让它类，在类中我有各种术语。

每个条款都有名称，slug 等数据。我很清楚如何获取这些数据，但是条款也有一个名为“最佳购买”的选择框下拉菜单，我不知道如何获得它。

我注意到有一个名为“best_buy_classes”的自定义字段，但我仍然迷路了。

我只想获取与该术语相关的选择框中的数据值，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T01:06:21.433

我很确定您要问的是如何回显自定义帖子类型和每个帖子的[自定义字段](http://codex.wordpress.org/Custom_Fields)。

要获取自定义帖子类型，只需使用传统的 wordpress 循环，即。

```
$args = array( 'post_type' => 'CUSTOMPOSTTYPENAME', 'posts_per_page' => 10 );
$loop = new WP_Query( $args );
while ( $loop->have_posts() ) : $loop->the_post();
    the_title();
    echo '<div class="entry-content">';
    the_content();
    echo '</div>';
endwhile; 
```

在其中，您可以使用此语法[抓住您的 meta_data （自定义字段）](http://codex.wordpress.org/Function_Reference/get_post_meta)

> $meta_values = get_post_meta($post_id, $key, $single);

我强烈建议您仔细阅读 wordpress codex 并查看[入门部分](http://codex.wordpress.org/Getting_Started_with_WordPress)。

希望我能帮上忙！

# linux - “制作-C X”与“cd X；制作”

> ID：12466340
> 
> 赞同：2
> 
> 时间：2012-09-17T20:06:01.590
> 
> 标签：linux, makefile

我想知道为什么这两个命令会返回两个不同的结果。第一个是：

```
[root@node30 par-run-d2]# make -C NQU/
make: Entering directory `/home/ut/gpgpu-sim/benchmarks/par-run-d2/NQU'
nvcc  -c -arch sm_11 --keep --compiler-options -fno-strict-aliasing \
        -I. -I/usr/local/cuda//include/ -I/home/ut/NVIDIA_GPU_Computing_SDK/C//common/inc/ \
          -L/home/ut/NVIDIA_GPU_Computing_SDK/C//lib -lcutil -DUNIX nqueen.cu -o nqueen 
nqueen.cu(681): warning: variable "start" was declared but never referenced

nqueen.cu(681): warning: variable "end" was declared but never referenced

nqueen.cu(681): warning: variable "start" was declared but never referenced

nqueen.cu(681): warning: variable "end" was declared but never referenced

gcc -g -c nqueen.cu.cpp -o nqueen.cu_o
echo ../../..
../../..
../../../scripts/gen_ptxinfo
Generating nqueen.ptxinfo...
make: *** [nqueen.cu_o] Error 255
make: Leaving directory `/home/ut/gpgpu-sim/benchmarks/par-run-d2/NQU' 
```

第二个是：

```
[root@node30 par-run-d2]# cd NQU/
[root@node30 NQU]# make
g++  -g nqueen.cu_o -L../../../libcuda/ -lcuda \
        -L/home/ut/NVIDIA_GPU_Computing_SDK/C//lib -lcutil \
        -L../../../src/ -lgpgpusim \
        -L../../../src/intersim -lintersim \
        -L../../../src/cuda-sim/ -lgpgpu_ptx_sim \
        -lm -lz -lGL   -o gpgpu_ptx_sim__nqueen
rm -rf *.cpp*.i *.cpp*.ii *.cu.c *.cudafe*.* *.fatbin.c *.cu.cpp *.linkinfo *.cpp_o core *.cubin cubin.bin *_o *.hash nqueen 
```

知道为什么 "make -C X" 与 "cd X/; make" 不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:05:09.610

该序列`cd X; make`正在更改调用 shell（终端的交互式 shell）的当前目录。使子shell喜欢避免这种情况，这比进程内的系统调用`(cd X; make)`要长得多`make -C X`，因此不能更改父进程的工作目录（通常是您的交互式shell）。 `chdir``make`

`-w`标志行为也会有所不同。大多数递归`$(MAKE)`in `Makefile`-s 都在做`-C somesubdir`

PS。请记住，`cd`shell 内置调用[chdir(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/chdir.2.html)系统调用，这对父进程没有影响。

# android - Sherlock ActionBar 溢出菜单 TextColor

> ID：12466341
> 
> 赞同：1
> 
> 时间：2012-09-17T20:06:02.993
> 
> 标签：android, android-actionbar, textcolor

我正在尝试更改操作栏上溢出菜单的文本颜色，但似乎没有任何效果

```
 <style name="Theme.MyTheme" parent="Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:popupMenuStyle">@style/MyPopupMenuStyle</item>
    <item name="actionBarWidgetTheme">@style/MyActionWidgetTheme</item>
     <item name="android:actionMenuTextColor">@color/title</item>

</style>
<style name="MyPopupMenuStyle" parent="Widget.Sherlock.Light.ListPopupWindow">
    <item name="android:textColor">@color/title</item>
    <item name="android:textAppearance">@style/TextAppearance.Sherlock.Widget.PopupMenu</item>
</style>

<style name="TextAppearance.Sherlock.Widget.PopupMenu" parent="Widget">
    <item name="android:textColor">@color/title</item> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T20:08:21.580

利用`android:actionBarWidgetTheme`

```
<style name="Theme.MyTheme" parent="Theme.Sherlock.Light">
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarWidgetTheme">@style/MyStyle</item>
    <item name="actionBarWidgetTheme">@style/MyStyle</item>
</style>

<style name="MyStyle" parent="Widget">
    <item name="android:textColor">#ff0000</item>
</style> 
```

以上将使文本变为红色。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-09-04T14:50:37.227

使用 android:actionBarWidgetTheme

# asp.net-mvc-3 - ASP.NET MVC 3\. 相对路径不适用于静态内容。Url.Content 已应用

> ID：12466344
> 
> 赞同：0
> 
> 时间：2012-09-17T20:06:20.690
> 
> 标签：asp.net-mvc-3, iis

我在默认网站（：80 端口）的 IIS 上创建了一个嵌套的 Web 应用程序。它的虚拟路径是[http://jamiserver.com/cokehi](http://jamiserver.com/cokehi)，其中 cokehi 是我的应用程序。我使用 Url.Content("~/Content/img/header.png") 期望该资源将在 /cokehi 目录中搜索，但事实上它正在根网站中搜索。我收到 404 错误：找不到[http://jamiserver.com/Content/img/header.png](http://jamiserver.com/Content/img/header.png)。实际上，“header.png”位于[http://jamiserver.com/cokehi/Content/img/header.png](http://jamiserver.com/cokehi/Content/img/header.png)。如何解决？谢谢。

**已编辑：**这是一个屏幕截图，以确保它已作为 Web 应用程序运行。 ![在此处输入图像描述](../Images/e9649580bfb2ed06dd0fc97e42d0a5ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:09:31.670

确保您将其作为应用程序运行，而不是虚拟目录

# .net - Wix 在补丁期间有条件地启动服务

> ID：12466347
> 
> 赞同：1
> 
> 时间：2012-09-17T20:06:30.480
> 
> 标签：.net, wix, windows-installer, installation, wix3.5

我有一个安装服务的 MSI 安装程序，默认情况下它已停止。用户可以手动打开它或让它停止。我也有一个 MSI 补丁。

问题：安装补丁时，服务停止。我希望补丁在服务开启时保持开启，如果服务关闭则关闭。我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:32:39.500

据我了解修补的工作方式，这是预期的默认行为。

看，当您第一次安装 MSI 包（初始安装）时，该服务安装为已停止，并且 MSI 包缓存在系统上的一个特殊位置。当您安装补丁时，补丁对您的安装包带来的更改将应用​​于缓存的 MSI，从而将其转换为所需的方式，然后重新安装包。因此，只要初始包中包含将服务安装为已停止的说明，并且补丁更改不会修改此内容，就会重新安装组件并且服务最终会停止 - 就像在初始安装之后一样。

为了改变这种行为，您可以尝试将包含该服务的组件标记为`NeverOverwrite`. 如果您`NeverOverwrite='yes'`为组件设置，则在应用补丁期间不会重新安装它，因此现有服务将保持不变，并保持在应用补丁之前的状态。

我不确定您是否需要按照初始安装包中描述的方式更改组件。希望，在较新的版本中更改它会起作用。否则，如果您已经发布了产品的初始版本，这可能是个问题。

我应该警告你，我没有尝试过这个确切的场景，所以你可能想先验证这个建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:59:19.117

所以最后我使用了两个自定义操作。在安装补丁之前保存服务状态的一种。如果服务是，我使用属性，例如`MYSERVICE_STATUS`将它们设置为“0”，`STOPPED` 如果它们是，则设置为“1” `RUNNING`。

补丁安装完成后，我启动另一个自定义操作来检查这些属性和每个服务的最终状态。如果`MYSERVICE_STATUS == 1` 服务现在是`STOPPED`他们，我重新启动它。

# perl - Tk::Stderr 空文本子小部件

> ID：12466349
> 
> 赞同：1
> 
> 时间：2012-09-17T20:06:35.150
> 
> 标签：perl, user-interface, tk

我写了一个 perl/tk gui。stderr & stdout 写入弹出窗口，但是当弹出窗口被销毁时我无法清除文本（它实际上已被撤回）。我无法安装 Tk::Stderr，所以我将模块附加到脚本的末尾。下面是一个工作示例。

我在 Print 子例程中添加了以下行，但它是多余的：

```
$text->delete('0.0', 'end'); 
```

我怀疑可以在 Populate 子例程的以下行中添加一些内容：

```
$mw->protocol(WM_DELETE_WINDOW => [ $mw => 'withdraw']); 
```

但我不知道是什么。我将不胜感激任何帮助。

```
#!/usr/bin/perl

use warnings;
use strict;
use Tk;
# use Tk::Stderr; << ** pasted module after main ** - honyok

# create main window
my $mw = MainWindow->new;
$mw->InitStderr;
$mw->optionAdd("*font", "-*-calibri-normal-r-*-*-*-120-*-*-*-*-*-*");
$mw->protocol('WM_DELETE_WINDOW'=> sub{exit});
$mw->geometry( "100x100");
$mw->resizable(0,0);# not resizable
# create buttons
my $button1=$mw->Button(-text=>'STDERR',-command=>[sub{print STDERR "Writing to STDERR\n";}])->pack;
my $button2=$mw->Button(-text=>'STDOUT',-command=>[sub{print STDOUT "Writing to STDOUT\n";}])->pack;

MainLoop;
# =========================== end main ==================================

##==============================================================================
## Tk::Stderr - capture program standard error output
##==============================================================================
## $Id: Stderr.pm,v 1.2 2003/04/01 03:58:42 kevin Exp $
##==============================================================================
#require 5.006;
package Tk::Stderr;
use strict;
use warnings;
use vars qw($VERSION @ISA);
($VERSION) = q$Revision: 1.2 $ =~ /Revision:\s+(\S+)/ or $VERSION = "0.0";
use base qw(Tk::Derived Tk::MainWindow);

use Tk::ROText;
use Tk::Frame;

##==============================================================================
## Populate
##==============================================================================
sub Populate {
    my ($mw, $args) = @_;
    my $private = $mw->privateData;
    $private->{ReferenceCount} = 0;
    $private->{Enabled} = 0;

    $mw->SUPER::Populate($args);

    $mw->withdraw;
    $mw->protocol(WM_DELETE_WINDOW => [ $mw => 'withdraw']);
    my $f = $mw->Frame(
        Name => 'stderr_frame',
    )->pack(-fill => 'both', -expand => 1);

    my $text = $f->Scrolled(
        'ROText',
        Name => 'stderr_text',
        -scrollbars => 'se',
        -label=>'Output/Errors',
        -wrap => 'none'
        #-background=>'slate grey'
    )->pack(-fill => 'both', -expand => 1);

    $mw->Advertise('text' => $text);
    $mw->ConfigSpecs(
        '-title' => [ qw/METHOD title Title/, "truGrid" ],
    );

    $mw->Redirect(1);
    return $mw;
}

##==============================================================================
## Redirect
##==============================================================================
sub Redirect {

    my ($mw, $boolean) = @_;
    my $private = $mw->privateData;
    my $old = $private->{Enabled};

    if ($old && !$boolean) {
        untie *STDOUT;# ** hacked this line ** - honyok
        untie *STDERR;
        $SIG{__WARN__} = 'DEFAULT';
    } elsif (!$old && $boolean) {
        tie *STDOUT, 'Tk::Stderr::Handle', $mw;# ** hacked this line ** - honyok
        tie *STDERR, 'Tk::Stderr::Handle', $mw;
        $SIG{__WARN__} = sub { print STDOUT @_ };# ** hacked this line ** - honyok
        $SIG{__WARN__} = sub { print STDERR @_ };
    }
    $private->{Enabled} = $boolean;
    return $old;
}

##==============================================================================
## DecrementReferenceCount
##==============================================================================
sub DecrementReferenceCount {
    my ($mw) = @_;
    my $private = $mw->privateData;

    if (--$private->{ReferenceCount} <= 0) {
        $mw->destroy;
    }
}

##==============================================================================
## IncrementReferenceCount
##==============================================================================
sub IncrementReferenceCount {
    my ($mw) = @_;
    my $private = $mw->privateData;

    ++$private->{ReferenceCount};
}

package MainWindow;
use strict;
use warnings;

my $error_window;

##==============================================================================
## InitStderr
##==============================================================================
sub InitStderr {
    my ($mw, $title) = @_;

    unless (defined $error_window) {
        $error_window = Tk::Stderr->new;
        $error_window->title($title) if defined $title;
    }
    $error_window->IncrementReferenceCount;
    $mw->OnDestroy([ 'DecrementReferenceCount' => $error_window ]);
    return $mw;
}

##==============================================================================
## StderrWindow
##==============================================================================
sub StderrWindow {
    return $error_window;
}

##==============================================================================
## RedirectStderr
##==============================================================================
sub RedirectStderr {
    my ($mw, $boolean) = @_;

    unless (defined $error_window) {
        $mw->InitStderr if $boolean;
        return;
    }
    return $error_window->Redirect($boolean);
}

##==============================================================================
## Define the handle that actually implements things.
##==============================================================================
BEGIN {
    package Tk::Stderr::Handle;
    use strict;
    use warnings;

    ##==========================================================================
    ## TIEHANDLE
    ##==========================================================================
    sub TIEHANDLE {
        my ($class, $window) = @_;
        bless \$window, $class;
    }

    ##==========================================================================
    ## PRINT
    ##==========================================================================
    sub PRINT {
        my $window = shift;
        my $text = $$window->Subwidget('text');
        $text->insert('end', $_) foreach (@_);
        $text->see('end');
        $$window->deiconify;
        $$window->raise;
        $$window->focus;
        $$window->update;# ** hacked this line ** - honyok
    }

    ##==========================================================================
    ## PRINTF
    ##==========================================================================
    sub PRINTF {
        my ($window, $format) = splice @_, 0, 2;

        $window->PRINT(sprintf $format, @_);
    }
}
1;
##==============================================================================
## $Log: Stderr.pm,v $
## Revision 1.2  2003/04/01 03:58:42  kevin
## Add RedirectStderr method to allow redirection to be switched on and off.
##
## Revision 1.1  2003/03/26 21:48:43  kevin
## Fix dependencies in Makefile.PL
##
## Revision 1.0  2003/03/26 19:11:32  kevin
## Initial revision
##============================================================================== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:56:23.477

（在另一个论坛上回答。）

代替：

```
$mw->protocol(WM_DELETE_WINDOW => [ $mw => 'withdraw' ]); 
```

和：

```
$mw->protocol(WM_DELETE_WINDOW => [ $mw => 'OnWithdraw' ]); 
```

定义子程序：

```
sub OnWithdraw{
    my $window = shift;
    my $text   = $window->Subwidget('text');
    $text->delete('0.0', 'end');
    $window->withdraw;
    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:20:18.087

据我所知，离开文本小部件内容的行为是正确的。关闭弹出窗口时，小部件不会被破坏，但会保持原样并附加任何新信息。

# java - 为什么我看到来自 Wikipedia 的不同页面？

> ID：12466351
> 
> 赞同：1
> 
> 时间：2012-09-17T20:06:35.330
> 
> 标签：java, html, http, web, wikipedia

当我在任何浏览器中打开[http://en.wikipedia.org/wiki/Category:Births_by_year](http://en.wikipedia.org/wiki/Category:Births_by_year)时，我会看到包含许多子类别的类别页面和一个子页面[http://en.wikipedia.org/wiki/Park_Sung-Baek](http://en.wikipedia.org/wiki/Park_Sung-Baek)

但是当我用 Java 阅读同一个页面时，我会得到不同内容的类别页面。而不是上面提到的子页面，它包含[http://en.wikipedia.org/wiki/User:Mijotoba/Ruth_Stella_Correa_Palacio](http://en.wikipedia.org/wiki/User:Mijotoba/Ruth_Stella_Correa_Palacio)

怎么可能？为什么维基百科呈现不同的页面？

设置`User-Agent`没有帮助。

**请求“正常”内容的标头**

```
GET http://en.wikipedia.org/wiki/Category:Births_by_year HTTP/1.1
Accept: text/html, application/xhtml+xml, */*
Accept-Language: ru-RU,zh-CN;q=0.5
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
Host: en.wikipedia.org 
```

**请求“修改”内容的标头**

```
GET http://en.wikipedia.org/wiki/Category:Births_by_year HTTP/1.1
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Host: en.wikipedia.org
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Connection: keep-alive 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:45:02.180

是的，这看起来像是 Wikipedia 的前端缓存的临时问题。具体来说，当我从浏览器（发送请求标头）请求[相关页面](http://en.wikipedia.org/wiki/Category%3aBirths_by_year)`Accept-Encoding: gzip, deflate`时，我看到的响应包含标头：

```
Last-Modified: Thu, 13 Sep 2012 16:46:55 GMT 
```

如果我从命令行（不发送标头）使用[LWP](http://search.cpan.org/~gaas/libwww-perl-6.04/lib/LWP.pm)请求同一页面`Accept-Encoding`，标头看起来非常不同：

```
Last-Modified: Sat, 25 Aug 2012 12:52:42 GMT 
```

而且，实际上，后一个响应包含您报告使用 Java 客户端接收到的相同过时内容。

我怀疑发生的事情是，在过去的某个时候，服务器故障导致过时的副本在页面更改时不会从缓存中清除。在这种特殊情况下，您可能可以通过[清除页面](http://en.wikipedia.org/wiki/Wikipedia%3aPurge)来修复它。更一般地说，如果您在未来继续看到此类陈旧的缓存页面，您可能需要向[Wikipedia 服务器管理员](http://meta.wikimedia.org/wiki/Sysadmin)报告问题，以防缓存出现问题需要修复。

附言。你为什么要使用 Java 获取 Wikipedia 前端 HTML 页面？通常，您应该改用[MediaWiki API](http://www.mediawiki.org/wiki/API)。

# java - 未在 java 中使用 log4j 更新/创建日志文件

> ID：12466353
> 
> 赞同：2
> 
> 时间：2012-09-17T20:06:41.760
> 
> 标签：java, log4j

我正在尝试在 Java 中使用 log4j 捕获日志。可执行文件在 linux 环境中，它显示日志消息，但是，它没有写入日志文件。我正在使用 log4j.xml，这就是我到目前为止所拥有的

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

  <appender name="LocalFileAppender" class="org.apache.log4j.RollingFileAppender">
    <param name="File"   value="logs/error.log" />
    <param name="Append" value="true" />
    <param name="MaxFileSize" value="500KB" />
    <param name="maxBackupIndex" value="1" />
      <layout class="org.apache.log4j.PatternLayout">
         <param name="ConversionPattern" value="%d %-5p [%c] - %m%n"/>
      </layout>
  </appender>

  <appender name="ConsoleAppender" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.SimpleLayout"/>
  </appender>

  <root>
    <priority value ="Debug" />
    <appender-ref ref="console" /> 
  </root>
</log4j:configuration> 
```

我不清楚java程序如何知道xml文件的位置。我认为这就是问题所在。而且，这就是我在代码中设置的方式，

```
log = Logger.getLogger(MyClass.class);

BasicConfigurator.configure(); 
```

任何帮助都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:09:56.907

您可以将`log4j.xml`文件放在应用程序的类路径中，log4j 会在您第一次使用 log4j 时自动找到它来配置自己。

但是，通过调用`BasicConfigurator.configure()`，您将撤消 XML 文件所做的任何配置 - 因为这只会为根记录器设置控制台附加程序。

运行你的 java 程序，`-Dlog4j.debug`让 log4j 在启动时输出一堆关于它在哪里寻找配置文件的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T15:34:20.217

**1）**在Windows环境下，即使所有参数都正确，也需要确保文件的路径是绝对的，并且用“/”而不是普通的“\”分隔。

在决定路径时，“\”被忽略，因此它成为一个大名称。

因此，似乎什么都没写，实际上是在不同的地方写的。:)

**2）**在 Eclipse 上，尝试“matt B”之前的答案所建议的选项..

转到 RUN > RUN Configurations > Arguments [tab] 并在 VM arguments > Apply 和 RUN 中输入值。显然你的文件应该有 main..

# java - 在 jsoup 中解析表格（Android）

> ID：12466357
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:07:09.090
> 
> 标签：java, android, jsoup

[http://www.novaprojecten.nl/roosters/lbl/basis/38/c/c00086.htm](http://www.novaprojecten.nl/roosters/lbl/basis/38/c/c00086.htm)

我正在尝试解析那里看到的表格...

我想要的是将所有天（第一行）放入 ListView。

当我每天点击 ListView 项目时，我想在当天下方的列中显示数据，包括每个教室的时间......

例如在一行中：12:45 - 15:15 LBL130 (ICT)

在android上执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:21:23.003

这是您尝试解析的可怕 HTML。但是您可以使用正确的选择器选择 JSoup 的日期。完整的选择器是`table tbody tr td table tbody tr td font`，但可以缩短为`body > center > table > tbody > tr:lt(1) font`.

```
Document doc = Jsoup.connect("http://www.novaprojecten.nl/roosters/lbl/basis/38/c/c00086.htm").get();
List<String> days = new ArrayList<String>();
for (Element col: doc.select("body > center > table > tbody > tr:lt(1) font")) {
    days.add(col.text());
}
System.out.println(days); // Maandag 17-09, Dinsdag 18-09, Woensdag 19-09... 
```

为了选择每天的内容，您必须解析每一行并仅检索第 n 列。

所有这一切都可以使用 JSoup 来回答您的问题。您应该查看[他们的网站](http://jsoup.org)和[Selector 文档](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)，以便自己尝试更多的东西。

# javascript - 在完全加载之前计算用户提交的图像的宽度

> ID：12466359
> 
> 赞同：0
> 
> 时间：2012-09-17T20:07:21.967
> 
> 标签：javascript, jquery, loading, ribbon

我有一系列由用户生成的图像，这些图像被输入到可拖动的功能区中。我正在设置图像的高度，以便它们彼此很好地排列并显示在一条线上。

我面临的问题是我需要等待所有图像加载，然后才能计算功能区的宽度并根据功能区宽度设置一些可拖动的参数......在某些情况下，这需要 5 秒以上。

有没有办法等到所有这些图像都**开始**加载然后获取功能区的宽度......这样如果只加载了大全景图像的前 10 个垂直像素，它仍然可以执行计算。

我正在使用 jQuery。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:08:58.577

您可以使用`load`事件：

> load 事件在文档加载过程结束时触发。至此，文档中的所有对象都在 DOM 中，所有图片和子帧都加载完毕。

```
$(window).load(function(){
  //...
}) 
```

# wpf - 枚举刷 IValueConverter 抛出异常试图将 System.String 转换为 IValueConverter？

> ID：12466360
> 
> 赞同：3
> 
> 时间：2012-09-17T20:07:23.397
> 
> 标签：wpf, exception, data-binding, enums, ivalueconverter

我正在尝试将枚举转换为画笔，以便可以使用枚举变量来控制某些控件的颜色

我的枚举（不是很相关）：

```
public enum Colors {
        Red, Blue,
    } 
```

这是我的转换器：

```
[ValueConversion(typeof(Colors), typeof(Brush))]
public class EnumToBrushConverter : IValueConverter {

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
        return (Brushes.Red);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
        throw new NotImplementedException();
    }
} 
```

在这里，我尝试使用它来根据枚举的值更改标签的颜色（Color 是 Colors 类型的公共属性）：

```
<Grid>
    <Grid.Resources>
        <conv:EnumToBrushConverter x:Key="EnumToBrushConverter" />
    </Grid.Resources>
    <Label Content="fixed" Foreground="{Binding Path=Color, Converter=EnumToBrushConverter}" />
</Grid> 
```

构建窗口时，出现以下异常：

```
System.Windows.Markup.XamlParseException occurred
  Message='Set property 'System.Windows.Data.Binding.Converter' threw an exception.' Line number '9' and line position '11'.
  Source=PresentationFramework
  LineNumber=9
  LinePosition=11
  StackTrace:
       at System.Windows.Markup.XamlReader.RewrapException(Exception e, IXamlLineInfo lineInfo, Uri baseUri)
       at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
       at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri)
       at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream)
       at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator)
       at TestCollectionChangingListbox.MainWindow.InitializeComponent() in c:\Users\stevez\Documents\Visual Studio 2010\Projects\TestCollectionChangingListbox\TestCollectionChangingListbox\MainWindow.xaml:line 1
       at TestCollectionChangingListbox.MainWindow..ctor() in C:\Users\stevez\Documents\Visual Studio 2010\Projects\TestCollectionChangingListbox\TestCollectionChangingListbox\MainWindow.xaml.cs:line 29
  InnerException: System.InvalidCastException
       Message=Unable to cast object of type 'System.String' to type 'System.Windows.Data.IValueConverter'.
       Source=PresentationFramework
       StackTrace:
            at System.Windows.Baml2006.WpfSharedBamlSchemaContext.<Create_BamlProperty_Binding_Converter>b__14c(Object target, Object value)
            at System.Windows.Baml2006.WpfKnownMemberInvoker.SetValue(Object instance, Object value)
            at MS.Internal.Xaml.Runtime.ClrObjectRuntime.SetValue(XamlMember member, Object obj, Object value)
            at MS.Internal.Xaml.Runtime.ClrObjectRuntime.SetValue(Object inst, XamlMember property, Object value)
       InnerException: 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T20:10:47.970

您需要将转换器作为静态资源访问；试试这个：

```
<Label Content="fixed" Foreground="{Binding Path=Color, Converter={StaticResource EnumToBrushConverter}}" /> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T20:12:47.217

您将需要在相关控件的资源部分（如果您想在应用程序的多个位置使用转换器，则在 app.xaml 文件中）创建该转换器的实例：

```
<UserControl.Resources>
    <local:EnumToBrushConverter x:Key="EnumToBrushConverter " />
</UserControl.Resources> 
```

然后将该转换器作为静态资源引用：

```
<Label Content="fixed" Foreground="{Binding Path=Color, Converter={StaticResource EnumToBrushConverter}" /> 
```

# jquery - jQuery slideToggle 在滑动时重叠先前的内容

> ID：12466367
> 
> 赞同：1
> 
> 时间：2012-09-17T20:07:48.917
> 
> 标签：jquery, slidetoggle

我正在尝试使用 jQuery slideToggle() 函数来显示和隐藏包含一些细节的表格。这个想法是，当我点击表格的标题行时，我会得到下面的详细信息。

我正在使用 w3 学校的代码，这是原始代码：
[http ://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_slide_toggle](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_slide_toggle)

问题是滑动 div 与已经存在的表头重叠。
在此处查看运行代码的结果： `http://62.219.127.85/sites/isell/tests/123123.php`

我使用 `onmouseover()`来获取我当前要单击的标题。
这是我的代码（只是我写的一个例子，不是真实的）

谁能找到这里有什么问题？

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

<style type="text/css">
#hideme,#triggerSlide
{
padding:5px;
text-align:center;
background-color:#e5eecc;
border:solid 1px #c3c3c3;
}
#hideme
{
padding:50px;
display:none;
}
</style>

<body>
<div id="triggerSlide" class="adID" onmouseover="storeAdID(this);" 
style="padding:2px;">
    <table border="1">
        <tr>
            <th colspan="2">asdasd</th>
        </tr>
    </table>
</div>

<div class="adID" id="hideme">
    <table border="1">
        <tr>
            <td>123</td>
            <td>145</td>
        </tr>
        <tr>
            <td>987</td>
            <td>951</td>
        </tr>
    </table>
</div>
</body>

<script> 
    var adID;

    function storeAdID(obj) {
        adID = obj.className;
    }
</script>

<script>
$(document).ready(function(){
  $("#triggerSlide").click(function(){
    $("."+adID).slideToggle("slow");
  });
});
   </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:13:14.463

您有两个具有“adID”类的元素，并且将它们都隐藏了。

这是一个 JSFiddle：http: [//jsfiddle.net/mmcglynn/j6z73/](http://jsfiddle.net/mmcglynn/j6z73/)

我认为您想要更接近此的东西：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

<style type="text/css">
#hideme,#triggerSlide
{
padding:5px;
text-align:center;
background-color:#e5eecc;
border:solid 1px #c3c3c3;
}
#hideme
{
padding:50px;
display:none;
}
</style>

<body>
<div id="triggerSlide" style="padding:2px;cursor:pointer">
    <table border="1">
        <tr>
            <th colspan="2">asdasd</th>
        </tr>
    </table>
</div>

<div class="adID" id="hideme">
    <table border="1">
        <tr>
            <td>123</td>
            <td>145</td>
        </tr>
        <tr>
            <td>987</td>
            <td>951</td>
        </tr>
    </table>
</div>
</body>

<script>
$(document).ready(function(){
  $("#triggerSlide").click(function(){
    $(".adID").slideToggle("slow");
  });
});
</script> 
```

# installation - windows上的zookeeper c绑定安装

> ID：12466368
> 
> 赞同：1
> 
> 时间：2012-09-17T20:07:51.697
> 
> 标签：installation, apache-zookeeper

我正在尝试使用 cygwin 在 Windows 上安装 zookeeper c 绑定

我收到以下错误

```
Creating library file: .libs/libzookeeper_st.dll.a
./.libs/libzkst.a(zk_hashtable.o): In function `collectWatchers':
/usr/local/zookeeper-3.4.3/src/c/src/zk_hashtable.c:285: undefined reference to `__imp__ZOO_SESSION_EVENT'
./.libs/libzkst.a(zk_hashtable.o): In function `do_foreach_watcher':
/usr/local/zookeeper-3.4.3/src/c/src/zk_hashtable.c:273: undefined reference to `__imp__ZOO_SESSION_EVENT'
collect2: ld returned 1 exit status
Makefile:567: recipe for target `libzookeeper_st.la' failed
make: *** [libzookeeper_st.la] Error 1 
```

它在 linux CentOS 下编译良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T08:30:14.990

这可能来得太晚了。我遇到了完全相同的问题，并且从 Zookeeper 3.4.5 开始仍然存在。此外，使用较新版本的 JRE 启动时，提供的脚本无法正确终止 Java.exe。

注意：您需要安装 awk 才能使用以下解决方案。完成后，您可以进行以下更改，以便能够通过 bash 脚本正确编译和运行：

1.  在文件 zookeeper-3.4.x/src/c/src/zk_hashtable.c 中，将 ZOO_SESSION_EVENT 的所有实例替换为 SESSION_EVENT_DEF。如果您查看源代码，这些定义是等效的，并且更改它们将允许您正确地制作。您现在可以使用“make”进行定期编译。

2.  如果你有最新版本的 Java，bin 目录中 Zookeeper 提供的脚本（例如，zkServer.sh）将无法正确杀死 Java。事实上，JRE 无法响应从 Cygwin 传递给它的任何 SIGINT / SIGKILL 等信号。为了解决这个问题，您可以在 zookeeper-3.4.x/bin/zkServer.sh 中更改以下内容：

    ```
    ZOOCFG=`cygpath -wp "$ZOOCFG"`
    # cygwin has a "kill" in the shell itself, gets confused
    KILL=/bin/kill 
    ```

    将其替换为以下内容，以强制使用 Windows taskkill，JRE 不能忽略：

    ```
    ZOOCFG=`cygpath -wp "$ZOOCFG"`
    # cygwin has a "kill" in the shell itself, gets confused
    KILL="taskkill /F /PID" 
    ```

    此外，还要删除以下行：

    ```
    $KILL -9 $(cat "$ZOOPIDFILE")
    rm "$ZOOPIDFILE"
    echo STOPPED 
    ```

    用这个替换它们，强制脚本向 taskkill 发送 Windows PID，而不是创建的 Java 任务的 Cygwin PID：

    ```
    if $cygwin
    then
        CYGPID=$(cat "$ZOOPIDFILE")
        WINPID=$(ps | awk "/$CYGPID/ { print \$4 }")
        $KILL $WINPID
    else
        $KILL $(cat "$ZOOPIDFILE")
    fi
    rm "$ZOOPIDFILE"
    echo STOPPED 
    ```

你完成了！同样，如果您打算在第二步中使用修复程序，请确保您已安装 awk。

[cygwin](/questions/tagged/cygwin "显示标记为“cygwin”的问题") [c](/questions/tagged/c "显示标记为“c”的问题") [动物园管理员](/questions/tagged/zookeeper "显示标记为“动物园管理员”的问题")

# ruby-on-rails - 查找销毁动作的多态关联

> ID：12466374
> 
> 赞同：0
> 
> 时间：2012-09-17T20:08:21.290
> 
> 标签：ruby-on-rails, polymorphic-associations

所以我有一个多态的收藏模型，它允许用户收藏各种不同的东西（目前工作正常）。我现在正在尝试销毁他们的收藏夹，但在选择要销毁的收藏夹时遇到困难，我不知道如何启动 form_for。

我的创建看起来像这样：

units_controller.rb - 在这里我为 form_for 创建了@favorite

```
 @favorite = Favorite.new 
  @favorable = @unit 
```

_favorite.html.erb

```
<%= form_for([@user, @favorable, @favorite]) do |f| %>
  <div><%= f.hidden_field :favorer %></div>
  <%= f.submit "Favorite", class: "btn btn-large btn-primary" %>
<% end %> 
```

收藏夹控制器.rb

```
 def create
    @user = User.find(params[:user_id])
    @favorite = @favorable.favorites.new(params[:favorite])
    @favorite.favorer = current_user
    @favorite.save  # Favorite id: 1, favorer: 2, favorable_id: 1, favorable_type: "Unit"
    respond_to do |format|
      format.html { redirect_to :back }
      format.js
    end
  end 
```

到目前为止，这是我对删除的了解，但我不确定如何调用 form_for：

_unfavorite.html.erb

```
<%= form_for([@user, @favorable, @favorite], # problems here as @favorite is Favorite.new
             html: { method: :delete }, remote: true) do |f| %>
  <%= f.submit "Unfavorite", class: "btn btn-large" %>
<% end %> 
```

收藏夹控制器.rb

```
def destroy
  @favorite = Favorite.find(params[:id])
  @favorite.destroy
  respond_to do |format|
    format.html { redirect_to @user }
    format.js
  end
end 
```

我的跟随模型使用这个，但我不知道如何将它嵌套在 /users/1/units/1/favorites

```
current_user.relationships.find_by_followed_id(@user) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:44:28.870

终于想通了...

```
def destroy
  @user = current_user
  @favorite = @favorable.favorites.where(favorer: current_user).first
  @favorite.destroy
  respond_to do |format|
    format.html { redirect_to :back }
    format.js
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:55:31.417

`_unfavorite.html.erb`您的标记中有错误吗？好像少了一个逗号。我正在做类似的事情，但在删除多态照片时遇到问题。

# java - Java 1.4 String.replaceAll 单引号问题

> ID：12466376
> 
> 赞同：0
> 
> 时间：2012-09-17T20:08:54.360
> 
> 标签：java, json, string, java1.4, json-simple

我有一个来自必须放入 JSON 的数据库的字符串值，但该值可以包含单引号和双引号。听起来很容易，对吧？好吧，显然不在 Java 1.4.2 中。不要让我开始为什么它必须是 1.4.2，我从另一个开发人员那里继承了这个，由于我无法控制的因素，我们还不能更新这个项目。:)

所以，我已经尝试了所有这些（还有很多其他的只是为了看看结果）：

```
"sample user's string".replaceAll("'", "\'")      // returns "sample user's string"
"sample user's string".replaceAll("'", "\\'")     // returns "sample user's string"
"sample user's string".replaceAll("'", "\\\'")    // returns "sample user's string"
"sample user's string".replaceAll("'", "\\\\'")   // returns "sample user\\'s string"
"sample user's string".replaceAll("'", "%%")      // returns "sample user%%s string" 
```

我想要的只是`sample user\'s string`，我做错了什么？太糟糕了 1.4.2 没有 String.replace(String,String) 函数。

**编辑**：我们正在使用`json-simple`JSON 库，我正在查看结果 JSON 字符串中上述命令的输出。我添加了额外的调试信息以在 JSON 输出之前查看值，看起来上面的命令确实有效，但`json-simple`库正在剥离转义字符。

所以，我看到的是：

```
"sample user's string".replaceAll("'", "\\\\'")    // sample user\'s string
myJSONObject.put("value", "sample user's string".replaceAll("'", "\\\\'")) // sample user\\'s string"
myJSONObject.put("value", "sample user's string") // sample user's string 
```

所以看起来图书馆并没有像预期的那样完成它的工作。有没有使用过`json-simple`的人知道解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:11:43.237

我怀疑您在自动为您转义反斜杠的上下文中查看字符串。你的倒数第二个样本应该没问题。例如：

```
public class Test {
    public static void main(String[] args) {
        System.out.println("sample user's string".replaceAll("'", "\\\\'"));
    }
} 
```

印刷：

```
sample user\'s string 
```

您没有说您在哪里查看该值，但如果它在调试器中，那么很可能会为您加倍反斜杠，以呈现该值，就好像它在 Java 文字中一样。

但理想情况下，您不应该手动执行此类操作 - 这太容易出错了。您应该使用为您处理所有这些的 JSON 库，因此您*只*需要指定值。

# php - 网页加载很慢

> ID：12466379
> 
> 赞同：0
> 
> 时间：2012-09-17T20:09:04.880
> 
> 标签：php, html, optimization

我有这个加载速度很慢的网页：[https ://www.mlh-shop.com/press/233](https://www.mlh-shop.com/press/233)

该滑块中有 185 个小图像。如何优化它以加快加载速度？

我可以只加载几张图片，显示页面，然后在后台加载其他图片吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:16:22.983

浏览器对每个域允许的同时连接数有内置限制（现代浏览器默认为 8 个）。加快这一速度的一种方法是使用 CDN - 内容交付网络 - 从不同的域加载图像。

另一个问题是如何使页面尽可能快地可用。为此，您使用“延迟加载”，其中只有最少数量的图像与页面 HTML 一起加载，其余的则使用 JavaScript 动态加载。您发送图像列表，然后在页面完成加载后开始获取它们。

这并没有真正“加快”加载时间，而是允许在后台加载图像时立即使用页面。

您可以结合使用这两种技术以获得更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:21:27.977

I ran your site through Google Page Speed Analisys, here's what they suggest:

1.  Images are resized in HTML or CSS. Serving scaled images could save 3.4MiB (29% reduction).
2.  Optimizing (compressing their file size) the images could reduce their size by 2.6MiB (22% reduction).
3.  The cacheable resources have a short freshness lifetime. Specify an expiration at least one week in the future for your resources...

For #3 you could simply use an .htaccess rule to set the expiration date on downloaded assets. Here is a strait forward guid on doing that: [http://css-tricks.com/snippets/htaccess/set-expires/](http://css-tricks.com/snippets/htaccess/set-expires/)

Cheers!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:13:27.700

您可以做的一件事是将滑块中的所有图像预处理成一张大的静态图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T20:14:32.593

您应该使用延迟加载。不要使用 PHP 输出所有 img 元素，而是稍后在客户端使用 JavaScript 创建它们。在您的情况下，这并没有真正的可用性损失，因为您的滑块已经使用 JavaScript，并且如果用户禁用了 JS，则无论如何都不会工作。

# android - 样式化 android 对话框的标题

> ID：12466381
> 
> 赞同：2
> 
> 时间：2012-09-17T20:09:24.650
> 
> 标签：android, android-dialog, android-theme, android-styles

我想为 Android 对话框的标题设置样式。这是标准的 android 对话框的样子![在此处输入图像描述](../Images/f47026cf0aa84d9c02bdee060bded0f5.png)

我想要的是像这样的东西，我用photoshop（标题的样式背景和它的另一种文本颜色）。 ![在此处输入图像描述](../Images/77162f03b230ae98820c2dbfe0161fe7.png)

我知道可以将主题作为参数传递给 Dialog()-Constructor。但我不知道 xml 样式的元素会是什么样子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:23:26.247

它真的很简单...

您所要做的就是为您上传的图片创建一个 XML 布局，然后只需使用您刚刚创建的 XML 文件简单地扩展对话框......

我只是给你一个示例代码，然后你可以轻松地跟随

```
private View mView;
private Dialog mDialog;
private LayoutInflater mInflater; 
```

现在创建一个函数：-

```
private void showCustomDialog() {
    mInflater = (LayoutInflater) getBaseContext().getSystemService(
            LAYOUT_INFLATER_SERVICE);
    ContextThemeWrapper mTheme = new ContextThemeWrapper(this,
            R.style.YOUR_STYE);

    mView = mInflater.inflate(R.layout.YOUR_XML_LAYOUT_FILE, null);
    // mDialog = new Dialog(this,0); // context, theme

    mDialog = new Dialog(mTheme);
    mDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    mDialog.setContentView(this.mView);
    mDialog.show();

    TextViiew someText = (TextView) mView.findViewById(R.id.textViewID);
    // do some thing with the text view or any other view 

} 
```

最后确保你的风格是： -

```
<style name="YOUR_STYLE">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowFrame">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">false</item>
    <item name="android:windowIsTranslucent">false</item>
    <item name="android:windowContentOverlay">@android:color/transparent</item>
    <item name="android:backgroundDimEnabled">false</item>
</style> 
```

就是这样......你完成了......只要在你想显示自定义对话框的地方调用这个函数......

希望解释是有用的....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:26:47.397

您应该可以使用[`setCustomTitle(View)`](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#setCustomTitle%28android.view.View%29)它。我从未使用过它，但它应该是这样的：

```
TextView title = new TextView(context);
title.setBackgroundColor(0xFFFF0000);
title.setTextColor(0xFFFFFFFF);
title.setLayoutParams(/* LayoutParams with MATCH_PARENT width and WRAP_CONTENT height */);
title.setPadding(/* Some padding values */);
yourDialogBuilder.setCustomTitle(title); 
```

在逐字复制现有 Android 对话框标题的布局方面，我不确定这些值的参数是什么。你可能不得不乱来和/或用谷歌搜索找到它们。（字体本身显然是 4.0+ 的 Roboto 和更少的 Droid。）

# php - mysqli 查询成功但给出错误号 0

> ID：12466383
> 
> 赞同：1
> 
> 时间：2012-09-17T20:09:33.133
> 
> 标签：php, mysql, database, codeigniter, stored-procedures

我很抱歉提出一个更广泛的问题，然后最喜欢，但我在整个互联网上找不到任何帮助。我正在一个我不负责数据库的站点上工作（是的，它非常有问题），我被告知使用存储过程将数据插入表中。

查询正在运行。它将数据插入表中，但其他东西正在触发错误。

我的问题是：这段代码中是否有任何东西会触发该错误，或​​者它是否在存储过程中？我能做些什么来测试它？有什么建议吗？我无法弄清楚错误号 : 0 实际上是什么。

我正在使用 codeigniter 框架。这是代码：

```
 public function addScopeContent () {
    $cn = '%';
    $gp = $this->input->post('group');
    $co = $this->input->post('company');
    $ci = $this->input->post('city');
    $dp = '%';

    if ($gp == 'BU000') {
        $gp = '%';
    }
    if ($co == 'CO000') {
        $co = '%';
    }
    if ($ci == 'CI000') {
        $ci = '%';
    }

    $location = $cn .'-'. $gp .'-'. $co .'-'. $ci .'-'. $dp;

    $query = $this->db->query('call rollout_systems_multiimport('. $this->session->userdata('scopeId') .', "'. $location .'")');
    if ($query) {
        redirect('discovery/addContent');
    }
} 
```

这是存储过程：

```
 CREATE DEFINER=`root`@`localhost` PROCEDURE `rollout_systems_multiimport`(
  var_scope_id varchar(250),
  var_searchString varchar(250))
  BEGIN

  Insert into rollout_systems
  (`sys_name`, `sys_serial`, `eam_model`, `EOL_date`, `eam_user`, `scope_id`)
  select `ad_name`,`eam_Serial_Number`,`eam_Model`,`Model_EOL`,`ad_account`,var_scope_id
  from `disc_userpool` inner join `disc_systempool`
  on `ad_account` = `user_aurora_id`
  Where `disc_userpool`.`location_code` like var_searchString; 
```

注意：我刚刚尝试将 database.php 页面中的 dbdriver 从 mysqli 更改为 mysql。它不再给出错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T15:03:20.553

好像是[codeigniter mysql驱动的bug](http://codeigniter.com/forums/viewthread/181751/#860516)，用方法试试[`simple_query`](http://ellislab.com/codeigniter/user-guide/database/queries.html/)。

# java - 如何使用 Libgdx/Java 绘制文本？

> ID：12466385
> 
> 赞同：37
> 
> 时间：2012-09-17T20:09:37.927
> 
> 标签：java, graphics, libgdx

我在谷歌搜索如何使用 Libgdx 绘制简单的 2D 文本时遇到了很多麻烦。这是到目前为止我整理的代码：

```
SpriteBatch spriteBatch;
BitmapFont font;
CharSequence str = "Hello World!";
spriteBatch = new SpriteBatch();
font = new BitmapFont();

spriteBatch.begin();
font.draw(spriteBatch, str, 10, 10);
spriteBatch.end(); 
```

该代码确实绘制了 Hello World 字符串，但是，它弄乱了我所有的其他绘图。他们在那里，只是被残忍地肢解，移动等等。我已经尝试过`Gdx.gl11.glPushMatrix()`几乎`Gdx.gl11.glPopMatrix()`每个陈述子集。

我已将残缺的图纸缩小到`font.draw()`通话范围，如果将其取出，一切正常（但当然那时没有文字）。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-12-21T12:38:57.217

我看不出为文本绘图创建单独的批处理的太多理由。使用 gdxVersion = '1.4.1' （在 Android Studio 中使用 gradle 构建）该代码成功绘制文本：

```
BitmapFont font = new BitmapFont(); //or use alex answer to use custom font

public void render( float dt )
  {
    batch.setProjectionMatrix(camera.combined); //or your matrix to draw GAME WORLD, not UI

    batch.begin();

    //draw background, objects, etc.
    for( View view: views )
    {
      view.draw(batch, dt);
    }

    font.draw(batch, "Hello World!", 10, 10);

    batch.end();
  } 
```

请注意，这里您绘制的是游戏世界坐标，因此如果您的角色移动（例如在平台游戏中），那么文本也会移动。如果您想查看文本，它将被固定在屏幕上，例如 Label/TextField 或如何在不同的 UI 框架中调用它，而不是我建议使用 Stage（和 TextArea 用于文本），请参阅例如如何使用这里的舞台：[http ://www.toxsickproductions.com/libgdx/libgdx-basics-create-a-simple-menu/](http://www.toxsickproductions.com/libgdx/libgdx-basics-create-a-simple-menu/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-24T10:37:26.017

当我创建位图字体时，它是这样的：

```
font = new BitmapFont(Gdx.files.internal("Calibri.fnt"),Gdx.files.internal("Calibri.png"),false); 
```

通过下载一些字体文件来尝试这个（下载字体时请检查是否包含相同的.fnt文件和.png文件）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-12-23T17:42:50.877

要创建 .fnt 文件，请使用 LibGDX 网站提供的 hiero。

设置字体大小为150，它将创建一个`.fnt`文件和一个`.png`文件。将这两个文件复制到您的资产文件夹中。

声明字体：

```
BitmapFont font; 
```

加载字体：（在创建方法中）

```
font = new BitmapFont(Gdx.files.internal("data/rayanfont.fnt"), false);
//rayanfont is the font name 
```

渲染：

```
batch.begin();
font.setScale(.2f);
font.draw(batch, "hello", x,y);
batch.end(); 
```

这将顺利进行。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-23T16:07:34.137

尝试调用多个batch.begin()和batch.end()：

```
CharSequence str = "Hello World!";
spriteBatch = new SpriteBatch();
font = new BitmapFont();

spriteBatch.begin();
font.draw(spriteBatch, str, 10, 10);
spriteBatch.end();
spriteBatch.begin();
//draw your other sprites here
spriteBatch.draw(...);
spriteBatch.end(); 
```

或者只是使用不同的 SpriteBatch 实例

# eclipse - Spring MVC Maven Eclipse Juno STS 3.0.0 项目在哪里？

> ID：12466392
> 
> 赞同：1
> 
> 时间：2012-09-17T20:10:04.520
> 
> 标签：eclipse, spring, jakarta-ee, eclipse-juno

我正在创建一个新的 Spring MVC webapp。

我使用 STS 3.0 Dashboard -> Spring Template Project -> Spring MVC Project (URL:http://dist.springsource.com/release/STS/help/org.springframework.templates.mvc-3.1.2.zip) 创建该项目。它创建了一个这样的目录结构：

```
build/
    classes/
src/
    main/
        java/
            com/
                example/
                    web/
                        HomeController.java
        resources/
            META-INF/
            log4j.xml
        webapp/
            resources/
            WEB-INF/
                classes/
                spring/
                    appServlet/
                        servlet-context.xml
                    root-context.xml
                views/
                    home.jsp
                web.xml
    test/ ***(I'll leave out what's under test)***
target/
    classes/  ***(I'll leave out what's under classes)***
    test-classes/  ***(I'll leave out what's under testclasses)***
WebContent/
    META-INF/
        MANIFEST.MF
    WEB-INF/
        lib/ 
```

这与我可以找到文档的任何目录布局都不匹配，而且它看起来肯定是错误的。比如为什么有 a`WebContent/WEB-INF`和 a `src/webapp/WEB-INF`？为什么 a`build/`和 a都存在`target/`？

我希望能够从 Eclipse Juno 以及使用 Maven 的命令行自动构建和部署，所以问题 1 是：如何清理这个目录结构？

`src/main/resources/`问题2：和有什么区别`src/main/webapp/resources`？如何选择放置给定静态资源的目录？

问题 3：如果我需要包含我无法让 Maven 获取的库，我应该将它们放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T04:57:37.603

我将它绑定在本地，以下是文件夹结构：

```
.
├── pom.xml
├── src
│   ├── main
│   │   ├── java
│   │   │   └── com
│   │   │       └── test
│   │   │           └── spring
│   │   │               └── HomeController.java
│   │   ├── resources
│   │   │   ├── log4j.xml
│   │   │   └── META-INF
│   │   └── webapp
│   │       ├── resources
│   │       └── WEB-INF
│   │           ├── classes
│   │           ├── spring
│   │           │   ├── appServlet
│   │           │   │   └── servlet-context.xml
│   │           │   └── root-context.xml
│   │           ├── views
│   │           │   └── home.jsp
│   │           └── web.xml
│   └── test
│       ├── java
│       │   └── com
│       │       └── test
│       │           └── spring
│       └── resources
│           └── log4j.xml
└── target
    ├── classes
    │   ├── com
    │   │   └── test
    │   │       └── spring
    │   │           └── HomeController.class
    │   └── log4j.xml
    ├── m2e-wtp
    │   └── web-resources
    │       └── META-INF
    │           ├── MANIFEST.MF
    │           └── maven
    │               └── com.exigen
    │                   └── spring
    │                       ├── pom.properties
    │                       └── pom.xml
    └── test-classes
        ├── com
        │   └── test
        │       └── spring
        └── log4j.xml 
```

（我删除了 .XXX 文件/文件夹，它只是 eclipse 的元数据）

基本上，对于你的问题：

1.  典型`src/webapp/WEB-INF`的是maven方式，`WebContent/WEB-INF`也是[WTP](http://www.eclipse.org/webtools/)方式。并建议使用maven方式。
2.  也是`build/`由eclipse生成的，`target/`是maven方式，你可以忽略它。
3.  对于**Question2**，`src/mian/resources`是将编译到`target/classes`文件夹的 Maven 方式。'src/main/webapp/resources' 用于一些静态资源。
4.  对于**Question3**，实际上所有的 3rd-party 库都在`WEB-INF/lib`after 包中，因此无论是否使用 maven，您都可以将库放入此文件夹中。

# java - SWT - 显示一个忙碌的光标

> ID：12466393
> 
> 赞同：5
> 
> 时间：2012-09-17T20:10:13.817
> 
> 标签：java, swt, mouse-cursor

我试图在开始操作时更改光标。我希望光标显示忙碌，直到操作完成。我有一个单独的 operationListener 类。我不确定如何分配光标？

从 AplotBaseDialog 类调用

```
listOp.addOperationListener(new MyOperationListener(this) {
    etc....
} 
```

单独的班级

```
 public abstract class MyOperationListener implements InterfaceAIFOperationListener {
   Cursor busyCursor = null;
   AplotBaseDialog w = null;

  public MyOperationListener(AplotBaseDialog win) {

  **Should this not be getCurrent?**
    busyCursor = new Cursor(Display.getCurrent(), SWT.CURSOR_WAIT);

    w = win;
  } // end constructor

  public void startOperation(String startMessage) {
     ** should this be getting a Shell form the AplotBaseDialog? **
     w.???.setCursor(busyCursor);

  } // end startOperation()

  public void endOperation() {
     try {
        endOperationImpl();
     }
     finally {
        w.???.setCursor(null);
     }
  } // end endOperation()

  abstract protected void endOperationImpl();
 } // end class MyOperationListener 
```

**编辑**

```
 plotButton.addSelectionListener(new SelectionAdapter() {
         public void widgetSelected(SelectionEvent e) {
            BusyIndicator.showWhile(Display.getDefault(), new Runnable(){
               public void run(){
                  startPrinterListOperation(); 
               }
             });
         }
   }); 
```

**编辑**

```
 private void startPrinterListOperation() {

  listOp = new AplotPrinterListOperation(appReg.getString("aplot.message.GETPRINTERLIST"), session);
  listOp.addOperationListener(new MyOperationListener(this) {
     public void endOperationImpl() {
        try {
           printers.clear();
           printers.addAll((ArrayList<PrinterProfile>) listOp.getPrinters());
           Display.getDefault().asyncExec(new Runnable() {
              public void run() {

                 showAplotPlotterDialog();
              }
           });
        }
        finally {

           listOp.removeOperationListener(this);
           listOp = null;
        }
     }
  });
  session.queueOperation(listOp);

 } // end startPrinterListOperation() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T20:33:33.683

你可以使用

```
 BusyIndicator.showWhile(Display.getDefault(), new Runnable(){

    public void run(){
       //your code
    }
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T21:14:03.557

这对我有用：

```
private static boolean wait = false;

private static Cursor cursor = null;

public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    Button button = new Button(shell, SWT.PUSH);
    button.setText("Change cursor");

    button.addListener(SWT.Selection, new Listener() {

        @Override
        public void handleEvent(Event arg0) {
            wait = !wait;

            if(cursor != null)
                cursor.dispose();

            cursor = wait ? new Cursor(display, SWT.CURSOR_WAIT) : new Cursor(display, SWT.CURSOR_ARROW);

            shell.setCursor(cursor);
        }
    });

    shell.setSize(200,200);
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();

    if(cursor != null)
        cursor.dispose();
} 
```

只需通过 . 设置包含外壳的光标即可[`setCursor(Display, int)`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Control.html#setCursor%28org.eclipse.swt.graphics.Cursor%29)。

如果您不想更改整个 shell 的光标，请使用您选择的`Composite`或`Control`。

* * *

请记住，您必须为自己创建的`dispose()`每个实例。`Cursor`

# java - 如何从一台针对另一台机器的机器运行 ant 脚本？

> ID：12466397
> 
> 赞同：0
> 
> 时间：2012-09-17T20:10:18.987
> 
> 标签：java, maven, ant

我已经使用 Ant 执行了以下操作。我需要从机器 A 运行 ant 脚本，该脚本包含有关机器 B 的详细信息，例如主机名、用户名、密码、要下载的目录、ftp 详细信息等，当脚本从机器 A 运行时，它应该使用 ftp 下载 somefile在机器 B 中。

我已经在脚本中提供了有关机器 B 的详细信息，但是当我运行脚本时，它会在机器 A 而不是机器 B 中下载文件。我缺少什么？或者有人可以帮我写代码吗？

提前致谢。

这是代码：

在 Maven 中，我定义了机器 B 的详细信息：

```
<host>MachineB</host>
<host.username>user</host.username>
<host.password>pwd</host.password> 
```

在 build.xml

```
<target name="Todownload_file" <mkdir dir="${download_dir}" />

    <ftp action="get" server="download_server_details" userid="user" password="pwd" remotedir="path">
        <fileset dir="${download_dir}">
            <include name="${file_name}"/>
        </fileset>
    </ftp>
</target> 
```

正如我在评论中所说，机器 b 详细信息和 ftp 下载部分之间没有链接。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T21:47:48.027

您可以使用 sshexec 任务来运行远程命令，并且可以使用 sep 从/向机器 B 复制/推送文件。有几种方法可以在概念上做到这一点。

第一种方法：将文件从远程 ftp 站点下载到机器 A，然后使用 scp 任务将其复制到机器 B。最后使用 sshexec 在机器 B 上运行该文件。

第二种方法：通过 sshexec 从机器 A 直接在机器 B 上运行 curl 或 ftp 命令，将文件直接下载到机器 B。然后运行另一个 sshexec 任务来执行机器 B 上的文件。

第三种方法：编写一个可在机器 B 上运行的脚本 (workflowscript.sh)（Mac 的 bash/Linux powershell/Windows 的 VBScript），并在此脚本中放置逻辑以通过 ftp 或 curl 执行下载其他脚本或任何。在机器 A 上使用 scp 将 workflowscriipt.sh 复制到机器 B，然后使用 sshexec 执行它。

在上述所有方法中，您需要知道什么在哪里运行。机器 A 只是向机器 B 推送文件或发送远程命令，机器 B 完成所有工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:43:24.177

您可以使用以下命令在远程机器 () 中运行命令/脚本：

```
ssh <remote_user>@<remote_server> "<command_1>; <command_2>; ... <command_n>" 
```

这些命令之一可以是“gftp”，一个命令行 FTP 客户端。下载你需要的东西。

# facebook - 使用 third_party_id 生成 Facebook 用户图片

> ID：12466401
> 
> 赞同：2
> 
> 时间：2012-09-17T20:10:33.033
> 
> 标签：facebook, facebook-graph-api

我查看了 Facebook 的在线文档，但找不到使用用户的第三方 ID ( `third_party_id`) 字段手动构建 Facebook 用户的个人资料图片 Uri 的方法。

例如（不起作用）：

`https://graph.facebook.com/<FACEBOOK_THIRD_PARTY_ID>/picture?type=square`

> [http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)
> 
> **third_party_id：**   用户的匿名但唯一标识符；仅在通过字段 URL 参数特别请求时返回

### 使用 Facebook ID：

使用用户的 Facebook ID 检索他们的个人资料图片图像 Uri 的工作原理： `https://graph.facebook.com/<FACEBOOK_ID>/picture?type=square`

例如（作品）：

`<img src="https://graph.facebook.com/568916752/picture?type=square" />`

### 使用 Facebook 用户名：

使用用户的 Facebook 用户名检索他们的个人资料图片图像 Uri 有效： `https://graph.facebook.com/<FACEBOOK_USERNAME>/picture?type=square`

例如（作品）：

`<img src="https://graph.facebook.com/brett.scott/picture?type=square" />`

### Facebook 第三方 ID：

最佳实践建议我将用户的`third_party_id`而不是用户的 Facebook ID ( `id`) 存储在我的数据库中。我不应该将用户的 Facebook ID 公开给我网站的其他用户。原因？因为一旦用户可以看到另一个用户的个人资料图片 Uri，其中包含他们的 Facebook ID，他们就可以找到其他人的个人资料（参见下面的示例）。我敢肯定还有其他原因。

加载个人资料图片：

`https://graph.facebook.com/brett.scott/picture?type=square`- 或者 -

`https://graph.facebook.com/568916752/picture?type=square`

然后任何用户都可以加载上述用户的个人资料：

`http://www.facebook.com/brett.scott`- 或者 -

`http://www.facebook.com/568916752`

我不想使用 Facebook Graph 请求获取每个用户的个人资料图片 Uri `picture`，因为它太慢了。如果一个页面上有 20 张 Facebook 图片，则有 20 个 HTTP 请求返回 Facebook 的服务器。我的目标是零。

是否有另一种方法可以使用 Facebook 用户的个人资料图片获取他们的`third_party_id`或缺少的功能？

`https://graph.facebook.com/<FACEBOOK_THIRD_PARTY_ID>/picture?type=square`

例如（`third_party_id`为我的应用程序生成）：

`https://graph.facebook.com/0u0JrPIriHa3fgEDostj7v8dbdo/picture?type=square`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:56:25.547

第三方 ID 是唯一但匿名的标识符。它旨在允许广告商跟踪唯一用户。它专门设计为**无法**解析为 Facebook ID。

对于您的网站，您可以在不违反 TOS 的情况下将 Facebook 用户 ID 存储在您的数据库中，只要您将该数据保密。

当您从 Graph API 请求照片时，Facebook 会返回照片的 CDN URL。您可以发布该 URL。您不应将此数据存储在缓存中的时间超过预期的时间。

一次调用20张图片，可以调用端点：

```
https://graph.facebook.com/picture?type=square&ids=UID_1,USERNAME_2,...UID_n 
```

# android - iphone 像 android 的位置标记

> ID：12466404
> 
> 赞同：1
> 
> 时间：2012-09-17T20:10:45.160
> 
> 标签：android, iphone, ios, gps, google-maps-markers

据我所知，iOS 有一个独特的默认标记来显示用户位置（闪烁蓝色的标记）

这是一张图片：![在此处输入图像描述](../Images/391e8078ea81a49d383a9fd2c9222794.png)

我可以在Android中做类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:43:19.327

您必须扩展[MyLocationOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MyLocationOverlay)类并覆盖[drawMyLocation](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MyLocationOverlay#drawMyLocation%28android.graphics.Canvas,%20com.google.android.maps.MapView,%20android.location.Location,%20com.google.android.maps.GeoPoint,%20long%29)方法。

摘自 Android 文档：

**drawMyLocation** - 绘制“我的位置”点。默认情况下，绘制一个动画“蓝点”资产，可能被一个轮廓蓝色圆盘包围以表示准确性。此外，如果用户的位置移动到屏幕边缘附近，并且我们在构造函数中获得了[MapController](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapController)，我们将滚动以使新读数居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:29:07.350

您将需要 MyLocationOverlay 类。这是一个教程： http: [//joshclemm.com/blog/ ?p=148](http://joshclemm.com/blog/?p=148)

# c# - 如何将sql查询从一页写入另一页

> ID：12466409
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:10:53.713
> 
> 标签：c#, asp.net, sql-server, web-applications

我目前正在开发我的第一个网站。我遇到的问题如下：我创建了一个标题为“CustomerList”的分页，它显然列出了来自 sql server DB 的客户。我已使记录可单击，而无需使用 GridView 中包含的选择按钮。当我单击一条记录时，它会将我带到我想要的页面。但是，我似乎找不到从该点击事件到我想要的页面编写 sql 查询的方法。以下是我的点击事件代码：

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    GridViewRow row = GridView1.SelectedRow;

    if (row.RowIndex == 0)
    {
        Response.Redirect("UsageHistoryPage.aspx? EntityID=" 
            + row.Cells[0].Text);
    }            
} 
```

如您所见，当我单击索引时，我转到“UsageHistoryPage”。我还添加了 row.cells.[0] 获取该数据并将其写入 UsageHistoryPage，在我的例子中，这将是页面顶部的客户名称。有人可以帮我吗？谁有好的教程链接？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:20:52.733

您可以尝试使用此代码 - 将此代码添加到您的`UsageHistoryPage`

```
var input =  Response.QueryString["EntityId"];
var connectionString = "...";

var queryString = "SELECT Name FROM TABLE WHERE COLUMN=@EntityId";
using (SqlConnection connection = new SqlConnection(
               connectionString))
{
    connection.Open();    
    using(var command = new SqlCommand(queryString, connection))
    {
        Command.Parameters.AddWithValue("@EntityId",input) 
        SqlDataReader reader = command.ExecuteReader(CommandBehavior.CloseConnection);
        while (reader.Read())
        {
            Response.Write(String.Format("For Rick Your Name is here{0}", reader[0]));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:32:02.797

@Rick您可能想看看如何检查是否选择了一行，例如您不需要for循环，但在我的例子中需要检查RowIndex是否= 1或> 0而不是== 0

```
private void myButton_Click(object sender, EventArgs e)
{
    foreach (DataGridViewRow row in usersGrid.Rows)
    {
        if (this.usersGrid.SelectedRows.Count == 1)
        {
         // get information of 1st column from the row
         string selectedUser = this.usersGrid.SelectedRows[0].Cells[0].ToString();
        }
    }
} 
```

您需要做的是这样的事情，以确保已选择行

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
   DataGridViewRow row = GridView1.SelectedRow;

    if (this.row.SelectedRows.Count == 1)
    {
        Response.Redirect("UsageHistoryPage.aspx?EntityID=" + row.SelectedRows[0].Cells[0].ToString());
    }
} 
```

如果您想显示客户的姓名，请在 UsageHistorPage.aspx 的页面加载中添加此代码

```
String strCustName = Request.QueryString["EntityID1"];
this.Page.Title = strCustName; 
```

尝试类似的事情..如果有任何想法对您有用，请让这里的人知道。

# jquery - 在 Resize 上重新加载 jquery 插件

> ID：12466411
> 
> 赞同：0
> 
> 时间：2012-09-17T20:11:05.663
> 
> 标签：jquery, resize, bxslider

我希望[bxSlider](http://bxslider.com/)重新启动，以便在`div`调整窗口大小时重新计算尺寸并适应新的宽度和高度。

我想知道，如何在 jQuery 中重新加载调整大小的插件。

我想要那个简单的功能

```
//Home slider function
function hSlider(){
    $('.hCarousel').bxSlider({
        displaySlideQty: 3
    });
}

$(window).resize(function(e){
    hSlider();
}).resize(); 
```

重新加载`resize()`

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:22:46.333

查看[http://bxslider.com/options](http://bxslider.com/options)上的 api，您应该能够调用这些函数中的任何一个。

> destroyShow() 销毁活动幻灯片
> reloadShow() 重新初始化幻灯片

```
//Home slider function
$('.hCarousel').bxSlider({
    displaySlideQty: 3
});

$(window).resize(function(e){
   $('.hCarousel').reloadShow();
}); 
```

*注意未经测试但阅读api*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:22:15.420

据我了解，问题不在 resize 函数中，您问的是 reinit bxSlider？看这个答案：[resetting bxSlider](https://stackoverflow.com/questions/5845180/resetting-bxslider)

```
reloadShow(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:18:59.267

You should be able to call function on a resize event from straight js:

```
window.onresize = function(event) {     ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T20:27:08.933

假设您的其余代码是正确的，我`destroyShow()`在创建滑块之前添加了...

```
function hSlider(){
    $('.hCarousel').destroyShow().bxSlider({
        displaySlideQty: 3
    });
}

$(window).resize(function(e){
    hSlider();
}).resize(); 
```

[bxSlider 文档](http://bxslider.com/options)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-17T20:17:31.037

我以同样的方式做，但使用 underscore.js。

```
$(window).resize(_.bind(this.resizeList, this)); 
```

我认为你的错误在这里：

```
$(window).resize(function(e){;  <----- REMOVE THIS ;
    hSlider();
}).resize();                     <----- And I think this is not necessary too 
```

这样的事情应该这样做：

```
$(window).resize(function(e){
    hSlider();
}); 
```

# python - alpha beta 搜索中的 beta

> ID：12466420
> 
> 赞同：2
> 
> 时间：2012-09-17T20:11:33.523
> 
> 标签：python, chess

你好！我正在尝试实现 alpha-beta 搜索，但我首先想了解它背后的所有逻辑，而不仅仅是使用某种伪代码来实现它。

我的理解是：一个白人玩家移动（我们称之为move1）。第一步被保存为 alpha（玩家确信的最小值）。现在，如果我们移动到下一个可能的白棋走法（move2），并且看到黑棋玩家的第一反应导致的估值比 alpha 更差，我们可以跳过所有可能的黑棋反击，因为我们已经知道当白棋走 2 时，最坏的可能结果比 move1 的最坏可能结果更差。

但是，我不明白的是那个 beta 变量。从国际象棋编程维基中我读到：'保证最小化玩家的最高分数'。但我无法真正理解它背后的想法。

有人可以用非常简单的术语解释一下吗？非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:22:18.407

在国际象棋中，没有简单的方法可以判断 move1 是否比 move2 好（从您的示例中）。近似值是通过查看“硬”参数来实现的：棋子的数量和价值、双兵或自由兵的存在……通常这种近似值被插入到极小极大算法中。

## 极小极大

简单来说，思路如下：首先，扩展所有可能的移动（白-黑-白-黑-...），直到达到预定义的深度或时间限制。这将创建一个棋盘位置树（以移动作为边缘），并使用启发式方法评估叶子（如上所述）。然后，树被折叠，最终导致对 move1 与 move 2 的评估。

崩溃是如何工作的？它从树的叶子开始，并为每个节点（又名棋盘位置）分配一个值。对于所有子节点的值已知的每个节点，汇总子节点的值：如果轮到白，则取白的最佳值（最大值）；如果轮到黑方，最差（分钟）。因此得名极小极大。重复此过程，直到到达根。

假设以下棋盘位置树：

```
 A
|  \
B1  B2
|   |  \
A11 A21 A22 
```

现在假设以下评估：A11 = 0，A21 = -1，A22 = +1（正值对白色有好处）。我们从近似值中假设位置 A21 优于 A22（黑色），因此我们将 -1 分配给节点 B2。对于 B1，这很清楚，它的值为 0。现在我们假设 B1 对于白色优于 B2，因此 A 的值为 0，白色应该移动到 B1 位置。

## [α-β修剪](http://en.wikipedia.org/wiki/Alpha_beta_pruning)

这里的想法不是构建整棵树，而是深度优先搜索更有希望的移动，以实现早期截止。在上面的例子中，如果我们从左到右（A-B1-A11-B2-A21-...）深度优先遍历树，在评估 A21 之后，我们知道对于白色，位置 B2 比位置 B1 差。因此，不再需要评估 A22。Alpha 和 beta 仅存储当前已知的对白的最佳可能移动的评估，以及对黑的当前已知的最佳可能响应的评估。遍历树的节点的顺序（初始排序）决定了是否有可能以及有多少个可能的截止。来自维基百科：

> 通常在 alpha-beta 期间，子树暂时由第一玩家优势（当许多第一玩家移动是好的，并且在每个搜索深度处，第一玩家检查的第一移动是足够的，但所有第二玩家的反应都需要试图找到一个反驳），反之亦然。...

如果排序不是最优的，则必须完全探索更多的子树。

另见 [迭代深化深度优先搜索](http://en.wikipedia.org/wiki/Iterative_deepening_depth-first_search)。

## 优化

严格来说，这棵树是一个有向无环[图](http://en.wikipedia.org/wiki/Directed_acyclic_graph)，因为相同的棋盘位置可以通过不同的移动组合（例如，[转座子](http://en.wikipedia.org/wiki/Transposition_%28chess%29)）来实现。使用[哈希表](http://en.wikipedia.org/wiki/Hash_table)来检测相同的位置，这将节省大量的计算工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T07:06:40.043

基本上，这个想法是*alpha*和*beta*是最佳结果的上限和下限，根据您已经探索过的游戏树，因此超出这些界限的任何内容都不值得探索。

自从我详细了解 minimax 和 alpha-beta 修剪已经有一段时间了，但这是我记得的要点。

如您所说，如果我们已经知道白棋的`move1`得分为 10，并且在检查时`move2`我们发现黑棋的响应方式可以使白棋的最佳得分为 8，那么就不值得`move2`进一步研究了；我们已经知道，我们所能做的最好的事情比我们所知道的另一个选择更糟糕。

但这只是极小极大算法的一半。假设我们现在正在检查白棋`move3`，并查看所有黑棋的反应。我们探索黑色的`moveX`，并发现白人对此的反应*之一*可以强制得分至少为 15。如果我们然后开始探索黑人`moveY`（仍然是对白人的原始`move3`反应）并找到白人对此的反应`moveY`将强制得分为至少 18 点，那么我们立即知道源自黑方的整个博弈树`moveY`是没有意义的；黑色永远不会使`moveY`，因为`moveX`只强制黑方让白方得 15 分，而`moveY`强制黑方让白方得 18 分。

*Alpha*表示我们已经知道白人可以通过做出不同选择来达到我们正在探索的点的最低分数。因此，一旦我们知道不可能得到超过*alpha*的任何路径，就不值得继续探索任何路径，因为白色不允许我们到达那条路径。

*Beta*代表我们已经知道黑色可以通过做出不同选择来强制达到我们正在探索的点的最大分数。因此，一旦我们知道不可能得到低于*beta*的任何路径，就不值得继续探索任何路径，因为黑色不允许我们到达那条路径。

# android - Android以编程方式更改资源限定符

> ID：12466425
> 
> 赞同：11
> 
> 时间：2012-09-17T20:12:12.880
> 
> 标签：android

是否可以以编程方式更改资源配置限定符？我的意思是，某些 hdpi 设备的系统从 xhdpi 文件夹而不是 hdpi 获取资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:40:16.323

> 在我的项目中，我有 ldpi、mdpi、hdpi 和 xhdpi 图像资源。对于 Kindle fire(1024 x 600 - 169 dpi) android 系统从 mdpi 文件夹中获取资源，应用程序看起来很糟糕。我想让 android 从 hdpi 文件夹中获取资源。

与您的评论相关，我通常只为 hdpi 屏幕提供资源，所有其他密度都可以正常工作。在我通常针对的 2.1+ 或 2.2+ 设备上进行测试！

我理解没有记录的风险，所以它不应该工作，尽管它可以工作！这样我就避免了我最终 apk 中的一些 KB。

但我不建议使用 xhdpi 代替 hdpi，因为 xhdpi 仅适用于 3+ 或其他设备。

只是为了在单个设备上测试不同的密度，您可以通过以下方式更改 AVD：

```
am display-density 480 
```

有关更多信息，请参阅 android 文档：http: [//developer.android.com/tools/help/adb.html#shellcommands](http://developer.android.com/tools/help/adb.html#shellcommands)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:27:45.797

Kindle 屏幕大但密度中等

它从**res/layout-large/your.xml 获取布局**

但是来自**res/drawable/mdpi**的图像， 所以只需创建一个名为**res/drawable/mdpi-large的文件夹**

希望这对你有用，但图像必须符合 Kindle 的分辨率

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T16:38:12.033

试试这个代码。希望能帮助到你。

```
 import android.util.DisplayMetrics;

    private int result = 0;  //Activity member

    public void determineDeviceResolution {

    switch(metrics.densityDpi)
    {      
        case DisplayMetrics.DENSITY_LOW: 
        {
            result = DisplayMetrics.DENSITY_LOW;
            break;
        }

        case DisplayMetrics.DENSITY_MEDIUM: 
        {
            result = DisplayMetrics.DENSITY_MEDIUM;
            break;
        }

        case DisplayMetrics.DENSITY_HIGH: 
        {
            result = DisplayMetrics.DENSITY_HIGH;
            break;  
        }

        default:
            break;          
    } 

   }

    private Drawable getDrawable(String icon) { 

    //Pass file name of the resource file 
    //while invoking this method for e.g. play_icon.png 

    //You can specify the folder from which resource
    //needs to be picked for e.g. drawable_hd,drawable_xhdpi etc..

   Drawable drawable = null;

    if(result == DisplayMetrics.DENSITY_HIGH)
    {

                drawable=create_drawable("/drawable_hd/" + icon);

    }

    else
    {
            drawable=create_drawable("/drawable/" + icon);
    }

    return drawable;
}

    Drawable create_drawable(String absolute_filepath)
{
    InputStream in = null; 

    Bitmap bMap = null; 

    BufferedInputStream buf = null;

            Drawable d = null;

    try 
    {
        in  = getClass().getResourceAsStream(absolute_filepath);
        buf = new BufferedInputStream(in);
        bMap = BitmapFactory.decodeStream(buf);

        if(in == null || buf == null || bMap== null)
        {
            return null;
        }

        if (in != null) 
        {
            in.close();
        }

        if (buf != null) 
        {
            buf.close();
        }

    } 

    catch (Exception e) 
    {
       e.printStackTrace();
    }

    d  = new BitmapDrawable(bMap);

    return d; 

} 
```

最后，您可以将可绘制对象传递给 UI 元素的 setBackgroundDrawable() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T18:40:12.260

我不确定你是否可以。不要误会我的意思：我个人也想知道这个问题的答案。你到底想做什么？

如果您无论如何都要以编程方式做事，最好将资产放入直接可绘制对象中，然后应用缩放。你可以很容易地得到密度乘数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T23:12:31.660

您还可以为设备的宽度和其他属性自定义资源。阅读：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# c - NDK - 扩展类并使用指向数组的指针会导致段错误

> ID：12466427
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:12:33.620
> 
> 标签：c, pointers, crash, android-ndk

//我的结构/类

```
class ImgObj{
public:
    unsigned int *textu; //image
}; 
```

// 我的具有基本功能的通用对象

```
class Aobj {
  protected:
    ImgObj *_obj;    
  public:

    Aobj();
    virtual ~Aobj();

    ImgObj *getB(int p);
    void add(unsigned int *texture);
};

//Here a create an array of that structure

void Aobj::setFrameCount(int q) {
    _obj = new ImgObj[q];
}

//Adding it

void Aobj::add(unsigned int *texture, int size)
{
counter++;   (counter is 0, I didn't specify this but it is there)
_obj[counter-1].textu = (unsigned int *)malloc(size);
_obj[counter-1].textu = texture;
}

 // Getting back the buffer 

ImgObj *Aobj::getB(int p) {
return &_obj[p];
}

//Extending the main object with some other functions which are not present here

class Background : public Aobj {
public:
    Background();
    virtual ~Background();

}; 
```

//---------------------------------

//我的主要测试//我基本上是在尝试分配图像，并且在循环中第二次分配后//它崩溃了

```
Main::Main()
{
    // image bytes 11704 -> 77w * 38h * 4

            unsigned int *texture = new unsigned int[11704];  //an example
            //Now imagine I'm filling this array with an image...
            int size = 11704;

            Background *background = new Background;

            background->setFrameCount(1);
            background->add(texture, size);

            unsigned int *testtex; //testing

            while(true)
            {

             testtex = background->getB(0)->textu;  

             } 
            // When using this it crashes (the first time works fine, the second time crash)
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:20:02.527

```
_obj[counter-1].textu = (unsigned int *)malloc(size);
_obj[counter-1].textu = texture; 
```

1st line will allocate memory of size `size`: what is `size`? 2nd line will override pointer to the newly allocated memory and replace the pointer: you probably wanted to copy the contents of the memory `texture` points to.

# ios - 在 UIView（UIView 控制器）中加载多个表视图

> ID：12466428
> 
> 赞同：2
> 
> 时间：2012-09-17T20:12:37.977
> 
> 标签：ios, xcode, uitableview, ipad

我一直在整个互联网上寻找帮助，但是我手头的问题几乎没有解决方案。我试图喘口气的项目有点独特（用户界面并不完全遵循典型的规范）。

目前的发展环境：

*   代码 4
*   故事板而不是笔尖

下面是我正在尝试完成的图表——全部在 UIView 控制器中：

![在此处输入图像描述](../Images/1f92ff8b024c4ffc34437c012ea7ccdb.png)

*   UIView 是浅灰色背景
*   UITableView 1 - 这是一个静态的（或者它可以是动态的，这是另一个挑战）UITableview，它将保存不同的数值进行计算
*   UITableView 2 - 这是一个 UITableview，每次运行时都会保存计算结果。
*   UIImageView 1 - 这是一个计算的图像示例（我已经弄清楚了）

我确信有经验的开发人员完全了解我的问题，或者我要问什么。我知道静态 UITableView 需要在 tableview 控制器中，但我需要同时显示两个 UItableView，这意味着它必须在 UIView 中。

我可以通过 IB 使界面看起来像我需要的那样，但是在尝试编译和构建时，我收到要求 UITableView 位于 UITableViewController 而不是 UIView 控制器内的错误。我见过很多使用主从布局的例子，但唯一的规定是这个 UITableview 在这个视图中需要 100% 的时间显示。

所以基本上，我在问方向......但一个代码示例也没有伤害！谢谢你 100x 结束了！

-乔纳森

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T20:34:17.443

`UITableViewController`只是专门`UIViewController`为全屏显示而设计`UITableView`的。（相当）等价于使用`UITableViewController`子类或`UIViewController <UITableViewDataSource, UITableViewDelegate>`子类来管理 tableview。

因此，即使`UITableViewController`有一些更特殊的行为（如果 UITableView 不存在则自动创建，自动滚动以显示键盘，将自身设置为它管理的唯一的`delegate`和等），您可以使用标准来管理和是它来填补它。`dataSource``UITableView``UIViewController``UITableView``dataSource`

这甚至是一种管理不占据全屏的表格视图的方法（因为`UITableViewController`期望它的`view`属性直接是`UITableView`它管理的，而不是其主视图的子视图或其他任何东西，因此期望`UITableView`占据整个屏幕，而不是使用具有`UIViewController`作为`UITableView`其自定义大小子类的`view`)

* * *

因此，在您的情况下，您可以拥有一个`UIViewController`具有两个`IBOutlets`，每个一个`tableView`，并且唯一的`UIViewController`可以是**两者**的`dataSource`（和`delegate`）。这不是问题。然后在您的数据源方法中小心区分您是返回第一个还是第二个数据，以便每次都提供正确的表。**`UITableViews``UITableView`**

 **```
@interface MyViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
@property (nonatomic, retain) IBOutlet UITableView* masterTableView;
@property (nonatomic, retain) IBOutlet UITableView* detailsTableView;
@end

@implementation MyViewController
@synthesize masterTableView = _masterTableView;
@synthesize detailsTableView = _detailsTableView;

// Proper memory mgmt not shown here:
//  - don't forget to set self.masterTableView and self.detailsTableView to nil in viewDidUnload
// - and to release _masterTableView and _detailsTableView in your dealloc method

-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
{
    UITableViewCell* cell;
    if (tableView == self.masterTableView)
    {
        static NSString* kMasterCellIdentifier = @"MasterCell";
        cell = [tableView dequeueReusableCellWithIdentifier:kMasterCellIdentifier];
        if (!cell)
        {
          cell = [[[UITableViewCell alloc] initWithReuseIdentiier:kMasterCellidentifier] autorelease];
          // do some configuration common to all your master cells
        }
        // configure the rest of your cell for each property that is different from one cell to another
    }
    else if (tableView == self.detailsTableView)
    {
        // Do exactly the same principle, but for the cells of your "details" TableView
    }
    return cell;
} 
```**

# sublimetext2 - 在 Sublime Text 2 中重新格式化段落的常用方法是什么？

> ID：12466430
> 
> 赞同：19
> 
> 时间：2012-09-17T20:13:08.870
> 
> 标签：sublimetext2, sublimetext

当你有一个长行的文本文件时，有什么方法可以将它们重新格式化为一定的宽度，而不是把它们混在一起？

一般来说，我正在寻找的是在 Vim 中，
（在每一行都完成）

```
V
gq
j 
```

`textwidth`提前设置。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-03-19T05:24:30.900

`ALT``CMD`OS X 上的++将`q`硬换行到您设置的任何标尺列。请参阅[Andrew 对标尺设置的回答](https://stackoverflow.com/a/17159320/456814)。

`ALT`+`q`适用于 Windows，根据[此评论](https://stackoverflow.com/questions/12466430/what-is-the-usual-way-to-reformat-paragraph-in-sublime-text-2/22496963#comment33034809_17159320)，它也适用于 Linux。

### 包装注释行

根据评论，Sublime Text 并没有很好地包装评论，比如

```
/*
 * Blah blah blah blah blah blah blah blah blah
 */

// Blah blah blah blah blah blah blah blah blah 
```

插件[Sublime Wrap Plus](https://github.com/ehuss/Sublime-Wrap-Plus)可用于包装这些。但是，如果您选择所有文件，它似乎效果不佳，如果您只选择要换行的注释行，它似乎效果最好。（在 Sublime Text 3 中测试，而不是 2）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-18T01:32:01.283

编辑 → 换行菜单有大量选项可用于以不同的行长硬换行段落。

“在标尺处换行”将使用您对标尺的任何设置，在您的用户首选项中设置（参见[https://stackoverflow.com/a/11319526/120898](https://stackoverflow.com/a/11319526/120898)）：

```
// Adds a single vertical ruler at line 80
"rulers": [80], 
```

或者您可以使用视图 → 标尺设置临时标尺。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T19:04:02.597

是的，一旦启用`vintage`模式，这是可能的：

1.  `Preferences > Settings -- Default`
2.  `Vintage`从`ignored_packages`部分中删除

Vintage 模式让 Sublime 在很大程度上表现得像 VIM。现在您可以使用上面提到的组合键了。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-11T16:40:41.513

Sublime 会为你重新缩进代码并且通常做得很好。如果您转到编辑→行→重新缩进，您可以在菜单中找到该选项。

或者您可以在 Sublime 中进行自定义键绑定设置，以便您可以使用快捷方式重新缩进代码。为此，只需将以下行添加到 Preferences → Key Bindings – User。

```
{"keys": ["alt+shift+r"], "command": "reindent" , "args": {"single_line": false}} 
```

# tcp - 侦听 VM 内连接的代理服务器

> ID：12466432
> 
> 赞同：0
> 
> 时间：2012-09-17T20:13:14.367
> 
> 标签：tcp, proxy, nat

我有一些在 VM 上运行并侦听不同端口上的 TCP 连接的 linux 应用程序。VM 位于 NAT 后面。我想在那个虚拟机上安装一个代理来监听连接并通过正确的端口重定向它们。我想将流量（可能是 iptables）从 VM 的主机重定向到 VM 内的代理。你能告诉我应该使用什么代理并给我一个简短的配置示例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:33:55.133

您所说的看起来像是在主机网络上的来宾中使用服务器软件，使用端口转发可以完美地提供服务。请参阅[VMWare 文档](http://www.vmware.com/support/ws5/doc/ws_net_nat_advanced.html)

# css - Mootools .addClass 不起作用

> ID：12466435
> 
> 赞同：0
> 
> 时间：2012-09-17T20:13:30.697
> 
> 标签：css, mootools

我正在尝试`addclass`单击另一个 div，但由于某种原因它不起作用，并且我没有收到任何错误 Javascript：

```
window.addEvent('domready', function(){ 
    $('ce-cf-container-18').addEvent('click', function(){ 
        $('progress').addClass('rotate'); 
    }); 
}); 
```

和 CSS：

```
#progress{
    top: 294px;
    left: 63px;
    height: 0px !important;
    width: 70px;
    position: fixed;
    border: 2px solid #232323;
    border-radius: 2px;
}

.rotate{
    -webkit-transform: rotate(5deg);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T19:04:51.093

您的代码写得很好，可能有问题的是：

您指的是`#ce-cf-container-18`和`#progress`。如果这些元素有 id，则每个元素不能超过一个。

如果其中一些应该由类引用，则可以使用`document.getElements('.classname');`

# javascript - 将 JS 与 Amazon Turk 一起使用？

> ID：12466436
> 
> 赞同：0
> 
> 时间：2012-09-17T20:13:31.967
> 
> 标签：javascript, amazon-web-services, mechanicalturk

我被要求用一些脚本行为构建一个 mturk HIT，例如以不同的时间间隔显示和隐藏内容（例如，一个问题将显示一个图像 5 秒然后隐藏它）。

几个问题：

1.  有没有办法在 HIT 中包含 javascript？
2.  如果没有，有没有办法使用 mturk API 生成这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T23:45:03.127

最好的方法是使用 ExternalQuestion。mturk 确实允许您嵌入自己的 javascript 内联，但这并不理想。

# c++ - 是否可以将常规指针转换为指向类字段的指针

> ID：12466439
> 
> 赞同：1
> 
> 时间：2012-09-17T20:13:54.067
> 
> 标签：c++, pointers, type-conversion, field

给定一个类实例和一个指向字段的指针，我们可以获得指向该类实例的字段变量的常规指针——如以下代码中的最后一个赋值；

```
class A
{
public:
    int i, j;
};
int main(){
    A a;
    int A::*p = &A::i;
    int* r = &(a.*p); // r now points to a.i;
} 
```

是否可以反转这种转换：给定类实例`A a;`并`int* r`获取`int A::* p`（如果给定的指针不在给定的实例中，则为 NULL ptr），如代码所示：

```
class A
{
public:
    int i, j;
};
int main(){
    A a;
    int A::*p = &A::i;
    int* r = &(a.*p); // r now points to a.i;
    int A::*s = // a--->r -how to extract r back to member pointer?
} 
```

我能想到的唯一方法是编写一个函数，该函数采用 A 的每个已知字段，计算给定实例的地址并与给定地址进行比较。然而，这需要为每个类编写自定义代码，并且可能难以管理。它也有次优的性能。

我可以想象这种转换可以由编译器在我知道的所有实现下的几个操作中完成——这样的指针通常只是结构中的一个偏移量，所以它只是一个减法和范围检查，看看给定的指针是否真的在这个类存储中. 虚拟基类增加了一些复杂性，但我认为没有什么编译器无法处理。然而，似乎因为标准不需要它（是吗？）没有编译器供应商关心。

还是我错了，这种转换存在一些根本问题？

**编辑：**

我看到对我要问的内容有一点误解。简而言之，我要问是否：

*   它已经有一些实现（我的意思是在编译器级别），但由于几乎没有人使用它，几乎没有人知道它。
*   标准中没有提到它，也没有编译器供应商提到它，但原则上它是可以实现的（再次：由编译器，而不是编译代码。）
*   这种操作存在一些深层次的问题，我错过了。

我的问题是——哪一个是真的？如果是最后一个 - 潜在的问题是什么？

我不是在寻求解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:34:21.360

AFAIK C++ 不提供完全反射，您需要这样做。

一种解决方案是自己提供反射（您描述的方式是一种方式，它可能不是最好的方式，但它会起作用）。

一个完全不可移植的解决方案是找到可执行文件并使用它可能包含的任何调试信息。显然不可移植，并且需要调试信息开始。

[在http://www.garret.ru/cppreflection/docs/reflect.html](http://www.garret.ru/cppreflection/docs/reflect.html)的介绍部分对反射问题和不同的可能方法有一个不错的描述

编辑：

正如我上面所写，没有可移植和通用的解决方案。但是可能有一种非常不可移植的方法。我不会在这里给你一个实现，因为我目前没有 C++ 编译器来测试它，但我会描述这个想法。

基础是 Dave 在他的回答中所做的：利用指向成员的指针通常只是一个偏移量这一事实。问题在于基类（尤其是虚拟和多重继承）。您可以使用模板来处理它。您可以使用动态转换来获取指向基类的指针。并最终将该指针与原始指针进行比较，以找出基址的偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:36:22.637

没有跨平台**的**方法可以做到这一点。指向成员值的指针通常实现为指向对象开始的偏移量。利用这个事实，我做了这个（在 VS 中工作，没有尝试过其他任何东西）：

```
class A
{
public:
    int i, j;
};

int main()
{
    A a;
    int A::*p = &A::i;
    int* r = &(a.*p); // r now points to a.i;

    union
    {
        std::ptrdiff_t offset;
        int A::*s;
    };

    offset = r - reinterpret_cast<int*>(&a);
    a.*s = 7;
    std::cout << a.i << '\n';
} 
```

# jquery - jQuery UI 拖放不起作用

> ID：12466440
> 
> 赞同：0
> 
> 时间：2012-09-17T20:13:58.300
> 
> 标签：jquery, jquery-ui

我正在对可拖动的 Jquery UI 进行一些实验，但目前我的应用程序无法正常工作，我不明白为什么。这是代码：

```
<html>
<head>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>

<script type="text/javascript">

$(".productItem").draggable({
    helper: 'clone',
    handle: "productItem"
});

$("#basket").droppable({
    accept: ".productItem",
    drop: function(event, ui){
        $("<div></div>")
            .html(ui.draggable.text())
            .appendTo($(this));
    }
});

</script>
</head>

<body>

<h2>Products</h2>
<div id="list">
<div class="productItem">product 1</div>
<div class="productItem">product 2</div>
<div class="productItem">product 3</div>
</div>

<hr/>

<h2>Basket</h2>
<div id="basket" style = "height: 100px; border: 1px solid red;">

</div>

</body>
</html> 
```

这段代码在 JsFiddle 中工作，但我似乎无法让它在 chrome 中工作，所以我认为这是因为 jQuery 包含。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:16:37.707

将您的 jQuery 代码包装在文档就绪块中：

```
<script type="text/javascript">
$(document).ready(function() {
    $(".productItem").draggable({
        helper: 'clone',
        handle: "productItem"
    });
    $("#basket").droppable({
        accept: ".productItem",
        drop: function(event, ui) {
            $("<div></div>").html(ui.draggable.text()).appendTo($(this));
        }
    });
});​
</script> 
```

按照上面的方式，代码将在相关元素加载之前尝试并执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:40:25.203

找到了答案，问题是我使用的是 jQuery 1.8.0，它不支持 jQuery UI，我改为 jQuery 1.7.2，现在它运行良好。

# jquery-ui - jQuery sortable 手动触发 sortstop 事件

> ID：12466446
> 
> 赞同：3
> 
> 时间：2012-09-17T20:14:22.140
> 
> 标签：jquery-ui, jquery, jquery-ui-sortable

是否可以手动触发 jQuery 可排序控件的[sortstop](http://jqueryui.com/demos/sortable/#event-stop)事件？

我已经尝试过`$(selector).trigger('sortstop')`，但似乎没有任何反应。

一些相关的 HTML：

```
<div data-zone="name">
    <div class="section disabled" id="section-1">Some section template 1</div>
    <div class="section" id="section-2">Some section template 2</div>
    <div class="section" id="section-3">Some section template 3</div>
</div>

<button class="trigger-button">Trigger stop</button> 
```

和一些 JavaScript：

```
$("[data-zone]").sortable({
    placeholder: 'ui-state-highlight',
    cancel : ".section.disabled",
    stop: function(){
       console.log('sort-stopped');        
    }
})

$(".trigger-button").click(function(){
    console.log('trigger-button clicked');
    var $zone = $('[data-zone]');
    console.log($zone);
    $zone.trigger('sortstop');
}); 
```

[JsFiddle](http://jsfiddle.net/tomprogramming/xCtqJ/12/)的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T17:00:25.350

Events are used by jQuery UI to notify your code that something has happened with their code, not the other way around.

You should be looking for **methods** that you can use to **control the sortable object** rather than trying to control ui elements by triggering events:

```
// Are you looking for this?
$( ".selector" ).sortable( "cancel" );

// Or this?
$( ".selector" ).sortable( "enable" );
$( ".selector" ).sortable( "disable" ); 
```

There is also no "sortstop" event. There is a "stop" event and a "beforeStop" event that sortables trigger when sorting is finished or about to finish, but these are sent out by the sortable object, not read by the sortable object in order to perform actions.

If what you really wanted was to listen for these events so you could perform some actions, then this is what you might want to do:

```
$("[data-zone]").on('stop', function(evt, ui) {
    // sortable has notified that it has stopped, do stuff here
}); 
```

More info can be found on the jQuery UI documentation for sortable:

[http://api.jqueryui.com/sortable/](http://api.jqueryui.com/sortable/)

Also, here is the sortable.js source file on github

[https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.sortable.js](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.sortable.js)

# php - 跨多个服务器使用 Zend Cache 和 AWS ElastiCache 的缓存值不一致

> ID：12466447
> 
> 赞同：31
> 
> 时间：2012-09-17T20:14:24.713
> 
> 标签：php, zend-framework, caching, amazon-web-services, amazon-elasticache

我们将 Zend Cache 与一个 memcached 后端一起使用，该后端指向一个具有 2 个缓存节点的 AWS ElastiCache 集群。我们的缓存设置如下所示：

```
$frontend = array(
    'lifetime' => (60*60*48),
    'automatic_serialization' => true,
    'cache_id_prefix' => $prefix
);
$backend = array(
    'servers' => array(
        array( 'host' => $node1 ),
        array( 'host' => $node2 )
    )
);
$cache = Zend_Cache::factory('Output', 'memecached', $frontend, $backend); 
```

过去，当使用单个 EC2 服务器从缓存中写入和读取时，我们没有注意到缓存有任何问题。

但是，我们最近引入了第二台 EC2 服务器，突然间我们发现从一台服务器写入缓存并从另一台服务器读取时出现问题。两台服务器都由同一个 AWS 账户管理，两台服务器都没有单独写入或读取缓存的问题。两者使用相同的缓存配置。

*服务器 A*执行`$cache->save('hello', 'message');`

`$cache->load('message');`来自*服务器 A*的后续调用返回**hello**的预期结果。

但是，当*服务器 B*执行时`$cache->load('message');`，我们得到**false**。

就我对 ElastiCache 的理解而言，发出读取请求的服务器应该与返回的缓存值无关。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:09:20.013

你能说出你为内存缓存使用的 hash_strategy 吗？过去我在使用默认*标准时遇到过问题，但自从更改为**一致*后一切都很好：

[http://php.net/manual/en/memcache.ini.php#ini.memcache.hash-strategy](http://php.net/manual/en/memcache.ini.php#ini.memcache.hash-strategy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:37:50.187

使用普通的散列算法，改变服务器的数量会导致许多键被重新映射到不同的服务器，从而导致大量的缓存未命中。

**假设您的缓存集群中有 5 个 ElastiCache 节点，添加第六台服务器可能会导致 40% 以上的密钥突然指向不同的服务器。此活动是不可取的，可能会导致缓存未命中并最终用请求淹没您的后端数据库。为了尽量减少这种重新映射，建议在缓存客户端中遵循一致的哈希模型。**

Consistent Hashing 是一种模型，允许在添加或删除服务器的情况下更稳定地分发密钥。一致散列描述了将键映射到服务器列表的方法，其中添加或删除服务器会导致键映射到的位置发生非常小的变化。使用这种方法，添加第十一个服务器应该会导致不到 10% 的密钥被重新分配。这个百分比在生产中可能会有所不同，但与普通哈希算法相比，在这种弹性场景中它的效率要高得多。还建议在所有客户端配置中保持 memcached 服务器顺序和服务器数量相同，同时使用一致的哈希。Java 应用程序可以通过 spymemcached 使用“Ketama 库”将该算法集成到他们的系统中。有关一致性哈希的更多信息，请参见[http://www.last.fm/user/RJ/journal/2007/04/10/rz_libketama_-_a_consistent_hashing_algo_for_memcache_clients](http://www.last.fm/user/RJ/journal/2007/04/10/rz_libketama_-_a_consistent_hashing_algo_for_memcache_clients)

# vsto - 在 Outlook 中制作可折叠的自定义任务窗格？

> ID：12466451
> 
> 赞同：1
> 
> 时间：2012-09-17T20:14:41.713
> 
> 标签：vsto, add-in, outlook-addin

是否可以在 Outlook 中制作可折叠的任务窗格。IE。我可以有一个按钮，让我们说一个功能区，点击后可以使窗格出现，或者如果它已经打开，则折叠或消失？我能够找到的与此相关的所有内容都涉及我没有的 add-in express。任何帮助或线索将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:37:42.350

Add-In Express 不需要显示或隐藏自定义任务窗格。您可以使用该属性切换**自定义任务窗格**[`TaskPane.Visible`](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.customtaskpane.visible.aspx)的可见性。

```
customTaskPane.Visible = false; // hides task pane from view 
```

请参阅[MSDN 上的](http://msdn.microsoft.com/en-us/library/aa942864.aspx)[**自定义任务窗格**](http://msdn.microsoft.com/en-us/library/aa942864.aspx)以获取更多参考，特别是“*修改任务窗格的外观*”部分

# c# - Powershell：执行策略

> ID：12466456
> 
> 赞同：5
> 
> 时间：2012-09-17T20:15:07.473
> 
> 标签：c#, powershell, powershell-2.0

过去几个月我一直在运行我的代码 -

```
Set-ExecutionPolicy Unrestricted 
```

但是，发生了一些奇怪的事情，我总是收到这个**错误**-

> Windows PowerShell 成功更新了您的执行策略，但该设置被在更具体范围内定义的策略覆盖。由于覆盖，您的 shell 将保留其当前有效的“无限制”执行策略。键入“Get-ExecutionPolicy -List”以查看您的执行策略设置。有关详细信息，请参阅“Get-Help Set-ExecutionPolicy”。

我已经提到了这些链接，但没有运气 -

*   [http://blogs.msdn.com/b/pasen/archive/2011/12/07/set-executionpolicy-windows-powershell-updated-your-execution-policy-successfully-but-the-setting-is-overridden- by-a-policy-defined-at-a-more-specific-scope.aspx](http://blogs.msdn.com/b/pasen/archive/2011/12/07/set-executionpolicy-windows-powershell-updated-your-execution-policy-successfully-but-the-setting-is-overridden-by-a-policy-defined-at-a-more-specific-scope.aspx)

*   [http://blog.whatsupduck.net/2010/09/issues-with-configuring-powershell.html](http://blog.whatsupduck.net/2010/09/issues-with-configuring-powershell.html)

*   [http://www.howtogeek.com/106273/how-to-allow-the-execution-of-powershell-scripts-on-windows-7/](http://www.howtogeek.com/106273/how-to-allow-the-execution-of-powershell-scripts-on-windows-7/)

    **我正在使用 .Net 4.0 通过 32 位 Winforms 应用程序在 64 位 Windows 7 上使用 C# 加载 Powershell**

    我需要做什么才能在任何系统上都不会出现此错误？[一切正常]。这些值在任何系统上应该是什么，以便我能够从 C# 无缝调用 Powershell -

**获取执行策略列表**

> ```
> MachinePolicy                                                           
> UserPolicy                                                           
> Process                                                        
> CurrentUser                                                        
> LocalMachine 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:40:18.157

你应该看到这样的输出`Get-ExecutionPolicy -List`：

```
 Scope ExecutionPolicy
        ----- ---------------
MachinePolicy       Undefined
   UserPolicy       Undefined
      Process       Undefined
  CurrentUser       Undefined 
 LocalMachine    RemoteSigned 
```

一旦您看到具有不需要的设置的范围，您可以像这样重置它：

```
Set-ExecutionPolicy Undefined -Scope <scope-name> 
```

那是假设您有权这样做。

# ipad - iPad 应用程序：没有 UDID 的企业范围分发？

> ID：12466459
> 
> 赞同：0
> 
> 时间：2012-09-17T20:15:21.297
> 
> 标签：ipad, deployment, distribution

我为捐赠活动开发了一个 iPad 应用程序，现在想将其分发到 iPad 上。由于影响了几台 iPad，我不想为每台 iPad 创建一个配置文件。

在网站上：http: [//mdmclient.net](http://mdmclient.net)我可以轻松下载并安装应用程序的 plist 文件，而无需向他们提供我的 iPad UDID。

换句话说，是否可以在不注册所有 UDID 的情况下分发应用程序？！由于捐赠活动的金额有限，我想避免购买企业许可证/帐户（我正在为他们免费开发应用程序）.​​..

还是您认为我只能从[http://mdmclient.net](http://mdmclient.net)安装应用程序，因为他们使用的是企业配置文件/帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:23:18.350

不幸的是，在不注册每个设备的 UDID 的情况下将应用程序分发到许多 iPad 的唯一方法是企业开发者帐户。MDM Client 的人似乎有一个企业帐户。

所以基本上有两种方法可以去：

1.  通过 AppStore 分发您的应用程序。
2.  购买企业开发者帐户。

或者还有第三种方法（当然现在可能为时已晚，因为您的应用程序已经完成）：将其作为 HTML Web 应用程序。

# python - python正则表达式替换

> ID：12466460
> 
> 赞同：0
> 
> 时间：2012-09-17T20:15:26.113
> 
> 标签：python, regex, string

我需要在类似于下面给出的大量字符串中找到“taxid”的值。对于此特定字符串，“taxid”值为“9606”。我需要丢弃其他所有东西。“taxid”可能出现在文本中的任何位置，但后面总是跟一个“:”，然后是数字。

```
score:0.86|taxid:9606(Human)|intact:EBI-999900 
```

如何在python中为此编写正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:18:20.880

```
>>> import re
>>> s = 'score:0.86|taxid:9606(Human)|intact:EBI-999900'
>>> re.search(r'taxid:(\d+)', s).group(1)
'9606' 
```

If there are multiple taxids, use `re.findall`, which returns a list of all matches:

```
>>> re.findall(r'taxid:(\d+)', s)
['9606'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:20:00.630

```
for line in lines:
    match = re.match(".*\|taxid:([^|]+)\|.*",line)
    print match.groups() 
```

# express - expressjs 3.x 中的自定义日志记录

> ID：12466461
> 
> 赞同：2
> 
> 时间：2012-09-17T20:15:35.223
> 
> 标签：express

如何登录日志文件而不是调用 console.log。我检查了这个 [Logging in express js to a output file?](https://stackoverflow.com/questions/5489815/logging-in-express-js-to-a-output-file) 但这只会将请求/响应记录到文件中。我如何将我的错误/信息消息记录到日志目录（自定义日志记录）中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:30:19.647

使用[`log4js-node`](https://github.com/nomiddlename/log4js-node)or[`winston`](https://github.com/flatiron/winston)模块登录 node.js。

# iis-7.5 - SiteMinder on IIS7.5 Authentication on app by app based？

> ID：12466465
> 
> 赞同：0
> 
> 时间：2012-09-17T20:15:51.953
> 
> 标签：iis-7.5, siteminder

我继承了一堆服务器，这些服务器在 IIS6 上托管多个应用程序，受 R6 SiteMinder 保护。环境很快就要到R12了，我们也收到了一些IIS7.5的新服务器。（很多变化，都在接下来的 60 天内。）

我不是专家，因此在配置一些更详细的步骤时遇到了麻烦。到目前为止，在新服务器上，我能够创建 SiteMinder 并将其应用于 DefaultWebSite（以及其中包含的所有内容）以及我创建的任何自定义站点。不幸的是，在我们的环境中，它已经设置了一些位于 DefaultWebSite 下的应用程序，其中只有一些我们需要 SiteMinder 保护。

在 IIS6 中，我可以通过在通配符映射中应用 ISAPI6WebAgent.dll 来简单地将站点添加到 SiteMinder 身份验证中。在 IIS7.5 中，这似乎不起作用。我按照安装手册中的具体细节进行操作，这似乎是一种全有或全无的情况：DefaultWebSite 下的所有内容都受到保护，或者什么都没有。

这将在我的环境中导致大量额外工作（这也意味着无法就地升级，因此需要在接下来的 60 天内迁移所有需要 SiteMinder 身份验证的应用程序。）是否有任何解决方法？Google 没有为我提供任何解决方案，我的 SiteMinder 团队声称“不再可能使用 IIS7.5”来保持环境的当前设置方式。

任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:59:53.613

对于那些关心的人，如果您在集成应用程序池下运行，您可以简单地添加和删除 SiteMinder 模块来控制哪些站点受 SiteMinder 保护。这确实适用于虚拟目录下的应用程序 - 并且使用配置文件，您既可以默认继承保护，也可以使其不受保护并稍后通过简单的“配置本机模块”并将其添加回来。

# hibernate - 休眠一对多关系不起作用？

> ID：12466466
> 
> 赞同：0
> 
> 时间：2012-09-17T20:15:56.383
> 
> 标签：hibernate, jstl, one-to-many

以下是我的 location.hbm.xml 文件

```
<hibernate-mapping package="ca.ups.tundra.model">
    <class name="Location" table="LOCATION">
        <id name="id" access="field" type="long">
            <generator class="native"/>
        </id>
        <version name="version" access="field" column="VERSION" type="long"/>

        <property name="slic" type="string" column="SLIC" length="5" not-null="true"/>
        <property name="pkgSlic" type="string" column="PKGSLIC" length="5" not-null="true"/>
        <property name="name" type="string" column="NAME" length="30" not-null="true"/>

        <set name="groups" table="LOCATIONGROUPS" cascade="save-update" access="field">
            <key column="LOCATION_ID"/>
            <many-to-many class="LocationGroup" column="GROUP_ID"/>
        </set>
        <set name="fEvents" table="FTP_SCAN_EVENTS" inverse="true" lazy="true" fetch="select" cascade="save-update, delete">
            <key column ="LOCATION_ID" not-null="true" />
            <one-to-many class="FtpScanEvents" />
        </set>
    </class>
</hibernate-mapping> 
```

以下是我的 ftpscanevents.hbm.xml

```
<hibernate-mapping package="ca.ups.tundra.model">
    <class name="FtpScanEvents" table="FTP_SCAN_EVENTS">
        <id name="id" type="long">
            <generator class="native"/>
        </id>
        <many-to-one name="location" class="Location" fetch="select" cascade="save-update, delete">
            <column name="LOCATION_ID" not-null="true" />
        </many-to-one>
        <property name="hostName" type="string" length="200" column="HOSTNAME"/>
        <property name="directory" type="string" length="200" column="DIRECTORY"/>
        <property name="userName" type="string" length="20" column="USERNAME"/>
        <property name="password" type="string" length="20" column="PASSWORD"/>
    </class>
</hibernate-mapping> 
```

我的位置.java

```
public class Location extends Persistent implements  Serializable {
    private String slic;
    private String pkgSlic;
    private String name;
Set<LocationGroup> groups = new HashSet<LocationGroup>();
private Set<FtpScanEvents> fEvents = new HashSet<FtpScanEvents>();
//getters and setters
} 
```

FtpScanEvents.java

```
public class FtpScanEvents extends Persistent implements Serializable{

    private String hostName;
    private String directory;
    private String userName;
    private String password;
    private Location location;
//getters and setters
} 
```

我的 Jsp，我想在其中显示两个表中的值；

```
<form:form name="f" action="${flowExecutionUrl}" modelAttribute="location">
<table>
    <tr>
    <th colspan="3">Location Add/Edit</th>
    </tr>
    <tr>
    <td>Location Name</td>
    <td><form:input path="name" size="30" maxlength="30" onkeypress="return lowerUpperLetterNumberDashPeriodSpaceEnterOnly();"/></td>
    <td class="error"><form:errors path="name"/></td>
    </tr>
    <tr>
    <td>Port Code</td>
    <td><form:input path="slic" size="30" maxlength="5"  onkeypress="return toUpperLetterNumberOnly();"/></td>
        <td class="error">
        <form:errors path="slic"/>
        <c:if test="${not empty duplicateLocationMessageKey}">
        <p><fmt:message key="${duplicateLocationMessageKey}"/></p>
        </c:if> 
        </td>   </tr>   <tr>
        <td>Pkg. SLIC</td>
        <td><form:input path="pkgSlic" size="30" maxlength="5"  onkeypress="return toUpperLetterNumberOnly();"/></td>
        <td class="error">
        <form:errors path="pkgSlic"/>
        <c:if test="${not empty duplicateLocationMessageKey}">
        <p><fmt:message key="${duplicateLocationMessageKey}"/></p>
        </c:if> 
        </td>   </tr>
<tr><td colspan="4">
        <table>

            <tr><td>Host Name</td><td>Directory</td><td>User Name</td><td>Password</td></tr>
        <tr><td><form:input path="fEvents.hostName" id="hostName" size="30" maxlength="200"/></td>
            <td><form:input path="fEvents.directory" id="directory" value="" size="30" maxlength="200"/></td>
            <td><form:input path="fEvents.userName" id="userName" value="" size="20" maxlength="20"/></td>
            <td><form:input path="fEvents.password" id="password" value="" size="20" maxlength="20"/></td>
            <td><input type="button" id="delete" onclick="if(confirm( 'Do you want to delete')) deleteRow(this);" value="-" /></td></tr>
        </table>
            </td></tr>
</table>
</form:form> 
```

当我运行我的应用程序并导航到 location.jsp。我收到以下错误：

```
SEVERE: Servlet.service() for servlet jsp threw exception
ognl.NoSuchPropertyException: org.hibernate.collection.PersistentSet.hostName
    at ognl.ObjectPropertyAccessor.getProperty(ObjectPropertyAccessor.java:122)
    at ognl.SetPropertyAccessor.getProperty(SetPropertyAccessor.java:60)
    at ognl.OgnlRuntime.getProperty(OgnlRuntime.java:1657)
    at ognl.ASTProperty.getValueBody(ASTProperty.java:92)
    at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:170)
    at ognl.SimpleNode.getValue(SimpleNode.java:210)
    at ognl.ASTChain.getValueBody(ASTChain.java:109)
    at ognl.SimpleNode.evaluateGetValueBody(SimpleNode.java:170)
    at ognl.SimpleNode.getValue(SimpleNode.java:210)
    at ognl.Ognl.getValue(Ognl.java:333)
    at org.springframework.binding.expression.ognl.OgnlExpression.getValue(OgnlExpression.java:85)
    at org.springframework.webflow.mvc.view.BindingModel.getFormattedValue(BindingModel.java:240)
    at org.springframework.webflow.mvc.view.BindingModel.getFieldValue(BindingModel.java:141)
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:120)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:172)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:192)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:158)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:121)
    at org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:379)
    at org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:139)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:90)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:77)
    at org.apache.jsp.WEB_002dINF.jsp.Location_jsp._jspx_meth_form_005finput_005f10(Location_jsp.java:2398)
    at org.apache.jsp.WEB_002dINF.jsp.Location_jsp._jspService(Location_jsp.java:653)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:236)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:257)
    at org.springframework.webflow.mvc.servlet.ServletMvcView.doRender(ServletMvcView.java:50)
    at org.springframework.webflow.mvc.view.AbstractMvcView.render(AbstractMvcView.java:180)
    at org.springframework.webflow.engine.ViewState.render(ViewState.java:282)
    at org.springframework.webflow.engine.ViewState.doEnter(ViewState.java:186)
    at org.springframework.webflow.engine.State.enter(State.java:194)
    at org.springframework.webflow.engine.Flow.start(Flow.java:535)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.start(FlowExecutionImpl.java:364)
    at org.springframework.webflow.engine.impl.RequestControlContextImpl.start(RequestControlContextImpl.java:234)
    at org.springframework.webflow.engine.SubflowState.doEnter(SubflowState.java:101)
    at org.springframework.webflow.engine.State.enter(State.java:194)
    at org.springframework.webflow.engine.Transition.execute(Transition.java:227)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.execute(FlowExecutionImpl.java:391)
    at org.springframework.webflow.engine.impl.RequestControlContextImpl.execute(RequestControlContextImpl.java:214)
    at org.springframework.webflow.engine.TransitionableState.handleEvent(TransitionableState.java:119)
    at org.springframework.webflow.engine.Flow.handleEvent(Flow.java:555)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.handleEvent(FlowExecutionImpl.java:386)
    at org.springframework.webflow.engine.impl.RequestControlContextImpl.handleEvent(RequestControlContextImpl.java:210)
    at org.springframework.webflow.engine.ViewState.handleEvent(ViewState.java:230)
    at org.springframework.webflow.engine.ViewState.resume(ViewState.java:196)
    at org.springframework.webflow.engine.Flow.resume(Flow.java:545)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:259)
    at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.springframework.security.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.SessionFixationProtectionFilter.doFilterHttp(SessionFixationProtectionFilter.java:67)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.ExceptionTranslationFilter.doFilterHttp(ExceptionTranslationFilter.java:101)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.providers.anonymous.AnonymousProcessingFilter.doFilterHttp(AnonymousProcessingFilter.java:105)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.wrapper.SecurityContextHolderAwareRequestFilter.doFilterHttp(SecurityContextHolderAwareRequestFilter.java:91)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.basicauth.BasicProcessingFilter.doFilterHttp(BasicProcessingFilter.java:174)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:278)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.logout.LogoutFilter.doFilterHttp(LogoutFilter.java:89)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:175)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

如何摆脱它并使其工作......我的控制器应该是什么样子......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:43:17.250

`fEvents`是 a`Set<FtpScanEvents>`并且它绝对没有`hostName`您在此处需要的属性：

```
<form:input path="fEvents.hostName" ... /> 
```

如果要将集合绑定到 Spring MVC 表单，则需要对其进行迭代并绑定每个项目，如下所示：

```
<c:forEach items="${fEvents}" var="event" varStatus="status" > 
    ... <form:input path="fEvents[${status.index}].hostName" ... /> ...
</c:forEach> 
```

但是请注意，[您不能将此方法与`Set`](https://stackoverflow.com/questions/8057539/spring-form-binding-to-set-inside-cforeach). 您应该将类​​型更改`fEvents`为`List<FtpScanEvents>`，或将表单绑定到`List`用于该属性的 DTO。

# java - 客户端服务器套接字 java.net.SocketException：软件导致连接中止：recv 失败

> ID：12466471
> 
> 赞同：0
> 
> 时间：2012-09-17T20:16:29.120
> 
> 标签：java, sockets, ssl, tcp

> **可能重复：**
> [java.net.SocketException：软件导致连接中止：recv 失败](https://stackoverflow.com/questions/135919/java-net-socketexception-software-caused-connection-abort-recv-failed)

我正在尝试编写一个客户端服务器对，其中连接整天处于活动状态，客户端等待服务器发送消息。步骤是：

1.  服务器打开端口并监听连接
2.  客户端连接并等待数据
3.  一段时间后（可能是几个小时），服务器将数据发送到客户端
4.  客户端处理数据并将其返回给服务器
5.  重复步骤 3 和 4

我可以让步骤 1-4 工作，但是如果我尝试重复步骤 3，我会在标题中得到错误。

这是我在客户端的方法：

```
private static void waitForInput(SSLSocket sslsocket) throws IOException {
        do {
            try {
                ObjectInputStream ois = new ObjectInputStream(sslsocket.getInputStream());
                ObjectOutputStream oos = new ObjectOutputStream(sslsocket.getOutputStream());

                Object o = (Object) (ois.readObject());
                // excluded code to process data     

                oos.flush();
                oos.writeObject(o);
                oos.reset();
            }
            catch(ClassNotFoundException e){
                System.err.println(e.getMessage());
            }
        } while ( true );
    } 
```

代码在第 4 行失败，第一次阻塞并等到我得到下一位数据，但它没有工作两次。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:24:57.213

当您等待从另一端已关闭的套接字读取时，会引发连接中止 IOException，如果您没有意外关闭套接字，请检查您的服务器端代码。还可以上传服务器端代码进行更深入的分析，也可以尝试发布堆栈跟踪，这将有助于分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:50:50.773

您可以将声明移出循环`ois`，因为不需要每次都重新声明它们，可能需要围绕它。`oos``do ... while``try ... catch`

```
private static void waitForInput(SSLSocket sslsocket) throws IOException {
    ObjectInputStream ois = new ObjectInputStream(sslsocket.getInputStream());
    ObjectOutputStream oos = new ObjectOutputStream(sslsocket.getOutputStream());
    do {
        try {

            Object o = (Object) (ois.readObject());
            // excluded code to process data     

            oos.writeObject(o);
            oos.flush();
        }
        catch(ClassNotFoundException e){
            System.err.println(e.getMessage());
        }
    } while ( true );
} 
```

我已经删除`oos.reset();`并移动了`oos.flush();`

我相信问题在于`oos.reset();`，我永远不会重置应该持续数小时或至少部分持续的连接。

此外，已经有一个`ois`用于该连接的连接，您不需要其中的两个。

# jquery - 位 JSON API 返回 500, UNKNOWN_ERROR

> ID：12466472
> 
> 赞同：1
> 
> 时间：2012-09-17T20:16:34.790
> 
> 标签：jquery, api

```
f = $.get('https://api-ssl.bit.ly/v3/shorten/?format=json&access_token=derpderpderp&longUrl=http%3A%2F%2Fgoogle.com%2F')
f.done(function(r){ console.log(r);}); 
```

输出：

```
Object
data: Array[0]
  length: 0
  __proto__: Array[0]
status_code: 500
status_txt: "UNKNOWN_ERROR"
__proto__: Object 
```

这是什么`UNKNOWN_ERROR`？没有任何`status_txt`我无法知道出了什么问题。是从他们的`longUrl`文档中复制的，所以它不应该是 URI 编码错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:36:53.753

在这种情况下，您可以使用 your`&login=LOGIN&apiKey=KEY`而不是`&access_token=TOKEN`. 试试[http://bitly.com/a/your_api_key](http://bitly.com/a/your_api_key)

# python - 使用正则表达式从给定单词开始直到字符串结尾（包括换行符）获取字符串的一部分

> ID：12466482
> 
> 赞同：1
> 
> 时间：2012-09-17T20:17:03.743
> 
> 标签：python, regex, string

```
import re

stri = "Hello guys.\nHow are you doing?\nI hope you have sweet dreams tonight."
regex = re.compile("guys[.\n]*$")

print regex.findall(stri) 
```

我知道`.`在正则表达式中可以是除换行符之外的任何字符，`[xy]`表示 x 或 y，`*`在字符表示该字符的任意数量并`$`表示字符串的结尾之后。那为什么不`"guys[.\n]*$"`给我`"guys.\nHow are you doing?\nI hope you have sweet dreams tonight."`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:18:07.910

你把句点放在一个字符类中，它是*一个*只匹配一个`.`字符的地方，没有别的。表示该类中包含的`[...]`任何*文字字符。*

您想改用[`re.DOTALL`配置常量](http://docs.python.org/library/re.html#re.DOTALL)：

```
regex = re.compile("guys.*$", re.DOTALL) 
```

或者，您应该保留`.`字符类的外部并在带有`\n`换行符的组中使用它：

```
regex = re.compile("guys(?:.|\n)*$") 
```

演示：

```
>>> import re
>>> stri = "Hello guys.\nHow are you doing?\nI hope you have sweet dreams tonight."
>>> regex = re.compile("guys.*$", re.DOTALL)
>>> print regex.findall(stri)
['guys.\nHow are you doing?\nI hope you have sweet dreams tonight.'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T20:26:27.617

Martijn 的回答很好地解释了您所看到的行为。作为`re.DOTALL`or`(?:.\n)`选项的替代方案，您可以使用类似以下的内容：

```
regex = re.compile(r"guys[\s\S]*$") 
```

由于`\s`意味着“所有空格”并且`\S`意味着“除了空格之外的任何内容”，将它们放在一个字符类中将允许匹配任何字符，包括换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:21:13.330

~~使用`re.MULLTILINE` ，你应该匹配多行......~~

```
>>> regex = re.compile("guys.*",re.DOTALL|re.MULTILINE)
>>> regex.findall(stri)
['guys.\nHow are you doing?\nI hope you have sweet dreams tonight.'] 
```

/编辑：正如 martjin 指出的那样，我对多行的看法是错误的

```
>>> regex = re.compile("guys.*",re.DOTALL)
>>> regex.findall(stri)
['guys.\nHow are you doing?\nI hope you have sweet dreams tonight.'] 
```

# sql - 使用 Group By 子句时出错

> ID：12466484
> 
> 赞同：1
> 
> 时间：2012-09-17T20:17:13.673
> 
> 标签：sql, group-by

我在执行时收到 sql server 错误“文本 ntext 和图像数据类型无法比较或排序，除非使用为 null 或类似”

```
SELECT r.Shift, l.lab_title AS [Assigned Lab], u.user_name AS [L/A],
       CONVERT(varchar(100), t.Time) + '  To ' + CONVERT(varchar(100), h.Time) AS Timing
  FROM table_roaster_time_table AS r
       INNER JOIN table_time AS t ON r.timeId = t.timeId AND r.timeId = t.timeId
       INNER JOIN table_user AS u ON r.user_id = u.user_id
       INNER JOIN table_labs AS l ON r.lab_id = l.lab_id
       INNER JOIN table_time2 AS h ON r.timeId2 = h.timeId2
 GROUP BY r.Shift, l.lab_title, u.user_name 
```

不知道是什么问题。我也使用了聚合函数，只是为了形式，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:18:55.247

I'm guessing your `r.Shift` column is a `text` or `ntext` type. Because of this it cannot be used in a `group by`

One option might be to use a CAST on the suspect column, but you might loose data. Example:

```
SELECT        r.Shift, l.lab_title AS [Assigned Lab], u.user_name AS [L/A], CONVERT(varchar(100),     t.Time) + '  To ' + CONVERT(varchar(100), h.Time) AS Timing
FROM            table_roaster_time_table AS r INNER JOIN
                     table_time AS t ON r.timeId = t.timeId AND r.timeId = t.timeId INNER JOIN
                     table_user AS u ON r.user_id = u.user_id INNER JOIN
                     table_labs AS l ON r.lab_id = l.lab_id INNER JOIN
                     table_time2 AS h ON r.timeId2 = h.timeId2
GROUP BY CAST(r.Shift as varchar(max), l.lab_title, u.user_name 
```

You could also look at querying the data without the `text` column and then doing a second query to get the missing column. Example:

```
with temp as
(
    SELECT        l.lab_title AS [Assigned Lab], u.user_name AS [L/A], CONVERT(varchar(100),     t.Time) + '  To ' + CONVERT(varchar(100), h.Time) AS Timing
    FROM            table_roaster_time_table AS r INNER JOIN
                         table_time AS t ON r.timeId = t.timeId AND r.timeId = t.timeId INNER JOIN
                         table_user AS u ON r.user_id = u.user_id INNER JOIN
                         table_labs AS l ON r.lab_id = l.lab_id INNER JOIN
                         table_time2 AS h ON r.timeId2 = h.timeId2
    GROUP BY l.lab_title, u.user_name
)
SELECT   r.Shift, t.lab_title AS [Assigned Lab], t.user_name AS [L/A] --etc
 FROM            table_roaster_time_table AS r 
 INNER JOIN temp as t
on  r.id = t.id --or whatver 
```

Also, this SQL seems unnecessary:

```
r.timeId = t.timeId AND r.timeId = t.timeId 
```

# c++ - 取消引用指向具有未知类型的变量的指针

> ID：12466485
> 
> 赞同：1
> 
> 时间：2012-09-17T20:17:14.533
> 
> 标签：c++, c, memory

我不知道如何确切地解释我现在遇到的问题，如果我对问题的标题含糊不清，很抱歉。

我现在拥有的是存储在变量中的虚拟地址列表。例如，我有

> 0x8c334dd

存储在 char 变量中。这个地址是另一个有数据的变量的地址。我想做的是去那个地址并获取存储在上面的数据。

我的假设是取消引用指针将是最好的方法，不幸的是我不知道地址指向的变量的类型，那么在这种情况下取​​消引用是如何工作的？我不能这样做：`*(char *) 8c334dd`因为我不知道地址指向的变量的类型......

如果我将它转换为一个`(int *)`我会得到一些地址指向的一些变量的一些数据（记住我有几个地址）但对于其他人我只是得到一个地址，我需要数据（这个变量是结构，字符等）。

我正在使用 ELF 符号表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T21:28:38.417

通常，C++ 或 C 无法知道您拥有什么类型的指针。

解决这个问题的常用方法是使指针指向一个结构，并在结构中的一个已知位置指示数据的类型。通常已知位置是结构中的第一个位置。

例子：

```
// signature value; use any value unlikely to happen by chance
#define VAR_SIG 0x11223344

typedef enum
{
    vartypeInvalid = 0,
    vartypeInt,
    vartypeFloat,
    vartypeDouble,
    vartypeString,
    vartypeMax  // not a valid vartype
} VARTYPE;

typedef struct
{
    VARTYPE type;
#ifdef DEBUG
    uint32_t sig;
#endif // DEBUG
    union data
    {
        int i;
        float f;
        double d;
        char *s;
    };
} VAR; 
```

然后您可以进行完整性检查：您可以查看该`type`字段的值是否大于`vartypeInvalid`和小于`vartypeMax`（并且您永远不需要在完整性检查代码中编辑这些名称；如果您添加更多类型，您可以在之前添加`vartypeMax`它们列表）。此外，对于`DEBUG`构建，您可以检查签名字段是否`sig`包含一些特定的签名值。（当然，这意味着您用于初始化`VAR`实例的初始化代码需要始终设置该`sig`字段。）

如果你做这样的事情，那么你如何初始化它？运行时代码将始终有效：

```
VAR v;

#ifdef DEBUG
v.sig = VAR_SIG;
#endif // DEBUG
v.type = vartypeFloat;
v.data = 3.14f; 
```

如果你想在编译时初始化它怎么办？如果你想用一个整数值初始化它很容易，因为`int`类型是第一个类型`union`：

```
VAR v =
{
    vartypeInt,
#ifdef DEBUG
    VAR_SIG,
#endif // DEBUG
    1234
}; 
```

如果您使用的是符合 C99 的 C 版本，您实际上可以使用字段名称初始化结构并让它分配任何类型。但是 Microsoft C 不符合 C99，所以如果你想用`float`or`double`值初始化你的结构，上面是一场噩梦。（如果将浮点值转换为整数，C 不仅会更改类型，还会对值进行四舍五入；而且我知道没有任何技巧可以可移植地获取正确表示 32 位的 32 位整数值在 C 程序的编译时浮动。）

[编译时浮动包装/双关语](https://stackoverflow.com/questions/2947127/compile-time-float-packing-punning)

但是，如果您使用指针，那很容易。只需将联合中的第一个字段名称设置为指针类型，将指针转换`void *`为上面的结构并初始化结构（指针将转到`1234`上面的位置）。

如果您正在阅读由其他人的代码编写的表格，并且您没有办法添加类型标识符字段，那么我没有给您一个通用的答案。我想您可以尝试将指针读取为不同的类型，然后看看哪些有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:40:02.620

只是想添加一些东西，对于那些使用 ELF 符号表的人来说，我发现 DWARF 文件中的 DIE 更易于使用。你可以使用 DWARF 而不是 ELF 来获取变量的地址、类型和名称，并且 libdwarf 有很好的文档。

# asp.net - 使用模型数据未找到 MVC 4 空模板页面

> ID：12466486
> 
> 赞同：0
> 
> 时间：2012-09-17T20:17:16.333
> 
> 标签：asp.net

我从 MVC 4 中的一个空模板开始，我可以从视图中访问模型数据。但是，当我添加共享文件夹 _Layout.cshtml 和 _ViewStart.cshtml 时，每当我尝试从模型输出信息时，我都会得到“找不到页面”。

如果我从标记中删除模型数据并使用纯 HTML，我的布局和视图加载正确。有任何想法吗？

我知道我可以使用 Internet 应用程序模板，但我想从头开始，并且已经完成了很多模型类并配置了 DI。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:25:34.790

我的错，我必须清除浏览器缓存才能使新更改生效！

# java - 使用 Bouncy Castle Java API 生成 X.509 证书

> ID：12466489
> 
> 赞同：3
> 
> 时间：2012-09-17T20:17:21.503
> 
> 标签：java, cryptography, x509certificate, bouncycastle

我正在尝试使用 Bouncy Castle Java API 生成 X.509 证书。

我在以下位置找到了示例代码：

[http://www.bouncycastle.org/wiki/display/JA1/X.509+Public+Key+Certificate+and+Certification+Request+Generation](http://www.bouncycastle.org/wiki/display/JA1/X.509+Public+Key+Certificate+and+Certification+Request+Generation)

但是，编译以下代码后，JVM 会显示如下所示的错误消息

`Could not find the main class: org.bouncycastle.util.AllTests. Program will exit.`

请注意，它`org.bouncycastle.util.AllTests`被插入到 Java 构建路径中。

如何修复我的代码以正常工作？

```
import java.math.BigInteger;
import java.util.Date;

import org.bouncycastle.asn1.ASN1Object;
import org.bouncycastle.asn1.ASN1Sequence;
import org.bouncycastle.asn1.x500.X500Name;
import org.bouncycastle.asn1.x509.AlgorithmIdentifier;
import org.bouncycastle.asn1.x509.SubjectPublicKeyInfo;
import org.bouncycastle.cert.X509CertificateHolder;
import org.bouncycastle.cert.X509v1CertificateBuilder;
import org.bouncycastle.crypto.params.RSAKeyParameters;
import org.bouncycastle.crypto.params.RSAPrivateCrtKeyParameters;
import org.bouncycastle.operator.ContentSigner;
import org.bouncycastle.operator.DefaultDigestAlgorithmIdentifierFinder;
import org.bouncycastle.operator.DefaultSignatureAlgorithmIdentifierFinder;
import org.bouncycastle.operator.bc.BcRSAContentSignerBuilder;

public class X509CertificateCreator{
    AlgorithmIdentifier sigAlgId = new DefaultSignatureAlgorithmIdentifierFinder().find("SHA1withRSA");
AlgorithmIdentifier digAlgId = new DefaultDigestAlgorithmIdentifierFinder().find(sigAlgId);

//define lwPrivKey
RSAKeyParameters lwPubKey = new RSAKeyParameters(
        false,
        new BigInteger("b4a7e46170574f16a97082b22be58b6a2a629798419be12872a4bdba626cfae9900f76abfb12139dce5de56564fab2b6543165a040c606887420e33d91ed7ed7", 16),
        new BigInteger("11", 16));

RSAPrivateCrtKeyParameters lwPrivKey = new RSAPrivateCrtKeyParameters(
        new BigInteger("b4a7e46170574f16a97082b22be58b6a2a629798419be12872a4bdba626cfae9900f76abfb12139dce5de56564fab2b6543165a040c606887420e33d91ed7ed7", 16),
        new BigInteger("11", 16),
        new BigInteger("9f66f6b05410cd503b2709e88115d55daced94d1a34d4e32bf824d0dde6028ae79c5f07b580f5dce240d7111f7ddb130a7945cd7d957d1920994da389f490c89", 16),
        new BigInteger("c0a0758cdf14256f78d4708c86becdead1b50ad4ad6c5c703e2168fbf37884cb", 16),
        new BigInteger("f01734d7960ea60070f1b06f2bb81bfac48ff192ae18451d5e56c734a5aab8a5", 16),
        new BigInteger("b54bb9edff22051d9ee60f9351a48591b6500a319429c069a3e335a1d6171391", 16),
        new BigInteger("d3d83daf2a0cecd3367ae6f8ae1aeb82e9ac2f816c6fc483533d8297dd7884cd", 16),
        new BigInteger("b8f52fc6f38593dabb661d3f50f8897f8106eee68b1bce78a95b132b4e5b5d19", 16));

////

public void creation(){
    try {

ContentSigner sigGen = new BcRSAContentSignerBuilder(sigAlgId, digAlgId).build(lwPrivKey);

//
byte[] publickeyb=sigAlgId.getEncoded();
//SubjectPublicKeyInfo subPubKeyInfo = ....;
SubjectPublicKeyInfo subPubKeyInfo = new SubjectPublicKeyInfo((ASN1Sequence)ASN1Object.fromByteArray(publickeyb));

Date startDate = new Date(System.currentTimeMillis() - 24 * 60 * 60 * 1000);
Date endDate = new Date(System.currentTimeMillis() + 365 * 24 * 60 * 60 * 1000);

X509v1CertificateBuilder v1CertGen = new X509v1CertificateBuilder(
          new X500Name("CN=Test"), 
          BigInteger.ONE, 
          startDate, endDate, 
          new X500Name("CN=Test"), 
          subPubKeyInfo);

X509CertificateHolder certHolder = v1CertGen.build(sigGen);

} catch (Exception E)
{

}
}

public static void main(String[] args) throws Exception {
    System.out.println("CertificationCreator!"); 
    X509CertificateCreator X509C = new X509CertificateCreator();
    X509C.creation();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:03:59.580

您可能应该在类路径中包含 bctest-jdk15on-147.jar ( [http://www.bouncycastle.org/download/bctest-jdk15on-147.jar](http://www.bouncycastle.org/download/bctest-jdk15on-147.jar) )。

# jquery - 列表样式的问题单击此 jQuery

> ID：12466490
> 
> 赞同：0
> 
> 时间：2012-09-17T20:17:22.520
> 
> 标签：jquery, css

我必须在我的一个站点上使用[它](http://sampathnarsingam.blogspot.in/2012/05/how-to-create-expand-and-collapse-list.html)，在测试期间，我发现当我单击图像按钮时，它会自动选择整个 li 项目，但这只会发生在 firefox 和 chrome 上，而 IE 很好。有没有人可以帮助我。

您可以在 Firefox 上尝试，当您单击列表图像时，它会自动选择主菜单和子菜单。

如果有人已经在这方面工作并帮助我找到问题，我将不胜感激。

更多信息：我尝试将 plusimage 和 minus 图像用作背景图像，但它不起作用。我使用了 list-style-position: inside, does not work 以及 display:inline-block 和所有其他可能的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-30T13:42:25.927

将这些属性添加到样式表中的 .category 类以使项目无法选择：

```
.catgory { 
    -moz-user-select: -moz-none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    -o-user-select: none;
    user-select: none; 
} 
```

# r - 将多组测量列（宽格式）重塑为单列（长格式）

> ID：12466493
> 
> 赞同：52
> 
> 时间：2012-09-17T20:17:29.523
> 
> 标签：r, reshape, tidyr, reshape2, r-faq

我有一个宽格式的数据框，在不同的日期范围内进行了重复测量。在我的示例中，有三个不同的时期，它们都有对应的值。例如，第一次测量 ( `Value1`) 是在从`DateRange1Start`到期间测量的`DateRange1End`：

```
ID DateRange1Start DateRange1End Value1 DateRange2Start DateRange2End Value2 DateRange3Start DateRange3End Value3
1 1/1/90 3/1/90 4.4 4/5/91 6/7/91 6.2 5/5/95 6/6/96 3.3 
```

我希望将数据重塑为长格式，以便对 DateRangeXStart 和 DateRangeXEnd 列进行分组。因此，原表中的 1 行变为新表中的 3 行：

```
ID DateRangeStart DateRangeEnd Value
1 1/1/90 3/1/90 4.4
1 4/5/91 6/7/91 6.2
1 5/5/95 6/6/96 3.3 
```

我知道必须有一种方法可以使用`reshape2`/ `melt`/ `recast`/来做到这一点`tidyr`，但我似乎无法弄清楚如何以这种特定方式将多组度量变量映射到单组值列。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-17T20:31:51.047

```
reshape(dat, idvar="ID", direction="long", 
             varying=list(Start=c(2,5,8), End=c(3,6,9), Value=c(4,7,10)),
             v.names = c("DateRangeStart", "DateRangeEnd", "Value") )
#-------------
    ID time DateRangeStart DateRangeEnd Value
1.1  1    1          1/1/90        3/1/90    4.4
1.2  1    2          4/5/91        6/7/91    6.2
1.3  1    3          5/5/95        6/6/96    3.3 
```

（根据 Josh 的建议添加了 v.names。）

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-02-28T20:30:21.060

`data.table`的`melt`函数可以融合成多个列。使用它，我们可以简单地做：

```
require(data.table)
melt(setDT(dat), id=1L,
     measure=patterns("Start$", "End$", "^Value"), 
     value.name=c("DateRangeStart", "DateRangeEnd", "Value"))

#    ID variable DateRangeStart DateRangeEnd Value
# 1:  1        1         1/1/90       3/1/90   4.4
# 2:  1        2         4/5/91       6/7/91   6.2
# 3:  1        3         5/5/95       6/6/96   3.3 
```

* * *

或者，您也可以通过列位置引用三组度量列：

```
melt(setDT(dat), id = 1L, 
     measure = list(c(2,5,8), c(3,6,9), c(4,7,10)), 
     value.name = c("DateRangeStart", "DateRangeEnd", "Value")) 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2019-03-20T13:56:52.010

*从1.0.0*`pivot_longer()`版开始，使用*tidyr*包的功能可以将具有多个值/度量列的宽格式重塑为长格式。

 *这优于之前的 tidyr 策略`gather()`than `spread()`（参见@AndrewMacDonald 的回答），因为不再删除属性（在下面的示例中，日期仍然是日期，数字仍然是数字）。

```
library("tidyr")
library("magrittr")

a <- structure(list(ID = 1L, 
                    DateRange1Start = structure(7305, class = "Date"), 
                    DateRange1End = structure(7307, class = "Date"), 
                    Value1 = 4.4, 
                    DateRange2Start = structure(7793, class = "Date"),
                    DateRange2End = structure(7856, class = "Date"), 
                    Value2 = 6.2, 
                    DateRange3Start = structure(9255, class = "Date"), 
                    DateRange3End = structure(9653, class = "Date"), 
                    Value3 = 3.3),
               row.names = c(NA, -1L), class = c("tbl_df", "tbl", "data.frame")) 
```

`pivot_longer()`(counterpart: `pivot_wider()`) 与`gather()`. 但是，它提供了额外的功能，例如多值列。只有一个值列，宽数据集的所有列名将进入一个长列，名称为`names_to`. 对于多个值列，`names_to`可能会收到多个新名称。

如果所有列名都遵循特定的模式，例如`Start_1`、`End_1`、`Start_2`等，这是最简单的。因此，我在第一步中重命名了这些列。

```
(names(a) <- sub("(\\d)(\\w*)", "\\2_\\1", names(a)))
#>  [1] "ID"               "DateRangeStart_1" "DateRangeEnd_1"  
#>  [4] "Value_1"          "DateRangeStart_2" "DateRangeEnd_2"  
#>  [7] "Value_2"          "DateRangeStart_3" "DateRangeEnd_3"  
#> [10] "Value_3"

pivot_longer(a, 
             cols = -ID, 
             names_to = c(".value", "group"),
             # names_prefix = "DateRange",
             names_sep = "_")
#> # A tibble: 3 x 5
#>      ID group DateRangeEnd DateRangeStart Value
#>   <int> <chr> <date>       <date>         <dbl>
#> 1     1 1     1990-01-03   1990-01-01       4.4
#> 2     1 2     1991-07-06   1991-05-04       6.2
#> 3     1 3     1996-06-06   1995-05-05       3.3 
```

或者，可以使用提供更精细控制的*枢轴规范*来完成重塑（参见下面的链接）：

```
spec <- a %>%
    build_longer_spec(cols = -ID) %>%
    dplyr::transmute(.name = .name,
                     group = readr::parse_number(name),
                     .value = stringr::str_extract(name, "Start|End|Value"))

pivot_longer(a, spec = spec) 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.2.1）于 2019 年 3 月 26 日创建)

另见：[https ://tidyr.tidyverse.org/articles/pivot.html](https://tidyr.tidyverse.org/articles/pivot.html)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-06-23T20:05:20.490

这是使用`tidyr`. 这是它的功能的一个有趣用例`extract_numeric()`，我用来从列名中提取组

```
library(dplyr)
library(tidyr)

a <- read.table(textConnection("
ID DateRange1Start DateRange1End Value1 DateRange2Start DateRange2End Value2 DateRange3Start DateRange3End Value3
1 1/1/90 3/1/90 4.4 4/5/91 6/7/91 6.2 5/5/95 6/6/96 3.3 
"),header=TRUE)

a %>%
  gather(variable,value,-ID) %>%
  mutate(group = extract_numeric(variable)) %>%
  mutate(variable =  gsub("\\d","",x = variable)) %>%
  spread(variable,value)

  ID group DateRangeEnd DateRangeStart Value
1  1     1       3/1/90         1/1/90   4.4
2  1     2       6/7/91         4/5/91   6.2
3  1     3       6/6/96         5/5/95   3.3 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-11-26T07:02:26.287

两个额外的选项（带有一个多行的示例数据框，以更好地显示代码的工作）：

**1) 以 R 为底：**

```
l <- lapply(split.default(d[-1], cumsum(grepl('Start$', names(d)[-1]))),
            setNames, c('DateRangeStart','DateRangeEnd','Value'))
data.frame(ID = d[,1], do.call(rbind, l), row.names = NULL) 
```

这使：

> ```
>  ID DateRangeStart DateRangeEnd Value
> 1  1         1/1/90       3/1/90   4.4
> 2  2         1/2/90       3/2/90   6.1
> 3  1         4/5/91       6/7/91   6.2
> 4  2         4/6/91       6/8/91   3.2
> 5  1         5/5/95       6/6/96   3.3
> 6  2         5/5/97       6/6/98   1.3 
> ```

**2）与`tidyverse`：**

```
library(dplyr)
library(purrr)

split.default(d[-1], cumsum(grepl('Start$', names(d)[-1]))) %>%
  map_dfr(~set_names(., c('DateRangeStart','DateRangeEnd','Value'))) %>% 
  bind_cols(ID = rep(d$ID, nrow(.)/nrow(d)), .) 
```

**3）使用`sjmisc`-package：**

```
library(sjmisc)
to_long(d, keys = 'group',
        values = c('DateRangeStart','DateRangeEnd','Value'), 
        c('DateRange1Start','DateRange2Start','DateRange3Start'),
        c('DateRange1End','DateRange2End','DateRange3End'),
        c('Value1','Value2','Value3'))[,-2] 
```

* * *

如果您还想要一个组/时间列，您可以将上述方法调整为：

**1) 以 R 为底：**

```
l <- lapply(split.default(d[-1], cumsum(grepl('Start$', names(d)[-1]))),
            setNames, c('DateRangeStart','DateRangeEnd','Value'))
data.frame(ID = d[,1],
           group = rep(seq_along(l), each = nrow(d)),
           do.call(rbind, l), row.names = NULL) 
```

这使：

> ```
>  ID group DateRangeStart DateRangeEnd Value
> 1  1     1         1/1/90       3/1/90   4.4
> 2  2     1         1/2/90       3/2/90   6.1
> 3  1     2         4/5/91       6/7/91   6.2
> 4  2     2         4/6/91       6/8/91   3.2
> 5  1     3         5/5/95       6/6/96   3.3
> 6  2     3         5/5/97       6/6/98   1.3 
> ```

**2）与`tidyverse`：**

```
split.default(d[-1], cumsum(grepl('Start$', names(d)[-1]))) %>%
  map_dfr(~set_names(., c('DateRangeStart','DateRangeEnd','Value'))) %>% 
  bind_cols(ID = rep(d$ID, nrow(.)/nrow(d)),
            group = rep(1:(nrow(.)/nrow(d)), each = nrow(d)), .) 
```

**3）使用`sjmisc`-package：**

```
library(sjmisc)
to_long(d, keys = 'group', recode.key = TRUE,
        values = c('DateRangeStart','DateRangeEnd','Value'), 
        c('DateRange1Start','DateRange2Start','DateRange3Start'),
        c('DateRange1End','DateRange2End','DateRange3End'),
        c('Value1','Value2','Value3')) 
```

* * *

**使用数据：**

```
d <- read.table(text = "ID DateRange1Start DateRange1End Value1 DateRange2Start DateRange2End Value2 DateRange3Start DateRange3End Value3
1 1/1/90 3/1/90 4.4 4/5/91 6/7/91 6.2 5/5/95 6/6/96 3.3
2 1/2/90 3/2/90 6.1 4/6/91 6/8/91 3.2 5/5/97 6/6/98 1.3", header = TRUE, stringsAsFactors = FALSE) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-10T11:00:01.563

使用回收：

```
data.frame(ID = d[, 1],
           DateRangeStart = unlist(d[, -1][, c(TRUE, FALSE, FALSE)]),
           DateRangeEnd  = unlist(d[, -1][, c(FALSE, TRUE, FALSE)]),
           Value =  unlist(d[, -1][, c(FALSE, FALSE, TRUE)])) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-17T20:29:28.557

你不需要任何花哨的东西；基本`R`功能会做。

```
a <- read.table(textConnection("
ID DateRange1Start DateRange1End Value1 DateRange2Start DateRange2End Value2 DateRange3Start DateRange3End Value3
1 1/1/90 3/1/90 4.4 4/5/91 6/7/91 6.2 5/5/95 6/6/96 3.3 
"),header=TRUE)
b1 <- a[,c(1:4)]; b2 <- a[,c(1,5:7)]; b3 <- a[,c(1,8:10)]
colnames(b1) <- colnames(b2) <- colnames(b3) <- c("ID","DateRangeStart","DateRangeEnd","Value")
b <- rbind(b1,b2,b3) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-10T19:55:18.840

中的另一个解决方案[**`tidyverse`**](https://www.tidyverse.org/)，它利用[`names_pattern`](https://tidyr.tidyverse.org/reference/pivot_longer.html#arguments)了[`tidyr::pivot_longer()`](https://tidyr.tidyverse.org/reference/pivot_longer.html).

> `names_pattern`采用与 相同的规范[`extract()`](https://tidyr.tidyverse.org/reference/extract.html)，包含匹配组 ( `()`) 的正则表达式。

作为不需要初步字符串操作的单个命令，这可能会比[@hplieninger](https://stackoverflow.com/users/2563804)[的](https://stackoverflow.com/a/55262457)答案有所改进。

# 解决方案

```
library(tidyverse)

# ...
# Code to generate dataset 'ds'.
# ...

ds %>% pivot_longer(
  # Target only those columns names with a numeric index; possibly suffixed by "Start"
  # or "End".
  cols = matches("^(.*)(\\d+)(Start|End)?$"),
  # Break each name into its prefix, index, and suffix.
  names_pattern = "^(.*)(\\d+)(Start|End)?$",
  # Pivot by index and reassemble the other components.
  names_to = c(".value", "group_id", ".value")
) 
```

您可以进一步将代码简化为单行代码，如下所示

```
pivot_longer(ds, !ID, names_pattern = "^(.*)(\\d+)(Start|End)?$", names_to = c(".value", NA, ".value")) 
```

其中`!ID`仅将每一列（但`ID`）作为分组变量；并在示例输出中`NA`省略组索引 ( )。`group_id`

# 结果

给定一个`ds`喜欢你的样本数据集

```
ds <- structure(
  list(
    ID = 1L,
    DateRange1Start = structure(7305, class = "Date"), 
    DateRange1End = structure(7307, class = "Date"),
    Value1 = 4.4, 
    DateRange2Start = structure(7793, class = "Date"),
    DateRange2End = structure(7856, class = "Date"), 
    Value2 = 6.2,
    DateRange3Start = structure(9255, class = "Date"), 
    DateRange3End = structure(9653, class = "Date"),
    Value3 = 3.3
  ),
  row.names = c(NA, -1L),
  class = c("tbl_df", "tbl", "data.frame")
) 
```

该解决方案应产生以下结果

```
# A tibble: 3 x 5
     ID group_id DateRangeStart DateRangeEnd Value
  <int> <chr>    <date>         <date>       <dbl>
1     1 1        1990-01-01     1990-01-03     4.4
2     1 2        1991-05-04     1991-07-06     6.2
3     1 3        1995-05-05     1996-06-06     3.3 
```

或者对于简化的命令：

```
# A tibble: 3 x 4
     ID DateRangeStart DateRangeEnd Value
  <int> <date>         <date>       <dbl>
1     1 1990-01-01     1990-01-03     4.4
2     1 1991-05-04     1991-07-06     6.2
3     1 1995-05-05     1996-06-06     3.3 
```*

# tsql - T-SQL pulling multiple columns of data from a single column field

> ID：12466506
> 
> 赞同：-3
> 
> 时间：2012-09-17T20:18:17.230
> 
> 标签：tsql

I am trying to pull 3 columns of data from one field. basically i have a field with for arguments sake a table with the following data:

*   Color,
*   Model,
*   Year of a car.

It is itemized as `ID4` is Color, `ID5` is Model and `ID6` is Year. I can pull one data set with no problem using a filter, ex. Filter = 4, 5 or 6\. But I cannot pull multiples as I just get the headers and no data at all.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:53:57.007

假设您使用的是 SQL Server 2005+，并且您的问题实际上是“如何根据同一个表中的另一个字段将表中的一列分解为多个命名列”，这是一个以您的问题为模式的简单示例。

给出这个数据集：

```
declare @tbl table (id int, tag char(3), data varchar(255))

insert into @tbl values
(1, 'ID4', 'Red'), (1, 'ID5', 'Toyota'), (1, 'ID6', '1999'),
(2, 'ID4', 'Blue'), (2, 'ID5', 'Honda'), (2, 'ID6', '2000'),
(3, 'ID4', 'Green'), (3, 'ID5', 'Nissan'), (3, 'ID6', '2004'),
(4, 'ID4', 'Red'), (4, 'ID5', 'Nissan'), (4, 'ID6', '1990'),
(5, 'ID4', 'Black'), (5, 'ID5', 'Toyota'), (5, 'ID6', '2002') 
```

一个简单的`select`语句返回此数据：

```
select * from @tbl

id  tag  data
1   ID4  Red
1   ID5  Toyota
1   ID6  1999
2   ID4  Blue
2   ID5  Honda
2   ID6  2000
3   ID4  Green
3   ID5  Nissan
3   ID6  2004
4   ID4  Red
4   ID5  Nissan
4   ID6  1990
5   ID4  Black
5   ID5  Toyota
5   ID6  2002 
```

此`pivot`查询返回数据——每辆车一行——颜色、型号和年份作为它们自己的列：

```
select id, [ID4] as 'Color', [ID5] as 'Model', [ID6] as 'Year'
from (select id, tag, data from @tbl) as p
pivot (max(data) for tag in ([ID4], [ID5], [ID6])) as pvt
order by pvt.id 
```

这是输出的样子：

```
id  Color  Model   Year
1   Red    Toyota  1999
2   Blue   Honda   2000
3   Green  Nissan  2004
4   Red    Nissan  1990
5   Black  Toyota  2002 
```

# r - Increasing the plot area in ggplot to cope with geom_text at plot edges

> ID：12466514
> 
> 赞同：15
> 
> 时间：2012-09-17T20:19:00.337
> 
> 标签：r, plot

How do I increase the grey plot area of a chart with one factor based axis and one numerical axis so that text labels in `geom_text()` plots are in view and do not extend outside the plot area?

![ggplot showing geom_text() plot where labels extend outside the plot area](../Images/8b55779a93728ff5d0fc276c8a93874e.png)

In particular, I would like to extend the grey area to provide a margin area within the plot area that allows the text labels to appear in full.

Or is there a better way?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-22T13:42:07.710

您可以使用 更改每个 ggplot 的布局选项`ggplot_gtable`，然后使用 显示所有绘图`grid.arrange`。

```
library(ggplot2)
library(gridExtra)
## create a dummy ggplot
(g1 <- ggplot(mtcars, aes(wt, mpg)) + 
       geom_text(aes(label=rownames(mtcars)), size=6, angle=45) +
       theme(plot.margin = unit(rep(1, 4), "cm"))) 
```

显然，文本标签不会延伸到绘图区域之外。但是下面的代码只允许这样做：

```
gg_table <- ggplot_gtable(ggplot_build(g1))
gg_table$layout$clip[gg_table$layout$name=="panel"] <- "off"
grid.draw(gg_table) 
```

为每个面板创建一个 gg_table，然后用于`grid.arrange`显示所有：

```
grid.arrange(gg_table, gg_table, gg_table, gg_table, ncol=2) 
```

![在此处输入图像描述](../Images/ce4719740499f99123964ddef7073bfe.png)

我知道这是劳动密集型的，但您可以编写一个函数来创建多个 ggplots 和 gg_tables 以节省时间。

# rest - 使用 curl 与 REST API 交互 - 错误：“prolog 中不允许内容”

> ID：12466516
> 
> 赞同：1
> 
> 时间：2012-09-17T20:19:13.760
> 
> 标签：rest, curl

我从 Mac OSX 的终端发送以下 curl 命令：

```
curl -d "OPERATION_NAME=ADD_REQUEST&TECHNICIAN_KEY=1AD….4&INPUT_DATA=TestData.xml" http://xxx.xx.xx.xx/sdpapi/request/ 
```

我收到了回复：

执行时出现 FailedError - ADD_REQUEST - prolog 中不允许内容。

这是我的xml文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Operation>
<Details>
<requester>Me</requester>
<subject>Test</subject>
<description>Testing curl input</description>
</Details>
</Operation> 
```

我检查过，我的 xml 文件确实是一个 UTF-8 文件。我可以从谷歌搜索中看出，这很可能与我的编码有关，但是，我找不到解决方法。
我还尝试在我的电脑上将 xml 文件保存为 ANSI，xml 文件如下所示：

```
<?xml version="1.0"?>
<Operation>
<Details>
<requester>Me</requester>
<subject>Test</subject>
<description>Testing curl input</description>
</Details>
</Operation> 
```

我下载了 Notepad++ 并检查了编码，它是没有 BOM 的 UTF8。

我仍然遇到同样的错误。谁能看到我做错了什么？

更新 9/19 添加：
除了我在下面的评论中尝试过的所有内容之外，我还尝试过这个：

```
curl -d "OPERATION_NAME=ADD_REQUEST&TECHNICIAN_KEY=xxxxxxxxxxxxxxxxx&INPUT_DATA=<?xml version="1.0" encoding="utf-8"?><Operation><Details><requester>Me</requester><subject>Test</subject><description>Testing curl input</description></Details></Operation>" http://xxx.xx.xx.xx/sdpapi/request/ 
```

我现在得到的错误是：“执行时出错 - ADD_REQUEST - XML 声明中“版本”后面的值必须是带引号的字符串。”

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T18:36:36.503

我替换 `<?xml version="1.0" encoding="utf-8"?>`为 `<?xml version=%221.0%22 encoding=%22utf-8%22?>`

它现在正在工作。

# jquery - Two separated horizontal windows

> ID：12466517
> 
> 赞同：0
> 
> 时间：2012-09-17T20:19:14.960
> 
> 标签：jquery, html, css

I would like to build the two separated horizontal windows, which could be resized. It should all looks like this:

![enter image description here](../Images/775c39ffc5aff05f656df4381ca5ed30.png)

And by using the line where those two arrows are placed at I should be able to resize each windows. Just like it is done at `jsfiddle.net` but with the difference that there are 4 windows, and I want 2 horizontals.

Anyone has an idea how to do something like that? I dont really know how to name it properly , so I could find anything with sense at google.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:24:54.557

你可以试试[jQuery 布局](http://layout.jquery-dev.net/)插件。这是一个简单的演示：[小链接](http://layout.jquery-dev.net/demos/simple.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:23:04.530

[http://methvin.com/splitter/](http://methvin.com/splitter/)

看看这个 jQuery 插件，我用它来做与你描述的类似的布局。

# c++ - How to find indexes of 5 the biggest elements in vector?

> ID：12466519
> 
> 赞同：7
> 
> 时间：2012-09-17T20:19:40.437
> 
> 标签：c++, stl

How to find indexes of 5 the biggest elements in vector ? For example `std::vector<int>` how to find indexes of 5 biggest values but not to change original vector ?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-18T11:41:20.917

`std::partial_sort( v.begin(), v.begin()+5, v.end() )`以某种方式对向量进行排序，即 5 个最小值被排序并且位于`v`. 其余的未排序。

由于您需要索引并保留原始索引：
用 0..n-1 中的数字填充一个新向量并提供一个比较函数，`v[a] > v[b]`而不是`a > b`：

```
struct Comp{
    Comp( const vector<int>& v ) : _v(v) {}
    bool operator ()(int a, int b) { return _v[a] > _v[b]; }
    const vector<int>& _v;
}

vector<int> vx;
vx.resize(v.size());
for( int i= 0; i<v.size(); ++i ) vx[i]= i;
partial_sort( vx.begin(), vx.begin()+5, vx.end(), Comp(v) ); 
```

`vx[0..4]`包含索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:27:26.770

您可以从原始向量制作副本，并使用 STL 中的专用算法对其进行部分排序`nth_element`：

```
bool cmp (int i,int j) { return (i<j); }    
int main () {
      vector<int> myvector;
      vector<int>::iterator it;

      // set some values:
      for (int i=1; i<10; i++) myvector.push_back(i);   // 1 2 3 4 5 6 7 8 9

      random_shuffle (myvector.begin(), myvector.end());

      // using default comparison (operator <):
      std::vector<int> copy_of_orig = myvector;
      nth_element (copy_of_orig.begin(), copy_of_orig.begin()+5, copy_of_orig.end(), cmp);
      // Display the first five biggest elts.
      for (int i = 0; i < 5; ++i)
        std::cout << copy_of_orig[i] << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T20:29:36.480

1个解决方案：

解决方案是 O(n)，其中 n 是正在检查的向量中的元素数。

创建一个长度为 5 的向量迭代器的出队，初始化为 NULL 读取正在检查的向量的元素并 push_back 索引{想法是根据读取的新元素数据是否小于将新索引推到前面或后面后索引的数据或大于前索引的数据，如果出队中的数据已经为NULL，那么无论你是push_front还是push_back，都没有关系}。这将保持从前到后排序的出队。

如果正在读取的新数据大于前面的数据，则移除后面，将当前数据的迭代器推到前面；否则什么都不做

在迭代结束时，出队将拥有前五个元素的迭代器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T20:30:39.970

可能有一种更优雅的方式，但我现在很难找到它。你可以做这样的事情（未经测试，所以不能保证它开箱即用，特别是在极端情况下，但它应该）：

```
std::array<int, 5> indices = {-1,-1,-1,-1,-1};//-1 used as invalid index for cases where myVec.size()<5
for(int i = 0; i < myVec.size(); ++i)
{
    for(int j = 0; j < 5; ++j)
        if((indices[j] == - 1) || (myVec[i] > myVec[indices[j]]))
        {
            std::copy_backward(indices.begin() + j, indices.end() - 1, indices.end());
            indices[j] = i;
            break;
        }
} 
```

它维护了 5 个最大元素的列表。对于向量的每个元素，它将从最大元素开始，测试新元素是否更大，如果是，则将索引向下移动并作为第一个插入，否则测试第二大元素，依此类推。不修改`vector`并`O(n)`以相当低的开销运行。

如果你不能使用 C++11，你总是可以使用`std::vector`（或者`int[5]`如果你真的想要）而不是`std::array`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T20:34:32.623

您将需要执行以下操作：

```
 int largestNumbers [5]{0, 0, 0, 0, 0};

  for each( const int i in data ){
  {
    for (int index = 0; index < 5; index++){
       if (i > largestNumber[index]){
          largestNumber[index] = i;
       }
     }
  } 
```

# visual-studio - dotCover 控制台运行程序中属性过滤器的正确语法是什么？

> ID：12466521
> 
> 赞同：1
> 
> 时间：2012-09-17T20:19:53.253
> 
> 标签：visual-studio, dotcover

从 dotCover 2.0 开始，支持属性过滤器。这基本上允许您从覆盖率报告中排除任何标有特定过滤器的代码。对于这种用法，有很好的文档，特别是在 TeamCity 文档中，它们涵盖了与 dotCover 的集成。

那里使用的基本语法分别是`-:myAttributeName`或`-:module=myModuleName;myAttributeName`排除模块内的属性或属性。这在传递给 dotCover 控制台运行程序时不起作用。覆盖率报告仍然显示排除的代码。

dotCover 是否支持其控制台中的属性过滤器（我假设是因为 TeamCity 基本上只是将参数传递给控制台运行器）并且是否有适用于它的已知语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:55:15.377

dotCover 控制台运行程序和 TeamCity 中的属性过滤器规范略有不同。在 dotCover 中，您可以使用以下命令行键： `/AttributeFilters=ARG`

ARG 具有以下语法：`attribute1;[module]attribute2;...` 其中“attribute”是完全限定的属性类型名称（支持星号通配符 (*)），“module”是一个可选参数，它指定定义属性的程序集的名称。

# php - 带有字符串插值的预处理语句因语法错误而失败

> ID：12466523
> 
> 赞同：0
> 
> 时间：2012-09-17T20:19:58.633
> 
> 标签：php, postgresql, prepared-statement

我正在尝试使用准备好的语句来使用 PHP 和 Postgres 进行简单的插入。到目前为止，我已经这样做了：

```
<?php
$conn_string = "host=localhost port=5432"; // plus us/pw
$dbconn = pg_connect($conn_string); 

$table  = 'business_primary_category';
$column = 'primary_category';
$tag = 'restuarant';

// Prepare a query for execution
$result = pg_prepare($dbconn, "my_query", 'SELECT * FROM $table WHERE $column = $1');

// Execute the prepared query.  Note that it is not necessary to escape
// the string "Joe's Widgets" in any way
$result = pg_execute($dbconn, "my_query", array("$tag"));

?> 
```

我基本上是从 php.net 上的页面中获取的，并且无法弄清楚我做错了什么。我是否需要安装一个库才能使用它或其他东西。谢谢！

这些是我得到的错误：

```
Warning: pg_prepare() [function.pg-prepare]: Query failed: ERROR: syntax error at or near "$" at character 15 in /home/url    **......**   pdo.php on line 11

Warning: pg_execute() [function.pg-execute]: Query failed: ERROR: prepared statement "my_query" does not exist in /home/url    **......**   pdo.php on line 15

Warning: pg_execute() [function.pg-execute]: Query failed: ERROR: prepared statement "my_query" does not exist in /home/url    **......**   pdo.php on line 18 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:23:00.887

如果要对变量进行插值，则需要使用双引号；否则 PHP 将其视为字符串文字。尝试：

```
$result = pg_prepare($dbconn, "my_query", "SELECT * FROM $table WHERE $column = $1"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T20:22:33.650

跳出来的第一件事......在 . 上使用双引号`'SELECT * FROM $table WHERE $column = $1'`。

# asp.net-mvc - Razor 和 Javascript 方法调用

> ID：12466526
> 
> 赞同：1
> 
> 时间：2012-09-17T20:20:03.027
> 
> 标签：asp.net-mvc, razor

我有这条剃刀线，编辑器显示语法错误，但在运行时运行良好。

```
<script>app.addCalendar(@Html.Raw(Model.CurrentDetailsJson), @Model.Shift.Id);</script> 
```

![语法错误](../Images/a799f75f5c625c53c23b41050eae48eb.png)

写那行的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:21:28.160

> 写那行的正确方法是什么？

你写的方式。你可以放心地忽略 Visual Studio 的 Intellisense 的愚蠢之处，并希望微软有一天会改进它。在那一天到来之前，请对您编写的代码充满信心，并停止相信自动化工具告诉您的内容。

# hadoop - million of map outputs for one map input. is it efficient?

> ID：12466527
> 
> 赞同：0
> 
> 时间：2012-09-17T20:20:05.273
> 
> 标签：hadoop, mapreduce

so, what I do is, I map a text file as a whole record (wholefileinputformat), do some processing, then write the output line by line with context.write. The problem is, it turns out to be not efficient at all. One map task produces several millions of outputs and I get Heap Memory error. Is there any other way of doing this?

```
 map-input(file_name, file_contents_as_Text)  
   String output = process(file_contents)   
   for(each line in output)   
        context.write(line, some_value) 
```

# java - XML Parsing from an input stream Java

> ID：12466529
> 
> 赞同：2
> 
> 时间：2012-09-17T20:20:31.733
> 
> 标签：java, xml, parsing, jdom

Hi everyone am currently working on an application that needs to parse an xml document so as to authenticate users.Am using URLConnection class of the java.net.* package to connect to as specific URL which gives an returns its response in xml format. When i try to parse the document using jdom , i get the following error:
`org.jdom2.input.JDOMParseException: Error on line 1: Premature end of file`

Can anyone pinpoint the problem and assist me with a remedy? thanks, here is a section of my code

```
try {
  String ivyString = "http://kabugi.hereiam.com/?username=" + ivyUsername + "&password=" + ivyPassword;

  URL authenticateURL = new URL(ivyString);
  URLConnection ivyConnection = authenticateURL.openConnection();
  HttpURLConnection ivyHttp = (HttpURLConnection) ivyConnection;
  System.out.println("Response code ==>" + ivyHttp.getResponseCode());
  if (ivyHttp.getResponseCode() != 200) {
    ctx.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Invalid username or password!", ""));
    page = "confirm.xhtml";
  } else {
    BufferedReader inputReader = new BufferedReader(new InputStreamReader(ivyConnection.getInputStream()));
    String inline = "";
    while ((inline = inputReader.readLine()) != null) {
      System.out.println(inline);
    }
    SAXBuilder builder = new SAXBuilder();

    Document document = (Document) builder.build(ivyConnection.getInputStream());
    Element rootNode = document.getRootElement();
    List list = rootNode.getChildren("data");
    for (int i = 0; i < list.size(); i++) {
      Element node = (Element) list.get(i);
      System.out.println("Element data ==>" + node.getChildText("username"));
      System.out.println("Element data ==>" + node.getChildText("password"));

    }

    page = "home.xhtml";
  }
} catch (Exception ex) {
  ex.printStackTrace();
  // ctx.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Invalid username or password!", ""));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T01:52:17.573

看起来像它，因为您正在读取输入流两次。一次打印，然后构建文档。当您构建 Document 对象时，输入流已经被完全读取并在其末尾。尝试以下代码，它只读取一次流

```
 BufferedReader inputReader = new BufferedReader(new InputStreamReader(ivyConnection.getInputStream()));
        StringBuilder sb = new StringBuilder();
        String inline = "";
        while ((inline = inputReader.readLine()) != null) {
          sb.append(inline);
        }

        System.out.println(sb.toString());
        SAXBuilder builder = new SAXBuilder();

        Document document = (Document) builder.build(new ByteArrayInputStream(sb.toString().getBytes())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:29:00.330

我以前遇到过类似的问题。如果它是未压缩的 HTTP 连接，您可以使用 Wireshark 跟踪数据包。您可能会发现在 XML 响应数据的开头有一个意外的 XML BOM 标头（其他问题）。例如，如果您使用的 HTTP 库不支持 http 分块或 xml 编码错误，则可能会发生这种情况。

在您使用数据包嗅探器分析流量并识别 BOM 标头（或缺少 BOM 标头）之前，我们不会知道。在任何情况下，如果出现问题，您可以破解流来解释 BOM 标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T07:11:22.423

使用 sax 解析，您可以阅读`inputstream`.

```
SAXParserFactory spf = SAXParserFactory.newInstance();
SAXParser sp = spf.newSAXParser();
ParseCustomer parseEventsHandler=new ParseCustomer();
sp.parse(ivyHttp.getInputStream(),parseEventsHandler); 
```

这`ParseCustomer`是将读取 xml 的解析类。给定样本是：

```
class ParseCustomer extends DefaultHandler{
    @Override
    public void startDocument() throws SAXException {

        super.startDocument();
    }
    @Override
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {

        super.startElement(uri, localName, qName, attributes);//enter code here
        if (qName.equals("frameit")) {
            // compare element name and get value/ for further help read saxparser
            orderId=atts.getValue("orderId");
        }
        System.out.println(qName);

    }

    @Override
    public void endElement(String uri, String localName, String qName)
        throws SAXException {

        super.endElement(uri, localName, qName);
    }

    @Override
    public void characters(char[] ch, int start, int length)
        throws SAXException {

        super.characters(ch, start, length);
    }

} 
```

# linux - Linux 命令行与 Linux 命令管道

> ID：12466531
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:20:37.537
> 
> 标签：linux

想知道是否有人可以告诉我这两者之间有什么区别。在网上似乎无法给出确切的答案。命令行对我来说意味着输入线和管道是输出？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:22:44.000

命令管道是指将一个命令的输出与另一个命令的输入连接起来：

```
$ cat myfile | sort 
```

是一个简单的例子

linux 命令行只是指 shell 提示符。

# c++ - 为什么 std::vector::erase 不重载以采用整数索引？

> ID：12466535
> 
> 赞同：3
> 
> 时间：2012-09-17T20:20:51.763
> 
> 标签：c++, stl, stdvector

`std::vector::erase`将接受一个表示要删除的元素位置的迭代器，或两个表示范围的迭代器。但你不能这样做：

```
std::vector<int> vec = { 1, 2, 3 };
vec.erase(1); 
```

相反，你必须做类似的事情

```
vec.erase( vec.begin()+1 ); 
```

这似乎是不必要的额外工作——只是想知道，类设计的 POV 是否有某些原因为什么不包含此重载？

**编辑**：选择最全面的答案，一切都很好。同样在我写这篇文章时，这篇文章有 4 票“不具建设性”；但是，鉴于答案的质量，我认为这显然是一个有用的问题，当然对我来说。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:31:21.090

我的理解是 stl 想要将 indeces 和整数分开，因为它们不是同一个东西（语义上）：如果你想做算术使用整数，如果你想访问 stl 容器中的元素使用迭代器。它还提供抽象：通常整数可以用作索引，有时它没有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T21:12:46.940

想象一下，如果你有

```
typedef std::set<int> MyContainer
MyContainer c;
// ...
c.erase(5);  // Or a programmatic int 
```

现在，如果您突然更改MyContainer 的底层容器（通过更新`typedef`），您的语义含义已经完全改变并且仍然可以编译！我想不出任何其他情况，容器类型的如此简单更改会导致如此不同的行为。`vector``erase`

为避免这种情况，`erase`只有值或迭代器输入，从不索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T21:23:25.313

我能想到的原因有两个：

1)`erase`是容器的常用成员函数。使用索引仅对某些容器有意义，因此通过使用迭代器，您不必担心正在处理的容器类型。例如，索引只对随机访问容器有意义，通过使用迭代器可以让你的代码更加灵活，等等。

2)`erase`与标准算法如`std::remove`, `std::remove_if`,`std::unique`等配合良好。更常见的是希望基于某些谓词等擦除元素，而不是硬编码索引号。查找“erase-remove idiom”以获取更多信息。

基本上，由于许多原因，迭代器被认为优于索引，并且您将看到它在 C++ 标准库中被广泛使用。如果有意义的话，索引是为模拟数组访问提供的。

# ios - 游戏在 iOS 4.3 上运行良好，但在 iOS 5 上 glDrawArrays 上崩溃

> ID：12466539
> 
> 赞同：2
> 
> 时间：2012-09-17T20:21:10.157
> 
> 标签：ios, opengl-es, exc-bad-access

一年前我开发了一款 iPhone 游戏，并决定从我离开的地方继续。因此，我下载了在 Mac OS X 10.7.4 上运行的最新版本的 Xcode (4.4.1)，并使用 iOS 5.1 SDK（为 iOS 4.0 构建）构建了我的游戏，并在 iOS 5.1 的模拟器中运行它。 .. 它在第一次 glDrawArrays() 调用时崩溃。

所以我觉得这很奇怪，因为当我上次处理它时它运行得非常好。然后我尝试在 iOS 4.3 上运行，它运行良好！原来它从iOS崩溃。5.0 及以上。我还尝试构建更高的目标操作系统版本，但这没有任何区别。

应用程序在 glDrawArrays 执行的 gleRunVertexSubmitImmediate 调用（带有 EXC_BAD_ACCESS 消息，地址 0x0）时崩溃。在第一次 glDrawArrays 调用时它总是出错，因为如果我评论第一个，它运行良好（黑屏），直到我启动应该是第二次 glDrawArrays 调用并且它再次崩溃。

对加载的数组（纹理指针、顶点、gl 上下文）进行了一些检查，但我找不到任何空引用。在启用僵尸的情况下运行不会为我提供更多信息。

我想知道是否有人遇到过同样的问题或知道是什么原因造成的。

编辑：代码示例是请求。它发生在 Apple 发布的 GLTexture.m (v1.7) 中，因为这是代码中调用 glDrawArrays 的第一个点。

```
- (void) drawInRect:(CGRect)rect
{
    CLogGL();
    GLfloat  coordinates[] = {  0,      _maxT,
                                _maxS,  _maxT,
                                0,      0,
                                _maxS,  0  };
    GLfloat vertices[] = {  rect.origin.x,                          rect.origin.y,                          0.0,
                            rect.origin.x + rect.size.width,        rect.origin.y,                          0.0,
                            rect.origin.x,                          rect.origin.y + rect.size.height,       0.0,
                            rect.origin.x + rect.size.width,        rect.origin.y + rect.size.height,       0.0 };

    glBindTexture(GL_TEXTURE_2D, _name);
    glVertexPointer(3, GL_FLOAT, 0, vertices);
    glTexCoordPointer(2, GL_FLOAT, 0, coordinates);
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);  // Crash happens here
} 
```

编辑：堆栈跟踪的屏幕截图： [stacktrace1.jpg](https://www.dropbox.com/s/v9wj437evsgbzrv/stacktrace1.jpg) [stacktrace2.jpg](https://www.dropbox.com/s/04vgjsvci4bzy8i/stacktrace2.jpg) [stacktrace3.jpg](https://www.dropbox.com/s/rg3t1b2o9zhz7zg/stacktrace3.jpg)

编辑：似乎它也在 4.2.2 上崩溃（在我的 iPod touch 上），但在 4.3 模拟器中仍然运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:14:38.880

也许您的 normal_array 或 color_array 在某处启用。尝试禁用它们：

```
glDisableClientState(GL_COLOR_ARRAY);
glDisableClientState(GL_NORMAL_ARRAY); 
```

如果它们已启用但未设置 glDrawArrays 将崩溃

# css - Is the hash necessary in svg font-face declarations?

> ID：12466540
> 
> 赞同：20
> 
> 时间：2012-09-17T20:21:11.220
> 
> 标签：css, svg, font-face

```
@font-face
  font-family: 'AllerRegular'
  src: url('/fonts/aller/aller_rg-webfont.eot')
  src: url('/fonts/aller/aller_rg-webfont.eot?#iefix') format('embedded-opentype'), url('/fonts/aller/aller_rg-webfont.woff') format('woff'), url('/fonts/aller/aller_rg-webfont.ttf') format('truetype'), url('/fonts/aller/aller_rg-webfont.svg#AllerRegular') format('svg')
  font-weight: normal
  font-style: normal 
```

In the example above, I'm adding an svg version of this font but I'm not sure the ID is correct. If there is only one font included in this SVG is it necessary to have the correct id?

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-17T20:37:46.463

是的，这是必需的。[这篇文章](https://web.archive.org/web/20150102141618/http://www.fluorcow.com/embedding-fonts-on-a-website)说：

> 在上面的 CSS 代码中，您实际上可以看到 SVG 版本在文件名声明中的井号 (#) 之后需要一个额外的信息，即其 ID。如果您不填写它就不起作用，因此您需要在 TXT 文档或记事本中打开 SVG 文件找到此信息，然后在页面顶部附近查找以下行。

[这个](http://www.electrictoolbox.com/download-embed-fonts-font-face/)说：

> 对于 SVG 字体，它们还需要一个#hashtag；

hashtag 只是一个指向 SVG 内定义的字体 ID 的指针。如果不包含它，将加载整个 SVG 文件，包括阻止字体被识别的 SVG 标头。

# validation - MVC4 RequiredIf not showing as IsRequired in ModelMetaData

> ID：12466546
> 
> 赞同：0
> 
> 时间：2012-09-17T20:21:34.930
> 
> 标签：validation, asp.net-mvc-4, metadata, requiredfieldvalidator

I have some validation meta data on my model:

```
 [RequiredIf("IsNewCustomer", true, ErrorMessage="Tax ID is missing")]
    public string TaxIDNumber { get; set; } 
```

I also have the standard LabelHelper code to put asterisks next to any required field.

```
 if (displayOptions == DisplayOptions.ShowRequired && metadata.IsRequired )
        {
            //... add span html
        } 
```

If the metadata tag is [Required] this code works fine. However if I use RequiredIf or RequiredIfTrue, the isRequired property is always set to false. The validation still works, on submit however. The modelstate is invalid and the error message is displayed.

I have tried to create a custom override to the DataAnnotationsModelMetadataProvider:

```
 protected override ModelMetadata CreateMetadata(System.Collections.Generic.IEnumerable<Attribute> attributes, Type containerType, Func<object> modelAccessor, Type modelType, string propertyName)
    {
        var _default = base.CreateMetadata(attributes, containerType, modelAccessor,                       modelType, propertyName);
        _default.IsRequired = attributes.Where(x => x is RequiredAttribute).Count() > 0;
        return _default;
    } 
```

However none of this code runs until the validation piece is called, so the metadata is not updated until the form attempts to post.

Any ideas how to update the metadata on dynamic required tags as the page loads so my required field indicators still work?

# windows-8 - Snap view not functioning properly?

> ID：12466547
> 
> 赞同：0
> 
> 时间：2012-09-17T20:21:46.100
> 
> 标签：windows-8, winrt-xaml, viewbox

I coded an app in windows 8 consumer preview and i was not aware of view box, so the app doesn't fit for particular resolutions then i used view box to make the app fit for all the available resolutions, after i ported the app to windows 8 release preview. After i used view box, snap view is not functioning properly. But i'm sure that snap was working fine before i used viewbox. i am unable to find the bug. xaml of the page:

`

```
<Viewbox HorizontalAlignment="Left" VerticalAlignment="Top" >

<Grid x:Name="RootGrid" Background="#FF14B01B" Height="768" Width="1366">

    <!-- Snap view title grid. -->
        <Grid x:Name="SnapViewTitleGrid" Visibility="Collapsed" Height="140" VerticalAlignment="Top" MinHeight="140">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <Button x:Name="backButton3" Click="GoBack"
                IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}"
                Style="{StaticResource SnappedBackButtonStyle}"
                Grid.Row="0"
                HorizontalAlignment="Left"
                VerticalAlignment="Bottom"
                Margin="10,0,0,0"
                Grid.ColumnSpan="2"/>

            <TextBlock x:Name="snappageTitle"
                Text="{StaticResource AppName}"
                FontSize="26.667"
                FontWeight="Bold"
                HorizontalAlignment="Left"
                Margin="10,0,0,0"
                Grid.Row="1"
                Grid.Column="0" />
            <Image x:Name="snapmyLogo"
                Source="images/Logo.png"
                Stretch="Fill"
                Grid.Row="1"
                Grid.Column="1"
                Width="37"
                Height="38"
                Margin="0,0,10,0"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"/>

            <TextBlock x:Name="snapsubtitle"
                HorizontalAlignment="Left"
                Grid.Row="2"
                Grid.ColumnSpan="2"
                TextWrapping="Wrap"
                Text="Learn your alphabets"
                VerticalAlignment="Top"
                Margin="10,0,0,0"
                Width="275"
                FontSize="20.667" />
        </Grid>

        <!-- Snap view content grid. -->
        <Grid x:Name="SnapViewContentGrid" Grid.Row="1" Margin="0,0,0,-24" Height="760" Visibility="Collapsed"  VerticalAlignment="Bottom">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Image box. -->
            <Grid x:Name="ImageGrid2"
                Grid.Row="0"
                Background="#FF08635E">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Image x:Name="imgAlpha2"
                    Source="images/A.png"
                    Margin="5,0,5,0"
                    Grid.Row="0" Height="513" />
                <TextBlock x:Name="txtFor2"
                    Grid.Row="1"
                    Margin="5,0,5,10"
                    TextWrapping="Wrap"
                    Text="for APPLE"
                    FontSize="40"
                    FontFamily="Segoe UI" />
            </Grid>

            <!-- Play button -->
            <Image Grid.Row="1"
                Source="images/Play-01.png"
                Width="42" Height="41"
                Margin="0,0,5,10"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                />
        </Grid>

        <!-- Back button and page title -->
        <Grid x:Name="TitleGrid" Margin="1,4,-1,624" Grid.RowSpan="2" Visibility="Visible">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button x:Name="backButton"  Style="{StaticResource BackButtonStyle}" Click="backButton_Click"/>
            <TextBlock x:Name="pageTitle"
                Grid.Column="1"
                Text="{StaticResource AppName}"
                Style="{StaticResource PageHeaderTextStyle}" 
                Margin="0,0,40,50"
                Foreground="White" />
            <TextBlock x:Name="subtitle"
                Grid.Column="1"
                HorizontalAlignment="Left"
                Height="50"
                Margin="0,105,0,-15"
                TextWrapping="Wrap"
                Text="Learn to write the alphabet"
                VerticalAlignment="Top"
                Width="333"
                FontSize="26.667" />
            <Image x:Name="myLogo"
                Grid.Column="1"
                Margin="0,60,60,0"
                Source="images/Logo.png"
                Stretch="Fill"
                Width="74"
                Height="76"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"/>
        </Grid>

        <ScrollViewer x:Name="myScroll" 
            HorizontalAlignment="Left" 
            VerticalAlignment="Top" 
            VerticalScrollBarVisibility="Hidden" 
            HorizontalScrollBarVisibility="Auto" Margin="-7.257,135.551,0,-2.552" Grid.RowSpan="2" Visibility="Visible"  >

            <Grid x:Name="Allcontent" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="120,20,35,35">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="2*" />
                </Grid.ColumnDefinitions>

                <!-- Image box on the left. -->
                <Grid x:Name="ImageGrid"
                    Grid.Column="0"
                    Background="#FF08635E" Margin="3.056,0,6.944,10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Image x:Name="imgAlpha"
                        Source="images/A.png"
                        Grid.Row="0" Margin="0"/>
                    <TextBlock x:Name="txtFor"
                        Grid.Row="1"
                        TextWrapping="Wrap"
                        Text="for APPLE"
                        FontSize="80"
                        Margin="0"
                        FontFamily="Segoe UI"/>
                </Grid>
                <Grid x:Name="TraceGrid"
                    Grid.Column="1" Margin="46.662,0,-46.662,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="10*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <!-- Play button -->
                    <Image x:Name="playB" Grid.Row="0" Grid.Column="0"
                        Source="images/play.png"
                        Width="42" Height="41"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Top"
                        ToolTipService.ToolTip="Play it!" PointerPressed="playB_PointerPressed" />

                    <!-- Help text -->
                    <TextBlock Text="Practice tracing the letter here"
                        Grid.Row="0" Grid.Column="1"
                        FontSize="24" Margin="134.5,8" d:LayoutOverrides="Width, Height"/>

                    <!-- Color palette -->
                    <Grid x:Name="colorsPanel"
                        Grid.Row="0" Grid.Column="1"
                        ToolTipService.ToolTip="Choose a Color" Margin="566,0,43,0" RenderTransformOrigin="0.5,0.5" Grid.ColumnSpan="2">
                        <Grid.RenderTransform>
                            <CompositeTransform ScaleX="-1"/>
                        </Grid.RenderTransform>
                        <Grid x:Name="orangeGrid" Height="35" Width="39"  HorizontalAlignment="Center" VerticalAlignment="Center" Margin="86,-1.5,-86,11.5" PointerPressed="orangeGrid_PointerPressed"  Background="#FFF1BC2D"  />
                        <Grid x:Name="redGrid" Height="35" Width="39" HorizontalAlignment="Center" VerticalAlignment="Center" Background="#FFF51111" Margin="101.5,-1.5,18.5,11.5" PointerPressed="redGrid_PointerPressed"/>
                        <Grid x:Name="blueGrid" Height="35" Width="39" HorizontalAlignment="Center" VerticalAlignment="Center" Background="#FF1E27DE" Margin="-1,-1.5,1,11.5" PointerPressed="blueGrid_PointerPressed"/>
                        <Grid x:Name="greenGrid" Height="35" Width="39" HorizontalAlignment="Center" VerticalAlignment="Center" Background="#FF158B2B" Margin="-44.5,-1.5,44.5,11.5" PointerPressed="greenGrid_PointerPressed"/>
                    </Grid>

                    <!-- Grid with big background text and validate/clear buttons -->
                    <Grid Grid.Row="1" Grid.ColumnSpan="3" Margin="0,10,10,10" HorizontalAlignment="Center" VerticalAlignment="Center" >
                        <!-- Big background text + Ink Grid -->

                        <TextBlock x:Name="bgmtxt"
                            Text="A"
                            Grid.Column="0"
                            FontSize="400"
                            FontFamily="Segoe UI"
                            FontStretch="Undefined"
                            FontWeight="ExtraBold"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            TextWrapping="Wrap" Height="523" Margin="267,10,96.111,0" Width="436.889" />
                        <Grid x:Name="InkGrid"
                            Grid.Column="0"
                            HorizontalAlignment="Stretch"
                            Background="#FFE6E6E6"
                            Opacity="0.5"
                            Canvas.ZIndex="49"
                            Margin="0,0,10,10" Height="523" Width="787" PointerPressed="InkGrid_PointerPressed" PointerMoved="InkGrid_PointerMoved" PointerReleased="InkGrid_PointerReleased" PointerExited="InkGrid_PointerExited" />

                    </Grid>
                </Grid>
            </Grid>
        </ScrollViewer>

        <MediaElement x:Name="myMedia" HorizontalAlignment="Left" Height="0" Margin="600,53,0,0" Grid.Row="1" VerticalAlignment="Top" Width="0" RenderTransformOrigin="0.5,0.5" IsTapEnabled="False" IsRightTapEnabled="False" IsHoldingEnabled="False" AutoPlay="True">
            <MediaElement.RenderTransform>
                <CompositeTransform ScaleX="-1"/>
            </MediaElement.RenderTransform>
        </MediaElement>

    </Grid>

    <VisualStateManager.VisualStateGroups>
        <!-- Visual states reflect the application's view state -->
        <VisualStateGroup>
            <VisualState x:Name="FullScreenLandscape"/>
            <VisualState x:Name="Filled"/>

            <!-- The entire page respects the narrower 100-pixel margin convention for portrait -->
            <VisualState x:Name="FullScreenPortrait" />

            <!-- The back button and title have different styles when snapped -->
            <VisualState x:Name="Snapped">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="myScroll" Storyboard.TargetProperty="Visibility">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="TitleGrid" Storyboard.TargetProperty="Visibility">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
                    </ObjectAnimationUsingKeyFrames>
                    <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="AppBar" Storyboard.TargetProperty="Visibility">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
                    </ObjectAnimationUsingKeyFrames>-->

                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SnapViewTitleGrid" Storyboard.TargetProperty="Visibility">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SnapViewContentGrid" Storyboard.TargetProperty="Visibility">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>

</Viewbox>

<Page.BottomAppBar>
    <AppBar x:Name="AppBar" >

        <Grid>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Width="221.556" Margin="0,0,4.417,0" >
                <Button x:Name="ValidateB"                                   
                                VerticalAlignment="Stretch" Click="ValidateB_Click" Width="92" BorderThickness="0" Style="{StaticResource AppBarButtonStyle}"    >
                    <Button.Content>
                        <Image Source="images/validate.png" ></Image>
                    </Button.Content>

                </Button>
                <Button x:Name="ClearB"
                                VerticalAlignment="Stretch" Click="ClearB_Click" HorizontalAlignment="Right" Width="103" Margin="34,0,0,0" BorderThickness="0" Style="{StaticResource AppBarButtonStyle}"   >
                    <Button.Content>
                        <Image Source="images/clear.png" ></Image>
                    </Button.Content>
                </Button>

            </StackPanel>
        </Grid>
    </AppBar>

</Page.BottomAppBar> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:37:09.420

终于找到了解决办法。如果使用 View Box，将使页面适合模拟器支持的所有分辨率，但会影响快照视图。修复快照视图。
* 为快照视图创建专用页面。
* 检查应用程序是否处于快照视图中。如果是，则导航到另一个专门用于快照视图的页面。
* 要取消捕捉，请处理捕捉视图页面的 windowssizechanged 事件。[如果应用程序处于非快照视图或填充视图（横向或纵向）。导航到原始页面。]

# c# - MVC 4从控制器重定向到外部页面

> ID：12466563
> 
> 赞同：2
> 
> 时间：2012-09-17T20:23:08.400
> 
> 标签：c#, .net, asp.net-mvc-4

我有一个使用多个 ASP .Net Web 窗体项目的现有网站。我创建了一个 MVC 4 移动 Web 应用程序来替换登录/授权 Web 表单项目。

到目前为止，我已经能够替换站点的所有功能，除了我无法从控制器内部重定向到 ASP .Net 页面。

使用这种方法，我可以毫无问题地访问同一网站上的其他 MVC 应用程序：

```
return Redirect("MyURLstring"); 
```

但是，当我重定向到 Web 表单页面时，我收到了几个 JS 错误，并且页面永远不会重定向。看起来 MVC 应用程序正在尝试将 JQuery 1.7.1 应用于正在打开的 URL。

如果我在视图的超链接中包含 rel="external" 标记，我可以无错误地访问 URL。

我还尝试通过在 RouteConfig.cs 文件中创建路由来解决此问题

```
RouteValueDictionary RouteValues = new RouteValueDictionary();
RouteValues["rel"] = "external";
return RedirectToRoute("MyRouteName", RouteValues); 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:02:56.783

解决方案：

我将该项目创建为一个 MVC 4 Mobile 站点作为基础，但在我的主 _Layout 视图中仍然有对 jQuery Mobile 的引用。

```
@Scripts.Render("~/bundles/jquery", "~/bundles/jquerymobile", "~/bundles/jquerycustom") 
```

我为我的 _Layout.Mobile.cstml 视图保留了此代码，但为 _Layout.cshtml 更改为下面

```
@Scripts.Render("~/bundles/jquery", "~/bundles/jquerycustom") 
```

这允许我执行 return Redirect("myURL"); 从控制器中跳出阻止重定向的所有 jQuery。

# perl - 使用存储在 Perl 中的数组散列中的键对散列进行切片

> ID：12466566
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:23:23.593
> 
> 标签：perl, hash, slice

受到另一个问题的答案的启发：[在 Perl 中切片嵌套哈希，](https://stackoverflow.com/questions/12464006/slicing-a-nested-hash-in-perl)使用保存在另一个哈希中的键列表对哈希进行切片的语法是什么？

我认为以下会做到这一点，但事实并非如此：

```
@slice_result = @{$hash1{@($hash_2{$bin})}}; 
```

我收到一条错误消息`"scalar found where operator expected"`。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:29:53.950

这是基于另一个哈希键的哈希切片的正确语法：

```
my %hash1 = ( 'this' => 2,
              'that' => 1,
            );
my %hash2 = ( 'this' => 'two',
              'that' => 'one',
            );

my @slice = @hash1{keys %hash2};

print @slice # prints 12; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:46:37.857

您对数据的模棱两可的描述使我认为您甚至不确定自己拥有什么。你应该花一些时间来吸收数据的结构，直到你能清楚地描述它。

我想你是说你有

```
my %hash1 = (
   apple  => 2,
   banana => 3,
   orange => 4,
);

my %hash2 = (
   red    => [qw( apple        )],
   yellow => [qw( apple banana )],
   orange => [qw( orange       )],
); 
```

您想使用 %hash2 上的一个元素引用的数组作为 %hash1 切片的键。如果您理解这一点，那只是一步一步做的问题。

```
$hash2{yellow} 
```

将为我们提供对所需数组的引用，并且

```
@{ $hash2{yellow} } 
```

将为我们提供数组本身。我们想用它作为哈希切片的索引表达式

```
@hash1{EXPR} 
```

所以我们得到：

```
@hash1{ @{ $hash2{yellow} } }    # 2,3 
```

# sql - 如何确定按位值中的最大位

> ID：12466568
> 
> 赞同：2
> 
> 时间：2012-09-17T20:23:36.630
> 
> 标签：sql, sql-server, tsql

我想知道是否有一种简短的方法（无需对整个事物进行编程）来确定 T-SQL 中二进制值中的最大值。

在列中，我存储`1 = sunday, 2 = monday, .. 7 = saturday`按位选择 () 的日期。

我的翻译表：

```
-- day of week
-- 1 == 1       -> POWER(2,0) -> sunday
-- 2 == 2       -> POWER(2,1) -> monday
-- 3 == 4       -> POWER(2,2)
-- 4 == 8       -> POWER(2,3)
-- 5 == 16      -> POWER(2,4)
-- 6 == 32      -> POWER(2,5)
-- 7 == 64      -> POWER(2,6) -> saturday 
```

因此，如果我选择星期天和星期六的**示例**，我的二进制值为 65。

`T-SQL`我该如何选择`65`呢`7`？

* * *

**编辑**

假设我有两条记录，两列：

```
 ID   | SelectedDays 
------|--------------
 1    | 65
 2    | 3 
```

因此，`ID 1`将返回 7，因为这将是选定的星期六`ID 2`并将返回星期一。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T20:41:02.360

```
 SELECT FLOOR(LOG(bit_week)/LOG(2))+1 
```

这将根据日期返回 1 到 7。
`logaritm`是以`power`2 为底的 obtanin 对数的倒数，诀窍是“除以底数”。FLOOR 反过来提供了最重要的位。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T20:43:03.317

在 SQL Server 2012 中，您可以使用第二个参数来获取 Log base 2 值，所以我认为您的星期几是：

```
FLOOR(LOG(binarycolumn,2)+1) 
```

如果没有，你可以做一些笨拙的事情，比如：

```
CASE WHEN BinaryColumn >=64 THEN 7
     WHEN BinaryColumn >=32 THEN 6
     WHEN BinaryColumn >=16 THEN 5
     WHEN BinaryColumn >=8  THEN 4
     WHEN BinaryColumn >=4  THEN 3
     WHEN BinaryColumn >=1  THEN 2
     ELSE                        1
     END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T20:38:47.220

在 C# 中，您可以执行以下操作

```
 int i = 65;
        var b = Convert.ToString(i, 2).PadLeft(8, '0'); //pad to 8 bit binary
        var c = Math.Pow(2, 7 - b.IndexOf("1")); 
```

-------- 抱歉错过了编辑 ------

```
var c = Enumerable.Range(0, b.Length).Where(x=>b[x] == '1').ToArray(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T20:40:44.163

如果您将枚举声明为标志，那么只要您存储在 INT 列中，就可以直接使用它，而无需在 SQL 端进行任何修改。

```
[Flags]
enum Day
{
  Sunday =1,
  Monday,
  Tuesday
  ....
  Saturday
}

var day = Day.Sunday | Day.Saturday //Internally enum will have bit flags set for 65. 
```

您可以将此值作为整数插入 DB。

要加载它，只需加载 day 的值并设置枚举。在 SQL 中什么都不需要做；只是`SELECT Day FROM MyTable`

在你的 C# 上

```
//Sample query for retrieving 
Day day = (Day)db.ExecuteScalar("SELECT Day FROM MyTable WHERE ID = 'someid'"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T20:42:19.420

POWER() 计算的逆向是通过幂的倒数 (1/2) 进行计算。例如：（对于周一、周三、周五 = 2 + 8 + 32 = 42）逆幂为 POWER (42.0, (1.0/2.0)) = 6.5。截断小数给你 6。（星期五）。

SELECT Convert(int, power(Convert(Decimal, SelectedDays), 0.5))

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T20:32:03.577

如果您只是在寻找星期六的所有值

```
select * from table where dayOfWeek >= 64 
```

# jquery - 使用 jQuery .on 函数

> ID：12466570
> 
> 赞同：0
> 
> 时间：2012-09-17T20:23:47.120
> 
> 标签：jquery

一旦将元素添加到 DOM，我对 .on 函数的“定义”函数/回调有什么了解。

我的问题是，我想在元素添加到 DOM 时自动触发一个事件。

这是场景：首先，我使用 AJAX 加载我的页面，所以 DOM isReady() 对我没有帮助。

用户单击链接并使用以下参数触发函数：

*   在页面上创建一系列图像；为每个图像定义 onClick 事件
*   然后我寻找其中一个元素并执行 click() 事件

问题是，第二个函数触发得太快了。我想要做的是等待第一个功能完全完成 - 即等待所有元素被创建，然后触发 click()

我看到现在退休的（？）插件 LIVEQUERY 曾经这样做过。

> Live Query 还能够在匹配新元素时触发函数（回调），并在元素不再匹配时触发另一个函数（回调）。

有没有办法用新版本的 jQuery 来做到这一点？

同样，我只想等到一个元素被添加到 DOM 中，然后在该元素上触发一个事件。

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:31:01.873

可以安全地假设当最后一个图像加载时，其他所有图像也都加载了。

尝试使用`img`'`onload`事件。当图像完成加载时会调用它，这将是在创建元素之后。

# html - Google fonts not applying in IE9

> ID：12466576
> 
> 赞同：2
> 
> 时间：2012-09-17T20:24:21.653
> 
> 标签：html, css, wordpress, google-webfonts

I am having an issue with customizing a WordPress template.

When I try to apply a Google Web font to a phone number in the header (as in dev [dot] beyondbbd [dot] com), Google fonts don't seem to be applied to the phone number (or all across the site for that matter) in IE9.

Any ideas about this? Is there an easy fix that I'm missing?

Thanks in advance.

-Nick

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:01:30.297

Try rearranging your css files so that the Google stylesheet comes before your own stylesheet which calls the fonts.

# html - 滚动时 CSS 导航子菜单不会显示在图像上

> ID：12466577
> 
> 赞同：1
> 
> 时间：2012-09-17T20:24:27.663
> 
> 标签：html, css, z-index, nav

我已经解决这个问题大约 4 天了。我已经阅读了关于它的各种论坛帖子，但我尝试过的都没有奏效。这是我的情况。我有一个 CSS 导航菜单。在 Firefox 和 Chrome 中一切正常，在我的 IE 中的大多数页面上都很好。但如果子菜单下拉菜单覆盖了导航菜单正下方的图像，则鼠标悬停时子菜单将消失。您可以在以下地址查看 IE 中的工作示例：

[http://dcmsandbox.net/Menu.html](http://dcmsandbox.net/Menu.html)

请在 IE 上查看源代码以查看代码。

我将不胜感激任何帮助，因为我无法自己解决。我认为它与 z-index 有关，但我使用的任何组合都失败了。

谢谢你。

# haskell - 如何在 Quickcheck 中使用修饰符（在我的情况下为正）

> ID：12466580
> 
> 赞同：8
> 
> 时间：2012-09-17T20:24:52.647
> 
> 标签：haskell, quickcheck

我有一个函数，`rev`它为三个类型类中的类型返回一些值：

```
rev :: (Integral a, Show a, Read a) => a -> a
rev = read . reverse . show 
```

我想用快速检查测试一些关于它的属性。不过，我对测试 Integral 类型的负值不感兴趣，因为我在使用基础库中`Integer`缺少`Natural`类型。所以我想，让我们取与生成的值为负时生成的值相反，我会没事的：

```
prop_id :: (Integral a, Show a, Read a) => Positive a -> Bool
prop_id n | n >= 0    = (rev.rev) n == n
          | otherwise = let n' = -n in (rev.rev) n' == n' 
```

（测试的属性在这里并不重要 - 特别是它不适用于非常基本的值，我知道，这不是这个问题的主题）

然后我遇到了`Positive`修改器，并认为虽然我的测试现在正在运行，但以更好的方式实现它会很好。所以我尝试了：

```
prop_id :: (Integral a, Show a, Read a) => Positive a -> Bool
prop_id n = (rev.rev) n == n 
```

我必须承认，当它编译时我很惊讶。但是在运行测试时弹出错误：

```
*** Failed! Exception: 'Prelude.read: no parse' (after 1 test): 
Positive {getPositive = 1} 
```

所以我想，“mmk，必须将这个`Positive`东西声明为”的实例`Read`。所以我就这样做了，但该实例已经在 quickCheck 库中声明，似乎是因为 ghci 对我大喊大叫。

在这一点上我迷路了，因为我没有找到好的文档（如果有的话）。

任何帮助我理解快速检查库中的修饰符和其他好东西的指针都将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-17T20:30:56.710

使用这些修饰符的常用方法是对它们进行模式匹配，例如

```
prop_id :: (Integral a, Show a, Read a) => Positive a -> Bool
prop_id (Positive n) = (rev.rev) n == n 
```

这样，`n`就会有底层类型。

# javascript - 是否可以使用 Javascript 动态修改作为资源加载的 SVG？

> ID：12466581
> 
> 赞同：0
> 
> 时间：2012-09-17T20:24:54.123
> 
> 标签：javascript, html, svg

我有这些图标，我想在悬停时在程序上为它们添加一个阴影（基本上是**一些东西，任何东西**），这样它们看起来就不会那么做作了。

它们是 SVG 的，所以理论上我可以在前面加上这样的东西：

```
<filter id="f1" x="0" y="0" width="200%" height="200%">
  <feOffset result="offOut" in="SourceAlpha" dx="20" dy="20" />
  <feGaussianBlur result="blurOut" in="offOut" stdDeviation="10" />
  <feBlend in="SourceGraphic" in2="blurOut" mode="normal" />
</filter> 
```

和一些 javascript 魔术将其应用于鼠标悬停。这可能会节省大量的设计工作。

问题是，svg 显示为`<a style='background-image:url(icon.svg)' />`.

有没有办法进入 SVG 元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:06:25.843

不，这不是直接可能的。如果需要，一种解决方法是在 html 中使用内联 svg，或者使用 <object>、<iframe> 或 <embed> 引用 svg 文件。

[在此处](http://xn--dahlstrm-t4a.net/svg/presentations/svgopen2012/presentation/index.html#/1)使用内联 svg 和悬停过滤器效果的示例。svg 部分基本上看起来像这样：

```
<svg width="400" height="400" viewBox="-2 -2 36 32">
  <defs>
    <style>
      #stack polygon:hover { filter: url(#glow); }
    </style>
    <filter id="glow">
        <feMorphology radius="0.7"/>
        <feGaussianBlur stdDeviation="1"/>
        <feColorMatrix type="matrix"
         values="0 0 0 0   0
                 0 0 0 0.9 0
                 0 0 0 0.9 0
                 0 0 0 1   0"/>
    </filter>
  </defs>
  <g id="stack" class="icon" fill="#850508">
    <polygon points="0,20 16,24 32,20 32,24 16,28 0,24"/>
    <polygon points="0,12 16,16 32,12 32,16 16,20 0,16"/>
    <polygon points="0,4 16,0 32,4 32,8 16,12 0,8"/>
  </g>
</svg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:32:54.340

如果您使用 jquery addclass 并简单地链接到具有您更改的另一个 svg 怎么办？

您还可以使用 html 代码创建一个 svg 元素（右键单击文件 --> 使用记事本查看），您将在那里获得代码 -- 有在线转换器可以进行所有必要的调整，然后您可以输入 svg 代码javascript

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T00:27:19.297

我不知道如何以您显示的方式...作为背景图像...但是如果您可以像[本](http://dariomac.com/Cms_Data/Contents/dariomac_db/Media/Resources/raphael-utils/map02.html)示例中那样在 div 中加载 svg 文件，您可以使用我的导入器（修改后的版本在 github 上创建的其他进口商），它在这里：[http](http://www.dariomac.com/Document/Raphael-Utils) ://www.dariomac.com/Document/Raphael-Utils 。您还可以看到这个[故事](http://storify.com/dariomac/svg-to-raphael)，我描述了我直接从文件导入 SVG 所遵循的所有步骤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T21:32:00.790

如果您将 SVG 用作图像，那么您将无法访问图像的 DOM 并通过 javascript 对其进行操作。

虽然您可以使用 XMLHTTPRequest 加载它们，然后使用 DOMParser 对象将它们作为内联数据插入到主文档中，但这会使您面临浏览器试图通过锁定图像访问来保护您免受的安全问题，即图像可能会更改和您可能正在将任意 javascript 加载到您的页面中。

对我来说最简单和最安全的是，如果您直接使用编辑器更改图像文件并将过滤器添加到其中，然后使用修改后的图像。

# perl - 如何删除 Tk::HList 中选择的虚线？

> ID：12466585
> 
> 赞同：0
> 
> 时间：2012-09-17T20:25:10.957
> 
> 标签：perl, tk, perltk, hlist

当通过单击选择 Tk::HList 中的条目时，将在该条目周围绘制一条虚线。我不想有这条线。我该如何配置它？我没有看到任何记录在案的方法。

下面是一些示例代码，显示了带有预选条目的 Tk::HList。单击该条目时，将出现一条虚线。

```
#!perl

use strict;
use warnings;
use utf8;
use Tk;
use Tk::HList;

my $mw = tkinit();

# -- create a Tk::HList
my $scrolled_hlist = $mw->Scrolled('HList',
    -scrollbars => 'se',
    -columns => 2,
    -header => 1,
    -width => 50,
    -height => 20,
    # hide black border around HList when it's active
    -highlightthickness => 0,
    -selectborderwidth => 1,
    -selectmode => 'single',

)->pack(-fill => 'y', -expand => 1,);

my $real_hlist = $scrolled_hlist->Subwidget('scrolled');

# -- add HList header colums
$real_hlist->header(
    'create', 0,
    -text   => 'first column',
);

$real_hlist->header(
    'create', 1,
    -text   => 'second column',
);

# -- add some entries to the HList
$real_hlist->add(1);
$real_hlist->item('create', 1, 0, -text => 'first row, 1st col');
$real_hlist->item('create', 1, 1, -text => 'first row, 2nd col');

$real_hlist->add(2);
$real_hlist->item('create', 2, 0, -text => '2nd row, 1st col');
$real_hlist->item('create', 2, 1, -text => 'second row, 2nd col');

# -- set selection *** without dashed line border ***
$real_hlist->selectionSet(2);

$mw->MainLoop();
exit(0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:17:02.627

找到它花了一些时间，但解决方案是调用 anchorClear() 作为browsecmd：

```
#!perl

use strict;
use warnings;
use utf8;
use Tk;
use Tk::HList;

my $mw = tkinit();

# -- create a Tk::HList
my $scrolled_hlist = $mw->Scrolled('HList',
    -scrollbars => 'se',
    -columns => 2,
    -header => 1,
    -width => 50,
    -height => 20,
    # hide black border around HList when it's active
    -highlightthickness => 0,
    -selectborderwidth => 1,
    -selectmode => 'single',
)->pack(-fill => 'y', -expand => 1,);

my $real_hlist = $scrolled_hlist->Subwidget('scrolled');
$real_hlist->configure(
    -browsecmd => [ sub{ $_[0]->anchorClear(); }, $real_hlist],
);

# -- add HList header colums
$real_hlist->header(
    'create', 0,
    -text   => 'first column',
);

$real_hlist->header(
    'create', 1,
    -text   => 'second column',
);

# -- add some entries to the HList
$real_hlist->add(1);
$real_hlist->item('create', 1, 0, -text => 'first row, 1st col');
$real_hlist->item('create', 1, 1, -text => 'first row, 2nd col');

$real_hlist->add(2);
$real_hlist->item('create', 2, 0, -text => '2nd row, 1st col');
$real_hlist->item('create', 2, 1, -text => 'second row, 2nd col');

# -- set selection *** without dashed line border ***
$real_hlist->selectionSet(2);

$mw->MainLoop();
exit(0); 
```

资料来源：[https ://groups.google.com/d/topic/comp.lang.perl.tk/iCE7ql2Bw4E/discussion](https://groups.google.com/d/topic/comp.lang.perl.tk/iCE7ql2Bw4E/discussion)

# android - 如何运行一个android应用程序在后台运行，以便用户可以转到其他屏幕？

> ID：12466586
> 
> 赞同：-3
> 
> 时间：2012-09-17T20:25:17.160
> 
> 标签：android, service, background

我们正在开发一个测试应用程序，我们仅处于初始阶段，我的问题是当我们从测试应用程序导航到 android 主屏幕时，看起来你停止了该应用程序，因为我不认为它是设置中正在运行的应用程序à应用程序运行应用程序。我们希望应用程序在后台运行，以便用户可以转到其他屏幕并且应用程序仍在进行测试，并且我们需要在状态栏中有一个闪烁的彩色图标（所有屏幕的顶部栏) 表示 ZK 数据测试器正在执行测试，因为这些测试可以很快使它们超出其数据计划的限制，并且他们将不得不为每月的账单支付额外的美元。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:31:37.443

Android`Application`实际上只是具有离散条目（和用途）的各种代码组件的包。当您谈论 UI 时，您通常指的是`Activity`，而 Activity 的生命周期是当您进入主屏幕时它会暂停。暂停时不允许使用 UI。

如果您希望在活动暂停时继续进行处理，通常使用`Service`. （我会让你在谷歌上搜索你需要知道的关于它们的实现。）你也可以只启动一个异步线程，这取决于你需要什么样的处理以及你打算用它的结果做什么，但通常是一个服务是更好的选择。

# installation - 如何在 installshield 中有条件地进行重大升级

> ID：12466587
> 
> 赞同：0
> 
> 时间：2012-09-17T20:25:23.217
> 
> 标签：installation, windows-installer, installshield, uninstallation, installscript

这是我的场景：

我需要能够让同一产品的不同版本在我的机器上共存。所以，我需要一个不同的产品密钥。酷，没问题。问题是，我还希望只有在用户尝试安装到我的产品已安装到的同一位置时才可以选择进行重大升级。

所以基本上，我需要能够在用户选择他们想要安装的位置之后启动“重大升级”模式。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:13:10.770

我知道一种方法来做你所描述的，但我不确定这是你想要的。

您可能想要的是多个实例安装程序。请查看以下文章，看看它是否描述了您正在寻找的体验：

[InstallShield 2009 Beta 第 I 部分（多个实例）](http://blog.deploymentengineering.com/2008/03/installshield-2009-beta-part-i.html)

# actionscript-3 - AS3 通行证对象

> ID：12466588
> 
> 赞同：2
> 
> 时间：2012-09-17T20:25:30.120
> 
> 标签：actionscript-3

我有 3 节课。

一个是具有我功能的 Global 类：

```
public static function getDistance(ObjOne, ObjTwo)
{
    var distance = Math.sqrt( ( ObjOne.x - ObjTwo.x ) * ( ObjOne.x - ObjTwo.x ) + ( ObjOne.y - ObjTwo.y ) * ( ObjOne.y - ObjTwo.y ) );
    return distance;
} 
```

然后我有一个`MovieClip`是类：`Minion`另一个叫做：`Turret`

在`Minion`我打电话的课堂上：`Global.getDistance`

并将参数设置为：`Global.getDistance(this, ?????)`

如何从 Turret 类中获取最终参数的 Turret 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:11:37.237

如果每个仆从都有一个目标炮塔，那么你应该在你的`Minion`类中保存对炮塔的引用。不需要静态函数来获取距离（除非它用于除小兵/炮塔关系之外的其他事物）。

为了让您的炮塔了解所有小兵（以决定攻击哪个小兵），一个好的方法是将它们全部存储在一个静态可评估的向量（数组）中。

这是您的 Minion 课程的示例：

```
public class Minion {
    public static var allMinions:Vector<Minion> = new Vector<Minion>(); //create a static array to store all your minions

    public var turret:Turret;

    public function Minion(targetTurret:Turret):void {
        turret = targetTurret;
        this.addEventListener(Event.ADDED_TO_STAGE,addedToStage,false,0,true);
        this.removeEventListener(Event.REMOVED_FROM_STAGE,removedFromStage,false,0,true);
    }

    private function addedToStage(e:Event):void {
        allMinions.push(this); //add this minion instance to the array when it's added to the display list
    }

    private function removedFromStage(e:Event):void {
        //remove this minion instance from the array of all minions when it's removed from the display list
        var index:int = allMinions.indexOf(this);
        if(index >= 0){
            allMinions.splice(index,1);
        }
    }

    private function move():void { //whatever function you use to move the minion along
       //get distance here, using your local turret var
       getDistance(this,turret); //this could be a local function, or some static function somewhere - local is faster, especially if being called everyframe or in a loop.
    }

    //a function to take damage, returns true if still alive after the damage
    public function takeDamage(amount:Number):Boolean {
        this.health -= amount * armor;  //armor could be a value between 1 (no armor) and 0 (invincible)
        if(health <= 0){ 
             //die
             return false;
        }
        return true;
    }
} 
```

当你创建一个新的 Minion - 时，它会传入适当的炮塔`new Minion(turretInstance)`，并且有一个静态可访问的数组，其中包含在任何给定时间显示列表上的所有 Minion。它还增加了一个受到伤害的功能

* * *

对于要攻击的炮塔，您需要扫描所有仆从的阵列，并确定哪些离攻击足够近，要么攻击所有（如果这是炮塔的类型），要么选择一个（通常是最近的）进行攻击。

炮塔类：

```
public var range:Number = 200; //how close to the turret a minion needs to be before it can attack
public var attackPower:Number = 10; //how much damage does this turret cause

public function attack():void {

    //this for loop goes through all the minions and finds the closest one
    var closestMinion:Minion;
    var tmpDistance:Number; //
    var distance:Number;
    for each(var minion:Minion in Minion.allMinions){
        distance = Math.sqrt( ( minion.x - this.x ) * ( minion.x - this.x ) + ( minion.y - this.y ) * ( minion.y - this.y ) ); //find the distance between the current minion in the loop and this turret
        if(distance < range && isNaN(tmpDistance) || distance < tmpDistance){  //if the distance of this minion is less than the current closest, make the current closest this one
            closestMinion = minion;
            tmpDistance = distance;
        }

    }

    //attack the closest one
    if(closestMinion){
        closestMinion.takeDamage(attackPower);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:33:04.163

如果您的游戏中只有一个炮塔，您可以使用单例设计模式。

```
private static var instance:Turret = null;

public static function getInstance()
{
    if(instance === NULL)
        instance = new Turret();
    return instance;
} 
```

所以你可以调用 Turret.getInstance() 并使用你的 Turret 对象。希望能帮助到你。如果你有多个炮塔，你应该有一个带有数组或向量的游戏类，其中包含所有炮塔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:38:00.667

我不知道你到底需要什么，第二个参数的类型？由于您处理的是全局函数，因此我建议您只使用`DisplayObject`它们，因为它们都有 x/y 属性

```
public static function getDistance(clip1:DisplayObject, clip2:DisplayObject):Number     
{ 
   return Math.sqrt( ( clip1.x - clip2.x ) * ( clip1.x - clip2.x ) + ( clip1.y - clip2.y ) * ( clip1.y - clip2.y ) );
} 
```

# c - 了解反汇编的 c 代码（尤其是 var_28 = dword ptr -28h 之类的东西）（二进制炸弹实验室）

> ID：12466589
> 
> 赞同：2
> 
> 时间：2012-09-17T20:25:30.967
> 
> 标签：c, assembly, disassembly

所以我正在反汇编一些代码（二进制炸弹实验室），需要一些帮助来弄清楚发生了什么。

这是 IDA 屏幕截图：

![在此处输入图像描述](../Images/55a5b2a76e4c6a0c25cbfcdefc895af4.png)

（下面有一些跳表的东西和另一个比较，但我对这些东西感觉更舒服（我想））

现在，我想我知道这个阶段发生了什么，正如我所读到的：

[http://teamterradactyl.blogspot.com/2007/10/binary-bomb.html](http://teamterradactyl.blogspot.com/2007/10/binary-bomb.html)（向下滚动到第 3 阶段）

但是，我习惯了不同形式的程序集。

我不明白的最大的事情是顶部的所有这些 var_28 = dword ptr -28h 东西。

当 sscanf 被调用时，它如何知道将每个令牌放在哪里？并且只会有三个标记（这就是上面的链接所说的，虽然我看到一个 %d、%d ......所以也许两个，但我认为是三个）。基本上，谁能告诉我在调用 sscanf 后这些 var_x（和 arg_0）将指向什么？

它们只是对堆栈指针的相对寻址，对吧......？但是这些地址是如何被来自 sscanf 的令牌填充的呢？

注意：这是作业，但它说不要添加作业标签，因为它已经过时了。作业是找出通过命令行输入的密码短语以通过每个阶段。

NOTE2：我真的不知道怎么用IDA，我朋友只是告诉我在IDA中打开炸弹文件。也许有一种简单的方法可以让我在 IDA 中进行实验并找出答案，但我不知道如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T21:07:22.267

局部变量存储在帧指针的正下方。参数位于帧指针之上。x86 使用 BP/EBP/RBP 作为帧指针。

天真的反汇编只会反汇编`lea eax, [ebp+var_10]`为`lea eax, [ebp-10h]`. 该指令引用了一个局部变量，其地址在帧指针指向的位置下方 10h（16 个字节）。LEA 表示加载有效地址：它在`[ebp - 10h]`in加载变量的地址`eax`，因此`eax`现在包含指向该变量的指针。

IDA 显然正试图为局部变量赋予有意义的名称，但由于显然没有可用的调试信息，它最终使用虚拟名称。反正：

```
var_10= dword ptr -10h 
```

这只是 IDA 的一种说法，它已经`var_10`为`-10`.

# pdf - Asp.net MVC4、Mobile Safari、iFrame - 为多页 pdf 文档的每一页添加链接

> ID：12466594
> 
> 赞同：2
> 
> 时间：2012-09-17T20:25:50.987
> 
> 标签：pdf, iframe, asp.net-mvc-4, mobile-safari

虽然[http://www.example.com/my.pdf#pageX](http://www.example.com/my.pdf#pageX)在 iPad 上可以打开页面“X”，但当 pdf 嵌入 iFrame 时，这不起作用。你们有没有解决方案如何链接到 iPad 上 iFrame 中 pdf 文档的特定页面，或者类似的解决方案可以在 html 页面中显示 pdf 文档的特定页面？

几个月来我一直在寻找解决方案，但还没有找到解决方案。尝试了谷歌文档查看器并尝试使用网络上发布的几乎所有解决方案转到特定页面（http://stackoverflow.com/questions/12290148/link-to-specific-page-on-google-document-viewer-在 ipad 上）但这些解决方案似乎过时并且不起作用。

任何帮助表示赞赏。

# vb6 - Server 2008 T/S 程序每次为不同的用户启动时都会重新安装

> ID：12466596
> 
> 赞同：1
> 
> 时间：2012-09-17T20:26:07.643
> 
> 标签：vb6, windows-installer, terminal-services

我们在以前版本的 TS 上运行良好的应用程序在 Server 2008 R2 上的 TS 上运行时有一个新的“问题”。

用户登录并启动应用程序。它们会显示一个安装对话框。如果是新安装/重新安装，您可能会期望在注册表使用新设置和新安装中的“东西”进行更新时出现这种情况。

用户登录后，他们可以毫无问题地注销并重新登录。只要.. 在此期间没有其他人启动该程序。一旦另一个用户连接并启动程序（他们也得到安装对话框..），第一个用户现在必须再次通过安装对话框..

该应用程序在 VB6 中被混为一谈，没有真正的“升级”计划，尽管“重写”已经被戏弄了一点。我目前正在寻找 Win2008 与 Win2000 处理 UAC 和的注册表“问题”注册表..

在我追求 VB6 完美的过程中，有什么想法会咬我吗？:-) !!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T22:30:33.443

第 1 步：查看事件查看器以获取导致弹性触发的组件 ID

第 2 步：检查 Orca 中的 MSI 以了解该组件的密钥文件是什么

第 3 步：缓解（很大程度上取决于您在第 2 步中找到的内容）

只是请不要做我见过人们做的疯狂的事情，比如禁用 Windows 安装程序服务或使用 MSIZap 让 MSI “忘记”该应用程序。（哎呀，假设我不应该告诉你。JK）

# c# - 业务层或表示层

> ID：12466597
> 
> 赞同：0
> 
> 时间：2012-09-17T20:26:08.893
> 
> 标签：c#, business-logic-layer

我正在编写一个包含信息表的 ntier 网站。我正在使用 jeditable 使表格可编辑。

客户希望表中的某些字段只读，具体取决于它们包含的信息是在特定日期之前还是之后。只读逻辑应该驻留在业务层还是 ui 层？

问候 Si

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:27:42.490

两个都。您的 UI 应该检查那些不可编辑的字段，然后不提供修改字段的控件，并且为了安全起见，您的业务层还应该禁用该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:27:31.967

业务层。之前或之后的日期规则可能会改变 - 这是业务逻辑。

业务层应该执行规则并将事实传达给 UI 层。无论客户端做什么，它都应该在其末端强制执行不变性。

# php - 需要在 jquery 脚本中传递 php 的值

> ID：12466598
> 
> 赞同：0
> 
> 时间：2012-09-17T20:26:11.897
> 
> 标签：php, ajax

我需要将 PHP 检索到的值从数据库传递给 Ajax 函数，以便在数据库中进一步查询我的代码如下所示。

PHP 脚本：

```
$query = mysql_query("SELECT * FROM employee") or die(mysql_error());

while($res=mysql_fetch_assoc($query)){  
echo $res['emp_id'];   
$emp_id=$res['emp_id'] 
```

并提交带有 id 的按钮`name-submit`

Javascript

```
$('input#name-submit').on('click',function(){ 
var empid = $('php echo $emp_id; ');
alert(empid); 
```

该脚本在 php 脚本下方运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:27:18.030

就像你正在做的那样，但是把完整的开始标签放在那里。将第二个 JS 行更改为：

```
var empid = $('<?php echo $emp_id; ?>'); 
```

# delphi - 德尔福画布人物

> ID：12466602
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:26:48.553
> 
> 标签：delphi, delphi-7, delphi-units

我有一些关于 Dephi 的作业（以前从未使用过，只有 c++/java，但在我的大学里，我们有 delphi 语言科目）。好吧，我需要用移动的数字制作形式，展示它们如何碰撞之类的东西。我开始像一些抽象类一样制作一个 uint

```
unit MyFigure;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, Buttons, StdCtrls;

type
tPoint = record
 x,y: Double;
end;

oFigure = class
  c: TCanvas;
  pos: tPoint;
  vel: tPoint;
  r: Double;
  constructor create(coord, vect: tPoint; radius: Double);
  protected
    procedure move();
    procedure draw(); virtual;
  public
    function isIntersected(x:oFigure):boolean;
end;

implementation

  constructor oFigure.create(coord, vect: tPoint; radius: Double);
  begin
    pos.x:= coord.x;
    pos.y:= coord.y;
    vel.x:= vect.x;
    vel.y:= vect.y;
    r:=radius;
  end;

  procedure oShape.draw(); virtual;
  begin

  end;

  procedure oShape.move();
  begin
      pos.x:=  pos.x + vel.x;
      pos.y:=  pos.y + vel.y;
      oShape.draw();

  end;

  function isIntersected(o:oFigure):boolean;
  begin
     if ((oShape.pos.x - o.pos.x)*(oShape.pos.x - o.pos.x) +  (oShape.pos.y - o.pos.y)*(oShape.pos.y - o.pos.y)
          < (oShape.r + o.r)*(oShape.r + o.r)) then Result:=True;
  end;

end. 
```

然后我创造了它的孩子。好吧，在这里我需要从画布调用 arc 方法来绘制球，但它看不到它，并且 eve 说`unable to invoke code completion`。怎么了？

```
unit Ball;

interface
uses
  MyFigure;   
type

oBall = class(oFigure);
    c: TCanvas;
    procedure draw(); override;
 end;

implementation
   procedure oBall.draw();
    begin
       c.Arc()//PROBLEM!
    end;

end. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:31:11.170

未调用代码完成，因为未在 uses 子句中指定单位**图形：Try with**

```
unit Ball;

interface
uses
  Graphics, MyFigure; 
```

顺便说一句，您似乎没有实例化**c**。为此，您需要一个构造函数和一个析构函数。通常的方法是在过程 draw() 中传递一个 TCanvas 实例作为参数。在**oFigure**单元中，您定义了*TPoint* ，但 TPoint 是 RTL/VCL 的本机类型。你不需要定义它。在**oFigure 中**，您还将一些方法设置为受保护的，但矛盾的是，以前的变量是公共的。

# php - PHP PDO 访问 MySQL

> ID：12466605
> 
> 赞同：1
> 
> 时间：2012-09-17T20:27:08.137
> 
> 标签：php, mysql, database, pdo, database-security

我经历了将 mysql_* 代码转换为 PDO 代码的过程。我已经运行它并检查它是否正常工作以及一切。我只是希望 Stack Overflow 对其进行审查，以确保我正确地终止了连接，是否应该使用其他方法（例如事务），确保没有大量的安全漏洞。这是代码：

```
<?php
    try {
        $link = new PDO('mysql:****;dbname=****;charset=UTF-8','****','****');
        $link->exec("INSERT INTO Registration (`First Name`, `Last Name`) VALUES ('$_POST[fname]', '$_POST[lname]')");
    } catch(PDOException $e) {
        print "Error!: " . $e->getMessage() . "<br/>";
        die();
    }
?> 
```

就像我说的，它有效，但我希望它在 100 人同时注册时安全有效。一切看起来都好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T20:29:23.487

不..您正在将 mysql_ 转换为 PDO 1:1。这样，mysql_ 中的问题也将成为 PDO 中的问题。

您应该查看准备好的查询和参数绑定。

这是我的意思的一个例子：

```
$dbh = new PDO('mysql:****;dbname=****;charset=UTF-8','****','****');

$first = 'John';
$last = 'Doe';

$stmt = $dbh->prepare(
   "INSERT INTO Registration (firstname, lastname) VALUES (:first, :last)");
$stmt->bindParam(':first', $first);
$stmt->bindParam(':last', $last);

$stmt->execute();

// insert another row with different values
$first = 'John';
$last = 'Smith';
$stmt->execute(); 
```

# maven - 我可以在 Groovy 变量名中包含奇数字符吗？

> ID：12466608
> 
> 赞同：5
> 
> 时间：2012-09-17T20:27:18.990
> 
> 标签：maven, groovy, gradle

我正在从 Maven3 迁移到 Gradle，并且我依赖于一个包含一些属性作为版本标识符的内部项目。当我尝试编译我的项目时，它抱怨找不到依赖项。问题是这些属性要么使用句点“。” 或破折号“-”（例如，cargo.version、supported-spring-version）。

Groovy 中有没有办法声明一个带有奇数字符的变量？

def '支持的弹簧版本' = '3.1.0.RELEASE'

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T20:41:40.757

不能使用 def，但可以在当前绑定中声明它们

```
this.'some-string' = '3'

println​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ this.'some-string'​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

虽然可能有更好的解决方法，但是您的问题中没有足够的信息来可靠地提出替代方案

# c++ - 与线程池中的 boost::function 使用相关的崩溃

> ID：12466613
> 
> 赞同：0
> 
> 时间：2012-09-17T20:27:48.813
> 
> 标签：c++, pthreads, threadpool, boost-bind, boost-function

我正在尝试使用 pthread 在 C++ 中实现线程池。我想将与线程管理相关的逻辑封装在一个拥有这些线程所有权的对象中。这意味着每当该对象被销毁时，必须停止并清理线程。

我一直在测试我的代码，结果发现当我在调用 boost::function 时销毁 WorkerThreadManager 对象时出现分段错误。请参阅 GDB 的代码和回溯。我真的不明白为什么会发生这种情况，据我所知 boost::function 是可复制的，所以一旦我从队列中获取它的副本，我就可以 pop() 它甚至销毁整个队列（我在一些小测试），然后调用函数的副本。

WorkerThreadManager.h：

```
#include "WorkerThreadManagerInterface.h"
#include "utils/mutex.h"
#include <queue>
#include <semaphore.h>

#include <iostream>

class WorkerThreadManager : public WorkerThreadManagerInterface
{
    public:
        WorkerThreadManager(unsigned threadsNumber = 5);
        virtual ~WorkerThreadManager();

        virtual void    PushTask(thread_function_t A_threadFun, result_function_t A_resultFun);
        void    SignalResults();

    private:
        static void*    WorkerThread(void* A_data);

        void    PushResult(int A_result, result_function_t A_resultFun);

        typedef boost::function<void ()> signal_function_t;

        struct worker_thread_data_t
        {
            worker_thread_data_t(thread_function_t A_threadFun, result_function_t A_resultFun) :
                threadFun(A_threadFun), resultFun(A_resultFun) {}
            worker_thread_data_t() {}

            thread_function_t       threadFun;
            result_function_t       resultFun;
        };

        const unsigned                      m_threadsNumber;
        pthread_t*                          m_pthreads;

        utils::Mutex                        m_tasksMutex;
        sem_t                               m_tasksSem;
        std::queue<worker_thread_data_t>    m_tasks;

        utils::Mutex                        m_resultsMutex;
        std::queue<signal_function_t>       m_results;
}; 
```

WorkerThreadManager.cpp：

```
#include "WorkerThreadManager.h"
#include "gateway_log.h"
#include <pthread.h>

/**
 * @brief Creates semaphore and starts threads.
 */
WorkerThreadManager::WorkerThreadManager(unsigned threadsNumber) : m_threadsNumber(threadsNumber)
{
    if ( sem_init(&m_tasksSem, 0, 0) )
    {
        std::stringstream ss;
        ss << "Semaphore could not be initialized: " << errno << " - " << strerror(errno);
        LOG_FATAL(ss);
        throw std::runtime_error(ss.str());
    }

    m_pthreads = new pthread_t[m_threadsNumber];
    for (unsigned i = 0; i < m_threadsNumber; ++i)
    {
        int rc = pthread_create(&m_pthreads[i], NULL, WorkerThreadManager::WorkerThread, (void*) this );
        if(rc)
        {
            std::stringstream ss;
            ss << "Pthread could not be started: " << errno << " - " << strerror(errno);
            LOG_FATAL(ss.str());

            if ( sem_destroy(&m_tasksSem) )
                LOG_ERROR("Semaphore could not be destroyed: " << errno << " - " << strerror(errno));

            delete [] m_pthreads;

            throw std::runtime_error(ss.str());
        }
        else
        {
            LOG_DEBUG("Worker thread started " << m_pthreads[i]);

            if(pthread_detach(m_pthreads[i]))
                LOG_WARN("Failed to detach worker thread");
        }
    }
}

/**
 * @brief Cancels all threads, destroys semaphore
 */
WorkerThreadManager::~WorkerThreadManager()
{
    LOG_DEBUG("~WorkerThreadManager()");

    for(unsigned i = 0; i < m_threadsNumber; ++i)
    {
        if ( pthread_cancel(m_pthreads[i]) )
            LOG_ERROR("Worker thread cancellation failed");
    }

    if ( sem_destroy(&m_tasksSem) )
        LOG_ERROR("Semaphore could not be destroyed: " << errno << " - " << strerror(errno));

    delete [] m_pthreads;
}

/**
 * @brief Adds new task to queue, so worker threads can
 * @param A_threadFun function which will be executed by thread
 * @param A_resultFun function which will be enqueued for calling with return value of A_threadFun as parameter
 *          after worker thread executes A_threadFun.
 */
void WorkerThreadManager::PushTask(thread_function_t A_threadFun, result_function_t A_resultFun)
{
    utils::ScopedLock mutex(m_tasksMutex);

    worker_thread_data_t    data(A_threadFun, A_resultFun);
    m_tasks.push( data );
    sem_post(&m_tasksSem);
    LOG_DEBUG("Task for worker threads has been added to queue");
}

/**
 * @brief   Executes result functions (if there are any) to give feedback 
 *  to classes which requested task execution in worker thread.
 */
void WorkerThreadManager::SignalResults()
{
    while(true)
    {
        signal_function_t signal;
        {
            utils::ScopedLock mutex(m_resultsMutex);
            if(m_results.size())
            {
                signal = m_results.front();
                m_results.pop();
            }
            else
                return;
        }

        signal();
    }
}

/**
 * @brief Enqueues result of function executed in worker thread.
 * @param A_result return value of function executed in worker thread
 * @param A_resultFun function which will be enqueued for calling with A_result as a parameter.
 */
void WorkerThreadManager::PushResult(int A_result, result_function_t A_resultFun)
{
    utils::ScopedLock mutex(m_resultsMutex);

    signal_function_t signal = boost::bind(A_resultFun, A_result);
    m_results.push( signal );
}

/**
 * @brief   worker thread body
 * @param A_data pointer to WorkerThreadManager instance
 */
void* WorkerThreadManager::WorkerThread(void* A_data)
{
    WorkerThreadManager* manager = reinterpret_cast<WorkerThreadManager*>(A_data);
    LOG_DEBUG("Starting worker thread loop");
    while (1)
    {
        if ( -1 == sem_wait(&manager->m_tasksSem) && errno == EINTR )
        {
            LOG_DEBUG("sem_wait interrupted with signal");
            continue;
        }
        LOG_DEBUG("WorkerThread:::::: about to call lock mutex");

        worker_thread_data_t data;
        {
            utils::ScopedLock mutex(manager->m_tasksMutex);
            data = manager->m_tasks.front();
            manager->m_results.pop();
        }

        LOG_DEBUG("WorkerThread:::::: about to call resultFun");
        int result  = data.threadFun();
        LOG_DEBUG("WorkerThread:::::: after call resultFun");
        pthread_testcancel();

        manager->PushResult(result, data.resultFun);
    }

    return NULL;
} 
```

主.cpp：

```
#include "gateway_log.h"
#include "WorkerThreadManager.h"
#include <memory>

class A {
public:
    int Fun() { LOG_DEBUG("Fun before sleep"); sleep(8); LOG_DEBUG("Fun after sleep");return 0; }
    void Result(int a) { LOG_DEBUG("Result: " << a); }
};

int main()
{
    sd::auto_ptr<WorkerThreadManager> workerThreadManager = new WorkerThreadManager;
    A a;
    workerThreadManager->PushTask(boost::bind(&A::Fun, &a), boost::bind(&A::Result, &a, _1));
    sleep(3);
    LOG_DEBUG("deleting workerThreadManager");
    workerThreadManager.reset();                    // <<<--- CRASH
    LOG_DEBUG("deleted workerThreadManager");
    sleep(10);
    LOG_DEBUG("after sleep");    

    return 0;
} 
```

广发银行：

```
(gdb) bt
#0  0xb7ad33a0 in ?? () from /lib/i386-linux-gnu/libc.so.6
#1  0x0807d3a7 in boost::function0<void>::clear (this=0x858db48) at /home/marcin/intel_build/boost_1_42_0/boost/function/function_template.hpp:856
#2  0x0807d17b in boost::function0<void>::~function0 (this=0x858db48, __in_chrg=<optimized out>) at /home/marcin/intel_build/boost_1_42_0/boost/function/function_template.hpp:752
#3  0x0807cec5 in boost::function<void()>::~function(void) (this=0x858db48, __in_chrg=<optimized out>) at /home/marcin/intel_build/boost_1_42_0/boost/function/function_template.hpp:1043
#4  0x0807ced8 in std::_Destroy<boost::function<void ()> >(boost::function<void ()>*) (__pointer=0x858db48) at /usr/include/c++/4.6/bits/stl_construct.h:94
#5  0x0807c868 in std::_Destroy_aux<false>::__destroy<boost::function<void ()>*>(boost::function<void ()>*, boost::function<void ()>*) (__first=0x858db48, __last=0x858d928) at /usr/include/c++/4.6/bits/stl_construct.h:104
#6  0x0807bd05 in std::_Destroy<boost::function<void ()>*>(boost::function<void ()>*, boost::function<void ()>*) (__first=0x858d938, __last=0x858d928) at /usr/include/c++/4.6/bits/stl_construct.h:127
#7  0x0807af23 in std::_Destroy<boost::function<void ()>*, boost::function<void ()> >(boost::function<void ()>*, boost::function<void ()>*, std::allocator<boost::function<void ()> >&) (__first=0x858d938, __last=0x858d928)
    at /usr/include/c++/4.6/bits/stl_construct.h:153
#8  0x0807a037 in std::deque<boost::function<void ()>, std::allocator<boost::function<void ()> > >::_M_destroy_data_aux(std::_Deque_iterator<boost::function<void ()>, boost::function<void ()>&, boost::function<void ()>*>, std::_Deque_iterator<boost::function<void ()>, boost::function<void ()>&, boost::function<void ()>*>) (this=0x858beec, __first=..., __last=...) at /usr/include/c++/4.6/bits/deque.tcc:795
#9  0x08076153 in std::deque<boost::function<void ()>, std::allocator<boost::function<void ()> > >::_M_destroy_data(std::_Deque_iterator<boost::function<void ()>, boost::function<void ()>&, boost::function<void ()>*>, std::_Deque_iterator<boost::function<void ()>, boost::function<void ()>&, boost::function<void ()>*>, std::allocator<boost::function<void ()> > const&) (this=0x858beec, __first=..., __last=...) at /usr/include/c++/4.6/bits/stl_deque.h:1816
#10 0x08073411 in std::deque<boost::function<void()>, std::allocator<boost::function<void()> > >::~deque(void) (this=0x858beec, __in_chrg=<optimized out>) at /usr/include/c++/4.6/bits/stl_deque.h:898
#11 0x0806a355 in std::queue<boost::function<void()>, std::deque<boost::function<void()>, std::allocator<boost::function<void()> > > >::~queue(void) (this=0x858beec, __in_chrg=<optimized out>)
    at /usr/include/c++/4.6/bits/stl_queue.h:92
#12 0x0815a054 in WorkerThreadManager::~WorkerThreadManager (this=0x858be98, __in_chrg=<optimized out>) at WorkerThreadManager.cpp:42
#13 0x0815a1e3 in WorkerThreadManager::~WorkerThreadManager (this=0x858be98, __in_chrg=<optimized out>) at WorkerThreadManager.cpp:56
#14 0x080c6c51 in std::auto_ptr<WorkerThreadManager>::reset (this=0x85463e4, __p=0x0) at /usr/include/c++/4.6/backward/auto_ptr.h:244
#15 0x080604a9 in main () 
```

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:19:27.950

不能保证`pthread_cancel`在返回之前等待目标的取消完成。成功后，它只是请求取消，但不等待它完成。您需要使用`pthread_join`等待线程完成。

我怀疑当析构函数在一个线程中进行时，其中一个线程被唤醒（由于`sem_destroy`），并错误地尝试读取/弹出队列。我不确定为什么它会导致主线程崩溃，但我会先消除这个潜在的问题。

最后，我强烈建议您将其中一些信号量和线程机制移到它们自己的类中，以使代码更加安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:02:37.743

我发现了一个错误，这对我来说是微不足道的-耻辱:(

在函数中`void* WorkerThreadManager::WorkerThread(void* A_data)`，我弹出了`m_results`队列，而不是`m_tasks`我想要的：

```
worker_thread_data_t data;
{
    utils::ScopedLock mutex(manager->m_tasksMutex);
    data = manager->m_tasks.front();
    manager->m_results.pop();
} 
```

无论如何，我真的不明白为什么它这么晚才导致崩溃 - 在队列的析构函数中。

# php - PHP $post 和表单

> ID：12466614
> 
> 赞同：0
> 
> 时间：2012-09-17T20:27:49.010
> 
> 标签：php

我有一个具有两个字段输入的表单，它们也具有相同的名称“名称”

我想知道我该怎么做才能捕获数组中的两个字段，

例如，如果 field1 获取帖子并且 field2 为空，我想获得一个包含我正在寻找的数据的数组 [0]，如果提交了 field1 和 field2，我想要数组 [0] 和数组 [1 ] 填充。

目前，我只有在填充了两个字段并且填充了其中一个字段时才会捕获该表单，并且它不会捕获。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>

<?php 

$name=$_POST['name'];

if($name)
{

    echo $name;

    }

?>

</head>

<body>

<form action="<?php $_SERVER['PHP_SELF']?>" method="post">

  <p>name
  <input name="name" id="name" type="text" />

  </p>
  Name

  <input name="name"  id="name" type="text" />
  <p>&nbsp;</p>

  <input name="submit" type="submit" />
</form>
</body>
</html> 
```

我希望变量名称的最终结果是一个数组，其中包含从字段一和字段二捕获的数据。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T20:29:14.297

将每个字段的名称更改为`name[]`，然后可以在 PHP 中使用`$_POST['name'][0]`和访问它们`$_POST['name'][1]`。

编辑：您还可以`name[1]`在 HTML 中使用来显式设置索引，甚至`name[foo]`可以使用`$_POST['name']['foo']`.

# c# - 如何在c#的文本框中检查字符串的结尾

> ID：12466622
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:28:29.953
> 
> 标签：c#, windows-phone-7

我是菜鸟，我被困在这段代码上。

我在文本框中接受用户的输入并将其保存在字符串中。然后我想运行一个循环，直到字符串结束，然后为不同的字符设置 if 条件......

```
string que;
que = textBlock1.Text;
        while (!que[i].Equals('\0'))
        {
            int res;
            if (int.TryParse(que[i].ToString(), out res) || que[i].ToString() == "x" || que[i].ToString() == "/" || que[i].ToString() == "^")
            {
                f[j] = f[j] + que[i].ToString();
            }
            if (que[i].ToString() == "+" || que[i].ToString() == "-")
                j++;
            i++;

        } 
```

有人可以指导我吗？我应该怎么办？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:29:59.053

利用：

```
textBlock1.Text.Lenght 
```

这样你就可以知道字符串的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:30:27.677

你试过 `foreach(char c in que){ /*your code*/ }`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:33:30.207

如果您只想遍历循环直到字符串结束，则应该使用这样的简单条件：

```
 int i = 0;
        while (i < que.Length )
        {
             // Your code
        } 
```

# excel - Excel OpenXML 将行设置为只读

> ID：12466624
> 
> 赞同：0
> 
> 时间：2012-09-17T20:28:41.387
> 
> 标签：excel, ms-office, openxml

我需要将标题行（包含我的 excel 文档中的标题的行）设为只读，并尽可能减少它的高度，使其几乎不可见。如何在 excel 本身或通过代码中执行此操作？

注意：标题行不是我的 excel 文档的第一行。实际上有 7 个（行），我想防止使用修改单元格中的任何数据。

# iphone - 从 UITextfield 读取数字

> ID：12466625
> 
> 赞同：0
> 
> 时间：2012-09-17T20:28:45.140
> 
> 标签：iphone, objective-c, xcode, interface-builder

我需要用户在界面构建器文本字段中输入一个数字，我想将其读取为数字我认为系统将其读取为字符串，如果您能提供帮助，这里没有输出是我的代码

在界面中

```
{
IBOutlet UITextField *arr_values;}

@property (nonatomic ,retain) IBOutlet UITextField *arr_values; 
```

并在 .m 文件中

```
int inputNumber = [arr_values.text intValue]; 
NSLog(@"%@",inputNumber); 
```

但是当我在界面生成器中输入 # 并感谢时没有输出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T07:36:09.817

> 你可以像这样从 textField 中获取价值。

```
float val=[txtField.text floatValue]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T20:36:39.080

将 %@ 替换为 %d，对于我们有 %d 的整数： `NSLog(@"%d",inputNumber);`

至于自定义键盘，在 viewDidLoad 方法中添加以下行：

`[inputNumber setKeyboardType: UIKeyboardTypeNumberPad];`

# sql-server - 我可以在 Linq 中完成这个 SQL 查询吗？

> ID：12466628
> 
> 赞同：0
> 
> 时间：2012-09-17T20:29:00.580
> 
> 标签：sql-server, linq-to-sql

我有一个列表，我想根据 myID 值从该列表中获取两组行。但是，我不想在“myOtherField”中获取 2 个具有相同值的项目。这在 SQL 中很容易。我可以在 Linq 中做到这一点吗？

```
select * from myTable where myID = 25

union

select * from myTable where myID = 35
and myOtherField not in (select myOtherField from myTable where myID = 25) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:48:24.390

[http://msdn.microsoft.com/en-us/library/bb386993.aspx](http://msdn.microsoft.com/en-us/library/bb386993.aspx)

[您将如何使用 LINQ 进行“不在”查询？](https://stackoverflow.com/questions/183791/how-would-you-do-a-not-in-query-with-linq)

```
var query =
(from obj in MyTable
select obj)
.Union
    (from obj in Mytable
where obj.myid = 35 && !(from obj.myotherfield in mytable   
        select obj)    
       .Contains(obj => obj.myid=25)    
    select obj) 
```

;

# javascript - 将 Leaflet 与 WMTS 服务器一起使用？

> ID：12466634
> 
> 赞同：6
> 
> 时间：2012-09-17T20:29:14.183
> 
> 标签：javascript, gis, leaflet

是否可以使用[Leaflet](http://leaflet.cloudmade.com/) javascript 库显示来自基于[WMTS](http://www.opengeospatial.org/standards/wmts)（Web Map Tile Service）的服务器的地图数据？Leaflet 似乎不支持开箱即用的 WMTS，但是否有任何插件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-13T20:18:32.637

您可以使用此处实现的 L.TileLayer.WMTS 类：http: [//depot.ign.fr/geoporttail/api/develop/tech-docs-js/examples/js/geoportalLeaflet.js](http://depot.ign.fr/geoportail/api/develop/tech-docs-js/examples/js/geoportalLeaflet.js)

结果如下： http: [//depot.ign.fr/geoportail/api/develop/tech-docs-js/examples/geoportalLeaflet.html](http://depot.ign.fr/geoportail/api/develop/tech-docs-js/examples/geoportalLeaflet.html)

# jquery - Wordpress jQuery 点击事件

> ID：12466653
> 
> 赞同：2
> 
> 时间：2012-09-17T20:30:41.330
> 
> 标签：jquery, wordpress, syntax

我这里有这个代码应该发出警报......

```
jQuery(".wpcart_gallery .thickbox").click(function($){
            alert('hi');
        }); 
```

但它不起作用:(没有错误，警报永远不会出现。我的标题中有正确的 JQuery.js 文件......我的语法有问题吗？

这是HTML代码

```
<div class="wpcart_gallery" style="text-align:center; padding-top:5px;">
<a class="thickbox cboxElement" href="DSC_0037.jpg" rev="DSC_0037.jpg"></a>
<a class="thickbox cboxElement" href="DSC_0036.jpg"  rev="DSC_0036.jpg"></a>
<a class="thickbox cboxElement" href="DSC_0118.jpg" rev="DSC_0118.jpg"></a>
</div> 
```

当点击 wpcart_gallery 中的一个链接时，我试图有一个点击事件。

这是页面，大图有三张图片，我正在寻找点击事件以触发如果点击这些图片中的任何一张...http://www.taranmarlowjewelry.com/?wpsc-product=product-1 -2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:45:40.223

我解决了这个问题

```
jQuery(".wpcart_gallery img").click(function($){
            alert('hi');
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T20:33:37.630

可能是您的 HTML 无效。以下都没有结束标签：

```
<a class="thickbox cboxElement" href="DSC_0037.jpg" rev="DSC_0037.jpg">
<a class="thickbox cboxElement" href="DSC_0036.jpg"  rev="DSC_0036.jpg">
<a class="thickbox cboxElement" href="DSC_0118.jpg" rev="DSC_0118.jpg"> 
```

如果我是 jQuery，我会感到困惑。

如果我添加结束标签它工作正常：http: [//jsfiddle.net/GtgEy/](http://jsfiddle.net/GtgEy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:33:06.413

您可能需要使用委托绑定：

```
jQuery(window).on('click', ".wpcart_gallery .thickbox", function(ev){
    alert('hi');

    ev.preventDefault();
}); 
```

`window`如果可以的话，您可以用其他一些父元素替换。鉴于：

```
<div id="test">
    <a href="#">Link 1</a>
    <a href="#">Link 2</a>
    <a href="#">Link 3</a>
    <a href="#">Link 4</a>
</div> 
```

你可以这样做：

```
jQuery("#test").on('click', 'a', function(ev) {
    alert('hi');

    ev.preventDefault();
}); 
```

# ruby-on-rails-3 - RoR：如何将所有用户的微博都分页在一个地方？

> ID：12466655
> 
> 赞同：0
> 
> 时间：2012-09-17T20:30:45.963
> 
> 标签：ruby-on-rails-3

我希望主页显示每个人的微博，但我一直收到错误。我觉得这可能是因为微博与用户有belong_to has_many 关系。但无论如何，这是主页的代码..

```
 <section>
        <%= render 'shared/user_info' %>
      </section>

      <section>
        <div id= "purchases">
          <%= render 'shared/micropost_form_purchase' %>
        </div>
        <div id="sales">
          <%= render 'shared/micropost_form_sale' %>
        </div>
      </section>

<ol class="microposts">
  <%= render @microposts %>
</ol>
<%= will_paginate @microposts %> 
```

它给了我这个错误：“nil”不是返回有效部分路径的 ActiveModel 兼容对象。在底部。

我添加了

```
 def home

    @microposts = Micropost.all

  end 
```

到 microposts 控制器。

谁能帮我吗？请？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:47:34.500

对渲染的调用正在寻找它找不到的局部视图。如果您将所有部分保存在views/shared/ 中，那么您是否有views/shared/micropost.html.erb 供其渲染？

# apache - 计划维护期间的重写规则

> ID：12466659
> 
> 赞同：2
> 
> 时间：2012-09-17T20:31:12.840
> 
> 标签：apache, .htaccess, mod-rewrite

我在 Apache 方面的经验有限，在 RewriteRules 方面的经验更少。我希望有人能指出我正确的方向。

每天早上 5:00 到 5:30 之间，我们的服务器上都会执行一些计划任务。在此期间，我们希望将 Web 请求重新路由到“维护中”页面。我认为使用 htaccess 页面很有意义，因为它允许我将请求指向通用页面，而无需维护大量设置更改。我的问题有两个部分：

1.  与当前时间/日期相比，htaccess 文件中的 RewriteCond 语句是最好的方法吗？
2.  是否可以编写规则以防止直接访问页面（即 index.htm）？如果是这样，是否也可以为所有子文件夹指定它？

鉴于 RewriteCond TIME 变量显示为“yyyymmddhhnnss”，我假设它看起来像这样：

```
RewriteCond %{TIME} ^(([0-9]{8})[0][5][0-2][0-9][0-5][0-9])
RewriteRule .* http://mysite.com/under_maintenance.htm 
```

这有意义吗？我感谢您提供的任何和所有帮助。

谢谢！

克雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:00:27.667

如果您希望这自动发生，您可以专门针对`%{TIME_HOUR}`and `%{TIME_MIN}`vars 进行匹配：

```
# hour = 05
RewriteCond %{TIME_HOUR} 05

# minute between 00 and 31
RewriteCond %{TIME_MIN} >00 [OR]
RewriteCond %{TIME_MIN} 00
RewriteCond %{TIME_MIN} <31

# can add other exceptions here

# make sure the request isn't FOR the maintenance page    
# redirect to maintenance
RewriteRule !^/?under_maintenance.htm$ http://mysite.com/under_maintenance.htm [L,R] 
```

`http://mysite.com/under_maintenance.htm`对于除维护页面之外的*每个请求*，此 302（临时）重定向到。所以答案是：

1.  是的，您可以使用 a`RewriteCond`来比较时间，这是一种无需执行任何额外操作即可自动执行此操作的好方法。
2.  此规则将阻止访问除维护页面之外的所有内容。您可以通过在 之前添加其他条件来改变这一点`RewriteRule`，例如，如果您想允许`/special_page.htm`，那么您将添加：

    ```
    RewriteCond %{REQUEST_URI} !^/special_page.htm$ 
    ```

    如果您想允许所有 iamges 和 css，那么您将添加：

    ```
    RewriteCond %{REQUEST_URI} !\.(css|png|jpe?g|gif|ico)$ [NC] 
    ```

# javascript - 在使用 Angular JS 进行模板化时使用辅助方法

> ID：12466661
> 
> 赞同：19
> 
> 时间：2012-09-17T20:31:21.933
> 
> 标签：javascript, templates, angularjs, view-helpers

目前正在将网站从以前的模板转换为 Angular。在我们之前使用的模板过程中，我们能够调用辅助方法来正确显示数据。例如：

```
<script type="text/javascript">
$.views.helpers({
    parseDate: function (jsonDate) {
      if (jsonDate != null) {
        var newDate = Utils.PrettyDate(Utils.ConvertJsonDateToJsDate(jsonDate));
        return newDate;
      }
    }
});
</script>

<div class="post-info">
  <span class="posted-date">Posted {{ :~parseDate(CreatedDate) }}</span>
  &nbsp|&nbsp
  <span>{{ :ReplyCount }} Replies</span>
</div> 
```

这是非常好的。就模板而言，试图找出一种方法来利用与 Angular 相同类型的功能。有没有可能做类似的事情？如果有怎么办？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-18T18:19:08.263

如果您只对数据显示感兴趣，那么正如 pkozlowski.opensource 已经提到的，过滤器是格式化数据以进行显示的“Angular 方式”。如果现有的日期过滤器不够用，我建议使用自定义过滤器。然后你的 HTML 会看起来更“有棱角”：

```
<span class="posted-date">Posted {{CreatedDate | dateFormatter}}</span> 
```

上面的语法清楚地表明您正在（仅）格式化。

这是一个自定义过滤器：

```
angular.module('OurFormatters', []).
 filter('dateFormatter', function() {               // filter is a factory function
   return function(unformattedDate, emptyStrText) { // first arg is the input, rest are filter params
       // ... add date parsing and formatting code here ...
       if(formattedDate === "" && emptyStrText) {
            formattedDate = emptyStrText;
       }
       return formattedDate;
   }
 }); 
```

通过将我们的过滤器/格式化程序封装到一个模块中，在多个控制器中（重新）使用它们也更容易——每个需要它们的控制器只需注入 OurFormatters。

过滤器的另一个好处是它们可以被链接。因此，如果有一天您决定在应用程序的某些地方空日期不应该显示任何内容（为空白），而在应用程序的其他地方空日期应该显示“待定”，过滤器可以解决后者：

```
<span class="posted-date">Posted {{CreatedDate | dateFormatter | tbdIfEmpty}}</span> 
```

或者您的自定义过滤器可以采用一个或多个参数（上面的示例支持一个参数）：

```
<span class="posted-date">Posted {{CreatedDate | dateFormatter:'TBD'}}</span> 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-17T20:55:58.850

您只需将该方法添加到您的控制器。像这样的东西：

```
<div class="post-info" ng-controller="MyCtrl">
    <span class="posted-date">Posted {{parseDate(CreatedDate)}}</span>
</div> 
```

然后控制器：

```
function MyCtrl($scope)
{
     $scope.parseDate = function(jsonDate) {
        //date parsing functionality
        return newParsedDate;
     }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-17T20:58:16.790

查看呈现的用例，您最好的调用将是此处描述的日期过滤器：[http](http://docs.angularjs.org/api/ng.filter:date) ://docs.angularjs.org/api/ng.filter:date 使用此过滤器，您可以编写：

```
{{CreatedDate | date}} 
```

提到的过滤器是可定制的，因此您可以使用不同的日期格式等。

一般来说，过滤器非常适合封装格式化逻辑/ UI 辅助函数。更多关于在这里创建过滤器：http: [//docs.angularjs.org/guide/dev_guide.templates.filters.creating_filters](http://docs.angularjs.org/guide/dev_guide.templates.filters.creating_filters)

过滤器很好，适合许多用例，但如果您只是在模板中使用任何函数之后，它是可能的。只需在范围内定义一个函数，您就可以直接在模板中使用它：

```
{{doSomething(CreatedDate)}} 
```

其中 doSomething 需要在一个范围（当前的一个或一个父范围）上定义：

```
function MyCtrl($scope) {

    $scope.doSomthing = function(argument){
        //ui helper logic here
    }    
} 
```

# sql - SQL 子查询总计/计数

> ID：12466667
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:31:41.080
> 
> 标签：sql

我正在尝试编写一个查询，列出经理的姓名和他们管理的人数。

在`Manager`表中，我们有经理`name`和`id`。

在表中，`Employee`我们有员工`name`和。`id``managerID`

我不明白如何计算经理管理的员工人数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:33:05.537

```
SELECT COUNT(e.EmpID), m.ManagerID
FROM Employee e
INNER JOIN Manager m 
ON e.ManagerID= m.ManagerID
GROUP BY m.ManagerID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:36:56.447

```
SELECT m.Name, COUNT(e.id) AS NumberOfEmployeesManaged
FROM Manager m INNER JOIN Employee e ON m.id = e.managerID
GROUP BY m.Name 
```

我认为应该这样做，只是在加入经理和员工表后对员工 ID 进行简单计数，并按经理姓名分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:39:23.087

```
SELECT count(emp.empid), mgr.managerid
FROM Employee emp
INNER JOIN Manager mgr ON emp.managerid=mgr.managerid
GROUP BY mgr.managerid; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T20:45:40.193

我不知道您是否可以在 JOIN 中使用 COUNT 聚合器。但是您可以运行 2 个查询。一会选择经理的姓名和身份证。第二个看起来像这样：

$id = 经理的 id

```
SELECT COUNT(*) FROM Employee WHERE managerID=$id 
```

或者，您不能使用 COUNT 并运行如下查询：

```
SELECT id FROM Employee WHERE managerID=$id 
```

然后生成的行数将是经理管理的员工数。

# paypal - SetMobileCheckout 调用上的 81251 上的 Paypal 内部服务错误

> ID：12466673
> 
> 赞同：1
> 
> 时间：2012-09-17T20:32:11.217
> 
> 标签：paypal, checkout

我的 SetExpressCheckout 调用很好，但是当我尝试调用 SetMobileCheckout 时，我不断收到错误消息。

关于我为什么会收到此内部服务错误的任何想法？

```
Array
(
[SMCFields] => Array
    (
        [phonecountrycode] => 
        [phonenum] => 
        [amt] => 20.00
        [currencycode] => USD
        [taxamt] => 
        [shippingamt] => 
        [desc] => $40.00 value at Il Bastardo
        [number] => 
        [custom] => 
        [invnum] => 
        [returnurl] => http://mydomain.com/checkout/review
        [cancelurl] => http://mydomain.com/checkout/cancel
        [addressdisplay] => 
        [sharephonenum] => 
        [email] => 
    ) 
```

这是我在通话中收到的回复

```
Array
(
[ACK] => Failure
[L_ERRORCODE0] => 81251
[L_SHORTMESSAGE0] => Internal Error
[L_LONGMESSAGE0] => Internal Service Error
[L_SEVERITYCODE0] => Error
[ERRORS] => Array
    (
        [0] => Array
            (
                [L_ERRORCODE] => 81251
                [L_SHORTMESSAGE] => Internal Error
                [L_LONGMESSAGE] => Internal Service Error
                [L_SEVERITYCODE] => Error
            )

    )

[REQUESTDATA] => Array
    (
        [USER] => sdk-three_api1.sdk.com
        [PWD] => QFZCWN5HZM8VBG7Q
        [VERSION] => 93.0
        [BUTTONSOURCE] => AngellEYE_PHPClass
        [SIGNATURE] => A-IzJhZZjhg29XQ2qnhapuwxIDzyAZQ92FRP5dqBzVesOkzbdUONzmOU
        [METHOD] => SetMobileCheckout
        [AMT] => 20.00
        [CURRENCYCODE] => USD
        [DESC] => $40.00 value at Il Bastardo
        [RETURNURL] => http://mydomain.com/checkout/review
        [CANCELURL] => http://mydomain.noo.com/checkout/cancel
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:31:52.583

为什么要使用 SetMobileCheckout？该 API 调用已被弃用。Mobile Express Checkout 早已取代它。

# android - 使用 ActionBar 或 ActionBarSherlock 的主题拉伸 Android 按钮图像

> ID：12466674
> 
> 赞同：4
> 
> 时间：2012-09-17T20:32:13.060
> 
> 标签：android, android-actionbar, actionbarsherlock

我刚刚将 ActionBar 集成到我的 Android 应用程序中（实际上，我最终选择了 ActionBarSherlock 以实现向后兼容性）。

要在活动上显示 ActionBar，您必须使用一组特定的主题：Theme.Holo.* for ActionBar 或 Theme.Sherlock.* for ActionBarSherlock

每当我修改 AndroidManifest.xml 以使现有 Activity 的样式使用上述 ActionBar 主题之一时，我发现 Activity 上每个 Button 的背景图像都会失真。具体来说，图像垂直拉伸的像素比图像实际包含的像素多。只有当我使用 layout_height="fill_parent" 时，我才会期望这种行为，但我不是。此外，其他主题（与 ActionBar 相关的主题除外）似乎不会发生这种情况。

我尝试发布屏幕截图，但我还没有足够高的声誉。我道歉。

这是我的一个按钮声明，它受到主题的不利影响：

```
<Button
    android:textStyle="bold"
    android:typeface="sans"
    android:layout_height="wrap_content"
    android:id="@+id/btnAddtoBag" android:layout_width="wrap_content"
    android:background="@drawable/add_to_bag_selector">
</Button> 
```

由于它引用了一个选择器，我还将包含选择器的 XML，其中引用了实际的 png 文件：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:drawable="@drawable/selected_add_to_bag" /> <!-- pressed -->
    <item android:state_focused="true"
          android:drawable="@drawable/selected_add_to_bag" /> <!-- focussed -->
    <item android:drawable="@drawable/default_add_to_bag" /> <!-- default -->
</selector> 
```

最后，这是我在发生这种情况时应用到我的主题的样式：

```
<style name="Theme.CustomActionBar" parent="Theme.Sherlock.Light.DarkActionBar.ForceOverflow">
    <item name="actionBarStyle">@style/ActionBar</item>
</style>

<style name="ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="android:displayOptions">showHome|useLogo</item>
    <item name="displayOptions">showHome|useLogo</item>     
</style> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T20:36:24.367

使用 ImageButton 并设置 android:src="@drawable/add_to_bag_selector" 并且您的图像不应该被拉伸。

您还需要设置 android:backgorund="@android/color/transparent"

# seo - Schema.org 微格式未包含在搜索结果中

> ID：12466677
> 
> 赞同：0
> 
> 时间：2012-09-17T20:32:34.747
> 
> 标签：seo, microformats, schema.org, rich-snippets

在过去的几个月里，我一直在尝试将 schema.org 微格式集成到我的餐厅评论网站中，这样我的谷歌搜索结果就会包含丰富的标记，比如星级、平均价格等。然而，这些努力完全失败了。Google Rich Snippet Testing Tool 表示我的网页已完全标记，甚至显示正确的丰富标记搜索片段。但由于某种原因，现实世界的搜索片段甚至不接近匹配。在过去的几个月里，我联系了谷歌几次，但他们从未回复过我。我什至试图模仿 Yelp 的标记，但即使这样也失败了。有谁知道发生了什么？

*   以下是餐厅页面的示例：[http ://peepmeat.com/restaurant.php?id=88](http://peepmeat.com/restaurant.php?id=88)
*   这是 Rich Snippet 测试工具中的那个页面：[http ://www.google.com/webmasters/tools/richsnippets?url=http%3A%2F%2Fpeepmeat.com%2Frestaurant.php%3Fid%3D88](http://www.google.com/webmasters/tools/richsnippets?url=http%3A%2F%2Fpeepmeat.com%2Frestaurant.php%3Fid%3D88)
*   这是该页面的 Google 搜索：[https](https://www.google.com/search?ie=UTF-8&q=peepmeat+Bonnie) ://www.google.com/search?ie=UTF-8&q= peepmeat+Bonnie 's+Grill

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T07:22:05.147

从该页面：

> “请注意，不能保证此页面会在实际搜索结果中显示丰富的片段。有关更多详细信息，请参阅常见问题解答。”

现在，网站似乎在某种程度上是手动批准的。我怀疑他们需要年龄、相关性、手动审查等的组合才能出现。

这并不令人惊讶，否则网站可以随意放置他们喜欢的任何标记，而谷歌会在他们的 SERP 中歪曲它们。

顺便说一句，我不会说您正在受到惩罚——这不是抑制您的网站的负面力量，而是您需要达到的门槛才能获得资格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:55:09.730

我们已经成功使用以下代码：

```
<div itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating">
<span itemprop="ratingValue">9.875</span>/<span itemprop="bestRating">10</span> based on <span itemprop="ratingCount">5</span> reviews 
```

请注意 bestRating 值，但如前所述，不能保证显示在结果中

# php - 浏览器会缓存图片吗？

> ID：12466680
> 
> 赞同：5
> 
> 时间：2012-09-17T20:32:44.710
> 
> 标签：php, html, browser-cache

我有一个带有一些 Javascript 的 PHP 页面，该页面会在固定时间间隔（5 秒）后更改 IMG 标记上的 SRC 属性。我循环浏览了固定数量的图像。PHP 为所有图像 URL 构建一个字符串数组。图像很小，小于 10k。

我如何判断浏览器是否正在缓存图像，如果没有，我必须做什么来确保浏览器缓存它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:36:24.833

是的，即使您的标题另有说明，浏览器也会缓存它们。我发现最好的组合是发出必要的 Cache-Control 标头以及将随机字符串附加到源 URL。

例如，以秒为单位设置最大年龄：

```
header("Cache-Control: max-age=3600"); 
```

然后将随机字符串附加到您的 img 源。这需要在 Javascript 中，而不是在 PHP 中，因为一旦您的 URL 是在 PHP 中生成的，它们就不会使用新的随机字符串进行更新：

```
var randomString = "" + new Date().getTime();
var imageUrl = yourImageArray[someIndex] + "?" + randomString; 
```

希望你能明白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:35:27.783

如果您需要尝试强制浏览器不缓存某些图像，则应正确配置服务器为每个图像请求发送的标头，以便它们发送正确的 Cache-Control 标头。

# jquery - 带有 Html 服务的 JQuery 示例

> ID：12466681
> 
> 赞同：2
> 
> 时间：2012-09-17T20:32:47.100
> 
> 标签：jquery, jquery-ui, google-apps-script

我试图找出 HTML 服务中的 JQuery，但我似乎无法让它工作。

按照[https://developers.google.com/apps-script/html_service](https://developers.google.com/apps-script/html_service)的第一个示例，我可以得到 Hello World！显示。

但是，如果我添加一个脚本标签并指向 JQuery，它就不起作用，页面上什么也没有显示，它只是空白！

这是我的 code.gs 文件：

```
function doGet() {
  return HtmlService.createHtmlOutputFromFile('myPage');
} 
```

有效的 myPage.html 如下所示：

```
<html>
  <body>
    Hello World!
  </body>
</html> 
```

一个看起来不像这样**的：**

```
<html>
  <body>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"/>
    Hello World!
  </body>
</html> 
```

那么如何让 JQuery（最终是 JQueryUI）工作呢？是否有任何示例或教程？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T02:02:37.620

Here is a working accordion html file so just name it myPage.html

I've found some versions of jquery do not work with GAS even though they are on the compatibility list.

```
<html>
<head>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/themes/humanity/jquery-ui.css" type="text/css" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
  <script>
  $(document).ready(function() {
    $("#accordion").accordion({ collapsible: true, active: false });
    $('.header-checkbox').click(
    function(e){
        e.stopPropagation();
    }
    );
  });
  </script>
</head>
<body style="font-size:62.5%;">

<div id="accordion">
        <h3 id='example'>
            <a href='#'>
                <label><input class='header-checkbox' type='checkbox' />Title</label>
            </a>
        </h3>
        <div>
        <p>
        Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
        ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
        amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
        odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
        </p>
        </div>
        <h3 id='example'>
            <a href='#'>
                <label><input class='header-checkbox' type='checkbox' />Title2</label>
            </a>
        </h3>
        <div>
        <p>
        Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
        ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
        amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
        odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
        </p>
        </div>
        <h3 id='example'>
            <a href='#'>
                <label><input class='header-checkbox' type='checkbox' />Title3</label>
            </a>
        </h3>
        <div>
        <p>
        Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
        ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
        amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
        odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
        </p>
        </div>
    </div>
</div>

</body>
</html> 
```

# c# - 当 bin 文件夹中存在程序集文件时空闲后的 ASP.net 异常“FileNotFoundException”

> ID：12466691
> 
> 赞同：0
> 
> 时间：2012-09-17T20:33:15.150
> 
> 标签：c#, asp.net, .net-assembly, filenotfoundexception

该文件存在，名称正确且未损坏。如果我将它从“Bin”中移出并移回，它会再次工作，大约 5 分钟，然后出现下面的错误。任何刷新文件的操作都可以，重新发布它，重命名或移动会使站点再次工作，片刻。

> {“消息”：“无法加载文件或程序集 \u0027Ouranos，版本=1.0.0.0，Culture=fr-CA，PublicKeyToken=null\u0027 或其依赖项之一。Le fichier spécifié est introuvable。”，“StackTrace”： "在 Services.Asynchrone(String DimensionX, String DimensionY, String Action, String Culture, String Utilisateur, String Interface, String Source, String Champ, String Valeur, String Classement, String Direction, StriFileNotFoundExceptionng Page, String Itérations)","ExceptionType" ：“系统.IO。”}

Fusion 确实给了我一个错误代码 (0x80070002)，它指出我需要获取 Process Monitor。这将我带到临时程序集文件夹。现在我可能错了。比较健康网站和生病网站的缓存文件，我发现有些奇怪。

*   健康的网站作为缓存中的 BIN 中的所有 DLL。
*   生病的网站在 BIN 中的缓存中缺少两个 DLL。

现在，我知道 ASP.net 倾向于说缺少主库，而实际上它是缺少的引用库之一。在目前的情况下，我不知道我能做些什么来解决这个问题。这两个 DLL 没有设置在缓存中，因此当它尝试加载主 DLL 时，它无法从缓存中找到另外两个 DLL，并抛出一个在主 DLL 上找不到的文件。

两个罪魁祸首是：

*   PresentationCore.dll
*   WindowsBase.dll

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:53:39.560

要解决这种错误，您可以使用 Fusion 日志，有关如何启用它以及如何使用它的说明可以在此处找到：[如何在 .NET 中启用程序集绑定失败日志记录 (Fusion)](https://stackoverflow.com/questions/255669/how-to-enable-assembly-bind-failure-logging-fusion-in-net)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:44:50.067

看起来下面的代码实际上解决了这个问题。它检查程序集的所有必需程序集并加载缺失的程序集。我以前有这样的代码，但它不起作用，因为没有`!(Assemblée is System.Reflection.Emit.AssemblyBuilder) && (Assemblée.GetType().FullName != "System.Reflection.Emit.InternalAssemblyBuilder")`不存在，并且代码在 .net 4.0 及更高版本中导致异常。它并不优雅，但它可以完成工作。

```
public static void Chargeur()
{
    var Assemblées_Chargées = (from Assembly Assemblée in AppDomain.CurrentDomain.GetAssemblies() where !(Assemblée is System.Reflection.Emit.AssemblyBuilder) && (Assemblée.GetType().FullName != "System.Reflection.Emit.InternalAssemblyBuilder") && (!Assemblée.GlobalAssemblyCache) && (Assemblée.CodeBase != Assembly.GetExecutingAssembly().CodeBase) select Assemblée).ToList();

    var Chemins_Chargés = Assemblées_Chargées.Select(Assemblée => Assemblée.Location).ToArray();
    var Chemins_Référencés = Directory.GetFiles(AppDomain.CurrentDomain.BaseDirectory, "*.dll");
    var Assemblées_NonChargées = Chemins_Référencés.Where(Références => !Chemins_Chargés.Contains(Références, StringComparer.InvariantCultureIgnoreCase)).ToList();

    Assemblées_NonChargées.ForEach(path => Assemblées_Chargées.Add(AppDomain.CurrentDomain.Load(AssemblyName.GetAssemblyName(path))));
} 
```

# php - 使用限制/偏移对 Foursquare API 结果进行分页以构建表

> ID：12466692
> 
> 赞同：1
> 
> 时间：2012-09-17T20:33:22.060
> 
> 标签：php, json, api, foursquare, offset

我正在尝试使用 PHP 构建一个非常基本的网页，该网页在 html 表中显示 Foursquare 用户的 800 多个提示以及他们的保存和喜欢计数，用于报告和分析目的。这是我在foursquare上的意思的一个例子：http: [//foursquare.com/redbull/list/tips](http://foursquare.com/redbull/list/tips)。（再一次，redbull 只是我的例子。我正在与一个拥有 812 个提示的组织合作）。

Foursquare 提供了一个 api 来获取这些数据：

```
https://api.foursquare.com/v2/lists/{USER-ID}/tips?oauth_token={oauth-token}&limit=200&v=20120917 
```

但是您一次只能获得 200 个结果，并且必须使用偏移量才能获得下一个 200、400 等等：

```
https://api.foursquare.com/v2/lists/{USER-ID}/tips?oauth_token={oauth-token}&limit=200&offset=200&v=20120917 
```

在我的情况下，我需要调用 API 5 次才能获得所有 812 提示。我想出了一个非常笨重且不可扩展的解决方案，我确实多次调用 API 并继续在我的表中创建行。这是我丑陋但有效的解决方案：http: [//pastebin.com/WL6kdTPY](http://pastebin.com/WL6kdTPY)

但很明显，随着提示的不断增加，我需要不断修改我的代码以应对 200 次以上的每次迭代。在 API 数据中，我可以看到总提示 (812) 的提及，所以我觉得我应该能够使用它来提出更精益的解决方案。

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:46:06.790

第二个循环应该可以解决问题：

```
<?php 

$today = date("Ymd");
$likes = 0;
$todo = 0;

$offset = 0;
$limit = 200;
do{
    $url="https://api.foursquare.com/v2/lists/{user-id}/tips?oauth_token={oauth_token}&limit=".$limit."&offset=".$offset."&v={$today}";
    $source = file_get_contents($url);
    $obj = json_decode($source, true);
    foreach($obj['response']['list']['listItems']['items'] as $item)
    {

        echo "<tr>";
        echo "<td  style = 'width: 75px;'>" .  date('m/d/y', $item['createdAt']) . "</td>" ;
        echo "<td  style = 'width: 200px;'>" . $item['venue']['name'] . "</td>" ;    
        echo "<td  style = 'width: 400px;'>" . $item['tip']['text'] . "</td>" ;
        echo "<td  style = 'width: 50px; text-align: center;'>" . $item['tip']['likes']['count'] . "</td>" ;
        echo "<td  style = 'width: 50px; text-align: center;'>" . $item['tip']['todo']['count'] . "</td>" ;
        echo "</tr>";
        $likes += $item['tip']['likes']['count'];
        $todo += $item['tip']['todo']['count'];

    }
    $offset += $limit;
} while(count($obj['response']['list']['listItems']['items']) >= $limit);

?> 
```

基本上，您检查返回项目的数量是否低于每个请求的限制。那应该意味着你走到了尽头

# javascript - 如何在 IE8 中禁用 body.blur()？

> ID：12466693
> 
> 赞同：3
> 
> 时间：2012-09-17T20:33:23.280
> 
> 标签：javascript, internet-explorer-8, onblur, document-body

我在一个在 IE8 中运行的企业 Web 应用程序上工作。它似乎`blur()`在正文上被调用，导致 IE 窗口被发送到后台。不幸的是，此代码位于供应商控制的应用程序的一部分中。

是否有任何可能的方法来防止`blur()`在不修改实际调用的代码的情况下被调用`body.blur()`？

由于这是一个企业应用程序，应用程序本身更改之外的解决方案是可以接受的；如更改 IE8 设置、注册表等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:40:51.497

您应该能够对`blur`虚拟方法进行硬编码。如果您可以在它被调用之前进入，只需调用`body.blur = function() {};`（假设`body`指向您的 DOM 主体元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:52:44.110

使用 jQuery，您可以简单地阻止事件：

```
$('body').blur(function(e) { e.preventDefault(); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:59:38.030

如果使用 Firefox**是**一个选项，我有两个答案，我建议使用[Greasemonkey](https://en.wikipedia.org/wiki/Greasemonkey)替换该功能。

1.  [使用 javascript 为 facebook 页面“like”创建一个 keylistener 热键](https://stackoverflow.com/questions/10215492/using-javascript-to-create-a-keylistener-hotkey-for-facebook-page-like/10216501#10216501)
2.  [Greasemonkey 脚本替换 jQuery 插件功能？](https://stackoverflow.com/questions/10163168/greasemonkey-script-to-replace-jquery-plugin-function/10174336#10174336)

如果您**必须**使用 IE，您可能需要更改页面本身。
（我知道 IE 有 Trixie 和[IE7pro](http://www.ie7pro.com)，但从未使用过）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:32:19.070

我在使用 javaScript 编辑器时遇到了一个问题：[CLEditor](http://premiumsoftware.net/cleditor/)，如果我在其上使用 jQuery blur() 方法，IE 窗口会转到后台。[CLEditor](http://premiumsoftware.net/cleditor/)有它的 iframe，它有自己的主体。当您提取该主体并使用 body.blur() 时，IE 浏览器将转到后台。

其他浏览器没有显示这种行为，因此如果您遇到这种情况，最好使用 FF 或 Chrome。

如果你删除 body.blur()，你可能会遇到比现在更少的 IE 问题，但你仍然可能会遇到一些小错误（某些事情在某些时候并没有失去焦点），但我想你可以忍受它。但是，如果 blur() 事件包含一些逻辑，则可能会出现问题 - 然后找到它的定义并将逻辑移动到由浏览器启动的其他一些事件（onload 或 ready）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-25T08:12:58.027

```
document.body.blur=function(){document.body.focus()} 
```

# java - 如何从 SOAP 响应中获取单个元素的值？（爪哇）

> ID：12466701
> 
> 赞同：0
> 
> 时间：2012-09-17T20:34:09.220
> 
> 标签：java, android, xml, parsing, dom

我想从以下 InputStream 中获取“SearchResult”值：

```
HTTP/1.1 200 OK
Content-Type: application/soap+xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
    <soap12:Body>
        <SearchResponse xmlns="[url here]">
            <SearchResult>[THIS VALUE HERE]</SearchResult>
        </SearchResponse>
      </soap12:Body>
</soap12:Envelope> 
```

我一直在尝试使用 DOM 解析器，但遇到了麻烦，并且不确定它是否是正确的方法：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder db;
Document doc = null;

db = factory.newDocumentBuilder();
InputSource inStream = new InputSource();
inStream.setCharacterStream(new StringReader(soapResponse));
doc = db.parse(inStream);  

NodeList nl = doc.getElementsByTagName("SearchResult");
//Not sure how to get the value... Everything I've tried returned "null". Help? 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:43:20.483

对于 Java 和 Android 8 级或更高版本： `nodeList.item(0).getTextContent()`

对于 android 级别 1 及更高版本： `nodeList.item(0).getFirstChild().getNodeValue()`

# asp.net-mvc - MVC 与实体框架保存问题

> ID：12466705
> 
> 赞同：0
> 
> 时间：2012-09-17T20:34:21.187
> 
> 标签：asp.net-mvc, entity-framework-4

我有一个用于注册培训人员的页面。当前页面上有三个下拉菜单，一个选择要注册的人，一个选择课程，一个选择提供课程的会话。要求将页面修改为现在具有四组课程和会话下拉菜单，以允许用户一次最多为一个人注册四个课程。我的问题出现在如何处理现在的表单发布上。之前，如果用户尝试将人员添加到他们已经注册实体框架模型绑定的课程，则会捕获错误并将错误消息发送回表单。我不确定如何实现这个绑定，因为有四个实例要同时评估和保存。我是 MVC 和 EF 的新手，因此将不胜感激任何帮助/指导。

编辑：下面是原始控制器保存功能的一部分：

```
 var AddToCourse = new Session_Registrant()
{
    RegistrantID = RegistrantID,
    SessionID = Session1,
    RegistrantOrg = regOrg,
    RegistrantTitle = title,
    RegistedDate = DateTime.Now

};
//attempt to save
try
{
    if (ModelState.IsValid)
    {
        db.AddToSession_Registrant(AddToCourse);
        db.SaveChanges();
    }
}
catch (DataException error)
{
    if (error.InnerException != null)
    {
        if (error.InnerException.Message.Contains("UNIQUE KEY constraint"))
        {
            //adding custom error message to explain the failure
            ModelState.AddModelError("", "Error! Registrant has already been added to this course session.");
        }
    }
    else
    {
        ModelState.AddModelError("Error", error.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:52:55.017

我想知道问题是否在于功能的设计而不是实现。问题是否应该根据注册实体和课程/会话实体之间的一对多关系来定义。

我也认为在设计中使用异常是不好的做法，这是一个定义问题。您（您的代码）是否应该提出以下问题：

*   这是注册学生吗
*   此学生是否已在此会话中预订了课程
*   该学生是否已在其他课程中注册课程

换句话说，定义您的业务规则，实施它们，问题应该自行解决为 SMOC（编码的小问题）。

如果这个回复没有更直接的帮助，我很抱歉，但我觉得这是错误的起点。总之祝你好运。

# c++ - 通过引用传递数组

> ID：12466710
> 
> 赞同：2
> 
> 时间：2012-09-17T20:35:15.697
> 
> 标签：c++

在将数组传递给函数后，我遇到了从数组中取出垃圾的问题。这是将其传递给仅将其打印出来的函数的正确方法吗？

```
while(infile){
        infile >> batch;
        infile >> amount;
        cout << batch << "     " << amount<< endl;
        totalChocolates[batch-1]+=amount;   
        chocolateBatches[batch-1]++;

    }

    //header();
    print(totalChocolates,chocolateBatches);

    system("pause");
    return 0;

void print(int *total,int *batch)
{
    for(int i = 0;i<size;i++)
    {
        cout << i+1 << "     "  << batch[i] << "     " << total[i] << endl;

    }
} 
```

好的，我退出了该功能，但我仍然收到垃圾。

```
while(infile>> batch >> amount){
        //infile >> batch;
        //infile >> amount;
        cout << batch << "     " << amount<< endl;
        totalChocolates[batch-1]+=amount;   
        chocolateBatches[batch-1]++;

    }
    for(int i = 0;i<size;i++)
    {
        cout << i+1 << "     "  << chocolateBatches[i] << "     " << totalChocolates[i] << endl;

    } 
```

它返回

> ```
> 1     64
> 8     907
> 18     1133
> 9     636
> 3     1134
> 16     1101
> 6     313
> 7     791
> 7     1130
> 1     1221
> 20     332
> 22     697
> 6     807
> 2     36
> 2     747
> 16     1219
> 3     859
> 18     639
> 18     312
> 7     1079
> 10     1074
> 5     678
> 18     59
> 1     -858993418     -858960818
> 2     -858993429     -858971910
> 3     -858993421     -858963346
> 4     -858993431     -858970692
> 5     -858993427     -858963901
> 6     -858993416     -858961011
> 7     -858993417     -858960812
> 8     -858993421     -858961874
> 9     -858993417     -858960079
> 10     -858993418     -858960161
> 11     -858993422     -858963562
> 12     -858993428     -858970812
> 13     -858993460     -858993460
> 14     -858993427     -858967859
> 15     -858993422     -858964267
> 16     -858993418     -858954549
> 17     -858993423     -858966453
> 18     -858993423     -858964725
> 19     -858993460     -858993460
> 20     -858993433     -858973375
> 21     -858993419     -858963644
> 22     -858993426     -858968664
> 23     -858993456     -858993060
> 24     -858993460     -858993460
> 25     -858993455     -858990222
> Press any key to continue . . . 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:37:18.907

差不多，是的。问题是，您没有正确使用数组的大小，因此您可能只是在最后遇到未初始化的空间。还要将大小传递给`print`函数，这样你就不会跑到最后。

编辑：尽管在您的问题评论中注意 Kerrek 的警告。

# javascript - Backbone 动态切换模板

> ID：12466714
> 
> 赞同：12
> 
> 时间：2012-09-17T20:35:37.003
> 
> 标签：javascript, backbone.js, marionette

我需要根据用户选择的日期是过去还是将来的日期来初始设置主干视图的模板，并在收集更改从不同日期提取数据时切换它。我该怎么做呢？我以为我可以将模板设置为一个函数，该函数根据我是否过去返回正确的选择器字符串，但这不起作用。

```
pR.views.ScheduleJobView = Backbone.Marionette.ItemView.extend({
    tagName: "tr",
    // NEED A WAY TO SWITCH THIS TOO
    template: "#schedule-job-template"
});

pR.views.ScheduleJobsView = Backbone.Marionette.CompositeView.extend({
    // DOESN'T WORK
    template: function () {
        if (this.isPast)
            return "#schedule-jobs-past-template";
        else
            return "#schedule-jobs-template";
    },      itemView: pR.views.ScheduleJobView,

    itemView: pR.views.ScheduleJobView,
    itemViewContainer: "tbody",

    // Defaults for the model's url
    baseUrl: "/schedules/day/",
    baseApiUrl: "/api/schedule/day/",
    // Empty object to store url parameters
    urlParameters: {},

    initialize: function () {
        pR.vent.bindTo("change:parameters", this.changeUrl, this);
        this.model.url = this.baseApiUrl;
    },

    onRender: function () {
        console.log("Rendering Jobs View");
    },

    // Change the main model's url
    changeUrl: function (parameters) {
        // merge new parameters with old ones
        this.urlParameters = _.extend(this.urlParameters, parameters);

        var url = "";
        var apiUrl = this.baseApiUrl;

        _.each(this.urlParameters, function (value, parameter) {
            // Add each parameter segment to the url
            url = url + parameter + '/' + value + '/';
            apiUrl = apiUrl + parameter + '/' + value + '/';
        });

        this.model.url = apiUrl;
        console.log("Updated CurrentDay model url to " + apiUrl);
        this.model.fetch();

        console.log("Navigating to " + url);
        pR.routers.appRouter.navigate(url);
    },

    // Check if we are in the past
    isPast: function () {
        var year = this.urlParameters.year;
        var month = this.urlParameters.month;
        var day = this.urlParameters.day;
        var selectedDate = Date(year, month, day);

        if (selectedDate < Date()){
            return true;
        } else {
            return false;
        }
    }
}); 
```

请注意，我在这里也使用了 Marionette 的复合视图，因此我还需要一种方法来根据时间范围更改 itemView 的模板。如果我的基本策略考虑不周，我绝对愿意以不同的方式处理这个问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-17T22:56:28.387

您正在将 this.template 设置为一个方法，而 Marionette 正在寻找一个字符串值。

您可能可以使用相同的逻辑但将其放入您的`initialize`方法中。

```
pR.views.ScheduleJobsView = Backbone.Marionette.CompositeView.extend({
    template: null,
    [ ... ]
    initialize: function () {
         if (this.isPast) {
             this.template = "#schedule-jobs-past-template";
         } else {
             this.template = "#schedule-jobs-template";
         } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-31T11:13:33.103

为此内置了一个名为 getTemplate 的函数，我知道我在文档中看到了它（这就是我在谷歌上搜索的内容）

[Marionette 模板切换文档](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.view.md#change-which-template-is-rendered-for-a-view)

# objective-c - 静态库与源代码？

> ID：12466715
> 
> 赞同：0
> 
> 时间：2012-09-17T20:35:47.097
> 
> 标签：objective-c, xcode, open-source, static-libraries

我正在创建一个模块化的开源库。假设项目中有 15 个`.m`文件。

我应该（1）像[Venmo iOS SDK](https://github.com/venmo/venmo-ios-sdk)（Cocoa Touch 静态库）一样发布它还是（2）像[JSONKit](https://github.com/johnezang/JSONKit)（只是源代码）一样发布它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:31:06.587

作为源代码发布意味着您和您的开发人员在新架构出现时不会遇到问题。构建为 armv6 的静态库现在无法与最新的 Xcode 一起使用。

源代码发布的一个警告，因为您不知道它添加到的项目将具有哪些构建设置，您需要做额外的工作以确保它尽可能地在没有警告的情况下构建，即使是迂腐警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:48:57.237

我更喜欢框架而不是静态库。如果您最终需要，更容易在框架包中发送资源，并且动态链接没有成本。如果保证它的纯 C 和库依赖项存在，那么它可能没问题。但总的来说，我尽量避免静态链接，除非我知道目标操作系统在部署时具有该二进制文件的确切依赖项。

使用运行时所需的端点（为该确切平台编译但具有相同的外部接口）加载动态库比使用直接编译为不存在的外部依赖项的静态库失败要容易得多目标平台。

也许我疯了，但这是我一直用 C、C++ 或 obj C 做的事情。只是我的看法。

[http://en.wikipedia.org/wiki/Static_library](http://en.wikipedia.org/wiki/Static_library)

# javascript - 获取具有相同类前缀和/或相同后缀的元素包，然后更新此包

> ID：12466716
> 
> 赞同：0
> 
> 时间：2012-09-17T20:35:49.593
> 
> 标签：javascript

让我们举个例子：

```
<div class="gg-1"></div> // 1
<div class="gg-1"></div> // 1
<div class="gg-1"></div> // 1

<div class="gg-3"></div> // 3
<div class="gg-3"></div> // 3

<div class="gg-5"></div> // 5
<div class="gg-5"></div> // 5 
```

我如何更新这些 div 类以获得以下结果？

```
<div class="gg-1"></div> // 1
<div class="gg-1"></div> // 1
<div class="gg-1"></div> // 1

<div class="gg-2"></div> // 2
<div class="gg-2"></div> // 2

<div class="gg-3"></div> // 3
<div class="gg-3"></div> // 3 
```

需要纯 Javascript（附加 JQuery）。

我下面的函数可以帮助您按类获取带有前缀的元素：

```
function scn$(container,selectorTag,prefix) {
    var items = [], myPosts = document.getElementById(container).getElementsByTagName(selectorTag);

    for (var i = 0; i < myPosts.length; i++) {
        // Omit Undefined Null Check
        if (myPosts[i].className.lastIndexOf(prefix,0) === 0) {
            items.push(myPosts[i]);
        }
    }
    return items;
} 
```

所以现在我们可以通过 选择我们的元素`scn$('container','div','gg-')`。

下一步是什么？有什么想法/线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:03:00.097

试试下面的方法，让我知道，

**演示：http:** [//jsfiddle.net/pmc3g/](http://jsfiddle.net/pmc3g/)

```
(function() {

    function scn$(container, selectorTag, prefix) {
        var items = [],
            myPosts = document.getElementById(container).getElementsByTagName(selectorTag);

        var prevClass = null, curVal = 0;
        for (var i = 0; i < myPosts.length; i++) {
            var curClass = myPosts[i].className;
            // Omit Undefined Null Check
            if (curClass.lastIndexOf(prefix, 0) === 0) {

                if (prevClass != curClass) {
                    prevClass = curClass;
                    curVal++;                   
                }

                myPosts[i].className = prefix + curVal;
                items.push(myPosts[i]);
                console.log(myPosts[i].className);
            }
        }
        return items;
    }

    scn$('container', 'div', 'gg-');

})(); 
```

# javascript - jquery确认表单提交

> ID：12466718
> 
> 赞同：2
> 
> 时间：2012-09-17T20:35:55.833
> 
> 标签：javascript, jquery

我是 javascipt/jquery 的新手，我找不到使用提交“onchange”的选择表单来确认表单提交的方法。

当用户选择一个新时间时，我希望有一个提醒说，“更改时间将清空你的购物车，你想继续吗？”

然后用户可以选择“取消”更改或确认。

```
 <form id="hour_select" action="" method="POST" name="hour_form">
        {% csrf_token %}
        <select name="hour" onchange='hour_form.submit()'>
            <option {{selected1900}} value="1900">7:00 PM</option>
            <option {{selected2000}} value="2000">8:00 PM</option>
            <option {{selected2100}} value="2100">9:00 PM</option>
            <option {{selected2200}} value="2200">10:00 PM</option>
            <option {{selected2300}} value="2300">11:00 PM</option>
            <option {{selected2400}} value="2400">12:00 AM</option>
            <option {{selected100}} value="100">1:00 AM</option>
            <option {{selected200}} value="200">2:00 AM</option>
        </select>

        <input type="hidden" name="submit=" value="hour_change"/>

    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:39:35.800

`onchange`您可以使用 jQuery`on`方法代替使用属性：

```
$(document).ready(function(){
  $('select[name=hour]').on('change', function() {
     if (confirm("Changing the time will ....")) {
         $('#hour_select').submit()   
     } else {
         $('option:first', this).prop('selected', true)
     }
  })
}) 
```

另请注意，您应该将代码放在文档就绪处理程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T20:43:43.850

像这样放置您的代码，以便在加载时绑定事件：

```
 $(document).ready(function(){
     $('select[name=hour]').change(function(){
         if(confirm('Changing the time will empty your cart, do you wish to continue?')){
             $('#hour_select').submit();
         }
     });
 }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T20:39:24.180

```
$('select[name=hour]').on('change', function(){
    var conf = confirm('Changing the time will empty your cart, do you wish to continue?');
    if(conf == true){
        hour_form.submit();
    }else{
        //do nothing, right?
    }
}); 
```

# c# - Context.UpdateObject() 不传递对象中的集合

> ID：12466719
> 
> 赞同：2
> 
> 时间：2012-09-17T20:35:57.767
> 
> 标签：c#, asp.net-mvc, wcf, wcf-data-services, odata

好的，这就是正在发生的事情。我有两个应用程序——一个 WCF 数据服务和一个 MVC 应用程序。

我们正在 CRUDing 一个有两个集合的类型。简单类型

```
 [DataServiceKey("Id")]
    [ETag("ModifiedDate")]
    public class AllocationRule
    {

        public AllocationRule()
        {
            Zones = new List<Zone>();
        }

        public int Id { get; set; }

        public string Name { get; set; }

        public List<Zone> Zones { get; private set; }
   } 
```

区域看起来像这样

```
 [DataServiceKey("Code")]
    [EntityPropertyMapping("Name", SyndicationItemProperty.Title, SyndicationTextContentKind.Plaintext, true)]
    [EntityPropertyMapping("ModifiedDate", SyndicationItemProperty.Updated, SyndicationTextContentKind.Plaintext, true)]
    [ETag("ModifiedDate")]
    public class Zone
    {
        public string Code { get; set; }

        public string Name { get; set; }

        public DateTime? ModifiedDate { get; set; }
    } 
```

所以 MVC 站点正试图像这样插入对象

```
var context = new ChannelData(new Uri(ConfigurationManager.AppSettings["DataServicesUri"]));
                    context.AddToAllocationRules(rule);
                    context.SaveChanges(); 
```

当我们这样做时，区域的集合在 odata 端始终为空，在 MVC 端不为空。

有任何想法吗？我们无法使用 fiddler 等来嗅探请求，因为我们仍处于本地开发阶段。

**更新**

当我们使用 winforms 应用程序将相同的数据类型回传到 WCF 数据服务时，我们也看不到这些集合。

似乎他们在发布请求中迷路了。

我们能够从服务中检索数据，并且 $expand() 有效。

这是 Fiddler2 的标题

```
<?xml version="1.0" encoding="utf-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"><category term=" Data.Services.Entities.AllocationRule" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" />
<id /><title type="text">dfsdsdf</title><published>0001-01-01T00:00:00-05:00</published>
<updated>2012-09-18T15:44:36-04:00</updated><author><name />
</author><content type="application/xml"><m:properties><d:Amount m:type="Edm.Int32">50</d:Amount><d:CreatedBy m:null="true" />
<d:CreatedDate m:type="Edm.DateTime">0001-01-01T00:00:00</d:CreatedDate><d:EffectiveEndDate
m:type="Edm.DateTime">2012-12-18T15:44:30.1686832-05:00</d:EffectiveEndDate><d:EffectiveStartDate
m:type="Edm.DateTime">2012-09-19T15:44:30.1696833-04:00</d:EffectiveStartDate><d:Enabled
m:type="Edm.Boolean">true</d:Enabled><d:Finalized m:type="Edm.Boolean">false</d:Finalized><d:Id
m:type="Edm.Int32">0</d:Id><d:ModifiedBy m:null="true" /><d:ModifiedDate m:type="Edm.DateTime"
m:null="true" />
<d:Name>dfsdsdf</d:Name><d:UnitOfMeasure>hours</d:UnitOfMeasure></m:properties></content></entry> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:55:59.023

我猜您将 Zone 对象添加到正在添加的规则对象的集合中，对吗？如果这就是你所做的一切，那么这就是预期的行为。WCF DS 客户端不会自动处理导航属性更改。您需要：

对正在添加的所有 Zone 对象调用 context.AddObject 并调用 context.SetLink 来创建两个对象之间的关系。

或者您可以使用 context.AddRelatedObject 添加 Zone 对象并一次性创建关系。

# php - 使用 Graph DB 通过 PHP 存储位置之间的距离

> ID：12466725
> 
> 赞同：4
> 
> 时间：2012-09-17T20:36:32.883
> 
> 标签：php, database-design, graph, distance, graph-databases

我需要能够快速找到给定目的地的 n 个最近目的地，计算 n 个目的地的 nxn 距离矩阵以及与两个或多个目的地之间的距离相关的其他几个此类操作。

我了解到，与 MySQL 数据库相比，Graph DB 的性能要好得多。我的应用程序是用 PHP 编写的。

所以我的问题是 - 是否可以将 Graph DB 与 PHP 应用程序一起使用，如果是，那么哪个是最佳选择和开源以及如何将这些数据存储在图形 DB 中以及如何访问它。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T21:30:55.303

[Neo4j](http://neo4j.org/)是一个非常可靠的图形数据库，并且还具有灵活的（如果有点复杂）许可。它实现了[Blueprints](https://github.com/tinkerpop/blueprints/wiki) API，并且应该很容易在任何语言中使用，包括 PHP。它也有一个[REST API](http://docs.neo4j.org/chunked/milestone/rest-api.html)，它几乎和它一样灵活，并且至少有[一个从 PHP 中使用它的好例子](http://onewheeledbicycle.wordpress.com/2010/06/01/getting-started-with-neo4j-rest-api-and-php/)。

根据您拥有的数据，有多种存储方法。

如果您有“路线”数据，其中您的点已经通过特定路径相互连接（即，您不能从一个点直接跳到另一个点），那么您只需将每个点设为节点以及您之间的连接路线中的点是节点之间的边，距离是这些边的属性。这将为您提供一个看起来像您的经典“旅行推销员”问题的图表，并且计算节点之间的距离只是进行加权广度优先搜索的问题（假设您想要最短路径）。

如果您*可以*使用数据集从一个地方跳到另一个地方，那么您就有一个[*完全连接*](http://en.wikipedia.org/wiki/Fully_connected_network)的图。显然，这是大量数据，并且随着您添加更多目的地而呈二次增长，但图形数据库可能比关系数据库更擅长处理这个问题。为了存储距离，当您将节点添加到图形时，您还可以向每个现有节点添加一条边，并将距离预先计算为它的属性之一。然后，要检索一对节点之间的距离，您只需找到它们之间的边并获取它的距离属性。

但是，如果您有*大量*完全连接的节点，您最好只存储这些节点的坐标并根据需要计算距离，并可选择缓存结果以加快速度。

最后，如果您使用 Blueprints API 和该堆栈中的其他工具，例如[Gremlin](https://github.com/tinkerpop/gremlin/wiki)和[Rexter](https://github.com/tinkerpop/rexster/wiki)，您应该能够换入/换出*任何*兼容的图形数据库，这让您可以使用可能更好地满足您需求的不同实现，就像在[Cassandra](http://cassandra.apache.org/) / [Hadoop](http://hadoop.apache.org/)集群上使用[Titan一样。](http://thinkaurelius.github.com/titan/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:32:26.807

是的，图形数据库将比 MySQL 或 Postgres 的扩展提供更多的性能。一个[看起来很漂亮](http://www.slideshare.net/graphdevroom/works-with-persistent-graphs-using-orientdb)的是[OrientDB](http://www.orientdb.org/orient-db.htm)，[在 PHP 中有一个使用二进制协议的 beta 实现，](https://github.com/AntonTerekhov/OrientDB-PHP)另一个[使用 HTTP](https://github.com/congow/Orient)作为传输层。

至于示例代码，Alessandro（来自[odino.org](http://odino.org/)）编写了Dijkstra[算法的](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)[实现](https://github.com/congow/Orient/blob/master/src/Congow/Orient/Algorithm/Dijkstra.php)，并[完整说明了如何将其与 OrientDB 一起使用以找到城市之间的最小距离](http://odino.org/the-shortest-path-problem-in-php-demystifying-dijkstra-s-algorithm/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T18:18:16.420

实际上，数据库与索引无关。我使用了 MongoDB 的[地理空间索引](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)和搜索（文档 DB），它具有地理索引，旨在查找多个最接近给定坐标的元素 - 效果很好。仍然 - 它只运行简单的查询（查找最近的查询），如果您的索引不适合 RAM，它会变得有点慢（我使用 geonames DB 有 800 万个坐标位置，并且在 VM 上每次查询得到 0.005-2.5 秒 - 1\. 硬盘开销 2\. 可能索引不适合 RAM）。

# perl - 下载cgi网页的url内容

> ID：12466727
> 
> 赞同：1
> 
> 时间：2012-09-17T20:36:38.143
> 
> 标签：perl, cgi

我有用于本地平面数据库搜索的 cgi 搜索引擎，我想添加用户能够导出/下载搜索结果的选项。用cgi可以吗？这是代码。

```
 #!/usr/bin/perl
      read(STDIN, $buffer,$ENV{'CONTENT_LENGTH'});
      # Split the name-value pairs
      @pairs = split(/&/, $buffer);
      foreach $pair (@pairs) {
       ($key, $value) = split(/=/, $pair);

     $value =~ tr/+/ /;
      $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg;

     $formdata{$key}.= "$value";
      }
   $search = $formdata{'search'};
   open(INFO, "/test.txt");   
   @array=<INFO>;
   close (INFO);
   print "Content-type:text/html\n\n";
   print "<html>\n";
    print "<head><title>Search result</title></head>\n";
   print "<body>\n"; 
   print "<h4><font color=#990000>This is your search result!</h4>\n"; 
   $search_url = 'https://test.php';
   foreach $line (@array) {
   if ($line =~ /$search/){
   ($host,$ip)=split(/\|/,$line);
   $records= ++$counter;
   @result =($host,$ip);
   print "<font color=#7a378b><b><p>";
   print "<table border=0 cellpadding=0 cellspacing=0 style=border-collapse: collapse       
   bordercolor=#111111 width=20% bgcolor=#C0C0C0>";

   print "</tr>";
   foreach (@result) {
   @words = split ;
   print     "<tr><td width=33% bgcolor=#DCDCDC><b><font color=#000080 size=1   face=Courier New>$words[0]</font></b></td>";
  print     "<td width=36% bgcolor=#DCDCDC><b><font color=#000080 size=1 face=Courier    
  New>$words[1]</font></b></td>";
  print "</table>";
 }
 }
   }

  if ($records== 0) {
  print " Sorry! No records found\n";
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:55:51.143

是的。常规方式是输出适当的内容类型头，例如

```
Content-type: text/csv
Content-type: text/xml 
```

并且可以选择指定“内容处置”。在符合标准的浏览器中，这将为客户端提供将服务器的输出保存到本地文件的选项：

```
Content-disposition: attachment;filename="myfilename.csv" 
```

（编辑使用friedo的明智建议）

# c++ - 在 C++ /clr 中创建一个计时器事件

> ID：12466730
> 
> 赞同：0
> 
> 时间：2012-09-17T20:36:45.693
> 
> 标签：c++, timer, clr

所以，我正在尝试创建一个计时器事件（这次在 C++ /clr 中），但我不知道如何定义一个新事件，这就是我得到的：

```
namespace hook
{
    public ref class Tick
    {
    private: 
        static System::Timers::Timer^ aTimer;

    public: 
        event EventHandler^ OnTick;
        int Interval;

        Tick()
        {
            aTimer = gcnew System::Timers::Timer(Interval);
            aTimer->Elapsed += gcnew ElapsedEventHandler(Tick::execute);
        }

        static void execute(Object^ source, ElapsedEventArgs^ e)
        {
            this->OnTick(this, new EventsArg()); // Wrong
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:32:19.753

您正在尝试从静态方法访问实例成员 (OnTick)，但该方法无法正常工作。去掉*static*关键字得到：

```
 void execute(Object^ source, ElapsedEventArgs^ e) 
```

这需要您更改事件订阅代码，您必须创建一个存储*此*的委托：

```
 aTimer->Elapsed += gcnew ElapsedEventHandler(this, &Tick::execute); 
```

还有一个错误，你拼错了 EventArgs。传递是很常见的，它有一个预先煮好的对象，由 Empty 返回。减少垃圾：

```
 this->OnTick(this, EventArgs::Empty); 
```

注意编写只是复制原始类而不增加价值的代码。

# android - 如何在 Eclipse 中打开新 xml 文件的图形布局选项卡？

> ID：12466731
> 
> 赞同：0
> 
> 时间：2012-09-17T20:36:46.100
> 
> 标签：android, eclipse

作为序言，我已经在[这里](https://stackoverflow.com/questions/7708574/how-to-get-the-graphical-layout-window-back-in-eclipse-for-android-application-d)阅读了这个问题。

在eclipse中，创建一个新的xml文件并右键单击它。我选择“打开方式”>“旧版 Android 布局编辑器”。

它实际上给我的视图不是图形布局，而只是常规的“代码”。“旧版 Android 布局编辑器”是我在首选项中找到的唯一选项。然后我尝试更新eclipse，但这并不能解决问题。有谁知道恢复图形布局的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:49:17.183

只是为了激发对此的详细说明。您是否创建了新的**android 布局 xml**或常规 xml？此外，右键单击 android 布局 xml 并选择“打开方式”->“其他”时，我有几个选项。在“内部编辑器”下，我有四个 Android xml 编辑器：Binary、Common、Export 和 Manifest。我使用 Android Common XML 编辑器。检查您的 sdk 版本，也许有可用的更新。[官方安卓sdk下载链接](http://developer.android.com/sdk/index.html)

# youtube-api - 从 YouTube 下载视频 - 条款和条件

> ID：12466739
> 
> 赞同：8
> 
> 时间：2012-09-17T20:37:23.133
> 
> 标签：youtube-api

我对 YouTube API 的条款和条件有点困惑。如果我创建一个应用程序让用户 **只下载他们自己的视频**。这是否违反条款和条件？

我知道绝对禁止下载其他人的内容，但是对于您自己的视频也一样吗？由于用户可以去他们的视频管理器并下载他们自己的视频，这只是一个捷径吗？

任何人都知道可以/不能这样做吗？我正在考虑使用这个库[http://ytdownloadextension.codeplex.com/](http://ytdownloadextension.codeplex.com/)

任何指导将不胜感激，

科沃

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T20:47:32.533

似乎 YouTube 已经允许您这样做，所以我认为这是合法的：

> **下载您的视频**
> 
> 您不能下载其他人的 YouTube 视频，但是...
> 
> 您可以下载已上传到 YouTube 的 720p 或 360p 视频的 MP4 文件，具体取决于视频大小。

请参阅[下载您上传的视频](http://support.google.com/youtube/bin/answer.py?hl=en&answer=56100)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-24T20:02:25.297

我不认为[Youtube 的服务](https://www.youtube.com/t/terms)条款或[API 的服务条款](https://developers.google.com/youtube/terms?hl=en)允许您这样做：

### Youtube ToS 的摘录`(5\. K)`：

> 您同意仅按照服务正常功能的预期和允许的方式访问内容或出于个人、非商业用途以外的任何原因，并且仅用于流式传输。“流媒体”是指 YouTube 通过互联网将材料同时数字传输到用户操作的支持互联网的设备，其方式是数据用于实时查看而不是用于下载（永久或临时），由用户复制、存储或重新分发。

### API服务条款的摘录`(II. 11)`：

> 存储 YouTube 视听内容的副本；

两者都以非常明确的方式声明用户和使用 API 构建的应用程序都不能“存储”内容，这是一个非常直接的声明，不允许您在应用程序中提供这样的选项。现在，Youtube 是否确实为用户提供了下载内容的界面，这是一个不合逻辑的论点，因为 Youtube 不需要遵循自己的 ToS，换句话说，由他们来为用户提供这样的选择，但您不能将其提供给您应用的用户。

我想您需要 Youtube 的特别许可才能在您的应用程序中提供这样的选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-24T16:39:20.630

是的。您绝对可以从 YouTube 下载您自己的视频，因为它是您自己的内容，因此您作为视频的创建者拥有完全的权利。

# google-app-engine - 使用 Google App Engine 发送电子邮件并将其存储在 Gmail 的已发送邮件中

> ID：12466740
> 
> 赞同：1
> 
> 时间：2012-09-17T20:37:26.317
> 
> 标签：google-app-engine, gmail

我在 Python 中为 Google App Engine 创建了一个 Web 应用程序，当我制作一些东西时它会发送一封邮件。我使用我的 Gmail 帐户发送电子邮件，我想将该电子邮件保存在我已发送的邮件中。这是可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:54:16.667

不，这是不可能的，因为 Google App Engine 没有直接与您的 Gmail 帐户相关联，并且在已发送的项目中仅显示通过 Gmail 发送的项目。正如 [Sebastian Kreft](https://stackoverflow.com/questions/12466740/send-mail-with-google-app-engine-and-save-on-gmail#comment16769101_12466740)指出的那样，您可以向自己发送一份副本并为其创建一个过滤器。

我不确定未送达报告是否会返回到发件人的电子邮件地址，但无论哪种情况，请确保您有权访问该电子邮件或[设置 reply_to 字段](https://developers.google.com/appengine/docs/python/mail/emailmessagefields)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T23:24:56.800

您无法确定您的电子邮件是否会通过应用引擎邮件 api 到达目的地，因为您从未从 GAE 邮件 api 收到任何有关电子邮件传递的信息，并且您无法使用返回路径。

因此，我将应用程序引擎与 Amazon SES 一起使用。

另一个技巧是使用 google apps 脚本的 gmail api：参见：[https](https://developers.google.com/apps-script/service_gmail) ://developers.google.com/apps-script/service_gmail Apps 脚本也能够与 GAE 对话。

# .htaccess - 如果域不是某种文件类型，则重定向域

> ID：12466741
> 
> 赞同：0
> 
> 时间：2012-09-17T20:37:26.783
> 
> 标签：.htaccess, mod-rewrite

我正在设置一个静态无 cookie 域，一切都很好！

但是我想知道如果请求不是到 image/js/css 文件时如何重定向，以避免来自无 cookie 域的重复内容。

我有这个：

```
RewriteCond %{HTTP_REFERER} ^http://files\.my-static-site\.com/ [NC]
RewriteRule \.(html|php)$ - [F,NC,L] 
```

它可以工作，但如果您只是放置 files.my-static-site.com，它仍然会加载主页。

如果您单击页面上的链接，则会显示 403。如何将其更改为 301 重定向到主域而不是显示 403？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:50:34.417

尝试将其更改为：

```
RewriteCond %{HTTP_HOST} ^files\.my-static-site\.com$ [NC]
RewriteRule \.(html|php)$ http://main.domain.com/ [R=301,NC,L]

RewriteCond %{HTTP_HOST} ^files\.my-static-site\.com$ [NC]
RewriteRule ^$ http://main.domain.com/ [R=301,NC,L] 
```

# c++ - 如何在不丢失精度的情况下将浮点数转换为双精度数（均以 IEEE-754 表示形式存储）？

> ID：12466745
> 
> 赞同：7
> 
> 时间：2012-09-17T20:38:06.567
> 
> 标签：c++, qt, floating-point, double, ieee-754

我的意思是，例如，我有以下以 IEEE-754 单精度编码的数字：

```
"0100 0001 1011 1110 1100 1100 1100 1100"  (approximately 23.85 in decimal) 
```

上面的二进制数存储在文字字符串中。

问题是，如何将这个字符串转换为 IEEE-754 双精度表示（有点像下面的，但值不一样），而不会丢失精度？

```
"0100 0000 0011 0111 1101 1001 1001 1001 1001 1001 1001 1001 1001 1001 1001 1010" 
```

这是~~同一个号码~~以 IEEE-754 双精度编码。

我尝试使用以下算法首先将第一个字符串转换回十进制数，但它会丢失精度。

```
num in decimal = (sign) * (1 + frac * 2^(-23)) * 2^(exp - 127) 
```

我在 Windows 平台上使用 Qt C++ 框架。

编辑：我必须道歉，也许我没有清楚地表达这个问题。我的意思是我不知道真正的值 23.85，我只得到了第一个字符串，我想将它转换为双精度表示而不损失精度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:44:33.427

好吧：保留符号位，重写指数（减去旧偏差，加上新偏差），并在右边用零填充尾数......

（正如@Mark 所说，您必须单独处理一些特殊情况，即当有偏指数为零或最大值时。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T20:49:29.537

首先，+1 用于识别二进制输入。

其次，这个数字并不代表 23.85，而是略少。如果将它的最后一个二进制数字从 翻转`0`到`1`，这个数字仍然不能准确地表示 23.85，但会稍微多一些。这些差异不能在浮点数中充分捕捉，但可以在双精度中近似捕捉。

第三，你*认为*你失去的东西叫做准确性，而不是精确度。数字的精度总是通过从单精度到双精度的转换而增长，而精度永远不会通过转换来提高（你的不准确的数字仍然不准确，但是额外的精度使它更加明显）。

我建议在显示（或记录）数字之前转换为浮点数或舍入或添加一个非常小的值，因为视觉外观是您通过提高精度*真正失去的东西。*

抵制在强制转换后立即舍入并在后续计算中使用舍入值的诱惑——这在循环中尤其危险。虽然这似乎可以纠正调试器中的问题，但累积的额外不准确性可能会进一步扭曲最终结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T21:09:23.060

IEEE-754（和一般的浮点数）不能以全精度表示周期性二进制十进制数。即使它们实际上是整数分子和分母相对较小的有理数，也不是。一些语言提供了一种可以做到的有理类型（它们也是支持无界精度整数的语言）。

因此，您发布的这两个数字不是同一个数字。

它们实际上是：

10111.11011001100110011000000000000000000000000000000000000000 ... 10111.110110011001100110011001100110011001100110011010000000 ...

其中`...`表示 s 的无限序列`0`。

Stephen Canon 在上面的评论中为您提供了相应的十进制值（没有检查它们，但我没有理由怀疑他是否正确）。

因此，您想要进行的转换无法完成，因为单精度数字没有您需要的信息（您无法知道该数字是否实际上是周期性的，或者只是看起来像是因为恰好有重复） .

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T20:46:48.637

将字符串转换为实际的浮点数可能是最简单的，将其转换为双精度数，然后再将其转换回字符串。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-17T22:58:45.220

二进制浮点通常不能准确地表示十进制小数值。从十进制小数值到二进制浮点的转换（参见 William D.Clinger 的“如何准确读取浮点数”中的“Bellerophon”）以及从二进制浮点转换回十进制值（参见“Dragon4”在 Guy L.Steele Jr. 和 Jon L.White 的“如何准确地打印浮点数”中）产生了预期的结果，因为一个将十进制数转换为最接近的可表示二进制浮点数，另一个控制错误以知道哪个它来自的十进制值（在 David Gay 的[dtoa.c](http://www.netlib.org/fp/dtoa.c)中，两种算法都得到了改进并变得更加实用。算法是恢复的基础`std::numeric_limits<T>::digits10`存储在类型中的浮点值的十进制数字（可能除了尾随零）`T`。

不幸的是，将 a 扩展为`float`对`double`值造成严重破坏：尝试格式化新数字在许多情况下不会产生十进制原始数字，因为`float`用零填充的值与最接近的`double`Bellerophon 不同，因此 Dragon4 期望。但是，基本上有两种方法可以很好地工作：

1.  正如有人建议将 转换`float`为字符串并将此字符串转换为`double`. 这不是特别有效，但可以证明可以产生正确的结果（当然，假设正确实现了并非完全微不足道的算法）。
2.  假设您的值在一个合理的范围内，您可以将它乘以 10 的幂，使得最低有效十进制数字不为零，将此数字转换为整数，将此整数转换为 a `double`，最后将得到的 double 除以10 的原始幂。我没有证据证明这会产生正确的数字，但是对于我感兴趣并且我想准确存储在 a 中的值范围`float`，这是可行的。

避免这个问题的一种合理方法是首先使用[Decimal TR](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2009/n2849.pdf)中为 C++ 描述的*十进制浮点*值。不幸的是，这些还不是标准的一部分，但我已经向 C++ 标准化委员会提交了一份提案以改变它。

# java - 方法不会覆盖或实现超类型中的方法

> ID：12466747
> 
> 赞同：11
> 
> 时间：2012-09-17T20:38:19.827
> 
> 标签：java, inheritance, overriding, abstract

我正在使用继承和多态性创建一个模拟员工数据库。尝试覆盖超类方法时遇到以下错误。

```
HourlyEmployee is not abstract and does not override abstract method resetWeek() in Employee
public class HourlyEmployee extends Employee
   ^
HourlyEmployee.java:43: error: method does not override or implement a method from a supertype
@Override
^
HourlyEmployee.java:54: error: method does not override or implement a method from a supertype
@Override
^
HourlyEmployee.java:60: error: method does not override or implement a method from a supertype
@Override
^
HourlyEmployee.java:66: error: method does not override or implement a method from a supertype
@Override 
```

这是我的员工超类和 HourlyEmployee 子类代码

```
public abstract class Employee
{
protected String firstName;
protected String lastName;
protected char middleInitial;
protected boolean fulltime;
private char gender;
private int employeeNum;

public Employee (String fn, String ln, char m, char g, int empNum, boolean ft)
{
    firstName = fn;
    lastName = ln;
    middleInitial = m;
    gender = g;
    employeeNum = empNum;
    fulltime = ft;
}

public int getEmployeeNumber()
{
    return employeeNum;
}

public void setEmployeeNumber(int empNum)
{
    while (empNum <= 10000 && empNum >= 99999)
    {
        System.out.print ("Invalid input, please try again: ");
    }

    if (empNum >= 10000 && empNum <= 99999)
    {
        employeeNum = empNum;
    }
}

public String getFirstName()
{
    return firstName;
}

public String getLastName()
{
    return lastName;
}

public char checkGender(char g)
{
    if (g != 'M' || g != 'F')
    {
        g = 'F';
    }
    return g;
}

public char getGender()
{
    return gender;
}

@Override
public boolean equals(Object e2)
{
    if (this.employeeNum == ((Employee)e2).employeeNum)
    {
        return true;
    }
    else
    {
        return false;
    }
}

@Override
public String toString()
{
    return employeeNum + "\n" + lastName + ", " + firstName + "\n" + "Gender:" + gender + "\n" + "Status:" + fulltime + "\n";
}

public abstract double caclulateWeeklyPay();

public abstract void annualRaise();

public abstract double holidayBonus();

public abstract void resetWeek();
} 
```

这是 HourlyEmployee 子类

```
public class HourlyEmployee extends Employee
{
private double wage;
private double hoursWorked;
private double additionalHours;

public HourlyEmployee(String fn, String ln, char m, char g, int empNum, boolean ft, double w, double h, double ahours)
{
    super (fn, ln, m, g, empNum, ft);
    wage = w;
    hoursWorked = h;
    hoursWorked = 0.0;
    additionalHours = ahours;
}

@Override
public String toString()
{
    return this.getEmployeeNumber() + "\n" + lastName + ", " + firstName + middleInitial + "\n" + "Gender: "
     + this.getGender() + "\n" + "Status: " + fulltime + "\n" + "Wage: " + wage + "\n" + "Hours Worked: " + hoursWorked + "\n";
}

   //@Override    
public double calculateWeeklyPay(double w, double h)
{
    if (h > 40)
    {
        w = w * 2;
    }

    return w * h;        
}

//@Override
public double annualRaise(double w)
{
    return (w * .05) + w;
}

//@Override
public double holidayBonus(double w)
{
    return w * 40;
}

//@Override
public double resetWeek(double h)
{
    h = 0.0;
    return h;
}

public double plusHoursWorked(double h, double ahours)
{
    while (h <= 0)
    {
        System.out.println("Invalid value entered, please try again");
    }

    h += ahours;

    return h;
}

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T20:40:23.727

您的 Employee 类有 4 个抽象方法，没有一个被实现（至少没有正确实现）。这是一个例子：

```
double caclulateWeeklyPay(); // in Employee
double calculateWeeklyPay(double w, double h) // in HourlyEmployee 
```

父类应该包含相同的签名（包括参数），并且应该如下所示：

```
public abstract double calculateWeeklyPay(double w, double h); 
```

由于这似乎是家庭作业，我将把剩下的留给你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T20:40:55.487

只需仔细阅读错误消息：

> HourlyEmployee 不是抽象的，不会覆盖 Employee 中的抽象方法 resetWeek()

它清楚地表明您的`Employee`类是`abstract`并且有一个抽象方法`resetWeek()`。

您`HourlyEmployee`扩展的类`Employee`不是抽象的，因此它应该覆盖超类的所有抽象方法，因为具体类不能有任何抽象方法。

原因是类中的方法`HourlyEmployee`与超类中的方法具有不同的签名。所以方法没有被覆盖，`@Override`注解不被编译器接受

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T20:43:58.153

由于您的**HourlyEmployee** **类不是抽象*的* 您需要**实现在 EMPLOYEE 抽象类中声明的抽象方法**。这很明显。你必须实现以下方法

```
 public abstract double caclulateWeeklyPay();

 public abstract void annualRaise();

 public abstract double holidayBonus();

 public abstract void resetWeek(); 
```

# macos - 是否可以对我的计算机系统文件本身进行版本控制？

> ID：12466748
> 
> 赞同：1
> 
> 时间：2012-09-17T20:38:37.720
> 
> 标签：macos, git, unix, version-control

这是我的问题。我有 OSX Lion 并且我做 Web 开发，但是当我使用 brew、pear 和一般的终端时，我对自己在做什么并没有真正的理解。我正在努力升级，但我仍然需要在此期间工作。这就是为什么我经常弄乱我的系统文件的原因（刚刚尝试安装PHPUnit，没有用，所以我删除了其他pear目录，仍然没有用，现在我最终弄得一团糟）。

*知道当我搞砸时*我可以恢复我的更改会感觉更好并减轻很多压力。***所以我的问题是，我可以在我所有的计算机文件本身上设置一个像 git 这样的版本控制，以便在任何大的变化之前，我可以保存我的计算机的状态吗？或者有没有其他方法可以获得相同的结果？***

 *我认为为我的 mac 创建不同的用户是不够的，因为我想建立我的系统，并向其中添加东西，所以它并没有真正的帮助。**而且我不确定，但 Time Machine 只是为了获取一些文件，而不是将我的系统恢复到以前的状态，或者它可以做到吗？**

非常感谢您的帮助，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:43:24.520

在我看来，您需要使用虚拟机。
拍摄快照并无后顾之忧地工作。如果你搞砸了，你只需恢复到最后一个已知的好快照

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:41:55.903

你可以这样做——你可以对任何东西进行版本控制……但我不推荐它（至少不推荐使用 GIT/SVN/等——也许有一些为此目的而设计的软件我不知道）。

您将跟踪大量文件、临时文件、设置文件、二进制文件等的版本更改。文件将一直在更改，您需要随时了解提交等。相反，我建议只复制文件夹（备份），进行更改，验证您的更改是否有效，然后删除备份。

过度使用版本控制非常容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T20:44:55.393

拥有一个带有时间机器的外部驱动器并允许它经常同步将允许您将文件系统的某些部分（或全部）恢复到某个日期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T20:46:04.760

由于您使用的是 OS X，我建议您使用 Time Machine - 它比源代码控制版本更适合您想要做的事情。TM 在备份方面相当不错，但如果这个不符合您的需求，还有其他解决方案。

**编辑**：正如@dstarh 评论的那样，`brew`隔离它安装的所有内容并在需要时使用符号链接。因此，请尽可能使用它，它会使您的系统保持清洁。有关于如何卸载软件的说明，在最坏的情况下，您可以查看软件公式的来源并找出要删除的内容。

长话短说：是的，你可以，但是有更简单和无痛的方法来做到这一点。*

# python - 使用 Twython 获取推文 ID？

> ID：12466750
> 
> 赞同：2
> 
> 时间：2012-09-17T20:38:41.917
> 
> 标签：python, api, twitter, twython

我正在使用 Twython（Twitter API 的 Python 包装器，可在[此处](https://github.com/ryanmcgrath/twython "链接到 Twython 的 GitHub 页面")找到。）

目标：我正在尝试制作一个简单的机器人来搜索关键字并回复带有关键字的推文。

示例：发送搜索请求以搜索，回复其中包含“StackOverflow 是最好的！”的`#stackoverflow`推文。`#stackoverflow`

问题：无法回复没有推文 ID 的推文（在任何永久链接推文的 url 中找到）。这方面的一个例子是获取任何推文并将某人链接到它。链接末尾的数字是推文 ID。

我尝试过的：我*可以*尝试的不多。我希望这尽可能简单，没有复杂的解决方法。我确信有一些方法可以做到这一点，而不必走得太远。我已经用尽了 Google 和 Twython 的文档以及 Twitter 的 API 文档。=/ 任何人

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T20:50:12.337

推文只是 python 字典，它们的内容与[`Tweet`资源](https://dev.twitter.com/docs/platform-objects/tweets)完全一致。因此，每条推文都有一个`id_str`键：

```
print tweet['id_str'] 
```

如果事情不清楚，您总是可以打印数据结构；我可以推荐使嵌套 python 结构更具可读性的[`pprint.pprint()`函数：](http://docs.python.org/library/pprint.html#pprint.pprint)

```
import pprint

pprint.pprint(tweet) 
```

示例会话：

```
>>> from twython import Twython
>>> t = Twython()
>>> res = t.search(q='python')
>>> res.keys()
[u'next_page', u'completed_in', u'max_id_str', u'since_id_str', u'refresh_url', u'results', u'since_id', u'results_per_page', u'query', u'max_id', u'page']
>>> from pprint import pprint
>>> pprint(res[u'results'][0])
{u'created_at': u'Mon, 17 Sep 2012 21:01:12 +0000',
 u'from_user': u'Me_Craay_GOOFY',
 u'from_user_id': 230100184,
 u'from_user_id_str': u'230100184',
 u'from_user_name': u'\u06deSuperFLY_PUER\u06de\u2122',
 u'geo': None,
 u'id': 247802407529115649,
 u'id_str': u'247802407529115649',
 u'iso_language_code': u'en',
 u'metadata': {u'result_type': u'recent'},
 u'profile_image_url': u'http://a0.twimg.com/profile_images/2617747450/345616051_normal.jpg',
 u'profile_image_url_https': u'https://si0.twimg.com/profile_images/2617747450/345616051_normal.jpg',
 u'source': u'&lt;a href=&quot;http://globalgrind.com&quot;&gt;UncleUber for Blackberry&lt;/a&gt;',
 u'text': u'RT @Mr_Oyato: #ViolentPrayers May the python of breakthrough swallow you and your household today.',
 u'to_user': None,
 u'to_user_id': 0,
 u'to_user_id_str': u'0',
 u'to_user_name': None}
>>> res[u'results'][0]['id_str']
u'247802407529115649' 
```

# android - 如何从另一个类设置自定义列表视图适配器？

> ID：12466758
> 
> 赞同：0
> 
> 时间：2012-09-17T20:39:41.137
> 
> 标签：android, class, android-listview, instance, android-context

我想在我的 Preferences 类中设置一个自定义列表视图适配器，其中一个适配器位于我的主类中。当我尝试：

```
MyActivity.listView.setAdapter(new MyActivity.UserItemAdapter2(Prefs.this, R.layout.listitem, MyActivity.tweets)); 
```

我收到一条错误消息，指出“无法访问 MyActivity 类型的封闭实例。” 我不能使我的适配器类静态，因为它调用`getSystemService`，这是一个非静态方法。如何解决这个问题？任何帮助是极大的赞赏。这是我的适配器类：

```
public class UserItemAdapter2 extends ArrayAdapter<Tweet> {
            private ArrayList<Tweet> tweets;

            public UserItemAdapter2(Context context, int textViewResourceId, ArrayList<Tweet> tweets) {
                super(context, textViewResourceId, tweets);
                this.tweets = tweets;
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View v = convertView;
                if (v == null) {
                    LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    v = vi.inflate(R.layout.listitem, null);
                }

                Tweet tweet = tweets.get(position);
                if (tweet != null) {
                    TextView username = (TextView) v.findViewById(R.id.username);
                    TextView message = (TextView) v.findViewById(R.id.message);
                    ImageView image = (ImageView) v.findViewById(R.id.avatar);

                    if (username != null) {
                        username.setText(tweet.username);
                    }

                    if(message != null) {
                        message.setText(tweet.message);
                    }

                    if(image != null) {
                        //image.setImageBitmap(getBitmap(tweet.image_url));
                        tango.DisplayImage(tweet.image_url, image);
                    }
                }
                return v;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:43:07.280

你可以把它拉到`Adapter`它自己的文件中，这样你就可以在任何地方使用它。

# hadoop - 如何限制在 map reduce 作业中发送到 reducer 的记录数？

> ID：12466759
> 
> 赞同：2
> 
> 时间：2012-09-17T20:39:42.697
> 
> 标签：hadoop, mapreduce

我有一个超过 300000 行的文件，它是 map reduce 作业的输入，我希望该作业只处理该文件的前 1000 行。有什么好的方法可以限制发送到reducer的记录数吗？

我只需要一个简单的身份归约器来写出我的输出。目前，reducer 写出的行数与输入中的行数一样多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:57:21.143

首先，确保您的 mapreduce 程序设置为仅使用一个 reducer。它必须明确设置，否则 Hadoop 可能会选择其他数字，然后没有好的方法可以在 reduce 任务之间进行协调以确保它们发出的总数不超过 1000。然后，您可以简单地在 Reducer 类中维护一个实例变量，该变量计算它看到的记录数，并在 1000 之后停止发出它们。

另一种可能更简单的方法是缩短输入文件。只需删除您不需要的行。

还值得注意的是，hive 和 pig 都是可以为你做这类事情的框架。编写“原始” MapReduce 代码在实践中很少见。大多数人使用这两种中的一种。

# ruby-on-rails - Active Record 外键关联导轨

> ID：12466761
> 
> 赞同：0
> 
> 时间：2012-09-17T20:39:53.693
> 
> 标签：ruby-on-rails, foreign-keys, associations, primary-key

我有以下模型（venmas 是一个遗留数据库，所以我无法更改它）：

```
models/venmas.rb
class Venmas < ActiveRecord::Base
  establish_connection "turnkey"
end

models/yard.rb
class Yard < ActiveRecord::Base
end 
```

我希望能够做到：

```
Yard.first.venmas.first # to get the first record of venmas for that yard 
```

这是庭院的样子：

```
#<Yard id: 1, name: "nyssa", created_at: "2012-08-07 16:58:02", updated_at: "2012-08-07 16:58:02"> 
```

和文马斯：

```
#<Venmas VENDOR_NUMBER: "  ", ... , yard: "nyssa"> # there are a lot of columns in this one and they aren't important. 
```

我在 inflections.rb 中有另一个活动扳手：

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.irregular 'venmas', 'venmas'
end 
```

如果它更容易，我可以删除它，但我对所有旧表执行此操作，因为我只是从中读取。

我确信这可以通过分配外键来完成，但我不确定关联这些的正确方法？

如果我缺少任何东西，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:58:02.710

弄清楚了

```
models/venmas.rb
class Venmas < ActiveRecord::Base
  establish_connection "turnkey"
  belongs_to :yard, foreign_key: :yard, primary_key: :name
end

models/yard.rb
class Yard < ActiveRecord::Base
  has_many :venmas, foreign_key: :yard, primary_key: :name
end 
```

仍然对更好的解决方案持开放态度......

# javascript - Three.js WebGL 纹理在平面上显示为黑色

> ID：12466769
> 
> 赞同：2
> 
> 时间：2012-09-17T20:40:22.657
> 
> 标签：javascript, html, three.js, textures

所以基本上，我在 WebGL 中有一个带有 2 个平面的场景。其中一个上面有透明的纹理，它显示得很好。另一个应该有一个高分辨率的、不透明的纹理，它被用作背景。我不知道为什么背景平面不工作，因为我直接复制了用于另一平面的代码。我正在使用 xampp 来托管本地服务器，以便我可以正确读取图像文件。我也已经尝试将其保存为 png 而不是 jpg，但它仍然无法正常工作。

这是我用来创建背景平面的确切代码，紧随其后的是用于在其前面创建工作平面的代码。

```
var texture = THREE.ImageUtils.loadTexture('imgs/backgrounds.png');
var geometry = new THREE.PlaneGeometry(645, 300);
var material = new THREE.MeshBasicMaterial({map: texture});
var plane = new THREE.Mesh(geometry, material);
plane.receiveShadow = false;

//Background Texture
var backgroundTexture = THREE.ImageUtils.loadTexture('imgs/gears.png');
var backgroundGeo = new THREE.PlaneGeometry(1000, 800);
var backgroundMat = new THREE.MeshBasicMaterial({map: backgroundTexture, transparent: true});
var backgroundPlane = new THREE.Mesh(backgroundGeo, backgroundMat);
backgroundPlane.position.z = -60; 
```

我已经验证图像在图像编辑程序中正确加载。图像的分辨率为 4655x3348。这是因为图像太大而有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:25:00.333

感谢任何试图提供帮助的人，请原谅我没有用我的其余代码回复您的评论，过去几天我无法检查。无论如何，整个问题是由于我试图作为背景纹理加载的图像太大而引起的。我将纹理缩小了 50% 并对其进行了测试，效果很好。

# php - 从数据库中选择并使用特殊字符的最佳方法

> ID：12466772
> 
> 赞同：0
> 
> 时间：2012-09-17T20:40:28.290
> 
> 标签：php, mysql, seo

我想把下面的问题摆在你面前。

该数据库由各种名称组成。这些名称可以包含“特殊”字符，例如 é、ê 等。

我的计划是有一个 SEO 友好的 URL，其中包含数据库中的名称。链接的创建不是什么大问题，只需使用 normalize 函数或 str_replace 函数将所有特殊字符替换为正常字符即可。

但是当我想使用 SEO 朋友 URL 查询数据库时（在必要的验证和检查之后）。由于特殊字符，数据库当然不会返回任何结果。

现在问题来了，有没有一种方法可以在没有特殊字符的情况下查询数据库，或者最好在数据库中有一个单独的列来存储没有特殊字符的名称（在创建过程中不需要清理它们链接和易于查询）。这将需要维护两列，但可以让我轻松查询数据库。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:27:00.167

根据排序规则`hôtel`将等于`hotel`：

```
mysql> select 'hôtel' = 'hotel';
+--------------------+
| 'hôtel' = 'hotel'  |
+--------------------+
|                  1 |
+--------------------+ 
```

您遇到的问题是您正在存储 html 实体 ( `h&ocirc;tel`)，我认为这是非常错误的，因为您将演示问题与持久性问题混为一谈。摆脱它并为您的字符集选择适当的排序规则，然后将其设置为数据库默认值或[为每个查询设置它](http://dev.mysql.com/doc/refman/5.0/en/charset-collate.html)。

一个适合网络使用的字符集是`utf8`. 要[设置数据库](http://dev.mysql.com/doc/refman/5.0/en/charset-database.html)，请执行以下操作：

```
create database mydatabase character set utf8 collate utf8_unicode_ci; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:51:57.890

简单的方法是在 URL 中放置一个 ID，例如来自 Stackflow 的 URL。

# doctrine-orm - 如何自动化 Doctrine2 实体和映射中的关系测试？

> ID：12466773
> 
> 赞同：0
> 
> 时间：2012-09-17T20:40:28.553
> 
> 标签：doctrine-orm, relationship, entities, regression-testing

我和我的团队有一个大型 Web 应用程序，我们正在移植以使用[Symfony](http://www.symfony-project.org/)框架，其中包括用于数据访问的[Doctrine2 。](http://www.doctrine-project.org/)当我们刚刚开始时，我们想知道稍后对[实体关系进行回归测试。](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-objects.html)

我们有大量从数据库模式自动生成的 Doctrine 实体，现在正在检查和整理每个实体，特别是在[关系映射](http://docs.doctrine-project.org/en/2.0.x/reference/basic-mapping.html)领域。一旦映射完成（使用 doc 块注释）并且我们通过简单的脚本确认实体正在执行正确的数据访问，那么确保映射以及因此实体的功能将来不会中断的最佳方法是什么。

我们正在为作为独立单元的所有实体编写单元测试，模拟所需的依赖项，但这并不一定能保护我们免受正在编辑的注释注释或模式更改和破坏当前实体关系的影响。

有什么想法吗？这里有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T13:23:39.843

我们为每个顶级实体创建了我们称之为功能测试的内容，以测试子实体与该实体的关系。基本上，一个顶级实体被实例化并使用模拟数据来填充它，然后添加它的所有实体依赖项，它们自己被填充模拟数据。然后在一次操作中将所有这些都持久化到数据库中。然后从数据库中读回实体并测试与原始数据的相等性。它比这要复杂一些（尤其是相等测试），但是如果任何关系映射被更改或出现错误，这个测试会立即失败并给我们一个调查的问题。

# javascript - 使用自定义方法扩展 $.Deferred.pipe()？

> ID：12466776
> 
> 赞同：3
> 
> 时间：2012-09-17T20:40:49.030
> 
> 标签：javascript, jquery, asynchronous

我想用自定义方法扩展 $.Deferred.pipe，这样我就可以稍微缩短我的延迟链。

我目前拥有的代码是这个

```
getDeferredFileEntry() 
//returns a ($.Deferred) promise to resolve with a FileEntry object
    .pipe(function(entry){
        //returns a promise to resolve with an object
        //containing the contents of the file as text
        //and a reference to the file's FileEntry
        var def = $.Deferred();
        entry.getDeferredText()
            .done(function(fileText){
                def.resolve({text:fileText, fileEntry:entry});
            });
        return def.promise();
    )}
    .done(function(response){
        var text = response.text;
        var fileEntry = response.fileEntry;

        console.log(text);
        //do something with the text
        console.log(fileEntry);
        //do something else with the file entry after finished reading from it
        //e.g. deleting with something like fileEntry.remove();
    }); 
```

我想将其缩短为

```
getDeferredFileEntry()
    .read(
        //uses the FileEntry object resolved by getDeferredFileEntry
        //to call an asynchronous fileEntry.read() *in the background*
        //the contents are then passed to the callback taken from below
        //returns promise to resolve with the fileEntry object for chaining
        function callback(text){ 
            //do something with the text
            console.log(text);
        }
    ) 
    .remove(
        function(fileEntry){
            //library call to remove fileEntry that read() promised
        }
    ) 
```

我正在努力解决如何在后台将解析的 FileEntry 对象传递`getDeferredFileEntry()`给自定义`read()`。任何意见，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:44:03.657

为什么不简单地创建一些帮助方法来抽象出你的管道逻辑呢？

```
function getFileEntry() {
   // Returns a promise resolved when your file entry is available
}

function getFileContents( entryPromise ) {
  return entryPromise.pipe(function( entry ) {
    return readFileEntry( entry );
  });
}

function readFileEntry( entry ) {
  var dfr = $.Deferred();

  // do whatever you have to do to read the file
  // then call dfr.resolve( fileContents );

  return dfr.promise();
}

function removeFileEntry( entry ) {
  var dfr = $.Deferred();

  // do whatever you have to do to remove the file
  // then call dfr.resolve();

  return dfr.promise();
} 
```

使用这些方法，您的代码最终应如下所示：

```
var fileEntry = getFileEntry();

readFileEntry( fileEntry ).then(function(contents) {
    // Do something with your file contents
    removeFileEntry( fileEntry );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:25:28.213

我认为自定义方法不会有太大帮助，您仍然需要尊重链接（例如，通过维护内部队列）。

在您的情况下，嵌套回调是最简单的事情：

```
getDeferredFileEntry().then(function(entry) {
    return entry.getDeferredText().then(function(text) {
    // after finished reading from it:
        console.log(txt); // do something with the read text
        console.log(fileEntry); // do something with the file entry
        return fileEntry.remove(); // e.g. deleting it
    });
}); 
```

如果您更愿意使用管道解决方案，可以将其简化为

```
.pipe(function(entry) {
    return entry.getDeferredText().pipe(function(fileText) {
        return {text:fileText, fileEntry:entry};
    });
}) 
```

…而不是手动构建 Deferreds。

# javascript - jQuery Datatables 使用新参数从 ajax 源重新加载

> ID：12466780
> 
> 赞同：2
> 
> 时间：2012-09-17T20:41:05.750
> 
> 标签：javascript, jquery, datatables

我已经解决了许多其他似乎围绕同一主题的问题，但没有一个提供解决方案，所以这里是。我有一个数据表，使用以下代码初始化：http: [//jsfiddle.net/26Aqv/](http://jsfiddle.net/26Aqv/)

这行得通。

然后，我想使用相同的 ajax 源但使用新参数刷新数据表。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:32:02.227

我已经设法破解它来工作....而且我相信这是一个破解。如果有人可以详细说明这样做的正确方法，我会很乐意接受您对此的回答：

tblContactsList.fnReloadAjax('/lists/loadMembers/?lid='+aData[0]+'&');

# bash - 在使用 cat 重定向到非交互式 bash 脚本中的文件时标记文件结尾

> ID：12466786
> 
> 赞同：2
> 
> 时间：2012-09-17T20:41:18.843
> 
> 标签：bash, echo, eof, cat

我正在尝试将多行字符串重定向到文件。该字符串包含特殊字符，如**配额**，如下所示：

```
import "this"
import "that"
main() {
    println("some text here");
} 
```

我可以使用`echo`例如：

```
echo "import \"this\"
import \"that\"
main() {
    println(\"some text here\");
}" > myfile.txt 
```

这种方法的问题是我需要转义所有**配额**字符。我想过用`cat`它来消除逃避的需要。它在交互式 shell 中运行良好，因此我可以键入`cat > myfile.txt`然后写入我的字符串而无需转义，然后用`<control>d`.

如何`EOF`在没有实际键序列的情况下在脚本中进行标记`<control>d`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T20:47:02.010

使用“此处文档”：

```
cat <<'EOF' > myfile.txt
import "this"
import "that"
main() {
    println("some text here");
}
EOF 
```

初始 'EOF' 周围的引号表示“不要在此处的文档中扩展任何 shell 变量（等）”。

# html - google-maps-api-3 - 地理定位我的位置并将其保存到 MySQL 数据库中

> ID：12466787
> 
> 赞同：1
> 
> 时间：2012-09-17T20:41:21.413
> 
> 标签：html, google-maps-api-3, geolocation, infowindow

我一直在开发 URL 的做法：[https](https://developers.google.com/maps/articles/phpsqlinfo_v3) ://developers.google.com/maps/articles/phpsqlinfo_v3并且它可以工作，但在另一个示例中，我需要在单击显示的标记时出现相同的窗口 HTML 表单当我使用代码定位我的位置并将该信息保存到 MySQL 数据库中时映射。我正在使用下面的代码，但 HTML 表单窗口似乎没有保存地理位置数据。

这是网页中使用的代码：phpsqlinfo_add.html（URL 示例的类似名称：[https](https://developers.google.com/maps/articles/phpsqlinfo_v3) ://developers.google.com/maps/articles/phpsqlinfo_v3 ） 其他补充网页：phpsqlinfo_addrow.php 和 phpsqlinfo_dbinfo.php 类似到例子。

代码：phpsqlinfo_add.html

```
 <!DOCTYPE html >
 <head>
 <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
 <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
 <title>:: DEMO ::</title>
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
 <script type="text/javascript">

 function detectBrowser() {
 var useragent = navigator.userAgent;
 var mapdiv = document.getElementById("map_canvas");

 if (useragent.indexOf('iPhone') != -1 || useragent.indexOf('Android') != -1 ) {
 mapdiv.style.width = '100%';
 mapdiv.style.height = '100%';
 } else {
 mapdiv.style.width = '600px';
 mapdiv.style.height = '800px';
 }
 }

 function init() {
 if (navigator.geolocation) {
 navigator.geolocation.getCurrentPosition(function(position) {
 var pos = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
 var marcador = new google.maps.Marker();

 var map = new google.maps.Map(document.getElementById('map_canvas'), {
 zoom: 16,
 center: pos,
 mapTypeId: google.maps.MapTypeId.ROADMAP
 });

 marcador.setPosition(pos);
 marcador.setMap(map)

 }, function() {
 alert("Su navegador debe soportar geolocalizacion");
 });
 }
 }

 google.maps.event.addDomListener(window, 'load', init);

 var map = new google.maps.Map(document.getElementById("map_canvas"), options);

 var html = "<table>" +
             "<tr><td>Nombre:</td> <td><input type='text' id='name' value='Juan Gomez' readonly='readonly' /> </td> </tr>" +
             "<tr><td>Direccion:</td> <td><input type='text' id='address'/></td> </tr>" +
             "<tr><td>Tipo:</td> <td><select id='type'>" +
             "<option value='Opcion 1' SELECTED>Opcion 1</option>" +
             "<option value='Opcion 2'>Opcion 2</option>" +
             "<option value='Opcion 3'>Opcion 3</option>" +
             "</select> </td></tr>" +
             "<tr><td></td><td><input type='button' value='Registrar' onclick='saveData()'/></td></tr>";
infowindow = new google.maps.InfoWindow({
content: html
});

 google.maps.event.addListener(map, "click", function(event) {
    marker = new google.maps.Marker({
      position: event.latLng,
      map: map_canvas
    });
    google.maps.event.addListener(marker, "click", function() {
      infowindow.open(map, marker);
    });
});

 function saveData() {
 var name = escape(document.getElementById("name").value);
 var address = escape(document.getElementById("address").value);
 var type = document.getElementById("type").value;
 var latlng = marker.getPosition();

 var url = "phpsqlinfo_addrow.php?name=" + name + "&address=" + address +
            "&type=" + type + "&lat=" + latlng.lat() + "&lng=" + latlng.lng();
  downloadUrl(url, function(data, responseCode) {
    if (responseCode == 200 && data.length <= 1) {
      infowindow.close();
      document.getElementById("message").innerHTML = "Ubicacion Registrada.";
    }
  });
}

function downloadUrl(url, callback) {
 var request = window.ActiveXObject ?
 new ActiveXObject('Microsoft.XMLHTTP') :
 new XMLHttpRequest;

 request.onreadystatechange = function() {
 if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request.responseText, request.status);
    }
 };

 request.open('GET', url, true);
 request.send(null);
 }

 function doNothing() {}
 </script>

 </head>

 <body style="margin:0px; padding:0px;" onLoad="initialize()">
 <div id="map_canvas" style="width: 500px; height: 300px"></div>
 <div id="message"></div>
 </body>

 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T11:04:57.130

添加 onclick 事件侦听器和创建信息窗口的代码从未被激活，而且您引用的是 map_canvas div 而不是您的地图。试试这个（请参阅`// * my comments *`更改）：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

function detectBrowser() {
var useragent = navigator.userAgent;
var mapdiv = document.getElementById("map_canvas");

if (useragent.indexOf('iPhone') != -1 || useragent.indexOf('Android') != -1 ) {
mapdiv.style.width = '100%';
mapdiv.style.height = '100%';
} else {
mapdiv.style.width = '600px';
mapdiv.style.height = '800px';
}
}

function init() {
// * adjusted geolocation code for testing *
var pos = new google.maps.LatLng(51.511,0.275);
var marcador = new google.maps.Marker();
var map = new google.maps.Map(document.getElementById('map_canvas'), {
zoom: 16,
center: pos,
mapTypeId: google.maps.MapTypeId.ROADMAP
});

marcador.setPosition(pos);
marcador.setMap(map)

// * infowindow code wasn't being activated, moved inside init() function *
var html = "<table>" +
         "<tr><td>Nombre:</td> <td><input type='text' id='name' value='Juan Gomez' readonly='readonly' /> </td> </tr>" +
         "<tr><td>Direccion:</td> <td><input type='text' id='address'/></td> </tr>" +
         "<tr><td>Tipo:</td> <td><select id='type'>" +
         "<option value='Opcion 1' SELECTED>Opcion 1</option>" +
         "<option value='Opcion 2'>Opcion 2</option>" +
         "<option value='Opcion 3'>Opcion 3</option>" +
         "</select> </td></tr>" +
         "<tr><td></td><td><input type='button' value='Registrar' onclick='saveData()'/></td></tr>";

infowindow = new google.maps.InfoWindow({
content: html
});

// * changed map: map_canvas to map: map *
 google.maps.event.addListener(map, "click", function(event) {
    marker = new google.maps.Marker({
      position: event.latLng,
      map: map
    });
    google.maps.event.addListener(marker, "click", function() {
      infowindow.open(map, marker);
    });
});
google.maps.event.addListener(map, "click", function(event) {
    marker = new google.maps.Marker({
      position: event.latLng,
      map: map
    });

    google.maps.event.addListener(marker, "click", function() {
      infowindow.open(map, marker);
    });
});
}

google.maps.event.addDomListener(window, 'load', init);

// * don't need to create map again *
// var map = new google.maps.Map(document.getElementById("map_canvas"), options);

// * rest of code should be fine... * 
```

还要小心`<body onLoad="initialize()">`and`google.maps.event.addDomListener(window, 'load', init);`如果这不是一个错误并且 initialize() 做了一些不同的事情，那么将 init() 和 initialize() 结合起来会更好。

# ios - 坚持解析从服务器返回的 JSON，ios

> ID：12466788
> 
> 赞同：0
> 
> 时间：2012-09-17T20:41:21.340
> 
> 标签：ios, json, afnetworking

我正在使用 AFNetworking 进行身份验证，如下所示

```
AFJSONRequestOperation *operation   =   [AFJSONRequestOperation JSONRequestOperationWithRequest:request 
                                                                                            success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                                                                                                // Parsing will be here                                                                                                                                                                                      
                                                                                            {

                                                                                            failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                                                                                NSLog(@"ERROR :jason is %@",JSON);
                                                                                            }];

[client enqueueHTTPRequestOperation:operation]; 
```

下面是从服务器接收到的 JSON

```
{
    "first_name" = A;
    "last_name" = B;
} 
```

**问题**：如何在 ios 中解析这个 JSON。我被卡住了，因为服务器的返回根本没有任何标签。如果它的格式是

```
{
  "user": {
    "first_name": "A",
    "last_name": "B",
  }
} 
```

我可以通过执行以下操作来解析

```
NSArray  *userList  = [[NSArray alloc] init];
userList            =  [JSON objectForKey:@"results"]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T22:18:06.753

“标签”不在[JSON 的术语中](http://www.json.org/)。JSON 的复杂结构在发送者和接收者之间协商（或简单地由发送者指定）并且不需要遵循任何特定的大纲，只要它正确解析即可。

您引用的第一个 quasi-JSON 字符串（如果它是有效的 JSON）可能会识别个人的名字和姓氏，并且您可能会从上下文中知道它是“用户”身份以及它识别的用户.

通常，您必须将 JSON 字符串视为洋葱，一次剥一层。在你的第一个字符串的情况下，只有一个层，一个映射到 NSDictionary 的“对象”。因此，在收到对象后（并且，如果有必要，验证它确实是一个 NSDictionary using `isKindOfClass`，您可以将`id`值转换为 an`NSDictionary`并继续使用`objectForKey`或类似的方法来访问其中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:54:10.600

您应该利用 iOS5 中提供的新 JSONSerialization 类，它使 JSON 易于使用。下面是一个快速示例，它获取您的 json 并在 fetchedData 方法中对其进行解析。下面列出的资源

```
//CALL dataWithContentsOfURL ONCE DATA HAS BEEN RECEIVED YOU CAN PARSE THE JSON:
NSError *error = nil;
NSData* data = [NSData dataWithContentsOfURL:kURL options:NSDataReadingUncached error:&error];
if (error) {
    NSLog(@"%@", [error localizedDescription]);
} else {
    NSLog(@"Data has loaded successfully.");
}
//MORE CODE HERE?

- (void)fetchedData:(NSData *)responseData {
    _yourObjectArray = [[NSMutableArray alloc] init];

    //parse out the json data
    NSError* error;
    NSArray* json = [NSJSONSerialization JSONObjectWithData:responseData //1
                                                    options:kNilOptions
                                                      error:&error];

    for(int i=0; i<[json count]; i++){
        YourObject *yObject = [[YourObject alloc]init];
        NSDictionary* rawData = [json objectAtIndex:i]; //2

        yObject.FirstName = [rawData objectForKey:@"first_name"];
        yObject.LastName = [rawData objectForKey:@"last_name"];

        [_yourObjectArray addObject:yObject];
    }
} 
```

来源： http: [//developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html) http://www.raywenderlich.com/5492/working-with-json-in- IOS-5

# excel - 非常大的ex cel文件 - 如何在工作表之间复制数据？

> ID：12466793
> 
> 赞同：0
> 
> 时间：2012-09-17T20:41:51.480
> 
> 标签：excel, vba

我需要将一些 csv 文件导入 excel 2010 并创建一个非常简单但非常大的数据库。
整个故事将是 - 五列和数千行。
VBA 也很简单——将数据从一张纸复制到另一张纸——反之亦然。
但我需要关心内存需求，因为文件可能非常大。

```
Dim ws1 As Worksheet
Dim ws2 As Worksheet
Dim r1 As Range
Dim r2 As Range
Set ws1 = Sheets("01")
Set ws2 = Sheets("02")
Set r1 = ws1.Range("A1:B10") ' for example
Set r2 = ws2.Range("C5:D14")
r1.Copy Destination:=r2 'first way
r2.Value = r1.Value ' second way 
```

这两种方法在内存/耗时范围内有什么区别吗？
在和我将有超过 10,000 行。文件的大小是多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T03:46:58.140

您可以利用 ADO 来查询文本文件，就好像它们是数据库表一样。这允许您编写 SQL 查询以从文本文件中提取数据。如果您愿意，您可以在任何文本文件甚至 .xls 文件中执行此操作。

这样做的代码/过程相当简单。您需要先引用 Microsoft ActiveX Data Objects 2.X 库，然后使用如下内容：

```
Dim cn as New ADODB.Connection
Dim rs as New ADODB.Recordset
Dim i as Integer

With cn
    .Provider = "Microsoft.Jet.OLEDB.4.0"
    .ConnectionString = "Data Source=C:\SomeFolder;" & _
                        "Extended Properties=""text; HDR=Yes;FMT=Delimited"""
    .Open

    With rs
        .Open "SELECT * from fileName.txt", cn

        'Loop through each row in query
        While Not (.EOF Or .BOF)
            'Loop through each column in row
            For i = 0 to .Fields.Count - 1
                Debug.Print .Fields(i).Value 'Print value of field to Immediate Window
            Next i

            .MoveNext
        Wend

        .Close
    End With

    .Close
End With

Set rs = Nothing
Set cn = Nothing 
```

这将遍历您的文本文件并在您的 VBA 即时窗口中显示第一列的值。它还假定您的文件具有标题行。如果没有，那么您需要将ConnectionString 中的**HDR更改为***No*。

该代码将自动尝试并为您推断类型，但如果您遇到无法发现正确类型（例如前导零）的问题，那么您可以为您的文件明确定义模式。重要的是要注意，如果您采用架构路线，那么您的 ConnectionString 参数（如**HDR**和**FMT** *将被忽略*）。它们将保留注册表中定义的默认设置，除非您在架构定义中覆盖它们。可以在此处找到有关 schema.ini 文件的更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms709353](http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353(v=vs.85).aspx) (v=vs.85).aspx 。

这是另一个有用的链接：http: [//msdn.microsoft.com/en-us/library/ms974559.aspx](http://msdn.microsoft.com/en-us/library/ms974559.aspx)。这是 Microsoft Scripting Guys 撰写的一篇文章，也是我最初了解该过程的方式。

最后，如果您曾经对 .xls 文件使用此过程，那么您应该知道永远不要查询打开的 .xls 文件。OPEN .xls 文件存在严重的内存泄漏错误（更多信息：http: [//support.microsoft.com/default.aspx](http://support.microsoft.com/default.aspx?scid=kb;en-us;319998&Product=xlw) ?scid=kb;en-us;319998&Product=xlw ）。只要您查询 CLOSED .xls 文档，那么您就不应该有任何问题 =D。SQL FROM 子句中的语法有点不同，因为您必须针对特定工作表，但 IIRC 我链接的 Scripting Guys 文章解释了如何做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T21:17:16.360

这个代码块有一些我参与的项目的细节，但应该可以帮助你开始如何通过 VBA 导入 CSV 文件（有点清理）：

```
Public Sub ImportCSV(strPath As String, strFile As String, strExt As String, wbDestination As Workbook, Optional wsDest As Worksheet, Optional strRange As String, Optional blHeaders As Boolean = True)
'imports given CSV file into given sheet at given range _
    defaults to comma separated delimiters

Dim wsDestination As Worksheet
Dim strFileName As String
strFileName = strPath & strFile & ".csv"

If wsDest Is Nothing Then Set wsDestination = wbDestination.Worksheets.Add(, wbDestination.Worksheets(wbDestination.Worksheets.Count)) Else: Set wsDestination = wsDest
If strRange = "" Then strRange = "$A$1"

With wsDestination.QueryTables.Add(Connection:="TEXT;" & strFileName, Destination:=wsDestination.Range(strRange))
        .FieldNames = False
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = False
        .AdjustColumnWidth = False
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 437
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = True
        .TextFileSpaceDelimiter = False
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
        .Delete
    End With

If Not blHeaders Then wsDestination.Range(strRange).EntireRow.Delete

End Sub 
```

# c# - MVVM 子实例中的 ObservableCollection 行为

> ID：12466798
> 
> 赞同：0
> 
> 时间：2012-09-17T20:42:03.563
> 
> 标签：c#, wpf, mvvm

我有一个奇怪的行为。我正在使用 MVVM 模式，我将一个名为 AlarmCollection 的 Observable 集合绑定到一个名为 AlarmView 的视图中的网格控件。当我创建 AlarmModelView 类的多个实例并将项目添加到 AlarmCollection 时，所有实例都会显示更改。

对 ObservableColelction AlarmCollection 的任何更改都会影响网格控件的所有绑定 ItemSource。

我试图从此处的类似帖子中锁定调度程序线程，但无济于事。

无论如何要在 ViewModel 的每个实例中保留对这个 Observable 集合的更改？这样每次修改都不会影响 UI 线程中的任何其他集合。

任何帮助表示赞赏。

**[在下面编辑]**
这是一个奇怪的场景，我需要通过创建子 MV 的新实例来缩放/钻取渲染的内容，这反过来又将选项卡添加到父 MV。子视图都绑定到相同的集合名称，并且都**通过 WCF 异步调用进行更新**。根据缩放级别的深度，我需要 X 个多个实例，所以我需要 1 个 ModelView 对象。

**我将如何使用 CollectionChanged 事件或创建 ModelView 自己的 CollectionView 来实现这一点？**

```
 private MainViewModel _parentViewModel;
    public MainViewModel ParentViewModel
    {
        get { return _parentViewModel; }
        set
        {
            if (ParentViewModel == value) { return; }

            SetPropertyValue(ref _parentCircuitViewModel, value, "ParentViewModel");
        }
    }

    private ObservableCollection<DetailEntity> _alarmCollection;
    public ObservableCollection<DetailEntity> AlarmCollection
    {
        get
        {
            if (_alarmCollection == null)
                _alarmCollection = new ObservableCollection<DetailEntity>();

            return _alarmCollection;
        }
        private set { _alarmCollection = value; }
    }

    ServiceNode _selectedNode;

    public ServiceNode SelectedNode
    {
        get { return _selectedNode; }
        set 
        { 
                SetPropertyValue(ref _selectedNode, value, "SelectedNode");

                // render selected child node service path
                RenderSubPath(_selectedNode);

                // reset storage value
                _selectedCircuitNode = null;

        }
    }

    // Constructor
    public RenderViewModel(string servicePath  CircuitMainViewModel parentViewModel)
    {
        ServicePath = servicePath,
        ParentCircuitViewModel = parentViewModel;

        // event to handler for completed async calls 
        Client.GetAlarmsByNodeListCompleted += new EventHandler<GetAlarmsByNodeListCompletedEventArgs>(Client_GetAlarmsByNodeListCompleted);

    }

     void RenderSubPath(ServiceNode childNode)
     {
        if (childNode == null)
            return;
            // create a new child instance and add to parent VM tab
                _parentViewModel.AddServiceRenderTab(new ViewModel.Workspaces.RenderViewModel(childNode.elementPath _parentViewModel);
     }

      // wcf async webservice call to add alarm to ObservableCollection
      // ** This is updating all Collections in all Views.
      void Client_GetAlarmsByNodeListCompleted(object sender, AlarmServiceReference.GetAlarmsByNodeListCompletedEventArgs e)
      {
          try
          {
              if (e.Result == null)
                  return;

              // add to parent Netcool alarm collection
              foreach (DetailEntity alarm in nodeAlarms)
              {
                  _alarmCollection.Add(alarm);
              }

          }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:27:14.460

根据您的描述，听起来好像您的所有视图都绑定到同一个基础集合。对于您绑定到的任何集合，WPF 实际上将绑定到围绕该集合的集合视图 (ICollectionView)。如果您没有明确创建自己的集合视图，它将使用默认视图。对同一个集合的任何绑定都将导致使用同一个集合视图。

没有看到您的代码很难说，但是您可能想要使用底层视图模型的单独实例（因此，集合），或者您想要显式创建单独的集合视图并绑定到它们。

# javascript - 如何恢复复选框状态

> ID：12466800
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:42:15.113
> 
> 标签：javascript, jquery

我的 jsp 上有一个按钮，单击该按钮用户会看到弹出的 jquery 对话框，其中有几个复选框。该弹出窗口还将有两个按钮保存和取消。

我想恢复复选框的状态。为了更好地理解，请按照以下步骤操作

1.  用户点击jsp页面上的showpop按钮
2.  用户现在将看到带有多个复选框的 jquery 弹出窗口
3.  用户从弹出窗口中检查第一个和第二个复选框，然后单击导致关闭弹出窗口的保存按钮
4.  用户再次单击显示弹出按钮，取消选中第一个复选框并单击取消按钮，这也会导致关闭弹出窗口
5.  现在从主jsp，如果用户再次点击显示弹出按钮，我希望看到两个复选框被选中，但它显示一个复选框被选中。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T03:45:48.383

您可以使用变量来存储页面上复选框的索引，例如：

```
var checkedIndices = []; 
```

当您单击保存或取消时，您可以运行一些类似于此的代码：

```
function SaveBoxes() {
    checkedIndices = [];

    $("input[type=checkbox]").each(function(index, checkbox) {
        if ($(checkbox).is(":checked")) 
            checkedIndices.push($(checkbox).index());
    });
}

function CancelBoxes() {
    $("input[type=checkbox]").removeAttr("checked");

    for (i = 0; i < checkedIndices.length; i++)
        $("input[type=checkbox]:eq(" + checkedIndices[i] + ")").attr("checked", "checked");
} 
```

# git - 在覆盖更改时合并存储库

> ID：12466802
> 
> 赞同：2
> 
> 时间：2012-09-17T20:42:31.993
> 
> 标签：git, github, git-merge

我有一个巨大的项目。我被指派重做文件结构，以免我们的开发人员发疯。这一切都在 GitHub 中，所以我只是分叉了项目并进行了更改。

我已经完成了，现在想把我的更改拉回来。但是，在我进行重组时，我们的一些其他开发人员致力于主存储库。我无法合并，因为我移动的文件已更改（所以 Git 认为我删除了它们）。它们*是*最新的，只是在一个新位置。

如何成功提取重组后的代码？我唯一的想法是从我的本地存储库中删除所有主代码，然后将新代码复制粘贴到它，并从那里进行提交。然而，这让我觉得这是不好的做法。

更新：[根据这个问题，](https://stackoverflow.com/questions/1739364/move-a-file-directory-but-still-merge-changes-easily) `git mv`会有所帮助。但是，所有目录更改都已完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:37:29.360

几天前我们遇到了同样的问题。

这是我们所做的：

*   将主分支合并到新功能分支

    ```
    git checkout new-branch
    git merge master 
    ```

*   将新功能分支合并到主分支

    ```
    git checkout master
    git merge -s theirs 
    ```

第一次合并是在开发新功能分支时将所有修补程序保留在主分支中。与策略选项 (-s) 的第二次合并是强制保留新功能分支中的更改（我们删除并更改了很多代码）。

您可以在本主题中找到有关合并的更多信息[何时使用不同的 git 合并策略？](https://stackoverflow.com/questions/366860/when-would-you-use-the-different-git-merge-strategies)

# java - Java - 如何使用代码确定正在运行的 Mac OS X 版本？

> ID：12466803
> 
> 赞同：7
> 
> 时间：2012-09-17T20:42:37.837
> 
> 标签：java, macos, osx-lion, version

> **可能重复：**
> [在 java 中查找 OSX 的版本](https://stackoverflow.com/questions/1799268/finding-the-version-of-osx-inside-java)

我想使用 Java 代码检查我的 Java 应用程序正在运行的当前 Mac OS X 版本。具体来说，我想知道这是否是狮子。

这样我就可以确定是否使用图书馆。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-17T20:51:15.140

利用：

```
System.getProperty("os.name") // Yields "Mac OS X"
System.getProperty("os.version") // Yields "10.7.4" for me on Lion 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T20:44:43.210

您可以查看系统属性`os.version` [http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T20:49:13.720

您是否尝试过以下操作：

```
System.getProperty("os.name"); 
```

[您可以在“系统属性](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)”中找到更多详细信息。

# c# - 如何在 wp7 中创建淡入淡出图像幻灯片？

> ID：12466807
> 
> 赞同：1
> 
> 时间：2012-09-17T20:42:52.987
> 
> 标签：c#, windows-phone-7

我的问题是“如何在 wp7 中创建淡入淡出图像幻灯片放映？”。我可以从[这里](http://www.codeproject.com/Articles/42888/Silverlight-3-Slideshow)制作普通的幻灯片，但我想要一个动画幻灯片。我正在使用 C#。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:45:08.310

我建议使用 Expression Blend 来执行此操作。它为您自动化了大部分动画过程。

**这应该让你开始。**

[http://channel9.msdn.com/Blogs/jennmar/Animation-Using-Expression-Blend-Part-1-How-to-create-an-animation](http://channel9.msdn.com/Blogs/jennmar/Animation-Using-Expression-Blend-Part-1-How-to-create-an-animation)

# c++ - 在 C++ 中格式化数组和字符串的问题

> ID：12466809
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:43:02.617
> 
> 标签：c++

我有一个简单的问题让我整天发疯。我试图在不知道当前用户名的情况下打开当前用户桌面上的文件。

这个想法是我将使用对 API 的 GetCurrentUser 调用来获取用户名。然后格式化一个字符串以给出完整路径目录，并将该变量传递给 fopen 以打开文件。这是我正在处理的代码，我没有收到编译器错误，它编译得很好，但没有写入文件。

```
int main() {

  char pathName[200]; // declaring arrays

  char userName[100];

  DWORD userNameSize = sizeof(userName); // storage for user name

  if (!GetUserName(userName, &userNameSize)) { cout << "user not found"; }

  else { cout "hello" << userName;} // error checking

  // format for Windows 7 desktop
  sprintf(pathName, "\"C:\\Users\\%s\\Desktop\\text.txt\"", userName); 

  cout << pathName << "\n"; // confirms correct location

  const char* fileLocation = pathName; // pointer to full path to pass into fputs

  const char* test = "test";  // test information to write to file to confirm

  FILE *f = fopen(fileLocation,"a+"); // open file in append mode

  fputs(test, f); // write to file

  fclose(f); // flush and exit

  return 0;
} 
```

也许我需要使用不同的调用来格式化字符串？或者将 fileLocation 声明为不同的变量类型？

我对 C++ 相当陌生，如果有任何提示可以帮助我能够在当前用户的桌面上打开文件，我将不胜感激。谢谢。

针对 JERRY 的建议进行编辑：

这就是我最近的评论所指的：

```
#include <iostream>
#include <cstring>
#include <string>
#include <conio.h>
using namespace std;

string location ("C:\\Users\\testuser\\Desktop\\log.dat");

char cstr = char* [location.size()]; //This is a problematic line

strcpy (cstr, location.c_str());

void write(const char* c)
{
    const char* fileLocation = cstr;
    //const char* fileLocation = g_pathName;
    FILE *f = fopen(fileLocation,"a+"); // This is the problematic line right here. 
    if(f!=NULL)
    {
        fputs(c,f); // append to end of file 
        fclose(f);  // save so no entries are lost without being flushed
        }
}

int main ()
{  
  write("test");

  cout << "done";

  _getch();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:47:00.030

您在第 9 行缺少一个分号，上面写着：

```
...{ cout << "user not found" }... 
```

分号在 C++ 中不是可选的，工作程序需要它们。此外，如评论中所述，您不需要在文件名周围加上引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T22:12:51.307

我会使用[SHGetSpecialFolderPath](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762204%28v=vs.85%29.aspx)来自`shlobj.h`：

```
const char *szFileName = "text.txt";
const char *szContent = "test string";

char szPath[_MAX_PATH];

SHGetSpecialFolderPath(NULL, szPath, CSIDL_DESKTOPDIRECTORY, FALSE);

strcat(szPath, "\\");
strcat(szPath, szFileName);

FILE *pFile = fopen(szPath, "a+");

if(pFile != NULL)
{
    fputs(szContent, pFile);
    fclose(pFile);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:47:29.127

我会使用[`SHGetKnownFolderPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762188.aspx)FOLDERID_Desktop 来获取桌面的路径，然后在末尾添加一个文件名。您几乎肯定也想对`std::string`s 进行操作，然后在创建全名后，使用`.c_str`成员函数将名称检索为 C 样式字符串。除非您有一个*非常*具体的理由不这样做，否则最好使用 a`std::ofstream`而不是 C 样式`FILE *`（在这种情况下，如果您的编译器是最新的，您可能可以`std::string`直接将对象作为名称传递）。

编辑：一些快速演示代码创建并写入用户桌面上的文件：

```
#include <windows.h>
#include <Shlobj.h>
#include <objbase.h>
#include <string>
#include <fstream>

#pragma comment(lib, "ole32.lib")
#pragma comment(lib, "shell32.lib")

std::string GetKnownFolderPath(REFKNOWNFOLDERID f) {
    PWSTR sys_path;

    SHGetKnownFolderPath(f, 0, NULL, &sys_path);

    DWORD size = WideCharToMultiByte(CP_ACP, 0, sys_path, -1, 0, 0, NULL, NULL);

    std::string path(size, ' ');

    WideCharToMultiByte(CP_ACP, 0, sys_path, -1, &path[0], size, NULL, NULL);

    // We're finished with the string the system allocated:
    CoTaskMemFree(sys_path);

    // WideCharToMultiByte leaves space for a NUL terminator we don't need
    path.resize(path.size()-1);   
    return path;
}

int main() {
    std::string path(GetKnownFolderPath(FOLDERID_Desktop));

    path += "\\test.txt";

    std::ofstream test(path.c_str());

    test << "This is a test";

    return 0;
} 
```

# sql - SQL 查询不工作，什么也不返回

> ID：12466815
> 
> 赞同：1
> 
> 时间：2012-09-17T20:43:19.280
> 
> 标签：sql, postgresql

我查询的目标是返回国家、首都和使用的语言数量。它还需要按使用的语言数量降序排列，然后按大写字母排序。最后，语言的数量必须至少为 5 和 10 或更少。

这是我的查询：

```
SELECT country.name                    AS Country,
       city.name                       AS Capital,
       Count(countrylanguage.language) AS NumLanguages
FROM   country,
       city,
       countrylanguage
WHERE  city.id = country.capital
GROUP  BY city.name,
          country.name
HAVING ( Count(countrylanguage.language) BETWEEN 5 AND 10 ); 
```

它什么也不返回。where 子句对于显示城市名称是必要的。country 表中只是一个 id 号，然后 city 表中保存了 id 号和名称。

如果有人能发现我的错误，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:47:35.923

您缺少与 的关系`countrylanguage`。没有它，你有一个笛卡尔积，所以`Count(countrylanguage.language)`等于 中的记录数，`countrylanguage`很可能大于 10。

这是一个建议的解决方案（相应地调整字段名称/数据库结构）：

```
SELECT country.name                    AS Country,
       city.name                       AS Capital,
       Count(countrylanguage.language) AS NumLanguages
FROM   country,
       city,
       countrylanguage
WHERE  city.id = country.capital
AND    countrylanguage.language_id = country.language_id
GROUP  BY city.name,
          country.name
HAVING ( Count(countrylanguage.language) BETWEEN 5 AND 10 )
ORDER BY NumLanguages desc, city.Name 
```

也就是说，您应该始终尽量避免`WHERE`查询子句中的连接（隐式连接）。偏爱显式（声明性）连接将为您提供更高的可读性和更大的灵活性。

**更新**

根据评论建议，这里是使用 ANSI-92 连接语法的查询版本：

```
SELECT country.name                    AS Country,
       city.name                       AS Capital,
       Count(countrylanguage.language) AS NumLanguages
FROM       country
INNER JOIN city on city.id = country.capital
INNER JOIN countrylanguage on countrylanguage.language_id = country.language_id
GROUP  BY city.name,
          country.name
HAVING ( Count(countrylanguage.language) BETWEEN 5 AND 10 ); 
ORDER BY NumLanguages desc, city.Name 
```

# mercurial - 将代码从 mercurial 移动到 TFS

> ID：12466816
> 
> 赞同：6
> 
> 时间：2012-09-17T20:43:19.327
> 
> 标签：mercurial, tfs

我们正计划迁移到 TFS。虽然我讨厌它，但出于各种原因，我们不得不这样做。

1.  我们有 dev、staging 和 live 分支。我们是否将每个分支的源作为单独的文件夹移动到 TFS 并稍后将其转换为分支？

2.  历史可以带走吗？

3.  有没有可以做到这一点的工具或脚本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T11:15:32.820

我一直无法找到直接从 Mercurial 转换为 TFS 的方法。看起来您最好的选择是将 Mercurial 存储库转换为 Git 存储库并使用[git-tfs](http://git-tfs.com/)将这些更改推送到 TFS。

我不熟悉 Git 或 TFS，所以你必须做更多的研究来找出确切的步骤，但我认为我会这样做：

1.  将 Mercurial 存储库转换为 Git 存储库（也许[这](http://hedonismbot.wordpress.com/2008/10/16/hg-fast-export-convert-mercurial-repositories-to-git-repositories/)会有所帮助）
2.  创建空的 TFS 存储库
3.  [使用此](http://git-tfs.com/)页面作为指南克隆您的 TFS 存储库
4.  使用 git 将转换后的 Mercurial Git 存储库推送到 TFS Git 存储库
5.  使用 git-tfs 将这些更改推送到 TFS

我不知道这是否会复制所有历史记录，或者您是否只需签入代码的最终副本。

# javascript - 表单提交按钮在 Firefox 中不起作用，但在 Chrome 或 IE 中起作用

> ID：12466818
> 
> 赞同：1
> 
> 时间：2012-09-17T20:43:21.447
> 
> 标签：javascript, html

我有一个带有一些输入字段和一个提交按钮的表单。表单应提交给 servlet。

当我点击提交/返回时，在 Chrome 或 IE 中一切正常，但在 Firefox 上没有任何作用。对这个问题有任何想法吗？

HTML：

```
<body>
    <div align="center">
    <form>

        <table cellpadding ='2' border ='0'>
        <tr>
            <td>
                <label for="Database">Database</label>
            </td>
            <td>
                <input id="database" type="text" onchange="setdirtybit()" name="Database" style="width:200px"></input>
            </td>
        </tr>
        <tr>
            <td>
                <label for="Script">Script</label>
            </td>
            <td>
                <input id="script" type="text" onchange="setdirtybit()" name="Script" style="width:200px"></input>
            </td>
        </tr>
        </table>
        <br />
            <input type ='submit' value='Submit' onclick='Close()'></input>
    </form>
    </div>
</body> 
```

JavaScript：

```
function Close()
    {
        window.returnValue = "";
        if(window.dirtyFlag)
        {
            document.forms[0].method="post";
        document.forms[0].action="/nbreports/updates/";
        document.forms[0].submit();
            window.returnValue =    getValue('database') + '/' +
                        getValue('script') ;
        }
        window.close();
    }

    function getValue(varName)
    {
        if(document.getElementById(varName) == null)
            return "";
        if(document.getElementById(varName).value == null)
            return "";
        else
            return document.getElementById(varName).value;
    }

    function setdirtybit()
    {
        window.dirtyFlag = 1;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:33:13.560

```
$('#mytextfield').change(function(e) {
    $('input[type=submit]').focus();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T21:08:49.610

在您的提交按钮上放一个 ID，他们这样做：

```
$(document).ready(function(){
    $('#submitButtonId').click(function(){
        var url = 'myServletUrlHere';
        var data = $('form').serialize();

        $.ajax({
            type: 'POST',
            url: url,
            data: data,
            success: alert("It worked!")
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-29T17:54:45.730

我不确定，但我知道以下表单在 Firefox 中不起作用，但在所有其他浏览器中都有效：

```
<form method="POST">
<textarea rows="4" cols="60" name="body"></textarea><br>
<input type="submit" value="Submit">
</form> 
```

就像提交按钮甚至不处理鼠标点击一样。

# objective-c - 核心数据多线程：代码示例

> ID：12466823
> 
> 赞同：3
> 
> 时间：2012-09-17T20:43:54.000
> 
> 标签：objective-c, multithreading, core-data, grand-central-dispatch, nsmanagedobjectcontext

我的多线程 Core Data 应用程序一直有[问题](https://stackoverflow.com/questions/12410131/hang-in-mergechangesfromcontextdidsavenotification-and-merge-conflicts)，我想我应该认真看看我在做什么以及如何做。请让我知道以下是否可行。

我有一个`DataManager`处理核心数据的单例类。它具有`managedObjectContext`为每个线程返回不同 MOC 的属性。因此，给定`NSMutableDictionary *_threadContextDict`（字符串线程名称到上下文）和`NSMutableDictionary *_threadDict`（字符串线程名称到线程），它看起来像这样：

```
-(NSManagedObjectContext *)managedObjectContext
{
  if ([NSThread currentThread] == [NSThread mainThread])
  {
    MyAppDelegate *delegate = [[UIApplication sharedApplication] delegate];
    return delegate.managedObjectContext; //MOC created in delegate code on main thread
  }
  else
  {
    NSString *thisThread = [[NSThread currentThread] description];
    {
      if ([_threadContextDict objectForKey:thisThread] != nil)
      {
        return [_threadContextDict objectForKey:thisThread];
      }
      else
      {
        NSManagedObjectContext *context = [[NSManagedObjectContext alloc]init];
        MyAppDelegate *delegate = [[UIApplication sharedApplication] delegate];
        [context setPersistentStoreCoordinator:delegate.persistentStoreCoordinator];
        [_threadContextDict setObject:context forKey:thisThread];
        [_threadDict setObject:[NSThread currentThread] forKey:thisThread];

        //merge changes notifications
        NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
        [center addObserver:self selector:@selector(mergeChanges:)
            name:NSManagedObjectContextDidSaveNotification object:context];

        return context;
      }
    }
  }
} 
```

在该`mergeChanges`方法中，我将来自传入通知的更改合并到除生成通知的上下文之外的所有上下文。它看起来像这样：

```
-(void)mergeChanges:(NSNotification *)notification
{
  MyAppDelegate *delegate = [[UIApplication sharedApplication] delegate];
  NSManagedObjectContext *context = delegate.managedObjectContext;
  [context performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification)
     withObject:notification waitUntilDone:YES];

  for (NSString *element in [_threadContextDict allKeys])
  {
    if (![element isEqualToString:[[NSThread currentThread] description]])
    {
      NSThread *thread = [_threadDict objectForKey:element];
      NSManagedObjectContext *threadContext = [_threadContextDict objectForKey:element];
      [threadContext performSelector:@selector(mergeChangesFromContextDidSaveNotification)
         onThread:thread withObject:notification waitUntilDone:YES];
    }
  }
} 
```

每当我在 MOC 上保存更改时，都是通过调用`saveContext`此 shared 上的方法来完成的，该方法`DataManager`调用`save`从上述属性获得的上下文：

```
-(void)saveContext
{
  NSManagedObjectContext *context = self.managedObjectContext;
  NSError *err = nil;
  [context save:&err];
  //report error if necessary, etc.
} 
```

鉴于我对 Core Data 多线程规则的理解，我觉得这应该可行。我为每个线程使用单独的上下文，但对所有线程使用相同的持久存储。但是当我使用它时，我会遇到很多合并冲突，即使我的线程没有处理相同的对象（`NSManagedObject`子类）。我只是从网络上下载数据，解析结果，然后将它们保存到 Core Data。

难道我做错了什么？我试过使用`NSLock`实例来锁定一些东西，但后来我就挂了。

**更新/解决方案**：我可以通过添加一个简单的东西来完成这项工作：一种在我完成后从我的字典中删除线程/MOC 对的方法。在每次调用`dispatch_async`我做核心数据的地方的每个块的末尾，我调用`[self removeThread]`，它从字典中删除当前线程及其 MOC。我也只合并对主线程 MOC 的更改。实际上，这意味着每次我在后台线程上工作时，我都会得到一个全新的 MOC。

我还通过添加一个数字来区分线程`userInfoDict`，而不是调用`description`. 该数字是通过我的类上的只读属性获得的，该属性每次调用时都会返回一个更高的数字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T21:20:32.270

恕我直言，您的方法是一场噩梦，如果出现问题，调试它以解决任何问题应该更糟糕。第一个问题是这样的：

> 我有一个单身 DataManager

没有一个单例对象来管理不同线程上不同实体的核心数据操作。单例处理起来很棘手，尤其是在多线程环境中，并且将其与核心数据一起使用是一种更糟糕的方法。

第二件事，不要使用 NSThread 处理多线程。还有更现代的 API。使用 Grand Central 调度或 NSOperation/NSOperationQueue。自从引入块（iOS 4）以来，Apple 一直鼓励人们从 NSThread 迁移。并且为了将来参考，不要以您使用对象的方式使用对象的描述。描述通常/主要用于调试目的。那里的信息不应该用来比较。甚至没有指针值（这就是为什么你应该使用 isEqual 而不是 ==）。

这是您需要了解的有关核心数据和多线程的知识：

1.  每个线程创建一个上下文。核心数据模板已经为您创建了一个主线程上下文。在后台线程执行开始时（在块内，或在您的 NSOperation 子类的 main 方法上），初始化您的上下文。
2.  一旦你的上下文被初始化，并且有正确的 persistentStoreCoordinator，监听 NSManagedObjectContextObjectsDidChangeNotification。监听通知的对象将在保存上下文的同一线程中接收通知。由于这与主线程不同，因此在使用接收上下文的线程上使用合并上下文进行合并调用。假设您在与主线程不同的线程内使用上下文，并且您想与主线程合并，您需要在主线程内调用 merge 方法。你可以用 dispatch_async(dispatch_get_main_queue(), ^{//code here});
3.  不要在其 managedObjectContext 所在的线程之外使用 NSManagedObject。

有了这些和其他简单的规则，在多线程环境下管理核心数据就更容易了。你的方法更难实现，更难调试。对您的架构进行一些更改。根据您正在使用的线程（而不是集中式）管理上下文。不要将对上下文的引用保留在其范围之外。创建第一个上下文后，在线程上创建上下文并不昂贵。您可以重用相同的上下文，只要它在同一个块/NSOperation 执行中。

# advantage-database-server - 如何检查是否启用了登录？

> ID：12466825
> 
> 赞同：2
> 
> 时间：2012-09-17T20:43:56.907
> 
> 标签：advantage-database-server

所以我可以打电话`sp_ModifyDatabase( 'LOGINS_DISABLED','False' )`来修改 的状态`LOGINS_DISABLED`，但我找不到你如何检查设置的当前状态。有谁知道那在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:57:32.243

[system.dictionary](http://devzone.advantagedatabase.com/dz/webhelp/Advantage11/master_system_dictionary.htm)系统表包含该信息：

```
SELECT Logins_Disabled FROM system.dictionary; 
```

# ember.js - Ember camelize() 与 javaScript camelize()

> ID：12466827
> 
> 赞同：0
> 
> 时间：2012-09-17T20:44:01.213
> 
> 标签：ember.js

我正在尝试对从 ember 视图中提取的值进行骆驼化处理，我希望得到字符串的小写骆驼化形式，如此处所写[http://docs.emberjs.com/symbols/Ember.String.html# .camelize](http://docs.emberjs.com/symbols/Ember.String.html#.camelize)

但是，我得到的是它的大写版本（提取的值以大写开始）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:34:53.063

试试这个`Ember.String.camelize("my lovely property")`给你`myLovelyProperty`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T00:12:23.327

我可以确认`My-Lovely-Property`没有转换为`myLovelyProperty`. 也不是`MY-LOVELY-PROPERTY`——它也单独留下了那些“OVELY”“ROPERTY”帽子，而且产量`MYLOVELYPROPERTY`肯定不像骆驼案。我不确定这种行为是否有意，但似乎这种情况和你的情况都没有被测试示例所涵盖。

如果您或其他任何人强烈认为应该以某种方式涵盖此类情况，也许提交一个 github 问题或 PR？否则，对于您描述的情况，您可以使用类似的表达式`str.charAt(0).toLowerCase() + str.substr(1).camelize()`。

# jqgrid - jqgrid需要什么html元素

> ID：12466831
> 
> 赞同：0
> 
> 时间：2012-09-17T20:44:22.087
> 
> 标签：jqgrid

jqgrid 文档中提供的大多数示例都以带有 id 的 table 标记开始。我们可以使用 div 或任何其他 html 标签创建/初始化网格吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:29:51.220

快速*浏览 jqGrid*源代码将显示以下代码段：

```
if(this.tagName.toUpperCase()!='TABLE') {
    alert("Element is not a table");
    return;
} 
```

所以元素必须是表格。

没有明确检查`id`属性，但它在多个地方用于构建周围元素，因此您也应该保留它。

# json - nginx修改jsonp响应消息

> ID：12466832
> 
> 赞同：0
> 
> 时间：2012-09-17T20:44:24.830
> 
> 标签：json, nginx, jsonp, asp.net-web-api

我们正在创建一个 web api 应用程序。在我们的一个 API 中，如果有任何验证错误，我们将以 JSONP 格式返回错误消息。在 API 请求 URL 中，用户添加这样的查询字符串参数`?jsoncallback=xxxxxxxxxx`。

在验证失败时，我们会抛出一个 400 错误请求 JSONP，其响应消息格式如下：

```
xxxxxxxxxx({"error","error message"}) 
```

它在没有 nginx 的所有环境中运行良好。在我们的暂存环境中，我们配置了 nginx。

这里它正在修改输出，如下所示：

```
badrequest{"error","error message"}) 
```

因此，我们的前端应用程序无法读取响应消息。

你能告诉我，nginx的什么配置设置可能会导致这个问题？

提前致谢

文卡特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:06:01.080

实际上问题不是由于nginx。

这是由于我们的登台服务器中的 IIS 7.5 导致了问题。

以下 web.config 中的配置更改已修复它。

```
<httpErrors errorMode="Detailed" /> 
```

# ruby-on-rails - 无法使用评论应用程序编辑或查看帖子

> ID：12466839
> 
> 赞同：0
> 
> 时间：2012-09-17T20:44:47.847
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我已经构建了一个简单的 Rails 应用程序，其中包含一个/多个评论的帖子。

我想创建一个简单的帖子视图，让我可以查看帖子和相关评论。我希望每条评论都有链接——查看、编辑、删除。

但是，每当我尝试修改下面的代码时，都会出现路由错误。帮助？

路线.rb

```
resources :posts do
   resources :comments
end 
```

耙路线

```
 post_comments GET    /posts/:post_id/comments(.:format)          comments#index
                   POST   /posts/:post_id/comments(.:format)          comments#create
  new_post_comment GET    /posts/:post_id/comments/new(.:format)      comments#new
 edit_post_comment GET    /posts/:post_id/comments/:id/edit(.:format) comments#edit
 post_comment GET    /posts/:post_id/comments/:id(.:format)      comments#show
              PUT    /posts/:post_id/comments/:id(.:format)      comments#update
              DELETE /posts/:post_id/comments/:id(.:format)      comments#destroy 
```

评论控制器.rb

```
def show
  @comment = Comment.find(params[:id])

 respond_to do |format|
  format.html
  format.json { render :json => @post }
 end
end

def edit
 @comment = Comment.find(params[:id])
end 
```

评论\show.html.erb

```
 <p>
   <b>Commenter:</b>
   <%= @comment.user_id %>
 </p>

 <p>
   <b>Comment:</b>
   <%= @comment.text %>
 </p>

 <%= link_to 'View Comment', comment_path(?) %> |
 <%= link_to 'Edit Comment', edit_comment_path(?) %> |
 <%= link_to 'Delete Comment', [@post, comment],
        :confirm => 'Are you sure?',
        :method => :delete %></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:09:17.253

你在看：

*路由错误没有路由匹配 {:action=>"show", :controller=>"comments"} 尝试运行 rake 路由以获取有关可用路由的更多信息。*

我使用您提供的代码复制了您的项目，并且只收到了该路由错误，因为没有将 id 传递给路由辅助方法。因为这些是安静的路由，所以 View Comment 的格式应该是 /comments/:id(.:format)。

我可以通过将 id 或评论对象传递给 comment_path 和 edit_comment_path 帮助器方法来解决此错误，如下所示：

```
<%= link_to 'View Comment', comment_path(2) %> |
<%= link_to 'Edit Comment', edit_comment_path(3) %> |
<%= link_to 'Delete Comment', [@post, comment],
    :confirm => 'Are you sure?',
    :method => :delete %></p> 
```

显然，您希望使用正确的 id 或评论对象来填充它们，而不仅仅是一些随机 id。

希望这可以帮助。

干杯!

# stack - OCaml 元组堆栈

> ID：12466841
> 
> 赞同：2
> 
> 时间：2012-09-17T20:44:57.173
> 
> 标签：stack, ocaml, tuples

我正在尝试使用以下代码在 OCaml 中创建一组元组

```
let (k : (string*string) Stack.t) = Stack.create ;; 
```

但是这样做时我在编译告诉时出错

```
Error: This expression has type unit -> 'a Stack.t
   but an expression was expected of type (string * string) Stack.t 
```

我对 OCaml 很陌生。有人可以指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T20:54:41.707

`Stack.create`是一个函数，它接受值`()`（类型`unit`）并给你一个堆栈。

所以你应该这样做：

```
let (k : (string*string) Stack.t) = Stack.create ();; 
```

如果你写`Stack.create`，你只是在谈论功能，而不是结果。

# recommendation-engine - 如何处理推荐系统的新数据？

> ID：12466842
> 
> 赞同：3
> 
> 时间：2012-09-17T20:44:58.890
> 
> 标签：recommendation-engine, prediction, collaborative-filtering, online-algorithm

这是一个理论问题。假设我已经实现了两种类型的协同过滤：基于用户的 CF 和基于项目的 CF（以[Slope One](http://en.wikipedia.org/wiki/Slope_One)的形式）。

我有一个很好的数据集供这些算法运行。但后来我想做两件事：

1.  我想为数据集添加一个新评级。
2.  我想编辑现有评级。

我的算法应该如何处理这些变化（不做很多不必要的工作）？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:36:07.490

对于这两种情况，策略非常相似：

基于用户的 CF：

*   更新受影响用户的所有相似度（即相似度矩阵中的一行和一列）
*   如果您的邻居是预先计算的，请为受影响的用户计算邻居（对于完整的更新，您可能必须重新计算所有邻居，但我会坚持使用近似解决方案）

斜坡一：

*   更新频率（仅在“添加”情况下）和受影响项目的差异矩阵条目（再次，一行和一列）

备注：如果您的“相似度”不对称，则需要更新一行一列。如果它是对称的，则更新一行会自动导致相应列的更新。对于 Slope-One，矩阵是对称的（频率）和倾斜对称的（差异），所以如果您处理，您还需要更新一行或一列，并免费获取另一行或列（如果您的矩阵存储像这样工作）。

如果您想查看如何实现此功能的示例，请查看 MyMediaLite（免责声明：我是主要作者）：[https ://github.com/zenogantner/MyMediaLite/blob/master/src/MyMediaLite/RatingPrediction /ItemKNN.cs](https://github.com/zenogantner/MyMediaLite/blob/master/src/MyMediaLite/RatingPrediction/ItemKNN.cs) 有趣的代码在方法 RetrainItem() 中，它是从 AddRatings() 和 UpdateRatings() 调用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:38:15.463

一般的东西叫做**在线算法**。

与其重新训练整个预测器，不如仅使用新数据“在线”更新（同时保持可用）。

如果你在谷歌上搜索“在线斜率一预测器”，你应该能够从文献中找到一些相关的方法。

# objective-c - iOS：我的警报消息显示两次，但代码只执行一次

> ID：12466844
> 
> 赞同：0
> 
> 时间：2012-09-17T20:45:02.117
> 
> 标签：objective-c, ios, xcode4

这是我调用“displayAlert”的代码。问题不仅是我收到一条错误消息（wait_fences：未能收到回复：10004003），而且“警报”显示了两次！

```
if(gSiteID.globalSiteID.length == 0)  {  //  user didn't choose site
    [self displayAlert:NSLocalizedString(@"Missing Site ID", nil)  andData:NSLocalizedString(@"You must choose a site from the View Sites page",nil)];
    return;
} 
```

这是“displayAlert”的代码：

```
- (void) displayAlert: (NSString *) title andData: (NSString *) errorMsg  {

    UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle: title
                          message: errorMsg 
                          delegate:nil
                          cancelButtonTitle: @"OK"
                          otherButtonTitles: nil];
    [alert show];
    return;
} 
```

我搜索了 SO 和 Google 并没有发现任何特定于我的问题的内容。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:37:36.073

我发现了问题：确实我从不同的 .cs 文件中调用了它两次（你看到我脸上的鸡蛋了吗？）。杰克劳伦斯请发表你对这个问题的答案，因为你正中了它的头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T01:11:33.880

你是在真机还是模拟器上测试？wait_fences: failed to receive reply 通常意味着调试器与您的设备的连接发生了一些不好的事情，或者您在断点处坐了很长时间并且它超时了。您确定代码只执行一次，并且没有其他方法可以调用该方法吗？在 if 语句和 displayAlert:andData: 方法中粘贴断点，看看会发生什么。运行您的逻辑并找到可以调用显示警报方法的所有情况并在所有情况下粘贴断点。

# css - 1024px 页脚两侧的 CSS 2 背景图像（x 宽度）

> ID：12466847
> 
> 赞同：3
> 
> 时间：2012-09-17T20:45:11.907
> 
> 标签：css, background-image

我有一个宽度为 1024 像素的页脚，背景图像为 1024 像素 x 482 像素。

我想在它的左边放一个 x 重复背景，在它的右边放一个 x 重复背景。我该怎么做呢？

这就是我所拥有的：

```
.footer {
background:
  url("footerleft-bg.png") repeat-x,
  url("footerright-bg.png") repeat-x 0 0 #fff;
height:482px;
width:100%;
} 
```

但它使左侧背景图像完全覆盖右侧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:57:54.317

你可以这样做：

# [**演示**](http://dabblet.com/gist/3739710)

```
footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    min-height: 10em;
    background: black;
}
footer:before, footer:after {
    position: absolute;
    top: 5%; bottom: 5%;
    width: 40%;
    background-repeat: repeat-x;
    background-size: 1px 100%;
    content: '';
}
footer:before { left: 5%; background-image: linear-gradient(crimson, black); }
footer:after { right: 5%; background-image: linear-gradient(black, dodgerblue); } 
```

但是，如果不使用嵌套元素或伪元素，就无法做到这一点。背景会重复或不重复。它不会仅在从 A 点到 B 点的间隔内重复（尽管我有时会发现这也很有用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:48:42.110

CSS2 不支持多个背景图像。您需要嵌套另一个 HTML 元素来完成这项工作。

见：[http ://www.quirksmode.org/css/multiple_backgrounds.html](http://www.quirksmode.org/css/multiple_backgrounds.html)

# objective-c - Objective-C 和 NSCoding 原始数据类型，就像旧的 C 代码一样

> ID：12466849
> 
> 赞同：0
> 
> 时间：2012-09-17T20:45:31.400
> 
> 标签：objective-c, c, nscoding

我有一些看起来像这样的旧 C 代码：

```
#include <stdio.h>
#include <strings.h>
main()
{

    FILE *output;

    struct socket_cpacket
    {
        char    type;                                /* CP_SOCKET */
        char    version;
        char    udp_version;                         /* was pad2 */
        char    pad3;
        unsigned socket;
    };

    struct socket_cpacket sockPack;

    bzero(&sockPack,sizeof(sockPack));
    sockPack.type = 27;
    sockPack.version = 4;
    sockPack.udp_version = 10;
    sockPack.pad3 = 0;
    sockPack.socket = 0;

    output = fopen("/tmp/sockPack.bin", "wb");
    fwrite(&sockPack, sizeof(sockPack), 1, output);
} 
```

我想在 obj-c 中复制这个功能，并开始使用 NSCoding 协议。

CP_Socket.h

```
#import <Foundation/Foundation.h>

@interface CP_Socket : NSObject <NSCoding>
{
@private
    char type;
    char version;
    char udp_version;
    char pad3;
    unsigned int socket;
}

@property (readonly) char type;
@property (readonly) char version;
@property (readonly) char udp_version;
@property (readonly) char pad3;
@property unsigned int socket;

typedef enum {
    mTYPE = 27,
    mVERSION = 4,
    mUDP_VERSION = 10,
} cpSocketEnum;

@end 
```

和 CP_Socket.m

```
#import "CP_Socket.h"

@implementation CP_Socket

#pragma mark ======== properties =========

@synthesize  type;
@synthesize  version;
@synthesize  udp_version;
@synthesize  pad3;
@synthesize  socket;

- (id)init {
    NSLog(@"init");

    if( !( self = [super init] ) )
        return nil;

    type = mTYPE;
    version = mVERSION;
    udp_version = mUDP_VERSION;
    pad3 = 0;
    socket = 0;

    return self;
}

#pragma mark ======== Archiving and unarchiving methods =========
//
// Archives and Serializations Programming Guide for Cocoa
// http://bit.ly/PAaRsV
//
// NSCoding Protocol Reference
// http://bit.ly/PAb1Rd
//

- (void)encodeWithCoder:(NSCoder *)coder
{
    NSLog(@"encodeWithCoder");

    [coder encodeBytes:[self type] length:1 forKey:@"type"];
    //[coder encodeBytes:[self version] length:1 forKey:@"version"];
    //[coder encodeBytes:[self udp_version] length:1 forKey:@"udp_version"];
    //[coder encodeBytes:[self pad3] length:1 forKey:@"pad3"];
    //[coder encodeInt:[self socket] forKey:@"socket"];

}

- (id)initWithCoder:(NSCoder *)coder
{
    NSLog(@"initWithCoder");
}
@end 
```

第一个问题，[coder encodeBytes:[self type] length:1 forKey:@"type"]; 发出警告。不兼容的整数到指针转换将“char”发送到“const uint8_t *”类型的参数。

如何编码一个字符？

我试过 [coder encodeInt:[self type] forKey:@"type"]; 但是字符！= int。

与代码一起进一步了解它是如何工作的；obj-c 代码生成的文件是 280 字节，查看文件内部我看到看起来像名称损坏的类标识符。

我已经尝试过 NSKeyedArchiver 和 NSArchiver ，结果相同。

我不知道从这里去哪里。C 代码生成一个 8 字节的文件。我希望 obj-c 代码在使用诸如 NSCoding 协议之类的一些面向对象的东西时做同样的事情。

我觉得我将不得不扩展 NSCoder 对象来完成这项工作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:28:07.670

我对 NSCoding 了解不多，但 obj C 与 C 互操作就好了。将您现有的代码放入带有参数的函数中并调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:55:16.513

的第一个参数应该`encodeBytes:length:forKey:`是指向要编码的缓冲区的指针，因此请获取 ivar 的地址：

```
[coder encodeBytes:&type length:1 forKey:@"type"]; 
```

或者创建一个临时变量，将属性访问的结果放入其中，并获取其地址。

使用`encodeInt:forKey:`应该也可以（使用演员表），但它会增加数据文件的大小。

如果你真的想要，你当然可以扩展`NSCoder`一个类别：

```
@implementation NSCoder (BTEncodeChar)
- (void)BTencodeChar: (char)c forKey: (NSString *)key
{
    [self encodeBytes:&c length:1 forKey:key];
}
@end 
```

# perl - 将 TSV 记录读入 Perl 哈希

> ID：12466850
> 
> 赞同：1
> 
> 时间：2012-09-17T20:45:37.780
> 
> 标签：perl, hash

我有一个**@fields数组，其中包含****$record**中制表符分隔值的名称（例如，它可能是从文件的记录 0 填充的）。

数组条目的顺序对应于记录中值的顺序。

我想为记录中的每个值填充% **hash****字段 => 值**条目。

有没有单行线可以做到这一点？我不知道如何同时协调遍历**@fields**和**split("\t", $record)**列表。

我能想到的最好的办法是

```
my %hash;
my @values = split("\t", $record);
for my $field (@fields) {
    my $value = shift @values;
    $hash{$field} = $value;
} 
```

但我怀疑有一种更简单的方法可以做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:49:26.450

有——这是[哈希切片](http://search.cpan.org/perldoc?perldata#Slices)符号：

```
@values = split /\t/, $record;
@hash{@fields} = @values; 
```

或者

```
@hash{@fields} = split /\t/, $record; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:48:09.743

这有效：

```
@hash{@fields} = @values; 
```

例如：

```
my @fields = qw[one two three four];
my @values = (1, 2, 3, 4);

my %hash;
@hash{@fields} = @values;

use Data::Dumper;
print Dumper(\%hash); 
```

输出：

```
$VAR1 = {
      'three' => 3,
      'one' => 1,
      'two' => 2,
      'four' => 4
    }; 
```

# facebook - 用户已登录 FB 时的 FaceBook Javascript SDK OAuth 授权

> ID：12466853
> 
> 赞同：0
> 
> 时间：2012-09-17T20:45:49.670
> 
> 标签：facebook, oauth

当用户从我的应用程序中注销但仍登录 facebook 并尝试再次通过 OAuth 登录到我的应用程序时，我正在尝试寻找解决方案。
我通过收听“auth.login”事件来检查授权状态。
当用户在这种情况下单击 facebook-connect 按钮时，弹出窗口会启动，自动关闭，然后什么也没有发生（因为用户已经在 facebook 上登录，所以不会触发登录事件）。如果我添加 getLoginStatus() 检查，那么用户在打开页面时会自动登录到我的应用程序，即使他没有点击 facebook-connect 按钮（这就是我不想要的）有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:04:20.597

**当用户已经登录此 FB 事件时，请在此处指定您的执行代码。**

```
 FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
   // the user is logged in and has authenticated your
   // app, and response.authResponse supplies
   // the user's ID, a valid access token, a signed
   // request, and the time the access token 

   // and signed request each expire
    var uid = response.authResponse.userID;
    var accessToken = response.authResponse.accessToken;

 } else if (response.status === 'not_authorized') {
    // the user is logged in to Facebook, 
    // but has not authenticated your app
  } else {
    // the user isn't logged in to Facebook.
  }
}); 
```

# c# - 如何在数据库中自动编号？

> ID：12466855
> 
> 赞同：-1
> 
> 时间：2012-09-17T20:46:02.880
> 
> 标签：c#, sql-server, windows, winforms, sql-server-2008

我使用 C# Windows 窗体。我需要自动编号不重复。

我将文件 excel 导入到 datagridview 并为不重复生成字段“id”。

但不要工作。

**前任。**

首次导入。身份证 | 名称 P001 => 自动生成 | A P002 => 自动生成 | 乙

第二次进口。身份证 | 名称 P001 => Auto Gen 但我需要 P003 | C P002 => Auto Gen 但我需要 P004 | D

**代码：**

```
 SqlConnection Conn = new SqlConnection();
        SqlCommand cmd = new SqlCommand();
        StringBuilder sb = new StringBuilder();
        SqlTransaction tr;

        private void testExcel_Load(object sender, EventArgs e)
        {
            string appConn = ConfigurationManager.ConnectionStrings["connDB"].ConnectionString;
            Conn = new SqlConnection();
            if (Conn.State == ConnectionState.Open)
            {
                Conn.Close();

            }
            Conn.ConnectionString = appConn;
            Conn.Open();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            try
            {

                if (openFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
                {
                    TextBox1.Text = openFileDialog1.FileName;
                    File.ReadAllText(TextBox1.Text);
                }
                OleDbConnection conn = new OleDbConnection();

                conn.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" + TextBox1.Text + @";Extended Properties=""Excel 8.0; HDR=Yes; IMEX=1; ImportMixedTypes=Text; TypeGuessRows=0"" ";
                OleDbCommand cmd = new OleDbCommand("SELECT * " + "FROM [SHEET1$]", conn);
                DataSet ds = new DataSet();
                OleDbDataAdapter ad = new OleDbDataAdapter(cmd);
                ad.Fill(ds);

                dataGridView1.DataSource = ds.Tables[0];
            }
            catch (Exception)
            {

            }
        }

private void button2_Click(object sender, EventArgs e)
        {
                for (int i = 0; i < dataGridView1.Rows.Count; i++)
                {
                    tr = Conn.BeginTransaction();

                    sb.Remove(0, sb.Length);
                    sb.Append("INSERT INTO tbl_Asset (AsId,AsName)");
                    sb.Append("VALUES (@Asid,@AsName)");
                    string sqlSave = sb.ToString();

                    cmd.CommandText = sqlSave;
                    cmd.CommandType = CommandType.Text;
                    cmd.Connection = Conn;
                    cmd.Transaction = tr;
                    cmd.Parameters.Clear();

                    cmd.Parameters.Add("@Asid", SqlDbType.VarChar).Value = dataGridView1.Rows[i].Cells[0].Value;
                    cmd.Parameters.Add("@AsName", SqlDbType.VarChar).Value = dataGridView1.Rows[i].Cells[1].Value;

                    cmd.ExecuteNonQuery();
                    tr.Commit();

                }
                MessageBox.Show("Insert Done", "Result", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
        }

        private void button3_Click(object sender, EventArgs e)
        {
            int cellnum = 0;

            for (int i = 0; i < dataGridView1.Rows.Count; i++)
            {
                cellnum = cellnum + 1;
                dataGridView1.Rows[i].Cells[0].Value = txtID.Text + "000" + cellnum;                
            }
        } 
```

非常感谢你的时间。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:39:05.220

如果您纯粹在 SQL Server 中执行此操作，则可以[添加一个标识列](https://stackoverflow.com/questions/1049210/adding-an-identity-to-an-existing-column)，然后添加一个[计算列](http://msdn.microsoft.com/en-us/library/ms191250.aspx)以提供您的自定义格式：

```
alter table MyTable add MyNewColumn as 'P' + right('000' + cast(MyIdentColumn as varchar(3)), 3) 
```

请注意，此示例将在您的身份达到 1000 后给出意外结果。

# java - 如何设置用户输入的时间限制？

> ID：12466859
> 
> 赞同：2
> 
> 时间：2012-09-17T20:46:11.930
> 
> 标签：java, multithreading

我正在制作一个模拟简单游戏的应用程序。有必要限制玩家，所以他们有 60 秒的时间输入答案。如果他们没有输入任何内容并且时间限制到期，我有一个问题，那么有必要关闭我打开的扫描仪（System.in），以便他们可以输入答案，并给没有响应的人打 0 分及时。如果有人对我有解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:48:20.040

试试 TimerTasks，看看[http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html](http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html)

# c - Rand() 似乎无法正常工作

> ID：12466862
> 
> 赞同：1
> 
> 时间：2012-09-17T20:46:25.697
> 
> 标签：c, random, srand

> **可能重复：**
> [为什么我总是用 rand() 得到相同的随机数序列？](https://stackoverflow.com/questions/1108780/why-do-i-always-get-the-same-sequence-of-random-numbers-with-rand)

我一直在尝试在 C 中生成随机数，但遇到了一些奇怪的事情。我不知道它是否仅在我的编译器上，但是每当我尝试使用 rand() 函数生成伪随机数时，它都会返回一个非常可预测的数字——确切地说是使用之前的参数生成的数字加上 3.125。很难解释，但这里有一个例子。

```
srand(71);
int number = rand();
printf("%d", number); 
```

这将返回 270。

```
srand(72);
int number = rand();
printf("%d", number); 
```

这将返回 273。

```
srand(73);
int number = rand();
printf("%d", number); 
```

这将返回 277。

```
srand(74);
int number = rand();
printf("%d", number); 
```

这将返回 280。

每八分之一数字高4。否则为3。

这不可能是对的。我的编译器有问题吗？

**编辑：**我想通了——我创建了一个函数，我只播种一次，*然后*循环`rand()`它并生成随机数。谢谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:50:22.337

这里的困惑在于伪随机数生成器是如何工作的。

像 C 那样的伪随机数生成器`rand`通过一个代表当前“状态”的数字来工作。每次`rand`调用该函数时，都会对“状态”编号进行一些确定性计算，以生成下一个“状态”编号。因此，如果给定生成器相同的输入（相同的“状态”），它将产生相同的输出。

因此，当您使用 为生成器播种时`srand(74)`，它每次都会生成相同的数字串。当您使用 为生成器播种时`srand(75)`，它将生成不同的数字字符串等。

确保每次输出不同的常用方法是始终提供不同的种子，通常通过以秒/毫秒为单位的当前时间播种生成器来完成，例如`srand(time(NULL))`。

编辑：这是一个演示此行为的 Python 会话。这是完全可以预料的。

```
>>> import random 
```

如果我们给生成器播种相同的数字，它总是会输出相同的序列：

```
>>> random.seed(500)
>>> [random.randint(0, 100) for _ in xrange(20)]
[80, 95, 58, 25, 76, 37, 80, 34, 57, 79, 1, 33, 40, 29, 92, 6, 45, 31, 13, 11]
>>> random.seed(500)
>>> [random.randint(0, 100) for _ in xrange(20)]
[80, 95, 58, 25, 76, 37, 80, 34, 57, 79, 1, 33, 40, 29, 92, 6, 45, 31, 13, 11]
>>> random.seed(500)
>>> [random.randint(0, 100) for _ in xrange(20)]
[80, 95, 58, 25, 76, 37, 80, 34, 57, 79, 1, 33, 40, 29, 92, 6, 45, 31, 13, 11] 
```

如果我们给它一个不同的种子，即使是稍微不同的种子，数字将与旧种子完全不同，但如果使用相同的（新）种子，数字仍然相同：

```
>>> random.seed(501)
>>> [random.randint(0, 100) for _ in xrange(20)]
[64, 63, 24, 81, 33, 36, 72, 35, 95, 46, 37, 2, 76, 21, 46, 68, 47, 96, 39, 36]
>>> random.seed(501)
>>> [random.randint(0, 100) for _ in xrange(20)]
[64, 63, 24, 81, 33, 36, 72, 35, 95, 46, 37, 2, 76, 21, 46, 68, 47, 96, 39, 36]
>>> random.seed(501)
>>> [random.randint(0, 100) for _ in xrange(20)]
[64, 63, 24, 81, 33, 36, 72, 35, 95, 46, 37, 2, 76, 21, 46, 68, 47, 96, 39, 36] 
```

我们如何让我们的程序每次都有不同的行为？如果我们提供相同的种子，它的行为总是相同的。我们可以使用这个`time.time()`函数，每次调用它都会产生一个不同的数字：

```
>>> import time
>>> time.time()
1347917648.783
>>> time.time()
1347917649.734
>>> time.time()
1347917650.835 
```

因此，如果我们继续通过调用 重新播种它`time.time()`，我们每次都会得到不同的数字序列，因为种子每次都不同：

```
>>> random.seed(time.time())
>>> [random.randint(0, 100) for _ in xrange(20)]
[60, 75, 60, 26, 19, 70, 12, 87, 58, 2, 79, 74, 1, 79, 4, 39, 62, 20, 28, 19]
>>> random.seed(time.time())
>>> [random.randint(0, 100) for _ in xrange(20)]
[98, 45, 85, 1, 67, 25, 30, 88, 17, 93, 44, 17, 94, 23, 98, 32, 35, 90, 56, 35]
>>> random.seed(time.time())
>>> [random.randint(0, 100) for _ in xrange(20)]
[44, 17, 10, 98, 18, 6, 17, 15, 60, 83, 73, 67, 18, 2, 40, 76, 71, 63, 92, 5] 
```

当然，比不断地重新播种更好的是播种一次并从那里继续：

```
>>> random.seed(time.time())
>>> [random.randint(0, 100) for _ in xrange(20)]
[94, 80, 63, 66, 31, 94, 74, 15, 20, 29, 76, 90, 50, 84, 43, 79, 50, 18, 58, 15]
>>> [random.randint(0, 100) for _ in xrange(20)]
[30, 53, 75, 19, 35, 11, 73, 88, 3, 67, 55, 43, 37, 91, 66, 0, 9, 4, 41, 49]
>>> [random.randint(0, 100) for _ in xrange(20)]
[69, 7, 25, 68, 39, 57, 72, 51, 33, 93, 81, 89, 44, 61, 78, 77, 43, 10, 33, 8] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:51:34.387

`rand()`由[伪随机数生成器](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)实现。

连续调用产生的数字的分布`rand()`具有随机数的性质，但顺序是预先确定的。“开始”编号由您提供的种子决定。

您应该只给 PRNG 一个种子。为其提供多个种子可以从根本上改变生成器的随机性。此外，一遍又一遍地为其提供相同的种子会消除所有随机性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:49:43.733

每次调用都会`rand()`返回预定义序列中的下一个数字，其中起始数字是提供给 的种子`srand()`。这就是为什么它被称为*伪*随机数生成器，而不是随机数生成器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T21:54:44.800

无论实现如何，生成“随机”数取决于[发散的无限序列](http://en.wikipedia.org/wiki/Sequence)。无限序列是使用随机函数的种子生成的，由于其性质，它实际上是伪随机的。这将向您解释为什么您的数字实际上非常依赖于您提供函数的种子。

在一些实现中，序列只有一个并且种子是序列的起始成员。在其他情况下，取决于种子，存在不同的序列。如果未提供种子，则种子由内部“时钟”确定。

`randValue % upperBound`通过分别执行和为您的随机数使用上限和下限时，该数字将被截断`randValue + lowerBound`。[随机实现与哈希函数](http://en.wikipedia.org/wiki/Hash_function)非常相似。根据体系结构，随机值的上限取决于它可以执行的最大整数/双精度值，如果用户未将其设置得更低。

# html - 如何使 HTML5 MeasureText() 和 FillText() 跨浏览器一致

> ID：12466863
> 
> 赞同：3
> 
> 时间：2012-09-17T20:46:33.207
> 
> 标签：html, canvas, cross-browser, render

我对 HTML5 Canvas 的一些文本渲染有问题，您可以在[http://jsfiddle.net/qcVAV/](http://jsfiddle.net/qcVAV/)看到。

似乎 Firefox 和 Internet Explorer 测量文本并一致地填充它，但 Chrome 没有。

在提供的链接中，您将看到 Internet Explorer 和 Firefox 看起来相同，并且 measureText 调用显示提供的文本测量为 1679。在 Firefox 中，有额外的精度。然而，对于 Chrome，文本的大小为 1651。

我尝试添加 css 重置[http://cssreset.com](http://cssreset.com) - 因为我认为也许 css 可能会把事情扔掉。

我还能做些什么（如果有的话）来使文本一致地呈现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:28:45.063

对不起，你在这里不走运！

文本不仅在每个浏览器上的测量方式不同，它的缩放和呈现方式也大不相同！尝试将字体大小乘以 4 并将比例乘以 4，结果可能会让您大吃一惊。某些浏览器中的字距调整将关闭，并且在应用比例时 Opera 看起来很糟糕。

保持一致的唯一方法`measureText`是预先计算。

保持一致的唯一方法`fillText`是使用图像而不是文本。[无论如何，它必须更快](http://simonsarris.com/blog/322-canvas-drawtext-considered-harmful)。

如果文本非常动态，那么这两种方法都是站不住脚的，但是如果你只在应用程序中写过少于 100 条不同的文本，那么图像可能是你最好的选择。

# asp.net - 从 ASPX 页面使用简单的远程 SOAP Web 服务时出错

> ID：12466867
> 
> 赞同：0
> 
> 时间：2012-09-17T20:46:45.393
> 
> 标签：asp.net, web-services

我有一个在远程服务器上运行的简单 web 服务，它只需要几个字符串和整数并更新 SQL Server 数据库。我想从一个新的 ASP.NET Web 表单中使用它。

所以今天我通过添加一个 App_Webservice 将远程 web 服务添加到一个项目中。我将远程 wsdl 文件名添加到 .NET 项目（在 VS2005 中），并将引用命名为**wsStoreData**。它创建了一个名为 wsStoreData 的文件夹。

该网络服务有一个名为**StoreRecentPage**的功能。这是简单的页面代码：

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.Services;
using System.Web.UI.HtmlControls;

public partial class Training_FinalPage : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

       wsStoreData.StoreRecentPage("1", "11", 18, 100);
    }
} 
```

构建失败并显示*“名称空间 'wsStoreData' 中不存在类型或名称空间名称 'StoreRecentPage'（您是否缺少程序集引用？）”*

我已经有几年没有在 .NET 中编码了，所以我可能遗漏了一些对你来说很明显的东西。但是我查看了在线示例，它们似乎与我在这里所做的没有什么不同。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:57:02.673

您可以尝试使用此代码

```
protected void Page_Load(object sender, EventArgs e)
{
       //Idon't know name of your proxy, but it's your generated class from your Wsdl after
       //adding reference
       var proxy = new ProxyWebService();//Replace with your proxy class
       proxy.StoreRecentPage("1", "11", 18, 100);
} 
```

# php - 提供带有数组的准备好的语句

> ID：12466868
> 
> 赞同：1
> 
> 时间：2012-09-17T20:46:47.933
> 
> 标签：php, postgresql, prepared-statement

我可以在 Postgres 中使用准备好的语句来添加多个值吗？当我看到用 将东西添加到准备好的语句`array($val)`中时，我突然想到我应该能够提供要放入表中的值数组。这是非常不正确的吗？当我尝试时，我只在我的数据库表中看到了`Array`。我不知道它是否是一个实际的数组，但我猜只是这个词，因为该列是一个简单的`character variable`.

```
$tag    =  array('item1', 'item2', 'item3');

// Prepare a query for execution
$result = pg_prepare($dbconn, "my_query", "INSERT INTO $table ($column) VALUES ($1)");

// Execute the prepared query.  Note that it is not necessary to escape
// the string "Joe's Widgets" in any way
$result = pg_execute($dbconn, "my_query", array("$tag")); 
```

否则，为什么将一个值作为数组提供？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:52:41.507

不，不是，您插入了文本数组...如果 $column 的类型是您的代码应该读取的文本

```
$tag    =  array('item1', 'item2', 'item3');

// Prepare a query for execution
$result = pg_prepare($dbconn, "my_query", "INSERT INTO $table ($column) VALUES ($1)");

// Execute the prepared query.  Note that it is not necessary to escape
// the string "Joe's Widgets" in any way
foreach( $tag as $i )
    $result = pg_execute($dbconn, "my_query", array($i));
/// alternatively you could try this if you really wanna insert a text as array of text without using text[] type - uncomment line below and comment the 2 above
// $result = pg_execute($dbconn, "my_query", array(json_encode($tag))); 
```

或者如果您将 $column 定义为 text[] ，这在 postgresql 中作为数组是合法的，则代码应为

```
$tag    =  array('item1', 'item2', 'item3');

// Prepare a query for execution
$result = pg_prepare($dbconn, "my_query", "INSERT INTO $table ($column) VALUES ($1)");

// Execute the prepared query.  Note that it is not necessary to escape
// the string "Joe's Widgets" in any way
$tmp = json_encode($tag);
$tmp[0] = '{';
$tmp[strlen($tmp) - 1] = '}';
$result = pg_execute($dbconn, "my_query", array($tmp)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:48:31.460

您可以尝试对其进行序列化：

```
$tag = array('item1', 'item2', 'item3');
$tag = serialize($tag);
// Prepare a query for execution
$result = pg_prepare($dbconn, "my_query", "INSERT INTO $table ($column) VALUES ($1)");

// Execute the prepared query.  Note that it is not necessary to escape
// the string "Joe's Widgets" in any way
$result = pg_execute($dbconn, "my_query", $tag); 
```

然后，当您想从数据库中将其作为 PHP 数组获取时，将其反序列化。

# ruby - Ruby on Rails：用于医疗表格定义的 gem 或插件

> ID：12466872
> 
> 赞同：0
> 
> 时间：2012-09-17T20:47:22.013
> 
> 标签：ruby, ruby-on-rails-3

我正在创建一个包含相当长的医疗问卷的网站。用户/患者需要能够悬停或单击医学术语并查看定义。

在 RoR 中有什么方法可以做到这一点？WordPress 有类似的插件，但我在 Rails 中没有找到。

我的想法是有一个术语模型，它具有属性“单词”和“定义”。然后在我的布局中，我必须以某种方式扫描页面并输出定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:12:25.103

为什么不使用 Twitter 的 [Bootstrap](http://twitter.github.com/bootstrap/)框架。

*   [模态](http://twitter.github.com/bootstrap/javascript.html#modals)
    这些可以使用图像和您需要的任何其他内容进行自定义。

*   [工具提示](http://twitter.github.com/bootstrap/javascript.html#tooltips)
    主要用于小段文本。
    `<a href="#" rel="tooltip" title="Medical Term: This term means this..">Medical Term</a>`

*   [弹出框](http://twitter.github.com/bootstrap/javascript.html#popovers)
    可以包含比工具提示更多的信息，但不如模态框那样通用。

[您可以在此处](http://ruby.railstutorial.org/chapters/filling-in-the-layout#sec-custom_css)找到有关在 Rails 3.0/3.2 中使用它的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T22:02:40.860

有多种方法。我使用 jquery 工具提示。我在同一条船上，在我的情况下不是医疗表格，而是保险表格。

我检查了几种不同的方法。我真的很喜欢 jquery-ui 1.9 即将推出的工具提示功能。在正式发布之前，我使用的是 jquery-tooltip。

它们都工作相同，给元素一个标题：

```
<div id='q12', title='This is number 12'>
   What is this?
</div> 
```

然后

```
$('#q12').tooltip 
```

如果你给元素一个标题的唯一原因是创建一个工具提示，那么你可以使用类似的东西：

```
 $("[title]").tooltip({ position: "center left", predelay:500 }); 
```

然后，当元素悬停在上面时，每个定义了标题的元素都会显示您的风格化工具提示。

# svn - svn提交操作错误

> ID：12466876
> 
> 赞同：0
> 
> 时间：2012-09-17T20:47:26.670
> 
> 标签：svn, commit

> **可能重复：**
> [在 SVN 提交期间 Internet 连接断开](https://stackoverflow.com/questions/3854964/internet-connection-drops-during-an-svn-commit)

我更改了本地计算机上的代码并希望将其提交给 SVN 服务器。如果在提交操作期间发生错误，那么代码将不会被提交，或者代码直到错误被提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:01:10.230

不，如果在提交期间出现错误，则该提交操作中的任何内容都不会发送到服务器。因此，如果您尝试提交 5 个文件并且在文件 #2 之后出现错误，则这 5 个文件都不会被提交。

# android - 如果启用/禁用数据漫游，如何以编程方式检查？

> ID：12466878
> 
> 赞同：6
> 
> 时间：2012-09-17T20:47:29.277
> 
> 标签：android

我正在尝试检查用户是否启用/禁用了数据漫游。到目前为止，我发现您可以使用 TelephonyManager.isNetworkRoaming() 和 NetworkInfo.isRoaming() 检查用户当前是否正在漫游，但它们不是我需要的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T08:27:02.920

根据 Nippey 的回答，对我有用的实际代码是：

```
public Boolean isDataRoamingEnabled(Context context) {
    try {
        // return true or false if data roaming is enabled or not
        return Settings.Secure.getInt(context.getContentResolver(), Settings.Secure.DATA_ROAMING) == 1;
    } 
    catch (SettingNotFoundException e) {
        // return null if no such settings exist (device with no radio data ?) 
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T09:21:21.053

您可以通过以下方式请求漫游交换机的状态

```
ContentResolver cr = ContentResolver(getCurrentContext());
Settings.Secure.getInt(cr, Settings.Secure.DATA_ROAMING); 
```

请参阅：http: [//developer.android.com/reference/android/provider/Settings.Secure.html#DATA_ROAMING](http://developer.android.com/reference/android/provider/Settings.Secure.html#DATA_ROAMING)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-10T10:11:34.230

```
public static final Boolean isDataRoamingEnabled(final Context application_context)
{
    try
    {
        if (VERSION.SDK_INT < 17)
        {
            return (Settings.System.getInt(application_context.getContentResolver(), Settings.Secure.DATA_ROAMING, 0) == 1);
        }

        return (Settings.Global.getInt(application_context.getContentResolver(), Settings.Global.DATA_ROAMING, 0) == 1);
    } 
    catch (Exception exception)
    {
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-18T20:26:24.347

更新函数以说明 API 弃用。它现在被替换为：http: [//developer.android.com/reference/android/provider/Settings.Global.html#DATA_ROAMING](http://developer.android.com/reference/android/provider/Settings.Global.html#DATA_ROAMING)

```
public static boolean IsDataRoamingEnabled(Context context) {
    try {
        // return true or false if data roaming is enabled or not
        return Settings.Global.getInt(context.getContentResolver(), Settings.Global.DATA_ROAMING) == 1;
    } 
    catch (SettingNotFoundException e) {
        return false;
    }
} 
```

# git - 如何合并 Git 中先前提交的更改（或获得相同的结果）？

> ID：12466890
> 
> 赞同：0
> 
> 时间：2012-09-17T20:48:08.063
> 
> 标签：git

我在家庭办公室进行开发，团队的其他成员在现场。目前我的环境是使用数据库的本地副本设置的，因此只要我将所有连接字符串从以下内容更改为一切正常：

`data source=server\instance`

至：

`data source=.`

问题是每次本地合并后，我都必须对一堆文件重新应用相同的更改。

我的目标是找出是否有一种很好的方法可以利用 Git 功能来合并来自修订的更改，以便轻松地重新应用这些更改。

作为第一步，我只对我的配置文件所做的更改提交到我的本地副本。我的第一个想法是我可以 Cherry-Pick 提交来取回我的本地更改，但现在我正在查看它，但我不确定如何继续。

有没有人用 Git 解决过这样的配置问题，如果有，你是怎么做到的？

我认为我所追求的功能本质上是“暂时将一组更改合并到一组文件，然后恢复它们”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T21:08:49.620

虽然我个人更喜欢将配置信息与要应用该配置的代码完全分开，但现有的解决方案可用于在移动目标之上维护补丁系列。[guilt](https://github.com/vitaly/guilt)是流行的补丁管理系统 Quilt 的基于 git 的类似工作。

我同意的规范响应是：不要提交配置文件，提交配置文件的*模板*。

就个人而言，我更喜欢这个咒语的略微修改版本：

*   不要提交配置文件，提交与配置文件本身格式相同的*默认值。*
*   以这样一种方式构建您的应用程序，即默认值可以被一个文件覆盖，该文件仅指定那些不同意默认值的设置。这允许随着时间的推移指定其他默认值，而不会由于本地配置的存在而被忽略。这给出了实际与默认值合并的一些（但不是全部）好处。
*   永远记住，“不要在代码旁边提交配置”并不意味着“不要版本化你的配置文件”——你可以单独对它们进行版本化。始终构建您的应用程序，以便可以将“秘密”信息与配置分开存储，以仅允许最小的子集进行非版本化。

# macos - 在 WebView 中捕获 mailto 链接

> ID：12466897
> 
> 赞同：0
> 
> 时间：2012-09-17T20:48:32.983
> 
> 标签：macos, cocoa, webview

有没有办法解决这种疯狂？我正在尝试为信息亭构建一个浏览器应用程序，该应用程序限制了对运行其他应用程序的大量需求，并且只停留在一个网站内。

我研究并发现`decidePolicyForNavigationAction`应该可以满足我的需求，但是如何开始过滤 URI 方案（`mailto://`,`irc://`等）？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T21:26:41.750

您正在应用程序中实现 WebView 来浏览网页，对吗？
如果是，请查看[WebPolicyDelegate 协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebPolicyDelegate_Protocol/)参考。
尤其是以下代表可能会感兴趣：

```
 - (void)webView:(WebView *)webView 
decidePolicyForNewWindowAction:(NSDictionary *)actionInformation 
                       request:(NSURLRequest *)request 
                  newFrameName:(NSString *)frameName 
              decisionListener:(id < WebPolicyDecisionListener >)listener 
```

使用上述委托，您可以验证任何请求，包括`mailto`请求。
快速示例如何检测 URL 方案并决定是否阻止：

```
NSLog(@"Request URL scheme = %@",[[request URL] scheme]);
if([[[request URL] scheme]isEqualToString:@"mailto"])
{
    [listener ignore]; // Block Request
} 
else 
{
    [listener use]; // Allow Request
} 
```

# google-apps-script - 为谷歌应用脚 本 CalendarApp.createEvent() 创建一个 gui

> ID：12466899
> 
> 赞同：0
> 
> 时间：2012-09-17T20:48:36.573
> 
> 标签：google-apps-script

我想创建一个允许我在日历上设置日程的网络应用程序。我知道如何创建事件并在参数中输入日期和时间。但是我希望它是一个 GUI。我使用了 dateBox()，但它会自动将时间设置为午夜。如何让我的助手转到 GUI 并选择日期和时间，例如月份的列表框、日的另一个列表框、另一年的列表框，以及具有正常外观时间框架的时间列表框，例如上午 9:00、4： 00pm 开始时间和结束时间，它是否将会议正确地放在日历上？如果我可以只使用类似于日期框的东西作为日期，并为会议创建一个时间列表框，那就太好了，但所有这些列表框也可以工作。

我知道她只进入日历并添加它会更容易，但我希望她向客户询问几个对他们有用的日期和时间，将它们输入到 gui web 应用程序中，它会发送给我一封包含日期和时间的电子邮件，我只需确认我想要的日期和时间，然后它会自动在日历上安排正确的日期和时间。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T22:31:00.807

如果您仍然需要解决这个问题，这里有一个很好的[日历应用示例](https://sites.google.com/site/appsscripttutorial/calendar-services/create-calendar-events-by-submitting-form)

您可以根据需要根据自己的喜好对其进行调整，但我认为它会为您指明正确的方向。

# python - 为什么 urllib.urlopen.read() 不对应源码？

> ID：12466900
> 
> 赞同：12
> 
> 时间：2012-09-17T20:48:37.610
> 
> 标签：python, urllib, urlopen

我正在尝试获取以下网页：

```
import urllib
urllib.urlopen("http://www.gallimard-jeunesse.fr/searchjeunesse/advanced/(order)/author?catalog[0]=1&SearchAction=1").read() 
```

结果与我使用谷歌浏览器检查网页源代码时看到的不符。

你能告诉我为什么会发生这种情况以及如何改进我的代码来克服这个问题吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T20:51:13.877

您从中得到的`urlopen`是原始网页，这意味着没有执行 javascript 不使用 css；您从 Chrome（或其他浏览器）获得的是最终网页，其中包括可执行的 javascript（可能会改变 HTML）、css 渲染等。所有这些都不会发生在`urlopen`...

因此差异，希望这很清楚

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-22T07:12:14.163

您可以使用 python Selenium 来解决您的问题。这是一个示例代码看看。

```
from selenium import webdriverr
url = "http://www.gallimard-jeunesse.fr/searchjeunesse/advanced/(order)/author?catalog[0]=1&SearchAction=1"
browser = webdriver.Firefox()
browser.get(url)
sleep(10)
all_body_id_html =  browser.find_element_by_id('body') # you can also get all html 
```

然后根据您的选择完成剩下的工作，浏览器实例的更多示例

```
def login(user='ssdf', password="cisin123"):
content = browser.find_element_by_id('content')
content.find_element_by_xpath('.//tbody/tr[2]//input[contains(@class,"textbox")]').send_keys(user)
content.find_element_by_xpath('.//tbody/tr[3]//input[contains(@class,"textbox")]').send_keys(password)
content.find_element_by_css_selector(".button").click() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-26T05:07:26.960

您可以将 Selenium 与 Firefox 一起使用来解决该问题，但在许多情况下它可能不适合，因为每次运行代码时都会弹出浏览器。另一个想法是使用像 PhantomJS 这样的无头浏览器。

最好的方法是使用 mechanize 库。通过 pip 安装 mechanize。

```
pip install mechanize 
```

然后您可以使用以下代码：

```
import mechanize 

mb = mechanize.Browser()
mb.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')] 
mb.set_handle_robots(False)
url = "http://www.gallimard-jeunesse.fr/searchjeunesse/advanced/(order)/author?catalog[0]=1&SearchAction=1"
response = mb.open(url).read()
print response 
```

它还提供睡眠和执行脚本的选项。您可以在[文档中阅读它们。](http://wwwsearch.sourceforge.net/mechanize/doc.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-17T21:01:44.777

此外，一些网站有一个所谓的浏览器开关，这可能会导致在使用不同的浏览器时显示不同的来源（例如，显示移动浏览器的精简版本）。

看看[http://www.diveintopython.net/http_web_services/user_agent.html](http://www.diveintopython.net/http_web_services/user_agent.html)如何将用户代理更改为“Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1"（实际上是我的用户代理）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-23T02:01:07.097

听起来您想要一个可以像浏览器一样运行并为您运行 javascript 的库，然后为您提供生成的源代码。Windmill 应该可以为您做到这一点。( [http://www.getwindmill.com/](http://www.getwindmill.com/) )

有一篇关于如何将它用于你想要的东西的好文章：http:
[//www.packtpub.com/article/web-scraping-with-python](http://www.packtpub.com/article/web-scraping-with-python)

# php - 升级后管理员配置区域中的贝宝选项丢失

> ID：12466901
> 
> 赞同：0
> 
> 时间：2012-09-17T20:48:40.010
> 
> 标签：php, magento, paypal, admin, enterprise

看起来我们已经失去了管理员中的所有贝宝选项。配置在 app/etc/modules 中仍然显示为活动状态。

任何人有任何类似的问题或任何可能导致此问题的想法？

从企业版 1.12.0.0 -> 1.12.0.2

如果有任何我可以提供的信息可能有助于让我知道。

谢谢

# php - 标题名称页面PHP混淆

> ID：12466904
> 
> 赞同：0
> 
> 时间：2012-09-17T20:48:52.037
> 
> 标签：php

所以可以说我有一个 php 文件，其中包含

`$title="Website | Categories";`

我的 header.inc 文件包括 `<title><?=$title?></title>`将输出标题名称的文件。

但是可以说我的 php 页面上也有一个变量，称为`'cat_name'`

我怎样才能将'cat_name'添加到`$title="Website | Categories";`会像 `$title="Website | Categories 'cat_name'";`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T20:50:05.920

`$title="Website | Categories " . $cat_name;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T20:50:22.550

```
$title="Website | Categories $cat_name"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T21:01:49.153

这些将起作用：

*   `$title = "Website | Categories " . $cat_name;`
*   `$title = "Website | Categories $cat_name";`

这将不起作用：

*   `$title = 'Website | Categories $cat_name';`

如果字符串在双引号中，它将解析其中的任何变量。但是，如果字符串在单引号中，则不会。

如果你想变得更漂亮，有多种方法可以将类别名称附加到另一个垂直管道中，例如`Website | Categories | My Category`.

最简单的可能是使用三元运算符来检测是否`$cat_name`已设置并将文本附加到 $title 字符串。

```
$title = "Website | Categories";
$title .= (isset ($cat_name)) ? " | $cat_name" : ""; 
```

您还可以创建一个数组并将导航的每个元素添加到其中（Website、Category、cat_name、sub_cat、sub_sub_cat，...），然后使用 implode 语句将其转换为字符串。

# php - podPress 和 nginx

> ID：12466905
> 
> 赞同：0
> 
> 时间：2012-09-17T20:48:54.080
> 
> 标签：php, wordpress, nginx, podpress

由于我们将服务器移动到基于 nginx 的环境，podPress 的永久链接停止工作：

例如：[http ://www.tecnoblog.net/podpress_trac/web/113765/0/TBPod021.mp3](http://www.tecnoblog.net/podpress_trac/web/113765/0/TBPod021.mp3)

nginx 似乎是在搜索`.mp3`文件，而不是使用 index.php 处理请求。

有人知道我能做什么？一些配置让`index.php`处理请求？

# c# - 如何在 Active Directory 中更改用户的登录名

> ID：12466909
> 
> 赞同：5
> 
> 时间：2012-09-17T20:49:06.453
> 
> 标签：c#, .net, .net-3.5, active-directory

我想从 Active Directory 更改用户的 .NET 应用程序登录。

我现在正在以这种方式更改它：

```
DirectoryEntry userToUpdate = updatedUser.GetDirectoryEntry();  
userToUpdate.Properties["sAMAccountName"].Value = user.NewLogin;  
userToUpdate.CommitChanges(); 
```

但它不像我预期的那样工作。当我检查此用户的 AD“Active Directory 用户和计算机”条目时，然后在“帐户”选项卡上，我看到：
-“用户登录名”属性未更新
-“用户登录名（Windows 2000 之前） " 属性已正确更新。

如何从 C# 代码正确更新 AD 中的登录名？我应该在 DirectoryEntry 中设置什么属性，或者有另一种方法可以更改登录名。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T21:00:24.283

AD中有两个登录名：

```
sAMAccountName    = User logon name, (pre-windows 2000) 
    Format/Usage: domain\user.name (note, your code will only populate user.name)

userPrincipalName = User logon name
    Format/Usage: user.name@domain.local 
```

您需要同时更新两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:56:23.843

尝试`userPrincipalName`代替`sAMAccountName`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T21:03:54.907

这是一个非常好的链接，您可以参考，请务必查看页面底部以查看其完整使用情况

[通过 C#.Net 3.5 在 Active Directory 中的所有内容（使用 System.DirectoryServices.AccountManagement）](http://anyrest.wordpress.com/2010/06/28/active-directory-c/)

# android - 同步对话框

> ID：12466912
> 
> 赞同：0
> 
> 时间：2012-09-17T20:49:21.183
> 
> 标签：android, synchronization, android-alertdialog, alarmmanager

我有一个广播接收器，它在手机启动时运行一个未决的意图。待处理的意图打开一个对话框以提醒用户。

我注意到，如果有几个对话框的时间已经过去，它们都会同时触发。这导致仅显示第一个对话框。当您单击“关闭”按钮时，它会关闭所有对话框。

有没有办法让每个盒子一次显示一个而不像这样卡住？

我阅读了使用“同步”的信息，但它似乎只用于网络。你能告诉我解决这个问题的最佳方法是什么吗？

我的代码：

```
package com.google.android.gcm.demo.app.Alerts;

import java.io.IOException;

import com.google.android.gcm.demo.app.DemoActivity;
import com.google.android.gcm.demo.app.PreferenceConnector;
import com.google.android.gcm.demo.app.R;
import com.google.android.gcm.demo.app.TabBarExample;
import com.google.android.gcm.demo.app.sqllite.DatabaseSqlite;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.res.AssetFileDescriptor;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.Ringtone;
import android.media.RingtoneManager;
import android.net.Uri;
import android.os.Bundle;
import android.os.Vibrator;

public class AlertDialogActivity extends Activity {

    MediaPlayer player = new MediaPlayer();
    Bundle bundle;
    Vibrator vibrate;
    DatabaseSqlite entry = new DatabaseSqlite(AlertDialogActivity.this);
    int vibrateState;
    int soundState;
    AlertDialog.Builder builder;
    Intent intent;
    int idInteger;
    int alertDismissed = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        bundle = getIntent().getExtras();
        String name = bundle.getString("name");
        String id = bundle.getString("id");

        idInteger = Integer.parseInt(id);

        intent = new Intent(AlertDialogActivity.this, TabBarExample.class);
        sound();
        vibrate();

        entry.open();
        entry.updateAlertDismissedState(idInteger, alertDismissed);
        String text = entry.getMinutesForOneShot(idInteger);
        entry.close();

        String textForDisplay = "In " + text + " Minutes";

        builder = new AlertDialog.Builder(this);
        builder.setMessage(textForDisplay)
                .setTitle(name)
                .setCancelable(false)
                .setNegativeButton("Dismiss",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int id) {

                                soundState = PreferenceConnector.readInteger(
                                        AlertDialogActivity.this,
                                        PreferenceConnector.SOUND_ON_OFF, 0);
                                if (soundState == 0) {

                                    player.pause();
                                    player.release();

                                }

                                vibrateState = PreferenceConnector.readInteger(
                                        AlertDialogActivity.this,
                                        PreferenceConnector.VIBRATE_ON_OFF, 0);

                                if (vibrateState == 0) {

                                    vibrate.cancel();
                                }

                                startActivity(intent);

                            }
                        });

        AlertDialog alert = builder.create();
        alert.show();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();

    }

    private void sound() {

        soundState = PreferenceConnector.readInteger(AlertDialogActivity.this,
                PreferenceConnector.SOUND_ON_OFF, 0);
        if (soundState == 0) {

            // play sound

            AssetFileDescriptor afd = this.getResources().openRawResourceFd(
                    R.raw.alarm_clock);
            try {
                player.setDataSource(afd.getFileDescriptor(),
                        afd.getStartOffset(), afd.getLength());
                afd.close();
                player.setAudioStreamType(AudioManager.STREAM_ALARM);
                player.setLooping(true);
                player.prepare();
                player.start();

            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        } else {
        }

    }

    private void vibrate() {

        vibrateState = PreferenceConnector
                .readInteger(AlertDialogActivity.this,
                        PreferenceConnector.VIBRATE_ON_OFF, 0);

        if (vibrateState == 0) {
            // Get instance of Vibrator from current Context
            vibrate = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

            // Start immediately
            // Vibrate for 200 milliseconds
            // Sleep for 500 milliseconds
            long[] pattern = { 0, 200, 500 };

            // The "0" means to repeat the pattern starting at the beginning
            // CUIDADO: If you start at the wrong index (e.g., 1) then your
            // pattern will be off --
            // You will vibrate for your pause times and pause for your vibrate
            // times !
            vibrate.vibrate(pattern, 0);
        } else {
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:22:42.390

为了解决这个问题，我将当前日期与警报触发的时间进行了比较。如果警报通过了我，我把它放在一个数组列表中。然后我使用意图将列表发送到另一个活动。在那个活动中，我使用了另一个 for 循环来一次处理一个对话框。

# c++ - 聚类和点之间的关联

> ID：12466913
> 
> 赞同：0
> 
> 时间：2012-09-17T20:49:22.540
> 
> 标签：c++, algorithm, computer-vision

我正在使用 DBScan 算法对一组点进行聚类。我有一组点的一组 ID，我有一组集群，其中每个集群都有一组点。我想在集群和点 ID 之间建立关联。

例如我有一组 ids { 1,2,3,4}，现在如果我有两个集群并且两个集群有两个点，那么第一个集群的这两个点应该有 ids 1,2 和第二个一个 3,4。此外，如果我有 4 个集群并且每个集群有一个点，那么这些点的 ID 应该是 1、2、3 和 4。此外，如果我有两个集群，但一个集群有 3 个点，另一个集群有一个点，那么第一个簇的点的点的 ID 应该是 1,2,3，而第二个簇的点应该是 4。

我尝试对其进行编码，但我停止计算公式以实现该场景。

```
std::vector<int>_IDs;
 // for each cluster
    for( int j = 0; j<clusters.size();j++ ) 
    {
         // for each point in that cluster
        for ( int i=0; i < clusters[j].m_Points.size(); i++)
        {
  // assign its ID from the _IDs array based and save it in Clusters Vector
            clusters[j].m_IDs.push_back(_IDs[j+ i*clusters[j].m_Points.size()]); 

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:22:09.057

I would write something like that:

```
std::vector<int>_IDs; // those come in from wherever
std::vector<int>::const_iterator id = _IDs.begin();

// for each cluster
for( int j = 0; j<clusters.size(); ++j ) 
{
     // for each point in that cluster
    for ( int i=0; i < clusters[j].m_Points.size(); i++)
    {
        // some external logic should take care that there are enough ids
        // for all points in clusters. sanity check it here. 
        assert(id != _IDs.end());

        // assign its ID from the _IDs array based and save it in Clusters Vector
        clusters[j].m_IDs.push_back(*id); 
        ++id;
    }
} 
```

# java - sqlite + listview + new Activity：close() 从未在数据库上显式调用？

> ID：12466914
> 
> 赞同：0
> 
> 时间：2012-09-17T20:49:24.040
> 
> 标签：java, android, sqlite, cursor, android-sqlite

我制作了一个有 3 个活动的应用程序。在第一个活动（导入）中，我只是将一些值导入到 sqlite 数据库。

这是我的 DatabaseHelper 类：

```
 public class DatabaseHelper_bp extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "bpDB";
    private static final int DATABASE_VERSION = 1;

    // Database creation sql statement
    private static final String DATABASE_CREATE = "create table bp_import ( _id integer primary key, datetime text not null, systolic text not null, diastolic text not null, pulses text not null, notes text not null);";

    public DatabaseHelper_bp(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Method is called during creation of the database
    @Override
    public void onCreate(SQLiteDatabase database) {
        database.execSQL(DATABASE_CREATE);
    }

    // Method is called during an upgrade of the database,
    @Override
    public void onUpgrade(SQLiteDatabase database, int oldVersion,
            int newVersion) {
        Log.w(DatabaseHelper_bp.class.getName(),
                "Upgrading database from version " + oldVersion + " to "
                        + newVersion + ", which will destroy all old data");
        database.execSQL("DROP TABLE IF EXISTS bp_import");
        onCreate(database);
    }
} 
```

我的 DAO 类用于我的度量/值：

```
 public class BpDAO {

    private DatabaseHelper_bp dbHelper;

    private SQLiteDatabase database;
    /**
     * bp table related constants.
     */
    public final static String bp_TABLE = "bp_import";
    public final static String bp_ID = "_id";
    public final static String bp_DT = "datetime";
    public final static String bp_SYS = "systolic";
    public final static String bp_DIA = "diastolic";
    public final static String bp_PUL = "pulses";
    public final static String bp_NOT = "notes";

    /**
     * 
     * @param context
     */
    public BpDAO(Context context) {
        dbHelper = new DatabaseHelper_bp(context);
        database = dbHelper.getWritableDatabase();
    }

    /**
     * \ Creates a new blood pressure measure
     * 
     * @param datetime
     * @param systolic
     * @param diastolic
     * @param pulses
     * @param notes
     * @return
     */
    public long importBP(String datetime, String systolic, String diastolic,
            String pulses, String notes) {
        ContentValues values = new ContentValues();
        values.put(bp_DT, datetime);
        values.put(bp_SYS, systolic);
        values.put(bp_DIA, diastolic);
        values.put(bp_PUL, pulses);
        values.put(bp_NOT, notes);
        return database.insert(bp_TABLE, null, values);
    }

    public void close() {
           database.close();
    }

    /**
     * Fetch all bp
     * 
     * @return
     */
    public Cursor fetchAll_bp() {
        Cursor mCursor = database.query(true, bp_TABLE, new String[] { bp_SYS,
                bp_DIA, bp_DT, bp_ID }, null, null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }
} 
```

在第二个活动（历史）中，我有一个由数据库填充的列表，一切正常![在此处输入图像描述](../Images/0966903bc9e555a1b0b5193f2251c003.png)

这是 2 Activity(history) 的代码：

```
public class HistoryActivity extends ListActivity {

private BpDAO dao;

private SimpleCursorAdapter dbAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    dao = new BpDAO(this);
    Cursor bpList = dao.fetchAll_bp();
    String[] from = new String[] { BpDAO.bp_SYS, BpDAO.bp_DIA, BpDAO.bp_DT };
    int[] target = new int[] { R.id.bpSysHolder, R.id.bpDiaHolder,
            R.id.bpDtHolder };
    dbAdapter = new SimpleCursorAdapter(this, R.layout.history_bp, bpList,
            from, target);
    setListAdapter(dbAdapter);
}

@Override
public void onListItemClick(ListView l, View view, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, view, position, id);
    Log.d("BPT", "Selected bp id =" + id);
            // log says that i have selected an item with id : 11 

    Cursor selectedBpDetails = (Cursor) l.getItemAtPosition(position);

    String bp_DT = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_DT));
    String bp_SYS = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_SYS));
    String bp_DIA = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_DIA));
    String bp_PUL = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_PUL));
    String bp_NOT = selectedBpDetails.getString(selectedBpDetails
            .getColumnIndex(BpDAO.bp_NOT));

    Log.d("BPT", "Selected bp details = { date=" + bp_DT + ", systolic="
            + bp_SYS + ", diastolic=" + bp_DIA + ", pulses=" + bp_PUL
            + ", notes=" + bp_NOT + " }");

    Intent intent = new Intent(HistoryActivity.this, FromHistory.class);
    intent.putExtra("bp_SYS", bp_SYS);
    intent.putExtra("bp_DIA", bp_DIA);
    intent.putExtra("bp_DT", bp_DT);
    intent.putExtra("bp_PUL", bp_PUL);
    intent.putExtra("bp_NOT", bp_NOT);
    startActivity(intent);
} 
```

}

当我单击一个列表项时，我开始一个新的活动，我显示数据库中的所有度量信息。

但我在logcat中有：

```
1.close() was never explicitly called on database
2.android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
3.E/System(561): java.lang.IllegalStateException: Don't have database lock! 
```

我已经看到了一些其他问题，但没有设法找到如何根据我的情况关闭它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:42:15.293

（正如其他人指出的那样，当您完成游标时，您应该关闭游标，但是......）
错误告诉您需要关闭 SQLiteDatabase。将此方法添加到您的`BpDAO`类中：

```
public void close() {
    database.close();
} 
```

每当您`BpDAO`在需要调用的任何 Activity 中创建新对象时`close()`，您都可以在完成后立即执行此操作或在`onDestroy()`：

```
@Override
protected void onDestroy() {
    super.onDestroy();
    dao.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:50:47.340

完成光标后，您需要`close()`

例子：

```
selectedBpDetails.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T20:54:43.360

在获取数据后直接通过调用`close()`它来关闭游标，或者您可以覆盖`onDestroy`活动的方法，然后在此方法的实现中关闭已打开的游标。

```
public class HistoryActivity extends ListActivity {
    // ...
    Cursor bpList;
    // ...

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // ...
        bpList = dao.fetchAll_bp();
        // ...
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        bpList.close();
    }

    @Override
    public void onListItemClick(ListView l, View view, int position, long id) {
        // ...
        Cursor selectedBpDetails = (Cursor) l.getItemAtPosition(position);
        // ...
        selectedBpDetails.close();
    }

    // ...
} 
```

# php - 使用 PHP 检查验证后如何将文件保存到服务器

> ID：12466916
> 
> 赞同：0
> 
> 时间：2012-09-17T20:49:25.493
> 
> 标签：php, mysql, file-upload

如果用户上传文件并像这样检索内容

```
$file = $_FILES['uploadedFile']; 
```

然后，将文件发送到函数以确保它是可接受的文件类型。如果是，请保存在服务器上

```
function saveInputFile($file){
   if($check->checkFile($file)== TRUE){
      //save $file on my server
   }
   else{
      echo "can't be saved!";
   }
} 
```

**假设它通过了 checkFile 函数，那么我怎样才能从 saveInputFile 函数中将此文件保存到我的服务器？我可以将文件设置为等于变量，然后保存该变量还是必须直接从 POST 数据中保存文件？**

我已经看到它是这样完成的，但是我已经将文件传递给了这个函数。

```
if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
   echo "The file ".  basename( $_FILES['uploadedfile']['name']). " has been uploaded";
 } else{
    echo "There was an error uploading the file, please try again!";
} 
```

归根结底，我想在以下函数中保存一个文件。我可以像在上面的 saveInputFile 函数中那样传递文件，还是不能像这样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:27:26.067

您可以使上传文件成为它自己的类型，它在数据旁边具有所需的方法。这将使使用更加灵活：

```
$upload = new UploadFile($_FILES['uploadedFile']);
$message = saveInputFile($upload);
echo $message;

function saveInputFile(UploadFile $upload)
{
    if ($check->checkFile($upload->getBasename()) == TRUE) {
        $message = $upload->moveTo($target_path)
            ? sprintf('The file %s has been uploaded', $upload->getBasename())
            : 'There was an error uploading the file, please try again!'
            ;
    } else {
        $message = "can't be saved!";
    }

    return $message;
} 
```

新类型`UploadFile`代表`$_FILE`数组中的一个文件，它是一个包装文件上传携带的基本数据和方法的类。这是一些示例代码：

```
class UploadFile
{
    protected $file;

    private $filename;

    public function __construct(array $file)
    {
        $this->file = $file;
    }

    public function hasError()
    {
        return $this->getProperty('error') !== UPLOAD_ERR_OK;
    }

    public function getError()
    {
        return $this->getProperty('error');
    }

    public function getBasename()
    {
        return basename($this->getProperty('name'));
    }

    public function getFilename()
    {
        return $this->filename;
    }

    /**
     * @param $newName
     * @return NULL|SplFileInfo
     * @throws BadMethodCallException
     */
    public function moveTo($newName)
    {
        $newName  = (string)$newName;
        $filename = $this->getFilename();

        if ($filename !== NULL) {
            throw new BadMethodCallException(sprintf('Upload file (%s) has been already moved (%s).', $this->getBasename(), $filename));
        }

        $tmpName = $this->getProperty('tmp_name');

        if (move_uploaded_file($tmpName, $newName)) {
            $this->filename = realpath($newName);
        }

        return $this->getFileInfo();
    }

    /**
     * @return SplFileInfo|NULL
     */
    public function getFileInfo()
    {
        $filename = $this->getFilename();

        if ($filename !== NULL) {
            return new SplFileInfo($filename);
        }
    }

    protected function getProperty($name, $default = NULL)
    {
        if (isset($this->file[$name])) {
            return $this->file[$name];
        }

        return $default;
    }
} 
```

随心所欲地使用它。另请参阅[PHP 手册中有关文件上传的](http://php.net/manual/en/features.file-upload.php)[`SplFileInfo`](http://php.net/SplFileInfo)文档，其中记录了数组的结构和[PHP 上传错误代码（这很重要）](http://www.php.net/manual/en/features.file-upload.errors.php)。`$_FILE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T20:53:17.870

您的`move_uploaded_file`函数应采用 2 个参数，即*源文件名*和`destination file`名称。

在 PHP 中，文件移动函数称为[rename](http://www.php.net/manual/en/function.rename.php)。

# xamarin.ios - 外部显示器上的视频，而设备上的应用程序 UI

> ID：12466921
> 
> 赞同：2
> 
> 时间：2012-09-17T20:49:44.623
> 
> 标签：xamarin.ios

是否可以通过 HDMI 连接器和 Apple TV 在外部显示器上播放视频，同时在设备上拥有我自己的应用程序 UI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:37:47.010

是的，这是可能的，因为外部显示器上显示的内容既可以镜像当前应用程序窗口，也可以显示不同的窗口。

Apple的[Multiple Display Programming Guide](https://developer.apple.com/library/prerelease/ios/#documentation/WindowsViews/Conceptual/WindowAndScreenGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012555-CH1-SW1)很好地描述了实现这一点的过程。您可能还需要查看[AirPlay 概述](https://developer.apple.com/library/prerelease/ios/#documentation/AudioVideo/Conceptual/AirPlayGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011045)（在外部显示器启用 AirPlay 的情况下）以在 Apple TV 上显示视频。

# java - 是否有 SQLite 查询验证器库？

> ID：12466925
> 
> 赞同：1
> 
> 时间：2012-09-17T20:50:09.293
> 
> 标签：java, javascript, sqlite

是否有 Java 或 javascript SQLite 查询验证器库，我可以传递原始查询并验证输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T07:07:56.197

解析 SQL 过于复杂，无法在数据库之外执行此操作，并且几乎不可能正确获取特定 SQL 方言的所有细节。

如果您想避免执行查询，请在其前面加上[`EXPLAIN`](http://www.sqlite.org/lang_explain.html)or[`EXPLAIN QUERY PLAN`](http://www.sqlite.org/lang_explain.html)并检查*该*命令是否导致错误。

# python - 如何在 web2py 中将“/admin”重命名为其他 URL？

> ID：12466932
> 
> 赞同：0
> 
> 时间：2012-09-17T20:50:35.707
> 
> 标签：python, web-applications, web2py

web2py 应用程序管理默认位于：

```
http://127.0.0.1:8000/admin/default/site 
```

是否可以将“admin”更改为其他内容（例如）：

```
http://127.0.0.1:8000/appadmin/default/site 
```

如果有可能如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T00:57:26.250

管理员只是一个应用程序。

在 Windows 上打开 Windows 资源管理器并转到 \web2py\applications\ 右键单击​​“admin”文件夹，然后单击重命名。

在 Linux 上。

```
cd path/to/web2py/applications
mv admin newadmin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-07T06:09:41.087

[这个答案](https://stackoverflow.com/a/12487174/4065350)是正确的，但需要做更多的改变。

在您的情况下，将 url 从更改`/admin`为`/appadmin`执行以下步骤

1.  `admin`将应用文件夹名称重命名为`appadmin`

2.  修复损坏的管理应用程序链接

    在`your_app/controllers/appadmin.py`中，搜索所有指向`admin`应用程序的链接并将其替换为指向`appadmin`应用程序的链接

3.  更改指向错误页面的链接的创建

    更新`routes.py`，将错误路由到`appadmin`应用程序而不是`admin`应用程序

有关详细步骤，请阅读[如何在 web2py 中更改管理应用程序 url？](http://gauravvichare.com/how-to-change-admin-app-url-in-web2py/)

# django - GeoDjango 查询的聚合

> ID：12466933
> 
> 赞同：1
> 
> 时间：2012-09-17T20:50:38.550
> 
> 标签：django, aggregation, geodjango

我有以下型号：

```
from django.contrib.gis.db import models as geomodels

class Shop(models.Model):
    objects = geomodels.GeoManager()
    name = models.CharField(max_length = 64)

class ShopOutlets(models.Model):
    objects = geomodels.GeoManager()
    shop = models.ForeignKey(Shop)
    location  = geomodels.PointField(srid = 4326, blank = True, null = True) 
```

我想做的是按照离给定点最近的商店的顺序找到（不同的）商店。

我试过这个：

```
Shop.objects.annotate(dist = Min('shopoutlet__location')) 
```

但它实际上并没有给我指定中心点的选项。关于如何做到这一点的任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:06:40.920

我想你想得到两点之间的距离。

如果你想要这个，只需执行以下操作：

```
ShopOutlets.objects.distance(point).order_by('distance') 
```

[distance 方法](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoquerysets/#distance)将计算您的对象到给定点之间的距离，并将动态地在您的对象中放置一个距离属性。

# grails - 是否可以强制 Grails/Gorm 在插入中不包含列？

> ID：12466938
> 
> 赞同：5
> 
> 时间：2012-09-17T20:50:56.120
> 
> 标签：grails, grails-orm

例如，假设我想让该列设置为数据库默认设置的任何内容，而不在域类中重新定义该默认设置？

我通过谷歌找不到太多东西。有迹象表明，如果我直接使用 Hibernate，我可以将该特定列/属性设置为私有，这可能会完成我所寻求的。

我当然可以不定义该列，GORM 会忽略它。但是每当 Grails 应用程序进行选择时，我都需要其中的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T21:49:24.737

[您可以像在doc](http://grails.org/doc/2.1.0/ref/Database%20Mapping/insertable.html)中一样使用 GORM 可插入属性，也可以通过事件读取值`beforeInsert`：

```
class Book {
    String title
    String isbn

    static mapping = {
        isbn nullable: false
    }

    def beforeInsert {
        title = queryFromDatabase...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T03:15:43.877

我认为您必须使用 beforeInsert / Hibernate 拦截器路线，因为您的要求是从现有数据库中读取默认值。

[您可以使用 JDBC 的DatabaseMetaData.getColumns](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#getColumns%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)读取列的数据库默认值。

要找出数据库表和列名，可以使用类似这样的东西（此代码未经测试）

```
import org.codehaus.groovy.grails.orm.hibernate.cfg.GrailsDomainBinder
import org.codehaus.groovy.grails.orm.hibernate.cfg.Mapping
import org.codehaus.groovy.grails.commons.DomainClassArtefactHandler

def gdc=grailsApplication.getArtefact(DomainClassArtefactHandler.TYPE, someInstance.class.name)
Mapping mapping=GrailsDomainBinder.getMapping(gdc)
def tableName=mapping.tableName
def columnName=mapping.getPropertyConfig('someColumn').column 
```

这不是一个完整的答案，但我希望这会有所帮助。

# django - django：预取 GenericForeignKey 的相关对象

> ID：12466945
> 
> 赞同：17
> 
> 时间：2012-09-17T20:51:25.123
> 
> 标签：django, optimization, foreign-keys, generic-foreign-key

假设我有一个模型`Box`，`GenericForeignKey`它指向一个`Apple`实例或一个`Chocolate`实例。`Apple`和`Chocolate`又分别具有到`Farm`和`Factory`的外键。我想显示一个`Box`es 列表，为此我需要访问`Farm`和`Factory`. 如何在尽可能少的数据库查询中做到这一点？

最小的说明性示例：

```
class Farm(Model):
    ...

class Apple(Model):
    farm = ForeignKey(Farm)
    ...

class Factory(Model):
    ...

class Chocolate(Model):
    factory = ForeignKey(Factory)
    ...

class Box(Model)
    content_type = ForeignKey(ContentType)
    object_id = PositiveIntegerField()
    content_object = GenericForeignKey('content_type', 'object_id')
    ...

    def __unicode__(self):
        if self.content_type == ContentType.objects.get_for_model(Apple):
            apple = self.content_object
            return "Apple {} from Farm {}".format(apple, apple.farm)
        elif self.content_type == ContentType.objects.get_for_model(Chocolate):
            chocolate = self.content_object
            return "Chocolate {} from Factory {}".format(chocolate, chocolate.factory) 
```

这是我尝试过的几件事。在所有这些示例中，**N**是 Box 的数量。查询计数假定`ContentType`s`Apple`和`Chocolate`已经被缓存，因此`get_for_model()`调用不会命中数据库。

1）天真：

`print [box for box in Box.objects.all()]`

这会执行**1**（获取 Boxes）+ **N**（为每个 Box 获取 Apple 或 Chocolate）+ **N**（为每个 Apple 获取 Farm，为每个 Chocolate 获取 Factory）查询。

2)`select_related`在这里没有帮助，因为`Box.content_object`是`GenericForeignKey`.

3) 从 django 1.4 开始，`prefetch_related`可以 fetch `GenericForeignKey`s。

`print [box for box in Box.objects.prefetch_related('content_object').all()]`

这会执行**1**（获取盒子）+ **2**（获取所有盒子的苹果和巧克力）+ **N**（获取每个苹果的农场和每个巧克力的工厂）查询。

4) 显然`prefetch_related`不够聪明，无法遵循 GenericForeignKeys 的 ForeignKeys。如果我尝试：

`print [box for box in Box.objects.prefetch_related( 'content_object__farm', 'content_object__factory').all()]`

它正确地抱怨`Chocolate`对象没有`farm`字段，反之亦然。

5）我可以这样做：

```
apple_ctype = ContentType.objects.get_for_model(Apple)
chocolate_ctype = ContentType.objects.get_for_model(Chocolate)
boxes_with_apples = Box.objects.filter(content_type=apple_ctype).prefetch_related('content_object__farm')
boxes_with_chocolates = Box.objects.filter(content_type=chocolate_ctype).prefetch_related('content_object__factory') 
```

这将执行**1**（获取盒子）+ **2**（获取所有盒子的苹果和巧克力）+ **2**（获取所有苹果的农场和所有巧克力的工厂）查询。缺点是我必须手动合并和排序两个查询集（ `boxes_with_apples`, ）。`boxes_with_chocolates`在我的实际应用程序中，我在分页的 ModelAdmin 中显示这些框。如何在此处集成此解决方案并不明显。也许我可以编写一个自定义分页器来透明地进行缓存？

[6）我可以基于此](http://blog.roseman.org.uk/2010/02/22/django-patterns-part-4-forwards-generic-relations/)拼凑一些也可以进行 O(1) 查询的东西。`_content_object_cache`但是，如果可以避免的话，我宁愿不要弄乱内部（ ）。

总而言之：**打印一个 Box 需要访问 GenericForeignKey 的 ForeignKeys。如何在 O(1) 查询中打印 N 个框？**(5) 是我能做的最好的，还是有更简单的解决方案？

加分项：**您将如何重构此 DB 模式以使此类查询更容易？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T14:10:57.330

您可以手动实现类似`prefetch_selected`并使用 Django 的`select_related`方法，这将在数据库查询中进行连接。

```
apple_ctype = ContentType.objects.get_for_model(Apple)
chocolate_ctype = ContentType.objects.get_for_model(Chocolate)
boxes = Box.objects.all()
content_objects = {}
# apples
content_objects[apple_ctype.id] = Apple.objects.select_related(
    'farm').in_bulk(
        [b.object_id for b in boxes if b.content_type == apple_ctype]
    )
# chocolates
content_objects[chocolate_ctype.id] = Chocolate.objects.select_related(
    'factory').in_bulk(
        [b.object_id for b in boxes if b.content_type == chocolate_ctype]
    ) 
```

这应该只进行 3 个查询（`get_for_model`查询被省略）。该[`in_bulk`](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#django.db.models.query.QuerySet.in_bulk)方法返回格式为 {id: model} 的字典。因此，要获取您的 content_object，您需要如下代码：

```
content_obj = content_objects[box.content_type_id][box.object_id] 
```

但是，我不确定此代码是否会比您的**O(5)**解决方案更快，因为它需要对框查询集进行额外迭代，并且它还会生成带有`WHERE id IN (...)`语句的查询。

但是，如果您仅按 Box 模型中的字段对框进行排序，则可以`content_objects`在分页后填充 dict。但是您需要以某种方式传递`content_objects`给。`__unicode__`

> 您将如何重构此 DB 模式以使此类查询更容易？

我们有类似的结构。我们存储`content_object`在 中`Box`，但我们使用and而不是`object_id`and 。我们有一个返回 Apple 或 Chocolate 模型的方法。在这种情况下，我们可以使用，但在大多数用例中，我们通过 content_type 过滤 Boxes。因此，我们遇到了与您的第 5 个选项相同的问题。但是当没有 prefetch_selected 时，我们在 Django 1.2 上开始了我们的项目。`content_object``ForeignKey(Box)``Apple``Chocolate``Box``get_object``select_related`

如果您将农场/工厂重命名为某个通用名称，例如创建者，prefetch_related 会起作用吗？

关于您的**选择 6**

我不能说任何反对填充`_content_object_cache`。如果您不喜欢处理内部问题，您可以填写自定义属性，然后使用

```
apple = getattr(self, 'my_custop_prop', None)
if apple is None:
    apple = self.content_object 
```

# css - IE定位问题

> ID：12466946
> 
> 赞同：0
> 
> 时间：2012-09-17T20:51:27.213
> 
> 标签：css, internet-explorer

我即将结束我父亲网站的新 Web 项目，但是在 IE 中打开它后，我现在想跳桥！

我附上了两个屏幕截图，说明该网站与任何其他浏览器相比如何在 IE 中呈现。出于某种奇怪的原因，它会将页面内容推到滑块下方。

在 IE 中呈现如下：[http ://cl.ly/JVgZ](http://cl.ly/JVgZ)

在其他浏览器中按预期呈现，如下所示：[http ://cl.ly/JVgo](http://cl.ly/JVgo)

（对不起，新手，所以我不能直接发布图像-.-）

如您所见，整个深灰色文本区域都隐藏在滑块下方。

我假设这是与 CSS 相关的，我的滑块代码如下：

```
body { }
.panel h2.title { }
/* Most common stuff you'll need to change */

.coda-slider-wrapper { }
.coda-slider {  padding-bottom: 0px;  padding-top: 0px;  background-color: #262626;  }

/* Use this to keep the slider content contained in a box even when JavaScript is disabled */
.coda-slider-no-js .coda-slider { overflow: auto !important; }

/* Change the width of the entire slider (without dynamic arrows) */
/* Change margin and width of the slider (with dynamic arrows) */
.coda-slider-wrapper.arrows .coda-slider, .coda-slider-wrapper.arrows .coda-slider .panel { width: 1280px }

/* Arrow styling */
.coda-nav-left a, .coda-nav-right a { }

/* Tab nav */
.coda-nav ul li a.current { 
color: white;
height: 60px; 
z-index: 9999;
position: relative;
}

.coda-nav ul li a.current:before {
    content: '';

    position: absolute;
    height: 0;
    width: 0;
    bottom: 2px;
    left: 50%;
    margin-left: -9px;
    z-index: 9999;

    border: 10px solid transparent;
    border-top: 10px solid #303030;
    border-bottom: none;
}

/* Panel padding */
.coda-slider .panel-wrapper { }

/* Preloader */
.coda-slider p.loading { text-align: center }

/* Tabbed nav */
.coda-nav ul { margin-left: 167px; margin-top: 0px; margin-bottom: 0px; clear: both; display: block; overflow: hidden;}
.coda-nav ul li { display: inline }
.coda-nav ul li a { letter-spacing: 0.5px; margin-right: 30px; text-align: center; font-size: 20px; font-family: FreightSansBook; color: #bfbfbf; display: block; float: left; text-decoration: none }

.coda-nav ul li a:hover { letter-spacing: 0.5px; margin-right: 30px; text-align: center; font-size: 20px; font-family: FreightSansBook; color: white; display: block; float: left; text-decoration: none }

/* Miscellaneous */
.coda-slider-wrapper { clear: both; overflow: auto }
.coda-slider { float: left; overflow: hidden; position: relative }
.coda-slider .panel { display: block; float: left }
.coda-slider .panel-container { position: relative }
.coda-nav-left, .coda-nav-right { display: none; }
.coda-nav-left a, .coda-nav-right a { display: none; }
p { color: #bfbfbf; } 
```

我希望有人能够拯救我！

非常感谢您抽出宝贵的时间和您能提供的任何帮助。

编辑：此代码也出现在我的 HTML 文档中...

```
<!--[if IE]>
    <style type="text/css">
     .timer { display: none !important; }
     div.caption { background:transparent; filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000,endColorstr=#99000000);zoom: 1; }
     #sliderarea {position: absolute !important; margin-top: 0px !important;}
     div.orbit-wrapper {margin-top: -140px !important; position: absolute !important;}
    </style>
    <![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:09:55.413

我认为问题出在您的 clearfix 技术上。一个“clearfix”是什么给浮动元素，比如你的滑块，一个外部可见的高度，而不是浮动元素的正常零高度。您的 clearfix 在大多数浏览器中都有效，但在 IE 中无效。

尝试[这个关于 clearfixes 方法的答案](https://stackoverflow.com/a/1633170/578288)中描述的 clearfixes 替代方法。也许那些其他方法会比你现在的方法更好。我很难说出您当前的方法是什么，因为您的 clearfix 规则与您的视觉显示规则混合在一起。从该答案顶部的 micro-clearfix 开始：

```
/* For modern browsers */
.coda-nav ul li a.current:before,
.coda-nav ul li a.current:after {
    content:"";
    display:table;
}
.coda-nav ul li a.current:after {
    clear:both;
}
/* For IE 6/7 (trigger hasLayout) */
.coda-nav ul li a.current {
    zoom:1;
} 
```

删除现有代码中 clearfix 将覆盖的任何规则。

# git - cvs2git 从 CVS 存储库需要什么？

> ID：12466947
> 
> 赞同：3
> 
> 时间：2012-09-17T20:51:29.497
> 
> 标签：git, cvs, cvs2git

我有一个大型 CVS 存储库（~ 30 GB），并且使用它转换单个模块`cvs2git`似乎我需要的只是：

*   CVSROOT 目录
*   模块目录

当然，模块的目录与 CVSROOT 的相对位置应该与原始 repo 中的相对位置相同。

我对此感兴趣，因为我必须在一个单独的盒子上进行转换工作，如果我不需要，我不想复制整个 repo。

第一个问题是：这就是`cvs2git`转换单个模块所需的全部内容吗？

`cvs2git`第二个问题是： CVSROOT 目录到底需要什么？多年后，CVSROOT 目录积累了*很多*垃圾（现在大约 2 GB），我只想复制我需要的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T07:28:30.047

您所需要的只是模块目录和 CVSROOT 目录。CVSROOT 目录必须存在，但可以为空；例如，在正确的位置执行“mkdir CVSROOT”就足够了。

甚至不需要模块目录与 CVSROOT 位于与原始存储库中相同的相对位置。只需要生成的 git 存储库中所需的目录结构部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T23:23:17.733

由于 cvs2git 直接在文件级别上工作。它真的不需要比相关模块本身更多的东西。正如 mhagger 所说， CVSROOT 是必要的，但可以为空。甚至可以移动模块目录和/或子目录，加入或拆分它们，将它们迁移到新的目录结构中。

我用它来将一些连接的模块加入到一个 git 项目中，并将一些大的静态 lib/ 文件夹（二进制数据）移到一个单独的 git 子项目中。

# date - lua程序显示当前时间

> ID：12466950
> 
> 赞同：11
> 
> 时间：2012-09-17T20:51:44.983
> 
> 标签：date, lua, timestamp

这是一段显示时间的 lua 脚本。我不能分开数字 ie: `time.hour, ":"`，基本上显示*hh:mm:ss*

```
time = os.date("*t")
print(time.hour .. time.min .. time.sec) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T21:02:47.267

做这件事有很多种方法：

1.  使用字符串连接：`print(time.hour .. ":" .. time.min .. ":" .. time.sec)`

2.  使用格式：`print(("%02d:%02d:%02d"):format(time.hour, time.min, time.sec))`

3.  使用表连接：`print(table.concat({time.hour, time.min, time.sec}, ":"))`

当你真的需要格式化你的字符串时，我的首选是#2。对于`time = {hour = 1, min = 20, sec = 5}`此打印：

```
1:20:5
01:20:05
1:20:5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-04T11:40:15.457

为了简单地打印时间 - 从完整的日期戳字符串中提取您想要的（时间）：

```
 > os.date():sub(9)
    12:30:39 
```

这适用于我的电脑；）。您的操作系统中可能有[不同的日期戳字符串](https://www.lua.org/manual/5.1/manual.html#pdf-os.date)。

G

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-01T03:35:08.213

```
local date = os.date('*t')
local time = os.date("*t")
print(os.date("%A, %m %B %Y | "), ("%02d:%02d:%02d"):format(time.hour, time.min, time.sec))` 
```

![在此处输入图像描述](../Images/4037e68c991e8a346be58545f0513640.png)

# graphviz - Graphviz：如何使用 circo 布局排列节点

> ID：12466951
> 
> 赞同：15
> 
> 时间：2012-09-17T20:51:49.050
> 
> 标签：graphviz

我正在尝试使用圆形拓扑绘制图形。

这是我期望看到的： ![在此处输入图像描述](../Images/082c060a74d90aa2d27f19bc3df2c925.png)

这是我的 gv 文件：

```
digraph g1 {
    layout="circo";
    node [shape = doublecircle]; N4 N6;
    node [shape = circle];
    N0 -> N1 [ label = "{1,0}"];
    N1 -> N2 [ label = "{1,0}"];
    N2 -> N3 [ label = "{1,0}"];
    N3 -> N4 [ label = "{1,0}"];
    N4 -> N5 [ label = "{1,0}"];
    N5 -> N6 [ label = "{1,0}"];
    N6 -> N0 [ label = "{1,0}"];

    N0 -> N4 [ label = "{1,0}"];
    N1 -> N5 [ label = "{1,0}"];
    N2 -> N6 [ label = "{1,0}"];
    N3 -> N0 [ label = "{1,0}"];
    N4 -> N1 [ label = "{1,0}"];
    N5 -> N2 [ label = "{1,0}"];
    N6 -> N3 [ label = "{1,0}"];    
} 
```

这是上面图表的输出图像： ![在此处输入图像描述](../Images/2fb5677dc9c8e9b2fe11d379429af104.png)

如何在 graphviz 中排列节点以使其看起来像[1](https://i.stack.imgur.com/LBSco.png)？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T22:28:27.890

如果目标是拥有一个尊重节点顺序的图表，那并不是那么简单。您可以[使用外部脚本计算节点的位置并使用neato 进行渲染](https://stackoverflow.com/questions/4242949/graphviz-circular-layout-while-preserving-node-order)。

或者您可以首先使用仅确定节点正确顺序的边缘来布局节点：

```
digraph g1 {
    node [shape = doublecircle]; N4 N6;
    node [shape = circle];
    edge[label="{1,0}"];
    N0 -> N1 -> N2 -> N3 -> N4 -> N5 -> N6 -> N0;
} 
```

和：

```
circo graph.gv > tempgraph.gv 
```

然后将剩余的边缘添加到`tempgraph.gv`- 只需在关闭之前复制粘贴以下内容`}`：

```
N0 -> N4 [ label = "{1,0}"];
N1 -> N5 [ label = "{1,0}"];
N2 -> N6 [ label = "{1,0}"];
N3 -> N0 [ label = "{1,0}"];
N4 -> N1 [ label = "{1,0}"];
N5 -> N2 [ label = "{1,0}"];
N6 -> N3 [ label = "{1,0}"]; 
```

`neato`并使用和`-n`选项渲染它：

```
neato -n tempgraph.gv -Tpng -O 
```

您可能需要微调标签的位置：

![圆形布局](../Images/57356f3a7308e328d8c9aa951d6bdbb0.png)

# java - Java Apache CLI OptionBuilder 不能作为 Builder 模式工作

> ID：12466955
> 
> 赞同：17
> 
> 时间：2012-09-17T20:52:08.610
> 
> 标签：java, apache, command-line-interface

我想做类似的事情

```
public static final Option job1 =
    OptionBuilder.hasArg(false)
        .isRequired(false)
        .withDescription("description of job1")
        .create(JOB1); 
```

如前所述[如何使用 apache commons cli 指定多个选项？](https://stackoverflow.com/questions/9304431/how-to-specify-multiple-options-using-apache-commons-cli)

我正在使用 maven 依赖作为

```
<dependency>
    <groupId>commons-cli</groupId>
    <artifactId>commons-cli</artifactId>
    <version>1.1</version>
</dependency> 
```

如此处所述 - [http://mvnrepository.com/artifact/commons-cli/commons-cli/1.1](http://mvnrepository.com/artifact/commons-cli/commons-cli/1.1)

但我做不到，编译器抱怨

`static member org.apache.commons.cli.OptionsBuilder.create() accessed via instance reference`

，我什至尝试过`<version>1.2</version>`，但没有运气，我错过了什么吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-17T21:10:00.097

问题是其中的每个方法`OptionBuilder`都是静态的，对静态字段进行操作并返回单个静态实例。因此，您不需要实例`OptionBuilder`来执行这些方法。就像你所做的那样，这与将电话链接在一起的自然愿望并不完美。

除了让编译器冷静下来（也许禁用 IDE 中的警告？）或按如下方式调整代码（未经测试）之外，没有其他解决方案：

```
public static final Option job1;

static {
    OptionBuilder.hasArg(false);
    OptionBuilder.isRequired(false)
    OptionBuilder.withDescription("description of job1")
    job1 = OptionBuilder.create(JOB1);
} 
```

`OptionBuilder`如果使用公共无参数构造函数和仅实例方法重写该类会更好，因此其行为与其他所有构建器一样。commons-cli 问题跟踪器中存在一个突出显示此问题的错误：[https ://issues.apache.org/jira/browse/CLI-224](https://issues.apache.org/jira/browse/CLI-224)

*更新：我的补丁已经提交到trunk，所以下一个版本的commons-cli（v1.3）将提供一个新的“合适的”构建器。[请参阅此处](http://commons.apache.org/proper/commons-cli/apidocs/org/apache/commons/cli/Option.Builder.html)**的Javadocs*。

# android - 如何使用 Eclipse（在 Mac 上）优雅地终止 Android 模拟器上的应用程序

> ID：12466962
> 
> 赞同：0
> 
> 时间：2012-09-17T20:53:05.597
> 
> 标签：android, emulation, terminate

我正在尝试在 Android 模拟器上优雅地结束我的应用程序，而不会导致崩溃或终止应用程序。

在阅读了许多关于如何在 Android 上终止或崩溃应用程序的帖子后，这是我尝试过的：

*   将模拟器切换到另一个应用程序
*   单击模拟器上的挂断电话按钮和拨打电话按钮
*   添加完成（）；System.exit(0); 到应用程序中的我的 onPause 事件
*   在 Eclipse 的 Debug 透视图中单击我的程序的根，然后单击菜单图标行上的红色方块以终止，执行相同操作并断开连接。

每次我在上述任何一项之后启动应用程序时，跟踪代码都会将上述选择的方法视为崩溃。

所以我试图弄清楚如何优雅地结束我的应用程序并重新启动它而不会导致“崩溃”。

有任何想法吗？

非常感谢

# list - 来自 Haskell 中的 [String] 的模式匹配

> ID：12466964
> 
> 赞同：4
> 
> 时间：2012-09-17T20:53:12.447
> 
> 标签：list, haskell

我正在学习关于函数式编程的入门课程，我们使用 Haskell。练习的一部分是为输入字符串编写解析器。

但是我无法解决以下错误，或了解实际发生的情况。

```
Parser.hs:29:71:
Couldn't match expected type `String' with actual type `Char'
In the first argument of `readPoint', namely `start'
In the expression: readPoint start
In the expression:
  (readLines track, readPoint start, readLine finish) 
```

错误源于此行：

```
readTrack str = parseTrack (lines str) where
    parseTrack (start : finish : track) = (readLines track, readPoint start, readLine finish) 
```

我期望发生的是输入字符串被分割成一个行列表，这些行被传递给 parseTrack。然后 parseTrack 将使用模式匹配来命名列表中的前两个字符串（行）和其余的。

然而，我认为正在发生的是，finish 是列表中的顶部元素，并且 start 被分配了该字符串中的顶部字符。

我真的很想知道如何解决这个问题以及实际发生了什么。

非常感谢！

解析器.hs

```
module Parser where

import Types

readFloat :: String -> Float
readFloat str = case reads str of
    [] -> error "not a floating point number"
    (p,_):_ -> p

readInt :: String -> Int
readInt str = case reads str of
    [] -> error "not an integer"
    (p,_):_ -> p

readPoint :: String -> Point
readPoint str = parsePoint (words str) where
    parsePoint (x : y : _) = (readInt x, readInt y)

readLine :: String -> Line
readLine str = parseLine (words str) where
    parseLine (x1 : y1 : x2 : y2 : _) = ((readInt x1, readInt y1), (readInt x2, readInt y2))

readLines :: String -> [Line]
readLines str = parseLines (lines str) where
    parseLines (line : rest) = readLine line : parseLines rest

readTrack :: String -> Track
readTrack str = parseTrack (lines str) where
    parseTrack (start : finish : track) = (readLines track, readPoint start, readLine finish) 
```

类型.hs

```
module Types where

type Vector2D   = (Int, Int)
type Point      =  Vector2D
type Line       = (Point, Point)
type Velocity   =  Vector2D

type CarState   = (Position, Velocity)
type Position   =  Vector2D
type Trace      = [Position]

type Track      = ([Line], Point, Line) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T21:38:38.217

您的变量`track`实际上是单行列表，而不是其中包含`'\n'`s 的字符串。由于您已经将其拆分为`lines`，因此您可以将其`map readLine`覆盖，给出：

```
readTrack str = parseTrack (lines str) where
    parseTrack (start:finish:tracks) 
                     = (map readLine tracks, readPoint start, readLine finish) 
```

在这里`tracks :: [String]`，这就是为什么您可以`map` `readLine`全部使用它们的原因-您无需`readLines`先将其分成几行。（你可以说它是一个列表，因为它是 a 右侧的最后一件事`:`。）

你说

> 然而，我认为正在发生的是，finish 是列表中的顶部元素，并且 start 被分配了该字符串中的顶部字符。

那么发生的事情是：因为您要求`readLines track`作为第一个输出，Haskell 从那里开始，并且由于您声明

```
readLines :: String -> [Line] 
```

这意味着它`track`必须是一个字符串——这是 readLines 唯一可以处理的事情。

首先，你需要记住`:`左边有一个元素，右边有一个列表，所以在

```
3:4:stuff 
```

`stuff`必须是`[Integer]`因为它位于某些 Integer 元素的右侧。相似地，

```
c:"a string" 
```

表示 c 必须是 Char，因为 String = [Char]。

在您的代码中，我们计算出这`track`是一个字符串，这意味着当您编写

```
(start : finish : track) 
```

start 和 finish 都必须是可以放在字符串前面的元素，因此 start 和 finish 都必须是 Char。

Haskell 然后查看你的代码`readPoint start`，但是因为它的`start`类型是 Char，但是

```
readPoint :: String -> Point 
```

它抱怨 Char 和 String 不匹配。

我认为您犯了错误是因为您忘记了 readLines 采用单个字符串，但感觉（从名称上）它应该愉快地采用字符串列表。您的 parseLines 看起来像是在做类似的事情，但是它需要一个字符串列表，因此可以应付，而 readLines 需要一个带有换行符的字符串，因此无法应付列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T21:33:43.163

**升级版**。哦，对不起，我没明白这`track`意味着多轨，必须是 type `[String]`。所以 AndrewC 的回答更合适。

因为在haskell中，模式`(x:xs)`意味着如果`x`有类型，`a`那么`xs`必须是`[a]`你的模式类型，`parseTrack`意味着类型smth like `(a : a : [a])`。
编译器想要评估类型`a`，首先它在右边看到的是`readLines track`. Func`readLines`具有类型`String -> [Line]`，因此编译`track`器`String`具有`[a]`类型`String`。在 haskell中`String`也是`[Char]`如此。 但是你需要作为. 所以你只需要取前三个字符串并扔掉. 在类型中，它意味着 smth like 。为此，您可以将匹配模式重写为：`a``Char`
`a``String``[String]``(String : String : String : [String])``parseTrack`

```
parseTrack (start : finish : track : _) 
```

# string - 如何循环移位一些字符/位？

> ID：12466965
> 
> 赞同：-4
> 
> 时间：2012-09-17T20:53:13.253
> 
> 标签：string, perl, shift

我需要使用 Perl 循环移位一些字符/位

例如，使用以下输入（反转字符串）：

```
1010
1110
hello 
```

我需要获得：

```
0101
0111
olleh 
```

如何使用 Perl 实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:56:23.717

好像你想反转一个字符串而不是循环移位！

```
$string=reverse($string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:41:14.637

但是，如果你真的想循环移位值，很容易编写一个函数来使用任意列表进行训练：

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature 'say';

# circular shift lists
sub circular {
    my ($i, @values) = @_;
    return @values[ map +($_ + $i) % @values => 0 .. $#values ];
}

say circular  4, 1 .. 9;                # 567891234
say circular -2, 1 .. 9;                # 891234567
say circular  3, split '' => 'hello';   # lohel 
```

几句解释的`return`行`circular`：

```
return @values[ ... ]; 
```

我们在`@values`这里返回一个数组切片，这意味着我们使用索引列表对其进行评估并返回值列表。

```
map ... => 0 .. $#values 
```

我们在这里返回一个值列表，我们根据@values 的所有索引计算，0 是第一个，`$#values`是最后一个。

```
+($_ + $i) % @values 
```

这就是我们对这些索引所做的事情。该`+`符号仅用于告诉 perl 括号不是`map`. 我们将 $i 添加到索引中，并防止它变成`> $#values`我们将它模除以 的长度`@values`。请注意，`length @values`在这里调用并不重要，因为`%`在标量上下文中评估其第二个操作数，而在标量上下文中评估其长度的数组。

我把它留给你作为一个简单的练习来将你的东西转换为`hello`或`1110`列表并返回到标量。

# c# - DataTemplate 中的列表框 isSelected 数据绑定

> ID：12466967
> 
> 赞同：3
> 
> 时间：2012-09-17T20:53:19.183
> 
> 标签：c#, xaml, data-binding, wpf-controls, datatemplate

我尝试简单地将`IsSelected`属性与`IsSelected`我班级中的字段进行数据绑定。但是在我更改代码中的值后，它不会更改属性，单击也不会`ListBoxItem`更改字段值。

XAML：

```
<FlipView ItemsSource="{Binding Source={StaticResource itemsViewSource}}" ... >
    <FlipView.ItemTemplate>
        <DataTemplate>
            <UserControl Loaded="StartLayoutUpdates" 
                Unloaded="StopLayoutUpdates">
                <!-- other controls -->
                <ListBox Grid.Row="1" Grid.ColumnSpan="3"
                    SelectionMode="Multiple" VerticalAlignment="Center" 
                    ItemsSource="{Binding Answers}">
                    <ListBox.Resources>
                        <local:LogicToText x:Key="logToText" />
                    </ListBox.Resources>

                     <!-- bind IsSelected only in one way from 
                         code to content --> 
                     <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <ListBoxItem 
                              IsSelected="{Binding IsSelected, Mode=TwoWay, Converter={StaticResource logToText}}" 
                              Content="{Binding IsSelected, Mode=TwoWay, Converter={StaticResource logToText}}">

                            </ListBoxItem>

                        </DataTemplate>
                    </ItemsControl.ItemTemplate>

                    <!-- not working at all
                    <ListBox.Resources>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="IsSelected" 
                                Value="{Binding IsSelected, Mode=TwoWay}"/>
                            <Setter Property="Content" 
                                Value="{Binding IsSelected, Mode=TwoWay}"/>
                        </Style>
                    </ListBox.Resources>-->

                </ListBox>
            </UserControl>
        </DataTemplate>
    </FlipView.ItemTemplate>
</FlipView> 
```

代码：

答案

```
private ObservableCollection<PrawoJazdyDataAnswer> _answers = 
    new ObservableCollection<PrawoJazdyDataAnswer>();
public ObservableCollection<PrawoJazdyDataAnswer> Answers 
{ 
    get 
    { 
       return this._answers; 
    }  
} 
```

单项(答案)

```
public class PrawoJazdyDataAnswer : NPCHelper// PrawoJazdy.Common.BindableBase
{
    public PrawoJazdyDataAnswer(String ans, bool ansb)
    {
        this._ans = ans;
        this._isSelected = ansb;
    }

    public override string ToString() 
    { 
        return _isSelected.ToString();  //Only For debug purposes 
                                        //normally return _ans 
    }
    private string _ans;
    public string Ans
    {
        get { return this._ans; }
        //set { this.SetProperty(ref this._ans, value); }
    }

    private bool _isSelected;
    public bool IsSelected
    {
        get { return this._isSelected; }
        set
        {
            _isSelected = value;
            FirePropertyChanged("IsSelected");
            //this.SetProperty(ref this._isSelected, value); 
        }
    }
} 
```

FirePropertyChanged

```
public class NPCHelper : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    public void FirePropertyChanged(string prop)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(prop));
    }
} 
```

转换器（有时似乎需要，而其他则不需要......，我尝试了来自不同教程/示例的 ~10 种方法）

```
public class LogicToText : IValueConverter
{
    /// <summary>
    /// 
    /// </summary>
    public object Convert(object value, Type targetType, 
                          object parameter, string language)
    {
        //if (value == null || (bool)value == false)
          //  return "False";

        return value.ToString();
    }

    /// <summary>
    /// 
    /// </summary>
    public object ConvertBack(object value, Type targetType, 
                              object parameter, string language)
    {
        return value.ToString().Contains("True") ? true : false;
    } 
```

在此先感谢，并为我的英语感到抱歉（仍在学习）。

@edit 感谢您的快速回复。

出于测试目的，我创建了一个按钮和文本块：

```
<Button Click="spr" >Sprawdź</Button>
<TextBlock Text="{Binding Answers[0].IsSelected, Mode=TwoWay}" > </TextBlock> 
```

它在其他控件部分（在列表框上方，但在`FlipView`）单击方法

```
private void spr(object sender, RoutedEventArgs e)
    {
        var ans = ((PrawoJazdyDataQuestion)this.flipView.SelectedItem).Answers;
        foreach (var item in ans)
            item.IsSelected = item.IsSelected ? false : true;
    } 
```

正如我所写，当我从代码端更改数据时，它正在更改元素的内容，而不是`ListBoxItem`. 如果我只是选择它，`ListBox`它本身不会改变数据。`TextBlock``ListBox`

@edit2 修正错别字...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T13:05:19.337

要更改 的`IsSelected`属性`ListBoxItem`，您需要更改`ListBox.ItemContainerStyle`。看这里：

```
<ListBox Grid.Row="1" Grid.ColumnSpan="3"
                SelectionMode="Multiple" VerticalAlignment="Center" 
                ItemsSource="{Binding Answers}">
    <ListBox.ItemContainerStyle>
        <Style TargetType="ListBoxItem">
            <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
        </Style>
    </ListBox.ItemContainerStyle>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding IsSelected}" />
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

由于绑定模式是`TwoWay`，选择和取消选择`ListBoxItem`'s 会动态更改项目的内容以显示`True`or `False`。

还要注意我是如何将 a 更改`ListBox.ItemTemplate`为 a`TextBlock`而不是 a 的`ListBoxItem`。`ItemTemplate`定义 的内容，`ListBoxItem`因此通常使用某种类型的内容控件。下面是不同布局的 UI 结构（可以使用 WPF Tree Visualizer 查看）。

`ListBoxItem`作为`ItemTemplate`：

![在此处输入图像描述](../Images/f322d89450f3dc586b6674c252c25010.png)

`TextBlock`作为`ItemTemplate`：

![在此处输入图像描述](../Images/6e94f7f84346be4824eba20d60ff2fe9.png)

**编辑**

另请注意，我删除了`IValueConverter`. 由于您的源和目标属性都是`bool`，因此在这种情况下不需要转换器。尝试删除转换器引用以查看是否可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:19:52.160

不要绑定到 ListBoxItem 上的 IsSelected。ListBox 获得了 SelectedItem 或 SelectedItems 属性，您应该在其中传递要选择的项目，即通过绑定。在模型中设置 IsSelected 属性不是一个好主意。最好在 ViewModel 中设置 SelectedItem 通知属性。

# version-control - 为什么 mercurial 子存 储库被视为不得已的功能

> ID：12466972
> 
> 赞同：7
> 
> 时间：2012-09-17T20:53:44.390
> 
> 标签：version-control, mercurial

一般来说，我对源代码控制相对较新，特别是反复无常。在我的工作场所，我们使用 mercurial。与团队中的正常情况一样，不同的人从事不同但相关的项目。这个想法是为“子项目”创建一个主存储库（用于项目 X）和子存储库。

实施这不是问题。但是我很好奇为什么在 mercurial 的文档中他们考虑使用 subrepos 功能，[“最后手段”](http://mercurial.selenic.com/wiki/Subrepository "子回购文档")。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T21:47:23.763

它创建了一种依赖关系，它恰好处于一个微妙的平衡点，即过于紧密依赖而无法保留在完全独立的项目中，而过于松散依赖则无法保留在同一个项目中。人们通常认为自己处于最佳位置，而实际上并非如此，尤其是当他们习惯于集中式版本控制的文件夹结构时。他们不记得为了避免维护多个集中式版本控制服务器带来的不便，他们将所有内容都塞进了一个 repo，而不是因为项目本身之间存在某种内在的依赖关系。

# jquery-mobile - 使用 jquery 移动对话框填充最小高度或全屏

> ID：12466974
> 
> 赞同：1
> 
> 时间：2012-09-17T20:53:48.993
> 
> 标签：jquery-mobile

我试图弄清楚如何在 jquery-mobile 对话框上强制执行最小高度（用于全屏效果），本质上我试图用对话框本身完全覆盖背景。我正在使用页眉但没有页脚，如果这会有所不同。

# iphone - MFMessageComposeViewController 上的取消按钮不显示

> ID：12466975
> 
> 赞同：0
> 
> 时间：2012-09-17T20:53:52.653
> 
> 标签：iphone, objective-c, ios5

在我的 iPhone 应用程序中，我刚刚实现了应用内 SMS 功能。短信功能运行良好。但是在打开 MFMessageComposeViewController 后，如果用户想取消发送短信，他们没有选择。剩下的唯一选择是发送一条短信，然后只返回上一个视图。导航栏上应该有一个取消按钮，就像在电子邮件编辑器中一样。下面是我编写的具有应用内短信功能的代码行：

```
-(void) smsComposer{
     MFMessageComposeViewController *_smsCompose = [[MFMessageComposeViewController alloc] init];
     if ([MFMessageComposeViewController canSendText]) {
         _smsCompose.body = @"SMS BODY";
         _smsCompose.messageComposeDelegate = self;
         [self presentModalViewController:_smsCompose animated:YES];
    }
} 
```

有什么我想念的吗？

提前致谢， 电脑

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T06:07:26.617

尝试这个....

在 .h 文件中

```
#import <MessageUI/MFMessageComposeViewController.h> 
```

和

```
@interface TestViewController : UIViewController <MFMessageComposeViewControllerDelegate> 
```

然后是 Button Click 方法

```
-(void)buttonPressed:(UIButton *)button
{
[self sendSMS:@"Body of SMS..." recipientList:[NSArray arrayWithObjects:@"+1-111-222-3333", @"111-333-4444", nil]];
} 
```

MFMessageComposeViewController 创建 SMS 内容和另一种处理用户与 SMS 对话框交互的方法。

```
-(void)sendSMS:(NSString *)bodyOfMessage recipientList:(NSArray *)recipients
    {
      MFMessageComposeViewController *controller = [[[MFMessageComposeViewController alloc] init] autorelease];
    if([MFMessageComposeViewController canSendText])
    {
      controller.body = bodyOfMessage;    
      controller.recipients = recipients;
      controller.messageComposeDelegate = self;
      [self presentModalViewController:controller animated:YES];
    }    
 } 
```

和

```
 -(void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result
    {
      [self dismissModalViewControllerAnimated:YES];

      if (result == MessageComposeResultCancelled)
        NSLog(@"Message cancelled")
      else if (result == MessageComposeResultSent)
        NSLog(@"Message sent")  
      else 
        NSLog(@"Message failed")  
    } 
```

请记住：**您不能从模拟器中发送 SMS 消息。在设备上测试。**

# python - 在python中保存类向量（一维）列表

> ID：12466978
> 
> 赞同：1
> 
> 时间：2012-09-17T20:54:14.110
> 
> 标签：python, fortran

我在原始帖子中提供了更多详细信息。

我知道以下会生成一个类似数组的列表。

** 以下，OldDisplace 与 PyDisplace 大小相同

```
#
R_D = {}
keys = PyDisplace.keys()
keys.sort()
for val in keys:
    DX = PyDisplace[val][0] - OldDisplace[val][0]
    DY = PyDisplace[val][1] - OldDisplace[val][1]
    DZ = PyDisplace[val][2] - OldDisplace[val][2]
    R_D[val] = [DX, DY, DZ] 
```

显然，我是 Python 新手。

我的理解是上面会生成一个表或数组，R_D，它的大小是 3 by *(size of keys()) ...。

有人可以帮我获得类似矢量的列表 R_D（一维列表）吗？

这样我就可以通过以下方式检索 R_D。

```
for val in keys:
   DX = R_D(3*(val-1)+1)
   DY = R_D(3*(val-1)+2) 
   DZ = R_D(3*(val-1)+3) 
```

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:40:36.407

我不确定我是否完全理解你想要做什么:)

看起来您一次生成 3 个值，并希望在每次迭代时将它们附加到列表中。我对吗？

[**您可以使用list.extend**](http://docs.python.org/tutorial/datastructures.html)方法非常轻松地做到这一点。假设 PyDisplace 看起来像下面的代码。我猜 PyDisplace 是一个包含 3 个元素 pr 键列表的字典，所以我使用了一些虚假数据来展示这个想法。如果我离开了，请更新您的问题:)

```
PyDisplace = {
    1: [10, 20, 30],
    2: [40, 50, 60],
    3: [70, 80, 90],
}
OldDisplace = {
    1: [1, 2, 3],
    2: [4, 5, 6],
    3: [7, 8, 9],
}

R_D = []  # or 'list()' if you will
keys = PyDisplace.keys()
keys.sort()
for val in keys:
    DX = PyDisplace[val][0] - OldDisplace[val][0]
    DY = PyDisplace[val][2] - OldDisplace[val][3]
    DZ = PyDisplace[val][2] - OldDisplace[val][2]

    # at each iteration, R_D will be extended with 
    # three new elements: DX, DY, DZ
    R_D.extend([DX, DY, DZ])

print R_D

**Output**

In [71]: print R_D
-------> print(R_D)
[9, 18, 27, 36, 45, 54, 63, 72, 81] 
```

**那么这与你正在做的事情有什么不同呢？**

对于一个人来说，R_D 是一个 list() 而不是一个 dict()。python 中的列表通常是一维的，因此在这里看起来更适合您的问题。此外，我在每次迭代时都用另一个列表扩展列表。

遍历字典的另一种方法是使用**dict.iteritems**方法。这样您就可以像这样遍历键值对：

```
for k,v in PyDisplace.iteritems(): 
    print "key: %s, value: %s" % (k, v)

**Output:**

key: 1, value: [10, 20, 30]
key: 2, value: [40, 50, 60]
key: 3, value: [70, 80, 90] 
```

**编辑：**

> 谢谢。在这一点上，第一个似乎很适合我。我又是 Python 的新手。最终我会学到很多东西，从这个意义上说，第二种方法并不容易获得。这意味着我需要很多关于 Python 的知识。我会stdu你提到的关键词，比如“dict.iteritems”等……再次感谢。– user1678622 2 小时前

那么**dict.iteritems()的作用与****dict.keys()**的作用有些相同，您已经知道如何迭代。让我们考虑一个更简单的示例，**dict.items()** dict.items() 返回字典中所有键值对的 2 元组的完整列表，与**dict.keys()**返回有限键列表的方式相同。你可以像这样迭代它：

```
for key, value in dictionary.items():
    print "key: %s\nvalue: %s" % (key, value) 
```

不同之处在于，**dict.iteritems()**返回一个[可迭代](http://docs.python.org/glossary.html#term-iterable)的对象，您可以......迭代。对于 for 循环，它是相同的，但在引擎盖下，列表一次返回一项，而不是一步构建，这对于大字典来说可能很慢。我希望清除一些模糊不清:)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:34:38.953

替代方法：问题中的原始代码将 R_D 定义为字典。如果您将第二部分修复为：

```
for val in keys:
  DX = R_D[val][0]
  DY = R_D[val][1]
  DZ = R_D[val][2] 
```

如果你真的想对数组索引进行算术运算，那么你需要将 R_D 定义为一个列表，但是 python 字典是一个值得学习的强大工具。

更好..

```
for val in keys:
  DX,DY,DZ = R_D[val] 
```

# c++ - 使用未命名的命名空间会减少链接时间吗？

> ID：12466984
> 
> 赞同：15
> 
> 时间：2012-09-17T20:54:50.543
> 
> 标签：c++

假设我有一个包含许多目标文件的大型系统，因此链接时间是个问题。还假设我知道我系统中的许多类和函数没有在它们的翻译单元之外使用。

1.  假设如果我减少带有外部链接的符号数量，我的链接时间会减少是否合理？
2.  如果是这样，将仅在单个 TU 中使用的实体（例如，类和函数）放入未命名的命名空间对我有什么好处？从技术上讲，具有外部链接的实体将在未命名的命名空间中保留其外部链接，但是，正如 C++11 标准所述，

> 尽管未命名命名空间中的实体可能具有外部链接，但它们实际上是由其翻译单元唯一的名称限定的，因此永远无法从任何其他翻译单元看到。

链接器算法是否基于以下知识执行优化：在未命名的命名空间中具有外部链接的实体在其命名空间之外不可见？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T03:22:33.340

是的，我认为确实减少了链接时间。我认为在 Google chromium stie 上是这样的：“未命名的命名空间将这些符号限制在编译单元中，提高了函数调用成本并减小了入口点表的大小。” [这里](http://dev.chromium.org/developers/coding-style#TOC-Unnamed-Namespaces)是链接

我知道这是关于 chromium 项目的，但它应该适用于其他 c++ 项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T14:56:37.353

我看不出链接器如何进行这样的优化，因为当链接器获得相关符号时，它们看起来就像普通的装饰外部链接符号。除非链接器有关于编译器如何在匿名命名空间中修饰名称的特定信息，否则我看不到它可以优化其工作的任何方式。

您是否确认您的链接器实际上受 CPU 限制而不是 I/O 限制？如果它不是 CPU 绑定的，它可能无助于重新组织你的代码。

# php - CMS上传图片文件安全问题

> ID：12466985
> 
> 赞同：0
> 
> 时间：2012-09-17T20:55:00.823
> 
> 标签：php, mysql, file, upload

如果有人可以提供帮助，我有一个快速的问题。我正在为客户构建一个 CMS，他们可以在其中登录并更改所有存储在数据库中的内容（包括通过上传文件形式的图片）。

我的问题..我一直在研究，到处都说我需要将图像文件存储在根文件夹之外。如果只有少数人会在管理面板中上传文件，在我的情况下，这是否有必要，他们必须首先登录到该站点？我已经通过确保文件类型、大小、扩展名等在客户端采取措施......然后在将文件添加到我的数据库之前更改文件的名称......这是否足够安全，或者我是在自找麻烦马路？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:02:20.870

将上传的内容存储在浏览器无法直接访问的地方通常是个好主意。您不希望有人上传 .php 文件（或您忘记检查的其他格式），然后通过提取直接 url 来执行它。相反，您将拥有一个传递文件的包装脚本。

所以是的，这是一个好主意，但不是“必要的”（根据该词的字典定义）。如果您认为管理区域在其他方面是安全的，您当然可以选择*不这样做。*

也就是说，在您描述的场景中，只要它唯一可以上传图像的管理员用户，我认为这两种方式都不是什么大不了的事。

顺便说一句，如果您还没有，请通过文件头或内容验证图像，而不是文件扩展名。

# mongodb - MongoDB - 包含（LIKE）对连接字段的查询

> ID：12466988
> 
> 赞同：4
> 
> 时间：2012-09-17T20:55:33.517
> 
> 标签：mongodb, mongodb-query

我是 MongoDB 的新手。

我正在使用 spring data 和 mongodb 编写一个应用程序，并且我有一个包含两个字段的类：`firstname`和`lastname`.

我需要对包含一个全名 ( `firstname`+ `lastname`) 字符串的文档进行一次查询。

例如：`firstname = "Hansen David"`，`lastname = "Gonzalez Sastoque"`我有一个查询要查找`David Gonzalez`。在这个例子中，我希望有一个匹配。

连接两个字符串可以解决它，但我不知道如何执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:30:46.997

在文档中创建一个新的数组字段（调用它`names`），并在该数组中将每个名称按空格分隔。在您的示例中，数组将具有以下内容：

1.  汉森
2.  大卫
3.  冈萨雷斯
4.  萨斯托克

（使它们全部小写以防止不区分大小写的问题）

在您进行查询之前，请将您的输入转换为小写并用空格分隔。

*现在*，您可以使用[$all 运算符](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24all)来实现您的目标：

```
db.persons.find( { names: { $all: [ "david", "gonzalez" ] } } ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T15:15:11.277

您可以`$where`在查询中使用修饰符：

```
db.users.findOne({$where: %JavaScript to match the document%}) 
```

在您的情况下，它可能如下所示：

```
db.users.findOne({$where: "this.firstname + ' ' + this.lastname == 'Gonzalez Sastoque'"}) 
```

或这个：

```
db.users.findOne({$where: "this.firstname.match(/Gonzalez/) && this.lastname.match(/Sastoque/)"}) 
```

我的最后一个例子正是你想要的。

**更新：**尝试以下代码：

```
db.users.findOne({$where: "(this.firstname + ' ' + this.lastname).match('David Gonzalez'.replace(' ', '( .*)? '))"}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T20:58:57.943

您应该将您的全名拆分为名字和姓氏，然后使用适当的 MongoDB 查询选择器对这两个字段进行查询。

# c# - 为什么要使用堆栈 而不是列表 ?

> ID：12466989
> 
> 赞同：14
> 
> 时间：2012-09-17T20:55:36.650
> 
> 标签：c#, .net, collections

`List<T>`from`System.Collections.Generic`做所有事情`Stack<T>`，甚至更多——它们基于相同的底层数据结构。在什么情况下选择是正确的`Stack<T>`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-17T21:00:01.967

如果您需要后进先出的项目集合，您将使用堆栈。列表将允许您在任何索引处访问它的项目。还有很多其他差​​异，但我会说这是最基本的。

评论后更新：

我会说 using`Stack<T>`声明了您希望如何使用此代码。为未来做计划总是好的，但如果你`Stack<T>`现在需要，并且没有令人信服的理由使用，`List<T>`那么我会选择`Stack<T>`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T21:08:50.533

> 为什么我会人为地限制自己在新代码中使用 Stack

这就是您的答案 -`Stack`当您需要强制执行合同期望时，您应该使用正在使用的数据结构只能作为堆栈操作。当然，你真正想做的时间是有限的，但在适当的时候它是一个重要的工具。

例如，假设除非强制执行堆栈顺序，否则正在处理的数据没有任何意义。在这些情况下，如果您将数据作为列表提供，您将面临麻烦。通过使用 a `Stack`（或 a`Queue`或任何其他对顺序敏感的结构），您可以在代码中准确指定应该如何使用数据。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-17T21:20:49.013

这都是关于概念的。List 是 List，Stack 是 Stack，它们做了两件非常不同的事情。它们唯一的共同点是它们的通用性和可变长度。

List 是一个可变长度的项目集合，其中任何元素都可以通过索引访问和覆盖，并且可以在任何此类索引处添加项目和从中删除项目。

Stack 是支持 LIFO 访问模型的可变长度项目集合；只能访问堆栈的顶部元素，并且只能从集合的“端点”添加和删除元素。“顶部”中的第 3 项元素只能通过“弹出”它上面的两个元素以暴露它来访问。

为工作使用正确的工具；当您需要“随机”访问集合中的任何元素时，请使用 List。当您想要对数组中的元素实施更有限的“仅限顶部”访问时，请使用堆栈。当您想强制执行 FIFO“管道”时使用队列；物品从一端进入，另一端离开。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-17T21:02:12.343

`Stack`好吧，如果您在逻辑上尝试表示堆栈，您会想要使用。如果您使用堆栈，它将在整个代码中传达程序员的意图，并且它将防止无意中误用数据结构（无意中添加/删除/读取一端以外的其他地方）。

当然，`Stack`可能只是一个接口，而不是一个具体的实现。然后你可以有类似`List`实现该接口的东西。那里的问题主要是方便问题。如果有人需要一个堆栈，他们需要选择一些特定的实现并记住（“哦，是的，List 是首选的堆栈实现”），而不是仅仅更新具体类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T21:05:05.143

`System.Collections.Generic.Stack<T>`是一个 LIFO（后进先出）数据结构，*又名*[堆栈](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)。

尽管它的名字，`SCG.List<T>`它不是被称为[[链接] 列表](http://en.wikipedia.org/wiki/List_%28abstract_data_type%29)的抽象数据类型：它实际上是一个[可变长度数组](http://en.wikipedia.org/wiki/Array_data_type)。

两种截然不同的生物。

# php - 我是否必须在 AWS PHP API 中选择特定区域？

> ID：12466991
> 
> 赞同：1
> 
> 时间：2012-09-17T20:55:49.693
> 
> 标签：php, amazon-ec2, amazon-web-services

[要使用run_instance](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#m=AmazonEC2/run_instances)运行实例，我必须指定一个放置，否则我会收到一个错误，即 ami 不可用。
现在，每个区域都有多个区域（例如`US East`,`US West`等）和多个区域（例如`us-east-1a`,`us-east-1b`等等）。

我是否必须将特定区域传递给 AWS，或者是否可以只传递一个区域（比如`us-east-1`可能）并让亚马逊选择该区域？
我想把这个决定留给亚马逊，因为我看不出区域之间有任何区别，而且在所有区域上平均分配实例会有点复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:29:26.593

是的，您必须指定特定区域。

您可以通过为自动缩放组指定启动配置来减轻一些痛苦，而不是严格使用单个实例。启动配置可以告诉系统在许多区域的每一个中运行 X 个实例。这使得在每个区域中获得所需的正确数量的实例变得容易，而不必为实际实例化每个实例而烦恼。此外，如果您只需要固定数量的实例，您实际上不需要担心“缩放”规则。

这里有一些更多的背景信息

[http://aws.amazon.com/autoscaling/](http://aws.amazon.com/autoscaling/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T23:44:44.770

好吧，是的，您必须指定特定区域。在您的情况下，我看到您需要解决两个问题： -您需要为可用性低的客户提供新实例，并将它们分布在不同的位置以提高性能-最好的解决方案是-您可以将负载均衡器放在所有实例（单个或多个可用区），然后通过负载均衡器连接云端。Cloud front 基本上以内容分发的方式工作，并使您的应用程序在不同位置具有高可用性，从而提高了性能。

# objective-c - iOS 6 - UIWebView loadHTMLString 无法正常工作

> ID：12466993
> 
> 赞同：12
> 
> 时间：2012-09-17T20:55:53.453
> 
> 标签：objective-c, uiwebview, ios6

如果有人遇到以下问题，请告诉我您是否能够找到解决方法。我花了几天时间试图想出一个解决方案，但到目前为止还没有运气。我将 XCode 4.5 与 iOS 6 SDK Golden Master 一起使用。

基本上，我的应用程序读取 HTML 文件并将其内容交给 Web 视图进行渲染。

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"filename" ofType:@"html"];
NSString *html = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:NULL];

NSURL *baseURL = [NSURL URLWithString:@"http://mysite.com"];

[webView loadHTMLString:html baseURL:baseURL]; 
```

HTML 包含一些 <link> 标签，例如：<link href="/webshare/accounts/maxk/styles/mobile_app_iphone_article.css?1312306173" media="screen" rel="stylesheet" type="text/css" />

问题是，UIWebView 似乎无法下载 CSS 文件。UIWebViewDelegate 确实会立即收到 webViewDidStartLoad，但它需要大约 5 分钟才能收到 webViewDidFinishLoad 消息。CSS 没有被拾取。

如果我从 HTML 中删除链接，一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T00:58:46.290

iOS 6 发布后，我的 Web 视图中出现了类似的问题。尝试将以下 UIWebView 属性设置为 true (YES) { only available in iOS 6+ }：

```
 suppressesIncrementalRendering
 A Boolean value indicating whether the web view suppresses content rendering until it is
 fully loaded into memory.

 @property(nonatomic) BOOL suppressesIncrementalRendering 
```

基本上在我的情况下，异步内容加载会产生一些以前不存在的奇怪竞争条件。我花了一段时间才找到那个。不过我也同意布赖恩的观点——使用一些代理软件并观察你的流量，以验证你需要的所有东西都在进来，什么时候进来。这可能*非常*有用。

让我知道它是否有帮助？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:11:45.290

如果没有直接访问该项目，这真的很难说。您是否尝试在本地浏览器中加载页面以确认确实正在加载 css？如果它正在加载，那么我建议在模拟器中运行该应用程序，同时运行诸如 Charles 代理之类的东西。Charles 将记录您的所有出站请求并显示它们的结果。这样，您就可以确定问题是真正在 sdk 内部还是外部。

如果您有 Apple 开发者帐户，请查看 WWDC 2012 会议视频。你可以在这里找到它们：[https](https://developer.apple.com/videos/wwdc/2012/) ://developer.apple.com/videos/wwdc/2012/ 。有一个名为“调试 iOS 上的 UIWebViews 和网站”的视频。我还没有看过它，但它可能包含一些可以帮助您解决问题的信息。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T22:05:07.693

因此，如果所有 css 和其他东西都在远程服务器上，为什么要从本地文件加载 html？可能这与安全相关（您试图从本地文件加载 html，而从远程加载其他内容），或者只是 UIWebView 中处理 baseURL 的问题

# asp.net - “%s”的 TargetControlID 无效。该值不能为 null 或为空

> ID：12466995
> 
> 赞同：1
> 
> 时间：2012-09-17T20:56:06.503
> 
> 标签：asp.net, ajaxcontroltoolkit

我正在尝试使用 a在 ASP.net`ModalPopupExtender`中弹出 a ：`Panel`

```
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server" 
      EnableScriptGlobalization="true" EnableScriptLocalization="true">

<asp:LinkButton ID="bbShowExport" runat="server" Text="Export"></asp:LinkButton>

<asp:Panel ID="popupExport" runat="server">
   ...
</asp:Panel>

<asp:ModalPopupExtender ID="popupExtender" runat="server" 
      PopupControlID="popupExport" TargetControlID="bbShowExport">
</asp:ModalPopupExtender> 
```

这意味着我想在用户单击时`popupExtender`弹出。`popupExport``bbShowExport`

访问页面时出现错误：

> “popupExtender”的 TargetControlID 无效。该值不能为 null 或空。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:00:59.330

在您的代码之前添加这一行

```
<Ajax:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T01:46:11.313

尝试这个 ：

```
<asp:ScriptManager ID="ScriptMgrPopUp" runat="server"></asp:ScriptManager>
<asp:ModalPopupExtender ID="mpePopUpInformation" runat="server" PopupControlID="PanelInfo" TargetControlID="bbShowExport" CancelControlID="btnCloseInfo"></asp:ModalPopupExtender>
    <asp:Panel ID="PanelInfo" runat="server" CssClass="modalpopup">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" id="btnCloseInfo">×</button>
            <h3>Information</h3>
        </div>
        <div class="modal-body">
            <fieldset>
                Register Successfully Please Cek Email for Verification
            </fieldset>    
        </div>
    </asp:Panel>

<asp:LinkButton ID="bbShowExport" runat="server" Text="Export"></asp:LinkButton> 
```

# assembly - 如何在 codewarrior 中命名我的标签

> ID：12466996
> 
> 赞同：1
> 
> 时间：2012-09-17T20:56:06.833
> 
> 标签：assembly, codewarrior, 68hc12

我有三个文件，一个 .asm 文件和一些 .inc 文件。它们都包含在`include`. 在这些文件中有标签，我希望有时能够在每个文件中使用相同的标签。例如，如果每个包含的文件都有一个循环，那么我想标记循环`loop`并完成它。这对汇编程序来说是个问题，因为标签不是唯一的。

在 codewarrior 的帮助文件中，我读到我可以添加`\@`到宏中标签的开头，以避免多次调用该宏导致标签冲突。我试过了，但汇编程序抱怨（`invalid character detected at the beginning of the line`）。有没有办法给我的标签命名？

谢谢，

z。

ps 另外，我在问题中包含了 codewarrior 这个词，这是我的 IDE。我这样做是因为我不确定标签的处理是特定于汇编程序还是特定于 IDE 本身。我需要说“codewarrior”还是说“HC12”或只是“组装”会更好？谢谢。

pps 这是作业：但我的作业是编写代码，而不是命名空间标签。