# StackOverflow 问答 12204000-12204999

# c# - 不影响其容器大小的控件

> ID：12204000
> 
> 赞同：1
> 
> 时间：2012-08-30T19:22:30.700
> 
> 标签：c#, wpf, xaml, layout

这有点难以解释，但我会尽力而为。我目前有一个两列多行的网格。我只希望第二列中的控件有助于网格的高度。

因此，在下面的示例中，我希望列表框是两个文本块的高度，并在需要显示更多数据时显示滚动条。我对如何做到这一点持空白。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="2*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <ListBox Grid.RowSpan="2" Grid.Column="0" VerticalAlignment="Stretch" />

    <TextBlock Grid.Row="0" Grid.Column="1" />
    <TextBlock Grid.Row="1" Grid.Column="1" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:35:30.620

如果您不介意讨厌的黑客攻击：

```
<FrameworkElement Grid.RowSpan="2" Grid.Column="0" Name="Hax" />
<ListBox Grid.RowSpan="2" Grid.Column="0"
         Height="{Binding ActualHeight, ElementName=Hax}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:26:46.063

现在看起来网格正在拉伸以填充 IT 的父级。尝试将外部 Grid 的高度设置为 Auto 并将 VerticalAlignment 设置为顶部：

```
<Grid Height="Auto" VerticalAlignment="Top">
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="*" />
    <ColumnDefinition Width="2*" />
  </Grid.ColumnDefinitions>
  <Grid.RowDefinitions>
    <RowDefinition Height="Auto" />
    <RowDefinition Height="Auto" />
  </Grid.RowDefinitions>

  <ListBox Grid.RowSpan="2" Grid.Column="0" VerticalAlignment="Stretch" />

  <TextBlock Grid.Row="0" Grid.Column="1" />
  <TextBlock Grid.Row="1" Grid.Column="1" />
</Grid> 
```

# vb.net - 第 # 行没有位置

> ID：12204002
> 
> 赞同：0
> 
> 时间：2012-08-30T19:22:47.397
> 
> 标签：vb.net

我有一个包含重复项的 .CSV。当我填写我的数据表时，我想过滤掉重复项并添加某些单元格。

我的专栏：

```
 With table.Columns
            .Add(currentRow(0).ToString) '0
            .Add(currentRow(3).ToString) '3
            .Add(currentRow(5).ToString) '5
            .Add(currentRow(6).ToString) '6
            .Add(currentRow(8).ToString) '8
        End With 
```

我的标题：

> `table.Rows.Add(table.Columns(0).ToString, table.Columns(1).ToString, table.Columns(2).ToString, table.Columns(3).ToString, table.Columns(4).ToString)`

当我继续检查 currentRows 到我桌子上已有的内容时，我收到一条错误消息“位置 # 没有行”

只有当我有这段代码定义我的标题但格式不正确时，它才会起作用。

```
 With table.Rows
                .Add(currentRow(0).ToString) '0
                .Add(currentRow(3).ToString) '3
                .Add(currentRow(5).ToString) '5
                .Add(currentRow(6).ToString) '6
                .Add(currentRow(8).ToString) '8
            End With 
```

这是我的 If 语句，我将 currentRow 的元素与第一列和第一行进行比较。

```
 If currentRow(0).ToString Is table.Rows(someVal).Item(0) Then 
```

在测试中，我可以看到格式正确的标题，但我的 If 语句无法识别它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:38:30.903

`Is`关键字确定两个对象引用是否引用同一个对象，但不比较对象的值。`=`改为使用

```
If currentRow(0).ToString = table.Rows(someVal).Item(0) Then 
```

* * *

DataTable 是过滤重复项的正确对象吗？考虑创建一个以适当方式表示您的数据的类。如果您`Equals`在类中重写该方法，那么使用 LINQ 可以轻松地获取不同的对象。

```
Dim list = New List(Of MyClass)

' Add objects
list.Add(New MyClass(...))
list.Add(New MyClass(...))
...

'Get unique objects
Dim unique = list.Distinct()
For Each obj As MyClass In unique
    ' process obj
Next 
```

# protocols - CAN 通讯问题

> ID：12204003
> 
> 赞同：0
> 
> 时间：2012-08-30T19:22:48.297
> 
> 标签：protocols, serial-communication, can-bus, canopen

我开始走这条路，因为我正在审查 uCLinux 中的[CAN驱动程序。](http://en.wikipedia.org/wiki/CAN_bus)总的来说，我是 CAN 新手，所以我对此进行了一些研究，但偶然发现了一个我还没有找到答案的问题。

如果 CAN 是串行接口，而[CANopen](http://en.wikipedia.org/wiki/CANopen)没有“总线主控器”，那么 CAN 协议如何处理总线上不可避免的数据冲突？如果没有人控制您何时可以发送，那么只要有足够的设备和时间，就必须发送碰撞。

这是一个非常基本的问题，所以我可能找到了答案，只是不明白......如果有人能提供一个很好的答案/例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T06:49:36.230

它是通过CSMA/CD 完成的。CAN 的信号是线与逻辑。因此，较小的消息 id 可以具有更高的优先级，基于与线与逻辑的竞争。

# apache - mod mono server 4 不断因肥皂请求而崩溃

> ID：12204005
> 
> 赞同：0
> 
> 时间：2012-08-30T19:22:55.583
> 
> 标签：apache, soap, mono, mod-mono

我在我的 Linux Suse 12.1 VPS 服务器上运行了 ac# Soap 服务。在我对肥皂服务进行了小改动并将其复制到我的 VPS 之前，这一直运行良好且没有问题。我认为这一定是我的更改有问题，所以我回滚了我的更改，但仍然无法正常工作。甚至一些没有被触及的方法也失败了。

但是，我已经在我的开发机器上进行了测试，该机器在 Windows 上运行良好，并且还将soap界面复制到了一个与我的 VPS 完全相同的方式设置的 linux 开发机器上，即 OpenSuse 12.1 并且具有所有和我的 VPS 网络服务器一样的东西。两者都工作得很好，从来没有遇到任何问题。

然而，在 VPS 主机上，mod-mono-server 经常崩溃，即使它启动，也无法读取 asmx 文件，只是显示服务器错误，我需要运行`rcapache2 restart`以加载测试页面。

在 apache 错误日志文件中，我有以下内容：

> [Thu Aug 30 20:10:19 2012] [error] (70014)End of file found: read_data failed [Thu Aug 30 20:10:19 2012] [error] 命令流损坏，最后一个命令为 1 [Thu Aug 30 2012 年 20:08:47] [错误] 命令流损坏，最后一个命令是 7

我不知道可能是什么问题，我尝试重新启动 VPS 但没有区别。

我正在使用 ASP.net 4 版本的 mod-mono-server。

感谢您的任何帮助，您可以提供。

**更新 1** 我刚刚注意到 apache 错误中的其他内容。日志文件包含以下内容

```
[Thu Aug 30 20:46:31 2012] [notice] caught SIGTERM, shutting down
[Thu Aug 30 20:46:32 2012] [warn] Init: Session Cache is not configured [hint: SSLSessionCache]
[Thu Aug 30 20:46:32 2012] [error] Not running mod-mono-server.exe because no MonoApplications, MonoApplicationsConfigFile or MonoApplicationConfigDir specified. 
```

**更新 2** 刚刚发现，不完全确定是否有帮助。只要不需要访问 mysql 数据库，soap 服务就可以在服务器上正常工作。如果它执行查询，它会`an internal server error 500`在测试页面中显示一个。但如果从 PHP 调用它会导致它崩溃单声道。数据库是mysql数据库，是本地数据库。有 34% 的 RAM 可用，所以我不认为这是内存问题。我还清空了数据库表以确定是否修复了它，如果它与数据量有关，但这也没有修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T19:19:15.290

感谢@knocte 的建议，我设法找出了问题所在。

当 Soap 服务访问数据库时，它会读取 config.xml 以确定用于访问数据库的用户名和密码，我猜这个配置文件在传输过程中被损坏了。虽然我可以在 vi 中读取它，但可能是文件有问题，阻止了 soap 服务读取配置。

我所做的只是删除文件并手动将内容复制并粘贴到文件中。

由于某种原因，当它无法访问数据库时，它会崩溃单声道，即使肥皂服务中的所有 MySQL 内容都有 MySQL 异常处理。@knocte 测试soap 服务的建议被证明是有用的，因为当它用于从soap 服务访问数据库时，xsp4 将停止但显示错误，指出它没有访问数据库的权限，即使它具有正确的用户名和配置文件中的密码。

一旦我重新创建了配置文件，soap 服务就会再次正常工作。

谢谢你的帮助。

# ios - 如何使用具有字典数组的键解析字典

> ID：12204006
> 
> 赞同：2
> 
> 时间：2012-08-30T19:23:09.377
> 
> 标签：ios, xcode, ios5, nsarray, nsjsonserialization

UPDATE-8/31/12-所以现在我需要通过基于“isReservable”= 1 的字典数组，然后显示“开始”。我只是想获取每个字典数组的内容，我可以从那里开始（现在）。以下是我尝试过的。感谢大家的帮助，我每天都在学习更多。

来自php页面的json

```
{
"slots": {
    "2012-08-31 00:00:00 America/Los_Angeles": [
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-30 17:00:00 America/Los_Angeles",
            "end": "2012-08-30 17:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-30 17:30:00 America/Los_Angeles",
            "end": "2012-08-30 18:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": false,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-30 18:00:00 America/Los_Angeles",
            "end": "2012-08-31 00:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": false,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 00:00:00 America/Los_Angeles",
            "end": "2012-08-31 08:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 08:00:00 America/Los_Angeles",
            "end": "2012-08-31 08:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 08:30:00 America/Los_Angeles",
            "end": "2012-08-31 09:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 09:00:00 America/Los_Angeles",
            "end": "2012-08-31 09:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 09:30:00 America/Los_Angeles",
            "end": "2012-08-31 10:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": false,
            "isReserved": true,
            "label": "Thomas Kroom",
            "begin": "2012-08-31 10:00:00 America/Los_Angeles",
            "end": "2012-08-31 12:30:00 America/Los_Angeles",
            "span": 5
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 12:30:00 America/Los_Angeles",
            "end": "2012-08-31 13:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 13:00:00 America/Los_Angeles",
            "end": "2012-08-31 13:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 13:30:00 America/Los_Angeles",
            "end": "2012-08-31 14:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 14:00:00 America/Los_Angeles",
            "end": "2012-08-31 14:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 14:30:00 America/Los_Angeles",
            "end": "2012-08-31 15:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 15:00:00 America/Los_Angeles",
            "end": "2012-08-31 15:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 15:30:00 America/Los_Angeles",
            "end": "2012-08-31 16:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 16:00:00 America/Los_Angeles",
            "end": "2012-08-31 16:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 16:30:00 America/Los_Angeles",
            "end": "2012-08-31 17:00:00 America/Los_Angeles",
            "span": 1
        }
    ],
    "2012-09-01 00:00:00 America/Los_Angeles": [
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 17:00:00 America/Los_Angeles",
            "end": "2012-08-31 17:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 17:30:00 America/Los_Angeles",
            "end": "2012-08-31 18:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": false,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-08-31 18:00:00 America/Los_Angeles",
            "end": "2012-09-01 00:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": false,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 00:00:00 America/Los_Angeles",
            "end": "2012-09-01 08:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 08:00:00 America/Los_Angeles",
            "end": "2012-09-01 08:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 08:30:00 America/Los_Angeles",
            "end": "2012-09-01 09:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 09:00:00 America/Los_Angeles",
            "end": "2012-09-01 09:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 09:30:00 America/Los_Angeles",
            "end": "2012-09-01 10:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 10:00:00 America/Los_Angeles",
            "end": "2012-09-01 10:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 10:30:00 America/Los_Angeles",
            "end": "2012-09-01 11:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 11:00:00 America/Los_Angeles",
            "end": "2012-09-01 11:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 11:30:00 America/Los_Angeles",
            "end": "2012-09-01 12:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 12:00:00 America/Los_Angeles",
            "end": "2012-09-01 12:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 12:30:00 America/Los_Angeles",
            "end": "2012-09-01 13:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 13:00:00 America/Los_Angeles",
            "end": "2012-09-01 13:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 13:30:00 America/Los_Angeles",
            "end": "2012-09-01 14:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 14:00:00 America/Los_Angeles",
            "end": "2012-09-01 14:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 14:30:00 America/Los_Angeles",
            "end": "2012-09-01 15:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 15:00:00 America/Los_Angeles",
            "end": "2012-09-01 15:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 15:30:00 America/Los_Angeles",
            "end": "2012-09-01 16:00:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 16:00:00 America/Los_Angeles",
            "end": "2012-09-01 16:30:00 America/Los_Angeles",
            "span": 1
        },
        {
            "isPending": false,
            "isReservable": true,
            "isReserved": false,
            "label": "&nbsp;",
            "begin": "2012-09-01 16:30:00 America/Los_Angeles",
            "end": "2012-09-01 17:00:00 America/Los_Angeles",
            "span": 1
        }
    ]
} 
```

这是我到目前为止所拥有的

```
- (void)fetchedData:(NSData *)responseData {
    //parse out the json data

    NSError* error;
    //NSLog(@"string is %@", responseData);

    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];

    NSDictionary* myslots =[json objectForKey:@"slots"];
NSLog(@"allslots: %@", myslots);
//for (NSString *slotKey in myslots.allKeys) {
    //NSDictionary *slot = [myslots valueForKey:slotKey];
    //NSLog(@"These are all the keys: %@", slotKey);
    NSArray *keys = [myslots allKeys]; 
```

更新 - 这就是我让它工作的方式：

```
for (NSString *slotKey in myslots.allKeys) {
    NSDictionary *slot = [myslots valueForKey:slotKey];
        NSArray *tests = [myslots objectForKey:slotKey];
    for (NSDictionary *myDict in tests){
        NSLog(@"%@", [myDict objectForKey:@"begin"]); 
    }
    } 
```

现在我只需要把它改成 if "isReservable" = true 然后显示 "begin"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:31:28.720

it looks like myslots is an NSDictionary, not an NSArray ... to iterate through all it's keys, change

```
for (NSDictionary *slots in myslots) {
    // code
} 
```

for

```
for (NSString *slotKey in myslots.allKeys) {
    NSDictionary *slot = [myslots valueForKey:slotKey];
    // code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:28:32.573

myslots 是一本字典。似乎第一个键“2012-08-30 00:00:00 America/Los_Angeles”是与您要查找的数组相关联的键。我建议重组您的数据，使其具有一个实际的静态键作为访问字典中值的键。

# ruby-on-rails - Rails 使用日期范围测试 named_scope

> ID：12204010
> 
> 赞同：0
> 
> 时间：2012-08-30T19:23:17.483
> 
> 标签：ruby-on-rails, ruby, unit-testing, named-scope, testcase

**场景 我在名为“ last_week**
”的模型上有一个 named_scope。它所做的只是获取上周的记录。

我想对此进行测试，我的方法是测试返回的结果是否在一定范围内。我不知道这是否是在类方法上测试此功能的正确方法。

我不能使用 RSpec、Shouda 或其他 3rd 方客户端插件。如果我愿意，我只能使用 Mocha。

```
# Model

class Article < ActiveRecord::Base

  scope :last_week,   :conditions => { :created_at => 1.week.ago..DateTime.now.end_of_day }

end

#Test

class ArticleTest < ActiveSupport::TestCase

  test "named scope :last_week " do
    last_week_range = DateTime.now.end_of_day.to_i - 1.week.ago.to_i
    assert_in_delta last_week_range, Article.last_week.first.created_at - Article.last_week.last.created_at,  last_week_range
  end

end 
```

寻找有关此方法对与错的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:12:59.790

首先你的范围是错误的：因为代码是动态执行的，你的日期范围条件将取决于你启动服务器的时间......

用。。。来代替：

```
scope :last_week,  lambda { :conditions => { :created_at => 1.week.ago..DateTime.now.end_of_day } } 
```

其次，为了测试，我会创建一些记录并检查范围是否正确：

*   创建工厂

*   创建两条记录

*   设置`created_at`1 周 + 1 天前的一条记录

*   检查您的范围仅检索一个（正确的）

# data-binding - 不确定如何在 observableArray 中管理我的数据以进行更新

> ID：12204011
> 
> 赞同：0
> 
> 时间：2012-08-30T19:23:19.487
> 
> 标签：data-binding, knockout.js, observable

我刚开始玩 KO，因为我想把它带入一个即将到来的项目中。在业余时间，我一直在工作中使用 Web 服务，这基本上是从对数据做一些事情开始，然后再做一些其他事情。所以首先我只是返回了一个药物名称列表。好的，让我们添加返回结果的计数。好的，让我们在模态中填充各个药物的详细信息。好的，让我们编辑一个药物名称。没有真正的韵律或理由，只是想出一些东西并玩弄KO。

我现在不确定如何真正管理我的数据，因此它会随处更新。我制作了一个屏幕截图，引导您了解我所拥有的并说明问题。

[http://i.imgur.com/5qNWQ.jpg](http://i.imgur.com/5qNWQ.jpg)

1.  单击“y”按钮获取我的搜索结果。然后我选择“Yasmin 28”药物
2.  我在模态窗口中获得该药物的详细视图
3.  我编辑药物名称并单击“保存”按钮
4.  药物名称在模态窗口中更新
5.  我“作弊”并更新搜索结果中的药物名称，方法是爬取 DOM 的那部分并将旧的药物名称替换为新的药物名称。

问题是，它没有利用 KO 的可观察性......如果我关闭模态并再次单击“Yasmin 28”药物链接，模态将显示“Yasmin 28”而不是我只是将其更改为（“很棒的东西”）。

我不太确定如何跟踪我的 observableArray 中的属性是否发生变化。我做了两个 observableArrays，一个保存搜索结果的药物名称列表，另一个保存药物的详细信息。我还为当前的药物名称做了一个 observable。

有人可以解释我需要做什么来跟踪我的药物名称吗？我已经包含了下面的代码以及我在最底部使用的 JSON。

```
<div id="shell">
    <button class="load" value="j">j</button>
    <button class="load" value="k">k</button>
    <button class="load" value="x">x</button>
    <button class="load" value="y">y</button>
    <button class="load" value="z">z</button>
    <p id="loading"><img src="#{facesContext.externalContext.requestContextPath}/img/spinner.gif"/></p>

    <h3 data-bind="visible: drugList().length > 0"><span data-bind="text: count" class="count"></span> records returned</h3>

    <ul data-bind="foreach: drugList">
        <li>
            <span data-bind="text: drugName" class="results_drug_name"></span>
            <a data-bind="click: $root.showDetails" href="#" class="show">show details</a>
        </li>
    </ul>
</div>

<!-- start modal: drug details -->
<div id="dialog" data-bind="jqDialog: {autoOpen: false, title: drugName}">
    <p id="dialog_save_message" class="message_success">Changes saved successfully!!!!!!!!</p>

    <table data-bind="foreach: drugListDetails" class="table" width="100%" cellpadding="0" cellspacing="0" border="1">
        <tr>
            <th scope="row">pdlId</th>
            <td data-bind="text: pdlId"></td>
        </tr>
        <tr>
            <th scope="row">drugName</th>
            <td>
                <span data-bind="text: $root.drugName" class="readonly"></span>
                <input id="edit_drugname" class="edit_textfield" type="text" value="" size="35" />
                <button data-bind="click: $root.editSave" class="edit_buttons save">Save</button>
                <button data-bind="click: $root.editCancel" class="edit_buttons cancel">Cancel</button>
                <ul class="detail_actions">
                    <li><a data-bind="click: $root.edit" href="#" class="edit">edit</a></li>
                </ul>
            </td>
        </tr>

        <tr>
            <th scope="row">dosageFormDesc</th>
            <td data-bind="text: dosageFormDesc"></td>
        </tr>
        <tr>
            <th scope="row">strength</th>
            <td data-bind="text: strength"></td>
        </tr>
        <tr>
            <th scope="row">activeIngredient</th>
            <td data-bind="text: activeIngredient"></td>
        </tr>
        <tr>
            <th scope="row">tier</th>
            <td data-bind="text: tier"></td>
        </tr>
        <tr>
            <th scope="row">ancillaryCharge</th>
            <td data-bind="text: ancillaryCharge"></td>
        </tr>
        <tr>
            <th scope="row">preauthCode</th>
            <td data-bind="text: preauthCode"></td>
        </tr>
        <tr>
            <th scope="row">quantityLimit</th>
            <td data-bind="text: quantityLimit"></td>
        </tr>
        <tr>
            <th scope="row">prefAlternative</th>
            <td data-bind="text: prefAlternative"></td>
        </tr>
        <tr>
            <th scope="row">specialtyDrug</th>
            <td data-bind="text: specialtyDrug"></td>
        </tr>
        <tr>
            <th scope="row">partbCob</th>
            <td data-bind="text: partbCob"></td>
        </tr>
        <tr>
            <th scope="row">drugClassGroupId</th>
            <td data-bind="text: drugClassGroupId"></td>
        </tr>
        <tr>
            <th scope="row">drugClassId</th>
            <td data-bind="text: drugClassId"></td>
        </tr>
        <tr>
            <th scope="row">drugClass</th>
            <td data-bind="text: drugClass"></td>
        </tr>
        <tr>
            <th scope="row">genericInd</th>
            <td data-bind="text: genericInd"></td>
        </tr>
        <tr>
            <th scope="row">tip</th>
            <td data-bind="text: tip"></td>
        </tr>
    </table>
</div>
<!-- end modal: drug details -->

<script>
$(function() {
    $('.load').click(function() {
        var $letter = $(this).attr('value');

        //show spinner
        $('#loading').show();

        //load in drug list data
        $.getJSON('/PreferredDrugList/service/preferredDrugs/' + $letter, function(data) {
            //hide spinner
            $('#loading').hide();

            //replace drugList observableArray data
            //preferredDrugs is an array of objects, each elem is an individual drug
            myViewModel.drugList(data.preferredDrugs);

            //replace count observable data
            myViewModel.count(data.count);
        });//end getJSON
    });//end click

    //setup modal dialog options
    $('#dialog').dialog({
        autoOpen: false,
        closeOnEscape: true,
        modal: true,
        width:850,
        height:500
    });

});//end ondomready

//custom binding to initialize a jQuery UI dialog
ko.bindingHandlers.jqDialog = {
    init: function(element) {
       ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
            $(element).dialog("destroy");
        });
    },
    update: function(element, valueAccessor) {
       var options = ko.toJS(valueAccessor());

        if (options) {
            $(element).dialog(options);
        }           
    }
};

var myViewModel = {
    count:                ko.observable(),        //# of records returned
    drugList:            ko.observableArray(),    //list of drug names - an array of objects
    drugListDetails:    ko.observableArray(),    //list of individual drug details
    drugName:            ko.observable(),        //current drug name

    //show drug details in modal
    //func gets passed the current observableArray elem (the individual drug info we clicked on, this is an object)
    showDetails: function(obj) {
        //replace current drug name observable data
        myViewModel.drugName(obj.drugName);

        //replace drugListDetails observableArray data, otherwise we'll append data to the modal
        myViewModel.drugListDetails([]);

        //push individual drug info to details observableArray
        myViewModel.drugListDetails.push(obj);

        //show dialog
        $('#dialog').dialog('open');

        return false;
    },

    //edit drug from modal
    edit: function(obj) {
        var $edit         = $('#dialog').find('td .edit'),
            $currentTD    = $edit.closest('td');

        $currentTD.addClass('editing');
        $currentTD.find('.readonly').hide();
        $currentTD.find('.edit_textfield').show().select();
        $currentTD.find('.edit_buttons').show();

        return false;
    },

    //save an edit
    editSave: function(obj) {
        alert('TODO save back to the server');

        var $saveBtn    = $('#dialog').find('td .save'),
            $currentTD    = $saveBtn.closest('td'),
            newDrugName = $('#edit_drugname').val(),
            $dialog_save_message = $('#dialog_save_message');

        //save new drug name to observable
        myViewModel.drugName(newDrugName);

        $currentTD.removeClass('editing');
        $currentTD.find('.readonly').show();
        $currentTD.find('.edit_textfield').hide();
        $currentTD.find('.edit_buttons').hide();

        $dialog_save_message.slideDown('slow', function() {
            //animation complete
            setTimeout(function() {
                $dialog_save_message.slideUp();
            }, 3000);
        });

        //cheat and update search results list with new drug name
        $('.results_drug_name').each(function(index, elem) {
            var $text = $(this).text();

            if ($text === obj.drugName) {
                $(this).text(newDrugName).addClass('edited');
            }
        });
    },

    //cancel an edit
    editCancel: function(obj) {
        var $cancelBtn     = $('#dialog').find('td .cancel'),
            $currentTD    = $cancelBtn.closest('td');

        $currentTD.removeClass('editing');
        $currentTD.find('.readonly').show();
        $currentTD.find('.edit_textfield').hide();
        $currentTD.find('.edit_buttons').hide();
    }
};

ko.applyBindings(myViewModel);

<!--what's returned from the web service-->
<pre>
{
    "preferredDrugs": [(8)
        {
            "pdlId": 8090,
            "drugName": "y-cof-dmx",
            "dosageFormDesc": "Liquid",
            "strength": "4MG/5ML; 15MG/5ML; 7.5MG/5ML",
            "activeIngredient": "BROMPHENIRAMINE MALEATE; DEXTROMETHORPHAN HYDROBROMIDE; PHENYLEPHRINE HYDROCHLORIDE",
            "tier": "OTC",
            "ancillaryCharge": "NA",
            "preauthCode": " ",
            "quantityLimit": " ",
            "prefAlternative": null,
            "specialtyDrug": " ",
            "partbCob": " ",
            "drugClassGroupId": 74,
            "drugClassId": 152,
            "drugClass": "Respiratory Tract Agents » Antitussives",
            "genericInd": "1",
            "tip": " "
        },-
        {
            "pdlId": 13417,
            "drugName": "YASMIN 28",
            "dosageFormDesc": "Tablet",
            "strength": "3MG; 0.03MG",
            "activeIngredient": "DROSPIRENONE; ETHINYL ESTRADIOL",
            "tier": "3",
            "ancillaryCharge": "AC",
            "preauthCode": " ",
            "quantityLimit": "28.0 tabs each 28 days",
            "prefAlternative": "ethinyl estradiol/drospirenone",
            "specialtyDrug": " ",
            "partbCob": " ",
            "drugClassGroupId": 3,
            "drugClassId": 200,
            "drugClass": "Hormones and Synthetic Substitutes » Contraceptives",
            "genericInd": "0",
            "tip": " "
        },-
        {
            "pdlId": 24765,
            "drugName": "YAZ",
            "dosageFormDesc": "Tablet",
            "strength": "3MG; 0.02MG",
            "activeIngredient": "DROSPIRENONE; ETHINYL ESTRADIOL",
            "tier": "3",
            "ancillaryCharge": "AC",
            "preauthCode": " ",
            "quantityLimit": "28.0 tabs each 28 days",
            "prefAlternative": "ethinyl estradiol/drospirenone",
            "specialtyDrug": " ",
            "partbCob": " ",
            "drugClassGroupId": 3,
            "drugClassId": 200,
            "drugClass": "Hormones and Synthetic Substitutes » Contraceptives",
            "genericInd": "0",
            "tip": " "
        },-
        {
            "pdlId": 2252,
            "drugName": "YERVOY",
            "dosageFormDesc": "Solution",
            "strength": "50MG/10ML",
            "activeIngredient": "IPILIMUMAB",
            "tier": "NC",
            "ancillaryCharge": "NA",
            "preauthCode": " ",
            "quantityLimit": " ",
            "prefAlternative": null,
            "specialtyDrug": " ",
            "partbCob": " ",
            "drugClassGroupId": 115,
            "drugClassId": 1,
            "drugClass": "Antineoplastic Agents",
            "genericInd": "0",
            "tip": " "
        },-
        {
            "pdlId": 20993,
            "drugName": "YERVOY",
            "dosageFormDesc": "Solution",
            "strength": "200MG/40ML",
            "activeIngredient": "IPILIMUMAB",
            "tier": "NC",
            "ancillaryCharge": "NA",
            "preauthCode": " ",
            "quantityLimit": " ",
            "prefAlternative": null,
            "specialtyDrug": " ",
            "partbCob": " ",
            "drugClassGroupId": 115,
            "drugClassId": 1,
            "drugClass": "Antineoplastic Agents",
            "genericInd": "0",
            "tip": " "
        },-
        {
            "pdlId": 564,
            "drugName": "YF-VAX",
            "dosageFormDesc": "Injection",
            "strength": "0",
            "activeIngredient": "YELLOW FEVER VACCINE",
            "tier": "NC",
            "ancillaryCharge": "NA",
            "preauthCode": " ",
            "quantityLimit": " ",
            "prefAlternative": null,
            "specialtyDrug": " ",
            "partbCob": " ",
            "drugClassGroupId": 79,
            "drugClassId": 284,
            "drugClass": "Serums, Toxoids and Vaccines » Vaccines",
            "genericInd": "0",
            "tip": " "
        },-
        {
            "pdlId": 8910,
            "drugName": "yodefan-nf chest congestion",
            "dosageFormDesc": "Liquid",
            "strength": "200MG/5ML",
            "activeIngredient": "GUAIFENESIN",
            "tier": "OTC",
            "ancillaryCharge": "NA",
            "preauthCode": " ",
            "quantityLimit": " ",
            "prefAlternative": null,
            "specialtyDrug": " ",
            "partbCob": " ",
            "drugClassGroupId": 84,
            "drugClassId": 155,
            "drugClass": "Respiratory Tract Agents » Expectorants",
            "genericInd": "1",
            "tip": " "
        },-
        {
            "pdlId": 13101,
            "drugName": "YODOXIN",
            "dosageFormDesc": "Tablet",
            "strength": "650MG",
            "activeIngredient": "IODOQUINOL",
            "tier": "3",
            "ancillaryCharge": "NA",
            "preauthCode": " ",
            "quantityLimit": " ",
            "prefAlternative": "iodoquinol",
            "specialtyDrug": " ",
            "partbCob": " ",
            "drugClassGroupId": 164,
            "drugClassId": 277,
            "drugClass": "Anti-infective Agents » Antiprotozoals",
            "genericInd": "0",
            "tip": " "
        }-
    ],-
    "count": 8
}   
</pre>

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:40:51.363

**首先**，删除`drugListDetails`数组，因为它会因为保留数据的副本而引起混淆。

**其次**，使用`ko.mapping.fromJS`and`ko.mapping.toJS`将您映射`data.preferredDrugs`到可观察数组和从可观察数组映射。这将允许`knockout`跟踪数组中每个元素的 GUI 变化。这些文档可以在[这里](http://knockoutjs.com/documentation/plugins-mapping.html)找到。

如果您不想使用该`mapping`插件，也可以手动进行映射。

**第三**`showDetails`，为数组中的每个条目添加一个新元素`data.preferredDrugs`，默认为`false`. 这将在下一步中用于确定是否应显示对话框。调用`showDetails`现有元素时需要切换元素。`$root.showDetails`

**第四**，修改对话框`div`以使用`drugList`数组并将其`visible`值绑定到`showDetails`每个药物元素的值。这将创建多个隐藏对话框，因此您可能希望更改`id`每个对话框的值。

# ruby - 与 Ruby 1.9 一起使用的分配跟踪器？

> ID：12204012
> 
> 赞同：4
> 
> 时间：2012-08-30T19:23:30.443
> 
> 标签：ruby, memory, profiling, ruby-1.9

有许多工具可以测量 Ruby 程序分配了多少内存（以及多少对象），以及分配发生在哪里。

*   内存配置文件
*   荒凉山庄
*   红宝石教授
*   （如果使用 JRuby） hprof （等等）

不幸的是，似乎所有这些工具都只适用于 Ruby 1.8，至少目前是这样。甚至 JRuby 现在也只兼容 Ruby 1.8。是否有适用于 Ruby 1.9 的良好分配跟踪器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:09:46.843

看起来`perftools.rb`(https://github.com/tmm1/perftools.rb) 可以收集有关对象分配的信息，并且它适用于 Ruby 1.9。不幸的是，当我尝试使用它来跟踪对象分配时，它会出现段错误！

如果问题得到解决，我将编辑此答案。

# javascript - javascript中的两个选择选项

> ID：12204015
> 
> 赞同：1
> 
> 时间：2012-08-30T19:23:34.910
> 
> 标签：javascript, jquery, html

我有两个选择选项，但我在 javascript 中发现它们之间的复杂性很小。这是我的 javascript 代码：

```
 function displayVals() {
     var singleValues = $("select option:selected").text(); //to stay slected
    $("#hiddenselect").val(singleValues);                   //hidden field of second select option
    $("samp").html("" + singleValues);             // this to insert text between samp tags
  $("select > option:first").prop("disabled", "disabled") // this to disable first option
  }

  $(document).ready(function(){
    $("select").change(function() {
        displayVals();
    });
    displayVals();

    $("select#menucompare").change(function() {
        $("#aform").submit();                   // second select options to submit

    });
      $("select#infmenu").change(function() {
        $("#infform").submit();                 // first select options to submit 

    });        
}); 
```

现在我期望的是： - 只有第一个选择选项（第一个选项被禁用），也需要第二个选择选项（第一个选项被禁用）

这是我的 html 代码我的第一个选择选项：

```
 <form action="" id="infform" method="post">
        <select id="infmenu" name ="infmenu" size="1" class="select" onchange="submitinfform()" >
       <option value="0" >Please Select your country</option>
        <option value="<?php echo $row9['id'] ;?>" <?php if ($_SESSION['infmenu'] == $row9['id']) { echo " selected='selected'"; } ?> ><?php echo $row9['name'] ;?></option><?php  } ?>
      </select>
     <input type="hidden" name="hiddenselect" value="<?php echo $infmenu;  ?>" />
   </form> 
```

这是第二个选择选项

```
 <form id="aform" method="post">
     <select id="menucompare" name ="menucompare" size="1" class="select" onchange="submitaform()">
         <option value="0">Select one</option>
         <option value="west" <?php if ($menucompare == "west") { echo " selected='selected'"; } ?> >West</option>
         <option value="est" <?php   if ($menucompare == "est") { echo " selected='selected'"; } ?> >Est</option>

    </select>
         <input type="hidden" name="hiddenselect" value="<?php echo $menucompare ;  ?>" />  

</form> 
```

我花了这么多天没有运气谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:48:29.570

无法很好地理解您的代码。这里有一些帮助你尝试：

要获取第一个选择元素的选定值（值属性），请使用：

```
$("#infmenu").val(); 
```

要获取第一个选择元素的选定值（值属性），请使用：

```
$("#menucompare").val(); 
```

要禁用第一个选项中的第一个选项，称为“infmenu”：

```
$("option", "#infmenu").first().attr("disabled", "disabled"); 
```

要在第二个选择中禁用第一个选项，称为“infmenu”：

```
$("option", "#menucompare").first().attr("disabled", "disabled"); 
```

要获取第一个选择元素的显示文本，请使用：

```
$("option:selected", "#infmenu").text(); 
```

要获取第二个选择元素的显示文本，请使用：

```
$("option:selected", "#menucompare").text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:37:40.257

您正在使用的 jQuery 选择器是`$("select option:selected")`. 这意味着“找到所有`<option>`被选中并且是元素子`<select>`元素的标签”。

你有两个`<select>`元素，所以你的选择器匹配它们。如果你想匹配一个特定的，你需要优化你的选择器。由于您已经在第二个上具有 ID 属性，请尝试使用`$("#menucompare option:selected")`.

**改变：**

```
var singleValues = $("select option:selected").text(); //to stay slected 
```

**至：**

```
var singleValues = $("#menucompare option:selected").text(); //to stay slected 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:37:56.673

您要选择第二个选择标签。所以你必须在第 2 行更改你的*jquery 选择器*：

```
var singleValues = $("select:nth-child(2) option:selected").text(); 
```

# php - 使用国家/地区名称或城市名称（如果有）获取国家/地区的时间（如果国家/地区有多个时区，则获取更准确的时间）

> ID：12204017
> 
> 赞同：1
> 
> 时间：2012-08-30T19:23:45.050
> 
> 标签：php, api, time

使用国家/地区名称或城市名称（如果有）获取国家/地区的时间（如果国家/地区有多个时区，则获取更准确的时间）

例如

```
echo get_local_time('England');  //8:23pm
echo get_local_time('New York'); //7:23am 
```

纯粹使用 PHP 是否有可能/那里有任何 API 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-21T09:53:13.443

这是使用 google api 和 php 从国家名称和城市名称获取时间的代码。

```
<?php
function get_timee($country,$city)
{
$country = str_replace(' ', '', $country);
$city = str_replace(' ', '', $city);
$geocode_stats = file_get_contents("http://maps.googleapis.com/maps/api/geocode/json?address=$city+$country,&sensor=false");
$output_deals = json_decode($geocode_stats);
$latLng = $output_deals->results[0]->geometry->location;
$lat = $latLng->lat;
$lng = $latLng->lng;    
$google_time = file_get_contents("https://maps.googleapis.com/maps/api/timezone/json?location=$lat,$lng&timestamp=1331161200&key=AIzaSyAtpji5Vk271Qu6_QFSBXwK7wpoCQLY-zQ");
$timez = json_decode($google_time);
$d = new DateTime("now", new DateTimeZone($timez->timeZoneId));
return  $d->format('H : i: s');
}

echo  get_timee("Peru","Lima");
?> 
```

使用此功能并节省您的时间。

# jquery - 保存 Backbone.js 模型数据。数据未正确发送

> ID：12204018
> 
> 赞同：5
> 
> 时间：2012-08-30T19:23:50.860
> 
> 标签：jquery, ajax, django, backbone.js

我是 Backbone.js 的新手，我正在尝试保存模型实例。我正在使用 django 作为我的服务器。

客户端代码：

```
var Song = Backbone.Model.extend({
    defaults: {
        name: 'New Song'
    },
    url: function() {
        return window.location.href;
    }

});

var song = new Song()
song.save() 
```

`csrfmiddlewaretoken`在发送数据之前正确设置。

我单步执行了 Backbone.sync 内部调用的 jQuery $.ajax 函数，发现模型对象包含正确的数据。

但是，`request.POST`服务器收到的是

```
POST:<QueryDict: {u'[object Object]': [u'']}> 
```

而不是实际数据。知道我哪里出错了吗？

**更新：**我通过设置`Backbone.emulateJSON`为 true 进行了快速修复。但根据 Backbone (0.9.2) 代码中的注释，它适用于旧版服务器。我正在使用 Django 1.4.1。这是否意味着 django 1.4.1 不兼容？

**更新 2**：当我设置`Backbone.emulateJSON`为 时`false`，我在 Firefox 中收到以下错误，但它在 chrome 中静默失败。

```
 "[Exception... "Component returned failure code: 0x80460001 
(NS_ERROR_CANNOT_CONVERT_DATA)"  nsresult: "0x80460001 (NS_ERROR_CANNOT_CONVERT_DATA)"

  location: "JS frame :: http://localhost:8000/static/jquery.js :: <TOP_LEVEL> :: line 8214"  data: no]" 
```

我正在使用 jQuery 作为 Backbone 首选的 ajax，似乎错误可能在 jQuery 中。

**更新 3**：我通过用我自己的覆盖 Backbone.sync 使用的 $.ajax 来解决它。它仍然是一个快速修复。

Backbone.js 版本：0.9.2

jQuery 版本：1.8.0。还尝试了 1.7.2。结果相同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T04:16:33.537

我遇到了类似的问题，通过一些侦探工作/运气我发现了。问题是，默认情况下，Backbone 将 POST 数据作为请求正文中的 JSON 编码字符串发送，而不是作为`request.POST`QueryDict 的一部分。因此，要在这种情况下获取数据，您必须使用 python json 库并`json.loads(request.body)`在 Django 视图中调用以正确读取数据。

顺便说一句，设置`Backbone.emulateJSON = true;`起作用的原因是因为 Backbone 通过“遗留”机制将 JSON 发送到 Django，这使得它出现在`request.POST`QueryDict 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-08T18:59:01.520

If you want the data to be available in the QueryDict request.POST, then you will have to override the Backbone.sync method.

First of all you will have to set Backbone.emulateJSON to true.

You can have a look at the Backbone.sync method over [here](https://github.com/jashkenas/backbone/blob/master/backbone.js#L1201). You will notice that the model attributes are stringified.

```
if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {
  params.contentType = 'application/json';
  params.data = JSON.stringify(options.attrs || model.toJSON(options));
} 
```

Edit this part of the function to:

```
if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {
  params.contentType = 'application/json';
  if(options.emulateJSON){
     params.data = options.attrs || model.toJSON(options);
  }else{
     params.data = JSON.stringify(options.attrs || model.toJSON(options));
  }
} 
```

On some other line you will notice that Backbone adds a 'model' key to the POST QueryDict.

```
params.data = params.data ? {model: params.data} : {}; 
```

Edit this line to:

```
params.data = params.data ? params.data : {}; 
```

Thats it! Now you will have the data as a part of request.POST QueryDict.

# c# - 如何让 linqpad 更新列

> ID：12204025
> 
> 赞同：6
> 
> 时间：2012-08-30T19:24:28.667
> 
> 标签：c#, sql, linqpad

我正在尝试在 linqpad 中使用 C# 语句执行相当于 SQL UPDATE 的操作，但数据没有改变，我什至不确定是否要进一步调试它以找出原因。User 表非常标准，只有一个字符串来存储 Sid。

```
var usersWithSid = from u in Users where u.Sid != null select u;
foreach(var u in usersWithSid) {
    u.Sid = "S-1-5-21-3812666658-2998621725-2245962016-6618";
}
SubmitChanges();
usersWithSid.Dump(); 
```

我发现的大多数示例似乎一次只更新一条记录。为什么这不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T20:47:02.740

您是否在表上定义了主键？如果您不这样做，更新将静默失败。

# apache-flex - 无法为我的 adobe air 应用程序创建发布文件

> ID：12204027
> 
> 赞同：0
> 
> 时间：2012-08-30T19:24:45.527
> 
> 标签：apache-flex, air

在尝试创建发布文件时，我看到创建 AIR 文件时出错：102：错误，[http ://ns.adobe.com/air/application/1.5](http://ns.adobe.com/air/application/1.5)

请指教如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:15:19.463

不完全确定，但我猜您的命名空间与所选的 SDK 不匹配。1.5 已经很老了。3.4 是几周前发布的，如果您至少运行 Flash Builder 4.5，那么您可以拥有的最低 SDK 是 3.0 或 3.1。找出您正在使用的 AIR SDK，并在您的 App Descriptor 文件 (AppName/src/AppName-app.xml) 中更改它。

这是您收到的全部错误吗？

# javascript - 如何防止页面使用 javascript 回发

> ID：12204029
> 
> 赞同：2
> 
> 时间：2012-08-30T19:24:52.607
> 
> 标签：javascript, asp.net

我检查了其他代码，看起来我只需要添加**return false**就可以了。但是，它不起作用，因为它仍然回发页面。

```
<asp:Button ID="_btnSearch" Text="Search" 
            onclientclick="CheckForEmptySearchBox()" />

<script type = "text/javascript">
    function CheckForEmptySearchBox() 
    {
        var boxContent = document.getElementById
          ("_ctl0_contentMain__lvTSEntry_ctrl0__txtClientName").value;
        if (boxContent == null || boxContent == "") {
            alert("Please enter search criteria");

            return false;
        }
     }  
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:26:19.603

onclientclick 的来源是接收`null`而不是`false`因为您没有返回函数调用的结果。

```
onclientclick="return CheckForEmptySearchBox()" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:39:35.453

您可以在 上添加全局检查`Form`，这可以在后面的代码上完成：

```
 if (Page.EnableEventValidation)
    {
        if (string.IsNullOrEmpty(Page.Form.Attributes["onsubmit"]))
        {
            Page.Form.Attributes["onsubmit"] = "return CheckForEmptySearchBox();";
        }
    } 
```

# php - PHP MySQL 使用 Latin1(iso-8859-1) 尽管 UTF-8 设置

> ID：12204033
> 
> 赞同：6
> 
> 时间：2012-08-30T19:25:23.940
> 
> 标签：php, mysql, utf-8, latin1

我又遇到了一个奇怪而棘手的问题。

我一直在将我的 MySQL 数据库（以及我服务器上的所有其他内容）转换为 UTF-8，以避免在获取文本并将其放入不同数据库时必须转换文本。

我想我已经部​​分成功了，因为`SHOW VARIABLES LIKE 'character_set%'`回报：

```
character_set_client utf8 
character_set_connection utf8 
character_set_database utf8 
character_set_filesystem binary 
character_set_results utf8 
character_set_server utf8 
character_set_system utf8 
```

但仍然`mysql_client_encoding($con);`返回`latin1`，并且在输出中每个特殊字符都被替换为 �。我的结论是客户端或 PHP 和 MySQL 数据库之间的连接正在使用 latin1，即使我已经在文档标题和 my.ini 中使用以下代码指定了 utf-8：

```
character-set-server = utf8
character-set-client = utf8
default-character-set = utf8 
```

**编辑：**我在 [client]、[mysqld] 和 [mysql] 下都添加了上面的设置

当我使用`mysql_query('SET NAMES utf8;');`或`mysql_set_charset("utf8");`文本正确显示但对我来说这不是一个解决方案，只是一个临时修复。

有谁知道如何强制 PHP（或任何它恢复为 latin1）使用 utf-8？

我应该提到我正在使用 Windows 2003 Server 和 Apache 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:35:56.250

> 我一直在将我的 MySQL 数据库（以及我服务器上的所有其他内容）转换为 UTF-8，以避免在获取文本并将其放入不同数据库时必须转换文本。

您仍然必须确保目标数据库（或系统）默认设置为使用 UTF-8 - 并且您用来连接的库使用正确的字符集。仅仅因为数据采用 UTF-8 格式并不能使其普遍兼容。

> 当我使用 mysql_query('SET NAMES utf8;'); 或 mysql_set_charset("utf8"); 文字显示正确，但对我来说这不是一个解决方案，只是一个临时修复。

这是正确的解决方案。由于您的连接编码决定了您的客户端（在本例中为 PHP）如何接收数据。

将其设置为默认值；您需要[适当地配置 MySQL](http://dev.mysql.com/doc/refman/5.5/en/charset-configuration.html)，然后重新启动服务器：

```
[client]
default-character-set=UTF8 
```

请注意，这会影响*所有*客户端，甚至是命令行`mysql`客户端。

# spring - 什么是 @Repository bean 的“持久性异常翻译”

> ID：12204035
> 
> 赞同：20
> 
> 时间：2012-08-30T19:25:26.233
> 
> 标签：spring, spring-annotations

我正在阅读带有注释部分的 Spring，我遇到了`@Repository`注释
，我读到`@Repository`bean 与 bean 不同，`@Component`因为它们有资格进行持久性异常翻译。

有人可以详细说明持久性异常翻译是什么意思吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T19:49:26.120

Persistence Exception Translation 是将低级持久性异常转换为高级 Spring 异常的过程。

来自 SpringSource 网站：

> 常见的数据访问异常。Spring 可以包装来自您选择的 O/R 映射工具的异常，将它们从专有（可能检查的）异常转换为公共运行时 DataAccessException 层次结构。这允许您仅在适当的层中处理大多数不可恢复的持久性异常，而无需烦人的样板捕获/抛出和异常声明。您仍然可以在任何需要的地方捕获和处理异常。请记住，JDBC 异常（包括特定于 DB 的方言）也会转换为相同的层次结构，这意味着您可以在一致的编程模型中使用 JDBC 执行一些操作。

这样做的主要好处之一是将异常转换为运行时异常，实际上您不需要将 throws 声明添加到方法签名中。

[http://static.springsource.org/spring/docs/2.5.x/reference/orm.html](http://static.springsource.org/spring/docs/2.5.x/reference/orm.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-25T01:16:05.127

无论您使用何种数据库类型或持久性方法/技术，它都提供一致的异常层次结构。

无论您使用的是 Oracle 与 MySQL 还是 JPA 与 JDBC，对于相同类型的错误，您都会得到相同的异常。

查看[SQLErrorCodeSQLExceptionTranslator](https://github.com/spring-projects/spring-framework/blob/master/spring-jdbc/src/main/java/org/springframework/jdbc/support/SQLErrorCodeSQLExceptionTranslator.java)和[sql-error-codes.xml](https://github.com/spring-projects/spring-framework/blob/master/spring-jdbc/src/main/resources/org/springframework/jdbc/support/sql-error-codes.xml)。

`sql-error-codes.xml`特别有趣，因为您可以看到所有各种特定于供应商的错误代码以及它们映射到的层次结构中的异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-27T13:27:10.227

Spring 异常翻译机制可以透明地应用于所有使用 @Repository 注释的 bean——通过在 Context 中定义一个异常翻译 bean 后处理器 bean

# java - Android NFC 标签读取。意图始终为空

> ID：12204036
> 
> 赞同：0
> 
> 时间：2012-08-30T19:25:37.873
> 
> 标签：java, android, android-intent, nfc

我正在尝试在打开应用程序时读取 NFC 标签（扫描标签时自动打开），但我似乎无法读取有效负载。事实上，我似乎根本无法拿起标签。我已经使用另一个应用程序来读取标签的 mime 类型和有效负载 - 一切似乎都很好。

抱歉，如果这是一个明显的问题 - 我已经阅读了文档并在发布之前检查了各种其他来源，但无济于事。

我看不到任何错误，并且代码编译得很好。代码如下。Logcat 显示：

`08-30 20:15:50.248: E/Activity...(3703): Hello world. Intent Type: null`：

```
package com.spotsofmagic.spotsofmagic;

import android.app.Activity;
import android.app.AlertDialog;
import android.bluetooth.BluetoothAdapter;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.nfc.NdefMessage;
import android.nfc.NdefRecord;
import android.nfc.NfcAdapter;
import android.os.Bundle;
import android.os.Parcelable;
import android.util.Log;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {
    private static final String TAG = "Activity...";
    private NfcAdapter mAdapter;
    private TextView mTextView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity);

        // grab our NFC Adapter
        mAdapter = NfcAdapter.getDefaultAdapter(this);

        // TextView that we'll use to output messages to screen
        mTextView = (TextView)findViewById(R.id.text_view);

        displayMessage("Loading payload...");
        // see if app was started from a tag and show game console
        Intent intent = getIntent();

        Log.e(TAG, "Hello world.  Intent Type: "+ intent.getType()); 
```

清单文件；

 ````
<uses-sdk android:minSdkVersion="14" android:targetSdkVersion="14" />

<uses-permission android:name="android.permission.NFC" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-feature android:name="android.hardware.nfc" android:required="true" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

     <activity
        android:name=".CardActivity"
        android:label="@string/app_name" >

        <!-- Handle a collectable card NDEF record -->
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
            <data android:mimeType="application/vnd.spotsofmagic.bluetoothon"/>
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
     </activity>

</application> 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:37:17.920

NFC 意图过滤器适用于 CardActivity，而不适用于 MainActivity。所以我希望问题出在 CardActivity 中。`

# google-apps-script - XML获取名称中带有：（冒号）的元素的值？

> ID：12204037
> 
> 赞同：2
> 
> 时间：2012-08-30T19:25:39.260
> 
> 标签：google-apps-script

请，

解析 RSS 提要时，存在带有冒号的名称空间，例如：“**内容：编码**”，我无法从中获取文本值。

找到了一些关于迭代 XML 项（[链接](http://productforums.google.com/d/msg/apps-script/62rgQxHrAwk/u6SeLYQiFccJ)）的解释，但我不能使用，必须使用已知名称，然后获取值。

有什么办法可以抢到价值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:57:49.640

在 xml 文档的开头查找类似以下命名空间详细信息的内容，或以编程方式对其进行解析：

```
<rss version="2.0"
xmlns:content="http://purl.org/rss/1.0/modules/content/"
xmlns:wfw="http://wellformedweb.org/CommentAPI/"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:atom="http://www.w3.org/2005/Atom"
xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
xmlns:georss="http://www.georss.org/georss" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" xmlns:media="http://search.yahoo.com/mrss/"
> 
```

然后你可以使用

```
var url ="http://blog.com/feed";
var response = UrlFetchApp.fetch(url);
var xml = Xml.parse(response.getContentText(), false);
var itemArray = xml.getElement().getElement("channel").getElements("item");

//Use the URI from namespace details below (Example for <content:encoded>)
var data = itemArray[0].getElement("http://purl.org/rss/1.0/modules/content/","encoded").getText(); 
```

# php - 按字母顺序列出下拉框

> ID：12204044
> 
> 赞同：-4
> 
> 时间：2012-08-30T19:26:14.967
> 
> 标签：php, mysql

我想按字母顺序排列我的 activityComboHtml。任何帮助，将不胜感激。

```
static function GetInnerContent()
{
    $activityComboHtml=Page::getActivityTitles();
    $ageComboHtml=Page::getAgeComboHtml();
    $displayBanner="";
    $bannerUrl=Page::fetchAllOrganizaitonBanners();
    $staticBanner=  HelpingDBMethods::getStaticBanner();
    if($bannerUrl=="-1")
    {
        $displayBanner="style='display:none'";

    }
    return 
```

这是静态函数

```
 static function getActivityTitles(){
    $html="";
    $Query="Select uniqueId, name from tbl_activity_type_general where NOT(uniqueId = '12')";
    $result=  mysql_query($Query);
    if($result)
    {
        while($row=  mysql_fetch_assoc($result))
            {
             $html=$html."<option id='".$row['uniqueId']."' value='".$row['uniqueId']."'>".$row['name']."</option>";
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:42:03.327

将您的 SQL 查询更改为

```
SELECT `uniqueId`, `name`
FROM `tbl_activity_type_general`
WHERE NOT( `uniqueId` = '12' )
ORDER BY `name` ASC 
```

因此，语句变为：

```
$Query="SELECT `uniqueId`, `name` FROM `tbl_activity_type_general` WHERE NOT( `uniqueId` = '12' ) ORDER BY `name` ASC"; 
```

# python - 使用 Python 解析登录信息

> ID：12204045
> 
> 赞同：-3
> 
> 时间：2012-08-30T19:26:16.483
> 
> 标签：python, parsing, extraction

我试图找到一种方法来用 python 解析出某些信息。这是我需要解析/提取的输入：

> 成功的网络登录：
> 
> ```
>  User Name:      chango
> 
>     Domain:         world
> 
>     Logon ID:               (0x0,0x4BBE4382)
> 
>     Logon Type:     3
> 
>     Logon Process:  NtLmSsp
> 
>     Authentication Package: NTLM
> 
>     Workstation Name:       computer
> 
>     Logon GUID:     - 
> ```

我需要从该输入中提取某些数据。特别是用户名、域、login_ID、登录类型、登录过程、身份验证包和工作站名称。

本质上，我需要将这些值中的每一个都放入一个单独的变量中。我很难弄清楚如何解析它并提取我需要的东西。

请帮我。

代码：

```
def parse_xml(file):
    File_Read = open(file, "rb")
    mess =[]
    try:   

        tree = parse(File_Read)
        root = tree.getroot()

        for EventItem in root.findall("EventLogItem"):
            try:
                if "540" in EventItem.find("EID").text:

                    date = EventItem.find("genTime").text

                    message = EventItem.find("message").text

                    destination = re.findall(r'Target Server Name:\t(.+)\r', message)
                    #destination = re.findall(r'(Target Server Name:)', message)
                    #s = re.split(r'\n\t', message)
                    mess.append(s)
            except: pass    

    except: pass
    return mess 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:51:05.473

我没有看到您的示例代码和您的示例输入之间存在单一的相关性，但是如果您要做的只是将该文本解析为键/值对，那么您可能可以进行简单的拆分。这假设您的密钥始终由`:`

```
raw = """
    User Name:      chango
    Domain:         world
    Logon ID:               (0x0,0x4BBE4382)
    Logon Type:     3
    Logon Process:  NtLmSsp
    Authentication Package: NTLM
    Workstation Name:       computer
    Logon GUID:     -
"""

parsed = dict(map(str.strip, line.split(':', 1)) for line in raw.split('\n') if line.strip())

print parsed

{'Authentication Package': 'NTLM',
 'Domain': 'world',
 'Logon GUID': '-',
 'Logon ID': '(0x0,0x4BBE4382)',
 'Logon Process': 'NtLmSsp',
 'Logon Type': '3',
 'User Name': 'chango',
 'Workstation Name': 'computer'}

print parsed['User Name']
# chango

username = parsed['User Name']
print username
# chango 
```

# sql - 如何在sql select语句中创建列并设置默认值

> ID：12204046
> 
> 赞同：2
> 
> 时间：2012-08-30T19:26:16.147
> 
> 标签：sql, teradata

我正在尝试为已经派生的列“Sub1”设置默认文本值这可能吗？我已经为要使用 0 值派生的列创建了占位符。如果重要的话，我正在 Teradata 工作.....谢谢！

```
select c_clm
,dt.Claimant_Name
,dt.i_ssn
,0 as "Time_Period"
,0 as "Unit_ID",
/*,idv.C_PDT AS "Product"
,er.C_FRM_POL AS "Group Product",*/
(case
 when idv.c_pdt is null then 'GLTC' 
 else idv.c_pdt
 end) as "Product_ID"
,c_ams_clm as "DBS_UserID"
,upc_indiv_org_id as "DBS_EEID"
,0 as "Categ"
,0 as Categ_sort
,0 as "Sub1"
,0 as "Sub1_Sort"
,0 as "Sub2"
,0 as "Sub2_Sort"
,0 as "MTD_Num" 
,0 as "MTD_Denom"
,dt.i_pol as "Policy_Number"
,COALESCE (erpol.n_pol,idv.n_pol, ks.n_pol) 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-30T19:32:52.277

您是否尝试这样做：

```
select '0' as Sub1 
```

您可以直接分配文本值，方法与数字相同。

或者，您是否尝试在 SELECT 中为 NULL 时为列分配值。为此，请使用 COALESCE：

```
select coalesce(Sub1, '0') as Sub1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T19:45:51.967

如果您询问如何使用字符串常量来填充列，只需将其放在单引号中并为其命名。通常最好指定所需的列类型。例如：

```
select 'Text String' (VARCHAR(255)) as sub1 
```

请注意，如果您使用双引号，Teradata 会认为您指的是该名称的列（因此您收到的错误消息。

# vb.net - 在项目集合中查找现有项目

> ID：12204050
> 
> 赞同：0
> 
> 时间：2012-08-30T19:26:22.577
> 
> 标签：vb.net, itemcollection

下面是我的代码。我试图在项目之后或添加项目之前查找特定项目。我们有两个不能在同一个项目集合中的特定产品代码。

一个像“%CNBG%”

另一个是喜欢“％CN-％”

这两个产品代码不会因为单独的交易而被添加到同一个集合中。我只想显示一个错误，CN- 产品不能用 CNBG 产品输入。

这是我的 AddStormItem，将它添加到集合中，我认为我的支票需要放在这里。如何在我添加到下面的集合中找到现有项目？这样我就可以对其进行检查。

```
Private Sub AddStoreItem(ByVal ProductCd As String, ByVal ddlSearchField As String, ByVal tbSearchValue As String)

    Dim cartitems As Cart = OnsiteCart

    Dim s As New dB.Product
    Dim dt As DataTable = Store.GetProductbyCd(ProductCd)
    Dim ds As New DataSet
    Dim er As New Visitor

    ds = Common.GetCustomerByParam(OnsiteCart.CustomerCD, "", "", "", "", "")

    er.IsMemberFlg = nullCStr(ds.Tables(0).Rows(0)("IsMemberFlg"))

    VisitorData = er

    Try

        If VisitorData.IsMemberFlg <> "N" Then

            s.Amount = Format(dt.Rows(0)("UDEF2AMT"), "0.00")
            s.Description = dt.Rows(0)("PRODUCTNAME")
            s.ItemCD = dt.Rows(0)("PRODUCTCD")
            s.Quantity = 1

        Else
            s.Amount = Format(dt.Rows(0)("UNITPRICE"), "0.00")
            s.Description = dt.Rows(0)("PRODUCTNAME")
            s.ItemCD = dt.Rows(0)("PRODUCTCD")
            s.Quantity = 1

        End If

    Catch ex As Exception
        lblProductError.Text = "Product not found"
        lblProductError.Visible = True
    End Try

    If s.Amount <> 0 Then
        cartitems.ItemCollection.Add(s)
        lblProductError.Visible = False
    End If

End Sub 
```

这是我的购物车类

```
Imports system
Imports System.Configuration
Imports System.Web.Configuration
Imports System.Data
Imports System.Data.SqlClient
Imports System.Web
Imports System.Web.UI
Imports System.Collections.ObjectModel

<Serializable()> _
Public Class Cart

#Region " Private Variables "

    Private strenterusercd As String
    Private strinvoicenum As String
    Private strinvoicenumreused As Boolean
    Private strpayeecd As String
    Private strpayeetypecd As String
    Private strcustomercd As String

    Private strpaymenttype As enPaymentType
    Private dblcashamount As Double
    Private dblcheckamount As Double
    Private strchecknumber As String
    Private strponumber As String

    Private strCCType As String
    Private strCCNumber As String
    Private strCCNumberEncrypted As String
    Private strCCExp As String
    Private strCCZip As String
    Private strCCCVV As String

    Private strCCVerificationcd As String
    Private strCCResponsecd As String
    Private strCCRejectioncd As String
    Private strCCTransactioncd As String

    Private intmaxID As Int32

    Private dblCCAmount As Double

#End Region

    Public ItemCollection As New CartItems(Of iInvoiceItem)

    Enum enPaymentType
        CreditCard
        Cash
        Check
        PO
    End Enum

#Region " Public Properties "

    Public Property EnterUserCd() As String
        Get
            Return strenterusercd
        End Get
        Set(ByVal value As String)
            strenterusercd = value
        End Set
    End Property

    Public Property InvoiceNumReUsed() As Boolean
        Get
            Return strinvoicenumreused
        End Get
        Set(ByVal value As Boolean)
            strinvoicenumreused = value
        End Set
    End Property

    Public Property InvoiceNum() As String
        Get
            Return strinvoicenum
        End Get
        Set(ByVal value As String)
            strinvoicenum = value
        End Set
    End Property

    Public Property PayeeCd() As String
        Get
            Return strpayeecd
        End Get
        Set(ByVal value As String)
            strpayeecd = value
        End Set
    End Property

    Public Property PayeeTypeCd() As String
        Get
            Return strpayeetypecd
        End Get
        Set(ByVal value As String)
            strpayeetypecd = value
        End Set
    End Property

    Public Property CustomerCD() As String
        Get
            Return strcustomercd
        End Get
        Set(ByVal value As String)
            strcustomercd = value
        End Set
    End Property

    Public Property PaymentType() As enPaymentType
        Get
            Return strpaymenttype
        End Get
        Set(ByVal value As enPaymentType)
            strpaymenttype = value
        End Set
    End Property

    Public Property CashAmount() As Double
        Get
            Return dblcashamount
        End Get
        Set(ByVal value As Double)
            dblcashamount = value
        End Set
    End Property

    Public Property CheckAmount() As Double
        Get
            Return dblcheckamount
        End Get
        Set(ByVal value As Double)
            dblcheckamount = value
        End Set
    End Property

    Public Property CheckNumber() As String
        Get
            Return strchecknumber
        End Get
        Set(ByVal value As String)
            strchecknumber = value
        End Set
    End Property

    Public Property PONumber() As String
        Get
            Return strponumber
        End Get
        Set(ByVal value As String)
            strponumber = value
        End Set
    End Property

    Public Property CCType() As String
        Get
            Return strCCType
        End Get
        Set(ByVal value As String)
            strCCType = value
        End Set
    End Property

    Public Property CCNumber() As String
        Get
            Return strCCNumber
        End Get
        Set(ByVal value As String)
            strCCNumber = value
        End Set
    End Property

    Public ReadOnly Property CCNumberEncrypted() As String
        Get
            If CCNumber Is Nothing Then
                Return ""
            ElseIf CCNumber.Length = 16 Then
                Return "************" & Right(CCNumber, 4)
            Else
                Return "***********" & Right(CCNumber, 4)
            End If
        End Get
    End Property

    Public Property CCExp() As String
        Get
            Return strCCExp
        End Get
        Set(ByVal value As String)
            strCCExp = value
        End Set
    End Property

    Public Property CCZip() As String
        Get
            Return strCCZip
        End Get
        Set(ByVal value As String)
            strCCZip = value
        End Set
    End Property

    Public Property CCCVV() As String
        Get
            Return strCCCVV
        End Get
        Set(ByVal value As String)
            strCCCVV = value
        End Set
    End Property

    Public Property CCAmount() As Double
        Get
            Return dblCCAmount
        End Get
        Set(ByVal value As Double)
            dblCCAmount = value
        End Set
    End Property

    Public Property CCVerificationcd() As String
        Get
            Return strCCVerificationcd
        End Get
        Set(ByVal value As String)
            strCCVerificationcd = value
        End Set
    End Property

    Public Property CCResponsecd() As String
        Get
            Return strCCResponsecd
        End Get
        Set(ByVal value As String)
            strCCResponsecd = value
        End Set
    End Property

    Public Property CCRejectioncd() As String
        Get
            Return strCCRejectioncd
        End Get
        Set(ByVal value As String)
            strCCRejectioncd = value
        End Set
    End Property

    Public Property CCTransactioncd() As String
        Get
            Return strCCTransactioncd
        End Get
        Set(ByVal value As String)
            strCCTransactioncd = value
        End Set
    End Property

    Public Property MaxID() As Int32
        Get
            Return intmaxID
        End Get
        Set(ByVal value As Int32)
            intmaxID = value
        End Set
    End Property

#End Region

    <Serializable()> _
    Public Class CartItems(Of itemType As iInvoiceItem)
        Inherits Collection(Of iInvoiceItem)
    End Class

    Public Sub New()
        Me.EnterUserCd = HttpContext.Current.User.Identity.Name
        Me.InvoiceNumReUsed = False
        Me.InvoiceNum = Nothing 'Common.getAutonumber("INVOICE")
        Me.MaxID = 0
    End Sub

    Public Sub New(ByVal invoicenum As String)
        Me.EnterUserCd = HttpContext.Current.User.Identity.Name
        Me.InvoiceNumReUsed = True
        Me.InvoiceNum = invoicenum
        Me.MaxID = 0
    End Sub

    Public Sub New(ByVal payeecd As String, ByVal payeetypecd As String)
        Me.EnterUserCd = HttpContext.Current.User.Identity.Name
        Me.InvoiceNum = Nothing 'Common.getAutonumber("INVOICE")
        Me.InvoiceNumReUsed = False
        Me.PayeeCd = payeecd
        Me.PayeeTypeCd = payeetypecd
        Me.MaxID = 0
    End Sub

    Public Sub New(ByVal invoicenum As String, ByVal payeecd As String, ByVal payeetypecd As String)
        Me.EnterUserCd = HttpContext.Current.User.Identity.Name
        Me.InvoiceNum = invoicenum
        Me.InvoiceNumReUsed = True
        Me.PayeeCd = payeecd
        Me.PayeeTypeCd = payeetypecd
        Me.MaxID = 0
    End Sub

    Public Function CartTotal()
        Dim total As Double = 0

        For Each item As iInvoiceItem In Me.ItemCollection
            total += item.getPrice
            'total += item.Amount * item.Quantity
        Next

        Return total
    End Function

    Public Function getNewCartItemID() As Int32
        Dim ID As Int32 = 0

        Me.MaxID += 1
        ID = Me.MaxID

        Return ID
    End Function

    Public Function getParentIndSession(ByVal assignedsessioncd As String) As IndSession
        Dim S As New IndSession

        For Each item As iInvoiceItem In Me.ItemCollection
            If item.Type = "Session" Then
                If CType(item, dB.IndSession).Assignedsessioncd = assignedsessioncd Then
                    S = CType(item, dB.IndSession)
                End If
            End If
        Next
        Return S
    End Function

    Public Function getChildIndfunctions(ByVal assignedsessioncd As String) As CartItems(Of iInvoiceItem)
        Dim tempcart As New CartItems(Of iInvoiceItem)

        For Each item As iInvoiceItem In Me.ItemCollection
            If item.Type = "Function" Then
                If CType(item, dB.IndFunction).Assignedsessioncd = assignedsessioncd Then
                    tempcart.Add(CType(item, dB.IndFunction))
                End If
            End If
        Next
        Return tempcart
    End Function

    Public Sub DeleteByAssignedsessioncd(ByVal assignedsessioncd As String)
        Dim tempcart As New CartItems(Of iInvoiceItem)

        For Each item As iInvoiceItem In Me.ItemCollection
            If item.Type = "Session" Then
                If CType(item, dB.IndSession).Assignedsessioncd = assignedsessioncd Then
                    tempcart.Add(item)
                End If
            ElseIf item.Type = "Function" Then
                If CType(item, dB.IndFunction).Assignedsessioncd = assignedsessioncd Then
                    tempcart.Add(item)
                End If
            End If
        Next

        For Each deleteditem As iInvoiceItem In tempcart
            Me.ItemCollection.Remove(deleteditem)
        Next
    End Sub

    Public Function getCompCodes() As ArrayList
        Dim arrCompCodes As New ArrayList

        For Each item As iInvoiceItem In Me.ItemCollection
            If item.Type = "Function" Then
                If Not CType(item, dB.IndFunction).Compcd Is Nothing Then
                    arrCompCodes.Add(CType(item, dB.IndFunction).Compcd)
                End If
            End If
        Next
        Return arrCompCodes
    End Function

    Public Function getUsedFreeFullRegistrations() As Int32
        Dim count As Int32 = 0

        For Each item As iInvoiceItem In Me.ItemCollection
            If item.Type = "Session" Then
                If CType(item, dB.IndSession).ItemCD = "EXHIB_XC" Then
                    count += 1
                End If
            End If
        Next
        Return count
    End Function

    Public Function getUsedFreeExhibitOnlyRegistrations() As Int32
        Dim count As Int32 = 0

        For Each item As iInvoiceItem In Me.ItemCollection
            If item.Type = "Session" Then
                If CType(item, dB.IndSession).ItemCD = "EXHIB_XD" Then
                    count += 1
                End If
            End If
        Next
        Return count
    End Function

    Public Function getUsedFreeExhibitDailyRegistrations() As Int32
        Dim count As Int32 = 0

        For Each item As iInvoiceItem In Me.ItemCollection
            If item.Type = "Session" Then
                If CType(item, dB.IndSession).ItemCD = "EXHIB_XE" Then
                    count += 1
                End If
            End If
        Next
        Return count
    End Function

    Public Sub Checkout()
        If Me.CartTotal > 0 Then
            System.Web.HttpContext.Current.Response.Redirect("payment.aspx")
        Else
            System.Web.HttpContext.Current.Response.Redirect("confirm.aspx")
        End If
    End Sub

    Public Sub Clear()
        Me.CashAmount = Nothing
        Me.CCAmount = Nothing
        Me.CCCVV = Nothing
        Me.CCExp = Nothing
        Me.CCNumber = Nothing
        Me.CCRejectioncd = Nothing
        Me.CCResponsecd = Nothing
        Me.CCType = Nothing
        Me.CCVerificationcd = Nothing
        Me.CCZip = Nothing
        Me.CheckAmount = Nothing
        Me.CheckNumber = Nothing
        Me.CustomerCD = Nothing
        Me.EnterUserCd = Nothing
        Me.InvoiceNum = Nothing 'Common.getAutonumber("INVOICE")
        Me.InvoiceNumReUsed = Nothing
        Me.ItemCollection = New CartItems(Of iInvoiceItem)
        Me.MaxID = Nothing
        Me.PayeeCd = Nothing
        Me.PayeeTypeCd = Nothing
        Me.PaymentType = Nothing
        Me.PONumber = Nothing
    End Sub

    Public Sub ClearItems()
        Me.CashAmount = Nothing
        Me.CCAmount = Nothing
        Me.CCCVV = Nothing
        Me.CCExp = Nothing
        Me.CCNumber = Nothing
        Me.CCRejectioncd = Nothing
        Me.CCResponsecd = Nothing
        Me.CCType = Nothing
        Me.CCVerificationcd = Nothing
        Me.CCZip = Nothing
        Me.CheckAmount = Nothing
        Me.CheckNumber = Nothing
        Me.InvoiceNumReUsed = Nothing
        Me.ItemCollection = New CartItems(Of iInvoiceItem)
        Me.MaxID = Nothing
        Me.PaymentType = Nothing
        Me.PONumber = Nothing
    End Sub

    Public Function getCartContents() As ArrayList
        Dim arrCartItems As New ArrayList

        For Each item As iInvoiceItem In Me.ItemCollection
            arrCartItems.Add(item)
        Next
        Return arrCartItems
    End Function

    Public Function getSingleUserCartAssignedsessioncd() As String
        Dim retval As String = ""

        For Each item As iInvoiceItem In Me.ItemCollection
            If item.Type = "Session" Then
                retval = CType(item, dB.IndSession).Assignedsessioncd
            End If
        Next
        Return retval
    End Function

    Public Function getParentItems() As DataTable
        Dim dt As New DataTable

        For Each item As iInvoiceItem In Me.ItemCollection
            If item.Type <> "Function" Then
                If Not CType(item, dB.IndFunction).Compcd Is Nothing Then
                    dt.Rows.Add(CType(item, dB.IndFunction).Compcd)
                End If
            End If
        Next
        Return dt
    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:38:39.920

在 Framework 2.0 中，我认为您必须手动执行循环。在 3.5 中，您可以使用 Linq...仍然执行循环，但很容易：

```
If s.ItemCd.Contains("CNBG") Then
    If (From i In cartitems.ItemCollection Where i.ItemCd.Contains("CN-") Select i).Any() Then
        'Error message         
        Return
    End If
ElseIf s.ItemCd.Contains("CN-") Then
    If (From i In cartitems.ItemCollection Where i.ItemCd.Contains("CNBG") Select i).Any() Then
        'Error message                
        Return
    End If
End If

'Ok if we got here
cartitems.ItemCollection.Add(s) 
```

如果代码始终位于开头，您也可以使用 StartsWith 而不是 Contains。

# javascript - 今天早上 CrmFetchKit 失败 - getServerUrl() 未定义

> ID：12204052
> 
> 赞同：0
> 
> 时间：2012-08-30T19:26:25.673
> 
> 标签：javascript, dynamics-crm-2011, crm

我们正在使用 CrmFetchKit 在 Javascript 中进行 MSCRM 2011 自定义。直到今天早上，这才成为问题，现在我在 IE9 脚本调试器中捕获的错误位于 CrmFetchKit.js 中：

SCRIPT5007：无法获取属性“替换”的值：对象为 null 或未定义 CrmFetchKit.js，第 132 行字符 13

```
function getServerUrl() {

    var serverurl = '',
        // This gets the correct value
        localServerUrl = window.location.protocol + "//" + window.location.host,
        // This gets a value
        context = getContext();

    if (context.isOutlookClient() && !context.isOutlookOnline()) {
        serverurl = localServerUrl;
    }
    else {
        serverurl = context.getServerUrl();
        // This is the line that fails, since the value of serverUrl is undefined
        serverurl = serverurl.replace(/^(http|https):\/\/([_a-zA-Z0-9\-\.]+)(:([0-9]{1,5}))?/, localServerUrl);
        serverurl = serverurl.replace(/\/$/, "");
    }

    return serverurl;
} 
```

非常感谢任何想法或建议。我们不知道今天早上发生了什么改变破坏了这个功能。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:33:24.647

好吧，`context.getServerUrl()`失败了。这是任何人都可以在不查看`getServerUrl`. 如果您发布代码，我将很乐意编辑并给出更详细的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:08:23.280

使用哪个版本的 CrmFetchKit？我所有的单元测试都是绿色的……至少在最新版本中是这样。

尝试在 codeplex 上提出此问题，这样我将通过邮件收到通知。

问候，

丹尼尔

# sql - Rails 使用连接和计算求和查询的方式

> ID：12204053
> 
> 赞同：0
> 
> 时间：2012-08-30T19:26:26.517
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, sum

我有以下查询

```
@entity = Unit.joins(:item).select('SUM((items.entity/items.amount*units.amount)) AS entity') 
```

如何以更像轨道的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:59:30.287

```
Unit.joins(:item).sum('items.entity/items.amount*units.amount') 
```

# php - 如何使用 PHP readfile() 优化资源使用

> ID：12204059
> 
> 赞同：2
> 
> 时间：2012-08-30T19:26:42.000
> 
> 标签：php, streaming, video-streaming, jwplayer, fread

我正在使用 php 脚本向 JWPlayer 提供文件，以防止水蛭获取 URL 并在他们的 iPhone 和 Roku 应用程序中使用它。所以我打电话给 videoplay.php?id=myfile 。输出是 mp4 视频流。文件通常为 200-500MB。

php 脚本工作正常，经过一些调整，它的性能甚至比我最初的版本好得多。但它是一个资源猪。当我流式传输一个文件时，我无法在浏览器中打开另一个窗口到同一网站上的任何页面......我什至无法显示当前页面的源代码。如果我通过将 url 直接提供给播放器来播放完全相同的视频文件，我没有资源占用问题，我可以在视频播放时查看页面的源代码，并在同一浏览器中同时播放来自同一网站的两个视频（在两个不同的页面上）。

这是我的代码

```
// some code to query database and get the file url
//
$fh = fopen($filename, "rb") or die("Could not open movie\n");

while (!feof($fh) && connection_status() == 0)
{
  print(fread($fh, 1024*8));
  flush();
  ob_flush();
  usleep(10000);
}

fclose($fh); 
```

我添加了 usleep 以尝试限制资源使用，但它不起作用，但视频似乎加载得更快。当我让睡眠时间更长（例如 1/10 秒）时，视频需要更长的时间才能加载。如果我在 1024*4 和 1024*16 之间改变块大小，则 8kbyte 似乎会导致视频的最快加载时间。16kbyte 使用更多的资源，并且似乎最大化了我的 25MBit 连接。视频根本不会从我的本地服务器加载（但我们的云服务器上的远程视频会加载）。将块大小减少到 1kbyte 并没有解决资源问题。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:29:15.513

这可能都是因为你错过了使用`session_write_close()`. 将函数调用添加到流式传输的开头。会话锁定可能是您的脚本的原因，因为脚本在继续之前等待对方完成。

# c# - 在新对象投影中存储 Linq To Entities 查询

> ID：12204062
> 
> 赞同：0
> 
> 时间：2012-08-30T19:26:49.650
> 
> 标签：c#, linq, anonymous-types, projection, entities

我有一个 Linq to Entities 查询，我想选择一些特定的列并将新对象存储到预定义的对象中。但是，我收到了错误

> `<object>`不包含采用 0 个参数的构造函数。

不知道这里出了什么问题...

也不确定这是否是最好的方法，或者使用匿名类型是否比创建工资单对象更好。

Linq 查询

```
public Payroll GetTestCasePayroll(decimal testScenarioID) //not sure if object is correct return
{
    Payroll instance = (from o in DbContext.UI_OnDemandCheckHeader
                        where o.TestScenarioID == testScenarioID
                        select new Payroll(o.PayEntityCode, o.PayrollYear, o.PayrollNumber)).First();
                        //{ PayEntityCode = , PayrollYear = o.PayrollYear, PayrollNumber = o.PayrollNumber }).First();

    return instance;
} 
```

工资单对象

```
class Payroll
{
    private string _payEntityCode;
    private decimal _payrollYear;
    private string _payrollNumber;

    public Payroll(string payEntityCode, decimal payrollYear, string payrollNumber)
    {
        PayEntityCode = payEntityCode;
        PayrollYear = payrollYear;
        PayrollNumber = payrollNumber;
    }

    public decimal PayrollYear
    {
        get { return _payrollYear; }
        set { _payrollYear = value; }
    }

    public string PayEntityCode
    {
        get { return _payEntityCode; }
        set { _payEntityCode = value; }
    }

    public string PayrollNumber
    {
        get { return _payrollNumber; }
        set { _payrollNumber = value; }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:31:39.507

您的 Payroll 类需要一个不带参数的构造函数，例如

```
Public Payroll() { } 
```

Linq 通过创建输出类的空实例然后在每个属性上使用设置器来工作。它只使用一个空的构造函数。

# javascript - 推文按钮未在博客上正确显示

> ID：12204065
> 
> 赞同：0
> 
> 时间：2012-08-30T19:27:07.993
> 
> 标签：javascript, jquery, twitter

在我的网站上[，](http://blog.austinevers.com/)使用 Twitter.com 上生成的代码的推文按钮适用于前几篇文章。虽然在那之后，它无法加载并且只显示文本。

我一直在控制台中查找任何 JS 错误，但找不到任何可能导致此问题的错误。

你能帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:31:51.317

每次您加载评论时，还调用`twttr.widgets.load();`强制 twitter 脚本重新呈现所有按钮。

# reverse-engineering - MIPS反编译代码中的“加载字”指令中的负偏移量意味着什么

> ID：12204067
> 
> 赞同：0
> 
> 时间：2012-08-30T19:27:14.010
> 
> 标签：reverse-engineering, mips, disassembly

我正在对 C MIPS 应用程序进行逆向工程，在某些地方我可以在*lw*操作码中看到负偏移，例如：

```
80032910                 lw      $v0, -4($s4) 
```

正偏移量通常表示某种结构，其中一个成员正在被访问，但是什么代码会导致负偏移量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:47:52.607

例如，如果你读取一个指针的前一个值，就可以生成它，例如从一个数组的末尾遍历到开头

```
int *myDataEnd;

... code ...

while(*myDataEnd > *(myDataEnd-1))
  myDataEnd--; 
```

引用 所指向的整数`myDataEnd-1`可能会生成该指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T22:10:17.793

位置无关代码使用 $gp 作为指向全局数据 64K 区域中间的指针，因此您会经常`lw $t0, -nnn($gp)`在代码中看到。如果在编译时堆栈帧的深度是不可预测的，则可以使用帧指针来标记堆栈帧的开始，从而导致内存引用与帧指针的负偏移量。

手动优化的代码也可以使用负偏移来节省将地址重新加载到寄存器中。

# c# - using 语句中使用的 BMS_DAL.BMSDataContext 类型必须隐式转换为“System.IDisposable

> ID：12204069
> 
> 赞同：0
> 
> 时间：2012-08-30T19:27:17.147
> 
> 标签：c#

我在 C# 程序中有这个错误

```
public bool Delete(ref ENTValidationErrors validationErrors, int userAccountId)
     {
         if (DBAction == DBActionEnum.Delete)
         {
             // Begin database transaction
             using (TransactionScope ts = new TransactionScope())
             {
                 // Create data context
                 using (BMSDataContext db = new BMSDataContext())
                 {
                     this.Delete(db, ref validationErrors, userAccountId);
                     if (validationErrors.Count == 0)
                     {
                         //Commit transaction since the delete was successful
                         ts.Complete();
                         return true;
                     }
                     else
                     {
                         return false;
                     }
                 }
             }
         }
         else
         {
             throw new Exception("DBAction not delete.");
         }
     } 
```

错误发生在第二个“使用语句”上。它说**'BMS_DAL.BMSDataContext type used in using statement must be implicitly convertible to "System.IDisposable"'**。

这里一定有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:48:52.190

错误指定`BMSDataContext`不实现`IDisposable`，并且`using`语句需要实现的类型。

取出第二`using`条语句，并将其替换为`new`.

或者，您可以`IDisposable`根据`BMSDataContext`需要实施。您可以阅读[这篇文章](https://stackoverflow.com/q/492984/1210520)，它可能会帮助您决定是否需要实施它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T08:06:40.283

使用语句添加 System.Data.Linq

```
using System.Data.Linq; 
```

# c# - C#：一对多关系数据类型

> ID：12204072
> 
> 赞同：4
> 
> 时间：2012-08-30T19:27:39.860
> 
> 标签：c#, dictionary

对于一对一，我可以使用哈希或字典。例如，史密斯 26 岁，布朗 35 岁。这很清楚。一对多呢？例如，Smith 正在上 class01、class08、class12，而 Brown 正在上 class01、class05 和 class08。我的选择是什么，最好的选择是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T19:29:10.840

您仍然可以使用 a `Dictionary`，但您需要将值类型设置为集合，即：`Dictionary<Person, IList<Class>>`。这将允许您存储每个人的班级列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T19:29:04.470

您可以使用带有列表的字典作为第二种类型。

例如，如果您有一个 Student 类和一个 Class 类，您将有一个

```
Dictionary<Student, List<Class>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:29:47.577

您可以使用`Lookup<TKey, TValue>`类型。它几乎像字典一样工作，但允许插入相等的键。阅读 MSDN 文章[http://msdn.microsoft.com/en-us/library/bb460184.aspx](http://msdn.microsoft.com/en-us/library/bb460184.aspx)了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T19:30:08.277

您可以使用列表作为其值的散列或字典。例子：

```
var d = new Dictionary<string,List<string>> {
    { "Smith", new List<string> { "class01", "class08", "class12" } },
    { "Brown", new List<string> { "class01", "class05", "class08" } }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T19:31:03.500

您可以使用

```
Dictionary<string, List<object>> OneToManyDictionary; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T19:33:42.740

创建在 Person 类中定义的实体对象。在类上有属性来表示各种属性和集合。

```
For example (pseudo-code)
Person class
  Age Property (int)
  Class Property (List)
... etc. 
```

# java - TCP 客户端和服务器

> ID：12204074
> 
> 赞同：1
> 
> 时间：2012-08-30T19:27:48.253
> 
> 标签：java, asynchronous, tcp, io

我正在开发一个需要 TCP 客户端和服务器的项目，其中服务器将消息回显给客户端。以下来自作业：

> 服务器应用程序应：
> 
> 1.  侦听已知 IP 地址和端口上的 TCP 连接
> 2.  接受在该端口上发起的连接
> 3.  接收来自客户端的消息并回显它们
> 4.  继续这样做，直到客户端断开连接。
> 
> 客户端应用程序应：
> 
> 1.  在其众所周知的 IP 地址和端口上与服务器建立连接
> 2.  以异步方式向服务器发送消息。消息的格式由您选择；但是，它必须包含足够的信息才能在从服务器返回时被识别。

我已经完成了服务器的编码，这就是我为客户提出的。

我的问题：

*   服务器在众所周知的 IP 和端口上侦听 TCP 连接是什么意思 在我的实现中，我使用`ServerSocket`了接受服务器侦听的端口。我解释正确了吗？

*   在我当前的 TCPClient 实现中，客户端向服务器发送消息，但 println() 似乎是一个阻塞调用，这使得它是同步的。我该怎么做才能使我的客户端异步？

为简洁起见，我没有添加TCPServer的代码，如果需要请告诉我

更新* ***** 根据反馈，我已通过 TCPClient 类进行了修改。收到客户端请求后，我生成了两个线程 ReceiveMessage 和 SendMessage。这样做会给我以下异常：

```
[Client] Message sent: Message from Client 97
[Client] Message sent: Message from Client 98
[Client] Message sent: Message from Client 99
[Client] Done Sending all the messages
java.net.SocketException: Socket closed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
    at java.io.InputStreamReader.read(InputStreamReader.java:167)
    at java.io.BufferedReader.fill(BufferedReader.java:136)
    at java.io.BufferedReader.readLine(BufferedReader.java:299)
    at java.io.BufferedReader.readLine(BufferedReader.java:362)
    at org.chanders.client.ReceiveMessage.run(ReceiveMessage.java:18)
    at java.lang.Thread.run(Thread.java:680) 
```

以下是新的客户代码：

```
public class TCPClient {
    Socket clientSocket = null;
    OutputStream out = null;
    BufferedReader in = null;
    String message = "Hello from Client";
    int messagecount = 100;

    // server credentials
    private static final String SERVER_ADDRESS = "localhost";
    private static final int SERVER_PORT = 50001;

    protected void execute() {
        try {
            clientSocket = new Socket(SERVER_ADDRESS, SERVER_PORT);
            Thread send = new Thread(new SendMessage(clientSocket.getOutputStream()));
            Thread receive = new Thread(new ReceiveMessage(clientSocket.getInputStream()));

            send.start();
            receive.start();

            //For server to wait until send and receive threads finish
            send.join();
            receive.join();

        } catch (UnknownHostException uhe) {
            System.err.println("Couldnt find host:  "  + SERVER_ADDRESS);
            uhe.printStackTrace();
            System.exit(-1);

        }catch(IOException ioe) {
            System.err.println("Couldnt get I/O:  "  + SERVER_ADDRESS);
            ioe.printStackTrace();
            System.exit(-1);

        }catch(InterruptedException ie) {
            System.err.println("Thread.join failed:  ");
            ie.printStackTrace();
            System.exit(-1);
        }
        finally {
            //cleanup();
        }
    }

    private void cleanup() {
        try {
            clientSocket.close();
        }catch(Exception e) {
            e.printStackTrace();
            System.exit(-1);
        }
    }

    public static void main(String[] args) {
        TCPClient client = new TCPClient();
        client.execute();
    }

public class SendMessage implements Runnable {
    OutputStream out = null;
    String message = "Message from Client";
    int messageCount = 100;

    public SendMessage(OutputStream out) {
        this.out = out;
    }

    public void run() {
        PrintWriter writer = new PrintWriter(out);
        try {

            for (int i = 0; i < messageCount; i++) {
                String m = message + " " + i;
                writer.println(m);
                System.out.println("[Client] Message sent: " + m);
            }
            System.out.println("[Client] Done Sending all the messages");

        } catch (Exception e) {
            e.printStackTrace();
            System.exit(-1);
        } finally {
            cleanup();
        }

    }
    private void cleanup() {
        try {
            out.close();
        }catch(Exception e) {
            e.printStackTrace();
            System.exit(-1);
        }
    }
}

public class ReceiveMessage implements Runnable {
    InputStream in = null;
    String message;

    public ReceiveMessage(InputStream in) {
        this.in = in;
    }

    public void run() {
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        try {

            while ((message = reader.readLine()) != null) {

                System.out.println("[Client] Received message from Server: "
                        + message);
            }

            System.out.println("[Client] Done Receiving messages from Server");

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            cleanup();
        }

    }
    private void cleanup() {
        try {
            in.close();
        }catch(Exception e) {
            e.printStackTrace();
            System.exit(-1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:59:42.963

在这种情况下，`Asynchronous`可能并不意味着您不能使用 println，而是客户端必须能够在发送新消息时接收消息。客户端应创建套接字，然后创建两个线程，一个用于发送消息，另一个用于接收和打印消息。

**更新**

为避免异常，请使用 clientSocket.shutdownOutput() 而不是关闭输出流。您可以将*发送*代码移回主线程并为*接收*代码保留一个单独的线程，或者在加入*发送*线程后调用 shutdownOutput()。无论哪种方式更适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:55:07.490

为每个客户端使用单独的线程。当你写东西时，在服务器端，必须有一个接受字符串的方法。否则会阻塞。粘贴您的服务器代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:15:28.803

众所周知的端口是专门为特定协议指定的端口号，例如 80 用于 HTTP，443 用于 HTTPS。您是否打算实施特定的协议？如果是，我建议您使用该协议的端口号。维基百科在这里有一个众所周知的端口号列表： [http ://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers](http://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T20:25:58.013

如果这是一项专业任务（而不是一些家庭作业），那么我强烈推荐[Netty Server](https://netty.io/)，它基本上是一个 NIO 客户端服务器框架。它显着简化/简化了这种类型的开发。

确保检查他们的[文档](https://netty.io/Documentation/WebHome)，因为它提供了完全实现问题中所述的服务器/客户端功能的示例。

如果这是一个家庭作业，那么[这个例子](http://www.cs.uic.edu/~troy/spring05/cs450/sockets/socket.html)应该提供所有必要的细节。另请查看[Oracle 资源](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)。

# android - 在哪里可以找到styles.xml 和themes.xml？

> ID：12204082
> 
> 赞同：0
> 
> 时间：2012-08-30T19:28:32.097
> 
> 标签：android, styles, themes, android-theme, android-styles

Android [Styles and Themes 文档](http://developer.android.com/guide/topics/ui/themes.html#PlatformStyles)将开发人员指向`styles.xml`和`themes.xml`文件，因为他们说样式引用的文档很差。但是，链接已损坏。我在哪里可以找到它们？

> 然而，R.style 参考文档没有很好的文档，也没有彻底描述样式，因此查看这些样式和主题的实际源代码将使您更好地了解每个样式提供的样式属性。要更好地参考 Android 样式和主题，请参阅以下源代码：[链接断开]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:30:36.730

[`themes.xml`](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/themes.xml) and [`styles.xml`](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml) are now available on github in the following directory:

[`platform_frameworks_base / core / res / res / values`](https://github.com/android/platform_frameworks_base/tree/master/core/res/res/values).

# silverlight - Windows Phone 中的照片库

> ID：12204085
> 
> 赞同：3
> 
> 时间：2012-08-30T19:28:50.610
> 
> 标签：silverlight, windows-phone-7, windows-phone-7.1, photo-gallery, pinchzoom

你知道我如何制作一个像智能手机默认使用的照片库吗？例如，在我的项目中，我添加了 10 张图片。我想按一个主题制作 2 个照片库，例如，我必须将 5 张照片放在一个照片库中，将另外 5 张照片放在第二个照片库中（在项目的几页中）。我想在这些照片库中，触摸可缩放和可滚动的图像。你能给我写一个代码示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:43:09.067

您可以使用 Silverlight Control Toolkit 的手势侦听器来捕获触摸中的拖动和捏合。

为您的图像定义一个 CompositeTransformation 并设置它的缩放（在捏合时）和偏移量（在拖动中）。当图像未缩放时，拖动可以触发到下一张图像。

有关详细信息，请参阅：

*   [https://stackoverflow.com/a/6474498/1150183](https://stackoverflow.com/a/6474498/1150183)。
*   [在 Windows Phone 7.5 中使用 Silverlight 创建照片库](https://stackoverflow.com/questions/8299137/creating-photo-gallery-with-silverlight-in-windows-phone-7-5)

如果您想要捏缩放功能，也可以尝试[http://multitouch.codeplex.com/ 。](http://multitouch.codeplex.com/)

# vim - 我应该使用什么 autocmd 来触发特定操作

> ID：12204087
> 
> 赞同：0
> 
> 时间：2012-08-30T19:29:07.767
> 
> 标签：vim

我希望 vim 在缓冲区中更改它后编译我的乳胶文件，所以我这样做了：

```
au! InsertLeave *.tex :silent! update % | :silent! call Tex_CompileLatex() 
```

但是，它仅适用于退出插入模式。我希望在我对缓冲区进行一些更改时运行该命令，例如，在我“dd”一行之后，或者用“r”替换一个字符之后，有没有办法做到这一点？另外，“调用 Tex_CompileLatex()”需要一些时间才能返回，有没有办法以异步方式运行它，所以我不必在 vim 中等待？

我对vimscript不熟悉，感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T04:16:41.547

每次你做一个动作似乎有点太频繁了，但你可以用`CursorMoved`or来完成它`CursorMovedI`。异步建议需要使用 vim-latex 进行调整。如果您想要一个更简单的选项，只需在当前文件上运行一个 LaTeX 命令，您可以使用`:help system()`它在后台进行系统调用。

# iphone - 在视图加载时修改 uitableview 上的多行

> ID：12204096
> 
> 赞同：3
> 
> 时间：2012-08-30T19:29:52.013
> 
> 标签：iphone, objective-c, uitableview

我有一个应该有 33 行的 UITableView。每行代表一天中的特定时间段。当包含表视图的视图加载时，我需要它相应地填充每一行。

我有一组传递给视图的保留对象。每个预留包含一个槽号、一个预留名称和槽中预留的持续时间。

填充表格的最佳方法是什么，我目前正在遍历`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`方法中的保留数组。

这并没有给我预期的结果或行为。性能极差，因为它不断迭代循环，滚动后不应该是蓝色的单元格是蓝色的。解决这个问题的最佳方法是什么？我已经包含了下面的代码。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 33;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    NSString *timeStamp = [NSString stringWithFormat:@"%.2f", (indexPath.row + 14.0 ) / 2.0];
    timeStamp = [timeStamp stringByReplacingOccurrencesOfString:@".50" withString:@":30"];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [NSString stringWithFormat:@"%@: ", timeStamp];

    for (Reservation *temp in bookingsArray) {
        if ((temp.slotNumber - 1) == indexPath.row) {
            cell.textLabel.text = [NSString stringWithFormat:@"%@: %@", timeStamp, temp.reservationName];
            cell.contentView.backgroundColor = [UIColor blueColor];
        }
        for (NSNumber *tempNo in temp.slotIdentifiers) {
            if ([tempNo intValue] -1 == indexPath.row) {
                //cell.textLabel.text = [NSString stringWithFormat:@"%@: Booked", timeStamp];
                cell.contentView.backgroundColor = [UIColor blueColor];
            }
        }
    }

    return cell;
} 
```

更新尝试以下给我奇怪的行为，在我开始滚动后所有单元格都变成蓝色。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    bookManager = appDelegate.bookingManager;
    bookingsArray = [[NSArray alloc] initWithArray:[bookManager getBookingsForCourt:1 onDate:[NSDate date]]];
    namesArray = [[NSMutableDictionary alloc] init];
    slotIndexSet = [NSMutableIndexSet indexSet];

    for (int c = 0; c < 33; c++) {
        [namesArray setObject:@"Available" forKey:[NSNumber numberWithInt:c]];
    }

    for (Reservation *temp in bookingsArray) {
        [namesArray setObject:temp.reservationName forKey:[NSNumber numberWithInt:temp.slotNumber]]; 
        for (NSNumber *slotNo in temp.slotIdentifiers) {
            [slotIndexSet addIndex:[slotNo intValue] + 1];
        }
    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    NSString *timeStamp = [NSString stringWithFormat:@"%.2f", (indexPath.row + 14.0 ) / 2.0];
    timeStamp = [timeStamp stringByReplacingOccurrencesOfString:@".50" withString:@":30"];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [NSString stringWithFormat:@"%@: ", timeStamp];
    cell.textLabel.text = [namesArray objectForKey:[NSNumber numberWithInt:indexPath.row]]; 

    if ([slotIndexSet containsIndex:indexPath.row]) {
       cell.contentView.backgroundColor = [UIColor blueColor]; 
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:00:22.987

您需要做两件事来加快速度：

*   以索引处的对象等于的方式转换`bookingsArray`为数组。您可以在收到原始预订数组时对其进行迭代。`bookingBySlotNumber``i``slotNumber - 1``i`
*   创建一个包含已预订项目索引的[`NSIndexSet`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSIndexSet_Class/Reference/Reference.html)调用。`isBookedBySlotNumber`您可以通过 all 来准备它，并标记已预订项目`Reservation.slotIdentifiers`的索引。`isBookedBySlotNumber`

有了这两个预处理项，您就可以完全消除嵌套循环：外部循环将替换为 in 中的查找`bookingBySlotNumber`，内部循环将替换为 in 中的循环`isBookedBySlotNumber`。

# android - 为什么我的“居中”对象在我的 RelativeLayout 中略微偏离中心？

> ID：12204097
> 
> 赞同：1
> 
> 时间：2012-08-30T19:29:56.187
> 
> 标签：android, android-layout, android-relativelayout, gravity

我想制作两个具有自定义背景、文本和文本右侧图像的大小相同的单选按钮。由于它们与标准“按钮”有多么不同，我使用可点击的“RelativeLayout”制作它们。

文本和图像的高度不同，但我希望每个都在按钮中垂直居中。我还希望文本+图像的组合在按钮中水平居中。第二部分是我遇到的麻烦；它偏离中心，靠近左侧。在下图中，左侧是我想要的，而右侧是正在发生的事情。其中一个按钮（文本较长的那个）上的图像也被调整为更小......尽管按钮右侧仍有足够的空间。

![我想要的在左边，正在发生的在右边。](../Images/c882adb0aacd9fe3a2702c25dc9d8d35.png)

这是我的代码：

```
<LinearLayout
    android:baselineAligned="false"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">
    <RelativeLayout
        android:id="@+id/my_button"
        android:background="@drawable/radio_button"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal">
        <TextView
            android:id="@+id/button_textview"
            android:text="@string/button_label"
            android:textAppearance="?android:attr/textAppearanceButton"
            android:layout_centerVertical="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"></TextView>
        <ImageView
            android:contentDescription="@string/image_description"
            android:id="@+id/button_imageview"
            android:layout_centerVertical="true"
            android:src="@drawable/my_icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/button_textview">
        </ImageView>
    </RelativeLayout>

    <RelativeLayout
        ... same thing for the second button ...
    </RelativeLayout>

</LinearLayout> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:53:00.987

将此用作您的按钮：

```
<LinearLayout
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:orientation="horizontal"
              android:layout_gravity="center_horizontal"
              >
    <TextView android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_gravity="center_vertical"
              android:text="MyButton"/>
    <ImageView android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_gravity="center_vertical"
               android:src="@drawable/my_image"/>

</LinearLayout> 
```

现在，您可以将其放置在其他父视图中。要将布局属性应用于上方按钮，请将这些属性放在`<LinearLayout>`上方按钮的外部标记中。

选择：

您可以设置要在使用属性的侧面（左、右、上、下）绘制的自定义图像，`TextView`例如： `android:drawableLeft="@drawable/my_image"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:56:58.633

原来解决方案是添加

```
android:paddingRight="0dip" 
```

奇怪的是，即使我一开始没有放任何填充物。

# c# - 将按钮绑定到命令 (Windows Phone 7.5)

> ID：12204099
> 
> 赞同：13
> 
> 时间：2012-08-30T19:30:01.753
> 
> 标签：c#, windows-phone-7, mvvm, icommand

我正在开发我的 windows-phone 应用程序，它使用一些简单的数据绑定。我已经创建了一个基于 MvvM 编程方法的应用程序。我目前正在开发的应用程序也可以通过 MvvM 方法工作。因为我想让我的代码尽可能干净，所以我一直在寻找一种方法来使“按钮单击事件”（通常发生在代码隐藏页面中）发生在我的视图模型或主视图模型中。

我已经在互联网上搜索了需要对 Icommand 接口进行简单解释的原因，因为我相信这是要走的路。我发现的解释的问题是其中一些是基于使用 CommandRelay 函数的 MvvMlight 工具包。我不想使用 MvvM light 工具包，因为我想先了解自己。我发现的其他教程是由过于热情的开发人员编写的，它们给你的信息太多了。

有人可以向我展示绑定到按钮的 Icommand 的最简单版本吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-30T19:54:02.920

在您的 XAML 中：

```
<Button Content="My Button" Command="{Binding MyViewModelCommand}" /> 
```

在您的视图模型中：

```
public class MyViewModel
{

    public MyViewModel()
    {
        MyViewModelCommand = new ActionCommand(DoSomething);
    }

    public ICommand MyViewModelCommand { get; private set; }

    private void DoSomething()
    {
        // no, seriously, do something here
    }
} 
```

*`INotifyPropertyChanged`并且省略了其他视图模型的寒暄。
在视图模型中构造命令的另一种方法显示在此答案的底部。*

现在，您需要一个`ICommand`. 我建议从像这样简单的东西开始，并根据需要扩展或实现其他功能/命令：

```
public class ActionCommand : ICommand
{
    private readonly Action _action;

    public ActionCommand(Action action)
    {
        _action = action;
    }

    public void Execute(object parameter)
    {
        _action();
    }

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;
} 
```

这是布局视图模型的另一种方法：

```
public class MyViewModel
{
    private ICommand _myViewModelCommand;
    public ICommand MyViewModelCommand
    {
        get 
        {
            return _myViewModelCommand
                ?? (_myViewModelCommand = new ActionCommand(() => 
                {
                    // your code here
                }));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T19:54:02.710

要添加到杰斯的答案：

我一直最喜欢的是来自@Microsoft 模式和实践团队的 DelegateCommand。查看[这篇文章](https://stackoverflow.com/questions/11960488/any-winrt-icommand-commandbinding-implementaiton-samples-out-there/11964495#11964495)了解更多信息。

# wif - 尝试将 WIF 4.0 自定义 STS（来自项目模板）转换为使用 .NET 4.5

> ID：12204104
> 
> 赞同：3
> 
> 时间：2012-08-30T19:30:20.427
> 
> 标签：wif, .net-4.5

我已经使用最新 WIF SDK（用于 .NET 4.0）附带的被动和主动案例的项目模板成功地创建了一个有效的自定义 STS。一切都按预期工作。

我现在正在尝试将我的 Web 应用程序和服务升级到 .NET 4.5，包括我的自定义 STS。我已经能够将 Microsoft.IdentityModel.xxx 中的所有命名空间/类映射到框架中内置的新命名空间/类，但有 1 个例外 - WSTrustServiceHostFactory。

该类似乎不再存在，我无法弄清楚如何替换它提供的功能。即，从此链接：http: [//msdn.microsoft.com/en-us/library/microsoft.identitymodel.protocols.wstrust.wstrustservicehostfactory](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.protocols.wstrust.wstrustservicehostfactory)

```
<%@ServiceHostLanguage="C#"Debug="true"Service="XXX.XXX.MyActiveSTSConfiguration"Factory="Microsoft.IdentityModel.Protocols.WSTrust.WSTrustServiceHostFactory"%> 
```

我的被​​动 STS 升级到 4.5 后目前正在工作。我需要找到使用 4.5 框架实例化活动 SecurityTokenService 的适当/推荐方法（理想情况下，使用 web.config 作为 SDK 项目模板中的大多数配置）。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T15:22:26.487

一旦我弄清楚了一些事情，这变得非常简单。

服务主机标记：

```
<%@ ServiceHost Language="C#" Debug="true" Service="XXX.XXX.MyActiveSTSConfiguration" Factory="XXX.XXX.CustomWSTrustServiceHostFactory" %> 
```

这是我的自定义工厂类实现。关键是，由于您不能再使用 WSTrustServiceFactory 为您创建 WSTrustServiceHost，因此您必须在 CreateServiceHost 方法覆盖中自己显式创建一个。

```
public class CustomWSTrustServiceHostFactory 
    : ServiceHostFactory {

    /// <summary>
    /// Initializes a new instance of the <see cref="CustomWSTrustServiceHostFactory"/> class.
    /// </summary>
    public CustomWSTrustServiceHostFactory() 
        : base() { }

    /// <summary>
    /// Creates and configures a <see cref="WSTrustServiceHost"/> with a specific base address.
    /// </summary>
    /// <param name="serviceType">Specifies the type of service to host (ignored).</param>
    /// <param name="baseAddresses">The <see cref="T:Uri"/> array that contains the base addresses for the service.</param>
    /// <returns>A <see cref="WSTrustServiceHost"/> with a specific base address.</returns>
    protected override ServiceHost CreateServiceHost(Type serviceType, Uri[] baseAddresses) {
        var config = new PortalActiveSTSConfiguration();
        var host = new WSTrustServiceHost(config, baseAddresses);
        //var host = base.CreateServiceHost(serviceType, baseAddresses);
        var serviceBehavior = host.Description.Behaviors.Find<ServiceBehaviorAttribute>();
        serviceBehavior.AddressFilterMode = AddressFilterMode.Any;
        return host;
    }

    /// <summary>
    /// Creates and configures a <see cref="WSTrustServiceHost"/> with a specific base address.
    /// </summary>
    /// <param name="constructorString">The constructor string (ignored).</param>
    /// <param name="baseAddresses">The <see cref="T:Uri"/> array that contains the base addresses for the service.</param>
    /// <returns></returns>
    public override ServiceHostBase CreateServiceHost(string constructorString, Uri[] baseAddresses) {
        var config = new PortalActiveSTSConfiguration();
        var host = new WSTrustServiceHost(config, baseAddresses);
        //var host = base.CreateServiceHost(constructorString, baseAddresses);
        var serviceBehavior = host.Description.Behaviors.Find<ServiceBehaviorAttribute>();
        serviceBehavior.AddressFilterMode = AddressFilterMode.Any;
        return host;
    }

} 
```

自定义服务配置类实现（基本上是 WIF 4.0 STS 模板附带的）：

```
public class MyActiveSTSConfiguration 
    : SecurityTokenServiceConfiguration {

    public MyActiveSTSConfiguration()
        : base(
            WebConfigurationManager.AppSettings[ISSUER_NAME],
                new X509SigningCredentials(
                    CertificateUtil.GetCertificate(
                        StoreName.My, StoreLocation.LocalMachine, X509FindType.FindByThumbprint,
                        WebConfigurationManager.AppSettings[SIGNING_CERTIFICATE_THUMBPRINT], 
                        true)
                )
        ) {
        this.SecurityTokenService = typeof(MyActiveSTS);
    }

} 
```

# c++ - C++ 简单类

> ID：12204109
> 
> 赞同：0
> 
> 时间：2012-08-30T19:30:45.770
> 
> 标签：c++, oop, class

我开始学习 C++、类、对象、结构等，但我遇到了一些问题。

```
#include <iostream>

using namespace std;

class Owner
{
    public:
        // Getters
        string GetName(){return info.name;}
        int GetAge(){return info.age;}
        short int GetGender(){return info.gender;}

        // Setters
        void SetName(string value){info.name = value;}
        void SetAge(int value){info.age = value;}
        void SetGender(short int value){info.gender = value;}
    private:
        struct info
        {
            string name;
            int age;
            short int gender;
        };
};

class Pet
{
    public:
        // Getters
        string GetName(){return info.name;}
        int GetAge(){return info.age;}
        short int GetGender(){return info.gender;}

        // Setters
        void SetName(string value){info.name = value;}
        void SetAge(int value){info.age = value;}
        void SetGender(short int value){info.gender = value;}
    private:
        struct info
        {
            string name;
            int age;
            short int gender;
        }
};

int main()
{

    // Creating object ...

    cout << "qq" << endl;

    return 0;
} 
```

但是当我尝试编译它时出现这些错误：

```
In member function 'std::string Owner::GetName()':|
main.cpp|9|error: expected primary-expression before '.' token|
In member function 'int Owner::GetAge()':|
main.cpp|10|error: expected primary-expression before '.' token|
In member function 'short int Owner::GetGender()':|
main.cpp|11|error: expected primary-expression before '.' token|
In member function 'void Owner::SetName(std::string)':|
main.cpp|14|error: expected unqualified-id before '.' token|
In member function 'void Owner::SetAge(int)':|
main.cpp|15|error: expected unqualified-id before '.' token|
In member function 'void Owner::SetGender(short int)':|
main.cpp|16|error: expected unqualified-id before '.' token|
main.cpp|45|error: expected unqualified-id before '}' token|
In member function 'std::string Pet::GetName()':|
main.cpp|30|error: expected primary-expression before '.' token|
In member function 'int Pet::GetAge()':|
main.cpp|31|error: expected primary-expression before '.' token|
In member function 'short int Pet::GetGender()':|
main.cpp|32|error: expected primary-expression before '.' token|
In member function 'void Pet::SetName(std::string)':|
main.cpp|35|error: expected unqualified-id before '.' token|
In member function 'void Pet::SetAge(int)':|
main.cpp|36|error: expected unqualified-id before '.' token|
In member function 'void Pet::SetGender(short int)':|
main.cpp|37|error: expected unqualified-id before '.' token|
||=== Build finished: 13 errors, 0 warnings ===| 
```

为什么它给我这么多错误？

我不知道为什么，因为很明显，例如，

```
 string GetName()
 {
     return info.name;
 } 
```

从结构中返回一个字符串`info.name`

我正在使用代码块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:35:08.870

您将结构声明为类型 ( `Owner.info`) 而不是成员 ( `this->info`)。你可能想要这个：

```
struct OwnerInfo
{
    string name;
    int age;
    short int gender;
};

class Owner {
    // stuff..
private:
    OwnerInfo info;
}; 
```

或者，更合理的版本是直接将它们放在那里而不是放在无意义的内部`struct`：

```
class Owner {
    // stuff..
private:
    string name;
    int age;
    short int gender;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:35:30.807

您误解了 struct 关键字的语法，此外，必须在成员函数访问它*之前声明实际的成员变量。*因此，将您的类声明更改为类似

```
class Owner
{
private:
    struct
    {
        string name;
        int age;
        short int gender;
    } info;

public:
    // Getters
    string GetName(){return info.name;}
    int GetAge(){return info.age;}
    short int GetGender(){return info.gender;}

    // Setters
    void SetName(string value){info.name = value;}
    void SetAge(int value){info.age = value;}
    void SetGender(short int value){info.gender = value;}
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:34:58.887

声明：

```
private:
    struct info
    {
        string name;
        int age;
        short int gender;
    }; 
```

... 定义嵌套结构类型的布局`info`，就像整个类的定义一样。但是，`info`现在是嵌套在 Owner 中的类型，而不是属于 Owner 成员的该类型的实例。相反，尝试命名结构信息，然后`Info info = new Info();`在所有者的私有部分中声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T19:35:25.063

好吧，您创建了一个结构，因此告诉您的编译器“信息”是具有以下属性的类型...

您需要声明一个“info”类型的变量。

```
info personalInfo; 
```

将其声明为类成员，您可以创建您的 Get-er 和 Set-er。

```
string GetName(){return personalInfo.name;} 
```

[更多信息](http://www.cplusplus.com/doc/tutorial/structures/ "更多信息")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T19:38:13.193

您应该创建一个结构信息对象。你不能在不创建对象的情况下直接访问结构的字段。为什么你根本需要结构？试试这个

```
class Owner
{
    private:
            string name;
            int age;
            short int gender;

    public:
        // Getters
        string GetName(){return this->name;}
        int GetAge(){return this->age;}
        short int GetGender(){return this->gender;}

        // Setters
        void SetName(string value){this->name = value;}
        void SetAge(int value){this->age = value;}
        void SetGender(short int value){this->gender = value;}
}; 
```

# asp.net - 如何在调试 Web 项目的同时运行测试？

> ID：12204111
> 
> 赞同：26
> 
> 时间：2012-08-30T19:30:49.337
> 
> 标签：asp.net, visual-studio, visual-studio-2012

在一些解决方案中，我们有 ASP.NET/WCF Web 项目和一个测试项目。一些测试使用`http://localhost:port/...`. 在 VS2010 中，当调试 ASP.NET/WCF web 项目时，测试运行器可以运行测试，如果 web 项目中有任何断点，调试器将中断执行。这似乎已在 VS2012 中被禁用/删除。

调试 ASP.NET/WCF Web 项目时（通过按 F5 或通过附加进程启动），TEST->Run 和 TEST->Debug 子菜单都被禁用。在 VS2010 中，只有 Test->Debug 子菜单被禁用，而 Test->Run 子菜单仍然被启用。我们使用这种方式来轻松调试 Web 项目中的服务。有什么方法可以恢复这种行为或解决方法？

[在 ASP.NET 开发服务器上运行时进行调试](http://msdn.microsoft.com/en-us/library/ms243172.aspx#DebuggingOnCassini)似乎不适用于 VS2012，或者至少我无法让它工作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-01-16T16:10:42.877

在 VS2013 中情况是一样的：当项目正在运行/调试时，运行/调试测试的选项是灰色的。这是一种耻辱，尤其是对于像 Web API 这样的项目，通过 HTTP 调用 API 的测试（而不是创建 Controller 类的实例并规避任何网络流量）非常有用，因为它们更接近 API 的最终用户会体验。

作为一种解决方法，您可以在单独的 VS 实例中打开相同的解决方案，或者使用相同的项目创建单独的解决方案，专门用于测试。在第一个 VS 实例中调试，在第二个实例中运行测试。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T17:06:32.320

如果您有一个包含 WCF 应用程序和调用它们的测试的解决方案，您可以通过调用*Debug All Tests*或*Debug Selected Tests*来调试使用这些测试的应用程序，而无需先前的*Start Debugging (F5)*。

将您的解决方案配置为*Multiple Startup Projects*并在所有操作中设置*None*并将您的 WCF 应用程序配置为启动操作*不要打开页面。等待请求*。使用此配置，如果您选择*Debug All Tests*或*Debug Selected Tests* ，开发 Web 服务器将启动。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-04-21T03:09:59.237

这是调试单个单元测试以及 Web 服务器的解决方法。它依赖于[调试多个进程](https://msdn.microsoft.com/en-us/library/a404w14b(v=VS.90).aspx)（不包括 MSVS Express）：

1.  启动 Web 服务器（非调试），记下它的进程 ID（IIsExpress 图标 -> 显示所有应用程序）
2.  在测试的第一行放置一个断点
3.  开始调试单元测试，等待它在断点处停止。
4.  调试 -> 附加到进程，输入 Web 服务器进程 ID

测试和服务器都在调试器中实时运行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-30T22:09:01.123

我最终写了一个快速[插件](https://github.com/amit-g/RunTests)。事实证明，与 VS2012 一样，VS2012 测试运行器也可以在调试 Web 项目时运行测试。只是菜单选项被禁用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-10T18:59:00.083

试试这个：

1.  在单元测试方法的第一行放置一个断点。
2.  开始调试您的单元测试。
3.  一旦它在您的单元测试中到达第一行，启动您需要运行的其他项目的新实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-20T02:19:39.940

这不是一个很好的解决方案，但它有效。使用 Azure DevOps TFS 版本控制，创建当前项目的分支。在 Visual Studio 的另一个实例中的另一个分支中打开您的项目的解决方案，同时您的主项目在 Visual Studio 的第一个/原始实例中运行。然后，在您的第一个/主 Visual Studio 实例中运行您的 Web 项目。现在，从 Visual Studio 的其他实例运行单元测试。瞧。

为了使它们保持同步，您可以从一个分支合并到另一个分支。

# c++ - Visual Studio 2012 中的 strcpy() 错误

> ID：12204116
> 
> 赞同：7
> 
> 时间：2012-08-30T19:31:16.747
> 
> 标签：c++, visual-studio-2012

所以我有这个代码：

```
#include "stdafx.h"
#include <cstdlib>
#include <iostream>
#include <string>
using namespace std; 
```

...

```
char* b = new char [10];
strcpy(b, "1234567890"); 
```

错误：microsoft visual studio 11.0\vc\include\string.h(110)：参见“strcpy”的声明

我如何解决它？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-24T04:24:19.970

快速解决方法是将 _CRT_SECURE_NO_WARNINGS 定义添加到项目的设置中

右键单击您的 C++ 并选择“属性”项以进入属性窗口。

现在跟随并展开到“配置属性”->“C/C++”->“预处理器”->“预处理器定义”。

在“预处理器定义”中添加

> _CRT_SECURE_NO_WARNINGS

但最好添加

> _CRT_SECURE_NO_WARNINGS;%（预处理器定义）

至于继承预定义的定义

恕我直言，在大多数情况下，这是一个好方法。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-30T19:42:00.663

MSDN上有一个解释和解决方案：

> 函数 strcpy 被认为是不安全的，因为没有边界检查并且可能导致缓冲区溢出。
> 
> 因此，正如它在错误描述中所建议的那样，您可以使用 strcpy_s 而不是 strcpy：
> 
> strcpy_s( char *strDestination, size_t numberOfElements,
> const char *strSource );

和：

> 要禁用弃用，请使用 _CRT_SECURE_NO_WARNINGS。详细信息请参见在线帮助。

[http://social.msdn.microsoft.com/Forums/da-DK/vcgeneral/thread/c7489eef-b391-4faa-bf77-b824e9e8f7d2](http://social.msdn.microsoft.com/Forums/da-DK/vcgeneral/thread/c7489eef-b391-4faa-bf77-b824e9e8f7d2)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-30T19:59:01.870

您收到的消息是来自 MS 的建议，他们建议您不要使用标准 strcpy 函数。他们这样做的动机是很容易以不良方式误用（编译器通常无法检测到此类误用并警告您）。在您的帖子中，您正是这样做的。您可以通过告诉编译器不要给您该建议来摆脱该消息。但是，您的代码中的严重错误仍然存​​在。

您正在创建一个可容纳 10 个字符的缓冲区。然后，您将 11 个字符塞入其中。（还记得结尾的 '\0' 吗？）你已经拿了一个足够容纳 10 个鸡蛋的盒子，并试图把 11 个鸡蛋塞进去。这对你有什么好处？不这样做是您的责任，编译器通常不会检测到此类事情。

您已标记此 C++ 并包含字符串。我不知道你使用 strcpy 的动机，但如果你使用 std::string 而不是 C 风格的字符串，你会得到扩展的框以容纳你在其中的内容。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-07T21:41:16.790

我不得不使用 strcpy_s 并且它起作用了。

```
#include "stdafx.h"
#include<iostream>
#include<string>

using namespace std;

struct student
{
    char name[30];
    int age;
};

int main()
{

    struct student s1;
    char myname[30] = "John";
    strcpy_s (s1.name, strlen(myname) + 1 ,myname );
    s1.age = 21;

    cout << " Name: " << s1.name << " age: " << s1.age << endl;
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-17T16:57:19.757

将此行添加到标题顶部

```
#pragma warning(disable : 4996) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-09T14:20:10.580

如果您收到有关已弃用函数的错误消息，请尝试执行`#define _CRT_SECURE_NO_WARNINGS`or `#define _CRT_SECURE_NO_DEPRECATE`。这些应该解决它。如果需要，您还可以使用 Microsoft 的“安全”功能。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2015-11-02T04:25:12.197

对于我的问题，我删除了该 `#include <glui.h>`语句，它运行没有问题。

# c - C、C++ 中的指针

> ID：12204124
> 
> 赞同：2
> 
> 时间：2012-08-30T19:31:45.707
> 
> 标签：c, pointers

这两个是等价的吗？

```
int a=10;
int *p=a; 

AND

int a=10;
int *p;
p=&a; 
```

在这两种情况下 p 都持有 a 的地址吗！？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:35:55.977

在第一种情况下， 的值`a`被复制到`p`（其中存储了一个地址），因此`p`指向地址 10。

在第二种情况下，`p`指向 的地址`a`。

还有第三种情况：

```
int a = 10;
int *p = malloc(sizeof(int));
*p = 10; 
```

在这种情况下， 的值被复制到（由 保留）`a`所指向的地址中`p``malloc()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T19:40:58.860

在第一种情况下

```
int a=10;
int *p=a; 
```

将变量 a 中包含的值放入变量 p 中。所以变量 p 的值为 10。

在第二种情况下

```
int a=10;
int *p;
p=&a; 
```

变量a的值为10，变量p的值为a的地址。

在第一种情况下，即使变量 p 被声明为指向 int 的指针，放入变量 p 的值也是变量 a 的值，值为 10。在第二种情况下，您将放入变量的地址a 到变量 p 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T19:39:47.167

只有第二种情况在技术上是正确的。在第一种情况下，您将of的*值*`a`分配给 `p˙，因此您将整数分配给指针 - 它可能有效，但并非必须如此。

在第二种情况下，您正确地将`a`to的地址`p`，即 an分配`int *`给一个`int`变量 - 这很好。

请注意，即使将变量声明为指针，编译器也不会自动获取右侧表达式的地址（因为在某些情况下它根本没有意义，例如使用指针文字...... )

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T19:52:02.033

尝试：

```
int main()
{
    int a=10;
    int *p=a; 
} 
```

然后编译：

```
> g++ test.cpp
test.cpp: In function ‘int main()’:
test.cpp:4: error: invalid conversion from ‘int’ to ‘int*’ 
```

所以不是有效的 C++，因为 a 不是指针。C 在类型信息上稍微宽松一点将允许这样做。但你确实得到了你所要求的。的值`p`是`a`（10）的值。指向地址 10 的指针也是如此`p`（这是否是有效地址是实现定义的）。

第二个版本在两种语言中都有效。
因为您获取了 的地址，`a`因此类型对于分配给 . 是正确的`p`。结果是`p`指向`a`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T16:13:09.713

第一种情况不正确，因为指针应该有一些地址指向，然后值应该去那个地址。在第一种情况下，值转到未指向的地址，因此出现错误。

In the Second case the pointer starts pointing at the variable's address in the start. Hence it points to the address containing the value which is correct.

# mysql - 将 2 个表连接成单个查询结果

> ID：12204126
> 
> 赞同：0
> 
> 时间：2012-08-30T19:31:50.780
> 
> 标签：mysql, sql

在查询方面需要一些帮助。我在数据库、联系人和任务中有 2 个表。

```
mysql> describe contacts;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| contact_id | int(11)      | NO   | PRI | NULL    | auto_increment |
| last_name  | varchar(100) | YES  |     | NULL    |                |
| first_name | varchar(100) | YES  |     | NULL    |                |
| email      | varchar(50)  | YES  |     | NULL    |                |
| phone      | varchar(20)  | YES  |     | NULL    |                |
| school_id  | varchar(12)  | NO   |     | NULL    |                |
| access     | char(1)      | YES  |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+

mysql> describe tasks;
+-------------------+--------------+------+-----+---------+----------------+
| Field             | Type         | Null | Key | Default | Extra          |
+-------------------+--------------+------+-----+---------+----------------+
| task_id           | int(11)      | NO   | PRI | NULL    | auto_increment |
| task_name         | varchar(125) | YES  |     | NULL    |                |
| task_date         | date         | YES  |     | NULL    |                |
| task_description  | text         | YES  |     | NULL    |                |
| contact_id1       | int(11)      | YES  |     | NULL    |                |
| contact_id2       | int(11)      | YES  |     | NULL    |                |
| contact_id3       | int(11)      | YES  |     | NULL    |                |
| contact_id4       | int(11)      | YES  |     | NULL    |                |
| contact_id5       | int(11)      | YES  |     | NULL    |                |
| contact_id6       | int(11)      | YES  |     | NULL    |                |
| completed         | char(1)      | YES  |     | NULL    |                |
+-------------------+--------------+------+-----+---------+----------------+ 
```

我想从任务表中获取信息，但我想用匹配的contact_id 中的一些字段替换contact_id1-contact_id6。我一直在搞乱嵌套的选择语句，这些语句可以工作但非常混乱。似乎必须有一种更清洁的方法来做到这一点。我以为我有这个，

```
SELECT tasks.task_id, tasks.task_name, tasks.reminder_time, tasks.reminder_interval, CONCAT (contact_1.first_name, " ", contact_1.last_name) as contact_1_name, CONCAT(contact_2.first_name, contact_2.last_name) as contact_2_name, CONCAT(contact_3.first_name, contact_3.last_name) as contact_3_name
FROM tasks
JOIN contacts contact_1 ON tasks.contact_id1 = contact_1.contact_id
JOIN contacts contact_2 ON tasks.contact_id2 = contact_2.contact_id
JOIN contacts contact_3 ON tasks.contact_id3 = contact_3.contact_id 
```

但我在这里的问题是，它没有显示任何 contact_id1-contact_id6 的值的值为 0 的任务，如果没有为它设置 contact_id，这是默认值。

你能提供的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:47:38.547

您可以制作一个确实规范化任务表的视图，然后连接将很容易。您可以制作永久视图或仅用于选择。

该视图需要以某种方式成为一个 UNION

```
SELECT task_id, task_name, task_description, contact_id1 as contact_id, completed from tasks
UNION ALL
SELECT task_id, task_name, task_description, contact_id2              , completed from tasks
UNION ALL
SELECT task_id, task_name, task_description, contact_id3              , completed from tasks
UNION ALL
SELECT task_id, task_name, task_description, contact_id4              , completed from tasks
UNION ALL
SELECT task_id, task_name, task_description, contact_id5              , completed from tasks
UNION ALL
SELECT task_id, task_name, task_description, contact_id6              , completed from tasks 
```

那么它看起来像这样

```
WITH tasks_easy as (    
    SELECT task_id, task_name, task_description, contact_id1 as contact_id, completed from tasks
    UNION
    SELECT task_id, task_name, task_description, contact_id2              , completed from tasks
    UNION
    SELECT task_id, task_name, task_description, contact_id3              , completed from tasks
    UNION
    SELECT task_id, task_name, task_description, contact_id4              , completed from tasks
    UNION
    SELECT task_id, task_name, task_description, contact_id5              , completed from tasks
    UNION
    SELECT task_id, task_name, task_description, contact_id6              , completed from tasks
 )
 select *
 from   tasks_easy t
 join   contacts c   on (t.contact_id = c.contact_id) 
```

尚未对此进行测试，但应该像这样工作。

编辑：实际上正在考虑它。UNION ALL，至少对于临时视图是没有必要的。如果您的桌子真的很大，可能会给您带来一些时间改进。

# opengl - OpenGL depth buffer to texture (for various image sizes)

> ID：12204128
> 
> 赞同：1
> 
> 时间：2012-08-30T19:31:54.547
> 
> 标签：opengl, texture2d, depth-buffer

I'm having a problem with the depth buffer. I want to put into a texture. But it doesn't seem to work.

So, here's the piece of code I execute after rendering the objects:

```
 glGenTextures(1, (GLuint*)&_depthTexture);
  glBindTexture(GL_TEXTURE_2D, _depthTexture);

  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
  glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);

  const pair<int, int> &img_size = getImageSize();
  glTexImage2D( GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT32, img_size.first, img_size.second, 0, GL_DEPTH_COMPONENT, GL_FLOAT, 0);
  glCopyTexSubImage2D(GL_TEXTURE_2D, 0, 0, 0, 0, 0, img_size.first, img_size.second);

  glClear( GL_DEPTH_BUFFER_BIT ); 
```

The thing is (I'm with OpenGL 3.2+), the image for rendering has different size. Most of the time, it won't be a 2^i by 2^j for the size. So, is that a problem ?

Also, the other part of the problem might be in the fragment shader after:

```
#version 140

uniform sampler2D depthTexture;
uniform ivec2 screenSize;

out vec4 outColor;

void main()
{
    vec2 depthCoord = gl_FragCoord.xy / screenSize.xy;
    float d = texture2D(depthTexture, depthCoord).x;
    outColor =  vec4(d, d, d, 1.0);
} 
```

After that, when I render a second time some shapes, I want to use the previous depth (the texture depth buffer), to do some effects.

But seriously... can anyone just show me a piece of code where you can get the depth buffer into a texture? I don't care if it's rendering to the texture or if the texture is extracted after the rendering! As long as I have a texture with the depth value to do the second pass... that's what is important!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T17:52:55.427

[http://www.joeforte.net/projects/soft-particles/](http://www.joeforte.net/projects/soft-particles/)

这可能是一个很好的解决方案！

至少，它是完整的代码......也许能够得到所有不同的部分！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:28:10.770

你可能需要一个`glReadBuffer`电话。如果您的上下文是双缓冲的，那将是`glReadBuffer( GL_BACK )`.

另外，请尝试`GL_DEPTH_COMPONENT24`，因为我认为 32 位深度缓冲区是不寻常的。

# java - 启动 ejb bean 不工作

> ID：12204130
> 
> 赞同：14
> 
> 时间：2012-08-30T19:31:55.840
> 
> 标签：java, jboss, ejb, cdi

我正在尝试使用启动 ejb 在启动时做一些事情。但是我的 bean 从来没有被调用过。

这是我的豆子：

```
import javax.annotation.PostConstruct;
import javax.ejb.Startup;
import javax.inject.Singleton;

@Singleton
@Startup
public class StartupBean {

    @PostConstruct
    public void doSomething(){
        System.out.println("why??");
    }

} 
```

我正在使用 jboss 7.1.1。

我究竟做错了什么？您可以在 bitbucket 找到我的源代码：[https ://bitbucket.org/cremersstijn/jee/src/9e22ed2b798a/simple-startup-bean](https://bitbucket.org/cremersstijn/jee/src/9e22ed2b798a/simple-startup-bean)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-30T20:47:08.370

您正在导入错误的单例。如果要创建单例会话 bean，请使用 javax.ejb.Singleton。

[http://docs.oracle.com/javaee/6/api/javax/ejb/Singleton.html](http://docs.oracle.com/javaee/6/api/javax/ejb/Singleton.html) 与 [http://docs.oracle.com/javaee/6/api/javax/inject/Singleton.html](http://docs.oracle.com/javaee/6/api/javax/inject/Singleton.html)

# java - Declaring an object that implements an interface

> ID：12204131
> 
> 赞同：0
> 
> 时间：2012-08-30T19:31:56.970
> 
> 标签：java, class, generics, interface, implements

I'm trying to declare an object which must implement a specific interface. I thought the following would work in Java as it does in some other languages but I'm at a loss here:

```
Class<? implements **theInterface**> implementingObject 
```

Any pointers would be appreciated

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T19:33:23.817

对于泛型，无论它是类还是接口，都使用“扩展”。

```
Class<? extends **theInterface**> implementingObject 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:50:38.107

您在这里声明的不是实现接口的对象，而是实现该接口的对象的**类**。实现接口的对象被简单地声明为接口类型，即

```
theInterface implementingObject; 
```

# c# - Which code is better: using "as" or "is"?

> ID：12204132
> 
> 赞同：1
> 
> 时间：2012-08-30T19:31:57.307
> 
> 标签：c#, syntax, casting, operators

> **Possible Duplicate:**
> [Casting vs using the 'as' keyword in the CLR](https://stackoverflow.com/questions/496096/casting-vs-using-the-as-keyword-in-the-clr)
> [C#: “is” vs “as”](https://stackoverflow.com/questions/2027946/c-is-vs-as)

This code:

```
 if (sheet.Models.Data is GroupDataModel)
    {
        GroupDataModel gdm = (GroupDataModel)sheet.Models.Data; 
```

and this code:

```
 GroupDataModel gdm = sheet.Models.Data as GroupDataModel;
    if (gdm != null)
    { 
```

Do you recommend any of the two styles above over the other one?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:33:59.880

后者是 FxCop 提倡的，因为演员只需要执行一次 (the `as`)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T19:33:49.887

我认为它更好，因为它可以转换以及您可以轻松检查..第二个很好

有关此的更多信息：[**对象的显式和隐式转换以及“is”和“as”关键字在显式转换中的作用**](http://pranayamr.blogspot.ca/2010/12/explicit-and-implicit-casting-of-object.html)

as 和 is 的区别

*   as 运算符将一种类型转换为另一种类型，如果转换失败则返回 Null。如果它是可转换的，则无需再次转换。

*   is 运算符检查天气一个对象是否可以转换为另一种类型，如果不是则返回 false。因此，如果它可转换，则需要将对象转换为基本类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T19:48:22.907

有趣的是，这两个版本在这种情况下产生了相同的 IL：

**代码**：

```
void Main() {
    Class1 inst1 = new Class1();
    ((inst1 as Class1) != null).Dump();

    Class1 inst2 = new Class1();
    (inst2 is Class1).Dump();
}

class Class1 { } 
```

**伊利诺伊**：

```
IL_0001:  newobj      UserQuery+Class1..ctor
IL_0006:  stloc.0     
IL_0007:  ldloc.0     
IL_0008:  ldnull      
IL_0009:  ceq         
IL_000B:  ldc.i4.0    
IL_000C:  ceq         
IL_000E:  call        LINQPad.Extensions.Dump
IL_0013:  pop         
IL_0014:  newobj      UserQuery+Class1..ctor
IL_0019:  stloc.1     
IL_001A:  ldloc.1     
IL_001B:  ldnull      
IL_001C:  ceq         
IL_001E:  ldc.i4.0    
IL_001F:  ceq         
IL_0021:  call        LINQPad.Extensions.Dump

Class1..ctor:
IL_0000:  ldarg.0     
IL_0001:  call        System.Object..ctor
IL_0006:  ret 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T20:27:07.487

如果以后要使用类型化的对象，请使用“ `as`”。

如果您不打算将对象与类型本身一起使用，请使用“ `is`”。

如果您期望这些对象属于该特定类型，那将是另一个问题。然后只需使用 cast 并让它抛出异常，如果类型不是你所期望的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T19:34:18.073

首选第二个版本。

第二个版本只需要一次型式测试。如果测试成功，第一个需要两次类型测试（首先`is`是演员，然后是演员）。

# ios - Setting strong references objects to nil with ARC enabled?

> ID：12204135
> 
> 赞同：0
> 
> 时间：2012-08-30T19:32:01.553
> 
> 标签：ios, xcode, automatic-ref-counting, weak-references, strong-references

I am developing an iPhone app with ARC option enabled. i am creating IBOutlets in .h files which are connected from file owners icon to .xib elements.for eg.

```
IBOutlet UIButton *bt;
@property(nonatomic,retain)IBOutlet UIButton *bt; 
```

in .m file, i am doing

```
@synthesize bt; 
```

Is there a need to explicitly set `bt` to nil in `viewDidUnload` method? i.e. `self.bt = nil;` in `viewDidUnload`?

Also, do I need to write `dealloc` method with ARC option enabled? When should I make IBOutlets elements as strong and weak references with ARC enabled?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:36:28.187

需要将您的出口设为零`viewDidUnload`和`dealloc`

拥有 ARC 意味着您不需要在`dealloc`方法中编写它（它会自动完成），但是该`viewDidUnload`方法还有另一个目的，它是在发生内存警告时释放应用程序未使用的内存。 `dealloc`在某些情况下仍然需要，例如，当您的班级注册通知时，或者当您的班级是其他人的代表并且您不希望某些故障回调给您带来不好的访问权限时

当您收到内存警告时，所有`UIViewControllers`未显示的将卸载他们的视图并调用该方法以释放内存。如果您仍然保留插座（如按钮、表格等），它们将不会被释放，因此会破坏 viewDidUnload 方法的用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T19:39:12.410

使用 ARC 时，不需要使用诸如`retain`or之类`copy`的修饰符。这种内存管理是使用`strong`and`weak`修饰符自动完成的。

您也不必担心编写`dealloc`方法。

`strong`相当于*，*所以`retain`你应该用它标记你的出口

```
@property(nonatomic, strong) IBOutlet UIButton *bt; 
```

这就是界面生成器默认创建它们的方式。

我不会详细介绍它们的语义差异，但是如果您想知道发生了什么并阅读有关修饰符和修饰符的细节，您真的应该看看[Apple 的关于过渡到 ARC 的指南。](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)`strong``weak`

**编辑：** 对不起，界面生成器默认创建插座`weak`。

**编辑 2：** 确实是 100% 相同的`strong`。`retain`（感谢@Adam）

**编辑3：** 您将指针设置`nil`为避免出现任何`message sent to deallocated instance`错误`BAD_ACCESS_EXCEPTION`。

如果您实际上正在使用 ARC，则应该制作插座`(nonatomic, weak)`而不是`(nonatomic, strong)`. 通过使用`weak`归零指针，编译器所做的就是`nil`在没有其他东西引用它们时自动将您的出口设置为。

所以，总结一下，如果你**不**使用`weak`属性，你*应该*将你的指针设置为 nil。

# django - STATIC_ROOT in Django on Server

> ID：12204136
> 
> 赞同：7
> 
> 时间：2012-08-30T19:32:03.920
> 
> 标签：django, url, deployment, django-staticfiles, webfaction

I'm 2hours stuck in a issue about STATIC_URL and STATIC_ROOT when I try to make run the webapp on my server at webfactional.

when I load the webpage all the requests works well, except by the fact that any link with {{ STATIC_URL}} is working or loading.

So a common error that appears on firebug is:

```
GET http://mydomain/static/extras/h5bp/js/libs/modernizr-2.5.3.min.js 500 (Internal Server Error) 
```

My setup is:

urls.py I did nothing, and there's nothing about static files.

settings.py DEBUG = False

```
STATIC_ROOT = '/home/mydomain/webapps/static_app/'
STATIC_URL = 'http://mydomain/static/'
STATICFILES_DIRS = () 
```

views.py view example

```
@csrf_exempt
def IndexView(request):
    try:
        request.user.is_authenticated() 
    except  AttributeError:
        return render_to_response('index.html',
                              {'request': request,},
                              context_instance=RequestContext(request))

    return render_to_response('index.html',
                  {'request': request, 'profile' : request.user},
                  context_instance=RequestContext(request)) 
```

index.html a part of code not found

```
<script src="{{ STATIC_URL }}extras/h5bp/js/libs/modernizr-2.5.3.min.js"></script> 
```

well, I follow all the points of: [https://docs.djangoproject.com/en/1.4/howto/static-files/](https://docs.djangoproject.com/en/1.4/howto/static-files/) and this another one: [http://docs.webfaction.com/software/django/getting-started.html](http://docs.webfaction.com/software/django/getting-started.html)

I'm using the correct installed apps, middlewares, template_contexts.

If I'm missing something please help me to figure out.

Thanks in advance!

--edit

I have to say, if I just change the DEBUG = True will works fine.

because on urls.py I have this piece of code:

```
if settings.DEBUG:
    # static files (images, css, javascript, etc.)
    urlpatterns += patterns('',
        (r'^media/(?P<path>.*)/$', 'django.views.static.serve', {
        'document_root': settings.MEDIA_ROOT})) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T19:57:25.320

在开发环境中不需要的生产环境中必须发生 2 件事。

您必须运行`manage.py collectstatic`- 这会将所有静态文件收集到您的`STATIC_ROOT`目录中。

您必须在url提供您的`STATIC_ROOT`目录。`STATIC_URL`具体如何取决于您的生产设置。这甚至与 django 无关；重要的是`STATIC_ROOT`内容可在`STATIC_URL`.

假设您使用的是 Apache，您会将 URL 别名为目录。

```
Alias /static/ /path/to/my/static_root/ 
```

如果您使用的是 nginx，则类似于

```
location = /static/ {
    alias /path/to/my/static_root/;
} 
```

我刚刚意识到您正在使用 webfaction，在这种情况下，您设置了一个静态应用程序，该应用程序实际上只是在您定义的 URL 的目标目录中提供文件。我正在尝试记住我的 webfaction 登录以查看确切的过程，但这应该不难弄清楚。

更新：登录webfaction；您可以创建一个符号链接的应用程序。简单的！

创建一个服务于 /YOUR_STATIC_URL/ 的符号链接应用程序并将其指向 /YOUR_STATIC_ROOT/。完毕！

# java - Jaxb/JSON reponse with field containing existing JSON array

> ID：12204138
> 
> 赞同：0
> 
> 时间：2012-08-30T19:32:09.690
> 
> 标签：java, json, jaxb, jersey, marshalling

I have a pojo with a field that contains JSON array and jaxb wraps this data as a string is there any way to overcome this problem without umarshalling and marshalling the json content and without using a custom message writer? or ca i define a custom writer in a field with some annotation?

```
@XmlRootElement
public class TestPojo{
   String name;
   String list;
   @XmlElement(name="name")    
   public String getName(){
       return this.name;
   }
   @XmlElement(name="data")
   public String getData(){
       return this.data;
   }

} 
```

data is an existing json array in string format

so i want to expose it as JSON

```
{
 "name":"My Name",
 "data":[{"el":"aname"}, {"el":"aname2"}]
} 
```

Instead of

```
 "data":"[{"el":"aname"}, {"el":"aname2"}]" 
```

# crm - Integrate Asana into Microsoft CRM platforms

> ID：12204140
> 
> 赞同：1
> 
> 时间：2012-08-30T19:32:34.037
> 
> 标签：crm, asana

Asana looks like it is easy to use and extremely fast.

My company currently uses the slow and terrible Microsoft CRM, would it be possible to use Asana as the front end and send the inputted data to the MS CRM database?

I understand that a MS API is most likely needed as well, however does Asana have the capabilities?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:02:43.177

简短的回答是肯定的，有可能做到这一点，两种产品都有能力做你描述的事情。不过，Asana 的 API 相当新，因此您可能会有一些初始限制；但根据我怀疑你想做的事情，它应该足够了。

但是，除非你有一个非常敏捷和具有前瞻性的 IT 团队，否则我认为他们不会想要建立或支持这个。如果他们灵活且具有前瞻性思维，您可能不会使用 Microsoft CRM（或者至少不会很慢）。

# javascript - Custom widgets in AngularJS

> ID：12204142
> 
> 赞同：0
> 
> 时间：2012-08-30T19:32:39.257
> 
> 标签：javascript, html, pug, angularjs

I have a list of HTML widgets which are created dynamically from server data like this (Jade):

```
.area(ng-repeat="widget in widgetsList.widgets")
    h3 {{widget.title}}
    p {{widget.type}}
    span {{widget.data}} 
```

Widgets are not of the same structure and I don't want to show them visually equal because each of them represents its own functionality. The paragraph in the end of the example just puts data json as a string that I obviously need to render as a proper html widget according to its type that looks like 'important-messages-widget' or 'recent-events-widget'.

Angular looks pretty good but lacks of detailed documentation. How should I manage this case?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:20:58.907

在 Angular 中，有两个内置指令真正让 Angular 变得强大。

1.  ng-repeat（您已经在使用）

2.  ng-switch 这似乎最常被大多数开发人员误解或不理解或类似的东西。它为您提供了在 html 中使用普通编程语言的 switch 语句的强大功能。

[http://docs.angularjs.org/api/ng.directive:ngSwitch](http://docs.angularjs.org/api/ng.directive:ngSwitch)

它的文档应该为您提供一个很好的起点。结合 ngSwitch 和 ng-repeat 会给你一种非常强大的方式来表示你的视图。

```
<div ng-switch on="widget.type" >
    <div ng-switch-when="important-messages-widget">Important Message</div>
    <div ng-switch-when="recent-events-widget">Recent Events ---add more html here </div>
</div> 
```

希望这可以帮助。

# c - setjmp 标准定义的备注

> ID：12204143
> 
> 赞同：4
> 
> 时间：2012-08-30T19:32:47.417
> 
> 标签：c

**ISO/IEC 9899:1999**

> **7.13.1.1 setjmp 宏**
> 
> 环境限制 4 setjmp 宏的调用应仅出现在以下上下文之一中： — 选择或迭代语句的整个控制表达式；— 关系或相等运算符的一个操作数与另一个操作数为整数常量表达式，结果表达式是选择或迭代语句的整个控制表达式；— 一元的操作数！运算符，其结果表达式是选择或迭代语句的整个控制表达式；或 — 表达式语句的整个表达式（可能强制转换为 void）。

因此，使用 setjmp 的唯一变体如下：

```
if (setjmp(buf))
while (setjmp(buf))
for (;; setjmp(buf))

if (setjmp(buf) == 0)
while (setjmp(buf) == 0)
for (;; setjmp(buf) == 0)

if (!setjmp(buf))
while (!setjmp(buf))
for (;; !setjmp(buf))

setjmp(buf);
(void)setjmp(buf); 
```

而且我们不能使用以下语句：

```
int foo = setjmp(buf);
foo = setjmp(buf); 
```

对？他们所说的迭代语句是什么意思？for 循环的最后一条语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:04:35.980

不，你不能使用

```
int foo = setjmp(buf);
foo = setjmp(buf); 
```

后面（赋值）的原因可能是赋值是一个表达式，它可以不仅仅是左侧的标识符。如果左侧是左值表达式，则标准不规定评估子表达式的顺序。所以如果你有

```
int* f(void);
*f() = setjmp(buf); 
```

`*f()`并且`setjmp(buf)`可以按任何顺序进行评估。由于`setjmp`对抽象状态机的实际状态进行了快照，因此两个命令的语义将完全不同。

我认为，对于第一行（初始化），这个问题不会发生。所以我想这可以作为有效用途添加。但是，如果没有边界案件仍然需要对左侧进行评估，则必须仔细讨论。

（埃里克已经回复了选择声明。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T19:39:03.143

选择语句是`if`（包括`if…else`）和`switch`。迭代语句是`while`、`do…while`和`for`。

# forms - access vba DoCmd.OpenForm "Action was canceled"

> ID：12204147
> 
> 赞同：3
> 
> 时间：2012-08-30T19:33:01.093
> 
> 标签：forms, ms-access, parameter-passing, vba

```
Private Sub OccurrenceName_AfterUpdate()
If OccurrenceName.Value = "Other" Then
    Dim strTechID As String
    Dim strOccurrenceCt As String
    Dim strOccurrenceDate As String

    strTechID = Me.Parent.tbxTechID.Value
    strOccurrenceCt = Forms![frmEmployeeOccurrenceInput]![tbxOccurrence].Value
    strOccurrenceDate = Me.OccurrenceDate.Value

    Dim strOpenArgs As String
    strOpenArgs = strTechID & "|" & strOccurrenceCt & "|" & strOccurrenceDate

    DoCmd.OpenForm "frmOtherOccurrence", , , , , , strOpenArgs
Else
    Me.OccurrenceAmt = Me.OccurrenceName.Column(1)
    Me.Type = Me.OccurrenceName.Column(2)
End If
End Sub 
```

Every time it runs I get "The Open Form action was canceled" with an error code of 2501\. The line it gets caught on is the `DoCmd.OpenForm` call. Debugging give NO additional information.

Here is where the `OpenArgs` is passed to:

```
Private Sub Form_Load()

Dim aryOA As Variant

aryOA = Split(Me.OpenArgs, "|")

Me.lblTechID.Caption = aryOA(0)
Me.lblOccurrenceCt.Caption = aryOA(1)
Me.lblOccurrenceDate.Caption = aryOA(2)

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:30:23.593

我不知道这是否是您的问题，但是您不能将 OpenArgs 传递给打开的表单，并且打开我的意思是它甚至不能处于编辑模式，应该完全关闭。

否则，表单将打开（将其状态从编辑模式更改为正常）但不会传递任何 OpenArgs，因此 OpenArgs 将为 null 并引发异常。

# ios - 如何判断您的 iPhone 音频何时被重新路由到外部设备？

> ID：12204153
> 
> 赞同：1
> 
> 时间：2012-08-30T19:33:25.630
> 
> 标签：ios, core-audio, external-accessory

我想在我的 iPhone 的音频被重新路由到另一台设备时收到通知，比如我是否将它连接到外部 Hi-fi 系统（MFi 设备）。换句话说，当音频发生时，我如何检测音频是从我的 iPhone 还是从另一台设备播放？

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T23:20:30.700

阅读[Apple 的音频会话文档](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingRouteChanges/HandlingRouteChanges.html#//apple_ref/doc/uid/TP40007875-CH12-SW1)，了解如何请求和处理音频会话路由更改通知，以及可能的音频通知类型。

# git - GIT 扩展不连接到远程，但 git bash 可以

> ID：12204162
> 
> 赞同：2
> 
> 时间：2012-08-30T19:33:52.767
> 
> 标签：git, git-extensions

我实际上连接到远程存储库，并且可以使用 git bash 但不使用[gitextensions](http://code.google.com/p/gitextensions/)这样做。

git bash 询问我的密码，但 GIT 扩展没有。有谁知道为什么会这样？

这是来自 GIT bash，它要求我输入密码，而 GIT 扩展不要求我输入密码。

```
$ git pull http://vkaul@stash.int.linz.jumio.com/git/OCR/ocr.git
Password for 'http://vkaul@stash.int.linz.jumio.com': 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T16:34:41.757

试试这个：

1.  打开 Git 扩展主窗口
2.  转到设置 -> 设置
3.  在“清单”上，“已安装 Git 凭据助手”是绿色还是红色？
4.  如果是红色，请单击修复按钮。

这为我修好了。我正在使用 Git 扩展 2.44 版

# php - 邮政编码格式的 PHP 语言环境设置

> ID：12204165
> 
> 赞同：2
> 
> 时间：2012-08-30T19:34:00.377
> 
> 标签：php, linux, localization, internationalization, locale

我正在尝试使用使用 PHP 的 Linux 中的语言环境设置来验证一个非常国际化的站点的邮政编码。如果它有效，它将为我节省大量时间。我检查了已安装语言环境中的 LC_ADDRESS 设置，发现每种语言/市场都有验证模式。

```
locale -c LC_ADDRESS 
```

如何使用 PHP 访问这些信息？localeconv() 不包含任何有关本地地址验证的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:19:40.107

似乎没有人真正做到这一点。我猜想`localeconv()`真正阅读整个内容需要改进 PHP 函数，这将是对他们的功能请求。

与此同时，我得到了从[http://i18napis.appspot.com/address](http://i18napis.appspot.com/address)获取数据的建议 ，它实际上包含与区域设置 LC_ADDRESS 和 LC_PHONE 相同的信息，所以我很好，即使这意味着要多做一些传出 HTTP 调用。

# javascript - 带有 .css() 连接问题的 jQuery 变量？

> ID：12204167
> 
> 赞同：4
> 
> 时间：2012-08-30T19:34:11.393
> 
> 标签：javascript, jquery

我正在尝试更改模糊按钮的 CSS。我怀疑这可能是一个串联问题，但我无法弄清楚我做错了什么。这是我的代码...

**HTML**

```
<input type="text" value="blue" id="textinput">
<button>Button</button>
<span id="color">red</span> 
```

**CSS**

```
button {
 background-color:blue;
 background-image: -webkit-linear-gradient(top, white 0%, black 100%);    
} 
```

**jQuery**

```
$("#textinput").blur(function () {
     setTimeout(function () {
          endColor = $("#textinput").val();
          $('button').css({ 
              'background-color' : endColor
              'background-image' : '-webkit-linear-gradient(top, #309ACB 0%,' + endColor + '100%)'       });
     }, 500);
});​ 
```

**小提琴链接**

[http://jsfiddle.net/krishollenbeck/p2jah/20/](http://jsfiddle.net/krishollenbeck/p2jah/20/)

当我删除渐变 CSS 时它工作正常。所以我猜我连接变量是错误的。但是我已经尝试了多种方法，但似乎无法弄清楚。这可能是非常明显的事情。

还要注意。我正在使用 webkit 渐变，所以在 chrome 或 safari 中进行测试。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T19:36:12.293

您在保存颜色的变量和百分比字符串之间缺少**空格。**

```
'-webkit-linear-gradient(top, #309ACB 0%,' + endColor + ' 100%)'
                                                        ^
                                                        |
                                                        +-- Here 
```

调试这种情况的一个好方法是使用`console.log`查看连接字符串的结果。例如，在这种情况下，您会得到`red100%`而不是`red 100%`.

恕我直言，一种不太容易出错的替代方法是使用`String.format()`. 这样，您可以（更）清楚地看到您是否遗漏了什么：

```
'-webkit-linear-gradient(top, #309ACB 0%, {0} 100%)'.format(endColor) 
```

[注意有些浏览器不支持这个函数，但是你可以使用[这个](https://stackoverflow.com/a/1038930/140816)pollyfill 来定义它。]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T19:37:09.620

您缺少逗号和空格（请参阅 Joao 的回答）

```
$("#textinput").blur(function () {
     setTimeout(function () {
          endColor = $("#textinput").val();
          $('button').css({ 
              'background-color' : endColor, // < here        -> this way too               v here
              'background-image' : '-webkit-linear-gradient(top, #309ACB 0%,' + endColor + ' 100%)'       });
     }, 500);
});​ 
```

# objective-c - NSMutableArray 作为全局变量导致崩溃

> ID：12204169
> 
> 赞同：0
> 
> 时间：2012-08-30T19:34:22.363
> 
> 标签：objective-c, arrays, nsmutablearray

我在 .h 文件中有以下内容作为全局变量

```
NSMutableArray *garr; 
```

以及 .m 文件中的以下内容

```
- (void)roundone {
    if (!garr) {
        garr = [[NSMutableArray alloc]init];
        for (int x = 0; x < 900; x++) {
            [garr addObject:[NSNumber numberWithInt: arc4random()%600]];        
        }
    }
} 
```

以任何方法调用 var garr 的问题但是它正确返回 nslog 中的值但是当我在代码中使用 garr 时系统崩溃！！！任何想法请

```
-(IBAction)clicked:(id)sender{ 
NSLog(@"%@",garr);
//bubbleSort(array);    // sort the array
int n = [garr count]  ;
for (int i = 0; i < n-1; i++)
    for (int j = 0; j < n-i-1; j++)
        if ([[garr objectAtIndex: j] compare:[garr objectAtIndex: j+1]] == 
            NSOrderedDescending)
            //#define SWAP(arr, x, y) 
            do {    
                id oldX = [garr objectAtIndex: (j)];    
                // NSLog(@"%d %s",oldX ,oldX);
                [garr replaceObjectAtIndex: (j) withObject: [garr objectAtIndex: (j+1)]];
                [garr replaceObjectAtIndex: (j+1) withObject: oldX];    
            } while (0);

NSString *element;
NSEnumerator *iterator = [garr objectEnumerator];
while ((element = [iterator nextObject]) != nil)
    NSLog(@"elments %@",element); 
```

我没有使代码中的事情复杂化，但是当全局变量在方法内部时代码可以正常工作，但是当方法外部的 garr 时代码不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:47:36.243

您应该在标头中*声明*全局变量，而不是*定义*它们。标记变量`extern`，将定义放入`.m`文件中，并将变量初始化为`nil`。

标题：

```
extern NSMutableArray *garr; 
```

.m 文件：

```
NSMutableArray *garr = nil; 
```

重建一切，崩溃应该被消除。

# sql - 在R中的表中选择行的快速方法？

> ID：12204171
> 
> 赞同：7
> 
> 时间：2012-08-30T19:34:38.313
> 
> 标签：sql, r, row, data.table, sqldf

我正在寻找一种从更大的表中提取大量行的快速方法。我的表的顶部如下：

```
> head(dbsnp)

      snp      gene distance
rs5   rs5     KRIT1        1
rs6   rs6   CYP51A1        1
rs7   rs7 LOC401387        1
rs8   rs8      CDK6        1
rs9   rs9      CDK6        1
rs10 rs10      CDK6        1 
```

和尺寸：

```
> dim(dbsnp)
[1] 11934948        3 
```

我想选择行名包含在列表中的行：

```
> head(features)
[1] "rs1367830" "rs5915027" "rs2060113" "rs1594503" "rs1116848" "rs1835693"

> length(features)
[1] 915635 
```

毫不奇怪，这样做的直接方法`temptable = dbsnp[features,]`需要*相当*长的时间。

我一直在寻找通过 R 中的 sqldf 包执行此操作的方法。我认为这可能会更快。不幸的是，我不知道如何在 SQL 中选择具有特定行名的行。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T19:53:55.657

`data.table`解决方案：

```
library(data.table)
dbsnp <- structure(list(snp = c("rs5", "rs6", "rs7", "rs8", "rs9", "rs10"
), gene = c("KRIT1", "CYP51A1", "LOC401387", "CDK6", "CDK6", 
"CDK6"), distance = c(1L, 1L, 1L, 1L, 1L, 1L)), .Names = c("snp", 
"gene", "distance"), class = "data.frame", row.names = c("rs5", 
"rs6", "rs7", "rs8", "rs9", "rs10"))

DT <- data.table(dbsnp, key='snp')
features <- c('rs5', 'rs7', 'rs9')
DT[features]

   snp      gene distance
1: rs5     KRIT1        1
2: rs7 LOC401387        1
3: rs9      CDK6        1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T19:53:23.927

使用`sqldf`您将需要`rownames = TRUE`然后您可以使用以下方式查询行名`row_names`：

```
library(sqldf)

## input

test<-read.table(header=T,text="      snp      gene distance
rs5   rs5     KRIT1        1
rs6   rs6   CYP51A1        1
rs7   rs7 LOC401387        1
rs8   rs8      CDK6        1
rs9   rs9      CDK6        1
rs10 rs10      CDK6        1
")
features<-c("rs5","rs7","rs10")

## calculate

inVar <- toString(shQuote(features, type = "csh")) # 'rs5','rs7','rs10'

fn$sqldf("SELECT * FROM test t
          WHERE t.row_names IN ($inVar)"
           , row.names = TRUE)

## result
#      snp      gene distance
#rs5   rs5     KRIT1        1
#rs7   rs7 LOC401387        1
#rs10 rs10      CDK6        1 
```

更新：或者，如果`fet`是一个数据框，其`features`列包含要查找的所需项目：

```
fet <- data.frame(features)
sqldf("SELECT t.* FROM test t
          WHERE t.row_names IN (SELECT features FROM fet)"
           , row.names = TRUE) 
```

此外，如果数据足够大，我们可以使用索引加快速度。有关此内容和其他详细信息，请参见[sqldf 主页](http://sqldf.googlecode.com)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-30T19:41:34.907

大多数人最初尝试的方式是：

```
dbsnp[ rownames(dbsnp) %in% features, ]  # which is probably slower than your code 
```

因为你说这需要很长时间，我怀疑你已经超出了你的 RAM 容量并开始使用虚拟内存。您应该关闭系统，然后仅使用 R 作为正在运行的应用程序重新启动，看看是否可以避免“虚拟化”。

# android - 在地图上的标记上绘制不同的字符串

> ID：12204177
> 
> 赞同：0
> 
> 时间：2012-08-30T19:34:54.363
> 
> 标签：android, map, draw

我在地图视图上绘制了一些标记（来自一个可绘制对象），但我想在每个标记上显示不同的数字。

数字存储在一个数组中。我做了一个函数来在drawable上面写文本，这就是我所做的：

```
List<Overlay> mapOverlays = mapView.getOverlays();
GeoPoint geoPoint = null;
Drawable marker;
int size = addresses.length;

marker = writeOnDrawable(R.drawable.marker, "10");//my number to write here
itemizedOverlay = new ItemizedOverlay(marker, mapView);

for(int i = 0; i < size; i++) {
    geoPoint = new GeoPoint((int) (latitudes[i] * 1E6), (int) (longitudes[i] * 1E6));

    itemizedOverlay.addOverlay(new OverlayItem(geoPoint, addresses[i], ""));
}

mapOverlays.add(itemizedOverlay); 
```

但是，在这段代码中，我为所有标记显示相同的数字，我想使用我的数字数组为每个标记显示不同的数字。

这是否意味着我必须使用与数字一样多的 ItemizedOverlay？或者你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:46:12.440

我终于通过使用几个 ItemizedOverlay 让它工作了。我把它放在 for 循环的开头：

```
itemizedOverlay = new ItemizedOverlay(marker, mapView); 
```

最后也是这样：

```
mapOverlays.add(itemizedOverlay); 
```

在我的设备（GN）上一切正常，直到我在我得到这个的虚拟机上测试它：

```
09-02 09:36:56.335: E/dalvikvm-heap(231): 20424-byte external allocation too large for this process.
09-02 09:36:56.335: E/(231): VM won't let us allocate 20424 bytes
09-02 09:36:56.335: W/dalvikvm(231): threadid=3: thread exiting with uncaught exception (group=0x4001aa28)
09-02 09:36:56.335: E/AndroidRuntime(231): Uncaught handler: thread main exiting due to uncaught exception
09-02 09:36:56.386: E/AndroidRuntime(231): android.view.InflateException: Binary XML file line #2: Error inflating class java.lang.reflect.Constructor
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.LayoutInflater.createView(LayoutInflater.java:512)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:562)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.readystatesoftware.mapviewballoons.BalloonOverlayView.setupView(BalloonOverlayView.java:79)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.readystatesoftware.mapviewballoons.BalloonOverlayView.<init>(BalloonOverlayView.java:58)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay.createBalloonOverlayView(BalloonItemizedOverlay.java:151)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay.createAndDisplayBalloonOverlay(BalloonItemizedOverlay.java:284)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay.onTap(BalloonItemizedOverlay.java:126)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.google.android.maps.ItemizedOverlay.onTap(ItemizedOverlay.java:453)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.google.android.maps.OverlayBundle.onTap(OverlayBundle.java:83)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.google.android.maps.MapView$1.onSingleTapUp(MapView.java:346)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.GestureDetector.onTouchEvent(GestureDetector.java:506)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.google.android.maps.MapView.onTouchEvent(MapView.java:628)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.readystatesoftware.maps.TapControlledMapView.onTouchEvent(TapControlledMapView.java:62)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.View.dispatchTouchEvent(View.java:3672)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:850)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1712)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1202)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.app.Activity.dispatchTouchEvent(Activity.java:1987)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1696)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1658)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.os.Looper.loop(Looper.java:123)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.app.ActivityThread.main(ActivityThread.java:4203)
09-02 09:36:56.386: E/AndroidRuntime(231):  at java.lang.reflect.Method.invokeNative(Native Method)
09-02 09:36:56.386: E/AndroidRuntime(231):  at java.lang.reflect.Method.invoke(Method.java:521)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
09-02 09:36:56.386: E/AndroidRuntime(231):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
09-02 09:36:56.386: E/AndroidRuntime(231):  at dalvik.system.NativeStart.main(Native Method)
09-02 09:36:56.386: E/AndroidRuntime(231): Caused by: java.lang.reflect.InvocationTargetException
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.widget.LinearLayout.<init>(LinearLayout.java:92)
09-02 09:36:56.386: E/AndroidRuntime(231):  at java.lang.reflect.Constructor.constructNative(Native Method)
09-02 09:36:56.386: E/AndroidRuntime(231):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view.LayoutInflater.createView(LayoutInflater.java:499)
09-02 09:36:56.386: E/AndroidRuntime(231):  ... 35 more
09-02 09:36:56.386: E/AndroidRuntime(231): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:439)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:322)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:688)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.content.res.Resources.loadDrawable(Resources.java:1710)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.content.res.Resources.getDrawable(Resources.java:585)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:146)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:779)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.graphics.drawable.Drawable.createFromXml(Drawable.java:720)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.content.res.Resources.loadDrawable(Resources.java:1695)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.content.res.TypedArray.getDrawable(TypedArray.java:548)
09-02 09:36:56.386: E/AndroidRuntime(231):  at android.view 
```

正如我所担心的那样，它需要大量的记忆......有没有办法避免这种情况？你认为这也会发生在低内存设备上吗？

# ruby-on-rails - 尝试渲染模板并获取 ActionView::MissingTemplate

> ID：12204178
> 
> 赞同：0
> 
> 时间：2012-08-30T19:34:54.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是我尝试加载页面时看到的内容 ( `http://localhost:3000/analytics`)：

![在此处输入图像描述](../Images/e355292b691905e8c4119499df009b4f.png)

`_order_charts.html.erb`我的static_pages 目录中有一个名为的文件。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:37:06.180

```
<%= render 'static_pages/order_charts' %> 
```

或者

```
<%= render partial: 'static_pages/order_charts' %> 
```

您不需要包含下划线，rails 就是这样聪明的。

# r - ggplot 垂直对齐图例

> ID：12204179
> 
> 赞同：6
> 
> 时间：2012-08-30T19:34:54.817
> 
> 标签：r, ggplot2

我已经看了一段时间了。我的图例已超出图表区域。有没有办法在ggplot2中垂直证明图例？

```
library(ggplot2)
df <- data.frame(x = 1:30, y = 1:30, color = letters[1:30])
ggplot(df, aes(x, y)) +
    geom_point(aes(colour = color)) +
    guides(col = guide_legend(nrow = 30)) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-18T18:38:36.310

玩弄`legend.direction`("vertical"/"horizo​​ntal") 应该可以：

```
library(ggplot2)
df <- data.frame(x = 1:30, y = 1:30, color = letters[1:30])
ggplot(df, aes(x, y)) +
    geom_point(aes(colour = color)) +
    theme(legend.direction='horizontal') 
```

您可能还想将它与`legend.box`("horizo​​ntal"/"vertical") 结合使用。

如果要控制图例的绝对位置，添加：

```
theme(legend.direction = "vertical",
legend.box = "horizontal",
legend.position = c(0.025,0.975),
legend.justification = c(0, 1)) 
```

例如，将图例放置在图表的左上角。

# shell - 在远程 unix 服务器上运行命令

> ID：12204184
> 
> 赞同：0
> 
> 时间：2012-08-30T19:35:12.447
> 
> 标签：shell, unix

我正在编写一个 shell 脚本。它用于登录到另一个远程服务器检查文件是否存在，它不会创建，如果它没有任何反应。

我正在尝试通过 ssh -i private_key server_name 'script to create new file' 来做到这一点

在花了很长时间思考为什么它没有发生之后，它坚持认为我正在执行 ssh 的变量在它所在的服务器中将不可用。所以我必须传递一个变量。但我不能这样做。但是登录部分很流畅。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:12:38.747

如果可以更新文件的修改时间：

```
ssh -i keyfile server "touch '$newfile'" 
```

否则

```
ssh -i keyfile server "[ -f '$newfile' ] && touch '$newfile'" 
```

假设您的登录 shell 是 Bourne 类型的 shell，这些应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:41:34.547

使用双引号，或者如果某些部分需要单引号，请切换引号。

```
"foo $bar baz"
'foo '"$bar"' baz' 
```

# android - 在 MainActivity.finish() 和 MainActivity.onDestroy() 之后，android (glsurfaceview) 纹理是白色的

> ID：12204185
> 
> 赞同：2
> 
> 时间：2012-08-30T19:35:17.433
> 
> 标签：android, screen, glsurfaceview, ondestroy

在使用 MainActivity->RelativeLayout->GLSurfaceView 的应用程序上工作。

当通过 Activity.finish() 退出应用程序（好的，根据承包商要求）时，在下次启动时，它将以其初始状态开始（好的，根据承包商要求），但所有纹理都将是白色的。

通过 System.exit(0) 关闭应用程序可以解决此问题，因此很明显某些形式的 OpenGL 资源没有被释放。纹理都应该被释放，因为它们有一个管理器，而且似乎没有一个泄漏。

我正在寻找用刷新所有 OpenGL 资源（如果可能）的东西替换 System.exit(0) 吗？是否有类似 Android 上暴露的上下文破坏器之类的东西？

# c# - 错误：文件路径太长

> ID：12204186
> 
> 赞同：5
> 
> 时间：2012-08-30T19:35:23.477
> 
> 标签：c#

我正在尝试使用 C# 中的各种文件函数，例如`File.GetLastWriteTime`，复制命令放置在大于 Windows 7 上允许的最大路径的路径上的文件，即 260。它给了我一个长路径名错误。在 MSDN 支持上，他们要求`\\?\`在路径之前使用。我做了同样的事情，但仍然出现同样的错误，似乎没有任何改变。下面是我的代码。请让我知道我是否正确使用它或者我需要添加任何东西：
我正在使用的这些所有库，因为代码还有其他东西：

以下是各自的代码：

```
filesToBeCopied = Directory.GetFiles(path,"*",SearchOption.AllDirectories);
for (int j = 0; j < filesToBeCopied.Length; j++)
{
    try
    {
        String filepath = @"\\?\" + filesToBeCopied[j];
        File.GetLastWriteTime(filepath);
    }
    catch (Exception ex)
    {
        MessageBox.Show("Error Inside the single file iteration for the path:" +
            filesToBeCopied[j] + " . The exception is :" + ex.Message);
    }
} 
```

其中路径是Windows机器上以驱动器号开头的文件夹的路径。例如：`d:\abc\bcd\cd\cdc\dc\..........`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T20:46:40.783

这是至少复制部分请求的解决方案（谢谢[pinvoke.net](http://www.pinvoke.net/default.aspx/kernel32.copyfile#)）：

```
[DllImport("kernel32.dll", CharSet = CharSet.Unicode)]
static extern bool CopyFile(string lpExistingFileName, string lpNewFileName, bool bFailIfExists); 
```

然后实际复制您的文件：

```
// Don't forget the '\\?\' for long paths
string reallyLongPath = @"\\?\d:\abc\bcd\cd\cdc\dc\..........";
string destination = @"C:\some\other\path\filename.txt";
CopyFile(reallyLongPath , destination, false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T20:03:29.070

据我所知，如果文件的路径太长，则无法直接访问文件（直接，我的意思是使用 的方法`File`，通过构造函数创建 a`FileInfo`或使用`Directory.GetFiles(string fileName)`.

我发现让您访问此类文件的唯一方法是在路径中某处的目录变得太长之前访问它，然后以编程方式沿着树向下走，直到您到达您的文件，如此[处所示](https://stackoverflow.com/questions/11210408/file-exists-incorrectly-returns-false-when-path-is-too-long/11212007#11212007)。

我从那里获取了我的代码并对其进行了一些修改，以返回`FileInfo`一个路径“太长”的文件的对象。使用此代码，您可以访问返回对象的必要**属性**`FileInfo`（如`LastWriteTime`）。 **但它仍然有一些限制，例如无法使用`CopyTo()`或`OpenText()`.**

```
// Only call GetFileWithLongPath() if the path is too long
// ... otherwise, new FileInfo() is sufficient
private static FileInfo GetFile(string path)
{
    if (path.Length >= MAX_FILE_PATH)
    {
        return GetFileWithLongPath(path);
    }
    else return new FileInfo(path);
}

static int MAX_FILE_PATH = 260;
static int MAX_DIR_PATH = 248;

private static FileInfo GetFileWithLongPath(string path)
{
    string[] subpaths = path.Split('\\');
    StringBuilder sbNewPath = new StringBuilder(subpaths[0]);
    // Build longest sub-path that is less than MAX_PATH characters 
    for (int i = 1; i < subpaths.Length; i++)
    {
        if (sbNewPath.Length + subpaths[i].Length >= MAX_DIR_PATH)
        {
            subpaths = subpaths.Skip(i).ToArray();
            break;
        }
        sbNewPath.Append("\\" + subpaths[i]);
    }
    DirectoryInfo dir = new DirectoryInfo(sbNewPath.ToString());
    bool foundMatch = dir.Exists;
    if (foundMatch)
    {
        // Make sure that all of the subdirectories in our path exist. 
        // Skip the last entry in subpaths, since it is our filename. 
        // If we try to specify the path in dir.GetDirectories(),  
        // We get a max path length error. 
        int i = 0;
        while (i < subpaths.Length - 1 && foundMatch)
        {
            foundMatch = false;
            foreach (DirectoryInfo subDir in dir.GetDirectories())
            {
                if (subDir.Name == subpaths[i])
                {
                    // Move on to the next subDirectory 
                    dir = subDir;
                    foundMatch = true;
                    break;
                }
            }
            i++;
        }
        if (foundMatch)
        {
            // Now that we've gone through all of the subpaths, see if our file exists. 
            // Once again, If we try to specify the path in dir.GetFiles(),  
            // we get a max path length error. 
            foreach (FileInfo fi in dir.GetFiles())
            {
                if (fi.Name == subpaths[subpaths.Length - 1])
                {
                    return fi;
                }
            }
        }
    }
    // If we didn't find a match, return null;
    return null;
} 
```

既然你已经看到了，那就去冲洗你的眼睛并缩短你的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:39:33.300

尝试使用此代码

```
var path = Path.Combine(@"\\?\", filesToBeCopied[j]); //don't forget extension 
```

路径字符串的“\?\”前缀告诉 Windows API 禁用所有字符串解析，并将其后面的字符串直接发送到文件系统。

重要提示：并非所有文件 I/O API 都支持“\?\”，您应该查看每个 API 的参考主题

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-30T19:46:22.090

[http://www.codinghorror.com/blog/2006/11/filesystem-paths-how-long-is-too-long.html](http://www.codinghorror.com/blog/2006/11/filesystem-paths-how-long-is-too-long.html)

> **我最近为一个超过最大路径限制 256 个字符**的客户导入了一些源代码。

您粘贴的路径长度为 285 个字符。

正如您在评论中指出的那样，MSDN 的链接 ( [http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx#maximum%5Fpath%5Flength](http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx#maximum_path_length) ) 更详细地解释了这个长度：

> **在 Windows API（以下段落中讨论的一些例外情况）中，路径的最大长度为 MAX_PATH，定义为 260 个字符**。本地路径按以下顺序构造：驱动器号、冒号、反斜杠、由反斜杠分隔的名称组件和终止空字符。例如，驱动器 D 上的最大路径是“D:\some 256-character path string”，其中“”表示当前系统代码页的不可见终止空字符。（字符 < > 在此处用于视觉清晰，不能作为有效路径字符串的一部分。）

关于`\\?\`功能：

> 许多但不是所有的文件 I/O API 都支持“\?\”；您应该查看每个 API 的参考主题以确定。

# c# - 旋转浮动刻度标签

> ID：12204191
> 
> 赞同：5
> 
> 时间：2012-08-30T19:35:35.790
> 
> 标签：c#, sql, graph, flot

我正在尝试旋转图表底部的日期以显示垂直与水平。我正在使用[flot-tickrotor](https://github.com/markrcote/flot-tickrotor)，但它似乎无法正常工作。

```
 xaxis: {
   rotateTicks: 110,
   mode: "time",
   timeformat: "%m/%d",
   minTickSize: [7, "day"],
   ticks: cpudatearray
 } 
```

最终结果不正确，一切都显得混乱。 ![在此处输入图像描述](../Images/d6537fbc6e087654c19e4a1f426cd955.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T18:21:00.810

使用 CSS 而不是使用插件处理这个问题可能会更好：

```
#flotPlaceholder div.xAxis div.tickLabel 
{    
    transform: rotate(-90deg);
    -ms-transform:rotate(-90deg); /* IE 9 */
    -moz-transform:rotate(-90deg); /* Firefox */
    -webkit-transform:rotate(-90deg); /* Safari and Chrome */
    -o-transform:rotate(-90deg); /* Opera */
    /*rotation-point:50% 50%;*/ /* CSS3 */
    /*rotation:270deg;*/ /* CSS3 */
} 
```

显然，将角度更改为您想要实现的任何目标。如果要将其用于 y 轴，只需更改`div.xAxis`选择器即可。

在我自己的浮动图中测试后的结果： ![在此处输入图像描述](../Images/25ddedf3d77b397670ef39d9a4beb63a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T19:02:18.440

@Brendan 的回答看起来可能工作得很好，但是在你实现它之前，我会考虑从可用性的角度来看这是否是你真正想做的事情。

如果您显示的文本的最大长度为 5 个字符（来自您的问题，一个 'MM DD' 字符串），如果您只标记每三个“勾号”（或者很多有意义），您的图表可能会更容易阅读为您的数据）。

我在仪表板样式的应用程序上使用我的图表进行了类似的练习。用户坚持认为他们需要为每个结果添加 X 标签，但由于图表有 96 个刻度，一旦我像您尝试的那样将它们旋转 90 度，就会创建大量文本。当我向他们展示每 6 个点带有一个水平 X 标签的模型时，他们更喜欢这个选项，这就是我们为交付的解决方案所采用的。（你的旅费可能会改变..）

# awk - 在 awk 中使用多个分隔符

> ID：12204192
> 
> 赞同：243
> 
> 时间：2012-08-30T19:35:38.513
> 
> 标签：awk, command-line, text-processing

我有一个文件，其中包含以下几行：

```
/logs/tc0001/tomcat/tomcat7.1/conf/catalina.properties:app.env.server.name = demo.example.com
/logs/tc0001/tomcat/tomcat7.2/conf/catalina.properties:app.env.server.name = quest.example.com
/logs/tc0001/tomcat/tomcat7.5/conf/catalina.properties:app.env.server.name = www.example.com 
```

在上面的输出中，我想提取 3 个字段（数字 2、4 和最后一个`*.example.com`）。我得到以下输出：

```
cat file | awk -F'/' '{print $3 "\t" $5}'
tc0001   tomcat7.1
tc0001   tomcat7.2
tc0001   tomcat7.5 
```

我如何还提取最后一个域名后面的字段`'='`？如何使用`multiple delimiter`提取字段？

* * *

## 回答 #1

> 赞同：399
> 
> 时间：2012-08-30T19:47:35.440

分隔符可以是正则表达式。

```
awk -F'[/=]' '{print $3 "\t" $5 "\t" $8}' file 
```

产生：

```
tc0001   tomcat7.1    demo.example.com  
tc0001   tomcat7.2    quest.example.com  
tc0001   tomcat7.5    www.example.com 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2014-11-16T18:51:45.793

好消息！`awk`字段分隔符可以是正则表达式。你只需要使用`-F"<separator1>|<separator2>|..."`：

```
awk -F"/|=" -vOFS='\t' '{print $3, $5, $NF}' file 
```

回报：

```
tc0001  tomcat7.1  demo.example.com
tc0001  tomcat7.2  quest.example.com
tc0001  tomcat7.5  www.example.com 
```

这里：

*   `-F"/|="`将输入字段分隔符设置为`/`或`=`。

*   `-vOFS='\t'`正在使用`-v`标志来设置变量。`OFS`是输出字段分隔符的默认变量，它被设置为制表符。该标志是必要的，因为没有像`-F`.

*   `{print $3, $5, $NF}`根据输入字段分隔符打印第三、第五和最后一个字段。

* * *

看另一个例子：

```
$ cat file
hello#how_are_you
i#am_very#well_thank#you 
```

该文件有两个字段分隔符，`#`和`_`. 如果我们想打印第二个字段而不管分隔符是一个还是另一个，让我们都成为分隔符！

```
$ awk -F"#|_" '{print $2}' file
how
am 
```

其中文件编号如下：

```
hello#how_are_you           i#am_very#well_thank#you
^^^^^ ^^^ ^^^ ^^^           ^ ^^ ^^^^ ^^^^ ^^^^^ ^^^
  1    2   3   4            1  2   3    4    5    6 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-06-18T09:09:08.550

另一种是使用 -F 选项，但将其传递给正则表达式以打印左右括号之间的文本`()`。

**文件内容：**

```
528(smbw)
529(smbt)
530(smbn)
10115(smbs) 
```

**命令：**

```
awk -F"[()]" '{print $2}' filename 
```

**结果：**

```
smbw
smbt
smbn
smbs 
```

使用 awk 仅打印以下之间的文本`[]`：

使用`awk -F'[][]'` 但 `awk -F'[[]]'`不会工作。

[http://stanlo45.blogspot.com/2020/06/awk-multiple-field-separators.html](http://stanlo45.blogspot.com/2020/06/awk-multiple-field-separators.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-30T19:51:09.520

如果您的空格是一致的，您可以将其用作分隔符，而不是`\t`直接插入，您可以设置输出分隔符，它将自动包含在内：

```
< file awk -v OFS='\t' -v FS='[/ ]' '{print $3, $5, $NF}' 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-03-22T13:50:26.627

`2`对于通过`5`或字母`a`或或空格的任何数字的字段分隔符`#`，其中分隔字符必须重复至少 2 次且不超过 6 次，例如：

```
awk -F'[2-5a# ]{2,6}' ... 
```

我确信使用 ( ) 和参数存在这种变化

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-09T16:58:19.507

Perl 单行：

```
perl -F'/[\/=]/' -lane 'print "$F[2]\t$F[4]\t$F[7]"' file 
```

使用这些命令行选项：

*   `-n`循环输入文件的每一行，将行放在`$_`变量中，不要自动打印每一行

*   `-l`在处理之前删除换行符，然后将它们添加回来

*   `-a`自动拆分模式——perl 会自动将输入行拆分到`@F`数组中。默认为空格分割

*   `-F`autosplit 修饰符，在此示例中拆分为`/`或`=`

*   `-e`执行 perl 代码

Perl 与 awk 密切相关，然而，`@F`自动拆分数组从索引开始，`$F[0]`而 awk 字段从 $1 开始。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-25T14:38:57.163

我看到板上有很多完美的答案，但仍然想上传我的代码，

`awk -F"/" '{print $3 " " $5 " " $7}' sam | sed 's/ cat.* =//g'`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-23T19:06:55.877

**使用 Raku（以前称为 Perl_6）**

```
raku -ne '.split(/ <[/=]> /).[2,4,7].put;' 
```

样本输入：

```
/logs/tc0001/tomcat/tomcat7.1/conf/catalina.properties:app.env.server.name = demo.example.com
/logs/tc0001/tomcat/tomcat7.2/conf/catalina.properties:app.env.server.name = quest.example.com
/logs/tc0001/tomcat/tomcat7.5/conf/catalina.properties:app.env.server.name = www.example.com 
```

样本输出：

```
tc0001 tomcat7.1  demo.example.com
tc0001 tomcat7.2  quest.example.com
tc0001 tomcat7.5  www.example.com 
```

以上是用 Raku 编码的解决方案，Raku 是 Perl 编程语言家族的成员。简而言之，使用`-ne`（逐行，非自动打印）命令行标志逐行输入。行`split`位于正则表达式上，该正则表达式由使用运算符创建的自定义字符类 ( `/=`)组成`<[` `]>`。元素`[2,4,7]`然后`put`给出上面的结果。

当然，上面是一个“简单”的实现，并且 Raku 是 Perl 系列语言，TMTOWTDI 适用。因此，行可以位于由“OR”运算符`split`分隔的文字字符上。`|`元素编号（在 Perl 和 Raku 中都是零索引）可以在例程中添加`:skip-empty`副词来收紧。`split`空白可以`trim`从每个元素中删除（使用`map`），并且所需的元素（现在`[1,3,6]`）`join`使用`\t`制表符进行编辑，得到以下结果：

```
raku -ne '.split(/ "/" | "=" /, :skip-empty).map(*.trim).[1,3,6].join("\t").put;' file
tc0001  tomcat7.1   demo.example.com
tc0001  tomcat7.2   quest.example.com
tc0001  tomcat7.5   www.example.com 
```

[https://raku.org](https://raku.org)

# spring - Spring Integration xslt-transformer 不适用于命名空间

> ID：12204199
> 
> 赞同：0
> 
> 时间：2012-08-30T19:35:58.920
> 
> 标签：spring, spring-integration

我使用 Spring 集成：

```
<int-xml:xslt-transformer input-channel="partnerTransformation" 
output-channel="serviceChannel" 
xsl-resource="classpath:/META-INF/vendorTransformerXml.xsl"/> 
```

输入 XML 消息：

```
<ns1:persons  xmlns:ns1="http://com.test.xslt/test"  xmlns:ns3="http://universal.consumerrequest.schema.model.tci.ca">
<ns3:person>
    <ns3:name>John</ns3:name>
    <ns3:family>Smith</ns3:family>
</ns3:person>
<ns3:person>
    <ns3:name>Raza</ns3:name>
    <ns3:family>Abbas</ns3:family>
</ns3:person> 
```

和 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ns1="http://com.test.xslt/test" xmlns:ns3="http://universal.consumerrequest.schema.model.tci.ca">

<xsl:output method="text"/>
<xsl:template match="/">
<xsl:for-each select="ns1:persons/ns3:person">

<xsl:value-of select="ns3:family"/>
<xsl:value-of select="ns3:name"/>
</xsl:for-each> 
</xsl:template>
</xsl:stylesheet> 
```

它不起作用，但没有命名空间它也能很好地工作，如果你能提供帮助，不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:14:36.240

问题在于 Java XML 解析器默认处理名称空间的方式。你可以做几件事：

*   将输入 XML 转换为字符串，然后再将其提供给 XSLT 转换器。这在我的测试中效果很好
*   如果您自己构建文档，例如

    ```
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    dbf.setNamespaceAware(true);
    Document doc = dbf.newDocumentBuilder().parse(...); 
    ```

*   如果您不必担心名称空间，可能最简单的事情就是更改您的 XSLT：

    ```
    <xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
         xmlns:ns1="http://com.test.xslt/test"
     xmlns:ns3="http://universal.consumerrequest.schema.model.tci.ca">

     <xsl:output method="text" />
      <xsl:template match="/">
        <xsl:for-each select="//*[local-name()='person']">
           <xsl:value-of select="*[local-name()='family']" />
           <xsl:value-of select="*[local-name()='name']" />
        </xsl:for-each>
      </xsl:template>
    </xsl:stylesheet> 
    ```

# ruby-on-rails - Rails 视图文件名中的自定义变量

> ID：12204200
> 
> 赞同：5
> 
> 时间：2012-08-30T19:36:03.283
> 
> 标签：ruby-on-rails, actionview

默认情况下，Rails 可以在文件名中找到具有格式、区域设置和模板语言的视图（所以我可以创建`index.de.json.erb`）

是否可以向视图的文件名添加另一个自定义参数？

我想传递当前的子域，所以`http://foo.example.com/`会 render`index.foo.html.erb`和`http://bar.example.com/`render `index.bar.html.erb`（它们都带有`index.html.erb`后备）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T20:22:45.290

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:33:45.193

我认为您在这里不需要自定义处理程序。您不需要对模板进行一些预置，但您只需要使您的模板成为特定于域的模板。

我会考虑做这样的事情：

```
# in ApplicationController:
  before_filter :set_view_paths

  def set_view_paths
    self.class.view_paths = Rails.root.join('app', 'views', controller_name, request.subdomain)
  end 
```

然后，您必须将`foo`域的模板放入`foo`每个`views/controller_name`路径的文件夹中。

还要检查[`append/prepend_view_path`文档](http://api.rubyonrails.org/classes/AbstractController/ViewPaths/ClassMethods.html)以在没有域视图的情况下允许默认值。

# c++ - 通过赋值运算符在索引处插入 std::vector

> ID：12204206
> 
> 赞同：5
> 
> 时间：2012-08-30T19:36:22.920
> 
> 标签：c++, stdvector

我是 C++ 新手，我很好奇这是否是插入 std::vector 的首选方式

```
std::vector<Object_I_madeup> myVector;

   void setAt(int x, Object_I_madeup o)
        {
            myVector[x] = o;

        } // set the array location at x  to be o. 
```

我问是因为我看到了很多关于使用的东西`push_back`，或者高度混乱的东西`insert()`。这种类似 Java 的方式有效吗？我宁愿那样做...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T19:37:59.900

```
myVector[x] = o; 
```

仅当 时才定义明确`x < myVector.size()`。否则，它会调用 undefined-behavior，因为在这种情况下，它会尝试访问超出向量边界的元素。

如果您想确保它也检查越界访问，请[`at()`](http://en.cppreference.com/w/cpp/container/vector/at)用作：

```
myVector.at(x) = o; 
```

现在它会抛出`std::out_of_range`异常 if `x >= myVector.size()`。所以你必须把这段代码放在`try-catch`块中！此处详细讨论了它们之间的区别。

*   [为什么在 C++ 中使用“vector.at(x)”比使用“vector[x]”更好？](https://stackoverflow.com/questions/11172144/why-is-using-vector-atx-better-than-vectorx-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T19:52:48.007

`myVector[x] = o`做与 using `myVector.push_back(o)`（或 using `insert`）完全不同的事情。因此，哪种方法正确取决于您要执行的操作：

*   `myVector[x] = o`不插入向量中，而是将位置处的元素替换`x`为`o`. 因此， 的长度`vector`不会改变，并且之前位置的`x`值不再存在`vector`。如果 的长度`myVector`不是更大，那么`x`这将导致越界访问，从而导致未定义的行为
*   `myVector.push_back(o)`将插入`o`到`myVector`. 因此，在此操作之后， 的长度`vector`将增加 1，而 的最后一个元素`myVector`将是`o`。没有从 中删除任何值`myVector`。
*   `myVector.insert(i, o)`将`o`在迭代器指定的任意位置插入`i`。因此向量的长度将增加一并且`"ith"`元素（元素编号`myVector.begin() - i`）将是`o`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:37:24.923

仅当向量的大小至少为 x+1 时才有效。如果不是，则您正在越界访问它。

如果您像这样声明向量：

```
std::vector<Object_I_madeup> myVector(10); // construct the vector with size 10
                                           // and default-initialize its elements 
```

那么您可以安全地访问索引 0 - 9。示例中的向量是空的，但是还没有有效的索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T19:41:35.170

如果您不尝试超出其边界访问它，它将起作用，即矢量大小大于 x。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T19:42:49.800

如果您正在寻找该`ArrayList.set()`方法的类似 java 的等效项，则可以通过以下方式进行更紧密的操作

```
void setAt(int x, Object_I_madeup o)
{
    myVector.at(x) = o;
} 
```

很像 Java 版本，`vector::at()`如果向量不够大，会抛出异常。请注意，这会生成对象的副本（实际上是两个，因为您也将值传递给函数）。

# perl - Tomcat 中 CGI 的环境变量

> ID：12204208
> 
> 赞同：0
> 
> 时间：2012-08-30T19:36:32.210
> 
> 标签：perl, tomcat

我已经在 Tomcat 中设置了 CGI，它对于我的一个测试脚本运行良好。现在我正在尝试使用 DBD/Oracle.pm 的更复杂的脚本，当我检查 catalina.log 时，它向我抛出了以下错误：

StandardContext[/TestApp]cgi: runCGI (stderr):Can't locate Oracle.pm in @INC (@INC contains: ....)

当我检查 @INC 内部的内容时，我确实注意到它缺少 Oracle.pm 所在的路径。但是，当我对命令执行 perl -V 时，我看到 @INC: /usr/local/oracle/oraperllib/ 。 ..

这是 Oracle.pm 所在的缺失路径。

Tomcat 是否使用不同版本的 perl？如果是这样，我该如何配置它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:26:52.510

当您从命令行运行 Perl 时，您可能会从某个地方（例如您的`.bashrc`文件）获取 Oracle.pm 的非标准路径。

当 Web 服务器运行 CGI 脚本时，它可能不会选择相同的环境变量。将“Oracle.pm”移动到标准路径中，或在 CGI 脚本中明确“使用”该路径：

```
use lib '/usr/local/oracle/oraperllib/'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T00:06:22.047

我遇到了同样的问题，马克关于 PERL5LIB 的提示正是我所需要的。但是需要一个关键步骤：

**在您的 web.xml 中将passShellEnvironment**设置为 true，这在您的 cgi servlet 配置中：

```
<init-param>
    <param-name>passShellEnvironment</param-name>
    <param-value>true</param-value>
</init-param> 
```

请参阅有关此内容的 tomcat 文档：[https](https://tomcat.apache.org/tomcat-7.0-doc/cgi-howto.html#Configuration) ://tomcat.apache.org/tomcat-7.0-doc/cgi-howto.html#Configuration 。默认情况下，此选项设置为 false 并且不会传递您的环境变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-04T14:41:14.233

Python 配置和 Tomcat 安装到 Mac 中的相同问题...

*   Unix 系统对名称 exec 程序的大小写敏感警告

    ```
     <init-param>
          <param-name>executable</param-name>
          <param-value>/Library/Frameworks/Python.framework/Versions/3.6/Python</param-value>
     </init-param>
     <init-param>
          <param-name>passShellEnvironment</param-name>
          <param-value>false</param-value>
        </init-param> 
    ```

    结果等于

    ```
     <init-param>
          <param-name>executable</param-name>
          <param-value>Python</param-value>
        </init-param>
        <init-param>
          <param-name>passShellEnvironment</param-name>
          <param-value>true</param-value>
        </init-param> 
    ```

但是第二个对于避免安装新的python版本问题要有效得多

没有错误但没有执行脚本，如果脚本有错误，只有一个用于保存或打开脚本的窗口。如果在脚本的第一行中使用 #!/usr/bin/env python3.6 没有错误，则可以工作。

所以一定要和 perl 一样。

# java - 模式可能不匹配时的java正则表达式

> ID：12204209
> 
> 赞同：0
> 
> 时间：2012-08-30T19:36:36.703
> 
> 标签：java

如果模式匹配，我将如何执行一个代码块，或者如果模式不匹配，我将如何执行另一个代码块？

```
String input = "abc";

final String mainRegex = "(.*?)(&!|&|==)";

final Matcher matcher = Pattern.compile(mainRegex).matcher(input); 
```

我努力了

```
if(matcher1.matches())
{
    execute this block
}

else
{
    execute this block
} 
```

但它总是执行`else`块。即使输入是`a>b&!c<d`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T19:38:57.357

您的代码是正确的，但您的正则表达式是错误的。它与您的任何一个示例都不匹配。

也许你可以试试这个正则表达式：

```
final String mainRegex = "(.*?)(&!|&|==)(.*)"; 
```

在线查看它：[ideone](http://ideone.com/ybbKa)

# .htaccess - mod_rewrite 规则未按预期工作

> ID：12204211
> 
> 赞同：0
> 
> 时间：2012-08-30T19:36:49.823
> 
> 标签：.htaccess, mod-rewrite

我正在使用以下代码

```
RewriteEngine on
RewriteRule  ^/(certain|folders|on|server) - [NC,L]
RewriteRule (.*) http://newserver/blog$1 [L,NS] 
```

我希望它会忽略我的文件夹列表，并重定向到其他所有内容。相反，它似乎总是重定向到“newserver”。在第一个语句中将“-”更改为 URL 确实有效，但我实际上并不希望将这些文件夹定向到任何地方。

为什么我的陈述没有按预期工作？

另外，我注意到对于所有未列出的文件夹，我都有“newserver/”，而我列出的只是“newserver”（没有 uri）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:58:42.527

事实证明我的规则确实按预期工作。我以前尝试在 apache.conf 中使用这些规则。将其移至网站“VirtualDirectory”标签似乎可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:52:40.997

您需要删除规则中的前导斜杠。htaccess 文件中的重写规则被赋予一个 URI，以匹配去掉前导斜线。`?`通过在斜杠后添加 a 来更改您的第一条规则：

```
RewriteRule  ^/?(certain|folders|on|server) - [NC,L] 
```

或者您可以将其更改为条件：

```
RewriteCond %{REQUEST_URI} !^/(certain|folders|on|server) 
```

这将应用于遵循它的规则。

# wpf - 未设置 DisplayMemberPath 时，如何阻止隐式 TextBox 样式在 ComboBox 中继承？

> ID：12204212
> 
> 赞同：2
> 
> 时间：2012-08-30T19:36:53.527
> 
> 标签：wpf, styles, implicit-style

我有两个`ComboBoxes`。一个绑定到枚举值列表，而另一个绑定到自定义类对象列表并具有`DisplayMemberPath`属性集。

对枚举值的`ComboBox`绑定应用了隐式`TextBlock`样式，而`ComboBox`使用该`DisplayMemberPath`属性的 则没有。

使用[Snoop](http://snoopwpf.codeplex.com/)我可以验证两者`ComboBoxes`都使用完全相同的控件集（a`<ContentPresenter>`包含 a `<TextBlock>`）呈现，但是没有集合中的 a 包含`TextBlock`5而带有set 的控件不包含。`ComboBox``DisplayMemberPath``Margin``DisplayMemberPath`

```
<Grid.Resources>
    <Style TargetType="{x:Type TextBlock}">
        <Setter Property="Margin" Value="5" />
    </Style>
</Grid.Resources>

<ComboBox Grid.Row="0" Grid.Column="1" 
          ItemsSource="{Binding EnumCollection}" 
          SelectedItem="{Binding SelectedEnum}" />

<ComboBox Grid.Column="1" Grid.Row="2" 
          ItemsSource="{Binding SomeCollection}" 
          SelectedItem="{Binding SelectedItem}"
          DisplayMemberPath="Name" /> 
```

![截屏](../Images/6748ebb9a36be7b472ac9e7b7420dc3e.png)

为什么是这样？我能做些什么来阻止枚举`ComboBox`继承隐式`TextBlock`样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:48:04.837

我的假设是`DisplayMemberPath`创建 a`DataTemplate`和样式不会在其范围内应用。

尝试设置`DisplayMemberPath="."`第一次`ComboBox`使用`DataTemplate`contains `<TextBlock Text="{Binding .}">`，这将阻止应用隐式样式。

# delphi - Free Pascal 和 Delphi 的单源单元测试

> ID：12204224
> 
> 赞同：10
> 
> 时间：2012-08-30T19:38:00.850
> 
> 标签：delphi, unit-testing, freepascal, dunit

有没有办法编写单元测试，以便可以使用 Delphi 和 Free Pascal 编译和运行它们？

Delphi 和 Free Pascal 有不同的单元测试框架，这会导致针对这两种编译器的开发人员（例如，库和框架开发人员）的重复工作。

所以也许有一种方法，使用 DUnit 或 FPCUnit 框架并调整测试用例源代码（或框架本身），以便它也可以与其他编译器一起使用。

所以本质上问题是：

*   哪个框架（DUnit 或 FPCUnit）可以用两种编译器（Delphi 和 Free Pascal）编译，并且尽可能少地修改？

或者

*   是否有与 Delphi 和 FPC 一起使用的第三个框架（感谢 Arnaud 提到 TSynTest）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T06:34:41.060

请参阅这篇[非常不错的博客文章](http://sergworks.wordpress.com/2012/08/31/introduction-to-unit-testing-with-lazarus/)——关于 FPCUnit 测试的新鲜内容。

简而言之，据我所知，如果您[与 DUnit 进行比较](http://dunit.sourceforge.net/README.html)：

*   大多数 Check*() 方法被重命名为 Assert*();
*   SetUp / TearDown 方法在两个框架中都*按功能调用；*
*   其他一些想法可能会有所不同。

*因此，我认为通过在 FPCUnit 实现上创建一个小型包装类*，让 FPCUnit “模仿” DUnit 很容易，从而拥有与 DUnit 相同的确切方法。因此，您可以在两个目标之间共享代码，甚至可以重用现有的 DUnit 测试。恕我直言，这样的包装类比这里建议的使用更方便`{$ifdef FPC}`。条件编译往往会使代码难以调试、冗长、冗余，仅应在必要时使用。

另一个潜在的解决方案可能是使用其他测试框架。我们的小型[TSynTest 类](http://blog.synopse.info/post/2010/07/23/Unit-Testing-light-in-Delphi)更轻，但我目前正在将框架转换为 FPC。因此，两个编译器都可以使用相同的代码。它有一些我会从 DUnit / FPCUnit 中错过的功能（比如带有精细分析的可选日志记录，以及失败时的完整堆栈 strace）。它没有 GUI 或向导，但老实说，作为我的程序员，我更喜欢纯文本，我可以轻松地将其包含在我的技术发布文档中，以证明没有发生回归。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T06:25:40.957

Free Pascal 的默认单元测试框架是 FPCUnit，它与 DUnit 具有相同的设计，但在细节上有所不同。您可以通过绕过差异来为 FPCUnit 和 DUnit 编写通用单元测试`{$IFDEF FPC}`。我刚刚测试了 FPCUnit，它是一个可用的框架，并[在博客中介绍了它](http://sergworks.wordpress.com/2012/08/31/introduction-to-unit-testing-with-lazarus/)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T01:45:58.517

我刚刚制作了一个适用于 DUnit (delphi) 和 FPCUnit 的示例（最接近 DUnit 的 Freepascal 等价物，恰好在 lazarus 1.0 中已经“装在盒子里”，其中包括 freepascal 2.6 ）：

一点点 IFDEF，你就在那里。

```
unit TestUnit1;

{$IFDEF FPC}
{$mode objfpc}{$H+}
{$ENDIF}

interface

uses
  Classes,
  {$ifdef FPC}
  fpcunit, testutils, testregistry,
  {$else}
  TestFramework,
  {$endif}
  SysUtils;

type
  TTestCase1= class(TTestCase)
  published
    procedure TestHookUp;
  end;

implementation

procedure TTestCase1.TestHookUp;
begin
   Self.Check(false,'value');
end;

initialization
  RegisterTest(TTestCase1{$ifndef FPC}.Suite{$endif});
end. 
```

# android - 编写应用程序以在通知栏中隐藏时间

> ID：12204229
> 
> 赞同：0
> 
> 时间：2012-08-30T19:38:14.207
> 
> 标签：android, android-widget, android-notification-bar

我想给自己写一个应用程序来隐藏通知栏中的时间，我正在寻找一些方法来做到这一点！

例如，我希望它看起来像这样，只是不可见：

![在此处输入图像描述](../Images/503ec2c24a03962b3f026a1dfb9db982.png)

你有什么提示我可以在通知栏中完成时间吗？

在此先感谢，我知道这不是一个非常具体的问题，但我也不寻找具体的答案！

编辑：目前我正在使用应用程序[超级状态栏](https://play.google.com/store/apps/details?id=com.firezenk.ssb&feature=nav_result#?t=W251bGwsMSwxLDMsImNvbS5maXJlemVuay5zc2IiXQ..)来隐藏时间，但不幸的是它提供的比我想要的要多得多。在备用状态栏中，我只是将时间的字体颜色设置为黑色。当这个应用程序可以做到时，必须有某种方法来完成不可见或不正确的时间！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:42:27.137

你当然不能用一个小部件来做到这一点，如果不实际修改操作系统本身并构建一个自定义 ROM，你就无法做到这一点。您无法将通知栏的系统部分作为第三方应用程序覆盖。

# java - 使用 Java 进行异步 http 调用的最轻量级方法是什么？

> ID：12204230
> 
> 赞同：2
> 
> 时间：2012-08-30T19:38:27.973
> 
> 标签：java, http, asynchronous

> **可能重复：**
> [如何以异步方式发出 Web 请求](https://stackoverflow.com/questions/5542763/how-to-make-an-make-a-web-request-in-an-async-manner)

Java 中进行同步 HTTP 调用的一种非常轻量级的方法是使用[HttpURLConnection](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html)。

是否有同样简单的方法来进行**非阻塞**、“**异步**”HTTP 调用？

我已经研究过：Java NIO、Netty Http Client、Apache Commons HttpClient 4.0，但解决方案要么很复杂（Java NIO），要么引入了我想避免的依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:04:21.067

`HTTP`是一个*同步*协议。在这方面，我认为您不应该在这两种情况下从客户端看到任何显着差异。但这也取决于您所说的轻量级

# java - 将 Java 编译为本机代码会保护源代码吗？

> ID：12204235
> 
> 赞同：5
> 
> 时间：2012-08-30T19:38:54.297
> 
> 标签：java, decompiling, gcj

现在，我知道...

> 只要有足够的时间和资源，任何事情都可以进行逆向工程。

[但是，使用GCJ](http://gcc.gnu.org/java/)之类的工具将 Java 代码编译为本机代码会使反编译变得更加困难吗？我的意思是，只要几分钟，我就可以使用[JD-GUI](http://java.decompiler.free.fr/?q=jdgui)反编译一个 .jar ，而且相对准确。大多数“Java 到 EXE”转换器只是 JVM 的 .exe 启动器，虽然 JVM 有很多好处，但我一直认为源代码的安全性不是其中之一。

底线：您可以使用 GCJ 之类的东西将您的 Java 源（或 .class）文件编译为本机机器代码吗？如果可以，是否可以防止它被反编译？

**编辑**：理想情况下，这不仅仅是混淆。具体项目是一个商业游戏，所以我们正在寻找一种方法，使从源代码开始变得更加困难，而不仅仅是理解它。另外，我不确定 Steam 是否接受 .jar，我们正计划将其提交给新的[Green Light](http://steamcommunity.com/workshop/about/?appid=765&section=faq)项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:42:39.317

我不会仅仅为了源安全而选择这种方法。

查看一些*混淆*器工具，例如[ProGuard](http://proguard.sourceforge.net/)

如果你想看看这些工具对你的源代码做了什么，只要你手头有一个反编译的 Minecraft jar，试着阅读一下。

* * *

使用它的一个缺点是，如果您的代码依赖于使用*反射*，则您必须配置工具以忽略这些函数/类/其他任何东西，否则在运行时将无法找到它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T19:42:30.943

从技术上讲，是的。使用 GCJ 之类的东西会使反编译变得更加困难，但是请记住，如果这样做，您将失去使用 Java 的一些主要好处。也就是说，您失去了编写跨平台应用程序的能力。

您可以使用混淆器使代码更难反编译，并且仍然保留使用 Java 的好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:43:43.877

像 [这样](http://www.pcsentinelsoftware.com/products/mangleitjava/install_mangler_java.php)的源代码混淆器，[this](http://www.yworks.com/en/products_yguard_about.html)和[this](http://proguard.sourceforge.net/) 使您的变量、函数等......其他人无法读取（没有逻辑意义）。你也应该[在这里](https://stackoverflow.com/questions/12088/do-you-obfuscate-your-commercial-java-code)阅读！

# windows-phone-7 - 在 windows phone 中设置 DatePicker 的 MaxValue

> ID：12204241
> 
> 赞同：0
> 
> 时间：2012-08-30T19:39:16.053
> 
> 标签：windows-phone-7, datepicker

如何将 DatePicker 的 maxValue 设置为今天的日期？因此，当滚动选择日期时，它将不允许未来的任何日期。

我一直在尝试这样的事情，但它不起作用。

有什么想法或解决方案吗？

# box-api - Box：有没有办法下载 Office 格式的 webdocs 和 Google 文档？

> ID：12204248
> 
> 赞同：1
> 
> 时间：2012-08-30T19:39:56.590
> 
> 标签：box-api

有没有办法将 Box 的 webdocs 和 Google 的 gdocs 下载为 Word 文档，将 Google 的 gsheets 下载为 Excel 电子表格？

我下载文件如下：

```
HttpClient client = new HttpClient();
HttpMethod getMethod = new GetMethod("https://api.box.com/2.0/files/fileId/data");
getMethod.setRequestHeader("Authorization", "BoxAuth api_key=" + API_KEY + "&auth_token=" + authToken);
client.executeMethod(getMethod); 
```

我是否可以包含允许以指定格式导出的标题或参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:54:16.193

我们无法通过 API 转换为 Excel 或其他可用格式。谢谢你的提问。如果我们看到对它有足够的业务需求，那么我们会考虑提供它。

# .net - WCF serviceAuthenticationManager 和 TransportSecurity

> ID：12204250
> 
> 赞同：4
> 
> 时间：2012-08-30T19:40:16.270
> 
> 标签：.net, wcf, wcf-security, .net-4.5

我有 WCF Web 服务（.Net 4.5 RTM）。

我想提供自定义的 IPrincipal 和 IIdentity 实现，所以我决定提供自定义的 ServiceAuthenticationManager。

奇怪的是 ServiceAuthenticationManager 被实例化了，但没有调用 Authenticate 方法。

所以，当我有这样的服务器配置时

```
<system.serviceModel>
    <protocolMapping>
        <add scheme="https" binding="basicHttpBinding" />
    </protocolMapping>

    <behaviors>
        <serviceBehaviors>
            <behavior name="EntityServiceBehavior">
                <serviceAuthenticationManager
                    authenticationSchemes="None"
                    serviceAuthenticationManagerType="Belrost.Communication.EntityServiceAuthenticationManager, Belrost.Communication" />
                <serviceAuthorization
                    impersonateCallerForAllOperations="false"
                    principalPermissionMode="Custom"
                    serviceAuthorizationManagerType="Belrost.Communication.EntityServiceAuthorizationManager, Belrost.Communication" />
                <serviceCredentials>
                    <serviceCertificate
                        findValue="test.local"
                        x509FindType="FindBySubjectName"
                        storeLocation="LocalMachine"
                        storeName="My" />
                </serviceCredentials>
                <serviceDebug
                    includeExceptionDetailInFaults="true"
                    httpsHelpPageEnabled="true"
                    httpsHelpPageUrl="https://test.local/service/belrost-help" />
                <serviceMetadata
                    httpsGetEnabled="true"
                    httpsGetUrl="https://test.local/service/belrost-meta" />
            </behavior>
        </serviceBehaviors>
    </behaviors>

    <bindings>
        <basicHttpBinding>
            <binding name="EntityServiceBinding">
                <security mode="Transport">
                    <transport clientCredentialType="None" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>

    <services>
        <service
            name="Belrost.Server.EntityService"
            behaviorConfiguration="EntityServiceBehavior">
            <endpoint
                address="https://test.local/service/belrost"
                binding="basicHttpBinding"
                bindingConfiguration="EntityServiceBinding"
                bindingNamespace="http://schemas.triflesoft.org/"
                contract="Belrost.Communication.IEntityContract" />
        </service>
    </services>
</system.serviceModel> 
```

Authenticate 方法被调用，但由于 clientCredentialType="None" 没有提供授权信息。

当我在任何地方将 None 更改为 Basic 时，不再调用 Authenticate 方法（但是在 EntityServiceAuthenticationManager 构造函数中的断点被命中）并且我收到 SecurityTokenValidationException 并显示消息“LogonUser failed for the 'test' user。确保用户拥有有效的 Windows 帐户。”

# php - 发送到电子邮件的 PHP 脚本不显示 $message 变量

> ID：12204255
> 
> 赞同：0
> 
> 时间：2012-08-30T19:40:38.743
> 
> 标签：php, contact-form

我是 PHP 新手，但是，我有一个简单的联系表格发送到我的电子邮件。`$message`除了变量未显示外，一切都按预期工作。

php 正在处理请求并将网站查看器发送到感谢页面，查看器也收到确认电子邮件，并且我收到了包含除`$message`数据之外的所有请求变量的电子邮件。

`$totalmessage`由于`mail()`功能限制，变量被合并到。

正如我所说，我是 php 新手，但感谢您的帮助。

**PHP代码：**

```
<?php

    $to = "me@mywebsite.com";
    $subject = "Inquiry";
    $name = $_REQUEST['name'] ;
    $email = $_REQUEST['email'] ;
    $phone = $_REQUEST['phone'] ;

    if (isset($_POST['interest']) && $_POST['interest']!= 'none'){ 

        if (is_array($_POST['interest'])){ 
            $interest = implode(" ", $_POST['interest']); // format your array for use 
        } else { 
            $interest = $_POST['interest']; // no array -> print single value 
        } 
    } 
    $method = $_REQUEST['method' ] ;
    $message = $_GET['message'] ;
    $totalmessage = "
        Name:       $name \n
        Email:      $email \n
        Phone:      $phone \n
        Interest:           $interest \n
        Method:     $method \n 
        Message:             $message \n ";
    $headers = "From: $email";

    $sent = mail($to, $subject, $totalmessage, $headers);
    if($sent)
        header( "Location: /thankyou.html" );
    else
        print "We encountered an error sending your mail";
?> 
```

**HTML 代码：**

```
<div class="row">
    <br><label for="message"> Message:</label><br/>
    <textarea name="message" rows="20" cols="20" id="message"></textarea>
</div> 
```

**电子邮件输出：**

```
 Name:           bob

            Email:          bob@gmail.com

            Phone:          123-456-7890

            Interest:       research

            Method:         email

            Message:                               <===should have message text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:46:24.417

您不应该使用 GET 变量来发送消息。URL 只能发送 255 个字母！所以最好是用 POST 发送。

```
<form method="post" action="index.php?action=send">
<textarea name="message" rows="20" cols="20" id="message"></textarea>
</form> 
```

在你的 php 中：

```
$message = $_POST['message'] ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:44:48.713

更改`$message = $_GET['message'] ;`为`$message = $_REQUEST['message'] ;`或`$message = $_POST['message'] ;`现在，让我们知道这是否有效。

PHP`$_REQUEST`包括所有的`$_GET`和`$_POST`但 POST 和 GET 不共享参数。由于您所拥有的所有其他内容似乎都通过 POST 传递，因此将消息设置为也通过 POST 传递是有道理的。

[在此处](https://stackoverflow.com/questions/340704/get-vs-post-in-html-forms)阅读 POST 和 GET 之间的差异。

简而言之，当您想从数据库或数据模型中获取数据时，请使用 GET（不应执行任何更改任何状态的任何操作）。

当你想改变你的数据模型时使用 POST，或者如果你想执行一些事情（比如在这种情况下，执行一个电子邮件脚本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:47:32.997

默认情况下，变量`$_REQUEST`包含 和 的内容。`$_GET``$_POST``$_COOKIE`

该`$_GET`变量是通过 URL 参数传递给当前脚本的变量的关联数组。

该`$_POST`变量是通过 HTTP POST 方法传递给当前脚本的变量的关联数组。

您可能已经通过`form`来自其他页面或此页面的帖子获得了消息，然后您想要执行以下操作：

```
$message = $_POST['message']; 
```

而不是得到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T19:47:41.540

您需要与您的 POST / GET / REQUEST 数组保持一致。您的表单使用的方法是什么？不管是什么，在您的表单处理代码中使用相同的。例如，如果您的表单显示：`<form method="POST">`那么您的后端代码应该从 $_POST 数组中获取其所有值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-09T06:24:15.207

尝试

```
$message =$_REQUEST['message']; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-13T19:56:58.057

Mailsend 假设开始发送操作。在 $subject 中，我建议为此使用文本区域表单，否则您只会在每条消息中获得查询一词。

你能试一下吗？

```
 $to = "me@mywebsite.com";
    $subject = "Inquiry";
    $name = $_POST['name'] ;
    $email = $_POST['email'] ;
    $phone = $_POST['phone'] ; 

$mailsend = mail ('$to', '$subject',"Name: $name\r\nEmail: $emial\r\nPhone: $phone\r\n" );

if ($mailsend) {
    echo "Hello $name . Lorem ipsum est un divagat de pleure malucate";}

else {
    echo "ERROR sending";} 
```

# r - 降价中的 R 锚点

> ID：12204257
> 
> 赞同：12
> 
> 时间：2012-08-30T19:40:49.570
> 
> 标签：r, knitr

在创建 Rmd 文件时，我包含了一个内部超链接：

```
 [hlink](#id1) 
```

然后进一步锚定

```
<a id="id1"></a> . 
```

然后当我使用 Knit HTML（在 RStudio 中）时，一切正常，内部超链接工作正常，但我也得到了一个不需要的�

```
<p><a id="id1"></a>�&lt;/p> 
```

如何避免出现此错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-28T02:08:19.080

我只是在寻找一种生成目录的解决方案并遇到了您的问题。

上面的例子工作得很好。没有不必要的副作用。

我的会话信息：R 版本 2.15.3 (2013-03-01) knitr_1.1

只是想提一下，以防其他人遇到这个问题。

# android - 在 Android Widget 中渲染原生 OpenGL 代码？

> ID：12204259
> 
> 赞同：0
> 
> 时间：2012-08-30T19:40:57.430
> 
> 标签：android, opengl-es, native

是否有可能：

1.  在 Android 中的应用程序的小部件视图上渲染任意 OpenGL 代码，以及
2.  使用本机 C++ 代码（而不是 Java）驱动 Android 小部件？

[*动机：我可以访问一个 Android 原生 OpenGL 应用程序，我想修改它以作为一个小部件工作。在我进行这项工作之前，我希望直接听到它是绝对可能的（甚至可能使用指向代码示例的指针），还是绝对不可能。*]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:55:35.017

不，见[这里](http://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout)：

> App Widget 布局基于 RemoteViews，它不支持所有类型的布局或视图小部件。

对于 OpenGL，您需要[`TextureView`](http://developer.android.com/reference/android/view/TextureView.html)或[`SurfaceView`](http://developer.android.com/reference/android/view/SurfaceView.html)都不支持`RemoteViews`.

# javascript - 使用 phonegap 重定向 URL

> ID：12204260
> 
> 赞同：0
> 
> 时间：2012-08-30T19:40:58.310
> 
> 标签：javascript, facebook-graph-api, cordova, twitter, instagram

我正在构建一个 phonegap 应用程序，我需要在其中链接到 facebook、instagram 和 twitter。我需要允许用户使用他们的凭据登录其中的每一个并返回一个访问令牌，我将使用本地存储将其保存在设备上。在实际站点（这是我设置的测试站点）上工作时，我可以完美地登录用户。它的工作方式是我必须将用户重定向到他们可以登录的每个品牌的登录页面。我可以从 phonegap 应用程序中很好地做到这一点，但问题是他们每个人都需要一个重定向 url，我必须为他们提供一个重定向 url，以便在用户登录后基本上将访问令牌发送到。在互联网上这很完美，但我需要重定向 url 以某种方式指向它源自的移动设备。我可以使用代理来做到这一点，但我没有 不想使用服务器，因为这会带来很多开销。所以所有这些实际上都在问我的问题：

用户成功登录后如何将用户重定向回移动应用程序？我希望这是我所缺少的非常简单的东西，但我只是没有看到它。：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:17:30.180

这是 oAuth 身份验证，它让用户登录，然后告诉用户的浏览器转到第二个 URL。通常，如果您编写一个 iOS 应用程序，您总是可以通过执行以下操作来打开它：://。它还应该能够准备好以这种方式传递的参数。

例如：在你的 iPhone 上打开 safari 并输入“Skype://”作为地址，如果你安装了它，它应该会打开你的 Skype 应用程序。

尝试设置类似于我上面提到的返回 URL，看看是否可行。

# android - 什么是位图阈值？

> ID：12204263
> 
> 赞同：1
> 
> 时间：2012-08-30T19:41:10.633
> 
> 标签：android, bitmap

我已经阅读了几篇关于绘制流体的互联网文章。他们指的是获取位图，将其模糊，然后应用阈值。据我所知，它看起来可能是某种颜色替换。真的吗？

我没有看到任何称为“阈值”的 android 位图或绘制方法。所以我的问题是“什么是位图阈值”和/或“android 是否具有等效功能？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:59:51.927

我想我明白你在说什么。想象一个图像，其中有几个彼此靠近（但不一定接触）的圆圈。当图像变得模糊时，新图像的模糊部分可能会接触、合并，并且通常看起来像一团无定形的流体。当您对图像设置阈值时，您实际上选择了一个饱和度值，低于该值的所有图像数据都将被丢弃。

因此，例如，如果您想将图像阈值设置为 50%，则将保留所有大于 50% 的 RGB 像素值。所有其他都被丢弃。在这种情况下，阈值函数会将红色、绿色和蓝色颜色相加并除以 3。如果该值大于 0xFF/2，则保留像素。

设置图像模糊的程度和阈值级别将导致图像看起来或多或少的连接。

这段[代码](http://www.webpronews.com/thresholding-an-image-in-java-2002-04)看起来很有趣：

# java - 将 Intent 的 json 字符串转换为 Intent 的对象，给出异常

> ID：12204264
> 
> 赞同：3
> 
> 时间：2012-08-30T19:41:28.900
> 
> 标签：java, android, json, android-intent, gson

我正在使用 Gson 类将 JSON 字符串数据转换为[`Intent`](http://developer.android.com/reference/android/content/Intent.html)对象。但我得到了例外。

意图的 JSON 字符串：

```
{
   "targetIntent":{
      "mAction":"android.intent.action.VIEW",
      "mData":{
         "authority":{
            "decoded":"com.android.contacts",
            "encoded":"com.android.contacts"
         },
         "fragment":{

         },
         "path":{
            "decoded":"NOT CACHED",
            "encoded":"/contacts/lookup/1471i541ce89b89ad6a59"
         },
         "query":{

         },
         "scheme":"content",
         "uriString":"NOT CACHED",
         "host":"NOT CACHED",
         "port":-2
      },
      "mFlags":0
   }
} 
```

转换代码：

```
Intent targetIntent =
    gson.fromJson(histroyDataObject.getString("targetIntent"), Intent.class); 
```

这给出了例外：

```
Cause: Instantiation Exception
Detail Message: Failed to invoke private android.net.Uri() with no args 
```

堆栈跟踪：

```
08-31 01:08:19.045: W/System.err(290): Caused by: java.lang.InstantiationException: android.net.Uri
08-31 01:08:19.065: W/System.err(290):  at java.lang.reflect.Constructor.constructNative(Native Method)
08-31 01:08:19.065: W/System.err(290):  at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
08-31 01:08:19.065: W/System.err(290):  at com.google.gson.internal.ConstructorConstructor$2.construct(ConstructorConstructor.java:91)
08-31 01:08:19.076: W/System.err(290):  ... 24 more 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:20:28.663

我的赌注是没有无参数公共构造函数`Intent#uriString`的类型。`android.net.Uri`我的意思是你必须这样写`JsonDeserializer<Uri>`：

```
public class UriDeserializer implements JsonDeserializer<Uri> {
  @Override
  public Uri deserialize(final JsonElement src, final Type srcType,
      final JsonDeserializationContext context) throws JsonParseException {
    return Uri.parse(src.getAsString());
  }
} 
```

然后通过以下方式注册`GsonBuilder`：

```
Gson gson = new GsonBuilder()
    .registerTypeAdapter(Uri.class, new UriDeserializer())
    .create(); 
```

编辑：

您必须注册自定义适配器，以防任何属性未定义公共无参数构造函数。您可以在[Gson 文档 - 自定义序列化和反序列化](https://sites.google.com/site/gson/gson-user-guide#TOC-Custom-Serialization-and-Deserialization)中阅读更多内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T20:40:04.107

我不熟悉 android 开发但是在查看 android.net.Uri 类[http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/的源代码时2.1_r2/android/net/Uri.java/?v=source](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/net/Uri.java/?v=source)我看到它是一个抽象类。所以这可能是它失败的主要原因。要使其工作，您需要编写自定义 TypeAdapter 并使用 parse 方法来处理 android URI 类。

您还可以查看 Genson 库[http://code.google.com/p/genson/](http://code.google.com/p/genson/)。它有很好的功能和性能。此外，它的重量与 gson (200K) 一样多。Genson 的一个例子来解决你的问题：

```
class AndroidURIDeserializer implements Deserializer<Uri> {
    public Uri deserialize(ObjectReader reader, Context ctx) throws TransformationException,
            IOException {
        return Uri.parse(reader.valueAsString());
    }
}

Genson genson = new Genson.Builder().withDeserializers(new AndroidURIDeserializer()).create();
Intent pojo = genson.deserialize(json, Intent.class); 
```

# php - 如何从 ajax 响应重新加载整个页面？

> ID：12204265
> 
> 赞同：4
> 
> 时间：2012-08-30T19:41:29.307
> 
> 标签：php, javascript, ajax, response, reload

我有一个用 php 生成的网页，其中有一个放在 div 中的表单。表单使用 Ajax 提交并在服务器端进行验证。如果出现错误，则 div 的内容将替换为带有错误消息的更新表单。如果表单中没有错误，我想从 ajax 响应重新加载整个页面，而不仅仅是 div。有谁知道这是怎么做到的吗？我尝试发送位置标头，但它将新页面放在 div 中。我也尝试过 javascript window.location 但我不知道在收到 ajax 响应后执行它。我没有使用 jQuery，所以我想在计划 javascript 和/或 php 中执行此操作。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T19:43:05.343

是的，您可以在回调中执行以下操作：

```
location.reload(true); 
```

老实说，这违背了异步做某事的目的。

# variables - VBScript 读取特定行并提取字符并将其存储为变量

> ID：12204268
> 
> 赞同：3
> 
> 时间：2012-08-30T19:41:33.283
> 
> 标签：variables, vbscript, character, extract, readline

我有一个从文本文件中读取第 11 行的 VB 脚本。但是，我需要从该行中提取字符 48 到 53 并将其保存为变量。完成此操作后，我想使用该变量并在 Web url 中使用它。下面的例子：

szCPUSer.dat 文件的内容如下所示： ![szCPUSer.dat](../Images/7bcbd45593944b9b71d52a5c1fc305bc.png)

我读过的脚本第 10 行

```
Const ForReading = 1

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO.OpenTextFile("szCPUSer.dat", ForReading)

For i = 1 to 10
    objTextFile.ReadLine
Next

strLine = objTextFile.ReadLine
Wscript.Echo strLine

objTextFile.Close 
```

我需要脚本从第 11 行中提取 03187，而不是将其存储为变量 SerNum。在此之后，我想使用在 url 中提取的数字，例如：

[http://seriallookup.com/serial=SerNum](http://seriallookup.com/serial=SerNum)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:59:09.737

以下作品！

```
Const ForReading = 1
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO.OpenTextFile("szCPUSer.dat", ForReading)
For i = 1 to 10
    objTextFile.ReadLine
Next
strLine = objTextFile.ReadLine
Wscript.Echo strLine
objTextFile.Close

'Gets 6 chars starting from Right side
SerNum = Right(strLine, 6)
'Gets 6 chars starting from Left side
SerNum = Left(SerNum, 5)
'Wscript.Echo SerNum
url = "http://seriallookup.com/serial=" & SerNum
Wscript.Echo url 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:04:26.093

看一下 InStr 函数。它允许您搜索子字符串。

[http://www.w3schools.com/vbscript/func_instr.asp](http://www.w3schools.com/vbscript/func_instr.asp)

然后您可以使用 Right 函数解析出行的结束位。

您还可以查看 Split 函数，以便将行解析为数组并以最好的方式处理它。

[http://www.w3schools.com/vbscript/func_split.asp](http://www.w3schools.com/vbscript/func_split.asp)

# eclipse - SVN - 加载更改而不切换修订？

> ID：12204275
> 
> 赞同：0
> 
> 时间：2012-08-30T19:41:55.810
> 
> 标签：eclipse, svn, version-control, subclipse

> **可能重复：**
> [如何在 Subversion 中返回旧版本的代码？](https://stackoverflow.com/questions/814433/how-do-i-return-to-an-older-version-of-our-code-in-subversion)

我正在查看 Eclipse 上的提交窗口中的差异（使用 subclipse）并尝试添加一行（通过按 Enter 键），但是通过更改提交而没有评论，并且我没有确保我想提交我更改的内容。

这添加了一个没有评论的提交，并且我不确定远程仓库的更改。我检查了以前的修订版，并在我不小心做出的提交上提交了这些更改。

所以现在 HEAD 与我意外提交之前的修订状态相同，但我现在想正确提交我的更改。不过，我不确定如何。当我切换到意外修订（以恢复我的更改）时，它不允许我提交，因为它说没有任何更改。我猜它正在将我的本地文件与我签出的版本进行比较，但我需要它来将它与 HEAD 进行比较。

我可以在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:53:57.083

我最终恢复了我上次提交的更改，然后在检查了所有内容后重新提交了这些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:11:20.807

您可以（svn）将您意外提交的修订版导出到您的工作副本上。然后您可以进行调整并提交您的更改。

在命令行上：

```
svn export -r <your accidental commit> <working copy directory> 
```

在 Eclipse 中：

*   右键单击历史视图中的意外提交
*   选择“导出...”并选择包含您的工作副本的目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:52:50.307

最简单的方法是对您提交的修订进行统一差异，然后使用 Apply Patch 选项将其重新应用到您的工作区。

您也可以只对更改的文件执行显示历史记录。然后找到修订，在相应的窗格中选择文件，然后选择 Get Contents 选项。这将使该文件的工作副本版本与所选修订中该文件的内容相匹配。

无论哪种情况，您的工作副本现在都应该显示为脏，您可以在准备好后查看和提交。

# eclipse - Eclipse Juno 不显示 SVN 历史记录

> ID：12204276
> 
> 赞同：2
> 
> 时间：2012-08-30T19:41:56.207
> 
> 标签：eclipse, svn, configuration

通常，当我单击包资源管理器（或任何其他资源管理器）中的任何文件或目录时，历史记录视图会显示该目录的整个 SVN 历史记录。不幸的是，我的历史记录保持空白，我没有看到任何信息。我也没有在偏好中找到任何选项。有任何想法吗？

我正在使用 Juno、Subversive、SVNKit 1.3.8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T07:10:04.397

您必须右键单击文件/文件夹并选择`Team`-> `Show history`。

要让视图根据您的选择自行刷新，请选择`Link with Editor and Selection`视图工具栏中的图标：

![在此处输入图像描述](../Images/b78d34bdc59eb37202c4422196d3860b.png)

# c++ - 在网络浏览器上流式传输 c++ 文件

> ID：12204278
> 
> 赞同：1
> 
> 时间：2012-08-30T19:41:59.213
> 
> 标签：c++, stream, browser, push

我有一个 c++ 项目（服务器端），它在事件源的帮助下将数据发送到客户端。现在出于调试目的，我维护了一个跟踪文件（文本）。在 C++ 代码中所有担心代码中断的关键区域上，我添加了一行将“成功”文本写入此跟踪文件。它工作正常。我可以知道代码在哪里成功，在哪里失败。

但我在服务器端。我也想将此设施提供给客户。但是，我不确定该怎么做？我应该在网络浏览器上流式传输文件，还是有任何其他方式可以将数据“实时”发送到网络浏览器？

我检查了这个链接，但是，我不确定我是否可以使用它。[http://www.tutorialspoint.com/cplusplus/cpp_web_programming.htm](http://www.tutorialspoint.com/cplusplus/cpp_web_programming.htm)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:53:14.027

您的问题有点令人困惑，并且没有任何代码示例，您想做什么有点不清楚。但是，我能给出的最好建议是这样做：

1.  将文本文档存储在您选择的服务器上。
2.  编写程序联系服务器并下载数据。（使用 Winsock.h）

或者

直接将文件发送到计算机。您必须编写一个程序来联系 B 点所在的服务器。

有关使用 Winsock.h 编写应用程序的信息，请在此处查看：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms737629 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737629(v=vs.85).aspx)

如果您真的必须将数据实时存储在 Web 浏览器中，请查看 Java 或 VisualBasic，因为所有 Web 浏览器都强烈支持这两者，而 C++ 则不支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:53:24.467

让我看看我是否理解正确。您想将网络服务器的成功/失败发送到您的客户端程序吗？

嗯，这是由 http 协议规定的 web 服务器工作的一部分。Web 服务器将使用响应标头响应客户端请求，然后是请求的页面（如果它作为服务器上的有效资源存在）。

有关 http 响应标头的更多信息，请查看[本文](http://djce.org.uk/dumprequest)或[此 wikipedia 页面](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Response_message)，它们都详细说明了浏览器和 Web 服务器之间的请求/响应对话。

希望这可以帮助。

# python - 使用 ImageMagick 的“转换”实用程序作为 Python 子进程

> ID：12204287
> 
> 赞同：0
> 
> 时间：2012-08-30T19:42:25.700
> 
> 标签：python, imagemagick, subprocess, imagemagick-convert

我正在寻找转换缩略图的大目录。

我不想使用 PythonMagick 包装器，而是直接访问转换二进制文件（我有很多标志，并且认为这对于大量照片会更有效。）

有没有使用 ImageMagick 作为子进程的工作示例？或者，有没有更好的方法来做到这一点？

具体来说，我不确定如何在类中启动和结束 Python 子进程。我的课叫做 ThumbnailGenerator。我希望做这样的事情：

```
>> t = ThumbnailGenerator()
>> t.makeThumbSmall('/path/to/image.jpg')  
>> True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:00:12.173

这是我在一个项目中使用的：

```
def resize_image(input, output, size, quality=None, crop=False, force=False):
    if (not force and os.path.exists(output) and
        os.path.getmtime(output) > os.path.getmtime(input)):
        return
    params = []
    if crop:
        params += ["-resize", size + "^"]
        params += ["-gravity", "Center", "-crop", size + "+0+0"]
    else:
        params += ["-resize", size]
    params += ["-unsharp", "0x0.4+0.6+0.008"]
    if quality is not None:
        params += ["-quality", str(quality)]
    subprocess.check_call(["convert", input] + params + [output]) 
```

这将在每次转换时启动一个进程。如果源图像不是两个小，则进程启动开销会比较小。

# c - 窗口处于活动状态时无法切换键盘语言

> ID：12204289
> 
> 赞同：2
> 
> 时间：2012-08-30T19:42:30.200
> 
> 标签：c, winapi

我正在学习 Win32 API。我创建了一个空窗口并在其中添加了一个编辑框来输入一些文本。我可以在其中输入文字，但无法切换键盘语言。

Alt+Shift 等快捷键不起作用。如果我单击托盘中的语言图标，它会暂停几秒钟，然后最终会打开列表，但我的窗口将变为非活动状态，因此更改不会影响它。

如果我这样做，我可以改变语言：

1.  按 Alt+Shift（或任何组合）
2.  按 Alt、空格

与往常一样，第 2 步将导致弹出左上方的窗口菜单，但同时第 1 步也将变为现实。

我想，我没有处理某种消息，或者创建错误的窗口，但我找不到是什么错误。这是完整的代码：

```
#include <windows.h>

// handle of the edit box
HWND testEditBox;

// shows a message
void showMessage( LPSTR message ){
    MessageBox( GetActiveWindow(), message, "", MB_OK );
}

// a simple window procedure
LRESULT CALLBACK windowProc( HWND window, UINT message, WPARAM wparam, LPARAM lparam )
{
    switch( message )
    {
        case WM_CLOSE:
            DestroyWindow( window );
            break;
        case WM_DESTROY:
            PostQuitMessage( 0 );
            break;
        default:
            return DefWindowProc( window, message, wparam, lparam );
    }
    return 0;
}

int WINAPI WinMain( HINSTANCE instance, HINSTANCE prevInstance, LPSTR commandLine, int showMode )
{
    // create window class
    WNDCLASS windowClass;
    windowClass.cbClsExtra = 0;
windowClass.cbWndExtra = 0;
windowClass.style = 0;
    windowClass.hInstance = instance;
    windowClass.hCursor = LoadCursor( NULL, IDC_ARROW );
    windowClass.hbrBackground = (HBRUSH)(COLOR_BTNFACE + 1);
    windowClass.hIcon = LoadIcon( NULL, IDI_APPLICATION );
    windowClass.lpszClassName = "testWindow";
    windowClass.lpfnWndProc = windowProc;

    if( !RegisterClass( &windowClass ) )
    {
        showMessage( "Some trouble, sir" );
        return GetLastError();
    }

    HWND window = CreateWindow
    (
        "testWindow",
        "Test Window",
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, CW_USEDEFAULT,
        400, 300,
        NULL, // no parent
        NULL, // no menu
        instance,
        NULL // no 'window-creation data'
    );

    if( !window ){
        showMessage( "Some trouble, sir" );
        return GetLastError();
    }

    ShowWindow( window, showMode );

    // add an EDIT box to our window
    testEditBox = CreateWindow
    (
        "EDIT",
        "input here",
        WS_CHILD,
        10, 10,
        200, 20,
        window,
        NULL,
        instance,
        NULL
    );
    ShowWindow( testEditBox, SW_SHOW );

    // start message loop
    MSG message;
    while( GetMessage( &message, window, 0, 0 ) > 0 )
    {
        TranslateMessage( &message );
        DispatchMessage( &message );
    }

    return message.wParam;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:26:49.047

问题出在一线`GetMessage( &message, window, 0, 0 )`。您仅接收`window`, not的`testEditBox`消息，因此不会发送一些消息。该行应该像`GetMessage(&message, NULL, 0, 0)`.

当我按下并释放+时，这些是`testEditBox`您的应用程序中收到的消息：`Ctrl``Shift`

```
WM_KEYDOWN nVirtKey:VK_CONTROL cRepeat:1 ScanCode:1D fExtended:0 fAltDown:0 fRepeat:0 fUp:0
WM_KEYDOWN nVirtKey:VK_SHIFT cRepeat:1 ScanCode:2A fExtended:0 fAltDown:0 fRepeat:0 fUp:0
WM_KEYUP nVirtKey:VK_SHIFT cRepeat:1 ScanCode:2A fExtended:0 fAltDown:0 fRepeat:1 fUp:1
WM_KEYUP nVirtKey:VK_CONTROL cRepeat:1 ScanCode:1D fExtended:0 fAltDown:0 fRepeat:1 fUp:1 
```

将它们与修复后的消息进行比较：

```
WM_KEYDOWN nVirtKey:VK_CONTROL cRepeat:1 ScanCode:1D fExtended:0 fAltDown:0 fRepeat:0 fUp:0
WM_KEYDOWN nVirtKey:VK_SHIFT cRepeat:1 ScanCode:2A fExtended:0 fAltDown:0 fRepeat:0 fUp:0
WM_KEYUP nVirtKey:VK_SHIFT cRepeat:1 ScanCode:2A fExtended:0 fAltDown:0 fRepeat:1 fUp:1
WM_IME_NOTIFY dwCommand:IMN_CLOSESTATUSWINDOW dwData:00000000
WM_IME_NOTIFY dwCommand:IMN_OPENSTATUSWINDOW dwData:00000000
WM_INPUTLANGCHANGE charset:0 hkl:04090409 //this
WM_IME_NOTIFY dwCommand:IMN_SETCOMPOSITIONFONT dwData:00000000
WM_KEYUP nVirtKey:VK_CONTROL cRepeat:1 ScanCode:1D fExtended:0 fAltDown:0 fRepeat:1 fUp:1 
```

# c# - 如何使用 Moq 模拟 Web 服务调用？

> ID：12204291
> 
> 赞同：8
> 
> 时间：2012-08-30T19:42:30.130
> 
> 标签：c#, unit-testing, moq

下面`using`点击了一个我不想实际点击的外部资源。我想测试`someResult`和使用它的代码，但是每次我运行单元测试时，这段代码仍然会尝试访问真正的 Web 服务。如何使用最小起订量来伪造对 Web 服务的真实调用，但不模拟使用中的其余代码？

```
public IMyInterface.SomeMethod()
{    
     // hits a web service
     using ( mySoapClient client = new mySoapClient() )
     {
          var someResult = client.DoSomething();
       ...
       ...
     }
}

[TestMethod()]
public void SomeMethodTest()
{
    IMyInterface target = new MyInterface();
    target.SomeMethod();

    // Assert....
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T19:46:37.927

您需要将 Web 服务实现与使用者分离

```
public class ClassIWantToTest
{
      public ClassIWantToTest(IServiceIWantToCall service) {}

      public void SomeMethod()
      {
           var results = service.DoSomething();
           //Rest of the logic here
      }
} 
```

现在您可以使用 Moq 来模拟`IServiceIWantToCall`以测试逻辑`SomeMethod`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-31T19:23:46.717

为了增加泡菜的答案，我`interface`为我当前的服务调用创建了一个名为`IService`. 然后我创建了一个`ServiceMock`继承接口的类并添加了一个名为`_service`. 在构造函数中，我实例化模拟服务并设置接口的所有方法，如下所示：

```
public class ServiceMock : IService
{
    Mock<IService> _serviceMock;

    public ServiceMock()
    {
        _serviceMock = new Mock<IService>();

        _serviceMock.Setup(x => x.GetString()).Returns("Default String");

        SomeClass someClass = new SomeClass();
        someClass.Property1= "Default";
        someClass.Property2= Guid.NewGuid().ToString();

        _serviceMock.Setup(x => x.GetSomeClass()).Returns(someClass);
    }

    public string GetString()
    {
        return _serviceMock.Object.GetString();
    }

    public License GetSomeClass()
    {
        return _serviceMock.Object.GetSomeClass();
    }
} 
```

然后，您将此类注入到您的代码中，而不是实际的 Web 服务中。它将返回您设置为返回的值。您现在可以在不依赖 Web 服务的情况下进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:52:22.753

您首先必须能够注入 Web 服务。在 SomeMethod() 中创建一个新方法将方法“紧密耦合”到生产代码；您不能动态地告诉它创建除 mySoapClient 之外的其他内容。

由于您要创建和销毁它们，我是否建议您要测试的代码接受 a`Func<IMySoapClient>`作为方法参数或构造函数参数。它看起来像这样：

```
public IMyInterface.SomeMethod(Func<IMySoapClient> clientFactory)
{    
     // hits a web service
     using ( mySoapClient client = clientFactory() )
     {
          var someResult = client.DoSomething();
       ...
       ...
     }
} 
```

... 或者：

```
public class MyClass:IMyInterface
{
   private Func<IMySoapClient> MySoapClientFactoryMethod;

   public MyClass(Func<IMySoapClient> clientFactoryMethod)
   {
      MySoapClientFactoryMethod = clientFactoryMethod;
   }

   ...

   public IMyInterface.SomeMethod()
   {    
        // hits a web service
        using ( mySoapClient client = MySoapClientFactoryMethod() )
        {
             var someResult = client.DoSomething();
          ...
          ...
        }
   }
} 
```

现在，当您创建要测试的对象时，您定义了一个生成 Soap 服务的适当 Moq 模拟的函数，该函数具有您期望从真实客户端获得的行为而没有副作用（包括能够告诉客户端的代码 Dispose()d），并将该函数传递给您正在测试的类或方法。在生产中，你可以简单地将函数定义为`()=>new mySoapClient()`，或者你可以建立一个 IoC 框架并将 mySoapClient 注册为 IMySoapClient，然后也注册 MyClass；大多数 IoC 框架都足够聪明，可以将委托视为参数并生成注入注册依赖项的方法。

# java - 如何将 Android Activity 转换为界面？

> ID：12204299
> 
> 赞同：5
> 
> 时间：2012-08-30T19:43:27.740
> 
> 标签：java, android

在此处的 Android 文档中：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html) Fragment 实现了一个接口。

在 onAttach() 回调中，似乎将当前 Activity 转换为接口。从概念上讲，这怎么可能，并且在 vanilla Java 中是相同类型的转换标准实践吗？

```
public static class FragmentA extends ListFragment {

// Container Activity must implement this interface
    public interface OnArticleSelectedListener {
        public void onArticleSelected(Uri articleUri);

    OnArticleSelectedListener mListener;

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            mListener = (OnArticleSelectedListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + " must implement OnArticleSelectedListener");
        }
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T19:59:11.120

关于该主题的一些基本知识：

将`interface`a 视为一组功能。如果 a`class`实现了 an `interface`，那么它保证它已经实现了所有的接口函数。

在你的情况下：

如果您有一个对象，并且您不需要的只是您的对象实现的接口的功能，那么您可以将该对象处理（并强制转换）到该接口。这样你就失去了关于你的对象的“信息”，因为你将无法使用它的功能（除了接口功能），但有时它就足够了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T19:53:04.520

从实现某个接口的类创建的任何对象也是该接口的实例。

考虑一下：

```
public class Main {
    public static void main(String[] args) {
        MyClass mine = new MyClass();
        checkIsFoo(mine);
    }

    public static void checkIsFoo(MyClass mine) {
        System.out.print(mine+"");
        if (mine instanceof MyFoo)
            System.out.println(" is Foo!");
        else
            System.out.println(" is not Foo!");
    }
    public static interface MyFoo {
        //
    }
    public static class MyClass implements MyFoo {
        //
    }
} 
```

在这种情况下，会打印出以下内容：`Main$MyClass@52c8c6d9 is Foo!`. 这表明该`MyClass`对象也是 的一个实例`MyFoo`。`(MyFoo) mine`由于它们是共享实例，因此也允许调用强制转换。

正如@antlersoft 所说，这是原版 Java 的一部分（可以在[这里](http://www.coderanch.com/t/368060/java/java/Casting-Interfaces)看到）。

因为，在这种情况下，`Activity`传递的 to`onAttach`应该*始终*是既是 the`Activity`又是 的对象，`OnArticleSelectedListener`将其转换为`OnArticleSelectedListener`应该总是成功的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T19:49:14.363

如果活动或其基类之一被声明为实现接口，当然可以将其转换为接口。

这是 vanilla Java 中的标准做法。

但是，如果您不确定将调用 onAttach 的值，则应在执行此案例之前使用 instanceof 进行测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-02T15:58:11.500

在 Android Developer Guide 文档中，在 Fragment 部分中，在为活动创建事件回调中，写道：

> mListener 成员持有对 OnArticleSelectedListener 的活动实现的**引用**

什么是 mListener？

答案是：

侦听器（接口）类型的对象，其中活动对象位于其中！此活动对象在转换过程中，除了与 Listener 接口相同的方法外，丢失了所有字段和方法。所以，在片段中，当我们调用 mListener 做一个方法时：

```
mListener.exampleMethod(); 
```

简而言之，“嘿，mListener！” 意思是，“嘿活动对象，除了从接口获取的方法之外，它丢失了所有方法”，执行那个方法！

*我很抱歉英语不好！*

# visual-studio-lightswitch - 没有输入新数据时，lightswitch如何抑制“关闭前保存更改”消息

> ID：12204300
> 
> 赞同：3
> 
> 时间：2012-08-30T19:43:29.870
> 
> 标签：visual-studio-lightswitch

我在 Lightswitch 中有一个默认的数据输入屏幕。问题是，当用户不想输入新记录时，用户会关闭屏幕以导航到别处。关闭表单后，用户会看到“关闭前保存更改？” 信息。在用户未在此屏幕中输入任何数据的情况下，有没有办法可以抑制此消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:01:07.757

在屏幕的*Closing*方法中，您可以为屏幕绑定的实体（我在下面的代码中称为*EntityPropertyName ）添加对**DiscardChanges的调用。*

 ***VB：**

```
Me.EntityPropertyName.Details.DiscardChanges 
```

**C＃：**

```
this.EntityPropertyName.Details.DiscardChanges(); 
```*

# r - Bin 计数直方图

> ID：12204303
> 
> 赞同：0
> 
> 时间：2012-08-30T19:43:44.827
> 
> 标签：r

我有一个如下所示的数据集：

```
 X1   X2 
546   1   7.893310 
547   0   9.723409 
548   0   9.256349  
549   1 -21.008398 
550   5   0.151026 
```

我想在 X 轴上创建一个带有 X2 箱的直方图。y 轴需要按 bin 包含 X1 的总和（不是频率）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:50:28.297

看看`cut`你的数据。然后`tapply`是你的总和。

```
> dat$cuts <- cut(dat$X2, c(-Inf, 0, 8, 16, Inf))

> dat
    X1         X2     cuts
546  1   7.893310    (0,8]
547  0   9.723409   (8,16]
548  0   9.256349   (8,16]
549  1 -21.008398 (-Inf,0]
550  5   0.151026    (0,8]
> 
> tapply(dat$X1, dat$cuts, sum)
 (-Inf,0]     (0,8]    (8,16] (16, Inf] 
     1         6         0        NA 
```

然后你可以绘制许多不同的方法，最简单的：

```
barplot(tapply(dat$X1, dat$cuts, sum)) 
```

# ios - OSX 和 iOs 蓝牙 LE 连接

> ID：12204304
> 
> 赞同：0
> 
> 时间：2012-08-30T19:43:45.937
> 
> 标签：ios, macos, bluetooth-lowenergy

我正在尝试在我的 iPhone (CBPeripheralManager) 和我的 Macbook Pro (CBCentralManager) 之间建立蓝牙 LE 连接

我可以发现我的 iPhone，我可以读取 RSSI 值，并使用我的服务 uuid 获取广告数据包。**但是uuid倒过来了！**

如果我调用 connectPeripheral 没有任何反应 - 没有回调或任何事情，但是当查看状态栏中的蓝牙图标时，我可以看到我的 iPhone 作为定制服务连接 - 那么为什么我不得到**didConnectPeripheral** -Callback 呢？！

我希望有人知道发生了什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:48:09.327

我忘记了保留我的 CBPeripheral - 因为我使用的是 ARC，所以显然我必须将它添加到 NSMutableArray！

*   反转的 UUID 仍有待讨论！

# javascript - asp经典对象到javascript对象并使对象向下滑动

> ID：12204305
> 
> 赞同：0
> 
> 时间：2012-08-30T19:43:45.827
> 
> 标签：javascript, jquery, collections, asp-classic, slidedown

这里有人知道如何将 ASP 集合存储到 Javascript 集合吗？我从以前的帖子中得到了一个代码，但没有投入使用，我一定是把代码放在了错误的地方。

我目前正在开发一个应用程序，其中一旦文档准备好，来自 ASP 集合的每个变量都会一次向下移动一个。我决定使用 jquery 向下滑动每个值，因为它有一个 slideDown 事件。但是当我从集合中滑下项目时，同时滑下所有项目。这里的任何人都知道如何做到这一点或提出更好的方法来做到这一点？

```
<%

        Dim objDictionary, Key,searchWord, myVar,a,i, break
        searchWord = request.QueryString("searchWord")

        Set objDictionary = CreateObject("Scripting.Dictionary")
        objDictionary.CompareMode=1
        objDictionary.Add "Hello","hello"
        objDictionary.Add "Age","age"
        objDictionary.Add "height","height"
        objDictionary.Add "sample","sample"
        objDictionary.Add "words","words"

        Response.Write "<div id='toFall'>"
        if objDictionary.Exists(searchWord) then
            objDictionary.Remove(searchWord)
           a = objDictionary.Keys

            for i=0 to objDictionary.Count-1
            Response.Write( "<div class='fall'>" + a(i)) 
            Response.write("<br />")
            Response.write("</div>")

            next
            set objDictionary=nothing
        else 
            a = objDictionary.Keys

            for i=0 to objDictionary.Count-1
            Response.Write( "<div class='fall'>" + a(i)) 
            Response.write("<br />")
            Response.write("</div>")
            next
            set objDictionary=nothing

        end if      

        Response.write "</div>" 

'got this code from my previous post but didn't got it working  
        Sub CollectionToJavaScript(oCollection, sClientSideName) 
            Dim blnFirst
            blnFirst = True
            Response.Write("<" & "script" & " type=""text/javascript"">")
            Response.Write("var " & sClientSideName & " = {")
            For Each key In objDictionary.Keys
                If Not(blnFirst) Then Response.Write(", ")
                Response.Write( key & ": " & objDictionary(key) )
                blnFirst = false
            Next
            Response.Write("};")
            Response.Write("</" & "script>")
            Call CollectionToJavaScript (objDictionary, "myCollection")
        End Sub

        %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:28:09.913

您的代码中有几个错误：

1.  在调用 CollectionToJavaScript 子之前，您将字典对象设置为空
2.  您需要在 CollectionToJavaScript 子中使用 oCollection
3.  Response.Write(key & ": " & objDictionary(key) )
    blnFirst = false的定位

    ```
    <%    
    Dim objDictionary, Key,searchWord, myVar,a,i, break         
    searchWord = request.QueryString("searchWord")            

    Set objDictionary = CreateObject("Scripting.Dictionary")         
    objDictionary.CompareMode=1         
    objDictionary.Add "Hello","hello"         
    objDictionary.Add "Age","age"         
    objDictionary.Add "height","height"         
    objDictionary.Add "sample","sample"         
    objDictionary.Add "words","words"           

    Response.Write "<div id='toFall'>"         

    if objDictionary.Exists(searchWord) then     

        objDictionary.Remove(searchWord)            
        a = objDictionary.Keys               
        for i=0 to objDictionary.Count-1             
            Response.Write( "<div class='fall'>" + a(i))              
            Response.write("<br />")             
            Response.write("</div>")              
        next                    

    else   

        a = objDictionary.Keys              
        for i=0 to objDictionary.Count-1             
            Response.Write( "<div class='fall'>" + a(i))              
            Response.write("<br />")             
            Response.write("</div>")             
        next                   

    end if                

    Response.write "</div>"   'got this code from my previous post but didn't got it working           

    Sub CollectionToJavaScript(ByRef oCollection, sClientSideName)              
    Dim blnFirst             
    blnFirst = True             

        Response.Write("<" & "script" & " type=""text/javascript"">")             
        Response.Write("var " & sClientSideName & " = {")             

        For Each key In oCollection.Keys                 
        If Not(blnFirst) Then 
            Response.Write(", ")                       
        End If    
        Response.Write( key & ": " & oCollection(key) )     
        blnFirst = false       
        Next   

    Response.Write("};")             
    Response.Write("</" & "script>")             
    End Sub          

    Call CollectionToJavaScript (objDictionary, "myCollection")    

    set objDictionary=nothing      

    %> 
    ```

# nhibernate - NHibernate Image Storage - byte[] 值的长度超过了配置的长度

> ID：12204306
> 
> 赞同：12
> 
> 时间：2012-08-30T19:43:49.057
> 
> 标签：nhibernate, fluent-nhibernate

我正在使用 Fluent NHibernate 并尝试存储图像。小图像工作，但大图像不工作，我在保存到数据库（SQL Server）时收到此错误：

> **例外：**为 CFC.Domain.Vehicle.Image 脱水属性值时出错
> 
> **内部异常：** byte[] 值的长度超过了映射/参数中配置的长度。

这是我的映射：

```
mapping.Table("Vehicle");
mapping.Id(x => x.Id, "VehicleID");
mapping.Map(x => x.Year).Not.Nullable();
mapping.Map(x => x.Image).CustomSqlType("VARBINARY(MAX)").Length(int.MaxValue); 
```

“图像”属性是一个字节[]。

注意 CustomSqlType 和长度，它会在数据库中创建正确的 nvarchar(max) 列。我已经阅读了无数其他谈论类似问题的帖子，但没有一个涵盖这个特定的错误。并不是数据被截断然后保存，它只是在发送 SQL 查询之前出错。

我正在测试的图像只是标准的 Windows 7 示例图像（当然是 Penguins.jpg），但 1kb 左右的图像可以正常工作。

感谢您的帮助！如果有帮助，这里是堆栈跟踪的开头。

> [HibernateException: byte[] 值的长度超过了映射/参数中配置的长度。]
> NHibernate.Type.AbstractBinaryType.Set(IDbCommand cmd, Object value, Int32 index) +207
> NHibernate.Type.NullableType.NullSafeSet(IDbCommand cmd, Object value, Int32 index) +397
> NHibernate.Type.NullableType.NullSafeSet(IDbCommand st, Object value, Int32 index, Boolean[] settable, ISessionImplementor session) +62
> NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Object rowId, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 table, IDbCommand statement, ISessionImplementor session, Int32 index) +350
> 
> [PropertyValueException：为 CFC.Domain.Vehicle.Image 脱水属性值时出错]
> NHibernate.Persister.Entity.AbstractEntityPersister.Dehydra（对象 id，对象 [] 字段，对象 rowId，布尔 [] includeProperty，布尔 [][] includeColumns，Int32表，IDbCommand 语句，ISessionImplementor 会话，Int32 索引）+510
> NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 j, IDbCommand st, ISessionImplementor会话）+59 NHibernate.Persister.Entity.GeneratedIdentifierBinder.BindValues（IDbCommand ps）+79
> NHibernate.Id.Insert.AbstractReturningDelegate.PerformInsert（SqlCommandInfo insertSQL，ISessionImplementor session，IBinder binder）+102
> NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object[] fields, Boolean[] notNull, SqlCommandInfo sql, Object obj, ISessionImplementor session) +265
> NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object[] fields, Object obj, ISessionImplementor session) +358
> NHibernate.Action.EntityIdentityInsertAction.Execute() +262
> NHibernate.Engine.ActionQueue.Execute(IExecutable 可执行文件) +56
> NHibernate.Event.Default.AbstractSaveEventListener.PerformSaveOrReplicate(Object entity, EntityKey key, IEntityPersister persister, Boolean useIdentityColumn,对象任何东西，IEventSource 源，布尔值 requiresImmediateIdAccess) +811
> NHibernate.Event.Default.AbstractSaveEventListener.PerformSave（对象实体，对象 id，IEntityPersister 持久化，布尔 useIdentityColumn，对象任何东西，IEventSource 源，布尔 requiresImmediateIdAccess）+543
> NHibernate.Event.Default.AbstractSaveEventListener.SaveWithGeneratedId（对象实体，字符串 entityName，对象任何东西，IEventSource 源，布尔值 requiresImmediateIdAccess) +257

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-10-02T12:18:43.753

我知道发布回复有点晚了，但我刚刚遇到了同样的错误。以下是我的解决方案 - 希望它在未来对其他人有所帮助。

我变了：

```
Map(x => x.ByteArrayProperty); 
```

至：

```
Map(x => x.ByteArrayProperty).Length(int.MaxValue); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-30T20:22:47.570

叹息，有时经过 2 天的研究，您只需将问题发布到 StackOverflow 即可立即找到答案。

我不确定根本原因，但在映射出现问题时直接指定属性。为了解决这个问题，我最终在下面创建了一个新的“BinaryLengthConvention”。

```
public class BinaryColumnLengthConvention : IPropertyConvention, IPropertyConventionAcceptance
{
    public void Accept(IAcceptanceCriteria<IPropertyInspector> criteria)
    {
        criteria.Expect(x => x.Property.PropertyType == typeof(byte[]));
    }

    public void Apply(IPropertyInstance instance)
    {
        instance.Length(2147483647);
        instance.CustomSqlType("varbinary(MAX)");
    }
} 
```

神奇的是，这一切都开始起作用了。希望搜索该错误消息的其他人发现这很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-17T17:30:17.553

我在存储大图像时遇到了同样的错误。我通过将长度属性添加到图像字段来解决`<property name="image" length="2147483647"/>`

# drupal - 分类和搜索

> ID：12204307
> 
> 赞同：0
> 
> 时间：2012-08-30T19:44:04.893
> 
> 标签：drupal, drupal-7, drupal-modules

我有一本 Drupal 的书，有 17 章，其中有几个小章。我想设置一个过滤搜索，让我将搜索条目限制为仅指定的章节。我已经用分类词汇标记了章节，并使用自定义搜索模块，我设置了一个搜索，让您可以按分类进行过滤。

但是，当我这样做时，搜索不适用于与章节关联的子页面。例如，在使用我的方法并搜索第 1 章时，我没有从第 1 章的子章节中得到任何结果。有没有办法解决这个问题？还是我必须以不同的方式设置搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:14:58.287

您应该将过滤器更改为“有分类术语（有深度）”

这还将包括您的情况中的子实体或子章节。

# asp.net - iis 启动延迟与 aspx 页面

> ID：12204311
> 
> 赞同：6
> 
> 时间：2012-08-30T19:44:29.457
> 
> 标签：asp.net, iis

环境：Windows Server 2003；IIS 6，ASP.NET 2.0.50727

我对我们设置的全新 Web 服务器感到疯狂（请注意，这个问题不会发生在我们其他具有相同配置的 Web 服务器上）。第一次加载和 asp.net 应用程序时，页面会挂起整整一分钟，然后才会在浏览器中显示页面。加载第一页后，一切都运行得非常快。

注 1：您可能会说这是第一次编译应用程序。但我已经排除了这种可能性。我在应用程序的任何地方都放置了跟踪消息，并且所有跟踪消息都在请求页面的一秒钟内运行。因此，应用程序立即编译并运行。但是当应用程序完成页面渲染并打印我的最后一条跟踪消息时，什么也没有发生。IIS 在将完成的页面通过 http 传输到用户的浏览器之前在幕后做了整整一分钟。

注意2：我们发现第一次点击应用程序后一切正常，如果我们等待一个小时，我们就会再次延迟。因此，IIS 在它的缓存中有一些东西会在一个小时后清除并导致我们的站点再次停止。

注意 3：在每次测试之间，我们停止/启动 IIS 以强制它在加载应用程序时挂起。

注意 4：我们查看了任务管理器，以查看 IIS 是否处于峰值状态并占用大量资源来处理某些内容。但事实并非如此。在浏览器显示页面之前，我们确实看到了 50% 的快速峰值，但在前 60 秒内，服务器上只有 1% 的使用率。

注意 5：在另一个测试中，我创建了一个 HelloWorld.html 页面，这不会导致 IIS 挂起。因此，它与第一次通过 http 发送渲染页面时调用 ASP.NET 库有关。此外，由于应用程序已经编译并立即运行，因此只是 asp.net 的一部分将呈现的页面发送到用户的浏览器导致延迟。

有任何想法吗？我们在这里是一个损失。我们所有的其他 Web 服务器都以相同的方式设置并且工作正常，但这是一个新安装。所以一定有一个配置设置被遗漏了，或者可能需要安装一些东西？

谢谢，

布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:13:36.480

如果您有权访问服务器，请确保将应用程序池回收实际记录到事件日志中

cscript adsutil.vbs 获取 w3svc/AppPools/DefaultAppPool/LogEventOnRecycle

您可以将其设置为使用 cscript adsutil.vbs 记录所有内容 Set w3svc/AppPools/DefaultAppPool/LogEventOnRecycle 255

[在这里查看更多](http://support.microsoft.com/kb/332088)

然后检查是否有任何回收。

应用程序初始化、创建工作进程、线程、加载应用程序域和所有引用 dll 可能需要一些时间，这很正常，但 1 分钟的延迟可能是另一回事。

尝试在服务器上预编译应用程序，看看是否有帮助 aspnet_compiler -m /LM/W3SVC/[site id ]/Root/[your appname]

如果您想更深入地挖掘，可以查看事件跟踪 ETW。

1.  logman 查询提供程序
2.  将 IIS /ASP.NET 相关的 Guid 保存到 iisproviders.txt 之类的文件中
3.  logman start ExampleTrace -pf iisproviders.txt -ets -rt
4.  复制
5.  LogParser "SELECT * FROM ExampleTrace" -i:ETW
6.  logman 停止 ExampleTrace -ets

您可以在此处找到更多信息[疑难解答 appdomain 重新启动和 ETW 跟踪的其他问题](http://blogs.msdn.com/b/tess/archive/2008/11/06/troubleshooting-appdomain-restarts-and-other-issues-with-etw-tracing.aspx)

如果 w3wp.exe 有 TCP 连接超时或使用 Procmon 以获取其他线索，我还会使用 procexp 检查 w3wp.exe。

如果您有使用windbg 的经验，那么您可以向应用程序发出请求，然后快速将调试器附加到进程

```
windbg -p [process id of the app pool]
.loadby sos mscorwks
g 
```

并从那里拿走。如果有异常，进程崩溃等，你应该能够抓住它......

一旦我们遇到了这样一个奇怪的服务器问题并且 .NET 重新安装解决了这个问题，仍然不确定罪魁祸首是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:07:56.290

可能是此框中的一些 aspnet.config 设置与其他设置不同。您是否尝试过将他们的配置文件复制到此服务器？似乎有证书选项以及注册表修改，您可以在页面初始加载期间消除一些滞后时间（预编译除外）

看[这里](http://blogs.msdn.com/b/asiatech/archive/2011/04/26/asp-net-application-loads-slowly-the-first-time.aspx)和[这里](http://blogs.msdn.com/b/tom/archive/2008/10/28/web-site-stops-responding-for-15-25-seconds.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T23:36:26.963

您可能要检查的一件事是页面加载时是否正在进行任何数据库访问。这可能会在初始页面加载期间阻止页面的创建。然后，当查询被缓存时（通过数据库引擎或其他缓存机制，如 memcached），后续页面加载正常工作。

根据你最后的评论，

> 我可以多次停止/启动 IIS，并且应用程序总是立即运行。我以为它是固定好的。但现在我又试了一次（过去几个小时它一直处于闲置状态），现在它又回到了第一个请求上。

这可能意味着缓存已过期，因此需要再次访问数据库，从而导致页面加载延迟。

# azure - Azure ETag 标头出现格式错误

> ID：12204312
> 
> 赞同：2
> 
> 时间：2012-08-30T19:44:30.987
> 
> 标签：azure, cdn, etag

ETag 需要引用，但 Azure CDN 会生成未引用的 ETag。有没有人看到或者你预计中间缓存会因此而出现问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:36:47.003

您如何分发您的 CDN 内容？您使用的是 Windows Azure Web 角色还是仅使用 CDN 配置？看看您如何验证 ETAG 没有报价会很有趣。

我只是检查了它们在引用中显示的源和 HTTP 标头，所以请检查 HTTP 标头并验证它是如何列出的。

# php - Symfony 1.4 中的 sfGuardPlugin - 安装 - 插件没有可用版本

> ID：12204321
> 
> 赞同：0
> 
> 时间：2012-08-30T19:45:15.867
> 
> 标签：php, symfony1, sfguard

我无法在 symfony 1.4 中安装 sfGuardPlugin **我使用命令**：

```
symfony plugin:install sfGuardPlugin 
```

然后我得到：状态“”中的插件“sfGuardPlugin”没有可用的版本

**当我使用**：

```
php symfony plugin:install sfGuardPlugin --release=4.0.2 
```

我得到：无法获取插件“sfGuardPlugin | 4.0.2 | “：”的下载信息不是有效状态

**如果我尝试例如 release=4.0 我得到**：无法获取插件“sfGuardPlugin”的依赖项信息：文件[http://plugins.symfony-project.org:80/REST/r/sfguardplugin/deps.4.0.txt](http://plugins.symfony-project.org:80/REST/r/sfguardplugin/deps.4.0.txt)无效（收到：HTTP/1.0 404 版本不存在）（使用--force-license强制安装）

我使用 MAMP、OS X Lion 和 PHP 5.3.6。

我如何安装 sfGuard？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:33:08.260

我解决了！那是梨的问题。PEAR 已安装，但没有快捷方式。

> 须藤 emacs -rw /etc/path

并将路径添加到您的 MAMP/PHP bin 文件夹。对我来说是：

> /应用程序/MAMP/bin/php/php5/bin

我以前用过（所以我有php5）：

> cd /应用程序/MAMP/bin/php；ln -s php5.3.6 php5

[对于旧版本的 MAMP，php 文件夹只有一个，没有两个]

现在重启终端后你可以在每个地方输入：pear。

现在我可以使用： php symfony plugin:install sfGuardPlugin 并且它可以工作:)

如果您的 pear 不能正常工作，请尝试从路径中删除 pear 配置文件:

```
/Applications/MAMP/bin/php/php5/conf 
```

我希望它会帮助某人。

# printing - 为什么 WMI 查询有时会失败，而其他时候不会？

> ID：12204322
> 
> 赞同：4
> 
> 时间：2012-08-30T19:45:20.807
> 
> 标签：printing, wmi, wmi-query, zebra-printers

我从应用程序的两个不同位置运行相同的代码。我知道它是相同的代码，因为它在一个类中，而该类只有一个面向公众的函数。两个地方都使用相同的参数调用函数，并且都在 UI 线程中运行。

该函数使用异步 WMI 查询按名称搜索特定打印机-->

```
 var searcher =
                new ManagementObjectSearcher(
                    "SELECT * from Win32_Printer WHERE Name LIKE '%ZDesigner GX430t'");

            // Create an observer to trigger a callback when the search is completed.
            var watcher = new ManagementOperationObserver();
            watcher.Completed += PrinterSearchCompleted;
            watcher.ObjectReady += PrinterSearchReady;

            // Look for the printer
            _printerFound = false;
            _searchCompleted = false;
            searcher.Get(watcher); 
```

我遇到的问题是当我从一个位置运行 ObjectReady 事件时不会触发它，而当我从另一个位置运行它时，它会一直被触发。

此外，另一个问题是这似乎是特定于计算机的。我运行这个的一些计算机工作得很好，其他的则表现出我上面描述的问题。

任何想法我应该寻找什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T11:25:42.513

几件事要尝试：

*   检查 WMI 服务是否在所有计算机上运行。
*   在不工作的计算机上重新启动 WMI 服务。

您可能会发现这篇[文章](http://technet.microsoft.com/en-us/library/ff406382.aspx)很有用。

如果它是 Windows 7 或 Windows Server 2008 R2 服务器，则 WMI 存在内存泄漏问题。检查[这个](http://support.microsoft.com/kb/981314)。

# android - 考虑 ListView 排序，同时忽略 Android 中的前导“The”

> ID：12204323
> 
> 赞同：0
> 
> 时间：2012-08-30T19:45:24.610
> 
> 标签：android, sorting, android-listview, android-arrayadapter

我有一个`ListView`由三 (3) 个填充`ArrayList`的：

`items`,`ratings`和`comments`

但是，我需要通过忽略前导“the”来对项目进行排序。我已经通过重新排列`items` `ArrayList`使用 a `Collections.sort`（见下面的代码）来实现这一点，但这是问题所在：评论和评级没有重新排列，所以它在`ListView`.

例如，如果列表是：

1.  汽车 3 4
2.  人 5 3
3.  动物 7 4

排序后`items`我得到：

1.  动物 3 4
2.  汽车 5 3
3.  人 7 4

因此，`items`它们正在按我的意愿排列，但相关联的`comments`并`ratings` 没有排序。我不确定如何做到这一点以及将其放置在哪里。我认为在 ArrayAdapter 中？

这是我更改`items`列表的代码：

```
 Comparator<String> ignoreLeadingThe = new Comparator<String>() {
            public int compare(String a, String b) {
                a = a.replaceAll("(?i)^the\\s+", "");
                b = b.replaceAll("(?i)^the\\s+", "");
                return a.compareToIgnoreCase(b);
            }
        };

        Collections.sort(items, ignoreLeadingThe); 
```

这是问题吗？我可以在哪里以及如何根据项目列表的位置对评分和评论列表进行排序？

**编辑：**

这是我的 getView 代码`ArrayAdapter`：

```
 ItemObject io = getItem(position);
    String name = io.name;
    String total = io.total;
    String rating = io.ratings;
    String comment = io.comments;

    holder.t1.setText(name);
    holder.t2.setText(total);
    holder.t3.setText(comment);
    holder.t4.setText(rating); 
```

注意：上面的例子中我没有提到第 4 个`ArrayList`调用。`total`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:52:01.660

您应该考虑创建一个类来将您的项目包装在 ArrayList 中，如下所示：

```
class MyItem {
    String item;
    int ratings;
    int comments;
} 
```

然后用这些对象的 ArrayList 代替：

```
List<MyItem> myList = new ArrayList<MyItem>(); 
```

然后在你的比较器中，就像你正在做的那样做，但是测试`MyItem.item`而不是仅仅`a`and `b`。像这样的东西：

```
Comparator<MyItem> ignoreLeadingThe = new Comparator<MyItem>() {
    public int compare(MyItem a, MyItem b) {
        a.item = a.item.replaceAll("(?i(^the\\s+", "");
        b.item = b.item.replaceAll("(?i(^the\\s+", "");
        return a.item.compareToIgnoreCase(b.item);
    }
};

Collections.sort(myList, ignoreLeadingThe); 
```

# jquery - 选择日期时保持内联全年日期选择器日历不会移动

> ID：12204329
> 
> 赞同：0
> 
> 时间：2012-08-30T19:45:56.230
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在使用[jQuery UI - 自定义小部件 - Datepicker to Whole Year Calendar](https://stackoverflow.com/questions/7583138/jquery-ui-custom-widget-datepicker-to-whole-year-calendar)中概述的方法来显示全年日历。每当我单击一个日期时，日历就会滚动以在位置 0 处显示单击日期的月份。我希望日历在我选择日期时保持在原位。我尝试了以下方法，但无济于事，以防止日历移动：

1.  将 showCurrentAtPos 更新到 onChangeMonthYear 处理程序中的选定月份。
2.  在 onSelect 处理程序中更改 showCurrentAtPos。
3.  在 onSelect 处理程序中将实际日期设置为当前年份的第一天。

选项 1 不起作用，因为仅在单击上一个和下一个链接以更改月份而不是选择日期时才调用 onChangeMonthYear。

选项 2 似乎是在重新渲染日历之前设置值。

选项 3 失败的原因与选项 2 相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:38:06.773

尝试以下操作：

1.  通过事件获取选定的文本`onSelect`（就像你已经做的那样）。
2.  使用`beforeShow`事件将日期设置为年初。

这样，每次单击日期选择器都会显示，并从 1 月 1 日开始。缺点：单击日期选择器后，先前选择的值将被覆盖。

类似于下面的代码：

```
$( "#datepicker" ).datepicker({
        numberOfMonths: 12,
        defaultDate: "01/01/12",
        onSelect: function(dateText,inst) {
            console.log("This is currently selected date: " + dateText);

        },
        beforeShow: function(input, inst) { 
            $( "#datepicker" ).datepicker( "setDate" , "01/01/12" );
         }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:09:55.267

到目前为止，我能找到的唯一解决方案是在 onSelect 处理程序的末尾执行以下代码：

```
var parts = dateText.split('-');
setTimeout(function() {
    // This timeout keeps the calendar from moving around and shifting
    // the first month from january to the currently selecte month.
    // For some reason it keeps the red date as the intended one.
        $weeklycalendar.datepicker('setDate', parts[0]+'-01-01');
}, 0); 
```

这显然是一个脆弱的解决方案，因为它取决于比赛条件和时间。如果超时功能触发得太快，它会中断，如果触发太晚，则会导致视觉跳跃。

# python - 找不到 django/apache/mod_wsgi 的 .pyc 文件

> ID：12204330
> 
> 赞同：1
> 
> 时间：2012-08-30T19:46:13.447
> 
> 标签：python, django, mod-wsgi, pyc

我正在使用 mod_wsgi/apache 在 python2.7 上运行 Web 应用程序。一切都很好，但我找不到任何 .pyc 文件。它们不是用 mod_wsgi 生成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:58:07.830

默认情况下，apache 可能对您的 django 应用程序目录没有任何写入权限，这在安全方面*是一件好事。*

现在，Python 将在每次 apache 重新启动时重新编译您的代码，然后将其缓存在内存中。

因为这是一个长寿的过程，所以没关系。

注意：如果你真的想拥有这些 pyc，请给你的 apache 用户对源目录的写访问权限。

注意 2：当您从 apache 共享的测试实例 manage.py 开始时，这可能会造成很多混乱，因为这会将这些 pyc 创建为 root，并且如果您随后运行 apache，尽管源代码发生更改，也会保留它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:01:21.453

第一次导入模块时，或者源比当前编译文件更新时，`.pyc`通常会在与文件相同的目录中创建一个包含已编译代码的`.py`文件。因此，如果您不导入模块，则不会创建任何文件。

除此之外，`.pyc`可能无法创建文件是目录的权限问题。例如，如果您以一个用户的身份开发但以另一个用户的身份运行，例如您正在使用 Web 服务器进行测试，则可能会发生这种情况。`.pyc`如果您正在导入模块并且 Python 有能力（权限、可用空间等）将已编译的模块写回目录，则文件的创建是自动的。

**注意**- 运行脚本不被视为导入并且不会`.pyc`创建。

如果需要`.pyc`为未导入的模块创建文件，可以使用[`py_compile`](http://docs.python.org/library/py_compile.html)和[`compileall`](http://docs.python.org/library/compileall.html)模块。

# android - getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON) 完全没有反应

> ID：12204336
> 
> 赞同：2
> 
> 时间：2012-08-30T19:46:38.660
> 
> 标签：android

我的主要活动中有此代码。

```
 protected void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.startactivity);

            getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
            ... 
```

但是过了一会儿屏幕仍然变暗，有什么线索会发生这种情况吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T20:01:39.850

从[文档中`setFlags()`](http://developer.android.com/reference/android/view/Window.html#setFlags%28int,%20int%29)（这`addFlags()`是一种方便的方法）：

> 请注意，必须在创建窗口装饰之前设置一些标志（通过第一次调用 setContentView(View, android.view.ViewGroup.LayoutParams)

这意味着您应该在致电`addFlags()`之前将您的电话移至`setContentView()`。@nandeesh 已经发布了这个答案，但删除了它——我不知道为什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T11:11:30.473

在启用 USB 调试的松下 Toughpad FZ-B2 上成功了。画面现在继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-30T11:26:52.073

尝试在 onAttachedToWindow() 方法中添加标志。

```
@Override
public void onAttachedToWindow() {
    super.onAttachedToWindow();
    Window window = getWindow();
    window.addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
} 
```

# php - 使用 PHP 和 openssl 并将其存储在 MySQL 中 - 无法解密数据

> ID：12204339
> 
> 赞同：2
> 
> 时间：2012-08-30T19:46:47.480
> 
> 标签：php, mysql, openssl

我想用来`openssl_public_encrypt`加密数据并将其存储在 MySQL 数据库中。然后，当我需要数据时，我想`SELECT`从 MySQL 数据库中获取它并使用`openssl_private_decrypt`它来解密它。加密后，我`base64`用于对 MySQL 的数据进行编码，并在解密之前再次对数据进行解码。

这是我用来加密数据及其`INSERT`在数据库中的代码：

```
<?php
    require_once('default.inc.php');
    mysql_connect_selectdb($host,$username,$password,$database);
    function encrypt($string) {
    $publickey = '-----BEGIN PUBLIC KEY-----
    PUBLIC KEY HERE
    -----END PUBLIC KEY-----';
        openssl_public_encrypt($string,$encryptedstring,$publickey);
        return $encryptedstring;
    }
$number = base64_encode(encrypt('1234567890123456'));
$qry = "UPDATE table SET number='$number' WHERE id='120006'";
$result = mysql_query($qry);
if (!$result) {
    die(mysql_error());
}
?> 
```

该`default.inc.php`文件将错误报告设置为 E_ALL 并且还定义了 mysql 连接变量和`mysql_connect_selectdb()`函数。它可以很好地插入数据库，并且没有输出到屏幕。

这是我`SELECT`从数据库中使用的代码并对其进行解密：

```
<?php
require_once('default.inc.php');
mysql_connect_selectdb($host,$username,$password,$database);
$key = '-----BEGIN RSA PRIVATE KEY-----
PRIVATE KEY HERE
-----END RSA PRIVATE KEY-----';
function decrypt($string,$privatekey) {
    openssl_private_decrypt($string,$decryptedstring,$privatekey);
    return $decryptedstring;
}
$qry = "SELECT * FROM table WHERE id='120006'";
$result = mysql_query($qry);
if ($result) {
    if (mysql_numrows($result) == '1') {
        $data = mysql_fetch_assoc($result);
        $number = decrypt(base64_decode($data['number']),$key);
        echo 'Number: '.$number;
    }
    else {
    echo 'no rows';
}
}
else {
    die(mysql_error());
}
?> 
```

除了 之外，没有任何输出到屏幕`Number:`。我不知道为什么它不解密。我可以`$data['number']`直接从数据库中回显它，它可以很好地显示为 base 64 编码数据，并且我可以在数据经过 base 64 解码后回显它，它在我的屏幕上显示为二进制文件，但是当我尝试解密它时没有输出。

MySQL 的字段编号是`VARCHAR(128)`（已经尝试过`VARBINARY`，`BINARY`和`BLOB`），`VARCHAR`应该没问题`base64`，并且它是一个`latin1_swedish_ci`排序规则。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:24:31.377

我想到了。列`number`是 a`VARCHAR(128)`但是插入的字符串的长度是`172`，因此字符串的末端被切断。没有字符串的结尾，它没有正确解密并返回`NULL`.

# c# - Rounding Issue using Math.Round

> ID：12204342
> 
> 赞同：3
> 
> 时间：2012-08-30T19:47:05.197
> 
> 标签：c#, vb.net, math, rounding, bankers-rounding

```
Module Module1
Public Sub Main()
    Dim values() As Double = {43.523, 12.65, 43.565}
    For Each value As Double In values
        Console.WriteLine("{0} --> {1}", value, Math.Round(value, 2))
    Next
    Console.ReadLine()
End Sub
End Module 
```

The above code results as

*   43.523 --> 43.52

*   12.65 --> 12.65

*   43.565 --> 43.56

I need 43.565 --> 43.57 and not 43.565 --> 43.56\. But i still need the other 43.523 --> 43.52 and 12.65 --> 12.65 rounded as is.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T19:50:25.597

Firstly, if exact decimal values are of concern to you, you should consider using `Decimal` instead of `Double`. In particular, 43.565 isn't *exactly* representable as a `Double` to start with.

However, if you want to specify the behaviour for "midpoints" (i.e. where it could reasonably round up or down), use the [overload with a `MidpointRounding` parameter](http://msdn.microsoft.com/en-us/library/f5898377.aspx):

```
Console.WriteLine("{0} --> {1}", value, _
                  Math.Round(value, 2, MidpointRounding.AwayFromZero)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T19:49:05.607

You can use:

```
Math.Round(value, 2, MidpointRounding.AwayFromZero) 
```

For details, see the [overload of Math.Round](http://msdn.microsoft.com/en-us/library/f5898377.aspx) which accepts a `MidpointRounding`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T19:50:07.307

Use

```
Math.Round(value, 2, System.MidpointRounding.AwayFromZero) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T19:51:14.237

Check out the [MidpointRounding](http://msdn.microsoft.com/en-us/library/system.midpointrounding.aspx) parameter:

```
Math.Round(43.565, 2, MidpointRounding.AwayFromZero) 
```

Should give you 43.57

# ios - 如何设置UILabel的文本参数

> ID：12204344
> 
> 赞同：1
> 
> 时间：2012-08-30T19:47:13.500
> 
> 标签：ios, uilabel

我看到了一个关于如何设置 UILabel 参数的有用答案，但问题是它们不是我习惯的任何东西。我如何将这些参数实用地输入到 UILabel 中？

我知道如何做一些，但其他更高级的参数目前不在我的范围内。

```
Plain
fontName: Helvetica-Bold
pointSize: 18.000000
textColor: UIDeviceWhiteColorSpace 1 1
shadowColor: UIDeviceWhiteColorSpace 0 0.44
shadowOffset: CGSize 0 1 
```

分组

```
fontName: Helvetica-Bold
pointSize: 17.000000
textColor: UIDeviceRGBColorSpace 0.298039 0.337255 0.423529 1
shadowColor: UIDeviceWhiteColorSpace 1 1
shadowOffset: CGSize 0 1 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:52:55.387

你是这个意思？

清楚的：

```
label.font = [UIFont fontWithName:@"Helvetica-Bold" size:18.000000];
label.textColor = [UIColor colorWithWhite:1 alpha:1]; // or [UIColor whiteColor];
label.shadowColor = [UIColor colorWithWhite:0 alpha:0.44]; // or [[UIColor blackColor] colorWithAlphaComponent:0.44]
label.shadowOffset = CGSizeMake(0, 1); 
```

分组：

```
label.font = [UIFont fontWithName:@"Helvetica-Bold" size:17.000000];
label.textColor = [UIColor colorWithRed:0.298039 green:0.337255 blue:0.423529 alpha:1];
label.shadowColor = [UIColor colorWithWhite:1 alpha:1]; // or [UIColor whiteColor];
label.shadowOffset = CGSizeMake(0, 1); 
```

# haskell - “映射”扫描

> ID：12204345
> 
> 赞同：6
> 
> 时间：2012-08-30T19:47:19.087
> 
> 标签：haskell, higher-order-functions

给定一个 list `:: [(Foo, Bar)]`，我想在`Bar`s 上执行 scanl1，但保留它们的`Foo`“标签”。

即我想要一个带有 type 的函数`:: [(a, b)] -> ([b] -> [c]) -> [(a, c)]`，这样我就可以传递一个 curried`scanl1`作为第二个参数。

我可以递归地编写它，但感觉好像有一种方法可以组合高阶函数来做到这一点。

这是否已经可以通过标准功能实现？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T22:22:00.967

与其编写一个不令人满意的高阶函数，您可以提升您的组合函数以将`Foo`标签穿过，这样您仍然可以使用`scanl1`，这就是您的意思。

```
keeptags :: (Bar -> Bar -> Bar) -> (Foo,Bar) -> (Foo,Bar) -> (Foo,Bar)
keeptags g (_,b) (a',b') = (a',g b b') 
```

现在你可以使用`scanl1`; 拿你的原件`qux :: Bar -> Bar -> Bar`制作

```
scanQux :: [(Foo,Bar)] -> [(Foo,Bar)]
scanQux = scanl1 (keeptags qux) 
```

`keeptags`简单`scanQux`明了。

例如，如果

```
type Foo = Char
type Bar = Int

qux = (+) 
```

然后你得到

```
*Main> scanl1 qux [1..9]
[1,3,6,10,15,21,28,36,45]

*Main> zip "HELLO MUM" [1..9]
[('H',1),('E',2),('L',3),('L',4),('O',5),(' ',6),('M',7),('U',8),('M',9)]

*Main> scanQux $ zip "HELLO MUM" [1..9]
[('H',1),('E',3),('L',6),('L',10),('O',15),(' ',21),('M',28),('U',36),('M',45)] 
```

如你所愿。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T19:54:50.943

你是说，`unzip`？

[http://zvon.org/other/haskell/Outputprelude/unzip_f.html](http://zvon.org/other/haskell/Outputprelude/unzip_f.html)

```
x = zip a c
  where
    (a, b) = unzip my_list
    c = what_ever_you_want_on b 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T10:57:12.783

我的朋友带来了以下实现`keeptags`：

```
import Control.Arrow

keeptags g (_,b) = second (g b) 
```

我认为它仍然可读。

# bitmapsource - Bgr32 格式的 CopyPixels 方法

> ID：12204347
> 
> 赞同：0
> 
> 时间：2012-08-30T19:47:28.837
> 
> 标签：bitmapsource, getpixel

我只是在做一个简单的工作：将位图转换为数组，然后使用该数组，使用 BitmapSource.Create 方法重新创建位图。

但是，我收到错误消息：“值不在预期范围内”。这是我的代码。

```
 Dim width As Integer = bitmapImage.PixelWidth
        Dim height As Integer = bitmapImage.PixelHeight
        Dim bytesPerPixel As Integer = bitmapImage.Format.BitsPerPixel / 8
        Dim stride As Integer = width * bytesPerPixel

        Dim pixelBuffer = New Byte(height * stride - 1) {}
        bitmapImage.CopyPixels(pixelBuffer, stride, 0)

        Dim bmpSource As BitmapSource = BitmapSource.Create(width, height, 96, 96, PixelFormats.Bgr32, Nothing, pixelBuffer, width)
        Image2.Source = bmpSource 
```

任何有关这方面的帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T19:57:14.633

`Dim pixelBuffer = New Byte(height * stride - 1) {}`分配一个字节太少。

例如，每像素 4 字节的 4x4 像素图像将分配 4*4*4-1=63 字节，但需要 64 个字节。

此外，您在这里使用 BGR32（4 字节像素），因此您很安全，但其他像素格式的步幅可能需要向上舍入到下一个 4 字节边界。

BitmapSource.Create 也`stride`作为最后一个参数，而不是`width`.

# dns - CNAME 记录是否也转发 MX 请求？

> ID：12204360
> 
> 赞同：22
> 
> 时间：2012-08-30T19:48:18.203
> 
> 标签：dns, cname, mx-record, a-records

我的 DNS 设置了包含 A 和 MX 记录的域 base.com。还有其他几个域设置了 CNAME 记录，指向 base.com。我是否需要为 CNAME 域设置任何特殊内容（例如额外的 MX 记录），或者 CNAME 记录是否也会转发任何 MX 请求。

**示例：**
发送到 info@otherdomain.com 的电子邮件是否会正确传送到 base.com 的 MX 如果这些（并且只有这些）DNS 记录到位：

```
; A and MX set up for base.com
base.com.  3600  IN  A  123.45.67.89
mail.base.com.  3600  A  123.45.67.89
base.com.  3600  IN  MX  10  mail.base.com.
; CNAME set up for otherdomain.com
otherdomain.com. CNAME  IN  A  base.com. 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-31T00:44:34.610

`CNAME`导致对所有 RR 类型（不包括`CNAME`自身）的查询被定向到目标名称。这包括`MX`. 所以是的，上述区域数据将导致对`otherdomain.com.`'s 的查询`MX`解析为`mail.base.com.`.

试用`dig`或您最喜欢的 DNS 客户端。您不仅可以肯定地确认结果，而且在您得到答案之前，您不必等待 4 小时有人回答您的 SO 问题！

不幸的是，在这种特殊情况下，如果您的域确实是 form `otherdomain.com.`，您将无法为其配置`CNAME`资源记录。这是因为具有`CNAME`记录的域不能同时具有任何其他类型的资源记录。然而，如果`otherdomain.com.`直接位于下方（或另一个 gTLD），则它必然位于区域的顶部，`com.`因此它至少需要记录。`SOA``NS`

# java - 使用 EasyMock 测试构造另一个对象的方法

> ID：12204361
> 
> 赞同：0
> 
> 时间：2012-08-30T19:48:20.257
> 
> 标签：java, unit-testing, easymock

我有这样的方法：

```
public void MyMethod(int p1, int p2) {
  //some logic here
  MyObject mo = new MyObject(var1,var2);
  int returnedId = mo.doOperation(something);
  //Do something with the returnedId;
} 
```

我想测试这个方法，但我不能模拟构造函数调用，所以围绕这个的测试会破坏模块化。我可以使用工厂方法或其他方法来做到这一点，但由于我只有一个构造函数，所以没有意义。

这通常是如何使用 EasyMock 完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:09:43.560

我不确定您是否可以在这里逃脱工厂或将对象作为参数传递。这可能感觉像是一个额外痛苦的世界，但如果您希望模拟对象，您通常必须以特定的风格编写代码。

我会倾向于工厂方向（当然定义为接口）。模拟工厂并让它在调用时返回您的模拟对象`getMyObject()`：

```
public void myMethod(int p1, int p2, MyObject mo) {
  MyObject mo = factory.getMyObject(...args...);
  int returnedId = mo.doOperation(something);
}

public interface SomeFactory {    
  MyObject getMyObject(...args...);    
} 
```

或者您可以创建一个接受 a`MyObject`作为参数的方法的重载版本，但这有点难看：

```
// Test this one, mocking 'mo'
public void myMethod(int p1, int p2, MyObject mo) {
  MyObject mo = new MyObject(var1,var2);
  int returnedId = mo.doOperation(something);
}

public void myMethod(int p1, int p2) {
  myMethod(p1, p2, new MyObject(...));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:18:20.020

仅使用 EasyMock 无法做到这一点。但是有一些变通的解决方案，比如使用[PowerMock](http://code.google.com/p/powermock/)作为 EasyMock 的扩展，这样您就可以模拟静态方法、构造函数调用、最终方法等。

但在此之前，请仔细分析您的问题。你真的需要在`MyObject`里面创建`MyMethod`吗？一般来说，设计类要好得多，其所有依赖项都作为构造函数参数或通过 setter 传入。这就是通常称为“依赖注入”的模式。通过进行依赖注入，您可以避免像您提到的那样的可测试性问题。

Also, `MyMethod` could take `MyObject` as a parameter or it could be obtained by a factory, as Duncan Jones points out. Both solutions are usually better than mixing object instantiation with the application logic.

# jsf - 为什么 JSF 处理整个表单

> ID：12204366
> 
> 赞同：4
> 
> 时间：2012-08-30T19:48:41.397
> 
> 标签：jsf, jboss, richfaces, mojarra

我们正在使用 JSF 开发 Web 应用程序。我们在 Jboss 服务器上使用丰富的面孔。我们有 a4j 命令按钮、命令链接和 a4j js 函数来调用服务器操作。

我们已将限制渲染设置为 true，仅渲染所需的组件。而且我还将执行设置为 "@this" 。我们观察到一个奇怪的行为，所有与表单相关的动作也会随着按钮的点击而执行，即使我们没有为“@this”指定执行值。这大大降低了性能。

这是 JSF 处理 POST 请求的方式，还是我们缺少其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:21:24.513

您当前在问题中描述的绝对**不是**JSF 或 RichFaces 的默认行为。

您的具体问题是在其他地方引起的。根据评论，您似乎已经创建了一个`PhaseListener`用于记录目的，出于某种原因重新执行整个视图。您需要关闭它`PhaseListener`或修复它的实现。

# php - 选择一列最小的行

> ID：12204367
> 
> 赞同：1
> 
> 时间：2012-08-30T19:48:45.423
> 
> 标签：php, mysql, sql

我正在为客户端编写一个简单的 URL 旋转器，他们希望 URL 根据之前显示的最旧的 URL 进行旋转。

我的专栏很简单：

```
url_id | company_id | url | last_clicked 
```

我想获取`company_id`传入 的单行，并且 last_clicked 是与`company_id`.

`url_id`如果所有 last_clicked 值都为空，它还应该随机选择一个。

我认为这可以通过 a 来完成，`GROUP BY`但`HAVING`我似乎无法让查询返回任何内容。

我有这个：

```
$last = $this->db->fetchOne ("SELECT url_id FROM 
        {$this->prefix}urls GROUP BY company_id HAVING MIN(last_clicked) 
        WHERE company_id='$company'"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:29:12.083

这将获取 last_clicked 最小的行，或者如果它们都是 NULL 则随机获取：

```
SELECT url_id FROM urls 
    WHERE company_id = $company
    ORDER BY last_clicked, RANDOM() LIMIT 1; 
```

一个基于`company_id`并且`last_clicked`将极大地帮助的索引：

```
CREATE INDEX urls_ndx ON urls(company_id, last_clicked); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T19:51:43.367

```
SELECT url_id FROM 
TABLE
WHERE company_id='$company'
 AND last_clicked = ( SELECT MIN(last_clicked)
                      FROM TABLE WHERE company_id='$company' ) 
```

# reporting-services - SSRS 创建具有未知列名的表达式

> ID：12204368
> 
> 赞同：0
> 
> 时间：2012-08-30T19:48:48.210
> 
> 标签：reporting-services, ssrs-2008, ssrs-expression

我有一个存储过程，可以将三列数据返回到我们的 SSRS 报告中。存储过程不会为其中两个列设置别名，因此它们以未命名的形式返回。以下是返回数据集的示例：

```
[FundName]      [blank]          [blank]
    Abc         col2val1        col3val1
    Def         col2val2        col3val2
    Ghi         col2val3        col3val3 
```

我希望能够使用 SSRS 中的表达式从第 2 列和第 3 列检索值。下面是从 FundName 检索数据的示例：

```
=Fields!FundName.Value 
```

有没有办法用列的索引或位置替换列名（在本例中为 FundName），如下所示：

```
=Fields![0].Value    //returns FundName values
=Fields![1].Value    //returns column 2 values
=Fields![2].Value    //returns column 3 values 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:01:11.317

如果您的存储过程没有返回列名，那么您不能在 SSRS 中创建数据集，因为它会引发错误

```
An item with the same key is already been added 
```

现在您可以使用 SSRS 中的索引来引用列名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:26:45.467

幸运的是，已经找到了实现这一目标的方法。由于我们的存储过程**无法**更改，并且它没有为 SSRS 返回足够的信息来生成报告（生成的 DataSet 中缺少列名），因此我们更改了 DataSet 的填充方式。

在 DataSet 查询构建器中，我们创建了一个**临时表**并将存储过程插入到该临时表中。插入后，我们选择了填充 DataSet 的临时表中的所有值。现在 DataSet 有 3 列和 3 个列名供我们的报告使用。

```
CREATE TABLE #tempTable (
FundName varchar(50),
col2 dec(15,4),
col3 char(8)
)

insert into #tempTable
exec storedProcedureName

select * from #tempTable

drop table #tempTable 
```

然后您可以像以前一样在表达式中访问这些列值：

```
=Fields!FundName.Value    //returns FundName values
=Fields!col2.Value        //returns column 2 values
=Fields!col3.Value        //returns column 3 values 
```

我希望这可以帮助其他任何人解决这个特定问题。

# django - 在同一个域上获取 node.js 和 Django

> ID：12204369
> 
> 赞同：1
> 
> 时间：2012-08-30T19:48:50.947
> 
> 标签：django, node.js, heroku, websocket, socket.io

对于一个简短的概述/说明，我使用 Django 作为 webapp 的面包和黄油。我想为应用程序添加一堆“实时”功能。更重要的是，我可以使用 Torndao 或 django-socketio 之类的东西。所以我想做的是全力以赴，将 Django 与 node.js 一起使用。基本上，Django 将获取所有数据并处理所有帐户。然后当一条数据发生变化时，它会使用 AMQP 发送一条消息，该消息会将消息路由到 node.js。然后 Node.js 将使用 socket.io 将新数据获取到浏览器。

我的问题是如何让两者一起玩。具体来说，我怎样才能将两者都放在同一个域上，以便当客户端连接到

```
var socket = io.connect('http://thedomain.com'); 
```

它将由 node.js 处理，所有其他请求将转到 Django？另外，如果可能的话，我希望 Django 应用程序在 Heroku 上作为独立应用程序运行，并且 node.js 也可以在独立应用程序的 Heorku 上运行。任何提示或指示将不胜感激！谢谢！

# python - 重命名pydev中的方法不是特定于命名空间的吗？

> ID：12204373
> 
> 赞同：1
> 
> 时间：2012-08-30T19:48:57.510
> 
> 标签：python, methods, pydev, rename

在我提交错误报告之前，我想确保我没有遗漏任何东西。如果我有文件

重构文件

```
class A(object):

  def someMethod(self):
    pass

class B(object):

  def someMethod(self):
    pass

  def someOtherMethod(self):
    self.someMethod() 
```

refac2.py

```
class SomeOtherClass(object):

  def someMethod(self):
    pass 
```

`someMethod`并在方法中执行 Refactoring>Rename on `B.someOtherMethod`，PyDev 会重命名**每个**调用的方法`someMethod`，甚至`refac2.SomeOtherClass.someMethod`. 我的期望是它应该只重命名`B.someMethod`。我四处寻找可能会影响这一点的设置，但似乎全局搜索和替换是唯一可用的行为，IMO 非常危险并且使方法重构无法使用。有什么我想念的吗？

Ubuntu 12.04
Eclipse 3.7.2
PyDev 2.6.0.2012062818

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:10:46.650

目前在 PyDev 中的方法重构几乎无法使用，但我认为原因是，很难找到所有被调用的地方，而且几乎不可能找到所有`someMethod`被调用的地方，因为没有太多关于变量类型的信息，所以它可能是`A`，`B`或`SomeOtherclass`。

# vb.net - 为什么我的 ELSE 语句被跳过？

> ID：12204375
> 
> 赞同：1
> 
> 时间：2012-08-30T19:49:04.607
> 
> 标签：vb.net

我一直在尝试使用 IF/ELSE 语句来查询我的 MySQL 数据库，但似乎无法弄清楚为什么 ELSE 语句被 VB 忽略了。这是代码 - 任何帮助将不胜感激：

```
dbConn = New MySqlConnection("Server=" & FormLogin.ComboBoxServerIP.SelectedItem & ";Port=3306;Uid=qwertyuiop;Password=lkjhgfdsa;Database=zxcvbnm")
    Dim account As Boolean = True
    If dbConn.State = ConnectionState.Open Then
        dbConn.Close()
    End If
    dbConn.Open()
    Dim dbQuery As String = "SELECT * FROM customer WHERE accountNumber = '" & TextBoxSearch.Text & "';"
    Dim dbData As MySqlDataReader
    Dim dbAdapter As New MySqlDataAdapter
    Dim dbCmd As New MySqlCommand
    dbCmd.CommandText = dbQuery
    dbCmd.Connection = dbConn
    dbAdapter.SelectCommand = dbCmd
    dbData = dbCmd.ExecuteReader
    While dbData.Read()
        If dbData.HasRows() = True Then
            MessageBox.Show("Customer Account Found!")
        Else
            MessageBox.Show("No Customer Records Found!  Please try again!")
            dbData.Close()
        End If
    End While 
```

我的意图是用将用数据库中的数据填充我的表单的代码替换“IF”子句中的消息框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:55:03.670

那是因为您已经在阅读它：

```
While dbData.Read()
  If dbData.HasRows() = True Then
    MessageBox.Show("Customer Account Found!")
  Else
    MessageBox.Show("No Customer Records Found!  Please try again!")
    dbData.Close()
  End If
End While 
```

如果您的阅读器没有记录，则将跳过整个 While 循环。

换个方式试试：

```
If dbData.HasRows Then
  While dbData.Read()
    'looping through records here
  End While
Else
  MessageBox.Show("No Customer Records Found!  Please try again!")
End If 
```

还有一个强制性的说明：不要让你的连接保持开放和活跃。使用`Using End Using`支架自动关闭一次性物品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:54:52.617

我不会说它跳过了你的 else 子句，但它可能会以不同于你期望的方式评估你的 if 条件。

就个人而言，我不喜欢将任何东西与 True 进行比较。如果你放弃了`= true`，它会起作用吗？

# php - codeigniter - 从库中初始化一个类

> ID：12204379
> 
> 赞同：0
> 
> 时间：2012-08-30T19:49:23.407
> 
> 标签：php, codeigniter

我有一个模型，其中定义了一个不相关的类。
我正在制作原型，并没有花时间正确地创建它。现在原型已被我的最终用户接受，我正在重新访问并且我想正确地重组我的代码。该类看起来像这样：

```
 <?php

        class myclassABC 
        {

           private $_hostname;
           private $_password;
           private $_username;
           private $_connection;
           private $_data;
           private $_timeout;
           private $_prompt;

           public function __construct($hostname, $password, $username = "", $timeout = 10) 
           {

             $this->_hostname = $hostname;
             $this->_password = $password;
             $this->_username = $username;
             $this->_timeout = $timeout;
            } // __construct

           public function connect() 
           {
           } 

           public function dosomethingelse() 
           {
           } 

        }//end class 
```

我已将所有这些代码移到一个单独的文件中，该文件现在位于我的库文件夹中。但是我在弄清楚如何正确实例化我的模型中的对象时遇到了问题。我试过了：

```
 //pass all the data we need as an array of parameters.
        $params = array('_hostname' => '$ip', '_password' => 'password', '_username' => '');
        $hp = $this->load->library($classname,$params ); 
        $hp->connect();
        $data= $hp->dosomethingelse();
        $hp->close(); 
```

它正在加载正确的类，但我收到以下错误消息：

> 严重性：警告
> 
> 消息：HP5406_ssh::__construct() 缺少参数 2，在第 1095 行的 /var/www/m.racktables/system/core/Loader.php 中调用并定义
> 
> 文件名：库/HP5406_ssh.php
> 
> 行号：22

参数二是密码。
抱歉，这是我第一次尝试使用带有 codeigniter 的库。
如果您能提供一些建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:40:57.787

问题是构造函数不期望一个数组。根据库部分下的 codeigniter 手册中的示例，这就是我要传递的内容。我更改了我的构造函数以接受一个数组，现在它可以工作了。我将发布另一个问题，看看我如何通过个人参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:54:25.610

而不是这样做：

```
$hp = $this->load->library($classname,$params ); //switch model name must be capitalized.
$hp->connect();
$data= $hp->dosomethingelse();
$hp->close(); 
```

做这个：

```
$this->load->library($classname, $params);
$classname = strtolower($classname); // get the classname to lowercase for CI
$this->$classname->connect();
$data = $this->$classname->dosomethingelse();
$this->$classname->close(); 
```

CodeIgniter 将库类实例加载到`$this`. 这有点奇怪，但它与 CI 其余部分的工作方式一致。如果你不喜欢这种方法，你总是可以直接`include()`或`require()`类并以“正常”的方式使用它。

请参阅[创建库](http://codeigniter.com/user_guide/general/creating_libraries.html)的文档。

这是相关部分：

> 在您的任何 Controller 函数中，您可以使用以下标准初始化您的类： `$this->load->library('someclass');`
> 
> 其中 someclass 是文件名，没有“.php”文件扩展名。您可以提交大写或小写的文件名。CodeIgniter 不在乎。
> 
> 加载后，您可以使用***小写***版本访问您的类： `$this->someclass->some_function(); // Object instances will always be lower case`

# map - 返回具有不同值的对象

> ID：12204387
> 
> 赞同：1
> 
> 时间：2012-08-30T19:50:11.417
> 
> 标签：map, f#, sequence, linqpad

有没有办法返回 lambda 表达式中使用的对象，但具有不同的值？我一直在使用“一种 linq-select”的方式，但我想做这样的事情：

```
let bob= tab 
|> Seq.map (fun x -> ignore (x.Value=x.Value+1); x)
|> Seq.iter (fun x -> x.Dump()) 
```

使`x`我序列中的所有 's 的值 +1'ed。

而不是这样做：

```
let bob= tab 
|> Seq.map (fun x -> Ville(IdVille= 9, NoVille=x.Value+1, Nom=x.Nom, __RowVersion = x.__RowVersion))
|> Seq.iter (fun x -> x.Dump()) 
```

编辑：

我期望得到什么：从这里，序列的转储，因此 Iter 和 Dump ......我想要序列是什么？这是一个例子，原始序列，但是在对每个元素应用一个函数并获得结果的副本之后......（对原始序列没有副作用）。

例如，我有一个名字序列，我想要一个原始序列的副本，但名字是大写的。现在想象一下，但是从数据库中获取一系列对象。

编辑2：

我用 LinqPad 和 AdventureWorks 数据库做了一个测试，我这样做了：

```
let dc = new TypedDataContext()

let tab = dc.GetTable<Address>()

let bob = tab 
        |> Seq.map (fun x -> ignore (x.AddressLine1 <- "Bob"); x) 

tab.Dump()
bob.Dump() 
```

2 Dump() 结果是不同的。如果我反转 2 Dump() 调用，则两个结果都是相同的。你是对的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:57:35.677

很难说出你想要做什么，但是改变一个值表明了一种命令式的方法，那么为什么不使用`for`循环呢？

```
for x in tab do
  x.Value <- x.Value + 1
  x.Dump() 
```

你期望什么价值`bob`？`Seq.iter`返回`unit`。如果您在其中发生变异`tab`，`Seq.map`它将具有与`bob`.

编辑

如果您在`map`结果中修改序列的元素，原始序列将是一个且相同的。`map`不打算与副作用一起使用。一个例子：

```
type T(value) =
  member val Value = value with get, set

let tab = [T(0); T(1); T(3)]
let bob = tab |> Seq.map (fun x -> x.Value <- x.Value + 1; x)
tab = (Seq.toList bob) //true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:19:34.910

您可以尝试`map`与对象表达式一起使用来仅更新一个字段：

```
let bob = tab 
|> Seq.map (fun x -> {x with Value = x.Value + 1})
|> Seq.iter (fun x -> x.Dump()) 
```

虽然`bob`如果`Dump()`您使用`iter`. 你需要`map`再次使用它。

**编辑**

这仅适用于[记录类型。](http://msdn.microsoft.com/en-us/library/dd233184.aspx)

# c# - 有条件地更改文本框背景色

> ID：12204389
> 
> 赞同：0
> 
> 时间：2012-08-30T19:50:16.270
> 
> 标签：c#, asp.net

我在 aspx 页面中有几个文本框。如果启用，我想将文本框颜色更改为黄色。我可以为每个文本框单独做。但是有没有一种方法可以让我获取页面的所有文本框集合并检查它们的启用属性并分配背景颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:51:52.393

使用 JQuery 假设他们共享一个公共类“文本框”

```
if (($(".textboxes").attr("enabled")){
    $(".textboxes").css("background-color","green")}
else{
    $(".textboxes").css("background-color","red")}
} 
```

或者对于早期的 javascripts

```
if (($(".textboxes").prop("enabled")){
    $(".textboxes").css("background-color","green")}
else{
    $(".textboxes").css("background-color","red")}
} 
```

# android - 即使应用程序尚未启动，也发送 BroadcastReceiver 请求

> ID：12204392
> 
> 赞同：1
> 
> 时间：2012-08-30T19:50:25.247
> 
> 标签：android

我从文档中了解到

> 从 Android 3.1 开始，如果用户从未启动过相应的应用程序，或者如果用户通过 Android 菜单（在管理应用程序中）明确停止了应用程序，Android 系统将默认从接收 Intent 中排除所有 BroadcastReceiver。

因此，我想知道如果我的应用程序尚未启动，我如何将发送广播发送到接收器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:12:37.920

> 因此，我想知道如果我的应用程序尚未启动，我如何将发送广播发送到接收器。

我要从字面上理解你，意思是*你*想向你写`Intent`的一些人发送广播。`BroadcastReceiver`

如果发送者和发送者`BroadcastReceiver`在同一个应用程序中，则没有问题：如果发送者能够运行，则它能够发送广播。那是因为用户必须做一些事情来运行发送者，比如启动一个活动。

如果发送者和发送者`BroadcastReceiver`在不同的应用程序中，我的理解是发送者可以包含`FLAG_INCLUDE_STOPPED_PACKAGES`在发送者中`Intent`，这将确保`BroadcastReceiver`另一个应用程序中的发送者可以接收广播。

# php - 如何检查一个对象是否可以使用 PHP 实例化

> ID：12204396
> 
> 赞同：4
> 
> 时间：2012-08-30T19:50:46.890
> 
> 标签：php, object, instantiation

我不能这样做，但想知道什么会起作用：

```
is_object(new Memcache){
   //assign memcache object    
   $memcache = new Memcache;
   $memcache->connect('localhost', 11211);
   $memcache->get('myVar');
}
else{
   //do database query to generate myVar variable
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-12T15:24:18.087

您可以使用`class_exists()`来检查一个类是否存在，但如果您可以实例化该类，它将不会返回！

你不能的原因之一可能是它是一个抽象类。要检查这一点，您应该*在*检查`class_exists()`.

对于上面的例子，这可能是不可能的（有一个抽象类，不检查它），但在其他情况下可能会让你头疼:)

```
//first check if exists, 
if (class_exists('Memcache')){
   //there is a class. but can we instantiate it?
   $class = new ReflectionClass('Memcache') 
   if( ! $class->isAbstract()){
       //dingdingding, we have a winner!
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T19:52:32.470

见[**class_exists**](http://php.net/manual/en/function.class-exists.php)

```
if (class_exists('Memcache')){
   //assign memcache object    
   $memcache = new Memcache;
   $memcache->connect('localhost', 11211);
   $memcache->get('myVar');
}
else{
   //do database query to generate myVar variable
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:52:49.290

退房`class_exists()`。

[http://php.net/manual/en/function.class-exists.php](http://php.net/manual/en/function.class-exists.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T19:53:21.320

您可以使用该`class_exists`函数查看一个类是否存在。

在手册中查看更多信息：[class_exists](http://php.net/manual/en/function.class-exists.php)

# multithreading - MessagePack 模板查找导致 WebLogic 中的线程卡住？

> ID：12204397
> 
> 赞同：0
> 
> 时间：2012-08-30T19:50:51.083
> 
> 标签：multithreading, grails, weblogic, msgpack, messagepack

我们在 WebLogic 11g上`0.6.6`的 Grails 中使用 MessagePack for Java来序列化字符串数据......`2.0``(10.3)`

```
public void serialize(Object object, OutputStream outputStream) 
   throws IOException {
   byte[] bytes = MessagePack.pack(object);
   outputStream.write(bytes);
   outputStream.flush();
} 
```

我们在 WebLogic 中看到的问题是大量 STUCK 线程，因此我们转储线程堆栈并发现一些线程卡在`org.msgpack.template.TemplateRegistry.lookup(TemplateRegistry:198)`，请参阅下面的转储。我们确信我们的代码没有引入这个问题，因为在上面的示例中，很明显我们正在`MessagePack.pack()`以线程安全的方式使用。查看[TemplateRegistry.java 的第 198 行](https://github.com/msgpack/msgpack-java/blob/msgpack-0.6.6/src/main/java/org/msgpack/template/TemplateRegistry.java "模板注册.java")，`lookup()`它是同步的，但我们不确定它为什么会导致线程卡住。

```
 "[STUCK] ExecuteThread: 
    '1' for queue: 'weblogic.kernel.Default (self-tuning)'" id=43 idx=0xec tid=60 prio=1 alive, in native, blocked, daemon

-- Blocked trying to get lock: org/msgpack/template/TemplateRegistry@0xfffffffe8c2fb8e8[fat lock]
    at jrockit/vm/Threads.waitForUnblockSignal()V(Native Method)
    at jrockit/vm/Locks.fatLockBlockOrSpin(Locks.java:1679)[optimized]
    at jrockit/vm/Locks.lockFat(Locks.java:1780)[optimized]
    at jrockit/vm/Locks.monitorEnterSecondStageHard(Locks.java:1312)[optimized]
    at jrockit/vm/Locks.monitorEnterSecondStage(Locks.java:1259)[optimized]
    at jrockit/vm/Locks.monitorEnter(Locks.java:2466)[inlined]
    at jrockit/vm/Locks.monitorEnterForced(Locks.java:859)[optimized]
    at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)   
    at jrockit/vm/Locks.monitorEnterUnmatched(Ljava/lang/Object;)V(Native Method)
    at org/msgpack/template/TemplateRegistry.lookup(TemplateRegistry.java:198)[optimized]         
    at org/msgpack/MessagePack.write(MessagePack.java:195)[inlined]
    at org/msgpack/MessagePack.pack(MessagePack.java:639)[inlined] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:49:41.573

根据当前的[MessagePack JavaDoc](http://msgpack.org/javadoc/current/org/msgpack/MessagePack.html)，不推荐使用静态 pack(Object v) 方法，建议使用非静态方法 write(Object)。

使用示例：

```
MessagePack msgpack = new MessagePack();
byte[] bytes = msgpack.write(object); 
```

你能检查一下 write 方法的使用是否解决了问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T10:04:09.783

[正如这篇博客](http://bugreporter.blogspot.jp/2014/02/messagepack-java-permgen-memory-error.html)所说，你应该使用 packer 和 unpacker 。

```
MessagePack msgpack = new MessagePack(); // singleton
Packer packer = msgpack.createPacker(outputStream); // createPacker every time
packer.write(object); 
```

由于 new MessagePack() 每次都会加载类，因此如果您执行太多操作，以下代码可能会产生[perm gen 内存错误。](http://bugreporter.blogspot.jp/2014/02/messagepack-java-permgen-memory-error.html)

```
MessagePack msgpack = new MessagePack();
byte[] bytes = msgpack.write(object); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T16:59:23.463

我认为手动创建打包程序没有意义，只要 MessagePack.write() 为您执行此操作

public byte[] write(T v) throws IOException { BufferPacker pk = createBufferPacker();

我确实有你在谈论的 perm gen 错误，所以我正在考虑的是在我的所有应用程序中只使用一个 MessagePack 实例，你觉得这有意义吗？

# jquery - 基于单元格值的颜色行 - Jquery

> ID：12204398
> 
> 赞同：0
> 
> 时间：2012-08-30T19:51:02.987
> 
> 标签：jquery, html

我一直在试图弄清楚如何做到这一点。出于某种原因，当我使用“.yellow”选择器时，它返回一个对象，但我无法到达该对象的父对象，一直说关于它的一切都是空的。

我有这个单元格：

```
<td aria-describedby="CommodityControlReportGrid_ApprovalType" style="text-align:left;" role="gridcell">
    <span class="yellow"></span>
    Ignored
</td> 
```

这些不同单元格的父行都具有以下架构：

```
<tr class="ui-widget-content jqgrow ui-row-ltr" tabindex="-1" id="101023" role="row"></tr> 
```

基本上，我想根据包含带有`<span class="yellow"></span>`.

我将如何在 Jquery 中执行此操作，或者至少选择我想要的行（我知道如何应用颜色）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T19:57:54.447

您可以只选择黄色类的跨度 - 将它们全部获取..然后应用于相应的 tr

```
$('span.yellow').closest('tr').css('background-color','yellow'); 
```

[http://jsfiddle.net/jtY7Q/](http://jsfiddle.net/jtY7Q/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:58:00.957

请记住，即使您只有一个黄色类跨度，按非唯一类选择也会返回一个数组。确保直接访问一个元素，或者遍历每个返回的项目：

```
$('span.yellow').each(function(){alert(1);$(this).parents().closest('tr').attr('style','background-color:yellow')});​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:09:10.340

检查这可能会有所帮助

JsFiddle[演示](http://jsfiddle.net/HTh9L/5/)

```
 var1 = $("td").children('span').attr('class');
    $("td").css("background-color",var1); 
```

​</p>

# c# - 剃刀视图引擎中的全局函数

> ID：12204410
> 
> 赞同：3
> 
> 时间：2012-08-30T19:51:43.747
> 
> 标签：c#, asp.net-mvc, c#-4.0, razor, asp.net-mvc-4

我想`w`在我的剃刀视图引擎中使用一个全局方法来本地化我的 MVC 应用程序。我试过

```
@functions{
    public string w(string message)
    {
        return VCBox.Helpers.Localization.w(message);
    }
} 
```

但我应该在我的每个剃须刀页面上都有这个，我不想要那个。**我想知道如何才能拥有一个可以在项目的每个页面中使用的全局函数？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:24:22.640

您可以扩展 HtmlHelper：

扩展：

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString W(this HtmlHelper htmlHelper, string message)
    {
        return VCBox.Helpers.Localization.w(message);
    }
} 
```

.cshtml：

```
@Html.W("message") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T19:53:57.040

扩展方法怎么样：

```
namespace System
{    
    public static class Extensions
    {
        public static string w(this string message)
        {
            return VCBox.Helpers.Localization.w(message);  
        }
    }
} 
```

像这样调用：

```
"mymessage".w(); 
```

或者：

```
string mymessage = "mymessage";
mymessage.w(); 
```

或者：

```
Extensions.w("mymessage"); 
```

# emacs - 新进程的指定程序是带有 Pymacs 的 Emacs 中的一个目录

> ID：12204411
> 
> 赞同：2
> 
> 时间：2012-08-30T19:51:51.007
> 
> 标签：emacs, pymacs

我尽量按照 Pymacs 安装说明进行操作。我的安装似乎很顺利，但是，当我尝试使用 repr(2L**111) 的 Mx pymacs-eval 或使用 os RET RET 的 Mx pymacs-load 时，我总是最终收到一条消息，说“新进程的指定程序是一个目录'。但是，我可以做 Mx load-library RET pymacs RET 并且我没有收到错误。我在 Windows 7 上使用 Emacs 24.1.1 以及 Python 2.7。

任何帮助，将不胜感激。

# google-maps - 将谷歌地图多边形保存到 postgreSQL 数据库

> ID：12204417
> 
> 赞同：1
> 
> 时间：2012-08-30T19:52:02.457
> 
> 标签：google-maps, postgresql, polygon, postgis

我开发了一个基于 Web 的应用程序，用户将在地图上创建一个多边形，数据库将返回兴趣点。

问题是 postgreSQL 以与谷歌地图多边形不同的方式保存多边形。

那么如何将用户多边形保存到 postgis？

我已经在使用谷歌地图 v3 api 和 geojson

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:15:02.057

一些代码会很有用。如果没有，这是一个最好的猜测通用答案：一般来说，您需要弄清楚如何将每种格式映射（转换）到另一种格式。然后，您可以在保存之前转换为适合数据库的格式，并在检索时从数据库格式转换为谷歌地图格式。我想每个多边形都是两种格式的一组纬度/经度对，所以应该不会太难。

或者，由于您使用的是 JSON，您可以将 JSON 保存到数据库中的文本字段（或在即将发布的 PostgreSQL 9.2 版本中保存到 JSON 字段）：

[http://www.postgresql.org/docs/9.2/static/datatype-json.html](http://www.postgresql.org/docs/9.2/static/datatype-json.html)

但是，如果您想在数据库中执行地理查询，这显然会限制您的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-11T16:57:05.987

在我的 js 文件中，我创建了一个多边形

```
shape = new google.maps.Polygon({
 Editable:true,
 strokeColor: 'FF0000',
 strokeOpacity: 0.8,
 strokeWeight: 1,
 fillColor: 'FF0000',
 fillOpacity: 0.4
}); 
```

然后我创建函数 addPoint

```
function addPoint(e) {
 shape.setMap(map);
 vertices= shape.getPath();
 vertices.push(e.latLng);
 polygon.push(e.latLng);
} 
```

我将 addPoint 函数传递给映射对象

```
map = new google.maps.Map(document.getElementById("map"), mapOptions);
google.maps.event.addListener(map,'click',addPoint); 
```

在我的 html 中，我有 id=polygon 的按钮。我将坐标转换为 postgres 格式 (long,lat)

```
$("#polygon").click(function(e){
 a=JSON.stringify(polygon);
 var c=JSON.parse(a);
 console.info(c);
 vertices.forEach(function(xy, i) {
  x.push(xy.lng()+" "+xy.lat());
 });
 shape.setMap(map); 
```

包含多边形的变量是我称之为 x 的数组，我有一个 ajax 调用来将多边形数组 x 传递给我的模型

```
$.ajax({
 url: 'myurl',
 type: 'post',
 data: {'polygon':x},
 datatype: 'json',
 success: function(data) {
 console.info(data)
 }
}); 
```

在我的模型（Codeigniter）中，我将多边形（lat，long）转换为 postgres 多边形（long，lat）

```
public function getPolygon($polygon){
 header('Content-type: application/json');
 $upolygon="";

$length=count($polygon);
for ($i=0;$i<$length;$i++){
 $upolygon.=$polygon[$i].' ,';
}
$upolygon.=$polygon[0];
$query = "some query with the formated polygon";
foreach ($query->result() as $row)
 {
  $data[]= array("some data");
 }
 echo json_encode($data);
} 
```

# configuration - Akka :: 调度程序 [%name%] 未配置，使用默认调度程序

> ID：12204418
> 
> 赞同：24
> 
> 时间：2012-08-30T19:52:06.913
> 
> 标签：configuration, akka, dispatcher

我创建了以下application.conf：

```
akka {

    actor {

        prio-dispatcher {
            type = "Dispatcher"
            mailbox-type = "my.package.PrioritizedMailbox"
        }

    }

} 
```

转储配置时

```
actorSystem = ActorSystem.create()
println(actorSystem.settings) 
```

我得到输出：

```
 # application.conf: 5
        "prio-dispatcher" : {
            # application.conf: 7
            "mailbox-type" : "my.package.PrioritizedMailbox",
            # application.conf: 6
            "type" : "Dispatcher"
        }, 
```

后来

```
[WARN] [08/30/2012 22:44:54.362] [default-akka.actor.default-dispatcher-3] [Dispatchers] Dispatcher [prio-dispatcher] not configured, using default-dispatcher 
```

我在这里想念什么？

**UPD在**[这里](http://groups.google.com/group/akka-user/browse_thread/thread/678f2ae1c068e0fa)找到了解决方案，必须使用名称“akka.actor.prio-dispatcher”

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-31T17:04:47.080

上面的配置规定邮箱的名称是**akka.actor.prio-dispatcher**

问题描述：[http ://groups.google.com/group/akka-user/browse_thread/thread/678f2ae1c068e0fa](http://groups.google.com/group/akka-user/browse_thread/thread/678f2ae1c068e0fa)

# php - Yahoo Weather API：获取另一天的数据

> ID：12204420
> 
> 赞同：0
> 
> 时间：2012-08-30T19:52:08.167
> 
> 标签：php, api, yahoo, weather

是否有可能获得一个城市未来 7 天的天气数据？我只找到了今天获取温度的解决方案...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:04:50.057

雅虎 API 似乎不支持扩展预测。看看[Weather Underground API](http://www.wunderground.com/weather/api/)，他们有 10 天的预报可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-05T00:15:24.857

我不知道您在谈论什么解决方案，但 Yahoo Weather 提供了当前条件、当天剩余时间预测和未来 9 天预测，与您在执行 yql 请求时获得的相同答案。例如：

```
https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%3D4118%20and%20u%3D%27c%27&format=xml&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys 
```

...将返回安大略省多伦多的条件和 10 天预测（包括当天的剩余时间），以公制单位，XML 格式。将此行复制并粘贴到任何浏览器的地址框中，然后在答案中查找 yweather:forecast 标签。

# rest - 如何在 Symfony2 中跟踪 API 使用情况？

> ID：12204422
> 
> 赞同：7
> 
> 时间：2012-08-30T19:52:10.237
> 
> 标签：rest, symfony, analytics, fosrestbundle

我正在使用 FOSRestBundle 在 Symfony2 中构建 RESTful 服务。我可以使用 Google Analytics 跟踪 Web 客户端中的页面使用情况。但是，这显然不适用于非 HTML 客户端的请求。

在我开始安装 Redis、编写服务、事件调度器等之前，这个问题是否已经解决了？有没有对性能没有严重影响的解决方案？

根据我要替换的项目的统计数据，我预计每小时约有 1,000 次点击，其中 90% 的流量来自浏览器。我无法控制非 HTML 客户端，因此无法选择添加跟踪。

我需要数据的原因与任何人都需要分析数据的原因相同——制作漂亮的图表，并提供关于将开发资源集中在哪里的定量证据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:42:53.113

有几个选项，这取决于您需要多少信息。如果您只想了解基本活动（对每个 Web 服务的调用次数、时间、源 IP、用户代理），那么 apache 日志已经包含所有这些信息。使用 CustomLog 添加您需要的任何其他字段。例如，您提到了 Accept 标头，可以这样添加：

```
CustomLog logs/access_log "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\" \"%{Accept}i\"" 
```

如果是 GET，POST，PUT 等包含在 %r 部分。

如果您想知道 POST 或 PUT 数据中的实际内容，那就更难了。极端的解决方案是使用[mod_dumpio](http://httpd.apache.org/docs/2.2/mod/mod_dumpio.html)模块。这会记录所有客户端输入（所有标头、所有 cookie、所有 POST 数据）。如果人们使用您的 REST API 上传图像，那么无论好坏，您都会在日志中获得完整的图像。那可能会变得非常大。

我喜欢的解决方案是从 PHP 记录：在 PHP 脚本顶部或处理请求时的自定义日志。然后，您可以完全控制要记录的内容、最容易分析的格式，还可以将其放在上下文中（例如记录文本数据，但不记录图像字节）。在开发和小型站点中，我与 apache 日志记录并行执行此操作。如果 Apache 占用过多 CPU，则禁用 apache 日志记录，或完全绕过 Apache。（我目前正在评估[php 5.4 中的内置网络服务器](http://php.net/manual/en/features.commandline.webserver.php)- 它支持路由，因此可能非常适合网络服务。）

顺便说一句，分析服务器日志最好与 Google Analytics 并行进行：它可以帮助您了解每个日志的准确性。

# javascript - {} == 在javascript中是否为真？

> ID：12204426
> 
> 赞同：3
> 
> 时间：2012-08-30T19:52:40.333
> 
> 标签：javascript

有人可以用javascript解释为什么，

`alert({} == true)` 显示*错误*

`if ({}) alert('true')` 显示*真实*？

改变结果的 if 条件有什么不同？

我想写一些速记参数验证器`obj || (obj = {});`，我对这个发现感到困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T20:40:44.063

## `if ({}) alert('true')`->`true`

`{}`是一个对象，当在`if`语句的上下文中评估时，它被强制转换为 a `Boolean`，并且由于`Boolean({})`评估为**`true`**，你得到`if (true)`. 这记录在 ECMAScript 规范的第**[12.5 节 if 语句](http://ecma-international.org/ecma-262/5.1/#sec-12.5)**中：

> 产生式 If 语句 : if ( 表达式 ) 语句的评估如下：
> 
> 1.  令 exprRef 为计算表达式的结果。
> 2.  如果**ToBoolean(GetValue(exprRef))**为 false，则返回（正常、空、空）。
> 3.  返回 Statement 的评估结果。

## `alert({} == true)`->`false`

这个比较棘手。来自[ECMAScript](http://en.wikipedia.org/wiki/ECMAScript)规范，第**[11.9.3 节抽象相等比较算法](http://ecma-international.org/ecma-262/5.1/#sec-11.9.3)**：

> 比较 x == y，其中 x 和 y 是值，产生真或假。如下进行这样的比较：
> 
> 如果 Type(y) 是布尔值，则返回比较结果**x == ToNumber(y)**。

因此，`{} == true`将评估为`{} == Number(true)`，评估为`{} == 1`，即**`false`**。

这也是为什么`1 == true`评估为`true`，但`2 == true`评估为`false`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T19:58:14.630

`{}`并非`true`如此，它不会出现在您的第一个示例中。在您的第二个示例`{}`中不是错误的，因此它将通过测试。

就像我的老师曾经说过的那样，你不能比较土豆和胡萝卜。

它不仅适用于数组，它适用于任何东西：

```
alert(3 == true); // shows false

if (3) alert('true'); // shows true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T20:00:46.470

在布尔运算中，通常任何不`0`计算为真的东西。 [http://jsfiddle.net/QF8GW/](http://jsfiddle.net/QF8GW/)

```
if (0) console.log("0 shows true"); // does not log a value
if (-1) console.log("-1 shows true");
if (12345) console.log("12345 shows true");
if ({}) console.log("{} shows true");
if ([]) console.log("[] shows true"); 
```

所有这些除了`0`将评估为真。

但是，它们的值在比较`true`时不会评估为`true`。

```
// logs the statement (1 and true are the same.)
​if (1 == true) console.log("1==true shows true");​​​​​​​​

if (12345 == true) console.log("12345==true shows true"); // does not log 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T19:58:31.723

```
alert({} == true) //display "false"

if({} == true)
{
   alert("it's true");
}else
{
   alert("it's false"); // <-- alert this
} 
```

[（片段）](http://jsfiddle.net/Z8tfb/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T20:01:17.360

我在[jsfiddle.net](http://jsfiddle.net/atiruz/rjH39/2/)中尝试过，只在第一个警报中尝试说假，IF 不警报真。

# c# - 相同的 REST 服务，不同虚拟目录的行为不同。404错误

> ID：12204427
> 
> 赞同：0
> 
> 时间：2012-08-30T19:52:40.393
> 
> 标签：c#, .net, web-services, rest

1-我有一段代码部署在服务器上。此代码需要 REST 服务。

2-代码所在的同一物理服务器被多个虚拟目录指向，每个虚拟文件夹都有不同的名称。

3- 对于第一个虚拟目录，一切正常，代码调用 REST 服务。

4-对于第二个虚拟目录，它指向相同的确切代码，并指向相同的物理文件夹（甚至不是代码的副本）找不到 REST 服务，它给出 404。

知道会发生什么吗？我不确定这是否足够信息，我很乐意提供更多信息。

URL 是通过这种方式动态构建的

```
RouteTable.Routes.Add(new ServiceRoute("rest/AuthenticationAttempt", new WebServiceHostFactory(), typeof(AuthenticationService))); 
```

在 web.config 中，我有这个

```
 <location path="rest">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

服务网址是

`http://10.30.10.172/OnlineServicing/rest/AuthenticationAttempt/`

OnlineServicing 是虚拟目录名，AuthenticationAttempt 是服务名。但是，部署的代码没有 rest 文件夹，看起来代码处理了这个。

# android - 从 Android 应用下载的文件在“下载”目录中不可见

> ID：12204429
> 
> 赞同：3
> 
> 时间：2012-08-30T19:52:46.237
> 
> 标签：android, download

我正在开发一个应用程序，我正在从远程服务器下载 pdf 文件。到目前为止，我通过该应用程序成功地在手机上下载了 PDF 文件。我面临的问题是下载的文件在我的 Galaxy Nexus 的下载目录中不可见。当我使用文件管理器应用程序时，我可以在那里看到文件，它打开得非常好。

我尝试在我的代码中使用以下选项，但它们似乎都没有解决我的问题（这两个选项都成功下载了文件并且它在文件管理器中可见）：

```
outFile = new File(Environment.getExternalStorageDirectory() + "/" + fileName); 
```

和

```
outFile = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS), fileName); 
```

有人可以帮我一些线索吗？任何提示或线索都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:25:07.057

我可以通过以下方式使用 DownloadManager 来做到这一点：

```
dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
    Request request = new Request(
            Uri.parse("http://"));
    enqueue = dm.enqueue(request);

     BroadcastReceiver receiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
                    long downloadId = intent.getLongExtra(
                            DownloadManager.EXTRA_DOWNLOAD_ID, 0);
                    Query query = new Query();
                    query.setFilterById(enqueue);
                    Cursor c = dm.query(query);
                    if (c.moveToFirst()) {
                        int columnIndex = c
                                .getColumnIndex(DownloadManager.COLUMN_STATUS);
                        if (DownloadManager.STATUS_SUCCESSFUL == c
                                .getInt(columnIndex)) {
                            Toast.makeText(getApplicationContext(), "Download Complete!!!", Toast.LENGTH_LONG).show();

                        }
                    }
                }
            }
        };

        registerReceiver(receiver, new IntentFilter(
                DownloadManager.ACTION_DOWNLOAD_COMPLETE)); 
```

# windows - nt 权限\系统存储位置的 Jenkins Windows 从属 git 凭据

> ID：12204437
> 
> 赞同：2
> 
> 时间：2012-08-30T19:53:04.113
> 
> 标签：windows, git, jenkins, puppet

我正在使用 windows slave 来克隆 git repo 并运行 jenkins 构建作业。我想在每次不提供凭据的情况下进行克隆，因此我计划使用具有标准设置的 _netrc 文件。当我在工作中运行“whoami”时，我得到以下信息：

```
nt authority\system 
```

我的问题是 - 该用户的凭据存储在哪里？是否可以像使用自己的用户帐户一样使用 _netrc 文件对该用户进行身份验证？

# python - 将 C++ 指针作为参数传递给 Cython 函数

> ID：12204441
> 
> 赞同：23
> 
> 时间：2012-08-30T19:53:17.187
> 
> 标签：python, cython

```
cdef extern from "Foo.h":
    cdef cppclass Bar:
        pass

cdef class PyClass:
    cdef Bar *bar

    def __cinit__(self, Bar *b)
        bar = b 
```

这总是会给我类似的东西：
`Cannot convert Python object argument to type 'Bar *'`

有没有办法做到这一点，或者我需要从一个`Bar`对象中提取所有内容，创建一个 Python 等价物，将其传入，然后在其中重建它`PyClass`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-01T20:33:15.253

我在尝试将带有结构的 C 代码包装为 python 类时遇到了这个问题。问题似乎是“特殊”功能，包括`__init__`并且`__cinit__`必须声明为`def`而不是`cdef`. 这意味着它们可以从普通的 python 中调用，所以类型参数被有效地忽略了，一切都被视为对象。

在 JF Sebastian 的回答中，修复不是包装 - double 是基本的数字类型，因此 C/C++ 类型和 Python 对象之间存在默认转换。Czarek 的回答基本上是正确的——你需要使用一个假的构造函数，使用一个全局函数。不能使用 @staticmethod 装饰器，因为它们不能应用于 cdef 函数。在提供的原始示例中，答案看起来更简单。

```
cdef extern from "Foo.h":
    cdef cppclass Bar:
        pass

cdef class PyClass:
    cdef Bar *bar

cdef PyClass_Init(Bar *b):
    result = PyClass()
    result.bar = b
    return result 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-27T12:08:41.213

从[Cython 0.21](https://github.com/cython/cython/blob/master/CHANGES.rst#021-2014-09-10)开始，可以使用装饰器声明`cdef`方法。`@staticmethod`这允许使用非 Python 参数的静态创建者方法：

```
cdef extern from "Foo.h":
    cdef cppclass Bar:
        pass

cdef class PyClass:
    cdef Bar *bar

    @staticmethod
    cdef create(Bar *bar):
        cdef PyClass pc = PyClass()
        pc.bar = bar
        return pc 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-30T20:55:40.233

为每个 cdef 类创建一个充当构造函数的全局 cdef 函数，CefResponse 是 C++ 对象，PyResponse 是 c++ 对象的 python 等效项：

```
cdef object CreatePyResponse(CefRefPtr[CefResponse] cefResponse):

    pyResponse = PyResponse()
    pyResponse.cefResponse = cefResponse
    return pyResponse

cdef class PyResponse:

    cdef CefRefPtr[CefResponse] cefResponse

    def GetStatus(self):

        return (<CefResponse*>(self.cefResponse.get())).GetStatus() 
```

所以而不是`resp = PyResponse(cppObject)`call `resp = CreatePyResponse(cppObject)`。

取自 CEF Python 的示例： [https ://code.google.com/p/cefpython/source/browse/cefpython/response.pyx?r=0250b65e046a](https://code.google.com/p/cefpython/source/browse/cefpython/response.pyx?r=0250b65e046a)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T22:45:41.447

Python 类接受 Python 参数。要传递 C++ 参数，您需要包装它：

```
# distutils: language = c++

cdef extern from "Foo.h" namespace "baz":
    cdef cppclass Bar:
         Bar(double d)
         double get()

cdef class PyBar: # wrap Bar class
    cdef Bar *thisptr
    def __cinit__(self, double d):
        self.thisptr = new Bar(d)
    def __dealloc__(self):
        del self.thisptr
    property d:
        def __get__(self):
            return self.thisptr.get() 
```

`PyBar`实例可以用作 Cython 和纯 Python 中的任何其他 Python 对象：

```
class PyClass:
    def __init__(self, PyBar bar):
        self.bar = bar

print(PyClass(PyBar(1)).bar.d) 
```

# css - 定位一个 元素始终在右侧，当查看器在浏览器中缩小时也是如此

> ID：12204449
> 
> 赞同：2
> 
> 时间：2012-08-30T19:53:38.197
> 
> 标签：css, html, web

此屏幕截图显示了我的问题：

http://oi45.tinypic.com/2vskt2a.jpg">

我的页面看起来与预期一样（上图），但是一旦查看器缩小，右侧的元素就会向内移动，在右侧留下一个空白区域（下图）。这不应该发生；该元素应始终保持在右侧。

这是我试过的 CSS 代码；在我使用浏览器的缩小功能进行测试之前，它运行良好。

```
#left {
    width:920px;
    top:120px;
    height:400px;
    position:absolute;
    background:#fff;
}
#right {
    position:fixed;
    right:0px;
    left:920px;
    height:400px;
    overflow-y:auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:17:24.750

这对你有用吗？

HTML：

```
<div id="head">
</div>
<div id="content">
    <div id="nav">
    </div>
    <p>
        content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content content 
    </p>
</div>
<div id="foot">
</div>​ 
```

CSS：

```
#head{
    height:100px;
    background-color:black;
}

#foot{
    height:100px;
    background-color:black;
}

#content{
    height:100px;
}

#nav{
    height:100px;
    width:100px;
    background-color:gray;
    float:right;
} 
```

[**演示**​</a>](http://jsfiddle.net/wsKfd/1/)

 [***UPD***：更新了 html，因此它可以与里面的一些内容正常工作。](http://jsfiddle.net/wsKfd/1/) 

[***UPD2***：因为我接触了内容，你也可以`overflow:auto`为你的内容添加，所以如果它不完全适合它仍然可以查看：](http://jsfiddle.net/wsKfd/1/)[Demo](http://jsfiddle.net/wsKfd/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:51:34.167

最好用百分比来做（假设你的屏幕分辨率是 1024 像素）

```
#left {
width:90%;
float:left;
height:400px;
background:#fff;}

#right {
float:right;
width:10%;
height:400px;
overflow-y:auto;
} 
```

# perl - Perl：将符号子引用调用到模块子例程的正确方法？

> ID：12204452
> 
> 赞同：1
> 
> 时间：2012-08-30T19:53:49.167
> 
> 标签：perl

假设您有一个带有*Foo 包的模块（例如**Foo.pm*）。在其中存在许多子例程定义，包括*foo*和*default*的定义。

 ***```
package Foo;
sub foo     { ... }
sub default { ... } 
```

在您的主 perl 程序（例如*test.pl*）中，将值分配给子引用并调用它或调用默认值的正确方法是什么？

```
sub call_proc {
   my $args   = shift;
   my $subref = $args->{proc_name} // 'default';

   &$Foo::subref();                               # <====== Wrong
}
call_proc({ proc_name => q{foo} });               # make the call 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:11:51.297

我已经这样做了`UNIVERSAL::can`：

```
sub call_proc {
   my $args   = shift;
   my $subref = Foo->can($args->{proc_name}) // 'default';

   if ($subref) {
       &$subref();
   }
}
call_proc({ proc_name => q{foo} }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:05:24.240

如果`$subref`是`some_method_name`，则`&$subref`（或`$subref->()`）将尝试调用`some_method_name` *在当前包中*调用的函数。根据程序的设置方式，您可能需要传递完全限定的子例程名称

```
call_proc( { proc_name => 'Foo::foo' }); 
```

或放入一些逻辑`call_proc`来限定它。有关如何执行此操作的想法，请参阅中的`qualify_sub_name`函数。[`Forks::Super::Util`](http://cpansearch.perl.org/src/MOB/Forks-Super-0.63/lib/Forks/Super/Util.pm)

您还可以安全地使用对函数的引用

```
call_proc( { proc_name => \&foo } );   # works if &foo is avail in current pkg 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T20:32:07.497

`\&$name`没有被严格的裁判抓住，所以：

```
sub call_proc {
   my $args     = shift;
   my $sub_name = $args->{proc_name} // 'default';
   my $sub_ref  = \&{ "Foo::" . $sub_name };
   #die if !defined(&$sub_ref);
   return $sub_ref->();
} 
```

如果我们在谈论方法，那么它将是：

```
sub call_method {
   my $args        = shift;
   my $method_name = $args->{method_name} // 'default';
   #die if !Foo->can($method_name);
   return Foo->$method_name();
} 
```***

# c++ - C标准：字符集和字符串编码规范

> ID：12204453
> 
> 赞同：13
> 
> 时间：2012-08-30T19:53:52.087
> 
> 标签：c++, c, character-encoding, char, string-literals

我发现 C 标准（C99 和 C11）在字符/字符串代码位置和编码规则方面含糊不清：

首先，标准定义了`the source character set`和`the execution character set`。本质上，它提供了一组字形，但没有将任何数值与它们相关联——**那么默认字符集是什么？**

我不是在问这里的编码，而只是在数字/代码点映射的字形/曲目。它确实定义`universal character names`为 ISO/IEC 10646，但它是否说这是默认字符集？

作为上述内容的扩展 - 我找不到任何说明数字转义序列 \0 和 \x 代表什么字符的内容。

从 C 标准（C99 和 C11，我没有检查 ANSI C）我得到以下关于字符和字符串文字的信息：

```
 +---------+-----+------------+----------------------------------------------+
 | Literal | Std | Type       | Meaning                                      |
 +---------+-----+------------+----------------------------------------------+
 | '...'   | C99 | int        | An integer character constant is a sequence  |
 |         |     |            | of one or more multibyte characters          |
 | L'...'  | C99 | wchar_t    | A wide character constant is a sequence of   |
 |         |     |            | one or more multibyte characters             |
 | u'...'  | C11 | char16_t   | A wide character constant is a sequence of   |
 |         |     |            | one or more multibyte characters             |
 | U'...'  | C11 | char32_t   | A wide character constant is a sequence of   |
 |         |     |            | one or more multibyte characters             |
 | "..."   | C99 | char[]     | A character string literal is a sequence of  |
 |         |     |            | zero or more multibyte characters            |   
 | L"..."  | C99 | wchar_t[]  | A wide string literal is a sequence of zero  |
 |         |     |            | or more multibyte characters                 | 
 | u"..."  | C11 | char16_t[] | A wide string literal is a sequence of zero  |
 |         |     |            | or more multibyte characters                 | 
 | U"..."  | C11 | char32_t[] | A wide string literal is a sequence of zero  |
 |         |     |            | or more multibyte characters                 | 
 | u8"..." | C11 | char[]     | A UTF-8 string literal is a sequence of zero |
 |         |     |            | or more multibyte characters                 | 
 +---------+-----+------------+----------------------------------------------+ 
```

**但是，我找不到有关这些文字的编码规则的任何信息。** UTF-8 似乎确实暗示了 UTF-8 编码，但我认为它在任何地方都没有明确提及。另外，对于其他类型，编码是未定义的还是依赖于实现的？

我不熟悉 UNIX 规范。**UNIX 规范是否对这些规则指定了任何附加约束？**

另外，如果有人能告诉我**GCC 和 MSVC 使用什么字符集/编码方案，**那也会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T19:58:38.097

C 对字符集并不贪心。没有“默认字符集”之类的东西，它是由实现定义的——尽管在大多数现代系统上它主要是 ASCII 或 UTF-8。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T02:29:20.190

该标准没有指定默认编码，因为现有实践已经在具有许多不同编码的机器上实现了 C，例如 Honeywell 大型机和 IBM 大型机。

我希望 gcc 从当前由 LC_CHARSET 指定的语言环境中获取默认值，但我从未测试过它。

VC++ 采用控制面板设置的默认值。该默认控制面板设置因购买 Windows 的国家/地区而异，大多数用户从不更改它，但他们可以在安装 Windows 时更改它，以后可以更改它。

发明了三元组，以便可以将源程序从具有一种语言环境的环境复制到具有稍微不同的语言环境的环境中，并且仍然可以编译。例如，如果中国的 Windows 用户使用 trigraphs，那么希腊的 Windows 用户将能够编译相同的源程序。但是，如果语言环境差异太大，例如一种使用 EBCDIC，另一种使用 EUC，那么三元组就不够用了。

# c# - 将信息记录到窗口文本框

> ID：12204456
> 
> 赞同：1
> 
> 时间：2012-08-30T19:53:57.640
> 
> 标签：c#, multithreading, textbox, window, invoke

我正在努力将控制台应用程序转换为窗口格式，作为一个对此知之甚少但过去曾使用过类似窗口格式的类似应用程序的人，我认为这不会太难。

所以我创建了一个表单并在其中添加了一个文本框，只是为了获取日志信息。

这个控制台应用程序曾经在单个线程中运行，此后我添加了第二个线程以允许表单与控制台并排运行以进行测试。（它现在也奇怪地在一个线程中运行良好）。

这是我用来将文本写入表单的代码，除了我在表单上没有得到任何东西。

```
 static Form1 f = new Form1();
    delegate void SetTextCallback(string s);

    private void SetText(string text)
    {
        // InvokeRequired required compares the thread ID of the 
        // calling thread to the thread ID of the creating thread. 
        // If these threads are different, it returns true. 
        if (f.textBox1.InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(SetText);
            f.textBox1.Invoke(d, new object[] { text });
        }
        else
        {
            f.textBox1.AppendText(text);
        }
    } 
```

我可以确认有文本输入“文本”变量，但它没有进入表单。

任何帮助，将不胜感激。

这是完整的文件：

```
using System;
using System.Windows.Forms;
using Chraft.Properties;
using System.IO;
using Chraft.Plugins.Events.Args;
using Chraft.Plugins.Events;

namespace Chraft
{
public class Logger
{
    private StreamWriter WriteLog;
    private Server Server;

    internal Logger(Server server, string file)
    {
        Server = server;
        try
        {
            WriteLog = new StreamWriter(file, true);
            WriteLog.AutoFlush = true;
        }
        catch
        {
            WriteLog = null;
        }
    }

    ~Logger()
    {
        try
        {
            WriteLog.Close();
        }
        catch
        {
        }
    }

    public void Log(LogLevel level, string format, params object[] arguments)
    {
        Log(level, string.Format(format, arguments));
    }

    public void Log(LogLevel level, string message)
    {
        //Event
        LoggerEventArgs e = new LoggerEventArgs(this, level, message);
        Server.PluginManager.CallEvent(Event.LOGGER_LOG, e);
        if (e.EventCanceled) return;
        level = e.LogLevel;
        message = e.LogMessage;
        //End Event

        LogToConsole(level, message);
        LogToForm(level, message);
        LogToFile(level, message);
    }

    private void LogToConsole(LogLevel level, string message)
    {
        if ((int)level >= Settings.Default.LogConsoleLevel)
        {
            Console.WriteLine(Settings.Default.LogConsoleFormat, DateTime.Now, level.ToString().ToUpper(), message);
        }
    }
    static Form1 f = new Form1();
    delegate void SetTextCallback(string s);

    private void SetText(string text)
    {
        // InvokeRequired required compares the thread ID of the 
        // calling thread to the thread ID of the creating thread. 
        // If these threads are different, it returns true. 
        if (f.textBox1.InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(SetText);
            f.textBox1.Invoke(d, new object[] { text });
        }
        else
        {
            f.textBox1.AppendText(text);
        }
    }

    private void LogToForm(LogLevel level, string message)
    {
        if ((int)level >= Settings.Default.LogConsoleLevel)
        {
            SetText(DateTime.Now + level.ToString().ToUpper() + message);
        }
    }

    private void LogToFile(LogLevel level, string message)
    {
        if ((int)level >= Settings.Default.LogFileLevel && WriteLog != null)
            WriteLog.WriteLine(Settings.Default.LogFileFormat, DateTime.Now, level.ToString().ToUpper(), message);
    }

    public void Log(Exception ex)
    {
        //Event
        LoggerEventArgs e = new LoggerEventArgs(this, LogLevel.Debug, ex.ToString(), ex);
        Server.PluginManager.CallEvent(Event.LOGGER_LOG, e);
        if (e.EventCanceled) return;
        //End Event

        Log(LogLevel.Debug, ex.ToString());
    }

    public enum LogLevel : int
    {
        Trivial = -1,
        Debug = 0,
        Info = 1,
        Warning = 2,
        Caution = 3,
        Notice = 4,
        Error = 5,
        Fatal = 6
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:29:10.887

问题是您正在创建两个 Form 对象。在您的 Program.cs 文件中创建的一个：Application.Run(new Form1());

还有你在记录器类中创建的那个

表格 f = 新表格 1();

传递给 Application.Run 的是用户正在与之交互的那个。由于 Application.Run 调用，它变得可见并响应用户交互。

您在 logger 类上创建的那个只是在内存中。它的 TextBox 很乐意添加您要求它添加的文本，但该文本在任何地方都不可见。

有很多方法可以处理这种情况。您可以通过 Application.OpenForms 访问正确的 Form 对象，但更合适的处理方法是在记录器上添加一个表单可以订阅的事件，它可以处理更新 TextBox 以响应该事件。

**更新**

```
class LoggerLogEventArgs : EventArgs
{
    public LoggerLogEventArgs(string message)
    {
        this.message = message;
    }
    private string message;
    public string Message { get { return message; } }
}

class Logger
{
    public event EventHandler<LoggerLogEventArgs> Logged;

    protected virtual void OnLogged(LoggerLogEventArgs e)
    {
        EventHandler<LoggerLogEventArgs> handler = Logged;
        if (handler != null)
            handler(this, e);
    }

    // I would change this method name to LogToEvent
    private void LogToForm(LogLevel level, string message)
    {
        if ((int)level >= Settings.Default.LogConsoleLevel)
        {
            OnLogged(new LoggerLogEventArgs(message));
        }
    }
}

class Form1 : Form
{
    // Subscribe to the logger only when we are ready to display text
    protected override void OnHandleCreated(EventArgs e)
    {
        base.OnHandleCreated(e);
        GetLog().Logged += new EventHandler<LoggerLogEventArgs>(logger_Logged);
    }

    // Unsubscribe from the logger before we are no longer ready to display text
    protected override void OnHandleDestroyed(EventArgs e)
    {
        GetLog().Logged -= new EventHandler<LoggerLogEventArgs>(logger_Logged);
        base.OnHandleDestroyed(e);
    }

    private void logger_Logged(object sender, LoggerLogEventArgs e)
    {
        if (InvokeRequired)
            BeginInvoke(new EventHandler<LoggerLogEventArgs>(logger_Logged), e);
        else
            textBox1.AppendText(e.Message);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:05:21.927

```
hello i try this it works ( I make a console application and I add a windows form)

    using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Security.Permissions;
using System.Windows.Forms;

namespace ConsoleApplication6
{
    class Program
    {

         delegate void SetTextCallback(string s);
         static Form1 f;

        static void Main(string[] args)
        {      
             f = new Form1();
             f.Show();
             SetText("test");
            Console.ReadLine();
        }
        private static void SetText(string text)
        {
            // InvokeRequired required compares the thread ID of the 
            // calling thread to the thread ID of the creating thread. 
            // If these threads are different, it returns true. 
            if (f.textBox1.InvokeRequired)
            {
                SetTextCallback d = new SetTextCallback(SetText);
                f.textBox1.Invoke(d, new object[] { text });
            }
            else
            {
                f.textBox1.AppendText(text);
            }
        }
    }

} 
```

# php - 自定义会话：文件还是数据库？

> ID：12204460
> 
> 赞同：0
> 
> 时间：2012-08-30T19:54:03.053
> 
> 标签：php, mysql

我正在为我的 Web 应用程序设计自己的会话处理程序，当试图控制会话应该持续的时间时，PHP 会话太有限了。

无论如何，我的第一个测试是这样的：一个 session_id 存储在一个 mysql 行和一个 cookie 上，在同一个 mysql 行上我的会话变量的其余部分。

在对服务器的每个请求中，我都会进行查询，获取这些变量并将它们放在一个数组中，以便在运行时使用必要的变量。

昨晚我在想我是否可以在登录阶段将变量写入服务器文件一次，然后只包含该文件，而不是对每个请求进行 mysql 查询。

所以，我的问题是：哪个资源消耗更少？在mysql或文件上这样做？

我知道，我知道，我已经在 stackoverflow 上阅读了几个关于这个问题的帖子，但我有一些与所有这些案例不同的东西（我希望我没有错过任何东西）：

我需要跟踪自用户上次使用应用程序以来经过的时间，因此，在每次调用服务器时，我不仅请求整个数据库行，还更新同一行的时间戳。

所以，在这两种情况下，我都需要在每个请求上写信给会话......

仅供参考：整个应用程序在一台服务器上运行，因此使用文件时的多台服务器方案不适用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:08:11.853

当它在数据库中完成时更容易使用，并且我一直在数据库中使用会话主要是为了可扩展性。

您可以使用 MySQL，因为它可以使用配置良好的 MySQL 服务器将会话存储在临时内存中，如果您可以将所有会话存储在内存中，您甚至可以使用内存表来固定它。如果您接近内存限制，则很容易切换到普通表。

我会说 MySQL 在大中型网站的性能以及自定义/选项方面胜过文件。对于较小的网站，我认为这并没有太大的区别，但是在使用文件时您会使用更多的硬盘驱动器。

# excel - 数据透视表自定义聚合函数

> ID：12204462
> 
> 赞同：2
> 
> 时间：2012-08-30T19:54:13.663
> 
> 标签：excel

我在 excel 电子表格中有一张这样的表格：

```
 Col1    |    Col2   |    Col3
 -----------+-----------+-----------
     A      |     X     |      1
     A      |     Y     |      2
     B      |     X     |      3
     B      |     Y     |      4
     B      |     Z     |      5 
```

我想使用数据透视表的聚合功能。使用 Excel 提供的 VALUES 聚合的典型 SUM，我得到：

```
 Col1    |    Col3
 -----------+-----------
     A      |     3
     B      |     12 
```

但我想使用不同的聚合函数。我想使用一些东西：

```
 Square root of ( Sum of (Square(x))) 
```

所以最后我得到了这张桌子：

```
 Col1    |    Col3
 -----------+-----------
     A      |     SQRT(5)      <= Sqrt(1*1 + 2*2)
     B      |     SQRT(50)     <= Sqrt(3*3 + 4*4 + 5*5) 
```

有什么方法（VBA、C++、程序集，不管它需要什么）我可以在聚合列表中指定我自己的函数吗？

**注意：我知道如何在表格中执行此操作，如果不是关于为 PivoTTable 编写自定义聚合函数，请不要费心回答**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:05:51.170

不可能为标准数据透视表编写自定义聚合函数。但是您可能可以使用 MDX 做您想做的事……也许 MDX 专家想发表评论？

# c# - 按下按钮后清除asp.net文本框

> ID：12204467
> 
> 赞同：0
> 
> 时间：2012-08-30T19:54:39.580
> 
> 标签：c#, asp.net, textbox

我有 2 个带有 2 个提交按钮的文本框（每个文本框一个）。问题是，当我单击第一个提交按钮时，所有其他文本框都会被清除。有没有办法防止这种情况？这是布局。

```
 <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <asp:Button ID="Button5" runat="server" Text="Button" />
    <br />
    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
    <asp:Button ID="Button6" runat="server" Text="Button" /> 
```

# magento - 如何从 Magento 的左侧 col 中删除“我的购物车”？

> ID：12204470
> 
> 赞同：2
> 
> 时间：2012-08-30T19:54:47.423
> 
> 标签：magento, layout, cart

如何从左侧栏中删除“我的购物车”部分？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T20:12:43.890

有很多方法可以做到这一点，这取决于您的主题是如何构建的。如果您的主题中有 local.xml 文件，您可以在默认处理程序中使用它：

```
<reference name="left">
    <action method="unsetChild"><name>cart_sidebar</name></action>
</reference> 
```

如果您没有 local.xml 文件，只需在主题的布局文件夹中创建一个并使用以下内容填充它：

```
<?xml version="1.0"?>
<layout>
    <default>
        <reference name="left">
            <action method="unsetChild"><name>cart_sidebar</name></action>
        </reference>
    </default>
</layout> 
```

清除缓存，您就可以开始了。

* * *

## 回答 #2

> 赞同：-9
> 
> 时间：2012-08-30T20:08:43.900

您可以像这样设置 CSS 规则

```
.block-cart {
    display: none
} 
```

# javascript - Node JS，传统数据结构？（例如 Set 等），诸如 Java.util 之类的节点？

> ID：12204472
> 
> 赞同：23
> 
> 时间：2012-08-30T19:54:48.880
> 
> 标签：javascript, node.js, data-structures, set

我喜欢 node JS，并且来自 Java 背景，甚至有兴趣在一些 node 看起来有点牵强的项目中尝试它，例如搜索引擎项目。

我有点困惑的一件事是，JavaScript 似乎缺乏传统的数据结构，例如一个集合，它的精确定义甚至超出了计算机科学，因为它在计算机存在之前就已在数学中使用（基本上是一个列表不允许重复）。似乎在使用节点 JS 时，没有像 Java.util 这样的库具有我已经习惯的这些基本数据类型，我意识到我可以自己创建它们，但这只会增加项目的开销。

是否有任何用于解决此问题的节点（或一般的 JavaScript）库？我认为 node 有很大的潜力可以在很多项目中取代像 Java 这样的语言的使用，因为它在开发速度方面有很多优势，但是必须重新创建在更成熟的平台上被认为是理所当然的数据结构对于一个小项目来说可能是太多的开销。

如果还有其他类似的问题，我深表歉意，但是我花了一些时间搜索并没有想出太多。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-11-22T23:58:48.330

es6 内置了一个 Set 类：

```
new Set([iterable]); 
```

见：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-01T01:18:46.507

[Collections.js](http://www.collectionsjs.com/)有 Lists、Maps、Queues、Sets 和 Heaps，都具有一致的接口。[GitHub。](https://github.com/montagejs/collections)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-30T20:43:26.877

> 似乎 JavaScript 缺乏传统的数据结构......

是的，这是 javascript，数据结构的概念和实现与 Java 等语言完全不同。

我不确定您是否真的会使用 Javascript 找到您要查找的内容。但是，有一些类似的库[`underscore`](http://documentcloud.github.com/underscore/)应该可以更轻松地构建您想要的结构类型。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-28T09:08:06.763

node.js 没有对象和其他东西不再是`Set`真的`Map`。[node.js 从最迟 v12 开始就拥有它们](https://stackoverflow.com/questions/28388885/ecmascript-6-features-available-in-node-js-0-12)。

但是，当然，如果您想要 java 之类的库，请查看 npm 或 github。您不仅限于 node.js 中的标准内容。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-30T20:39:29.033

你看过 Underscore.js 吗？[http://underscorejs.org/](http://underscorejs.org/)

它与 java.util 不是一对一的，但它提供了一堆常用的实用程序功能。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-12-24T14:55:31.737

作为 Underscore.js 的更轻、更快的替代品，Lo-Dash ( [http://lodash.com/](http://lodash.com/) ) 在那些日子里越来越受欢迎……但这不是 Java.util！:-)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-31T00:14:03.650

像这样的东西：[https://github.com/PeterScott/simplesets-nodejs](https://github.com/PeterScott/simplesets-nodejs)，但有其他数据结构？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-22T19:29:02.857

看看这个：[https ://github.com/chenglou/data-structures](https://github.com/chenglou/data-structures)

我认为它适合您正在寻找的东西。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-29T05:13:29.773

我知道这个线程很旧，但想插话以供将来参考和通过网络搜索到达这里的人们。我一直在构建一个 Node.js 库，以解决 JavaScript 中标准数据结构不可用的问题，类似于 Java 集合。它在这里可用 - [https://github.com/monmohan/dsjslib](https://github.com/monmohan/dsjslib)。

欢迎贡献者:)

# iphone - iOS 企业应用程序在不安全的服务器上？

> ID：12204476
> 
> 赞同：1
> 
> 时间：2012-08-30T19:55:02.240
> 
> 标签：iphone, ios, ios-provisioning

因此，为一所大学工作，我们有一个希望学生使用的应用程序。它在通过 Apple 审查的“设计”方面遇到了一些麻烦。我们正在修改设计方面，但同时希望使用我们的企业分发帐户发布到校园。这不是一个真正的企业应用程序，但我们想使用这个分发渠道，因为学生已经在校园里了。苹果文档说：

> 由您来设计和托管用于分发应用程序的网站。确保用户已通过身份验证，可能使用基本身份验证或基于目录的身份验证，并且该网站可通过您的 Intranet 或 Internet 访问。您可以将应用程序和清单放置在隐藏目录中，或者放置在使用 HTTP 或 HTTPS 可读的任何其他位置。

我们只想把它放在一个不安全的网页上。我很确定Apple不会介意，甚至不会对此进行任何检查，但我想知道是否有人对将其放在某些不安全的网页上可能产生的后果有任何建议或直觉。

谢谢！

# c# - 组合是否应该专门用于继承，或者是否存在不应该使用的情况？

> ID：12204478
> 
> 赞同：6
> 
> 时间：2012-08-30T19:55:03.877
> 
> 标签：c#, inheritance, encapsulation, composition

在我想的示例中，我有大约 4 行代码可以被一个函数封装，并且这个函数肯定会在同一层次结构中的其他类中使用。

我有以下选项可重用该代码：

1.  将函数复制粘贴到需要它的类中。
2.  为需要该函数的类创建一个基类并将其放在那里。
3.  创建一个包含函数的类，该函数通过 DI 传递给需要它的类，或者只是该类的成员。（似乎是主要的矫枉过正）
4.  创建一个静态实用程序类并将该方法放入其中。

我绝对不会做 1 或 4。我过去会做 2，但我试图保持组合优于继承的原则，所以我倾向于 4，但对于最有可能的事情来说似乎很多永远不会在层次结构之外使用，并且只有 4 行。我知道这很挑剔，但我想找出正确的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:04:21.947

继承是有原因的。它被过度使用的事实并不意味着它没有合法用途。关键是你是否使用它不应该取决于你是否可以轻松地重用它，而是基于你的基类代表什么，它属于基类是否*有意义。*

如果没有更好地了解您的类是什么，以及您尝试重用的方法是什么，我无法针对您的特定情况给出具体建议。但是这样想：当你说它“很可能永远不会在层次结构之外使用”时，是因为它纯粹只是在层次结构之外没有意义吗？或者只是你不认为有人会构建碰巧使用此功能的东西，即使它可以想象在层次结构之外有意义？

如果这种方法在您正在谈论的特定层次结构之外有*任何意义，我会建议方法＃3。*

当然，所有这些都假设你的类层次结构首先是一个层次结构。另一个常见的继承滥用是人们在应用程序的上下文中对不需要分层的对象强制使用层次结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T19:58:15.827

我同意组合是比一般继承更好的选择。但是用一些逻辑组合你的对象，也许是通过策略模式，与多个类重用相同的代码是一个不同的问题。

如果那些需要这个功能的类**都具有相同的基类**，那么将它放在基类中是有意义的。这不像子类需要知道基类的内部工作来进行这个调用。

如果各种子类需要不同版本的代码，那么通过策略模式（使用组合）创建行为是可行的方法。但我假设相同的代码满足每个子类。

我不会做#4，因为那样该代码可用于其他没有业务调用它的类。如果代码在基类中，那么您可以将其设置为受保护的，因此仅对需要它的类可用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T20:09:37.873

如果此类函数参数将成为类的字段，则它旨在对您的类状态进行操作，因此应该是解决此类操作的基类的成员。

如果您对一些在层次结构之外或从层次结构的多个分支有意义的数据进行操作，并且参数的含义不受对象状态的约束，则使其成为实用程序类中的函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T20:10:25.847

如果它与您的类层次结构特别相关，请使用基类。如果没有，请使用选项 4。这里不需要合成。

# windows-phone-7 - 解析 REST 为 WP7 生成的 XML

> ID：12204479
> 
> 赞同：0
> 
> 时间：2012-08-30T19:55:04.387
> 
> 标签：windows-phone-7, rest

我正在尝试开发一个简单的 WP7 应用程序来查询生成 XML 文件的 REST 提要。根据查询，提要可以生成许多不同的 XML 文件，但我遇到了最基本的问题。

我试图在 ListBox 中显示的 XML 看起来像；

```
<subsonic-response status="ok" version="1.1.1">
</subsonic-response> 
```

或者

```
<subsonic-response status="ok" version="1.1.1">
<license valid="true" email="foo@bar.com" key="ABC123DEF" date="2009-09-03T14:46:43"/>
</subsonic-response> 
```

我尝试过遵循 MSDN 和其他来源的几个示例，但我似乎无法理解它。我使用的 URL 有效，因为它在输入浏览器时显示正确的信息，但由于某种原因未显示在 ListBox 中。

这是我目前正在使用的代码；

**C＃**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using System.Xml.Linq;

namespace RESTTest
{
public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    string requestString =
    "http://WEBSITE/rest/{0}.view?u=USERNAME&p=PASSWORD&v=1.8.0&c=RestTest";
    string UriNoAppId =
    "http://WEBSITE/rest/{0}.view?u=USERNAME&p=PASSWORD&v=1.8.0&c=RestTest";
    public MainPage()
    {
        InitializeComponent();
        List<string> searchTopics = new List<string>() { "ping", "getLicense" };
        comboBox1.DataContext = searchTopics;
        comboBox1.SelectedIndex = 0;
        // Create the WebClient and associate a handler with the OpenReadCompleted event.
        wc = new WebClient();
        wc.OpenReadCompleted += new OpenReadCompletedEventHandler(wc_OpenReadCompleted);
    }
    // Call the topic service at the Bing search site.
    WebClient wc;
    private void CallToWebService()
    {
        // Call the OpenReadAsyc to make a get request, passing the url with the selected search string.
        wc.OpenReadAsync(new Uri(String.Format(requestString, comboBox1.SelectedItem.ToString())));
    }
    void wc_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        XElement resultXml;
        // You should always check to see if an error occurred. In this case, the application
        // simply returns.
        if (e.Error != null)
        {
            return;
        }
        else
        {
            XNamespace web = "http://subsonic.org/restapi";
            try
            {
                resultXml = XElement.Load(e.Result);
                // Search for the WebResult node and create a SearchResults object for each one.
                var searchResults =
                from result in resultXml.Descendants(web + "WebResult")
                select new SearchResult
                {
                    // Get the Title, Description and Url values.
                    Title = result.Element(web + "version").Value,
                    Url = result.Element(web + "status").Value
                };
                // Set the data context for the listbox to the results.
                listBox1.DataContext = searchResults;
                textBox1.DataContext = searchResults;
            }
            catch (System.Xml.XmlException ex)
            {
                textBlock2.Text = ex.Message;
            }
        }
    }
    private void button1_Click(object sender, RoutedEventArgs e)
    {
        CallToWebService();
    }
    // Update the textblock as the combo box selection changes.
    private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        uriTextBlock.DataContext = string.Format(UriNoAppId, e.AddedItems[0]);
    }

}
// Simple class to hold the search results.
public class SearchResult
{
    public string Title { get; set; }
    public string Url { get; set; }
}
} 
```

**XAML**

```
<phone:PhoneApplicationPage 
x:Class="RESTTest.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="800"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
shell:SystemTray.IsVisible="False">
<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.Resources>
        <Style x:Key="ComboBoxItemStyle" TargetType="ComboBoxItem" >
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Background" Value="LightGray"/>
        </Style>
        <Style x:Key="ComboBoxStyle" TargetType="ComboBox" >
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Background" Value="Gray"/>
        </Style>
    </Grid.Resources>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="REST CLIENT"
                   Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="Subsonic"
                   Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"
                   Height="99" Width="453" />
    </StackPanel>
    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Margin="12,139,12,0" Grid.RowSpan="2">
        <Button Content="Search!" Height="89" HorizontalAlignment="Left"
                Margin="264,140,0,0" Name="button1"
                VerticalAlignment="Top" Width="189" Click="button1_Click" />
        <ComboBox Height="50" Style="{StaticResource ComboBoxStyle}"
                  HorizontalAlignment="Left" Margin="6,159" Name="comboBox1"
                  ItemContainerStyle="{StaticResource ComboBoxItemStyle}"
                  VerticalAlignment="Top" Width="235" ItemsSource="{Binding}"
                  SelectionChanged="comboBox1_SelectionChanged" />
        <TextBlock Height="36" HorizontalAlignment="Left" Margin="12,120"
                   Name="textBlock2" Text="Search Topic:" VerticalAlignment="Top" width="121" />
        <TextBlock Height="23" HorizontalAlignment="Left" Margin="12,1,0,0"
                   Name="textBlock3"
                   Text="URI:" VerticalAlignment="Top" />
        <TextBlock Height="86" HorizontalAlignment="Left" Margin="6,28"
                   Name="uriTextBlock" TextWrapping="Wrap" Text="{Binding}"
                   VerticalAlignment="Top" Width="447" />
        <TextBlock Height="23" HorizontalAlignment="Left" Margin="12,242,0,0"
                   Name="textBlock5"
                   Text="Results:" VerticalAlignment="Top" />
        <ListBox Height="169" HorizontalAlignment="Left" Margin="6,271,0,0" Name="listBox1"
                 VerticalAlignment="Top" Width="444" ItemsSource="{Binding}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border BorderBrush="{StaticResource PhoneForegroundBrush}" Width="418"
                            BorderThickness="2" Margin="2">
                        <StackPanel>
                            <TextBlock Text="{Binding Path=Title}" TextWrapping="Wrap" />
                            <TextBlock Text="{Binding Path=Url}" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
        <TextBox Height="209" HorizontalAlignment="Left" Margin="6,446,0,0" Name="textBox1" Text="" VerticalAlignment="Top" Width="444" IsEnabled="True" IsReadOnly="True" />
    </Grid>
</Grid>
</phone:PhoneApplicationPage> 
```

该代码目前已设计，因此您可以选择显示任一示例 XML 文件，但列表框中根本不显示任何内容。

任何意见，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:16:15.170

看看以下是否有帮助：

```
string fakeXML = "<subsonic-response status='ok' version='1.1.1'>" +
                 "<license valid='true' email='foo@bar.com' " +
                 "  key='ABC123DEF' date='2009-09-03T14:46:43'/>" +
                 "</subsonic-response>";
XDocument doc = XDocument.Parse(fakeXML);

var searchResults = from xe in doc.Elements("subsonic-response")
                    select new SearchResult
                    {
                      Title = xe.Attribute("version").Value,
                      Url = xe.Attribute("status").Value
                    };
listBox1.DataContext = searchResults;
textBox1.DataContext = searchResults; 
```

# c++ - STL 容器和内存泄漏

> ID：12204488
> 
> 赞同：1
> 
> 时间：2012-08-30T19:56:02.457
> 
> 标签：c++, stl

C# coder 刚刚编写了这个简单的 C++ 方法来从文件中获取文本：

```
static std::vector<std::string> readTextFile(const std::string &filePath) {
    std::string line;
    std::vector<std::string> lines;
    std::ifstream theFile(filePath.c_str());
    while (theFile.good()) {
    getline (theFile, line);
        lines.push_back(line);
    }
    theFile.close();
    return lines;
} 
```

我知道这段代码效率不高；文本行在读取时复制一次，在按值返回时复制第二次。

两个问题：

(1) 这段代码会泄漏内存吗？(2) 更一般地说，按值返回对象容器是否会泄漏内存？（假设对象本身不泄漏）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T19:59:36.177

```
while (theFile.good()) {
 getline (theFile, line);
    lines.push_back(line);
} 
```

忘了效率，这段代码是不正确的。它不会正确读取文件。请参阅以下主题以了解***原因***：

*   [从 C++ 文件中读取行的首选模式是什么？](https://stackoverflow.com/questions/7219062/whats-preferred-pattern-for-reading-lines-from-a-file-in-c)

所以循环应该写成：

```
while (getline (theFile, line)) {
    lines.push_back(line);
} 
```

现在这是正确的。如果您想提高效率，请先分析您的应用程序。尝试查看占用最多 CPU 周期的部分。

* * *

> (1) 这段代码会泄漏内存吗？

不。

> (2) 更一般地说，按值返回对象容器是否会泄漏内存？

取决于容器中对象的*类型*。在您的情况下，对象的*类型*确保不会泄漏内存。`std::vector``std::string`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:03:03.863

没有也没有。按值返回永远不会泄漏内存（假设容器和包含的对象写得很好）。如果换成其他方式，那将是毫无用处的。

我赞同 Nawaz 所说的，你的 while 循环是错误的。坦率地说，令人难以置信的是，我们看到了多少次，那里肯定有很多糟糕的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T20:05:59.767

> (1) 这段代码会泄漏内存吗？

不

> (2) 更一般地说，按值返回对象容器是否会泄漏内存？

不可以。您可能会泄漏通过指针或泄漏对象存储在容器中的内存。但这不会是由*按值返回*引起的。

> 我知道这段代码效率不高；文本行在读取时复制一次，在按值返回时复制第二次。

很可能不是。该字符串有两个副本，但不是您正在考虑的那些。返回的副本很可能会在 C++03 中进行优化，并且在 C++11 中将被优化掉或转换为移动（廉价）。

这两个应对措施是：

```
getline (theFile, line);
lines.push_back(line); 
```

第一行从文件复制到`line`，第二行从复制`line`到容器。如果您使用的是 C++11 编译器，则可以将第二行更改为：

```
lines.push_back(std::move(line)); 
```

将字符串的内容移动到容器中*。*或者（在 C++03 中也有效），您可以更改这两行：

```
lines.push_back(std::string()); // In most implementations this is *cheap*
                                // (i.e. no memory allocation)
getline(theFile, lines.back()); 
```

并且您应该测试读取的结果（如果读取失败，在最后一个替代方案中，请确保减少`resize`一个元素以删除最后一个空字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T20:16:16.440

在 C++11 中，您可以执行以下操作：

```
std::vector<std::string> 
read_text_file(const std::string& path) 
{
    std::string line;
    std::vector<std::string> ans;
    std::ifstream file(path.c_str());

    while (std::getline(file, line))
       ans.push_back(std::move(line));

    return ans;
} 
```

并且不会制作额外的副本。

在 C++03 中，您接受额外的副本，并且只有在分析要求时才痛苦地删除它们。

注意：您不需要手动关闭文件，析构函数`std::ifstream`会为您完成。

注意2：您可以在 char 类型上进行模板化，这在某些情况下可能很有用：

```
template <typename C, typename T>
std::vector<std::basic_string<C, T>>
read_text_file(const char* path)
{
    std::basic_string<C, T> line;
    std::vector<std::basic_string<C, T>> ans;
    std::basic_ifstream<C, T> file(path);

    // Rest as above
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T20:07:45.980

不，按值返回容器不应泄漏内存。标准库被设计成在任何情况下都不会泄漏内存。如果其实现中存在错误，它只能泄漏内存。至少在旧的 MSVC[中，字符串向量中曾经存在一个错误。](http://connect.microsoft.com/VisualStudio/feedback/details/596565/memory-leak-with-std-vector-std-string-insert-using-const-std-string#details)

# php - 如何修复这个安全漏洞？

> ID：12204491
> 
> 赞同：1
> 
> 时间：2012-08-30T19:56:17.713
> 
> 标签：php, html

我有一个目前可以运行的网站。它有一个显示信息的页面，以及另一个允许您编辑信息源的页面。现在，当您登录 index.php 时，它会通过表单将数据发布到 view.php。该网站不使用任何cookies。当我单击编辑时，它会将用户名、密码和提交请求发布到 edit.php。目前，这个按钮效果很好，但编辑按钮的当前代码如下：

```
<FORM NAME ="form1" METHOD ="post" ACTION = "edit.php">
<p class="BodyText">
<INPUT TYPE = "Hidden" Name = "Username" Value = "<?php print($username); ?>">
<INPUT TYPE = "Hidden" Name = "PassHash" Value = "<?php print($password); ?>">
<INPUT TYPE = "Submit" Name = "Change" VALUE = "Edit">
</p>
</FORM> 
```

我以前没有注意到，但现在我在查看代码时注意到它会打印密码。如果没有这个，我真的不知道如何获取编辑页面的密码，但是当我检查 Chrome 中的元素时，我可以看到密码哈希 (SHA-1)。首先，我认为是的，这是一个安全漏洞吗？其次，如何在不将哈希发送回最终用户的情况下将密码传递给 edit.php 页面。第三，我完全做错了吗？对我来说，通过帖子登录似乎没问题，但安全性疯了吗？我对 PHP 有点陌生，对安全性也完全陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T19:58:44.727

这不是执行此操作的好方法（表单中的隐藏输入）。

了解[PHP 会话](http://php.net/manual/en/features.sessions.php)。

查看[PHP 手册](http://www.php.net/manual/en/session.examples.basic.php)中的一些示例。

您需要在页面之间的会话中保留用户的访问权限，并且永远不要打印出他们的密码。

您可以验证用户的密码以对其进行身份验证，并让会话保存有关用户是谁以及他们是否为该会话登录的信息（而不是尝试在每个页面上验证密码）。

一个示例流程：

验证时（用户登录）：

```
session_start();

// Authenticate user here with the password.
if (someAuthenticationFunction($_POST['user'], $_POST('password') === true) {
    $_SESSION['user'] = $user;
    $_SESSION['loggedIn'] = true; // Notice we're not saving the password into the session, only whether user is loggedIn.
} 
```

在您想要检查用户身份验证的所有其他页面上（很可能在 edit.php 页面上）：

```
session_start();

if ($_SESSION['loggedIn'] === true) {
    $user = $_SESSION['user'];
    // Do the actual editing stuff here.
} 
```

一旦用户准备好退出，使用`session_destroy()`（很可能在退出页面上）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T20:03:47.147

您可以将密码保存在 $_SESSION 变量中。为此，您必须在处理登录表单的页面中写入：

```
session_start();//at top of the page
$_SESSION['user'] = $_POST['username'];
$_SESSION['password'] = $_POST['password']; 
```

设置完成后，您可以在每个文件中获取用户名

```
session_start(); 
```

是写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:03:51.933

如果您不想使用 cookie，您可以使用 URL 中传递的某种会话 ID（请参阅[php.net/output_add_rewrite_var](http://php.net/manual/en/function.output-add-rewrite-var.php)）并将其存储在数据库中，但是您将打开一个全新的蠕虫罐与会话劫持有关。基于 COOKie 的 PHP 会话是可行的方法。

# iphone - 无法在 UITableView 中为 UITableViewCellAccessoryCheckmark 选择单元格

> ID：12204492
> 
> 赞同：1
> 
> 时间：2012-08-30T19:56:21.507
> 
> 标签：iphone, ios, uitableview

如果您在 iOS 中使用过 Messages 应用程序，您就会知道我们如何`UITableViewCellAccessoryCheckmark`通过编辑按钮在任何消息中调用，然后选择每个气泡/单元格进行转发或删除。

我正在尝试在我的应用程序中做同样的事情。我可以点击编辑并`UITableViewCellAcessoryCheckMark`显示，但我无法选择使用它的单元格。我还需要实施什么？

![在此处输入图像描述](../Images/7af3f119ac0a2bee9640e7e07aa2cccb.png)

任何帮助，将不胜感激。这是代码 -

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationItem.rightBarButtonItem  = self.editButtonItem;
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
        return UITableViewCellAccessoryCheckmark;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:35:16.000

对于如图所示的表格视图，可以使用复选标记选择一个或多个单元格，您必须`allowsMultipleSelectionDuringEditing = YES`在表格视图上进行设置。这可以`viewDidLoad`通过

```
self.tableView.allowsMultipleSelectionDuringEditing = YES 
```

或在 NIB/Storyboard 文件中的表格视图的属性检查器中，将“编辑”设置为“编辑期间的多项选择”。

`tableView:editingStyleForRowAtIndexPath:`为此不需要该方法。

（顺便说一句，您的方法返回`UITableViewCellAccessoryCheckmark`的是 a`UITableViewCellAccessoryType`而不是 a `UITableViewCellEditingStyle`。）

# php - 在 session_start() 中刷新数据

> ID：12204493
> 
> 赞同：0
> 
> 时间：2012-08-30T19:56:21.733
> 
> 标签：php, javascript, jquery, ajax, json

我有两个文件 php(index.php & data.php)，第一个向第二个发送数据，它每秒运行一次并显示数据。问题是数据没有更新

也许代码解释得更好

数据.php

```
 <?php
  session_start();

  $xml = simplexml_load_file("file.xml"); // the contents of the file changes every second
  $json = json_encode($xml);
  $_SESSION['varname'] = $json;
  ?> 
```

索引.php

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
    <script language="JavaScript">
          window.setInterval(function() { 
        <?php 
        session_start(); 
        $json = $_SESSION['varname']; 
        ?>

        var newdata = <?php echo $json ; ?>;
    //code to show data

    }, 1000); 
          </script> 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:00:43.780

[`session_start`](http://php.net/manual/en/function.session-start.php)必须在任何输出之前调用（请参阅[文档中的](http://php.net/manual/en/function.session-start.php)注释），这意味着您必须`session_start`在任何输出之前调用：

```
<?php 
    session_start(); ?>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
<script language="JavaScript">
      window.setInterval(function() { 
    <?php 
    $json = $_SESSION['varname']; 
    ?>

    var newdata = <?php echo $json ; ?>;
//code to show data

}, 1000); 
      </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:59:48.197

您实际上根本没有从您的 javascript 调用您的 data.php 脚本。您的 javascript 在这一点上只是静态的（查看您的输出源），一遍又一遍地执行相同的函数，具有相同的`newdata`. 您实际上需要对 data.php 脚本进行 AJAX 调用以更新 JSON。

请注意，此线程上的 session_start 注释很重要。这也应该得到修复，但这不会解决您想要使用 javascript 来获取更新的 JSON 数据但没有`newdata`更改价值的根本问题，因为它目前在您的页面上只是静态的。

# php - 如何在我的 ajax 成功函数中打印 json

> ID：12204500
> 
> 赞同：2
> 
> 时间：2012-08-30T19:56:58.563
> 
> 标签：php, jquery, ajax

我正在从服务器返回 json，但它在我的 ajax 成功回调中不可用。

```
$.ajax({
    url:'myData.php',
    type:'post',
    success:function(data){
        console.log(data.name); // This should print my name
    }
}); 
```

在php中我正在使用这个

```
$data=array('id' => 1, 'name' => 'john');
echo json_encode($data); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:01:50.560

任何一个

1.  告诉 jQuery 你期待返回 JSON 数据。请参阅*http://api.jquery.com/jQuery.ajax/*上的数据[类型](http://api.jquery.com/jQuery.ajax/)

    或者

2.  返回一个标头，以便 jQuery 可以将响应检测为 JSON：

    ```
     header('Content-type: application/json'); 
    ```

# c++ - C++：基于构造函数参数初始化向量

> ID：12204503
> 
> 赞同：0
> 
> 时间：2012-08-30T19:57:05.193
> 
> 标签：c++, vector

抱歉连续问了两个问题。

我想将 Object 的向量声明为实例数据，然后在构造函数中初始化它的大小，如下所示：

```
 class Test
    {
    private:
        std::vector<Object_I_madeup> myVector;
        int n;
    public:
         Test(int n):
           n(n)
        {
            myVector(n); //Intending to set the size of the vector to n entries
        } 
```

我试图找到一个 .setSize() 一个 la Java，并且怀疑我应该使用 resize()。我知道这是一个简单的问题——但最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T19:59:10.123

将其添加到您的初始化程序中：

```
Test (int n):
    myVector(n), n(n) {} 
```

请注意，它应该放在前面，`n`因为成员按照它们在您的类中出现的顺序进行初始化。同样，如果您的`n`成员所做的只是跟踪向量的大小，那么您最好只使用它`myVector.size()`。您还应该对无效值更加严格，因为在这里，有人可以通过 -5 或类似的东西，而您不会阻止他们。我意识到这是一个测试，但意识到无符号参数会更好。正如 Ed 指出的那样，使用`size_t`是你最好的选择，因为这相当于向量使用它的大小 ( `std::vector<T>::size_type`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T19:59:22.713

使用成员初始化器列表，就像您为`n`. 由于向量知道它的大小，你甚至不需要存储`n`. 您可以`myVector.size()`在需要时使用。

```
class Test
{
private:
    std::vector<Object_I_madeup> myVector;
public:
     Test(int n):
       myVector(n) {}
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:59:40.770

为什么要单独构建尺寸？向量总能告诉你它有多少个元素；存储该信息是多余的。你应该在初始化列表中初始化它：

```
class Test {
public:
    Test(size_t size) : myVector(size) { }
private:
    std::vector<Object_I_madeup> myVector;
}; 
```

* * *

请注意，通过使用`int`，您人为地限制了向量的上限。

# c# - 在win表单c#中展开collpase splitcontainer

> ID：12204507
> 
> 赞同：0
> 
> 时间：2012-08-30T19:57:21.140
> 
> 标签：c#, winforms, splitcontainer

我正在使用拆分容器。我的拆分容器有两个面板和水平方向。在第一个面板中有一些文本框和一个按钮。当我单击按钮然后运行代码以折叠拆分容器的 Panel1。代码就像

```
 private void button1_Click(object sender, EventArgs e)
 {
        splitContainer1.Panel1Collapsed = !splitContainer1.Panel1Collapsed; 
 } 
```

我的问题是当崩溃发生时，我的按钮和所有文本框都变得不可见。所以我下次无法使这些控件可见。所以我希望按钮不会不可见，因此我可以再次单击该按钮以使 panel1 可见。如果可能的话，指导我如何修复或将我的按钮放在分离器上而不是面板上。所以指导我该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:49:43.617

```
private void button1_Click(object sender, EventArgs e)
{
    splitContainer1.Panel1Collapsed = !splitContainer1.Panel1Collapsed;
    button1.Parent = splitContainer1.Panel1Collapsed ? splitContainer1.Panel2 : splitContainer1.Panel1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:30:14.910

与我之前对您整个帖子的评论有关。这是一个带有`ToolBarButton`. `SplitContainer.Panel1`只有在折叠时才会启用它。

代码：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        splitContainer1.Panel1Collapsed = true;
        toolStripButton1.Enabled = true;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        splitContainer1.Panel1.Hide();
        toolStripButton1.Enabled = true;
    }

    private void toolStripButton1_Click(object sender, EventArgs e)
    {
        if (splitContainer1.Panel1Collapsed)
        {
            toolStripButton1.Enabled = false;
            splitContainer1.Panel1.Show();
        }
    } 
```

# mysql - 优化django查询拉取外键和django-taggit关系

> ID：12204511
> 
> 赞同：3
> 
> 时间：2012-08-30T19:57:29.787
> 
> 标签：mysql, django, django-templates, django-taggit

我有一个定义如下的待办事项模型：

```
class Action(models.Model):
    name = models.CharField("Action Name", max_length=200, unique = True)

    complete = models.BooleanField(default=False, verbose_name="Complete?")

    reoccurance = models.ForeignKey(Reoccurance, blank=True, null=True, verbose_name="Reoccurance")
    notes = models.TextField("Notes", blank=True)

    tags = TaggableManager()

class Reoccurance(models.Model):
    label = models.CharField("Label", max_length=50, unique = True)
    days = models.IntegerField("Days") 
```

我想列出所有不完整的操作：

```
actions = Action.objects.filter(complete=False) 
```

我的动作列表模板循环：

```
{% for action in actions %}
    <p>{{ action }}</p>
    {% if action.reoccurance %}
        <p>{{ action.reoccurance }}</p>
    {% endif %}
    {% for tag in action.tags.all %}
        <span>{{ tag }}</span>{% if not forloop.last %}, {% endif %}
    {% endfor %}
{% endfor %} 
```

使用[django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)，我看到对于每个操作，我都会在 {% if action.reoccurance %} 和 {% for tag in action.tags.all %} 上访问数据库。

有没有更好的方法来编写我的查询，以便不会在循环的每次迭代中对数据库进行 ping 操作？我认为它与 select_related 有关，但我不确定如何处理[django-taggit](https://github.com/alex/django-taggit)。

**更新**我得到了部分答案。select_related 确实有效，但我必须指定重复出现，可能是因为我不能将它用于标签：

```
actions = Action.objects.select_related('reoccurance').filter(complete=False) 
```

问题仍然存在，我为模板循环中的每个“action.tags.all”都打了数据库。是否可以在 django-taggit 上使用某种预取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T17:40:34.043

可以`prefetch_related`用来检索标签，但您需要避开“标签”属性，因为 - 正如 jdi 所说 - 这是一个自定义管理器而不是真正的关系。相反，您可以这样做：

`actions = Action.objects.select_related('reoccurance').filter(complete=False)\ .prefetch_related('tagged_items__tag')`

不幸的是，`action.tags.all`在您的模板代码中不会使用预取，并且最终会执行自己的查询 - 因此您也需要采取相当棘手的步骤来绕过“标签”管理器：

```
{% for tagged_item in action.tagged_items.all %}
    <span>{{ tagged_item.tag }}</span>{% if not forloop.last %}, {% endif %}
{% endfor %} 
```

（Ed.：如果你得到“'QuerySet' 对象没有属性'prefetch_related'”，这表明你使用的 Django 版本低于 1.4，prefetch_related 不可用。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T01:57:20.803

问题在于它`tags`不是一个字段，而是一个自定义管理器，它位于类级别并且只是进行查询。

我不确定这是否适用于自定义管理器，因为它适用于产生类似查询集的多对多字段等。但是如果你使用的是 django 1.4，你可以试试[`prefetch_related`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related). 它将再做一个查询，批量处理关系并缓存它们。

*再次免责声明：我不知道这是否适用于经理*

```
actions = Action.objects.select_related('reoccurance').filter(complete=False)\
                .prefetch_related('tags') 
```

# python - 如何传输为小部件 graphicsViewPloted（小部件）绘制的图形？Python

> ID：12204512
> 
> 赞同：1
> 
> 时间：2012-08-30T19:57:31.257
> 
> 标签：python, graph, qt4, plot, pyqt4

我正在尝试将我的 senoide 图转移到小部件 graphcsView，但我无法将该图与小部件联系起来。我使用 QT Desing 制作 GUI 并使用 pyuic 生成代码。我可以绘制图形，但无法将视图图框插入 GUI。请问，有人可以帮我吗？

```
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'plot.ui'
#
# Created: Thu Aug 30 13:42:21 2012
#      by: PyQt4 UI code generator 4.8.6
#
# WARNING! All changes made in this file will be lost!

from PyQt4 import QtCore, QtGui
from pylab import*
try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
     _fromUtf8 = lambda s: s

class Ui_ploting(object):
    def setupUi(self, ploting):
        ploting.setObjectName(_fromUtf8("ploting"))
        ploting.resize(400, 300)
        ploting.setWindowTitle(QtGui.QApplication.translate("ploting", "Ploting", None,  QtGui.QApplication.UnicodeUTF8))
        self.pushButtonPlot = QtGui.QPushButton(ploting)
        self.pushButtonPlot.setGeometry(QtCore.QRect(10, 40, 75, 23))
        self.pushButtonPlot.setText(QtGui.QApplication.translate("ploting", "Plot",   None, QtGui.QApplication.UnicodeUTF8))
        self.pushButtonPlot.setObjectName(_fromUtf8("pushButtonPlot"))
        self.graphicsViewPloted = QtGui.QGraphicsView(ploting)
        self.graphicsViewPloted.setGeometry(QtCore.QRect(120, 30, 271, 251))
        self.graphicsViewPloted.setObjectName(_fromUtf8("graphicsViewPloted"))

        self.retranslateUi(ploting)
        QtCore.QObject.connect(self.pushButtonPlot, QtCore.SIGNAL(_fromUtf8("clicked()")), self.ploting)
        QtCore.QMetaObject.connectSlotsByName(plot_1)

    def plot_1(self):
        x=arange(0,2,0.01)
        y=2*sin(2*pi*(x-1/4))
        plot(x,y)
        show()

    def retranslateUi(self, ploting):
        pass

if __name__ == "__main__":
    import sys
    app = QtGui.QApplication(sys.argv)
    ploting = QtGui.QWidget()
    ui = Ui_ploting()
    ui.setupUi(ploting)
    ploting.show()
    sys.exit(app.exec_()) 
```

# apache - 无法在 apache 中加载 mod_wsgi

> ID：12204518
> 
> 赞同：1
> 
> 时间：2012-08-30T19:57:44.833
> 
> 标签：apache, wamp, mod-wsgi

我已经搜索了很多以找到解决方案，但我找不到一个

每当我在我的 httpd.conf 文件中添加这些行时

```
LoadModule wsgi_module modules/mod_wsgi.so 
```

我的 wamp 只是不上网。也没有显示任何错误。我在正确的文件夹中添加了 mod_wsgi.so 文件。虽然我有 64 位窗口，但我尝试添加 32 位和 64 位 mod_wsgi，但都没有工作。

需要很大的帮助。PS：我只想通过从网页获取输入并在同一页面上显示输出来在 python 中运行一个简单的逻辑。如果有人可以建议其他方式...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:28:16.800

所有 Python、Apache 和 mod_wsgi.so 都必须是 32 位或 64 位。您不能混合使用一些 32 位和一些 64 位。此外，必须为系统上的所有用户安装 Python，而不仅仅是您安装它的用户。mod_wsgi.so 必须针对您使用的 Apache 版本进行编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:45:49.503

Apache 2.4.2 ?

`mod_wsgi 3.3` doesn't support `Apache 2.4`

# c++ - 在 OpenCV 中使用 HSV 有效地阈值红色

> ID：12204522
> 
> 赞同：23
> 
> 时间：2012-08-30T19:58:03.510
> 
> 标签：c++, image-processing, opencv

我正在尝试使用 OpenCV 对视频流中的红色像素进行阈值处理。我有其他颜色工作得很好，但红色会带来问题，因为它环绕色相轴（即 HSV(0, 255, 255) 和 HSV(179, 255, 255) 都是红色的）。我现在使用的技术不太理想。基本上：

```
cvInRangeS(src, cvScalar(0, 135, 135), cvScalar(20, 255, 255), dstA);
cvInRangeS(src, cvScalar(159, 135, 135), cvScalar(179, 255, 255), dstB);
cvOr(dstA, dstB, dst); 
```

这是次优的，因为与简单的蓝色情况相比，它需要在代码中为红色（潜在错误）分支、分配两个额外图像和两个额外操作：

```
cvInRangeS(src, cvScalar(100, 135, 135), cvScalar(140, 255, 255), dst); 
```

* * *

我想到的更好的选择是“旋转”图像的颜色，使目标色调为 90 度。例如。

```
int rotation = 90 - 179; // 179 = red
cvAddS(src, cvScalar(rotation, 0, 0), dst1);
cvInRangeS(dst1, cvScalar(70, 135, 135), cvScalar(110, 255, 255), dst); 
```

这使我可以类似地对待所有颜色。

但是，当`cvAddS`色调值低于 0 时，该操作不会将色调值回绕回 180，因此您会丢失数据。我看着将图像转换为，`CvMat`以便我可以从中减去，然后使用模数将负值包装回范围的顶部，但`CvMat`似乎不支持模数。当然，我可以遍历每个像素，但我担心这会很慢。

* * *

我已经阅读了许多教程和代码示例，但它们似乎都方便地只查看不环绕色调光谱的范围，或者使用更丑陋的解决方案（例如，`cvInRangeS`通过迭代每个像素并执行与颜色表进行手动比较）。

那么，解决这个问题的常用方法是什么？最好的方法是什么？各自的取舍是什么？迭代像素是否比使用内置 CV 函数慢得多？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-27T03:36:09.603

This is kind of late, but this is what I'd try.

Make the conversion: cvCvtColor(imageBgr, imageHsv, CV_RGB2HSV);

Note, RGB vs Bgr are purposefully being crossed.

This way, red color will be treated in a blue channel and will be centered around 170\. There would also be a flip in direction, but that is OK as long as you know to expect it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T07:00:32.093

You can calculate Hue channel in range 0..255 with `CV_BGR2HSV_FULL`. Your original hue difference of `10` will become `14` (`10/180*256`), i.e. the hue must be in range `128-14..128+14`:

```
public void inColorRange(CvMat imageBgr, CvMat dst, int color, int threshold) {
    cvCvtColor(imageBgr, imageHsv, CV_BGR2HSV_FULL);
    int rotation = 128 - color;
    cvAddS(imageHsv, cvScalar(rotation, 0, 0), imageHsv);
    cvInRangeS(imageHsv, cvScalar(128-threshold, 135, 135), 
         cvScalar(128+threshold, 255, 255), dst);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T20:55:54.670

你不会相信，但我遇到了完全相同的问题，我通过 Hue（不是整个 HSV）图像使用简单的迭代解决了它。

> 迭代像素是否比使用内置 CV 函数慢得多？

我只是试图理解[cv::inRange](https://code.ros.org/trac/opencv/browser/trunk/opencv/modules/core/src/arithm.cpp?rev=5361)函数，但根本没有得到它（似乎作者使用了一些特定的迭代）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-12T01:00:19.390

There is a really simple way of doing this.

First make two different color ranges

```
cv::Mat lower_red_hue_range;
cv::Mat upper_red_hue_range;
cv::inRange(hsv_image, cv::Scalar(0, 100, 100), cv::Scalar(10, 255, 255), lower_red_hue_range);
cv::inRange(hsv_image, cv::Scalar(160, 100, 100), cv::Scalar(179, 255, 255), upper_red_hue_range); 
```

Then combine the two masks using addWeighted

```
cv::Mat red_hue_mask;
cv::addWeighted(lower_red_hue_range, 1.0, upper_red_hue_range, 1.0, 0.0, red_hue_mask); 
```

Now you can just apply the mask to the image

```
cv::Mat result;
inputImageMat.copyTo(result, red_hue_mask); 
```

I got the idea from [a blog post](https://solarianprogrammer.com/2015/05/08/detect-red-circles-image-using-opencv/) I found

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T09:13:45.420

`cvAddS(...)`在元素级别等价于：

```
 out = static_cast<dest> ( in + shift ); 
```

这个 static_cast 是问题所在，因为它会剪辑/截断值。

一种解决方案是将数据从 (0-180) 转移到 (x, 255)，然后应用带有溢出的非剪切加法：

```
 out = uchar(in + (255-180) + rotation ); 
```

Now you should be able to use a single InRange call, just shift your red interval according to the above formula

# linux - Linux shell 脚本异步命令和完成时的通知

> ID：12204529
> 
> 赞同：5
> 
> 时间：2012-08-30T19:58:17.713
> 
> 标签：linux, shell

我有一个更新 Web 应用程序的脚本。Web 应用程序分布在 2 个服务器上。这是脚本的概要

1.  shell 脚本更新 git 存储库。
2.  shell 脚本停止应用程序服务器。
3.  shell 脚本停止 Web 服务器。
4.  shell 脚本指示应用程序服务器检查最新的 git 更新。
5.  shell 脚本指示 Web 服务器检查最新的 git 更新。
6.  shell 脚本启动应用程序服务器。
7.  shell 脚本启动 Web 服务器。

7 个步骤中的每一个都一个接一个地同步完成。总运行时间约为 9 秒。然而，为了减少停机时间，许多这些步骤可以异步完成。

例如，第 4 步和第 5 步可以同时进行。我想异步启动第 4 步和第 5 步（例如在后台运行），但我找不到如何等到它们都完成后再继续。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T21:59:27.843

您可能希望使用命令分组来维护哪些步骤需要同步：

```
step1
( step2 && step4 && step6 ) &
( step3 && step5 && step7 ) &
wait && echo "all done" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T20:04:36.420

在脚本的后台启动第 4 步和第 5 步（结束`&`），然后在运行第 6 步之前简单地调用 wait bash builtin

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-30T20:04:49.013

您正在寻找`wait`命令。

```
wait: wait [id]
    Wait for job completion and return exit status.

    Waits for the process identified by ID, which may be a process ID or a
    job specification, and reports its termination status.  If ID is not
    given, waits for all currently active child processes, and the return
    status is zero.  If ID is a a job specification, waits for all processes
    in the job's pipeline.

    Exit Status:
    Returns the status of ID; fails if ID is invalid or an invalid option is
    given. 
```

# android - 创建自定义 android 选择器

> ID：12204531
> 
> 赞同：5
> 
> 时间：2012-08-30T19:58:33.477
> 
> 标签：android

请耐心等待，因为这是我的第一个应用程序。我的应用程序不是太具有革命性，但我想通过实现一些自定义选择器使其更加用户友好。例如，使用日历视图的日期选择器或水平流动的类似微调器的选择器（很像 SetCPU）。不幸的是，我什至不知道从哪里开始构建像这样的自定义 ui 组件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T00:45:10.387

我想遵循骨架代码将有助于在您的应用程序中提供您想要的一些灵活性。

```
 /* Simple Dialog

                    Dialog dialog = new Dialog(this);
                    dialog.setTitle("Hello");
                    dialog.show();
      */

    /*    Inflating an layout as the Dialog

                    Dialog loginDialog = new Dialog(this);
                    View layout = LayoutInflater.from(this).inflate(R.layout.login, null);
                    loginDialog.setContentView(layout);
                    Button btn = (Button)(layout.findViewById(R.id.button1));
                    final EditText txt = (EditText) layout.findViewById(R.id.editText1);

                    btn.setOnClickListener(new View.OnClickListener() {

                        public void onClick(View v) {
                            // TODO Auto-generated method stub
                            //Toast.makeText(getApplicationContext(), txt.getText().toString(), Toast.LENGTH_SHORT).show();
                            txt.setText("Ahmedabad");
                        }
                    });
                    loginDialog.show();

            /* ProgreessBar Dialog (you need to implement thread)

        ProgressDialog dialog = new ProgressDialog(this);
                    dialog.setProgressStyle(2);

                    dialog.show();
    */

       /* Alert Dialog to alert a mesage or an error or customize exception like Enter the field, etc.

                AlertDialog dialog = new AlertDialog.Builder(this).create();
                    dialog.setMessage("Message");
                    dialog.setIcon(R.drawable.ic_launcher);
                    dialog.setTitle("Done");
                    dialog.show();
    */

/* ------------------- Binding array items into the spinner ---------------------------

        sp = (Spinner)findViewById(R.id.spinner1);
        String bloodgroups[]={
            "A +ve","B +ve","O +ve","AB +ve","A -ve","B -ve","O -ve","AB -ve"
        };
        ArrayAdapter<String> adapter=new ArrayAdapter<String>(this,android.R.layout .simple_spinner_dropdown_item,bloodgroups); 
        sp.setAdapter(adapter);

*/

/* DatePicker Dialog Code: I have used a button whose click event bring datepicker dialog into focus

 Button btnselDate = (Button)findViewById(R.id.btnseldate); // date select button

// ----------------------------- DATE PICKER DIALOG PROMPT ---------------------
        btnselDate.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
                showDialog(1);
            }
        });

 @Override
     protected Dialog onCreateDialog(int id) {
         DatePickerDialog dialog = new DatePickerDialog(this, new OnDateSetListener()
         {
            public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth)
            {
                ((EditText)findViewById(R.id.txtdate)).setText(dayOfMonth + "/" + monthOfYear + "/" + year);
            }           
         }, new GregorianCalendar().get(Calendar.YEAR), new GregorianCalendar().get(Calendar.MONTH), new GregorianCalendar().get(Calendar.DAY_OF_MONTH));
        return dialog;
     }

*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T20:05:39.123

Android 的默认小部件很简单，但通过混合使用它们，您可以构建自己的自定义小部件。 [在此处阅读有关此内容的更多信息。](http://developer.android.com/guide/topics/ui/custom-components.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T00:07:55.237

好吧，我现在决定放弃了，但对于其他任何人来说，这个网页确实帮助了我，至少让我了解它。

[http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/](http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T20:10:43.333

创建一个扩展 View 的自定义类。然后您可以设置大小并控制在 Canvas 上绘制的内容以及它将如何响应触摸事件。有很多关于创建“小部件”的例子。Reto Meiers 的书中有一个很好的例子，他创建了一个指南针。

# python - 使用 ImageMagick 为存储在 Amazon S3 中的图像生成缩略图

> ID：12204532
> 
> 赞同：0
> 
> 时间：2012-08-30T19:58:35.920
> 
> 标签：python, amazon-s3, imagemagick, imagemagick-convert

我正在寻找使用 ImageMagick 的转换实用程序为存储在 S3 中的图像制作缩略图。我正在用 Python 写这个。

我应该如何处理这个？

我是否应该从 S3 读取图像，将其保存到 EC2 实例上的临时文件夹，将缩略图生成到临时目录，然后将临时文件放入 S3 并删除它？

或者我可以将 S3 的结果直接“管道”到 ImageMagick 而不将其存储到本地磁盘吗？

有推荐的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:33:06.197

您可以将 subprocess 与文件对象一起使用，并将它们直接通过管道传输到 imagemagick。例如，这里我直接将在线 png 转换为 jpg，而不使用临时文件。

```
import subprocess
import urllib2
import sys 
source = urllib2.urlopen('http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png')
p = subprocess.Popen(['convert','png:-', 'jpg:-'], stdin=source, stdout=subprocess.PIPE)
p.communicate()[0] # this is your converted image 
```

# objective-c - iOS MDM：iOS MDM 和支持 MDM iOS 应用程序的通用密钥/ID

> ID：12204535
> 
> 赞同：3
> 
> 时间：2012-08-30T19:58:45.100
> 
> 标签：objective-c, ios5, agent, mdm, udid

我正在研究 MDM 解决方案，我正面临 UDID 问题。我们有一个 iOS 应用程序作为 iOS MDM 服务器的支持应用程序。这个支持应用程序可以在 iOS 设备通过我们的 MDM 服务器注册 MDM 后启动。

在设备注册中，我们可以在服务器端获取设备 UDID，我们将此设备 UDID 用作 iOS MDM 和 iOS 支持应用程序的公共密钥。要在 iOS 支持应用程序中使用我们的 MDM 服务器登录，用户必须提供我们正在使用 api 捕获的用户 ID、密码和 UDID `[[UIDevice currentDevice] uniqueIdentifier]`，因此对于身份验证，这 3 个参数是必需的。

但是苹果在 iOS 5.0 中已经弃用了设备 UDID，所以我们不能使用苹果 API 在 iOS 应用程序中捕获设备 UDID。

现在我们需要一些通用密钥，它在 iOS MDM 证书中可用，并且我们可以在 iOS 支持应用程序中生成。因此，哪个用户已将 iOS 设备注册到 MDM 服务器，只有该用户应该能够登录 iOS 支持应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T04:20:20.153

您也可以使用wifi mac地址代替UDID。获取mac地址的逻辑如下，您可以在您的支持iOS应用程序中使用它来获取mac地址。您可以使用 MDM 命令在服务器端 wifi mac 地址。

//.h 文件

```
#import <Foundation/Foundation.h>

@interface MacAddress : NSObject

+ (NSString *)getMacAddress;

@end 
```

//实现文件

```
#import "MacAddress.h"
#import <sys/socket.h>
#import <sys/sysctl.h>
#import <net/if.h>
#import <net/if_dl.h>

@implementation MacAddress

+ (NSString *)getMacAddress
{
  int                 mgmtInfoBase[6];
  char                *msgBuffer = NULL;
  size_t              length;
  unsigned char       macAddress[6];
  struct if_msghdr    *interfaceMsgStruct;
  struct sockaddr_dl  *socketStruct;
  NSString            *errorFlag = NULL;

  // Setup the management Information Base (mib)
  mgmtInfoBase[0] = CTL_NET;        // Request network subsystem
  mgmtInfoBase[1] = AF_ROUTE;       // Routing table info
  mgmtInfoBase[2] = 0;              
  mgmtInfoBase[3] = AF_LINK;        // Request link layer information
  mgmtInfoBase[4] = NET_RT_IFLIST;  // Request all configured interfaces

  // With all configured interfaces requested, get handle index
  if ((mgmtInfoBase[5] = if_nametoindex("en0")) == 0) 
    errorFlag = @"if_nametoindex failure";
  else
  {
    // Get the size of the data available (store in len)
    if (sysctl(mgmtInfoBase, 6, NULL, &length, NULL, 0) < 0) 
      errorFlag = @"sysctl mgmtInfoBase failure";
    else
    {
      // Alloc memory based on above call
      if ((msgBuffer = malloc(length)) == NULL)
        errorFlag = @"buffer allocation failure";
      else
      {
        // Get system information, store in buffer
        if (sysctl(mgmtInfoBase, 6, msgBuffer, &length, NULL, 0) < 0)
          errorFlag = @"sysctl msgBuffer failure";
      }
    }
  }
  // Befor going any further...
  if (errorFlag != NULL)
  {
    NSLog(@"Error: %@", errorFlag);
    return errorFlag;
  }
  // Map msgbuffer to interface message structure
  interfaceMsgStruct = (struct if_msghdr *) msgBuffer;
  // Map to link-level socket structure
  socketStruct = (struct sockaddr_dl *) (interfaceMsgStruct + 1);  
  // Copy link layer address data in socket structure to an array
  memcpy(&macAddress, socketStruct->sdl_data + socketStruct->sdl_nlen, 6);  
  // Read from char array into a string object, into traditional Mac address format
  NSString *macAddressString = [NSString stringWithFormat:@"%02X:%02X:%02X:%02X:%02X:%02X", 
                                macAddress[0], macAddress[1], macAddress[2], 
                                macAddress[3], macAddress[4], macAddress[5]];
  //NSLog(@"Mac Address: %@", macAddressString);  
  // Release the buffer memory
  free(msgBuffer);
  return macAddressString;
}

@end 
```

# tomcat - 具有动态子文件夹的 Railo/tomcat 的 SES url

> ID：12204536
> 
> 赞同：-2
> 
> 时间：2012-08-30T19:58:53.120
> 
> 标签：tomcat, railo

我已经成功地让 SES url 工作，例如`http://mydomain.com/index.cfm/foo/bar`using `<url-pattern>/index.cfm/*</url-pattern>`，但这仅适用于 root 并且如果文件夹是已知的。例如，如果我有一个带有使用相同技巧的子应用程序的子文件夹，`http://mydomain.com/products/index.cfm/foo/bar`我也可以通过使用来使其工作，但是，如果在动态名称之间和动态名称`<url-pattern>/products/index.cfm/*</url-pattern>`之间存在文件夹，我将不得不为每个名称创建一个 url 模式，因为不会工作。`/products/``index.cfm/foo/bar``<url-pattern>/products/*/index.cfm/*</url-pattern>`

除了重新构建应用程序以不使用动态文件夹结构或每次添加/删除/更改文件夹时必须动态填充此 web.xml 之外的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:58:06.343

您可以在 Jetty 上运行 Railo，我相信它具有更复杂的 URL 模式支持（因为这是 Tomcat 限制，而不是 Railo 本身的问题）。

# listview - jQuery Mobile 复杂列表视图项目

> ID：12204545
> 
> 赞同：0
> 
> 时间：2012-08-30T19:59:30.520
> 
> 标签：listview, jquery-mobile

我有一个 iOS 应用程序，它有一些相当复杂的 UITableViewCells。

我正在考虑将其转换为 Web 应用程序，如果可能的话，我想使用 jQuery Mobile，因为这似乎也是让应用程序在桌面浏览器中显示得体的好方法。（根据我的经验，iUI 虽然不错，但确实不适用于 IE。）

jQuery Mobile 中的基本列表视图似乎正是我想要的，但我想不出一种方法来使每个列表视图项比多行文本更复杂。

理想情况下，我希望能够有多个`<div>`元素以特定方式构造文本，以及将每个项目的背景颜色更改为预先指定颜色列表之一的能力（我们已经有了配色方案，我不能改变每种颜色的含义）。此外，我想将图标保留在右侧，以指示用户可以单击/按下/点击单元格以查看更多详细信息。

我可能如何构建 HTML 的示例布局（它实际上会比这更复杂）：

```
<div>
    <div>
        Doe, Jane (57 y)
    <div>
    <div style="float: left;">
        <div>I: 0800</div>
        <div>R: 0900</div>
        <div>S: 1000</div>
        <div>O: 1100</div>
    </div>
    <div>
        <div>
            // Some more content here
        </div>
    </div>
</div> 
```

jQuery Mobile 可以做到这一点，还是我叫错了树？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:19:09.973

我不认为您可以将 div 添加到列表视图中，但您可以拥有多行这样的文本：[jquery mobile list formatting](http://jquerymobile.com/test/docs/lists/lists-formatting.html)（查看源代码以了解操作方法）。您还可以为每个 li 元素设置不同颜色的主题：[jquery mobile theming list](http://jquerymobile.com/test/docs/lists/lists-themes.html)。

我的经验是，jquery mobile 在自定义列表视图方面没有给您太多自由，所以如果您需要它们比他们页面上的示例更复杂，我建议使用普通的旧 html/css。希望有更多经验的人可以证明我错了！

# python - python - 打开具有“.dta”扩展名的目录中的所有纯文本文件并将行写入csv

> ID：12204549
> 
> 赞同：0
> 
> 时间：2012-08-30T19:59:41.450
> 
> 标签：python, parsing

我有许多纯文本配置文件 (.dta)，它们分布在 27 个子目录中。我正在尝试将所有这些信息中的一些信息解析为一个更易于使用的通用文档。

到目前为止，我有：

```
import linecache
import csv
import os

csvout = csv.writer(open("dtaCompile.csv","wb"))

directory = os.path.join("c:\\","DirectKey")
for root,dirs,files in os.walk(directory):
for file in files:
    if file.endswith(".DTA"):
        f=open(file,'r')

        lines = f.readlines()
        description = lines[1]
        articleCode = lines[2]
        OS = lines[25]
        SMBIOS = lines[32]
        pnpID = lines[34]
        cmdLine = lines[28]
        csvout.writerow([SMBIOS, description, articleCode, pnpID, OS, cmdLine])
        f.close() 
```

我收到以下错误：

```
 Traceback (most recent call last):
   File "test.py", line 11, in <module>
   f=open(file,'r')
   IOError: [Errno 2] No such file or directory: '000003APP.DTA' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:03:40.797

代替

```
 f=open(file,'r') 
```

您的潜在需求

```
 f=open(os.path.join(directory, root, file),'r') 
```

file 只是文件的名称，并没有说明它的路径。您必须将 os.path.join 与各种组件一起使用来创建完整路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:03:43.230

```
if file.endswith(".DTA"):
    file = os.path.join(directory, root, file) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:04:26.340

代替：

```
f=open(file,'r') 
```

尝试：

```
f = open(os.path.join(directory, file), "r") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T20:04:26.627

我的猜测是您正在执行程序的目录与您正在行走的目录不同。

试试打印：os.getcwd() 看看。

# c# - 使用 way2sms api 发送短信

> ID：12204551
> 
> 赞同：14
> 
> 时间：2012-08-30T19:59:43.540
> 
> 标签：c#, asp.net, way2sms

我想使用**way2sms**发送短信。我试过以下代码

**登录.aspx.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication1
{
  public partial class Login : System.Web.UI.Page
  {
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void btnconnect_Click(object sender, EventArgs e)
    {
        Session["id"] = txtmobileno.Text;
        Session["pw"] = txtpw.Text;
        Response.Redirect("/send.aspx");
    }
  }
 } 
```

**发送.aspx.cs**

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.IO;
using System.Net;
using System.Text;
using System.Text.RegularExpressions;

namespace WebApplication1
{
  public partial class send : System.Web.UI.Page
  {
    string mbno, mseg, ckuser, ckpass;
    private HttpWebRequest req;
    private CookieContainer cookieCntr;
    private string strNewValue;
    public static string responseee;
    private HttpWebResponse response;

    protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["id"] == null && Session["pw"] == null)
        {
            Server.Transfer("login.aspx");
        }
        connect();

        try
        {

            lblError.Text = "";
            lblError.Visible = false;
            if (!(IsPostBack))
            {
                btnSend.Attributes.Add("onclick", "return Validate('" + txtTo.ClientID + "','" + txtMessage.ClientID + "');");
                txtMessage.Attributes.Add("onchange", "TextChange('" + txtMessage.ClientID + "','" + lblLeft.ClientID + "');");
                txtMessage.Attributes.Add("onkeyup", "TextChange('" + txtMessage.ClientID + "','" + lblLeft.ClientID + "');");
            }
        }
        catch (Exception ex)
        {
            lblError.Text = ex.Message;
            lblError.Visible = true;
        }
    }

    protected void btnSend_Click(object sender, EventArgs e)
    {
        try
        {
            mbno = txtTo.Text;
            mseg = txtMessage.Text;

            sendSms(mbno, mseg);
            txtTo.Text = "";
            txtMessage.Text = "";
        }
        catch (Exception ex)
        {
            lblError.Text = ex.Message;
            lblError.Visible = true;
        }
    }

    public void connect()
    {
        ckuser = Session["id"].ToString();
        ckpass = Session["pw"].ToString();

        try
        {
            this.req = (HttpWebRequest)WebRequest.Create("http://wwwd.way2sms.com/auth.cl");

            this.req.CookieContainer = new CookieContainer();
            this.req.AllowAutoRedirect = false;
            this.req.Method = "POST";
            this.req.ContentType = "application/x-www-form-urlencoded";
            this.strNewValue = "username=" + ckuser + "&password=" + ckpass;
            this.req.ContentLength = this.strNewValue.Length;
            StreamWriter writer = new StreamWriter(this.req.GetRequestStream(), Encoding.ASCII);
            writer.Write(this.strNewValue);
            writer.Close();
            this.response = (HttpWebResponse)this.req.GetResponse();
            this.cookieCntr = this.req.CookieContainer;
            this.response.Close();
            this.req = (HttpWebRequest)WebRequest.Create("http://wwwd.way2sms.com//jsp/InstantSMS.jsp?val=0");
            this.req.CookieContainer = this.cookieCntr;
            this.req.Method = "GET";
            this.response = (HttpWebResponse)this.req.GetResponse();
            responseee = new StreamReader(this.response.GetResponseStream()).ReadToEnd();
            int index = Regex.Match(responseee, "custf").Index;
            responseee = responseee.Substring(index, 0x12);
            responseee = responseee.Replace("\"", "").Replace(">", "").Trim();
            this.response.Close();

            pnlsend.Visible = true;
            lblErrormsg.Text = "connected";
        }
        catch (Exception ex)
        {
            lblErrormsg.Text = "Error connecting to the server...";
            Session["error"] = "Error connecting to the server...";
            lblError.Text = ex.ToString();

            lblError.Text= ex.ToString();
            //Server.Transfer("login.aspx");
        }
    }
    public void sendSms(string mbno, string mseg)
    {
        if ((mbno != "") && (mseg != ""))
        {
            try
            {
                this.req = (HttpWebRequest)WebRequest.Create("http://wwwd.way2sms.com//FirstServletsms?custid=");
                this.req.AllowAutoRedirect = false;
                this.req.CookieContainer = this.cookieCntr;
                this.req.Method = "POST";
                this.req.ContentType = "application/x-www-form-urlencoded";
                this.strNewValue = "custid=undefined&HiddenAction=instantsms&Action=" + responseee + "&login=&pass=&MobNo=" + this.mbno + "&textArea=" + this.mseg;

                string msg = this.mseg;
                string mbeno = this.mbno;

                this.req.ContentLength = this.strNewValue.Length;
                StreamWriter writer = new StreamWriter(this.req.GetRequestStream(), Encoding.ASCII);
                writer.Write(this.strNewValue);
                writer.Close();
                this.response = (HttpWebResponse)this.req.GetResponse();

                this.response.Close();
                lblErrormsg.Text = "Message Sent..... " + mbeno + ": " + msg;
            }
            catch (Exception)
            {
                lblErrormsg.Text = "Error Sending msg....check your connection...";
            }
        }
        else
        {
            lblErrormsg.Text = "Mob no or msg missing";
        }
    }

    protected void btnLogOut_Click(object sender, EventArgs e)
    {
        Session["id"] = null;
        Session["pw"] = null;
        Session["error"] = null;
        Server.Transfer("login.aspx");
    }

  }
} 
```

但它不起作用。我必须对此代码进行任何更改吗？请告诉我从应用程序或应用程序**发送短信**的任何其他方式`desktop``web`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-22T13:12:23.180

我不知道 way2sms 但我发现的最简单的 SMS API 是[http://cp.bulksmsportal.co.za/sms_default.aspx](http://cp.bulksmsportal.co.za/sms_default.aspx)
代码也很简单

```
public static void sendSMS(string Recepient, string Message)
{
    //Recepient is the cellno in string format
    StringBuilder sb = new StringBuilder();
    sb.Append("http://www.mymobileapi.com/api5/http5.aspx?");
    sb.Append("Type=sendparam");
    sb.Append("&username={yourusername}");//add your username here
    sb.Append("&password={yourpassword}");//add your password here
    sb.AppendFormat("&numto={0}", Recepient);
    string message = HttpUtility.UrlEncode(Message, ASCIIEncoding.ASCII);
    sb.AppendFormat("&data1={0}", message);

    try
    {
        ////Create the request and send data to the SMS Gateway Server by HTTP connection
        HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create(sb.ToString());
        //Get response from the SMS Gateway Server and read the answer
        HttpWebResponse myResp = (HttpWebResponse)myReq.GetResponse();
        System.IO.StreamReader respStreamReader = new System.IO.StreamReader(myResp.GetResponseStream());
        string responseString = respStreamReader.ReadToEnd();
        respStreamReader.Close();
        myResp.Close();
    }
    catch (Exception ex)
    {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:48:16.780

我用过这个：[GSM通信库（GSMComm）](http://www.scampers.org/steve/sms/libraries.htm)

# r - 如何重新排列矩阵中的行

> ID：12204554
> 
> 赞同：0
> 
> 时间：2012-08-30T19:59:48.487
> 
> 标签：r, matrix

我有一个矩阵，想对行重新排序，例如，第 5 行可以切换到第 2 行，第 2 行可以切换到第 7 行。我有一个列表，所有行名都用分隔，`\n`我想我可以以某种方式将它读入 R （它是一个 txt 文件），然后只使用矩阵的名称（在我的情况下为“k”并执行类似的操作`k[txt file,]-> k_new` ，但这不起作用，因为标识符不是第一列而是定义为行名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:08:15.837

```
k[ c(1,5,3,4,7,6,2), ] #But probably not what you meant.... 
```

或者也许（如果您的“k”对象行名不是默认的字符数字序列）：

```
k[ char_vec , ]   # where char_vec will get matched to the row names.

(dat <- structure(list(person = c(1, 1, 1, 1, 2, 2, 2, 2), time = c(1, 
2, 3, 4, 1, 2, 3, 4), income = c(100, 120, 150, 200, 90, 100, 
120, 150), disruption = c(0, 0, 0, 1, 0, 1, 1, 0)), .Names = c("person", 
"time", "income", "disruption"), row.names = c("h", "g", "f", 
"e", "d", "c", "b", "a"), class = "data.frame"))

 dat[ c('h', 'f', 'd', 'b') , ]
 #-------------
  person time income disruption
h      1    1    100          0
f      1    3    150          0
d      2    1     90          0
b      2    3    120          1 
```

# objective-c - 计算左 UIBarButtonItem 宽度

> ID：12204555
> 
> 赞同：0
> 
> 时间：2012-08-30T19:59:51.380
> 
> 标签：objective-c, ios, cocoa-touch

我发现 UIBarButtonItem 框架宽度为 0 的困难方式。谷歌搜索后，我找到了一种遍历导航控制器子视图以查找左栏按钮宽度的方法。它有效，但似乎必须有一种更清洁的方法来做到这一点。

我的应用程序没有理由因为使用这种方法而被拒绝，对吧？

```
 UIView *leftBarButtonView = nil;
    for (UIView* v in self.navigationController.navigationBar.subviews) {
        if ([[v class].description isEqualToString:@"UINavigationButton"])  {
            if (leftBarButtonView==nil) {
                if (v.frame.origin.x > 0.0)
                    leftBarButtonView = v;
            } else if (v.frame.origin.x < leftBarButtonView.frame.origin.x && v.frame.origin.x>0.0) {
                leftBarButtonView = v;  // this view is further right
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:03:03.707

不，它可能不会被拒绝 -**可能**，因为除了 Apple 之外*没有人*可以肯定地说。但是，有一点是肯定的：

```
[[v class].description isEqualToString:@"UINavigationButton"] 
```

不会工作。采用

```
[v isKindOfClass:objc_getClass("UINavigationButton")] 
```

反而。

# javascript - 如何存储在 onClick 事件时填充 div 的数据，然后在刷新时重新填充该 div？

> ID：12204557
> 
> 赞同：0
> 
> 时间：2012-08-30T19:59:51.410
> 
> 标签：javascript

```
$('#submit').on('click',function(event){
        var timeIn = (document.getElementById("timeIn").value);
        var timeOut = (document.getElementById("timeOut").value);
        var aDate = (document.getElementById("datepicker").value);
        $('#timeIn').val(' ');
        $('#timeOut').val(' ');
        $('#datepicker').val(' ');
        $('.daysContain').find('div').eq(inArray.length-1).append('Time In: ' + timeOut);
        $('.daysContain').find('div').eq(outArray.length-1).append('Time Out: ' + timeIn);
        $('.daysContain').find('div').eq(weekArray.length-1).prepend(aDate);

}); 
```

我正在创建一个内部办公室“项目时间”应用程序，该应用程序将允许员工输入在项目上花费的时间。上面的 js 函数有效，但现在我需要一种方法来在刷新后保留数据。我不是在寻找精确的东西，我只需要朝着正确的方向前进（这是我第一次不得不处理这个障碍）。欢迎任何*好的*建议-

# php - IE浏览器窗口在AJAX调用后跳转到表单（不是页面）的顶部

> ID：12204563
> 
> 赞同：0
> 
> 时间：2012-08-30T20:00:08.983
> 
> 标签：php, jquery, ajax, internet-explorer

PHP/JQuery/AJAX 问题在这里：

我在页面底部有一个按钮，它通过 AJAX 调用调用 JQuery 函数，然后，基于数据库中的一些变量（这就是 AJAX 在这里的原因），它启用了答案文本框，也位于底部页。问题是浏览器滚动/跳转到表单的顶部，而不是页面（表单上方有一些图像）。

我想我可能知道可能的根本原因 - 我将 new Date().getTime() 添加到 php 文件 url，因此 IE 不会缓存结果，但它也告诉浏览器该链接是新的，它应该转到页面的顶部。但它会出现在表格的顶部，所以我猜它是可以管理的。

**它只发生在 IE 中。铬，FF = 好的。**

有什么想法吗？

表单标签：

```
<form method="get" id="advisors_form" name="advisors_form"> 
```

ajax调用结构：

```
 $.ajax( {
        type : 'GET',
        url : 'Code/f_aa_answer_request_check.php?' + new Date().getTime(),
        data : request_data,
        success : function(response) {
            if (response == 'success') {
                alert("OK");
            }
    }}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:37:51.857

解决了我自己的问题！

在ajax调用之后添加了return false：

```
$.ajax( {
        type : 'GET',
        url : 'Code/f_aa_answer_request_check.php?' + new Date().getTime(),
        data : request_data,
        success : function(response) {
            if (response == 'success') {
                alert("OK");
            }
    }});
return false; 
```

# html - 如何自定义 normalize.css 字体大小？

> ID：12204565
> 
> 赞同：0
> 
> 时间：2012-08-30T20:00:10.660
> 
> 标签：html, css, normalization

这不是我愚蠢或其他什么（或者我可能是：o），我如何更改 normalize.css 的字体大小？它对于我正在制作的布局来说太大了，我已经看到他们使用**百分比**来表示字体大小。更改字体大小会`html`直接影响所有子元素的字体大小，还是我也必须计算以减小所有其他元素的字体大小？

**编辑**：[Normalize.css](http://necolas.github.com/normalize.css/2.0.1/normalize.css)在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:23:23.917

你可以改变这一行：

```
font-family: sans-serif; /* 1 */ 
```

......到这样的事情：

```
font: normal 12px/1.5 sans-serif; /* 1 */ 
```

其余的应该相应地扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:03:25.157

如果您使用的是相对字体大小 ( `ems`)，那么如果您更改父级的字体大小，则子级将相应地缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:10:34.393

只需添加一个`font-size`为.`font-family``html`

# javascript - 移动 Safari：输入字段上的 Javascript focus() 方法仅适用于点击？

> ID：12204571
> 
> 赞同：85
> 
> 时间：2012-08-30T20:00:39.547
> 
> 标签：javascript, jquery, iphone, input, focus

我有一个像这样的简单输入字段。

```
<div class="search">
   <input type="text" value="y u no work"/>
</div>​ 
```

我正在尝试`focus()`在一个函数中使用它。所以在一个随机函数内部（不管它是什么函数）我有这条线......</p>

```
$('.search').find('input').focus(); 
```

这在每个桌面上都可以正常工作。

但是它不适用于我的 iPhone。该字段没有获得焦点，并且我的 iPhone 上没有显示键盘。

出于测试目的并向大家展示问题，我做了一个快速示例：

```
$('#some-test-element').click(function() {
  $('.search').find('input').focus(); // works well on my iPhone - Keyboard slides in
});

setTimeout(function() {
  //alert('test'); //works
  $('.search').find('input').focus(); // doesn't work on my iPhone - works on Desktop
}, 5000);​ 
```

知道为什么`focus()`不能在我的 iPhone 上使用超时功能。

要查看实时示例，请在您的 iPhone 上测试这个小提琴。[http://jsfiddle.net/Hc4sT/](http://jsfiddle.net/Hc4sT/)

**更新：**

我创建了与我目前在当前项目中面临的完全相同的案例。

我有一个选择框，当“更改”时，它应该将焦点设置到输入字段并滑入 iphone 或其他移动设备上的 kexboard。我发现 focus() 设置正确，但键盘没有出现。我需要键盘出现。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-05-17T04:14:23.273

其实各位，有办法的。我为 [LINK REMOVED]（在 iPhone 或 iPad 上试一试）而费了很大力气才弄清楚这一点。

基本上，触摸屏设备上的 Safari 在`focus()`处理文本框时是很吝啬的。如果您这样做，即使是某些桌面浏览器也会做得更好`click().focus()`。但是触摸屏设备上的 Safari 的设计者意识到当键盘不断出现时会让用户感到烦恼，所以他们只在以下情况下才出现焦点：

1) 用户点击某处并`focus()`在执行点击事件时被调用。如果您正在执行 AJAX 调用，那么您*必须*同步执行，例如使用`$.ajax({async:false})`jQuery 中已弃用（但仍然可用）的选项。

2）此外——这个让我忙了一阵子——`focus()`如果当时有其他文本框关注，它似乎仍然不起作用。我有一个执行 AJAX 的“Go”按钮，所以我尝试`touchstart`在 Go 按钮的事件上模糊文本框，但这只是让键盘消失并在我有机会完成单击 Go 按钮之前移动视口. 最后我尝试在 Go 按钮的事件上模糊文本框`touchend`，这就像一个魅力！

当您将 #1 和 #2 放在一起时，您会得到一个神奇的结果，它将您的登录表单与所有糟糕的 Web 登录表单区分开来，通过将焦点放在您的密码字段上，让它们感觉更原生。享受！:)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2019-04-12T13:16:20.397

WunderBart 答案的原生 javascript 实现。

```
function onClick() {

  // create invisible dummy input to receive the focus first
  const fakeInput = document.createElement('input')
  fakeInput.setAttribute('type', 'text')
  fakeInput.style.position = 'absolute'
  fakeInput.style.opacity = 0
  fakeInput.style.height = 0
  fakeInput.style.fontSize = '16px' // disable auto zoom

  // you may need to append to another element depending on the browser's auto 
  // zoom/scroll behavior
  document.body.prepend(fakeInput)

  // focus so that subsequent async focus will work
  fakeInput.focus()

  setTimeout(() => {

    // now we can focus on the target input
    targetInput.focus()

    // cleanup
    fakeInput.remove()

  }, 1000)

} 
```

其他参考：[禁用输入“文本”标签中的自动缩放 - iPhone 上的 Safari](https://stackoverflow.com/questions/2989263/disable-auto-zoom-in-input-text-tag-safari-on-iphone)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-08-15T23:34:07.050

我最近遇到了同样的问题。我找到了一个显然适用于所有设备的解决方案。您不能以编程方式进行异步焦点，但是当其他一些输入已经获得焦点时，您可以将焦点*切换到目标输入。*因此，您需要做的是创建、隐藏、附加到 DOM 并将**假**输入聚焦在触发事件上，并且当异步操作完成时，只需再次在目标输入上调用焦点。这是一个示例片段 - 在您的手机上运行它。

*编辑：*

这是一个[使用相同代码的小提琴](https://jsfiddle.net/wunderbart/u5r60jkg/)。显然你不能在手机上运行附加的片段（或者我做错了什么）。

```
var $triggerCheckbox = $("#trigger-checkbox");
var $targetInput = $("#target-input");

// Create fake & invisible input
var $fakeInput = $("<input type='text' />")
  .css({
    position: "absolute",
    width: $targetInput.outerWidth(), // zoom properly (iOS)
    height: 0, // hide cursor (font-size: 0 will zoom to quarks level) (iOS)
    opacity: 0, // make input transparent :]
  });

var delay = 2000; // That's crazy long, but good as an example

$triggerCheckbox.on("change", function(event) {
  // Disable input when unchecking trigger checkbox (presentational purpose)
  if (!event.target.checked) {
    return $targetInput
      .attr("disabled", true)
      .attr("placeholder", "I'm disabled");
  }

  // Prepend to target input container and focus fake input
  $fakeInput.prependTo("#container").focus();

  // Update placeholder (presentational purpose)
  $targetInput.attr("placeholder", "Wait for it...");

  // setTimeout, fetch or any async action will work
  setTimeout(function() {

    // Shift focus to target input
    $targetInput
      .attr("disabled", false)
      .attr("placeholder", "I'm alive!")
      .focus();

    // Remove fake input - no need to keep it in DOM
    $fakeInput.remove();
  }, delay);
});
```

```
label {
  display: block;
  margin-top: 20px;
}

input {
  box-sizing: border-box;
  font-size: inherit;
}

#container {
  position: relative;
}

#target-input {
  width: 250px;
  padding: 10px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<div id="container">
  <input type="text" id="target-input" placeholder="I'm disabled" />

  <label>
    <input type="checkbox" id="trigger-checkbox" />
    focus with setTimetout
   </label>
</div>
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-15T11:12:16.540

我设法使它与以下代码一起工作：

```
event.preventDefault();
timeout(function () {
    $inputToFocus.focus();
}, 500); 
```

我正在使用 AngularJS，所以我创建了一个指令来解决我的问题：

**指示：**

```
angular.module('directivesModule').directive('focusOnClear', [
    '$timeout',
    function (timeout) {
        return {
            restrict: 'A',
            link: function (scope, element, attrs) {
                var id = attrs.focusOnClear;
                var $inputSearchElement = $(element).parent().find('#' + id);
                element.on('click', function (event) {
                    event.preventDefault();
                    timeout(function () {
                        $inputSearchElement.focus();
                    }, 500);
                });
            }
        };
    }
]); 
```

**如何使用指令：**

```
<div>
    <input type="search" id="search">
    <i class="icon-clear" ng-click="clearSearchTerm()" focus-on-clear="search"></i>
</div> 
```

看起来您正在使用 jQuery，所以我不知道该指令是否有帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-25T17:57:13.520

我有一个带有图标的搜索表单，单击该图标会清除文本。但是，问题（在移动设备和平板电脑上）是键盘会折叠/隐藏，因为删除的`click`事件`focus`已从`input`.

![带有关闭图标的文本搜索输入](../Images/b64c9e19e01b9c4d353cf144174ef0b9.png)

**目标**：清除搜索表单后（单击/点击 x 图标）**保持键盘可见**！

要做到这一点，`stopPropagation()`请像这样申请事件：

```
function clear ($event) {
    $event.preventDefault();
    $event.stopPropagation();
    self.query = '';
    $timeout(function () {
        document.getElementById('sidebar-search').focus();
    }, 1);
} 
```

和 HTML 表单：

```
<form ng-controller="SearchController as search"
    ng-submit="search.submit($event)">
        <input type="search" id="sidebar-search" 
            ng-model="search.query">
                <span class="glyphicon glyphicon-remove-circle"
                    ng-click="search.clear($event)">
                </span>
</form> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-02-12T17:32:48.773

这个解决方案效果很好，我在手机上测试过：

```
document.body.ontouchend = function() { document.querySelector('[name="name"]').focus(); }; 
```

请享用

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-30T20:38:47.443

**更新**

我也试过这个，但无济于事：

```
$(document).ready(function() {
$('body :not(.wr-dropdown)').bind("click", function(e) {
    $('.test').focus();
})
$('.wr-dropdown').on('change', function(e) {
    if ($(".wr-dropdow option[value='/search']")) {
        setTimeout(function(e) {
            $('body :not(.wr-dropdown)').trigger("click");
        },3000)         
    } 
}); 
```

});

我很困惑为什么你说这不起作用，因为你的 JSFiddle 工作得很好，但无论如何这是我的建议......

在单击事件的 SetTimeOut 函数中尝试这行代码：

```
document.myInput.focus(); 
```

myInput 与输入标签的名称属性相关。

```
<input name="myInput"> 
```

并使用此代码模糊该字段：

```
document.activeElement.blur(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-08-10T03:06:06.560

尝试这个：

```
input.focus();
input.scrollIntoView() 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2016-05-02T07:17:43.330

请尝试使用 on-tap 而不是 ng-click 事件。我有这个问题。我通过在搜索表单标签中创建清除搜索框按钮并通过点击替换清除按钮的 ng-click 来解决它。它现在工作正常。

# asp.net-mvc-3 - Mvc Ajax Jquery不刷新帖子上的视图

> ID：12204575
> 
> 赞同：0
> 
> 时间：2012-08-30T20:00:51.383
> 
> 标签：asp.net-mvc-3, jquery

我是 ajax 和 mvc 的新手......我从 jquery 发回数据时遇到问题。我遇到的问题是正在填充值控制器被击中数据库被更新然后它返回到带有旧数据的页面它没有刷新我必须单击 f5 以查看更改我做错了什么？提前致谢

jQuery

```
 var values = 
                        {
                            "PagePartIdentifier": element,
                            "PagePartContent": data
                        }
                        $.post(@Html.Raw(Json.Encode(Url.Action("UploadData", "Home"))),values,function(data)
                        {
                            // do stuff;
                        }); 
```

模型

```
public class PagePartModel
{

    public string PagePartIdentifier { get; set; }
    public string PagePartContent { get; set; }
} 
```

控制器

```
 [HttpPost, ValidateInput(false)]
    [OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
    public ActionResult UploadData(PagePartModel pagePartm)
    {
        UpdatePage(pagePartm);
        ModelState.Clear();
        //return RedirectToAction("Index");
        return Json(new { success = true });

    } 
```

Html 是从辅助方法呈现的

```
 public static PagePartModel PageAfterContent(this System.Web.Mvc.HtmlHelper html, int page)
    {
        string part = "AfterContent";
        Blog.PageParts pageParts = new Blog.PageParts();

        PagePartModel thispart = pageParts.GetContentForPageByPart(page, part);
        return thispart;
    } 
```

将每个部分的模型返回到页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:08:41.243

使用 $.post 时，您通过 ajax 将数据发送到服务器，因此页面永远不会重新加载。我不确定`UpdatePage(pagePartm);`您的 post 方法中的调用在做什么，但由于该方法是使用 ajax 调用的，因此它无法更改页面上的任何内容。现在，在 $.post 上的成功处理程序中，您可以操纵 DOM 以反映 $.post 调用的成功或失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:15:30.540

在您的操作中，`Json(new { success = true });`您应该/可以返回您希望在页面上显示的数据，而不是返回您的数据，

例如

```
return Json(new { pagePartm }); // if that is what should be returned 
```

然后修改您`$.post()`以将数据附加到 DOM 某处。

例如

```
$.post("your_controller_action", { name: "John", time: "2pm" },
  function(data){
    doStuff(data); // this is your point of interaction with the returned data
    // or
    $("#my_h3").val(data.pagePartm.PagePartIdentifier);
    $("#my_div").append(data.pagePartm.PagePartContent);
}); 
```

来自[jQuery.post](http://docs.jquery.com/Post)文档。

这将避免刷新页面以查看结果的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:17:42.553

jquery ajax 后缓存属性为假？

```
$.ajax({
         url: '/youraction',
         cache: false,
         type: 'post'
         success: function (data) {

         },
         error: function (e) {
             alert(e.responseText);                            
         }
}); 
```

# sql - 通过存储过程从 SQL 导出二进制文件数据（图像）

> ID：12204577
> 
> 赞同：9
> 
> 时间：2012-08-30T20:00:59.240
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试导出大量图像文件，这些文件作为二进制数据在内部存储在 SQL 数据库中。

作为在 SQL 中编写存储过程的新手，我遇到了一些关于如何归档的非常有用的指南，但我似乎遗漏了一些东西。

我在本地运行 SQL Server 2008 R2，并尝试将文件写入 C:\ 驱动器上的文件夹。

这是我到目前为止所拥有的业务部分：

```
BEGIN
DECLARE @cmd VARCHAR(8000)
DECLARE @result int

DECLARE curExportBinaryDocs CURSOR FAST_FORWARD FOR
SELECT 'BCP "SELECT Photograph_Data FROM [ALBSCH Trial].[dbo].[Photograph] WHERE Photograph_ID = '
  + CAST(Photograph_ID AS VARCHAR(500)) + '" queryout "' + @OutputFilePath 
  + CAST(Photograph_ID AS VARCHAR(500)) + '.jpg"' + ' -n -T'
FROM dbo.Photograph

OPEN curExportBinaryDocs   
FETCH NEXT FROM curExportBinaryDocs INTO @cmd
WHILE @@FETCH_STATUS = 0
  BEGIN
     --PRINT @cmd
     EXEC @result = xp_cmdshell @cmd         
     FETCH NEXT FROM curExportBinaryDocs INTO @cmd
  END 
CLOSE curExportBinaryDocs
DEALLOCATE curExportBinaryDocs
END 
```

在 xp_cmdshell 调用之后，'@result' 始终设置为 '1'（失败）。所有表名/字段都是正确的，所以我怀疑我的 BCP 调用有问题，但我不确定接下来要尝试什么。

非常欢迎任何帮助或建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T13:18:49.580

好吧，首先..（对此感到抱歉；））不要使用光标..对大写感到抱歉...

游标最糟糕的事情之一是它们可以锁定您的表。我总是为这些目的做什么（而且速度更快），我使用一个 for 循环.. 像这样

```
declare @totrow int
      , @currow int
      , @result int
      , @nsql nvarchar(max)

declare @sqlStatements table (
  Id int identity(1, 1)
, SqlStatement varchar(max)
)
insert 
into    @sqlStatements
select  'QUERY PART'
from    table

set @totrow = @@rowcount
set @currow = 1
while @totrow > 0 and @currow <= @totrow
begin
  select @nsql = SqlStatement
  from   @SqlStatements
  where  Id = @currow

  exec @result = xp_cmdshell @nsql

  set @currow = @currow + 1
end 
```

对于下一部分，SQL Server 进程是否有足够的权限写入 c: 驱动器？另外，在执行代码时查看消息窗格，也许你可以在那里找到一些东西？

您还可以做什么，尝试手动执行它。只需获取一条 BCP 语句并使用 xp_cmdshell 执行它。它是否给出任何错误？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T08:22:19.560

这是我的最终工作程序和格式文件。我无法在一个地方找到 BCP 命令、权限设置和格式文件布局的更详细信息，所以也许这对某人有用。

```
CREATE PROCEDURE [dbo].[ImgExport] 
   @OutputFilePath VARCHAR(500) = 'C:\SQLTest\ '
AS
BEGIN
   DECLARE @totrow int
   DECLARE @currow int
   DECLARE @result int
   DECLARE @nsql nvarchar(4000)
   DECLARE @sqlStatements table (ID int IDENTITY(1, 1),  SqlStatement varchar(max))   

   INSERT
   INTO @sqlStatements
   SELECT 'BCP "SELECT Photograph_Data FROM [ALBSCH_Trial].[dbo].[Photograph] WHERE  Photograph_ID = '''
     + CAST(Photograph_ID AS VARCHAR(500)) + '''" queryout ' + @OutputFilePath 
     + CAST(Photograph_ID AS VARCHAR(500)) + '.jpg -S localhost\SQLEXPRESS2008 -T -f C:\SQLTest\Images.fmt'
   FROM dbo.Photograph  

   SET @totrow = @@ROWCOUNT
   SET @currow = 1
   WHILE @totrow > 0 and @currow <= @totrow
   BEGIN
      SELECT @nsql = SqlStatement
      FROM @sqlStatements
      WHERE ID = @currow
      EXEC @result = xp_cmdshell @nsql
      SET @currow = @currow + 1
   END
END 
```

格式文件：

```
9.0  
1  
1       SQLBINARY       0       0       "\t"     1      Photograph_Data                                  "" 
```

我希望这对某人有所帮助。

# load - SignalR 发送数据页面加载

> ID：12204578
> 
> 赞同：-1
> 
> 时间：2012-08-30T20:01:06.253
> 
> 标签：load, signals

当我想发送数据时遇到问题 o 在页面加载时从集线器启动子程序。生病放这个示例代码，因为很短

这是我的聊天.vb

```
 Imports System
 Imports System.Collections.Generic
 Imports System.Linq
 Imports System.Web
 Imports SignalR.Hubs

 Public Class Chat
    Inherits Hub
    Public Sub Send(message As String)
       ' Call the addMessage method on all clients
        Clients.addMessage(message)
    End Sub
 End Class 
```

这是我的 default.aspx

```
 <script src="Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
 <script src="Scripts/jquery.signalR-0.5.3.js" type="text/javascript"></script>
 <script src="signalr/hubs" type="text/javascript"></script>
 <script language="javascript" type="text/javascript">
    $(function () {
        // Proxy created on the fly
        var chat = $.connection.chat;

        // Declare a function on the chat hub so the server can invoke it
        chat.addMessage = function (message) {
        $('#messages').append('<li>' + message + '</li>');
        };

        $("#broadcast").click(function () {
           // Call the chat method on the server
           chat.send($('#msg').val());
       }); 
       // Start the connection
       $.connection.hub.start();
    });
 </script>
 </head>
 <body>
   <form id="form1" runat="server">
   <div style="position: absolute; left: 0; top: 0; height: 100%; width: 100%">
     <input type="text" id="msg" />
     <input type="button" id="broadcast" value="broadcast" /> 
     <ul id="messages">
     </ul>
   </div> 
   </form>
 </body> 
```

我不想按下按钮，我希望他在加载页面时自己做

当我这样说

```
 <script language="javascript" type="text/javascript">
      $(document).ready(function () {
        // Proxy created on the fly
        var chat = $.connection.chat;

        // Declare a function on the chat hub so the server can invoke it
        chat.addMessage = function (message) {
        $('#messages').append('<li>' + message + '</li>');
        }; 

       chat.send('Hello World');

       // Start the connection
       $.connection.hub.start();
    });
 </script> 
```

我遇到连接问题我收到此错误“SignalR：必须在发送数据之前启动连接。在 .send() 之前调用 .start()”；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:24:11.743

您必须在发送之前调用 start。

所以：

```
chat.send('Hello World');

// Start the connection
$.connection.hub.start(); 
```

应该：

```
// Start the connection
$.connection.hub.start().done(function () {
    // Call the server side function AFTER the connection has been started
    chat.send('Hello World');
}); 
```

希望这可以帮助！

# java-7 - 何时/我可以将 JDK 7 与 CloudBees Run@cloud 一起使用？

> ID：12204582
> 
> 赞同：4
> 
> 时间：2012-08-30T20:01:18.720
> 
> 标签：java-7, cloudbees

希望能够将 JDK 7 与 CloudBees Run@cloud 一起使用。CloudBees Jenkins 已经支持 JDK 7。

不要认为现在有可能，想要一个 ETA ......？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T14:09:32.090

您现在可以通过设置“运行时”参数来做到这一点：

```
bees app:deploy -Rjava_version=1.7 yourapp 
```

当前可用的版本是 1.6 (Java 6)、1.7 (Java 7) 和 1.8 (Java 8)

您可以在此处阅读有关其他选项的更多信息[https://developer.cloudbees.com/bin/view/RUN/Java+Container](https://developer.cloudbees.com/bin/view/RUN/Java+Container)

# php - LinkedIn 回调不适用于某些 URL（使用 Zend 框架）

> ID：12204591
> 
> 赞同：3
> 
> 时间：2012-08-30T20:02:12.110
> 
> 标签：php, zend-framework, oauth, linkedin

LinkedIn 似乎不喜欢重定向回我的测试站点的想法。

此代码将我引导至 LinkedIn 确认页面，没有任何问题：（这几乎是使用 Zend 的 OAuth 的样板示例）

```
$选项 = 数组（
    '版本' => '1.0',
    'callbackUrl' => 'http://dev.local/',
    'requestTokenUrl' => 'https://api.linkedin.com/uas/oauth/requestToken',
    'userAuthorizationUrl' => 'https://api.linkedin.com/uas/oauth/authorize',
    'accessTokenUrl' => 'https://api.linkedin.com/uas/oauth/accessToken',
    'consumerKey' => [api],
    'consumerSecret' => [秘密]
);

$consumer = new Zend_Oauth_Consumer( $options );

// 开始请求 LinkedIn 请求令牌
$token = $consumer->getRequestToken ();

// 存储 LinkedIn 请求令牌
$_SESSION ['REQUEST_TOKEN'] = 序列化（$token）；

// 将 Web 用户重定向到 LinkedIn 身份验证页面
$消费者->重定向（）；

```

但是，如果我的回调是`http://dev.local/`它不会重定向，但如果我指定一个有效的域（如`http://www.google.com`），它会毫无问题地重定向。

这种行为最近发生（直到大约一个月前它工作正常）。这显然是一个严重的痛苦，因为我需要部署代码才能测试任何东西。

这是人们经历过的问题吗？有没有人找到解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T07:17:30.677

似乎这是因为[LinkedIn 更改了他们的 API](http://developer.linkedin.com/blog/making-it-easier-you-develop-linkedin)，特别是 api 如何与 Oauth 交互：

> 在技​​术方面，我们借用了 OAuth 2.0 的“范围”参数概念，并将其合并到我们的 OAuth 1.0a 和 JS 身份验证流程中。

似乎其他应用程序、插件和库也遇到了一些困难。

# c# - 是 App_Code.dll 中的 Global.asax 文件

> ID：12204592
> 
> 赞同：0
> 
> 时间：2012-08-30T20:02:14.013
> 
> 标签：c#, asp.net, .net, global-asax, app-code

如何部署 Global.asax 文件？它是否在发布模式下编译为 App_Code.dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:05:52.440

您只能部署`Global.asax`文件，它会立即获取更改。就像更改`Web.config`文件一样。

来自 MSDN

> Global.asax 文件，也称为 ASP.NET 应用程序文件，是一个**可选文件**，其中包含用于响应应用程序级事件的代码...
> 
> ASP.NET Global.asax 文件可以与 ASP Global.asax 文件共存。您可以在 WYSIWYG 设计器中、在记事本中创建 Global.asax 文件，也可以在应用程序的 \Bin 目录中作为程序集部署的编译类。**但是，在后一种情况下，您仍然需要一个引用程序集的 Global.asax 文件**。
> 
> **当您将更改保存到活动的 Global.asax 文件时，ASP.NET 页面框架会检测到该文件已被更改。它完成应用程序的所有当前请求，将 Application_OnEnd 事件发送到任何侦听器，并重新启动应用程序域。**实际上，这会重新启动应用程序，关闭所有浏览器会话并刷新所有状态信息。当来自浏览器的下一个传入请求到达时，ASP.NET 页面框架重新分析并重新编译 Global.asax 文件并引发 Application_OnStart 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-16T06:56:02.950

您不能直接部署 only `Global.Asax`。如果需要，可以通过编辑 DLL 来实现。如果您在 MVC 项目上，那么您可以`mvcapplication.cs`在 DLL 中看到。在那里我们可以应用更改。它对我有用。我已将 .net Reflector 与 Reflexil 2.1 一起使用。[图片](https://i.stack.imgur.com/RW81C.png)

# .htaccess - 如何为子目录创建例外，以便主 HTacces 不会干扰子目录？

> ID：12204594
> 
> 赞同：2
> 
> 时间：2012-08-30T20:02:21.587
> 
> 标签：.htaccess, subdirectory

好吧，我有一个运行 ELGG1.8 的主网站，它需要自己创建的 htaccess 才能正常运行。但是现在我想在我的主文件夹中创建一个子目录，而主 /htaccess 搞砸了，我无法访问该文件夹，只运行 html 文件，没有 php，什么都没有。

如何编辑此 .htaccess 以产生异常？

```
<IfModule mod_rewrite.c>

RewriteEngine on

# If Elgg is in a subdirectory on your site, you might need to add a RewriteBase line
# containing the path from your site root to elgg's root. e.g. If your site is
# http://example.com/ and Elgg is in http://example.com/sites/elgg/, you might need
#
#RewriteBase /sites/elgg/
#
# here, only without the # in front.
#
# If you're not running Elgg in a subdirectory on your site, but still getting lots
# of 404 errors beyond the front page, you could instead try:
#
#RewriteBase /

# In for backwards compatibility
RewriteRule ^pg\/([A-Za-z0-9\_\-]+)$ engine/handlers/page_handler.php?handler=$1&%{QUERY_STRING}
RewriteRule ^pg\/([A-Za-z0-9\_\-]+)\/(.*)$ engine/handlers/page_handler.php?handler=$1&page=$2&%{QUERY_STRING}
RewriteRule ^tag\/(.+)\/?$ engine/handlers/page_handler.php?handler=search&page=$1

RewriteRule ^action\/([A-Za-z0-9\_\-\/]+)$ engine/handlers/action_handler.php?action=$1&%{QUERY_STRING}

RewriteRule ^cache\/(.*)$ engine/handlers/cache_handler.php?request=$1&%{QUERY_STRING}

RewriteRule ^services\/api\/([A-Za-z0-9\_\-]+)\/(.*)$ engine/handlers/service_handler.php?handler=$1&request=$2&%{QUERY_STRING}

RewriteRule ^export\/([A-Za-z]+)\/([0-9]+)\/?$ engine/handlers/export_handler.php?view=$1&guid=$2
RewriteRule ^export\/([A-Za-z]+)\/([0-9]+)\/([A-Za-z]+)\/([A-Za-z0-9\_]+)\/$ engine/handlers/export_handler.php?view=$1&guid=$2&type=$3&idname=$4

RewriteRule xml-rpc.php engine/handlers/xml-rpc_handler.php
RewriteRule mt/mt-xmlrpc.cgi engine/handlers/xml-rpc_handler.php

# rule for rewrite module test during install - can be removed after installation
RewriteRule ^rewrite.php$ install.php

# Everything else that isn't a file gets routed through the page handler
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([A-Za-z0-9\_\-]+)$ engine/handlers/page_handler.php?handler=$1 [QSA]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([A-Za-z0-9\_\-]+)\/(.*)$ engine/handlers/page_handler.php?handler=$1&page=$2 [QSA]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:20:56.917

在您的 htaccess 文件中的 .正下方`RewriteEngine on`，添加此规则以允许对目录的请求通过：

```
RewriteRule ^directory/to/pass/through - [L] 
```

这使得当有人请求时`http://your.domain.com/directory/to/pass/through`，重写引擎将让它通过而不干扰它。

# android-layout - 如何将两个模拟器连接到局域网android？

> ID：12204596
> 
> 赞同：1
> 
> 时间：2012-08-30T20:02:23.380
> 
> 标签：android-layout, android-networking

如何将两个模拟器连接到局域网android？我想使用 wifi 和套接字将信息从一个模拟器发送到第二个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:09:45.070

我使用[Android-x86](http://www.android-x86.org/)。它在 VirtualBox 中运行良好，甚至还有[教程](http://www.android-x86.org/documents/virtualboxhowto)。

只需在自己的网络上设置虚拟机，甚至将它们桥接到主机的网络。像冠军一样工作！！！

# java - 常春藤没有解决来自公共 maven 存储库的传递依赖关系

> ID：12204598
> 
> 赞同：0
> 
> 时间：2012-08-30T20:02:40.463
> 
> 标签：java, eclipse, maven, ivy, transitive-dependency

考虑到以下常春藤依赖项，

```
<dependency org="org.fusesource.restygwt" name="restygwt" rev="1.3"
 conf="gwtcompile->default; compile->default"/>

<dependency org="org.jboss.resteasy" name="resteasy-jaxrs" rev="2.3.4.Final"
 conf="compile->compile(*),runtime(*);runtime->runtime(*)"/> 
```

它们依赖于镜像的公共 maven 存储库

> http://myivyserver:8888/mirrored/ 。

正如 ivysettings 解析器指定的链接到 ...

```
<url name="mirrored" m2compatible="true">
  <artifact
    pattern="http://myivyserver:8888/mirrored/${maven2.artifact.pattern}" />
</url> 
```

在哪里我可以看到镜像目录完全复制了远程 maven repos 的工件。

我习惯了 Maven，并且在 Eclipse 上看到构建路径显示了 Maven 依赖项。

现在，我正在为一个项目创建 Ivy 依赖项。我期待看到类似的，而且我确实看到了一个类似的 Ivy 依赖节点，由于 Ivy eclipse 插件，它显示了所有的 jar。

但是，eclipse buildpath 中的 Ivy 依赖节点不显示任何由镜像 pom 传递指定的 jar。

例如，

```
<dependency org="org.fusesource.restygwt" name="restygwt" rev="1.3"
 conf="gwtcompile->default; compile->default"/>

<dependency org="org.jboss.resteasy" name="resteasy-jaxrs" rev="2.3.4.Final"
 conf="compile->compile(*),runtime(*);runtime->runtime(*)"/> 
```

两个依赖项的 pom 都指定了对 javax.ws.rs (jsr311-api) 的依赖项

```
<dependency>
  <groupId>javax.ws.rs</groupId>
  <artifactId>jsr311-api</artifactId>
  <version>1.1</version>
  <scope>provided</scope>
</dependency> 
```

但是 javax.ws.rs(jsr311-api) 并没有像 Maven 管理的项目那样出现在 ivy 托管项目的 buildpath 库中。

我还需要做什么才能让 ivy 插件解决由于 maven pom 引起的传递依赖？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:33:17.367

URL 解析器考虑 maven 布局但不考虑 pom 依赖项。当我实现这个功能时，ibiblio 解析器能够解析 pom 的依赖项。

```
http://ant.apache.org/ivy/history/latest-milestone/resolver/ibiblio.html
<ibiblio name="maven2" m2compatible="true" root="http://myivyserver:8888/mirrored"> 
```

我使用它的时间不长，因为我更喜欢代码中的非传递依赖项，所以我已经完成了使用纯 url 解析器。

# c - execv 是怎么做的？

> ID：12204600
> 
> 赞同：0
> 
> 时间：2012-08-30T20:02:42.720
> 
> 标签：c, windows, exec

也许这是一个魔法问题。我正在尝试创建一个具有以下签名的函数（或等效的 const char *const *args）

```
void ExecuteJavaVM(char** args){

} 
```

我想模拟如何`execv`处理参数数组，因为您可能知道`execv`不需要我们放置数组的最大元素数。它只是神奇地计算我们作为第二个参数传递的数组中的元素数量。

这是 execv 签名。

```
intptr_t _execv( 
   const char *cmdname,
   const char *const *argv 
); 
```

execv 以某种方式设法“计算”数组 argv 中的元素数量。这正是我想要做的。

`sizeof`几乎没用，因为数组的数据类型衰减为一个简单的指针，所以`sizeof`很可能总是返回 4。

有任何想法吗？任何人都知道在哪里可以找到这些 Windows 功能的来源？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T20:04:51.083

来自[POSIX 文档](http://pubs.opengroup.org/onlinepubs/009604499/functions/exec.html)（强调我的）：

> 参数`argv`是指向以空字符结尾的字符串的字符指针数组。**应用程序应确保该数组的最后一个成员是空指针。**这些字符串应构成可用于新过程映像的参数列表。in 的值`argv[0]`应该指向一个文件名，该文件名与由 exec 函数之一启动的进程相关联。

# python - 将“主工具栏”样式类添加到 gtk.Builder 对象后，工具栏中的 gtk.ToolButtons 不是主主题

> ID：12204607
> 
> 赞同：3
> 
> 时间：2012-08-30T20:03:13.310
> 
> 标签：python, glade, gtk3, gtkbuilder

我一直试图让我的工具栏看起来像 Ubuntu 应用程序中的标准工具栏，并且它在一定程度上可以工作，除了工具栏中的按钮没有应用正确的主题。默认工具栏的文本是彩色的，在悬停时，按钮是难看的棕褐色，而不是像标准 Ubuntu 应用程序中那样变得更深的灰色。

换句话说，我得到了这个：

![](../Images/f42e340e5cfddc1b8407df68067bb5c9.png)

而不是这个：

![](../Images/1fcff53d37b31a7589a8635d6d83da59.png)

（我没有足够的代表直接发布图片）

我一直在使用以下方法来更改工具栏样式，因为 Glade 似乎没有自己更改它的选项：

```
self.bd = Gtk.Builder()
self.bd.add_from_file("builderfile.glade")
self.bd.connect_signals(self)
...

toolb = self.bd.get_object("toolbar")
toolb_style = toolb.get_style_context()
toolb_style.add_class(Gtk.STYLE_CLASS_PRIMARY_TOOLBAR) 
```

这适用于工具栏现在变暗的程度，但按钮的主题不正确。`STYLE_CLASS_PRIMARY_TOOLBAR`我尝试在设置而不是使用后手动将按钮添加到工具栏，`Gtk.Builder()`但它们的颜色也不是正确的。

我想手动创建一个工具栏并填写所有信息可能会起作用，但是能够使用 Glade 进行设计会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T03:19:37.720

我在这里写这个答案是因为它是一个解决方案，但这并不理想，因为它不使用 Glade，而且有点乱。我将不得不等到新版本的 Glade 进入 Ubuntu，因为显然该功能已在上游添加。

我最终使用的解决方案只是在标准 GTK 和 python 中创建所有工具栏，然后将其添加到`Gtk.Box`Glade 中定义的空。像这样：

```
bd = Gtk.Builder()
bd.add_from_file("gladefile.glade")

...

button1 = Gtk.ToolButton(stock_id=Gtk.STOCK_ADD, ...)
button2 = Gtk.ToolButton(...)

toolbar = Gtk.Toolbar()
toolbar.get_style_context().add_class(Gtk.STYLE_CLASS_PRIMARY_TOOLBAR)
toolbar.insert(button1, 0)
toolbar.insert(button2, 1)
toolbar.show_all()

bd.get_object("toolbar_slot").pack_start(toolbar, False, True, 0) 
```

# .net - 将 AU 文件转换为 MP3

> ID：12204609
> 
> 赞同：-1
> 
> 时间：2012-08-30T20:03:16.050
> 
> 标签：.net, audio, mp3

是否有任何框架、技术或工具可用于将 .AU 文件转换为 .MP3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:32:41.330

我强烈建议包装[FFMPEG](http://ffmpeg.org/)或直接执行它。它可以处理大量的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:16:36.700

查看[Aumplib：用于音频转换的 C# 命名空间和类](http://www.codeproject.com/Articles/8544/Aumplib-C-Namespace-And-Classes-For-Audio-Conversi)

> Aumplib（全称：Arbingersys.Audio.Aumplib）是提供音频转换能力的各种类的命名空间，可以在包括MP3在内的多种音频格式之间进行转换。

# casting - 将 float2 转换为 double2 ，反之亦然

> ID：12204610
> 
> 赞同：4
> 
> 时间：2012-08-30T20:03:18.987
> 
> 标签：casting, opencl

所以我有一个openCL程序，其中一些变量在float2中，有些在double2中。而且我想向上或向下转换这些变量，但我不知道该怎么做。我试图像我通常对 float 和 double 所做的那样显式地转换它，但它没有用。

```
float2 a,b;
double2 c,d;

a = (float2)(c+d); //didnt work
a = float2(c+d);  //didnt work 
```

也许我不理解“float2”和“double2”类型，有人能告诉我如何投射它们才能正常工作吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:38:20.230

floatn 和 doublen 类型系列表示值的向量（在您的情况下，它们有 2 个成员）。C 风格的转换对它们不起作用。

有一系列转换函数适用于如下所示的向量：

```
convert_float2(vec2) 
```

但是，阅读[此处](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/)的文档，似乎不支持从/到 double2 的转换。这使您可以选择手动执行转换：

```
a.x = float(c.x + d.x);
a.y = float(c.y + d.y); 
```

# c# - 从插件程序集将 WPF UI 加载到 MVVM 应用程序中

> ID：12204614
> 
> 赞同：12
> 
> 时间：2012-08-30T20:03:28.307
> 
> 标签：c#, wpf, mvvm

我正在开发一个使用插件架构来扩展其功能的应用程序。从插件加载 WPF UI 的最佳方式是什么？

我将有一个列表框列出所有可用的插件。选择插件后，插件中定义的 WPF UI 应以`ContentControl`. 我想到的选项包括：

*   需要`UserControl`创建一个实现特定接口的。我认为这将使插件创建变得容易。实现一个接口，你就可以开始了。我对这种方法的问题是如何`UserControl`将`ContentControl`. 此外，由于我使用的是 MVVM 设计模式，因此 a 似乎`DataTemplate`优于`UserControl`.
*   允许`DataTemplate`从插件加载。我相信这需要插件包含一个以某种方式命名的 XAML 文件。我的应用程序会读`DataTemplate`入我的资源字典，如[这个问题所示。](https://stackoverflow.com/a/919613/918431 "在这个问题中。") 我见过很多类似的问题，除了它们通常只需要加载一个额外的预定义程序集即可`DataTemplates`。这个问题需要搜索任意数量的未知程序集`DataTemplates`。

如果我选择第二个选项，我想我可以选择`DataTemplate`类似于[此答案描述的方式。](https://stackoverflow.com/a/3925239/918431)

你认为哪种方法更好？或者你有更好的方法来完成这个吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-30T20:15:52.473

我做了类似提到的类似的事情`DataTemplates`。我使用[MEF](http://mef.codeplex.com/)加载插件，然后在启动时加载了对and`Dictionary`的引用。该插件使用 3 个主要组件构建。`ViewModel``View`

**IBasePlugin.cs**

这个简单的界面允许我们为插件创建一个骨架。这将只包含非常基础的内容，因为这是我们将`Import`使用`MEF`.

```
public interface IBasePlugin
{
    WorkspaceViewModel ViewModel { get; }
    ResourceDictionary View{ get; }
} 
```

**插件.cs**

下一部分是`Plugin.cs`文件。它包含我们插件的所有属性，以及所有必要的参考；比如我们的`View`& `ViewModel`。

```
[Export(typeof(IBasePlugin))]
public class Plugin : IBasePlugin
{
    [Import]
    private MyPluginViewModel _viewModel { get; set; }
    private ResourceDictionary _viewDictionary = new ResourceDictionary();

    [ImportingConstructor]
    public Plugin()
    {
        // First we need to set up the View components.
        _viewDictionary.Source =
            new Uri("/Extension.MyPlugin;component/View.xaml",
            UriKind.RelativeOrAbsolute);
    }

    ....Properties...

} 
```

**查看.xaml**

这是一个`DataTemplate`包含对插件的引用`View`和`ViewModel`. 这就是我们将用于`Plugin.cs`加载到主应用程序中的内容，以便应用程序`WPF`知道如何将所有内容绑定在一起。

```
<DataTemplate DataType="{x:Type vm:MyPluginViewModel}">
    <vw:MyPluginView/> 
```

然后，我们使用[MEF](http://mef.codeplex.com/)加载所有插件，将它们提供给我们`ViewModel`负责处理插件的工作区，并将它们存储在一个`ObservableCollection`用于显示所有可用插件的容器中。

我们用来加载插件的代码看起来像这样。

```
var plugins = Plugins.OrderBy(p => p.Value.ViewModel.HeaderText);
foreach (var app in plugins)
{
    // Take the View from the Plugin and Merge it with,
    // our Applications Resource Dictionary.
    Application.Current.Resources.MergedDictionaries.Add(app.Value.View)

    // THen add the ViewModel of our plugin to our collection of ViewModels.
    var vm = app.Value.ViewModel;
    Workspaces.Add(vm);
} 
```

一旦`Dictinoary`和`ViewModel`都从我们的插件加载到我们的应用程序中，我们可以使用例如 a 来显示集合`TabControl`。

```
<TabControl ItemsSource="{Binding Workspaces}"/> 
```

[我在这里](https://stackoverflow.com/questions/8755476/how-to-add-controls-in-the-tab-item-programmatically-in-wpf-with-mvvm/8755865#8755865)也给出了类似的答案以及一些您可能会感兴趣的其他细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T08:06:18.923

我使用与富士类似的方法。唯一的区别是我相互独立地导出`ViewModel`和，`ResourceDictionary`所以它们仍然是松散耦合的。

```
[Export(typeof(IPlugin)]//i use metadata too
public class Viewmodel1 {}

[Export(typeof(IPlugin)]//i use metadata too
public class Viewmodel2 {}

[ResourceDictionaryExport]
public partial class MyResourceDictionary 
{
    public MyResourceDictionary ()
    {
        InitializeComponent();
    }
} 
```

在我的插件应用程序中，我添加了所有`ResourceDictionaries`.

应用程序.xaml.cs

```
 [ImportMany("Resourcen", typeof(ResourceDictionary))]
 private IEnumerable<ResourceDictionary> _importResourcen;

 foreach (var resourceDictionary in _importResourcen)
 {
     this.Resources.MergedDictionaries.Add(resourceDictionary);
 } 
```

为了完整起见

```
[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public class ResourceDictionaryExportAttribute : ExportAttribute
{
    public ResourceDictionaryExportAttribute() : base("Resourcen", typeof(ResourceDictionary))
    {

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T20:16:25.873

听起来您正在寻找的东西已经用 Prism 完成了。您定义区域，然后在运行时加载可能有也可能没有这些区域的视图的模块。如果您的所有应用程序都是针对从 Prism 派生的模块化概念构建的，则此方法有效。还有其他的，但是 Prism 已经非常广泛地处理了这个问题。

# stored-procedures - 将我的查询更改为存储过程？

> ID：12204623
> 
> 赞同：0
> 
> 时间：2012-08-30T20:04:14.500
> 
> 标签：stored-procedures

这是查询（MS SQL）：

```
use DB_432799_satv

select [DB_432799_satv].[dbo].ac_Orders.OrderNumber, OrderDate, PaymentDate, 
    CompletedDate, ShipDate,DateTimeFinishedPicking,DateTimeShipped, 
    ShipMethodName, PaymentMethodName
from [DB_432799_satv].[dbo].ac_Orders
Inner join [DB_432799_satv].[dbo].ac_Payments on 
    [DB_432799_satv].[dbo].ac_Orders.OrderId  = 
    [DB_432799_satv].[dbo].ac_Payments.OrderId
Inner join [DB_432799_satv].[dbo].ac_OrderShipments on  
    [DB_432799_satv].[dbo].ac_Orders.OrderId = 
    [DB_432799_satv].[dbo].ac_OrderShipments.OrderId
Inner join [DB_432799_satv].[dbo].[ac_Transactions] on 
    [DB_432799_satv].[dbo].ac_Payments.paymentid = 
    [DB_432799_satv].[dbo].ac_Transactions.paymentid
Inner join [SuperATV].[dbo].[tblPartsBoxHeader] on 
    [DB_432799_satv].[dbo].[ac_transactions].[ProviderTransactionId] = 
    [SuperATV].[dbo].[tblPartsBoxHeader].[ordernumber] 
```

我如何将其更改为存储过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:21:05.493

我怀疑你想要的是“视图”会给你什么。具体来说，将该查询存储在数据库中并从中进行选择，例如：

```
SELECT * FOM myLongQueryView WHERE OrderNumber = 1234; 
```

我不开发 MSSQL，但快速搜索[在 msdn 上找到了这个文档页面](http://msdn.microsoft.com/en-us/library/ms187956.aspx)。我想它会是这样的：

```
CREATE VIEW [DB_432799_satv].myLongQueryView
AS 
select [DB_432799_satv].[dbo].ac_Orders.OrderNumber, OrderDate, PaymentDate, 
    CompletedDate, ShipDate,DateTimeFinishedPicking,DateTimeShipped, 
    ShipMethodName, PaymentMethodName
from [DB_432799_satv].[dbo].ac_Orders
... 
```

只需在查询前加上`CREATE VIEW [DB_432799_satv].myLongQueryView AS`，然后使用文档页面来决定是否需要任何选项。

重要的是要注意*查询*是存储的，而不是当前结果。因此，它会与您的数据保持同步。它是可连接的，可聚合的，等等......

# spring - 如何处理错误“不支持请求方法'GET'”

> ID：12204625
> 
> 赞同：0
> 
> 时间：2012-08-30T20:04:19.557
> 
> 标签：spring, spring-mvc

我想从列表视图中删除实体。我遇到了这个问题。你能解释一下，问题是什么，我该如何克服它？

控制器方法：

```
@RequestMapping(value = "/deleteComment/{commentId}", method = RequestMethod.POST)
public String deleteComment(@PathVariable int commentId, BindingResult result, Model model){
{
    Comment deletedComment = commentService.findCommentByID(commentId);
    if (deletedComment != null) {
         commentService.deleteComment(deletedComment);
    }

     return "refresh:";
} 
```

如果我正在处理列表视图（并且我看到整个列表），我是否需要指定“获取”方法。如果我需要，我应该在那里放置什么代码。我没有任何想法...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T23:24:28.137

问题出在按钮类型属性中。

如果您有 HTML 按钮`type="submit"` ，那么您的服务只能是`RequestMethod.GET`. 当您更改为`RequestMethod.POST`then 您有“不支持请求方法'GET'”。

解决方案：将按钮标签中的属性更改为`type="button"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:15:05.717

通过指定`method = RequestMethod.POST`，您实际上是在说该`deleteComment`方法应该只为`POST`和为 path调用`/deleteComment/{commentId}`。如果您希望它也接受 GET 请求，您可以删除该方法或接受 GET 也这样：

```
@RequestMapping(value = "/deleteComment/{commentId}", method = {RequestMethod.POST, RequestMethod.GET}) 
```

您可能还希望以这种方式显式指定要绑定到 commentId 路径变量的变量名称：

```
public String deleteComment(@PathVariable("commentId") int commentId, BindingResult result, Model model){ 
```

# iphone-developer-program - 关于注册适用于 iOS 的 Apples Developers Programm

> ID：12204634
> 
> 赞同：0
> 
> 时间：2012-08-30T20:04:46.440
> 
> 标签：iphone-developer-program

我已经为 iOS 开发了一个应用程序，我想将它上传到 AppStore。我即将购买适用于 iOS 的 Apple 开发人员许可证，因此我想向已经注册此类计划的人提出一些问题。

首先，我是个人程序员，我没有公司，所以我应该获得目前售价 99 美元的个人许可证。当我以个人身份向 AppStore 提交申请时，它会显示我作为公司的真实姓名，还是我可以选择我想要的任何名称？

其次，对于我使用此许可证上传的每个应用程序，上述名称是否相同？

第三也是最重要的。我的申请不是免费的。不过我也想有一个免费版来展示付费版的基本功能。有什么区别：

*   拥有一个对初学者免费的应用程序，然后您可以升级和付费？
*   有 2 个不同的应用程序，其中一个被称为轻型版本？

人们是否更难破解并安装第一个选项？因为很多次我在安装下载应用程序时看到它没有付费升级（也许我在这里错了，虽然......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:08:21.213

您仍然选择将出现在您的所有应用程序上并且很难更改的公司名称。

关于拥有精简版，您可能会发现苹果宁愿您使用应用内购买升级路线，并且可能会拒绝您的其中一个版本。无论如何，应用内购买升级将不如付费完整版“破解”。特别是如果您验证收据。

# c# - 将代码从 Global.asax 文件发送到 default.aspx

> ID：12204643
> 
> 赞同：0
> 
> 时间：2012-08-30T20:05:04.010
> 
> 标签：c#, asp.net, .net, global-asax

我有一个 default.aspx 页面，有时会导致 Global.asax 文件中捕获的异常。如何在不刷新页面的情况下将数据发送回我的 default.aspx 页面以更改 HTML 输出？那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:09:11.173

您将必须实现 try catch，然后检测错误并采取相应措施，
因此假设您知道在哪一行出现错误。

```
try
{
 //error prone code
}
catch
{
 reponse.write("error");
 response.End()
} 
```

这样做你会捕捉到错误，它不会在 global.asax 文件中被捕捉到，并且`"error"`字符串将作为对用户的响应发回
*注意 - 这只是一个示例，代码的结构可能会因请求的类型`GET`或`POST`即使是`AJAX`基于请求的

# c# - 文件大小超过允许的限制，无法保存到 EventLog

> ID：12204647
> 
> 赞同：0
> 
> 时间：2012-08-30T20:05:10.333
> 
> 标签：c#, .net, web-services, event-viewer

获取此异常 文件大小超过允许的限制，使用写入事件查看器时**无法保存**`EventLog`

使用的代码：

```
 string cs = "LoggingService";
                    EventLog elog = new EventLog();

                    if (!EventLog.SourceExists(cs))
                    {
                        EventLog.CreateEventSource(cs, cs);
                    }

                    elog.Source = cs;
                    elog.EnableRaisingEvents = true;

                    elog.WriteEntry(message); 
```

堆栈跟踪：

```
System.ComponentModel.Win32Exception (0x80004005): The file size exceeds the limit allowed and cannot be saved
   at System.Diagnostics.EventLogInternal.get_OldestEntryNumber()
   at System.Diagnostics.EventLogInternal.StartRaisingEvents(String currentMachineName, String currentLogName)
   at System.Diagnostics.EventLogInternal.set_EnableRaisingEvents(Boolean value) 
```

尝试的事情：

1.  [http://support.microsoft.com/kb/328380#top](http://support.microsoft.com/kb/328380#top)
2.  当我 在收到不同的异常`elog.Clear()`之前发表此声明时`elog.EnableRaisingEvents = true;`

    System.ComponentModel.Win32Exception (0x80004005)：访问在 System.Diagnostics.EventLogInternal.Clear() 被拒绝

**上面的代码是由运行在LocalSystem**下的 Web 服务执行的，该服务对计算机具有完全权限。

操作系统：windows server 2008R2 和 .NET 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:20:13.903

有一个方法 EventLog.ModifyOverflowPolicy 可以修改日志策略。我相信 EventLog.ModifyOverflowPolicy(OverflowAction.OverwriteAsNeeded,0) 可能会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T20:35:46.913

事件查看器 - 属性 - 最大日志大小为 1028。我撞了它，它开始正常工作。

但是在我进行上述更改之前，相同的代码正在另一个窗口服务中工作。这让我想到会发生什么

我试图记录的消息只是一行（少于 255 个字符）

# java - 如何在不使用表单 taglib 的情况下访问 JSP 中的 Spring 3 MVC 验证器结果

> ID：12204649
> 
> 赞同：14
> 
> 时间：2012-08-30T20:05:21.863
> 
> 标签：java, jsp, data-binding, spring-mvc

我有一个使用 jsp taglibs 的简单 Spring 3 MVC 表单。我需要根据表单中的字段是否有任何与之相关的错误来添加一个类。这是我的 HTML 的片段：

```
<div class="control-group error"> <!-- HERE: binding.hasErrors() ? "error" : "" -->
    <form:label path="username" cssClass="control-label">User Name</form:label>
    <div class="controls">
        <form:input path="username" cssClass="span3"/>
        <form:errors path="username" cssClass="help-inline" />
    </div>
</div> 
```

所以在第一行，类属性有两个类“控制组”和“错误”。只有当该字段有与之关联的错误时，我才需要添加错误类。我知道 WebDataBinder 以某种方式包含在页面中，但我不知道如何访问它。本质上我只想执行一些好的旧时尚 <%= binding.hasError() ？"error" : "" %>，但是如何访问页面中的活页夹？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-30T20:47:22.310

您是否尝试[`<spring:hasBindErrors>`](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#spring.tld.hasBindErrors)过标记（我不明白您的意思是写“不使用表单标记库”）？

```
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>

<spring:hasBindErrors name="yourCommandName">
  <c:if test="${errors.hasFieldErrors('username')}">
    <c:set var="errorClass" value="error" />
  </c:if>
</spring:hasBindErrors>

<div class="control-group <c:out value='${errorClass}' />"> 
```

*评论后编辑：*

内部`<spring:hasBindErrors>`标签有绑定到实际绑定错误的`errors`变量（参见[`Errors`接口）。](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/validation/Errors.html)您可以通过 . 检查字段是否有错误`errors.hasFieldErrors(fieldName)`。

* * *

[在没有任何标签的情况下获取字段错误的真正晦涩方法是`requestScope['org.springframework.validation.BindingResult.yourCommandName'].hasFieldErrors('username')`......]

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-31T01:29:28.960

虽然这有点模糊，但我认为它更简单，因为它是单行代码，如果我只是像任何理智的 Java 开发人员一样使用 scriplets 的话。Taglibs需要死死死死，然后再死一些。它们太可怕了，我不敢相信 Java 开发人员仍然认为它们确实有帮助，而不是浪费我们的全部时间。当我们使用这些东西时，PHP 开发人员会嘲笑我们。

```
<div class="control-group ${requestScope['org.springframework.validation.BindingResult.user'].hasFieldErrors('firstName') ? 'error' : ''}"> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-13T15:21:08.560

有更好的方法来获取错误消息

```
<spring:hasBindErrors name="yourCommandName">
    ${errors.hasFieldErrors('userId') ? errors.getFieldError('userId').defaultMessage : ''}
</spring:hasBindErrors> 
```

和一个班轮

```
 ${requestScope['org.springframework.validation.BindingResult.user'].hasFieldErrors('emailId') ? requestScope['org.springframework.validation.BindingResult.user'].getFieldError('emailId').defaultMessage : ''} 
```

# c# - 如何在 Windows 8 Metro 中将 IP 地址与网络名称相关联

> ID：12204652
> 
> 赞同：1
> 
> 时间：2012-08-30T20:05:26.870
> 
> 标签：c#, windows-8, microsoft-metro, .net-4.5

我需要获取用户连接到的所有网络名称的列表以及该网络上计算机的 IP 地址。我可以使用 NetworkInformation.GetConnectionProfiles() 获取网络名称列表，并且可以使用 NetworkInformation.GetHostNames() 获取 IP 地址列表，但我无法弄清楚如何关联这两个列表。我认为这将是通过 NetworkAdapters 但两个不同调用之间的 ID 不同。

有谁知道如何做到这一点？

更新：为了澄清，我问的是如何在 Windows 8 上的 Metro 应用程序中执行此操作。

更新 2：事实证明这是 Release Preview 中的一个错误。现在我们已经切换到 RTM，一切正常，无需对现有代码进行任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:04:45.653

编辑：刚刚发现这个......[查询本地IP地址](https://stackoverflow.com/questions/10336521/query-local-ip-address) 看起来像一个更干净的方式。任你选...

我会采取刺伤... 希望能让你接近。我只有一个适配器连接在我的测试机器上，但我认为（希望）这可以在具有多个适配器的机器上工作。

```
// Get all profiles
var profiles = NetworkInformation.GetConnectionProfiles();

// filter out profiles that are not currently online 
var connected = from p in profiles where p.GetNetworkConnectivityLevel() != NetworkConnectivityLevel.None select p;

// find all hosts
var hosts = NetworkInformation.GetHostNames();

// find hosts that have an IP Address
var online = from h in hosts where h.IPInformation != null select h;

// Now loop there each online connection and match network adapter ids with hosts
foreach (var c in connected)
{
   var matches = from o in online where o.IPInformation.NetworkAdapter.NetworkAdapterId == c.NetworkAdapter.NetworkAdapterId select o;
} 
```

这里唯一的问题是，一个物理适配器实际上会显示一次它的 IPv4 地址，一次显示它的 IPv6 地址。您将不得不采取额外的步骤并将它们关联在一起。希望这是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:22:17.160

好吧，我不了解 c# 或 .net 框架，但是从 windows 命令提示符下，命令 netstat -f 是您所需要的。也许你可以解析一下。

**更新**

我想我明白你需要什么。如果您有 IP 地址列表，则可以使用 Dns.GetHostEntry 将它们转换为主机名

看看[这篇文章](http://www.dijksterhuis.org/converting-an-ip-address-to-a-hostname-and-back-with-c/)，它讨论了 C# 中的问题。

# c# - 用于匹配字符的正则表达式，但不是当它包含在方括号中时

> ID：12204657
> 
> 赞同：4
> 
> 时间：2012-08-30T20:05:44.603
> 
> 标签：c#, .net, regex

输入字符串：

```
[Wsg-Fs]-A-A-A-Cgbs-Sg7-[Wwg+s-Fs]-A-A-Afk-Cgbs-Sg7 
```

所需的输出是一个字符串数组：

```
[Wsg-Fs] A A A Cgbs Sg7 [Wwg+s-Fs] A A Afk Cgbs Sg7 
```

如果我用`-`分隔符分割输入字符串，方括号内的字符串也会被分割。

如何拆分字符串`-`以便忽略方括号内的字符串？

我可以找到一些类似的帖子试图忽略引号中的分隔符，但是我无法将这些解决方案应用于我的问题。

任何建议都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T20:10:42.677

假设没有嵌套的方括号，您可以使用以下内容仅匹配`-`方括号之外的字符：

```
-(?![^\[]*\]) 
```

示例：[http ://regex101.com/r/sX5hZ2](http://regex101.com/r/sX5hZ2)

这使用负前瞻，其逻辑是，如果在任何左方括号之前有一个右方括号，那么`-`我们尝试匹配的 是在方括号内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T23:58:26.060

复活这个古老的问题以提供另一种解决方案，因为当前的问题只检查分裂`-`后没有 a `]`，这不能保证它被括在括号中。

```
\[[^\]]*\]|(-) 
```

[然后在第 1 组上拆分（请参阅演示](http://regex101.com/r/vL2gD0)右下方面板中的第 1 组捕获）

要在第 1 组上拆分，我们首先将第 1 组替换为独特的东西，例如`SPLIT_HERE`，然后我们在 SPLIT_HERE 上拆分

```
using System;
using System.Text.RegularExpressions;
using System.Collections.Specialized;
class Program
{
static void Main() {
string s1 = @"[Wsg-Fs]-A-A-A-Cgbs-Sg7-[Wwg+s-Fs]-A-A-Afk-Cgbs-Sg7";
var myRegex = new Regex(@"\[[^\]]*\]|(-)");
var group1Caps = new StringCollection();

string replaced = myRegex.Replace(s1, delegate(Match m) {
if (m.Groups[1].Value == "") return m.Groups[0].Value;
else return "SPLIT_HERE";
});

string[] splits = Regex.Split(replaced,"SPLIT_HERE");
foreach (string split in splits) Console.WriteLine(split);

Console.WriteLine("\nPress Any Key to Exit.");
Console.ReadKey();

} // END Main
} // END Program 
```

这是一个完整的[在线演示](http://ideone.com/B0rAZR)

**参考**

[除了情况 s1、s2、s3 之外，如何匹配模式](https://stackoverflow.com/q/23589174)

[如何匹配模式，除非...](http://www.rexegg.com/regex-best-trick.html)

# javascript - gmap api 3.0：覆盖上的“鼠标悬停”事件在侦听器中返回“未定义”事件

> ID：12204659
> 
> 赞同：1
> 
> 时间：2012-08-30T20:05:51.583
> 
> 标签：javascript, jquery, google-maps, jquery-gmap3

我正在用一个项目实现 Google Maps 3.0，我正在使用 jquery-gmap3 插件来控制地图。一切都很好，只是 IE9（通常）在正确解释页面方面存在一些问题。

我有一个 jquery-gmap3 聚集标记（我假设它表示为覆盖而不是标记），并且我有一个文本 - 此群集中包含的标记计数。然后，我通过通常的方式将一个`mouseover`和`mouseout`事件附加到该集群：

```
cluster: { 
  events: { 
    mouseover: function(c, e, d) {...}, 
    mouseout: function(c, e, d) {...} 
  } 
} 
```

`(typeof e == 'undefined')`我的基本问题是，当我移入或移出集群覆盖时，事件侦听器处理函数中没有提供事件。

我已经在以下方法中找到了此方法的问题`jquery-gmap3.js`：

```
// (that `console.log` was added by me)
this._attachEvent = function(sender, name, fnc, data, once){
  google.maps.event['addListener'+(once?'Once':'')](sender, name, function(event) {
    console.log([sender, name, event, data, once]);
    fnc.apply($this, [sender, event, data]);
  });
} 
```

看起来，它正在向 Google API 注册事件，然后将其转发给我的自定义处理程序。这很好，但似乎谷歌 API 本身并没有首先返回该事件，根据谷歌文档，它应该返回。

那么我的问题是，是否有人以前经历过类似的行为并且可以提供一些见解。

PS：我为什么要它？`mouseout`当我将光标移到文本上时（标记数），IE9 触发事件。我想，玩事件传播就足以纠正这种行为。或者你对这个话题也有什么想法？

谢谢您的回答！

# objective-c - iOS – cellForRow... IF logic

> ID：12204662
> 
> 赞同：1
> 
> 时间：2012-08-30T20:06:02.510
> 
> 标签：objective-c, ios, cocoa-touch, uitableview, if-statement

I have a numberOfSections... method that looks like this:

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    BOOL showContacts = self.selectedReminderMessageService != RMReminderMessageServiceTwitter ? YES : NO;

    if (self.isEditing) {

        if (showContacts) {

            return 5;

        } else {

            return 4;
        }

    } else {

        if (showContacts) {

            return 4;

        } else {

            return 3;
        }
    }
} 
```

How should I create the cellForRowAtIndexPath... method? Do I have to list all possible configurations like so:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    BOOL showContacts = self.selectedReminderMessageService != RMReminderMessageServiceTwitter ? YES : NO;

    NSInteger section = [indexPath section];

    if (self.isEditing) {
         if (showContacts) {
              if (section == 0) {
                  // repeat to section 4 with else if's
              }
         } else {
              if (section == 0) {
                  // repeat to section 3 else if's
              }
         }
     } else {
         if (showContacts) {
              if (section == 0) {
                  // repeat to section 3 else if's
              }
         } else {
              if (section == 0) {
                  // repeat to section 2 else if's
              }
         }
     }
} 
```

Can this be made in a more efficient way?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:13:34.113

I've had a similar problem, and ended up creating an enumerator and a method that given an indexPath (or a section), returns what section it is.

That way, whenever you need to find what type of cell you are dealing with at a given index (for example, creation and selection of the cell), you just ask that method what type it is.

example:

```
typedef enum {
    SectionNone = 0,
    SectionContacts,
    SectionOptions,
} Section; // do a more appropriate name

- (Section)sectionForSection:(NSInteger)section {
    // evaluate your state and return correct section
} 
```

so in your cellForRow... you can go

```
Section sect = [self sectionForSection:indexPath.section];
switch (sect) {
    case SectionContacts: {
        // work with contact cell
        break;
    }
    case SectionOptions: {
        // work with options cell
        break;
    }
    // etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:30:46.370

So there's an additional section that appears when isEditing is true, and an additional section that appears when showContacts is true, and these sections don't show up if their respective condition is false. Do I have that right? Then is your question about how to make it so you have fewer `if/else`s in your tableView:cellForRowAtIndexPath: method?

Here's what I'd do: First, alway return the same number of sections--5 in this case--from `numberOfSectionsInTableView`. Then, in `tableView:numberOfRowsInSection:` check the condition and return 0 when it's false, or the appropriate number of rows if it's true.

Now, section 0 is always your "contacts" section, and section 4 is always the "add a row" section (or whatever order you want to put them in). Finally, in your `tableView:cellForRowAtIndexPath:` method, you just need to check which section you're in to make the right "type" of cell. If there are no rows in that section, then that bit of code will never be executed.

```
if (indexPath.section == 0) {
  //contacts cell 
} else if (indexPath.section == 1) {
  //cell for whatever section 1 is
} else if (indexPath.section == 2) {
  //etc.
} //etc. 
```

If you want, you can combine this with Ismael's idea for naming your sections, though I've never found the need to do more than indicate the section in comments.

# javascript - Spring MVC 使用 DOJO 将字符串从客户端发送到控制器

> ID：12204666
> 
> 赞同：0
> 
> 时间：2012-08-30T20:06:27.270
> 
> 标签：javascript, jakarta-ee, spring-mvc, dojo

我的客户端上有以下代码

```
 var value = {"userId":form.userId.value};

var xhrArgs = {
    url : messageUrl,
    handleAs : "text",
    content: value,
    load : displayMessages,
    error : function(error) {
        dojo.byId("displayArea").innerHTML = "Error aquiring messages";
    }
};
dojo.xhrGet(xhrArgs);
} 
```

在我的服务器端控制器代码

```
@RequestMapping(value = "/getMessages.htm", method = RequestMethod.GET)
public @ResponseBody String showMessageTable(@RequestParam("userId") String userId,ModelMap params)
{ 
```

我收到 400 错误说

客户端发送的请求语法错误（）

有人可以解释我做错了什么吗？我已经用 firebug 测试了 dojo 代码，并且该值似乎传递得很好。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T07:25:28.953

这可能会有所帮助。访问此**网址： http:** [//maxheapsize.com/2010/07/20/spring-3-mvc-ajax-and-jquery-magic-or-better-simplicity/](http://maxheapsize.com/2010/07/20/spring-3-mvc-ajax-and-jquery-magic-or-better-simplicity/)

# linux - 显示文件权限的 bash 脚本给出错误的输出

> ID：12204667
> 
> 赞同：3
> 
> 时间：2012-08-30T20:06:28.713
> 
> 标签：linux, bash

我正在学习 bash，希望你们能帮助我了解以下脚本的情况

```
#!/bin/bash

#primer if
if [ -f $file1 ]; then
        echo "file1 is a file"
else
        echo "file1 is not a regular file"
fi
#segundo if
if [ -r $file1 ]; then
        echo "file1 has read permission"
else
    echo "file1 doesnot have read permission"
fi
#tercer if
if [ -w $file1 ]; then
        echo "file1 has write permission"
else
    echo "file1 doesnot have write permission"
fi
#cuarto if
if [ -x $file1 ]; then
        echo "file1 has execute permission"
else
    echo "file1 doesnot have execute permission"
fi 
```

在我看来，如果我更改文件权限并不重要，因为输出总是相同的

```
fmp@eva00:~/Books/2012/ubuntu_unleashed$ ./script.sh 
file1 is a file
file1 has read permission
file1 has write permission
file1 has execute permission
fmp@eva00:~/Books/2012/ubuntu_unleashed$ ll file1
-rw-r--r-- 1 fmp fmp 0 Aug 30 13:21 file1
fmp@eva00:~/Books/2012/ubuntu_unleashed$ chmod 200 file1
fmp@eva00:~/Books/2012/ubuntu_unleashed$ ./script.sh 
file1 is a file
file1 has read permission
file1 has write permission
file1 has execute permission
fmp@eva00:~/Books/2012/ubuntu_unleashed$ ll file1
--w------- 1 fmp fmp 0 Aug 30 13:21 file1
fmp@eva00:~/Books/2012/ubuntu_unleashed$ chmod 000 file1 
fmp@eva00:~/Books/2012/ubuntu_unleashed$ ll file1
---------- 1 fmp fmp 0 Aug 30 13:21 file1
fmp@eva00:~/Books/2012/ubuntu_unleashed$ ./script.sh 
file1 is a file
file1 has read permission
file1 has write permission
file1 has execute permission 
```

file1 可以为空或不为空，但输出仍然相同，进行相同的测试

有人可以向我解释什么是错的吗？

谢谢

顺便说一句，这里的脚本是 ubuntu unleashed book 2011 版第 233 页上 compare3 的修改版本（图书网站[http://ubuntuunleashed.com/](http://ubuntuunleashed.com/)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:11:08.350

`file1`变量未定义。

您应该在脚本的开头添加`file1="file1"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T23:02:23.523

这就是您所有测试都成功的原因：由于变量为空，您得到

```
if [ -f  ]; ...
if [ -r  ]; ...
if [ -w  ]; ...
if [ -x  ]; ... 
```

因为您使用的是单括号，所以 bash 只能看到一个单词来表示测试条件。当测试命令只看到一个参数时，如果单词不为空，则结果为真，并且在每种情况下，单词都包含 2 个字符。

当然，解决方法是声明变量。此外，您应该使用 bash 的条件构造

```
if [[ -f $file ]]; ...
if [[ -r $file ]]; ...
if [[ -w $file ]]; ...
if [[ -x $file ]]; ... 
```

当使用双括号时，即使变量为空或 null，bash 也会在条件中看到 2 个单词。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T20:12:41.040

在脚本开头（#!/bin/bash 之后）更改`$file1`变量或添加以下内容：`$1`

```
set file1=$1 
```

所以你可以像这样调用你的脚本：

```
./script.sh file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-30T20:13:17.747

或删除美元符号，或替换`$file1`为`$1`并将脚本用作`./script.sh file1`

# delphi - 有没有办法让 Indy 接受过期的 cookie？

> ID：12204669
> 
> 赞同：1
> 
> 时间：2012-08-30T20:06:34.063
> 
> 标签：delphi, delphi-xe2, indy

使用 Delphi 安装的 Delphi XE2 Update 4 和 Indy 组件 10.5.8.0。

出于安全原因，我正在尝试使用的网站故意向我发送一个日期已过期的 cookie。这是他们深思熟虑的，我不得不忍受它，其他与他们合作的开发人员已经设法做到了。

服务器对我的响应`IdHTTP.Get()`如下所示：

```
Recv 8/30/2012 3:06:15 PM: HTTP/1.1 200 OK<EOL>
Date: Thu, 30 Aug 2012 19:06:35 GMT<EOL>
Server: Apache/2.2.3 (CentOS)<EOL>
X-Powered-By: PHP/5.1.6<EOL>
Set-Cookie: dati=eJxLtDKxqi62MrdSykyJLy1OLVKyLrYytVIyNjcxtISyc%2FLTM%2FNAbKAqt4CgYJfUMhDPEqinOB4omZ6aAuIbWilFgmkDkGGpeSWZaZkQ8wyNrZTSchKLMwryM%2FNK4ouKlaxrAYdvJUQ%3D; 
expires=Thu, 01-Jan-1970 00:03:00 GMT<EOL>
Content-Length: 16<EOL>
Connection: close<EOL>
Content-Type: text/plain;; charset=ISO-8859-1<EOL><EOL>
0 24.141.251.145 
```

请注意 1970 年到期！我已经使用 Indy 3 天了，据我所知，这种创建 cookie 的尝试被 IdHttp 和相关的 CookieManager 简单地忽略了。

假设我无论如何都需要接收和使用 cookie，那么捕获它的正确方法是什么，或者我现在应该尖叫着逃跑吗？我有很多德尔福的经验，但这是我第一次涉足互联网连接的美妙世界，这个到达时过期的饼干业务让我摸不着头脑！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T00:38:13.933

发送过期的 cookie 是网络服务器在客户端删除 cookie 的方式。Indy 的 cookie 管理器支持这一点。当它收到一个 cookie 时，它​​将删除任何现有的同名/域/路径三重奏的 cookie，然后如果新 cookie 已过期，则将其丢弃。这是硬编码的行为。

如果出于某种原因，您必须保留过期的 cookie（这没有任何意义，因为任何 web 客户端都不应该这样做），您将不得不在 cookie 被解析之后但之前使用该`TIdCookieManager.OnNewCookie`事件来更改 cookie 的过期时间`TIdCookie`由 处理`TIdCookieManager`。您可以将`TIdCookie.Expires`属性设置为将来的日期，或`0.0`禁用其到期。无论如何，您都必须这样做，因为`TIdCookieManager`实现了过期 cookie 的清理（每当`TIdHTTP`请求 cookie 在 HTTP 请求中发送时都会触发），因此如果您不更改过期时间，那么 cookie 无论如何都会在稍后被丢弃时间。

# matlab - 在 Matlab 中调整矩阵行和列的大小

> ID：12204675
> 
> 赞同：0
> 
> 时间：2012-08-30T20:07:13.190
> 
> 标签：matlab, matrix

我在 MATLAB 中将数据导入为一个名为 A 的矩阵，其大小为

48 x 52（48 行 X 52 列）。

如何在 Matlab 中将矩阵大小调整为 48 X 48？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:09:58.450

好

```
B = A(:,1:48) 
```

将创建`B`一个`48x48`匹配的一部分的矩阵`A`。那是你要的吗 ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:15:11.670

如果您不关心丢失这些列中的任何数据，则可以使用删除最后 4 列

`A(:,49:52) = []`

否则，我会按照 HPM 的建议分配给一个新矩阵。

# php - php preg_match - 获取特定值

> ID：12204677
> 
> 赞同：0
> 
> 时间：2012-08-30T20:07:31.097
> 
> 标签：php, preg-match

如何在下面的代码中使用 preg_match 获取字符串：pL427014992694557？document.write 中的函数名称可以变化 例如：xS427014992694557 或 nH927014992694557

```
R$document.write(pL427014992694557()) 
```

Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:12:09.350

据我所知，您需要一个小写字母、一个大写字母，然后是 14 个数字。

```
$subject = "pL427014992694557";
$pattern = '/[a-z][A-Z][0-9]{14}/';
preg_match($pattern, $subject, $matches);
print_r($matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:33:09.540

```
$source = 'R$document.write(pL427014992694557())';
preg_match("/^[^(]+[(]([a-zA-Z0-9]+)/", $source, $match);
echo $match[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T10:53:32.990

我已经使用 preg_match 做到了。我的代码如下

```
<?php
ob_start();
?>
<script type="text/javascript">document.write(pL427014992694557');</script>
<?php
$offset = ob_get_clean();
$kt =  strip_tags($offset);
$pattern = "/document\.write\('([^)]*)'\)/";
preg_match($pattern, $kt, $matches);
print_r($matches[1]);
?> 
```

我的输出

```
sample 
```

# python - 使用 ffmpeg 作为 Python 子进程的简单示例，并在转换时“签入”

> ID：12204678
> 
> 赞同：2
> 
> 时间：2012-08-30T20:07:34.040
> 
> 标签：python, ffmpeg, pyffmpeg

我正在寻找将大量电影目录从一种格式转换为另一种格式，并检查转换状态。我正在用 Python 编程。

像这样的东西：

```
>> m = MovieGenerator()
>> m.convertMovie('/path/to/movie/movie1.avi')
>> print m.status
>> 35 frames completed 
```

这可能（或推荐）吗？有没有人有一个如何使用 ffmpeg 作为子进程的工作示例？

一旦发生转换，有没有办法“检查”转换的状态（例如，已经完成了多少帧？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:20:56.463

对于大型电影目录，我会使用`multiprocessing.Pool`, 来设置池工作者。然后每个都使用`subprocess`. 我使用以下脚本批量进行 AVI 到 MKV 的转换：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
# Author: R.F. Smith <rsmith@xs4all.nl>
#
# To the extent possible under law, Roland Smith has waived all copyright and
# related or neighboring rights to avi2mkv.py. This work is published from the
# Netherlands. See http://creativecommons.org/publicdomain/zero/1.0/

"""Convert all AVI files found in the direcory trees named on the command line
   to Theora/Vorbis streams in a Matroska container."""

import base64
import os
import sys
import subprocess
from multiprocessing import Pool, Lock

globallock = Lock()

def tempname(ext):
    """Create a name for a temporary file in the /tmp firectory.

    Keyword arguments:
    ext -- the extension (without .) to give to the file.
    """
    return '/tmp/' + base64.b64encode(os.urandom(12), '__') + '.' + ext

def findavi(dirlist):
    """Find AVI files and returns their names in a list.

    Keyword arguments:
    dirlist -- a list of directories to seach in
    """
    result = []
    for dirname in dirlist:
        for root, dirs, files in os.walk(dirname):
            for name in files:
                if name.endswith('.avi'):
                    result.append(root + '/' + name)
    return result

def output(txt):
    """Print while holding a global lock."""
    globallock.acquire()
    print txt
    globallock.release()        

def process(fname):
    """Use ffmpeg2theora and mkvmerge to convert an AVI file to Theora/Vorbis
    streams in a Matroska container.

    Keyword arguments:
    fname -- name of the file to convert
    """
    ogv = tempname('ogv')
    args = ['ffmpeg2theora', '--no-oshash', '-o', ogv, '-v', '7', fname]
    args2 = ['mkvmerge', '-o', fname[:-3] + 'mkv', ogv]
    bitbucket = open('/dev/null')
    try:
        output("Converting {} to {}.".format(fname, ogv))
        subprocess.check_call(args, stdout=bitbucket, stderr=bitbucket)
        output("Starting merge for {}.".format(ogv))
        subprocess.check_call(args2, stdout=bitbucket, stderr=bitbucket)
        os.remove(ogv)
        output("Conversion of {} completed.".format(fname))
    except:
        output("ERROR: Converting {} failed.".format(fname))
    bitbucket.close()

def main(argv):
    """Main program.

    Keyword arguments:
    argv -- command line arguments
    """
    if len(argv) == 1:
        path, binary = os.path.split(argv[0])
        print "Usage: {} [directory ...]".format(binary)
        sys.exit(0)
    avis = findavi(argv[1:])
    p = Pool()
    p.map(process, avis)
    p.close()

if __name__ == '__main__':
    main(sys.argv) 
```

# php - 尝试使用 php 的“file_put_contents”和 javascript 制作“另存为”表单...“文件名不能为空”

> ID：12204683
> 
> 赞同：0
> 
> 时间：2012-08-30T20:07:57.187
> 
> 标签：php, javascript, jquery

我正在尝试使用 javascript 和 php 制作“另存为”功能。在我使用的html中：

```
<textarea id="filename" cols="20" rows="1"></textarea>    
<li class ="add" onclick="js:saveas()" >save</li> 
```

然后使用内联 javascript 我这样做是为了获取文件名和动态生成的 dom：

```
<script>
function saveas() {
   $.post('write.php', { name : $('#filename').val() });
   $.post('write.php', { dom : $('html').html() });
    }

 </script> 
```

然后在“write.php”中...

```
<?php
$name = urldecode($_POST['name']);
$dom = urldecode($_POST['dom']);
file_put_contents($name, $dom);

?> 
```

但是控制台说：

```
[30-Aug-2012 15:45:22] PHP Notice:  Undefined index: dom in /Users/J/Documents/test7/test7/write.php on line 3

[30-Aug-2012 15:45:22] PHP Notice:  Undefined index: name in /Users/J/Documents/test7/test7/write.php on line 2

[30-Aug-2012 15:45:22] PHP Warning:  file_put_contents() [<a href='function.file-put-contents'>function.file-put-contents</a>]: Filename cannot be empty in /Users/J/Documents/test7/test7/write.php on line 4 
```

它使用正确的名称创建文件，但它是空的，零字节。但是，如果我对文件名进行硬编码，如下所示：

```
file_put_contents('foo.html', $dom); 
```

尽管我仍然收到通知，但一切都按应有的方式进行。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:10:06.470

除了安全问题（您所做的**不安全），您正在向***write.php*发送两个不同的 POST 。

您想在 1 个请求中发送这两个值：

```
$.post('write.php', {
    name : $('#filename').val(),
    dom : $('html').html()
}); 
```

我有没有提到，你正在做的事情**不安全**？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:10:07.113

你为什么打2个`$.post`电话？您需要在一次调用中发送两个变量。

```
$.post('write.php', {
    name : $('#filename').val(),
    dom : $('html').html()
}); 
```

# bittorrent - BitTorrent：即使没有端口转发，对等点如何相互连接？

> ID：12204684
> 
> 赞同：7
> 
> 时间：2012-08-30T20:08:04.793
> 
> 标签：bittorrent, portforwarding

当您使用 BitTorrent 下载文件时，您可以从已经拥有该文件的其他人或从原始主机下载文件的部分内容。完成文件下载后，您也可以通过向他人发送部分文件来帮助其他人下载文件。

即使对等点位于不向它们转发任何传入连接的路由器后面，它们如何能够相互连接？原始主机是否以某种方式提供帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:12:49.757

如果您的路由器不支持 upnp，许多 bittorrent 实现将尝试使用 NAT 穿透连接到其他对等点（有关示例，请参见[http://www.raknet.net/raknet/manual/natpunchthrough.html](http://www.raknet.net/raknet/manual/natpunchthrough.html)）。

如果你不能打通，那只是意味着你不能主持一个连接。您仍然可以与另一台主机建立连接并向它们发送/接收数据包。只有当双方都在无法穿透的路由器后面时，才会出现问题。在这种情况下，对等体之间不能直接发送数据。

# xcode - XCode 不会提交到 GIT

> ID：12204686
> 
> 赞同：2
> 
> 时间：2012-08-30T20:08:09.287
> 
> 标签：xcode, git, version-control, xcode4

谷歌搜索了一段时间没有运气。

我已经在我的应用程序上工作了一周，现在我正在尝试使用 git，所以我可以开始分支并尝试一些新东西。但我不能提交我的更改。我收到以下消息：

“工作副本“APP NAME”未能提交文件。

致命：无法切换到“/Users/Leonne/Documents/iOS Projects/APP NAME/APP NAME/Resources”：没有这样的文件或目录”

我已经初始化了 git 存储库。我不明白会发生什么。之前，我确实创建了一个“资源”文件夹，但后来删除了它。我从来没有承诺过这个“资源”文件夹的存在。我删除了 Resources 文件夹，因为每当我尝试编译我的应用程序时它都会给我带来麻烦。我正在使用 XCode 4.4。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:18:18.303

好的，我今天早上刚遇到这个问题。我不知道我的是否是完美的解决方案。我的 Mac 崩溃了，我重新启动，我可以再次提交。

如果我的修复也适用于您，那么它可能是 XCode 的错误。

**已编辑**

看来我的错误仍然存​​在，以下是我的修复。

Xcode GUI 似乎在正确使用 GIT 方面存在一些问题。所以我用终端来做到这一点。我去了工作目录，然后做了一个`git status`这将向您显示已删除/修改/添加的文件列表。`git add`您可以使用或直接将它们手动添加在一起`git commit -a`（不建议在复杂项目中使用）

这解决了提交问题，当我去 Xcode 时，错误似乎不再存在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:25:13.533

看起来我有一个坏习惯，就是在我在 StackOverflow 上发布关于这些问题的 5 分钟后解决我长达一小时的问题，哈哈。

我的修复相当容易。我导航到指定的路线并重新创建了 Resources 文件夹。我通过 XCode 的“添加文件”功能将该文件夹添加到我的项目中。之后我立即将其从那里删除，将其移至垃圾箱。现在我可以编译和提交了，谢天谢地。

# jquery - 如何为使用 JSON 数据的 YUI DataTable 创建 KnockoutJS 模板？

> ID：12204691
> 
> 赞同：0
> 
> 时间：2012-08-30T20:08:29.300
> 
> 标签：jquery, knockout.js, yui, yui-datatable, knockout-mvc

我想模板化使用 KnockoutJS 数据绑定创建 YUI3 数据表。假设我有以下 JSON 字符串 -

{ "@lang": "en-US",

```
"cartItem": {
    "@lang": "en-US",
    "cartId": "14",
    "items": [
        {
            "@lang": "en-US",
            "id": "5",
            "name": "global/network/main",
            "propertyURL": "mail.yahoo.com",
            "rootPropertyName": "All Other",
            "spaceId": "2023407535"
        },
        {
            "@lang": "en-US",
            "id": "5",
            "name": "global/network/main",
            "propertyURL": "mail.yahoo.com",
            "rootPropertyName": "All Other",
            "spaceId": "2023407535"
        }
    ]
},
"status": {
    "@lang": "en-US",
    "message": "",
    "status": "success"
} 
```

}

我正在使用以下代码创建使用上述 JSON 的 YUI 数据表 -

YUI().use("datatable", "datatable-datasource", "datasource-local", "datasource-jsonschema", function(Y) {

```
 var jsonString = Y.one("#jsondata").getHTML();

    var dtsource = new Y.DataSource.Local({source:jsonString});
    dtsource.plug(Y.Plugin.DataSourceJSONSchema, {
        4schema: {
            resultListLocator: "cartItem.items",
            resultFields: [
            // Re-map the "id" member to "rid" ...    
                { key:"rid", locator:"id"},
                "name", "propertyURL", "rootPropertyName"
            ]
        }
    });

    var colums = ["rid", "name", "propertyURL", "rootPropertyName"];

    var dtable = new Y.DataTable({  
        columns: colums,
        summary:"Shopping cart items",
        caption:"Table with JSON data from api"});

    dtable.plug( Y.Plugin.DataTableDataSource,{
        datasource:dtsource
    });

    dtable.render("#jsonapi-datatable");
    dtable.datasource.load({request:"&id=14"});        
}); 
```

如何为上述代码创建 KnockoutJS 模板？

小提琴 - [http://jsfiddle.net/pPY7K/6/](http://jsfiddle.net/pPY7K/6/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:50:10.833

使用 KnockoutJS 自定义绑定，然后使用该绑定创建模板。

# git - 将应用程序推送到 heroku 时出错 - 类/对象已定义

> ID：12204696
> 
> 赞同：1
> 
> 时间：2012-08-30T20:08:43.060
> 
> 标签：git, scala, heroku, lift

我有一个要推送到 Heroku 的 Lift 应用程序。我已按照以下教程设置我的项目。- [http://blog.heroku.com/archives/2011/10/3/scala/](http://blog.heroku.com/archives/2011/10/3/scala/)

当我执行`git push heroku master`命令并下载所有依赖项时，出现以下错误：

```
info] Done updating.
       [info] Compiling 34 Scala sources to /tmp/build_3mu8dl4lcbqoj/target/scala-2.9.1/classes...
       [error] /tmp/build_3mu8dl4lcbqoj/src/main/scala/code/models/Model.scala:97: CardAttribute is already defined as class CardAttribute
       [error] class CardAttribute extends MongoRecord[CardAttribute]
       [error]       ^ 
```

该项目在本地编译得很好，所以我不确定为什么它说类/对象已经存在。这与heroku上传项目的方式有关吗？也许是项目缓存导致了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T08:55:51.817

这有点晚了，但也许这可以帮助其他人。

我遇到了同样的问题，我正在重构我的代码并更改了包名称，然后我尝试推送到 Heroku，但由于重复的对象而失败。我的错误是我使用`git add .`它忽略了我的 git 版本上已删除的文件：

> 警告：您运行 'git add' 时既没有使用 '-A (--all)' 也没有使用 '--ignore-removal'，其行为在 Git 2.0 中会根据您删除的路径发生变化。
> 
> **此版本的 Git 会忽略从工作树中删除的“app/.DS_Store”之类的路径。**
> 
> *   'git add --ignore-removal' 是当前默认值，它会忽略您从工作树中删除的路径。
>     
>     
> *   'git add --all' 还可以让您记录删除。
>     
>     
> 
> 运行“git status”以检查您从工作树中删除的路径。

解决方案是将 Heroku 设置为 clean with `heroku config:set SBT_CLEAN=true`然后在 git side `git add . -A && git commit -m "message" && git push heroku master`。

# java - IntelliJ：为同一模块中的源代码和测试指定不同的 groovyc 版本

> ID：12204699
> 
> 赞同：1
> 
> 时间：2012-08-30T20:08:50.090
> 
> 标签：java, groovy, intellij-idea, ivy, spock

我正在使用`IntelliJ 11.1.3`, `IvyIDEA Plugin for IntelliJ`, `Spock 0.5`（取决于`Groovy 1.8.4`）和`Groovy 1.5.6`.

我有一个遵循[Maven 标准目录布局](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)的 IntelliJ 模块。输出是一个 WAR 文件。

在 IntelliJ 中构建此模块时，有什么方法可以告诉 IntelliJ 使用以下内容：

*   `Groovy 1.5.6`编译`src/main/groovy`
*   `Groovy 1.8.4`编译`src/test/groovy`

我需要这样做，因为需要针对实际应用程序代码进行编译`Groovy 1.5.6`（长话短说：生成的 WAR 部署了一个必须暂时保留的 EAR `Groovy 1.5.6`）。

当然，Test 目录不会随 WAR 一起部署。Test 目录包含 Spock 测试。我正在使用 Spock 0.5，它需要`Groovy 1.8.x`

**常春藤.xml**

```
<dependency conf="compile->default" name="groovy-all" 
    org="org.codehaus.groovy" rev="1.5.6"/>

<dependency conf="test->default" name="groovy-all" 
    org="org.codehaus.groovy" rev="1.8.4"/>
<dependency conf="test->default" name="spock-core" 
    org="org.spockframework" rev="0.5-groovy-1.8"/> 
```

我需要能够从 IntelliJ 运行测试。如果我从 IntelliJ 构建并尝试运行 Spock 测试，我会得到以下信息：

```
org.spockframework.runtime.InvalidSpecException: 
Specification 'org.myorg.test.ProcessCaseTest' was not compiled properly 
(Spock AST transform was not run); try to do a clean build
at org.spockframework.runtime.SpecUtil.checkIsSpec(SpecUtil.java:53) 
```

如果我删除这一行：

```
<dependency conf="compile->default" name="groovy-all" 
    org="org.codehaus.groovy" rev="1.5.6"/> 
```

然后我可以构建和运行 Spock 测试，但是我从我的模块中丢失了 Groovy。

我认为我需要做的是告诉 IntelliJ 使用一个版本的 Groovy 来编译应用程序代码，并使用另一个版本的 Groovy 来编译测试，但是我还没有找到一种方法来做到这一点。

我将非常感谢任何人可以提供的任何帮助或见解。非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:57:37.010

IDEA 遵循 Maven 依赖模型，其中`compile`依赖关系自动进入`test`类路径。您可以尝试重新排序 IDEA 模块中的依赖项，以便 Groovy 1.8（应该有 scope `test`）在 Groovy 1.5 （应该有 scope `compile`）之前。无论如何，这是一件毛茸茸的事情。

PS：我推荐使用Spock 0.6。

# c# - 如何通过查找字典对 DataRow[] 行重新排序？

> ID：12204700
> 
> 赞同：0
> 
> 时间：2012-08-30T20:08:50.353
> 
> 标签：c#, c#-3.0

//集合“fields”包含一组带有“FieldId”列的行

```
DataRow[] fields = GetFields(); 
```

//这个字典包含一组键值对。键代表 FieldId，值代表 OrderId

```
Dictionary<string, int> orders = new Dictionary<string, int>();
orders = LoadOrders(); 
```

我需要按照字典中 OrderId 的顺序重新排序“字段”集合。字典应该用作交叉引用来查找 FieldId 并获取 OrderId。

```
Sample data in fields:

Books
Movies
Electronics

Sample data in orders:

<Books, 2>
<Movies, 3>
<Electronics, 1>

The output by reordering the "fields" should be :

Electronics
Books
Movies 
```

如果有人对此有任何想法，可以分享一下吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:11:16.773

LINQ来救援！

```
var results = fields.OrderBy(field => orders[field["FieldID"]]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:13:34.377

这应该有效：

```
var res = fields.OrderBy(x => orders[x.Field<string>("FieldId")]).ToArray(); 
```

或者，如果您更喜欢就地排序：

```
Array.Sort(fields,
          (a,b) => orders[a.Field<string>("FieldId")]
                   .CompareTo(orders[b.Field<string>("FieldId")])); 
```

当然，您需要确保`orders`字典包含`fields`集合中存在的所有值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:11:07.627

```
var result = (from entry in myDict 
              orderby entry.Value ascending 
              select entry)
              .ToDictionary(pair => pair.Key, pair => pair.Value); 
```

# javascript - 如何将 AutoAnchors jquery 插件合并到我的网页中？

> ID：12204701
> 
> 赞同：-2
> 
> 时间：2012-08-30T20:08:51.457
> 
> 标签：javascript

我对 HTML5 世界很陌生，我可以使用一些帮助来了解如何使用这个 javascript 文件。

> jquery.autoanchors-0.3

它可以在这里找到。[http://fredibach.ch/jquery-plugins/autoanchors.php](http://fredibach.ch/jquery-plugins/autoanchors.php)

我该如何使用它？如何将其包含在 html 文件和 js 文件中，它将如何自动将锚点/链接添加到 html 文件中？

```
 <script src="js/jquery.autoanchors-0.3.js"></script> 
```

任何帮助都会很棒。

谢谢达蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:14:33.813

正如 sachleen 指出的那样，您首先需要 jQuery。

1.  下载 jQuery (http://jquery.com/download/)
2.  将 jQuery 和 autoanchors 都包含在 html 文件的头部
3.  按照 autoanchors 页面上的说明进行操作 (http://fredibach.ch/jquery-plugins/autoanchors.php#usage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:17:20.783

将此添加到网页的 head 部分，这会将 jQuery 添加到您的页面：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" /></script> 
```

下载 Autoanchors.js 文件并将其添加到您的站点（将其放在名为 js 的文件夹中）：

```
<script type="text/javascript" src="js/jquery.autoanchors-0.3.js"></script> 
```

然后按照该站点上的“用法”下的说明进行操作，如下所示（这在头部，就在上面的行下方）：

```
<script>
$(document).ready(function(){
  $("div.demo").autoAnchors();
});
</script> 
```

# .net - 如何阻止代码从另一个表单上的按钮运行？

> ID：12204703
> 
> 赞同：0
> 
> 时间：2012-08-30T20:09:07.197
> 
> 标签：.net, winforms, vb.net-2010

我编写了一个程序，它遍历数据库中的列表，在数据库中设置一些表，并打印出 Crystal Report 的 PDF。在打印时，我会弹出一个新窗口，上面有一个标签，说明当前正在打印什么，还有一个取消作业的按钮。我遇到的问题是，当报告正在收集数据并打印报告时，弹出窗口没有响应，并且取消按钮通常没有任何作用。有时我运气好，而且时间正确，所以我的代码被调用了，但我不得不按下按钮。

我想也许线程是答案，但我还没有找到使用它的解决方案。我有一些 DoEvents 分散在各处，但这并不是真正的答案，我知道。

只是想知道是否有人可能有解决方案。

谢谢一堆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:17:25.897

我建议将您的打印工作放在另一个线程中。

当您的程序准备好打印时，显示一个弹出窗口（模态形式）。在这个弹出窗口（[OnLoad](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.onload.aspx)方法）内启动工作线程，例如使用[BackGroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类，并在打印完成或按下取消按钮时关闭此对话框。

# php - 警告：array_push() 期望参数 1 是数组

> ID：12204713
> 
> 赞同：10
> 
> 时间：2012-08-30T20:09:55.150
> 
> 标签：php, arrays, strpos

这是我的代码，当我运行这个函数时，我得到这个：`Warning: array_push() expects parameter 1 to be array` 但是我`$printed`在开始之前定义为一个数组。

```
$printed = array();

function dayAdvance ($startDay, $endDay, $weekType){
         $newdateform = array(
                    'title' => date("M d", strtotime($startDay))."     to     ".date("M d", strtotime($endDay)). $type,
                    'start' => $startDay."T08:00:00Z",
                    'end' => $startDay."T16:00:00Z",
                    'url' => "http://aliahealthcareer.com/calendar/".$_GET['fetching']."/".$startDate);

                    array_push($printed, $newdateform);

        if ($weekType=="weekend"){
            $days="Saturday,Sunday";
        }
        if ($weekType=="day"){
            $days="Monday,Tuesday,Wednesday,Thuresday,Friday";
        }
        if ($weekType=="evening"){
            $days="Monday,Tuesday,Wednesday";
        }
        $start = $startDate;
        while($startDay <= $endDay) {
            $startDay = date('Y-m-d', strtotime($startDay. ' + 1 days'));
            $dayWeek = date("l", strtotime($startDay));
            $pos = strpos($dayWeek, $days);
            if ($pos !== false) {
                $newdateform = array(
                    'title' => date("M d", strtotime($start))."     to     ".date("M d", strtotime($endDate)). $type,
                    'start' => $startDate."T08:00:00Z",
                    'end' => $startDate."T16:00:00Z",
                    'url' => "http://aliahealthcareer.com/calendar/".$_GET['fetching']."/".$startDate);

                    array_push($printed, $newdateform);

            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-30T20:12:32.560

在`array_push()`被调用的范围内，`$printed`从未初始化过。将其声明为`global`或包含在函数参数中：

```
$printed = array();
.
.
.
function dayAdvance ($startDay, $endDay, $weekType){
    global $printed;
    .
    .
    .
} 
```

或者

```
function dayAdvance ($startDay, $endDay, $weekType, $printed = array()) { ... } 
```

**笔记：**

一个更快的替代方法`array_push()`是简单地将值附加到您的数组中`[]`：

```
$printed[] = $newdateform; 
```

此方法将自动检测变量是否从未初始化，并在附加数据之前将其转换为数组（换句话说，没有错误）。

**更新：**

如果您希望 的值`$printed`在函数之外持续存在，则必须通过引用传递它或将其声明为`global`. 上面的例子是**不**等价的。以下示例等效于 using `global`（实际上，它是比 using 更好的做法`global`- 它迫使您对代码更加谨慎，防止意外的数据操作）：

```
function dayAdvance ($startDay, $endDay, $weekType, &$printed) { ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T20:11:46.687

您需要使用`global $printed;`或添加`$printed`为函数参数。

您也可以`$printed`在函数中将参数作为参考传递：http: [//php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)

有关全局和变量范围的更多信息：http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-05T09:21:32.163

当您想向数组添加单个元素时，而不是`array_push()`使用函数。`$your_array[] = $element_to_be_added;`

如文档中所述，如果数组为空，则会创建一个新数组：

> 注意：如果您使用 array_push() 向数组添加一个元素，最好使用 $array[] = 因为这样就没有调用函数的开销。

*和：*

> 注意：如果第一个参数不是数组，array_push() 将引发警告。这与创建新数组的 $var[] 行为不同。

来自： http: [//php.net/manual/en/function.array-push.php](http://php.net/manual/en/function.array-push.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-22T02:42:08.507

您需要验证 whit is_array：

例子

```
if (is_array($arNumbers)) {
    $cellid =  array_push($arNumbers, 0);
} 
```

# javascript - 从 Chrome 扩展加载 Places API 库

> ID：12204715
> 
> 赞同：0
> 
> 时间：2012-08-30T20:10:02.293
> 
> 标签：javascript, google-maps-api-3, google-chrome-extension

我正在编写一个 Chrome 扩展程序，以将[Google 地图自动完成](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)功能添加到 Google 日历的新活动位置输入中。我正在尝试在扩展上下文中加载库，但它阻止说`[blocked] The page at domain.com ran insecure content from anotherdomain.com`.

我当然已经`http://anotherdomain.com`在“权限”键中添加了 manfest.json。为了加载我刚刚下载的实际位置库`http://maps.googleapis.com/maps/api/js?libraries=places&sensor=true`，因为我不知道如何将它直接添加到扩展中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:17:31.207

到目前为止，似乎是不可能的，所以我只是使用了 JSON API 和 jQuery UI 的自动完成功能。这是我的简单实现[https://gist.github.com/3623683](https://gist.github.com/3623683)

# android - 如何在文本视图中单击文本行

> ID：12204720
> 
> 赞同：3
> 
> 时间：2012-08-30T20:10:22.340
> 
> 标签：android, textview

我有一个包含多行文本的文本视图，例如

这是第 1 行

这是第 2 行

这是第 3 行

我希望能够根据用户单击的行来存储文本，即如果他们单击第 2 行，我想存储“这是第 2 行”。

我该怎么办？

**9 月 1 日编辑：**

我不确定可点击跨度解决方案如何工作？我可以从我的文本视图中获取特定的文本行，例如获取我将使用的第 1 行：

```
TextView tv = (TextView) view.findViewById(R.id.class_list);
String selectedClass =(String)(tv).getText();
int l1start = tv.getLayout().getLineStart(1);
int l1end = tv.getLayout().getLineEnd(1);
String l1 = selectedClass.substring(l1start, l1end); 
```

但是我看不到如何通过使用可点击跨度计算出实际点击了哪个行号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T21:13:20.167

您可以使用[可点击](http://developer.android.com/reference/android/text/style/ClickableSpan.html)的span 。为每一行设置一个不同的跨度，当点击这个可点击的跨度时，onClick 方法将被调用。

# javascript - spring mvc，在jsp中标记单行

> ID：12204728
> 
> 赞同：1
> 
> 时间：2012-08-30T20:11:00.583
> 
> 标签：javascript, jquery, spring, spring-mvc

我的控制器返回给我一个对象列表，我在 jsp 上渲染。我想要做的是选择一行并将其标记为删除。

但我不知道该怎么做：

我从这个开始：

```
 form
    table
        c:forEach var="book" items="${booklist}" 
            tr
                td>{book.id}</td
                td>{book.Number}</td
                td>{book.Address}</td
                td><input type="submit" name="delete" value="{book.id}" ..</td
            tr
        c:forEach>
    table> 
```

（...抱歉格式化...）

我对上面有两个问题，首先它在按钮上显示 id。其次，我仍然希望将所选行绑定到表单，以便我可以进行一些验证

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:31:33.793

我会以自己的形式包装每一行，并使用一个隐藏的输入来保存要删除的书的 id：

```
<form>
    <input type="hidden" name="id" value="${book.id}"/>
    <tr>
        <td>...</td>
        <td><input type="submit" value="Delete"/></td>
    </tr>
</form> 
```

不要忘记你的 $s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:37:11.390

我会摆脱一个按钮，并使用一个锚标签（无论如何，你可以将锚的样式设置为看起来像带有 css 的按钮，并且它们与 :hover 伪元素等很好地放置在一起）

理想情况下，您的支持控制器将处理具有给定 ID 的删除操作。如果您使用的是 Spring-MVC，通常您可以拥有一个 RESTful URL，因此类似以下的内容可能会起作用：

```
<a href="/book/delete/${book.id}">Delete</a> 
```

你唯一需要关心的事情，这是一个有效的关心，是确保不是每个人都可以随意删除你的东西。使用这种方法或您尝试使用的方法，任何人都可以执行 HTTP 请求，如果他们知道他们想要删除的内容的 id。确保像这样的破坏性操作受到安全凭证、验证用户等的保护。

# javascript - 从 win8 RC 转换为 win8 RTM 后，关于和首选项弹出框为空白

> ID：12204729
> 
> 赞同：0
> 
> 时间：2012-08-30T20:11:02.040
> 
> 标签：javascript, windows-8, windows-runtime

在将项目转换为 RTM 后，我们在 RC 下工作的关于和偏好弹出窗口现在是空白/白色。我们使用了来自 win8 实验室的示例代码来构建这些，并且它们以前可以工作。我已阅读迁移指南并进行了似乎适用的更改。是否有其他人遇到此问题，是否有解决方案？我们正在使用 Javascript。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:23:35.133

RTM 版本有很多重大更改，因此您应该查看 Microsoft[迁移指南提供的迁移](http://www.microsoft.com/en-us/download/details.aspx?id=30706)

如果你用过`z-index`，你一定知道z-index范围从1000-1003变成了1000-1008

问候。

# api - Instagram API 实时地理订阅 - 请求太少

> ID：12204732
> 
> 赞同：6
> 
> 时间：2012-08-30T20:11:09.113
> 
> 标签：api, instagram, subscription, geography

我通过订阅 5 个地区在 Instagram API 上实现了实时功能。这些地区几乎覆盖了布加勒斯特地区，所以我想我应该从 Instagram 的服务器上获得很多行动。

这是我在 PHP (CodeIgniter) 中实现所有内容的方式：

*   我为所有 5 个地理区域创建了一个回调页面，该页面分析来自 Instagram API 的原始帖子，获取地理 ID，然后根据各自的地理 ID请求从该区域上传到[地理端点的最近照片](http://instagram.com/developer/endpoints/geographies/)
*   我解析此响应并缓存照片的数据，以便稍后检索
*   [我在http://hipstagram.ro/](http://hipstagram.ro/)上显示最后 30 个结果

问题是我已经通过使用手机从这些区域之一拍摄照片进行了一些测试，有时我的照片会出现，有时不会。该实现没有抛出任何错误，但它的工作原理很奇怪。因此......我有几个悬而未决的问题：

问：我可能会丢失请求吗？它在[Instagram API 文档](http://instagram.com/developer/realtime/#receiving-updates)中说我应该在 2 秒内确认请求。这是我的代码在回调方法（PHP CodeIgniter）中的样子：

```
if ($_SERVER ['REQUEST_METHOD'] == 'POST') {
    header("Content-Length: 0");
    header("Connection: close");
    flush();

    // do stuff with file_get_contents('php://input')
    // also, get new photos...

    $data   = json_decode (file_get_contents('php://input'));

    if (is_array ($data))
        foreach ($data as $geo) {
            $this->db->query ("LOGGING SOMETHING HERE...");

            // make some a cURL request to the geography endpoint
            // get the photos, save them in the database
            $this->live->updateGeo ($geo->object_id);
        }
} 
```

问：如果我缺少请求：

*   是因为`$this->live->updateGeo`（等待 cURL 调用结束）的增加时间，回调需要太长时间吗？
*   是因为我的服务器在罗马尼亚，而 Instagram 的所有请求都来自美国 IP？

我分析了原始访问日志，不时收到请求高峰，然后是长时间的沉默。我认为这要么是因为 Instagram API 没有向我发布任何内容，要么是因为我没有在 2 秒内做出响应。否则......为什么这些请求会同时发生（几秒钟内有 5-10 个请求）？不像 5-10 个人碰巧同时拍照，然后每个人都把手机放回口袋里 :)

# android - 将特定资源（图像等）的加载委托给 Android WebView 中的本地文件系统？

> ID：12204733
> 
> 赞同：1
> 
> 时间：2012-08-30T20:11:08.850
> 
> 标签：android, webview

我在我的 Android 应用程序中使用 WebView 来加载我们的 Web 应用程序，例如...

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    _web_view = (WebView) findViewById(R.id.web);
    _web_view.loadUrl(R.strings.url);
} 
```

到现在为止还挺好。

我想要做的是有选择地选择在 WebView 请求它们时从本地 Android 文件系统中加载可用资产。这个想法是，我将通过将静态图像资产打包到 Android 中并从文件系统提供它们而不是从 Web 服务器请求它们来节省大量的加载时间和带宽。

我看到 WebViewClient 类有一个 onLoadResource 方法。这非常接近我想要的，除了我想有一种方法告诉应用程序“不，不要从那个 url 下载它，而是使用这个 url”（并指向本地文件系统）。

到目前为止，我能想到的最佳方法是简单地拥有一个指向 Android 文件系统的 .html 文件的不同副本，但我更愿意有选择地替换客户端上的资产，而不是在客户端上维护 2 个 HTML 副本服务器...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:38:41.680

看一下覆盖[`shouldInterceptRequest`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldInterceptRequest%28android.webkit.WebView,%20java.lang.String%29)。这似乎是你想要的。缺点是需要 API 11+。

# mysql - 使用 CONCAT / GROUP CONCAT 在 mysql 中组合多行

> ID：12204737
> 
> 赞同：0
> 
> 时间：2012-08-30T20:11:36.967
> 
> 标签：mysql, geometry

我有一个非常大的表（几百万条记录）。表中的列 A 当前如下所示：id、道路名称、lat、lon 其中 id 是自动增量 PK。

目前 1 个道路名称在表中可以有多个条目，因为每条道路都映射到多个 (lat, lon) 组合。

我想要做的是将道路名称作为主键，然后删除 lat 和 lon 列。然后添加一个几何类型的列，该列将包含代表道路的（经纬度）点列表。

我可以在 java + mysql 中轻松做到这一点，但我想知道是否有一种方法可以通过编写几个嵌套查询来轻松做到这一点？基本上我已经有一个填充表 A 和另一个表 B，其中只有道路名称为 PK 和几何类型的第二列。我想要的是将每个唯一道路名称的所有纬度、经度组合到一个几何点列表并插入到表 B 中。是否可以在 mysql 中执行此操作？

注意：不要担心道路名称的唯一性，因为这只是一个示例，而不是实际情况。谢谢！

更新： concat/group_concat 函数返回一个字符串。由于我的列类型是几何，我只需将此字符串传递给 MySQL 空间扩展中的 GeomFromText() 空间函数以获取几何格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:40:39.743

这将用逗号分隔的`<lat>x<lon>`对列表填充几何列。

```
SELECT road_name, GROUP_CONCAT(CONCAT(lat,'x',lon)) geometry
FROM road_table
GROUP BY road_name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:38:49.560

我认为以下查询将满足您的要求：

```
select RoadName,
       group_concat(RoadPoint order by id separator ',') as geometry
from (select A.*,
             concat('(', lat, ',', long, ')') as RoadPoint
      from A
     ) t
group by RoadName 
```

这将按照点在 A 中出现的顺序将列表生成为逗号分隔的子列表。

# android - 信使到远程服务导致内存泄漏

> ID：12204740
> 
> 赞同：2
> 
> 时间：2012-08-30T20:11:50.697
> 
> 标签：android, service, memory-leaks

我有一个应用程序使用该接口与`Service`远程进程中的 a 进行通信。`Messenger`以下是事物设置的基本架构：

*   应用程序生成几个需要访问服务的“操作”对象。
*   每个“操作”都包含一个`Handler`包裹在一个`Messenger`用于接收从响应数据返回的`Service`
*   当操作执行时，它将其包装`Messenger`成一个`Intent`并调用`startService()`以将消息传递给远程服务
*   远程服务根据 的参数执行一些工作`Intent`，然后通过向该操作发送 a`Message`来返回响应`Messenger`。

这是操作中存在的基本代码：

```
public class SessionOperation {

    /* ... */

    public void runOperation() {
        Intent serviceIntent = new Intent(SERVICE_ACTION);
        /* Add some other extras specific to each operation */
        serviceIntent.putExtra(Intent.EXTRA_EMAIL, replyMessenger);

        context.startService(serviceIntent);
    }

    private Handler mAckHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            //Process the service's response
        }
    };
    protected Messenger replyMessenger = new Messenger(mAckHandler);
} 
```

以及服务结构的片段（基本上是`IntentService`在队列为空时不会关闭）：

```
public class WorkService extends Service {
    private ServiceHandler mServiceHandler;

    private final class ServiceHandler extends Handler {
        public ServiceHandler(Looper looper) {
            super(looper);
        }

        @Override
        public void handleMessage(Message msg) {
            onHandleIntent((Intent)msg.obj);
        }
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        //If intent has a message, queue it up
        Message msg = mServiceHandler.obtainMessage();
        msg.obj = intent;
        mServiceHandler.sendMessage(msg);

        return START_STICKY;
    }

    private void onHandleIntent(Intent intent) {
        Messenger replyTarget = intent.getParcelableExtra(Intent.EXTRA_EMAIL);

        /* Do some work */

        Message delivery = Message.obtain(...);
        replyTarget.send(delivery);
    }
} 
```

这一切都非常好。我可以将来自多个不同应用程序的大量操作发送到同一个服务，它们都会处理并将响应发送到正确的位置。然而...

我注意到，如果应用程序运行的时间足够长并且有足够的活动，它会以`OutOfMemoryError`. 在查看 MAT 中的 HPROF 数据时，我注意到所有这些操作都保留在内存中，并且由于`Messenger`. 显然，该`Messenger`实例正在创建与 Binder 的长期本机连接，该连接算作 GC Root，它将每个“操作”对象无限期地保存在内存中。

![MAT 跟踪示例](../Images/53dbce3969ede2bc4f37637e2fa55b68.png)

有谁知道是否有办法`Messenger`在“操作”结束时清除或禁用它，以免造成这种内存泄漏？是否有另一种方法可以以`Service`相同的方式实现 IPC，以便多个不同的对象可以发出请求并异步获取结果？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T22:32:09.093

多亏了来自 Android 团队的 Dianne Hackborn 的一些非常有用的见解，这个问题是因为远程服务进程还没有垃圾收集它的 Messenger 实例，实际上，直到那个时候，它一直将应用程序进程中的实例作为人质。

这是她回复的正文：

> 确实，跨进程发送信使需要在其上保存 GREF，以便其他进程与之通信。除非出现错误（已经发生，但我不确定是否在任何已发布的平台版本中），当其他进程本身不再持有对此的引用时，GREF 将被释放。当我们在 Dalvik 中谈论事物时，“不再持有引用”一般意味着“对方已经对 Java 代理对象进行了垃圾回收”。
> 
> 这意味着当你将一个 Messenger（或任何 IBinder 对象）扔给另一个进程时，你自己进程中的 Dalvik VM 不能再管理该对象本身的内存，并且依赖于所有远程对象释放它，直到它可以在当地发布。这将包括 IBinder 引用的所有对象。
> 
> 处理这个问题的一个常见模式是在你的 IBinder/Messenger 中使用 Wea​​kReference，它保存对它将访问的其余对象的引用。这允许您的本地垃圾收集器清理所有其他对象（可能很重，包含位图等大东西），即使远程进程仍然在您的 IBinder 上有引用。当然，如果您这样做，则需要有其他东西持有对这些其他对象的引用，直到不再需要它们，否则垃圾收集器可以在不再需要它们*之前清理它们。*
> 
> 我建议的另一件事是不要为您所做的每个 IPC 实例化 Messenger 对象的设计。创建一个传递给每个 IPC 调用的 Messenger。否则，您可能会生成许多由于其他进程继续持有引用而被保留的远程对象，因为另一方没有积极地进行垃圾收集，因为由于这些调用而创建的所有对象都很小。

更多信息： [https ://groups.google.com/d/msg/android-developers/aK2o1W2xrMU/Z0-QujnU3wUJ](https://groups.google.com/d/msg/android-developers/aK2o1W2xrMU/Z0-QujnU3wUJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:48:36.887

我不确定这是否是最好的方法，因为即使`Activity`在后台你也会得到`message`from `Service`。

我认为您应该在服务连接后立即绑定到服务`service`并注册`messenger`服务。然后`messenger`在断开连接时取消注册。

检查AOSP 中的[ExportVcardActivity](http://androidxref.com/4.0.4/xref/packages/apps/Contacts/src/com/android/contacts/vcard/ExportVCardActivity.java)。它正在遵循这些思路。

# javascript - 关于回调函数的 jQuery 术语

> ID：12204748
> 
> 赞同：3
> 
> 时间：2012-08-30T20:12:35.797
> 
> 标签：javascript, jquery, terminology

```
$('#foo').click(function(){  }); 
```

是`function(){ }`匿名函数，还是自调用函数？两者之间有什么区别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T20:14:49.463

没有名称/引用的函数称为匿名函数。里面的函数`$('#foo').click(function(){ });`是一个匿名函数。

自调用函数是在定义后立即调用的函数。

`(function () { })();`-> 是一个自调用函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T20:14:51.647

那是一个匿名函数。

顾名思义，“自调用函数”是一个调用自身的函数。

像这样：

```
(function(){
    console.log('hi');
}()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T20:22:17.073

是的，它是一个匿名函数。我不知道你所说的“自调用函数”是什么意思，也许是这样的：

```
(function(){alert("hello")}()) 
```

那是您定义然后立即调用的匿名函数——函数后面的括号是导致函数执行的原因。

在第一种情况下，您正在创建一个希望 javascript 在未来某个时间（即单击 html 元素时）执行的函数。js 将函数存储在某处，然后当点击 html 时，js 调用该函数。

所以区别在于一个函数现在执行，一个函数稍后执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T20:26:01.800

自调用函数等价于：

```
function self_invoke(params...) {...};
function(args...); 
```

匿名函数的使用等价于：

```
function anonymous(params...) {...};
$('#foo').click(anonymous); 
```

在这两种情况下，不同之处在于命名空间没有被小函数的名称污染。

# c# - 可以/应该任务 被包裹在一个在 TResult 中协变的 C# 5.0 awaitable 中？

> ID：12204755
> 
> 赞同：11
> 
> 时间：2012-08-30T20:13:08.297
> 
> 标签：c#, task-parallel-library, covariance, async-await, c#-5.0

我真的很喜欢使用 C# 5.0 异步编程。但是，在某些地方更新旧代码以与 TAP 模型保持一致会给我带来问题。

这是其中之一 - 我不确定为什么[`Task<TResult>`](http://msdn.microsoft.com/en-us/library/dd321424)在 TResult 中不是协变的，但是当我尝试更新协变接口以从同步模式转变为异步模式时，这给我带来了问题：

旧代码：

```
public interface IInitializable<out T> // ** out generic modifier **
{
    /// <summary>
    /// Boolean to indicate if class is ready
    /// </summary>
    bool IsInitialized { get; }

    /// <summary>
    /// Calls for instance to be initialized using current parameters
    /// Driver initialization can be done in the default constructor if desired
    /// </summary>
    T Initialize();
} 
```

新代码（不会编译）：

```
public interface IAsyncInitializable<out T> // ** out generic modifier...broken **
{
    /// <summary>
    /// Boolean to indicate if class is ready
    /// </summary>
    bool IsInitialized { get; }

    /// <summary>
    /// Calls for instance to be initialized using current parameters
    /// Driver initialization can be done in the default constructor if desired
    /// </summary>
    Task<T> InitializeAsync(); // ** breaks because Task<TResult> is invariant in TResult **
} 
```

有没有一种合理的方法来解决这个问题，而不需要太大幅度地修改我的 API？（奖励：为什么 Task 不是协变的？）。没有 IAwaitable 接口，但我想我可以制作一个并创建一个扩展方法，该方法转换为一个包装好的、协变的、可等待的任务对象。还是我做错了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T20:18:45.307

`Task<T>`不能是协变的`T`，因为它是一个类。只有接口和委托可以具有通用方差。

至于是否值得进行包装......我想这取决于您在项目中使用协方差的程度。老实说，我怀疑随着时间的推移，您会发​​现所有包装和展开令人困惑 - 如果只是消除协方差的影响*还不错*，我会这样做。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-15T22:07:24.567

我相信在 ITask 接口上不包括对 async 关键字的编译器支持是微软的主要疏忽。幸运的是，绕过这个限制并不难。

我已经实现了一个协变的等待`ITask<out TResult>`接口。它的用法非常简单。

更多信息可以在以下位置找到：

[https://github.com/jam40jeff/ITask](https://github.com/jam40jeff/ITask)

# c# - 如何编写依赖文件系统事件的单元测试？

> ID：12204756
> 
> 赞同：0
> 
> 时间：2012-08-30T20:13:08.747
> 
> 标签：c#, events, filesystemwatcher

我有以下要测试的代码：

```
public class DirectoryProcessor
{
    public string DirectoryPath
    {
        get;
        set;
    }

    private FileSystemWatcher watcher;

    public event EventHandler<SourceEventArgs> SourceFileChanged;

    protected virtual void OnSourceFileChanged(SourceEventArgs e)
    {
        EventHandler<SourceEventArgs> handler = SourceFileChanged;
        if(handler != null)
        {
            handler(this, e);
        }
    }

    public DirectoryProcessor(string directoryPath)
    {
        this.DirectoryPath = directoryPath;
        this.watcher = new FileSystemWatcher(directoryPath);
        this.watcher.Created += new FileSystemEventHandler(Created);
    }

    void Created(object sender, FileSystemEventArgs e)
    {
        // process the newly created file
        // then raise my own event indicating that processing is done
        OnSourceFileChanged(new SourceEventArgs(e.Name));
    }
} 
```

基本上，我想编写一个 NUnit 测试来执行以下操作：

1.  创建目录
2.  设置一个`DirectoryProcessor`
3.  将一些文件写入目录（通过`File.WriteAllText()`）
4.  检查`DirectoryProcessor.SourceFileChanged`在步骤 3 中添加的每个文件是否已触发一次。

我尝试这样做并`Thread.Sleep()`在第 3 步之后添加，但很难让超时正确。它正确处理了我写入目录的第一个文件，但不是第二个（超时设置为 60 秒）。即使我能让它以这种方式工作，这似乎也是一种糟糕的编写测试的方式。

有没有人有一个很好的解决这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:17:41.387

通常，您关心的是测试与文件系统的交互，而无需测试实际执行操作的框架类和方法。

如果在类中引入抽象层，则可以在单元测试中模拟文件系统，以验证交互是否正确，而无需实际操作文件系统。

在测试之外，“真正的”实现调用这些框架方法来完成工作。

是的，理论上你需要对“真正的”实现进行集成测试，但实际上它应该是低风险的，不会有太大的变化，并且可以通过几分钟的手动测试来验证。如果您使用开源文件系统包装器，它可能会包含这些测试，让您高枕无忧。

请参阅[如何在 C# 中模拟文件系统以进行单元测试？](https://stackoverflow.com/questions/1087351/how-do-you-mock-out-the-file-system-in-c-sharp-for-unit-testing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:36:24.403

如果您要测试使用此类的另一个对象，我的答案是不相关的。

当我为操作编写单元测试时，我更喜欢使用 ManualResetEvent

单元测试将类似于：

```
 ...
     DirectoryProcessor.SourceFileChanged+=onChanged;
     manualResetEvent.Reset();
     File.WriteAllText();
     var actual = manualResetEvent.WaitOne(MaxTimeout);
     ... 
```

当 manualResetEvent 是 ManualResetEvent 并且 MaxTimeout 是某个 TimeSpan 时（我的建议总是使用超时）。现在我们缺少“onChanged”：

```
 private void onChanged(object sender, SourceEventArgs e)
     {
          manualResetEvent.Set();
     } 
```

我希望这是有帮助的

# jquery - img src 在 Firefox 中被替换后会“粘”一会儿

> ID：12204758
> 
> 赞同：1
> 
> 时间：2012-08-30T20:13:23.737
> 
> 标签：jquery, image, firefox

我创建了一个简单的图像幻灯片加载器，带有缩略图，单击时会在主舞台上加载更大的图像。我正在使用“Reel”插件在主舞台上创建全景、可旋转的“3D”图像。

这很有趣，而且在 webkit 中一切都很好。您可以在此处查看实时页面：

[http://bit.ly/Rv9ks3](http://bit.ly/Rv9ks3)

幻灯片放映方面是通过嵌套回调完成的。单击任何静态缩略图链接：

a) 淡出当前现有的可旋转图像

b) 作为对fadeOut() 的回调，reel 插件从图像中移除，所有事件都解除绑定，它再次被隐藏以进行良好的测量，并且 img src 被替换为新的src。

c) 然后，使用 Desandro 的[imagesloaded](https://github.com/desandro/imagesloaded)插件测试 img 的新 src 是否已下载，主图像会淡入。

d) 作为对该淡入的回调，在新图像上调用 Reel 插件。

这就是问题所在：在 Firefox 中，淡入是发生在舞台上的旧图像的情况下。就好像旧的 src 暂时“粘住”了，这很奇怪，因为回调脚本必须按顺序执行。然后在片刻左右，图像突然更新为新图像。所以一切正常，但当我努力实现平稳过渡时，它是不稳定的。

注意：一旦所有图像都被缓存，一切都会完美运行。因此，在玩了一会儿之后，您可能需要清除 Firefox 中的缓存以重现该行为。

以下是相关代码：

```
$(document).ready(function () {
    $('#the-image-to-rotate').reel(); //runs the plugin
    $('#the-image-to-rotate').on('loaded', function(){  // the plugin's 'loaded' event
        $(this).data('velocity', 4); // kick off an initial velocity
    });

    $('#engraved-vase-pager a').on("click", function(event) {
        event.preventDefault();

    //build the URLS for the new img and the plug-in
        var newRelativeUrl = $(this).children('img').attr('src').slice(0,-9);
        var firstImageUrl = newRelativeUrl + "01.jpg";
        var templateUrl =  newRelativeUrl + "##.jpg";

        $('#the-image-to-rotate').fadeOut(400, function() {
            $(this).unreel()     // tear down the plugin
                   .unbind()      // remove anything lingering
                   .hide()      // hide the de-plugin'ed img
                   .attr('src', firstImageUrl);     //swap out with the new src

             $(this).imagesLoaded(function($images, $proper, $broken) {
                $(this).fadeIn(400, function() {
                    $(this).reel({
                        images:     templateUrl,
                    });
                    $(this).on('loaded', function(){
                        $(this).data('velocity', imageVelocity);
                    });
                });
            });
        });
}); 
```

Firebug 在加载以前未查看的图像时说“图像损坏或被截断”，但该消息并不是真正的描述性，因为一切正常，除了故障。您可以在我详尽的日志记录中看到，imagesloaded 显示零损坏的图像。

这让我上了树。提前感谢您的任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:15:14.087

受 Preli 在此处的评论的启发，*我*[继续](https://stackoverflow.com/questions/11809985/force-firefox-to-reload-image-after-img-src-change)发现在为 img 设置新的实际 src 之前首先将 src 设置为空字符串 ("")会引起 Firefox 的注意，并重置加载设置，以便回调可以正确开火。我不知道为什么，但这有效。希望这可以帮助某人。

# optimization - fmincon : 施加大于零约束的向量

> ID：12204759
> 
> 赞同：0
> 
> 时间：2012-08-30T20:13:25.477
> 
> 标签：optimization, matlab

如何使用 fmincon() 施加一个约束，即要优化的向量中的所有值都大于零？

根据文档，我需要一些参数 A 和 b，其中 A*x ≤ b，但我认为如果我将 A 设为 -1 和 b 0 的向量，那么我将针对 x>0 的总和进行优化，而不是x 的每个值大于 0。

以防万一你需要它，这是我的代码。我正在尝试优化向量（x），使得 x 和矩阵（称为 multiplierMatrix）的（分量）乘积形成一个矩阵，其列的总和为 x。

```
function [sse] = myfun(x)        % this is a nested function
    bigMatrix = repmat(x,1,120) .* multiplierMatrix;
    answer = sum(bigMatrix,1)';
    sse = sum((expectedAnswer - answer).^2);
end

xGuess = ones(1:120,1);
[sse xVals] = fmincon(@myfun,xGuess,???); 
```

如果我需要更好地解释我的问题，请告诉我。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:38:18.503

您可以使用下限：

```
xGuess = ones(120,1);
lb = zeros(120,1);
[sse xVals] = fmincon(@myfun,xGuess, [],[],[],[], lb); 
```

请注意，`xVals`并且`sse`可能应该交换（如果他们的名字意味着什么）。

下限`lb`意味着您的决策变量`x`中的元素永远不会低于 中的相应元素`lb`，这就是您在此处所追求的。

空 ( `[]`) 表示您*没有*使用线性约束（例如 , `A`, `b`, ） `Aeq`，`beq`仅使用了下界`lb`。

一些建议：`fmincon`是一个相当高级的功能。您最好记住上面的文档，并使用许多不同的示例问题玩几个小时。

# c# - 已发布上传的 MVC3 应用程序上的目录列表错误

> ID：12204765
> 
> 赞同：1
> 
> 时间：2012-08-30T20:14:15.087
> 
> 标签：c#, asp.net-mvc-3, iis, visual-studio-2012

好的，所以我将 MVC3 应用程序上传到服务器上。服务器已启用 .net。但是，当我转到其下的目录时，会出现此错误：

**目录列表被拒绝 此虚拟目录不允许列出内容。**

我确保：

```
System.Web.Mvc

System.Web.Routing

System.Web.Abstractions 
```

被设置为复制本地真。

我觉得可能是因为两个问题。首先，它可能是 IIS 问题，需要阅读有关虚拟目录权限的信息。

或者是因为我的项目没有有效的索引页面。在目录中的布局如下。

*   箱（文件夹）
*   内容（文件夹）
*   模型（文件夹）
*   脚本（文件夹）
*   视图（文件夹）
*   全球.asax
*   包.config
*   网页配置

我已经上传到服务器的第一个 MVC3 应用程序，任何人都知道我哪里出错了，或者他们认为是哪一个问题？如果是他们中的任何一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:08:33.807

好的，我会给你一份清单，它可能会帮助你，或者至少为你指明正确的方向。

1.  您是否为**.Net**和**[MVC](http://www.google.com.ar/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&ved=0CCIQFjAA&url=http://www.microsoft.com/en-us/download/details.aspx?id=4211&ei=1Nc_UJuxPJSM9AS2toGwDA&usg=AFQjCNGdApZwZVNophXHoFXmeEb63cOCMg&sig2=Whyxj3ZgQE6DPZSLlbCk7g)**安装了所有东西才能正常工作？MVC 可能仅在[**部署 /bin 文件夹**](http://haacked.com/archive/2008/11/03/bin-deploy-aspnetmvc.aspx)时工作。安装 RTM MVC3 包可能会为您节省一些 IIS/站点配置。

2.  运行这个，以防万一`aspnet_regiis -i`......

3.  将您的浏览器定位到项目中的知识页面，例如**/Home/Index**。记住 MVC 路由的东西，如果你尝试像“ *http:/yoursite/views/controller/action* ”这样的东西，你将不会得到正确的响应。现在，如果您在此处遇到错误，它会告诉您一些有用的信息，例如授权错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:08:58.923

# jquery - JQuery：获取使用 .append() 添加的元素的 .index()

> ID：12204766
> 
> 赞同：2
> 
> 时间：2012-08-30T20:14:27.260
> 
> 标签：jquery, indexing, append

jQuery v1.7.2

在用户从下拉列表中进行选择后，我正在向屏幕添加元素。我正在使用 .append() 执行此操作：

```
var html = '<li><input type="hidden" name="hidden_' + ID + '" id="hidden_' + ID + '" value="' + ID + '"/><p>' + Name + '<a href="#" onClick="remove($(this));">Close</a></p></li>'
$('#sortable').append(html); 
```

提交表单后，我需要遍历每个隐藏字段并获取它们的值和当前顺序（用户可以在页面上上下移动它们）。我正在尝试使用 .index() 执行此操作：

```
$('#sortable input:hidden[id*="hidden_"]').each(function(){
    alert($(this).val());
    alert($(this).index());
}); 
```

当我运行此代码时，该值很好，但索引始终为 0。我尝试将其全部包装

```
$(function () {
    $("#create").on("submit", function (event) {
    });
}); 
```

但这也没有用。

是我做错了什么，还是因为我附加了元素而发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:18:02.577

`each`函数的第一个参数是当前循环的*索引*。

> .each（函数（索引，元素））

```
$('#sortable input:hidden[id^="hidden_"]').each(function(index){
    alert(this.value);
    alert(index);
}); 
```

# python - 在 apache 上使用 mod_wsgi 运行时，是否有任何理由不强制 sys.path？

> ID：12204767
> 
> 赞同：0
> 
> 时间：2012-08-30T20:14:27.390
> 
> 标签：python, django, mod-wsgi

因此，在对 mod_wsgi 和 apache 下的路径情况感到沮丧之后，我采取了蛮力锤击它。

现在我想知道是否还有其他可能的陷阱。

我激活了我的 virtualenv 然后运行

```
(virtualenv)$python
>>> import sys
>>> for i in sys.path:
>>>   print "'{}',".format(i)
>>> quit() 
```

然后我将它粘贴到我的 wsgi 文件中，如下所示：

```
import sys
sys.path = [

    Block of stuff printed out

] 
```

这种方式 sys.path 与我运行调试服务器时的 apache 相同。

其他一切都一直在谈论在路径中插入东西，是否有某种原因这不起作用？

没关系，但它是一个 django 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:47:25.493

既然你提到使用 virtualenv，你是否确保 apache/mod_wsgi 使用 virtualenv 路径，即激活这个使用？尝试像这样将它添加到您的 wsgi 文件中：

```
activate_this = join(VIRTUALENV_DIR,'bin/activate_this.py')
execfile(activate_this, dict(__file__=activate_this)) 
```

# image - 从头开始渲染非常大的图像，然后将其拆分为图块（用于谷歌地图）

> ID：12204770
> 
> 赞同：1
> 
> 时间：2012-08-30T20:14:33.143
> 
> 标签：image, google-maps, image-processing, google-maps-api-3, gdi+

我有一大组谷歌地图 api v3 折线和标记，需要呈现为透明 PNG（实现为 ImageMapType）。我已经完成了关于从 latLng 到像素和平铺坐标的转换的所有数学/几何。

问题是：在我的应用程序允许的最大缩放比例下，即 18 倍，复合图像的宽度和高度至少跨越 80000 像素。因此，将其渲染成一块，然后将其拆分为图块变得不可能。

我尝试了预先分割多段线并将零件放入瓦片中的方法，然后单独渲染每个瓦片，直到现在几乎可以正常工作。但是当我需要绘制风格化的标记/文本和其他花哨的东西等时，它会变得非常困难。

到目前为止，我使用 C# GDI+ 作为绘图方法（ol' Bitmap / Graphics 对）。

这里的许多问题是关于拆分已经存在的图像、存储并将其链接到 API。我已经知道该怎么做。

我的问题是如何绘制初始非常大的图像然后将其拆分？它并不真的需要是一个真正的图像/位图/调用它任何你想要的解决方案。一位朋友建议我使用 SVG，但我不知道有什么好的渲染解决方案可以满足我的需求。

为了使它更容易理解，请从输入/输出的角度来考虑。我的输入是我需要绘制的跨越数万像素的数据（线条、圆圈、文本等），输出必须是图块。我真的不在乎“魔盒”是什么，我什至不在乎平台是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T05:47:52.173

我在创建自定义图块时遇到了同样的问题，而您一次创建一个图块的解决方案是正确的。您只需要在流程中添加一些策略。我做的是这样的：

```
Pseudo code:
for each tile {
  - determine the lat/lon corners of the tile.
  - query the database and load the objects that are within this tile.
  for each object{
    - calculate the tile pixels on which the object should be painted. [*A*]
    - draw the object on the tile.
    - Save the tile. (you're done with this tile).
  }
} 
```

或者：

```
 Pseudo code:
    - for each object to be drawn {
      - determine what tile the object should be painted on.
      - calculate the tile pixels on which the object should be painted.[*A*]
      - get that tile, if it doesn't yet exist create a new one.
      - draw the object on the tile.
      - Save the tile. (you might need to draw more on this tile later)
} 
```

我用 Perl 和 GD 库来做这件事。

`[*A*]`当绘制跨越多个图块的对象时，如果对象从当前图块开始，那么它的一部分将自动被忽略，因为您将尝试在图块外部进行绘制，而如果对象从前一个图块开始并且您'正在绘制第二部分，那么像素数应该是负数，这意味着它从相邻的图块开始。

这在书面帖子中有点难以解释，因此如果您需要，请随时要求进一步澄清，我将编辑答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T01:57:57.390

我建议了解 GDAL (http://gdal.org) 及其库。它具有用于光栅化、平铺、数据转换、投影、变形等的库。

# asp.net - 在 ASP.NET AJAX TabPanel 中呈现的重复 ID

> ID：12204773
> 
> 赞同：3
> 
> 时间：2012-08-30T20:14:37.643
> 
> 标签：asp.net, user-controls, ajaxcontroltoolkit, tabpanel, tabcontainer

我有两个用户控件 (.ascx)，其中有一个 ASP.NET AJAX TabContainer 控件，每个控件都有两个或三个选项卡 (TabPanels)。我在大约 10 个网站中使用这些控件。除了最新的三个网站外，一切都运行良好。在这三个中，TabPanel 控件使用重复的 id 属性呈现，因此浏览器上的选项卡的 div 类似于以下内容：

```
<div id="ctl00_ContentPlaceHolder1_mycontrol1_mycontrolTabs_ctl00" 
  id="ctl00_ContentPlaceHolder1_mycontrol1_mycontrolTabs_ctl00" 
  class="ajax__tab_panel"> 
```

TabContainer 中的其他标记都没有重复的 id，只有 TabPanels。早期的网站使用单个 id 呈现完全相同的用户控件（完全相同，因为站点通过虚拟目录与控件共享相同的文件夹）。我试过省略 TabPanel 上的 ID，但它仍然呈现重复的 ID。

这似乎只会在 IE7 和 IE8 中引发错误，但不幸的是，其中一个违规站点需要对这些错误的支持。

我已经彻底比较了“好”和“坏”的网站，但没有发现任何应该在选项卡控件中触发这种行为的东西。这些网站的内容略有不同，但实际上非常相似。欢迎任何关于可能引发此问题的想法！

# python - 基于函数的通用视图已被弃用

> ID：12204775
> 
> 赞同：2
> 
> 时间：2012-08-30T20:14:49.007
> 
> 标签：python, django, django-views, django-1.3, django-1.4

> DeprecationWarning：基于函数的通用视图已被弃用；改用基于类的视图。

当我运行我的网站时，我不断收到此警告。这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T20:20:31.650

Django 1.3 引入了[基于类的视图](https://docs.djangoproject.com/en/1.3/topics/class-based-views/)，还添加了一系列通用的基于类的视图。Django 也有关于[将基于函数的视图迁移到基于类的视图的](https://docs.djangoproject.com/en/1.3/topics/generic-views-migration/)文档。

没有太多要说的：您的项目当前使用基于函数的视图，而基于类的视图是创建视图的新方法。

# php - mysql_real_escape 在本地工作，但不在远程工作

> ID：12204781
> 
> 赞同：1
> 
> 时间：2012-08-30T20:15:21.507
> 
> 标签：php, mysql, mysql-real-escape-string

在我的本地 MAMP 设置上使用 mysql_real_escape_string 时，它工作正常。例如，当我在文本字段中输入“test”时，它会显示为“test”。

当我将它发布到远程服务器时，它似乎没有转义字符串。“test”在数据库中显示为“test”。

我已经确保在转义之前打开了一个连接。

示例代码：

```
 global $db,$db_table_prefix; 

    mysql_connect($db_host, $db_user, $db_pass) or die(mysql_error());
    mysql_select_db("test") or die(mysql_error());

    $title = mysql_real_escape_string($_POST['title']);
    $content = mysql_real_escape_string($_POST['content']); 
```

它可以很好地保存到正确的数据库中，但似乎没有添加 \'s。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:16:56.903

那不是 m_r_e_s 做的，而是[magic_quotes](http://php.net/manual/en/security.magicquotes.php)。
您的本地计算机已启用它们。你的遥控器没有。您应该在本地禁用它们。

此外，你真的应该开始使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T20:17:39.913

`magic_quotes`可能在您的本地服务器上启用。您需要禁用它们。

更多关于禁用`magic_quotes`：[http ://www.php.net/manual/en/security.magicquotes.disabling.php](http://www.php.net/manual/en/security.magicquotes.disabling.php)

# python - if循环条件中奇怪的Python SyntaxError

> ID：12204784
> 
> 赞同：-1
> 
> 时间：2012-08-30T20:15:31.767
> 
> 标签：python, python-3.x, syntax-error

尝试在 if 循环中比较三个变量时，我遇到了一个非常奇怪的 Python 3 错误。

```
if now.weekday() == 6 or minutesRemaining <= 60 or modeArg == "run":
                                                         ^
SyntaxError: invalid character in identifier 
```

这是什么意思？

当我单独比较 modeArg 时，我的代码有效：

```
if modeArg == "run": 
```

而且当我只写前两个语句时：

```
if now.weekday() == 6 or minutesRemaining <= 60: 
```

* * *

[我的代码在 GitHub 上。](https://gist.github.com/a0f989e693dd170620fd)提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T20:19:32.407

您有一些看起来像不在该行中的空间的东西：

```
\tif now.weekday() == 6 or minutesRemaining <= 60 or\xc2\xa0modeArg == "run":\n
                                                    ^^^^^^^^ 
```

顺便说一句，您可能希望避免使用制表符进行缩进：四个空格让生活更轻松。

# c++ - Visual Studio 中的调用约定

> ID：12204792
> 
> 赞同：1
> 
> 时间：2012-08-30T20:16:04.683
> 
> 标签：c++, visual-studio-2010, fortran, calling-convention

我有一个在 CVF 约定中构建的 fortran DLL，我的 c++ 代码使用 cdecl 调用约定构建，以从我的 DLL 中获取它需要的东西。我签入了我的 c++ 代码 obj 文件，符号是“_ *imp* _variable”。然后在我的 fortran dll 中，符号显示为“变量”。我遇到了一些链接器错误（未解析的外部符号_imp _variable），是因为c++ 正在寻找'_ *imp* *_variable* '，就像在我的DLL 中一样？还是 VS cdecl 调用约定只是奇怪地添加了一些东西，但它知道要查找“变量”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:19:12.583

前缀`__imp__`由`__declspec(dllimport)`storage-class 属性添加。这意味着对象或函数是使用导入库（通常由链接器在 DLL 构建时创建的）从 DLL 导入的。确保您将此类库添加到您的项目中。

如果由于未知原因您没有导入库或 DLL 源，请查看此处：http: [//support.microsoft.com/kb/131313](http://support.microsoft.com/kb/131313)

# mysql - 在插入时省略 MySQL 列数的方法

> ID：12204798
> 
> 赞同：0
> 
> 时间：2012-08-30T20:16:26.687
> 
> 标签：mysql

我正在尝试将大量自定义 CMS 的新闻部分转储到 WordPress 中。不幸的是，列不匹配。其中一些——是的，当然——比如标题、日期或内容。但是 WordPress 需要很多此转储所没有的列。有没有办法在插入时忽略这个计数或用虚拟（最好是空白）数据填充它？搜索和替换（即使使用正则表达式）不会在这里进行，因为它确实是一个巨大的文件，简单的“查找”需要很多时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:46:14.903

你说你得到了一张“桌子”。如果它包含架构，则创建表并插入数据。否则，根据数据列创建表并插入数据。这被认为是您的临时表。您现在可以编写一个`SELECT`语句来从暂存表中选择将插入到目标表中的数据。您最终将添加一个`INSERT`语句来插入您选择的数据。它应该看起来像这样：

```
INSERT INTO destinationTable (fruits, animals, numbers, plants)
SELECT fruits, animals, numbers, '' FROM stagingTable 
```

如果您`plants`的暂存表中没有，您将简单地`SELECT ''`或`SELECT NULL`为该列。然后，您可以简单地删除临时表。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-30T20:36:07.820

假设我的澄清答案是肯定的，您可以通过用列分隔它们来插入多行。

```
INSERT INTO table (col1, col2) 
VALUES (row1val1, row1val2),
(row2val1,row2val2) 
```

# python - 分裂 post on empty line(s)

I have a form with:

```
 <textarea name="test"></code></pre> <p>Assuming the user inputs the following text:</p> <</h1>
<blockquote>
        <p>ID：12204799</p>
        <p>赞同：2</p>
        <p>时间：2012-08-30T20:16:29.223</p>
        <p>标签：python</p>
        </blockquote>

            <hr/>
            <h2>回答 #1</h2>
            <blockquote>
            <p>赞同：5</p>
            <p>时间：2012-08-30T20:23:57.087</p>
            </blockquote>

<p>我认为<code>re</code>模块可能是矫枉过正。只需拆分内容<code>\n</code>并删除空字符串。</p>

<pre><code>>>> s = """This is the text
... 
... I am interested in splitting,
... 
... 
... but I want to remove blank lines!"""
>>> lines = [l for l in s.split("\n") if l]
>>> lines
['This is the text', 'I am interested in splitting,', 'but I want to remove blank lines!']
</code></pre>

<p>似乎也快了<code>string.split</code>两倍。</p>

<pre><code>> python -m timeit -s 's = "This is the text\n\nthat I want to split\n\n\nand remove empty lines"; import re;' '[l for l in re.split(r"\n", s) if l]'   
100000 loops, best of 3: 2.84 usec per loop

> python -m timeit -s 's = "This is the text\n\nthat I want to split\n\n\nand remove empty lines"' '[l for l in s.split("\n") if l]'                    
1000000 loops, best of 3: 1.08 usec per loop
</code></pre>

            <hr/>
            <h2>回答 #2</h2>
            <blockquote>
            <p>赞同：1</p>
            <p>时间：2012-08-30T21:05:08.330</p>
            </blockquote>

<p>标准拆分可以有多字符分隔符：</p>

<pre><code>>>> '''1st para
... second line
...
... 2nd para
... '''.split('\n\n')
['1st para\nsecond line', '2nd para\n']
</code></pre>

<p><strong>编辑</strong></p>

<p>这是一个<code>re.split</code>可以处理 Linux 和 Windows 样式的行尾，并处理段落之间的多个空行。</p>

<h3><code>\n</code>测试：</h3>

<pre><code>>>> x='this is\na multiline\ntest\n\n2nd para\ngraph\n\n\n\nmore\nmore\nmore\n\n\n\n\nmore\n'
>>> import re
>>> re.split(r'(?:\r?\n){2,}',x)
['this is\na multiline\ntest', '2nd para\ngraph', 'more\nmore\nmore', 'more\n']
</code></pre>

<h3><code>\r\n</code>测试：</h3>

<pre><code>>>> y=x.replace('\n','\r\n')
>>> re.split(r'(?:\r?\n){2,}',y)
['this is\r\na multiline\r\ntest', '2nd para\r\ngraph', 'more\r\nmore\r\nmore', 'more\r\n']
</code></pre>

</body>
</html></textarea>
```

# java - JavaMail 正在丢失一些 POP3 邮件标头，并将 multipart/mixed 视为 text/plain

> ID：12204804
> 
> 赞同：4
> 
> 时间：2012-08-30T20:16:46.273
> 
> 标签：java, jakarta-mail, pop3, email-headers

我在解析 JavaMail 1.4.4 - Java 1.4 和 Java 1.6 中的一些 POP3 消息时遇到了一个奇怪的问题。

我正在解析`com.sun.mail.pop3.POP3Message`从 Windows 2003 POP3 服务邮箱中检索到的内容。当我通过`getAllHeaderLines()`枚举并将它们与源邮件进行比较时，我看到回复标题在中间电子邮件地址中被截断，并且所有剩余的标题都丢失了（特别是主题、收件人、回复中、MIME 版本， Contact-Type、Return-Path 和 X-OriginalArrivalTime）。该`getContentType()`方法返回文本/纯文本，该`getContent()`方法将整个多部分/混合消息作为字符串返回。

当我打开 JavaMail 调试模式时，关于消息的所有内容看起来都很正常并且与源消息文件匹配。

任何想法，将不胜感激。

以下是 POP3 邮箱中源邮件文件的片段：

```
Message-ID: <1345995532.54860.YahooMailNeo@web111910.mail.gq1.yahoo.com>
Date: Sun, 26 Aug 2012 08:38:52 -0700
From: Secure Comfort <securecomforttransportation@ymail.com>
Reply-To: Secure Comfort <securecomforttransportation@ymail.com>
Subject: Language & Transportation Service 
To: "xxxxxx@xxxxxx.com"
    < xxxxxx @ xxxxxx.com>
In-Reply-To: <1345995390.53486.YahooMailNeo@web111908.mail.gq1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/mixed;
    boundary="1816409020-1433069823-1345995533=:54860"
Return-Path: securecomforttransportation@ymail.com
X-OriginalArrivalTime: 26 Aug 2012 15:39:22.0287 (UTC) FILETIME=[F6D67BF0:01CD83A0]

--1816409020-1433069823-1345995533=:54860
Content-Type: multipart/alternative;
    boundary="1816409020-520494517-1345995533=:54860"

--1816409020-520494517-1345995533=:54860
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable 
```

以下是 MimeMessage 的大多数 getter：

```
Content ID=null
Content Language=null
Content MD5=null
Content Type=text/plain
Data Handler=javax.mail.internet.MimeBodyPart$MimePartDataHandler
Description=null
Disposition=null
Encoding=null
File Name=null
Line Count=-1
Message ID=<1345995532.54860.YahooMailNeo@web111910.mail.gq1.yahoo.com>
Received Date=null
Sent Date=Sun Aug 26 10:38:52 CDT 2012
Size=7480850
Subject=null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:39:07.920

JavaMail 的调试输出显示了什么？（如果您不想在此处发布，请通过 javamail_ww@oracle.com 将其发送给我。）

JavaMail 中没有标头大小限制。

可能您有防火墙或防病毒软件拦截了与服务器的对话并（意外地）在消息头中引入了此中断。

# java - ScriptEngineManager 可以给我它刚刚用 Java 编译的 Javascript 函数的名称吗

> ID：12204811
> 
> 赞同：1
> 
> 时间：2012-08-30T20:17:29.880
> 
> 标签：java, javascript, javascript-engine

如何找出用 Java 解析的 javascript 函数的名称。我允许用户输入一个 Javascript 函数（在 JTextArea 中），然后我使用 ScriptEngineManager 来确认它是有效的语法，如下所示：

```
public final boolean isFunctionValid(String function)
{
    try
    {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("JavaScript");
        Object result = engine.eval(function);
    }
    catch(ScriptException se)
    {
        return false;
    }
    return true;
} 
```

工作正常，但我也想知道函数的名称，以便我可以为函数分配一个与函数名称匹配的名称。如果 ScriptEngineManager 为我做这件事，我更喜欢它，而不是我试图通过解析变量函数来解决它，因为该方法的固有风险

**编辑** 因为似乎没有办法正确地做到这一点，我已经使用对我有用的正则表达式创建了两个检查。

```
 protected static Pattern functionNameMatch;
    protected static Pattern multipleFunctionsMatch;
    static
    {
        functionNameMatch = Pattern.compile("function[ ]+([a-zA-Z0-9]*)[ ]*\\(");
        multipleFunctionsMatch = Pattern.compile("function[ ]+");
    }

    protected boolean isOneFunction()
    {
        Matcher m = multipleFunctionsMatch.matcher(function.getText());
        if(m.find())
        {
            if(m.find())
            {
                return false;
            }
            return true;
        }
        return false;
    }

    protected String deriveNameFromFunction()
    {
        Matcher m = functionNameMatch.matcher(function.getText());
        if(m.find())
        {
            return m.group(1);
        }
        return "";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:09:30.163

因此，由于在 JavaScript 中是不可能的，所以我使用模式匹配进行了一些额外的检查

```
protected static Pattern functionNameMatch;
protected static Pattern multipleFunctionsMatch;
static
{
    //TODO this method only works if all parameters are put on first line of function, otherwise declares function
    //is invalid
    functionNameMatch = Pattern.compile("function[ ]+([a-zA-Z0-9]*[ ]*\\(.*\\))");
    multipleFunctionsMatch = Pattern.compile("function[ ]+");
}

protected boolean isOneFunction()
{
    Matcher m = multipleFunctionsMatch.matcher(function.getText());
    if(m.find())
    {
        if(m.find())
        {
            return false;
        }
        return true;
    }
    return false;
}

protected String deriveNameFromFunction()
{
    Matcher m = functionNameMatch.matcher(function.getText());
    if(m.find())
    {
        return m.group(1);
    }
    return "";
} 
```

# algorithm - 最大矩形重叠点

> ID：12204813
> 
> 赞同：3
> 
> 时间：2012-08-30T20:17:35.450
> 
> 标签：algorithm

给定网格 L*C 中 N 个矩形 (N<=100.000) 的坐标（L 和 C 的范围可以从 0 到 1.000.000.000），我想知道网格中任意点重叠矩形的最大数量是多少。

所以我想我会使用一个扫描算法，对于按 x 值排序的每个事件（矩形的开始或结束），我会在我的结构中添加或删除一个间隔。

我必须使用树来保持间隔的最大重叠，并且能够添加和删除间隔。

当间隔（开始和结束）的值在 0 到 100.000 之间时，我知道如何做到这一点，但在这里这是不可能的，因为平面的尺寸是从 0 到 1.000.000.000。我怎样才能实现这样的树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T22:05:41.340

如果您预先知道所有矩形的坐标，则可以使用“坐标压缩”。

由于您只有 10^5 个矩形，这意味着您最多有 2*10^5 个不同的`x`和`y`坐标。因此，您可以创建从这些坐标到 1 到 2*10^5 的自然数的映射（通过简单地对坐标进行排序）。然后你可以使用你已经知道的普通树作为新坐标。

这足以获得矩形的数量，但如果您还需要它们重叠的点，您还应该保持反向映射，以便您可以返回矩形的真实坐标。在一般情况下，答案将是一个矩形，而不仅仅是一个点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T20:27:41.940

使用[区间树](http://en.wikipedia.org/wiki/Interval_tree)。您的情况有点复杂，因为您确实需要加权区间树，其中权重是该区间的开放矩形的数量。

# c++ - 共享库的 CMake 和订单相关链接

> ID：12204820
> 
> 赞同：37
> 
> 时间：2012-08-30T20:18:03.840
> 
> 标签：c++, cmake, dynamic-linking

我有一些小组件正在构建为我的主应用程序的共享库。`liba`让我们使用和的一个例子`libb`。每个都在自己的子目录中构建，如下所示：

```
add_library(liba SHARED a.cpp) 
```

然后，在根项目文件夹中，我需要将我的主应用程序链接到两者。

```
include_directories(a)
include_directories(b)
add_executable(dummy dummy.cpp)
target_link_libraries(dummy a b) 
```

CMake 运行良好，我的应用程序编译但无法链接。问题是b引用了a。如果我在链接时提供库的顺序

```
target_link_libraries(dummy b a) 
```

该程序编译和链接就好了

当这种系统开始涉及更复杂的库之间的依赖关系时，即使依赖关系是非循环的，它也开始变得不可能。如何在此处管理链接步骤？订购库以在 CMake 中进行链接有技巧吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-30T20:28:33.653

您可以通过添加来指定`a`和之间的关系`b`

```
target_link_libraries(b a) 
```

从[文档](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#command%3atarget_link_libraries)：

> 默认情况下，库依赖项是可传递的。当这个目标链接到另一个目标时，链接到这个目标的库也将出现在另一个目标的链接行上。

因此，如果您以这种方式指定`a`为的依赖项`b`，您甚至不需要`a`在任何依赖于的目标中显式列出`b`，即您的其他命令可以只是：

```
target_link_libraries(dummy b) 
```

尽管列出也不会造成任何伤害`a`。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-30T20:37:29.207

一个简单的解决方案（尤其是对于循环依赖项）可以是将所有库放在一个列表变量中，然后将该列表添加两次（如果需要，可以添加更多），例如：

```
set(LINK_LIBS "liba libb libc")
target_link_libraries(app ${LINK_LIBS} ${LINK_LIBS}) 
```

（或者只是在`target_link_libraries`函数中一个接一个地输入列表两次）

这对我有用很多次，但我承认可能存在一些我不知道的可能缺点（除了看起来有点像黑客之外）。

# haskell - 懒惰的 ByteString 奇怪的行为或错误？

> ID：12204821
> 
> 赞同：1
> 
> 时间：2012-08-30T20:18:04.030
> 
> 标签：haskell, bytestring

当我在 GHCI 中测试我的函数 intervalFinder 时，它似乎正在工作，但是当我尝试编译它时，我没有输出：

该函数适用于输入：

```
*Main> intervalFinder $[B.pack"first",B.pack"second",B.empty,B.pack"third",B.emp
ty]
Loading package bytestring-0.9.2.1 ... linking ... done.
["Start Time: first","End   Time: second","Start Time: third","End   Time: third
"] 
```

并运行主要：

```
*Main> main
Loading package bytestring-0.9.2.1 ... linking ... done.
*Main> :q
Leaving GHCi. 
```

在 results.txt 中打印：

```
Start Time: firstEnd   Time: secondStart Time: thirdEnd   Time: third 
```

但如果我运行 ghc test3.hs，输出文件为 0kb（显然其中没有数据！）

难道我做错了什么？

代码：

```
{-# LANGUAGE OverloadedStrings #-}
import qualified Data.ByteString.Char8 as B
import qualified Data.ByteString.Lazy.Char8 as Bl
import System.IO 
import System.Environment

intervalFinder :: [B.ByteString]->[B.ByteString]
intervalFinder x = helper x ""
    where
    helper (x:xs) "" 
        | x /= ""   = ((B.append (B.pack("Start Time: ")) x)):(helper xs x)
        | otherwise = helper xs ""
    helper (x:xs) y
        | x == ""   = ( (B.append (B.pack("End   Time: ")) y)):(helper xs "")
        | otherwise = helper xs x
    helper _ _      = []

main = do
    filehandle <- openFile "result.txt" WriteMode
    Bl.hPutStr (filehandle) .  Bl.fromChunks . intervalFinder $[B.pack"first",B.pack"second",B.empty,B.pack"third",B.empty] 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:35:16.450

```
main = do
    filehandle <- openFile "result.txt" WriteMode
    Bl.hPutStr (filehandle) .  Bl.fromChunks . intervalFinder
          $[B.pack"first",B.pack"second",B.empty,B.pack"third",B.empty] 
```

`runghc`输出是缓冲的，因此程序退出时不会使用或使用已编译的二进制文件刷新缓冲区。在 ghci 中，退出 ghci 时会刷新所有缓冲区¹。

当你`openFile`一个文件句柄时，你应该`hClose`在使用它之后。如果它以写入或附加模式打开，这也会刷新输出缓冲区。

```
main = do
    filehandle <- openFile "result.txt" WriteMode
    Bl.hPutStr (filehandle) .  Bl.fromChunks . intervalFinder
          $[B.pack"first",B.pack"second",B.empty,B.pack"third",B.empty]
    hClose filehandle 
```

或者，您可以使用`writeFile`

```
main = Bl.writeFile "result.txt" $ Bl.fromChunks ... 
```

¹ 我不是 100% 确定这一点，但经验支持它。

# git - git diff.*.textconv 转换器可以确定是否输出颜色吗？

> ID：12204826
> 
> 赞同：0
> 
> 时间：2012-08-30T20:18:22.050
> 
> 标签：git, git-diff

在运行 git diff.*.textconv 转换器时，是否可以确定 git 在当前情况下是否会输出颜色？

例子：

`git diff`如果输出是终端， with`color.ui=auto`将输出颜色。如果输出是终端，我希望 diff.*.textconv 转换器也输出颜色。我无法在转换器中检查，因为 git 总是将输出重定向到非终端。

这可能是 XY 问题；我基本上只想要语法高亮 git diffs 的源内容的最佳方法，但如果输出不去终端则不需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:47:55.423

如果 $GIT_PAGER_IN_USE 设置为 true，则一半的解决方案（一半是因为它在通过管道输出时不正确输出颜色，但在指定 --color 时不正确地不输出颜色）是输出颜色。

# c# - 将 ASP.NET 页面转换为 MVC 控制器 HttpContext.Current 错误

> ID：12204828
> 
> 赞同：0
> 
> 时间：2012-08-30T20:18:27.040
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我正在尝试将 ASP.NET 页面转换为 MVC 控制器并出现构建错误。

*“System.Web.HttpContextBase”不包含“Current”的定义，并且找不到接受“System.Web.HttpContextBase”类型的第一个参数的扩展方法“Current”*

这是我需要从 ASP.NET 转换为 MVC 的代码行

```
 byte[] param = Request.BinaryRead(HttpContext.Current.Request.ContentLength); 
```

编译器强调：HttpContext。**当前**.Request.ContentLength

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:27:13.857

尝试使用`ControllerContext.HttpContext.Current`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:27:50.557

您可以使用 HttpContext.Request.ContentLength

# c# - 用于解析网络捕获 (.cap) 文件的 API

> ID：12204831
> 
> 赞同：2
> 
> 时间：2012-08-30T20:18:58.943
> 
> 标签：c#, .net, api

我有一个网络捕获文件 ( `.cap`)。是否有允许我从 C# 操作它的 API？

# sql - 以米为单位获取距离，而不是 Spatialite 中的度数

> ID：12204834
> 
> 赞同：11
> 
> 时间：2012-08-30T20:19:12.363
> 
> 标签：sql, geospatial, spatialite

我有以下查询：

```
select distance(GeomFromText('POINT(8 49)',4326),GeomFromText('LINESTRING(8.329969 49.919323,8.330181 49.919468)',4326)) 
```

这给了我 0.97 度。但我需要它以米为单位，不知道要转换到哪个 SRID。

有人可以给我一个例子，如何以米为单位获得 spaceite 的结果吗？

这些职位都在欧洲。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-30T21:06:29.353

只需将度数乘以`111195`- 这个值就是`(Earth mean radius)*PI/180`- 即“地球表面上一个大圆度数的平均长度，以米为单位”。

使用此方法获得的结果在 WGS84 椭球的测地线距离的 1% 以内。

* * *

编辑

好的，我上面的回答仍然代表这个问题：“如何将弧度以米为单位转换”，但是，这不是你问的问题（应该问）。

我没有专业使用过 Spatialite，所以我假设您的示例查询确实返回了“度数长度”。这不是真的。

不幸的是，Spatialite 似乎无法计算“地理意义上”的距离。尽管您的几何图形是使用 SRID 4326 定义的，但它会将它们视为在平面上。

这是一个简单的证明：

```
select Distance(GeomFromText('POINT(0 0)',4326),GeomFromText('POINT(3 4)',4326)); 
```

返回`5.0`。

这是一个耻辱 ...

让我们看看您的原始查询：

```
select Distance(
  GeomFromText('POINT(8 49)',4326),
  GeomFromText('LINESTRING(8.329969 49.919323,8.330181 49.919468)',4326)
) 
```

MS SQL Server 中的等效查询：

```
SELECT (geography::STGeomFromText('POINT(8 49)', 4326)).STDistance(geography::STGeomFromText('LINESTRING(8.329969 49.919323,8.330181 49.919468)', 4326)); 
```

立即为您提供正确的结果：`105006.59673084648`以米为单位，并且没有任何额外的喧闹。

那么您对 ​​Spatialite 有哪些选择？

确实，正如您在评论中所说，一种选择是投影您的几何图形，并计算这些几何图形。在欧洲使用 SRID 3035 也很有意义（如果您的位置主要在德国，我会考虑使用 SRID 25832）。

```
select Distance(
  Transform(GeomFromText('POINT(8 49)',4326),25832),
  Transform(GeomFromText('LINESTRING(8.329969 49.919323,8.330181 49.919468)',4326),25832)
) 
```

返回`104969.401605453`。

至于您的其他样本（在评论中）：

```
select distance(
  Transform(GeomFromText('POINT(8.328957 49.920900)',4326),3035),
  Transform(GeomFromText('POINT(8.339665 49.918000)',4326),3035)
) 
```

有一种更简单的方法（如果您有两个 POINT，而不是 POINT 和 LINESTRING）：使用您的 POINT 和使用`GeodesicLength`函数创建一个 LINESTRING，如下所示：

```
select GeodesicLength(GeomFromText('LINESTRING(8.328957 49.920900, 8.339665 49.918000)',4326)) 
```

它`833.910006698673`按预期返回。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-30T23:09:31.260

在 SpatiaLite 的[函数参考指南](http://www.gaia-gis.it/gaia-sins/spatialite-sql-4.1.0.html#p13)中，您可以看到该函数有两个版本`Distance()`。一个只接受两个参数并以 CRS 单位返回距离，另一个接受 3 个参数并以米为单位返回距离。

要获得以米为单位的距离，只需将第三个参数传递给 Distance：

```
sqlite> select Distance(MakePoint(0, 0), MakePoint(3, 4));
5.0
sqlite> select Distance(MakePoint(0, 0), MakePoint(3, 4), 1);
554058.923752633 
```

# javascript - 当另一个 div 在第一个 div 中可见时显示一个 div

> ID：12204835
> 
> 赞同：1
> 
> 时间：2012-08-30T20:19:12.797
> 
> 标签：javascript, jquery, css

我有一个 div，它的类`.productSelectInput`只有我的几个产品动态显示，所以我隐藏了一个`.options`最初使用 CSS 的类的 div，但是当`.productSelectInput`可见时我想`.options`再次显示。我认为我下面的 JS 可以工作，但似乎没有。我认为这可能是因为`.productSelectInput`在选项类中。任何帮助表示赞赏。

这是我的 HTML：

```
<div class="options">
   <div class="option">
      <label for="o1">Choose:</label>
      <select id="Grouping_6350746" class="productSelectInput"
      name="AddToCart_Grouping" onchange="DrawProduct(311820,6350746,this.value,'',4);">
         <option value="6350744">Kiwi</option>
         <option value="6350745">Marigold</option>
         <option value="6350746" selected="selected">Strawberry</option>
      </select>
   </div>
</div> 
```

这是我的 CSS： .options { display: none; }

这是我的js：

```
jQuery(document).ready(function() { 
    if ($( ".productSelectInput" ).is(":visible") ) {
        $( ".options" ).show();
    }
 }); 
```

已解决：使用 js 隐藏选项有效。

```
jQuery(document).ready(function() { 
    if ($( ".productSelectInput" ).is(":visible") ) {
    $( ".options" ).show();
    } else {
    $( ".options" ).hide();
    }
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:21:40.253

您的代码只执行一次：当文档准备好时。每次您的页面发生更改时，它都不会被调用。

而且由于`.productSelectInput`最初是隐藏的，因此`.options`不可见是正常的。

如果你想让你`.options`变得可见，你必须在每次有可能`.productSelectInput`变得可见时进行测试。最简单的就是把它放在你`.productSelectInput`看得见的地方。

并且为了防止您的问题：当元素变得可见时不会引发任何事件。您*可以*定期检查，但我不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:22:30.363

认为您需要获得最近的父母并仅显示 1：

```
jQuery(document).ready(function(){  
  if ($( ".productSelectInput" ).is(":visible") ) {
    $(this).closest( ".options" ).show();
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:26:53.747

尝试`.options`通过 JavaScript 而不是 CSS 隐藏。JavaScript 可能无法处理`show()` 它本身没有的元素`hide()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T20:30:19.660

您的下拉菜单应该在 div 之外，
否则更改将不可见，因为父元素被隐藏

# debugging - 如何调试引导加载程序？

> ID：12204837
> 
> 赞同：6
> 
> 时间：2012-08-30T20:19:19.987
> 
> 标签：debugging, bootloader, grub

我使用 gdb 调试了小程序。

我有 GRUB 的源代码。GRUB 的第二阶段是用 C 编写的。我可以使用 gdb 调试它吗？

是否可以调试引导加载程序？如果是，那么如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T14:32:22.597

1.  我会检查[bochs](http://bochs.sourceforge.net/)
2.  您还可以将[gdb 与 bochs 一起使用](http://bochs.sourceforge.net/doc/docbook/user/debugging-with-gdb.html)
3.  [OSDev](http://wiki.osdev.org)有大量关于调试引导加载程序的信息

# facebook - Facebook 的 XFBML 版本是否总是要求用户获得应用权限？

> ID：12204839
> 
> 赞同：-1
> 
> 时间：2012-08-30T20:19:32.663
> 
> 标签：facebook, facebook-like, xfbml

我正在考虑是否实现 Facebook 按钮的 XFBML 或 iframe 版本。

XFMBL 是否总是需要向用户请求额外的应用程序权限？

我发现了一些提示，但没有真正明确的答案。如果这是真的，这将是 XFBML 实现的一个主要缺点，因为许多用户都担心安全问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:24:17.653

我现在试过了。至少 HTML5 兼容的 Like & Send Buttons 不需要请求许可。而且您不需要 App ID。

# php - MySQL查询返回负行号

> ID：12204841
> 
> 赞同：0
> 
> 时间：2012-08-30T20:19:35.153
> 
> 标签：php, mysql, sql

好吧，这肯定是一件奇怪的事情。我正在使用 MySQL 来显示一系列警报，并且我正在使用的查询通过警报的级别来区分。该表有五列，但这里使用的是级别列（警报级别：1 - 正常；2 - 中等；3 - 高）。ID 仅用于显示查询的奇怪之处。

奇怪的是当我运行这个查询时，它正常显示：

```
SELECT * FROM `alerttxt` ORDER BY level ASC 
```

当我切换订单时，它会在网页上丢失一个条目，但会显示 PHPMyAdmin 中的所有行......这本身就很奇怪：

```
SELECT * FROM `alerttxt` ORDER BY level DESC 
```

但是在我添加一个额外元素的那一刻：

```
SELECT * FROM `alerttxt` WHERE level = '2' ORDER BY ID ASC 
```

事情变得一团糟。我在 PHPMyAdmin 中运行了同样的查询，也使用 ORDER BY ID DESC，返回如下：

```
 Showing rows 0 - -1 
```

我以前从未见过这种情况，也不太确定如何解决它。其他人以前见过这个并且能够修复它吗？谢谢大家！

2012 年 8 月 31 日添加 - 脾气暴躁

```
ID  level   system     status                           restoretime
0   2       MyISU      System is functioning normally   NULL
1   2       Network    System is functioning normally   NULL
2   1       Blackboard System is functioning normally   NULL
3   3       Email      System is functioning normally   NULL
4   1       Banner     System is functioning normally   NULL 
```

和结构：

```
Column      |  Type         | Null  |  Default
-----------------------------------------------------------------
ID             int(11)        No         
level          varchar(3)     No       1     
system         varchar(255)   No         
status         varchar(755)   No       System is functioning normally    
restoretime    text           Yes      NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:49:08.377

我认为这是 phpMyAdmin 中的一个错误，因为搜索该错误消息和[对该答案](https://stackoverflow.com/a/11694832/1229023)的评论似乎可以确认。而且很容易检查：在 MySQL 控制台中运行您要求的查询。

# c# - 如何从.net代码获取sql管理工作室的exec字符串

> ID：12204843
> 
> 赞同：0
> 
> 时间：2012-08-30T20:19:48.483
> 
> 标签：c#, sql-server, vb.net, debugging, visual-studio-debugging

我正在调试其他人编写的代码，该代码从 C# 代码调用大量存储过程（sql server 2008 r2）。C# 代码如下所示

```
SqlCommand sqlCommand = new SqlCommand(strSP, ConnectionOpen());
sqlCommand.CommandType = CommandType.StoredProcedure;
sqlCommand.CommandTimeout = intTimeOut;
//System.Data.SqlClient.SqlParameter[] prmSQL
if (prmSQL != null)
{
  while (i < prmSQL.Length)
  {
    sqlCommand.Parameters.Add(prmSQL[i]);
    i = i + 1;
  }
}

SqlDataReader sqlReader = sqlCommand.ExecuteReader(); 
```

为了调试我的存储过程，我真的需要 sql management studio 需要的字符串，例如 exec sp_name 参数一，参数二（如果需要字符串和日期，请使用引号。） sql 命令对象不通过某些属性提供此字符串。我知道的唯一方法是在 sql server 上运行 sql profiler 并获取字符串。不幸的是，DBA 不喜欢这样，因为他们说运行分析器会影响性能。你们是否有任何插件或代码片段用于从 c# 代码中获取 sp exec 字符串？获取此字符串的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:37:52.500

Rep 太低（对 StackOverflow 来说仍然是菜鸟）无法发表评论，所以我将其发布为答案。我很抱歉。但是，您可能会考虑查看[SMO](http://msdn.microsoft.com/en-us/library/ms162169%28v=sql.105%29.aspx)。SMO 是可用于与 SQL Server 交互的 .NET 对象模型。使用 SMO，您可以获得对特定[存储过程](http://msdn.microsoft.com/en-us/library/ms220435)的引用 ，然后枚举它的[参数](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.storedprocedure.parameters)。

这可能会帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:53:20.273

您可以使用[NuGet](http://nuget.org/packages/MiniProfiler)上提供的[mvc-mini-profiler 之](http://miniprofiler.com/)类的工具（注意：名称具有误导性；它不仅限于 MVC）。小的澄清 - 因为它包装了连接，你需要使用 abstract而不是，然后你只需调整创建连接的一行代码（可能在某个实用程序类中），即而不是：`DbConnection``SqlConnection`

```
var conn = new SqlConnection(someString);
return conn; 
```

你可能会使用：

```
var conn = new SqlConnection(someString);
return new StackExchange.Profiling.Data.ProfiledDbConnection(
            conn, MiniProfiler.Current); 
```

启用它还有几个其他步骤（全部显示在[站点页面上](http://miniprofiler.com/)），但添加到 MVC 应用程序*实际上需要 2 分钟。*输出是它实时监控启用的用户（开发人员等）的所有活动。我们在 stackoverflow/stackexchange 上 24x7 使用它（意思是：我们非常确定它不会影响性能）。[https://data.stackexchange.com/](https://data.stackexchange.com/)上提供了现场演示- 只需登录，分析数据就在左上角可见。它会自动以可从 SSMS 运行的形式呈现数据，因为*这是我们经常使用它的方式*- 所以：它*呈现*参数，就好像它们是变量声明/初始化一样。

它还可以很好地与 LINQ-to-SQL 和 dapper-dot-net（以及许多其他）等 ORM 配合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:41:16.873

为了构造 EXEC 命令，您需要知道过程使用的参数名称。我相信您可以使用 GetDbSchemaTable 方法找到它们，该方法将检索存储过程 SQL（我使用 MS-Access/OLEDB 完成了此操作，并假设它对 MS-SQL/SqlClient 的工作方式相同）：

```
using (conn == new OleDb.OleDbConnection(DBConnection)) {
    conn.Open();
    DataTable DBObject = conn.GetOleDbSchemaTable(OleDb.OleDbSchemaGuid.Procedures, null);
} 
```

名为“PROCEDURE_DEFINITION”的列包含过程的 SQL，并希望包含参数列表。

您可能还想看看[从数据库中获取模式信息](http://msdn.microsoft.com/en-us/library/kcax58fh(v=vs.71).aspx)。

高温高压

# tfs - VS2012回到正常的TFS签入窗口？

> ID：12204845
> 
> 赞同：86
> 
> 时间：2012-08-30T20:19:54.823
> 
> 标签：tfs, visual-studio-2012

VS2012 似乎删除了 VS2010 中 TFS 签入的弹出窗口。它现在似乎接管了我侧边栏中的团队资源管理器选项卡，并隐藏了重要的东西——比如我更改了哪些文件。VS2012有什么办法可以返回到正常的签到弹出窗口吗？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-01-09T12:02:49.020

对我来说，最好的解决方案是基于 iSid 的回答：添加一个弹出旧对话框的外部工具。您可以从 Visual Studio 执行此操作：**TOOLS -> External Tools... -> Add**，具有以下值：

**标题：**签入（或应显示在菜单中的任何名称）
**命令：** C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\TF.exe（这是 Windows x64 上的默认 VS 安装位置）
**参数：** checkin
**初始目录：** $(SolutionDir)

这是一个屏幕截图：您可以从 TOOLS -> Checkin 调用（或者甚至按[此处](http://msdn.microsoft.com/en-us/library/80cb6ks3(v=vs.110).aspx)
![外部工具对话框](../Images/e33bf77781efd306ee009af0b3d72154.png)

所述为 Tools.ExternalCommand* 分配键盘快捷键）并以新样式享受旧好东西： 请注意，如果解决方案是，这将不起作用没有打开，因为变量。要解决此问题，您可以改为硬编码工作区的路径。 此外，可以使用“搁置”参数调用 tf.exe，这将显示旧式搁置对话框。
![签入对话框](../Images/9857072c09afbc7e7140341aa10300d6.png)

`$(SolutionDir)`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-12T05:42:37.047

使用`tf checkin`Visual Studio 命令提示符中的命令，您将获得相同的旧签入窗口。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-30T20:55:58.327

当`Pending Changes`窗口在 中合并时`Team Explorer`，`Solution Explorer`允许按待签入的内容进行过滤。此外`Open Files`，还可以应用过滤器。应用过滤器时`Pending Changes`，可以选择所有或部分文件并右键单击，然后有一个选项可以进行签入。该命令直接进入`Team Explorer`视图`Pending Changes`。见下文...

![解决方案资源管理器 - 待更改过滤器](../Images/4c0d31308901b7ec2246268f25f52d3d.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-24T14:16:06.910

另一种方法是使用[Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)。此扩展添加了 Windows shell 集成，因此您可以直接从 Windows 中执行大多数 TFS 命令，甚至无需打开 Visual Studio。在 Windows shell 中使用时，Power Tools 使用旧式窗口。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-26T06:42:35.610

我认为最简单的解决方案是将*Team Explorer*选项卡停靠为选项卡式文档（使用右键菜单）。这样它就相当于弹出对话框。

![右键单击选项卡并选择](../Images/aade1d877b430b2e60c7115f03b26ca3.png)

# android - Android - 使用现有数据库进行全文搜索

> ID：12204847
> 
> 赞同：1
> 
> 时间：2012-08-30T20:20:05.590
> 
> 标签：android, database, sqlite, full-text-search

我四处寻找有关如何在 Android 中实现全文搜索的教程和文档。但是，大多数教程都假设您在应用程序加载时创建和填充 SQLite 数据库。

对于我的应用程序，我已经有一个预加载的数据库（即它存储在资产文件夹中，然后在应用程序首次运行时复制过来）——在这种情况下我将如何创建虚拟表？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-15T20:20:19.603

和可以像普通表一样应用于预加载的数据库`CREATE VIRTUAL TABLE`。`INSERTS`然后需要重新打包数据库。

# python - 从 python 程序获取输入的 shell 脚本

> ID：12204857
> 
> 赞同：1
> 
> 时间：2012-08-30T20:21:04.513
> 
> 标签：python, shell, input

我有一个运行 python 程序的 shell 脚本，它有自己的参数：

```
#!/bin/bash
python blah.py var1 var2
./run key 
```

我需要找到一种方法来从 python 程序中检索 key 的内容。我试过让python程序返回值，然后做：

```
key=python blah.py var1 var2 
```

在我的 shell 脚本中，但这不起作用，因为它说 key 在“函数之外”。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:24:58.243

用这个

```
key=`python blah.py var1 var2`
./run $key 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T20:40:52.887

你可以做：

```
./run $( python blah.py var1 var2 ) 
```

该`$( )`语法打开一个子shell，并运行该命令。然后将标准输出输出转储到它的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:47:35.000

一个班轮演示：（
好的，所以它是两行）

```
$ key=`python -c 'print "hi"'`
$ echo $key 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T23:10:34.800

修改python脚本输出变量值的另一种方法`key`是修改python脚本调用`run`程序

```
import subprocess
# ... calculations, and set the "key" variable ...
subprocess.call(["./run", key]) 
```

# c# - 虚拟机显示不工作

> ID：12204858
> 
> 赞同：0
> 
> 时间：2012-08-30T20:21:09.790
> 
> 标签：c#, vm-implementation

我正在使用虚拟机并卡在屏幕上。我的代码

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;
    using System.IO;
    using System.Drawing.Text;
    using System.Drawing.Imaging;

    namespace GW480_VM
    {
public partial class Form1 : Form
{
    private ushort m_ScreenMemoryLocation = 0xA000;
    private byte[] m_ScreenMemory= new byte[3267];
    private string command, location, A = "empty", B = "empty", C = "empty", X = "empty", Y = "empty", Z = "empty";
    private uint[] BARGB = new uint[3267],FARGB = new uint [3267];
    public Form1()
    {
        InitializeComponent();
        for (int i = 0; i < 3267; i++)
        {
            BARGB[i] = 0x000000;
            FARGB[i] = 0xFFFFFF;
            m_ScreenMemory[i] = 32;
        }

        BIOS();

        //   Commands List
        // RUN location
        // DMP 
        // JMP address                                            //TODO
        // LDA
        // LDB
        // LDC
        // LDX
        // LDY
        // LDZ
        // STA
        // ADD                                                    //Mathematics TODO
        // SUB                                                    //Mathematics TODO
        // DIV                                                    //Mathematics TODO
        // MLP                                                    //Mathematics TODO
        // CMP address1 address2 cmpcode                          //TODO
        // POK address value

    }

    public void BIOS()
    {
        //Interpret_DMP(); //Debuging purpose only
        FARGB[0] = 0xFF0000;    //same
        Interpret_POK(0xa000, 65); //same
    }
    public void Interpret(StreamReader OS)
    {

        command = OS.ReadLine();
        if (command.Contains("GW480") == true)
        {
            command = OS.ReadLine();
            String StartAdd = command;
            while ((command = OS.ReadLine()) != null)
            {
                if (command.Contains("RUN"))
                {
                    command.Replace(" RUN ", "");
                    command.Replace(Environment.NewLine, "");
                    Interpret_RUN(command);

                }
                if (command.Contains("DMP"))
                {

                    Interpret_DMP();
                }
                if (command.Contains("LDA"))
                {
                    command.Replace(" LDA ", "");
                    command.Replace(Environment.NewLine, "");
                    A = command;
                }
                if (command.Contains("LDB"))
                {
                    command.Replace(" LDB ", "");
                    command.Replace(Environment.NewLine, "");
                    B = command;
                }
                if (command.Contains("LDC"))
                {
                    command.Replace(" LDC ", "");
                    command.Replace(Environment.NewLine, "");
                    C = command;
                }
                if (command.Contains("LDX"))
                {
                    command.Replace(" LDX ", "");
                    command.Replace(Environment.NewLine, "");
                    X = command;
                }
                if (command.Contains("LDY"))
                {
                    command.Replace(" LDY ", "");
                    command.Replace(Environment.NewLine, "");
                    Y = command;
                }
                if (command.Contains("LDZ"))
                {
                    command.Replace(" LDZ ", "");
                    command.Replace(Environment.NewLine, "");
                    Z = command;
                }
                if (command.Contains("STA"))
                {
                    command.Replace(" STA ", "");
                    command.Replace(Environment.NewLine, "");
                    switch (command)
                    {
                        case "A":
                            A = A;
                            break;
                        case "B":
                            A = B;
                            break;
                        case "C":
                            A = C;
                            break;
                        case "X":
                            A = X;
                            break;
                        case "Y":
                            A = Y;
                            break;
                        case "Z":
                            A = Z;
                            break;
                        default:
                            A = A;
                            break;
                    }
                }
                if (command.Contains("POK"))
                {
                    command.Replace(" POK ", "");
                    string com_copy = command;
                    command.Remove(7);
                    com_copy.Replace(command + " ", "");
                    Interpret_POK(Convert.ToUInt16(command, 8), Convert.ToByte(com_copy, 2));

                }

            }
        }
    }
    public void Interpret_RUN(string location)
    {
        StreamReader RUNapp = new StreamReader(location);
        Interpret(RUNapp);
        RUNapp.Close();
        RUNapp.Dispose();
    }

    public void Interpret_DMP()
    {
        DialogResult result = saveFileDialog1.ShowDialog();
        if (result == DialogResult.OK)
        {
            StreamWriter Dump = new StreamWriter(saveFileDialog1.FileName);
            Dump.WriteLine("Dump Date = " + DateTime.Today);
            Dump.WriteLine("Dump Time = " + DateTime.Now);
            Dump.WriteLine("");
            Dump.WriteLine("");
            Dump.WriteLine("");
            Dump.WriteLine("Registers");
            Dump.WriteLine("");
            Dump.WriteLine("    A   = " + A);
            Dump.WriteLine("    B   = " + B);
            Dump.WriteLine("    C   = " + C);
            Dump.WriteLine("    X   = " + X);
            Dump.WriteLine("    Y   = " + Y);
            Dump.WriteLine("    Z   = " + Z);
            Dump.WriteLine("");
            Dump.WriteLine("");
            Dump.WriteLine("    Current ARGB Values "+Environment.NewLine+Environment.NewLine);
            Dump.WriteLine("Background      " + BARGB.ToString() + Environment.NewLine);
            Dump.WriteLine("Foreground      " + FARGB.ToString() + Environment.NewLine);
            Dump.WriteLine("    Memory Details "+Environment.NewLine+Environment.NewLine);
            for (int i = 0; i < 3267; i++)
            {

                Dump.WriteLine( Convert.ToInt16(i).ToString() + " :" + m_ScreenMemory[i].ToString());
            }
            Dump.WriteLine("DONE " + DateTime.Now);
            Dump.Close();
            Dump.Dispose();
        }
    }

    public void Interpret_POK(ushort Address, byte Value)
    {
        ushort MemLoc;
        try
        {
            MemLoc = (ushort)(Address - m_ScreenMemoryLocation);
        }
        catch (Exception)
        {
            return;
        }
        if (MemLoc < 0 || MemLoc > 3266)
            return;
        m_ScreenMemory[MemLoc] = Value;
        Refresh();
    }

    private void screen_update(object sender, PaintEventArgs e)
    {
        SolidBrush Bgcolor = null;
        SolidBrush Fgcolor = null;

        Bitmap bmp = new Bitmap(640, 480);
        pictureBox1.InitialImage = bmp;
        pictureBox1.Image = bmp;
        Graphics bmp_graphic = Graphics.FromImage(bmp);
        Font writing = new Font("Courier New", 10f, FontStyle.Bold);
        int i;                                                               float xloc=0,yloc=0;

        for (i = 0; i < 3267; i += 2)
        {
            Bgcolor = new SolidBrush(Color.FromArgb(Convert.ToInt32(BARGB[i])));
            Fgcolor = new SolidBrush(Color.FromArgb(Convert.ToInt32(FARGB[i])));
            bmp_graphic.FillRectangle(Bgcolor, xloc, yloc, 20, 25);
            bmp_graphic.DrawString(m_ScreenMemory[i].ToString(), writing, Fgcolor, xloc,yloc);
            xloc += 6;
            if ((xloc % 640) == 0 && xloc != 0) {
                xloc = 0;
                yloc += 11;
            }

            e.Graphics.DrawImage(bmp, 0, 0);
            bmp.Save("test.bmp");  //Debugging purpose
            bmp.Dispose();
            bmp_graphic.Dispose();
        }

    }
}
     } 
```

我不太明白为什么它不起作用。它显示一个白色屏幕，然后在几秒钟内屏幕上出现一个十字标记。显示代码在 screen_update() 函数中。此外，它保存的 test.bmp 始终是黑色的，无论我如何更改 rgb，我都不明白为什么不写入图形。

Himanshu Goel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:39:42.093

我看到的几个问题：

*   您正在处理`Bitmap`循环的内部。
*   将位图设置为图片框可能会导致问题，因为您要立即处理它。为什么在表格上绘图时还要设置图片框？
*   你所有的颜色都是透明的。`Color.FromARGB`期望较高的位是颜色的 alpha 值，并且在您的代码中指定不透明度为 0 的颜色。尝试 0xFF000000 和 0xFFFFFFFF。

# javascript - jquery单击另一个站点上的按钮

> ID：12204859
> 
> 赞同：-1
> 
> 时间：2012-08-30T20:21:11.720
> 
> 标签：javascript, jquery, google-chrome, onclick

我正在尝试制作一个 Google Chrome 应用程序，它会自动打开 YouTube 网站并单击展开按钮或任何按钮。
我尝试使用以下 JavaScript：

`$('#logo').click(); , .trigger('click');`

但什么也没有发生。

有人知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:25:19.927

你点击的东西必须是可点击的。徽标（id="logo-container"）周围有一个链接，您需要单击它，而不是徽标本身。右键单击 chrome 中的徽标，选择检查元素，然后您将看到 img 周围的 <a> 标签是什么。

试试这个：

```
$('#logo-container').click(); 
```

# javascript - Fancybox iFrame 未显示

> ID：12204862
> 
> 赞同：0
> 
> 时间：2012-08-30T20:21:35.010
> 
> 标签：javascript, jquery, iframe, fancybox, modal-dialog

我有以下html的等价物：

```
<ul>
<a class="iframe" href="/posting/form?id=8"><li>Publish</li></a>
</ul> 
```

和以下javascript：

```
 <script>
        $(document).ready(function(e){
            $(".iframe").fancybox();
        });
    </script> 
```

当我单击发布按钮（li 标签）时，什么都没有显示。如果我将 href 链接到不存在的内容（例如 www.adfadfasdf.com），则会显示该框，说它无法检索信息。我究竟做错了什么？

更新：单击发布按钮时出现以下错误：

```
3
Uncaught Error: Syntax error, unrecognized expression: /posting/form?id=8 jquery.min.js:3
m.error jquery.min.js:3
m.filter jquery.min.js:3
m jquery.min.js:3
c.querySelectorAll.m jquery.min.js:3
f.fn.extend.find jquery.min.js:3
e.fn.e.init jquery.min.js:2
e jquery.min.js:2
$.extend._start jquery.fancybox.js:618
$.extend.open jquery.fancybox.js:204
$.fn.fancybox.run jquery.fancybox.js:1441
f.event.dispatch jquery.min.js:3
f.event.add.h.handle.i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:30:29.660

它应该是这样的：

```
<ul>
<li>
<a class="iframe" data-fancybox-type="iframe" href="/posting/form?id=8">Publish</a>
</li>
</ul> 
```

[http://fancyapps.com/fancybox/#examples](http://fancyapps.com/fancybox/#examples)

# tinymce - TinyMCE 转到位置并在需要时滚动

> ID：12204864
> 
> 赞同：4
> 
> 时间：2012-08-30T20:21:39.130
> 
> 标签：tinymce, caret, tinymce-plugins

我正在尝试创建几种方法让 tinyMCE 将光标移动到文本中的某个 SPANS，如果所有跨度都在文本的可见部分中，这可以正常工作，但是对于长文档，当跨度不是时可见（必须滚动才能查看），它会移动插入符号，但文本不会滚动：

这个[问题](https://stackoverflow.com/questions/9178785/tinymce-get-content-up-to-cursor-position)显示了如何移动插入符号，但它不会滚动。如何强制编辑器滚动到插入符号位置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T20:52:11.903

我找到了解决方案，在设置插入符号位置后，添加一些文本，编辑器会自动滚动到新位置：

```
ed.execCommand('mceInsertContent', false, ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-18T06:46:17.590

@leonardorame 的答案有效，但它仅将文本滚动到页面底部的视图中，如下所示：

> ……
> 
> ……
> 
> `|`

如果您希望插入符号位于顶部...

> `|`
> 
> ……
> 
> ……

那么你需要一点额外的：

```
//save the current position
var bm = ed.selection.getBookmark(2, true);

//scroll to the end
ed.selection.select(ed.getBody(), true);
ed.selection.collapse(false);
ed.execCommand('mceInsertContent', false, ");

//scroll back up, so that the caret is now at the top
ed.selection.moveToBookmark(bm);
ed.selection.collapse(false);
ed.execCommand('mceInsertContent', false, ""); 
```

# c# - 何时使用并发锁语句

> ID：12204866
> 
> 赞同：4
> 
> 时间：2012-08-30T20:21:45.340
> 
> 标签：c#, asp.net, concurrency

我无法理解`lock()`在我的代码中使用该语句的方式。我有几个像这样的静态集合：

```
private static Dictionary<string, User>() Users = new Dictionary<string, User>(); 
```

我不断地从这个集合中添加、删除、更新和阅读。我意识到，当我添加、删除或更新时，我应该锁定`Users`，但是当我从集合中读取时，我必须锁定它吗？执行诸如搜索键并`User`在字典中返回的正确方法是什么？我正在考虑创建一个新`Dictionary`实例，然后将用户复制到该实例，然后从中读取，或者我可以直接从中读取吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:24:09.863

这里最好的选择可能是移除锁，并使用`ConcurrentDictionary<string, User>`而不是`Dictionary<string, User>`.

否则，您还需要同步读取。您可以从多个线程中读取，但如果在读者阅读时作家将写入字典，则需要同步。 `ReaderWriterLock`（或`ReaderWriterLockSlim`）在这种情况下工作得很好，因为它们可以允许多个读取器，但只允许一个写入器。一个简单的`lock`也可以，但会比需要的更频繁地阻塞。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T20:24:02.687

> 但是当我从集合中阅读时，我必须锁定它吗？

是的，如果另一个线程可能在读取期间修改字典。

> 执行诸如搜索键并在字典中返回用户之类的正确方法是什么？

使用[TryGetValue](http://msdn.microsoft.com/en-us/library/bb347013.aspx)方法。

如果您使用的是 .Net 4.0 或更高版本，则可以使用[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191%28v=vs.100%29.aspx)集合，它是线程安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T20:23:59.817

如果您正在使用`C# 4.0`或更多，您可以使用处理所有这些内容的[ConcurentDictionary 。](http://msdn.microsoft.com/en-us/library/dd287191.aspx)

如果你没有或`4.0`由于某种原因不能使用，是的，你需要自己实现锁定机制`Read`，`Write`和`Contains`，模拟基本的[ACID](http://en.wikipedia.org/wiki/ACID)原理，比如

*   一致的
*   隔离
*   耐用性。

在这种情况下，不要认为*原子性有什么意义。*

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T20:24:57.643

您可以使用 ConcurrentDictionary

链接：http : [//msdn.microsoft.com/en-us/library/dd287191.aspx](http://msdn.microsoft.com/en-us/library/dd287191.aspx)

# scala - 使用 scala 集合 - CanBuildFrom 麻烦

> ID：12204869
> 
> 赞同：21
> 
> 时间：2012-08-30T20:22:02.410
> 
> 标签：scala, collections

我正在尝试编写一个接受任何类型集合`CC[_]`并将其映射到新集合（相同的集合类型但不同的元素类型）的方法，我正在努力挣扎。基本上我正在尝试实施`map`，但*不是在集合本身上*。

## 问题

我正在尝试实现一个带有签名的方法，它看起来有点像：

```
def map[CC[_], T, U](cct: CC[T], f: T => U): CC[U] 
```

它的用法是：

```
map(List(1, 2, 3, 4), (_ : Int).toString) //would return List[String] 
```

我对一个也可以在哪里起作用的答案感兴趣，`CC`并且`Array`我对我的尝试（如下）最终没有奏效的原因感兴趣。

* * *

## 我的尝试

*（对于不耐烦的人，在接下来的内容中，我完全无法让它发挥作用。重申**一下，问题**是“我怎么能写出这样的方法？”）*

我是这样开始的：

```
scala> def map[T, U, CC[_]](cct: CC[T], f: T => U)(implicit cbf: CanBuildFrom[CC[T], U, CC[U]]): CC[U] = 
     | cct map f
                                                             ^
 <console>:9: error: value map is not a member of type parameter CC[T]
       cct map f
           ^ 
```

好的，这是有道理的 - 我需要说这`CC`是可遍历的！

```
scala> def map[T, U, X, CC[X] <: Traversable[X]](cct: CC[T], f: T => U)(implicit cbf: CanBuildFrom[CC[T], U, CC[U]]): CC[U] = 
     | cct map f
<console>:10: error: type mismatch;
 found   : Traversable[U]
 required: CC[U]
       cct map f
           ^ 
```

错，好！也许如果我真的指定了那个`cbf`实例。毕竟，它将返回类型 ( `To`) 指定为`CC[U]`：

```
scala> def map[T, U, X, CC[X] <: Traversable[X]](cct: CC[T], f: T => U)(implicit cbf: CanBuildFrom[CC[T], U, CC[U]]): CC[U] = 
     | cct.map(t => f(t))(cbf)
<console>:10: error: type mismatch;
 found   : scala.collection.generic.CanBuildFrom[CC[T],U,CC[U]]
 required: scala.collection.generic.CanBuildFrom[Traversable[T],U,CC[U]]
       cct.map(t => f(t))(cbf)
                          ^ 
```

错，好！这是一个更具体的错误。看来我可以用！

```
scala> def map[T, U, X, CC[X] <: Traversable[X]](cct: CC[T], f: T => U)(implicit cbf: CanBuildFrom[Traversable[T], U, CC[U]]): CC[U] = 
     | cct.map(t => f(t))(cbf)
map: [T, U, X, CC[X] <: Traversable[X]](cct: CC[T], f: T => U)(implicit cbf: scala.collection.generic.CanBuildFrom[Traversable[T],U,CC[U]])CC[U] 
```

杰出的。我有我一个`map`！让我们用这个东西！

```
scala> map(List(1, 2, 3, 4), (_ : Int).toString)
<console>:11: error: Cannot construct a collection of type List[java.lang.String] with elements of type java.lang.String based on a collection of type Traversable[Int].
              map(List(1, 2, 3, 4), (_ : Int).toString)
                 ^ 
```

说什么？

* * *

## 观察

*我真的不禁认为托尼莫里斯当时对此的观察绝对是正确的。他说什么？他说“**不管是什么，它都不是地图**”。看看这在 scalaz-style 中是多么容易*：

```
scala> trait Functor[F[_]] { def fmap[A, B](fa: F[A])(f: A => B): F[B] }
defined trait Functor

scala> def map[F[_]: Functor, A, B](fa: F[A], f: A => B): F[B] = implicitly[Functor[F]].fmap(fa)(f)
map: [F[_], A, B](fa: F[A], f: A => B)(implicit evidence$1: Functor[F])F[B] 
```

*然后*

```
scala> map(List(1, 2, 3, 4), (_ : Int).toString)
<console>:12: error: could not find implicit value for evidence parameter of type Functor[List]
              map(List(1, 2, 3, 4), (_ : Int).toString)
                 ^ 
```

*以便*

```
scala> implicit val ListFunctor = new Functor[List] { def fmap[A, B](fa: List[A])(f: A => B) = fa map f }
ListFunctor: java.lang.Object with Functor[List] = $anon$1@4395cbcb

scala> map(List(1, 2, 3, 4), (_ : Int).toString)
res5: List[java.lang.String] = List(1, 2, 3, 4) 
```

给自己的备忘录：**听托尼的！**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-31T13:53:40.263

您遇到的不一定是`CanBuildFrom`它本身，也不一定是`Array`vs.`Seq`问题。您遇到`String`的*不是*高种，而是支持`map`它`Char`的 s。

**SO：首先是对 Scala 集合设计的题外话。**

您需要的是一种推断集合类型（例如`String`, `Array[Int]`）`List[Foo]`和元素类型（例如`Char`, `Int`，`Foo`对应于上述内容）的方法。

Scala 2.10.x 添加了一些“类型类”来帮助您。例如，您可以执行以下操作：

```
class FilterMapImpl[A, Repr](val r: GenTraversableLike[A, Repr]) {
  final def filterMap[B, That](f: A => Option[B])(implicit cbf: CanBuildFrom[Repr, B, That]): That =
    r.flatMap(f(_).toSeq)
 }
 implicit def filterMap[Repr, A](r: Repr)(implicit fr: IsTraversableOnce[Repr]): FilterMapImpl[fr.A,Repr] =
   new FilterMapImpl(fr.conversion(r)) 
```

这里有两块。首先，使用集合的类需要两个类型参数：集合的特定类型`Repr`和元素的类型`A`。

接下来，您定义一个仅采用集合类型的隐式方法`Repr`。您使用`IsTraversableOnce`(注意：还有一个`IsTraversableLike`) 来捕获该集合的元素类型。您会在类型签名中看到它`FilterMapImpl[Repr, fr.A]`。

现在，部分原因是因为 Scala 没有对所有“类仿函数”操作使用相同的类别。具体来说，`map`是一个有用的方法`String`。我可以调整所有字符。但是，`String`只能是一个`Seq[Char]`。如果我想定义一个`Functor`，那么我的类别只能包含类型`Char`和箭头`Char => Char`。此逻辑在`CanBuildFrom`. 但是，由于 a`String`是 a `Seq[Char]`，如果您尝试在's方法`map`支持的类别中使用 a ，那么将更改您对.`Seq``map``CanBuildFrom``map`

我们本质上是在为我们的类别定义一种“继承”关系。如果您尝试使用该`Functor`模式，我们会将类型签名放到我们可以保留的最具体的类别中。随心所欲地称呼它；这是当前系列设计的一大动力。

**结束题外话，回答问题**

现在，因为我们试图同时推断出*很多*类型，我认为这个选项的类型注释最少：

```
import collection.generic._

def map[Repr](col: Repr)(implicit tr: IsTraversableLike[Repr]) = new {
  def apply[U, That](f: tr.A => U)(implicit cbf: CanBuildFrom[Repr, U, That]) = 
    tr.conversion(col) map f
}

scala> map("HI") apply (_ + 1 toChar )
warning: there were 2 feature warnings; re-run with -feature for details
res5: String = IJ 
```

这里要注意的重要一点是`IsTraversableLike`捕获从`Repr`到的转换`TraversableLike`，使您可以使用该`map`方法。

**选项 2**

我们还对方法调用进行了一些拆分，以便 Scala 可以在定义匿名函数之前`Repr`推断类型。`U`为了避免匿名函数上的类型注释，我们必须在它出现之前*知道所有类型。*现在，我们仍然可以让 Scala 推断某些类型，但是如果我们这样做，就会丢失*隐含的东西：* `Traversable`

```
import collection.generic._
import collection._
def map[Repr <: TraversableLike[A, Repr], A, U, That](col: Repr with TraversableLike[A,Repr])(f: A => U)(implicit cbf: CanBuildFrom[Repr, U, That]) = 
    col map f 
```

请注意，我们必须使用`Repr with TraversableLike[A,Repr]`. 似乎大多数 F 有界类型都需要这种杂耍。

无论如何，现在让我们看看扩展的东西会发生什么`Traversable`：

```
scala> map(List(40,41))(_ + 1 toChar )
warning: there were 1 feature warnings; re-run with -feature for details
res8: List[Char] = List(), *) 
```

那太棒了。但是，如果我们想要和 相同的用法`Array`，`String`我们必须做更多的工作：

```
scala> map(Array('H', 'I'): IndexedSeq[Char])(_ + 1 toChar)(breakOut): Array[Char]
warning: there were 1 feature warnings; re-run with -feature for details
res14: Array[Char] = Array(I, J)

scala> map("HI": Seq[Char])(_ + 1 toChar)(breakOut) : String
warning: there were 1 feature warnings; re-run with -feature for details
res11: String = IJ 
```

这种用法有两个部分：

1.  我们必须使用类型注释来进行`String`/ `Array`→ `Seq`/的隐式转换`IndexedSeq`。
2.  我们必须使用`breakOut`我们的`CanBuildFrom`和类型注释的预期返回值。

这仅仅是因为类型`Repr <: TraversableLike[A,Repr]`不包括`String`or `Array`，因为它们使用隐式转换。

**选项 3**

您可以将所有隐式放在最后，并要求用户注释类型。不是最优雅的解决方案，所以我想我会避免发布它，除非你真的很想看到它。

所以，基本上如果你想包含`String`和`Array[T]`作为集合，你必须跳过一些箍。map 的这个类别限制适用于 Scala 中 的`String`和函子。`BitSet`

我希望这会有所帮助。如果您还有任何问题，请联系我。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-30T23:05:22.433

其实里面有几个问题...

让我们从您的最后一次尝试开始：

```
scala> def map[T, U, X, CC[X] <: Traversable[X]](cct: CC[T], f: T => U)
 (implicit cbf: CanBuildFrom[Traversable[T], U, CC[U]]): CC[U] = 
  cct.map(t => f(t))(cbf) 
```

这个确实可以编译但不起作用，因为根据您的类型签名，它必须寻找一个隐含`CanBuildFrom[Traversable[Int], String, List[String]]`的范围，而没有一个。如果您要手动创建一个，它会起作用。

现在之前的尝试：

```
scala> def map[T, U, X, CC[X] <: Traversable[X]](cct: CC[T], f: T => U)
 (implicit cbf: CanBuildFrom[CC[T], U, CC[U]]): CC[U] = 
  cct.map(t => f(t))(cbf)
<console>:10: error: type mismatch;
 found   : scala.collection.generic.CanBuildFrom[CC[T],U,CC[U]]
 required: scala.collection.generic.CanBuildFrom[Traversable[T],U,CC[U]]
       cct.map(t => f(t))(cbf)
                          ^ 
```

这个不能编译，因为隐式`CanBuildFrom`in`Traversable`被硬编码为只接受 a`Traversable`作为`From`集合。但是，正如在另一个答案中指出的那样，`TraversableLike`知道实际的集合类型（它是它的第二个类型参数），所以它`map`用正确的方式定义`CanBuildFrom[CC[T], U, CC[U]]`并且每个人都很高兴。实际上，`TraversableLike`从 继承这个`map`方法`scala.collection.generic.FilterMonadic`，所以这更通用：

```
scala> import scala.collection.generic._
import scala.collection.generic._

scala> def map[T, U, CC[T] <: FilterMonadic[T, CC[T]]](cct: CC[T], f: T => U)
 |  (implicit cbf:  CanBuildFrom[CC[T], U, CC[U]]): CC[U] = cct.map(f)
warning: there were 1 feature warnings; re-run with -feature for details
map: [T, U, CC[T] <: scala.collection.generic.FilterMonadic[T,CC[T]]](cct: CC[T], f: T => U)(implicit cbf: scala.collection.generic.CanBuildFrom[CC[T],U,CC[U]])CC[U]

scala> map(List(1,2,3,4), (_:Int).toString + "k")
res0: List[String] = List(1k, 2k, 3k, 4k) 
```

最后，上面的内容不适用于数组，因为`Array`不是`FilterMonadic`. 但是有一个从`Array`to的隐式转换`ArrayOps`，后者实现了`FilterMonadic`。因此，如果您在其中添加一个绑定视图，您也会得到适用于数组的东西：

```
scala> import scala.collection.generic._
import scala.collection.generic._

scala> def map[T, U, CC[T]](cct: CC[T], f: T => U)
 |  (implicit cbf:  CanBuildFrom[CC[T], U, CC[U]], 
 |   ev: CC[T] => FilterMonadic[T,CC[T]]): CC[U] = cct.map(f)
warning: there were 1 feature warnings; re-run with -feature for details
map: [T, U, CC[T]](cct: CC[T], f: T => U)(implicit cbf: scala.collection.generic.CanBuildFrom[CC[T],U,CC[U]], implicit ev: CC[T] => scala.collection.generic.FilterMonadic[T,CC[T]])CC[U]

scala> map(List(1,2,3,4), (_:Int).toString + "k")
res0: List[String] = List(1k, 2k, 3k, 4k)

scala> map(Array(1,2,3,4), (_:Int).toString + "k")
res1: Array[String] = Array(1k, 2k, 3k, 4k) 
```

**编辑：** 还有一种方法可以使它适用于`String`和 co：只需删除输入/输出集合中的较高类型，在中间使用第三个：

```
def map[T, U, From, To, Middle](cct: From, f: T => U)
 (implicit ev: From => FilterMonadic[T, Middle], 
  cbf: CanBuildFrom[Middle,U,To]): To = cct.map(f) 
```

这适用于`String`甚至适用于`Map[A,B]`：

```
scala> map(Array(42,1,2), (_:Int).toString)
res0: Array[java.lang.String] = Array(42, 1, 2)

scala> map(List(42,1,2), (_:Int).toString)
res1: List[java.lang.String] = List(42, 1, 2)

scala> map("abcdef", (x: Char) => (x + 1).toChar)
res2: String = bcdefg

scala> map(Map(1 -> "a", 2 -> "b", 42 -> "hi!"), (a:(Int, String)) => (a._2, a._1))
res5: scala.collection.immutable.Map[String,Int] = Map(a -> 1, b -> 2, hi! -> 42) 
```

用 2.9.2 测试。但正如 jsuereth 所指出的，`IsTraversableLike`2.10 中的精彩之处更适合于此。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-30T20:57:57.523

是这个吗？

```
def map[A,B,T[X] <: TraversableLike[X,T[X]]]
  (xs: T[A])(f: A => B)(implicit cbf: CanBuildFrom[T[A],B,T[B]]): T[B] = xs.map(f)

map(List(1,2,3))(_.toString)
// List[String] = List(1, 2, 3) 
```

另请参阅[此问题](https://stackoverflow.com/questions/8609398/returning-same-collection-type-differently-parameterised)。

# security - 我可以阻止本地用户窥探包含管理员密码的 HTTPS 标头吗？

> ID：12204871
> 
> 赞同：0
> 
> 时间：2012-08-30T20:22:07.027
> 
> 标签：security, hash, https, passwords, bcrypt

我的程序通过 SSL 向网页发送请求，并且在标头 (https://example.com/index.php?clientid=xxxx?spcode=xxxx) 中是管理员密码，用于确定它们是否是在我向他们发送一堆数据之前，我的系统。

如果流氓员工通过窥探本地 SSL 数据来获取此密码，那么他可能会在猜测订单号（不难）时玩弄客户订单的发送和接收。

我知道如何使用 bcrypt 在我的系统上保护某人的密码。*但是当别人*使用他们的系统时，我如何保护别人的密码呢？

我知道您不应该冒着泄露盐分的风险发送预先散列的密码。我是否应该使用一些软的临时传输散列（与我将其存储在数据库中的散列不同）。我认为这不是最好的方法，所以我向大家寻求帮助。我在 Stack Exchange 找到了一些很棒的技巧。

提前感谢大家的时间。我期待着你的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T20:31:09.003

SSL 上的窥探只能由中间人完成，并且可以检测到。

考虑一下如果你在 fiddler 中这样做，浏览器会如何通过抱怨证书来做出反应。当然，既然你相信你不会监视你，那你没事吧！

相比之下，您将看到您没有与具有正确证书的服务器打交道。如果您的应用程序拒绝处理其他证书，那么它将不允许建立 SSL 连接，并且没有窥探。

不过，我仍然建议按照 RFC 2617、NTLM 等在身份验证标头中发送密码。特别是如果您稍后还要在同一系统上执行服务器到浏览器，并且不希望它们从地址栏中被窥探。

编辑：根据您编写应用程序的内容，它可能会暂时允许窥探以进行调试，这证明更棘手！

# android - SQlite 语法错误我不知道出了什么问题

> ID：12204874
> 
> 赞同：1
> 
> 时间：2012-08-30T20:22:21.517
> 
> 标签：android, sql, database, sqlite

我想知道我的 sql 语法有什么问题。它在 mysql 上工作，但对于 sqlite 给我错误。

```
CREATE TABLE IF NOT EXISTS `points` (
                                     `id` int(11) NOT NULL AUTO_INCREMENT, 
                                     `name` varchar(50) CHARACTER SET latin1 NOT NULL, 
                                     `longitude` double NOT NULL, 
                                     `latitude` double NOT NULL, 
                                     `radius` double NOT NULL, 
                                     `image` blob NOT NULL, 
                                     PRIMARY KEY (`id`)
                                    ) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_persian_ci AUTO_INCREMENT=4;

INSERT INTO `points` (`id`, `name`, `longitude`, `latitude`, `radius`, `image`) 
VALUES      (1, 'Isfahan, Iran', 51.678314, 32.65036, 0.064486, 
             0xffd8ffe000104a46494600010001009600960000fffe001f4c45414420546563686e6f6c6f6769657320496e632e2056312e303100ffdb008400100b0c0e0c0a100e0d0e1211101318281a181616183123251d283b343e3d3a34393841495d4f414558463839516f52586063696a693f4e737b72667a5d676964011112121815182f1a1a2f644339436464646464646464646464646464646464646464646464646464646464646464646464646464646464646464646464646464ffc4003000000203010000000000000000000000000001020304050101010101010100000000000000000000000102030405ffc20011 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:33:01.843

1.  应该是`AUTOINCREMENT`一个字。

2.  您不需要此语句：`ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_persian_ci AUTO_INCREMENT=4;`这是 MySQL 特定的。此外，如果您将自动增量值设置为从 5 开始，则不应插入值等于 1 的 id。

3.  在插入语句之后似乎没有右括号。

您应该尝试：

```
CREATE TABLE IF NOT EXISTS `points` (
                                     `id` INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, 
                                     `name` varchar(50) CHARACTER SET latin1 NOT NULL, 
                                     `longitude` double NOT NULL, 
                                     `latitude` double NOT NULL, 
                                     `radius` double NOT NULL, 
                                     `image` blob NOT NULL
                                    );

INSERT INTO `points` (`id`, `name`, `longitude`, `latitude`, `radius`, `image`) 
VALUES      (1, 'Isfahan, Iran', 51.678314, 32.65036, 0.064486, 
             0xffd8ffe000104a46494600010001009600960000fffe001f4c45414420546563686e6f6c6f6769657320496e632e2056312e303100ffdb008400100b0c0e0c0a100e0d0e1211101318281a181616183123251d283b343e3d3a34393841495d4f414558463839516f52586063696a693f4e737b72667a5d676964011112121815182f1a1a2f644339436464646464646464646464646464646464646464646464646464646464646464646464646464646464646464646464646464ffc4003000000203010000000000000000000000000001020304050101010101010100000000000000000000000102030405ffc20011); 
```

可能还需要更多修复。虽然 SQLite 可以识别反勾号，但它是 MySQL 特定的引用。

# macos - CoffeeScript 和蛋糕

> ID：12204877
> 
> 赞同：4
> 
> 时间：2012-08-30T20:22:36.910
> 
> 标签：macos, coffeescript, osx-mountain-lion

我在我的机器上安装了 CoffeeScript，`npm install -g coffee-script`当我检查蛋糕版本时收到以下消息：

```
$ coffee -v
CoffeeScript version 1.3.3
[~]
$ cake -v
path.existsSync is now called `fs.existsSync`.

/usr/local/share/npm/lib/node_modules/coffee-script/lib/coffee-script/cake.js:108
    throw new Error("Cakefile not found in " + (process.cwd()));
          ^
Error: Cakefile not found in /Users/Phil
    at cakefileDirectory (/usr/local/share/npm/lib/node_modules/coffee-script/lib/coffee-script/cake.js:108:11)
    at cakefileDirectory (/usr/local/share/npm/lib/node_modules/coffee-script/lib/coffee-script/cake.js:106:14)
    at cakefileDirectory (/usr/local/share/npm/lib/node_modules/coffee-script/lib/coffee-script/cake.js:106:14)
    at Object.exports.run (/usr/local/share/npm/lib/node_modules/coffee-script/lib/coffee-script/cake.js:49:19)
    at Object.<anonymous> (/usr/local/share/npm/lib/node_modules/coffee-script/bin/cake:7:38)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10) 
```

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T18:58:33.693

这里有两个问题。

第一个是一个已知问题，它会导致：

```
path.existsSync is now called `fs.existsSync` 
```

您可以在此处找到有关此问题的更多信息： [https ://github.com/jashkenas/coffee-script/pull/2411](https://github.com/jashkenas/coffee-script/pull/2411)

如拉取请求中所述，它应该在咖啡脚本主分支中修复。因此，您可以从 GitHub 下载最新的源代码，它应该可以为您解决问题。

否则，尝试安装旧版本的节点： [http ://nodejs.org/dist/v0.6.6/](http://nodejs.org/dist/v0.6.6/)

在其他答案中解决的第二个问题是在您运行 cake 命令的目录中需要一个 Cakefile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T15:53:24.033

我在 cakephp3 中有类似的问题。上述解决方案无效。我试图从命令行烘焙插件。

> cake bake Plugin PageManager

收到上述错误后，我将命令更改为跟随，它就像一个魅力。

> ./cake bake plugin PageManager

希望对和我有类似问题的人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T14:45:08.060

Cakefile 应该存在于您调用 cake 的目录中

# geolocation - 最准确的城市级 GeoIP 跟踪服务？

> ID：12204887
> 
> 赞同：2
> 
> 时间：2012-08-30T20:23:19.257
> 
> 标签：geolocation, geoip

任何人都可以提供可以将用户定位到城市的高度准确的 GeoIP 服务的建议吗？

目前我正在使用 MaxMind GeoLite，但它的准确率只有 78%。甚至他们的溢价也只有80%。

我希望在基于 IP 的城市查找中找到大于 90% 的准确度。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-14T11:28:19.177

我自己一直在研究这个，但由于有这么多，我只能建议你看看这篇冗长的博客文章：

[https://medium.com/@ipdata_co/what-is-the-best-commercial-ip-geolocation-api-d8195cda7027](https://medium.com/@ipdata_co/what-is-the-best-commercial-ip-geolocation-api-d8195cda7027)

它来自一家供应商，但他们比较其他优惠。

# css - 如何安装指南针代码以拆分 IE 选择器限制的样式表

> ID：12204900
> 
> 赞同：5
> 
> 时间：2012-08-30T20:24:11.453
> 
> 标签：css, internet-explorer-8, compass-sass

IE 8 及更低版本对单个样式表中允许的选择器数量有限制，一旦达到限制，就需要拆分样式表。显然有人在 Compass 中通过创建一种让 Compass 自动执行此操作的方法来解决此问题，并为此创建了一个要点。但是，我不具备知道下一步是什么的技能，并且关于如何处理此代码的文档几乎没有。任何人都可以帮助如何将其集成到我的 Compass 安装中吗？

参考：[https ://gist.github.com/1131536](https://gist.github.com/1131536)

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:22:24.563

值得一提的是，有一个名为[Bless](http://blesscss.com/)的 Node.js 应用程序将为您提供此功能。它可以在服务器端或本地机器上运行。

如果你碰巧使用[CodeKit](http://incident57.com/codekit/)来编译你的 Sass/Compass 文件，它已经内置了，你只需要在项目设置中启用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-07T16:14:32.130

在 sass 项目的根目录下的***config.rb***文件旁边创建**css_spliter.rb**文件（如**[Ref中所述）。](https://gist.github.com/ChristianPeters/1131536)**

 ****在config.rb***文件的开头添加以下行

```
require 'css_splitter' 
```

并在末尾添加以下 3 行（的***config.rb***）

```
on_stylesheet_saved do |path|
  CssSplitter.split(path) unless path[/\d+$/]
end 
```

然后`compass compile`像往常一样运行。您不会看到文件***myFile_2.css***，***myFile_3.css***，... 出现在日志中，但它们在您的 css 文件夹中创建得很好。该命令`compass clean`也不会删除它们，您必须从您的***css/***文件夹中手动删除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T12:10:44.570

我认为 css_splitter 解决方案忘记从第一个文件中删除代码。现在我有 2 个文件，第一个是我所有的 css，第二个生成的文件有原始文件的第二半。所以我的 CSS 数量是以前的 150%……不过我确实在 IE 中解决了我的问题 :)*

# php - PHP中需要日期时间的相对格式

> ID：12204904
> 
> 赞同：0
> 
> 时间：2012-08-30T20:24:28.163
> 
> 标签：php, datetime, timestamp

我试图在时间戳中找到每月的第 n 天，如下所示：

```
$day = 15;

$date = new DateTime('@' . $timestamp);
$date->modify($day . ' day of current month'); 
```

这会产生一个错误：

```
Warning: DateTime::modify(): Failed to parse time string (15 day of current month) at position 7 
```

我也试过“本月的第 15 天”，但这不起作用。

如何修改我的“修改”以在时间戳中找到当月的第 n 天？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:37:29.463

首先检索该月的第一天，然后添加所需的天数。

```
$date = new DateTime('first day of ' . date("Y-m-d", $timestamp));
$date->modify('+' . ($day-1) . 'days'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:34:52.597

您可以将 php 的 date() 格式化功能与硬设置的“day”值一起使用（根据需要进行调整）：

```
<?php
$timestamp = time();
$format = date('Y-15-M', $timestamp);
$fifteenth = strtotime($format);
echo "15th was a " . date("D", $fifteenth) . "\n"; 
```

# java - JPA 连接两个辅助表

> ID：12204906
> 
> 赞同：2
> 
> 时间：2012-08-30T20:24:39.740
> 
> 标签：java, hibernate, jpa, spring-data-jpa

我有这五张桌子：

```
REF_CT          REF_CT_L        REF_ST        REF_ST_L
======          ========        ======        ========
CT_ID           CT_ID           ST_ID         ST_ID
ST_ID           LANGUAGE_ID     NAME          LANGUAGE_ID
NAME            NAME            REF_CODE      NAME
REF_CODE        DESCRIPTION                   DESCRIPTION

REF_LANGUAGE
============
LANGUAGE_ID
LOCALE_CODE
NAME 
```

通过使用 JPA，我创建了这三个实体类：

1.  类 common.contact.City

    ```
    @Entity
    @Table(name = "REF_CT")
    @SecondaryTable(name = "REF_CT_L")
    public class City implements Reference {
       @Id
       @Column(name = "CT_ID")
       @TableGenerator(name = "TABLE_GEN", table = "SYS_SEQ",
            pkColumnName = "SEQ_NAME", valueColumnName = "SEQ_VALUE", pkColumnValue =   "CITY_SEQ")
       @GeneratedValue(strategy = GenerationType.TABLE, generator = "TABLE_GEN")
       private Integer id;

       @Column(name = "NAME")
       private String name;

       @Column(table = "REF_CT_L", name = "NAME")
       private String value;

       @Column(name = "REF_CODE")
       private String refCode;

       @ManyToOne(targetEntity = Language.class)
       @JoinColumn(table = "REF_CT_L", name = "LANGUAGE_ID")
       private Language language;

       @ManyToOne(targetEntity = State.class, optional = true)
       @JoinColumn(name = "ST_ID", referencedColumnName = "ST_ID")
       private State state; 
    ```

2.  类 common.contact.State

    ```
    @Entity
    @Table(name = "REF_ST")
    @SecondaryTable(name = "REF_ST_L")
    public class State implements Reference {
       @Id
       @Column(name = "ST_ID")
       @TableGenerator(name = "TABLE_GEN", table = "SYS_SEQ",
            pkColumnName = "SEQ_NAME", valueColumnName = "SEQ_VALUE", pkColumnValue = "STATE_SEQ")
       @GeneratedValue(strategy = GenerationType.TABLE, generator = "TABLE_GEN")
       private Integer id;

       @Column(name = "NAME")
       private String name;

       @Column(table = "REF_ST_L", name = "NAME")
       private String value;

       @Column(name = "REF_CODE")
       private String refCode;

       @OneToMany(targetEntity = City.class, mappedBy = "state")
       private Set<City> cities;

       @ManyToOne(targetEntity = Language.class)
       @JoinColumn(table = "REF_ST_L", name = "LANGUAGE_ID", unique = true, referencedColumnName = "LANGUAGE_ID")
       private Language language; 
    ```

3.  类 common.system.Language

    ```
    @Entity
    @Table(name = "SYS_LANGUAGE")
    public class Language implements BaseEntity {
       @Id
       @Column(name = "LANGUAGE_ID")
       @TableGenerator(name = "TABLE_GEN", table = "SYS_SEQ",
            pkColumnName = "SEQ_NAME", valueColumnName = "SEQ_VALUE", pkColumnValue = "LANGUAGE_SEQ")
       @GeneratedValue(strategy = GenerationType.TABLE, generator = "TABLE_GEN")
       private Integer id;

       @Column(name = "LOCALE_CODE")
       private String locale;

       @Column(name = "NAME")
       private String name; 
    ```

但是当我尝试运行这个查询时

```
select city from City city where city.id = 1 
```

我收到此错误：

```
org.hibernate.HibernateException: More than one row with the given identifier was found: 10, for class: common.contact.State 
```

仅供参考，添加以下数据：

REF_CT

```
CT_ID    ST_ID    NAME    REF_CODE
=====    =====    ====    ========
  1        10    CHERAS     CHE 
```

REF_CT_L

```
CT_ID    LANGUAGE_ID    NAME       DESCRIPTION
=====    ===========    ====       ===========
  1           1      BANDAR CHERAS  CHERAS BARU
  1           2      CHERAS TOWN    NEW CHERAS 
```

REF_ST

```
ST_ID    NAME     REF_CODE
=====    ====     ========
  10    SELANGOR    SEL 
```

REF_ST_L

```
ST_ID    LANGUAGE_ID     NAME      DESCRIPTION
=====    ===========     ====      ===========
  10          1        SELANGOR    SELANGOR BARU
  10          2        SERIANGOR   NEW SERIANGOR 
```

参考语言

```
LANGUAGE_ID    LOCALE_CODE    NAME
===========    ===========    ====
     1           ms_En       Malay
     2           en_US       English 
```

生成的 SQL 是：

```
SELECT state0_.st_id AS st1_50_0_,
       state0_.NAME AS name50_0_, state0_.ref_code AS ref4_50_0_,
       state0_1_.language_id AS language2_51_0_, state0_1_.NAME AS name51_0_
  FROM ref_st state0_ LEFT OUTER JOIN ref_st_l state0_1_
       ON state0_.st_id = state0_1_.st_id
 WHERE state0_.st_id = 10; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T14:07:35.787

“REF_ST”与“REF_ST_L”是一对多的关系。这意味着“REF_ST_L”不能映射为辅助表（这意味着一对一的关系）。

相同的逻辑对“REF_CT”->“REF_CT_L”有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:30:49.850

您的代码正在生成 LEFT JOIN，因为您将 City -> State 关系设置为可选。将其更改为不可为空，您应该得到一个内部联接，它应该解决返回的多行。

common.contact.City ->

```
@ManyToOne(targetEntity = State.class, optional = false)
@JoinColumn(name = "ST_ID", referencedColumnName = "ST_ID", nullable = false)
private State state; 
```

# api - 如何在亚马逊产品 API 中获取正确的报价或报价的正确 URL

> ID：12204907
> 
> 赞同：0
> 
> 时间：2012-08-30T20:24:44.977
> 
> 标签：api, amazon, product

尝试使用亚马逊产品 API。很多代码工作，但有一个问题，当获得最低价格时，我得到例如 0.01 美元。好的，使用 response.item.DetailPageURL 在 URL 附近输出，获取 URL 不以 0.01 美元的价格提供，而是以其他价格（0.70 美元）提供。因此，深入研究后，我发现 0.01 美元的报价要额外支付 5 美元的运费。0.70 美元的报价看起来最低，因为它可以免费送货。所以，我想知道如何获得价格为 0.01 美元的 URL，所以我输出最低价格和 URL，或者如何获得价格 0.70 美元并保留现在的链接？如何从一个报价中制作 URL 和价格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T19:52:18.907

我已经深入研究了这个问题，发现无法选择亚马逊将发送给我的报价作为回应。唯一的方法是从此路径 item.Offers.Offer.OfferListing.Price.FormattedPrice 中显示价格，并对该项目的所有优惠给予类似的评价。因此，您将获得价格，例如 0.01 美元，并链接到所有报价，其中首先是总价（包括运费）的最佳报价，但页面顶部的商品价格将如您在您这边描述的 0.01 美元。

# actor - Akka :: 在 ActorSystem 中使用具有不同优先级的消息而不是事件流

> ID：12204909
> 
> 赞同：5
> 
> 时间：2012-08-30T20:24:56.150
> 
> 标签：actor, akka, publish-subscribe, priority-queue

我需要将不同类型的消息发布到事件流，这些消息应该有不同的优先级，例如，如果已经发布了 10 条 A 类型的消息，并且毕竟发布了一条 B 类型的消息，并且 B 的优先级高于A 的优先级 - 即使队列中有 10 条 A 类型的消息，消息 B 也应该由下一个参与者获取。

我在[这里](http://doc.akka.io/docs/akka/2.0.3/scala/dispatchers.html#Mailboxes)阅读了有关优先消息的信息，并创建了该邮箱的简单实现：

```
 class PrioritizedMailbox(settings: Settings, cfg: Config) extends UnboundedPriorityMailbox(

    PriorityGenerator {
      case ServerPermanentlyDead => println("Priority:0"); 0
      case ServerDead => println("Priority:1"); 1
      case _ => println("Default priority"); 10
    }

  ) 
```

然后我在 application.conf 中配置它

```
akka {

    actor {

        prio-dispatcher {
            type = "Dispatcher"
            mailbox-type = "mailbox.PrioritizedMailbox"
        }

    }

} 
```

并连接到我的演员：

```
private val myActor = actors.actorOf(
  Props[MyEventHandler[T]].
    withRouter(RoundRobinRouter(HIVE)).
    withDispatcher("akka.actor.prio-dispatcher").
    withCreator(
    new Creator[Actor] {
      def create() = new MyEventHandler(storage)
    }), name = "eventHandler") 
```

我正在使用 ActorSystem.eventStream.publish 来发送消息，并且我的演员订阅了它（我可以在日志中看到消息已被处理，但按 FIFO 顺序）。

但是看起来这还不够，因为在日志/控制台中我从未见过像“默认优先级”这样的消息。我在这里错过了什么吗？所描述的方法是否适用于事件流或仅适用于在参与者上发送消息的直接调用？以及如何使用 eventStream 获取优先消息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T11:41:47.803

您的问题是您的演员速度非常快，因此消息在他们有时间排队之前就得到了处理，因此邮箱无法进行任何优先级排序。下面的例子证明了这一点：

```
 trait Foo 
  case object X extends Foo 
  case object Y extends Foo 
  case object Z extends Foo 

  class PrioritizedMailbox(settings: ActorSystem.Settings, cfg: Config) 
extends UnboundedPriorityMailbox( 
    PriorityGenerator { 
      case X ⇒ 0 
      case Y ⇒ 1 
      case Z ⇒ 2 
      case _ ⇒ 10 
    }) 

val s = ActorSystem("prio", com.typesafe.config.ConfigFactory.parseString( 
        """ prio-dispatcher { 
        type = "Dispatcher" 
          mailbox-type = "%s" 
        }""".format(classOf[PrioritizedMailbox].getName))) 
      val latch = new java.util.concurrent.CountDownLatch(1) 
      val a = s.actorOf(Props(new akka.actor.Actor { 
        latch.await // Just wait here so that the messages are queued up 
inside the mailbox 
        def receive = { 
          case any ⇒ /*println("Processing: " + any);*/ sender ! any 
        } 
      }).withDispatcher("prio-dispatcher")) 
      implicit val sender = testActor 
      a ! "pig" 
      a ! Y 
      a ! Z 
      a ! Y 
      a ! X 
      a ! Z 
      a ! X 
      a ! "dog" 

      latch.countDown() 

      Seq(X, X, Y, Y, Z, Z, "pig", "dog") foreach { x => expectMsg(x) } 
      s.shutdown() 
```

该测试以优异的成绩通过

# html - CSS渐变带问题？

> ID：12204912
> 
> 赞同：2
> 
> 时间：2012-08-30T20:25:00.987
> 
> 标签：html, gradient, css

我一直试图在 CSS 中制作一个看起来很酷的渐变，但我遇到了一个不可接受的问题。CSS渐变是带状的，看起来不太好。我也不想使用任何图像。这是我的代码：

```
background-image: -moz-linear-gradient(top, #333, #000);
background-image: -ms-linear-gradient(top, #333, #000);
background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#333), to(#000));
background-image: -webkit-linear-gradient(top, #333, #000);
background-image: -o-linear-gradient(top, #333, #000);
background-image: linear-gradient(top, #333, #000);
filter: progid:dximagetransform.microsoft.gradient(startColorstr='#333', endColorstr='#000', GradientType=0); 
```

我能做些什么来解决这个问题？

![在此处输入图像描述](../Images/37c739033012e62496020b5b3deb852d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:36:22.807

对于它的价值，我看不到你在我的显示器上描述的条带问题，但我相信我知道你在做什么。

通常，浏览器在创建渐变时不使用抖动。这意味着颜色之间的阶梯可以更加明显。解决此问题的唯一方法是在 Photoshop 等具有抖动功能的软件中制作渐变，然后将背景颜色设置为图像。但是，对于如此高质量的图像，尺寸会非常大，而且可能不值得。此外，大小变得固定，而不是像您的 CSS 那样动态。

另见： [http ://bjango.com/articles/gradients/](http://bjango.com/articles/gradients/)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-08-30T20:40:22.493

如果开始颜色和结束颜色之间的差异太小而无法正确显示中间的步骤，则会发生这种情况。

# c# - 为什么按名称的特定进程不在我创建的列表中？

> ID：12204914
> 
> 赞同：2
> 
> 时间：2012-08-30T20:25:05.957
> 
> 标签：c#

我有这个功能，我检查进程是否启动以及何时退出。但是我在 IF 的断点上使用，并且列表计数始终为 0。

当我运行任务管理器时，我看到 bf3.exe *32 那么这里有什么问题吗？

```
private void isProcessRunning()
{                
    Process[] proclist = Process.GetProcessesByName("bf3.exe");

    if (proclist.Length > 0)
    {
        Logger.Write("Battlefield 3 Started");
        alreadyRun = true;
    }
    else if (alreadyRun == true)
    {
        Logger.Write("Battlefield 3 Exited");
    }            
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-30T20:28:12.140

从[文档](http://msdn.microsoft.com/en-us/library/z3w4xdc9.aspx)中：

> 进程名称是进程的友好名称，例如 Outlook，**不包括 .exe 扩展名或路径**。GetProcessesByName 有助于获取和操作与同一可执行文件关联的所有进程。例如，您可以将可执行文件名作为 processName 参数传递，以关闭该可执行文件的所有正在运行的实例。

强调我的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:30:21.970

删除 .exe。这似乎对我有用。

# php - 使用 CURL 提交表单

> ID：12204915
> 
> 赞同：0
> 
> 时间：2012-08-30T20:25:10.717
> 
> 标签：php, curl

如何使用 curl 在提交按钮上没有 name 属性提交表单？

例如，目标站点具有以下提交按钮：

```
<input id='some' value='value' type='submit' > 
```

这就是我所拥有的：

```
$post_data['name'] = 'xyz';
$post_data['some'] = 'value';

foreach ( $post_data as $key => $value) {
            $post_items[] = $key . '=' . $value;
        }
        //create the final string to be posted using implode()
        $post_string = implode ('&', $post_items);

    $ch = curl_init($web3);
        //set options
        //curl_setopt($ch, CURLOPT_COOKIESESSION, true);
        curl_setopt ($ch, CURLOPT_COOKIEFILE, $ckfile); 
        curl_setopt ($ch, CURLOPT_COOKIEJAR, $ckfile); 
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
        curl_setopt($ch, CURLOPT_USERAGENT,
          "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
        //curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        //set data to be posted
        curl_setopt($ch, CURLOPT_POSTFIELDS, $post_string);
        //perform our request
        $result = curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:28:20.930

您（通常）不需要进行编码`$post_data`，下面的代码**将**提交表单。

按钮不是必需的。运行时`curl_exec`，服务器会收到等价的填写好的表格（前提`post_data`是正确的）。

如果操作未继续，则可能缺少某些字段，或者会话中的某些内容。尝试使用 cURL 打开*显示*表单的同一页面，然后提交表单。

```
$post_data['name'] = 'xyz';
$post_data['some'] = 'value';

$ch = curl_init();
//set options
//curl_setopt($ch, CURLOPT_COOKIESESSION, true);
curl_setopt ($ch, CURLOPT_COOKIEFILE, $ckfile); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $ckfile); 
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
    curl_setopt($ch, CURLOPT_USERAGENT,
      "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
//curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

//set data to be posted
curl_setopt($ch,CURLOPT_POST, true);

// Note -- this will encode using www-form-data
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);

curl_setopt($ch, CURLOPT_URL, $web3);

$result = curl_exec($ch); 
```

**更新**

那么让我们看看正常情况下会发生什么以及 cURL 会发生什么：

```
 Browser                          cURL
1\. Goes to www.xyz.com/form         curl_exec's a GET on www.xyz.com/form
2\. Server sends HTML                Server sends HTML
3\. User types in fields             We populate $post_data
4\. User clicks "SUBMIT"             We run curl_exec and POST $post_data
5\. Browser contacts server          cURL contacts server
6\. Browser sends fields             cURL sends fields
7\. Server acts upon request         Server acts upon request
8\. Profit                           Profit 
```

上面的代码只实现了阶段 3-6。阶段 2 也可能发送会话 cookie 并设置一些数据，这是阶段 7 所需的。因此，您还需要使用另一个 curl_exec （可能是 GET 方法，这一次）实现阶段 1，然后才能成功执行以下阶段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T20:27:26.290

根本不提供该输入表单字段的名称 - 浏览器实际上会为您做什么。

# alfresco - 露天版本差异

> ID：12204929
> 
> 赞同：1
> 
> 时间：2012-08-30T20:26:33.920
> 
> 标签：alfresco, alfresco-share

看起来，Alfresco 允许在存储库中上传较新版本的文档，并且还可以跟踪版本历史。但是，我找不到任何方法来比较或区分文档与其先前版本。

这可能吗？有什么好的外部插件或工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T05:08:30.320

我假设您想到了类似于老式 Unix`diff`工具的东西，它基本上比较文本文件并可以以人类可读的形式显示结果。

露天的一般等效情况要复杂得多。您有任意数量的不同类型的属性。您可能想到的文本文件恰好在`cm:content`.

所以回答你的问题：我不知道有什么扩展可以提供版本之间的一般差异，但对于文本文件和其他简单的特殊比较，你自己不应该是两个硬滚动。在前一种情况下，您可能希望查看提供基本功能的[库的自由文本差异的 Java 库。](https://stackoverflow.com/questions/479654/java-library-for-free-text-diff)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T13:47:45.917

寻找相同的功能并找到了这个 Alfresco 插件

[http://code.google.com/p/versions-difference-alfresco-plug-in/](http://code.google.com/p/versions-difference-alfresco-plug-in/)

# php - mysql 和 PHP 的日期时间

> ID：12204930
> 
> 赞同：0
> 
> 时间：2012-08-30T20:26:34.167
> 
> 标签：php, mysql, datetime

我的任务是通过 PHP 从 csv 文件中读取日期时间并将它们存储在 mysql 数据库中。csv 文件中的日期时间有两种格式，第一种是. `DD/MM/YYYY HH:mm:ss AM/PM`，第二种是`MM-DD-YYYY HH:mm:ss AM/PM`. 然后，我需要选择一些行，因为它们的日期时间在某个时期。

似乎有点困惑。我脑子里有几个问题：

1.  在 mysql 表中设置 varchar 类型来存储它们很容易。但是以后很难选择一些行，因为我需要先将字符串转换为日期时间并检查数据是否在特殊时期。

2.  另一种解决方案是在存储到数据库之前通过 PHP 将这些日期时间从字符串转换为日期时间。然后很容易以后选择数据。但第一步也有点复杂。

我不知道有人对这个问题有什么好的想法，或者在类似问题上的一些经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:59:03.343

首先：永远不要*将* **数据库**中的日期或日期时间存储为字符串。

绝不。

了解？

您应该始终将它们转换为数据库的内置类型`date`或`datetime`数据类型。

如果不这样做，以后会非常非常痛苦地咬你。例如，假设如果它们保存为字符串，特别是如果它们采用不同的格式，则试图让数据库按日期顺序对它们进行排序。如果你可以确定一件事，当你在数据库中有一个日期时，你将需要根据给定日期、之后或之前的条目来查询它。如果您不需要对他们做那种事情，那么首先存储日期就没有多大意义了，所以即使您还没有被要求这样做，也可以将其视为给定的稍后会要求它。因此，始终*始终*将它们存储在正确的数据类型中，而不是作为 varchar。

接下来，您被要求处理的混合格式。

这是精神错乱。

我厌恶和厌恶 PHP 的[`strtotime()`](http://php.net/manual/en/function.strtotime.php)功能。它很慢，有一些不幸的怪癖，通常应该被认为是过去的遗产而不被使用。但是，在这种情况下，它可能会为您提供帮助。

`strtotime()`旨在接受未知格式的日期字符串，对其进行解析，并输出正确的时间戳。显然，它必须处理`dd-mm-yyyy`和`mm-dd-yyyy`格式两者的存在。它通过查看分隔符来猜测您所指的两者中的哪一个来做到这一点。

如果日期字符串使用斜杠作为分隔符，则假定格式为`mm/dd/yyyy`. 如果它使用破折号，那么它假定`dd-mm-yyyy`. `strtotime()`这是在正常使用中使用这种痛苦的那些小怪癖之一。但这里是你的朋友。

它的工作方式实际上与您在问题中指定的格式完全相反。但这应该足以帮助您。如果您在输入字符串中切换斜杠和破折号，并将结果传递给`strtotime()`它，则应根据您在问题中描述的方式在所有情况下产生正确的时间戳。

然后应该足够简单以将它们正确保存在数据库中。

但是，我强烈建议对此进行非常彻底的测试。如果它沿线的某个地方中断，也不会感到惊讶。如果您以不一致的格式提供数据，那么实际上没有任何方法可以保证它会始终不一致。您的程序基本上需要尽其所能处理不良数据。

您还需要对输入数据的质量提出一些严肃的问题。在这种情况下，不能指望任何程序能够可靠地工作。向提供它的人明确表示它不够好。如果程序因错误数据而中断，那是他们的错，而不是你的错。

# jquery - 列中的图像对齐

> ID：12204931
> 
> 赞同：0
> 
> 时间：2012-08-30T20:26:34.983
> 
> 标签：jquery, html, css

我有一组使用下面的 CSS 对齐的图像，但它们是从上到下放置的。我如何将它们从左到右对齐？

换句话说：

1|2|3|4

5|6|7|8

对比

1|3|5|7

2|4|6|8

```
#photos {
   line-height: 0;
   -webkit-column-count: 5;
   -webkit-column-gap:   0px;
   -moz-column-count:    5;
   -moz-column-gap:      0px;
   column-count:         5;
   column-gap:           0px;
}
#photos img {
  width: 100% !important;
  height: auto !important;
} 
```

这是来自教程：http: [//css-tricks.com/seamless-responsive-photo-grid/](http://css-tricks.com/seamless-responsive-photo-grid/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:49:27.117

这取决于您要完成的工作。如果您真的坚持使用 HTML5，您应该考虑到这不适用于所有浏览器或所有浏览器版本的事实。如果您只是尝试制作没有接缝的图像块并将它们堆叠成一排，请参阅以下内容。

```
 <style type="text/css">
        #photos {
            float:left;
            width:800px;
        }
        .imageItem{
            float:left;
        }
    </style>
</head>
<body>
        <div id="photos">
        <img class="imageItem" src="http://farm8.staticflickr.com/7136/7733019900_c671c8d393_m.jpg" />
        <img class="imageItem" src="http://farm8.staticflickr.com/7136/7733019900_c671c8d393_m.jpg" />
        <img class="imageItem" src="http://farm8.staticflickr.com/7136/7733019900_c671c8d393_m.jpg" />
        <img class="imageItem" src="http://farm8.staticflickr.com/7136/7733019900_c671c8d393_m.jpg" />
        <img class="imageItem" src="http://farm8.staticflickr.com/7136/7733019900_c671c8d393_m.jpg" />
        <img class="imageItem" src="http://farm9.staticflickr.com/8426/7733031344_0762136432_m.jpg"/>
        <img class="imageItem" src="http://farm9.staticflickr.com/8426/7733031344_0762136432_m.jpg"/>
        <img class="imageItem" src="http://farm9.staticflickr.com/8426/7733031344_0762136432_m.jpg"/>
        <img class="imageItem" src="http://farm9.staticflickr.com/8426/7733031344_0762136432_m.jpg"/>
        <img class="imageItem" src="http://farm9.staticflickr.com/8426/7733031344_0762136432_m.jpg"/>
    </div>
</body> 
```

# objective-c - 在使用 coredata 和多线程枚举时，集合发生了突变

> ID：12204932
> 
> 赞同：1
> 
> 时间：2012-08-30T20:26:45.753
> 
> 标签：objective-c, ios, multithreading, ipad, core-data

我正在尝试调试我刚刚从其他一些开发人员那里继承的 ipad 应用程序。目前我遇到了一个非常奇怪的错误，我不知道如何攻击。

应用程序因以下错误而死： *** 由于未捕获的异常“NSGenericException”而终止应用程序，原因：“*** Collection <__NSCFSet: 0xc5d2b40> 在枚举时发生了变异。”

当我执行 po 0xc5d2b40 时，它告诉我它是某个对象类型的数组。但是，当我在所有异常处打开断点并通过回溯时，没有迹象表明该对象类型的数组被枚举或变异。

我看到一些参考资料表明这可能与 coredata 和多线程有关，但我想知道是否有人对如何解决这个问题有任何建议。我还应该注意：我只在设备上收到此错误，而不是在模拟器中。

提前致谢！

注意：当应用程序从 objc_exception_throw 遇到断点时，使用 bt 命令我从各种后台线程中得到以下结果：

大多数线程看起来像这样： tid = 0x2c03, 0x307e9cd4 libsystem_kernel.dylib `__workq_kernreturn + 8 frame #0: 0x307e9cd4 libsystem_kernel.dylib`__workq_kernreturn + 8 帧 #1: 0x32d35f3c libsystem_c.dylib `_pthread_wqthread + 616 frame #2: 0x32d35cd0 libsystem_c.dylib`start_wqthread + 8

我有一个线程在 AFURLConnectionOperation（外部库：AFNetworking）中运行一个方法。

我的代码在回溯中有一个线程，这就是我上面引用的。我对调试器有点陌生，我在检查回溯时是否可能做错了什么？

我所有代码正在执行的线程上的回溯如下所示：

```
tid = 0x2003, 0x32d2fcac libsystem_c.dylib`OSSpinLockLock$VARIANT$wfe + 84
frame #0: 0x32d2fcac libsystem_c.dylib`OSSpinLockLock$VARIANT$wfe + 84
frame #1: 0x32eb7c88 libobjc.A.dylib`_objc_rootReleaseWasZero_slow + 28
frame #2: 0x32eb5210 libobjc.A.dylib`_objc_rootReleaseWasZero + 132
frame #3: 0x32eb515c libobjc.A.dylib`_objc_rootRelease + 12
frame #4: 0x31ba6b0a CoreData`-[NSSQLIntermediate _generateSQLForKeyPathExpression:allowToMany:inContext:] + 278
frame #5: 0x31ba687a CoreData`-[NSSQLIntermediate _generateSQLForExpression:allowToMany:inContext:] + 186
frame #6: 0x31babea4 CoreData`-[NSSQLSimpleWhereIntermediate _generateSQLType2InContext:] + 660
frame #7: 0x31ba6260 CoreData`-[NSSQLSimpleWhereIntermediate generateSQLStringInContext:] + 400
frame #8: 0x31bbbd06 CoreData`-[NSSQLCompoundWhereIntermediate _generateMulticlauseStringInContext:] + 174
frame #9: 0x31bbba84 CoreData`-[NSSQLCompoundWhereIntermediate generateSQLStringInContext:] + 272
frame #10: 0x31ba5d1a CoreData`-[NSSQLFetchIntermediate generateSQLStringInContext:] + 90
frame #11: 0x31ba24d0 CoreData`-[NSSQLGenerator newSQLStatementForFetchRequest:ignoreInheritance:countOnly:nestingLevel:] + 460
frame #12: 0x31ba2212 CoreData`-[NSSQLAdapter _newSelectStatementWithFetchRequest:ignoreInheritance:] + 414
frame #13: 0x31ba1e6c CoreData`-[NSSQLCore newRowsForFetchPlan:] + 144
frame #14: 0x31ba152e CoreData`-[NSSQLCore objectsForFetchRequest:inContext:] + 698
frame #15: 0x31ba0fc6 CoreData`-[NSSQLCore executeRequest:withContext:error:] + 282
frame #16: 0x31ba0464 CoreData`-[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 1432
frame #17: 0x31b9ec28 CoreData`-[NSManagedObjectContext executeFetchRequest:error:] + 604
frame #18: 0x00052956 digidrill`-[DigidrillIncrementalCache executeFetchRequest:allNewerThanOrFailure:] + 410 at DigidrillIncrementalCache.m:80
frame #19: 0x0003fbae digidrill`-[DigidrillIncrementalStore(Responders) immutableCacheListResponderBegin:intoArray:inContext:outErr:] + 434 at DigidrillIncrementalStore+Responders.m:253
frame #20: 0x00015ea4 digidrill`-[DigidrillIncrementalStore executeRequest:withContext:error:] + 3836 at DigidrillIncrementalStore.m:157
frame #21: 0x31ba0464 CoreData`-[NSPersistentStoreCoordinator executeRequest:withContext:error:] + 1432
frame #22: 0x31b9ec28 CoreData`-[NSManagedObjectContext executeFetchRequest:error:] + 604
frame #23: 0x00018534 digidrill`+[CoreDataExtractor executeSyncFetchRequest:callback:onDispatchQueue:] + 704 at CoreDataExtractor.m:175
frame #24: 0x0001a9a2 digidrill`+[CoreDataExtractor ensureGammaDataExistsForTrack:maxOld:flags:outErr:] + 1234 at CoreDataExtractor.m:363
frame #25: 0x00058670 digidrill`-[XYGraph dataForTrackPlot:] + 632 at XYGraph.m:230
frame #26: 0x0006f7d6 digidrill`__23-[TrackPlot reloadData]_block_invoke_0 + 66 at TrackPlot.m:49
frame #27: 0x344b0c58 libdispatch.dylib`_dispatch_call_block_and_release + 12
frame #28: 0x344b2d0e libdispatch.dylib`_dispatch_queue_drain + 274
frame #29: 0x344b2b74 libdispatch.dylib`_dispatch_queue_invoke$VARIANT$mp + 40
frame #30: 0x344b37e6 libdispatch.dylib`_dispatch_worker_thread2 + 210
frame #31: 0x32d35dfa libsystem_c.dylib`_pthread_wqthread + 294
frame #32: 0x32d35cd0 libsystem_c.dylib`start_wqthread + 8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-27T05:50:09.597

这家伙有一个很好的解释，为我解决了这个问题：

[http://www.pixeldock.com/blog/collection-was-mutated-while-being-enumerated-during-coredata-operation-on-background-thread/](http://www.pixeldock.com/blog/collection-was-mutated-while-being-enumerated-during-coredata-operation-on-background-thread/)

基本上 MO 上下文只能由创建它的线程使用。

# css - 覆盖外部 CSS

> ID：12204933
> 
> 赞同：0
> 
> 时间：2012-08-30T20:26:51.390
> 
> 标签：css

我有一个外部 CSS 文件，它被导入到我的一个页面中。此外部 CSS 将样式分配给 HTML 标记。例如，

```
table {
    width: 100%;
    font-size: 3em;
    // long list of CSS styles
}

tr {
    width: 100%;
    font-size: 3em;
    // long list of CSS styles
} 
```

为单个表覆盖这些外部 CSS 样式的最佳方法是什么？例如，如果我有一张桌子，但我不想让这些外部样式出现在我的桌子上，我该怎么做？

谢谢。

编辑——澄清一下，“一长串 CSS 样式”有数百种样式。到目前为止，大多数答案都建议我覆盖提供的 CSS。我是否需要覆盖所有数百种样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:28:27.810

在您要覆盖的其他 CSS 之后加载您自己的 CSS。最后读取的规则（如果相同级别的特异性）将胜出。您只需要覆盖您需要/想要的特定规则——而不是所有规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:29:12.267

你可以在你的桌子上使用内联样式，

```
<table style='width:90%'>
<tr style='font-size: 4.4em'> 
```

或在外部文件中为表设置单独的类，或创建另一个包含这些样式的 .css 文件

```
.otherTable{
    width: 90%;
    font-size: 2.3em;
    // long list of CSS styles
} 
```

在你的 html 中，

```
<table class='otherTable'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:30:41.483

`css`您应该在外部文件之后立即根据您的需要重写它们。按以下顺序加载它们：

```
http://www.externalserver.com/styles.css
css/general.css 
```

然后应用适合您网站主题的样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T20:34:16.263

除了 j08691 所说的，如果您的 CSS 生效有问题，请在分号前添加短语“！important”以确保它覆盖其他设置。

[http://webdesign.about.com/od/css/f/blcssfaqimportn.htm](http://webdesign.about.com/od/css/f/blcssfaqimportn.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T21:12:41.057

偷懒，只是在那个特定的页面上写一些 javascript。

这是关于此的 SO Q/A：

[https://stackoverflow.com/a/196038/1617149](https://stackoverflow.com/a/196038/1617149)

或者您可以在页面呈现之前在 jQuery/Prototype 中执行此操作，例如在 DOM 加载时。

# jquery - Jquery AJAX 问题努力但没有运气

> ID：12204940
> 
> 赞同：0
> 
> 时间：2012-08-30T20:27:28.240
> 
> 标签：jquery, ajax

```
<table class="table table-striped">  
            <thead>  
            <tr>  
                <th>Select</th>  
                <th>From</th>  
                <th>Subject</th>  
                <th>Date</th>  
            </tr>
            </thead>
            <tbody>  
        <?php
            //show records
            while ($row = mysql_fetch_array($usrmsg)) {

            $frm_user = $row['from_uid'];
            // Get details from users_profiles table.
            $usrname = mysql_query("select * from `users_profiles` where `id`=$frm_user");
            $usrname = mysql_fetch_array($usrname);
        ?>
            <tr>  
                <td> <label class="checkbox"><input type="checkbox"></label> </td>  
                <td><?php echo $usrname['firstname'] . " " . $usrname['lastname'];?> </td>  
                <td><!-- <a href="<?php echo $row['id']; ?>" id="getmsg"><?php echo substr($row['subject'],0,40); ?>...</a> -->
                 <input class="data" type="text" value="<?php echo $row['id']; ?>" id="<?php print $row['id']; ?>" />
                 <input type="button" href="#get-content" class="clickme" value="<?php echo substr($row['subject'],0,40); ?>.." id="<?php print $row['id']; ?>"/>
                </td>  
                <td><?php echo $row['date']; ?></td>  
            </tr> 
        <?php
            }   
        ?>
        </tbody>  
       </table>  
       <div id="content">
            The table will be placed here
        </div> 
```

我正在将数据库中的记录加载到表中。现在，当用户单击主题行时，我的 JQUERY AJAX 应该在 DIV 内容中显示消息。这是正确发生的，但仅用于第一次记录。当我点击第二条记录时，它仍然显示我不想要的第一条记录，当用户点击记录时，应该显示相应的消息，而不是总是首先显示。

实际上我的 JQUERY AJAX 总是将第一个记录 id 传递给 message.php，在我的例子中是 10。

这是jQuery。

```
<script type="text/javascript" >
    $(document).ready(function(){
        $(".clickme").click(function() {
            $("#content").html('Retrieving...');
            $.ajax({
                type: "GET",
                data: "data=" + $(".data").val(),
                url: "message.php",
                dataType: 'json', 
                success: function(data){
                var msg = data[0];              //get id
                $("#content").html(msg);
                }
            });
        });
    });
</script> 
```

如果有人可以帮助我，那就太好了...

先感谢您..

以下是计划 HTML

```
<table class="table table-striped">  
            <thead>  
            <tr>  
                <th>Select</th>  
                <th>From</th>  
                <th>Subject</th>  
                <th>Date</th>  
            </tr>
            </thead>
            <tbody>  
                    <tr>  
                <td> <label class="checkbox"><input type="checkbox"></label> </td>  
                <td>Raj Janorkar </td>  
                <td><!-- <a href="10" id="getmsg">This is proposal for you.....</a> -->
                 <input class="data" type="text" value="10" id="10" />
                 <input type="button" href="#get-content" class="clickme" value="This is proposal for you...." id="10"/>
                </td>  
                <td>2012-08-26</td>  
            </tr> 
                    <tr>  
                <td> <label class="checkbox"><input type="checkbox"></label> </td>  
                <td>Raj Janorkar </td>  
                <td><!-- <a href="11" id="getmsg">All Messages Are Monitored..if we found ...</a> -->
                 <input class="data" type="text" value="11" id="11" />
                 <input type="button" href="#get-content" class="clickme" value="All Messages Are Monitored..if we found .." id="11"/>
                </td>  
                <td>2012-08-26</td>  
            </tr> 
                    <tr>  
                <td> <label class="checkbox"><input type="checkbox"></label> </td>  
                <td>Raj Janorkar </td>  
                <td><!-- <a href="12" id="getmsg">All Messages Are Monitored All Messages ...</a> -->
                 <input class="data" type="text" value="12" id="12" />
                 <input type="button" href="#get-content" class="clickme" value="All Messages Are Monitored All Messages .." id="12"/>
                </td>  
                <td>2012-08-26</td>  
            </tr> 
                    <tr>  
                <td> <label class="checkbox"><input type="checkbox"></label> </td>  
                <td>Raj Janorkar </td>  
                <td><!-- <a href="9" id="getmsg">date...</a> -->
                 <input class="data" type="text" value="9" id="9" />
                 <input type="button" href="#get-content" class="clickme" value="date.." id="9"/>
                </td>  
                <td>2012-08-21</td>  
            </tr> 
                    <tr>  
                <td> <label class="checkbox"><input type="checkbox"></label> </td>  
                <td>Raj Janorkar </td>  
                <td><!-- <a href="1" id="getmsg">...</a> -->
                 <input class="data" type="text" value="1" id="1" />
                 <input type="button" href="#get-content" class="clickme" value=".." id="1"/>
                </td>  
                <td>0000-00-00</td>  
            </tr> 
                    <tr>  
                <td> <label class="checkbox"><input type="checkbox"></label> </td>  
                <td>Raj Janorkar </td>  
                <td><!-- <a href="6" id="getmsg">...</a> -->
                 <input class="data" type="text" value="6" id="6" />
                 <input type="button" href="#get-content" class="clickme" value=".." id="6"/>
                </td>  
                <td>0000-00-00</td>  
            </tr> 
                    <tr>  
                <td> <label class="checkbox"><input type="checkbox"></label> </td>  
                <td>Raj Janorkar </td>  
                <td><!-- <a href="7" id="getmsg">...</a> -->
                 <input class="data" type="text" value="7" id="7" />
                 <input type="button" href="#get-content" class="clickme" value=".." id="7"/>
                </td>  
                <td>0000-00-00</td>  
            </tr> 
                    <tr>  
                <td> <label class="checkbox"><input type="checkbox"></label> </td>  
                <td>Raj Janorkar </td>  
                <td><!-- <a href="8" id="getmsg">Hi want to test you...</a> -->
                 <input class="data" type="text" value="8" id="8" />
                 <input type="button" href="#get-content" class="clickme" value="Hi want to test you.." id="8"/>
                </td>  
                <td>0000-00-00</td>  
            </tr> 
                    </tbody>  
           </table>  
           <div id="content">
                The table will be placed here
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:49:54.943

正如**MrOBRian**提到的，您的问题出在`$(".data").val()`. `$(".data")`将返回页面上所有输入的集合`data`。

您应该将选择器更改为类似`$(this).siblings('.data').val();`. 这将`data`在单击的按钮旁边为您提供输入。

# dynamics-crm - CRM 2011：添加主机标头和单个 IIS 绑定后正确的 ServerUrl 注册表设置是什么？

> ID：12204941
> 
> 赞同：1
> 
> 时间：2012-08-30T20:27:37.960
> 
> 标签：dynamics-crm, dynamics-crm-2011

有人可以帮助我了解 ServerUrl 注册表设置的用途以及正确的设置应该基于我下面的设置吗？

我假设 ServerUrl 注册表设置应设置为 (http://myservername:80/MSCRMServices) 以用于需要针对特定​​服务器的实例，但由于不支持在 CRM 站点中具有多个绑定并且可能导致服务端点出现问题，看来我唯一的选择是将其设置为（http://crmdev.domain.com:80/MSCRMServices）。

我是否可以将 ServerUrl 注册表设置设置为 (http://myservername:80/MSCRMServices) 而无需在 IIS 中进行第二次绑定？

在运行多个网络负载平衡服务器时，如果 ServerUrl 注册表设置为 (http://crmdev.domain.com:80/MSCRMServices) 是否有任何负面影响？

**注意：**这是本地安装。

这是我当前的设置。

**注册表设置**

```
Registry subkey: MSCRM  
LocalSdkPort: 80  
ServerUrl: (http://crmdev.domain.com:80/MSCRMServices) 
```

**添加了 DNS (A) 记录**

```
Name: crmdev  
Type: Host (A)  
Data: 192.168.211.18  
Timestamp: static 
```

**Microsoft Dynamics CRM（站点绑定）**

```
Type: http  
Host Name: crmdev.domain.com  
Port: 80  
IP Address: All Unassigned 
```

**部署管理器（网址设置）**

```
Binding Type: HTTP  
Web Application Server: crmdev.domain.com:80  
Organization Web Service: crmdev.domain.com:80  
Discovery Web Service: crmdev.domain.com:80  
Deployment Web Service: crmdev.domain.com:80 
```

**SQL 数据库设置**
数据库：MSCRM_CONFIG
表：dbo.DeploymentProperties

```
ADDeploymentSdkRootDomain: crmdev.domain.com:80  
ADDiscoveryRootDomain: crmdev.domain.com:80  
ADsdkRootDomain: crmdev.domain.com:80   
ADWebApplicationRootDomain: crmdev.domain.com:80  
AsyncSdkRootDomain: 
```

# compiler-construction - 使用内存数据编译文件而不是 Common Lisp 中的真实文件

> ID：12204947
> 
> 赞同：6
> 
> 时间：2012-08-30T20:28:01.443
> 
> 标签：compiler-construction, common-lisp

有没有办法实现`compile-file`但不是使用磁盘上的常规文件，而是使用流或仅使用内存中的字符串的效果？（即，如果我没有文件并且不想使用此内存数据创建临时文件）

**编辑**

我正在考虑以下用例：从文件系统以外的其他地方加载代码。例如来自存档（类似于 Java 的 jars 或 Python zip 处理功能）或来自网络。也许可能有替代方法，而不仅仅是弯曲`compile-file`机械。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T16:17:14.817

Rainer Joswig 的第一条评论指出了这一点：

> 不在标准的 Common Lisp 中。

您可以在每个实现中搜索来自的调用，`compile-file`以查看底层实现是否采用流。

如果您想自己实现这一点，您将实现一个非常低效的`compile-file`输入和输出流版本，它会生成适合`load`或您自己版本的可加载表单。

用 包装编译`with-compilation-unit`，您必须特别注意`macroexpand`顶级表单，确保`progn`表单被视为顶级表单，`locally`并且`macrolet`表单`symbol-macrolet`建立绑定并将其表单作为顶级表单处理空词法环境（其操作也不是可移植的）和处理`eval-when`表单，其中一些表单可以被评估、处理或两者兼而有之。然后，生成可外部化的表单，关心什么可以合并，什么不能（例如符号和包），调用`make-load-form`和`standard-object`实例`structure-object`，`condition`并特别注意符号和包，例如检查要编译的流是否具有第一个非-原子`in-package`如果`load`以不同的值调用`*package*`.

这只是最小编译的最顶层步骤，或多或少，没有提到编译实际发生的时间（编译时或加载时）、`load-time-value`表单和许多细节。有些步骤需要代码遍历。

我的建议：只要从压缩数据和套接字中提取并保存您拥有的任何源代码，然后调用`compile-file`，`load`如果您想保留编译和加载语义。对于更简单的事情，您可以执行以下操作：

```
(let* ((*package* *package*)
       (*readtable* *readtable*)
       (eof (copy-symbol 'eof))
       (form nil))
  (loop
    (setf form (read stream nil eof))
    (when (eq form eof)
      (return))
    (funcall (compile nil `(lambda () ,form))))) 
```

如果您不太关心可移植性，请让您的实现能够处理压缩文件，例如，通过向 提供解压缩的外部格式`compile-file`，并使您的实现能够打开 URL（URI、IRI，无论您关心什么）而不仅仅是路径名。AFAIK，ABCL 可以打开 URL 进行输入。然而，`compile-file`当使用这样的外部资源调用时，输出文件会是什么？也许自己做`compile-and-load`一个声明临时文件用于`compile-file`的`output-file`关键参数和`load`.

# c# - 将值连接到隐藏变量

> ID：12204954
> 
> 赞同：1
> 
> 时间：2012-08-30T20:28:35.103
> 
> 标签：c#, javascript

如何在复选框单击事件上使用逗号将值连接到 hdnfield 值。当我单击复选框时，我选择订单并将其传递给 JS 函数。如果我选择三个复选框，hdnfield 值应该是 1、2、3 ......类似的东西......怎么做？

```
if (chkBoxOne != null) 
{
    chkBoxOne.Attributes.Add("onclick", "javascript:return SelectOne('" + chkBoxOne.ClientID + "','" + e.Row.ClientID + "','" + lblorderId.Text + "')");
    //if (chkBoxOne.Checked)
    //    hdSelectAllOrderId.Value += ((Label)e.Row.FindControl("lblorderId")).Text + ",";
}

function SelectOne(id, rowID, OrderID) {
  var AllOrderIDs = 0;
  AllOrderIDs = Number(document.getElementById('ctl00_PagePlaceholder_hdSelectAllOrderId').value);
  alert(AllOrderIDs);
  if (document.getElementById(id).checked == true) {
      if (AllOrderIDs == '')
          AllOrderIDs = OrderID;
      else
          AllOrderIDs = AllOrderIDs + ' ,' + OrderID;
}
alert(AllOrderIDs);} 
```

上面的代码不起作用。当我单击第一个复选框时，它显示第一个 ordid，但是当我单击第二个复选框时，它没有显示我已经分配给它的第一个 ordid。它只是显示第二个...

```
 var AllOrderIDs = 0;
AllOrderIDs = document.getElementById('ctl00_PagePlaceholder_hdSelectAllOrderId').value;
var IDs = AllOrderIDs.split(',');
if (document.getElementById(id).checked == true) {
    if (IDs.indexOf(OrderID) == -1) {
        IDs.push(OrderID);
    }
}
else {
    var index = IDs.indexOf(OrderID);
    if (index != -1) {
        IDs = IDs.slice(index, 1);
    }
}
AllOrderIDs = IDs.join(','); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:33:21.130

警报后您错过了这个：-

```
document.getElementById('ctl00_PagePlaceholder_hdSelectAllOrderId').value= AllOrderIDs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:33:47.023

你错过了那一行：

```
document.getElementById('ctl00_PagePlaceholder_hdSelectAllOrderId').value = AllOrderIDs; 
```

顺便说一句，不要指代这样的控件。做这个：

```
document.getElementById('<%=hdSelectAllOrderId.ClientID%>').value = AllOrderIDs; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:52:10.500

首先，是的，您忘记将值保存到隐藏字段。其次，您只是在处理复选框状态更改为“已选中”时的情况。因此，您不会从隐藏字段中删除 ID。如果您再次选中-取消选中并选中，您将保存重复的 ID。我建议您将字符串拆分为 ID 数组，然后使用它。

```
<html>
<head>
<script type="text/javascript">
function Select(sender, OrderID)
{
    var AllOrderIDs = document.getElementById('hf1').value;
    var IDs = AllOrderIDs.split(',');
    if (sender.checked == true)
    {
        if (IDs.indexOf(OrderID.toString()) == -1)
        {
            IDs.push(OrderID);
        }
    }
    else
    {
        var index = IDs.indexOf(OrderID.toString());
        if (index != -1)
        {
            IDs.splice(index, 1);
        }
    }

    AllOrderIDs = IDs.join(',');
    alert(AllOrderIDs);
    document.getElementById('hf1').value = AllOrderIDs;
}

function Check()
{
    var AllOrderIDs = document.getElementById('hf1').value;
    alert(AllOrderIDs);
}

</script>
</head>
<body>
<input type="hidden" id="hf1" />
<input type="checkbox" id="check1" onclick="Select(this, 1);" />
<input type="checkbox" id="check2" onclick="Select(this, 2);" />
<input type="checkbox" id="check3" onclick="Select(this, 3);" />
<br />
<p> <input type="button" onclick="Check();" value="Check" /> </p>
</body>
</html> 
```

# php - 在PHP中按子数组元素值对数组进行排序

> ID：12204955
> 
> 赞同：1
> 
> 时间：2012-08-30T20:28:43.460
> 
> 标签：php, sorting, multidimensional-array

我正在使用 readdir 将文件循环到一个数组中并取回这个结果：

```
Array
(
  [0] => Array
    (
        [name] => /css
        [type] => directory
        [size] => 0
    )

  [1] => Array
    (
        [name] => /index.html
        [type] => file
        [size] => 1208
    )

  [2] => Array
    (
        [name] => /js
        [type] => directory
        [size] => 0
    )
) 
```

我的目标是让它们采用典型的“文件结构格式”，而它首先按类型（目录然后文件）排序，然后按字母顺序排列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:42:34.057

```
function custom_order($a, $b)
{
    $type_cmp = -strcmp($b['type'], $a['type']);

    if ($type_cmp == 0)
    {
        return -strcmp($b['file'], $a['file']);
    }
    else
    {
        return $type_cmp;
    }
}

$test = array
(
  0 => array
    (
        'name' => '/css',
        'type' => 'directory',
        'size' => 0
    ),

  1 => array
    (
        'name' => '/index.html',
        'type' => 'file',
        'size' => 1208
    ),

  2 => array
    (
        'name' => '/js',
        'type' => 'directory',
        'size' => 0
    )
);

// http://www.php.net/manual/en/function.usort.php
usort($test, 'custom_order'); 

var_dump($test); 
```

为了好玩，我做了一个单班轮。（不是以代码清晰的名义推荐的）

```
function custom_order($a, $b)
{
    return ($type_cmp = -strcmp($b['type'], $a['type'])) === 0 ? -strcmp($b['file'], $a['file']) : $type_cmp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:43:18.447

如果您想变得复杂（考虑到情况，这可能不是必需的 - 我假设每个数组中的条目相对较少（~100）），您应该研究分而治之的排序算法以优化速度（参见例如[http://www.ics.uci.edu/~eppstein/161/960118.html](http://www.ics.uci.edu/~eppstein/161/960118.html)或查看维基百科以获得一般概述）。

但是，抛开复杂性不谈，您可以这样做：

```
function colSort(&$arr, $col, $dir = SORT_ASC) {
   $sort = array();
   foreach ($arr as $k => $r) {
     $sort[$k] = $r[$col];
   }
   array_multisort($sort, $dir, $arr);
 } 
```

然后，您可以使用 eg`colSort($array, 'type');`按类型排序。该示例还可以进一步修改为按文件大小或文件名排序。

# objective-c - 编写一个预览一小部分代码结果的应用程序

> ID：12204957
> 
> 赞同：0
> 
> 时间：2012-08-30T20:28:48.223
> 
> 标签：objective-c, macos, cocoa

这可能看起来很奇怪，所以我会尽力解释它：

我想为 OS X 编写一个应用程序，它将接受一些代码作为输入并产生视觉输出。输入将在 Objective C 中，输出将是此代码描述的输出。

输出可能是基于文本或图形的，没关系。重要的是我不知道如何使这个输入作为Objective C代码处理并由系统执行。我对 Objective C 有丰富的经验，但我没有机会参与这样的事情。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:32:16.230

因此，如果我理解正确，您想要：

1.  接受 Objective-C 输入
2.  解析它
3.  并以直观易懂的形式向用户展示其结构。

现在最难的部分是解析它——为此你需要一个编译器前端，可能是[LLVM-clang。](http://clang.llvm.org/)当您拥有代码的[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)时，您可以遍历该树并轻松构建一些图形或结构化的、人类可读的文本来描述代码的功能。

编辑：所以你想实际编译和执行该代码。然后你必须更进一步，编译代码然后运行它。

# javascript - 离开标签时如何停止在标签中播放的 wistia 视频？

> ID：12204970
> 
> 赞同：0
> 
> 时间：2012-08-30T20:29:52.820
> 
> 标签：javascript, jquery, tabs

全部，

我有一个带有几个选项卡的 jsp 页面。其中一个选项卡具有嵌入的 wistia 视频。当我从视频选项卡导航到其他选项卡时，视频停止播放并且在 Firefox 和 Chrome 中运行良好，但在 IE 中继续播放。

当用户离开视频选项卡时，我试图暂停视频。我怎样才能使用javascript实现这一点？由于我们网站上的一些冲突，我无法使用 jquery。

下面是标签jsp代码。

```
 <div id="tab_container">
    <div id="container_tabs">
     <div class="tabselected" id="tab_1" onclick="show(this);">Tab1</div>
     <div class="tab" id="tab_2" onclick="show(this);">Tab2</div>
     <div class="tab" id="tab_3" onclick="show(this);">Tab3</div>
    </div>

    <div id="container_content">
      <div id="tabtest_1" style="display: block;">
        <dsp:include page="page1.jsp" />
      </div>    
      <div id="tabtest_2" style="display: none;">
        <dsp:include page="page2.jsp" />                  
      </div>    
      <div id="tabtest_3" style="display: none;">
        <dsp:include page="page3.jsp"/>
           </div>   
     </div>
 </div> 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T16:47:42.770

**在单个页面上的选项卡之间切换时暂停**

首先，我假设您使用的是 iframe 嵌入类型？API 和 SEO 嵌入类型应自动检测“关闭”隐藏状态并自行停止。

如果您使用的是 iframe 嵌入类型，那么只需将 iframe API 添加到页面即可解决您的问题。[http://wistia.com/doc/iframe-api](http://wistia.com/doc/iframe-api)

这是因为 iframe API 将监控您的嵌入代码的可见性状态，并在它从隐藏变为可见时“重建”。无法从 iframe 内部监控状态，这就是它需要 iframe API 的原因。

请注意，上述解决方案不仅会暂停视频，还会将其重置为开头。在 IE 中更改 flash 对象的可见性并没有得到很好的处理，所以当它出现时我们不得不重新构建。为了保持跨浏览器的一致性，其他浏览器的行为方式相同。

**编辑：我将在下面留下这个答案，因为它对于切换浏览器选项卡时的暂停很有用，即使这不是确切的问题。**

使用 jQuery 会更容易一些，因为 $(window).blur(function(){ ... }) 非常可靠，但是您可以通过一些额外的努力来完成它。

首先，您需要一个跨浏览器的事件绑定函数来处理 IE 的窗口模糊特性：

```
var activeElement = document.activeElement;
function bindEvent(elem, eventName, fn) {
  if (elem.addEventListener) {
    elem.addEventListener(eventName, fn, false);
  } else if (elem.attachEvent) {
    if ((elem === window || elem === document) && eventName === "blur") {
      document.attachEvent("onfocusout", function() {
        if (activeElement === document.activeElement) {
          fn.call(window.event.srcElement, window.event);
        }
        activeElement = document.activeElement;
      });
    } else {
      elem.attachEvent("on" + event, function() {
        fn.call(window.event.srcElement, window.event);
      });
    }
  }
} 
```

上面的功能并不完美：模糊事件通常会连续触发多次，具体取决于页面上的焦点。但它是可行的。

一旦你有了这个功能，告诉 Wistia embed 暂停就很简单了。如果它是“API”或“SEO”样式嵌入（即不是 iframe），您可以使用：

```
bindEvent(window, "blur", function() {
  wistiaEmbed.pause();
}); 
```

如果它是 iframe 样式嵌入，那么您只能通过将 Wistia iframe API 添加到页面中，在嵌入代码之后的某个位置来完成此操作。完成后，您可以通过 iframe 访问 API 以暂停它。

```
bindEvent(window, "blur", function() {
  document.getElementById("the_iframe_id").wistiaApi.pause();
}); 
```

以及有关常规 javascript API 的更多信息： [http ://wistia.com/doc/player-api](http://wistia.com/doc/player-api)

我在 Google Chrome 和 IE7-9 上进行了测试，包括 Quirks Mode。

# android - 安卓日期显示

> ID：12204974
> 
> 赞同：0
> 
> 时间：2012-08-30T20:30:17.137
> 
> 标签：android, date, time

显示日期时出现问题。我做的一切都很好，日期显示......糟糕，它不正确！

它说 2012/07/30 应该是 2012/08/30。

我已经在手机上查看了我的日期，它是正确的。你有什么主意吗？

谢谢！！

一段代码：

```
 Calendar c = Calendar.getInstance();
 String sDate = c.get(Calendar.DAY_OF_MONTH) + "/" + c.get(Calendar.MONTH) + "/" +  c.get(Calendar.YEAR);

 view2.setText("" + et.getText()  + sDate ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:47:20.643

你为什么不使用`DateFormat`

```
DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd");
view2.setText(dateFormat.format(c.getTime()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:56:53.903

Calendar 对象无法按预期工作。get(Calendar.MONTH) 返回一个表示日期月份的常量，而不是月份的编号。这种细微的差别可以在这里看到： [java.util.calendar](http://developer.android.com/reference/java/util/Calendar.html#MONTH)

正如您将看到的，常量反映了从一月开始的从零开始的序列，因此您可以将常量用作数组中的索引器，以进行基于月份的查找。

出于您的目的，您可以将 1 添加到返回的 int 中，但您可能希望查看java.text 中的[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)。[本文](https://stackoverflow.com/questions/882420/string-to-date-in-different-format-in-java)提供了简要概述以帮助您入门。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:50:02.467

你可以改用这个，

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
String currentDateandTime = sdf.format(new Date()) 
```

# python - Ipython 的 sys.path 与 python 不同，并且不使用 PYTHONPATH？

> ID：12204981
> 
> 赞同：4
> 
> 时间：2012-08-30T20:30:45.813
> 
> 标签：python, ipython, pythonpath

似乎 IPython 没有考虑到我的 PYTHONPATH，而普通的 python 解释器会这样做。我在Windows 7上。

我的 PYTHONPATH: C:\workspace\python; C:\Python27\Lib\site-packages\spyderlib; C:\Workspace\Python\awesim\awesim

打印 sys.path：

```
import sys
for i in sorted(sys.path):
    print i 
```

这是我在 IPython 中获得的内容：

C:\JModelica.org-1.8\Python C:\Python27 C:\Python27\DLLs C:\Python27\lib C:\Python27\lib\lib-tk C:\Python27\lib\plat-win C:\Python27 \lib\site-packages C:\Python27\lib\site-packages\PIL C:\Python27\lib\site-packages\Pythonwin C:\Python27\lib\site-packages\ipython-0.13-py2.7.egg C:\Python27\lib\site-packages\ipython-0.13-py2.7.egg\IPython\extensions C:\Python27\lib\site-packages\numpy-1.6.2-py2.7-win32.egg C: \Python27\lib\site-packages\openpyxl-1.5.8-py2.7.egg C:\Python27\lib\site-packages\pandas-0.8.1-py2.7-win32.egg C:\Python27\lib \site-packages\pyzmq-2.2.0.1-py2.7-win32.egg C:\Python27\lib\site-packages\setuptools-0.6c11-py2.7.egg-info C:\Python27\lib\site-包\sphinx-1.1.3-py2.7.egg C:\Python27\lib\site-packages\statsmodels-0.4.0-py2.7-win32.egg C:\Python27\lib\site-packages\tornado- 2.3-py2.7.egg C:\Python27\lib\site-packages\win32 C:\Python27\lib\site-packages\win32\lib C:\Python27\lib\site-packages\wx-2.8-msw-unicode C:\Python27\scripts C:\windows\system32\python27.zip

在 python 控制台中也是如此：

C:\Python27 C:\Python27\DLLs C:\Python27\Lib\site-packages\spyderlib C:\Python27\lib C:\Python27\lib\lib-tk C:\Python27\lib\plat-win C: \Python27\lib\site-packages C:\Python27\lib\site-packages\PIL C:\Python27\lib\site-packages\Pythonwin C:\Python27\lib\site-packages\ipython-0.13-py2.7 .egg C:\Python27\lib\site-packages\numpy-1.6.2-py2.7-win32.egg C:\Python27\lib\site-packages\openpyxl-1.5.8-py2.7.egg C: \Python27\lib\site-packages\pandas-0.8.1-py2.7-win32.egg C:\Python27\lib\site-packages\pyzmq-2.2.0.1-py2.7-win32.egg C:\Python27 \lib\site-packages\setuptools-0.6c11-py2.7.egg-info C:\Python27\lib\site-packages\sphinx-1.1.3-py2.7.egg C:\Python27\lib\site-包\statsmodels-0.4.0-py2.7-win32.egg C:\Python27\lib\site-packages\tornado-2.3-py2.7.egg C:\Python27\lib\site-packages\win32 C:\ Python27\lib\site-packages\win32\lib C:\Python27\lib\site-packages\wx-2.8-msw-unicode C:\Workspace\Python\awesim\awesim C:\windows\system32\python27.zip C:\workspace\python

您可以看到正常的 python 控制台反映了 PYTHONPATH，但 IPython 输出没有。

预先感谢您的线索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-10T22:54:10.077

显然，当 Python 和 IPython 的 sys.paths 不同时会发生这种情况。

对于 IPython，一些快速的临时解决方案是：

```
import sys
sys.path.append('your paths') 
```

就我个人而言，我喜欢把它放在我正在处理的脚本中，以便包含我在项目目录中组织的模块，包括它们的子目录。（PS。不要​​忘记：如果主目录和所需的子目录包含（空）__init__.py 文件，则 python 在路径中包含子目录。）

一个永久的解决方案是创建一个新的 IPython 配置文件：

```
ipython profile create
ipython locate
/Users/username/.ipython 
```

转到 ipython 配置文件并编辑：profile_default/ipython_config.py

添加以下内容

```
c.InteractiveShellApp.exec_lines = [
     'import sys; sys.path.append("you paths")'
 ] 
```

这适用于 Linux，我猜也应该能够在 Windows 上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:00:38.473

从“开始”菜单链接的 .exe 启动器是由 setuptools 制作的，它们可能没有正确设置您的环境（我对 Windows 环境的了解不够肯定，或者是否可以修复）。

但是如果你从命令行启动 IPython，它肯定会正确地*继承*你的环境。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-04T19:40:24.190

我刚刚在运行 Python 2.6 的 Linux 上解决了一个类似的问题。

事实证明，我的虚拟环境设置为忽略系统路径。

它是通过关闭所有 python 程序并运行来修复的：

```
virtualenv --system-site-packages ~ 
```

# xml - 当顶级 xsd:element 包含 complexType 时，如何将其设为可选？

> ID：12204983
> 
> 赞同：0
> 
> 时间：2012-08-30T20:30:50.890
> 
> 标签：xml, xml-parsing, xsd, xsd-validation

我定义了这个 XSD 元素：

```
<xsd:element name="CU_FIRST_NAME">
    <xsd:annotation>
        <xsd:documentation>
            The first name of the customer that is getting billed for the order
        </xsd:documentation>
    </xsd:annotation>
    <xsd:simpleType>
        <xsd:restriction base="xsd:string">
            <xsd:maxLength value="50"/>
        </xsd:restriction>
    </xsd:simpleType>
</xsd:element> 
```

我知道这可以用单个元素替换，但我有一个更复杂的元素（序列），我需要将其设为可选。

有没有办法使第一个子元素（即层次结构中的下方`<xsd:schema>`）元素可选？

为了清楚起见，我想让整个`CU_FIRST_NAME`节点及其所有子节点成为可选的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:04:41.123

我最终意识到我使用的元素实际上是更高级别对象中的引用。

我解决这个问题的方法是：

原始代码：

```
<xsd:element ref="CU_FIRST_NAME"/> 
```

新代码：

```
<xsd:element ref="CU_FIRST_NAME" minOccurs="0"/> 
```

所以，我真的问错了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:40:51.747

```
<xs:element name="item" maxOccurs="unbounded">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="title" type="xs:string"/>
      <xs:element name="note" type="xs:string" minOccurs="0"/>
      <xs:element name="quantity" type="xs:positiveInteger"/>
      <xs:element name="price" type="xs:decimal"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

`minOccurs="0"`在第一个元素中使用。这样一来，如果您选择顶部，则必须选择其余部分。但如果你也把它放在孩子身上，那么它们都是可选的。

# version-control - 通过 SSH 运行 VCS 的目的是什么？

> ID：12204987
> 
> 赞同：0
> 
> 时间：2012-08-30T20:31:10.067
> 
> 标签：version-control, ssh

一般来说，我对 SSH 和 *nix 系统不是很熟悉，所以请原谅我可能提出的愚蠢问题。

通过 SSH 连接对 VCS 进行隧道传输（希望这是一个合适的术语）背后的好处和确切目的是什么？是速度吗？还是安全？或者是其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:46:51.820

安全性，并且 SSH 是一种标准的传输协议。SSH 也经常使用密钥身份验证来提供与 VCS 的无密码交互。速度不是好处，因为 SSH 加密传输，因此需要时间进行加密/解密。

为什么选择标准传输协议？获得防火墙许可更直接，VCS 不必重新发明轮子等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:50:46.403

这是一个主观的答案，但以下是我将通过 SSH 隧道传输任何应用程序协议的三个原因，按重要性排序：

1.  认证和授权

    我不必维护我自己的用户数据库，不必考虑密码加密，不必再让系统管理员管理其他事情。

2.  连接管理

    我可以专注于我的应用程序级通信，而不必担心我已经创建了一个可利用的安全漏洞。

3.  管理员更有可能打开知名端口

# jquery - JQuery UI 一个滑块上有两个不同的处理程序

> ID：12204991
> 
> 赞同：1
> 
> 时间：2012-08-30T20:31:42.677
> 
> 标签：jquery, jquery-ui, uislider

所以我试图让一些东西像这样工作：在一个处理程序中获得旧值，它有自己的外观，并且这些应该是静态的（用户不能移动它）第二个也应该有自己的外观并且应该与第一个相比，两边都可以拖动，可以获得更小或更大的值。

例如，范围从 0-50 白色标记在 23 上，其他红色处理程序将可拖动到其他值（更大或更小）上，给出范围（彩色条）和值差（它也可以是负数）所以我把21 上的第二个标记，它将给出-2。

所以我用范围滑块尝试了很多次，将静态添加到单个，但没有得到解决方案，甚至没有关闭。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:24:20.617

一般的想法是找出你不想移动的句柄，然后取消它的滑动事件。 [在这里摆弄](http://jsfiddle.net/7VAtd/)

```
var firstHandle, secondHandle;

$("#slider​​​​​​​").slider({
    values: [0,50],
    slide: function(event, ui){
        var handleElem = $(ui.handle).get(0);
        if( handleElem == secondHandle.get(0)) {
            return false; //cancel slide
        }
    }
});
firstHandle = $("#slider").find(".ui-slider-handle:first");
secondHandle = firstHandle.next(); 
```

​</p>

# django - 找不到 django 管理 url (404)

> ID：12204994
> 
> 赞同：0
> 
> 时间：2012-08-30T20:32:00.503
> 
> 标签：django, apache, admin, mod-wsgi

我是 django 初学者。

我在 /var/log/apache2/error.log 中收到以下消息（apache 设置为调试级别）

> `[Thu Aug 30 16:15:11 2012] [info] mod_wsgi (pid=5616): Initializing Python. [Thu Aug 30 16:15:11 2012] [info] mod_wsgi (pid=5616): Attach interpreter ''. [Thu Aug 30 16:15:15 2012] [error] [client 172.24.113.130] File does not exist: /var/www/netvistra3 [Thu Aug 30 16:15:19 2012] [error] [client 172.24.113.130] File does not exist: /var/www/netvistra3`

我的 wsgi 文件位于`/usr/local/django/netvistra3/apache/netvistra3.wsgi`

管理站点似乎只适用于 django 的嵌入式网络服务器。

来自 apache2 虚拟目录站点的代码段：

```
 Alias /static/admin /usr/lib/python2.7/dist-packages/django/contrib/admin/static/admin
    WSGIDaemonProcess netvistra3 user=pbensel group=staff threads=5
    WSGIScriptAlias /netvistra3 /usr/local/django/netvistra/apache/netvistra3.wsgi
    <Directory /usr/local/django/netvistra3>
            WSGIScriptReloading On
            WSGIProcessGroup netvistra3
            WSGIApplicationGroup %{GLOBAL}
            Order allow,deny
            Allow from all
    </Directory> 
```

我非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:25:59.673

正如大卫所说，您必须采取正确的步骤来设置静态文件。你有：

```
Alias /static/admin /usr/lib/python2.7/dist-packages/django/contrib/admin/static/admin 
```

但缺少相应的：

```
<Directory /usr/lib/python2.7/dist-packages/django/contrib/admin/static>
Order allow, deny
Allow from all
</Directory> 
```

没有那个，你会发现静态文件失败并出现禁止错误。

不过，我还会检查您是否已正确设置设置以说明静态媒体在哪个 URL 下可用。

如果静态文件未正确提供，您将丢失管理页面的所有内容，这可能被视为无法正常工作。

还要按照建议查看 collectstatic ，因为像您正在做的那样从 Python 安装中引用静态媒体并不总是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:46:44.817

Django 在它自己的服务器下运行时有一点魔力，这有助于解决这个问题。在 Apache 等上部署时，您负责设置 Apache 或您使用的任何媒体服务器来提供管理文件。Django 文档在这个主题上非常好。请参阅以下指向[Django 文档](https://docs.djangoproject.com/en/1.3/howto/deployment/modwsgi/)的链接。

这是一个很常见的问题。所以，不要难过。如果您需要有关“部署 django 管理员”的任何更具体的帮助，只需 Google

顺便说一句，我对我的项目使用“collectstatic”方法并从 s3 存储桶中为它们提供服务。它工作得很好，似乎是一种非常普遍的做法。至少使用 Django 1.3。

# ruby-on-rails - RVM Gempath 未设置

> ID：12204995
> 
> 赞同：0
> 
> 时间：2012-08-30T20:32:01.087
> 
> 标签：ruby-on-rails, path, rubygems, rvm

我最近安装了 RVM。加载我的后，`.rvmrc`我尝试`bundle install`并收到错误消息，通知我`bundler`未安装。

安装后`bundler`，`bundler`未安装错误仍然存​​在。经过一些快速挖掘后，我发现 ruby​​gems 没有使用 RVM gem 路径。

这里是`gem env`：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.2 (2011-07-09 patchlevel 290) [x86_64-linux]
  - INSTALLATION DIRECTORY: /home/jhalecom/ruby/gems
  - RUBY EXECUTABLE: /home/jhalecom/.rvm/rubies/ruby-1.9.2-p290/bin/ruby
  - EXECUTABLE DIRECTORY: /home/jhalecom/ruby/gems/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /home/jhalecom/ruby/gems
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - "gem" => "--remote --gen-rdoc --run-tests"
     - "gemhome" => "/home/jhalecom/ruby/gems"
     - "gempath" => []
     - "rdoc" => "--inline-source --line-numbers"
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

这里是`~/.bashrc`：

```
# .bashrc

# Source global definitions
if [ -f /etc/bashrc ]; then
        . /etc/bashrc
fi

# User specific aliases and functions

[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" 
```

这里是`~/.bash_pofile`：

```
# .bash_profile

# Get the aliases and functions
if [ -f ~/.bashrc ]; then
        . ~/.bashrc
fi

# User specific environment and startup programs

PATH=$PATH:$HOME/bin

export PATH 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:39:53.410

你需要清理你的`~/.gemrc`，它会改变路径，最好是用重写它：

```
echo gem: --gen-rdoc --run-tests > ~/.gemrc
echo rdoc: --inline-source --line-numbers >> ~/.gemrc 
```

或删除错误的行：

```
sed -i '/gemhome|gempath/ d;' 
```

# matlab - matlab：cellfun中的乘法

> ID：12204996
> 
> 赞同：0
> 
> 时间：2012-08-30T20:32:03.447
> 
> 标签：matlab, bsxfun

嗨，我有以下 cellfun 操作：

```
b = cellfun(@(x) nansum(cross(u{1},x)),r,'UniformOutput',false); 
```

其中 u 和 r 是向量。我想将叉积的结果乘以一个名为 I 的标量，但它必须在总和内。我可以简单地做：

```
b = cellfun(@(x) nansum(I.*cross(u{1},x)),r,'UniformOutput',false); 
```

这行得通吗？

实际上只是尝试过并得到：

```
Matrix dimensions must agree.

Error in ==> cellcross>@(x)nansum(mag.*cross(u{1},x)) at 2
    b = cellfun(@(x) nansum(mag.*cross(u{1},x)),r,'UniformOutput',false);

Error in ==> cellcross at 2
    b = cellfun(@(x) nansum(mag.*cross(u{1},x)),r,'UniformOutput',false); 
```

有什么建议么？

更新：

```
b = cellfun(@(x) nansum(bsxfun(@times, mag(:),cross(u{1},x))),r,'UniformOutput',false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:31:03.113

好的，基于下面的长时间讨论，我现在掌握了您的问题。供将来参考：提供更多上下文/细节可以防止此类讨论。

无论如何，试试这个：

```
b = cellfun(@(x) nansum(...
    mag.* subsref(cross(u{1},x), struct('type', '()', 'subs', {':',':',3})) ),...
    r, 'UniformOutput',false); 
```

不是最漂亮的解决方案，但它可以满足您的要求。