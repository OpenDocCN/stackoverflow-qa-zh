# StackOverflow 问答 11461000-11461999

# android - 如何在三星设备上启用/禁用调试模式？

> ID：11461001
> 
> 赞同：1
> 
> 时间：2012-07-12T21:30:48.660
> 
> 标签：android, eclipse, debugging, adb, galaxy

这个问题已经被问过了，但答案似乎仍然不完整。已经找到的深刻答案如下：

1.  [如何将 Android 手机设置为“调试”设备？](https://stackoverflow.com/questions/7936847/how-do-you-set-an-android-phone-to-be-a-debug-device)
2.  [Android 设备选择器 - 调试列](https://stackoverflow.com/questions/3757365/android-device-chooser-debug-column)

但不幸的是，他们中没有一个人可以绝对肯定地解释它，为什么或为什么没有 Android 设备具有调试支持，顺便说一句。我不是指 AndoridManifest.xml 文件中的调试标志。

为了检查是否可以管理已植根的设备以启用调试模式，我已经植根了我的三星 Galaxy，但没有运气，即使植根的 Galaxy S 也无法调试。

如何启用/禁用三星设备上的调试模式？！

谢谢！

**编辑**为了澄清我寻找一个完整的调试启用设备，而不是 USB 调试。由于愚蠢的事实stackoverflow不允许我发布图像（低信誉分数），这个问题有点误解。我指的是完全调试模式，显示在标有调试的 Android 设备选择器列中。

**编辑2**

为了问题的完整性，我现在添加了屏幕截图图像。

![在此处输入图像描述](../Images/fb802831007d80bebf839db8baaed441.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-12T21:50:42.603

![在此处输入图像描述](../Images/7696570d8355cf1d59ca818a48ef17ce.png)

您只需在设备上启用 USB 调试功能。

# android - Android 的透明输入法

> ID：11461002
> 
> 赞同：6
> 
> 时间：2012-07-12T21:30:50.567
> 
> 标签：android, transparent

试图制作一个透明的Android InputMethod - 即底层内容显示到我正在开发的键盘。

我已经能够使传递给系统的视图变得透明——我认为——但在我的视图下面似乎有一些东西是纯白色的——并且混淆了底层内容。

绝对有可能，这些人做到了：

[https://play.google.com/store/apps/details?id=com.aitype.android.tablet.p&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5haXR5cGUuYW5kcm9pZC50YWJsZXQucCJd](https://play.google.com/store/apps/details?id=com.aitype.android.tablet.p&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5haXR5cGUuYW5kcm9pZC50YWJsZXQucCJd)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-02T01:24:58.043

我想到了！不确定这是否是您的游戏商店链接中的人所做的，但这对我有用。另外，我意识到这篇文章已有一年多的历史了，但我仍在回答它，以防万一其他人在尝试创建透明键盘时发现了这一点。

你眼中的“某物”实际上什么都不是——它是一片空白。您的键盘将整个视图向上推开，为其高度腾出空间，留下空白区域。您的透明键盘让这个空白区域显示出来。

这是解决方案：不要在 onCreateInputView 中返回您的视图，而是在 onCreateCandidatesView 中返回它。这是通常位于键盘上方并列出自动更正建议的视图。但是您将使用它来容纳您的实际键盘。

你想让你的键盘成为候选视图的原因是输入视图通常会向上推底层视图。当通过 android:windowSoftInputMode 显示键盘并且输入视图尊重他们的偏好时，各个应用程序可以决定他们希望如何表现，但候选视图总是使用 adjustPan。

来自文档：“请注意，由于候选视图倾向于显示和隐藏很多，它不会像软输入视图那样影响应用程序 UI：它永远不会导致应用程序窗口调整大小，只会导致它们如果需要用户可以平移以查看当前焦点。” [http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html](http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html)

因此，从 onCreateCandidatesView 返回透明视图，从 onCreateInputView 返回 null 并确保调用 setCandidatesViewShown(true) 以便显示候选视图（我在 onWindowShown 中调用它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T08:01:53.317

通常 InputMethodServices 使用与当前绑定应用程序的背景颜色相同的背景颜色。如果你想让这个透明，我认为你应该把它做成弹出窗口结构，而不是我认为的输入法窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-30T14:59:00.717

仅当您非常熟悉`InputMethodService`.

额外区域的 id 名称为**fullscreenArea**，您可以获取该区域的 id，然后 findViewById() 设置其背景。

在我练习之前，键盘看起来像这样：

[![出现前](../Images/dd7685542a4a7845231fbf945b1ad00c.png)](https://i.stack.imgur.com/0y6Ke.png)

一个巨大的空白封面下面的页面。

所以之后是：

[![后](../Images/58b294a3ff76964a89722b7d49a99b98.png)](https://i.stack.imgur.com/7UMoc.png)

您可以看到下面的页面，其中包含一个 EditText 和其他显示。

这是我的代码：

```
public static void makeKeyboardTransparent(InputMethodService service) {
    try {
        View decorView = service.getWindow().getWindow().getDecorView();
        final int viewId = fetchInternalRId("fullscreenArea");
        View fullscreenArea = decorView.findViewById(viewId);
        if (fullscreenArea != null) {
            modifyView(fullscreenArea);
            return;
        }
    } catch (Exception e) {
    }

    try {
        Class<?> superClass = service.getClass().getSuperclass();
        Field fullscreenAreaField = superClass.getDeclaredField("mFullscreenArea");
        fullscreenAreaField.setAccessible(true);
        View fullscreenArea = (View) fullscreenAreaField.get(service);
        if (fullscreenArea != null) {
            modifyView(fullscreenArea);
        }
    } catch (Exception e) {
    }
}

private static void modifyView(View fullscreenArea) {
    fullscreenArea.setBackgroundColor(Color.TRANSPARENT);
}

private static int fetchInternalRId(String name) throws Exception {
    Class<?> rIdClass = Class.forName("com.android.internal.R$id");
    return rIdClass.getDeclaredField(name).getInt(rIdClass);
} 
```

我提供了两种使空白区域透明的方法，它们在我的测试中都运行良好，您所需要的只是将您的 InputMethodService 传递给`makeKeyboardTransparent()`它，看看它可以做什么。

# jquery - JQuery 小册子问题

> ID：11461003
> 
> 赞同：7
> 
> 时间：2012-07-12T21:30:50.987
> 
> 标签：jquery

大家好，我刚刚发现了 JQuery 小册子，它看起来非常棒。但是，我无法让它工作。我刚刚完成 [了官方链接](http://builtbywill.com/code/booklet/installation)中的所有说明。我的HTML如下：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>New Web Project</title>
    <script type="text/javascript" src="jquery.booklet.1.3.1/booklet/jquery-1.7.2.min.js"</script>
    <script type="text/javascript" src="jquery.booklet.1.3.1/booklet/jquery-ui-1.8.18.custom.min.js"</script>
    <script type="text/javascript" src="jquery.booklet.1.3.1/booklet/jquery.easing.1.3.js"</script>
    <script type="text/javascript" src="jquery.booklet.1.3.1/booklet/jquery.booklet.1.3.1.min.js"</script>
    <link href="jquery.booklet.1.3.1/booklet/jquery.booklet.1.3.1.css" type="text/css" rel="stylesheet" media="screen"/>
    <script type="text/javascript" src="libro.js"></script>

</head>
<body>
    <div id="mybook">
       <div> 
          <h3>Yay, Page 1!</h3>
       </div>
       <div> 
          <h3>Yay, Page 2!</h3>
       </div>
       <div> 
          <h3>Yay, Page 3!</h3>
       </div>
       <div> 
          <h3>Yay, Page 4!</h3>
      </div>
  </div>
</body> 
```

js 文件 libro.js 是初始化小册子的文件：

```
$(function()
{  
  $('#mybook').booklet();
}); 
```

这就是让它发挥作用所需要的，但我只得到一个又一个的标签，我不知道还能做什么......有什么想法吗？谢谢。

# java - 带有 VB.NET 客户端的 Java 套接字服务器？

> ID：11461004
> 
> 赞同：3
> 
> 时间：2012-07-12T21:30:59.160
> 
> 标签：java, windows, vb.net, macos, sockets

这甚至可能吗？我在 mac 上有一个 java 服务器程序，我需要用它来与 windows 程序通信。我有客户端在 Java 中工作，但我似乎无法弄清楚如何让它在 VB.net 中工作......

这是Java代码...

```
import java.io.*;
import java.net.InetAddress;
import java.net.Socket;

public class socketClient {

public static void main(String[] args) {
    /**
     * Define a host server
     */
    String host = "10.1.1.194";
    /**
     * Define a port
     */
    int port = 19999;

    StringBuffer instr = new StringBuffer();
    String TimeStamp;
    System.out.println("SocketClient initialized");

    try {

         //Obtain an address object of the server
        InetAddress address = InetAddress.getByName(host);

        //Establish a socket connection
        Socket connection = new Socket(address, port);

        //Instantiate a BufferedOutputStream object  
        BufferedOutputStream bos = new BufferedOutputStream(connection.getOutputStream());

        /**
         * Instantiate an OutputStreamWriter object with the optional
         * character encoding.
         */
        OutputStreamWriter osw = new OutputStreamWriter(bos, "US-ASCII");

        TimeStamp = new java.util.Date().toString();
        String process = "Initiate file transfer on " + host + " port " + port
                + " at " + TimeStamp + (char) 13;

        //Write across the socket connection and flush the buffer
        osw.write(process);
        osw.flush();

        /**
         * Instantiate a BufferedInputStream object for reading /**
         * Instantiate a BufferedInputStream object for reading incoming
         * socket streams.
         */
        BufferedInputStream bis = new BufferedInputStream(connection.getInputStream());
        /**
         * Instantiate an InputStreamReader with the optional character
         * encoding.
         */
        InputStreamReader isr = new InputStreamReader(bis, "US-ASCII");

        //Read the socket's InputStream and append to a StringBuffer
        int c;
        while ((c = isr.read()) != 13) {
            instr.append((char) c);
        }

        //Close the socket connection.
        connection.close();
        System.out.println(instr);
    } 
    catch (IOException f) 
    {
        System.out.println("IOException: " + f);
    } 
    catch (Exception g) 
    {
        System.out.println("Exception: " + g);
    }
}
} 
```

这是我到目前为止的 VB.NET 代码......

```
Private clientSocket As Socket
Private host As String = "10.1.1.194"
Private port As Integer = 19999

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

    Try

        Dim add As New IPEndPoint(IPAddress.Parse(host), port)

        clientSocket = New Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp)

        clientSocket.Connect(add)

        Dim netStream As New NetworkStream(clientSocket, True)

        Dim outstream As Byte() = System.Text.Encoding.ASCII.GetBytes("Initiate file transfer from " _
        & System.Environment.MachineName & " on " & host & " port " & port & " at " & TimeOfDay)

        netStream.Write(outstream, 0, outstream.Length)
        netStream.Flush()

    Catch ex As Exception
        Debug.Write(ex.Message)
    End Try

    End Sub 
```

现在，如果我运行 vb 代码，它会挂起......并且 Mac 上的控制台中什么也没有出现（就像我使用 java 客户端时一样），但是，当我关闭 VB 代码时，我得到了 java.net .SocketException：连接重置错误，所以我必须非常接近解决这个问题。

问题是，我对套接字编程几乎一无所知，所以如果有人能把我推向正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:45:20.020

> 这甚至可能吗？

是的。

我没有看到您在 VB.NET 示例中的任何地方编写回车 (13) 字符，但您希望它出现在 Java 端以便将某些内容打印到控制台。

# soap - 如何为 XML-RPC 或 SOAP 访问启用 SAP FM 或 BAPI

> ID：11461008
> 
> 赞同：0
> 
> 时间：2012-07-12T21:31:13.087
> 
> 标签：soap, xml-rpc, sap, bapi

我刚刚创建了一个功能模块，使其远程启用，现在我想通过HTTP上*的 XML-RPC调用它。*我在*SAP NetWeaver App Server ABAP v7*上。为了通过 XML-RPC 公开我的 FM，还需要什么其他配置？如何配置端点 URL 以及所有这些？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:01:09.387

SDN上有几个关于这个主题的解释，如[here](http://www.sdn.sap.com/irj/scn/go/portal/prtroot/docs/library/uuid/f02b33fc-9eb1-2c10-0599-f2ef9fb5c5b6?QuickLink=index&overridelayout=true)和[here](http://wiki.sdn.sap.com/wiki/display/Snippets/Web+Service+provider+using+ABAP-RFC)描述从功能模块生成webservice，[here](http://wiki.sdn.sap.com/wiki/display/ABAPConn/Technical+Setup+and+Reset+of+the+Web+Service+Runtime)描述基本的webservice配置（即SICF）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-08T21:45:06.187

什么是 XML-RPC

不，这不可能直接以 XML-RPC 样式调用 SAP FM。您有两种解决方法：

1.  使用 SAP SOAP 适配器调用支持 SOAP 的 FM
2.  在您拥有的任何编程环境中为您的 XML-RPC 调用创建一个 SOAP 包装器。这很简单

SOAP 有什么问题

它是本机支持的，有很多[手册](https://blogs.sap.com/2013/12/04/create-a-webservices-on-abap-from-a-function-module/)如何做到这一点。

# c# - 在 LinQ 查询中转换 SQL 查询

> ID：11461010
> 
> 赞同：0
> 
> 时间：2012-07-12T21:31:13.157
> 
> 标签：c#, linq, entity-framework, linq-to-entities

如何将其转换为 LinQ？

```
SELECT *
FROM YourTable
WHERE id IN (
    SELECT MAX(id) FROM YourTable GROUP BY alarmId, alarmUnit
    ) 
```

到目前为止尝试过但不起作用

```
 var a= from x in YourTable .ToList()
                                  group x by new { x.alarmId, x.alarmUnit} into g
                                  from x1 in YourTable 
                                  where x1.ID == (from x2 in g select x2.ID).Max()
                                  select x1; 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:39:40.557

试试这个：

```
var a= from x in YourTable .ToList()
       group x by new { x.alarmId, x.alarmUnit} into g
             select new
             {
               alarmId = g.Key.alarmId,
               alarmUnit = g.Key.alarmUnit,
               id = g.Max(b => b.id)
             }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:43:19.607

```
var a = from x in YourTable
        where (
            from y in YourTable
            group y by new { y.alarmId, y.alarmUnit } into g
            select g.Max(z => z.ID)
        ).Contains(x.ID)
        select x; 
```

这应该产生以下 SQL

```
SELECT [t0].[ID] AS [ID], [t0].[alarmId] AS [alarmId], ...
FROM [YourTable] AS [t0]
WHERE EXISTS(
    SELECT NULL AS [EMPTY]
    FROM (
        SELECT MAX([t1].[ID]) AS [value]
        FROM [YourTable] AS [t1]
        GROUP BY [t1].[alarmId], [t1].[alarmUnit]
    ) AS [t2]
    WHERE [t2].[value] = [t0].[ID]
) 
```

在这种情况下*存在*等同于*in*。此外，如果 ID 字段不是键，它将根据您的原始问题返回具有匹配最大 ID 的所有记录。

# javascript - 如何在多步骤 Rails 3 表单中使用 jQuery 添加/删除一组字段？

> ID：11461020
> 
> 赞同：1
> 
> 时间：2012-07-12T21:31:39.193
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, forms

我有一个带有多步表单的 Rails 3 应用程序，我使用此 railscast 开发：[http: //railscasts.com/episodes/217-multistep-forms](http://railscasts.com/episodes/217-multistep-forms)

在表单的第三步（不是最后一步）中，我有一组字段，称为“受众”，其中包含 4 个选择框。

使用 Jquery，我在这组字段旁边有“添加”和“删除”链接，这样我就可以在表单中拥有多个“受众”。

例如，我从 1 个受众开始。如果我点击“添加”，那么我有另一个受众，总共有 2 个受众（2 组字段）。但是，如果我单击“删除”，那么该受众将从表单中删除，我将再次留下 1 个受众（1 组字段）。

此受众表单是嵌套的。我为此使用了嵌套表单 gem：[https ://github.com/ryanb/nested_form/](https://github.com/ryanb/nested_form/)

我的问题是，无论我尝试什么，表单的此受众部分似乎都无法正常工作。现在，当 Audience 表单页面第一次加载时，“删除”链接根本没有出现，每次我点击“添加”链接时，都会添加 2 组字段而不是 1 组。当我转到另一个页面，然后再次返回受众表单，然后“删除”链接重新出现，但“添加”链接仍然执行相同的操作。每次我返回该页面时，都会添加更多字段，甚至无需单击“添加”链接。另外，我对字段数量进行了限制，但这也不起作用。

我已经花了一周的大部分时间来解决这个问题，但我仍然无法弄清楚。我的 Jquery 技能并不出色，但我可以做到基础。我一再征求建议，但他们从来没有奏效。在这一点上我很绝望......几天前我已经开始用头撞墙了。

我在这里很好地演示了我想要什么，只需将“甜菜”替换为一组字段：http: [//jsfiddle.net/beehive/8zJr6/](http://jsfiddle.net/beehive/8zJr6/)

任何解决此问题的建议将不胜感激。也许我应该完全采用不同的方法？

**应用程序.js**

```
$(document).ready(function() {

    // Nested Audience form
    var x = $('#audiencefields');
    var i = $('#audiencefields p').size() + 1;

    $('#addlink').live('click', function() {
        if ($(".item", x).length < 3) {
            $('<p class="item" id="audiencecontainer">beets '+ i +'#removelink').appendTo(i);
            i++;
        }
        return false;
    });

    $('#removelink').live('click', function() {
        if (i > 2) {
            $(this).parents('p').remove();
            i--;
        }
        return false;
    });

}); 
```

**_audience_step.html.erb**

```
<div class="uploadcontent">
    <h1 class="uploadtitle">select your audience</h1>
    <div id="audiencefields">
        <p id="audiencecontainer">
            <%= f.fields_for :audiences do |audience_form| %>
                <ul class="uploadformlist">
                  <li>  
                    <%= audience_form.label :number_of_people, "Size" %><br />
                    <%= audience_form.collection_select :number_of_people, Audience::PEOPLE, :to_s, :to_s, :include_blank => true %>
                  </li>
                  <li>
                    <%= audience_form.label :gender %><br />
                    <%= audience_form.collection_select :gender, Audience::GENDERS, :to_s, :to_s, :include_blank => true %>
                  </li>
                  <li>
                    <%= audience_form.label :age %><br />
                    <%= audience_form.collection_select :age, Audience::AGES, :to_s, :to_s, :include_blank => true %>
                  </li>
                  <li>
                    <%= audience_form.label :ethnicity %><br />
                    <%= audience_form.collection_select :ethnicity, Audience::ETHNICITIES, :to_s, :to_s, :include_blank => true %>
                  </li>
                </ul>
                <%= audience_form.link_to_remove "Remove this audience", :id => "removelink" %>
           <% end %>
        </p>
   </div>
   <p><%= f.link_to_add "Add another audience", :audiences, :id => "addlink" %></p>

</div> 
```

**观众.rb**

```
class Audience < ActiveRecord::Base
  attr_accessible :age, :ethnicity, :gender, :number_of_people

  belongs_to :upload

  #validates_presence_of :age, :ethnicity, :gender, :number_of_people

  PEOPLE = ['5', '10', '25', '50', '75', '100']
  GENDERS = ['Male', 'Female']
  ETHNICITIES = ['Caucasian/White', 'African-American/Black', 'Latin/Hispanic', 'Asian', 'Indian', 'Middle-Eastern', 'Native American']
  AGES = ['0-2', '3-5', '6-12', '13-17', '18-29', '30-39', '40-49', '50-59', '60+']
end 
```

# c# - 在某些计算机上使用网络连接进行线程处理速度较慢，而在其他计算机上速度较快

> ID：11461021
> 
> 赞同：5
> 
> 时间：2012-07-12T21:31:44.730
> 
> 标签：c#, multithreading, sockets, imap

我有一个连接到 IMAP 服务器并下载电子邮件的 C# 程序。该程序是线程化的，在一台计算机上运行速度非常快，而在另一台计算机上运行速度非常慢。慢的就像第一个线程被锁定，其余的必须等待。以 5 个女巫为一组完成跳跃是有多少线程。快速的在大约 20 秒内通过 125 条消息。

两者都是 - 始终在同一个子网 - 连接到同一个服务器 - 运行相同的代码 - 具有相同操作系统的相同笔记本电脑硬件 - 64 位 Windows 7（服务包 1） - .NET 3.5 - 使用 VS 2010 Express 编译

任何想法都将不胜感激，我整天都在反对这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:07:35.997

如果您在两台计算机上都在调试模式下运行程序，则构建它并使用 Release .exe 文件或在非调试模式下运行程序。它会按照它必须的方式执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:45:04.673

检查 dos ping 命令是否在“慢”机器上花费了太长时间。对我来说似乎是局域网连接问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T09:53:02.603

尝试通过在 imap 服务器上放置一个大文件（例如数百兆字节）来检查网络连接速度。

然后尝试使用浏览器（我推荐 IE 旁边的东西）或标准 Windows 文件传输（SMB/CIFS）下载它。一次尝试一台机器。并确保在测试时网络不忙。

希望有帮助。:)

# ssl - 如果我获得了 ssl 证书 - 我仍然可以使用 http 访问我的网页吗？

> ID：11461031
> 
> 赞同：0
> 
> 时间：2012-07-12T21:32:31.530
> 
> 标签：ssl, https

如果我获得了 ssl 证书 - 我仍然可以使用 http（而不是 https）访问我的网页，以便它们加载更快吗？

或者也许只有我网站上某些页面的 ssl？（我正在使用网络托管，也许这很重要。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:41:14.760

是的。当您设置证书时，您可以将服务器配置为侦听端口 443（对于 SSL，它将为您的证书提供服务）以及端口 80（正常 HTTP 流量将通过的端口）。对于您绝对希望拥有 SSL 的页面，您需要强制用户访问 https:// URL。

# ruby-on-rails - Ruby 方法 Dir.glob 不返回文件列表

> ID：11461032
> 
> 赞同：1
> 
> 时间：2012-07-12T21:32:31.880
> 
> 标签：ruby-on-rails

我使用 Dir.glob 返回文件列表，如下所示：

file_location = "/path/to/file/"

@files = Dir.glob{"#(file_location)*")

当我使用 WEBrick 服务器在开发模式下运行我的应用程序时，这可以正常工作。但是，当我使用 apache 和乘客在同一台服务器上以生产模式运行我的应用程序时，它不会检索位于该目录中的文件。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:37:23.977

你可以试试：

```
file_location = "/path/to/file/"

@files = Dir["#{file_location}*"] 
```

# asp.net-mvc - 来自 AttributeRouting 中另一个控制器的 RenderAction

> ID：11461035
> 
> 赞同：1
> 
> 时间：2012-07-12T21:32:37.173
> 
> 标签：asp.net-mvc, routing

我正在使用带有 Asp.Net Mvc 4 RC 的 AttributeRouting 扩展。从同一个控制器调用 RenderAction 是可以的。但是当我从另一个控制器的视图中调用它时，我得到了“路由表中没有路由与提供的值匹配”异常。

PS：我已经测试了没有 AttributeRouting 的 Asp.Net MVC 4 RC。一切安好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:41:14.193

该问题与“区域”有关。您不能从另一个区域调用 RenderAction，您必须添加：

```
@{Html.RenderAction("Index", "Message", new { area = "" });} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:01:49.577

我认为您已在 Global.asax 中用您自己的自定义路线替换了所有常规路线。
您能否将一般路线（`{controller}/{action}`）放回文件中？它应该工作。

如果这不起作用，那么您可能必须 `[ChildActionOnly]`在您的操作中提供属性。

# http - 请求指定无效 Content-Encoding 标头的适当 HTTP 状态代码？

> ID：11461037
> 
> 赞同：33
> 
> 时间：2012-07-12T21:32:51.620
> 
> 标签：http, http-headers, http-status-codes

如果客户端发送 HTTP 请求并指定服务器无法解码的 Content-Encoding 标头，应该返回什么状态码？

**例子**

客户端将 JSON 数据 POST 到 REST 资源并使用 gzip 编码对实体主体进行编码。但是，服务器只能解码 DEFLATE 编码，因为它未能通过服务器学校的 gzip 类。

应该返回什么 HTTP 响应代码？我会说*415 Unsupported Media Type*但问题不是实体的 Content-Type ——而是其他支持的实体主体的编码。

哪个更合适：415？400？也许是自定义响应代码？

* * *

**附录：**当然，我已经彻底检查了 rfc2616。如果答案在那里，我可能需要一些新的矫正眼镜，但我不相信它是。

* * *

**更新：**

这与发送客户端可能无法接受的响应无关。问题是客户端正在向服务器发送可能是也可能不是服务器无法理解的编码中的有效媒体类型（根据`Content-Encoding`客户端与请求消息一起打包的标头）。

这是一个边缘情况，在处理浏览器用户代理时不会遇到，但它可能会出现在接受实体主体以创建/修改资源的 REST API 中。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-13T21:18:55.310

当我读它时，`415 Unsupported Media Type`听起来最合适。

来自 RFC 2616：

> ### 10.4.16 415 不支持的媒体类型
> 
> 服务器拒绝为请求提供服务，因为请求的实体采用所请求方法的请求资源不支持的格式。

是的，文本部分说的是“媒体类型”而不是“编码”，但实际的描述并没有提到这种区别。

新的热点[RFC 7231](https://www.rfc-editor.org/rfc/rfc7231#section-6.5.13)甚至是明确的：

> ### 6.5.13。415 不支持的媒体类型
> 
> 415（不支持的媒体类型）状态代码表示
> 源服务器拒绝为请求提供服务，因为有效负载
> 的格式不受目标资源上此方法的支持。
> **格式问题可能是由于请求指示的
> Content-Type 或 Content-Encoding**，或者是直接检查
> 数据的结果。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-12T21:57:21.173

他们应该把这个问题作为关于谁想成为百万富翁的最后一个问题！

好吧，浏览器发出了服务器无法服务的请求，因为客户端提供的信息采用服务器无法处理的格式。但是，这不是服务器不支持客户端提供的数据的错，而是客户端没有监听服务器的 Acccept-* 标头并以不适当的编码提供数据的错。这将使其成为客户端错误（400 系列错误代码）。

*   我的第一直觉是 400 Bad Request 在这种情况下是适当的响应。
*   405 Method Not Allowed 是不对的，因为它指的是 HTTP 动词是不允许的。
*   406 Not Acceptable 看起来可能有承诺，但它指的是服务器无法向客户端提供满足其发送的 Accept-* 请求标头的数据。这似乎不适合您的情况。
*   412 Precondition Failed 的定义相当模糊。这可能是合适的，但我不会打赌。
*   415 Unsupported Media Type 不正确，因为被拒绝的不是数据类型，而是编码格式。

之后，我们进入非标准响应代码的领域。

*   422 Unprocessable Entity 描述了一个响应，如果请求格式正确但在某种意义上它在语义上不正确，则应返回该响应。这看起来很合适，但它是 HTTP 的 WebDAV 扩展，而不是标准。

鉴于上述情况，我个人会选择 400 Bad Request。如果任何其他 HTTP 专家有更好的候选人，我会听他们的。;)

**更新**：我之前一直在他们的维基百科页面上引用 HTTP 状态。虽然那里的信息似乎是准确的，但也不够全面。查看[W3C](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)的规范提供了更多关于 HTTP 406 的信息，这让我认为 406 可能是正确的代码。

> 10.4.7 406 不可接受
> 
> 请求标识的资源只能根据请求中发送的接受头生成具有不可接受的内容特征的响应实体。
> 
> 除非它是一个 HEAD 请求，否则响应应该包括一个实体，该实体包含一个可用实体特征和位置的列表，用户或用户代理可以从中选择最合适的一个。实体格式由 Content-Type 标头字段中给出的媒体类型指定。根据用户代理的格式和能力，可以自动选择最合适的选项。但是，本规范没有为这种自动选择定义任何标准。
> 
> ```
>  Note: HTTP/1.1 servers are allowed to return responses which are
>   not acceptable according to the accept headers sent in the
>   request. In some cases, this may even be preferable to sending a
>   406 response. User agents are encouraged to inspect the headers of
>   an incoming response to determine if it is acceptable. 
> ```
> 
> 如果响应可能不可接受，用户代理应该暂时停止接收更多数据并询问用户以决定进一步的操作。

虽然它明确提到了 Content-Type 标头，但措辞提到了“实体特征”，您可以将其解读为涵盖 GZIP 与 DEFLATE 压缩等内容。

值得注意的一件事是，规范说，只发送数据可能是合适的，连同标头一起告诉客户端它采用什么格式以及它使用什么编码，并将其留给客户端进行整理. 因此，如果客户端发送一个表明它接受 GZIP 压缩的标头，但服务器只能生成一个带有 DEFLATE 的响应，那么将它与标头一起发送说它是 DEFLATE 应该没问题（取决于上下文）。

*   客户：给我一个 GZIPPED 页面。
*   服务员：对不起，没办法。我可以给你放气。这是 DEFLATE 打包页面。这对你好吗？
*   客户：嗯……我并不是真的想要 DEFLATE，但我可以解码它，所以我会接受它。

（或者）

*   客户：我想我得和我的用户说清楚。坚持，稍等。

# python - Python中next()的作用域

> ID：11461044
> 
> 赞同：6
> 
> 时间：2012-07-12T21:33:53.423
> 
> 标签：python, iterator

我正在尝试`next`在迭代器上使用该函数，但是，我在同一范围内有一个局部变量，它也被命名为`next`. 显而易见的解决方案是重命名局部变量，但是，我对 Python 还很陌生，所以我很想知道如何为`next`函数添加前缀，以便实现所需的行为。

我正在使用的代码如下所示：

```
for prev, curr, next in neighborhood(list):
    if (prev == desired_value):
        print(prev+" "+next)
        desired_value = next(value_iterator) 
```

请注意，我使用的是 Python 3.2。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T21:35:57.967

您可以使用`__builtins__.next`来引用`next`内置函数。

```
for prev, curr, next in neighborhood(list):
    if (prev == desired_value):
        print(prev+" "+next)
        desired_value = __builtins__.next(value_iterator) 
```

但是，正如您所指出的，显而易见的解决方案是为您的变量使用不同的名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-12T21:53:13.437

可以`next()`直接调用迭代器的方法。但是，您失去`StopIteration`了在迭代结束时抑制以支持查看默认值的能力。

```
desired_value = value_iterator.next() 
```

请注意，在 Python 3 中，此方法已重命名为`__next__()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T21:56:37.273

在将某些内容分配给下一个之前，请使用以下内容：

```
real_next = next 
```

# ruby - 带过滤器的 Nokogiri next_element

> ID：11461055
> 
> 赞同：3
> 
> 时间：2012-07-12T21:34:58.153
> 
> 标签：ruby, nokogiri, beautifulsoup

假设我有一个格式不正确的 html 页面：

```
<table>
 <thead>
  <th class="what_I_need">Super sweet text<th>
 </thead>
 <tr>
  <td>
    I also need this
  </td>
  <td>
    and this (all td's in this and subsequent tr's)
  </td>
 </tr>
 <tr>
   ...all td's here too
 </tr>
 <tr>
   ...all td's here too
 </tr>
</table> 
```

在 BeautifulSoup 上，我们能够得到`<th>`然后调用`findNext("td")`. Nokogiri 有`next_element`调用，但这可能不会返回我想要的（在这种情况下，它会返回`tr`元素）。

有没有办法过滤`next_element`Nokogiri 的电话？例如`next_element("td")`？

**编辑**

为了澄清起见，我将查看许多站点，其中大多数以不同的方式形成错误。

例如，下一个站点可能是：

```
<table>
 <th class="what_I_need">Super sweet text<th>
 <tr>
  <td>
    I also need this
  </td>
  <td>
    and this (all td's in this and subsequent tr's)
  </td>
 </tr>
 <tr>
   ...all td's here too
 </tr>
 <tr>
   ...all td's here too
 </tr>
</table> 
```

我不能假设任何结构，除了在具有类的项目下面会有`tr`s`what_I_need`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:56:30.177

首先，请注意您的结束`th`标签格式错误：`<th>`. 应该是`</th>`。修复这有帮助。

`th`一种方法是在找到节点后使用 XPath 导航到它：

```
require 'nokogiri'

html = '
<table>
<thead>
  <th class="what_I_need">Super sweet text<th>
</thead>
<tr>
  <td>
    I also need this
  </td>
<tr>
</table>
'

doc = Nokogiri::HTML(html)

th = doc.at('th.what_I_need')
th.text # => "Super sweet text"
td = th.at('../../tr/td')
td.text # => "\n    I also need this\n  " 
```

这利用了 Nokogiri 使用 CSS 访问器或 XPath 的能力，并且非常透明地进行。

拥有`<th>`节点后，您还可以使用 Node 的一些方法进行导航：

```
th.parent.next_element.at('td').text # => "\n    I also need this\n  " 
```

另一种方法是从表格顶部开始向下看：

```
table = doc.at('table')
th = table.at('th')
th.text # => "Super sweet text"
td = table.at('td')
td.text # => "\n    I also need this\n  " 
```

如果您需要访问`<td>`表中的所有标签，您可以轻松地遍历它们：

```
table.search('td').each do |td|
  # do something with the td...
  puts td.text
end 
```

如果您希望`<td>`通过它们包含的所有内容`<tr>`遍历行，那么单元格：

```
table.search('tr').each do |tr|
  cells = tr.search('td').map(&:text)
  # do something with all the cells
end 
```

# ruby-on-rails-3 - 为来自不同模型的表单重新填充提供数据

> ID：11461057
> 
> 赞同：0
> 
> 时间：2012-07-12T21:35:02.833
> 
> 标签：ruby-on-rails-3, activemodel

所以我在这里有一个棘手的问题，我不知道如何解决。

1.  我有一个提供者模型 has_many :educational_affiliations
2.  EducationalAffiliation belongs_to :institution & belongs_to :provider

我的数据库中有大约 9000 所大学，因此我使用了方便的[rails3-jquery-autocomplete](https://github.com/crowdint/rails3-jquery-autocomplete) gem 来为我提供预输入支持。这一切都很好 - 最重要的是，我正在使用 cocoon 来支持 :educational_affiliations 表单在提供者的编辑表单中的嵌套。

所以这就是问题所在 - 这对于提交新的附属记录非常有用，（我正在使用一些 jquery 在 :educational_affiliations_attributes 对象上设置 :institution_id ，效果很好）

**但是**当我稍后返回编辑时，当然 :institution_name 没有填充，因为它不是 :educational_affiliations 模型的一部分，它在 :institution 模型中。

这是我刚刚在 :educational_affiliations 中尝试的方法，我认为这是正确的解决方案：

```
class EducationalAffiliation < ActiveRecord::Base
  attr_accessible :degree, :graduation_year, :honors, :institution_name, :institution_id, :provider_id
  belongs_to :institution
  belongs_to :provider

  # attr_accessor :institution_name

  validates :institution_id, :graduation_year, :provider_id, :degree, presence: true

  def institution_name
    Institution.find(institution_id).name
  end

end 
```

（我让它使用 attr_accessor 进行保存，但我现在已经将其注释掉了）

因此，当我使用上述内容渲染编辑视图时，我得到一个**ActiveRecord::RecordNotFound: Couldn't find Institution without an ID** error — <strong>但是当我打开该语句的调试器时，模型似乎知道机构ID ...很困惑为什么它不捡起来。

我只是以最糟糕的方式这样做吗？我认为有一个愚蠢的解决方案.. :)

这是需要填充名称的部分：

```
.nested-fields
  = f.input :institution_name, url: autocomplete_institution_name_data_path, as: :autocomplete, :input_html => {:id_element => '#provider_educational_affiliations_institution_id'}
  = f.input :institution_id, as: :hidden
  = f.input :provider_id, as: :hidden, input_html: { value: current_provider.id }
  = link_to_remove_association "Remove Degree", f 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:45:12.603

而不是虚拟属性方法，请尝试以下定义属性：

```
delegate :name, :name=, :to => :institute, :prefix => true 
```

# android - 为什么位图大小在内存中大于 Android 中的磁盘？

> ID：11461061
> 
> 赞同：17
> 
> 时间：2012-07-12T21:35:29.517
> 
> 标签：android, memory, bitmap, size, heap-memory

我的 SD 卡上有一个 2448x3264 的图像，它消耗 1,667,072 字节，但是当我将它作为位图加载并使用它计算它的大小时，`getRowBytes()*getHeight()`我最终得到 15,980,544 字节。

为什么会发生这种情况，如何计算文件的实际大小？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-12T21:41:24.090

这是因为图像在磁盘上时会被压缩（以 JPG、PNG 或类似格式存储）。一旦将图像加载到内存中，它就不再被压缩并占用所有像素所需的内存（对于 RGBA_8888，通常为宽度 * 高度 * 4，对于 RGB_565，通常为宽度 * 高度 * 2）。

# c# - 在 ASP.NET c# 中设置 sqldatasource 选择语句时防止 SQL 注入

> ID：11461063
> 
> 赞同：1
> 
> 时间：2012-07-12T21:35:56.113
> 
> 标签：c#, asp.net, sql, sql-server, code-injection

关于在我的应用程序中防止 SQL 注入，我有一个简短的问题。

我的 Web 应用程序的两个不同功能使用文本框，用户可以使用这些文本框从 MSSQL 数据库中搜索项目。此信息显示在 GridView 中。

我使用此方法创建查询：

```
sqldatasource.SelectCommand = "SELECT x from x where this_id LIKE '%" + txtbox.Text + "%' ORDER BY x ASC"; 
```

显然，接受用户输入并将其直接输入到这样的查询中会打开基本的 SQL 注入。请有人解释我如何参数化它以防止我的应用程序中的 SQL 注入？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T21:55:06.300

```
sqldatasource.SelectCommand = @"SELECT x from x where this_id LIKE @inText ORDER BY x ASC";

cmd.Parameters.AddWithValue("@inText", "%" + txtbox.Text + "%"); 
```

请注意，如果您`LIKE`以通配符开头 a，您将会感到痛苦。一张大桌子会伤心，慢慢走。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:51:46.240

一种（不是很好，但总比没有好）的方法是清理 txtBox.Text 的内容，然后使用清理后的结果。

```
sqlsource.SelectCommand = "SELECT x from x where this_id LIKE '%" + SanitizedString(txtBox.Text) + "%';";

// ... codes ...

private string SanitizedString(string given)
{
   string sanitized = given.Replace(";", string.Empty);
   sanitized = sanitized.Replace("--", string.Empty);
   // ... ad nauseum, conditions galore ...

   return sanitized;
} 
```

...但是，这是非常劳动密集型的。

要做的事情是以存储过程的形式使用绑定变量。据我所知，您可以绑定您的过滤器 txtbox.Text 条件，然后将其传入。

数据库上的查询很简单，例如：

```
SELECT x from X where this_id LIKE :filter ORDER BY x ASC 
```

要调用它，您需要研究 MSSQL 如何与存储过程进行通信。

绑定变量使您的代码完全防 SQL 注入。 *爱绑定变量*，因为他们会爱你。而邪恶的 hax0rs 不会。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T22:21:02.567

感谢您的回答。最后我在参数化查询中使用了 MSDN 网站上的这个：

```
 GetSubInfo.SelectParameters.Add("xparam", txtbox.Text);
    GetSubInfo.SelectCommand = "SELECT x from x where x_id LIKE @xparam ORDER BY x ASC"; 
```

这与霍根的答案非常相似，语法略有不同。希望这可以帮助！

# wordpress - .htaccess 从所有 URL 中删除子目录名称

> ID：11461065
> 
> 赞同：1
> 
> 时间：2012-07-12T21:35:58.220
> 
> 标签：wordpress, .htaccess

我正在挖掘网络，并没有找到任何合适的解决方案来解决这个问题。基本上，我想从所有 URL中删除子目录（ **subdirname ）名称，例如：**

```
http://test.com/subdirname/
http://test.com/subdirname/content/
http://test.com/subdirname/content/newpage 
```

该网站基于 Wordpress，位于**/subdirname**。我有两个 .htaccess 文件，一个在根目录中：

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /

# Protect hidden files from being viewed
<Files .*>
    Order Deny,Allow
    Deny From All
</Files>

# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_FILENAME} !-d

#RewriteCond %{REQUEST_URI} !^(/var|/static)
#RewriteCond %{REQUEST_URI} !^(/index\.php|/var|/static)

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT]

RewriteCond %{HTTP_HOST} ^(www\.)?test\.com$ [NC]
RewriteCond %{REQUEST_FILENAME} !/subdirname/
RewriteRule ^(.*)$ /subdirname/$1 [L] 
```

第二个在 /subdirname/ 目录中：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /subdirname/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /subdirname/index.php [L]
</IfModule>
# END WordPress 
```

* * *

如果有人有一些提示如何解决它，请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T01:52:14.560

您应该能够将[WordPress 设置为在您的根域中显示，但安装在子目录中](http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory)。只需在“设置”->“常规”屏幕下更改站点 URL。将子目录保留在 WordPress URL 框中。[然后您将在http://yoursite.com/subdirectory/wp-admin](http://yoursite.com/subdirectory/wp-admin)登录，但人们会在[http://yoursite.com](http://yoursite.com)访问您的网站。

# mysql - 如何在数据库中构造表活动？

> ID：11461075
> 
> 赞同：0
> 
> 时间：2012-07-12T21:36:56.947
> 
> 标签：mysql, database-design

我有一个用 cakephp 编写的带有 mysql 数据库的站点。在我的网站中，我想跟踪每个用户的活动，例如（比如这个网站）如果用户插入一个产品，我想将此活动放入我的数据库中。我有 2 种方法：1）一个名为活动的表，其中包含： - id - user_id - 标题 - 文本 - 类型（活动类型：评论，帖子编辑）

2）更多由活动区分的表 - 表activity_comment - 表activity_post - 表activity_badges

问题是当我进入用户的页面活动时，我可以有不同类型的活动，但我不知道哪种解决方案更好，因为评论有标题和评论，帖子只有文字，徽章的表有一个外部ID（例如）ecc ...请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:28:33.057

我对 CakePHP 不熟悉，但从纯粹的数据库角度来看，您的数据模型应该类似于：

![在此处输入图像描述](../Images/3ba5f38a4d93ca8da5889f58f5e12138.png)

该![在此处输入图像描述](../Images/0a6a829aab105752e204ba01456c0776.png)符号表示类别（又名继承、子类、子类型、泛化层次结构等）。[查看ERwin 方法指南](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)中的“子类型关系”以获取更多信息。

通常有 3 种策略来实现该类别：

1.  单个表中的所有类型。这需要大量的 NULL 并且需要 CHECK 来确保单独的子类型不会被不恰当地“混合”。
2.  单独表中的所有具体类型（不包括基础，在您的情况下为 ACTIVITY），这意味着公共字段和关系必须在所有子表中重复。
3.  单独表中的所有类型（包括基础）。此实现需要更多的 JOINing，但灵活且干净。它应该是您的默认设置，除非有强烈的反对理由。

# javascript - 来自 AJAX 请求的发布参数在 ColdFusion 的表单范围内未定义

> ID：11461078
> 
> 赞同：2
> 
> 时间：2012-07-12T21:37:01.963
> 
> 标签：javascript, ajax, json, coldfusion, coldfusion-8

我正在开发一个 ColdFusion 8 培训应用程序，我在其中发出一些 AJAX 请求（没有任何库，如 jQuery）来支持一个非常基本的 CRUD 应用程序。高级架构包括一个 CFM 视图、一个具有远程访问方法的 CFC，它接收 AJAX 请求，以及一个充当模型并具有所有数据库查询的 CFC。对于仅检索不需要任何类型的绑定变量的数据（例如从表中获取所有行），AJAX 查询工作正常。但是，当我尝试将任何内容发布到 CFC 中间层时，我收到有关我正在寻找的值在 Form 范围内未定义的错误（据我所知，这是存储后参数的位置）。

以下是 JS AJAX 请求的示例：

```
 function addLocation(locToAdd) {
            var thisAccess = new AccessStruct("POST", "jsontest.cfc?method=addNewLocation", getLocations, "newLoc=" + JSON.stringify(locToAdd));
            accessWrapper("addLoc", thisAccess);

    function accessWrapper(action, accessDef) {
            var ajaxRequest = new XMLHttpRequest();
            var nextStep;
            if (action != "getLocs") {
                nextStep = getLocations;
            } else {
                nextStep = buildTable;
            }

            ajaxRequest.onreadystatechange = function() { // using a closure so that the callback can
                if (ajaxRequest.readyState == 4) {        //   examine the request and nextStep
                    if (ajaxRequest.status == 200) {
                        if (nextStep != null) {
                            nextStep(ajaxRequest);
                        }
                        return true;
                    } else {
                        alert("Request Could Not Be Completed; Errors On Page");
                        return false;
                    }
                }
            }
            ajaxRequest.open(accessDef.method, accessDef.url, true);
            ajaxRequest.send("newLoc=" + accessDef.params);
    }

    function Loc(locCode, parLocCode, name, addrL1, addrL2,
                            city, stateProv, postal, locTypeCode) {
            this.locCode     = locCode;
            this.parLocCode  = parLocCode;
            this.name        = name;
            this.addrL1      = addrL1;
            this.addrL2      = addrL2;
            this.city        = city;
            this.stateProv   = stateProv;
            this.postal      = postal;
            this.locTypeCode = locTypeCode;
        }

        function AccessStruct(method, url, nextStep, params) {
            this.method   = method;
            this.url      = url;
            this.nextStep = nextStep;
            this.params   = params;
        } 
```

基本上页面上发生的事情是正在为“用户”呈现由所有位置（loc）记录填充的表。有一个添加新用户的表单，当他们单击添加按钮时，会创建一个 Loc 结构，其中包含他们输入的信息并传递给 addLocation 函数。这将创建一个 Access 结构，其中将包括请求 URL、方法、用作回调的函数的名称以及任何 post 参数。这一切都传递到 accessWrapper 函数中，该函数将创建 XMLHttpRequest 并处理 AJAX 请求。

这是报告问题的中间层 CFC 中的 cffunction。我不会费心发布 DAO CFC，因为它已经在其他地方进行了测试，并且在此过程中甚至没有达到（因为它在中间 [或控制器] 级别失败）

```
 <cffunction name="addNewLocation" output="false" access="remote">
    <cfset var deserializedLocation = "">
    <cfscript>
        deserializedLocation = DeserializeJSON(Form.newLoc);
    </cfscript> 
    <cfobject component="locationDAO" name="locationDAOObj">
    <cfinvoke
        component="#locationDAOObj#"
        method="addLocation">
        <cfinvokeargument name="code" value="#deserializedLocation.locCode#">
        <cfinvokeargument name="parentCode" value="#deserializedLocation.parLocCode#">
        <cfinvokeargument name="name" value="#deserializedLocation.name#">
        <cfinvokeargument name="addr1" value="#deserializedLocation.addrL1#">
        <cfinvokeargument name="addr2" value="#deserializedLocation.addrL2#">
        <cfinvokeargument name="city" value="#deserializedLocation.city#">
        <cfinvokeargument name="stateProv" value="#deserializedLocation.stateProv#">
        <cfinvokeargument name="postal" value="#deserializedLocation.postal#">
        <cfinvokeargument name="locationType" value="#deserializedLocation.locTypeCode#">
    </cfinvoke>
</cffunction> 
```

请求响应中的错误是：500 Element NEWLOC is undefined in FORM

就像我之前说的，我检查了 Tamper Data 中的请求，那里看起来不错。提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T14:49:05.620

当您将 Ajax 发布到 CFC 时，绝对有一个 FORM 范围。

此示例通过 Ajax 将表单数据 POST 到*不带参数*的 CFC 函数，并返回 FORM 范围的 JSON 格式。是的，你应该有参数来记录，指定需要/不需要和数据类型，但它们不是强制性的。

你有什么理由不使用 jQuery 吗？它可能会让你的生活更轻松。

您将表单数据发送到 Ajax 调用的方式一定有问题。如果您使用 FireBug 观察您的 Ajax 调用，您可以看到 POSTed 参数。

**HTML**

```
<html>
    <head>
        <title>Ajax POST to CFC</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript" src="test.js">
    </head>
    <body>

        <form id="foo" action="" method="post">

            <input type="text" id="a" name="a" value="Hello" />
            <br />
            <input type="text" id="b" name="b" value="Goodbye" />
            <br />

            <textarea id="data" cols="30" rows="10" disabled="true"></textarea>
            <br />
            <input type="button" id="btnSubmit" value="Do Ajax!" />

        </form>

    </body>

</html>
```

**JavaScript**

```
`$(document).ready(function() {
    $('#btnSubmit').on('click', function() {
        $.ajax({
            asynch : true,
            type : 'POST',
            dataType : 'json',
            url : 'test.cfc?method=testing&returnformat=json',
            data : {
                a : $('#a').val(),
                b : $('#b').val()
            },
            success : function(data, textStatus) {
                $('#data').val(JSON.stringify(data));
            }
        });
    });
});`
```

`**氟氯化碳**`

```
``<cfcomponent>
    <cffunction name="testing" access="remote" output="false" returntype="string">
        <cfreturn serializeJSON( form ) />
    </cffunction>> 
</cfcomponent>``
```

* * *

 ``**老派，没有 jQuery，只有普通的 JavaScript**

我在这里找到了一个没有 jQuery 的 Ajax POST 的简单示例： [http ://www.openjs.com/articles/ajax_xmlhttp_using_post.php](http://www.openjs.com/articles/ajax_xmlhttp_using_post.php)

**HTML**
删除 jQuery SCRIPT 标记，将另一个 SCRIPT 更改为 test-nojq.js 并更改提交按钮以添加 onclick 事件。

```
`<input type="button" id="btnSubmit" value="Do Ajax!" onclick="doSubmit();" />`
```

`**JavaScript：test-nojq.js**`

```
``function doSubmit(){
    var http = new XMLHttpRequest();
    var url = "test.cfc";
    var params = "method=testing&returnformat=json";
        params += "&a=" + document.getElementById('a').value;
        params += "&b=" + document.getElementById('b').value;
    http.open("POST", url, true);
    //Send the proper header information along with the request
    http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    http.setRequestHeader("Content-length", params.length);
    http.setRequestHeader("Connection", "close");
    http.onreadystatechange = function() {//Call a function when the state changes.
        if(http.readyState == 4 && http.status == 200) {
            document.getElementById('data').value = http.responseText;
        }
    }
    http.send(params);
}``
```

* * *

 ``## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:41:41.430

成为`newLoc`一个论点，它应该工作。

```
<cffunction name="addNewLocation" output="false" access="remote">
  <cfargument name="newLoc">
  ...

</cffunction> 
```

**更新：**不知道为什么我一次调用远程方法时没有遇到表单范围。无论如何，这不是真的，但其余的答案应该仍然成立。````

# ruby-on-rails - 处理身份登录的 OmniAuth::Error (invalid_credentials)

> ID：11461084
> 
> 赞同：9
> 
> 时间：2012-07-12T21:37:36.870
> 
> 标签：ruby-on-rails, ruby, omniauth

我正在使用 OmniAuth Identity 进行正常登录。Rails 3.2.3 和 Ruby 1.9.3p194。

目前，当现有用户尝试使用无效凭据登录时，我收到以下错误：

```
Started POST "/auth/identity/callback" for 127.0.0.1 at 2012-07-12 17:00:03 -0400
(identity) Callback phase initiated.
  Identity Load (0.1ms)  SELECT "identities".* FROM "identities" WHERE "identities"."email" = 'test' LIMIT 1
(identity) Authentication failure! invalid_credentials encountered.

OmniAuth::Error (invalid_credentials):
  omniauth (1.1.0) lib/omniauth/failure_endpoint.rb:25:in `raise_out!'
  omniauth (1.1.0) lib/omniauth/failure_endpoint.rb:20:in `call'
  omniauth (1.1.0) lib/omniauth/failure_endpoint.rb:12:in `call'
  omniauth (1.1.0) lib/omniauth/strategy.rb:457:in `fail!'
  omniauth-identity (1.0.0) lib/omniauth/strategies/identity.rb:24:in `callback_phase'
  omniauth (1.1.0) lib/omniauth/strategy.rb:219:in `callback_call'
  omniauth (1.1.0) lib/omniauth/strategy.rb:175:in `call!'
  omniauth (1.1.0) lib/omniauth/strategy.rb:157:in `call'
  omniauth (1.1.0) lib/omniauth/strategy.rb:177:in `call!'
  omniauth (1.1.0) lib/omniauth/strategy.rb:157:in `call'
  omniauth (1.1.0) lib/omniauth/builder.rb:48:in `call'
  sass (3.1.19) lib/sass/plugin/rack.rb:54:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__2431360578939212022__call__3674666166259335855__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  quiet_assets (1.0.1) lib/quiet_assets.rb:20:in `call_with_quiet_assets'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/debugger.rb:20:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /Users/andrew/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/andrew/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/andrew/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

我希望能够在此表单中添加某种错误处理程序或救援，但我不确定如何。这是表格：

**会话/new.html.haml**

```
%p
  %strong Don’t use these services?
  = link_to "Create an account", new_identity_path
  or login below

= form_tag "/auth/identity/callback" do
  .field
    = label_tag :auth_key, "Email"
    %br
      = text_field_tag :auth_key
  .field
    = label_tag :password
    %br
      = password_field_tag :password 
```

我的会话控制器：

**session_controller.rb**

```
class SessionsController < ApplicationController

  def create
    debugger
    user = User.from_omniauth(env["omniauth.auth"])
    puts "ENVIRONMENT VARIABLE: #{env["omniauth.auth"].inspect}"
    puts "This is the user id: #{user.id}"

    session[:user_id] = user.id
    redirect_to root_url, notice: "Signed in!"

  end

  def destroy
    session[:user_id] = nil
    redirect_to root_url, notice: "Signed out!"
  end

  def failure
    redirect_to signup_path, alert: "Authentication failed, please try again."
  end

end
  .actions= submit_tag "Login" 
```

我的用户模型：

**用户.rb**

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :provider, :uid

  validates_presence_of :email
  validates_uniqueness_of :email
  validates_format_of :email, :with => /^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]{2,4}$/i

  def self.from_omniauth(auth)
    where(auth.slice("provider", "uid")).first || create_from_omniauth(auth)
  end

  def self.create_from_omniauth(auth)

    puts "Auth object: #{auth.inspect}"
    create! do |user|
      user.provider = auth["provider"]
      user.uid = auth["uid"]
      user.name = auth["info"]["name"]
      user.email = auth["info"]["email"]
      user.admin = false
    end

  end

end 
```

我的 OmniAuth 配置文件：

**全域认证.rb**

```
OmniAuth.config.logger = Rails.logger

Rails.application.config.middleware.use OmniAuth::Builder do
  provider :github, ENV['6c268d450fb1149afc3d'], ENV['1dba63b45a0c8b7e62dea9fc5c9a8f69bf6142b1']
  provider :identity, on_failed_registration: lambda { |env|
    IdentitiesController.action(:new).call(env)
  }
end 
```

我尝试在会话结束时添加这样的内容#create 操作：

```
rescue OmniAuth::Error
  flash[:error] = "invalid credentials"
  redirect_to signup_path 
```

但是我仍然收到有关无效登录的原始错误消息。如何处理无效的 OmniAuth Identity 登录？

**更新：**

解决方案是在omniauth.rb 中添加以下代码：

```
OmniAuth.config.on_failure = Proc.new { |env|
  OmniAuth::FailureEndpoint.new(env).redirect_to_failure
} 
```

session_controller.rb 的失败方法：

```
def failure
  redirect_to login_path, alert: "Authentication failed, please try again."
end 
```

（以及强制性的服务器重启）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T22:19:10.593

这似乎是一种有意的开发模式结果。滚动到[常见问题解答](https://github.com/intridea/omniauth/wiki/FAQ)`OmniAuth::FailureEndpoint does not redirect in development mode`中的“” 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-21T19:26:15.903

FAQ 中的内容：[https ://github.com/intridea/omniauth/wiki/FAQ](https://github.com/intridea/omniauth/wiki/FAQ)

### OmniAuth::FailureEndpoint 在开发模式下不重定向

默认情况下，OmniAuth 1.1.0 及更高版本在身份验证失败时会在开发模式下引发异常。如果您希望它重定向到失败页面，您可以在您的omniauth 配置中包含以下代码：

```
OmniAuth.config.on_failure = Proc.new { |env|
  OmniAuth::FailureEndpoint.new(env).redirect_to_failure
} 
```

# javascript - 使用 Async.js sortBy 的升序与降序排序顺序

> ID：11461090
> 
> 赞同：0
> 
> 时间：2012-07-12T21:38:13.983
> 
> 标签：javascript, node.js

我正在尝试使用 Async.sortBy 按日期属性对一组对象进行排序，从最新到最旧。一些谷歌搜索表明我通过在回调中传递 obj.date * -1 而不是 obj.date 来反转排序顺序，但这没有预期的效果。显然因为结果只是 NaN。

以今天的日期为例，我的日期格式为 2012-07-12。

抱歉，由于代码示例简短且缺少代码示例，我现在正在 iPad 上路上。

我猜想我可以反转排序的输出数组，但这不是一个特别好的解决方案。

```
[{title: "title", date: "2012-07-12"}, {title: "title2", date: "2011-07-12"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T09:08:47.607

这个解决方案怎么样？

```
async.sortBy([{title: "title", date: "2012-07-12"}, {title: "title2", date: "2011-07-12"}], function(myObject, callback){
    return parseInt( myObject.date.split( '-' ).join(''), 10 ) * -1;
}, function(err, results){ ... }); 
```

in 将日期字符串转换为可排序的整数，并通过乘以 -1 来反转它。

# solr - ids 参数如何在 solr 查询中工作？它会帮助我调试分片问题吗？

> ID：11461091
> 
> 赞同：0
> 
> 时间：2012-07-12T21:38:14.427
> 
> 标签：solr

我们有大量的 solr 分片，并且正在尝试设置多级聚合器。我的理解是，一个聚合器与其关联的核心不应超过 200 个。我们目前的计划是我们的第一级聚合器每个都在 100 个内核上工作。然后，我们将有另一个级别的聚合器将这些聚合在一起。到目前为止，这对我们不起作用，当我们查询第二级时，我们会收到 500 个内部服务器错误。深入研究这一点，我们发现我们的一级聚合器是给 NPE。我们还发现查询的一些翻译正在进行中。例如，我们为 2 级聚合器提供如下内容：

```
http://l2agghostname:8080/solr/core-00/select?q=* 
```

它将以下内容发送到级别 1：

```
http://l1agghostname:8080/solr/core-00/select?ids=a6_370573660942_76697809790_0,a7_370573660942_76697809790_4&wt=xml&q=* 
```

这表明它正在接收要返回的 ID，但我不确定该“ids”参数应该做什么。如果我将相同的查询直接插入到 1 级聚合器中，我会得到相同的错误，但是如果我只给它一个 doc id，如下所示：

```
http://l1agghostname:8080/solr/core-00/select?ids=a6_370573660942_76697809790_0&wt=xml&q=* 
```

然后它会返回信息！

这看起来很奇怪，但我也不确定我是否应该花时间尝试了解这个 ids 参数是如何工作的。我在追随红鲱鱼吗？

PS：`http://l1agghostname:8080/solr/core-00/select?q=*`确实按预期返回结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:27:40.647

我们最终发现 Solr 无法处理这样的搜索。Solr 将通过堆栈发送初始查询。然后聚合器将收集 ID 并将其发回。然后 Solr 应该使用 ID 检索文档。一旦 ID 被返回，它就无法回忆起检索所有 ID 的路径。因此，它将查询发送到错误的机器并发生错误。

# ruby-on-rails - 为什么我的模型中的特定参数没有通过并导致错误？

> ID：11461092
> 
> 赞同：1
> 
> 时间：2012-07-12T21:38:20.130
> 
> 标签：ruby-on-rails, stripe-payments

我正在将 Stripe 集成到我的 Rails 应用程序中，当我尝试运行付款表单时，我的 Stripe 日志中出现以下错误：

{ "error": { "type": "invalid_request_error", "message": "您必须提供有效卡" }

使用此请求正文：

{“计划”：“1”，“描述”：“jjets718@yahoo.com”}

我意识到，在请求正文中，当我在付款表单中提交信用卡信息时，我应该拥有 Stripe 给我的令牌。当我将付款保存在控制器中时，我使用我在模型中定义的以下方法：

```
def save_with_payment
 if valid?
   customer = Stripe::Customer.create(description: email, plan: 1, card: stripeToken)
   self.stripe_customer_token = customer.id
   save!
 end
rescue Stripe::InvalidRequestError => e
  logger.error "Stripe error while creating customer: #{e.message}"
  errors.add :base, "There was a problem with your credit card."
  false
   end 
```

如果有人可以帮助我弄清楚为什么在我创建客户时没有将 Stripe 令牌提交给 Stripe，以及如何修复潜在的错误，那就太好了。我的 Stripe javascript 生成一个名为“stripeToken”的 Stripe 令牌；所以问题一定在于控制器如何获取令牌并创建客户。

```
<head>
    <script type="text/javascript" src="https://js.stripe.com/v1/"></script>
    <!-- jQuery is used only for this example; it isn't required to use Stripe -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript">
        // this identifies your website in the createToken call below
        Stripe.setPublishableKey('pk_gV4NDoU8ymr5md49FJeNb5E1lIAda');

        function stripeResponseHandler(status, response) {
            if (response.error) {
                // re-enable the submit button
                $('.submit-button').removeAttr("disabled");
                // show the errors on the form
                $(".payment-errors").html(response.error.message);
            } else {
                var form$ = $("#payment-form");
                // token contains id, last4, and card type
                var token = response['id'];
                // insert the token into the form so it gets submitted to the server
                form$.append("<input type='hidden' name='stripeToken' value='" + token + "' />");
                // and submit
                form$.get(0).submit();
            }
        }

        $(document).ready(function() {
            $("#payment-form").submit(function(event) {
                // disable the submit button to prevent repeated clicks
                $('.submit-button').attr("disabled", "disabled");
                // createToken returns immediately - the supplied callback submits the form if there are no errors
                Stripe.createToken({
                    number: $('.card-number').val(),
                    cvc: $('.card-cvc').val(),
                    exp_month: $('.card-expiry-month').val(),
                    exp_year: $('.card-expiry-year').val()
                }, stripeResponseHandler);
                return false; // submit from callback
            });
        });

        if (window.location.protocol === 'file:') {
            alert("stripe.js does not work when included in pages served over file:// URLs. Try serving this page over a webserver. Contact support@stripe.com if you need assistance.");
        }
    </script>
</head> 
```

# jquery - 内容随 jquerymobile 消失（视频演示）

> ID：11461096
> 
> 赞同：0
> 
> 时间：2012-07-12T21:38:58.453
> 
> 标签：jquery, jquery-mobile

我正在使用 jquery mobile 编写移动应用程序。我似乎无法弄清楚为什么`div data-role='content'`Android 4.03+ 中的内容会消失。在 iOS Safari 和 Android 版 Chrome 上没有问题，一切正常。它只是默认的 Android 浏览器。请注意，当我在列表视图中点击时，所有内容都变得可见，但是一旦我在输入之外点击以移除焦点，它就会再次消失。页眉和页脚设置如下：

```
<header data-role="header" data-id="myheader" data-tap-toggle="false" data-position="fixed">

<footer data-role="footer" data-id="myfooter" data-position="fixed" data-tap-toggle="false"> 
```

有任何想法吗？视频显示我的意思：[点击我](http://youtu.be/KDCNnOl8Xps)

**编辑**：我最初说里面的一切`data-role='content'`都会消失，但再看一遍，我注意到插入列表视图的边框仍在显示。

**编辑2**：我还注意到，如果我`data-position="fixed"`从页眉和页脚中删除，问题就会消失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T08:37:39.217

另一种可能的解决方案可能是闪烁的 CSS 修复。

```
-webkit-backface-visibility: hidden; 
```

[如此处](https://stackoverflow.com/questions/10416065/why-does-my-jquery-mobile-app-not-show-correctly-in-the-android-4-0-3-browser)所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T14:45:50.283

我通过在 html 头中重新排列我的 css 文件来解决这个问题。我将所有 jqm 文件按加载顺序放在最后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T17:09:13.873

你的意思是这样吗？

```
 <html>
  <head>
     [your css]
     [jquery css]
     [jquery mobile css]
  </head>
  <body>
  ..
  </body>
  [scripts]
</html> 
```

?

# javascript - MeteorJS：使用 Backbone.js 进行路由

> ID：11461097
> 
> 赞同：3
> 
> 时间：2012-07-12T21:39:02.197
> 
> 标签：javascript, node.js, meteor, backbone.js, url-routing

我正在尝试在 MeteorJS 应用程序中使用 BackboneJS 实现路由器。当您调用 url 'localhost:3000/1' 我的路由器将 id '1' 存储在会话中。之后，我想从会话中获取 id 并在我的查询中使用它来从我的集合中选择一个对象。但是，每当我尝试在查询中使用会话属性时，它都会失败。所以我想知道是否有更好的方法来使用 MeteorJS 进行路由以及为什么我的查询失败。

**测试.js**

```
Meteor.subscribe("test");

Test = new Meteor.Collection("test");

Session.set("id", null);

Template.hello.test = function () {
  var avg = 0, total = 0, cursor = Test.find(), count = cursor.count();
  cursor.forEach(function(e)
  {
    total += e.number;
  });
  avg = total / count;

  var session_id = Session.get("id");

  var test = Test.findOne({id: session_id}); //doesn't work
  if (test) {
    test.avg = avg;
  }

  return test;
}

//ROUTER
var TestRouter = Backbone.Router.extend({
  routes: {
    ":get_id":    "get_id" 
  },
  get_id: function (get_id) {
    Session.set("id", get_id);
    console.log(get_id);
  }
});

Router = new TestRouter;

Meteor.startup(function () {
  Backbone.history.start({pushState: true});
}); 
```

**测试.html**

```
<head>
  <title>test</title>
</head>

<body>
  {{> hello}}
</body>

<template name="hello">
  <h1>Hello World!</h1>
  {{#if test}}
    {{#with test}}
      ID: {{id}}  Name: {{name}}  AVG: {{avg}}
    {{/with}}
  {{/if}}
</template> 
```

**模型.js**

```
Test = new Meteor.Collection("test");

Test.remove({});

if (Test.find().count() < 1) 
{
    Test.insert({id: 1,
                 name: "test1",
                 number: 13});

    Test.insert({id: 2,
                 name: "test2",
                 number: 75});
}

Meteor.publish('test', function () {
  return Test.find();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T02:56:49.727

我调试代码并发现集合中的“id”是一个整数，而 session_id 是一个字符串。您需要 parseInt 来转换 session_id。

我使用[page.js](http://github.com/visionmedia/page.js)进行路由，这是“受 Express 路由器启发的微型客户端路由器”，来自“TJ Holowaychuk”的优秀作品。

我强烈建议这样做，因为 Meteor 和骨干在模型/集合和视图/模板中存在一些特征冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T12:35:28.273

Jifeng 是对的，如果您只需要路由功能，那么 page.js 就足够了。

我和季峰是一个团队。直到最近，我们才得出“Meteor 和 Backbone 在模型/集合和视图/模板中存在一些特征冲突”的结论。随着我们对 Meteor 和 Backbone 的理解越来越深入，这个结论需要重新评估。请参考我上一个实验代码为[BBCloneMail-on-Meteor](https://github.com/zhangcheng/bbclonemail-meteor)： Derick Bailey 的 BBCloneMail 修改为在 Meteor 上运行。关键是实现一个 Backbone 存储插件来连接 Meteor 的集合。插件接线生效后，只需稍作修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T12:03:34.293

您可能会发现 Iron Router 感兴趣 - 它是特定于流星的并且“了解您的订阅、数据源并帮助您解决常见问题”：[https ://github.com/EventedMind/iron-router](https://github.com/EventedMind/iron-router)

# oracle10g - 如何在oracle中将日期（字符串类型）转换为日期（日期时间）

> ID：11461099
> 
> 赞同：1
> 
> 时间：2012-07-12T21:39:07.907
> 
> 标签：oracle10g

我被 Oracle 查询困住了。在我的仪表板应用程序中，我们基本上必须显示总详细信息行的摘要图。在一个特定的选项卡中，我们需要详细信息中的日期时间，但我们仅按日期对摘要进行分组。

oracle中如何将日期（字符串类型）转换为日期（日期时间）。我在选择中使用选择，换句话说就是嵌套选择。内部查询返回字符串日期时间，外部查询无法将其转换为日期时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:42:15.907

您可以使用 TO_DATE 函数。

例如：
如果输入字符串的格式为**12/21/2012**
您可以尝试`TO_DATE('12/21/2012', 'MM/DD/RRRR')`

检查此链接以获取有关各种格式的更多信息：http: [//psoug.org/definition/TO_DATE.htm](http://psoug.org/definition/TO_DATE.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:42:41.453

您将使用该`to_date`函数将字符串转换为日期。例如

```
to_date( '2012-12-25 13:45:56', 'yyyy-mm-dd hh24:mi:ss' ) 
```

或者

```
to_date( '12/25/98', 'MM/DD/RR' ) 
```

作为第二个参数传入的格式掩码将取决于字符串的格式。[to_date 函数](http://docs.oracle.com/cd/B28359_01/server.111/b28286/sql_elements004.htm#i34924)的有效格式掩码集在文档中。

# google-apps-script - 设置从电子表格显示的 UI 的大小

> ID：11461104
> 
> 赞同：0
> 
> 时间：2012-07-12T21:39:19.833
> 
> 标签：google-apps-script

以下代码

```
function doGet() {
   var app = UiApp.createApplication();
   app.add(app.createHTML("<b>Hello World!</b>"));
   var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
   app.setWidth(100);
   spreadsheet.show(app);
  } 
```

显示电子表格中的 UI 容器。如何将其宽度设置为浏览器窗口的整个长度？如果我使用

```
 app.setWidth("100%"); 
```

即使[文档](https://developers.google.com/apps-script/class_html#setWidth)说该`.setWidth`方法接受百分比值，我也会收到错误消息。此外，我想知道是否可以将其垂直位置锚定到浏览器窗口的顶部或底部，以使 UI 容器的垂直位置不居中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:45:49.040

[我认为您在应用程序宽度](https://developers.google.com/apps-script/class_uiinstance#setWidth)和小部件宽度之间产生了混淆，[文档](https://developers.google.com/apps-script/class_uiinstance#setWidth)说“以像素为单位”

至于其余的，答案是否定的......对不起;-/

*但您最终可以通过手动拖动 UI 应用程序来移动它，您应该添加一个标题以“按标题抓取”*

# c - C/Unix 中的 Socketpair()

> ID：11461106
> 
> 赞同：38
> 
> 时间：2012-07-12T21:39:23.960
> 
> 标签：c, sockets, unix, ipc

我在同一个系统上有 2 个应用程序需要来回通信。根据我的研究，我相信这称为进程间通信，使用 socketpair() 是解决我的问题的最佳方法。

我正在（字面上）试图开始在 C 中使用 socketpair() 创建套接字。据我了解，套接字是一个非常复杂的主题，而我作为一个新手 C 程序员肯定无济于事。

我在过去的 48 小时内搜索过，阅读教程等，但我仍然无法得到它。我理解这个概念，但代码太混乱了。我已经读过这篇文章了几次：[http](http://beej.us/guide/bgnet/html/single/bgnet.html) ://beej.us/guide/bgnet/html/single/bgnet.html ，但这还不够简单。

有人可以提供一些示例（如此简单的五年级学生可以理解）或指向一个好的教程吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-12T21:54:56.190

您`socketpair`只能在创建两个进程的地方使用，如下所示：

1.  call `socketpair`- 现在你有两个套接字文件描述符（单个管道的两端）
    *   指定一端*为父*端，另一端为*子*端。无所谓，做个选择，以后坚持
2.  呼叫`fork`- 现在您有两个进程
    1.  如果`fork`返回零，你就是孩子。关闭*父*文件描述符，保留*子*描述符，并将其用作该进程的管道末端
    2.  如果`fork`返回非零，则您是父级。关闭*子*文件描述符，保留*父*文件描述符并将其用作管道的末端
3.  您现在有两个进程，每个进程都有一个文件描述符，代表同一管道的不同端。请注意，两个进程都在运行同一个程序，但在调用`fork`. 如果*父*级调用`write`其套接字，则*子*级将能够*从其*套接字读取该数据，反之亦然

这是直接翻译成代码：

```
void child(int socket) {
    const char hello[] = "hello parent, I am child";
    write(socket, hello, sizeof(hello)); /* NB. this includes nul */
    /* go forth and do childish things with this end of the pipe */
}

void parent(int socket) {
    /* do parental things with this end, like reading the child's message */
    char buf[1024];
    int n = read(socket, buf, sizeof(buf));
    printf("parent received '%.*s'\n", n, buf);
}

void socketfork() {
    int fd[2];
    static const int parentsocket = 0;
    static const int childsocket = 1;
    pid_t pid;

    /* 1\. call socketpair ... */
    socketpair(PF_LOCAL, SOCK_STREAM, 0, fd);

    /* 2\. call fork ... */
    pid = fork();
    if (pid == 0) { /* 2.1 if fork returned zero, you are the child */
        close(fd[parentsocket]); /* Close the parent file descriptor */
        child(fd[childsocket]);
    } else { /* 2.2 ... you are the parent */
        close(fd[childsocket]); /* Close the child file descriptor */
        parent(fd[parentsocket]);
    }
    exit(0); /* do everything in the parent and child functions */
} 
```

请注意，这只是示例代码：我省略了所有错误检查和合理的流协议。

* * *

如果您希望两个*单独*的程序进行通信（例如，您有一个名为*client*的可执行文件，一个名为*server*的可执行文件），则不能使用此机制。相反，您可以：

*   使用 UNIX 套接字（其中一台主机上的 IPC 管道由文件名标识 - 仅当*客户端*和*服务器*在同一台机器上运行时才有效）
*   或使用 TCP/IP 套接字（IP 地址和端口标识管道，*客户端*和*服务器*可以在不同的机器上）

* * *

如果您并不*特别*需要套接字，并且很乐意要求*客户端*和*服务器*在同一台机器上运行，那么您也可以使用共享内存或消息队列。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-12T21:47:41.060

`socketpair`创建一对*匿名*套接字，通常是 unix/local 套接字，它们仅用于父进程和子进程之间的通信，或者在需要使用它们的进程可以从共同祖先继承文件描述符的其他情况下。

如果您要在不相关的（从亲子关系的意义上）进程之间进行通信，则需要使用`socket`、`bind`和`connect`在一个进程中创建一个侦听套接字，并在另一个进程中创建一个客户端套接字以连接到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T19:25:45.157

对于两个进程之间的通信，是的，进程间通信或 IPC 是您应该寻找的。套接字只是通信方法之一，如果您必须实现一对多连接，它会很有用。意味着，一个服务器进程以请求-响应方式与许多客户端进程通信。由于您是 IPC 的新手，因此套接字地址和所涉及的细节可能看起来难以掌握是可以理解的。（尽管您会在适当的时候发现它们很容易:-)）

对于您的问题，我建议您使用更简单的 IPC 机制，例如 Pipe、FIFO、Message Queue。我不确定您是如何得出使用 socketpair 的结论的。由于您没有提及您需要的设计或 IPC 类型的任何内容，并且基于使用水平，我强烈建议您查看某些书籍或互联网中的 Pipe 或 FIFO 示例代码。它们看起来应该比套接字更容易实现并且工作得更快。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-12T21:48:40.023

使用 TCP/IP。虽然还有其他可用的 IPC 机制（例如 Unix 域套接字和 SYSV IPC），但出于多种原因，您最好使用 TCP/IP。这里有一些：

1.  网上有很多教程和其他信息描述了如何进行 TCP/IP
2.  现代系统，尤其是 Linux 和 *BSD，与 Unix 域套接字甚至 SYSV IPC 相比，没有对使用 TCP/IP 施加重大损失。
3.  您可以将许多库和框架用于通过 TCP/IP 进行通信的应用程序。

我不会使用 TCP/IP 在两个“程序”之间进行通信的唯一情况是它们实际上是线程而不是单独的程序。

# c# - 为具有相互属性的 2 个业务对象/视图模型创建基类

> ID：11461110
> 
> 赞同：1
> 
> 时间：2012-07-12T21:39:57.720
> 
> 标签：c#, asp.net-mvc, viewmodel, base

目前，我有一个 Teststep.cs 业务对象和一个绑定到 system.web.MVC 命名空间并具有诸如 IsDirty 之类的附加属性的视图模型挂件。

在表示层中，我有 2 个视图（模板（写入/读取 + 更多功能）和测试计划（几乎只读）），它们显示了 TeststepViewModel 的不同属性。

我应该创建一个 TeststepViewModelBase 并创建另外 2 个 ViewModels TemplateTeststepVM 和 TestplanTeststepVM 吗？

这样做有什么好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:03:21.747

不，您不需要在 ViewModel 和 View 之间进行 1-1 映射。在两个 View 之间共享一个 ViewModel 是完全明智的，只要它有意义。

ViewModel 是视图使用的模型的一个版本。如果您当前拥有的 ViewModel 代表一个逻辑组件，那么在两个 View 之间共享它是有意义的。如果视图为同一个业务对象提供了不同的视角，那么您可能走在正确的轨道上。

然而，这并不意味着您应该*默认*为多个视图使用单个 ViewModel 。我曾使用一个巨大的 ViewModel（超过 1000 行）参与过项目，它位于十几个 View 后面。这不是一个好的模式并且难以维护。

# macos - 以 Snow Leopard 为目标时，通过包含 i386 构建可以获得什么？

> ID：11461120
> 
> 赞同：1
> 
> 时间：2012-07-12T21:40:49.020
> 
> 标签：macos, osx-snow-leopard, 32bit-64bit

我正在制作一个在 Snow Leopard 及更高版本上运行的 Mac OS X 应用程序。目前构建很丰富，包括单独的 i386 和 x86_64 构建。

这样做有什么真正意义，还是我应该改为仅包含 x86_64 构建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T21:43:32.430

早期的英特尔 Mac（从 2006 年开始）具有 Core Duo CPU，根本没有 64 位模式。如果您关闭 i386 架构，您的应用将不再支持具有这些 CPU 的 Mac。

# sql-server - FOR XML 与 XSINIL 使用动态节点名称

> ID：11461122
> 
> 赞同：0
> 
> 时间：2012-07-12T21:40:52.843
> 
> 标签：sql-server, xml

有点卡在这个上。我有一个包含名称/值列的表：

```
NameValue table
-----------------------------------------------------------
Name varchar(100)    Value varchar(100)
-----------------------------------------------------------
FirstName            First value
SecondName           Second value
ThirdName            Null or Empty String
etc... 
```

我试图让我的结果看起来像下面的 XML，但我不能完全做到。

```
<MyValues xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <FirstName>First value</FirstName>
  <SecondName>Second value</SecondName>
  <ThirdName xsi:nil="true" />
</MyValues> 
```

为了使动态名称正常工作，我将 XML 连接起来并转换为 XML，如下所示：

```
select cast('<' + name +  '>' + value + '</' + name + '>' as xml)
from NameValue
for xml raw(''), root('MyValues'), elements xsinil 
```

上面的查询生成这个 XML 没有`xsi:nil="true"`

```
<MyValues xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <FirstName>First value</FirstName>
  <SecondName>Second value</SecondName>
  <ThirdName />
</MyValues> 
```

如果我不强制转换为 XML，我将得到以下内容：

```
<MyValues xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
&lt;FirstName&gt;First value&lt;/FirstName&gt;&lt;
etc... 
```

我尝试`xsi:nil="true"`在连接中添加，但收到有关缺少名称空间的错误。我猜要使这项工作正常进行，我将不得不将相同的命名空间添加到包含 null 或空字符串的每一行，因此结果如下所示：

```
<MyValues>
  <FirstName>First value</FirstName>
  <SecondName>Second value</SecondName>
  <ThirdName xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" />
</MyValues> 
```

结果集中可能有几百个这样的空字符串，所以我更愿意将命名空间放在根级别以节省带宽。这是可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:42:55.663

我没有使用 FOR XML，而是简单地将整个 XML 作为一个连接字符串。

```
declare @xml varchar(max)
set @xml = '<MyValues xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">'

select @xml = '<' + name +  
    case when len(value) = 0 then 'xsi:nil="true" />'
         else '>' + value + '</' + name + '>'
    end 
from NameValue 

select @xml + "</MyValues>" 
```

# installation - 我可以在我的托管服务器上安装 web2py（或类似框架）吗？（我只有 ftp 访问权限）

> ID：11461124
> 
> 赞同：2
> 
> 时间：2012-07-12T21:40:59.420
> 
> 标签：installation, web2py

我的域托管在 linux 服务器上（由 1und1.de 提供）。我没有 ssh 访问我的服务器，我只有 ftp。

它们提供丰富的 PHP 支持。通过他们的网络界面，我可以安装 wordpress，获取管理页面，并且可以拥有博客（例如）。

有对 python 的基本支持（我的 hello.py 有效）。但我没有看到任何安装任何 python 框架的选项。与 wordpress 不同。

是否可以为我的域安装 web2py、django 或任何其他框架？将 web2py 的源代码解压缩到服务器中的文件夹中就足够了吗？

谢谢，TMM。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T00:40:52.703

通过 FTP 安装 web2py 不是问题。您只需在本地计算机上解压缩，然后将其 FTP 到服务器。web2py中没有安装过程。问题是启动它。我怀疑他们会允许你启动内置的 web2py 服务器（火箭）。您必须以某种方式将 web2py 连接到他们提供的 Web 服务器。如何取决于他们提供什么。让我们假设他们有 Apache。询问他们是否有 mod_wsgi，以及是否有使用 wsgi 将任何 python 应用程序连接到 apache 的说明。您可能想在 web2py 邮件列表上寻求帮助。

# python - 有没有一种优雅的方式来使用 struct 和 namedtuple 而不是这个？

> ID：11461125
> 
> 赞同：7
> 
> 时间：2012-07-12T21:41:04.840
> 
> 标签：python, struct, binaryfiles, namedtuple

我正在读取由 C 中的记录组成的二进制文件，如下所示：

```
typedef _rec_t
{
  char text[20];
  unsigned char index[3];
} rec_t; 
```

现在我可以将其解析为具有 23 个不同值的元组，但如果我可以使用`namedtuple`将前 20 个`text`字节组合到`index`. 我怎样才能做到这一点？基本上，我宁愿分别拥有两个 20 和 3 个值的元组，而不是一个 23 个值的元组，并使用“自然名称”访问它们，即通过`namedtuple`.

我目前使用的格式`"20c3B"`为`struct.unpack_from()`.

注意：当我调用时，字符串中有很多连续的记录`parse_text`。

* * *

我的代码（精简到相关部分）：

```
#!/usr/bin/env python
import sys
import os
import struct
from collections import namedtuple

def parse_text(data):
    fmt = "20c3B"
    l = len(data)
    sz = struct.calcsize(fmt)
    num = l/sz
    if not num:
        print "ERROR: no records found."
        return
    print "Size of record %d - number %d" % (sz, num)
    #rec = namedtuple('rec', 'text index')
    empty = struct.unpack_from(fmt, data)
    # Loop through elements
    # ...

def main():
    if len(sys.argv) < 2:
        print "ERROR: need to give file with texts as argument."
        sys.exit(1)
    s = os.path.getsize(sys.argv[1])
    f = open(sys.argv[1])
    try:
        data = f.read(s)
        parse_text(data)
    finally:
        f.close()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T22:17:48.363

根据文档：[http ://docs.python.org/library/struct.html](http://docs.python.org/library/struct.html)

> 解压的字段可以通过将它们分配给变量或将结果包装在命名元组中来命名：

```
>>> record = 'raymond   \x32\x12\x08\x01\x08'
>>> name, serialnum, school, gradelevel = unpack('<10sHHb', record)

>>> from collections import namedtuple
>>> Student = namedtuple('Student', 'name serialnum school gradelevel')
>>> Student._make(unpack('<10sHHb', record))
Student(name='raymond   ', serialnum=4658, school=264, gradelevel=8) 
```

所以在你的情况下

```
>>> import struct
>>> from collections import namedtuple
>>> data = "1"*23
>>> fmt = "20c3B"
>>> Rec = namedtuple('Rec', 'text index') 
>>> r = Rec._make([struct.unpack_from(fmt, data)[0:20], struct.unpack_from(fmt, data)[20:]])
>>> r
Rec(text=('1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1'), index=(49, 49, 49))
>>> 
```

切片解包变量可能是个问题，如果格式是`fmt = "20si"`标准的或者我们不返回连续字节的标准，我们就不需要这样做。

```
>>> import struct
>>> from collections import namedtuple
>>> data = "1"*24
>>> fmt = "20si"
>>> Rec = namedtuple('Rec', 'text index') 
>>> r = Rec._make(struct.unpack_from(fmt, data))
>>> r
Rec(text='11111111111111111111', index=825307441)
>>> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T21:55:49.957

为什么不让 parse_text 使用字符串切片 (data[:20], data[20:]) 将两个值分开，然后用 struct 处理每个值？

还是取 23 个值并将它们一分为二？

我肯定错过了什么。也许您希望通过 struct 模块实现这一点？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-12T22:34:01.167

这是我的答案。我首先使用切片而不是使用切片来编写它，`struct.unpack()`但@​​samy.vilar 指出我们可以只使用“s”格式来实际取出字符串。（我应该记得的！）

这个答案使用`struct.unpack()`了两次：一次将字符串取出，一次将第二个字符串解包为整数。

我不确定你想对这个`"3B"`项目做什么，但我猜你想把它解压缩为一个 24 位整数。我在 3-char 字符串的末尾附加了一个 0 字节并解压缩为整数，以防万一这是你想要的。

有点棘手：这一行就像`n, = struct.unpack(...)`将一个长度为 1 的元组解包到一个变量中。在 Python 中，逗号构成元组，因此在一个名称后使用一个逗号，我们使用元组解包将长度为 1 的元组解包为单个变量。

另外，我们可以使用 a`with`打开文件，这样就不需要`try`块了。我们也可以用`f.read()`它一口气读取整个文件，而不需要计算文件的大小。

```
def parse_text(data):
    fmt = "20s3s"
    l = len(data)
    sz = struct.calcsize(fmt)

    if l % sz != 0:
        print("ERROR: input data not a multiple of record size")

    num_records = l / sz
    if not num_records:
        print "ERROR: zero-length input file."
        return

    ofs = 0
    while ofs < l:
        s, x = struct.unpack(fmt, data[ofs:ofs+sz])
        # x is a length-3 string; we can append a 0 byte and unpack as a 32-bit integer
        n, = struct.unpack(">I", chr(0) + x) # unpack 24-bit Big Endian int
        ofs += sz
        ... # do something with s and with n or x

def main():
    if len(sys.argv) != 2:
        print("Usage: program_name <input_file_name>")
        sys.exit(1)

    _, in_fname = sys.argv

    with open(in_fname) as f:
        data = f.read()
        parse_text(data)

if __name__ == "__main__":
    main() 
```

# php - 获取mysql中删除的主键列表

> ID：11461126
> 
> 赞同：1
> 
> 时间：2012-07-12T21:41:06.143
> 
> 标签：php, mysql, pdo

我有一个具有以下属性（列）{ PKA，a1，a2...} 的父表 A 和具有以下属性 {FKA，b1，b2...} 的子表 B PKA 是表的主键（自动增量） A 和表 B 没有任何主键，但它有一个引用表 A 的 PKA 列的外键列 FKA（1：n 关系）

添加条目：当我在表 A 中添加条目时...我使用 PDO API lastInsertId() 来插入记录并使用此值在表 B 中填充 FKA。

问题：1\. 但是，在删除条目时，我没有找到可以以类似方式使用的 API 'lastDeleteId()'

更大的问题：当我的删除发生在表 A 上时，根据设计，删除命令是： DELETE from table A where a1 = 。此 a1 列是非唯一的，因此 DELETE 命令可以返回需要从表 B 中刷新的多个 PKA 键

注意事项：

1.  我正在使用 PDO API
2.  MySQL 表（这里正在考虑）是 InnoDB
3.  我在事务模式下运行（beginTransaction() 和 commit()/rollback() 之间的多个 SQL 调用
4.  不寻找 CASCADE ON DELETE 选项

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:50:10.343

您可以在删除查询之后立即使用此查询，也可以将其用作批量清理方法，该方法将追溯适用于未与依赖父级一起删除的任何子级：

```
DELETE
    FROM  table_a
    WHERE a1 = ?;
SELECT    id
    FROM  table_b
    WHERE FKA NOT IN(SELECT id FROM table_a); 
```

或者您可以使用相同的 WHERE 子句在删除查询之前运行它：

```
START TRANSACTION;
    SELECT    id
        FROM  table_b
        WHERE FKA NOT IN(
            SELECT id
                FROM table_a
                WHERE a1 = ?;
        );
    DELETE
        FROM  table_a
        WHERE a1 = ?;
COMMIT; 
```

第二种方法需要包装在事务中，以确保您仅删除在选择时匹配的 id，即使其他线程可能已输入与这些过滤器匹配的新数据。

## 编辑 - 方法问题

如果您正在使用`$pdo->beginTransaction()`，然后发出一条`SELECT`语句，获取 id，在应用程序级别使用它们，然后发出`delete`语句，这将使事务保持活动状态，并且某些记录可能被锁定在该事务中，特别是如果您`FOR UPDATE`在初始`select`声明和/或如果您有高`ISOLATION LEVEL`s。

如果您在应用程序层使用耗时的操作，这将在数据库中长时间保持活动锁，并降低应用程序的并发连接容量。

我擅长避免与数据库服务器进行多次通信会话，只要一个就足够了。这就是为什么我一开始不会使用的原因`$pdo->beginTransaction()`。

我会将“获取要删除的 ID”查询扩展为“获取处理已删除记录所需的所有数据”。`SELECT`我会在事务中的一个通信会话中将查询发送到服务器，即使在应用程序接收到数据时数据已从存储中删除，语句的结果集也将被发送回应用程序有效载荷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:08:08.600

您所做的是选择要删除的记录的记录 ID 并将它们放在临时表中。然后你首先从子表中删除，然后是父表。在事务中执行此操作，以便在出错时回滚数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:49:51.497

我认为最简单的方法可能是将表 A 的内容复制到临时表中，然后执行删除，然后将临时表的 LEFT OUTER JOIN 到更新的表中，并使用它来查找不再具有的行对方。

另外，如果你没有明确地创建一个主键，InnoDB 不是在后台为你创建一个吗？我认为 InnoDB 存储引擎需要一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T01:14:27.763

仅仅考虑您的数据可能不一致的想法怎么样。也就是说，可能存在对已删除的 pk 的引用。每次使用 fk 时都要检查它。

然后添加一个计划任务来清理记录，方法是使用 select from where fk is not in（select pk）进行检查。

# php - 如何在不改变大小写的情况下使用 str_replace？

> ID：11461129
> 
> 赞同：0
> 
> 时间：2012-07-12T21:41:20.097
> 
> 标签：php, search, str-replace, capitalization

这是一个站点搜索脚本。如果我使用 str_ireplace，这将改变搜索结果的大小写。例如，如果查询字符串是“搜索字符串”，并且找到包含“搜索字符串”的记录，则后者将丢失其大小写。有什么办法吗？

我需要为搜索结果添加突出显示。

问题是找不到字符串或将其突出显示。我可以使用 str_ireplace 来完成此操作。但这将失去大写。我想要的是保持大写不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:54:10.843

您可以使用[preg_replace](http://de3.php.net/manual/de/function.preg-replace.php)。

```
$haystack = 'Some text here.';
$str = preg_replace( "#(.*)(text)(.*)#i", '\1<b>\2</b>\3', $haystack ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:42:56.923

改为使用[stripos](http://us.php.net/stripos)进行搜索。

```
if ( stripos( $haystack, $needle ) !== false )
    echo $needle, ' found!'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:44:12.133

只需使用 str_replace 而不是 str_ireplace。

# javascript - jqgrid 没有在服务器 acugis 中加载数据，但在本地一切正常

> ID：11461131
> 
> 赞同：3
> 
> 时间：2012-07-12T21:41:27.157
> 
> 标签：javascript, xml, jqgrid

您好，我的 jqgrid 有问题，我的 jqgrid 在本地加载一个 xml 文件（本地所有工作），但是在服务器中没有加载任何内容，我尝试了在互联网上找到的每个代码，但我不知道为什么它没有加载网格中的数据，jqgrid 总是显示一条消息，说正在加载......我等了一段时间，然后它停止并且没有加载任何东西，有人可以帮忙吗？在本地工作，但在服务器 acugis 中没有，请帮助

这是我的代码：

```
$("#listaRedCuidadana").jqGrid({
            treeGrid: true,
            treeGridModel : 'adjacency',
            ExpandColumn : 'distrito',
            url: '../../red_ciudadana/controller/controllerMostrarRedCuidadana.php',
            treeReader: {
                level_field: 'level',
                parent_id_field: 'parent_id',
                leaf_field: 'isLeaf',
                expanded_field: 'expanded'
            },
            datatype: "xml",
            mtype: "POST",
            colNames:["id_ciudadano","Distrito","Seccion","Rol","Clave Electoral","Nombre","Apellido Paterno","Apellido Materno"],
            colModel:[
                 {name:'id_ciudadano',index:'id_ciudadano', width:1,hidden:true,key:true},
                 {name:'distrito',index:'distrito',align:"left"},
                 {name:'seccion',index:'seccion', width:60,align:"center"},
                 {name:'rol',index:'rol', width:150,align:"left"},
                 {name:'clave_electoral',index:'clave_electoral', width:150,align:"center"},
                 {name:'nombre',index:'nombre', width:100,align:"left"},
                 {name:'apaterno',index:'apaterno', width:100,align:"left"},
                 {name:'amaterno',index:'amaterno', width:100,align:"left"}
            ],
            width:'916',
            /*autowidth:true,*/
            height:'auto', 
            pager: '#pager',
            caption:"COORDINADORES DISTRITALES",
            onSelectRow: function(id){
                var clv=$('#listaRedCuidadana').jqGrid('getCell',id,4);
                mostrarDetallesCuidadano(clv);
                initMapa();

            }
        });
        $("#listaRedCuidadana").jqGrid('navGrid',"#pager",{edit:false,add:false,del:false}); 
```

和我的 .php 文件

```
<?php
require_once '../../sesion/model/clsSesion.php';
require_once '../../red_ciudadana/model/modelRedCuidadana.php';

if ( stristr($_SERVER["HTTP_ACCEPT"],"application/xhtml+xml") ) {
        header("Content-type: application/xhtml+xml;charset=utf-8"); } else {
        header("Content-type: text/xml;charset=utf-8");
}
if(isset($_REQUEST['nodeid'])==FALSE) {
    $node =0;
}
else{
    $node = (integer)$_REQUEST["nodeid"];
}
$clsJqGrid = new redCuidadana();
$et = ">";
echo "<?xml version='1.0' encoding='utf-8'?$et\n";
echo "<rows>";
echo "<page>1</page>";
echo "<total>1</total>";
echo "<records>1</records>";

if($node >0) { //check to see which node to load
   $wh = 'parent_id='.$node; // parents
   //$n_lvl = $n_lvl+1; // we should ouput next level
} else {
   //$wh = 'ISNULL(parent_id)'; 
   $wh ='parent_id=0';// roots
}
$mostrarRegistros= $clsJqGrid->mostrarRegistros($wh);
foreach ($mostrarRegistros as $row){
   echo "<row>";         
   echo "<cell>".$row["id_ciudadano"]."</cell>";
   echo "<cell>".$row["distrito"]."</cell>";
   echo "<cell>".$row["seccion"]."</cell>";
   echo "<cell>".$row["rol"]."</cell>";
   echo "<cell>".$row["clave_electoral"]."</cell>";
   echo "<cell>".$row["nombre"]."</cell>";
   echo "<cell>".$row["apaterno"]."</cell>";
   echo "<cell>".$row["amaterno"]."</cell>";
   echo "<cell>".$row["level"]."</cell>";
   echo "<cell><![CDATA[".$row["parent_id"]."]]></cell>";
   if($row["level"] == "2"){echo "<cell>"."true"."</cell>";}
   else{echo "<cell>".$row["isLeaf"]."</cell>";}
   echo "<cell>".$row["expanded"]."</cell>";
   echo "</row>";
}
echo "</rows>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T22:51:36.457

**1.**尝试简单地从php中回显示例xml而不执行任何逻辑，看看它是否被JS脚本接收；

**2.**如前所述，尝试直接在浏览器中访问PHP脚本，看看它是否返回有效结果；

**3.**尝试在 chrome 中调试您的代码（不仅在 ff:firebug 中），这些都是很棒的工具，有时 chrome 可以显示 ff 错过了什么（反之亦然）。

这些步骤将帮助您隔离和发现问题。如果您检查了以上所有这些项目符号并且问题仍然存在 - 请在主题中提供结果，以便我们有机会帮助您。

干杯，祝你好运；）

# java - Java中do-while循环中创建的对象的生命周期

> ID：11461132
> 
> 赞同：0
> 
> 时间：2012-07-12T21:41:36.727
> 
> 标签：java

我有一个像这样的do-while循环

```
do {

   SomeObject someObject = new SomeObject();

} while(some condition is met); 
```

我想知道`someObject`对象的生命周期是什么以及它们何时有资格获得`GC collection`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T21:44:34.830

当当前范围内的任何引用不再可访问任何对象时，它就有资格进行垃圾回收。

在您的示例中，分配给的实例`someObject`将在创建它的单个循环迭代结束时符合 GC 条件，因为您只有一个对它的引用，并且该引用在循环结束时超出范围堵塞。

但是，这假设您在构造函数执行期间没有在其他地方传递对对象的引用，并且没有其他代码从循环中传递对对象的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:43:51.057

每次结束括号时，都会到达“}”。然后该括号和相应的开始括号之间的所有变量，“{”超出范围并被垃圾收集。

# seo - SEO URL 锚点和字符串而不是查询

> ID：11461137
> 
> 赞同：-2
> 
> 时间：2012-07-12T21:42:07.887
> 
> 标签：seo

这个 URL 是对 SEO 有好处，还是很奇怪？

[http://www.clarks.co.uk/c/mens-sale#Sort-is-price-by-descending-and-pagesize-is-200-and-page-is-1](http://www.clarks.co.uk/c/mens-sale#Sort-is-price-by-descending-and-pagesize-is-200-and-page-is-1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:55:41.307

为什么 ＃ ？

您可以轻松地使用这种格式：

... /mens-sale-Sort-is-price-by-descending-and-pagesize-is-200-and-page-is-1

更好的是：

... /mens-sale-Sort-is-price-by-descending-and-pagesize-is-200-and-page-is-1.html

或者如果你很难处理这些类型的 url，你可以使用这个：

... /mens-sale/Sort-is-price-by-descending-and-pagesize-is-200-and-page-is-1.html

# ruby - 如何从 SOAP:RPC:Driver 转移到 Savon

> ID：11461139
> 
> 赞同：0
> 
> 时间：2012-07-12T21:42:24.250
> 
> 标签：ruby, soap, rpc, ruby-1.9, ruby-1.8

正如[其他地方所](https://stackoverflow.com/questions/4878388/using-soap-and-other-standard-libraries-in-ruby-1-9-2)[讨论](https://stackoverflow.com/questions/6856698/rails-2-3-8-actionwebservice-ruby-1-9-2-problem) 的，Ruby 1.8 中可用的内容已在 Ruby 1.9 中删除。人们[建议](https://stackoverflow.com/a/2217268/21115)使用[Savon gem](http://savonrb.com/)，但我找不到任何关于如何转换现有代码的教程，特别是对于没有可用 WSDL 的端点。`SOAP::RPC::Driver`

例如，`SOAP::RPC::Driver`我们可以这样写：

```
require 'soap/rpc/driver'
client = SOAP::RPC::Driver.new 'http://example.com/endpoint', 'MY_NAMESPACE' 
```

添加方法（因为在我的情况下我没有可用的 WSDL）：

```
client.add_method 'MyMethod', 'Arg1', 'Arg2' 
```

然后打电话给他们：

```
response = client.MyMethod arg_one arg_two 
```

我看不到如何使用 Savon 添加这样的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:42:24.810

当[不使用 WSDL](http://savonrb.com/#-not-using-a-wsdl)时，必须`wsdl`明确设置（我觉得这有点违反直觉，但它有效）：

```
require 'savon'
client = Savon::Client.new do
    wsdl.endpoint = 'http://example.com/endpoint'
    wsdl.namespace = 'MY_NAMESPACE'; 
end 
```

我不相信`add_method`在 Savon 中存在等价物，但是您应该可以这样提出请求：

```
response = client.request 'MyMethod' do
  soap.body = { 'Arg1' => arg_one' }
end 
```

但是，当我这样做时，我收到以下错误：

```
Savon::SOAP::Fault: (SOAP-ENV:Client) SOAPAction shall match 'uri#method' if present 
```

我可以通过明确设置来解决这个问题`SOAPAction`：

```
response = client.request 'MyMethod', soap_action: '#MyMethod' do ... 
```

最后我得到了这个错误：

```
Savon::SOAP::Fault: (SOAP-ENV:Client) Denied access to method (MyMethod) in class (main) at /usr/lib/perl5/site_perl/5.8.8/SOAP/Lite.pm line 2128. 
```

这似乎是因为给定`wsdl.namespace`的请求没有按预期传递。我能够通过在两者中明确设置来解决这个`soap_action`问题`xmlns`：

```
response = client.request 'MyMethod', soap_action: 'MY_NAMESPACE#MyMethod', xmlns: 'MY_NAMESPACE' 
```

# javascript - 将 JSON 字符串解析为数组

> ID：11461142
> 
> 赞同：6
> 
> 时间：2012-07-12T21:42:32.813
> 
> 标签：javascript, json

我正在尝试从 JSON 解析字符串并将这些元素转换为 Javascript 中的数组。这是代码。

```
 var data = "{"fname":"Todd","lname":"James","cascade":"tjames","loc":"res","place":"home", "day0":"0,1,2,3,"}";
      var getDay = data.day0;
      var getDayArray = getDay.split(","); 
```

本质上，我正在尝试获取 day0，即 0、1、2、3，并将其转换为结构为

```
[0] = 0
[1] = 1
[2] = 2
[3] = 3 
```

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T21:45:42.997

像这样的东西。后面的逗号是故意的吗？

```
var getDayArray = JSON.parse(data).day0.split(",") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:46:12.910

这是内置在大多数现代浏览器 JavaScript 引擎中的。根据您所针对的环境，您可以简单地执行以下操作：

```
var data = JSON.parse(jsonString);
day0 = data.day0.split(","); 
```

这很简单。如果您的目标环境无法访问内置 JSON 对象，您应该尝试[这个 JSON 项目](https://github.com/douglascrockford/JSON-js/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T21:47:07.260

大多数现代浏览器都支持[`JSON.parse()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON). 你会这样使用它：

```
 var dataJSON = '{"fname":"Todd","lname":"James","cascade":"tjames","loc":"res","place":"home", "day0":"0,1,2,3"}'; // You need to remove the trailing comma
  var data = JSON.parse(dataJSON);
  var getDay = data.day0;
  var getDayArray = getDay.split(","); 
```

但是，最好修改为 dataJSON 生成值的任何内容，以返回

```
 var dataJSON = '{"fname":"Todd","lname":"James","cascade":"tjames","loc":"res","place":"home", "day0":[0,1,2,3]}'; 
```

# python - Python elementree 难以提取数据

> ID：11461153
> 
> 赞同：2
> 
> 时间：2012-07-12T21:43:26.540
> 
> 标签：python, xml, string, file

这是 XML：

```
<top>
    <target>
        <name>TARGET_NAME_1</name>
        <error_count>5</error_count>
        <error_examples>a string goes here</error_examples>
    </target>
    <target>
        <name>TARGET_NAME_2</name>
        <error_count>5</error_count>
        <error_examples>a string goes here</error_examples>
    </target>
</top> 
```

这是我正在尝试的：

```
tree = ETREE.parse(str(XML_FILE_PATH)) #this seems to work
top = tree.getroot()
targets = top.findall('target')
for target in targets:
    print target 
```

这给了我一个`<Element target at HEX_NUMBER>`. 那么如何提取每个目标的值，即`TARGET_NAME_1`？

干杯

编辑 - 我应该提到我使用的是 Python 2.6 版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:46:10.250

试试`target.get('name')`。

我是从[http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.get](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.get)的文档中得到的，看起来它可以满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T21:54:58.613

假设你想打印所有的名字，你可以这样做：

```
import xml.etree.ElementTree as ET
tree = ET.parse("people.xml")
top = tree.getroot()

for target in top:
     for x in target:
         if x.tag == 'name': print x.text 
```

获得第一个目标的名称更短：

```
print top[0][0].text 
```

但由于它依赖于项目订单，甚至不检查项目是否正确，你可能不应该这样做

因此，要获取所有名称，并且只有名称，我可能会使用如下列表理解：

```
[target.find('name').text for target in top] 
```

# knockout.js - 刷新剔除数据绑定为空

> ID：11461155
> 
> 赞同：1
> 
> 时间：2012-07-12T21:43:31.047
> 
> 标签：knockout.js

```
 var viewModel = {
        foos: ko.observableArray([]),

        reloadFoos: function () {
            getFoos();
        }
    };

    var foo = function () {
        this.Id = ko.observable();
        this.Name = ko.observable();
    };

    function getFoos() {
        $.get("/myroute/", "", function (data) {
            for (var i = 0; i < data.length; i++) {
                var f = new foo();
                f.Id = data[i].Id;
                f.Name = data[i].Name;
                viewModel.foos.push(f);
            }

            ko.applyBindings(viewModel);
        });        
    }

<div data-bind="foreach: viewModel.foos">
    <button data-bind="click : $parent.reloadFoos, attr: { id: Id }"></button>
    <label data-bind="value: Name"></label>
</div> 
```

一切都加载正常，但是当我单击按钮时，div 标签是空白的，并且没有绑定任何内容，但我没有收到任何错误，并且似乎运行了所有代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:47:13.353

我创建了一个小提琴，做了一些改变，使这项工作：http: [//jsfiddle.net/johnpapa/dft3Z/](http://jsfiddle.net/johnpapa/dft3Z/)

诚然，我无法确切地弄清楚您要做什么。但是小提琴读取数组（我使用数组而不是ajax调用只是为了保持本地化），并创建一系列按钮。然后它为每个绑定单击事件，然后添加一组全新的按钮。您的代码存在一些问题。applyBindings 应该只发生一次，viewModel 已经绑定，因此 HTML 不需要指定它，并且标签应该使用文本绑定，我怀疑。

无论如何，这确实现在运行。

我仍然怀疑这不是你想要的。也许如果您解释您要完成的工作，我们可以提供进一步的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:49:29.993

在 html 中，您不需要将其`viewModel.` 更改为：

```
<div data-bind="foreach: foos">
<button data-bind="click : $parent.reloadFoos, attr: { id: Id }"></button>
<label data-bind="value: Name"></label>
</div> 
```

更新：

好的，试试这样：

```
var foo = function (id, name) {
    this.Id = ko.observable(id);
    this.Name = ko.observable(name);
};

function getFoos() {
    $.get("/myroute/", "", function (data) {
        for (var i = 0; i < data.length; i++) {
            var f = new foo(data[i].Id, data[i].Name);
            viewModel.foos.push(f);
        }            
    });        
}

ko.applyBindings(viewModel); 
```

html:

```
<div data-bind="foreach: viewModel.foos">
<button data-bind="click: $parent.reloadFoos, attr: { id: Id }"></button>
<label data-bind="value: Name"></label> 
```

**请注意**，您需要函数定义的`ko.applyBindings(viewModel);`外部`getFoos`- 目前您每次调用它时都会重新绑定，这可能导致消失

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:57:21.337

我不认为 reloadFoos 是 foos 数组中 foo Item 的父项。你能做这样的事情吗

```
for (var i = 0; i < data.length; i++) {
            var f = new foo();
            f.Id = data[i].Id;
            f.Name = data[i].Name;
            f.reloadFoos = function() { getFoos(); }
            viewModel.foos.push(f);
        } 
```

然后让您点击只需调用 reloadFoos

# node.js - 如何设置 GridFS 与 node-mongodb-native 驱动程序一起使用的前缀/集合？

> ID：11461157
> 
> 赞同：0
> 
> 时间：2012-07-12T21:43:44.760
> 
> 标签：node.js, mongodb, gridfs

mongo API 允许您设置 GridFS 系统使用的前缀。默认情况下这是“fs”，因此您最终会得到集合 fs.files 和 fs.chunks。我想要几个不同的文件集合，所以我需要能够指定不同的前缀。文档中没有任何关于如何执行此操作的信息，网络上的其他任何地方也没有（至少不是来自我的搜索）。

有人知道 node-mongodb-native 驱动程序是否内置了此功能？如果是这样，我该怎么做？

最好的，
萨米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T23:38:22.250

在 Node.JS 中创建新 Grid 时，您可以将集合前缀作为第二个参数传递：

```
var grid = new Grid(db, 'myprefix'); 
```

使用 GridStore，您需要添加“根”元属性：

```
var gridStore = new GridStore(db, fileId, "w", {root:'myprefix'}); 
```

如果您正在寻找“前缀”，则很容易错过。[教程](http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle2.html)中有更多示例。

# iphone - 使用 XCode 4 将 plist 字典添加到收藏夹选项卡（TableView）

> ID：11461161
> 
> 赞同：2
> 
> 时间：2012-07-12T21:44:04.993
> 
> 标签：iphone, xcode, dictionary, plist, favorites

我使用包含字典数组的 plist 通过 MutableArray 填充 MainTableViewController。当一个单元格被选中时，reprecented 字典被传递给 DetailViewController，reprecented 字典中的字符串的值被显示出来。我在情节提要的 DetailView 中添加了一个按钮，我希望这个按钮将表示的字典发送到收藏夹选项卡，该选项卡称为收藏夹表视图控制器。我正在想办法做到这一点，但我是编程新手，所以我不得不征求意见。

我想出了两种可能的方法。我可能离正确答案还很远，但至少我在努力思考。

1：按钮在reprecented字典中将布尔值更改为yes，并且FavoritesViewController中的原型单元被告知以boolean=yes显示字典。

2：按钮将字典复制到带有收藏夹的新 plist，显示在收藏夹表格视图中。

但是我真的不知道。。

编辑：

到目前为止在 DetailViewController 中的代码：

```
-(IBAction)FavoriteButton:(id)sender
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"ItemSelected"
                                                    object:selectedObject];

} 
```

到目前为止在 FavoritesViewController 中显示葡萄酒的代码：

```
[[NSNotificationCenter defaultCenter] addObserverForName:@"ItemSelected"
                                                  object:nil
                                                   queue:[NSOperationQueue mainQueue]
                                              usingBlock:^(NSNotification* notif) {
                                                  [favoritedObjects release];
                                                  favoritedObjects = [[notif object] retain];
                                                  [self.tableView reloadData];
                                              }];

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [favoritedObjects count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Favcell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...

    NSString *cellValue = [favoritedObjects valueForKey:@"Name"];
    cell.textlabel.text = cellValue;

    return cell;
} 
```

这显示了 20 个单元格，其值来自我按下“添加到收藏夹”按钮的 DetailViewController 中最后一个对象的键值：“名称”。例如，如果我将“Gato Negro”添加到收藏夹，它会在 20 个单元格中显示“Gato Negro”。如果我随后将“Luna”添加到收藏夹，它会在 FavoritesViewController 的 20 个单元格中显示“Luna”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:30:33.823

如何发布通知并将所选字典作为`object`or传递`userInfo`？

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"ItemSelected"
                                                    object:mySelectedDictionary]; 
```

在`FavoritesViewController`您只需订阅此通知（例如在`init`方法中），如下所示：

```
[[NSNotificationCenter defaultCenter] addObserverForName:@"ItemSelected"
                                                  object:nil
                                                   queue:[NSOperationQueue mainQueue]
                                              usingBlock:^(NSNotification* notif) {
                                                  [dictionaryToShow release];
                                                  dictionaryToShow = [[notif object] retain];
                                                  [self.tableView reloadData];
                                              }]; 
```

# ssas - 带有犀牛 ETL 的 SSAS？

> ID：11461163
> 
> 赞同：0
> 
> 时间：2012-07-12T21:44:12.097
> 
> 标签：ssas, etl, rhino-etl

是否可以使用 MDX 查询 SSAS 数据库并将其用作 Rhino ETL 的数据源？我在这里谈论的是与 SSAS 实例建立 OLE DB 连接。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:47:54.897

If you're using Rhino ETL within a .NET application, then yes. First, reference Microsoft.AnalysisServices.AdomdClient.dll. Then, implement Rhino ETL's **AbstractOperation** to extract the data. Here's an example:

```
namespace Etl.Operations
{
    public class ExtactFromAnalysisServices : AbstractOperation
    {
        private readonly AdomdConnection _connection;
        private readonly string _mdx;

        public ExtactFromAnalysisServices(string connectionString, string mdx)
        {
            _connection = new AdomdConnection(connectionString);
            _mdx = mdx;

            _connection.Open();
        }

        public override IEnumerable<Row> Execute(IEnumerable<Row> rows)
        {
            var command = _connection.CreateCommand();

            command.CommandText = _mdx;

            using (var reader = command.ExecuteReader())
                while (reader.Read())
                    yield return Row.FromReader(reader);
        }

        public sealed override void Dispose()
        {
            _connection.Close();
            _connection.Dispose();
            base.Dispose();
        }
    }
} 
```

Use it in a process like this:

```
public class Process : EtlProcess
{
    protected override void Initialize()
    {
        Register(new ExtactFromAnalysisServices("connection string", "mdx query"));
        Register(new SomeTransform());
        Register(new SomeLoad());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:21:46.020

是的，你可以： http: [//msdn.microsoft.com/en-us/library/ms146862 (v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms146862(v=sql.90).aspx)

> “客户端应用程序可以连接到本地多维数据集并使用多维表达式 (MDX) 执行查询，而无需与运行 Analysis Services 实例的完整服务器交互。”

不过，不确定它是否适用于犀牛。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T14:32:12.880

我不知道 Rhino ETL，但你可以用 SSAS 和 SSIS 做到这一点。

# ruby - Quova TCP 保活？流水线？

> ID：11461174
> 
> 赞同：1
> 
> 时间：2012-07-12T21:44:38.430
> 
> 标签：ruby, keep-alive, pipelining, quova

我的一位开发人员报告说，与 Quova 服务器的连接速率已成为瓶颈。他报告说，他在我们的 Ruby 代码中设置 TCP keepalive 选项的尝试似乎没有得到认可。

我还没有看过我们的代码；但我很好奇这里是否有人可以提供建议，基于供应商的[示例 Ruby 请求代码](http://developer.quova.com/docs#sample_ruby)，关于如何重构它以在每个连接上提出许多问题（或以其他方式消除/绕过明显的瓶颈）。

我痛苦地意识到我可能在这里错过了正确的关键字甚至整个概念。只要您将我指向 T（右）F-ing M，RTFM 就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:48:06.183

已解决 - Quova 的负载平衡器被配置为关闭保持活动状态。

# c# - 有人可以向我解释一下 @"" 与 System.IO.Path.Combine 方法有什么关系吗？

> ID：11461176
> 
> 赞同：0
> 
> 时间：2012-07-12T21:44:49.353
> 
> 标签：c#, visual-studio-2010, file-io, directory-structure, .net

假设我的 Visual Studio C# Web 应用程序中有一个类似于 ClientBin 的文件夹。

我对@"" 将在以下 C# 代码中尝试创建目录路径的作用感到困惑：

```
String DirectoryPath = System.IO.Path.Combine(@"" + "ClientBin"); 
```

或者当涉及到 fa 文件时，如下例所示：

```
String FilePath = System.IO.Path.Combine("admin", "access", @"" + "users.aspx"); 
```

基本上，有人可以向我解释一下 @"" 与 System.IO.Path.Combine 方法有什么关系吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T21:47:51.737

在这种情况下，它完全没有任何作用（可能是由于某个地方的某个极度误导的程序员造成的）。通常，`@`字符串之前的字符串指定逐字字符串文字，其中反斜杠不再被视为转义字符。

在这里，`@"" + "ClientBin"`恰好等于`"" + "ClientBin"`，当然也等于`"ClientBin"`。

逐字字符串文字在[这里](http://msdn.microsoft.com/en-us/library/362314fe.aspx)解释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T21:47:19.873

添加`@` ~~意味着忽略任何转义字符序列，并在写入时采用字符​​串~~。不完全是，请看下面的链接。

> @"C:\temp\file.txt"

是相同的

> "C:\\temp\\file.txt"

在第二种情况下 \\ 序列表示转义的反斜杠字符。

**更新**：dtb 是对的

见[字符串文字](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-12T21:48:05.357

`@""`是[逐字字符串文字](http://msdn.microsoft.com/en-us/library/362314fe.aspx)（另请参阅[http://msdn.microsoft.com/en-us/library/ms228362.aspx](http://msdn.microsoft.com/en-us/library/ms228362.aspx)），这基本上意味着反斜杠和换行符是逐字而不是解析的。用法通常类似于`@"\ClientBin"`or `@"[a-b]\*"`。您显示的代码使用它的方式非常荒谬，因为`@""`两者`""`都是空字符串，您只需编写`"ClientBin"`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T21:48:47.223

@ 前缀是[逐字字符串](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)，但在您提供的示例中，我认为它没有任何效果；逐字的@"" 等同于普通的""。

编辑：如果您对逐字字符串是什么感到困惑，它们本质上允许您做的是表示一个字符串而不必担心转义序列 - 例如， \n 不会逐字呈现为新行字符串，而是作为实际的字符串 \n。要表示一个新行，您实际上是在这样的代码中创建一个新行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-12T21:50:05.240

@ 告诉编译器不要将以下字符串文字中的任何字符视为特殊字符。

例如，如果您有“C:\Temp\users.aspx”，编译器将尝试将 \T 和 \u 视为特殊字符（如 \r\n 是回车符、换行符），并且可能会在运行时失败-时间。

如果您没有@，则必须将字符串更改为

```
"C:\\Temp\\users.aspx" 
```

恕我直言，这很难看。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-12T21:56:08.197

如果您有兴趣查看，这里是一个简单的解释

@ 符号在 C# 中有两个用途：

首先是它允许您使用保留的 keyowrd 作为变量，如下所示：

```
int @int = 15; 
```

第二个选项允许您指定一个字符串，而不必排除任何字符。例如 '\' 字符是一个转义字符，所以通常你需要这样做：

```
var myString = "c:\\myfolder\\myfile.txt" 
```

或者你可以这样做：

```
var myString = @"c:\myFolder\myfile.txt" 
```

# ruby-on-rails - 在 rails 3.0 中存储数组

> ID：11461177
> 
> 赞同：0
> 
> 时间：2012-07-12T21:44:54.723
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我使用以下代码段在视图中创建一组复选框

```
<div class="field">
<b> <%= f.label :scenario %><br /></b>
  <% Scenarios.all.each do |scenario| -%>
    <%= check_box_tag 'umvoxq[scenario][]', scenario.id, @umvoxq.scenario.include?(scenario.id.to_s) -%>
    <%= label_tag :scenario, scenario.name -%>
  <% end -%>
</div> 
```

当我保存模型时，值已成功存储在数据库中并在页面上检索回来。但它保存在数据库中的格式是：

```
| ---
- '3'
- '4'
 | 
```

它就像一个带有换行符的巨大字符串。我在 DB 中的专栏是 varachar，我希望是`3,4`

我的模型是

```
class Umvoxq < ActiveRecord::Base
end 
```

我也尝试过使用

```
serialize:scenario 
```

在模型中，但它没有改变格式。有没有办法纠正格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T07:05:17.043

无论如何不要打扰格式，它将它存储在 YAML 中。最好的方法是

*   将列数据类型设为文本 [因为有时它可能不适合 varchar]
*   使列在您的模型中序列化，如下所示

> ```
> serialize :scenario, Array 
> ```

而已。因此，当您从 Umvoxq 访问场景时，您将获得数组中的数据。

PS：如果您不想更改列的数据类型，那么您必须将您从表单获得的参数转换为字符串[如 2,3,4] 并将其存储到 db。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T07:27:33.980

也许有点离题，但看看 Redis 或 hstore 等键值存储（基于 PostgreSQL 构建）。我认为他们会很适合那里。

# symfony - 无法重新声明类 symfony2

> ID：11461179
> 
> 赞同：1
> 
> 时间：2012-07-12T21:45:12.190
> 
> 标签：symfony

当我运行命令时：

```
php app/console doctrine:generate:entities 
```

我得到一个：

```
PHP Fatal error:  Cannot redeclare class Sofla\SoflaBundle\Entity\RepresentanteLegal 
in /Sofla/SoflaBundle/Entity/RepresentanteLegal.php on line 14 
```

我对此一无所知。整个项目正在运行，我之前没有收到该消息，现在它在服务器上，它向我抛出了该消息。

这是类开始的代码：

命名空间 Sofla\SoflaBundle\Entity；

使用 Doctrine\ORM\Mapping 作为 ORM；

```
/**
 * Sofla\SoflaBundle\Entity\RepresentanteLegal
 *
 * @ORM\Table(name="representante_legal")
 * @ORM\Entity
 */
class RepresentanteLegal
{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:45:55.743

这是 Simone Demo Gentili 说的，我复制并粘贴了一些实体，忘记在粘贴的代码中重命名类。

他回答了我的问题，但由于他发表了评论，我无法选择他的“评论”作为解决方案。

# tomcat7 - Tomcat 7在管道异常中断后未释放内存

> ID：11461182
> 
> 赞同：-1
> 
> 时间：2012-07-12T21:45:20.237
> 
> 标签：tomcat7, out-of-memory, broken-pipe

我正在使用 Java 1.7 运行 Tomcat 7.0.22 服务器，并且遇到了一个问题，即 Tomcat 在管道异常损坏后没有释放内存。
问题背景：我正在使用**firefox 10.0.5**生成获取请求，该请求`Jersey`使用`hibernate`. 该查询的结果随后会被分页，并使用 XML 或 JSON 格式的 JAXB 以编组对象的形式返回给消费者。

为了产生这个问题，我故意将页面大小设置为一个非常大的数字。根据 Visual VM，我的 tomcat 服务器使用分配给堆的 1024m 中的大约 300m 来执行查询。Firefox 最终在收到结果时核心，并且需要重新启动浏览器。查看 catalina.out 日志报告了一个损坏的管道异常。在监控堆大小和执行手动 GC 几个小时后，堆上的数据量永远不会恢复到执行查询之前的状态。

查看堆上的数据，使用可视化 vm，最重要的是一个字符数组，我相当肯定它是用 XML 构造的查询的结果。另外，我注意到为处理查询而创建的线程永远不会终止。我玩过会话超时，没有任何变化。首先，有没有人看到这个，有没有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:54:07.910

这最终成为一个休眠问题，需要清除存储库才能释放所有查询的对象。简单地将其清空或让它超出范围不足以尊重对象。

# php - PHP：如何将变量从正则表达式替换传递给函数？

> ID：11461189
> 
> 赞同：1
> 
> 时间：2012-07-12T21:46:05.507
> 
> 标签：php, regex

我想要一个正则表达式

```
[QUOTE=3] 
```

并将其转化为

```
<div class="quoted"><div class="quotation-author">Originally written by <strong>AUTHOR_WITH_ID=3</strong></div> 
```

我几乎是对的，但是我无法将变量传递给获取作者姓名的函数。

```
$comment = preg_replace('/\[\s*QUOTE=(\d+)\s*\]/i', '<div class="quoted"><div class="quotation-author">Originally written by <strong>'.get_comment_author((int)'$1').'</strong></div>', $comment); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:51:52.633

替换：

```
'<div class="quoted"><div class="quotation-author">Originally written by <strong>'.get_comment_author((int)'$1').'</strong></div>' 
```

不会动态发生；它被评估，然后作为参数传递。用于[`preg_replace_callback`](http://php.net/preg_replace_callback)为每个匹配调用一个函数，如下所示：

```
$comment = preg_replace_callback('/\[\s*QUOTE=(\d+)\s*\]/i', function($m) {
    return '<div class="quoted"><div class="quotation-author">Originally written by <strong>'.get_comment_author((int) $m[1]).'</strong></div>';
}, $comment); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:49:00.627

您不能`preg_replace`为此使用，因为调用`get_comment_author`（和`(int)`演员表）发生*在* `preg_replace`运行之前。

尝试使用`preg_replace_callback`：

```
$comment = preg_replace_callback('/\[\s*QUOTE=(\d+)\s*\]/i', function($a){
    return '<div class="quoted"><div class="quotation-author">Originally written by <strong>'.get_comment_author($a[1]).'</strong></div>';
}, $comment); 
```

注意：根据`get_comment_author`具体情况，您不需要`(int)`演员表。

# ios - opencv2 IOS框架链接器错误

> ID：11461193
> 
> 赞同：2
> 
> 时间：2012-07-12T21:46:33.243
> 
> 标签：ios, opencv

我最近编译了新的官方opencv2 IOS框架并添加到我的项目中。但是，我在使用“拆分”和“合并”功能时收到了链接器错误。

```
Undefined symbols for architecture armv7:
  "__ZN2cv5mergeERKSt6vectorINS_3MatESaIS1_EERKNS_12_OutputArrayE", referenced from:
      -[ImageProcessModule paintImage] in ImageProcessModule.o
  "__ZN2cv5splitERKNS_3MatERSt6vectorIS0_SaIS0_EE", referenced from:
      -[ImageProcessModule determineHUELimits] in ImageProcessModule.o
ld: symbol(s) not found for architecture armv7 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:26:41.843

问题出在主干版本上。使用官方发行版（[OpenCV IOS Framework](http://sourceforge.net/projects/opencvlibrary/files/opencv-ios/2.4.2/opencv2.framework.zip/download)）解决了这个问题。

# regex - 使用关键字的正则表达式问题

> ID：11461195
> 
> 赞同：0
> 
> 时间：2012-07-12T21:46:39.063
> 
> 标签：regex

我有一个字符串，我想识别花朵的特征，而它们之前没有特殊词，因为它们改变了搜索的方向。

我有以下花的特征（单词或缩写）：

```
((bful\.?|beautiful)|(cful\.?|colorful)| (pe\.?|pretty)) 
```

在“不匹配”中转换任何特征的关键字可以是整个单词或缩写，例如：

```
((stem|(lf\.?|leaf)|(spe\.?|special)). 
```

使用此配置，我得到以下正则表达式：

```
(?<!((stem|(lf\.?|leaf)|(pe\.?|petal))([\s])*)((bful\.?|beautiful)|(cful\.?|colorful)| (spe\.?|special)) 
```

现在！问题是当我们在缩写词或非特殊词的末尾获得缩写词（启用功能）时。例如：

## **“我有一个 spe。美丽的玫瑰”**

在这种情况下，“漂亮”不是一个特征，因为“spe”。在“美丽”之前，这是一个正确的答案，但我对“spe”这个词有疑问。因为我的应用程序将“pe”识别为“漂亮”，并将其解释为特征。

我试图合并`\b`关键字的前后，但没有奏效。有谁知道在这些情况下可以做什么？我很感激你能给我的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:12:22.827

看起来您需要转义句点，以便将其匹配为句点，而不是“任何字符”。这 ”。” 没有“\”表示“任何字符”。

例如，你应该写

```
(pe\.?|pretty) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:15:50.330

你也应该使用 (\bpe.|pretty) 或者它可能匹配“spe”。与模式 pe。而不是spe。

# excel - VBA Excel - 应用程序或对象定义的错误

> ID：11461211
> 
> 赞同：1
> 
> 时间：2012-07-12T21:47:54.740
> 
> 标签：excel, excel-2010, vba

> 阶段1

我正在尝试搜索具有字符串值（公式、文本、数字等）的范围内每一行的第一列。该字符串是通过从下拉列表中选择生成的。选择的格式类似于“Desktop，Dell，790 - 4GB”，我只关心第一个逗号之前的文本字符串（在本例中也称为“Desktop”。）我正在使用 Split() 方法来获取第一个逗号之前的单词，然后尝试使用 Case 语句将字符串插入同一行的另一个单元格。

> 阶段2

我正在使用在第一个下拉列表中选择的内容来填充具有预定值的第二个下拉列表。

> 问题

程序抛出运行时错误“1004”：Application_defined 或 object-defined 错误。我不知道从哪里开始。

> 原始代码

```
Private Sub Worksheet_Change(ByVal Target As Range)
On Error GoTo Whoops
Application.EnableEvents = False
Call splitter
If Not Intersect(Target, Range("B:B")) Is Nothing Then
If Not Target.HasFormula Then Target.Value = UCase(Target.Value)
End If
Whoops:
Application.EnableEvents = True
End Sub

Sub splitter()
   Dim line() As String
   Dim rng, row As Range
   Dim lRow, lCol As Long
   lRow = Cells.Find("*", Range("A1"), xlFormulas, , xlByRows, xlPrevious).row
   lCol = Cells.Find("*", Range("A1"), xlFormulas, , xlByColumns, xlPrevious).Column
   Set rng = Cells(lRow, lCol)

   For Each row In rng.Rows
    If row.Value <> "" Then
        line = Split(Range(row, 1), ",")
        Select Case line(0)
           Case "Desktop"
               Range(row, 8).Value = "Desktop"
           Case "Laptop"
               Range(row, 8).Value = "Laptop"
           Case "Server"
               Range(row, 8).Value = "Server"
           Case Else
               Range(row, 8).Value = "N/A"
        End Select
    End If
   Next
End Sub 
```

> 修订代码

```
Private Sub Worksheet_Change(ByVal Target As Range)
On Error GoTo Whoops
Application.EnableEvents = False
Call splitter
If Not Intersect(Target, Range("B:B")) Is Nothing Then
If Not Target.HasFormula Then Target.Value = UCase(Target.Value)
End If
Whoops:
Application.EnableEvents = True
End Sub

Sub splitter()
   Dim line() As String
   Dim rng As Range, row As Range
   Dim lRow As Long
   lRow = Cells.Find("*", Range("A1"), xlFormulas, , xlByRows, xlPrevious).row
   Set rng = Cells("A1:N" & lRow)

   For Each row In rng.Rows
    If row.Value <> "" Then
        line = Split(Cells(row, 1), ",")
        Select Case line(0)
           Case "Desktop"
               Cells(row, 8).Value = "Desktop"
           Case "Laptop"
               Cells(row, 8).Value = "Laptop"
           Case "Server"
               Cells(row, 8).Value = "Server"
           Case Else
               Cells(row, 8).Value = "N/A"
        End Select
    End If
   Next
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:16:34.687

我已将您的两个代码合并为 1。

**阶段1**

这是你正在尝试的吗？

```
Private Sub Worksheet_Change(ByVal Target As Range)        
    On Error GoTo Whoa

    Application.EnableEvents = False

    If Not Intersect(Target, Columns(1)) Is Nothing Then
        If Target.Cells.Count > 1 Then GoTo LetsContinue

        If Target.Value <> "" And InStr(1, Target.Value, ",") Then
            Select Case Split(Target.Value, ",")(0)
               Case "Desktop": Range("H" & Target.row).Value = "Desktop"
               Case "Laptop":  Range("H" & Target.row).Value = "Laptop"
               Case "Server":  Range("H" & Target.row).Value = "Server"
               Case Else:      Range("H" & Target.row).Value = "N/A"
            End Select
        End If
    ElseIf Not Intersect(Target, Columns(2)) Is Nothing Then
        If Target.Cells.Count > 1 Then GoTo LetsContinue
        If Not Target.HasFormula Then Target.Value = UCase(Target.Value)
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

# android - 为什么我的 Android 应用程序会在浏览器连接正常时抛出 UnknownHostException？

> ID：11461214
> 
> 赞同：1
> 
> 时间：2012-07-12T21:48:08.200
> 
> 标签：android, networking, unknown-host

我正在诊断我的一些用户向我报告的间歇性连接问题。用他自己的话说，这是来自用户的一份这样的报告：

> 我的 3g 图标是暗淡的，但普通条是亮的，而且这种情况已经有一段时间了，所以我可以持续运行测试。您的应用无法连接 - UnknownHostException。跑连接测试 - 都失败了。然后打开浏览器，导航到谷歌，搜索东西，进入我的 Flickr 帐户，打开图片——而我的 3g 图标一直是暗淡的。这意味着我的浏览器已连接，而您的应用无法连接。另一个观察结果：我多次运行这两个应用程序（浏览器和您的应用程序）来验证。在大多数运行中，两者的 3G 图标都很暗。在少数情况下，它会间歇性地为我的浏览器打开，但永远不会为您的应用程序打开。您的应用程序会立即抛出 UnknownHostException，而无需尝试几秒钟来发送我的消息（就像通常那样）。

任何人都可以推测为什么我的应用程序会被操作系统拒绝连接（如 UnknownHostException 所确认），但浏览器会被允许连接正常吗？请注意，用户外出时通常会遇到这种情况。

这是在 Android 2.2、LG Ally、T-Mobile 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:54:00.160

它可能与您的服务器 dns 设置有关。您可以尝试设置代理或解决您的服务器网络问题。确定如果你得到 UnknownHostException 然后尝试 ping 你的服务器。

设置代理是这样的。不完全确定/之前尝试过

```
Properties p = System.getProperties();
p.put("http.proxyHost","http-proxy.xx.xxxxx.xx");
p.put("http.proxyPort","8080");
System.setProperties(p); 
```

# visual-studio-2010 - 每次VS启动时导入远程DLL？

> ID：11461217
> 
> 赞同：0
> 
> 时间：2012-07-12T21:48:15.980
> 
> 标签：visual-studio-2010, project-management, shared-libraries

我在一定程度上负责工作中的通用代码库。仅仅因为人们不跟踪这些东西或者当旧项目需要更新时，将更新推送到库变得非常令人沮丧，很多时候它包含旧的 DLL 而负责更改的人不包括最新版本。结果是我们的代码库被新/旧版本分散。我想确保在处理项目时，它使用的是最新的 DLL。

在 Visual Studio 中有没有办法将 DLL 设置为每次都导入？我注意到一旦 DLL 就位，即使您更新 DLL 文件，您也必须重新导入才能获得最新的好东西。有没有办法让 Visual Studio 在每次开始时重新导入它？DLL 将位于共享驱动器上，因此当我推出新更新时，我可以简单地更新共享驱动器上的 DLL，它会自动为每个人提供最新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:58:10.613

即使这是可能的，人们也必须重新启动他们的视觉工作室才能获得更新的驱动程序。我倾向于让我的工作区和项目开放几天。所以，如果我在你的办公室，那也无济于事。

对我来说，实现一个版本控制系统（即 SVN）并提交 DLL 或代码本身并让人们根据需要更新/重新编译听起来更好。通常人们会经常学习更新和提交以避免复杂的合并冲突。

或者您是否已经将代码置于版本控制之下？

# ruby-on-rails - ruby on rails 使用 f.select 下拉数组

> ID：11461220
> 
> 赞同：0
> 
> 时间：2012-07-12T21:48:42.870
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, drop-down-menu

我有一个这样的数组：

```
@array = [[1, a], [2, b], [3, c] ............] 
```

我想在我的视图中创建一个下拉菜单

```
f.select 
```

下拉列表应该只有数字，即`[1, 2, 3, ....]`

`f.select`如何在我的视图中创建仅包含数字和 an 的下拉列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:46:14.870

像这样的东西会起作用：

```
@array.collect{|x| x[0]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:06:38.887

就用吧。这很容易实现。

select(:person, :city_id, [['里斯本', 1], ['马德里', 2], ...])

或者

f.select(:city_id, [['里斯本', 1], ['马德里', 2], ...])

请注意，第三个参数 options 数组与传递给 options_for_select 的参数类型相同。这里的一个优点是，如果用户已经有一个城市，您不必担心预先选择正确的城市——Rails 会通过读取@person.city_id 属性来为您完成这项工作。

# iphone - 从 UIAlertView 检索输入文本

> ID：11461221
> 
> 赞同：0
> 
> 时间：2012-07-12T21:48:46.087
> 
> 标签：iphone, objective-c, ios, uialertview

在 Xcode 4.3 3 中，我创建了一个生成弹出输入框的按钮（按钮 Cancel 和 Enter），工作正常，如何检索输入的数据并将其显示在标签或表格中？

这是我的按钮后面的代码的样子。

```
- (IBAction)car:(UIButton *) sender

    NSString * title1 = [sender titleForState:UIControlStateNormal];

    _mylabel.text = title1;

        UIAlertView *prompt = [[UIAlertView alloc] initWithTitle:@"Expense Amount in $:"
                        message:@"\n\n"
                        delegate:self
                        cancelButtonTitle:@"Cancel"
                        otherButtonTitles:@"Enter", nil];

    _textField = [[UITextField alloc] initWithFrame:CGRectMake(12, 50, 260, 25)];

    [_textField setBackgroundColor:[UIColor whiteColor]];

    [_textField setPlaceholder:@"Amount"];

    [prompt addSubview:_textField];

    _textField.keyboardType = UIKeyboardTypeNumberPad;

    // show the dialog box
    [prompt show];

    // set cursor and show keyboard
    [_textField becomeFirstResponder];

} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T21:53:57.283

正如 iOS 5 中介绍的那样，您应该使用该`UIAlertViewStylePlainTextInput`样式。您将在委托方法中获得正确的价值。不再使用自定义文本字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T03:31:49.360

您在这里尝试解决的是常规 UITextField 输入数据保存，无论警报视图如何。您可以通过不同的方式并使用 UITextField 委托方法来完成此操作：

```
textFieldDidChange
textFieldDoneEditing
textFieldShouldReturn 
```

只需使用其中一种方法保存输入数据，这取决于所需的用户体验。

# deployment - 无法运行 Set-AzureDeployment

> ID：11461223
> 
> 赞同：4
> 
> 时间：2012-07-12T21:48:47.370
> 
> 标签：deployment, powershell, azure

作为 TFS 构建过程的一部分，我正在尝试将我的 .net 网站部署到 azure。我正在编写一个 powershell 脚本来执行此操作，但我卡在了`set-AzureDeployment -Upgrade`命令上。我不确定是否有更简单的方法，但我正在尝试根据 Windows azure 站点的代码实现上传：http: [//www.windowsazure.com/en-us/develop/net/common-任务/持续交付/#step4](http://www.windowsazure.com/en-us/develop/net/common-tasks/continuous-delivery/#step4)

当我运行以下命令时：

```
Set-AzureDeployment -Upgrade -SERVICENAME "MYSVC" -Mode Auto -Package D:\MYSVC\Drops\Azure.cspkg -configuration D:\MYSVC\Drops\ServiceConfiguration.Cloud.cscfg -Slot Staging -Force 
```

我收到此错误：

```
Set-AzureDeployment : The path variable 'SERVICENAME' in the
UriTemplate must be bound to a non-empty string value.
Parameter name:
parameters At line:1 char:20
+ Set-AzureDeployment <<<<  -Upgrade -SERVICENAME "MYSVC" -Mode Auto -Package D:\MYSVC\Drops\Azure.cspkg -Configuration D:\MYSVC\Drops\ServiceConfiguration.Cloud.cscfg -Slot Staging -Force
    + CategoryInfo          : CloseError: (:) [Set-AzureDeployment], ArgumentException
    + FullyQualifiedErrorId : Microsoft.WindowsAzure.Management.ServiceManagement.HostedServices.SetAzureDeploymentCommand 
```

我已经检查了所有的parementers，据我所知它们都是正确的（我使用的服务名称在我调用时有效`Get-AzureDeployment -ServiceName MYSVC`）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T23:39:21.900

我能够看到完全相同的问题，经过一番讨论后，我发现此命令存在一些代码问题，因此当没有报告正确的错误时。

实际问题是，当您调用 Set-AzureDeployment 时，它无法使用 Windows Azure 存储帐户临时上传您的包，并因一些奇怪的错误而失败。

要解决此问题，请先**调用 Set-AzureSubscription 设置有效的 Windows Azure 存储帐户，然后使用相同的 Set-AzureDeployment 命令。**

# c - 使用指针将小写字母转换为大写字母的字符串，但以下代码会引发错误

> ID：11461227
> 
> 赞同：-4
> 
> 时间：2012-07-12T21:49:06.083
> 
> 标签：c

我想通过指针将小写字母转换为大写字母。下面的代码不起作用，它会引发一些错误。

```
#include<stdio.h>

int main()
{
    char somearray[10]; char mask;
    mask = 1 << 5;
    mask = ~mask;
    char *someptr;
    gets(somearray);
    puts(somearray);
    someptr =&somearray[0];

    while (*someptr != '\n')
    {
        *someptr = *someptr & mask ;

        someptr++;
    }
    printf("%s",someptr);
    return 0;
} 
```

得到一个错误：

```
not able to compile , if compiled runtime error 
```

**即使下面的代码也不起作用：**

```
#include <stdio.h>

int main()
{
    char somearray[10];
    char mask;
    char *someptr;

    mask = 1 << 5;
    mask = ~mask;

    fgets( somearray, sizeof(somearray), stdin ); /* gets() is suspect: see other reactions */
    puts(somearray);
    for ( someptr = somearray; *someptr != '\0';someptr++)
    {
        *someptr &= mask ;
    }

    printf("%s",someptr);

    return 0;
} 
```

输入：abcd 输出：abcd.，预期：ABCD

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T21:51:27.197

`gets()`不会将换行符存储在数组中，因此循环将超出数组的末尾并访问和修改它不应该的内存。使用`scanf()`并限制读取的字符数以防止缓冲区溢出（如果真的 C++ 使用`std::getline()`and `std::string`）：

```
scanf("%9s", somearray); 
```

并在第一个空字符处终止循环：

```
while (*someptr != '\0') 
```

您将希望传递`somearray`到`printf()`循环之后，因为`someptr`将指向结尾`somearray`并且只打印一个空字符串。

* * *

值得一读：[警告：gets 函数很危险](https://stackoverflow.com/questions/2843073/warninggets-function-is-dangerous)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:13:51.767

一些指示：

改用 fgets 从 keybaord 读取，这样您就可以指定不超过缓冲区的字符串的最大大小

例如`fgets( somearray, sizeof(somearray), stdin );`

改用标准函数 tolower(int c)

例如`*someptr = tolower(*someptr);`

在你的while循环中检查字符串的结尾，即`while (someptr && someptr!='\n')` 他们的循环处理从fgets和scanf返回的字符串的方式

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T22:23:51.597

我清理了一下代码，但我仍然不明白它的*意图*。

```
#include <stdio.h>

int main()
{
    char somearray[10]; 
    char mask;
    char *someptr;

    mask = 1 << 5;
    mask = ~mask;

    gets(somearray); /* gets() is suspect: see other reactions */
    puts(somearray);
    for ( someptr = somearray; *someptr != '\n';someptr++) 
    {
        *someptr &= mask ;
    }

    printf("%s",someptr); /* must point to '\n', otherwise we would 
                          ** not get here BTW: gets() removes the \n 
                          ** and replaces it by a \0 so we wont get here
                          */
    return 0;
} 
```

顺便说一句：如果你想向人类读者展示你的*意图*：当文字就足够时不要使用变量：

```
*someptr &= ~(0x20); 
```

但是，更好的是：

```
 *someptr = toupper (*someptr); 
```

# php - PHP 中断连续的 If 语句

> ID：11461229
> 
> 赞同：1
> 
> 时间：2012-07-12T21:49:16.340
> 
> 标签：php

我有一大组 if 语句，当其中一个为真时，不需要测试以下 if 语句。

我不知道最好的方法是什么。

我应该创建一个函数、开关还是 while 循环？

每个连续的 if 语句都是不同的，并且具有预先创建的输入值。我将尝试创建一个简单的示例来尝试更好地解释这一点。

```
$total = ($val1+$val2+$val3)/$arbitaryvalue
if($total > 2){//Do Something
}

$total = ($val1+$val2)/$anothervalue
if($total > 2){//Do Something different
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T21:52:14.530

将它们弹出到前一个 if 语句的 else 中，这意味着只有在第一个条件评估为 false 时才运行。但是，如果您有很多 if 语句，这将变得一团糟，您问题中的示例是否代表了您的需求规模？

```
$total = ($val1+$val2+$val3)/$arbitaryvalue
if($total > 2){//Do Something
}
else
{

    $total = ($val1+$val2)/$anothervalue
        if($total > 2){//Do Something different
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:52:49.517

```
if ( condition ) {

}

else if ( another_condition ) {

} 

... 

else if ( another_condition ) {

} 
```

ETC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:55:36.367

决定是否使用循环将取决于一个真实的例子。如果如何设置 $total 有一个模式，那么我们可以使用循环。如果没有，最好只做连续的 if 语句：

```
if(($val1+$val2+$val3)/$arbitraryvalue > 2){
   //Do Something
}
else if(($val1+$val2)/$anothervalue > 2)
{
   //Do something different
} 
```

但是，如果 $val1+$val2 和 $anothervalue 部分存在模式，则循环可能是更好的解决方案。在我看来，您的决定还应该取决于该模式是否有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T22:05:12.870

由于使用`else`不会有益且难以维护，因此我建议使用功能。

一个函数会更理想，因为一旦满足条件，您可以随时退出该函数，使用`return`.

> 如果从函数内部调用，return 语句会立即结束当前函数的执行，并将其参数作为函数调用的值返回。

下面包括一个示例函数，其中设置了用于演示目的的虚拟值：

```
<?php

function checkConditions(){   
    $val1 = 5;
    $val2 = 10;
    $val3 = 8;

    $arbitaryvalue = 5;
    $anothervalue = 4;

    $total = ($val1+$val2+$val3) / $arbitaryvalue;

    if($total > 2){
        return 'condition 1';
    }  

    $total = ($val1+$val2) / $anothervalue;
    if($total > 2){
        return 'condition 2';
    } 

    return 'no conditions met';
}

echo checkConditions();
?> 
```

如果要执行注释代码中指示的某种类型的操作，则可以在从函数返回之前执行适当的操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-12T22:08:19.583

Ben Everard 说的是正确的方法，但还有许多其他解决方案：

```
$conditions = array(
  array(
    'condition' => ($val1+$val2+$val3)/$arbitaryvalue,
    'todo' => 'doSomething',
  ),
  array(
    'condition' => ($val1+$val2)/$arbitaryvalue,
    'todo' => 'doSomethingDifferent',
  ),
  // ...
);

foreach ($conditions as $item)
{
  if ($item['condition'])
  {
    // $item['todo']();
    call_user_func($item['todo']);
    break;
  }
}

function doSomething()
{
  // ...
}

function doSomethingDifferent()
{
  // ...
} 
```

# azure - 天蓝色的网站被暂停，我不明白为什么。

> ID：11461232
> 
> 赞同：3
> 
> 时间：2012-07-12T21:49:30.467
> 
> 标签：azure

它不允许我回顾超过 7 天，所以我无法确定原因。简单地让网站运行会导致它使用太多吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:21:20.623

如果您的 Windows Azure 网站运行没有任何问题并且您的订阅处于活动状态，则该网站不得暂停。我只是认为可能存在一些问题，因为您无法访问它，而且很难推测您的 Windows Azure 网站出了什么问题。

您需要通过以下在线论坛联系 Windows Azure 网站支持团队并提供所需信息，他们会立即为您提供帮助：http: [//social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/threads](http://social.msdn.microsoft.com/Forums/en-US/windowsazurewebsitespreview/threads)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-21T08:46:33.590

如果整个订阅被暂停，那么很可能是一个计费问题。如果只有网站被暂停并且这些网站采用免费或共享托管计划，那么这些网站可能超出了每个虚拟主机计划的 CPU 配额。

# c# - 将包含添加到实体框架中的现有对象

> ID：11461237
> 
> 赞同：1
> 
> 时间：2012-07-12T21:49:44.560
> 
> 标签：c#, entity-framework

我在实体框架中创建了一个对象，并希望在事后包含一些相关的类。我该怎么做或者我应该搜索什么关键字？

```
Order myOrder = 

context.Orders
        .Include("Category")
        .Include("Customer");

// Some logic here

myOrder = myOrder.Include("Supplier"); 
```

# c# - 无法转换类型为“System.Collections.Generic.List”的对象 1

> ID：11461238
> 
> 赞同：7
> 
> 时间：2012-07-12T21:49:46.707
> 
> 标签：c#, .net, xml, list, serialization

我不明白对另一种类型“System.Collections.Generic.List`1[CES.Model.SearchResult]”的引用以及如何解决此问题。

```
Unable to cast object of type 'System.Collections.Generic.List`1[CES.Model.SearchResult]' to type 'CES.Model.SearchResult'. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidCastException: Unable to cast object of type 'System.Collections.Generic.List`1[CES.Model.SearchResult]' to type 'CES.Model.SearchResult'.

Source Error: 

Line 1069:            XmlSerializer xs = new XmlSerializer(typeof(SearchResult));
Line 1070:            TextWriter textWriter = new StreamWriter(@"C:\temp\results.xml");
Line 1071:            xs.Serialize(textWriter, results);
Line 1072:            ViewState["eventList"] = textWriter.ToString();
Line 1073:            textWriter.Close(); 
```

这是 searchResult 类，它包含 SearchResultAttribute 类。

```
public class SearchResult
{
    private List<SearchResultAttribute> _attributes = null;
    private List<SearchResult> _linkedSearchResults = null;

    public string this[string key]
    {
        get
        {
            int resultIndex = _attributes.BinarySearch(new SearchResultAttribute(key, ""));

            if (resultIndex < 0)
                return "";
            else
                return _attributes[resultIndex].Value;
        }
        set
        {
            int resultIndex = _attributes.BinarySearch(new SearchResultAttribute(key, ""));

            if (resultIndex < 0)
                return;
            else
                _attributes[resultIndex].Value = value;
        }
    }

    public List<SearchResultAttribute> Attributes
    {
        get
        {
            return _attributes;
        }
        set
        {
            _attributes = value;
        }
    }
    public List<SearchResult> LinkedSearchResults
    {
        get
        {
            return _linkedSearchResults;
        }
        set
        {
            _linkedSearchResults = value;
        }
    }

    public SearchResult()
    {
        _attributes = new List<SearchResultAttribute>();
        _linkedSearchResults = new List<SearchResult>();
    }
}

public class SearchResultAttribute:IComparer<SearchResultAttribute>,IComparable<SearchResultAttribute>
{
    public string Key { get; set; }
    public string Value { get; set; }

    public SearchResultAttribute()
    {
        Key = System.String.Empty;
        Value = System.String.Empty;
    }

    public SearchResultAttribute(string key, string value)
    {
        Key = key;
        Value = value;
    }

    public int Compare(SearchResultAttribute x, SearchResultAttribute y)
    {
        return (x.Key.CompareTo(y.Key));
    }

    public int CompareTo(SearchResultAttribute other)
    {
        return this.Key.CompareTo(other.Key);
    }

} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T21:51:17.600

也许这应该工作：

```
XmlSerializer xs = new XmlSerializer(typeof(List<SearchResult>)); 
```

事实上，该消息让我认为 xml 包含 searchrestult 的集合，而不是单个搜索结果。

[编辑] DJ KRAZE 是对的，这段代码假设“结果”变量是 kind `List<SearchResult>`。序列化程序必须匹配它将序列化的对象类型。

# android - 在 Jenkins 中使用 Ant 复制文件

> ID：11461241
> 
> 赞同：1
> 
> 时间：2012-07-12T21:49:52.293
> 
> 标签：android, ant, jenkins

[这是对这个问题](https://stackoverflow.com/questions/9239131/ant-build-android-project-with-dependency-lib)的跟进。我遇到了与原始海报相同的问题，但 Ant 的技能几乎为 0。我尝试阅读有关[ant 复制任务](http://ant.apache.org/manual/Tasks/copy.html)的信息，但显然该文档不适用于初学者。有人能告诉我如何在 ant 和 Jenkins 中修改项目 A 的构建设置，以便它包含来自项目 B 的正确 jar 文件吗？将它们复制到项目 A 的 libs 文件夹是可以的。

另外，我将如何避免在本地和服务器上拥有单独的属性文件，以便 eclipse 和 jenkins 可以避免相互接触，但我仍然可以将所有内容置于源代码控制之下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:55:25.597

[我在这里](http://www.devdaily.com/blog/post/java/samples-ant-copy-task)找到了我需要的东西。在构建步骤之前添加复制任务可确保找到库。

为了防止复制路径和本地属性发生冲突，我使用 .classpath 文件进行 Eclipse 构建。

# javascript - 为什么我的画布填充图案会重复/重叠？

> ID：11461245
> 
> 赞同：3
> 
> 时间：2012-07-12T21:50:11.307
> 
> 标签：javascript, html5-canvas

我画了一个圆角矩形网格，我需要用图像背景填充它们。最终我会有很多图像背景，但现在，我正试图让它与一个一起工作。我很接近，我的矩形绘制但填充有点奇怪 - 它自身重叠并杀死我的图案（边缘除外）基本上用图像填充整个画布。我试图“剪裁”我的路径，但这只会导致填充一个矩形。我不确定我做错了什么，我希望画布专家能发现它？

```
/* build rounded rectangle */
var roundedRect=function(ctx,x,y,width,height,radius,fill,stroke) 
{ 

 ctx.save(); // save the context so we don't mess up others ctx.beginPath(); 

// draw top and top right corner ctx.moveTo(x+radius,y);
ctx.arcTo(x+width,y,x+width,y+radius,radius); 

// draw right side and bottom right corner 
ctx.arcTo(x+width,y+height,x+width-radius,y+height,radius); 

// draw bottom and bottom left corner 
ctx.arcTo(x,y+height,x,y+height-radius,radius); 

// draw left and top left corner 
ctx.arcTo(x,y,x+radius,y,radius); 
ctx.clip(); 

if(fill){ ctx.fill(); } 

if(stroke){ ctx.stroke(); } 

 ctx.restore(); // restore context to what it was on entry 
} 

/* onload, fill canvas with pattern of rounded rectangles separated by 2px */
window.onload = function() {
var canvas = document.getElementById("canvas");
/* rounded filled rectangle pattern */
var canvasWidth=530;
    var canvasHeight=530;
    var recWidth=42;
    var recHeight=42;
    var grout=2;
    var radius=2;
    var cols=canvasWidth/(recWidth+grout);
    var rows=canvasWidth/(recHeight+grout);

    /* loop through each row/column to build pattern */
    alert("rows" + rows + " & cols " + cols);
    for (i=1; i<rows; i++){
        for (j=1; j<cols; j++){
            var ctx = canvas.getContext("2d");
            /* fill pattern */
            var img=document.getElementById("poppy");
            var pat=ctx.createPattern(img,"repeat");
            ctx.fillStyle=pat;  
            roundedRect(ctx,(j*grout + (j-1)*recWidth),(i*grout + (i-1)*recHeight),recWidth,recHeight,radius,true,false);       

                }
             }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:27:58.400

假设您的问题在此 JSFiddle 中重现：http: [//jsfiddle.net/hBEwr/](http://jsfiddle.net/hBEwr/)。（如果不是这种情况，这个答案的其余部分是~bunk；请编辑以匹配您的确切问题。）

1.  如果我们从等式中完全删除模式，我们可以看到它不是直接的罪魁祸首。
    [http://jsfiddle.net/hBEwr/1/](http://jsfiddle.net/hBEwr/1/)
    相反，圆形矩形不会在它们之间留下必要的灌浆。

2.  由于所有内容都相互重叠，因此我们将填充颜色更改为低不透明度的蓝色。有趣的！
    [http://jsfiddle.net/hBEwr/2/](http://jsfiddle.net/hBEwr/2/)
    我们看到许多路径被一次又一次地绘制。这种洞察力使我们更仔细地研究了实现，`roundedRect()`并注意到我们从不调用`beginPath()`. 确实，在您上面问题的代码中，它似乎已被评论吃掉了。如果没有这个调用，每次调用都会向不断增长的路径`roundedRect()`添加**额外的矩形，而不是重新开始。**

3.  添加`beginPath()`回调用，我们看到我们正在走向成功：http:
    [//jsfiddle.net/hBEwr/3/](http://jsfiddle.net/hBEwr/3/)

4.  现在我们可以在模式中添加回来（稍作改动）并取得辉煌的胜利：http:
    [//jsfiddle.net/hBEwr/4/](http://jsfiddle.net/hBEwr/4/)
    ![罂粟！ 罂粟！ 罂粟！](../Images/05978a19c89cab1ac0cd203f7b2ee8b3.png)

关于我所做的其他小调整的一些注释：

*   确保您始终使用`var`本地变量：

    ```
    for (i=0; i<10; i++)     // Oops! i is a global variable
    for (var i=0; i<10; i++) // Much better 
    ```

*   重新获取 , 并为每个图块创建图案是低效`ctx`的`img`。在上面的最终代码中，为了简单和快速，我将它们移到了循环之外。

*   使用`console.log`而不是`alert`进行调试通常要容易得多。（打开开发者控制台查看输出。）

*   我在列计算中添加了灌浆的最后外行/列，以确保有空间可以包含它。随心所欲地使用或不使用。

# html - Facebook字体加载然后在IE7-8中消失

> ID：11461247
> 
> 赞同：2
> 
> 时间：2012-07-12T21:50:21.753
> 
> 标签：html, css, facebook, internet-explorer, font-face

我的最新项目出现了一个奇怪的错误。它还没有推出，所以我不能分享（因为与我公司的合同义务），但这里有一些细节：

*   通过 iFrame 的 Facebook 页面
*   问题似乎仅在 IE7-8 中
*   使用自定义 @font-face 字体
*   无法在 VirtualBox 上重现问题
*   在相同浏览器中从 Facebook 打开页面时，问题未重现（Facebook 促成了该问题）

问题是当页面最初在 IE7-8 中加载时字体加载正常，当用户转到内部页面时，所有@font-face 字体都恢复为它们的网络安全字体备份。它们将保持这种状态（甚至返回加载字体的第一页），直到缓存被清除。字体在 Chrome 和 Foxy 的同一台测试机器上加载并保持加载。

我在这里发现了这个错误，[Facebook JS 影响 IE 中的 CSS/@font-face？](https://stackoverflow.com/questions/5739618/facebook-js-affecting-css-font-face-in-ie)，但它建议使用 iFrame 版本应该可以解决问题，我们正在使用 iFrame 版本。

有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:17:23.140

这是 IE8(?) 错误。您需要在页面加载后重新加载 CSS 样式表。

将 ID 添加到您的链接元素：

```
<link rel="stylesheet" href="css/style.css" id="css-element" /> 
```

然后（使用jQuery）：

```
$(document).ready(function() {
    $('#css-element')[0].href=$('#css-element')[0].href;
}); 
```

...或使用 Modernizr 功能（不在每个浏览器中重新加载）：

```
$(document).ready(function() {
    if ($('html.lte-ie9').length > 0)
    {
        $('#css-element')[0].href=$('#css-element')[0].href;
    };
}); 
```

编辑：另见：[IE8 web font iframe bug workarounds](https://stackoverflow.com/questions/7768029/ie8-web-font-iframe-bug-workarounds)

# math - 数学 - 困难的 Pong AI

> ID：11461249
> 
> 赞同：2
> 
> 时间：2012-07-12T21:50:27.247
> 
> 标签：math, algebra

我正在为我正在编写的 Pong 克隆编写一些困难，以使自己熟悉 SFML 和 Xcode。对于最难的难度，我想创建一个人工智能关卡，让计算机立即知道球的去向。所以，如果我有我的 xVelocity 和我的 yVelocity，我可以有效地拥有坡度。问题是，每次球击中顶部或底部时，yVelocity 都会反转。所以基本上，我有一个代数斜率问题，每次撞墙时都会发生相反的情况。

现在，我的屏幕高度为 600 像素，命中检测为顶部和底部 5 像素，使空间为 590 像素。

我的问题：是否有某种公式可以包含所有这些因素。例如，球在 x = 30 和 y = 240 处以 1.45 的斜率被击中，我想获得当 x = 770 时它将击中的 y 值。

让我知道我是否可以简化这一点。同样，我知道如何通过计算 4 次来计算它，如果球反弹 4 次，但我想知道是否有办法计算出它在边界处的 y 速度开关。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-12T22:10:21.453

编辑：只需阅读您的屏幕实际上是 590 像素高，这会改变数学但不会改变公式

计算忽略碰撞的球会击中的位置。如果 (0,0) 是竞技场的左上角，则取 y = mx + b，其中 b 是您的 y 偏移量（球在 y = 240 处击球），m 是您的坡度 (1.45)

现在我们想知道当 x`770-30`更远时 y 将等于多少，所以做数学：

```
y = (1.45)(740) + (240) = 1313 
```

这显然超出了您的范围。它会反映

```
y/height = floor(1313/590) = 2 times 
```

意思是斜坡仍在向上移动，它会撞到

```
y mod height = 1313 mod 590 or 133 
```

如果它反映了奇数次，`(floor(y/2) %2 == 1)`那么您将不得不使用以下方法来计算它

```
MAX_HEIGHT - (y mod height) = 590 - (1903 mod 590) = 590 - 133 = 457 
```

您可以通过将多个 590 高度字段堆叠在一起来可视化这一点，其中一个是您开始的地方：

```
--------------------------------------------------------------------
|
|
|
|                                                 ball ends up here (*)
|                                                                *
|                                                            *
|                                                        *
------------------------(reflection  two)------------*---------------
|                                                *
|                                            *
|                                        *
|                                    *
|                                *
|                            *
|                        *
---------------------*---------(reflection 1)------------------------------
|                *
|            *
|        *
|    *
|*ball hit here
| 
|
----------------------------------------------------------------------- 
```

同样的想法也适用于向下发展。计算位置，计算反射次数，使用 mod 或 590 - mod 来确定它应该在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T21:59:40.410

我还没有尝试过，但如果你知道它在“y 轴”上的哪个位置和斜率，你就会有一个斜率截距公式。插入对面的距离，您可以判断它是在屏幕上方、下方还是内部。如果它会高于或低于，计算当 y 达到顶部或底部时的 x 值，从总 x 中减去并重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-09T05:17:00.960

如果数学对你来说是一个不那么优雅的程序化解决方案（而且速度更慢，在大多数 pong 实现中并不重要）解决方案：

```
 tempX = ball.x;
    tempY = ball.y;
    tempXVel = ball.hspeed;
    tempYVel = ball.vspeed;

    while(tempX < x) //Assumes ball is traveling at you and you are right paddle
    {                //in a X = 0 = left hand side scenario
     tempX += tempXVel;
     tempY += tempYVel; 

     if (tempY > 480 or tempY < 0)
        tempYVel *= -1; //Y Velocity Switch at boundaries
    }

    target_Y = tempY; 
```

基本上只需在循环中执行与球相同的逻辑，然后将其设置为目标。

# ruby-on-rails - 在 Rails 模型中 self 的价值是什么？为什么没有明显的实例方法可用？

> ID：11461262
> 
> 赞同：5
> 
> 时间：2012-07-12T21:51:28.093
> 
> 标签：ruby-on-rails, ruby, self

我的 rails 3.1.6 应用程序中有一个自定义访问器方法，它为属性分配一个值，即使该值不存在。my_attr 属性是一个序列化哈希，除非指定了空白值，否则它应该与给定值合并，在这种情况下，它会将当前值设置为空白值。（添加了检查以确保值是它们应有的值，但为简洁起见将其删除，因为它们不是我的问题的一部分。）我的 setter 定义为：

```
def my_attr=(new_val)
  cur_val = read_attribute(:my_attr)  #store current value

  #make sure we are working with a hash, and reset value if a blank value is given
  write_attribute(:my_attr, {}) if (new_val.nil? || new_val.blank? || cur_val.blank?)

  #merge value with new 
  if cur_val.blank?
    write_attribute(:my_attr, new_val)
  else
    write_attribute(:my_attr,cur_val.deep_merge(new_val))
  end
  read_attribute(:my_attr)
end 
```

此代码按原样运行良好，但在我使用 self.write_attribute() 时却不行。然后我收到以下错误：

```
NoMethodError:
       private method `write_attribute' called for #<MyModel:0x00000004f10528> 
```

因此，我的问题是：让 write_attribute 可用于实例似乎更合乎逻辑，那么为什么它仅可用于类而**不可**用于实例？我在 Ruby 或 Rails（或两者兼有）中对*自我*的基本了解是否有所欠缺？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T21:57:41.103

实例方法的内部`self`是该实例。但是，当您使用显式接收器调用方法时，ruby 的可见性控制会启动并禁止调用私有方法。

```
class Foo
  def implicit
    self # => #<Foo:0x007fc019091060>
    private_method
  end

  def explicit
    self # => #<Foo:0x007fc019091060>
    self.private_method
  end

  private
  def private_method
    "bar"
  end
end

f = Foo.new
f.implicit # => "bar"
f.explicit # => 
# ~> -:9:in `explicit': private method `private_method' called for #<Foo:0x007fc019091060> (NoMethodError)
# ~>    from -:25:in `<main>' 
```

如果要调用私有方法，请使用隐式接收器或`send`.

```
self.send :private_method 
```

## 更新

[Ruby 元编程书籍](http://pragprog.com/book/ppmetr/metaprogramming-ruby)的摘录。

> ### ￼私人的真正含义
> 
> 现在您已经了解了 self，您可以对 Ruby 的 private 关键字重新认识。私有方法受一个简单的规则控制：您不能使用显式接收者调用私有方法。换句话说，每次调用私有方法时，它都必须在隐式接收者——self 上。让我们看一个极端案例：
> 
> ```
> class C
>   def public_method
>     self.private_method 
>   end
>   private
>   def private_method; end
> end
> C.new.public_method
> 
> ⇒ NoMethodError: private method ‘private_method' called [...] 
> ```
> 
> 您可以通过删除 self 关键字使此代码工作。
> 
> 这个人为的例子表明，私有方法来自两个协同工作的规则：首先，您需要一个显式接收器来调用不是您自己的对象上的方法，其次，私有方法只能通过隐式接收器调用。把这两条规则放在一起，你会发现你只能调用自己的私有方法。你可以称之为“私人规则”。</p>
> 
> 您可能会发现 Ruby 的私有方法令人困惑——特别是如果您来自 Java 或 C#，其中私有的行为非常不同。当您有疑问时，只需回到私人规则，一切都会变得有意义。如果两个对象共享同一个类，对象 x 可以在对象 y 上调用私有方法吗？答案是否定的，因为无论你属于哪个类，你仍然需要一个显式的接收者来调用另一个对象的方法。您可以调用从超类继承的私有方法吗？答案是肯定的，因为您不需要显式接收器来调用自己的继承方法。

# objective-c - Xcode LLVM+GCC 4.2 - 生成调试符号

> ID：11461264
> 
> 赞同：7
> 
> 时间：2012-07-12T21:51:44.583
> 
> 标签：objective-c, xcode, xcode4.3, llvm-gcc

我有一个库项目，我一直`Strip Debug Symbols`为发布版本打开“”

我最近注意到了“ `Generate Debug Symbols`”标志。当我将“ `Generate Debug Symbols`”标志设置为 NO 时，我的库大小会缩小 30%

这是为发布版本进行的合理优化吗？

**“剥离调试符号**”和“**生成调试符号**”选项有什么区别，理想情况下，如果我剥离调试符号，所有生成的调试符号不会消失？为什么我会看到这种差异？

除了 -Os (Fastest, Smallest) 我还能做哪些其他优化来减少二进制大小？

“”是如何`Strip Linked Product`工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T22:21:41.343

关于二进制文件大小的减少，这就是我的发布配置文件在剥离二进制文件时的样子，我猜这就是大多数开发人员的做法：

```
DEPLOYMENT_POSTPROCESSING = YES
COPY_PHASE_STRIP = NO (not necessary since my copied binaries are already stripped and codesigned)
STRIP_INSTALLED_PRODUCT = YES
STRIP_STYLE = all
SEPARATE_STRIP = YES
DEAD_CODE_STRIPPING = YES
GCC_GENERATE_DEBUGGING_SYMBOLS = NO 
```

通过这些构建设置，Xcode 似乎与在二进制文件上手动运行“strip”相同，至少从文件大小来看是这样。

我还没有找到任何其他方法来进一步减小二进制大小。请注意那里的“DEPLOYMENT_POSTPROCESSING”标志 - 没有它，二进制大小会大很多，例如所有 C 函数都不会被剥离。

# git - 删除合并提交

> ID：11461266
> 
> 赞同：0
> 
> 时间：2012-07-12T21:51:47.583
> 
> 标签：git

基本上，我要做的是摆脱提交 5581ecb023a9，它是在两个分支的合并过程中创建的。我想要做到的是一切都在一条直线上。

![](../Images/b259392e424fdf4f043ac5d600d92b66.png)

到目前为止，我已经尝试`git rebase -i 5581ecb023a9`按照以前的一些帖子进行操作，尽管它没有显示实际的 5581ecb023a9 提交。我试过`git rebase -i a19ba5850a20`了，它也没有显示 5581ecb023a9 提交。

关于如何将它们全部排成一行的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:56:49.613

*您可以从逻辑上将*提交放在一行中，但这样做会*重写历史记录*。

这意味着提交将具有不同的 id（SHA1 校验和），因为 git 中的每个修订都在校验和中包含它们的父 id。这就是使 git 密码学安全的原因（很容易验证从任何快照到根提交的整个存储库的完整性）。

要比较包含相同“逻辑”提交但重新定位或挑选到另一个的分支，请执行例如

```
log --left-right --graph --oneline --cherry-pick BRANCH1 BRANCH2 
```

正如 git rev-list （以及其他）的手册页所解释的那样，`--cherry-pick`原因

> --樱桃采摘
> 
> ```
>  Omit any commit that introduces the same change as another commit on
>     the "other side" when the set of commits are limited with symmetric
>     difference.
> 
>     For example, if you have two branches, A and B, a usual way to list all
>     commits on only one side of them is with --left-right (see the example
>     below in the description of the --left-right option). It however shows
>     the commits that were cherry-picked from the other branch (for example,
>     "3rd on b" may be cherry-picked from branch A).
> 
>     With this option, such pairs of commits are excluded from the output. 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:18:04.543

为此，您需要针对合并的任一侧与其共同祖先分歧*之前的提交进行变基 - 例如*`git rebse 8fedb6`

# c++ - 为什么在 C++11 中仍然需要“使用”指令来从基类中提出在派生类中重载的方法

> ID：11461270
> 
> 赞同：0
> 
> 时间：2012-07-12T21:51:59.267
> 
> 标签：c++, gcc, c++11, overloading, using-directives

下面的示例得到以下编译错误：

```
test.cpp: In function ‘int main(int, char**)’:
test.cpp:26:8: error: no match for call to ‘(Derived) (p1&)’
test.cpp:14:8: note: candidate is:
test.cpp:16:10: note: void Derived::operator()(const p2&)
test.cpp:16:10: note:   no known conversion for argument 1 from ‘p1’ to ‘const p2&’ 
```

据我了解，这在 C++11 中发生了变化，因此您不需要放入 using 语句。这不正确吗？有没有其他方法可以解决这个问题？

示例（使用 gcc 4.7 编译，使用 --std=c++11）：

```
#include <iostream>
#include <string>

using namespace std;

struct p1{};
struct p2{};

struct Base
{
    void operator()(const p1&) { cout << "p1" << endl; }
};

struct Derived : public Base
{
    void operator()(const p2&) { cout << "p2" << endl; }
    //Works if I include: using Base::operator();
};

int main(int argc, char** argv)
{
    p1 p;
    p2 pp;
    Derived d;

    d(p);
    d(pp);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:04:09.550

> 据我了解，这在 C++11 中发生了变化，因此您不需要放入 using 语句。这不正确吗？

不，成员函数仍然可以隐藏在 C++11 中。

> 有没有其他方法可以解决这个问题？

使用声明是预期的补救措施。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T22:04:54.637

据我所知，不，这在 C++11 中没有改变。

而它没有改变的原因是，这种行为并非偶然。该语言的设计是这样的。它有优点也有缺点，但这并不是因为标准委员会的人忘记了它而发生的事情。

不，没有办法解决它。这就是成员查找在 C++ 中的工作方式

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T23:46:59.903

只是为了澄清情况：我无法想象这在 C++ 中会发生变化*。*甚至希望使它成为一个站得住脚的改变，您必须加强类型安全，使其不再与 C 兼容（例如，您几乎必须消除所有隐式转换）。

情况相当简单：现在，名称查找在找到的第一个范围内停止，其中包含至少一个正在使用的名称实例。如果该名称的实例与您尝试使用该名称的方式不匹配，则编译失败。

考虑一个明显的替代方案：编译器不是在该点停止搜索，而是继续搜索范围，基本上创建了所有这些名称的重载集，然后选择最匹配的那个。

在这种情况下，外部范围内看似微不足道的更改可能（完全）改变某些代码的含义，这完全是无意的。考虑这样的事情，例如：

```
int i;

int main() { 
    long i;

    i = 1;

    std::cout << i;
    return 0;
} 
```

在当前的规则下，这意味着明确和明确：`i=1;`将值 1 分配给`i`定义的 local to `main`。

根据修订后的规则，这值得商榷——事实上，情况可能不应该如此。编译器会找到 , 的两个实例`i`，并且由于`1`具有 type `int`，因此它可能应该与全局匹配`i`。当我们 print out 时`i`，编译器会发现一个需要 a 的重载`long`，因此它会打印出本地`i`（仍然包含垃圾）。

请注意，这增加了另一个问题： the`cout << i;`将指的是本地`i` *，因为*有一个可以使用它的重载。因此，不是控制所使用的重载的变量类型，而是可用的重载也控制所使用的变量。我不确定，但我猜这会使解析*变得*更加困难（很可能是 NP-hard 或 NP-complete 问题）。

简而言之，任何（有意或无意）在内部范围内使用几乎任何类型的隐式转换的代码，在外部范围内看似不相关的更改可能会突然完全改变该代码的含义 - 就像上面的示例一样，很容易打破它在这个过程中相当彻底。

在上面的例子中，只有六行代码，很容易弄清楚发生了什么。但是，考虑一下，当（例如）您在头文件中定义一个类，然后将该头文件包含到其他文件中时会发生什么——编译器会查看您包含头文件的其他代码，找到更好的匹配，然后突然编码你发誓经过彻底审查和最引人注目的测试。

有了标题，它会（或至少可能）变得更糟。您定义您的类，并将标题包含到两个不同的文件中。其中一个文件在外部范围内定义了变量、函数等，而另一个则没有。现在使用名称 X 的一个文件中的代码指的是全局，而另一个文件中的代码指的是本地，因为全局在该文件中不可见。这将完全破坏模块化，并使几乎所有代码都完全破坏（或至少是可破坏的）。

当然，还有其他的可能性可能不会完全被打破。一种可能性是消除*所有*隐式转换，因此只会考虑完美的类型匹配。*这将消除大多数明显的问题，但只是以完全*破坏与 C 的兼容性为代价（更不用说可能会让很多程序员非常不高兴）。另一种可能性是像现在一样进行搜索，在找到匹配项的第一个作用域处停止——然后当且仅当在内部作用域使用该名称时编译将失败时才继续到外部作用域。

这些中的任何一个都可以工作，但是（至少）你需要相当多的限制来防止它们导致几乎疯狂的混乱程度。举个例子，考虑像`a =1; a = '\2';`现在这样的东西，那些*必须*引用同一个变量——但使用这些规则中的第一个，它们不会。

在某些特殊情况下，您可能也可以消除这种特殊情况——例如，使用当前规则来查找变量名，而新的/单独的规则仅用于函数名。

总结：简单/明显的方法会创建一种几乎无法挽回的语言。可以进行修改以防止这种情况发生，但代价是放弃与 C 和基本上所有现有 C++ 代码的兼容性。后者可能在一种全新的语言中是可能的，但是对于像 C++ 这样已经很成熟的语言（尤其是在很大程度上基于向后兼容性而建立的语言——再次是 C++）。

# javascript - 如何在jquery中覆盖这段代码

> ID：11461271
> 
> 赞同：0
> 
> 时间：2012-07-12T21:52:03.077
> 
> 标签：javascript, jquery

下面是我假设单击“添加”按钮时在文本框中显示数字的代码`$('#mainNumberAnswerTxt').val(numberAnswer);`。但是我也有一行代码，它在单击（btn 'button'）时触发该功能。

```
 function addwindow(numberAnswer, gridValues, btn) { 
    $('#mainNumberAnswerTxt').val(numberAnswer);
    $('#btn'+gridValues).trigger('click');       
 } 
```

因为触发器它触发了这个函数`$('.gridBtns').on('click', function()`。在这个函数中是这行代码

```
$('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ? context.find('.answerBtnsOn').length : '');, 
```

这行代码检查单击 gridBtn 时打开了多少按钮并在文本框中显示数字。但是上面的代码行覆盖`$('#mainNumberAnswerTxt').val(numberAnswer);`了 addwindow() 函数中的。

例子：

如果有 2 个“#btns”已打开，但我单击“添加”按钮添加“答案数”列下显示的数字（假设此数字为 1），那么它应该显示数字 1在此代码生效的文本框中`$('#mainNumberAnswerTxt').val(numberAnswer);`，而是显示数字 2，因为此代码正在生效： `$('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ? context.find('.answerBtnsOn').length : '');`

如何在上面的示例中显示数字 1 而不是显示数字 2

下面是文本框的html代码：

```
<input type="text" name="numberAnswer" class="numberAnswerTxt answertxt" id="mainNumberAnswerTxt" readonly="readonly" onChange="getButtons()" > 
```

更新：

这是该应用程序的[演示](http://helios.hud.ac.uk/u0867587/Mobile_app/Text14.php)。请按照以下步骤操作：

*   第 1 步：打开演示时，单击“打开网格”链接并选择按钮“7”。这将在下面显示一个文本框和 7 个字母按钮。
*   第 2 步：选择您选择的下方的 4 个字母按钮。当您打开一个字母按钮时，您会看到上面的文本框会计算它。
*   第3步：现在在左侧你会看到一个绿色的加号按钮，点击它，它会打开一个模式窗口。
*   第四步：在模态窗口有一个搜索栏，输入“AAA”并提交搜索，你会看到一堆行出现。
*   第 5 步：在第一行中，您在“答案数”列下看到它包含数字 1，单击该行内的“添加”按钮，模式窗口将关闭，但您可以在下面阅读问题。

问题：

在“答案数”文本框中，它应该显示数字 1，但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:18:15.040

好的，这个问题很令人困惑，但我想我知道你想要什么：只需向 mainNumberAnswerTxt 添加一个类或属性，这样第二个点击事件就可以忽略它

```
function addwindow(numberAnswer, gridValues, btn) { 
    $('#mainNumberAnswerTxt').val(numberAnswer).attr('data-ignore',true);
    $('#btn'+gridValues).trigger('click');       
} 
```

然后在您的 $('.gridBtns').on('click', function() 中您只需检查（不知道您的确切 html 和 js 代码）

```
if(this).attr('data-ignore') != true {
    $('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ?      context.find('.answerBtnsOn').length : '');
} 
```

# php - 页面顶部的分页链接，在实际脚本之前

> ID：11461272
> 
> 赞同：0
> 
> 时间：2012-07-12T21:52:05.997
> 
> 标签：php

我有一个简单的导航 php 脚本，它可以正常工作。唯一的问题是我需要找到一种在页面顶部而不是底部显示分页链接的方法。所以对于我一个新手来说，这似乎是不可能的，因为我必须在声明实际导航变量之前显示分页链接。

这可以做到吗？

这是脚本：

```
<?
$numrows = '600';
$rowsperpage = 20;
$totalpages = ceil($numrows / $rowsperpage); 
if ($currentpage > $totalpages){ $currentpage = $totalpages; } 
if ($currentpage < 1){ $currentpage = 1; } 
$offset = ($currentpage - 1) * $rowsperpage; 

HERE I query the data from the table and basically fill in the page.

Now starts the pagination links:

$range = 3;
if ($currentpage > 1) {  
    echo '<a href="'.$site_current.'/'.$slug.'/">First</a>'; 
}
$prevpage = $currentpage - 1;   

echo '<a href="'.$site_current.'/'.$slug.'/'.$prevpage.'/">Previous</a>';

for ($x = ($currentpage - $range); $x < (($currentpage + $range) + 1); $x++) {   
    if (($x > 0) && ($x <= $totalpages)) {      
        if($x == $currentpage){ 
            echo '<span class="current">'.$x.'</span>'; 
        } else { 

            echo '<a href="'.$site_current.'/'.$slug.'/'.$x.'/">'.$x.'</a>';

        } 
    } 
}

if ($currentpage != $totalpages){  
    $nextpage = $currentpage + 1;    
    echo '<a href="'.$site_current.'/'.$slug.'/'.$nextpage.'/">Next</a>';   
    echo '<a href="'.$site_current.'/'.$slug.'/'.$totalpages.'/">Last</a>'; 
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:57:32.337

当我在 PHP 中做任何事情时，我会执行以下操作

```
<?php
    //Calculate anything I need for the page to be displayed

    //Build the html page and fill in variables where needed
?> 
```

您可能还想研究像 smarty 这样将逻辑与模板设计分开的框架。PHP 本身确实是一种模板语言，但我实际上非常喜欢使用 smarty。

# android - Android：同步传感器和 GPS 的时间戳

> ID：11461274
> 
> 赞同：1
> 
> 时间：2012-07-12T21:52:09.270
> 
> 标签：android, synchronization, gps, sensors

有没有办法同步由传感器（例如加速度）（**SensorEvent.timestamp**）和 GPS （**Location.getTime()**）测量的值中的时间戳。
SensorEvent.timestamp 是自设备启动以来的纳秒（本地时间）。Location.getTime() 是自 1970 年以来的毫秒数（全球时间）。

我想到的一种解决方案是计算本地时间和全球（GPS）时间之间的偏移量。但问题是，Location 中的时间是 GPS 消息到达设备的时间，但是设备的 GPS 单元（不知道如何调用）需要一些时间来计算位置和将其转发给我的应用程序，因此我无法计算消息到达的当地时间。我在某处（不记得在哪里）读到，从消息到达到它被处理的延迟可能是 100 毫秒，所以如果 GPS 数据和来自其他传感器的数据之间存在很大的偏移量当应用程序获取位置消息和该位置的时间戳时，我会计算当地时间。
有没有办法弄清楚处理 GPS 消息需要多长时间？还是有另一种方法来同步测量？

我想同步这些值的原因是，我想对数据应用一个过滤器（例如 Kalman-Filter）。为此，我想尽可能准确地计算传感器值和 gps 值之间的偏移量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:39:30.157

通常，每秒脉冲 (PPS) 信号用于将测量时间链接到本地​​时钟。GPS 接收器在测量时触发一个脉冲。然后使用本地时钟对该脉冲进行时间戳记。在 Android 手机上，此功能不可用。

除了处理和传输时间造成的延迟外，GPS 软件中的过滤可能还会导致额外的延迟。这种延迟甚至可能取决于所用卫星的速度或数量。

您可以通过比较两者的信号来“校准” GPS 数据和传感器数据之间的延迟。例如：如果您从加速变为减速，您会在手机的加速度计和 GPS 速度中清楚地看到这一点。但是，我怀疑您是否能获得良好的延迟准确性。您甚至可以在估计延迟的卡尔曼滤波器中添加一个状态。

# android - Achartengine 绘制额外的垃圾字符

> ID：11461276
> 
> 赞同：0
> 
> 时间：2012-07-12T21:52:17.817
> 
> 标签：android, achartengine, garbage

我喜欢 Android 的 achartengine 图表库，但我一直遇到这个问题。我希望活动在单击按钮时从我的数据库中重绘不同数据集的图表（返回不同的时间量）。我在活动中有三个按钮以及图表（在包含图表的列表视图下方）。一切正常，除了在按下按钮后会在按钮后面绘制一些额外的垃圾字符。它不会在第一次按下按钮时发生，而是在按下按钮时（不管是哪个按钮）都会出现垃圾。

我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/chart"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:background="#000000"/>

    <Button
        android:id="@+id/oneMonth"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="25dp"
        android:text="@string/OneMonth" />

    <Button
        android:id="@+id/twoMonth"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="@string/TwoMonth" />

    <Button
        android:id="@+id/threeMonth"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginRight="25dp"
        android:text="@string/ThreeMonth" />

</RelativeLayout> 
```

我的活动：

```
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import org.achartengine.ChartFactory;
import org.achartengine.GraphicalView;
import org.achartengine.chart.PointStyle;
import org.achartengine.model.TimeSeries;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYSeriesRenderer;
import android.app.Activity;
import android.database.Cursor;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.Toast;

public class Plot extends Activity{

 /** Called when the activity is first created. */
    private XYMultipleSeriesDataset mDataset;
    private XYMultipleSeriesRenderer mRenderer;
    List<double[]> values = new ArrayList<double[]>();
    private GraphicalView mChartView;
    private TimeSeries time_series;
    private final String RANGE = "range";
    LinearLayout layout;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.plot);

        layout = (LinearLayout)findViewById(R.id.chart);

        final Button set30 = (Button)findViewById(R.id.oneMonth);
        final Button set60 = (Button)findViewById(R.id.twoMonth);
        final Button set90 = (Button)findViewById(R.id.threeMonth);

        set30.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {

                setUpChart(-30);

            }});

        set60.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {

                setUpChart(-60);

            }});

        set90.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {

                setUpChart(-90);

            }});

        }

    @Override
    protected void onResume() {

        super.onResume();
         setUpChart(-30);
    }

    private void fillData(int x) {
        DataBaseHelper helper = new DataBaseHelper(this.getApplicationContext());
        helper.open(DataBaseHelper.READABLE);

        Cursor cursor = helper.getDaysSoManyDaysInThePast(x);

        if(cursor.getCount() != 0){
            DateFormat formatter ; 
             Date date = null; 
              formatter = new SimpleDateFormat(DataBaseHelper.DATE_FORMAT);
             String s;

             int dateCol = cursor.getColumnIndex("date");
             int caffCol = cursor.getColumnIndex("sum(mgCaffeine)");

            for(cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext()){

                s = cursor.getString(dateCol);
                try {
                    date = (Date)formatter.parse(s);

                } catch (ParseException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
                }   
                int caff = cursor.getInt(caffCol);
                time_series.add(date, caff);            
            }

        }else{
            Toast.makeText(this, "No data", Toast.LENGTH_SHORT).show();
        }

       helper.close();
    }

        private void setUpChart(int x){

            mDataset = new XYMultipleSeriesDataset();
            mRenderer = new XYMultipleSeriesRenderer();
            mRenderer.setAxisTitleTextSize(16);
            mRenderer.setChartTitleTextSize(20);
            mRenderer.setLabelsTextSize(15);
            mRenderer.setLegendTextSize(20);
            mRenderer.setPointSize(3f);

            XYSeriesRenderer r = new XYSeriesRenderer();
            r.setColor(Color.GREEN);
            r.setPointStyle(PointStyle.CIRCLE);
            r.setFillPoints(true);
            mRenderer.addSeriesRenderer(r);
            mRenderer.setClickEnabled(true);
            mRenderer.setSelectableBuffer(20);
            mRenderer.setPanEnabled(true);

            time_series = new TimeSeries("test");
            mDataset.addSeries(time_series);

            fillData(x);

            mChartView = ChartFactory.getTimeChartView(this, mDataset, mRenderer,
                DataBaseHelper.DATE_FORMAT);

        layout.removeAllViews();
        layout.addView(mChartView);

    }
} 
```

这是一张图片![](../Images/3292e2280407d205bbe1491beb7aea15.png)垃圾在按钮底部的后面。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:47:05.100

我找到了一种修复它的方法 --- 将按钮包含在相对布局中，并为具有图表的下边距 50dp 的 linealayout 提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T07:22:53.250

您可以尝试执行以下调用。

```
mRenderer.setInScroll(true); 
```

# c - 自动平铺/排列使用 OpenCV (HighGUI) 创建的窗口

> ID：11461278
> 
> 赞同：1
> 
> 时间：2012-07-12T21:52:34.837
> 
> 标签：c, opencv, window

我正在创建这样的调试窗口：

```
cvNamedWindow("a",0); cvShowImage("a", imageA);
cvNamedWindow("b",0); cvShowImage("b", imageB);
cvNamedWindow("c",0); cvShowImage("c", imageC); 
```

OpenCV 在完全相同的位置创建所有这些窗口，这不是很实用，因为除非您四处移动它们，否则只有其中一个是可见的。

我可以让 OpenCV 自动排列窗口以便可以看到所有窗口（如平铺窗口管理器）吗？还是我必须自己使用`cvMoveWindow`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:05:12.873

[不，这是不可能的——用户界面](http://opencv.willowgarage.com/documentation/user_interface.html)中没有这样的功能（一个月前我也想知道这样的功能）。

您必须通过调用手动设置窗口位置`MoveWindow`- 这是唯一的解决方案。

# svn - 如何抢先推迟 svn 合并冲突？

> ID：11461279
> 
> 赞同：9
> 
> 时间：2012-07-12T21:52:36.590
> 
> 标签：svn, merge

我在进行 Subversion 合并时经常会遇到冲突，例如：

```
svn merge -r10347:HEAD ^/branches/header-and-navbar 
```

我知道`--dry-run`，我这样做是为了预览。

但是在真正运行它之后，如果我想为每个冲突选择“推迟”，那么很多文件可能需要很长时间。

如何提前告诉 Subversion 不要向我询问每个文件？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-12T22:00:48.120

`svn merge -h`列出所有选项，而您要查找的选项是

```
svn merge --accept postpone 
```

或者

```
svn merge --accept p 
```

# android - Android：处理广播意图时抛出 CalledFromWrongThreadException

> ID：11461281
> 
> 赞同：1
> 
> 时间：2012-07-12T21:52:46.897
> 
> 标签：android, broadcastreceiver, invalidation, mapactivity

这是我的应用程序的基本生命周期。它现在针对的是 SDK 版本 8，因为我仍在我的设备上运行 Android 2.3.3。

*   应用程序启动，`onResume()`被调用
    方法`show()`被调用来显示缓存的数据。
*   后台服务开始下载和存储数据。它使用`AsyncTask`实例来完成它的工作。
*   其中一项任务将下载的数据存储在 SQLite 数据库中。
*   `onPostExecute()`存储任务完成后会发送广播意图。
*   `MapActivity`接收意图并处理它。
    调用该方法`show()`以显示缓存和新数据。

在该方法`show()`中，地图视图在添加叠加层后**失效。**`show()`当从 MapActivity 本身调用时，这可以正常工作。但是，当异步任务是方法调用的来源（间接）时，它**会引发异常。**

据我了解，当我在这两种情况下触发时，我都在**UI 线程**`show()`。这是真的？

```
 public class CustomMapActivity extends MapChangeActivity {

        private boolean showIsActive = false;

        private BroadcastReceiver mReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                if (intent.getAction().equals(IntentActions.FINISHED_STORING)) {
                    onFinishedStoring(intent);
                }
            }
        };

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            registerReceiver(mReceiver, new IntentFilter(IntentActions.FINISHED_STORING));
        }

        @Override
        protected void onResume() {
            super.onResume();
            show();
        }

        @Override
        protected void onMapZoomPan() {
            loadData();
            show();
        }

        @Override
        protected void onMapPan() {
            loadData();
            show();
        }

        @Override
        protected void onMapZoom() {
            loadData();
            show();
        }

        private void onFinishedStoring(Intent intent) {
            Bundle extras = intent.getExtras();
            if (extras != null) {
                boolean success = extras.getBoolean(BundleKeys.STORING_STATE);
                if (success) {
                    show();
                }
        }

        private void loadData() {
            // Downloads data in a AsyncTask
            // Stores data in AsyncTask
        }

        private void show() {
            if (showIsActive) {
                return;
            }
            showIsActive = true;
            Uri uri = UriHelper.getUri();
            if (uri == null) {
                showIsActive = false;
                return;
            }
            Cursor cursor = getContentResolver().query(uri, null, null, null, null);
            if (cursor != null && cursor.moveToFirst()) {
                List<Overlay> mapOverlays = mapView.getOverlays();
                CustomItemizedOverlay overlay = ItemizedOverlayFactory.getCustomizedOverlay(this, cursor);
                if (overlay != null) {
                    mapOverlays.clear();
                    mapOverlays.add(overlay);
                }
            }
            cursor.close();
            mapView.invalidate(); // throws CalledFromWrongThreadException
            showIsActive = false;
        }

    } 
```

这是堆栈跟踪...

```
android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
    at android.view.ViewRoot.checkThread(ViewRoot.java:3020)
    at android.view.ViewRoot.invalidateChild(ViewRoot.java:647)
    at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:673)
    at android.view.ViewGroup.invalidateChild(ViewGroup.java:2511)
    at android.view.View.invalidate(View.java:5332)
    at info.metadude.trees.activities.CustomMapActivity.showTrees(CustomMapActivity.java:278)
    at info.metadude.trees.activities.CustomMapActivity.onMapPan(CustomMapActivity.java:126)
    at info.metadude.trees.activities.MapChangeActivity$MapViewChangeListener.onChange(MapChangeActivity.java:50)
    at com.bricolsoftconsulting.mapchange.MyMapView$1.run(MyMapView.java:131)
    at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

注意：我使用[MapChange](https://github.com/bricolsoftconsulting/MapChange)项目来接收有关地图事件的通知。

* * *

**编辑：**

从我现在在[有关 AsyncTask 的文档](http://developer.android.com/guide/components/processes-and-threads.html#WorkerThreads)中读到的内容（向下滚动一点），我不确定我是否以正确的方式使用它。如前所述，我从一个类中启动`AsyncTask`实例。`Service`相反，文档指出......

> AsyncTask 允许您在用户界面上执行异步工作。它在工作线程中执行阻塞操作，然后在 UI 线程上发布结果，而无需您自己处理线程和/或处理程序。

...听起来好像`AsyncTask`只能在 a 内使用，`Activity`而不是在 a 内使用`Service`？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:23:49.103

如果它在错误的线程上被调用，那么它可能不在 UI 线程上。你有没有试过这个：

```
runOnUiThread(new Runnable() {
    public void run() {
        mapView.invalidate();
    }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T16:54:05.863

崩溃的原因是您使用的 MapChange 库的实现方式。在幕后，这个库使用`Timer`和`TimerTask`实现来延迟触发更改事件并减少应用程序调用的次数`onMapChanged()`。但是，您可以从文档中`Timer`看到它在创建的线程中运行其任务：

> 每个计时器都有一个线程，任务在其上按顺序执行。当该线程忙于运行任务时，可运行的任务可能会出现延迟。

由于 MapChange 库无法确保在主线程上将回调发布到您的应用程序（这是一个严重的错误 IMO，尤其是在 Android 上），因此您必须保护由于此侦听器而调用的代码。您可以在与库捆绑的示例中看到这一点，`MyMapActivity`该回调中的所有内容都通过 a`Handler`为您发送回主线程。

在您的应用程序中，内部`onMapPan()`和随后的代码在`showTrees()`后台线程上被调用，因此在那里操作 UI 是不安全的。使用 a`Handler`或`runOnUiThread()`from your `Activity`will 保证您的代码在正确的位置被调用。

关于您的第二个问题`AsyncTask`，没有什么能阻止您在任何应用程序组件中使用它，而不仅仅是`Activity`. 即使它是一个“后台”组件，默认情况下 a`Service`仍然在主线程上运行，因此`AsyncTask`仍然需要暂时将长期处理卸载到另一个线程。

# image - 使用 gtk.image.set_from_file 替换图像

> ID：11461285
> 
> 赞同：0
> 
> 时间：2012-07-12T21:52:56.143
> 
> 标签：image, widget, python-2.7, pygtk, glade

我正在尝试添加，如果用户需要，从 python 中的小部件更改图像。

我将 Glade 与 gtk2+、python 2.7.3 一起使用，这就是我正在做的

```
image = gtk.Image()
image.set_from_file("MyImagePath.png")
image.show()

button = App.get_object('buttonExample')
button.add(image) 
```

这就是我尝试更改图像时得到的

> GtkWarning：尝试将 GtkImage 类型的小部件添加到 GtkAspectFrame，但作为 GtkBin 子类，GtkAspectFrame 一次只能包含一个小部件；它已经包含一个 GtkImage 类型的小部件

图像按预期正确加载，但如果我更改图像的输入路径，我希望我可以更改按钮图像，但这不是我得到的。

我尝试使用 gtk.Image.clear()，但它说我不能在按钮上使用它（也许我只是把事情搞砸了）

有没有一种好方法可以将图像加载和重新加载到按钮？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:45:40.473

您要么必须在添加新图像之前从按钮中删除旧图像（错误消息对此非常简单），要么您可以尝试更改当前图像：

```
button.get_child().set_from_file("MyImagePath.png") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T16:49:03.453

这正是我所需要的。如你所说，我在图像中使用了 clear 并且还清理了按钮图像，如下所示：

```
App.get_object('buttonExample').remove(image)
image.clear() 
```

非常感谢您的帮助！

# c# - 属性目标 C# - 如何将带有属性目标的代码移植到 Java 中？

> ID：11461287
> 
> 赞同：4
> 
> 时间：2012-07-12T21:53:13.140
> 
> 标签：c#, java, porting

首先，我们在这里谈论的是[Keepass](http://keepass.info/)。
有问题的文件是：`KeePass-2.19-Source\KeePass\Native\NativeMethods.cs`

代码..好吧，就是文件本身。但这里有一个片段：

```
 [DllImport("KeePassLibC32.dll", EntryPoint = "TransformKey256")]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool TransformKey32(IntPtr pBuf256,
        IntPtr pKey256, UInt64 uRounds); 
```

现在的问题是，Java 不支持[Attribute Targets](http://msdn.microsoft.com/en-us/library/ms177223.aspx)。如何将文件移植到 Java 中？
可能吗？如果是这样……怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:03:31.650

据我所知，Java 也不支持 P/Invoke，因此属性目标不会帮助您...您应该能够使用 JNI 实现相同的结果，但是这段代码不能从字面上翻译C＃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:19:24.387

Java**确实**支持属性目标（但它们是“注释”目标）：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/annotation/Target.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/annotation/Target.html)

但这对您没有多大帮助...除非您计划发明自己的 DllImport 以某种方式使用 JNI...通过 JSR-299 之类的东西

# iphone - 将文件从 iphone 上传到网络服务器

> ID：11461289
> 
> 赞同：0
> 
> 时间：2012-07-12T21:53:13.713
> 
> 标签：iphone, objective-c, ios, xcode, upload

我在 iPhone 上存储了一个 .xls 文件。我想将此文件上传到远程 Web 服务器。有没有办法做到这一点？我发现的所有问题似乎都与图像文件有关，而我想要一个通用文件类型的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:57:37.143

我将[AFNetworking](https://github.com/AFNetworking/AFNetworking/)用于各种文件类型，效果很好。ASIHttpRequest 已被其作者放弃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:49:48.280

我可以推荐[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)吗？这是文件上传的一些[示例代码](http://dougdiego.com/2009/04/08/asihttprequest-uploading-photos/)。

# iphone - 作为 UITextField 的 FirstResponder 的 UIDatePickerView 缺少月份组件

> ID：11461291
> 
> 赞同：0
> 
> 时间：2012-07-12T21:53:19.163
> 
> 标签：iphone, ios, uitableview, uidatepicker

我正在实现一个表格视图，其中对于一个特定的表格视图单元格，有一个文本字段，其第一响应者需要是 UIDatePicker。我已经能够实现其中的大部分，但由于某种原因，视图看起来并不完全正确。我一直在这个问题上停留了一段时间，我一直在寻找这个答案以寻求帮助。

[UItableView 中的 UItextfield 中的 UIDatepicker](https://stackoverflow.com/questions/6208118/uidatepicker-in-uitextfield-in-uitableview-realtime-update)

到目前为止，我的数据选择器正常显示和消失，文本字段的委托工作正常，并且可以更新文本字段。我的问题是由于某种原因缺少日期选择器的月份组件（我有一张图片，但由于我的代表少于 10 个，我无法发布它）。它看起来像一个典型的 UIDatePicker，但第一个有月份的组件是完全空的，不能滚动。日和年组件正常运行。

这就是我创建选择器视图的方式

```
 cell = [tableView dequeueReusableCellWithIdentifier:InfoIdentifier];
    UILabel *textLabel = (UILabel *)[cell viewWithTag:kInfoLabelTag];
    UITextFieldWithIndex *cellText = (UITextFieldWithIndex *)[cell viewWithTag:kInfoTextboxTag];
    cellText.indexPath = indexPath;

    textLabel.text = @"Birthday";

    UIDatePicker *datePicker = [[UIDatePicker alloc] init];
    datePicker.datePickerMode = UIDatePickerModeDate;
    [datePicker addTarget:self action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged];
    datePicker.tag = indexPath.row;

    cellText.inputView = datePicker; 
```

这是回调方法

```
-(void)datePickerValueChanged:(id)sender {
NSLog(@"Date Changing");
currentTextField.text = @"new date";
} 
```

辞职第一响应者有效，如果我打印日期，月份就存在，所以唯一的问题是月份标签丢失。

我使用 Storyboards 创建了这个项目，我也在这个项目中使用了核心日期。然而，这个视图控制器的核心数据部分还没有实现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:13:32.273

因此，在查看了我的代码之后，我发现问题出在我为 UIPickerView 创建的一个类别上。

在另一个文件中，我通过使用一个类别来覆盖 UIPickerView 的 drawrect: 方法创建了一个自定义选择器视图。在覆盖的方法中，我实际上为 UIPickerView 将一些视图设置为隐藏。尽管仅在另一个文件中导入了类别，但 UIDatePickerView 使用了类别覆盖方法，因此将第一个组件设置为隐藏。

我的快速解决方法是简单地将 UIPickerView 子类化为我在另一个文件中的特殊选择器，从而隔离那里的自定义 drawRect 覆盖。完成此操作后，我的 UIDatePicker 正确显示！

# sharepoint-2010 - Sharepoint 2010 - 我可以将自定义表单设置为未部署到 _layouts 的内容类型吗？

> ID：11461293
> 
> 赞同：2
> 
> 时间：2012-07-12T21:53:50.670
> 
> 标签：sharepoint-2010, content-type

背景：

我有一个站点，我也部署了我的内容类型，并且该站点有许多子站点。每个子站点将使用内容类型。

我有一个模块，我想在部署和激活我的功能时推送自定义的新建/编辑/显示表单（Web 部件页面）。

我想直接将这些表单设置为内容类型 (FormUrls)，但我不知道应该如何或在何处部署表单以便正确引用它们。

我知道如何使用 _layouts 执行此操作，并且我也知道如何使用列表定义架构（设置路径），但由于版本要求，我不能使用其中任何一个（我们尽可能避免使用 _layouts）。我们需要在创建时维护列表和表单历史记录。当新版本的列表/表单发布时，新的内容类型将继承之前的内容类型，新的表单将设置为新的内容类型。

我们也不能使用 Infopath（许可问题）。

我尝试使用模块将表单部署到内容类型（_cts/内容类型名称）的 Url，但我似乎无法正确获取内容类型路径。这是一个简单的例子（我不能给出实际的代码，否则我会，抱歉）。

模块

```
<Module Name="Module1" Url="_cts/Content Type" RootWebOnly="FALSE">
  <File Path="Module1\MyNewForm.aspx" Url="Module1/MyNewForm.aspx" />
</Module> 
```

内容类型

```
<FormUrls xmlns="http://schemas.microsoft.com/sharepoint/v3/contenttype/forms/url">
      <New>Module1/MyNewForm.aspx</New>
</FormUrls> 
```

上面的示例不起作用，我尝试删除 Module -> Url 属性，以便将其部署在根目录，但这也没有帮助。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:45:42.647

您可以将任何共享点库用于存储表单。首先，您需要通过“模块”将页面部署到库/文件夹，elements.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<Elements xmlns="http://schemas.microsoft.com/sharepoint/">
  <Module Name="Forms" Url="SiteAssets">
    <File Path="Forms\CustomDisplay.aspx"
     Url="CustomDisplay.aspx" 
     Type="GhostableInLibrary" />
  </Module>
</Elements> 
```

然后它可以被引用为内容类型的表单，elements.xml：

```
<?xml version="1.0" encoding="utf-8"?>

 <Elements xmlns="http://schemas.microsoft.com/sharepoint/">

 <ContentType ID="0x01080100AB22BE524D7344D89DBB2A27AAF5AB3C00924B45ABBDA240DA8C5B32541E9184AE"
           Name="CTName"
           Group="CustomCTypes"
           Description="Decription"
           Inherits="FALSE"
           Hidden="FALSE"
           Version="0">
<FieldRefs>
</FieldRefs>

<XmlDocuments>
  <XmlDocument NamespaceURI="http://schemas.microsoft.com/sharepoint/v3/contenttype/forms/url">
    <FormUrls  xmlns="http://schemas.microsoft.com/sharepoint/v3/contenttype/forms/url">
      <Display>SiteAssets/CustomDisplay.aspx</Display>
    </FormUrls>
  </XmlDocument>
</XmlDocuments> 
```

# jenkins - Jenkins + Gerrit 触发器不会自动构建

> ID：11461301
> 
> 赞同：10
> 
> 时间：2012-07-12T21:54:47.713
> 
> 标签：jenkins, gerrit, jenkins-plugins

Jenkins 似乎不会自动引入需要从 Gerrit 审查的更改。

我们正在使用 Gerrit 触发器。

此外，如果我尝试手动触发一些，似乎什么都没有发生。

Gerrit Trigger 管理区的“控件”，好像没多少……闪烁的不是“启动”、“停止”就是“重启”

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-17T15:10:01.307

我只是遇到了同样的问题，这与我工作中用于匹配分支的默认 Gerritt 设置有关。在您的工作中，在 Gerritt 触发器下，如果您的分支模式显示“**”，请确保类型设置为路径，否则它将不匹配任何分支。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-21T02:37:42.317

我实际上偶然发现了同样的问题，我花了一段时间才弄清楚 UI，因为我认为分支和项目配置属于`Dynamic Trigger Configuration`. 配置基本上需要如下所示：![在此处输入图像描述](../Images/9a88de8de7c97757cbf3f5757393952c.png)

*注意：*我的配置使用`Silent Mode`, 因为我不希望插件与 gerrit 通信。

# java - 使用java（android）动态更改php中的mysql查询

> ID：11461304
> 
> 赞同：3
> 
> 时间：2012-07-12T21:55:01.293
> 
> 标签：java, php, android, mysql, dynamic

我正在为我的 java/android 应用程序使用 MySQL 数据库和 php。我对php没有任何经验。

这是我的 php 文件 (getAllDataFromSomeTable.php)

```
<?php
mysql_connect("someHosturl","someUsername","somePassword");
mysql_select_db("databasename");

$q=mysql_query("SELECT * FROM sometable");
while($e=mysql_fetch_assoc($q))
    $output[]= $e;

print(json_encode($output));

mysql_close();
?> 
```

我在 Java 中使用 HttpPosts 和类似的东西。这样我可以从'sometable'中获取所有数据

但是，如果我想使用不同的查询，例如“从用户名 = 'thisuser' 的某个表中选择前 1 个”。我怎样才能在java中动态改变它？我的 php 文件应该如何看，java 中的代码应该如何看？这是我现在的代码：

```
String result = "";
    List<? extends NameValuePair> licenses = (List<? extends NameValuePair>) new ArrayList<DriversLicense>();
    InputStream is = null;
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("http://some-url.com/getAllDataFromSomeTable.php");
        httpPost.setEntity(new UrlEncodedFormEntity(licenses));
        HttpResponse response = httpclient.execute(httpPost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();
    }catch(Exception e){
        Log.d("httpclient tag", e.getMessage());
    }

    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
        }
        is.close();

        result=sb.toString();
        Log.d("result is", result);
    }catch(Exception e){
         Log.d("log-tag", "Error converting result "+e.toString());
    }

    try{
        JSONArray jArray = new JSONArray(result);
        for(int i=0;i<jArray.length();i++){
                JSONObject json_data = jArray.getJSONObject(i);
                Log.d("from jsonObject", "id= " + json_data.getInt("Id") + ", number = "
                        +json_data.getString("Number"));
        }
    }catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:06:45.917

为什么不尝试在请求中添加参数？

例如：

[http://some-url.com/getAllDataFromSomeTable.php?table=difftable&whereField.1=username&whereValue.1=xyz&whereField.2=surname&whereValue.2=Smith](http://some-url.com/getAllDataFromSomeTable.php?table=difftable&whereField.1=username&whereValue.1=xyz&whereField.2=surname&whereValue.2=Smith)

这样，您将需要解析这些参数并根据传递的数据构建查询。我认为上述请求会进行此查询：

```
select * from difftable where username = 'xyz' and surname ='Smith' 
```

另一方面，这就是 web 服务的用途，所以如果可能的话，我会考虑类似的事情。

# php - Ajax 表单提交

> ID：11461307
> 
> 赞同：0
> 
> 时间：2012-07-12T21:55:11.470
> 
> 标签：php, jquery, ajax, post

嘿伙计们，我在这里没有收到任何发布数据，我很肯定这根本不起作用。最重要的是它触发了一个带有 id # 的接受/拒绝，以及该表单复选框的值。我没有收到任何错误，也没有任何警告，所以我在遍历它时遇到了问题=（希望另一双眼睛？

提前抱歉，我知道我的 JQuery 失败了。

```
 <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load("jquery", "1.6");
    </script>

    <script>
        $(".audit").submit(function() 
            { 
                return false; 
            });

        $(".accept, .deny").click(function(event) 
            {
                $form = $(this).parent("form").get(0);
                $gruden = $form(function(index) { attributes.push($(this).val());});
                $.post($form.attr("action"), $form.serialize() + "&submit=" + $(this).attr("value") + "&gruden=" + $gruden, function(data) {

                console.log(data);

            });
        });
    </script>

.......................

<?php foreach($obj->photos as $pending) { ?>

        <div class='container' id='photo-<?=$pending->id;?>'>

            <span class='shadow'>
            <a href='/<?=$pending->large;?>'><img src='http://<?=$_SERVER['HTTP_HOST'].'/'.$pending->small;?>'/></a>
            </span>

            <form class='audit' name='audit-<?=$pending->id;?>' action='<?=$_SERVER['PHP_SELF'];?>'>
            <div class='box'>

                <ul>

                    <li>ID:   <?=$pending->id;?></li>
                    <li>Date: <?=$pending->created_at;?></li>
                    <li>User: <?=$pending->fb_id;?></li>
                    <li>&nbsp;</li>

                    <li>

                        <input class='gruden' value='gruden-<?=$pending->id;?>' type='checkbox' />
                        <a name='submit' value='accept-<?=$pending->id;?>' class='accept' href=''></a>
                        <a name='submit' value='deny-<?=$pending->id;?>' class='deny' href=''></a>

                    </li>

                </ul>

            </div>
            </form>

        </div>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:08:05.900

我想我现在看到了你的问题。我已经重写了你的代码，所以它更有意义。评论来解释发生了什么

```
<script>
    $(".audit").submit(function(){ 
            return false; //Preventing the form from submitting if someone hits Enter
    });

    $(".accept, .deny").click(function(event) {
            var form = $("form.audit"); //Always use var to declare variables in Javascript. It's not PHP; we don't use $, unless you want it to be a part of the variable name. Also fixed your selector
            var gruden = $form(function(index) { attributes.push($(this).val());}); //Are you trying to find out if the checkbox with class gruden is checked? Please answer in the comments so I can correct this line
            $.post(form.attr("action") + "&submit=" + $(this).attr("value") + "&gruden=" + gruden, form.serialize(), function(data) { 
                   console.log(data);
            }); //I assume that you want to pass submit and gruden as GET params here, since you're appending them to the URL. If you want them to go as POST vars, then let me know in the comments
    });
</script> 
```

无意冒犯，但我认为您可能会从阅读更多有关 Javascript 和 jQuery 的内容中受益。至少阅读选择器如何在 jQuery 中工作，以及一些基本的 Javascript 语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:00:09.537

此行肯定不会返回您的表单元素，因为它只查看直接父级。

```
$form = $(this).parent("form"); 
```

尝试这样的事情：

```
$form = $(this).parents("form").get(0); 
```

# iphone - 如何在 iPhone 中导入一些标题和在 iPad 中不同

> ID：11461309
> 
> 赞同：1
> 
> 时间：2012-07-12T21:55:27.893
> 
> 标签：iphone, cocoa-touch

我需要导入此标头

```
#import "NumberKeypadDecimalPoint.h" 
```

但前提是设备是 iPhone。我怎么能这样做？

该应用程序的通用性

我试试这个，但它不起作用

```
#define iPad    UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad
#if iPad
#import "NumberKeypadDecimalPoint.h"
#end 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:51:11.320

你不能那样做。要了解原因，您必须对通用应用程序（和 C 编译器）的工作原理有所了解。

首先，`#if`等`#define`是在编译阶段早期调用的预编译器宏。它们通常用于编写可跨平台编译的可移植代码。例如：

```
# ifdef __ANDROID__
#   include <GLES/gl.h>
#   include <GLES/glext.h>
# else // iOS
#   include <OpenGL/OpenGL.h>
#   include <OpenGL/gl.h>
#   include <OpenGL/glext.h>
# endif 
```

但是，通用应用程序就是这样 - 可在多种设备类型上运行的二进制文件。因此，在 iPhone 和 iPad 上运行的代码是由相同的编译通道生成的（这与用于在一个应用程序中支持多种 CPU 类型的*[通用二进制文件](http://en.wikipedia.org/wiki/Universal_binary)*或*胖二进制文件*不同，这些应用程序实际上确实包含来自多个编译器通道的代码一个应用程序二进制文件）。

由于您的设备类型只能在运行时确定，因此您必须在运行时执行设备类型检查。

# asp.net-mvc-3 - 命名空间中不存在 System.Web.Helpers：WebImage

> ID：11461310
> 
> 赞同：9
> 
> 时间：2012-07-12T21:55:31.907
> 
> 标签：asp.net-mvc-3, .net-assembly

虽然我知道这个问题已经被“回答”了大约 5000 万次，但我还没有找到可以为我解决问题的答案，所以我觉得我别无选择，只能再问一次。

以前的建议： [MVC 中的 Razor 页面出现编译错误，找不到 System.Web.Helpers](https://stackoverflow.com/questions/4169618/razor-pages-in-mvc-are-giving-a-compile-error-with-system-web-helpers-not-being)

```
<add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

我已将此添加到我的 web.config，但问题仍然存在。

[类型或命名空间名称不存在](https://stackoverflow.com/questions/5567945/type-or-namespace-name-does-not-exist)

我只有一个项目，targetFramework是4.0。

我安装了 Microsoft.Web.Helpers 1.15（2.0 与 MVC3 不兼容。）Microsoft.Web.Helpers.dll 在我的 bin 文件夹中。

奇怪的是有 Microsoft.Web.Helpers 和 System.Web.Helpers。在这种情况下，我需要 System.Web.Helpers，因为我在代码中使用了 WebImage。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T21:58:53.607

正如我不断告诉人们的那样，当我寻求帮助时，我才能找到答案。就我而言，在通过升级到 Microsoft ASP.NET Helper Library 2.0 然后尝试撤消该操作以某种方式破坏我的解决方案的过程中，System.Web.Helpers 停止成为我项目中的引用程序集。简单修复！

当然，修复它导致我出现下一个程序集引用错误。我想我会在这里整晚。

# php - 将 CSV 文件直接导入 MySQL 数据库

> ID：11461313
> 
> 赞同：0
> 
> 时间：2012-07-12T21:55:43.563
> 
> 标签：php, mysql, csv

> **可能重复：**
> [将 CSV 导入 mysql](https://stackoverflow.com/questions/3025648/import-csv-to-mysql)

是的，我需要一些帮助：

我正在尝试使用 php 将 .csv 文件导入 mysql 数据库，而不是通过 phpmyadmin 手动执行。

这是我目前的代码：

```
if($_REQUEST['func'] == "iid"){
    $db->conn = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME) or 
                      die('There was a problem connecting to the database.');
    $csv = $_POST['csv-file'];
    $path = $csv;
    $row = 1;
    if (($handle = fopen($path, "r")) !== FALSE) {
        while (($data = fgetcsv($handle, 1000, ";")) !== FALSE) {
            $row++;
            $data_entries[] = $data ;

        }
        fclose($handle);
    }
    // this you'll have to expand
    foreach($data_entries as $line){
        $sql = $db->conn->prepare('INSERT INTO `bd_results`');

        $db->execute($line);
    }
} 
```

但是我收到以下错误：

```
Fatal error: Call to undefined method stdClass::execute() in /homepages/19/d372249701/htdocs/business-sites/bowlplex-doubles-new/admin/scores.php on line 44 
```

作为参考，我使用的代码取自：[这里](https://stackoverflow.com/questions/4143938/import-csv-file-directly-into-mysql)

我不熟悉 $db->conn 业务，我习惯于 mysql_connect！所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:00:09.043

试试这个简单的。

```
if (($handle = fopen("google.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $db->conn->query("INSERT INTO values('" . implode('\',\'', $data) . "');");
    }
    fclose($handle);
} 
```

如果 CSV 值还没有引号，您的脚本可能还需要为它们添加引号。如果您需要处理 CSV 文件中的引号和所有内容，我建议您查看我在[http://www.fusionswift.com/2012/07/php-import-csv-to-mysql/上的博客文章](http://www.fusionswift.com/2012/07/php-import-csv-to-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:02:08.520

```
foreach($data_entries as $line) {
    $stmt = $db->conn->prepare('INSERT INTO `bd_results` (field1, field2) VALUES (?, ?)');
    $stmt->bindParam('ss', $field1Value, $field2Value);
    list($field1Value, $field2Value) = $line
    $stmt->execute();
} 
```

其中 $field1Value 是第一个 CSV 列，$field2Value 是第二个 CSV 列，两者都是字符串类型，在`bindParam()`方法中指定。

基本上，您需要完整地准备查询，然后您可以为其分配变量，一旦变量具有所需的值，您就可以使用`execute()`方法执行查询。

这就是您使用准备好的语句的方式。我个人会接受 Mahn 的建议，并避免使用准备好的语句来完成这样的任务，除非您需要在处理数据时处理数据。

[mysqli_stmt::bind_param](http://php.net/manual/en/mysqli.prepare.php) [mysqli_stmt::执行](http://php.net/manual/en/mysqli-stmt.bind-param.php)

# c - 在 Microsoft Visual Studio 2010 中设置子项目

> ID：11461326
> 
> 赞同：3
> 
> 时间：2012-07-12T21:57:01.890
> 
> 标签：c, visual-studio-2010, build-process

我正在使用 Visual Studio 2010 在 C 中开发 Windows 代码。

我正在处理几个相关的项目：一个静态库、一个 DLL 和一个可执行文件。DLL 应该有链接的静态库，并且可执行文件依赖于 DLL。（我使用的是“隐式”DLL 链接；我不需要控制 DLL 加载和卸载。）

现在我有三个独立的 VS2010 项目，但我知道可以将其设置为“子项目”：静态库应该是 DLL 的子项目，DLL 应该是 EXE 的子项目。

我想解决以下问题：

*   当我重建 EXE 时，如果需要，它应该重建 DLL，如果需要，DLL 构建应该重建静态库。我只想打开 EXE，按一下`F7`键，然后一切都建立起来。

*   当我将 EXE 重建为 Debug 时，它应该与`.lib`DLL 中的 Debug 文件链接；同样，当我将 EXE 重建为 Release 时，它​​应该与`.lib`DLL 中的 Release 文件链接。如果我正确设置子项目，这会自动工作吗？

编辑：我取得了进展。首先，在DLL项目中，我使用`File / Add`了然后选择`Add Existing Project`添加静态库。（据我所知，这仅在`File`菜单上可用！绝对不在右键菜单中。）其次，我单击左侧“解决方案资源管理器”侧栏中的DLL项目，然后右键单击并选择`Project Dependencies...`并设置DLL项目依赖于首先构建的静态库项目。然后Visual Studio好像神奇的为我设置了链接依赖，当我`F7`在DLL项目中敲键时，它会构建静态库项目。

我尝试对 EXE 项目重复上述步骤。现在它将构建 DLL，但它还没有正确链接；链接器抱怨从 DLL 导出的函数不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:20:20.180

您不能真正拥有“子项目”，但您可以在一个解决方案中拥有多个项目。然后，您可以通过打开“项目|项目依赖项...”菜单项来标记它们之间的依赖关系。

您还可以通过引用另一个项目（从“项目|参考...”菜单项）在某些项目之间建立“更强”的依赖关系。例如，如果一个应用程序项目引用了一个库项目，该库将自动链接到该应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:54:09.333

我有它的工作。以下是我用来使其工作的步骤：

*   选择`File / Add / Existing Project...`并导航到您希望作为子项目的其他项目。选择`.vcxproj`文件并确定对话框。您刚刚添加了一个项目作为子项目。

*   右键单击左侧“解决方案资源管理器”侧边栏窗格`Project Dependencies...` 中的主项目，然后选择单击子项目使其成为主项目的依赖项，然后确定对话框。这是一个选项卡式对话框，另一个选项卡是“构建顺序”；如果您单击它，您可以确保 Visual Studio 将首先构建子项目，然后构建主项目。您现在已经进行了设置，以便先构建子项目，然后构建主项目。

*   右键单击左侧“解决方案资源管理器”侧边栏窗格中的主项目，然后选择`References...` 在引用对话框中，单击`Add New Reference...`按钮。让主项目引用子项目就好了。您现在已经进行了设置，以便链接器将链接子项目的输出文件。

我执行上述步骤使DLL项目具有静态库项目作为子项目，我再次执行这些步骤使EXE项目具有DLL项目作为子项目。但是我得到了关于找不到静态库文件的构建错误。所以我认为，即使我将静态库设置为 DLL 库的子项目，也必须在 EXE 项目中设置该依赖项；依赖项似乎不是传递的！我执行了上述步骤以明确静态库是EXE项目的DLL子项目的子项目，并且修复了一些东西。

现在，当我按下`F7`键时，一切都建立起来了。如果我选择`Build / Clean Solution`它会清理所有三个项目。当它链接时，它会根据需要获取 Debug 或 Release 库文件并将它们链接进去。

有时候我打`F7`构建，构建失败，说依赖库过时了；但是如果我`F7`再次点击，那么 Visual Studio 会重建依赖库并且构建成功。如果我`Ctrl+Alt+F7`强制执行干净的构建，则每次构建都会成功。我不知道为什么 Visual Studio 有这个怪癖。

# asp.net - ASP.NET 表单身份验证 Cookie 未在 Safari 中设置

> ID：11461334
> 
> 赞同：2
> 
> 时间：2012-07-12T21:57:41.077
> 
> 标签：asp.net, ajax, cookies, safari, forms-authentication

我有一个 ASP.NET Web 服务，它公开了一个名为 DoLogin 的方法

```
[WebService(Namespace = "http://rtns.ism.ec/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ToolboxItem(false)]    
[ScriptService]
public class UserManagerService : WebServiceBase
{

    [WebMethod(EnableSession=true)]
    [ScriptMethod]
    public ResponseBase<bool> DoLogin(LoginCredentials Credentials)
    {
        Credentials.IpAddress = HttpContext.Current.Request.UserHostAddress;
        Credentials.ServerID = Environment.MachineName;
        Credentials.SystemID = WebConfigurationManager.AppSettings["SYSTEM_ID"];
        Credentials.UserAgent = HttpContext.Current.Request.UserAgent;

        try
        {
            DataResponse<User> resp = UserManager.LoginUser(Credentials);

            if (resp.Code)
            {
                FormsAuthentication.SetAuthCookie(Credentials.Email, true);
                HttpContext.Current.Session.Add(Constants.Identifiers.USER_SESSION_INFO_IDENTIFIER, resp.Data);
            }
            return resp;
        }
        catch (Exception _ex)
        {
            ISM.Essentials.Business.LogManager.SaveLog(_ex);
            return new ResponseBase<bool> { Message = MessageManager.Instance[Constants.Messages.E_GENERIC_FAILURE, Credentials.CultureID] };
        }
    }

} 
```

我有一个 JQuery 客户端，它可以拨打电话：

```
function loginSubmitHandler() {

    var objeto = {
        Email: $('#txtUser').val(),
        Password: $('#txtPassword').val(),
        CultureID: $('#hddCulture').val()
    };

    utils.startAjaxCall('../Services/UserManagerService.asmx/DoLogin', { Credentials: objeto }, function(data) {

    if (data.d.Code) {
        window.location.replace('home.aspx');
    }
    else
    {
        utils.alert(locals.Information, locals.Accept, data.d.Message);            
    }
    });

    return false;
} 
```

当我使用不正确的凭据登录时，会出现带有从服务器发送的消息的警报。如果我提供正确的凭据，页面将重定向到 home.aspx

自以下浏览器开始以来，此代码可以 100% 正常运行：

*   IE6、7、8、9
*   Mozilla
*   IE9 视窗电话
*   安卓 2.3 浏览器
*   适用于 Windows 的 Safari 5.1

我刚买了一台 Mac（有史以来第一次），当我尝试访问我的网站时，我注意到了一种异常行为。我提供了正确的登录凭据，我被重定向到主页，但 FormsAuthentication 机制重定向回登录页面。

似乎从服务器返回的 Auth cookie 被忽略了。

这不是跨域 cookie 的问题，因为我在同一个 Web 应用程序/域中调用 Web 服务器。

有关如何使 Mac 版 Safari 接受 Ajax Web 服务调用中返回的 cookie 的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:27:37.177

问题可能是 safari 不会使用非 ASCII 字符设置 cookie。尝试对 cookie 值使用 encodeURIComponent() 函数。这是一个有类似问题的链接： [Safari 和 Asp.net 中 cookie 的奇怪问题](https://stackoverflow.com/questions/5327341/strange-problem-with-cookies-in-safari-and-asp-net)

# c# - 这是负责任和防御性的，还是偏执和强迫症？

> ID：11461335
> 
> 赞同：3
> 
> 时间：2012-07-12T21:57:45.897
> 
> 标签：c#

有时在安全和害怕之间只有一线之隔。

这段代码是否越界进入了吓人的区域？

```
DuckbillPlatypusForm dbpf = null;
if (radioButtonUseExistingPlatypus.Checked) {
    dbpf = new DuckbillPlatypusForm(DuckbillSetupUtils.DuckbillPlatypusState.Readonly, funnyMammalIDs);
} else if (radioButtonCreateNewFromExistingPlatypus.Checked) {
    dbpf = new DuckbillPlatypusForm(DuckbillSetupUtils.DuckbillPlatypusState.Template, funnyMammalIDs);
} else if (radioButtonCreateNewPlatypus.Checked) {
    dbpf = new DuckbillPlatypusForm(DuckbillSetupUtils.DuckbillPlatypusState.StartNew, funnyMammalIDs);
}
if (null != dbpf)
{
    dbpf.Show();
} 
```

毕竟单选按钮只有三个，并且在设计时检查了一个，所以 dbpf 永远不能为空，对吧？除非以某种方式在设计时所有单选按钮都未选中，或者我添加了另一个单选按钮而不更新此代码，并且该单选按钮被选中，但是在什么时候我只是“咬紧牙关”并接受类似的风险？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T22:25:00.347

在我看来，检查 null 是件好事，因为将来可能会添加另一个单选按钮。也许来自您团队的另一位开发人员（不是您自己），也许在未来相当长的一段时间内。

如果变量为空，则将其作为异常处理可能会更好，因为这肯定是代码中的错误，应该修复。

**编辑：**

如果你稍微重新排列你的代码，异常的事情就会变得很自然。只需将读数与 GUI 分开即可。

```
function DuckbillSetupUtils.DuckbillPlatypusState StateFromGui()
{
  if (radioButtonUseExistingPlatypus.Checked)
    return DuckbillSetupUtils.DuckbillPlatypusState.Readonly;
  if (radioButtonCreateNewFromExistingPlatypus.Checked)
    return DuckbillSetupUtils.DuckbillPlatypusState.Template;
  if (radioButtonCreateNewPlatypus.Checked)
    return DuckbillSetupUtils.DuckbillPlatypusState.StartNew;
  else
    return DuckbillSetupUtils.DuckbillPlatypusState.Undefined;
}

new DuckbillPlatypusForm(StateFromGui(), funnyMammalIDs); 
```

现在，如果使用 State 调用构造函数`Undefined`，则可以抛出异常。这样，如果您添加另一个单选按钮，您只需更新此`StateFromGui`功能，并且您有一个单点来测试状态。

# javascript - Javascript：检测单色显示

> ID：11461336
> 
> 赞同：2
> 
> 时间：2012-07-12T21:57:48.460
> 
> 标签：javascript, html, android-browser, monochrome

我一直在电子阅读器上测试一个 HTML5 网络应用程序，我得到了它大部分工作，但颜色都搞砸了（它是单色的）。我的应用程序使用大量颜色，每秒更新一次。我也需要它在彩色显示器上运行，所以我需要检测它是否是单色的。

我使用的电子阅读器是索尼制造的，它报告16，这`screen.pixelDepth`与`screen.colorDepth`我支持的大多数其他设备不同（24 和 32 很常见）。

到目前为止，我的想法是：

*   始终向报告 16 位颜色的设备显示单色
*   从用户代理嗅探/`navigator.appVersion`
*   画布上的样本位（尽管我认为这也可能是谎言）

假设 16 位颜色 = 单色是否安全？还是有另一个我可以忽略的更可靠的技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:02:46.863

在计算中，“单色”通常是 2 位，16 位显示器通常称为灰度（尽管它可能是其他颜色的阴影）。

考虑使用调色板，将颜色转换为适当的 16 位值，而不是设备嗅探。您可以从[网络安全调色板](http://en.wikipedia.org/wiki/Web_colors)开始。

或者，如果用户认为这样看起来会更好，可以为他们提供“使用灰度”选项——您可能会发现其他用户也选择了该选项。如果您的颜色都是基于类的，您可以替换当前样式表或添加具有适当重新分配颜色的新样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T06:38:29.933

我不熟悉如何检测灰度屏幕，但我希望一些色盲用户解决方案可以为您提供帮助。

问题是您需要使用颜色来传递信息，但屏幕（或色盲人的眼睛）会从颜色中删除一些信息，因此用户会感到困惑。解决方法是确保颜色传递的信息不受屏幕或眼睛的影响，也可以使用其他媒体而不是颜色。

1.  色盲或灰度屏幕不会删除颜色中的所有信息。例如，如果颜色被描述为 HSL（色相/饱和度/亮度），则灰度屏幕会移除色相和饱和度，但会保留亮色。如果您使用 5 种不同的颜色，只要它们具有 5 个不同的 Light 值（例如 0.1、0.3、0.5、0.7、0.9），用户在灰度屏幕中识别它们就不会出现问题。

2.  您还可以使用其他媒体来传输通过颜色传输的信息。例如，Mac 版 Adium 使用形状和颜色来指示联系人状态。在线用户是绿色矩形，离开是黄色三角形，忙碌是红色圆圈。这是色盲友好的，因为用户可以通过识别形状来了解联系人状态。

# facebook-graph-api - FQL 不会返回通过 Facebook 相机应用上传的移动照片组

> ID：11461337
> 
> 赞同：0
> 
> 时间：2012-07-12T21:57:48.597
> 
> 标签：facebook-graph-api, mobile, upload, camera, facebook-fql

从用户的 Mobile Uploads 相册返回照片的 FQL 查询似乎不会返回用户上传的所有照片。来自 Facebook 相机应用程序的任何照片组（一次上传超过 1 张照片时）都是这种情况。这些照片被分组到它们自己的数据实体中，当我通过 FQL 从 Mobile Uploads 查询所有照片时，它们不会返回。但是，如果我通过 Graph Api 执行相同的查询，则所有这些照片都会返回，因此 Graph Api 返回照片数据的方式与 FQL 返回照片数据的方式之间似乎存在不一致。Graph Api 似乎返回了一组更全面的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:53:41.180

我发现，如果您上传多张照片，它们会被归类为状态更新，并且您需要用户的“user_status”权限才能通过 API 访问它们，即使它们在移动上传相册中（那里的任何其他照片）只有 user_photos 权限才能访问）

# windows - 推送到 Windows Azure 后出现错误：您无权查看此目录或页面

> ID：11461338
> 
> 赞同：31
> 
> 时间：2012-07-12T21:57:48.723
> 
> 标签：windows, node.js, azure

在过去的 3 个小时里，我在谷歌上搜索，并没有发现关于 windows azure 问题的处理方法：

> 您无权查看此目录或页面。

我做了一个 git master push to azure 并且部署成功了。我还打开了失败的请求跟踪，但除了上面的语句什么都没有显示。

有关如何解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-12T23:11:22.283

我刚刚测试过，如果您不将主 node.js 文件部署为 server.js，您将收到此错误，因为 web.config 专门寻找 server.js，如下所示：

```
 <handlers>
       <add name="iisnode" path="server.js" verb="*" modules="iisnode"/>
 </handlers> 
```

[要进一步解决此问题，您可以按照此处](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/19/windows-azure-website-uploading-downloading-files-over-ftp-and-collecting-diagnostics-logs.aspx)所述通过 FTP 访问网站。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-05T19:27:49.190

AvkashChauhan 的回答确实使我朝着正确的方向前进，但我还必须添加适当的重写规则。这是我完整的 web.config

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation batch="false" />
  </system.web>
  <system.webServer>
    <handlers>
      <add name="iisnode" path="server.js" verb="*" modules="iisnode" />
    </handlers>
    <rewrite>
      <rules>
        <rule name="myapp">
          <match url="/*" />
          <action type="Rewrite" url="server.js" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-01T16:13:48.417

我也遇到了这个错误。我正在使用 MVC，错误的原因是在我的布局页面上，我调用了匿名用户无法访问的操作：

```
@Html.Action("GetMenu", "Users") 
```

有关信息，我`AuthorizeAttribute()`在 Application_Start 中注册了一个全局过滤器，并且我的`Login`操作用以下内容装饰`AllowAnonymous`：

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Login(LoginModel model, string returnUrl)
    { 
```

我的网站以前在 IIS7 上运行过，但 Azure 不那么宽容。我通过添加这样的检查解决了这个问题：

```
@if (User.Identity.IsAuthenticated)
{
     @Html.Action("GetMenu", "Users")
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-07T22:23:19.100

自这个问题以来，天蓝色工具发生了很大变化。

我建议人们使用[azure-cli](https://azure.microsoft.com/da-dk/documentation/articles/xplat-cli-install/ "天蓝色的cli")。但有趣的是，在我使用它一次创建站点后，我实际上并没有使用它。

我现在使用的只是将 (git) 直接推送到名为 azure 的遥控器的能力，而 cli 正在为您设置它。

但是，如果您不想安装 cli，您基本上可以手动添加远程仓库（您的站点），如下所示：

`git remote add azure https://<site-or-appservice-name>.scm.azurewebsites.net/<site-or-appservice-name>.git`

就像使用其他所有 git 遥控器一样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-10T06:21:18.710

不特定于 node.js，但会更新以帮助其他人在常规 Web 应用程序中遇到此问题。如果 index.html 文件不存在或因为它位于子目录中而未找到，也会发生这种情况

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-29T03:00:35.353

我刚刚遇到了这个问题，就我而言，是导致问题的 ipSecurity 配置。只需 hd 将 allowUnlisted 更改为 true。

```
 <security>
   <ipSecurity allowUnlisted="false"> 
 </security> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-08T18:53:44.223

您需要将`server.js`文件移动到根应用程序文件夹。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-11T14:12:03.153

`git push`在来自本地存储库之后，我收到了相同的错误消息。

通过打开 Azure 仪表板解决了这个问题：

**Web 应用/应用部署/部署源**

并选择**本地 git 存储库**作为部署源

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-15T19:06:51.810

简单配置，在 azure 门户中转到您的 web 应用程序 -> 所有设置 -> 应用程序设置，在默认文档下添加您要查看的文档的特定名称，等待它更新，然后刷新您的 azure 链接。

# javascript - jQuery 准备在自定义行为脚本初始化之前触发

> ID：11461345
> 
> 赞同：1
> 
> 时间：2012-07-12T21:58:34.107
> 
> 标签：javascript, jquery, internet-explorer, javascript-events, html-components

### 背景

我继承了一个古老的 Web 应用程序，该应用程序具有使用老式 HTC（HTML 组件）脚本定义的自定义行为的输入控件，例如：

```
<input name="txtFiscalYearEndDay" type="text" value="30" 
    maxlength="2" size="5" id="txtFiscalYearEndDay" class="Text1"       
    style="behavior:url(/path/js/InFocus.htc);" /> 
```

以下是此 HTC 文件的相关部分来说明问题：

```
<PUBLIC:COMPONENT tagName="InFocus">
<PUBLIC:METHOD NAME="setValid" />
<PUBLIC:ATTACH EVENT="ondocumentready" HANDLER="initialize" />
<SCRIPT LANGUAGE="javascript">

    function initialize() {
        // attaches events and adds CSS classes, nothing fancy
    }        

    function setValid(bInternal) {
        // checks some flags and changes a label
    } 

</SCRIPT>
</PUBLIC:COMPONENT> 
```

所以，到目前为止，没有什么不寻常的。此外，我有一些 JS 可以在 DOM-ready 上运行：

```
$(function() {
    txtFiscalYearEndDay_Validate(document.getElementById('txtFiscalYearEndDay'));
}); 
```

和验证功能：

```
function txtFiscalYearEndDay_Validate(el) {
    ...
} 
```

注意：我没有使用`$('#txtFiscalYearEndDay')`，因为那时我*真的*不能尝试调用`setValid(true);`元素，也不想必须做`$('#txtFiscalYearEndDay')[0].setValid(true);`.

### 问题

在验证函数中，我尝试调用元素上的一个方法，该方法由 HTC 脚本添加：

```
el.setValid(true); 
```

但是，IE 调试器会感到难过并抱怨这`setValid()`不是一个函数。在调试器中检查它证实了这一点：

```
typeof el.setValid // "unknown" 
```

当然，一旦页面完成渲染（或者文档*实际*准备就绪所需的任何时间段），验证功能就会按预期工作（因为我在 change 和 blur 事件上调用相同的验证函数出色地）。也就是说，当在 jQuery 的 on-DOM-ready 函数之外调用该函数时，它工作得很好。

**你们中有人对这里可能发生的事情有任何想法吗？jQuery 的“ondomready”是否在 HTC 脚本的“ondomready”之前注册？我可以以某种方式更改该顺序吗？**

我目前在所有版本的 IE 中都看到了这种行为。

**编辑：解决方法**

我发现了一个解决方法。如果您将函数调用从 jQuery 就绪函数中取出并将其扔到页面末尾，它就可以工作（即：）

```
...
    <script type="text/javascript">
        txtFiscalYearEndDay_Validate(document.getElementById('txtFiscalYearEndDay'));
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:06:36.880

我不知道 HTC 是否计入页面就绪，但我怀疑他们没有。

您可能会尝试在 HTC hase 完成后检查仅是 tru 的内容。

然后，您自己的脚本应该像这样开始：

```
function MyFunction() {

 if(!HTCIsreadyTest()) {
    setTimeout(MyFunction, 100);
return;
}

//the rest of your code

} 
```

如果在测试成功之前不满足条件，这基本上可以让您在 100 毫秒内进行功能检查和重新启动。

如果 HTC sciprts 在 2 秒后未加载，您还可以添加一个计数器参数，每次尝试触发一些超时代码时将其增加一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:02:27.973

我能找到的最简单的解决方法是将验证函数调用移出 jQuery`ready()`回调并将其移至页面末尾：

```
...
    <script type="text/javascript">
        txtFiscalYearEndDay_Validate(document.getElementById('txtFiscalYearEndDay'));
    </script>
</body>
</html> 
```

但是，我找到了一个更优雅的解决方案。因为我似乎需要等待所有页面资源被加载，所以我只需要将函数调用移出 jQuery`ready()`回调，而是将其放在窗口`load()`回调中：

```
$(window).load(function() { // instead of $(function() {
    txtFiscalYearEndDay_Validate(document.getElementById('txtFiscalYearEndDay'));
}); 
```

我正在使用后者，所以我可以将所有 JS 代码放在一起。

# python - issubclass() 在从不同路径导入的同一类上返回 False

> ID：11461356
> 
> 赞同：11
> 
> 时间：2012-07-12T21:59:17.413
> 
> 标签：python, class

目的是实现某种插件框架，其中插件是同一基类（即 A）的子类（即 B）。基类使用标准导入加载，而子类使用 imp.load_module() 从知名包（即 pkg）的路径加载。

```
pkg/
    __init__.py
    mod1.py
        class A
    mod2.py
        class B(pkg.mod1.A) 
```

这适用于*真正的*子类，即

```
# test_1.py
import pkg
from pkg import mod1
import imp
tup = imp.find_module('mod2', pkg.__path__)
mod2 = imp.load_module('mod2', tup[0], tup[1], tup[2])
print(issubclass(mod2.B, mod1.A)) # True 
```

但是在测试基类本身的时候问题就来了，

```
# test_2.py
import pkg
from pkg import mod1
import imp
tup = imp.find_module('mod1', pkg.__path__)
mod0 = imp.load_module('mod1', tup[0], tup[1], tup[2])
print(issubclass(mod0.A, mod1.A)) # False 
```

但是 mod0.A 和 mod1.A 实际上是来自同一个文件 (pkg/mod1.py) 的同一个类。

这个问题出现在 python 2.7 和 3.2 中。

现在问题有两个方面，a) 它是预期的特性还是 issubclass() 的错误，以及 b) 如何在不改变 pkg 内容的情况下摆脱这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T22:20:35.857

他们*不是*同一个班级。它们是使用相同的代码创建的，但是由于您执行了两次该代码（一次在 import 中，一次在 load_module 中），您得到了两个不同的类对象。`issubclass`正在比较类对象的身份，它们是不同的。

编辑：由于您不能依赖`issubclass`，因此一种可能的替代方法是在基类上创建一个唯一属性，该属性将由派生类继承。该属性也将存在于类的副本中。然后，您可以测试该属性。

```
class A:
    isA = True

class B(A):
    pass

class C:
    pass

def isA(aclass):
    try:
        return aclass.isA
    except AttributeError:
        return False

print isA(A)
True
print isA(B)
True
print isA(C)
False 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-12T17:58:33.117

由于我花了一些时间摆弄这个，我想我会分享我的解决方案：

```
import inspect

...

def inherits_from(child, parent_name):
    if inspect.isclass(child):
        if parent_name in [c.__name__ for c in inspect.getmro(child)[1:]]:
            return True
    return False

print inherits_from(possible_child_class, 'parent_class')
#True 
```

当然，这只真正检查子类是否继承自类**CALLED** `parent_class`，但出于我的目的（我怀疑是大多数），这很好。

注意：如果`possible_child_class`是 parent_class 的实例，则返回 false，因为`[1:]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T11:54:02.820

```
#!/usr/bin/env python

import os
import sys
import pkg
from pkg import mod1
import imp

def smart_load_module(name, path):
    # get full module path
    full_path = os.path.abspath(os.path.join(path[0], name))

    for module_name, module in sys.modules.items():
        # skip empty modules and ones without actual file
        if not module or not hasattr(module, '__file__'):
            continue

        # remove extension and normalize path
        module_path = os.path.abspath(os.path.splitext(module.__file__)[0])
        if full_path == module_path:
            return module

    # if not found, load standard way
    tup = imp.find_module(name, path)
    return imp.load_module(name, tup[0], tup[1], tup[2])

if __name__ == '__main__':
    mod00 = smart_load_module('mod1', pkg.__path__)
    print(issubclass(mod00.A, mod1.A))  # True

    tup = imp.find_module('mod1', pkg.__path__)
    mod0 = imp.load_module('mod1', tup[0], tup[1], tup[2])
    print(issubclass(mod0.A, mod1.A))  # False 
```

这对我有用。我通过 sys.modules 中的完整路径搜索类，如果找到，则返回加载的实例。

# sql-server-2008 - 寻找 T-SQL 子查询的替代方案

> ID：11461358
> 
> 赞同：0
> 
> 时间：2012-07-12T21:59:38.663
> 
> 标签：sql-server-2008, tsql, subquery, correlated-subquery

```
Account
=======
int AccountId PK

Order
=====
int OrderId PK
int AccountId FK
DateTime Date
int Status 
```

对于每个帐户，我想知道状态为 1（成功）的最新订单，否则是状态为 0（不成功）的最新订单。日期不是唯一的。

我已经在这样的视图中使用相关的子查询来处理这个......

```
SELECT
    a.AccountId,
    (SELECT TOP 1
            o.orderId
        FROM
            tbl_order o
        WHERE
            o.Accountid = a.AccountId
            AND
            o.Status IN (0, 1)
        ORDER BY
            o.Status DESC, o.Date DESC  
        ) AS OrderId
FROM
    tbl_account a 
```

...但它很慢。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:06:00.583

您可以使用具有以下`ROW_NUMBER`功能的 CTE：

```
WITH cte AS(
    SELECT  a.AccountId, o.OrderId, o.Date, o.Status
    , RN = ROW_NUMBER()OVER(Partition By a.AccountId ORDER BY o.Status DESC, o.Date DESC) 
    FROM Account a 
    LEFT OUTER JOIN [Order] o  ON a.AccountId = o.AccountId
)
SELECT AccountId, OrderId
FROM cte
WHERE RN = 1 
```

这是一个小提琴：[http ://sqlfiddle.com/#!3/4e1e3/4/0](http://sqlfiddle.com/#!3/4e1e3/4/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:03:20.990

尝试这个：

```
SELECT
    a.AccountId,
        o.OrderId
FROM
    tbl_account a OUTER APPLY 
        (
            SELECT TOP 1 o.orderId
        FROM tbl_order o
       WHERE o.Accountid = a.AccountId
         AND o.Status IN (0, 1)
        ORDER BY o.Status DESC, o.Date DESC  
     ) AS o 
```

# java - ComboBox.setModel 将数组作为单个项目插入

> ID：11461360
> 
> 赞同：0
> 
> 时间：2012-07-12T21:59:44.993
> 
> 标签：java, jcombobox

我有一个 GUI 设置了三个组合框，其中从组合框 1（comboRole）中的选择应该填充组合框 2（comboClass）等等。我已经得到了第二个组合框来填充，但是数组中的所有项目都被视为一个项目，因此只有数组中的顶级项目是可选的。我有一种感觉，这与我实施 . 的方式有关`.setModel`，但我不确定我哪里出错了。

```
public void actionPerformed(ActionEvent a)
    {
        String selectedRole = (String) comboRole.getSelectedItem();
        if ("Tank".equals(selectedRole)){
            comboClass.removeAllItems(); //cleans out any data currently in comboClass
            comboClass.setModel(new DefaultComboBoxModel(TankClass)); //populating only top level item 
            //entire array is being treated as a single item.
        }
        else if ("Healer".equals(selectedRole)){
            comboClass.removeAllItems();
            comboClass.setModel(new DefaultComboBoxModel(HealerClass));
        } 
        else if ("Caster".equals(selectedRole)){
            comboClass.removeAllItems();
            comboClass.setModel(new DefaultComboBoxModel(CasterClass));
        }
        else if ("Damage".equals(selectedRole)){
            comboClass.removeAllItems();
            comboClass.setModel(new DefaultComboBoxModel(DpsClass));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:27:29.320

问题在于，每次分割任何组合框时都会运行一个 ActionListener，从而在组合框中创建多个数组实例。解决方案是为每个 Combobox 使用 ItemListener，以便它仅在该框选择了一个项目后添加所需的数组。同样，当使用 ItemListener 时，`comboClass.removeAllItems`需要在更改选择时清理数组，否则仅更改模型往往会导致先前的数组堆叠在新数组的顶部。

```
 ItemListener roleListener = new ItemListener()
    {
        @Override
        public void itemStateChanged(ItemEvent e)                    
           {

               String selectedRole = (String) comboRole.getSelectedItem();

                if (e.getStateChange() == ItemEvent.SELECTED)
                        {
                            if ("Tank".equals(selectedRole))
                            {
                                comboClass.removeAllItems(); // removes previous selection from combobox
                                comboClass.setModel(new DefaultComboBoxModel(TankClass)); //populates comboClass with Selection

                            }
                            else if ("Healer".equals(selectedRole))
                            {
                                comboClass.removeAllItems();
                                comboClass.setModel(new DefaultComboBoxModel(HealerClass));
                            } 
                            else if ("Caster".equals(selectedRole))
                            {                
                                comboClass.removeAllItems();
                                comboClass.setModel(new DefaultComboBoxModel(CasterClass));
                            }
                            else if ("Damage".equals(selectedRole))
                            {                
                                comboClass.removeAllItems();
                                comboClass.setModel(new DefaultComboBoxModel(DpsClass));
                            }

                        }
           }

    }; 
```

# java - SAXTransform 链中的第二个 XSLT 似乎没有做任何事情

> ID：11461362
> 
> 赞同：0
> 
> 时间：2012-07-12T21:59:51.460
> 
> 标签：java, xslt, sax

在我进入具体细节之前，我之前使用 Oracle 的`parser.v2`XSLT 库尝试过这个并遇到了同样的问题（请参阅[我的第一个问题](https://stackoverflow.com/q/11349774/213901)）。但是，当我使用 C# 时它工作正常。

```
// from the example I see everywhere on the internet
SAXTransformerFactory stf = (SAXTransformerFactory)TransformerFactory.newInstance();

Templates t_cctagstrip = stf.newTemplates(new StreamSource(new FileInputStream("C:\\path\\to\\first.xsl")));
Templates t_cctable = stf.newTemplates(new StreamSource(new FileInputStream("C:\\path\\to\\second.xsl")));

TransformerHandler th1 = stf.newTransformerHandler(t_cctagstrip);
TransformerHandler th2 = stf.newTransformerHandler(t_cctable);

// transform 1 pipes into transform 2
th1.setResult(new SAXResult(th2));

// transform 2 pipes to System.out
th2.setResult(new StreamResult(System.out));

Transformer t = stf.newTransformer();
t.transform(new StreamSource(new FileInputStream("C:\\path\\to\\source.xml")), new SAXResult(th1)); 
```

我在想，问题可能在于第一个转换的输出是根级别的文本片段？

```
text at root level
<tag> ... tags that need extra processing ... </tag>
more text at root level 
```

C# 处理转换的方式有什么不同吗？它没有失败或给我任何我可以告诉的警告。它只是没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:53:00.667

您在第一个问题中没有提到您遇到的实际问题，例如，提供任何日志消息等，因此不可能知道您的 XSLT 转换失败的原因。但是在第二个问题中，您清楚地揭示了为什么事情失败了。

通常，XSLT 转换要求所有解析的内容*至少*是格式良好的 XML。如果您的源文档没有用“根”元素（实际上称为*文档元素*）包装，那么它不是格式良好的 XML，因此不是定义为 XML，因此不适合 XML 处理。

作为一种解决方案，如果您可以将第一个转换的输出包装在一个文档元素中，那么您可以继续将其解析为 XML。然后，您可以稍后通过非 XML 进程将其剥离。

在这方面，Java 或 C# 之间没有任何区别。如果第一次转换的输出不是格式良好的 XML，那么 C# 不应该接受它作为 XML。我无法解释它为什么会这样做——如果 C# 的 XML 处理器接受格式不正确的 XML，它就会不兼容。我想你没有得到任何输出的原因是转换只是由于非 XML 源而失败。为了找出实际发生的情况，您可以`javax.xml.transform.ErrorListener`在 Transformer 上设置一个，然后在 ErrorListener 中将所有内容转储到日志中。

（作为一个切线，您还声明您需要使用 Oracle 的 XSL 处理器。*真的吗？*我假设 Oracle 的实现中必须有一些 Xalan 或 Saxon 中不可用的功能，就像您一样将代码绑定到实现而不是使用 JAXP API，这当然不是推荐的做法。在对 API 编码时调试问题可能会更好，以确保它们不依赖于实现，因为您无法更改实现的内部代码，最好只调试您自己的缺陷，而不是 Oracle 的。但鉴于您上面的示例代码似乎使用 JAXP API，我假设您遇到的问题实际上与 Oracle 的 XSLProcessor 无关.)

# php - PHP：通过现有的 SSH 连接进行 SSH

> ID：11461365
> 
> 赞同：2
> 
> 时间：2012-07-12T22:00:04.293
> 
> 标签：php, ssh

我正在寻找通过现有 SSH 连接的 SSH 解决方案并使用 PHP 执行命令。我已经用一个简单的命令完成了这个工作。例子：

```
$result = shell_exec("ssh user@server1 ssh user@server2 ls"); 
```

这在通过 CLI 而不是 CGI 运行时有效。我已经使用 PHPSecLib 进行了一些工作，但是一旦我与 server1 建立了连接，我就无法弄清楚如何打开第二个连接。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:26:16.367

通过 CGI 运行时，您的 PHP 脚本可能以 Web 服务器用户身份运行，并且该用户无权访问您的 SSH 密钥。要么给 web 服务器用户你的 SSH 密钥，要么安排 PHP 脚本以你的用户身份运行，例如使用[suPHP](http://www.suphp.org/Home.html)。

并确保保护您的应用程序，以免您的密钥被盗:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:58:52.793

$ssh->exec('ssh user@server2 ls') 呢？

# css - CSS 工具提示问题 - 像框和主体一样隐藏在 Facebook 后面的 Span

> ID：11461368
> 
> 赞同：0
> 
> 时间：2012-07-12T22:00:13.560
> 
> 标签：css, z-index, tooltip

我正在使用基于纯 CSS 的工具提示，但有显示问题。跨度框隐藏在右侧边栏中的 main boday 和 facebook like box 后面。下面是相同的屏幕截图。

![工具提示](../Images/9233ed6036c77e2d3b9d6f2b7812d4cb.png)

**这是工具提示 CSS。**

```
a.tooltip
{
    position: relative;
    display: inline-block;
}

a.tooltip span {
    position: absolute;
    width: 300px;
    padding: 8px;
    left: 50%;
    font-size: 13px;
    line-height: 16px;
    margin-left: -160px;
    text-align: justify;
    visibility: hidden;
    bottom: 40px; /** Use 30px for simple fade in effect - Removes slide down effect **/

    opacity: 0;

    -webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    border-radius: 6px;

    -webkit-transition: all 0.2s ease-in-out;
    -moz-transition: all 0.2s ease-in-out;
    -o-transition: all 0.2s ease-in-out;
    -ms-transition: all 0.2s ease-in-out;
    transition: all 0.2s ease-in-out;
}

/** CSS Down Arrow **/      
a.tooltip span:after {
    content: '';
    position: absolute;
    bottom: -14px;
    left: 50%;
    margin-left: -9px;
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
}

a:hover.tooltip span {
    opacity: 1;
    visibility: visible;
    bottom: 30px;
    z-index: 100;
}

a.imgleft {
    float: left;
    margin: 0 15px 10px 0;
}

a.imgright {
    float: right;
    margin: 0 0 10px 15px;
}

a.imgleft span, a.imgright span {
    bottom: 140px;
}

a:hover.imgleft span, a:hover.imgright span {
    bottom: 130px;
}

/** Span Color **/
a.ttblue {
    color: #E45742;
}

a.ttblue span {
    background: #E45742;
    border: 4px solid #E45742;
    color: #FFF;
}

a.ttblue span:after {
    border-top: 10px solid #E45742;
} 
```

**任何帮助将不胜感激！谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:14:47.240

我相信我们必须看到更多您的网页 html 才能为您提供帮助。

但是，我能想象的唯一问题是`.tooltip`处于与右侧边栏不同的堆叠上下文中。

是否有任何`.tooltip's`父母/祖父母设置了一个`z-index`或一个`opacity`级别？它可能是一个不透明度级别。如果是，则在其上设置一个正 z-index（或者如果侧边栏也有一个`z-index`，则高于`sidebar`'s）。

# java - 在空格和破折号上拆分字符串，但不在字符串的值上

> ID：11461369
> 
> 赞同：0
> 
> 时间：2012-07-12T22:00:16.843
> 
> 标签：java, android, string, split

我正在设置这样的 date_string：

```
gridcell.setTag(theday + "-" + themonth + "-" + theyear + "|" + hijri_day + "-" + hijri_month + " ("+ hijri_monthno +") " + hijri_year); 
```

我像这样拆分它：

```
String date_month_year = (String) view.getTag();
String[] dateAr = date_month_year.split("-|\\||\\(|\\)|\\s+"); 
```

这也分割了回历月份名称中的空格和破折号，即 Rabi al-Thani 或 Dhul Hijjah：

```
private String months[] = {"Muharram","Safar","Rabi al-Awwal","Rabi al-Thani","Jumada al-Awwal","Jumada al-Thani","Rajab","Sha\'ban","Ramadhan","Shawwal","Dhul Qa\'dah","Dhul Hijjah"}; 
```

如何仅拆分 date_string 而不是 date_string 中字符串的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:06:26.020

最好的方法是将日期分隔符更改为 /（斜杠）或 .（点）如果你真的想保持这样，那么在拆分之后，你可以检查字符串数组上的最后一个字符，如果它是一个字母，则将两个字符串合并为一个。 .

```
gridcell.setTag(theday + "." + themonth + "." + theyear + "|" + hijri_day + " " + hijri_month + " ("+ hijri_monthno +") " + hijri_year); 
```

让它像这样最简单的方法..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:32:28.583

我试图逐步拆分您的日期，因此请检查这是否适合您

```
List<String> tokens=new ArrayList<String>();

String data="theday-themonth-theyear|hijri_day-Dhul Qa\'dah (hijri_monthno) hijri_year";
String[] tmp = data.split("\\|");
//System.out.println(Arrays.toString(tmp));

for (String s:tmp[0].split("-"))
    tokens.add(s);

System.out.println(tokens);// -> [theday, themonth, theyear]

String[] tmp2=tmp[1].split("\\s*\\(|\\)\\s*");
//System.out.println(Arrays.toString(tmp2));

for (String s:tmp2[0].split("-",2))
    tokens.add(s);
System.out.println(tokens);// -> [theday, themonth, theyear, hijri_day, Dhul Qa'dah]

tokens.add(tmp2[1]);
tokens.add(tmp2[2]);
System.out.println(tokens);// -> [theday, themonth, theyear, hijri_day, Dhul Qa'dah, hijri_monthno, hijri_year] 
```

# iphone - 以编程方式连接两个 UIButton

> ID：11461371
> 
> 赞同：0
> 
> 时间：2012-07-12T22:00:23.827
> 
> 标签：iphone, uibutton

以编程方式将 rewindButton 与 playButton 连接起来。rewindButton 只是从头开始倒带和播放，playButton 从播放切换到暂停。在 rewindButton 方法中使用语句来更改 UIButton2 的 UIImage 时按下 UIButton1。那工作正常。

按下并暂停播放按钮时，PlayButton 方法工作正常。即使在恢复后也可以正常工作。

问题简报：

当按下 rewindButton 时，它会将 playButton 的 UIImage 更改为 PauseImage，以便用户可以暂停。恢复暂停时出现问题。`When pause is resumed it is reloading view controllers.`它应该只根据代码第一次加载视图控制器。

```
-(void)rewind:(id)sender{
audioPlayer.currentTime = 0;
[timer invalidate];
ContainerViewController *viewController = [[[ContainerViewController alloc] init]autorelease];
viewController.view.frame = CGRectMake(0, 0, 320, 480);
[self.view addSubview:viewController.view]; 
[self.view addSubview:toolbar];
[audioPlayer play];
self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                    target:self
                                    selector:@selector(displayviewsAction:)
                                    userInfo:nil
                                    repeats:NO];
    [_playButton setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];   
 }

-(void)playpauseAction:(id)sender {

if([audioPlayer isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
    [audioPlayer pause];
    [self pauseTimer];
    [self pauseLayer:self.view.layer];

}else{
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
    [self resumeLayer:self.view.layer];

   if(isFirstTime == YES)
    {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                            target:self
                                            selector:@selector(displayviewsAction:)
                                            userInfo:nil
                                            repeats:NO];
        isFirstTime  = NO;
    } 
    } 
    }

- (void)displayviewsAction:(id)sender
{  

 First *first = [[First alloc] init];
 first.view.frame = CGRectMake(0, 0, 320, 425);
 CATransition *transitionAnimation = [CATransition animation];   
 [transitionAnimation setDuration:1];
 [transitionAnimation setType:kCATransitionFade];    
 [transitionAnimation setTimingFunction:[CAMediaTimingFunction     functionWithName:kCAMediaTimingFunctionEaseIn]];    
 [self.view.layer addAnimation:transitionAnimation forKey:kCATransitionFade];   
   [self.view addSubview:first.view];
 [first release];   
 self.timer = [NSTimer scheduledTimerWithTimeInterval:23 target:self selector:@selector(Second) userInfo:nil repeats:NO];     
 }

-(void)Second 
{
Second *second = [[Second alloc] init];
second.view.frame = CGRectMake(0, 0, 320, 425);
CATransition *transitionAnimation = [CATransition animation];
[transitionAnimation setDuration:1]; 
[transitionAnimation setType:kCATransitionReveal];
[transitionAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];
[self.view.layer addAnimation:transitionAnimation forKey:kCATransitionReveal];
[self.view addSubview:second.view]; 
[second release];
self.timer = [NSTimer scheduledTimerWithTimeInterval:27 target:self selector:@selector(Third) userInfo:nil repeats:NO];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:00:33.063

在 rewind 方法中恢复原因后重新加载视图控制器的原因我忘记添加 isFirstTime == YES 来加载视图控制器。视图控制器不需要重新加载。视图控制器仅在第一次时才需要从头开始加载。

因此，在 rewind 方法中设置 isFirstTime == YES 的值后，它不会在从暂停中恢复后从头开始重新加载视图控制器。

```
-(void)rewind:(id)sender{
audioPlayer.currentTime = 0;
[timer invalidate];
ContainerViewController *viewController = [[[ContainerViewController alloc] init]autorelease];
viewController.view.frame = CGRectMake(0, 0, 320, 480);
[self.view addSubview:viewController.view]; 
[self.view addSubview:toolbar];
[audioPlayer play];
if(isFirstTime == YES){
self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                target:self
                                selector:@selector(displayviewsAction:)
                                userInfo:nil
                                repeats:NO];
 isFirstTime  = NO;
}

[_playButton setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];   
 } 
```

现在它工作正常。

# java - 如何使用 Java 从 XSD 加载 XML 标记顺序？

> ID：11461374
> 
> 赞同：3
> 
> 时间：2012-07-12T22:00:50.987
> 
> 标签：java, xml, xsd

我有个问题：

一、**问题**

有没有**一种方法/基于 Java 的库，我可以通过读取/加载其 XSD（提前）来检索 XML 元素的顺序？**

**二、背景**

我正在开发的应用程序应该生成各种类型的 XML（提要），每种都基于给定的模式 (XSD)。

关键是我**不能使用标准的序列化方法 - JAXB**，因为我应该通过 Apache Abdera 逐渐生成/流式传输 XML。因此，我应该将我的 Java 域对象“序列化”为 XML（提要），根据其中的信息为不同的标签创建值，并按照 XSD 定义的顺序将这些标签一一写入输出流。

**三、所需的功能**

目前，我有一个序列化程序，它以上述方式将我的域对象转换为 xml，但很快它将需要支持多种类型的模式，而且它不容易维护（更不用说它会是非常容易出错）。

**四。潜在的解决方案**

因此，我想制作与**XML 模式无关的序列化**程序，并将创建不同 xml 元素的值的工作委托给一些专门的构建器或工厂。但是，它们应该被调用的顺序应该由模式中 xml 元素的顺序来定义。

这是我开始的问题：

有没有**一种方法/基于 Java 的库，我可以通过读取/加载其 XSD（提前）来检索 XML 元素的顺序？**

**五、如果有这样的图书馆……**

从示意图上看，序列化程序需要做的是：

1.  按照在 XSD 中定义的顺序加载 xml 元素（标签）的类型（当然还有它们的限制）
2.  按照加载的顺序遍历 xml 元素的加载类型，并
3.  对于识别的每个 xml 元素类型，将相应元素的构建内容委托给关联的构建器或工厂。
4.  具有由构建器/工厂构建的值，序列化程序只需将其与元素的标签一起包装并将其刷新到输出流中。

提前致谢！

# c# - 使用 XmlNode 获取当前节点的 InnerText

> ID：11461376
> 
> 赞同：4
> 
> 时间：2012-07-12T22:01:10.237
> 
> 标签：c#, .net, xml

我有一个 XMLNode，其主体如下所示：（通过 OpenCalais）

```
 <SocialTag importance="2">Signal processing
<originalValue>Signal processing</originalValue>
</SocialTag> 
```

当我调用`XMLMNode.InnerText`它时，我回来了：

```
SignalprocessingSignalprocessing 
```

但是，我只想要标签本身的 InnerText，而不是子“原始值”节点的 InnerText。

当我调用时`XMLNode.Value`，它返回 null。

如何在不连接其他子节点的所有 InnerText 的情况下仅获取该节点的 InnerText？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T22:16:48.050

[XmlNode](http://msdn.microsoft.com/en-us/library/bxz4hfh3)中的文本实际上是另一个文本类型的[XmlNode](http://msdn.microsoft.com/en-us/library/bxz4hfh3)。这应该有效：

```
socialTagNode.ChildNodes[0].Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-15T22:18:19.870

从[文档](https://msdn.microsoft.com/en-us/library/system.xml.xmlelement.innertext(v=vs.110).aspx)中，`XmlElement.InnerText`

> 获取或设置节点及其所有子节点的串联值。

虽然这个陈述并不完全清楚，但它暗示该属性下降到元素下的 DOM 层次结构，并将所有文本值连接到返回值中——您所看到的行为。

扩展接受的答案，这里是从[参考源](http://referencesource.microsoft.com/#System.Xml/System/Xml/Dom/XmlNode.cs,66df5d2e6b0bf5ae,references)改编的扩展方法，收集并返回给定节点的所有*直接*文本子节点：

```
public static partial class XmlNodeExtensions
{
    /// <summary>
    /// Returns all immediate text values of the given node, concatenated into a string
    /// </summary>
    /// <param name="node"></param>
    /// <returns></returns>
    public static string SelfInnerText(this XmlNode node)
    {
        // Adapted from http://referencesource.microsoft.com/#System.Xml/System/Xml/Dom/XmlNode.cs,66df5d2e6b0bf5ae,references
        if (node == null)
            return null;
        else if (node is XmlProcessingInstruction || node is XmlDeclaration || node is XmlCharacterData)
        {
            // These are overridden in the reference source.
            return node.InnerText;
        }
        else
        {
            var firstChild = node.FirstChild;
            if (firstChild == null)
                return string.Empty;
            else if (firstChild.IsNonCommentText() && firstChild.NextSibling == null)
                return firstChild.InnerText; // Optimization.
            var builder = new StringBuilder();
            for (var child = firstChild; child != null; child = child.NextSibling)
            {
                if (child.IsNonCommentText())
                    builder.Append(child.InnerText);
            }
            return builder.ToString();
        }
    }

    /// <summary>
    /// Enumerates all immediate text values of the given node.
    /// </summary>
    /// <param name="node"></param>
    /// <returns></returns>
    public static IEnumerable<string> SelfInnerTexts(this XmlNode node)
    {
        // Adapted from http://referencesource.microsoft.com/#System.Xml/System/Xml/Dom/XmlNode.cs,66df5d2e6b0bf5ae,references
        if (node == null)
            yield break;
        else if (node is XmlProcessingInstruction || node is XmlDeclaration || node is XmlCharacterData)
        {
            // These are overridden in the reference source.
            yield return node.InnerText;
        }
        else
        {
            var firstChild = node.FirstChild;
            for (var child = firstChild; child != null; child = child.NextSibling)
            {
                if (child.IsNonCommentText())
                    yield return child.InnerText;
            }
        }
    }

    public static bool IsNonCommentText(this XmlNode node)
    {
        return node != null &&
            (node.NodeType == XmlNodeType.Text || node.NodeType == XmlNodeType.CDATA
            || node.NodeType == XmlNodeType.Whitespace || node.NodeType == XmlNodeType.SignificantWhitespace);
    }
} 
```

然后像这样使用它：

```
var value = XMLMNode.SelfInnerText(); 
```

样品[小提琴](https://dotnetfiddle.net/p1Ic0w)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T22:20:40.883

`node`您可以使用您的标签尝试以下操作：

```
var result="";
var nodes = node.childNodes
for (var i=0,len=nodes.length; i<len; i++)
{
   var node=nodes[i];
   if (node.nodeType==node.TEXT_NODE)
   {
       result += node.nodeValue;
   }
} 
```

它应该连接主节点内的所有文本节点并忽略子元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T22:23:10.770

所以有几点：

1.  根据定义， [InnerText](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.innertext%28v=vs.100%29.aspx)为您提供所有子节点的文本。就 api 为您提供的工具而言，询问“[just] this node 的 InnerText”没有意义。
2.  您正在寻找的是 Text 类型的子节点（或者可能是 CDATA，具体取决于您的情况）。大多数（全部？）时间这将是第一个 ChildNode。

# java - 代码中的惊人错误

> ID：11461377
> 
> 赞同：0
> 
> 时间：2012-07-12T22:01:11.773
> 
> 标签：java, android, eclipse, swing, arraylist

直升机。我有两个数组列表：

```
public static ArrayList<Shop> shops; 
```

带字段： `public static double dist;`

和第二个数组列表：`public static ArrayList<Double> for_sort_shops;`

我也有一个代码：

```
for (int i = 0; i < shops.size(); i++) {
    Log.i("palval", "for_sort_shops.get(i) = "
            + for_sort_shops.get(i));
}

for (int i = 0; i < shops.size(); i++) {
    shops.get(i).dist = for_sort_shops.get(i);
}

Log.i("palval", "---------------------------------------");
for (int i = 0; i < shops.size(); i++) {
    Log.i("palval", "shops.get(i).dist = "
            + shops.get(i).dist);
} 
```

我得到了什么结果？

![在此处输入图像描述](../Images/0696fa6b912b8164f7e82bfbf06e596f.png)

怎么可能？！帮助我理解。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T22:04:45.540

您声明`dist`了静态，这意味着它的值在类级别定义并在所有实例之间共享。在您的程序中，您只能看到分配给它的最后一个值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T22:07:14.063

你的领域是

```
public static double dist 
```

因为它是，所以整个类`static`只有一个值。`dist``Shops`

你需要使这个值非`static`每个`Shop`都有它自己的`dist`值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T22:06:50.033

由于您的字段`public static double dist;`是静态的，因此在整个代码执行过程中只有一个字段。所以你一遍又一遍地更新同一个变量。取消`static`dist 以达到您想要的结果。

# objective-c - 使用 GData ObjC 客户端库向 YouTube 发表评论失败

> ID：11461379
> 
> 赞同：0
> 
> 时间：2012-07-12T22:01:44.060
> 
> 标签：objective-c, ios, google-api, youtube-api

我正在尝试使用[此线程](https://groups.google.com/forum/#!msg/gdata-objectivec-client/a2mln6iQyK0/BjapQOLrBbIJ)中发布的代码片段，使用[gdata-objectivec-client](http://code.google.com/p/gdata-objectivec-client)库对 YouTube 视频进行评论；副本如下：

```
- (void)addCommentTitle:(NSString *)commentTitle
            text:(NSString *)commentContent
            toVideo:(GDataEntryYouTubeVideo *)entry {
    GDataComment *commentObj = [entry comment];
    GDataFeedLink *feedLink = [commentObj feedLink];
    NSURL *feedURL = [feedLink URL];
    if (feedURL) {
        // fetch the comment feed for the video
        GDataServiceGoogleYouTube *service = [self youTubeService];
        [service fetchFeedWithURL:feedURL
                completionHandler:^(GDataServiceTicket *ticket, GDataFeedBase *commentFeed, NSError *error) {
                    // callback
                    //
                    // insert a new comment into the comment feed
                    if (error == nil) {
                        GDataEntryYouTubeComment *newCommentEntry = [GDataEntryYouTubeComment commentEntry];
                        [newCommentEntry setTitleWithString:commentTitle];
                        [newCommentEntry setContentWithString:commentContent];

                        NSURL *postURL = [[commentFeed postLink] URL];
                        [service fetchEntryByInsertingEntry:newCommentEntry
                                                 forFeedURL:postURL
                                          completionHandler:^(GDataServiceTicket *ticket, GDataEntryBase *entry, NSError *error) {
                                              // callback
                                              if (error == nil) {
                                                  // succeeded
                                              }
                                          }];
                    }
                }];
        }
    } 
```

但我总是遇到以下异常：

```
*** Assertion failure in -[GDataObject setContentStringValue:](), XXXXXXXX/GData/BaseClasses/GDataObject.m:2353
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'GDataEntryYouTubeComment setting undeclared content value' 
```

幸运的是，我设法通过在评论内容设置之前添加一个新调用来解决这个问题：

```
GDataEntryYouTubeComment* newCommentEntry = [GDataEntryYouTubeComment commentEntry];
[newCommentEntry addContentValueDeclaration];    // <--- this method does the trick
[newCommentEntry setTitleWithString:commentTitle];
[newCommentEntry setContentStringValue:commentContent]; 
```

但这仍然不行，因为请求现在从服务器反弹回来，并出现以下错误：

```
serviceBase:<GDataServiceGoogleYouTube: 0x7a73eb0>
objectFetcher:GTMHTTPFetcher 0x7c75b20 (https://gdata.youtube.com/feeds/api/videos/XXXXXXXXXX/comments)
failedWithStatus:400
data:<errors xmlns='http://schemas.google.com/g/2005'><error><domain>GData</domain><code>ParseException</code><internalReason>[Line 2, Column 514, element entry] No converter for type class java.lang.Void</internalReason></error><error><domain>GData</domain><code>missingConverter</code><internalReason>No converter for type class java.lang.Void</internalReason></error></errors> 
```

有没有其他人遇到过这个问题？这是我的错误还是谷歌的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:08:02.997

原来上面的代码是正确的，在我的代码中我拼错了

```
[newCommentEntry setContentWithString:commentContent]; 
```

并使用

```
[newCommentEntry setContentStringValue:commentContent]; 
```

反而。现在它工作正常。

# r - 使用 gee() 拟合模型时出错：外部函数调用中的 NA/NaN/Inf (arg 3)

> ID：11461382
> 
> 赞同：4
> 
> 时间：2012-07-12T22:02:07.670
> 
> 标签：r, statistics

我正在一个数据集上拟合一个 gee 模型，其中包括 13,500 个观察值（这里是学生）。学生被分为 52 所不同的学校。我知道有证据表明学生嵌套在学校内（低 ICC），因此我应该在方差协方差矩阵中调整这种嵌套效应。我打算做的是首先拟合一个具有可交换 var-cov 结构的 gee 模型。然后，除此之外，我将运行 Huber-White Sandwich 估计器，也称为鲁棒方差估计器。我为鲁棒方差估计器编写了自己的代码，并且效果很好。我的 gee 语句不起作用，并给出以下错误：

```
NA/NaN/Inf in foreign function call (arg 3) 
```

这是我的代码：

```
STMath.OneYr.C1 = gee(postCSTMath1Yr ~ TRT1Yr + preCSTMath + preCSTENG + 
post1YrGradeRef + ELLBaseLine + GENDER + ECODIS + ETHNICITY.F + 
as.factor(FailedInd1Yr), data = UCI.clone[UCI.clone$COHORT0809 == "C1",], 
id =  post1YrSchIID, corstr = "exchangeable") 
```

不幸的是，上面的代码对你们来说是不可重现的，也许很难弄清楚问题是什么。

如果您能帮助我解决问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-04-03T09:37:50.710

好的，这个问题已经很老了，但我最终来到了这里，所以这最终可能会对某人有所帮助。

基本上，这个错误是因为与其他库不同，该`id`参数被视为数字向量。

确实，该`gee`功能正在转换`id`为双精度，我不太明白。以下是涉及的行（函数的 l. 119-120）：

```
if (!(is.double(id))) 
  id <- as.double(id) 
```

如果您的`id`列是一个字符，只需将其转换为一个因子，或使用某些函数（如`dplyr::min_rank`）将其转换为数字变量。

这应该可以解决问题。

# css - Internet Explorer 中的 CSS 菜单问题

> ID：11461387
> 
> 赞同：2
> 
> 时间：2012-07-12T22:02:16.510
> 
> 标签：css, internet-explorer

我一直在研究 CSS 菜单，它在除 Internet Explorer 之外的所有浏览器中都能正常工作。

问题可以在下面看到：第一个`<li>`元素没有正确对齐。事实上，它被推倒了。

[![](../Images/56f388fdab40693152fc1d0fab402fc1.png)](https://i.stack.imgur.com/UCL3t.png)

```
#sub-navigation {
    background: url("{T_THEME_PATH}/images/subnavigation.png") repeat-x;
    -webkit-border-radius: 1px;
    -moz-border-radius: 1px;
    border-radius: 1px;
    height: 25px;
    line-height: 25px;
    border-bottom: 1px solid #dfeaf1;
    border-left: 1px solid #dfeaf1;
    border-right: 1px solid #dfeaf1;
    border-top: 3px solid #ffffff;
}
#second-navigation li {
    border-right: 1px solid #cddfeb;
    padding-right: 14px;
    padding-left: 14px;
    margin-left: 0px;
    float: left;
    display: block;
    font-size: 11px;
    font-weight: none;
    font-color: #6b6b6b;
}

#second-navigation ul {
    position: absolute; 
    display: none;
    z-index: 999;
    background: #4e4e4e;
    border: none;
    border-radius: 2px;
    width: 80px;
    color: #FFFFFF;
}
<div id="sub-navigation">
        <ul id="second-navigation" class="leftside">
            <li>
                <a href="" title="Calendar"><center>Calendar</center>   </a>
            </li>
            <li>
                <a href="" title="HH Converter">HH Converter</a>
            </li>
            <li>
                <a href="" title="Poker Bonuses">Poker Bonuses</a>
            </li>
    </div> 
```

任何人都知道如何解决这个问题，所以它可以在 Internet Explorer 中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:36:24.277

不幸的是，我目前无法为您测试实际代码。测试站正在四处移动。根据经验和我的想法 - 有一些错误。

编码：

```
#sub-navigation {
    background: url("{T_THEME_PATH}/images/subnavigation.png") repeat-x;
    -webkit-border-radius: 1px;
    -moz-border-radius: 1px;
    border-radius: 1px;
    height: 25px;
    line-height: 25px;
    border-bottom: 1px solid #dfeaf1;
    border-left: 1px solid #dfeaf1;
    border-right: 1px solid #dfeaf1;
    border-top: 3px solid #ffffff;
}
#second-navigation ul {
    position: absolute; 
    display: none;
    z-index: 999;
    background: #4e4e4e;
    border: none;
    border-radius: 2px;
    width: 80px;
    color: #FFFFFF;
    list-style:none;
}
#second-navigation li {
    border-right: 1px solid #cddfeb;
    padding-right: 14px;
    padding-left: 14px;
    margin-left: 0px;
    float: left;
    display: inline-block;
    font-size: 11px;
    font-weight: none;
    font-color: #6b6b6b;
    list-style-type:none;
}
#second-navigation li a {
    display:block;
}
#second-navigation .center {
    text-align:center;
}
<div id="sub-navigation">
        <ul id="second-navigation" class="leftside">
            <li>
                <a href="#" title="Calendar" class="center">Calendar</a>
            </li>
            <li>
                <a href="#" title="HH Converter">HH Converter</a>
            </li>
            <li>
                <a href="#" title="Poker Bonuses">Poker Bonuses</a>
            </li>
        </ul>
    </div> 
```

这些变化是：

*   除非您在某处进行了重置（例如 YUI 重置），否则 ul 和 li 应该包含列表样式：无；和列表样式类型：无；
*   在 Internet Explorer 上，浮动：左；应附上 display:inline-block; 不显示：阻止；
*   在大多数浏览器上，ap 和标签中的元素都可以工作...... IE
    通常会发出嘶嘶声。使用 CSS 声明一个文本对齐中心......无论如何你都应该这样做。

希望这会有所帮助！

在旁注中，CSS 明智...如果您希望链接居中而不是什么 - 摆脱所有填充和边距写入...浏览器以不同方式考虑填充和边距并且可能导致问题。

一个简单的：

```
a {
display:block;
line-height: 25px;
text-align:center;
} 
```

会做的伎俩。

# c# - 从 XElement 中删除父级

> ID：11461388
> 
> 赞同：0
> 
> 时间：2012-07-12T22:02:26.733
> 
> 标签：c#, xml, xelement

如何从xml“门票”中删除父标签剩余的节点应该在那里

```
<Tickets>
    <Extract_Date>2011-02-25 00:00:00</Extract_Date>
    <Ticket>
        <Ticket_Number>INC000000578057</Ticket_Number>
        <Status>
            <Value>Cancelled</Value>
            <Reason>Cancelled by user</Reason>
        </Status>
    </Ticket>
</Tickets> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:13:03.827

的`.Elements()`方法`XElement`返回元素的所有子元素。

```
IEnumerable<XElement> GetElementsWithoutParent(XElement element)
{
    return element.Elements();
} 
```

当然，当你可以直接调用该`.Elements()`方法时，这样的方法会很愚蠢，但它说明了这一点。

请记住，您不再拥有一个`XElement`，而是一个`XElement`集合。您不能再通过简单地调用来获得 XML 表示`.ToString()`。要获取 XML，您需要使用 a`StringBuilder`并附加每个单独的元素。并且它不能表示没有根节点的 XML 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T22:25:37.947

> 想要序列化其他节点并将其保存到数据库，同时反序列化动态添加父节点

```
XElement newRoot = ........
newRoot.Add(orgXDoc.Element("Tickets").Elements()); 
```

# c# - asp.net 错误：无法将“System.DateTime”类型的对象转换为“System.String”类型

> ID：11461390
> 
> 赞同：4
> 
> 时间：2012-07-12T22:02:28.340
> 
> 标签：c#, asp.net, datetime

抱歉，这是脑残。我已经搜索了整个互联网，但无法弄清楚这一点。
**错误：** *“无法将 'System.DateTime' 类型的对象转换为 'System.String' 类型。”*

```
if (oDbDataReader.GetString(2) == DateTime.Now.AddDays(-90).ToShortDateString())       //DateCreated
{
    oEmp.PasswordCompliance = "Password expired";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T22:07:08.927

两个问题，首先你要比较平等，如果有人在 3 个月后检查，这不会触发。其次，您可能正在数据库中存储`Date`or `DateTime`，导致调用`GetString`失败。

请改用以下内容（在这种情况下没有理由使用字符串）。

```
if (oDbDataReader.GetDateTime(2) <= DateTime.Now.AddDays(-90)) 
```

另请注意，您的原始文件有一个额外的`;`可能导致您的密码始终过期。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T22:07:44.277

列 [2] 的类型是什么？如果是，`DateTime`您应该尝试[DbDataReader.GetDateTime](http://msdn.microsoft.com/en-us/library/system.data.common.dbdatareader.getdatetime.aspx)

```
if (oDbDataReader.GetDateTime(2) < DateTime.Now.AddDays(-90)) 
{
    oEmp.PasswordCompliance = "Password expired";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T22:11:42.740

阅读器中位置 2 列中的值是 DateTime，而不是字符串。因此 GetString 调用失败。

# jquery - css菜单在悬停链接下方显示隐藏的div

> ID：11461391
> 
> 赞同：0
> 
> 时间：2012-07-12T22:02:33.753
> 
> 标签：jquery, css, menu, submenu

我正在尝试创建一个 CSS/Jquery 水平菜单。所有列表项都包含一个链接，其中一个将包含一个隐藏的 div，当相应的链接悬停在上面时应该显示该 div。

我遇到的问题是，当链接悬停在隐藏的 div 上时，它位于菜单的容器 div 中，这意味着现在显示的 div 的背景与菜单和其他样式相同。

我想要的是要显示的 div 不是与菜单相同的 div 的一部分，而是出现在相应链接下方。

如果您将鼠标悬停在任何标题链接上，我发现的一个示例是[http://www.inprocorp.com/default.aspx 。](http://www.inprocorp.com/default.aspx)

隐藏 div 中的内容可以包含图像、HTML 列表、段落...

我尝试使用 jsfiddler，但目前它已关闭。

代码：

HTML

```
<div id="centeredmenu">
<ul>
<li><a href="#">home</a></li>
<li><a href="#">services</a></li>
<li class="subMenu"><a href="#" id="prod">products</a>
<div class="hiddencontent">hidden content</li>
<li><a href="#">contact</a></li> 
<li><a href="#">about</a></li>
</ul>
</div> 
```

JS

```
$('li.subMenu a').hover(function(evt)
{       
var link = $(this);
var dialog = link.next('div');
dialog.css("top", link.position().top);
dialog.css("left", link.position().left);
dialog.css("position", "relative"); 
dialog.show();
},

function() { 
$(this).next('div').hide();
}) 
```

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:08:03.340

这应该可以帮助您：

[http://www.brandammo.co.uk/blog/2011/02/simple-jquery-dropdown-menu-with-easing-and-hoverintent-navidropdown-1-0/](http://www.brandammo.co.uk/blog/2011/02/simple-jquery-dropdown-menu-with-easing-and-hoverintent-navidropdown-1-0/)

创建下拉菜单 hoverintent 是最有用的插件之一 - 相信我！

演示也和你想要达到的效果类似（没有缓动）

[http://www.brandammo.co.uk/blog/wp-content/uploads/2011/02/jquery.naviDropDown.v1.0.DEMO/](http://www.brandammo.co.uk/blog/wp-content/uploads/2011/02/jquery.naviDropDown.v1.0.DEMO/)

# ruby-on-rails - haml，块和部分

> ID：11461395
> 
> 赞同：1
> 
> 时间：2012-07-12T22:03:03.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, haml, ruby-on-rails-3.2

为了清理和考虑丑陋的观点，我想做以下事情：

1）在视图中：

```
= document_left_container do
 = document_information 
```

2）在我的助手中：

```
 def document_left_container(&block)
    render partial: "/document_left_container", locals: { custom_block: block }
  end

   def document_information
    render partial: "document_information"
  end 
```

3) 部分：

对于 document_left_container：

```
.foo
  = custom_block.call 
```

对于文档信息：

```
.bar 
```

4) 预期结果：

```
<div class='foo'>
  <div class='bar'>
  </div> 
</div> 
```

5) 实际结果：

```
<div class='foo'>
</div>
<div class='bar'>
</div> 
```

有谁知道我该怎么做才能让我的东西正常工作？

提前致谢，

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:33:44.470

这是我保持干燥的方法：

```
=content_for(:document_information) do
  .bar

.foo
  =yield(:document_information) 
```

这将产生

```
<div class='foo'>
  <div class='bar'>
  </div> 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T07:39:04.260

我目前的解决方案是：

帮手：

```
def document_left_container(&block)
  content_for :document_left_container do
    block.call
  end
  render partial: "/document_left_container"
end 
```

部分的：

```
.foo
  = yield :document_left_container 
```

休息保持不变，我真的很想保持相同的结构。

仍然很好奇为什么我的原始代码失败了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:40:27.067

我认为您的原始代码失败了，因为您实际上是在调用渲染然后再次调用渲染。因此，您将一些东西压入*堆栈*，然后将其他东西压入堆栈。如果你这样做，我*认为*它会起作用。（虽然我没有测试过。）

```
def document_left_container(&block)
  capture_haml do 
    render partial: "/document_left_container", locals: { custom_block: block }
  end
end

 def document_information
  render partial: "document_information"
end 
```

# android - 来自内容提供者的光标的自定义列名

> ID：11461398
> 
> 赞同：1
> 
> 时间：2012-07-12T22:03:17.303
> 
> 标签：android, android-contentprovider

是否可以使用自定义列名而不是内容提供者提供的那些来获取光标？

我尝试以下

```
 private final String[] PROJ_CONTACT = {
                    ContactsContract.CommonDataKinds.Email.DISPLAY_NAME_PRIMARY + " AS " + Golfer.COLUMN_NAME,
                    ContactsContract.CommonDataKinds.Email.ADDRESS + " AS " + Golfer.COLUMN_EMAIL
            };

ContentResolver resolver = getActivity().getContentResolver();
Cursor cursor = resolver.query(
                    ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                    PROJ_CONTACT,
                    SELECTION_BY_ID,
                    new String[] {Long.toString(id)},
                    null); 
```

但我得到了例外`07-12 17:02:01.733: E/AndroidRuntime(7569): java.lang.IllegalArgumentException: Invalid column display_name AS name`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:15:22.207

可能的解决方案是创建一个游标包装器，它重新映射列名并使用它而不是内容提供程序返回的游标，但也许有更好的解决方案？

```
private class ContactCursor extends CursorWrapper {
    public ContactCursor(Cursor cursor) {
        super(cursor);
    }

    @Override
    public int getColumnIndex(String columnName) {
        if (Golfer.COLUMN_NAME.equalsIgnoreCase(columnName)){
            columnName = ContactsContract.CommonDataKinds.Email.DISPLAY_NAME_PRIMARY;
        }

        if (Golfer.COLUMN_EMAIL.equalsIgnoreCase(columnName)){
            columnName = ContactsContract.CommonDataKinds.Email.ADDRESS;
        }               

        return super.getColumnIndex(columnName);
    }
} 
```

# opengl - 读取保持重叠的openGL帧缓冲区的不同部分

> ID：11461399
> 
> 赞同：0
> 
> 时间：2012-07-12T22:03:19.160
> 
> 标签：opengl, textures, overlap

我需要对之前由 openGL 绘制的帧缓冲区数据进行一些 CPU 操作。有时，我需要绘制的分辨率高于纹理分辨率，因此我考虑为视口和目标 FBO 选择 SIZE，绘制，读取到 CPU 缓冲区，然后将视口移动到空间中的其他位置并重复。在我的 CPU 内存中，我将拥有所有需要的颜色数据。不幸的是，出于我的目的，我需要在我的图块的垂直和水平边界之间保持 1 个像素的重叠。因此，想象一个大小为 SIZE x SIZE 的四块瓷砖的情况：

```
0 1
2 3 
```

例如，我需要让 tile 0 的最后一列数据包含与 tile 1 的第一列数据相同的数据，而 tile 0 的最后一行数据包含与 tile 2 的第一行相同的数据。因此，我将绘制的总分辨率是

```
SIZEW * ntilesHor -(ntilesHor-1) x SIZEH * ntilesVer -(ntilesVer-1) 
```

对于 semplicity，SIZEW 和 SIZEH 将是相同的，对于 ntilesVer 和 ntilesHor 也是相同的。我的代码现在看起来像

```
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fbo);
glViewport(0, 0, tilesize, tilesize);
glPolygonMode(GL_FRONT, GL_FILL);

for (int i=0; i < ntiles; ++i)
{
    for (int j=0; j < ntiles; ++j)
    {
        tileid = i * ntiles +j;

        int left = max(0, (j*tilesize)- j);
        int right = left + tilesize;
        int bottom = max(0, (i*tilesize)- i);
        int top = bottom + tilesize;

        glEnable(GL_DEPTH_TEST);
        glDepthFunc(GL_LESS);

        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(left, right, bottom, top, -1, 0);   

        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        // Draw display list
        glCallList(DList);

        // Texture target of the fbo
        glReadBuffer(tex_render_target);

        // Read to CPU to preallocated buffer
        glReadPixels(0, 0, tilesize, tilesize, GL_BGRA, GL_UNSIGNED_BYTE, colorbuffers[tileid]);
    }
} 
```

代码运行，并且在各种缓冲区“colorbuffers”中，我似乎有一些看起来像颜色数据的东西，也类似于我应该给我的平局；只是，我需要的重叠不存在，即 tile 0 的最后一列和 tile 1 的第一列产生不同的值。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:37:55.473

```
 int left = max(0, (j*tilesize)- j);
    int right = left + tilesize;
    int bottom = max(0, (i*tilesize)- i);
    int top = bottom + tilesize; 
```

我不确定这些边距。如果您的意图是根据您的视口建议的基于像素的映射，并且有一些恒定的重叠，那么`-j`and`-i`术语没有意义，因为它们是不均匀的。我认为你想要一些恒定的价值。你也不需要那个`max`。你想要一个 1 像素的重叠，所以你的常数将为 0。因为你有

```
right_j == left_(j+1) 
```

底部和顶部也是如此，这正是您想要的。

# objective-c - 在 Objective C 中创建默认值

> ID：11461402
> 
> 赞同：0
> 
> 时间：2012-07-12T22:03:31.640
> 
> 标签：objective-c, ios, cocoa-touch, nstimer, countdown

我正在开发我的第一个大型应用程序，无意中让自己因设计中的一个小缺陷而陷入恐慌。我制作了一个计时器，只需按一下按钮即可计数，然后在第二次触摸时转换为具有 60 秒倒计时的辅助计时器。

问题在于，一旦我重复此过程，就会记住 (kRest-Pause) 调用。我希望创建一个默认的 60 倒计时，而不需要时间的延续。我应该在内存中杀死它并为每个后续按钮按下创建一个新实例吗？或者是否有一个逻辑游戏可以查看总时间并在每次新出现时进行更正？

我不知道如何解决这个问题，我已经尝试过带有返回的 -if 语句，因为我了解到这不是这样工作的。任何帮助，将不胜感激

编辑：对不起，不清楚。我对任何口径的编程都很熟悉。到目前为止，主计时器从 10-0 倒计时，然后从 0-120 向上倒计时。在这 2 分钟内，如果再次按下按钮，0-120 计数将暂停 60 秒或直到第三次按下按钮。如果这个 60-0 倒计时达到 0 或被中断，最初的 0-120 倒计时将恢复其计数。我的问题是，如果我第四次按下按钮，60-0 倒计时将从中断的那一刻开始恢复，而不保留默认值 60。这就是为什么我将帖子命名为“在 Objective C 中创建默认值”。这是错误使用这个词和广泛的方式，但这是我能想到的。

```
kRest=60

-(void)increase{

    if (mode==1){
        count++;

        int d = 10-count;

        if (d==0){ timeLabel.text = @"Begin";
            [self startPlaybackForPlayer: self.startTimerSound];}

        else {timeLabel.text = [NSString stringWithFormat:@"%d", abs(d)];}

        if(d<0){
            //workign out
            active = TRUE;
            if (d <= -20) {
                [self stopTimer];                 
            }
        }
        else{
            //no user interface
            active = FALSE;

        }
    }
    else{
        pause++;
        countdownLabel.text = [NSString stringWithFormat:@"%d!", (kRest-pause)];
        NSLog(@"Paused at time %d", pause);

        UIColor *textColor = nil;
        if (pause % 2==0){
            textColor = [UIColor yellowColor];
        }
        else{
            textColor = [UIColor redColor];

        }
        timeLabel.textColor = textColor;

        if ((kRest-pause)==0){
            countdownLabel.text = [NSString stringWithFormat:@"%d!",pause];
            mode=1;
            pause=0;
            [button setTitle:@"Stop" forState:UIControlStateNormal];
            repCount++;
            myRepCount.text = [NSString stringWithFormat:@"Rep Count: %d", repCount];
            countdownLabel.text = @"";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:26:04.633

如果您使用计时器来访问此计数器，那么您应该能够更新计时器使用的计数器。只需确保同步对象，以便在阅读时不进行编辑。

这是我的意思的一个例子。

```
int counter = 0;

int limit = 60;

- (BOOL) incrementUntilReached{

    @synchronized(self){
        if (counter == limit) return YES;
        counter++;
        return NO;
    }
}

- (void) resetTimer{
    @synchronized(self){
        counter = 0;
    }
}

- (int) countsLeft {
    @synchronized(self){
        return limit - counter;
    }
} 
```

# android - 方位角错误值

> ID：11461403
> 
> 赞同：0
> 
> 时间：2012-07-12T22:03:34.087
> 
> 标签：android, android-sensors

在下面你会看到我的传感器管理器类..我用虚拟罗盘很好地工作，但点击我试图获得根据谷歌文档应该返回的方位角值 0=North, 90=east, 180 = south , 和 270 = 西...

我的应用程序仅设置为横向模式..

有趣的是，如果

我的手机在 PORTRAIT 中我得到：北 90，东 180，南 -90，西 0

如果我在横向模式下持有它：北 -40 到 -60 东约 30 东 -12 南 -156 西

相同的代码正在旋转一个可见的矩阵openGl指南针，这就是我将数字与磁力计实际认为的磁北进行比较的方式..我很困惑..有人请哦，请帮忙。

我的传感器类：

```
public void start(Context context,final int displayOrientation) {
            listener = new SensorEventListener() {
            private int displayOri = displayOrientation;

            public void onAccuracyChanged(Sensor arg0, int arg1){}

            public void onSensorChanged(SensorEvent evt) {
                int type=evt.sensor.getType();

                if (type == Sensor.TYPE_MAGNETIC_FIELD) {
                    orientation[0]=(orientation[0]*1+evt.values[0])*0.5f;
                    orientation[1]=(orientation[1]*1+evt.values[1])*0.5f;
                    orientation[2]=(orientation[2]*1+evt.values[2])*0.5f;
                } else if (type == Sensor.TYPE_ACCELEROMETER) {
                    acceleration[0]=(acceleration[0]*2+evt.values[0])*0.33334f;
                    acceleration[1]=(acceleration[1]*2+evt.values[1])*0.33334f;
                    acceleration[2]=(acceleration[2]*2+evt.values[2])*0.33334f;
                }
                if ((type==Sensor.TYPE_MAGNETIC_FIELD) || (type==Sensor.TYPE_ACCELEROMETER)) {
                    float newMat[]=new float[16];

                    //Toast toast = Toast.makeText(ctx.getApplicationContext(), "accel", Toast.LENGTH_SHORT);
                    //toast.show();
                    SensorManager.getRotationMatrix(newMat, null, acceleration, orientation);
                    if(displayOri==0||displayOri==2){
                        SensorManager.remapCoordinateSystem(newMat,SensorManager.AXIS_X*-1, SensorManager.AXIS_MINUS_Y*-1,newMat);
                    }else{
                        SensorManager.remapCoordinateSystem(newMat,SensorManager.AXIS_Y, SensorManager.AXIS_MINUS_X,newMat);
                    }

                    matrix=newMat;
                    SensorManager.getOrientation (newMat, orientationValues); 
                }
            }
        };

        sensorMan = (SensorManager)context.getSystemService(Context.SENSOR_SERVICE);
        sensorAcce = sensorMan.getSensorList(Sensor.TYPE_ACCELEROMETER).get(0);
        sensorMagn = sensorMan.getSensorList(Sensor.TYPE_MAGNETIC_FIELD).get(0);
        //sensorOri = sensorMan.getSensorList(Sensor.TYPE_ORIENTATION).get(0);

        sensorMan.registerListener(listener, sensorAcce, SensorManager.SENSOR_DELAY_UI);
        sensorMan.registerListener(listener, sensorMagn, SensorManager.SENSOR_DELAY_UI);    
        //sensorMan.registerListener(listener, sensorOri, SensorManager.SENSOR_DELAY_UI);   
    }

    public float[] getMatrix() {
        return matrix;
    }
    public float getRoll(){
        return roll;
    }
    public float[] getACC(){
        return acceleration;
    }
    public float[] getORI(){
        return orientationValues;

    }
    public float getIncline(){
        return sensorMan.getInclination(matrix);
    }
    public void finish() {
        sensorMan.unregisterListener(listener);
    }
    public void onPause() {
        sensorMan.unregisterListener(listener);
    }
    public void onResume(){
        sensorMan.registerListener(listener, sensorAcce, SensorManager.SENSOR_DELAY_UI);
        sensorMan.registerListener(listener, sensorMagn, SensorManager.SENSOR_DELAY_UI);
        //sensorMan.registerListener(listener, sensorOri, SensorManager.SENSOR_DELAY_UI);   
    }
} 
```

谷歌文档：

* **SENSOR_ORIENTATION、SENSOR_ORIENTATION_RAW：所有值都是以度为单位的角度。values[0]: 方位角，绕 Z 轴旋转 (0<=azimuth<360)。0 = 北，90 = 东，180 = 南，270 = 西 值[1]：俯仰，绕 X 轴旋转 (-180<=pitch<=180)，当 z 轴向 y- 移动时为正值轴。values[2]：滚动，绕 Y 轴旋转（-90<=roll<=90），当 z 轴向 x 轴移动时为正值。请注意，偏航、俯仰和横滚的定义不同于航空中使用的传统定义，其中 X 轴沿着飞机的长边（机尾到机头）。注意我现在没有使用sensor.orientation，因为它说我现在使用的方法更准确***

我还包括 openGL 类，该类使用相同的传感器数据创建一个准确的指南针，并带有一个名为 newTAg 的长按功能，它将传感器数据扔给我。

吐司看起来像这样：

```
 Toast.makeText(getContext(), "INLCINE:"+phoneOri.getIncline()+" azimuth:"+Math.toDegrees(tagOri[0])+" pitch:"+Math.toDegrees(tagOri[1])+" roll:"+Math.toDegrees(tagOri[2]),Toast.LENGTH_LONG).show(); 
```

* * *

```
public GLLayer(Context context, int orientation) {
        super(context);

        this.context = context;
        //this.square = new Square();
        this.cRing = new Circle();
        this.cNeedle = new CompassNeedle();

        this.mNorth = new MarkerNorth();
        this.mEast = new MarkerEast();
        this.mSouth = new MarkerSouth();
        this.mWest = new MarkerWest();

        this.mSWest = new MarkerSouthWest();
        this.mSEast = new MarkerSouthEast();
        this.mNWest = new MarkerNorthWest();
        this.mNEast = new MarkerNorthEast();
        this.mtag = new tagImage();
        phoneOri=new PhoneOrientation(context); // sensor manager and interpreter

        // settings for translucent glView
        this.setEGLConfigChooser(8, 8, 8, 8, 16, 0);
        this.getHolder().setFormat(PixelFormat.TRANSLUCENT);

        // set render to inline 
        this.setRenderer(this);
        phoneOri.start(context, orientation);

    }

    @Override
    public void onDrawFrame(GL10 gl) {
        gl.glEnable(GL10.GL_TEXTURE_2D);

        // clear Screen and Depth Buffer
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        // Reset the Modelview Matrix
        gl.glLoadIdentity();

        //GLU.gluLookAt(gl, eyeX, eyeY, eyeZ, centerX, centerY, centerZ, upX, upY, upZ);
        GLU.gluLookAt(gl,0, 0, 0, 0, 0, 0, 0, 0, 0);
        //GLU.gluLookAt(gl, 90.0f, 1.0f, 5.0f, 0.0f, 0.0f, 0.0f, 0, 1.0f, 0);

        float floatMat[]=phoneOri.getMatrix();

        gl.glMatrixMode(GL10.GL_MODELVIEW);

        //
        //gl.glTranslatef(0,0,-200.0f);
        //cRing.draw(gl);
        //DrawCompass Needle and Markers

        gl.glLoadMatrixf(floatMat, 0);

        for(int i=0;i<tags.size();i++){
            gl.glPushMatrix();

            //GLU.gluLookAt(gl,0, 0, 0, 0, 0, 0, 0, 0, 0);
            //float angle = phoneOri.sensorMan,getAngleChange();
            gl.glRotatef(90,2, 0,0);
            mtag.draw(gl);
            gl.glLoadMatrixf(floatMat,0);
        }

        gl.glPushMatrix();
        gl.glTranslatef(0,0,-10.0f);
        cNeedle.draw(gl);
        gl.glLoadMatrixf(floatMat,0);
        //Draw compass ring
        //gl.glPushMatrix();
        gl.glTranslatef(0,0,10.0f);
        cRing.draw(gl);

        //Draw South
        gl.glTranslatef(0.0f,-150.0f,-10.0f);
        mSouth.draw(gl); 

        //Draw West
        gl.glTranslatef(-150.0f,150.0f,0.0f);
        mWest.draw(gl);

        //DrawNorth
        gl.glTranslatef(150.0f,150.0f,0.0f);
        mNorth.draw(gl); 

        //DrawEast
        gl.glTranslatef(150.0f,-150.0f,0.0f);
        mEast.draw(gl);

        //SW
        gl.glTranslatef(-225.0f, -75.0f, 0.0f);
        mSWest.draw(gl);

        // NW
        gl.glTranslatef(0.0f,150.f,0);
        mNWest.draw(gl);

        gl.glTranslatef(150.0f, 0f, 0f);
        mNEast.draw(gl);

        gl.glTranslatef(0.0f,-150.0f,0.0f);
        mSEast.draw(gl);

        // Drawing
        //gl.glNormal3f(0,0,1);
        //gl.glTranslatef(0.0f,-150.0f,0.0f);     // move 5 units INTO the screen
        //square.draw(gl);                       // Draw the square

         gl.glPushMatrix();

    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        if(height == 0) {                    //Prevent A Divide By Zero By
        height = 1;                         //Making Height Equal One
        }
        float ratio = (float) width / height;
        gl.glViewport(0, 0, width, height);     //Reset The Current Viewport
        gl.glMatrixMode(GL10.GL_PROJECTION);    //Select The Projection Matrix
        gl.glLoadIdentity();                    //Reset The Projection Matrix
                                                //Calculate The Aspect Ratio Of The Window

        //gl.glFrustumf(-ratio, ratio, -1, 1, 1, 100);
        GLU.gluPerspective(gl, 35.0f, (float)width / (float)height, 5.0f, 200.0f);
        gl.glMatrixMode(GL10.GL_MODELVIEW);     //Select The Modelview Matrix
        gl.glLoadIdentity();                    //Reset The Modelview Matrix

        GLU.gluLookAt(gl, 0, 1.0f, 5.0f, 0, 0, 0, 0, 1.0f, 0);

    }

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig arg1) {
        // Load the texture for the square
        //square.loadGLTexture(gl, this.context);
        cRing.loadGLTexture(gl, this.context);
        cNeedle.loadGLTexture(gl, this.context);
        mNorth.loadGLTexture(gl, this.context);
        mEast.loadGLTexture(gl, this.context);
        mSouth.loadGLTexture(gl, this.context);
        mWest.loadGLTexture(gl, this.context);
        mSWest.loadGLTexture(gl, this.context);
        mNWest.loadGLTexture(gl, this.context);
        mSEast.loadGLTexture(gl, this.context);
        mNEast.loadGLTexture(gl, this.context);

        gl.glEnable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping ( NEW )
        gl.glShadeModel(GL10.GL_SMOOTH);            //Enable Smooth Shading
        gl.glClearColor(0.0f, 0.0f, 0.0f, 0.0f);    //Black Background
        gl.glClearDepthf(1.0f);                     //Depth Buffer Setup
        gl.glEnable(GL10.GL_DEPTH_TEST);            //Enables Depth Testing
        gl.glDepthFunc(GL10.GL_LEQUAL);             //The Type Of Depth Testing To Do

        //Really Nice Perspective Calculations
        //gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_SMOOTH);

    }

    @Override
    public void onPreviewFrame(byte[] data, Camera camera) {
        // TODO Auto-generated method stub

    }
    public void newTag(){
        float tagOri[] = new float[3];
        tagOri = phoneOri.getORI();
        tags.add(phoneOri.getMatrix());
        Toast.makeText(getContext(), "INLCINE:"+phoneOri.getIncline()+" azimuth:"+Math.toDegrees(tagOri[0])+" pitch:"+Math.toDegrees(tagOri[1])+" roll:"+Math.toDegrees(tagOri[2]),Toast.LENGTH_LONG).show();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T01:05:06.123

问题解决了。我重新使用方向传感器的偏航或方位角。我以前这样做过并且遇到了同样的问题，但发现我的问题是我将它转换为 float 而不是 double .. 稍后将更新代码。如果有人可以向我解释为什么这会有所帮助。我认为浮点数和双精度数之间的唯一区别是总位数..并且被转换为浮点数认为我不需要额外的 32 位

# asp.net - 如何在asp.net Web应用程序中模拟图像按钮的视觉推送

> ID：11461405
> 
> 赞同：0
> 
> 时间：2012-07-12T22:03:39.877
> 
> 标签：asp.net, button, web, controls

我正在开发一个 asp.net Web 应用程序，并且我有一些图像按钮控件，如何模拟它的视觉点击？我不是说触发事件，只是视觉上看到按钮像普通按钮一样被按下，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:05:53.953

您可以使用 css 标签。看到这个 liveemo：http: [//img.usabilitypost.com/0812/active_button/index.html](http://img.usabilitypost.com/0812/active_button/index.html)

此处的说明： [http ://www.usabilitypost.com/2008/12/16/pressed-button-state-with-css/](http://www.usabilitypost.com/2008/12/16/pressed-button-state-with-css/)

编辑：为了方便起见的代码。

```
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>Button Test</title>
    <style type="text/css" media="screen">
        body {
            padding: 40px;
        }
        #button {
            display: block;
            width: 135px;
            height: 43px;
            background: url(button.png) no-repeat top;
        }
        #button:active {
            background: url(button.png) no-repeat bottom;
        }
    </style>
</head>

<body>
    <a id="button"></a>
</body> 
```

此外，如果您对 CSS 非常陌生并且不想重新发明轮子，您可以使用基本的 CSS 界面，例如 Twitter 的 Bootstrap：http: [//twitter.github.com/bootstrap/base-css.html#buttons](http://twitter.github.com/bootstrap/base-css.html#buttons)

# javascript - Facebook 界面代码的哪一部分负责在悬停时更改徽标的背景颜色？

> ID：11461406
> 
> 赞同：1
> 
> 时间：2012-07-12T22:03:48.053
> 
> 标签：javascript, css, facebook, frontend

我想为 facebook 创建自己的皮肤，为此我必须控制悬停时徽标的背景会变成什么颜色。我一直在寻找负责该行为的代码行，但没有运气......请帮我找到它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:06:17.317

就那么简单：

```
#pageLogo a:hover, #pageLogo a:focus, #pageLogo a:active {
    background-color: #4B67A1;
} 
```

# node.js - node.js 与meteor.js 有什么区别？

> ID：11461411
> 
> 赞同：88
> 
> 时间：2012-07-12T22:04:13.603
> 
> 标签：node.js, meteor

所以我一直在听/读很多关于meteor.js的信息。这些教程使它作为一个框架看起来非常运动，但在 Web 编程方面我仍然是一个新手。

在过去的一个半月里，我一直在努力真正学习 node.js 并弄清楚它是如何结合在一起的。我喜欢它启动和运行的快速和简单，以及随之而来的社区（你可以为 Node 获得的框架数量惊人）。

但是流星呢？它的真正优势是什么，有什么区别？有没有人从 node.js 用户开始并“转换”，或者它仍然是一个奇怪的新框架？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-07-13T23:24:37.110

一个松散的类比是，“Meteor 之于 Node 就像 Rails 之于 Ruby”。这是一个在服务器上使用 Node 的大型、固执己见的框架。Node 本身只是一个底层框架，提供发送和接收 HTTP 请求以及执行其他 I/O 的功能。

Meteor 雄心勃勃：默认情况下，它所服务的每个页面实际上都是与服务器保持同步的[Handlebars模板。](http://handlebarsjs.com/)试试[排行榜示例](http://www.meteor.com/examples/leaderboard)：您创建了一个模板，上面只写着“列出姓名和分数”，每次任何客户更改姓名或分数时，页面都会使用新数据更新 — 不仅针对该客户，还针对查看页。

另一个区别：虽然 Node 本身是稳定的并在生产中广泛使用，但 Meteor 处于“预览”状态。存在严重的错误，某些不符合 Meteor 以数据为中心的概念模型（例如动画）的事情很难做到。

如果你喜欢玩新技术，试试 Meteor。如果您想要一个基于 Node 的更传统、更稳定的 Web 框架，请查看[Express](http://expressjs.com/)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-12T22:21:43.033

Meteor 是一个建立在 node.js 之上的框架。它使用 node.js 进行部署，但有几个不同之处。

关键是它使用自己的打包系统而不是节点的基于模块的系统。它使使用 Node.js 制作 Web 应用程序变得容易。Node 可以用于多种用途，并且它本身在提供动态 Web 内容方面非常糟糕。Meteor 的库让这一切变得简单。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-07-08T18:32:49.790

Meteor 的优势在于它的实时更新功能，它适用于您现在看到的一些社交应用程序，您可以在这些应用程序中看到每个人对您正在处理的工作的更新。这些更新集中在将 MongoDB 集合的子集复制为 Web 浏览器上的本地 mini-mongo（它们的客户端 MongoDB 子集）数据库更新（这会导致在您的模板上触发多个渲染事件）。关于多次渲染更新的后半部分也是弱点。如果您希望您的 UI 控制 UI 何时刷新（例如，加载 HTML 并控制所有 AJAX 调用和 UI 更新的经典 jQuery AJAX 页面），您将与这种机制作斗争。

Meteor 使用了一个很好的 Node.js 插件堆栈（Handlebars.js、Spark.js、Bootstrap css 等，但使用它自己的打包机制而不是 npm）和 MongoDB 一起用于存储层，您不必这样做想一想。但有时你最终也会与之抗争......例如，如果你想自定义 Bootstrap 主题，它会扰乱 Bootstrap 的 responsive.css 文件的加载顺序，因此它不再是响应式的（但这可能会在 Bootstrap 时自行修复3.0 即将发布）。

因此，就像所有“全栈框架”一样，只要您的应用符合预期，一切都会很好。一旦你超越了这个范围并突破了边缘界限，你最终可能会与框架抗争......

# javascript - Ajax - JSON 不会仅在 PATCH 中发送

> ID：11461414
> 
> 赞同：12
> 
> 时间：2012-07-12T22:04:36.337
> 
> 标签：javascript, jquery, ajax

我正在尝试使用以下方法将 json 数据从客户端发送到我的服务器：

```
$.ajax({
    url : 'http://127.0.0.1:8001/api/v1/pulse/7/',
    data : data,
    type : 'PATCH',
    contentType : 'application/json'
)}; 
```

我得到一个`No JSON object could be decoded`. 然而，当我使用`PUT`json 对象被发送。

**它只对 PATCH 不起作用**

后端是 Django，我使用的应用程序是 sweetpie

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-08T16:32:06.663

首先，检查您是否使用最新版本的 jQuery 库：

*   旧版本直接限制未知方法（PATCH 是新的）。
*   我已经在 jQuery 1.7 - PATCH 方法上进行了测试，没有问题。

其次，并非所有浏览器都支持使用 XMLHttpRequest 的 PATCH 方法：

*   就像，IE 7,8（9+ 工作正常）有 XMLHttpRequest，但它在 PATCH 上引发错误：

    ```
    new XMLHttpRequest().open('PATCH', '/'); //Illegal argument 
    ```

*   要解决此问题，您可以强制 jQuery 使用旧的专有 ActiveXObject xhr，如下所示：

    ```
    $.ajax({
        url : 'http://127.0.0.1:8001/api/v1/pulse/7/',
        data : data,
        type : 'PATCH',
        contentType : 'application/json',
        xhr: function() {
            return window.XMLHttpRequest == null || new window.XMLHttpRequest().addEventListener == null 
                ? new window.ActiveXObject("Microsoft.XMLHTTP")
                : $.ajaxSettings.xhr();
        }
    }); 
    ```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-18T11:49:29.807

有点晚了，但是当我收到此错误时，这对我有用：

```
$.ajax({
  url : 'http://127.0.0.1:8001/api/v1/pulse/7/',
  data : JSON.stringify(data),
  type : 'PATCH',
  contentType : 'application/json',
  processData: false,
  dataType: 'json'
}); 
```

自己序列化对象而不是让 jQuery 做它似乎有帮助。这适用于我在最新版本的 Chrome 上，但仍然不能解决其他回复中提到的 ie 问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T22:55:20.123

```
var request = new XMLHttpRequest();
request.open('PATCH', 'http://127.0.0.1:8001/api/v1/pulse/6/', false);
request.setRequestHeader("Content-type","application/json");
request.send('{"isActive": 1}'); 
```

使用 XMLHttpRequest 解决它！

# jquery - jQuery 警报不适用于 jQuery 事件

> ID：11461417
> 
> 赞同：-2
> 
> 时间：2012-07-12T22:04:57.957
> 
> 标签：jquery

```
 <script src="jQuery/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
    <script src="jQuery/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="jQuery/jquery-1.7.2-vsdoc.js" type="text/javascript"></script>
    <script src="jQuery/jquery-ui-vsdoc.js" type="text/javascript"></script>
    <script>
        $("div").mouseover(function() {
            alert("bla");
        });
    </script>
</head>
<body>
    <div>hello world !!!</div>
</body> 
```

我希望用户能够单击 Div，然后会出现一个消息框。y 它不起作用（在 Chrome 和 IE9 上）？使用 WebMatrix 2.0 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:07:52.873

在代码的当前版本中，当代码执行时， div DOM 元素在 DOM 中尚不可用。

您需要将处理程序包装在文档就绪处理程序中。尝试这个：

```
$(function(){
   $("div").mouseover(function() {
       alert("bla");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:08:36.790

就像@roko-c-buljan 说的你可以在 DOM 准备好之后注册事件

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" charset="utf-8">
    jQuery(document).ready(function($){
        $("div").mouseover(function() {
            alert("bla");
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T12:24:36.997

好的解决了这个问题..实际上它很愚蠢：

我刚刚在常规 js 之上通过了 VSDOC js

```
<script src="jQuery/jquery-1.7.2-vsdoc.js" type="text/javascript"></script>
<script src="jQuery/jquery-ui-vsdoc.js" type="text/javascript"></script>
<script src="jQuery/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
<script src="jQuery/jquery-1.7.2.min.js" type="text/javascript"></script> 
```

谢谢大家:)

# mysql - MySQL 舍入日期到星期和月份的开始

> ID：11461420
> 
> 赞同：11
> 
> 时间：2012-07-12T22:05:15.073
> 
> 标签：mysql, date

对于“2012-07-12”，我怎样才能得到一周的开始，即“2012-07-08”，以及月份的开始，即“2012-07-01”？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-12T23:00:50.020

每月第一天：

```
SELECT DATE_FORMAT('2007-07-12', '%Y-%m-01'); 
```

输出：2007-07-01

一周的第一天：

```
SELECT DATE_SUB('2007-07-12', INTERVAL DAYOFWEEK('2007-07-12')-1 DAY); 
```

输出：2007-07-08

MySQL 参考：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-13T08:03:05.537

[与Borophyll 的](https://stackoverflow.com/users/1043792/borophyll)答案相同，但我改变了当月第一天的行为以返回日期，而不仅仅是一个字符串，它避免了[user151220 的](https://stackoverflow.com/users/2007178/user151220)答案中提到的日期格式/解析。

每月第一天：

```
SELECT DATE_SUB('2007-07-12', INTERVAL DAYOFMONTH('2007-07-12') - 1 DAY); 
```

输出：`2007-07-01`

一周的第一天：

```
SELECT DATE_SUB('2007-07-12', INTERVAL DAYOFWEEK('2007-07-12') - 1 DAY); 
```

输出：`2007-07-08`

MySQL 参考：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-14T15:38:44.240

对于那些需要将星期一作为一周第一天的人：

```
SELECT DATE_SUB('2007-07-12', INTERVAL WEEKDAY('2007-07-12') DAY); 
```

输出：2007-07-09

这依赖于[WEEKDAY](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_weekday)函数，它从星期一开始，而不是[DAYOFWEEK](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek)，它从星期日开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-06T15:50:22.003

Borophyll 的 DATE_FORMAT 回复非常好，但给出的是字符串而不是日期。所以不能轻易比较。

如果您需要将此用作与日期字段的比较，请使用**str_to_date**将其反转回日期而不是字符串。

```
select x from y where date >= str_to_date( DATE_FORMAT(now()-interval 12 month,'Y-%m-01'), '%Y-%m-%d') 
```

如果您（例如）查看 12 个月的销售数据，但您希望始终从每月 1 日开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-26T15:32:01.723

如果您只想对其进行编码而忘记它，这将起作用，它现在将使用 datetime 并始终返回 MTD 结果-

```
where date_completed between date_sub(date(now()), INTERVAL dayofmonth(now()) -1 day) and now() 
```

# vb.net - 在 VB.Net 中是否有一种简单的方法可以像列表视图中的文本一样创建动态数量的面板？

> ID：11461425
> 
> 赞同：1
> 
> 时间：2012-07-12T22:05:41.293
> 
> 标签：vb.net

我想在屏幕上显示动态数量的面板。它就像创建面板的列表视图。我想要一些允许我使用 .add 和 .remove 运算符从列表视图或其他控件添加和删除面板的东西。vb.net 现在有什么东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:16:10.400

听起来您指的是[FlowLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.aspx)，您可以使用它向其添加任何控件（在您的情况下，更多面板）。

# javascript - AngularJS + jQuery Mobile 不带适配器和禁用路由 - 仅用于 UI 样式

> ID：11461426
> 
> 赞同：9
> 
> 时间：2012-07-12T22:05:42.940
> 
> 标签：javascript, jquery-mobile, angularjs

我正在学习 AngularJS 并构建了一个小型应用程序。现在它的功能已经完成，我想使用 jQuery Mobile 对其进行样式设置。

最初我加入了[tigbro 的 jquery-mobile-angular-adapter](https://github.com/tigbro/jquery-mobile-angular-adapter)，但最终决定它比我需要的更复杂和复杂。我不喜欢 jQuery Mobile 中的任何花哨的屏幕转换或页面管理功能——我只想用它来设置应用程序的样式，让 AngularJS 处理其余的事情。

我读[了这篇文章](http://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/)，虽然使用了另一个框架，但它具有相同的目标，并且包含一个禁用 jQuery Mobile 路由的代码片段。

我已经按照脚本加载的顺序将该代码段应用于我的应用程序，就在关闭正文标记之前：

1.  jQuery
2.  片段
3.  jQuery 移动
4.  AngularJS

这个片段放置是唯一有效的，或者无论如何都有效的，因为我的索引中的任何内容都正确地加载了样式（基本上是标题和主导航），并且我的 AngularJS 路由工作得很好，但是任何填充我的 ng 的动态加载的模板-view，尽管有 jQuery Mobile 数据角色（ul 作为 listview 等），但不是由 jQuery Mobile 设计的；它们只是纯 HTML。

有没有人知道如何让这些动态加载的模板也被设置样式？

我的索引 HTML 结构如下所示：

```
<body>
    <div data-role="page">
        <div data-role="header" data-position="fixed">
            <h1>MyApp</h1>
                <a href="#/home">Home</a>
            <a href="#/add_item">Add</a>
        </div>

        <div data-role="content" ng-view></div>
    </div>
    <!-- Scripts -->
</body> 
```

这是我的一个模板的示例：

```
<ul data-role="listview" ng-controller="MyListCtrl">
    <li ng:repeat="item in things">
        <a href="#/item/{{ item.ID }}">{{ item.title }}<br/>{{ formatDateForDisplay(item.addDate) }}</a>
    </li>
</ul> 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T16:55:01.693

我最终把这个指令放在一起：

```
angular.module('myApp.directives', []).
    directive('applyJqMobile', function() {
        return function($scope, el) {
            setTimeout(function(){$scope.$on('$viewContentLoaded', el.trigger("create"))},1);
        }
    }); 
```

然后在每个模板内部，将模板内容包装在一个 div 中并在那里应用指令，即：

```
<div ng-controller="MyController" apply-jq-mobile>
<!-- Template Content to be jQ Mobilezed -->
</div> 
```

这可行，但由于 setTimeout，加载时内容会闪烁一秒钟。我仍在研究如何摆脱闪光灯。

需要注意的是，*如果没有*setTimeout， data-role="listview" 将不会被设置样式（我猜是因为它仍然必须由 ng-repeat 填充），但是视图中的任何静态内容都*被*设置了样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:06:32.497

出于某种原因，*el.trigger("create")*对我不起作用。在查看了 angularjs-jqm-adapter 之后，我发现它使用了*el。**parent()** .trigger("create")*，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T19:34:44.137

我几乎在做同样的事情（没有 jqm 角度适配器）。这是我在重复的最后一个元素之后触发的指令：

```
Application.Directives.directive('jqmCollapsibleRepeat', function () {
  return function (scope, element, attrs) {
    if (scope.$last) {
        $(element).parent().trigger("create");
    }
  };
}); 
```

这是我使用它的部分观点：

```
<div data-role="collapsible" data-collapsed="true" data-transition="slide" ng-repeat="document in documents" jqm-collapsible-repeat>
    <h3>{{document.FileName}}</h3>
    ...
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T18:43:05.193

对我来说，这很有效：

html:

```
<ul data-role="listview" data-filter="true" data-filter-placeholder="Suchen" data-inset="true">
    <li ng-repeat="alert in alerts" li-jq-mobile>
        {{name}}
    </li>
</ul> 
```

js：

```
angular.module('alertList', [])
    .directive('liJqMobile', function() {
        return function($scope, el) {
            $scope.$on('$viewContentLoaded', el.parent().listview('refresh'));
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-14T16:58:02.257

为我工作的 jqm 页面和列表：

对于页面：

```
<div applyjqmobile data-role="page" > 
```

对于列表：

```
<li lijqmobile ng-repeat="aviso in avisos"  data-icon="false" > 
```

和指令：

```
.directive('applyJqMobile', function() {
    return function($scope, el) {
        console.log('applyJqMobile');
        $(el).hide();
        setTimeout(function(){$scope.$on('$viewContentLoaded', el.parent().trigger("create"))},1);
        $(el).show();
    }
}).directive('liJqMobile', function() {
    return function($scope, el) {
      console.log('liJqMobile');
      $(el).hide();
      setTimeout(function(){ $scope.$on('$viewContentLoaded', el.parent().listview('refresh'))},1);
      $(el).show();
    }
}) 
```

# javascript - 检查参数是否传递给 Java Script 函数

> ID：11461428
> 
> 赞同：29
> 
> 时间：2012-07-12T22:05:48.377
> 
> 标签：javascript

调用一个 JS 函数

```
alertStatement() 
```

功能定义

```
function alertStatement(link) {
    if (link) {
        alert('A');     
    }

    if (link!=null) {
        alert('B');     
    }   
} 
```

这两个语句在带有 Tomcat 的 Windows 环境中都可以正常工作，但它们都没有在生产环境（Linux 服务器）上执行它。有没有其他方法可以比较变量以使其工作？

我使用以下 javascript 代码让它工作。

```
function alertStatement(link) {
    if (link!==undefined){
        alert('A');     
    }
} 
```

所以最后 undefined 对我有用，由于某种原因，空比较不起作用

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-12T22:10:13.450

要查看参数是否具有可用值，只需检查参数是否未定义。这有两个目的。它不仅检查是否通过了某些东西，还检查它是否具有可用值：

```
function alertStatement(link) {
    if (link !== undefined) {
        // argument passed and not undefined
    } else {
        // argument not passed or undefined
    }
} 
```

有些人喜欢像这样使用 typeof：

```
function alertStatement(link) {
    if (typeof link !== "undefined") {
        // argument passed and not undefined
    } else {
        // argument not passed or undefined
    }
} 
```

`null`是一个特定的值。 `undefined`如果不通过，将会是什么。

如果您只想知道是否通过了任何内容而不关心它的值是什么，您可以使用`arguments.length`.

```
function alertStatement(link) {
    if (arguments.length) {
        // argument passed
    } else {
        // argument not passed
    }
} 
```

# file - 用于比较文本文件内容的批处理文件

> ID：11461432
> 
> 赞同：1
> 
> 时间：2012-07-12T22:06:01.470
> 
> 标签：file, batch-file, compare

我有两个包含以下数字的文本文件

```
File1
00000
11111

File2
00000
11111
22222 
```

我需要一个将file2的内容与file1的内容以及不匹配的数字进行比较的代码，在这种情况下，'22222'是file2中的唯一内容。

简而言之，我想擦除 file2 的内容并将不匹配的内容放入 file2 中。下面是我尝试过的代码，但它只是删除了 file2.xml 中的整个内容。

```
setlocal enabledelayedexpansion

for /f "tokens=1" %%a in (file1) do (type file2 | findstr /v %%a > file2)

pause 
```

底线我需要达到以下结果

```
File1
00000
11111

File2
22222 
```

请帮忙 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T23:07:28.647

我认为这是最简单最快的原生批处理解决方案

```
findstr /vixg:"File1" "File2" >"File2.new"
move /y "File2.new" "File2" 
```

请注意，我使用了`findstr /i`不区分大小写的选项。这很重要，因为[findstr 错误](https://stackoverflow.com/q/8921253/1012053)可能会导致在搜索多个文字字符串时丢失匹配项，除非使用`/i`or`/r`选项。由于您正在处理数字，因此不区分大小写的解决方法不应影响您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T03:03:28.050

这可以完成工作。它取决于使用 `findstr /m` 选项和错误级别。

它还在处理过程中写入临时文件（并清理它）。

```
 @echo off
setlocal enabledelayedexpansion
echo Stripping duplicates in file2 (%2) compared to lines in file1 (%1)

if not exist "%1" (
  echo That first file doesn't exist.
  exit /b 1
)

if not exist "%2" (
  echo That second file doesn't exist.
  exit /b 2
)

REM Create empty temporary file
echo. 2> %2.tmp

for /f "tokens=1" %%a in (%2) do (
  echo Processing %%a
  >nul call findstr /m "%%a" %1
  if errorlevel 1 (
    echo OK
    >> %2.tmp echo %%a
  ) else (
    echo Duplicate!
  )
)

echo Writing results to %2
xcopy /y /q %2.tmp %2
del /q %2.tmp 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T14:21:57.727

不同的方法：

```
@echo off
setlocal 
for /f %%i in (file1) do set %%i=%%i
for /f %%j in (file2) do if not defined %%j echo %%j 
```

它具有以下特点：
- 仅扫描每个文件**一次**
- file1 中的重复项将被有效忽略
- 您可以将 file1 加载到内存中，然后对其运行几个 file_x 进行测试。

**注意：**
我只是将唯一的数字回显到控制台，您需要更改为写入文件
假设您比较**单词并且****每行** 有一个单词
它受到**可能定义的最大变量数**的限制。我不知道那个数字是什么......我在 file1 中尝试了 20 000 行（所以定义了 20 000 个变量）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-27T06:50:59.650

这可以是解决方案之一：

```
findstr /V /G:file1.txt file2.txt 
```

# php - 首先选择最高百分比的php sql

> ID：11461434
> 
> 赞同：1
> 
> 时间：2012-07-12T22:06:14.063
> 
> 标签：php, mysql, sql

我有以下 sql，它首先根据“报告”列选择最经常出现的行

```
 $datan = mysql_query("
   SELECT *, COUNT(reported) AS ct
   FROM profile_reports
   WHERE open = '1'
   GROUP BY reported
   ORDER BY ct DESC
   LIMIT 1
 ") or die(mysql_error()); 
```

我希望我的 sql 还检查哪个“报告者”（每个都是与用户关联的数字）具有最佳百分比的有用报告，这是通过以下方式确定的：

```
((raction > 0 AND raction < 99 AND open = '0' AND reporter = 'reporter') / (reporter = 'reporter' AND open = '0')) * 100 
```

...并首先显示百分比最高的行。这有点棘手，因为没有设置初始记者。

这是一个示例表：

```
+----+----------+----------+-------+----------+
| id | reporter | reported | open  |  raction |
+----+----------+----------+-------+----------+
|  1 |       24 |    26    |  0    |  3       |
|  2 |       24 |    23    |  0    |  0       |
|  3 |       24 |    29    |  1    |          |
|  4 |       12 |    29    |  0    |  4       |
|  5 |       12 |    29    |  1    |          |
|  6 |       24 |    21    |  1    |  0       |
+----+----------+----------+-------+----------+ 
```

我希望它看到关于用户 29（列：报告）的更多报告，然后检查哪个报告用户（列：报告者）具有最佳百分比（基于上面的代码行），在这种情况下是用户 12，并且显示他们的报告

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:26:38.763

它实际上非常容易，只需将您的条件总和除以即可。为了正确获得“报告”，您需要使用内联视图来查找最高报告。

```
SELECT pr.*, 
       ( Sum(pr.raction > 0 
             AND pr.raction < 99 
             AND pr.open = '0' 
             AND pr.reported = t.reported) / Sum(pr.reported = t.reported 
                                                 AND pr.open = '0') ) * 100 AS 
       usefull 
FROM   profile_reports pr, 
       (SELECT reported 
        FROM   profile_reports 
        WHERE  open = '1' 
        GROUP  BY reported 
        ORDER  BY Count(reported) DESC 
        LIMIT  1) t 
GROUP  BY reporter 
ORDER  BY usefull DESC 
LIMIT  1 
```

[演示](http://sqlfiddle.com/#!2/c06d4/20)

输出

```
| ID | REPORTER | REPORTED | OPEN | RACTION | USEFULL |
-------------------------------------------------------
|  4 |       12 |       29 |    0 |       4 |     100 | 
```

我还没有为你做所有事情。如果除数为零，您将不得不决定该怎么做

请注意除了 MySQL 之外的所有内容，您需要使用 CASE

```
 SUM ( CASE WHEN raction > 0 AND .... THEN 1 ELSE 0 END) / .... 
```

# spring-security - Spring集成和http入站适配器，我如何提取一个主要用户？

> ID：11461436
> 
> 赞同：1
> 
> 时间：2012-07-12T22:06:23.810
> 
> 标签：spring-security, spring-integration

这是我要替换的控制器：

```
@RequestMapping("/user")
public @ResponseBody UserRsp callUserService(Principal principal) {
    String authenticatedUsername = principal.getName();
    return userService.getUser(authenticatedUsername);
} 
```

我想用映射到服务适配器的 int-http:inbound-gateway 替换它。我找不到任何关于此的文档，但我想做的是这样的：

```
<int-http:inbound-gateway
 request-channel="requests" 
reply-channel="replies" 
path="/user" 
view-name="/user" 
payload-expression="#payload.principal.name"
supported-methods="GET"/> 
```

但是 payload.principal 是我编造的。关于正确方法的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:46:03.543

假设您使用的是 Spring Security，这样的事情应该可以工作......

```
payload-expression="T(org.springframework.security.core.context.SecurityContextHolder).context.authentication.principal" 
```

# regex - 使用 boost::regex 用双反斜杠替换反斜杠，用斜杠引号替换双引号

> ID：11461440
> 
> 赞同：3
> 
> 时间：2012-07-12T22:06:37.430
> 
> 标签：regex, boost, backslash

我要努力让它发挥作用。到目前为止，这是我所拥有的，但 ça ne marche pas。

```
const std::string singleslash("\\\\\\\\");
const std::string doublequote("\\\"\"\\");
const std::string doubleslash("\\\\\\\\\\\\");
const std::string slashquote("\\\\\\\\\"\\");

std::string temp(Variables);
temp.assign(boost::regex_replace(temp,boost::regex(singleslash),doubleslash,boost::match_default));
temp.assign(boost::regex_replace(temp,boost::regex(doublequote),slashquote,boost::match_default)); 
```

有人请救救我。

**更新**似乎我没有正确使用 regex_replace 。这是一个更简单的示例，也不起作用...

```
std::string w("Watermelon");
temp.assign(boost::regex_replace(w,boost::regex("W"),"x",boost::match_all | boost::format_all));
MessageBox((HWND)Window, temp.c_str(), "temp", MB_OK); 
```

这给了我“西瓜”而不是“xatermelon”

**更新 2**使用 boost::regex 错误...这个有效

```
boost::regex pattern("W");
temp.assign(boost::regex_replace(w,pattern,std::string("x"))); 
```

**更新 3**这是最终奏效的方法

```
std::string w("Watermelon wishes backslash \\ and another backslash \\ and \"\"fatness\"\"");
temp.assign(w);

MessageBox((HWND)Window, temp.c_str(), "original", MB_OK);

const boost::regex singlebackslashpat("\\\\");
const std::string doublebackslash("\\\\\\\\");
temp.assign(boost::regex_replace(w,singlebackslashpat,doublebackslash));
MessageBox((HWND)Window, temp.c_str(), "double-backslash", MB_OK);

const boost::regex doublequotepat("\"\"");
const std::string backslashquote("\\\\\\\"");
temp.assign(boost::regex_replace(temp,doublequotepat,backslashquote));
MessageBox((HWND)Window, temp.c_str(), "temp", MB_OK); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:21:02.190

所以，我不是 boost::regex 专家，我现在没有方便地安装 Boost，但让我们一步一步地尝试解决这个问题。

**要匹配的模式**

要匹配输入中的双引号，您只需要正则表达式中的双引号（双引号在正则表达式中并不神奇），这意味着您只需要一个包含双引号的字符串。`"\""`应该没事。

要匹配输入中的反斜杠，您需要在正则表达式中使用转义的反斜杠，这意味着两个连续的反斜杠；每一个都需要在字符串文字中再次加倍。所以`"\\\\"`。[编辑：我之前输入了八个而不是四个，这是一个错误。]

**输出格式**

同样，双引号在匹配替换格式（或任何正确的术语）中并不神奇，但反斜杠是。因此，要在输出中获得两个反斜杠，字符串中需要四个，这意味着字符串文字中需要 8 个。所以：`"\\\\\\\\"`。

要获得后跟双引号的反斜杠，您的字符串需要是两个反斜杠和一个双引号，并且所有这些都需要在字符串文字中以反斜杠开头。所以：`"\\\\\""`。

[编辑添加实际代码以便于复制和粘贴：]

```
const std::string singleslash("\\\\");
const std::string doublequote("\"");
const std::string doubleslash("\\\\\\\\");
const std::string slashquote("\\\\\""); 
```

**匹配标志**

在阅读了 tofutim 的更新后，我试图查找`match_all`并没有找到它的文档。但是，它确实似乎是一个可能的匹配标志值，并且定义它的头文件旁边有以下神秘的注释：“即使设置了 match_any，也必须找到整个输入”。附加的同样神秘的评论`match_any`是“不在乎我们匹配什么”。我不确定这意味着什么，似乎这些标志已被弃用或其他什么，但无论如何你可能不想使用它们。

（在快速查看源代码之后，我认为`match_all`只有在输入结束时才接受匹配。因此，您可以尝试替换`n`而不是`W`在修改后的测试用例中，看看是否有效。或者，也许我错过了一些东西，它必须匹配整个输入，你可以通过替换`Watermelon`而不是`W`or来检查`n`。或者你可以不打扰，如果你碰巧对此不好奇。）

试一试，然后报告...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:23:54.067

我在这里没有任何提升，但单（反）斜杠必须在正则表达式中写为 \\ ，因此 C++ 字符串文字是四个反斜杠。替换字符串必须转义并再次在 c++ 中，所以它的八个反斜杠。

正则表达式中的双引号不能被转义，所以它是“”，而在 c++ 中是\“\”。替换必须再次被转义，所以它的 \\"，当然在 c++ 中，所以它是 \\\\"。

根据您的更新 3，模式和替换字符串必须像这样初始化：

```
const std::string singleslashpat("\\\\");
const std::string doublequotepat("\"\"");
const std::string doubleslash("\\\\\\\\");
const std::string slashquote("\\\\\""); 
```

# javascript - 请求内容而不重新加载页面

> ID：11461442
> 
> 赞同：-13
> 
> 时间：2012-07-12T22:06:39.440
> 
> 标签：javascript, jquery, html, ajax, optgroup

我想使用一个`select`元素来移动查看我的网站。以下是`select`选项。

**HTML：**

```
<select name="select-choice-8" id="select-choice-nc">
        <optgroup label="News">
            <option value="feature">Fea</option>
            <option value="current">Current</option>
            <option value="research">Research</option>
        </optgroup>

        <optgroup label="Archive">
            <option value="archive">Archive</option>
        </optgroup>

        <optgroup label="Video">
            <option value="">Video</option>
        </optgroup>

        <optgroup label="Submit">
            <option value="">Story</option>
            <option value="">Event</option>
        </optgroup>
    </select> 
```

我想使用 JavaScript / jQuery 根据用户选择的内容执行一些 AJAX 调用，以避免重新加载整个页面（例如，用返回的 AJAX 内容填充容器）。

我需要一些想法或例子来解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:41:39.093

我对 jQuery 不是很熟悉，但你可以找到正确的语法。这个想法只是根据您选择的选项获取适当的 HTML。也就是它的对应值。

考虑 testHTML：

```
<div id="News"></div>
<div id="Archive"></div>
<div id="Video"></div> 
```

和 JavaScript：

```
$.each("option").click(function() {
    var label = $(this).parent.label;
    var elementToUpdate = $( "#" + label ); // one of the divs in TestHTML
    var value = (this).value;
    var url = "http://mysite.php?id=" + value;
    var newHTML = $.ajax({ url: url }).done(function(){
        elementToUpdate.replaceWith( newHTML );
    });
}); 
```

甚至可能：

```
<div id="selectedContent"></div> 
```

和

```
$.each("option").click(function() {
    var elementToUpdate = $( "#selectedContent" ); // one of the divs in TestHTML
    var value = (this).value;
    var url = "http://mysite.php?id=" + value;
    var newHTML = $.ajax({ url: url }).done(function(){
        elementToUpdate.replaceWith( newHTML );
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:55:45.137

试试这个：[http](http://shaquin.tk/experiments/select-ajax2.html) ://shaquin.tk/experiments/select-ajax2.html 。

**HTML：**

```
<select name="select-choice" id="select-choice">
    <optgroup label="News">
        <option value="feature">Feature</option>
        <option value="current">Current</option>
        <option value="research">Research</option>
    </optgroup>
    <optgroup label="Archive">
        <option value="archive">Archive</option>
    </optgroup>
    <optgroup label="Video">
        <option value="video">Video</option>
    </optgroup>
    <optgroup label="Submit">
        <option value="story">Story</option>
        <option value="event">Event</option>
    </optgroup>
</select>
<div id="article">Please select an article to view.</div> 
```

**JS：**

```
var origText = '';
$(document).ready(function() {
    origText = $('#article').text();
    $('select').on('change', changed);
});
function changed(e) {
    $('#article').html('<span class="loading">Loading...</span>');
    $('#article').load('content.php', $.param({0: e.target.value, 1: origText}));
} 
```

**PHP：**

```
<?php
$selected = $_GET[0];
$articles = array(
        '' => $_GET[1],
        'feature' => 'Feature article goes here',
        'current' => '<p>Lorem ipsum dolor sit amet, denique laetare ... se est Apollonius.</p>',
        'research' => 'You selected <code>research</code>',
        'archive' => 'Archives',
        'video' => '<div style="font-size:48pt;font-weight:bold;font-style:italic;background:red;text-align:center;padding:20px;margin:10px;border-radius:20px;-moz-border-radius:20px;-webkit-border-radius:20px;">Video</div>',
        'story' => 'Submit a story',
        'event' => 'Submit an event'
    );
$article = $articles[$selected];
echo $article;
?> 
```

**CSS（可选）：**

```
body {
    background: #ccc;
    text-align: center
}
#article {
    padding: 30px;
    margin: 20px;
    text-align: left;
    background: #eee;
    text-shadow: 1px 1px #fff;
    text-shadow: 0 0 3px #fff;
    border-radius: 8px;
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
}
.loading {
    text-transform: uppercase;
    font-size: 15pt;
    text-shadow: 1px 1px #f00, 1px 2px #f00, 2px 2px #f00, 3px 3px #f00;
} 
```

在 PHP 中，您可能希望从数据库中获取文本：[PHP - MySQLi](http://php.net/mysqli)。

# vim - 更改 VIM/GVIM 消息窗口行为

> ID：11461443
> 
> 赞同：0
> 
> 时间：2012-07-12T22:06:44.717
> 
> 标签：vim

例如，当我键入 :!ls 并查看结果时，它会向上移动当前窗口以腾出空间。

我一直对整个内容如何上下移动感到恼火。我想知道是否有办法在 vim 或 gvim 7.3 中解决这个问题 - 就像在 Emacs 中一样。

例如，如果我有 1~30 行，并且消息区域占用 5 行，我希望我的代码窗口显示第 1~25 行而不是 6~30 行。我认为这就是 Emacs 所做的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:57:11.737

据我所知，这在 vim 中是不可能的。但是，有一些方法可以绕过它。您可以使用`screen`或[tmux](http://tmux.sourceforge.net/)并使用它来创建一个较低的窗口来执行命令。您还可以查看[conque](https://github.com/rson/vim-conque)，它在 vim 中模拟终端。

# c# - Mono on debian 错误 CS0234

> ID：11461446
> 
> 赞同：0
> 
> 时间：2012-07-12T22:06:48.397
> 
> 标签：c#, mono

我有一个 debian 服务器，我将它的 mac 地址保存在 /usr 文件夹中的一个 txt 文件中。

每次我启动机器时，我尝试执行的脚本都应该检查当前的 mac 地址并将其与保存在 txt 文件中的地址进行比较。如果它们不匹配，则机器应关闭。

该代码适用于 Windows，但我必须使其适用于 debian。所以我安装了单声道（apt-get install mono-complete），创建了包含代码的 .cs 文件并将其传输到 debian 机器上。

当我运行 mcs shutdown.cs（shutdown 是我创建的文件的名称）命令时，我收到此错误：

> CS0234：命名空间“System.Net”中不存在类型或命名空间名称“NetworkInformation”。您是否缺少程序集参考？**

如何解决？

```
using System.Net.NetworkInformation;

      static void Main(string[] args)
      {
          string newmc = Convert.ToString(GetMacAddress()); //current mac address
          string mc = File.ReadAllText(@"/usr/mc.txt"); //mac address saved on a       txt file previously
          if (newmc != mc)   //shutdown if the mac addresses dont match
          {
              System.Diagnostics.Process.Start("shutdown.exe", "-s -t 0"); 
           }
      }
      static string GetMacAddress()
      {
          string macAddresses = "";
          foreach (NetworkInterface nic in NetworkInterface.GetAllNetworkInterfaces())
          {
             if (nic.NetworkInterfaceType != NetworkInterfaceType.Ethernet) continue;
             if (nic.OperationalStatus == OperationalStatus.Up)
             {
                macAddresses += nic.GetPhysicalAddress().ToString();
                break;
             }
           }
         return macAddresses;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:04:10.307

System.Net.NetworkInformation.NetworkInterface class is in System.dll according to this: [http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface) . Did you try adding a reference to System.dll when compiling? I believe it's the "-r" argument to mcs.

BTW, what version of Mono are you using. Debian is famous for shipping very old versions of Mono in the "stable" flavour. Mono 2.10.x or higher is recommended, nowadays, as stable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T06:59:23.967

System.Net.NetworkInformation.NetworkInterface was introduced .NET 2.0\. You need to target .NET 2.0 profile or newer if you want to use it.

If you are compiling using command line compiler use gmcs or dmcs to compile your project. If you are using MonoDevelop you need to set in project setting appropriate framework version.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T22:24:42.063

This is how you might do this in Ruby.

```
begin
  theMac = File.read("/usr/path/to/text/file.txt")

rescue Exception => e
  puts e.message
  puts e.backtrace.inspect
end

response = `ifconfig eth0`
mac = response.match(/HWaddr (.*?):(.*?):(.*?):(.*?):(.*?):(.*?) /)

if theMac == mac[0] then `sudo shutdown -h now`; end

f = File.open("/usr/path/to/text/file.txt", "w")
f.write(mac[0])
f.close() 
```

# ruby-on-rails - 这里的新手：同一张表的冲突关联。has_many：发票，has_many：发票，通过：user_invoice_viewers

> ID：11461448
> 
> 赞同：0
> 
> 时间：2012-07-12T22:06:52.853
> 
> 标签：ruby-on-rails, associations, conflict, ownership

这在这里看起来很基本，但实际上我发现用 Rails 定义这个场景有点苛刻......

也许你们中的任何人都可以提供一些指导？

所以我有三个表，用户、发票和 User_Invoice_Viewers（这些基本上映射了可以查看发票的用户）

现在我的模型：

用户.rb：

```
has_many :invoices
has_many :user_invoice_viewers
has_many :invoices, through :user_invoice_viewers 
```

发票.rb

```
belongs_to user_invoice_viewers
belongs_to :user 
```

User_Invoice_Viewers.rb

```
belongs_to :users
belongs_to :invoices 
```

现在这似乎是错误的......我在用户模型上重复 has_many :invoices，所以我预计执行时会发生冲突：User.invoices ...

什么是最好的解决方案？我曾想过将其全部放在 user_invoice 表上，但由于我希望拥有比查看者更多的所有者，出于性能原因，我决定在发票与其所有者之间建立直接依赖关系......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T03:06:02.667

我会考虑在关联上使用 :class_name 选项，以便这两个关系以不同的方式命名。像这样的东西：

```
class User < ActiveRecord::Base

  has_many :invoices
  has_many :user_invoice_viewers
  has_many :viewable_invoices, through :user_invoice_viewers, :class_name => "Invoice"

  ...

end 
```

# ruby-on-rails - 按 Rails 列表中的日期属性排序

> ID：11461453
> 
> 赞同：1
> 
> 时间：2012-07-12T22:07:10.840
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, erb

我的应用程序中有一个表格，该表格当前按创建顺序显示项目。我希望他们按时间顺序按我的日期属性 (<%= o.dateg %>) 排序。什么是正确的轨道方式来做到这一点？

控制器：

```
def show
 @occasion = Occasion.find(params[:id])
end 
```

看法：

```
 <% @user.occasions.each do |o| %>
          <td><%= o.name %></td>
          <td><%= o.pname %></td>
          <td><%= o.dateg %></td> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:14:44.380

你一定有那个，对吧？

```
class User < ActiveRecord::Base
  has_many :occassions
end 
```

您可以将其更改`has_many`为：

```
has_many :occasions, order: 'dateg desc' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T22:22:43.987

在视图中，您可以使用`sort`例如

`@user.occasions.sort {|a,b| b.dateg <=> a.dateg }.each do |o|`

（这将按时间倒序排列）

但是，您确实应该在模型中而不是在视图中执行此操作，命名范围可以正常工作：

```
class User < ActiveRecord::Base
  has_many :occasions
  scope :recent_occasions, order('dateg desc')
end 
```

然后使用

`@user.recent_occasions.each do |o|`

# css - css子选择器选择最后一个div

> ID：11461455
> 
> 赞同：2
> 
> 时间：2012-07-12T22:07:33.203
> 
> 标签：css

```
<body>
    <div>content 1</div>
    <div>content 2</div>
    <div>content 3</div>
</body> 
```

如何在不使用任何 id 或类的情况下选择最后一个标签。我已经尝试过：

```
body:last-child {
        clear: both;
        background-color:red;
} 
```

请帮忙

谢谢

但这是css3，所以浏览器（ipad safari）无法识别它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T22:09:36.863

`body:last-child`选择一个body标签，它是其父级的最后一个子级，尝试

```
body > :last-child 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T22:09:30.503

使用[子选择器](https://developer.mozilla.org/en/CSS/Child_selectors)( `>`)：

```
body > :last-child {
    clear: both;
    background-color:red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T22:52:21.703

XXXX:last-child 表示 XXXX 是最后一个孩子。所以：

```
table tr:last-child { ... } 
```

应用于*表*的最后一个*tr*。

 *在你的情况下：

```
body > :last-child { ... } 
```

之所以有效，是因为*>*为您选择 body 的孩子，然后您使用*:last-child选择最后一个**

# c# - CRM LINQ 复合连接“不支持方法‘连接’”错误

> ID：11461457
> 
> 赞同：2
> 
> 时间：2012-07-12T22:07:35.397
> 
> 标签：c#, linq, dynamics-crm, crm

我收到“不支持“加入”方法”错误...有趣的是，我只是将第一个 LINQ 转换为第二个版本，但它不起作用...

我想要的是LINQ版本＃3，但它也不起作用......

* * *

这有效

```
var query_join9 = from s in orgSvcContext.CreateQuery(ServiceAppointment.EntityLogicalName)
join b in orgSvcContext.CreateQuery(bh_product.EntityLogicalName)
on s["bh_contract"] equals b["bh_contract"]
where ((EntityReference)s["bh_contract"]).Id == Guid.Parse("09BDD5A9-BBAF-E111-A06E-0050568B1372")
select new
{
Events = s,
Products = b
}; 
```

这不

```
var query_join9 = from s in orgSvcContext.CreateQuery(ServiceAppointment.EntityLogicalName)
join b in orgSvcContext.CreateQuery(bh_product.EntityLogicalName)
on new { contractid = s["bh_contract"] }
equals new { contractid = b["bh_contract"] }
where ((EntityReference)s["bh_contract"]).Id == Guid.Parse("09BDD5A9-BBAF-E111-A06E-0050568B1372")
select new
{
Events = s,
Products = b
}; 
```

此外，这不是，这是一个复合连接，也是我真正的目标

```
var query_join9 = from s in orgSvcContext.CreateQuery(ServiceAppointment.EntityLogicalName)
join b in orgSvcContext.CreateQuery(bh_product.EntityLogicalName)
on new { contractid = s["bh_contract"], serviceid = s["serviceid"] }
equals new { contractid = b["bh_contract"], serviceid = s["serviceid"] }
where ((EntityReference)s["bh_contract"]).Id == Guid.Parse("09BDD5A9-BBAF-E111-A06E-0050568B1372")
select new
{
Events = s,
Products = b
}; 
```

我尝试了早期绑定，但仍然无法正常工作......

```
var query_join9 = from s in orgSvcContext.CreateQuery<ServiceAppointment>()
join b in orgSvcContext.CreateQuery<bh_product>()
on new { foo = s.bh_contract.Id }
equals new { foo = b.bh_Contract.Id }
where s.bh_contract.Id == Guid.Parse("09BDD5A9-BBAF-E111-A06E-0050568B1372")
select new
{
Events = s,
Products = b
}; 
```

仍然不工作

```
var query_join9 = from s in orgSvcContext.CreateQuery<ServiceAppointment>()
join b in orgSvcContext.CreateQuery<bh_product>()
on new { s.bh_contract.Id, s.ServiceId }
equals new { b.bh_Contract.Id, ServiceId = b.bh_Service }
where s.bh_contract.Id == Guid.Parse("09BDD5A9-BBAF-E111-A06E-0050568B1372")
select new
{
Events = s,
Products = b
}; 
```

* * *

但我只是想在这里做示例[How to do joins in LINQ on multiple fields in single join](https://stackoverflow.com/questions/373541/how-to-do-joins-in-linq-on-multiple-fields-in-single-join)

我错过了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T15:17:49.603

您看过[MSDN 示例](http://msdn.microsoft.com/en-us/library/gg509017.aspx#DoubleJoin)吗？那里有一些多列连接示例：

```
using (ServiceContext svcContext = new ServiceContext(_serviceProxy))
{
 var list_join = (from a in svcContext.AccountSet
                  join c in svcContext.ContactSet
                  on a.PrimaryContactId.Id equals c.ContactId
                  where a.Name == "Contoso Ltd" &&     <<--- multiple join here
                  a.Address1_Name == "Contoso Pharmaceuticals"
                  select a).ToList();
 foreach (var c in list_join)
 {
  System.Console.WriteLine("Account " + list_join[0].Name
      + " and it's primary contact "
      + list_join[0].PrimaryContactId.Id);
 }
} 
```

[这个其他线程](https://stackoverflow.com/questions/11441575/c-sharp-crm-queryexpression-linkentity-join-via-multiple-field/11454892#11454892)可能是相关的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T01:24:55.537

虽然我不完全确定您使用的是哪种 CRM，但我认为您误解了一些东西。为了使 LINQ 查询正常工作，需要有一个底层数据源的 LINQ 提供程序——负责将例如、运算符使用等链`Join`转换`Where`为数据源的查询 API 的代码位. 这可能是 SQL、一些自定义查询语言或一些方法链。

两个 LINQ 提供程序（例如，一个用于`LINQ to DataSet`和您自己编写的一些自定义提供程序）不必支持相同的方法和其他代码。LINQ 提供程序支持的 LINQ 方法（和/或其他嵌入式语句）的精确子集取决于其实现。

这样看，您使用的 LINQ 提供程序似乎不理解使用多个字段的连接的标准语法，或者似乎根本不理解匿名类型的用法，这并不奇怪。

我的建议是搜索提供的 LINQ 提供程序的文档以查看它支持哪些查询操作（也许有关于不支持这种特定查询模式的注释）。如果做不到这一点，您将不得不求助于某种其他查询——一个不涉及等值连接的查询。也许您最好的选择是分别执行连接，然后将两个结果组相交。这实际上取决于案件的具体情况。

# android - Android 应用程序总是崩溃

> ID：11461467
> 
> 赞同：0
> 
> 时间：2012-07-12T22:08:25.930
> 
> 标签：android, admob, ads

谁能告诉我有什么问题？该应用程序总是在设备 SE xperia X10 上崩溃。也许这就是我嵌入 ADMOB 的方式。它甚至没有显示一秒钟。请问有什么线索吗？XML 和清单中的一切似乎都很好。谢谢

```
package com.taiic.template.admob;

import com.google.ads.AdRequest;
import com.google.ads.AdView;
import java.io.IOException;
import java.util.*;

import android.widget.*;
import android.view.View;
import android.view.View.OnClickListener;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.location.*;
import android.content.*;

import android.app.Activity;
import android.os.Bundle;

public class adMain extends Activity {

    Button addressButton;
    TextView locationText;
    TextView addressText;
    Location currentLocation;
    double currentLatitude;
    double currentLongitude;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    addressText = (TextView)findViewById(R.id.addressText);
    locationText = (TextView)findViewById(R.id.locationText);
    addressButton = (Button)findViewById(R.id.addressButton);

    this.addressText.setText("ready");

    LocationManager locationManager = 
        (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);

    LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            updateLocation(location);
        }
        public void onStatusChanged(
                String provider, int status, Bundle extras) {}
        public void onProviderEnabled(String provider) {}
        public void onProviderDisabled(String provider) {}
    };

    locationManager.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

    this.addressButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v){
            getAddress();
        }
    });
}

void getAddress(){
    try{
        Geocoder gcd = new Geocoder(this, Locale.getDefault());
        List<Address> addresses = 
            gcd.getFromLocation(currentLatitude, currentLongitude,100);
        if (addresses.size() > 0) {
            StringBuilder result = new StringBuilder();
            for(int i = 0; i < addresses.size(); i++){
                Address address =  addresses.get(i);
                int maxIndex = address.getMaxAddressLineIndex();
                for (int x = 0; x <= maxIndex; x++ ){
                    result.append(address.getAddressLine(x));
                    result.append(",");
                }               
                result.append(address.getLocality());
                result.append(",");
                result.append(address.getPostalCode());
                result.append("\n\n");
            }
            addressText.setText(result.toString());
        }
    }
    catch(IOException ex){
        addressText.setText(ex.getMessage().toString());
    }
}

void updateLocation(Location location){
    currentLocation = location;
    currentLatitude = currentLocation.getLatitude();
    currentLongitude = currentLocation.getLongitude();
    locationText.setText(currentLatitude + ", " + currentLongitude);
}

AdView layout = (AdView)this.findViewById(R.id.adView);
AdRequest adRequest = new AdRequest();
adRequest.setTesting(true);
layout.loadAd(adRequest); 
} 
```

这是目录

```
07-13 00:10:59.451: D/AndroidRuntime(3735): Shutting down VM
07-13 00:10:59.451: W/dalvikvm(3735): threadid=1: thread exiting with uncaught exception (group=0x4001d560)
07-13 00:10:59.461: E/AndroidRuntime(3735): FATAL EXCEPTION: main
07-13 00:10:59.461: E/AndroidRuntime(3735): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.taiic.template.admob/com.taiic.template.admob.adMain}: java.lang.NullPointerException
07-13 00:10:59.461: E/AndroidRuntime(3735):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1581)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at android.app.ActivityThread.access$1500(ActivityThread.java:121)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at android.os.Looper.loop(Looper.java:123)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at android.app.ActivityThread.main(ActivityThread.java:3701)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at java.lang.reflect.Method.invokeNative(Native Method)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at java.lang.reflect.Method.invoke(Method.java:507)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:862)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:620)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at dalvik.system.NativeStart.main(Native Method)
07-13 00:10:59.461: E/AndroidRuntime(3735): Caused by: java.lang.NullPointerException
07-13 00:10:59.461: E/AndroidRuntime(3735):     at android.app.Activity.findViewById(Activity.java:1647)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at com.taiic.template.admob.adMain.<init>(adMain.java:102)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at java.lang.Class.newInstanceImpl(Native Method)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at java.lang.Class.newInstance(Class.java:1409)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
07-13 00:10:59.461: E/AndroidRuntime(3735):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
07-13 00:10:59.461: E/AndroidRuntime(3735):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:34:31.210

日志很清楚出了什么问题：

```
Caused by: java.lang.NullPointerException
at android.app.Activity.findViewById(Activity.java:1647)
at com.taiic.template.admob.adMain.<init>(adMain.java:102) 
```

在第 102 行的 class`adMain`中，您试图膨胀活动布局中不存在的视图：

```
AdView layout = (AdView)this.findViewById(R.id.adView); 
```

所以问题是：您是否实际上将`AdView`视图（带有 id ）添加到您设置为活动内容视图`android:id="@+id/adView"`的文件中定义的布局？`main.xml`该错误表明您没有。

# javascript - 使用 javascript / jQuery 使用 JSON 数据更改图像源

> ID：11461471
> 
> 赞同：0
> 
> 时间：2012-07-12T22:08:46.617
> 
> 标签：javascript, jquery, json

我尝试使用从另一个页面发送过来的 JSON 数据更改一组图像的来源，JSON 数据如下所示：

```
var jsondata = {
    "images": [
    {"src": "images/bgset.jpg"},
    {"src": "images/ar006.png"},
    {"src": "images/br006.png"},
    {"src": "images/cr006.png"},
    {"src": "images/dr006.png"},
    {"src": "images/er001.png"},
    {"src": "images/tr004.png"},
    {"src": "images/tr011.png"}
]} 
```

我试图`src`用`.imageset`. 我也很厌倦想办法把第一个留在 JSON 数据`{"src": "images/bgset.jpg"}`中。我迷路了，不知道如何解决这个问题。我什至不确定如何从这些数据中获取值！

**更新**

感谢您的回答！有了我目前创建的答案：

```
var jsonStr = location.search.substring(1).split('=');
var obj = JSON.parse(unescape(jsonStr[1]));
var jsondata = JSON.parse(obj.jsondata);
var aa = jsondata.images.length;
var ab = jsondata.images.slice(1, aa); // this part removes the first src
var ac = $(".imageset");
// here is the confusion part i found this will go through the set
for( var i = 0; i < aa; i++ ) {              
}
// and this will go through each class
ac.each( function() {
}) 
```

我如何加入这两个代码可以为每个班级放置一个图像 src？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:17:32.783

jQuery 有一些非常好的功能来做你想做的事。尝试在这里查看它们：http: [//api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

那应该教如何用你的代码“读取”JSON。

现在对于图像源，也使用 jQuery。您可以使用

```
$(".imageset").attr("src", jsondata[0].src); 
```

例如。

如果您想使用 imageset 类遍历所有图像，您可以使用 for/foreach 循环（谷歌它，这很容易）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:20:41.763

如果您确实打算跳过第一个图像源，请像这样获取相关源：

```
var relevantSources = jsondata.images.shift(); // All except the first one. 
```

接下来，您将希望具有 .imageset 类的图像元素，如下所示：

```
var relevantImageElements = document.getElementsByClassName(".imageset"); // Or jQuery $(".imagesets"); 
```

最后，只需遍历它们，假设顺序已经可以了。

```
var ln = Math.min( relevantSources.length, relevantImageElements.length;
for( var i = 0; i < ln; i++ ) {
    relevantImageElements[ i ].src = relevantSources[ i ];
} 
```

这有用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:15:51.563

好的，这是它的工作答案，再次感谢@EricG 和@donnywals 的答案如果没有你们就无法做到。

```
var jsonStr = location.search.substring(1).split('=');
var obj = JSON.parse(unescape(jsonStr[1]));
var jsondata = JSON.parse(obj.jsondata);
var aa = jsondata.images.length;
var ab = jsondata.images.slice(1, aa);
var i = 0;
$(".imageset").each(function(i) {
    $(this).attr("src", ab[i++].src);
}); 
```

# plugins - 设计一个每层都是插件组件的n层架构应用程序是否正确？

> ID：11461472
> 
> 赞同：1
> 
> 时间：2012-07-12T22:08:57.477
> 
> 标签：plugins, n-tier-architecture

我想创建一个具有 n 层架构的应用程序。我想把每一层设计成一个插件组件。

设计一个每层都是插件组件的n层架构应用程序是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:28:07.330

这不是我对 n 层应用程序的看法——对我来说，它听起来更像是一种可插拔架构。

通常 n 层架构将层定义为物理层——因此您的客户端是一台物理机器，业务逻辑在第二台，数据存储在第三台。

如果设计得当，您可以在每一层上插入组件，但插件本身的存在并不构成 n 层应用程序。

# jquery - jQuery(function($) 和 $(function()) 有什么区别？

> ID：11461478
> 
> 赞同：2
> 
> 时间：2012-07-12T22:09:47.947
> 
> 标签：jquery, function, styles

我正在查看一段我没有编写的代码，其中包含：

```
jQuery(function($) {

$('#interaction').find('.item').hover(function() {
    var $this = $(this);
    $this.addClass('hover');
},
function() {
    var $this = $(this);
    $this.removeClass('hover');
})
.click(function() {
    var $this = $(this);
    var thisID = $this.attr('id');
    //hide all visiable detail pages
    resetpage($('.item-detail:visible'));

... etc. 
```

通常我会编写代码在 $(document).ready({ ... }); 内部运行 例如：

```
$(document).ready({

    .click(function() {
        var $this = $(this);
        var thisID = $this.attr('id');
        //hide all visiable detail pages
        resetpage($('.item-detail:visible'));
        ... etc.

    }
}); 
```

这两种编写函数的方式有什么区别（如果有的话），或者我可以互换使用它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T22:11:03.770

您可以互换使用它们。`$`是 的简写`jQuery`,`$(function(){..})`是 的简写`$(document).ready(function(){ });`

有时人们使用该符号是`jQuery(function($){ });`因为该`$`符号被另一个库使用，或者与`PHP`服务器上的冲突。

# ms-access - 检查 Combobox RowSource 是否有效

> ID：11461480
> 
> 赞同：2
> 
> 时间：2012-07-12T22:10:06.883
> 
> 标签：ms-access, ms-access-2007

[这与这个问题](https://stackoverflow.com/questions/9586641/subform-combobox-rowsource-update-how-update-drop-down-list)有些相关，但我希望可能有一个比定义用户定义函数更优雅/简单的解决方案。

### 背景

本质上，这是一个常见问题：我需要动态修改 Access 表单上组合框控件的 RowSource 查询。不同之处在于，结果查询可能在执行时抛出异常。这是因为查询的源表存在于不同的数据库文件中，该文件是动态定义的，可能不存在，或者即使文件存在，所需的表或列也可能不存在。

理想情况下，我希望能够在分配时发现这个问题，这样组合框将被禁用，用户无法调用无效查询，从而让最终用户知道该字段没有可用数据。

例如，我想要这样的东西：

```
Private Sub UpdateComboRows(src as String)
On Error Goto InvalidQueryError
    cmbBox.RowSource = "SELECT [colName] FROM [dBase III;DATABASE=K:\" & src & "].[tblName];"
    ' Something here to invoke RowSource query and throw error
    cmbBox.Enabled = True
Exit Sub

InvalidQueryError:
    cmbBox.RowSource = ""
    cmbBox.Enabled = False
End Sub 
```

或者使用 if-then 语句的东西。

### 问题

是否有任何“流畅”的方法，或者我是否坚持尝试填充虚拟 DAO 记录集？除了 Dropdown 事件之外，还有什么方法可以调用 Combobox RowSource 查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:12:28.623

为什么不退后一步，先用 Dir 检查数据库是否存在，然后检查该列是否存在于函数中。很粗略。

```
Function IsDBOk() As Boolean
   On Error GoTo Err_Trap

   ''The default for boolean is false, so 
   ''IsDBOK=False at this point

   sFile=Dir("K:\" & src)

   If sFile<>"" Then
      Dim rs As DAO.Recordset
      Set rs = CurrentDB.OpenRecordset("SELECT [colName] " _
          & "FROM [dBase III;DATABASE=K:\" _
          & src & "].[tblName];")
      If Not rs.Eof() Then
          ''The selection is only okay if the recordset 
          ''contains records, however, you could return
          ''a different error for each problem
          ''file missing, column missing, empty recordset
          IsDBOk = True
      End If
   End If

   Exit Function

   Err_Trap:
     ''A missing column will give error 3061
     ''IsDBOk is already set to false
End Function 
```

# objective-c - 可可表视图的奇怪（对我来说）问题

> ID：11461488
> 
> 赞同：1
> 
> 时间：2012-07-12T22:11:38.430
> 
> 标签：objective-c, cocoa, tableview

我正在构建一个小应用程序来学习 Objective-C。我已经尝试阅读一些书籍，认为只是“跳入”将是我们学习的最佳方式。

不过现在我有点卡住了，我看过苹果的一些例子（我相信我或多或少地在关注它们）。无论如何，我的问题是这样的：

当我创建一个包含表格的窗口时，给窗口一些数据，然后打开窗口，我有数据但没有 tableView（可能是因为在我打开窗口之前没有加载 NIB？）。当我打开窗口时，我的 numberOfRowsInTableView 函数似乎无法找到我的数据。

我已经包含了 .h 和 .m 文件的完整代码，希望你能看到问题所在..（可能真的很愚蠢）

```
//
//  MainWindow.h
//  Practice App
//
//

#import <Cocoa/Cocoa.h>
#import "mvmUser.h"

@interface FriendStreamController : NSWindowController<NSTableViewDelegate, NSTableViewDataSource>

@property (assign) IBOutlet NSTableView *myTableView;

@property (nonatomic, retain) mvmUser *user;
@property (nonatomic, retain) NSArray *activityData;

-(void)setUserObject:(mvmUser *)user;
-(void)createFriendstream;

@end 
```

和

```
//
//  MainWindow.m
//  Practice App
//
//

#import "FriendStreamController.h"

@interface FriendStreamController ()

@end

@implementation FriendStreamController

@synthesize myTableView = _myTableView;
@synthesize user = _user;
@synthesize activityData = _activityData;

-(NSString *)windowNibName {
    return @"FriendStreamController";
}

- (id)initWithWindow:(NSWindow *)window
{   
    return self;

    NSWindow *selfWindow = self.window;
    [selfWindow makeKeyAndOrderFront:self];
}

- (void)windowDidLoad
{
    [super windowDidLoad];

    // Implement this method to handle any initialization after your window controller's window has been loaded from its nib file.

}

-(void)createFriendstream{
    [self.myTableView reloadData];
}

-(void) setUserObject:(mvmUser *)user {
    self.user = user;
    _activityData = [[NSArray alloc]initWithArray:self.user.apiResponse copyItems:YES];
    NSLog(@"data 1st: %@, %@", _activityData, _myTableView);
}

-(NSInteger) numberOfRowsInTableView:(NSTableView *)tableView {
    NSLog(@"data 2nd: %@, %@", _activityData, _myTableView);
    int numRows = [_activityData count];
    return [_activityData count];
}

- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    NSLog(@"table view stuff");
    // group the model (activityData)
    NSDictionary *dictionary = [_activityData objectAtIndex:row];

    NSString *identifier = [tableColumn identifier];

    if([identifier isEqualToString:@"ActivityCell"]) {
        NSTableCellView *cellView = [tableView makeViewWithIdentifier:identifier owner:self];

        cellView.textField = [dictionary objectForKey:@"username"];
        return cellView;
    }

    return nil;
}

@end 
```

我的 NSLOG 给了我：

```
2012-07-13 00:07:14.550 Practice App[13571:f03] data 1st: (
        {
        "activity_id" = 3122267;
        "activity_name" = "add_media";
        avatar = "http://a1.media.mobyhub.com/avatar/41d3b6664cb8d8a55148364f4833c89e_60px.jpg";
        "created_on" = "2012-07-12 23:37:50";
        id = 3122267;
        moby =         {
            "content_type" = photo;
            description = "";
            id = 13271224;
            media = "http://a1.img.mobypicture.com/69f025622e87b1265d55395d877f1d83_view.jpg";
            "short_url" = "http://moby.to/f8asii";
            thumbnail = "http://a1.img.mobypicture.com/69f025622e87b1265d55395d877f1d83_square.jpg";
            title = "@robertpaul @Paulpridephoto @mattebox @eastbayjay Set this to on. Preset URL saved in image EXIF data.";
            url = "http://www.mobypicture.com/user/simon_harper/view/13271224";
        };
        "name_first" = Simon;
        "name_last" = Harper;
        "user_id" = 454519;
        username = "simon_harper";
    },
        {
        "activity_id" = 3119852;
        "activity_name" = "add_media";
        avatar = "http://a0.media.mobyhub.com/avatar/c2b0b2914f2738a7ded180fee123ad91_60px.jpg";
        "created_on" = "2012-07-12 20:07:59";
        id = 3119852;
        moby =         {
            "content_type" = photo;
            description = "";
            id = 13269679;
            media = "http://a0.img.mobypicture.com/d86fc26985b5cbf34b3a0aa3d3b40d5c_view.jpg";
            "short_url" = "http://moby.to/tphlja";
            thumbnail = "http://a0.img.mobypicture.com/d86fc26985b5cbf34b3a0aa3d3b40d5c_square.jpg";
            title = "Iemand een idee hoe ik met dit bedrijf in contact kan komen? Formulier werkt niet, maar kan geen vragen stellen @nrc ";
            url = "http://www.mobypicture.com/user/Josk/view/13269679";
        };
        "name_first" = Jos;
        "name_last" = Kok;
        "user_id" = 2540;
        username = Josk;
    },
        {
        "activity_id" = 3118440;
        "activity_name" = "add_media";
        avatar = "http://a0.media.mobyhub.com/avatar/7e4bcc3f625b3d50ed49bd32eb65eafc_60px.jpg";
        "created_on" = "2012-07-12 17:55:26";
        id = 3118440;
        moby =         {
            "content_type" = photo;
            description = "";
            id = 13268834;
            media = "http://a3.img.mobypicture.com/ebfc0300aeb3bd54f1956cb22eea8cbb_view.jpg";
            "short_url" = "http://moby.to/sg62tw";
            thumbnail = "http://a3.img.mobypicture.com/ebfc0300aeb3bd54f1956cb22eea8cbb_square.jpg";
            title = "Opel Ampera op de A9 vlakbij haarlem. Best mooie auto eigenlijk. Hoeveel rijd hij nu echt elektrisch op een volle accu?";
            url = "http://www.mobypicture.com/user/vincente/view/13268834";
        };
        "name_first" = vincent;
        "name_last" = everts;
        "user_id" = 2487;
        username = vincente;
    },
        {
        "activity_id" = 3118321;
        "activity_name" = "add_media";
        avatar = "http://a0.media.mobyhub.com/avatar/402bff232d440ecf6a4a037830eb2780_60px.jpg";
        "created_on" = "2012-07-12 17:39:40";
        id = 3118321;
        moby =         {
            "content_type" = photo;
            description = "";
            id = 13268749;
            latlong = "52.067,4.32418";
            media = "http://a2.img.mobypicture.com/d27abd1ac8b18f406f45f8621ef0e2d7_view.jpg";
            "short_url" = "http://moby.to/3j1wie";
            thumbnail = "http://a2.img.mobypicture.com/d27abd1ac8b18f406f45f8621ef0e2d7_square.jpg";
            title = "Trots op @ChelseyWinkel die nu al haar P haalt :)";
            url = "http://www.mobypicture.com/user/Mikevanrossum/view/13268749";
        };
        "name_first" = Mike;
        "name_last" = "van Rossum";
        "user_id" = 28504056;
        username = Mikevanrossum;
    },
        {
        "activity_id" = 3117532;
        "activity_name" = "add_friend";
        avatar = "http://a1.media.mobyhub.com/avatar/f1459fef5a78c525ef60c47a706709bd_60px.jpg";
        "created_on" = "2012-07-12 16:33:49";
        id = 3117532;
        "name_first" = Berry;
        "name_last" = Helsloot;
        target =         {
            avatar = "http://a0.media.mobyhub.com/avatar/e0f6b16e645594c96a6d8693969c787d_60px.jpg";
            "name_first" = Mick;
            "name_last" = Harren;
            "user_id" = 427052;
            username = mickharren;
        };
        "user_id" = 213700;
        username = bhelsloot;
    },
        {
        "activity_id" = 3116839;
        "activity_name" = "add_media";
        avatar = "http://a0.media.mobyhub.com/avatar/601a85e2a0279875ea558835fda56aef_60px.jpg";
        "created_on" = "2012-07-12 15:23:29";
        id = 3116839;
        moby =         {
            "content_type" = photo;
            description = "";
            id = 13268001;
            media = "http://a3.img.mobypicture.com/7bf755f874955c24bfa06e247d0d11ea_view.jpg";
            "short_url" = "http://moby.to/yqg56x";
            thumbnail = "http://a3.img.mobypicture.com/7bf755f874955c24bfa06e247d0d11ea_square.jpg";
            title = "\U266c'Ice Ice Baby' - Vanilla Ice\U266a #nowplaying on #spotify http://open.spotify.com/track/3XVozq1aeqsJwpXrEZrDJ9";
            url = "http://www.mobypicture.com/user/Dryxe/view/13268001";
        };
        "name_first" = Daan;
        "name_last" = "van der Plas";
        "user_id" = 28780688;
        username = Dryxe;
    }
), (null)
2012-07-13 00:07:14.655 Practice App[13571:f03] data 2nd: (null), <NSTableView: 0x7f887b364930> 
```

希望你能提供一些帮助，会很棒。

# tomcat - Grails部署到tomcat，只有一些链接有效

> ID：11461490
> 
> 赞同：0
> 
> 时间：2012-07-12T22:11:50.067
> 
> 标签：tomcat, grails, deployment, tomcat6

我已将我的应用程序部署到运行 tomcat6 的 ubuntu 服务器上。我通过 WAR 文件进行了部署，并将其重命名为 ROOT。当我转到基本 url 时，我收到一个 404 错误，提示找不到“index.jsp”。我在 grails 常见问题解答网站上发现，这意味着它已经尝试找到 gsp 但无法找到它 - 但是，我已经在提取的战争中验证它确实存在，确实存在。

我的默认设置指向一个调用的 HomeController，并且在提取的 WAR 下的视图文件夹中*有*`index()`一个对应的。*`/home/index.gsp`*

 *现在为了增加一些混乱，我有另一个控制器`ContactController`和相同的视图设置（即 Contact/index.gsp），并且*可以*工作！事实上，在我拥有的 5 个控制器中，它是唯一一个显然可以找到视图的控制器，即使每个视图都`index.gsp`在各自的视图文件夹中命名。

我不确定它是否与应用程序本身有关，因为它使用运行应用程序工作（尽管我当然不会排除它）。我的猜测是它与服务器相关，但所有文档都说在`/webapps/`目录中简单地删除 WAR 并重新启动。

有什么建议么？

更新`UrlMappings.groovy`：：

```
class UrlMappings {

    static mappings = {
        "/$controller/$action?/$id?"{
            constraints {
                // apply constraints here
            }
        }

        "/"(controller:"home", action:"index")
        "500" (view: '/error')
    }
} 
```

确切的错误：

> 请求的资源（/WEB-INF/grails-app/views/home/index.jsp）不可用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:50:07.020

我们最近遇到了这个问题。确保您的控制器位于与目录结构相对应的正确包中。

例如：

```
package com.mypackage

class HomeController {
   def index = {
   }
} 
```

位于**./grails-app/controllers/com/mypackage**中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T00:04:40.257

如果您在根映射中命名动作以及控制器，它会起作用吗？

```
"/"(controller:"home", action:"index") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-09T09:45:36.203

您必须将 'allowLinking="true" ' 属性添加到 context.xml 文件中的 Context 标记

您可以在 ${TOMCAT_HOME}\conf 文件夹中看到该 context.xml 文件*

# delphi - How do I make connection pooling work in DBX?

> ID：11461492
> 
> 赞同：2
> 
> 时间：2012-07-12T22:12:09.567
> 
> 标签：delphi, connection-pooling, dbexpress

Well, [I managed get the delegate driver to set up properly,](https://stackoverflow.com/questions/10218813/how-do-i-set-up-dbx-connection-pooling-in-code) but connection pooling is still giving me a lot of trouble.

From the descriptions given in the documentation, it appears that connection pooling should work like this:

*   Set up the DBXPool driver delegate on a single, global Connection object
*   Use this Connection object for all calls into the database
*   Each DB call will get automagically routed through the delegate driver into a connection that's unique to its thread, owned by the connection pool.

In practice, I'm finding that everything seems to still be handled by the global Connection object, leading to all sorts of strange race conditions and crashes when I try to run DB queries from multiple concurrent threads.

In case it's relevant, I don't have many DBX-specific components defined; I generally run queries by calling the `Connection.Execute` method.

Any idea what I'm doing wrong? Am I missing a step somewhere, or do I have a bad understanding of how the DBXPool delegate driver works?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:48:07.690

Delphi comes with a sample project DelegatesSample. On my machine it is located under \Documents\RAD Studio\8.0\Samples\Delphi\Database\dbExpress\Delegates.

Each connection in the pool has it's *own* TDBXConnection object. In sample source code each connection is created by call to `TDBXConnectionFactory.GetConnectionFactory.GetConnection()`.

As you know of course, each query in a thread should have it's own connection object.

Felix Colibri has also great [article](http://www.felix-colibri.com/papers/db/delphi_dbx4_programming/delphi_dbx4_programming.html) about Delphi DBX4 programming. There he describes amongst other topics also pooling database connections using a pooling delegate driver.

At least these samples helped mine understanding how connection pooling works!

# nginx - Nginx：将站点移动到新域

> ID：11461497
> 
> 赞同：1
> 
> 时间：2012-07-12T22:12:37.953
> 
> 标签：nginx

我有一个运行 wordpress 的网站 example.com。现在我想将此博客移动到子域 blog.example.com，但我还想要以下内容：

```
example.com --> static page (not wordpress)

blog.example.com --> new address to the blog
blog.example.com/foo --> handled by wordpress

example.com/foo --> permanent redirect to blog.example.com/foo 
```

所以我尝试了下一个配置：

```
 server {
            server_name example.com;

            location = / {
                    root /home/path/to/site;
            }

            location / {
                    rewrite ^(.+) http://blog.example.com$request_uri? permanent;
            }
    } 
```

在这种情况下，重定向工作得很好。不幸的是 example.com 也重定向到 blog.example.com。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:07:38.547

它重定向的原因是因为当它尝试加载 example.com 的索引文件时，它执行到 /index.html 的内部重定向，该重定向由您的重写位置处理。为避免这种情况，您可以使用 try_files：

```
server {
  server_name example.com;

  root /home/path/to/site;

  location = / {
    # Change /index.html to whatever your static filename is
    try_files /index.html =404;
  }

  location / {
    return 301 http://blog.example.com$request_uri;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:44:35.613

只要两个域的根目录指向不同的目录，你就需要两个`server`指令——像这样：

```
server {
        # this is the static site
        server_name example.com;

        location = / {
                root /home/path/to/static/page;
        }

        location /foo {
                return 301 http://blog.example.com$request_uri;
        }
}

server {
        # this is the WP site
        server_name blog.example.com;

        location = / {
                root /home/path/to/new_blog;
        }

        .... some other WP redirects .....
} 
```

# persistence - 通过 EclipseLink NoSql JBoss AS 7.1.1.Final 实现 MongoDB 持久性

> ID：11461500
> 
> 赞同：2
> 
> 时间：2012-07-12T22:12:45.883
> 
> 标签：persistence, eclipselink, jboss7.x, mongodb-java

我正在尝试在 JBoss AS 7.1.1.Final 中为 MongoDB 使用 EclipseLink NoSql Persistence。

我正在尝试使用 EntityManager，例如：

```
 EntityManager em = Persistence.createEntityManagerFactory("mongo")
            .createEntityManager();

    Model m = new Model();
    em.getTransaction().begin();
    em.persist(m);
    em.getTransaction().commit(); 
```

这是我的persistence.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="1.0">
    <persistence-unit name="mongo" transaction-type="RESOURCE_LOCAL">
        <class>com.Model</class>
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <properties>
        <property name="eclipselink.ddl-generation" value="dorop-and=create=tables" />
            <property name="eclipselink.target-database"
                value="org.eclipse.persistence.nosql.adapters.mongo.MongoPlatform" />
            <property name="eclipselink.nosql.connection-spec"
                value="org.eclipse.persistence.nosql.adapters.mongo.MongoConnectionSpec" />
            <property name="eclipselink.logging.level" value="FINEST" />

        </properties>
    </persistence-unit>
</persistence> 
```

[我使用此处](http://mpashworth.wordpress.com/2012/01/25/configuring-eclipselink-2-3-1-in-jboss-7-1/)指定的说明将 EclipseLink 模块添加到我的 JBoss 安装中。我还在 EclipseLink modules.xml 中添加了 javax.resource.jar 作为依赖项，并为 javax.resource 创建了一个 JBoss 模块。**如果有任何方法可以避免将模块添加到 JBoss，而是将其放入我的战争中，请告诉我。**

这是我当前面临的问题，这很奇怪，因为我知道它正在加载 javax.resource.jar（没有它之前我遇到了另一个错误）并且缺少的 javax.resource.cci.ConnectionFactory 类在那里。

```
1:35,286 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/barebones].[com.Servlet]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet com.Servlet threw exception: javax.persistence.PersistenceException: java.lang.NoClassDefFoundError: javax/resource/cci/ConnectionFactory
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:602) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:186) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:278) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:304) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:282) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at com.Servlet.doGet(Servlet.java:22) [classes:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_31]
Caused by: java.lang.NoClassDefFoundError: javax/resource/cci/ConnectionFactory
    at org.eclipse.persistence.eis.EISConnectionSpec.connectToDataSource(EISConnectionSpec.java:146) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.nosql.adapters.mongo.MongoConnectionSpec.connectToDataSource(MongoConnectionSpec.java:150) [org.eclipse.persistence.nosql_2.4.0.v20120608-r11652.jar:]
    at org.eclipse.persistence.eis.EISLogin.connectToDatasource(EISLogin.java:73) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.internal.databaseaccess.DatasourceAccessor.connectInternal(DatasourceAccessor.java:330) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.internal.databaseaccess.DatasourceAccessor.connect(DatasourceAccessor.java:418) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.sessions.server.ConnectionPool.buildConnection(ConnectionPool.java:216) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.sessions.server.ConnectionPool.startUp(ConnectionPool.java:504) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.sessions.server.ServerSession.connect(ServerSession.java:484) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.login(DatabaseSessionImpl.java:734) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:215) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:542) [eclipselink-2.4.0.jar:2.4.0.v20120608-r11652]
    ... 21 more
Caused by: java.lang.ClassNotFoundException: javax.resource.cci.ConnectionFactory from [Module "org.eclipse.persistence:main" from local module loader @2b76e552 (roots: /usr/jboss/jboss-as-7.1.1.Final/modules)]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 32 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T08:42:27.897

有同样的问题。请在org.eclipse.persistence的module.xml中的依赖中添加“<module name="javax.resource.api" />”。

它对我有用。

# android - 无论如何要增加一个以上的意图？

> ID：11461501
> 
> 赞同：1
> 
> 时间：2012-07-12T22:13:00.117
> 
> 标签：android

我想在`Intent`. 一握一`double`握`long`。这可能吗？

如果是这样，我将如何做以及如何从每个额外的信息中获取信息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T22:16:14.120

您可以随心所欲地添加任意数量的附加`Intent`信息，它们都只是关键值数据：

```
Intent intent = new Intent();
intent.putExtra("name", "MyName");
intent.putExtra("age", 35);
intent.putExtra("weight", 155.6); 
```

并且可以使用相同的键名检索它们：

```
String name = intent.getStringExtra("name");
int age = intent.getIntExtra("age", 0);
double weight = intent.getDoubleExtra("weight", 0.0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:19:53.753

```
intent.putExtra(@ExtraDoubleKey, @ExtraDoubleValue);
intent.putExtra(@ExtraLongKey, @ExtraLongValue); 
```

其中@ExtraDoubleKey 是一个字符串，您将使用它来访问extra（即“价格”或其他东西），而@ExtraDoubleValue 是extra 的值（您希望传递的双变量）。@ExtraLongKey 和@ExtraLongValue 也是如此。

然后，要在下一个活动中访问额外内容，您可以使用：

```
double doubleValue = getIntent().getExtras().getDouble(@ExtraDoubleKey);
long longValue = getIntent().getExtras().getLong(@ExtraLongKey); 
```

使用键 @ExtraDoubleKey 获取双倍额外的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T12:08:12.550

[https://stackoverflow.com/a/11461530/776075](https://stackoverflow.com/a/11461530/776075)

Devunwired 是正确的。但我看到的方式是每个类型只能保留一个值。像一个字符串，一个整数，一个双精度等。

您不能包含 2 个字符串值。或两个整数。我在一个程序上经历过这个问题，我通过使用一个字符串和一个布尔值来克服它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T22:14:58.427

您可以使用`Bundle`它并将其作为参数传递给 Intent。

```
Intent nextActivity = new Intent(this, Activity2.class);
Bundle passData = new Bundle(); //to hold your data
passDataBndl.putString("fname", fname); //put in some String. the first parameter to it is the id, and the second parameter is the value
nextActivity.putExtras(passDataBndl); //Add bundle to the Intent
startActivityForResult(nextActivity, 0); //Start Intent 
```

# ruby-on-rails - 使用单表继承阻止 rails 将类型包含在 belongs_to 中

> ID：11461503
> 
> 赞同：0
> 
> 时间：2012-07-12T22:13:05.277
> 
> 标签：ruby-on-rails, ruby, sti

我有一个问题，rails 向我的 belongs_to 关联添加了不必要的（我认为）子句 - 即使我的关联使用外键，也会限制类型。

STI 设置如下所示：

```
class Foo < ActiveRecord::Base
  belongs_to :apple
end

class Apple < Fruit
  has_many :foos
end 
```

所以`Foo`有一`apple_id`列链接到 中的主键列 ID `fruits`，并且`Apple`是 STI 下`Fruit`。我对这一切感到满意。

现在：

```
> Foo.joins(:apple).to_sql

SELECT "foos".* FROM "foos" INNER JOIN "fruits" ON "fruits"."id" = 
"foos"."apple_id" AND "fruits"."type" IN ('Apple') 
```

为什么要添加 rails `AND "fruits"."type" IN ('Apple')`？它是使用表的主键的 belongs_to `fruits`，因此类型部分似乎是多余的。我可以阻止rails将该部分添加到查找中并得到这个：

```
SELECT "foos".* FROM "foos" INNER JOIN "fruits" ON "fruits"."id" = 
"foos"."apple_id" 
```

我知道我可以`belongs_to :apple, :class_name => "Fruit"`在 Foo 中做，但我希望对象在返回时自动变为`Apple`s。

万一有人质疑我的动机......我想这样做是因为 type 子句弄乱了 postgres 在我`fruits`对其他表进行查询时选择的查询计划（是的，我有一个索引`type`，甚至尝试了一个 multi -第一栏`[type,id]`）。在这里完全描述有点复杂/无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:20:25.073

基本上 AM 正在添加 ('Apple') 部分，因为为了尊重继承链。

例如，如果你有

```
class GreenApple < Apple
end 
```

你会得到。

> Foo.joins(:apple).to_sql SELECT "foos".* FROM "foos" INNER JOIN "fruits" ON "fruits"."id" = "foos"."apple_id" AND "fruits"."type" IN ( “苹果”、“青苹果”）

如果出于某种原因，您最终在水果表上有一个带有引用 pk 但类型不同的水果，您最终可能会在不知道它的情况下实例化不同类型的对象，然后事情可能会出错而不会出现异常。

# knockout.js - KnockoutJS 将 viewModel 传递给函数

> ID：11461504
> 
> 赞同：1
> 
> 时间：2012-07-12T22:13:08.787
> 
> 标签：knockout.js

我最终将在同一页面上使用多个 viewModel，因此我试图弄清楚如何将 viewModel 作为变量传递给函数，以便进行我的 ajax 调用。我正在尝试更新这个跨度：

```
<span data-bind="text: AnswerText"/></span> <span data-bind="text: GetFormattedDate() "/></span> 
```

这段代码可以正常工作并正确填充来自 GetFormattedDate 的值：

```
var viewModel1;
$(document).ready(function () {
    var jsonDataToSend = { questionConfigurationID: 1 };
    $.ajax({
        url: "SomePage.aspx/GetAnswerAndComments",
        type: "post",
        dataType: "text json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(jsonDataToSend),
        success: function (msg) {
            var result = msg.d;
            if (result != null) {
               viewModel1 = ko.mapping.toJS(result);
                ko.applyBindings(viewModel1, document.getElementById("divAnswerAndComment1"));
            }
        }
    });

});

function GetFormattedDate()
{
    var date = "";
    if (viewModel1.InsertDate != null) 
    {
        date = new Date(parseInt(viewModel1.InsertDate.substr(6)))
    } 
    return date;
} 
```

但是，当我将 $document.ready 函数替换为调用 GetFormattedDate 时将 viewModel 作为变量传递的另一个函数时， viewModel1 未定义（见下文）。我很确定它与 viewModel1 的范围有关，但我无法弄清楚到底是什么问题。

```
var viewModel1;
$(document).ready(function () {
GetAnswersAndComments(1, viewModel1);
});

function GetAnswersAndComments(questionID, currentViewModel) {
    var jsonDataToSend = { questionConfigurationID: questionID };
    $.ajax({
        url: "ControlWebMethods.aspx/GetAnswerAndComments",
        type: "post",
        dataType: "text json",
        contentType: "application/json; charset=utf-8",
        data: JSON.stringify(jsonDataToSend),
        success: function (msg) {
            var result = msg.d;
            if (result != null) {
                currentViewModel = ko.mapping.toJS(result);
                ko.applyBindings(currentViewModel);
            }
        }
    });        
}

function GetFormattedDate()
{
    var date = "";
    if (viewModel1.InsertDate != null) 
    {
        date = new Date(parseInt(viewModel1.InsertDate.substr(6)))
    } 
    return date;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:37:33.223

你正在传递`viewModel1`给`GetAnswersAndComments`. 在函数内部，您有一个引用的本地**副本**`viewModel1`，并且这个本地副本被调用`currentViewModel`。

然后，您使用 设置该局部变量`currentViewModel = ko.mapping.toJS(result);`。这不会触及`viewModel1`，因此它仍然未定义。基本的 Javascript

# html - 带有无序列表的 CSS3 Cube

> ID：11461516
> 
> 赞同：0
> 
> 时间：2012-07-12T22:14:52.017
> 
> 标签：html, css

我见过许多使用 div 的 CSS3 Cube，想用无序列表创建相同的。

我设法在这里创建了立方体[http://codepen.io/iakshay/full/2/10](http://codepen.io/iakshay/full/2/10)。但是我在面孔之间得到了一些额外的边距。

无法弄清楚出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T22:37:41.807

你用过：

```
-webkit-transform: rotateX([X]deg) translateZ(200px); 
```

当你只使用`100px` ~~我猜~~它应该可以工作，如下所示：

```
-webkit-transform: rotateX([X]deg) translateZ(100px); 
```

### 编辑

基本上你必须使用一半的宽度，因为`rotateXYZ`在中间的一点旋转元素。完成后，您已经完成了一半，只需添加“其余部分”。

这是一个很好的例子，可以看到鼠标悬停时的这种效果：

[http://css3.bradshawenterprises.com/flip/](http://css3.bradshawenterprises.com/flip/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:37:49.963

你的 -webkit-transform: translateZ(200px); 需要：-webkit-transform: translateZ(100px); 在每一侧。我第一次经历这个也花了我一段时间:-)

# netty - Netty NIO 客户端行为和服务器 OrderedMemoryAwareThreadPoolExecutor

> ID：11461518
> 
> 赞同：0
> 
> 时间：2012-07-12T22:14:55.853
> 
> 标签：netty

这对我来说可能很明显，但我仍然想确认以下内容......

给定一个特定的 Channel 和一个 NIO Netty 服务器，它使用 OrderedMemoryAwareThreadPoolExecutor 和以下形式的客户端：

1.  *OIO 阻塞客户端*- 我希望响应顺序与请求顺序相匹配。
2.  *使用阻塞读取的 NIO 客户端*- 我希望响应顺序与请求顺序相匹配。
3.  *纯 NIO 异步客户端（无阻塞读取）* ——我不会期望响应顺序与请求顺序匹配。

首先，如果以上不正确，请告诉我。如果是这样，请纠正我。

对于断言 3)，服务器仍然按照接收每个事件的顺序处理请求，但是由于客户端是异步的，因此发送请求的顺序不是您可以预测的。真的？

因此，从客户的角度来看，响应顺序似乎有所不同。由于客户端的异步特性，请求发送到服务器的顺序实际上并不为人所知。

对于我正在从事的项目，我需要确定我对此的理解，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:38:54.573

只要您使用 TCP，响应顺序必须按照您在服务器中发送它们的顺序。这仅在使用 UDP 时不成立。

# android - Cursor.getInt() 抛出 CursorIndexOutOfBoundsException

> ID：11461520
> 
> 赞同：0
> 
> 时间：2012-07-12T22:14:59.570
> 
> 标签：android, sqlite

![向那些有带宽问题的人道歉。](../Images/b1a7793ccf90bb18083ce35d24f06ffc.png)

所以，我在一个`SQLiteDatabaseHelper`类中有一个方法，它读取一个数字并返回一个布尔值，如上图所示。但是，执行代码只会引发此异常：

```
06-28 19:49:45.881: E/AndroidRuntime(355): FATAL EXCEPTION: main
06-28 19:49:45.881: E/AndroidRuntime(355): android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
06-28 19:49:45.881: E/AndroidRuntime(355):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
06-28 19:49:45.881: E/AndroidRuntime(355):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
06-28 19:49:45.881: E/AndroidRuntime(355):  at android.database.AbstractWindowedCursor.getInt(AbstractWindowedCursor.java:84)
06-28 19:49:45.881: E/AndroidRuntime(355):  at com.mowdownDevelopments.nagTasks.NagTasksDatabaseHelper.isTaskChecked(NagTasksDatabaseHelper.java:239)
06-28 19:49:45.881: E/AndroidRuntime(355):  at com.mowdownDevelopments.nagTasks.NagTaskListFragment.onPrepareActionMode(NagTaskListFragment.java:184)
06-28 19:49:45.881: E/AndroidRuntime(355):  at com.actionbarsherlock.internal.ActionBarSherlockCompat$ActionModeCallbackWrapper.onPrepareActionMode(ActionBarSherlockCompat.java:1181)
06-28 19:49:45.881: E/AndroidRuntime(355):  at com.actionbarsherlock.internal.app.ActionBarImpl$ActionModeImpl.invalidate(ActionBarImpl.java:713)
06-28 19:49:45.881: E/AndroidRuntime(355):  at com.actionbarsherlock.internal.app.ActionBarImpl.startActionMode(ActionBarImpl.java:405)
06-28 19:49:45.881: E/AndroidRuntime(355):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.startActionMode(ActionBarSherlockCompat.java:178)
06-28 19:49:45.881: E/AndroidRuntime(355):  at com.actionbarsherlock.app.SherlockFragmentActivity.startActionMode(SherlockFragmentActivity.java:50)
06-28 19:49:45.881: E/AndroidRuntime(355):  at com.mowdownDevelopments.nagTasks.NagTaskListFragment.onListItemClick(NagTaskListFragment.java:62)
06-28 19:49:45.881: E/AndroidRuntime(355):  at android.support.v4.app.ListFragment$2.onItemClick(ListFragment.java:58)
06-28 19:49:45.881: E/AndroidRuntime(355):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
06-28 19:49:45.881: E/AndroidRuntime(355):  at android.widget.ListView.performItemClick(ListView.java:3382)
06-28 19:49:45.881: E/AndroidRuntime(355):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
06-28 19:49:45.881: E/AndroidRuntime(355):  at android.os.Handler.handleCallback(Handler.java:587)
06-28 19:49:45.881: E/AndroidRuntime(355):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-28 19:49:45.881: E/AndroidRuntime(355):  at android.os.Looper.loop(Looper.java:123)
06-28 19:49:45.881: E/AndroidRuntime(355):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-28 19:49:45.881: E/AndroidRuntime(355):  at java.lang.reflect.Method.invokeNative(Native Method)
06-28 19:49:45.881: E/AndroidRuntime(355):  at java.lang.reflect.Method.invoke(Method.java:521)
06-28 19:49:45.881: E/AndroidRuntime(355):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-28 19:49:45.881: E/AndroidRuntime(355):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-28 19:49:45.881: E/AndroidRuntime(355):  at dalvik.system.NativeStart.main(Native Method) 
```

这表明问题在这里：

```
public boolean isTaskChecked(long taskID){
        SQLiteDatabase db = getReadableDatabase();
        String[] columns = {ID, CHECKED};
        Cursor c = db.query(TASKS, columns, "_id="+taskID, null, null, null, null);
        c.moveToFirst();
        int boolAsInt = c.getInt(1); //This line is throwing.
        //db.close();
        c.close();
        if (boolAsInt==1) {
            return true;
        } else if (boolAsInt==0) {
            return false;
        } else {
            panicButton();
        }
        return false;
    } 
```

如图所示，通过 ADB 执行查询返回它就好了。（我在那里使用了一个通用查询，但`select _id, ischecked from tasks where _id=1;`工作得也很好。）我不明白为什么当代码明确要求列索引 1 时，它说我请求索引 0，以及执行查询时大小如何为 0在 shell 中给了我一些有用的东西（而且大小不是从零开始的吗？）。谁能帮我调试一下？

**[编辑：]**所以，事实证明，对于这个特定问题，问题在于我总是从不同的班级传递-1。我很抱歉浪费了大家的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:19:25.337

做这个：

```
if(c.moveToFirst()){
    int boolAsInt = c.getInt(1);
} 
```

光标可能为空，因此您必须在尝试从中获取任何值之前检查它。如果光标为空，则 moveToFirst() 返回 false，因此不会输入 if 并且您不会再收到异常

空游标的原因是 SQL 查询返回了一个空的结果集。如果您确定您应该得到一个非空集，请再次检查查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T07:23:37.267

getInt 方法的参数是索引，所以如果你想获取查询的第一列，你应该输入 0。

# jquery - asp.net MVC jquery 页面转换

> ID：11461529
> 
> 赞同：2
> 
> 时间：2012-07-12T22:16:10.507
> 
> 标签：jquery, asp.net-mvc, uislider, css-transitions

我正在使用 ASP.Net MVC 3、Razor 和 jQuery 构建一个 Web 应用程序。我想使用母版页 ( `_layout.cshtml`) 并进行滑入/滑出页面转换。我知道如何使用 jQuery Mobile 来做到这一点，但我想在没有 jQuery Mobile 的情况下做到这一点。我想我可以只用两个`div`'s 来做到这一点。有人有任何经验或示例代码等吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:21:48.780

你在正确的轨道上。如果您包含 jQuery UI，您可以创建一个包含 div（或您喜欢的任何块级元素）的容器，然后指定：

`$("#first-element").hide("slide", {direction: "left"}, 1000, function(){ $("#next-element").show("slide", {direction: "left"}, 1000); });`

这不是一个完全成熟的示例，但可能足以让您入门。

jQuery UI 文档也可能会有所帮助。( [http://jqueryui.com/demos/hide/](http://jqueryui.com/demos/hide/) )

# c# - 在货币数据 C# 中查找货币符号

> ID：11461534
> 
> 赞同：3
> 
> 时间：2012-07-12T22:16:35.300
> 
> 标签：c#

我想找出货币格式数据中存在的货币符号。

例如，输入字符串 = $56.23

```
public class FormatConverter 
{
    private CultureInfo _cultureInfo;

    public void UpdateCultureInfo()
    {
        Thread.CurrentThread.CurrentCulture.ClearCachedData();
        var thread = new Thread(
            s => _cultureInfo = Thread.CurrentThread.CurrentCulture);

        thread.Start();
        thread.Join();
    }

    Bool TryParseCurrencySymbolAndValue(string input, out string CurrencySymbol,
                                        out double value)
    {
        if(_cultureInfo == null)
            UpdateCultureInfo();
        try{

        // Convert Currency data into double
        value = Double.Parse(input, NumberStyles.Number | NumberStyles.AllowCurrencySymbol);
        // How to extract Currency Symbol?
            CurrencySymbol = "$";
            return true;
        }
        catch(Exception ex){ /* Exception Handling */}
        return false;
    }
} 
```

我想分别从字符串和 56.23 中提取“$”符号，然后我想将 CultureInfo 应用于 56.23 为法语格式。输出应该是 56,23 美元。

在某些情况下，输入可能是“欧元符号”或输入字符串开头或结尾的某些其他货币符号。

我知道如何将数字部分转换为 CurrentCulture。我不知道如何从字符串中提取货币符号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T23:32:52.193

听起来您已经知道如何将字符串解析为数字类型（如果我错了，请纠正我）。`double`我建议您在示例中使用，`decimal`但这是您的选择。

要获取货币符号，您可以使用简单的正则表达式

```
Regex ex = new Regex(@"\p{Sc}");
CurrencySymbol = ex.Match(input).Value; 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:27:49.950

还请查看此链接，以了解您可以找到和/或使用 IndexOf [IndexOf String Examples][1] 的许多不同方式。

问题是格式是否总是将 $ 作为第一个字符..？如果答案是肯定的，无论 USC 还是外币，都使用 String.IndexOf 方法

```
String.IndexOf("$") 
```

这是您可以查看的编码示例

```
using System;

class Program
{
    static void Main()
    {
    // A.
    // The input string.
    const string s = "Tom Cruise is an Idiot he should pay $54.95.";

    // B.
    // Test with IndexOf.
    if (s.IndexOf("$") != -1)
    {
        Console.Write("string contains '$'");
    }
    Console.ReadLine();
    }
} 
```

输出

字符串包含'$'

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-12T22:29:37.450

你能试试吗？

```
float curSymbol;
bool isValid = float.TryParse(curValue, 
    NumberStyles.Currency,
    CultureInfo.GetCultureInfo("en-US"), out curSymbol); 
```

获取 curSymbol。:) 一定要使用符号传递货币值:)

# android - 尝试在 Eclipse 中安装 Android ADT 和其他一些东西

> ID：11461535
> 
> 赞同：1
> 
> 时间：2012-07-12T22:16:43.363
> 
> 标签：android, eclipse, installation, adt

而且我几乎觉得我正在绕道而行。我收到此错误：

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Android 开发工具 20.0.0.v201206242043-391819 (com.android.ide.eclipse.adt.feature.group 20.0.0.v201206242043-391819) 缺少要求：Android 开发工具 20.0.0.v201206242043-391819 ( com.android.ide.eclipse.adt.feature.group 20.0.0.v201206242043-391819) 需要 'org.eclipse.wst.sse.core 0.0.0' 但找不到

我确定我已经拥有了它，但它坚持说我没有，而且我不知道在网上哪里可以找到它。有人可以帮忙吗？如果有帮助，我有 Linux Mint。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T07:02:32.963

为了更详细地说明“重新加载一些显示“可用软件站点”的东西”，这是我为使其工作而加载的其他“东西”：

```
朱诺
http://download.eclipse.org/releases/juno
Eclipse 项目更新
http://download.eclipse.org/eclipse/updates/4.2

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:26:41.030

我在尝试在新的 Eclipse 版本 Juno 上安装插件时遇到了类似的错误。当我在旧版本 Indigo 中尝试它时，它起作用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T02:49:39.223

好的，我想我明白了...基本上我所做的是重新加载一些内容，其中在帮助 => 安装新软件的内容中显示“可用软件站点”，然后尝试再次安装我想要的内容。所以我将继续并结束这个问题。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T20:10:55.563

正如另一位用户所写：

```
The Eclipse Project Updates
http://download.eclipse.org/eclipse/updates/4.2 
```

我已经下载了 Eclipse juno 并不断收到同样的错误。

从这里下载 ADT Zip 插件：

[http://dl.google.com/android/ADT-20.0.0.zip](http://dl.google.com/android/ADT-20.0.0.zip)

将其复制并粘贴到您的浏览器。

然后继续并安装更新并放置 Eclipse 项目链接并更新它。

一旦你这样做指向你下载的 zip 文件，你现在应该已经安装了 ADT 插件。

# orchardcms - 如何在页面上显示异常详细信息？

> ID：11461537
> 
> 赞同：0
> 
> 时间：2012-07-12T22:16:48.850
> 
> 标签：orchardcms

而不是“糟糕。出了点问题......抱歉。发生了未处理的异常并且请求被终止。请刷新页面。如果错误仍然存​​在，请返回”

当发生异常时，我想在页面上显示错误消息和堆栈跟踪。我怎样才能做到这一点？在我的本地开发机器上，我希望能够看到完整的错误详细信息。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:27:20.777

查看 app_data\logs。完整的细节应该在那里。

# jsp - 在jsf页面中包含jsp

> ID：11461540
> 
> 赞同：0
> 
> 时间：2012-07-12T22:16:55.253
> 
> 标签：jsp, jsf-2, include, jspinclude

以下是我在 JSP 页面中的内容

`example.jsp`

```
<html>
    <body>
        //report using mysql connection
    </body>
</html> 
```

现在我想将此页面包含在我的 jsf 页面之一中。我怎么能那样做？

我在下面尝试过，但是我收到错误`javax.faces.view.facelets.FaceletException: Error Parsing /detailedReports.jsp: Error Traced[line: 1] The markup in the document preceding the root element must be well-formed.`

我试过的代码是

```
<h:form>
    <ui:include src="detailedReports.jsp" />   
</h:form> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:58:14.657

我也使用了omnifaces。

```
<o:resourceInclude path="detailedReports.jsp" /> 
```

成功了....

# objective-c - 声明并实现一个带有块但没有其他参数的 iOS 方法

> ID：11461548
> 
> 赞同：5
> 
> 时间：2012-07-12T22:17:39.580
> 
> 标签：objective-c, ios, block

需要帮助声明和实现带有块但没有参数的方法。听起来很简单，但我错过了一些东西，因为这有效：

```
- (void) RetrieveDevices: (NSInteger)count
         success:(void (^)(NSMutableArray *devices))success
         failure:(void (^)(aylaError *err))failure;

- (void)RetrieveDevices:(NSInteger)count
        success:(void (^)(NSMutableArray *devices))successBlock
        failure:(void (^)(aylaError *err))failureBlock
{

} 
```

这不会编译，因为它需要一个方法体：

```
- (void) RetrieveDevices
             success:(void (^)(NSMutableArray *devices))success
             failure:(void (^)(aylaError *err))failure;

- (void)RetrieveDevices
            success:(void (^)(NSMutableArray *devices))successBlock
            failure:(void (^)(aylaError *err))failureBlock
{

} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T22:20:51.670

块是参数。所以你想要一个带有两个参数的方法签名。尝试例如：

```
- (void) RetrieveDevicesWithSuccess:(void (^)(NSMutableArray *devices))success
                            failure:(void (^)(aylaError *err))failure; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:21:00.960

问题是“RetrieveDevices”和“success”/“failure”之间的换行符和空格。试试这个：

```
- (void)RetrieveDevicesOnSuccess:(void (^)(NSMutableArray *devices))successBlock
                       onFailure:(void (^)(aylaError *err))failureBlock
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T22:21:03.120

您可以执行以下操作：

```
- (void) RetrieveDevicesSuccess:(void (^)(NSMutableArray *devices))success
                        failure:(void (^)(aylaError *err))failure; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T22:27:28.897

问题不在于块语法，而在于第二个示例的方法声明语法。没有参数的方法声明为：

```
- (RETURN_TYPE)method_name 
```

一个带参数的方法被声明为：

```
- (RETURN_TYPE)method_name_part1:(PARAMETER_TYPE1)parameter1 name_part2:(PARAMETER_TYPE2)parameter2... 
```

第一个示例具有正确的语法，返回类型为 void 和三个参数，第二个示例在方法名称后有一个空格，这就是编译器期望方法体的原因（他将其解释为无参数方法） .

另请注意，按照惯例，方法名称以小写字母开头。

# android - Android 动画缓效效果

> ID：11461553
> 
> 赞同：1
> 
> 时间：2012-07-12T22:18:07.833
> 
> 标签：android, animation

嗨，有人知道如何为动画添加缓动效果吗？

继承人我的动画到目前为止

```
<set xmlns:android="http://schemas.android.com/apk/res/android" 
    android:interpolator="@android:anim/accelerate_interpolator"
    android:fillAfter="true">
   <translate android:fromYDelta="100%p" android:toYDelta="0" android:duration="1000" />

</set> 
```

# java - 使用声明性事务管理时，如何显式提交 Spring db 事务？

> ID：11461554
> 
> 赞同：2
> 
> 时间：2012-07-12T22:18:14.043
> 
> 标签：java, database, spring, hibernate, spring-transactions

我在我的 java 方法上使用 @Transactional 注释使用 Spring 声明性数据库事务管理。

在一种情况下，我想在方法返回之前显式提交当前事务（包装当前执行方法的事务）。

如何才能做到这一点？

我已经尝试从 spring 上下文中自动连接当前的 HibernateTransactionManager 并使用它来提交，但它没有提交事务。

我试过的代码是：

```
transactionManager.commit(transactionManager
  .getTransaction(new DefaultTransactionDefinition())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:20:58.767

我还没有尝试过，但你可以用我能想到的一些技巧来做到这一点

使用 TransactionAspectSupport.currentTransactionStatus() 获取 TransactionStatus 将事务管理器注入到您的 bean（假设您正在使用休眠）尝试在事务管理器中调用 doCommit(DefaultTransactionStatus status)。

试试这个，不确定它是否会起作用，因为根据 spring doc

[交易](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#transaction-declarative)

> 如果可能，强烈建议您使用声明性方法进行回滚。如果您绝对需要，可以使用程序化回滚，但它的使用与实现干净的基于 POJO 的架构背道而驰。

我还没有测试过，但如果你将 setRollbackOnly 设置为 TransactionStatus 也可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-05T21:09:59.043

上面寻求的嵌套事务可以使用 REQUIRES_NEW 传播来实现，但是通过照顾自我调用来实现，如此[处所述](https://www.credera.com/blog/technology-insights/java/common-oversights-utilizing-nested-transactions-spring/)

# http - fw 在用户代理中

> ID：11461557
> 
> 赞同：0
> 
> 时间：2012-07-12T22:18:37.270
> 
> 标签：http, user-agent

一个用户代理字符串是：

`mozilla/4.0 (compatible; msie 6.0; windows nt 5.1; btrs121199; sv1; infopath.1; fw 2.0.6767)`

有谁知道是什么`fw 2.0.6767`意思？是固件的意思吗？我可以轻松更改版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T17:37:18.320

据我所知，用户代理字符串不提供固件版本，除非它们被用户操纵。

该`fw 2.0.6767`UA 字符串上的片段可能指的是框架版本；由应用程序或用户自己添加的广告软件或自定义片段。

* * *

**分解[UA 字符串](http://en.wikipedia.org/wiki/User_agent)：**

> mozilla/4.0（兼容；msie 6.0；windows nt 5.1；btrs121199；sv1；infopath.1；fw 2.0.6767）

*   `mozilla/4.0`

    应用程序名称和版本。由于历史原因，[Internet Explorer 将自己标识](http://msdn.microsoft.com/en-us/library/ms537503%28v=vs.85%29.aspx)为 Mozilla 浏览器。

*   `compatible;`

    兼容性标志令牌。它表明 Internet Explorer 与一组常用功能兼容。

*   `msie 6.0;`

    [版本令牌标识浏览器并包含当前浏览器模式](http://msdn.microsoft.com/en-us/library/gg589500%28v=vs.85%29.aspx)报告的版本号。该值表示 Windows Internet Explorer 6。

*   `windows nt 5.1;`

    Microsoft Windows NT 5.1 版（通常称为[Windows XP Professional](http://en.wikipedia.org/wiki/List_of_Microsoft_Windows_versions)）。

*   `btrs121199;`

    *未知片段* ^(*****)

*   `sv1;`

    已安装 Windows XP Service Pack 2（安全版本 1）

*   `infopath.1;`

    [MS Infopath 版本 1](http://en.wikipedia.org/wiki/Microsoft_InfoPath)（一个 MS Office 额外应用程序），这意味着它可能正在收集数据以用于基于表单的应用程序。

*   `fw 2.0.6767`

    *未知片段* ^(*****)

^(*****)可能与正在使用的应用程序添加的广告软件或自定义标识有关。

*这是我经过 5 小时研究、阅读和交叉引用信息后能够编译的结果。*

* * *

**在线 UA 分析工具：**

您可以参考以下提供大量 UA 字符串的网站，包括任何给定 UA 字符串的片段标识：

*   [用户代理 String.Com](http://www.useragentstring.com/)

*   [UA 字符串分析 :: user-agent-string.info](http://user-agent-string.info/)

*   [用户代理搜索 - 浏览器功能项目](http://browsers.garykeith.com/ua-search)

* * *

**浏览器供应商提供的其他信息：**

*   MDN - [Gecko 用户代理字符串参考](https://developer.mozilla.org/en/Gecko_user_agent_string_reference)

*   MSDN -[了解用户代理字符串](http://msdn.microsoft.com/en-us/library/ms537503%28VS.85%29.aspx)

*   Opera -[用户代理字符串](http://my.opera.com/community/openweb/idopera/)

# php - 为什么从字符串到整数的类型转换总是返回“0”？

> ID：11461563
> 
> 赞同：1
> 
> 时间：2012-07-12T22:19:25.667
> 
> 标签：php, javascript, html

我正在编写一个 AJAX 聊天脚本，并且正在集成一个系统来解析时间（基本上就像 BBCode）。问题是，当我尝试将时间（UNIX 时间戳）转换为与 date() 一起使用的整数时，它总是返回“0”。我用来查找和替换的代码如下。我还添加了我要解析的示例

```
$out = preg_replace("/\[time\](.*)\[\/time\]/i",date("c",(int)"$1",$out); 
```

样本：

```
<b>GtoXic</b>: [time]1342129366[/time] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T22:24:35.330

因为您实际转换为整数的是文字 string `$1`，并且将字符串转换为整数的工作方式如下：

*   如果字符串的开头是有效的数字表示，请使用它，直到遇到与该格式不兼容的字符
*   否则返回零

为了让它工作，你会使用[`preg_replace_callback()`](http://www.php.net/manual/en/function.preg-replace-callback.php)：

```
$output = preg_replace_callback("/#\[time\](.*)\[/time\]#i", function ($matches) {
  return date("c", $matches[1]);
}, $input); 
```

`(int)`强制转换实际上是不必要的，当您将值传递给需要整数的函数时，PHP 会自动处理这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T22:24:45.023

你需要使用[`preg_replace_callback()`](http://www.php.net/manual/en/function.preg-replace-callback.php).

您的脚本失败的原因是因为`(int)"$1"`实际上是`0`（零），所以在它作为参数之一传递之前，它已经转换为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T22:38:02.587

您需要的是带有回调函数的[preg_replace_callback ：](http://php.net/manual/en/function.preg-replace-callback.php)

```
$out = "<b>GtoXic</b>: [time]1342129366[/time]";

$out = preg_replace_callback('/\[time\]([0-9]*)\[\/time\]/i', 'test', $out);

function test($matches)
{
  return date("c", (int)$matches[1]);
} 
```

# c# - 如何包装基类的静态属性以便它们返回子类对象？

> ID：11461564
> 
> 赞同：1
> 
> 时间：2012-07-12T22:19:46.153
> 
> 标签：c#, .net, inheritance, static

假设我有这样的代码：

```
public class Base  // I cannot change this class
{
    public string Something { get; private set; }
    public string Otherthing { get; set; }

    public static Base StaticPreSet
    {
        get { return new Base { Something = "Some", Otherthing = "Other"}; }
    }

    public static Base StaticPreSet2
    {
        get { return new Base { Something = "Some 2", Otherthing = "Other 2"}; }
    }
}

public class SubClass : Base  // I can change this class all I want.
{
    public string MoreData { get; set; }

    // How can I wrap the PreSets here so that they return SubClass objects?
    // Something like this:
    public static SubClass MyWrappedPreset 
    {
       get
       {
          // Code here to call the base preset and then use it as the 
          // base of my SubClass instance.
       }
    }
} 
```

使这变得复杂的是Something 属性。它有一个私人二传手。所以我不能在子类中设置它。可以设置它的唯一方法是通过预设属性。

**有没有办法将 StaticPreSet 属性包装在我的子类中，以便它返回子类类型的对象？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:32:52.280

> // 我不能改变这个基类。

鉴于您无法更改基类，因此无法使其更改行为（即：在运行时返回不同的类）。

如果您可以影响基类静态方法的设计，您*可以*重新设计它，使其足够灵活以提供此功能。但是，如果不更改它，这将行不通。

* * *

编辑以响应编辑：

您可以创建一个新的静态方法来执行您所显示的操作，如下所示：

```
public static SubClass MyWrappedPreset 
{
   get
   {
      // Code here to call the base preset and then use it as the 
      // base of my SubClass instance.
       Base baseInstance = Base.StaticPreSet;
       SubClass sc = new SubClass(baseInstance); // Create a new instance from your base class
       return sc;
   }
} 
```

但是，这提供了一个全新的、不相关的属性——您必须通过`SubClass.MyWrappedPreset`而不是`Base`类来访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:37:28.833

类中的静态字段“与它无关”。
基本上，除了对私有静态字段的访问之外，id 放在哪个类中并不重要——它们的行为相同。
如果您继承一个类，并在基类上声明另一个与静态字段同名的静态字段，您将简单地“隐藏”它。给你的例子：

```
using System;
public class Base  // I cannot change this class
{
    public string Something { get; set; }
    public string Otherthing { get; set; }

    public static Base StaticPreSet
    {
        get { return new Base { Something = "Some", Otherthing = "Other"}; }
    }

    public static Base StaticPreSet2
    {
        get { return new Base { Something = "Some 2", Otherthing = "Other 2"}; }
    }
}

public class SubClass : Base  // I can change this class all I want.
{
    public string MoreData { get; set; }

    public static SubClass StaticPreSet2
    { 
        get { return new SubClass { Something = "inherited", Otherthing=""}; }
    }
}
public class Test
{
    public static void Main()
    {
    Console.WriteLine(SubClass.StaticPreSet2.Something);
    }
} 
```

会写“继承”。

# android - android的包名：对应的域名已经被占用了？

> ID：11461565
> 
> 赞同：1
> 
> 时间：2012-07-12T22:19:48.223
> 
> 标签：android, package

我在 Google Play 上发布了一个 android 应用程序。开发的时候误以为我的包名前2部分对应的域名（com.radlmaier）是我哥注册的，这样就好（他不是IT开发的）

今天发现我哥的域名是radlmaier.net，而不是radlmaier.com。所以，我检查了我是否可以注册 radlmaier.com 并发现它已经被占用但正在出售。进一步的调查结果表明，该域名的所有者至少需要 1800 美元。

显然，我不能也不愿意为一个不通用的名字付出那么多。显然，所有者正在用域名进行投机（顺便说一句，根据德国法律，这是被禁止的）。

那么实际的影响是什么？

据我了解，没有人可以使用我的完整包名 com.radlmaier ..... 因为它已经在 Google Play 上使用。我不想更改我的包名称，因为该应用程序的当前用户不会获得任何自动更新。但进一步的影响是什么？以后会不会有什么问题？

我应该指出，“radlmaier”这个名字在德国非常罕见，几乎每个带着这个名字的人都或多或少与我的家人有直接关系。

虽然 Google 建议使用反向域名作为包名，但没有什么能阻止其他人选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:30:37.187

> 那么实际的影响是什么？

可能没有实际影响。

> 据我了解，没有人可以使用我的完整包名 com.radlmaier ..... 因为它已经在 Google Play 上使用。

正确的。

> 以后会不会有什么问题？

嗯，当然。有人可以注册 10,000 个应用程序`com.radlmaier`，另外 10,000个应用程序`net.radlmaier`，甚至可能每个数千个`org.radlmaier`，等等。这似乎不太可能，但没有什么能阻止任何人这样做。

> 虽然 Google 建议使用反向域名作为包名，但没有什么能阻止其他人选择？

反向域名建议起源于 Java 用于包名称，以防止*意外*冲突。除了商标和诉讼之外，没有什么能阻止故意的碰撞。拥有域名是在避免冲突方面比*不*拥有域名的渐进式改进，但这并不是任何想象力的保证。因此，如果域名在某年以正常费率出现（在当前注册到期后几周检查），您可能想要抓住它，并且您可能会考虑使用`net.radlmaier`未来的应用程序。但我不会为了这个而彻夜难眠。

# php - Javascript中的Ajax无法正确启动php文件

> ID：11461568
> 
> 赞同：1
> 
> 时间：2012-07-12T22:20:00.373
> 
> 标签：php, javascript, jquery, ajax

这里涉及 3 个文件：coordinates_update.html、passitalong.js 和 dbquery.php

坐标更新包括 jquery、javascript 和 passitalong.js，当一个按钮被按下时，它会获取一堆变量并调用 passitalong.js 中的函数，同时将变量传递给这个函数。我已经通过警告声明确认了这项工作。传递它。js 现在包含一行 ajax 代码，用于将这些变量传递给 qbquery.php（最终用于查询数据库，但现在仅用于测试）。dbquery.php 然后使用 get 语句来获取变量，它应该回显它。

问题是当它将变量传递给 PHP 文件时，之后什么也没有发生。它不会回显任何变量或我放入其中的测试回显，并且打开它什么也不做。以下是相关代码：

```
coordinates_update.html
updatedb(lat,lng,street); //all declared and working

passitalong.js
$.get("dbquery.php", {latitude: lat}, {longitude: lng}, {id:street} );

qbquery.php
<?php 
$longitude = $_GeT['longitude'];
$latitude = $_Get['latitude'];
$street= $_Get['id'];
echo "test";
echo $street;

?> 
```

任何线索有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T00:49:57.153

这就是你的做法：

```
$.get("dbquery.php", {'latitude': lat, 'longitude': lng, 'id':street}); 
```

但当然，在将 lat、lng 和 street 传递给`$.get method`.

为了使您的代码更干净，请使用：`$_GET['latitude']`不`$_Get['latitude']`

这是nettuts关于[如何在jquery中执行ajax调用的参考](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

哦，如果您想在提交数据后做某事，您还可以包含一个回调函数：

```
 $.get("dbquery.php", {'latitude': lat, 'longitude': lng, 'id':street}, function(data){
    //do something with data
 }); 
```

当然你需要有类似的东西：

```
echo "something"; 
```

如果您想在提交数据后输出某些内容，请在 dbquery.php 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:28:25.260

它应该是 $_GET。PHP 变量区分大小写。该脚本可能正在死去，因为 $_Get 未声明。

# javascript - 是否需要取消挂钩事件处理程序以避免 IE 中的内存泄漏

> ID：11461569
> 
> 赞同：1
> 
> 时间：2012-07-12T22:20:03.497
> 
> 标签：javascript, dom

我在 IE 中遇到了一些内存泄漏问题。

我一直在阅读，不取消 IE 中的事件处理程序可能会导致内存泄漏。这是真的？
当用户离开页面时，我的内存泄漏可能是由于没有分离事件处理程序造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:34:34.540

Douglas Crockford 有一篇[关于 JSscript 内存泄漏的优秀文章](http://javascript.crockford.com/memory/leak.html)（JScript 是 IE 对 JavaScript/ECMAScript 的实现）。

它基本上归结为：IE 对 DOM 和 JScript 有单独的内存管理（因此垃圾收集）。因此，IE 在清理 DOM 对象和事件处理程序之间的循环引用时遇到了麻烦。

解决此问题的方法是确保`null`在丢弃 DOM 对象之前始终从 DOM 对象中删除事件处理程序（或将它们设置为 ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:31:45.510

一些较旧的浏览器在这方面存在问题。当有注册的事件处理程序时，请考虑这一点；

1）在脚本引擎中保留了一个回调注册表，一个事件在这里绑定了两个东西，一个DOMNode和一个函数指针

2) DOMNode 可能会“消失”——同样的事情可能会“发生”到函数中（尽管可能性较小）。

类似代码`<a onclick="a = (a?a+1:0);" id="getme">...`会产生一个匿名函数，您将通过`var anchor = document.getElementById('getme'); anchor.onclick`' 引用它来完美清除它`delete anchor.onclick`，除了分离事件侦听器之外，还必须这样做。

有些人可能会对这段代码发出警告，但它肯定会在点击时清除锚点

```
var a=document.getElementById('getme')
window.detachEvent("onclick", a.onclick);
delete a.onclick;
a.parentNode.removeChild(a) 
```

# ruby - 耙任务未运行

> ID：11461570
> 
> 赞同：0
> 
> 时间：2012-07-12T22:20:04.127
> 
> 标签：ruby, jruby, rake-task

每次我调用我的 rake 任务时，它都会说：

```
[2012-07-12 15:50:01] ERROR IOError: An existing connection was forcibly closed by the remote host
        C:/jruby-1.3.1/lib/ruby/1.8/webrick/httpresponse.rb:324:in `_write_data'
        C:/jruby-1.3.1/lib/ruby/1.8/webrick/httpresponse.rb:180:in `send_header'
        C:/jruby-1.3.1/lib/ruby/1.8/webrick/httpresponse.rb:103:in `send_response'
        C:/jruby-1.3.1/lib/ruby/1.8/webrick/httpserver.rb:79:in `run'
        C:/jruby-1.3.1/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
        C:/jruby-1.3.1/lib/ruby/1.8/webrick/server.rb:162:in `start'
[2012-07-12 15:50:29] ERROR IOError: An existing connection was forcibly closed by the remote host
        C:/jruby-1.3.1/lib/ruby/1.8/webrick/httpserver.rb:55:in `run'
        C:/jruby-1.3.1/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
        C:/jruby-1.3.1/lib/ruby/1.8/webrick/server.rb:162:in `start' 
```

我尝试了不同的选项，认为它可能是对 rake 任务的调用，但显然不是，我也尝试过 Mongrel 和 WEBRick，以防它可能是服务器。我正在使用 Jruby 1.3.1

**未执行的任务。**

这是我的代码的一部分：

```
application_controller.rb

 def call_rake(task, options = {})
    options[:rails_env] ||= Rails.env
    args = options.map { |n, v| "#{n.to_s.upcase}='#{v}'" }
    system "C:/jruby-1.3.1/lib/ruby/gems/1.8/gems/rake-0.8.7/lib/rake #{task} #{args.join(' ')} start"
  end

forbidden_file.rake

desc "Process CSV file"
task :process_file => :environment do
  forbidden_file = ForbiddenFile.find(ENV["csv"])
  forbidden_file.upload_file
end 
```

控制器

```
...
call_rake :process_file, :csv => params[:files]
redirect_to forbidden_files_url
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:44:57.300

它现在可以工作了，我刚刚`start`从命令中删除了这个词。

```
system "rake #{task} #{args.join(' ')}" 
```

# xml - XPath 同级提取

> ID：11461573
> 
> 赞同：9
> 
> 时间：2012-07-12T22:20:32.597
> 
> 标签：xml, xslt, xpath

示例文档：

```
<h4 class="bla">July 12</h4>
<p>Tim</p>
<p>Jon</p>
<h4 class="bla">July 13</h4>
<p>James</p>
<p>Eric</p>
<p>Jerry</p>
<p>Susie</p>
<h4 class="date">July 14</h4>
<p>Kami</p>
<p>Darryl</p> 
```

我想要做的是抓取 7 月 13 日发布的所有**p**节点。请注意，它们是**h4**的兄弟姐妹而不是子节点。所以在这个例子中，我想得到具有以下名字的**p**节点：James、Eric、Jerry 和 Susie。

我很接近以下内容，但它选择了 7 月 13 日**h4**节点之后的所有**p**节点，因为它们都是兄弟姐妹。换句话说，它没有停止条件。

 **```
//h4[string() = 'July 13']/following-sibling::p 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T23:38:27.170

使用这个 XPath：

```
//p[preceding-sibling::h4[1][. = 'July 13']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:35:54.823

尝试这个：

```
//p[preceding-sibling::h4/text() = 'July 13' and following-sibling::h4/text() = 'July 14'] 
```**

# class - 继承是这个基于“故事和选项”的冒险应用程序的正确选择吗？

> ID：11461580
> 
> 赞同：0
> 
> 时间：2012-07-12T22:20:57.443
> 
> 标签：class, inheritance, game-engine

一个朋友和我正在创建一个 Goosebumps 风格的冒险游戏，在每个阶段，用户都会看到一组潜在的 4 个选项，用户的选择会影响故事的结果。

我应该为此使用什么数据结构？

**这是我的主要思想**——对象

为了使游戏尽可能接近这些卡片的真实想法，创建一个“卡片”基类，并让许多其他卡片继承自此 - 超类将包含 Stringx5(x1story x4choiceStories) intx5 (x1CardIDNumber x4CardIDChoices) .

然后，这将允许我使用我们已有的材料轻松抽出对象，并有一个系统类控制用户选择的所有处理并在屏幕上显示信息。再一次有了系统和基础卡类，它将允许将来有不同的故事等等。尝试使其尽可能可重用并编写尽可能少的代码（我不会编写超过一千条`if`语句。）

我不清楚的一件事（以及我在无法找到答案时发布此问题的实际原因）：继承是否意味着其他类似但略有不同的类，例如经理和员工，让我的想法完全错误并大量浪费内存？

我研究了以下内容：

*   **哈希表**：这些示例似乎更面向电话簿，我认为它不适合我的需要
*   **定义故事类型的抽象**：似乎也不适合我的需要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:29:41.980

不需要继承，因为卡片完全相同，只是它们上的数据发生了变化。如果有特殊卡片的行为需要与其他卡片不同，我会使用继承。

您可以使用以下伪代码执行您想要的操作：

```
class Card {
    Card getChoice(int i); // returns choices[i]
    string storyText;
    Card[] choices; // Use an stl collection rather than an array for ease of addition.
} 
```

基本上，您创建每张卡，以便它链接到所有其他卡（这里的技巧是确保您以正确的顺序创建卡 - 简单的解决方案：没有选择地创建它们，然后通过一种`addChoice(Card)`方法添加不同的选择。

您的`Game`课程从第一张卡片开始（基本上是所有卡片的树头），并执行以下操作：

```
Card runCard(Card card)
{
    Card nextCard = null;
    showStoryText(card);
    // Display a line for each choice in the card and get the user's response.
    // Convert the response to the correct index.
    int selection = promptForAction(card);
    if (selection >= 0 && selection < card.numChoices()) {
        nextCard = card.getChoice(selection);
    }
    return nextCard;
}

void run()
{
    Card card = firstCard;
    while(card != null) {
        card = runCard(card);
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T22:29:11.377

这应该不会太糟糕。本质上，您需要一个树结构。

您的主要课程可能看起来像（请原谅我缺乏 C++ 知识）

```
class Node {

   Node option1;
   Node option2;
   Node option3;
   Node option4;   
} 
```

因此，您的`Node`实例可以指向`Node`.

拥有某种类型的 Node 实例集合可能会更好，这样您就可以拥有任意多或尽可能少的节点。您可以向节点添加一个字段，指示它是哪个选项（1、2 等）。

您唯一需要的另一件事是引用初始节点。

# mysql - 将 3 个表中的数据收集到 1 个查询中

> ID：11461587
> 
> 赞同：3
> 
> 时间：2012-07-12T22:21:17.037
> 
> 标签：mysql

我的 MySQL 数据库中有三个不同的表。

表用户：（id，分数，名称）
表团队：（id，标题）
表team_Members：（team_id，user_id）

我想做的是有 1 个查询来查找给定用户 ID 所属的每个团队 ID，以及以下信息：

1.  该团队的成员总数
2.  团队名称
3.  用户在团队中的排名（基于分数）

编辑：

所需的输出应如下所示；

```
TITLE (of the group)      NUM_MEMBERS       RANK
------------------------------------------------
Foo bar team              5                 2
Another great group       34                17
.
.
. 
```

查询应基于用户 ID。

非常感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:46:21.203

我认为这个查询应该得到你所要求的

```
select t.id, t.title, count(m.user_id) members, (
    select count(1)
    from users u3 
    inner join team_Members m3 on u3.id = m3.user_id 
    and m3.team_id = t.id and u3.score > (
        select score from users where name = 'Johan'
    )
) + 1 score
from teams t
inner join team_Members m on t.id = m.team_id
where t.id in (
    select team_id 
    from team_Members m2
    inner join users u2 on m2.user_id = u2.id
    where u2.name = 'Johan'
)
group by t.id, t.title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:43:15.287

要收集你只需要使用 JOIN

```
SELECT 
  u.*, t.*, tm.* 
FROM 
  users u 
JOIN 
  team_Members tm ON  u.id = tm.user_id 
JOIN 
  teams t ON t.id = tm.team_id; 
```

要获得该团队的总数，请使用 COUNT 和一些组键

有的这样

```
SELECT 
  COUNT(t.id), u.*, t.*, tm.* 
FROM 
  users u 
JOIN 
  team_Members tm ON u.id = tm.user_id 
JOIN 
  teams t ON t.id = tm.team_id GROUP BY t.id; 
```

并仅排名：

```
SELECT 
  COUNT(t.id) as number_of_members, u.*, t.*, tm.* 
FROM 
  users u 
JOIN 
  team_Members tm ON u.id = tm.user_id 
JOIN 
  teams t ON t.id = tm.team_id 
GROUP BY t.id 
ORDER BY u.score; 
```

# aptana - Win 7 64 慢速文件访问

> ID：11461595
> 
> 赞同：1
> 
> 时间：2012-07-12T22:22:31.163
> 
> 标签：aptana

我的所有项目都驻留在网络驱动器上（例如 H:)，使用 win xp 一切正常，在迁移到 win7 64 后，每个 I/O 操作都变慢了 10 倍。刷新工作区活动需要几分钟时间。有什么建议吗？

# android - 系统应用未接收到广播意图

> ID：11461596
> 
> 赞同：0
> 
> 时间：2012-07-12T22:22:31.763
> 
> 标签：android, android-intent, android-manifest

我有`BroadcastReciever`一个系统应用程序，我想发送一个`Intent`到（用于测试目的，因为我正在修改该系统应用程序）。

系统应用程序的`AndroidManifest.xml`外观如下：

```
<application android:label="@string/app_name">
    <receiver android:label="StateReceiver" android:name=".abstractor.StateReceiver" android:enabled="true" android:exported="true">
        <intent-filter>
            <action android:name="com.sec.android.contextaware.HEADSET_PLUG" />
            <action android:name="android.intent.action.LOCALE_CHANGED" />
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <action android:name="android.bluetooth.headset.profile.action.CONNECTION_STATE_CHANGED" />
            <category android:name="android.intent.category.HOME" />                
        </intent-filter>
    </receiver>
    <provider android:name=".manager.LoggingDataProvider" android:authorities="com.sec.android.contextaware.manager.LoggingDataProvider" />
</application> 
```

我使用一个测试应用程序并检查目标系统应用程序是否确实可以通过以下方式接收该意图：

```
Intent intent = new Intent();
intent.setAction("com.sec.android.contextaware.HEADSET_PLUG");

PackageManager pm = getPackageManager();
for (ResolveInfo resolveInfo : pm.queryBroadcastReceivers(bt, 0)) {
    Log.d("APP: ", resolveInfo.toString());
} 
```

并获取`ResolveInfo`系统应用程序的信息，因此它应该能够接收到意图。然后我通过以下方式广播意图：

```
sendBroadcast(intent); 
```

然而，没有任何反应，没有收到意图。我可以完全控制目标系统应用程序的清单文件和代码。是否有可能以某种方式传达意图？设备已植根。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:32:45.510

你试过 sendStickyBroadcast(intent) 吗？注册一个空接收器后，您应该能够检索最后一个发送的接收器。不确定它会有所帮助。顺便说一句，您要发送到的目标系统应用程序是什么？它没有到达那里，要么是因为它不允许，要么是因为你处理它的方式有问题：intent.setAction("com.sec.android.contextaware.HEADSET_PLUG");

我猜 com.sec.android.contextaware.HEADSET_PLUG 不允许接收或寻址不正确。特别是仔细检查 com.sec.android.contextaware.HEADSET_PLUG。

# preview - 用于呈现 OOXML (.docx) 文件的库

> ID：11461597
> 
> 赞同：0
> 
> 时间：2012-07-12T22:22:32.707
> 
> 标签：preview, docx

我正在研究以编程方式将 Microsoft Office XML 文件（在本例中为 .docx）呈现为图像*所需的工作量。*为了说明，我想为所述文件实现类似于 Apple 的 QuickLook 预览。要求：

1.  必须是可移植的（具体来说，它不能在 Windows 上运行，也不能在任何其他带有 Microsoft Office 的平台上运行）
2.  需要无头和合理的资源限制（想想 VPS！）。
3.  最好是一个独立的、维护良好的开源解决方案:)
4.  文本提取会很好（尽管可以使用另一个库 - 我已经有了这个）
5.  如果我找不到好的离线解决方案，好的在线服务可以作为最后的手段
6.  准确性很好，但不是这里的主要目标。

我试图找到这样一个图书馆的尝试并没有完全成功。有一些基于 Java 的项目似乎是从 OpenOffice 中涌现出来的，但它们要么看起来有点重量级，要么关注点错误（即文本提取、搜索、文档生成）。

重申一下，我希望*渲染*文档（例如，渲染为 PNG）。速度和内存使用比 OLE 图像、方程式、高级格式等功能更重要。

# java - 无法启动 Eclipse - Java 已启动但返回退出代码 = 13

> ID：11461607
> 
> 赞同：1020
> 
> 时间：2012-07-12T22:23:31.640
> 
> 标签：java, android, windows, eclipse, 32bit-64bit

我正在尝试第一次使用 Eclipse 进行 Android 开发。我在尝试运行 Eclipse 时遇到了这个问题，几分钟前才安装了 4.2 版。

在第一次尝试在`Eclipse`没有任何参数的情况下启动以指定 Java VM 后，我收到一条错误消息`couldn't find a Java VM called javaw.exe inside the Eclipse folder`，因此我找到了 Java 的安装位置并将该位置指定为快捷方式目标中的参数。现在我得到一个不同的错误，`Java was started but returned exit code=13`.

类似的问题似乎表明这是一个 32 位/64 位冲突，但我 99% 肯定我下载了 Eclipse 和 的 64 位版本`Java (RE 7u5)`，我之所以选择它是因为我有 64 位 Windows 7。

*   如果有人知道如何确认我的 Eclipse 和 Java 是 64 位的，那将不胜感激。
*   如果您认为我的问题是另一个问题，请帮助！
*   请尽可能简单地说，因为我对 Eclipse 和 Java 完全陌生。

> 快捷方式目标："C:\Program Files\Eclipse-SDK-4.2-win32-x86_64\eclipse\eclipse.exe" -vm "C:\Program Files (x86)\Java\jre7\bin\javaw.exe"

**完整的错误代码...：**

```
Java was started but returned exit code=13
C:\Program Files (x86)\Java\jre7\bin\javaw.exe
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m
-jar C:\Program Files\Eclipse-SDK-4.2-win32-x86_64\eclipse\\plugins/org.eclipse.equinox.launcher_1.30v20120522-1813.jar
-os win32
-ws win32
-arch x86_64
-showsplash C:\Program Files\Eclipse-SDK-4.2-win32-x86_64\eclipse\\plugins\org.eclipse.platform_4.2.0.v201206081400\splash.bmp
-launcher C:\Program Files\Eclipse-SDK-4.2-win32-x86_64\eclipse\eclipse.exe
-name Eclipse
--launcher.library C:\Program Files\Eclipse-SDK-4.2-win32-x86_64\eclipse\\plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v201205221813\eclipse_1503.dll
-startup C:\Program Files\Eclipse-SDK-4.2-win32-x86_64\eclipse\\plugins/org.eclipse.equinox.launcher_1.30v20120522-1813.jar
--launcher.overrideVmargs
-exitdata 1e30_5c
-vm C:\Program Files (x86)\Java\jre7\bin\javaw.exe
-vmargs
-Xms40m
-Xmx512m
-XX:MaxPermSize=256m
-jar C:\Program Files\Eclipse-SDK-4.2-win32-x86_64\eclipse\\plugins/org.eclipse.equinox.launcher_1.30v20120522-1813.jar 
```

* * *

## 回答 #1

> 赞同：766
> 
> 时间：2012-07-12T22:29:51.610

您的 Eclipse 版本是 64 位的，基于路径和文件名。但是，它正在使用的 Java 版本是 32 位的，正如它来自哪里所表明的那样，在这一行：

```
-vm C:\Program Files (x86)\Java\jre7\bin\javaw.exe 
```

`Program Files (x86)`是 64 位 Windows 放置**32 位**程序的文件夹。

`Program Files`是 64 位 Windows 放置**64 位**程序的文件夹。

当系统安装了多个 JVM 时，可能会发生这种情况，这在 Windows 64 位上通常是这种情况（例如，JRE 下载页面使用浏览器的位数来确定为您提供的下载位数，许多人使用（d）32 位浏览器，即使他们运行的是 64 位 Windows）。

假设您的系统上确实有 64 位 JRE 或 JDK，解决此问题的最佳方法是`eclipse.ini`准确指定您希望它在哪个 JVM 中使用。[说明在Eclipse wiki 页面](https://wiki.eclipse.org/Eclipse.ini)中有详细说明，但基本上您必须`-vm`在 ini 文件中指定选项 - 请务必仔细阅读 wiki 页面，因为格式非常具体。

强烈建议在其中指定 JVM 路径，`eclipse.ini`因为这样做可以将 Eclipse 与某些程序安装程序可能对您的系统进行的任何潜在更改隔离开`PATH`（我在与您交谈，Oracle！）。

另一种选择是下载并使用 32 位 Eclipse 而不是 64 位，但仍然强烈建议在`eclipse.ini`.

* * *

*留作历史参考*：

要检查您的 Java 版本，请运行

```
  java版本 

```

在控制台（命令提示符）中。在带有 64 位 Java 6 的 Windows 7 上，我得到：

```
  java版本“1.6.0_27”
  Java(TM) SE 运行时环境 (build 1.6.0_27-b07)
  Java HotSpot(TM) 64 位服务器 VM（内部版本 20.2-b06，混合模式）

```

请注意第 3 行，这表明这是 64 位版本。

在 32 位版本上，您将获得如下内容：

```
  Java HotSpot(TM) Client VM（build 20.1-b02，混合模式，共享） 

```

如果您使用的是 64 位机器，那么您可以安装 64 位 JDK 并卸载 32 位 JDK。例如，在 Windows 10 上，只需转到“设置”并在“应用程序”下找到 Java。单击它，您将找到所有不同的版本。现在您可以选择要卸载哪一个。

* * *

## 回答 #2

> 赞同：257
> 
> 时间：2014-11-03T07:20:05.400

我收到此错误并发现我的 PATH 变量（在 Windows 上）可能已更改。首先在我的 PATH 是这个条目：

```
C:\ProgramData\Oracle\Java\javapath 
```

...然后 Eclipse 运行了`"C:\ProgramData\Oracle\Java\javapath\javaw"`- 这给出了错误。我怀疑这是随 Java 8 安装而来的。

我安装了几个 Java 版本（6,7 和 8），所以我从 PATH 中删除了该条目并尝试再次重新启动 Eclipse，它工作正常。

如果它不适合您，您需要升级您的 JDK（到 Java 版本 - 在这种情况下为 8）。

[有关如何编辑 PATH 变量的说明](https://java.com/en/download/help/path.xml)

* * *

## 回答 #3

> 赞同：226
> 
> 时间：2017-01-03T10:54:34.317

有 OS、JDK 和 Eclipse bitness 的工作组合。就我而言，我在 64 位操作系统上使用 64 位 JDK 和 32 位 Eclipse。将 JDK 降级到 32 位后，Eclipse 开始工作。

**使用以下组合之一。**

*   32 位操作系统、32 位 JDK、32 位 Eclipse（仅限 32 位）
*   64 位操作系统、32 位 JDK、32 位 Eclipse
*   64 位操作系统、64 位 JDK、64 位 Eclipse（仅限 64 位）

* * *

## 回答 #4

> 赞同：182
> 
> 时间：2014-10-30T14:06:09.443

如果您最近安装了 Java 8 并卸载了 Java 7，请安装 JDK 8 并重试。

* * *

## 回答 #5

> 赞同：124
> 
> 时间：2014-12-03T07:03:49.027

对我来说，解决方案是进入（在 Windows 8.1 上）：

```
System > Advanced system setting > Environment Variables 
```

在“路径”变量中的“系统变量”下，首先有以下内容：

```
C:\ProgramData\Oracle\Java\javapath; 
```

我删除了这个，Eclipse 又开始工作了！

* * *

## 回答 #6

> 赞同：66
> 
> 时间：2013-01-23T09:22:18.927

我有同样的问题，**Java 已启动但返回 exit code=13**。

我的解决方案是为 Windows 属性*变量名*= PATH*变量值*= **C:\Program Files\Java\jdk1.7.0_02\bin**创建一个环境变量，而不是**C:\Program Files (x86)\Java\jre7\bin**。

接下来我在文件`eclipse.ini`→ C:\Program Files\Java\jdk1.7.0_02\bin\javaw.exe 中添加了一行。

这对我有用。

* * *

## 回答 #7

> 赞同：26
> 
> 时间：2014-12-13T18:20:19.357

![在此处输入图像描述](../Images/3ecf7c7bb28b25743e8abdf003230b77.png)

通过执行以下步骤解决了该问题。

1.  Eclipse 从 'C:\ProgramData\Oracle\Java\javapath' 中找到 JAVA 可执行文件

2.  文件夹结构将包含以下可执行文件的快捷方式，
    即。java.exe
    二。javaw.exe
    三。javaws.exe

3.  对我来说，可执行路径指向我的**Program Files(x86)**（32 位应用程序的主目录）文件夹位置

4.  我将其更正为**Program Files**（其中包含 64 位应用程序）并且问题得到了解决

请找到相同的屏幕截图。

* * *

## 回答 #8

> 赞同：25
> 
> 时间：2015-03-16T13:52:48.527

将 vm 参数添加到 .ini 文件对我有用

```
-vm
C:\Program Files\Java\jdk1.7.0_65\bin\javaw.exe 
```

为此添加更多细节

对于 sts 3.9.18 版本，我收到错误 Java 已启动但返回退出代码 = 13，对于最新版本，相同的问题只是返回的退出代码为 14。这是由于默认选择的 java 是 32 位，而这个版本的 sts/ eclipes 适用于 64 位。通过在 STS.ini 文件中将 java 的 64 位版本设置为 -vm C:\Progra~1\Java\jdk1.8.0_131\bin\javaw.exe 这在文件中的 vmargs 参数之前解决了这个问题。

* * *

## 回答 #9

> 赞同：23
> 
> 时间：2012-12-04T10:50:27.413

有史以来最奇怪的修复。查看您的 Eclipse 路径，并确保您没有奇怪的字符（如`!`、`#`和`@`）。它对我有用。

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2016-10-25T01:31:28.550

找到eclipse.ini：

经常在`C:\Users\xxx\eclipse\jee-neon\eclipse`, 添加

```
-vm
 C:\Program Files (x86)\Java\jre7\bin\javaw.exe 
```

后

```
--launcher.appendVmargs 
```

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2014-10-21T06:22:19.487

我卸载了 Java update 25，问题就解决了。

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2015-02-13T12:46:23.380

在我的情况下，干净地重新安装[Java JDK就可以解决问题。](http://www.oracle.com/technetwork/java/javase/downloads/index.html)我现在像魅力一样运行[Eclipse 4.4 (Luna)。](https://projects.eclipse.org/releases/luna)

* * *

## 回答 #13

> 赞同：11
> 
> 时间：2019-04-05T10:27:36.700

您必须转到安装 eclipse 的文件夹，然后您必须更改 eclipse.ini 文件。

你必须添加

-vm

C:\Program Files\Java\jdk1.8.0_202\bin\javaw.exe

您的 eclipse.ini 文件将如下面的屏幕截图所示

[![在此处输入图像描述](../Images/7be7e6df1a2c2b7ace4ecac9caad2255.png)](https://i.stack.imgur.com/piV9N.png)

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2012-10-25T01:44:14.917

解决方案很简单：将“eclipse”文件夹放在“C:/Program Files”上。如果它不起作用，请将其放入“C:/Program Files (x86)”中。

* * *

## 回答 #15

> 赞同：10
> 
> 时间：2015-06-22T02:51:26.723

原来我只安装了 32 位 Java 运行时。

```
C:\Program Files (x86)\Java\jre1.8.0_45\ 
```

Eclipse 真正想要的只是让我安装 64 位 Java 运行时。<= 已解决

```
Java SE Runtime Environment 8u45  jdk-8u45-windows-x64.exe 
```

[http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html](http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html)

```
Confirm your installation by checking you now have this folder

    C:\Program Files\Java\jre1.8.0_45\ 
```

* * *

## 回答 #16

> 赞同：9
> 
> 时间：2015-02-10T09:13:09.017

这里的最佳答案太长了。我无法发表评论，所以我添加了我的答案。

1.  去这里： [http ://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)
2.  下载最新的 SDK（如果您的计算机是 x64，当然适用于 x64）
3.  安装它
4.  现在聚会结束了，是时候使用 Eclipse 了；）

* * *

## 回答 #17

> 赞同：9
> 
> 时间：2015-02-21T13:49:43.230

当我忘记安装 JDK 时，我收到了这条消息。

* * *

## 回答 #18

> 赞同：7
> 
> 时间：2014-08-07T05:37:57.500

我有同样的问题。我使用的是带有 64 位操作系统的 Windows 8。我只是改变了路径`Program Files (x86)`，然后它开始工作。我将这一行放在 eclipse.ini 文件中：

```
-vm
 C:\Program Files (x86)\Java\jre7\bin\javaw.exe 
```

* * *

## 回答 #19

> 赞同：6
> 
> 时间：2013-05-27T10:15:28.677

确保 Eclipse 路径中没有特殊字符（`%`、`$`、`#`等）。

* * *

## 回答 #20

> 赞同：6
> 
> 时间：2014-10-23T08:49:29.153

如果您在具有 32 位 JRE 的 PC 上安装 64 位 Eclipse 版本，则保证会发生这种情况。

因此解决方案非常简单：您需要通过更新其中任何一个来同步它们。当下载 Oracle Fusion 中间件并且 Eclipse 需要 32 位环境而您的 JRE 是 64 位并且您的 JAVA 主目录指向 64 位 JDK 时，就会发生这种情况。

* * *

## 回答 #21

> 赞同：6
> 
> 时间：2017-11-04T08:21:14.230

1.  在系统环境变量下，确保删除“C:\ProgramData\Oracle\Java\javapath”。

2.  在系统环境变量下，确保添加了“C:\Program Files\Java\jdk1.8.0_131\bin”。

[![在此处输入图像描述](../Images/0a3b0e41be766d759ba91adf0bdf9c7f.png)](https://i.stack.imgur.com/FQWLE.png)

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2014-11-24T06:35:15.760

我尝试了一些解决方案，但对我不起作用。

最后，我找到了另一种方法，...

转到*环境变量*→*系统变量*

将**C:\Program Files\Java\jdk1.7.0_02\bin\javaw.exe**设置为系统变量中的路径。

尝试一下。它对我有用...

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2014-12-18T10:17:11.860

我尝试了以下解决方案：

*我从路径C:\Program Files\Java\jdk1.7.0_71\bin*创建了 javaw.exe 的快捷方式，并将其粘贴到路径*C:\ProgramData\Oracle\Java\javapath*中。

之后，我启动了 Eclipse，它对我有用。

* * *

## 回答 #24

> 赞同：5
> 
> 时间：2015-01-06T22:58:04.390

我有这个问题。我通过 Chrome 安装了 Java 8 update 25，然后尝试启动 Eclipse 的程序给出了上述错误。

卸载该更新，Eclipse 再次运行。

* * *

## 回答 #25

> 赞同：5
> 
> 时间：2015-03-13T07:35:59.320

我也遇到了同样的问题。事实证明，环境变量**Path**指向的 Java 版本不正确。

请检查环境变量并将其指向正确的 Java。例如：

```
C:\Program Files (x86)\Java\jdk1.6.0_17\bin 
```

要检查环境变量，请转到：

```
Computer → properties → Advanced system settings → Advanced -> Environment variables 
```

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2012-07-12T22:38:24.783

可能是内存太少了。您可以修改 eclipse.ini 文件以增加内存。类似这样的内容可能会对您有所帮助：*[FAQ 如何增加 Eclipse 可用的堆大小？](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F)*

* * *

## 回答 #27

> 赞同：4
> 
> 时间：2014-11-06T16:28:14.757

我刚刚在设置我的 Windows 8.1 PC 时解决了同样的问题。就像上面提到的@George Papatheodorou（对不起，我无法添加评论）一样，Eclipse 和 JRE 必须都是 64 位或 32 位的。

但是，对于 Windows 8/8.1 环境，默认情况下您将获得 32 位 JRE（我不知道在哪里更改该默认值以进行下载），如下所述：http: [//java.com/ zh/下载/faq/win8_faq.xml](http://java.com/en/download/faq/win8_faq.xml)

我使用的是 64 位 Eclipse，所以存在差异。然后我安装了 32 位 Eclipse，这次一切正常。

因此，在更改任何环境变量之前，请检查您的 JRE 和 Eclipse 版本。

当然，您可以将 64 位 JRE 与 64 位 Eclipse 一起使用。只需确保它们匹配，因为 Windows 8.1 默认为您提供 32 位。

* * *

## 回答 #28

> 赞同：4
> 
> 时间：2015-01-23T13:59:42.083

在我的 Windows 7 系统（64 位系统）上安装 Java 8 后，我遇到了类似的错误。

更改环境变量等没有帮助。所以我试图删除 Java Update 8，但这也没有帮助。下载并安装 64 位版本的 Java 8 SDK 解决了我的问题。我希望这有帮助。

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2015-02-08T17:10:40.450

将 JDK 从 1.7 升级到 1.8 后，我遇到了同样的问题。我正在使用 Eclipse 4.4 (Luna)。将 JDK 降级到 1.7 后，该错误消失了。

* * *

## 回答 #30

> 赞同：4
> 
> 时间：2016-09-26T08:55:40.967

请检查您是否在环境变量部分设置了两个 JAVA 路径。如果您已经安装了两个版本的 JDK，它可能是，然后仔细检查您是否已将 PATH for Java 如下所示。

```
PATH -->  C:\ProgramData\Oracle\Java\javapath 
```

并且

```
JAVA_HOME ---> C:\Program Files\Java\jdk1.7.0_02\bin 
```

如果两者都存在，则可能会发生这种错误。

如果没问题，则检查“.ini”文件下面的区域是否正常。打开“.ini”文件并检查

```
 -VM  path is  C:\Program Files\Java\jdk1.7.0_79\bin\ 
```

如果没有，请这样设置并再次运行。

* * *

## 回答 #31

> 赞同：4
> 
> 时间：2020-02-04T11:50:43.637

在“路径”变量中删除了“C:\ProgramData\Oracle\Java\javapath”并将其替换为“C:\Program Files\Java\jdk1.8.0_212\bin”

它对我有用。

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2015-07-26T19:48:31.223

这种类型的错误基本上是由于使用不同版本的 Java 和不同版本的 Eclipse 造成的。

假设您正在系统上安装 64 位 JDK。然后确保您安装了 64 位版本的 Eclipse。

如果您在系统上安装 32 位 JDK，请确保您安装了 32 位版本的 Eclipse。

我有类似的问题。我已经安装了 32 位 JDK 并尝试使用 64 位 Eclipse。

但是当我在我的系统上安装 64 位 JDK 时，Eclipse 开始工作，没有任何问题。

建议在具有 32 位配置的系统上更好地安装 32 位版本的 Java 和 32 位版本的 Eclipse，同样适用于 64 位系统。

这有助于提高系统的性能。

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2014-10-21T16:01:45.470

如果您在同一台机器上有多个 Java 版本，则可能会发生这种情况。为了解决这个问题，我做了以下事情：

1.  检查当前的 JAVA_HOME 值。在 Windows 中，回显`%JAVA_HOME%`
2.  访问javaw.exe的路由
3.  替换了指向 Java 主位置的快捷方式。

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2014-12-15T18:30:09.887

我有一个 x64 位 JDK。我的路径设置中没有任何内容。所以我安装了x86 JDK。这完美地解决了我的问题。

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2014-12-26T09:03:43.967

如果没有任何效果，那么您可以尝试的最后一个解决方案是从您的计算机上完全卸载 Java，然后重新安装，并确保路径变量设置正确。

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2017-12-27T02:39:52.570

冒着没有为现有答案增加大量价值的风险，但我自己经历了所有这些混乱，我想看看我是否可以巩固我如何解决这个问题：

1.  与您的正常机器环境保持单独的开发。原因是您的机器上可能运行着许多您不知道的应用程序需要偶尔更新 Java，例如银行和安全应用程序。当这些更新发生时，它们会更改环境变量，因此如果您在开发环境中使用这些更新，那么更新几乎肯定会破坏您的 Eclipse 设置。

2.  安装 32 位和 64 位的 Eclipse 版本，具体取决于您的插件等。原因是许多插件仍然需要 32 位，并且尝试将它们安装到 64 位环境会导致许多晦涩（非常晦涩）的错误。这意味着例如，您可能必须为 Java EE、PHP、Python、Assembler 等开发环境拥有单独的 Eclipse 实例。这可能看起来很繁重，但对我来说这是一种祝福。

3.  再次安装两个 Java 运行时一个 32 位和一个 64 位，然后编辑每个安装的 eclipse.ini 以指向正确的 JRE，**而不是**环境变量中的 JRE HOME。我在你的 eclipse.ini 文件中创建了一个目录，`C:\Java\64bit\jdk1.7.0_15\`在`C:\Java\32bit\etc`你的 eclipse.ini 文件中添加 -vm`C:\Java\64bit\jdk1.7.0_15\bin`行以指向你需要的 java 运行时。

完成上述操作后，您可以随心所欲地安装 Java SDK 更新，但您的开发环境永远不会中断。如果您需要更新您的开发运行时环境，只需更改 eclipse.ini 中的 -vm 路径

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2019-08-24T18:12:49.323

如果您的机器安装了多个 Java 版本，您可以简单地告诉 eclipse 使用哪个以及从何处使用 javaw.exe。

在我的情况下，我有 IBM JDK，也有 oracle JDK，但是为了让 eclipse 拾取，在 eclipse 目录中的**eclipse.ini**文件中添加了以下行，它可以工作。

```
-vm
C:/WAS9DEV/java/8.0/bin/javaw.exe 
```

*在上面的示例中，必须替换您的 java 文件夹的路径*

希望能帮助到你。

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2014-10-27T15:53:33.543

我发现我错误地安装了 32 位 Eclipse，并试图将它与 64 位 JRE 一起使用，这就是我收到此错误的原因。要查看您是否安装了 32 位或 64 位 Eclipse，请参阅此答案：[https ://stackoverflow.com/a/9578565/191761](https://stackoverflow.com/a/9578565/191761)

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2014-11-18T14:38:00.353

我面临着同样的问题。我已经安装了版本 8 并更新了 25 32 位。

要修复，请安装 Java SE Development Kit 7 Update 71（64 位）。然后通过appwiz.cpl，删除其他版本，即Java Update 25。完成。

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2016-01-21T22:11:43.313

我通过安装 JDK（v7 更新 80）解决了这个问题，而我之前只安装了 JRE。

注意：这是针对 IBM 的[RTC](https://en.wikipedia.org/wiki/Rational_Team_Concert)软件（基于 Eclipse 构建的）。

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2016-05-27T07:51:02.290

最佳答案对我不起作用：我没有定义 Java 路径的环境变量，或者我的路径中没有 Java。

但是，路径 C:\ProgramData\Oracle\Java\javapath\javaw.exe 始终出现在`-vm`选项中的 Eclipse 4.5 (Mars) 错误弹出窗口中，即使我试图在文件 eclipse.ini 中覆盖也是如此。

我通过打开命令提示符来解决这个问题，cd'ing eclipse.exe 所在的目录并使用[MKLink](http://ss64.com/nt/mklink.html)：

```
C:\EclipseMars> mklink javaw.exe "C:\Program Files\Java\jdk1.7.0_79\bin"
symbolic link created for javaw.exe <<===>> C:\Program Files\Java\jdk1.7.0_79\bin 
```

不需要对 eclipse.ini 进行任何更改。

我确实尝试`-vm`在 eclipse.ini 中指定选项，并且已将其考虑在内，但在错误弹出窗口`-vm`中，即使`-vm`eclipse.ini 中只有一个选项，也会出现两次选项。

在我的 eclipse.ini 中，我别无选择`-vm`，只是符号链接似乎已经纠正了它。

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2019-09-30T10:29:55.893

就我而言，我有两个不同的 JDK，即 IBM 和 Oracle JDK。我将 IBM JDK 移动到环境变量中的 Oracle JDK 的顶部，然后它起作用了。注意：我打算使用 IBM JDK，所以我向上移动了。

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2020-05-14T20:55:22.940

可能是JDK组合问题或JDK版本问题选择正确的一个。我正在使用 64 位操作系统、64 位 JDK、64 位 Eclipse IDE 的组合。

* * *

## 回答 #44

> 赞同：-1
> 
> 时间：2018-02-27T03:21:45.943

我遇到了同样的问题...安装了 STS 但始终收到“java 已启动但返回退出代码 = 13”消息。[我的问题是我使用的是来自https://spring.io/tools/sts](https://spring.io/tools/sts)的默认安装文件，该文件不是特定于处理器的。我必须深入研究才能非常具体地下载 64 位版本。您下载的版本并不直观。一旦我获得了 64 位版本（请注意，zip 文件的名称中仍然包含“win32”，只是在末尾附加了“-64”），它就可以工作了。

# c++ - C++ - shared_ptr 出现“非专业类模板”错误

> ID：11461609
> 
> 赞同：1
> 
> 时间：2012-07-12T22:23:48.987
> 
> 标签：c++, templates, shared-ptr

我有一个类 Room，它包含一个 shared_ptrs 到 Option 对象的向量，如下所示：

```
private:
vector<shared_ptr<Option> > options; 
```

但是由于某种原因，当我构建时，我收到以下错误：

*   “shared_ptr”：非特化类模板不能用作模板参数“_Ty”的模板参数，需要一个真实类型
*   'std::tr1::shared_ptr' : 使用类模板需要模板参数列表

奇怪的是，我还有一个 shared_ptrs 向量，语法完全相同，但那个没有问题。

还有很多地方会出现错误“'Option': undeclared identifier”，这让我觉得这可能是 Option 类的问题，但似乎没问题。这是选项的代码：

选项.h：

```
#pragma once
#include "Room.h"
#include <memory>

using namespace std;

class Option
{
protected:
    int id;
    char* text;

public:
    Option(void);
    Option(int, char*);
    virtual ~Option(void);
    char* getText();
    int getID();
}; 
```

选项.cpp：

```
#include "Option.h"
#include "Room.h"
#include <memory>
using namespace std;

Option::Option(void)
{
}

Option::Option(int newID, char* newText){
    id = newID;
    text = newText;
}

Option::~Option(void)
{
}

char* Option::getText(){
    return text;
}

int Option::getID(){
    return id;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T23:01:50.957

由于您尚未发布该`Room`课程的代码，因此此答案存在一些猜想。我假设这段代码

```
private:
vector<shared_ptr<Option> > options; 
```

在*Room.h*中。您的*Option.h*文件包含*Room.h*，因此该类在该类`Room`之前被声明`Option`。`Option`当`Room`类的析构函数被编译并且`shared_ptr`实现试图删除`Option`对象时，一个不完整的类型也是如此。

从上面的代码，我看不出为什么*Option.h*需要包含*Room.h*，其实应该是反过来的。如果确实需要包含该文件，您应该能够通过在*Room.cpp*`Room::~Room()`中明确声明out-of-line来解决该问题。

 ***编辑：**
原来`~shared_ptr<T>` [不需要 T 是一个完整的类型](http://home.roadrunner.com/~hinnant/incomplete.html)。但是，`shared_ptr<T>( T* )`确实`shared_ptr<T>::reset( T* )`，问题可能是因为对 的某些操作`vector`正在调用其中之一（更可能是前者）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T22:26:09.790

```
vector<shared_ptr<Option >> 
```

你*几乎*做对了:)

```
vector<shared_ptr<Option> > 
```

触摸时，这两个`>`字符会导致您看到的奇怪错误。它被解释为`>>`运算符。

顺便说一句，感谢您*按原样*发布代码，而不是重新输入代码并可能隐藏错误。*

# c# - WCF 无法通过 HTTPS 工作

> ID：11461613
> 
> 赞同：3
> 
> 时间：2012-07-12T22:24:09.477
> 
> 标签：c#, wcf

我查看了所有其他解决方案，但没有一个有效。我正在使用 IIS 托管 WCF 服务。以下是我的 web.config（添加 WCF 服务时的默认设置）：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
      </assemblies>
    </compilation>
    <customErrors mode="Off" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
</configuration> 
```

一切都很好，我可以使用[http://www.domain.com/path/service.svc](http://www.domain.com/path/service.svc)和[https://www.domain.com/path/service.svc](https://www.domain.com/path/service.svc)在浏览器中访问我的 wcf 服务- 现在我添加了一个在 Windows 控制台应用程序中对[https://www.domain.com/path/service.svc](https://www.domain.com/path/service.svc)的Web 引用，以下在我的 app.config 中：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="defaultBasicHttpBinding">
          <security mode="Transport">
            <transport clientCredentialType="None" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://www.domain.com/path/service.svc" binding="basicHttpBinding" bindingConfiguration="defaultBasicHttpBinding" contract="DomainExt.IExt" name="BasicHttpBinding_IExt" />
    </client>
  </system.serviceModel>
</configuration> 
```

以下代码是我用来测试服务的代码：

```
public static String DoPing()
{
     ExtClient client = new ExtClient("BasicHttpBinding_IExt", "https://www.domain.com/path/service.svc");
     return client.DoPing();
} 
```

运行此程序后，出现以下异常：

> 在[https://www.domain.com/path/service.svc](https://www.domain.com/path/service.svc)上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

内部异常状态：

> “远程服务器返回错误：（404）未找到。”

该服务在 http 上运行良好，但在 https 上失败。我怎样才能解决这个问题？请注意，我使用 Windows 控制台而不是通过 ASP.NET 访问此服务；ASP.NET 仅托管 WCF 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:00:50.730

尝试设置**httpsGetEnabled** ="true" 而不是 httpGetEnabled

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpsGetEnabled="true" /> 
```

编辑：如果您使用 SSL，我也很好奇您为什么选择 BasicHttpBinding。为什么不使用 WsHttpBinding？

`<services>`EDIT2：您的主机配置文件中是否缺少节点？我不认为你可以创建一个没有客户的客户。您可以右键单击您的 app.config 文件并在其中进行配置...像这样：

```
 <services>
        <service behaviorConfiguration="MyServiceBehavior" name="MyService">
            <endpoint address="" binding="defaultBasicHttpBinding" bindingConfiguration="basicBinding" contract="IMyService" />

        </service>
    </services>
    <behaviors> 
  <serviceBehaviors>
    <behavior name="MyServiceBehavior"> 
```

# game-engine - 暗黑破坏神3可以在linux上通过wine运行吗？

> ID：11461619
> 
> 赞同：-3
> 
> 时间：2012-07-12T22:24:28.383
> 
> 标签：game-engine, wine

如果有一个howto链接或类似的错误立即接受 - 我迫切希望用我的固定燕尾服箱而不是性能较差的笔记本电脑来运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:27:43.270

最好查看暗黑破坏神 III 的 WineHQ 页面：[http ://appdb.winehq.org/objectManager.php?sClass=version&iId=25953](http://appdb.winehq.org/objectManager.php?sClass=version&iId=25953)

它似乎可以正确安装和运行。与许多其他 Windows 游戏一样，已报告了许多问题。看起来它在 Ubuntu 上运行得最好。

# bash - 反转字符串中字符的顺序

> ID：11461625
> 
> 赞同：80
> 
> 时间：2011-01-23T06:38:27.350
> 
> 标签：bash

在字符串“12345”中，在字符串“54321”中。最好没有第三方工具和正则表达式。

* * *

## 回答 #1

> 赞同：185
> 
> 时间：2011-01-23T08:35:13.220

我知道你说“没有第三方工具”，但有时一个工具显然是正确的，而且它默认安装在大多数 Linux 系统上：

```
[madhatta@risby tmp]$ echo 12345 | rev
54321 
```

有关更多信息，请参见[`rev`的手册页](https://www.man7.org/linux/man-pages/man1/rev.1.html)。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2011-01-23T06:41:15.103

简单的：

```
var="12345"
copy=${var}

len=${#copy}
for((i=$len-1;i>=0;i--)); do rev="$rev${copy:$i:1}"; done

echo "var: $var, rev: $rev" 
```

输出：

```
$ bash rev
var: 12345, rev: 54321 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-02-12T22:00:22.843

假设变量“var”的值为“123”

```
var="123" 
```

反转字符串并存储在新变量“rav”中：

```
rav=$(echo $var | rev) 
```

您会看到使用 echo 的 'rav' 的值为 '321'。

```
echo $rav 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-11T08:56:20.643

`rev | tail -r`(BSD) 或`rev | tac`(GNU) 也反转行：

```
$ rev <<< $'12\n34' | tail -r
43
21
$ rev <<< $'12\n34' | gtac
43
21 
```

如果 LC_CTYPE 是 C，rev 反转多字节字符的字节：

```
$ LC_CTYPE=C rev <<< あの
��め�
$ export LC_ALL=C; LC_ALL=en_US.UTF-8 rev <<< あの
のあ 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-01-08T01:50:36.713

一个 bash 解决方案改进了@osdyng 的答案（我的编辑未被接受）：

```
var="12345"     rev=""

for(( i=0 ; i<${#var} ; i++ )); do rev="${var:i:1}$rev"; done

echo "var: $var, rev: $rev" 
```

或者更简单的（bash）循环：

```
var=$1   len="${#var}"   i=0   rev=""

while (( i<len )); do rev="${var:i++:1}$rev"; done

echo "var: $var, rev: $rev" 
```

POSIX 解决方案：

```
var="12345"     rev=""    i=1

while  [ "$i" -le "${#var}" ]
do     rev="$(echo "$var" | awk -v i="$i" '{print(substr($0,i,1))}')$rev"
       : $(( i+=1 ))
done

echo "var: $var, rev: $rev" 
```

注意：这适用于多字节字符串。剪切解决方案仅适用于 ASCII（1 字节）字符串。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2011-01-23T07:13:11.310

这将字符串“就地”反转：

```
a=12345
len=${#a}
for ((i=1;i<len;i++)); do a=$a${a: -i*2:1}; done; a=${a:len-1}
echo $a 
```

或者第三行可能是：

```
for ((i=0;i<len;i++)); do a=${a:i*2:1}$a; done; a=${a:0:len} 
```

或者

```
for ((i=1;i<len;i++)); do a=${a:0:len-i-1}${a: -i:i+1}${a:len-i-1:1}; done 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-10-05T20:26:29.910

反转字符串的一些简单方法

```
echo '!!!esreveR si sihT' | grep -o . | tac | tr -d '\n' ; echo

echo '!!!esreveR si sihT' | fold -w 1 | tac | tr -d '\n' ; echo 
```

转换为十六进制值然后反转

```
echo '!!!esreveR si sihT' | xxd -p | grep -o .. | tac | xxd -r -p ; echo

echo '!!!esreveR si sihT' | xxd -p | fold -w 2 | tac | xxd -r -p ; echo 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-01-08T05:18:20.557

对于那些没有**rev**（推荐）的人，有以下简单的**awk**解决方案，它拆分空字符串上的字段（每个字符都是一个单独的字段）并反向打印：

```
awk -F '' '{ for(i=NF; i; i--) printf("%c", $i); print "" }' 
```

上面的**awk**代码是 POSIX 兼容的。由于保证了兼容的**awk**实现在每个 POSIX 兼容的操作系统上，因此不应将解决方案视为“第 3 方”。此代码可能比纯 POSIX **sh**（或**bash**）解决方案更简洁易懂。

（；我不知道您是否将 -F 的空字符串视为正则表达式...；）

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-12-11T02:09:34.537

如果`var=12345`：

[重击](/questions/tagged/bash "显示标记为“bash”的问题") `for((i=0;i<${#var};i++)); do rev="$rev${var:~i:1}"; done`

[嘘](/questions/tagged/sh "显示标记为“sh”的问题") `c=$var; while [ "$c" ]; do rev=$rev${c#"${c%?}"}; c=${c%?}; done`

```
echo "var: $var, rev: $rev" 
```

运行：

```
$ rev
var: 12345, rev: 54321 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-04-10T15:20:39.860

这当然可以缩短，但应该很容易理解：最后`print`添加了换行符。

```
echo 12345 | awk '{for (i = length($0); i > 0; i--) {printf("%s", substr($0, i, 1));} print "";}' 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-01-14T03:21:55.360

似乎没有人发布`sed`解决方案，所以这里有一个适用于非 GNU sed 的解决方案（所以我不会认为它是“第 3 方”）。它确实使用 regex 捕获单个字符`.`，但这是唯一的正则表达式。

分两个阶段：

```
$ echo 123456 | sed $'s/./&\\\n/g' | sed -ne $'x;H;${x;s/\\n//g;p;}'
654321 
```

这使用 bash 格式替换在脚本中包含换行符（因为问题被标记为[bash](/questions/tagged/bash "显示标记为“bash”的问题")）。它首先将输入字符串分成每个字符一行，然后将每个字符插入到保持缓冲区的开头。

*   `x`交换保持空间和模式空间，并且
*   `H`H 将（当前）模式空间附加到保持空间。

因此，对于每个字符，我们将该字符放入保存空间，然后将旧的保存空间附加到它，从而反转输入。最后一个命令删除换行符以重建原始字符串。

这应该适用于任何单个字符串，但它将多行输入连接到单个输出字符串中。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-02-27T21:04:29.963

这是另一个更简单的`awk`解决方案：

```
awk 'BEGIN{FS=""} {for (i=NF; i>0; i--) s=s $i; print s}' <<< '123456' 
```

```
654321 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-10-21T15:48:34.463

读单词

```
reve=`echo "$word" | awk '{for(i=length($0); i>0;i--) printf (substr($0,i,1));}'`
echo  "$reve" 
```

# ms-access - MS Access 在从过滤器生成报告时输入参数 ID

> ID：11461630
> 
> 赞同：1
> 
> 时间：2012-07-12T22:25:32.840
> 
> 标签：ms-access, vba

我有一个带有按钮的文本字段，该按钮按表单中的关键字进行过滤。

```
Private Sub Command93_Click()
Me.Filter = "(Review Like '*" & Me.Text94 & "*')OR (Status Like '*" & Me.Text94 & "*')"
Me.FilterOn = True
Me.Requery

End Sub 
```

然后我有一个从该过滤器生成报告的按钮。

```
Private Sub Filter_Click()

DoCmd.OpenReport "rptName", acViewPreview, , Me.Filter

End Sub 
```

问题是，每当我点击此按钮生成报告时，都会弹出一个框，要求我输入参数 ID，并要求对其进行审核。如果我去掉审查标准（顺便说一下，我有更多的字段，我只是使用审查和状态来说明这个例子）然后生成的报告没有任何弹出框。评论是 notinlist 事件的一部分，该事件打开另一个表单并将该信息存储在表格评论中，如果这完全相关的话。当我单击“确定”并将“输入参数 ID”框留空时，报告仍会生成，但我想以某种方式绕过它，原因有两个 - 第一个是我需要其他不熟悉访问权限的人能够使用它，第二个想法是，如果我了解导致它的原因，我可以理解访问方式更好地工作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:31:05.930

您的报告是否有一个名为 Review 的字段？如果没有，您要么需要更改报告的记录源，使其与具有审阅的表连接，要么更改您的过滤器，使其引用报告所具有的字段。

# normalization - 直方图的适当 SVM 特征归一化？

> ID：11461631
> 
> 赞同：2
> 
> 时间：2012-07-12T22:25:35.170
> 
> 标签：normalization, svm

当实例特征是直方图时，我想是否有关于 SVM 特征规范化的工作（出版物、广泛的结果、建议）。

以前的工作：在这个问题[https://stackoverflow.com/a/7863715](https://stackoverflow.com/a/7863715)中，他们讨论了卡方距离（常用于直方图中）和特征归一化，但我不知道这些特征是否是直方图。此外，这篇论文[http://www.cs.huji.ac.il/~ofirpele/QC/](http://www.cs.huji.ac.il/~ofirpele/QC/)提到卡方对特征归一化很敏感（不要指定正面或负面的表现）。

我认为 [0, 1] 和 [-1, 1] 之间的共同归一化会影响直方图信息。

# vb6 - 试图在 VB6 的 C++ DLL 中显示 UI 会导致在 AfxGetResourceHandle 处断言

> ID：11461634
> 
> 赞同：0
> 
> 时间：2012-07-12T22:25:38.250
> 
> 标签：vb6, mfc

我有一个遗留的 vb6 代码，它调用 c++ 来显示 MFC 对话框。调用 AfxGetResourceHandle 将 dll 的资源加载到内存中会导致调试断言。有人做过吗？

```
 HINSTANCE priorRes = AfxGetResourceHandle();

    if (m_MDCommonDll == NULL)
    {
        m_MDCommonDll = LoadLibrary("MyDll.dll");
    }

    AfxSetResourceHandle(m_MDCommonDll); 
```

如果这是不可能的，有没有办法检测调用者是否来自 vb6，以便我可以跳过显示 UI？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:49:14.487

如果混合发布和调试构建 DLL，AfxGetResourceHandle() 可以抛出调试断言。确保您的 .exe 和它加载的任何 .dll 都构建为发布版或调试版。

# android - 截至 2012 年 12 月 7 日，Eclipse 和 Android SDK 更新确实存在错误

> ID：11461636
> 
> 赞同：8
> 
> 时间：2012-07-12T22:25:45.940
> 
> 标签：android, eclipse, eclipse-plugin

我现在刚刚更新了 eclipse 和 Android SDK（2012 年 7 月 12 日欧洲），它真的有问题，我必须不断地“清理项目”才能摆脱简单的错误，比如：

```
Syntax error, insert ";" to complete Statement 
```

虽然明明有个结局。

还有其他人有这个问题并且知道任何修复吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T20:57:14.457

仅供参考，此错误已在 ADT 20.0.1 中修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T22:45:06.113

如果单击左边距中的错误标记，在弹出的自动更正列表中，应该有一个选项可以清除所有 lint 标记。选择它，然后按 Enter。如果该行没有真正的错误，它应该处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T05:15:02.490

查看问题视图的*类型*列。如果您在那里看到“Android Lint 问题”，虽然这是一条 Java 错误消息，但您遇到了当前 Android Lint 的错误。您可以直接点击“删除所有警告”按钮来清除无效错误（并且您将在下一次构建时再次收到有效错误），或者您可以完全禁用 Android Lint，我不建议这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T15:42:33.223

它似乎与android linter有关。如建议的那样，如果您在将光标悬停在问题上时调出快速修复界面，单击左侧的错误标记或按 cmd + 1 您应该会看到一个选项，说明“清除所有 lint 标记”无论如何它是必须解决的烦人的错误。

# php - 链接到与直接输入 URL 时 IE9 用户代理字符串是不同的

> ID：11461641
> 
> 赞同：1
> 
> 时间：2012-07-12T22:26:08.217
> 
> 标签：php, session, internet-explorer-9, user-agent

我有如下代码，通过使用 UA 的 MD5 和种子来使会话更加安全。

```
if (!isset($_SESSION['key']))
{
    $_SESSION['key']=md5($_SERVER['HTTP_USER_AGENT'] . $UA_SEED);
    $session_is_valid = TRUE;
}
else if($_SESSION['key'] != md5($_SERVER['HTTP_USER_AGENT'] . $UA_SEED))
{
    $session_is_valid = FALSE;
    exit;
} 
```

代码运行良好，但 IE9 有自己的议程。通过输入 URL 直接访问我的网站时，UA 发送为

```
Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E) 
```

如果我通过另一个网站的链接访问它，则 UA 将作为

```
Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0) 
```

有什么解决方法吗？其他浏览器没有这样的恶作剧。

PS我知道这种“安全”的附加形式是有限的，但有总比没有好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:28:52.173

从您的字符串中，一个是`MSIE 7.0`，另一个是`MSIE 9.0`。这篇[博](http://blogs.msdn.com/b/ie/archive/2010/03/23/introducing-ie9-s-user-agent-string.aspx)文说，在 IE9 及更高版本中，只会使用较短的 UA 字符串（除非使用使用 F12 开发工具的兼容模式或版本模拟）。

因此，您的问题很可能指向以下情况之一：

*   您已打开兼容模式。
*   您在 F12 开发人员工具中将 IE 版本设置为 7.0。
*   IE 的设置乱七八糟，有些网站在兼容模式下显示。在这种情况下，您应该将 IE 的设置重置为默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:42:45.973

很可能您以稍微不同的方式键入 URL，这导致 IE 在要在兼容性视图中呈现的网站列表中找到它。除非您需要兼容性视图，否则您应该从工具 > 兼容性视图设置的列表中删除您的网站，并考虑完全禁用它。

# php - 如何在数据库中查找重复项？

> ID：11461646
> 
> 赞同：0
> 
> 时间：2012-07-12T22:26:31.413
> 
> 标签：php, mysql, duplicates, duplicate-removal

关于如何在数据库中查找重复项有很多问题，但不是我遇到的具体问题。

我有一张桌子大约。120000 个条目。我需要找到重复项。为了找到它们，我使用了一个结构如下的 php 脚本：

```
//get all entries from database
//loop through them
    //get entries with greater id
    //compare all of them with the original one
    //update database (delete duplicate, update information in linked tables, etc.) 
```

不可能对初始查询中已经存在的所有重复项进行排序，因为我必须遍历所有条目，因为我的重复搜索不仅对 100% 相似的条目敏感，而且对 90% 相似的条目敏感。我为此使用了similar_text()。

我认为第一个循环还可以，但是循环遍历循环中的所有其他条目实在是太多了。对于 120000 个条目，这将接近 (120000^2)/2 次迭代。

因此，与其在循环中使用循环，不如有更好的方法来做到这一点。你有什么想法？我考虑过使用 in_array()，但它对 90% 的字符串相似度之类的东西不敏感，也没有给我找到重复项的数组字段——我需要那些来获取条目的 id 来更新数据库正确。

有任何想法吗？

非常感谢你！

查尔斯

更新 1

我现在使用的查询如下：

```
SELECT a.host_id
FROM host_webs a
JOIN host_webs b ON a.host_id != b.host_id AND a.web = b.web
GROUP BY a.host_id 
```

它完美地显示了原件和副本，但我需要摆脱原件，即与相关数据一起找到的第一个。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:34:17.283

您可以`JOIN`将表放在自身上并在 SQL 中完成所有操作（我知道您说您认为您不能，但如果是这种情况，我会感到惊讶）。您需要做的就是将用于测试重复项的所有列`ON`放入`JOIN`.

```
SELECT id
FROM tablename a
JOIN tablename b ON a.id != b.id AND a.col1 = b.col1 AND a.col2 = b.col2
GROUP BY id 
```

这将只返回和重复`id`的行的 s 。您可以将所需的任何字符串比较合并到其中，该子句可以根据需要变得复杂。例如：`col1``col2``ON`

```
SELECT id
FROM tablename a
JOIN tablename b ON a.id != b.id AND
  (a.col1 = b.col1 AND (a.col2 = b.col2 OR a.col3 = b.col3))
  OR ((a.col1 = b.col1 OR a.col2 = b.col2) AND a.col3 = b.col3)
  OR (SOUNDEX(a.col1) = SOUNDEX(b.col1) AND SOUNDEX(a.col2) = SOUNDEX(b.col2) AND SOUNDEX(a.col3) = SOUNDEX(b.col3))
GROUP BY id 
```

**编辑**

由于您实际上对查询所做的只是查找`web`列相同的行，因此这将只查找重复项而不是原始“好”记录 - 假设`host_id`是数字并且“好”记录将是最低的那个`host_id`：

```
SELECT b.host_id
FROM host_webs a
INNER JOIN host_webs b ON b.web = a.web AND b.host_id > a.host_id
GROUP BY b.host_id 
```

我想这里的最终游戏将是删除重复项，因此，如果您有勇气，实际上可以一口气删除它们：

```
DELETE b.*
FROM host_webs a
INNER JOIN host_webs b ON b.web = a.web AND b.host_id > a.host_id 
```

The `GROUP BY` is not necessary in the `DELETE` statement because it doesn't matter if you try and delete the same row more than once in a single statement.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:34:04.567

如果您要 1 次删除重复项，我不会费心编写 php 脚本 - 在 sql 中执行此操作会更干净。

我认为最有效的删除重复项的一般算法是：
1\. 复制表
2\. 截断原始表
3\. 在需要唯一的列上设置唯一索引
4\. 使用`INSERT IGNORE INTO original_table SELECT * FROM duplicate_table`OR重新插入行`REPLACE INTO original_table SELECT * FROM duplicate table`
5\. 固定链接表格 - 删除孤立的行 ( `DELETE x FROM x LEFT JOIN original TABLE ON (...) WHERE original_table.id IS NULL`)

# python - 从信号中检索的模型实例未按预期工作

> ID：11461647
> 
> 赞同：0
> 
> 时间：2012-07-12T22:26:33.873
> 
> 标签：python, django, django-signals

这是我的models.py中的代码

```
#Models.py
....
class Question(models.Model):
    text = models.TextField(unique=True)
    exam = models.ForeignKey(Exam)
    level = models.ForeignKey(Level)
    paper = models.ForeignKey(Paper)
    topic = models.ForeignKey(Topic)
    date_added = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True)

class Answer(models.Model):
    question = models.ForeignKey(Question)
    text = models.CharField(max_length=125)
    is_correct = models.BooleanField()
    explanation = models.TextField(blank=True)
    date_added = models.DateTimeField(auto_now_add=True)
    modified = models.DateTimeField(auto_now=True)

@receiver(post_delete, sender=Question)
def update_redis_deleted(sender, **kwargs):
    host = getattr(settings, 'SESSION_REDIS_HOST', 'localhost')
    port = getattr(settings, 'SESSION_REDIS_PORT', 6379)
    db = getattr(settings, 'SESSION_REDIS_DB', 0)

    server = redis.StrictRedis(host, port, db)

    pipe = server.pipeline()

    question = kwargs['instance']
    answer_set_list = question.answer_set.all()
    answer = Answer.objects.get(question=question) 
```

从我的测试中，当我删除一个 Question 实例时，`answer_set_list`它是一个空列表并`answer`引发 DoesNotExist 错误。在我的tests.py 中，`question.answer_set.all()`按`Answer.objects.get(question=question)`预期工作。
我希望有人能帮我解决这个问题并解释这种奇怪之处（至少在我的菜鸟看来）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:33:21.310

此代码在删除后触发。也就是说，删除已经发生了，所以数据库中不再存在 Question 对象，查询它会失败。

您可能想改用预删除信号。

# android - Jelly Bean (api 16) 的 READ_LOGS 权限

> ID：11461650
> 
> 赞同：23
> 
> 时间：2012-07-12T22:26:53.363
> 
> 标签：android, logging, root, android-4.2-jelly-bean

由于 Android Jelly Bean 不支持[日志读取权限](http://developer.android.com/reference/android/Manifest.permission.html#READ_LOGS)（根据[这个 google io 2012 video](http://www.youtube.com/watch?feature=player_embedded&v=WDDgoxvQsrQ#t=1369s) and [this one](http://www.youtube.com/watch?feature=player_embedded&v=UGJbPPjANKA#t=3103s)），我想知道有根设备（或非根设备）是否有可能绕过这个限制并能够读取日志。

我怎么做？我真的需要让应用程序成为系统应用程序，还是足够扎根？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-28T15:26:38.947

您可以通过在您的应用程序中执行 pm grant 命令来获取 root 设备上的权限。不过，您可能必须在此之后重新启动应用程序才能使更改生效：

```
String pname = getPackageName();
String[] CMDLINE_GRANTPERMS = { "su", "-c", null };
if (getPackageManager().checkPermission(android.Manifest.permission.READ_LOGS, pname) != 0) {
    Log.d(TAG, "we do not have the READ_LOGS permission!");
    if (android.os.Build.VERSION.SDK_INT >= 16) {
        Log.d(TAG, "Working around JellyBeans 'feature'...");
        try {
            // format the commandline parameter
            CMDLINE_GRANTPERMS[2] = String.format("pm grant %s android.permission.READ_LOGS", pname);
            java.lang.Process p = Runtime.getRuntime().exec(CMDLINE_GRANTPERMS);
            int res = p.waitFor();
            Log.d(TAG, "exec returned: " + res);
            if (res != 0)
                throw new Exception("failed to become root");
        } catch (Exception e) {
            Log.d(TAG, "exec(): " + e);
            Toast.makeText(context, "Failed to obtain READ_LOGS permission", Toast.LENGTH_LONG).show();
        }
    }
} else
    Log.d(TAG, "we have the READ_LOGS permission already!"); 
```

应该从您的 onCreate() 调用此代码。授予权限后，不再需要 root 权限。

PS：超级用户应用程序上的 p.waitFor() 阻塞，延迟您的应用程序启动并可能导致 ANR。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-17T06:57:20.483

* * *

**编辑**：事实证明，`adb shell pm grant`这只适用于模拟器。生产设备不允许`shell`授予和撤销可选权限。

* * *

你不需要有根。对非系统应用程序启用 READ_LOGS 唯一需要做的就是安装 Android SDK。

基本上，您需要调用：

```
adb shell pm grant <pkg.name> android.permission.READ_LOGS 
```

`<pkg.name>`您的应用程序的包名称在哪里。这是可能的，因为 READ_LOGS 不仅是“系统”权限，还是“开发”权限（该术语在 JB 中引入）。这实际上允许用户将此权限授予任何应用程序。不需要根。

更多信息可在此[google 群组线程](https://groups.google.com/forum/?fromgroups#!searchin/android-developers/READ_LOGS/android-developers/6U4A5irWang/8xOi74KfRIYJ)中获得，其中包含 Dianne Hackborn 的评论。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-14T15:00:46.807

我通过使用标准输出调用 logcat`su`并从标准输出读取，在有根设备上解决了这个问题

```
... .getRuntime().exec("su -c logcat -d"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-05T02:46:29.433

还有另一种无需 root 权限即可访问所有日志的方法。您可以使用远程调试。看看开源的[无根 Logcat 应用程序](https://github.com/tananaev/rootless-logcat)。

# java - 问号正则表达式（Java）

> ID：11461654
> 
> 赞同：0
> 
> 时间：2012-07-12T22:27:38.497
> 
> 标签：java, regex, expression

我收集`List<String> sentencesList = new ArrayList<String>`了来自文本[https://gist.github.com/c9afbb46abd50a28ef6e](https://gist.github.com/c9afbb46abd50a28ef6e) 的句子，我只能使用问号的句子。所以，我正在收集我的集合中的每个元素，并通过正则表达式进行检查

```
for(String sentence : sentencesList) {
            int count = 0;
            if(sentence.matches("([^.!?]*)\\?")) { ... }
} 
```

正文中有九个带问号的句子，但它只适用于一个：

> 他自己是个很老的人，蓬松的白头发长在他的大部分脸和头上，他们几乎立刻就喜欢上了他。但是第一个晚上，当他出来在前门迎接他们时，他的脸色很奇怪，以至于露西（最小的）有点害怕他，而埃德蒙（第二个最小的）想笑。还得继续假装擤鼻涕来掩饰？

我想我的问题是有规律的表现。请帮忙！谢谢！

PS 正则表达式仅在疑问句后为双换行时才有效。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:18:16.477

如果你有一个句子列表，为什么不这样做：

```
for(String sentence : sentencesList) {
    if (sentence.contains("?")){
        //Do something
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:13:52.777

我以这种方式测试了你的正则表达式并且它接缝工作正常，所以这可能是你使用它的方式或者你的数据不正确。

```
BufferedReader fr = new BufferedReader(new FileReader("d:\\testText.txt"));
String line = null;
List<String> lines = new ArrayList<String>();
while ((line = fr.readLine()) != null)
    lines.add(line);
// System.out.println(lines);
Pattern pattern = Pattern.compile("([^.!?]*)\\?");
for (String tmp : lines) {
    Matcher m = pattern.matcher(tmp);
    while (m.find())
        System.out.println(m.group());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T23:09:09.780

所有其他句子都无法匹配，因为它们在其他句子中，例如：“那是什么噪音？” 露西突然说。（它只会匹配其中的一部分，句子实际上以点结尾）。第一句话似乎也很奇怪：曾经有四个孩子叫彼得苏珊？埃德蒙和露西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-10T14:52:52.737

仅用于问号：

```
String regex = "(?<=[?])\\s*"; 
```

你也可以使用`String regex = "(?<=[.!?])\\s*";`和`.` `!``?`

# objective-c - 如何使用 CADisplayLink 在 CMRotationMatrix 上应用过滤器

> ID：11461656
> 
> 赞同：4
> 
> 时间：2012-07-12T22:27:45.237
> 
> 标签：objective-c, ios, gps, accelerometer, gyroscope

如何在**CMRotationMatrix**上应用过滤器？也许是卡尔曼滤波器。我需要修复 CMRotationMatrix (transformFromCMRotationMatrix) 的噪声，以获得结果矩阵的线性值

该矩阵值将转换为 XYZ，在我的情况下，我在 2D 屏幕上模拟 3D，如下所示：

// 将矩阵转换为 x, y

```
vec4f_t v;
multiplyMatrixAndVector(v, projectionCameraTransform, boxMatrix);

float x = (v[0] / v[3] + 1.0f) * 0.5f;
float y = (v[1] / v[3] + 1.0f) * 0.5f;

CGPointMake(x * self.bounds.size.width, self.bounds.size.height - (y * self.bounds.size.height)); 
```

**代码**：

// 定义变量

```
mat4f_t cameraTransform; 
```

// 启动显示链接循环

```
- (void)startDisplayLink
{
    displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(onDisplayLink:)];
    [displayLink setFrameInterval:1];
    [displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
} 
```

// 停止显示链接循环

```
- (void)stopDisplayLink
{
    [displayLink invalidate];
    displayLink = nil;      
} 
```

// 显示链接事件

```
- (void)onDisplayLink:(id)sender
{
    CMDeviceMotion *d = motionManager.deviceMotion;

    if (d != nil) {
        CMRotationMatrix r = d.attitude.rotationMatrix;

        transformFromCMRotationMatrix(cameraTransform, &r);
        [self setNeedsDisplay];
    }
} 
```

// [self setNeedDisplay]之前的函数触发；

```
void transformFromCMRotationMatrix(vec4f_t mout, const CMRotationMatrix *m)
{    
    mout[0] = (float)m->m11;
    mout[1] = (float)m->m21;
    mout[2] = (float)m->m31;
    mout[3] = 0.0f;

    mout[4] = (float)m->m12;
    mout[5] = (float)m->m22;
    mout[6] = (float)m->m32;
    mout[7] = 0.0f;

    mout[8] = (float)m->m13;
    mout[9] = (float)m->m23;
    mout[10] = (float)m->m33;
    mout[11] = 0.0f;

    mout[12] = 0.0f;
    mout[13] = 0.0f;
    mout[14] = 0.0f;
    mout[15] = 1.0f;
} 
```

// 矩阵向量和矩阵矩阵乘法例程

```
void multiplyMatrixAndVector(vec4f_t vout, const mat4f_t m, const vec4f_t v)
{
    vout[0] = m[0]*v[0] + m[4]*v[1] + m[8]*v[2] + m[12]*v[3];
    vout[1] = m[1]*v[0] + m[5]*v[1] + m[9]*v[2] + m[13]*v[3];
    vout[2] = m[2]*v[0] + m[6]*v[1] + m[10]*v[2] + m[14]*v[3];
    vout[3] = m[3]*v[0] + m[7]*v[1] + m[11]*v[2] + m[15]*v[3];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:13:42.663

一般来说，我会区分提高信噪比和平滑信号。

**信号改善**

如果您真的想比已经实施传感器融合算法的 Apple Core Motion 做得更好，请为结果不确定的长期项目做好准备。在这种情况下，您最好采用原始加速度计和陀螺仪信号来构建您自己的传感器融合算法，但您必须关心很多问题，例如漂移、不同 iPhone 版本的硬件依赖性、同一传感器的硬件差异一代，...所以我的建议：尽一切努力避免它。

**平滑**

这只是意味着插入两个或更多信号并建立一种平均值。我不知道有什么合适的方法可以直接用于旋转矩阵（也许有一个），但您可以使用[四元数](http://en.wikipedia.org/wiki/Quaternion)（更多资源：[OpenGL Tutorial Using Quaternions to representation rotation](http://content.gpwiki.org/index.php/OpenGL:Tutorials:Using_Quaternions_to_represent_rotation#Rotating_vectors)或[Quaternion FAQ](http://www.gamedev.net/page/resources/_/technical/math-and-physics/the-matrix-and-quaternions-faq-r1691#Q47)）。

这种插值的结果四元数可以与您的向量相乘以获得类似于矩阵方式的投影（您可以查看[为 iOS 设备查找法线向量以](https://stackoverflow.com/questions/10827401/finding-normal-vector-to-ios-device/10836923#10836923)获取更多信息）。

表示旋转的两个单位四元数之间的插值可以用[Slerp](http://en.wikipedia.org/wiki/Slerp)完成。在实践中，您将使用 Wikipedia 中描述为 Geometric Slerp 的内容。如果有两个时间点*t1*和*t2*以及对应的四元数*q1*和*q2*以及它们之间的角距离*omega*，则公式为：

q'(q1, q2, t) = sin((1- t) * omega) / sin(omega) * q0 + sin(t * omega) / sin(omega) * q1

t 应该是 0.5，因为你想要两个旋转之间的平均值。Omega 可以通过点积计算：

cos(omega) = q1.q2 = w1*w2 + x1*x2 + y1*y2 + z1*z2

If this approach using two quaternions still doesn't match your needs, you can repeat this by using slerp (slerp (q1, q2), slerp (q3, q4)). Some notes:

*   From a performance point fo view it's not that cheap to perform three sin and one arccos call in your run loop 1/frequency times per second. Thus you should avoid using too many points
*   In your case all signals are close to each other especially when using high sensor frequencies. You have to take care about angles that are very small and let 1/sin(omega) explode. In this case set sin(x) ≈ x
*   Like in other filters like [low-pass filter](http://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MotionEvents/MotionEvents.html#//apple_ref/doc/uid/TP40009541-CH4-SW11) the more points in time you use the more time delay you get. So if you have frequency f you will get about 0.5/f sec delay when using two points and 1.5/f for the double slerp.
*   If something appears weird, check that your resulting quaternions are unit quaternions i.e. ||q|| = 1
*   If you are running into performance issues you might have a look at [Hacking Quaternions](http://number-none.com/product/Hacking%20Quaternions/index.html)

The C++ project [pbrt](https://github.com/mmp/pbrt-v2/blob/master/src/core/quaternion.cpp#L87) at github contains a quaternion class to get some inspiration from.

# linux - 如何定义内核程序是作为模块还是内置

> ID：11461664
> 
> 赞同：1
> 
> 时间：2012-07-12T22:28:47.570
> 
> 标签：linux, kernel, kernel-module

我编写了一个 Linux 内核模块，我将其包含在从 kernel.org 下载的内核中。我修改了我的模块所在目录的 Kconfig 文件，以将其包含在配置菜单中。

但是当我运行时`make menuconfig`，我只能选择它作为内置，我不能让它作为一个模块运行。是什么决定了一个程序是仅是内置的还是仅是模块的，或两者兼而有之？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:36:51.330

我已经想好怎么做了。

对于要“仅模块”编译的内核程序，它必须依赖于“m”。举例：

```
config FOO
    depends on m 
```

这会将 FOO 限制为模块 (=m) 或禁用 (=n)。

更多信息： [http ://www.kernel.org/doc/Documentation/kbuild/kconfig-language.txt](http://www.kernel.org/doc/Documentation/kbuild/kconfig-language.txt)

# mysql - MySql - 选择第一行和最后一行（不是最小值/最大值）

> ID：11461666
> 
> 赞同：3
> 
> 时间：2012-07-12T22:28:51.093
> 
> 标签：mysql

我有一个 MySql 表，其中包含按以下顺序排列的每日股市数据：

```
_date, _opening_price, _high_price, _low_price, _close_price 
```

我正在尝试使用以下方法将这些数据转换为每周数据：

```
SELECT
MAX(_date) AS _date,
WEEK(_date) AS weeknum,
_opening_price,
MAX(_high_price) AS _high_price,
MIN(_low_price) AS _low_price,
_closing_price
FROM myTable
GROUP BY weeknum ORDER BY _date; 
```

如何选择 _opening_price 使其成为该周每日数据中的第一个 _opening_price？同样，如何选择 _closing_price 使其成为一周每日数据中的最后一个 _closing_price？

这是一个例子：

![谷歌股票市场数据 - MSFT](../Images/dcd6077d22b44e441aaf9f8cd45e71c5.png)

对于 2007-01-05 结束的一周，opening_price 应取自 2007-01-03（红色），收盘价应取自 2007-01-05（绿色）。同样，对于 2007 年 1 月 12 日结束的一周，开盘价应为 2007 年 1 月 8 日，收盘价应为 2007 年 1 月 12 日。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:10:50.753

试试这个解决方案：

```
SELECT 
    MAX(a._date) weekending, 
    MAX(CASE WHEN a._date = b.mindate THEN a._opening_price END) openingprice,
    MAX(CASE WHEN a._date = b.maxdate THEN a._closing_price END) closingprice
FROM myTable a
INNER JOIN
(
    SELECT 
        CONCAT(YEAR(_date), '-', WEEK(_date)) weeknum, 
        MIN(_date) mindate, 
        MAX(_date) maxdate
    FROM myTable
    GROUP BY weeknum
) b ON a._date IN (b.mindate, b.maxdate)
GROUP BY b.weeknum 
```

# php - 如何使我的开源 PHP 应用程序跨服务器？

> ID：11461667
> 
> 赞同：0
> 
> 时间：2012-07-12T22:29:03.397
> 
> 标签：php, mysql, cross-server

我有一个使用 MySQL 的 PHP 程序，我将把它开源，包括一个简单的安装程序，我想让它尽可能容易地安装在任何使用 PHP4 或 5 和 MySQL 4 的服务器上。

我已经包含了一个安装程序以使其用户友好，但我需要知道我可以做些什么来使它最有可能安装在每台服务器上。

我将开始：我已经确保像这样使用完整的 PHP 标记（不短）`<?php ?>`，并确保在使用它们之前声明所有变量，就像这样`$nVar = (isset($_POST['nVar']) ? $_POST['nVar'] : NULL);`。

为了获得最佳的跨服务器兼容性，还应在 PHP 应用程序中加入哪些其他最佳实践？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:46:27.187

只是一些提示，从我的头顶

类 { __constructor } 已弃用。
不要使用 GLOBAL
使用 split 和 join
注意文件魔术字节识别函数
get_class get_parent_class 字母数字更改为接受驼峰式 - 在比较之前对返回值使用 strtolower

# apache - 如何使用预先存在的 .htaccess 文件进行 URL 重写？

> ID：11461673
> 
> 赞同：0
> 
> 时间：2012-07-12T22:29:23.943
> 
> 标签：apache, .htaccess, url-rewriting

我有一个当前可以通过 URL 访问的论坛：

`www.website.com/index.php?app=forums`

取而代之的是，我希望人们能够去：

`www.website.com/forum`

不过，这是踢球者 - 已经有一个包含以下内容的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
Options -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

似乎这应该是可能的，但我不知道自己该怎么做。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:00:33.453

还没有测试过这个，但是这样的东西应该可以工作。在第一个 RewriteCond 指令之前添加它。

```
RewriteRule ^forum$ /index.php?app=forums 
```

或者，您也可以从 /forum 执行 301 重定向到 index.php URL。

通过做这个：

```
Redirect 301 /forum "http://www.website.com/index.php?app=forums 
```

然而，看起来你想要一个适当的重写，所以第一个选项更好，

# java - How to connect to a remote machine with username and password using sshj java api?

> ID：11461679
> 
> 赞同：2
> 
> 时间：2012-07-12T22:30:00.827
> 
> 标签：java, ssh, sshj

How to connect to a remote machine with username and password using sshj java api?

I tried this code. What is the problem with this code?

```
final SSHClient ssh = new SSHClient();
        ssh.connect("192.168.0.1");
        ssh.authPassword("abcde", "fgh".toCharArray());
        try {
            final Session session = ssh.startSession();
            try {
                final Command cmd = session
                        .exec("cd /home/abcde/Desktop/");
                System.out.println(IOUtils.readFully(cmd.getInputStream())
                        .toString());
                cmd.join(5, TimeUnit.SECONDS);
                System.out.println("\n** exit status: " + cmd.getExitStatus());
            } finally {
                session.close();
            }
        } finally {
            ssh.disconnect();
        } 
```

It is throwing this following error.

> net.schmizz.sshj.transport.TransportException: [HOST_KEY_NOT_VERIFIABLE] Could not verify `ssh-rsa` host key with fingerprint `********` for `192.168.0.1` on port 22

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T16:27:32.367

You solve your problem by implementing HostKeyVerifier

```
class NullHostKeyVerifier implements HostKeyVerifier {
    @Override
    public boolean verify(String arg0, int arg1, PublicKey arg2) {
        return true;
    }        
} 
```

and adding this fake implementation to your SSHClient instance configuration:

```
...
    final SSHClient ssh = new SSHClient();
    ssh.addHostKeyVerifier(new NullHostKeyVerifier());
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T20:12:16.710

Insert `ssh.loadKnownHosts();` or `ssh.loadKnownHosts("somepath");` after instantiation of SSHClient.

Then add the machine (remote) you are trying to connect (192.168.0.1) to known_hosts file (on your machine) at the default location or at "somepath". For a Linux box default path will be `/home/myuser/.ssh/known_hosts`, or in a windows box `c:/user/myuser/.ssh/known_hosts`.

known_host is in openSSH format (ip/orhostname algorithm key commentary).

To add the machine to known_hosts:

-if you are using Linux (on your machine), just ssh to the remote machine and it will be automatically add to known_hosts.

-if you are using Windows, use [bitwise tunnelier](http://www.bitvise.com/tunnelier) to connect to the remote machine it will store the key. Go to bitwise key manager (it will be on your start menu, bitwise folder) and export the row with the remote machine ip to openSSH format. Copy the resulting line to your known_host file.

That way you will be really validating the host key. It is also helpful in mule esb where you cannot add the nullhost verifier to the ssh connector (My case).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T12:35:43.327

You miss ssh key, simply add

```
ssh.addHostKeyVerifier("10:20......"); 
```

where **10:20...** from your exception: "with fingerprint ************"

# git - Git 工作流程（Dev>Staging>Live）基本技术问题

> ID：11461680
> 
> 赞同：11
> 
> 时间：2012-07-12T22:30:03.117
> 
> 标签：git, workflow, bitbucket

我对 Git（以及 VC）还很陌生，我正在努力理解使用分支的 Dev>Staging>Live 工作流背后的概念。

我正在尝试应用**[此](http://nvie.com/posts/a-successful-git-branching-model/)**工作流程的一部分，它使用*dev*分支和*release*分支而不是固定的*staging*。

在尝试使用 Git 之前，我有使用 SVN 的“相同”工作流程。但是，我们没有为每个阶段创建分支，而是为其使用了单独的存储库。现在我正在尝试应用分支，事情变得有点模糊。

我可以理解工作流背后的想法，但无法从技术角度理解。

我要遵循的创建它的步骤：

**创建文件夹**

```
user:/var/www/$ mkdir dev.example.local
user:/var/www/$ mkdir staging.example.local
user:/var/www/$ mkdir example.local 
```

**初始化存储库**

```
user:/var/www/example.local$ git init
user:/var/www/example.local$ git remote add origin git@bitbucket.org:user/example.com.git
user:/var/www/example.local$ echo "README" > README
user:/var/www/example.local$ git commit -am "First"
user:/var/www/example.local$ git push origin master

user:/var/www/example.local$ cd ../dev.example.com
user:/var/www/dev.example.local$ git clone git@bitbucket.org:user/example.com.git .
user:/var/www/dev.example.local$ git checkout -b dev
user:/var/www/dev.example.local$ git push origin dev

user:/var/www/dev.example.local$ cd staging.example.com
user:/var/www/staging.example.local$ git clone git@bitbucket.org:user/example.com.git . 
```

**开发分支上的一些工作**

```
user:/var/www/dev.example.local$ echo "New" > newfile
user:/var/www/dev.example.local$ git add .
user:/var/www/dev.example.local$ git commit -am "Some new file"
user:/var/www/dev.example.local$ git push origin dev 
```

**当新版本准备就绪时**

```
user:/var/www/staging.example.local$ git fetch
user:/var/www/staging.example.local$ git checkout -b release-0.1 dev
user:/var/www/staging.example.local$ git push origin release-0.1

user:/var/www/staging.example.local$ cd ../example.com
user:/var/www/example.local$ git fetch
user:/var/www/example.local$ git merge --no-ff origin/release-0.1
user:/var/www/example.local$ git tag -a "0.1"
user:/var/www/example.local$ git push origin master

user:/var/www/example.local$ cd ../dev.example.com
user:/var/www/example.local$ git merge --no-ff master
user:/var/www/example.local$ git push origin dev 
```

我很确定我没有遵循正确的步骤。那么，什么是“正确的方法”：

*   **创建*dev*，*staging*，*live*文件夹并在每个文件夹中初始化 git repo？**
*   **结帐/合并新版本？**
*   **从*release*合并到*live*？**
*   **创造整个环境？**

和：

*   **我应该在哪里运行这些 git 命令？在我的本地仓库上？每个阶段？**

相关资料：

*   我正在使用 BitBucket
*   这是用于网站（Drupal）开发
*   我的*master*分支是*live* stage
*   大约有 3 名开发人员同时工作，每个人都在不同的国家

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T22:45:20.080

您不需要创建不同的存储库。你应该学习并且你可能会喜欢 git 的是使用分支是多么容易。所以第1步：

*   忘记你从 SVN 背景中知道的任何事情

现在我们都准备好了，这就是这个想法。假设您目前只有`master`在您的 bitbucket 上：

*   克隆存储库：

    ```
    $ git clone git@bitbucket.org:user/example.com.git
    $ cd example.com 
    ```

*   创建你的分支：

    ```
    $ git branch dev
    $ git branch staging 
    ```

*   让其他人知道这些分支：

    ```
    $ git push origin dev
    $ git push origin staging 
    ```

*   开始工作！

    ```
    $ git checkout dev
    $ touch new_file
    $ git add new_file
    $ git commit
    $ git merge master         # and resolve conflicts
    $ git checkout master
    $ git merge dev
    $ git push origin 
    ```

注意：上面的示例是一个简单的分支实验合并，可能不会像您的教程那样反映确切的工作流程。

所以简而言之，您没有不同的存储库，而是在一个存储库中的分支。在这些分支之间，您可以根据需要与任何您喜欢的工作流程进行合并。您可以拥有未推送到原点的其他分支，因此它们对其他人隐藏。当然，您还应该`git fetch`/`git merge`您想要经常处理的分支，以确保您从其他合作者那里获得最新的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T02:24:19.557

有关 git 工作流程的示例，请查看我的：

[http://dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

这应该让你开始一个成熟的过程。

# ios - 将sql文件插入sqlite - iphone

> ID：11461681
> 
> 赞同：0
> 
> 时间：2012-07-12T22:30:06.970
> 
> 标签：ios, sqlite

我是 SQLite 新手

我有一个`.sql`脚本文件，`details.sql`在这里给出：

```
SET DEFINE OFF;
Insert into Student(student_id, name, address) Values ('101', '123', 'Marthandam');
Insert into Student(student_id, name, address) Values ('102', 'Abc', 'Chennai');
Insert into Student(student_id, name, address) Values ('103', 'Xyz', 'TVM');
COMMIT; 
```

我需要将这些查询插入`details.sql`到 iPhone 上的 sqlite3 数据库中。在 iPhone 上，我创建了一个名为 Database.sql 的新数据库用于存储

请给我将脚本插入 Database.sql 的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:42:00.947

可以尝试这样的事情：

```
NSString *f = [NSString stringWithContentsOfFile:<path to details.sql> encoding:NSUTF8StringEncoding error:NULL];
for (NSString *l in [f componentsSeparatedByString:@"\n"]) {
   <call sqlite3_exec to execute each line of SQL>
} 
```

# forms - CodeIgniter 从会话数据和表单验证中重新填充表单？

> ID：11461686
> 
> 赞同：0
> 
> 时间：2012-07-12T22:30:40.113
> 
> 标签：forms, validation, codeigniter, repopulation

我有一个带有几个搜索选项的表单，例如复选框数组和单选按钮。通过使用表单验证库，我可以在提交后重新填充表单，如下所示：

```
echo form_checkbox('check_track[]', '1', set_checkbox('check_track[]', '1', TRUE));
echo form_dropdown('select_year', $options, set_value('select_year', '2013'), $attribs); 
```

我还将所有表单选项（通过存储帖子）保存到会话用户数据中。如果 $_SERVER['REQUEST_METHOD'] !== 'POST' 是否可以从会话数据中重新填充所有字段，但要根据表单验证继续重新填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:41:07.773

更容易的可能是将表单生成与值生成分开。在您提供的代码段中，该值是直接从提交的表单中读取的。

我会建议你，在你的控制器或你的模型中生成一个数据结构，每个字段对应一个表单字段。对于每一个，该值要么是默认值，要么是存储在会话中的值，如果它与你的条件匹配，即：有效数据，而不是在 POST 之后，如果我理解你的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:33:41.020

我最终只是假装在表单验证内容运行以使重新填充工作之前发生了 POST：

```
if(!isset($_POST['something']) && $this->session->userdata('something'))
{ 
        $_POST = $this->session->all_userdata(); 
}
$this->form_validation->set_rules('something', 'stuff', 'required');
.
.
. 
```

# hibernate - Maven +Hibernate + JPA 错误.JavaReflectionManager 无法转换为 org.hibernate.annotations.common

> ID：11461688
> 
> 赞同：0
> 
> 时间：2012-07-12T22:30:45.753
> 
> 标签：hibernate, maven, jpa, persistence.xml

有人可以向我提供一个可以工作的示例极简persistence.xml 文件以及如何让它在代码中工作吗？我正在关注这份文件，其中有令人沮丧的空白： [Hibernate Setup](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/configuration.html)。

我有这个但是

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
        version="2.0">
  <persistence-unit name="manager1" transaction-type="JTA">
      <provider>org.hibernate.ejb.HibernatePersistence</provider>
      <properties>
         <property name="hibernate.dialect" value="org.hibernate.dialect.SybaseDialect"/>       
      </properties>
    </persistence-unit>
</persistence> 
```

当我在代码中单步执行此行时：

```
Session session = HibernateUtil.getSessionFactory().openSession(); 
```

抛出以下异常。

```
Initial SessionFactory creation failed.java.lang.ClassCastException: org.hibernate.annotations.common.reflection.java.JavaReflectionManager cannot be cast to org.hibernate.annotations.common.reflection.MetadataProviderInjector 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:33:28.040

这就是我使用 EclipseLink 的方式。希望它能激发你的一些想法。

[JPA - 使用多个数据源来定义访问控制](https://stackoverflow.com/questions/11218728/jpa-using-multiple-data-sources-to-define-access-control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:01:38.097

此链接提供了答案：[solution here](http://www.mkyong.com/hibernate/hibernate-error-javareflectionmanager-cannot-be-cast-to-metadataproviderinjector/)

POM.xml 包含使用 JPA 运行 Hibernate 所需的引用，如下所示：

```
 <dependency>
           <groupId>org.hibernate</groupId>
           <artifactId>hibernate-core</artifactId>
           <version>4.1.1.Final</version>
        </dependency>
        <dependency>
           <groupId>org.hibernate</groupId>
           <artifactId>hibernate-entitymanager</artifactId>
           <version>3.4.0.GA</version>
         </dependency>
           <dependency>
             <groupId>org.hibernate</groupId>
              <artifactId>hibernate-validator</artifactId>
              <version>4.3.0.Final</version>
           </dependency> 
```

要使用 JPA，我必须将其清理为如下所示：

org.hibernate hibernate-entitymanager ${hibernate-core-version} org.hibernate hibernate-validator ${hibernate-validator-version}

使用以下属性：

```
<hibernate.version>4.1.4.Final</hibernate.version>
<hibernate.validator.version>4.3.0.Final</hibernate.validator.version> 
```

这让我向前迈出了一步。

# java - 使用 DropboxAPI 进行 OAuth，无需手动复制 url 进行授权

> ID：11461691
> 
> 赞同：1
> 
> 时间：2012-07-12T22:31:07.257
> 
> 标签：java, oauth, dropbox, dropbox-api

我正在尝试创建一个应用程序（在 java 中）来监视 Dropbox 中的文件（添加文件、删除文件、修改文件......等）。我可以让我的应用程序使用 DropboxAPI 生成 https url。问题是我必须手动将 url 复制并粘贴到浏览器中，登录该浏览器并点击允许。一旦他们这样做了，我就可以轻松地存储信息，这样他们就不必重做这个过程。不幸的是，该程序不会继续运行并且经常重新启动。

我希望可以通过这一步，因为我可以访问应用程序中已经存在的用户 Dropbox 密码和用户名。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:57:01.110

当您说“轻松存储此信息”时，您在存储什么信息以及将其存储在哪里？

完成 OAuth 流程后，将访问令牌保存在持久性位置（如文件或数据库）。这样，如果您的程序重新启动，您只需加载访问令牌并使用它，而无需重新执行 OAuth 流程。

在官方 Dropbox Java SDK 中，加载您保存的访问令牌，然后调用[`setAccessTokenPair`](https://www.dropbox.com/static/developers/dropbox-java-sdk-1.3.1-docs/com/dropbox/client2/session/AbstractSession.html#setAccessTokenPair%28com.dropbox.client2.session.AccessTokenPair%29).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T14:02:52.247

我编写了一个简单的程序来将文件上传到保管箱服务器，以进行备份。如果您正在寻找实现。[您可以通过https://github.com/Jintian/dropbox](https://github.com/Jintian/dropbox)查看代码。

# php - 将 $_POST 变量与令牌一起使用是什么意思？

> ID：11461694
> 
> 赞同：1
> 
> 时间：2012-07-12T22:31:42.023
> 
> 标签：php, xss

我正在阅读一些 PHP PDO 数据清理，并看到这篇文章：

[PDO 和清理日期/删除 HTML](https://stackoverflow.com/questions/6104227/pdo-sanitize-date-remove-html)

我确信我的代码使用 PDOStatement bindParam 来防止 SQL 注入，但是我阅读了此评论（释义）

'使用带有令牌的 $_POST 将有助于避免 CSRF'

我很好奇，令牌是什么意思，我如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:39:56.257

令牌可能是一些哈希，您将其存储在会话中并通过表单发送。在验证表单数据之前，您检查是否：

1.  已发送令牌并且
2.  令牌存储在会话中

一个**简单**的实现：

* * *

```
<?php
  session_start();
  if(!isset($_SESSION['token']))
  {
    $_SESSION['token']=uniqid();
  }
?>

<form method="post">
    <input name="token" type="hidden" value="<?php echo $_SESSION['token'];?>">
    <input name="something"  value="some data to send">
    <input type="submit">
</form>

<?php
  if(isset($_POST['something']))
  {
    if(!isset($_POST['token']) || $_POST['token']!==$_SESSION['token'])
    {
      echo 'missing a valid token';
    }
    else
    {
      echo 'got a valid token, I will use the data';
    }
  }
?> 
```

* * *

# javascript - 表单上的按钮 vs 链接 vs 输入类型 =“提交”

> ID：11461695
> 
> 赞同：8
> 
> 时间：2012-07-12T22:31:42.060
> 
> 标签：javascript, html, forms, button, hyperlink

用户登录到他的控制面板并查看他的传入消息。每条消息附近都有一个“回复”按钮。实现该按钮的正确方法是什么？

我看到三个主要选项：

1.  **使用链接：**

    ```
    <a href="customer.php?reply&messageid=1234">Reply</a>. 
    ```

    坏处：

    *   我们需要将该链接的样式设置为看起来像一个按钮。因为我认为“回复”动作应该用一个按钮来表示，而不是一个链接（在我看来，链接应该在链接到某个资源并且链接文本中有名词时使用；如果我们想做出一个动作并在标题中有动词（动作） - 应该使用按钮）。

2.  **使用按钮：**

    ```
    <button onclick="location.href='customer.php?reply&messageid=1234'">Reply</button>` 
    ```

    坏处：

    *   用户必须启用 JavaScript。尽管根据我们的统计数据，我们 99.8% 的用户都启用了 JavaScript，如果他们不这样做，他们将很难在我们的网站上工作（我们有许多使用 JavaScript 实现的功能）。所以我认为我们 100% 的实际活跃用户都启用了 JavaScript。

3.  **使用带有以下内容的表单`<input type="submit">`：**

    ```
    <form action="customer.php?reply" method="get">
      <input name="messageid" type="hidden" value="1234" />
      <input type="submit" value="Reply" />
    </form> 
    ```

    坏处：

    *   我认为在这里使用表格是“人为的”。用户不输入任何内容。我们使用表单只是为了使我们的按钮工作。我还认为，当我们不更改任何内容而只需要向用户显示回复表单时使用 POST 请求 - 违反了 REST 原则。但即使使用 GET 我仍然认为在这种情况下使用表单是人为的。

其他一些注意事项：

*   在链接中使用按钮在 IE 中不起作用。
*   这是我们网站的私有部分，因此搜索引擎看不到它，我们真的不需要链接来帮助搜索引擎跟踪它并索引资源（这是在网络中使用链接而不是按钮的常见论点）

你会选择哪一个，为什么？

**UPD。**好吧，我决定使用链接。谢谢大家的讨论！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T22:35:17.740

我肯定会使用一个链接：**渐进式增强**。

即使关闭了 Javascript，您也希望该按钮可用（请记住：在页面加载期间，每个用户都是非 javascript 用户。如果他们的连接速度较慢（例如移动设备），他们应该能够他们一看到按钮就回复）。

样式不是问题（您不会使用默认按钮样式，是吗？）。

当用户没有提交任何确定是错误的东西时使用 POST。即使使用 GET，它仍然不是真正的形式材料......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T22:37:35.040

它很容易设置样式`<a>`，`<button>`同样，只需使用一个通用的类名。`<input type="button">`可能有点棘手，但您不需要使用它。

您的标签选择*永远不*应该由您的预期演示决定，而是由元素*是*什么以及它的*作用*决定。链接应标记为 `<a>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T22:49:43.823

我同意 a`POST`是错误的。因此，将您的表单设置为使用`method="get"`. 只使用一种形式并忽略隐藏字段。使用`<button>`，显示的文本可能与提交的值不同。

```
<form action="customer.php" method="get">
    <input type="hidden" name="reply" />
    <div class="message">
        <div class="messageBody">..</div>
        <button name="messageid" value="1234">Reply</button>
    </div>
    <div class="message">
        <div class="messageBody">..</div>
        <button name="messageid" value="1235">Reply</button>
    </div>
    ...
</form> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T08:09:13.740

所有方法都是正确的，除了方法 2 仅在您可以安全地忽略非 JavaScript 浏览的假设下是正确的。

关于表格的假设和评论是不正确的，或者至少是误导性的。表单不需要涉及用户输入；表单可用于提交以前收集的数据，除了提交字段外没有其他字段。即使不改变任何东西，例如由于输入数据的数量（因为 GET 数据的上限相当低），也可以使用 POST 方法；此外，问题中显示的表单使用默认方法 GET。

否则，这主要是一个非建设性的问题，需要讨论和论证，而不是技术解决方案。

# java - 使用indexOf和子字符串从句子中提取单词并将它们存储在java中的数组中

> ID：11461699
> 
> 赞同：-1
> 
> 时间：2012-07-12T22:32:13.793
> 
> 标签：java, arrays, substring, indexof

到目前为止，这是我程序的这一部分的内容；

```
String text = JOptionPane.showInputDialog("enter a sentence");

String newWord = "";
char space = '_';
int count = 0;

for(int i = 0; i < text.length(); i++)
{
  int found = text.indexOf(space, i);

  int start = found + 1; // start location of substring after a space
  int end = text.indexOf(space, start); // end of word
  count = end + 1;
}
  while(count < text.length())
  {

newWord[count] = text.substring(start, end); 

  count++;

}

System.out.println(newWord[count]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:41:44.087

要拆分句子，请使用 String 的 .split() 方法

```
String [] splitter = text.split(" "); 
```

这将打破基于空格的句子。然后你可以对数组做任何你需要的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:17:34.220

```
String text = JOptionPane.showInputDialog("Enter a sentence");
int count = 0;
char space = ' ';

int index = 0;
do 
{
   ++ count;
   ++ index;
   index = text.indexOf(space, index);
}
while (index != -1);

    String[] array = new String[count];
    index = 0;
    int endIndex = 0;
    for(int i = 0; i < count; i++)
    {
      endIndex = text.indexOf(space, index);

      if(endIndex == -1)
     {
       array[i] = text.substring(index);
     }else{
       array[i] = text.substring(index, endIndex);
     }

     index = endIndex + 1;
    }
    for(String s : array)
    {
      System.out.println(s);
    } 
```

# spring - 保护（使用角色和权限）Web 应用程序的最佳方法？

> ID：11461700
> 
> 赞同：1
> 
> 时间：2012-07-12T22:32:16.863
> 
> 标签：spring, gwt, spring-security, security, cas

考虑使用 Spring 安全性，但有比这更好的吗？另外，考虑使用 CAS（中央身份验证服务）与 Spring 安全性集成以进行单点登录？有什么建议么？这可能是不同的问题，但知道如何在 GWT 中使用 spring taglib 根据用户角色隐藏某些东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T16:32:48.790

我还推荐来自 Apache 的出色（但可能更简单）的安全库：Shiro。

这是与 CAS 集成的文档：http: [//shiro.apache.org/cas.html](http://shiro.apache.org/cas.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T04:33:41.740

`Thinking to use Spring security but is there better than that?` 也许

`Also, thinking to use CAS (Central Authentication Service) to integrate with Spring security for Single Sign On? Any suggestions?`

Spring Security 与 CAS 无缝集成，您只需要在客户端进行基于命名空间的配置并在需要时添加 bean。

[查看文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/cas.html)

`It might be different question but any idea how to use spring taglib in GWT to hide certain things based on user role?`

是的，如果您将 GWT 小部件包含到 JSP 中，您可以使用安全标记库来执行此操作：

这是有关如何执行此操作的教程，但尚未对其进行测试。

[gwt-widgets-into-jsps 的自定义集成](http://aarendar.wordpress.com/2010/01/11/custom-integration-of-gwt-widgets-into-jsps/)

和[jsps-in-a-gwt-world/ 的角色/](http://supplychaintechnology.wordpress.com/2009/12/18/the-role-of-jsps-in-a-gwt-world/)

也可以看看：

*   [http://www.springbyexample.org/examples/simple-gwt-spring-webapp-gwt.html](http://www.springbyexample.org/examples/simple-gwt-spring-webapp-gwt.html)
*   [如何有条件地向具有 Spring 安全性的登录用户显示 jsp 内容](https://stackoverflow.com/questions/1638170/how-to-conditionally-show-jsp-content-to-logged-in-users-with-spring-security)

# arcobjects - 未处理的异常——及时调试

> ID：11461703
> 
> 赞同：1
> 
> 时间：2012-07-12T21:53:51.323
> 
> 标签：arcobjects

我有一个在 Windows XP 平台上运行良好的应用程序（扩展）。当我在 Windows 7 上运行此应用程序时，它会引发此错误。我不确定是什么原因造成的。我在想这可能是因为没有安装 .net 框架，但我可以在那里看到所有内容。寻找解决此问题的任何想法。

注意：当我单击组合框时会出现此错误。我怎样才能越过这个消息框并得到实际错误。

谢谢杰

有关调用即时 (JIT) 调试而不是此对话框的详细信息，请参阅此消息的末尾。

************** 异常文本 **************

```
System.NullReferenceException: Object reference not set to an instance of an object.
   at MapExt_Net.HEI_Extensions.layout.frmLayout.DisplaySize()
   at MapExt_Net.HEI_Extensions.layout.frmLayout.cBLayoutExtent_SelectedIndexChanged(Object sender, EventArgs e)
   at System.Windows.Forms.ComboBox.OnSelectedIndexChanged(EventArgs e)
   at System.Windows.Forms.ComboBox.WmReflectCommand(Message& m)
   at System.Windows.Forms.ComboBox.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

![在此处输入图像描述](../Images/0f24d82f58165501e06a39d990933763.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:16:16.443

`MapExt_Net.HEI_Extensions.layout.frmLayout.DisplaySize()`引发了似乎由您自己实现的异常。能否请您粘贴该方法的代码？

# charts - 在 iReport (4.6.0) 中创建饼图

> ID：11461704
> 
> 赞同：1
> 
> 时间：2012-07-12T22:32:33.543
> 
> 标签：charts, jasper-reports, ireport

*在使用iReport* 4.6.0在我的查询 ( **SQL** )中使用**GROUP BY**时，我需要帮助只显示一个（完整的）饼图。

 ***我需要使用从**SQL**数据库中提取的数据使用*iReport*（4.6.0；我使用的是独立版本，而不是 NetBeans 插件）创建报告。基本上，我正在尝试创建一个饼图，显示数据库中男性的百分比和女性的百分比。

 **起初我尝试做两个单独的查询来提取这些信息：

```
SELECT COUNT('person_id') FROM 'table' WHERE 'SEX' = 'M';
SELECT COUNT('person_id') FROM 'table' WHERE 'SEX' = 'F'; 
```

我尝试将这两个查询都放入报告查询对话框中，但*iReport*显然一次只处理一个查询。我也尝试使用**UNION**。

然后我尝试（并且正在使用）：

```
SELECT COUNT('person_id') FROM 'table' GROUP BY 'sex' 
```

这给了我有限的成功。它创建了我需要的图表，但也创建了仅包含部分数据的其他多余图表。似乎每次*iReport*从查询中点击一个新的“组”时，它都会创建一个新图表，其中包含该组数据的信息以及来自先前组的任何数据（即在这种情况下，它创建了 2 个饼图，一个其中只显示了 DB 的女性成员，一个同时显示了男性和女性成员）。该理论还通过在 DB 中添加一个新类别（M、F、U）来测试它是否会创建 3 个图表；确实如此（第一个只有女性，第二个是男性和女性，第三个是男性，女性和未知）。

我感兴趣的图表是最后一张，它显示了所有组的数据。你们能帮我弄清楚如何获得最后一个完整的饼图吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:10:27.867

将图表放在标题或摘要带中。确保其评估时间设置为“报告”。*****

# python - MySQL 的数据库版本控制

> ID：11461707
> 
> 赞同：4
> 
> 时间：2012-07-12T22:32:59.743
> 
> 标签：python, mysql, database, controls, version

您使用什么方法对数据库进行版本控制？我已将我们所有的数据库表作为单独的 .sql 脚本提交到我们的存储库（mercurial）。这样，如果团队中的任何成员对员工表进行了更改，例如，当我更新我的存储库时，我将立即知道哪个特定表已被修改。

这种方法在：[What are the best practice for database scripts under code control 中](https://stackoverflow.com/questions/340614/what-are-the-best-practices-for-database-scripts-under-code-control?rq=1#answer-340700)有所描述。目前，我正在编写一个 python 脚本来执行数据库文件夹中的所有 .sql 文件，但是，由于外键约束导致的依赖问题确保我们不能只以任何顺序运行 .sql 文件。

python 脚本将生成一个文件，其中包含执行 .sql 文件的顺序。它将按照它们在 tableorder.txt 文件中出现的顺序执行 .sql 文件。一个表在其外键表被执行之前不能被执行，例如：

## 表顺序.txt

table3.sql
table1.sql
table7.sql 等等

通过解析“show create table”mysql 命令的结果，我已经从代码中生成了每个表的依赖关系列表。依赖项列表可能如下所示：

```
tblstate: tblcountry //tblcountry.sql must be executed before tblstate.sql etc
tblemployee: tbldepartment, tblcountry 
```

要生成 tableorder.txt 的内容，我需要一个如下所示的算法：

```
function print_table(table):
  foreach table in database:
    if table.dependencies.count == 0
      print to tableorder.txt
    if table.dependencies.count > 0
      print_table(dependency) //print dependency first
end function 
```

正如您将想象的那样，这涉及大量递归。我开始怀疑这是否值得努力？如果那里有什么工具？考虑到依赖关系，有什么工具（或算法）可以生成执行单独的 .sql 表和视图的顺序列表？对每个表/视图分别控制单独的 .sql 文件更好，还是更好地将整个数据库版本控制为单个 .sql 文件？我将不胜感激任何回应，因为这已经花费了很多天。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T22:56:09.773

我不使用 MySQL，而是使用 SQL Server，但是，这是*我*对数据库进行版本控制的方式：

（这很长，但最后我希望我放弃一个简单的模式转储作为处理数据库版本控制的主要方式的理由是显而易见的。）

1.  我对架构进行了修改并将*其应用于测试数据库*。

2.  在所述脚本之后，我生成增量更改脚本*和*模式转储。（我使用 ApexSQL，但可能有一些特定于 MySQL 的工具可以提供帮助。）

    1.  增量更改脚本知道如何从当前模式版本转到目标模式版本：ALTER TABLE existing, CREATE TABLE new, DROP VIEW old.. 多个操作可以在同一个 .SQL 文件中发生，因为*delta*很重要。

    2.  模式的转储是目标模式版本的：CREATE TABLE a, CREATE VIEW b .. 这里没有“ALTER”或“DROP”，因为它只是目标模式的快照。每个数据库对象都有一个 .SQL 文件，因为*架构*很重要。

3.  我使用 RoundhouseE 应用增量更改脚本。（我*不*使用 RoundhouseE“随时脚本”功能，因为它不能正确处理关系。）

我了解到，**如果没有全面的分步计划，就无法可靠地应用数据库模式更改**，并且类似地（如问题中所述），**关系依赖关系的顺序很重要**。仅存储“当前”或“结束”模式是不够的。在不知道 A->B->C 的情况下，有许多更改*无法*追溯应用 A->C，并且某些更改 B 可能涉及迁移逻辑或更正。SQL 模式更改脚本可以捕获这些更改并允许它们被“重放”。

但是，同时**仅保存 delta 脚本并不能提供目标模式的“简单视图”**。这就是为什么我还要*转储*所有架构以及更改脚本和*版本*。理论上，视图转储可用于构建数据库，但由于关系依赖（问题中提到的那种），它可能需要一些工作，我不将其用作自动模式恢复方法的一部分：然而，保留 Hg 版本控制的模式转储部分允许快速识别更改并查看特定版本的目标模式。

因此，变更增量通过修订*向前推进*，而模式转储提供当前修订的*视图。*因为变化增量是增量的并且*只向前，*所以保持处理这些变化的分支“干净”很重要，这对 Hg 很容易做到。

在我的一个项目中，我目前的数据库更改编号为 70 - 并且快乐且富有成效！- 切换到此设置后。（这些是*部署*的更改，而不仅仅是开发更改！）

快乐编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-25T19:55:39.903

您可以使用[sqitch](http://sqitch.org/)。这是[MySql 的教程](https://metacpan.org/pod/sqitchtutorial-mysql)，但它实际上与数据库无关。

> 更改是作为您选择的数据库引擎的本机脚本实现的……数据库更改可能会声明对其他更改的依赖——甚至是来自其他 Sqitch 项目的更改。这确保了正确的执行顺序，即使您已经无序地提交了对 VCS 的更改……更改部署是通过维护计划文件来管理的。因此，您无需为更改编号，尽管您可以根据需要进行编号。Sqitch 并不关心您如何命名您的更改...在您标记并发布您的应用程序之前，您可以随时修改您的更改部署脚本。他们不会仅仅因为他们已经致力于您的 VCS 而被锁定。这允许您采用迭代方法来开发数据库模式。或者，更好的是，您可以进行测试驱动的数据库开发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T22:44:05.710

我不确定这如何回答你的问题，但我倾向于只使用 mysqldump （标准安装的一部分）。这为我提供了创建表并填充它们的 sql，从而有效地序列化数据库。例子：

```
> mysqldump -u username -p yourdatabase > database_dump.sql 
```

从转储 sql 文件加载数据库：

> mysql -u 用户名 -p -e "源 /path/to/database_dump.sql"

为了进一步回答您的问题，只有当有多个人在数据库上工作时，我才会分别对每个表进行版本控制，这样可能会发生冲突，而只有一个转储受版本控制。我从来没有遇到过这样的项目（在项目的初始阶段之后，数据库往往是系统中波动性最小的部分之一），所以我只是将数据库转储作为一个整体而不是每个转储进行版本控制单独表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-03T17:00:45.587

我理解这个问题，但你不能想到使用 git 控制数据库的版本，就好像它是静态代码“”，因为它不起作用，以同样的方式，并且为每个程序员生成不同的文件并不是很有用，因为你说他们发生了冲突，或者他们没有可追溯性，我开始了一个与你的项目类似的项目，但是当试图控制程序员的版本和冲突时，这是一个更大的问题，到达的解决方案是生成一个维护以下顺序的项目

*   输入网页登录名/密码
*   管理用户和每个用户可以做什么的配置文件
*   委员会区 -> 常用和当前命令发送到数据库

*   > > 示例：alter table ALTER TABLE users ADD por2 varchar (255);

提交在控制系统本身中创建了可追溯性，并且从初始结构开始将结构发送到 git 以控制更改

*   变更控制区：是提交本身加上变更后生成的结构的可视化

*   服务器配置区：配置服务器并添加gitlab或github存储库，以更直观的方式进行版本控制，对开发人员没有问题

*   备份恢复区：发送备份并跟踪每个版本“数据库结构变化的结果”

这是我发现的最好的处理方式，而无需将工作留给特定的人。我希望它对你有帮助，我相信 phyton 是我发现的最好的，因为它使用了 Django，并且你从管理部分节省了很多编程.. 问候

# java - 您如何比较 1 个 if 语句中的多个整数而不重复它？

> ID：11461708
> 
> 赞同：0
> 
> 时间：2012-07-12T22:33:11.670
> 
> 标签：java, if-statement

自上次检查变量以来，我用 Java 编写了一些代码来计算虚拟相机中的运动。更具体地说，下面的代码：

```
float movementX, movementY, movementZ;                  
movementX = (int) (camX - sectorSize[1]);
movementY = (int) (camY - sectorSize[2]);
movementZ = (int) (camZ - sectorSize[3]);

/*
 * If the variable is below 0
 * then get the absolute value
 * of the movement since the
 * last camera position.
 */
if (movementX < 0) movementX *= -1;
if (movementY < 0) movementY *= -1;
if (movementZ < 0) movementZ *= -1;

if (movementX > 60 || movementY > 60 || movementZ > 60) 
{   
    //Reset the sector size to allow for new points,
    //don't store to save memory (may be changed later).
sectorSize[0] = 0;
} 
```

如果您需要更多代码，请告诉我。扇区大小变量在其 [0] 值中存储 0-500，在其 [1] 值中存储前 camX，在其 [2] 值中存储前 camY，最后在其 [3] 值中存储前 camZ。camX、camY 和 camZ 由其他代码处理（未显示）。删除了除有问题的代码以外的所有内容以保持整洁。

此代码按原样工作，但每次键入“if (a_int_value > an_other_value || etc)”有点乏味。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:13:50.730

内部阶层看起来是最好的方法。太糟糕了 java 没有提供任何资源密集型的东西，但是用相同的表达式比较一堆变量的能力有很大帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:37:30.903

将时刻放入一个 int 数组中。

遍历数组以搜索所有真实条件。如果遇到真条件，则将该标志标记为真并中断循环。最后，如果没有条件为真，则您的标志为假。

像这样的东西。

```
boolean ok = false;

for ( int v : momentArray ) {
    if ( v > 60 ) {
        ok = true;
        break;
    }
}

if ( ok ) {
    // ok, do something...
} 
```

或者

```
public static boolean checkForValues( int[] array, int min ) {

    for ( int v : array ) {
        if ( v > min ) {
            return true;
        }
    }

    return false;

}

// in another class...

if ( checkForValues( momentArray, 60 ) ) {
    // ok, do something...
} 
```

我假设所有条件都是相同的。如果它们不同，您也可以概括代码，但是您将需要创建一个类来存储条件......这不值得工作，因此最好对条件进行编码。

另一件事。你只有树值。如果您有很多值（具有相同的条件），我认为迭代会很好，但在您的场景中，我认为最好对每个条件进行编码，因为正如 Ghost 所说，更容易理解代码。

[]的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T22:53:46.587

我将创建一个运动类并在其中对“合法”运动的参数进行编码。
然后你可以测试：movementX.isValid()。您还可以保留一个 List 或创建另一个类来包装三个轴，并使用一个 isValid() 方法进行测试。

您应该考虑将扇区大小存储在比数组更具描述性的内容中。

最后，为什么要将浮点数转换为 int？这能带来什么好处？如果你的意思是去掉小数，有更好的方法来截断，或者下限/上限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T22:53:47.097

在方法内创建一个本地类：

```
void myMethod ( )
{
   class Movements
   {

     float movementX = (int) (camX - sectorSize[1]);
     float movementY = (int) (camY - sectorSize[2]);
     float movementZ = (int) (camZ - sectorSize[3]);

     boolean check3Axes ( int commonValue )
     {
       return 
         movementX > commonValue
           ||
         movementY > commonValue
           ||
         movementZ > commonValue ; 
     }

     void negate (  )
     {
       if (movementX > 0) movementX *= -1;
       if (movementY > 0) movementY *= -1;
       if (movementZ > 0) movementZ *= -1;
     }
   };

   Movements m = new Movements( );

   // This can be replaced with m.negate( )
   if (m.movementX > 0) m.movementX *= -1;
   if (m.movementY > 0) m.movementY *= -1;
   if (m.movementZ > 0) m.movementZ *= -1;

   if (m.check3Axes(60))
   {   
      //do something..
   }

   if (m.check3Axes(120))
   {   
      //do something else..
   }
} 
```

顺便说一句，您可能会发现可以在 Movements 类中添加更多常用方法，例如`negate()`.

但是，在某些时候，将运动作为常规课程可能会更好。

# android - 重新创建活动后Android关闭对话框

> ID：11461709
> 
> 赞同：0
> 
> 时间：2012-07-12T22:33:14.177
> 
> 标签：android, android-dialog

我像这样覆盖了方法 showDialog(int)：

```
@Override
public Dialog onCreateDialog(int id ){
    Log.d("Dialog",id+":created");
    switch (id) {
    case addressValidateProgressId:
        addressValidateProgress = new AddressValidateProgress(this);
        return addressValidateProgress;
    case gpsSearchloadId:
        gpsSearchload = new GPSSearchProgress(this,geocodeLocationToAddress);
        return gpsSearchload;
    case alertId:
        prepareAddressChooseDialog(addressList);
        return addressChooseDialog;
    default:
        return null;
    }

} 
```

这工作正常，对话框显示并随屏幕改变方向。

问题是，如果我在调用dismissDialog(id) 时旋转屏幕，我会得到一个异常，说“java.lang.IllegalArgumentException：没有通过Activity#showDialog 显示id 为0 的对话框”。

showDialog 方法不应该使活动成为对话框的所有者吗？

我看不出有什么可能是错的。

谢谢。

# ruby-on-rails - Rails 根据登录状态重定向

> ID：11461710
> 
> 赞同：1
> 
> 时间：2012-07-12T22:33:32.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的 Rails 应用程序中有一个联系表。现在它无论如何都只是重定向到主页。如果用户已登录，我想重定向到 user_path，如果未登录，我想重定向到主页。我该怎么做？

*使用设计

联系人控制器

```
 def create
    @message = Message.new(params[:message])

    if @message.valid?
      NotificationsMailer.new_message(@message).deliver
      redirect_to(user_path, :notice => "Message was successfully sent.")
    else
      flash.now.alert = "Please fill all fields."
      render :new
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T22:57:37.260

如果他们已登录，您可以重定向到其他地方：

```
if current_user
    redirect_to(user_path, :notice => "Message was successfully sent.")
else
    redirect_to root_path
end 
```

这是假设您`current_xxx`的设置为“ `user`”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:40:14.347

使用`user_signed_in?`助手

```
def create
  @message = Message.new(params[:message])

  if @message.valid?
    NotificationsMailer.new_message(@message).deliver
    if user_signed_in?
      redirect_to user_path, :notice => "Message was successfully sent."
    else
      redirect_to root_path
    end
  else
    flash.now.alert = "Please fill all fields."
    render :new
  end
end 
```

# node.js - dotCloud 自定义 node.js 服务 nginx 配置

> ID：11461714
> 
> 赞同：0
> 
> 时间：2012-07-12T22:34:03.157
> 
> 标签：node.js, nginx, dotcloud

[我使用https://github.com/dotcloud/node-on-dotcloud](https://github.com/dotcloud/node-on-dotcloud)设置了一个自定义 nodejs 服务。但是现在它似乎没有nginx。如何为自定义 nodejs 服务设置 nginx？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T00:28:35.600

首先，警告性声明：dotCloud 'custom' 服务仍处于测试阶段。所以我现在给你的答案将来可能会改变。

当您创建一个“自定义”类型的 nodejs 服务时，您的服务容器也有 nginx 可用，但它没有运行。要让 nginx 运行，您需要：

1.  将 nginx.conf 文件添加到应用程序的根目录。

2.  在 dotcloud.yml 文件中添加一个“进程”来启动 nginx：

    进程：nginx -c your_configuration_file

其中 *your_configuration_file* 是 nginx.conf 的完整路径

我希望这会有所帮助！

/安迪

# android - 将活动转换为服务 (android)

> ID：11461720
> 
> 赞同：2
> 
> 时间：2012-07-12T22:34:32.607
> 
> 标签：android, eclipse, service, android-activity

我正在开发一个应用程序，旨在获取有关用户位置和当前天气的信息。信息以这种方式收集：StartGathering --> 获取纬度/经度 --> 从坐标中获取位置数据（城市、地址等） --> 获取天气信息 --> 将信息保存在 SQL 数据库中。一切都是通过使用 bundle 在包含数据的不同活动之间发送一个字符串数组来完成的。为了准确起见，该过程每 X 分钟重复一次，但由于我处理过活动，因此更新过程会干扰设备上的其他应用程序。我为流程中的每个活动添加了 android:theme="@android:style/Theme.NoDisplay"，认为这与在后台执行此操作相同。

有没有办法轻松地将一堆不同的活动转换为服务，从而允许应用程序在后台收集必要的信息，以便用户可以使用设备而不会造成任何性能损失？或者活动是否有可能在不干扰其他应用程序的情况下在后台做一些工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:53:02.477

> 有没有办法轻松地将一堆不同的活动转换为服务......

不，创建一个`Service`（或`Services`）并复制/粘贴您现有的代码。请注意，尽管 a`Service`在应用程序的主线程（又名 UI 线程）上运行，所以如果有任何耗时的工作需要完成，您需要使用工作线程，或者`IntentService`默认情况下使用它在后台/工作线程上工作。

> 或者活动是否有可能在不干扰其他应用程序的情况下在后台做一些工作？

不，不是你试图这样做的方式。将 a`Activity`视为类似于 Windows 窗体（或类似的）。换句话说，它是一个允许用户与应用程序交互的 UI 框架。有一些方法可以在`Activity`（`AsyncTask`例如使用）中进行后台工作，但`Activity`它不是一个通用类，它可以在进行一些“数字运算”时隐藏起来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T00:05:16.750

> 从而允许应用程序在后台收集必要的信息，以便用户可以使用设备而不会造成任何性能损失

如果您的程序正在做*任何事情*，那么您正在造成“性能损失”，可能并不显着或不明显（对用户而言），但仍然会造成损失。在我看来，您正在尝试做的事情（获取位置并发出网络请求以每 X 分钟获取与位置相关的天气信息）将导致电池大量消耗，具体取决于您使用的间隔时间。如果您不希望他们抱怨您的应用程序耗尽了他们的电池，我建议您将间隔时间留给您的用户。

# sencha-touch - 使用 POST 代理加载商店？

> ID：11461723
> 
> 赞同：0
> 
> 时间：2012-07-12T22:34:41.620
> 
> 标签：sencha-touch, sencha-touch-2

我有一个需要使用 POST 而不是 GET 调用的服务。我以为我在某处读到我可以简单地在代理上添加**方法：'POST'**选项，但它似乎没有效果。

```
    Ext.define('Sencha.store.Teams', {
        扩展：'Ext.data.Store'，

        配置：{
            模型：'Sencha.model.Team',
            自动加载：真，
            代理： {
                类型：'ajax'，
                // 方法：'GET',

                方法：'POST'，
                网址：'teams.json'
            }
        }
    });

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T23:07:52.363

您必须覆盖 actionMethod 属性

```
Ext.define('Sencha.store.Teams', {
    extend: 'Ext.data.Store',

    config: {
        model: 'Sencha.model.Team',
        autoLoad: true,
        proxy: {
            type: 'ajax',
            actionMethods: {
                create : 'POST',
                read   : 'POST', // by default GET
                update : 'POST',
                destroy: 'POST'
            },
            url: 'teams.json'
        }
    }
}); 
```

或定义自己的代理类

```
Ext.define('Sencha.data.PostAjax', {
    extend: 'Ext.data.proxy.Ajax',
    alias: 'proxy.postproxy', // must to get string reference
    config: {
       actionMethods: {
            create : 'POST',
            read   : 'POST', // by default GET
            update : 'POST',
            destroy: 'POST'
        },
    }
}

Ext.define('Sencha.store.Teams', {
    extend: 'Ext.data.Store',

    config: {
        model: 'Sencha.model.Team',
        autoLoad: true,
        proxy: {
            type: 'ajaxpost'
            url: 'teams.json'
        }
    }
}); 
```

*免责声明：代码是从头开始编写的，没有经过真正的测试。如果它不起作用，请不要投反对票，然后不要重播您的评论。谢谢。*

# javascript - IE7 的 scrollIntoViewIfNeeded()

> ID：11461724
> 
> 赞同：5
> 
> 时间：2012-07-12T22:34:51.227
> 
> 标签：javascript, html

当然，scrollIntoViewIfNeeded 似乎是仅由 WebKit 提供的功能。但是，我正在研究需要与 IE 兼容的东西，回到 7，我需要检测某些东西是否可见，如果不可见，则在其上调用 scrollIntoView()。

同样重要的是要注意，我不是在处理整个窗口，我可能正在处理一个较小的 DIV，其中一个元素可能会滚动出可视框。

例如，id 为“pleaseFindMe”的元素只有在溢出 div 的可视区域时才应滚动到视图中。

```
 <div style='border:1px solid black;width:40%; overflow:scroll;'>
        <span id='e2' style='white-space: nowrap;' >Lorem ipsum aliqua proident veniam et quis consectetur esse dolore non Ut nulla dolor eu culpa. Lorem ipsum sint cupidatat non et adipisicing esse elit officia. proident, sunt in culpa qui officia deserunt mollit anim <span id='pleaseFindMe'>id est</span> laborum. </span>
    </div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-11-30T16:30:40.283

老问题，但在今天的浏览器（IE，Fx）上似乎仍然相关。所以我为`scrollIntoViewIfNeeded()`.

```
if (!Element.prototype.scrollIntoViewIfNeeded) {
    Element.prototype.scrollIntoViewIfNeeded = function (centerIfNeeded) {
        "use strict";

        function makeRange(start, length) {
            return {"start": start, "length": length, "end": start + length};
        }

        function coverRange(inner, outer) {
            if (false === centerIfNeeded ||
                (outer.start < inner.end && inner.start < outer.end))
            {
                return Math.min(
                    inner.start, Math.max(outer.start, inner.end - outer.length)
                );
            }
            return (inner.start + inner.end - outer.length) / 2;
        }

        function makePoint(x, y) {
            return {
                "x": x, "y": y,
                "translate": function translate(dX, dY) {
                    return makePoint(x + dX, y + dY);
                }
            };
        }

        function absolute(elem, pt) {
            while (elem) {
                pt = pt.translate(elem.offsetLeft, elem.offsetTop);
                elem = elem.offsetParent;
            }
            return pt;
        }

        var target = absolute(this, makePoint(0, 0)),
            extent = makePoint(this.offsetWidth, this.offsetHeight),
            elem = this.parentNode,
            origin;

        while (elem instanceof HTMLElement) {
            // Apply desired scroll amount.
            origin = absolute(elem, makePoint(elem.clientLeft, elem.clientTop));
            elem.scrollLeft = coverRange(
                makeRange(target.x - origin.x, extent.x),
                makeRange(elem.scrollLeft, elem.clientWidth)
            );
            elem.scrollTop = coverRange(
                makeRange(target.y - origin.y, extent.y),
                makeRange(elem.scrollTop, elem.clientHeight)
            );

            // Determine actual scroll amount by reading back scroll properties.
            target = target.translate(-elem.scrollLeft, -elem.scrollTop);
            elem = elem.parentNode;
        }
    };
} 
```

[http://jsfiddle.net/obnpd7ra/](http://jsfiddle.net/obnpd7ra/)

该代码旨在在存在嵌套可滚动区域和相对定位的元素的情况下运行良好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-12T22:53:10.630

`getBoundingClientRect`IE从IE4开始就支持美元素法。虽然它在 IE<8 中有一些小缺陷，但它绝对可以用于您的目的。

所以这里的诀窍是：

```
var findMe = document.getElementById("pleaseFindMe"),
    contRect = container.getBoundingClientRect(),
    findMeRect = findMe.getBoundingClientRect();
if (findMeRect.top < contRect.top || findMeRect.bottom > contRect.bottom
       || findMeRect.right > contRect.right || findMeRect.left < contRect.left)
    findMe.scrollIntoView(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-09T09:17:20.870

在 Github 上查看这个[polyfill](https://gist.github.com/hsablonniere/2581101)。它提供了非标准 WebKit 方法 scrollIntoViewIfNeeded 的 JavaScript 实现。

# php - 将多维数组添加到mysql

> ID：11461725
> 
> 赞同：0
> 
> 时间：2012-07-12T22:34:59.060
> 
> 标签：php, arrays, json

嗨，我有多维数组：

```
Array
(
    [0] => Array
        (
            [name] => uzsakymas
            [value] => title
        )

[1] => Array
    (
        [name] => preke
        [value] => name
    )

[2] => Array
    (
        [name] => kaina
        [value] => 5
    )

[3] => Array
    (
        [name] => kiekis
        [value] => 1
    )

[4] => Array
    (
        [name] => preke
        [value] => name2
    )

[5] => Array
    (
        [name] => kaina
        [value] => 5
    )

[6] => Array
    (
        [name] => kiekis
        [value] => 5
    )

) 
```

但是当我尝试获取添加到 mysql 的值时，我得到了一个错误。我做错了什么？

```
$json = json_decode($_POST['json'], true);
print_r($json);
foreach($json as $key => $name) {
    echo $name['preke'];
} 
```

> 未定义的索引：preke in...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:37:56.240

回声`$name['preke'];`不会让你走得很远。尝试`$name['name'];`是`name`关键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:38:27.340

尝试：

```
$name['name']; 
```

您的 $name var 是包含 2 个关联条目的数组： name ， value；

# apache-flex - 我可以使用任何条件编译常量吗？

> ID：11461726
> 
> 赞同：1
> 
> 时间：2012-07-12T22:35:17.660
> 
> 标签：apache-flex, compiler-construction

是否有任何内置的条件编译常量可用于检查我是在调试还是发布版本中运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:04:46.133

不是默认的，没有。但是很容易添加到您的构建配置中来执行此操作。这是编译器标志和条件编译的解释。

[AS3：条件编译揭秘](http://www.boostworthy.com/blog/?p=227)

某些 IDE（例如 FlashDevelop）会为您添加`CONFIG::Debug`和`CONFIG::Release`构建配置

# xml - 如何在soapUI中将属性作为字符串参数嵌入

> ID：11461733
> 
> 赞同：1
> 
> 时间：2012-07-12T22:36:06.153
> 
> 标签：xml, soapui

我最近开始使用soapui 来测试web 服务并且相当新。我想知道如何将属性值作为字符串嵌入到请求中。例如请求如下

```
<org:Customer org1:Description="customer" org1:DisplayName="google" 
org1:Name="google"/> 
```

本质上，我正在寻找这样做的事情，

```
<org:Customer org1:Description=${#Project#orgdesc}     
org1:DisplayName=${#Project#orgdisplayname}        
org1:Name=${#Project#orgdisplayname}/> 
```

我在项目级别为上述所有字段定义了属性，用于参数化我的测试。我正在尝试将这些属性嵌入到请求中。我尝试了以下事情，但它们都不起作用。有人可以让我知道我错过了什么吗？

**编辑#1**

我认为我在下面做的不对。因为在上面的原始请求中，Description、DisplayName 和 Name 是 Customer 的属性，我通过将它们作为下面的子节点来发送请求。这似乎从根本上不正确。那么如何将我定义的属性值嵌入标签的属性中呢？

**尝试 1**

```
 <org:Customer> 
         <arg0>
            <org1:Description>${#Project#orgdesc}</org1:Description>
            <org1:DisplayName>${#Project#orgdisplayname}</org1:DisplayName>
            <org1:Name>${#Project#orgname}</org1:Name>
         </arg0>
  </org:Customer> 
```

**尝试 2**

```
 <org:Customer> 
             <org1:Description>
              <arg0>${#Project#orgdesc}</arg0>
             </org1:Description> 
             <org1:DisplayName>
               <arg0>${#Project#orgdisplayname}</arg0>
             </org1:DisplayName>
             <org1:Name>
               <arg0>${#Project#orgname}</arg0>
             </org1:Name>
     </org:Customer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:02:49.320

我很确定您只是有一个太多的“#”符号。

我认为'属性扩展'语法是你需要的。喜欢：

def postResp = context.expand('${PostObject#response}')

那来自一个 groovy 脚本，但我认为 groovy 在发送它们之前应用于消息模板，所以：

${项目#orgname}

可能是你需要的。

编辑

在这种情况下，请尝试从 groovy 设置一个“最低范围”变量并在您的消息中使用它。执行以下操作：

def city= context.expand('${#Project#city}')

context.setProperty（“城市”，城市）

然后在 XML 中，输入：

${城市}

这是 XML 请求的一部分：

```
 <data:address>
     <data:street>${street}</data:street>
     <data:city>${city}</data:city>
     <data:state>${state}</data:state>
     <data:zipCode>${zip}</data:zipCode>
     <data:country>${country}</data:country>
  </data:address> 
```

# ruby-on-rails-3 - 链轮中的环境特定变量

> ID：11461736
> 
> 赞同：2
> 
> 时间：2012-07-12T22:36:30.937
> 
> 标签：ruby-on-rails-3, sprockets

我使用 Rails 3.2 内置的 sprockets 功能来编译静态资产。是否可以使用环境特定变量编译 javascript？

所以我想做这样的事情

/assets/javascripts/myfile.js

* * *

```
 //lots of code
 script.src =
        ('https:' == document.location.protocol ? 'https://' : 'http://') +
                'some.metrics.site/projects/<%=ENV_SPECIFIC_TOKEN%>.js';
  //lots of other code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T06:40:44.133

Sprockets 允许您将任意数量的预处理器附加到文件名。在末尾添加a `.erb`，它将首先被解释为ERB，然后输出为JavaScript文件。

`mv assets/javascripts/myfile.js assets/javascripts/myfile.js.erb`

查看有关[JavaScript/CoffeeScript 和 ERB](http://guides.rubyonrails.org/asset_pipeline.html#javascript-coffeescript-and-erb)的 Rails 资产管道指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T07:54:45.720

这个问题有什么更新吗？

使用 .erb 扩展名可以解决问题，但不是在您预编译资产时。

就我而言，我需要为我的登台环境预编译资产。当我做**rake assets:precompile RAILS_ENV=staging**时，我可以在生成的 js 资产中看到我的环境变量没有定义，因此字符串插值导致一个空字符串。

问题是（我认为）环境变量定义在 config/application.rb 中，生成资产时不会调用它。

我认为 gem Capistrano 可以通过在生成资产之前添加一些任务来提供帮助，但是如果我们可以在生成资产时定义一些环境变量（例如在 CLI 中），那就更好了。

# xcode - 如何重新创建 xcode 的连接检查器视图

> ID：11461737
> 
> 赞同：1
> 
> 时间：2012-07-12T22:36:53.323
> 
> 标签：xcode, macos, nsview, inspector

我想知道如何在 Xcode 的实用程序面板中创建类似于连接检查器视图的内容。我能看到的唯一看起来相似的是大纲视图或源列表，但我不知道如何修改它们以获得下面屏幕截图中的外观。有人可以指点我一个教程或其他东西来帮助我吗？

![在此处输入图像描述](../Images/5b2bc113586c5ed63b6160e5930e4f93.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:26:10.633

我能够通过从这里使用 JUInspectorView 来完成我想要的：[https ://github.com/JustSid/JUInspectorView](https://github.com/JustSid/JUInspectorView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:51:14.413

您正在寻找的似乎是某种自定义面板对象。[Apple 在此网页](http://developer.apple.com/library/mac/#documentation/userexperience/conceptual/applehiguidelines/Windows/Windows.html)上对其所有 UI 元素（包括面板）都有很好的解释。

您是否正在寻找更底层、基于代码的教程？

# java - 解析 Web 服务响应时出现 MalformedURLException

> ID：11461738
> 
> 赞同：3
> 
> 时间：2012-07-12T22:36:55.847
> 
> 标签：java, xml, parsing

所以我正在尝试编写一个简单的 Web 服务来获取当前天气。使用以下代码可以调用 Web 服务方法并将返回的 XML 数据打印到控制台。

但是，当我尝试解析此方法响应时，我得到 MalformedURLException。我可以在错误中看到我想要解析的 XML。

所以我尝试将响应保存到文件中以这种方式解析它：

当我尝试将网络响应保存到文件时，我得到所有中文字母。`System.out.println`将 XML 完美地打印到控制台，就像我需要它在文件中一样。

我是一个完全的新手，所以如果我遗漏了一些非常简单的东西，请原谅我。我想这样做，而不必在本地保存文件，但是在这里任何工作都很好。

我的问题出在这段代码的某个地方：

```
GlobalWeather service = new GlobalWeather();  
GlobalWeatherSoap port = service.getGlobalWeatherSoap();
String data = port.getWeather(city, country);

// this prints the xml response to the console perfectly
System.out.println(data);

SAXParserFactory spf = SAXParserFactory.newInstance();
spf.setNamespaceAware(true);
SAXParser saxParser = spf.newSAXParser();
XMLReader xmlReader = saxParser.getXMLReader();
xmlReader.setContentHandler(new WeatherApp());

// this gives MalformedURLexception when set up this way.
// this gives the correct output when passed a locally stored XML file
// I have omitted my SAX methods and my weather class that holds the data
// but all work fine when using a local XML file on my machine.
xmlReader.parse(data); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-12T22:55:04.543

代替

```
xmlReader.parse(data); 
```

和

```
InputSource source = new InputSource(new StringReader(data));
xmlReader.parse(source); 
```

您不小心调用了 SAXReader.parse 的错误重载。采用 String 的版本需要一个 URI，它可以在其中检索要解析的内容，而不是内容本身。

# java - JDesktopPane 边界 - JInternalFrame 没有填满整个桌面

> ID：11461739
> 
> 赞同：0
> 
> 时间：2012-07-12T22:37:05.183
> 
> 标签：java, swing, jinternalframe, jdesktoppane

我想让我`JDesktopPane`的`JInternalFrames`内部可以最大化并完全阻挡`JDesktopPane`. 如果你运行这个演示，你会发现如果你`JInternalFrame`最大化`JDesktopPane`. **如何进行`JDesktopPane`设置以使其`JInternalFrame`占用整个 JDesktopPane**？

在这张图片中，我运行了下面的代码并按下了 JInternalFrame 上的最大化按钮，但 JDesktopPane 上仍然显示“蓝色”。

![在此处输入图像描述](../Images/5f390aaa6cfe1d9f9f5f2539175d3de4.png)

```
import java.awt.BorderLayout;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JTextArea;

/**
 *
 * @author Robert
 */
public class Temp {

    Temp() {
        boolean resizable = true;
boolean closeable = true;
boolean maximizable  = true;
boolean iconifiable = true;
String title = "Frame Title";
JInternalFrame iframe = new JInternalFrame(title, resizable, closeable, maximizable, iconifiable);

// Set an initial size
int width = 200;
int height = 50;
iframe.setSize(width, height);

// By default, internal frames are not visible; make it visible
iframe.setVisible(true);

// Add components to internal frame...
iframe.getContentPane().add(new JTextArea());

// Add internal frame to desktop
JDesktopPane desktop = new JDesktopPane();
desktop.add(iframe);

// Display the desktop in a top-level frame
JFrame frame = new JFrame();
frame.getContentPane().add(desktop, BorderLayout.CENTER);
frame.setSize(300, 300);
frame.setVisible(true);
    }
    public static void main (String[] args) {
        new Temp();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T07:49:49.000

你可以在谷歌上找到令人惊奇的东西。我自己没有检查过，但这可能会有所帮助

[使用 Aqua 外观禁用 JInternalFrames 周围的阴影](https://stackoverflow.com/questions/7838084/disabling-the-shadow-around-jinternalframes-with-the-aqua-look-and-feel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T04:19:19.527

您可以覆盖您`maximizeFrame()`的. [这里](https://stackoverflow.com/a/6916503/230513)有一个相关的例子。`DesktopManager``JDesktopPane`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T17:13:54.467

提尔这个

```
// Add internal frame to desktop
JDesktopPane desktop = new JDesktopPane();
desktop.add(iframe);
iframe.setMaximum(true); 
```

# c# - 设置一组动作需要相同的授权

> ID：11461740
> 
> 赞同：0
> 
> 时间：2012-07-12T22:37:05.843
> 
> 标签：c#, asp.net-mvc-3, roleprovider, asp.net-authentication

有没有办法在控制器内设置一组操作以要求用户担任特定角色？

因此，例如，如果我有 5 个操作需要用户担任“招聘”角色，我可以对代码进行分组，然后让所有这些操作都需要基于单个注释的相同角色吗？

相反，如果这是不可能的，有没有办法将类标记为需要某个角色，并且他们是否有一个注释来设置一些操作来忽略这个要求？

最后，如果这不是一个选项，您可以使用部分类来完成此操作吗？

我没有想到的任何其他方法都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:00:54.160

贾里德，

这就是我会做的，但它并没有解决必须为每个人做的问题：

```
[Authorize]
public class HomeController : Controller

[Authorize(Roles = "Recruiter")]
public ActionResult MethodOne()
{

} 
```

看起来你的答案就在这里：

[仅针对一项操作覆盖控制器 AuthorizeAttribute](https://stackoverflow.com/questions/2071235/overriding-controller-authorizeattribute-for-just-one-action)

该问题的答案似乎也符合您的要求 - 使用 Order 属性设置对控制器的限制最少的授权和对方法的最大限制。

将控制器设置为这个（大多数方法之一），对于您想要豁免的那些（较少），使您的授权声明更具限制性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:17:33.920

看了很多之后，似乎没有办法将`[Authorize]`属性应用于一组动作（我已经找到了）。看来您必须将其应用于班级或个人行动。虽然 Skitterm 的回答是一个不错的选择，但它并没有解决我希望解决的问题。

# sql-server - 在 SQL Server CASE 中对负值进行分组

> ID：11461741
> 
> 赞同：2
> 
> 时间：2012-07-12T22:37:13.823
> 
> 标签：sql-server, case

我正在尝试`CASE`将`SQL Server`. 当值为正时，它工作正常。当值为负时，它会爆炸。

[这是我为复制它而创建的 SQL Fiddle 的链接：](http://sqlfiddle.com/#!3/e023a/6/0)

这是代码：

```
 -- Create the table --

    CREATE TABLE Test (
        ClientID varchar(12),
        Value decimal(12,10)
      PRIMARY KEY (ClientID)
      );

    -- Load the data -- 
    INSERT INTO Test (ClientId, Value)
            VALUES('1','10'),
            ('2','-10'),
            ('3','11.2'),
            ('4','-11.6'),
            ('5','12.544'),
            ('6','-13.456'),
            ('7','14.04928'),
            ('8','-15.6089'),
            ('9','15.7351'),
            ('10','-18.1063'),
            ('11','17.6234'),
            ('12','-21.0034'),
            ('13','19.7382'),
            ('14','-24.3639'),
            ('15','22.1068'),
            ('16','-28.2621'),
            ('17','24.7596'),
            ('18','-32.7841'),
            ('19','27.7307'),
            ('20','-38.0296'),
            ('21','31.0584'),
            ('22','-44.1141'),
            ('23','34.785499'),
            ('24','-51.1726'),
            ('25','38.9597'),
            ('26','-59.3602'),
            ('27','43.6349'),
            ('28','-68.8579'),
            ('29','48.8711'),
            ('30','-79.8751'); 
```

现在运行`CASE`语句：

```
SELECT 
  CASE
    WHEN Value BETWEEN 0 AND 20 THEN '0-20'
    WHEN Value BETWEEN 21 AND 40 THEN '20-40'
    ELSE '40+'
    END as ValueRange, count(*) as count
FROM Test
WHERE Value > 0
GROUP BY CASE
  WHEN Value BETWEEN 0 AND 20 THEN '0-20'
  WHEN Value BETWEEN 21 AND 40 THEN '20-40'
  ELSE '40+'
  END
; 
```

这很好用。结果：

```
VALUERANGE      count
0-20           7
20-40          6
40+            2 
```

现在有负值 - 它不起作用：

```
SELECT 
  CASE
    WHEN Value BETWEEN 0 AND -20 THEN '0-20'
    WHEN Value BETWEEN -21 AND -40 THEN '20-40'
    ELSE '40+'
    END
 as ValueRange, count(*) as count
FROM Test
WHERE Value < 0
GROUP BY CASE
  WHEN Value BETWEEN 0 AND -20 THEN '0-20'
  WHEN Value BETWEEN -21 AND -40 THEN '20-40'
  ELSE '40+'
  END
; 
```

结果：

```
VALUERANGE  count
40+          15 
```

它将所有内容分组为 40+ - 没有分解较低的值范围。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:43:20.403

尝试

```
SELECT 
  CASE
    WHEN Value BETWEEN -20 AND 0 THEN '0-20'
    WHEN Value BETWEEN -40 AND -21 THEN '20-40'
ELSE '40+'
END
 as ValueRange, count(*)
FROM Test
--WHERE Value > 0
GROUP BY CASE
  WHEN Value BETWEEN -20 AND 0 THEN '0-20'
  WHEN Value BETWEEN -40 AND -21 THEN '20-40'
  ELSE '40+'
END
; 
```

我希望中间值首先取最小值。

```
ValueRange 
---------- -----------
0-20       5
20-40      5
40+        20 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T23:11:57.203

您的问题已经解决（将负数放在首位，因此 BETWEEN 值按升序排列）但您可能希望看到一些替代查询语法（我更喜欢像您一样的 CASE 结构）：

```
SELECT 
   ValueRange =
      Convert(varchar(11), R.Low)
      + Coalesce(' - ' + Convert(varchar(11), R.High - 1), '+'),
   Qty = Count(*)
FROM
   dbo.Test T
   INNER JOIN (
      SELECT 0, 21
      UNION ALL SELECT 21, 41
      UNION ALL SELECT 41, NULL
   ) R (Low, High)
      ON T.Value >= R.Low
      AND T.Value < Coalesce(R.High, 2147483647)
WHERE T.Value >= 0
GROUP BY R.Low, R.High; 
```

我更喜欢这个，因为我发现修改范围值比使用 case 语句更容易，而且它有助于避免在文本描述中重复数字。

如果您只想要一个块中的每 20 个，那么这更容易：

```
SELECT
   BlockHigh = (Value + 19) / 20 * 20, -- 20 for 1-20, 40 for 21 - 40, etc.
   Qty = Count(*)
FROM dbo.Test
GROUP BY (Value + 19) / 20 * 20; 
```

我假设在第一个查询中您可能没有使用整数，而在第二个查询中您是。

请注意，您的“40+”是错误的，因为您编写 CASE 语句的方式实际上是“41+”。

# google-chrome - Windows 身份验证仅在一台机器上失败

> ID：11461748
> 
> 赞同：14
> 
> 时间：2012-07-12T22:37:38.243
> 
> 标签：google-chrome, windows-7, iis-7, internet-explorer-8, windows-authentication

我有一台 Windows 机器试图访问打开了 Windows 身份验证的 IIS 服务器。我知道这适用于服务器端，因为我已经在另一台机器上登录了我的域帐户，并且我单位中的其他人无需登录即可访问有问题的 url（浏览器会自动登录）。

我很困惑我自己的开发机器无法以这种方式登录（并且仍然显示登录框）并且想要一些帮助，或者至少有一些关于其他检查的想法。

我检查了工具 -> 互联网选项 -> 安全 -> 本地 Intranet -> 高级选项 -> 用户身份验证，其中设置为自动提供用户名和密码。

我的工作站是 Windows 7 企业版，就像办公室中的其他工作站一样，但作为开发人员，我毫不怀疑我更改了客户端上的一些我不需要的设置。

有任何想法吗？

更新：如果有任何问题，它也会在没有登录框的情况下在 Chrome 中失败，只是一个简单的“错误 10（net::ERR_ACCESS_DENIED）：未知错误”

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-18T06:55:47.113

我在 chrome 上遇到过类似的问题，无法打开任何 Intranet 网站。我尽一切努力解决它，但没有任何效果真的很沮丧。终于看到上面的帖子了。通过观察线条

> 我检查了工具 -> 互联网选项 -> 安全 -> 本地 Intranet -> 高级选项 -> 用户身份验证，其中设置为自动提供用户名和密码。

得到了一些线索。如果我们选中“自动用户名和密码”框，我很好奇使用的用户名和密码是什么，而这正是解决方案。

自动用户名和密码取自 Windows Vault（在控制面板中搜索“管理网络密码”）。就我而言，Windows Credentials 类别中有一个条目。这是我们在工具 -> 互联网选项 -> 安全 -> 本地 Intranet -> 高级选项 -> 用户身份验证中选中“自动用户名和密码”框时使用的用户名和密码。

因此，如果您确定在其他地方不需要它，则解决方案要么更正该条目，要么完全删除该条目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-07T21:53:35.030

Chrome 共享 IE 的安全设置。在 IE 中打开你的页面，转到工具 -> 互联网选项 -> 安全选项卡 -> 本地 Intranet -> 站点 -> 高级 -> 将此网站添加到区域字段 -> 输入您所在的网站尝试访问抛出 ERR_ACCESS_DENIED 错误，包括您使用的正确协议（如 http 或 https）并单击添加按钮 在安全选项卡中，继续确保突出显示 Intranet 区域并单击自定义级别按钮，请确保您选择以下选项：仅在 Intranet 区域中自动登录

如果您登录到域并且您的网站正在使用集成 Windows 身份验证，那么此解决方案将起作用，您将能够摆脱 ERR_ACCESS_DENIED。

在此之后如果它不起作用，请从浏览器缓存中清除浏览器以下项目： Cookie 和其他站点和插件数据 缓存的图像和文件

重新启动浏览器。

如果它不起作用，请重新启动您的机器。

“对我来说，重新启动机器有帮助”

如果它仍然不起作用，请将 IE 选项中的“仅在 Intranet 区域中自动登录”设置改回“提示输入用户名和密码”，然后重新启动浏览器并重试。

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-16T21:03:56.667

Chrome 将某些凭据保存在 Windows Credential Vault 中（开始 | 搜索 Manage Windows Credentials），您将在那里看到您的凭据。删除凭证，系统将提示您输入新的凭证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-27T03:29:50.713

只是把这个留给后代，我在访问一个使用 NTLM 的网站并意外使用旧密码后遇到了同样的问题。清除缓存/cookies 等无效，重新启动 Chrome 无效，我陷入了死胡同。

然后我意识到，由于 Chrome 启动器，我有进程在后台运行，所以我杀死了它们，之后一切都按预期工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-08T15:23:09.667

我刚遇到这个问题。

解决方案是关闭所有 Chrome 实例。

我昨天更改了我的 Windows 密码。Chrome 一定一直在缓存与该旧密码相关的内容。

# oracle - 在运行时更改架构 delphi 5/水晶 8.5

> ID：11461759
> 
> 赞同：0
> 
> 时间：2012-07-12T22:38:03.790
> 
> 标签：oracle, delphi, crystal-reports-8.5

我现在有一个数据库，前端（delphi 5）端连接到一个用户名。我们使用以下方式调用报告：

```
with tcrpe.create(self) do
    try
      report_name := 'CrystalLotRecapSummary.rpt';
      if fileexists(dmposting.tws_drive+'\tws\special\'+report_name) then
        ReportName := dmposting.tws_drive+'\tws\special\'+Report_Name
      else
        ReportName := dmposting.tws_drive+'\tws\reports\harvest\'+Report_Name;
      WindowButtonBar.PrintSetupBtn := true;
      Paramfields.retrieve;
      ParamFields[0].Value := cmbCropYear.text;  // IN OLD REPORT
      ParamFields[1].Value := 'ALL';
      ParamFields[2].Value := real_to_str(unitfactor,0);  // IN OLD REPORT
      ParamFields[3].Value := cmbUnit.text; // IN OLD REPORT
      ConnectMethod := useConnect;
      Connect.Retrieve;
      Connect.Password := 'PASSWORD';
      Output := toWindow;
      Execute;
    finally
      CloseJob;
    end;
end; // PRINT SUMMARY BY WAREHOUSE 
```

这工作得很好。问题是我们现在将有 2 个模式（sysdba 和 sysdba2）。

现在水晶报告查询看起来像：

```
SELECT
LOT_RECAP."GROWING_YEAR", LOT_RECAP."GREEN", LOT_RECAP."ADJUSTED", LOT_RECAP."SHIPPED",
LOT_RECAP."WAREHOUSE_ID", LOT_RECAP."REMAINING", LOT_RECAP."LOT_ID",
LOT_RECAP."FINISH_DRYING", LOT_RECAP."NAME", LOT_RECAP."STATUS",
LOT_RECAP."COMMODITY_ID",
LOT_RECAP."VARIETY_ID", LOT_RECAP."PRODUCER_ID", LOT_RECAP."LR_AVMOISTURE",
LOT_RECAP."PROJECTED", LOT_RECAP."NOTE", LOT_RECAP."MASTER_ID",
LOT_RECAP."VARIETY_TYPE",
LOT_RECAP."CROP", LOT_RECAP."STORAGE_ONLY"
FROM
"SYSDBA"."LOT_RECAP" LOT_RECAP
WHERE
LOT_RECAP."GROWING_YEAR" = 2009 AND
LOT_RECAP."COMMODITY_ID" = 'RICE' AND
LOT_RECAP."STORAGE_ONLY" = 'FALSE'
ORDER BY
LOT_RECAP."LOT_ID" ASC 
```

我需要想办法让报告确定用户 ID 是否是 sysdba，那么表是 sysdba.lot_recap，如果用户 ID 是 sysdba2，那么表名是 sysdba2.lot_recap。顺便说一句，我必须为大约 300 份报告执行此操作。任何帮助将不胜感激。如果我没有提供足够的信息，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T16:21:12.753

好的问题终于解决了。通过进入报告本身，然后进入设置位置。如果我从位置中删除架构名称，Crystal 报告将让我根据我登录的用户名动态分配架构名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:57:22.470

请参阅[ALTER SESSION SET CURRENT SCHEMA](http://docs.oracle.com/cd/B28359_01/server.111/b28310/general009.htm)命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T08:57:43.433

创建一个视图以合并两个表并通过新列“userid”进行选择：

```
create view LOT_RECAP_ALL as
 select 'sysdba' userid, l.* from sysdba.lot_recap l
 union all
 select 'sysdba2' userid, l.* from sysdba2.lot_recap l
; 
```

现在修改您的选择以从 LOT_RECAP_ALL 中选择并添加 LOT_RECAP."USERID" = 'sysdba'（或 sysdba2）：

```
SELECT
LOT_RECAP."GROWING_YEAR", LOT_RECAP."GREEN", LOT_RECAP."ADJUSTED", LOT_RECAP."SHIPPED",
LOT_RECAP."WAREHOUSE_ID", LOT_RECAP."REMAINING", LOT_RECAP."LOT_ID",
LOT_RECAP."FINISH_DRYING", LOT_RECAP."NAME", LOT_RECAP."STATUS",
LOT_RECAP."COMMODITY_ID",
LOT_RECAP."VARIETY_ID", LOT_RECAP."PRODUCER_ID", LOT_RECAP."LR_AVMOISTURE",
LOT_RECAP."PROJECTED", LOT_RECAP."NOTE", LOT_RECAP."MASTER_ID",
LOT_RECAP."VARIETY_TYPE",
LOT_RECAP."CROP", LOT_RECAP."STORAGE_ONLY"
FROM
"LOT_RECAP_ALL" LOT_RECAP
WHERE
LOT_RECAP."GROWING_YEAR" = 2009 AND
LOT_RECAP."COMMODITY_ID" = 'RICE' AND
LOT_RECAP."STORAGE_ONLY" = 'FALSE' AND
LOT_RECAP."USERID" = 'sysdba' -- or sysdba2
ORDER BY
LOT_RECAP."LOT_ID" ASC 
```

根据您的连接用户，您可能需要添加

```
grant select on LOT_RECAP_ALL to sysdba; 
```

或者

```
grant select on LOT_RECAP_ALL to sysdba2; 
```

也许您还需要将 sysdba(2).lot_recap 上的选择授权添加到视图所有者。不能从这里看出这一点，这取决于您的架构的访问权限。

# android - I cannot observe some android states from NetworkInfo.DetailedState either on device or on emulator

> ID：11461766
> 
> 赞同：1
> 
> 时间：2012-07-12T22:38:54.807
> 
> 标签：android, networking

There are couple of possible states in [NetworkInfo](http://developer.android.com/reference/android/net/NetworkInfo.DetailedState.html) class of Android. Currently I log the detailed state information of the device/emulator each 100ms but have never seen the states other than CONNECTED, CONNECTING, DISCONNECTED. I tried from Emulator Control tab of Eclipse switching Voice and Data status to roaming, denied, searching etc. but again couldn't observe the other states in the logs.

Is there a way to put the device or the emulator to other states such as AUTHENTICATING, SCANNING, SUSPENDED etc. Any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T19:52:46.177

也许您应该使用真实设备进行测试。模拟器可能具有简化的功能。

# vb.net - 是否可以更新列表（结构）中的元素？

> ID：11461773
> 
> 赞同：5
> 
> 时间：2012-07-12T22:39:41.110
> 
> 标签：vb.net

如果我在没有关于元素数量的预先信息的情况下累积数据，我可以使用数组并根据需要使用 扩大它`Redim Preserve`，但[List](http://msdn.microsoft.com/en-us/library/6sh2ey19%28v=vs.85%29.aspx)通常会更有效。例如：

```
Dim vehicle As New List(Of String)(4)

vehicle.Add("car")
vehicle.Add("bicycle")
vehicle.Add("truck")
vehicle.Add("taxi")
vehicle.Add("motorbike")
vehicle.Add("bus") 
```

尽管我猜测的最大元素数为 4 是错误的，但我可以毫无问题地添加新元素。

我可以这样显示元素：

```
For inx = 0 To vehicle.Count - 1
    Debug.Print("    " & inx & " " & vehicle(inx))
Next 
```

并得到：

```
0 car
1 bicycle
2 truck
3 taxi
4 motorbike
5 bus 
```

我可以根据需要更新元素并重新显示：

```
vehicle(2) = "coach"
vehicle(4) = "cart"

For inx = 0 To vehicle.Count - 1
    Debug.Print("    " & inx & " " & vehicle(inx))
Next 
```

要得到：

```
0 car
1 bicycle
2 coach
3 taxi
4 cart
5 bus 
```

我几乎可以很容易地创建一个结构列表：

```
Structure SpersonDtl
    Dim familyName As String
    Dim givenName As String
    Dim age As Integer
End Structure

Dim personDtl As New List(Of SpersonDtl)(4)
Dim personDtlCrnt As SpersonDtl

personDtlCrnt.familyName = "Smith"
personDtlCrnt.givenName = "John"
personDtlCrnt.age = 20
personDtl.Add(personDtlCrnt)

personDtlCrnt.familyName = "Brown"
personDtlCrnt.givenName = "Clare"
personDtlCrnt.age = 21
personDtl.Add(personDtlCrnt)

personDtlCrnt.familyName = "Wilson"
personDtlCrnt.givenName = "David"
personDtlCrnt.age = 22
personDtl.Add(personDtlCrnt)

personDtlCrnt.familyName = "Fox"
personDtlCrnt.givenName = "Wendy"
personDtlCrnt.age = 23
personDtl.Add(personDtlCrnt) 
```

显示列表的内容：

```
For inx = 0 To personDtl.Count - 1
    Debug.Print("    " & inx & " " & personDtl(inx).givenName & " " & _
                personDtl(inx).familyName & " " & personDtl(inx).age)
Next 
```

给出：

```
0 John Smith 20
1 Clare Brown 21
2 David Wilson 22
3 Wendy Fox 23 
```

如果 personDtl 是一个数组，我可以轻松地更新一个元素。为了纠正温蒂的年龄，我会写：

```
personDtl(3).age = 24 
```

但是，带有列表的同一语句会导致下面出现蓝线`personDtl(3).age`和错误消息：“*表达式是一个值，因此不能成为赋值的目标。* ”

我找到的最佳解决方案是：

```
Dim personDtlCrnt As SpersonDtl

personDtlCrnt = personDtl(3)
personDtlCrnt.age = 24
personDtl(3) = personDtlCrnt 'Write back. 
```

在我的应用程序中，我将信息累积到大型复杂结构中。要从列表中复制一个元素，添加一个新的信息项然后将其复制回来不是一个有效的过程。

对于替代方法的任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T22:47:59.310

尝试使用类而不是结构。

从[类和结构之间进行选择](http://msdn.microsoft.com/en-us/library/ms229017.aspx)

> 如果类型的实例很小且通常短暂存在或通常嵌入在其他对象中，请考虑定义结构而不是类。
> 
> **除非类型具有以下所有特征，否则**不要定义结构：****
> 
>  ***   它在逻辑上表示单个值，类似于原始类型（整数、双精度等）。
>     
>     
> *   它的实例大小小于 16 字节。
>     
>     
> *   它是不可变的。
>     
>     
> *   它不必经常装箱。
>     
>     
> 
> 如果不满足这些条件中的一个或多个，请创建引用类型而不是结构。不遵守本指南可能会对性能产生负面影响。**

 **您希望您的 SpersonDtl“结构”通过更改其中一个值来可变，这破坏了上面列出的那些特征之一。**

# javascript - 适用于 Android 的 PhoneGap 相机 API - 未捕获的异常

> ID：11461774
> 
> 赞同：9
> 
> 时间：2012-07-12T22:39:54.273
> 
> 标签：javascript, android, cordova, android-camera, phonegap-plugins

我正在尝试使用 Android 中的 Phone gap 运行 Camera API，并且遇到了各种问题。

我刚刚复制了 phonegap 相机示例。

我收到以下错误

```
07-12 18:18:00.706: E/Web Console(17837): Uncaught TypeError: Cannot read property 'SAVEDPHOTOALBUM' of undefined at file:///android_asset/www/index.html:98

07-12 18:17:59.456: E/Web Console(17837): Uncaught ReferenceError: Camera is not defined at file:///android_asset/www/index.html:67 
```

我尝试了所有其他目的地类型。它很有效

```
destinationType: destinationType.FILE_URI
destinationType: Camera.DestinationType.FILE_URI
destinationType: destinationType.DATA_URL 
```

我还添加了相机权限和硬件相机权限。但还是失败了

以下是

```
<!DOCTYPE html>
<html>
<head>
<title>Capture Photo</title>

<script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script>
<script type="text/javascript" charset="utf-8">

var pictureSource;   // picture source
var destinationType; // sets the format of returned value 

// Wait for PhoneGap to connect with the device
//
document.addEventListener("deviceready",onDeviceReady,false);

// PhoneGap is ready to be used!
//
function onDeviceReady() {
    pictureSource=navigator.camera.PictureSourceType;
    destinationType=navigator.camera.DestinationType;
}

// Called when a photo is successfully retrieved
//
function onPhotoDataSuccess(imageData) {
  // Uncomment to view the base64 encoded image data
  // console.log(imageData);

  // Get image handle
  //
  var smallImage = document.getElementById('smallImage');

  // Unhide image elements
  //
  smallImage.style.display = 'block';

  // Show the captured photo
  // The inline CSS rules are used to resize the image
  //
  smallImage.src = "data:image/jpeg;base64," + imageData;
}

// Called when a photo is successfully retrieved
//
function onPhotoURISuccess(imageURI) {
  // Uncomment to view the image file URI 
  // console.log(imageURI);

  // Get image handle
  //
  var largeImage = document.getElementById('largeImage');

  // Unhide image elements
  //
  largeImage.style.display = 'block';

  // Show the captured photo
  // The inline CSS rules are used to resize the image
  //
  largeImage.src = imageURI;
}

// A button will call this function
//
function capturePhoto() {
  // Take picture using device camera and retrieve image as base64-encoded string
  navigator.camera.getPicture(onPhotoDataSuccess, onFail, {destinationType: Camera.DestinationType.FILE_URI, quality: 50 });
}

// A button will call this function
//
function capturePhotoEdit() {
  // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
  navigator.camera.getPicture(onPhotoDataSuccess, onFail, { destinationType: Camera.DestinationType.FILE_URI,quality: 20, allowEdit: true }); 
}

// A button will call this function
//
function getPhoto(source) {
  // Retrieve image file location from specified source
  navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
    destinationType: Camera.DestinationType.FILE_URI,
    sourceType: source });
}

// Called if something bad happens.
// 
function onFail(message) {
  alert('Failed because: ' + message);
}

</script>
</head>
<body>
<button onclick="capturePhoto();">Capture Photo</button> <br>
<button onclick="capturePhotoEdit();">Capture Editable Photo</button> <br>
<button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button><br>
<button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button><br>
<img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
<img style="display:none;" id="largeImage" src="" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:55:37.330

确保在 HTML中包含正确的（最新的）**cordova文件。**

我有同样的问题，我包括

```
cordova-1.8.0.js 
```

而不是

```
cordova-2.4.0.js 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T20:15:08.860

您可以尝试使用 phonegap 拍摄照片

```
<script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
<script type="text/javascript" charset="utf-8">

var pictureSource;   // picture source
var destinationType; // sets the format of returned value 

// Wait for Cordova to connect with the device
//
document.addEventListener("deviceready",onDeviceReady,false);

// Cordova is ready to be used!
//
function onDeviceReady() {
    pictureSource=navigator.camera.PictureSourceType;
    destinationType=navigator.camera.DestinationType;
}

// Called when a photo is successfully retrieved
//
function onPhotoDataSuccess(imageData) {
    // Uncomment to view the base64 encoded image data
    //alert(imageData);  

    // Get image handle
    //
    var smallImage = document.getElementById('smallImage');
    // Unhide image elements
    //
    smallImage.style.display = 'block';

    // Show the captured photo
    // The inline CSS rules are used to resize the image
    //
    smallImage.src = "data:image/jpeg;base64," + imageData;
}

// Called when a photo is successfully retrieved
//
function onPhotoURISuccess(imageURI) {
    alert("inside large image")
    // Uncomment to view the image file URI 
    // console.log(imageURI);

   // Get image handle
   //
    var largeImage = document.getElementById('largeImage');

  // Unhide image elements
  //
    largeImage.style.display = 'block';

  // Show the captured photo
  // The inline CSS rules are used to resize the image
  //
    largeImage.src = imageURI;
}

// A button will call this function
//
function capturePhoto() {
  // Take picture using device camera and retrieve image as base64-encoded string
    navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
    destinationType: destinationType.DATA_URL });
}

// A button will call this function
//
function capturePhotoEdit() {
  // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
    navigator.camera.getPicture(onPhotoDataSuccess, onFail,
    { quality: 20, allowEdit: true,
    destinationType: destinationType.DATA_URL });
}

// A button will call this function
//
function getPhoto(source) {
  // Retrieve image file location from specified source
    navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
    destinationType: destinationType.FILE_URI,
    sourceType: source });
}

// Called if something bad happens.
// 
function onFail(message) {
    alert('Failed because: ' + message);
}

</script>
</head>
<body>
<button onclick="capturePhoto();">Capture Photo</button> <br>
<button onclick="capturePhotoEdit();">Capture Editable Photo</button> <br>
<button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button><br>
<button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button><br>
<img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
<img style="display:none;" id="largeImage" src="" />
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-06T04:03:18.677

我遇到了同样的问题，我通过三个步骤解决了它

### javascript包括

我只使用了 cordova.js 并删除了所有 phonegap.js

```
 <script type="text/javascript" charset="utf-8" src="cordova.js"></script> 
```

### 安装插件

您必须使用命令行安装相机插件；只有xml不起作用

```
cordova plugin add org.apache.cordova.camera 
```

### 使用正确的 android-package

在您的 xml 中，您可能使用`org.apache.cordova.CameraLauncher`它是错误的，并且会给您 NullPointer 异常。可以像这样包含正确的包

```
<feature name="Camera">
    <param name="ios-package" value="CDVCamera" />
    <param name="android-package" value="org.apache.cordova.camera.CameraLauncher" />
</feature> 
```

试试看！谢谢 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-28T14:19:25.930

我有同样的问题。

您正在使用`pictureSource.PHOTOLIBRARY`和`pictureSource.SAVEDPHOTOALBUM`直接在代码中。

问题是 html 在 javascript 之前加载，然后您尝试访问`pictureSource`. 但还没有具体说明。

当应用程序完全加载时，您必须使用它（例如，在documents.ready中使用jQuery事件或在javascript中使用一些替代方法）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T10:34:17.793

2.0.0.js 这可能会解决你的问题

你的代码是正确的，只检查这些cordova-2.0.0.js 文件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-25T07:57:52.460

只需添加
`<script src="phonegap.js"></script>`
我的 html 就为我解决了！
而且我也有`<script src="cordova.js"></script>`，所以删除它并只保留
`<script src="phonegap.js"></script>`。

# r - R聚合数据框的列

> ID：11461776
> 
> 赞同：2
> 
> 时间：2012-07-12T22:40:04.203
> 
> 标签：r, dataframe, aggregate, apply

好的，申请是我的克星，但我很确定它与这里的答案有关。

我有三个级别的贫困数据，州（name_1）、县（name_2）和乡镇（name_3）。我需要做一个简单的降级，我假设平均州收入（收入 = e2004MeanY）等于 1）每个县的收入和 2）每个乡镇的收入。

```
> head(da)
                     name_1  name_2            name_3      e2004MeanY  acc_500k
0                Vung Dong Bac Lao Cai         Xi Mai Ca        637 539.67810
1                Vung Dong Bac Bac Kan  Bac Kan Township       2199 378.90057
2                Vung Dong Bac Bac Kan             Ba Be       1075 549.34222
3 Vung Dong Bang Song Cuu Long Long An          Can Duoc       2284  74.61940
4 Vung Dong Bang Song Cuu Long Long An         Can Giuoc       2256  96.18077
5 Vung Dong Bang Song Cuu Long Can Tho Vi Thanh Township       2136 262.74435 
```

我已经汇总了数据，所以我对每个州都有办法：

```
> vnm1 <- aggregate(da[,-c(1:3)], da[,1, drop=F], mean, na.rm=TRUE)
> head(vnm1)
                        name_1 e2004MeanY acc_500k        alt     cost cropland
1            Vung Bac trung Bo   1680.296 497.8453 162.023675 375.4979 98.78586
2                Vung Dong Bac   1574.306 355.9818 327.662351 423.0005 98.66135
3 Vung Dong Bang Song Cuu Long   2031.346 269.4059   4.733111 186.6358 98.41601
4     Vung Dong bang song Hong   2416.989 118.4019  11.128992 150.1016 98.40423
5             Vung Dong Nam Bo   3350.440 205.7134 171.782189 233.0148 99.15330
6  Vung Duyen Hai Nam Trung Bo   1855.655 793.1942 235.375168 427.0307 97.12402 
```

我有数据帧 vnm2 和 vnm3，它们的聚合方式与 vnm1 相同，但分别按 name_2 和 name_3：

```
vnm2 <- aggregate(da[,-c(1:3)], da[,2, drop=F], mean, na.rm=TRUE)
vnm3 <- na.omit(da[,-c(1:2)]) 
```

如何将 vnm1$e2004MeanY 值输入 vnm2 和 vnm3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:05:00.057

我认为这段代码可以工作（即使它没有优化）：

```
f2 <- function(i) {vnm1[which(vnm1[,1] ==da[min(which( da[,2] == vnm2[i,1])),1]),2]}
data.frame(cbind(vnm2,e2004MeanY=sapply(FUN=f2,1:length(vnm2[,1]))))

f3 <- function(i) {vnm1[which(vnm1[,1] ==da[min(which( da[,3] == vnm3[i,1])),1]),2]}
data.frame(cbind(vnm2,e2004MeanY=sapply(FUN=f3,1:length(vnm3[,1])))) 
```

PS：已经用一个简单的例子进行了测试。

# cinema-4d - 在 Cinema 4D 中创建纯白色背景

> ID：11461778
> 
> 赞同：1
> 
> 时间：2012-07-12T22:40:19.960
> 
> 标签：cinema-4d

我正在寻找在 Cinema 4D 中创建纯白色背景，目前当我将其渲染到黑色背景上时，我基本上想要相同但使用白色。我希望没有阴影，反射等......只是一个纯白色的背景。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:51:45.567

您可以将“背景”对象添加到场景并指定材质。您可以通过菜单（对象->场景->背景）获得它。

# asp.net-mvc - 使用 ASP.NET MVC 和 MVVM 的页面初始化模式，例如 knockoutjs

> ID：11461779
> 
> 赞同：2
> 
> 时间：2012-07-12T22:40:21.737
> 
> 标签：asp.net-mvc, design-patterns, mvvm, initialization, knockout.js

在创建交互式表单或其他类型的网页时，knockoutjs 有几个选项。可以创建一个强类型视图并将模型从控制器传递给它。另一方面，可以很容易地从一个普通的旧 html 文档开始，并在初始加载*后通过调用操作方法（JsonResult 或其他方式）使其自身初始化。*

此外，当将页面作为 MVC 视图启动时，您可以使用 HtmlHelpers 以及普通的旧 html 标记来初始化视图。另一种选择是将模型状态作为 json 序列化为隐藏字段，并使用它来初始化视图。

根据我的经验，在第一次加载期间，当您让 ko 初始化视图时可能会有延迟。无论您是通过从序列化的隐藏字段传递 json 来构造视图模型，还是依靠它来调用各种服务来加载数据，页面“准备就绪”之前都有一段时间。这些延迟可以通过使用 HtmlHelpers 等初始化页面来避免，但这种初始化也会产生额外的成本（控制器中的额外初始化逻辑、视图中的默认内容等）。

哪种初始化页面的方式最 MVVM？在视图中使用 HtmlHelpers 或根本使用 cshtml 是一个坏主意吗？如果没有，你在哪里画出视图和视图模型之间的界限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:56:37.973

“最 MVVM”是一个很难回答的问题，尤其是考虑到我们已经将模式与 MVC 和 Knockout 混合在一起。

我认为让 Knockout 完成所有初始化工作将是“最 MVVM”，但是当您遇到问题时严格遵守模式并不是一个好主意。如果在 DOM 准备好之后 KO 设置值会导致问题，您可以通过让`HtmlHelpers`页面初始化来解决这些问题，然后**执行可行**的方法。既然`HtmlHelpers`会让你`data-bind`同时设置属性，这感觉是个不错的解决方案，我之前也做过，效果很好。

我会说将 JSON 存储在隐藏字段中并不是一个好主意。您可以在 javascript 中使用它直接将模型编码为 JSON：

```
var initialData = @Html.Raw(Json.Encode(Model)); 
```

这是一个很好的解决方案，因为页面从控制器发送的数据开始，不需要第二次请求。

您可能必须考虑要做出哪些权衡。如果你想要纯度和没有代码重复，你可能不得不接受 KO 需要一些时间来初始化页面的问题。如果你想要一个完美的用户体验，你可能不得不牺牲一点纯度。

# php - 遇到模式和数字时自动创建链接 - PHP 还是 SED？

> ID：11461780
> 
> 赞同：0
> 
> 时间：2012-07-12T22:40:22.767
> 
> 标签：php, url, hyperlink, sed, pattern-matching

我有很多网页的内容如下所示：

> 历史。1，通道。71-135；s。19，第。73-331；s。1，通道。74-384；s。1，通道。76-31；s。1，通道。79-408；s。1，通道。80-343；s。2，通道。82-155；s。1，通道。82-403；s。2，通道。83-187；s。1，通道。83-228；s。1，通道。84-359；s。24 章。85-167；s。2，通道。85-337；s。1，通道。86-296；s。2，通道。88-5; s。5，通道。88-82; s。8，通道。88-196；s。8，通道。88-324；s。60 章。88-381；s。7，通道。89-3；ss。1、18 章。91-255；s。32，第。92-78; ss。1、11 章。93-124；s。3，通道。93-246；s。1，通道。94-324；s。895 章。95-148；s。1，通道。95-186；s。4，通道。95-333；s。12，第。95-408；s。3，通道。96-330；s。2，通道。96-413；s。48 章。97-100；s。97，第。97-264；s。25，第。97-271；ss。6、13 章。98-324；s。5，通道。99-234；s。139，第。99-248；s。4，通道。2000-313；s。10 章。2000-320; s。2，通道。2002-78；s。1，通道。2002-263；s。1，通道。2004-379；s。1，通道。2005-119；s。3，通道。2007-211；s。29 章。2008-111；s。5，通道。2008-176; s。5，通道。2009-138；s。10 章。2009-206；s。5，通道。2010-223。

我想在文本中自动创建链接，使用 PHP 脚本或 sed 重写到多个页面。我对其中任何一个都不是很熟练，我什至不知道如何开始。

每次遇到“ch. XXXX-YYY”或“ch. XXXX-YY”时，我希望它在该文本上创建一个看起来像[http://www.foo.com/XXXX/YYY](http://www.foo.com/XXXX/YYY)的链接。我不希望它在只有两位数字时创建链接（即 ch. XX-YYY）。

同样，我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:05:34.833

这可能对您有用（GNU sed）：

```
sed '/ch\. \([0-9]\{4\}\)-\([0-9]\{2,3\}\);/!d;s//\nhttp:\/\/www.foo.com\/\1\/\2\n/;s/[^\n]*\n//;P;D' file
http://www.foo.com/2000/313
http://www.foo.com/2000/320
http://www.foo.com/2002/78
http://www.foo.com/2002/263
http://www.foo.com/2004/379
http://www.foo.com/2005/119
http://www.foo.com/2007/211
http://www.foo.com/2008/111
http://www.foo.com/2008/176
http://www.foo.com/2009/138
http://www.foo.com/2009/206
http://www.foo.com/2010/223 
```

# php - 将 key=>value 对添加到具有条件的现有数组中

> ID：11461781
> 
> 赞同：7
> 
> 时间：2012-07-12T22:40:31.433
> 
> 标签：php, arrays, associative-array

我试图将 key=>value 添加到具有特定值的现有数组中。

我基本上循环通过一个关联数组，我想为具有特定 id 的每个数组添加一个 key=>value：

前任：

```
[0] => Array
    (
        [id] => 1
        [blah] => value2

    )

[1] => Array
    (
        [id] => 1
        [blah] => value2
    ) 
```

我想这样做

```
foreach ($array as $arr) {

     while $arr['id']==$some_id {

            $array['new_key'] .=$some value
            then do a array_push
      }    
} 
```

所以 $some_value 将与特定的 id 相关联。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T22:46:14.730

while 循环没有意义，因为键在关联数组中是唯一的。另外，您确定要在循环时修改数组吗？这可能会导致问题。试试这个：

```
$tmp = new array();
foreach ($array as $arr) {

     if($array['id']==$some_id) {
            $tmp['new_key'] = $some_value;
      }    
}

array_merge($array,$tmp); 
```

一种更有效的方法是：

```
if(in_array($some_id,$array){
  $array['new_key'] = $some_value;
} 
```

或者如果它是您要匹配的数组中的键而不是值...

```
if(array_key_exists($some_id,$array){
      $array['new_key'] = $some_value;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-24T20:59:52.600

当您使用：

```
foreach($array as $arr){
    ...
} 
```

... $arr 变量是一个本地副本，仅适用于该 foreach。您添加到其中的任何内容都不会影响 $array 变量。但是，如果您通过引用调用 $arr：

```
foreach($array as &$arr){ // notice the &
    ...
} 
```

...现在，如果您向该数组添加一个新键，它将影响您正在循环的 $array 。

我希望我正确理解了你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T22:46:01.530

如果我理解正确，这将是解决方案：

```
foreach ($array as $arr) {
  if ($arr['id'] == $some_id) {
     $arr[] = $some value;
     // or: $arr['key'] but when 'key' already exists it will be overwritten
  }
} 
```

# c# - C#中结构构造的基类

> ID：11461789
> 
> 赞同：7
> 
> 时间：2012-07-12T22:41:41.217
> 
> 标签：c#, c#-4.0

[http://msdn.microsoft.com/en-us/library/ah19swz4(v=VS.71).aspx](http://msdn.microsoft.com/en-us/library/ah19swz4(v=VS.71).aspx)

根据上面的链接……..“然而，结构是从基类 Object 继承的……”</p>

根据下面的链接 [http://msdn.microsoft.com/en-us/library/system.valuetype.aspx](http://msdn.microsoft.com/en-us/library/system.valuetype.aspx) 结构是在层次结构中的 ValueType 之后实现的。

“结构”是从哪个类派生的？还是编译器将“struct”保留字视为使用“struct”作为值类型进行任何声明？缺少整体理解中的小线程。感谢您的帮助。史密斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T22:45:04.973

层次结构（跳过任何类子类型）是：

1.  `struct .. -> ValueType -> Object`

2.  `class .. -> Object`

演示：

```
struct S {}
class C {}

// or see `is` as per Jeff Mercado's comment
typeof(ValueType).IsAssignableFrom(typeof(S)); // True
typeof(object).IsAssignableFrom(typeof(S));    // True

typeof(ValueType).IsAssignableFrom(typeof(C)); // False
typeof(object).IsAssignableFrom(typeof(C));    // True 
```

# mysql - 将固定宽度、空格分隔的 .txt 文件加载到 mySQL

> ID：11461790
> 
> 赞同：7
> 
> 时间：2012-07-12T22:41:42.777
> 
> 标签：mysql, file-io, load, local

我有一个 .txt 文件，其中包含一堆格式化数据，如下所示：

```
...
   1     75175.18     95128.46
   1    790890.89    795829.16
   1    875975.98    880914.25
   8   2137704.37   2162195.53
   8   2167267.27   2375275.28
  10   2375408.74   2763997.33
  14   2764264.26   2804437.77
  15   2804504.50   2881981.98
  16   2882048.72   2887921.25
  16   2993093.09   2998031.36
  19   3004104.10   3008041.37
... 
```

我试图将每一行作为一个条目加载到我的数据库中的一个表中，其中每一列都是一个不同的字段。我无法让 mySQL 正确分离所有数据。我认为问题在于并非所有数字都以等距的空白量分隔。

到目前为止，这是我尝试过的两个查询（我还尝试了这些查询的几种变体）：

```
LOAD DATA LOCAL INFILE 
'/some/Path/segmentation.txt' 
INTO TABLE clip (slideNum, startTime, endTime) 
SET presID = 1;

LOAD DATA LOCAL INFILE 
'/some/Path/segmentation.txt' 
INTO TABLE clip 
FIELDS TERMINATED BY ' ' 
LINES TERMINATED BY '\n'
(slideNum, startTime, endTime) 
SET presID = 1; 
```

任何想法如何让它发挥作用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T22:53:29.600

这些就是我们所说的“固定宽度”记录，而 LOAD DATA 不能很好地配合它们。选项：

1.  首先清理 Excel 中的数据，或
2.  将数据加载到只有 1 列的临时表中，将整个文本行推入该列。然后您可以使用`SUBSTR()`and`TRIM()`将您需要的列切出到最终表格中。
3.  或者使用用户变量 (@row)，您可以在 LOAD DATA 语句中完成所有操作。

```
LOAD DATA LOCAL INFILE 
'/some/Path/segmentation.txt' 
INTO TABLE clip
(@row)
SET slideNum = TRIM(SUBSTR(@row,1,4)),
    startTime = TRIM(SUBSTR(@row,5,13)),
    endTime = TRIM(SUBSTR(@row,18,13))
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T16:28:20.097

```
 LOAD DATA
CHARACTERSET AL32UTF8
INFILE 'DCF Master 14APR2013 VSPCFM_reduced size.txt'
INTO TABLE EMPLOYEE3
(
a = TRIM(SUBSTR(@row,1,11)),
b = TRIM(SUBSTR(@row,33,38)),
c = TRIM(SUBSTR(@row,70,86))
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-17T01:21:18.770

1.  如果你在 unix/linux 上，那么你可以通过 sed 去掉空格。解决方案在 [这里](https://stackoverflow.com/a/156550/13068500)

2.  您可以以编程方式将空格替换为不同的分隔符。我决定使用**PHP**，你也可以安全地用**Python来做**

    ```
    <?php
    $mysqli  =  new mysqli(
    "***",
    "***",
    "***",
    "***",
    3306
    );
    mysqli_options($mysqli, MYSQLI_OPT_LOCAL_INFILE, true);

    if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }

    function createTempFileWithDelimiter($filename, $path){
        $content = file_get_contents($filename);
        $replaceContent = preg_replace('/\ +/', ',', $content); // NOT \s+

        $onlyFileName = explode('\\',$filename);

        $newFileName = $path.end($onlyFileName);
        file_put_contents($newFileName, $replaceContent);

        return $newFileName;
    }

    $pathTemp = 'C:\\TempDir\\';

    $pathToFile = 'C:\\some\\Path\\segmentation.txt';

    $file = createFileWithDelimiter($pathToFile, $pathTemp);
    $file = str_replace(DIRECTORY_SEPARATOR, '/', $file);

    $sql = "LOAD DATA LOCAL INFILE '".$file."' INTO TABLE `clip` 
        COLUMNS TERMINATED BY ','
        LINES TERMINATED BY '\n'  // or '\r\n'
        (slideNum, startTime, endTime)
        SET presID = 1;";

    if (!($stmt = $mysqli->query($sql))) {
        echo "\nQuery execute failed: ERRNO: (" . $mysqli->errno . ") " . $mysqli->error;
    };

    unlink($file);
    ?> 
    ```

不要在**preg_replace**中使用 '/\s+/'因为 \s 匹配任何空白字符（相当于 [\r\n\t\f\v ]）并且格式会改变，列和换行符会消失。

# perl - 如何使用 tie() 重定向 STDOUT、STDERR 仅针对某些包？

> ID：11461794
> 
> 赞同：2
> 
> 时间：2012-07-12T22:41:58.143
> 
> 标签：perl, filehandle, tie

我需要使用一些不幸地将诊断消息记录到 STDOUT 和 STDERR 的库。通过使用`tie`，我可以将这些写入重定向到捕获这些写入的函数。由于我不希望通过绑定句柄捕获我的程序的所有 STDOUT 和 STDERR 输出，因此我只想对某些包执行此操作。

我想出了一个解决方案，其中实际行为是通过查看 caller() 来确定的，如下所示，但我觉得必须有更好的方法......有更优雅的解决方案吗？

```
package My::Log::Capture;
use strict;
use warnings;
use 5.010;

sub TIEHANDLE {
    my ($class, $channel, $fh, $packages) = @_;
    bless {
        channel => lc $channel,
        fh => $fh,
        packages => $packages,
    }, $class;
}

sub PRINT {
    my $self = shift;
    my $caller = (caller)[0];
    if ($caller ~~ $self->{packages}) {
        local *STDOUT = *STDOUT;
        local *STDERR = *STDERR;
        given ($self->{channel}) {
            when ('stdout') {
                *STDOUT = $self->{fh};
            }
            when ('stderr') {
                *STDERR = $self->{fh};
            }
        }
        # Capturing/Logging code goes here...
    } else {
        $self->{fh}->print(@_);
    }
}

1;

package main;

use My::Foo;
# [...]
use My::Log::Capture;
open my $stderr, '>&', *STDERR;
tie *STDERR, 'My::Log::Capture', (stderr => $stderr, [qw< My::Foo >]);
# My::Foo's STDERR output will be captured, everyone else's STDERR
# output will just be relayed. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:12:50.943

除了修复库之外，我只能想到一种可能更好的解决方案。

您可以重新打开`STDOUT`并将`STDERR`文件句柄转换为您自己的文件句柄。然后，重新打开`STDOUT`并`STDERR`使用系好把手。

例如，这是你如何做到的`STDOUT`：

```
open my $fh, ">&", \*STDOUT or die "cannot reopen STDOUT: $!";
close STDOUT; 

open STDOUT, ">", "/tmp/test.txt"; 

say $fh "foo"; # goes to real STDOUT
say "bar";     # goes to /tmp/test.txt 
```

您可以阅读[perldoc -f open](http://perldoc.perl.org/functions/open.html)以了解有关 ">&" 等功能的所有血腥细节。

无论如何，您可以用绑定文件句柄的设置替换该打开调用，而不是“/tmp/test.txt”。

您的代码必须始终使用显式文件句柄来编写或使用[select](http://perldoc.perl.org/functions/select.html)来切换文件句柄：

```
select $fh;
say "foo"; # goes to real STDOUT

select STDOUT;
say "bar"; # goes to /tmp/test.txt 
```

# python - 访问字典中列表的索引？

> ID：11461799
> 
> 赞同：0
> 
> 时间：2012-07-12T22:42:14.257
> 
> 标签：python, csv, dictionary

所以这里我有一个'Q9ULI0' id 的数字列表。看起来像这样：

```
['1117', '285', '357', '58', '813', '1398', '566'] 
```

当我打电话时，`print lookup['Q9ULI0']` 我正在尝试访问索引中的所有这些值，以查看该数字是否在我的两个值之间。我尝试使用`.len`and for 循环，但它甚至没有编译。先感谢您。

```
lookup = defaultdict(list)

mydata = open('mydata.txt')

for line in csv.reader(mydata, delimiter='\t'):

    code = re.match('[a-z](\d+)[a-z]', line[-1], re.I)
    if code: 
        lookup[line[-2]].append(code.group(1))

print lookup['Q9ULI0'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:49:34.143

如果您能够打印`lookup['Q9ULI0']`并获取上面的列表，则以下代码应该没有问题，它获取列表的长度并使用`for`：

```
print len(lookup['Q9ULI0'])
for item in lookup['Q9ULI0']:
    print item 
```

# php - 如何解析文档评论

> ID：11461800
> 
> 赞同：0
> 
> 时间：2012-07-12T22:42:23.650
> 
> 标签：php, string, reflection, comments

我正在使用反射从一个方法中获取文档注释： [http](http://www.php.net/manual/en/reflectionclass.getdoccomment.php) ://www.php.net/manual/en/reflectionclass.getdoccomment.php ，它看起来像这样：

```
 /** 
    * Method description
    *
    * @param  array $foo    Bla bla
    * @return string        More bla bla
    */ 
```

如何将此字符串解析为我可以使用的内容？我需要从中提取“方法描述”文本。其他东西对我来说并不重要，因为我可以使用其他反射方法来获取参数等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:49:47.303

```
trim(str_replace(array('/', '*'), '', substr($rc->getDocComment(), 0, strpos($rc->getDocComment(), '@')))); 
```

假设评论总是采用这种格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:02:45.503

我在解析注释方面没有太多经验，但是，将其视为字符串，我要做的是：

1.  按新线展开：
2.  修剪空格和 * out

像这样的东西：

```
<?php

$string = "   /** 
    * Method description
    *
    * @param  array $foo    Bla bla
    * @return string        More bla bla
    */";

$parts = explode("\n",$string);
$comment = trim($parts[1]," *");
echo $comment; // will echo "Method description" 
```

但是，可能并不理想，因为描述可能不止一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-12T20:28:56.227

```
public function parseAnnotations($doc){

    preg_match_all('/@([a-z]+?)\s+(.*?)\n/i', $doc, $annotations);

    if(!isset($annotations[1]) OR count($annotations[1]) == 0){
        return [];
    }

    return array_combine(array_map("trim",$annotations[1]), array_map("trim",$annotations[2]));
} 
```

...

```
$reflection = new ReflectionObject($class);
foreach($reflection->getProperties() as $property){
   print_r($this->parseAnnotations($property->getDocComment()));
} 
```

例子

```
/** 
* @param $action
* @required FALSE
*/
private $action; 
```

结果

```
Array
(
  [param] => $action
  [required] => FALSE
) 
```

# mysql - 如何使用 maven 将数据源部署到 jboss6

> ID：11461811
> 
> 赞同：1
> 
> 时间：2012-07-12T22:43:33.023
> 
> 标签：mysql, maven, jboss, datasource, ear

是否有推荐的方法来使用 maven 部署 mysql 数据源和相应**的 mysql-connector-java.5.1.21.jar**？现在我们有一个安装 mysql-ds.xml、连接器 j 驱动程序、一个 ejb.jar 和一个 war 文件的 ear 部署。它可以工作，但在我的 JBoss 6 服务器启动期间我也得到了这个[堆栈跟踪。](http://pastebin.ca/2170230)如果我们将 mysql jar 放入 server\default\lib 目录，我们不会遇到这个问题，但我们希望数据源和驱动程序 jar 可以成为我们 ear deploy 的一部分。

# asp.net - ASP.NET 站点自定义 404 错误被服务器错误阻止

> ID：11461812
> 
> 赞同：2
> 
> 时间：2012-07-12T22:43:50.903
> 
> 标签：asp.net, asp.net-mvc-3, iis, error-handling, http-status-code-404

我有一个 MVC3 网站，我正在尝试让 404 错误页面正确显示。我已经设置好了

*   不重定向 URL，
*   在标头中返回实际的 404 错误状态，
*   记录 URL，
*   是我创建的自定义页面，
*   并且是实际的操作/控制器页面，而不是 .aspx/.html 页面。

在 Visual Studio 中调试，效果很好。当我将它发布到我的测试或生产环境时，它不起作用并返回一个在标题中找不到 404 状态的通用文件。

错误页面不是默认的 404 错误（ [this](http://ruslany.net/wp-content/uploads/2008/12/custom404.png)或 [this](http://www.sitefinity.com/ClientsFiles/110860_errorpage.jpg)），但似乎是服务器本身的全局自定义（服务器托管多个站点，所有 404 显示相同的简单行页面）。服务器上的错误页面实际上显示了一个 500 错误页面。另外，我设置了 Response.TrySkipIisCustomErrors = true 来尝试绕过它，但这不起作用。

在生产和测试服务器上，它被正确记录，如果我没有返回 404 状态代码，它会显示我的错误页面。因此，我很确定动作/视图正在工作，但它在某种程度上与服务器有关。它运行 ASP.NET 4 和 IIS 7。

关于什么/在哪里调查以解决此问题的任何建议？

.

**到目前为止，我的解决方案基于**
[如何在 ASP.NET MVC 中正确处理 404？](https://stackoverflow.com/questions/619895/how-can-i-properly-handle-404-in-asp-net-mvc/620559#620559)

这是我通过在 Application_Error 中捕获异常所做的工作的基础；我仍然对此有点警惕，因为它很容易导致循环，所以我尝试/捕获了一切以防止这种情况（错误发生在捕获另一个错误中）

global.asax 中的代码

```
 protected void Application_Error(object sender, EventArgs e)
    {
            try
        {
            Exception exception = Server.GetLastError();

            Response.Clear();

            HttpException httpException = exception as HttpException;

            RouteData routeData = new RouteData();
            routeData.Values.Add("controller", "Error");

            if (httpException == null)
            {
                routeData.Values.Add("action", "NotFound");
            }
            else
            {
                switch (httpException.GetHttpCode())
                {
                    case 404:
                        // Page not found.
                        routeData.Values.Add("action", "NotFound");
                        break;
                    case 500:
                        // Server error.
                        routeData.Values.Add("action", "ServerError");
                        break;

                    default:
                        routeData.Values.Add("action", "General");
                        break;
                }
            }

            routeData.Values.Add("error", exception);

            Server.ClearError();

            Response.TrySkipIisCustomErrors = true;

            IController errorController = new ErrorController();
            errorController.Execute(new RequestContext(
                 new HttpContextWrapper(Context), routeData));
        }
        catch
        {
            //
        }
    } 
```

错误控制器中的代码

```
 public ActionResult NotFound()
    {
        try
        {

            Response.StatusCode = (int)HttpStatusCode.NotFound;
            Response.TrySkipIisCustomErrors = true;
        }
        catch
        {}
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:45:33.287

您是否指定了`TrySkipIisCustomErrors`as `true`？[在这里](http://briancaos.wordpress.com/tag/tryskipiiscustomerrors/)检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:17:17.493

我遇到过同样的问题。应修改 web.config 文件。

```
 <system.webServer>    
     <httpErrors errorMode="Custom" existingResponse="Replace">
        <remove statusCode="404" />
        <error statusCode="404" responseMode="ExecuteURL" path="/Errors/404" />
     </httpErrors>  
  </system.webServer> 
```

将 */Errors/404*替换为自定义错误页面的路径。

# java - 我的 Java 变得有点复杂

> ID：11461819
> 
> 赞同：2
> 
> 时间：2012-07-12T22:44:46.897
> 
> 标签：java

```
public interface Interface1<E extends Interface1<E,F>,F extends Interface2<E,F>>{
    public Q<E,F> do();
}

public interface Interface1<E extends Interface1<E,F>,F extends Interface2<E,F>>{
    public doTo(Q<E,F> arg);
} 
```

这可以吗，因为我在同一个接口的通用部分中使用接口名称，比如 E 扩展 Interface1... 在 Interface1 中被调用。

这个可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:55:29.253

是的，这样做“没问题”，但您可能应该完成 Interface1 和 Interface2 的泛型类型

```
public class Q<E extends Interface1<E, F>, F extends Interface2<E, F>>{
    E interface1;
    F interface2;
} 
```

# javascript - 创建静态（Like）变量 - 最佳实践

> ID：11461823
> 
> 赞同：0
> 
> 时间：2012-07-12T22:45:13.840
> 
> 标签：javascript

每次我需要一个静态变量时，我最终都会将它作为属性附加到使用它并需要它持久的对象上。

特别是，这里的索引（`MT.MAOrb.startR.index`）我需要是静态的或保持它的值，直到回调再次调用该函数。

使用这种形式是最好的方法吗？

`MT.MAOrb.startR.index`

```
/**
 ** MAOrb
 */

MT.MAOrb =
{
    pre : function() {
        var o_p = {
            model : 'MAOrb'
            };
        return o_p;
    },
    post : function( o_p ) {
        MT.MAOrb.startR( o_p );
    },
    startR: function( o_p ){
        var sky = document.getElementById( 'Ab1' );
        if( MT.MAOrb.startR.index === undefined ) {
            var size = Object.size( o_p );  
            console.log( 'size' + size );
            var index1 = MT.MAOrb.random( 0, size - 1 );
            console.log( 'index1' + index1 );
            MT.MAOrb.startR.index = index1;
            MT.MAOrb.startR.o_p = o_p;
        }else{ 
            MT.MAOrb.startR.index++; 
        }
        var image_element = MT.MAOrb.makeElement( MT.MAOrb.startR.o_p[ MT.MAOrb.startR.index ] );
        sky.appendChild( image_element );
        MT.MAOrb.moveLinear( image_element );
    },// ....more code here
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T22:53:56.990

Javascript 没有静态变量与非静态变量的概念：一切都只是对象的属性。因此，处理静态变量没有正确或错误的方式，只有处理类静态变量的正确或错误方式。

话虽如此，正如您所做的那样，将变量添加为固定（类似模块）对象的属性几乎是您的最佳选择（即最佳实践）。除非您使用的是像 Backbone.js 这样的库，它实际上确实为它的“模型”（即它的类系统）添加了对静态变量的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:54:19.227

如果您尝试模拟公共静态属性，那么这是一种完全可行的方法。

JavaScript 不是经典的面向对象语言。它是典型的。

一个后果是语言中确实没有静态的概念。

你这样做的方式完全没问题，只要你不介意另一个对象可以直接读取和修改属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T23:04:06.050

我会说这实际上是一种相当奇怪的方法。Javascript 提供函数级范围，您可以通过使用立即调用函数表达式 (IIFE) 来利用它：

```
myObject = {
    count: (function () {  // this function is invoked immediately
        var staticCounter = 0;
        return function () { // this is the actual 'count' function
            return ++staticCounter;
        };
    }())
};

myObject.count(); // 1
myObject.count(); // 2 
```

这可以被认为是一种更好的方法的一个原因是它完全隐藏了静态变量。如果您这样做`myObject.count.staticCounter`，其他一些代码*可能*正在读取或写入该变量。显然，您不希望这种情况发生，但如果您这样做，则完全可以保证该变量的范围，这会导致将来更容易调试和重构。

# opencv - openCV安装/库问题

> ID：11461834
> 
> 赞同：0
> 
> 时间：2012-07-12T22:46:07.580
> 
> 标签：opencv

我有一台运行 Windows 7 的戴尔 XPS M1530。我安装了虚拟机并创建了 ubuntu 12.04 安装。[然后我按照这里](http://karytech.blogspot.com/2012/05/opencv-24-on-ubuntu-1204.html)的描述安装了 openCV 。[这似乎与此处](http://linuxconfig.org/introduction-to-computer-vision-with-opencv-on-linux#4-opencv-examples)的说明非常相似，但是当我尝试在第二个链接中描述的测试程序 image-conversion.c 上运行 g++ 时，我得到以下输出：

```
jonathan@jonathan-VirtualBox:~/test$ g++ `pkg-config opencv --cflags --libs` image-conversion.c -o image-conversion
/tmp/ccoPBxUv.o: In function `main':
image-conversion.c:(.text+0x1d): undefined reference to `cvLoadImage'
image-conversion.c:(.text+0x41): undefined reference to `cvSaveImage'
image-conversion.c:(.text+0x4d): undefined reference to `cvReleaseImage'
collect2: ld returned 1 exit status 
```

但是，当我使用第一个链接提供的测试程序时，一切正常。所以我的问题是，我对安装过程或编译过程有什么不了解，这使得示例在第二个链接中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:10:56.647

这些错误似乎是链接错误，我的猜测是 g++ 没有找到该库。您可以尝试将 libopencv.so 的路径添加到 LD_LIBRARY_PATH。还要确保 opencv 的版本与示例匹配。这三个函数是较旧的 c 样式接口。您也可以在命令行中运行“pkg-config opencv --cflags --libs”。这将扩展它并告诉你它在哪里寻找这些东西，然后你可以四处寻找，看看是否匹配。有时你需要#include opencv2/highgui.hpp 或类似的东西。“g++ -v”有时也有帮助。对不起，我不能给你一个直接的答案，祝你好运。

# matlab - Matlab 不定类别轴

> ID：11461838
> 
> 赞同：0
> 
> 时间：2012-07-12T22:46:18.970
> 
> 标签：matlab

我有兴趣制作一个具有类别轴的图（例如`set(gca,'YTickLabel', {'A', 'B', 'C'});`）

但是，我不提前知道类别的数量。事实上，类别是不连续数字的向量，但我仍想将其连续绘制为类别。

例如向量 = [5 7 9 2 6]

其中 Vector 是整数向量，可以是任意大小。

我想制作一个二维矩阵的 image()，其中 Y 轴将这些整数作为每个刻度的标签或类别应用于它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T00:34:04.277

我能够弄清楚，这是一个例子：

```
ydata=[5 7 9 2 6];
Z=rand(size(ydata,2),10); %random numbers where Y dimension is size of ydata
figure
imagesc(Z) %Make the image of Z
set(gca,'YTick',1:1:size(ydata,2)); % Set only ONE tick 
                                    % mark for each value of ydata
set(gca,'YTickLabel', ydata); %Label the tick marks with the values in ydata. 
```

# c# - 图像到数组，尺寸损失？

> ID：11461844
> 
> 赞同：2
> 
> 时间：2012-07-12T22:47:18.117
> 
> 标签：c#, image

我正在尝试将 JPG 图像转换为（双）二维数组。使用：

```
Image image = Image.FromFile("image.jpg"); 
```

我得到一个 500 x 500 的图像（根据 image.Size.Height(Width)）。但是当我尝试将其转换为字节数组时

```
byte[] arr;
using (MemoryStream ms = new MemoryStream())
{
    image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
    arr = ms.ToArray();
} 
```

我得到`arr.GetLength(0)=35640`，它小于 500*500=250000。之后我会将一维数组转换`arr`为二维数组。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:51:27.587

您没有保存像素表示..您正在保存 JPEG 文件的字节。如果您想要实际像素，则需要遍历像素。

另请注意，每个像素至少有 3 个分量：红色、绿色、蓝色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T22:50:33.743

如果以 JPEG 格式保存图像，写入流的像素将被压缩。

如果您想操作图像的像素，您可能应该将图像加载到位图中，然后调用 Bitmap.LockBits 以获取内存中的原始像素。

# java - Android 套接字连接组合发送

> ID：11461845
> 
> 赞同：1
> 
> 时间：2012-07-12T22:47:21.493
> 
> 标签：java, android, sockets, asyncsocket

现在我已经`Socket`与我的桌面服务器建立了连接。一般来说，它工作正常，我正在尝试找到任何剩余的错误。我无法解决的一个问题是当我向“发送”按钮发送垃圾邮件时。有时它会将原本要单独发送的消息组合成一条消息。我相当确定这是一个 Android 问题，而不是我的服务器的问题。这是一个发生的例子（来自服务器的控制台输出）：

```
XX.XX.XX.XX: {"control":[],"commands":[]}
XX.XX.XX.XX: {"control":[],"commands":[]}
XX.XX.XX.XX: {"control":[],"commands":[]}
XX.XX.XX.XX: {"control":[],"commands":[]}{"control":[],"commands":[]} 
```

这导致我的 JSON 解析器无法正常工作。我能够通过蓝牙或 Wifi 连接到我的服务器，并且我注意到合并消息的问题仅在使用 Wifi 而不是 BluetoothSocket 时发生。并不是说我认为 BluetoothSocket 的延迟不足以像这样组合，但是那里运行的流量要少得多。有什么方法可以确保我的数据包在发送时不会被合并？我环顾四周，`Socket`不知道要寻找什么。这是我如何发送的示例，非常基本：

`mmDataOut.write(buffer);`

where `mmDataOut`is just a `DataOutputStream`and `buffer`is a `byte[]`。

另外，我添加了 asyncsocket 标签，因为我的服务器正在使用它们，不确定这是否会影响任何事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T23:14:51.533

听起来您正在使用 TCP。这是 TCP 的预期行为，您需要升级解析器以支持它。

您不能安全地假设来自读取端的一大块数据将仅包含一个命令，此外您也不能假设您将在一次读取中获得整个命令。

# python - Pythonanywhere 安装和导入新模块

> ID：11461846
> 
> 赞同：5
> 
> 时间：2012-07-12T22:47:37.037
> 
> 标签：python, pip, import-module, pythonanywhere

我是 Pythonanywhere 的新手，想安装“soundcloud”Python 模块。我打开了一个 Bash 控制台并给出了`pip install --user soundcloud`命令。

它似乎已经安装，正如我`pip freeze`在 Bash 控制台中使用时在模块列表中看到的那样。但是，当我打开 Python 2.7 控制台并尝试`import soundcloud`时，我收到一条错误消息，指出 Soundcloud 模块不存在。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T23:47:17.783

您已经为 2.6 安装了 soundcloud，但您正尝试在 2.7 中使用它。

从[常见问题解答](https://www.pythonanywhere.com/faq/)：

> 我们为 Python 版本 2.6、2.7 和 3.2 包含了 easy_install 和 pip（默认为 2.6，在末尾添加 -2.7 或 -3.2 以指定其他版本）

# facebook-graph-api - 当您设置“喜欢”的实时订阅时应该发生什么

> ID：11461855
> 
> 赞同：1
> 
> 时间：2012-07-12T22:49:10.237
> 
> 标签：facebook-graph-api, facebook-like, real-time

我希望在我的网站用户“喜欢”某些内容时收到通知。根据[https://developers.facebook.com/docs/reference/api/realtime/](https://developers.facebook.com/docs/reference/api/realtime/)这应该是可能的，事实上我已经能够设置我的应用程序，以便它订阅“喜欢”。

问题是，现在会发生什么？如果我的用户单击“喜欢”按钮，我的应用程序确实会在通常的回调中获得更新。问题在于它是对用户对象的“提要”更新，这只是意味着用户的提要已经以某种方式发生了变化，您可以自行决定如何进行。我想我期待我会得到用户对象的“喜欢”更新，但这不是我得到的。有什么见解吗？

# ios - ios - 如何计算 UIView 动画将占用多少内存？

> ID：11461856
> 
> 赞同：1
> 
> 时间：2012-07-12T22:49:17.250
> 
> 标签：ios, memory, uiview

我是IOS开发的新手。在我的应用程序中，我有几张正在制作动画的图像。图像的数量可能会有所不同。

在 ipad 2 上运行时，动画效果很好。在 ipad 1 上运行时，有大量图像（20+），应用程序只是崩溃并出现内存警告。

我想提前计算动画将占用的内存量。根据这个数字，我可以计算出是完成我的动画还是跳到最终状态。

如何才能做到这一点？

编辑：

我当前的代码：

```
- (void)remix
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:animationDuration];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:
     @selector(animationDidStop:finished:context:)];

    self.currentStatus = canvas_status_animating;
    NSMutableArray *circles = [[NSMutableArray alloc] init];

    for (CircleView* view in self.subviews)
    { 
        if(![view isKindOfClass:[CircleView class]])
            continue;
        [circles addObject:view];
    }

    [self animatePosition:circles];

    [UIView commitAnimations];
}

-(void) animatePosition:(NSArray*)circles
{
    int maxWidth = self.bounds.size.width; 
    int maxHeight = self.bounds.size.height;

    for (CircleView* view in circles)
    {  
        int selectedX = 0;
        int selectedY = 0;
        if ((arc4random()%200)+1 > 100)
        {
            selectedX = (arc4random() % maxWidth) + 1; 
            selectedY = (arc4random() % 200) + 1;
            selectedY = (selectedY > 100) ? (maxHeight - selectedY) : selectedY;
        }
        else 
        {
            selectedX = (arc4random() % 200) + 1; 
            selectedX = (selectedX > 100) ? (maxWidth - selectedX) : selectedX;
            selectedY = (arc4random() % maxHeight) + 1;
        }                                

        view.frame = CGRectMake(selectedX - view.frame.size.width / 2, 
                                selectedY - view.frame.size.height / 2,
                                view.frame.size.width, 
                                view.frame.size.height);

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T00:21:04.913

您可以在前后调用此函数，并计算差异。

```
-(double)availableMemory
{
    vm_statistics_data_t vmStats;
    mach_msg_type_number_t infoCount = HOST_VM_INFO_COUNT;
    kern_return_t kernReturn = host_statistics(mach_host_self(), HOST_VM_INFO, (host_info_t)&vmStats, &infoCount);

    if (kernReturn != KERN_SUCCESS)
    {
        return NSNotFound;
    }

    return ((vm_page_size * vmStats.free_count) / 1024.0) / 1024.0;

} 
```

# sql - 将浮点数 (YYYY) 转换为日期时间

> ID：11461864
> 
> 赞同：2
> 
> 时间：2012-07-12T22:50:05.717
> 
> 标签：sql, sql-server

我对 SQL 比较陌生，所以如果这是一个愚蠢的问题，请原谅我。我已经尝试了太长时间才能让它发挥作用。

我在表 A 中有一个列，它是一个名为 ConstructionYear 的浮点列。它填充了一个简单的 4 位数年份（即 2010、2005、1972 等）。我需要使用这些年份填充表 B 的 YearBuilt 日期时间字段。我已经搜索和搜索并尝试了我在网上找到的各种不同的 convert() 和 cast() 组合，但它不起作用。

我想要发生的是这样的：

> '2008' -> '2008-01-01 00:00:00.000'
> 
> '2005' -> '2005-01-01 00:00:00.000'
> 
> '1986' -> '1986-01-01 00:00:00.000'

而不是当前正在发生的事情（使用`CAST(ConstructionYear AS DATETIME)`）：

> '2008' -> '1905-07-02 00:00:00.000'
> 
> '2010' -> '1905-07-04 00:00:00.000'
> 
> '1984' -> '1905-06-08 00:00:00.000'

编辑：解决方案：`cast(convert(varchar,@ConstructionYear) AS DATETIME)`

所以我的问题有两个主要原因（除了我是 sql 新手）。

1.  我不知道 SQL Server 用于日期时间的 1900 纪元。由于我看到的所有 1905 年的日期时间，我可以看出正在发生一些事情，但我不知道它占用了我的 2005 年并将其计算为从 1900 年开始的日子。

2.  1753 年。为什么 1753 年是我们可以使用的最早年份？在我在这里发布我的问题之前，我可能有正确的语法，但它没有运行，因为我的数据早于 1753 年。我认为错误与我的代码有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T22:57:19.337

检查这个例子：

```
DECLARE @ConstructionYearas FLOAT
SET @ConstructionYear = 2012
SELECT FloatToDatetime = CAST(convert(varchar(4),@ConstructionYear) as datetime) 
```

它将输出：

`2012-01-01 00:00:00.000`

* * *

基本上使用：

`CAST(convert(varchar(4),@ConstructionYear) as datetime)`

`@ConstructionYear`你的`Float`变量在哪里

希望能帮助到你！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T22:57:55.653

除了[@Ghost 的](https://stackoverflow.com/a/11461898/128165)回答，如果您使用的是 SQL SERVER 2012

您可以使用

```
DATEFROMPARTS(ConstructionYear, 1, 1) 
```

参考：http: [//msdn.microsoft.com/en-us/library/hh213228.aspx](http://msdn.microsoft.com/en-us/library/hh213228.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T22:54:01.090

这应该可行，但可能有更好的方法

```
CAST(CAST(ConstructionYear  as nvarchar(4)) + '-01-01' as datetime) 
```

您的查询正在做的是获取您提供的天数并将其添加到 SQL 服务器时代，1900 年 1 月 1 日，这给出了您看到的结果

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T23:05:16.823

```
DECLARE @y FLOAT;
SELECT @y = 2012;
SELECT DATEADD(YEAR, @y-1900, 0); 
```

为什么你认为数值 2012 直接转换为年数？事实上，在 SQL Server 中，数值转换为自 1900-01-01 以来的天数。所以以下应该产生相同的结果：

```
SELECT CONVERT(DATETIME, 2012);
SELECT DATEADD(DAY, 2012, '19000101'); 
```

正如其他人所建议的那样，我强烈建议您正确存储此数据。虽然您可以使用更安全的东西，例如`SMALLINT`，为什么不使用`DATE`呢？这带有内置验证，能够直接使用各种日期/时间功能而无需转换，并且没有任何您可能遇到的近似数据类型（如`FLOAT`. 如果要存储日期，请使用日期数据类型。

# google-maps - 没有返回结果时动态增加 Google Map v3 搜索区域以包含至少 1 个？

> ID：11461866
> 
> 赞同：1
> 
> 时间：2012-07-12T22:50:25.460
> 
> 标签：google-maps, google-maps-api-3

我按照这个例子成功构建了一个商店定位器：http: [//gmaps-samples-v3.googlecode.com/svn/trunk/localsearch/places.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/localsearch/places.html)

我的问题是，当搜索位置不在人口稠密的地区附近时，某些搜索不会返回任何结果。要了解我的意思，您可以加载上面的示例 URL，然后尝试下面的搜索，将“T-Mobile”关键字与加利福尼亚州死亡谷或加利福尼亚州优胜美地谷的 zip 结合起来：

T-Mobile 92328 T-Mobile 95389

Google API 不会为这些邮政编码发送任何结果。（有道理，因为很远的地方可能没有 T-Mobile 商店）

我需要找到一种方法来处理这个问题并进行了广泛的研究，但一无所获。有没有办法：

1.  如果 Google API 未返回结果以包含至少 1 个结果，请扩大搜索区域。
2.  从更广泛的搜索区域开始，以尽量减少在给定区域内找不到 T-Mobile 商店的情况？

谢谢你的时间！

# sql - 具有空值的 SQL 交叉联接

> ID：11461867
> 
> 赞同：0
> 
> 时间：2012-07-12T22:50:27.580
> 
> 标签：sql, sql-server

我有一个包含 4 条记录（家庭、办公室、假期、酒店）的表 AddressTypes 和一个共享归档 addresstypeid 的表地址。

在地址表中，我有 1 条“home”类型的记录，我想要一个查询，其中有 4 行，如下所示：

```
Type     Address1  Address2 City    State

home     piping    1232     Austin  Tx
office   null      null     null    null
vacation null      null     null    null
hotel    null      null     null    null 
```

这是一张桌子的图片：[http ://tinypic.com/view.php?pic=28078xv&s=6](http://tinypic.com/view.php?pic=28078xv&s=6)

我确定这很容易，也许使用交叉连接但不明白。希望有人可以指导我。提前欣赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T22:58:26.303

[将 AdddressTypes左连接](http://msdn.microsoft.com/en-us/library/ms187518%28v=sql.105%29.aspx)到 Addresses 将产生所需的结果：

```
select at.Type, 
       a.Address1, 
       a.Address2, 
       a.City, 
       a.State
  from AddressTypes at
  left join Address a
    on at.AddressTypeID = a.AddressTypeID
-- For this query to make sense
-- Filter one person only
   and a.PersonID = @PersonID 
```

------------ 这部分由 VAAA 添加 ------------------------

尼古拉，我改成这样：

```
select at.description, 
       a.Address1, 
       a.Address2, 
       a.City
  from address_types at
  left join Address a
    on 1 = 1
-- For this query to make sense
-- Filter one person only
   and a.addressid = 24 
```

然后我得到了 4 行，但它们都具有相同的地址信息，只有“家”类型的地址是带有数据的地址。所以它接近...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:40:16.780

使用 LEFT OUTER JOIN，它返回来自左右表的匹配记录的一份副本以及来自两个表的不匹配记录。这是我尝试的测试代码：

```
CREATE TABLE AddressTypes(
    AddressType SMALLINT NOT NULL,
    [Description] NVARCHAR(50))

ALTER TABLE AddressTypes
ADD CONSTRAINT PK_AddressTypes_AddressType
    PRIMARY KEY (AddressType)

CREATE TABLE [Address] (
    AddressID INT NOT NULL,
    AddressType SMALLINT,
    Address1 NVARCHAR(50),
    Address2 NVARCHAR(50),
    City NVARCHAR(50),
    State CHAR(2))

ALTER TABLE [Address]
ADD CONSTRAINT PK_Address_AddressID
    PRIMARY KEY (AddressID)

ALTER TABLE [Address]
ADD CONSTRAINT FK_address_addresstypes_addresstype 
    FOREIGN KEY (AddressType) REFERENCES AddressTypes(AddressType)

INSERT INTO AddressTypes VALUES (1, 'home'), (2, 'office'), 
                                (3, 'vacation'), (4, 'hotel')
INSERT INTO address VALUES (1, 1, 'piping', '1232', 'Austin', 'TX')

   -- Here is the query that outputs the result set.
    SELECT AT.AddressType AS [Type], A.Address1, A.Address2, A.City, A.State
    FROM AddressTypes AT
    LEFT OUTER JOIN address A
    ON AT.AddressType = A.AddressType 
```

# php - 了解是否在 PHP 中实际插入了 Insert Ignore (MySQL)

> ID：11461868
> 
> 赞同：0
> 
> 时间：2012-07-12T22:50:32.057
> 
> 标签：php, mysql, insert

现在我正在使用 Insert Ignore 将一堆元组插入到我的数据库中。但是，我想知道是否实际插入了元组，并在此基础上执行一些操作。代码在 PHP 中：

```
if(!($stmt4 = $mysqliprivate3->prepare("INSERT IGNORE INTO ".$table." VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"))){
                                echo "Prepare Failed3: (" . $mysqliprivate3->errno . ") " . $mysqliprivate3->error;
                            }
                            else{
                                $stmt4->bind_param("ssisssssssssssss", $id, $dt, $score, $question1, $question2, $question3,$question4,$question5,$question6,$question7,$question8,$question9a,$question9b,$question9c,$question9d,$question9e);
                                $stmt4->execute();
                                $stmt4->close();
                            }
                            //if(inserted){
                                Do something
                            } 
```

我尝试过使用 `echo $mysqliprivate3->affected_rows;` ，但它似乎给了我一个 1，即使它没有插入任何东西。我还能做什么？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:16:56.557

尝试这个：

```
if ($stmt4->affected_rows)
{
    // ...
} 
```

# haskell - 了解 Haskell 中的迭代函数

> ID：11461875
> 
> 赞同：1
> 
> 时间：2012-07-12T22:51:19.570
> 
> 标签：haskell, enumerator, iterate

我试图弄清楚 Haskell 中的迭代 I/O 是什么。[我用一些定义](http://www.haskell.org/haskellwiki/Enumerator_and_iteratee)检查了以下 Haskell-Wiki 。

我不明白该函数的第二行、第三行和最后两行的含义：

```
enumerator :: FilePath -> Iteratee (Maybe Char) o -> IO o
enumerator file it = withFile file ReadMode
  $ \h -> fix (\rc it -> case it of
    Done o -> return o
    Next f -> do
      eof <- hIsEOF h
      case eof of
        False -> do
          c <- hGetChar h
          rc (f (Just c))
        True -> rc (f Nothing)
    ) it 
```

我知道， iteratee 函数做了什么，但我不明白一些行。这个维基页面上的其他功能真的很神秘。我不明白他们在做什么，因为我错过了一些解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T01:07:14.627

您提到的行不是特定于枚举器/迭代器的，尽管我可以尝试解释它们。

* * *

```
withFile name mode = bracket (openFile name mode) (closeFile) 
```

换句话说，`withFile`打开一个文件，将句柄传递给给定的回调，并确保在回调完成后关闭文件。

* * *

`fix`是一个定点组合器。例如，

```
fix (1 :) == 1 : 1 : 1 : 1 : ... 
```

它通常用于编写自递归函数。TFAE：

```
factorial 0 = 1
factorial n = n * factorial (n-1)

factorial n = fix (\f n -> case n of 0 -> 1; n -> n * f (n-1)) n 
```

* * *

我们可以在没有这些结构的情况下重写相同的函数：

```
enumerator :: FilePath -> Iteratee (Maybe Char) o -> IO o
enumerator file it = do
  h <- openFile file ReadMode
  let rc (Done o) = return o
      rc (Next f) = do
        eof <- hIsEof h
        case eof of
          False -> do
            c <- hGetChar h
            rc (f (Just c))
          True -> rc (f Nothing)
  o <- rc it
  closeFile h
  return o 
```

尽管它在`withFile`处理异常时并不完全准确，但事实并非如此。

这有帮助吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T06:56:21.123

如果命名 lambda 函数可能会有所帮助。

```
enumerator :: FilePath -> Iteratee (Maybe Char) o -> IO o
enumerator file it = withFile file ReadMode $ stepIteratee it
  where
    stepIteratee (Done o) _h = return o
    stepIteratee (Next f) h = do
      eof <- hIsEOF h
      case eof of
        False -> do
          c <- hGetChar h
          stepIteratee (f (Just c)) h
        True -> stepIteratee (f Nothing) h 
```

`stepIteratee`将继续遍历文件和迭代对象，直到迭代对象停止。

# android - 将 UI 元素（textview、webview ...）添加到代码中的布局，并能够手动调整大小和放置它们（dp 或 px）

> ID：11461877
> 
> 赞同：0
> 
> 时间：2012-07-12T22:51:32.223
> 
> 标签：android, user-interface, runtime, android-4.0-ice-cream-sandwich

我正在为一个应用程序开发一个 UI 类。我要实现的目标是能够在运行时创建 UI 元素并将它们添加到布局中。然后我希望能够手动调整和移动它们（在代码中）。例如，我想添加一个大小为 234 像素 x 450 像素并放置在 32、32 的 webview。

目前我正在使用相对布局并将对象放置在其中然后移动它们。我可以通过使用 view.setX() 和 view view.setY() 来很好地移动东西，但是使用 view.scaleX() 和 scaleY() 并不能以我想要的方式工作。

我应该使用相对布局还是有其他选择。

我正在为 API 15 构建

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:29:08.713

我切换到绝对布局，尽管它已被弃用，但它允许我获得我想要的确切自由和控制。

# model - 当前版本的 Emberjs.Data 可以用于生产项目吗？

> ID：11461880
> 
> 赞同：0
> 
> 时间：2012-07-12T22:51:46.817
> 
> 标签：model, ember.js, ember-data

我正在寻找一个 Javascript MVC 框架并找到了 Ember.js。与我的开发团队一起，我们决定使用它。（作为参考，我们比较了 Ember、Backbone 和 JavascriptMVC。）

但是，当我深入研究文档时，尽管目前github 上有[emberjs/data](https://github.com/emberjs/data) ，但它似乎并没有明确定义的模型对象。数据框架被清楚地标记为正在进行中的工作，但我已经看到多个使用它的教程，而且似乎有很好的活动，但大部分代码库看起来几个月都没有被触及。

在生产环境中使用是否足够稳定？作为一个警告，我知道从一个版本升级到下一个版本可能会引入我们必须解决的重大错误，但这不是一个交易破坏者。

或者是否有更好的（阅读更成熟、文档更好的）我们应该研究的框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:31:58.720

官方的回答是它还没有准备好生产。

非官方的回答是，如果你远离关联，并且准备好掌握提交，那么 master 是非常可靠的。

# objective-c - 占位符文本和输入的文本未在 UITextField 中对齐

> ID：11461881
> 
> 赞同：6
> 
> 时间：2012-07-12T22:52:16.077
> 
> 标签：objective-c, ios, uitextfield

我有一个带有一些占位符文本的 UITextfield。

我已经使用了这两个对齐属性。但是，占位符文本仍然有点偏高。谁能帮我吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T12:50:09.177

```
textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T16:15:02.750

这是我在 MonoTouch 中的解决方案，用于修复占位符与文本的对齐方式。正如我在评论中所指出的——有三个不同的部分：编辑、静态文本和静态占位符。Objective-C 中的等价物是**drawTextInRect:**和**drawPlaceholderInRect:**。

我的解决方案是子类化并抵消未对齐的项目。不幸的是，这个问题似乎与字体文件本身以及编辑模式如何影响它，以及 iOS 如何呈现静态文本有关。

希望这可以帮助某人。

艾莉森

```
public class MyTextField : UITextField
{
    public MyTextField(RectangleF rect) : base(rect)
    {
    }

    public override void DrawPlaceholder(RectangleF rect)
    {
        base.DrawPlaceholder(new RectangleF(rect.X, rect.Y + 2, rect.Width, rect.Height));
    }

    public override void DrawText(RectangleF rect)
    {
        base.DrawText(new RectangleF(rect.X, rect.Y + 2, rect.Width, rect.Height));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T23:49:06.900

我会说玩弄你使用 CGRectMake 来创建框架的 Y 大小。也许让它变小？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T23:11:03.370

根据`UITextField`文档，您应该使用该`textAlignment`属性。正如文档所述，“此属性适用于主文本字符串和占位符字符串。此属性的默认值为 UITextAlignmentLeft。”

所以你的代码看起来像：

```
textfield.textAlignment = UITextAlignmentLeft 
```

或者取决于你想如何对齐你可以使用的文本`UITextAlignmentCenter`或`UITextAlignmentRight`在`=`标志之后。

# javascript - 在 .js 文件与 html 页面中调用 javascript 函数

> ID：11461883
> 
> 赞同：-1
> 
> 时间：2012-07-12T22:52:35.227
> 
> 标签：javascript, jquery, ajax

我在调用 html 页面内的 javascript 函数时遇到了一些问题。当我在链接/外部文件中移动函数时，它工作正常。有人能帮忙吗？

这是我的外部文件.js

```
function request_token(session) {
    $.ajax({
        url: api_url, 
        data: {api_id: api_id},
        dataType: "jsonp",
        jsonp : "callback",
        success: function(data) {
            var token = data.token;
            alert(token)
        }
    }); 
}; 
```

这只是对文档准备好后我想要加载的函数的简单调用......

```
<script>
$(document).ready(function() {
    request_token('1234');
});
</script> 
```

当我移动 request_token('1234'); 进入文件外部文件，它工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:25:50.183

使用 jQuery 的`getScript()`功能。

```
<script>
    $(document).ready(function() {
        $.getScript('external.js');
        request_token('1234');
    });
</script> 
```

**[参考](http://api.jquery.com/jQuery.getScript/)**

# android - 替代 RemoteView 的 setTextViewCompoundDrawables

> ID：11461884
> 
> 赞同：5
> 
> 时间：2012-07-12T22:52:37.067
> 
> 标签：android

JellyBean (4.1) 为该类带来了超级方便的方法`setTextViewCompoundDrawables`，`RemoteViews`它允许我在自定义通知中动态更改按钮上的可绘制对象。但是，我真的不能只支持 Jelly Bean，所以我需要一种老式的方法来达到同样的效果。

我目前正在通过拥有两个不同的布局文件并重建整个东西来做到这一点，但是维护起来明显很慢而且很糟糕。有人有更好的解决方案吗？

# c++ - opencv，访问元素进行下采样但出现白色窗口

> ID：11461885
> 
> 赞同：-1
> 
> 时间：2012-07-12T22:52:40.593
> 
> 标签：c++, opencv, types, resampling

我正在学习opencv的c ++ api，对于一个简单的方法，我已经开始尝试对图像进行下采样（好吧，我知道有高斯重采样的pyrDown，但它用于学习如何访问`Mat`类中的元素）

这是我的代码：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

#define original_window "original"
#define manual_window "manual"

using namespace cv;
using namespace std;

Mat img, manual;

void downsample(Mat src, Mat &dst, const Size& s) {
    float factor = src.rows/(float)s.width;
    Mat_<Vec3f> _dst = Mat(s, src.type());
    Mat_<Vec3f> _src = src;
    for(int i=0; i<src.cols; i+=factor) {
        int _i = i/factor;
        for(int j=0; j<src.rows; j+=factor) {
            int _j = j/factor;
            _dst (_j, _i) = _src(j,i);
        }
    }
    cout << "downsample image size: " << _dst.rows << " " << _dst.cols << endl;
    dst = Mat(_dst);
}

int main(int /*argc*/, char** /*argv*/) {

    img = imread("lena.jpg"); 
    cout << "original image size: " << img.rows << " " << img.cols << endl;

    downsample(img, manual, Size(img.cols/2, img.rows/2));

    namedWindow(original_window, CV_WINDOW_AUTOSIZE);
    namedWindow(manual_window, CV_WINDOW_AUTOSIZE);

    while( true )
    {
        char c = (char)waitKey(10);

        if( c == 27 )
          { break; }

        imshow( original_window, img );
        imshow( manual_window, manual );
    }

    return 0;
} 
```

现在，我正在以一种愚蠢的方式进行下采样：我只是在删除元素。我正在尝试将 c++ api 与`Mat_`.

在手动窗口中，我得到一个白色窗口，我不明白为什么。事件如果我尝试手动计算我看到不同的值.. 这段代码有什么问题？

# 编辑 1

我找到了解决方案：

```
dst.convertTo(dst, src.type()); // in this particular case: src.type() == CV_8UC3 
```

在......的最后`downsample()`

现在我的问题是：为什么？我声明`Mat(s, src.type());`为什么要修改它？

# 编辑 2

如果我用@go4sri 回答这一行

```
_dst (_j, _i) = src.at<Vec3f>(j, i); 
```

我得到这个输出： ![在此处输入图像描述](../Images/9813a31a310ae5fe15608a34b828120d.png)

我真的不明白为什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:27:04.377

OpenCV的Mat中访问元素的方法如下：

对于单通道矩阵（tmp）

```
Matrix_Name.at<dataType>(row, col) 
```

对于三通道矩阵（如彩色图像的情况），您将需要使用 Vec3b/Vec3f 类型，具体取决于您的矩阵是否为无符号字符/浮点矩阵。

由于您的是无符号字符 3 维矩阵：您必须将其访问为`src.at<Vec3b>(i, j)`

您的下采样应该是：

```
void downsample(const Mat& src, Mat &dst, const Size& s) {
    float factor = src.rows/(float)s.height;
    Mat _dst = Mat(s, src.type());

    for(int i=0; i < src.cols; i += factor) {
        int _i = i/factor;
        for(int j=0; j<src.rows; j+=factor) {
            int _j = j/factor;
            _dst.at<Vec3b> (_j, _i) = src.at<Vec3b>(j, i);
        }
    }
    cout << "downsample image size: " << _dst.rows << " " << _dst.cols << endl;
    dst = Mat(_dst);
} 
```

# python - 配置解析器python

> ID：11461886
> 
> 赞同：0
> 
> 时间：2012-07-12T22:52:42.013
> 
> 标签：python

我有一个 cfg 文件，它有 10 个部分。每个部分都有相似的字段。

```
[sec1]
id:...
[sec2]
id..

... 
```

所以现在..我正在做类似的事情..

```
config_instance = ConfigParser.ConfigParser()
id1 = config_instance.get("sec1","id")
id2 = config_instance.get("sec2","id") 
```

等等

有没有更好的pythonic方式来做到这一点..它会自动读取所有部分并提取此功能？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:03:07.733

如果所有部分都有它（或者如果您知道具有 id 字段的部分列表），您可以执行以下操作：

```
sections=config_instance.sections()
ids=[config_instance.get(sec,'id') for sec in sections] 
```

然后，您可以根据需要将它们解压缩，但我更喜欢以下列表：

```
id1,id2,... = ids 
```

或者，您可以将其作为字典（python 2.7+）：

```
ids={ sec:config_instance.get(sec,'id') for sec in sections }
print ids['sec1'] 
```

这真的取决于你想怎么做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:05:22.733

制作一个字典，将部分作为键，将 ID 作为值。

```
config = ConfigParser.ConfigParser()
ids    = {}
for section in config.sections():
    if config.has_option(section, "id"):
        ids[section] = config.get(section, "id") 
```

# c++ - 0x770115de 处未处理的异常：0xC0000005：使用递归向量搜索访问冲突读取位置 0xccccccc0

> ID：11461892
> 
> 赞同：0
> 
> 时间：2012-07-12T22:53:34.743
> 
> 标签：c++, string, visual-studio-2008, recursion

daedalus_1.4.exe 中 0x770115de 处的未处理异常：0xC0000005：访问冲突读取位置 0xccccccc0。

```
string temp;
string locName = "0";

vector<vector<string>> l;
int m = 100, n = 3; //vector dimension
l.resize(m);
for(int i = 0; i < m; ++i) l[i].resize(n);

temp.clear();

if(line.substr(1, 17) == "Timing LocationID" && arrayFull == true) {
    int i = 0; //starting char
    while (line[i++] != '='); //increment to next
    while (line[++i] != '"') temp += line[i];
    locName = findLocation(temp, 0, "", l);

string findLocation (string temp, int index, string locName, vector<vector<string>> &l)
{
    if (temp == "*") return locName; // <------errors here on return
    if (l[index][0] == temp) findLocation(l[index][1], 0, locName.insert(0,l[index][2]), l);
    else findLocation(temp, ++index, locName, l);
} 
```

这个函数循环遍历一个 2xvector 并返回一个由父->子向量单元组成的连接字符串

这些来自调用堆栈；看起来像字符串析构函数

```
__CLR_OR_THIS_CALL ~basic_string()
    {   // destroy the string
    _Tidy(true);
    }

void __CLR_OR_THIS_CALL _Tidy(bool _Built = false,
    size_type _Newsize = 0)
    {   // initialize buffer, deallocating any storage
    if (!_Built)
        ;
    else if (_BUF_SIZE <= _Myres)
        {   // copy any leftovers to small buffer and deallocate
        _Elem *_Ptr = _Bx._Ptr;
        if (0 < _Newsize)
            _Traits_helper::copy_s<_Traits>(_Bx._Buf, _BUF_SIZE, _Ptr, _Newsize);
        _Mybase::_Alval.deallocate(_Ptr, _Myres + 1);
        }
    _Myres = _BUF_SIZE - 1;
    _Eos(_Newsize);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:16:06.663

你的函数字符串 findLocation()

不会在所有路径上返回值，也许您的意思是：

```
string findLocation (string temp, int index, string locName, vector<vector<string>> &l)
{
    if (temp == "*") return locName;
    if (l[index][0] == temp) return findLocation(l[index][1], 0, locName.insert(0,l[index][2]), l);
    else return findLocation(temp, ++index, locName, l);
} 
```

# iphone - 在主线程上调试 UI 更新，iPhone，活动指示器不旋转

> ID：11461893
> 
> 赞同：0
> 
> 时间：2012-07-12T22:53:39.247
> 
> 标签：iphone

所以我知道你应该在主线程上进行更新。我正在使用 Apple 的代码来编写我们的数据库做文档目录：

```
// Creates a writable copy of the bundled default database in the application Documents directory.
- (void)createEditableCopyOfDatabaseIfNeeded {
    // First, test for existence.
    BOOL success;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:@"bookdb.sql"];
    success = [fileManager fileExistsAtPath:writableDBPath];
    if (success)
        return;
    // The writable database does not exist, so copy the default to the appropriate location.
    NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"bookdb.sql"];
    success = [fileManager copyItemAtPath:defaultDBPath toPath:writableDBPath error:&error];
    if (!success) {
        NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }
} 
```

我愿意

```
[activityIndicator startAnimating];
[self createEditableCopyOfDatabaseIfNeeded]; 
```

我没有看到我的活动指示器。如果我注释掉`[self createEditableCopyOfDatabaseIfNeeded];`，我会看到我的活动指示器。有没有办法调试它以查看发生了什么以及为什么我看不到我的旋转指示器？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:15:17.673

断章取义，很难说，但我假设您希望活动指示器代表`createEditableCopyOfDatabaseIfNeeded`正在进行的操作。假设`[self createEditableCopyOfDatabaseIfNeeded]`从你的主线程调用，你可以做这样的事情：

```
[activityIndicator startAnimating];
dispatch_async(dispatch_get_global_queue(0, 0), ^{
    [self createEditableCopyOfDatabaseIfNeeded];
    dispatch_async(dispatch_get_main_queue(), ^{
        [activityIndicator stopAnimating];
    });
}); 
```

# c++ - 轮询 TCP 套接字空闲侦听

> ID：11461896
> 
> 赞同：1
> 
> 时间：2012-07-12T22:53:53.523
> 
> 标签：c++, sockets, ubuntu

如果标题具有误导性，我很抱歉。我真的想不出更好的了。这是我拥有的一些简单的套接字程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h> 
#include <sys/socket.h>
#include <netinet/in.h>
#include <sys/poll.h>
#include <iostream>

#define BACKLOG 10

void error(const char *msg)
{
    perror(msg);
    exit(1);
}

int main(int argc, char *argv[])
{
     if (argc < 2) {
         fprintf(stderr,"ERROR, no port provided\n");
         exit(1);
     }

     int sockfd = socket(AF_INET, SOCK_STREAM, 0);
     if (sockfd < 0) 
        error("ERROR opening socket");

     struct sockaddr_in serv_addr;
     bzero((char *) &serv_addr, sizeof(serv_addr));
     int portno = atoi(argv[1]);
     serv_addr.sin_family = AF_INET;
     serv_addr.sin_addr.s_addr = INADDR_ANY;
     serv_addr.sin_port = htons(portno);

     auto bindsuccess = bind(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr));

     if (bindsuccess < 0)
        error("ERROR on binding");

     struct pollfd newPollFD[1];
     newPollFD[0].fd = sockfd;
     newPollFD[0].events = POLLIN;

     char buffer[256];
     bzero(buffer,256);

     listen(sockfd, BACKLOG);

     struct sockaddr_in cli_addr;
     socklen_t clilen = sizeof(cli_addr);

     int newsockfd;

     int rv = poll(newPollFD, 1, -1);

     if (rv == -1) {
        error("Error occured in Poll");
     }
     else {
        if (newPollFD[0].revents & POLLIN){

            newsockfd = accept(sockfd, (struct sockaddr *) &cli_addr, &clilen);
            if (newsockfd < 0) 
                error("ERROR on accept");

            int rwsuccess;

            rwsuccess = read(newsockfd,buffer,255);
            if (rwsuccess < 0)
                error("ERROR reading from socket");

            printf("Here is the message: %s\n",buffer);

            rwsuccess = write(newsockfd,"I got your message \n",18);

            if (rwsuccess < 0)
                error("ERROR writing to socket");
        }
     }

     close(newsockfd);
     close(sockfd);
     return 0; 
} 
```

如果我使用端口号执行此代码，然后远程登录到该端口号，服务器会侦听，但只要我发送第一条消息，连接就会终止。我希望服务器继续收听和发送确认的次数与我从 telnet 发送消息的次数一样多。我该如何做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T22:59:45.943

~~奇怪的`continue`是，它是无关紧要的，并导致编译中断。~~（现在在您的编辑中更正了。）但是，您缺少一个`for`循环。并且，您应该添加一个检查是否`read`返回`0`.

```
 for (;;) {
          int rwsuccess;

          rwsuccess = read(newsockfd,buffer,255);
          if (rwsuccess < 0)
              error("ERROR reading from socket");
          if (rwsuccess == 0) break;

          printf("Here is the message: %s\n",buffer);

          rwsuccess = write(newsockfd,"I got your message \n",18);

          if (rwsuccess < 0)
              error("ERROR writing to socket");
        } 
```

# executable-jar - IzPack - Windows 上的桌面快捷方式 - 不工作

> ID：11461899
> 
> 赞同：8
> 
> 时间：2012-07-12T22:54:09.370
> 
> 标签：executable-jar, batch-file, izpack, desktop-shortcut

我正在尝试使用 IzPack 安装我的程序，并且我想将桌面快捷方式添加到安装程序中，这是来自 IzPack 网站的文档/说明。

[http://izpack.org/documentation/desktop-shortcuts.html](http://izpack.org/documentation/desktop-shortcuts.html)

但是，以下 XML 文件在编译时只会在安装程序中创建一个空白屏幕，当您尝试单击“下一步”跳过它时会挂起。这是在 Windows 7 - 64 位上运行时的屏幕外观。

![在此处输入图像描述](../Images/e1735b9556a2805f108d01a71f6a227e.png)

这是我的 install.xml 和 shortcutSpec.xml 文件。

**安装.xml**

```
<?xml version="1.0" encoding="iso-8859-1" standalone="yes" ?>

<installation version="1.0">

<!-- The info section. -->

<info>
    <appname>Application Name</appname>
    <appversion>1.0</appversion>
    <url>http://www.example.com/</url>
    <javaversion>1.6</javaversion>
    <run-privileged condition="izpack.macinstall|izpack.windowsinstall.vista|izpack.windowsinstall.7"/>
</info>

<!-- The gui preferences indication. -->

<guiprefs width="640" height="480" resizable="yes"/>

<!-- The locale section. -->

<locale>
    <langpack iso3="eng"/>
</locale>

 <!-- The resources section. -->

<resources>
    <res id="LicencePanel.licence" src="licence.txt"/>
    <res id="InfoPanel.info" src="readme.txt"/>
    <res id="shortcutSpec.xml" src="shortcutSpec.xml"/>
</resources>
<native type="izpack" name="ShellLink.dll"/>

<!-- The panels section. -->

<panels>
    <panel classname="HelloPanel"/>
    <panel classname="InfoPanel"/>
    <panel classname="LicencePanel"/>
    <panel classname="TargetPanel"/>
    <panel classname="ShortcutPanel"/>
    <panel classname="PacksPanel"/>
    <panel classname="InstallPanel"/>
    <panel classname="SimpleFinishPanel"/>
</panels>

<native type="izpack" name="ShellLink.dll"/>

<!-- The packs section. -->

<packs>
    <pack name="Program and Dependencies" required="yes">
        <description>Program, libraries and other dependencies</description>
        <file src="ExecutableJar.jar" targetdir="$INSTALL_PATH"/> 
        <file src="lib" targetdir="$INSTALL_PATH"/> 
        <file src="save" targetdir="$INSTALL_PATH"/> 
        <file src="HelpContents.chm" targetdir="$INSTALL_PATH"/>
        <file src="icon.png" targetdir="$INSTALL_PATH"/>   
        <file src="application.ini" targetdir="$INSTALL_PATH"/>     
        <file src="readme.txt" targetdir="$INSTALL_PATH"/>
        <file src="licence.txt" targetdir="$INSTALL_PATH"/>
        <file src="autorun-win.bat" targetdir="$INSTALL_PATH"/>
    </pack>
    <pack name="Samples" required="no">
        <description>Word Document Samples</description>
        <file src="samples" targetdir="$INSTALL_PATH"/>
    </pack>
    <pack name="Templates" required="no">
        <description>Word Document Templates</description>
        <file src="templates" targetdir="$INSTALL_PATH"/>
    </pack>
</packs> 
```

**和shortcutSpec.xml**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>

<shortcuts>
    <skipIfNotSupported/>
    <programGroup defaultName="AppGroupName" location="applications"/>
    <shortcut
        name="Application - Startup"
        target="$INSTALL_PATH\autorun-win.bat"
        workingDirectory="$INSTALL_PATH"
        programGroup="no"
        desktop="yes"
        applications="yes"
        startMenu="yes"
        startup="yes"/>
</shortcuts> 
```

**补充笔记：**

1.  我得到零编译错误。

2.  如果没有添加快捷方式，安装程序可以正常工作。

3.  我的程序是一个可执行的 jar，为了自动运行它，我在 Windows 中创建了一个名为 autorun-win.bat 的批处理脚本，这是桌面快捷方式应该链接到的。

**编辑：**

我已经尝试过这种导入以及 32 位风味。两者都对上述结果没有任何影响。任何更多的贡献将不胜感激。

```
<native type="izpack" name="ShellLink_x64.dll" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T13:46:08.673

快捷方式的创建依赖于仅支持 32 位系统的原生支持库 ShellLink.dll。对于 64 位 Windows，您还必须添加以下条目以支持这两种风格：

```
 <native type="izpack" name="ShellLink_x64.dll" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T08:47:15.857

我从来没有使用过这个工具，所以这可能是一个完全的红字。在您的快捷方式文件中，您没有 CreateForPack 语句。这可能与故障有关吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-20T10:53:18.260

虽然这个问题很老，但我今天在 IzPack 4.3.5 上遇到了这个问题。这里提供了两个观察结果。

首先， http://docs.codehaus.org/pages/viewpage.action?pageId= [230398023](http://docs.codehaus.org/pages/viewpage.action?pageId=230398023)上的文档显示了放置在“natives”标签内的本地语句。对于 v4 版本，这似乎是不正确的。

其次，ShellLink_x64 DLL 必须对编译器可见。我必须在编译器执行行中添加“-h ${IZPACK_HOME}”才能实现这一点。遗憾的是，如果找不到此文件，似乎没有任何警告，但安装程序随后会按说明挂起。

解决这些问题为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T20:17:12.190

我遇到过这样一种情况，即带有快捷方式创建的有效 izPack 配置突然停止放置图标。原来linux下用convert commad创建的图标文件有问题，我恢复到旧图标

# php - MySQL / PHP：返回包含MAX值的行值

> ID：11461902
> 
> 赞同：2
> 
> 时间：2012-07-12T22:54:33.617
> 
> 标签：php, mysql

我有一个测验结果表。用户可以为每个类别一遍又一遍地接受它——我需要每个类别的最高分和相应的时间戳。

所以我真的很接近但时间戳字段正在杀死我。

这是一个用户数据：（“score”是带有 %s 的 varchar - 这就是我得到的。也按类别排序，然后是最高分，然后是时间戳。如果我可以为每个完成的类别取第一行。）

```
catid  score   timestamp
5   100%    2012-03-22 19:26:41
6   88.89%  2012-06-12 15:20:41
6   77.78%  2012-06-12 15:17:58
7   100%    2012-06-12 16:08:35
7   100%    2012-06-12 16:03:35
7   53.33%  2012-06-12 15:59:44
8   88.89%  2012-06-12 16:13:00
9   83.33%  2012-06-12 16:22:19
10  100%    2012-06-12 17:55:50
10  76.47%  2012-06-12 17:51:54
11  100%    2012-06-12 18:07:12
11  66.67%  2012-06-12 18:05:35 
```

这是我需要的：

```
catid  score          timestamp
5   100%    2012-03-22 19:26:41
6   88.89%  2012-06-12 15:20:41
7   100%    2012-06-12 16:08:35
8   88.89%  2012-06-12 16:13:00
9   83.33%  2012-06-12 16:22:19
10  100%    2012-06-12 17:55:50
11  100%    2012-06-12 18:07:12 
```

这是我正在使用的 MySQL：

```
SELECT catid
 , MAX(0 + score)
 , `timestamp`

FROM `results` 
WHERE userid = 100
GROUP BY catid
ORDER BY catid ASC
 , (0 + score) DESC
 , timestamp DESC
; 
```

它正在生成的表格：

```
5   100 2012-03-22 19:26:41
6   88.89   2012-06-12 15:17:58
7   100 2012-06-12 15:59:44
8   88.89   2012-06-12 16:13:00
9   83.33   2012-06-12 16:22:19
10  100 2012-06-12 17:51:54
11  100 2012-06-12 18:05:35 
```

如此接近 - 但时间戳不是与最大值相关联的时间戳。发生了什么事，我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:45:16.680

如果您使用数字类型而不是字符串来存储百分比，那么您的表格会好上 328 倍。但是，对于这个答案，我会忽略这个问题，尽管你真的应该尽快修复它。

您可以按以下方式解决您的问题：

```
SELECT catid, score, MAX(timestamp) AS timestamp
FROM results
WHERE userid = 100
AND (catid, CAST(score AS DECIMAL(5,2))) IN
(
    SELECT catid, MAX(CAST(score AS DECIMAL(5,2))) AS score
    FROM results
    WHERE userid = 100
    GROUP BY catid   
)
GROUP BY catid 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/52b82/10)

或者将日期时间格式化为字符串：[sqlfiddle](http://sqlfiddle.com/#!2/52b82/11)

**结果**

```
CATID 分数时间戳
5 100% 2012-03-22 19:26:41
6 88.89% 2012-06-12 15:20:41
7 100% 2012-06-12 16:08:35
8 88.89% 2012-06-12 16:13:00
9 83.33% 2012-06-12 16:22:19
10 100% 2012-06-12 17:55:50
11 100% 2012-06-12 18:07:12

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T22:59:41.353

```
SELECT MAX(score), catid, timestamp FROM db.table GROUP BY catid ORDER BY score DESC; 
```

# php - 如果数组返回至少一个值，PHP 只回显一个变量一次

> ID：11461907
> 
> 赞同：0
> 
> 时间：2012-07-12T22:55:51.137
> 
> 标签：php

好的，所以我从数据库中返回的值`ARRAY`有些页面有 3 个值，有些页面有 10 个，而其他页面有 0 个。

如果页面返回一个值，我希望标签出现一次，因此不在循环中。标签->`$key_label = '<span class="hl_reference"><u>key references:</u></span>';`

如果页面没有任何`$reference_keys`我不希望标签出现，因此`$key_label = false;`

所以我想检查`ARRAY`一个值，如果 >= 1：标签也会出现。

我的代码似乎没有验证`if(array($value => 1) && !$key_label)`我猜我的语法是错误的，或者我应该使用不同的函数？

感谢帮助！

```
$key_label = false;
$key_label = '<span class="hl_reference"><u>key references:</u></span>';

foreach($reference_keys as $value)
{
    echo $value .'&nbsp;';
}

if(array($value => 1) && !$key_label) 
{
    $key_label = true; 
    echo $key_label;
}; 
```

- - - - - - - - - - - - - - - -更新 - - - - - - - - - ------------

此代码似乎仅适用于只有 1 个 reference_key 的页面......奇怪的是`count is set to >= 1`

```
$key_label = '<span class="hl_reference"><u>key references:</u></span>';

foreach($reference_keys as $value)
{
   echo $value .'&nbsp;';
}
$result = count($value);
if ($result > 1)
{
  echo $key_label;
} 
```

- - - - - - - - - - - - - - - -更新 - - - - - - - - - ------------

约翰 C 的最新代码似乎可以工作，但它`$reference_key`在每页的第二个之前显示一个“1”。但它只显示在页面上`$reference_key`

```
$key_flag = false;
$key_label = '<span class="hl_reference"><u>key references:</u></span>';

foreach($reference_keys as $value)
{
if (!empty($value)) {
    if (!$key_flag) {
        echo $key_label;
        $key_label = true;
    }
    echo $value .'&nbsp;';
}
}; 
```

- - - - - - - - - - - - - - - -更新 - - - - - - - - - ------------

John C 解决了这个问题。下面的工作代码！谢谢大家！->

```
$key_flag = false;
$key_label = '<span class="hl_reference"><u>key references:</u></span>';

foreach($reference_keys as $value)
{
if (!empty($value)) {
    if (!$key_flag) {
        echo $key_label;
        **$key_flag = true;**
    }
    echo $value .'&nbsp;';
}
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:28:22.103

如果我没看错，您想显示数组中`span`是否有值`$reference_keys`，然后循环并显示数组中的值。

为此，您可以执行以下操作：

```
if (!empty($reference_keys) && count($reference_keys) > 0) {
    echo '<span class="hl_reference"><u>key references:</u></span>';
    foreach($reference_keys as $value)
    {
       echo $value .'&nbsp;';
    }
} 
```

**编辑**如果`$reference_keys`数组中有空值，则`count`返回大于 0 但不会显示任何键。如果是这种情况，则此代码将解决：

```
$key_flag = false;
$key_label = '<span class="hl_reference"><u>key references:</u></span>';

foreach($reference_keys as $value)
{
    if (!empty($value)) {
        if (!$key_flag) {
            echo $key_label;
            $key_flag = true;
        }
        echo $value .'&nbsp;';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:14:30.617

[计数](http://php.net/count)功能应该可以帮助您：

```
if(count($value) >= 1 && !$key_label) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T23:27:52.913

您的代码似乎存在一些逻辑问题，首先您要覆盖`$key_label`内容，然后在代码下方，您在似乎不是数组的变量中使用[count() 。](http://br.php.net/manual/pt_BR/function.count.php)试试这样的代码：

```
$key_flag  = false;
$key_label = '<span class="hl_reference"><u>key references:</u></span>';

foreach( $reference_keys as $value )
{
    echo $value .'&nbsp;';
}

if( count( $reference_keys ) >= 1 && ! $key_label )
{
    $key_flag = true; 
    echo $key_label;
}; 
```

或者您可以使用更好的解决方案，如下所示：

```
if( is_array($reference_keys) && count($reference_keys) > 0 )
{
    echo '<span class="hl_reference"><u>key references:</u></span>';

    foreach( $reference_keys as $value )
        echo $value .'&nbsp;';
} 
```

**编辑 1**

```
if( is_array($reference_keys) && count($reference_keys) > 0 )
{
    echo '<span class="hl_reference"><u>key references:</u></span>';

    foreach($reference_keys as $value)
        echo $value .'&nbsp;';
} 
```

# java - 线路检测 | 使用 Java 进行角度检测

> ID：11461910
> 
> 赞同：9
> 
> 时间：2012-07-12T22:56:14.917
> 
> 标签：java, image, image-processing, artificial-intelligence

我正在处理我的 UGV（无人地面车辆）捕获的一些图像，以使其在一条线上移动。

我想根据地平线获得那条线的角度。我将尝试用几个例子来解释：

![90 度图像](../Images/9db2409d9ea1418ca57d3dbda1d1de4e.png)

上图会使我的 UGV 保持直线前进，因为角度约为 90 度。但接下来会使其向左转，因为与地平线比较的角度约为 120。

![120 度图像](../Images/8d8ead6f25bb0bfd7e10b0f9e11d537e.png)

我可以使用 otsu 进行阈值化成功地将这些图像转换为下图：

![阈值图像](../Images/f93d3564669b91aa17909e2cda2df488.png)

并且还使用了边缘检测算法来得到这个：

![拉普拉斯滤波器](../Images/7b7f777a52293b0c76219369c408210b.png)

但是我现在被困在试图找到一种算法来检测那些边缘/线和输出 - 或者帮助我输出 - 这种线的角度..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T00:04:11.303

这是我使用 ImageJ 的尝试：

```
 // Open the Image
ImagePlus image = new ImagePlus(filename);

    // Make the Image 8 bit
IJ.run(image, "8-bit", "");

    // Apply a Threshold (0 - 50)
ByteProcessor tempBP = (ByteProcessor)image.getProcessor();
tempBP.setThreshold(0, 50, 0);
IJ.run(image, "Convert to Mask", "");

    // Analyze the Particles
ParticleAnalyzer pa = new ParticleAnalyzer(
    ParticleAnalyzer.SHOW_MASKS +
    ParticleAnalyzer.IN_SITU_SHOW,
    1023 +
    ParticleAnalyzer.ELLIPSE
    , rt, 0.0, 999999999, 0, 0.5);

IJ.run(image, "Set Measurements...", "bounding fit redirect=None decimal=3");

pa.analyze(image);

int k = 0;
double maxSize = -1;
for (int i = 0; i < rt.getCounter(); i ++) {
    // Determine creteria for best oval.
    // The major axis should be much longer than the minor axis.
    // let k = best oval
}
double bx = rt.getValue("BX", k);
double by = rt.getValue("BY", k);
double width = rt.getValue("Width", k);
double height = rt.getValue("Height", k);

// Your angle:
double angle = rt.getValue("Angle", k);
double majorAxis = rt.getValue("Major", k);
double minorAxis = rt.getValue("Minor", k); 
```

代码如何工作：

1.  使图像灰度化。
2.  在其上应用阈值以仅获取黑暗区域。这假设线条将始终接近黑色。
3.  应用粒子分析器来查找图像上的椭圆。
4.  遍历“粒子”以找到符合我们标准的粒子。
5.  从我们的粒子中获取角度。

这是我分析图像时图像的示例：

![椭圆形图像](../Images/c12ad1abe21e880f16cfaa2cd584e8b3.png) ![椭圆形图像 2](../Images/e60377ec06cd5831e522247af05fe9df.png)

**注意**：代码未经测试。我刚刚将我在 Visual ImageJ 中所做的转换为 Java。

# asp.net-mvc-3 - 在 TeamCity 中构建时找不到 CompareAttribute（在 Windows Server 2012 RC 上）

> ID：11461911
> 
> 赞同：2
> 
> 时间：2012-07-12T22:56:21.340
> 
> 标签：asp.net-mvc-3, teamcity, windows-server

我正在尝试在安装了 Windows Server 2012 RC 的服务器上的 TeamCity 上构建 MVC 项目。

我收到以下错误。它看起来像是与 MVC 版本的某种冲突，如果我在谷歌搜索时发现了这种冲突。我正在按版本明确引用 system.web.mvc 等，所以我不知道问题是什么。有任何想法吗？

```
Models\AccountModels.cs(26, 10): error CS0246: The type or namespace name 'Compare' could not be found (are you missing a using directive or an assembly reference?) 
Models\AccountModels.cs(26, 10): error CS0104: 'CompareAttribute' is an ambiguous reference between 'System.ComponentModel.DataAnnotations.CompareAttribute' and 'System.Web.Mvc.CompareAttribute' 
Models\AccountModels.cs(64, 10): error CS0246: The type or namespace name 'Compare' could not be found (are you missing a using directive or an assembly reference?) 
Models\AccountModels.cs(64, 10): error CS0104: 'CompareAttribute' is an ambiguous reference between 'System.ComponentModel.DataAnnotations.CompareAttribute' and 'System.Web.Mvc.CompareAttribute' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T03:52:18.313

您必须在`Compare`属性中明确指定命名空间，例如

```
[System.Web.Mvc.Compare("NewPassword", ErrorMessage = "The new password and confirmation password do not match.")] 
```

代替

```
[Compare("NewPassword", ErrorMessage = "The new password and confirmation password do not match.")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T15:26:22.700

我将我的站点从 MVC Framework 4 更新到 4.5.1，并且（在使用 NuGet 命令行更新各种库之后）我收到了同样的错误。我已经调用了命名空间'using System.Web.Mvc;' 在我的 .cs 文件的顶部。只有当我使用完整路径“System.Web.Mvc.Compare”时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-19T07:25:01.240

从标头中删除 using System.Web.Mvc

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T14:26:36.087

您还可以添加：

```
using System.Web.Mvc; 
```

在 .cs 文件的顶部

# javascript - 在图像上制作跟随鼠标指针的轴引导线

> ID：11461913
> 
> 赞同：2
> 
> 时间：2012-07-12T22:56:30.547
> 
> 标签：javascript, html, canvas, mouseover

我在 HTML 页面上有一个图形的 PNG 图像。

我希望包含一组叠加的 x 和 y 指导线，这些指导线出现在鼠标上方，其顶点跟随鼠标指针，以帮助用户读取 x 和 y 轴上的值。

例如，他们在 WolframAlpha 上使用了这样的效果（虽然在 IE<8 中不起作用）： [http ://www.wolframalpha.com/input/?i=graph+y%3D2x](http://www.wolframalpha.com/input/?i=graph+y%3D2x)

有没有人对如何完成这个有任何想法，javascript或其他？如果有帮助的话，我相信 WolframAlpha 会以某种方式使用 HTML5 画布（见下面的截图）。

![截屏。](../Images/434ca4de2f59b20393daf25473f9e44a.png)

虽然如果有办法避免使用画布以支持 IE8，那将是极好的。网格线当然也可以从图像边界延伸到整个页面，如果这样可以更容易的话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T00:44:52.983

这是一个简单的实现

CSS

```
#imageholder div{ background-color:black;position:absolute; }
#imageholder{;position:relative;display:inline-block;overflow:hidden; }
#horizontal{width:100%;height:1px;}
#vertical{width:1px;height:100%;} 
```

JS(使用jquery)

```
$('#imageholder img').on('mousemove', null, [$('#horizontal'), $('#vertical')],function(e){
    e.data[1].css('left', e.offsetX==undefined?e.originalEvent.layerX:e.offsetX);
    e.data[0].css('top', e.offsetY==undefined?e.originalEvent.layerY:e.offsetY);
});
$('#imageholder').on('mouseenter', null, [$('#horizontal'), $('#vertical')], function(e){
    e.data[0].show();
    e.data[1].show();
}).on('mouseleave', null, [$('#horizontal'), $('#vertical')], function(e){
        e.data[0].hide();
        e.data[1].hide();
}); 
```

HTML

```
<div id="imageholder">
    <div id="horizontal"></div>
    <div id="vertical"></div>
    <img src="http://placehold.it/320x280">
</div> 
```

[演示](http://jsbin.com/ovinun/)

还有穿过页面[DEMO的线条](http://jsbin.com/ugupuk/)

# visual-studio - Visual Studio 9.0 错误 C2051 大小写表达式不恒定

> ID：11461915
> 
> 赞同：4
> 
> 时间：2012-07-12T22:56:37.013
> 
> 标签：visual-studio, compiler-errors

当我尝试编译此代码时，出现`Case Expression Not Constant`错误。我不知道为什么。

```
while ((*datalen) == 0)
    crReturn(NULL);  //error here
st->len = (st->len << 8) + **data; 
```

函数 crReturn() 定义如下。

```
#define crReturn(z) \
do {\
    *crLine =__LINE__; return (z); case __LINE__:;\
} while (0) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-12T23:50:56.543

问题是 MSVC++ 在配置为为其“编辑和继续”功能生成调试信息时做了一些非标准的事情（并且与它自己的文档相反），并且这种非标准破坏了`__LINE__`Simon Tatham 的协程宏中使用的方式。

以下是 PuTTY 源代码中的注释对此的看法：

```
In particular, if you are getting `case expression not constant'
errors when building with MS Visual Studio, this is because MS's
Edit and Continue debugging feature causes their compiler to
violate ANSI C. To disable Edit and Continue debugging:

- right-click ssh.c in the FileView
- click Settings
- select the C/C++ tab and the General category
- under `Debug info:', select anything _other_ than `Program
Database for Edit and Continue'. 
```

所以你可能应该这样做。（事实上​​，我知道你已经这样做了，因为在我发布这个答案之前我们在评论中讨论了这个问题:-)。）

# c# - IsAssignableFrom 在协变和逆变

> ID：11461917
> 
> 赞同：5
> 
> 时间：2012-07-12T22:56:42.900
> 
> 标签：c#, reflection, .net-4.0, covariance, contravariance

如何不仅通过继承层次结构而且通过协变和逆变来检测类型`x`是否可以从类型分配？`y`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T00:50:35.027

`IsAssignableFrom`确实检查协方差和逆变，你不需要其他任何东西：

```
// Covariance
typeof(IEnumerable<object>).IsAssignableFrom(typeof(IEnumerable<string>)).Dump(); // true
typeof(IEnumerable<string>).IsAssignableFrom(typeof(IEnumerable<object>)).Dump(); // false

// Contravariance
typeof(Action<string>).IsAssignableFrom(typeof(Action<object>)).Dump(); // true
typeof(Action<object>).IsAssignableFrom(typeof(Action<string>)).Dump(); // false 
```

# javascript - jquery添加一个单元格而不刷新页面

> ID：11461919
> 
> 赞同：-2
> 
> 时间：2012-07-12T22:57:11.677
> 
> 标签：javascript, jquery

每次单击添加按钮时，我都想在一个部分中添加一个单元格。页面在不刷新的情况下更新。html代码是：

```
<section>
  <p class="cell">content</p>
</section>
<button type="button" id="addCell">add</button> 
```

我应该如何实现js？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:00:28.163

很简单，使用`append()`or `after()`。在你的情况下`append()`会更好。

```
$('#addCell').bind('click',function(){
    $('section').append('<p class="cell">content2</p>');
}); 
```

不幸的是，我无法向您展示演示，因为 jsFiddle 正在维护中。

jsbin 中的演示：http: [//jsbin.com/agosap/](http://jsbin.com/agosap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:00:12.220

```
$(document).ready(function() {
    $("#addCell").click(function() {
         $("section").append('<p class="cell">content</p>');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T23:03:17.393

我不会给你代码，因为你没有向我们展示你的尝试，但我会指导你。

您希望将[单击](http://api.jquery.com/click/)事件绑定到按钮，以便在用户单击它时执行操作。您可以使用 JS[`document.createElement`](https://developer.mozilla.org/en/DOM/document.createElement)或[使用 jQuery](https://stackoverflow.com/questions/867916/creating-a-div-element-in-jquery)创建元素。所以在 click 事件中，创建你想要的元素，给它你想要的任何[属性](http://api.jquery.com/attr/)，然后将它[附加](http://api.jquery.com/append/)到父 div。

# php - 如何使用 php 和 shell 脚本捕获和提供 telnet？

> ID：11461929
> 
> 赞同：0
> 
> 时间：2012-07-12T22:58:10.090
> 
> 标签：php, bash, shell, telnet

这是我想使用 php 完成的（可能使用 exce()？）：

1.  使用名为 proxychains 的程序远程登录到 whois 注册商：

    **代理链 telent whois.someregistrar 43**

2.  如果失败 -> 再次尝试 1

3.  将域名提供给连接：

    **somedomainname.com**

4.  捕获注册商返回给php的数据

我没有使用 shell 脚本的经验，所以我如何捕获连接 telnet 并挂起输入的事件以及如何“提供”它？

我完全离开这里还是这是正确的方法？

编辑：我看到python有一个很好的方法来处理这个使用[expect](http://www.noah.org/wiki/pexpect)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T01:14:49.700

这是一个基本的工作示例。

```
<?php

$whois   = 'whois.isoc.org.il';            // server to connect to for whois
$data    = 'drew.co.il';                   // query to send to whois server
$errFile = '/tmp/error-output.txt';        // where stderr gets written to
$command = "proxychains telnet $whois 43"; // command to run for making query

// variables to pass to proc_open
$cwd            = '/tmp';
$env            = null;
$descriptorspec = array(
        0 => array("pipe", "r"),  // stdin is a pipe that the child will read from
        1 => array("pipe", "w"),  // stdout is a pipe that the child will write to
        2 => array("file", "/tmp/error-output.txt", "a") // stderr is a file to write to
);

// process output goes here
$output  = '';

// store return value on failure
$return_value = null;

// open the process
$process = proc_open($command, $descriptorspec, $pipes, $cwd, $env);

if (is_resource($process)) {
    echo "Opened process...\n";

    $readBuf = '';

    // infinite loop until process returns
    for(;;) {
        usleep(100000); // dont consume too many resources

        // TODO: implement a timeout

        $stat = proc_get_status($process); // get info on process

        if ($stat['running']) { // still running
            $read = fread($pipes[1], 4096);
            if ($read) {
                $readBuf .= $read;
            }

            // read output to determine if telnet connected successfully
            if (strpos($readBuf, "Connected to $whois") !== false) {
                // write our query to process and append newline to initiate
                fwrite($pipes[0], $data . "\n");

                // read the output of the process
                $output = stream_get_contents($pipes[1]);
                break;
            }
        } else {
            // process finished before we could do anything
            $output       = stream_get_contents($pipes[1]); // get output of command
            $return_value = $stat['exitcode']; // set exit code
            break;
        }
    }

    echo "Execution completed.\n";

    if ($return_value != null) {
        var_dump($return_value, file_get_contents($errFile));
    } else {
        var_dump($output);
    }

    // close pipes
    fclose($pipes[1]);
    fclose($pipes[0]);

    // close process
    proc_close($process);
} else {
    echo 'Failed to open process.';
} 
```

这意味着从命令行运行，但并非必须如此。我试图很好地评论它。基本上一开始你可以设置whois服务器，以及要查询的域。

该脚本使用[proc_open](http://php.net/proc_open)打开一个`proxychains`调用 telnet 的进程。它检查进程是否成功打开，如果成功则检查其状态是否正在运行。在运行时，它将 telnet 的输出读取到缓冲区中，并查找字符串 telnet 输出以指示我们已连接。

一旦检测到 telnet 已连接，它会将数据写入进程，后跟换行符 ( `\n`)，然后从 telnet 数据所在的管道中读取数据。一旦发生这种情况，它就会跳出循环并关闭进程和句柄。

您可以从 指定的文件中查看代理链的输出`$errFile`。这包含连接信息以及连接失败时的调试信息。

可能需要进行一些额外的错误检查或流程管理以使其更健壮，但如果将其放入函数中，您应该能够轻松调用它并检查返回值以查看查询是否成功.

希望这能给你一个好的起点。

另请查看我的这个答案以获取另一个工作示例`proc_open`，此示例实现了超时检查，因此如果命令在一定时间内未完成，您可以保释：[在 Linux 上创建 PHP 在线评分系统：exec Behavior, Process ID 和 grep](https://stackoverflow.com/questions/9356250/creating-a-php-online-grading-system-on-linux-exec-behavior-process-ids-and-g/9357331#9357331)

# mysql - Eclipse -> MySQL 连接失败

> ID：11461931
> 
> 赞同：1
> 
> 时间：2012-07-12T22:58:30.177
> 
> 标签：mysql, eclipse, jdbc

![在此处输入图像描述](../Images/fddf7e36111e614eb9b27182c6344e09.png)

[我正在关注这个 Eclipse-> MySQL 连接教程](http://obscuredclarity.blogspot.com/2009/08/setup-mysql-development-in-eclipse.html)

我通过 phpmyadmin 在 MySQL 中创建了一个名为 eclipse 的数据库（并注销），我提供了正确的用户名和密码，但连接测试失败。为什么？

这些是报告的错误：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown database 'database'
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1053)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:919)
    at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1694)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1244)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2397)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2430)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2215)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
    at org.eclipse.datatools.connectivity.drivers.jdbc.JDBCConnection.createConnection(JDBCConnection.java:214)
    at org.eclipse.datatools.connectivity.DriverConnectionBase.internalCreateConnection(DriverConnectionBase.java:105)
    at org.eclipse.datatools.connectivity.DriverConnectionBase.open(DriverConnectionBase.java:54)
    at org.eclipse.datatools.connectivity.drivers.jdbc.JDBCConnection.open(JDBCConnection.java:73)
    at org.eclipse.datatools.enablement.internal.mysql.connection.JDBCMySQLConnectionFactory.createConnection(JDBCMySQLConnectionFactory.java:28)
    at org.eclipse.datatools.connectivity.internal.ConnectionFactoryProvider.createConnection(ConnectionFactoryProvider.java:83)
    at org.eclipse.datatools.connectivity.internal.ConnectionProfile.createConnection(ConnectionProfile.java:359)
    at org.eclipse.datatools.connectivity.ui.PingJob.createTestConnection(PingJob.java:76)
    at org.eclipse.datatools.connectivity.ui.PingJob.run(PingJob.java:59)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T23:09:47.073

看看你的网址，错了。它应该以`/eclipse`not结尾`/database`（您从网站上逐字复制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-31T17:30:47.707

当我们连接到 MYSQL 时，我遇到了这个问题。

我已经解决了这个问题。当我们从 url 中删除“/databasename”时它工作得很好。

所以从 url 中删除数据库名称

# firebase - Firebase 获取记录总数的更好方法

> ID：11461937
> 
> 赞同：4
> 
> 时间：2012-07-12T22:59:09.503
> 
> 标签：firebase

来自交易文档，第二段：

> 这里的目的是让客户端增加发送的聊天消息的总数（暂时忽略有更好的实现方式）。

有哪些标准的“更好的方法”来实现这一点？

具体来说，我正在尝试做一些事情，比如检索最近的 50 条记录。这要求我从列表的末尾开始，所以我需要一种方法来确定最后一条记录是什么。

我看到的选项：

*   每次添加记录时使用事务更新计数器，使用带有 setPriority() 的计数器值进行排序
*   forEach() 父级并读取所有记录，在客户端进行我自己的排序/过滤
*   编写服务器代码来分析 Firebase 表并创建索引列表，如“mostRecent Messages”和“totalNumberOfMessages”

我错过了明显的选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T00:05:41.477

要查看列表中的最后 50 条记录，只需调用“limit()”，如下所示：

```
var data = new Firebase(...);
data.limit(50).on(...); 
```

Firebase 元素按优先级排序，如果优先级匹配（或未设置），则按名称按字典顺序排列。push() 命令自动创建按时间顺序排列的元素，因此如果您使用 push()，则无需额外工作即可使用 limit()。

要计算列表中的元素，我建议添加一个“值”回调，然后遍历快照（或执行我们提到的事务方法）。文档中的注释实际上是指我们尚未发布的一些即将推出的功能，这些功能将允许您在不先加载元素的情况下对元素进行计数。

# java - 我将如何构造一个非常简单的 Java 数学表达式以与 KNIME 一起使用

> ID：11461938
> 
> 赞同：1
> 
> 时间：2012-07-12T22:59:10.927
> 
> 标签：java, knime

我目前正在使用一个名为 KNIME 的程序，用于分析数据。对于我的一些数据，我希望将列中的每一行与前一行中的值进行平均。“java 片段”选项需要一个“全局值声明”和一个“方法体”。列名是“新账户”。我知道要更有效地使用这个程序，我可能需要学习简单的 java（以及我要做的），但就在今晚，我想快速检查一些使用的数据。非常感谢任何帮助 - 我附上了布局的图像。![在此处输入图像描述](../Images/a97dbd3c8563f554d88f4e47cc311690.png) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-25T12:26:07.163

有一个可能适合该任务的移动平均线节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T11:35:44.297

如果您不需要使用 Java Snippet，我建议您使用[数学公式](http://www.knime.org/files/nodedetails/_misc_Math_Formula.html)节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T11:28:32.723

作为对 Sylvansight 的部分回答，应注意**Java Snippet**节点是按行执行的，因此甚至无法使用**Java Snippet**节点访问前一行或后一行中的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T10:42:06.117

放什么

```
double acc = Double.NaN; 
```

到全局区域，类似这样的方法体：

```
if (Double.isNaN(acc)) {
    acc = $z$;
    return $z$;
} else {
    double avg = (acc + $z$) / 2;
    acc = $z$;
    return avg;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-06T23:55:24.927

**数学公式节点**更适合您的问题，但如果您想使用 **java 片段节点（简单）** 只需将公式放在返回中（使用普通的 java sintax）。`return 1+9;`

# mysql - SQL横向视图

> ID：11461940
> 
> 赞同：0
> 
> 时间：2012-07-12T22:59:19.313
> 
> 标签：mysql, sql, syntax, hive

如何在 SQL 中使用**横向视图**从 JSON 字符串中提取值？

表“人”中的示例数据：

```
name   information
-----  -----------------------
Jen    {"age": 15, "gender":2}
John   {"age": 22, "gender":1}
Jack   {"age": 25, "gender":1}
Pat    {"age": 55, "gender":3} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-28T23:31:56.807

```
SELECT name , info\
FROM people\
LATERAL VIEW explode(information) exploded_information_view AS info 
```

应该是这样的：

```
name / info

Jen    /   "age": 15 \
Jen     /  "gender":2 
```

# java - 为什么我的对象的纹理没有显示出来？

> ID：11461941
> 
> 赞同：0
> 
> 时间：2012-07-12T22:59:39.503
> 
> 标签：java, 3d, blender, java-3d

这是我使用搅拌机制作的椅子：

![在此处输入图像描述](../Images/ea07954775f0f4384e115e5cddcb8c53.png)

现在，当我使用 Java3D 显示它时，这就是我得到的：

![在此处输入图像描述](../Images/5895aeb6a4d3bcd120f49008a267cf27.png)

为什么我的纹理没有出现在 java 中？这是我显示椅子的代码：

```
package com;

import java.applet.Applet;
import java.awt.BorderLayout;
import java.awt.Frame;
import java.awt.GraphicsConfiguration;

import javax.media.j3d.Alpha;
import javax.media.j3d.Appearance;
import javax.media.j3d.Background;
import javax.media.j3d.BoundingSphere;
import javax.media.j3d.BranchGroup;
import javax.media.j3d.Canvas3D;
import javax.media.j3d.DirectionalLight;
import javax.media.j3d.RotationInterpolator;
import javax.media.j3d.Transform3D;
import javax.media.j3d.TransformGroup;
import javax.vecmath.Color3f;
import javax.vecmath.Point3d;
import javax.vecmath.Vector3f;

import com.microcrowd.loader.java3d.max3ds.Loader3DS;
import com.sun.j3d.loaders.Scene;
import com.sun.j3d.loaders.objectfile.ObjectFile;
import com.sun.j3d.utils.applet.MainFrame;
import com.sun.j3d.utils.geometry.ColorCube;
import com.sun.j3d.utils.universe.SimpleUniverse;

public class LoadAnObject extends Applet
{
    public LoadAnObject()
    {
        setLayout(new BorderLayout());
        GraphicsConfiguration config = SimpleUniverse.getPreferredConfiguration();
        Canvas3D canvas = new Canvas3D(config);
        add("Center", canvas);

        BranchGroup content = getScene();
        content.compile();

        SimpleUniverse universe = new SimpleUniverse(canvas);
        universe.getViewingPlatform().setNominalViewingTransform();
        universe.addBranchGraph(content);
    }

    public BranchGroup getScene()
    {
        BranchGroup group = new BranchGroup();

        Loader3DS loader = new Loader3DS();

        Scene scene = null;

        try
        {
            scene = loader.load("/Users/John/ArtOfIllusion/Chair.3ds");
        }catch(Exception e){e.printStackTrace();}

        TransformGroup rotateGroup = new TransformGroup();
        Transform3D rotate = new Transform3D();
        rotate.rotX(- Math.PI / 8);
        rotateGroup.setTransform(rotate);
        rotateGroup.addChild(scene.getSceneGroup());

        TransformGroup objSpin = new TransformGroup();
        objSpin.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        //objSpin.addChild(new ColorCube(.5));
        Alpha rotationAlpha = new Alpha(-1, 4000);
        RotationInterpolator rotator = new RotationInterpolator(rotationAlpha, objSpin);

        BoundingSphere boundSphere = new BoundingSphere(new Point3d(0.0f, 0.0f, 0.0f), 200);
        rotator.setSchedulingBounds(boundSphere);
        objSpin.addChild(rotator);
        objSpin.addChild(rotateGroup);

        TransformGroup moveGroup = new TransformGroup();
        Transform3D move = new Transform3D();
        move.setTranslation(new Vector3f(0.0f, 0.0f, -20.0f));
        moveGroup.setTransform(move);
        moveGroup.addChild(objSpin);

        group.addChild(moveGroup);

        Background background = new Background(0.0f, 1.0f, 1.0f);
        background.setApplicationBounds(new BoundingSphere());
        group.addChild(background);

        Color3f light1Color = new Color3f(1.0f, 1.0f, 1.0f);
        BoundingSphere bounds = new BoundingSphere(new Point3d(0.0,0.0,0.0), 100.0);
        Vector3f light1Direction = new Vector3f(0, 0, 10);
        DirectionalLight light1 = new DirectionalLight(light1Color, light1Direction);
        light1.setInfluencingBounds(bounds);
        group.addChild(light1);

        return group;
    }

    public static void main(String args[])
    {
        Frame frame = new MainFrame(new LoadAnObject(), 256, 256);
    }
} 
```

我使用的文件格式是 .3ds，这是我从以下位置获取加载程序的地方：

*   [http://sourceforge.net/projects/java3dsloader/](http://sourceforge.net/projects/java3dsloader/)

我如何让椅子的纹理出现在java中？

* * *

编辑：

我将我的椅子编译成 .3ds 文件而不是目标文件，我现在必须使用从这里获得的 .3ds 加载器：

*   [http://sourceforge.net/projects/java3dsloader/](http://sourceforge.net/projects/java3dsloader/)

代码没有太大变化，而不是使用 ObjectFile 我现在使用 Loader3DS

![在此处输入图像描述](../Images/f86c1011259829e6fd2038e9f06f3ea8.png)

所以现在很明显你可以看到材料转移了，但没有纹理，我如何让纹理显示出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:41:25.247

Java 显然不会加载纹理，除非它们是从图像生成的。我能够加载纹理的唯一方法是从图像映射纹理。我尝试了几种不同的格式，但仍然一无所获。如果您要尝试在 Java3D 中使用纹理，请确保使用 Image Mapped 纹理！

# javascript - 尝试使用 YouTube 的 API 和 Jquery 从视频中获取数据

> ID：11461943
> 
> 赞同：0
> 
> 时间：2012-07-12T22:59:42.853
> 
> 标签：javascript, jquery, api, youtube, youtube-api

我正在使用这个 jquery 片段，但它不起作用。我正在尝试从使用 YouTube 的 API 的视频中获取数据。

```
$(document).ready(function() {

var qid = 'cggNqDAtJYU';    
var youtubeAPI = 'http://gdata.youtube.com/feeds/api/videos?v=2&alt=jsonc';
$.get(youtubeAPI,{'q' : qid},function(response)){

       //data is the reponse
       var data = response.data;

      alert(data.duration);
   }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T03:14:00.900

您使用了错误的查询。这不是真正的搜索，这是“q”参数的用途，而是通过其 id 请求特定视频。这对我有用，data.duration 返回值 831。

```
var youtubeAPI = 'http://gdata.youtube.com/feeds/api/videos/cggNqDAtJYU?v=2&alt=jsonc';
$.get(youtubeAPI, function (response) {

    //data is the reponse
    var data = response.data;

    alert(data.duration);
}); 
```

# html - 检测内容中的分页符

> ID：11461945
> 
> 赞同：1
> 
> 时间：2012-07-12T22:59:48.710
> 
> 标签：html, css

如何检测 div 内容中的换行符？

假设，我在这样的页面上有几个 div -

```
 <div id="header" style='width:500px;'> Header content </div>

    <div id="container" style='overflow:vscroll;'> dynamic content </div>

    <div style="page-break-after:always">&nbsp;</div> 
```

当我打印此页面时，如果容器 div 内的内容是多页，则标题不会出现在第二页或更多页上。我需要标题显示在每一页上。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T10:56:16.953

而不是 div 使用 table 与 thead 和 tbody。表格标题将在所有页面上重复。 [如何使用 thead 创建表格](http://www.w3schools.com/tags/tag_thead.asp)

# javascript - 为什么这不会阻止表单提交/重新加载页面？

> ID：11461948
> 
> 赞同：0
> 
> 时间：2012-07-12T23:00:14.823
> 
> 标签：javascript

我正在尝试构建一个小搜索脚本，但似乎无法在您点击提交时阻止页面重新加载。我的代码可能有问题：

```
function searchThat(e) {
    if (!e) e = window.event;
    e.preventDefault();

    if (searchFor.indexOf(searchIn) != -1) {
        console.log('we found it');
    }
} 
```

非常感谢！

我用它来称呼它

```
 if (searchFor && searchIn && searchSubmit) {
    addEvent(searchSubmit, 'submit', searchThat)
    } 
```

和：

```
function addEvent(elem, evtType, func) {
    if (elem.addEventListener) {
        elem.addEventListener(evtType, func, false);
    } else if (elem.attachEvent) {
        elem.attachEvent("on" + evtType, func);
    } else {
        elem["on" + evtType] = func;
    }
} 
```

和 HTML：

```
<div class="container">
    <form>
        <p>Search for:</p>
        <p class="mrm">
            <input type="text" id="searchFor" name="searchFor">
        </p>
        <p>In:</p>
        <textarea class="mrm" type="text" id="searchIn" name="searchIn"></textarea>
        <p>
            <input type="submit" class="clicker nmb" id="searchSubmit" name="searchSubmit">
        </p>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:09:24.983

`<Input type="submit"/>`将始终触发回发并重新加载页面。如果它适用于您尝试实现的任何内容，请将您的输入更改为`<Input type="button"/>`

和

```
addEvent(searchSubmit, 'click', searchThat)
{} 
```

您的代码可能缺少更多逻辑，但从您发布的内容来看，您可以通过执行所有这些复杂的 JScripting 来使您的生活更加轻松，您可以这样做： `<Input type="button" value="Click Me" onclick="searchThat()"/>`

# javascript - 为什么音频事件没有被 BackboneJS 触发，而其他事件却被触发了？

> ID：11461954
> 
> 赞同：2
> 
> 时间：2012-07-12T23:00:38.460
> 
> 标签：javascript, backbone.js, html5-audio

我不明白为什么`click`事件可以触发，但不是那个`timeupdate`。

没有触发事件`<audio>`，我尝试使用 canplay、play、pause、timeupdate ......如果我在模板中显示控件，但`click .audio`如果我点击播放器，则会触发一个事件。

```
var PlayerView = Backbone.View.extend({
    tagName : 'div',

    template: _.template($('#player-template').html()),

    initialize: function() {
        this.$el.html(this.template(this.model.toJSON()));
    }

    events: {
        'timeupdate .audio': 'onTimeUpdate',
        'click .btn_play': 'onClickPlay',
        'click .btn_pause': 'onClickPause'
    },

    onTimeUpdate: function () {
        console.log('player ' + this.model.get('id') + ' : event = onTimeUpdate');
    },

    onClickPlay: function () {
        console.log('player ' + this.model.get('id') + ' : event = onClickPlay');
    },

    onClickPause: function () {
        console.log('player ' + this.model.get('id') + ' : event = onClickPause');
    },

});

$(function(){
    var model = new PlayerModel({'id' : 1});
    var view = new PlayerView({'model' : model});
    $("#players").append(view.el);
}) 
```

模板：

```
<script type="text/template" id="player-template">
    <div id="player<%= id %>" class="player">
        <audio class="audio">
          <source src="<%= track_url %>" type="audio/mp3" />
        </audio>
        <div class="control">
            <button class="btn_play">Play</button>
            <button class="btn_pause">Pause</button>
        </div>
    </div>
</script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T11:01:25.073

Backbone 在内部转换事件对象并[通过委托绑定事件](http://backbonejs.org/docs/backbone.html#section-156)。这意味着

```
events: {
        'timeupdate .audio': 'onTimeUpdate',
        'click .btn_play': 'onClickPlay'
} 
```

结束为

```
this.$el.delegate('.audio','timeupdate', this.onTimeUpdate);
this.$el.delegate('.btn_play','click', this.onClickPlay); 
```

但有一个问题：

> 使用事件委托来提高效率。[...] 这仅适用于可委托事件：在 Internet Explorer 中不能聚焦、模糊，也不能更改、提交和重置。

而且看起来音频事件是不可委托的。

但是，直接设置回调确实有效，例如，您可以将初始化函数替换为

```
initialize: function() {
    this.$el.html(this.template(this.model.toJSON()));
    _.bindAll(this,'onTimeUpdate');
    this.$('.audio').on('timeupdate', this.onTimeUpdate);
} 
```

# android - Android 项目，如 .Net 用户控件

> ID：11461956
> 
> 赞同：0
> 
> 时间：2012-07-12T23:00:49.083
> 
> 标签：android

您知道您可以制作`.ascx`页面并将其作为用户控件添加到另一个页面中。分离的代码和设计使您的工作易于阅读和工作。

我在一个有点复杂的项目中工作；一些活动将是 5,000 多行代码。此外，看起来它很快就会变成双三倍。

所以我开始寻找一种类似.Net`.ascx`页面的方式。

有什么建议可以让我的工作变得整洁和轻松吗？

要清楚；我不是在寻找一些充气布局。我需要一些类似的活动可能会在另一个活动中膨胀。单独创建单独的布局等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T02:33:00.317

是的，他们被称为`Fragment`s。从文档中，

> Fragment 表示 Activity 中的一种行为或用户界面的一部分。您可以在单个活动中组合多个片段以构建多窗格 UI 并在多个活动中重用一个片段。

您可以整理代码的其他一些方法是：

1.  从 xml 膨胀你的布局，而不是用 Java 以编程方式生成它们。

2.  在`res/values/styles.xml`.

3.  组织和存储您的字符串在`res/value/string.xml`.

4.  在适当的时候使用对象组合和继承。

5.  简化您的想法，这样您就不必首先编写 5,000 行代码（因为 5,000 行确实是*很多*代码......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T01:29:07.533

扩展视图组类之一，例如 LinearLayout 或 RelativeLayout。您可以创建一个以视图组为根的 xml 布局，然后在 java 类中实现任何自定义行为。

# c++ - 发送 POST 请求

> ID：11461962
> 
> 赞同：1
> 
> 时间：2012-07-12T23:01:06.307
> 
> 标签：c++, https, httprequest, boost-asio

我在通过 https 发送 POST 时遇到问题。在上面的代码片段中，第一部分（注释）运行良好。下一部分没有：它不发送任何请求。我需要什么来修复它？

Ps 问题可能是因为我的 Lib boost 不支持 HTTPS。

```
 #include "stdafx.h"
    #include <iostream>
    #include <boost/asio.hpp>
    #include <conio.h>
    #include <stdio.h>
    #include <fstream>

    char buffer [9999999];

    int main()
    {
        boost::asio::ip::tcp::iostream stream;
        stream.expires_from_now(boost::posix_time::seconds(60));
        stream.connect("www.mail.ru","http");
        //stream << "GET / HTTP/1.1\r\n";
        //stream << "Host mail.ru\r\n";
        //stream << "User-Agent   Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11\r\n";
        //stream << "Accept   text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n" ;
        //stream << "Accept-Encoding  gzip,deflate,sdch\r\n";
        //stream << "Accept-Language  en-US,en;q=0.8\r\n";
        //stream <<"Accept-Charset    ISO-8859-1,utf-8;q=0.7,*;q=0.3\r\n";
        //stream << "Cookie   \r\n\r\n";

    stream << "POST https://auth.mail.ru/cgi-bin/auth HTTP/1.1\r\n";
    stream << "Host: auth.mail.ru\r\n";
    stream << "User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1\r\n";
    stream << "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n";
    stream << "Accept-Language: ru-ru,ru;q=0.8,en-us;q=0.5,en;q=0.3\r\n";
    stream << "Accept-Encoding: gzip, deflate\r\n";
    stream << "Connection: keep-alive\r\n";
    stream << "Referer: http://mail.ru/\r\n";
    stream << "X-MailRuSputnik: generic\r\n";
    stream << "Content-Type: application/x-www-form-urlencoded\r\n";
    stream << "Content-Length: 59\r\n";

    stream << "Domain=mail.ru&Login=(login)&Password=(password)&level=0\r\n";

        stream.flush();
        using namespace std ;
     // cout << stream.rdbuf();
        ofstream f("output.txt" /*| ios::bin*/);
        f << stream.rdbuf();
        f.close();
        system("pause");
        return 0 ;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T23:52:17.637

您的代码有几个问题。

1）您的`POST`行指定了完整的 URL，而它应该只指定主机相对路径。不要在该行中指定 URL 方案或主机名。仅在连接到代理时才需要。

```
stream << "POST /cgi-bin/auth HTTP/1.1\r\n"; 
```

2）HTTP标头由两个连续的CRLF对终止，但您的代码仅在`Content-Length`标头和正文数据之间发送一对CRLF，而您的正文数据仅以一对CRLF对（您不需要）结束，所以有当 HTTP 请求完成发送时，无需告诉服务器。

```
stream << "Content-Length: 59\r\n"; 
stream << "\r\n"; // <-- add this 
```

3）您的`Content-Length`标头的值为`59`，但您显示的正文数据的长度是 58 。这将导致服务器尝试读取比您实际发送的字节更多的字节，从而阻止发送响应（除非服务器实现接收超时，然后可以发回错误响应）。我建议你将body数据放入a中`std::string`，然后使用它的`length()`方法`Content-Length`动态填写正确的值，而不是硬编码。

```
std::string content = "Domain=mail.ru&Login=(login)&Password=(password)&level=0";
...
stream << "Content-Length: " << content.length() << "\r\n";
stream << "\r\n";

stream << content; 
```

# matlab - Matlab --- 将向量拼接成函数调用的参数

> ID：11461963
> 
> 赞同：14
> 
> 时间：2012-07-12T23:01:21.383
> 
> 标签：matlab

我想将一个向量拼接到一个函数调用中，但我找不到这样做的方法。可能吗？

为了扩展我的意思，假设我们有`x`长度向量`n`和一个`f`带`n`参数的函数。我希望能够`f(x(1), x(2), ..., x(n))`通过调用类似的东西来调用`f(x)`or `f(splice(x))`。如果`x`是元胞数组而不是向量，则调用`f(x{:})`将获得所需的结果；`x`当是一个向量时，似乎有一些等价物似乎是合理的。

我希望有一些我缺少的运算符或功能。我可以打电话`y = num2cell(x)`后跟`f(y{:})`，但这并不是我真正想要的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T01:32:00.610

正如评论中已经提到的

```
tmp = num2cell(x)
f(tmp{:}) 
```

是要走的路。

一个可以`splice`做`f(splice(x))`你想做的事情的功能，并不能解决问题。即使您可以将输入拆分为多个输出，`f`也只需要第一个参数（类似于您在命令行调用函数而不请求输出）。

在这种情况下甚至[`subsref`](https://stackoverflow.com/questions/3627107/how-can-i-index-a-matlab-array-returned-by-a-function-without-first-assigning-it)不起作用，因为 eg `subsref(num2cell([1 2]),struct('type','{}','subs',{{':'}}))`将与 -function 执行相同的操作`splice`，即仅返回一个输出，除非已明确请求多个输出。

# hibernate - 使用“复合”表作为连接的 Hibernate 多对一映射

> ID：11461964
> 
> 赞同：0
> 
> 时间：2012-07-12T23:01:26.360
> 
> 标签：hibernate, join, mapping

请帮我解决这个映射问题（我使用的是 Hibernate 3.6）。

我有这些桌子

```
CREATE  TABLE Towers (
  Id INT NOT NULL AUTO_INCREMENT ,
  Name VARCHAR(5) NOT NULL ,
  PRIMARY KEY (Id));

CREATE  TABLE LineOfBusiness (
  Id INT NOT NULL AUTO_INCREMENT,
  Name VARCHAR(15) NOT NULL ,
  PRIMARY KEY (Id));

CREATE  TABLE LineOfBusinessXTowers (
  LineOfBusinessId INT NOT NULL ,
  TowerId INT NOT NULL ,
  PRIMARY KEY (LineOfBusinessId, TowerId));

CREATE  TABLE IF NOT EXISTS Departments (
  Code INT NOT NULL ,
  LineOfBusinessId INT NOT NULL ,
  TowerId INT NOT NULL ,
  PRIMARY KEY (Code));

ALTER TABLE LineOfBusinessXTowers
  ADD CONSTRAINT FK_LineOfBusinessXTowers_LineOfBusiness
    FOREIGN KEY (LineOfBusinessId)
    REFERENCES LineOfBusiness (Id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  ADD CONSTRAINT FK_LineOfBusinessXTowers_Towers
    FOREIGN KEY (TowerId)
    REFERENCES Towers (Id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION;

ALTER TABLE Departments
  ADD CONSTRAINT FK_Departments_LineOfBusinessXTowers
    FOREIGN KEY (LineOfBusinessId, TowerId)
    REFERENCES LineOfBusinessXTowers (LineOfBusinessId,TowerId)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION; 
```

在 Hibernate 映射类中，我希望有一个具有对应 Tower 和 LineOfBusiness 对象的 Department 类：

```
public class Departments {
        private int code;
   private String name;
   private LineOfBusiness lineOfBusiness;
   private Towers tower;

       //Constructors and access methods here
} 
```

我试图以这种方式进行映射，但错误：

```
<hibernate-mapping>
   <class name="Departments" table="Departments" catalog="DB">
      <id name="code" type="int">
         <column name="Code" />
         <generator class="assigned" />
      </id>
      <property name="name" type="string">
         <column name="Name" length="45" not-null="true" unique="true" />
      </property>

      <join table="LineOfBusinessXTowers" optional="false">
         <key column="LineOfBusinessId" unique="false" />
         <many-to-one name="lineOfBusiness"
            class="LineOfBusiness">
            <column name="LineOfBusinessId" not-null="true" />
         </many-to-one>
      </join>
      <join table="LineOfBusinessXTowers" optional="false">
         <key column="TowerId" unique="false" />
         <many-to-one name="towers" class="Towers">
            <column name="TowerId" not-null="true" />
         </many-to-one>
      </join>
   </class>
</hibernate-mapping> 
```

哪个是我想做的正确映射？可以做到吗？还有其他更好的策略吗？

非常感谢你。

阿特：埃德加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:26:15.507

代替

```
<join table="LineOfBusinessXTowers" optional="false">
  <key column="LineOfBusinessId" unique="false" />
  <many-to-one name="lineOfBusiness" class="LineOfBusiness">
    <column name="LineOfBusinessId" not-null="true" />
  </many-to-one>
</join> 
```

做

```
<many-to-one name="lineOfBusiness" class="LineOfBusiness">
  <column name="LineOfBusinessId" not-null="true" />
</many-to-one> 
```

并且映射到塔是不容易的。Join 只支持在 primaryKey/Id 上加入：

## 选项 1：如果 lineOfBusiness 只有 1 个塔

```
// in department
public Towers getTower()
{
    return lineOfBusiness.getTower();
}

// in LineOfBusiness mapping
<join table="LineOfBusinessXTowers" optional="false">
  <key column="LineOfBusinessId" unique="false" />
  <many-to-one name="tower" column="TowerId" />
</join> 
```

## 选项 2：如果 lineOfBusiness 有很多塔

```
// in department
public Towers getTower()
{
    return lineOfBusiness.getTowers().getAt(0);
}

// in LineOfBusiness mapping
<set table="LineOfBusinessXTowers" optional="false">
  <key column="LineOfBusinessId" unique="false" />
  <many-to-many name="tower" column="TowerId" />
</join> 
```

## 选项 3：为多对多表引入一个实体

```
class LineOfBusinessAndTower
{
    private LineOfBusiness lineOfBusiness;
    private Tower tower;

    // override equality to take the two references into account
}

// in LineOfBusinessAndTower mapping
<Composite-id >
  <key-many-to-one name="lineOfBusiness" column="LineOfBusinessId" />
  <key-many-to-one name="tower" column="TowerId" />
</join>

// in Department mapping
<manytoone table="internalLineOfBusinessXTowers">
  <column="LineOfBusinessId" />
  <column="TowerId" />
</manytoone>

// in Department
public LineOfBusiness getLineOfBusiness()
{
    return internalLineOfBusinessXTowers.getLineOfBusiness();
}

public Towers getTower()
{
    return internalLineOfBusinessXTowers.getTower();
} 
```

# ruby-on-rails - ActiveAdmin 表单问题 (has_many)

> ID：11461968
> 
> 赞同：1
> 
> 时间：2012-07-12T23:02:03.733
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activeadmin

我在使用 ActiveAdmin 时遇到问题。

我有以下型号：

模板.rb

```
class Template < ActiveRecord::Base
  belongs_to :category
  has_many :template_questions
  has_many :questionnaires
  attr_accessible :category, :string
  accepts_nested_attributes_for :template_questions
end 
```

模板问题.rb

```
class TemplateQuestion < ActiveRecord::Base
  belongs_to :template
  attr_accessible :number, :question
end 
```

而这个活跃的管理资源

```
ActiveAdmin.register Template do
  form do |f|
    f.inputs "Details" do
      f.input :title
      f.input :category
    end
    f.inputs "Questions" do
      f.has_many  :template_questions do |j|
        j.input :question
      end
    end
    f.buttons
  end
end 
```

当我在 ActiveAdmin 界面中的表单上时，我正确地看到了标题和类别的字段，然后在问题部分我得到一个按钮来添加一个问题，但是当单击它时它什么也不做。

知道我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T02:36:16.733

您通常需要将属性添加到 attr_accessible，所以让我们添加

```
attr_accessible :category, :string, :template_questions_attributes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:46:51.813

我一直在敲墙，直到我在活动管理员 github 上看到一个[未解决的问题](https://github.com/gregbell/active_admin/issues/1813)

解决方案是从活动管理员 0.5.1 回滚到 0.5.0

# javascript - 检查一个字符串是否可以由 Javascript 中另一个字符串中的字符组成

> ID：11461970
> 
> 赞同：1
> 
> 时间：2012-07-12T23:02:19.037
> 
> 标签：javascript, string, performance

我有两个字符串，string1 和 string2。我想检查string1是否可以由string2中的字符组成（不重复字符）。例如，如果string1是“tool”，string2是“atoll”，函数将返回false。如果string1是“touch”并且string2 是“chetoudce”，它将返回 true。

在 Javascript 中执行此操作的最有效方法是什么？我正在考虑使用 indexOf，然后从 string2 中删除用于构建 string1 的字符，但我认为创建此辅助字符串可能会出现性能问题。

编辑：我根据第一个响应做了这个，这里是：

```
function isSubsetOf(a, b){
    if(a.length > b.length){
        return false;
    }

    while(a.length > 0){
        var letter = a.substr(0, 1),
            re = new RegExp(a.substr(0, 1), 'g'),
            a_count = (a.match(re)||[]).length,
            b_count = (b.match(re)||[]).length;

        if(a_count > b_count){
            return false;
        }

        a = a.replace(re, '');
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:04:10.333

首先，计算每个字符串中的字符。然后，如果超字符串的每个字符的个数大于或等于子字符串，则返回 true。

O(m+n)，因为 m 和 n 是子串和超串的大小。

例子：

```
Superstring: aaaaabbbbccc
Substring: aabbcc

Superstring letters: 
    a: 5
    b: 4
    c: 3
    all others: 0
Substring letters:
    a: 2
    b: 2
    c: 2
    all others: 0

5 >= 2, 4 >= 2, 3 >= 2, so true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T23:09:07.817

这可以在 O(n) 时间内完成：

```
string1 = "touch";
string2 = "chetoudce";

var chars = {}, l = string2.length, i;
for( i=0; i<l; i++) chars[string2[i]] = (chars[string2[i]] || 0)+1;

l = string1.length;
for( i=0; i<l; i++) {
    if( chars[string1[i]]) chars[string1[i]]--;
    else return false;
}
return true; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-12T23:25:12.883

这是我的第一个想法。

```
function isSubsetOf(elements, set) {
   var i, l = elements.length, pos;
   set = set.split('');
   for (i = 0; i < l; i += 1) {
      pos = set.indexOf(elements.charAt(i));
      if (pos == -1) return false;
      set.splice(pos, 1);
   }
   return true;
}

/*-- Algorithm: --*/
// for each character in *elements*:
//   remove that character from an array of *set*'s characters
//   (and if not found, return false). 
```

但是，我不知道 IE 没有`Array.indexOf`. 这使得它在 IE 上的性能方面是一个可怕的失败者，并且添加了符合标准的`indexOf`功能`Array.prototype`。然而，令我惊讶的是，它只是用 Chrome*尖叫*，这显然是一台卑鄙的拼接机器。

我的第二个想法比我的第一个想法好很多，但并不比页面上的其他想法好很多。

```
function isSubsetOf2(elements, set) {
   var i, l, counts = {};
   for (i = 0, l = set.length; i < l; i += 1) {
      char = set.charAt(i);
      counts[char] = (counts[char] || 0) + 1;
   }
   for (i = 0, l = elements.length; i < l; i += 1) {
      char = elements.charAt(i);
      if (!counts[char]) return false;
      counts[char] -= 1;
   }
   return true;
}

/*-- Algorithm: --*/
// For each character in *set*:
//    increment its count in an object "map".
// For each character in *elements*
//    decrement its count in an object map
//    (and if < 0 or doesn't exist, return false) 
```

因此，最后，我的第三个想法在 Firefox 中是最快的，并且是一个很好的全能竞争者，尽管不同的浏览器针对不同的功能显示完全不同的速度配置文件。

```
function isSubsetOf3(elements, sets) {
   var e, s, el = elements.length, sl = sets.length;
   elements = elements.split('').sort();
   sets = sets.split('').sort();
   for (e = 0, s = 0; e < el; e += 1, s += 1) {
      while (s < sl && sets[s] < elements[e]) { s += 1; }
      if (s == sl || sets[s] > elements[e]) { return false };
   }
   return true;
}

/*-- Algorithm: --*/
// Sort arrays of the characters in *elements* and *set*.
// Do a logical "merge join" (cool!) and:
//    if no match is found, return false
// MERGE JOIN:
// For each character in the *elements* array ("left" input)
//    Consume one matching character from *set* ("right" input)
//       (skipping matches that are less than the character)
//    And if *set* runs out of characters or is higher than *element*, return false 
```

如果输入已排序，则合并连接速度很快。显然，在浏览器中对两个数组进行排序比对每个字符串执行多个正则表达式操作要快。

编辑：我刚刚意识到我的想法 #2 基本上是 Kolink 算法的副本。但是，我的功能具有一致的性能优势。在分析它们的差异时可能会发现一些有趣的结果。

另外，我发现在#2 中，我不应该`counts[char] -= 1;`向上移动一条线，但我不想破坏我已经在 jsperf 获得的性能结果。所以我要离开它，因为它不会不公平地扭曲结果，因为它只会损害函数的性能。

[在 jsperf 自己做速度测试](http://jsperf.com/stringissubsetof)！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T23:36:48.787

这是一个简单的正则表达式解决方案。它与您的非常相似，只是它不进行任何字符串操作，因此它可能会快一点。

```
function check(needle, haystack) {

  var visited = {}, chr, i, re;

  for (i = needle.length; i--;) {
    chr = needle[i];
    if (visited[chr])
      continue;
    re = new RegExp(chr, 'g');
    if ((haystack.match(re) || []).length < (needle.match(re) || []).length) 
      return false;
    visited[chr] = true;
  }

  return true;  

} 
```

[http://jsbin.com/uretim/edit#preview](http://jsbin.com/uretim/edit#preview)

# javascript - 从毫秒到小时-分钟-秒的javascript倒计时脚本

> ID：11461971
> 
> 赞同：7
> 
> 时间：2012-07-12T23:02:32.953
> 
> 标签：javascript, jquery, timer

我正在寻找一种将毫秒输出为小时-分钟-秒的简单方法。我见过一些插件，但我不想在插件中使用插件，我也见过很多倒计时片段，但这些都使用日期，我使用的不是日期而是毫秒。

谢谢。

编辑：我正在寻找一个从 xxxx 毫秒倒数到零的脚本

//直到现在我有这个

```
 diff  = 100000000;

    function showTimer() {

        hours = Math.floor( diff / (1000*60*60) );
        mins  = Math.floor( diff / (1000*60) );
        secs  = Math.floor( diff / 1000 );

        $('.count').html(hours+ 'hours' +minutes + 'minutes' +seconds + ' seconds');
    }

    setInterval(function(){showTimer()}, 1000 ); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T23:08:07.760

简单的数学。

1000 毫秒 = 1 秒。

60 秒 = 1 分钟。

60 分钟 = 1 小时。

因此，如果您有 123456789 毫秒，您将执行以下操作：

123456789 / 1000（秒），即 123456.789

123456.789 / 60（以分钟计），即 2,057.6

2,057.6 / 60（以小时计），即 34.29 小时。

然后使用余数 (.2935525) 并将其转换为分钟 - 即 17.61315

再次使用余数 (.61315) 并将其转换为秒...即 36.789

因此，简而言之，123456789 毫秒等于 34 小时 17 分 37 秒。

我相信你可以自己做 JavaScript 部分。

* * *

好吧，也许你需要更多帮助。

**演示**：http: [//jsbin.com/eqawam/edit#javascript,html,live](http://jsbin.com/eqawam/edit#javascript,html,live)

```
var millis = 123456789;

function displaytimer(){
    //Thank you MaxArt.
    var hours = Math.floor(millis / 36e5),
        mins = Math.floor((millis % 36e5) / 6e4),
        secs = Math.floor((millis % 6e4) / 1000);
        $('.count').html(hours+':'+mins+':'+secs);  
}

setInterval(function(){
    millis -= 1000;
    displaytimer();
}, 1000); 
```

此外，为了进一步阅读 - setInterval 可能会漂移。所以不要指望这是 100% 准确的。[setInterval 会漂移吗？](https://stackoverflow.com/questions/985670/will-setinterval-drift)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T23:08:00.053

我不确定你在问什么，但是...

```
var hours = Math.floor(millis / 36e5),
    mins = Math.floor((millis % 36e5) / 6e4),
    secs = Math.floor((millis % 6e4) / 1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T23:31:45.443

看看：[http ://code.google.com/p/jquery-countdown/](http://code.google.com/p/jquery-countdown/)

我用过这个。

在 Javascript 中，您可以执行以下操作

```
 $('#counter_2').countdown({
      image: 'img/digits.png',
      startTime: '10:59',
      timerEnd: function(){
        alert('The Time Limit for the quiz has expired. Click OK to submit quiz');
        $('#submit_quiz_form').submit(); 
      },
      format: 'mm:ss'
    }); 
```

您可以使用上面显示的功能获取时间...我需要在计时器结束时提交一个表单...如果需要您可以执行类似的操作

# xcode - 将计算值转换为十进制并保存到核心数据

> ID：11461974
> 
> 赞同：1
> 
> 时间：2012-07-12T23:02:51.733
> 
> 标签：xcode, core-data, casting

我是 iPhone 开发新手，所以这似乎是一个非常愚蠢的问题，但我怎样才能将计算值保存到核心数据中？

**背景** 这个程序只是根据用户输入到文本字段中的内容来计算一个值。我将它们的数据类型设置为 NSStrings，当保存到核心数据时，一切正常。我将 NSStrings 转换为浮点数并执行适当的数学运算，以得出最终的计算值。这个最终值不会输出到文本字段，而是保存在核心数据中。我一直在同一行上收到这两个错误：*“将'double'传递给不兼容类型'NSString *'的*参数和“从不兼容类型'double'分配给'NSString *'。（第 10 行是带有这些消息的行）

```
1     float dollar1 = [self.dataModel.price          floatValue];
2     float P1      = [self.dataModel.percentage     floatValue];
3     float dollar2 = [self.dataModel.price          floatValue];
4     float P2      = [self.dataModel.percentage2    floatValue];

5     float totalPrice = dollar1 + dollar2;
6     float totalPercentage = (P1 + P2) / 100;

7     double finalPrice = round(totalPrice / totalPercentage);

8     //Set final price to save in core data
9     NSLog(@"setting finalPrice to core data slot");
10    dataModel.finalPrice = finalPrice; 
```

*就在我发布此代码之前，我尝试将第 7 行更改为

`NSString finalPrice = totalPrice / totalPercentage;`

这导致第 10 行的上述错误消失，但在第 7 行导致错误：“接口类型无法静态分配。” 这一切都太令人困惑了。我不明白为什么我所有的其他文本字段都保存到核心数据中，但是这个计算出来的不会。你们能给我的任何帮助将不胜感激。:)

**编辑** 所以我现在实际上是从`NSLog(@"%@", dataModel.finalPrice);`我设置的那个中得到一个数字，但值是wayyyyy off。似乎数学没有正确完成：

```
1     int dollar1 = [self.dataModel.price          intValue];
2     int P1      = [self.dataModel.percentage     intValue];
3     int dollar2 = [self.dataModel.price2          intValue];
4     int P2      = [self.dataModel.percentage2    intValue];

5     int totalPrice = dollar1 + dollar2;
6     int totalPercentage = P1 + P2;

7     int finalPrice = totalPrice / ((double)totalPercentage);
8     NSDecimalNumber *finalFinalPrice = [[NSDecimalNumber alloc]initWithDouble:finalPrice];

9     //Set final price to save in core data
10     NSLog(@"setting finalPrice to core data slot");
11    dataModel.finalPrice = finalFinalPrice; 
```

我添加了这些 NSLogs 以查看保存到核心数据中的内容

```
NSLog(@"%@", dataModel.price);
NSLog(@"%@", dataModel.percentage);    
NSLog(@"%@", dataModel.price2);
NSLog(@"%@", dataModel.percentage2);
NSLog(@"%@", dataModel.finalPrice); 
```

一切似乎都可以保存，但是例如，如果我有：

```
3.62 = dollar1;
2.2  = P1;
5.30 = dollar2;
.21  = P2;
totalPrice = dollar1 + dollar2; <--this should equal 8.92
totalPercentage = P1 + P2; <--this should equal 2.41
finalPrice = totalPrice / totalPercentage; <--- this should equal 3.70 
```

然而，我对 NSLog 的输出显示值为 -2147483648。这到底是从哪里来的？

**编辑** 我把它保存了！这是我所做的：

```
1     NSString dollar1 = self.dataModel.price.text;
2     NSString P1      = self.dataModel.percentage.text;
3     NSString dollar2 = self.dataModel.price.text;
4     NSString P2      = self.dataModel.percentage2.text;   

5     double Dollar1 = [dollar1 doubleValue];
6     double Dollar2 = [dollar2 doubleValue];
7     double p1 = [P1 doubleValue];
8     double p2 = [P2 doubleValue];

9     double totalDollar = Dollar1 + Dollar2;
10      double totalP = p1 + p2;

11    double finalPrice = totalDollar / totalP;
      NSString *finalFinalPrice = [[NSString alloc] initWithFormat:@".2f", finalPrice];

12     //Set final price to save in core data
13     NSLog(@"setting finalPrice to core data slot");
14    dataModel.finalPrice = finalFinalPrice; 
```

哇。这真是太棒了。我不敢相信最终的解决方案如此简单！再次感谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:10:29.087

如果要将`float`值存储为`NSString`，请使用[`stringWithFormat:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/clm/NSString/stringWithFormat%3a)

```
...
double finalPrice = round(totalPrice / totalPercentage);
NSString *finalPriceString = [NSString stringWithFormat:@"%0.2f", finalPrice];

dataModel.finalPrice = finalPriceString; 
```

**编辑**

您的更正：

```
NSString finalPrice = totalPrice / totalPercentage; 
```

有一些问题。首先，错误`Interface type cannot be statically allocated`来自`NSString`s 需要动态分配（作为指针），并且您没有使用指针类型 ( `NSString *`)。

其次，`totalPrice`and`totalPercentage`是`float`值，您将它们划分并将它们设置为`NSString`，这是一种非常不同的数据类型。

# jquery - 如何关闭变量中的按钮？

> ID：11461977
> 
> 赞同：0
> 
> 时间：2012-07-12T23:03:07.050
> 
> 标签：jquery

我在下面有一段代码，其中包含来自 AZ 的 26 个按钮。每个按钮都可以打开和关闭。

```
<?php
    $a = range("A","Z");
?>

<?php
        $i = 1;
        foreach($a as $key => $val){
            if($i%7 == 1) echo"<tr><td>";
            echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";      
            if($i%7 == 0) echo"</td></tr>";
            $i++;
        }
    ?> 
```

下面是我试图打开和关闭正确按钮的代码，但问题是它没有关闭应该关闭的按钮。

```
var answers = '#answer'+btn;
$('.answers.answerBtnsOn').find('answerBtnsOn').addClass('answerBtnsOff'); 
```

现在，如果我将最后一行代码更改为以下代码：

```
$('.answerBtnsOn').find('answerBtnsOn').addClass('answerBtnsOff'); 
```

然后它可以工作，但问题是我所有的按钮都有“.answerBtnsOn”类，我只希望“answers”变量中的按钮在应该关闭的时候关闭。那么如何关闭“答案”变量中的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:06:19.470

如果你只想要里面的按钮`answers`，那么将它作为上下文传递给`$()`.

```
$('.answerBtnsOn', answers).addClass('answerBtnsOff'); 
```

# javascript - 使用 jQuery 在视图上格式化日期戳

> ID：11461981
> 
> 赞同：0
> 
> 时间：2012-07-12T23:03:20.947
> 
> 标签：javascript, jquery, html

我想在我的视图上显示一个日期戳。我想要的格式是 2012 年 7 月 12 日的“20120712”。

这是我到目前为止所拥有的，

```
$(function () {
    $(document).ready(function () {
        var now = new Date();
        var nowYear = now.getFullYear();
        var nowMonth = now.getMonth() + 1;
        var nowDate = now.getDate();

        var DateStamp = nowYear.toString() + nowMonth.toString() + nowDate.toString();

        $("#DateStamp").val(DateStamp);
    }); 
```

我能够显示：“2012712”，但我想显示月份和日期的前导零，用于单个数字月份和日期，例如“20120712”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:09:51.540

试试这个：**工作演示** [http://jsbin.com/awates/6](http://jsbin.com/awates/6)（观看警报）

`.slice(-2)` *您可以将“0”添加到*日期或月份，然后只要求最后两个，因为它们始终是我们想要的两个。`var nowMonth = ('0'+ (now.getMonth() + 1));`

好好读一读：[Javascript addleading zeros to date](https://stackoverflow.com/questions/3605214/javascript-add-leading-zeroes-to-date)

希望它符合原因，`:)`

*说明*：

为了解释，`.slice(-2)`给了我们字符串的最后两个字符。

因此，无论如何，您可以在日期或月份中添加“0”，然后只要求最后两个，因为它们始终是我们想要的两个。`var nowMonth = ('0'+ (now.getMonth() + 1));`

因此，如果 MyDate.getMonth() 返回 7，它将是：

`("0" + "7").slice(-2)`// 给我们“07”

**代码**

```
$(function () {
    $(document).ready(function () {
        var now = new Date();
        var nowYear = now.getFullYear();
        var nowMonth = ('0'+ (now.getMonth() + 1));
        var nowDate = now.getDate();
        alert(nowMonth);
        var DateStamp = nowYear.toString() + nowMonth.toString().slice(-2) + nowDate.toString();
    alert(DateStamp);
       // $("#DateStamp").val(DateStamp);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T23:15:42.137

我还没有测试过这段代码，但你也许可以做到以下几点：

```
function addZero(val){
var result;
if(val < 10){
    result = '0'+val;
} 
return result;
}

var nowDate = addZero(now.getDate()); 
```

# perl - 请帮助我理解“Programming Perl”书中的片段

> ID：11461985
> 
> 赞同：4
> 
> 时间：2012-07-12T23:03:59.213
> 
> 标签：perl, perl-context

我阅读了 Tom Christiansen、brian d foy、Larry Wall、Jon Orwant 的“Programming Perl”。以下是我没看懂的文字（具体看不懂的地方用粗体标出）：

> 您真正想知道的是哪些运算符为其操作数提供了哪些上下文。碰巧的是，您可以很容易地分辨出哪些提供列表上下文，因为**它们的句法描述中都有 LIST**。其他一切都提供标量上下文。一般来说，它非常直观。如有必要，您可以使用伪函数**将标量上下文强制到 LIST 中间的参数上**`scalar` 。Perl 没有提供在上下文中强制列表上下文的方法，因为在任何你想要列表上下文**的地方，它已经由**某些控制函数的 LIST 提供。

为方便起见，我想提出以下问题：

1.  片段中的**LIST**是什么意思？

2.  什么是**句法描述**？（似乎是某种文档）

3.  下一段文字是什么意思：

> 您可以**将标量上下文强制到 LIST 中间的参数上**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-12T23:17:17.943

这很简单，就像文字所说的那样。看看`perldoc -f print`例如：

```
print FILEHANDLE LIST
print FILEHANDLE
print LIST 
```

就像那里所说的那样，`print`采用 LIST 参数，这意味着之后发布的任何内容`print`都在列表上下文中。对于将参数表示为 LIST 的任何函数，它都是相同的。

使用该`scalar`函数，您可以覆盖此列表上下文，以便您的参数*不在*列表上下文中评估。例如，一个文件句柄 readline 语句，例如：

```
my $line = <$fh>; 
```

在标量上下文中求值，因为`$line`是标量。这意味着只读取一行并将其放入变量中。但是，如果您要这样做：

```
print <$fh>; 
```

readline 在列表上下文中，这意味着将读取文件中的所有剩余行。您可以通过将 readline 语句放在标量上下文中来覆盖它：

```
print scalar <$fh>; 
```

然后你只会读一行。更准确地说，您可以*在列表中间*强制执行标量上下文：

```
print @list, scalar <$fh>, @list2; 
```

这大概就是你的那句话中提到的。

# visual-studio - Visual Studio 2010 不同项目 不同视图

> ID：11461987
> 
> 赞同：1
> 
> 时间：2012-07-12T23:04:06.237
> 
> 标签：visual-studio

Visual Studio 2010 中是否有任何方法可以使用不同的项目类型查看不同的窗口和窗格？换句话说，如果您正在执行 Windows 应用程序，某些窗格会自动打开，但 ASP.NET 项目会打开不同的窗格，或者数据库项目会自动打开另一组窗格。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T23:19:48.670

并不真地。有一种方法可以将布局导出为您的偏好和设置的子集，然后在 VS 打开后重新导入，但我猜这会很耗时，并且可能会在几天后变旧。

我相信 VS 确实支持布局或视图的概念，因为例如，当您从开发模式进入调试模式时，它确实会在它们之间切换。因此，您必须弄清楚它是如何工作的，并可能使用宏将其自动化。我寻找了一些可以做到这一点的插件或插件，但并没有真正找到任何有用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T20:09:23.970

有一个[视觉工作室透视扩展](http://perspectives.codeplex.com/)可以做到这一点：

另外，请查看这个问题： [Visual Studio 中是否有类似 Eclipse Perspective 的东西？](https://stackoverflow.com/questions/3347452/is-there-anything-like-eclipse-perspective-in-visual-studio)

# ajax - Magento - 使用 AJAX 验证数据库中的电子邮件而不刷新

> ID：11461990
> 
> 赞同：0
> 
> 时间：2012-07-12T23:04:24.227
> 
> 标签：ajax, database, validation, magento, checkout

我是 Magento 的初学者，我有一个 QuickCheckout 表单，我需要在其中验证电子邮件字段。

当用户将电子邮件放在字段上时，我需要在数据库（表 customer_entity）中动态搜索电子邮件，无需刷新

我有使用 Ajax.Request 的代码，可用于验证使用正则表达式编写的电子邮件

```
function validar_email() { 
  local = "billing";

  var urlAjax = location.href;
  var validarUrl = /^https:\/\//;

  if ( urlAjax.match( validarUrl ) ) {
    urlAjax = '<?php echo Mage::getBaseUrl("link", true)."ajaxend/ajax" ?>';
  } else {
    urlAjax = '<?php echo $this->getUrl("ajaxend/ajax") ?>';
  }

  new Ajax.Request( urlAjax, {method: 'POST',
                parameters: 'email='+$(local+':email').value,
                evalScripts: true,
                onLoading: function(transport) {

                 $('load-email-'+local).innerHTML = 'Verificando E-mail';
                },
                onSuccess: function(transport) {

                                    var emailReg = /^[a-zA-Z0-9][a-zA-Z0-9\._-]+@([a-zA-Z0-9\._-]+\.)[a-zA-Z-0-9]{2}/;
                            var emailValido = 'E-mail Válido';
                            var emailInvalido = 'E-mail Inválido, digite outro';
                            if( !emailReg.test($(local+':email').value)){
                                $('load-email-'+local).innerHTML = emailInvalido;
                            } else {
                                $('load-email-'+local).innerHTML = emailValido;
                            }

                },
                onComplete: function(transport) {

                },

                onFailure: function() { /*document.getElementById("...").innerHTML = 'problemas...';*/ }

              });
} 
```

我做了两段代码在数据库中搜索：代码1：

```
$email = $_POST['email'];
$resource = Mage::getSingleton('core/resource');

    $readConnection = $resource->getConnection('core_read');

    $table = $resource->getTableName('customer_entity');

    $query = 'SELECT email FROM ' . $table . ' WHERE email = "'.$email.'";';

    $sku = $readConnection->fetchAll($query); 
```

代码 2（仅 PHP）：

```
$queryVerifEmail = '';
$queryVerifEmail .= ' SELECT email FROM customer_entity';
$queryVerifEmail .= ' WHERE email = "'.$email.'";';

$result = mysql_query($queryVerifEmail); 
```

```
if(mysql_num_rows($result) > 1){
  echo $email.' já existe na base!'; } else{ echo $email.'valido'; } 
```

我试图在该行中创建引用的 php 文件

```
new Ajax.Request( "getEmail.php?", {method: 'GET', 
```

没有任何效果，但是 Ajax.Request 是在 Magento 中无需刷新即可进行工作输入的唯一方法

我想要你知道的最好的解决方案，但我不想为它购买或安装新模块，我想要一个代码解决方案，使用 Ajax、JQuery 或 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T06:13:23.503

您可以使用 jQuery 自动完成来完成此任务 从 ajax 请求您可以从数据库中检索数据并转换为 json 数组并显示建议

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

# url.action - 如何将 javascript 变量转换为 URL.Action mvc 方法

> ID：11461994
> 
> 赞同：4
> 
> 时间：2012-07-12T23:04:47.287
> 
> 标签：url.action

```
onSelectRow: function(id) {
   document.location.href = '@Url.Action("EditEncounter", "EditEncounter", new { encounterId = "'<%:id%>'", popId = TempData["POPULATIONID"] })'
                            //new { encounterId = temp.EncounterId, popId = (int)TempData["POPULATIONID"] }
} 
```

如何在 sam hill 中将该 id 变量放入我的 Url.Action 方法中？

这就是我调试时正在查看的内容

```
document.location.href = '/EditEncounter/EditEncounter?encounterId=%40id&amp;popId=2' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T23:58:45.757

```
var dummyURL ='@Url.Action("EditEncounter", "EditEncounter", new { encounterId = -2, popId = TempData["POPULATIONID"] })';
                            var path =dummyURL.replace("-2", id);
                            debugger;
                            document.location.href = path; 
```

这似乎有效。

# jquery - 不选择多个ID

> ID：11461996
> 
> 赞同：0
> 
> 时间：2012-07-12T23:05:09.307
> 
> 标签：jquery

要选择除查询的特定 ID 之外的所有子项，这将起作用：

`$('.yourClass').children(':not(#idNotWanted)')`

您将如何选择其他不需要的 ID？

以下是迄今为止的一些尝试：

```
$('.yourClass').children(':not(#idNotWanted)' || ':not(#idNotWanted2)')
$('.yourClass').children(':not(#idNotWanted) || :not(#idNotWanted2)')
$('.yourClass').children(':not(#idNotWanted)' && ':not(#idNotWanted2)')
$('.yourClass').children(':not(#idNotWanted) && :not(#idNotWanted2)')` 
```

选择器查询是否需要分配给数组，然后删除 ID 案例？或者是其他东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T23:06:19.827

你可以这样做：

```
$('.yourClass').children(':not(#idNotWanted):not(#idNotWanted2)') 
```

或者，**更好的方法**，像这样：

```
$('.yourClass').children(':not(#idNotWanted, #idNotWanted2)') 
```

在选择器中用逗号分隔您的 ID `:not()`。从[文档中](http://api.jquery.com/not-selector/)；

> 内部接受所有选择器`:not()`，例如：`:not(div a)`和`:not(div,a)`。