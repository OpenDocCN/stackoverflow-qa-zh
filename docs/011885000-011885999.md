# StackOverflow 问答 11885000-11885999

# json - MVC4 模型绑定 - 空值

> ID：11885002
> 
> 赞同：0
> 
> 时间：2012-08-09T13:52:03.337
> 
> 标签：json, asp.net-mvc-4, asp.net-web-api

我知道已经有很多问题了 - 我很难找出哪些与版本问题有关，哪些与 jQuery（我没有使用）有关，等等。我有MVC4 RC (4.0.20505.0)，Visual Studio 2010 Ultimate SP1。

我的模型中有一个复杂的类型：

```
public HttpResponseMessage Post([FromUri]Person person)
    {
        TableStorageHelper personHelper = new TableStorageHelper();
        personHelper.Save(personHelper.GetTableNameForType("Person"), person);

        var response = Request.CreateResponse<Person>(HttpStatusCode.Created, person);
        return response;
    } 
```

我正在传递这个 JSON 字符串 - 主要使用 Fiddler，但也尝试从另一个控制器中的代码（尝试在本地进行所有测试只是为了验证我可以在控制器接收的对象中获取值）：

JSON：

```
{"FirstName":"Andy","LastName":"Schultz","PartitionKey":"USW","RowKey":"per-928c8f74-2efd-4fc2-a71c-fb3ea8acc6d7","NickName":null,"FullName":"Andy Schultz","Description":null,"ImageLocation":null,"Region":"USW","CommentsAboutMe":{"Comments":[]},"CommentsByMe":{"Comments":[]}} 
```

这里的所有属性都存在于类中。

来自另一个控制器的代码：

```
HttpWebRequest request = HttpWebRequest.Create("http://127.0.0.2:8080/api/persons/") as HttpWebRequest;
        request.Method = "POST";
        request.ContentType = "text/json";
        using (var writer = new StreamWriter(request.GetRequestStream()))
        {
            Person person = new Person("Andy", "Schultz", "USW");
            Formatting formatting = new Formatting();
            JsonSerializerSettings settings = new JsonSerializerSettings();
            settings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;
            string json = JsonConvert.SerializeObject(person, formatting, settings);

            writer.Write(json);
        } 
```

每次，我都会在我的控制器中得到一个空的 Person 对象（我正在那里的第一行进行调试）。每个值都是 NULL。

您可能已经注意到我的控制器上的 [FromUri] 属性 - 我必须这样做才能解决一个错误，告诉我没有未定义类型的 ModelBinder，但我不确定它是否正确 - 我没有传递任何Uri 中的信息，如您所知，它在正文中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:21:13.777

谢谢 Mike Stall：http: [//blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

[FromUri] 属性确实告诉我的控制器读取 uri 而不是请求正文为我的控制器方法寻找参数。它不存在，所以一切都是空的。

添加该属性已修复的错误，即没有为未定义的内容类型定义格式化程序，是由于我不正确地声明请求的内容类型引起的。正确的方法是“Content-Type: text/json; charset=utf-8

# c# - 使用字符串编码和解码电子邮件地址

> ID：11885004
> 
> 赞同：0
> 
> 时间：2012-08-09T13:52:15.157
> 
> 标签：c#, .net, encryption, encoding

我有 24 个字符长度的字符串。这是我们提供给客户以安装我们的软件的产品 ID。我需要从此字符串中获取电子邮件地址。我需要用这个字符串编码电子邮件地址并解码。有没有可能做到这一点？

我试图将电子邮件地址转换为字节数组并将其添加到产品 ID 字节数组中。但似乎产品id长度增加太多，解锁密钥长度不是标准格式。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:58:49.210

由于电子邮件地址可以超过 24 个字符，因此这是不可能的。（简单地说，你不能在 Y < X 字节中无损地编码 X 字节的信息）。

我建议采用不同的方法。

在您的办公室：

*   在您的许可数据库中，存储客户的电子邮件地址。
*   根据电子邮件地址和一些秘密值计算哈希码。这是您的激活码（您称之为“产品 ID”）。

在客户的 PC 上：

*   在安装过程中，让您的客户输入他的电子邮件地址和激活密钥。
*   让安装程序计算输入的电子邮件地址（加上密码）的哈希值，并将其与激活密钥进行比较。如果匹配，一切都很好。如果没有，则显示错误。

这可以让您的激活码保持简短，因为您只需要嵌入电子邮件地址的*哈希值。*当然，由于散列函数是不可逆的，您不能从散列中重新创建电子邮件地址；因此，有必要在安装过程中输入电子邮件地址。

# c++ - 多维数组的 C/C++ 数组

> ID：11885013
> 
> 赞同：0
> 
> 时间：2012-08-09T13:52:45.403
> 
> 标签：c++, c, arrays, pointers, multidimensional-array

我正在尝试创建一个由两个二维数组组成的数组，如下所示

给定

```
char twoDArr[2][3] =  {{'a','b','c'},  {'d','e','f'}}; 
```

你可以做

```
char (*twoDArrP)[3] = twoDArr; 
```

这会产生有效的结果：

```
cout << "twoDArr: " << twoDArr[1][2] << endl;
cout << "twoDArrP: " << twoDArrP[1][2] << endl; 
```

我的目标是创建另一个（静态）数组和/或指针，如下所示

```
char (**threeDArr)[3] = {twoDArr, twoDArr}; //doesn't compile 
```

这样我就可以访问它的值：

```
char val = threeDArr[0][1][2]; 
```

显然指数会有所不同

问题是声明 3D 数组的正确方法是什么，即 2D 数组的数组？

我已经使用这种情况搜索了一个示例，但我似乎找不到任何东西。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:14:21.953

一个数组

```
char (*twoDArrP)[3] 
```

大小为 2 的可以定义为：

```
char (*threeDArrP[2])[3] 
```

这不是很清楚（我什至不确定它是否完全正确）。请参阅[cdecl](http://cdecl.ridiculousfish.com/?q=char+%28%2athreeDArrP%5b2%5d%29%5b3%5d%3B)。

`typedef`是你的朋友：

```
typedef char (*twoDArrP_type)[3];

twoDArrP_type threeDArrP[2] = {twoDArr, twoDArr}; 
```

* * *

这个：

```
char (**threeDArr)[3] 
```

正如您所写，是指向数组指针的指针。不是指向二维数组的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:16:34.100

你需要

```
char (*threeDArr[2])[3] = {twoDArr, twoDArr}; 
```

对于您的解决方案，“最里面”的规范是`*`而不是数组。

# datatable - 在 YUI 数据表搜索中取消先前的请求

> ID：11885019
> 
> 赞同：0
> 
> 时间：2012-08-09T13:52:49.403
> 
> 标签：datatable, yui

我正在使用 YUI 数据表。当用户搜索任何内容并输入 1234 时，它会发送 4 个请求 1、2、3、4。如果来自服务器的响应很快，它工作正常，但在某些地方来自服务器的响应大约需要 30 秒。有时来自第 4 个请求的响应比第 3 个请求更早，并且表中的结果看起来非常不可预测。无论如何，YUI 是否提供了我可以取消以前对数据表的请求的地方，这样只有最后一个请求的结果才会显示在数据表中。

# emacs - 缓冲区的emacs颜色主题

> ID：11885020
> 
> 赞同：2
> 
> 时间：2012-08-09T13:52:57.503
> 
> 标签：emacs, buffer, org-mode, emacs23

我爱上了emacs。我不相信只要付出足够的努力，**就没有**什么是做不到的！

我已经安装了很好的**工作**脚本/扩展，可能与我的观点相关：

*   `org-mode`（使用名为“Journal”的 CAPTURE-TEMPLATE）
*   `color-theme`( [emacswiki](http://emacswiki.org/?ColorTheme) )
*   `theme-changer`( [github](https://github.com/hadronzoo/theme-changer) )
*   `color-theme-buffer-local`( [github](https://github.com/vic/color-theme-buffer-local) )

`emacs-version`：“2012-03-25 在roseapple 上的 GNU Emacs 23.3.1 (i686-pc-linux-gnu, GTK+ 版本 2.24.10)，由 Debian 修改”

什么已经正常工作当我通过我定义的快捷方式开始日记条目时，会发生以下情况：

*   emacs在新***窗口中打开一个新******缓冲区***（“CAPTURE-journal.org”）
**   我编辑它*   再次击键，条目将重新归档到我定义的 journal.org 文件中*   然后***缓冲区***和***窗口***会自动关闭*   我继续处理我之前工作过的文件*

 *我希望它另外做的事情：

*   “CAPTURE-journal.org”-新***窗口中的******缓冲区***应该有一个独特的颜色主题，让我们说*`color-theme-retro-orange`*

 *我[`.emacs`](http://txtup.net/8rlYr)的代码片段我认为应该是相关的。

我不知道如何处理这项任务。从哪里开始编辑？甚至上面列出的所有工具都需要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:01:02.133

从头开始：您需要一个带有颜色主题的列表

(setq my-themes (list "color-theme-retro-orange" "second-theme" "third...))

比你需要一个指针，存储最后使用的位置。请参阅 kill-ring-save 的 Emacs Lisp Intro 章节

完成后，将该函数绑定到一个合适的位置，从哪里打开缓冲区，分别。用OP提到的东西加载它。

或者创建一个次要模式，所有新缓冲区都将提供此模式。**

# c# - 在调用者调用的方法中处理流

> ID：11885021
> 
> 赞同：0
> 
> 时间：2012-08-09T13:52:57.627
> 
> 标签：c#, stream, dispose

我正在寻找一种处理一系列对象的好方法，所以问题出在 GetMessage 中，如果我使用底层流的 using 语句来创建附件...在方法 1 中，当我去发送邮件消息时附件的流已被处理，并将收到错误。如果我取消 using 语句，它可以找到但我没有正确处理 DataStream Dest。我最初的想法是在方法一中添加一个参数列表，每次调用 GetMessage 时我都可以将其添加到 Dest 中，并在方法末尾的方法 1 中通过列表来处理流。SendMessage 可以从批处理过程中循环调用，因此可能会创建许多流，我想将其留给调用者（SendMessage）来处理它们，而不是在 GetMessage 中，因为 SendMessage 是发送发生的地方，我需要确保消息在处理前已发送。有什么建议么？？？

```
 void sendMessage(MessageType type){
                   MailMessage m = Method2();
                   switch(type)
                   {
                      case type1:
                        m = Object1().GetMessage(param1)
                      case type2:
                        m = Object2().GetMessage(param1, param2)
                      case type3:
                        m = Object3().GetMessage(param1)
                      case type4:
                        m = Object4().GetMessage(param1, param2, param3)
                      case NewType5:
                        m = NewType5().GetMessage(param1, param2)
                   }
                   // this method does the send cause it has the mailmessage
                   m.Send();
                }

                class NewType5()
                {
                MailMessage GetMessage(){

                    // used to be 
                    // using (var Dest = new DataStream(true)){ .... }
                    DataStream Dest = new DataStream(true);

                    // code that reads info into the stream

                    // Go back to the start of the stream
                    Dest.Position = 0;

                    // Create attachment from the stream
                    Attachment mailattachement = new Attachment(Dest, contentType);

                    //Create our return value
                    var message = new MailMessage();
                    message.To.Add(UserInfo.UserDetail.Email);
                    message.Subject = "P&L Data View - " + DateTime.Now.ToString();
                    message.Attachments.Add(mailattachement);
                    return message;
               }
             } 
```

要将发送移动到 GetMessage，我必须更改所有其他对象上的所有其他对象实现。我宁愿让 send message 处理 newtype5 的处理，因为从批处理过程中它可以被调用 500 次。这是否使示例更加清晰。Send Message 已经被编写了一个实现，针对的是具有 GetMessage 实现的其他几个对象。我的恰好使用了一个流，在发送之前我无法处理流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:57:25.387

我建议您在 Method2 中执行 MailMessage.Send；使用您提供的代码，似乎没有任何理由在调用方法中这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:08:24.233

为什么不把它变成 meth2: 的参数？

```
 void method1(){
               using (var Dest = new DataStream(true))
               {
                   MailMessage m = Method2(Dest);
                   .....
                   m.Send();
               }
            }

            MailMessage Method2(Stream Dest){

                // code that reads info into the stream

                // Go back to the start of the stream
                Dest.Position = 0;

                // Create attachment from the stream
                Attachment mailattachement = new Attachment(Dest, contentType);

                //Create our return value
                var message = new MailMessage();
                message.To.Add(UserInfo.UserDetail.Email);
                message.Subject = "P&L Data View - " + DateTime.Now.ToString();
                message.Attachments.Add(mailattachement);
                return message;
           } 
```

您的 Message.Send() 方法是异步的吗？你想并行发送吗？

# java - Eclipse 警告 - 类是原始类型。对泛型类的引用 应该参数化

> ID：11885022
> 
> 赞同：5
> 
> 时间：2012-08-09T13:52:57.960
> 
> 标签：java, generics

```
import java.util.ArrayList;

public class ListOfClasses
{

    private ArrayList<Class> classes;

    public ArrayList<Class> getClasses() 
    {
        return classes;
    }

    public void setClasses(ArrayList<Class> classes) 
    {
        this.classes = classes;
    }
} 
```

为此，我在 eclipse 中收到以下警告-

> 类是原始类型。对泛型类的引用应该被参数化

这是在[较早的问题](https://stackoverflow.com/questions/1372595/class-is-a-raw-type-references-to-generic-type-classt-should-be-parameterized)中提出的，但答案是特定于 Spring 框架的。但是即使与 Spring 没有任何关系，我也会收到此警告。那么问题是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T13:56:46.137

我怀疑它抱怨 Class 是原始类型。你可以试试

```
private List<Class<?>> classes; 
```

或取消此特定警告。

在这种情况下，我会忽略警告。我也会考虑使用防御副本。

```
private final List<Class> classes = new ArrayList<>();

public List<Class> getClasses() {
    return classes;
}

public void setClasses(List<Class> classes) {
    this.classes.clear();
    this.classes.addAll(classes);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:56:18.030

尝试

```
public class ListOfClasses
{

    private ArrayList<Class<?>> classes;

    public ArrayList<Class<?>> getClasses() 
    {
        return classes;
    }

    public void setClasses(ArrayList<Class<?>> classes) 
    {
        this.classes = classes;
    }
} 
```

类也是参数化类型，如果您不声明类型参数，则会收到警告，要求您在需要参数化类型的地方使用原始类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T06:04:17.173

问题是你不能说任何关于返回类的类型。这个警告不是很有用。由于您不知道它是哪种类型的类，因此您不能向它添加类型参数。如果你这样做：

```
public  Class<? extends Object> getClasses {} 
```

你不会让它变得更好，因为除了原语之外，Java 中的所有东西都扩展了 Object。我忽略了这些提示，或者将它们关闭。

# c - C指针：数组变量

> ID：11885027
> 
> 赞同：3
> 
> 时间：2012-08-09T13:53:12.247
> 
> 标签：c, arrays, pointers

我在我的书中读到了这一点（以及互联网上的许多资源）：

> 数组变量**指向**数组中的第一个元素。

如果这是真的，那么数组变量和第一个元素是**不同**的。对？

这意味着通过以下代码，它将产生两种不同的结果：

```
int main(){
    char msg[] = "stack over flow";
    printf("the store string is store at :%p\n",&msg);
    printf("First element: %p\n",&msg[0]);
} 
```

但是对于这两种情况，我收到了相同的结果。所以，通过这个例子，我想我们应该说：数组变量**是**第一个元素。（因为它有相同的地址）

我不知道这是对还是错。请教我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T13:56:23.970

数组变量表示数组占用的整个内存块，而不仅仅是数组的第一个元素。所以`array`与( cf. )**不同。**但是数组的第一个元素与数组本身位于相同的内存地址。`array[0]``sizeof array / sizeof array[0]`

说数组指向第一个元素也是不正确的，在大多数情况下，数组表达式会衰减为指向其第一个元素的指针，但它们是不同的东西（再次参见`sizeof`例如）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T13:55:44.303

它们指向相同的地址，即`printf`显示相同的值但它们具有不同的类型。

*   `&msg`is的类型`char(*)[16]`，指向 char 数组 16 的指针
*   `&msg[0]`is的类型`char *`，指向 char的指针

一个便宜的测试方法是做一些指针运算。尝试打印`&msg + 1`。

这个[C 常见问题解答](http://c-faq.com/aryptr/aryvsadr.html)可能很有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-09T13:57:10.433

数组变量**是**整个数组。它**衰减**为指向数组第一个元素的指针。

如果您查看类型：

*   `msg`是类型`char [16]`
*   `&msg`是类型`char (*)[16]`
*   `&msg[0]`是类型`char *`

因此，在`msg`可以衰减为数组的上下文中，例如当作为参数传递时，它的值将等于`&msg[0]`.

让我画这个：

```
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+--+
|s|t|a|c|k| |o|v|e|r| |f|l|o|w|\0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+--+ 
```

想象一下这个数组的起点，它所在`'s'`的位置是 address `0x12345678`。

*   `msg`本身，指的是整个 16 字节的内存。就像你说`int a;`的，`a`是指 4 个字节的内存。
*   `msg[0]`是那 16 个字节的第一个字节。
*   `&msg`是数组开始的地址：`0x12345678`
*   `&msg[0]`是数组第一个元素的地址：`0x12345678`

这就是为什么 和 的值`&msg`相同`&msg[0]`，但它们的类型不同的原因。

现在的问题是，`msg`它本身并不是*一等公民*。例如，您不能分配数组。这就是为什么在大多数情况下，数组会*衰减*为它的指针。

如果你知道函数指针，这非常相似：

```
int array[10];
int function(int); 
```

*   在`int *var = array`,`array`衰减到一个指针 ( `&array`)
*   在`void *var = function`,`function`衰减到一个指针 ( `&function`)

请注意，对于函数指针，我们希望保留类型，因此我们编写：

```
int (*var)(int) = function; 
```

同样，您可以使用数组：

```
int (*var)[10] = array; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T14:01:18.007

```
char myChar = 'A'
char msg[] = 'ABCDEFGH' 
```

当您键入**myChar**时，您将获得价值。但是使用**msg**你会得到指向第一个字符的指针（对于你必须使用 msg[x] 的值）

```
msg = &msg[0] 
```

我想这可以帮助你理解。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T14:02:13.813

这样看：

```
&msg = 0x0012
&msg[0] = 0x0012
&msg[1] = 0x0013 
```

在这种情况下`&msg[1]`是指向`msg+1`。当您引用`&msg`或`&msg[0]`引用相同的内存地址时，因为这是指针开始的地方。增加数组变量将使指针增加 +1，因为 char 变量的大小只有 1 个字节。

如果你用一个整数做同样的技巧，你会将指针增加 +4 个字节，因为整数的大小是 4 个字节。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-09T14:32:11.443

当您使用数组表达式时，编译器会将其转换为指向第一个元素的指针。这是 1999 年 C 标准在 6.3.2.1 3 中指定的显式转换。这对您来说很方便，因此您不必编写`&array[0]`来获取指向第一个元素的指针。

转换发生在所有表达式中，除非数组表达式是操作数`sizeof`或一元`&`或用于初始化数组的字符串文字。

`sizeof array`通过打印和可以看到一个数组和它的第一个元素是不同的`sizeof array[0]`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-09T14:42:43.060

在大多数情况下，数组类型的*表达式*（“N-element array of `T`”）将被 / 转换为 /“衰减”为指针类型的表达式（“指针`T`”），表达式的*值*将是数组中第一个元素的地址。

所以，假设声明

```
int a[10]; 
```

表达式的类型`a`是“10 元素数组`int`”，或者`int [10]`。但是，在大多数情况下，表达式的类型将被转换为“指向的指针`int`”或`int *`，并且表达式的值将等价于`&a[0]`。

此规则的例外情况是数组表达式是一元运算符`sizeof`或一元运算符的操作数`&`，或者是用于在声明中初始化另一个数组的字符串文字。

因此，根据我们上面的声明，以下所有内容都是正确的：

```
  表达式类型衰减为值
  ---------- ---- --------- -----
           a int [10] int * a 的第一个元素的地址
          &a int (*)[10] n/a 数组的地址，即
                                            和第一个地址一样
                                            元素
       &a[0] int * n/a a 的第一个元素的地址
          *a int n/a [0] 的值
    sizeof a size_t n/数组中的字节数
                                            (10 * sizeof (int))
   sizeof &a size_t n/指针中的字节数
                                           一个整数数组
   sizeof *a size_t n/int 中的字节数
sizeof &a[0] size_t n/指向 int 的指针中的字节数

```

请注意，表达式`a`、`&a`和`&a[0]`都具有相同的*值*（ 的第一个元素的地址`a`），但类型不同。类型很重要。假设如下：

```
int a[10];
int *p = a;
int (*pa)[10] = &a; 
```

`p`和都`pa`指向 的第一个元素`a`，我们假设它位于 address `0x8000`。执行行后

```
p++;
pa++; 
```

但是，`p`指向下一个*整数*（`0x8004`，假设 4 字节`int`s），而`pa`指向下一个*10 元素整数数组*；即`a`( `0x8028`) 的最后一个元素之后的第一个整数。

# c++ - 创建我的游戏类的静态单例会引发链接器错误 2001？

> ID：11885032
> 
> 赞同：1
> 
> 时间：2012-08-09T13:53:27.417
> 
> 标签：c++, static, singleton, linker-errors

链接器错误消息“private: static class Worlds::Game * Worlds::Game::instance”
以下是与错误相关的代码段。

来自 Game.h

```
static Worlds::Game* instance;
static Worlds::Game* getInstance(); 
```

来自 Game.cpp

```
Worlds::Game* instance = 0;

Worlds::Game* Worlds::Game::getInstance()
{
    if (instance)
    {
        return instance;
    }
    else
    {
        return instance = new Worlds::Game();
    }
} 
```

所以我的问题是为什么我会收到这个错误，因为我应该涵盖所有基础来创建我的游戏类的单例？

编辑：

我忘了在 Game.cpp 中添加我的所有 Glut 回调，它们需要调用 Game 中执行某些操作的函数。

```
void onKeyDownCallback(unsigned char key, int mouseX, int mouseY)
void onKeyUpCallback(unsigned char key, int mouseX, int mouseY)
void timerCallback(int value)
void onWindowReshapeCallback(int w,int h)
void onMouseClickedCallback(int button, int state, int mouseX, int mouseY)
void onMouseMovedCallback(int deltaX, int deltaY)
void displayCallback() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:58:25.750

`static Worlds::Game* instance;`- 从标题中删除它。因为`instance`被标记`static`，所以每个翻译单元都会复制它。你得到的实例与翻译的单位一样多。但是你只在一个翻译单元中初始化它

还可以考虑以`singleton`这种方式实现：

```
Worlds::Game & Worlds::Game::getInstance()
{ 
    static Game instance;
    return instance;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:58:48.403

在 C++`static`中关键字有两种含义。

在类中使用时，它表示“静态变量”或“静态方法”，可以在没有对象实例的情况下调用。

但是，当在类主体之外使用时，在代码文件的根空间，含义发生了**变化**。在这种情况下，使用普通的旧 C 含义：标有“静态”的符号被隐藏，无法被其他模块链接。

这意味着，如果您像这样定义了 .h 文件，并且在几个 .cpp 模块中 #include 了该 .h 文件，那么**其他模块**将不会看到“instance”或“getInstance”实现。

从根代码范围中删除“静态”就可以了。

# java - 使用 super csv 用 Ja va 写回 csv

> ID：11885034
> 
> 赞同：1
> 
> 时间：2012-08-09T13:53:46.280
> 
> 标签：java, csv, file-io, supercsv

我已经在这段代码上工作了很长一段时间，如果我走上了死胡同，我只想得到简单的提醒。我现在的重点是从不同的 .csv 文件中匹配相同的单元格并将一行复制到另一个 csv 文件中。问题真的是是否可以在特定行写，例如，如果 2 个单元格在第 50 行匹配，我希望写回第 50 行。我假设我可能会将所有内容提取到哈希图中，将其写入然后写回.csv文件？有没有更简单的方法？

例如，我有一个包含人员详细信息的 Csv，而另一个具有实际人员居住地的财产详细信息，我希望将财产详细信息复制到人员 csv，并将它们与正确的人员详细信息相匹配。希望这是有道理的

```
public class Old {
 public static void main(String [] args) throws IOException
 {
   List<String[]> cols;
   List<String[]> cols1;

   int row =0;
   int count= 0;
   boolean b;
   CsvMapReader Reader = new CsvMapReader(new FileReader("file1.csv"), CsvPreference.EXCEL_PREFERENCE);
   CsvMapReader Reader2 = new CsvMapReader(new FileReader("file2.csv"), CsvPreference.EXCEL_PREFERENCE);

   try {
       cols = readFile("file1.csv");
       cols1 = readFile("fiel2.csv");
       String [] headers = Reader.getCSVHeader(true);

       headers = header(cols1,headers          

           } catch (IOException e) {
       e.printStackTrace();
       return;
   }

   for (int j =1; j<cols.size();j++) //1
   {
       for (int i=1;i<cols1.size();i++){
           if (cols.get(j)[0].equals(cols1.get(i)[0]))
           {

           }
       }

   }

}

private static List<String[]> readFile(String fileName) throws IOException
{
   List<String[]> values = new ArrayList<String[]>();
   Scanner s = new Scanner(new File(fileName));
   while (s.hasNextLine()) {
       String line = s.nextLine();
       values.add(line.split(","));
   }
   return values;
}
public static void csvWriter (String fileName, String [] nameMapping ) throws FileNotFoundException
{
    ICsvListWriter writer = new CsvListWriter(new PrintWriter(fileName),CsvPreference.STANDARD_PREFERENCE);
    try {
        writer.writeHeader(nameMapping);

    } catch (IOException e) {

        e.printStackTrace();
    }

}
public static String[] header(List<String[]> cols1, String[] headers){
    List<String> list = new ArrayList<String>();
    String [] add;
    int count= 0;
    for (int i=0;i<headers.length;i++){
        list.add(headers[i]);
    }

    boolean c;
    c= true;
    while(c)        {           
        add = cols1.get(0);
        list.add(add[count]);
        if (cols1.get(0)[count].equals(null))// this line is never read errpr
        {               
            c=false;
            break;
        } else  
        count ++;

    }

    String[] array = new String[list.size()];
    list.toArray(array);
    return array;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:32:22.320

从您的评论来看，您似乎有以下情况：

*   文件 1 包含人员
*   文件 2 包含地址

然后，您希望通过某个键（一个或多个字段）匹配人员和地址，并将组合写回 CSV 文件。

因此，最简单的方法可能是这样的：

```
//use a LinkedHashMap to preserve the order of the persons as found in file 1
Map<PersonKey, String[]> persons = new LinkedHashMap<>();
//fill in the persons from file 1 here

Map<PersonKey, String[]> addresses = new HashMap<>();
//fill in the addresses from file 2 here

List<String[]> outputLines = new ArrayList<>(persons.size());    
for( Map.Entry<PersonKey, String[]> personEntry: persons.entrySet() ) {
  String[] person = personEntry.getValue();
  String[] address = addresses.get( personEntry.getKey() );

  //merge the two arrays and put them into outputLines
}

//write outputLines to a file 
```

请注意，如果您可以通过一个字段匹配人员和地址，则`PersonKey`可能只是一个`String`或一个包装对象（等）。`Integer`如果您有更多字段，您可能需要一个自定义`PersonKey`对象`equals()`并`hashCode()`正确覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:13:15.413

如果您首先将所有地址和人员详细信息读入内存（正如 Thomas 建议的那样），请小心 - 如果您只处理小型 CSV 文件，那很好，但如果您正在处理，您可能会耗尽内存较大的文件。

作为替代方案，我整理了一个示例，该示例首先读取地址，然后在读取人员详细信息时写入组合的人员/地址详细信息。

只需注意几点：

*   我使用过 CsvMapReader 和 CsvMapWriter 因为你是 - 这意味着我必须使用包含 Map 的 Map 来存储地址。使用 CsvBeanReader/CsvBeanWriter 会使这更加优雅。

*   您问题中的代码实际上并未使用 Super CSV 来读取 CSV（您正在使用`Scanner`and `String.split()`）。如果您的 CSV 在数据中包含逗号（地址很可能），您会遇到问题，因此使用 Super CSV 会更安全，它会为您处理转义的逗号。

例子：

```
package example;

import java.io.StringReader;
import java.io.StringWriter;
import java.util.HashMap;
import java.util.Map;

import org.supercsv.io.CsvMapReader;
import org.supercsv.io.CsvMapWriter;
import org.supercsv.io.ICsvMapReader;
import org.supercsv.io.ICsvMapWriter;
import org.supercsv.prefs.CsvPreference;

public class CombiningPersonAndAddress {

    private static final String PERSON_CSV = "id,firstName,lastName\n"
            + "1,philip,fry\n2,amy,wong\n3,hubert,farnsworth";

    private static final String ADDRESS_CSV = "personId,address,country\n"
            + "1,address 1,USA\n2,address 2,UK\n3,address 3,AUS";

    private static final String[] COMBINED_HEADER = new String[] { "id",
            "firstName", "lastName", "address", "country" };

    public static void main(String[] args) throws Exception {

        ICsvMapReader personReader = null;
        ICsvMapReader addressReader = null;
        ICsvMapWriter combinedWriter = null;
        final StringWriter output = new StringWriter();

        try {
            // set up the readers/writer
            personReader = new CsvMapReader(new StringReader(PERSON_CSV),
                    CsvPreference.STANDARD_PREFERENCE);
            addressReader = new CsvMapReader(new StringReader(ADDRESS_CSV),
                    CsvPreference.STANDARD_PREFERENCE);
            combinedWriter = new CsvMapWriter(output,
                    CsvPreference.STANDARD_PREFERENCE);

            // map of personId -> address (inner map is address details)
            final Map<String, Map<String, String>> addresses = 
                    new HashMap<String, Map<String, String>>();

            // read in all of the addresses
            Map<String, String> address;
            final String[] addressHeader = addressReader.getCSVHeader(true);
            while ((address = addressReader.read(addressHeader)) != null) {
                final String personId = address.get("personId");
                addresses.put(personId, address);
            }

            // write the header
            combinedWriter.writeHeader(COMBINED_HEADER);

            // read each person
            Map<String, String> person;
            final String[] personHeader = personReader.getCSVHeader(true);
            while ((person = personReader.read(personHeader)) != null) {

                // copy address details to person if they exist
                final String personId = person.get("id");
                final Map<String, String> personAddress = addresses.get(personId);
                if (personAddress != null) {
                    person.putAll(personAddress);
                }

                // write the combined details
                combinedWriter.write(person, COMBINED_HEADER);
            }

        } finally {
            personReader.close();
            addressReader.close();
            combinedWriter.close();
        }

        // print the output
        System.out.println(output);

    }
} 
```

输出：

```
id,firstName,lastName,address,country
1,philip,fry,address 1,USA
2,amy,wong,address 2,UK
3,hubert,farnsworth,address 3,AUS 
```

# tsql - 有效地应用两个 SQL Server 表之间的差异

> ID：11885037
> 
> 赞同：1
> 
> 时间：2012-08-09T13:53:52.160
> 
> 标签：tsql, sql-server-2008-r2

我有一个每天一次的摄取案例，其中我将通过 FTP 获取一个大文件，其中包含 4 个数据库表的最新版本。

**对于每张桌子，我想：**

1.  截断暂存数据库中的表
2.  将 FTP 文件 BCP 到该表中
3.  查找暂存表和生产表之间的差异 (IUD)
4.  将任何所需的宫内节育器制作到生产表中，使其与临时表匹配

我确信这是一个相当普遍的问题，但我不能 100% 确定解决它的最佳方法。

是否有针对此类问题的任何内置 T-SQL 功能，还是我只需要进行各种连接来查找插入/更新/删除的记录并手动执行它们？我确信我可以通过第二种方式做到这一点，但是任何建议都非常感谢（不寻找工作代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:53:53.620

由于没有人将其作为真正的答案，因此 Mikael Eriksson 在评论中提到的 MERGE 命令是正确的方法，效果很好。

这是一个简单的示例用法：

```
MERGE dbo.DimProduct AS Target
USING (SELECT ProductID, ProductName, ProductColor, ProductCategory FROM dbo.StagingProduct) AS Source
ON (Target.ProductID = Source.ProductID)
WHEN MATCHED THEN
    UPDATE SET Target.ProductName = Source.ProductName
WHEN NOT MATCHED BY TARGET THEN
    INSERT (ProductID, ProductName, ProductColor, ProductCategory)
    VALUES (Source.ProductID, Source.ProductName, Source.ProductColor, Source.ProductCategory)
OUTPUT $action, Inserted.*, Deleted.*; 
```

来自： http: [//www.bidn.com/blogs/bretupdegraff/bidn-blog/239/using-the-new-tsql-merge-statement-with-sql-server-2008](http://www.bidn.com/blogs/bretupdegraff/bidn-blog/239/using-the-new-tsql-merge-statement-with-sql-server-2008)

这对我有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:26:47.050

RedGate 的 SQL Compare 产品具有自动化功能。

[http://downloads.red-gate.com/HelpPDF/ContinuousIntegrationForDatabasesUsingRedGateSQLTools.pdf](http://downloads.red-gate.com/HelpPDF/ContinuousIntegrationForDatabasesUsingRedGateSQLTools.pdf)

（我与 redgate 无关。我什至不太喜欢他们的产品，但它似乎适合这种情况）

# php - PHP SQLSRV Sql Azure，向 sqlsrv_query 传递了一个无效参数

> ID：11885040
> 
> 赞同：1
> 
> 时间：2012-08-09T13:54:11.683
> 
> 标签：php, azure-sql-database

我正在尝试从 PHP 应用程序到 sql azure 进行简单的选择查询。但它总是会产生相同的错误。向 sqlsrv_query 传递了无效参数。我已经通过 web 角色部署了我的 php 应用程序，并使用 windows PI。我从 phpinfo() 中得到了什么；显示sqlsrv已经加载，php是5.3.13但是不知道是哪个版本。这是查询

```
 $login_query = "SELECT * FROM admins WHERE username = ? and password = ?";

 $params = array($username, $salted);

 $login_result = sqlsrv_query($conn, $login_query, $params);

 if ($login_result == false){
     //die(mysql_error());  commented
     echo $username;

     echo $password;

     echo "Errors:";
     die( print_r( sqlsrv_errors(), true));
} 
```

# azure - 定价和升级 Azure 共享网站到保留模式

> ID：11885049
> 
> 赞同：2
> 
> 时间：2012-08-09T13:54:31.053
> 
> 标签：azure

我有两个网站都在 Windows Azure 中以共享模式运行。我只想将其中一个更新为*保留模式*，但不幸的是，当我尝试这样做时，它说它需要将所有网站升级到保留模式。

![Windows Azure 保留模式](../Images/d48f77fc4192f040425963fa48449187.png)

这不是一个真正的问题，但我的问题是 - 我会为一个或两个预留实例付费吗？是否将两个站点都放在一个保留实例上？如果是这样，这对定价有何影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:57:01.457

您的两个共享网站都将使用 1 个预留实例，因此您只需为 1 个预留实例付费。

# scala - Play framework 2.0：使用属性值创建验证错误消息

> ID：11885051
> 
> 赞同：1
> 
> 时间：2012-08-09T13:54:47.627
> 
> 标签：scala, playframework, validation

使用 scalaforms 作为游戏框架，假设我有如下形式：

```
case class User(name: String, emails: List[String])

val userForm = Form(
    mapping(
        "name" -> text,
        "emails" -> list(text).verifying("Emails are duplicated",x => SomeFunctionThatHandlesDuplicateEmails(x))
    )(User.apply, User.unapply)
  ) 
```

`SomeFunctionThatHandlesDuplicateEmails`如果表单中收到的任何电子邮件已经在数据库中，则返回 false 的函数在哪里（因此，使该字段无效）。

那么，我的问题是：

有没有办法使用验证字段的值来创建错误消息？我想告诉用户哪些电子邮件特别是重复的，而不仅仅是告诉他们“电子邮件重复”，如上所示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:15:41.507

verifying() 需要一系列[Constraint[T]](http://www.playframework.org/documentation/api/2.0.2/scala/index.html#play.api.data.validation.Constraint)。

[您可以在此处](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/data/validation/Validation.scala)查看实现的约束示例。

请注意，每个中的验证函数都会接收要验证的值，例如下面重复的“min”约束中的“o”：

```
 def min(minValue: Int): Constraint[Int] = Constraint[Int]("constraint.min", minValue) { o =>
   if (o >= minValue) Valid else Invalid(ValidationError("error.min", minValue))
 } 
```

这很容易是：

```
 def min(minValue: Int): Constraint[Int] = Constraint[Int]("constraint.min", minValue) { o =>
   if (o >= minValue) Valid else Invalid(ValidationError("error.min", minValue, o))
 } 
```

这将使错误消息格式化程序可以使用“o”作为 {1}（minValue 为 {0}）。

# cuda - CUDPP 2.0 是否为 CUDA 4.2、Nsight 2.2 中的 Nsight 调试实例正确调试？

> ID：11885052
> 
> 赞同：0
> 
> 时间：2012-08-09T13:54:48.260
> 
> 标签：cuda, visual-studio-debugging

我已经将一个项目从 CUDA 4.0、Nsight 2.0 升级到 CUDA 4.2、Nsight 2.2，在 CUDA 4.2 上重新编译 CUDPP。升级后我可以正确使用断点和步进设备代码，但是当我的代码调用 cudppScan() 函数时，即使该函数正确执行操作并返回值的正确前缀和，Nsight 也会报告访问冲突。在没有 Nsight 的情况下运行的发布或调试代码不会出现问题。该问题可以通过以下代码段重现。

```
#include <cassert>
#include <cudpp/cudpp.h>

//Cudpp testing
int main(int argc, char* argv[])
{
#define ARRAY_SIZE 32

unsigned int uiArraySize = sizeof(unsigned int)*ARRAY_SIZE;
unsigned int h_auiTest[ARRAY_SIZE];
for(int i = 0 ; i < ARRAY_SIZE ; ++i)
{
    h_auiTest[i] = 1;
}

unsigned int *d_auiTest;
GPUMALLOC((void**)&d_auiTest , uiArraySize);
TOGPU(d_auiTest , h_auiTest , uiArraySize);

unsigned int *d_auiOut;
GPUMALLOC((void**)&d_auiOut , uiArraySize);

CUDPPHandle cudppContext;
CUDPPHandle scanPlan;

CUDPP_SAFE_CALL(cudppCreate(&cudppContext));
CUDPPConfiguration scanConfig;
scanConfig.algorithm = CUDPP_SCAN;
scanConfig.datatype  = CUDPP_UINT;
scanConfig.op        = CUDPP_ADD;
scanConfig.options   = CUDPP_OPTION_EXCLUSIVE | CUDPP_OPTION_FORWARD;

cudppPlan(cudppContext , &scanPlan, scanConfig, ARRAY_SIZE , 1, 0);

cudppScan(scanPlan, d_auiOut, d_auiTest , ARRAY_SIZE);

FROMGPU(h_auiTest , d_auiOut , uiArraySize);

for(int i = 0 ; i < ARRAY_SIZE ; ++i)
{
    assert(h_auiTest[i] == i);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:22:18.403

我为这个问题得到的唯一解决方案是将我的项目降级到 CUDA 4.0。

# objective-c - 循环和便捷方法是否会导致 ARC 出现内存峰值？

> ID：11885053
> 
> 赞同：13
> 
> 时间：2012-08-09T13:54:49.877
> 
> 标签：objective-c, memory-management, nsstring, automatic-ref-counting, instruments

我正在使用 ARC 并在循环中修改字符串时看到一些奇怪的行为。

在我的情况下，我使用 NSXMLParser 委托回调进行循环，但我使用演示项目和示例代码看到了相同的确切行为和症状，这些代码只是修改了一些`NSString`对象。

您可以[从 GitHub 下载演示项目](https://github.com/MosheBerman/loopy-leaky-peaky-loops)，只需在主视图控制器的方法中取消注释四个方法调用之一`viewDidLoad`即可测试不同的行为。

为简单起见，这里有一个简单的循环，我将它放入一个空的单视图应用程序中。我将此代码直接粘贴到`viewDidLoad`方法中。它在视图出现之前运行，因此在循环完成之前屏幕是黑色的。

```
NSString *text;

for (NSInteger i = 0; i < 600000000; i++) {

    NSString *newText = [text stringByAppendingString:@" Hello"];

    if (text) {
        text = newText;
    }else{
        text = @"";
    }
} 
```

以下代码也一直在消耗内存，直到循环完成：

```
NSString *text;

for (NSInteger i = 0; i < 600000000; i++) {

    if (text) {
        text = [text stringByAppendingString:@" Hello"];
    }else{
        text = @"";
    }
} 
```

下面是这两个循环在 Instruments 中的循环方式，Allocations 工具正在运行：

![分析重复字符串操作的仪器](../Images/7ad3f3f04299ea509f6ff3d91306c819.png)

看？逐渐稳定的内存使用，直到一大堆内存警告然后应用程序自然而然地死掉。

接下来，我尝试了一些不同的东西。我使用了一个实例`NSMutableString`，如下所示：

```
NSMutableString *text;

for (NSInteger i = 0; i < 600000000; i++) {

    if (text) {
        [text appendString:@" Hello"];
    }else{
        text = [@"" mutableCopy];
    }
} 
```

此代码似乎执行得更好，但仍然崩溃。看起来是这样的：

![NSMutableStrings 是配置文件](../Images/e690d8ef0dd378cb8e1cc776393c5f95.png)

接下来，我在一个较小的数据集上进行了尝试，以查看任一循环是否可以在构建过程中存活足够长的时间以完成。这是`NSString`版本：

```
NSString *text;

for (NSInteger i = 0; i < 1000000; i++) {

    if (text) {
        text = [text stringByAppendingString:@" Hello"];
    }else{
        text = @"";
    }
} 
```

它也崩溃了，生成的内存图看起来类似于使用以下代码生成的第一个：

![NSString 再次崩溃](../Images/da7d65cc38e522172359fb7b81e463bd.png)

使用`NSMutableString`，同样的百万次迭代循环不仅成功，而且在更短的时间内完成。这是代码：

```
NSMutableString *text;

for (NSInteger i = 0; i < 1000000; i++) {

    if (text) {
        [text appendString:@" Hello"];
    }else{
        text = [@"" mutableCopy];
    }
} 
```

并查看内存使用图：

![NSMutableStrings 似乎适用于较小的数据集](../Images/16ede436b21028aa81106e527483306c.png)

一开始的短暂峰值是循环引起的内存使用量。还记得我注意到在处理循环期间屏幕是黑色的看似无关的事实，因为我在 viewDidLoad 中运行它吗？在那个尖峰之后，视图立即出现。因此，在这种情况下，NSMutableStrings 不仅可以更有效地处理内存，而且速度也快得多。迷人。

现在，回到我的实际场景……我`NSXMLParser`用来解析 API 调用的结果。我创建了 Objective-C 对象来匹配我的 XML 响应结构。因此，例如，考虑如下所示的 XML 响应：

```
<person>
<firstname>John</firstname>
<lastname>Doe</lastname>
</person> 
```

我的对象看起来像这样：

```
@interface Person : NSObject

@property (nonatomic, strong) NSString *firstName;
@property (nonatomic, strong) NSString *lastName;

@end 
```

现在，在我的 NSXMLParser 委托中，我将继续遍历我的 XML，并跟踪当前元素（我不需要完整的层次结构表示，因为我的数据相当扁平，它是一个转储MSSQL 数据库作为 XML），然后在该`foundCharacters`方法中，我将运行如下内容：

```
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
  if((currentProperty is EqualToString:@"firstname"]){
    self.workingPerson.firstname = [self.workingPerson.firstname stringByAppendingString:string]; 
  }
} 
```

这段代码很像第一个代码。我正在使用 有效地循环 XML `NSXMLParser`，所以如果我要记录所有方法调用，我会看到如下内容：

> parserDidStartDocument: parser:didStartElement:namespaceURI:qualifiedName:attributes: parser:foundCharacters: parser:didStartElement:namespaceURI:qualifiedName: parser:didStartElement:namespaceURI:qualifiedName:attributes: parser:foundCharacters: parser:didStartElement:namespaceURI:qualifiedName: parser:didStartElement: namespaceURI:qualifiedName:attributes: parser:foundCharacters: parser:didStartElement:namespaceURI:qualifiedName: parserDidEndDocument:

看到图案了吗？这是一个循环。请注意，也可能有多个连续调用`parser:foundCharacters:`，这就是我们将属性附加到先前值的原因。

总结一下，这里有两个问题。首先，任何类型的循环中积累的内存似乎都会使应用程序崩溃。其次，使用`NSMutableString`with 属性并不是那么优雅，我什至不确定它是否按预期工作。

一般来说，有没有办法在使用 ARC 循环字符串时克服这种内存积累？我可以做些什么特定于 NSXMLParser 的事情吗？

**编辑：**

初步测试表明，即使使用第二个`@autoreleasepool{...}`似乎也无法解决问题。

当对象存在时，对象必须在内存中的*某个*位置，并且它们仍然存在，直到运行循环结束，此时自动释放池可以耗尽。

就 NSXMLParser 而言，这并不能解决字符串情况中的任何问题，它可能是因为循环分布在方法调用中 - 需要进一步测试。

（请注意，我称之为内存峰值，因为理论上，ARC 会在某个时候清理内存，直到达到峰值之后。实际上没有任何泄漏，但它具有相同的效果。）

**编辑2：**

将自动释放池粘贴在循环中会产生一些有趣的效果。`NSString`附加到对象时似乎几乎可以减轻堆积：

```
NSString *text;

for (NSInteger i = 0; i < 600000000; i++) {

        @autoreleasepool {
            if (text) {
                text = [text stringByAppendingString:@" Hello"];
            }else{
                text = [@"" mutableCopy];
            }
        }
    } 
```

分配跟踪如下所示：

![在此处输入图像描述](../Images/8d12f5bf3d8532ee2a818215a4dfa625.png)

我确实注意到随着时间的推移内存逐渐增加，但大约是 150 KB，而不是之前看到的 350 MB。但是，这段代码使用`NSMutableString`的行为与没有自动释放池的行为相同：

```
NSMutableString *text;

for (NSInteger i = 0; i < 600000000; i++) {

        @autoreleasepool {
            if (text) {
                [text appendString:@" Hello"];
            }else{
                text = [@"" mutableCopy];
            }
        }
    } 
```

分配跟踪：

![NSMutableString 显然不受自动释放池的影响](../Images/6c68ac99ec40194ddcf89611ff91520d.png)

看起来 NSMutableString 显然不受自动释放池的影响。我不知道为什么，但乍一看，我会把它与我们之前看到的联系起来，它`NSMutableString`可以自己处理大约一百万次迭代，而`NSString`不能。

那么，解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T13:57:51.137

您正在用大量自动释放的对象污染自动释放池。

用自动释放池包围循环的内部部分：

```
for (...) {
    @autoreleasepool {
        ... your test code here ....
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:25:23.670

在寻找与内存相关的错误时，您应该注意@"" 和@"Hello" 将是不朽的对象。您可以将其视为 const，但对于对象。在内存中将有一个，并且只有一个，这个对象的实例。

正如@bbum 指出的那样，并且您已验证，@autoreleasepool 是循环处理此问题的正确方法。

在您使用 @autoreleasepool 和 NSMutableString 的示例中，池并没有真正做太多事情。循环内唯一的致命对象是你的 @"" 的 mutableCopy，但它只会被使用一次。另一种情况只是一个 objc_msgSend 到一个持久对象（NSMutableString），它只引用一个不朽对象和一个选择器。

我只能假设内存建立在 Apple 的 NSMutableString 实现中，尽管我想知道为什么你会在 @autoreleasepool 中看到它，而不是在它不存在时看到它。

# c# - 如何获取一个简单包的表名？

> ID：11885054
> 
> 赞同：-1
> 
> 时间：2012-08-09T13:54:49.717
> 
> 标签：c#, .net, nhibernate

像这样映射一个包：

```
<bag name="Addresses" table="address" cascade="all-delete-orphan">
  <key column="employee"/>
  <element column="address"/>
</bag> 
```

如何在运行时获取存储地址的表名？

如果集合泛型类型是 NHibernate 映射类，我可以这样做：

```
var tableName = (sessionFactory.GetClassMetadata(itemType) as SingleTableEntityPersister).TableName; 
```

但在这种情况下，集合泛型类型只是一个字符串，我找不到任何方法从元数据中检索表名。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:18:22.587

知道你在哪里需要这个会很有趣。尽管如此

```
var metaData = sf.GetClassMetadata("containingType");
var c = (CollectionType)metaData.PropertyTypes[Array.IndexOf(metaData.PropertyNames, "collectionPropertyName")];
var tablename = c.GetAssociatedJoinable((ISessionFactoryImplementor)sf).TableName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:26:25.277

Another possible solution:

```
var classMetadata= sessionFactory.GetClassMetadata(typeof(parentClass)) as SingleTableEntityPersister;
var key = classMetadata.RootEntityName + "." + propertyName;
var allCollectionMetadata = sessionFactory.GetAllCollectionMetadata();
var childTableName = (allCollectionMetadata[key] as BasicCollectionPersister).TableName; 
```

# python - 如何根据matplotlib中的颜色图对散点图进行着色？

> ID：11885060
> 
> 赞同：19
> 
> 时间：2012-08-09T13:55:06.480
> 
> 标签：python, numpy, matplotlib, scipy

我正在尝试根据从已定义的颜色图中选择的一组值（从 0 到 1）对散点图中的点进行着色，例如蓝色或红色。我试过这个：

```
import matplotlib
import matplotlib.pyplot as plt
from numpy import *
from scipy import *
fig = plt.figure()
mymap = plt.get_cmap("Reds")
x = [8.4808517662594909, 11.749082788323497, 5.9075039082855652, 3.6156231827873615, 12.536817102137768, 11.749082788323497, 5.9075039082855652, 3.6156231827873615, 12.536817102137768]
spaced_colors = linspace(0, 1, 10)
print spaced_colors
plt.scatter(x, x,
            color=spaced_colors,
            cmap=mymap)
# this does not work either
plt.scatter(x, x,
            color=spaced_colors,
            cmap=plt.get_cmap("gray")) 
```

但它不起作用，使用红色或灰色地图。如何才能做到这一点？

*编辑*：如果我想单独绘制每个点以便它可以有一个单独的图例，我该怎么做？我试过：

```
fig = plt.figure()
mymap = plt.get_cmap("Reds")
data = np.random.random([10, 2])
colors = list(linspace(0.1, 1, 5)) + list(linspace(0.1, 1, 5))
print "colors: ", colors
plt.subplot(1, 2, 1)
plt.scatter(data[:, 0], data[:, 1],
           c=colors,
           cmap=mymap)
plt.subplot(1, 2, 2)
# attempt to plot first five points in five shades of red,
# with a separate legend for each point
for n in range(5):
    plt.scatter([data[n, 0]], [data[n, 1]],
               c=[colors[n]],
               cmap=mymap,
               label="point %d" %(n))
plt.legend() 
```

但它失败了。我需要为每个点调用 scatter 以便它可以有一个单独的 label=，但仍然希望每个点都有不同的颜色图阴影作为它的颜色。谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-11T17:54:53.733

如果你真的想这样做（你在编辑中描述的），你必须从你的颜色图中“拉”颜色（我已经评论了我对你的代码所做的所有更改）：

```
import numpy as np
import matplotlib.pyplot as plt 

# plt.subplots instead of plt.subplot
# create a figure and two subplots side by side, they share the
# x and the y-axis
fig, axes = plt.subplots(ncols=2, sharey=True, sharex=True)
data = np.random.random([10, 2]) 
# np.r_ instead of lists
colors = np.r_[np.linspace(0.1, 1, 5), np.linspace(0.1, 1, 5)] 
mymap = plt.get_cmap("Reds")
# get the colors from the color map
my_colors = mymap(colors)
# here you give floats as color to scatter and a color map
# scatter "translates" this
axes[0].scatter(data[:, 0], data[:, 1], s=40,
                c=colors, edgecolors='None',
                cmap=mymap)
for n in range(5):
    # here you give a color to scatter
    axes[1].scatter(data[n, 0], data[n, 1], s=40,
                    color=my_colors[n], edgecolors='None',
                    label="point %d" %(n))
# by default legend would show multiple scatterpoints (as you would normally
# plot multiple points with scatter)
# I reduce the number to one here
plt.legend(scatterpoints=1)
plt.tight_layout()
plt.show() 
```

![彩色散射](../Images/25358688c24affc885e95d6708b244fb.png)

但是，如果您只想绘制 10 个值并想为每个值命名，则应考虑使用不同的东西，例如本 [例](http://matplotlib.sourceforge.net/examples/pylab_examples/barh_demo.html)中的条形图。另一个机会是使用`plt.plot`自定义颜色循环，就像在这个[例子](http://matplotlib.sourceforge.net/examples/api/color_cycle.html)中一样。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-09T14:58:04.687

[根据文档](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.scatter)，您需要`c`关键字参数而不是`color`. （我同意这有点令人困惑，但在这种情况下，“c”和“s”术语是从 matlab 继承的。）

例如

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib as mpl

x, y, colors = np.random.random((3,10))

fig, ax = plt.subplots()
ax.scatter(x, y, c=colors, s=50, cmap=mpl.cm.Reds)

plt.show() 
```

![在此处输入图像描述](../Images/4baa9fccfc05624da90567ec16f89728.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-15T22:26:51.533

怎么样：

```
import matplotlib.pyplot as plt
import numpy as np

reds = plt.get_cmap("Reds")
x = np.linspace(0, 10, 10)
y = np.log(x)

# color by value given a cmap
plt.subplot(121)
plt.scatter(x, y, c=x, s=100, cmap=reds)

# color by value, and add a legend for each
plt.subplot(122)
norm = plt.normalize()
norm.autoscale(x)
for i, (x_val, y_val) in enumerate(zip(x, y)):
    plt.plot(x_val, y_val, 'o', markersize=10, 
             color=reds(norm(x_val)),
             label='Point %s' % i
             )
plt.legend(numpoints=1, loc='lower right')

plt.show() 
```

![代码输出](../Images/758f9a8d83d43d4b6cd954a2f97006d9.png)

代码都应该是不言自明的，但如果你想让我复习任何事情，就喊吧。

# python - 使注册用户可以访问远程文件

> ID：11885062
> 
> 赞同：0
> 
> 时间：2012-08-09T13:55:13.040
> 
> 标签：python, web-applications, ftp, download

我有一个站点 A，其中安装了一个用 python 编写的门户网站。然后，我有一个站点 X（不是静态的，而是动态变化的），其中存储了一些文件。站点 A 和站点 X 通过 ftp 进行通信。我如何允许门户网站的注册用户下载文件，就像该文件在站点 A 中一样。有标准的方法吗？由于文件可能很大，我会避免传递给服务器。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:09:41.317

以您想要的方式授予访问权限的唯一方法是通过您的服务器传递它，在 FTP 服务器上编写前端，或在 FTP（临时帐户）上提供文件的有限下载。后一个选项不安全，虽然很容易做到，但不推荐它。因此，要么通过您的服务器传递文件并以这种方式将其交给用户，要么在 FTP 服务器上使用某种 Web 前端来提供文件。

FTP 服务器上的前端将是最好的选择，虽然它需要更多的工作，但基本要求是：

*   链接生成
*   某种数据库来保存允许访问它的链接/用户。
*   一种将身份验证传递给此前端的方法，因此用户不必在任何地方重新登录，简单的 cookie/会话将是最简单的，但又很困难。

这将需要大量额外的工作，但将是最灵活的，也就是说，如果可以做到这一点，否则我会坚持传递数据或查看第三方 CDN。

# cocoa - 是否有可用的工具来查看 CoreData 中的实体？

> ID：11885064
> 
> 赞同：4
> 
> 时间：2012-08-09T13:55:15.303
> 
> 标签：cocoa, core-data

我正在尝试找到一种方法来更轻松地查看我的核心数据数据库的内容。那里有教程吗？

我总是可以编写一些代码进入我的应用程序以遍历所有实体，但我想知道是否有可用的实际工具来执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:17:21.323

您可以使用 sqlite 查看器直接读取 CoreData sqlite 数据库文件。有一些免费的选项，但质量非常低。我个人有使用navicat高级版。

打开工具后，您需要加载 sqlite db 文件并导航它。您可以在模拟器上找到应用程序工作目录或在使用 Xcode 导出文档应用程序路径的设备上访问 dbfile。

希望这可以帮助。

# c# - 这个长的短查询

> ID：11885067
> 
> 赞同：0
> 
> 时间：2012-08-09T13:55:24.653
> 
> 标签：c#, linq-to-sql

谁能告诉我最短的查询：

```
 var guestpartyids = db.CeremonyGuestParties.Where(p => p.CeremonyId == id)
                           .Select(p => p.GuestPartyId);
        List<GuestParty> guestparties = new List<GuestParty>();
        foreach (var party in guestpartyids)
        {
            guestparties.Add(db.GuestParties.Single(p => p.Id == party));
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:59:43.773

这应该这样做。

```
guestparties.AddRange(
  from cgp in db.CeremonyGuestParties
  where cgp.CeremonyId == id
  join gp in db.GuestParties on cgp.GuestPartyId equals gp.Id
  select gp
); 
```

请注意，这将导致一次数据库调用，因为您的代码将导致 1+N 查询。但它不能确保只有一个匹配的 ID，就像 Single() 那样。无论如何，这应该在数据库上强制执行，而不是在代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T10:50:24.110

怎么样：

```
List<GuestParty> guestparties = from cgp in db.CeremonyGuestParties.
                                Where cgp.CeremonyId .id == id) 
                                select cgp.Guestparties.ToList(); 
```

# php - balita 主题 / nivo 滑块过渡

> ID：11885068
> 
> 赞同：1
> 
> 时间：2012-08-09T13:55:28.857
> 
> 标签：php, javascript, jquery, wordpress

我正在使用“Balita”免费电子商务 wordpress 主题。它带有挂在仪表板上的“nivo”滑块。这很好，但不允许幻灯片转换自定义，并且默认情况下处于疯狂的“随机”状态。我想使用'fade'，但找不到主题在哪里调用 jQuery。

我所看到的只是下面的启动代码；在 header.php 中

```
<?php
                    // get recent slider max is 5 slider.
                    tk_get_recent_posttype('slider', 1, 5);
                    if(have_posts ()):
                ?>
        <div class="slider-wrapper theme-default">
            <div id="slider" class="nivoSlider">
                                <?php
                                    while (have_posts ()): the_post();
                                        echo '<a href="'.  get_post_meta(get_the_ID(), '_tk_slider_meta_link', true).'">';
                                        the_post_thumbnail('slider', array('alt' => get_the_title(), 'title' => ''));
                                        echo '</a>';
                                    endwhile;
                                ?>
            </div>
        </div>
                <?php endif; wp_reset_query(); ?> 
```

我还尝试将传统的 jQuery 代码拖到同一个头中以切换“淡入淡出”，但它忽略了它。如何更改幻灯片转换/在哪里可以找到 jQuery？还是我坚持使用新插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:07:21.133

我在一个名为“script.js”的开源 FTP 客户端中找到了要编辑的脚本。拉德，很高兴。

# c# - DropDownList 设置错误的 SelectedValue

> ID：11885069
> 
> 赞同：2
> 
> 时间：2012-08-09T13:55:30.373
> 
> 标签：c#, asp.net

我正在尝试根据查询字符串中传递的值设置未绑定的 DropDownList 的值。这是我的代码：

```
ListItem item = null;
            for (int x = 0; x < 60; x++)
            {
                item = new ListItem(x.ToString("D2"), x.ToString("D2"));
                ddStartMinutes.Items.Add(item);
                ddEndMinutes.Items.Add(item);
                if (x < 24)
                {
                    ddStartHours.Items.Add(item);
                    ddEndHours.Items.Add(item);
                }
            }

        if (Request.QueryString.Count > 5)
        {
            string startDate = Request.QueryString["startDate"];
            string startHour = Request.QueryString["startHour"];
            string startMin = Request.QueryString["startMin"];
            string endDate = Request.QueryString["endDate"];
            string endHour = Request.QueryString["endHour"];
            string endMin = Request.QueryString["endMin"];
            string cabinet = Request.QueryString["cabinet"];

            txtStartDate.Text = startDate;
            txtEndDate.Text = endDate;
            ddStartHours.SelectedValue = startHour;
            ddStartMinutes.SelectedValue = startMin;
            ddEndHours.SelectedValue = endHour;
            ddEndMinutes.SelectedValue = endMin;
            ddCabinets.SelectedValue = cabinet;

            runReport();
        } 
```

我首先构建下拉列表，然后尝试根据查询字符串设置选定的值。所有下拉菜单都设置为 endMin 的值，而不是它们的正确值。

如果我在 runReport() 之前调试并添加一个断点；我看到每个字符串变量都有来自查询字符串的正确值，但是每个 DropDownList selectedValues 都设置为 endMin 而不是它的查询字符串值。

例如，如果在查询字符串中 startHour 为 1，startMin 为 2，endHour 为 3，endMin 为 4，则每个字符串变量都从查询字符串中正确设置，但下拉选择的值都设置为 4。

我很困惑。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:07:13.630

`ListItem`问题在于在下拉菜单之间共享s。要修复它，请使用：

```
for (int x = 0; x < 60; x++) 
{ 
    var value = x.ToString("D2");
    ddStartMinutes.Items.Add(new ListItem(value, value));
    ddEndMinutes.Items.Add(new ListItem(value, value));
    if (x < 24) 
    { 
        ddStartHours.Items.Add(new ListItem(value, value));
        ddEndHours.Items.Add(new ListItem(value, value));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:01:10.863

这是 DropDownList 的一个“不足”。我使用这个扩展来解决它：

```
 /// <summary>
    /// Sets the selected item by value.
    /// </summary>
    /// <param name="list">Drop down list to select value on</param>
    /// <param name="value">Value to select</param>
    public static void SetSelectedByValue(this DropDownList list, string value)
    {
        var listItem = list.Items.FindByValue(value);
        if (listItem != null)
        {
            list.SelectedIndex = list.Items.IndexOf(listItem);
        }
    } 
```

您提供的来源中的用法：

```
 ddStartHours.SetSelectedByValue(startHour);
            ddStartMinutes.SetSelectedByValue(startMin);
            ddEndHours.SetSelectedByValue(endHour);
            ddEndMinutes.SetSelectedByValue(endMin);
            ddCabinets.SetSelectedByValue(cabinet); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:08:17.603

你可以使用以下

```
ddStartHours.Items.FindByValue(startHour).Selected = true; 
```

这应该正确设置该值，尽管上面的扩展正在执行此操作，但您可以在上面的代码中的一行中执行此操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:11:05.240

假设您知道通过查询字符串传入的值将始终在下拉列表中，您可以执行以下操作：

`ddStartHours.Items.FindByValue(startHour) = true;`

为了安全起见; 你总是可以像这样添加一个空检查：

```
var item = ddStartHours.Items.FindByValue(startHour);
if(item != null)
     item.Selected = true; 
```

编辑：

再看一遍；似乎下拉菜单之间的共享项目是原因。如果你有`ListItem1`并且你把它添加到两个`ddStartHours`和`ddEndHours`; 选择一个也会选择另一个。

我可能会将其重构为具有一个静态方法，该方法返回一个小时和分钟的 ListItems 集合，并使用它来绑定到下拉列表。

# java - 使用 IOFileFilter 的问题

> ID：11885070
> 
> 赞同：0
> 
> 时间：2012-08-09T13:55:32.493
> 
> 标签：java, fileutils

我使用 Apache FileUtils 和 IOFileFilter 以递归方式列出文件夹下的所有文件，不包括 .svn 文件夹。这是我尝试过的代码

```
File selectedFolder = new File(path);\\path to folder to list
        final IOFileFilter dirs = new IOFileFilter() {
            @Override
            public boolean accept(File file, String s) {
                return file.isDirectory();
            }

            @Override
            public boolean accept(File file) {
                // TODO Auto-generated method stub
                if(file.getName().toLowerCase().equalsIgnoreCase(".svn")||file.getName().toLowerCase().contains(".svn"))

                return false;
                else return true;
            }

        };
        filesList.addAll(FileUtils.listFiles(selectedFolder,dirs, TrueFileFilter.INSTANCE)); 
```

我收到错误

```
java.lang.IllegalArgumentException: Parameter 'directory' is not a directory
    at org.apache.commons.io.FileUtils.validateListFilesParameters(FileUtils.java:545)
    at org.apache.commons.io.FileUtils.listFiles(FileUtils.java:521) 
```

谁能告诉我哪里出错了。我觉得使用的过滤器有问题。我想不通

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:10:35.717

实际上，FileFilterUtils 包含一个可以使用的名为 makeSVNAware 的方法。它返回一个忽略 SVN 目录的过滤器。例如：

```
filesList.addAll(
    FileUtils.listFiles(selectedFolder, TrueFileFilter.TRUE,
            FileFilterUtils.makeSVNAware(null))); 
```

注意 listFiles 需要一个文件过滤器作为它的第二个参数，一个 dir 过滤器作为它的第三个参数。在您的代码中，它们是相反的。因此，如果您不想使用 makeSVNAware，您的代码将如下所示：

```
File selectedFolder = new File(path); // path to folder to list

final IOFileFilter dirs = new IOFileFilter() {
    @Override
    public boolean accept(File file, String s) {
        return file.isDirectory();
    }

    @Override
    public boolean accept(File file) {
        return (!file.getName().toLowerCase().equalsIgnoreCase(".svn"));
    }

};
// 2nd argument: TRUE filter, returning all files
// 3rd argument: dirs filter, returning all directories except those named .svn
filesList.addAll(FileUtils.listFiles(selectedFolder, TrueFileFilter.TRUE, dirs)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:00:48.107

看起来您已将功能拆分为两个功能。

第二个也应该检查，`isDirectory()`第一个也应该检查名称。

# c# - 如何在windows应用程序的每一行datagridview上动态添加两个单选按钮？

> ID：11885074
> 
> 赞同：0
> 
> 时间：2012-08-09T13:55:45.083
> 
> 标签：c#, .net

在 Windows 应用程序中，我添加了一个`datagridview`. 我想在每一行上动态添加两个单选按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:40:51.080

文章 : 为 DataGridView 控件构建自定义 RadioButton 单元格和列

[http://msdn.microsoft.com/en-us/library/aa730882%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa730882%28VS.80%29.aspx)

# python - UnknownError 完成 mapreduce 作业

> ID：11885077
> 
> 赞同：1
> 
> 时间：2012-08-09T13:55:51.177
> 
> 标签：python, google-app-engine, mapreduce

我在完成写入谷歌存储的 mapreduce 作业时遇到了一个奇怪的错误，以前有人见过吗？

工作“158354152558......”的最终结果是“成功”

……

```
File "/base/data/home/apps/s~app/bqmapper.360899047207944804/libs/mapreduc/handlers.py", line 539, in _finalize_job
mapreduce_spec.mapper.output_writer_class().finalize_job(mapreduce_state)
File "/base/data/home/apps/s~app/bqmapper.360899047207944804/libs/mapreduce/output_writers.py", line 571, in finalize_job
files.finalize(create_filename)
File "/base/data/home/apps/s~app/bqmapper.360899047207944804/libs/mapreduce/lib/files/file.py", line 568, in finalize
f.close(finalize=True)
File "/base/data/home/apps/s~app/bqmapper.360899047207944804/libs/mapreduce/lib/files/file.py", line 291, in close
self._make_rpc_call_with_retry('Close', request, response)
File "/base/data/home/apps/s~app/bqmapper.360899047207944804/libs/mapreduce/lib/files/file.py", line 427, in _make_rpc_call_with_retry
_make_call(method, request, response)
File "/base/data/home/apps/s~app/bqmapper.360899047207944804/libs/mapreduce/lib/files/file.py", line 252, in _make_call
_raise_app_error(e)
File "/base/data/home/apps/s~app/bqmapper.360899047207944804/libs/mapreduce/lib/files/file.py", line 186, in _raise_app_error
raise UnknownError()
UnknownError 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:38:01.650

玩了之后，我发现云存储上的打开文件必须在不到 1 小时内完成，否则它会因这个可爱的 UnknownError 而失败。

我缓解了增加分片数量以加快映射速度的问题，并将 output_sharding 策略更改为“输入”，每个分片创建一个文件。

# android - ZXing QR Scan 适用于 TabHost 但不适用于 ListView

> ID：11885080
> 
> 赞同：0
> 
> 时间：2012-08-09T13:56:07.540
> 
> 标签：android, android-listview, android-tabhost, zxing

我有 2 种不同的布局

一个是 TabHost，它托管不同的选项卡，其中一个是 QR 扫描仪选项卡。如果我单击按钮，它会启动扫描应用程序并对其进行扫描并将其返回到活动并显示结果（我使用 StartActivityForResult()... 启动它）。另一个 Layout 是 ListView，您可以在其中选择功能。如果您在此处选择 QR 扫描仪，则会打开活动。如果您单击扫描 QR 码，它会再次启动 ZXing，但如果已扫描某些内容，它会退回到 Listview 布局。

这就是我的活动在清单中声明的​​方式（ListView 布局）：

```
<activity
        android:name=".ListActivities"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:label="@string/app_name" >
</activity> 
```

和 TabHost：

```
<activity
        android:name=".TabHoster"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:label="@string/app_name" >
</activity> 
```

这是 ScanQR 类的 Manifest 条目：

```
<activity
        android:name=".QRScanner"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:label="@string/app_name"
        android:launchMode="singleInstance" /> 
```

这是 ListActivity -> ScanQR 中的代码：

```
Intent intent = new Intent(this, ScanQR.class);
startActivity(intent); 
```

这是启动 ZXing 库的代码：

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
startActivityForResult(intent, 0); 
```

以及从它返回的结果的代码：

```
if (resultCode == RESULT_OK) {
       String contents = intent.getStringExtra("SCAN_RESULT");

       txtPleaseScan.setVisibility(View.GONE);

       ScrollView qrLayout = (ScrollView) findViewById(R.id.qrLayout);
       qrLayout.setVisibility(View.VISIBLE);

       txtQRResult.setText(contents);
  } else if (resultCode == RESULT_CANCELED) {
  } 
```

顺便说一句，我对两种布局都使用相同的 ScanQR 码...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:35:32.457

第一：你必须从`ListActivity`with开始活动，`startActivityForResult`但你从 开始`startActivity`。

第二：您还必须`onActivityResult`在 ListActivity 中实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:58:47.770

哇，好的，我自己可以修复它...问题出在`AndroidManifest.xml`...`android:launchMode`那里`android:configChanges`我猜是错误的...删除它后，它在两种布局中都可以正常工作...

# android - 从服务器向应用程序发送消息 - 连接 GCM

> ID：11885086
> 
> 赞同：0
> 
> 时间：2012-08-09T13:56:28.493
> 
> 标签：android, google-cloud-messaging

我尝试使用来自[http://developer.android.com/guide/google/gcm/gs.html的 Google Cloud Messaging 实现应用程序](http://developer.android.com/guide/google/gcm/gs.html)

```
Sender sender = new Sender(myApiKey);

                Message message = new Message.Builder()
                .collapseKey("1")
                .timeToLive(3)
                .delayWhileIdle(true)
                .addData("message", "message is created at builder")
                .build();

                Result result = sender.send(message, reGid, 5);
                System.out.println("result of message is "+result); 
```

因此我得到一个消息ID，可以从控制台看到；但我想在我的设备上显示消息并祝酒。

GCMIntentService.java：

```
@Override
protected void onMessage(Context arg0, Intent arg1) {
    Log.i(TAG, "new message= ");
    Toast.makeText(this, arg1.getStringExtra("message"), Toast.LENGTH_SHORT)
            .show();
} 
```

来自 GCM 高级主题：

*当第 3 方服务器向 GCM 发布消息并收到返回的消息 ID 时，并不意味着该消息已经传送到设备。相反，这意味着它已被接受交付。消息被接受后会发生什么取决于许多因素。在最好的情况下，**如果设备连接到 GCM**，屏幕处于开启状态，并且没有限制限制（请参阅限制），则消息将立即传递。*

我不明白“**设备已连接到 GCM** ”是什么意思。设备如何连接 GCM、连接互联网并从设备运行应用程序还不够？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T06:56:26.417

您应该点击此链接以获得所有问题的答案：

[http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

你只需要实现客户端和服务器。我已经在自己的 PC 上实现并运行了代码。
我也已经在 PC 到移动设备上进行了测试。

**源代码可用。** 您只需要下载并执行一些简单的步骤。

我打赌你会在 30 分钟内运行你的代码。

很高兴能帮助你 ！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:13:40.567

连接到 GCM 取决于几件事。

1.  设备已注册接收消息 -`GCMRegistrar.register`
2.  设备具有允许传递消息的连接
3.  该设备满足允许传递消息的已安装软件的某些要求 - 即 Google API - 最低 SDK 2.2

**更新：** 当您发送消息时，您会收到状态响应，如果一切正常，则表示消息 ID。发送消息的设备将不会收到消息，除非消息已发送到该设备（使用设备注册的 GCM id）。设备注册 id 在设备调用注册后返回。

请注意，使用 GCM 无法保证消息会被传递。它通常非常可靠，但如果交付至关重要，则不应使用。

是的 onMessage() 是设备正在接收的新消息的入口点。

# silverlight - MVVM - 模型和视图模型的数据层

> ID：11885087
> 
> 赞同：0
> 
> 时间：2012-08-09T13:56:30.070
> 
> 标签：silverlight, data-binding, mvvm

我正在重构我的应用程序以利用 MVVM。我曾经在可以将 ListView 绑定到的 Application 类中保留一个`List<Product>`变量。这个列表构成了我的数据层。具有此 ListView 的页面是主/详细布局。使用 MVVM，我认为 List 现在应该包含 ProductModel 的实例，因为它是数据层。如果我应该绑定到 ViewModel，我是否也需要一个单独的 ViewModel 列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:07:07.360

您可能需要对 MVVM 采取不同的观点。您的视图是带有控件 (XAML) 的页面，而您的 ViewModel 是数据模型和页面之间的粘合剂。View 的整个数据上下文将设置为 ViewModel（直接在 XAML 中完成或在代码隐藏中完成，具体取决于您订阅的 MVVM 阵营）。

在您的示例中，您将移至`List<Product>`ViewModel`ObservableCollection<Product>`并确保您的 ViewModel 实现 INotifyPropertyChanged 接口。INotifyPropertyChanged 是视图用来知道何时更新其绑定的合同。您将使用 an`ObservableCollection<T>`而不是列表，因为`ObservableCollection<T>`实现了 INotifyPropertyChanged 本身。

您的 View 的 DataContext 属性将设置为 ViewModel 的一个实例。在 View 上，ListBox 控件的`ItemsSource`属性将设置为绑定到`Product`集合。然后，您可以在 ViewModel 中拥有负责与数据存储通信以填充可观察集合的方法。

## 视图模型

```
public class MyViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private ObservableCollection<Product> _products = null;
    public ObservableCollection<Product> Products
    {
       get { return _products; }
       set
       {
           if( _products != value )
           {
               _products = value;

               if( this.PropertyChanged != null )
               {
                   this.PropertyChanged( this, new PropertyChangedEventArgs( "Products" ) );
                }
            }
        }
     }

     // have code in here that loads the Products list from your data store (i.e. service call to database)
} 
```

## 查看代码隐藏

```
public MyView()
{   
    InitializeComponent(); 
    this.DataContext = new MyViewModel();
} 
```

## 看法

```
<ListBox
    ItemsSource={Binding Path=Products, Mode=OneWay}
    SelectedItem={Binding Path=SelectedProduct, Mode=TwoWay}
    ...
/> 
```

# c# - C# HTTP 套接字文件 POST？

> ID：11885089
> 
> 赞同：1
> 
> 时间：2012-08-09T13:56:34.850
> 
> 标签：c#, file, http, sockets, post

我想通过 HTTP 将文件上传到 PHP 脚本，并且我想通过套接字进行。邮政已经工作正常，只是文件似乎没有正确发送。

首先，我建立我的 HTTP 请求直到文件的开头，然后我将此字符串转换为 ByteArray。我`Buffer.BlockCopy`把文件放在这个数组的末尾。使用另一个 BlockCopy，我将结束边界放在数组的末尾。在此之后，我尝试将我的 ByteArray 作为请求（带有标头）发送，但看起来文件没有发送，或者格式错误。

这是我的代码的一部分：

```
 _content = _content
      + "--" + boundary + Environment.NewLine
      + "Content-Disposition: form-data; name=\"" + this._FileVarName + "\"; filename=\"" + Path.GetFileName(this._FilePath) + "\""
      + Environment.NewLine + "Content-Transfer-Encoding: application/octet-stream"
      + Environment.NewLine + Environment.NewLine;

    mainContent = this.Combine(Encoding.UTF8.GetBytes(_content), System.IO.File.ReadAllBytes(this._FilePath));
    mainContent = this.Combine(mainContent, Encoding.UTF8.GetBytes(Environment.NewLine + "--" + boundary + "--"));

    private byte[] Combine(byte[] first, byte[] second)
    {
      byte[] ret = new byte[first.Length + second.Length];
      Buffer.BlockCopy(first, 0, ret, 0, first.Length);
      Buffer.BlockCopy(second, 0, ret, first.Length, second.Length);
      return ret;
    } 
```

有谁知道这个问题并且可以帮助我？

# actionscript-3 - 是否可以通过 actionscript 3.0 截取网页的完整截图？

> ID：11885090
> 
> 赞同：1
> 
> 时间：2012-08-09T13:56:38.327
> 
> 标签：actionscript-3, screenshot

这是关键，我需要通过 actionscript 截取网页的完整屏幕截图，我知道这在其他编程语言（如 PHP 和 CutyCapt）上是可能的，但是通过 actionscript，有没有办法完成它？

完整的屏幕截图应该能够截取整个网页，其中可能包括 swfs / 视频。

请注意，我只对 Actionscript 的可用解决方案（如果有的话！）感兴趣，而不是对库/其他编程语言的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:10:22.153

没门。您只能截取当前 swf 的屏幕截图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:37:06.357

没有。这将是一个巨大的安全漏洞。想象一下，如果某个 3rd 方 Flash 广告可以随机截屏您在网页上所做的任何事情（登录详细信息、个人信息、活动等）。

然而，SWF 本身的任何东西都是公平的游戏。

我建议您考虑一下为什么需要屏幕截图，并从那里尝试找到另一种可以为您提供与屏幕截图相同效果的方法，因为仅从 ActionScript 截取整个网页的屏幕截图是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T19:55:12.400

今天似乎有可能。

在 Yahoo.com 上运行着一个“简洁”（讽刺）的 Flash 广告，它捕获了该页面上 HTML 元素的当前视觉状态。请参阅随附的屏幕截图。纯 HTML 的项目，并且在广告捕获图像之前与我进行了交互，是该图像的一部分，然后它会对其应用效果。您可以判断 swf 何时捕获焦点。它没有执行服务器端操作，甚至没有模拟捕获。对我来说看起来很真实；但是，我承认我已经有几个月没有研究过最新玩家的功能或安全漏洞了。如果有人可以解释这不是捕获我会感兴趣

我同意这是一个巨大的安全漏洞。你能想象这些可能性吗？许多银行网站允许在其上运行 Flash 广告。捕获账户余额和交易细节不会花费更多的精力。

![在此处输入图像描述](../Images/06093980a8035e4d73536a025ff7be17.png)

# highcharts - 带有数据表的 Highcharts

> ID：11885092
> 
> 赞同：0
> 
> 时间：2012-08-09T13:56:40.630
> 
> 标签：highcharts, html-table

有一个highcharts的例子：

[http://jsfiddle.net/highcharts/z9zXM/](http://jsfiddle.net/highcharts/z9zXM/)

但是我无法在桌子上反转 x 轴和 y 轴。我的意思是我想要它：

```
Tokyo       Jan Feb ..
New York
Berlin
London 
```

我还想在图表下方找到该表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:18:53.747

循环应该是这样的：

```
// draw category labels
$.each(series, function(serie_index, serie) {
    renderer.text(
        serie.name, 
        cellLeft + cellPadding, 
        tableTop + (serie_index + 2) * rowHeight - cellPadding
    )
    .css({
        fontWeight: 'bold'
    })       
    .add();
});

$.each(chart.xAxis[0].categories, function(category_index, category) {
    cellLeft += colWidth;

    // Apply the cell text
    renderer.text(
            category,
            cellLeft - cellPadding + colWidth, 
            tableTop + rowHeight - cellPadding
        )
        .attr({
            align: 'right'
        })
        .css({
            fontWeight: 'bold'
        })
        .add();

    $.each(series, function(i) {

        renderer.text(
                Highcharts.numberFormat(series[i].data[category_index].y, valueDecimals) + valueSuffix, 
                cellLeft + colWidth - cellPadding, 
                tableTop + (i + 2) * rowHeight - cellPadding
            )
            .attr({
                align: 'right'
            })
            .add();

    });

}); 
```

这是链接：http: [//jsfiddle.net/pJ3qL/1/](http://jsfiddle.net/pJ3qL/1/)

然后，如果需要，您应该再次在循环内绘制表格边框；）

# soundcloud - soundmanager 如何解释 soundcloud 流？

> ID：11885100
> 
> 赞同：1
> 
> 时间：2012-08-09T13:57:10.990
> 
> 标签：soundcloud, soundmanager2

使用“内联播放器”演示。

```
 <li><a href="http://api.soundcloud.com/tracks/42021012/stream.json?client_id=[myclientID]">play song</a></li> 
```

这将带我到一个 mp3 链接，但由于它最后有更多参数，所以 soundmanager 不会将它作为 mp3 加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T01:46:22.077

尝试在末尾添加 &filename=soundcloud.mp3。

```
 <li><a href="http://api.soundcloud.com/tracks/42021012/stream.json?client_id=[myclientID]&filename=soundcloud.mp3">play song</a></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T11:52:25.327

请尝试`type="audio/mpeg"`像这样添加您的代码：

```
<li>
    <a type="audio/mpeg" class="sm2_button" 
        href="https://api.soundcloud.com/tracks/214947467/stream?client_id=THE_CLIENT_ID">
        your eyes (title track) with intro
    </a>
</li> 
```

它，解决了我遇到的同样问题。

# eclipse-plugin - SWTBOT 切换工作区

> ID：11885107
> 
> 赞同：0
> 
> 时间：2012-08-09T13:57:26.637
> 
> 标签：eclipse-plugin, tycho, swtbot, tycho-surefire-plugin

我正在使用带有 tycho-surfire 的 SWTBOT 来测试 Eclipse 应用程序。测试单独运行良好，但是当我组合它们时，我需要在每次测试后切换工作区，或者以某种方式为每个测试指定一个特定的工作区。当我尝试使用以下代码从测试内部切换工作区时：

```
<code>
bot.menu("File").menu("Switch Workspace").menu("Other...").click();
bot.shell("Workspace Launcher").activate();
String workspace = bot.comboBoxWithLabel("Workspace:").getText() + "/ResetButtonTest";
bot.comboBoxWithLabel("Workspace:").setText(workspace);
bot.button("OK").click();
</code> 
```

模拟器到达 OK 按钮并按下它，工作台关闭但不再启动。要求设置属性 eclipse.vm 时出错，我做到了。错误消失但仍无法切换工作区。

是否有任何配置文件或我可以添加到 tyco-surfire 的东西来配置 SWTBot 以使其运行的每个测试都有一个特定的工作区？或者甚至在一个新的工作台上运行每个测试，而不是在同一个工作台上继续？或者是否有任何解决方案可以解决从测试内部切换工作区的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:20:53.927

那么对于每个测试你想设置一个特定的工作空间？测试不是要切换工作区吗？

如果您可以配置启动 SWTbot 测试的命令，您可以添加`-data <my workspace>`为参数。然后它将使用该工作区启动。

# ruby - 使用 SQL 的 EventMachine 服务器和串行端口

> ID：11885112
> 
> 赞同：2
> 
> 时间：2012-08-09T13:57:33.143
> 
> 标签：ruby, sqlite, serial-port, eventmachine

我是红宝石的新手。我正在尝试制作一个从串行端口读取并将值放入 sqlite3 数据库的应用程序。当客户端通过 TCP 套接字连接时，他应该从数据库中接收值。客户端写入的值应通过串行端口发送。

我有两个关于我的应用程序的问题。

这将在主线程（？）上打开一个到数据库的连接，并为每个客户端打开一个连接。 ~~有没有更好的方法来使用 sqlite3？~~ 我想我想通了。sqlite3 默认情况下不是线程安全的，所以这似乎是这样做的方法..

如何在 recieve_data 方法中写入串行端口？可以将serial设置为全局变量吗？

```
#!/usr/bin/env ruby
#
# server_1

require 'rubygems'
require 'eventmachine'
require 'sqlite3'
require 'em-serialport'
require 'json'

module SocketClient
    def self.list
        @list ||= []
    end

    def post_init
        SocketClient.list << self
        @db = SQLite3::Database.new( "data.db" )

        values = []
        @db.execute("SELECT * FROM values") do |row|
            values << {row[0] => row[1]} #id => value
        end
        self.send_data "#{values.to_json}\n"

        p "Client connected"

    end

    def unbind
        SocketClient.list.delete self
        @db.close
    end

    def receive_data data
        p data
        #How do i send via serialport from here??? serial.send_data data
    end
end

db = SQLite3::Database.new( "data.db" )

EM.run{
    EM.start_server '0.0.0.0', 8081, SocketClient
    serial = EM.open_serial '/dev/tty.usbserial-xxxxxxxx', 9600, 8, 1, 0

    serial.on_data do |data|
        #Parse data into an array called values
        db.execute("UPDATE values SET value = ? WHERE id = ?", values["value"], values["id"])
        SocketClient.list.each{ |c| c.send_data "#{values.to_json}\n" }
    end
}

db.close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T02:05:57.090

为您的 Socket 客户端设置构造函数，以便它接收共享串行连接。

```
module SocketClient
    def initialize serial
      @serial = serial
    end

    def receive_data data
        p data
        @serial.send_data data
    end 
```

然后在调用 EM.start_server 时传递它

```
EM.run{
    serial = EM.open_serial '/dev/tty.usbserial-xxxxxxxx', 9600, 8, 1, 0
    EM.start_server '0.0.0.0', 8081, SocketClient, serial 
```

# android - IllegalArgumentException 指针索引超出范围 ICS (Horizo ntalScrollView)

> ID：11885116
> 
> 赞同：2
> 
> 时间：2012-08-09T13:57:53.693
> 
> 标签：android, android-widget, native, android-4.0-ice-cream-sandwich

我有一个奇怪的异常（堆栈跟踪如下）

```
06-28 01:50:52.900: E/Crittercism(8804): java.lang.IllegalArgumentException: pointerIndex out of range
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.MotionEvent.nativeGetAxisValue(Native Method)
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.MotionEvent.getX(MotionEvent.java:1974)
06-28 01:50:52.900: E/Crittercism(8804):    at android.widget.HorizontalScrollView.onTouchEvent(HorizontalScrollView.java:561)
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.View.dispatchTouchEvent(View.java:5604)
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2054)
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1815)
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2060)
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1829)
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2060)
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1829)
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2060)
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1829)
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2060)
06-28 01:50:52.900: E/Crittercism(8804):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1829) 
```

奇怪的是，我**从不（永远！！！！）调用 getX(int index)**，只调用 event.getX() 或 event.getY()。这个错误是 ICS 独有的（4.03 和 4.04）

有趣但不那么奇怪的是，这几乎是索尼设备独有的：

[每个设备型号的错误分布](http://oi50.tinypic.com/hvuek9.jpg)

我已经查看了所有其他提出的类似问题，但在每种情况下，问题都出在 getX(someIndex or id) 上。任何人都可以对此有所了解吗？

# android - 从命令行安装依赖插件的问题

> ID：11885126
> 
> 赞同：0
> 
> 时间：2012-08-09T13:58:12.257
> 
> 标签：android, eclipse, plugins, command-line, eclipse-juno

我们正在尝试从命令行安装一组 eclipse 插件。

首先我们需要安装 ADT 插件。

然后我们尝试安装一个依赖于 ADT 插件的插件。

依赖插件的安装失败并出现错误：

`Missing requirement: "OurPluginName" ("Ourplugin.feature.group") requires 'com.android.ide.eclipse.adt 11.0.0' but it could not be found`

我们使用以下命令从命令行安装插件：

`eclipsec.exe -application org.eclipse.equinox.p2.director -repository [our-update-side] -installIU [our.feature.group] -destination "[eclipse-install-directory]"`

我们观察到以下情况：

如果我们只安装 ADT 插件，然后在 UI 模式下启动 eclipse IDE，再次停止它，然后安装依赖于 ADT 插件的插件，则不会出现上述错误。

所以现在的问题是：我们如何在不启动 ecilpse IDE 手册的情况下通过命令行安装依赖插件。

您知道如何从命令行更新 eclipse 存储库吗？

感谢您的提示。

此致

坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:10:22.213

问题解决了:-)：

请按以下方式进行：

1.  下载包含ADT插件的ZIP文件，不要通过更新端下载！
2.  提取 Eclipse 文件夹中的 ZIP 文件内容。
3.  现在您可以安装依赖于 ADT 插件的附加插件，如上所述。

希望这对你也有帮助。

此致

坦率

# android-emulator - ZXingTestActivity - 条码扫描器 - 未找到处理 Intent { act=com.google.zxing.client.android.SCAN 的活动（有附加功能）}

> ID：11885127
> 
> 赞同：12
> 
> 时间：2012-08-09T13:58:15.877
> 
> 标签：android-emulator

我一直在尝试构建一个使用**条形码扫描仪**的应用程序，我决定尝试在**ZXing-2.0.zip**中找到的示例，所以我进入了我的 eclipse 并将**androidtest**应用程序作为现有的 android 应用程序导入到我的工作区，代码编译正常，没有错误。

现在，在我的 AVD 上运行应用程序后，所有按钮都正确显示

单击**扫描产品**按钮时，它会在 LogCat 中为我提供此堆栈，并且应用程序需要关闭：

```
08-09 13:10:47.542: E/AndroidRuntime(681): android.content.ActivityNotFoundException: 没有找到处理 Intent { act=com.google.zxing.client.android.SCAN (has extras) }
08-09 13:10:47.542: E/AndroidRuntime(681): 在 android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1545)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 android.app.Instrumentation.execStartActivity(Instrumentation.java:1416)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 android.app.Activity.startActivityForResult(Activity.java:3351)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 android.app.Activity.startActivityForResult(Activity.java:3312)
08-09 13:10:47.542: E/AndroidRuntime(681): at com.google.zxing.client.androidtest.ZXingTestActivity$3.onClick(ZXingTestActivity.java:153)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 android.view.View.performClick(View.java:4084)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 android.view.View$PerformClick.run(View.java:16966)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 android.os.Handler.handleCallback(Handler.java:615)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 android.os.Handler.dispatchMessage(Handler.java:92)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 android.os.Looper.loop(Looper.java:137)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 android.app.ActivityThread.main(ActivityThread.java:4745)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 java.lang.reflect.Method.invokeNative(Native Method)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 java.lang.reflect.Method.invoke(Method.java:511)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-09 13:10:47.542: E/AndroidRuntime(681): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-09 13:10:47.542: E/AndroidRuntime(681): at dalvik.system.NativeStart.main(Native Method)

```

这很奇怪，因为他所说的活动应该是 ZXingTestActivity

那么我在这里缺少什么？谢谢！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-07T15:32:28.500

只需将此代码添加到您的清单文件中，并在 Application 标记中。

```
<activity
    android:name="com.google.zxing.client.android.CaptureActivity"
    android:configChanges="orientation|keyboardHidden"
    android:screenOrientation="landscape"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
    android:windowSoftInputMode="stateAlwaysHidden" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
    <intent-filter>
        <action android:name="com.google.zxing.client.android.SCAN" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

现在添加权限（如果尚未添加到文件顶部）

```
 <uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-05T04:49:38.327

我解决了这个问题。你可以看看这个页面“ [http://pastebin.com/J5EV72Cu](http://pastebin.com/J5EV72Cu) ”。
**错误编码**

```
String packageString = "com.google.zxing.client.android";
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
intent.setPackage(packageString);
intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
startActivityForResult(intent, 123); 
```

**解决编码**

```
String packageString = "com.yourapplication.packagename";
Intent intent = new Intent("com.google.zxing.client.android.SCAN");
intent.setPackage(packageString);
intent.putExtra("SCAN_MODE", "SCAN_MODE");
startActivityForResult(intent, 123); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T08:20:23.053

我已经解决了问题，您可以在[此处找到解决方案](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)

您需要做的是将提到的部分添加到清单文件中。祝你好运！！

# c++ - 重载运算符 [] 替换向量元素

> ID：11885133
> 
> 赞同：1
> 
> 时间：2012-08-09T13:58:30.027
> 
> 标签：c++, vector, operator-overloading

我有一个**classA**，它有一个**vector< classB* > vObject**。

```
class ClassA{
public:
     ClassB** operator [] (int index);
private:
     vector<ClassB*> vObject
}; 
```

让我们假设 vObject 填充了一些 classB* 对象。 **我想要做的是能够像这样替换矢量的 classB* 元素：**

```
classA_obj[3] = classA_obj[5];
classA_obj[1] = classB_obj; 
```

我试图返回 ClassB 元素的指针。这是我当前的运营商实现：

```
ClassB** ClassA::operator [](int index){
    return &vObject[index]; } 
```

之后我尝试了以下方法：

```
*classA_obj[3] = *classA_obj[5] 
```

仅使用向量完成所有工作的代码是：

```
vector<ClassB*> vObject;
vObject.push_back(new ClassB(ARG1,ARG2));
vObject.push_back(new ClassB(ARG1,ARG2));
vObject[0] = vObject[1]; 
```

我对此感到非常困惑，我认为我的代码是正确的，但实际上它不起作用。如果有人能告诉我我做错了什么，我会很高兴。

*上面的代码只是我实际代码的一个示例。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:00:16.373

如果您返回参考，您将能够进行您要求的更换。

```
class ClassA{
public:
     ClassB*& operator [] (int index) { return vObject[index]; }
private:
     std::vector<ClassB*> vObject
}; 
```

但是，您描述用法的方式似乎表明您可以轻松更改向量以保存`ClassB`对象而不是指针。

```
class ClassA{
public:
     ClassB& operator [] (int index) { return vObject[index]; }
private:
     std::vector<ClassB> vObject
}; 
```

然后不用推`new ClassB`入向量，只需推`ClassB`：

```
vObject.push_back(ClassB(ARG1,ARG2));
vObject.push_back(ClassB(ARG1,ARG2)); 
```

这样做的好处是您不需要显式访问您的容器来删除指针。否则，您将需要更新`ClassA`以遵守[三规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:01:36.497

普通`std::vector`返回一个引用，所以你应该尝试一下：

```
ClassB*& ClassA::operator [](int index)
{
     return vObject[index]; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:03:17.900

```
In the definition:
class A {
  public:
          ClassB*& operator [] (int index) { return vObject.at(index); };
  private:
          vector<ClassB*> vObject;
} 
```

这是一个`inline function`，没有什么可做的。但是，我会检查`index`是否理智。

# c# - 如何在 MassTransit 中配置多个消息使用者？

> ID：11885135
> 
> 赞同：6
> 
> 时间：2012-08-09T13:58:38.267
> 
> 标签：c#, publish-subscribe, servicebus, masstransit

我正在考虑使用[MassTransit](http://masstransit-project.org)将事件从一个进程发布到关心该事件的所有其他进程。在我的环境中，订阅该事件的多个进程可以在同一个盒子上运行。

基于 MassTransit 的示例代码，这是一个非常简单的概念验证，它不尝试处理多播（流程也将分布在许多机器上）。将下面的“消息”视为“事件”，并且我希望此过程的每个实例都能获取该消息：

```
using System;
using MassTransit;

namespace BasicPubSub
{
    public class Message
    {
        public String Text { get; set; }
    }

    public class Program
    {
        static void Main(string[] args)
        {
            //initialize the bus
            var bus = ServiceBusFactory.New(sbc =>
            {
                sbc.UseMsmq();

                //cause the DTC and MSMQ to get installed/fixed if needed.
                sbc.VerifyMsDtcConfiguration();
                sbc.VerifyMsmqConfiguration();

                //sbc.UseMulticastSubscriptionClient();//Doesn't behave for a private queue.
                sbc.ReceiveFrom("msmq://localhost/test_queue");

                //Listen for interesting events.
                sbc.Subscribe(subs =>
                {
                    subs.Handler<Message>(msg => Console.WriteLine(msg.Text));
                });
            });

            //stay open until the user types "exit"
            var message = "";
            do
            {
                message = Console.ReadLine();
                //broadcast the message
                bus.Publish(new Message { Text = message });
            } while (message != "exit");
        }
    }
} 
```

如果我运行此 C# 应用程序的多个实例，则只有一个实例接收到消息，但我需要所有实例来接收它。这种行为与队列的经典概念是一致的，所以我很好。

我想知道的是我是否可以使用 MSMQ/MassTransit 发布一条所有订阅者都会收到的消息，而不是一个订阅者将其出列而其他订阅者不接收它。也许我正在尝试使用锤子并且需要画笔？

在这里要明确一点，我不打算为不同类型的消息共享单个队列，我希望使用 MT 和 MSMQ 为特定类型的消息设置“点对点”发布订阅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:43:55.327

我不确定锤子或画笔，但我认为你正朝着正确的方向前进。

首先，总线的每个实例都需要它自己的队列来读取。如果您正在运行同一程序的多个版本，请确保它们正在读取不同的队列。尝试从同一队列中读取会导致 Bad Stuff(TM)。

如果您有更多问题，请加入邮件列表。[https://groups.google.com/forum/#!forum/masstransit-discuss](https://groups.google.com/forum/#!forum/masstransit-discuss)。

发布时，[所有消费者都应该](http://masstransit.readthedocs.org/en/latest/overview/publishing.html)在订阅后收到消息。启动时订阅数据可能需要一两秒钟才能传递给所有进程。

我还建议看看 RabbitMQ。除非您绝对需要 DTC，否则 RabbitMQ 是一个更强大的消息传递平台。

# spring-mvc - 如何国际化车把 + 主干视图？

> ID：11885136
> 
> 赞同：5
> 
> 时间：2012-08-09T13:58:38.610
> 
> 标签：spring-mvc, backbone.js, localization, internationalization, handlebars.js

我希望能够将骨干网 + Handlebars 应用程序国际化，但我不清楚最好的方法是什么。国际化骨干网 + Handlebar 视图是否有任何特定的最佳实践？

在服务器端，我使用 SpringMVC 并可以访问标准的 java 国际化设施。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T16:49:52.453

这里有一些非常好的关于客户端国际化的资源。

[http://2012.jsconf.eu/speaker/2012/08/28/client-side-internationalization.html](http://2012.jsconf.eu/speaker/2012/08/28/client-side-internationalization.html)非常值得一看，它很好地解释了国际化问题，并且以 java 脚本为重点。

[http://alexsexton.com/blog/2012/03/the-ux-of-language/](http://alexsexton.com/blog/2012/03/the-ux-of-language/)关于国际化的好文章

用于国际化的 JavaScript 库：

*   [https://github.com/SlexAxton/messageformat.js](https://github.com/SlexAxton/messageformat.js)
*   [http://slexaxton.github.com/Jed/](http://slexaxton.github.com/Jed/)

标准：

*   [http://userguide.icu-project.org/formatparse/messages](http://userguide.icu-project.org/formatparse/messages)（非常有用的阅读）
*   [http://cldr.unicode.org/](http://cldr.unicode.org/)（更多参考）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:03:07.747

目前我正在使用一个具有（非常有限的）国际化的应用程序，我将一个对象与模型混合在一起，然后将其发送到`Backbone.Marionette.Renderer.render`函数中的模板。如果你有一个类似的中心函数来呈现你的模板（我假设你有），你可以在那里执行这个逻辑。例如，您可以在命名空间中混合国际化内容（预先选择的语言）

数据 = _.extend（模型，{t：翻译（：荷兰语））

留下如何从后端到前端的翻译，但我对 SpringMVC 的了解还不够，无法就此提供建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-18T16:28:20.997

我们在 Require/Backbone/Handlebars 应用程序中使用 i18next ( [http://i18next.com](http://i18next.com) )，效果非常好。它支持复数和上下文形式，并且有从 PO 到 JSON 的转换器，反之亦然。（PO 在这里被广泛用于翻译。）文档很干净并且充满了有用的示例。

可以在 Handlebars 中使用静态键（字符串）或动态变量。您必须设置自己的 Handlebars 助手，但 i18next 的文档为此提供了示例代码。

在这篇文章中，我添加了更多的实现细节： [https ://stackoverflow.com/a/17728920/621690](https://stackoverflow.com/a/17728920/621690)

# java - 尝试在 64 位 Windows 7 操作系统上使用颚

> ID：11885140
> 
> 赞同：1
> 
> 时间：2012-08-09T13:58:52.363
> 
> 标签：java, c++, 64-bit, native

几年前，我在我的 32 位系统上创建了一个 Java 聊天应用程序，并使用本机代码在收到消息并最小化窗口时实现窗口闪烁。我重新编译了使用 64 位编译器进行闪烁的 C++ 代码，并且我拥有 64 位 JRE 版本。但是，当尝试运行闪存时，出现异常。

下面是 C++ 代码，下面是日志文件的输出。感谢您的任何见解。

```
#include "FlashWindow.h"
#include <jawt_md.h>
#include <assert.h>

// Handle to JAWT
//HMODULE hJAWT = NULL;

JNIEXPORT void JNICALL Java_chatwindow_FlashWindow_flashWindow(JNIEnv* env, jobject obj, jobject panel)
{
    JAWT awt;
    JAWT_DrawingSurface* ds;
    JAWT_DrawingSurfaceInfo* dsi;
    JAWT_Win32DrawingSurfaceInfo* dsi_win;

    jboolean result;
    jint lock;

    // Call to get JAWT handle
    typedef jboolean (JNICALL *PJAWT_GETAWT)(JNIEnv*, JAWT*);

    HMODULE hJAWT = 0;

    wchar_t* path1 = L"jawt.dll";
    wchar_t* path2 = L"awt.dll";

    if (!hJAWT)
        hJAWT = LoadLibraryW(path1);
    if (!hJAWT)
        hJAWT = LoadLibraryW(path2);

    //PJAWT_GETAWT JAWT_GetAWT = (PJAWT_GETAWT)GetProcAddress(hJAWT, "_JAWT_GetAWT@8");

    PJAWT_GETAWT JAWT_GetAWT = (PJAWT_GETAWT)GetProcAddress(hJAWT, "JAWT_GetAWT"); // newer version 1.6

    // Get the AWT
    awt.version = JAWT_VERSION_1_4;
    result = JAWT_GetAWT(env, &awt);
    assert(result != JNI_FALSE);

    // Get the drawing surface
    ds = awt.GetDrawingSurface(env, panel);
    if (ds == NULL)
        return;

    // Lock the drawing surface
    lock = ds->Lock(ds);
    assert((lock & JAWT_LOCK_ERROR) == 0);

    // Get the drawing surface info
    dsi = ds->GetDrawingSurfaceInfo(ds);

    // Get the platform-specific drawing info
    dsi_win = (JAWT_Win32DrawingSurfaceInfo*)dsi->platformInfo;

    FlashWindow(dsi_win->hwnd, TRUE);

    // Free the drawing surface info
    ds->FreeDrawingSurfaceInfo(dsi);

    // Unlock the drawing surface
    ds->Unlock(ds);

    // Free the drawing surface
    awt.FreeDrawingSurface(ds);
}

This is the Log file:

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0000000000000000, pid=4484, tid=8596
#
# JRE version: 7.0_05-b06
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.1-b03 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  0x0000000000000000
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x0000000009ecf800):  JavaThread "AWT-EventQueue-0" [_thread_in_native, id=8596, stack(0x000000000a630000,0x000000000a730000)]

siginfo: ExceptionCode=0xc0000005, ExceptionInformation=0x0000000000000008 0x0000000000000000

Registers:
RAX=0x0000000000000006, RBX=0x00000000bc26a520, RCX=0x0000000009ecf9d8, RDX=0x000000000a72e240
RSP=0x000000000a72e1e8, RBP=0x000000000a72e310, RSI=0x00000000bbc62df8, RDI=0x00000000021a63d3
R8 =0x000000000a72c408, R9 =0x000000000a72c690, R10=0x0000000000000000, R11=0x0000000000000246
R12=0x0000000000000000, R13=0x00000000bc26a520, R14=0x000000000a72e338, R15=0x0000000009ecf800
RIP=0x0000000000000000, EFLAGS=0x0000000000010206

Top of Stack: (sp=0x000000000a72e1e8)
0x000000000a72e1e8:   000007fefc0310e0 000007fefc0392e4
0x000000000a72e1f8:   0000000000000000 00000000777d0000
0x000000000a72e208:   00000000000003be 000007fefc0392a8
0x000000000a72e218:   00000000bbc62df8 0000000009ec9840
0x000000000a72e228:   000000006c550000 000000000a72e798
0x000000000a72e238:   000007fefc039290 0000000000010004
0x000000000a72e248:   0000000009ebbe28 00000000bbc62df8
0x000000000a72e258:   00000000021a63d3 00000000bc26a520
0x000000000a72e268:   00000000021b2215 0000000009ebbe00
0x000000000a72e278:   0000000000000000 000000000a72e310
0x000000000a72e288:   0000000009ebbe68 00000000fffffffe
0x000000000a72e298:   00000000021b2388 0000000009ecf9d8
0x000000000a72e2a8:   000000000a72e338 000000000a72e330
0x000000000a72e2b8:   00000000bb6b399b 0000000009ecf800
0x000000000a72e2c8:   000000000a72e398 000000000a72e2d0
0x000000000a72e2d8:   00000000bc26a520 000000000a72e338 

Instructions: (pc=0x0000000000000000)
0x00000000ffffffe0:   

Register to memory mapping:

RAX=0x0000000000000006 is an unknown value
RBX=0x00000000bc26a520 is an oop
{method} 
 - klass: {other class}
RCX=0x0000000009ecf9d8 is an unknown value
RDX=0x000000000a72e240 is pointing into the stack for thread: 0x0000000009ecf800
RSP=0x000000000a72e1e8 is pointing into the stack for thread: 0x0000000009ecf800
RBP=0x000000000a72e310 is pointing into the stack for thread: 0x0000000009ecf800
RSI=0x00000000bbc62df8 is an oop
{instance class} 
 - klass: {other class}
RDI=0x00000000021a63d3 is an Interpreter codelet
return entry points  [0x00000000021a5820, 0x00000000021a7620]  7680 bytes
R8 =0x000000000a72c408 is pointing into the stack for thread: 0x0000000009ecf800
R9 =0x000000000a72c690 is pointing into the stack for thread: 0x0000000009ecf800
R10=0x0000000000000000 is an unknown value
R11=0x0000000000000246 is an unknown value
R12=0x0000000000000000 is an unknown value
R13=0x00000000bc26a520 is an oop
{method} 
 - klass: {other class}
R14=0x000000000a72e338 is pointing into the stack for thread: 0x0000000009ecf800
R15=0x0000000009ecf800 is a thread

Stack: [0x000000000a630000,0x000000000a730000],  sp=0x000000000a72e1e8,  free space=1016k
Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  chatwindow.FlashWindow.flashWindow(Ljava/awt/Window;)V+0
j  chatwindow.FlashWindow.actionPerformed(Ljava/awt/event/ActionEvent;)V+5
j  javax.swing.Timer.fireActionPerformed(Ljava/awt/event/ActionEvent;)V+35
j  javax.swing.Timer$DoPostEvent.run()V+74
j  java.awt.event.InvocationEvent.dispatch()V+47
j  java.awt.EventQueue.dispatchEventImpl(Ljava/awt/AWTEvent;Ljava/lang/Object;)V+21
j  java.awt.EventQueue.access$000(Ljava/awt/EventQueue;Ljava/awt/AWTEvent;Ljava/lang/Object;)V+3
j  java.awt.EventQueue$3.run()Ljava/lang/Void;+12
j  java.awt.EventQueue$3.run()Ljava/lang/Object;+1
v  ~StubRoutines::call_stub
j  java.security.AccessController.doPrivileged(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;)Ljava/lang/Object;+0
j  java.security.ProtectionDomain$1.doIntersectionPrivilege(Ljava/security/PrivilegedAction;Ljava/security/AccessControlContext;Ljava/security/AccessControlContext;)Ljava/lang/Object;+28
j  java.awt.EventQueue.dispatchEvent(Ljava/awt/AWTEvent;)V+46
j  java.awt.EventDispatchThread.pumpOneEventForFilters(I)V+245
j  java.awt.EventDispatchThread.pumpEventsForFilter(ILjava/awt/Conditional;Ljava/awt/EventFilter;)V+48
j  java.awt.EventDispatchThread.pumpEventsForHierarchy(ILjava/awt/Conditional;Ljava/awt/Component;)V+11
j  java.awt.EventDispatchThread.pumpEvents(ILjava/awt/Conditional;)V+4
j  java.awt.EventDispatchThread.pumpEvents(Ljava/awt/Conditional;)V+3
j  java.awt.EventDispatchThread.run()V+9
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x000000000b387000 JavaThread "Thread-6" [_thread_in_native, id=1524, stack(0x000000000e6e0000,0x000000000e7e0000)]
  0x0000000009fbb800 JavaThread "Thread-5" [_thread_in_native, id=23732, stack(0x000000000e340000,0x000000000e440000)]
  0x0000000009fba800 JavaThread "Thread-4" [_thread_blocked, id=6708, stack(0x000000000e480000,0x000000000e580000)]
  0x000000000b5e1000 JavaThread "TimerQueue" daemon [_thread_blocked, id=20876, stack(0x000000000def0000,0x000000000dff0000)]
  0x0000000001c2c000 JavaThread "DestroyJavaVM" [_thread_blocked, id=14396, stack(0x00000000020a0000,0x00000000021a0000)]
=>0x0000000009ecf800 JavaThread "AWT-EventQueue-0" [_thread_in_native, id=8596, stack(0x000000000a630000,0x000000000a730000)]
  0x0000000009e71800 JavaThread "AWT-Windows" daemon [_thread_in_native, id=16484, stack(0x000000000a4b0000,0x000000000a5b0000)]
  0x0000000009e70800 JavaThread "AWT-Shutdown" [_thread_blocked, id=4076, stack(0x0000000009b70000,0x0000000009c70000)]
  0x00000000085a0800 JavaThread "Java2D Disposer" daemon [_thread_blocked, id=8804, stack(0x000000000a250000,0x000000000a350000)]
  0x000000000856c000 JavaThread "Service Thread" daemon [_thread_blocked, id=8644, stack(0x0000000009a20000,0x0000000009b20000)]
  0x0000000008560800 JavaThread "C2 CompilerThread1" daemon [_thread_blocked, id=8480, stack(0x0000000009590000,0x0000000009690000)]
  0x0000000008557000 JavaThread "C2 CompilerThread0" daemon [_thread_blocked, id=7688, stack(0x00000000098f0000,0x00000000099f0000)]
  0x0000000008555000 JavaThread "Attach Listener" daemon [_thread_blocked, id=8840, stack(0x0000000009700000,0x0000000009800000)]
  0x0000000008553800 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=23208, stack(0x0000000009460000,0x0000000009560000)]
  0x00000000084ce800 JavaThread "Finalizer" daemon [_thread_blocked, id=8204, stack(0x0000000009340000,0x0000000009440000)]
  0x00000000084c3800 JavaThread "Reference Handler" daemon [_thread_blocked, id=16568, stack(0x0000000009150000,0x0000000009250000)]

Other Threads:
  0x00000000084bd800 VMThread [stack: 0x0000000008fe0000,0x00000000090e0000] [id=12092]
  0x0000000008577000 WatcherThread [stack: 0x0000000009cd0000,0x0000000009dd0000] [id=25236]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 PSYoungGen      total 18944K, used 5492K [0x00000000ead60000, 0x00000000ec280000, 0x0000000000000000)
  eden space 16256K, 17% used [0x00000000ead60000,0x00000000eb023b38,0x00000000ebd40000)
  from space 2688K, 99% used [0x00000000ebd40000,0x00000000ebfd9780,0x00000000ebfe0000)
  to   space 2688K, 0% used [0x00000000ebfe0000,0x00000000ebfe0000,0x00000000ec280000)
 ParOldGen       total 43328K, used 1169K [0x00000000c0800000, 0x00000000c3250000, 0x00000000ead60000)
  object space 43328K, 2% used [0x00000000c0800000,0x00000000c0924768,0x00000000c3250000)
 PSPermGen       total 21248K, used 13781K [0x00000000bb600000, 0x00000000bcac0000, 0x00000000c0800000)
  object space 21248K, 64% used [0x00000000bb600000,0x00000000bc375570,0x00000000bcac0000)

Code Cache  [0x00000000021a0000, 0x0000000002410000, 0x00000000051a0000)
 total_blobs=545 nmethods=91 adapters=405 free_code_cache=48341Kb largest_free_block=49473088

Compilation events (10 events):
Event: 7.678 Thread 0x0000000008557000 nmethod 83 0x000000000226c290 code [0x000000000226c400, 0x000000000226c518]
Event: 7.679 Thread 0x0000000008560800 nmethod 84 0x000000000226da10 code [0x000000000226db60, 0x000000000226dcb8]
Event: 7.679 Thread 0x0000000008557000   85   !         sun.awt.AppContext::get (121 bytes)
Event: 7.681 Thread 0x0000000008560800   86  s          java.util.Hashtable::get (69 bytes)
Event: 7.684 Thread 0x0000000008560800 nmethod 86 0x000000000226d190 code [0x000000000226d2e0, 0x000000000226d818]
Event: 7.687 Thread 0x0000000008557000 nmethod 85 0x000000000226b450 code [0x000000000226b5c0, 0x000000000226bdd8]
Event: 8.873 Thread 0x0000000008560800   87             java.awt.Component::getTreeLock (4 bytes)
Event: 8.874 Thread 0x0000000008560800 nmethod 87 0x000000000226cf90 code [0x000000000226d0c0, 0x000000000226d118]
Event: 11.592 Thread 0x0000000008557000   88             java.util.Hashtable$Enumerator::hasMoreElements (53 bytes)
Event: 11.595 Thread 0x0000000008557000 nmethod 88 0x000000000226cc10 code [0x000000000226cd40, 0x000000000226ceb8]

GC Heap History (2 events):
Event: 6.628 GC heap before
{Heap before GC invocations=1 (full 0):
 PSYoungGen      total 18944K, used 16256K [0x00000000ead60000, 0x00000000ec280000, 0x0000000000000000)
  eden space 16256K, 100% used [0x00000000ead60000,0x00000000ebd40000,0x00000000ebd40000)
  from space 2688K, 0% used [0x00000000ebfe0000,0x00000000ebfe0000,0x00000000ec280000)
  to   space 2688K, 0% used [0x00000000ebd40000,0x00000000ebd40000,0x00000000ebfe0000)
 ParOldGen       total 43328K, used 0K [0x00000000c0800000, 0x00000000c3250000, 0x00000000ead60000)
  object space 43328K, 0% used [0x00000000c0800000,0x00000000c0800000,0x00000000c3250000)
 PSPermGen       total 21248K, used 12632K [0x00000000bb600000, 0x00000000bcac0000, 0x00000000c0800000)
  object space 21248K, 59% used [0x00000000bb600000,0x00000000bc2562f0,0x00000000bcac0000)
Event: 6.648 GC heap after
Heap after GC invocations=1 (full 0):
 PSYoungGen      total 18944K, used 2661K [0x00000000ead60000, 0x00000000ec280000, 0x0000000000000000)
  eden space 16256K, 0% used [0x00000000ead60000,0x00000000ead60000,0x00000000ebd40000)
  from space 2688K, 99% used [0x00000000ebd40000,0x00000000ebfd9780,0x00000000ebfe0000)
  to   space 2688K, 0% used [0x00000000ebfe0000,0x00000000ebfe0000,0x00000000ec280000)
 ParOldGen       total 43328K, used 1169K [0x00000000c0800000, 0x00000000c3250000, 0x00000000ead60000)
  object space 43328K, 2% used [0x00000000c0800000,0x00000000c0924768,0x00000000c3250000)
 PSPermGen       total 21248K, used 12632K [0x00000000bb600000, 0x00000000bcac0000, 0x00000000c0800000)
  object space 21248K, 59% used [0x00000000bb600000,0x00000000bc2562f0,0x00000000bcac0000)
}

Deoptimization events (10 events):
Event: 1.110 Thread 0x0000000009ecf800 Uncommon trap -34 fr.pc 0x0000000002217520
Event: 1.110 Thread 0x0000000009ecf800 Uncommon trap -34 fr.pc 0x0000000002217520
Event: 1.346 Thread 0x0000000009ecf800 Uncommon trap -83 fr.pc 0x00000000022253f4
Event: 1.599 Thread 0x0000000009ecf800 Uncommon trap 43 fr.pc 0x00000000022178d8
Event: 1.784 Thread 0x0000000009ecf800 Uncommon trap -83 fr.pc 0x000000000221fda0
Event: 3.203 Thread 0x0000000001c2c000 Uncommon trap -83 fr.pc 0x0000000002231340
Event: 3.265 Thread 0x0000000009ecf800 Uncommon trap -83 fr.pc 0x0000000002230f2c
Event: 5.264 Thread 0x0000000009ecf800 Uncommon trap -83 fr.pc 0x0000000002230ba8
Event: 5.354 Thread 0x000000000b442000 Uncommon trap -28 fr.pc 0x000000000225b1e0
Event: 5.496 Thread 0x000000000b442000 Uncommon trap 216 fr.pc 0x0000000002264ed0

Internal exceptions (10 events):
Event: 5.454 Thread 0x0000000009fbb800 Threw 0x00000000ebcec140 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 5.473 Thread 0x0000000009fbb800 Threw 0x00000000ebcf7e40 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 7.565 Thread 0x0000000009ecf800 Threw 0x00000000ead944e8 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 7.570 Thread 0x0000000009ecf800 Threw 0x00000000ead9e420 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 7.578 Thread 0x0000000009ecf800 Threw 0x00000000eadab9d0 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 7.581 Thread 0x0000000009ecf800 Threw 0x00000000eadafd50 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 7.582 Thread 0x0000000009ecf800 Threw 0x00000000eadb1f20 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 7.669 Thread 0x0000000009ecf800 Threw 0x00000000eaed1798 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 7.675 Thread 0x0000000009ecf800 Threw 0x00000000eaeec558 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 7.686 Thread 0x0000000009ecf800 Threw 0x00000000eaefbaf0 at C:\jdk7u1_64p\jdk7u5\hotspot\src\share\vm\prims\jvm.cpp:1166

Events (10 events):
Event: 11.595 Executing VM operation: RevokeBias
Event: 11.595 Executing VM operation: RevokeBias done
Event: 11.595 Executing VM operation: RevokeBias
Event: 11.595 Executing VM operation: RevokeBias done
Event: 11.596 Executing VM operation: RevokeBias
Event: 11.596 Executing VM operation: RevokeBias done
Event: 11.597 Executing VM operation: RevokeBias
Event: 11.597 Executing VM operation: RevokeBias done
Event: 11.599 Executing VM operation: RevokeBias
Event: 11.599 Executing VM operation: RevokeBias done

Dynamic libraries:
0x000000003f800000 - 0x000000003f833000     C:\Windows\system32\java.exe
0x00000000777d0000 - 0x0000000077979000     C:\Windows\SYSTEM32\ntdll.dll
0x00000000770f0000 - 0x000000007720f000     C:\Windows\system32\kernel32.dll
0x00000000fdf30000 - 0x00000000fdf9c000     C:\Windows\system32\KERNELBASE.dll
0x00000000ff4b0000 - 0x00000000ff58b000     C:\Windows\system32\ADVAPI32.dll
0x00000000ff7e0000 - 0x00000000ff87f000     C:\Windows\system32\msvcrt.dll
0x00000000ff880000 - 0x00000000ff89f000     C:\Windows\SYSTEM32\sechost.dll
0x00000000fefc0000 - 0x00000000ff0ed000     C:\Windows\system32\RPCRT4.dll
0x00000000774c0000 - 0x00000000775ba000     C:\Windows\system32\USER32.dll
0x00000000ff770000 - 0x00000000ff7d7000     C:\Windows\system32\GDI32.dll
0x00000000ff970000 - 0x00000000ff97e000     C:\Windows\system32\LPK.dll
0x00000000ff5a0000 - 0x00000000ff669000     C:\Windows\system32\USP10.dll
0x00000000fc5f0000 - 0x00000000fc7e4000     C:\Windows\WinSxS\amd64_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_fa396087175ac9ac\COMCTL32.dll
0x00000000ffa60000 - 0x00000000ffad1000     C:\Windows\system32\SHLWAPI.dll
0x00000000fef70000 - 0x00000000fef9e000     C:\Windows\system32\IMM32.DLL
0x00000000ff3a0000 - 0x00000000ff4a9000     C:\Windows\system32\MSCTF.dll
0x000000006c6f0000 - 0x000000006c7c1000     C:\Program Files\Java\jre7\bin\msvcr100.dll
0x00000000611f0000 - 0x000000006190a000     C:\Program Files\Java\jre7\bin\server\jvm.dll
0x00000000f9af0000 - 0x00000000f9af9000     C:\Windows\system32\WSOCK32.dll
0x00000000ff920000 - 0x00000000ff96d000     C:\Windows\system32\WS2_32.dll
0x00000000ff590000 - 0x00000000ff598000     C:\Windows\system32\NSI.dll
0x00000000fb0c0000 - 0x00000000fb0fb000     C:\Windows\system32\WINMM.dll
0x0000000077990000 - 0x0000000077997000     C:\Windows\system32\PSAPI.DLL
0x0000000071700000 - 0x000000007170f000     C:\Program Files\Java\jre7\bin\verify.dll
0x000000006dca0000 - 0x000000006dcc8000     C:\Program Files\Java\jre7\bin\java.dll
0x0000000070a90000 - 0x0000000070aa5000     C:\Program Files\Java\jre7\bin\zip.dll
0x000000006c550000 - 0x000000006c6e4000     C:\Program Files\Java\jre7\bin\awt.dll
0x00000000ff980000 - 0x00000000ffa57000     C:\Windows\system32\OLEAUT32.dll
0x00000000ff190000 - 0x00000000ff393000     C:\Windows\system32\ole32.dll
0x00000000fb4a0000 - 0x00000000fb4b8000     C:\Windows\system32\DWMAPI.DLL
0x00000000fb8d0000 - 0x00000000fb926000     C:\Windows\system32\uxtheme.dll
0x00000000fdb20000 - 0x00000000fdb2f000     C:\Windows\system32\CRYPTBASE.dll
0x00000000fe1e0000 - 0x00000000fef68000     C:\Windows\system32\SHELL32.dll
0x000000006da90000 - 0x000000006dac4000     C:\Program Files\Java\jre7\bin\fontmanager.dll
0x000000006df30000 - 0x000000006df49000     C:\Program Files\Java\jre7\bin\net.dll
0x00000000fd400000 - 0x00000000fd455000     C:\Windows\system32\mswsock.dll
0x00000000fd3f0000 - 0x00000000fd3f7000     C:\Windows\System32\wship6.dll
0x000000006ddb0000 - 0x000000006ddc1000     C:\Program Files\Java\jre7\bin\nio.dll
0x000000006da40000 - 0x000000006da81000     C:\Program Files\Java\jre7\bin\t2k.dll
0x00000000fbc90000 - 0x00000000fbcb2000     C:\JavaChat\JavaClient\Versions\2007\9_30_2007\TrayIcon12.dll
0x00000000ff6d0000 - 0x00000000ff769000     C:\Windows\system32\CLBCatQ.DLL
0x00000000fb330000 - 0x00000000fb45a000     C:\Windows\system32\WindowsCodecs.dll
0x00000000fdac0000 - 0x00000000fdb17000     C:\Windows\system32\apphelp.dll
0x00000000f5350000 - 0x00000000f5385000     C:\Windows\system32\EhStorShell.dll
0x00000000fe000000 - 0x00000000fe1d7000     C:\Windows\system32\SETUPAPI.dll
0x00000000fdfa0000 - 0x00000000fdfd6000     C:\Windows\system32\CFGMGR32.dll
0x00000000fdfe0000 - 0x00000000fdffa000     C:\Windows\system32\DEVOBJ.dll
0x00000000fc470000 - 0x00000000fc59c000     C:\Windows\system32\PROPSYS.dll
0x00000000f3360000 - 0x00000000f39d2000     C:\PROGRA~1\MICROS~2\Office14\GROOVEEX.DLL
0x00000000738b0000 - 0x0000000073953000     C:\Windows\WinSxS\amd64_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.6161_none_08e61857a83bc251\MSVCR90.dll
0x0000000073290000 - 0x0000000073363000     C:\Windows\WinSxS\amd64_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.6161_none_08e61857a83bc251\MSVCP90.dll
0x0000000071f90000 - 0x0000000071fbf000     C:\Windows\WinSxS\amd64_microsoft.vc90.atl_1fc8b3b9a1e18e3b_9.0.30729.6161_none_0a1fd3a3a768b895\ATL90.DLL
0x00000000f2f40000 - 0x00000000f335a000     C:\PROGRA~1\COMMON~1\MICROS~1\OFFICE14\Cultures\office.odf
0x00000000f26d0000 - 0x00000000f2f35000     C:\PROGRA~1\MICROS~2\Office14\1033\GrooveIntlResource.dll
0x00000000f51a0000 - 0x00000000f5220000     C:\Windows\system32\ntshrui.dll
0x00000000fd820000 - 0x00000000fd843000     C:\Windows\system32\srvcli.dll
0x00000000f5060000 - 0x00000000f506f000     C:\Windows\system32\cscapi.dll
0x00000000fabf0000 - 0x00000000fabfb000     C:\Windows\system32\slc.dll
0x00000000619e0000 - 0x0000000061a1d000     C:\Windows\system32\pfmshx_70A.dll
0x00000000fda80000 - 0x00000000fdaa5000     C:\Windows\system32\SspiCli.dll
0x00000000fce10000 - 0x00000000fce17000     C:\Windows\System32\wshtcpip.dll
0x00000000f5e40000 - 0x00000000f5e6e000     C:\Program Files\Common Files\Microsoft Shared\Windows Live\WLIDNSP.DLL
0x00000000fd7c0000 - 0x00000000fd81b000     C:\Windows\system32\DNSAPI.dll
0x0000000071f50000 - 0x0000000071f76000     C:\Program Files\Bonjour\mdnsNSP.dll
0x00000000fa9e0000 - 0x00000000faa07000     C:\Windows\system32\Iphlpapi.DLL
0x00000000fa9a0000 - 0x00000000fa9ab000     C:\Windows\system32\WINNSI.DLL
0x00000000f5e30000 - 0x00000000f5e38000     C:\Windows\system32\rasadhlp.dll
0x00000000fa860000 - 0x00000000fa8b3000     C:\Windows\System32\fwpuclnt.dll
0x00000000fc030000 - 0x00000000fc042000     C:\JavaChat\JavaClient\Versions\2007\9_30_2007\flashwindow.dll
0x00000000f5c70000 - 0x00000000f5d95000     C:\Windows\system32\dbghelp.dll

VM Arguments:
java_command: main.JavaChatClient
Launcher Type: SUN_STANDARD

Environment Variables:
CLASSPATH=.;C:\Program Files (x86)\Java\jre6\lib\ext\QTJava.zip
PATH=C:\Windows\system32;C:\Windows;C:\Windows\system32\wbem;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\System32\WindowsPowerShell\v1.0;C:\Program Files\Dell\Dell Wireless WLAN Card;C:\Program Files (x86)\Common Files\Roxio Shared\DLLShared;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\QuickTime\QTSystem
USERNAME=Chris
OS=Windows_NT
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 23 Stepping 10, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows 7 , 64 bit Build 7601 Service Pack 1

CPU:total 2 (2 cores per cpu, 1 threads per core) family 6 model 23 stepping 10, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, tsc

Memory: 4k page, physical 4153716k(907500k free), swap 8305580k(3846420k free)

vm_info: Java HotSpot(TM) 64-Bit Server VM (23.1-b03) for windows-amd64 JRE (1.7.0_05-b06), built on Jun 27 2012 00:54:58 by "java_re" with unknown MS VC++:1600

time: Thu Aug 09 09:36:42 2012
elapsed time: 12 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:25:38.433

这个“异常”意味着你在 C 中访问了一个 NULL 值。

你能检查所有类型在 64 位中都没有变化吗？

也许这适用于 32 位，但无法找到 64 位版本。

```
hJAWT = LoadLibraryW(path2); 
```

Netbeans 有一个调试器，它允许您通过 JNI 在 Java 和 C 中设置断点。这可以帮助您找到确切的线路以及它发生的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T18:54:02.193

有趣的是，我现在实际上正在开发一个非常相似的应用程序并且遇到了一个非常相似的问题。我在 64 位 Windows 7 上运行基于 JAWT 的应用程序，一旦我尝试使用任何代码`JAWT awt;`，它就会爆炸。如果您不介意，请为我尝试几件事，我们可以验证您是否遇到同样的问题（以及它是 Java 问题还是 Windows 问题，而不是我们的问题）：

*   如果您在本机代码中删除所有对 JAWT 的引用，会发生什么情况。仍然调用您的本机函数，但只需删除对 JAWT 的所有引用。这应该会导致`jawt.lib`无法链接。根据我的经验，一旦我删除了对 JAWT 的所有引用，我的应用程序就会停止崩溃。
*   如果您在本机代码中删除所有对您自己的东西的引用并且只做基本的 JAWT 初始化以获取`JAWT_Win32DrawingSurfaceInfo`. 它仍然崩溃吗？根据我的经验，即使本机代码除了初始化 JAWT 什么都不做，我的代码也会崩溃。
*   如果您使用 JRE6 而不是 JRE7 运行会发生什么？对于我来说，我的应用程序在 Java 7 中立即崩溃，但在 Java 6 中运行良好。

有兴趣听听您是否看到相同的问题。我开始怀疑适用于 Windows 7 的 Java 7 是否引入了某种回归。还在做更多的测试。我会发布更多结果，因为我有它们。

==========================================

**更新：** 新的有趣皱纹。事实证明，对我来说，只需使用 System.load(...) 加载链接到jawt.lib 的DLL 就足够了。我什至不必实际拨打本地电话。在渲染我的 Swing GUI 时它仍然会崩溃。

# ruby-on-rails - Cucumber：表不一样

> ID：11885142
> 
> 赞同：1
> 
> 时间：2012-08-09T13:59:06.363
> 
> 标签：ruby-on-rails, testing, cucumber

对于我的一个步骤，我不断收到以下错误：

```
'Tables were not identical (Cucumber::Ast::Table::Different)' 
```

但是控制台中显示的差异并没有什么不同。

这是错误的控制台输出。它试图显示差异的行已用“*”标记

```
 | Date   | Column1  | Column2 | 
 | Jun 08 | Value1   |         |  
 | Jun 06 | Value2   | 2       | 
*| Jun 08 | Value1   |         |  
 | Jun 05 | Value3   |         |  
*| Jun 06 | Value2   | 2       | 
*| Jun 05 | Value3   |         | 
```

我希望只看到下表以绿色传递，因为用 ' * ' 显示的行没有区别（有差异的行）：

```
 | Date   | Column1  | Column2 | 
 | Jun 08 | Value1   |         |  
 | Jun 06 | Value2   | 2       | 
 | Jun 05 | Value3   |         | 
```

任何想法为什么会发生这种情况？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:14:54.207

因此，我通过在我的场景中添加以下内容来解决此问题，该场景在浏览器中打开了 html 页面。：

```
And show me the page 
```

然后我使用 Firebug 检查了上面标有 ' * ' 的行。

我在行中发现了空白，这导致黄瓜明显相同的行不同。

删除了我的代码中的空格并修复了它。

# php - netbeans可以学习类的php自定义函数参数吗？

> ID：11885145
> 
> 赞同：1
> 
> 时间：2012-08-09T13:59:10.707
> 
> 标签：php, netbeans

我有：

```
class myClass {
  function test($arg1,$arg2) {
    echo $arg1 & $arg2;
  }
}

$m = new myClass();
//can I use any kind of annotation to get argument-list of
$m->test(| 
```

//添加//

我猜 Netbeans 本身并不理解 m = myClass，所以类似于

```
$m = newClass();
/* @ var m = class newClass */
/* now nb can list the args when typing.. */
$m->test( 
```

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:08:15.960

如果您需要每个参数的注释，请使用 phpdoc 注释（NetBeans 会自动为您完成）：

只需键入

```
/** 
```

在您的函数定义上方的行上，然后按一下`enter`键。NetBeans 会自动将您的 phpdoc 注释写在您的函数上方的空间中。如果你`return`的函数中有一个，phpdoc 也将为此编写：

```
/**
 *
 * @param type $arg1
 * @param type $arg2
 * @return type
 */
function myFunc($arg1, $arg2) {
    $test = "";
    return $test;
} 
```

然后你只需替换`type`为参数的数据类型，并在参数名称后添加注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T14:22:31.000

在路上找到 [ctrl] + [space]

```
$m->test| 
```

# voip - Cisco 呼叫管理器 api 用于会议设备

> ID：11885146
> 
> 赞同：0
> 
> 时间：2012-08-09T13:59:12.663
> 
> 标签：voip, cisco

我正在尝试实现一些点击拨号功能，如下所示：

1.  用户在网页上找到一个号码（比如员工分机）
2.  单击该分机将拨打我选择的电话号码
3.  接听电话后，我立即“同意”拨打我实际想拨打的号码。

我使用 Twilio API 做了一些非常类似的事情，但我想使用我们公司的 Cisco Call Manager 功能，而不是为这个功能按分钟付费。

WebDialerSOAP 似乎无法为我提供此功能。我认为召开会议会奏效，但找不到任何办法。可能是一个开源呼叫管理器包装器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T21:17:30.017

为什么不在 CUCM 旁边安装 FreeSWITCH 服务器？它可以设置会议，它是最可编程的产品之一，可以根据需要对 API 进行尽可能多的控制。

它还有一个 RTMP 模块，因此您实际上可以在浏览器中运行基于 Flash 的软件电话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-17T09:59:01.600

1.  使用 TAPI3 或 JTAPI
2.  使用 TSP 和应用程序用户连接代码
3.  使用**CreateCall**函数从 HTML 页面中获取数字并实现触发器。
4.  使用**CreateCall**到另一部电话。
5.  用于`Finish(FINISH_MODE.FM_ASCONFERENCE)`完成会议。

# javascript - 动态更改的下拉菜单不会刷新。（雾虫）

> ID：11885147
> 
> 赞同：1
> 
> 时间：2012-08-09T13:59:16.497
> 
> 标签：javascript, jquery, fogbugz

我在fogbugz板上发布了这个，但我希望能得到更快的回应。

下面的脚本执行我希望它执行的操作，除了您需要更改 ixproject 字段（可能是因为我的其他项目不使用子类别）以使用新值更新下拉列表。有没有办法在更改某些 html 元素的值后刷新它们。

```
$(document).ready(function(){
  var categoryChanged = $('#ixCategory');
  var reloadProject = $('#ixProject');
  //  We don't need Schedule Item so remove it.  From our options.
  var removeScheduleItem = document.getElementById("ixCategory");
  var select = document.getElementById("subcategorya85");

  //Remove all options that may exist.  
  function resetSelectBox(){
      var select = document.getElementById("subcategorya85");
      select.options.length = 0;
  }

    //Remove all options before starting.  
    $(document).ready(function() {
      resetSelectBox();
      select.options[0] = new Option("--");
      //removes schedule item from ixcategory
      removeScheduleItem.remove(3);
    });
    categoryChanged.on("change", function(event){
    if (($('#ixCategory')[0].selectedIndex == 0))
    {   
      resetSelectBox();
      select.options[0] = new Option("A", "A");
      select.options[1] = new Option("B", "B");
      select.options[2] = new Option("C", "C");
    } 
    else
    if (($('#ixCategory')[0].selectedIndex == 1)) 
    {
      resetSelectBox();
      select.options[0] = new Option("D", "D");
      select.options[1] = new Option("E", "E");
    }else
    if (($('#ixCategory')[0].selectedIndex == 2)) 
    {
      resetSelectBox();
      select.options[0] = new Option("F", "F");
    }else
    if (($('#ixCategory')[0].selectedIndex == 3)) 
    {
        resetSelectBox();
        select.options[0] = new Option("G", "G");
    }
  }) 
}); 
```

编辑：我将完全相同的脚本复制到 Fiddle 并得到了所需的结果。[http://jsfiddle.net/themaniac27/VNfFH/](http://jsfiddle.net/themaniac27/VNfFH/)

我需要做些什么不同的事情才能让它在 Fogbugz 中工作。这是尝试使用fogbugz on demand 试用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:34:14.023

看起来[fogbugz板给了我一个答案](http://fogbugz.stackexchange.com/questions/10683/dynamically-changed-dropdowns-are-not-refreshing/10695#10695)。

> FogBugz 的下拉列表添加了多种附加功能，因此直接修改它们可能有点棘手。基本上，您需要调用 DropListControl.refresh() 并传入底层 DOM 元素。要考虑的另一件事是 FogBugz 可以从查看案例到编辑案例的 ajaxily 转换。

# java - Java 小程序安全警告

> ID：11885148
> 
> 赞同：1
> 
> 时间：2012-08-09T13:59:18.340
> 
> 标签：java, security, applet

我的安全警告弹出窗口有问题。如果用户点击取消或关闭弹出窗口，浏览器会记住该决定，并且在用户重新启动浏览器之前，我无法再次向他显示安全警告。我怎样才能做到这一点？

到目前为止，我已经尝试过以下代码：

```
 <PARAM NAME="cache_archive" VALUE="xy.jar">

 <PARAM NAME="cache_version" VALUE="0.0.1.0">

 <param name="cache_option" value="no"> 
```

谢谢您的帮助！

# php - 将值从一个 Php 文件传递 到另一个

> ID：11885149
> 
> 赞同：-6
> 
> 时间：2012-08-09T13:59:17.983
> 
> 标签：php, javascript

有谁知道如何将值从 PHP 文件传递​​到 JS 文件，然后将 JS 文件传递​​到 php 文件。实际上我的 PHP 文件称为 JS 文件，然后 JS 文件称为 PHP 文件。是否可以将值从一个 PHP 文件传递​​到另一个不使用表格或链接。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:09:57.587

你能澄清一下，js是在客户端还是服务器端执行？

如果两个 php 文件位于同一服务器中，则可以使用会话变量（[PHP.net 上的 Sessions 参考](http://php.net/manual/en/features.sessions.php)），这样您就不需要 js 文件；

如果它们在不同的服务器中，或者您需要更改客户端的值，您可以使用 json 打印数据，使用 ajax 从 js 文件中发布，然后将其返回到下一个 php 文件中（[PHP 上的 JSON 参考.net](http://mx2.php.net/manual/en/book.json.php) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:02:42.063

是的，您可以用 PHP 编写 JS 文件，以这种方式传递变量。然后，您可以使用从 JS 文件到 PHP 的 AJAX 调用，以这种方式将变量传回。有很多选项，请参阅此[http://webcheatsheet.com/php/passing_javascript_variables_php.php](http://webcheatsheet.com/php/passing_javascript_variables_php.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:03:36.953

您可以将一些值从 Javascript 发布到 PHP 页面，它会返回一个响应。然后相同的 Javascript 代码获取此响应并将其发布到另一个 PHP 页面。

搜索 JQuery 的 $.post 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:02:23.827

一个词：[阿贾克斯](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&output=search&sclient=psy-ab&q=Ajax&oq=&gs_l=&pbx=1&fp=c03c33d1b643a9aa&ion=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&biw=1231&bih=688)

为了便于使用：[JQuery.ajax()](http://api.jquery.com/jQuery.ajax/)

# camera - 相机错误：使用条形码扫描应用程序后找不到相机

> ID：11885160
> 
> 赞同：0
> 
> 时间：2012-08-09T14:00:04.240
> 
> 标签：camera

我使用ZXing库开发了一个条码扫描应用程序。当我使用我的Atrix2和HTC EVO 3D测试应用程序时。它可以工作但它不适用于阿尔卡特ot986。它只是没有响应黑屏。之后我打开默认摄像头应用，显示手机找不到摄像头，重启手机后摄像头正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:15:35.907

使用完相机后，您是否松开了相机？

> 重要提示：调用 release() 以释放相机以供其他应用程序使用。应用程序应立即在 onPause() 中释放相机（并在 onResume() 中重新打开（）它）。

[http://developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html)

# ios - 删除在 ios safari / chrome / firefox 中单击的链接上的灰色背景

> ID：11885161
> 
> 赞同：76
> 
> 时间：2012-08-09T14:00:12.470
> 
> 标签：ios, css, mobile-safari, mobile-chrome

当您在 iOS 的 Safari（或 chrome 或 firefox）中单击（触摸）链接时，链接后面会出现灰色背景（仅当您按住它时）。有没有办法使用 CSS 删除此功能？

请看下面的示例图片：

![在此处输入图像描述](../Images/15b58b33dfd6a6a79c9d8fabc58b2e3d.png)

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-08-09T14:10:00.527

Webkit 有一个特定的样式属性：`-webkit-tap-highlight-color`.

复制自：[http](http://davidwalsh.name/mobile-highlight-color) ://davidwalsh.name/mobile-highlight-color —</p>

```
/* light blue at 80% opacity */
html {
    -webkit-tap-highlight-color: rgba(201, 224, 253, 0.8);
}

/* change it for a div that has a similar background-color to the light blue tap color */
.blueDiv {
    -webkit-tap-highlight-color: rgba(251, 185, 250, 0.9);
} 
```

如果你想完全移除高光——</p>

```
.myButton {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-08-27T17:35:43.417

出于某种原因，最新版本的 iOS 忽略了 RGBA 颜色。

要删除它，我最终不得不使用以下内容：

```
-webkit-tap-highlight-color: transparent; 
```

如此处所述： [https ://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-tap-highlight-color](https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-tap-highlight-color)

# latex - 使用 gnuplot 制作高质量的 eps 图形以包含在乳胶中

> ID：11885164
> 
> 赞同：1
> 
> 时间：2012-08-09T14:00:20.677
> 
> 标签：latex, gnuplot, figures

我使用 gnuplot 通过

```
set term postscript eps color blacktext "Helvetica" 24
set output "filename.eps" 
```

但是，当我将 eps 文件包含在乳胶文件中时，eps 的质量并不令人满意。

我也搜索了很多谷歌并看到了一些网站，例如 [http://www.cs.cityu.edu.hk/~tanrui/eps.html](http://www.cs.cityu.edu.hk/~tanrui/eps.html)，但是，我的数字比他们的更复杂，因此他们的命令不会全力帮助我。我还检查了[GNUPLOT：试图提高质量](https://stackoverflow.com/questions/7277984/gnuplot-trying-to-increase-the-quality)，但我的数字是 eps，而不是 pdf。

有人可以告诉，如何提高数字的质量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T17:18:06.127

您可以尝试提高输出分辨率，例如：

```
set term postscript eps size 1024, 720 color blacktext "Helvetica" 24 
```

然后在乳胶中使用最大图形宽度

```
includegraphics[width = \paperwidth]{yourfigurefilepath} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-08-02T22:57:08.803

我认为这个答案可能会有所帮助：[https](https://stackoverflow.com/a/7584726/2584653) ://stackoverflow.com/a/7584726/2584653 （您只需要使用“eps”而不是“png”作为最终文件）。其实这是我经常使用的东西。

# php - 使用 PHP 获取 XML 文件的内容

> ID：11885169
> 
> 赞同：-1
> 
> 时间：2012-08-09T14:00:38.047
> 
> 标签：php, xml, url, curl, file-get-contents

> **可能重复：**
> [带有 https 的 file_get_contents？](https://stackoverflow.com/questions/1975461/file-get-contents-with-https)
> [使用 SimpleXML 和 PHP 通过 https 获取 XML 内容的问题](https://stackoverflow.com/questions/11883575/problems-getting-xml-content-via-https-using-simplexml-and-php)

我有网址：

加载一个像这样的文件：

```
<calendars>
    <calendar accommodation_id="1234567">
        <day date="2012-08-09" vacancy="false" minimum_nights="7" arrival_day="true"/>
        <day date="2012-08-10" vacancy="false" minimum_nights="3" arrival_day="true"/>
        <day date="2012-08-11" vacancy="false" minimum_nights="3" arrival_day="true"/>
        ...
        <day date="2014-01-31" vacancy="true" minimum_nights="3" arrival_day="true"/>
    </calendar>
</calendars> 
```

出于某种原因，我的脚本不允许我获取该文件的内容。我使用与其他 URL 相同的脚本，但这总是会失败。

我的脚本是：

```
$accom2 = file_get_contents();

print_r($accom2); 
```

我需要为这种类型的 URL 做些什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:04:49.103

可能是这里的答案：（如果协议是问题）

[如何让 file_get_contents() 使用 HTTPS？](https://stackoverflow.com/questions/1975461/file-get-contents-with-https)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:07:02.497

您是否尝试过[simplexml_load_file](http://php.net/manual/en/function.simplexml-load-file.php)，我测试过它对我有用

```
<?php
$xml = simplexml_load_file('https://www.casapilot.com/api/1/accommodations/calendar.xml?auth_token=hyXHjP8QdrRuX8q3FsbC&id[]=1049165');

print_r($xml);
?> 
```

# ios - UIWebView 弹跳回调

> ID：11885171
> 
> 赞同：0
> 
> 时间：2012-08-09T14:00:39.880
> 
> 标签：ios, xcode, cocoa, uiwebview, uiwebviewdelegate

当 UIWebView 中加载的网页因为用户试图滚动到远处而弹跳时，有没有办法捕获回调？

即用户滚动到网页顶部并尝试进一步滚动，然后发生反弹。我想在代码中捕获这样的事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:09:50.960

您可以获得对 webview 的“scrollView”属性的引用，它是一个 UIScrollView 实例，然后检查 contentOffset 以查看它是否为负数。问题是，为了连接到 scrollView 的委托方法`- (void)scrollViewDidScroll:(UIScrollView *)scrollView` ，您需要继承 UIWebView 并将您的子类设置为 scrollView 的委托（scrollView 是 UIWebView 的只读属性）。这有点棘手，但它应该能让你到达你需要的地方。

[这个](https://stackoverflow.com/questions/993280/how-to-detect-when-a-uiscrollview-has-finished-scrolling)问题也可以帮助你。

# objective-c - 在 nstableview 中显示文件属性

> ID：11885177
> 
> 赞同：-1
> 
> 时间：2012-08-09T14:00:57.917
> 
> 标签：objective-c, cocoa, nstableview, nsfilemanager

我想在 tableview 中显示文件的数据。文件存储在目录中。我想在 tableview 中显示：文件的图标、名称、大小和日期。感谢 NSFileManger ，我找到了如何显示目录的内容，但我无法显示我想要的属性。你对它的工作原理、想法、教程有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:10:32.233

获取目录的内容后，在每个文件的路径上调用`NSFileManger`'`attributesOfItemAtPath:error:`方法。该方法返回`NSDictionary`每个特定文件的文件属性。`NSFileType`使用它们的键 - 、`NSFileSize`、等获取您想要的属性`NSFileModificationDate`；所有键都列在[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)中。这将为您提供除图标之外的所有内容，您需要使用[`NSWorkspace`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)'`iconForFile:`方法。

# esb - Mule 3：控制是否允许执行流

> ID：11885181
> 
> 赞同：5
> 
> 时间：2012-08-09T14:01:12.000
> 
> 标签：esb, mule

**我现在的情况：**

我目前有一个 Mule ESB 应用程序，它具有三个流，它们处理来自两个不同来源的消息，这三个流使用 VM 队列绑定在一起。

**流程#1：**

入站（端点 #1）->（执行消息处理和转换）-> 出站（端点 #3）

**流程#2：**

入站（端点 #2）->（执行消息处理和转换）-> 出站（端点 #3）

**流#3**

入站（端点 #3）->（执行消息处理和转换，做一些事情）-> 出站

**问题/问题：**

现在我想做的是引入第四个流，流#4，它从入站端点获取状态信息，并基于此信息能够防止流#3 被执行/阻止它处理其入站消息。

换句话说，我最理想的做法是让流#4 在 ESB 应用程序启动时运行（就像所有流似乎自动执行的那样），并根据它从入站消息中获得的状态信息，阻止/允许或启用/禁用 Flow #3 处理来自 Endpoint #3 的消息。

以下是我理想的要求：

**要求：**

1.  必须能够单独通过 mule 流 XML 来完成，无需额外的 POJO/自定义 Java 对象。
2.  流程 #4 必须在 ESB 应用程序启动时执行，并且只需要处理第一条入站消息。
3.  理想情况下，我不希望 Flow #3 具有复合入站源，或者必须评估每个入站消息的某个全局变量的状态。

完成我想做的事情的最佳方法是什么？

如果没有真正好的解决方案，那么如果我必须省略 #3 要求，那么完成这样一个全局变量的最佳方法是什么，该变量在两个独立的流之间共享，这些流没有被某个出站 - > 入站端点绑定在一起XML 配置？我尝试过使用会话属性，但它们要求将流作为子流或端点绑定在一起。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T16:23:22.980

使用全局属性和一些 MEL 表达式来实现这一点：

```
<global-property name="gate_open" value="true" />

<flow name="gated-flow">
    <vm:inbound-endpoint path="gated.in" />
    <expression-filter expression="#[app.registry.gate_open]" />
    ...
</flow>

<flow name="gate-controller">
    <vm:inbound-endpoint path="gate.in"  />
    <expression-component>
      app.registry.gate_open = false
    </expression-component>
</flow> 
```

发送任何消息`vm://gate.in`将关闭大门并`gated-flow`停止处理它收到的消息。

您可以使用任何您想要的协议来代替 VM。

# asp.net-mvc-3 - 带有 Asp.net MVC 的 KendoUI 图表

> ID：11885183
> 
> 赞同：9
> 
> 时间：2012-08-09T14:01:24.157
> 
> 标签：asp.net-mvc-3, kendo-ui

我正在寻找有关如何使用从数据库中获取的数据在网页上显示 KendoUI 图表的教程和代码示例。更准确地说是一个 ASP.Net MVC 网页；就像需要在服务器端执行的操作才能显示在 KendoUI 图表上显示的控制器方法上计算的数据。

具体问题如下：

1.  KendoUI 是否仅适用于服务，或者我什至可以在 ActionResult 方法中将 ViewModel 对象返回为`return View(vmObj);`？
2.  服务器端是否有返回 KendoUI 图表的代码示例？
3.  KendoUI 是否仅在 MVC 中工作，或者我也可以在 Asp.Net WebForms 中使用它

到目前为止，我看到的 KendoUI 文档仅显示客户端代码，而不是针对 AspNet MVC 开发人员量身定制的。

谢谢你的时间..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T20:02:23.330

Kendo 曾经有一些 ASP.NET MVC 演示，您可以下载并在 Visual Studio 中运行以查看如何绑定到远程数据等，但由于某种原因它们被删除了。这是我根据这些演示制作的一个简单示例：

控制器动作（例如在“ChartsController.cs”中）：

```
public ActionResult Index()
{
    return View();
}
public ActionResult GetChartData()
{
    IEnumerable<ChartModel> chartData = SomeRepository.GetData();
    return Json(chartData);
} 
```

图表模型：

```
public class ChartModel
{
    public ChartModel(string year, int val2, int val3)
    {
        Year = year;
        Val2 = val2;
        Val3 = val3;
    }

    public string Year { get; set; }
    public int Val2 { get; set; }
    public int Val3 { get; set; }
} 
```

查看（“Charts/Index.cshtml”，不包括布局）：

```
<div class="chart-wrapper">
@(Html.Kendo().Chart<ChartExample.Models.ChartModel>()
    .Name("chart")
    .Title("Example Column Chart")
    .Legend(legend => legend
        .Position(ChartLegendPosition.Top)
    )
    .DataSource(ds => ds.Read(read => read.Action("GetChartData", "Charts")))
    .Series(series => {
        series.Column(model => model.Val2).Name("Val2");
        series.Column(model => model.Val3).Name("Val3");
    })
    .CategoryAxis(axis => axis
        .Categories(model => model.Year)
        .Labels(labels => labels.Rotation(-90))
    )
    .ValueAxis(axis => axis.Numeric()
        .Labels(labels => labels.Format("{0:N0}"))
        .MajorUnit(10000)
    )
) 
</div> 
```

此示例使用单独的控制器操作来获取视图和获取图表的数据，但您也可以将它们组合起来，`return View(chartData);`并在您的视图中拥有和仅拥有：

```
@model IEnumerable<ChartExample.Models.ChartModel>
<div>
    @(Html.Kendo().Chart(Model)
        // just don't include the ".DataSource" line
        // ...
    )
</div> 
```

不幸的是，我不能告诉你它是否可以使用 Webforms 来完成，因为我以前从未使用过它。希望这可以帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-18T08:00:00.647

Kendo UI 为 ASP.NET MVC 提供官方包装器。

它们取代了旧的 Telerik Extensions for ASP.NET MVC。现有用户应该查看[迁移指南](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/migration/migrating-from-telerik-extensions-for-aspnet-mvc)。完整的文档是[docs.kendoui.c​​om 站点](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/introduction)的一部分。

[试用版](http://www.kendoui.com/download.aspx)包含服务器端包装器和离线演示。您可以在包的`wrappers\aspnetmvc`文件夹中找到它们`kendoui.trial.x.y.z.zip`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T17:33:03.163

以下是您的问题的一些答案（未分类）

1.  看看[这里](http://demos.telerik.com/aspnet-mvc/chart)的这个演示——我猜它会满足你的需求。使用图表下方的按钮检查视图/控制器和模型
2.  请注意，即使集合被传递到服务器上的图表。**图表总是在客户端初始化**。
3.  只要有要使用的数据，您就可以在任何地方使用 KendoChart。再一次，它可以是本地 JavaScript 数组 JSON，它是调用服务/控制器的结果。

# java - 每个项目使用字符串数组项目

> ID：11885186
> 
> 赞同：-3
> 
> 时间：2012-08-09T14:01:31.143
> 
> 标签：java, arrays

我需要使用字符串数组来列出课堂中使用的频率，

例子：

```
String names[] = new String [50]; 
```

然后我需要在位置后调用位置以插入名称。

例子：

```
String names[0], then names[1], names[2] ...  names[50], 
```

每个都有不同的名称并使用**JOptionPane.showInputDialog** ...

如果可能的话，我想从我停止的下一个位置继续插入数组

例子：

```
inserted  names[0],[1],[2] then stop... now again inserting names[3],[4] and going on... 
```

这是我现在所拥有的...

```
// reserved to use in menu loop

int option1=0;
int option2=0;

// array that will keep all the classrom students names

String names[] = new String [50];

//in need to find a way to fill position after position of the array with names

names[0] = JOptionPane.showInputDialog("Please, insert student name"); 

// in need to find a way to call next position in awway

names[1] = JOptionPane.showInputDialog("Please, insert student name"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:15:05.493

你会想要一个循环。如果您希望能够保存状态并稍后继续，我会使用一个while循环和一个私有字段来保持当前索引，或者像之前建议的那样简单地使用一个ArrayList：

```
boolean keepGoing = true;
List<String> names = new ArrayList<String>();
while (keepGoing) {
    string newName = JOptionPane.showInputDialog("Please enter student name: ");
    if (newName == null) { //User has pressed "Cancel" or left the textbox empty
        keepGoing = false;
    } else {
        names.add(newName);
    }
} 
```

ArrayList 允许您在不指定索引的情况下添加元素，从而使您免于保留索引的麻烦。
因为这实际上*是*你的作业，所以我将把它作为练习留给读者（一直想写那个）来弄清楚如何使用常规数组来完成它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:10:25.617

你可能需要一个 for(String current = new String() : names) { insert into the optionPane }

这是你的作业还是什么……？

# javascript - 如何从 iframe 中获取信息？（javascript和/或python）

> ID：11885190
> 
> 赞同：0
> 
> 时间：2012-08-09T14:01:42.677
> 
> 标签：javascript, python, iframe

我现在真正知道的唯一编程语言是 python。我对javascript很陌生。现在，我正在尝试制作一个简单的程序，通过网站为我收集信息。

在网站上，有一长串指向其他页面的链接。如果您将鼠标悬停在一个附近，另一个链接将出现在显示“Find Dupes”（重复项的缩写）的一侧。我在页面源代码中找到了这个：

```
<a href="javascript:void(0)" onclick="getDuplictes(1020347166, true)">Find Dupes</a> 
```

因此，当您单击 javascript 链接时，会弹出一个 iframe：

```
</div>  
</center>

<div id="ActionDiv" style="position: absolute;z-index: 400; width:400; display:none">

<iframe id="ActionFrame" src="" style="width:400;height:400" scrolling="no"         frameborder="0" ></iframe>
</div>

<div id="DuplicatesDiv" style="position: absolute;z-index: 200; width:600; display:none">
<iframe id="DuplicatesFrame" src="" style="width:600;height:400" scrolling="auto" frameborder="0" ></iframe>
</div>

<script>
function getDuplictes(placeId, findInLoca, feedId){

if(isUndefined(feedId)){
    feedId = 0;
}

if(isUndefined(findInLoca)){
    duplicatesUrl = "/places/duplicates.jsp?inPID=" + placeId + "&inFeedID=" + feedId;
}else{
    duplicatesUrl = "/places/duplicates.jsp?inPID=" + placeId + "&inFindInLoca=" + findInLoca +  "&inFeedID=" + feedId;
}

showFrameDiv( duplicatesUrl, "DuplicatesFrame", "DuplicatesDiv", "LocaBlur")
}
</script> 
```

并且信息每次都会有所不同，具体取决于您单击的链接。

我想要做的是以某种方式获取 iframe 中显示的信息，这些信息以一种有组织的、可读的形式显示，而无需实际打开和使用 Web 浏览器。我希望能够查看一个 iframe 的内容，决定是否需要它，然后单击下一步查看下一个。每页大约有 100 个“Find Dupes” iframe，可能有 50 页。无论如何，我的主要问题是如何使用python或javascript或其他东西获取特定iframe的内容（我对javascript一无所知......）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:09:33.120

使用 python，您可以使用[PyQuery](http://packages.python.org/pyquery/)获取`onclick`每个锚标记的属性，使用正则表达式解析它以获取`placeId`，自己构建`/places/duplicates.jsp?inPID=`URL，使用[请求](http://docs.python-requests.org/en/latest/index.html)在该 URL 处加载内容，然后再次对内容进行 PyQuery 以获取数据你需要。

# php - 如何将 PHP 的内存限制增加到 2GB 以上？

> ID：11885191
> 
> 赞同：59
> 
> 时间：2012-08-09T14:01:44.953
> 
> 标签：php, memory-limit

我在增加 PHP 作为 Apache 模块的内存限制时遇到问题。

如果我将以下指令放入 Apache 配置中，则可以正常工作：

```
php_value memory_limit 1.99G 
```

但是超过 2GB 不起作用，它会将这个值恢复到 128MB。

这里有什么问题？我需要更多内存来处理一些与 PDF 相关的任务。

服务器是 Debian 2.6.32-5-amd64 #1 SMP，PHP 5.3.3-7+squeeze13，具有 12GB 物理 RAM。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-09T14:04:59.737

您是否尝试过使用 MB 中的值？

```
php_value memory_limit 2048M 
```

也尝试在not **Apache中***编辑此值*。`php.ini`

 *** * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-08-09T14:11:02.550

我建议您从错误的角度看待问题。问题应该是“我在做什么，需要通过 apache 模块使用 Php 在 apache 进程中使用 2G 内存，这个工具集是否最适合这项工作？”

是的，您可以将火箭绑在福特 pinto 上，但这可能不是正确的解决方案。

无论如何，如果你真的需要它，我会提供火箭......你可以添加到脚本的顶部。

```
ini_set('memory_limit','2048M'); 
```

这将为脚本设置它。您仍然需要告诉 apache 允许这么多的 php 脚本（我认为）。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-05-07T09:52:20.433

`-1`对于在`memory_limit`变量中设置的无限内存限制：

```
ini_set('memory_limit', '-1'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-09T14:10:26.667

您应该在支持 64 位操作系统、64 位 Apache 版本和 PHP 相同的硬件上安装 64 位操作系统。但这并不能保证与 PDF 一起使用的函数可以使用如此大的内存。您最好不要将整个文件加载到内存中，将其拆分为块或使用文件函数在不加载到 RAM 的情况下对其进行搜索。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-05T09:15:53.990

对于遇到同样问题的其他人，这里是 php + 补丁中的错误描述 [https://bugs.php.net/bug.php?id=44522](https://bugs.php.net/bug.php?id=44522)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-09T14:04:40.180

在您的 Apache 配置中输入以下内容：

```
php_value memory_limit 2048M 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-24T15:30:38.067

你也可以试试这个：

```
ini_set("max_execution_time", "-1");
ini_set("memory_limit", "-1");
ignore_user_abort(true);
set_time_limit(0); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-04T21:59:33.243

即使`ini_set("memory_limit", "-1");`设置了命令行 php，我也遇到了同样的问题，所以限制在 php 中，而不是来自 apache。

您应该检查您是否使用的是 64 位版本的 php。

查看有关[检查代码是否在 64 位 PHP 上运行的](https://stackoverflow.com/questions/5423848/checking-if-your-code-is-running-on-64-bit-php/5424121)问题，以了解您正在使用什么 php。

我认为你的 php 是用 32 位编译的。**

# arm - 如何为 ARM 编译 VLC

> ID：11885203
> 
> 赞同：4
> 
> 时间：2012-08-09T14:02:25.730
> 
> 标签：arm, vlc

当一个人希望 VLC 在 FriendlyARM 设备上工作时。

为 ARM 编译 VLC 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T09:02:23.697

检查[blogs.soctel.in](http://blogs.soctel.in)。您可以找到使用 VLC 和相关信息构建内核、库、构建 VLC 和流式传输的过程

# jquery - 为什么由 AJAX 请求创建的事件触发器必须在 AJAX 请求本身中？

> ID：11885205
> 
> 赞同：1
> 
> 时间：2012-08-09T14:02:26.480
> 
> 标签：jquery, ajax, events

为什么会这样：

```
$.ajax(
{
    url: "/some/url.php",
    data: { s:"stuff" },
    success: function(result)
    {
        // Result being <button id="clickme">Click me!</button>
        $("#container").html(result); 

        // Event trigger *in* AJAX
        $("#clickme").on("click", function()
        {
           alert("Hai"); 
        });
    }
}); 
```

这不会：

```
$.ajax(
{
    url: "/some/url.php",
    data: { s:"stuff" },
    success: function(result)
    {
        // Result being <button id="clickme">Click me!</button>
        $("#container").html(result); 
    }
});

// Event trigger outside AJAX, for better overview, like event grouping, 
// shorter AJAX functions, etc
$("#clickme").on("click", function()
{
    alert("Hai"); 
}); 
```

使用 jQuery`v1.7.2`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T14:05:21.147

首先，`on`不要使用带有该签名的委托。这意味着它将事件侦听器直接附加到找到的元素。

其次，您的第二个代码甚至在发出 ajax 请求之前执行，因此此时没有找到任何元素并且代码不附加任何事件侦听器。

如果您想将委托与 一起使用`on`，则签名如下：

```
$(document).on( "click", "#clickme", function(){

}); 
```

哪里`document` *应该*是最接近的静态父元素 - 但它也适用`document`（`.live`毕竟这就是）

`document`是可靠的，因为它总是在那里。但是如果你有一个更接近的静态父元素可以在 DOM 中找到，你宁愿委托给它。

* * *

不推荐的原因`document`等`"body"`是因为它们为`type`页面上的所有事件增加了处理开销。

考虑`$(document).on("mousemove", ".myElement", fn);`

现在，只要鼠标在页面上移动，除非传播被较低级别的侦听器停止，jQuery 每次都必须处理整个传播路径，以查看传播路径中是否有任何元素与给定的`.myElement`-selector 匹配。

如果您改为添加`$("#element").on("mousemove", ".myElement", fn);`，则只会对`"#element"`页面区域中发生的 mousemove 事件进行此处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:04:48.323

尝试

```
$('body').on("click", "#clickme", function() {
    alert("Hai"); 
}); 
```

您的第二个片段无法按预期工作，因为当您附加处理程序时，该元素`#clickme`尚不存在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:06:49.667

改用这个：

`$(document).on("click", "#clickme", function() { alert("Hai"); });`

这应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:11:56.330

因为在第二种情况下，您尝试设置点击处理程序的元素在 pageLoad 上不存在。

如果您像这样使用 .on() ：

```
$("body").on("click", "#clickme", function()
{
    alert("Hi"); 
}); 
```

它会起作用，因为您会将事件附加到页面加载时存在的正文标记，然后仅在触发单击事件时才解决#clickme 的选择。

但是比“body”（为了性能）更好的是在 DOM 下方的一些容器，您知道它们将存在于页面加载中。

# c# - 应用程序在 windows xp 下运行，但不在 server 2003 r2 下运行

> ID：11885206
> 
> 赞同：0
> 
> 时间：2012-08-09T14:02:29.040
> 
> 标签：c#, .net, visual-studio

我有一个非常奇怪的问题。我刚刚在 c# 中使用 Visual Studio 2010 和 .net 4 完成了独立应用程序的开发。

我将安装项目添加到解决方案中，成功构建和编译了所有内容。

我在调试模式下运行它，后来我在我的 xp 机器上安装了我的应用程序，一切都很顺利，效果很好！

现在我把安装包安装在运行 server 2003 r2 的生产机器上，但是当我尝试运行它时，它启动了，我可以看到 gui 几秒钟然后它就崩溃了。

我使用 log4net 在我的代码中添加了许多日志，但找不到为什么在 xp 下它可以完美运行而在 server 2003 r2 下相同的安装不会持续的原因。

然后我认为如果应用程序崩溃，它可能会在系统日志事件查看器下写入，确实如此。每次运行我都会遇到 2 个错误，但我无法真正理解它们的含义。

错误附在下面。任何形式的帮助将不胜感激！

一切顺利！

==================================================== ===============================

**第一个错误：**

```
 Event Type:  Error
Event Source:   .NET Runtime 4.0 Error Reporting
Event Category: None
Event ID:   5000
Date:       8/9/2012
Time:       11:03:26 AM
User:       N/A
Computer:   W2003_ORACLE01
Description:
EventType clr20r3, P1 gpsdispatcherserver.exe, P2 1.0.0.0, P3 502220c3, P4 mscorlib, P5 4.0.0.0, P6 4ba1da6f, P7 210, P8 18, P9 system.argumentoutofrange, P10 NIL.

For more information, see Help and Support Center at http://go.microsoft.com/fwlink/events.asp.
Data:
0000: 63 00 6c 00 72 00 32 00   c.l.r.2.
0008: 30 00 72 00 33 00 2c 00   0.r.3.,.
0010: 20 00 67 00 70 00 73 00    .g.p.s.
0018: 64 00 69 00 73 00 70 00   d.i.s.p.
0020: 61 00 74 00 63 00 68 00   a.t.c.h.
0028: 65 00 72 00 73 00 65 00   e.r.s.e.
0030: 72 00 76 00 65 00 72 00   r.v.e.r.
0038: 2e 00 65 00 78 00 65 00   ..e.x.e.
0040: 2c 00 20 00 31 00 2e 00   ,. .1...
0048: 30 00 2e 00 30 00 2e 00   0...0...
0050: 30 00 2c 00 20 00 35 00   0.,. .5.
0058: 30 00 32 00 32 00 32 00   0.2.2.2.
0060: 30 00 63 00 33 00 2c 00   0.c.3.,.
0068: 20 00 6d 00 73 00 63 00    .m.s.c.
0070: 6f 00 72 00 6c 00 69 00   o.r.l.i.
0078: 62 00 2c 00 20 00 34 00   b.,. .4.
0080: 2e 00 30 00 2e 00 30 00   ..0...0.
0088: 2e 00 30 00 2c 00 20 00   ..0.,. .
0090: 34 00 62 00 61 00 31 00   4.b.a.1.
0098: 64 00 61 00 36 00 66 00   d.a.6.f.
00a0: 2c 00 20 00 32 00 31 00   ,. .2.1.
00a8: 30 00 2c 00 20 00 31 00   0.,. .1.
00b0: 38 00 2c 00 20 00 73 00   8.,. .s.
00b8: 79 00 73 00 74 00 65 00   y.s.t.e.
00c0: 6d 00 2e 00 61 00 72 00   m...a.r.
00c8: 67 00 75 00 6d 00 65 00   g.u.m.e.
00d0: 6e 00 74 00 6f 00 75 00   n.t.o.u.
00d8: 74 00 6f 00 66 00 72 00   t.o.f.r.
00e0: 61 00 6e 00 67 00 65 00   a.n.g.e.
00e8: 20 00 4e 00 49 00 4c 00    .N.I.L.
00f0: 0d 00 0a 00               .... 
```

==================================================== ===============================

**第二个错误：**

```
Event Type: Error
Event Source:   .NET Runtime
Event Category: None
Event ID:   1026
Date:       8/9/2012
Time:       11:03:37 AM
User:       N/A
Computer:   W2003_ORACLE01
Description:
Application: GPSDispatcherServer.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.ArgumentOutOfRangeException
Stack:
   at System.ThrowHelper.ThrowArgumentOutOfRangeException()
   at System.Collections.Generic.List`1[[System.__Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]].get_Item(Int32)
   at GPSDispatcherServer.GPSDispatcherServerManager.createGpsDispInstance()
   at System.Threading.ThreadHelper.ThreadStart_Context(System.Object)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ThreadHelper.ThreadStart()

For more information, see Help and Support Center at http://go.microsoft.com/fwlink/events.asp. 
```

==================================================== ===============================

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:37:19.930

你有一个堆栈跟踪，该死的！这比在本机代码中调试崩溃的任何人都梦寐以求。用它。崩溃点的代码在做什么？

看起来您的程序在方法中访问索引超出范围的某些对象 [1]`GPSDispatcherServer.GPSDispatcherServerManager.createGpsDispInstance()`的列表 ( )。`System.Collections.Generic.List`检查您`some_list[index]`在此方法中的所有方法以及从中调用的方法。

我的猜测是某些对象的创建失败并且您的代码忽略了错误。然后您的代码假定该对象已创建并添加到列表中。

失败可能有多种原因：服务器上缺少某些组件、缺少权限、缺少资源、无效路径...

[1] 无法判断列表中的哪个类只有 Release 构建而没有符号。System.__Canon 是编译器生成泛型代码时泛型参数的标准占位符类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:19:42.977

首先，确保使用调试符号构建应用程序（在项目构建设置中）。

然后在生产服务器上使用[DebugDiag](http://www.microsoft.com/en-us/download/details.aspx?id=26798)来捕获故障转储。还有其他捕获故障转储的方法，但我发现这是最简单的方法之一，而且安装量很小。

可以使用 DebugDiag 或[WinDbg](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)离线分析故障转储。最简单的方法是将故障转储文件从服务器上的 DebugDiag Logs 目录复制到构建应用程序的 bin\Release 文件夹中。如果使用 WinDbg，您应该加载与安装在服务器上的 .Net 框架匹配的[sos.dll扩展名（例如，在 C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319 中）。](http://msdn.microsoft.com/en-us/library/bb190764.aspx)因此，也将 sos.dll 复制到您的构建机器，然后使用将其加载到 WinDbg 中

```
.load <full path to sos.dll> 
```

然后在 WinDbg 中打开故障转储文件。WinDbg 应该能够自动找到应用程序符号 (pdb)，因为它们应该与故障转储位于同一目录中（例如 bin\Release），并且 WinDbg 应该会自动从 pdb 中找到源代码。因此，当您打开故障转储时，它应该将您带到导致它的代码行。如果没有，请尝试按 F5。

# r - 获取所有参数作为列表

> ID：11885207
> 
> 赞同：88
> 
> 时间：2012-08-09T14:02:29.760
> 
> 标签：r

R 是否提供对象/函数/方法/关键字来获取所有函数参数？

举个例子： `function(a, b="default", ...)`将提供`a`和`b`以及`...`在函数环境中。是否有类似的声明`list(...)`也会在结果中包含`a`和`b`？

或者换一种说法：`list(a=a, b=b, ...)`给定的简写`function(a, b, ...)`

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-06-21T20:46:18.393

一种解决方案是使用：

```
tempf <- function(a, b = 2, ...) {
    argg <- c(as.list(environment()), list(...))
    print(argg)
}
tempf(1, c = 3)
$a
[1] 1

$b
[1] 2

$c
[1] 3 
```

这将创建参数值的命名列表。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-08-09T22:07:19.347

我认为你想要`match.call`：

```
tmpfun <- function(a,b,...) {
print(as.list(match.call()))
print(as.list(match.call(expand.dots=FALSE)))
}
> tmpfun(a=1, b=2, c=3, d=4)
[[1]]
tmpfun

$a
[1] 1

$b
[1] 2

$c
[1] 3

$d
[1] 4

[[1]]
tmpfun

$a
[1] 1

$b
[1] 2

$...
$...$c
[1] 3

$...$d
[1] 4 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-09T14:06:00.303

尝试`args`功能

函数的参数是`mean`什么？

```
> args(mean)
function (x, ...) 
NULL 
```

`lm`功能呢？

```
 > args(lm)
function (formula, data, subset, weights, na.action, method = "qr", 
    model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE, 
    contrasts = NULL, offset, ...) 
NULL 
```

如果您想获取参数列表，请尝试

```
as.list(args(lm)) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-12-23T20:39:29.650

在搜索相关内容时偶然发现了这个问题。虽然我意识到这已经有好几年了，但答案似乎并不令人满意，而且似乎没有任何现成的解决方案可以解决这个问题。

`formals`使用和`environment`函数的组合可以做出（不优雅的）解决方法。下面的示例使用从形式中提取的名称从环境中提取参数，然后附加省略号列表。如果您希望获得在函数调用时设置的值，请​​将 orig_values 参数设置为 TRUE。该函数仅包括在函数调用时隐式或显式设置的变量。

```
allargs <- function(orig_values = FALSE) {
  # get formals for parent function
  parent_formals <- formals(sys.function(sys.parent(n = 1)))

  # Get names of implied arguments
  fnames <- names(parent_formals)

  # Remove '...' from list of parameter names if it exists
  fnames <- fnames[-which(fnames == '...')]

  # Get currently set values for named variables in the parent frame
  args <- evalq(as.list(environment()), envir = parent.frame())

  # Get the list of variables defined in '...'
  args <- c(args[fnames], evalq(list(...), envir = parent.frame()))

  if(orig_values) {
    # get default values
    defargs <- as.list(parent_formals)
    defargs <- defargs[unlist(lapply(defargs, FUN = function(x) class(x) != "name"))]
    args[names(defargs)] <- defargs
    setargs <- evalq(as.list(match.call())[-1], envir = parent.frame())
    args[names(setargs)] <- setargs
  }
  return(args)
}

tempf <- function(a, b = 2, ...) {
  d <- 5
  b <- 3

  cat("Currently set values defined in call or formals\n")
  print(allargs())
  cat("Values as defined at the time of the call\n")
  print(allargs(T))
}

tempf(1, c = 3)

Currently set values defined in call or formals
$a
[1] 1

$b
[1] 3

$c
[1] 3

Values as defined at the time of the call
$a
[1] 1

$b
[1] 2

$c
[1] 3 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-09T14:36:04.653

我相信您正在寻找`formals`：

```
formals(sd)
$x

$na.rm
[1] FALSE 
```

并`dput`在此上使用为您提供了您在问题中指定的形式：

```
dput(formals(sd))
list(x = , na.rm = FALSE) 
```

请注意，这`formals`不适用于*原始*函数，仅适用于闭包。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-02-25T21:59:08.717

`rlang::fn_fmls`给出了一个简短而干净的解决方案：

```
library(ggplot2)
library(rlang)

# action
argument_list <- rlang::fn_fmls(fn = geom_point)

# evaluate output
class(argument_list)
#> [1] "pairlist"

is.list(argument_list)
#> [1] TRUE

argument_list
#> $mapping
#> NULL
#> 
#> $data
#> NULL
#> 
#> $stat
#> [1] "identity"
#> 
#> $position
#> [1] "identity"
#> 
#> $...
#> 
#> 
#> $na.rm
#> [1] FALSE
#> 
#> $show.legend
#> [1] NA
#> 
#> $inherit.aes
#> [1] TRUE 
```

^(由[reprex 包](https://reprex.tidyverse.org)于 2020-02-25 创建(v0.3.0))

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-08T19:13:47.543

```
test <- function(
  x = 1,
  y = 2,
  ...
) {
  if(length(list(...)) == 0) {
    print(as.list(environment()))
  } else {
    print(c(as.list(environment()), list(...)))
  }
}

test()
test(z = 3) 
```

# php - Codeigniter / MVC调用rest api的方式

> ID：11885210
> 
> 赞同：1
> 
> 时间：2012-08-09T14:02:45.547
> 
> 标签：php, api, codeigniter, rest

我们有一个 Web 应用程序（我们称之为小部件应用程序），其中包含我需要与我正在构建的新 Codeigniter 应用程序集成的数据。

我有一个名为的控制器`objects`，可以说它将有一个名为`getallobjects`. 此方法实际上必须从小部件应用程序返回数据。

小部件应用程序有一个“API”，但我通过获取如下 URL 以 RESTful 方式调用它：

```
 http://myserver/widget/abc.php?method=getsomething 
```

这会返回一堆 json 编码的数据。

我将如何在我的 MVC CI 应用程序中使用这种类型的 API？

到目前为止，这是我的控制器的样子：

```
 class Objects extends CI_Controller {
     public function __construct()
     {
         parent::__construct();
         $this->load->helper('url');
     }

     public function getallobjects()
     {
         $data['objectlist'] = ????/* This is where I need to call the rest api and get json data. */

         $data['main_content']='objects';
         $this->load->view('includes/template', $data);
     }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:53:22.207

你可以打电话`file_get_contents($your_url)`

[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

获取响应。

此外，您可以使用 php curl 包装器来更好地控制您的请求。 [http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-15T05:52:09.427

```
$your_url = "http://myserver/widget/abc.php?method=getsomething"; //put your url here
$data['objectlist'] = file_get_contents($your_url); 
```

# django - 如何为 django 视图编写单元测试？

> ID：11885211
> 
> 赞同：71
> 
> 时间：2012-08-09T14:02:48.103
> 
> 标签：django, unit-testing

我无法理解如何为 django 设计单元测试。

根据我的理解，一次测试整个视图似乎是不可能的。我们需要区分请求的 pre-post 和 post 状态。但我不知道如何设计这个。有没有现实生活中的例子？

查看文档，示例过于简化，仅关注模型。

```
@login_required
def call_view(request, contact_id):
    profile = request.user.get_profile()
    if request.POST:        
        form = CallsForm(profile.company, request.POST)           
        if form.is_valid()
        return HttpResponseRedirect('/contact/' + contact_id + '/calls/')
    else:        
        form = CallsForm(profile.company, instance=call)              
    variables = RequestContext(request, {'form':form}
    return render_to_response('conversation.html', variables) 
```

**更新：**

试图使成功的测试工作，但它仍然失败：

```
def test_contact_view_success(self):
    # same again, but with valid data, then
    self.client.login(username='username1', password='password1')
    response = self.client.post('/contact/add/', {u'last_name': [u'Johnson'], }) 
    self.assertRedirects(response, '/') 
```

**错误信息：**

```
AssertionError: Response didn't redirect as expected: Response code was 200 (expected 302) 
```

我认为这是因为 form.is_valid() 失败并且它没有重定向，对吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-08-09T15:57:28.060

**NB NB!** *This isn't strictly a "unit test"; it's difficult and uncommon to write an independent unit test for Django view code. This is more of an integration test...*

You're right that there are several pathways through your view:

1.  `GET` or `POST` by anonymous user (should redirect to login page)
2.  `GET` or `POST` by logged-in user with no profile (should raise a `UserProfile.DoesNotExist` exception)
3.  `GET` by logged-in user (should show the form)
4.  `POST` by logged-in user with blank data (should show form errors)
5.  `POST` by logged-in user with invalid data (should show form errors)
6.  `POST` by logged-in user with valid data (should redirect)

Testing **1** is really just testing `@login_required`, so you could skip it. I tend to test it anyway (just in case we've forgotten to use that decorator).

I'm not sure the failure case (a 500 error page) in **2** is what you really want. I would work out what you want to happen instead (perhaps [use `get_or_create()`](https://docs.djangoproject.com/en/1.8/ref/models/querysets/#get-or-create), or catch the `DoesNotExist` exception and create a new profile that way), or redirect to a page for the user to create a profile.

Depending on how much custom validation you have, **4** may not really need to be tested.

In any case, given all of the above, I would do something like:

```
from django.test import TestCase

class TestCalls(TestCase):
    def test_call_view_deny_anonymous(self):
        response = self.client.get('/url/to/view', follow=True)
        self.assertRedirects(response, '/login/')
        response = self.client.post('/url/to/view', follow=True)
        self.assertRedirects(response, '/login/')

    def test_call_view_load(self):
        self.client.login(username='user', password='test')  # defined in fixture or with factory in setUp()
        response = self.client.get('/url/to/view')
        self.assertEqual(response.status_code, 200)
        self.assertTemplateUsed(response, 'conversation.html')

    def test_call_view_fail_blank(self):
        self.client.login(username='user', password='test')
        response = self.client.post('/url/to/view', {}) # blank data dictionary
        self.assertFormError(response, 'form', 'some_field', 'This field is required.')
        # etc. ...

    def test_call_view_fail_invalid(self):
        # as above, but with invalid rather than blank data in dictionary

    def test_call_view_success_invalid(self):
        # same again, but with valid data, then
        self.assertRedirects(response, '/contact/1/calls/') 
```

Obviously, a drawback here is hard-coded URLs. You could either [use `reverse()`](https://docs.djangoproject.com/en/stable/topics/http/urls/#reverse-resolution-of-urls) in your tests or [build requests using `RequestFactory`](https://docs.djangoproject.com/en/stable/topics/testing/advanced/#the-request-factory) and call your views as methods (rather than by URL). With the latter method, though, you still need to use hard-coded values or `reverse()` to test redirect targets.

Hope this helps.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-09T15:25:38.207

Django ships with a test client which can be used to test the full request/response cycle: [The docs](https://docs.djangoproject.com/en/3.0/topics/testing/tools/#overview-and-a-quick-example) contain an example of making a get request to a given url and asserting the status code as well as the template context. You would also need a test which does a POST and asserts a successful redirect as expected.

# vb.net - 如何将 RichTextBox 中的数据保存到文件/从文件中加载数据

> ID：11885213
> 
> 赞同：1
> 
> 时间：2012-08-09T14:03:03.863
> 
> 标签：vb.net, richtextbox

我有 Richtextbox 可以输入具有多种字体名称、颜色、背景色和大小的文本。

我想保存它并使用相同的设置加载它。

```
Private Sub SaveAsToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles SaveAsToolStripMenuItem.Click
    SaveFileDialog1.Filter = "TextFile (*.txt;*.rtf)|*.txt;*.rtf|Batch File (*.bat)|*.bat|All Files (*.*)|*.*"
    SaveFileDialog1.FileName = "Untitled"
    If SaveFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
        Dim a() As String = SaveFileDialog1.FileName.Split("\")
        Dim sw As New StreamWriter(SaveFileDialog1.FileName)
        sw.Write(RichTextBox1.Text)
        My.Settings.Save()
        sw.Close()
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:23:08.440

[使用 RichTextBox.SaveFile 方法](http://msdn.microsoft.com/en-us/library/8bf5hy2e.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T05:09:24.083

您可以使用此代码阅读：

```
RichTextbox1.text = System.IO.File.ReadAllText(openfilepath) 
```

这是写作：

```
System.IO.File.WriteAllText(Savefiledialog1.FileName, Richtextbox1.text) 
```

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-26T14:33:11.977

保存和另存为之间有区别

**保存代码**

```
 Private Sub SaveToolStripMenuItem_Click(sender As Object, e AsEventArgs) Handles SaveToolStripMenuItem.Click

 If Me.Text = "Untitled" Then

            Try
                 RichTextBox1.SaveFile(OpenFileDialog1.SafeFileName)
                 RichTextBox1.Modified = False
             Catch ex As Exception
                SaveAsToolStripMenuItem.PerformClick()
             End Try
         ElseIf Me.Text = OpenFileDialog1.SafeFileName Then
             Try
                 RichTextBox1.SaveFile(OpenFileDialog1.FileName)
                 RichTextBox1.Modified = False
             Catch ex As Exception
                 SaveAsToolStripMenuItem.PerformClick()
            End Try
        ElseIf Me.Text = SaveFileDialog1.FileName Then
            Try
                 RichTextBox1.SaveFile(SaveFileDialog1.FileName)
                 RichTextBox1.Modified = False
            Catch ex As Exception
                 SaveAsToolStripMenuItem.PerformClick()
            End Try
  End If

End Sub 
```

**另存为的代码**

```
Private Sub SaveAsToolStripMenuItem_Click(sender As Object, e As EventArgs) Handles SaveAsToolStripMenuItem.Click

        Try
            If SaveFileDialog1.ShowDialog = Windows.Forms.DialogResult.OK Then
                RichTextBox1.SaveFile(SaveFileDialog1.FileName)
                Me.Text =SaveFileDialog1.FileName
                RichTextBox1.Modified = False
            End If
        Catch ex As Exception
            MsgBox("The file cannot be saved", MsgBoxStyle.Critical, "Save")
        End Try

 End Sub 
```

# php - 获得最近售出的 5 种独特产品

> ID：11885219
> 
> 赞同：0
> 
> 时间：2012-08-09T14:03:25.237
> 
> 标签：php, magento

我想在 magento 中获取最近售出的 5 件独特商品，我有以下代码片段。它显示一个空白页，但是当我`->getSelect()->group('product_id')`从下面的代码中删除时，它可以工作，但项目不再是唯一的。

```
 $itemsCollection= Mage::getResourceModel('sales/order_item_collection')
        ->join('order', 'order_id=entity_id')   
        ->getSelect()->group('product_id')
        ->setOrder('order_id', 'desc')
        ->setPage(1, 5) ; 
```

如何按这些产品分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:24:00.260

您的代码几乎是正确的 - 问题在于您如何将方法调用链接在一起。

当链接方法调用时，每个调用都会返回一个对象，通常是对同一个类的引用。因此，在您的示例中， `->getSelect()`and`->group()`调用出现问题，因为它们返回对`Varien_Db_Select`对象的引用，而不是`Mage_Sales_Model_Resource_Order_Item_Collection`您期望的对象。

（另请注意，对于最近的订单，使用 created_at 而不是 order_id 更安全）

所以，一个可行的例子是......

```
// Initialise the collection
$itemsCollection = Mage::getModel('sales/order_item')->getCollection()
    ->setOrder('created_at', Varien_Data_Collection::SORT_ORDER_DESC)
    ->addAttributeToSelect('*')  //Change this to only select the fields you require
    ->setPage(1, 5)
;

// Separately add the GROUP BY clause
$itemsCollection->getSelect()->group('product_id');

// Now you can safely iterate over the collection
foreach($itemsCollection as $item) {
    echo $item->getData('product_id') . ' - ' . $item->getData('created_at') . '<br/>';
} 
```

# wordpress - Wordpress - 电子邮件特定的自定义字段 + 用户信息

> ID：11885220
> 
> 赞同：0
> 
> 时间：2012-08-09T14:03:33.957
> 
> 标签：wordpress

WordPress：3.4.1

我正在寻找实现以下目标。

使用插件或任何其他可用的东西，可以从 psot 中提取特定的自定义字段并向用户发送电子邮件，包含这些自定义字段和当前用户的姓名+姓氏

有任何想法吗.....

提前感谢查尔斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:36:55.513

这可以使用重力形式 (PAID) 或免费的 CformsII 来实现

以下是解释重力形式方法的链接。

[http://www.gravityhelp.com/documentation/page/Merge_Tags](http://www.gravityhelp.com/documentation/page/Merge_Tags)

# jsf - PrimeFaces：与文件上传相关的 UTF-8 错误

> ID：11885222
> 
> 赞同：0
> 
> 时间：2012-08-09T14:03:36.010
> 
> 标签：jsf, file-upload, utf-8, jboss, primefaces

我的网络应用程序当前正在使用：

*   JBoss AS7
*   JSF2
*   PrimeFaces

由于这个错误[，JSF 中的 UTF-8 表单提交会破坏数据](https://stackoverflow.com/questions/10721342/utf-8-form-submit-in-jsf-is-corrupting-data)，我设置了一个**@WebFilter**

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {
        request.setCharacterEncoding("UTF-8");
        chain.doFilter(request, response);
    } 
```

正如 BalusC 所建议的那样（谢谢）。

简单来说，它总是可以正常工作。当我也需要使用相同的表单进行文件上传时，我遇到了另一个问题（例如[http://www.primefaces.org/showcase-labs/ui/fileUploadDnd.jsf](http://www.primefaces.org/showcase-labs/ui/fileUploadDnd.jsf)）

这是主要区别

```
 <h:form enctype="multipart/form-data"> 
```

如果没有 enctype 属性，特殊的 unicode 字符仍然可读。

使用 enctype 属性，我发现“ciaÃ²”而不是“ciaò”。

然而，我的过滤器`@WebFilter("/*") EncodingFilter`总是被调用。

可能的解决方案是将 JBoss 默认编码设置为 utf-8 吗？我怎样才能做到这一点？

*** * 编辑 ****

我还尝试将 -Dfile.encoding=UTF-8 放在我的 JAVA_OPTS 中，但什么也没有......它不起作用:((请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:27:58.470

这是由 PrimeFaces 中的另一个错误引起的。另请参阅[此答案](https://stackoverflow.com/questions/11190081/primefaces-fileupload-filter-with-utf8-characters-filetr/11206837#11206837)以获取解释和解决方案。

> *可能的解决方案是将 JBoss 默认编码设置为 utf-8 吗？我怎样才能做到这一点？*

是的。如何做到这一点取决于 JBoss 版本。在那些拥有`server.xml`（直到版本 6.x）的人中，这是添加`URIEncoding="UTF-8"`到`<Connector>`元素的问题。在那些拥有`standalone.xml`（7.x 和更新版本）的人中，这是添加 元素`<property name="org.apache.catalina.connector.URI_ENCODING" value="UTF-8"/>`的问题。`<system-properties>`

# testing - 测试 ember.js connectOutlet

> ID：11885231
> 
> 赞同：9
> 
> 时间：2012-08-09T14:04:01.790
> 
> 标签：testing, ember.js

有没有人对测试 ember 路由的 connectOutlets 是否成功有任何好的建议？

例如，我有以下路线：

```
vault: Ember.Route.extend
  route: '/vault'
  connectOutlets: (router, event) ->
    router.get('applicationController').connectOutlet 'exercises'
  index: Ember.Route.extend
    route: '/'
    connectOutlets: (router, event) ->
      exercises = WZ.store.find(WZ.Exercise)
      router.get('exercisesController').connectOutlet 'main', 'exercisesHome', exercises 
```

我将如何检查这是否具有所需的行为？

我可以像这样测试 currentState.path：

```
it 'should transition to vault', ->
  Ember.run =>
    @router.transitionTo 'vault'
  expect(@router.getPath('currentState.path')).toEqual 'root.vault' 
```

但我不认为这是一个很好的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:51:28.770

在我看来，这段代码不值得测试。

首先，让我们正式定义此代码所需的行为：

当路由器转换到“vault/index”状态并且一切正常时，会发生以下情况：

1.  Ember 创建ExercesHomeView 的新实例
2.  Ember 将 exerciseHomeController 的 content 属性设置为练习列表
3.  Ember 将创建的视图连接到练习视图模板中的主出口

你看，所有有意义的工作都是由 Ember 完成的。因此，严格来说，没有什么可测试的，因为我们不测试第三方代码。

在我看来，这段代码只有一件事*可能*值得测试：我们是否向控制器提供了正确的数据。即使这样，我也只会在遇到它的不当行为后才测试这段代码。

# asp.net-mvc-3 - ASP MVC3 PDF 查看器库

> ID：11885234
> 
> 赞同：-2
> 
> 时间：2012-08-09T14:04:13.893
> 
> 标签：asp.net-mvc-3, pdf, asp.net-mvc, pdf-viewer, pdfview

我正在为 ASP.MVC3 寻找一些不错的 PDF 查看器，我发现的只是同步融合，但它看起来非常慢而且看起来也很糟糕......

有人知道 MVC3 的优秀 PDF 查看器吗？我喜欢 RadPDF，但它仅适用于 ASP.NET（无 MVC）。它允许您通过添加高亮、注释、文本等来编辑文档，这是我需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:07:50.960

如果您喜欢 RadPDF，您仍然可以将它与 MVC 一起使用，您可以并排运行 ASP.NET MVC 和 webforms。检查此链接以获取更多信息：[http ://weblogs.asp.net/rajbk/archive/2010/05/11/running-asp-net-webforms-and-asp-net-mvc-side-by-side.aspx](http://weblogs.asp.net/rajbk/archive/2010/05/11/running-asp-net-webforms-and-asp-net-mvc-side-by-side.aspx)

# date - lineplusbar nvd3 的日期刻度

> ID：11885237
> 
> 赞同：0
> 
> 时间：2012-08-09T14:04:17.070
> 
> 标签：date, d3.js, nvd3.js

我正在尝试使用 nvd3 获取 lineplusbar 图表中的确切日期，并且我从[http://nvd3.com/ghpages/linePlusBar.html](http://nvd3.com/ghpages/linePlusBar.html)获得了代码。我得到了正确的线路日期，但对于 bar，它显示了默认日期 07 年 1 月 1 日。任何人都可以帮助我获得正确的日期，因为我得到了它。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:33:42.483

您只需要过滤正确的元素。在加号线或累积线示例中，它们过滤如下：

```
chart
      .x(function(d,i) { return i }) 
```

您需要做的就是删除此过滤器，您将获得适合图表的日期。

此致！

# macos - 在哪里可以获得一堆中间证书？

> ID：11885239
> 
> 赞同：0
> 
> 时间：2012-08-09T14:04:24.380
> 
> 标签：macos, ssl, ssl-certificate

我正在编写一个抓取一堆网站的应用程序，令人惊讶的是，其中有多少人的 SSL 证书配置错误。我注意到在 Chrome 上，当我在我的 mac 上运行我的应用程序时，他们连接到没有安装中间证书的站点没有问题。如何获取这些中间证书的捆绑包以安装在我的 linux 服务器上（我尝试过 apt-get install ca-certificates，但它只提供根证书）。或者，我如何从 Chrome 或 Mac 中导出中间证书（我在钥匙串访问的任何地方都看不到它们）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:46:46.817

这些中间证书是根据最终实体证书中包含的信息下载的。如果您解析最终实体证书并从颁发机构信息访问扩展中检索 CA 证书的位置，您也可以下载中间证书。从浏览器导出这些证书很可能无济于事，因为此列表会不时更改，也因为浏览器可能不会永久存储这些证书（即您的列表将不完整）。

# php - Mysql 更新死锁

> ID：11885240
> 
> 赞同：2
> 
> 时间：2012-08-09T14:04:35.500
> 
> 标签：php, mysql, cakephp, pdo

我正在使用 Cake 2.1.2

这是我在控制器中的操作：

```
$this->News->updateAll(
    array('News.Unread' => 0),
    array('News.Id <=' => $lastNewsId, 'RequestingUserId' => $current['id'])
); 
```

**有时**我有这个错误，我得到 500: [PDOException] SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; 尝试重启事务

我确信在任何脚本中都没有锁。我必须解决什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:06:48.800

您可以通过将表上的引擎类型更改为 InnoDB 来防止这种情况发生。

# powershell - 如何在powershell中遍历csv文件中的一行

> ID：11885246
> 
> 赞同：34
> 
> 时间：2012-08-09T14:04:50.393
> 
> 标签：powershell, csv

我想在powershell中处理一个csv文件，但我不知道处理它时CSV文件中的列标题是什么。

例如：

```
$path = "d:\scratch\export.csv"
$csv = Import-csv -path $path

foreach($line in $csv)
{ 
    foreach ($head in $line | get-member | where-object {$_.MemberType -eq "NoteProperty"} | select Definition)
    {
        #pseudocode...
        doSomething($head.columnName, $head.value)
    }

} 
```

如何遍历 csv 文件中的行，获取列的名称和值？还是我应该这样做的另一种方式（比如不使用 Import-csv）？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-09T14:13:56.837

```
Import-Csv $path | Foreach-Object { 

    foreach ($property in $_.PSObject.Properties)
    {
        doSomething $property.Name, $property.Value
    } 

} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-12-07T10:55:06.063

遍历 CSV 文件每一行的每一列的另一种方式是

```
$path = "d:\scratch\export.csv"
$csv = Import-Csv -path $path

foreach($line in $csv)
{ 
    $properties = $line | Get-Member -MemberType Properties
    for($i=0; $i -lt $properties.Count;$i++)
    {
        $column = $properties[$i]
        $columnvalue = $line | Select -ExpandProperty $column.Name

        # doSomething $column.Name $columnvalue 
        # doSomething $i $columnvalue 
    }
} 
```

所以您可以选择：您可以使用`$column.Name`获取列名或`$i`获取列号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-22T15:46:05.410

```
$header3 = @("Field_1","Field_2","Field_3","Field_4","Field_5")     

Import-Csv $fileName -Header $header3 -Delimiter "`t" | select -skip 3 | Foreach-Object {

    $record = $indexName 
    foreach ($property in $_.PSObject.Properties){

        #doSomething $property.Name, $property.Value

            if($property.Name -like '*TextWrittenAsNumber*'){

                $record = $record + "," + '"' + $property.Value + '"' 
            }
            else{
                $record = $record + "," + $property.Value 
            }                           
    }               

        $array.add($record) | out-null  
        #write-host $record                         
} 
```

# winapi - 如何调用 user32.dll 中的 DialogBox() 函数？

> ID：11885247
> 
> 赞同：0
> 
> 时间：2012-08-09T14:04:50.387
> 
> 标签：winapi, dllimport, dialog, user32

我正在尝试调用 WinAPI 函数`DialogBox()`。在[Microsoft 网站上](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645452%28v=vs.85%29.aspx)，此函数被指定在 user32.dll 中。但是，当尝试通过将其声明为从 dll 导入的函数来导入此函数时，链接器告诉我它不存在。然后我尝试在 C:\Windows\System32\user32.dll 中使用依赖项walker 找到该函数，但该函数不存在。（我可以在那里看到所有其他花哨的函数文字。）这可能是什么原因，我该如何解决这个问题？

我正在使用 D 编程语言。标准库中的 windows 模块不会在 WinAPI 中导入完整的函数集。因此，我有时不得不手动导入东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:51:03.533

没错，没有这样的功能。从 WinUser32.h SDK 头文件：

```
#define DialogBoxA(hInstance, lpTemplate, hWndParent, lpDialogFunc) \
DialogBoxParamA(hInstance, lpTemplate, hWndParent, lpDialogFunc, 0L)
#define DialogBoxW(hInstance, lpTemplate, hWndParent, lpDialogFunc) \
DialogBoxParamW(hInstance, lpTemplate, hWndParent, lpDialogFunc, 0L) 
```

换句话说，C 预处理器将函数重命名为 DialogBoxParam。这是你唯一可以pinvoke的。只需像宏一样传递一个零。

# xml - 如何在 Convert.ToDateTime 输出中添加一个小时

> ID：11885248
> 
> 赞同：0
> 
> 时间：2012-08-09T14:04:54.360
> 
> 标签：xml, vb.net, datetime

我有一个使用 Windows 调度程序自动运行的 VB.Net 程序。该程序运行一个存储过程并通过电子邮件发送数据集的结果......我想做的是发送“日期和时间”作为日期和时间，但添加一个小时（时间目前在中央，我需要东方的结果）。

```
<td><%= Convert.ToDateTime(paidOut.Paid_Out_Datetime).ToString("M/d/yy") %> 
```

如何操作上面的代码将其转换为 8/8/12 6:30（它在数据库中为 8/8/12 5:30）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:07:23.860

```
 <td><%= Convert.ToDateTime(paidOut.Paid_Out_Datetime).AddHours(1).ToString("M/d/yy") %> 
```

# javascript - 获取所有业务推荐字段

> ID：11885255
> 
> 赞同：1
> 
> 时间：2012-08-09T14:05:17.290
> 
> 标签：javascript, dynamics-crm-4

是否有一种简单的方法可以检查表单上的所有业务推荐字段？

当有人更改表单上的业务推荐字段之一时，我们希望对实体中的字段进行一些小的更改（因此不会被系统进程修改）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:43:26.943

看到您已将问题标记为 javascript，我将假设您希望在表单级别执行这些更改。

要判断某人何时更改了业务推荐字段，您必须添加一个 On Change 事件，因此问题就变成了如何添加这些 On Change 处理程序。

1.  手动将处理程序添加到业务推荐字段 - 最受支持和最简单的方法（除非您有数百个字段，在这种情况下可能需要很长时间）。
2.  使用 javascript 浏览 DOM 并查找“+”并以这种方式添加它们 - 更困难且不受支持。
3.  查询 Crm 元数据服务，然后浏览 DOM 并添加它们 - 再次更加困难且不受支持。

我会选择1。

# c# - 获取 .ttf 文件的字体名称

> ID：11885259
> 
> 赞同：13
> 
> 时间：2012-08-09T14:05:32.470
> 
> 标签：c#, .net, fonts

假设有一个 .ttf（True Type 字体）文件。您可以通过单击将其安装在 Windows 上。字体的真实名称不是 .tff 之前的文本（可以说 SuperFont.ttf => 所以名称不是“SuperFont” - 它可能是，但大多数情况下不是）。我想阅读 .tff （不知何故？）并获取字体的名称（不安装字体）。有任何想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-09T14:14:36.580

您需要将字体添加到私有集合 ( `PrivateFontCollection`)，然后请求`FontFamily`实例并获取其`Name`属性。

像这样：

```
PrivateFontCollection fontCol = new PrivateFontCollection();
fontCol.AddFontFile(@"PATH TO FONT");
Console.WriteLine(fontCol.Families[0].Name); 
```

您将需要命名空间：

```
using System.Drawing;
using System.Drawing.Text; 
```

MSDN: [PrivateFontCollection](http://msdn.microsoft.com/en-us/library/system.drawing.text.privatefontcollection.aspx) , [FontFamily](http://msdn.microsoft.com/en-us/library/system.drawing.fontfamily.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-15T10:12:50.573

这是另一个在不使用 System.Drawing dll 的情况下提取字体名称的代码

```
foreach (FontFamily fontFamily in Fonts.GetFontFamilies("file:///D:/MyFonts/"))
{
    string name = fontFamily .ToString().Split('#')[fontFamily .ToString().Split('#').Count() - 1];
} 
```

# asp.net - 我正在尝试使用标量函数，并且想在 asp.net 代码中使用 taht，但我收到错误提示“f1 附近的语法不正确”“函数名称”f

> ID：11885265
> 
> 赞同：0
> 
> 时间：2012-08-09T14:05:49.467
> 
> 标签：asp.net, sql

sql代码

```
create function f1( @pay float)
returns float
as
begin
return(@pay*8*10)
end 
```

C# 代码

```
protected void Button1_Click(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(ConfigurationSettings.AppSettings["abc"]);

        float a;
        SqlCommand cmd = new SqlCommand("dbo.f1",con);
        cmd.CommandType = CommandType.Text;
        cmd.Parameters.AddWithValue("@pay",TextBox1.Text);
        //cmd.Parameters.AddWithValue("@uname", TextBox2.Text);

        con.Open();
        a = (float)(cmd.ExecuteScalar());
        TextBox2.Text = System.Convert.ToString(a);
        con.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:15:57.653

您不能直接在 C# 中调用函数。像这样试试

```
cmd.CommandText = "SELECT COUNT(*) FROM dbo.f1";
Int32 count = (Int32) cmd.ExecuteScalar(); 
```

希望这对你有帮助，谢谢。

# r - 在 R 中重塑（...ala SAS PROC Transpose）

> ID：11885266
> 
> 赞同：1
> 
> 时间：2012-08-09T14:05:52.427
> 
> 标签：r

我在 R 中有下表。我想转置它。我是 R 新手，一直在使用 SAS。

所以我想要一个proc transpose的副本是SAS。我也以我想要的格式提供输出。

```
C_number<-c(1:20)
REG<-letters[1:20]
Market<-c(21:40)
DF<-data.frame(C_number,REG,Market)
n <- nrow(DF)
DF$A_count <- sample(100, n, replace=TRUE) 
DF$B_count <- sample(100, n, replace=TRUE) 
```

输出应该是：

```
C_number          REG       Market      Name of former variable          Mem_count1
1                  A        21          A_count                           5
1                  A        21          B_count                           80
2                  B        22          A_count                           36
2                  B        22          B_count                           56
3                  C        23          A_count                           77
3                  C        23          B_count                           26 
```

**因此，转置背后的基本思想是将两列 A_count 和 B_count 转换为名为“前变量名称”的列，并创建一个新列 mem_count1 将给出各自的值。**

它不完全是转置，但有点相似。我不知道该怎么做。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T14:16:05.720

您可以为此使用`reshape2`（或`reshape`包），特别是该`melt`功能。使用像你这样的数据集（由于随机种子不同而不同），我们可以这样：

```
require(reshape2)
DF_result <- melt(DF,  measure.vars = c("A_count", "B_count"))
head(DF_result)

##   C_number REG Market variable value
## 1        1   a     21  A_count    49
## 2        2   b     22  A_count    99
## 3        3   c     23  A_count    19
## 4        4   d     24  A_count    43
## 5        5   e     25  A_count    53
## 6        6   f     26  A_count    50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:51:30.387

这将使用基本功能来完成`reshape`：

```
reshape(DF,
        direction="long",
        idvar=1:3, varying=c("A_count","B_count"), # the constant and varying columns
        times=c("A_count","B_count"),     # sets the values for new 'source' column
        v.names="Name_of_former_variable" ) # the header for the 'source' column

                C_number REG Market    time Counts
1.a.21.A_count         1   a     21 A_count     14
2.b.22.A_count         2   b     22 A_count     18
3.c.23.A_count         3   c     23 A_count     49
4.d.24.A_count         4   d     24 A_count     64
5.e.25.A_count         5   e     25 A_count     99
6.f.26.A_count         6   f     26 A_count     10
7.g.27.A_count         7   g     27 A_count     70
8.h.28.A_count         8   h     28 A_count      1
snipped output 
```

# asp.net - Gridview 上每行的默认按钮

> ID：11885271
> 
> 赞同：0
> 
> 时间：2012-08-09T14:06:10.617
> 
> 标签：asp.net, gridview

所以我一直在寻找这个几天，但找不到一个好的答案，所以我想我会把它扔给 SO 大师，看看是否有人有任何想法。

我一直在尝试在 gridview 编辑中获得每行的默认按钮。现在，我确实发现了[以下](https://stackoverflow.com/questions/1389234/forcing-default-button-on-a-gridview)hack 确实有效，但是，它导致了我的 Grid 的其他更大问题（我使用 RowCommand 来处理我的更新和插入，而不是 RowUpdating）。

我目前正在使用 VS 2008，在任何较新的版本中，是否有一种干净的方法可以为正在编辑的行添加默认按钮？2008年有什么好的方法吗？

谢谢

编辑：

```
 <asp:TemplateField SortExpression="State" HeaderText="State">
    <ItemTemplate >  
        <asp:Label ID="lblStte" runat="server" Text='<%# Bind("State") %>'></asp:Label>       
    </ItemTemplate>

     <EditItemTemplate>
        <asp:Label ID="lblState" runat="server" Text='<%# Bind("State") %>'></asp:Label> 
    </EditItemTemplate>
</asp:TemplateField>

<asp:TemplateField SortExpression="Comments" HeaderText="Comments">
    <ItemTemplate >       
        <asp:Label ID="lblComments" runat="server"  Text='<%# GetSubstring(Eval("Comments"), 20) %>'> </asp:Label>
    </ItemTemplate>

     <EditItemTemplate>
        <asp:TextBox ID="txtComments" runat="server"></asp:TextBox>
    </EditItemTemplate>
</asp:TemplateField>                

<asp:TemplateField  HeaderText="">
    <ItemTemplate >  
        <asp:Button ID="btnSelect" CommandName="Edit" runat="server" Text="Select" />
        <asp:Button ID="btnATM"   CommandName="GoTo" runat="server" Text="Go to" />        
    </ItemTemplate>

     <EditItemTemplate>
            <asp:Button ID="btnUpdate" CommandName="Update" runat="server" Text="Update" />
            <asp:Button ID="btnCancel" CommandName="Cancel" runat="server" Text="Cancel" />
    </EditItemTemplate>
</asp:TemplateField>                          

    </Columns> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:38:35.587

你为什么不直接使用这种风格，我觉得你让它更混乱：

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:"STRINGNAME"ConnectionString %>" ProviderName="<%$ConnectionStrings:ProjectCISConnectionString.ProviderName %>"
            SelectCommand="SELECT * FROM CIS.CIS_TRANS ORDER BY ID ASC" 
            DeleteCommand="DELETE FROM CIS.CIS_TRANS WHERE ID = :ID"
            InsertCommand="INSERT INTO CIS.CIS_TRANS (TRANS_CD,FUND_CD,BSA_CD,DP_TYPE,TRANS_CD_DESC) VALUES (:TRANS_CD,:FUND_CD,:BSA_CD,:DP_TYPE,:TRANS_CD_DESC)"
            UpdateCommand="UPDATE CIS.CIS_TRANS SET TRANS_CD = :TRANS_CD, FUND_CD = :FUND_CD, BSA_CD = :BSA_CD, DP_TYPE = :DP_TYPE, TRANS_CD_DESC =:TRANS_CD_DESC WHERE ID = :ID">

        </asp:SqlDataSource> 
```

"STRINGNAME" 输入你的没有 ""

如果您连接到 SQL 数据库 CHANGE THE : to @

我会为您提供我的外观的屏幕截图，如果您喜欢，请告诉我。

![在此处输入图像描述](../Images/e55a049a875aa358b66163d2971a04be.png)

# c# - Visual C# 数据库 Sql Server 项目中的配置文件

> ID：11885282
> 
> 赞同：1
> 
> 时间：2012-08-09T14:06:43.877
> 
> 标签：c#, sql-server, clr

是否可以像任何其他 winforms 或 webform 项目一样在 Visual C# Database Sql Server 项目中使用 app.config 文件。

在此先感谢犹大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:37:24.880

不是真的，不。

您正在有效地创建一个类库项目。尽管您*可以*将`app.config`文件添加到此类项目（普通项目，而不是 SQL CLR 项目），但它们实际上在运行时并不可用（无需跳过很多圈） - 只有与 EXE 项目关联的配置文件被使用。

此外，在这种情况下，您的代码实际上将在 SQL Server 进程中运行。

# python - 如何使用 python 获取 JSON 对象中的值/内容

> ID：11885284
> 
> 赞同：7
> 
> 时间：2012-08-09T14:06:55.133
> 
> 标签：python, json, python-2.7

```
import json
import urllib
import urllib2
url = "https://www.virustotal.com/vtapi/v2/file/report"
parameters = {"resource": "2aa837802b1c7867a65067525a843566029bd97e3ce99f6eb55217e219043ae1",
         "apikey": "123123123123123123"}
data = urllib.urlencode(parameters)
req = urllib2.Request(url, data)
response = urllib2.urlopen(req)

json_object = json.load(response)

print json_object['scans'] 
```

你们能否帮助解决如何在我的代码返回的 JSON 对象中获取特定值？该代码连接到 VirusTotal 以获取对象扫描结果。

我试图用最后一行代码打印它，但它打印了整个输出。

JSON 对象如下所示：

```
{
    "scans": {
        "TotalDefense": {
            "detected": false,
            "version": "37.0.10022",
            "result": null,
            "update": "20120809"
        },
        "nProtect": {
            "detected": false,
            "version": "2012-08-09.02",
            "result": null,
            "update": "20120809"
        },
        "CAT-QuickHeal": {
            "detected": false,
            "version": "12.00",
            "result": null,
            "update": "20120809"
        },
        "McAfee": {
            "detected": false,
            "version": "5.400.0.1158",
            "result": null,
            "update": "20120809"
        },
        "K7AntiVirus": {
            "detected": false,
            "version": "9.145.7456",
            "result": null,
            "update": "20120808"
        },
        "TheHacker": {
            "detected": false,
            "version": "None",
            "result": null,
            "update": "20120808"
        },
        "VirusBuster": {
            "detected": false,
            "version": "15.0.138.0",
            "result": null,
            "update": "20120809"
        },
        "F-Prot": {
            "detected": false,
            "version": "4.6.5.141",
            "result": null,
            "update": "20120809"
        },
        "Symantec": {
            "detected": false,
            "version": "20121.1.0.298",
            "result": null,
            "update": "20120809"
        },
        "Norman": {
            "detected": false,
            "version": "6.08.06",
            "result": null,
            "update": "20120809"
        },
        "ByteHero": {
            "detected": false,
            "version": "1.0.0.1",
            "result": null,
            "update": "20120723"
        },
        "TrendMicro-HouseCall": {
            "detected": false,
            "version": "9.500.0.1008",
            "result": null,
            "update": "20120809"
        },
        "Avast": {
            "detected": false,
            "version": "6.0.1289.0",
            "result": null,
            "update": "20120809"
        },
        "eSafe": {
            "detected": false,
            "version": "7.0.17.0",
            "result": null,
            "update": "20120808"
        },
        "ClamAV": {
            "detected": false,
            "version": "0.97.3.0",
            "result": null,
            "update": "20120809"
        },
        "Kaspersky": {
            "detected": false,
            "version": "9.0.0.837",
            "result": null,
            "update": "20120809"
        },
        "BitDefender": {
            "detected": false,
            "version": "7.2",
            "result": null,
            "update": "20120809"
        },
        "ViRobot": {
            "detected": false,
            "version": "2011.4.7.4223",
            "result": null,
            "update": "20120809"
        },
        "Sophos": {
            "detected": false,
            "version": "4.80.0",
            "result": null,
            "update": "20120809"
        },
        "Comodo": {
            "detected": false,
            "version": "13190",
            "result": null,
            "update": "20120809"
        },
        "F-Secure": {
            "detected": false,
            "version": "9.0.16440.0",
            "result": null,
            "update": "20120809"
        },
        "DrWeb": {
            "detected": false,
            "version": "7.0.3.07130",
            "result": null,
            "update": "20120809"
        },
        "VIPRE": {
            "detected": false,
            "version": "12556",
            "result": null,
            "update": "20120809"
        },
        "AntiVir": {
            "detected": false,
            "version": "7.11.39.82",
            "result": null,
            "update": "20120809"
        },
        "TrendMicro": {
            "detected": false,
            "version": "9.561.0.1027",
            "result": null,
            "update": "20120809"
        },
        "McAfee-GW-Edition": {
            "detected": false,
            "version": "2012.1",
            "result": null,
            "update": "20120808"
        },
        "Emsisoft": {
            "detected": false,
            "version": "5.1.0.11",
            "result": null,
            "update": "20120809"
        },
        "Jiangmin": {
            "detected": false,
            "version": "13.0.900",
            "result": null,
            "update": "20120809"
        },
        "Antiy-AVL": {
            "detected": false,
            "version": "2.0.3.7",
            "result": null,
            "update": "20120808"
        },
        "Microsoft": {
            "detected": false,
            "version": "1.8601",
            "result": null,
            "update": "20120809"
        },
        "SUPERAntiSpyware": {
            "detected": false,
            "version": "4.40.0.1006",
            "result": null,
            "update": "20120809"
        },
        "GData": {
            "detected": false,
            "version": "22",
            "result": null,
            "update": "20120809"
        },
        "Commtouch": {
            "detected": false,
            "version": "5.3.2.6",
            "result": null,
            "update": "20120809"
        },
        "AhnLab-V3": {
            "detected": false,
            "version": "2012.08.09.00",
            "result": null,
            "update": "20120808"
        },
        "VBA32": {
            "detected": false,
            "version": "3.12.18.2",
            "result": null,
            "update": "20120809"
        },
        "PCTools": {
            "detected": false,
            "version": "8.0.0.5",
            "result": null,
            "update": "20120809"
        },
        "ESET-NOD32": {
            "detected": false,
            "version": "7370",
            "result": null,
            "update": "20120809"
        },
        "Rising": {
            "detected": false,
            "version": "24.22.02.05",
            "result": null,
            "update": "20120809"
        },
        "Ikarus": {
            "detected": false,
            "version": "T3.1.1.122.0",
            "result": null,
            "update": "20120809"
        },
        "Fortinet": {
            "detected": false,
            "version": "4.3.398.0",
            "result": null,
            "update": "20120809"
        },
        "AVG": {
            "detected": false,
            "version": "10.0.0.1190",
            "result": null,
            "update": "20120809"
        },
        "Panda": {
            "detected": false,
            "version": "10.0.3.5",
            "result": null,
            "update": "20120809"
        }
    },
    "scan_id": "2aa837802b1c7867a65067525a843566029bd97e3ce99f6eb55217e219043ae1-1344514045",
    "sha1": "1bebf3ff83636e19cb8e26b6d46472c614aac7ab",
    "resource": "2aa837802b1c7867a65067525a843566029bd97e3ce99f6eb55217e219043ae1",
    "response_code": 1,
    "scan_date": "2012-08-09 12:07:25",
    "permalink": "https://www.virustotal.com/file/2aa837802b1c7867a65067525a843566029bd97e3ce99f6eb55217e219043ae1/analysis/1344514045/",
    "verbose_msg": "Scan finished, scan information embedded in this object",
    "total": 42,
    "positives": 0,
    "sha256": "2aa837802b1c7867a65067525a843566029bd97e3ce99f6eb55217e219043ae1",
    "md5": "6aadd888170411af8aaa0bd8ebffeba4"
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T14:13:50.420

使用`json.loads`它将 json 字符串转换为包含 dicts、list 等的 dict。

编辑 2：您可以像这样访问每个项目：`json_object['scans']['TotalDefense']['version']` 续。`json.loads(json.load(response))`但正如我在下面的评论中提到的那样，您可能还需要这样做。

编辑 1：在您的示例中，我们不应再`"scans"`看到`print json_object['scans']`.

* * *

从[http://docs.python.org/library/json.html](http://docs.python.org/library/json.html)：

```
>>> import json
>>> json.loads('["foo", {"bar":["baz", null, 1.0, 2]}]')
[u'foo', {u'bar': [u'baz', None, 1.0, 2]}] 
```

该页面还包含有关如何进行更复杂解码的信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T14:52:44.583

```
import json
import urllib
import urllib2
url = "https://www.virustotal.com/vtapi/v2/file/report"
parameters = {"resource": "2aa837802b1c7867a65067525a843566029bd97e3ce99f6eb55217e219043ae1",
         "apikey": "12312312312312312"}
data = urllib.urlencode(parameters)
req = urllib2.Request(url, data)
response = urllib2.urlopen(req)
json_object = response.read()
print '\n '
response_dict = json.loads(json_object)
print response_dict.get("response_code",{}) 
```

这会在对象中输出 response_code 的值。要使用嵌套值，`response_dict.get("scans",{}).get("AVG",{})` 可以完成 a 。谢谢大家！

# android - 键入时看不到滚动视图中的编辑文本

> ID：11885289
> 
> 赞同：1
> 
> 时间：2012-08-09T14:07:07.137
> 
> 标签：android, scrollview, android-edittext, android-softkeyboard

尝试`EditText`输入`EditText`.

如何防止软键盘覆盖我的`EditText`字段？

按下后退按钮后，我可以看到我输入的内容，因为软键盘不再覆盖`EditText`.

我正在使用 Galaxy 10.1 英寸平板电脑。

**XML**

```
<ScrollView
            android:layout_width="wrap_content"
            android:layout_height="400dp" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <TextView
                        android:layout_width="150dp"
                        android:layout_height="wrap_content"
                        android:text="1) Project"
                        android:textColor="#000000"
                        android:layout_gravity="bottom"
                        android:textSize="25sp" />

                    <EditText
                        android:id="@+id/projectET"
                        android:layout_width="500dp"
                        android:layout_height="wrap_content"
                        android:textSize="25sp"
                        android:ems="10"
                        android:hint="Project" 
                        android:inputType="textCapWords"
                        android:layout_gravity="bottom"/>

                    <CheckBox
                        android:id="@+id/projectCBM"
                        android:layout_width="wrap_content"
                        android:layout_height="55dp" />

                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <TextView
                        android:layout_width="150dp"
                        android:layout_height="wrap_content"
                        android:text="2) Customer"
                        android:textColor="#000000"
                        android:layout_gravity="bottom"
                        android:textSize="25sp" />

                    <EditText
                        android:id="@+id/customerET"
                        android:layout_width="500dp"
                        android:layout_height="wrap_content"
                        android:ems="10"
                        android:inputType="textCapWords"
                        android:layout_gravity="bottom"
                        android:textSize="25sp"
                        android:hint="Customer" />

                    <CheckBox
                        android:id="@+id/customerCBM"
                        android:layout_width="wrap_content"
                        android:layout_height="55dp" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <TextView
                        android:id="@+id/material1"
                        android:layout_width="150dp"
                        android:layout_height="wrap_content"
                        android:text="3) Material"
                        android:textColor="#000000"
                        android:layout_gravity="bottom"
                        android:textSize="25sp" />

                    <EditText
                        android:id="@+id/materialET"
                        android:layout_width="500dp"
                        android:layout_height="wrap_content"
                        android:textSize="25sp"
                        android:layout_gravity="bottom"
                        android:inputType="textCapWords"
                        android:ems="10"
                        android:hint="Material" />

                    <CheckBox
                        android:id="@+id/materialCBM"
                        android:layout_width="wrap_content"
                        android:layout_height="55dp" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <TextView
                        android:layout_width="150dp"
                        android:layout_height="wrap_content"
                        android:text="4) Phase"
                        android:layout_gravity="bottom"
                        android:textColor="#000000"
                        android:textSize="25sp" />

                    <EditText
                        android:id="@+id/fazeET"
                        android:layout_width="500dp"
                        android:layout_height="wrap_content"
                        android:ems="10"
                        android:layout_gravity="bottom"
                        android:textSize="25sp"
                        android:enabled="false"
                        android:hint="Phase" />

                    <CheckBox
                        android:id="@+id/fazeCBM"
                        android:layout_width="wrap_content"
                        android:layout_height="55dp"
                        android:enabled="false" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <TextView
                        android:layout_width="150dp"
                        android:layout_height="wrap_content"
                        android:text="5)"
                        android:textColor="#000000"
                        android:layout_gravity="bottom"
                        android:textSize="25sp" />

                    <EditText
                        android:layout_width="500dp"
                        android:layout_height="wrap_content"
                        android:ems="10"
                        android:layout_gravity="bottom"
                        android:textSize="25sp"
                        android:enabled="false"
                        android:hint="" />

                    <CheckBox
                        android:layout_width="wrap_content"
                        android:layout_height="55dp"
                        android:enabled="false" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <TextView
                        android:layout_width="150dp"
                        android:layout_height="wrap_content"
                        android:text="6)"
                        android:layout_gravity="bottom"
                        android:textColor="#000000"
                        android:textSize="25sp" />

                    <EditText
                        android:layout_width="500dp"
                        android:layout_height="wrap_content"
                        android:ems="10"
                        android:layout_gravity="bottom"
                        android:textSize="25sp"
                        android:enabled="false"
                        android:hint="" />

                    <CheckBox
                        android:layout_width="wrap_content"
                        android:layout_height="55dp"
                        android:enabled="false" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <TextView
                        android:layout_width="150dp"
                        android:layout_height="wrap_content"
                        android:text="7)"
                        android:layout_gravity="bottom"
                        android:textColor="#000000"
                        android:textSize="25sp" />

                    <EditText
                        android:layout_width="500dp"
                        android:layout_height="wrap_content"
                        android:ems="10"
                        android:layout_gravity="bottom"
                        android:textSize="25sp"
                        android:enabled="false"
                        android:hint="" />

                    <CheckBox
                        android:layout_width="wrap_content"
                        android:layout_height="55dp"
                        android:enabled="false" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <TextView
                        android:layout_width="150dp"
                        android:layout_height="wrap_content"
                        android:text="8)"
                        android:textColor="#000000"
                        android:layout_gravity="bottom"
                        android:textSize="25sp" />

                    <EditText
                        android:layout_width="500dp"
                        android:layout_height="wrap_content"
                        android:ems="10"
                        android:layout_gravity="bottom"
                        android:textSize="25sp"
                        android:enabled="false"
                        android:hint="" />

                    <CheckBox
                        android:layout_width="55dp"
                        android:layout_height="wrap_content"
                        android:enabled="false" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <TextView
                        android:layout_width="150dp"
                        android:layout_height="wrap_content"
                        android:text="9)"
                        android:textColor="#000000"
                        android:layout_gravity="bottom"
                        android:textSize="25sp" />

                    <EditText
                        android:layout_width="500dp"
                        android:layout_height="wrap_content"
                        android:ems="10"
                        android:layout_gravity="bottom"
                        android:textSize="25sp"
                        android:enabled="false"
                        android:hint="" />

                    <CheckBox
                        android:layout_width="55dp"
                        android:layout_height="wrap_content"
                        android:enabled="false" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <TextView
                        android:layout_width="150dp"
                        android:layout_height="wrap_content"
                        android:text="10)"
                        android:textColor="#000000"
                        android:layout_gravity="bottom"
                        android:textSize="25sp" />

                    <EditText
                        android:layout_width="500dp"
                        android:layout_height="wrap_content"
                        android:ems="10"
                        android:layout_gravity="bottom"
                        android:textSize="25sp"
                        android:enabled="false"
                        android:hint="" />

                    <CheckBox
                        android:layout_width="55dp"
                        android:layout_height="wrap_content"
                        android:enabled="false" />
                </LinearLayout>
            </LinearLayout>
        </ScrollView> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:14:26.860

您需要使用[windowSoftInputMode](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)。这将允许您的 UI 在键盘出现时调整大小。允许用户`EditText`在输入键盘时看到。

在您的 AndroidManifest.xml 中将此属性添加到您的`Activity`.

```
android:windowSoftInputMode="adjustPan" 
```

[参考](https://stackoverflow.com/a/3295913/427763)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:17:29.170

好吧，我认为您的 上方有一些固定布局`ScrollView`，因为通常`ScrollView`会自动滚动到 Focused 组件。

所以，如果我是对的，有两种选择（我知道）：

1.  将`ScrollView`键盘放在键盘上或
2.  验证布局更改以动态地将`ScrollView`其带到上方和可见的位置，在`ScrollView`可见后它将自动向`EditText`用户显示权限。

# apache-flex - Flex 中 mx:datagrid 的样式

> ID：11885297
> 
> 赞同：1
> 
> 时间：2012-08-09T14:07:57.557
> 
> 标签：apache-flex, flex3

我想在 flex 中创建一个 mx:DataGrid 组件，它应该如下图所示：

![在此处输入图像描述](../Images/ffe6c82d52d94ee6b3e315ff9a297595.png)

我可以在标题中添加边框，也可以将标题颜色设置为白色，但我无法在数据网格的行之间绘制分隔线。

这是我正在使用的代码：

```
<mx:DataGrid id="dg" width="100%" height="100%" dataProvider="{arrDg}" draggableColumns="false"
                 resizableColumns="false" rowCount="{arrDg.length}" selectable="false" headerColors="[white, white]"
                 sortableColumns="false" variableRowHeight="true" verticalScrollPolicy="off"
                 borderColor="0x000000" borderSides="">
        <mx:columns>
            <mx:DataGridColumn backgroundColor="0xFFFFFF" color="0x000000" dataField="asdf"
                               headerText="asdf"
                               textAlign="center" />
            <mx:DataGridColumn backgroundColor="0xFFFFFF" color="0x000000" dataField="rteyre"
                              headerText="rteyre"
                               headerWordWrap="true" textAlign="center" wordWrap="true"/>
            <mx:DataGridColumn backgroundColor="0xFFFFFF" color="0x000000" dataField="xcv"
                              headerText="xcv" textAlign="center"/>
            <mx:DataGridColumn backgroundColor="0xFFFFFF" color="0x000000" dataField="hgj"
                              headerText="hgj"
                               headerWordWrap="true" textAlign="center" wordWrap="true"/>
            <mx:DataGridColumn backgroundColor="0xFFFFFF" color="0x000000" dataField="yuio"
                              headerText="yuio" textAlign="center"/>
        </mx:columns>
    </mx:DataGrid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:32:30.350

请查看[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/DataGrid.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/DataGrid.html)添加属性 Horizo​​ntalGridLines="false|true" 和 verticalGridLines="false|true" 添加它作为答案。谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:22:50.077

你有没有改变线条的颜色？默认情况下应该是可见的。为您的数据网格尝试这种风格：

```
verticalGridLineColor: #000000;
horizontalGridLineColor: #000000; 
```

# python - Numpy 嵌套结构化数组的引用

> ID：11885298
> 
> 赞同：4
> 
> 时间：2012-08-09T14:08:10.307
> 
> 标签：python, arrays, numpy, structured-data

我有以下数据结构：

```
N=100
TB =     {'names':('n', 'D'),'formats':(int, int)}
TA =     {'names':('id', 'B'),'formats':(int, dtype((TB, (N))))}
a = np.empty(1000, dtype=TA)
b = np.empty(N, dtype=TB) 
```

其中 a 是具有两个字段的结构化数组：“id”和“B”。在“B”中，存储了另一个具有“n”和 D 字段的结构化数组，例如

```
for i in range(0,1000):
   a['B'][i] = b 
```

执行上述赋值时，将 b 中的数据复制到 a。有没有办法只复制对 b 的引用，这样当我更改 b 时，更改会反映在 中`a['B'][i]`？我想要的是将指向 b 的指针存储在 a 中，因为我不需要创建副本，因为 b 中的数据对于 a 的每一行都是相同的。

我累了

```
TA = {'names':('id', 'B'),'formats':(int, object)} 
```

它可以工作，但会破坏数组的嵌套结构。有没有办法保留结构化数组功能，例如`a['B']['D']`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:14:37.493

最简洁的答案是不。尽管`numpy`数组的语法*看起来*与标准的 Python 语法相同，但幕后发生的事情却大不相同。复杂的`numpy`数据类型，例如`TA`使用大块连续内存来存储每条记录；内存必须定期布局，否则一切都会崩溃。

因此，当您创建一个包含 1000 项的嵌套数据类型的数组时`TA`，实际上分配了 1000 个内存块，每个内存块都足够大以包含`N`不同的`TB`数组。这就是*为什么*你可以做这样的事情`a['B']['D']`——或者，指出一点，这样的事情：

```
>>> (a['B'][1]['D'] == a['B']['D'][1]).all()
True
>>> a['B'][1]['D'][0] = 123456789
>>> (a['B'][1]['D'] == a['B']['D'][1]).all()
True 
```

对于普通的 Python 对象，上述操作会失败，因为对象项访问顺序很重要。实际上很奇怪，这在 中是可能的`numpy`，唯一可能的原因是`numpy`使用了统一结构的连续内存。

据我所知，`numpy`没有提供任何方法来完成您所要求的事情（如果我错了，请有人纠正我！），并且所需的间接性可能涉及对`numpy`API 的重大更改。

我要补充一点，无论如何我认为这样做没有多大意义。如果只需要一个数组副本，为什么不将它存储在数组之外呢？您甚至可以将它与 numpy 数组一起传递，作为 a`tuple`或`namedtuple`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:41:22.170

是的，您可以只打开一个视图。但正如您所描述的那样，它的工作方式相反：

```
>>> a = np.array([1,2,3,4,5,6])
>>> b = a[2:4].view()
>>> b[0] = 0
>>> b[1] = 0
>>> a
array([1, 2, 0, 0, 5, 6]) 
```

# java - 到达项目内的文件

> ID：11885299
> 
> 赞同：0
> 
> 时间：2012-08-09T14:08:12.593
> 
> 标签：java, eclipse, jsp, servlets

我正在使用 JSP 和 Servlet 开发一个网站。我不想拥有数据库，而是想在我的服务器上拥有一个 XML 文件。我想将用户提供的信息保存在我的项目中的 XML 文件中，该文件保存在如何在我的代码中定义这样的路径？

我的 Servlet 在下面`Project/src/servletPackage/myServlet.java`，XML 文件当前在`Project/WebContent/file.xml`. 路径不应**如下**：`C:/eclispe/workspace/Project/WebContent/file.xml`

这确实有效，但仅当从主计算机访问网页时。在其他计算机上，它会在用户计算机上创建一个目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:25:30.507

> 我想将用户提供的信息保存在我项目中的 XML 文件中

如果那是您想要做的，那么使用

```
File infoFile = new File(getServletContext().getRealPath("/file.xml")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:45:30.490

您可以将 XML 放在项目的类路径中并作为 ResourceStream 访问它。在 Eclipse 中，一个简单的方法是在你的源代码文件夹中创建一个包，并在那里添加你需要的文件：

```
Project
+ src
  + com.mycompany.bean
    - Bean1.java
    - Bean2.java
    ...
  + xml
    - file.xml 
```

从 Bean1 类访问文件

```
public class Bean1 {

    public void accessResourceFile() {
        InputStream xmlFile = Bean1.getClass().getResourceAsStream("xml/file.xml");
        //do what you want/need with the file...
    }
} 
```

另一个例子：

*   [将资源作为流从类加载](http://www.java.happycodings.com/Other/code35.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:31:05.380

您可以使用类加载器来访问存储在应用程序类路径中的资源。您可以将您的 xml 作为类路径的一部分放在服务器中配置的 WEB-INF/classes 或其他文件夹中，并使用方法 classLoader.getResourceAsStream 获取 Inputflow 来读取文件。

[这](http://viralpatel.net/blogs/loading-java-properties-files/)是如何以这种方式加载属性文件的示例。

请注意，此解决方案仅在您的 servlet 部署在一个 servler 中时才有效，如果您在集群或多服务器环境中工作，这些文件将不会被服务器共享。

如果您需要共享文件，请将它们放在共享文件夹中并避免在代码中硬编码绝对路径，请使用 servlet init 参数指向存储文件夹的根目录，如下所示。

```
<web-app>
<servlet>
    <servlet-name>MyServletName</servlet-name>
    <servlet-class>com.mycompany.MyServlet</servlet-class>

    <init-param>
        <param-name> storagefolder</param-name>
        <param-value>/var/opt/sun/appserver/sharedstoragefolder</param-value>
    </init-param>
    ...
</servlet>
...
</web-app> 
```

希望这有帮助。

# c# - 实施 azure colocated 缓存

> ID：11885308
> 
> 赞同：7
> 
> 时间：2012-08-09T14:08:45.150
> 
> 标签：c#, azure, azure-web-roles, azure-caching

使用 VS2012，我从 WebRole 属性缓存选项卡中添加了缓存功能。其中，它在 web.config 中生成了以下 XML：

```
 <dataCacheClients>   
     <tracing sinkType="DiagnosticSink" traceLevel="Error" />
     <dataCacheClient name="default">
         <autoDiscover isEnabled="true"  identifier="[cluster role name]"/>
         <!-- <localCache isEnabled="true" sync="TimeoutBased" objectCount="100000" ttlValue="300" /> -->
     </dataCacheClient> 
    </dataCacheClients> 
```

好，太棒了。我将 [cluster role name] 替换为 webrole 的名称，例如“helloworld.web”。现在，当我创建 DataCacheFactory 或 DataCache 对象时：

```
 _dataCacheFactory = new DataCacheFactory();
    _defaultCache = _dataCacheFactory.GetDefaultCache();

    //Or, just this line
    _defaultCache = new DataCache(@"default"); 
```

我收到以下错误：

```
Microsoft.ApplicationServer.Caching.DataCacheException was unhandled
  HelpLink=http://go.microsoft.com/fwlink/?LinkId=164049
  HResult=-2146233088
  Message=ErrorCode<ERRCA0021>:SubStatus<ES0001>:Server collection cannot be empty.
  Source=Microsoft.ApplicationServer.Caching.Client
  ErrorCode=21
  SubStatus=-1

Some notes: 
IDE: VS2012,
Framework: 4.0
AzureSDK: June2012
Local dev machine 
```

我错过了什么？

**编辑**

我让它工作了！

我在 WebRole OnStart 方法中创建 DataCacheFactory，我将它移到 Global.asax 中的 Application_Start 中，它似乎正在工作。

Sandrino 解释了为什么会这样：[https ://stackoverflow.com/a/11886136/1374935](https://stackoverflow.com/a/11886136/1374935)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T14:52:36.500

在您谈到将 XML 添加到**web.config**的问题中，这适用于托管在您的 Web 角色中的 Web 应用程序（这就是代码在 Application_Start 方法中使用它时有效的原因）。

但是您需要知道 WebRole.cs 中的代码在不同的进程中运行（甚至在 Web 应用程序启动之前）。这就是为什么它无法从您的 web.config 中读取，这就是为什么它似乎没有配置服务器的原因。

为了使该代码也可以在您的 WebRole.cs 中运行，您需要在配置文件中为运行该代码的进程添加 XML。您的代码在**WaIISHost.exe**进程中运行，因此您需要创建一个新的配置文件**WaIISHost.exe.config**，在此文件中添加 XML 并将该文件的“复制到输出目录”属性更改为“始终复制”。

在此处阅读有关此 WaIISHost.exe 进程的更多信息：[新的完整 IIS 功能：与托管 Web 核心的区别](http://blogs.msdn.com/b/windowsazure/archive/2010/12/02/new-full-iis-capabilities-differences-from-hosted-web-core.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:39:12.907

我让它工作了！

我在 WebRole OnStart 方法中创建 DataCacheFactory，我将它移到 Global.asax 中的 Application_Start 中，它似乎正在工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-10T22:27:51.777

是的。逐步完成各种配置，我在故障排除期间也重新安装了 Azure 工具。

上面提到了 Web.config，但在您的服务定义中，请确保它有一行：

```
<Import moduleName="Caching" /> 
```

这是我的根本问题，但是一旦试图让它发挥作用，几乎所有事情都发生了变化。此外，当我查看 Web 角色时，缺少缓存选项卡，这是通过重新安装 Azure 工具修复的（我清理了可能有帮助或没有帮助的旧工具）。我通过 Azure 站点示例而不是上面的内容来启动它。

```
DataCache AgencyCache = new DataCache("AgencyDataValidation"); 
```

记得导入：

```
using Microsoft.ApplicationServer.Caching; 
```

# mvvm - 在 Caliburn Bootstrapper Configure() 中显示 MessageBox

> ID：11885310
> 
> 赞同：2
> 
> 时间：2012-08-09T14:08:48.013
> 
> 标签：mvvm, caliburn.micro

在我的 Caliburn Bootstrapper 中，我试图验证用户是否有权运行我的应用程序。如果他们不这样做，我需要向他们展示一条消息并退出。以下代码在 MessageBox.Show() 调用上引发 NullReferenceException。即使我在方法中移动`ComposeMef()`调用，它仍然会出错。`ValidateUserHasPermissionsToRun()``Configure()`

```
public class MyBootstrapper : Bootstrapper<DropWindowViewModel>
{

   // irrelevant methods omitted for brevity

   protected override void Configure()
   {
      this.InitializeSecurity();
      this.ValidateUserHasPermissionToRun();
      this.ComposeMef();
   }

   private void ComposeMef()
   {
      AggregateCatalog catalog = new AggregateCatalog(AssemblySource.Instance.Select(x => new AssemblyCatalog(x)).OfType<ComposablePartCatalog>());

      this.container = new CompositionContainer(catalog);

      CompositionBatch batch = new CompositionBatch();

      batch.AddExportedValue<IWindowManager>(new WindowManager());
      batch.AddExportedValue<IEventAggregator>(new EventAggregator());
      batch.AddExportedValue(this.container);
      batch.AddExportedValue(catalog);

      this.container.Compose(batch);
   }      

   private void ValidateUserHasPermissionToRun()
   {
      User user = SecurityContext.Current.SecurityUser;

      if (!user.HasPrivilege(Constants.PrivilegeLoadData))
      {
         // throws an exception
         MessageBox.Show("You do not have access to VIPER. Please contact the help desk if you need help.");
         this.TerminateApplication();
      }
   }
} 
```

处理这个问题的正确方法是什么？对于这么简单的事情，我只想显示一个消息框。我真的不想编写一个全新的 ViewModel/View。如果我必须使用不同的 ViewModel，我将如何切换 Caliburn 使用的 ViewModel？或者我应该在 上设置一个属性`DropWindowViewModel`来触发不同的界面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T09:28:10.673

我建议这是应该在你的根视图模型中完成的事情。引导程序应该就是这样。它加载您的应用程序所需的资源并配置它们。之后就完成了。检查用户是否可以运行应用程序是您的应用程序逻辑的一部分，因此应该进入根视图模型。

# javascript - 从 grails 控制器获取复选框值

> ID：11885312
> 
> 赞同：4
> 
> 时间：2012-08-09T14:08:59.183
> 
> 标签：javascript, html, grails, groovy, gsp

我有一个 grails 项目，我需要在其中选择要删除的字段，当我单击“删除”时，我需要一个函数来删除所有选定的项目：

**html代码：**

```
<form name="bookForm" action="list" method="post">
    ....
    <g:link controller="book" action="delete">Delete</g:link>
    ....
    ....
    <g:checkBox id="select_all" name="select_all" value="" onclick="selectAll();" />
    ....
    <g:each in="${bookList}" status="i" var="bookInstance">
        <tr class="${(i % 2) == 0 ? 'odd' : 'even'}">
            <td><g:checkBox id="${bookInstance.id}" name="delete_checkbox" value="" /></td>
        </tr>
    </g:each>
    ....
</form> 
```

**javascript代码：**

```
<script type="text/javascript">
    function selectAll(){//this function is used to check or uncheck all checkboxes
        var select = document.getElementById("select_all");
        var checkboxes = document.forms['bookForm'].elements['delete_checkbox'];
        if (select.checked){
            for (i = 0; i < checkboxes.length; i++) checkboxes[i].checked = true;
        }else{
            for (i = 0; i < checkboxes.length; i++) checkboxes[i].checked = false;
        }
    }//this function works fine
</script> 
```

**问题：**

我需要检查列表 gsp 中的所有复选框的操作，如果它们被选中，请获取它们的 id 并按 id 删除记录。

我可以通过 groovy 或 javascript 来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:19:06.723

您的代码的问题是您为复选框 =“”设置了值。这是不正确的，因为 value 是提交给服务器的内容。

您需要将其更改如下：

```
 <td><g:checkBox id="${bookInstance.id}" name="delete_checkbox" value="${bookInstance.id}"" /></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:32:44.193

重写你的复选框，如：

```
<g:checkBox id="delete_checkbox" name="delete_checkbox" value="${bookInstance.id}" /> 
```

因此，当您提交时，您将在 params 映射中获得一个名为_delete_checkbox**或**delete_checkbox**的**ID**数组。**要查看您得到的结果，您可以尝试在操作中打印您的参数。

 **```
println params 
```

您可以使用`params['nameOfTheAttribute']`. 获得 id 数组后，对其进行迭代并将其全部删除。**

# rspec - Rspec 模型关联

> ID：11885314
> 
> 赞同：3
> 
> 时间：2012-08-09T14:09:05.780
> 
> 标签：rspec, associations

我无法通过 rspec 测试

规格/模型/ticket_spec.rb

```
describe Ticket do
  describe "should have associations" do
    it { should belong_to(:location) } 
```

重击

```
 1) Ticket should have associations 
     Failure/Error: it { should belong_to(:location) }
     NoMethodError:
       undefined method `relations' for #<Class:0x000000076a34a0>
     # ./spec/models/ticket_spec.rb:5:in `block (3 levels) in <top (required)>' 
```

模型/ticket.rb

```
class Ticket < ActiveRecord::Base 
  ...
  belongs_to :location 
```

宝石文件

```
group :test do
  ...
  gem "shoulda"
  gem "shoulda-matchers"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:26:19.077

如果您使用主题功能，则应定义该主题：

```
before { @ticket = ... }
subject { @ticket } 
```

然后您可以将其用作：

```
it { should belong_to(:location) } 
```

# php - $_POST 变量丢失

> ID：11885318
> 
> 赞同：-3
> 
> 时间：2012-08-09T14:09:27.537
> 
> 标签：php, apache, variables, post

当我对 php 脚本进行 POST 提交时，我丢失了一个变量（例如： http: [//kidspc.com.mx/kidspc2/prueba_get_post.htm](http://kidspc.com.mx/kidspc2/prueba_get_post.htm)）。

我认为，php.ini 或 httpd.conf 中有一个参数导致 apache 阻止此变量，但我不知道要搜索什么。

我在这篇文章 PHP 中尝试了解决方案，[缺少一些 $_POST 值，但存在于 php://input 中](https://stackoverflow.com/questions/5077969/php-some-post-values-missing-but-are-present-in-php-input)，但变量仍然消失。

是否有可能导致此问题的 apache o php 参数？我怎么能解决这个问题？

**编辑：对不起，我将 name 属性添加到文本框并且它正在工作。请查看这篇文章 [https://stackoverflow.com/questions/11888825/post-variable-with-large-value-disappears](https://stackoverflow.com/questions/11888825/post-variable-with-large-value-disappears)**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T14:11:13.993

给你的 textarea 一个 name 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:11:24.393

您的 textarea 在 name='someName' 字段中没有任何内容。您需要为它命名才能发送。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:12:38.997

您忘记为 textarea 设置名称。没有名称的表单输入将不会通过 HTTP 发布。

```
<textarea name="some_var_name"></textarea> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T14:13:24.307

给文本区域元素一个名称属性。

# email - Sharepoint 2010 电子邮件配置

> ID：11885319
> 
> 赞同：2
> 
> 时间：2012-08-09T14:09:27.643
> 
> 标签：email, sharepoint, sharepoint-2010

只是一个快速的问题。我目前正在使用 Sharepoint Server 2010 标准的项目，我们只是想知道需要多长时间：

*   在与我们的 Sharepoint 2010 环境相同的服务器上设置邮件服务器
*   配置 Sharepoint 以将其用于传入电子邮件和传出电子邮件警报
*   创建约 10 个自定义的外发电子邮件警报，每个警报都带有适当的触发器（已上传文档，已在日历上设置日期等）
*   为每个特定角色的用户提供他们可以使用的电子邮件地址
*   确保从这些地址中的每一个发送和接收的每封电子邮件都存档在由相关通讯员分类的系统上。
    *   制作一个摘要页面，其中所有电子邮件都可以根据相关的通讯员进行分类。

我知道在最好的情况下估计时间是一个困难的问题，我们只想要一个非常粗略的估计，我们将有两个非常新的开发人员来实现这个具有 ASP 背景的共享点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:41:52.987

这很简单...

1.  在与我们的 Sharepoint 2010 环境相同的服务器上设置邮件服务器**[1 天]**
2.  配置 Sharepoint 以将其用于传入电子邮件和传出电子邮件警报**[1 小时]**
3.  创建约 10 个自定义的外发电子邮件警报，每个警报都带有适当的触发器（已上传文档，已在日历上设置日期等）**[2 天]**
4.  为每个特定角色的用户提供他们可以使用的电子邮件地址**[1 小时]**
5.  确保从这些地址中的每一个发送和接收的每封电子邮件都存档在由相关通讯员分类的系统上。**[4天]**
6.  制作一个摘要页面，其中所有电子邮件都可以根据相关的通讯员进行分类。

# javascript - 为什么这不会增加并存储值？

> ID：11885322
> 
> 赞同：3
> 
> 时间：2012-08-09T14:09:40.077
> 
> 标签：javascript

如果我想增加一个值，然后将其存储在另一个变量中，为什么不能在一行代码中做到这一点？

这有效

```
var count = 0;
count++;
var printer = count;
alert(printer); //Prints 1 
```

但这并不

```
var count = 0;
var printer = count++;
alert(printer); //Prints 0 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T14:10:39.470

您正在使用后递增运算符。赋值表达式完成后发生递增。

请改用预递增版本...

```
++count; 
```

或者使用`+=`运算符...

```
count += 1; 
```

*   [MDN 运营商文档](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#Operators)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T14:10:38.847

你需要做

```
var count = 0;
var printer = ++count;
alert(printer); 
```

w3schools 页面的[JavaScript 算术运算符](http://www.w3schools.com/js/js_operators.asp)部分通过 Try Me 实验室进行了不错的细分。简而言之，如果在变量之前进行递增/递减操作，它将在当前操作中使用之前发生。如果您在之后包含它，它将在当前操作之后发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:15:49.223

它可以在一行中完成。

```
//Example 1
var count = 0;
count++;
var printer = count;
alert(printer); //Prints 1

//Example 2
var count2 = 0;
var printer2 = count2++;
alert(printer2);   //Prints 0
printer2 = count2++;
alert(printer2);   //Prints 1

// Example 3, in one line
var count2 = 0;
var printer2 = count2 + 1;
alert(printer2);   //Prints 1

// Example 4, in one line
var count2 = 0;
var printer2 = ++count2;
alert(printer2);   //Prints 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:12:55.350

`++`根据您使用它的位置更改结果：

```
 y = 0;
 x = y++; // post-increment 
```

相当于

```
 y = 0;
 x = y;
 y = y + 1; 
```

和

```
 x = ++y; // pre-increment 
```

相当于

```
 y = 0;
 y = y + 1;
 x = y; 
```

# java - 通过 JDBC 从 PostgreSQL 中检索几何数组

> ID：11885324
> 
> 赞同：0
> 
> 时间：2012-08-09T14:09:45.810
> 
> 标签：java, postgresql, jdbc

我想使用 PostgreSQL JDBC 来检索几何类型的数组元素。但是当我尝试使用方法时：

```
Route route=null;
String sql="Select * from route where route_id=?";
PreparedStatement pstmt=null;
try {
    pstmt = localConn.prepareStatement(sql);
    pstmt.setInt(1,routeId);
    ResultSet rs = pstmt.executeQuery();
    if(rs.next()){
            Array points = rs.getArray("points");
            PGpoint[] pgPoints=points.getArray();
            ......
        }

} 
```

发生了错误：

```
org.postgresql.jdbc4.Jdbc4Array.getArrayImpl(long,int,Map) is not implemented. 
```

那么，还有其他方法可以获取几何数组中的元素吗？

谢谢！

# android - android获取当前前台activity的activity对象

> ID：11885325
> 
> 赞同：-1
> 
> 时间：2012-08-09T14:09:47.113
> 
> 标签：android, android-intent, android-activity

我正在构建一个聊天客户端，我希望能够获取当前正在运行的活动对象（不仅仅是他的名字）。

我需要这个来获得这个活动的意图对象来检查是否有任何额外的..

可以这样做吗？

我有这个代码：

```
ActivityManager mActivityManager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
List<ActivityManager.RunningTaskInfo> RunningTask = mActivityManager.getRunningTasks(1);
ActivityManager.RunningTaskInfo ar = RunningTask.get(0);
return ar.topActivity.toString(); 
```

但它只给了我它的名字，我需要它的对象..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:24:12.977

我很确定您不能以这种方式直接访问该对象，因为这将是安全漏洞：您可以通过这种方式访问​​任何（不仅仅是您的）正在运行的活动并与它们交互或根据您的喜好杀死它们。

也许你应该审查你的设计。

我想到的第一个便宜的 hack 并且与您所做的很接近，是维护您启动的所有活动的静态地图，并使用关联的名称作为获取活动的关键，这要归功于它的名称。

# java - 使用Java中设置的路径变量执行外部程序？

> ID：11885326
> 
> 赞同：4
> 
> 时间：2012-08-09T14:09:48.237
> 
> 标签：java, variables, path, cmd, external

我正在寻找通过命令行执行外部程序，但我发现只有当程序存在于我从中调用它的目录中时我才能这样做。我希望能够从任何目录执行程序。

我已经为 Windows (7) 设置了 Path 变量，并且能够使用命令行从任何目录手动执行程序；但是我无法通过 Java 做到这一点。

相关代码：

```
 Runtime rt = Runtime.getRuntime();

 Process proc = rt.exec(new String[]{"C:\\AutomateKPI\\GetLog.exe", "-e", rossIP}); 
```

我的问题是上述程序的输出产生了一个通用命名的文件“log.txt”。这将在线程化我的程序时导致问题。如果无法使用路径变量，或者我可以将程序复制到新目录中，然后将其删除。我想避免这样做。

编辑：上述代码的工作原理是 GetLog.exe 位于 C:\AutomateKPI 中。我想引用 %PATH% 以便我可以从 C:\AutomateKPI\*NewDir* 运行 GetLog.exe

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:12:23.043

尝试使用[`ProcessBuilder`](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html). 它允许您指定工作目录：

```
String commandPath = "C:" + File.pathSeparator +
                     AutomateKPI" + File.pathSeparator + "GetLog.exe";
ProcessBuilder pb = new ProcessBuilder(commandPath, "-e", rossIP);
pb.directory(new File("intendedWorkingDirectory"));
Process p = pb.start(); 
```

或者，如果*C:\AutomateKPI*在您的`%PATH%`：

```
ProcessBuilder pb = new ProcessBuilder("GetLog.exe", "-e", rossIP); 
```

从文档中不清楚，但`ProcessBuilder`似乎以类似于系统的方式定位事物，例如`%PATH%`在 Windows 上使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:29:09.687

好吧，只要您知道要打开的程序的路径，并且不必使用 cmd，这应该每次都可以：

```
File file = new File("File Directory");
Desktop dt = Desktop.getDesktop();

try {
    dt.open(file);
} catch (IOException e1) {
} 
```

# udp - 合理可靠的UDP广播库/协议？

> ID：11885331
> 
> 赞同：2
> 
> 时间：2012-08-09T14:10:04.793
> 
> 标签：udp, broadcast

我正在尝试通过多个 ad-hoc 节点之间的无线广播通道创建共享总线。每个节点都可以随时传输，所有节点都需要能够互相听到。这听起来像是多播的工作，特别是[OpenPGM](http://code.google.com/p/openpgm/)（请参阅[这个问题](https://stackoverflow.com/questions/4991659/reliable-udp-broadcast-libraries)了解其他人在问什么），除了我读到的关于 OpenPGM 的内容是它无法处理多个广播到同一个多播地址（显然，NACK 得到输了，但我不是专家，如果有人想纠正我，请随时！）。由于 OpenPGM 可能无法正常工作，我决定长期认​​真地考虑我对库的最低要求。他们来了：

*   必须通过 UDP 工作。
*   需要处理消息；希望能够一次向图书馆发送一条消息，并一次收到一条消息。
*   只需要到达最近的邻居！
*   需要在广播上工作，以便同时更新许多邻居。
*   需要支持多个邻居同时广播，他们之间没有任何协调。
*   需要从相应的数据包中自动重组消息，并将消息分解成数据包。
*   只需要合理可靠；这意味着以下所有内容：
    *   消息可能会丢失，因为某些数据包根本无法通过。
    *   消息可能被认为已经通过，因为 NACK 没有返回。
    *   你能想到的任何其他原因。

最后一组点很重要；一条消息可能会丢失，我不在乎。这就是“合理可靠”的来源。我不希望图书馆将不完整的消息交给我，我宁愿它们在合理的超时期限后被丢弃。我也不关心它是否不能保证任何消息的传递；如果需要，我可以在上面建立更强大的可靠性保证。基本上，它只需要确保如果我收到一条消息，那么它是完整的。它不必保证其他任何事情。

那么，有没有类似的东西呢？还是我应该自己写？

**编辑**：澄清一下，我的消息可能比单个 UDP 数据包可以处理的要大。如果不是这种情况，我会直接使用 UDP 广播，并输入某种编号方案，让我知道我是否收到了数据包。这就是为什么我正在寻找一个可以为我处理它的图书馆。

另请注意，我的节点本身不可靠；它们失去连接，并定期重新启动。这种情况很少发生，但它会发生。如果图书馆因为同伴死亡而挂断，那么我将无法使用它。

感谢你目前的帮助！

# javascript - JavaScript 正则表达式匹配问题

> ID：11885339
> 
> 赞同：1
> 
> 时间：2012-08-09T14:10:30.607
> 
> 标签：javascript, regex

```
var regExp=new RegExp('\[:bg\]([A-Za-z\-\s]+)', 'g');
var text='something [:bg]text1[:en]text2 % something';
console.log(text.match(regExp)); 
```

我希望这个片段返回字符串“text1”，但它返回以下数组：[“：bg”，“：en”]

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:12:21.030

使用正则表达式语法创建正则表达式：

```
var regExp = /\[:bg\]([A-Za-z\-\s]+)/g; 
```

否则，您必须将反斜杠加倍。当您从字符串开始时，您必须考虑到字符串本身将由 JavaScript 根据字符串常量语法中嵌入元字符的规则来解释这一事实。只有这样，它才会被构造函数重新解释为正则表达式`RegExp()`。因此，字符串解析将“吃掉”您的反斜杠，并且正则表达式将与您的预期不同。

*编辑*——正如@Rocket 在评论中指出的那样，“g”修饰符可能是必要的，也可能不是必要的。

# html - CSS - 为什么字体样式：斜体不适用于字体系列：Helvetica、Arial、sans-serif？

> ID：11885349
> 
> 赞同：2
> 
> 时间：2012-08-09T14:10:39.430
> 
> 标签：html, css, webkit

出于某种原因，此规则适用于 Mac 上的 Chrome，但不适用于 Windows。页面底部的箭头应为斜体，但仅适用于 Mac。

您可以在此处查看示例：http: [//jansensan.net/clients/float4/allianz-global-assistance/true-stories.html](http://jansensan.net/clients/float4/allianz-global-assistance/true-stories.html)

您可以在此处查看 CSS：http: [//jansensan.net/clients/float4/allianz-global-assistance/assets/css/main.css](http://jansensan.net/clients/float4/allianz-global-assistance/assets/css/main.css)

寻找 .buttonLabel 类。

就在您提到它可能在 IE 或 Firefox 中运行之前，这些浏览器与该项目无关。HTML 输出到与 Chrome 行为相同的自定义 Webkit 集成中。

有什么明显的我忽略了吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:19:31.030

原因似乎是您试图将没有斜体版本的字符变为斜体，即斜体字体与普通（直立）字体看起来相同。这对于特殊字符是正常的；*使用斜体基本上意味着对字母*使用专门设计的字形，也许*还有*其他一些字符。

这里的相关标记似乎是

```
<div class="buttonLabel label">&lt;</div> 
```

以及相关的 CSS 代码

```
.buttonLabel
{
font-family: Verdana, sans-serif;
font-style: italic;
} 
```

（与问题标题相反，我在 CSS 代码中找不到任何对 Helvetica 或 Arial 的引用。而且我找不到任何箭头，只有 LESS THAN 和 GREATER THAN 字符。）

在 Verdana 中，“<”的斜体字形 与普通字形相同。Arial 中的同上。在其他一些字体中，它可能看起来不同，尽管这应该被视为印刷缺陷。某些字体，例如 Arial Unicode MS，根本没有斜体版本。一些浏览器和其他程序可能（错误地）通过算法倾斜正常字形将人工“斜体”应用于此类字体。

解决方案取决于您所追求的。我找不到尝试将“<”斜体化的理由 或“>”，但如果您希望获得此类字符的一些扭曲的倾斜版本，则使用图像是实用的解决方案。

# android - 为什么我会丢失有关屏幕方向更改的信息，而不是退出和重新进入应用程序的信息

> ID：11885351
> 
> 赞同：0
> 
> 时间：2012-08-09T14:10:56.853
> 
> 标签：android

我发现了几个关于此的问题，看来我必须正确使用 onSavedInstanceState 和 onRestoreInstanceState 方法。

我的应用程序创建了一组卡片并将它们显示在一个网格视图中，每个网格都包含一个文本视图。

在应用程序中，添加卡片后；如果我使用菜单按钮退出应用程序，返回后一切都会恢复正常。然而，在方向改变时，所有的“桌子”都会被重置；所有的卡片都必须重新添加。

那么，为什么我会丢失有关屏幕方向更改的信息，而不是退出和重新进入应用程序的信息。我该如何解决？

提到的方法只有这个：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);  
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);

} 
```

我的 onCreate 方法以：

```
super.onCreate(savedInstanceState); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:21:39.750

设备方向的变化会重新创建整个活动 - 再次调用 onCreate()。而当您使用主页按钮时，活动会暂停（onPause()），然后当它再次可见时，它会通过 onResume() 方法进入。因此，在 onCreate() 中所做的任何事情都会被保留。

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

我想这可能是你正在寻找的

[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:14:49.903

下面我放了一个多分辨率示例应用程序的代码

```
public final class MultiRes extends Activity {

private int mCurrentPhotoIndex = 0;
private int[] mPhotoIds = new int[] { R.drawable.sample_0,
        R.drawable.sample_1, R.drawable.sample_2, R.drawable.sample_3,
        R.drawable.sample_4, R.drawable.sample_5, R.drawable.sample_6,
        R.drawable.sample_7 };

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    showPhoto(mCurrentPhotoIndex);

    // Handle clicks on the 'Next' button.
    Button nextButton = (Button) findViewById(R.id.next_button);
    nextButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            mCurrentPhotoIndex = (mCurrentPhotoIndex + 1)
                    % mPhotoIds.length;
            showPhoto(mCurrentPhotoIndex);
        }
    });
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    outState.putInt("photo_index", mCurrentPhotoIndex);
    super.onSaveInstanceState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    mCurrentPhotoIndex = savedInstanceState.getInt("photo_index");
    showPhoto(mCurrentPhotoIndex);
    super.onRestoreInstanceState(savedInstanceState);
}

private void showPhoto(int photoIndex) {
    ImageView imageView = (ImageView) findViewById(R.id.image_view);
    imageView.setImageResource(mPhotoIds[photoIndex]);

    TextView statusText = (TextView) findViewById(R.id.status_text);
    statusText.setText(String.format("%d/%d", photoIndex + 1,
            mPhotoIds.length));
} 
```

}

# asp.net - 在 ASP.NET 中的 Response.Redirect 中传递 cookie

> ID：11885352
> 
> 赞同：12
> 
> 时间：2012-08-09T14:10:58.487
> 
> 标签：asp.net, cookies, response.redirect

我在将 ASP.NET 中的 cookie 传递到新 URL 时遇到问题。我将cookie添加到响应中，如下所示：

```
Response.Cookies.Add(new HttpCookie("Username", Username.Text)); 
```

然后我发出重定向：

`Response.Redirect(returnURL);`

在我被重定向到的新页面上，cookie 集合是空的。我尝试像这样检索cookie：

`Request.Cookies["Username"].Value;`

谁能想到为什么没有通过cookies？

**编辑：**

我忘记添加的更多信息 - 在同一浏览器会话中的第二次尝试中，cookie 正确地通过重定向传递。

编辑#2：我发现如果我在重定向 URL 中使用“localhost”而不是实际域名，那么 cookie 会在第一次登录时正确传递。因此，只有当重定向 URL 是实际域名时，它才不起作用。奇怪的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-15T01:29:35.450

根据[HTTP状态管理机制](http://www.ietf.org/rfc/rfc6265.txt "HTTP状态管理机制")

> 源服务器可以发送带有任何
> 响应的 Set-Cookie 响应标头。用户代理可以忽略包含在
> 具有 100 级状态代码的响应中的 Set-Cookie
> 头，但必须处理包含在其他响应中的 Set-Cookie 头（包括具有 400
> 和 500 级状态代码的响应）。源服务器可以
> 在单个响应中包含多个 Set-Cookie 标头字段。Cookie 或 Set-Cookie 标头字段的存在
> 并不妨碍 HTTP 缓存
> 存储和重用响应。

因此 REDIRECTs (3xx) 在“其他”响应中，因此它们应该由浏览器处理，然后浏览器可能会出于各种原因丢弃它们。浏览器拒绝 cookie 的原因之一是指定了 cookie 的域属性并且没有足够的点（如“localhost”），或者当 cookie 的路径属性与 URL 中的实际路径大小写不匹配时（cookie 的路径区分大小写）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T14:08:50.300

浏览器仅将 cookie 发送回与设置 cookie 的页面位于同一域中的页面。

因此，如果您转到页面`http://localhost/login.aspx`，然后服务器继续设置 cookie 并重定向到（例如）`http://mymachinename/default.aspx`，则在请求第二个 url 时，cookie 不会从浏览器发送到服务器，因为它不在同一个域中。

要取回 cookie，您要么必须重定向到，要么必须`http://localhost/default.aspx`从最初转到`http://mymachinename/login.aspx`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-11T15:55:47.900

我在 .NET Core 2.1 WebApp 中遇到了同样的问题。搜索了一段时间后，我发现我可以使用以下命令来强制 cookie 在重定向响应时不丢失。

```
HttpContext.Response.Cookies.Append("cookie-name", "cookie-value", new CookieOptions { IsEssential = true }); 
```

[文档](https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.cookieoptions.isessential?view=aspnetcore-2.2#Microsoft_AspNetCore_Http_CookieOptions_IsEssential)提到此属性“指示此 cookie 是否对于应用程序正常运行至关重要。如果为 true，则可能会绕过同意策略检查。默认值为 false。”

这可能是您的选择！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T14:21:12.170

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        if (Request.QueryString["AcceptsCookies"] == null)
        {
            Response.Cookies["TestCookie"].Value = "ok";
            Response.Cookies["TestCookie"].Expires =
                DateTime.Now.AddMinutes(1);
            Response.Redirect("TestForCookies.aspx?redirect=" +
                Server.UrlEncode(Request.Url.ToString()));
        }
        else
        {
            Label1.Text = "Accept cookies = " +
                Server.UrlEncode(
                Request.QueryString["AcceptsCookies"]);
        }
    }
} 
```

[此链接](http://www.aspnettutorials.com/tutorials/network/cookies-csharp.aspx)将帮助您了解在 C# 中读取和编写 cookie。

此外，如果您更熟悉 VB 而不是 C# ，[此页面将很有用。](http://msdn.microsoft.com/en-us/library/ms178194.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-31T07:50:47.320

与我合作的解决方案是使用相对 url 而不是绝对 url 进行重定向：

像下面这样：

```
Response.redirect("~/yourRedirectPage.aspx"); 
```

代替

```
responce.redirect("www.yoursite.com/yourRedirectPage.aspx"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-07T17:16:36.777

通常我让我的服务器生成一个我通过 ajax 检索的 Base64 字符串。当准备好的对象可用时，然后我从客户端上的 base 64 字符串制作“附件”。这样，我可以跨浏览器一致地响应下载完成。

# opencv - opencv中的HoughCircles函数可以检测圆圈内的圆圈吗？

> ID：11885354
> 
> 赞同：3
> 
> 时间：2012-08-09T14:11:01.950
> 
> 标签：opencv

我在 OpenCV 中遇到了用于圆形检测的 HoughCircles。但它有一个参数指定检测到的圆圈之间的最小距离。我担心的是，如果两个圆圈是同心的，即一个圆圈在另一个圆圈中，这会起作用吗？

谢谢沙尚克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-03-22T12:16:02.990

如果它们的中心相距足够远（ 的第五个参数），霍夫变换只会将 2 个圆作为两个不同的对象返回`Hough`。
所以我认为不可能以这种方式检测同心圆（因为它们的中心是相同的，或者非常接近）。

我看到如何使用霍夫变换的唯一方法是了解您正在寻找的圆的半径，并`Hough`在具有不同最小和最大半径的循环中调用（最后一个和最后一个参数`Hough`），每个半径迭代对应于您的同心圆之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:40:53.467

我尝试使用显示的图像![同心圆](../Images/ad7d6d25512374a82f5e505aee3ad30c.png)

但它只检测到一个圆圈......这是代码

```
Mat image_ = imread("E:/Work_DataBase/circle.jpg",3);
Mat image_temp;
cvtColor( image_, image_temp, CV_BGR2GRAY );
vector<Vec3f> circles;
HoughCircles( image_temp, circles, CV_HOUGH_GRADIENT, 1, image_temp.rows/8,100, 100, 10, 200 );
for( size_t i = 0; i < circles.size(); i++ )
{
    Point center(cvRound(circles[i][0]), cvRound(circles[i][1]));
    int radius = cvRound(circles[i][2]);
    // circle center
    circle( image_, center, 3, Scalar(0,255,0), -1, 8, 0 );
   // circle outline
    circle( image_, center, radius, Scalar(0,0,255), 3, 8, 0 );
}
imshow("circles",image_);
waitKey(0); 
```

如果我找到任何替代方案，我会尝试其他选择，我会更新你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-22T10:54:36.713

我还认为 OpenCv HougCircles 每个中心只检测一个半径。如果要检测更多半径，则必须指定更小的中心之间的最小距离。但是那些不是同心圆。简而言之，我认为 openCv HoughCircle 模块并不是为了迎合同心圆而设计的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-11T11:32:41.057

我过去使用的另一个解决方案是`cv2.HoughCircles`在循环中调用该函数，但将找到的圆圈区域替换为附近像素的颜色。

我知道这并不总是可能的，但这取决于应用程序。

# javascript - 通过javascript拦截文档中的每次点击

> ID：11885357
> 
> 赞同：0
> 
> 时间：2012-08-09T14:11:11.693
> 
> 标签：javascript, jquery, html

我想将代码注入到几个页面中，这些页面将处理对文档中特定元素的点击。我通过 jQuery 成功地做到了这一点。

问题是 jQuery 并非在所有页面上都可用。所以它只工作了一半。我想检查我单击`href`的每个属性。`<a>`任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:21:52.520

您想向文档添加一个事件侦听器，这实际上是 jQuery 为您所做的。

查看有关添加事件侦听器的 MDN 文档：

[https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

你的结果应该是这样的：

```
document.addEventListener('click', yourFunction, false); 
```

这适用于 IE9+ 和所有其他浏览器。要支持 IE8 及以下版本，请改用 attachEvent：

```
if (document.addEventListener) {
    document.addEventListener('click', yourFunction, false);
}
else if (document.attachEvent) {
    document.attachEvent('click', yourFunction, false);
} 
```

现在将向您的函数传递一个事件对象，该对象将具有一个名为“目标”的属性，即被单击的节点。您也可以在 MDN 上阅读更多相关信息：

[https://developer.mozilla.org/en-US/docs/DOM/event](https://developer.mozilla.org/en-US/docs/DOM/event)

同样，这仅适用于 IE9+ 和标准浏览器。在 IE7 和 IE8 中，事件对象是窗口对象的属性……但如果您在 google 上的侦查没有发现一些结果，那就是另一个问题的主题。

这基本上是 jQuery 在幕后所做的。我建议阅读 jQuery 的源代码可以教给你很多这样的技巧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:16:05.893

您可以将 jQuery 注入页面，然后照常进行。

您可以通过浏览器的 JS 控制台执行此操作。

```
var script = document.createElement('script');
script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js';
document.head.appendChild(script); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:14:21.637

jquery 不会做任何你自己用“普通”javascript 做不到的事情。您可以轻松地执行`document.getElementsByName('a')`, 并遍历结果以附加您的点击处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:22:47.267

为了在每个链接上附加一个 EventListener，并在没有 jQuery 的情况下在点击时检索 href，我可能会这样做：

```
function trackClick(event) {
    alert(this.href);
}

window.onload = function() {

    var links = document.getElementsByTagName('a');

    for (var i = 0; i < links.length; i++) {
        links[i].addEventListener('click', trackClick, false);
    };

} 
```

# c# - ScatterView，触摸运动，标签运动 win8

> ID：11885359
> 
> 赞同：0
> 
> 时间：2012-08-09T14:11:14.987
> 
> 标签：c#, touch, windows-8, scatterview

我在 Win8 上，我想用手指移动标签（旋转、缩放、移动）

我看到我可以用 scatterview 来做到这一点，但是，这个控件似乎很难使用......我想知道你是否知道其他可以帮助我做到这一点的控件？

ScatterView 的示例？

win8没有那种控制？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:40:11.563

您应该能够在 Canvas 中执行此操作，并在每个控件上使用[OnManipulationDelta](http://msdn.microsoft.com/en-us/library/system.windows.uielement.onmanipulationdelta.aspx)事件。

我在 CP 中做过这个，但我还没有在发布预览中尝试过。

# javascript - 在 jquery 中添加淡出标签列表

> ID：11885364
> 
> 赞同：0
> 
> 时间：2012-08-09T14:11:39.407
> 
> 标签：javascript, jquery, jquery-plugins

[我们的广告页面](http://www.inside-guides.co.uk/brentwood/health-and-beauty/beauty-salons-and-spas/the-beauty-studio-brentwood-481.html)使用以下 jscript 作为标签：

```
$(window).load(function(){

    $('.tab:not(.aboutus)').hide();

    $('.tabs li').click(function(){
        var thisAd = $(this).parent().parent();
        $(thisAd).children('.tab').hide();
        $(thisAd).children('.'+$(this).attr('class').replace('tab','')).show();
        $('.tabs li').removeClass('active');                                                    
        $(this).addClass('active');
    });

    if(window.location.hash) {
        if (window.location.hash == "#map") {
            $(".Advert").children('.tab').hide();
            $(".Advert").children('.map').show();
            $('.tabs li').removeClass('active');                                                    
            $('.maptab').addClass('active');
        }
        if (window.location.hash == "#voucher") {
            $(".Advert").children('.tab').hide();
            $(".Advert").children('.vouchers').show();
        }
    }   

}); 
```

我想加入一个淡入淡出效果[，就像这里](http://www.inside-guides.co.uk/brentwood/pages/community.html)使用这个js的例子：

```
(function($) {

    $.organicTabs = function(el, options) {

        var base = this;
        base.$el = $(el);
        base.$nav = base.$el.find(".nav");

        base.init = function() {

            base.options = $.extend({},$.organicTabs.defaultOptions, options);

            // Accessible hiding fix
            $(".hide").css({
                "position": "relative",
                "top": 0,
                "left": 0,
                "display": "none"
            }); 

            base.$nav.delegate("li > a", "click", function() {

                // Figure out current list via CSS class
                var curList = base.$el.find("a.current").attr("href").substring(1),

                // List moving to
                    $newList = $(this),

                // Figure out ID of new list
                    listID = $newList.attr("href").substring(1),

                // Set outer wrapper height to (static) height of current inner list
                    $allListWrap = base.$el.find(".list-wrap"),
                    curListHeight = $allListWrap.height();
                $allListWrap.height(curListHeight);

                if ((listID != curList) && ( base.$el.find(":animated").length == 0)) {

                    // Fade out current list
                    base.$el.find("#"+curList).fadeOut(base.options.speed, function() {

                        // Fade in new list on callback
                        base.$el.find("#"+listID).fadeIn(base.options.speed);

                        // Adjust outer wrapper to fit new list snuggly
                        var newHeight = base.$el.find("#"+listID).height();
                        $allListWrap.animate({
                            height: newHeight
                        });

                        // Remove highlighting - Add to just-clicked tab
                        base.$el.find(".nav li a").removeClass("current");
                        $newList.addClass("current");

                    });

                }   

                // Don't behave like a regular link
                // Stop propegation and bubbling
                return false;
            });

        };
        base.init();
    };

    $.organicTabs.defaultOptions = {
        "speed": 300
    };

    $.fn.organicTabs = function(options) {
        return this.each(function() {
            (new $.organicTabs(this, options));
        });
    };

})(jQuery); 
```

更新：这些是我需要修改我的代码才能使用的代码位，但可以通过一些帮助来集成它：

```
 // Fade out current list
            base.$el.find("#"+curList).fadeOut(base.options.speed, function() {

                // Fade in new list on callback
                base.$el.find("#"+listID).fadeIn(base.options.speed); 
```

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:23:21.870

试试show() 和 hide()的默认[持续时间参数：](http://api.jquery.com/show/)

```
.show('fast/normal/slow/[duration in ms]')
.hide('fast/normal/slow/[duration in ms]') 
```

来自评论：

你会得到一个奇怪的淡入淡出效果，因为你有多个容器 div（带有灰色边框和所有）会淡出，而在[此处](http://www.inside-guides.co.uk/brentwood/pages/community.html)的示例中，你有一个带有灰色背景的容器和其中的所有内容，然后你只淡化内容.

# java - 将 EditText 输入从布局传递到 Activity 以在 android 中进行数据库输入 onClick

> ID：11885368
> 
> 赞同：0
> 
> 时间：2012-08-09T14:11:53.960
> 
> 标签：java, android, parse-platform

我的布局中有几个 EditText 输入，

```
<EditText
        android:id="@+id/sign_up_user_name"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="@string/user_name"
        android:inputType="textPersonName"
        android:singleLine="true" >

        <requestFocus />
    </EditText>

    <EditText... 
```

我想将用户输入传递到活动中，并在 onClick 时将用户输入传递到数据库（我正在使用 parse.com）。

```
public class SignUp extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            setContentView(R.layout.sign_up);
    }
    public void onClickSignUp(View view) {

        ParseUser user = new ParseUser();
        user.setUsername("document.getElementById('sign_up_user_name').value");
        user.setPassword("document.getElementById('sign_up_password').value");
        user.setEmail("document.getElementById('sign_up_email_address').value");
        user.put("gender", "document.getElementById('sign_up_select_gender').checked");
        ParseACL defaultACL = new ParseACL();
        defaultACL.setPublicReadAccess(true);
        ParseACL.setDefaultACL(defaultACL, true);

        user.signUpInBackground(new SignUpCallback() {
              public void done(ParseException e) {
                if (e == null) {... 
```

我已经学习了一些教程（包括 parse.com 上用于用户注册的教程，他们只使用静态字符串获取用户信息）。我知道我错过了将 EditText 输入传递到我的活动的一些元素，甚至可能是语法错误

```
user.setUsername("document.getElementById('sign_up_user_name').value"); 
```

任何帮助都会很热。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:40:51.027

您提供的信息并不多。如果我正确阅读了上述内容，则您有一个用户输入信息的 WebView。当输入该信息时，您希望在 Android 的本机端捕获该信息。

如果是上述情况，则需要使用 Java/Javascript 桥接器。在您将实现的桥接类上，您将在其中执行 ParseUser 添加和放置以及其他相关操作。

[请参阅http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)处的**addJavascriptInterface**方法。也可以在 Stackoverflow 或 Google 上搜索它；有很多例子。

首席执行官

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T02:48:13.817

要从 EditText 中获取文本，请尝试以下操作：

```
EditText et = (EditText) findViewById(R.id.sign_up_user_name);
String s = et.getText(); 
```

# gtk - 固定 GTK 小部件布局

> ID：11885370
> 
> 赞同：2
> 
> 时间：2012-08-09T14:11:56.703
> 
> 标签：gtk

我有一个从 GtkVBox 派生的自定义小部件，它根据状态包含一系列子小部件。我希望此自定义小部件的所有实例具有相同的高度，并且即使某些子小部件不可见，子小部件也始终放置在此自定义小部件内的相同位置，即如果未显示所有子小部件，我想要子小部件所在的空间显示为已被占用且为空。

例如，考虑一个 GtkVBox，它可能包含最多四个按钮，但有时只显示第一个和最后一个按钮。第一个和最后一个按钮之间应该有一个空白的垂直空间，这对应于第二个和第三个按钮如果显示它们所占用的空间，即在它们之间有相同大小的占位符。

据我了解，我有两种选择：

1.  或者我可以使用 GtkFixed 作为容器并自己完成所有定位和调整代码
2.  或者我可以创建假按钮，从中获取大小申请，然后添加一个虚拟小部件，例如一个与 VBox 的占位符大小相等的空 GtkLayout

第二个选项相当hackish，但让我免于编写大量代码，它有什么缺点吗？你会怎么做，为什么，有更好的主意吗？

# javascript - javascript中instanceof运算符的令人困惑的行为

> ID：11885371
> 
> 赞同：1
> 
> 时间：2012-08-09T14:11:59.253
> 
> 标签：javascript

看看这段代码：

```
function Foo () {
    console.log(this instanceof Foo);
    return { name: "nitesh" }; 
}

foo = new Foo(); //true 
console.log(foo instanceof Foo) //false 
```

1.  为什么`foo`不是一个实例`Foo`？
2.  为什么是`this`一个实例`Foo`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T14:16:54.940

在您的`Foo`函数中，您正在返回一个对象。这就是`foo`设置。那不是一个`Foo`物体，它只是一个“正常”的物体。

试试这种方式：

```
function Foo(){
    console.log(this instanceof Foo);
    this.name = "nitesh";
}

var foo = new Foo(); //true 
console.log(foo instanceof Foo) //true 
```

# maven - 是否可以在运行时在属性中获取 Maven 依赖项？

> ID：11885372
> 
> 赞同：2
> 
> 时间：2012-08-09T14:12:01.963
> 
> 标签：maven, maven-2

我正在处理一种情况，我们在 POM 中使用 LATEST 和 RELEASE 关键字来处理某个依赖项（依赖项和项目都归我们所有，所以我们控制什么是 LATEST 和 RELEASE ......我们只支持一次一个版本）。使用这些关键字使我们能够最大限度地减少发布后所需的维护。

在构建过程中有一个步骤必须从解压缩的依赖项中复制 DLL，但由于我们没有指定特定版本，因此我们将解压缩依赖项的版本号硬编码，并且必须在每次发布后对其进行更新。有没有办法在运行时从 Maven 属性获取此依赖项的版本？

maven-dependency-plugin（http://maven.apache.org/plugins/maven-dependency-plugin/index.html）的属性目标获取工件在本地存储库中的位置（这不是我的）米找）。depends-maven-plugin（显示在这里：[http](http://team.ops4j.org/wiki/display/paxexam/Pax+Exam+-+Tutorial+1) ://team.ops4j.org/wiki/display/paxexam/Pax+Exam+-+Tutorial+1 ）可以生成一个包含各种依赖项及其版本的文件，但使用这将需要一个进程读取文件并利用该信息。我想知道是否有更多“Maven 方式”，例如访问依赖版本的属性。

**编辑：**为澄清起见，我们需要版本号，以便我们可以进入解压缩依赖项的目录以复制文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-29T13:17:41.327

我不确定你对'maven way'的意思，但在查看了你已经提到的相同插件后，我做了这样的事情：

```
 <build>
<plugins>
  <plugin>
    <groupId>org.codehaus.gmaven</groupId>
    <artifactId>gmaven-plugin</artifactId>
    <version>1.5</version>
    <executions>
      <execution>
        <phase>initialize</phase>
        <goals>
          <goal>execute</goal>
        </goals>
        <configuration>
          <source>                                                                                                                                                                                                                                                   
            project.properties.put('firstdependencyinthepom', project.dependencies[0]['version'])                                                                                                                                                                              
            project.properties.put('seconddependencyinthepom', project.dependencies[1]['version'])                                                                                                                                                                            
          </source>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

然后我可以分别用 ${firstdependencyinthepom} 和 ${seconddependencyinthepom} 引用这些依赖项的版本。

# haskell - 如何将图表库与 GTK 可绘制对象一起使用？

> ID：11885373
> 
> 赞同：8
> 
> 时间：2012-08-09T14:12:11.003
> 
> 标签：haskell, gtk, haskell-diagrams

我正在尝试学习如何使用[图表库](http://projects.haskell.org/diagrams/)和 Cairo / GTK 后端绘制图表。我有一个空白窗口要出现，但我的绘图不会渲染。我究竟做错了什么？

```
module Main where

import Control.Monad.Trans (liftIO)
import Graphics.UI.Gtk
import Diagrams.Backend.Cairo
import Diagrams.Backend.Cairo.Gtk
import Diagrams.Prelude

main :: IO ()
main = do
  initGUI
  window <- windowNew
  canvas <- drawingAreaNew
  canvas `on` sizeRequest $ return (Requisition 1000 1000)
  set window [ containerBorderWidth := 10,
               containerChild := canvas ]
  canvas `on` exposeEvent $ renderFigure
  onDestroy window mainQuit
  widgetShowAll window
  mainGUI

renderFigure :: EventM EExpose Bool
renderFigure = do
   win <- eventWindow
   liftIO $ renderToGtk win $ toGtkCoords figure
   -- liftIO $ defaultRender win figure
   return True

figure :: Diagram Cairo R2
figure =  unitCircle # scaleX 0.5 # rotateBy (1/6) # scale 50 
```

我试过使用“defaultRender”（如上所述），但这会产生类型错误：显然“win”不是正确的类型。

我已经阅读了图表的教程和用户手册，但它实际上并没有告诉你如何使用 Cairo 后端。

**更新：**我有要渲染的椭圆。“renderFigure”函数现在说：

```
renderFigure :: DrawingArea -> EventM EExpose Bool
renderFigure canvas = do
   -- win <- eventWindow
   liftIO $ do
      -- diagramArea <- widgetGetDrawWindow canvas 
      -- renderToGtk diagramArea $ toGtkCoords figure
      defaultRender canvas figure
   return True 
```

而传入的DrawingArea是“画布`on`exposeEvent...”设置中引用的“画布”。

但我仍然无法使用“renderToGtk”渲染固定大小的图表。

**更新 2：**感谢 Joachim Breitner 的回答，我现在得到了一个看起来像这样的最小的 GTK 图表程序，为您的剪切和粘贴乐趣做好了准备。

```
module Main where

import Control.Monad.Trans (liftIO)
import Graphics.UI.Gtk
import Diagrams.Backend.Cairo
import Diagrams.Backend.Cairo.Gtk
import Diagrams.Prelude

main :: IO ()
main = do
  initGUI
  window <- windowNew
  canvas <- drawingAreaNew
  canvas `on` sizeRequest $ return (Requisition 256 256)
  set window [ containerBorderWidth := 10,
               containerChild := canvas ]
  canvas `on` exposeEvent $ renderFigure
  onDestroy window mainQuit
  widgetShowAll window
  mainGUI

renderFigure :: EventM EExpose Bool
renderFigure = do
   win <- eventWindow
   liftIO $ renderToGtk win $ toGtkCoords figure
   return True

figure :: Diagram Cairo R2
figure =  unitCircle # scaleX 0.5 # rotateBy (1/6) # scale 50 # fc red 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T18:04:42.197

您的初始代码实际上有效。但是 renderToGtk 不缩放图像，所以它看起来相当小，太小以至于在那个线宽处不可见。但是试试

```
figure :: Diagram Cairo R2
figure =  unitCircle # scaleX 0.5 # rotateBy (1/6) # scale 50 # fc red 
```

它会像魅力一样发挥作用！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-31T00:21:52.547

您可以注意到，在最近版本的图表中，您应该使用

```
import Diagrams.Backend.Gtk 
```

代替

```
import Diagrams.Backend.Cairo.Gtk 
```

和

```
figure :: Diagram Cairo 
```

代替

```
figure :: Diagram Cairo R2 
```

结果现在看起来像：

```
module Main where

import Control.Monad.Trans (liftIO)
import Graphics.UI.Gtk
import Diagrams.Backend.Cairo
import Diagrams.Backend.Gtk
import Diagrams.Prelude

main :: IO ()
main = do
  initGUI
  window <- windowNew
  canvas <- drawingAreaNew
  canvas `on` sizeRequest $ return (Requisition 256 256)
  Graphics.UI.Gtk.set window [ containerBorderWidth := 10,
               containerChild := canvas ]
  canvas `on` exposeEvent $ renderFigure
  onDestroy window mainQuit
  widgetShowAll window
  mainGUI

renderFigure :: EventM EExpose Bool
renderFigure = do
   win <- eventWindow
   liftIO $ renderToGtk win $ toGtkCoords figure
   return True

figure :: Diagram Cairo
figure =  unitCircle # scaleX 0.5 # rotateBy (1/6) # scale 50 # fc red 
```

# java - win 2008服务器上的JAVA_HOME从不同的调用指向不同的地方

> ID：11885374
> 
> 赞同：2
> 
> 时间：2012-08-09T14:12:11.607
> 
> 标签：java, php, windows-server-2008, environment-variables, java-home

我的问题是 JAVA_HOME 变量。当我在cmd中回显它时，它应该指向jdk，当我从powershell回显它时，它指向jre7，当我从web使用php脚本回显它时，它指向jre6。我试图从我从 web 调用的 powershell 和 php 脚本中使用 set JAVA_HOME 和 set-variable JAVA_HOME 来设置它，但都没有工作。有人知道我该如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:16:17.670

是否有可能将 JAVA_HOME 定义为用户变量而不是系统变量，并且这些进程作为不同的用户运行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:15:07.950

我实际上并没有解决问题，我只是治愈了症状。我已经编辑了 ant.bat。刚加了一行：set JAVA_HOME=path\to\jdk at the start of the file

# sql-server-2008-r2 - 如何使用 BCP 将查询（cdc 函数）检索到的数据转储到文本文件

> ID：11885377
> 
> 赞同：1
> 
> 时间：2012-08-09T14:12:19.420
> 
> 标签：sql-server-2008-r2, bcp, cdc

我试图使用 BCP 将数据从 CDC 函数转储到 .dat 文件中。我使用以下查询（适用于 Server 2008 R2）：

```
USE LEESWIJZER

DECLARE @begin_time datetime
, @end_time datetime
, @from_lsn binary(10)
, @to_lsn binary(10)

SET @end_time = '2013-07-05 12:00:00.000';    

SELECT @to_lsn = sys.fn_cdc_map_time_to_lsn('largest less than or equal',  @end_time);
SELECT @from_lsn = sys.fn_cdc_get_min_lsn('dbo_LWR_CONTRIBUTIES')

SELECT sys.fn_cdc_map_lsn_to_time(__$start_lsn) AS ChangeDTS
, *
FROM cdc.fn_cdc_get_net_changes_dbo_LWR_CONTRIBUTIES (@from_lsn, @to_LSN, 'all') 
```

（为便于阅读而编辑，在 BCP 中用作单个字符串）

我的 BCP 字符串是：

```
BCP "Query above" queryout "C:\temp\LWRCONTRIBUTIES.dat" -w -t ";|" -r \n -T -S {server\\instance} -o "C:\temp\LWRCONTRIBUTIES.log" 
```

如您所见，我想要一个生成的 .dat unicode 文件和一个日志文件。我猜添加到函数结果中的“ChangeDTS”列导致了我的问题。错误消息显示：“[Microsoft][SQL Native Client]Host-file 列可能仅在复制到服务器时被跳过”。

它可以使用格式文件解决，但由于此代码需要每天运行，可能一天不止一次，并且表格可能会发生变化，我不愿意不断调整我的格式文件（有 100 个表格需要相同的程序）。

此外，这是在客户数据库上运行的，他们不会喜欢我在他们的数据库中创建视图。

有人知道如何从 cdc 函数中创建一个包含选定列数的文本文件 (.dat) 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:56:22.340

找到了答案，无论使用哪个版本的 bcp，bcp 似乎都无法处理声明。如果我把它们编辑掉，就像一个魅力。但是，根据另一个[论坛](https://ask.sqlservercentral.com/questions/92359/how-to-use-bcp-to-dump-query-cdc-function-retrieve.html#answer-92378)上的某人的说法，BCP 应该是处理变量的声明。很高兴它现在对我有用，但仍然困惑为什么它现在和以前没有。

# python - Python中的`if bool(x)`和`if x`有什么区别吗？

> ID：11885382
> 
> 赞同：10
> 
> 时间：2012-08-09T14:12:27.623
> 
> 标签：python

我遇到了一些代码，内容如下：

```
if bool(x):
    doSomething 
```

我认为以下内容会做同样的工作：

```
if x:
    doSomething 
```

[参考资料](http://docs.python.org/reference/compound_stmts.html#the-if-statement)说，如果测试表达式，它会评估套件

> 被发现是真的

参考文献中提到了布尔表达式：

> 在布尔运算的上下文中，以及当控制流语句使用表达式被控制流语句使用时，以下值被解释为假：假，无，所有类型的数字零，以及空字符串和容器......所有其他值都被解释为 true。

[参考资料](http://docs.python.org/library/functions.html#bool)中提到了该功能`bool()`：

> 使用标准真值测试程序将值转换为布尔值

那么以上两者是相同的还是有一些额外的微妙之处？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T14:14:16.817

将对象放在 if 语句中时，它们会隐式转换为 bool 类型。因此，在大多数情况下，声明中的`x`和之间没有区别。但是，如果您因为正在进行函数调用而调用，则会产生额外的开销。这是一个快速测试来证明这一点：`bool(x)``if``bool()`

```
In [7]: %timeit if(''): pass
10000000 loops, best of 3: 21.5 ns per loop

In [8]: %timeit if(bool('')): pass
1000000 loops, best of 3: 235 ns per loop 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-09T14:22:55.053

`if`将`__nonzero__()`在可用时使用，就像`bool()`在测试真值时一样。所以**是**的，行为是等价的。

从文档中：

> 在布尔运算的上下文中，以及当控制流语句使用表达式时，以下值被解释为假：假、无、所有类型的数字零以及空字符串和容器（包括字符串、元组、列表、字典，集和冻结集）。所有其他值都被解释为 true。（有关 **`__nonzero__()`**更改此设置的方法，请参见特殊方法。）

[`object.__nonzero__(self)`](http://docs.python.org/reference/datamodel.html#object.__nonzero__)

> 调用实现真值测试，内置操作`bool();`应该返回False或True，或者它们的整数等价物0或1。当没有定义这个方法时`__len__()`，如果它被定义，则被调用，如果它的结果​​则认为对象为真是非零的。如果一个类既不定义 `__len__()`也不定义`__nonzero__()`，它的所有实例都被认为是真的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T14:15:50.247

您放入语句中的任何对象都将基于某些内部 python 检查器转换为布尔值，通常不是问题，在语句中和在语句中时`if`没有区别。`bool(x)``(x)``if`

但是，`bool(x)`存在的原因是针对以下情况：

`return bool(x)`

这将根据对象返回“`true`或”。`false`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:17:30.200

Afaik 没有区别，如果 x 是 ''、None、0 或 False，它将被转换为 False。

# javascript - 仅在必要时分词

> ID：11885384
> 
> 赞同：5
> 
> 时间：2012-08-09T14:12:32.347
> 
> 标签：javascript, css

我需要通过 CSS 完成以下任务：
我有一个固定宽度的 div。
在这个 div 中，我需要按以下方式显示名字、第二个名字以及最终的其他名字。

* * *

示例 1

```
---------------
First-Name 
Secondo-Name
--------------- 
```

示例 2

```
---------------
Very-Long-First
-Name 
Second-Name
--------------- 
```

* * *

如果我尝试使用`word-break: break-all;` 它，它将适用于`example 2`但不适用于`example 1`which 将是：

示例 1

```
---------------
First-Name Seco
nd-Name
--------------- 
```

仅使用 CSS 解决此问题的最佳方法是什么？
如果不可能，使用javascript修复它的最佳方法是什么？

这是[jsfiddle.net 链接](http://jsfiddle.net/uNcCR/1/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T14:30:30.673

[http://jsfiddle.net/uNcCR/2/](http://jsfiddle.net/uNcCR/2/)

如果单词的宽度超过 的宽度，我使用`word-wrap: break-word`它来允许名称被中断`div`，否则它将在名称之间中断。我想这就是你正在寻找的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:21:14.243

对于很长的名字，我认为在下面的行中打断显示它的单词不是一个好主意。
我建议你使用 css 属性`-moz-hyphens: auto`。
这是参考[css-hyphenation](https://www.w3schools.com/cssref/css3_pr_hyphens.asp)。

# facebook - Forge (Trigger.io) facebook 模块 getLoginStatus

> ID：11885385
> 
> 赞同：1
> 
> 时间：2012-08-09T14:12:37.557
> 
> 标签：facebook, trigger.io, forge

在[Forge.Facebook 模块](http://docs.trigger.io/en/v1.4/modules/facebook.html)文档中，我只能看到 FB SDK 提供的授权、注销、api 和 ui 功能。但是获取登录状态是有可能的，比如 SDK 的 getLoginStatus，如何获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:58:38.803

只需调用 forge.facebook.authorize ，如果用户已经登录，它将不会再次打开模式对话框。

从[v1.4.6 开始](http://docs.trigger.io/en/v1.4/release-notes.html#v1-4-6)，我们还返回 access_token。

getLoginStatus 还有什么其他需要通过我们提供给您的吗？

**更新：您现在还可以使用我们的**[forge.facebook.hasAuthorized 方法](https://trigger.io/docs/current/api/modules/facebook.html#forgefacebookhasauthorizedpermissions-audience-success-error)在不显示任何提示的情况下检查用户是否登录。

# wix - WiX - 如何为所有用户和单个用户获取不同的注册表项

> ID：11885387
> 
> 赞同：3
> 
> 时间：2012-08-09T14:12:40.107
> 
> 标签：wix, windows-installer

我的程序将安装到注册表中的路径，该路径对于单个用户和所有用户有两个不同的值。

所以我想要类似的东西：

```
<Property Id="MYINSTALLDIR">
    if single user, then <RegistrySearch Id='MyRegistry' Type='raw' Root='HKCU' Key='Software\MyApp\Foo' Name='InstallDir' />
    else if ALLUSERS, then <RegistrySearch Id='MyRegistry' Type='raw' Root='HKLM' Key='Software\MyApp\Foo' Name='InstallDir' />
</Property> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:47:31.750

对两个不同的属性执行两次注册表搜索，然后使用 SetProperty 自定义操作将这两个属性之一分配给实际属性，基于哪个具有数据，哪个具有更高的优先级（使用条件来驱动执行）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:13:31.240

最后，它现在正在工作......

在 wxs 文件中使用以下代码段，`ALLUSER=1`或者`2`可以传递给以`msiexec`启用 HKLM 注册表搜索。

```
<Property Id="INSTALLDIR1">
    <RegistrySearch Id='RegistryCU' Type='raw' Root='HKCU' Key='Software\Foo' Name='InstallDir' />
</Property>

<Property Id="INSTALLDIR2">
    <RegistrySearch Id='RegistryLM' Type='raw' Root='HKLM' Key='Software\Foo' Name='InstallDir' />
</Property>

<CustomAction Id="PerUserInstall"    Property="InstallDir" Value="[INSTALLDIR1]" Execute="immediate" />
<CustomAction Id="PerMachineInstall" Property="InstallDir" Value="[INSTALLDIR2]" Execute="immediate" /> 
<InstallExecuteSequence>
    <Custom Action="PerUserInstall"    After="AppSearch">ALLUSERS="" OR (ALLUSERS=2 AND (NOT Privileged))</Custom>      
    <Custom Action="PerMachineInstall" After="AppSearch">ALLUSERS=1  OR (ALLUSERS=2 AND Privileged)</Custom>
</InstallExecuteSequence> 
```

在我的例子中，HKCU 和 HKLM 都包含值并且它们具有相同的优先级，所以唯一的方法是`ALLUSER`在命令行中设置属性。

# algorithm - 什么数据结构可以有效地减少在哈希表桶中查找的成本？

> ID：11885388
> 
> 赞同：0
> 
> 时间：2012-08-09T14:12:41.120
> 
> 标签：algorithm, data-structures, hashmap, hashtable, time-complexity

给定一个有冲突的哈希表，假设使用链表，通用哈希表实现将导致桶内的查找在 O(n) 中运行。

如果我们将链表切换为二叉搜索树，我们会下降到 O(log n)。这是我们能做的最好的，还是这个用例有更好的数据结构？

对桶本身使用哈希表会使查找时间为 O(1)，但这需要对哈希函数进行巧妙的修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:05:42.740

在您的解决方案中，插入时间与查找时间之间存在权衡。（保持桶排序）

如果您想保持每个桶排序，您将使用二分搜索获得 O(log n) 查找时间。但是，当您插入一个新元素时，您必须将他放在正确的位置，以便对存储桶继续进行排序 - 放置新元素的 O(log n) 搜索时间。

因此，在您的解决方案中，插入和查找的总复杂度为 O(log n)。（与在最坏情况下使用 O(n) 进行查找和插入 O(1) 的传统解决方案相反）

**编辑 ：**

如果选择使用排序桶，当然不能再使用 LinkedList。您可以切换到任何其他合适的数据结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:23:05.970

[众所周知，完美散列](http://en.wikipedia.org/wiki/Perfect_hashing)可以实现在构造散列函数时已知的一组有限键的无冲突 O(1) 散列。[Wikipedia 文章](http://en.wikipedia.org/wiki/Perfect_hashing)提到了将这些想法应用于动态键集的几种方法，例如[动态完美散列](http://en.wikipedia.org/wiki/Dynamic_perfect_hashing)和[布谷鸟散列](http://en.wikipedia.org/wiki/Cuckoo_hashing)，您可能会感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:39:23.037

你几乎已经回答了你自己的问题。由于哈希表只是其他数据结构的数组，因此您的查找时间仅取决于辅助数据结构的查找时间以及您的哈希函数如何在存储桶中分配项目。

# linq - 查找列中具有多个条目的 Linq 匹配项

> ID：11885389
> 
> 赞同：0
> 
> 时间：2012-08-09T14:12:45.543
> 
> 标签：linq, contains, lookup

我有一个列表`A`，它有一个`B`允许多个条目的列表查找。一对多`A`相关`B`的 s - 标准实践。我想找到`A`包含`B`对“b”特定实例的引用的位置。

我试过了：

```
var As = from a in ARecs where a.Bs.Contains(b) select a; 
```

但我得到通常的“涉及多个表”错误。请问我该怎么做？

提前致谢

我得到的错误是“查询使用了不受支持的元素，例如对多个列表的引用，或者使用 EntityRef/EntitySet 对完整实体的投影。”

如果有任何区别，则 A 和 B 列表代码由 SPMetal 生成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:11:55.843

一些 LINQ 不能转换为 CAML（我是否忘记提到这是在 SPMetal 生成的 LINQ to Sharepoint 上 - 哦！）并且需要作为 2 个查询执行 - 第一个 ToList 然后是该列表中的第二个。这对我有用。

```
Var Bs = A.ToList().Where(record => record.Bs.Contains(b)) 
```

# html - 如果背景颜色改变，更新数据库

> ID：11885392
> 
> 赞同：0
> 
> 时间：2012-08-09T14:13:16.733
> 
> 标签：html, sql, database, asp-classic

我正在使用调色板，向用户呈现多种颜色。

当用户单击特定颜色时，他们可以选择在新的子窗口中更改它，并且当他们这样做时，新颜色将传递给父窗体-

**子窗口**

```
function reply_click(clicked_id)
{
alert(clicked_id);
window.opener.document.getElementById("quack").innerHTML = clicked_id;
window.opener.document.getElementById("quack").style.background = clicked_id;
window.close ();
} 
```

**父窗口**

```
<tr>
<td id="quack" onclick="myFunction()" style="background-color:<%=(rs("Name") )%>"><%=(rs("Name") )%> </td>

</tr> 
```

如果`ASP`这个特定框的背景颜色发生变化，我可以将新值发送到数据库以更新它吗？

那么如果`background-color`更改`id = quack`执行 SQL 的位置呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:44:13.343

这与任何其他类型的页面没有什么不同。可以使用 GET、POST 或 AJAX 调用将信息发送回服务器。

# mysql - mysql join 限制为 1

> ID：11885394
> 
> 赞同：14
> 
> 时间：2012-08-09T14:13:21.057
> 
> 标签：mysql, sql

假设我有两个一对多关系的表。

而且，我想从每个主记录中选择列以及相关表中的第一条记录。

我尝试了一些方法，但它就是不走...

在这里，我最终得到了这个 SQL 小提琴：

[http://sqlfiddle.com/#!2/39fdb/3](http://sqlfiddle.com/#!2/39fdb/3)

那里的问题是它不能从子选择中引用 a.ID。

这当然行不通，但这只是我能想到的

```
select a.*,b.* from event a left join 
(select * from event_pictures where a.ID=article limit 1)
b on a.ID=b.article; 
```

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-09T14:20:28.057

不，您不能`a.ID`在连接到的子选择中引用`a`. 您可以执行以下操作，但您最好提供订单。否则，没有“第一”行。将选择表 b 中的（或多或少）随机行：

```
select a.*, b.* 
from event a 
  left join event_pictures b
    on b.PK =                        --- the PRIMARY KEY
       ( select bb.PK                --- of event_pictures 
         from event_pictures bb 
         where a.ID = bb.article
         ORDER BY bb.something 
         limit 1
       ) ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:21:55.700

如果您不关心文章返回的图像，您可以在子查询中选择按文章分组的`MIN`或`MAX`图像（而不是执行 a ）`LIMIT 1`

[SQL小提琴](http://sqlfiddle.com/#!2/39fdb/18)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T14:31:16.133

您可以按照建议使用 min 或 max ：

```
select
    e.*,
    (
        select min(ep.img)
        from event_pictures as ep
        where ep2.article = e.article
    ) as img
from
    event as e 
```

如果您想要基于最高 ID 的 img：

```
select
    e.*,
    (
        select ep2.img
        from event_pictures as ep2
        where ep2.ID = last_ep.last_ID
    ) as img
from
    event as e inner join -- could be a left join if necessary
    (
        select ep.article, max(ep.ID) as last_ID
        from event_pictures as ep
        group by ep.article
    ) as last_ep
        on last_ep.article = e.ID 
```

这两种方法都不需要使用`limit`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:22:00.333

这是一种方法：

```
select e.*, ep.*
from (select e.*,
             (select article
              from event_pictures ep
              where ep.article = e.id
              order by rand()
              limit 1
             ) as eparticle
      from event e
     ) e left join
     event_pictures ep
     on e.eparticle = ep.article 
```

子查询找到一篇随机“文章”。然后加入这方面的信息。

# html - HTML5 图片列表

> ID：11885397
> 
> 赞同：1
> 
> 时间：2012-08-09T14:13:34.040
> 
> 标签：html, markup

我想创建一个书籍封面列表，其中包含标题作为菜单条目，以指向书籍详细信息页面。在视觉上，它会是这样的：

```
+-----+ +-----+ +-----+ +-----+
|     | |     | |     | |     |
|     | |     | |     | |     |
|     | |     | |     | |     |
|     | |     | |     | |     |
+-----+ +-----+ +-----+ +-----+
Title 1 Title 2 Title 3 Title 4

+-----+ +-----+
|     | |     |
|     | |     |
|     | |     |
|     | |     |
+-----+ +-----+
Title 5 Title 6 
```

我正在寻找最简洁的 html 结构：我不知道我是否应该使用浮动图形元素、无序列表或其他东西。你会推荐什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:19:49.497

我会这样做：

```
<ul>
  <li>
    <figure>
      <img src="" alt="" />
      <figcaption>IMG title</figcaption>
    </figure>
  </li>
  <!-- more li's -->
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:22:21.010

你回答你自己的问题：

> 我想创建书籍封面**列表**

;-)

一个无序列表是有意义的。您也可以简单地制作一个 float`div`的循环，或者甚至`figure`. 以下是规范对图形元素的说明：

> figure 元素表示一个内容单元，可以选择带有标题，它是自包含的，通常作为单个单元从文档的主要流程中引用，并且可以从文档的主要流程中移开而无需影响文档的意义。

这取决于文档的整体结构，以及元素所起的作用。

# ruby-on-rails - 是否有不涉及删除 Gemfile.lock 的“在任何源中找不到 *gem*”错误的修复？

> ID：11885398
> 
> 赞同：42
> 
> 时间：2012-08-09T14:13:36.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在新计算机上设置我的开发环境。

```
git clone -o heroku git@heroku.com:theirapp.git
cd theirapp
bundle
Fetching gem metadata from https://rubygems.org/......
Fetching gem metadata from https://rubygems.org/..
Could not find jquery-rails-2.0.0 in any of the sources 
```

谷歌搜索此错误后，响应似乎是 delete `Gemfile.lock`，然后`bundle`再次运行。这行得通，但是我有不同版本的 gem，我没有在`Gemfile`. 有没有办法在不删除的情况下修复此错误`Gemfile.lock`？我正在使用 Rails 3.2 和 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2016-05-18T13:52:09.227

简单地运行

```
bundle --full-index 
```

这应该够了吧

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-09T15:01:46.410

根据 ruby​​gems.org，jquery-rails 2.0.0 已被[yanked](http://rubygems.org/gems/jquery-rails/versions)。这解释了您在使用 jquery-rails 时遇到的错误。

运行`$ bundle update jquery-rails`将重建您的 gem 快照。这样你就不必删除 Gemfile.lock

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-04-20T22:42:16.213

旧版本的捆绑器给了我同样的问题。经过一番困惑后，我意识到这就是问题所在。

运行`gem install bundler`完全修复它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-07T19:20:37.943

我发现总是指定 gem 版本是最安全的，并且只在必要时更改它们。给我省了很多麻烦。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-26T19:15:23.467

`bundle update jquery-rails`将仅更新`jquery-rails`gem，这可能是您正在寻找的。运行`bundle update`相当于删除`Gemfile.lock`，在大多数情况下不建议使用。请参阅此处：[Heroku 推送被拒绝：在源中找不到 jquery-rails-2.0.0](https://stackoverflow.com/questions/11876788/heroku-push-rejected-cant-find-jquery-rails-2-0-0-in-sources/12048770#12048770)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-18T18:33:44.703

就我而言，此错误是由冻结的锁定文件引起的。编辑`my-repository-root/.bundle/config`设置`BUNDLE_FROZEN: "false"`解决了这个问题。

`bundle install`之后没有更改锁定文件，所以我不明白为什么`BUNDLE_FROZEN`一开始就破坏了任何东西......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-21T07:46:00.403

我有同样的问题，但有不同的宝石。跑步`gem install yourgem -v 1.x.x`解决了我的问题。

# mysql - 不使用模型的 Rails 自定义查询

> ID：11885408
> 
> 赞同：0
> 
> 时间：2012-08-09T14:14:06.313
> 
> 标签：mysql, ruby-on-rails, activerecord

最近我一直在开发一个简单的网站作为学习过程，我遇到了一个问题。我已将数据库分成两个表，一个“用户”表和一个“字符”表。我面临的问题是我需要从角色表中选择所有用户的角色，而不为角色创建任何模型（因为这是在其他地方处理的）。有什么办法可以解决这个问题吗？

我也有一个包含三列的表；“id”、“user_id”和“character_id”

帮助表示赞赏！

谢谢，阿迪尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:30:45.237

您可以使用`ActiveRecord::Base.connection.execute("some sql query here")`

# wordpress - Z-index 无法正确获取

> ID：11885409
> 
> 赞同：1
> 
> 时间：2012-08-09T14:14:08.773
> 
> 标签：wordpress, css

我试图在滑块上方保留徽标，但无法正确设置 z-index

我尝试过 Z-index 递增顺序，但无法正确执行

链接是 [http://design3web.in/law-firm/](http://design3web.in/law-firm/)

他们是头部滑块的背面图像，我想把它放在前面

我将滑块的 Z-index 指定为 1，徽标的 z-index 为 10，但这不起作用

而且我还想让图像响应事物

```
margin-top: -400px;
height: auto;
 z-index: 100;
position: absolute;
max-width: 90%; 
```

但图像仍然没有完全响应

**图像向上或向下移动也有问题，因为它是响应式的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:26:42.443

我之前遇到过类似的问题，我的解决方案是将所有内容包装在一个 div 中，将位置设置为相对，并将包装的 div z-index 设置为 1，然后相应地调整内部的其他 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:21:48.450

css

```
#logo {
font-size: 2em;
font-weight: bold;
letter-spacing: -0.05em;
line-height: 1em;
margin: 0 0 1em;
padding: 0;
position: relative;
z-index: 1; 
```

}

添加`position: relative;`&`z-index: 1;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:21:59.203

如果您将**位置**设置为“**相对**”以及设置 z-index，它将起作用。

```
<img src="http://design3web.in/law-firm/files/2012/08/Untitled-1.png" style="
margin-top: -500px;
max-width: 80%;   height: auto;
z-index: 100;
position: relative;"> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T14:18:38.593

设置`z-index:10001`也设置图像，`position:absolute`然后将 设置`top:`为正确的值。

看看 - [http://jsbin.com/itiviw/4](http://jsbin.com/itiviw/4)

# c++ - IOS目标链接可可堆栈库，该库在C++11标准错误中写入

> ID：11885413
> 
> 赞同：1
> 
> 时间：2012-08-09T14:14:21.777
> 
> 标签：c++, ios, c++11, static-libraries, xcodebuild

我正在做一个项目，它是一个使用别人编写的 C++ 库的可可静态库。这个 C++ 库使用了 C++11 和 libc++（支持 C++ 11 的 LLVM C++ 标准库）。

我成功构建了可可库，但是当我在应用程序中链接这个库时（只需在“链接二进制与库”中添加链接）。

发生错误，这是错误日志：

```
"non-virtual thunk to std::__1::basic_iostream<char, std::__1::char_traits<char> >::~basic_iostream()", referenced from:

  "non-virtual thunk to std::__1::basic_iostream<char, std::__1::char_traits<char> >::~basic_iostream()", referenced from:

  "non-virtual thunk to std::__1::basic_istream<char, std::__1::char_traits<char> >::~basic_istream()", referenced from:

  "non-virtual thunk to std::__1::basic_istream<char, std::__1::char_traits<char> >::~basic_istream()", referenced from:

  "non-virtual thunk to std::__1::basic_istream<wchar_t, std::__1::char_traits<wchar_t> >::~basic_istream()", referenced from:

  "non-virtual thunk to std::__1::basic_istream<wchar_t, std::__1::char_traits<wchar_t> >::~basic_istream()", referenced from:

  "non-virtual thunk to std::__1::basic_ostream<char, std::__1::char_traits<char> >::~basic_ostream()", referenced from:

  "non-virtual thunk to std::__1::basic_ostream<char, std::__1::char_traits<char> >::~basic_ostream()", referenced from:

  "non-virtual thunk to std::__1::basic_ostream<wchar_t, std::__1::char_traits<wchar_t> >::~basic_ostream()", referenced from:

  "non-virtual thunk to std::__1::basic_ostream<wchar_t, std::__1::char_traits<wchar_t> >::~basic_ostream()", referenced from:

  "non-virtual thunk to std::__1::basic_iostream<char, std::__1::char_traits<char> >::~basic_iostream()", referenced from:

  "non-virtual thunk to std::__1::basic_iostream<char, std::__1::char_traits<char> >::~basic_iostream()", referenced from:

  "operator delete[](void*)", referenced from:

  "operator delete(void*)", referenced from:

  "operator new[](unsigned long)", referenced from:

  "operator new(unsigned long)", referenced from:

  "___cxa_begin_catch", referenced from:

  "___cxa_end_catch", referenced from:

  "___cxa_pure_virtual", referenced from:

  "___cxa_rethrow", referenced from:

  "___gxx_personality_v0", referenced from:

  "_crc32", referenced from:

  "_deflate", referenced from:

  "_deflateEnd", referenced from:

  "_deflateInit2_", referenced from:

  "_get_crc_table", referenced from:

  "_inflate", referenced from:

  "_inflateEnd", referenced from:

  "_inflateInit2_", referenced from: 
```

看起来像是关于链接 C++11 库的问题，但我对此一无所知。可能APP中连接cocoa静态库使用的是libstdc++标准，没有C++11标准，所以这里就发生了冲突。但我不确认这一点。

你可以帮帮我吗 ？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T13:51:51.950

因为我错过了链接 libc++.dylib 库。

所以产生这些错误。

注意：Clang 支持 C++11。

# jquery - onLoad 新元素，委托/开启？

> ID：11885425
> 
> 赞同：7
> 
> 时间：2012-08-09T14:15:07.320
> 
> 标签：jquery

`.this_button`我试图在动态加载的元素 () 上运行一个函数。我使用以下代码：

```
$(function(){
    $("body").on("load", ".this_button", function() {
         console.log("its been loaded");
    });
}); 
```

我试过`delegate`了，但它说它已被弃用`on`。某些元素可能会被推送，例如在文档已加载 10 分钟之后。它如何不断地检查一个元素`.this_button`是否进入了身体？

任何人都知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T14:31:18.703

从[文档](http://api.jquery.com/on/#additional-notes)中：

“在所有浏览器中，加载、滚动和错误事件（例如，在元素上）不会冒泡。[...] 此类事件不支持与委托一起使用，但它们可以在事件处理程序直接使用时使用附加到生成事件的元素上。”

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-09T15:09:04.370

该`on`方法将在第一次执行时处理当前选定元素的事件或引发与特定选择器匹配的特定事件的任何未来元素。由于添加到页面的元素不会自动引发`load`或其他类型的事件，因此您的代码将永远不会为新添加的元素执行。

你有两个选择。第一个是在插入新元素时触发自定义事件。例如，

```
$.get("/newElemnet", function(newElement) {
   $('#placeToInsertElement').append(newElement);
   $(newElement).trigger('newElementAdded');
}); 
```

然后您的原始函数将侦听该自定义事件：

```
$(function(){
    $("body").on("newElementAdded", ".this_button", function() {
         console.log("its been loaded");
    });
}); 
```

第二种选择是不断轮询此[问题](https://stackoverflow.com/questions/7434685/event-when-element-added-to-page)中描述的新元素。

# c# - 传入 SelectItems 时，SelectList 未设置 Selected Value

> ID：11885426
> 
> 赞同：2
> 
> 时间：2012-08-09T14:15:10.493
> 
> 标签：c#, asp.net-mvc, selectlist

```
foreach (Person person in personList) {                               
  SelectListItem item = new SelectListItem();
  item.Value = person.Id;
  item.Text = person.FirstName + " " + person.LastName;                    
  items.Add(item);
}

ViewData["personSelectList"] = new SelectList(items, "Value", "Text", 4);

<%=Html.DropDownList("personId", ViewData["personSelectList"] as SelectList)%> 
```

此代码没有将 Id = 4 的人设置为选定项，而是始终选择列表中的第一项作为选定项。

我错过了什么步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:17:47.267

您是否尝试过`Selected`在项目本身上设置属性？例如

```
foreach (Person person in personList)
{
    items.Add(new SelectListItem()
    {
        Value = person.Id,
        Text = person.FirstName + " " + person.LastName,
        Selected = person.Id == 4
    });
} 
```

**更新**

我认为您需要将所选值传递给视图并在其中处理它：

```
ViewData["personSelectList"] = new SelectList(items, "Value", "Text");
ViewData["personId"] = 4; 
```

看法

```
<%= Html.DropDownList("personId", ViewData["personSelectList"] as SelectList) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:24:37.470

```
items = new List<SelectListItem>();

foreach (Person person in personList)
{
    items.Add(new SelectListItem()
    {
        Value = person.Id,
        Text = person.FirstName + " " + person.LastName,
        Selected = person.Id == 4
    });
}

ViewData["personSelectList"] = items 
```

然后查看

```
@Html.DropDownList("holdPersonSelectList", (List<SelectListItem>)ViewData["personSelectList") 
```

然后回到控制器

```
public ActionResult Index(string holdPersonSelectList) 
```

编辑： 控制器中的holdPersonSelectList 将保存所选项目的值的字符串值。所以，如果它是一个 id 字段，只需解析为 int。

如果您要设置一个值，我会传入另一个包含该数字的视图数据，并使用 jquery // javascript.

```
$('holdPersonSelectList').val('4'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:20:39.607

`SelectListItem.Value`是 a`string`但你正在传递`4`- 这是一个整数。尝试通过`"4"`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:35:26.300

我刚刚使用 MVC3 编写了测试，它可以正常工作：

```
@{
var items = new[]
                {
                    new Test {Id = 1, Name = "Jhon"}, 
                    new Test {Id = 2, Name = "Scott"}
                };

var selectList = new SelectList(items, "Id", "Name", 2);
var selectEnumerable = items.Select(x => new SelectListItem
                                             {
                                                 Selected = x.Id == 2,
                                                 Text = x.Name,
                                                 Value = x.Id.ToString()
                                             });
}

@Html.DropDownList("name", selectList)
@Html.DropDownList("name2", selectEnumerable) 
```

在两个 DropDownLists 上，选择的值都是 Scott，因此它确实选择了代码中编写的第二项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-11T18:32:55.550

我的解决方案不同。我不得不`SelectList`改为`MultiSelectList`

所以，我没有做foreach，而是做类似的事情

```
int[] personListSelected= personList.Select(p=>(int)p.idPerson).ToArray();

IEnumerable<SelectListItem> personList = new MultiSelectList(personList, "idPerson", "namePerson",personListSelected); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-27T15:13:34.260

使用 LINQ，您可以执行以下操作；

```
ViewData["personSelectList"] = new SelectList(items, "Value", "Text", items.FirstOrDefault(i => i.id == 4).id); 
```

或者更好，

```
int SelectedID = 4;
ViewData["personSelectList"] = new SelectList(items, "Value", "Text", items.FirstOrDefault(i => i.id == SelectedID).id); 
```

# android - 在 Android 中安装新版本时保存我的旧应用程序基于 SQLITE 的数据库？

> ID：11885428
> 
> 赞同：1
> 
> 时间：2012-08-09T14:15:10.963
> 
> 标签：android, sqlite

我做了一个应用程序，在我的 SQLite 数据库中保存了一些信息。正如我们所知，SQLite 数据库驻留在设备的内部存储器中，它在安装应用程序时创建并在我们删除相应的应用程序时删除。

我正在发布应用程序的新版本，因此当我删除旧版本以安装新版本时，我丢失了保存在旧版本中的完整信息。

我的查询是我能否以某种方式从其 SQLite 数据库中检索旧版本的数据，以便可以在新版本中使用和维护它。

请建议我，这样我的用户就不会丢失他们的旧数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:32:59.540

如果用户更新应用程序，那么数据库将保持不变。卸载旧版本并重新安装新版本会导致数据库被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:31:46.863

看我的评论，我真的不认为你需要担心它。

但是，如果您想备份和恢复您的数据库，以下方法会将其发送到 SD 卡，然后将其读回（在每种情况下都会覆盖以前存在的内容）：

```
public void backup() {
    try {
        File sdcard = Environment.getExternalStorageDirectory();
        File outputFile = new File(sdcard,
                "yourDB.bak");

        if (!outputFile.exists()) 
             outputFile.createNewFile(); 

        File data = Environment.getDataDirectory();
        File inputFile = new File(data,
                "data/your.package.name/databases/yourDB.sqlite");
        InputStream input = new FileInputStream(inputFile);
        OutputStream output = new FileOutputStream(outputFile);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = input.read(buffer)) > 0) {
            output.write(buffer, 0, length);
        }
        output.flush();
        output.close();
        input.close();
    } catch (IOException e) {
        e.printStackTrace();
        throw new Error("Copying Failed");
    }
}

public void restore() {
    try {
        File sdcard = Environment.getExternalStorageDirectory();
        File inputFile = new File(sdcard,
                "yourDB.bak");

        File data = Environment.getDataDirectory();
        File outputFile = new File(data,
                "data/your.package.name/databases/yourDB.sqlite");

        if (!outputFile.exists()) 
             outputFile.createNewFile(); 

        InputStream input = new FileInputStream(inputFile);
        OutputStream output = new FileOutputStream(outputFile);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = input.read(buffer)) > 0) {
            output.write(buffer, 0, length);
        }
        output.flush();
        output.close();
        input.close();
    } catch (IOException e) {
        e.printStackTrace();
        throw new Error("Copying Failed");
    }
} 
```

# maven - org.codehaus.mojo:properties-maven-plugin:1.0-alpha-2 错误

> ID：11885431
> 
> 赞同：2
> 
> 时间：2012-08-09T14:15:17.563
> 
> 标签：maven, properties

我有以下 Maven 项目结构：

```
xyz
  |
  -props
  |  |
  |  - root.properties
  |
  -module_a
  |  |
  |  -pom.xml
  |
  -pom.xml 
```

我的根工件定义了一个子模块（module_a），这是引用父工件。在根 pom.xml 中，我正在使用 **org.codehaus.mojo:properties-maven-plugin:1.0-alpha-2**插件从 common props 文件夹中读取一个属性文件。

当我发出 **mvn clean package** 命令时，我得到以下 putput：

```
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO]
[INFO] my_artifact
[INFO] module_a
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building my_artifact 1.0.0
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ my_artifact ---
[INFO]
[INFO] --- properties-maven-plugin:1.0-alpha-2:read-project-properties (default) @ my_artifact ---
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building module_a 1.0.0
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ module_a ---
[INFO]
[INFO] --- properties-maven-plugin:1.0-alpha-2:read-project-properties (default) @ module_a ---
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] my_artifact ....................................... SUCCESS [0.234s]
[INFO] module_a .......................................... FAILURE [0.000s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.344s
[INFO] Finished at: Thu Aug 09 15:37:46 CEST 2012
[INFO] Final Memory: 2M/5M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:properties-maven-plugin:1.0-alpha-2:read-project-properties (default) on project module_a: Properties file not found: G:\java\xyz\module_a\props\root.properties -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
[ERROR]
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :module_a 
```

在子模块中，Maven 尝试从不存在的子文件夹中读取属性文件。有人可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:32:39.123

当 maven 评估 pom 文件并创建有效的 pom（与继承聚合）时，某些属性被排除在继承之外。这些是以 project.* 开头的，因此也是 project.basedir。这就是为什么您无法定义从属性文件加载到父级的属性的原因。

这种行为的原因是隔离。每个模块都应该与除 Maven 存储库之外的所有内容隔离。即使使用 settings.xml 配置文件也违反了这个不变量，并且您失去了构建的可移植性。

这个不变量在很多情况下是不必要的，所以如果你有很多模块并且你想使用一个属性文件，你可以做的是：

*   在你的根 pom 中定义一个属性，例如“filters.dir”到 ${project.basedir}/src/main/filters
*   配置插件以从 ${filters.dir}/my.properties 加载属性文件
*   在任何子模块中，您现在可以将 filters.dir 覆盖为 ../src/main/filters
*   如果您有许多子模块，您可以在根目录中为 filters.dir 定义错误的路径“../src/main/filters”，然后您不需要在任何子模块中定义该属性。为了防止构建失败，您需要将插件设置为忽略失败。

另一种方法是通过扩展 AbstractMavenLifecycleParticipant 编写 maven 扩展，并使用 maven api 加载属性文件以确定项目的根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-27T13:41:16.223

我面临着类似的问题。

*   我有一个父项目 pom.xml 有一个`build.properties`文件
*   父项目有几个模块。
*   当我创建一个新模块并想要构建整个父项目时，我得到了：

`[ERROR] Failed to execute goal org.codehaus.mojo:properties-maven-plugin:1.0-alpha-2:read-project-properties (default) on project attachment-services: Properties file not found: /home/raz/git/parent/attachment-services/build.properties -> [Help 1]`

为了解决这个问题，我在新模块中添加`pom.xml`了以下内容

```
<properties>
        <build.properties.location>..</build.properties.location>
    </properties> 
```

当然，这`build.properties.location`已经在父 pom 中定义了，例如：

```
<properties>
<build.properties.location>${project.basedir</build.properties.location
</properties> 
```

# ruby-on-rails - 在 rails 中搜索站点

> ID：11885432
> 
> 赞同：0
> 
> 时间：2012-08-09T14:15:25.863
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试创建一个可以检索信息的表单。到目前为止，我已经实现了一个模型和一个带有动作查询的控制器。

这是表格：

```
<%= form_tag "/search", :method => "get" do %>
  <%= text_field_tag :query, params[:query] %>
  <%= submit_tag "Search", :name => nil %>
<% end %> 
```

我的控制器有：

def query @results = Search.search(params[:query] ) end

在我的模型中，我有：

```
def self.search(search)
  if search
    Customer.find(:all, :conditions => ['first LIKE ?', "%#{search}%"])
  else
    Customer.find(:all)
  end
end 
```

但它给了我以下错误：

```
ActiveRecord::StatementInvalid in SearchesController#query

SQLite3::SQLException: no such column: first: SELECT "customers".* FROM "customers"  WHERE (first LIKE '%test%') 
```

为什么我的代码会产生此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:25:28.477

尝试这个

```
Customer.find(:all, :conditions => ["'first' LIKE ?", "%#{search}%"]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:24:01.870

这可能是因为您在数据库的客户表中没有第一列。

你的意思是 first_name 吗？

# iphone - MPMoviePlayerController 全屏界面方向变化

> ID：11885434
> 
> 赞同：2
> 
> 时间：2012-08-09T14:15:27.483
> 
> 标签：iphone, ios4, mpmovieplayercontroller, uiinterfaceorientation, interface-orientation

我在我的视图中添加了 MPMoviePlayerController。并且工作正常。当我全屏切换到此并更改设备的方向时，不会触发方向更改事件。所以请让我知道我如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:27:00.580

我想你`MPMoviePlayerController`是模态的，所以看看 -

`(void)shouldAutorotateToInterfaceOrientation:`主应用控制器的方法。我想如果您只为纵向返回**TRUE**，则模态控制器无法自行旋转。尝试为您的所有界面方向返回**TRUE**`rootViewController` ，并且`MPMoviePlayerController`应该开始旋转。

# objective-c - 如何解析 Objective-C 中的对象数组？

> ID：11885438
> 
> 赞同：1
> 
> 时间：2012-08-09T14:15:40.573
> 
> 标签：objective-c, ios, arrays, while-loop

来自 C++，这是我的问题：

我创建了这种类型的对象：

```
 Size *one = [[Size alloc] initWithX: 3 andY: 1];
    Size *two = [[Size alloc] initWithX: 4 andY: 7];
    // etc...
    Size *thirtythree = [[Size alloc] initWithX: 5 andY: 9]; 
```

（每个对象都有一个`@property int x;`& ..）`@property int y;`

我存储在一个数组中，如下所示：

```
NSArray *arrayOfSizes;

arrayOfSizes = [NSArray arrayWithObjects:one,two,three,four,five,six,
                seven,eight,nine,ten,eleven,twelve,thirteen,
                fourteen,fifteen,sixteen,seventeen,eighteen,
                nineteen,twenty,twentyone,twentytwo,
                twentythree,twentyfour,twentyfive,twentysix,
                twentyseven,twentyeight,twentynine,thirty,
                thirtyone,thirtytwo,thirtythree nil]; 
```

现在我有一个类型的对象：

```
Myobject *myObject = [[Myobject alloc] initWithX: 5 andY: 3]; 
```

这也有一个`@property int x;`& `@property int y;`...

我想将它的值与数组中找到的对象的值进行比较，直到找到一个具有相似值的数组对象。但我不知道如何在 Obj-C 中做到这一点。（在 C++ 中，我会简单地使用`vector v;`with`v.size();`和`v[x];`..etc ......我想......）

这就是我要找的东西.. :)

```
while( !wholeOfArrayOfSizesChecked && !found)
{
    if ( // x & y of object in array is equal to x & y of myObject )
    {
        found = YES;
    }
    else if( // whole of array checked)
    {
       wholeOfArrayOfSizesChecked = YES;
    }
    else
    { 
      //move on to the next object of the array..
    }
} 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:25:54.203

好吧，您可以在数组上使用[快速枚举。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocFastEnumeration.html#//apple_ref/doc/uid/TP30001163-CH18-SW1)像这样的东西：

```
Myobject *myObject = [[Myobject alloc] initWithX: 5 andY: 3];

for (Size *s in arrayOfSizes)
{
    if (s.x == myObject.x && s.y == myObject.y)
    {
        // Found one
        // Do something useful...
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:35:40.260

另一个：

```
NSUInteger index = [arrayOfSizes indexOfObjectPassingTest:
    ^BOOL(Size *s, NSUInteger idx, BOOL *stop)
    {
        return (s.x == myObject.x) && (s.y == myObject.y);
    }
];

if (index != NSNotFound) {
    id object = [arrayOfSizes objectAtIndex:index];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:23:49.733

for-in 循环怎么样？

```
for (Size *item in array) {
   // compare 'item' to myObject
   if (/* equal condition here */) break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:25:39.093

尝试这样的事情：

```
for (int i = 0; i < [arrayOfSizes size]; i++)
{
  Size *current = (Size *)[arrayOfSizes objectAtIndex:i];
  if (myObject.x == current.x && myObject.y == current.y)
  {
    // found
    break;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T14:30:11.723

```
-(BOOL) isSize:(Size*)size equalToMyObject:(MyObject*)object{
    return (size.x == object.x) && (size.y == object.y);
}

//In some method where you are checking it:
for (Size* size in arrayOfSizes){
        if ([self isSize:size equalToMyObject:myObject]){
            //You found it! They're equal!
            break;
        }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T14:31:00.360

只是为了使用你给定的结构。不过有更聪明的方法:)

```
wholeOfArrayOfSizesChecked = NO; 
int currObj = 0  
while( !wholeOfArrayOfSizesChecked && !found)
{
    Size *current = (Size *)[arrayOfSizes objectAtIndex:i];
    if (myObject.x == current.x && myObject.y == current.y)
    {
        found = YES;
    }
    else if(currObj == [arrayOfSizes count] -1 )
    {
       wholeOfArrayOfSizesChecked = YES;
    }
    else
    { 
      currObj++;
    }
} 
```

# asp.net-mvc-3 - 在 Session 中存储对象

> ID：11885451
> 
> 赞同：8
> 
> 时间：2012-08-09T14:16:20.637
> 
> 标签：asp.net-mvc-3

我知道这个主题已经在很多帖子中讨论过，但我就是无法解决。

在控制器内 ActionResult 内我想在 Session 中存储一个对象并在另一个 ActionResult 中检索它。像那样 ：

```
 public ActionResult Step1()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Step1(Step1VM step1)
    {
        if (ModelState.IsValid)
        {
            WizardProductVM wiz = new WizardProductVM();
            wiz.Step1 = step1;
            //Store the wizard in session
            // .....
            return View("Step2");
        }
        return View(step1);
    }

    [HttpPost]
    public ActionResult Step2(Step2VM step2)
    {
        if (ModelState.IsValid)
        {
            //Pull the wizard from the session
            // .....
            wiz.Step2 = step2;
            //Store the wizard in session again
            // .....
            return View("Step3");
        }
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-09T14:20:18.757

存储向导：

```
Session["object"] = wiz; 
```

获取向导：

```
WizardProductVM wiz = (WizardProductVM)Session["object"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:19:48.957

如果您只在下一个操作中需要它并且您打算再次存储它，您可以使用 TempData。TempData 与 Session 基本相同，只是它在下次访问时被“删除”，因此需要再次存储它，就像你已经表明你正在做的那样。

[http://msdn.microsoft.com/en-us/library/dd394711(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd394711(v=vs.100).aspx)

但是，如果可能的话，最好确定一种方法来使用发布的参数来传递必要的数据，而不是依赖会话（临时数据或其他）

# visual-studio-2008 - 如何区分两个带有分支的 Windows VS2008？

> ID：11885452
> 
> 赞同：0
> 
> 时间：2012-08-09T14:16:24.600
> 
> 标签：visual-studio-2008, tfs, branch

我们有两个分支——主干和发布。我们通常只使用一个。但是我们有时会与两个分支机构合作。分支在两个窗口 VS2008 中打开。它们看起来一样。它们仅在文件路径上有所不同。我该怎么做才能使它们看起来明显不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T09:02:49.997

For Visual Studio 2010 and 2012 (but unfortunately, it appears, at least this one not for 2008), there exists an extension named [Rename Visual Studio Window Title](http://erwinmayer.com/labs/visual-studio-2010-extension-rename-visual-studio-window-title/) which allows you to put a portion of, or quite possibly all of, the path to the solution file into the Visual Studio window title.

I'm using it with VS2010 and for all I can tell, it works great.

Maybe if you ask really nicely, the author can be persuaded to make a version that works with VS2008 as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:23:20.983

您可以在属性资源管理器中重命名解决方案，以便窗口标题不同。

这将重命名 .sln 文件，但内容相同。只需在重新集成之前将其重命名为原始标题即可。

这将为您提供在分支和主干上同时工作时打开具有两个不同名称的窗口的效果。

**编辑：**

另一种选择是为具有不同标题的分支创建不同的解决方案文件，链接到相同的项目中，但是您需要使它们保持同步。根据您添加/删除项目的频率，这可能会很痛苦。

# java - Java：泛型方法是否只有静态？

> ID：11885453
> 
> 赞同：6
> 
> 时间：2012-08-09T14:16:29.900
> 
> 标签：java, generics

我想知道我们是否仅在方法是静态的情况下才使用泛型方法？对于非静态，您将定义一个泛型类，并且您不需要它是泛型方法。那是对的吗 ？

例如，

```
 public class Example<E>{

         //this is suffice with no compiler error
         public void doSomething(E [] arr){
                for(E item : arr){
                    System.out.println(item);
                }
         }

         //this wouldn't be wrong, but is it necessary ?
         public <E> doSomething(E [] arr){
                for(E item : arr){
                    System.out.println(item);
                }
         }
  } 
```

而如果它是静态的，编译器将强制添加类型参数以使其成为泛型方法。

```
 public static <E> doSomething(E [] arr){

  } 
```

我不确定我是否正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:18:51.713

```
public class Example<E>{ 
```

为实例的方法和字段定义一个泛型类型。

```
public void <E> doSomething(E [] arr){ 
```

这定义了`E`与第一个不同的第二个，并且可能会造成混淆。

注意：`void`仍然需要；）

静态字段和方法不使用类的泛型类型。

```
public static <F> doSomething(F [] arr) { }

private static final List<E> list = new ArrayList<>(); // will not compile. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:20:30.087

假设您声明了一个`Example<String> example = new Example<String>();`.

*   `public void doSomething(E [] arr)`会期待一个`String[]`论点
*   `public <E> void doSomething(E [] arr)`将期望任何类型的数组（它与`E`in不同`Example<E>`）
*   `public static <E> void doSomething(E [] arr)`将期望任何类型的数组

无论如何，由于您`Example<E>`可以参数化，因此您不能`E`在静态调用中使用它，因为它将依赖于实例。这有点像从静态方法调用非静态成员。所以你必须在本地重新定义它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:21:00.797

考虑`java.util.Collection`接口。它被声明为：

```
public interface Collection<E>{
  //...
  <T> T[] toArray(T[] a);
} 
```

这`toArray`是一个使用类型参数的通用实例方法，它与接口声明中`T`的类型参数没有任何关系。`E`

这是 JDK 本身的一个很好的例子，它说明了具有通用实例方法的价值。

# msdeploy - (MSDeploy) 将文件夹的内容部署到远程 IIS 服务器

> ID：11885454
> 
> 赞同：43
> 
> 时间：2012-08-09T14:16:31.133
> 
> 标签：msdeploy, webdeploy

是否可以将文件夹的内容（纯 Html 文件）部署到远程 IIS6/7 服务器上的特定 Web 应用程序？

以下命令不会出错，但也不会将任何文件发布到远程服务器：

```
 msdeploy.exe -verb:sync -source:dirPath="c:\myHtmlFiles" -dest:auto,ComputerName="http://deploy.mycompany.co.uk/msdeploy?site=TestSite",includeAcls="false",username="administrator",password="myPassword" -enableRule:DoNotDeleteRule -disableLink:AppPoolExtension -disableLink:ContentExtension -allowUntrusted 
```

笔记：

*   WebDeploy 已正确安装在目标服务器上，并且可以与从 .NET 项目的 msbuild 脚本创建的包一起愉快地工作。
*   ' [http://deploy.mycompany.co.uk/msdeploy](http://deploy.mycompany.co.uk/msdeploy) ' 对于收听端点是正确的。
*   '?site=TestSite' 查询字符串在其他地方被建议，但不起作用。
*   'TestSite' Web 应用程序存在于目标服务器上。
*   参数文件和 -setParam 不起作用，如果您尝试设置、声明或提供参数，则会呈现与不支持参数“IIS Web 应用程序名称”的源相关的错误。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-08-20T03:39:09.127

[我刚刚在http://sedodream.com/2012/08/20/WebDeployMSDeployHowToSyncAFolder.aspx](http://sedodream.com/2012/08/20/WebDeployMSDeployHowToSyncAFolder.aspx)写了一篇博文来回答这个问题。从您的问题来看，您似乎对 MSDeploy 非常熟悉，因此答案可能有点冗长，但我希望对 MSDeploy 了解较少的人能够理解。我在下面粘贴了答案。

Web Deploy（又名 MSDeploy）使用提供程序模型，并且有[大量](http://technet.microsoft.com/en-us/library/dd569040%28v=ws.10%29)可用的提供程序。为您提供一些提供者的示例；同步 IIS Web 应用程序时，您将使用 iisApp，对于 MSDeploy 包，您将使用包，对于 Web 服务器 webServer 等。如果要将本地文件夹同步到远程 IIS 路径，则可以使用[contentPath](http://technet.microsoft.com/en-us/library/dd569034%28v=ws.10%29)提供程序。您还可以使用此提供程序将文件夹从一个网站同步到另一个网站。

在这种情况下，我们想要做的一般想法是将文件夹从您的 PC 同步到您的 IIS 网站。对 msdeploy.exe 的调用可能有点冗长，所以让我们一步一步构建命令。我们将使用下面的模板。

```
msdeploy.exe -verb:sync -source:contentPath="" -dest:contentPath="" 
```

我们使用同步动词来描述我们正在尝试做的事情，然后将 contentPath 提供程序用于源和目标。现在让我们填写这些值应该是什么。对于源值，您需要传入要同步的文件夹的完整路径。在我的情况下，文件位于*C:\temp\files-to-pub*。对于 dest 值，您将提供文件夹路径作为 IIS 路径。在我的例子中，我正在同步的网站被命名为 sayedupdemo，所以我想要同步的 IIS 路径是'<em>sayedupdemo/files-to-pub'。现在给我们。

```
msdeploy.exe –verb:sync -source:contentPath="C:\temp\files-to-pub" -dest:contentPath='sayedupdemo/files-to-pub' 
```

对于 dest 值，我们没有给出任何参数来指示这些命令应该发送到哪个服务器。我们需要添加这些参数。通常需要传入的参数是。

*   ComputerName – 这是处理发布操作的 URL 或计算机名称
*   用户名——用户名
*   密码——密码
*   AuthType –要使用的[authType 。](http://technet.microsoft.com/en-us/library/dd569001%28v=WS.10%29.aspx)NTLM 或基本。对于 WMSvc，这通常是 Basic，对于 Remote Agent Service，这通常是 NTLM

就我而言，我正在发布到[Windows Azure 网站](https://www.windowsazure.com/en-us/home/features/web-sites/?WT.mc_id=cmp_pst001_blg_post0171web)。所以我将使用的值是：

*   计算机名称：[https ://waws-prod-blu-001.publish.azurewebsites.windows.net/msdeploy.axd?site=sayedupdemo](https://waws-prod-blu-001.publish.azurewebsites.windows.net/msdeploy.axd?site=sayedupdemo)
*   用户名：$sayedupdemo
*   密码：thisIsNotMyRealPassword
*   身份验证类型：基本

所有这些值都可以在 .publishSettings 文件中找到（可以从 WindowsAzure.com 的网站仪表板下载）。对于*ComputerName*值，您需要附加站点名称以获取完整 URL。在上面我手动添加的示例`?site=sayedupdemo`中，这与 Azure 门户中显示的名称相同。所以现在我们拥有的命令是。

```
msdeploy.exe 
    –verb:sync 
    -source:contentPath="C:\temp\files-to-pub" 
    -dest:contentPath='sayedupdemo/files-to-pub'
            ,ComputerName="https://waws-prod-blu-001.publish.azurewebsites.windows.net/msdeploy.axd?site=sayedupdemo"
            ,UserName='$sayedupdemo'
            ,Password='thisIsNotMyRealPassword'
            ,AuthType='Basic' 
```

好的，我们快到了！就我而言，我想确保在此过程中不会从服务器中删除任何文件。所以我也会补充`–enableRule:DoNotDeleteRule`。所以我们的命令是现在。

```
msdeploy.exe 
    –verb:sync 
    -source:contentPath="C:\temp\files-to-pub" 
    -dest:contentPath='sayedupdemo/files-to-pub'
            ,ComputerName="https://waws-prod-blu-001.publish.azurewebsites.windows.net/msdeploy.axd?site=sayedupdemo"
            ,UserName='$sayedupdemo'
            ,Password='thisIsNotMyRealPassword'
            ,AuthType='Basic' 
    -enableRule:DoNotDeleteRule 
```

此时，在执行此命令之前，我将首先通过`–whatif`. 这将给我一个总结，哪些操作将不会实际引起任何变化。当我这样做时，结果如下图所示。

![msdeploy 结果](../Images/93bb9c9ab0143f35eddec2a23b8d33a7.png)

在我验证这些更改都是故意的之后，我删除了`–whatif`并执行了命令。之后，本地文件被发布到远程服务器。现在我已经同步了每次发布的文件，这将导致只发布更改的文件。

如果您想了解如何同步单个文件，您可以查看我之前的博客文章如何在发布期间使您的 Web 应用程序脱机。

## 目的地：汽车

在您的情况下，我注意到您正在使用`dest:auto`，您可以使用它，但您必须将 IIS 应用程序名称作为参数传递，它将替换文件夹的路径。下面是命令。

```
msdeploy.exe 
    -verb:sync
    -source:contentPath="C:\temp\files-to-pub" 
    -dest:auto
        ,ComputerName="https://waws-prod-blu-001.publish.azurewebsites.windows.net/msdeploy.axd?site=sayedupdemo"
        ,UserName='$sayedupdemo'
        ,Password='thisIsNotMyRealPassword'
        ,AuthType='Basic' 
-enableRule:DoNotDeleteRule 
-setParam:value='sayedupdemo',kind=ProviderPath,scope=contentPath,match='^C:\\temp\\files-to-pub$' 
```

# android - 在Android中从加载的PNG创建画布

> ID：11885455
> 
> 赞同：0
> 
> 时间：2012-08-09T14:16:32.937
> 
> 标签：android, canvas, bitmap, png

我正在尝试从已加载到位图中的 PNG 文件创建画布，但它给出了错误。这是代码：

```
public Bitmap CABINET_Bitmap;

AssetManager assetManager = this.getAssets();
inputStream = assetManager.open("background.png");
CABINET_Bitmap = BitmapFactory.decodeStream(inputStream);

// Next line gives error
Canvas cv = new Canvas(CABINET_Bitmap); 
```

如果我通过执行以下操作创建位图，而不是加载它：

```
CABINET_Bitmap = Bitmap.createBitmap(480, 640, Config.RGB_565);
Canvas cv = new Canvas(CABINET_Bitmap); 
```

然后画布创建工作。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:27:50.607

该文档指出：

> 使用要绘制的指定位图构造一个画布。位图必须是可变的。
> 
> 画布的初始目标密度与给定位图的密度相同。

所以我假设是`BitmapFactory.decodeStream()`返回一个不可变的位图，而`Bitmap.createBitmap()`返回一个可变的位图。相反，使用`BitmapFactory.Options`并设置`inMutable`为 true。

```
BitmapFactory.Options o = new BitmapFactory.Options();
o.inMutable = true;
CABINET_Bitmap = BitmapFactory.decodeStream(inputStream, o);
Canvas cv = new Canvas(CABINET_Bitmap); 
```

看看这是否有效。

# symfony - Symfony2：如何在集合中强制多个 => false

> ID：11885459
> 
> 赞同：0
> 
> 时间：2012-08-09T14:16:47.593
> 
> 标签：symfony

我尝试 pu a multiplie => false to a manytomany 关系，但我有这个错误。

```
Expected an object, but got a collection. Did you forget to pass 
```

“multiple = true”到实体字段？

所以我找到了解决方案，但我还有其他错误。

```
Catchable Fatal Error: Argument 1 passed to Plop\PlipBundle\Form\{closure}() must be an instance of Plop\PlipBundle\Form\Collection, null given in /var/www/Symfony/src/plop/plipBundle/Form/CampaignSupportType.php line 22 
```

并且是我的代码：

```
public function buildForm(FormBuilder $builder, array $options)
{
  $builder->add(
    $builder->create('supports', 'entity', array(
      'class' => 'PlopPlipBundle:Support','multiple' => false,
      'query_builder' => function(EntityRepository $er) {
         return $er->createQueryBuilder('s')
           ->orderBy('s.name', 'ASC');
       }, 'property' => 'name'))
    ->prependNormTransformer(new CallbackTransformer(
        // transform the collection to its first element
        function (Collection $coll) { return $coll[0]; },
        // transform the element to a collection
        function (MyEntity $entity) { return new ArrayCollection(array($entity)); }
    ))
   );
 } 
```

**编辑**

随着@bernhard 的回答，我得到了一个新错误：

```
Catchable Fatal Error: Argument 1 passed to Plop\PlipBundle\Form\{closure}() must be an instance of Plop\PlipBundle\Form\Collection, instance of Doctrine\Common\Collections\ArrayCollection given in /var/www/Symfony/src/plop/PlipBundle/Form/CampaignSupportType.php line 22 
```

现在不是 null 给定的，但是`Doctrine\Common\Collections\ArrayCollection`Symfony2 等待一个`Plop\PlipBundle\Form\Collection`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:12:37.673

您应该将转换函数更改为 accept `null`，因为该字段可能为空或未选中。

```
->prependNormTransformer(new CallbackTransformer(
    // transform the collection to its first element
    function (Collection $coll = null) {
        return $coll ? $coll[0] : null; 
    },
    // transform the element to a collection
    function (MyEntity $entity = null) {
        return new ArrayCollection($entity ? array($entity) : array());
    }
)) 
```

那么你的代码应该可以正常工作。

# objective-c - 如何获取当前的 viewController 类名？

> ID：11885463
> 
> 赞同：0
> 
> 时间：2012-08-09T14:17:06.003
> 
> 标签：objective-c, cocoa-touch, uinavigationcontroller, uitabbarcontroller

但问题是我的应用同时具有 UInavigationController 和 UITabBarController

所以调用 navigaionController.topViewController 告诉我我有 UItabBarController
和

self.window.rootViewController 返回 UINavigationController

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:36:10.900

您可以检查它使用的类类型 [VC isKindOfClass:(myVCClass class)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:02:21.380

tabbarcontroller 设计为应用程序的顶部/根视图控制器。从文档中：

> 因为 UITabBarController 类继承自 UIViewController 类，所以标签栏控制器有自己的视图，可以通过 view 属性访问。部署选项卡栏界面时，您必须将此视图安装为窗口的根目录。与其他视图控制器不同，标签栏界面永远不应安装为另一个视图控制器的子级。

将导航控制器放在选项卡内，并将其他视图控制器放在选项卡上的导航控制器内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T01:23:29.510

view.class 以字符串形式返回类名：

```
NSLog (@"Class:%@", view.class); 
```

# ajax - 如何在 JSF inputtextbox 中使用 ajax 来更新 h:selectOneRadio？

> ID：11885470
> 
> 赞同：0
> 
> 时间：2012-08-09T14:17:37.127
> 
> 标签：ajax, jsf-2, richfaces

我在开发中使用了 JSF 2.0、richfaces 和 a4j。我有一个由 3 个单选按钮组成的单选按钮组，每个单选按钮旁边都有一个 inputtextbox，就像下面显示的布局一样：

```
radio button A | input textbox A
radio button B | input textbox B
radio button C | input textbox C 
```

每当关注文本框时，是否可以使用 ajax 来更新单选按钮选择？例如，当关注输入文本框 B 时，将选择单选按钮 B。我可以知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:46:14.527

有很多方法可以做到这一点，首先使用plain `javascript`，然后使用`ajax`on `jsf`or `richfaces`components。您可以尝试在您的内部使用`a4j:ajax`嵌套`h:inputText`并`focus`在您的`textbox`.

```
<h:selectOneRadio value="#{bean.value}" id="radio" />
<h:inputText id="input" value="#{bean.textValue}" >
    <a4j:ajax event="onfocus" render="radio" action="{bean.setRadioSelected}"/>
</h:inputText> 
```

在 action 方法上，将选定单选的值设置为 true。希望这可以帮助。

# android - 如何更改 Gson 解析器的规则？

> ID：11885474
> 
> 赞同：2
> 
> 时间：2012-08-09T14:17:53.347
> 
> 标签：android, gson

我想更改 Gson 解析器的规则（谷歌为 Android 编写的 json 解析器）。例如我有类的对象：

```
enum Type
{
    PRIMARY,
    SECONDARY
}

class A
{
    public int i = 4;
    public Type type = Type.PRIMARY;
}

A a = new A(); 
```

现在，如果我将通过 Gson 转换器转换该对象：

```
Gson gson = new Gson();
JsonElement json = gson.toJson(a); 
```

我会得到那个 json 元素：{"i":4,"type":"PRIMARY"}。而不是这个我想得到：{“i”：4，“type”：0}，即类型的序数而不是它的名称。

我怎样才能做到这一点？

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:31:05.500

好的，我找到了答案：

为此，需要从 GsonBuilder 创建 Gson 对象。但在此之前，使用您自己的 json 序列化程序为 Enum.class 类型的 gson 构建器注册一个新的类型层次结构适配器，它将完成这项工作。

```
// new Json serializer for Enum<?> class
class ObjectTypeSerializer implements JsonSerializer<Enum<?>>
{
    private static final JsonParser mParser = new JsonParser();

    public JsonElement serialize(Enum<?> object_,
        Type type_,
        JsonSerializationContext context_)
    {
        // that will convert enum object to its ordinal value and convert it to json element
        return mParser.parse(((Integer)object_.ordinal()).toString());  
    }
}

// creation of gson builder 
GsonBuilder gsonBuilder = new GsonBuilder();

// registration of type hierarchy adapter
gsonBuilder.registerTypeHierarchyAdapter(Enum.class, new ObjectTypeSerializer());   

// creation gson from builder
Gson gson = gsonBuilder.create(); 
```

现在 gson 将完成这项工作！

# windows - 在 Windows 上运行的 GNOME/Vala 应用程序

> ID：11885482
> 
> 赞同：6
> 
> 时间：2012-08-09T14:18:28.233
> 
> 标签：windows, vala, gtk3, gnome-3

我想将我的 C# WinForms 应用程序移植到 Windows 和 Linux 上。我有一些 Java 经验和更多 Python 经验，但我不太喜欢第一个，我关心的是第二个（我的意思是混淆，需要在目标 PC 上安装 Python 等）所以我已经选择使用 Vala 和 GTK3 工具包...它主要是为制作 GNOME 应用程序而创建的，但我已经读到它是多平台的，并且完全编译为 C，还具有运行软件所需的所有依赖项 - 但它是对的吗？我的意思是：我在 Linux 上创建应用程序时会遇到任何限制吗？我不想完成它然后发现它不能在 Windows 上运行，因为我使用了一些 GNOME 库......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T14:30:12.220

目前有很多 GTK 应用程序可以在 Windows 上正常运行。

例如：

*   GIMP（光栅图形工具 - GTK 最初构建的应用程序）
*   Inkscape（矢量图形工具）
*   Geany（文本编辑器）
*   洋泾浜

Vala 应用程序可以在 GTK 应用程序可以运行的任何地方运行。无法命名我见过在 Windows 上运行的 Vala 应用程序，但我会对此感兴趣并回复您。

顺便说一句，在 Vala/GTK 中编写应用程序有两种（可能有几种）方法，例如是否将整个 GTK 库包含到应用程序中。Geany 提供了 2 种不同的二进制安装程序，允许您选择是否已经在 Windows 上安装了 GTK，如果没有，请下载更轻的 geany-only 安装程序，如果没有，请下载包含其 GTK 版本的完整安装程序。

这是一个[站点和一个工具](http://sourceforge.net/projects/valatowindows/)，可以帮助您配置您的 vala 编译器以输出 windows 可执行文件。

我不确定您是否可以在 Windows 上使用 Vala 所需的所有工具。您可能必须在 linux 机器上进行开发。

# c++ - 删除“固定”流操纵器时的问题

> ID：11885489
> 
> 赞同：1
> 
> 时间：2012-08-09T14:18:44.783
> 
> 标签：c++, stream

我是 C++ 新手，自学，我正在使用 Deitel 的“C++ 如何编程 - 第 7 版”一书。现在，请看下面的代码

```
 #include <iostream>
    #include <iomanip>
    #include <cmath>

    using namespace std;

    int main()
    {
        double principle = 1000;
        double amount;
        double rate = 0.05;

        cout << "Year" << setw(21) << "Amount on deposit" << endl;

        cout << fixed << setprecision(2);

        for(int years=1; years<=10; years++)
        {
            amount = principle * pow(1.0+rate,1.0);

            cout << setw(4) << years << setw(21) << amount << endl;
        }
} 
```

当我删除“固定”流操纵器时，输出变得愚蠢，这意味着只有 ascii 字母和数字。当我插入它时，输出没有任何问题。我的问题是，为什么会这样？所有具有“双”类型输出的程序都必须“固定”吗？请帮忙。

还有一件事。什么是流操纵器？作为一名 Java 开发人员，我认为这些可能是某种常量变量，但事实并非如此！它们是方法吗？那为什么括号不存在呢？也请回答这个问题。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T14:27:43.950

输出不会“变得愚蠢”：您只需让输出流选择浮点数的格式，它就会选择科学记数法。这给了你`1e+03`（这意味着`1*10^3`）而不是`1050.00`. 的使用`fixed`告诉流你不需要科学记数法；你也可以[`scientific`](http://www.cplusplus.com/reference/iostream/manipulators/scientific/)用来强制科学格式。由于精确的格式取决于您的应用程序要求，因此选择使用`fixed`或`scientific`最终取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:27:16.173

像fixed这样的操纵器是函数，但如果你想要它的common ()，那么它看起来像这样：

固定（cout）；//而不是使用 << 或 >> 您将流传递给操纵器函数。

有关操纵器的更多信息，请参见此参考：

[http://www.cplusplus.com/reference/iostream/manipulators/](http://www.cplusplus.com/reference/iostream/manipulators/)

此外，可以在此处找到固定文档：

[http://www.cplusplus.com/reference/iostream/manipulators/fixed/](http://www.cplusplus.com/reference/iostream/manipulators/fixed/)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:39:46.447

如果您选择了更宽的精度，那么如果没有`fixed`.

```
 cout << setprecision(6); // 6 instead of 2 
```

然后你的输出看起来更像你的预期。（顺便说一句，您应该通过将赚取的利息折回本金来计算复利。）

否则，只有`setprecision(2)`，格式化程序决定使用科学计数法，以便仅显示 2 位精度。

但是，由于您希望输出提供固定数量的数字，因此您提供的（`fixed`和`setprecision(2)`）将做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:28:06.053

它不仅仅是 ascii 字母和数字

1e+03 是 1*10^3 的科学写作，即 1000

供参考： [http ://www.cplusplus.com/reference/iostream/manipulators/fixed/](http://www.cplusplus.com/reference/iostream/manipulators/fixed/)

# php - xml输出节点的预匹配

> ID：11885490
> 
> 赞同：2
> 
> 时间：2012-08-09T14:18:45.893
> 
> 标签：php, preg-match

我有以下使用*hostip.info*上的 api 的脚本。该页面根据 ip 地址解析用户位置的 xml 读数。在我的职能中，除了城市之外，一切都在运作。

```
preg_match("@<Hostip>(\s)*<gml:name>(.*?)</gml:name>@si",$xml,$city_match); 
```

我已经把它缩小到我`preg_match`错了，但我不知道如何解决它。这是一个示例 xml 输出：[http ://api.hostip.info/?ip=12.215.42.19](http://api.hostip.info/?ip=12.215.42.19)

```
<?php
function getCountryCity()
{
    if(isset($_SERVER['REMOTE_ADDR']) && strlen($_SERVER['REMOTE_ADDR']) > 0)  {
        $ipAddr = $_SERVER['REMOTE_ADDR'];
        // verify the IP address
        ip2long($ipAddr)== -1 || ip2long($ipAddr) === false ? trigger_error("Invalid IP", E_USER_ERROR) : "";

        $ipDetail=array();
        // get the XML result from hostip.info
        $xml = file_get_contents("http://api.hostip.info/?ip=".$ipAddr);

        // get the city name inside the node <gml:name> and </gml:name>
        preg_match("@<Hostip>(\s)*<gml:name>(.*?)</gml:name>@si",$xml,$city_match);
        $ipDetail['city'] = $city_match[1]; 

        // get the country name inside the node <countryName> and </countryName>
        preg_match("@<countryName>(.*?)</countryName>@si",$xml,$country_match);
        $ipDetail['country'] = $country_match[1];

        // get the country name inside the node <countryName> and </countryName>
        preg_match("@<countryAbbrev>(.*?)</countryAbbrev>@si",$xml,$cc_match);
        $ipDetail['country_code'] = $cc_match[1];

        // return the array containing city, country and country code
        return $ipDetail;
    } else {
        return false;
    }
}

$ipDetail = getCountryCity();
$user_city = $ipDetail['city'];
$user_country = $ipDetail['country'];
$user_cc = $ipDetail['country_code'];

echo $user_country.' ('.$user_cc.')';
echo $user_city;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:51:58.837

XPATH 是这类东西的梦想。谷歌“SimpleXML PHP 教程”，如果这对您来说是新的。基本上：

```
$xml = new SimpleXMLElement($yourXML);
$user_city = $xml->xpath('//gml:name/text()');
$user_country= $xml->xpath('//countryName/text()');
$cc= $xml->xpath('//countryAbbrev/text()'); 
```

我发现 XPATH 查询比 RegEx 更容易编写。

抱歉，这不能如您所愿直接回答您的问题。试图发表评论，但格式完全搞砸了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:52:38.233

```
preg_match_all("@<gml:name>(.*?)</gml:name>@si",$xml,$city_match); 
```

只需删除`<Hostip>(\s)*`并使用 preg_match_all 它将占用所有标签。然后你可以在数组中选择你需要的一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:10:30.340

```
function getCountryCity() {
    if(isset($_SERVER['REMOTE_ADDR']) && strlen($_SERVER['REMOTE_ADDR']) > 0)  {
        $user_ip = $_SERVER['REMOTE_ADDR'];
        $response = file_get_contents('http://api.hostip.info/?ip='.$user_ip);
        $user_details = array();
        $xml = new DOMDocument();
        $xml->loadXml($response);
        $xpath = new DOMXpath($xml);
        $path = '/HostipLookupResultSet/gml:featureMember/Hostip/';

        // create values for array
        $ip = $xpath->evaluate($path . 'ip')->item(0)->nodeValue;
        $city = $xpath->evaluate($path . 'gml:name')->item(0)->nodeValue;
        $countryName = $xpath->evaluate($path . 'countryName')->item(0)->nodeValue;
        $countryAbbrev = $xpath->evaluate($path . 'countryAbbrev')->item(0)->nodeValue;

        // assign values to array
        $user_details['ip'] = $ip;
        $user_details['city'] = $city;
        $user_details['countryName'] = $countryName;
        $user_details['countryAbbrev'] = $countryAbbrev;

        return $user_details;
    } else {
        return false;
    }
} 
```

# sql - SQL 连接表有 3 种可能的情况：表可以没有记录、匹配 1 个或多个、记录或要求找到的所有记录都匹配

> ID：11885494
> 
> 赞同：0
> 
> 时间：2012-08-09T14:18:59.747
> 
> 标签：sql, sql-server-2008, join

我有 2 张桌子：

```
 Questions table with Question ID 
```

零件表：

```
 Question ID
   Part ID
   BAllPartsRequired 
```

用户将选择一些部分（或可能不选择），并根据选择的内容显示某些问题。

我想为 3 个场景加入 2 个表，但在 1 个查询中全部完成。我可以单独编写每个场景（编辑我认为我可以，但场景 3 我无法开始工作，它需要选择部分表中的所有内容）但无法弄清楚如何在 1 个查询中获取所有内容（我已经完成以前有类似的东西，但不记得如何）。

1.  如果该问题的零件表中不存在任何零件，则重新提出该问题

2.  如果选择的任何部分存在于部分表返回问题中（即用户选择 1 个部分并且 5 个部分与该问题相关联，则该问题将匹配并被返回）。BAllPartsRequired = 假

3.  如果用户选择零件并且所有零件都与问题相关联，则问题将被退回，但如果用户未选择所有零件，则问题不会被退回（即用户选择 3 个零件并且表格中有 4 个零件，则用户不会查看问题，但如果用户选择所有 4 个部分，则会显示问题）。BAllPartsRequired = true

我是一名高级 SQL 程序员，但这让我望而却步，我知道我以前做过这个，但我如何让它在 1 个查询中工作，我是做嵌套连接，左连接，还是 where 语句或其他东西别的。

样本数据：

```
Question Form Association:          
NFormAssociationID  NQuestionID FormType    
1   1   PAEdit  
2   2   PAEdit  
3   3   PAEdit  
4   4   PAEdit  

Question Part Form Association Table:           
ID  NFormAssociationID  PartNumber  BAllPartsRequired
1   1   1   0
2   2   2   1
3   2   3   1 
```

未添加新零件表的查询：

```
Select ROW_NUMBER() OVER(ORDER BY QL.NOrderBy) AS RowNumber,
QL.NQuestionID, QL.FieldName, QL.Question, QL.BRequired, QFL.FormFieldType, QFL.SingleMultipleSM, 
QFL.CSSStyle
FROM dbo.QuestionFormAssociation QA WITH (NOLOCK)
INNER JOIN dbo.QuestionLookup QL WITH (NOLOCK) ON QA.NQuestionID = QL.NQuestionID
INNER JOIN dbo.QuestionFieldTypeLookup QFL WITH (NOLOCK) ON QL.NFieldTypeID = QFL.NFieldTypeID
WHERE QA.BActive = 1 AND QL.BActive = 1 AND QFL.BActive=1
AND QA.FormType = 'PAEdit'
ORDER BY QL.NOrderBy 
```

使用新表进行简单查询

```
Select ID
    FROM dbo.QuestionPartFormAssociation 
    WHERE BAllPartsRequired = 1 
    AND PartNumber IN ('1', '2') --'1', '2', '3') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:27:38.383

听起来您正在尝试根据某些标准找到符合条件的问题。

在这种情况下，最好先在问题级别进行总结，然后将逻辑应用于这些总结。这是一个例子：

```
select q.questionid
from (select q.questionid,
             max(case when qp.questionid is null then 1 else 0 end) as HasNoParts,
             sum(case when qp.partid in (<user parts>) then 1 else 0 end) as NumUserParts,
             count(qp.questionid) as NumParts,
             max(qp.AllPartsRequired) as AreAllPartsRequired
      from question q left outer join
           questionpart qp
           on q.questionid = qp.questionid
      group by q.questionid
     ) q
 where HasNoParts = 1 or                                   -- condition 1
       AreAllPartsRequired = 0 and NumUserParts > 0 or     -- condition 2
       AreAllPartsRequired = 1 and NmUserParts = NumParts  -- condition 3 
```

我已经简化了表名和列名以使逻辑更清晰。

更新了 OP 的完整答案：

```
Select ROW_NUMBER() OVER(ORDER BY QL.NOrderBy) AS RowNumber,
QL.NQuestionID, QL.FieldName, QL.Question, QL.BRequired, QFL.FormFieldType, QFL.SingleMultipleSM, 
QFL.CSSStyle
FROM dbo.QuestionFormAssociation QA WITH (NOLOCK)
INNER JOIN dbo.QuestionLookup QL WITH (NOLOCK) ON QA.NQuestionID = QL.NQuestionID
INNER JOIN dbo.QuestionFieldTypeLookup QFL WITH (NOLOCK) ON QL.NFieldTypeID = QFL.NFieldTypeID
INNER JOIN (
    select q.NFormAssociationID,
    max(case when qp.NFormAssociationID is null then 1 else 0 end) as HasNoParts,
    sum(case when qp.PartNumber in ('1','2','3') then 1 else 0 end) as NumUserParts,
    count(qp.NFormAssociationID) as NumParts, 
    qp.BAllPartsRequired
    from QuestionFormAssociation q 
    left outer join QuestionPartFormAssociation qp on q.NFormAssociationID = qp.NFormAssociationID      
        AND QP.BActive = 1  
    WHERE Q.FormType = 'PAEdit' 
    AND Q.BActive = 1   
    group by q.NFormAssociationID, qp.BAllPartsRequired

) QSUB ON QA.NFormAssociationID = QSUB.NFormAssociationID
WHERE QA.BActive = 1 AND QL.BActive = 1 AND QFL.BActive=1
AND (
    QSUB.HasNoParts = 1                                                     -- condition 1
    OR (QSUB.BAllPartsRequired = 0 and QSUB.NumUserParts > 0)               -- condition 2
    OR (QSUB.BAllPartsRequired = 1 and QSUB.NumUserParts = QSUB.NumParts)   -- condition 3
)
ORDER BY QL.NOrderBy 
```

# javascript - node.js 哈希，检索密钥？

> ID：11885495
> 
> 赞同：1
> 
> 时间：2012-08-09T14:19:06.547
> 
> 标签：javascript, node.js

刚开始使用 Node.JS，也许这更像是一个 javascript 问题，但它是一条细线。

当我在 CLI 中启动节点时，我执行以下操作：

```
> x = {num:1, str:'hello', ar:[1,2,3], func:function calc(i){return i *2}} 
```

现在我可以说：

```
> x.num
> x.str
> x.ar        // [1,2,3]
> x.ar.length // 3
> x.ar[0]     // 1
> x.calc(10) 
```

那很清楚。但现在我想知道 x 包含哪些键？

```
// this doesn't work 
x.keys   // undefined
x.length // undefined 
```

那么如何检索这个散列的键呢？

我的第二个问题是， x 是什么对象？我怎样才能得到这个对象的名字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:22:12.303

试试`Object.keys(x);`这里是文档：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)

# iphone - 骨干项目方法

> ID：11885497
> 
> 赞同：0
> 
> 时间：2012-08-09T14:19:08.187
> 
> 标签：iphone, backbone.js, jsonp

我想用backbone.js 做一个应用程序我了解backbone 的基础知识，但是我真的不知道解决我的问题的正确方法可能是什么。

我有一个从服务器检索的大 jsonp 文件。因此，下一步是将 jsonp 文件中的数据放入模型中。数据类似于博客，包含一个 imgurl/title/text。

现在我可以像这样开始一个新模型：

```
new modelVar = new BackboneModel; 
```

但是，这是否意味着我需要为要检索的每个帖子创建一个新变量，或者我可以让主干创建一组包含帖子数据的模型。

欢迎任何建议书/博客

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:18:29.580

一个快速的答案可能是“不”。您可以让 Backbone 使用 Backbone 集合在模型中加载数据。

例如

```
new App.Photos([
  {url:"http://(...)_1.png", title:"photo1"},
  {url:"http://(...)_2.png", title:"photo2"}, 
  {url:"http://(...)_3.png", title:"photo3"}
 ]); 
```

![在此处输入图像描述](../Images/6b72371033069788d13316b376a5bce0.png)

创建集合原型时，您只需在参数中获取一组对象。Backbone 将根据集合对象中定义的模型属性自动创建模型。它特别适合您的需求，因为您只需输入解析的 json 响应的参数，您的模型就会被创建。

我建议您使用 Backbone Marionette，这是从 Backbone 实施开始以获得最佳实践的不错选择。

[https://github.com/derickbailey/backbone.marionette](https://github.com/derickbailey/backbone.marionette)

# jquery - 如果输入字段是只读的，则禁用 DatePicker

> ID：11885498
> 
> 赞同：1
> 
> 时间：2012-08-09T14:19:10.853
> 
> 标签：jquery, jquery-ui

我有一个问题，与`DatePicker`. 基本上，我只希望启用它，如果选中了一个复选框（默认为禁用）。如果我将其设置`DatePicker`为禁用，则在跨回发保存 TextBox 值时会遇到问题。所以，当页面加载时，我必须将日期选择器设置为启用。

作为一种解决方法，我的想法是将最小/最大日期设置为负数，这意味着您不能选择任何日期。仍然会`DatePicker`出现，但至少不能选择一个日期。但是，问题是如何再次删除我的最小/最大设置（单击复选框时）以再次启用选择？

另外，有没有其他方法可以抑制`DatePicker`？

我真的不知道我可以发布什么代码，但这是我的 DatePicker 构造函数：

```
$("#<%= txtReleasedDate.ClientID %>").datepicker({ dateFormat: 'yy-mm-dd', minDate: -1, maxDate: -2 }); 
```

我想要的是一种再次从中删除 minDate 和 maxDate 的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:28:11.440

在获得了我当地的 jquery 专家的帮助后，他建议我阅读文档，其中明确指出，您可以将 minDate 设置为 null。哎呀。。

```
$("#<%= txtApprovedDate.ClientID %>").datepicker({ minDate: null }); 
```

# c# - 如何在项目中添加 Telerik？

> ID：11885502
> 
> 赞同：1
> 
> 时间：2012-08-09T14:19:30.370
> 
> 标签：c#, asp.net, .net

我开始与 Telerik RadControls 合作。在 web.config telerik 中设置了很多地方。但是谁能给我算法如何在 Visual Studio 2010 的新项目 asp.net（Web 应用程序）中添加 dll？（我有 dll 库）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:27:43.917

如果要将项目添加到工具箱以便进行拖放，请执行以下操作：

1）。打开 Visual Studio

2）。打开一个新项目（或现有）

3）。在 VS 中找到你的“工具栏”窗口。

4）。右键单击工具栏空白处（没有现有控件的地方）

5）。点击“添加标签”

6）。将此选项卡命名为“Telerik”

7）。现在，再次右键单击，然后点击“选择项目”

8）。将弹出一个窗口，您可以选择 Telerik DLL，它会在工具箱中填充您需要的所有控件。

然后，您可以将这些控件拖放到您的页面中。我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T19:05:35.257

如果您在 Visual Studio 机器上安装了 Telerik，但它当前不是项目的一部分，添加正确 Telerik DLL 和 web.config 条目的最简单方法是转到 Visual Studio 顶部的 Telerik 菜单，然后选择转换为 Telerik 网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:21:32.303

你可以试试这篇文章

[http://www.telerik.com/products/aspnet-ajax/resources/step-by-step.aspx](http://www.telerik.com/products/aspnet-ajax/resources/step-by-step.aspx)

# python - 一维数组的numpy转置没有给出预期的结果

> ID：11885503
> 
> 赞同：30
> 
> 时间：2012-08-09T14:19:34.707
> 
> 标签：python, numpy, scipy, transpose

我正在 Python scipy 模块中尝试一个非常基本的示例`transpose()`方法，但它没有给出预期的结果。我正在将 Ipython 与 pylab 模式一起使用。

```
a = array([1,2,3]
print a.shape
>> (3,)

b = a.transpose()
print b.shape
>> (3,) 
```

如果我打印数组“a”和“b”的内容，它们是相似的。

期望是：（这将导致 Matlab 转置）

```
 [1,
  2,
  3] 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-09T14:23:45.717

NumPy`transpose()`有效地反转了数组的形状。如果数组是一维的，这意味着它没有效果。

在 NumPy 中，数组

```
array([1, 2, 3]) 
```

和

```
array([1,
       2,
       3]) 
```

实际上是相同的——它们只是在空格上有所不同。您可能想要的是相应的二维数组，它们`transpose()`可以正常工作。还可以考虑使用 NumPy 的`matrix`类型：

```
In [1]: numpy.matrix([1, 2, 3])
Out[1]: matrix([[1, 2, 3]])

In [2]: numpy.matrix([1, 2, 3]).T
Out[2]: 
matrix([[1],
        [2],
        [3]]) 
```

请注意，对于大多数应用程序，普通的一维数组可以作为行向量或列向量正常工作，但是当来自 Matlab 时，您可能更喜欢使用`numpy.matrix`.

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-08-09T14:31:09.377

转置是一维数组的 noop。

添加新轴并转置：

```
>>> a[None].T
array([[1],
       [2],
       [3]])
>>> np.newaxis is None
True 
```

或重塑：

```
>>> a.reshape(a.shape+(1,))
array([[1],
       [2],
       [3]]) 
```

或者正如@Sven Marnach 在评论中建议的那样，在最后添加新轴：

```
>>> a[:,None]
array([[1],
       [2],
       [3]]) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-09T14:44:09.287

将一维数组重塑为二维数组的更简洁的方法是：

```
a = np.array([1,2,3]),  a_2d = a.reshape((1,-1)) or a_2d = a.reshape((-1,1)) 
```

形状向量中的 -1 表示“填写任何数字使其工作”

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-09T14:23:36.943

你应该试试：`a = array([[1,2,3]])`or `a = array([[1],[2],[3]])`，也就是说，`a`应该是一个矩阵（行向量，列向量）。

# asp.net - HTML 动态按钮的单击事件

> ID：11885507
> 
> 赞同：1
> 
> 时间：2012-08-09T14:19:46.483
> 
> 标签：asp.net, html, literals

我正在 VS2010 下开发一个 C# ASP.NET 应用程序。我想通过将 HTML 文本写入文字来生成动态表格，包括表格上动态插入的按钮。我知道如何创建动态 ASP.NET 控件，但是动态 HTML 控件有一个小问题。我创建了一个 HTML 按钮，但我不知道如何为其提供服务器端点击功能。

我可以创建动态 ASP.NET 控件并将它们插入到我的文字中吗？如何获取动态创建的按钮来触发服务器端事件？

我已经使用 OnServerClick 属性来定义我的服务器端功能，但它没有效果，我该如何使用这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:37:56.890

如果你想在你的按钮点击后发回，你必须`__doPostBack`在它的事件上添加功能`onclick`，为此你可以添加一个按钮，如

```
StringBuilder dynamicHtml = new StringBuilder();
dynamicHtml.Append("Your Html Code");
dynamicHtml.Append("<input type='button' id='btn1' name='btn1' onclick='__doPostBack(\'btn1\',\'\')' value='Click Here' />"); 
```

当您单击它时，它会回发，您可以检查`Request.Form["__EVENTTARGET"]`以查找发回页面的人。

通过签`Request.Form["__EVENTTARGET"]`入 Page_Load 事件处理程序，您可以调用任何服务器端方法，例如

```
protected void Page_Load(object sender, EventArgs e)
{
    var eventTarget = Request.Form["__EVENTTARGET"].ToString();

    if(eventTarget == "btn1")
    {
        CallMethod1();
    }
}

private void CallMethod1()
{
    //Code which you want to run
} 
```

# qt4 - 带有文本和图像的 QString

> ID：11885513
> 
> 赞同：0
> 
> 时间：2012-08-09T14:20:01.150
> 
> 标签：qt4, qstring, qpixmap

有没有办法在 QString 中插入图像？我需要这样一个QString“'图像'一些文本”

它需要是一个 QString，因为我将它插入到 QPaint 事件中并且我不能为此使用 QLabel（因为我不能将 qlabel 插入到绘画区域中）

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:28:58.597

`QString`仅包含和显示文本。如果你想做这样的事情，你可以在你的`QString`（使用 HTML 语法）中编写富文本并将其显示在能够显示富文本的组件中（这里`QGraphicsTextItem`是因为你似乎在一个场景中工作）：

```
QString myRichText = "<img src=\"URL or URI of the image\"/> some text";
QGraphicsTextItem textDisplayer(myRichText);
// Hack, hack, hack in your scene 
```

# javascript - 使用 Raphael 2.1 在 .print 中选择单个字母

> ID：11885514
> 
> 赞同：1
> 
> 时间：2012-08-09T14:20:05.580
> 
> 标签：javascript, svg, raphael

我试着做这个 Raphael 教程 [ [http://www.html5rocks.com/en/tutorials/raphael/intro/](http://www.html5rocks.com/en/tutorials/raphael/intro/) ] 所做的，并从用 .print 打印的字符串中选择单个字母，但没有乐趣

我已经用 cufon 生成了字体，并用 Raphael.registerFont 替换了 Cufon.registerFont

```
var paper = Raphael( '#div', 500, 500 ),
    label = paper.print( xCenter, yCenter, 'blah',  paper.getFont("CelliniProMedium"), 54 );

label[1].attr( 'fill', 'red'); 
```

导致错误，因为标签只是一个路径而不是路径数组。是什么赋予了？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:46:41.740

Yeah, this is definitely a change in behavior between 1.4 and 2.0 -- and it's a bit of functionality that came in handy in more than one situation.

On the other hand, replicating the array result functionality is easy to do by extending Raphael 2.0...

```
Raphael.fn.printArray = function printArray( x, y, string, font, size, letter_spacing, line_height )
{
    var result = [];
    var cx = x, cy = y;        
    size = size || 16;
    letter_spacing = letter_spacing || 0.2;
    line_height = line_height || 1.5;        
    for ( var i = 0; i < string.length; i++ )
    {
        if ( string[i] == " " )
        {
            cx += size;
            continue;
        }
        else if ( string[i] == "\n" )
        {
            cx = x;
            cy += size * line_height;
            continue;
        }
        var glyph = this.print( 0, 0, string[i], font, size ).attr( { opacity: 0 } );
        var glyphBox = glyph.getBBox();
        glyph.attr( { transform: "T" + cx + "," + cy, opacity: 1 } );
        cx += glyphBox.width + ( size * letter_spacing );
        result.push( glyph );
    }
    return result;
} 
```

This isn't perfect code, but with a little refinement it could easily fill the gap.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:57:12.130

所以它看起来像是 2.1 的错误或功能 - 我从 GitHub 获得了 1.4，它按预期工作。暂时保留问题，以防任何人对此有所了解，因为我认为这可能对其他人有用。

# android - 如何处理首选项中存在的复选框的单击事件？

> ID：11885516
> 
> 赞同：0
> 
> 时间：2012-08-09T14:20:09.940
> 
> 标签：android, android-preferences

我创建了一个首选项屏幕并用 java 代码填充它。

我创建了一个带有自定义布局 (my_pref.xml) 的首选项，其中包含`CheckBox`、和. 这看起来就像一个.`ImageView``ImageButton``TextView``CheckBoxPreference``ImageButton`

我如何实现`CheckBox`“勾选”时的方法？

```
 PreferenceCategory pr = (PreferenceCategory) findPreference("preference");

          Preference mypref = new Preference(this);
          mypref.setLayoutResource(R.layout.my_pref);
          pr.addPreference(mypref);

        CheckBox cb = (CheckBox) findViewById(R.id.checkBox); 
```

我得到`cb = null`.

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:25:54.280

```
SharedPreferences prefs = PreferenceManager .getDefaultSharedPreferences(PreferenceDemoActivity.this);     
boolean checkBox = prefs.getBoolean("checkBox", false);    
builder.append("Keep me logged in: " + String.valueOf(checkBox) + "\n");    

textView.setText(builder.toString());
} 
```

看到这个[http://androidresearch.wordpress.com/tag/preferenceactivity/](http://androidresearch.wordpress.com/tag/preferenceactivity/)

# c# - Fluent NHibernate HasOne + ReferencesAny

> ID：11885520
> 
> 赞同：1
> 
> 时间：2012-08-09T14:20:27.427
> 
> 标签：c#, fluent-nhibernate, fluent-nhibernate-mapping

我不知道如何使用 Fluent 配置我的映射 :(

这是我的情况：我有一个 Element 对象，它（理论上）应该与 Search 对象具有一对一的关系。但是，Search 对象应该与其自身具有一对多的关系。换句话说，一个 Element 对象最多可以有 1 个 Search 对象（也可以没有），而一个 Search 对象可以有其他 Search 对象的集合。

我从以下映射开始。他们创建了我期望的正确数据库模型并且可以很好地保存。检索数据时出现问题...

```
public class ElementMap : ClassMap< Element >
{
    public ElementMap()
    {
        Schema( "dbo" );
        Table( "Element" );
        LazyLoad();
        Id( x => x.Id )
            .Column( "Id" )
            .CustomType( "Int32" )
            .Access.Property()
            .CustomSqlType( "int" )
            .Not.Nullable()
            .UnsavedValue( 0 )
            .GeneratedBy.Identity();
        HasOne( x => x.Search )
            .Cascade.All()
            .Not.LazyLoad();
    }
} 
```

和

```
public class SearchMap : ClassMap< Search >
{
    public SearchMap()
    {
        Schema( "dbo" );
        Table( "Search" );
        LazyLoad();
        Id( x => x.Id )
            .Column( "Id" )
            .CustomType( "Int32" )
            .Access.Property()
            .CustomSqlType( "int" )
            .Not.Nullable()
            .UnsavedValue( 0 )
            .GeneratedBy.Identity();
        ReferencesAny( x => x.Parent )
            .IdentityType< int >()
            .MetaType< string >()
            .EntityTypeColumn( "ParentType" )
            .EntityIdentifierColumn( "ParentId" )
            .AddMetaValue< Element >( "E" )
            .AddMetaValue< Search >( "S" );
        HasMany( x => x.Searches )
            .Table( "Search" )
            .KeyColumn( "ParentId" )
            .Where( "ParentType = 'S'" )
            .Cascade.All()
            .LazyLoad();
    }
} 
```

如前所述，模型看起来是正确的，Element 表包含 1 个 ID 列，Search 表包含一个 ID 列，如果父对象是 Element 对象，则 ParentType 列设置为“E”，如果parent 是一个 Search 对象，最后是一个 ParentId，它引用了 parent 的 ID。

不知何故，这似乎很好并且很有意义（至少对我来说：P）。

这是数据库中的数据示例：

```
Element table
Id
-----------
1
2

Search table
Id          ParentType ParentId
----------- ---------- -----------
1           E          1
2           S          1
3           E          2
4           S          3
5           S          3 
```

所以这里我的第一个元素对象包含一个包含 1 个搜索对象的搜索对象，第二个元素对象包含一个包含 2 个搜索对象的搜索对象。

现在的问题是，当我检索数据时，第一个 Element 对象是正确的，但第二个不是。它的 Search 对象的 ID 为 2，实际上它应该是 3（第二个 Search 对象的 ID，其父对象在数据库中标记为 E）。

我的猜测是我应该以某种方式将 .Where("ParentType = 'E'" ) 添加到 Element 对象映射中，就像我为 Search 对象所做的那样，但是 HasOne() 方法上没有 .Where() 方法（因为拥有一个通常没有意义）。所以我真的不知道如何指定它...... :(

我希望这足够清楚，因为问题总是很难解释 :) 任何帮助将不胜感激，因为这对我来说是一个非常重要的项目 :(

谢谢大家！

塞布:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:30:08.537

HasOne 没有考虑 ReferenceAny 的 Any 部分，因此它根本不能在这里使用。我看到的唯一选项是将搜索的私有集合映射到适当的位置，`ParentType = 'E'`并处理转换为属性中的引用`Search`。

# select - TSQL 转换选择语句以使用连接更新

> ID：11885525
> 
> 赞同：0
> 
> 时间：2012-08-09T14:20:37.680
> 
> 标签：select, join

我有以下选择语句：

```
SELECT  projectid,documentid,revisionno,configurationid,variable45,
        ISNULL(Variable45, (SELECT TOP 1 variable45 FROM pivot_table WHERE documentid = t.documentid and projectid=t.projectid
        and configurationid=t.configurationid and cast(revisionno as int) < cast(t.revisionno as int) AND Variable45 is NOT NULL 
        ORDER BY projectid desc,documentid desc ,revisionno desc,configurationid desc)) as NewCol
FROM    pivot_table t; 
```

我尝试通过以下方式转换为更新，但我得到了错误的记录更新。谁能帮我解决我的问题：

```
UPdate PIVOT_TABLE
set variable45 = ((SELECT TOP 1 variable45 FROM pivot_table t WHERE t.documentid = documentid and t.projectid=projectid
        and t.configurationid=configurationid and cast(t.revisionno as int) < cast(revisionno as int) AND Variable45 is NOT NULL 
        ORDER BY revisionno desc)) where Variable45 is NULL; 
```

数据库：SQLExpress2008。

请指教。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T15:31:25.823

好的，我想通了：

```
 UPdate pt
    set pt.variable45 = ((SELECT TOP 1 t.variable45 FROM pivot_table t WHERE 
t.documentid = pt.documentid and t.projectid=pt.projectid and t.configurationid=pt.configurationid and cast(t.revisionno as int) < cast(pt.revisionno as int) AND t.variable45 is NOT NULL 
            ORDER BY revisionno desc)) from PIVOT_TABLE pt where pt.variable45 is NULL; 
```

# backbone.js - 如何处理具有级别列表属性的 Backbone.js 集合

> ID：11885527
> 
> 赞同：0
> 
> 时间：2012-08-09T14:20:39.167
> 
> 标签：backbone.js, backbone.js-collections

我想通过 Backbone.js 模型概念找到使用以下 JSON（信号值）的最佳方法：

```
{
    frequency: "1/1",
    items: [
        {
            value: 1,
            quality: 5
        },
        {
            value: 0.5,
            quality: 5
        }
        ]
} 
```

到目前为止，我只看到 Backbone.Collections 可用于没有级别列表属性（例如：频率）的对象，如下所示：

```
[
    {
        value: 1,
        quality: 5
    },
    {
        value: 0.5,
        quality: 5
    }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:48:47.477

您可以使 items 数组成为自己的集合。

这是一些示例代码

```
SignalItem = Backbone.Model.extend({
  defaults: {
    value: 0,
    quantity: 0
  }
});

SignalItemCollection = Backbone.Collection.extend({
  model: SignalItem
});

Signal = Backbone.Model.extend({
  initialize: function() {
    // convert the items JSON array into a Backbone collection
    this.get('items') = new SignalItemCollection(this.get('items'));
  }
});

var signal = new Signal({
  frequency: 1,
  items: [
    {
      value: 1,
      quality: 5
    }, {
      value: 2,
      quality: 3
    }
   ]
});

signal.get('frequency') === 1;
signal.get('items').models[0].get('quality') === 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:11:25.207

您可以为每个信号使用主干模型，然后对集合中的模型进行分组并具有“频率”的集合属性。像这样：

```
var Model_Signal = Backbone.Model.extend({

   defaults: {
      value: 0,
      quality: 0
   },

   initialize: function(){

      // Do some initializing.
      // you'll probably want to set the
      // model's defaults here.

   }

});

var Collection_Signals = Backbone.Collection.extend({

   frequency: null,

   model: Model_Signal,

   calculateFrequency: function(){

      // You'll probably want to do this every time you
      // add a new signal to this collection.

   }

}); 
```

然后您可以遍历您的 JSON 对象，实例化新模型并将它们添加到集合中。

```
var jsonObject = {
   frequency: "1/1",
   items: [
    {
        value: 1,
        quality: 5
    },
    {
        value: 0.5,
        quality: 5
    }
    ]
};

// Instantiate the collection
var signalCollection = new Collection_Signals();

_.each(jsonObject.items, function(item){

  var signalModel = new Model_Signal({value: item.value, quality: item.quality});
  signalCollection.add(signalModel);
  signalCollection.calculateFrequency();

}); 
```

# javascript - EmberJS - 创建对象后添加绑定

> ID：11885532
> 
> 赞同：1
> 
> 时间：2012-08-09T14:20:49.530
> 
> 标签：javascript, model-view-controller, ember.js

我正在尝试将对象的属性绑定到绑定在 ArrayController 中的属性。我希望所有这些都发生在对象已经创建并添加到 ArrayController 之后。

[这是一个关于我想要实现的简化示例的小提琴](http://jsfiddle.net/EjDFS/7/)。

我想知道我是否有范围问题 - 我已经尝试绑定到全局路径（即'App.objectTwoController.objectOne.param3'）以将绑定设置为。我也尝试直接绑定到 objectOneController （这不是我想要做的，但只是为了看看它是否有效），但仍然没有用。

关于我做错了什么的任何想法？提前感谢您花时间查看这篇文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:10:26.417

所以在下面的例子中（我稍微简化了一点，但同样的原则适用）......下面的方法最终在“objectTwo”而不是“objectTwoController”上寻找“objectOne”。

```
var objectTwoController: Em.Object.create({
    objectOneBinding: 'App.objectOne',
    objectTwoBinding: 'App.objectTwo',

    _onSomething: function() {
        var objectTwo = this.get('objectTwo'); 
        objectTwo.bind('param2', Em.Binding.from('objectOne.param3'));
    }.observes('something')
}); 
```

问题是你不能在两个不相关的对象之间绑定。如果您查看 ember 中的“连接”方法，您会发现它只需要一个参考对象 (this) 来观察两条路径（这对于您的示例中的 9.8.1 和 ember-pre-1.0 版本都是如此） .

您几乎没有选择（至少我能想到）。

**首先**：您可以告诉对象彼此，然后相对路径将开始工作。这实际上会给“objectTwo”一个对象，以便在绑定路径时引用。

```
 ....
        objectTwo.set('objectOne', this.get('objectOne');
    .... 
```

**第二**：您可以添加自己的[观察者/计算属性](http://emberjs.com/documentation/#toc_computed-properties-setters)，这将使两者保持同步（但它有点冗长）。你也许能够完成一些非常漂亮的事情，但它可能很困难。甚至可以编写自己的绑定（如变换），以允许您绑定两个不相关的对象，只要您有两个对象的路径即可。

```
 _param3: function(){
        this.setPath('objectTwo.param2', this.getPath('objectOne.param3');
    }.observes('objectOne.param3') 
```

您可以动态制作这些，而无需预先定义它们......

**第三**：简单地让它们成为全局路径；“App.objectOneController.content.param3”应该作为您的绑定“_from”路径（但不确定这对您的实际应用程序有多大帮助，因为对于较大的应用程序，我个人不喜欢全局的一切）。

**EDIT**: When setting the full paths. Make sure you wait until end of the current cycle before fetching the value because bindings don't always update until everything is flushed. Meaning, your alert message needs to be wrapped in Ember.run.next or you will not see the change.

# android - 带对话框的时间选择器

> ID：11885534
> 
> 赞同：0
> 
> 时间：2012-08-09T14:20:53.753
> 
> 标签：android, dialog, timepicker

您好我需要设置一个时间选择器的对话框并返回用户声明的结果。

现在我有那个代码

```
.
.
.
showDialog(0);
.
.
.

@Override
    protected Dialog onCreateDialog(int id) {

              return  new TimePickerDialog(this, mTimeSetListener, hour, minute,
                        false);

    } 
```

该代码设置了时间选择器的对话框，但我还没有找到返回结果的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:37:33.107

```
 int StartHour;
           int StartMinute;
           TimePickerDialog.OnTimeSetListener mTimeSetListenerStart = new TimePickerDialog.OnTimeSetListener() {

            @Override
            public void onTimeSet(TimePicker view, int hourOfDay, int minutex) {
                // TODO Auto-generated method stub
            StartHour = hourOfDay;
            StartMinute = minutex;
            Log.d("TimeStart", StartHour+" "+StartMinute);
            } }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:23:36.753

```
protected Dialog onCreateDialog(int id) {
  if (id == DIALOG_TIME) {
    TimePickerDialog tpd = new TimePickerDialog(this, myCallBack, myHour, myMinute, true);
    return tpd;
  }
  return super.onCreateDialog(id);
}

OnTimeSetListener myCallBack = new OnTimeSetListener() {
public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
  myHour = hourOfDay;
  myMinute = minute; 
  tvTime.setText("Time is " + myHour + " hours " + myMinute + " minutes");
} 
```

};

# android - 拦截电话以显示联系信息

> ID：11885536
> 
> 赞同：7
> 
> 时间：2012-08-09T14:21:02.100
> 
> 标签：android

这个问题更像是一个“是否可能”的问题。

在显示来电者的身份时，Android 是否可以使用与应用程序不同的联系人列表？

因此，例如，如果一个人打电话并且他们的身份在应用程序联系人列表中，但不在内部设备联系人列表中，我想让在应用程序联系人列表中找到的 id 显示在来电的来电者 id 上。

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T12:34:22.663

我找到了我正在寻找的解决方案。我最终只是使用通知来显示谁在打电话。我希望这可以帮助其他人寻找一个好的解决方案！

```
StateListener yourListener = new StateListener();
TelephonyManager yourmanager =(TelephonyManager)getSystemService(TELEPHONY_SERVICE);
    yourmanager.listen(yourListener, PhoneStateListener.LISTEN_CALL_STATE);

class StateListener extends PhoneStateListener{
    @Override
    public void onCallStateChanged(int state, String incomingNumber) {
        super.onCallStateChanged(state, incomingNumber);
        switch(state){
            case TelephonyManager.CALL_STATE_RINGING:
                //do what you want with the incoming number here:
                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:

                break;
            case TelephonyManager.CALL_STATE_IDLE:

                break;

        }
    };

public void onDestroy() {

}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T15:17:49.810

我认为广播接收器是可能的。这里有一些类似的问题[Call block](https://stackoverflow.com/q/1083527/1050058)， [完全控制手机，是否有可能和另一个名为](https://stackoverflow.com/q/7121508/1050058)[Intent Intercept](https://github.com/intrications/intent-intercept)的开源应用程序。我给你呼叫阻止链接，这样你就可以捕捉号码，直接到你的应用程序并阻止普通拨号器

# c# - Directory.CreateDirectory(Path) 不创建给定文件夹

> ID：11885537
> 
> 赞同：0
> 
> 时间：2012-08-09T14:21:03.930
> 
> 标签：c#, asp.net

此代码在 ASP 页中运行。

```
 try 
    {
        DirectoryInfo di = Directory.CreateDirectory(destDir);
        DirectoryInfo diOut = Directory.CreateDirectory(destDir + "\\output");

        if (di.Exists) 
        {
            ErrorLog(Server.MapPath("Logs/ErrorLog"),"created or existing destDir: " + destDir );
        } 

        if (diOut.Exists) 
        {
           ErrorLog(Server.MapPath("Logs/ErrorLog"),"created or existing outputDir:" + destDir +"\\output" );
        }

    } 
    catch(Exception e)
    {
        ErrorLog(Server.MapPath("Logs/ErrorLog"),"caught error: " + e.ToString() );
    } 
```

dst dir 的值为：

> d:\foo-server\THE\jobgenerator\xmlinput\tmp_JobGenerator_09_08_201216_09_21_718374_THE

父文件夹`d:\foo-server\THE\jobgenerator\xmlinput`已存在。

日志输出表明 destDir 已创建，但是当我检查文件夹时，我可以看到没有创建任何内容。该站点在 IIS 上运行，配置的用户对父文件夹具有完全权限。

我不明白为什么即使没有创建文件夹， di.Exists 也会导致 true。也不会抛出异常。

谢谢您的帮助。

# objective-c - Obj-C MD5 Hash 不匹配 Java / SQL

> ID：11885538
> 
> 赞同：8
> 
> 时间：2012-08-09T14:21:05.317
> 
> 标签：objective-c, cocoa, hash, character-encoding, md5

我正在尝试获取一个 unicode 字符串，通过 MD5 哈希函数将其传递，并将结果编码为 Base64。我需要 MSSQL、Java 和 Obj-C 来返回相同的结果。我同意 MSSQL 和 Java，但使用 Obj-C 无法获得相同的结果。

### Java 代码（返回“SC0RfYWqWLK/YNpIDdGi8w==”）

```
String input = "chinese lorem ipsum 槏殟殠巘斖蘱飣偓啅撱簻臗";
MessageDigest md = MessageDigest.getInstance("MD5");
byte[] inputBytes = input.getBytes("UTF-16LE");
md.update(input.getBytes("UTF-16LE"));
byte[] enc = md.digest();
String md5Sum = new sun.misc.BASE64Encoder().encode(enc);
System.out.println(md5Sum); 
```

### MSSQL 代码（返回“SC0RfYWqWLK/YNpIDdGi8w==”）

```
DECLARE @Str nvarchar(200)
SET @Str = N'chinese lorem ipsum 槏殟殠巘斖蘱飣偓啅撱簻臗'
DECLARE @Bin varbinary(max)
SET @Bin = HashBytes('MD5', @Str);
DECLARE @Hash char(24)
SET @Hash = CAST(N'' AS XML).value('xs:base64Binary(sql:variable("@Bin"))', 'NVARCHAR(MAX)')
PRINT @Hash 
```

### Obj-C 代码（返回“vZRPxuE84whftlx697i/Ig==”）

```
NSString *input = @"chinese lorem ipsum 槏殟殠巘斖蘱飣偓啅撱簻臗";
NSData *data = [input dataUsingEncoding:NSUnicodeStringEncoding allowLossyConversion:NO];
unsigned char digest[CC_MD5_DIGEST_LENGTH];
CC_MD5(data.bytes, data.length, digest);
NSData *hashData = [[NSData alloc] initWithBytes:digest length: sizeof digest];
NSString *base64 = [hashData base64EncodedString];
NSLog(@"%@", base64); 
```

请你帮我让 Obj-C 返回与其他人相同的值。它将在 iOS 应用程序中运行。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T16:40:14.130

这里不是专家，只是猜测-您是否尝试过使用 NSUTF16LittleEndianStringEncoding 编码从字符串初始化数据？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:41:41.663

我怀疑问题可能是 Java 和 MSSQL 没有在字符串的开头添加字节顺序标记，而 dataUsingEncoding:allowLossyConversion: with NSUnicodeStringEncoding 会。

您可以通过检查 java 和 Objective-c 中实际 UTF-16 数据的大小（甚至可能是实际内容，如果这不是问题）来验证这一点。

# php - 是否可以将滚动条系在一起？

> ID：11885541
> 
> 赞同：3
> 
> 时间：2012-08-09T14:21:16.180
> 
> 标签：php, javascript, jquery, html

我正在尝试在由黑线分隔的模态中打开 2 个图像，并且每个单独的窗口都有一个滚动条，并且溢出设置为滚动。每个窗口中的图像都是相同的，只是它们已通过不同的算法从原始形式放大（不要担心任何这些，这只是为了让您了解目的）。我想要它，这样当您比较溢出的图像时，滚动条会相互连接或绑定，以便当您在一个窗口上滚动时，它会在另一个窗口上滚动。

如果您需要一个特定的代码示例，我稍后会提供一个，因为我现在只想了解这可能是如何实现的。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:26:57.343

基本上，您需要将`onscroll`两个滚动元素的事件挂钩，并在每个元素中将另一个元素设置为`scrollTop`您滚动到的内容。此外，请确保在前后设置和清除布尔值，以免相互递归。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:26:43.447

您可以使用 jQuery 侦听滚动事件，然后在第二个容器上执行相同的滚动。但是，如果图像大小不同，您可能必须使用一些逻辑。

[这](http://api.jquery.com/scroll/)应该可以帮助您入门。

[这是一个例子。](http://jsfiddle.net/r4EjQ/)

**编辑**

出于存档目的，我提供了示例中使用的 jQuery。

```
$( '#one' ).scroll( function() {
    $( '#two' ).scrollTop( $( '#one' ).scrollTop() );
} ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T14:28:09.600

我想`object.onscroll`每张照片都必须使用一个事件。只需将scoll值赋给当前图片后面的另一张图片

```
object.addEventListener ("scroll", handler, useSomething);
object.attachEvent ("onscroll", handler); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T14:23:46.227

使用 iframe - 将两张图片放入文件中以在 iframe 中显示，然后您只需要一个滚动条。

# c# - 验证网站凭据

> ID：11885547
> 
> 赞同：2
> 
> 时间：2012-08-09T14:21:43.900
> 
> 标签：c#, validation, login

我有一个网站：“https://blahblah.com”

为了对其进行身份验证，我这样做（效果很好）：

```
NetworkCredential credentials = new NetworkCredential();
            credentials.UserName = AppVars.Username;
            credentials.Password = AppVars.Password;

            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            request.Credentials = credentials;
            //..... 
```

但是，如果我想添加登录功能，我该如何去验证用户名和密码呢？

更新代码：

```
private void btnLogIn_Click(object sender, EventArgs e)
        {
            Properties.Settings.Default.Username = txtUserName.Text;
            Properties.Settings.Default.Password = txtPassword.Text;

            using (PrincipalContext pc = new PrincipalContext( ContextType.Domain,  AppVars.ixLibraryConnectionTestURL))
            {
                try
                {
                    bool isValid = false;
                    isValid = pc.ValidateCredentials(AppVars.Username, AppVars.Password);
                    if (isValid == true)
                    {
                        //just testing
                        MessageBox.Show("is valid");
                    }
                    else
                    {
                        //just testing
                        MessageBox.Show("is not valid");
                    }
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                } 
            }    
        } 
```

域名看起来像这样：[https ://xxxxxx-services.zzz999.org/pqg_4/lib/api/sdo/rest/v1](https://xxxxxx-services.zzz999.org/pqg_4/lib/api/sdo/rest/v1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:32:26.063

使用：System.DirectoryServices.AccountManagement 命名空间

```
// create a "principal context" - e.g. your domain (could be machine, too) 

using(PrincipalContext pc = new PrincipalContext(ContextType.Domain, "YOURDOMAIN")) 
{     

// validate the credentials    
 bool isValid = pc.ValidateCredentials("myuser", "mypassword"); 
} 
```

你可以在这里读更多关于它的内容：

[http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

# tabs - 在标签末尾添加图像的问题

> ID：11885555
> 
> 赞同：0
> 
> 时间：2012-08-09T14:22:04.650
> 
> 标签：tabs

我正在尝试将一个名为购物车的按钮添加到我的选项卡脚本中。如果单击复选框，则控制新按钮。（节目）。我很困惑为什么图像没有显示。任何答案都会有所帮助。

谢谢你。复制代码

```
$(function() {
   var $tabs = $('#tabs').tabs({cookie:{expires:1}});

   $(".ui-tabs-panel").each(function(i){
      var totalSize = $(".ui-tabs-panel").size() - 1;

      var prevImage = "custom/images/prev.png";
      var nextImage = "custom/images/next.png";
      var atcImage = "custom/images/cart.jpg";

      if (i != 0) {
         prev = i;
         $(this).append("<img href='#' class='prev-tab mover' rel='" + prev + "' src='" + prevImage + "'></img>");
      }
      if (i != totalSize) {
         next = i + 2;
         $(this).append("<img href='#' class='next-tab mover' rel='" + next + "' src='" + nextImage + "'></img>");
      }
  if (i > 1) {
         atc = i + 2;
         $(this).append("<img href='#' class='atc-tab mover' rel='" + next + "' src='" + atcImage + "'></img>");
      }
$('input[name=FIELD_469]').click(function() {
    if (this.checked) {
    $("img[src*=cart]").show();
}
else {
    $("img[src*=cart]").hide();
       }
   });

   $('.next-tab, .prev-tab, .atc-tab').click(function() {
      $tabs.tabs('select', $(this).attr("rel"));
      return false;
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:41:38.817

抱歉，由于我的评分较低，我无法要求澄清，但我注意到了几件事并提出了一些建议。

1) 你的选择器应该看起来像 'img[src~="cart"]' [http://api.jquery.com/attribute-contains-word-selector/](http://api.jquery.com/attribute-contains-word-selector/)

2）如果你只对那些图像使用类'mover'，你可以使用'.mover'选择器，否则只需添加新的类名。

3) 使用 console.log($("selector")) (Tools->Developer Tools->Console) 用 Google Chrome 测试你的 JQuery 对象

4）我认为它不应该是 'this' 而是 $(this)

```
$('input[name=FIELD_469]').click(function() {
    if (this.checked) {
    $("img[src*=cart]").show();
} 
```

如果建议没有帮助，请提供有关您的表单的更多信息，最好以示例查看。谢谢

# python - Python：如果字典键在一列中匹配，则另一列具有值

> ID：11885557
> 
> 赞同：0
> 
> 时间：2012-08-09T14:22:18.340
> 
> 标签：python, csv

简单的问题，我有

*   以 waternumbers 为键，驻留时间为值的字典 twodee
*   当 waternumber 与第二列（line.split()[1]）中的值匹配时，我想用字典的值覆盖 fileName2 的第 9 列中的值

我已经尝试了半个小时，发布似乎有点基本，但也许它会在未来帮助其他人。

```
twodee = dict(zip(waternumber, residencetime))

with open(fileName2, "r") as otherinput:
    try:
        for line in otherinput:
            for waternumber, residencetime in twodee.iteritems():
                line.split()[1] == waternumber
                line.split()[9] = residencetime
    except:
        pass 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:26:54.970

您没有将结果分配`.split()`给任何东西，也没有正确测试。此外，您根本不需要遍历您的 twodee dict，只需`waternumber`使用运算符测试该值是否存在于 dict 中`in`：

```
for line in otherinput:
    line = line.split()
    waternumber = int(line[1])
    if waternumber in twodee:
        line[9] = twodee[waternumber]
    print line 
```

最后但并非最不重要的一点是，您想对更改的行进行实际操作，我在这里打印它。

详细说明一下，其中包含的两行`.split()`是最终什么都不做的操作：

```
 line.split()[1] == waternumber
            line.split()[9] = residencetime 
```

第一个操作将行拆分为一个列表，选择第一个元素并测试它是否等于该`waternumber`值。这将是`True`or `False`，但您不会使用布尔值做任何事情。它只是被删除，python 不对其采取行动，并且无论如何都会执行下一行。

第二个操作再次将行拆分为列表，选择第 9 个元素，并将其替换为 的值`residencetime`。但是， 的结果`line.split()`并没有神奇地改变 的值`list`，它*返回*一个列表，在这种情况下，它不会被分配给任何东西，因此会再次被删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:30:26.753

对您的代码的一些建议：

1.  不要在不指定或多或少的特定异常时使用 try-except（仅指定您希望发生的异常）。您在 try-except 中有错误，它们都被静默传递。
2.  您的替换对您没有帮助，因为您没有以任何有意义的方式存储结果（您只需更改一些在每次下一次迭代中丢失的迭代变量
3.  `line.split()[1] == waternumber`不是赋值，而是比较，这一行被评估为表达式，结果会进一步丢失。
4.  .split() 的结果是一个全新的列表对象，其项目已更改；这个新对象进一步丢失（参见 2）。

# wpf - 当其他内容折叠时，网格内容扩展以填充容器？

> ID：11885558
> 
> 赞同：5
> 
> 时间：2012-08-09T14:22:19.760
> 
> 标签：wpf, xaml

我有一个基本布局的窗口：

```
<Window x:Class="GridStuffs.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Button Grid.Row="0" Click="TopButtonClick" VerticalAlignment="Stretch">Top</Button>
    <Button Grid.Row="1" Name="_bottomButton">Bottom</Button>
</Grid> 
```

这只是显示两个按钮“顶部”和“底部”，每个按钮在窗口中占据相等的垂直空间。

单击顶部按钮执行以下操作：

```
private void TopButtonClick(object sender, RoutedEventArgs e)
{
    if (_bottomButton.Visibility == Visibility.Collapsed)
    {
        _bottomButton.Visibility = Visibility.Visible;
    }
    else
    {
        _bottomButton.Visibility = Visibility.Collapsed;
    }
} 
```

...在折叠和可见之间切换底部按钮的可见性。

我想要发生的是在底部按钮折叠时调整顶部按钮的大小以填充窗口。实际发生的是底部按钮被隐藏，但顶部按钮保持其原始大小。

**问题**：当底部按钮折叠时，我必须做哪些 wpf/xaml 魔术才能让顶部按钮展开以填充窗口？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T14:24:34.983

将顶部设置`RowDefinition`为`Height="*"`，表示它将占用所有可用空间，将第二个设置`RowDefinition`为`Height="Auto"`表示它将占用显示其内容所需的空间，

```
<Grid.RowDefinitions>
    <RowDefinition Height="*" />
    <RowDefinition Height="Auto" />
</Grid.RowDefinitions> 
```

如果您的第二个按钮的高度未定义并且应该是网格高度的 50%，我会使用转换器将`Button.Height`属性绑定到父网格高度的一半

```
<Button Height="{Binding ActualHeight, 
    RelativeSource={RelativeSource Grid}, 
    Converter={StaticResource HalfOfValueConverter}}" /> 
```

如果您有兴趣，我实际上[在我的博客上](http://rachel53461.wordpress.com/2011/08/20/the-math-converter/)`MathConverter`发布了一个帖子，用于任何类型的具有界值的数学方程。

```
<Button Height="{Binding ActualHeight, 
    RelativeSource={RelativeSource Grid}, 
    Converter={StaticResource MathConverter},
    ConverterParameter=@VALUE/2}" /> 
```

# javascript - 在 app.locals 上设置属性和调用 app.set() 有什么区别？

> ID：11885562
> 
> 赞同：22
> 
> 时间：2012-08-09T14:22:37.920
> 
> 标签：javascript, node.js, express

我正在学习 Express - 并考虑保存配置样式数据的最佳位置。可用的选项在 app.locals 或 app.set （设置）中......所以：

```
app.locals({ config: {
    name: 'My App',
    domain: 'myapp.com',
    viewPath: __dirname+'/views',
    viewEngine: 'jade'
    port: 3000
} });

app.set('view engine', app.locals.config.viewEngine || 'jade'); 
```

这也将允许我在我的观点中使用以下内容：

```
<title>#{config.name}</title> // <title>My App</title> 
```

或者替代方法是像这样使用 app.set ：

```
app.set('name', 'My App');
app.set('domain', 'myapp.com'); 
```

...然后在视图中使用它：

```
<title>#{settings.name}</title> 
```

我知道这两种方法都有效，但我正在努力确定哪种方法更好用。目前我倾向于使用 app.locals，带有额外的“app”命名空间，因为我相信如果使用 app.set，与未来更新和其他模块发生冲突的可能性会更小。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-12-18T09:17:57.413

哇，所有的答案都是错误的，所以让我试一试。尽管其他人说**app.local 参数与使用 app.set() 不同**。手表，

```
app.js
  app.locals.foo = 'bar';
  app.set('baz', 'quz');  

index.jade
  block content                            
    dl                                     
      dt app.locals.foo = 'bar';            
      dd \#{settings.foo} = #{settings.foo}
      dd \#{foo} = #{foo}                  

      dt app.set('baz', 'quz')             
      dd \#{settings.baz} = #{settings.baz}
      dd \#{baz} = #{baz} 
```

如果你运行这段代码，你会看到，

```
app.locals.foo = 'bar';
  #{settings.foo} =
  #{foo} = bar
app.set('baz', 'quz')
  #{settings.baz} = quz
  #{baz} = 
```

这样做的原因是设置[`app.locals`](http://expressjs.com/api.html#app.locals)视图用作其环境的对象的属性；没有条件的视图将读取什么。相反，[app.set](http://expressjs.com/api.html#app.set)将属性设置在`app.locals.settings`. 如果您`app.locals.settings`在上面使用 进行破坏，您可以验证这一点`app.locals.settings = {}`，这将导致`#{settings.baz}`未定义。

**那你用哪个？如果不是基于响应 ( `res.set`) 或全局配置 ( `app.set`) 的应用设置，请使用直接写入`app.locals`.**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-27T15:50:11.857

的所有属性`app.locals`都在模板中可用。Using`app.set`将属性分配给`app.locals.settings`，用于全局应用程序设置并由已安装的应用程序继承。例如：

```
var app1 = express(),
    app2 = express();

app1.set('inheritable', 'foo');
app1.locals.notInheritable = 'bar';

app1.use('/mount', app2);

app2.get('inheritable') === 'foo'; // true
app2.locals.notInheritable === 'bar'; // false 
```

因此，这实际上是一个偏好问题，以及您是否正在安装应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T13:12:18.213

express [api参考](http://expressjs.com/api.html#app.locals)说：

> 默认情况下，Express 只公开一个应用程序级别的局部变量设置。

无论哪种方式都可以：

```
app.locals.title = 'My App';

app.set('title', 'My App');
// use settings.title in a view 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T15:04:50.737

很多人确实使用 locals 而不是 app.set 所以我的建议是使用它。

# gcc - 创建 CUDA 共享库和 libpthread 的问题

> ID：11885565
> 
> 赞同：2
> 
> 时间：2012-08-09T14:22:43.343
> 
> 标签：gcc, linker, cuda, pthreads, ld

我目前正在尝试使用 CUDA 例程创建一个库，但我遇到了麻烦。我将使用一个相当简单的示例来解释我的问题，我的实际库会更大。

我已经成功编写`test.cu`了一个源文件，其中包含一个`__global__` CUDA 函数和一个围绕它的包装器（用于分配和复制内存）。我还可以使用以下命令成功将此文件编译到共享库中：

```
nvcc -c test.cu -o test.o -lpthread -lrt -lcuda -lcudart -Xcompiler -fPIC
gcc -m64 -shared -fPIC -o libtest.so test.o -lpthread -lrt -lcuda -lcudart -L/opt/cuda/lib64 
```

结果`libtest.so`导出了我需要的所有符号。

我现在编译我的纯 C`main.c`并将其链接到我的库：

```
gcc -std=c99 main.c -o main -lpthread -ltest -L. 
```

这一步也是成功的，但是在执行`./main`所有被调用的 CUDA 函数时都会返回错误：

```
test.cu:17:cError(): cudaGetDeviceCount: [38] no CUDA-capable device is detected
test.cu:17:cError(): cudaMalloc: [38] no CUDA-capable device is detected
test.cu:17:cError(): cudaMemcpy: [38] no CUDA-capable device is detected
test.cu:17:cError(): cudaMemcpy: [38] no CUDA-capable device is detected
test.cu:17:cError(): cudaFree: [38] no CUDA-capable device is detected 
```

（错误消息是通过我自己的调试功能创建的）

在我最初的步骤中，我遇到了完全相同的问题，因为我是直接从 中创建可执行文件`test.cu`，因为我忘记链接 libpthread ( `-lpthread`)。但是，正如您在上面看到的，我已经将所有源文件链接到 libpthread。根据`ldd`，两者都`libtest.so`依赖`main`于 libpthread，因为它应该是。

我在 ArchLinux 上使用 CUDA 5（是的，我确实意识到它是一个测试版）和 gcc 4.6.3 和 nvidia 驱动程序版本 302.06.03。

解决这个问题的一些帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:14:16.950

这是一个简单的例子......

```
// File: test.cu
#include <stdio.h>

__global__ void myk(void)
{
    printf("Hello from thread %d block %d\n", threadIdx.x, blockIdx.x);
}

extern "C"
void entry(void)
{
    myk<<<1,1>>>();
    printf("CUDA status: %d\n", cudaDeviceSynchronize());
} 
```

编译/链接`nvcc -m64 -arch=sm_20 -o libtest.so --shared -Xcompiler -fPIC test.cu`。

```
// File: main.c
#include <stdio.h>

void entry(void);

int main(void)
{
    entry();
} 
```

编译/链接`gcc -std=c99 -o main -L. -ltest main.c`。

# html - 提交时 FireFox 和 Chrome 上的不同行为

> ID：11885571
> 
> 赞同：2
> 
> 时间：2012-08-09T14:23:21.667
> 
> 标签：html, google-chrome, hebrew

我面临着奇怪的行为。

我在 tomcat 6 上有 java web 应用程序。

jsp 文件包含希伯来字母，效果很好。（客户端和服务器端）。

最近我尝试为移动设备添加页面，我使用了 JQuery Mobile。

客户端没问题 - 我可以看到希伯来语，

但是在使用 chrome 时在服务器端 - 我无法获取希伯来字母（即使将其解码为 UTF-8/ISO-8859-8/windows-1255），

使用 Firefox 时 - 效果很好！

我尝试了与标题中那两行的所有组合：

%@page contentType="text/html; charset=windows-1255" pageEncoding="windows-1255"%

meta http-equiv="Content-Type" content="text/html; charset=UTF-8"

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:57:18.777

也许这个链接之前的SO问题可以帮助你； [Webkit：](https://stackoverflow.com/questions/5539608/webkit-encoding) 你尝试过编码吗？：

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
```

# file-upload - selenium 文件上传 win+linux

> ID：11885572
> 
> 赞同：0
> 
> 时间：2012-08-09T14:23:25.453
> 
> 标签：file-upload, selenium, cross-platform

我有一些 seleniumtest 他们包括一个文件上传

```
<tr>
    <td>type</td>
    <td>css=input.rf-fu-inp</td>
    <td>C:\seleniumtestresources\user.csv</td>
</tr> 
```

现在测试必须在 linux 环境下运行（suse 12.1）。有人知道如何定义他在两个平台上工作的路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:27:22.873

我最近遇到了同样的问题。

我在 Selenium Grid 上运行我的测试用例，我以编程方式将 / 替换为 \ ，反之亦然，具体取决于节点上运行的操作系统。

据我所知，没有适用于 win 和 linux 的格式。

# asp.net-mvc - 如何更新 MVC 用户成员资格记录？

> ID：11885578
> 
> 赞同：1
> 
> 时间：2012-08-09T14:23:37.653
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, entity-framework, asp.net-membership

我已经阅读了几篇不同的文章，但我认为它们不适用于我的场景。

我正在尝试更新附加到用户的个人资料；但是，它不会让我通过 ModelState.IsValid 部分，因为我不包含密码字段。

我想更新一些字段，但不是密码字段。那么，如何从 RegisterModel 中省略这些？

这是我的代码：

```
'
' POST: /Account/EditRegistry

<HttpPost()> _
Public Function EditRegistry(registerModel As RegisterModel) As ActionResult

    If ModelState.IsValid Then

        ' get membership from user name
        Dim user = Membership.GetUser(registerModel.UserName)

        ' get user profile
        Dim db0 = New UserProfileDbContext
        Dim profile = db0.UserProfiles.Where(Function(p) p.UserId = user.ProviderUserKey).Single()

        ' TODO: update profile
        profile.IsCompanyOwner = registerModel.IsCompanyOwner
        profile.IsBlogOwner = registerModel.IsBlogOwner
        profile.CompanyId = registerModel.Company
        profile.BlogId = registerModel.Blog
        db0.Entry(profile).State = EntityState.Modified
        db0.SaveChanges()

        ' get model changes to membership object

        ' update membership object from model

    End If

    ' If we got this far, something failed, redisplay form
    Return View(registerModel)

End Function 
```

编辑：

主意！我必须为此创建一个新模型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:09:18.600

您应该创建一个不包含该`Password`字段的新视图模型，然后让您的`EditRegistry`控制器操作将此视图模型作为参数而不是`RegisterModel`域模型。

# c# - 在 For 循环 C# 中将 int 附加到字符串或文本框名称的末尾

> ID：11885579
> 
> 赞同：1
> 
> 时间：2012-08-09T14:23:39.527
> 
> 标签：c#, string, for-loop

我有一个 C# 应用程序，其中有几个具有相同名称的文本框，除了末尾的数字从 1 开始到 19。我希望使用 for 循环通过使用数组列表。在某些情况下，arrayList 中将没有 19 个项目，因此某些文本框将未填充。这是我正在尝试做的示例代码。这可能吗？

```
 for (int count = 0; count < dogList.Count; count++)
        {
            regUKCNumTextBox[count+1].Text=(dogList[count].Attributes["id"].Value.ToString());
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:27:00.140

所以你有一组要从上到下填写的文本框？那么是的，一个集合`TextBox`似乎很合适。

如果您将`TextBox`引用粘贴在数组或 a 中`List<TextBox>`- 我不会使用 an `ArrayList`，因为它被认为已弃用`List<T>`- 那么是的，您可以这样做：

```
TextBox[] regUKCNumTextBox = new [] 
    {
         yourTextBoxA,
         yourTextBoxB,
         ...
    }; 
```

那么是的，你的逻辑是可能的，你也可以通过它的名字来查询控件，虽然这在运行时会更重 - 所以这是一个权衡。是的，在此解决方案中，您必须设置一个集合来保存您的文本框引用，但它会更高效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:29:05.507

试试这个：

（顺便说一下，我假设您使用 WinForms）

```
for (int count = 0; count < dogList.Count; count++)
{
   object foundTextBox = this.Controls.Find("nameofTextBoxes" + [count+1]);

   if (foundTextBox != null)
   {
      if (foundTextBox is TextBox)
      {
         ((TextBox)foundTextBox).Text=(dogList[count].Attributes["id"].Value.ToString());
      }
   }

} 
```

使用此代码，您试图找到`Control`您`Form`的`Controls`收藏的表格。然后你必须确保控件的`TextBox`类型。几时; 将它转换为 a`TextBox`并用它做你想做的事。在这种情况下; `Text`为属性赋值。

It would be more efficient to keep a collection of your `TextBox`es like in the solution offered by James Michael Hare

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:31:15.400

Yikes; something doesn't seem quite right with the overall design there; but looking past that, here's a quick stab at some pseudo code that might work:

```
for (int count = 0; count < dogList.Count; count++)
{
    var stringName = string.Format("myTextBoxName{0}", count);
    var ctrl = FindControl(stringName);
    if(ctrl == null) continue;
    ctrl.Text = dogList[count];
} 
```

# javascript - 使用 javascript 正则表达式替换文本中的相似字符串

> ID：11885580
> 
> 赞同：1
> 
> 时间：2012-08-09T14:23:41.663
> 
> 标签：javascript, regex, replace

我们有这样的文字：

> 这是一个测试 :rep more text more more :rep2 another text text qweqweqwe。

或者

> 这是一个测试 :rep:rep2 more text more :rep2:rep another text text qweqweqwe。（没有空格）

我们应该将 :rep 替换为 TEXT1，将 :rep2 替换为 TEXT2。

问题：当尝试使用类似的东西替换时：

```
rgobj = new RegExp(":rep","gi");
txt = txt.replace(rgobj,"TEXT1");

rgobj = new RegExp(":rep2","gi");
txt = txt.replace(rgobj,"TEXT2"); 
```

我们在它们中都得到了 TEXT1，因为 :rep2 与 :rep 和 :rep 进程相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:26:51.210

如果您的数据始终一致，请替换`:rep2`before `:rep`。

否则，您可以搜索`:rep\s`，搜索关键字后面的空格。只要确保你也更换了空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:30:32.557

~~如果您要求`:rep`始终以单词边界结尾，请在正则表达式中明确说明：~~

 ~~```
new RegExp(":rep\\b","gi"); 
```~~ 

~~（如果您不需要单词边界，则无法区分“hello I got :rep24 eggs”是什么意思——是`:rep`,`:rep2`还是`:rep24`?）~~

**编辑：**

根据*用户提供*的匹配字符串的新信息，最好的解决方案是按长度对匹配字符串进行排序，并按该顺序执行替换。这样最长的字符串首先被替换，消除了长字符串的开头部分被包含在该长字符串中的较短子字符串匹配替换的风险。因此，`:replongeststr`被替换之前`:replong`，被替换之前`:rep`。

# events - GWT 事件不适用于运行时添加的元素

> ID：11885583
> 
> 赞同：0
> 
> 时间：2012-08-09T14:23:46.057
> 
> 标签：events, gwt, element, celltable

*   我创建了一个新的 CellTable。
*   覆盖 onBrowserEvent2 以处理鼠标事件。
*   向表中添加一个新元素。

可悲的是，事件侦听器没有处理添加的元素。它仅适用于初始元素。

```
table = new CellTable<Contact>() {

    public void onBrowserEvent2(Event event) {
    Element tr = Element.as(event.getEventTarget());

    boolean gotIt = false;
    while (!gotIt && tr != null) {
        if (!tr.getTagName().equals("TR")) {
        tr = tr.getParentElement();
        continue;
        }
        gotIt = true;
    }

    if (tr == null)
        return;

    tr = Element.as(tr.getChild(1));

    Element out = DOM.createDiv();
    out.setInnerHTML("<a href='xxx'>Edit contact</a> | <a href='xxx'>Add visit plan</a> | <a href='xxx'>New visit</a>");

    switch (DOM.eventGetType(event)) {
    case Event.ONMOUSEOVER:
       tr.appendChild(out);
        break;
    case Event.ONMOUSEOUT:
       tr.getChild(1).removeFromParent();
        break;
    }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:10:32.997

如果您对它没问题，您可以单独声明所有处理程序。

您始终可以像这样直接添加鼠标处理程序：

//描述 MouseOverHandler 的代码。将此用于任何类型的 GWT 事件处理程序

```
 CellTable<String> cellTable = new CellTable<String>();

            cellTable.addDomHandler(new MouseOverHandler() {

                @Override
                public void onMouseOver(MouseOverEvent event) {
                    // Your logic
                }
            }, MouseOverEvent.getType()); 
```

那应该有帮助

# android - 如何在 Android 应用程序上获取维基百科类别

> ID：11885589
> 
> 赞同：0
> 
> 时间：2012-08-09T14:23:56.340
> 
> 标签：android, wikipedia, wikipedia-api

我现在制作 Android 应用程序。我想实现如下方法：

*   判断是否有“关键词”的文章
*   如果有，返回类别。
*   如果没有或类别是“消歧页面”，则返回null。

例如，如果关键字是“New_york”，则该方法应返回一个包含“纽约”、“前英国殖民地”、“美利坚合众国”的数组。

如果关键字是“Hogehogehoge”，则该方法应返回 null。

我该如何实施它们？有用于 PHP 等的 API，但我找不到适用于 Android 的 API。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:09:40.143

[MediaWiki API](https://www.mediawiki.org/wiki/API)不是“用于 PHP”的，它可以用于任何语言。为了帮助您创建查询，您可以使用[API Sandbox](http://en.wikipedia.org/wiki/Special%3aApiSandbox)。

特别是对于您的查询，[您需要使用`query`操作 with`prop=categories`](http://en.wikipedia.org/wiki/Special%3aApiSandbox#action=query&prop=categories&format=json&clshow=!hidden&cllimit=10&titles=New_York)，最终查询看起来像（`format=xml`如果您希望以 XML 而不是 JSON 的响应，则可能使用）：

[http://en.wikipedia.org/w/api.php?action=query&prop=categories&format=json&clshow=!hidden&cllimit=10&titles=New+York](http://en.wikipedia.org/w/api.php?action=query&prop=categories&format=json&clshow=!hidden&cllimit=10&titles=New+York)

也有可能有一些适用于 Android 的库可以让您更轻松，但我无法帮助您。

# url - OSGi/Equinox：如何将资源 URI 转换为包名称？

> ID：11885591
> 
> 赞同：2
> 
> 时间：2012-08-09T14:24:00.203
> 
> 标签：url, classpath, osgi, equinox

在类路径上查找资源后，我得到了这个 URL：

```
bundleresource://23.fwk1186515174/com/google/inject/Injector.class 
```

如何找出提供资源的捆绑包？

**[编辑]**我正在尝试调试在类路径上有重复类的问题。这是我正在使用的代码：

```
private void debugClassPath() {
    String resource = "com/google/inject/Injector.class";
    try {
        Enumeration<URL> urls = getClass().getClassLoader().getResources( resource );

        while( urls.hasMoreElements() ) {
            System.out.println(urls.nextElement());
        }

        System.out.println("---");

        urls = XtextRunner.class.getClassLoader().getResources( resource );

        while( urls.hasMoreElements() ) {
            System.out.println(urls.nextElement());
        }
    } catch( IOException e ) {
        e.printStackTrace();
    }
} 
```

这给了我几个 URL `com.google.inject.Injector`，我想弄清楚哪些包将它们添加到类路径中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:10:18.477

一种 hacky 方法是解析 URL，但这仅在 Equinox 上运行时有效。根据[BundleResourceHandler](http://grepcode.com/file_/repository.grepcode.com/java/eclipse.org/3.7/org.eclipse/osgi/3.7.0/org/eclipse/osgi/framework/internal/core/BundleResourceHandler.java/?v=source)的来源，URL 方案右侧的整数 ('23') 是捆绑 ID。[如果您有 BundleContext（检查您的 Activator），那么您可以使用getBundle(long)](http://www.osgi.org/javadoc/r2/org/osgi/framework/BundleContext.html#getBundle%28long%29)找到具有该 ID 的捆绑包。

但是，可能有更好的方法来做到这一点。你如何在类路径中查找资源？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:04:24.003

没有标准的方法可以做到这一点。但是，对于 Equinox，通过查看 URL 处理程序如何在权限中对其进行编码，有一种特定于实现的方式（可能会在未来的版本中更改，因为它是一种特定于实现的方式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T07:32:20.783

OSGi url 保证层次结构。因此，只需将资源替换`com/google/inject/Injector.class`为`META-INF/MANIFEST.MF`清单（或文本文件）并将其读取。那里的信息告诉您正在查看哪个捆绑包。

重复的类只能发生在被认为是不好的（非常糟糕的恕我直言）做法的拆分包中。在 OSGi 中，拆分包需要`Require-Bundle`重新导出或`Bundle-Classpath`. 没有这些，生活会轻松很多......

# netbeans - 在 sourceforge 上提交整个 Netbeans 项目

> ID：11885595
> 
> 赞同：1
> 
> 时间：2012-08-09T14:24:12.053
> 
> 标签：netbeans, sourceforge

我在 NetBeans 中有自己的 PHP 项目。之后我注册了一个 sourceforge 帐户。现在我将使用 sf 的 git 存储库对我的代码进行版本控制。我现在需要的是使用 netbeans 将整个项目发送到存储库中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T00:49:27.663

假设您使用的是 SourceForge 的最新平台，即 Allura，您首先需要在 SourceForge 上创建一个 Git 存储库。

（您可能在第一次创建项目时已经这样做了）
以下是在其上创建 git 存储库的步骤。
1) 登录 SourceForge
2) 转到管理员
3) 单击工具
4) 单击 Git。此时，它会询问标签和挂载点。输入这些信息。完成后，它应该使用您提供的任何标签名称在顶部菜单上创建一个新选项卡。假设您现在将其命名为“代码”。
5) 点击“代码”标签，它会显示您按照指令推送代码。

```
// First time using Git
cd <your_local_project_dir>
git init
git commit -a -m 'Initial commit'
git remote add origin ssh://<your_sourceforge_username>@git.code.sf.net/p/<your_project_name_on_sourceforge>/<mount_point_name_you_provide_in_step4>
git push origin master

// Existing Repository
cd <your_local_project_dir>
git remote add origin ssh://<your_sourceforge_username>@git.code.sf.net/p/<your_project_name_on_sourceforge>/<mount_point_name_you_provide_in_step4>
git push origin master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:28:43.633

我想你可能想看看 NetBeans 的 Git 支持； [http://netbeans.org/kb/docs/ide/git.html#initialize](http://netbeans.org/kb/docs/ide/git.html#initialize)
它内置在 IDE 中，因此无需安装插件。

# knockout.js - 具有淘汰赛的主/详细信息

> ID：11885598
> 
> 赞同：4
> 
> 时间：2012-08-09T14:24:31.443
> 
> 标签：knockout.js

我有一个 observableArray 的 Knockout 模型。我希望能够显示所选项目的详细信息并将文本框等绑定到该淘汰项目的模型，可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T15:24:17.410

您需要创建一个 observableArray 来存储项目，并将它们绑定到一些 html 以显示它们。然后使用单击绑定（或其他事件）来捕获用户选择的事件。然后在这种情况下，您可以设置所选项目。

这是一个证明这一点的小提琴。

[http://jsfiddle.net/johnpapa/3DPvU/](http://jsfiddle.net/johnpapa/3DPvU/)

HTML 可能看起来像这样：

```
<ul data-bind="foreach: people">
<li data-bind="text:name, click:$parent.selectPerson"></li>
</ul>

<div data-bind="with:selectedPerson">
<span data-bind="text:id"></span>
<input data-bind="value:name"/>
<input data-bind="value:country"/>
</div>​ 
```

# android - 使用开源Android Horizo ntalListView，layout_height="wrap_content" 出现意外结果

> ID：11885602
> 
> 赞同：0
> 
> 时间：2012-08-09T14:24:49.837
> 
> 标签：android, listview

使用[https://github.com/vieux/Android-Horizo​​ntal-ListView](https://github.com/vieux/Android-Horizontal-ListView)

所以我想制作一个具有多个水平列表视图的屏幕。这是我的 XML 文件。

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:background="#fff"
  >

  <com.devsmart.android.ui.HorizontalListView
    android:id="@+id/listView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#fff"
  />

  <com.devsmart.android.ui.HorizontalListView
    android:id="@+id/listView2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#fff"
  />
</LinearLayout> 
```

唯一的问题是当我为高度执行 wrap_content 时，它会将高度注册为整个屏幕。我通过将第一个列表视图的高度更改为设定的像素量来测试以确保我的第二个列表视图在那里，并且两者都在那里。

我在 github 上读到这是一个已知问题，但它说它已修复......我想我错过了什么？

如果有人对此有任何经验，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:23:20.407

尝试这个。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#fff"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#fff"
    android:orientation="vertical" >

    <com.devsmart.android.ui.HorizontalListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#fff" />

    <com.devsmart.android.ui.HorizontalListView
        android:id="@+id/listView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#fff" />
</LinearLayout> 
```

如果您没有得到解决方案，请重播。

# javascript - 如何在 express js 中使用极乐视图引擎而不是玉？

> ID：11885603
> 
> 赞同：0
> 
> 时间：2012-08-09T14:24:56.253
> 
> 标签：javascript, node.js, express

我如何在 express js 中使用 bliss 视图引擎而不是通常的玉引擎。

我已经在 stackoverflow 找到了一篇文章，但这似乎是针对 express.js 的旧版本。我正在使用 3.x 版本。

特别是我想知道如何安装 bliss 并遵循这一点。我如何在 express.js 中创建一个项目，使用与玉不同的视图引擎？

目前我在我的项目文件夹中使用这个命令：

```
 express --sessions myapp 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:03:08.010

[consolidate.js](https://github.com/visionmedia/consolidate.js)被用作许多模板引擎和 express 之间的桥梁。如果您的引擎不受支持，请查看源代码。大多数引擎需要大约 15 行代码来实现。

# wpf - 如何将字符串转换为像素

> ID：11885619
> 
> 赞同：0
> 
> 时间：2012-08-09T14:25:38.043
> 
> 标签：wpf, textblock

我有 TextBlock，其中包含一些 Text="AAAAAAA"、FontFamily="Arial"、FontSize="16"。如何将文本转换为 WPF 像素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:34:06.690

您可以[`FormattedText`](http://msdn.microsoft.com/en-us/library/system.windows.media.formattedtext.aspx)用于测量：

```
FormattedText formattedText = new FormattedText(
    "AAAAAAAA",
    CultureInfo.CurrentCulture,
    FlowDirection.LeftToRight,
    new Typeface("Arial"), 16, Brushes.Black
);
MessageBox.Show(formattedText.Width.ToString()); 
```

# opencv - cvHaarDetectObjects 内存泄漏

> ID：11885625
> 
> 赞同：0
> 
> 时间：2012-08-09T14:26:22.887
> 
> 标签：opencv, memory-leaks, face-detection

我正在使用函数 cvHaarDetectObjects 进行人脸检测，并且使用 valgrind 进行内存泄漏检查，即使我认为我释放了所有内存。我真的不知道如何修复内存泄漏。这是我的代码：

```
int Detect(MyImage* Img,MyImage **Face)
{

  Char* Cascade_name = new Char[1024];
  strcpy(Cascade_name,"/usr/share/OpenCV/haarcascades/haarcascade_frontalface_alt.xml");

    // Create memory for calculations
    CvMemStorage* Storage = 0;

    // Create a new Haar classifier
    CvHaarClassifierCascade* Cascade = 0;

    int Scale = 1;

    // Create two points to represent the face locations
    CvPoint pt1, pt2;
    int Loop;

    // Load the HaarClassifierCascade
    Cascade = (CvHaarClassifierCascade*)cvLoad( Cascade_name, 0, 0, 0 );

    // Check whether the cascade has loaded successfully. Else report and error and quit
    if( !Cascade )
    {
        fprintf( stderr, "ERROR: Could not load classifier cascade\n" );
        exit(0);
    }

    // Allocate the memory storage
    Storage = cvCreateMemStorage(0);

    // Clear the memory storage which was used before
    cvClearMemStorage( Storage );

    // Find whether the cascade is loaded, to find the faces. If yes, then:
    if( Cascade )
    {
        // There can be more than one face in an image. So create a growable sequence of faces.
        // Detect the objects and store them in the sequence

      CvSeq* Faces = cvHaarDetectObjects( Img->Image(), Cascade, Storage,
                                            1.1, 2, CV_HAAR_DO_CANNY_PRUNING,
                                            cvSize(40, 40) );

        int MaxWidth = 0;
        int MaxHeight = 0;
        if(Faces->total == 0)
        {
           cout<<"There is no face."<<endl;
           return 1;
        }

       //just get the first face 
        for( Loop = 0; Loop <1; Loop++ )
        {
           // Create a new rectangle for drawing the face
            CvRect* Rect = (CvRect*)cvGetSeqElem( Faces, Loop );

            // Find the dimensions of the face,and scale it if necessary
            pt1.x = Rect->x*Scale;
            pt2.x = (Rect->x+Rect->width)*Scale;
            if(Rect->width>MaxWidth) MaxWidth = Rect->width;
            pt1.y = Rect->y*Scale;
            pt2.y = (Rect->y+Rect->height)*Scale;
            if(Rect->height>MaxHeight) MaxHeight = Rect->height;
            cvSetImageROI( Img->Image(), *Rect );

            MyImage* Dest = new MyImage(cvGetSize(Img->Image()),IPL_DEPTH_8U, 1); 

            cvCvtColor( Img->Image(), Dest->Image(), CV_RGB2GRAY );

            MyImage* Equalized = new MyImage(cvGetSize(Dest->Image()), IPL_DEPTH_8U, 1);

            // Perform histogram equalization
            cvEqualizeHist( Dest->Image(), Equalized->Image());
            (*Face) = new MyImage(Equalized->Image());

            if(Equalized)
               delete Equalized;
            Equalized = NULL;

            if(Dest)
               delete Dest;
            Dest = NULL;

            cvResetImageROI(Img->Image());

        }

        if(Cascade)
        {
           cvReleaseHaarClassifierCascade( &Cascade ); 
           delete Cascade;
           Cascade = NULL;
        }

        if(Storage)
        {
           cvClearMemStorage(Storage);

           cvReleaseMemStorage(&Storage);
           delete Storage;
           Storage = NULL;
        }
        if(Cascade_name)
           delete [] Cascade_name;
        Cascade_name = NULL;
    return 0;
} 
```

在代码中，`MyImage`是一个 IplImage 的包装类，其中包含`IplImage* p`一个成员。如果构造函数将 a`IplImage* ppara`作为参数，则该成员将使用and`p`创建内存。如果它以大小、深度和通道作为参数，那么只做。然后析构函数做。该函数的调用如下：`cvCreateImage(cvGetSize(ppara), ppara->depth, ppara->nChannels)``cvCopy(ppara, p)``cvCreateImage``cvReleaseImage(&p)``int Detect(MyImage *Img, MyImage **Face)`

```
 IplImage *Temp = cvLoadImage(ImageName);

    MyImage* Img = new MyImage(Temp);
    if(Temp)
       cvReleaseImage(&Temp);
    Temp = NULL;     
    MyImage * Face = NULL;      
    Detect(Img, &Face); 
```

完成对它们的操作后，我在以下代码中发布了 Img 和 Face。并且内存泄漏发生在 Detect 函数内部。我在 64 位操作系统 fedora 16 上使用 OpenCV 2.3.1。整个程序可以正常终止，但内存泄漏除外。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:33:50.100

我发现了为什么会有内存泄漏。原因是：

在`MyImage`类构造函数中，我传入了一个`IplImage* p`指针，并执行以下操作：

```
mp = cvCloneImage(p); 
```

where`mp`是班级的`IplImage*`成员。我在创建一个新的类对象后`MyImage`释放了`IplImage*`我传入的指针，因为这会创建一些记忆。但是，当它实际上没有新的任何内存时，我释放了类析构函数中的成员指针。它只是指向由 创造的记忆。所以由 创造的记忆并没有被释放。这就是内存泄漏的来源。`MyImage``cvCloneImage()``mp``cvCloneImage()``cvCloneImage()`

因此，我在给定`IplImage* p`作为参数传入的构造函数中执行以下操作：

```
mp = cvCreateImage(cvGetSize(p), p->depth, p->nChannels);
cvCopy(p, mp); 
```

并且释放`mp`类析构函数中的指针将释放它创建的内存。

这样做之后，肯定丢失和间接丢失的记忆都变成了0，但仍有可能丢失的记忆，valgrind将所有丢失的记录指向`cvHaarDetectObjects()`来自OpenCV的函数。而且主要是由一些“新线程”问题引起的。因此，我用谷歌搜索了这个问题，发现`valgrind`有时在涉及新线程时确实可能会丢失记忆。所以我监控了系统的内存使用情况。结果显示，由于程序重复执行，内存使用量没有增加。

这就是我发现的。

# php - 使用 mod_rewrite 时为空 $_GET 变量

> ID：11885629
> 
> 赞同：1
> 
> 时间：2012-08-09T14:26:35.890
> 
> 标签：php, apache, mod-rewrite, url-rewriting

我想通过 index.php 将所有请求传递到我的站点

所以我将 Drupal 的 .htaccess 文件中的相关文本复制到我自己的 .htaccess 文件中，因为 Drupal 将所有请求传递给 index.php

这是我的 .htaccess 文件的样子 -

```
# These rewrite rules force all requests to go through index.php
# This code is taken from the Drupal .htaccess file
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Block access to "hidden" directories whose names begin with a period. 
  # Files whose names begin with a period are protected by the FilesMatch directive
  # above.
  RewriteRule "(^|/)\." - [F]

  # Pass all requests not referring directly to files in the filesystem to
  # index.php. Clean URLs are handled in drupal_environment_initialize().
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ index.php [L]
</IfModule> 
```

mod_rewrite 对我有用，所有请求都通过 index.php。但是，当我在 Eclipse 调试器中查看 $_GET 变量时，它是空的。说我访问的地址 -

```
http://localhost/mysite/this/path 
```

我希望 $_GET 数组包含以下设置为 'this/path' 的 'q' 变量

因为如果我访问`http://localhost/mydrupalsite/node/3`，我将有一个 $_GET 数组，其中包含一个包含 'node/3' 的 'q'。

那么为什么我的 $_GET 数组是空的呢？

**编辑：** 这是我的 apache httpd.conf 文件 -

```
#
# Based upon the NCSA server configuration files originally by Rob McCool.
#
# This is the main Apache server configuration file.  It contains the
# configuration directives that give the server its instructions.
# See http://httpd.apache.org/docs/2.2/ for detailed information about
# the directives.
#
# Do NOT simply read the instructions in here without understanding
# what they do.  They're here only as hints or reminders.  If you are unsure
# consult the online docs. You have been warned.  
#
# The configuration directives are grouped into three basic sections:
#  1\. Directives that control the operation of the Apache server process as a
#     whole (the 'global environment').
#  2\. Directives that define the parameters of the 'main' or 'default' server,
#     which responds to requests that aren't handled by a virtual host.
#     These directives also provide default values for the settings
#     of all virtual hosts.
#  3\. Settings for virtual hosts, which allow Web requests to be sent to
#     different IP addresses or hostnames and have them handled by the
#     same Apache server process.
#
# Configuration and logfile names: If the filenames you specify for many
# of the server's control files begin with "/" (or "drive:/" for Win32), the
# server will use that explicit path.  If the filenames do *not* begin
# with "/", the value of ServerRoot is prepended -- so "foo.log"
# with ServerRoot set to "/etc/apache2" will be interpreted by the
# server as "/etc/apache2/foo.log".
#

### Section 1: Global Environment
#
# The directives in this section affect the overall operation of Apache,
# such as the number of concurrent requests it can handle or where it
# can find its configuration files.
#

#
# ServerRoot: The top of the directory tree under which the server's
# configuration, error, and log files are kept.
#
# NOTE!  If you intend to place this on an NFS (or otherwise network)
# mounted filesystem then please read the LockFile documentation (available
# at <URL:http://httpd.apache.org/docs/2.2/mod/mpm_common.html#lockfile>);
# you will save yourself a lot of trouble.
#
# Do NOT add a slash at the end of the directory path.
#
#ServerRoot "/etc/apache2"

#
# The accept serialization lock file MUST BE STORED ON A LOCAL DISK.
#
LockFile ${APACHE_LOCK_DIR}/accept.lock

#
# PidFile: The file in which the server should record its process
# identification number when it starts.
# This needs to be set in /etc/apache2/envvars
#
PidFile ${APACHE_PID_FILE}

#
# Timeout: The number of seconds before receives and sends time out.
#
Timeout 300

#
# KeepAlive: Whether or not to allow persistent connections (more than
# one request per connection). Set to "Off" to deactivate.
#
KeepAlive On

#
# MaxKeepAliveRequests: The maximum number of requests to allow
# during a persistent connection. Set to 0 to allow an unlimited amount.
# We recommend you leave this number high, for maximum performance.
#
MaxKeepAliveRequests 100

#
# KeepAliveTimeout: Number of seconds to wait for the next request from the
# same client on the same connection.
#
KeepAliveTimeout 15

##
## Server-Pool Size Regulation (MPM specific)
## 

# prefork MPM
# StartServers: number of server processes to start
# MinSpareServers: minimum number of server processes which are kept spare
# MaxSpareServers: maximum number of server processes which are kept spare
# MaxClients: maximum number of server processes allowed to start
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule mpm_prefork_module>
    StartServers          5
    MinSpareServers       5
    MaxSpareServers      10
    MaxClients          150
    MaxRequestsPerChild   0
</IfModule>

# worker MPM
# StartServers: initial number of server processes to start
# MinSpareThreads: minimum number of worker threads which are kept spare
# MaxSpareThreads: maximum number of worker threads which are kept spare
# ThreadLimit: ThreadsPerChild can be changed to this maximum value during a
#              graceful restart. ThreadLimit can only be changed by stopping
#              and starting Apache.
# ThreadsPerChild: constant number of worker threads in each server process
# MaxClients: maximum number of simultaneous client connections
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule mpm_worker_module>
    StartServers          2
    MinSpareThreads      25
    MaxSpareThreads      75 
    ThreadLimit          64
    ThreadsPerChild      25
    MaxClients          150
    MaxRequestsPerChild   0
</IfModule>

# event MPM
# StartServers: initial number of server processes to start
# MinSpareThreads: minimum number of worker threads which are kept spare
# MaxSpareThreads: maximum number of worker threads which are kept spare
# ThreadsPerChild: constant number of worker threads in each server process
# MaxClients: maximum number of simultaneous client connections
# MaxRequestsPerChild: maximum number of requests a server process serves
<IfModule mpm_event_module>
    StartServers          2
    MinSpareThreads      25
    MaxSpareThreads      75 
    ThreadLimit          64
    ThreadsPerChild      25
    MaxClients          150
    MaxRequestsPerChild   0
</IfModule>

# These need to be set in /etc/apache2/envvars
User ${APACHE_RUN_USER}
Group ${APACHE_RUN_GROUP}

#
# AccessFileName: The name of the file to look for in each directory
# for additional configuration directives.  See also the AllowOverride
# directive.
#

AccessFileName .htaccess

#
# The following lines prevent .htaccess and .htpasswd files from being 
# viewed by Web clients. 
#
<Files ~ "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy all
</Files>

#
# DefaultType is the default MIME type the server will use for a document
# if it cannot otherwise determine one, such as from filename extensions.
# If your server contains mostly text or HTML documents, "text/plain" is
# a good value.  If most of your content is binary, such as applications
# or images, you may want to use "application/octet-stream" instead to
# keep browsers from trying to display binary files as though they are
# text.
#
DefaultType text/plain

#
# HostnameLookups: Log the names of clients or just their IP addresses
# e.g., www.apache.org (on) or 204.62.129.132 (off).
# The default is off because it'd be overall better for the net if people
# had to knowingly turn this feature on, since enabling it means that
# each client request will result in AT LEAST one lookup request to the
# nameserver.
#
HostnameLookups Off

# ErrorLog: The location of the error log file.
# If you do not specify an ErrorLog directive within a <VirtualHost>
# container, error messages relating to that virtual host will be
# logged here.  If you *do* define an error logfile for a <VirtualHost>
# container, that host's errors will be logged there and not here.
#
ErrorLog ${APACHE_LOG_DIR}/error.log

#
# LogLevel: Control the number of messages logged to the error_log.
# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
#
LogLevel warn

# Include module configuration:
Include mods-enabled/*.load
Include mods-enabled/*.conf

# Include all the user configurations:
Include httpd.conf

# Include ports listing
Include ports.conf

#
# The following directives define some format nicknames for use with
# a CustomLog directive (see below).
# If you are behind a reverse proxy, you might want to change %h into %{X-Forwarded-For}i
#
LogFormat "%v:%p %h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" vhost_combined
LogFormat "%h %l %u %t \"%r\" %>s %O \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %O" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent

# Include of directories ignores editors' and dpkg's backup files,
# see README.Debian for details.

# Include generic snippets of statements
Include conf.d/

# Include the virtual host configurations:
Include sites-enabled/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:29:50.850

mod_rewrite 不会通过查询变量，除非您明确添加它们：

```
 RewriteRule ^ index.php?q=$1 [L] 
                           ^^--- first capture group 
```

或将`qsa`标志添加到规则中：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:19:26.237

I have stepped through Drupal's source code and found that when clean urls are enabled it gets the path from $_SERVER['REQUEST_URI'] and stores that in $_GET.

# r - R文件输入和直方图

> ID：11885630
> 
> 赞同：1
> 
> 时间：2012-08-09T14:26:41.053
> 
> 标签：r, input

我对 R 有点陌生，并试图学习，但我对如何解决我偶然发现的问题感到困惑。我正在尝试输入多个文件，以便我可以为每个文件制作一个直方图。该代码运行良好，尤其是只有一个文件，但我在输入多个文件时遇到了问题。

编辑：结束代码

```
library("scales")
library("tcltk")
File.names<-(tk_choose.files(default="", caption="Choose your files", multi=TRUE, filters=NULL, index=1))
Num.Files<-NROW(File.names)
dat <- lapply(File.names,read.table,header = TRUE)
names(dat) <- paste("f", 1:length(Num.Files), sep="")
tmp <- stack(lapply(dat,function(x) x[,14]))
require(ggplot2)
ggplot(tmp,aes(x = values)) + 
    facet_wrap(~ind) +
    geom_histogram(aes(y=..count../sum(..count..))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:48:46.857

好吧，这里有一些东西可以帮助您入门（但我不能确定它是否适合您，因为您的代码不可重现）：

```
dat <- lapply(File.names,read.table,header = TRUE)
names(dat) <- paste("f", 1:length(Num.Files), sep="")

tmp <- stack(lapply(dat,function(x) x[,14]))

require(ggplot2)
ggplot(tmp,aes(x = values)) + 
    facet_wrap(~ind) +
    geom_histogram() 
```

在此行之后丢弃您写的所有内容：

```
File.names<-(tk_choose.files(default="", caption="Choose your files", multi=TRUE, filters=NULL, index=1)) 
```

并改用上面的代码。

其他一些解释（BlueTrin 解释了第一个错误）：

```
for (i in Num.Files){
f<- read.table(File.names[i],header=TRUE)
} 
```

这将遍历您的文件名并读取每个文件名，但每次循环都会**覆盖**前一个文件。您将*只剩*下最后一个存储在`f`.

```
colnames(f) <- c(1:18)
histoCol <- c(f$'14') 
```

您不需要`c()`这里的功能。就够`1:18`了。但是作为列名的数字通常很尴尬，应该避免使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:47:12.120

```
f(Num.Files) <- paste("f", 1:length(Num.Files), sep = "") : could not find function "f<-" 
```

发生此特定错误是因为您尝试将字符串分配给函数的结果。

这应该将值加载到列表中：

```
library("lattice");
library("tcltk");
File.names<-(tk_choose.files(default="", caption="Choose your files", multi=TRUE, filters=NULL, index=1));
Num.Files<-NROW(File.names);

result_list = list();
#f(Num.Files)<-paste("f", 1:length(Num.Files), sep="");
#ls();

for (i in Num.Files) {
    full_path = File.names[i];
    short_name = basename(full_path);
    result_list[[short_name]] = read.table(full_path,header=TRUE);
} 
```

运行此程序后，您可以键入不带引号的“result_list$”，然后按 TAB 键完成。或者，您可以使用 result_list[[1]] 例如访问第一个表。

result_list 是一个列表类型的变量，它是一个支持标签索引的容器，在这种情况下是文件名。（我用短文件名替换了完整文件名，因为完整文件名在列表中有点难看，但可以随意更改）。

注意不要将 f 用作变量， f 是创建函数时的保留关键字。如果您尝试将上述程序中的 result_list 替换为 f ，它应该无法工作。

我希望这足以让您开始使用其他解决方案！

# teamcity - Team City 7.0 - 如何配置依赖于共享编译库的构建？

> ID：11885633
> 
> 赞同：0
> 
> 时间：2012-08-09T14:26:44.923
> 
> 标签：teamcity, teamcity-7.0

这是我第一次尝试在 Team City 中设置构建配置。

在 Subversion 中，所有第三方二进制文件都存储在一个名为 Applications 的单独存储库中，因为它是共享的。

所以在我的本地机器上，路径是

```
D:\Dev\SolutionRoot\WebProjectRoot 
```

其中引用了二进制文件

```
D:\Dev\Applications 
```

在 Team City 中，我有两种构建配置（一种用于构建项目 (.sln)，另一种用于检查第三方二进制文件）。

对于 web 项目构建配置，我添加了一个依赖于“获取第三方二进制文件”的工件依赖项，从“上次成功构建”和工件规则获取工件：

```
/*/.=>Applications 
```

构建尝试解决工件依赖项失败。

```
Build 'Furniture :: Build' #528 
Started 'Thu Aug 09 15:13:50 BST 2012' on 'machine name' by 'Ryan'
Finished 'Thu Aug 09 15:14:09 BST 2012' with status 'FAILURE Artifacts resolving failed'
TeamCity URL http://localhost:8111/viewLog.html?buildId=14&buildTypeId=bt2 
TeamCity server version is 7.1 (build 23907)

[15:13:50]: bt2 (18s)
[15:13:50]: Checking for changes (running for 4m:57s)
[15:13:50]: Publishing internal artifacts
[15:13:50]:  [Publishing internal artifacts] Sending build.start.properties.gz file
[15:13:50]: Clearing temporary directory: C:\TeamCity\buildAgent\temp\buildTmp
[15:13:50]: Clean build enabled: removing old files from C:\TeamCity\buildAgent\work\a3a48aff6a8b3347
[15:13:50]: Checkout directory: C:\TeamCity\buildAgent\work\a3a48aff6a8b3347
[15:13:50]: Updating sources: agent side checkout (18s)
[15:13:50]:  [Updating sources] Will perform clean checkout. Reason: Checkout directory is empty or doesn't exist (running for 4m:56s)
[15:13:50]:  [Updating sources] Cleaning C:\TeamCity\buildAgent\work\a3a48aff6a8b3347
[15:13:50]:  [Updating sources] VCS Root: Furniture (18s)
[15:13:50]:      [VCS Root: Furniture] revision: 528_2012/08/09 12:00:34 +0100
[15:14:09]: Resolving artifact dependencies
[15:14:09]:  [Resolving artifact dependencies] Failed to resolve artifact dependency <Furniture :: Get Third Party Binaries, build #2 [id 10]>: No files matched for patterns "/*/.=>Applications" from <Furniture :: Get Third Party Binaries, build #2 [id 10]> (jetbrains.buildServer.artifacts.ResolvingFailedException)
[15:14:09]:  [Resolving artifact dependencies] Failed to resolve 1 of 1 artifact dependencies
[15:14:09]: Failed to resolve 1 of 1 artifact dependencies
[15:14:09]: Publishing internal artifacts
[15:14:09]:  [Publishing internal artifacts] Sending build.finish.properties.gz file
[15:14:09]: Build failed to start. Artifacts will not be published for this build
[15:14:09]: Build finished 
```

我做对了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:28:13.867

我在您的设置中发现了几个问题。

首先要引入工件依赖项，您应该在源配置中[发布这些工件](http://confluence.jetbrains.net/display/TCD7/Build+Artifact)（在您的情况下 - 配置，检查第三方库）。

然后，您实际上不应该使用工件依赖项来签出短信。TeamCity 支持[将多个 VCS 根附加](http://confluence.jetbrains.net/display/TCD7/Configuring+VCS+Settings)到配置。

因此，在您的情况下，您可以使用带有两个根的单一配置：根与您的源，根与库。您也可以使用[结帐规则](http://confluence.jetbrains.net/display/TCD7/VCS+Checkout+Rules)来形成您需要的任何[结帐目录](http://confluence.jetbrains.net/display/TCD7/Build+Checkout+Directory)结构。

# windows - 使用 Delphi 进行增量在线备份

> ID：11885634
> 
> 赞同：0
> 
> 时间：2012-08-09T14:26:44.880
> 
> 标签：windows, delphi, backup, delphi-7

我正在尝试在我们的 Delpi 项目中实现一项新功能，该功能将帮助我们的用户在我们的服务器上进行在线备份，因此我使用 Indy FTP 组件构建了一个将上传/下载用户文件或文件夹的表单

但我需要提供进行增量备份的能力。我们的用户只能将“新”差异上传到他们的文件和文件夹。因此，例如，如果我有一个大小为 5 KB 的文本文件，并且我添加了价值额外 2 KB 的文本，那么备份将只上传那些额外的 2 KB 而不是整个 7 KB

那么有人可以推荐任何方法，算法开始吗？

谢谢你的时间

注意：我们使用的是 Delphi 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:40:38.090

有一个[Microsoft Delta Compression API](http://msdn.microsoft.com/en-us/library/bb417345.aspx)可以让您进行差异和修补，但是我之前研究过这条路线，发现使用 rSync 或 robocopy 是一条更容易的路线 - 特别是因为它很难应用补丁/更改服务器端，除非您构建自己的自定义 FTP 服务器。

# apache-flex - Datagrid 中的水平和垂直滚动条 - Flex 4

> ID：11885638
> 
> 赞同：0
> 
> 时间：2012-08-09T14:26:57.057
> 
> 标签：apache-flex, datagrid, flex4, scroll

我的代码片段粘贴在下面：

```
<s:Scroller width="100%" height="100%" >

  <s:Group width="100%" height="100%" >

     <mx:DataGrid id="corrDataGrid" width="100%" height="100%" itemRenderer="

          mx.controls.Label" minColumnWidth="60" lockedColumnCount="2">

      </mx:DataGrid>

  </s:Group>

 </s:Scroller> 
```

如果数据量很大，水平和垂直滚动条都会出现在 Datagrid 上。但是只有当我们将水平滚动条滚动到 Datagrid 的末尾时，垂直滚动条才可见。有没有什么办法即使列数很大，垂直滚动条也是可见的，用户不必水平滚动到最右边来访问垂直滚动？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:33:09.267

只需删除 Scroller 和 Group。DataGrid 有它自己的内置滚动条，其行为完全符合您的预期。无需将其包装在另一个 Scroller 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:46:08.473

正如 RIAStar 指出的那样，您不需要将 DataGrid 包装在 Scroller 中。这是因为 DataGrid 的默认外观已经有一个 Scroller 元素，该元素包装了一个 DataGroup 元素，该元素用于实际呈现数据。

现在，您想直接使用 DataGroup，您需要使用 Scroller，就像在 OP 的情况下一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:31:02.987

谢谢大家的回答，刚刚修好了。我将 Datagrid 的宽度设置为 Scroller 的宽度。

# c# - 试图在gridview上获取值

> ID：11885641
> 
> 赞同：0
> 
> 时间：2012-08-09T14:26:59.143
> 
> 标签：c#, asp.net

我正在尝试使用以下代码在 GridView 上获取值：

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    GridViewRow row = GridView1.SelectedRow;
    string Username = row.Cells[3].Text;
    string Password = row.Cells[4].Text;
    string Email = row.Cells[5].Text;
    string ID_Inscricao = row.Cells[1].Text;
    SqlConnection sqlConn = new SqlConnection(
        ConfigurationManager.ConnectionStrings["FormacaoConnectionString"].ToString());
    SqlCommand sqlComm = new SqlCommand();

    sqlComm = sqlConn.CreateCommand();
    sqlComm.Parameters.Add("@Username", SqlDbType.Text);
    sqlComm.Parameters.Add("@Password", SqlDbType.Text);
    sqlComm.Parameters.Add("@Email", SqlDbType.Text);
    sqlComm.Parameters.Add("@ID_Inscricao", SqlDbType.Text);

    sqlComm.Parameters["@Username"].Value = Username;
    sqlComm.Parameters["@Password"].Value = Password;
    sqlComm.Parameters["@Email"].Value = Email;
    sqlComm.Parameters["@ID_Inscricao"].Value = ID_Inscricao;
    string sql = "INSERT INTO Utilizadores " +
        "(Username, Password, Email,ID_Inscricao) " +
        "VALUES (@Username, @Password, @Email, @ID_Inscricao)";
    sqlComm.CommandText = sql;
    sqlConn.Open();
    sqlComm.ExecuteNonQuery();
    sqlConn.Close();
} 
```

所以，问题是我无法从 GridView 中获取值，而是得到“NullReferenceException 未被用户代码处理”。谁能告诉我我做错了什么？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:33:28.997

每行看起来像这样：

```
sqlComm.Parameters["@Username"].Value = Username; 
```

要求该参数实际存在于命令对象上，但您已将这些行注释掉。放回其中之一：

```
sqlComm.Parameters.Add("@Username", SqlDbType.Text); 
```

对于您为其设置值的每个参数。

* * *

**评论后编辑**

基于这条线导致`NullReferenceException`：

```
string Username = row.Cells[3].Text; 
```

我可以肯定地说

a)`row`为空 - 网格中没有 SelectedRow
b)`row.Cells`为空，所选行没有单元格
c)`row.Cells[3]`为空，所选行有单元格，但没有单元格 4（单元格从零开始）

没有比这更进一步的帮助你的方法了，你应该在失败的行上设置一个断点，并检查上面的 3 个案例中的每一个，看看哪个是空的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:30:52.603

几个选项，取决于您绑定项目的方式。您可以这样做： Row.Cells["NAMEOFBINDING"] 这将为您提供价值。您现在可能会看到许多隐藏的单元格。

您可能还想尝试不同的事件，例如“RowUpdated”。此外，请尝试查看您的事件参数，看看它是否有任何对您有用的信息。

如果一个小时内没有让你满意的答案，我会写一个代码示例。

# mysql - Visual Studio Ultimate 2012 RC 是否支持 MySQL 实体？

> ID：11885645
> 
> 赞同：1
> 
> 时间：2012-08-09T14:27:06.997
> 
> 标签：mysql, entity-framework, visual-studio-2012

我 [为 .Net v6.5 安装了 MySQL 连接器，](http://www.mysql.com/downloads/connector/net) Entity Framework 支持它。当我使用 Visual Studio 2012 并尝试添加 ADO.NET 实体数据模型时，我看不到 MySQL。只有 Microsoft SQL Server。它在 VS 2010 中工作。

[这个问题](https://stackoverflow.com/questions/10914894/entity-framework-5-0-entityobject-generator-not-available-in-visual-studio-2012)说他们正在研究它 - 有结论吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T07:20:25.620

将此mysql连接器用于vs 2012。安装后，您就没有此类错误，并且mysql服务器显示在数据源中。

[http://dev.mysql.com/downloads/connector/net/6.6.html](http://dev.mysql.com/downloads/connector/net/6.6.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T11:21:10.237

目前可用的连接器 .NET v6.5.4 不支持 VS 2012。您无法在服务器资源管理器中添加与 MySQL 的连接。

根据帖子，6.5.5 将包含支持：[MySQL 论坛](http://forums.mysql.com/read.php?38,546265,564533#msg-564533)

显然有一些解决方法和第 3 方方法可以让这个工作，但我个人会等待。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:14:33.347

只是提供一个更新：6.5 版本的连接器不支持 VS2012。但是有一个 6.6 的开发版本可以做到。转到以下 URL 并单击“开发版本”选项卡进行下载： [http ://dev.mysql.com/downloads/connector/net/#downloads](http://dev.mysql.com/downloads/connector/net/#downloads)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T17:41:30.267

下载“MySQL.Connector.Net.6.5.4.VS2012.vsix”并安装它，以便能够在 Visual Studio 2012 中使用 MySQL。

您可能需要在安装 Visual Studio 后重新启动它才能看到更改。

# php - Nginx 404 动态 PHP 重写

> ID：11885650
> 
> 赞同：1
> 
> 时间：2012-08-09T14:27:31.380
> 
> 标签：php, nginx, rewrite, http-status-code-404

我正在尝试设置动态 404 页面，以便我可以保留丢失内容的 URL，将其显示在 404 页面上并保持我网站的模板一致。

这是我的网站配置：

```
server {
    listen       80;
    server_name  www.mysite.com;

    client_max_body_size 1024M;
    client_body_buffer_size 512M;

    rewrite ^/([a-zA-Z0-9-_]+)$ /profile.php?url=$1 last;

    root   /var/www/html/mysite;
    error_page 404 /404.php

    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
        expires 1y;
        log_not_found off;
    }

    location / {
        index  index.php index.html index.htm;
    }

    location ~ \.php$ {
        fastcgi_pass  mysite_fast_cgi;
        fastcgi_index  index.php;
        fastcgi_param  SCRIPT_FILENAME  /var/www/html/mysite$fastcgi_script_name;
        include        fastcgi_params;
    }

    location ~ /\.ht {
        deny  all;
    }

    location = /404.php {
        internal;
    }
} 
```

这只是提供默认的 Nginx 404 页面。

我在这里先向您的帮助表示感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:55:05.207

你试过`error_page 404 = /404.php;`吗？

以下是 nginx 官方文档的引用：

```
如果代理服务器处理错误响应，或者
一个 FastCGI 服务器，服务器可能会返回不同的响应
代码（例如，200、302、401 或 404），可以响应
带有返回的代码：

    error_page 404 = /404.php;

```

# python - django：post_syncdb 信号的顺序

> ID：11885651
> 
> 赞同：2
> 
> 时间：2012-08-09T14:27:32.033
> 
> 标签：python, django

我按照说明在里面创建了我的 post_syncdb 信号`app/management/__init__.py`：

```
from django.db.models.signals import post_syncdb
from django.contrib.auth.models import Group, Permission
import payment.models as payModels

def initialization(sender, **kwargs):
    """ initialization when appliation starts """
    agents = Group.objects.get(name = "agents")
    import pdb
    pdb.set_trace()
    if not agents.permissions.filter(codename="can_buy_package").exists():
        perm = Permission.objects.get(codename="can_buy_package")
        agents.permissions.add(perm)

post_syncdb.connect(initialization, sender= payModels) 
```

信号运行，但在那里使用 python 调试器，似乎在那个特定时间没有权限，即使是标准权限也是为我在同一个应用程序中的模型创建的。

有人可以建议吗？

-----------------------**更新**-------------- -

在 Chris 发表评论后，我查看了调度程序类并将调试消息插入到相关文件中以了解更多信息。

本质上，在我的应用程序中（在列表中`INSTALLED_APPS`比`contenttype`和更靠后的位置`auth`），它的`post_syncdb`处理程序首先被添加到信号中。原来是因为在安装过程中，Django 会在应用程序的 management/commands 文件夹中查找要安装的自定义命令，我的 management/ **init** .py 中的信号处理程序已执行。

然后我试着把`post_syncdb.connect`我的`models.py`. 运行跟踪显示使用 haystack 也可能遇到类似问题

> (, '/Users/foo/.virtualenvs/property/lib/python2.6/site-packages/django/utils/importlib.py', 35, 'import_module', [' **import** (name)\n '], 0 ), (, '/Users/foo/.virtualenvs/property/lib/python2.6/site-packages/haystack/init .py', 121, 'autodiscove r', [' **importlib.import_module**
> ("%s.search_indexes " % app)\n'], 0), (, '
> /Users/foo/Documents/workspace/property_buyer/haystack_sites.py', 2, '', ['haystack.autodiscover()\n'], 0 ), (, '/Users/foo/.virtualenvs/property/lib/python2.6/site-packages/django/utils/importlib.py
> ', 35, 'import_module', [' **import** (name)\n' ], 0), (, '/
> Users/foo/.virtualenvs/property/lib/python2.6/site-packages/haystack/ **init**.py', 151, 'handle_registrations', [' search_sites_conf = importlib
> .import_module(settings.HAYSTACK_SITECONF)\n'], 0), (, '/Users/foo/.virtualenvs/property/lib/python2.6/site -packa ges
> /haystack/ **init** .py', 154, '', ['handle_registrations()\n'], 0), (, '/Users/foo/.virtualenvs/propert
> y/lib/python2.6/site -packages/django/utils/importlib.py', 35, 'import_module', [' **import** (name)\n'], 0),

希望这对那些处理程序依赖于订单并遇到类似情况的人有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:33:26.280

有两点需要注意。首先，`post_syncdb`信号是在每个应用程序同步后发送的，因此每个应用程序都会发送一次，而不仅仅是在最后发送一次。其次，似乎有一个固有且稳定的顺序，何时应用处理程序，但它是不可控的。

为了详细说明第二点，我花了 30 分钟的大部分时间盯着`auth`'s 权限`post_syncdb`处理程序，我看不到任何真正确保它出现在`contenttypes`. 然而，尽管如此，它`ContentType`可以自由使用，相信一切都准备好了。我唯一的结论是应用程序的顺序`INSTALLED_APPS`很重要，并且列表中后面的应用程序似乎在列表中较早的应用程序之前处理了它们的处理程序。我唯一的结论是`auth`从 letter 开头的好处`A`，结果很少有人会把它移到`contenttypes`列表的下面。

这也意味着您的应用程序（不可避免地在`contenttypes`in之后定义`INSTALLED_APPS`）的信号处理程序在的那些*之前*`contenttypes`运行，这就是您的问题。这与其说是一种竞争条件，不如说它总是领先于`contenttypes`.

我想，您可以将您的应用程序向上移动`INSTALLED_APPS`，但这可能会导致其他无法预料的问题。您也可以尝试将`sender`属性更改为不同的模型文件，甚至可能是`contenttypes`，这可能会给它足够的时间来弹出。

# javascript - 创建动画路径

> ID：11885652
> 
> 赞同：-1
> 
> 时间：2012-08-09T14:27:36.647
> 
> 标签：javascript, jquery, jquery-ui

我刚刚被告知要更改我的拖放游戏以更适合年幼的孩子。

考虑到这一点，我决定单击可拖动对象，这将触发它们动画到所需位置（“.drop-box.spellword”）。

你会怎么做这样的点击事件..

```
 $(".drag").click(function() {
    $(".drag").animate({"left": "+=-200px"}, "slow");
}); 
```

动画到一个名为* *“.drop-box.spellword”*的区域*而不是动画“左：200px”。

以下是“.drag”的样式...

```
.squares .box-style {       

background: #176BC9;
color: white;
font-family: arial;
font-size: 35pt;
text-align: center;
width: 60px;
height: 60px;
border: 1pt solid white;  
cursor: move;
opacity: 1;
line-height: 56px;

}
.drag {

display:block;
height:61px;
line-height:25px;
width:61px;
text-align: center;
background:#ddd;    
float:left;  
-webkit-transition: -webkit-transform 0.1s ease-in;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:30:11.853

将第一个字母动画到容器的位置，将第二个字母动画到相对于前一个的位置。

```
.animate({
    top: $('.drop-box.spellword').offset().top,
    left: $('.drop-box.spellword').offset().left
 }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:34:54.857

很难给您一个正确的答案，因为该方法取决于您对各种对象的样式。也许这样的事情可能会奏效：

```
$('#a').on('click', function(e){

    e.preventDefault();

    var targetPos  = $('.drop-box.spellword').offset();
    var currentPos = $(this).offset();

    $(this).css({
        'position' : 'absolute',
        'top' : currentPos.top,
        'left': currentPos.left
    });

    $(this).animate({
        top  : targetPos.top,
        left : targetPos.left
    }, 'fast');

}); 
```

# php - PHP - 使用“ - ”作为值分隔符将“eg1 - eg2 - eg3”之类的字符串转换为数组

> ID：11885654
> 
> 赞同：-3
> 
> 时间：2012-08-09T14:27:38.600
> 
> 标签：php, arrays, string

我有一个这样的字符串：`"eg1 - eg2 - eg3"`.

我想把那个字符串变成一个数组。因此，该数组将有 3 个键，然后我可以遍历这些键。

谁能提供一些有关我如何使用 PHP 完成此任务的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:28:31.810

使用 PHP [explode](http://php.net/manual/en/function.explode.php)函数将字符串分解为分隔符上的数组，`' - '`就像这样 - 然后您可以循环遍历它。

```
$myArray=explode(' - ', $myString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:39:09.877

爆炸，而不是 preg_split。仅当您必须使用 reg exp 时才使用 preg_。爆炸要快得多。所以

> 如果“-”之间总是有空格

绝对使用爆炸

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T14:31:47.187

如果“-”之间总是有空格

```
$parts = explode(' - ', $string); 
```

用正则表达式更好地分割

```
$parts = preg_split("\s-\s" , $string); 
```

# powershell - 更新枚举器中的哈希表并让它识别添加？

> ID：11885655
> 
> 赞同：0
> 
> 时间：2012-08-09T14:27:42.770
> 
> 标签：powershell

处理在该哈希表的枚举内添加到哈希表以使其在枚举中包含该添加项的最佳方法是什么？

我喜欢一些东西： foreach ($key in $groups.GetEnumerator() | Sort-Object Name -descending) { if (something) { groups.add("test","test2") } }

我希望它在枚举中使用新添加的项目，而不是一遍又一遍地调用其中包含它的函数，这会杀死我的内存资源并导致影响写入 export-csv 调用的内容的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:27:33.573

我认为当您更新与 foreach 一起行走的哈希时，powershell 会引发错误。

将散列的键写入数组：

```
$stack = @($groups.keys) 
```

然后从该列表中“转移”一个键以使其工作：

```
while ($stack) {
  $item,$stack = $stack
  DoStuffHere()
} 
```

最后，在 DoStuffHere 中，您需要将一个项目添加到 HASH**并将**新密钥推送到堆栈上以便它可以工作。

```
 $groups.add($newkey,$newval)
 $stack = $stack,$newkey 
```

这样，您就不必担心 powershell 的自动行为无法按照您想要的方式工作。

# vb.net - vb.net 4个线程填充同一个数据库

> ID：11885658
> 
> 赞同：1
> 
> 时间：2012-08-09T14:27:47.253
> 
> 标签：vb.net, for-loop

您好，我有一个持续约 2 小时的循环完成，它从 Internet 获取数据并将其填充到数据库中，所以我想将其划分为 4 个线程，我正在尝试做一些测试，然后再把它放到我的应用。

所以这是我写的一个示例，用 4 个线程填充一个数据库，我收到这个错误“BindingSource 不能是它自己的数据源”

```
 Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Me.DataGridView1.DataSource = Me.bindingSource1
    GetData("select * from products")
End Sub

 Public Sub thread1f0()
    For i = 0 To 500
        DataGridView1.Item("PD", i).Value = i + 67
        DataGridView1.Item("PDP", i).Value = i + 41
        DataGridView1.Item("TPD", i).Value = i + 654 + 6 * 13
        DataGridView1.Item("TPDP", i).Value = i + 342
    Next
End Sub

Public Sub thread1f1()
    For i = 501 To 1000
        DataGridView1.Item("PD", i).Value = i + 432
        DataGridView1.Item("PDP", i).Value = i + 421
        DataGridView1.Item("TPD", i).Value = i + 414
        DataGridView1.Item("TPDP", i).Value = i + 42 + 4
    Next
End Sub

Public Sub thread1f2()
    For i = 1001 To 1500
        DataGridView1.Item("PD", i).Value = i + 4452
        DataGridView1.Item("PDP", i).Value = i + 34
        DataGridView1.Item("TPD", i).Value = i + 123
        DataGridView1.Item("TPDP", i).Value = i + 44
    Next
End Sub

Public Sub thread1f3()
    For i = 1501 To 2000
        DataGridView1.Item("PD", i).Value = i + 423
        DataGridView1.Item("PDP", i).Value = i + 423
        DataGridView1.Item("TPD", i).Value = i + 423
        DataGridView1.Item("TPDP", i).Value = i + 423 / 2
    Next

End Sub 
```

'///////////////////////////////////////// //////////////////////////////////

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    thread0 = New System.Threading.Thread(AddressOf thread1f0)
    thread0.Start()

    thread1 = New System.Threading.Thread(AddressOf thread1f1)
    thread1.Start()

    thread2 = New System.Threading.Thread(AddressOf thread1f2)
    thread2.Start()

    thread3 = New System.Threading.Thread(AddressOf thread1f3)
    thread3.Start()
End Sub

Public Sub GetData(ByVal selectCommand As String)

    Try
        Dim connectionString As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & strFileName
        Me.dataAdapter = New OleDbDataAdapter(selectCommand, connectionString)
        Dim commandBuilder As New OleDbCommandBuilder(Me.dataAdapter)
        Dim table As New DataTable()
        table.Locale = System.Globalization.CultureInfo.InvariantCulture
        Me.dataAdapter.Fill(table)
        Me.bindingSource1.DataSource = table
        Me.DataGridView1.AutoResizeColumns( _
            DataGridViewAutoSizeColumnsMode.ColumnHeader)
    Catch ex As OleDbException
        MessageBox.Show(ex.Message)
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:50:33.367

由于您的 DataGridView 控件使用 DataTable 作为 DataSource，因此您需要更新 DataTable，而不是 DataGridView 控件。

线程似乎没有必要。只需使用一个 BackgroundWorker 线程即可不冻结 GUI。

# iphone - 如何将数据从一个视图传回IOS中的另一个视图？

> ID：11885673
> 
> 赞同：4
> 
> 时间：2012-08-09T14:28:46.613
> 
> 标签：iphone, ios, ios5, uiviewcontroller, modalviewcontroller

我能够毫无问题地将数据从一个视图传递到另一个视图。但这是我面临的问题。

假设 **->将数据传递给其他视图**

```
ViewA->ViewB This working perfectly fine 
ViewB->ViewC This working perfectly fine
ViewC->ViewB Here is the problem. 
```

我尝试使用**push segue**，它进入ViewB，但是当我按下返回按钮时，它进入**ViewC->返回按钮->ViewB->返回按钮->View A。当我按下返回按钮时，它必须从ViewB进入ViewA。**

尝试使用**modal segue**，它转到 ViewB 但我不能去任何地方。

**由于我是 iOs 的新手，我真的不知道如何实现这一目标？**

**如何将数据从 ViewC 传回 ViewB？**

我想你们可以帮助我。

**编辑**

在视图 A 中，我像这样调用 ViewB

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if([segue.identifier isEqualToString:@"RemixScreen"])
{

    if([self.recipeFrom isEqualToString:@"ViewB"])
    {

        ViewB *reciepe = [segue destinationViewController];
        //somedata i will pass here

    }  
}
 } 
```

在视图 B 我这样打电话

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
  {
if([segue.identifier isEqualToString:@"ViewA"])
{  
    ViewA *data = [segue destinationViewController];
    //some data  
}
} 
```

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T15:18:53.447

正确的方法是使用委托。您使用 prepareForSegue 中的属性向前传递数据并使用委托将数据传回。

它的工作方式是在 ViewC 中有一个委托属性，该属性由 ViewB 在 prepareForSegue 中设置。这样 ViewC 可以通过您设置的协议与 ViewB 通信。

编辑：添加代码来演示：

ViewControllerB接口：

```
@protocol ViewBProtocol

- (void)setData:(NSData *)data;

@end

@interface ViewBController: UIViewController <ViewBProtocol>
...
@end 
```

在这里，我们让 ViewBController 遵循 ViewCController 将与之通信的协议。

接下来是 ViewCController 接口：

```
@interface ViewCController: UIViewController

@property (nonatomic, weak) id<ViewBProtocol> delegate;

...

@end 
```

现在我们看一下 ViewBController 的 prepareForSegue：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    UIViewController* controller = [segue destinationViewController];
    if ([controller isKindOfClass:[ViewCController class]])
    {
        ViewCController* viewCController = (ViewCController *)controller;
        viewCController.delegate = self;
    }
} 
```

如您所见，我们通过委托属性将 ViewC 控制器链接到 ViewB 控制器。现在我们在 ViewC 中做一些事情：

```
- (void)sendData:(NSData *)data
{
    [self.delegate setData:data];
} 
```

如果你愿意，你可以在 ViewCController 的 viewWillDisappear 方法中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:39:55.040

我在最近的一个项目中解决这个问题的方法如下；

**视图 A**是`parentViewController`，所以可以像这样随时从**视图 B**和**视图 C**访问；

```
ViewAClass *parentView = (ViewAClass *)self.parentViewController; 
```

然后，您可以读取和写入**View A**的属性，例如；

```
NSString *string = parentView.someStringProperty; 
```

或者

```
parentView.someStringProperty = @"Hello World"; 
```

编辑 - “使用退出按钮从视图 B 返回到视图 A”

```
[parentView popViewControllerAnimated:YES]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T14:38:06.447

你在使用导航控制器吗？如果是，您可以使用 Singleton 轻松传递数据，这是我最喜欢的方式，而且它易于使用。否则，如果您尝试使用按钮或其他方式浏览视图，请尝试为您的 segue 设置标识符，然后调用方法“performSegueWithIdentifier”

# ipad - iPad 视网膜在 Cocos2d 中拉伸非视网膜图像

> ID：11885674
> 
> 赞同：0
> 
> 时间：2012-08-09T14:28:49.280
> 
> 标签：ipad, cocos2d-iphone, retina-display, ipad-3

我有一个使用 SDK 5.1 (Xcode 4.4) 构建的 iPad 应用程序。该应用程序是非视网膜应用程序。在 iPad 1 和 2 上，图像已正确缩放。在新 iPad（第 3 代）上，所有图像都按比例放大。这种行为是意料之中的，但在我的情况下是不受欢迎的。如何防止图像被放大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:48:41.917

由于您正在为非 Retina 和 Retina 设备构建，因此您应该包括所有图像的两个版本。Retina 图像的大小应为屏幕分辨率的两倍，并应具有@2x.png（或 jpg）后缀。例子：`Background-Image@2x.png`

# git - 我如何要求（或敦促）git 提交者提供相关的作者信息？

> ID：11885676
> 
> 赞同：8
> 
> 时间：2012-08-09T14:28:55.960
> 
> 标签：git

我们团队 99% 的时间都在本地开发框上提交并推送提交，在这种情况下，提交的作者信息是正确的。然而，在压力大的时候，有人会直接在开发服务器上调整一些东西并从那里提交。发生这种情况时，提交中的作者信息默认为共享部署帐户。

有没有办法在提交时提示用户提供他们的作者信息？他们不会记得去做`--author`。

我看过的一些东西，但不能完全越过终点线是：

1.  使用客户端钩子拒绝作者字符串中带有“部署”的提交
2.  寻找一个总是提示作者信息的设置
3.  尝试根据用于登录盒子的 ssh-key 自动设置作者

有没有办法让其中一个工作或一个好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T15:25:40.027

好的，我找到了一种方法来做到这一点，但它之所以有效，只是因为我们使用基于密钥的身份验证通过 ssh 专门访问此框。

在共享部署用户的`/home/deploy/.ssh/authorized_keys`文件中，我为每个键添加了一个环境变量，例如，我的如下所示：

```
environment="GIT_AUTHOR_EMAIL=ry4an@host.com",environment="GIT_AUTHOR_NAME=Ry4an on Dev" ssh-rsa AAAA...cXBcmHr ry4an@host.com 
```

这还需要添加：

```
PermitUserEnvironment yes 
```

到`/etc/ssh/sshd_config`文件。

这行得通，但如果存在这样的事情，我宁愿了解一个`user.name=ASK`设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:31:05.190

我不太确定它对你们是如何工作的，但您可以让您的开发人员设置一个别名，以便将其添加`--author`到每个正常提交中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-10T21:26:32.503

不幸的是，我也找不到真正令人满意的解决方案。我将列出到目前为止我找到的所有解决方案（我认为您已经提出了问题中最好的 3 个）。

## (1) 禁止在没有 --author 的情况下提交

将以下脚本另存为`pre-commit`hook in`.git/hooks/pre-commit`以禁止：

```
#!/bin/sh

if echo $GIT_AUTHOR_NAME | grep -q "XXX" 2> /dev/null; then
    echo 'You tried to commit as XXX, please use  git commit --author="your name".'
    return 1
fi 
```

将用户名设置为 XXX：

```
git config user.name XXX 
```

**警告：**这仅适用于正常提交。合并提交将作为 XXX 提交。可能也有办法完成这项工作

## (2a) 提交前提示作者信息（使用钩子）

使用钩子设置作者的唯一方法似乎是用钩子修改提交`post-commit`，[另请参见此处](https://stackoverflow.com/questions/5018055/how-to-change-author-email-at-commit-time-with-hooks)。

这是一个带有丑陋副作用的奇怪 hack（例如，提交消息中的作者显示错误）。

```
#!/bin/sh

# env variable to prevent recursion
test -z $AMMEND_COMMIT || exit 0
export AMMEND_COMMIT=1

exec < /dev/tty
echo -n "Author for previous commit: "
read author

git commit -q --no-edit --amend --author "$author" 
```

使用以下脚本根据上次提交获取作者建议：

```
#!/bin/sh

# TODO this doesn't work for repos with <15 commits
NUM_LAST_COMMITS=15  # how many commits in the past to look for authors

# env variable to prevent recursion
test -z $ammend_commit || exit 0
export ammend_commit=1

exec < /dev/tty

last_authors=$(git shortlog -s -e HEAD~${NUM_LAST_COMMITS}..HEAD|sed 's/^\W*[0-9]*\W*//g')
echo "Select an author from list or enter an author:"
echo
echo "$last_authors" | awk '{print "    [" NR "] " $s }'
echo
echo -n "Enter number or author: "
read author

if echo "$author" | egrep -q '^[0-9]+$'; then
    author=$(echo "$last_authors" | sed "${author}q;d")
fi

git commit -q --no-edit --amend --author "$author" 
```

看起来像这样：

```
$ git commit -am "My message"
Select an author from list or enter an author:

    [1] First Author <first_author@domain.com>
    [2] Second Author <second_author@domain.com>
    [3] Third Author <third_author@domain.com>

Enter number or author: 3 
```

## (2b) 提交前提示作者信息（使用自定义脚本或别名）

您可以创建一个脚本`git-commit.sh`或 git 别名`git commit-author`，提示使用作者，然后调用`git commit --author=<user's selection>`. 不幸的是，[无法覆盖](https://stackoverflow.com/questions/3538774/is-it-possible-to-override-git-command-by-git-alias) `git commit`.

中的`git-commit.sh`脚本`/usr/local/bin`可能如下所示：

```
#!/bin/sh

# TODO this doesn't work for repos with <15 commits
NUM_LAST_COMMITS=15  # how many commits in the past to look for authors

last_authors=$(git shortlog -s -e HEAD~${NUM_LAST_COMMITS}..HEAD|sed 's/^\W*[0-9]*\W*//g')
echo "Select an author from list or enter an author:"
echo
echo "$last_authors" | awk '{print "    [" NR "] " $s }'
echo
echo -n "Enter number or author: "
read author

if echo "$author" | egrep -q '^[0-9]+$'; then
    author=$(echo "$last_authors" | sed "${author}q;d")
fi

git commit "$@" --author "$author" 
```

要将脚本添加为别名运行：

```
$ git config alias.commit-author '!git-commit.sh' 
```

## (3) 根据登录时使用的 ssh-key 自动设置作者

这是您自己的答案，复制到此处以获得更好的概述：

在共享部署用户的`/home/deploy/.ssh/authorized_keys`文件中，我为每个键添加了一个环境变量，例如，我的如下所示：

```
environment="GIT_AUTHOR_EMAIL=ry4an@host.com",environment="GIT_AUTHOR_NAME=Ry4an on Dev" ssh-rsa AAAA...cXBcmHr ry4an@host.com 
```

这还需要添加：

```
PermitUserEnvironment yes 
```

到`/etc/ssh/sshd_config`文件。

# svn - svn：如何将一个大提交拆分成几个小提交？

> ID：11885677
> 
> 赞同：4
> 
> 时间：2012-08-09T14:28:56.740
> 
> 标签：svn, commit, subversive

我已经为一个项目创建了一个新的存储库，并且正在向它添加一些现有的代码库 (llvm)。这个代码库大约有 18,000 个文件，这使得我的初始提交需要很多时间。（阅读 5 小时）

有没有办法将这个巨大的提交分成几个较小的提交？这样它可以更快地完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T17:18:35.723

在为包含大量文件的新存储库播种时，我*强烈*建议使用来自*服务器*`svn import`的命令，而不是从远程计算机提交文件。最简单的方法是：

 *1.  将代码捆绑到一个存档中（使用 gzip、7zip 等）
2.  将该存档传输到服务器（使用 rsync、scp 等）
3.  远程登录服务器
4.  将存档解压缩到临时目录
5.  用于`svn import`播种存储库

在大多数情况下，这将被证明要快得多。通过网络传输单个大型档案通常比传输许多较小的文件要快得多，即使您不考虑压缩也是如此。使用 Windows 的性能差异要大得多。某些版本的 Subversion 有一个 Windows 错误，它会导致每个文件打开和关闭单独的网络连接，与使用单个网络连接进行整个操作相比，这会增加大量开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T12:47:58.890

在某些情况下，较小的提交可能很重要：

*   repo 由 Apache 的 mod_dav_svn 通过 http 提供服务
*   基于路径的授权正在使用中
*   [`SVNPathAuthz short_circuit`](http://svnbook.red-bean.com/en/1.7/svn.ref.mod_dav_svn.conf.html)未设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:39:27.397

您可以通过指定单个文件来拆分提交。但是，这不太可能让它更快：您仍然必须通过网络移动文件，并将它们写入磁盘。事实上，它很可能会变慢，因为 Subversion 需要在更新的某个时间点锁定存储库（以便它可以分配一个唯一的修订号）。

我认为您最好在本地磁盘上创建存储库，在那里进行提交（这消除了网络开销），然后将存储库推送到最终目的地。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T14:39:35.717

使用较小的块可能不会导致花费的总时间减少。

考虑到进程启动、拆卸和通信开销，与单个大型提交相比，**几个较小的提交可能会花费更多的总时间。**

您没有说明正在使用哪个操作系统，但是如何安装[SVN Tortoise](http://tortoisesvn.tigris.org/)并为每次提交挑选尽可能多的文件？无论如何，SVN 是基于目录的，因此如果您的 18,000 个文件位于不同的目录中，那么请务必分别提交每个目录。

如果使用命令行是一个选项，这里有几个链接：

[http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.add.html](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.add.html)

[http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.commit.html](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.commit.html)*

# random - SystemVerilog randc 重新初始化

> ID：11885678
> 
> 赞同：0
> 
> 时间：2012-08-09T14:28:59.250
> 
> 标签：random, verilog, verification, system-verilog

我想知道是否有办法重新初始化 randc 变量。我正在尝试设置几个寄存器，但需要确保它们可以按任意顺序设置。该对象可能会被重新随机化（类中还有一些其他随机值），然后该函数可能会再次被调用。我的代码看起来像这样：

```
typedef enum bit[N:0] { REG1, REG2, REG3, REG4, ... } reg_order_e;
local randc reg_order_e reg_order;

function void set_regs();
    repeat( reg_order.num() ) begin
        case( reg_order )
            REG1: set_reg1();
            REG2: set_reg2();
            REG3: set_reg3();
            REG4: set_reg4();
        endcase
        assert(randomize( reg_order ));
    end
endfunction : set_regs 
```

或者，有没有办法在变量上调用 std::randomize() 以使其成为 randc？谢谢，-蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:25:14.090

我根据在验证学院论坛上发布相同[问题](http://verificationacademy.com/forum/verification-methodology-discussion-forum/systemverilog-and-other-languages-forum/28155-reinitializing-randc)的一些评论找到了解决方案。基本上，要实现我想要的，我需要创建一个具有自己随机变量的新类

```
class helper;
     randc reg_order_e reg_order;
endclass : helper

task do_some_work();
    helper helper_inst = new();
    repeat( reg_order_e.num() ) begin
        assert( helper_inst.randomize() );
        case( helper_inst.reg_order )
            REG1: ...
            REG2: ...
        endcase
    end
endtask : do_some_work 
```

# php - (PHP, MySQL) 函数仅适用于 2 种情况中的 1 种，找不到区别

> ID：11885684
> 
> 赞同：3
> 
> 时间：2012-08-09T14:29:26.840
> 
> 标签：php, mysql, codeigniter

所以我有这个功能来搜索 MySQL 数据库中的条目：

```
<?php
private function SearchContributors($search) 
    {
    $search_pieces = explode(' ', $search);

    if (count($search_pieces) == 1 )
        {
        $this->db->like('firstname', $search);
        $this->db->or_like('lastname', $search);   
        $result = $this->db->get(); //the line from the error message below
        }   

    //Other stuff for 2 and more pieces

    return $result;
    }
?> 
```

我两次使用该功能。

**案例 A**是用户发起的搜索，并从 URL ( `domain.com/contributors/?x=paul`) 获取搜索查询。这工作正常。

```
<?php
if (isset($_GET['x']))
    {
    $x = $_GET['x']; 
    $result = $this->SearchContributors($x);
    }
?> 
```

**案例 B**是当用户输入无效的 slug 名称（`domain.com/contributors/paul`而不是`domain.com/contributors/pauline-surname`）并直接获取搜索查询时的备份：

```
<?php
$this->db->where('slug', $slug);
$result = $this->db->get();    
if ($result->num_rows() == 0)
    {
    $x = str_replace('-', ' ', $slug);
    $result = $this->SearchContributors($x);
    }
?> 
```

这返回了一个 MySQL 语法错误：

> 错误号：1064
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 'WHERE `firstname`LIKE '%paul%' OR `lastname`LIKE '%paul%''附近使用正确的语法
> 
> SELECT * WHERE `firstname`LIKE '%paul%' OR `lastname`LIKE '%paul%'
> 
> 文件名：/www/htdocs/w00a94ee/c/controllers/contributors.php
> 
> 行号：23

该函数在两种情况下都获得了相同的字符串`paul`，那么为什么它不起作用呢？

**//编辑**

```
function __construct()
    {
    parent::__construct();
    $this->load->database('databasename');
    $this->db->from('tablename');
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:32:47.937

您忘记指定要选择的表`FROM`。

```
$this->db->from('tablename'); 
```

编辑：问题是您`from`在构造函数中添加了，然后您正在调用：

```
$this->db->where('slug', $slug);
$result = $this->db->get(); 
```

*打电话*之前*`SearchContributors`。这将运行查询并重置变量。*

 *因此，当您调用 时`SearchContributors`，`FROM`不再设置。

您需要放入`$this->db->from('tablename');`内部`SearchContributors`而*不是*构造函数。使模型函数自包含，而不需要外部函数（例如`__construct`调用它们）通常是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:47:50.383

您缺少 get('table_name');

```
if (count($search_pieces) == 1 )
    {
    $this->db->like('firstname', $search);
    $this->db->or_like('lastname', $search);   
    $result = $this->db->get('Your_tablename'); //-->>Here you can go
    } 
```

查看错误

```
select * WHERE...... 
```

但是“从表哪里”在哪里......？？我认为这是我亲爱的问题

在这里你也可以改变

```
$this->db->where('slug', $slug);
$result = $this->db->get('My_Table'); 
```*

# php - 如何在 Highcharts Javascript 库中的散点图上添加额外的标签？

> ID：11885688
> 
> 赞同：1
> 
> 时间：2012-08-09T14:29:37.410
> 
> 标签：php, javascript, attributes, label, highcharts

我正在使用 Highcharts JavaScript 库来可视化一些浮点值，我通过 php 将其输入到 js 代码中。正如您在下图中看到的，现在在每个点的鼠标悬停上显示对应于轴值和文本“文本：未定义”的两个值。![当前可视化](../Images/859f27de481a80aae23c97732c81b7c7.png)

**我的问题是**：有没有办法为散点图的每个点显示不同的文本？我有一个与每个点对应的文本，但我还没有找到显示它的方法。

我的 JavaScript/php 代码是：

```
<script type="text/javascript">
    $(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'scatter',
            zoomType: 'xy'},
        title: {
            text: 'Average 24hrs Sentiment for <?php echo $channel?> by Gender '
        },
        subtitle: {
            text: 'Source: '
        },
        xAxis: {
            title: {
                enabled: true,
                text: 'Hours ([0-24h].[0-60mins])'
            },
            startOnTick: true,
            endOnTick: true,
            showLastLabel: true
        },
        yAxis: {
            title: {
                text: 'Sentiment (N. Bayes) %'
            }
        },
        tooltip: {
            formatter: function() {
                    return ''+
                    this.x +' hrs, '+ this.y +' sentiment, text: ';
            }
        },
        legend: {
            layout: 'vertical',
            align: 'left',
            verticalAlign: 'top',
            x: 24,
            y: 1,
            floating: true,
            backgroundColor: '#FFFFFF',
            borderWidth: 1
        },
        plotOptions: {
            scatter: {
                marker: {
                    radius: 5,
                    states: {
                        hover: {
                            enabled: true,
                            lineColor: 'rgb(100,100,100)'
                        }
                    }
                },
                states: {
                    hover: {
                        marker: {
                            enabled: false
                        }
                    }
                }
            }
        },
        series: [{
            name: 'Female',
            color: 'rgba(223, 83, 83, .5)',
            data: [
            <?php 

            for($j=0;$j<$i1;$j++)
            {
                if($females[$j]['Hour'][0] == "0")
                {
                    echo '['.$females[$j]['Hour'][1].'.'.$females[$j]['Min'].','.$females[$j]['Sent'].'"]';
                }
                else
                    echo '['.$females[$j]['Hour'].'.'.$females[$j]['Min'].','.$females[$j]['Sent'].'"]';

                if(($j+1)!=$i1)
                {
                    echo ",";
                }
            }
        ?>
        ]}, 
            {
            name: 'Male',
            color: 'rgba(119, 152, 191, .5)',
            data: [
            <?php 

            for($j=0;$j<$i2;$j++)
            {
                if($males[$j]['Hour'][0] == "0")
                {
                    echo '['.$males[$j]['Hour'][1].'.'.$males[$j]['Min'].','.$males[$j]['Sent'].',"'.$males[$j]['Text'].'"]';
                }
                else
                    echo '['.$males[$j]['Hour'].'.'.$males[$j]['Min'].','.$males[$j]['Sent'].',"'.$males[$j]['Text'].'"]';

                if(($j+1)!=$i2)
                {
                    echo ",";
                }
            }
            ?>
            ]}]
    });
}); 
```

});

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:59:09.627

如果文本对于每个点都是唯一的，则您可以传递的值不止 x 和 y。在以下[**示例**](http://jsfiddle.net/6tc6T/3/)中，我传递了其他三个值：locked、unlocked 和 potential。然后要在工具提示格式化程序中访问它们，请使用`this.point.locked`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:52:25.203

```
 this.x +' hrs, '+ this.y +' sentiment, text: '; 
```

尝试在此代码行中设置文本，只是为了检查我的建议是否能解决您的问题，尝试：

```
 this.x +' hrs, '+ this.y +' sentiment, text: '+this.x; 
```

然后检查 (this.x) 值是否显示为 "undefined" 。

# java - Java C/C++ 转换中的指针

> ID：11885691
> 
> 赞同：0
> 
> 时间：2012-08-09T14:29:41.597
> 
> 标签：java, c++, pointers

我正在尝试将库从 C++ 转换为 Java。指针有问题。。

来自 C++ 的代码是：

```
int DECL2 daveSetBit(daveConnection * dc,int area, int DB, int byteAdr, int bitAdr) {
    int a=1;
    return daveWriteBits(dc, area, DB, 8*byteAdr+bitAdr, 1, &a);
} 
```

和 daveWriteBits 声明是：

```
 daveWriteBits(daveConnection * dc,int area, int DB, int start, int len, void * buffer) 
```

我怎样才能把它转换成java？我不知道如何将指针**&a**转换为 java 语言..

```
public int SetBits(
        int area,
        int DBnum,
        int byteAdr,
        int bitAdr) {       
    int a=1;        
    return writeBits(area, DBnum, 8*byteAdr+bitAdr, 1, ??? )            
} 
```

**更新：**

我忘了在 Java 中添加部分 WriteBits 函数。

```
public int writeBits(
        int area,
        int DBnum,
        int start,
        int len,
        byte[] buffer) {
        int errorState = 0;
        semaphore.enter();
        PDU p1 = new PDU(msgOut, PDUstartOut);

        p1.prepareWriteRequest();
        p1.addBitVarToWriteRequest(area, DBnum, start, len, buffer);

        errorState = exchange(p1);

        if (errorState == 0) {
            PDU p2 = new PDU(msgIn, PDUstartIn);
            p2.setupReceivedPDU();

            if (p2.mem[p2.param + 0] == PDU.FUNC_WRITE) {
                if (p2.mem[p2.data + 0] == (byte) 0xFF) {
                    if ((Nodave.Debug & Nodave.DEBUG_CONN) != 0)
                        System.out.println("writeBytes: success");
                    semaphore.leave();
                    return 0;
                }
            } else {
                errorState |= 4096;
            }
        }
        semaphore.leave();
        return errorState;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:32:35.887

由于变量被忽略，我会删除它。

但是，如果它没有被忽视，你可以起诉

```
int[] a = { 1 };
writeBits(area, DBnum, 8*byteAdr+bitAdr, 1, a )  ;
// do something with a[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:34:14.213

Java没有指针。它有参考：

C++：

```
Object *a=new Object(); 
```

爪哇：

```
Object a=new Object(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:34:37.200

这取决于如何`daveWriteBits`使用`buffer`. 如果它只是被视为一个简单的整数，并且如果`daveSetBit`不使用`a`此调用后的值，则将其设为`int`. 没有指针/引用。

如果`daveSetBit`需要`a`( 在 中的任何潜在修改之后的值`daveWriteBits`，那么制作 an[`Integer`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html)可能会有所帮助。

如果有一些非常花哨的指针东西（将`&a`自己视为地址等），那么您可能需要做更多的设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:35:06.687

您更熟悉 C++ 还是 Java？C++ 代码将整数视为字节数组。您不能直接在 Java 中执行此操作（我认为），但您可以执行此操作

```
ByteArrayOutputStream buf = new ByteArrayOutputStream();
new DataOutputStream(buf).write(a);
return writeBits(area, DBnum, 8*byteAdr+bitAdr, 1, buf ); 
```

将整数转换为字节数组，然后您可以将其传递给 writeBits。未经测试的代码。

# events - 在 Node.js 中创建“大厅”应该采用什么方法？

> ID：11885694
> 
> 赞同：0
> 
> 时间：2012-08-09T14:29:52.917
> 
> 标签：events, node.js, synchronization, queue

我有用户连接到 Node.js 服务器，当他们加入时，我将他们添加到 Lobby（本质上是一个队列）中。每当大厅中有 2 个用户时，我希望他们配对并从大厅中删除。所以本质上，它只是一个简单的队列。

我首先尝试使用 Lobby.run 方法来实现这一点，该方法具有无限循环（在`process.nextTick`调用中开始），并且只要队列中有两个以上的条目，我就会将它们从队列中删除。然而，我发现这正在吃掉我所有的记忆，而且像这样的无限循环通常是不明智的。

我现在假设通过发出事件`EventEmitter`是要走的路。但是，我担心的是同步。假设我的大厅非常简单：

```
Lobby = {
  users: []

, join: function (user) {
    this.users.push(user);
    emitter.emit('lobby.join', user);
  }

, leave: function (user) {
    var index = this.users.indexOf(user);
    this.users.splice(index, 1);
    emitter.emit('lobby.leave', user);
  }
}; 
```

现在基本上我假设我想观察加入大厅的用户并将他们配对，可能是这样的：

```
Lobby = {
  ...

, run: function () {
    emitter.on('lobby.join', function (user) {
      // TODO: determine if this.users contains other users,
      //       pair them off, and remove them from the array
    });
  }
} 
```

正如我所提到的，这不考虑同步。多个用户可以同时加入大厅，因此事件侦听器可能会将单个用户与多个其他用户配对，而不是只配对一个。

有更多 Node.js 经验的人可以告诉我关注这种基于事件的方法是否正确？任何改进这种方法的见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:25:53.897

你担心这个是错误的。这是因为 Node.JS 是单线程的，根本没有并发！每当一个代码块被触发时，在该块完成它所做的事情之前，都不能触发**其他代码（包括事件处理程序）。**特别是如果您在应用程序中定义这个空循环：

```
while(true) { } 
```

然后您的服务器崩溃了，不会触发其他代码，也不会处理其他请求。所以要小心代码块，确保每个块最终都会结束。

回到问题......所以在你的情况下，多个用户不可能与同一个用户配对。让我再说一遍：这仅仅是因为 Node.JS 中没有并发！

另一方面，这只适用于 Node.JS 的一个实例。如果你想把它扩展到多台机器上，那么显然你必须实现一些锁定机制（确保没有其他进程可以同时处理数据）。

# java - 为什么这个正则表达式不起作用？

> ID：11885696
> 
> 赞同：0
> 
> 时间：2012-08-09T14:30:00.897
> 
> 标签：java, regex

我正在尝试将字符串与 java 正则表达式匹配，但我无法成功。我对java很陌生，我的大部分经验都是基于linux的正则表达式，我没有成功。有人能帮我吗？

以下是我使用的代码。

正则表达式是 -

```
//vod//final\_\d{0,99}.\d{0,99}\\-Frag\d{0,99} 
```

我要匹配的线是

```
/vod/final_1.3Seg1-Frag1 
```

我希望 1.3、1 和 1 被通配符。

有人请帮我... :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:37:56.570

你错过了这个`Seg1`部分。此外，您正在转义不需要转义的字符。试试这个正则表达式：`/vod/final_\\d+\\.\\d+Seg1-Frag\\d+`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:35:46.907

这应该有效：

```
Pattern p = Pattern.compile( "/vod/final_\\d+\\.\\d+Seg\\d+-Frag\\d+" ); 
```

注意：为了保护特殊字符，您可以使用`Pattern.quote()`

当遇到这样的问题时，从一个简单的文本和模式开始，然后从那里开始构建。即首先尝试匹配`/`，然后`/vod/`，然后`/vod/final_1`，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:33:28.300

你逃避太多了。不要逃避 /，_，-。

就像是：

```
/vod/final_\d{0,99}.\d{0,99}-Frag\d{0,99} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:39:21.023

这行得通吗？

```
/\/vod\/final\_\d{0,99}.\d{0,99}Seg\d-Frag\d{0,99} 
```

另外，这是我用来编辑您上面提供的正则表达式的内容：[http ://rubular.com/](http://rubular.com/)

它说它适用于 ruby​​，但它也提到它也适用于 java。

# javascript - HOWTO：模拟由 JavaScript 启动的 WebBrowser 警报/消息框中的单击确定？(德尔福)

> ID：11885700
> 
> 赞同：1
> 
> 时间：2012-08-09T14:30:22.247
> 
> 标签：javascript, delphi, click, browser, alert

我有一个内部带有 WebBrowser 的应用程序：

当我发布我的网页时，我有 javascript 弹出警报/消息框出现在我需要单击“确定”的位置。这是我创建警报的javascript：

```
 function delete(){
    if (confirm('Are you sure you wish to delete this ?')){
            document.forms.item.action = "edit.asp?action=delete";
            document.forms.item.submit();
        }

    } 
```

我正在寻找一段时间，但还没有找到任何可行的解决方案......

提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:22:51.523

实现[IDocHostShowUI::ShowMessage](http://www.bsalsa.com/ewb_on_show_mess.html)并显示您自己的对话框，或者只返回 S_OK。

注意：链接已损坏。这里是解决方案的代码：

```
 IDocHostShowUI = interface(IUnknown)
        ['{c4d244b0-d43e-11cf-893b-00aa00bdce1a}']
        function ShowMessage(hwnd: THandle; lpstrText: POleStr; lpstrCaption: POleStr;
          dwType: longint; lpstrHelpFile: POleStr; dwHelpContext: longint;
          var plResult: LRESULT): HRESULT; stdcall;
      end;

      TShowMessageEvent = function(Sender: TObject; HWND: THandle;
        lpstrText: POleStr; lpstrCaption: POleStr; dwType: Longint; lpstrHelpFile: POleStr;
        dwHelpContext: Longint; var plResult: LRESULT): HRESULT of object;

      TWebBrowser = class(SHDocVw.TWebBrowser, IDocHostShowUI)
        private
          fOnShowMessage: TShowMessageEvent;
        protected
          function ShowMessage(HWND: THandle; lpstrText: POleStr; lpstrCaption: POleStr;
            dwType: Longint; lpstrHelpFile: POleStr; dwHelpContext: Longint;
            var plResult: LRESULT): HRESULT; stdcall;
        published
          property OnShowMessage: TShowMessageEvent read fOnShowMessage write
            fOnShowMessage;
      end;

function TWebBrowser.ShowMessage(HWND: THandle; lpstrText, lpstrCaption: POleStr;
  dwType: Integer; lpstrHelpFile: POleStr; dwHelpContext: Integer;
  var plResult: LRESULT): HRESULT;
begin
  if Assigned(fOnShowMessage) then
    Result := fOnShowMessage(Self, HWND, lpstrText, lpStrCaption, dwType,
      lpStrHelpFile, dwHelpContext, plResult)
  else
  Result:= S_OK;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:51:27.073

如果这是非常受限制的内部使用，你可以做一个肮脏的

```
procedure TForm1.Timer1Timer(Sender: TObject);
const
  TargetCaption = 'Meddelande från webbsida';
var
  S: string;
  len: integer;
begin
  SetLength(S, 127);
  len := GetWindowText(Application.ActiveFormHandle, PChar(S), 127);
  if len = 0 then Exit;
  SetLength(S, len);
  if S = TargetCaption then
    SendMessage(Application.ActiveFormHandle, WM_COMMAND, ID_OK, 0);
end; 
```

弹出、确认或提示对话框`TargetCaption`的已知标题在哪里。`TWebBrowser`这可能因操作系统版本和语言版本而异，因此这种方法仅适用于非常受限的内部应用程序，在这种情况下，可以使用每个新的 Windows SP 来“更新”应用程序......

顺便说一句，“Meddelande från webbsida”在瑞典语中意为“来自网页的消息”。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-09T14:33:51.497

按钮`alert()` `confirm()`和`prompt()`框不可编写脚本。请改用 HTML/CSS 模式对话框。

# java - 当属性是通用的时，使用 xstream 将 XML 反序列化为对象

> ID：11885705
> 
> 赞同：0
> 
> 时间：2012-08-09T14:30:32.003
> 
> 标签：java, xml, generics, xstream

我从客户端收到以下 XML：

```
<data>
    <action>someAction</action>  // actionX, actionY, and so forth...
    <params>
        <name>Some name</name>
        <tel>1234567890</tel>
        .
        .
        .
        etc...
    </params>
</data> 
```

我创建了以下类：

```
class Data<T> {
    String action;
    T params;
}

class ContentX {
    String name;
    String tel;
}

class ContentY {
    String id;
    String productDesc;
} 
```

我需要使用 Data 类将 XML 转换为对象。根据操作，我需要将 T 属性映射到特定类，如 ContentX 或 ContentY。

例如，我已经尝试过这个，但它没有用：

```
Data<ContentX> data = (Data<ContentX>) xstream.fromXML(XML); 
```

我收到以下异常：

```
Exception in thread "main" com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$UnknownFieldException: No such field java.lang.Object.name
---- Debugging information ----
field               : name
class               : java.lang.Object
required-type       : java.lang.Object
converter-type      : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
path                : /data/params/name
line number         : 1
class[1]            : com.xstream.xml.Data
version             : null
-------------------------------
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.determineType(AbstractReflectionConverter.java:453)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:294)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshallField(AbstractReflectionConverter.java:355)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.doUnmarshal(AbstractReflectionConverter.java:306)
at com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter.unmarshal(AbstractReflectionConverter.java:234)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convert(TreeUnmarshaller.java:72)
at com.thoughtworks.xstream.core.AbstractReferenceUnmarshaller.convert(AbstractReferenceUnmarshaller.java:65)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:66)
at com.thoughtworks.xstream.core.TreeUnmarshaller.convertAnother(TreeUnmarshaller.java:50)
at com.thoughtworks.xstream.core.TreeUnmarshaller.start(TreeUnmarshaller.java:134)
at com.thoughtworks.xstream.core.AbstractTreeMarshallingStrategy.unmarshal(AbstractTreeMarshallingStrategy.java:32)
at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1058)
at com.thoughtworks.xstream.XStream.unmarshal(XStream.java:1042)
at com.thoughtworks.xstream.XStream.fromXML(XStream.java:913)
at com.thoughtworks.xstream.XStream.fromXML(XStream.java:904) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T05:51:37.453

```
 XStream xstream = new XStream();
    Data<ContentX> data = new Data<ContentX>();
    data.action="push";
    data.params=new ContentX();
    data.params.name="where";
    data.params.tel="1712";

    xstream.alias("data", Data.class);
    xstream.alias("params", ContentX.class);
    String xml = xstream.toXML(data);
    System.out.println(xml);

    Data<ContentX> result = (Data<ContentX>)xstream.fromXML(xml);
    System.out.println(result.action);
    System.out.println(result.params.name);
    System.out.println(result.params.tel); 
```

# xcode - XCode 中的 Unicode 字符无效

> ID：11885710
> 
> 赞同：1
> 
> 时间：2012-08-09T14:30:52.707
> 
> 标签：xcode, unicode

我试图将 Unicode 字符（使用自定义字体）放入一个字符串中，然后使用 Quartz 显示该字符串，但 XCode 出于某种原因不喜欢转义码，我真的被卡住了。

```
CGContextShowTextAtPoint (context, 15, 15, "\u0066", 1); 
```

它不喜欢这个（拉丁文小写 f）并说它是“无效的通用字符”。

```
CGContextShowTextAtPoint (context, 15, 15, "\ue118", 1); 
```

它没有抱怨这一点，但什么也没显示。当我在 FontForge 中打开字体时，它显示字形在那里并且有效。Font Book 也很好地验证了字体。如果我在 TextEdit 中使用字体并将 Unicode 字符与字符查看器 Unicode 表一起放入，它看起来就好了。只是 Quartz 不会显示它。

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:57:21.763

“无效的通用字符”错误是[由于 C99 中的定义造成的](https://stackoverflow.com/a/11147811/349112)：本质上`\uNNNN`，转义应该允许一个程序员调用一个*变量* `føø`，而另一个程序员（可能无法键入 ø）将其称为`f\u00F8\u00F8`. 为了让每个人都更容易解析，您不能对控制字符或“基本字符集”中的字符使用转义（也许是从[Java 的 unicode 转义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.3)`\u`中吸取的教训，它可以做一些疯狂的事情，比如结束注释）。

第二个错误可能是因为`"\ue118"`正在编译为 UTF-8 序列`"\xee\x8e\x98"`——三个`char`s。`CGContextShowTextAtPoint()`假设一个`char`（字节）是一个字形，并且`CGContextSelectFont()`仅支持编码`kCGEncodingMacRoman`（将字节解码为“Óéò”）和`kCGEncodingFontSpecific`（发生的事情是任何人的猜测。文档说不要使用`CGContextSetFont()`（它没有指定字符到字形映射) 与`CGContextShowText()`or结合使用`CGContextShowTextAtPoint()`。

如果您知道字形编号，则可以使用`CGContextShowGlyphs()`、`CGContextShowGlyphsAtPoint()`或`CGContextShowGlyphsAtPositions()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:40:38.317

我只是将字体更改为最后使用标准的字母数字字符。简单得多。

# entity-framework-4 - ObjectContext 的 SavingChanges：找出哪些列发生了变化？

> ID：11885711
> 
> 赞同：2
> 
> 时间：2012-08-09T14:30:57.033
> 
> 标签：entity-framework-4, save, objectcontext, auditing, timestamping

我正在将 ObjectContext 的 SavingChanges 事件处理为时间戳条目。要求是，如果只有 ColumnA 发生了变化，我*不会*在条目发生变化时为其添加时间戳。

有没有办法可以找出在此事件期间哪些列已更改（正在更改）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:55:54.503

这应该对你有用，这将遍历任何添加/修改的条目，如果有超过 1 个修改的属性，并且它不是“ColumnA”，你可以修改时间戳：

```
public int SaveChanges()
{
     foreach( ObjectStateEntry entry in ObjectStateManager.GetObjectStateEntries( EntityState.Added | EntityState.Modified ) )
     {
         var properties = entry.GetModifiedProperties();

          if (!(properties.Count() == 1 && properties.First() == "ColumnA"))
          {
              //modify timestamp here
          }
     }

    return base.SaveChanges();
} 
```

# php - 简单的 xml 属性解析

> ID：11885712
> 
> 赞同：-1
> 
> 时间：2012-08-09T14:30:58.453
> 
> 标签：php, xml-parsing, simplexml

我如何能够使用我的代码从这个 XML 获得这个：

```
<lfm status="ok"><results for="sub bass monster ragga">
<opensearch:Query role="request" searchTerms="sub bass monster ragga" startPage="1"/>   <opensearch:totalResults>2</opensearch:totalResults><opensearch:startIndex>0</opensearch:startIndex><opensearch:itemsPerPage>30</opensearch:itemsPerPage><trackmatches>

$count = $xml->results[0]->opensearch:totalResults  ??? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:39:37.117

您不能使用 SimpleXML 处理包含名称空间的文档。

您需要使用 DOMDocument 加载您的文档，然后使用[DOMDocument](http://www.php.net/manual/en/class.domdocument.php) [::getElementsByTagNameNS](http://www.php.net/manual/en/domdocument.getelementsbytagnamens.php)。

# php - 从 xmlrpc 请求中调用第二种方法

> ID：11885714
> 
> 赞同：1
> 
> 时间：2012-08-09T14:31:00.960
> 
> 标签：php, arrays, xml-rpc

我有这个方法`Answers`，它使用这个结构：

```
struct PCLAnswersReq
Members
string                             | UserName
integer                            | SessionID
array of struct PCLAnswerUnit      | Answers 
```

结构`PCLAnswerUnit`看起来像：

```
Members
integer | QuestionID
string  | Answer 
```

所以`PCLAnswersReq`有用户名、会话ID和结构数组`PCLAnswerUnit`，这很好，但我似乎无法弄清楚如何进入第二个结构。

我的请求（使用 php xml-rpc）如下所示：

```
xmlrpc_encode_request('PCLAnswers',  array("UserName"=>$uname,"SessionID"=>$sesid,"Answers"=>xmlrpc_encode_request('PCLAnswerUnit',array("QuestionID"=>'',"Answer"=>$questions)))); 
```

这当然会导致错误：

```
"request contains string value where array expected [request : parameter 1 : struct mapped to type PCLAnswersReq : member Answers mapped to type PCLAnswerUnit[]]" 
```

我尝试删除第二个 xmlrpc 请求，并仅指向`Answers`QuestionID 和 Answer 数组，但这也不起作用。

任何指导都是有帮助的。

谢谢！

'更新'

当xml-rpc请求修改成这样：

```
xmlrpc_encode_request('PCLAnswers',  array("UserName"=>$uname,"SessionID"=>$sesid,"Answers"=>array())); 
```

它工作正常。但是，当我将“$questions”数组传递给它时，它再次失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:26:04.567

服务器上输入法的签名应该是这样的顺序：return_type,xmlrpcString,xmlrpcString,xmlrpcArray

你可能把它混在了某个地方。返回类型首先是您的三个参数。

# php - scandir 无法打开目录

> ID：11885717
> 
> 赞同：5
> 
> 时间：2012-08-09T14:31:07.563
> 
> 标签：php

我遇到了麻烦`scandir()`。我正在尝试`snaps`在我的云中子域下的页面上显示我的 -directory 中的文件。

这是我使用的PHP。

```
$files = scandir('./snaps');
print_r($files); 
```

这就是错误。

```
Warning: scandir(./snaps) [function.scandir]: failed to open dir: No such file or directory in /home/u703778423/public_html/cloud/index.php on line 39

Warning: scandir() [function.scandir]: (errno 2): No such file or directory in /home/u703778423/public_html/cloud/index.php on line 39 
```

我不知道还能做什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T14:33:37.893

您可能会假设，当前工作目录位于编写脚本的旁边`scandir()`，而（在许多情况下）并非如此。

```
scandir(__DIR__ . '/snaps'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:33:01.080

鉴于该错误，您的 snaps 目录必须具有

```
/home/u703778423/public_html/cloud/snaps 
```

确保这是目录的正确位置，并且网络服务器有权访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T12:46:15.140

首先，您尝试显示一些不会呈现为图像的文件...例如。（。压缩）。

另外，您是否确保不尝试显示前两个索引值“.”和“..”？我认为您的这部分代码可能不是问题...

# css - Twitter Bootstrap 提交按钮放置不正常

> ID：11885724
> 
> 赞同：3
> 
> 时间：2012-08-09T14:31:21.447
> 
> 标签：css, html, twitter-bootstrap

使用默认/垂直表单，[引导文档](http://twitter.github.com/bootstrap/base-css.html#forms)建议提交按钮位于各种输入下方，但[在我的表单中并非如此。](http://anjunatl.com/stack/bootstrap-submit-button-placement.html)

当浏览器具有较大的查看空间时，它位于最后一个输入字段的旁边，并且不在一行中。如果您将浏览器的大小调整为手机或平板电脑的宽度，响应式会接管并正确显示。

将包装 div 从 更改`.span12`为`.span3`将按钮向下推，但这似乎是一个 hackish 修复，因为添加`.span3`到输入和按钮以使其大小一致会[导致按钮被推到一边。](http://anjunatl.com/stack/bootstrap-submit-button-placement-spans.html)

我错过了一些标记还是 Bootstrap 有问题？在他们的文档中，按钮前面有一个复选框标签和一些用 a 包裹的帮助文本，`p`因此这可能会影响他们的样式以使其看起来正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T14:45:46.243

您必须将提交按钮放在带有 class 的 div 中`controls`。

![div.controls 上的按钮](../Images/6bc1132dc96875aaef78a76900dd14cf.png)

如果您在 Bootstrap 文档页面上查看源代码，它们甚至会将所有输入和按钮划分为`control-group`s 和`controls`.

# python - GoTo（基本）程序

> ID：11885734
> 
> 赞同：1
> 
> 时间：2012-08-09T14:31:47.880
> 
> 标签：python, python-3.x, goto

我在网上做一些教程，我坚持做一个练习：编写一个不带参数的函数 getBASIC()，并执行以下操作：它应该使用 while 循环从输入中读取行；当它到达末尾时，它应该以字符串列表的形式返回整个程序。字符串列表示例：

```
5 GOTO 30
10 GOTO 20
20 GOTO 10
30 GOTO 40
40 END 
```

我写了一个程序，但它不起作用，但是我也会发布它：

```
def getBASIC():
    L=[]
    while "END" not in L:
        L.append(str(input()))
        if str(input()).endswith("END"):
            break
    return L 
```

另外我注意到你不允许我使用 IS 或 RECURSION 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:54:23.487

有几个错误：

*   您调用`input()`了两次而没有第二次将其附加到列表中
*   `'END' in L`确定列表中是否有`'END'`（整）行`L`（没有）

注意：`input()`已经返回了一个`str`对象；你不需要调用`str()`它的返回值。

要读取输入直到你有空行，你可以：

```
def getBASIC():
    return list(iter(input, '')) 
```

或者读取直到`END`在行尾遇到：

```
def getBASIC():
    L = []
    while True:
        line = input()
        L.append(line)
        if line.endswith("END"):
           break #NOTE: it doesn't break even if `line` is empty
    return L 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:55:24.470

回到我学习 Pascal 的时候，我们对至少需要一次迭代的循环使用了启动读取。这在 Python 中仍然很有效（我更喜欢它而不是`while True / break`循环）。

通过简单地测试列表中的最后一行（而不是读取的最后一行），我们无需使用变量来存储输入，并且可以结合读取和附加操作。

```
def getBASIC():
    lines = [input("]")]    # use Applesoft BASIC prompt  :-)
    while not lines[-1].upper().rstrip().endswith("END"):
        lines.append(input("]"))
    return lines 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T14:39:23.937

1.  使用`raw_input()`而不是`input()`. input() 函数从标准输入中获取字符串，并尝试将其作为 python 源代码执行。raw_input() 将按预期返回一个字符串。
2.  `input()`您在循环中使用2 次。这意味着您等待在一个循环迭代中输入两个字符串。您的 while 循环中不需要最后一个条件（if 语句）。**当在L**中遇到“END”时，它将结束。

下一个代码应该可以完成这项工作：

```
def getBASIC():
    L=[]
    while True:
        inp = raw_input()
        L.append(inp)
        if inp.endswith('END'):
            break
    return L 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T14:39:36.367

试试这个：

```
def get_basic():
    L = []
    while True:
        line = str( input() )
        L.append( line )
        if "END" in line:
            break
    return L 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T14:52:26.297

您的代码存在以下问题。

1.  如果您的输入是“40 END”， “ `while "END" not in L`”将不起作用
2.  在 Python 2.7 中，“ `input()`”等价于“ `eval(raw_input()))`”。因此，Python 正在尝试评估“GOTO”语句。
3.  " `if str(input()).endswith("END"):`" 不将输入附加到 L

因此，这是您的函数的更新版本：

```
def getBASIC():
    L = []
    while True:
        # Grab input
        L.append(str(raw_input()))

        # Check if last input ends with "END"
        if L[-1].endswith("END"):
            break
    return L 
```

# c# - FindControl 找不到控件

> ID：11885735
> 
> 赞同：0
> 
> 时间：2012-08-09T14:31:50.150
> 
> 标签：c#, asp.net, web-services, web-applications

我对 FindControl 功能有疑问。问题如下：

aspx：

```
<asp:Content ID="MainContent" ContentPlaceHolderID="MainContent" runat="server">
  <ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
  </ajaxToolkit:ToolkitScriptManager>

  <table class="inputTable">
            <tr><td>
                <asp:CheckBox ID="Extern" AutoPostBack="True" OnCheckedChanged="OnCheckedChangedMethod" runat="server" />
                </td><td>Externes Unternehmen</td></tr>
    <tr>         
        <td>
            <asp:TextBox ID="Firmierung" runat="server"></asp:TextBox>
            <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                ControlToValidate="Firmierung" Display="Dynamic" 
                ErrorMessage="RequiredFieldValidator"
                Text="Bitte geben Sie die Firmierung ein."></asp:RequiredFieldValidator>                
        </td>
    </tr>
  </table> 
```

aspx.cs：

```
protected void OnCheckedChangedMethod(object sender, EventArgs e)
    {            
        if (Extern.Checked)
        {                
            Control ctr = FindControl("RequiredFieldValidator1");                
            if (ctr != null)
            {
                ctr.Visible = false;
            }
        }
        else
        {                
        }
    } 
```

但是 FindControl 不起作用，它找不到那个控件。我在任何时候都错了吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:38:20.400

ASP.NET 为您创建一个字段，因为它位于页面中的`Content`:内`this.RequiredFieldValidator1`。

`FindControl`方法是这样的（在母版页的内容面板中找到它）：

```
Control ctr = Master.FindControl("MainContent")
    .FindControl("RequiredFieldValidator1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:41:45.850

根据您有限的来源，您应该能够将您的代码隐藏方法简化为：

```
protected void OnCheckedChangedMethod(object sender, EventArgs e)
{            
    this.RequiredFieldValidator1.Visible = this.Extern.Checked;
} 
```

应该不需要使用 FindControl()。

当您键入“this.”时，如果您的智能感知中没有出现 RequiredFieldValidator1，并且假设您使用的是 ASP.NET 2.0 或更高版本，请检查您的 VS.NET 警告以查看您的 .aspx 是否有带有关联的“生成设计器文件失败”。如果是这样，您必须更正警告。

# xpages - 使用 JSF 将带有分页器的视图添加到 Xpage

> ID：11885738
> 
> 赞同：0
> 
> 时间：2012-08-09T14:32:06.963
> 
> 标签：xpages

我试图在 JSf 中构建一个 Java 类，在这个简单的示例中使用 UiDataview 向 XPage 添加一个带有寻呼机的视图，但我的问题是添加到结果中的寻呼机女巫永远不会显示在我的 Xpage 中。有人知道我该怎么做吗？

```
 public class MainLibcontrol extends UIComponentBase implements FacesComponent {

        private static final String RENDERER_TYPE = "de.my.MainLibcontrol";
        private static final String COMPONENT_FAMILY = "de.my";

        public MainLibcontrol() {
            setRendererType(RENDERER_TYPE);
        }

        @Override
        public String getFamily() {
            return COMPONENT_FAMILY;
        }

        @SuppressWarnings("unchecked")
        public void initBeforeContents(FacesContext arg0) throws FacesException {
            try {
            UIDataView viewtable = new UIDataView();
            viewtable.setColumnTitles(true);
            CategoryColumn categoryColumn = new CategoryColumn();
            categoryColumn.setComponent(viewtable);
            categoryColumn.setColumnName("form");
            categoryColumn.setColumnTitle("form");
            categoryColumn.setContentType("text");
            viewtable.addCategoryColumn(categoryColumn);

            DominoViewData data = new DominoViewData();
            data.setComponent(viewtable);
            data.setViewName("142342");
            data.setVar("view2");
            viewtable.setData(data);
            viewtable.setId("dataView1");
            viewtable.setRows(3);
            SummaryColumn summaryColumn = new SummaryColumn();
            summaryColumn.setComponent(viewtable);
            summaryColumn.setColumnName("5");
            summaryColumn.setColumnTitle("5");
            viewtable.setSummaryColumn(summaryColumn);

            XspPager pager = new XspPager();
            pager.setPartialRefresh(true);
            pager.setLayout("Previous Group Next");
            pager.setId("pager1");

            viewtable.getChildren().add(pager);

            this.getChildren().add(viewtable);
            } catch (Exception e) {
                e.printStackTrace();

            }
        }
        public void buildContents(FacesContext arg0, FacesComponentBuilder arg1) throws FacesException {
                .....
        }

        public void initAfterContents(FacesContext arg0) throws FacesException {
            ....
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:35:21.320

我还没有尝试过，但我想你想将它添加为 viewTable 的一个方面，而不是作为一个孩子。

所以你的线应该是

```
viewtable.getFacets().put("headerPager", pager); 
```

# c# - 复选框看起来像扩展器

> ID：11885739
> 
> 赞同：0
> 
> 时间：2012-08-09T14:32:07.360
> 
> 标签：c#, wpf

我正在尝试制作一个看起来与扩展器按钮完全相同的`checkbox`/类型的东西。我已经为 编写了代码，但希望不要使用。我不确定这是否有意义......怎么办在xml中？`button``IsChecked``checkbox`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:36:58.697

使`CheckBox`看起来像 an的最好方法`Expander`是修改 the `ControlTemplate`（`CheckBox`我假设你已经在尝试这个）。

因此，我会看一下`ControlTemplate`并`Expander`尝试修改它以使用`CheckBox`类的数据（或者也许在过度方向上的方法会更容易，你必须找出来）。

要查看如何定义的`ControlTemplate`，`Expander`您可以使用 Expression Blend 提取模板或查看[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms753296%28v=vs.85%29.aspx)。

# jquery - jQuery .on() 代替 .delegate() 没有事件

> ID：11885746
> 
> 赞同：8
> 
> 时间：2012-08-09T14:32:25.630
> 
> 标签：jquery, jquery-on, jquery-delegate

是否可以使用 jquery`.on()`方法而不是`.delegate()`在没有要监听的事件时使用？

根据`.on()`文档：

> .on( 事件 [, 选择器] [, 数据] , 处理程序(eventObject) )

该`events`参数不是可选的。

`.on()`/用于`.delegate()`动态添加的元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T14:51:27.827

您可以使用自定义事件：（它仍然是一个事件，但您的事件）

标记：

```
<div id='mePlease'>
 <div id='noWay'>Hi</div>
</div>

$('#mePlease').on('wacky','#noWay',function(){
   alert('wackyEnough');
});
$('#noWay').trigger('wacky'); 
```

但实际上，这可以通过一个简单的函数调用来完成。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T14:46:42.817

这些函数的目的是将功能委托给事件；所以不，你不能从这些函数调用中省略 events 参数。

我怀疑您想要的是对页面加载（异步）*之后加载的某些元素“做一些事情”，不是吗？**也许您还需要对*页面加载中已经存在的元素执行此操作？

在这种情况下，我建议您将声明包装在一个函数中，并在页面加载和异步调用完成后调用该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:47:05.957

由于`.on()`它的目的是将事件处理程序附加到某个元素，因此在没有事件的情况下使用它绝对没有意义。这就是为什么需要 event 参数。

从文档：

> 描述：将一个或多个事件的事件处理函数附加到选定元素。

# javascript - 使用 JavaScript 获取表单数据并使用 Ajax 发送数据

> ID：11885747
> 
> 赞同：0
> 
> 时间：2012-08-09T14:32:34.130
> 
> 标签：javascript, jquery, mysql, ajax, database

编辑：发现问题。将我的表单上的 name="demo_name" 和此类项目更改为 id="demo_name" 修复了它。谢谢@吉尔

我正在尝试使用 jquery 的 ajax 功能将联系人表单数据插入 MySQL 数据库。我是新手，它部分工作，但数据作为“未定义”插入到数据库中，而不是输入的值，如姓名、电话等。有人可以帮我查明可能是什么原因造成的吗？（部分是斯洛伐克语，但我将重要部分翻译成英文）

html 页面（只是表单段）：

```
<div id="demo_form">
    <h2>Order a demo lesson!</h2><p>Na Vaše otázky velmi radi co najskôr zodpovieme.<br /> Prípadná <strong>ukážková hodinu je zdarma</strong> a nezáväzná.</p>
        <form name="demo" action"">
            <fieldset>
                <input type="text" class="text" name="demo_name" onblur="swip (this, '', 'Name *');" onfocus="swip (this, 'Meno *', '');" value="Meno *" />
                <input type="text" class="text" name="demo_age" onblur="swip (this, '', 'Age of child');" onfocus="swip (this, 'Vek dietata', '');" value="Vek dietata" />
                <input type="text" class="text" name="demo_email" onblur="swip (this, '', 'E-mail *');" onfocus="swip (this, 'E-mail *', '');" value="E-mail *" />
                <input type="text" class="text" name="demo_phone" onblur="swip (this, '', 'Phone');" onfocus="swip (this, 'Telefón', '');" value="Telefón" />
                <input type="text" class="text big_input" name="demo_where" onblur="swip (this, '', 'Where did you find out about us?');" onfocus="swip (this, 'Odkial ste sa o nás dozvedeli?', '');" value="Odkial ste sa o nás dozvedeli?" />
                <textarea rows="" cols="" name="demo_text" onblur="swip (this, '', 'Message...');" onfocus="swip (this, 'Text správy...', '');">Text správy...</textarea>

                <input type="submit" class="btn" value="Send" />
            </fieldset> 
        </form>
</div><!-- end: #demo_form --> 
```

javascript/jquery：

```
$(function() {  
  $(".btn").click(function() {  
    // validate and process form here

    var demo_name = $("input#demo_name").val();  

    var demo_age = $("input#demo_age").val();  

    var demo_email = $("input#demo_email").val();  

    var demo_phone = $("input#demo_phone").val();  

    var demo_where = $("input#demo_where").val();  

    var demo_text = $("input#demo_text").val();  

    var dataString = 'demo_name='+ demo_name + '&demo_age=' + demo_age + '&demo_email=' + demo_email + '&demo_phone=' + demo_phone + '&demo_where=' + demo_where + '&demo_text=' + demo_text;  

$.ajax({  
  type: "POST",  
  url: "../php/demo_register.php",  
  data: dataString,  
  success: function() {

    $('#demo_form').html("<div id='message'></div>");  
    $('#message').html("<h2>Contact Form Submitted!</h2>")  
    .append("<p>We will be in touch soon.</p>")  

  }  
});  
return false;   
  });  
}); 
```

php脚本：

```
<?php

include("../protected/config.php");
// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$demo_name=$_POST['demo_name'];
$demo_age=$_POST['demo_age'];
$demo_email=$_POST['demo_email'];
$demo_phone=$_POST['demo_phone'];
$demo_where=$_POST['demo_where'];
$demo_text=$_POST['demo_text'];

// To protect MySQL injection
$demo_name = stripslashes($demo_name);
$demo_age = stripslashes($demo_age);
$demo_email = stripslashes($demo_email);
$demo_phone = stripslashes($demo_phone);
$demo_where = stripslashes($demo_where);
$demo_text = stripslashes($demo_text);

$demo_name = mysql_real_escape_string($demo_name);
$demo_age = mysql_real_escape_string($demo_age);
$demo_email = mysql_real_escape_string($demo_email);
$demo_phone = mysql_real_escape_string($demo_phone);
$demo_where = mysql_real_escape_string($demo_where);
$demo_text = mysql_real_escape_string($demo_text);

$insert = mysql_query("INSERT INTO $tbl_name (name, age, email, phone, kde, text) VALUES ('$demo_name', '$demo_age', '$demo_email', '$demo_phone', '$demo_where', '$demo_text')");

if(!$insert){ 
die("There's a little problem: ".mysql_error()); 
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:35:40.893

您应该`dataString`在此表格下：

```
var dataString = {demo_name: demo_name, demo_age: demo_age, and_so_on: and_so_on}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:15:53.143

更优选的方式：

```
var dataString = $("form[name='demo']").serialize(); 
```

# python - cv2.kmeans 在 Python 中的用法

> ID：11885751
> 
> 赞同：9
> 
> 时间：2012-08-09T14:32:39.407
> 
> 标签：python, opencv

我正在考虑使用 OpenCV 的 Kmeans 实现，因为它说更快......

现在我正在使用包 cv2 和函数 kmeans，

我无法理解他们参考中的参数描述：

```
Python: cv2.kmeans(data, K, criteria, attempts, flags[, bestLabels[, centers]]) → retval, bestLabels, centers
samples – Floating-point matrix of input samples, one row per sample.
clusterCount – Number of clusters to split the set by.
labels – Input/output integer array that stores the cluster indices for every sample.
criteria – The algorithm termination criteria, that is, the maximum number of iterations and/or the desired accuracy. The accuracy is specified as criteria.epsilon. As soon as each of the cluster centers moves by less than criteria.epsilon on some iteration, the algorithm stops.
attempts – Flag to specify the number of times the algorithm is executed using different initial labelings. The algorithm returns the labels that yield the best compactness (see the last function parameter).
flags –
Flag that can take the following values:
KMEANS_RANDOM_CENTERS Select random initial centers in each attempt.
KMEANS_PP_CENTERS Use kmeans++ center initialization by Arthur and Vassilvitskii [Arthur2007].
KMEANS_USE_INITIAL_LABELS During the first (and possibly the only) attempt, use the user-supplied labels instead of computing them from the initial centers. For the second and further attempts, use the random or semi-random centers. Use one of KMEANS_*_CENTERS flag to specify the exact method.
centers – Output matrix of the cluster centers, one row per each cluster center. 
```

论据`flags[, bestLabels[, centers]])`是什么意思？那他的呢：`→ retval, bestLabels, centers`？

这是我的代码：

```
import cv, cv2
import scipy.io
import numpy

# read data from .mat file
mat = scipy.io.loadmat('...')
keys = mat.keys()
values = mat.viewvalues()

data_1 = mat[keys[0]]
nRows = data_1.shape[1] 
nCols = data_1.shape[0]
samples = cv.CreateMat(nRows, nCols, cv.CV_32FC1)
labels = cv.CreateMat(nRows, 1, cv.CV_32SC1)
centers = cv.CreateMat(nRows, 100, cv.CV_32FC1)
#centers = numpy.

for i in range(0, nCols):
    for j in range(0, nRows):
        samples[j, i] = data_1[i, j]

cv2.kmeans(data_1.transpose,
                              100,
                              criteria=(cv2.TERM_CRITERIA_EPS | cv2.TERM_CRITERIA_MAX_ITER, 0.1, 10),
                              attempts=cv2.KMEANS_PP_CENTERS,
                              flags=cv2.KMEANS_PP_CENTERS,
) 
```

我遇到这样的错误：

```
flags=cv2.KMEANS_PP_CENTERS,
TypeError: <unknown> is not a numpy array 
```

cv2.kmeans的参数列表和用法应该怎么理解？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-13T09:40:25.253

几乎找不到有关此功能的文档。我有点匆忙写了下面的 Python 代码，但它可以在我的机器上运行。它生成两个具有不同均值的多元高斯分布，然后使用 cv2.kmeans() 对它们进行分类。您可以参考[这篇博](http://www.aishack.in/tutorials/kmeans-clustering-opencv/)文来了解这些参数。

处理进口：

```
import cv
import cv2
import numpy as np
import numpy.random as r 
```

生成一些随机点并适当地塑造它们：

```
samples = cv.CreateMat(50, 2, cv.CV_32FC1)
random_points = r.multivariate_normal((100,100), np.array([[150,400],[150,150]]), size=(25))
random_points_2 = r.multivariate_normal((300,300), np.array([[150,400],[150,150]]), size=(25))   
samples_list = np.append(random_points, random_points_2).reshape(50,2)  
random_points_list = np.array(samples_list, np.float32) 
samples = cv.fromarray(random_points_list) 
```

绘制分类前后的点：

```
blank_image = np.zeros((400,400,3))
blank_image_classified = np.zeros((400,400,3))

for point in random_points_list:
    cv2.circle(blank_image, (int(point[0]),int(point[1])), 1, (0,255,0),-1)

temp, classified_points, means = cv2.kmeans(data=np.asarray(samples), K=2, bestLabels=None,
criteria=(cv2.TERM_CRITERIA_EPS | cv2.TERM_CRITERIA_MAX_ITER, 1, 10), attempts=1, 
flags=cv2.KMEANS_RANDOM_CENTERS)   #Let OpenCV choose random centers for the clusters

for point, allocation in zip(random_points_list, classified_points):
    if allocation == 0:
        color = (255,0,0)
    elif allocation == 1:
        color = (0,0,255)
    cv2.circle(blank_image_classified, (int(point[0]),int(point[1])), 1, color,-1)

cv2.imshow("Points", blank_image)
cv2.imshow("Points Classified", blank_image_classified)
cv2.waitKey() 
```

在这里您可以看到原始点：

![分类前的点](../Images/6b40c29468f3a3bf8fab8d0ef1c71102.png)

以下是分类后的要点： ![分类后的积分](../Images/997445feaf005d704b4f414d01f81e0e.png)

我希望这个答案可以帮助你，它不是一个完整的 k-means 指南，但它至少会告诉你如何将参数传递给 OpenCV。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:32:41.267

这里的问题是你`data_1.transpose`不是一个 numpy 数组。

`numpy array`OpenCV 2.3.1 和更高版本的 python 绑定除了作为图像/数组参数之外不接受任何内容。所以，`data_1.transpose`必须是一个numpy数组。

通常，OpenCV 中的所有点都是类型`numpy.ndarray`

例如。

```
array([[[100., 433.]],
       [[157., 377.]],
       .
       .  
       [[147., 247.]], dtype=float32) 
```

其中数组的每个元素是

```
array([[100., 433.]], dtype=float32) 
```

并且该数组的元素是

```
array([100., 433.], dtype=float32) 
```

# c++ - 指向过程的指针

> ID：11885755
> 
> 赞同：3
> 
> 时间：2012-08-09T14:32:50.233
> 
> 标签：c++, function-pointers

是否可以通过指针调用过程？我在互联网上没有找到任何关于它的信息，但是下面的实验代码编译时没有警告。

```
#include <iostream>
#include <ctime>

using namespace std;

void PrintCurrentClock()
{
    cout<<clock()<<endl;
}

void PrintCurrentTimeStamp()
{
    cout<<time(0)<<endl;
}

int main()
{
    void* pF = PrintCurrentClock;

    pF;

    pF = PrintCurrentTimeStamp;

    pF;

    system("Pause");
    return 0;
} 
```

输出是空的，好像`*pF`有点“透明”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:37:11.603

C 和 C++ 都有函数指针，可让您执行所需的操作：

```
void (*pf)(void);
pf = FunctionWithVeryVeryVeryLongNameThatPrintsTheCurrentClockStateUsingStdCoutOutputStream;
pf(); 
```

`void`括号中的是可选的。

您没有在该主题上找到任何内容的原因是由于历史原因，C 中的函数和过程都称为函数（原因是`void`原始语言中没有 -`int`默认返回过程，并且返回值被忽略）。C++ 继承了这个命名约定。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T14:37:28.270

你想要的是*函数指针*：

```
void (*pF)() = PrintCurrentClock;
pF(); 
```

（有些人认为写作`&PrintCurrentClock`是更好的风格）

请注意，如您所见，函数指针的语法非常笨拙（特别是如果您开始使用带有“奇怪”参数的函数指针）并且可能会阻止某些编译器优化正常工作，因此它们通常仅在实际需要时使用（例如，对于回调，尽管在 C++ 中通常首选仿函数）。

* * *

为什么你的代码编译，虽然它没有按预期工作？在

```
void* pF = PrintCurrentClock; 
```

`PrintCurrentClock`是 a `void (*pF)()`，它被隐式转换为`void *`¹；然后，写

```
pF; 
```

您正在评估表达式`pF`并丢弃其返回值 - 这实际上是一个无操作（就像您编写`5;`或任何其他不涉及函数调用的表达式一样）。

* * *

1.  实际上，这种转换不应该自动发生，因为 C++ 标准不提供从函数指针到`void *`. 用 g++ 4.6 正确编译它会产生错误：

    ```
    matteo@teolapmint ~/cpp $ g++ -Wall -Wextra -ansi -pedantic testfuncptr.cpp 
    testfuncptr.cpp: In function ‘int main()’:
    testfuncptr.cpp:19:20: error: invalid conversion from ‘void (*)()’ to ‘void*’ [-fpermissive]
    testfuncptr.cpp:21:15: warning: statement has no effect [-Wunused-value]
    testfuncptr.cpp:23:22: error: invalid conversion from ‘void (*)()’ to ‘void*’ [-fpermissive]
    testfuncptr.cpp:25:23: warning: statement has no effect [-Wunused-value]
    testfuncptr.cpp:27:39: error: ‘system’ was not declared in this scope 
    ```

    它告诉您不允许这些转换，`pF;`说明是无操作的并且您忘记了`#include <cstdlib>`（尽管`system("pause");`无论如何都不是便携式的）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T14:36:32.453

您创建和使用函数指针的方式略有偏差。以下是如何执行此操作的示例：

```
void proc() {
    cout << "Hello from proc" << endl;
} 
```

...

```
void (*pproc)() = proc;

pproc(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T15:45:24.287

是的你可以：

虽然类型系统有点复杂。
因此，通常将指向函数的指针包装在 typedef 中。

```
typedef <returnType> (*<TypeName>)(<ParameterList>);

// In your case:

tpyedef void (*PtrToTimeFunc)();

// Now your pointer types look like normal variables:
PtrToTimeFunc  pf = &PrintCurrentTimeStamp;

// Calling them is like normal:
pf(); // If it needed parameters then put them as normal. 
```

因为C++编译器不能通过函数指针来优化代码；在 C++ 中，通常使用函子。仿函数是一个行为类似于函数的对象，但是因为它是一个对象，所以也可以包含状态（就像其他语言中的闭包一样）。

```
struct MyFunctor
{
    // To make a functor just override the operator ()
    // You can make it return any type and take any parameters (just like a function).
    int operator()() const
    {
        return time(NULL);
    }

    // Add any state and constructors etc. you like here.
    // Though note: because I declared the operator() as const you
    // can not mutate the state via the function call (remove cost)
    // if you want to do that.
};

// declaring a functor just like any-other object.
MyFunctor  myFunctor;

// calling. Just like a function.
myFunctor(); 
```

好的。那么为什么这比指针更有用。

与标准算法一起使用时。您使用类型定义算法，`functor`因此编译器生成算法代码，它还具有函子的所有代码（与过去无法优化的函数指针不同）。这允许编译器就地进行一整套优化。

```
std::generate(cont.begin(), cont.end(), myFunctor); 
```

所以在 C++ 11 中我们引入了 lambdas。这些基本上是可以就地定义的功能。但更容易将 lambdas 视为编译器生成的函子（因为它们`can`将当前状态作为定义的一部分）。

```
std::generate(cont.begin(), cont.end(), [](){return time(NULL);});

// [] - defines the state that is being captured.
//      Think of this like the constructor capturing objects.
//      In this case take no state.
//
// () - parameter list
//      In this case no parameters
//
// {} - The code. 
```

一个更有趣的例子：

```
std::vector<int> data; // fill vector
std::for_each(data.begin(), data.end(), [](int& value){value += 4;}); // Add 4 to each member. 
```

# php - 启用 mod_rewrite 时页面被多次加载（并且缺少 css）

> ID：11885760
> 
> 赞同：0
> 
> 时间：2012-08-09T14:33:12.827
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我已经启用`mod_rewrite`并且正在使用一个`.htaccess`文件来传递所有请求`index.php`。

如果我访问 URL

```
http://localhost/mysite

http://localhost/mysite/abc 
```

页面加载一次。

但是，如果我在路径中添加额外的部分，页面会加载 3 次，并且我的 css 文件不会被包含在内：

```
http://localhost/mysite/abc/xyz

http://localhost/mysite/abc/xyz/ttt 
```

ETC...

所有这些都会导致页面加载 3 次。我可以看到这一点，因为我`index.php`在**Eclipse**中设置了断点。

这是我的`.htaccess`文件：

```
<IfModule mod_rewrite.c>
  RewriteEngine on

  # Block access to "hidden" directories whose names begin with a period. 
  # Files whose names begin with a period are protected by the FilesMatch directive
  # above.
  RewriteRule "(^|/)\." - [F]

  # Pass all requests not referring directly to files in the filesystem to
  # index.php. Clean URLs are handled in drupal_environment_initialize().
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ index.php [L]
</IfModule> 
```

任何想法为什么页面被多次加载并且缺少css？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:39:46.530

我相信**RewriteRule ^ index.php**是因为空间的问题。

试试这个：

```
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

**RewriteRule**模式替换标志
模式：是否请求文件 index.php
替换：无（- 表示不替换）
标志：L - 最后**（不再执行）**

**Condition1** : 如果请求的文件不存在

**条件2**：如果请求的文件不是目录

应用下一个重写规则
**RewriteRule**模式替换标志
模式：任何
替换：/index.php
标志：L - 最后（不要再做）
IE 跳转到 /index.php

所以总而言之：
如果请求的文件是 index.php 确定（并停止处理任何更多规则） ，
否则
如果文件存在，则执行
如果文件是目录，则进入该目录，
否则
跳转到根 web 目录中的 index.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-17T07:13:13.777

我想将我的情况添加为附加信息。我发现这个答案也可以解决我的问题。

我遇到的问题完全一样。我执行了一个数据库插入，我注意到该条目被插入了随机次数。

有时15，有时2，有时25。

我必须改变的行是：

```
RewriteRule    (.*) core/$1    [L] 
```

**至**

```
RewriteRule    (.*)core/$1    [L] 
```

因此**(.*) core/$1**之间是一个空格，应该删除。

# asp.net-mvc - 如何从数据角色按钮弹出警报？

> ID：11885762
> 
> 赞同：0
> 
> 时间：2012-08-09T14:33:18.980
> 
> 标签：asp.net-mvc, razor

当用户单击删除按钮时，我想显示一个警报，如下所示：

```
@Html.ActionLink("Delete", "Delete", new { id = Model.ID }, new { @data_role = "button" }) 
```

我不确定如何从此按钮获取 onclick 的 id 和事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:01:18.290

你可以给这个锚点一个 id：

```
@Html.ActionLink(
    "Delete", 
    "Delete", 
    new { id = Model.ID }, 
    new { id = "delete", data_role = "button", data_id = Model.ID }
) 
```

然后使用 jQuery 订阅`click`事件：

```
$(function() {
    $('#delete').click(function() {
        var id = $(this).data('id');
        return confirm('Are you sure you want to delete record with id: ' + id);
    });
}); 
```

如果您不使用 jQuery 而是使用普通的 javascript：

```
window.onload = function() {
    document.getElementById('delete').onclick = function() {
        var id = this.getAttribute('data-id');
        return confirm('Are you sure you want to delete record with id: ' + id);
    };
}; 
```

javascript 函数显示消息并根据[`.confirm()`](https://developer.mozilla.org/en-US/docs/DOM/window.confirm)用户是单击“确定”还是“取消”按钮返回真或假。

# include - 如何在 Shopify 中为应用使用 {% include ''" %}

> ID：11885763
> 
> 赞同：1
> 
> 时间：2012-08-09T14:33:19.233
> 
> 标签：include, frontend, shopify

我在这里有一个 shopify 测试应用程序（用 rails 编写）：http: [//csiga-second-shopify.herokuapp.com/](http://csiga-second-shopify.herokuapp.com/)

我怎样才能制作一个非常简单的应用程序，店主可以包含在内。我想做类似于 AddThis 应用程序。（[http://www.addthis.com/shopify/preferences#.UCPF28ge6CU](http://www.addthis.com/shopify/preferences#.UCPF28ge6CU)）

如何将 {% include 'foo' %} 函数连接到我部署的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T15:54:37.333

如果您想在安装您的应用程序时将资产添加到商店，您必须首先让商家批准您的应用程序才能将资产添加到商店。其次，您必须安装资产，在本例中为“foo.liquid”。一旦它成为商店中的资产，您就可以让主题引用资产，使用包含。

请注意，这有点棘手，因为当商家卸载应用程序时，您安装的任何资产都不会自动删除。那可以被认为是垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:51:31.200

您想在部署的应用程序中添加 {% include 'foo' %} 的位置？AddThis 链接什么也不做，只是重定向到 Shopify 的登录页面。如果您想发布您的应用首先构建它，然后在 Google 群组上的 Shopify 测试社区对其进行测试，然后将其发送以进行发布。15 天后，他们将回复您的应用已发布的消息。

您无法使用当前 API 添加 Shopify 在其页面中提供的任何流动代码。您可以添加 Javascript，它甚至可以充当样式表。

# security - 通过安全透明方法 X 尝试访问安全关键方法 Y 失败

> ID：11885764
> 
> 赞同：24
> 
> 时间：2012-08-09T14:33:20.370
> 
> 标签：security, .net-4.0, cas, code-access-security

我有一个相当稳定的服务器应用程序版本，已经在几十个客户中部署了将近一年。

一位新客户最近设置了应用程序并收到以下错误：

> System.MethodAccessException：尝试通过安全透明方法 [SomeMethod] 访问安全关键方法 [SomeOtherMethod] 失败。

SomeMethod 和 SomeOtherMethod 都是我编写的程序集中的方法，它们是针对 .NET 4 构建的，并且在 Windows 服务中运行。如果有所不同，SomeOtherMethod 确实引用了针对 .NET 2.0 构建的第 3 方程序集 (EntLib 4.1) 中的类型。查看 EntLib 4.1 的代码，我确实看到它们同时使用了 SecurityTransparent 和 APTC 属性，但这从未在其他客户端引起问题。

这些程序集是从 .NET 2.0 CLR 升级而来的，但在很久以前。这个确切的代码在其他客户上运行得很好，我没有明确使用 APTC 属性，也没有在任何地方使用 SecurityCritical 属性。

这使我得出结论，这是一个配置问题，或者可能是 .NET Framework 补丁问题。是否有针对 .NET 发布的补丁会导致这种重大变化？是否有一些配置设置强制执行这种类型的检查，默认情况下它是关闭的，但我的客户可能已经启用？

最后一点。我的服务利用 SSRS RDLC 生成 PDF。由于 .NET 4 中的一些更改，我必须通过以下配置强制服务使用旧版安全策略：

```
 <runtime>
    <NetFx40_LegacySecurityPolicy enabled="true" />
  </runtime> 
```

有关我为什么需要这样做的更多详细信息，请参阅此 stackoverflow 帖子：[.NET 4.0 中的内存使用量非常高](https://stackoverflow.com/questions/6220915/very-high-memory-usage-in-net-4-0/)

重要的是，我对所有其他客户也这样做。只有这一位客户有问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-13T21:30:20.770

Sigh, the patterns and practices employed by the Microsoft Patterns And Practices team that's responsible for the Enterprise libraries are pretty deplorable. Well, the exception is accurate, you cannot call a method that's decorated as "I'll definitely check security" from code that's decorated with "Meh, I won't check security so don't bother burning the cpu cycles to check it". Which scales about as well as exception specifications as used in Java. CAS is incredibly useful, but diagnosing the exceptions is a major headache and often involves code that you don't own and can't fix. Big reason it got deprecated in .NET 4.

Editorial done. Taking a pot-shot at the problem, you need to find out why CAS is being enforced here. The simplest explanation for that is that the service doesn't run in full trust. The simplest explanation for *that* is that the client didn't install the service on the local hard drive. Or is generally running code in don't-trust-it mode even on local assemblies, a very paranoid admin could well prefer that. That needs to be configured with Caspol.exe, a tool whose command line options are as mysterious as CAS. Pot-shooting at the non-trusted location explanation, your client needs to run Caspol as shown in this [blog post](http://blogs.msdn.com/b/shawnfa/archive/2004/12/30/344554.aspx). Or just simply deploy the service locally so the default "I trust thee" applies.

Editing in the real reason as discovered by the OP: beware of the [alternate data stream](http://blogs.technet.com/b/askcore/archive/2013/03/24/alternate-data-streams-in-ntfs.aspx) that gets added to a file when it is downloaded from an untrusted Internet or network location. The file will get a stream named "Zone.Identifier" that keeps track of where it came from with the "ZoneId" value. It is that value that overrides the trust derived from the storage location. Usually putting it in the Internet zone. Use Explorer, right-click the file and click "Unblock" to remove that stream. After you're sure you can trust the file :)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-06T16:27:38.637

如果它可以帮助其他人，我会针对这个问题发布我的解决方案：

1) 在 AssemblyInfo.cs 上，删除/注释了 [assembly: SecurityTransparent] 行。

2) 执行实际作业的类和方法被标记为`[SecuritySafeCritical]`，在我的情况下建立网络连接：

```
[SecuritySafeCritical]
public class NetworkConnection : IDisposable
{
    [SecuritySafeCritical]
    public NetworkConnection(string networkName, NetworkCredential credentials)
    {
        .............
    }
} 
```

3) 调用者类和方法被市场为 [SecurityCritical]：

```
[SecurityCritical]
public class DBF_DAO : AbstractDAO
{
    [SecurityCritical]
    public bool DBF_EsAccesoExclusivo(string pTabla, ref ArrayList exepciones)
    {
        ....
        using (new NetworkConnection(DBF_PATH, readCredentials))
        {
            ....
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-07-30T16:34:58.317

在使用他们的 ServiceModelEx 库时，我在运行从[http://www.idesign.net/下载的 WCF 示例时遇到了类似的问题。](http://www.idesign.net/)我在 ServiceModelEx 项目的 AssemblyInfo.cs 中注释掉了以下行

```
//[assembly: AllowPartiallyTrustedCallers] 
```

它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-06T09:32:56.477

就我而言，当我在解决方案中管理 NuGet 包时，某些包会覆盖主网站项目中的 System.Web.Mvc 程序集版本绑定，这是一个问题。设置回 4.0.0.0（我安装了 5.0）。我没有更改通知更改，因为 Mvc v4.0 已安装并可通过 GAC 访问。退后

# web-services - 如何使用 Flex Mobile 加载外部数据？

> ID：11885767
> 
> 赞同：0
> 
> 时间：2012-08-09T14:33:24.650
> 
> 标签：web-services, apache-flex, mobile

我需要构建一个能够从网络下载数据（产品动画和相关数据）的 flex 移动应用程序（iOS/Android）。

如果我添加任何产品线并离线缓存数据（我猜是在 SQlite 中），它需要处理其他产品线。

我认为 Web 服务可能是答案，但是否可以使用此方法加载外部库，例如 SWF 或 SWC？

一如既往地感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:43:14.983

> 我认为 Web 服务可能是答案，但是否可以使用此方法加载外部库，例如 SWF 或 SWC？

如果您需要将数据传入和传出 Flex 应用程序，则可以使用[RemoteObject](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/remoting/mxml/RemoteObject.html) (AMF)、[WebService](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/soap/mxml/WebService.html) (SOAP) 或[HTTPService](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/http/mxml/HTTPService.html) (REST)。我个人的建议是尽可能使用 RemoteObject/AMF。

[您可以使用SWFLoader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/SWFLoader.html)在运行时加载另一个 SWF 。我很确定 SWFLoader 不会在 iOS 上运行，因为 iOS 开发者协议中有条款规定您可以拥有在运行时解释其他代码或类似内容的代码。

# android - 如何通过页面查看器显示页面间隔

> ID：11885770
> 
> 赞同：1
> 
> 时间：2012-08-09T14:33:29.833
> 
> 标签：android, android-viewpager

我目前正在制作一本类似游戏的小书以用于教育目的，并且我正在使用页面查看器将我的 Strings.xml 中的信息放在每个页面上。这是一本相当小的书，所以我就是这样做的。我已显示所有页面，您可以毫无问题地滑动浏览。当我只想显示一定间隔的页面时，我的问题就开始了。游戏共有三节课。第一课有 2 页（1-2），第二课有（3-9），第三课有（10-15）。总共有15页的信息。

有没有办法让页面查看器只显示一定间隔的页面？

我让用户选择一个按钮，这会将选择的课程的意图发送到另一个名为 BookActivity 的类。从那里我想弄清楚点击了哪一课，并希望根据它显示某些页面。这是 bookActivity 类。

```
 public class BookActivity extends Activity
{
    private String getLessonName;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Intent intent = getIntent();
        // getting object's properties from LoginActivity class.

        getLessonName = intent.getStringExtra("nameOfLesson");
        MyPageAdapter adapter = new MyPageAdapter();
        ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);

       // Button addBasicQuestionsForFirstLesson = (Button)findViewById(R.id.addBasicQuestionsButton);
        myPager.setAdapter(adapter);

        if(getLessonName.equals("one"))
        {
        myPager.setCurrentItem(0);
        if(myPager.getCurrentItem() == 1)
        {
            myPager.setCurrentItem(1);
        }
        }
        else if(getLessonName.equals("two"))
        {
            myPager.setCurrentItem(2);
            if(myPager.getCurrentItem() == 8)
            {
                myPager.setCurrentItem(8);
            }
        }
        else if(getLessonName.equals("three"))
        {
            myPager.setCurrentItem(9);
            if(myPager.getCurrentItem()==14)
            {
                myPager.setCurrentItem(14);
            }
        }

    }

} 
```

非常感谢你帮我看这个。如果有人知道如何做这样的事情，我将不胜感激。如果有办法更好地做到这一点，我不想为单独的页面制作多个活动......

```
 class MyPageAdapter extends PagerAdapter 
```

{

```
public int getCount()
{
    return 15;
}

public Object instantiateItem(View collection, int position)
{

    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position)
    {
    case 0:

        resId = R.layout.activity_page_one;

        break;
    case 1:
        // second page with button to add questions!
        resId = R.layout.activity_page_two;

        View view = inflater.inflate(resId, null);
        LinearLayout layout = (LinearLayout) view
                .findViewById(R.id.linearbasic);
        Button addButton = (Button) layout
                .findViewById(R.id.addBasicQuestionsButton);
        ((ViewPager) collection).addView(view, 0);

        addButton.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                Log.d("clicked", "clclcl");
                LessonActivity.
                importQuestions("lessononebasicquestions");
                // LessonActivity.clicked = true;
                // Toast.makeText(getApplicationContext(), "yay",
                // Toast.LENGTH_LONG).show();

            }
        });

        return view;

        // break;
    case 2:

        resId = R.layout.activity_page_three;

        break;
    case 3:
        resId = R.layout.activity_page_four;
        break;
    case 4:
        resId = R.layout.activity_page_five;
        break;
    case 5:
        resId = R.layout.activity_page_six;
        break;
    case 6:
        resId = R.layout.activity_page_seven;
        break;
    case 7:
        resId = R.layout.activity_page_eight;
        break;
    case 8:
        resId = R.layout.activity_page_nine;

        View view2 = inflater.inflate(resId, null);
        LinearLayout layout2 = (LinearLayout) view2
                .findViewById(R.id.linearlife);
        Button lifeCycleButton = (Button) layout2
                .findViewById(R.id.addLifeCycleButton);
        ((ViewPager) collection).addView(view2, 0);

        lifeCycleButton.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                Log.d("clicked", "clclcl");
                LessonActivity
                .importQuestions("lessontwolifecyclequestions");
                // LessonActivity.clicked = true;
                // Toast.makeText(getApplicationContext(), "yay",
                // Toast.LENGTH_LONG).show();

            }
        });

        return view2;

    case 9:
        resId = R.layout.activity_page_ten;
        break;
    case 10:
        resId = R.layout.activity_page_eleven;
        break;
    case 11:
        resId = R.layout.activity_page_twelve;
        break;
    case 12:
        resId = R.layout.activity_page_thirteen;
        break;
    case 13:
        resId = R.layout.activity_page_fourteen;
        break;
    case 14:
        resId = R.layout.activity_page_fifteen;

        View view3 = inflater.inflate(resId, null);
        LinearLayout layout3 = (LinearLayout) view3
                .findViewById(R.id.lineartools);
        Button toolsButton = (Button) layout3
                .findViewById(R.id.addToolsQuestionsButton);
        ((ViewPager) collection).addView(view3, 0);

        toolsButton.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                Log.d("clicked", "clclcl");
                LessonActivity.
                importQuestions("lessonthreetoolsquestions");
                // LessonActivity.clicked = true;
                // Toast.makeText(getApplicationContext(), "yay",
                // Toast.LENGTH_LONG).show();

            }
        });

        return view3;

    }
    View view = inflater.inflate(resId, null);

    ((ViewPager) collection).addView(view, 0);

    return view;

}

@Override
public void destroyItem(View arg0, int arg1, Object arg2)
{
    ((ViewPager) arg0).removeView((View) arg2);

}

@Override
public Parcelable saveState()
{
    return null;
}

@Override
public boolean isViewFromObject(View arg0, Object arg1)
{
    // TODO Auto-generated method stub
    return arg0 == ((View) arg1);
} 
```

}

再次感谢你。这是我添加的代码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:57:08.173

您可以使用监听器来进行页面更改，然后在用户超出您的范围时强制用户访问某个页面。使用`onPageSelected()`您可以检测到越界页面，然后强制用户转到上一页。这是监听器：http: [//developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)

我认为更好的解决方案是仅根据用户选择的课程将某些页面添加到您的 ViewPager 中。如果您有一个带有用于选择课程的按钮的主活动，那么当单击它们时，它们可以启动不同的活动，其中 ViewPagers 填充了您想要的页面。所以它看起来像：

```
MainActivity
- Button1
    -Activity with ViewPager for pages 1-2
- Button2
    -Activity with ViewPager for pages 3-9
- Button3
    -Activity with ViewPager for pages 10-15 
```

我认为这样的结构更有条理。

# c++ - 为什么我在工具条上得到一条垂直线？

> ID：11885780
> 
> 赞同：3
> 
> 时间：2012-08-09T14:33:58.770
> 
> 标签：c++, winforms, toolstrip

我有两个 Windows 窗体工具条，其中包含窗体上的一些控件。然而，出于某种奇怪的原因，它们在右侧包含一条垂直线。我找不到任何可以删除它们的属性，也找不到有关如何在线删除它们的任何其他信息。

![问题说明](../Images/167fde934e4f0c7ae7f0489fc17fe68c.png)

任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T17:50:55.167

它是工具条的边界。旨在在多个相邻工具条之间提供清晰的分隔。将其 RenderMode 属性更改为 System 将是摆脱它的一种方法，尽管这会改变外观。或者您可以编写自己的渲染器来摆脱它。AC# 示例：

```
 public Form1() {
        InitializeComponent();
        toolStrip1.Renderer = new MyRenderer();
    }
    private class MyRenderer : ToolStripProfessionalRenderer {
        protected override void OnRenderToolStripBorder(ToolStripRenderEventArgs e) {
            // Do nothing
        }
    } 
```

# jquery - 修改对话框的 CSS（宽度）

> ID：11885782
> 
> 赞同：1
> 
> 时间：2012-08-09T14:34:08.733
> 
> 标签：jquery, css, dialog

我使用一个包含 div 等的对话框。它由以下内容定义：

```
$dialogContent2.dialog({
    modal: true,
    title: "S\351lectionner une activit\351",
    close: function () {
        $dialogContent2.dialog("destroy");
        $dialogContent2.hide();
    },
    buttons: [{
        ...
    }]
}); 
```

是否可以定义对话框的宽度？

我试图在我的 css 文件中直接修改它，并修改每个包含元素的宽度，但它不起作用。

在此先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:37:11.773

是：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

您可以指定宽度，它是一个选项：

**代码示例**

使用指定的宽度选项初始化对话框。

```
$( ".selector" ).dialog({ width: 460 }); 
```

在 init 之后获取或设置宽度选项。

//吸气剂

```
var width = $( ".selector" ).dialog( "option", "width" ); 
```

//二传手

```
$( ".selector" ).dialog( "option", "width", 460 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:36:09.457

```
$dialogContent2.dialog({
    width:480,
    modal: true,
    title: "S\351lectionner une activit\351",
    close: function () {
        $dialogContent2.dialog("destroy");
        $dialogContent2.hide();
    },
    buttons: [{
        ...
    }]
}); 
```

# c++ - 错误：使用 typedef 之前的声明符无效

> ID：11885783
> 
> 赞同：0
> 
> 时间：2012-08-09T14:34:11.763
> 
> 标签：c++, compiler-errors, typedef

```
#ifndef CLASS_VEHICLE_
#define CLASS_VEHICLE_

#include "ns3/ptr.h"
#include "ns3/object.h"
#include "ns3/vector.h"
#include "ns3/core-module.h"
#include "ns3/network-module.h"
#include "ns3/mobility-module.h"
#include "ns3/config-store-module.h"
#include "ns3/wifi-module.h"
#include "Cluster.h"

namespace ns3
{
class Cluster;

/// define type DeviceTraceCallback
typedef Callback<void, Ptr<Vehicle>, std::string, Ptr<const Packet> > DeviceTraceCallback;  // Line where the error is
/// define type VehicleReceiveCallback.
typedef Callback<void, Ptr<Vehicle>, Ptr<const Packet>, Address> VehicleReceiveCallback;
/// define type PhyRxOkTraceCallback.
typedef Callback<void, Ptr<Vehicle>, std::string, Ptr<const Packet>, double, WifiMode, enum WifiPreamble> PhyRxOkTraceCallback; 
/// define type PhyRxErrorTraceCallback.
typedef Callback<void, Ptr<Vehicle>, std::string, Ptr<const Packet>, double> PhyRxErrorTraceCallback; 
/// define type PhyTxTraceCallback.
typedef Callback<void, Ptr<Vehicle>, std::string, Ptr<const Packet>, WifiMode, WifiPreamble, uint8_t> PhyTxTraceCallback; 
/// define type PhyStateTraceCallback.
typedef Callback<void, Ptr<Vehicle>, std::string, Time, Time, enum WifiPhy::State> PhyStateTraceCallback;

class Vehicle : public ns3::Object
{
  ... code section

 };
};
#endif 
```

我正在研究 ns3，我必须实现一个代码，它可以让我对车辆网络进行一些模拟。我有几节课，但只有一节很烦人。事实上，当我编译时，我有这个特殊的错误：

> “/src/vanet/model/Vehicle.h:45：错误：'DeviceTraceCallback'之前的声明符无效”

它带来了很多其他错误

> “/src/vanet/model/Vehicle.h:212：错误：‘DeviceTraceCallback’没有命名类型”

或者

> “../src/vanet/model/Vehicle.h:214：错误：‘DeviceTraceCallback’尚未声明”。

我真的不明白我做错了什么，所以如果有人可以帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:49:07.450

您还没有向我们展示错误所指的源代码行，但我假设它是这个：

```
typedef Callback<void, Ptr<Vehicle>, std::string, Ptr<const Packet> > DeviceTraceCallback; 
```

Have all the types and templates mentioned in that line been declared in one of the headers you've included? In particular:

*   You haven't directly included `<string>`. It's a good idea to do that, even if one of the other headers might include it indirectly.
*   You haven't declared the `Vehicle` type, defined later in this file. You'll need a declaration (`class Vehicle;` inside `namespace ns {}`) before you can use it in this declaration.

# c# - 如何在当前鼠标位置设置工具提示？

> ID：11885785
> 
> 赞同：3
> 
> 时间：2012-08-09T14:34:28.347
> 
> 标签：c#, winforms, tooltip

我注册了热键：`Ctrl`+ `Space`。热键消息发送到：

```
private void Hotkey_press()
{
... // I want to show tooltip "Hello" at current mouse location.
} 
```

有没有办法显示这个工具提示，即使鼠标没有指向任何控件并且它在我的 Window.Form1 之外？

**编辑：该工具提示甚至可以显示失去焦点或隐藏的表单**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T14:43:10.007

你想要类似的东西

```
ToolTip tt = new ToolTip();
IWin32Window win = this;
tt.Show("String", win, mousePosition); 
```

从哪里`MousePosition`可以得到`MouseEventArgs`via

```
private SomeMouseEventHandler(object sender, MouseEventArgs e)
{
    System.Drawing.Point mousePosition = e.Location;
    ...
} 
```

或使用

```
System.Drawing.Point mousePosition = Cursor.Position; 
```

此外，您可能希望设置更长的`ToolTip`显示持续时间，只需使用该`Show`方法可用的重载，`tt.Show("String", win, mousePosition, 5000);`将显示工具提示 5 秒。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:45:16.460

```
Tooltip tip = new ToolTip();
tip.ShowAlways = true;
tip.Show("My tooltip",this,Cursor.Position.X,Cursor.Position.Y); 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.showalways.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.showalways.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.cursor.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-12T21:21:11.560

正如[这个答案](https://stackoverflow.com/a/11098897/1378739)所暗示的，没有管理的方法来实现这一点。如果您想在程序未聚焦时显示工具提示控件，那么“正确”的方法是 PInvoke Win32 并使用`CreateWindowEx`. gideon给出的上面链接的答案显示了一些关于如何做到这一点的指示，但它仍然非常复杂。

如果您不介意使用第三方库，[AutoIt](https://www.autoitscript.com/site/autoit/)提供了一种轻松创建工具提示的方法，而无需自己处理 Win32。

这是一个非常简单的示例，演示使用：

```
//make sure AutoItX3.dll is referenced in your project
using AutoItX3Lib;

private AutoItX3 myAutoIt = new AutoItX3();

private async void ShowToolTipAtMouse(string message)
{
    //default position is bottom right of mouse pointer,
    //but you can set the x and y positions yourself
    myAutoIt.ToolTip(message);

    //call the function again with an empty argument to close
    await Task.Delay(1000);
    myAutoIt.ToolTip(String.Empty);
} 
```

只要您的程序正在运行，这将起作用；不管它是在焦点内/焦点外，甚至是隐藏的。缺点是你没有得到常规的淡出动画（它只是消失了）。此外，如果您一次需要多个工具提示，则需要拥有多个`AutoItX3`对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-27T18:14:44.833

您需要在鼠标事件中显示/隐藏它，还将鼠标位置从屏幕坐标转换为您的控制坐标。小问题是，如果您将工具提示完全放在鼠标指针位置上，则工具提示将捕获 mouseEnter 事件，并且您的控件上的意外 mouseLeave 事件将被触发，因此我的解决方案是在最终位置添加一点偏移量。

```
 private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
        {
            Point p = pictureBox3.PointToClient(Cursor.Position);
            p.X += 5;
            p.Y += 5;
            toolTip1.Show("My tooltip" ,
                pictureBox1, p);

        }

        private void pictureBox1_MouseLeave(object sender, EventArgs e)
        {
            toolTip1.ShowAlways = false;
            Text = ("Leave");
        }

        private void pictureBox1_MouseEnter(object sender, EventArgs e)
        {
            toolTip1.ShowAlways = true;
            Text=("Enter");
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-07T17:48:51.043

遗憾的是 Winforms 没有工具提示的位置属性。

我发现最简单的方法是添加您自己的鼠标悬停和鼠标离开处理程序，然后使用 Show() 函数设置位置（x 和 y），以像素为单位，相对于第二个参数的左上角显示（）函数。

第二个参数可以是任何控件，但使用包含工具提示本身 (this) 的控件、控件的父控件或控件内的子控件可能最有意义。

您可以使用 Point 而不是两个参数（x 和 y）作为位置，但请记住 Show() 将采用该点的 x 坐标和 y 坐标并将它们添加到您的控件左上角的 x 和 y 坐标选择作为第二个参数。

```
 private void UserControl1_MouseHover(object sender, EventArgs e)
        {
            toolTip1.Show("this text is so new", this, 10, 10);
        }

        private void UserControl1_MouseLeave(object sender, EventArgs e)
        {
            toolTip1.Hide(this);
        } 
```

# sql - 查询两个表的重复值

> ID：11885789
> 
> 赞同：6
> 
> 时间：2012-08-09T14:34:50.713
> 
> 标签：sql, sql-server

我有一个存储过程，它将（或应该）记录从一个表移动到另一个表。但是我现在想创建一个程序来检查“TableA”中的数据与“TableB”中的数据

```
SELECT A.Num, B.Num
FROM TableA AS A 
LEFT JOIN TableB AS B ON A.Num = B.Num
WHERE B.Num IS NULL 
```

基本上，我想提取不在“TableB”中但在“TableA”中的任何数字，是 LEFT JOIN 方法吗？到目前为止，我一直未能成功找到丢失的文件，并且我已经删除了一些以形成测试用例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T14:37:39.133

你可以使用一个[`not exists`](http://msdn.microsoft.com/en-us/library/ms184297%28v=sql.105%29.aspx)

```
SELECT  *   
FROM TableA A  
WHERE NOT EXISTS (SELECT *      
                  FROM TableB B
                  WHERE A.NUM = B.NUM); 
```

或[`not in`](http://msdn.microsoft.com/en-us/library/ms177682.aspx)：

```
SELECT  *   
FROM TableA A  
WHERE A.NUM not in (SELECT B.NUM
                  FROM TableB B); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:37:58.510

```
SELECT Num from TableA
EXCEPT
SELECT Num from TableB 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T14:38:16.103

```
select * from tableA
where id not in (select id from tableB) 
```

或者

```
select * from tableA a
left join tableB b on a.id = b.id
where b.id is null 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-10T10:04:56.020

```
select * from tableA
where id in (select id from tableB); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-31T10:05:43.660

查找两个表之间的重复项

```
select table1.column_name, count(*) from table_name table1
内连接表名表2
ON table1.coumn_name = table2.column_name;
```

前任：

```
从用户 u 中选择 u.username
INNER JOIN src_users ud
ON u.username = ud.username;
```

在单个表中查找重复项

```
从用户组中选择用户名，count(*)，用户名 count(*) >1；
```

# ms-access - MS Access 使用 FIND 按钮将表链接到 SQLServer

> ID：11885790
> 
> 赞同：2
> 
> 时间：2012-08-09T14:34:52.427
> 
> 标签：ms-access, sql-server-2008-r2, ms-access-2007

我使用 MS Access 2007 作为前端，并在 SQLServer 2008 R2 后端拥有所有链接表。

在 Access 中的表单中，我尝试在功能区中执行“查找”按钮，或者通过在表单上创建一个按钮，其目的是在特定字段中查找具有特定值的记录。

当我在 FIND 窗口中完成输入时，我单击*Find Next*。在某些情况下，会立即找到记录。在其他情况下，它可能会持续数小时才报告它找不到任何东西（当我知道它应该找到时）。

我正在查看的表中有大约 99,000 条记录。该字段是否被索引似乎并不重要。

是我做错了什么，还是 Access 无法处理？此外，是否正在创建一个存储过程来处理多个搜索请求并将信息传递给访问答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:19:14.837

众所周知，对于 ODBC 数据源，查找方法很慢。以下是 Access 2007 `Recordset.FindFirst`Method 帮助主题的内容：

*使用 Microsoft Access 数据库引擎连接的 ODBC 数据库和大型动态集类型 Recordset 对象时，您可能会发现使用 Find 方法或使用 Sort 或 Filter 属性很慢。要提高性能，请使用带有自定义 ORDER BY 或 WHERE 子句、参数查询或检索特定索引记录的 QueryDef 对象的 SQL 查询。*

此外，将 Access 表单绑定到 99K 记录的记录源是一项性能挑战。使用查询作为表单的记录源，并将查询设计为仅返回一行或几行。

为用户提供选择不同行集的选项，并修改表单的记录源属性以反映用户的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:16:04.717

这取决于您需要的搜索类型以及要搜索的列（字段）的数据类型。例如，如果我在索引列中有文本数据类型，并且我使用 Start of field 或 Whole field 进行搜索，它会非常快，但是，如果我搜索字段的任何部分，它很可能会失败。换句话说，如果 Access 可以使用索引进行搜索，即使在相当大的表上也可以工作，否则，您可能最好使用存储过程，尽管我怀疑没有索引也会很快。

# nhibernate - NHibernate 3.3.1 通过代码映射与 property-ref 的多对多关系

> ID：11885792
> 
> 赞同：4
> 
> 时间：2012-08-09T14:34:58.217
> 
> 标签：nhibernate, mapping-by-code

我有一个相当大的数据库，我必须使用 NHibernate 3.3.1 byCode 映射来映射两个实体（请注意我没有使用 FluentNHibernate，而是内置映射）

实体通过唯一键而不是主键处于多对多关系中。

这是我的例子

```
 public class Achievable : Entity
    {
        public Achievable()
        {
            Uniqueidentifier = Guid.NewGuid();
        }

        public virtual string Name { get; set; }

        public virtual Guid Uniqueidentifier { get; set; }

        public virtual IList<Kitting> Kittings { get; set; }
    }

    public class Kitting : Entity
    {
        public virtual string Name { get; set; }

        public virtual IList<Achievable> Achievables { get; set; }
    } 
```

所以我必须通过 Uniqueidentifier 属性使用第三个表 AchievableKittings 将 Achievable 表链接到 Kitting

我编写了以下映射类：

```
public class AchievableMap : ClassMapping<Achievable>
{
    public AchievableMap()
    {
        Property(x => x.Name);
        Property(x => x.Uniqueidentifier, m =>
                                              {
                                                  m.Unique(true);
                                                  m.NotNullable(true);
                                              });

        Bag(x => x.Kittings, m =>
                                 {
                                     m.Table("AchievableKittings");
                                     m.Cascade(Cascade.Persist);
                                     m.Inverse(false);
                                     m.Key(k => 
                                     {
                                         k.PropertyRef(x => x.Uniqueidentifier);
                                         k.Column("aUniqueindentifier");
                                         k.ForeignKey("FK_Achievable_uniqueidentifier");
                                     });
                                 }, r => r.ManyToMany(m =>
                                                          {
                                                              m.Column("kittingId");
                                                              m.ForeignKey("FK_Kitting_kittingId");
                                                          }));
    }
}

public class KittingMap : ClassMapping<Kitting>
{
    public KittingMap()
    {
        Property(x => x.Name);

        Bag(x => x.Achievables, m =>
                                    {
                                        m.Table("AchievableKittings");
                                        m.Inverse(true);
                                        m.Key(k =>
                                                  {
                                                      k.Column("kittingId");
                                                      k.ForeignKey("FK_Kitting_kittingId");
                                                  });
                                    }, r => r.ManyToMany(m =>
                                                             {
                                                                 m.Column("aUniqueindentifier");
                                                                 m.ForeignKey("FK_Achievable_uniqueidentifier");
                                                             }));
    }
} 
```

它接缝 NHibernate 忽略 k.PropertyRef(x => x.Uniqueidentifier) 语句。我的主键是由身份生成的 bigint。现在，当 Nhiebrnate 尝试创建数据库时，它会为 AchievableKittings 创建 FK 密钥，以实现可实现的 primaryKey，但不是 property-ref Uniqueidentifier

```
alter table AchievableKittings 
    add constraint FK_Achievable_uniqueidentifier 
    foreign key (aUniqueindentifier) 
    references Achievable 
```

当然它会抛出一个异常：

```
Column 'Achievable.AchievableId' is not the same data type as referencing column 'AchievableKittings.aUniqueindentifier' in foreign key 'FK_Achievable_uniqueidentifier'. 
```

使用 FluentNhibernate 能够以正确的方式映射它。不幸的是，我不能在当前项目中使用 FluentNhibernate。

所以有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T02:37:05.763

我这样做并且总是使用集合

```
Set(x => x.Users, d =>
        {
            d.Schema("dbo");
            d.Inverse(false);
            d.Access(Accessor.Property);
            d.Table("UsersRoles");
            d.Key(c => c.Column("RoleId"));
        }, r => r.ManyToMany(c => { c.Class(typeof(User)); c.Column(n => n.Name("UserId")); })); 
```

# c# - 设计器未正确加载继承的表单

> ID：11885793
> 
> 赞同：0
> 
> 时间：2012-08-09T14:35:01.117
> 
> 标签：c#, inheritance, resources, appdomain, windows-forms-designer

我的项目是一个资源文件编辑器。它在 appdomain 中加载程序集并从中创建所有 .resources 文件。然后，它使用 Resgen.exe 将这些 .resources 文件更改为 .resx 文件。

创建 .resx 文件后，将调用 windows 窗体设计器并从 .resx 文件创建窗体。然后，用户可以修改这些表单。然后，使用 al.exe（程序集链接器）将它们编译为 dll。

在某种程度上，它就像一个自定义的 Visual Studio 设计器，无需安装 Visual Studio 即可使用。

```
My problem is that when the designer try to draw a form that inherited from a 
base form that is in another project, it put all the components in the upper left
corner of the form. 
```

/---------------------------------------------------- ----------------------------------------------------/

*我将举例说明：*

我有 2 个项目：A 和 B。B 有一个表格。A从B那里继承了他自己的形式。当我加载项目 A 的程序集时，设计人员无法从项目 B 中找到基本表单，也无法正确创建表单。

一个正常的形式是这样声明的：

```
public class AboutForm : System.Windows.Forms.Form 
```

项目 A 的表单声明如下：

```
public class ExtractForm : AlexandriaR2P.UI.BaseExtractForm 
```

AlexandriaR2P.UI.dll 是我的项目 B

/---------------------------------------------------- ----------------------------------------------------/

/---------------------------------------------------- ----------------------------------------------------/

我正在通过反射从程序集中创建资源文件。如果程序集没有对表单的另一个项目的引用，则一切正常。

但是如果我的程序集依赖于另一个程序集来创建表单，它将**无法正确加载**。所有组件都将加载在左上角，一个在另一个之上。（**继承形式**）

在 resx 文件中，我发现了这个：

```
 <data name="&gt;&gt;m_SendControl.Type" xml:space="preserve">
      <value>AlexandriaR2P.UI.BaseSendControl, AlexandriaR2P.UI, Version=5.2.0.13, Culture=neutral, PublicKeyToken=null</value>
  </data> 
```

在这里，AlexandriaR2P.UI 是我的**dll**：AlexandriaR2P.UI.dll，我认为设计人员无法正确加载它并且表单绘制得不好。

我已经确保我的 dll 中的所有资源文件都在同一个文件夹中，并且引用的程序集已加载到 AppDomain 中，但我仍然遇到了问题。

谢谢！

设计者在构建表单时没有返回错误......它只是在 0,0 处加载组件，因为他没有找到他需要的信息。

此外，当我使用 al.exe (AssemblyLinker) 编译资源时，表单会全部变形。

# hadoop - Mahout 项目相似性作业随机失败，csv 数据出现数组索引越界异常？

> ID：11885796
> 
> 赞同：0
> 
> 时间：2012-08-09T14:35:10.697
> 
> 标签：hadoop, mahout

csv 文件包含用户偏好的布尔数据（userid、itemid）。预处理器检查文件是否存在任何不一致。我也手动检查过，数据似乎是一致且正确的格式。需要注意的两件事： - 如果 hadoop 作业只有一个输入文件，也就是说，如果所有首选项都导出到单个 csv 中且 (userid,itemid) 没有重复条目，则作业永远不会失败 - 作业随机失败hadoop 目录中有多个 csv 文件，这些文件是用户首选项的初始转储以及用户首选项的每日增量文件。

如果 csv 数据始终一致且正确，则作业不应因 ArrayIndexOutOfBounds 异常而失败。如果 delta 文件中有 (userid,itemid) 的重复条目，作业是否可能会失败。由于布尔首选项，其中许多条目在多个增量文件中重复。

日志似乎没有输出导致错误的数据位。这是日志：

```
2012-08-09 15:03:22,652 INFO org.apache.hadoop.mapred.JobInProgress: job_201208021510_0221: nMaps=2 nReduces=1 max=-1
2012-08-09 15:03:22,652 INFO org.apache.hadoop.mapred.JobTracker: Job job_201208021510_0221 added successfully for user 'deploy' to queue 'default'
2012-08-09 15:03:22,652 INFO org.apache.hadoop.mapred.AuditLogger: USER=deploy  IP=127.0.0.1    OPERATION=SUBMIT_JOB    TARGET=job_201208021510_0221    RESULT=SUCCESS
2012-08-09 15:03:22,652 INFO org.apache.hadoop.mapred.JobTracker: Initializing job_201208021510_0221
2012-08-09 15:03:22,653 INFO org.apache.hadoop.mapred.JobInProgress: Initializing job_201208021510_0221
2012-08-09 15:03:23,023 INFO org.apache.hadoop.mapred.JobInProgress: jobToken generated and stored with users keys in /zenius/hadoop/tmp/mapred/system/job_201208021510_0221/jobToken
2012-08-09 15:03:23,027 INFO org.apache.hadoop.mapred.JobInProgress: Input size for job job_201208021510_0221 = 56518256\. Number of splits = 2
2012-08-09 15:03:23,027 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201208021510_0221_m_000000 has split on node:/default-rack/localhost
2012-08-09 15:03:23,028 INFO org.apache.hadoop.mapred.JobInProgress: tip:task_201208021510_0221_m_000001 has split on node:/default-rack/localhost
2012-08-09 15:03:23,028 INFO org.apache.hadoop.mapred.JobInProgress: job_201208021510_0221 LOCALITY_WAIT_FACTOR=1.0
2012-08-09 15:03:23,028 INFO org.apache.hadoop.mapred.JobInProgress: Job job_201208021510_0221 initialized successfully with 2 map tasks and 1 reduce tasks.
2012-08-09 15:03:25,787 INFO org.apache.hadoop.mapred.JobTracker: Adding task (JOB_SETUP) 'attempt_201208021510_0221_m_000003_0' to tip task_201208021510_0221_m_000003, for tracker 'tracker_localhost:localhost/127.0.0.1:50158'
2012-08-09 15:03:31,794 INFO org.apache.hadoop.mapred.JobInProgress: Task 'attempt_201208021510_0221_m_000003_0' has completed task_201208021510_0221_m_000003 successfully.
2012-08-09 15:03:31,795 INFO org.apache.hadoop.mapred.JobTracker: Adding task (MAP) 'attempt_201208021510_0221_m_000000_0' to tip task_201208021510_0221_m_000000, for tracker 'tracker_localhost:localhost/127.0.0.1:50158'
2012-08-09 15:03:31,796 INFO org.apache.hadoop.mapred.JobInProgress: Choosing data-local task task_201208021510_0221_m_000000
2012-08-09 15:03:31,796 INFO org.apache.hadoop.mapred.JobTracker: Adding task (MAP) 'attempt_201208021510_0221_m_000001_0' to tip task_201208021510_0221_m_000001, for tracker 'tracker_localhost:localhost/127.0.0.1:50158'
2012-08-09 15:03:31,796 INFO org.apache.hadoop.mapred.JobInProgress: Choosing data-local task task_201208021510_0221_m_000001
2012-08-09 15:03:37,800 INFO org.apache.hadoop.mapred.JobInProgress: Task 'attempt_201208021510_0221_m_000001_0' has completed task_201208021510_0221_m_000001 successfully.
2012-08-09 15:03:37,801 INFO org.apache.hadoop.mapred.JobTracker: Adding task (REDUCE) 'attempt_201208021510_0221_r_000000_0' to tip task_201208021510_0221_r_000000, for tracker 'tracker_localhost:localhost/127.0.0.1:50158'
2012-08-09 15:03:49,807 INFO org.apache.hadoop.mapred.TaskInProgress: Error from attempt_201208021510_0221_m_000000_0: java.lang.ArrayIndexOutOfBoundsException: 1
at org.apache.mahout.cf.taste.hadoop.item.ItemIDIndexMapper.map(ItemIDIndexMapper.java:47)
at org.apache.mahout.cf.taste.hadoop.item.ItemIDIndexMapper.map(ItemIDIndexMapper.java:31)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
at org.apache.hadoop.mapred.Child.main(Child.java:249)

2012-08-09 15:03:52,810 INFO org.apache.hadoop.mapred.JobInProgress: Choosing a failed task task_201208021510_0221_m_000000
2012-08-09 15:03:52,810 INFO org.apache.hadoop.mapred.JobTracker: Adding task (MAP) 'attempt_201208021510_0221_m_000000_1' to tip task_201208021510_0221_m_000000, for tracker 'tracker_localhost:localhost/127.0.0.1:50158'
2012-08-09 15:03:52,810 INFO org.apache.hadoop.mapred.JobInProgress: Choosing data-local task task_201208021510_0221_m_000000
2012-08-09 15:03:52,810 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201208021510_0221_m_000000_0'
2012-08-09 15:04:14,603 INFO org.apache.hadoop.mapred.TaskInProgress: Error from attempt_201208021510_0221_m_000000_1: java.lang.ArrayIndexOutOfBoundsException: 1
at org.apache.mahout.cf.taste.hadoop.item.ItemIDIndexMapper.map(ItemIDIndexMapper.java:47)
at org.apache.mahout.cf.taste.hadoop.item.ItemIDIndexMapper.map(ItemIDIndexMapper.java:31)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
at org.apache.hadoop.mapred.Child.main(Child.java:249)

2012-08-09 15:04:17,606 INFO org.apache.hadoop.mapred.JobInProgress: Choosing a failed task task_201208021510_0221_m_000000
2012-08-09 15:04:17,607 INFO org.apache.hadoop.mapred.JobTracker: Adding task (MAP) 'attempt_201208021510_0221_m_000000_2' to tip task_201208021510_0221_m_000000, for tracker 'tracker_localhost:localhost/127.0.0.1:50158'
2012-08-09 15:04:17,607 INFO org.apache.hadoop.mapred.JobInProgress: Choosing data-local task task_201208021510_0221_m_000000
2012-08-09 15:04:17,607 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201208021510_0221_m_000000_1'
2012-08-09 15:04:35,618 INFO org.apache.hadoop.mapred.TaskInProgress: Error from attempt_201208021510_0221_m_000000_2: java.lang.ArrayIndexOutOfBoundsException: 1
at org.apache.mahout.cf.taste.hadoop.item.ItemIDIndexMapper.map(ItemIDIndexMapper.java:47)
at org.apache.mahout.cf.taste.hadoop.item.ItemIDIndexMapper.map(ItemIDIndexMapper.java:31)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
at org.apache.hadoop.mapred.Child.main(Child.java:249)

2012-08-09 15:04:38,621 INFO org.apache.hadoop.mapred.JobInProgress: Choosing a failed task task_201208021510_0221_m_000000
2012-08-09 15:04:38,621 INFO org.apache.hadoop.mapred.JobTracker: Adding task (MAP) 'attempt_201208021510_0221_m_000000_3' to tip task_201208021510_0221_m_000000, for tracker 'tracker_localhost:localhost/127.0.0.1:50158'
2012-08-09 15:04:38,621 INFO org.apache.hadoop.mapred.JobInProgress: Choosing data-local task task_201208021510_0221_m_000000
2012-08-09 15:04:38,621 INFO org.apache.hadoop.mapred.JobTracker: Removing task 'attempt_201208021510_0221_m_000000_2'
2012-08-09 15:04:56,632 INFO org.apache.hadoop.mapred.TaskInProgress: Error from attempt_201208021510_0221_m_000000_3: java.lang.ArrayIndexOutOfBoundsException: 1
at org.apache.mahout.cf.taste.hadoop.item.ItemIDIndexMapper.map(ItemIDIndexMapper.java:47)
at org.apache.mahout.cf.taste.hadoop.item.ItemIDIndexMapper.map(ItemIDIndexMapper.java:31)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
at org.apache.hadoop.mapred.Child.main(Child.java:249)

2012-08-09 15:04:59,635 INFO org.apache.hadoop.mapred.TaskInProgress: TaskInProgress task_201208021510_0221_m_000000 has failed 4 times.
2012-08-09 15:04:59,635 INFO org.apache.hadoop.mapred.JobInProgress: TaskTracker at 'localhost' turned 'flaky'
2012-08-09 15:04:59,635 INFO org.apache.hadoop.mapred.JobInProgress: Aborting job job_201208021510_0221
2012-08-09 15:04:59,635 INFO org.apache.hadoop.mapred.JobInProgress: Killing job 'job_201208021510_0221'
2012-08-09 15:04:59,635 INFO org.apache.hadoop.mapred.JobTracker: Adding task (JOB_CLEANUP) 'attempt_201208021510_0221_m_000002_0' to tip... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:53:49.883

不，这绝对意味着某处的数据中有一条坏线。最可能的罪魁祸首是杂散的空白行、标题行、“注释”行或同一目录中的一些杂散文件，如 _SUCCESS。

# visual-studio-2012 - TFS 2012 中的过滤器在哪里定义？

> ID：11885798
> 
> 赞同：7
> 
> 时间：2012-08-09T14:35:20.033
> 
> 标签：visual-studio-2012

我在我的解决方案中添加了一个新的 nuget 包。

在“Team View -> Pending Changes -> Detected Changes”中有*一些*文件，但 /lib 文件夹被忽略。结果 CI 构建中断。

**问题：**在 TFS（或 Visual Studio？）中指定排除 /Lib 文件夹（或 /Lib 文件夹内的文件）的位置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-26T12:30:43.087

Given you're using TFS2012 I assume you're using a local workspace. For local workspaces files are ignored using the `.tfignore` file. Check if you have that file present and if there is an exclusion for the `/lib` folder in it.

Also note that by default certain files are ignored, such as the `.dll` files that would be in the `/lib` folder of the nuget package. If a folder has no files to include it will not be shown in pending changes. You will have to add it manually via source control explorer.

Here's the [reference for the .tfignore file](http://msdn.microsoft.com/en-us/library/tfs/ms245454%28v=vs.110%29.aspx#tfignore) if you want to see how it works.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:04:14.943

您可以通过选择忽略检测到的更改中的某些内容来快速确定 .tfignore 文件的位置。这将导致 .tfignore 文件出现在您的“包含的更改”中，并带有新的忽略设置（如果它不存在，则会创建它）。从这里您可以双击文件以打开它进行编辑。

# mongodb - 使用 java 驱动程序时如何检测 MongoDB 副本集是否未初始化？

> ID：11885802
> 
> 赞同：2
> 
> 时间：2012-08-09T14:35:29.417
> 
> 标签：mongodb, mongodb-java

我想检测一个 MongoDB 副本集是否已经初始化（所以我可以向用户显示一条错误消息，例如“你忘记初始化你的副本集”）。是否可以检测副本集是否已使用 Java Mongodb 驱动程序初始化？我发现的最接近的是`com.mongodb.Mongo.getReplicaSetStatus()`- 但我认为这不会告诉我该集合是否未初始化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-11-12T23:56:19.673

If Mongo ReplicaSet is not initilized rs.status() return error code "94" [https://github.com/mongodb/mongo/blob/master/src/mongo/base/error_codes.yml](https://github.com/mongodb/mongo/blob/master/src/mongo/base/error_codes.yml)

```
init_status=$(mongo --quiet -u ${MONGO_ADMIN_USER} -p ${MONGO_ADMIN_PASSWORD} --authenticationDatabase admin --eval "rs.status().code" admin)
if [ "${init_status}" = "94" ]; then
    echo "Mongo ReplicaSet is not initialized"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-06T22:39:14.840

我只能在这里看到旧的答案，但我很惊讶没有人提到这个`ok`属性。该`rs.status()`命令在成功和失败的响应中都包含此属性。该`ok`属性设置为何时`1`初始化副本集，`0`何时未初始化。

例子：

```
# When Replica Set is initialized
$ mongo --quiet --port 27017 --username your-user --password your-pass --eval 'rs.status().ok'
1

# When Replica Set is NOT initialized
$ mongo --quiet --port 27017 --username your-user --password your-pass --eval 'rs.status().ok'
0 
```

此命令在主节点和辅助节点上都能很好地工作。

如需更多信息，请查看：

*   [https://docs.mongodb.com/manual/reference/method/rs.status/](https://docs.mongodb.com/manual/reference/method/rs.status/)
*   [https://docs.mongodb.com/manual/reference/command/replSetGetStatus/](https://docs.mongodb.com/manual/reference/command/replSetGetStatus/)
*   [https://docs.mongodb.com/manual/reference/method/db.runCommand/#response](https://docs.mongodb.com/manual/reference/method/db.runCommand/#response)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T16:02:47.217

这是`command()`您正在寻找的功能：

它得到一个字符串参数。

注意：该`'getReplicaSetStatus'`命令必须在**admin**数据库上运行。

[http://api.mongodb.org/java/current/com/mongodb/DB.html#command(java.lang.String)](http://api.mongodb.org/java/current/com/mongodb/DB.html#command%28java.lang.String%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-16T10:39:29.730

您可以直接检查条件：

```
if(rs.status()) 
{ 
    rs.remove() 
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-09T17:13:53.210

还有另一个 StackOverflow 问题似乎是同一个问题 - 请参阅下面的链接。这样做的方法是获取确实存在的数据库列表 - 从 Java 驱动程序中，您可以在 localhost 上运行的 mongod 服务器上执行类似的操作

Mongo mongo = new Mongo("127.0.0.1", 27017); 列出数据库名称 = mongo.getDatabaseNames();

这相当于 mongo shell “show dbs” 命令。

[检查mongodb数据库是否存在？](https://stackoverflow.com/questions/7049722/check-if-mongodb-database-exists)

# java - 在 JPanel 上显示 JFreeChart 的缩略图

> ID：11885805
> 
> 赞同：2
> 
> 时间：2012-08-09T14:35:36.217
> 
> 标签：java, swing, jpanel, thumbnails, jfreechart

我目前正在处理时间序列数据，并且正在使用 JFreeCharts XYLineChart 来显示我的数据。对于我的用户界面，我想创建这些图表的可点击缩略图（然后显示真正的大图表）。

我尝试了这种方法来创建图表的缩略图，但我不知道如何使用这个 BufferedImage 来显示缩略图。

```
XYSeriesCollection coll = new XYSeriesCollection();
coll.addSeries(rw.getT1().getCurMktCapSeries());
coll.addSeries(rw.getT2().getCurMktCapSeries());            
JFreeChart chart = ChartFactory.createXYLineChart(rw.getT1().getName() + " - " + rw.getT2().getName(),
                                            "Position",
                                            "Course",
                                            coll,
                                            PlotOrientation.VERTICAL,
                                            true,
                                            true,
                                            false);

BufferedImage bi = chart.createBufferedImage(1000, 1000, 100, 100, null); 
```

我尝试在线搜索，但我发现的唯一内容是上面创建缩略图的方法，而不是如何显示它。

所以我的问题是：

*   这是创建缩略图的正确方法吗？
*   如何在我的 GUI 上显示此缩略图？

# 解决方案

我刚刚创建了自己的自定义 JPanel

```
public class ImagePanel extends JPanel 
```

然后我添加了以下paintComponent方法来绘制缩略图

```
protected void paintComponent(Graphics g) {
    super.paintComponents(g);
    //Create Image
    BufferedImage bi = this.createBufferedImage(this.rw);
    //Draw Background
    Graphics2D g2d = (Graphics2D)g;
    g2d.setColor(this.backgroundColor);
    g2d.fillRect(0, 0, this.getWidth(), this.getHeight());
    //Draw Image
    g2d.drawImage(bi.getScaledInstance(this.getWidth()-10, this.getHeight()-10, 0), 5, 5, this.backgroundColor, null);
} 
```

要创建 BufferedImage 我使用了以下方法

```
private BufferedImage createBufferedImage(ResultWrapper rw2) {
    //Create JFreeChart
    XYSeriesCollection coll = new XYSeriesCollection();
    coll.addSeries(rw.getT1().getCurMktCapSeries());
    coll.addSeries(rw.getT2().getCurMktCapSeries());            
    JFreeChart chart = ChartFactory.createXYLineChart(null, null, null, coll, PlotOrientation.VERTICAL, false, true, false);

    //Hide Axis
    XYPlot plot = chart.getXYPlot();
    plot.getRangeAxis().setVisible(false);
    plot.getDomainAxis().setVisible(false);

    return chart.createBufferedImage(500, 500, 100, 100, null);
} 
```

有了这个，我得到了我想要的，一个 JFreeChart 的小缩略图。要使其可点击，只需添加一个 MouseListener。

感谢@MadProgrammer 使用自定义组件和paintComponent 方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:46:23.810

> 如何在我的 GUI 上显示此缩略图？

有很多方法，但考虑到用例，您可能会将其用作`JButton`/的图标`JRadioButton`或 a 的选项卡`JTabbedPane`，或用于 a `JList`or `JComboBox`。

查看[Swing 组件的视觉指南，](http://docs.oracle.com/javase/tutorial/ui/features/components.html)快速了解各种可能性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:53:19.260

在 AndrewThompon 的建议之上，您可以提供一个能够绘制图表的自定义组件。

看一眼

*   [在 Swing 中执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [Java Graphcs2D](http://docs.oracle.com/javase/tutorial/2d/index.html)

这比已经建议的要复杂得多，但确实为您提供了最大的灵活性

# django - 浏览器延迟在 django admin 中更改页面内容（缓存、中间件、python/django）

> ID：11885806
> 
> 赞同：1
> 
> 时间：2012-08-09T14:35:37.003
> 
> 标签：django, caching, django-admin, browser-cache, django-middleware

我在 django 的项目中缓存了一个奇怪的问题。

我可以在 django-admin 中编辑我的页面内容。当我这样做并刷新站点时-什么都没有发生。我必须等待几分钟才能进行更改。有趣的是，当我更改浏览器（或计算机）时 - 我不必等待 - 更改已开启。是django，浏览器的问题还是什么？是否可以设置 setting.py 以立即获得更改？

顺便说一句，我已经发现当我关闭“django.middleware.cache.FetchFromCacheMiddleware”时 - 问题消失了，但我不想关闭缓存......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:47:10.330

When you have cache middleware enabled, Django caches the rendered template. When the next request is made, Django checks the cache for the template, and if it exists, it returns a 304 Not Modified rather than the normal 200 Found HTTP response. That tells your browser to pull it from its cache instead of pulling it down from the server again. (It's a lot more complicated than this in practice, but I'm simplifying).

Long and short, is this is how caching in Django works. If you don't want this behavior, then you can either disable the cache (not the cache middleware), by telling it to use the `DummyCache` backend:

```
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.dummy.DummyCache',
    }
} 
```

This will result in Django always returning a 200 with a fresh copy because it can never find the cached copy. You can also add the following setting to settings.py:

```
CACHE_MIDDLEWARE_ANONYMOUS_ONLY = True 
```

Then, if you're logged in (through admin or otherwise), the response will vary on that and always return a fresh copy. However, this will effect normal users of your site as well, if you have any public-facing login capability.

# sql-server - 使用太多磁盘空间的表

> ID：11885810
> 
> 赞同：2
> 
> 时间：2012-08-09T14:35:41.093
> 
> 标签：sql-server, sql-server-2008

当我在 Sql Server Management Studio 中运行“表的磁盘使用率最高”报告时，它显示了我的一个表使用了大约 1.8GB 的​​磁盘空间：

![在此处输入图像描述](../Images/cc0c7cda2a542af5ed6630ac1d36de31.png)

表定义：

```
CREATE TABLE [dbo].[RecipeItems](
    [wo_id] [varchar](50) NOT NULL,
    [invent_id] [varchar](50) NOT NULL,
    [invent_dim_id] [varchar](50) NULL,
    [ratio] [float] NOT NULL
) ON [PRIMARY] 
```

我*粗略*估计，每行占用不到 200 个字节，并且只有 7K 条记录，这不应该占用超过 1-2MB。但显然，事实并非如此。这张表使用这么多存储空间的原因可能是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T14:40:04.433

很可能很多数据已被更新或删除。由于它是一个堆更新可以导致转发记录。我会先试试这个：

```
ALTER TABLE dbo.RecipeItems REBUILD; 
```

接下来我会考虑添加一个聚集索引。

请不要运行收缩数据库命令来修复此表。

当您执行“全部删除并批量插入”时，我会这样做，在中间运行重建：

```
TRUNCATE TABLE dbo.RecipeItems;
ALTER TABLE dbo.RecipeItems REBUILD;
BULK INSERT dbo.RecipeItems FROM ... 
```

如果您添加一个聚集索引，您可能希望以不同的方式执行此操作。如果您不能使用 TRUNCATE，请继续使用 DELETE，很明显。如果表符合条件，TRUNCATE 将导致更少的日志流失，并且由于您正在清除表并重新填充它，因此您似乎不需要从中恢复。事实上，您可能只是考虑删除表并每次重新创建它。

# c - 管理内存方向数组

> ID：11885811
> 
> 赞同：0
> 
> 时间：2012-08-09T14:35:44.340
> 
> 标签：c

我在*struct*中有几个变量。

```
struct my_struct{
    float variable_2_x[2],variable_2_y[2],variable_2_z[2];
    float coef_2_xyz[3];    

    float variable_3_x[3],variable_3_y[3],variable_3_z[3];
    float coef_3_xyz[3];

    float variable_4_x[4],variable_4_y[4],variable_4_z[4];
    float coef_4_xyz[3];
}; 
```

这个结构将包含拉格朗日多项式（en.wikipedia.org/wiki/Lagrange_polynomial）系数，用于几个多项式长度：2、3、4。这个系数的值很容易计算，但问题是，我必须重复相同的代码来创建每一个多项式。例如

```
// T_space is a cube with {[-1:1][-1:1][-1:1]} dimension, 
// its call transformed space.
// distance is the distance between two points of T_space
// point_1 its the point where the function has value 1
p = 2; 
step = distance / p;

polinoms.coef_2_xyz[0] = 1.0:
polinoms.coef_2_xyz[1] = 1.0:
polinoms.coef_2_xyz[2] = 1.0:
for( i = 0; i < p ; ++i) 
{
    polinoms.pol_2_x[i] = (T_space.xi[point_1] + step) + (i * step);
    polinoms.pol_2_y[i] = (T_space.eta[point_1] + step) + (i * step);
    polinoms.pol_2_z[i] = (T_space.sigma[point_1] + step) + (i * step);

    polinoms.coef_2_xyz[0]*= (T_space.eta[point_1] - polinoms.pol_2_x[i]);
    polinoms.coef_2_xyz[1]*= (T_space.eta[point_1] - polinoms.pol_2_y[i]);
    polinoms.coef_2_xyz[2]*= (T_space.eta[point_1] - polinoms.pol_2_z[i]);

} 
```

因为我不想在代码中多次重复相同的循环。在代码中更重要的下一步是我需要将多项式梯度的乘积集成到立方体中的每个点。

能够独立调用结构的每个数组将非常有用。据我所知，变量不能在运行时动态调用。我想制作一个包含*struct*的内存方向的数组。像这样的东西。

```
// declare variable to store memory directions
float mem_array[12];

// some code

mem_array[0] = &variable_2_x;
mem_array[1] = &variable_2_y;
mem_array[2] = &variable_2_z;
mem_array[3] = &coef_2_xyz;
mem_array[4] = &variable_3_x;

mem_array[11] = &variable_4_z;
mem_array[12] = &coef_4_xyz;

// work calling mem_array. 
```

但我不知道这是否可行或是否可行。如果您认为这不是解决问题的正确方法，我愿意接受建议。因为我真的坚持这一点。

我已将问题编辑得更清楚，希望对您有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:08:21.343

You'd be better to allocate the memory you need dynamically. You can have a struct that represents a single Lagrange polynomial (of any order), and then have an array of these, one for each order.

You could also store the order of the polynomial as a member of the struct if you wish. You should be able to factor out code that deals with these into functions that take a LagrangePolynomial*, determine the order, and do whatever computation is required.

The key benefit of all of this is that you don't need to have special code for each order, you can use the same code (and the same struct) for any size of polynomial.

Example below:

```
struct LagrangePolynomial {
    float *x;
    float *y;
    float *z;
}; 
```

For p=2:

```
LagrangePolynomial p;
p.x = malloc(sizeof(float)*2);
p.y = malloc(sizeof(float)*2);
p.z = malloc(sizeof(float)*2);
for (size_t i=0; i<2; i++) {
    p.x[i] = ...;
    p.y[i] = ...;
    p.z[i] = ...;
} 
```

When you've finished with the structure you can free all the memory you've allocated.

```
free(p.x);
free(p.y);
free(p.z); 
```

As mentioned before you can have an array of these.

```
LagrangePolynomial ps[4];
for (size_t i=0; i<4; i++) {
    p[i].x = malloc(sizeof(float)*2);
    p[i].y = malloc(sizeof(float)*2);
    p[i].z = malloc(sizeof(float)*2);
    for (size_t j=0; j<2; j++) {
        p[i].x[j] = ...;
        p[i].y[j] = ...;
        p[i].z[j] = ...;
    }
} 
```

# javascript - 哪个工具可以警告我 JavaScript 分号插入？

> ID：11885813
> 
> 赞同：1
> 
> 时间：2012-08-09T14:35:46.350
> 
> 标签：javascript, jslint

我们使用 Closure Compiler 来发现 JavaScript 中的语法错误，并使用 window.onerror 来发现所有其他运行时错误。每个文件都增加了“use strict”。这些都没有捕获“有用”插入的分号。

我尝试过 JSLint，但它对如何使用 JavaScript 编码有非常具体的想法，因此没有我希望的那么有用。例如，使用 JsLint 我不能再使用`for (var i = ...)`样式；JsLint 一遇到其中之一就放弃了。

是否有其他一些 JavaScript 静态分析工具可以特别警告我分号插入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:38:46.560

还有**JSHint**：

[http://www.jshint.com/](http://www.jshint.com/)

您可以自定义您希望它警告的内容。它可以作为构建过程的一部分作为独立检查器运行，也可以集成到各种编辑器中。

# android - Android OutOfMemory 将图像字节数组转换为 Drawable

> ID：11885819
> 
> 赞同：0
> 
> 时间：2012-08-09T14:36:05.000
> 
> 标签：android, bitmap, bytearray, out-of-memory

我正在开发与 Facebook 和 Gatlk 连接的聊天应用程序，使用 ASMACK API 获取联系人和 VCard 并在 ListView 中显示它们。

从 BYTE ARRAY 中的 VCard 获取联系人图像。我需要将此字节数组转换为图像（位图或 Drawable），但是在从图像字节数组创建 Drawable 以及滚动 ListView 时会出现 OutOfMemory 异常。

下面是代码片段，也尝试将其转换为位图，但位图内存不足异常出现的频率更高。尝试使用 bitmap.recyle() 方法作为论坛为此类问题提供的解决方案。但是使用 recycle() 大多数地方都会出现异常，例如“使用回收图像”。

这里如果日志：

```
java.lang.OutOfMemoryError: bitmap size exceeds VM budget
 E/dalvikvm-heap(26048): 10000-byte external allocation too large for this process.
 E/GraphicsJNI(26048): VM won't let us allocate 10000 bytes 
```

请让我知道在 Bitmap 或 Drawable 中转换字节数组的最佳方法。代码片段在这里：

```
public static Drawable createDrawableImageFromByteArray(Context context, byte[] imageByteArray){
    Drawable drawable = null;
    try{
        if(imageByteArray != null){                                                                                                 
            BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
            bmpFactoryOptions.inJustDecodeBounds = true;                                                            
            int heightRatio = (int)Math.ceil(bmpFactoryOptions.outHeight/(float)55);
            int widthRatio = (int)Math.ceil(bmpFactoryOptions.outWidth/(float)55);

            if (heightRatio > 1 || widthRatio > 1){
                if (heightRatio > widthRatio){
                    bmpFactoryOptions.inSampleSize = heightRatio;  
                } else {
                    bmpFactoryOptions.inSampleSize = widthRatio;   
                }   
            }                                              
            bmpFactoryOptions.inJustDecodeBounds = false;
            bmpFactoryOptions.inPurgeable = true;
            bmpFactoryOptions.inInputShareable = true;
            drawable = Drawable.createFromResourceStream(context.getResources(), new TypedValue(), new ByteArrayInputStream(imageByteArray), "testimg", bmpFactoryOptions);
        }
    }catch(OutOfMemoryError e){
        Utils.debugLog("****** createBitmaException :: " + e);
    }catch(Exception e){
        Utils.debugLog("****** createBitmaException :: " + e);
    }
    return drawable;                             
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:37:47.963

请参阅此处的文档。它应该可以帮助你。

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# css - 代码点火器中的 css

> ID：11885822
> 
> 赞同：0
> 
> 时间：2012-08-09T14:36:25.297
> 
> 标签：css, .htaccess, codeigniter, text, view

嗨，我在 codeigniter 中有这样的问题。我无法使用 .css 文件的样式。但我知道这个过滤器与我的观点有关。（萤火虫）。这是我的连接链接：

```
`<link rel="stylesheet" href="images/Enlighten.css" type="text/css" />` 
```

目录中的css文件`/images/Enlighten.css`

这是我的 htaccess 文件：

```
Options +FollowSymLinks
Options -Indexes
DirectoryIndex index.php
RewriteEngine on
RewriteCond $1 !^(index\.php|template|robots\.txt|public|)
RewriteCond %{REQUEST_URI} !\.(css¦js¦jpg¦gif)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L,QSA] 
```

我认为我的错误在这个文件中。（我不处理这个文件:(()

PS Everywhere 当我使用来自 Enlighten.css 的样式时，文本打印为“??????????”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:41:52.597

像这样让它变得不那么复杂怎么样：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

附言。最好不要将 CSS 放在 images 目录中以防止混淆。我总是使用资产文件夹并在那里组织所有内容：

```
/Assets
  /css
  /images
  /js 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:53:46.070

use following code for your htaccess file :-

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:47:19.023

I recommend to use the following `.htaccess`:

```
AddDefaultCharset UTF-8

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Prevents user access to the application folder
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    ErrorDocument 404 /index.php
</IfModule> 
```

# ruby-on-rails - Nginx - 基本配置

> ID：11885825
> 
> 赞同：0
> 
> 时间：2012-08-09T14:36:47.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nginx, capistrano

我刚刚使用 Capistrano 在`/home/username/app_name`.

现在，我不太确定如何设置 Nginx，我已经按照本教程进行操作，[http://coding.smashingmagazine.com/2011/06/28/setup-a-ubuntu-vps-for-hosting-ruby -on-rails-applications-2/comment-page-1/#comment-594321](http://coding.smashingmagazine.com/2011/06/28/setup-a-ubuntu-vps-for-hosting-ruby-on-rails-applications-2/comment-page-1/#comment-594321)。我在我的 nginx.conf 文件中有这个，我修改了我看到的第一个服务器块：

```
server {
   listen 80;
   server_name www.yourdomain.com;
   root /home/johndoe/test_app/current/public;
   passenger_enabled on;
   ...
} 
```

但现在，我不确定如何进行。上面示例中的 server_name 究竟是什么？我应该如何访问该应用程序？我试过输入我的IP地址，但没有任何显示。顺便说一句，我正在使用 Linode。以及如何为我的域设置名称服务器？详细的解释和教程将非常有帮助。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:00:51.893

Nginx 上的 server_name 与 Apache 中的 ServerName 完全相同，即您希望用于此目录的域名（命名为虚拟主机）。

将乘客设置为开启后，您应该能够直接通过域访问应用程序。

# javascript - Javascript - 相对路径不正确？

> ID：11885826
> 
> 赞同：0
> 
> 时间：2012-08-09T14:36:47.513
> 
> 标签：javascript, path, relative-path

我正在尝试使用“easy-comment”，但是在它设置的相对路径上苦苦挣扎。

我原以为第一行会设置目录，以便第二次提到路径会假设它在同一个地方..但显然不是！

任何人都可以帮忙吗？

设置：在单独的站点上运行此代码所在站点的简单评论

```
<script type="text/javascript" src="http://www.anotherwebsite.co.uk/easycomment/jquery.easy-comment.js"></script>

      <script type="text/javascript">

$(document).ready(function(){
  $("#my-comment,#your-comment,#is-this-ok-comment,#news-ting").EasyComment({
    path:"/easycomment/",
    moderate:true,
    maxReply:5
  });
});
      </script> 
```

我已经尝试添加完整的 http:// 来第二次提及路径，但它会出错

XMLHttpRequest 无法加载[http://anotherwebsite.co.uk/easycomment/ec-comment.php](http://anotherwebsite.co.uk/easycomment/ec-comment.php)。Access-Control-Allow-Origin 不允许来源[http://www.thiswebsite.com 。](http://www.thiswebsite.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:42:01.880

不允许跨域ajax。

如果你想测试它，你可以禁用 chrome 中的网络安全。

但是您应该更改服务器上资源的路径

# asp.net - Mono 中的 FileUpload 控件

> ID：11885827
> 
> 赞同：0
> 
> 时间：2012-08-09T14:36:49.223
> 
> 标签：asp.net, .net, apache, file-upload, mono

我在 Mono+Apache2 上运行 ASP.NET 时遇到了一个问题。我在页面中放置了一个 FileUpload 控件，当单击按钮上传文件时，它会抛出异常：

> 找不到路径“/var/www/www.mysite.com/upload/headImage/uid_1.jpg”的一部分。
> 
> 说明：HTTP 500。处理请求时出错。
> 
> 堆栈跟踪：
> 
> System.IO.DirectoryNotFoundException：找不到路径“/var/www/www.mysite.com/upload/headImage/uid_1.jpg”的一部分。在 System.IO.File.Delete（System.String 路径）[0x00000] 在：0 在 System.Web.HttpPostedFile.SaveAs（System.String 文件名）[0x00000] 在：0 在 System.Web.UI.WebControls.FileUpload .SaveAs (System.String filename) [0x00000] in >:0 at WebApplication.users.ImageUpload.btnUpload_Click (System.Object sender, >System.EventArgs e) [0x00000] in:0 at System.Web.UI.WebControls。 Button.OnClick (System.EventArgs e) [0x00000] in :0 在 System.Web.UI.WebControls.Button.RaisePostBackEvent (System.String eventArgument) >[0x00000] in :0 在 System.Web.UI.WebControls.Button .System.Web.UI.IPostBackEventHandler.RaisePostBackEvent >(System.String eventArgument) [0x00000] in :0 在 System.Web.UI.Page。

我确定路径“/var/www/www.mysite.com/upload/headImage/”存在并且是 chmod 766，并且该文件夹中不存在“uid_1.jpg”。

源代码：

```
string fileName = "uid_1.jpg";
string imageUrl = "/upload/headImage/" + fileName;
fileName = Path.Combine(Server.MapPath("~/upload/headImage/"), fileName);
if (File.Exists(fileName))
{
   File.Delete(fileName);
}

upload.SaveAs(fileName); 
```

谁能告诉我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:32:02.010

我知道了！当我使用 chmod 777 /var/www/www.mysite.com/upload/headImage/ 时，我发现我现在可以将文件上传到服务器。

# java - 在休眠中将映射映射到与其类相同的表

> ID：11885828
> 
> 赞同：0
> 
> 时间：2012-08-09T14:36:49.290
> 
> 标签：java, hibernate, collections, map

我有一个相当简单的（我认为）要映射的类：

```
<class name="parent" table="PARENT_TABLE">
    <composite-id>
        <key-property name = "a" column = "A"/>
        <key-property name = "b" column = "B"/>
        <key-property name = "c" column = "C"/>
    </composite-id>
    <map name = "theMap" table = "PARENT_TABLE" where="type='access'">
        <key foreign-key = "PARENT_TABLE_FK">
            <column name = "A"/>
            <column name = "B"/>
            <column name = "C"/>
        </key>
        <map-key column = "X" type = "double"/>
        <element column = "Y" type = "double" not-null="true"/>
    </map>
</class> 
```

我[在 hibernate 的一个表中映射多个集合](https://stackoverflow.com/questions/4107057/mapping-multiple-sets-in-one-table-in-hibernate)`where="type='access'"`得到了诀窍，但问题是使用映射，外键 (A,B,C,X) 没有与父表 (A,B,C ）。

有谁知道如何让这个快乐？如果我必须单独映射地图，则 PARENT_TABLE 将是完全多余的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T19:54:01.123

它并不漂亮，也使 Schemaexport 无用，但要使其工作，您需要指定 where 条件以使父级唯一，将插入/更新设置为 false 并让映射间接保留父级。

```
<class name="parent" table="PARENT_TABLE" where="x = (SELECT x FROM PARENT_TABLE p WHERE p.(a,b,c) = a,b,c LIMIT 1)" insert="false" update="false"> 
```

# c# - 即使进程没有退出，进程的性能计数器实例名称是否可以更改

> ID：11885832
> 
> 赞同：15
> 
> 时间：2012-08-09T14:36:58.817
> 
> 标签：c#

我使用这个类作为一类测试的基类，这些测试启动一个进程并给它一些输入，并在给它更多输入之前等待它变得空闲。

```
public abstract class TestProcessLaunchingBase
{
    protected PerformanceCounter PerfCounter { get; set; }

    protected void WaitForProcessIdle()
    {
        while (true)
        {
            float oldValue = PerfCounter.NextValue();

            Thread.Sleep(1000);

            float nextValue = PerfCounter.NextValue();

            if (nextValue == 0)
                break;
        }
    }

    protected void FindSpawnedProcessPerfCounter(int processId)
    {
        PerformanceCounterCategory cat = new PerformanceCounterCategory("Process");
        string[] instances = cat.GetInstanceNames();
        foreach (string instance in instances)
        {
            using (PerformanceCounter cnt = new PerformanceCounter("Process", "ID Process", instance, true))
            {
                int val = (int)cnt.RawValue;
                if (val == processId)
                {
                    PerfCounter = new PerformanceCounter("Process", "% Processor Time", instance);
                    break;
                }
            }

        }

        Assert.IsNotNull(PerfCounter, "Failed to perf counter");
    }
} 
```

这些测试偶尔会失败，因为`PerfCounter.NextValue()`抛出一个

> System.InvalidOperationException 实例“foobar#2”在指定的类别中不存在

似乎性能计数器的实例名称不是持久的。

如果存在三个 foobar 进程，它们可能具有实例名称

*   **foob​​ar** pid 5331
*   **foob​​ar #1** pid 5332
*   **foob​​ar #2** pid 5333

似乎**pid 5332** exits **foobar #2**变成**foobar #1**。

问题：

1.  这是记录在案的行为吗？你不能坚持一个性能计数器吗？每次都要查吗？

2.  或者，是否有一个性能计数器可以为所有名为**foobar的进程提供****处理器时间**

 *** * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-13T17:22:38.290

我过去已经遇到过这个问题。实例名称的`ProcessName#InstanceNumber`模式显然是微软的一个糟糕选择，你知道为什么:)

所以基本上你有两个选择：

`PerformanceCounter`1）每次使用您的`FindSpawnedProcessPerfCounter`方法创建一个新实例。

2) 按照[KB281884](http://support.microsoft.com/kb/281884)中描述的步骤将模式从 更改`ProcessName#InstanceNumber`为`ProcessName_ProcessID`。

第一个解决方案的问题是每次构建一个新实例都需要一些 CPU 时间。

第二种解决方案的问题是注册表修改也会影响所有也在使用此性能计数器的程序。它需要在启动您的应用程序之前修改注册表。

您拥有的最后一个选项是根本不使用性能计数器。如果您只对`ProcessorTime`信息感兴趣，可以使用 P/Invoke 调用一些 Kernel32 函数来检索它。

编辑：

该类[`Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process_properties)还提供[`UserProcessorTime`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.userprocessortime)和[`PrivilegedProcessorTime`（内核处理器时间）](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.privilegedprocessortime) 属性。两者都返回一个`TimeSpan`实例（=时间量），因此要检索处理器时间的百分比，您必须自己进行一些计算（涉及刷新周期和处理器时间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:10:17.787

如果您必须使用性能计数器，我的方法是在遇到异常时重新创建我的性能计数器。

抛出异常时，处理旧的性能计数器，然后使用 foobar 测试的所有实例的进程 ID 创建新的性能计数器实例。这里有一篇不错的 stackoverflow 帖子：[Performance Counter by Process ID instead of name?](https://stackoverflow.com/q/9115436/1002041)

我假设您的声明“启动一个进程并给它一些输入”，您在启动它后保留了进程 ID。所以你总是有一个你想要监控的正在运行的测试进程的集合。

使用这种技术，您只会在遇到异常时招致性能损失。

As @ken2k already pointed out, you can change the naming convention of the performance counters for consistency. In my experience performance counters can encounter any number exceptions sometimes for seemingly unexpected reasons. So even if you do change the performance counters name, it might be nice to be able to re-create your performance counters if necessary.**

# c# - HttpContext.Request["x"] 抛出异常

> ID：11885839
> 
> 赞同：0
> 
> 时间：2012-08-09T14:37:15.853
> 
> 标签：c#, system.web

我有以下代码抛出异常（需要绝对路径）：

```
string versionIdStr = HttpContext.Current.Request["xxx"]; 
```

Request["xxx"] 是只读的吗？我该如何设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:42:27.820

```
HttpContext.Request[xxx] 
```

寻找路径 =

```
querystring -> form -> cookie -> session variables 
```

我相信它属于最后一个论点

尝试更具体

例如

```
HttpContext.Request.Form[...]
HttpContext.Request.QueryString[...]
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:34:16.687

我想通了：SimpleWorkerRequest 的问题。我没有设置物理路径，查询不应该有任何空格。

# iphone - UIModalTransitionStylePartialCurl 几乎占据了整个屏幕

> ID：11885852
> 
> 赞同：0
> 
> 时间：2012-08-09T14:37:47.910
> 
> 标签：iphone, ios, xcode, cocoa-touch, cocoa

我有一个模态部分卷曲，但它几乎占据了整个屏幕，这不是我想要的。如果我使用情节提要，这就是我想要的方式。如何让它不占据整个屏幕，而是占据一半？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:46:01.653

除了编写自己的动画 OpenGL 之外，没有公开的方法可以做到这一点。唯一可用的 UIViewAnimation 样式是；

```
typedef enum {
   UIModalTransitionStyleCoverVertical = 0,
   UIModalTransitionStyleFlipHorizontal,
   UIModalTransitionStyleCrossDissolve,
   UIModalTransitionStylePartialCurl,
} UIModalTransitionStyle; 
```

请参阅[如何创建自定义页面 curl 核心动画？](https://stackoverflow.com/questions/1489061/how-do-i-create-a-custom-page-curl-core-animation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:22:59.657

从我玩过的内容来看，Page Curl 仅卷曲到足以在下一页上显示内容。您可以通过将内容限制在新页面的下半部分来改变卷曲。

# java - 无法从 byte[] 读取 JPEG 文件

> ID：11885853
> 
> 赞同：1
> 
> 时间：2012-08-09T14:37:48.567
> 
> 标签：java, image, bytearray, itext, jpeg

有没有人遇到过在 java 中加载 JPEG 文件的问题？我们的一位客户正在发送无法解析的文件，但这些相同的文件可以在 Windows 中打开。（我们收到的其他 99% 的 jpeg 文件，处理没有任何问题）

我尝试了几个库来阅读这些：

```
itextpdf : com.itextpdf.text.Jpeg (getInstance(imageData) - gives  "java.io.IOException: Premature EOF while reading JPG."
sanselan : org.apache.sanselan.ImageInfo ( Sanselan.getImageInfo(imageData) gives "java.io.IOException: Invalid Segment: insufficient data")
where imageData is a byte[] 
```

这里的错误向我表明 jpeg 已损坏，但是，这并不能解释为什么它们仍然可见。

如果有人有任何建议，我将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:13:31.067

我所寻求的“解决方案”是运行我们通过当前进程接收到的字节数组来识别类型。如果这无法识别类型，那么我将字节数组强制保存为 JPEG。然后可以通过当前进程重新读取并推回它。

有点hacky，但这只是几个月的工作。

在此感谢大家的帮助！

# c - 如何在 linux 上使用 fuse 将 root (/) 绑定到自身？

> ID：11885858
> 
> 赞同：2
> 
> 时间：2012-08-09T14:38:04.853
> 
> 标签：c, linux, filesystems, mount, fuse

我正在编写一个将一个目录挂载到自身的保险丝文件系统。我想记录一些电话（`flush`例如）。我已经开始改编[fuse 教程示例代码](http://www.cs.nmsu.edu/~pfeiffer/fuse-tutorial.tgz)。如果我尝试绑定任何目录，它的效果很好：

```
./bbfs -o nonempty ./test ./test 
```

但是如果我尝试绑定特定的根目录（“/”）：

```
sudo ./bbfs -o nonempty / / 
```

日志文件中没有一行。

是否可以？

[我的示例程序的损坏版本](http://dl.dropbox.com/u/36180992/my_fuse.tgz)。我只更改了`bbfs.c`文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:40:18.517

您不能在 上挂载 FUSE 文件系统（或任何其他类型的文件系统）`/`，因为您的根文件系统已经存在。

无论如何，这样做将是灾难性的，因为在路径上安装文件系统会使以前存在于该路径下的任何文件都无法访问。你不能像这样使用 FUSE 作为过滤器——你需要找到另一个解决方案来解决你想要做的任何事情。

# android - 如何增加 Android 微调器的可点击宽度？

> ID：11885860
> 
> 赞同：4
> 
> 时间：2012-08-09T14:38:13.517
> 
> 标签：android, spinner

我有一个`Spinner`显示单个数字（1-6）的。

当我在手机上测试时，几乎不可能点击一个数字，因为它们太窄了（字体大小为 12sp），而且唯一看起来可以点击的区域是文本本身。

理想情况下，我希望用户能够在`Spinner`下拉菜单上单击比文本更大的宽度。我试过用空格填充，但这些被抑制了，我试过使用`PaddingLeft/Right`，但再次没有区别。

这里是`Spinner`

```
<Spinner
            android:id="@+id/spinner_period1"
            android:layout_toRightOf="@id/spinner_weekday1"
            android:layout_below="@id/col1day"
            android:layout_height="wrap_content"
            android:prompt="@string/enterperiod"
            android:layout_width="80dp"
            android:entries="@array/periodlist"
            android:layout_marginRight="340dp"
            android:layout_marginBottom="20dip"
            /> 
```

请注意，我还`Spinner`使用以下方法设置了文本属性：

```
<TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/textview"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:textSize="12sp"
        android:textColor="#768766"
        /> 
```

有任何想法吗？提前致谢

标记

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T14:46:28.667

尝试使属性`TextView`更宽。`android:layout_width`

```
<TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/textview"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:textSize="12sp"
        android:textColor="#768766"
        /> 
```

这可能会解决您的问题或至少使其变得更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:44:50.190

尝试将您的 TextView 布局宽度设置为任意值，而不是“wrap_content”。这应该使整个内容都可点击，而不仅仅是包装的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-17T15:37:12.560

只需向微调器添加一些填充即可帮助我解决此问题。

```
<Spinner
    android:id="@+id/spinner"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:padding="25dp"
    android:scrollbarSize="20dp" /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T14:58:23.063

方式 1：使用**android:spinnerMode**将微调器的选项显示为下拉列表。因此，请查看 API（[Android API Spinner](http://developer.android.com/reference/android/widget/Spinner.html#attr_android%3aspinnerMode)）。或者玩弄**android:dropDownWidth**。

方式 2（我在 APP 中使用它，但目前我无法访问代码）：也许您可以在使用文本填充微调器时设置另一个布局 - 而不是在 XML 中分配值。

```
Spinner spinner = (Spinner) findViewById(R.id.spinner);
// Create an ArrayAdapter using the string array and a default spinner layout
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
        R.array.planets_array, android.R.layout.simple_spinner_item);
// Specify the layout to use when the list of choices appears
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
// Apply the adapter to the spinner
spinner.setAdapter(adapter); 
```

它是从以下链接[Android Spinner](http://developer.android.com/guide/topics/ui/controls/spinner.html#Populate)复制而来的。也许您可以使用 android.R 的布局模板之一。

# java - 扩展 Junit ParentRunner 类以过滤测试方法

> ID：11885862
> 
> 赞同：4
> 
> 时间：2012-08-09T14:38:18.977
> 
> 标签：java, junit, junit4

我需要读取一个文本文件，其中包含所有测试方法列表的是/否值，并仅为 TestCase 类选择“是”标记的测试方法，并在 Junit 中执行。

因此，我编写了一个脚本来读取文件并将其分组到**map<** TestCaseName,ArrayList_ofEnabledTestMethods **>**中。要运行它，我发现一个选项是使用**Assume.assumeTrue()**。

但我想尝试其他方式......而不是在每个测试方法之前写额外的行，所以我尝试编写一个自定义运行器（扩展**ParentRunner的****ABCSuite**）并计划在我的 TestSuite 文件中使用它，如下所示：

```
import org.junit.runner.RunWith;
import org.junit.runners.Suite;

@RunWith(ABCSuite.class)
@Suite.SuiteClasses({TestCalc.class})
public class BatTest{

} 
```

这里 TestCalc.class 包含所有测试方法，其中一些在前面提到的文本文件中标记为“是”。

请让我知道如何使用扩展**ParentRunner 类/Junit 库** 来实现这一点。如果有任何好的教程或之前解决过这个问题的任何链接，请..分享

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T09:16:01.000

您可以通过扩展[BlockJUnit4ClassRunner](http://kentbeck.github.com/junit/javadoc/latest/index.html?org/junit/runners/BlockJUnit4ClassRunner.html)来做到这一点：

```
public class FilterRunner extends BlockJUnit4ClassRunner {
  private List<String> testsToRun = Arrays.asList(new String[] { "test1" });

  public FilterRunner(Class<?> klass) throws InitializationError {
    super(klass);
  }

  @Override
  protected void runChild(final FrameworkMethod method, RunNotifier notifier) {
    Description description= describeChild(method);
    if (method.getAnnotation(Ignore.class) != null || !testsToRun.contains(method.getName())) {
      notifier.fireTestIgnored(description);
    } else {
      runLeaf(methodBlock(method), description, notifier);
    }
  }
} 
```

你可以随意填写`testsToRun`。以上会将其他测试标记为已忽略。你像这样使用它：

```
@RunWith(Suite.class)
@SuiteClasses({Class1Test.class})
public class TestSuite {
}

@RunWith(FilterRunner.class)
public class Class1Test {
  @Test
  public void test1() {
    System.out.println("test1");
  }

  @Test
  public void test2() {
    System.out.println("test2");
  }
} 
```

这会产生以下输出：

```
test1 
```

如果您不想将 @FilterRunner 添加到每个测试类，请查看我对如何[在套件中定义 JUnit 方法规则的回答？](https://stackoverflow.com/questions/7639353/how-to-define-junit-method-rule-in-a-suite).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:10:23.333

JUnit 的实现方式是[Filter](http://junit.sourceforge.net/javadoc/org/junit/runner/manipulation/Filter.html)的实现。它必须由实现[Filterable的](http://junit.sourceforge.net/javadoc/org/junit/runner/manipulation/Filterable.html)[Runner](http://junit.sourceforge.net/javadoc/org/junit/runner/Runner.html)实例化。过滤器通过测试树递归应用。因此，您只需在基本套件中应用该过滤器一次。

您需要扩展一个跑步者并在构造函数中应用过滤器。为了使事情更灵活，您可以配置应与注释一起应用的过滤器。

我有同样的要求，而且效果很好。

# kvm - 如何用 veewee 创建 KVM？

> ID：11885865
> 
> 赞同：0
> 
> 时间：2012-08-09T14:38:22.737
> 
> 标签：kvm

我正在寻找有关如何使用*veewee创建**KVM*的简短教程？我想使用*veewee*来构建适合我的应用程序需求的操作系统

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:35:34.830

更新：在 veewee github 页面上，您现在可以找到一个不错的文档： [https ://github.com/jedi4ever/veewee/blob/master/doc/kvm.md](https://github.com/jedi4ever/veewee/blob/master/doc/kvm.md)

```
I will use a different solution: 

 1\. start an image with kvm
 2\. Use chef solo to customize the machine
 3\. Save an image to use it as a template for others 
```**

# email - 从 Thunderbird 中的 POP3 服务器检索旧邮件

> ID：11885868
> 
> 赞同：2
> 
> 时间：2012-08-09T14:38:39.067
> 
> 标签：email, email-client, thunderbird, data-recovery

我使用 Thunderbird 作为 POP3 服务器的电子邮件客户端。最近，我格式化了我的硬盘驱动器以将操作系统从 Windows XP 更改为 Windows 7。因此，我丢失了所有本地电子邮件。我也不记得我是否有服务器设置“将消息留在服务器上，直到我删除它们”。是否可以取回那些旧消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:46:40.800

马诺伊，

您需要联系您的电子邮件托管服务提供商，以了解他们可能会做的事情。许多人不保留电子邮件的永久副本。一旦客户下载电子邮件并将其删除，它就消失了。即使他们每天进行备份，也有可能在白天收到一封电子邮件，而您在备份发生之前下载并删除了它。

如果这些消息对您非常重要，您可能希望从硬盘驱动器中提取它们，具体取决于格式化的工作方式。您可以研究[取证工具](http://www.forensicswiki.org/)的选项或联系专业的数据恢复服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T06:07:48.353

正如[triplee](https://stackoverflow.com/users/874188/tripleee)在评论中所说，当我设置一个新帐户时，所有来自服务器的消息都会自动获取。幸运的是，看起来我将“服务器设置”设置为““将消息留在服务器上，直到我删除它们”。谢谢[Tripleee](https://stackoverflow.com/users/874188/tripleee)。

# c# - 尝试在我的转发器控件 (asp.net) 中使用控件

> ID：11885872
> 
> 赞同：0
> 
> 时间：2012-08-09T14:38:53.767
> 
> 标签：c#, asp.net

我在我的应用程序中使用了一个转发器控件，我希望它有其他控件，比如一个链接按钮（允许人们对项目发表评论）另一个链接按钮（显示项目并且可以点击，以便我可以重定向到另一页）。我在后面的代码中对其进行编码的所有尝试都被拒绝了。我在后面的代码中找不到它们。注意：所有这些链接按钮都使用中继器中的面板控件进行敲击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:46:43.810

You can find your controls in ItemCreated or ItemDataBound.

```
void Repeater_ItemCreated(Object Sender, RepeaterItemEventArgs e) 
{
   var control = (LinkButton)e.Item.FindControl("yourLinkButtonId");
}

Or

void Repeater_ItemDataBound(Object Sender, RepeaterItemEventArgs e) {

      if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType ==     ListItemType.AlternatingItem) 
      {
          var control = (LinkButton)e.Item.FindControl("yourLinkButtonId");
      }
   } 
```

# drupal-7 - 如何让 Drupal7 在发送系统邮件之前等待 smtp 服务器的响应？

> ID：11885873
> 
> 赞同：0
> 
> 时间：2012-08-09T14:38:55.493
> 
> 标签：drupal-7, smtp, debian

我有 exim4，它运行良好，与大多数通过它发送邮件的服务器相关。这是一个处理来自网络应用程序的邮件的服务器。它没有标准用户，只有局域网中的机器检查它是否有邮件或 smtp 邮件发送给它。

一周前，它停止接受来自 debian 上 2 台 drupal7 机器的邮件。当时，我没有收到#2 机器的任何投诉，所以我只是在对 Drupal-7-01 和 mailserver.org 之间的连接进行故障排除。由于它似乎在 drupal 机器上出现故障，我在该机器上安装了 exim4 并将其配置为智能主机 (mailserver.org) 的中继器。结果是 drupal-7-01 机器的系统消息开始传送到我的外部邮箱。Cron 在运行时开始向我发送消息。以前，这些消息保存在本地队列中，我会偶尔查看它们。这意味着两台服务器在系统级别上可以正常工作。然而 Drupal7 邮件未能发送。

错误是发件人在将消息发送到 mailserver.org 的 smtp 服务器之前没有等待。

我在这里有很多错误消息等等：[http ://ubuntuforums.org/showthread.php?p=12158322#post12158322](http://ubuntuforums.org/showthread.php?p=12158322#post12158322)

我仍然没有来自 drupal 机器的工作邮件。我认为让support@drupal-7-01.net成为该机器的本地用户并将drupal实例发送到该机器的exim4服务器可能会起作用，该服务器又将发送到mailserver.org，剥离本地机器fqdn并安装了 mailserver.org 的 fqdn。这就是本地 cron 消息从那台机器发送给我的方式，因此它应该能够工作。

# ubuntu - ubuntu jenkins 安装失败 ~ jenkins 停止/预启动，进程 22907 ... nada

> ID：11885879
> 
> 赞同：1
> 
> 时间：2012-08-09T14:39:20.780
> 
> 标签：ubuntu, jenkins, installation

我目前正在运行 apache2 和 tomcat7（和服务站点），并且想让 jenkins 运行。

我之前尝试过一次，不久前，我决定在继续之前清除当前的安装。

```
sudo apt-get remove jenkins
sudo apt-get purge jenkins 
```

然后我：

```
sudo apt-get update
sudo apt-get install jenkins 
```

它似乎无法启动......

> .... 解包 jenkins (来自 .../jenkins_1.424.6+dfsg-1_all.deb) ...
> 处理 ureadahead 的触发器 ...
> 设置 jenkins (1.424.6+dfsg-1) ...
> jenkins stop/预启动，进程 22907 ...

```
xxx:/var/log$ sudo service jenkins status 
```

> 詹金斯停止/等待

```
xxx:/var/log$ sudo service jenkins restart 
```

> 停止：未知实例：jenkins 停止/预启动，进程 31663

/var/log/jenkins/ 是空的，我似乎在 /var/log/* 中找不到任何有用的东西。我确实看到，在 auth.log 中，正在设置一个 jenkins 用户。

有任何想法吗？：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T10:05:14.327

如果未安装软件包，清除将失败。我看到你做了以下事情。

```
sudo apt-get remove jenkins
sudo apt-get purge jenkins 
```

相反，暂时将 sources.list 设置为原始值，然后运行：

```
sudo apt-get update
sudo apt-get install jenkins
sudo apt-get purge jenkins 
```

然后你可以放回你的模组并安装非发行版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T14:56:35.287

`/var/log/upstart/jenkins.log`将让 Upstart 了解它是否认为 Jenkins 服务正在运行或应该运行。

`stop/pre-start`表示 的`pre-start`节`/etc/init/jenkins.conf`正在停止服务 - 例如，因为它缺少配置文件，或者因为它已在`/etc/default/jenkins`或类似情况下被禁用。

# c# - 计算skip and take进行分页

> ID：11885889
> 
> 赞同：1
> 
> 时间：2012-08-09T14:39:39.033
> 
> 标签：c#, jquery, asp.net, asp.net-mvc, pagination

我正在尝试将作为 PagedResult 返回的数据转换为使用 skip 和 take 进行分页的 PagedData：

```
eg:
For page1 – skip: 0, take: 25
For Page2 – skip: 25, take:25
For Page3 – skip: 50, take:25
and so on... 
```

我使用以下转换来计算跳过和采取：

```
skip --- Convert.ToInt32((Result.CurrentPage-1)*Result.ItemsPerPage),
take --- Convert.ToInt32(Result.ItemsPerPage)); 
```

但是，上述逻辑不适用于计算跳过。有人可以帮我纠正逻辑吗？

# sql - createSQLQuery 对缓存的休眠影响

> ID：11885892
> 
> 赞同：0
> 
> 时间：2012-08-09T14:39:43.287
> 
> 标签：sql, hibernate, caching

通过执行以下功能：

```
public void deleteByEntryId(long id)
{
    super.getSession().createSQLQuery("DELETE FROM guest WHERE entry_fk = " + id).executeUpdate();
} 
```

Hibernate 的缓存会知道/通知 Guest 对象的删除吗？

*   超类是 Spring 的 Hibernate 模板，它提供了方法`getSession()`和许多其他方法
*   createSQLQuery(...)` 是 Hibernate 的一个函数。

（我问我是按对象删除还是按 SQLquery 删除，我在测试中进一步得到 StaleState 或 OtimistickLockException。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T10:31:13.597

要使 Guest 表缓存失效，您需要添加“addSynchronizedEntityClass”调用：

```
public void deleteByEntryId(long id)
{
  super.getSession()
         .createSQLQuery("DELETE FROM guest WHERE entry_fk = " + id)
         .addSynchronizedEntityClass(Guest.class)
         .executeUpdate();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T14:47:29.490

不，不会的。即使是 HQL 更新和删除查询也不会影响内存状态。

# c - 将 lua 输出发送到非标准输出

> ID：11885895
> 
> 赞同：5
> 
> 时间：2012-08-09T14:39:46.623
> 
> 标签：c, lua, stdout

我有运行嵌入式 Lua 的 ac 程序。截至目前，这只是一个你好世界。不过，在继续之前，我希望能够将 lua 输出发送到 以外的其他地方`stdout`，以便我可以以某种方式对其进行操作。这是我的代码：

```
#include <stdio.h>

#include <lua.h>
#include <lauxlib.h>
#include <lualib.h>

int main() {
    lua_State *luaVM = luaL_newstate();
    //char result[1024];

    if (luaVM == NULL) {
        printf("Error initializing lua!\n");
        return -1;
    }
    luaL_openlibs(luaVM);
    luaL_dostring(luaVM, "print(\"hello world!\")");
    //Somehow put the output into result

    //printf("%s\n%s\n", result, result);

    lua_close(luaVM);
    return 0;
} 
```

例如，我想使用`result`在评论中看到的 lua 代码的结果打印两次。这可以做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T15:24:35.930

如果您的 Lua 代码将`print`用于输出内容，那么我想最简单的方法是`print`从 Lua 本身重新定义。像这样的东西：

```
print_stdout = print -- in case you need the old behavior

print = function(...)
  for arg,_ in ipairs({...}) do
    -- write arg to any file/stream you want here
  end
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T15:04:44.340

这个答案可能会受到一些读者的批评，但首先请看一下我专门为这个答案准备的[博客文章](http://andrejs-cainikovs.blogspot.se/2012/08/lua-output-redirection.html)，并阅读我为什么选择这个解决方案的前言。

正如所承诺的，我已将旧的 Lua 5.1 输出重定向补丁升级到最新版本。
补丁可在此处获得：[5.1.5](https://sites.google.com/site/andrejscainikovs/lua-5.1.5-output-redirect.patch?attredirects=0&d=1)和[5.2.1](https://sites.google.com/site/andrejscainikovs/lua-5.2.1-output-redirect.patch?attredirects=0&d=1)。

**补丁**：

```
patch -p1 < ~/download/lua-5.2.1-output-redirect.patch 
```

**构建**：

```
cd src  
make a LUA_A="liblua-5.2.1-redirect.a" SYSCFLAGS="-DLUA_USE_LINUX -DLUA_REDIRECT" SYSLIBS="-Wl,-E -ldl -lreadline -lncurses" 
```

**检查**：

```
nm liblua-5.x.y-redirect.a | grep printf
nm liblua-5.x.y-redirect.a | grep fputs
nm liblua-5.x.y-redirect.a | grep fwrite 
```

**测试**：

[在此处](https://sites.google.com/site/andrejscainikovs/lua-output-redirect-test.cpp?attredirects=0&d=1)获取测试程序（C/C++ 混合，抱歉）。通过以下方式构建它：

```
g++ -DLUA_REDIRECT -I/path/to/lua-5.2.1/src/ -L. lua-redirect-test.cpp -llua-5.2.1-redirect -ldl -o lua-redirect-test 
```

输出：

```
===== Test 1 output =====
Lua stdout buffer:
---
hello world!

---
Lua stderr buffer:
---

---
Lua error message:
---
(null)
---
===== Test 2 output =====
Lua stdout buffer:
---

---
Lua stderr buffer:
---

---
Lua error message:
---
[string "bad_function()"]:1: attempt to call global 'bad_function' (a nil value)
--- 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T17:17:16.893

Lua 的 I/O 库可能涵盖了您正在寻找的内容。该`io.output`功能允许您设置默认输出文件。查看 5.2 手册中的[I/O 库部分](http://www.lua.org/manual/5.2/manual.html#6.8)，看看还有什么。

为什么要重新路由输出？你说你想以某种方式操纵它，但你的意思是什么？

# objective-c - 状态栏中的活动指示器不会停止动画

> ID：11885897
> 
> 赞同：3
> 
> 时间：2012-08-09T14:39:54.870
> 
> 标签：objective-c, ios, xcode, uiactivityindicatorview

正如标题所示，我在状态中的活动指示器不会停止动画。

我在这里做了一些研究，不知道我做错了什么......

在我的应用程序委托中，我有

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

UIApplication* app = [UIApplication sharedApplication];
app.networkActivityIndicatorVisible = NO; 
```

在我的视图 controller.m 中，我想调用活动指示器

```
 NSString *web = @"http://google.com";
    NSURL *url = [NSURL URLWithString:web];
    NSURLRequest *requestUrl = [NSURLRequest requestWithURL:url];
    [toweb loadRequest:requestUrl];

    UIApplication* app = [UIApplication sharedApplication];

     app.networkActivityIndicatorVisible = YES; <<<<<<<<<<<<<<<<<<<<< 
```

现在这是我试图再次隐藏它的问题：

```
- (void)DidFinishLoad:(UIWebView *)toweb{
 [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
 }    

} 
```

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T14:45:45.070

看起来你的`UIWebViewDelegate`方法名称是错误的，应该是

```
-(void)webViewDidFinishLoad:(UIWebView *)webView {
      [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
} 
```

不是

```
- (void)DidFinishLoad:(UIWebView *)toweb{
     [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
} 
```

因此，当`UIWebView`尝试调用其委托方法时，没有方法声明，因此不会通知您的类 Web 视图已完成加载。

还要确保您已将您的班级设置为代表

`toweb.delegate = self`

并在您的 .h 文件中

`@interface viewcontroller : UIViewController <UIWebViewDelegate>`

请注意，在委托回调方法中，`webView`参数是对已完成加载的 webview 的引用（在这种情况下，它是您调用的那个`toweb`） 这是指向同一对象的*不同*`UIWebView`指针，因此不需要与 Web 视图的本地声明/句柄同名

# jquery - html 5 中 event.originalEvent.dataTransfer.files 和 event.dataTransfer.files 之间的区别

> ID：11885900
> 
> 赞同：13
> 
> 时间：2012-08-09T14:40:02.957
> 
> 标签：jquery, html, drag-and-drop

和有什么区别

```
event.originalEvent.dataTransfer.files 
```

和

```
event.dataTransfer.files 
```

？？？

因为在拖放中，第二个代码不起作用并且它是未定义的，我不得不使用第一个代码，因为它可以工作！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-09T14:42:34.140

jQuery 不会将浏览器事件对象传递给您，它会传递[jQuery 事件对象](http://api.jquery.com/category/events/event-object/)。`.originalEvent`您可以通过jQuery 事件对象中的属性访问原始未触及的事件对象。然后就可以正常进行了。

所以在代码中：

jQuery 事件模型：

```
$(document).on("drop dragend dragstart dragenter dragleave drag dragover", function(event) {
    event.preventDefault();
    if (event.type === "drop") {
        alert(event.originalEvent.dataTransfer.files);
    }
}); 
```

W3C 事件模型：

```
function preventDefault(event) {
    event.preventDefault();
}

function alertFiles(event) {
    alert(event.dataTransfer.files);
}
document.addEventListener("dragstart", preventDefault, false);
document.addEventListener("dragenter", preventDefault, false);
document.addEventListener("dragleave", preventDefault, false);
document.addEventListener("drag", preventDefault, false);
document.addEventListener("dragend", preventDefault, false);
document.addEventListener("dragover", preventDefault, false);
document.addEventListener("drop", preventDefault, false);
document.addEventListener("drop", alertFiles, false); 
```

# jquery - 通过 JQuery 将 JSON 发布到 Spring Roo 控制器

> ID：11885903
> 
> 赞同：0
> 
> 时间：2012-08-09T14:40:06.367
> 
> 标签：jquery, json

我最近在使用 JQuery 和 Spring Roo 时遇到了问题。我想将数据发布到 Spring Roo 控制器的启用 JSON 的 URL（我认为这不是特别重要，但我把它放在那里只是为了清楚起见）。我知道控制器工作正常，因为我可以通过 Curl 命令向它发布数据，如下所示：

```
curl -i -X POST -H "Content-Type:application/json" http://localhost:8080/PeopleProject/people 
     -d '{"firstName":"some","lastName":"guy","email":"some@guy.com"} 
```

所以，然后我尝试在 Javascript 中通过 $.post() 调用发布数据，如下所示：

```
 var data = {"firstName":"some","lastName":"guy","email":"some.guy@gmail.com"};
 $.post('/PeopleProject/people', data, successfulPost ) ; 
```

但是，我会在服务器端收到关于无法解析输入的错误。运行调试器，我可以看到通过这个 Javascript 发布的数据是通过 URL 编码的，而来自 curl 命令的数据不是。

最后，经过一番折腾，我尝试了这个 Javascript：

```
 var jqxhr =
            $.ajax({
                url: "/PeopleProject/people",
                processData : true,
                contentType:"application/json",
                type : "POST",
                data: '{"firstName":"some","lastName":"guy","email":"some.guy@gmail.com"}',
            }) 
```

这行得通！但是，我不确定它为什么起作用而 $.post() 没有。谁能比我更了解 Javascript/JQuery 来解释这一点？

我以为我在某处读到，到服务器的 JSON 帖子会将内容编码为名称值对，但我猜这是不对的，因为我看到 curl 命令发布了漂亮、干净的 JSON，而 $.post( ) 推送一个 URL 编码的查询字符串。

所以我的问题是：上面的 ajax() 调用是否是将 JSON 数据推送到服务器的首选方法？或者，有没有办法使用 $.push() 并让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:44:40.107

`$.post`不支持`processData`作为论据。[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

```
jQuery.post( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] ) 
```

**更新**

`processData: false`告诉 jquery 保留数据参数原样（在本例中为 json 字符串）并将其作为请求正文发送。由于`$.post`没有禁用选项，因此您必须先使用`processData`才能做到这一点`$.post``$.ajaxSetup({processData: false, contentType: "application/json"});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:19:33.457

我认为答案是 $.post() 自动将数据编码为 application/x-www-form-urlencoded。通过切换到 $.ajax() 调用，您可以选择编码，我的经验清楚地暗示了这一点。感谢大家！

# java - Socket setSoTimeout 说明

> ID：11885909
> 
> 赞同：1
> 
> 时间：2012-08-09T14:40:28.113
> 
> 标签：java

我有一个场景，其中有服务器在指定的 ip 和端口上侦听以及连接到该服务器的客户端。现在我正在使用`readline`方法从服务器读取响应：

```
String readme=bs.readline()). 
```

这里`bs`是`bufferedreader`对象。我想知道在阅读回复之前是否写了这一行

```
socket.setSoTimeout(1000) 
```

如果直到 1000 毫秒没有响应

套接字是否超时并断开连接，或者它不断开套接字并在`readme`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:51:08.233

其实也没有。A`SocketTimeoutException`被抛出。

从[文档](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#setSoTimeout%28int%29)：

> `setSoTimeout`
> 
> ```
> public void setSoTimeout(int timeout)
>                   throws SocketException 
> ```
> 
> 使用指定的超时启用/禁用 SO_TIMEOUT，以毫秒为单位。将此选项设置为非零超时，对与此 Socket 关联的 InputStream 的 read() 调用将仅阻塞此时间量。如果超时到期，则会引发 java.net.SocketTimeoutException，尽管 Socket 仍然有效。**必须**在进入阻塞操作之前启用该选项才能生效。超时必须 > 0。超时为零被解释为无限超时。
> 
> **参数：** `timeout` - 指定的超时时间，以毫秒为单位。 **抛出：** `SocketException` - 如果底层协议中有错误，例如 TCP 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:50:01.673

套接字不会断开连接。相反，任何读取方法都会抛出您可能希望在程序中捕获的 SocketTimeoutException。套接字仍然可以使用，但`readme`在这种情况下不会定义：

```
String readme;
try
{
 readme = bs.readline;
// TODO do stuff with readme
}
catch (SocketTimeoutException e)
{
// did not receive the line. readme is undefined, but the socket can still be used
 socket.close(); // disconnect, for example
} 
```

在示例中假设`IOException`s 在其他地方被捕获或被抛出。

文档很好地解释了这种行为：[Socket.setSoTimeout(int)](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html#setSoTimeout%28int%29)

# sql - 硬编码日期字符串比 SELECT 中的 DateTime 快得多？

> ID：11885912
> 
> 赞同：1
> 
> 时间：2012-08-09T14:40:40.117
> 
> 标签：sql, sql-server, performance, indexing

我有一个非常大的表（1500 万行，这是一个审计表）。

我需要运行一个查询来检查审计表中是否出现在某个日期之后并满足某些条件（我正在寻找仅在当天发生的审计记录）

当我运行时：

```
SELECT Field1, Field2 FROM AUDIT_TABLE WHERE AUDIT_DATE >= '8/9/12' 
```

结果很快就回来了（几秒钟，对于 15M 行来说还不错）

当我运行时：

```
SELECT Field1, Field2 FROM AUDIT_TABLE WHERE AUDIT_DATE >= @DateTime 
```

它需要 11-15 秒并进行全表扫描。

我查询的实际字段是 DATETIME 类型，并且索引也在该字段上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T14:43:47.023

听起来您的计划很糟糕，可能是因为有人在某个时候使用了一个参数，该参数选择了足够多的表，以至于表扫描是该参数值的最有效方式。尝试以这种方式运行一次查询：

```
SELECT ... FROM AUDIT_TABLE WHERE AUDIT_DATE >= @DateTIme OPTION (RECOMPILE); 
```

然后以这种方式更改您的代码：

```
SELECT ... FROM dbo.AUDIT_TABLE WHERE AUDIT_DATE >= @DateTime; 
```

使用`dbo.`前缀至少可以防止具有不同架构的不同用户使用不同版本的计划污染计划缓存。它还将取消将来的查询与存储的错误计划的关联。

如果您要在选择最近的行（小 %）和很多行之间有所不同，我可能会把 OPTION (RECOMPILE) 留在那里。每次在重新编译中支付轻微的 CPU 损失，这比在大多数查询中陷入糟糕的计划要便宜。

我见过的另一个绕过参数嗅探的技巧：

```
ALTER PROCEDURE dbo.whatever
  @DateTime DATETIME
AS
BEGIN
  SET NOCOUNT ON;

  DECLARE @dt DATETIME;
  SET @dt = @DateTime;

  SELECT ... WHERE AUDIT_DATE >= @dt;
END
GO 
```

这是一种肮脏且不直观的技巧，但它使优化器可以更好地了解参数值，并有更好的机会针对该值进行优化。

# join - 将带有层次索引的 Pandas 系列连接回源 DataFrame

> ID：11885916
> 
> 赞同：7
> 
> 时间：2012-08-09T14:41:05.920
> 
> 标签：join, group-by, pandas, ipython, dataframe

我试图将我的大脑包裹在`pandas`数据结构上，并试图在愤怒中使用它们。我发现`groupby`操作会产生一个熊猫系列对象。但我不太清楚如何使用生成的系列。特别是，我想做两件事：

1）将结果“加入”回初始DataFrame

2）根据层次索引从结果系列中选择一个特定的值。

这是一个可以使用的玩具示例：

```
import pandas
df = pandas.DataFrame({'group1': ['a','a','a','b','b','b'],
                       'group2': ['c','c','d','d','d','e'],
                       'value1': [1.1,2,3,4,5,6],
                       'value2': [7.1,8,9,10,11,12]
})
dfGrouped = df.groupby( ["group1", "group2"] , sort=True)

## toy function, obviously not my real function
def fun(x): return mean(x**2)

results = dfGrouped.apply(lambda x: fun(x.value1)) 
```

所以产生的系列（结果）看起来像这样：

```
group1  group2
a       c          2.605
        d          9.000
b       d         20.500
        e         36.000 
```

这就说得通了。但是我该怎么做：

1) 将其加入到原始 DataFrame`df`

2) 选择一个值，例如 group1=='b' & group2=='d'

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T15:09:37.260

所以对于剩下的#1。

```
In [9]: df
Out[9]:
  group1 group2  value1  value2
0      a      c     1.1     7.1
1      a      c     2.0     8.0
2      a      d     3.0     9.0
3      b      d     4.0    10.0
4      b      d     5.0    11.0
5      b      e     6.0    12.0

In [10]: results
Out[10]:
group1  group2
a       c          2.605
        d          9.000
b       d         20.500
        e         36.000

In [11]: df.set_index(['group1', 'group2'], inplace=True)['results'] = results

In [12]: df
Out[12]:
               value1  value2  results
group1 group2
a      c          1.1     7.1    2.605
       c          2.0     8.0    2.605
       d          3.0     9.0    9.000
b      d          4.0    10.0   20.500
       d          5.0    11.0   20.500
       e          6.0    12.0   36.000

In [13]: df.reset_index()
Out[13]:
  group1 group2  value1  value2  results
0      a      c     1.1     7.1    2.605
1      a      c     2.0     8.0    2.605
2      a      d     3.0     9.0    9.000
3      b      d     4.0    10.0   20.500
4      b      d     5.0    11.0   20.500
5      b      e     6.0    12.0   36.000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:50:15.993

在胡闹的时候，我发现了#2的答案：

`results["b","d"]`给我 group1=='b' & group2=='d' 的值

# firefox - 使用俄语文件名导出到 excel

> ID：11885919
> 
> 赞同：0
> 
> 时间：2012-08-09T14:41:22.660
> 
> 标签：firefox, browser, utf-8, struts2, inputstream

我有一个我尝试使用 struts2 框架下载的 excel 文件。

我在值堆栈上有我的 excel 文件（InputStream 对象），这是我在 struts.xml 中的配置：

```
 <result name="ExcelExport" type="stream">
    <param name="contentDisposition">attachment;filename=${reportFileName}.xls</param>
    <param name="contentType">application/vnd.ms-excel</param>
    <param name="inputName">xlsStream</param>
    <param name="bufferSize">3000</param>
  </result> 
```

reportFileName 参数也在值堆栈上，它是基于 i18n 的。使用谷歌浏览器，当语言为俄语时，下载的excel看起来不错，即下载的文件名和excel内容都显示俄语字符。

使用 Firefox，下载的 excel 包含有效的俄语内容，但文件名是乱码，例如 '%D0%9E%D1%82%D1%87%D0%B5%D1%82_%D0%BE_%D0%B7%D0%B0 %D0%BF%D0%B0%D1%81%D0%B0%D1%85-%D0%9F%D1%80%D0%BE%D1%81%D0%BC%D0%BE%D1%82% D1%80_%D0%BF%D1%80%D0%BE%D0%B4%D1%83%D0%BA%D1%82%D0%BE%D0%B.xls'

有谁知道如何解决这个问题？

# javascript - 如何访问函数中的变量

> ID：11885920
> 
> 赞同：0
> 
> 时间：2012-08-09T14:41:24.297
> 
> 标签：javascript, variables, global-variables

如何访问在这样的函数中定义的变量：

```
var functionVar = function(){
  this.var = 1;
}

console.log(functionVar().var); //MH - obviously this doesn't work, but I'm looking for the command that will log that variable 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:44:22.247

你可以这样访问，

```
var functionVar = function(){
  this.var = 1;
}

 var o = new functionVar();
 alert(o.var)​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T05:49:20.600

一个**新**的就可以了。

```
var functionVar = function(){
  this.var = 1;
}

console.log(new functionVar().var); 
```

尽管不确定您要通过使用此代码来实现什么。

# parsing - 自定义 ADT 与解析器返回值的树

> ID：11885921
> 
> 赞同：3
> 
> 时间：2012-08-09T14:41:30.470
> 
> 标签：parsing, haskell, parsec

我正在使用 Parsec 构建一个简单的 Lisp 解析器。

对解析器类型使用自定义 ADT 与使用标准树（即`Data.Tree`）相比有什么（缺点）优势？

在尝试了两种方式之后，我**为**自定义 ADT 提出了几点意见（即`Parser ASTNode`）：

*   似乎更加清晰和简单
*   其他人已经这样做了（包括[Tiger](http://legacy.cs.uu.nl/daan/parsec.html)，它与 Parsec 捆绑在一起）

一个**反对**（即`Parser (Tree ASTNode)`：

*   `Data.Tree`已经有Functor、Monad等实例，对语义分析、评估、计算代码统计会有很大帮助

* * *

例如：

1.  自定义 ADT

    ```
    import Text.ParserCombinators.Parsec

    data ASTNode 
      = Application ASTNode [ASTNode]
      | Symbol String
      | Number Float
      deriving (Show)

    int :: Parser ASTNode
    int = many1 digit >>= (return . Number . read)

    symbol :: Parser ASTNode
    symbol = many1 (oneOf ['a'..'z']) >>= (return . Symbol)

    whitespace :: Parser String
    whitespace = many1 (oneOf " \t\n\r\f")

    app :: Parser ASTNode
    app =
      char '(' >>
      sepBy1 expr whitespace >>= (\(e:es) ->
      char ')' >>
      (return $ Application e es))

    expr :: Parser ASTNode
    expr =  symbol  <|>  int  <|>  app 
    ```

    示例使用：

    ```
    ghci> parse expr "" "(a 12 (b 13))"
    Right 
      (Application 
        (Symbol "a") 
        [Number 12.0, Application 
                        (Symbol "b") 
                        [Number 13.0]]) 
    ```

2.  `Data.Tree`

    ```
    import Text.ParserCombinators.Parsec
    import Data.Tree

    data ASTNode 
      = Application (Tree ASTNode)
      | Symbol String
      | Number Float
      deriving (Show)

    int :: Parser (Tree ASTNode)
    int = many1 digit >>= (\x -> return $ Node (Number $ read x) [])

    symbol :: Parser (Tree ASTNode)
    symbol = many1 (oneOf ['a' .. 'z']) >>= (\x -> return $ Node (Symbol x) [])

    whitespace :: Parser String
    whitespace = many1 (oneOf " \t\n\r\f")

    app :: Parser (Tree ASTNode)
    app =
      char '(' >>
      sepBy1 expr whitespace >>= (\(e:es) ->
      char ')' >>
      (return $ Node (Application e) es))

    expr :: Parser (Tree ASTNode)
    expr =  symbol  <|>  int  <|>  app 
    ```

    和示例使用：

    ```
    ghci> parse expr "" "(a 12 (b 13))"
    Right
     (Node
       (Application 
         (Node (Symbol "a") []))
       [Node (Number 12.0) [],
        Node 
          (Application 
            (Node (Symbol "b") []))
          [Node (Number 13.0) []]]) 
    ```

    *（对不起格式 - 希望它很清楚）*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:53:07.610

我绝对会选择 AST，因为解释/编译/语言分析通常很大程度上取决于您的语言**结构**。AST 将简单自然地代表和尊重该结构，而`Tree`两者都不会。

例如，语言实现技术的一种常见形式是通过翻译来实现一些复杂的特性：将涉及这些特性或结构的程序翻译成不使用它们的语言子集的程序（例如，Lisp 宏都是对这个）。例如，如果您使用 AST，类型系统通常会禁止您生成非法翻译作为输出。而不了解您的程序的`Tree`类型将无济于事。

您的 AST 看起来并不复杂，因此为它编写实用函数应该不难。以这个为例：

```
foldASTNode :: (r -> [r] -> r) -> (String -> r) -> (Float -> r) -> r
foldASTNode app sym num node = 
    case node of
      Application f args -> app (subfold f) (map subfold args)
      Symbol str         -> sym str
      Number n           -> num n
    where subfold = foldASTNode app sym num 
```

无论如何，`Functor`你希望在你的 AST 上有什么类型的？上面没有类型参数...

# c# - WriteableBitmap PixelBuffer 流长度太小

> ID：11885926
> 
> 赞同：1
> 
> 时间：2012-08-09T14:41:42.860
> 
> 标签：c#, buffer, windows-runtime, writeablebitmap

我遇到了一个问题，我试图将一个 WriteableBitmap 的像素缓冲区复制到另一个 WriteableBitmap，本质上是提供 WriteableBitmap 对象的副本。但是，当我尝试这样做时，我遇到了第二个 WriteableBitmap 的流长度太短而无法容纳第一个 WriteableBitmap 的所有值的问题。我在下面发布了我的代码。请记住，我正在从网络摄像头捕获原始数据。但是，当我将“ps”对象的流大小与 wb1 和 wb2 进行比较时，ps 的大小比它们都小得多。我感到困惑的是为什么 wb2 流大小小于 wb1。谢谢你的帮助。

```
private MemoryStream originalStream = new MemoryStream();
WriteableBitmap wb1 = new WriteableBitmap((int)photoBox.Width, (int)photoBox.Height);
WriteableBitmap wb2 = new WriteableBitmap((int)photoBox.Width, (int)photoBox.Height);

ImageEncodingProperties imageProperties = ImageEncodingProperties.CreateJpeg();
var ps = new InMemoryRandomAccessStream();

await mc.CapturePhotoToStreamAsync(imageProperties, ps);
await ps.FlushAsync();

ps.Seek(0);

wb1.SetSource(ps);
(wb1.PixelBuffer.AsStream()).CopyTo(originalStream); // this works

originalStream.Position = 0;
originalStream.CopyTo(wb2.PixelBuffer.AsStream()); // this line gives me the error: "Unable to expand length of this stream beyond its capacity"

Image img = new Image(); 
img.Source = wb2; // my hope is to treat this as it's own entity and modify this image independently of wb1 or originalStream

photoBox.Source =wb1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:44:52.377

我认为您应该从 PixelBuffer 创建一个写入器并使用它来复制流。AsStream 方法应该用于读取缓冲区，而不是写入缓冲区。

看看 [http://social.msdn.microsoft.com/Forums/en-NZ/winappswithcsharp/thread/2b499ac5-8bc8-4259-a144-842bd756bfe2](http://social.msdn.microsoft.com/Forums/en-NZ/winappswithcsharp/thread/2b499ac5-8bc8-4259-a144-842bd756bfe2)

对于一段代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:50:27.923

请注意，当您执行 new WriteableBitmap(w, h) 然后调用 SetSource() 到不同分辨率的图像时 - 位图的大小会改变（它不会是构造函数中传递的 wxh）。您的 photoBox.Width/Height 可能与您的 CapturePhotoToStreamAsync() 调用返回的不同（我假设图像是在默认或预配置的相机设置下捕获的，而 photoBox 只是屏幕上的一个控件）。

做这样的事情怎么样

```
ps.Seek(0);
wb1.SetSource(ps);
ps.Seek(0);
wb2.SetSource(ps); 
```

# ruby-on-rails - 查找与所有类别匹配的产品 (Rails 3.1)

> ID：11885929
> 
> 赞同：0
> 
> 时间：2012-08-09T14:42:00.020
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在为 Rails 3.1.1 中的 ActiveRecord 查询而苦苦挣扎。

我有 2 个模型，产品和类别，从产品到类别有一个 has_and_belongs_to_many（一个产品可以有很多类别）。

我正在尝试编写一个搜索查询，该查询将找到具有所有指定类别的产品（想想用户可以选择 X 类别进行搜索的搜索 UI）。

我可以做这个：

```
results = Product.joins(:category_products).where('category_products.category_id' => [1,5,8]) 
```

但这会返回具有任何这些类别的产品（即生成 SQL“IN(1,5,8)”子句）。

如何创建一个可以进行 ALL 匹配的查询？例如，查找具有所有这些 category_id 的产品...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:00:17.583

您可以使用 having 子句来做到这一点：

```
@ids = [1,5,8]
query = Product.select('products.id,products.name').joins(:categories) \
               .where(:categories => {:id => @ids}) \
               .group('products.id, products.name') \
               .having("count(category_products.category_id) = #{@ids.length}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:51:11.727

```
results = Product.joins(:category_products)
[1,5,8].each do |category|
  results = results.where('category_products.category_id' => category)
end 
```

# python - 使用 ipython，重命名的函数可以变成双重命名。该模块同时获得了旧名称和新名称

> ID：11885932
> 
> 赞同：0
> 
> 时间：2012-08-09T14:42:05.373
> 
> 标签：python, refactoring, ipython

无论是*reload*、*del*、*import* again 还是*autoreload*，函数都可以用两个名字来引用，旧的名字和新的名字一样。

需要明确的是，这是我的代码：

```
#my_module.py
#...
#def waitting_user():  #This is the old name
#...
def waiting_user():  #this is new
#... see, I change the function name. 
```

然后我可以同时使用它们`my_moudle.waitting_user()`，并且`my_moudle.waiting_user`在 ipython 控制台中，它们也是一样的。旧名称变成了鬼名，它会留在运行的 ipy 中。口译员。有什么办法在它发生时删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:45:29.547

> 有什么办法在它发生时删除它？

`del`你不想要的名字。IE，`del my_module.waiting_user`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:37:11.970

你没有改变任何东西的名字。您只是在创建两个不同命名的函数。如果你有一个用坏名字定义的函数，你可以给它分配一个新名字，然后`del`是上面提到的旧名字。

```
>>> def crap_name():
...     print 1
>>> good_name = crap_name
>>> del crap_name
>>> good_name()
1 
```

# sql - SQLite：使用最近的整数字段对记录进行分组

> ID：11885935
> 
> 赞同：0
> 
> 时间：2012-08-09T14:42:12.973
> 
> 标签：sql, sqlite

有一个带有整数字段的表。我需要编写一个查询，它返回具有以下条件的组：某个组中字段的最小值与下一组中的最大值的差异大于 N。

N=10 的示例。

表的 SQL 查询

```
01    A    A    1
02    A    B    9
03    B    B    11
04    B    C    22
05    C    C    29 
```

应该返回

```
01    A    A    1    0
02    A    B    9    0
03    B    B    11   0
04    B    C    22   1
05    C    C    29   1 
```

[这](https://stackoverflow.com/questions/10016802/python-group-a-list-of-integer-with-nearest-values)是 Python 的类似问题。如何在 SQLite 中做到这一点？

# lucene - 如何查询 lucene 的空字段？

> ID：11885936
> 
> 赞同：22
> 
> 时间：2012-08-09T14:42:18.037
> 
> 标签：lucene, field

我希望在查询的第二部分中有一个结果列表，而数据不为空。我发现如何在 solr 中做到这一点，但在 lucene 中却没有。谁有想法谢谢

细绳 ：

( field_one:search AND field_two:3000) OR (field_three:search AND field_two:3000 AND **NOT NULL field_one** )

询问：

+field_one:搜索 +field_two:3000 +field_three:搜索 +field_two:3000 **-field_one:null**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-09T19:12:27.583

```
*:*  -MY_FIELD_NAME:[* TO *] 
```

上面应该做到这一点，注意 * : * 用于 Lucene。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-13T09:26:10.070

```
*:* -MY_FIELD_NAME:[* TO "zzzzzzzzzz"] 
```

您可以添加更多“z”字符以确保包含该字段的任何值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-29T09:42:58.783

`-_exists_:field_one`在 ElasticSearch 6.0 中为我工作

参考：[https ://www.elastic.co/guide/en/elasticsearch/reference/6.0/query-dsl-query-string-query.html#_field_names](https://www.elastic.co/guide/en/elasticsearch/reference/6.0/query-dsl-query-string-query.html#_field_names)

# actionscript - 如何使用动作脚本在 HTML 网页中生成呈现的 SWF 文件的图像？

> ID：11885941
> 
> 赞同：0
> 
> 时间：2012-08-09T14:42:37.777
> 
> 标签：actionscript

我必须从 HTML 网页中呈现的 SWF 文件生成图像（快照），并且必须将相同的图像保存在服务器中。是否可以使用 ActionScript，如果可以，请用一些示例代码片段指导我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:56:01.897

这个问题看起来与您要实现的目标非常相关：

[如何使用 ActionScript3/PHP 从 swf 导出图像？](https://stackoverflow.com/questions/799784/how-to-export-image-from-swf-with-actionscript3-php)

# ios - 从 Modal 导航到根 ViewController

> ID：11885945
> 
> 赞同：0
> 
> 时间：2012-08-09T14:42:49.367
> 
> 标签：ios, uinavigationcontroller

我有一个打开模态视图控制器（MVC）的根视图控制器（RVC）。然后，我通过推送在 MVC 中导航到更多 VC。从这些 VC 回到 RVC 的最佳实践是什么？

通常，我有一个来自 Modal VC 的代表，它调用 RVC，然后关闭模态，但是如果你离开它，但我不确定如果你离开它我会怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:43:42.767

不要忘记委托不必是模型导航堆栈中 UIViewController 的属性。考虑创建一个将 rootviewcontroller 的引用作为委托的单例类。这样，您的应用程序中的任何类都可以访问它，并且您不必不断地将它传递给需要它的每个 UIViewController。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:12:05.207

没有看到任何代码有点难以帮助，但让我在这里在黑暗中拍摄。

我将假设模态视图中显示的第一个控制器提供协议/委托来调用解除操作。

如果您在模态视图中使用 UINavigationController 将其他视图控制器推送到堆栈上，您总是可以像这样获得第一个控制器

```
UIViewController * yourFirstController = [[[self navigationController] viewControllers] objectAtIndex:0];

// and then use your delegate to call your dismiss method
// you will need to typecast your controller based on your subclass otherwise will get warning here
if ([[yourFirstController delegate] respondsToSelector:@selector(yourCloseProtocolMethod)]) {
    [[yourFirstController delegate] yourCloseProtocolMethod];
} 
```

# ios - 使用 Sections 时细化 UItableView

> ID：11885947
> 
> 赞同：0
> 
> 时间：2012-08-09T14:42:58.663
> 
> 标签：ios, sections, uitableview

有人可以帮帮我吗。我对此非常陌生，并试图继续我的详细信息屏幕，只要我不使用部分，它就可以正常工作。我尝试详细抓取的文件是 html 文件。（编号 1 - 53）。什么时候没有节的细节我只需使用 htmlFile = [artikelen objectAtIndex:[path row]] 来排序；

当我使用部分时，[路径行] 将类似于 [0.1] 而不是继续编号。

我当然希望有人可以帮助我解决和理解这个问题。

谢谢。

雅科

```
 [super viewDidLoad];
    artikelen = [[NSMutableArray alloc]initWithObjects:@"artikel1",@"artikel2",@"artikel3",@"artikel4",@"artikel5",@"artikel6",@"artikel7",@"artikel8",@"artikel9",@"artikel10",@"artikel11",@"artikel12",@"artikel13",@"artikel14",@"artikel15",@"artikel16",@"artikel17",@"artikel18",@"artikel19",@"artikel20",@"artikel21",@"artikel22",@"artikel23",@"artikel24",@"artikel25",@"artikel26",@"artikel27",@"artikel28",@"artikel29",@"artikel30",@"artikel31",@"artikel32",@"artikel33",@"artikel34",@"artikel35",@"artikel36",@"artikel37",@"artikel38",@"artikel39",@"artikel40",@"artikel41",@"artikel42",@"artikel43",@"artikel44",@"artikel45",@"artikel46",@"artikel47",@"artikel48",@"artikel49",@"artikel50",@"artikel51",@"artikel52",@"artikel53",@"artikel54", nil];

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 14;
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    NSArray *sectionTitles = [[NSArray alloc]

initWithObjects:@"Hoofdstuk I.", @"Hoofdstuk
II.",@"Hoofdstuk III.",@"Hoofdstuk IV.",@"Hoofdstuk IVA.",@"Hoofdstuk IVB.",@"Hoofdstuk    

V.",@"Hoofdstuk VA.",@"Hoofdstuk VI.",@"Hoofdstuk VII.",@"Hoofdstuk VII B.",
                                  @"Hoofdstuk VIIC.",@"Hoofdstuk VIII.",nil];

        return sectionTitles;
    }

- (NSString *)tableView:(UITableView *)tableView
titleForHeaderInSection:(NSInteger)section
{
    if ( section == 0 ) return @"Hoofdstuk I. Algemeen";
    if ( section == 1 ) return @"Hoofdstuk II. De instelling";
    if ( section == 2 ) return @"Hoofdstuk III. Samenstelling ";
    if ( section == 3 ) return @"Hoofdstuk IV. Het overleg ";
    if ( section == 4 ) return @"Hoofdstuk IVA. bevoegdheden ";
    if ( section == 5 ) return @"Hoofdstuk IVB. Hgegevens aan de ondernemingsraad";
    if ( section == 6 ) return @"Hoofdstuk IVC. Verdere bevoegdheden van de";
    if ( section == 7 ) return @"Hoofdstuk V. De centrale ";
    if ( section == 8 ) return @"Hoofdstuk VA.";
    if ( section == 9 ) return @"Hoofdstuk VI. De algemene";
    if ( section == 10 ) return @"Hoofdstuk VII.";
    if ( section == 11 ) return @"Hoofdstuk VII. A.de overheid";
    if ( section == 12 ) return @"Hoofdstuk VII. B ";
    if ( section == 13 ) return @"Hoofdstuk VIII";
    return @"Other";
} 
```

要显示我使用的正确行数：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if ( section == 0 ) return 1;
    if ( section == 1 ) return 4;
... etcetra
return 0;
} 
```

要显示我使用过的正确单元格：

```
if ( indexPath.section == 12  ) mijnRij += 45;   //7a
if ( indexPath.section == 13  ) mijnRij += 56;   //8

cell.textLabel.text = [artikelen objectAtIndex:mijnRij];
return cell; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:57:57.683

如果您使用更好的数据结构，它将使编码更容易。

我建议你的主要结构应该是一个字典数组。每个字典应该匹配一个部分并包含两个键。第一个键应该给你节标题，第二个键应该给你一个与该节中的行匹配的数组。

这样就不需要那么多条件了。部分编号告诉您要使用哪个字典，而行告诉您在字典的子数组中查找的位置。

# vbscript - 批量关闭大写锁定 - 替代方案

> ID：11885949
> 
> 赞同：2
> 
> 时间：2012-08-09T14:43:05.417
> 
> 标签：vbscript, batch-processing, batch-file

我想知道我是否可以使用下面的相同代码并进行一些小的更改来添加我需要的功能。它的写法：

```
::::Set WshShell = CreateObject("WScript.Shell")
::::WshShell.SendKeys "{capslock}"
Set WshShell = Nothing
findstr "^::::" "%~sf0" > temp.vbs & Cscript //nologo temp.vbs & del temp.vbs
echo Capslock is off 
```

结果 ：

*   如果 CAPS 已经关闭，它会激活 CAPS ON
*   如果它已经打开，它会激活 CAPS OFF

我想将其更改为**always OFF**。如何在代码中进行这种轻微的更正？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:58:30.327

此 VBS 使用 Word.Application 来查询 CAPS 状态。如果 CAPS 为 ON，那么我们将其关闭。

```
Set objShell = CreateObject("WScript.Shell")
Set objWord = CreateObject( "Word.Application" )

if objWord.CapsLock <> 0 then
   ' turn capslock off
   objShell.SendKeys "{capslock}" 
end if
objWord.Quit 
```

为了将所有内容保存在一个批处理文件中，我们生成了一个临时 .vbs 文件，执行并删除它以确保 CAPS 处于关闭状态。

```
set BAT_HOME=%~dp0
echo %BAT_HOME%
cd %BAT_HOME%
echo Set objShell = CreateObject("WScript.Shell") > temp.vbs
echo Set objWord = CreateObject( "Word.Application" ) >> temp.vbs
echo if objWord.CapsLock ^<^> 0 then >> temp.vbs
echo objShell.SendKeys "{capslock}" >> temp.vbs
echo end if >> temp.vbs 
echo objWord.Quit >> temp.vbs
cscript //nologo temp.vbs
del temp.vbs
echo ... do your thing in the batch file 
```

# oracle - 如何检查该组在 Oracle 中是否有价值？

> ID：11885955
> 
> 赞同：1
> 
> 时间：2012-08-09T14:43:18.057
> 
> 标签：oracle, group-by

例如，我有一个表 tbl

```
values
10
20
30
40 
```

在这张桌子上，我有这样的 GROUP BY 条件：

```
SELECT ???
FROM tbl 
GROUP BY values 
```

我需要检查该组是否具有某些值，例如 30

**UPD：** 在实际任务中，有一个包含许多列和其他操作的表，在一个列中，我需要检查该列的每一组中是否有值。

**UPD2：** 我需要这样的东西：

```
select 
min(created_timestamp),
max(resource_id),
max(price),
CASE WHEN event_type has (1704 or 1701 or 1703) THEN return found value END
CASE WHEN event_type has (1707) THEN return 1707 END
from subscriptions
group by guid 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:50:57.300

```
SELECT
    MIN(created_timestamp),
    MAX(resource_id),
    MAX(price),
    MIN(CASE WHEN event_type IN (1704, 1701, 1703) 
                 THEN found_value 
             WHEN event_type = 1707 
                 THEN 1707 
                 ELSE NULL 
        END)
FROM subscriptions
GROUP BY guid ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:00:54.000

如果您的目标是查找是否存在某些值，则不需要使用 group by 子句。如果您还考虑性能，请使用此方法。

```
SELECT DECODE (COUNT(1),0,'Not Exist','Yes has some values')
FROM dual
WHERE EXISTS ( SELECT 1
               FROM tbl
               WHERE VALUES='&Your_Value_To_Check'
               ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:49:54.080

我没有得到你在 select 子句中的内容.. 但是如果你想在通过查询运行 group 时也看到输出中的值，试试这个

select function(), values from tbl group by values

function() -- 可以是任何函数，例如 -- count 或 sum

如果您只想特定于值 30 .. 然后添加 where 子句值 = 30。

# php - 是否可以在 symfony2 中使路由的默认参数值动态化？

> ID：11885957
> 
> 赞同：3
> 
> 时间：2012-08-09T14:43:32.860
> 
> 标签：php, symfony, url-routing

我有一个使用注释在 symfony2 控制器中定义的路由。例如：

```
@Route("/{year}", name="show_list_for_user", defaults={ "year" = "2012" }) 
```

是否可以使默认年份动态化。也许从服务对象中读取年份？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T14:22:20.257

您可以在 RequestContext 中设置默认参数。

当 Symfony 生成一个 URL 时，它按以下顺序使用值：

见`Symfony\Component\Routing\Generator\UrlGenerator::doGenerate`：

```
$mergedParams = array_replace($defaults,
                              $this->context->getParameters(),
                              $parameters); 
```

1.  用户为 generateUrl() 函数提供的参数
2.  上下文参数
3.  路由默认值

您可以在请求事件侦听器中设置上下文参数以覆盖路由默认值：

```
use Symfony\Component\HttpKernel\Event\GetResponseEvent;
use Symfony\Component\Routing\RouterInterface;

class RequestListener
{
    private $_router;

    public function __construct(RouterInterface $router)
    {
        $this->_router = $router;
    }

    public function onRequest(GetResponseEvent $event)
    {
        $context = $this->_router->getContext();
        if (!$context->hasParameter('year')) {
            $context->setParameter('year', date('Y'));
        }
    }
} 
```

服务配置：

```
<service id="my.request_listener"
         class="MyBundle\EventListener\RequestListener">

    <argument id="router" type="service"/>

    <tag name="kernel.event_listener"
         event="kernel.request" method="onRequest" />
</service> 
```

这取决于用例，如果您只想使用动态默认值来生成 url，请使用上面的代码。如果您希望控制器在执行操作之前动态选择正确的默认值，您可以使用“kernel.controller”事件并设置请求属性（如果不存在）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T18:33:20.380

这是不可能的，但确实存在解决方法。创建一个额外的控制器来处理默认情况。

### 方法a - 转发请求

```
/**
 * @Route("/recent", name="show_recent_list_for_user")
 */
public function recentAction()
{
    $response = $this->forward('AcmeDemoBundle:Foo:bar', array(
        'year' => 2012,
    ));

    return $response;
} 
```

### 方法 b - 重定向请求

```
/**
 * @Route("/recent", name="show_recent_list_for_user")
 */
public function recentAction()
{
    $response = $this->redirect($this->generateUrl('show_list_for_user', array(
        'year' => 2012,
    )));

    return $response;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T14:50:55.153

恐怕这是不可能的，默认值是静态的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T15:36:16.810

用作默认占位符，例如

```
defaults={ "year" = "CURRENT_YEAR" } 
```

然后在您的控制器中执行以下操作：

```
if ($year == "CURRENT_YEAR") {
    $year = //do something to find the current year
} 
```

# jquery - jQuery 开启更改事件未触发我在标题中有以下内容： $('body').on('change', '#userFilter', function(){ console.log('changed'); }); 当点击一个选项卡时，这个元素会动态插入到页面上： <select id="userFilter"><option value="1">1</option> <option value="2">2</option> < ID：11885958 赞同：16 时间：2012-08-09T14:43:35.280 标签：jquery 回答 #1 赞同：20 时间：2012-08-09T14:45:16.833 将其包装在$(document).ready(function(){....})中，以便将 html 控件userFilter添加到 DOM 并可用于javascript $(document).ready(function() { $('body').on('change', '#userFilter', function(){ console.log('changed'); }); }); 传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码、jQuery docs的最佳位置。 回答 #2 赞同：1 时间：2014-04-02T22:12:39.717 尽管与 OQ 有点无关，但如果您是因为您的选择未触发而来到这里，请确保您之前没有选中alert(). 您需要关闭选项卡并重新打开该 URL 以使其再次明显触发。</select>

# stored-procedures - 存储过程参数默认值

> ID：11885960
> 
> 赞同：4
> 
> 时间：2012-08-09T14:43:58.080
> 
> 标签：stored-procedures, ssms

我正在尝试使用默认参数创建一个存储过程，在我的查询中我会这样做：

```
DECLARE @mydate DATETIME
DECLARE @MT DATETIME
DECLARE @MY DATETIME
SELECT @mydate = GETDATE()
SELECT @MT = DATEPART(MONTH,@mydate)
SELECT @MY =  DATEPART(YEAR,@mydate)

SELECT * FROM .... 
```

在我的存储过程中，我尝试如下，但是当我执行存储过程时，它会提示我输入参数值：

```
USE ..
GO
..
ALTER PROCEDURE ...
(@mydate DATETIME
,@MT DATETIME
,@MY DATETIME)

AS
BEGIN ...
SELECT @mydate = GETDATE()
SELECT @MT = DATEPART(MONTH,@mydate)
SELECT @MY =  DATEPART(YEAR,@mydate)
---
SELECT * FROM .... 
```

如何像在查询中一样在存储过程中设置参数值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:25:05.940

尝试这个..

我只放了一个参数，因为其他参数依赖于它。

**第一种方法**

```
USE ..
GO
..
ALTER PROCEDURE yourSP
(@mydateParam DATETIME)

AS
BEGIN ...
SELECT @mydate = @mydateParam
SELECT @MT = DATEPART(MONTH,@mydate)
SELECT @MY =  DATEPART(YEAR,@mydate)
  ---
SELECT * FROM .... 
```

调用 SP：

```
DECLARE @mydateParam DATETIME
SELECT @mydateParam = GETDATE()
execute yourSP @mydateParam 
```

**第二种方法**

```
ALTER Procedure yourSP
@mydateParam datetime = null
AS
BEGIN ...
IF @mydateParam is null
SET @mydateParam = getdate()
SELECT @mydate = @mydateParam
SELECT @MT = DATEPART(MONTH,@mydate)
SELECT @MY =  DATEPART(YEAR,@mydate)

   ---
SELECT * FROM .... 
```

调用 SP：

```
DECLARE @mydateParam DATETIME
SELECT @mydateParam = GETDATE()
execute yourSP @mydateParam 
```

或者

```
execute yourSP 
```

# xpages - Notes 客户端中的 XAgent

> ID：11885965
> 
> 赞同：1
> 
> 时间：2012-08-09T14:44:14.717
> 
> 标签：xpages, xpages-ssjs

我创建了一个 XAgent，以按照以下方式将 Notes 数据导出到 Excel：

[http://www.dominoguru.com/pages/developer2010_xpagexlsexport.html](http://www.dominoguru.com/pages/developer2010_xpagexlsexport.html)

[http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/How_to_export_to_Excel_or_other_formats](http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/How_to_export_to_Excel_or_other_formats)

我第一次在 Notes 客户端中运行代理时，它运行良好。但是，第二次触发 XAgent 时，我得到了位置选择器，让我决定将文件保存在哪里，但没有下载任何内容。最糟糕的是，我的 Notes 客户端被锁定了。我需要完全重启我的 PC 才能让 XAgent 再次工作。我正在使用 Notes 8.5.3

当我在 IE 中运行代理时，它每次都运行良好。

通过在 XPiNC 中运行的 XAgent 导出数据时，是否有其他人遇到过这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:05:02.997

我不建议在 XPiNC 中使用文件发射 XAgent。毕竟，您确实可以访问文件系统。所以直接写入文件然后只显示链接更容易。如果您遵循我的[XAgent 建议](http://www.wissel.net/blog/d6plinks/SHWL-8SLCVR)，您的所有工作代码都将位于您传递 Stream 对象的类中，因此您周围的包装器代码仅略有不同。

所以你会（伪代码）

```
 OutputStream out;
 if(runningInXPiNC()) {
    out = new FileOutputStream(new File(determineLocalFileName()));
 } else {
   out = getOutputStreamFromContextandResponseObject();
 }
 renderThatExelFile(out); 
```

页面的呈现属性将`true`用于 XPiNC，因此您可以显示指向的“打开文件”URL`"file://"+determineLocalFileName()`

# sql - 何时在同一台服务器上使用不同的 SQL 数据库？

> ID：11885966
> 
> 赞同：1
> 
> 时间：2012-08-09T14:44:17.417
> 
> 标签：sql, sql-server, sql-server-2008

我曾在多个 SQL 环境中工作过。在一个环境中，保存业务数据的不同表被拆分到多个不同的 SQL 数据库中，所有这些都在同一台服务器上。

在另一种环境中，几乎所有表都保存在一个 SQL 数据库中。

我正在创建一个与另一个项目密切相关的新项目，我一直在想是否应该将新表放在同一个 SQL 数据库或新的 SQL 数据库中。

这一切都在 MS SQL Server 上运行。

当我做出这个决定时，我需要考虑哪些因素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T15:40:04.577

从您的问题中很难说出您的实际需求是什么，或者您会考虑将哪些数据存储在不同的数据库中。但除了 Gordon 的观点之外，我还可以解决一些其他原因，为什么您可能希望对属于不同客户/用户的数据使用单独的数据库（并且这个答案假设一种可能的数据分离，无论是通过数据库还是模式，将是由客户）：

*   正如我在评论中提到的，一些客户会*要求*将他们的数据单独存储，您可能需要在看到一分钱或能够保护他们的业务之前以书面形式同意这一点。因此，您不妨为这种必然性做好准备。

*   将每个客户保存在他们自己的数据库中，如果他们超出您当前的服务器，则可以很容易地移动他们。在我之前的工作中，我们以这种方式设计了系统，后来它拯救了我们的培根——我们能够将客户完全转移到不同的服务器上，这基本上相当于元数据操作。在维护窗口期间，备份他们的数据库，将原始数据库设置为脱机，将备份恢复到新服务器，并更新一个配置表，告诉所有应用程序在哪里可以找到该数据库。这比尝试从其他人共享的数据库中提取所有数据要灵活得多......

*   单独的数据库还允许您以不同的方式处理维护。一位客户需要时间点恢复，而另一位则不需要？完美，您可以在不同的数据库上使用不同的恢复模式。比按文件组分离并尝试实施一些文件组级别的备份解决方案要容易得多，而且比仅在完全恢复中处理一个大型数据库要有效得多。

当然，这不是免费的，它是关于权衡的。多个数据库吓跑了一些人，但管理这样一个系统 13 年我可以告诉你，管理 100 或 500 个基本相同的数据库并不比在一个大型数据库中管理 500 个模式复杂得多（实际上我会这么说）在很多方面都不是这样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:56:00.333

数据库是备份和恢复的单位，因此在设计数据库结构时应该首先考虑。如果数据有不同的备份和恢复要求，那么它们非常适合单独的数据库。

不过，这只是问题的一半。在大多数环境中，所有数据库的备份/恢复几乎相同。它成为应用程序设计的问题。换句话说，情况变得相当主观。

在我现在工作的环境中，这里有一些将数据拆分到不同数据库的标准：

(1) 向广大受众发布表格。我们在表格中“发布”数据并将其放入数据库中，与用于构建它们或用于特殊目的的其他表格分开。诚然，SQL Server 声称“模式”是安全单元。但是，数据库在现实世界中似乎做得很好。

(2) 严格的安全要求。有些数据非常敏感，以至于律师必须批准谁可以看到它。这进入它自己的数据库，具有自己的访问权限。

(3) 数据表（用户可以看到）和描述生产系统的表分离。

(4) 将用于由熟练的分析师组进行一般查询的表（已发布的表）与用于特定报告/应用程序的表分开。

最后，我要补充一点。如果某些数据全天不断更新，而其他数据用于报告，我倾向于将它们放在不同的数据库中。这有助于在出现问题时将它们分开。

# php - 如何通过按钮单击设置 zip 下载？（标题）

> ID：11885969
> 
> 赞同：-2
> 
> 时间：2012-08-09T14:44:31.090
> 
> 标签：php, http-headers

我有一个带有表格的站点，并希望在每个`tr`. 单击按钮应弹出下载对话框（保存文件），然后按“保存”，下载文件。

我经常看到这种情况，但仍然不知道该怎么做。我已经通过表单设置了按钮：

```
<form method="get">
<input type="submit" value="<?php echo $paket; ?>" name="download" />
</form> 
```

where`$paket`包含没有`.zip`结尾的文件名。

在同一个 php 文件中，就在两个`require_once`语句下，我这样做了：

```
if ( isset( $_GET['download'] ) ) {
$name = $_GET['download'];
header( 'Content-Disposition: attachment; filename = '.$name.'.zip' );
header( 'Content-type: application/zip' );
} 
```

如果我按下按钮，我会收到以下错误：

```
Warning: Cannot modify header information - headers already sent by (output started at /is/lib/require.req:154) 
```

我知道标题信息需要放在最上面，但是`require_once`如果`require_once`后面几行，我应该如何使用我包含的函数？

有没有我找不到的不错（且万无一失）的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:47:26.737

Use an output buffer if you need to send content before the headers [http://php.net/manual/pt_BR/function.ob-start.php](http://php.net/manual/pt_BR/function.ob-start.php) . Anyway your donwload file should be on a different location or put the download handling part at the very top off the file and exit after it

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:50:21.967

不要使用`echo`,`print()`或类似的东西之前`header()`or `start_session()`。HTTP 特定信息必须在公共输出之前。

只需查看[php-documentation](http://www.php.net/manual/en/function.header.php)

```
"Remember that header() must be called before any actual output is sent [...]" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:50:31.540

必须始终在任何其他输出发生之前发送标头。这意味着它必须是当前文件（包含标头信息）中发送的第一件事，但它也必须是包含此文件的所有其他文件的第一件事。

### 不会工作

```
<?php
    // application logic here
    print "X";
    require 'header.php';
    // application logic here 
```

### 会

```
<?php
    // application logic here
    require 'header.php';
    // application logic here 
```

### 头文件.php

```
<?php
    // application logic here
    header( 'Content-type: application/zip' );
    // application logic here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T14:48:51.577

原来在第一个`<?php`标签之前有一个空格，导致了错误。

# c# - 使用 Automapper 制作具有 IList 属性的对象的完整副本

> ID：11885972
> 
> 赞同：1
> 
> 时间：2012-08-09T14:44:40.987
> 
> 标签：c#, automapper, asp.net-4.0, castle

所以我需要制作对象的副本。我在这里有一个模型“地方”，它有一个痛苦的 IList HasAndBelongsToMany 属性。我需要获取字段属性并复制它，但它仅复制参考。这是我所拥有的

```
public class place : ActiveRecordBase<place>
{
    public place() {  }

    private int place_id;
    [PrimaryKey("place_id")]
    virtual public int id
    {
        get { return place_id; }
        set { place_id = value; }
    }
    private IList<fields> Fields;
    [HasAndBelongsToMany(typeof(fields), Lazy = true, Table = "place_to_fields", ColumnKey = "place_id", ColumnRef = "field_id", NotFoundBehaviour = NotFoundBehaviour.Ignore, Cascade = ManyRelationCascadeEnum.AllDeleteOrphan)]
    virtual public IList<fields> field
    {
        get { return Fields; }
        set { Fields = value; }
    }
} 
```

并像这样使用自动映射器

```
place org = ActiveRecordBase<place>.Find(id);

Mapper.Reset();
Mapper.CreateMap<place, place>().ForMember(dest => dest.id, o => o.Ignore())
                                .ForMember(dest => dest.field, o => o.Ignore())
                                ; 
place copy = new place();
Mapper.Map(org, copy);

copy.SaveAndFlush(); 
```

哪个有效，因为我正在跳过该领域。我所希望的更像是：

```
Mapper.CreateMap<place, place>().ForMember(dest => dest.id, o => o.Ignore())
                                .ForMember(dest => dest.field.id, o => o.Ignore())
                                ; 
```

请参阅 .ForMember(dest => dest.id, o => o.Ignore()) 的第一行，这样我就不会复制地点对象的参考 ID。我需要对 place 属性字段执行相同的操作。我需要忽略 id 并在其其余属性上创建具有相同值的新条目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:15:50.010

您需要为字段类型创建映射并为字段的 id 添加“忽略”选项，就像您已经为地点类型所做的那样。

```
Mapper.CreateMap<fields, fields>().ForMember(dest => dest.id, o => o.Ignore());
Mapper.CreateMap<place, place>().ForMember(dest => dest.id, o => o.Ignore()); 
```

# vim - 如何使用 mvim 自动创建新文件

> ID：11885973
> 
> 赞同：0
> 
> 时间：2012-08-09T14:44:45.460
> 
> 标签：vim, macvim

当我运行`mvim .`它时，它会打开 NERDTree 但不会打开新文件/缓冲区。

1.  我怎么能做到这一点？理想情况下，当您`mvim .`从终端键入时，它会打开 MacVim，关闭 NERDtree，然后打开一个新缓冲区

2.  我不确定这是否可能，但有没有一种方法可以让我`mvim .`多次从命令行运行它不会每次都在新窗口中打开 vim？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:59:15.420

至于你的第二个问题，`--remote`如果**vim**是用`+clientserver`. MacVim 应该是 - 如果在命令行中`:echo has("clientserver")`打印`1`，那么这应该可以工作。这适用于使用 编译的任何 vim `+clientserver`，包括在终端窗口中运行的 vim。

当 vim 正在使用时`clientserver`，您可以运行 mvim 以便它将新文件发送到已经运行的 vim 实例，例如：

```
$ mvim --remote-silent file2.txt 
```

为`mvim`总是通过的别名`--remote-silent`。

有关`:help remote`更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T15:01:07.443

1.您是在要求它打开您的目录查看器，对吗？如果不是，为什么要启动 vim 并传递当前目录 ( `.`) 作为参数？将其关闭，它将从一个空缓冲区开始。

```
$ mvim 
```

2.查看 vim 手册 ( `man vim`)。你可能想要这个`--remote-silent`选项。

```
$ mvim --remote-silent file 
```

我个人经常使用它，以至于我在我的*.profile*中为它创建了一个别名：

```
alias v='mvim --remote-silent' 
```

# javascript - 为什么参数对象没有在控制台中显示它的方法

> ID：11885977
> 
> 赞同：0
> 
> 时间：2012-08-09T14:44:53.420
> 
> 标签：javascript

看看这段代码：

```
var args;
function foo(){
  args = arguments;
}

foo();

console.log(args); // []
args.callee(); // foo 
```

为什么我无法在控制台中看到参数对象的任何属性或方法却能够调用被调用方方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:46:33.493

您没有传递`foo`任何参数。此外，该`callee`属性是“不可枚举的”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T14:46:39.547

[免责声明：这假设您使用的是 Chrome 或 Firebug 控制台，没有标准，因此自定义控制台可能会做一些时髦的事情。]

因为您使用`console.log`了与“普通”对象不同的显示类似数组的对象。如果要查看对象的属性，请使用`console.dir`.

[* 要像数组一样，对象必须具有`length`属性和`splice`功能，或许多其他利基条件。]

# javascript - pagify.js 和重新加载/刷新 div

> ID：11885978
> 
> 赞同：0
> 
> 时间：2012-08-09T14:45:04.097
> 
> 标签：javascript, jquery

这里是新手，所以如果这是一个简单的问题，请原谅我：

我有一个使用 pafigy 散列网址的单页网站。首次加载页面时，它会将“home.html”文件拉入内容 div。

“home.html”内容包含加载到索引页面的“内容”div 时需要运行的脚本（jquery 循环）。如果我在“home.html”页面中链接到循环插件和 jquery 库，它会非常缓慢地加载到“内容”div 中。因此，我在主页上加载库并在“home.html”页面中引用它们。

最初加载网站时它工作正常；但是，如果我单击另一个菜单项，然后尝试返回“#home”（使用后退按钮或指向“#home”的链接），它会从“home.html”加载内容，但不会加载循环插件。

所以，我知道我需要刷新/重新加载“内容”div 中的 javascript，但我不知道该怎么做。任何帮助或智慧之言将不胜感激。

这是 index.html 页面上的 pagify 脚本：

```
<script type='text/javascript'>
$(document).ready(function() {
    $('#content').pagify({
        pages: ['home', 'food', 'wine'],
        animation: 'fadeIn',
        'default': 'home',
        cache: true

    });
});
</script> 
```

这是 home.html 页面上的 Jquery Cycle 脚本：

```
<script type='text/javascript'>
$(document).ready(function() {    
    $('#myslides').cycle({
        fx: 'fade',
        speedIn: 1000,
        speedOut: 200,
        delay: 1200,
        cleartypeNoBg: true
    });

    $('#myslides2').cycle({
        fx: 'scrollLeft',
        speedIn: 700,
        speedOut: 500,
        delay: 1000,
        cleartypeNoBg: true
    });
});​
</script> 
```

如果我的代码有问题或者我做错了，请再次原谅我。我正在尽我所能学习和研究，但我真的被困在这里。

另外，如果您需要更多代码，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:39:35.373

我认为您必须在加载该页面后触发 Cycle。也许您可以使用 pagify.js 上的 onChange 选项来实现。它应该看起来像这样：

```
<script type='text/javascript'>
$(document).ready(function() {
  $('#content').pagify({
        pages: ['home', 'food', 'wine'],
        animation: 'fadeIn',
        'default': 'home',
        cache: true,
        'onChange': function(home) { //wrap 'onChange' in quotes
           $('#myslides').cycle({
           //Your Cycle Plugin Goes Here
           });
        }
    });
});
</script> 
```

希望这个想法有所帮助。

# vim - 在 Vim 中映射 Alt+Tab

> ID：11885979
> 
> 赞同：2
> 
> 时间：2012-08-09T14:45:05.263
> 
> 标签：vim

在 Vim 中，我已将 F9 键映射到`:w<CR>`. 按F9后，我通常切换回Firefox查看结果。是否可以将一个键映射到 Alt+Tab 以便我可以保存文件并按下一个键进行切换？例如`nmap :w<Cr><M-Tab>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:36:28.260

Vim 处理 vim 键绑定，而不是系统键绑定。所以简而言之，不，你不能那样做。但是，您可以使用其他东西来完成此操作。例如`xdg-open`在 Linux 或`open`Mac 上是标准的“使用默认程序打开这个”命令。您可以使用它在 Web 浏览器中打开当前文件（或链接）。

```
nnoremap <F9> :w<CR>:!open %<CR> 
```

或者

```
nnoremap <F9> :w<CR>:!open http://mysite.com<CR> 
```

如果您使用的是 Mac，`osascript`如果您不想打开新窗口，则可以使用一些 AppleScript via 来简单地“激活”Firefox。我敢肯定 Linux 也有类似的东西，因为我不得不这样做已经有几年了。

# haskell - 用 Haskell 筛选素数

> ID：11885980
> 
> 赞同：5
> 
> 时间：2012-08-09T14:45:10.817
> 
> 标签：haskell, primes

好的，所以我正在尝试编写一个非常快速地计算素数的 Haskell 程序。大概我不是第一个尝试这样做的人。（特别是，我该死的*肯定*我看到了一些现有技术，但我现在找不到它......）

最初，我想计算小于 10^11 的素数。目前我已经让我的程序运行了大约 15 分钟，而且还不到一半。一些狂热的 C++ 程序员声称他的程序只需要 8~~秒~~ *分钟*。很明显，我做错了可怕的事情。

（如果重要的话，我当前的实现使用`IOUArray Integer Bool`多个线程来处理搜索空间的独立子范围。目前需要几秒钟才能从 10MB 数组块中删除所有 2 的倍数......）

请注意，10^11 对于 32 位算术来说太大了。此外，10^11 位 = 12.5 GB，*太多*的数据无法放入 Haskell 的 32 位地址空间。所以你不能一次将整个位图放在内存中。最后，请注意，小于 10^11 的素数只是小于 2^32 的阴影，因此您也无法一次存储所有实际整数。

* * *

**编辑：**显然我误读了时间信息。C++ 家伙*实际上*声称的是：

*   计数 < 10^11 的素数仅使用一个内核需要 8 分钟，使用 4 个内核需要 56 秒。（未指定 CPU 类型。）

*   计算 < 10^10 的素数需要 5 秒。（不确定正在使用多少个内核。）

对错误感到抱歉...

**编辑：**我的源代码可以在这里找到：http: [//hpaste.org/72898](http://hpaste.org/72898)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T16:23:33.697

使用`arithmoi`优秀的 StackOverflow 老师 Daniel Fischer 的包：

```
import Math.NumberTheory.Primes.Counting

main = print $ primeCount (10^11)

-- $ time ./arith
-- 4118054813
-- 
-- real 0m0.209s
-- user 0m0.198s
-- sys  0m0.008s 
```

这比你“狂热”的 C++ 朋友写的任何东西都要快 40 倍；也许他可以从 Haskell 源代码中学到一两件事……这里是[黑线鳕](http://hackage.haskell.org/packages/archive/arithmoi/0.4.0.3/doc/html/Math-NumberTheory-Primes-Counting.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-09T20:45:42.870

> 一些狂热的 C++ 程序员声称他的程序只需要 8 秒。

那是挂钟时间还是CPU时间？

如果挂钟，并且任务被分成 100 个 CPU，比如说，它不是很令人印象深刻（它很不错），如果分成 1000 个，那就太可怜了。

如果是 CPU 时间：

我很确定实际上*筛分*到 10 ^(11)并没有达到时间。

在那之前有几个超过 4×10 ^(9 个)素数，假设一个稍微正常的 2-3GHz CPU，每个素数有 4-6 个周期。

用 Eratosthenes 的筛子和阿特金的筛子都无法做到这一点。每个素数都必须被检查和计数，每个复合材料都必须这样标记和检查。这给出了筛子中每个数字两个循环的理论下限，不包括例如数组初始化、循环边界检查、循环变量更新、冗余标记。你不会接近那个理论界限。

几个数据点：

[Daniel Bernstein 的素数](http://cr.yp.to/primegen.html)（阿特金筛），调整筛分块以充分利用我的 32KB L1 缓存，需要 90 秒将素数筛分到 10 ^(11)并计数它们（234 秒，默认筛块大小为 8K字）在我的 Core i5 2410M (2.3GHz) 上。（它针对高达 2 ^(32)的范围进行了优化，但在此之上，它变得明显更慢，对于限制 10 ⁹时间分别为 0.49 和 0.64 秒。）

[我的 Eratosthenes 分段筛](http://hackage.haskell.org/package/arithmoi)，使用一些未暴露的内部结构来避免创建列表，筛分并在 340 秒内计数到 10 ^(11)（嗅：-/，但是嘿，对于 10 ⁹，它花了 2.92 秒 - 它越来越近了，在 10 之间^(12)和 10 ^(13)它超过[了 primegen](http://cr.yp.to/primegen.html) :) 使用公开的接口创建一个素数列表大约会使所用时间加倍，就像用 32 位 GHC 编译它一样。

所以我敢打赌，如果是正确的，那么报告的 8 秒时间（如果 CPU 时间）是用于计算素数数量的算法，而无需实际筛选整个过程。正如[应用程序的回答](https://stackoverflow.com/a/11887778/1011995)所示，这可以做得**更快**。

```
dafis@schwartz:~/Haskell/Repos/arithmoi> time tests/primeCount 100000000000
4118054813

real    0m0.145s
user    0m0.139s
sys     0m0.006s 
```

> 请注意，10^11 对于 32 位算术来说太大了。此外，10^11 位 = 12.5 GB，太多的数据无法放入 Haskell 的 32 位地址空间。所以你不能一次将整个位图放在内存中。

要筛选该范围，您*必须*使用分段筛。即使您不受 32 位地址空间的限制，使用如此大的数组也会由于频繁的缓存未命中而产生糟糕的性能。您的程序将花费大部分时间来等待从主内存传输的数据。筛选适合您的 L2 缓存的块（我没有成功尝试通过使筛子适合 L1 来使其更快，我猜 GHC 运行时的开销太大而无法使其工作）。

此外，从筛子中消除一些小素数的倍数，这减少了所需的工作，并通过使筛子更小来进一步提高性能。消除偶数是微不足道的，3 的倍数容易，5 的倍数并不难。

> 最后，请注意，小于 10^11 的素数只是小于 2^32 的阴影，因此您也无法一次存储所有实际整数。

如果您将筛子存储为位数组列表，并删除 2、3 和 5 的倍数，则需要大约 3.3GB 来存储块，因此如果您真的可以拥有多达 4GB 的空间，它会很合适。但是您应该让不再需要的块立即被垃圾收集。

> （以防万一，我当前的实现使用 IOUArray Integer Bool 和多个线程来处理搜索空间的独立子范围。目前从 10MB 数组块中删除所有 2 的倍数需要几秒钟...）

这很重要。

*   用于`Int`索引和`unsafeRead`/`unsafeWrite`来读取和修改数组。`Integer`计算比`Int`计算慢得多，并且你得到的边界检查`readArray`/`writeArray` [真的很痛](https://stackoverflow.com/a/11776988/1011995)。
*   10MB 的块太大了，你会失去缓存局部性。最多使用几百 KB 的块（L2 缓存减去一些空间用于其他需要的东西）。
*   尽管如此，即使使用`Integer`索引、边界检查和 10MB 块，删除 2 的倍数也不应该花费几秒钟。我们可以看看你的代码吗？

**假期后更新：**

无需深奥的魔法，八*分钟*即可将质数筛选到 10 ^(11 。)我看不出从一核到四核如何能产生八倍的加速，因为这里不应该有缓存效应，但无论如何，它可能是，没有看到代码，我无法调查。

因此，让我们看一下*您的*代码。

首先，一个错误：

```
vs <-
  mapM
    (\ start -> do
      let block = (start, start + block_size)
      v <- newEmptyMVar
      writeChan queue $ do
        say $ "New chunk " ++ show block
        chunk <- chunk_new block
        sieve_top base chunk
        c <- chunk_count chunk
        putMVar v c
      return v
    )
    (takeWhile (< target) $ iterate (+block_size) base_max) 
```

每个数字`base_max + k*block_size`出现在两个块中，如果其中任何一个是素数，则该素数被计算两次，您也应该将上限限制在`target`.

现在到性能方面：

跳出来的一件事是它*真的*很健谈，如此健谈，一旦你调整了缓存（我为 512KB L2 缓存占用了 256KB 块），它就可以测量了——然后线程因为争夺消息`block_size`而减慢了速度。`stdout``if prime < 100 then say $ "Sieve " ++ show prime else return ()`

让我们看看您的（静音）筛分循环：

```
chunk_sieve :: Chunk -> Integer -> IO ()
chunk_sieve array prime = do
  (min, max) <- getBounds array
  let n0 = min `mod` prime
  let n1 = if n0 == 0 then min else min - n0 + prime
  mapM_
    (\ n -> writeArray array n (n == prime))
    (takeWhile (<= max) $ iterate (+prime) n1) 
```

花费时间的一件事是，将每个指数与标出倍数的素数进行比较。每个单一的比较都很便宜（虽然比比较贵得多`Int`），但是大量的比较，其中只有一个可能产生`True`，加起来。在循环之后无条件地写入`False`并且如果需要`True`在素数的索引处写入会产生相当大的加速。

出于计时目的，我将目标减少到 10 ⁹并在两个内核上运行它。原始代码花费了 155 秒（经过，292 秒用户），减少了`block_size`148 秒，静音了 143 秒。省略比较，

```
mapM_
  (\ n -> writeArray array n False)
  (takeWhile (<= max) $ iterate (+prime) n1)
when (min <= prime && prime <= max) $ writeArray array prime True 
```

它以 131 秒的速度运行。

现在是时候进行一些更大的加速了。我是否已经提到[边界检查会花费大量时间](https://stackoverflow.com/a/11776988/1011995)？由于循环条件保证不会尝试越界访问（并且素数足够小以至于不会`Int`发生 -overflow），我们应该真正使用未经检查的访问：

```
chunk_sieve :: Chunk -> Integer -> IO ()
chunk_sieve array prime = do
  (min, max) <- getBounds array
  let n0 = min `mod` prime
      n1 = if n0 == 0 then min else min - n0 + prime
      n2 = fromInteger (n1 - min)
      mx = fromInteger (max - min)
      pr = fromInteger prime
  mapM_
    (\ n -> unsafeWrite array n False)
    (takeWhile (<= mx) $ iterate (+pr) n2)
  when (min <= prime && prime <= max) $ writeArray array prime True 
```

这将运行时间减少到 96 秒。好多了，但仍然很糟糕。罪魁祸首是

```
takeWhile (<= mx) $ iterate (+pr) n2 
```

GHC 不能很好地融合那个组合，你会得到一个`Int`被遍历的 boxed 的列表。将其替换为算术序列，`[n2, n2+pr .. mx]`GHC 会愉快地使用 unboxed `Int#`s 创建一个循环，时间为 37 秒。

好多了，但仍然很糟糕。现在最大的时间消耗是

```
chunk_count :: Chunk -> IO Integer
chunk_count array = do
    (min, max) <- getBounds array
    work min max 0
  where
    work i max count = do
      b <- readArray array i
      let count' = count + if b then 1 else 0
      evaluate count'
      let i' = i+1
      if i' > max
        then return count'
        else work i' max count' 
```

同样，边界检查需要花费**大量**时间。和

```
chunk_count :: Chunk -> IO Integer
chunk_count array = do
    (min, max) <- getBounds array
    work 0 (fromInteger (max-min)) 0
  where
    work i max count = do
      b <- unsafeRead array i
      let count' = count + if b then 1 else 0
      evaluate count'
      let i' = i+1
      if i' > max
        then return count'
        else work i' max count' 
```

我们减少到 15 秒。现在，`evaluate count'`在. 在最后一行使用而不是将运行时间减少到 13 秒。以更适合（至少对于 GHC）的方式定义，`work``count``else work i' max $! count'``evaluate``work`

```
chunk_count :: Chunk -> IO Integer
chunk_count array = do
    (min, max) <- getBounds array
    let mx = fromInteger (max-min)
        work i !ct
            | mx < i    = return ct
            | otherwise = do
                b <- unsafeRead array i
                work (i+1) (if b then ct+1 else ct)
    work 0 0 
```

将时间缩短到 6.55 秒。现在我们处于`say $ "New chunk " ++ show block`产生可测量差异的情况下，禁用它会使我们降低到 6.18 秒。

但是，通过从数组中读取一个字节来计算设置位，屏蔽掉不需要的位并将每个单独的位与 0 进行比较并不是最有效的方法。从数组中读取整个`Word`s （通过[castIOUArray](http://hackage.haskell.org/packages/archive/array/0.4.0.0/doc/html/Data-Array-IO.html#v:castIOUArray)）并使用[popCount 会更快](http://hackage.haskell.org/packages/archive/base/4.5.1.0/doc/html/Data-Bits.html#v:popCount)，如果“你知道你在做什么......”，这会让我们缩短到 4.25 秒；当素数的平方变得大于块的上限时停止标记

```
sieve_top :: Chunk -> Chunk -> IO ()
sieve_top base chunk = work 2
  where
    work prime = do
      chunk_sieve chunk prime
      mp <- chunk_next_prime base prime
      case mp of
        Nothing -> return ()
        Just p' -> do
            (_,mx) <- getBounds chunk
            when (p'*p' <= mx) $ work p' 
```

到 3.9 秒。仍然不壮观，但考虑到我们从哪里开始，还不错。只是为了说明在减少其他不良行为后缓存局部性的重要性：具有原始 10MB 块大小的相同代码需要 8.5 秒。

代码中的另一个小问题是所有线程都使用相同的*可变*小素数数组进行筛选。由于它是可变的，因此必须同步对其的访问，这会增加一些开销。只有两个线程，开销不会太大，使用*不可变*副本进行筛选只会将时间减少到 3.75 秒，但我希望更多线程的效果会更大。（我只有两个物理内核 - 带有超线程 - 所以使用两个以上的线程来做同样的工作会导致减速，这可能会使从中得出的结论无效，但是使用四个线程，我用不可变数组得到 4.55 秒而不是 5.3 秒使用可变数组。这似乎证实了不断增长的同步开销。）

通过消除更多的计算和为 GHC 的优化器编写代码（更多的工作者/包装器转换，一些静态参数转换），仍然可以获得一些`Integer`收益，但不是很多，可能是 10-15%。

下一个重大改进是通过从筛子中消除偶数来获得。这将工作、分配和运行时间减少了一半以上。任何素筛都不应该考虑偶数，真的，那只是无意义的浪费工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-08T06:58:55.780

这是一个奇怪的问题/答案，因为接受的答案与问题不匹配：问题要求帮助提高筛子的速度（正确选择 Eratosthenes 实现的页面分段筛子）[但接受的答案](https://stackoverflow.com/a/11887778/549617)不使用筛子，而是一种数值分析技术，只是一个库。虽然这对于非常快速地找到最大范围内的素数总数是很好的（并且在其他语言中有更快和更广泛的版本可以做到这一点，[例如 Kim Walisch 在 C++ 中的 primecount](https://github.com/kimwalisch/primecount)，也[可以快速计算素数之和范围](https://github.com/kimwalisch/primesum)，筛子可用于进行特定类型的分析，例如寻找素数间隙，素数双倍，三元组等的存在。（[通常是 K-Tuple primes](https://en.wikipedia.org/wiki/Prime_k-tuple) ) 等。 事实上，一般数值分析技术，如[Meissel-Lehmer 算法](https://en.wikipedia.org/wiki/Meissel%E2%80%93Lehmer_algorithm)，其中大多数都是基于的，需要一个“种子素数”源来启动，这最好由优化的埃拉托色尼筛。

实际上，根据上述链接，Kim Walisch 的 primecount 已经为其构建了 GHC/Haskell API，并且可以通过外部函数接口 (FFI) 轻松调用，因此比 arithmoi 库更好，因为它更快。它是如此之快，以至于它是目前计算素数高达 1e28 的记录保持者！如果必须为 Haskell 程序提供这样的值并且不在乎他们是否理解它是如何获取它的，它会在几十毫秒内计算出 1e11 的素数。

以类似的方式，如果筛子是真正需要的，那么[Kim Walisch 的素筛](https://github.com/kimwalisch/primesieve)也有 GHC Haskell FFI，也可以直接调用。

虽然使用库可以完成工作，但仅仅通过使用它们就不会学到任何关于如何实现它们的知识。因此，[Daniel Fischer（DF's）非常好的教程答案的原因](https://stackoverflow.com/a/11891681/549617)以及他开始的后续系列。DF 的回答显示了如何改进问题的代码，但是没有一个总结可以显示在完成他的所有建议后代码应该是什么样子；这一点尤其重要，因为 OP 的 hpaste 中的原始问题代码已经消失（幸运的是，这只是一个很好的例子，说明如何不这样做，但也许代码应该嵌入问题中以供参考），我们只能通过 DF 在他的回答中的评论重建它所做的事情。这一系列答案旨在纠正如果有人需要纯 GHC Haskell 中的这种筛子，首先是对 DF 教学所引导的代码的摘要，然后是进一步的阶段性改进。

**TLDR；**跳到我发布的 Haskell 代码的最后一个答案的末尾，它实际上几乎与 Kim Walisch 的素数筛一样快或一样快，到目前为止，这可能是世界上最快的，至少在 10 到 10 的较小范围内千亿左右，除了非常优化的 YAFU 版本之外，其他任何东西都比不上任何东西，它对于大范围的速度可能快 5% 左右。 **DF 在车轮分解之前的最终代码据说比原始问题代码快 40 倍，我将其扩展到我的代码再次快 30 到 32 倍，总共比原始问题代码快 1200 到 1280 倍！**.

**原始问题代码**

这将是我唯一一次引用它，因为它不再可用（而且我认为无论如何都不值得修改）：我唯一喜欢该代码的地方是线程池的实现，但即使这样也有缺陷它用于`mapM`将要由线程处理的整个作业队列提供给通道，这是一个非延迟函数，因此可能会将大量工作推送到消耗大量内存的作业通道上，而不仅仅是推送足够多的内存努力让所有线程保持忙碌，然后再为从结果返回的每一个人提供一份工作`Channel`。我将在此答案底部的代码和后续代码中更正这一点。实际上，只需要一个结果 MVar 池，因为 GHC 运行时分叉新线程的速度比将新工作通过管道传输到等待池所需的速度更快。

原始代码和 DF 改进代码的一个问题是它们都没有使用“-fllvm”编译器标志来使用 LLVM 后端代码生成器。对于我们在这里尝试编写的紧密循环，LLVM 可以将每个循环的时间减少大约两倍。原始代码的循环非常不紧密，LLVM 无能为力，但这并不重要，但 DF 的代码确实有紧密的循环，并且可以通过将循环时间减少到大约 60% 来受益。

使用`MVar`'s 的另一个问题（因此`Chan`'s) 是它们不是特别快，每次激活的开销约为 3 毫秒。我们在 DF 在他的最终分析中的回答中得到了这个问题的证据，他说“使用四个线程，不可变数组得到 4.55 秒，而可变数组得到 5.3 秒”，而使用两个线程则得到 3.75 秒。现在他的机器只有两个内核，额外的两个线程是超线程的，与另外两个共享大部分相同的资源，所以使用它们的人并不期望有更好的性能，但也不期望性能更差，因为这里。原因是开销太大，以至于添加效率低下的内核实际上会增加额外的工作并减慢最终结果。我在我的四个“真实”中也看到了这一点 使用 LLVM 后端提高效率后的线程/核心机器。在使用所有四个代码时，我只将时间减少到大约 55%，这与我只使用两个内核时总执行时间实际上增加的情况是一致的。由于 `MVar's 是我们可以使用 GHC 实现“等待结果”的唯一方法，因此解决方案是使工作切片更大（更粗粒度的多线程），因此这种开销变成可以忽略不计的一部分，这是我在第二个答案中的算法改进。

一旦重载问题得到解决，也不需要像在无限深度的地方那样使用通道来接收工作并返回结果，所以我消除了它们，只支持一个“循环”数组，它的元素数量为池中的进程。

**测试环境**

我不确定 DF 是否还有他的 Sandy Bridge 笔记本电脑，虽然我有一个 Sandy Bridge CPU，但它目前正在停机进行维护。然而，[在线 IDE 网站 Wandbox](https://wandbox.org)使用的 Broadwell CPU 与 DF 的机器在 2.3 GHz 的回答中使用的额定值大致相同，涡轮增压到 2.9 GHz，用于两核/四线程（超线程）的单线程使用。这与 DF 的机器具有相同的性能，正如我采用他引用的“arithmoi”库的内部结构并强制它运行十亿的范围所证明的那样。 [这个魔杖盒链接](https://wandbox.org/permlink/EIqNhR0LQ2y4lxsH)显示它的运行时间与他在回答中提到的几乎完全相同的 2.92 秒。我没有费心去计算结果（使用弹出计数只有大约 0.01 毫秒），因为这不会改变比较，而只是强制它在默认的 128 KB 缓冲区大小的范围内运行。

因此，在 Wandbox 中，我们有一个易于引用的可比机器；但是，它有一个限制，它不支持使用 LLVM 后端，它的使用对于优化我们将使用的紧密剔除循环很重要。因此，我将在我自己的机器上进行有无 LLVM 的比较，这是一个 3.2 GHz 的英特尔 Skylake i5-2500，单线程使用提升到 3.6 GHz。这有一个轻微的限制，因为 Skylake 在架构上进行了进一步的改进，可以更好地预测分支，并且在正确预测分支时将分支省略至零时间，因此结果不会直接按使用的时钟速度进行缩放；由于我们正在开发的循环几乎将所有时间都花在了紧密的循环中，

**快速 Sieve 算法背后的原理**

这些原则只有两个，如下：

1.  对于给定的筛分范围，保持较低的操作总数很重要。
2.  每个操作平均必须占用少量的 CPU 时钟周期。

最终的执行效率就是这两者的乘积。

**绩效目标**

DF 似乎认为 Atkin 和 Bernstein 的[“primegen”](http://cr.yp.to/primegen.html)是筛分性能的“黄金标准”。这不是主要原因，它不会也不能平均每个操作占用少量 CPU 时钟周期（原则 2），并且它消耗的周期数随着范围的增加而增加，速度快于我认为的“黄金”标准”- TLDR 中引用的 Kim Walisch 的主筛。虽然阿特金筛 (SoA) 的这种实现完全正确，但它通过了上述原则 1)，因为它快速收敛到恒定的操作数 0。正如网页上该点上方的公式所估计的那样（1e11 为 0.2984，随着范围的增加而更高），它在效率方面没有达到预期。SoA 文档进行的比较与 Eratosthenese (SoE) 的比较存在缺陷：在与“primegen”代码相同的下载中是“eratspeed”的代码，它是 SoE 的参考版本，筛分超过十亿。然而，他们削弱了该参考版本，因为他们将其限制为与烘焙到 SoA 中相同的 2/3/5 轮分解（无法增加），而不是使用最大轮分解组合筛（有他们知道的文件中的证据）。这使得该范围内的操作数量略高于 4 亿次，而 SoA 的操作数约为 258 次。700万。接下来，他们似乎进一步削弱了参考 SoE，使筛子缓冲区比用于 SoA 的缓冲区更小，从而增加了 SoE 的每次操作时间，因此与 SoA 的时间差不多，尽管这些操作比那些操作更简单的 SoA。通过这种方式，他们声称 SoA 比 SoA 快了大约 40%。

Berstein 以类似的方式对这两者的紧密内部操作循环进行了一些手动优化，这可能是由于当时的 C 编译器无法完全优化这些循环，并且为了让那些编译器不撤消这些手优化他在注释中指出，编译器应该只在第一级优化下运行。这对于今天的“gcc”版本不再适用，因为两者的性能都随着“-O3”高级优化而提高。如果两者都设置为 8192 32-bit words (32 Kilobytes) 并使用上述优化编译，它们在 DF 型机器上都在大约 0.49/0.50 秒内筛选到十亿，表明 CPU 的数量对于“eratspeed”，每次剔除的周期减少了约 36%。如果应用了最大轮分解组合原则，那么它应该再快 40%，这是在对紧密的内部剔除循环进行优化之前；SoA 无法对剔除循环进行这些优化，因为与 SoE 的每个循环的固定跨度相比，它必须使用每个操作的可变跨度循环。这个参考“eratspeed”SoE 实现将在答案后面进一步讨论，因为这是导致我改进算法答案的方法。

作为关于 SoA“primegen”的最后一点，Bernstein 似乎认为筛缓冲区需要限制为小于 CPU L1 缓存大小。虽然这对于他开发这项工作的 CPU 来说可能是正确的，但对于 L2 高速缓存性能比 SoA 快得多并且接近参考 SoE 紧凑内循环时间的现代 CPU 来说不再正确。因此，如果使筛选缓冲区等于 CPU L2 缓存大小（在这些 CPU 的情况下为 256 Kiloytes），“primegen”的筛选到 10 亿的时间几乎不会发生变化，大约为 0.50 秒，但时间筛分到 1000 亿个几乎线性缩放到大约 52 秒（应该如此）。这是有效的，因为缓冲区已增加，因此 SoA 不会很快受到操作跨度溢出的困扰，但它不会

作为参考，当单线程使用 Wandbox 上的两个线程时，“primesieve”类型的算法在大约 0.18 秒内筛选到十亿个，大约 25 秒到 1000 亿个范围内，这两个时间都减少了大约两倍/DF CPU 范围。

**DF 对他的回答的最终结果和提出的进一步工作的状态**

DF 表示，当单线程/在两个线程上分别运行时，他的最终答案代码将在大约 7.5/3.75 秒内筛选到十亿。这代表了大约 25.514 亿次操作，在 2.9 GHz 的 CPU 时钟下，每个剔除 (CpC) 代表大约 9 个 CPU 时钟。这不好，因为基本的剔除循环需要大约 3.5 CpC。这是不使用上述 LLVM 的结果。

他建议第一个进一步的改进是通过赔率进行车轮分解——仅将速度提高大约 2.5 倍，并且使用更多扩展的车轮分解进行进一步改进是相当容易的。这是真的。然而，他在“arithmoi”库的素数函数中进行扩展轮因式分解的尝试非常失败：在 2.9 GHz 下进行 4.048 亿次剔除需要 2.92 秒，大约是 21 CpC，就像 460.7 亿次剔除需要 340 秒一样筛选到 1000 亿个的筛选也非常糟糕，每次筛选的时钟都差不多。这太慢了，没有理由进行这种扩展的 2/3/5 轮子分解，因为结果将与仅使用赔率相同或慢，即使在 9 CpC 时也是如此。这种糟糕的效率的原因是他使用了一些复杂的，因此很慢，数学来减少车轮分解的剔除，但这些计算需要大量的机器时间。有一些查找表方法可以做到这一点，每次剔除大约 12 个 CPU 时钟周期，速度大约是前者的两倍，但在如此小的范围内使用它们仍然太慢；它们的使用应仅限于为非常大的范围增加有效范围，其中它们所花费的时间百分比仅占总时间的一小部分。

为了说明这些结果有多糟糕，[这里有一个参考 Wandbox Javascript 仅赔率版本](https://wandbox.org/permlink/dgKSwZZks9UlPJ57)，在大约 2.14 秒或大约 6.15 CpC 内筛选到十亿；这在我的 Skylake 机器上以 1.54 秒运行，由于上面提到的 5.4 CpC 架构的改进，时间减少到时钟速率比率之上。

此外，在 Haskell 中，[这是我提交给 RosettaCode 的仅赔率版本，这是第二个更快的版本](http://rosettacode.org/wiki/Sieve_of_Eratosthenes#Page_Segmented_Sieve_using_a_mutable_unboxed_array)，它在 2.26 秒[内在参考 Wandbox CPU 上运行，在](https://wandbox.org/permlink/xOJclT72puKKjGjQ)没有 LLVM 的情况下编译成十亿，大约 6.4 CpC。在我的 Skylake 机器上，这在没有/有 LLVM 的情况下分别以 1.83 秒和 1.023 秒运行（分别为 6.4/3.6 CpC）并且在没有 LLVM/LLVM 的情况下分别在大约 210/127 秒内筛分到 1000 亿（分别为 6.7/4.0 CpC ）。请注意，这些比“arithmoi”库轮分解版本更快。这将成为我第二个答案中进一步算法改进的基础。

因此，以下代码是一个仅赔率算法，按照 DF 提到的作为他的最终答案执行：

```
-- Multi-threaded Page-Segmented Bit-Packed Odds-Only Sieve of Eratosthenes... 
-- "Running a modern CPU single threaded is like
--  running a race car on one cylinder" me ...

-- compile with "-threaded" to use maximum available cores and threads...
-- compile with "-fllvm" for highest speed by a factor of up to two times.

{-# LANGUAGE FlexibleContexts, ScopedTypeVariables #-} -- , BangPatterns, MagicHash, UnboxedTuples, Strict
{-# OPTIONS_GHC -O2 -fllvm #-} -- or -O3 -keep-s-files -fno-cse -rtsopts

import Data.Int ( Int32, Int64 )
import Data.Word ( Word32, Word64 )
import Data.Bits ( (.&.), (.|.), shiftL, shiftR, popCount )
import Data.Array.Base (
         UArray(..), listArray, assocs, unsafeAt, elems,
         STUArray(..), newArray,
         unsafeRead, unsafeWrite,
         unsafeThaw, unsafeFreezeSTUArray, castSTUArray )
import Data.Array.ST ( runSTUArray )
import Control.Monad.ST ( ST, runST )
import Data.Time.Clock.POSIX ( getPOSIXTime )

-- imports to do with multi-threading...
import Data.Array (Array)
import Control.Monad ( forever, when )
import GHC.Conc ( getNumProcessors )
import Control.Monad.Cont ( join )
import Control.Concurrent
    ( ThreadId,
      forkIO,
      getNumCapabilities,
      myThreadId,
      setNumCapabilities )
import Control.Concurrent.MVar ( MVar, newEmptyMVar, putMVar, takeMVar )
import System.IO.Unsafe ( unsafePerformIO )

type Prime = Word64
type PrimeNdx = Int64
type StartAddr = Int32
type StartAddrArr = UArray Int StartAddr
type BasePrimeRep = Word32
type BasePrimeRepArr = UArray Int BasePrimeRep
type SieveBuffer = UArray Int Bool -- no point to artificial index!

-- constants related to odds-only...
cWHLPRMS :: [Prime]
cWHLPRMS = [2] -- excludes even numbers other than 2
cFRSTSVPRM :: Prime
cFRSTSVPRM = 3 -- start at first prime past the wheel prime(s)

makeSieveBuffer :: Int -> SieveBuffer
{-# INLINE makeSieveBuffer #-}
makeSieveBuffer szbts = runSTUArray $ do
  newArray (0, szbts - 1) False

-- count the remaining un-marked composite bits using very fast popcount...
{-# INLINE countSieveBuffer #-}
countSieveBuffer :: Int -> SieveBuffer -> Int
countSieveBuffer lstndx sb = runST $ do
  cmpsts <- unsafeThaw sb -- :: ST s (STUArray s PrimeNdx Bool)
  wrdcmpsts <-
    (castSTUArray :: STUArray s Int Bool ->
                      ST s (STUArray s Int Word64)) cmpsts
  let lstwrd = lstndx `shiftR` 6
  let lstmsk = 0xFFFFFFFFFFFFFFFE `shiftL` (lstndx .&. 63)
  let loopwi wi cnt =
        if wi < lstwrd then do
          v <- unsafeRead wrdcmpsts wi
          case cnt - popCount v of
            ncnt -> ncnt `seq` loopwi (wi + 1) ncnt
        else do
          v <- unsafeRead wrdcmpsts lstwrd
          return $ fromIntegral (cnt - popCount (v .|. lstmsk))
  loopwi 0 (lstwrd * 64 + 64)

cWHLPTRNLEN64 :: Int
cWHLPTRNLEN64 = 2048

cWHLPTRN :: SieveBuffer -- twice as big to allow for overflow...
cWHLPTRN = makeSieveBuffer (131072 + 131072)

-- could be faster using primitive copyByteArray#...
-- in preparation for filling with pre-cull pattern...
fillSieveBuffer :: PrimeNdx -> SieveBuffer -> SieveBuffer
fillSieveBuffer lwi sb@(UArray _ _ rng _) = runSTUArray $ do
  ptrn <- unsafeThaw cWHLPTRN :: ST s (STUArray s Int Bool)
  ptrnu64 <- (castSTUArray :: STUArray s Int Bool ->
                                  ST s (STUArray s Int Word64)) ptrn
  cmpsts <- unsafeThaw sb :: ST s (STUArray s Int Bool)
  cmpstsu64 <- (castSTUArray :: STUArray s Int Bool ->
                                  ST s (STUArray s Int Word64)) cmpsts
  let lmt = rng `shiftR` 6
      lwi64 = lwi `shiftR` 6
      loop i | i >= lmt = return cmpsts
             | otherwise =
                 let mdlo = fromIntegral $ lwi64 `mod` fromIntegral cWHLPTRNLEN64
                     sloop j
                       | j >= cWHLPTRNLEN64 = loop  (i + cWHLPTRNLEN64)
                       | otherwise = do
                          v <- unsafeRead ptrnu64 (mdlo + j)
                          unsafeWrite cmpstsu64 (i + j) v; sloop (j + 1) in sloop 0
  loop 0

cullSieveBuffer :: PrimeNdx -> [BasePrimeRepArr] -> SieveBuffer -> SieveBuffer
cullSieveBuffer lwi bpras sb@(UArray _ _ rng _) = runSTUArray $ do
  cmpsts <- unsafeThaw sb :: ST s (STUArray s Int Bool)
  let limi = lwi + fromIntegral rng - 1
      loopbpras [] = return cmpsts -- stop warning incomplete pattern match!
      loopbpras (bpra@(UArray _ _ bprrng _) : bprastl) =
        let loopbpi bpi
              | bpi >= bprrng = loopbpras bprastl
              | otherwise =
                let bp = unsafeAt bpra bpi
                    bpndx = (fromIntegral bp - cFRSTSVPRM) `shiftR` 1
                    rsqri = fromIntegral ((bpndx + bpndx) * (bpndx + cFRSTSVPRM)
                                             + cFRSTSVPRM) - lwi in
                if rsqri >= fromIntegral rng then return cmpsts else
                let bpint = fromIntegral bp
                    bppn = fromIntegral bp
                    cullbits c | c >= rng = loopbpi (bpi + 1)
                               | otherwise = do unsafeWrite cmpsts c True
                                                cullbits (c + bpint)
                    s = if rsqri >= 0 then fromIntegral rsqri else
                        let r = fromIntegral (-rsqri `rem` bppn)
                        in if r == 0 then 0 else fromIntegral (bppn - r)
                in cullbits s in loopbpi 0
  loopbpras bpras

-- multithreading goes here...

{-# NOINLINE cNUMPROCS #-}
cNUMPROCS :: Int -- force to the maximum number of threads available
cNUMPROCS = -- 1
-- {-
  unsafePerformIO $ do -- no side effects because global!
  np <- getNumProcessors; setNumCapabilities np
  getNumCapabilities
--}

-- list of culled soeve buffers from index with give bit size...
makePrimePagesFrom :: forall r. PrimeNdx -> Int ->
                                (PrimeNdx -> SieveBuffer -> r) -> Bool -> [r]
makePrimePagesFrom stwi szbts cnvrtrf thrdd =
  -- great, we can make an extra thread pool whenever we might need more, and
  -- it should die and be collected whenever this goes out of scope!
  let bpras = makeBasePrimeRepArrs thrdd
      jbparms() =
        let loop lwi szb =
              (lwi, szb) : loop (lwi + fromIntegral szb) szb
        in loop stwi szbts in
  if thrdd then
    let

      {-# NOINLINE strttsk #-}
      strttsk lwi szbts bpras mvr = -- do some strict work but define it non-strictly,
        forkIO $ do -- else it will run in forground before threading!
          -- and return it using a MVar; force strict execution in thread...
          putMVar mvr $! cnvrtrf lwi $ cullSieveBuffer lwi bpras
                           $ fillSieveBuffer lwi $ makeSieveBuffer szbts

      -- start a result pool, initialized to start with the first tasks...
      {-# NOINLINE rsltpool #-}
      rsltpool :: Array Int (MVar r) = unsafePerformIO $! do
        mvlst <- mapM (const newEmptyMVar) [ 1 .. cNUMPROCS ] -- unique copies
        mapM_ (\ (mvr, (lwi, szb)) -> strttsk lwi szb bpras mvr)
                                          $ zip mvlst $ jbparms()
        return $! listArray (0, cNUMPROCS - 1) mvlst

      -- lazily loop over the entire job list...
      loop (fdhd : fdtl) =
        let {-# NOINLINE getnxt #-}
            getnxt ((lwi, szb), i) = unsafePerformIO $! do -- wait for and get result of next page
              let mvr = unsafeAt rsltpool i
              r <- takeMVar mvr -- recycle mvr for next
              strttsk lwi szb bpras mvr; return $! r
        in getnxt fdhd : loop fdtl

  -- lazily cycle over the rest of the jobs forever...
  in rsltpool `seq` loop $ zip (drop cNUMPROCS $ jbparms())
                               (cycle [ 0 .. cNUMPROCS - 1 ]) else 

-- back to non multi-threaded functions...

  let loop ((lwi, szb) : jbpmstl) =
        (cnvrtrf lwi . cullSieveBuffer lwi bpras . fillSieveBuffer lwi .
           makeSieveBuffer) szb : loop jbpmstl
  in loop $ jbparms()

makeBasePrimeRepArrs :: Bool -> [BasePrimeRepArr]
makeBasePrimeRepArrs thrdd = 
  let sb2bpra :: PrimeNdx -> SieveBuffer -> BasePrimeRepArr
      sb2bpra lwi sb@(UArray _ _ rng _) =
        let len = countSieveBuffer (rng - 1) sb
            bpbs = fromIntegral cFRSTSVPRM + fromIntegral (lwi + lwi) in
        listArray (0, len - 1) [ bpbs + fromIntegral (i + i) |
                                          (i, False) <- assocs sb ]                
      fkbpras = [ sb2bpra 0 $ makeSieveBuffer 512 ]
      bpra0 = sb2bpra 0 $ cullSieveBuffer 0 fkbpras $ makeSieveBuffer 131072
  in bpra0 : makePrimePagesFrom 131072 131072 sb2bpra thrdd

-- result functions are here...

-- prepends the wheel factorized initial primes to the sieved primes output...
-- some faster not useing higher-order-functions, but still slow so who cares?
primes :: Int -> Bool -> [Prime]
primes szbts thrdd = cWHLPRMS ++ concat prmslsts where
  -- convert a list of sieve buffers to a UArray of primes...
  sb2prmsa :: PrimeNdx -> SieveBuffer -> UArray Int Prime
  sb2prmsa lwi sb@(UArray _ _ rng _) = -- bsprm `seq` loop 0 where
    let bsprm = cFRSTSVPRM + fromIntegral (lwi + lwi)
        len = countSieveBuffer (rng - 1) sb in
    bsprm `seq` len `seq`
      listArray (0, len - 1)
                [ bsprm + fromIntegral (i + i) | (i, False) <- assocs sb ]
  prmslsts = map elems $ makePrimePagesFrom 0 szbts sb2prmsa thrdd

-- count the primes from the sieved page list to the limit...
countPrimesTo :: Prime -> Int -> Bool -> Int64
countPrimesTo limit szbts thrdd =
  let lmtndx = fromIntegral $ (limit - cFRSTSVPRM) `shiftR` 1 :: PrimeNdx
      sb2cnt lwi sb@(UArray _ _ rng _) =
        let nlwi = lwi + fromIntegral rng in
        if nlwi < lmtndx then (countSieveBuffer (rng - 1) sb, nlwi)
        else (countSieveBuffer (fromIntegral (lmtndx - lwi)) sb, nlwi)
      loop [] cnt = cnt
      loop ((cnt, nxtlwi) : cntstl) ocnt =
        if nxtlwi > lmtndx then ocnt + fromIntegral cnt
        else loop cntstl $ ocnt + fromIntegral cnt
  in if limit < cFRSTSVPRM then
       if limit < 2 then 0 else 1
     else loop (makePrimePagesFrom 0 szbts sb2cnt thrdd) 1

-- test it...
main :: IO ()
main = do
  let limit = 10^9 :: Prime
  -- page segmentation sized for most efficiency;
  -- fastest with CPU L1 cache size but more address calculation overhead;
  -- a little slower with CPU L2 cache size but just about enough to
  -- cancell out the gain from reduced page start address calculations...
  let cSIEVEPGSZ = (2^18) * 8 :: Int -- CPU L2 cache size in bits
  let threaded = True

  putStrLn $ "There are " ++ show cNUMPROCS ++ " threads available."

  strt <- getPOSIXTime
--  let answr = length $ takeWhile (<= limit) $ primes cSIEVEPGSZ threaded -- slow way
  let answr = countPrimesTo limit cSIEVEPGSZ threaded -- fast way
  stop <- answr `seq` getPOSIXTime -- force evaluation of answr b4 stop time!
  let elpsd = round $ 1e3 * (stop - strt) :: Int64

  putStr $ "Found " ++ show answr
  putStr $ " primes up to " ++ show limit
  putStrLn $ " in " ++ show elpsd ++ " milliseconds." 
```

这已经从我上面提到的 RosettaCode 提交中进行了重构，通过使主筛循环和辅助基础主要进料循环可以具有不同的筛缓冲区大小，以及添加多线程（如上所述在 DF 之上进行了改进）成为可能。它的运行速度与 DF 在 CpC 中提到的最终答案大致相同，相当于他的没有 LLVM 的机器（大约 3/1.5 秒，9 CpC 到 10 亿）并且以 1 秒到 10 亿/125 秒到 1000 亿的速度运行（分别为 3.7/4.1 CpC）在我的带有 LLVM 单线程的 Skylake 机器上，由于如上所述的不够“粗粒度”的问题，大约有一半是多线程的。

这个答案只比 DF 的代码快不到两倍，主要是由于推荐使用 LLVM 后端。

# android - 为什么没有相机结果？

> ID：11885990
> 
> 赞同：3
> 
> 时间：2012-08-09T14:45:58.117
> 
> 标签：android, android-camera, actionbarsherlock

从我`Activity`的扩展`SherlockFragmentActivity`（来自优秀的`ActionBarSherlock`库）中，我提出了一个简单的请求以从相机中获取图像：

```
public void getPhoto() {
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(cameraIntent, CAMERA_REQUEST);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    // .....
} 
```

执行时，在相机应用程序打开时（在拍照之前）以零（和匹配的）`onActivityResult()`调用。如果我再拍照并接受它，就不叫了。`resultCode``requestCode``onActivityResult()`

我知道`Fragment`支持库中存在类似的错误，但我在`Fragment`和中看到了这个问题`Activity`。

我已经检查过并且我正在调用正确的`startActivityForResult()`（即 on`Fragment`或`Activity`），并且我已经在我能想到的所有地方逐步完成了代码。我开始怀疑 Support Library 错误意味着`onActivityResult`没有被调用是否`Fragment`也会影响`Activity`使用时`ActionBarSherlock`，但我不敢相信 ABS 会中断`onActivityResult()`。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:26:21.640

已在清单`Activity`中指定。`singleInstance`我现在知道这与 不兼容，`startActivityForResult()`当`Activity`更改为`singleTop`时，一切都按预期工作。

# java - 如何减少 DataNucleus + Derby 的堆使用量

> ID：11885992
> 
> 赞同：1
> 
> 时间：2012-08-09T14:46:00.373
> 
> 标签：java, heap-memory, derby, datanucleus

我有一个 Java 桌面应用程序，它从服务中分批 50K 下载 700K 条目并将它们存储在 Derby 库中

问题是这仅在我设置了 -Xmx1024 时才有效，否则应用程序崩溃并显示堆错误消息。虽然最终的数据库大小是100M左右

您能否建议一种优化以下代码以使用更少内存的方法

进行下载的代码很像这样

```
public static final void getItems() {
  ItemsRequest req = new ItemsRequest();
  Gson g = new Gson();
  int next_index_to_read = 0;
  int max_read_entry_count = 50000;
  req.setLimit(max_read_entry_count);
  ItemsResponse resp = null;
  do{
    resp = g.fromJson(postRequest(g.toJson(req)), ItemsResponse.class);
    resp.saveItems();
    next_index_to_read += max_read_entry_count;
    req.setFrom(next_index_to_read);
  }while(resp.getTotalItemsEntryCount()>next_index_to_read);
} 
```

负责保存数据的代码是

```
public class ItemsResponse
  public void saveItems() {
    PersistenceManagerFactory pmf = PMF.getPmf();

    PersistenceManager pm = pmf.getPersistenceManager();
    Transaction tx = pm.currentTransaction();

    try {
      tx.begin();

      if (data != null) {
        for (Item item : data) {
          Item item = null;
          try {
            item = pm.getObjectById(Item.class, item.getItemId());
          } catch (Exception e) {
            continue;
          }
          pm.makePersistent(item);
        }
      }
      tx.commit();
    } catch (Exception e) {
      Logger.getLogger("com.example").error("ItemResponse.saveData", e);
    } finally {
      if (tx.isActive()) {
        tx.rollback();
      }
    }
    pm.close();
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:50:58.847

[http://www.datanucleus.org/products/accessplatform_3_1/jdo/troubleshooting.html](http://www.datanucleus.org/products/accessplatform_3_1/jdo/troubleshooting.html)

# java - 在这段java代码中实例化是如何发生的？

> ID：11885994
> 
> 赞同：1
> 
> 时间：2012-08-09T14:46:08.647
> 
> 标签：java

我的代码是：-

```
class Building{}

class Barn extends Building{
    public static void main(String[]args){
        Building build1 = new Building();
        Barn bar1 = new Barn();
        Barn bar2 = (Barn)build1;
        Object obj1 = (Object)build1;
        String str1 = (String)build1;    //also an error over here
        Building build2 = (Building)bar1;
    }
} 
```

我是 Java 新手。所以请任何人都可以解释一下这里是如何进行实例化的，比如如何访问每个对象。

代码中也有错误，请帮助我纠正它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:49:46.083

您不能转换`Building`为`String`. 两个类（继承、接口等）之间没有关系。

肯定 a`Building`是a 的情况，但是通过将对象强制转换为`Object`，您会丢失有关对象的信息。`Building``Object`

实例化一个变量是从右到左关联的；您为每个对象创建一个新实例，并将其分配给一个变量。如果你正在做一个演员，那么重要的是要确保你要转换的类型与你得到的类型相关（即转换`Object`为`Integer`- 这可能会或可能不会起作用，这取决于你是否返回可以合理地转换为`Integer`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:57:20.430

鉴于这种`Barn bar2 = (Barn)build1;`

等于^(((Barn)build1))之后的部分意味着您正在将**build1** **从**Building类型转换**为****Barn**类型并将其值传递给 bar2。

您可以这样做，因为任何 Barn**都是**建筑物，正如您在类定义^((Barn extends Building))中扩展的那样。您还可以将任何类类型强制转换为 Object 类，因为在 Java 中，所有类都从 Object 扩展而来，也就是一切都是 Object。

尝试将其转换为 String 时遇到该错误，因为 Building 与 String 类没有连接。知道了？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:05:36.330

```
 Building b = (Building) (new Barn()); 
```

将可以访问 Building 的所有成员和字段，而忽略添加的 Barn 字段（称为向下转换）；

```
 Barn b = (Barn) (new Building()); 
```

访问特定于谷仓的成员时会导致空指针或使它们未初始化......我有点忘记了当你向上转换时会发生什么，因为除非你期待一个 Cat ，否则将 Animal 转换为 Cat 没有什么意义； )

如果没有特定的方法或调试器，您将无法注意到差异。我在您的代码中没有看到用例，只有强制转换。

# ruby-on-rails - 如何在我的模型 Rails 中的 select_tag 上使用 if 语句

> ID：11885996
> 
> 赞同：0
> 
> 时间：2012-08-09T14:46:20.927
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jruby

好的，所以当我提交表单时，这些是通过我的浏览器传递的参数：

```
{"Search"=>"Job Letter and CD #",
"utf8"=>"✓",
"search"=>"g",
"commit"=>"Search"} 
```

基本上我需要做的是在我的模型测试中第一个参数“搜索”。前任：

```
if Search == "Job Letter and CD #"
..do stuff..
elsif Search == "something else"
..do different stuff..
else
..do something.. 
```

我一直在敲我的头，无法弄清楚。我的红宝石代码在下面，我可能会删掉一些“结束”之类的东西以节省空间。

index.html.erb

```
<form class="well form-search right">
<%= select_tag "Search", options_for_select([ "Job Letter and CD #", "Date", "Cust",            "Job", "Date shipped", "Date billed", "Billed by" ], params[:search]) %>
<%= form_tag reports_path, :method => 'get' do %> 
<%= text_field_tag :search, params[:search], :class=> "form-search", :align => "right" %>
<%= submit_tag "Search", [ :JOBLETTER_CD_NUMBER, :DATE, :CUST, :JOB, :DATE_SHIPPED, :DATE_BILLED, :billed_by ] => nil, :class => "btn btn-success", :align => "right" %> 
```

report.rb 模型

```
 def self.search(search)  
if Search == 'Job Letter and CD #'
  where('JOBLETTER_CD_NUMBER LIKE ?', "%#{search}%") 
elsif Search == 'Date'
  where('DATE ?', "%#{search}%")
else
  scoped  
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:59:03.270

我想您需要将 2 个参数传递给模型中存在的搜索功能

```
def self.search(what_to_search,search_string)
  if what_to_search == 'Job Letter and CD #'
     where('JOBLETTER_CD_NUMBER LIKE ?', "%#{search_string}%") 
  elsif what_to_search == 'Date'
     where('DATE ?', "%#{search_string}%")
  else
      scoped  
  end
end 
```

并以这种方式从您的控制器调用搜索

```
Search.search(params[:Search],params[:search]) 
```